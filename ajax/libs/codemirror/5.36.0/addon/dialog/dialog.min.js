!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(s){function d(e,o,n){var t;return(t=e.getWrapperElement().appendChild(document.createElement("div"))).className=n?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof o?t.innerHTML=o:t.appendChild(o),t}function p(e,o){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=o}s.defineExtension("openDialog",function(e,o,n){n||(n={}),p(this,null);var t=d(this,e,n.bottom),i=!1,r=this;function u(e){if("string"==typeof e)c.value=e;else{if(i)return;i=!0,t.parentNode.removeChild(t),r.focus(),n.onClose&&n.onClose(t)}}var l,c=t.getElementsByTagName("input")[0];return c?(c.focus(),n.value&&(c.value=n.value,!1!==n.selectValueOnOpen&&c.select()),n.onInput&&s.on(c,"input",function(e){n.onInput(e,c.value,u)}),n.onKeyUp&&s.on(c,"keyup",function(e){n.onKeyUp(e,c.value,u)}),s.on(c,"keydown",function(e){n&&n.onKeyDown&&n.onKeyDown(e,c.value,u)||((27==e.keyCode||!1!==n.closeOnEnter&&13==e.keyCode)&&(c.blur(),s.e_stop(e),u()),13==e.keyCode&&o(c.value,e))}),!1!==n.closeOnBlur&&s.on(c,"blur",u)):(l=t.getElementsByTagName("button")[0])&&(s.on(l,"click",function(){u(),r.focus()}),!1!==n.closeOnBlur&&s.on(l,"blur",u),l.focus()),u}),s.defineExtension("openConfirm",function(e,o,n){p(this,null);var t=d(this,e,n&&n.bottom),i=t.getElementsByTagName("button"),r=!1,u=this,l=1;function c(){r||(r=!0,t.parentNode.removeChild(t),u.focus())}i[0].focus();for(var a=0;a<i.length;++a){var f=i[a];!function(o){s.on(f,"click",function(e){s.e_preventDefault(e),c(),o&&o(u)})}(o[a]),s.on(f,"blur",function(){--l,setTimeout(function(){l<=0&&c()},200)}),s.on(f,"focus",function(){++l})}}),s.defineExtension("openNotification",function(e,o){p(this,u);var n,t=d(this,e,o&&o.bottom),i=!1,r=o&&void 0!==o.duration?o.duration:5e3;function u(){i||(i=!0,clearTimeout(n),t.parentNode.removeChild(t))}return s.on(t,"click",function(e){s.e_preventDefault(e),u()}),r&&(n=setTimeout(u,r)),u})});