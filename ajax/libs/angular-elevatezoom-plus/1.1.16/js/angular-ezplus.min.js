!function(){"use strict";angular.module("ezplus",[]).directive("ezPlus",function(){return{restrict:"A",scope:{ezpModel:"=",ezpOptions:"=",onComplete:"=ezpOnComplete",onDestroy:"=ezpOnDestroy",onImageClick:"=ezpOnImageClick",onImageSwap:"=ezpOnImageSwap",onImageSwapComplete:"=ezpOnImageSwapComplete",onShow:"=ezpOnShow",onZoomedImageLoaded:"=ezpOnZoomedImageLoaded"},link:e};function e(e,d,o){var s,r={onComplete:function(){e.onComplete&&e.onComplete()&&e.onComplete()()},onDestroy:function(){e.onDestroy&&e.onDestroy()&&e.onDestroy()()},onImageClick:function(){e.onImageClick&&e.onImageClick()&&e.onImageClick()()},onImageSwap:function(){e.onImageSwap&&e.onImageSwap()&&e.onImageSwap()()},onImageSwapComplete:function(){e.onImageSwapComplete&&e.onImageSwapComplete()&&e.onImageSwapComplete()()},onShow:function(){e.onShow&&e.onShow()&&e.onShow()()},onZoomedImageLoaded:function(){e.onZoomedImageLoaded&&e.onZoomedImageLoaded()&&e.onZoomedImageLoaded()()}};function u(){var e="hide",o=angular.element(d).data("ezPlus");o&&(o.showHideZoomContainer(e),o.showHideWindow(e),o.showHideTint(e),o.showHideLens(e))}function g(){var e="show",o=angular.element(d).data("ezPlus");o&&(o.showHideLens(e),o.showHideTint(e),o.showHideWindow(e),o.showHideZoomContainer(e))}e.ezpOptions&&angular.extend(r,e.ezpOptions),r.appendto&&(r.zoomContainerAppendTo=r.appendto),r.loader&&(s=r.loader),e.$on("ezp-hidesAll",function(e,o){u()}),e.$on("ezp-showAll",function(e,o){g()}),e.$on("ezp-disableZoom",function(e,o){var n=angular.element(d).data("ezPlus");n&&n.changeState("disable")}),e.$on("ezp-enableZoom",function(e,o){var n=angular.element(d).data("ezPlus");n&&n.changeState("enable")}),e.$watch("ezpModel",function(e,o){var n=e,a=n&&n.thumb||"",t=n&&n.small||"",l=n&&n.large||"",i=angular.element(d).data("ezPlus");if(i)if(n){u(),s&&i.swaptheimage(s,s);var m=p(t);i.swaptheimage(m,l),g()}else i.closeAll();else if(n){var m=p();m&&d.attr("src",m),d.attr("data-zoom-image",l),angular.element(d).ezPlus(r)}function p(e){var o=e;return"thumb"===r.initial?o=a:"small"===r.initial?o=t:"large"===r.initial&&(o=l),o}}),e.$on("$destroy",function(){var e=angular.element(d).data("ezPlus");e&&e.destroy()})}})}();