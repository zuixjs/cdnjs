!function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(e,t){"use strict";if(!window.postMessage)return t;e.extend(t.prototype.options,{vimeoVideoIdProperty:"vimeo",vimeoPlayerUrl:"//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID",vimeoPlayerIdPrefix:"vimeo-player-",vimeoClickToPlay:!0});var i=t.prototype.textFactory||t.prototype.imageFactory,a=function(e,t,i,a){this.url=e,this.videoId=t,this.playerId=i,this.clickToPlay=a,this.element=document.createElement("div"),this.listeners={}},n=0;return e.extend(a.prototype,{canPlayType:function(){return!0},on:function(e,t){return this.listeners[e]=t,this},loadAPI:function(){function t(){!a&&n.playOnReady&&n.play(),a=!0}for(var i,a,n=this,o="//f.vimeocdn.com/js/froogaloop2.min.js",r=document.getElementsByTagName("script"),s=r.length;s;)if(s-=1,r[s].src===o){i=r[s];break}i||((i=document.createElement("script")).src=o),e(i).on("load",t),r[0].parentNode.insertBefore(i,r[0]),/loaded|complete/.test(i.readyState)&&t()},onReady:function(){var e=this;this.ready=!0,this.player.addEvent("play",function(){e.hasPlayed=!0,e.onPlaying()}),this.player.addEvent("pause",function(){e.onPause()}),this.player.addEvent("finish",function(){e.onPause()}),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){this.listeners.pause(),delete this.playStatus},insertIframe:function(){var e=document.createElement("iframe");e.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId),e.id=this.playerId,this.element.parentNode.replaceChild(e,this.element),this.element=e},play:function(){var e=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api("play"):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this.element),this.player.addEvent("ready",function(){e.onReady()})):this.loadAPI())},pause:function(){this.ready?this.player.api("pause"):this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),e.extend(t.prototype,{VimeoPlayer:a,textFactory:function(e,t){var o=this.options,r=this.getItemProperty(e,o.vimeoVideoIdProperty);return r?(void 0===this.getItemProperty(e,o.urlProperty)&&(e[o.urlProperty]="//vimeo.com/"+r),n+=1,this.videoFactory(e,t,new a(o.vimeoPlayerUrl,r,o.vimeoPlayerIdPrefix+n,o.vimeoClickToPlay))):i.call(this,e,t)}}),t});