(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{var a;if(typeof window!=="undefined"){a=window}else{if(typeof global!=="undefined"){a=global}else{if(typeof self!=="undefined"){a=self}else{a=this}}}a.Alt=b()}}})(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(j,i,k){var m={};var f=Object.create;var p=Object.defineProperties;var q=Object.defineProperty;var s=function(v){var e=arguments[1]===undefined?{}:arguments[1];return{value:v,configurable:!!e.c,writable:!!e.w,enumerable:!!e.e}};var t=function(e){return e&&e[l.toStringTag]==="Symbol"};var u=undefined;try{var r=q({},"y",{get:function(){return 1}});u=r.y===1}catch(o){u=false}var h={};var n=function(y){y=String(y);var v="";var w=0;while(h[y+v]){v=w+=1}h[y+v]=1;var e="Symbol("+y+""+v+")";if(u){q(Object.prototype,e,{get:undefined,set:function(x){q(this,e,s(x,{c:true,w:true}))},configurable:true,enumerable:false})}return e};var g=f(null);function l(v){if(this instanceof l){throw new TypeError("Symbol is not a constructor")}v=v===undefined?"":String(v);var e=n(v);if(!u){return e}return f(g,{__description__:s(v),__tag__:s(e)})}p(l,{"for":s(function(e){var w=String(e);if(m[w]){return m[w]}var v=l(w);m[w]=v;return v}),keyFor:s(function(e){if(u&&!t(e)){throw new TypeError(""+e+" is not a symbol")}for(var v in m){if(m[v]===e){return u?m[v].__description__:m[v].substr(7,m[v].length-8)}}})});p(l,{hasInstance:s(l("hasInstance")),isConcatSpreadable:s(l("isConcatSpreadable")),iterator:s(l("iterator")),match:s(l("match")),replace:s(l("replace")),search:s(l("search")),species:s(l("species")),split:s(l("split")),toPrimitive:s(l("toPrimitive")),toStringTag:s(l("toStringTag")),unscopables:s(l("unscopables"))});p(g,{constructor:s(l),toString:s(function(){return this.__tag__}),valueOf:s(function(){return"Symbol("+this.__description__+")"})});if(u){q(g,l.toStringTag,s("Symbol",{c:true}))}i.exports=typeof Symbol==="function"?Symbol:l},{}],2:[function(h,g,i){function p(s,q,r){this.fn=s;this.context=q;this.once=r||false}function o(){}o.prototype._events=undefined;o.prototype.listeners=function l(t){if(!this._events||!this._events[t]){return[]}if(this._events[t].fn){return[this._events[t].fn]}for(var s=0,r=this._events[t].length,q=new Array(r);s<r;s++){q[s]=this._events[t][s].fn}return q};o.prototype.emit=function m(r,t,s,q,B,A){if(!this._events||!this._events[r]){return false}var z=this._events[r],x=arguments.length,y,w;if("function"===typeof z.fn){if(z.once){this.removeListener(r,z.fn,true)}switch(x){case 1:return z.fn.call(z.context),true;case 2:return z.fn.call(z.context,t),true;case 3:return z.fn.call(z.context,t,s),true;case 4:return z.fn.call(z.context,t,s,q),true;case 5:return z.fn.call(z.context,t,s,q,B),true;case 6:return z.fn.call(z.context,t,s,q,B,A),true}for(w=1,y=new Array(x-1);w<x;w++){y[w-1]=arguments[w]}z.fn.apply(z.context,y)}else{var u=z.length,v;for(w=0;w<u;w++){if(z[w].once){this.removeListener(r,z[w].fn,true)}switch(x){case 1:z[w].fn.call(z[w].context);break;case 2:z[w].fn.call(z[w].context,t);break;case 3:z[w].fn.call(z[w].context,t,s);break;default:if(!y){for(v=1,y=new Array(x-1);v<x;v++){y[v-1]=arguments[v]}}z[w].fn.apply(z[w].context,y)}}}return true};o.prototype.on=function k(s,r,q){var t=new p(r,q||this);if(!this._events){this._events={}}if(!this._events[s]){this._events[s]=t}else{if(!this._events[s].fn){this._events[s].push(t)}else{this._events[s]=[this._events[s],t]}}return this};o.prototype.once=function f(s,r,q){var t=new p(r,q||this,true);if(!this._events){this._events={}}if(!this._events[s]){this._events[s]=t}else{if(!this._events[s].fn){this._events[s].push(t)}else{this._events[s]=[this._events[s],t]}}return this};o.prototype.removeListener=function j(w,u,t){if(!this._events||!this._events[w]){return this}var s=this._events[w],r=[];if(u){if(s.fn&&(s.fn!==u||(t&&!s.once))){r.push(s)}if(!s.fn){for(var q=0,v=s.length;q<v;q++){if(s[q].fn!==u||(t&&!s[q].once)){r.push(s[q])}}}}if(r.length){this._events[w]=r.length===1?r[0]:r}else{delete this._events[w]}return this};o.prototype.removeAllListeners=function n(q){if(!this._events){return this}if(q){delete this._events[q]}else{this._events={}}return this};o.prototype.off=o.prototype.removeListener;o.prototype.addListener=o.prototype.on;o.prototype.setMaxListeners=function e(){return this};o.EventEmitter=o;o.EventEmitter2=o;o.EventEmitter3=o;g.exports=o},{}],3:[function(f,g,e){g.exports.Dispatcher=f("./lib/Dispatcher")},{"./lib/Dispatcher":4}],4:[function(j,k,i){var h=j("./invariant");var g=1;var e="ID_";function f(){this.$Dispatcher_callbacks={};this.$Dispatcher_isPending={};this.$Dispatcher_isHandled={};this.$Dispatcher_isDispatching=false;this.$Dispatcher_pendingPayload=null}f.prototype.register=function(m){var l=e+g++;this.$Dispatcher_callbacks[l]=m;return l};f.prototype.unregister=function(l){h(this.$Dispatcher_callbacks[l],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",l);delete this.$Dispatcher_callbacks[l]};f.prototype.waitFor=function(m){h(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var l=0;l<m.length;l++){var n=m[l];if(this.$Dispatcher_isPending[n]){h(this.$Dispatcher_isHandled[n],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n);continue}h(this.$Dispatcher_callbacks[n],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n);this.$Dispatcher_invokeCallback(n)}};f.prototype.dispatch=function(l){h(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.");this.$Dispatcher_startDispatching(l);try{for(var m in this.$Dispatcher_callbacks){if(this.$Dispatcher_isPending[m]){continue}this.$Dispatcher_invokeCallback(m)}}finally{this.$Dispatcher_stopDispatching()}};f.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching};f.prototype.$Dispatcher_invokeCallback=function(l){this.$Dispatcher_isPending[l]=true;this.$Dispatcher_callbacks[l](this.$Dispatcher_pendingPayload);this.$Dispatcher_isHandled[l]=true};f.prototype.$Dispatcher_startDispatching=function(l){for(var m in this.$Dispatcher_callbacks){this.$Dispatcher_isPending[m]=false;this.$Dispatcher_isHandled[m]=false}this.$Dispatcher_pendingPayload=l;this.$Dispatcher_isDispatching=true};f.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null;this.$Dispatcher_isDispatching=false};k.exports=f},{"./invariant":5}],5:[function(g,h,f){var e=function(i,s,r,q,p,n,l,k){if(false){if(s===undefined){throw new Error("invariant requires an error message argument")}}if(!i){var o;if(s===undefined){o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.")}else{var m=[r,q,p,n,l,k];var j=0;o=new Error("Invariant Violation: "+s.replace(/%s/g,function(){return m[j++]}))}o.framesToPop=1;throw o}};h.exports=e},{}],6:[function(h,f,j){Object.defineProperty(j,"__esModule",{value:true});var i=(function(){function t(x,v){for(var u=0;u<v.length;u++){var w=v[u];w.enumerable=w.enumerable||false;w.configurable=true;if("value" in w){w.writable=true}Object.defineProperty(x,w.key,w)}}return function(w,u,v){if(u){t(w.prototype,u)}if(v){t(w,v)}return w}})();j["default"]=o;function m(v){if(v&&v.__esModule){return v}else{var t={};if(v!=null){for(var u in v){if(Object.prototype.hasOwnProperty.call(v,u)){t[u]=v[u]}}}t["default"]=v;return t}}function s(t){return t&&t.__esModule?t:{"default":t}}function k(t,u){if(!(t instanceof u)){throw new TypeError("Cannot call a class as a function")}}var p=h("es-symbol");var n=s(p);var l=h("../symbols/symbols");var g=m(l);var r=h("../utils/AltUtils");var q=m(r);var e=(function(){function u(x,v,w,z,y){k(this,u);this[g.ACTION_UID]=v;this[g.ACTION_HANDLER]=w.bind(this);this.actions=z;this.actionDetails=y;this.alt=x}i(u,[{key:"dispatch",value:function t(v){this.alt.dispatch(this[g.ACTION_UID],v,this.actionDetails)}}]);return u})();function o(E,y,v,z,B){var t=q.uid(E[g.ACTIONS_REGISTRY],""+y+"."+v);E[g.ACTIONS_REGISTRY][t]=1;var x=n["default"]["for"]("alt/"+t);var C={namespace:y,name:v,id:t,symbol:x};var D=new e(E,x,z,B,C);var A=D[g.ACTION_HANDLER];A.defer=function(){for(var F=arguments.length,G=Array(F),H=0;H<F;H++){G[H]=arguments[H]}setTimeout(function(){D[g.ACTION_HANDLER].apply(null,G)})};A[g.ACTION_KEY]=x;A.data=C;var u=E.actions[y];var w=q.uid(u,v);u[w]=A;return A}f.exports=j["default"]},{"../symbols/symbols":10,"../utils/AltUtils":11,"es-symbol":1}],7:[function(h,e,k){Object.defineProperty(k,"__esModule",{value:true});var i=(function(){function v(z,x){for(var w=0;w<x.length;w++){var y=x[w];y.enumerable=y.enumerable||false;y.configurable=true;if("value" in y){y.writable=true}Object.defineProperty(z,y.key,y)}}return function(y,w,x){if(w){v(y.prototype,w)}if(x){v(y,x)}return y}})();function n(x){if(x&&x.__esModule){return x}else{var v={};if(x!=null){for(var w in x){if(Object.prototype.hasOwnProperty.call(x,w)){v[w]=x[w]}}}v["default"]=x;return v}}function s(v){return v&&v.__esModule?v:{"default":v}}function l(v,w){if(!(v instanceof w)){throw new TypeError("Cannot call a class as a function")}}var p=h("eventemitter3");var j=s(p);var r=h("es-symbol");var o=s(r);var m=h("../symbols/symbols");var f=n(m);var g=h("../../utils/functions");var q=n(g);var u=(0,o["default"])();var t=(function(){function z(F,C,E,B){var G=this;l(this,z);this[u]=new j["default"]();this[f.LIFECYCLE]=C[f.LIFECYCLE];this[f.STATE_CONTAINER]=E||C;this.preventDefault=false;this._storeName=C._storeName;this.boundListeners=C[f.ALL_LISTENERS];this.StoreModel=B;var A=C.output||function(H){return H};this.emitChange=function(){G[u].emit("change",A.call(C,G[f.STATE_CONTAINER]))};var D=function D(H,J){try{return H()}catch(I){if(C[f.HANDLING_ERRORS]){G[f.LIFECYCLE].emit("error",I,J,G[f.STATE_CONTAINER]);return false}else{throw I}}};q.assign(this,C[f.PUBLIC_METHODS]);this.dispatchToken=F.dispatcher.register(function(J){G.preventDefault=false;G[f.LIFECYCLE].emit("beforeEach",J,G[f.STATE_CONTAINER]);var I=C[f.LISTENERS][J.action]||C.otherwise;if(I){var H=D(function(){return I.call(C,J.data,J.action)},J);if(H!==false&&!G.preventDefault){G.emitChange()}}if(C.reduce){D(function(){C.setState(C.reduce(G[f.STATE_CONTAINER],J))},J);if(!G.preventDefault){G.emitChange()}}G[f.LIFECYCLE].emit("afterEach",J,G[f.STATE_CONTAINER])});this[f.LIFECYCLE].emit("init")}i(z,[{key:"getEventEmitter",value:function y(){return this[u]}},{key:"listen",value:function w(A){var B=this;this[u].on("change",A);return function(){return B.unlisten(A)}}},{key:"unlisten",value:function x(A){if(!A){throw new TypeError("Unlisten must receive a function")}this[f.LIFECYCLE].emit("unlisten");this[u].removeListener("change",A)}},{key:"getState",value:function v(){return this.StoreModel.config.getState.call(this,this[f.STATE_CONTAINER])}}]);return z})();k["default"]=t;e.exports=k["default"]},{"../../utils/functions":13,"../symbols/symbols":10,"es-symbol":1,eventemitter3:2}],8:[function(m,g,y){Object.defineProperty(y,"__esModule",{value:true});function x(B){if(B&&B.__esModule){return B}else{var z={};if(B!=null){for(var A in B){if(Object.prototype.hasOwnProperty.call(B,A)){z[A]=B[A]}}}z["default"]=B;return z}}function e(z){return z&&z.__esModule?z:{"default":z}}var v=m("es-symbol");var k=e(v);var s=m("../symbols/symbols");var t=x(s);var w=m("../../utils/functions");var l=x(w);var p={waitFor:function u(){for(var A=arguments.length,B=Array(A),C=0;C<A;C++){B[C]=arguments[C]}if(!B.length){throw new ReferenceError("Dispatch tokens not provided")}var z=B;if(B.length===1){z=Array.isArray(B[0])?B[0]:B}var D=z.map(function(E){return E.dispatchToken||E});this.dispatcher.waitFor(D)},exportAsync:function j(z){this.registerAsync(z)},registerAsync:function h(B){var E=this;var A=0;var C=l.isFunction(B)?B(this.alt):B;var D=Object.keys(C).reduce(function(F,H){var I=C[H];var G=l.isFunction(I)?I(E):I;var J=["success","error","loading"];J.forEach(function(K){if(G[K]&&!G[K][t.ACTION_KEY]){throw new Error(""+K+" handler must be an action function")}});F[H]=function(){for(var K=arguments.length,N=Array(K),M=0;M<K;M++){N[M]=arguments[M]}var P=E.getInstance().getState();var O=G.local&&G.local.apply(G,[P].concat(N));var L=G.shouldFetch?G.shouldFetch.apply(G,[P].concat(N)):O==null;var R=G.interceptResponse||function(S){return S};var Q=function Q(T,S){return function(U){var V=function V(){A-=1;T(R(U,T,N));if(S){throw U}};return typeof window==="undefined"?function(){return V()}:V()}};if(L){A+=1;if(G.loading){G.loading(R(null,G.loading,N))}return G.remote.apply(G,[P].concat(N))["catch"](Q(G.error,1)).then(Q(G.success))}else{E.emitChange()}};return F},{});this.exportPublicMethods(D);this.exportPublicMethods({isLoading:function z(){return A>0}})},exportPublicMethods:function o(z){var A=this;l.eachObject(function(B,C){if(!l.isFunction(C)){throw new TypeError("exportPublicMethods expects a function")}A[t.PUBLIC_METHODS][B]=C},[z])},emitChange:function f(){this.getInstance().emitChange()},on:function n(A,z){if(A==="error"){this[t.HANDLING_ERRORS]=true}this[t.LIFECYCLE].on(A,z.bind(this))},bindAction:function r(B,A){if(!B){throw new ReferenceError("Invalid action reference passed in")}if(!l.isFunction(A)){throw new TypeError("bindAction expects a function")}if(A.length>1){throw new TypeError("Action handler in store "+this._storeName+" for "+(""+(B[t.ACTION_KEY]||B).toString()+" was defined with ")+"two parameters. Only a single parameter is passed through the dispatcher, did you mean to pass in an Object instead?")}var z=B[t.ACTION_KEY]?B[t.ACTION_KEY]:B;this[t.LISTENERS][z]=A.bind(this);this[t.ALL_LISTENERS].push(k["default"].keyFor(z))},bindActions:function i(A){var z=this;l.eachObject(function(D,C){var F=/./;var E=D.replace(F,function(G){return"on"+G[0].toUpperCase()});var B=null;if(z[D]&&z[E]){throw new ReferenceError("You have multiple action handlers bound to an action: "+(""+D+" and "+E))}else{if(z[D]){B=z[D]}else{if(z[E]){B=z[E]}}}if(B){z.bindAction(C,B)}},[A])},bindListeners:function q(A){var z=this;l.eachObject(function(B,D){var C=z[B];if(!C){throw new ReferenceError(""+B+" defined but does not exist in "+z._storeName)}if(Array.isArray(D)){D.forEach(function(E){z.bindAction(E,C)})}else{z.bindAction(D,C)}},[A])}};y["default"]=p;g.exports=y["default"]},{"../../utils/functions":13,"../symbols/symbols":10,"es-symbol":1}],9:[function(p,h,F){Object.defineProperty(F,"__esModule",{value:true});var u=Function.prototype.bind;var e=function C(N,M,L){var J=true;_function:while(J){var H=N,P=M,G=L;I=O=K=undefined;J=false;var I=Object.getOwnPropertyDescriptor(H,P);if(I===undefined){var O=Object.getPrototypeOf(H);if(O===null){return undefined}else{N=O;M=P;L=G;J=true;continue _function}}else{if("value" in I){return I.value}else{var K=I.get;if(K===undefined){return undefined}return K.call(G)}}}};F.createStoreConfig=i;F.transformStore=n;F.createStoreFromObject=l;F.createStoreFromClass=q;function E(I){if(I&&I.__esModule){return I}else{var G={};if(I!=null){for(var H in I){if(Object.prototype.hasOwnProperty.call(I,H)){G[H]=I[H]}}}G["default"]=I;return G}}function f(G){return G&&G.__esModule?G:{"default":G}}function j(G,H){if(!(G instanceof H)){throw new TypeError("Cannot call a class as a function")}}function v(H,G){if(typeof G!=="function"&&G!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof G)}H.prototype=Object.create(G&&G.prototype,{constructor:{value:H,enumerable:false,writable:true,configurable:true}});if(G){H.__proto__=G}}var k=p("eventemitter3");var g=f(k);var x=p("../symbols/symbols");var y=E(x);var z=p("../utils/AltUtils");var A=E(z);var B=p("../../utils/functions");var o=E(B);var D=p("./AltStore");var t=f(D);var s=p("./StoreMixin");var w=f(s);function r(G,K,J){if(!J){return}var H=K.StoreModel.config;var I=o.isFunction(J)?J(K[y.STATE_CONTAINER]):J;K[y.STATE_CONTAINER]=H.setState.call(G,K[y.STATE_CONTAINER],I);if(!G.alt.dispatcher.isDispatching()){G.emitChange()}}function m(J,K,H,I){J[y.ALL_LISTENERS]=[];J[y.LIFECYCLE]=new g["default"]();J[y.LISTENERS]={};J[y.PUBLIC_METHODS]={};return o.assign(J,w["default"],{_storeName:H,alt:K,dispatcher:K.dispatcher,preventDefault:function G(){this.getInstance().preventDefault=true}},I)}function i(I,H){H.config=o.assign({getState:function G(J){return o.assign({},J)},setState:o.assign},I,H.config)}function n(H,G){return H.reduce(function(J,I){return I(J)},G)}function l(L,G,H){var K=undefined;var J=m({},L,H,o.assign({getInstance:function I(){return K},setState:function M(N){r(this,K,N)}},G));if(J.bindListeners){w["default"].bindListeners.call(J,J.bindListeners)}if(J.observe){w["default"].bindListeners.call(J,J.observe(L))}if(J.lifecycle){o.eachObject(function(N,O){w["default"].on.call(J,N,O)},[J.lifecycle])}K=o.assign(new t["default"](L,J,J.state||{},G),J.publicMethods,{displayName:H});return K}function q(J,K,R){for(var O=arguments.length,Q=Array(O>3?O-3:0),G=3;G<O;G++){Q[G-3]=arguments[G]}var N=undefined;var H=K.config;var M=(function(T){function S(){for(var U=arguments.length,W=Array(U),V=0;V<U;V++){W[V]=arguments[V]}j(this,S);e(Object.getPrototypeOf(S.prototype),"constructor",this).apply(this,W)}v(S,T);return S})(K);m(M.prototype,J,R,{getInstance:function I(){return N},setState:function L(S){r(this,N,S)}});var P=new (u.apply(M,[null].concat(Q)))();if(H.bindListeners){P.bindListeners(H.bindListeners)}if(H.datasource){P.registerAsync(H.datasource)}N=o.assign(new t["default"](J,P,P[J.config.stateKey]||P[H.stateKey]||null,K),A.getInternalMethods(K),H.publicMethods,{displayName:R});return N}},{"../../utils/functions":13,"../symbols/symbols":10,"../utils/AltUtils":11,"./AltStore":7,"./StoreMixin":8,eventemitter3:2}],10:[function(n,f,v){Object.defineProperty(v,"__esModule",{value:true});function e(w){return w&&w.__esModule?w:{"default":w}}var u=n("es-symbol");var m=e(u);var t=(0,m["default"])();v.ACTION_HANDLER=t;var o=(0,m["default"])();v.ACTION_KEY=o;var i=(0,m["default"])();v.ACTIONS_REGISTRY=i;var s=(0,m["default"])();v.ACTION_UID=s;var j=(0,m["default"])();v.ALL_LISTENERS=j;var q=(0,m["default"])();v.HANDLING_ERRORS=q;var h=(0,m["default"])();v.INIT_SNAPSHOT=h;var p=(0,m["default"])();v.LAST_SNAPSHOT=p;var k=(0,m["default"])();v.LIFECYCLE=k;var l=(0,m["default"])();v.LISTENERS=l;var g=(0,m["default"])();v.PUBLIC_METHODS=g;var r=(0,m["default"])();v.STATE_CONTAINER=r},{"es-symbol":1}],11:[function(h,g,i){Object.defineProperty(i,"__esModule",{value:true});i.getInternalMethods=f;i.warn=n;i.uid=m;i.formatAsConstant=k;i.dispatchIdentity=l;function j(){}var e=Object.getOwnPropertyNames(j);var o=Object.getOwnPropertyNames(j.prototype);function f(q,s){var p=s?o:e;var r=s?q.prototype:q;return Object.getOwnPropertyNames(r).reduce(function(u,t){if(p.indexOf(t)!==-1){return u}u[t]=r[t];return u},{})}function n(p){if(typeof console!=="undefined"){console.warn(new ReferenceError(p))}}function m(p,q){var s=0;var r=q;while(Object.hasOwnProperty.call(p,r)){r=q+String(++s)}return r}function k(p){return p.replace(/[a-z]([A-Z])/g,function(q){return""+q[0]+"_"+q[1].toLowerCase()}).toUpperCase()}function l(p){for(var r=arguments.length,q=Array(r>1?r-1:0),s=1;s<r;s++){q[s-1]=arguments[s]}this.dispatch(q.length?[p].concat(q):p)}},{}],12:[function(h,f,k){Object.defineProperty(k,"__esModule",{value:true});k.setAppState=p;k.snapshot=e;k.saveInitialSnapshot=j;k.filterSnapshots=o;function l(s){if(s&&s.__esModule){return s}else{var q={};if(s!=null){for(var r in s){if(Object.prototype.hasOwnProperty.call(s,r)){q[r]=s[r]}}}q["default"]=s;return q}}var m=h("../symbols/symbols");var g=l(m);var i=h("../../utils/functions");var n=l(i);function p(q,s,r){var t=q.deserialize(s);n.eachObject(function(w,x){var u=q.stores[w];if(u){var v=u.StoreModel.config;if(v.onDeserialize){t[w]=v.onDeserialize(x)||x}n.assign(u[g.STATE_CONTAINER],t[w]);r(u)}},[t])}function e(q){var s=arguments[1]===undefined?[]:arguments[1];var r=s.length?s:Object.keys(q.stores);return r.reduce(function(x,y){var w=y.displayName||y;var u=q.stores[w];var v=u.StoreModel.config;u[g.LIFECYCLE].emit("snapshot");var t=v.onSerialize&&v.onSerialize(u[g.STATE_CONTAINER]);x[w]=t?t:u.getState();return x},{})}function j(q,r){var s=q.deserialize(q.serialize(q.stores[r][g.STATE_CONTAINER]));q[g.INIT_SNAPSHOT][r]=s;q[g.LAST_SNAPSHOT][r]=s}function o(q,s,r){return r.reduce(function(v,t){var u=t.displayName||t;if(!s[u]){throw new ReferenceError(""+u+" is not a valid store")}v[u]=s[u];return v},{})}},{"../../utils/functions":13,"../symbols/symbols":10}],13:[function(g,h,f){Object.defineProperty(f,"__esModule",{value:true});f.eachObject=j;f.assign=e;var i=function i(k){return typeof k==="function"};f.isFunction=i;function j(k,l){l.forEach(function(m){Object.keys(Object(m)).forEach(function(n){k(n,m[n])})})}function e(n){for(var k=arguments.length,m=Array(k>1?k-1:0),l=1;l<k;l++){m[l-1]=arguments[l]}j(function(o,p){return n[o]=p},m);return n}},{}],14:[function(n,g,C){Object.defineProperty(C,"__esModule",{value:true});var o=Function.prototype.bind;var e=function A(K,H,G){var I=true;_function:while(I){var E=K,M=H,D=G;F=L=J=undefined;I=false;var F=Object.getOwnPropertyDescriptor(E,M);if(F===undefined){var L=Object.getPrototypeOf(E);if(L===null){return undefined}else{K=L;H=M;G=D;I=true;continue _function}}else{if("value" in F){return F.value}else{var J=F.get;if(J===undefined){return undefined}return J.call(D)}}}};var r=(function(){function D(H,F){for(var E=0;E<F.length;E++){var G=F[E];G.enumerable=G.enumerable||false;G.configurable=true;if("value" in G){G.writable=true}Object.defineProperty(H,G.key,G)}}return function(G,E,F){if(E){D(G.prototype,E)}if(F){D(G,F)}return G}})();function f(D){return D&&D.__esModule?D:{"default":D}}function B(F){if(F&&F.__esModule){return F}else{var D={};if(F!=null){for(var E in F){if(Object.prototype.hasOwnProperty.call(F,E)){D[E]=F[E]}}}D["default"]=F;return D}}function p(E,D){if(typeof D!=="function"&&D!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof D)}E.prototype=Object.create(D&&D.prototype,{constructor:{value:E,enumerable:false,writable:true,configurable:true}});if(D){E.__proto__=D}}function i(D,E){if(!(D instanceof E)){throw new TypeError("Cannot call a class as a function")}}var u=n("flux");var t=n("./utils/StateFunctions");var h=B(t);var q=n("./symbols/symbols");var s=B(q);var z=n("../utils/functions");var m=B(z);var x=n("./store");var l=B(x);var v=n("./utils/AltUtils");var w=B(v);var y=n("./actions");var j=f(y);var k=(function(){function G(){var V=arguments[0]===undefined?{}:arguments[0];i(this,G);this.config=V;this.serialize=V.serialize||JSON.stringify;this.deserialize=V.deserialize||JSON.parse;this.dispatcher=V.dispatcher||new u.Dispatcher();this.batchingFunction=V.batchingFunction||function(W){return W()};this.actions={global:{}};this.stores={};this.storeTransforms=V.storeTransforms||[];this[s.ACTIONS_REGISTRY]={};this[s.INIT_SNAPSHOT]={};this[s.LAST_SNAPSHOT]={}}r(G,[{key:"dispatch",value:function S(X,W,V){var Y=this;this.batchingFunction(function(){return Y.dispatcher.dispatch({action:X,data:W,details:V})})}},{key:"createUnsavedStore",value:function M(X){for(var V=arguments.length,W=Array(V>1?V-1:0),Z=1;Z<V;Z++){W[Z-1]=arguments[Z]}var Y=X.displayName||"";l.createStoreConfig(this.config,X);var aa=l.transformStore(this.storeTransforms,X);return m.isFunction(aa)?l.createStoreFromClass.apply(l,[this,aa,Y].concat(W)):l.createStoreFromObject(this,aa,Y)}},{key:"createStore",value:function O(Z,Y){for(var V=arguments.length,X=Array(V>2?V-2:0),W=2;W<V;W++){X[W-2]=arguments[W]}var aa=Y||Z.displayName||Z.name||"";l.createStoreConfig(this.config,Z);var ac=l.transformStore(this.storeTransforms,Z);if(this.stores[aa]||!aa){if(this.stores[aa]){w.warn("A store named "+aa+" already exists, double check your store names or pass in your own custom identifier for each store")}else{w.warn("Store name was not specified")}aa=w.uid(this.stores,aa)}var ab=m.isFunction(ac)?l.createStoreFromClass.apply(l,[this,ac,aa].concat(X)):l.createStoreFromObject(this,ac,aa);this.stores[aa]=ab;h.saveInitialSnapshot(this,aa);return ab}},{key:"generateActions",value:function J(){for(var Y=arguments.length,X=Array(Y),V=0;V<Y;V++){X[V]=arguments[V]}var W={name:"global"};return this.createActions(X.reduce(function(aa,Z){aa[Z]=w.dispatchIdentity;return aa},W))}},{key:"createAction",value:function K(W,V,X){return(0,j["default"])(this,"global",W,V,X)}},{key:"createActions",value:function U(ac){for(var ab=arguments.length,X=Array(ab>2?ab-2:0),V=2;V<ab;V++){X[V-2]=arguments[V]}var Z=this;var Y=arguments[1]===undefined?{}:arguments[1];var aa={};var W=w.uid(this[s.ACTIONS_REGISTRY],ac.displayName||ac.name||"Unknown");if(m.isFunction(ac)){(function(){m.assign(aa,w.getInternalMethods(ac,true));var ad=(function(ag){function ae(){for(var aj=arguments.length,ai=Array(aj),ah=0;ah<aj;ah++){ai[ah]=arguments[ah]}i(this,ae);e(Object.getPrototypeOf(ae.prototype),"constructor",this).apply(this,ai)}p(ae,ag);r(ae,[{key:"generateActions",value:function af(){for(var ah=arguments.length,ai=Array(ah),aj=0;aj<ah;aj++){ai[aj]=arguments[aj]}ai.forEach(function(ak){aa[ak]=w.dispatchIdentity})}}]);return ae})(ac);m.assign(aa,new (o.apply(ad,[null].concat(X)))())})()}else{m.assign(aa,ac)}this.actions[W]=this.actions[W]||{};m.eachObject(function(ad,af){if(!m.isFunction(af)){return}Y[ad]=(0,j["default"])(Z,W,ad,af,Y);var ae=w.formatAsConstant(ad);Y[ae]=Y[ad][s.ACTION_KEY]},[aa]);return Y}},{key:"takeSnapshot",value:function F(){for(var W=arguments.length,V=Array(W),Y=0;Y<W;Y++){V[Y]=arguments[Y]}var X=h.snapshot(this,V);m.assign(this[s.LAST_SNAPSHOT],X);return this.serialize(X)}},{key:"rollback",value:function I(){h.setAppState(this,this.serialize(this[s.LAST_SNAPSHOT]),function(V){V[s.LIFECYCLE].emit("rollback");V.emitChange()})}},{key:"recycle",value:function T(){for(var X=arguments.length,W=Array(X),Y=0;Y<X;Y++){W[Y]=arguments[Y]}var V=W.length?h.filterSnapshots(this,this[s.INIT_SNAPSHOT],W):this[s.INIT_SNAPSHOT];h.setAppState(this,this.serialize(V),function(Z){Z[s.LIFECYCLE].emit("init");Z.emitChange()})}},{key:"flush",value:function N(){var V=this.serialize(h.snapshot(this));this.recycle();return V}},{key:"bootstrap",value:function D(V){h.setAppState(this,V,function(W){W[s.LIFECYCLE].emit("bootstrap");W.emitChange()})}},{key:"prepare",value:function E(W,X){var V={};if(!W.displayName){throw new ReferenceError("Store provided does not have a name")}V[W.displayName]=X;return this.serialize(V)}},{key:"addActions",value:function Q(W,Z){for(var X=arguments.length,V=Array(X>2?X-2:0),Y=2;Y<X;Y++){V[Y-2]=arguments[Y]}this.actions[W]=Array.isArray(Z)?this.generateActions.apply(this,Z):this.createActions.apply(this,[Z].concat(V))}},{key:"addStore",value:function H(X,W){for(var Y=arguments.length,V=Array(Y>2?Y-2:0),Z=2;Z<Y;Z++){V[Z-2]=arguments[Z]}this.createStore.apply(this,[W,X].concat(V))}},{key:"getActions",value:function P(V){return this.actions[V]}},{key:"getStore",value:function R(V){return this.stores[V]}}],[{key:"debug",value:function L(V,X){var W="alt.js.org";if(typeof window!=="undefined"){window[W]=window[W]||[];window[W].push({name:V,alt:X})}return X}}]);return G})();C["default"]=k;g.exports=C["default"]},{"../utils/functions":13,"./actions":6,"./store":9,"./symbols/symbols":10,"./utils/AltUtils":11,"./utils/StateFunctions":12,flux:3}]},{},[14])(14)});