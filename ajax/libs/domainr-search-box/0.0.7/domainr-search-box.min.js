!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.domainr=t()}}(function(){return function t(e,i,n){function r(a,o){if(!i[a]){if(!e[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[a]={exports:{}};e[a][0].call(h.exports,function(t){var i=e[a][1][t];return r(i?i:t)},h,h.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,i){"use strict";function n(t,e){if(!e)throw new Error("[domainr] Missing callback");return c?void s(t,e):void a(t,e)}function r(){try{var t=window.XMLHttpRequest||window.ActiveXObject;return new t("MSXML2.XMLHTTP.3.0")}catch(e){return{}}}function s(t,e){var i=r();i.onreadystatechange=function(){if(4==i.readyState){if(200!=i.status)return void o.error("Error fetching data: "+i.responseText);var t;try{t=JSON.parse(i.responseText)}catch(n){return void o.error("Unable to parse data: "+i.responseText+"; "+n)}e(t)}},i.open("GET",t,!0),i.send()}function a(t,e){var i=document.createElement("script");i.async=!0;var n="_jsonp"+u++,r=setTimeout(function(){o.error("Timeout trying to retrieve "+t)},5e3);window[n]=function(t){clearTimeout(r),setTimeout(function(){var t=document.getElementById(n);t.parentNode.removeChild(t),window[n]=void 0;try{delete window[n]}catch(e){}},0),e(t)};var s=t.indexOf("?")>=0?"&":"?";i.setAttribute("src",t+s+"callback="+n),i.id=n;var a=document.head||document.getElementsByTagName("head")[0]||document.documentElement;a.insertBefore(i,a.firstChild)}var o=t("./util"),u=0,c=!1;"withCredentials"in r()&&(c=!0),e.exports={getJSON:n}},{"./util":6}],2:[function(t,e,i){"use strict";function n(t){if(t=t||{},this.clientId=t.clientId,this.mashapeKey=t.mashapeKey,!this.clientId&&!this.mashapeKey)throw new Error("[domainr] Missing mashapeKey or clientId");this.baseURL=t.baseURL||(this.clientId?"https://api.domainr.com/v2":"https://domainr.p.mashape.com/v2")}var r=t("./ajax"),s=t("./util");n.prototype={search:function(t,e){this._get("/search",this.searchParams(t),e)},searchParams:function(t){return s.extract(t,["query","registrar","location","defaults"])},status:function(t,e){if(!t)throw new Error("[domainr] domains array is required");s.uniq(t);var i={domain:t.join(",")};this._get("/status",i,e)},options:function(t,e){this._get("/options",{domain:t},e)},zones:function(t){this._get("/zones",{},t)},registerURL:function(t,e){var i=s.extract(e,["registrar"]);return i.domain=t,this._url("/register",i)},_get:function(t,e,i){var n=this.baseURL+t+"?"+s.qs(e||{},this._key());r.getJSON(n,i)},_url:function(t,e){return this.baseURL+t+"?"+s.qs(e||{},this._key())},_key:function(){return this.clientId?{client_id:this.clientId}:{"mashape-key":this.mashapeKey}}},e.exports=n},{"./ajax":1,"./util":6}],3:[function(t,e,i){"use strict";var n=t("./client"),r=t("./search-box");t("./jquery"),e.exports={Client:n,SearchBox:r}},{"./client":2,"./jquery":4,"./search-box":5}],4:[function(t,e,i){"use strict";var n=(t("./search-box"),t("./util"));if(window.jQuery){var r=window.jQuery;r.fn.domainrSearchBox=function(t){return this.each(function(e,i){var s=n.extract(t,["clientId","mashapeKey","renderWith","limit","registrar","defaults","onSelect"]);if(s.observe=i,t.renderTo){var a=r(t.renderTo);a.length>0&&(s.renderTo=a[0])}new domainr.SearchBox(s)}),this}}},{"./search-box":5,"./util":6}],5:[function(t,e,i){"use strict";function n(t){var e=t.results,i=e.length;if(0===i)return"";for(var n=['<div class="domainr-results">'],r=0;i>r;r++){var s=e[r];n.push('<div class="domainr-result '+s.status+'" data-domain="'+s.domain+'"><span class="domainr-result-domain"><span class="domainr-result-host">'+s.host+'</span><span class="domainr-result-subdomain">'+s.subdomain+'</span><span class="domainr-result-zone">'+s.zone+'</span></span><span class="domainr-result-path">'+s.path+"</span></div>")}return n.push("</div>"),n.join("")}function r(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}function s(t,e){t.classList?t.classList.add(e):t.className+=" "+e}var a=t("./client"),o=t("./util"),u=function(t){var e=this;if(t=t||{},!t.observe)throw new Error('[domainr] "observe" is required');this._client=new a(o.extract(t,["clientId","mashapeKey"])),this._state={query:"",results:[],limit:20},this._seq=0,this._last=0,this._cache={},this._listeners={},this._renderer=n,this._input=function(){e._state.query!=e._in.value&&(e._state.query=e._in.value,e._search())},this._click=function(t){t=t||window.event,e._choose(t)},this._in=t.observe,r(this._in,"keyup",this._input),r(this._in,"input",this._input),r(this._in,"change",this._input),void 0!==t.renderTo&&(this._out=t.renderTo,s(this._out,"domainr-results-container"),r(this._out,"click",this._click)),void 0!==t.renderWith&&(this._renderer=t.renderWith),void 0!==t.limit&&(this._state.limit=t.limit),void 0!==t.registrar&&(this._state.registrar=t.registrar),void 0!==t.defaults&&(this._state.defaults=t.defaults.join(",")),this._onSelect=void 0!==t.onSelect?t.onSelect:function(t){e._in.value=t.domain,window.open(e._client.registerURL(t.domain))}};u.prototype={_render:function(){return this._out?(this._out.innerHTML=this._renderer(this._state),this):void 0},_search:function(){var t=this,e=o.qs(this._client.searchParams(this._state)),i=this._cache[e];if(void 0!==i)return this._state.results=i.results,void this._update();var n=this._seq++;this._client.search(this._state,function(i){t._cache[e]=i,t._last>n||(t._last=n,t._state.results=i.results,t._update())})},_update:function(){this._limit(),this._status(),this._render()},_limit:function(){this._state.limit>=0&&this._state.results.length>this._state.limit&&(this._state.results.length=this._state.limit)},_status:function(){for(var t=this,e=[],i=10,n=this._state.results,r=0;r<n.length&&e.length<i;r++){var s=n[r];s.status=this._cache[s.domain+":status"]||s.status,s.status||(s.status="unknown",e.push(s.domain))}0!==e.length&&this._client.status(e,function(e){for(var i=e.status,n=0;n<i.length;n++){var r=i[n];t._cache[r.domain+":status"]=r.status}t._update()})},_choose:function(t){for(var e=this._state.results,i=t.target||t.srcElement;i&&i!=document;i=i.parentNode){var n=i.getAttribute("data-domain");if(n)for(var r=0;r<e.length;r++){var s=e[r];if(s.domain==n)return void(this._onSelect&&this._onSelect(s))}}}},e.exports=u},{"./client":2,"./util":6}],6:[function(t,e,i){"use strict";function n(t,e){var i={};if(t)for(var n=0;n<e.length;n++){var r=e[n];void 0!==t[r]&&(i[r]=t[r])}return i}function r(){for(var t=[],e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)t.push(o(n)+"="+o(i[n]))}return t.join("&")}function s(t){window.console&&window.console.error&&window.console.error("[domainr] "+t)}function a(t){if(t){var e,i;for(e=0;e<t.length;e++)for(i=e+1;i<t.length;i++)t[e]===t[i]&&(t.splice(i,1),i--)}}var o=encodeURIComponent;e.exports={euc:o,extract:n,qs:r,error:s,uniq:a}},{}]},{},[3])(3)});