var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(){function i(i){void 0===i&&(i={}),this.axis="y",this.type=["line"],this.visible=!0,this.defined=function(t){return!0};var e=this.sanitizeOptions(i);this.id=e.id||t.Options.uuid(),this.axis=e.axis,this.interpolation=e.interpolation,this.dataset=e.dataset,this.key=e.key,this.color=e.color,this.visible=e.visible,this.label=e.label||e.id,e.defined&&(this.defined=e.defined),e.type.length>0&&(this.type=this.sanitizeType(e.type))}return i.prototype.sanitizeOptions=function(i){var e={};return angular.extend(e,this,i),e.axis=this.sanitizeAxis(e.axis),e.interpolation=this.sanitizeInterpolation(e.interpolation),e.id=t.Options.getString(e.id),e.type=t.Options.getArray(e.type),e.dataset=t.Options.getString(e.dataset),e.key=this.sanitizeKeys(e.key),e.color=t.Options.getString(e.color),e.label=t.Options.getString(e.label),e.visible=t.Options.getBoolean(e.visible),e.defined=t.Options.getFunction(e.defined),e},i.prototype.sanitizeInterpolation=function(i){return i?{mode:t.Options.getString(i.mode,"linear"),tension:t.Options.getNumber(i.tension,.7)}:{mode:"linear",tension:.7}},i.prototype.sanitizeKeys=function(i){return i?"string"==typeof i?{y1:t.Options.getString(i)}:{y0:t.Options.getString(i.y0),y1:t.Options.getString(i.y1)}:{y1:void 0}},i.prototype.getToggledVisibility=function(){return!this.visible},i.prototype.sanitizeType=function(t){return t.filter(function(t){return i.isValidType(t)?!0:(console.warn("Unknow series type : "+t),!1)})},i.prototype.sanitizeAxis=function(t){if(-1===["y"].indexOf(t))throw TypeError(t+" is not a valid series option for axis.");return t},i.prototype.isAColumn=function(){return this.hasType(i.TYPE.COLUMN)},i.prototype.isDashed=function(){return-1!==this.type.indexOf(i.TYPE.DASHED_LINE)},i.prototype.hasType=function(t){return t===i.TYPE.LINE?-1!==this.type.indexOf(t)||-1!==this.type.indexOf(i.TYPE.DASHED_LINE):-1!==this.type.indexOf(t)},i.prototype.hasTwoKeys=function(){return void 0!==this.key.y0},i.isValidType=function(t){return-1!==d3.values(i.TYPE).indexOf(t)},i.TYPE={DOT:"dot",LINE:"line",DASHED_LINE:"dashed-line",AREA:"area",COLUMN:"column"},i}();t.SeriesOptions=i}(i=t.Options||(t.Options={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(){function i(t){void 0===t&&(t={}),this.type="linear",this.key="x",this.ticksShift={x:0,y:0},this.parse(t)}return i.prototype.parse=function(e){this.type=t.Options.getString(e.type,"linear"),this.key=e.key,this.tickFormat=t.Options.getFunction(e.tickFormat),this.ticks=e.ticks,e.ticksShift&&(this.ticksShift={x:t.Options.getNumber(e.ticksShift.x,0),y:t.Options.getNumber(e.ticksShift.y,0)}),this.type===i.TYPE.LINEAR?(this.min=t.Options.getNumber(e.min,void 0),this.max=t.Options.getNumber(e.max,void 0)):this.type===i.TYPE.DATE&&(this.min=t.Options.getDate(e.min,void 0),this.max=t.Options.getDate(e.max,void 0))},i.isValidSide=function(t){return-1!==d3.values(i.SIDE).indexOf(t)},i.prototype.configure=function(t){return t.tickFormat(this.tickFormat),this.ticks instanceof Array?t.tickValues(this.ticks):"number"==typeof this.ticks&&t.ticks(this.ticks),t},i.SIDE={X:"x",X2:"x2",Y:"y",Y2:"y2"},i.TYPE={LINEAR:"linear",DATE:"date",LOG:"log"},i}();t.AxisOptions=i}(i=t.Options||(t.Options={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(){function i(){this.width=600,this.height=200,this.innerWidth=560,this.innerHeight=160,this.margin=i.getDefaultMargins()}return i.getDefaultMargins=function(){return{top:0,left:40,bottom:40,right:40}},i.prototype.updateMargins=function(i){var e=this;if(i&&i.margin){var n=function(n){return e.margin[n]=t.Options.getNumber(i.margin[n],e.margin[n])};n("top"),n("bottom"),n("left"),n("right")}},i.prototype.getDimensionByProperty=function(t,i){var e=window.getComputedStyle(t,null);return+e.getPropertyValue(i).replace(/px$/,"")},i.prototype.fromParentElement=function(t){var i=this.getDimensionByProperty(t,"padding-left")+this.getDimensionByProperty(t,"padding-right"),e=this.getDimensionByProperty(t,"padding-top")+this.getDimensionByProperty(t,"padding-bottom");this.width=t.clientWidth-i,this.height=t.clientHeight-e,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right},i}();t.Dimensions=i}(i=t.Options||(t.Options={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(){function i(i){this.series=[],this.pan={x:!1,y:!1},this.axes={x:{},y:{}},this.margin=t.Dimensions.getDefaultMargins(),this.grid={x:!1,y:!0};var e=this.sanitizeOptions(i);this.margin=e.margin,this.series=e.series,this.axes=e.axes,this.pan=e.pan,this.grid=e.grid,this.tooltipHook=e.tooltipHook}return i.prototype.sanitizeOptions=function(t){var e={};return angular.extend(e,this,t),e.margin=this.sanitizeMargin(i.getObject(e.margin,this.margin)),e.series=this.sanitizeSeries(i.getArray(e.series)),e.axes=this.sanitizeAxes(i.getObject(e.axes,this.axes)),e.grid=this.sanitizeTwoAxesOptions(e.grid,this.grid),e.pan=this.sanitizeTwoAxesOptions(e.pan,this.pan),e.tooltipHook=i.getFunction(e.tooltipHook),e},i.prototype.sanitizeMargin=function(t){return{top:i.getNumber(t.top,0),left:i.getNumber(t.left,0),bottom:i.getNumber(t.bottom,0),right:i.getNumber(t.right,0)}},i.prototype.sanitizeSeries=function(i){return i.map(function(i){return new t.SeriesOptions(i)})},i.prototype.sanitizeTwoAxesOptions=function(t,e){var n={x:i.getBoolean(t.x,e.x),y:i.getBoolean(t.y,e.y)};return n},i.prototype.sanitizeAxes=function(i){return Object.keys(i).reduce(function(e,n){return e[n]=new t.AxisOptions(i[n]),e},{})},i.prototype.getAbsKey=function(){if(!this.axes[t.AxisOptions.SIDE.X])throw new TypeError("Cannot find abs key : "+t.AxisOptions.SIDE.X);return this.axes[t.AxisOptions.SIDE.X].key},i.prototype.getVisibleDatasets=function(){var t=[];return this.series.forEach(function(i){i.visible&&-1===t.indexOf(i.dataset)&&t.push(i.dataset)}),t},i.prototype.getSeriesAndDatasetBySide=function(i){if(!t.AxisOptions.isValidSide(i))throw new TypeError("Cannot get axis side : "+i);i!==t.AxisOptions.SIDE.Y2||this.axes[i]||(i=t.AxisOptions.SIDE.Y);var e=[],n={};return this.series.forEach(function(t){t.visible&&t.axis===i&&(e.push(t.dataset),n[t.dataset]||(n[t.dataset]=[]),n[t.dataset].push(t))}),{seriesForDataset:n,datasetsForSide:e}},i.prototype.getByAxisSide=function(i){if(!t.AxisOptions.isValidSide(i))throw new TypeError("Cannot get axis side : "+i);if(!this.axes[i]){if(i===t.AxisOptions.SIDE.Y2)return this.axes[t.AxisOptions.SIDE.Y];if(i===t.AxisOptions.SIDE.X2)return this.axes[t.AxisOptions.SIDE.X]}return this.axes[i]},i.prototype.getSeriesByType=function(i){if(!t.SeriesOptions.isValidType(i))throw new TypeError("Unknown series type: "+i);return this.series.filter(function(t){return t.hasType(i)})},i.getBoolean=function(t,i){return void 0===i&&(i=!0),"boolean"==typeof t?t:i},i.getNumber=function(t,i){var e=parseFloat(t);return isNaN(e)?i:e},i.getDate=function(t,i){return t instanceof Date?t:i},i.getFunction=function(t){return t instanceof Function?t:void 0},i.getString=function(t,i){return t?String(t):i},i.getIdentifier=function(t){var e=i.getString(t);return e.replace(/[^a-zA-Z0-9\-_]/gi,"")},i.getObject=function(t,i){if(void 0===i&&(i={}),!angular.isObject(t))throw TypeError(t+" option must be an object.");var e={};return angular.extend(e,i,t),e},i.getArray=function(t,i){return void 0===i&&(i=[]),i.concat(t)},i.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=16*Math.random()|0,e="x"===t?i:3&i|8;return e.toString(16)})},i}();t.Options=i}(i=t.Options||(t.Options={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(){function t(){this.strictMode=!0}return t.prototype.init=function(t){return this._dispatch=d3.dispatch.apply(this,t),this},t.prototype.update=function(t,i){this.data=t,this.options=i},t.prototype.on=function(i,e){if(this.strictMode&&-1===t.EVENTS.indexOf(i.split(".")[0]))throw new Error("Unknown event: "+i);return this._dispatch.on(i,e),this},t.prototype.trigger=function(t){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];return this._dispatch[t].apply(this,i),this},t.prototype.triggerDataAndOptions=function(t){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];return i.push(this.data),i.push(this.options),this._dispatch[t].apply(this,i),this},t.prototype.datumEnter=function(t,i){var e=this;return function(n){return n.on("mouseenter",function(n,r){e.trigger("enter",n,r,t,i)})}},t.prototype.datumOver=function(t,i){var e=this;return function(n){return n.on("mouseover",function(n,r){e.trigger("over",n,r,t,i)})}},t.prototype.datumMove=function(t,i){var e=this;return function(n){return n.on("mousemove",function(n,r){e.trigger("over",n,r,t,i)})}},t.prototype.datumLeave=function(t,i){var e=this;return function(n){return n.on("mouseleave",function(n,r){e.trigger("leave",n,r,t,i)})}},t.EVENTS=["create","update","resize","destroy","enter","over","move","leave","click","dblclick","legend-click","legend-over","legend-out","container-over","container-move","container-out","focus","toggle","zoom","zoomend","outer-world-hover","outer-world-zoom","outer-world-zoomend"],t}();t.EventManager=i}(i=t.Utils||(t.Utils={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(){function t(){this._factoryStack=[]}return t.prototype.index=function(t){return this._factoryStack.map(function(t){return t.key}).indexOf(t)},t.prototype.getBoundFunction=function(t,i){var e=this.get(t);return e?e[i].bind(e):null},t.prototype.get=function(t){var i=this.index(t);return i>-1?this._factoryStack[i].instance:null},t.prototype.all=function(){return this._factoryStack},t.prototype.turnFactoriesOff=function(t){var i=this;t.forEach(function(t){i.get(t).off()})},t.prototype.turnFactoriesOn=function(t){var i=this;t.forEach(function(t){i.get(t).on()})},t.prototype.registerMany=function(t){var i=this;return t.forEach(function(t){i.register.apply(i,t)}),this},t.prototype.register=function(t,i){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var r=i.bind.apply(i,[null].concat(e)),s=new r;return this._factoryStack.push({key:t,instance:s}),s},t.prototype.unregister=function(t){var i=this.index(t);return i>-1&&delete this._factoryStack[i],this},t}();t.FactoryManager=i}(i=t.Utils||(t.Utils={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(){function t(t,i){this.fromJS(t,i)}return t.prototype.fromJS=function(t,i){this.id=i,this.values=t},t}();t.Dataset=i}(i=t.Utils||(t.Utils={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(){function i(t){t&&this.fromJS(t)}return i.prototype.fromJS=function(i){for(var e in i)i.hasOwnProperty(e)&&(i[e]=new t.Dataset(i[e],e));this.sets=i},i.prototype.getDatasets=function(t,i){var e=this;return t.map(function(t){return e.getDatasetValues(t,i)})},i.prototype.getDatasetValues=function(t,i){if(!this.sets||!this.sets[t.dataset].values)return[];var e,n=i.getAbsKey();return e=t.key.y0?function(i){return{x:i[n],y1:i[t.key.y1],y0:i[t.key.y0]}}:function(i){return{x:i[n],y1:i[t.key.y1],y0:0}},this.sets[t.dataset].values.map(e)},i.getMinDistance=function(t,i,e,n){return void 0===e&&(e="x"),d3.min(t.map(function(t){return t.map(function(t){return i(t[e])}).filter(function(t){return n?t>=n[0]&&t<=n[1]:!0}).reduce(function(t,i,e,n){var r=e>0?i-n[e-1]:Number.MAX_VALUE;return t>r?r:t},Number.MAX_VALUE)}))},i}();t.Data=i}(i=t.Utils||(t.Utils={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(){function t(){}return t.prototype.init=function(t,i,e){this.key=t,this.eventMgr=i,this.factoryMgr=e,this.eventMgr.on("create."+this.key,this.create.bind(this)),this.eventMgr.on("update."+this.key,this.update.bind(this)),this.eventMgr.on("destroy."+this.key,this.destroy.bind(this))},t.prototype.create=function(t){},t.prototype.update=function(t,i){},t.prototype.destroy=function(){},t}();t.BaseFactory=i}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var __extends=this&&this.__extends||function(t,i){function e(){this.constructor=t}for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)},n3Charts;!function(t){var i;!function(i){"use strict";var e=function(i){function e(e){i.call(this),this.element=e,this.dim=new t.Options.Dimensions}return __extends(e,i),e.prototype.create=function(t){this.dim.updateMargins(t),this.listenToElement(this.element,t),this.createRoot(),this.createContainer(),this.eventMgr.on("resize",this.dim.fromParentElement.bind(this.dim))},e.prototype.listenToElement=function(t,i){var e=this.eventMgr;t.addEventListener("mouseover",function(t){e.triggerDataAndOptions.apply(e,["container-over",t])}),t.addEventListener("mousemove",function(t){e.triggerDataAndOptions.apply(e,["container-move",t])}),t.addEventListener("mouseout",function(t){e.triggerDataAndOptions.apply(e,["container-out",t])})},e.prototype.getCoordinatesFromEvent=function(t){var i=this.getDimensions(),e=t.currentTarget.getBoundingClientRect(),n=e.left,r=e.top,s=this.factoryMgr.get("x-axis").scale,o=s.invert(t.clientX-n-i.margin.left),a=this.factoryMgr.get("y-axis").scale,c=a.invert(t.clientY-r-i.margin.top);return(c<a.domain()[0]||c>a.domain()[1])&&(c=void 0),(o<s.domain()[0]||o>s.domain()[1])&&(o=void 0),{y:c,x:o}},e.prototype.update=function(t,i){this.updateRoot(),this.updateContainer()},e.prototype.destroy=function(){this.destroyRoot()},e.prototype.createRoot=function(){this.svg=d3.select(this.element).append("svg").attr("class","chart"),this.defs=this.svg.append("defs")},e.prototype.updateRoot=function(){this.svg.attr("width",this.dim.width).attr("height",this.dim.height)},e.prototype.destroyRoot=function(){this.svg.remove()},e.prototype.createContainer=function(){this.vis=this.svg.append("g").attr("class","container"),this.axes=this.vis.append("g").attr("class","axes"),this.defs.append("svg:clipPath").attr("id","clipping-path").append("svg:rect").attr("id","clipping-rect"),this.data=this.vis.append("g").attr({"class":"data","clip-path":"url(#clipping-path)"}),this.overlay=this.vis.append("g").attr("class","overlay")},e.prototype.updateContainer=function(){this.vis.attr({width:this.dim.innerWidth,height:this.dim.innerHeight,transform:"translate("+this.dim.margin.left+", "+this.dim.margin.top+")"}),d3.select(this.element).select("#clipping-rect").attr({width:this.dim.innerWidth,height:this.dim.innerHeight+this.dim.margin.top,transform:"translate(0, "+-this.dim.margin.top+")"})},e.prototype.getDimensions=function(){return this.dim},e}(i.BaseFactory);i.Container=e}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(i){"use strict";var e=function(i){function e(t){i.call(this),this.element=t,this.enabled=!0}return __extends(e,i),e.prototype.on=function(){this.enabled=!0},e.prototype.off=function(){this.enabled=!1,this.hide()},e.prototype.create=function(){this.createTooltip(),this.eventMgr.on("container-move.tooltip",this.show.bind(this)),this.eventMgr.on("container-out.tooltip",this.hide.bind(this)),this.eventMgr.on("outer-world-hover.tooltip",this.showFromCoordinates.bind(this)),this.hide()},e.prototype.createTooltip=function(){var t=this.svg=d3.select(this.element).append("div").attr("class","chart-tooltip");t.append("div").attr("class","abscissas"),this.line=this.factoryMgr.get("container").overlay.append("line").attr("class","tooltip-line"),this.dots=this.factoryMgr.get("container").overlay.append("g").attr("class","tooltip-dots")},e.prototype.destroy=function(){this.svg.remove()},e.prototype.getClosestRows=function(t,i,e){for(var n=e.series.filter(function(t){return t.visible}),r=n.map(function(t){return i.getDatasetValues(t,e).filter(t.defined)}),s=[],o=-1,a=Number.POSITIVE_INFINITY,c=0;c<r.length;c++)for(var u=0;u<r[c].length;u++){if("date"===e.axes.x.type)var p=Math.abs(r[c][u].x.getTime()-t);else var p=Math.abs(r[c][u].x-t);p===a?s.push({series:n[c],row:r[c][u]}):a>p&&(a=p,s=[{series:n[c],row:r[c][u]}],o=u)}return{rows:s,index:o}},e.prototype.showFromCoordinates=function(t,i,e){if(this.enabled){var n=t.x,r=t.y;if(void 0===n||void 0===r)return void this.hide();n instanceof Date&&(n=n.getTime());var s=this.getClosestRows(n,i,e),o=s.rows,a=s.index;if(0===o.length)return void this.hide();this.updateTooltipDots(o),this.dots.style("opacity","1"),this.updateLinePosition(o),this.line.style("opacity","1");var c=this.getTooltipContent(o,a,e);e.tooltipHook&&(c=e.tooltipHook(o)),c&&(this.updateTooltipContent(c,a,e),this.updateTooltipPosition(o),this.svg.style("display",null))}},e.prototype.show=function(t,i,e){if(this.enabled){var n=this.factoryMgr.get("container"),r=n.getCoordinatesFromEvent(t);this.showFromCoordinates(r,i,e)}},e.prototype.getTooltipContent=function(i,e,n){var r=n.getByAxisSide(t.Options.AxisOptions.SIDE.X).tickFormat,s=n.getByAxisSide(t.Options.AxisOptions.SIDE.Y).tickFormat,o=function(t){var i=s?function(t){return s(t,e)}:function(t){return t},n=i(t.row.y1);return t.series.hasTwoKeys()?"["+i(t.row.y0)+", "+n+"]":n};return{abscissas:r?r(i[0].row.x,e):i[0].row.x,rows:i.map(function(t){return{label:t.series.label,value:o(t),color:t.series.color,id:t.series.id}})}},e.prototype.updateTooltipContent=function(t,i,e){this.svg.select(".abscissas").text(t.abscissas);var n=function(t){return t.attr({"class":"tooltip-item"}),t.append("div").attr({"class":"color-dot"}).style({"background-color":function(t){return t.color}}),t.append("div").attr({"class":"series-label"}),t.append("div").attr({"class":"y-value"}),t},r=function(t){return t.select(".series-label").text(function(t){return t.label}),t.select(".y-value").text(function(t){return t.value}),t},s=this.svg.selectAll(".tooltip-item").data(t.rows,function(t,i){return t.id?t.id:i});s.enter().append("div").call(n).call(r),s.call(r),s.exit().remove()},e.prototype.updateTooltipDots=function(t){var i=this.factoryMgr.get("x-axis").scale,e=this.factoryMgr.get("y-axis").scale,n=3,r=function(t,i,e){return"M "+i+" "+e+" m -"+t+", 0 a "+t+","+t+" 0 1,0 "+2*t+",0 a "+t+","+t+" 0 1,0 -"+2*t+",0 "},s=function(t){t.attr("class","tooltip-dots-group"),t.append("path").attr({"class":"tooltip-dot y1"}),t.append("path").attr({"class":"tooltip-dot y0"}).style({display:function(t){return t.series.hasTwoKeys()?null:"none"}})},o=function(t){t.select(".tooltip-dot.y1").attr({d:function(t){return r(n,i(t.row.x),e(t.row.y1))},stroke:function(t){return t.series.color}}),t.select(".tooltip-dot.y0").attr({d:function(t){return t.series.hasTwoKeys()?r(n,i(t.row.x),e(t.row.y0)):""},stroke:function(t){return t.series.color}})},a=this.dots.selectAll(".tooltip-dots-group").data(t);a.enter().append("g").call(s).call(o),a.call(o),a.exit().remove()},e.prototype.updateTooltipPosition=function(t){var i=t.slice(-1)[0],e=this.factoryMgr.get("x-axis"),n=(this.factoryMgr.get("y-axis").scale,this.factoryMgr.get("container").getDimensions().margin),r=this.element.offsetLeft,s=this.element.offsetTop,o=0,a="";e.isInLastHalf(i.row.x)?(a="translate(-100%, 0)",o=-10):o=10,this.svg.style({left:r+n.left+e.scale(i.row.x)+o+"px",top:s+n.top+"px",transform:a})},e.prototype.updateLinePosition=function(t){var i=this.factoryMgr.get("container"),e=i.getDimensions(),n=t.slice(-1)[0],r=this.factoryMgr.get("x-axis"),s=r.scale(n.row.x);this.line.attr({x1:s,x2:s,y1:-e.margin.top,y2:e.innerHeight})},e.prototype.hide=function(){this.svg.style("display","none"),this.line.style("opacity","0"),this.dots.style("opacity","0")},e}(i.BaseFactory);i.Tooltip=e}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(t){function i(i){t.call(this),this.element=i}return __extends(i,t),i.prototype.create=function(){this.createLegend()},i.prototype.createLegend=function(){this.div=d3.select(this.element).append("div").attr("class","chart-legend").style("position","absolute")},i.prototype.legendClick=function(){var t=this;return function(i){return i.on("click",function(i){t.eventMgr.trigger("legend-click",i)})}},i.prototype.update=function(t,i){var e=this,n=this.factoryMgr.get("container"),r=(n.getDimensions(),function(t){var i=t.append("div").attr({"class":"item"}).call(e.legendClick());i.append("div").attr({"class":"icon"}),i.append("div").attr({"class":"label"})}),s=function(t){t.attr("class",function(t){return"item "+t.type.join(" ")}).classed("hidden",function(t){return!t.visible}),t.select(".icon").style("background-color",function(t){return t.color}),t.select(".label").text(function(t){return t.label})},o=this.div.selectAll(".item").data(i.series);o.enter().call(r),o.call(s),o.exit().remove()},i.prototype.destroy=function(){this.div.remove()},i}(t.BaseFactory);t.Legend=i}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(i){"use strict";var e=function(i){function e(e){if(i.call(this),this.side=e,!t.Options.AxisOptions.isValidSide(e))throw new TypeError("Wrong axis side : "+e)}return __extends(e,i),e.prototype.create=function(){var t=this.factoryMgr.get("container").axes;this.createAxis(t),this.eventMgr.on("zoom."+this.key,this.softUpdate.bind(this))},e.prototype.softUpdate=function(){this.svg.call(this.d3axis)},e.prototype.update=function(t,i){var e=this.factoryMgr.get("container"),n=e.getDimensions(),r=this.getExtent(t,i),s=i.getByAxisSide(this.side);this.scale=this.getScale(s),this.updateScaleRange(n),this.updateScaleDomain(r),this.d3axis=this.getAxis(this.scale,s),this.updateAxisOrientation(this.d3axis),this.updateAxisContainer(n),this.shiftAxisTicks(s)},e.prototype.shiftAxisTicks=function(t){var i=t.ticksShift,e=i.x,n=i.y;this.svg.selectAll("text").attr("transform","translate("+e+", "+n+")")},e.prototype.destroy=function(){this.destroyAxis()},e.prototype.updateScaleRange=function(t){this.isAbscissas()?this.scale.range([0,t.innerWidth]):this.scale.range([t.innerHeight,0])},e.prototype.updateScaleDomain=function(t){this.scale.domain(t)},e.prototype.getScaleDomain=function(){return this.scale?this.scale.domain():[0,1]},e.prototype.getExtentForDatasets=function(t,i,e){var n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(var s in t.sets)i(s)&&t.sets[s].values.forEach(function(t){var i=e(t,s);i[0]<n&&(n=i[0]),i[1]>r&&(r=i[1])});return[n===Number.POSITIVE_INFINITY?0:n,r===Number.NEGATIVE_INFINITY?1:r]},e.prototype.getExtent=function(t,i){var e=i.getByAxisSide(this.side),n=void 0;if(this.isAbscissas()){var r=i.getVisibleDatasets(),s=i.getAbsKey();n=this.getExtentForDatasets(t,function(t){return r.indexOf(t)>-1},function(t){return[t[s],t[s]]})}else{var o=i.getSeriesAndDatasetBySide(this.side),a=o.datasetsForSide,c=o.seriesForDataset;n=this.getExtentForDatasets(t,function(t){return a.indexOf(t)>-1},function(t,i){var e=c[i].map(function(i){return t[i.key.y1]}),n=c[i].map(function(i){return t[i.key.y0]||t[i.key.y1]});return[d3.min(n),d3.max(e)]})}return void 0!==e.min&&(n[0]=e.min),void 0!==e.max&&(n[1]=e.max),n},e.prototype.isAbscissas=function(){return-1!==[t.Options.AxisOptions.SIDE.X,t.Options.AxisOptions.SIDE.X2].indexOf(this.side)},e.prototype.isInLastHalf=function(t){var i=function(t){return t};t instanceof Date&&(i=function(t){return t.getTime()});var e=this.scale.domain(),n=e[0],r=e[1];return i(t)>i(n)+(i(r)-i(n))/2},e.prototype.createAxis=function(t){this.svg=t.append("g").attr("class","axis "+this.side+"-axis")},e.prototype.updateAxisOrientation=function(i){this.isAbscissas()?this.side===t.Options.AxisOptions.SIDE.X?i.orient("bottom"):i.orient("top"):this.side===t.Options.AxisOptions.SIDE.Y?i.orient("left"):i.orient("right")},e.prototype.updateAxisContainer=function(i){this.isAbscissas()?this.side===t.Options.AxisOptions.SIDE.X?this.svg.attr("transform","translate(0, "+i.innerHeight+")"):this.svg.attr("transform","translate(0, 0)"):this.side===t.Options.AxisOptions.SIDE.Y?this.svg.attr("transform","translate(0, 0)"):this.svg.attr("transform","translate("+i.innerWidth+", 0)"),this.svg.transition().call(this.factoryMgr.getBoundFunction("transitions","edit")).call(this.d3axis)},e.prototype.destroyAxis=function(){this.svg.remove()},e.prototype.getScale=function(i){return i.type===t.Options.AxisOptions.TYPE.DATE?d3.time.scale():i.type===t.Options.AxisOptions.TYPE.LOG?d3.scale.log():d3.scale.linear()},e.prototype.getAxis=function(t,i){var e=d3.svg.axis().scale(t);return i.configure(e),e},e.prototype.cloneAxis=function(){return d3.svg.axis().scale(this.d3axis.scale()).orient(this.d3axis.orient()).tickValues(this.d3axis.tickValues()).ticks(this.d3axis.ticks()[0]).tickSize(this.d3axis.tickSize())},e}(i.BaseFactory);i.Axis=e}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.create=function(){this.svg=this.factoryMgr.get("container").axes.insert("g",":first-child").attr("class","grid"),this.svg.append("g").classed("x-grid",!0),this.svg.append("g").classed("y-grid",!0),this.eventMgr.on("zoom."+this.key,this.softUpdate.bind(this)),this.eventMgr.on("outer-world-zoom."+this.key,this.softUpdate.bind(this))},i.prototype.softUpdate=function(){this.xAxis&&this.svg.select(".x-grid").call(this.xAxis),this.yAxis&&this.svg.select(".y-grid").call(this.yAxis)},i.prototype.update=function(t,i){var e=this.factoryMgr.get("container"),n=e.getDimensions();i.grid.x&&(this.xAxis=this.factoryMgr.get("x-axis").cloneAxis(),this.svg.select(".x-grid").transition().call(this.factoryMgr.getBoundFunction("transitions","edit")).attr("transform","translate(0, "+n.innerHeight+")").call(this.xAxis.tickSize(-n.innerHeight,0))),i.grid.y&&(this.yAxis=this.factoryMgr.get("y-axis").cloneAxis(),this.svg.select(".y-grid").transition().call(this.factoryMgr.getBoundFunction("transitions","edit")).call(this.yAxis.tickSize(-n.innerWidth,0)))},i.prototype.destroy=function(){this.svg.remove()},i}(t.BaseFactory);t.Grid=i}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.create=function(){this.behavior=d3.behavior.zoom(),this.eventMgr.on("outer-world-zoom."+this.key,this.updateFromOuterWorld.bind(this))},i.prototype.updateFromOuterWorld=function(t){this.behavior.translate(t);var i=this.factoryMgr.get("x-axis"),e=this.factoryMgr.get("y-axis"),n=this.factoryMgr.get("y2-axis"),r=this.factoryMgr.get("x2-axis");n.scale.domain(e.scale.domain()),r.scale.domain(i.scale.domain()),this.factoryMgr.turnFactoriesOff(["transitions","tooltip"]),this.eventMgr.trigger("zoom",d3.event,!1),this.factoryMgr.turnFactoriesOn(["transitions","tooltip"])},i.prototype.update=function(t,i){var e=this,n=this.factoryMgr.get("x-axis"),r=this.factoryMgr.get("y-axis");if(i.pan.x&&this.behavior.x(n.scale),i.pan.y&&this.behavior.y(r.scale),i.pan.x||i.pan.y){var s=this.factoryMgr.get("y2-axis"),o=this.factoryMgr.get("x2-axis"),a=this.eventMgr;this.factoryMgr.get("transitions");this.behavior.scaleExtent([1,1]).on("zoomstart",function(){e.factoryMgr.turnFactoriesOff(["transitions","tooltip"])}).on("zoom",function(){s.scale.domain(r.scale.domain()),o.scale.domain(n.scale.domain()),a.trigger("zoom",d3.event,!0)}).on("zoomend",function(){e.factoryMgr.turnFactoriesOn(["transitions","tooltip"]),a.trigger("zoomend",d3.event,!0)}),this.factoryMgr.get("container").svg.call(this.behavior),this.factoryMgr.get("container").svg.on("wheel.zoom",null),this.factoryMgr.get("container").svg.on("mousewheel.zoom",null)}},i}(t.BaseFactory);t.Zoom=i}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(t){function i(){t.apply(this,arguments),this.duration=i.defaultDuration,this.ease="cubic"}return __extends(i,t),i.prototype.isEnabled=function(){return this.duration>0},i.prototype.off=function(){this.duration=0},i.prototype.on=function(){this.duration=i.defaultDuration},i.prototype.enter=function(t){var i=this.duration,e=this.ease,n=t[0].length,r=function(t,e){return n?e/n*i:0};t.duration(i).delay(r).ease(e)},i.prototype.edit=function(t){var i=this.duration,e=this.ease,n=0;t.duration(i).delay(n).ease(e)},i.prototype.exit=function(t){var i=this.duration,e=this.ease,n=0;t.duration(i).delay(n).ease(e)},i.defaultDuration=250,i}(t.BaseFactory);t.Transition=i}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(t){"use strict";var i=function(t){function i(i,e,n){t.call(this),this.scope=i,this.attributes=e,this.$parse=n}return __extends(i,t),i.prototype.create=function(){this.unregisteringFunctions=[],this.sanitizeAttributes(),this.syncTooltips(),this.syncDrag()},i.prototype.sanitizeAttributes=function(){var t=this.attributes,i=t.tooltipSyncKey,e=t.dragSyncKey;if(i&&e&&i===e)throw new Error("Heterogeneous sync keys can't have the same value.")},i.prototype.syncTooltips=function(){var t=this,i=this.eventMgr;this.attributes.tooltipSyncKey&&(this.unregisteringFunctions.push(this.scope.$root.$on(this.attributes.tooltipSyncKey,function(t,e){i.triggerDataAndOptions("outer-world-hover",e)})),i.on("container-move.directive",function(i){t.scope.$emit(t.attributes.tooltipSyncKey,t.factoryMgr.get("container").getCoordinatesFromEvent(i))}),i.on("container-out.directive",function(){t.scope.$emit(t.attributes.tooltipSyncKey,{x:void 0,y:void 0})}))},i.prototype.syncDrag=function(){var t=this,i=this.eventMgr,e=[],n=this.factoryMgr.get("x-axis"),r=this.factoryMgr.get("y-axis");if(this.attributes.onDrag){var s=this.$parse(this.attributes.onDrag);e.push(function(i){var e=(i.translate,i.isEndEvent);e||s(t.scope.$parent,{$domains:{x:n.getScaleDomain(),y:r.getScaleDomain()}})})}if(this.attributes.onDragEnd){var o=this.$parse(this.attributes.onDragEnd);e.push(function(i){var e=(i.translate,i.isEndEvent);e&&o(t.scope.$parent,{$domains:{x:n.getScaleDomain(),y:r.getScaleDomain()}})})}this.attributes.dragSyncKey&&e.push(function(i){t.scope.$emit(t.attributes.dragSyncKey,i)}),e.length>0&&(this.unregisteringFunctions.push(this.scope.$root.$on(this.attributes.dragSyncKey,function(e,n){var r=n.translate,s=n.isEndEvent;e.targetScope!==t.scope&&(s?i.triggerDataAndOptions("outer-world-zoomend",r):i.triggerDataAndOptions("outer-world-zoom",r))})),i.on("zoom.directive",function(t,i){i&&e.forEach(function(i){return i({translate:t.translate,isEndEvent:!1})})}),i.on("zoomend.directive",function(t){e.forEach(function(i){return i({translate:t.translate,isEndEvent:!0})})}))},i.prototype.destroy=function(){for(var t;t=this.unregisteringFunctions.pop();)t()},i}(t.BaseFactory);t.SyncLayer=i}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(i){var e;!function(i){"use strict";var e=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.create=function(){this.createContainer(this.factoryMgr.get("container").data),this.eventMgr.on("zoom."+this.type,this.softUpdate.bind(this))},i.prototype.update=function(t,i){this.data=t,this.options=i,this.softUpdate()},i.prototype.softUpdate=function(){var t=this.options.getSeriesByType(this.type).filter(function(t){return t.visible});this.updateSeriesContainer(t)},i.prototype.destroy=function(){this.svg.remove()},i.prototype.createContainer=function(t){this.svg=t.append("g").attr("class",this.type+i.containerClassSuffix)},i.prototype.updateSeriesContainer=function(t){var e=this,n=this.svg.selectAll("."+this.type+i.seriesClassSuffix).data(t,function(t){return t.id});n.enter().append("g").attr({"class":function(t){return e.type+i.seriesClassSuffix+" "+t.id}}),this.styleSeries(n),this.updateSeries(n,t),n.exit().remove()},i.prototype.updateSeries=function(t,i){
var e=this;t.each(function(t,n){var r=d3.select(this);e.updateData(r,t,n,i.length)})},i.prototype.updateData=function(t,i,e,n){},i.prototype.styleSeries=function(t){},i.containerClassSuffix="-data",i.seriesClassSuffix="-series",i}(t.Factory.BaseFactory);i.SeriesFactory=e}(e=i.Series||(i.Series={}))}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(i){var e;!function(e){"use strict";var n=function(i){function e(){i.apply(this,arguments),this.type=t.Options.SeriesOptions.TYPE.DOT}return __extends(e,i),e.prototype.updateData=function(t,i,e,n){var r=this.factoryMgr.get("x-axis"),s=this.factoryMgr.get("y-axis"),o=this.data.getDatasetValues(i,this.options).filter(i.defined),a=2,c=t.selectAll("."+this.type).data(o,function(t){return t.x}),u=function(t){t.attr({r:function(t){return a},cx:function(t){return r.scale(t.x)},cy:function(t){return s.scale.range()[0]}})},p=function(t){t.attr({cx:function(t){return r.scale(t.x)},cy:function(t){return s.scale(t.y1)}}).style("opacity",i.visible?1:0)};this.factoryMgr.get("transitions").isEnabled()?(c.enter().append("circle").attr("class",this.type).call(this.eventMgr.datumEnter(i,this.options)).call(this.eventMgr.datumOver(i,this.options)).call(this.eventMgr.datumMove(i,this.options)).call(this.eventMgr.datumLeave(i,this.options)).call(u).transition().call(this.factoryMgr.getBoundFunction("transitions","enter")).call(p),c.transition().call(this.factoryMgr.getBoundFunction("transitions","edit")).call(p),c.exit().transition().call(this.factoryMgr.getBoundFunction("transitions","exit")).call(u).each("end",function(){d3.select(this).remove()})):(c.enter().append("circle").attr("class",this.type).call(this.eventMgr.datumEnter(i,this.options)).call(this.eventMgr.datumOver(i,this.options)).call(this.eventMgr.datumMove(i,this.options)).call(this.eventMgr.datumLeave(i,this.options)).call(p),c.call(p),c.exit().remove())},e.prototype.styleSeries=function(t){t.style({stroke:function(t){return t.color}})},e}(i.Series.SeriesFactory);e.Dot=n}(e=i.Series||(i.Series={}))}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(i){var e;!function(e){"use strict";var n=function(i){function e(){i.apply(this,arguments),this.type=t.Options.SeriesOptions.TYPE.LINE}return __extends(e,i),e.prototype.updateData=function(t,i,e,n){t.classed("dashed",i.isDashed());var r=this.factoryMgr.get("x-axis"),s=this.factoryMgr.get("y-axis"),o=this.data.getDatasetValues(i,this.options),a=d3.svg.line().defined(i.defined).x(function(t){return r.scale(t.x)}).y(s.scale.range()[0]).interpolate(i.interpolation.mode).tension(i.interpolation.tension),c=d3.svg.line().defined(i.defined).x(function(t){return r.scale(t.x)}).y(function(t){return s.scale(t.y1)}).interpolate(i.interpolation.mode).tension(i.interpolation.tension),u=t.selectAll("."+this.type).data([o]);this.factoryMgr.get("transitions").isEnabled()?(u.enter().append("path").attr("class",this.type).attr("d",function(t){return a(t)}).transition().call(this.factoryMgr.getBoundFunction("transitions","enter")).attr("d",function(t){return c(t)}),u.transition().call(this.factoryMgr.getBoundFunction("transitions","edit")).attr("d",function(t){return c(t)}).style("opacity",i.visible?1:0),u.exit().transition().call(this.factoryMgr.getBoundFunction("transitions","exit")).attr("d",function(t){return a(t)}).each("end",function(){d3.select(this).remove()})):(u.enter().append("path").attr("class",this.type).attr("d",function(t){return c(t)}),u.attr("d",function(t){return c(t)}).style("opacity",i.visible?1:0),u.exit().remove())},e.prototype.styleSeries=function(t){t.style({fill:"none",stroke:function(t){return t.color},"stroke-dasharray":function(t){return t.isDashed()?"10,3":void 0}})},e}(i.Series.SeriesFactory);e.Line=n}(e=i.Series||(i.Series={}))}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(i){var e;!function(e){"use strict";var n=function(i){function e(){i.apply(this,arguments),this.type=t.Options.SeriesOptions.TYPE.AREA}return __extends(e,i),e.prototype.updateData=function(t,i,e,n){var r=this.factoryMgr.get("x-axis"),s=this.factoryMgr.get("y-axis"),o=this.data.getDatasetValues(i,this.options),a=d3.svg.area().defined(i.defined).x(function(t){return r.scale(t.x)}).y0(s.scale.range()[0]).y1(s.scale.range()[0]).interpolate(i.interpolation.mode).tension(i.interpolation.tension),c=d3.svg.area().defined(i.defined).x(function(t){return r.scale(t.x)}).y0(function(t){return isNaN(s.scale(t.y0))?s.scale.range()[0]:s.scale(t.y0)}).y1(function(t){return s.scale(t.y1)}).interpolate(i.interpolation.mode).tension(i.interpolation.tension),u=t.selectAll("."+this.type).data([o]);this.factoryMgr.get("transitions").isEnabled()?(u.enter().append("path").attr("class",this.type).attr("d",function(t){return a(t)}).transition().call(this.factoryMgr.getBoundFunction("transitions","enter")).attr("d",function(t){return c(t)}),u.transition().call(this.factoryMgr.getBoundFunction("transitions","edit")).attr("d",function(t){return c(t)}).style("opacity",i.visible?1:0),u.exit().transition().call(this.factoryMgr.getBoundFunction("transitions","exit")).attr("d",function(t){return a(t)}).each("end",function(){d3.select(this).remove()})):(u.enter().append("path").attr("class",this.type).attr("d",function(t){return c(t)}),u.attr("d",function(t){return c(t)}).style("opacity",i.visible?1:0),u.exit().remove())},e.prototype.styleSeries=function(t){t.style({fill:function(t){return t.color},stroke:function(t){return t.color}})},e}(i.Series.SeriesFactory);e.Area=n}(e=i.Series||(i.Series={}))}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){var i;!function(i){var e;!function(e){"use strict";var n=function(i){function e(){i.apply(this,arguments),this.type=t.Options.SeriesOptions.TYPE.COLUMN,this.gapFactor=.2,this.outerPadding=this.gapFactor/2*3,this.columnsWidth=0}return __extends(e,i),e.prototype.update=function(t,i){this.data=t,this.options=i;var e=i.getSeriesByType(this.type).filter(function(t){return t.visible});this.updateColumnsWidth(e,i),this.updateColumnScale(e,i),this.updateSeriesContainer(e)},e.prototype.updateColumnsWidth=function(i,e){var n=this.factoryMgr.get("x-axis"),r=this.data.getDatasets(i,e),s=t.Utils.Data.getMinDistance(r,n.scale,"x");this.columnsWidth=s<Number.MAX_VALUE?s/i.length:10},e.prototype.updateColumnScale=function(t,i){var e=this.columnsWidth*t.length/2;this.innerXScale=d3.scale.ordinal().domain(t.map(function(t){return t.id})).rangeBands([-e,e],0,.1)},e.prototype.getTooltipPosition=function(t){return this.innerXScale(t.id)+this.innerXScale.rangeBand()/2},e.prototype.updateData=function(t,i,e,n){var r=this,s=this.factoryMgr.get("x-axis"),o=this.factoryMgr.get("y-axis"),a=this.data.getDatasetValues(i,this.options).filter(i.defined),c=function(t){return s.scale(t.x)+r.innerXScale(i.id)},u=function(t){t.attr({x:c,y:function(t){return o.scale(t.y0)},width:r.innerXScale.rangeBand(),height:0})},p=function(t){t.attr({x:c,y:function(t){return t.y1>0?o.scale(t.y1):o.scale(t.y0)},width:r.innerXScale.rangeBand(),height:function(t){return Math.abs(o.scale(t.y0)-o.scale(t.y1))}}).style("opacity",i.visible?1:0)},h=t.selectAll("."+this.type).data(a,function(t){return t.x});this.factoryMgr.get("transitions").isEnabled()?(h.enter().append("rect").attr("class",this.type).call(this.eventMgr.datumEnter(i,this.options)).call(this.eventMgr.datumOver(i,this.options)).call(this.eventMgr.datumMove(i,this.options)).call(this.eventMgr.datumLeave(i,this.options)).call(u).transition().call(this.factoryMgr.getBoundFunction("transitions","enter")).call(p),h.transition().call(this.factoryMgr.getBoundFunction("transitions","edit")).call(p),h.exit().transition().call(this.factoryMgr.getBoundFunction("transitions","exit")).call(u).each("end",function(){d3.select(this).remove()})):(h.enter().append("rect").attr("class",this.type).call(this.eventMgr.datumEnter(i,this.options)).call(this.eventMgr.datumOver(i,this.options)).call(this.eventMgr.datumMove(i,this.options)).call(this.eventMgr.datumLeave(i,this.options)).call(p),h.call(p),h.exit().remove())},e.prototype.styleSeries=function(t){t.style({fill:function(t){return t.color},stroke:function(t){return t.color},"stroke-width":1})},e}(i.Series.SeriesFactory);e.Column=n}(e=i.Series||(i.Series={}))}(i=t.Factory||(t.Factory={}))}(n3Charts||(n3Charts={}));var n3Charts;!function(t){"use strict";var i=function(){function i(i,e,n,r){var s=this;this.$window=i,this.$parse=e,this.$timeout=n,this.$rootScope=r,this.scope={data:"=",options:"=",styles:"=",hoveredCoordinates:"="},this.restrict="E",this.replace=!0,this.template="<div></div>",this.link=function(i,e,n){var r=new t.Utils.EventManager,o=new t.Utils.FactoryManager;r.init(t.Utils.EventManager.EVENTS),o.registerMany([["container",t.Factory.Container,e[0]],["tooltip",t.Factory.Tooltip,e[0]],["legend",t.Factory.Legend,e[0]],["transitions",t.Factory.Transition],["x-axis",t.Factory.Axis,t.Options.AxisOptions.SIDE.X],["x2-axis",t.Factory.Axis,t.Options.AxisOptions.SIDE.X2],["y-axis",t.Factory.Axis,t.Options.AxisOptions.SIDE.Y],["y2-axis",t.Factory.Axis,t.Options.AxisOptions.SIDE.Y2],["grid",t.Factory.Grid],["zoom",t.Factory.Zoom],["sync-layer",t.Factory.SyncLayer,i,n,s.$parse],["series-area",t.Factory.Series.Area],["series-column",t.Factory.Series.Column],["series-line",t.Factory.Series.Line],["series-dot",t.Factory.Series.Dot]]),o.all().forEach(function(t){return t.instance.init(t.key,r,o)});var a,c,u=void 0===i.options,p=function(){c=new t.Options.Options(angular.copy(i.options)),a=new t.Utils.Data(angular.copy(i.data)),u&&(u=!1,r.trigger("create",c),r.trigger("resize",e[0].parentElement)),r.update(a,c),r.trigger("update",a,c)};u||(r.trigger("create",new t.Options.Options(angular.copy(i.options))),r.trigger("resize",e[0].parentElement)),i.$watch("[options, data]",p,!0),r.on("legend-click.directive",function(t){var e=i.options.series.filter(function(i){return i.id===t.id})[0];e.visible=t.getToggledVisibility(),i.$apply()}),i.elementDimensions={};var h=s.$timeout,l=function(t,i){var e=null;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];h.cancel(e),e=h(function(){return t.apply(s,n)},i)}},d=l(function(t){var n=e[0].parentElement.getBoundingClientRect();i.elementDimensions.height=n.height,i.elementDimensions.width=n.width,i.elementDimensions.left=n.left,i.elementDimensions.right=n.right,i.elementDimensions.bottom=n.bottom,i.elementDimensions.top=n.top,i.$apply()},50);angular.element(s.$window).on("resize",d),i.$watch("elementDimensions",function(){r.trigger("resize",e[0].parentElement),p()},!0),i.$on("$destroy",function(){r.trigger("destroy"),angular.element(s.$window).off("resize",d)})}}return i}();t.LineChart=i,angular.module("n3-line-chart",[]).directive("linechart",["$window","$parse","$timeout","$rootScope",function(t,e,n,r){return new i(t,e,n,r)}])}(n3Charts||(n3Charts={}));