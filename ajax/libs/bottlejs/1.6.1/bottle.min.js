(function(t){"use strict";var e=0,r=Array.prototype.slice,i=function(e,r){var i=e[r];if(i===t&&L.strict)throw new Error("Bottle was unable to resolve a service.  `"+r+"` is undefined.");return i},n=function(t){return this.nested[t]||(this.nested[t]=F.pop())},o=function(t){return t.split(".").reduce(i,this)},s=function(t,e){var r=t.split(".");return t=r.pop(),a.call(r.reduce(k,this.container),t,e),this},a=function(t,e){Object.defineProperty(this,t,{configurable:!1,enumerable:!0,value:e,writable:!1})},c=function(t,e){var r,i;return"function"==typeof t&&(e=t,t="__global__"),r=t.split("."),i=r.shift(),r.length?n.call(this,i).decorator(r.join("."),e):(this.decorators[i]||(this.decorators[i]=[]),this.decorators[i].push(e)),this},l=function(t){return this.deferred.push(t),this},u=function(t){return(t||[]).map(o,this.container)},d=function(t,e){return j.call(this,t,function(){this.$get=e})},f=function(t,e){return d.call(this,t,function(t){return{instance:e.bind(e,t)}})},h=function(t){return!/^\$(?:decorator|register|list)$|Provider$/.test(t)},p=function(t){return Object.keys(t||this.container||{}).filter(h)},v=function(t,e,r,i){var n={configurable:!0,enumerable:!0};return t.length?n.get=function(){var e=0,i=function(n){if(n)throw n;t[e]&&t[e++](r,i)};return i(),r}:(n.value=r,n.writable=!0),Object.defineProperty(i,e,n),i[e]},b=function(t,e){var r,i;return"function"==typeof t&&(e=t,t="__global__"),r=t.split("."),i=r.shift(),r.length?n.call(this,i).middleware(r.join("."),e):(this.middlewares[i]||(this.middlewares[i]=[]),this.middlewares[i].push(e)),this},g={},y=function(t){var e;return"string"==typeof t?(e=g[t],e||(g[t]=e=new F,e.constant("BOTTLE_NAME",t)),e):new F},w=function(t){"string"==typeof t?delete g[t]:g={}},m=function(t,e){return e(t)},j=function(t,e){var r,i;return r=t.split("."),this.providerMap[t]&&1===r.length&&!this.container[t+"Provider"]?console.error(t+" provider already instantiated."):(this.originalProviders[t]=e,this.providerMap[t]=!0,i=r.shift(),r.length?(_.call(this,i,e,r),this):$.call(this,i,e))},P=function(t,e){return(t[e]||[]).concat(t.__global__||[])},$=function(e,r){var i,n,o,s,a,c;return s=this.id,o=this.container,a=this.decorators,c=this.middlewares,i=e+"Provider",n=Object.create(null),n[i]={configurable:!0,enumerable:!0,get:function(){var t=new r;return delete o[i],o[i]=t,t}},n[e]={configurable:!0,enumerable:!0,get:function(){var r,n=o[i];return n&&(r=P(a,e).reduce(m,n.$get(o)),delete o[i],delete o[e]),r===t?r:v(P(c,e),e,r,o)}},Object.defineProperties(o,n),this},_=function(t,e,r){var i;return i=n.call(this,t),this.factory(t,function(){return i.container}),i.provider(r.join("."),e)},O=function(e){var r=e.$value===t?e:e.$value;return this[e.$type||"service"].apply(this,[e.$name,r].concat(e.$inject||[]))},x=function(t){delete this.providerMap[t],delete this.container[t],delete this.container[t+"Provider"]},B=function(){var t=this.originalProviders;Object.keys(this.originalProviders).forEach(function(e){var r=e.split(".");r.length>1&&(x.call(this,r[0]),r.forEach(x,n.call(this,r[0]))),x.call(this,e),this.provider(e,t[e])},this)},E=function(t){return this.deferred.forEach(function(e){e(t)}),this},M=function(t,e){var i=arguments.length>2?r.call(arguments,2):null,n=this;return d.call(this,t,function(){var t=e;if(i){var r=i.map(o,n.container);r.unshift(e),t=e.bind.apply(e,r)}return new t})},T=function(t,e){var r;return r=t.split("."),t=r.pop(),A.call(r.reduce(k,this.container),t,e),this},k=function(t,e){var r=t[e];return r||(r={},A.call(t,e,r)),r},A=function(t,e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})},F=function t(r){return this instanceof t?(this.id=e++,this.decorators={},this.middlewares={},this.nested={},this.providerMap={},this.originalProviders={},this.deferred=[],void(this.container={$decorator:c.bind(this),$register:O.bind(this),$list:p.bind(this)})):t.pop(r)};F.prototype={constant:s,decorator:c,defer:l,digest:u,factory:d,instanceFactory:f,list:p,middleware:b,provider:j,resetProviders:B,register:O,resolve:E,service:M,value:T},F.pop=y,F.clear=w,F.list=p;var L=F.config={strict:!1},N={function:!0,object:!0};!function(t){var e=N[typeof exports]&&exports&&!exports.nodeType&&exports,r=N[typeof module]&&module&&!module.nodeType&&module,i=r&&r.exports===e&&e,n=N[typeof global]&&global;!n||n.global!==n&&n.window!==n||(t=n),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t.Bottle=F,define(function(){return F})):e&&r?i?(r.exports=F).Bottle=F:e.Bottle=F:t.Bottle=F}(N[typeof window]&&window||this)}).call(this);
//# sourceMappingURL=bottle.min.js.map