require=(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(b,c,a){(function(d){
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function(){var j={};var v,q;v=this;if(v!=null){q=v.async}j.noConflict=function(){v.async=q;return j};function x(C){var D=false;return function(){if(D){throw new Error("Callback was already called.")}D=true;C.apply(v,arguments)}}var B=Object.prototype.toString;var m=Array.isArray||function(C){return B.call(C)==="[object Array]"};var y=function(C,E){if(C.forEach){return C.forEach(E)}for(var D=0;D<C.length;D+=1){E(C[D],D,C)}};var f=function(C,E){if(C.map){return C.map(E)}var D=[];y(C,function(F,H,G){D.push(E(F,H,G))});return D};var A=function(C,E,D){if(C.reduce){return C.reduce(E,D)}y(C,function(F,H,G){D=E(D,F,H,G)});return D};var h=function(E){if(Object.keys){return Object.keys(E)}var D=[];for(var C in E){if(E.hasOwnProperty(C)){D.push(C)}}return D};if(typeof d==="undefined"||!(d.nextTick)){if(typeof setImmediate==="function"){j.nextTick=function(C){setImmediate(C)};j.setImmediate=j.nextTick}else{j.nextTick=function(C){setTimeout(C,0)};j.setImmediate=j.nextTick}}else{j.nextTick=d.nextTick;if(typeof setImmediate!=="undefined"){j.setImmediate=function(C){setImmediate(C)}}else{j.setImmediate=j.nextTick}}j.each=function(C,F,G){G=G||function(){};if(!C.length){return G()}var E=0;y(C,function(H){F(H,x(D))});function D(H){if(H){G(H);G=function(){}}else{E+=1;if(E>=C.length){G()}}}};j.forEach=j.each;j.eachSeries=function(C,F,G){G=G||function(){};if(!C.length){return G()}var E=0;var D=function(){F(C[E],function(H){if(H){G(H);G=function(){}}else{E+=1;if(E>=C.length){G()}else{D()}}})};D()};j.forEachSeries=j.eachSeries;j.eachLimit=function(C,D,F,G){var E=l(D);E.apply(null,[C,F,G])};j.forEachLimit=j.eachLimit;var l=function(C){return function(D,H,J){J=J||function(){};if(!D.length||C<=0){return J()}var G=0;var E=0;var F=0;(function I(){if(G>=D.length){return J()}while(F<C&&E<D.length){E+=1;F+=1;H(D[E-1],function(K){if(K){J(K);J=function(){}}else{G+=1;F-=1;if(G>=D.length){J()}else{I()}}})}})()}};var w=function(C){return function(){var D=Array.prototype.slice.call(arguments);return C.apply(null,[j.each].concat(D))}};var u=function(C,D){return function(){var E=Array.prototype.slice.call(arguments);return D.apply(null,[l(C)].concat(E))}};var s=function(C){return function(){var D=Array.prototype.slice.call(arguments);return C.apply(null,[j.eachSeries].concat(D))}};var n=function(F,C,E,G){C=f(C,function(H,I){return{index:I,value:H}});if(!G){F(C,function(H,I){E(H.value,function(J){I(J)})})}else{var D=[];F(C,function(H,I){E(H.value,function(K,J){D[H.index]=J;I(K)})},function(H){G(H,D)})}};j.map=w(n);j.mapSeries=s(n);j.mapLimit=function(C,D,E,F){return i(D)(C,E,F)};var i=function(C){return u(C,n)};j.reduce=function(C,D,E,F){j.eachSeries(C,function(G,H){E(D,G,function(J,I){D=I;H(J)})},function(G){F(G,D)})};j.inject=j.reduce;j.foldl=j.reduce;j.reduceRight=function(C,D,E,G){var F=f(C,function(H){return H}).reverse();j.reduce(F,D,E,G)};j.foldr=j.reduceRight;var z=function(F,C,E,G){var D=[];C=f(C,function(H,I){return{index:I,value:H}});F(C,function(H,I){E(H.value,function(J){if(J){D.push(H)}I()})},function(H){G(f(D.sort(function(J,I){return J.index-I.index}),function(I){return I.value}))})};j.filter=w(z);j.filterSeries=s(z);j.select=j.filter;j.selectSeries=j.filterSeries;var r=function(F,C,E,G){var D=[];C=f(C,function(H,I){return{index:I,value:H}});F(C,function(H,I){E(H.value,function(J){if(!J){D.push(H)}I()})},function(H){G(f(D.sort(function(J,I){return J.index-I.index}),function(I){return I.value}))})};j.reject=w(r);j.rejectSeries=s(r);var k=function(E,C,D,F){E(C,function(G,H){D(G,function(I){if(I){F(G);F=function(){}}else{H()}})},function(G){F()})};j.detect=w(k);j.detectSeries=s(k);j.some=function(C,D,E){j.each(C,function(F,G){D(F,function(H){if(H){E(true);E=function(){}}G()})},function(F){E(false)})};j.any=j.some;j.every=function(C,D,E){j.each(C,function(F,G){D(F,function(H){if(!H){E(false);E=function(){}}G()})},function(F){E(true)})};j.all=j.every;j.sortBy=function(C,D,E){j.map(C,function(F,G){D(F,function(H,I){if(H){G(H)}else{G(null,{value:F,criteria:I})}})},function(H,F){if(H){return E(H)}else{var G=function(L,K){var J=L.criteria,I=K.criteria;return J<I?-1:J>I?1:0};E(null,f(F.sort(G),function(I){return I.value}))}})};j.auto=function(E,J){J=J||function(){};var K=h(E);var D=K.length;if(!D){return J()}var G={};var I=[];var C=function(L){I.unshift(L)};var F=function(M){for(var L=0;L<I.length;L+=1){if(I[L]===M){I.splice(L,1);return}}};var H=function(){D--;y(I.slice(0),function(L){L()})};C(function(){if(!D){var L=J;J=function(){};L(null,G)}});y(K,function(M){var L=m(E[M])?E[M]:[E[M]];var Q=function(T){var R=Array.prototype.slice.call(arguments,1);if(R.length<=1){R=R[0]}if(T){var S={};y(h(G),function(U){S[U]=G[U]});S[M]=R;J(T,S);J=function(){}}else{G[M]=R;j.setImmediate(H)}};var O=L.slice(0,Math.abs(L.length-1))||[];var N=function(){return A(O,function(S,R){return(S&&G.hasOwnProperty(R))},true)&&!G.hasOwnProperty(M)};if(N()){L[L.length-1](Q,G)}else{var P=function(){if(N()){F(P);L[L.length-1](Q,G)}};C(P)}})};j.retry=function(G,C,H){var E=5;var D=[];if(typeof G==="function"){H=C;C=G;G=E}G=parseInt(G,10)||E;var F=function(K,I){var J=function(L,M){return function(N){L(function(P,O){N(!P||M,{err:P,result:O})},I)}};while(G){D.push(J(C,!(G-=1)))}j.series(D,function(L,M){M=M[M.length-1];(K||H)(M.err,M.result)})};return H?F():F};j.waterfall=function(F,E){E=E||function(){};if(!m(F)){var C=new Error("First argument to waterfall must be an array of functions");return E(C)}if(!F.length){return E()}var D=function(G){return function(J){if(J){E.apply(null,arguments);E=function(){}}else{var H=Array.prototype.slice.call(arguments,1);var I=G.next();if(I){H.push(D(I))}else{H.push(E)}j.setImmediate(function(){G.apply(null,H)})}}};D(j.iterator(F))()};var g=function(D,F,E){E=E||function(){};if(m(F)){D.map(F,function(G,H){if(G){G(function(J){var I=Array.prototype.slice.call(arguments,1);if(I.length<=1){I=I[0]}H.call(null,J,I)})}},E)}else{var C={};D.each(h(F),function(G,H){F[G](function(J){var I=Array.prototype.slice.call(arguments,1);if(I.length<=1){I=I[0]}C[G]=I;H(J)})},function(G){E(G,C)})}};j.parallel=function(D,C){g({map:j.map,each:j.each},D,C)};j.parallelLimit=function(E,C,D){g({map:i(C),each:l(C)},E,D)};j.series=function(E,D){D=D||function(){};if(m(E)){j.mapSeries(E,function(F,G){if(F){F(function(I){var H=Array.prototype.slice.call(arguments,1);if(H.length<=1){H=H[0]}G.call(null,I,H)})}},D)}else{var C={};j.eachSeries(h(E),function(F,G){E[F](function(I){var H=Array.prototype.slice.call(arguments,1);if(H.length<=1){H=H[0]}C[F]=H;G(I)})},function(F){D(F,C)})}};j.iterator=function(D){var C=function(E){var F=function(){if(D.length){D[E].apply(null,arguments)}return F.next()};F.next=function(){return(E<D.length-1)?C(E+1):null};return F};return C(0)};j.apply=function(D){var C=Array.prototype.slice.call(arguments,1);return function(){return D.apply(null,C.concat(Array.prototype.slice.call(arguments)))}};var t=function(F,C,D,G){var E=[];F(C,function(I,H){D(I,function(J,K){E=E.concat(K||[]);H(J)})},function(H){G(H,E)})};j.concat=w(t);j.concatSeries=s(t);j.whilst=function(E,C,D){if(E()){C(function(F){if(F){return D(F)}j.whilst(E,C,D)})}else{D()}};j.doWhilst=function(C,E,D){C(function(G){if(G){return D(G)}var F=Array.prototype.slice.call(arguments,1);if(E.apply(null,F)){j.doWhilst(C,E,D)}else{D()}})};j.until=function(E,C,D){if(!E()){C(function(F){if(F){return D(F)}j.until(E,C,D)})}else{D()}};j.doUntil=function(C,E,D){C(function(G){if(G){return D(G)}var F=Array.prototype.slice.call(arguments,1);if(!E.apply(null,F)){j.doUntil(C,E,D)}else{D()}})};j.queue=function(G,E){if(E===undefined){E=1}function C(I,H,K,J){if(!I.started){I.started=true}if(!m(H)){H=[H]}if(H.length==0){return j.setImmediate(function(){if(I.drain){I.drain()}})}y(H,function(L){var M={data:L,callback:typeof J==="function"?J:null};if(K){I.tasks.unshift(M)}else{I.tasks.push(M)}if(I.saturated&&I.tasks.length===I.concurrency){I.saturated()}j.setImmediate(I.process)})}var D=0;var F={tasks:[],concurrency:E,saturated:null,empty:null,drain:null,started:false,paused:false,push:function(H,I){C(F,H,false,I)},kill:function(){F.drain=null;F.tasks=[]},unshift:function(H,I){C(F,H,true,I)},process:function(){if(!F.paused&&D<F.concurrency&&F.tasks.length){var I=F.tasks.shift();if(F.empty&&F.tasks.length===0){F.empty()}D+=1;var J=function(){D-=1;if(I.callback){I.callback.apply(I,arguments)}if(F.drain&&F.tasks.length+D===0){F.drain()}F.process()};var H=x(J);G(I.data,H)}},length:function(){return F.tasks.length},running:function(){return D},idle:function(){return F.tasks.length+D===0},pause:function(){if(F.paused===true){return}F.paused=true;F.process()},resume:function(){if(F.paused===false){return}F.paused=false;F.process()}};return F};j.priorityQueue=function(H,F){function E(J,I){return J.priority-I.priority}function D(N,L,M){var K=-1,I=N.length-1;while(K<I){var J=K+((I-K+1)>>>1);if(M(L,N[J])>=0){K=J}else{I=J-1}}return K}function C(K,J,I,L){if(!K.started){K.started=true}if(!m(J)){J=[J]}if(J.length==0){return j.setImmediate(function(){if(K.drain){K.drain()}})}y(J,function(M){var N={data:M,priority:I,callback:typeof L==="function"?L:null};K.tasks.splice(D(K.tasks,N,E)+1,0,N);if(K.saturated&&K.tasks.length===K.concurrency){K.saturated()}j.setImmediate(K.process)})}var G=j.queue(H,F);G.push=function(J,I,K){C(G,J,I,K)};delete G.unshift;return G};j.cargo=function(G,F){var C=false,H=[];var D={tasks:H,payload:F,saturated:null,empty:null,drain:null,drained:true,push:function(I,J){if(!m(I)){I=[I]}y(I,function(K){H.push({data:K,callback:typeof J==="function"?J:null});D.drained=false;if(D.saturated&&H.length===F){D.saturated()}});j.setImmediate(D.process)},process:function E(){if(C){return}if(H.length===0){if(D.drain&&!D.drained){D.drain()}D.drained=true;return}var I=typeof F==="number"?H.splice(0,F):H.splice(0,H.length);var J=f(I,function(K){return K.data});if(D.empty){D.empty()}C=true;G(J,function(){C=false;var K=arguments;y(I,function(L){if(L.callback){L.callback.apply(null,K)}});E()})},length:function(){return H.length},running:function(){return C}};return D};var o=function(C){return function(E){var D=Array.prototype.slice.call(arguments,1);E.apply(null,D.concat([function(G){var F=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(G){if(console.error){console.error(G)}}else{if(console[C]){y(F,function(H){console[C](H)})}}}}]))}};j.log=o("log");j.dir=o("dir");j.memoize=function(G,E){var D={};var F={};E=E||function(H){return H};var C=function(){var H=Array.prototype.slice.call(arguments);var J=H.pop();var I=E.apply(null,H);if(I in D){j.nextTick(function(){J.apply(null,D[I])})}else{if(I in F){F[I].push(J)}else{F[I]=[J];G.apply(null,H.concat([function(){D[I]=arguments;var M=F[I];delete F[I];for(var L=0,K=M.length;L<K;L++){M[L].apply(null,arguments)}}]))}}};C.memo=D;C.unmemoized=G;return C};j.unmemoize=function(C){return function(){return(C.unmemoized||C).apply(null,arguments)}};j.times=function(F,E,G){var C=[];for(var D=0;D<F;D++){C.push(D)}return j.map(C,E,G)};j.timesSeries=function(F,E,G){var C=[];for(var D=0;D<F;D++){C.push(D)}return j.mapSeries(C,E,G)};j.seq=function(){var C=arguments;return function(){var E=this;var D=Array.prototype.slice.call(arguments);var F=D.pop();j.reduce(C,D,function(H,I,G){I.apply(E,H.concat([function(){var K=arguments[0];var J=Array.prototype.slice.call(arguments,1);G(K,J)}]))},function(H,G){F.apply(E,[H].concat(G))})}};j.compose=function(){return j.seq.apply(null,Array.prototype.reverse.call(arguments))};var p=function(F,D){var E=function(){var H=this;var G=Array.prototype.slice.call(arguments);var I=G.pop();return F(D,function(K,J){K.apply(H,G.concat([J]))},I)};if(arguments.length>2){var C=Array.prototype.slice.call(arguments,2);return E.apply(this,C)}else{return E}};j.applyEach=w(p);j.applyEachSeries=s(p);j.forever=function(D,E){function C(F){if(F){if(E){return E(F)}throw F}D(C)}C()};if(typeof c!=="undefined"&&c.exports){c.exports=j}else{if(typeof define!=="undefined"&&define.amd){define([],function(){return j})}else{v.async=j}}}())}).call(this,b("_process"))},{_process:3}],2:[function(b,c,a){(function(j){function h(o,l){var k=0;for(var m=o.length-1;m>=0;m--){var n=o[m];if(n==="."){o.splice(m,1)}else{if(n===".."){o.splice(m,1);k++}else{if(k){o.splice(m,1);k--}}}}if(l){for(;k--;k){o.unshift("..")}}return o}var g=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var d=function(k){return g.exec(k).slice(1)};a.resolve=function(){var m="",k=false;for(var l=arguments.length-1;l>=-1&&!k;l--){var n=(l>=0)?arguments[l]:j.cwd();if(typeof n!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else{if(!n){continue}}m=n+"/"+m;k=n.charAt(0)==="/"}m=h(f(m.split("/"),function(o){return !!o}),!k).join("/");return((k?"/":"")+m)||"."};a.normalize=function(m){var l=a.isAbsolute(m),k=i(m,-1)==="/";m=h(f(m.split("/"),function(n){return !!n}),!l).join("/");if(!m&&!l){m="."}if(m&&k){m+="/"}return(l?"/":"")+m};a.isAbsolute=function(k){return k.charAt(0)==="/"};a.join=function(){var k=Array.prototype.slice.call(arguments,0);return a.normalize(f(k,function(m,l){if(typeof m!=="string"){throw new TypeError("Arguments to path.join must be strings")}return m}).join("/"))};a.relative=function(q,r){q=a.resolve(q).substr(1);r=a.resolve(r).substr(1);function m(t){var v=0;for(;v<t.length;v++){if(t[v]!==""){break}}var u=t.length-1;for(;u>=0;u--){if(t[u]!==""){break}}if(v>u){return[]}return t.slice(v,u-v+1)}var p=m(q.split("/"));var l=m(r.split("/"));var k=Math.min(p.length,l.length);var s=k;for(var o=0;o<k;o++){if(p[o]!==l[o]){s=o;break}}var n=[];for(var o=s;o<p.length;o++){n.push("..")}n=n.concat(l.slice(s));return n.join("/")};a.sep="/";a.delimiter=":";a.dirname=function(n){var k=d(n),l=k[0],m=k[1];if(!l&&!m){return"."}if(m){m=m.substr(0,m.length-1)}return l+m};a.basename=function(m,k){var l=d(m)[2];if(k&&l.substr(-1*k.length)===k){l=l.substr(0,l.length-k.length)}return l};a.extname=function(k){return d(k)[3]};function f(k,n){if(k.filter){return k.filter(n)}var m=[];for(var l=0;l<k.length;l++){if(n(k[l],l,k)){m.push(k[l])}}return m}var i="ab".substr(-1)==="b"?function(l,m,k){return l.substr(m,k)}:function(l,m,k){if(m<0){m=l.length+m}return l.substr(m,k)}}).call(this,b("_process"))},{_process:3}],3:[function(c,d,b){var h=d.exports={};var a=[];var i=false;function g(){if(i){return}i=true;var l;var j=a.length;while(j){l=a;a=[];var k=-1;while(++k<j){l[k]()}j=a.length}i=false}h.nextTick=function(j){a.push(j);if(!i){setTimeout(g,0)}};h.title="browser";h.browser=true;h.env={};h.argv=[];h.version="";h.versions={};function f(){}h.on=f;h.addListener=f;h.once=f;h.off=f;h.removeListener=f;h.removeAllListeners=f;h.emit=f;h.binding=function(j){throw new Error("process.binding is not supported")};h.cwd=function(){return"/"};h.chdir=function(j){throw new Error("process.chdir is not supported")};h.umask=function(){return 0}},{}],4:[function(d,c,f){function m(p,n,o){this.fn=p;this.context=n;this.once=o||false}function l(){}l.prototype._events=undefined;l.prototype.listeners=function i(r,q){var t="~"+r,s=this._events&&this._events[t];if(q){return !!s}if(!s){return[]}if(this._events[t].fn){return[this._events[t].fn]}for(var p=0,o=this._events[t].length,n=new Array(o);p<o;p++){n[p]=this._events[t][p].fn}return n};l.prototype.emit=function j(o,q,p,n,z,y){var u="~"+o;if(!this._events||!this._events[u]){return false}var x=this._events[u],v=arguments.length,w,t;if("function"===typeof x.fn){if(x.once){this.removeListener(o,x.fn,undefined,true)}switch(v){case 1:return x.fn.call(x.context),true;case 2:return x.fn.call(x.context,q),true;case 3:return x.fn.call(x.context,q,p),true;case 4:return x.fn.call(x.context,q,p,n),true;case 5:return x.fn.call(x.context,q,p,n,z),true;case 6:return x.fn.call(x.context,q,p,n,z,y),true}for(t=1,w=new Array(v-1);t<v;t++){w[t-1]=arguments[t]}x.fn.apply(x.context,w)}else{var r=x.length,s;for(t=0;t<r;t++){if(x[t].once){this.removeListener(o,x[t].fn,undefined,true)}switch(v){case 1:x[t].fn.call(x[t].context);break;case 2:x[t].fn.call(x[t].context,q);break;case 3:x[t].fn.call(x[t].context,q,p);break;default:if(!w){for(s=1,w=new Array(v-1);s<v;s++){w[s-1]=arguments[s]}}x[t].fn.apply(x[t].context,w)}}}return true};l.prototype.on=function h(p,o,n){var r=new m(o,n||this),q="~"+p;if(!this._events){this._events={}}if(!this._events[q]){this._events[q]=r}else{if(!this._events[q].fn){this._events[q].push(r)}else{this._events[q]=[this._events[q],r]}}return this};l.prototype.once=function b(p,o,n){var r=new m(o,n||this,true),q="~"+p;if(!this._events){this._events={}}if(!this._events[q]){this._events[q]=r}else{if(!this._events[q].fn){this._events[q].push(r)}else{this._events[q]=[this._events[q],r]}}return this};l.prototype.removeListener=function g(n,u,p,o){var s="~"+n;if(!this._events||!this._events[s]){return this}var t=this._events[s],v=[];if(u){if(t.fn){if(t.fn!==u||(o&&!t.once)||(p&&t.context!==p)){v.push(t)}}else{for(var r=0,q=t.length;r<q;r++){if(t[r].fn!==u||(o&&!t[r].once)||(p&&t[r].context!==p)){v.push(t[r])}}}}if(v.length){this._events[s]=v.length===1?v[0]:v}else{delete this._events[s]}return this};l.prototype.removeAllListeners=function k(n){if(!this._events){return this}if(n){delete this._events["~"+n]}else{this._events={}}return this};l.prototype.off=l.prototype.removeListener;l.prototype.addListener=l.prototype.on;l.prototype.setMaxListeners=function a(){return this};c.exports=l},{}],5:[function(b,c,a){function d(f){if(f==null){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(f)}c.exports=Object.assign||function(k,j){var m;var h;var l=d(k);for(var g=1;g<arguments.length;g++){m=arguments[g];h=Object.keys(Object(m));for(var f=0;f<h.length;f++){l[h[f]]=m[h[f]]}}return l}},{}],6:[function(b,c,a){(function(d){
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function(){var j={};var v,q;v=this;if(v!=null){q=v.async}j.noConflict=function(){v.async=q;return j};function x(C){var D=false;return function(){if(D){throw new Error("Callback was already called.")}D=true;C.apply(v,arguments)}}var B=Object.prototype.toString;var m=Array.isArray||function(C){return B.call(C)==="[object Array]"};var y=function(C,E){if(C.forEach){return C.forEach(E)}for(var D=0;D<C.length;D+=1){E(C[D],D,C)}};var f=function(C,E){if(C.map){return C.map(E)}var D=[];y(C,function(F,H,G){D.push(E(F,H,G))});return D};var A=function(C,E,D){if(C.reduce){return C.reduce(E,D)}y(C,function(F,H,G){D=E(D,F,H,G)});return D};var h=function(E){if(Object.keys){return Object.keys(E)}var D=[];for(var C in E){if(E.hasOwnProperty(C)){D.push(C)}}return D};if(typeof d==="undefined"||!(d.nextTick)){if(typeof setImmediate==="function"){j.nextTick=function(C){setImmediate(C)};j.setImmediate=j.nextTick}else{j.nextTick=function(C){setTimeout(C,0)};j.setImmediate=j.nextTick}}else{j.nextTick=d.nextTick;if(typeof setImmediate!=="undefined"){j.setImmediate=function(C){setImmediate(C)}}else{j.setImmediate=j.nextTick}}j.each=function(C,F,G){G=G||function(){};if(!C.length){return G()}var E=0;y(C,function(H){F(H,x(D))});function D(H){if(H){G(H);G=function(){}}else{E+=1;if(E>=C.length){G()}}}};j.forEach=j.each;j.eachSeries=function(C,F,G){G=G||function(){};if(!C.length){return G()}var E=0;var D=function(){F(C[E],function(H){if(H){G(H);G=function(){}}else{E+=1;if(E>=C.length){G()}else{D()}}})};D()};j.forEachSeries=j.eachSeries;j.eachLimit=function(C,D,F,G){var E=l(D);E.apply(null,[C,F,G])};j.forEachLimit=j.eachLimit;var l=function(C){return function(D,H,J){J=J||function(){};if(!D.length||C<=0){return J()}var G=0;var E=0;var F=0;(function I(){if(G>=D.length){return J()}while(F<C&&E<D.length){E+=1;F+=1;H(D[E-1],function(K){if(K){J(K);J=function(){}}else{G+=1;F-=1;if(G>=D.length){J()}else{I()}}})}})()}};var w=function(C){return function(){var D=Array.prototype.slice.call(arguments);return C.apply(null,[j.each].concat(D))}};var u=function(C,D){return function(){var E=Array.prototype.slice.call(arguments);return D.apply(null,[l(C)].concat(E))}};var s=function(C){return function(){var D=Array.prototype.slice.call(arguments);return C.apply(null,[j.eachSeries].concat(D))}};var n=function(F,C,E,G){C=f(C,function(H,I){return{index:I,value:H}});if(!G){F(C,function(H,I){E(H.value,function(J){I(J)})})}else{var D=[];F(C,function(H,I){E(H.value,function(K,J){D[H.index]=J;I(K)})},function(H){G(H,D)})}};j.map=w(n);j.mapSeries=s(n);j.mapLimit=function(C,D,E,F){return i(D)(C,E,F)};var i=function(C){return u(C,n)};j.reduce=function(C,D,E,F){j.eachSeries(C,function(G,H){E(D,G,function(J,I){D=I;H(J)})},function(G){F(G,D)})};j.inject=j.reduce;j.foldl=j.reduce;j.reduceRight=function(C,D,E,G){var F=f(C,function(H){return H}).reverse();j.reduce(F,D,E,G)};j.foldr=j.reduceRight;var z=function(F,C,E,G){var D=[];C=f(C,function(H,I){return{index:I,value:H}});F(C,function(H,I){E(H.value,function(J){if(J){D.push(H)}I()})},function(H){G(f(D.sort(function(J,I){return J.index-I.index}),function(I){return I.value}))})};j.filter=w(z);j.filterSeries=s(z);j.select=j.filter;j.selectSeries=j.filterSeries;var r=function(F,C,E,G){var D=[];C=f(C,function(H,I){return{index:I,value:H}});F(C,function(H,I){E(H.value,function(J){if(!J){D.push(H)}I()})},function(H){G(f(D.sort(function(J,I){return J.index-I.index}),function(I){return I.value}))})};j.reject=w(r);j.rejectSeries=s(r);var k=function(E,C,D,F){E(C,function(G,H){D(G,function(I){if(I){F(G);F=function(){}}else{H()}})},function(G){F()})};j.detect=w(k);j.detectSeries=s(k);j.some=function(C,D,E){j.each(C,function(F,G){D(F,function(H){if(H){E(true);E=function(){}}G()})},function(F){E(false)})};j.any=j.some;j.every=function(C,D,E){j.each(C,function(F,G){D(F,function(H){if(!H){E(false);E=function(){}}G()})},function(F){E(true)})};j.all=j.every;j.sortBy=function(C,D,E){j.map(C,function(F,G){D(F,function(H,I){if(H){G(H)}else{G(null,{value:F,criteria:I})}})},function(H,F){if(H){return E(H)}else{var G=function(L,K){var J=L.criteria,I=K.criteria;return J<I?-1:J>I?1:0};E(null,f(F.sort(G),function(I){return I.value}))}})};j.auto=function(E,J){J=J||function(){};var K=h(E);var D=K.length;if(!D){return J()}var G={};var I=[];var C=function(L){I.unshift(L)};var F=function(M){for(var L=0;L<I.length;L+=1){if(I[L]===M){I.splice(L,1);return}}};var H=function(){D--;y(I.slice(0),function(L){L()})};C(function(){if(!D){var L=J;J=function(){};L(null,G)}});y(K,function(M){var L=m(E[M])?E[M]:[E[M]];var Q=function(T){var R=Array.prototype.slice.call(arguments,1);if(R.length<=1){R=R[0]}if(T){var S={};y(h(G),function(U){S[U]=G[U]});S[M]=R;J(T,S);J=function(){}}else{G[M]=R;j.setImmediate(H)}};var O=L.slice(0,Math.abs(L.length-1))||[];var N=function(){return A(O,function(S,R){return(S&&G.hasOwnProperty(R))},true)&&!G.hasOwnProperty(M)};if(N()){L[L.length-1](Q,G)}else{var P=function(){if(N()){F(P);L[L.length-1](Q,G)}};C(P)}})};j.retry=function(G,C,H){var E=5;var D=[];if(typeof G==="function"){H=C;C=G;G=E}G=parseInt(G,10)||E;var F=function(K,I){var J=function(L,M){return function(N){L(function(P,O){N(!P||M,{err:P,result:O})},I)}};while(G){D.push(J(C,!(G-=1)))}j.series(D,function(L,M){M=M[M.length-1];(K||H)(M.err,M.result)})};return H?F():F};j.waterfall=function(F,E){E=E||function(){};if(!m(F)){var C=new Error("First argument to waterfall must be an array of functions");return E(C)}if(!F.length){return E()}var D=function(G){return function(J){if(J){E.apply(null,arguments);E=function(){}}else{var H=Array.prototype.slice.call(arguments,1);var I=G.next();if(I){H.push(D(I))}else{H.push(E)}j.setImmediate(function(){G.apply(null,H)})}}};D(j.iterator(F))()};var g=function(D,F,E){E=E||function(){};if(m(F)){D.map(F,function(G,H){if(G){G(function(J){var I=Array.prototype.slice.call(arguments,1);if(I.length<=1){I=I[0]}H.call(null,J,I)})}},E)}else{var C={};D.each(h(F),function(G,H){F[G](function(J){var I=Array.prototype.slice.call(arguments,1);if(I.length<=1){I=I[0]}C[G]=I;H(J)})},function(G){E(G,C)})}};j.parallel=function(D,C){g({map:j.map,each:j.each},D,C)};j.parallelLimit=function(E,C,D){g({map:i(C),each:l(C)},E,D)};j.series=function(E,D){D=D||function(){};if(m(E)){j.mapSeries(E,function(F,G){if(F){F(function(I){var H=Array.prototype.slice.call(arguments,1);if(H.length<=1){H=H[0]}G.call(null,I,H)})}},D)}else{var C={};j.eachSeries(h(E),function(F,G){E[F](function(I){var H=Array.prototype.slice.call(arguments,1);if(H.length<=1){H=H[0]}C[F]=H;G(I)})},function(F){D(F,C)})}};j.iterator=function(D){var C=function(E){var F=function(){if(D.length){D[E].apply(null,arguments)}return F.next()};F.next=function(){return(E<D.length-1)?C(E+1):null};return F};return C(0)};j.apply=function(D){var C=Array.prototype.slice.call(arguments,1);return function(){return D.apply(null,C.concat(Array.prototype.slice.call(arguments)))}};var t=function(F,C,D,G){var E=[];F(C,function(I,H){D(I,function(J,K){E=E.concat(K||[]);H(J)})},function(H){G(H,E)})};j.concat=w(t);j.concatSeries=s(t);j.whilst=function(E,C,D){if(E()){C(function(F){if(F){return D(F)}j.whilst(E,C,D)})}else{D()}};j.doWhilst=function(C,E,D){C(function(G){if(G){return D(G)}var F=Array.prototype.slice.call(arguments,1);if(E.apply(null,F)){j.doWhilst(C,E,D)}else{D()}})};j.until=function(E,C,D){if(!E()){C(function(F){if(F){return D(F)}j.until(E,C,D)})}else{D()}};j.doUntil=function(C,E,D){C(function(G){if(G){return D(G)}var F=Array.prototype.slice.call(arguments,1);if(!E.apply(null,F)){j.doUntil(C,E,D)}else{D()}})};j.queue=function(G,E){if(E===undefined){E=1}function C(I,H,K,J){if(!I.started){I.started=true}if(!m(H)){H=[H]}if(H.length==0){return j.setImmediate(function(){if(I.drain){I.drain()}})}y(H,function(L){var M={data:L,callback:typeof J==="function"?J:null};if(K){I.tasks.unshift(M)}else{I.tasks.push(M)}if(I.saturated&&I.tasks.length===I.concurrency){I.saturated()}j.setImmediate(I.process)})}var D=0;var F={tasks:[],concurrency:E,saturated:null,empty:null,drain:null,started:false,paused:false,push:function(H,I){C(F,H,false,I)},kill:function(){F.drain=null;F.tasks=[]},unshift:function(H,I){C(F,H,true,I)},process:function(){if(!F.paused&&D<F.concurrency&&F.tasks.length){var I=F.tasks.shift();if(F.empty&&F.tasks.length===0){F.empty()}D+=1;var J=function(){D-=1;if(I.callback){I.callback.apply(I,arguments)}if(F.drain&&F.tasks.length+D===0){F.drain()}F.process()};var H=x(J);G(I.data,H)}},length:function(){return F.tasks.length},running:function(){return D},idle:function(){return F.tasks.length+D===0},pause:function(){if(F.paused===true){return}F.paused=true;F.process()},resume:function(){if(F.paused===false){return}F.paused=false;F.process()}};return F};j.priorityQueue=function(H,F){function E(J,I){return J.priority-I.priority}function D(N,L,M){var K=-1,I=N.length-1;while(K<I){var J=K+((I-K+1)>>>1);if(M(L,N[J])>=0){K=J}else{I=J-1}}return K}function C(K,J,I,L){if(!K.started){K.started=true}if(!m(J)){J=[J]}if(J.length==0){return j.setImmediate(function(){if(K.drain){K.drain()}})}y(J,function(M){var N={data:M,priority:I,callback:typeof L==="function"?L:null};K.tasks.splice(D(K.tasks,N,E)+1,0,N);if(K.saturated&&K.tasks.length===K.concurrency){K.saturated()}j.setImmediate(K.process)})}var G=j.queue(H,F);G.push=function(J,I,K){C(G,J,I,K)};delete G.unshift;return G};j.cargo=function(G,F){var C=false,H=[];var D={tasks:H,payload:F,saturated:null,empty:null,drain:null,drained:true,push:function(I,J){if(!m(I)){I=[I]}y(I,function(K){H.push({data:K,callback:typeof J==="function"?J:null});D.drained=false;if(D.saturated&&H.length===F){D.saturated()}});j.setImmediate(D.process)},process:function E(){if(C){return}if(H.length===0){if(D.drain&&!D.drained){D.drain()}D.drained=true;return}var I=typeof F==="number"?H.splice(0,F):H.splice(0,H.length);var J=f(I,function(K){return K.data});if(D.empty){D.empty()}C=true;G(J,function(){C=false;var K=arguments;y(I,function(L){if(L.callback){L.callback.apply(null,K)}});E()})},length:function(){return H.length},running:function(){return C}};return D};var o=function(C){return function(E){var D=Array.prototype.slice.call(arguments,1);E.apply(null,D.concat([function(G){var F=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(G){if(console.error){console.error(G)}}else{if(console[C]){y(F,function(H){console[C](H)})}}}}]))}};j.log=o("log");j.dir=o("dir");j.memoize=function(G,E){var D={};var F={};E=E||function(H){return H};var C=function(){var H=Array.prototype.slice.call(arguments);var J=H.pop();var I=E.apply(null,H);if(I in D){j.nextTick(function(){J.apply(null,D[I])})}else{if(I in F){F[I].push(J)}else{F[I]=[J];G.apply(null,H.concat([function(){D[I]=arguments;var M=F[I];delete F[I];for(var L=0,K=M.length;L<K;L++){M[L].apply(null,arguments)}}]))}}};C.memo=D;C.unmemoized=G;return C};j.unmemoize=function(C){return function(){return(C.unmemoized||C).apply(null,arguments)}};j.times=function(F,E,G){var C=[];for(var D=0;D<F;D++){C.push(D)}return j.map(C,E,G)};j.timesSeries=function(F,E,G){var C=[];for(var D=0;D<F;D++){C.push(D)}return j.mapSeries(C,E,G)};j.seq=function(){var C=arguments;return function(){var E=this;var D=Array.prototype.slice.call(arguments);var F=D.pop();j.reduce(C,D,function(H,I,G){I.apply(E,H.concat([function(){var K=arguments[0];var J=Array.prototype.slice.call(arguments,1);G(K,J)}]))},function(H,G){F.apply(E,[H].concat(G))})}};j.compose=function(){return j.seq.apply(null,Array.prototype.reverse.call(arguments))};var p=function(F,D){var E=function(){var H=this;var G=Array.prototype.slice.call(arguments);var I=G.pop();return F(D,function(K,J){K.apply(H,G.concat([J]))},I)};if(arguments.length>2){var C=Array.prototype.slice.call(arguments,2);return E.apply(this,C)}else{return E}};j.applyEach=w(p);j.applyEachSeries=s(p);j.forever=function(D,E){function C(F){if(F){if(E){return E(F)}throw F}D(C)}C()};if(typeof c!=="undefined"&&c.exports){c.exports=j}else{if(typeof define!=="undefined"&&define.amd){define([],function(){return j})}else{v.async=j}}}())}).call(this,b("_process"))},{_process:3}],7:[function(b,c,a){arguments[4][4][0].apply(a,arguments)},{dup:4}],8:[function(b,c,a){var d=b("async"),g=b("./Resource"),f=b("eventemitter3");function h(j,i){f.call(this);i=i||10;this.baseUrl=j||"";this.progress=0;this.loading=false;this._progressChunk=0;this._beforeMiddleware=[];this._afterMiddleware=[];this._boundLoadResource=this._loadResource.bind(this);this._boundOnLoad=this._onLoad.bind(this);this._buffer=[];this._numToLoad=0;this._queue=d.queue(this._boundLoadResource,i);this.resources={}}h.prototype=Object.create(f.prototype);h.prototype.constructor=h;c.exports=h;h.prototype.add=h.prototype.enqueue=function(m,l,k,j){if(Array.isArray(m)){for(var n=0;n<m.length;++n){this.add(m[n])}return this}if(typeof m==="object"){j=l||m.callback||m.onComplete;k=m;l=m.url;m=m.name||m.key||m.url}if(typeof l!=="string"){j=k;k=l;l=m}if(typeof l!=="string"){throw new Error("No url passed to add resource to loader.")}if(typeof k==="function"){j=k;k=null}if(this.resources[m]){throw new Error('Resource with name "'+m+'" already exists.')}if(l.indexOf("data:")!==0){l=this.baseUrl+l}this.resources[m]=new g(m,l,k);if(typeof j==="function"){this.resources[m].once("afterMiddleware",j)}this._numToLoad++;if(this._queue.started){this._queue.push(this.resources[m]);this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())}else{this._buffer.push(this.resources[m]);this._progressChunk=100/this._buffer.length}return this};h.prototype.before=h.prototype.pre=function(i){this._beforeMiddleware.push(i);return this};h.prototype.after=h.prototype.use=function(i){this._afterMiddleware.push(i);return this};h.prototype.reset=function(){this._buffer.length=0;this._queue.kill();this._queue.started=false;this.progress=0;this._progressChunk=0;this.loading=false};h.prototype.load=function(j){if(typeof j==="function"){this.once("complete",j)}if(this._queue.started){return this}this.emit("start",this);for(var k=0;k<this._buffer.length;++k){this._queue.push(this._buffer[k])}this._buffer.length=0;return this};h.prototype._loadResource=function(k,j){var i=this;k._dequeue=j;this._runMiddleware(k,this._beforeMiddleware,function(){k.load(i._boundOnLoad)})};h.prototype._onComplete=function(){this.emit("complete",this,this.resources)};h.prototype._onLoad=function(i){this.progress+=this._progressChunk;this.emit("progress",this,i);if(i.error){this.emit("error",i.error,this,i)}else{this.emit("load",this,i)}this._runMiddleware(i,this._afterMiddleware,function(){i.emit("afterMiddleware",i);this._numToLoad--;if(this._numToLoad===0){this._onComplete()}});i._dequeue()};h.prototype._runMiddleware=function(l,k,i){var j=this;d.eachSeries(k,function(n,m){n.call(j,l,m)},i.bind(this,l))};h.LOAD_TYPE=g.LOAD_TYPE;h.XHR_READY_STATE=g.XHR_READY_STATE;h.XHR_RESPONSE_TYPE=g.XHR_RESPONSE_TYPE},{"./Resource":9,async:6,eventemitter3:7}],9:[function(c,d,b){var g=c("eventemitter3"),f=!!(window.XDomainRequest&&!("withCredentials" in (new XMLHttpRequest())));function h(k,j,i){g.call(this);i=i||{};if(typeof k!=="string"||typeof j!=="string"){throw new Error("Both name and url are required for constructing a resource.")}this.name=k;this.url=j;this.data=null;this.crossOrigin=i.crossOrigin;this.loadType=i.loadType||this._determineLoadType();this.xhrType=i.xhrType;this.error=null;this.xhr=null;this.isJson=false;this.isXml=false;this.isImage=false;this.isAudio=false;this.isVideo=false;this._dequeue=null;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}h.prototype=Object.create(g.prototype);h.prototype.constructor=h;d.exports=h;h.prototype.complete=function(){if(this.data&&this.data.removeEventListener){this.data.removeEventListener("error",this._boundOnError);this.data.removeEventListener("load",this._boundComplete);this.data.removeEventListener("progress",this._boundOnProgress);this.data.removeEventListener("canplaythrough",this._boundComplete)}if(this.xhr){if(this.xhr.removeEventListener){this.xhr.removeEventListener("error",this._boundXhrOnError);this.xhr.removeEventListener("abort",this._boundXhrOnAbort);this.xhr.removeEventListener("progress",this._boundOnProgress);this.xhr.removeEventListener("load",this._boundXhrOnLoad)}else{this.xhr.onerror=null;this.xhr.ontimeout=null;this.xhr.onprogress=null;this.xhr.onload=null}}this.emit("complete",this)};h.prototype.load=function(i){this.emit("start",this);if(i){this.once("complete",i)}if(typeof this.crossOrigin!=="string"){this.crossOrigin=this._determineCrossOrigin()}switch(this.loadType){case h.LOAD_TYPE.IMAGE:this._loadImage();break;case h.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case h.LOAD_TYPE.VIDEO:this._loadElement("video");break;case h.LOAD_TYPE.XHR:default:if(f){this._loadXdr()}else{this._loadXhr()}break}};h.prototype._loadImage=function(){this.data=new Image();if(this.crossOrigin){this.data.crossOrigin=""}this.data.src=this.url;this.isImage=true;this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false)};h.prototype._loadElement=function(k){this.data=document.createElement(k);if(Array.isArray(this.url)){for(var j=0;j<this.url.length;++j){this.data.appendChild(this._createSource(k,this.url[j]))}}else{this.data.appendChild(this._createSource(k,this.url))}this["is"+k[0].toUpperCase()+k.substring(1)]=true;this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false);this.data.addEventListener("canplaythrough",this._boundComplete,false);this.data.load()};h.prototype._loadXhr=function(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var i=this.xhr=new XMLHttpRequest();i.open("GET",this.url,true);if(this.xhrType===h.XHR_RESPONSE_TYPE.JSON||this.xhrType===h.XHR_RESPONSE_TYPE.DOCUMENT){i.responseType=h.XHR_RESPONSE_TYPE.TEXT}else{i.responseType=this.xhrType}i.addEventListener("error",this._boundXhrOnError,false);i.addEventListener("abort",this._boundXhrOnAbort,false);i.addEventListener("progress",this._boundOnProgress,false);i.addEventListener("load",this._boundXhrOnLoad,false);i.send()};h.prototype._loadXdr=function(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var i=this.xhr=new XDomainRequest();i.timeout=5000;i.onerror=this._boundXhrOnError;i.ontimeout=this._boundXdrOnTimeout;i.onprogress=this._boundOnProgress;i.onload=this._boundXhrOnLoad;i.open("GET",this.url,true);setTimeout(function(){i.send()},0)};h.prototype._createSource=function(j,i,l){if(!l){l=j+"/"+i.substr(i.lastIndexOf(".")+1)}var k=document.createElement("source");k.src=i;k.type=l;return k};h.prototype._onError=function(i){this.error=new Error("Failed to load element using "+i.target.nodeName);this.complete()};h.prototype._onProgress=function(i){if(i.lengthComputable){this.emit("progress",this,i.loaded/i.total)}};h.prototype._xhrOnError=function(){this.error=new Error(a(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"');this.complete()};h.prototype._xhrOnAbort=function(){this.error=new Error(a(this.xhr)+" Request was aborted by the user.");this.complete()};h.prototype._xdrOnTimeout=function(){this.error=new Error(a(this.xhr)+" Request timed out.");this.complete()};h.prototype._xhrOnLoad=function(){var j=this.xhr;if(j.status===200){if(this.xhrType===h.XHR_RESPONSE_TYPE.TEXT){this.data=j.responseText}else{if(this.xhrType===h.XHR_RESPONSE_TYPE.JSON){try{this.data=JSON.parse(j.responseText);this.isJson=true}catch(i){this.error=new Error("Error trying to parse loaded json:",i)}}else{if(this.xhrType===h.XHR_RESPONSE_TYPE.DOCUMENT){try{if(window.DOMParser){var l=new DOMParser();this.data=l.parseFromString(j.responseText,"text/xml")}else{var k=document.createElement("div");k.innerHTML=j.responseText;this.data=k}this.isXml=true}catch(i){this.error=new Error("Error trying to parse loaded xml:",i)}}else{this.data=j.response||j.responseText}}}}else{this.error=new Error("["+j.status+"]"+j.statusText+":"+j.responseURL)}this.complete()};function a(i){return i.toString().replace("object ","")}h.prototype._determineCrossOrigin=function(){if(this.url.indexOf("data:")===0){return""}var j=window.location,i=document.createElement("a");i.href=this.url;if(i.hostname!==j.hostname||i.port!==j.port||i.protocol!==j.protocol){return"anonymous"}return""};h.prototype._determineXhrType=function(){var i=this.url.substr(this.url.lastIndexOf(".")+1);switch(i){case"xhtml":case"html":case"htm":case"xml":case"tmx":case"tsx":case"svg":return h.XHR_RESPONSE_TYPE.DOCUMENT;case"gif":case"png":case"bmp":case"jpg":case"jpeg":case"tif":case"tiff":case"webp":return h.XHR_RESPONSE_TYPE.BLOB;case"json":return h.XHR_RESPONSE_TYPE.JSON;case"text":case"txt":default:return h.XHR_RESPONSE_TYPE.TEXT}};h.prototype._determineLoadType=function(){var i=this.url.substr(this.url.lastIndexOf(".")+1);switch(i){case"gif":case"png":case"bmp":case"jpg":case"jpeg":case"tif":case"tiff":case"webp":return h.LOAD_TYPE.IMAGE;default:return h.LOAD_TYPE.XHR}};h.prototype._getMimeFromXhrType=function(i){switch(i){case h.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case h.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case h.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case h.XHR_RESPONSE_TYPE.JSON:return"application/json";case h.XHR_RESPONSE_TYPE.DEFAULT:case h.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}};h.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};h.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};h.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"}},{eventemitter3:7}],10:[function(b,c,a){c.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(g){var f="";var k;var d=new Array(4);var j=0;var h=0;var i=0;while(j<g.length){k=new Array(3);for(h=0;h<k.length;h++){if(j<g.length){k[h]=g.charCodeAt(j++)&255}else{k[h]=0}}d[0]=k[0]>>2;d[1]=((k[0]&3)<<4)|(k[1]>>4);d[2]=((k[1]&15)<<2)|(k[2]>>6);d[3]=k[2]&63;i=j-(g.length-1);switch(i){case 2:d[3]=64;d[2]=64;break;case 1:d[3]=64;break;default:break}for(h=0;h<d.length;h++){f+=this._keyStr.charAt(d[h])}}return f}}},{}],11:[function(b,c,a){c.exports=b("./Loader");c.exports.Resource=b("./Resource");c.exports.middleware={caching:{memory:b("./middlewares/caching/memory")},parsing:{blob:b("./middlewares/parsing/blob")}}},{"./Loader":8,"./Resource":9,"./middlewares/caching/memory":12,"./middlewares/parsing/blob":13}],12:[function(c,d,b){var a={};d.exports=function(){return function(g,f){if(a[g.url]){g.data=a[g.url];g.complete()}else{g.once("complete",function(){a[this.url]=this.data});f()}}}},{}],13:[function(b,d,a){var f=b("../../Resource"),c=b("../../b64");window.URL=window.URL||window.webkitURL;d.exports=function(){return function(i,h){if(!i.data){return h()}if(i.xhr&&i.xhrType===f.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof i.data==="string"){var g=i.xhr.getResponseHeader("content-type");if(g&&g.indexOf("image")===0){i.data=new Image();i.data.src="data:"+g+";base64,"+c.encodeBinary(i.xhr.responseText);i.isImage=true;i.data.onload=function(){i.data.onload=null;h()}}}else{if(i.data.type.indexOf("image")===0){var j=URL.createObjectURL(i.data);i.blob=i.data;i.data=new Image();i.data.src=j;i.isImage=true;i.data.onload=function(){URL.revokeObjectURL(j);i.data.onload=null;h()}}}}else{h()}}}},{"../../Resource":9,"../../b64":10}],14:[function(b,c,a){c.exports={name:"pixi.js",version:"3.0.0",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/GoodBoyDigital/pixi.js/issues",license:"MIT",repository:{type:"git",url:"https://github.com/GoodBoyDigital/pixi.js.git"},scripts:{test:"gulp && testem ci",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},dependencies:{async:"^0.9.0",brfs:"^1.4.0",eventemitter3:"^1.0.1","object-assign":"^2.0.0","resource-loader":"^1.4.2"},devDependencies:{browserify:"^9.0.8",chai:"^2.2.0",del:"^1.1.1",gulp:"^3.8.11","gulp-cached":"^1.0.4","gulp-concat":"^2.5.2","gulp-debug":"^2.0.1","gulp-jshint":"^1.10.0","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.0","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.2.0","gulp-util":"^3.0.4","ink-docstrap":"git+https://github.com/Pilatch/docstrap.git",jsdoc:"^3.3.0-beta3","jshint-summary":"^0.4.0",minimist:"^1.1.1",mocha:"^2.2.4","require-dir":"^0.3.0","run-sequence":"^1.0.2",testem:"^0.8.2","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.1.2"},browserify:{transform:["brfs"]}}},{}],15:[function(b,c,a){c.exports={VERSION:b("../../package.json").version,PI_2:Math.PI*2,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:0.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:false,forceFXAA:false,autoResize:false,transparent:false,backgroundColor:0,clearBeforeRender:true,preserveDrawingBuffer:false},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2000}},{"../../package.json":14}],16:[function(f,g,d){var h=f("../math"),c=f("./DisplayObject"),i=f("../textures/RenderTexture"),b=new h.Matrix();function a(){c.call(this);this.children=[]}a.prototype=Object.create(c.prototype);a.prototype.constructor=a;g.exports=a;Object.defineProperties(a.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(k){var j=this.getLocalBounds().width;if(j!==0){this.scale.x=k/j}else{this.scale.x=1}this._width=k}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(k){var j=this.getLocalBounds().height;if(j!==0){this.scale.y=k/j}else{this.scale.y=1}this._height=k}}});a.prototype.addChild=function(j){return this.addChildAt(j,this.children.length)};a.prototype.addChildAt=function(k,j){if(k===this){return k}if(j>=0&&j<=this.children.length){if(k.parent){k.parent.removeChild(k)}k.parent=this;this.children.splice(j,0,k);return k}else{throw new Error(k+"addChildAt: The index "+j+" supplied is out of bounds "+this.children.length)}};a.prototype.swapChildren=function(m,j){if(m===j){return}var l=this.getChildIndex(m);var k=this.getChildIndex(j);if(l<0||k<0){throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.")}this.children[l]=j;this.children[k]=m};a.prototype.getChildIndex=function(k){var j=this.children.indexOf(k);if(j===-1){throw new Error("The supplied DisplayObject must be a child of the caller")}return j};a.prototype.setChildIndex=function(l,k){if(k<0||k>=this.children.length){throw new Error("The supplied index is out of bounds")}var j=this.getChildIndex(l);this.children.splice(j,1);this.children.splice(k,0,l)};a.prototype.getChildAt=function(j){if(j<0||j>=this.children.length){throw new Error("getChildAt: Supplied index "+j+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller")}return this.children[j]};a.prototype.removeChild=function(k){var j=this.children.indexOf(k);if(j===-1){return}return this.removeChildAt(j)};a.prototype.removeChildAt=function(j){var k=this.getChildAt(j);k.parent=null;this.children.splice(j,1);return k};a.prototype.removeChildren=function(n,o){var m=n||0;var j=typeof o==="number"?o:this.children.length;var k=j-m;if(k>0&&k<=j){var p=this.children.splice(m,k);for(var l=0;l<p.length;++l){p[l].parent=null}return p}else{if(k===0&&this.children.length===0){return[]}else{throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}}};a.prototype.generateTexture=function(n,k,l){var m=this.getLocalBounds();var j=new i(n,m.width|0,m.height|0,n,l,k);b.tx=-m.x;b.ty=-m.y;j.render(this,b);return j};a.prototype.updateTransform=function(){if(!this.visible){return}this.displayObjectUpdateTransform();for(var l=0,k=this.children.length;l<k;++l){this.children[l].updateTransform()}};a.prototype.containerUpdateTransform=a.prototype.updateTransform;a.prototype.getBounds=function(){if(!this._currentBounds){if(this.children.length===0){return h.Rectangle.EMPTY}var q=Infinity;var p=Infinity;var m=-Infinity;var l=-Infinity;var r;var v;var u;var n=false;for(var t=0,s=this.children.length;t<s;++t){var o=this.children[t];if(!o.visible){continue}n=true;r=this.children[t].getBounds();q=q<r.x?q:r.x;p=p<r.y?p:r.y;v=r.width+r.x;u=r.height+r.y;m=m>v?m:v;l=l>u?l:u}if(!n){return h.Rectangle.EMPTY}var k=this._bounds;k.x=q;k.y=p;k.width=m-q;k.height=l-p;this._currentBounds=k}return this._currentBounds};a.prototype.containerGetBounds=a.prototype.getBounds;a.prototype.getLocalBounds=function(){var k=this.worldTransform;this.worldTransform=h.Matrix.IDENTITY;for(var m=0,l=this.children.length;m<l;++m){this.children[m].updateTransform()}this.worldTransform=k;this._currentBounds=null;return this.getBounds(h.Matrix.IDENTITY)};a.prototype.renderWebGL=function(m){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}var l,k;if(this._mask||this._filters){m.currentRenderer.flush();if(this._filters){m.filterManager.pushFilter(this,this._filters)}if(this._mask){m.maskManager.pushMask(this,this._mask)}m.currentRenderer.start();this._renderWebGL(m);for(l=0,k=this.children.length;l<k;l++){this.children[l].renderWebGL(m)}m.currentRenderer.flush();if(this._mask){m.maskManager.popMask(this,this._mask)}if(this._filters){m.filterManager.popFilter()}m.currentRenderer.start()}else{this._renderWebGL(m);for(l=0,k=this.children.length;l<k;++l){this.children[l].renderWebGL(m)}}};a.prototype._renderWebGL=function(j){};a.prototype._renderCanvas=function(j){};a.prototype.renderCanvas=function(m){if(!this.visible||this.alpha<=0||!this.renderable){return}if(this._mask){m.maskManager.pushMask(this._mask,m)}this._renderCanvas(m);for(var l=0,k=this.children.length;l<k;++l){this.children[l].renderCanvas(m)}if(this._mask){m.maskManager.popMask(m)}};a.prototype.destroy=function(m){c.prototype.destroy.call(this);if(m){for(var l=0,k=this.children.length;l<k;++l){this.children[l].destroy(m)}}this.removeChildren();this.children=null}},{"../math":25,"../textures/RenderTexture":63,"./DisplayObject":17}],17:[function(b,a,c){var h=b("../math"),f=b("../textures/RenderTexture"),i=b("eventemitter3"),j=b("../const"),g=new h.Matrix();function d(){i.call(this);this.position=new h.Point();this.scale=new h.Point(1,1);this.pivot=new h.Point(0,0);this.rotation=0;this.alpha=1;this.visible=true;this.renderable=true;this.parent=null;this.worldAlpha=1;this.worldTransform=new h.Matrix();this.filterArea=null;this._sr=0;this._cr=1;this._bounds=new h.Rectangle(0,0,1,1);this._currentBounds=null;this._mask=null;this._cacheAsBitmap=false;this._cachedObject=null}d.prototype=Object.create(i.prototype);d.prototype.constructor=d;a.exports=d;Object.defineProperties(d.prototype,{x:{get:function(){return this.position.x},set:function(k){this.position.x=k}},y:{get:function(){return this.position.y},set:function(k){this.position.y=k}},worldVisible:{get:function(){var k=this;do{if(!k.visible){return false}k=k.parent}while(k);return true}},mask:{get:function(){return this._mask},set:function(k){if(this._mask){this._mask.renderable=true}this._mask=k;if(this._mask){this._mask.renderable=false}}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(k){this._filters=k&&k.slice()}}});d.prototype.updateTransform=function(){var p=this.parent.worldTransform;var m=this.worldTransform;var o,l,r,q,n,k;if(this.rotation%j.PI_2){if(this.rotation!==this.rotationCache){this.rotationCache=this.rotation;this._sr=Math.sin(this.rotation);this._cr=Math.cos(this.rotation)}o=this._cr*this.scale.x;l=this._sr*this.scale.x;r=-this._sr*this.scale.y;q=this._cr*this.scale.y;n=this.position.x;k=this.position.y;if(this.pivot.x||this.pivot.y){n-=this.pivot.x*o+this.pivot.y*r;k-=this.pivot.x*l+this.pivot.y*q}m.a=o*p.a+l*p.c;m.b=o*p.b+l*p.d;m.c=r*p.a+q*p.c;m.d=r*p.b+q*p.d;m.tx=n*p.a+k*p.c+p.tx;m.ty=n*p.b+k*p.d+p.ty}else{o=this.scale.x;q=this.scale.y;n=this.position.x-this.pivot.x*o;k=this.position.y-this.pivot.y*q;m.a=o*p.a;m.b=o*p.b;m.c=q*p.c;m.d=q*p.d;m.tx=n*p.a+k*p.c+p.tx;m.ty=n*p.b+k*p.d+p.ty}this.worldAlpha=this.alpha*this.parent.worldAlpha;this._currentBounds=null};d.prototype.displayObjectUpdateTransform=d.prototype.updateTransform;d.prototype.getBounds=function(k){return h.Rectangle.EMPTY};d.prototype.getLocalBounds=function(){return this.getBounds(h.Matrix.IDENTITY)};d.prototype.toGlobal=function(k){this.displayObjectUpdateTransform();return this.worldTransform.apply(k)};d.prototype.toLocal=function(k,l){if(l){k=l.toGlobal(k)}this.displayObjectUpdateTransform();return this.worldTransform.applyInverse(k)};d.prototype.renderWebGL=function(k){};d.prototype.renderCanvas=function(k){};d.prototype.generateTexture=function(o,l,m){var n=this.getLocalBounds();var k=new f(o,n.width|0,n.height|0,o,m,l);g.tx=-n.x;g.ty=-n.y;k.render(this,g);return k};d.prototype.destroy=function(){this.position=null;this.scale=null;this.pivot=null;this.parent=null;this._bounds=null;this._currentBounds=null;this._mask=null;this.worldTransform=null;this.filterArea=null}},{"../const":15,"../math":25,"../textures/RenderTexture":63,eventemitter3:4}],18:[function(d,c,h){var f=d("../display/Container"),b=d("../sprites/Sprite"),g=d("../textures/Texture"),j=d("../renderers/canvas/utils/CanvasBuffer"),m=d("../renderers/canvas/utils/CanvasGraphics"),k=d("./GraphicsData"),l=d("../math"),n=d("../const"),a=new l.Point();function i(){f.call(this);this.fillAlpha=1;this.lineWidth=0;this.lineColor=0;this.graphicsData=[];this.tint=16777215;this._prevTint=16777215;this.blendMode=n.BLEND_MODES.NORMAL;this.currentPath=null;this._webGL={};this.isMask=false;this.boundsPadding=0;this._localBounds=new l.Rectangle(0,0,1,1);this.dirty=true;this.glDirty=false;this.boundsDirty=true;this.cachedSpriteDirty=false}i.prototype=Object.create(f.prototype);i.prototype.constructor=i;c.exports=i;Object.defineProperties(i.prototype,{});i.prototype.clone=function(){var p=new i();p.renderable=this.renderable;p.fillAlpha=this.fillAlpha;p.lineWidth=this.lineWidth;p.lineColor=this.lineColor;p.tint=this.tint;p.blendMode=this.blendMode;p.isMask=this.isMask;p.boundsPadding=this.boundsPadding;p.dirty=this.dirty;p.glDirty=this.glDirty;p.cachedSpriteDirty=this.cachedSpriteDirty;for(var o=0;o<this.graphicsData.length;++o){p.graphicsData.push(this.graphicsData[o].clone())}p.currentPath=p.graphicsData[p.graphicsData.length-1];p.updateLocalBounds();return p};i.prototype.lineStyle=function(o,p,q){this.lineWidth=o||0;this.lineColor=p||0;this.lineAlpha=(q===undefined)?1:q;if(this.currentPath){if(this.currentPath.shape.points.length){this.drawShape(new l.Polygon(this.currentPath.shape.points.slice(-2)))}else{this.currentPath.lineWidth=this.lineWidth;this.currentPath.lineColor=this.lineColor;this.currentPath.lineAlpha=this.lineAlpha}}return this};i.prototype.moveTo=function(o,p){this.drawShape(new l.Polygon([o,p]));return this};i.prototype.lineTo=function(o,p){this.currentPath.shape.points.push(o,p);this.dirty=true;return this};i.prototype.quadraticCurveTo=function(w,s,y,v){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var o,t,p=20,z=this.currentPath.shape.points;if(z.length===0){this.moveTo(0,0)}var x=z[z.length-2];var u=z[z.length-1];var q=0;for(var r=1;r<=p;++r){q=r/p;o=x+((w-x)*q);t=u+((s-u)*q);z.push(o+(((w+((y-w)*q))-o)*q),t+(((s+((v-s)*q))-t)*q))}this.dirty=this.boundsDirty=true;return this};i.prototype.bezierCurveTo=function(B,x,A,t,D,z){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var r=20,p,q,o,w,v,E=this.currentPath.shape.points;var C=E[E.length-2];var y=E[E.length-1];var s=0;for(var u=1;u<=r;++u){s=u/r;p=(1-s);q=p*p;o=q*p;w=s*s;v=w*s;E.push(o*C+3*q*s*B+3*p*w*A+v*D,o*y+3*q*s*x+3*p*w*t+v*z)}this.dirty=this.boundsDirty=true;return this};i.prototype.arcTo=function(K,u,J,s,v){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points.push(K,u)}}else{this.moveTo(K,u)}var H=this.currentPath.shape.points,C=H[H.length-2],A=H[H.length-1],P=A-u,x=C-K,O=s-u,w=J-K,I=Math.abs(P*w-x*O);if(I<1e-8||v===0){if(H[H.length-2]!==K||H[H.length-1]!==u){H.push(K,u)}}else{var N=P*P+x*x,E=O*O+w*w,p=P*O+x*w,z=v*Math.sqrt(N)/I,y=v*Math.sqrt(E)/I,q=z*p/N,o=y*p/E,t=z*w+y*x,r=z*O+y*P,D=x*(y+q),B=P*(y+q),M=w*(z+o),L=O*(z+o),G=Math.atan2(B-r,D-t),F=Math.atan2(L-r,M-t);this.arc(t+K,r+u,v,G,F,x*O>w*P)}this.dirty=this.boundsDirty=true;return this};i.prototype.arc=function(q,p,r,C,A,o){o=o||false;if(C===A){return this}if(!o&&A<=C){A+=Math.PI*2}else{if(o&&C<=A){C+=Math.PI*2}}var w=o?(C-A)*-1:(A-C);var z=Math.ceil(Math.abs(w)/(Math.PI*2))*40;if(w===0){return this}var I=q+Math.cos(C)*r;var G=p+Math.sin(C)*r;if(this.currentPath){if(o&&this.filling){this.currentPath.shape.points.push(q,p)}else{this.currentPath.shape.points.push(I,G)}}else{if(o&&this.filling){this.moveTo(q,p)}else{this.moveTo(I,G)}}var F=this.currentPath.shape.points;var t=w/(z*2);var y=t*2;var B=Math.cos(t);var D=Math.sin(t);var K=z-1;var u=(K%1)/K;for(var E=0;E<=K;E++){var x=E+u*E;var H=((t)+C+(y*x));var J=Math.cos(H);var v=-Math.sin(H);F.push(((B*J)+(D*v))*r+q,((B*-v)+(D*J))*r+p)}this.dirty=this.boundsDirty=true;return this};i.prototype.beginFill=function(o,p){this.filling=true;this.fillColor=o||0;this.fillAlpha=(p===undefined)?1:p;if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.currentPath.fill=this.filling;this.currentPath.fillColor=this.fillColor;this.currentPath.fillAlpha=this.fillAlpha}}return this};i.prototype.endFill=function(){this.filling=false;this.fillColor=null;this.fillAlpha=1;return this};i.prototype.drawRect=function(p,r,q,o){this.drawShape(new l.Rectangle(p,r,q,o));return this};i.prototype.drawRoundedRect=function(q,s,r,p,o){this.drawShape(new l.RoundedRectangle(q,s,r,p,o));return this};i.prototype.drawCircle=function(p,q,o){this.drawShape(new l.Circle(p,q,o));return this};i.prototype.drawEllipse=function(p,r,q,o){this.drawShape(new l.Ellipse(p,r,q,o));return this};i.prototype.drawPolygon=function(q){var p=q;if(!Array.isArray(p)){p=new Array(arguments.length);for(var o=0;o<p.length;++o){p[o]=arguments[o]}}this.drawShape(new l.Polygon(p));return this};i.prototype.clear=function(){this.lineWidth=0;this.filling=false;this.dirty=true;this.clearDirty=true;this.graphicsData=[];return this};i.prototype.generateTexture=function(t,o,q){o=o||1;var s=this.getLocalBounds();var p=new j(s.width*o,s.height*o);var r=g.fromCanvas(p.canvas,q);r.baseTexture.resolution=o;p.context.scale(o,o);p.context.translate(-s.x,-s.y);m.renderGraphics(this,p.context);return r};i.prototype._renderWebGL=function(o){if(this.glDirty){this.dirty=true;this.glDirty=false}o.setObjectRenderer(o.plugins.graphics);o.plugins.graphics.render(this)};i.prototype._renderCanvas=function(r){if(this.isMask===true){return}if(this._prevTint!==this.tint){this.dirty=true;this._prevTint=this.tint}if(this._cacheAsBitmap){if(this.dirty||this.cachedSpriteDirty){this._generateCachedSprite();this.updateCachedSpriteTexture();this.cachedSpriteDirty=false;this.dirty=false}this._cachedSprite.alpha=this.alpha;b.prototype._renderCanvas.call(this._cachedSprite,r);return}else{var q=r.context;var p=this.worldTransform;if(this.blendMode!==r.currentBlendMode){r.currentBlendMode=this.blendMode;q.globalCompositeOperation=r.blendModes[r.currentBlendMode]}var o=r.resolution;q.setTransform(p.a*o,p.b*o,p.c*o,p.d*o,p.tx*o,p.ty*o);m.renderGraphics(this,q)}};i.prototype.getBounds=function(z){if(!this._currentBounds){if(!this.renderable){return l.Rectangle.EMPTY}if(this.boundsDirty){this.updateLocalBounds();this.glDirty=true;this.cachedSpriteDirty=true;this.boundsDirty=false}var s=this._localBounds;var w=s.x;var v=s.width+s.x;var u=s.y;var t=s.height+s.y;var x=z||this.worldTransform;var L=x.a;var J=x.b;var I=x.c;var G=x.d;var M=x.tx;var K=x.ty;var C=L*v+I*t+M;var r=G*t+J*v+K;var B=L*w+I*t+M;var q=G*t+J*w+K;var A=L*w+I*u+M;var p=G*u+J*w+K;var y=L*v+I*u+M;var o=G*u+J*v+K;var F=C;var D=r;var H=C;var E=r;H=B<H?B:H;H=A<H?A:H;H=y<H?y:H;E=q<E?q:E;E=p<E?p:E;E=o<E?o:E;F=B>F?B:F;F=A>F?A:F;F=y>F?y:F;D=q>D?q:D;D=p>D?p:D;D=o>D?o:D;this._bounds.x=H;this._bounds.width=F-H;this._bounds.y=E;this._bounds.height=D-E;this._currentBounds=this._bounds}return this._currentBounds};i.prototype.containsPoint=function(o){this.worldTransform.applyInverse(o,a);var r=this.graphicsData;for(var p=0;p<r.length;p++){var q=r[p];if(!q.fill){continue}if(q.shape){if(q.shape.contains(a.x,a.y)){return true}}}return false};i.prototype.updateLocalBounds=function(){var r=Infinity;var p=-Infinity;var q=Infinity;var o=-Infinity;if(this.graphicsData.length){var A,G,E,C,F,v;for(var u=0;u<this.graphicsData.length;u++){var t=this.graphicsData[u];var B=t.type;var z=t.lineWidth;A=t.shape;if(B===n.SHAPES.RECT||B===n.SHAPES.RREC){E=A.x-z/2;C=A.y-z/2;F=A.width+z;v=A.height+z;r=E<r?E:r;p=E+F>p?E+F:p;q=C<q?C:q;o=C+v>o?C+v:o}else{if(B===n.SHAPES.CIRC){E=A.x;C=A.y;F=A.radius+z/2;v=A.radius+z/2;r=E-F<r?E-F:r;p=E+F>p?E+F:p;q=C-v<q?C-v:q;o=C+v>o?C+v:o}else{if(B===n.SHAPES.ELIP){E=A.x;C=A.y;F=A.width+z/2;v=A.height+z/2;r=E-F<r?E-F:r;p=E+F>p?E+F:p;q=C-v<q?C-v:q;o=C+v>o?C+v:o}else{G=A.points;for(var s=0;s<G.length;s+=2){E=G[s];C=G[s+1];r=E-z<r?E-z:r;p=E+z>p?E+z:p;q=C-z<q?C-z:q;o=C+z>o?C+z:o}}}}}}else{r=0;p=0;q=0;o=0}var D=this.boundsPadding;this._localBounds.x=r-D;this._localBounds.width=(p-r)+D*2;this._localBounds.y=q-D;this._localBounds.height=(o-q)+D*2};i.prototype.drawShape=function(o){if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.graphicsData.pop()}}this.currentPath=null;var p=new k(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,o);this.graphicsData.push(p);if(p.type===n.SHAPES.POLY){p.shape.closed=this.filling;this.currentPath=p}this.dirty=this.boundsDirty=true;return p};i.prototype.destroy=function(){f.prototype.destroy.apply(this,arguments);for(var p=0;p<this.graphicsData.length;++p){this.graphicsData[p].destroy()}for(var q in this._webgl){for(var o=0;o<this._webgl[q].data.length;++o){this._webgl[q].data[o].destroy()}}this.graphicsData=null;this.currentPath=null;this._webgl=null;this._localBounds=null}},{"../const":15,"../display/Container":16,"../math":25,"../renderers/canvas/utils/CanvasBuffer":37,"../renderers/canvas/utils/CanvasGraphics":38,"../sprites/Sprite":59,"../textures/Texture":64,"./GraphicsData":19}],19:[function(b,c,a){function d(f,k,h,l,i,j,g){this.lineWidth=f;this.lineColor=k;this.lineAlpha=h;this._lineTint=k;this.fillColor=l;this.fillAlpha=i;this._fillTint=l;this.fill=j;this.shape=g;this.type=g.type}d.prototype.constructor=d;c.exports=d;d.prototype.clone=function(){return new d(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)};d.prototype.destroy=function(){this.shape=null}},{}],20:[function(c,b,d){var i=c("../../utils"),g=c("../../math"),k=c("../../const"),j=c("../../renderers/webgl/utils/ObjectRenderer"),h=c("../../renderers/webgl/WebGLRenderer"),a=c("./WebGLGraphicsData");function f(l){j.call(this,l);this.graphicsDataPool=[];this.primitiveShader=null;this.complexPrimitiveShader=null}f.prototype=Object.create(j.prototype);f.prototype.constructor=f;b.exports=f;h.registerPlugin("graphics",f);f.prototype.onContextChange=function(){};f.prototype.destroy=function(){j.prototype.destroy.call(this);for(var l=0;l<this.graphicsDataPool.length;++l){this.graphicsDataPool[l].destroy()}this.graphicsDataPool=null};f.prototype.render=function(l){var p=this.renderer;var r=p.gl;var n=p.shaderManager.plugins.primitiveShader,q;if(l.dirty){this.updateGraphics(l,r)}var o=l._webGL[r.id];p.blendModeManager.setBlendMode(l.blendMode);for(var m=0;m<o.data.length;m++){if(o.data[m].mode===1){q=o.data[m];p.stencilManager.pushStencil(l,q,p);r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,(q.indices.length-4)*2);p.stencilManager.popStencil(l,q,p)}else{q=o.data[m];n=p.shaderManager.primitiveShader;p.shaderManager.setShader(n);r.uniformMatrix3fv(n.uniforms.translationMatrix._location,false,l.worldTransform.toArray(true));r.uniformMatrix3fv(n.uniforms.projectionMatrix._location,false,p.currentRenderTarget.projectionMatrix.toArray(true));r.uniform3fv(n.uniforms.tint._location,i.hex2rgb(l.tint));r.uniform1f(n.uniforms.alpha._location,l.worldAlpha);r.bindBuffer(r.ARRAY_BUFFER,q.buffer);r.vertexAttribPointer(n.attributes.aVertexPosition,2,r.FLOAT,false,4*6,0);r.vertexAttribPointer(n.attributes.aColor,4,r.FLOAT,false,4*6,2*4);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,q.indexBuffer);r.drawElements(r.TRIANGLE_STRIP,q.indices.length,r.UNSIGNED_SHORT,0)}}};f.prototype.updateGraphics=function(l){var r=this.renderer.gl;var p=l._webGL[r.id];if(!p){p=l._webGL[r.id]={lastIndex:0,data:[],gl:r}}l.dirty=false;var m;if(l.clearDirty){l.clearDirty=false;for(m=0;m<p.data.length;m++){var s=p.data[m];s.reset();this.graphicsDataPool.push(s)}p.data=[];p.lastIndex=0}var q;for(m=p.lastIndex;m<l.graphicsData.length;m++){var o=l.graphicsData[m];if(o.type===k.SHAPES.POLY){o.points=o.shape.points.slice();if(o.shape.closed){if(o.points[0]!==o.points[o.points.length-2]||o.points[1]!==o.points[o.points.length-1]){o.points.push(o.points[0],o.points[1])}}if(o.fill){if(o.points.length>=6){if(o.points.length<6*2){q=this.switchMode(p,0);var n=this.buildPoly(o,q);if(!n){q=this.switchMode(p,1);this.buildComplexPoly(o,q)}}else{q=this.switchMode(p,1);this.buildComplexPoly(o,q)}}}if(o.lineWidth>0){q=this.switchMode(p,0);this.buildLine(o,q)}}else{q=this.switchMode(p,0);if(o.type===k.SHAPES.RECT){this.buildRectangle(o,q)}else{if(o.type===k.SHAPES.CIRC||o.type===k.SHAPES.ELIP){this.buildCircle(o,q)}else{if(o.type===k.SHAPES.RREC){this.buildRoundedRectangle(o,q)}}}}p.lastIndex++}for(m=0;m<p.data.length;m++){q=p.data[m];if(q.dirty){q.upload()}}};f.prototype.switchMode=function(m,l){var n;if(!m.data.length){n=this.graphicsDataPool.pop()||new a(m.gl);n.mode=l;m.data.push(n)}else{n=m.data[m.data.length-1];if((n.points.length>320000)||n.mode!==l||l===1){n=this.graphicsDataPool.pop()||new a(m.gl);n.mode=l;m.data.push(n)}}n.dirty=true;return n};f.prototype.buildRectangle=function(D,q){var o=D.shape;var z=o.x;var w=o.y;var m=o.width;var C=o.height;if(D.fill){var p=i.hex2rgb(D.fillColor);var n=D.fillAlpha;var l=p[0]*n;var s=p[1]*n;var v=p[2]*n;var A=q.points;var B=q.indices;var u=A.length/6;A.push(z,w);A.push(l,s,v,n);A.push(z+m,w);A.push(l,s,v,n);A.push(z,w+C);A.push(l,s,v,n);A.push(z+m,w+C);A.push(l,s,v,n);B.push(u,u,u+1,u+2,u+3,u+3)}if(D.lineWidth){var t=D.points;D.points=[z,w,z+m,w,z+m,w+C,z,w+C,z,w];this.buildLine(D,q);D.points=t}};f.prototype.buildRoundedRectangle=function(u,H){var l=u.shape;var t=l.x;var s=l.y;var A=l.width;var z=l.height;var n=l.radius;var v=[];v.push(t,s+n);this.quadraticBezierCurve(t,s+z-n,t,s+z,t+n,s+z,v);this.quadraticBezierCurve(t+A-n,s+z,t+A,s+z,t+A,s+z-n,v);this.quadraticBezierCurve(t+A,s+n,t+A,s,t+A-n,s,v);this.quadraticBezierCurve(t+n,s,t,s,t,s+n+1e-10,v);if(u.fill){var C=i.hex2rgb(u.fillColor);var o=u.fillAlpha;var w=C[0]*o;var E=C[1]*o;var F=C[2]*o;var G=H.points;var p=H.indices;var m=G.length/6;var B=i.PolyK.Triangulate(v);var D=0;for(D=0;D<B.length;D+=3){p.push(B[D]+m);p.push(B[D]+m);p.push(B[D+1]+m);p.push(B[D+2]+m);p.push(B[D+2]+m)}for(D=0;D<v.length;D++){G.push(v[D],v[++D],w,E,F,o)}}if(u.lineWidth){var q=u.points;u.points=v;this.buildLine(u,H);u.points=q}};f.prototype.quadraticBezierCurve=function(v,t,l,F,o,m,D){var E,q,B,p,s,r,w=20,C=D||[];function u(y,x,n){var G=x-y;return y+(G*n)}var z=0;for(var A=0;A<=w;A++){z=A/w;E=u(v,l,z);q=u(t,F,z);B=u(l,o,z);p=u(F,m,z);s=u(E,B,z);r=u(q,p,z);C.push(s,r)}return C};f.prototype.buildCircle=function(s,G){var C=s.shape;var q=C.x;var p=C.y;var w;var v;if(s.type===k.SHAPES.CIRC){w=C.radius;v=C.radius}else{w=C.width;v=C.height}var t=40;var D=(Math.PI*2)/t;var A=0;if(s.fill){var z=i.hex2rgb(s.fillColor);var m=s.fillAlpha;var u=z[0]*m;var B=z[1]*m;var E=z[2]*m;var F=G.points;var n=G.indices;var l=F.length/6;n.push(l);for(A=0;A<t+1;A++){F.push(q,p,u,B,E,m);F.push(q+Math.sin(D*A)*w,p+Math.cos(D*A)*v,u,B,E,m);n.push(l++,l++)}n.push(l-1)}if(s.lineWidth){var o=s.points;s.points=[];for(A=0;A<t+1;A++){s.points.push(q+Math.sin(D*A)*w,p+Math.cos(D*A)*v)}this.buildLine(s,G);s.points=o}};f.prototype.buildLine=function(Z,J){var V=0;var M=Z.points;if(M.length===0){return}if(Z.lineWidth%2){for(V=0;V<M.length;V++){M[V]+=0.5}}var A=new g.Point(M[0],M[1]);var t=new g.Point(M[M.length-2],M[M.length-1]);if(A.x===t.x&&A.y===t.y){M=M.slice();M.pop();M.pop();t=new g.Point(M[M.length-2],M[M.length-1]);var C=t.x+(A.x-t.x)*0.5;var z=t.y+(A.y-t.y)*0.5;M.unshift(C,z);M.push(C,z)}var W=J.points;var q=J.indices;var B=M.length/2;var y=M.length;var Y=W.length/6;var l=Z.lineWidth/2;var L=i.hex2rgb(Z.lineColor);var U=Z.lineAlpha;var R=L[0]*U;var X=L[1]*U;var aa=L[2]*U;var x,w,O,N,G,F,p,o;var Q,P,E,D,n,m;var T,K,v,S,I,u;var ab,H,s;O=M[0];N=M[1];G=M[2];F=M[3];Q=-(N-F);P=O-G;s=Math.sqrt(Q*Q+P*P);Q/=s;P/=s;Q*=l;P*=l;W.push(O-Q,N-P,R,X,aa,U);W.push(O+Q,N+P,R,X,aa,U);for(V=1;V<B-1;V++){O=M[(V-1)*2];N=M[(V-1)*2+1];G=M[(V)*2];F=M[(V)*2+1];p=M[(V+1)*2];o=M[(V+1)*2+1];Q=-(N-F);P=O-G;s=Math.sqrt(Q*Q+P*P);Q/=s;P/=s;Q*=l;P*=l;E=-(F-o);D=G-p;s=Math.sqrt(E*E+D*D);E/=s;D/=s;E*=l;D*=l;T=(-P+N)-(-P+F);K=(-Q+G)-(-Q+O);v=(-Q+O)*(-P+F)-(-Q+G)*(-P+N);S=(-D+o)-(-D+F);I=(-E+G)-(-E+p);u=(-E+p)*(-D+F)-(-E+G)*(-D+o);ab=T*I-S*K;if(Math.abs(ab)<0.1){ab+=10.1;W.push(G-Q,F-P,R,X,aa,U);W.push(G+Q,F+P,R,X,aa,U);continue}x=(K*u-I*v)/ab;w=(S*v-T*u)/ab;H=(x-G)*(x-G)+(w-F)+(w-F);if(H>140*140){n=Q-E;m=P-D;s=Math.sqrt(n*n+m*m);n/=s;m/=s;n*=l;m*=l;W.push(G-n,F-m);W.push(R,X,aa,U);W.push(G+n,F+m);W.push(R,X,aa,U);W.push(G-n,F-m);W.push(R,X,aa,U);y++}else{W.push(x,w);W.push(R,X,aa,U);W.push(G-(x-G),F-(w-F));W.push(R,X,aa,U)}}O=M[(B-2)*2];N=M[(B-2)*2+1];G=M[(B-1)*2];F=M[(B-1)*2+1];Q=-(N-F);P=O-G;s=Math.sqrt(Q*Q+P*P);Q/=s;P/=s;Q*=l;P*=l;W.push(G-Q,F-P);W.push(R,X,aa,U);W.push(G+Q,F+P);W.push(R,X,aa,U);q.push(Y);for(V=0;V<y;V++){q.push(Y++)}q.push(Y-1)};f.prototype.buildComplexPoly=function(w,r){var u=w.points.slice();if(u.length<6){return}var v=r.indices;r.points=u;r.alpha=w.fillAlpha;r.color=i.hex2rgb(w.fillColor);var p=Infinity;var m=-Infinity;var o=Infinity;var l=-Infinity;var t,s;for(var q=0;q<u.length;q+=2){t=u[q];s=u[q+1];p=t<p?t:p;m=t>m?t:m;o=s<o?s:o;l=s>l?s:l}u.push(p,o,m,o,m,l,p,l);var n=u.length/2;for(q=0;q<n;q++){v.push(q)}};f.prototype.buildPoly=function(z,s){var x=z.points;if(x.length<6){return}var w=s.points;var y=s.indices;var m=x.length/2;var p=i.hex2rgb(z.fillColor);var o=z.fillAlpha;var l=p[0]*o;var t=p[1]*o;var v=p[2]*o;var n=i.PolyK.Triangulate(x);if(!n){return false}var u=w.length/6;var q=0;for(q=0;q<n.length;q+=3){y.push(n[q]+u);y.push(n[q]+u);y.push(n[q+1]+u);y.push(n[q+2]+u);y.push(n[q+2]+u)}for(q=0;q<m;q++){w.push(x[q*2],x[q*2+1],l,t,v,o)}return true}},{"../../const":15,"../../math":25,"../../renderers/webgl/WebGLRenderer":41,"../../renderers/webgl/utils/ObjectRenderer":55,"../../utils":68,"./WebGLGraphicsData":21}],21:[function(c,d,b){function a(f){this.gl=f;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=f.createBuffer();this.indexBuffer=f.createBuffer();this.mode=1;this.alpha=1;this.dirty=true;this.glPoints=null;this.glIndices=null}a.prototype.constructor=a;d.exports=a;a.prototype.reset=function(){this.points.length=0;this.indices.length=0};a.prototype.upload=function(){var f=this.gl;this.glPoints=new Float32Array(this.points);f.bindBuffer(f.ARRAY_BUFFER,this.buffer);f.bufferData(f.ARRAY_BUFFER,this.glPoints,f.STATIC_DRAW);this.glIndices=new Uint16Array(this.indices);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,this.indexBuffer);f.bufferData(f.ELEMENT_ARRAY_BUFFER,this.glIndices,f.STATIC_DRAW);this.dirty=false};a.prototype.destroy=function(){this.gl=null;this.color=null;this.points=null;this.indices=null;this.gl.deleteBuffer(this.buffer);this.gl.deleteBuffer(this.indexBuffer);this.buffer=null;this.indexBuffer=null;this.glPoints=null;this.glIndices=null}},{}],22:[function(c,d,b){var a=d.exports=Object.assign(c("./const"),c("./math"),{utils:c("./utils"),math:c("./math"),DisplayObject:c("./display/DisplayObject"),Container:c("./display/Container"),Sprite:c("./sprites/Sprite"),ParticleContainer:c("./particles/ParticleContainer"),SpriteRenderer:c("./sprites/webgl/SpriteRenderer"),ParticleRenderer:c("./particles/webgl/ParticleRenderer"),Text:c("./text/Text"),Graphics:c("./graphics/Graphics"),GraphicsData:c("./graphics/GraphicsData"),GraphicsRenderer:c("./graphics/webgl/GraphicsRenderer"),Texture:c("./textures/Texture"),BaseTexture:c("./textures/BaseTexture"),RenderTexture:c("./textures/RenderTexture"),VideoBaseTexture:c("./textures/VideoBaseTexture"),TextureUvs:c("./textures/TextureUvs"),CanvasRenderer:c("./renderers/canvas/CanvasRenderer"),CanvasGraphics:c("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:c("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:c("./renderers/webgl/WebGLRenderer"),ShaderManager:c("./renderers/webgl/managers/ShaderManager"),Shader:c("./renderers/webgl/shaders/Shader"),ObjectRenderer:c("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:c("./renderers/webgl/utils/RenderTarget"),AbstractFilter:c("./renderers/webgl/filters/AbstractFilter"),autoDetectRenderer:function(i,f,g,h){i=i||800;f=f||600;if(!h&&a.utils.isWebGLSupported()){return new a.WebGLRenderer(i,f,g)}return new a.CanvasRenderer(i,f,g)}})},{"./const":15,"./display/Container":16,"./display/DisplayObject":17,"./graphics/Graphics":18,"./graphics/GraphicsData":19,"./graphics/webgl/GraphicsRenderer":20,"./math":25,"./particles/ParticleContainer":31,"./particles/webgl/ParticleRenderer":33,"./renderers/canvas/CanvasRenderer":36,"./renderers/canvas/utils/CanvasBuffer":37,"./renderers/canvas/utils/CanvasGraphics":38,"./renderers/webgl/WebGLRenderer":41,"./renderers/webgl/filters/AbstractFilter":42,"./renderers/webgl/managers/ShaderManager":48,"./renderers/webgl/shaders/Shader":53,"./renderers/webgl/utils/ObjectRenderer":55,"./renderers/webgl/utils/RenderTarget":57,"./sprites/Sprite":59,"./sprites/webgl/SpriteRenderer":60,"./text/Text":61,"./textures/BaseTexture":62,"./textures/RenderTexture":63,"./textures/Texture":64,"./textures/TextureUvs":65,"./textures/VideoBaseTexture":66,"./utils":68}],23:[function(c,d,b){var f=c("./Point");function a(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0}a.prototype.constructor=a;d.exports=a;a.prototype.fromArray=function(g){this.a=g[0];this.b=g[1];this.c=g[3];this.d=g[4];this.tx=g[2];this.ty=g[5]};a.prototype.toArray=function(g){if(!this.array){this.array=new Float32Array(9)}var h=this.array;if(g){h[0]=this.a;h[1]=this.b;h[2]=0;h[3]=this.c;h[4]=this.d;h[5]=0;h[6]=this.tx;h[7]=this.ty;h[8]=1}else{h[0]=this.a;h[1]=this.c;h[2]=this.tx;h[3]=this.b;h[4]=this.d;h[5]=this.ty;h[6]=0;h[7]=0;h[8]=1}return h};a.prototype.apply=function(j,h){h=h||new f();var g=j.x;var i=j.y;h.x=this.a*g+this.c*i+this.tx;h.y=this.b*g+this.d*i+this.ty;return h};a.prototype.applyInverse=function(k,h){h=h||new f();var j=1/(this.a*this.d+this.c*-this.b);var g=k.x;var i=k.y;h.x=this.d*j*g+-this.c*j*i+(this.ty*this.c-this.tx*this.d)*j;h.y=this.a*j*i+-this.b*j*g+(-this.ty*this.a+this.tx*this.b)*j;return h};a.prototype.translate=function(g,h){this.tx+=g;this.ty+=h;return this};a.prototype.scale=function(g,h){this.a*=g;this.d*=h;this.c*=g;this.b*=h;this.tx*=g;this.ty*=h;return this};a.prototype.rotate=function(l){var k=Math.cos(l);var i=Math.sin(l);var h=this.a;var j=this.c;var g=this.tx;this.a=h*k-this.b*i;this.b=h*i+this.b*k;this.c=j*k-this.d*i;this.d=j*i+this.d*k;this.tx=g*k-this.ty*i;this.ty=g*i+this.ty*k;return this};a.prototype.append=function(h){var g=this.a;var i=this.b;var j=this.c;var k=this.d;this.a=h.a*g+h.b*j;this.b=h.a*i+h.b*k;this.c=h.c*g+h.d*j;this.d=h.c*i+h.d*k;this.tx=h.tx*g+h.ty*j+this.tx;this.ty=h.tx*i+h.ty*k+this.ty;return this};a.prototype.prepend=function(i){var h=this.tx;if(i.a!==1||i.b!==0||i.c!==0||i.d!==1){var g=this.a;var j=this.c;this.a=g*i.a+this.b*i.c;this.b=g*i.b+this.b*i.d;this.c=j*i.a+this.d*i.c;this.d=j*i.b+this.d*i.d}this.tx=h*i.a+this.ty*i.c+i.tx;this.ty=h*i.b+this.ty*i.d+i.ty;return this};a.prototype.invert=function(){var h=this.a;var i=this.b;var j=this.c;var k=this.d;var g=this.tx;var l=h*k-i*j;this.a=k/l;this.b=-i/l;this.c=-j/l;this.d=h/l;this.tx=(j*this.ty-k*g)/l;this.ty=-(h*this.ty-i*g)/l;return this};a.prototype.identity=function(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0;return this};a.prototype.clone=function(){var g=new a();g.a=this.a;g.b=this.b;g.c=this.c;g.d=this.d;g.tx=this.tx;g.ty=this.ty;return g};a.prototype.copy=function(g){g.a=this.a;g.b=this.b;g.c=this.c;g.d=this.d;g.tx=this.tx;g.ty=this.ty;return g};a.IDENTITY=new a();a.TEMP_MATRIX=new a()},{"./Point":24}],24:[function(b,c,a){function d(f,g){this.x=f||0;this.y=g||0}d.prototype.constructor=d;c.exports=d;d.prototype.clone=function(){return new d(this.x,this.y)};d.prototype.copy=function(f){this.set(f.x,f.y)};d.prototype.equals=function(f){return(f.x===this.x)&&(f.y===this.y)};d.prototype.set=function(f,g){this.x=f||0;this.y=g||((g!==0)?this.x:0)}},{}],25:[function(b,c,a){c.exports={Point:b("./Point"),Matrix:b("./Matrix"),Circle:b("./shapes/Circle"),Ellipse:b("./shapes/Ellipse"),Polygon:b("./shapes/Polygon"),Rectangle:b("./shapes/Rectangle"),RoundedRectangle:b("./shapes/RoundedRectangle")}},{"./Matrix":23,"./Point":24,"./shapes/Circle":26,"./shapes/Ellipse":27,"./shapes/Polygon":28,"./shapes/Rectangle":29,"./shapes/RoundedRectangle":30}],26:[function(c,f,b){var d=c("./Rectangle"),a=c("../../const");function g(i,j,h){this.x=i||0;this.y=j||0;this.radius=h||0;this.type=a.SHAPES.CIRC}g.prototype.constructor=g;f.exports=g;g.prototype.clone=function(){return new g(this.x,this.y,this.radius)};g.prototype.contains=function(h,l){if(this.radius<=0){return false}var k=(this.x-h),j=(this.y-l),i=this.radius*this.radius;k*=k;j*=j;return(k+j<=i)};g.prototype.getBounds=function(){return new d(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}},{"../../const":15,"./Rectangle":29}],27:[function(c,g,b){var f=c("./Rectangle"),a=c("../../const");function d(i,k,j,h){this.x=i||0;this.y=k||0;this.width=j||0;this.height=h||0;this.type=a.SHAPES.ELIP}d.prototype.constructor=d;g.exports=d;d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)};d.prototype.contains=function(i,k){if(this.width<=0||this.height<=0){return false}var j=((i-this.x)/this.width),h=((k-this.y)/this.height);j*=j;h*=h;return(j+h<=1)};d.prototype.getBounds=function(){return new f(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":15,"./Rectangle":29}],28:[function(d,f,c){var g=d("../Point"),a=d("../../const");function b(j){var m=j;if(!Array.isArray(m)){m=new Array(arguments.length);for(var h=0;h<m.length;++h){m[h]=arguments[h]}}if(m[0] instanceof g){var n=[];for(var l=0,k=m.length;l<k;l++){n.push(m[l].x,m[l].y)}m=n}this.closed=true;this.points=m;this.type=a.SHAPES.POLY}b.prototype.constructor=b;f.exports=b;b.prototype.clone=function(){return new b(this.points.slice())};b.prototype.contains=function(t,s){var m=false;var h=this.points.length/2;for(var p=0,o=h-1;p<h;o=p++){var r=this.points[p*2],n=this.points[p*2+1],q=this.points[o*2],l=this.points[o*2+1],k=((n>s)!==(l>s))&&(t<(q-r)*(s-n)/(l-n)+r);if(k){m=!m}}return m}},{"../../const":15,"../Point":24}],29:[function(c,f,b){var a=c("../../const");function d(h,j,i,g){this.x=h||0;this.y=j||0;this.width=i||0;this.height=g||0;this.type=a.SHAPES.RECT}d.prototype.constructor=d;f.exports=d;d.EMPTY=new d(0,0,0,0);d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)};d.prototype.contains=function(g,h){if(this.width<=0||this.height<=0){return false}if(g>=this.x&&g<this.x+this.width){if(h>=this.y&&h<this.y+this.height){return true}}return false}},{"../../const":15}],30:[function(c,d,b){var a=c("../../const");function f(i,k,j,h,g){this.x=i||0;this.y=k||0;this.width=j||0;this.height=h||0;this.radius=g||20;this.type=a.SHAPES.RREC}f.prototype.constructor=f;d.exports=f;f.prototype.clone=function(){return new f(this.x,this.y,this.width,this.height,this.radius)};f.prototype.contains=function(g,h){if(this.width<=0||this.height<=0){return false}if(g>=this.x&&g<=this.x+this.width){if(h>=this.y&&h<=this.y+this.height){return true}}return false}},{"../../const":15}],31:[function(d,f,c){var b=d("../display/Container"),a=d("../const");function g(i,h){b.call(this);this._properties=[false,true,false,false,false];this._size=i||15000;this._buffers=null;this._updateStatic=false;this.interactiveChildren=false;this.blendMode=a.BLEND_MODES.NORMAL;this.roundPixels=true;this.setProperties(h)}g.prototype=Object.create(b.prototype);g.prototype.constructor=g;f.exports=g;g.prototype.setProperties=function(h){if(h){this._properties[0]="scale" in h?!!h.scale:this._properties[0];this._properties[1]="position" in h?!!h.position:this._properties[1];this._properties[2]="rotation" in h?!!h.rotation:this._properties[2];this._properties[3]="uvs" in h?!!h.uvs:this._properties[3];this._properties[4]="alpha" in h?!!h.alpha:this._properties[4]}};g.prototype.updateTransform=function(){this.displayObjectUpdateTransform()};g.prototype.renderWebGL=function(h){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable){return}h.setObjectRenderer(h.plugins.particle);h.plugins.particle.render(this)};g.prototype.addChildAt=function(i,h){if(i===this){return i}if(h>=0&&h<=this.children.length){if(i.parent){i.parent.removeChild(i)}i.parent=this;this.children.splice(h,0,i);this._updateStatic=true;return i}else{throw new Error(i+"addChildAt: The index "+h+" supplied is out of bounds "+this.children.length)}};g.prototype.removeChildAt=function(h){var i=this.getChildAt(h);i.parent=null;this.children.splice(h,1);this._updateStatic=true;return i};g.prototype.renderCanvas=function(s){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable){return}var h=s.context;var m=this.worldTransform;var t=true;var r=0;var q=0;var n=0;var l=0;h.globalAlpha=this.worldAlpha;this.displayObjectUpdateTransform();for(var o=0;o<this.children.length;++o){var k=this.children[o];if(!k.visible){continue}var j=k.texture.frame;h.globalAlpha=this.worldAlpha*k.alpha;if(k.rotation%(Math.PI*2)===0){if(t){h.setTransform(m.a,m.b,m.c,m.d,m.tx,m.ty);t=false}r=((k.anchor.x)*(-j.width*k.scale.x)+k.position.x+0.5);q=((k.anchor.y)*(-j.height*k.scale.y)+k.position.y+0.5);n=j.width*k.scale.x;l=j.height*k.scale.y}else{if(!t){t=true}k.displayObjectUpdateTransform();var p=k.worldTransform;if(s.roundPixels){h.setTransform(p.a,p.b,p.c,p.d,p.tx|0,p.ty|0)}else{h.setTransform(p.a,p.b,p.c,p.d,p.tx,p.ty)}r=((k.anchor.x)*(-j.width)+0.5);q=((k.anchor.y)*(-j.height)+0.5);n=j.width;l=j.height}h.drawImage(k.texture.baseTexture.source,j.x,j.y,j.width,j.height,r,q,n,l)}};g.prototype.destroy=function(){b.prototype.destroy.apply(this,arguments);if(this._buffers){for(var h=0;h<this._buffers.length;++h){this._buffers.destroy()}}this._properties=null;this._buffers=null}},{"../const":15,"../display/Container":16}],32:[function(b,c,a){function d(k,h,g){this.gl=k;this.vertSize=2;this.vertByteSize=this.vertSize*4;this.size=g;this.dynamicProperties=[];this.staticProperties=[];for(var f=0;f<h.length;f++){var j=h[f];if(j.dynamic){this.dynamicProperties.push(j)}else{this.staticProperties.push(j)}}this.staticStride=0;this.staticBuffer=null;this.staticData=null;this.dynamicStride=0;this.dynamicBuffer=null;this.dynamicData=null;this.initBuffers()}d.prototype.constructor=d;c.exports=d;d.prototype.initBuffers=function(){var k=this.gl;var f;var h;var j=0;this.dynamicStride=0;for(f=0;f<this.dynamicProperties.length;f++){h=this.dynamicProperties[f];h.offset=j;j+=h.size;this.dynamicStride+=h.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4);this.dynamicBuffer=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,this.dynamicBuffer);k.bufferData(k.ARRAY_BUFFER,this.dynamicData,k.DYNAMIC_DRAW);var g=0;this.staticStride=0;for(f=0;f<this.staticProperties.length;f++){h=this.staticProperties[f];h.offset=g;g+=h.size;this.staticStride+=h.size}this.staticData=new Float32Array(this.size*this.staticStride*4);this.staticBuffer=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,this.staticBuffer);k.bufferData(k.ARRAY_BUFFER,this.staticData,k.DYNAMIC_DRAW)};d.prototype.uploadDynamic=function(h,l,g){var k=this.gl;for(var f=0;f<this.dynamicProperties.length;f++){var j=this.dynamicProperties[f];j.uploadFunction(h,l,g,this.dynamicData,this.dynamicStride,j.offset)}k.bindBuffer(k.ARRAY_BUFFER,this.dynamicBuffer);k.bufferSubData(k.ARRAY_BUFFER,0,this.dynamicData)};d.prototype.uploadStatic=function(h,l,g){var k=this.gl;for(var f=0;f<this.staticProperties.length;f++){var j=this.staticProperties[f];j.uploadFunction(h,l,g,this.staticData,this.staticStride,j.offset)}k.bindBuffer(k.ARRAY_BUFFER,this.staticBuffer);k.bufferSubData(k.ARRAY_BUFFER,0,this.staticData)};d.prototype.bind=function(){var h=this.gl;var f,g;h.bindBuffer(h.ARRAY_BUFFER,this.dynamicBuffer);for(f=0;f<this.dynamicProperties.length;f++){g=this.dynamicProperties[f];h.vertexAttribPointer(g.attribute,g.size,h.FLOAT,false,this.dynamicStride*4,g.offset*4)}h.bindBuffer(h.ARRAY_BUFFER,this.staticBuffer);for(f=0;f<this.staticProperties.length;f++){g=this.staticProperties[f];h.vertexAttribPointer(g.attribute,g.size,h.FLOAT,false,this.staticStride*4,g.offset*4)}};d.prototype.destroy=function(){this.dynamicProperties=null;this.dynamicData=null;this.gl.deleteBuffer(this.dynamicBuffer);this.staticProperties=null;this.staticData=null;this.gl.deleteBuffer(this.staticBuffer)}},{}],33:[function(d,c,g){var j=d("../../renderers/webgl/utils/ObjectRenderer"),i=d("../../renderers/webgl/WebGLRenderer"),f=d("./ParticleShader"),b=d("./ParticleBuffer"),h=d("../../math");function a(m){j.call(this,m);this.size=15000;var n=this.size*6;this.indices=new Uint16Array(n);for(var l=0,k=0;l<n;l+=6,k+=4){this.indices[l+0]=k+0;this.indices[l+1]=k+1;this.indices[l+2]=k+2;this.indices[l+3]=k+0;this.indices[l+4]=k+2;this.indices[l+5]=k+3}this.shader=null;this.indexBuffer=null;this.properties=null;this.tempMatrix=new h.Matrix()}a.prototype=Object.create(j.prototype);a.prototype.constructor=a;c.exports=a;i.registerPlugin("particle",a);a.prototype.onContextChange=function(){var k=this.renderer.gl;this.shader=new f(this.renderer.shaderManager);this.indexBuffer=k.createBuffer();k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,this.indexBuffer);k.bufferData(k.ELEMENT_ARRAY_BUFFER,this.indices,k.STATIC_DRAW);this.properties=[{attribute:this.shader.attributes.aVertexPosition,dynamic:false,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,dynamic:true,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,dynamic:false,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,dynamic:false,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,dynamic:false,size:1,uploadFunction:this.uploadAlpha,offset:0}]};a.prototype.start=function(){var l=this.renderer.gl;l.activeTexture(l.TEXTURE0);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var k=this.shader;this.renderer.shaderManager.setShader(k)};a.prototype.render=function(l){var n=l.children,u=n.length,v=l._size;if(u===0){return}else{if(u>v){u=v}}if(!l._buffers){l._buffers=this.generateBuffers(l)}this.renderer.blendModeManager.setBlendMode(l.blendMode);var t=this.renderer.gl;var o=l.worldTransform.copy(this.tempMatrix);o.prepend(this.renderer.currentRenderTarget.projectionMatrix);t.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,false,o.toArray(true));t.uniform1f(this.shader.uniforms.uAlpha._location,l.worldAlpha);var w=l._updateStatic;var k=n[0]._texture.baseTexture;if(!k._glTextures[t.id]){if(!this.renderer.updateTexture(k)){return}if(!this.properties[0].dynamic||!this.properties[3].dynamic){w=true}}else{t.bindTexture(t.TEXTURE_2D,k._glTextures[t.id])}var q=0;for(var r=0;r<u;r+=this.size){var s=(u-r);if(s>this.size){s=this.size}var p=l._buffers[q++];p.uploadDynamic(n,r,s);if(w){p.uploadStatic(n,r,s)}p.bind(this.shader);t.drawElements(t.TRIANGLES,s*6,t.UNSIGNED_SHORT,0);this.renderer.drawCount++}l._updateStatic=false};a.prototype.generateBuffers=function(l){var o=this.renderer.gl,k=[],n=l._size,m;for(m=0;m<l._properties.length;m++){this.properties[m].dynamic=l._properties[m]}for(m=0;m<n;m+=this.size){k.push(new b(o,this.properties,this.size,this.shader))}return k};a.prototype.uploadVertices=function(l,y,q,s,k,n){var z,t,m,x,w,r,p,v,u;for(var o=0;o<q;o++){z=l[y+o];t=z._texture;x=z.scale.x;w=z.scale.y;if(t.trim){m=t.trim;p=m.x-z.anchor.x*m.width;r=p+t.crop.width;u=m.y-z.anchor.y*m.height;v=u+t.crop.height}else{r=(t._frame.width)*(1-z.anchor.x);p=(t._frame.width)*-z.anchor.x;v=t._frame.height*(1-z.anchor.y);u=t._frame.height*-z.anchor.y}s[n]=p*x;s[n+1]=u*w;s[n+k]=r*x;s[n+k+1]=u*w;s[n+k*2]=r*x;s[n+k*2+1]=v*w;s[n+k*3]=p*x;s[n+k*3+1]=v*w;n+=k*4}};a.prototype.uploadPosition=function(m,q,l,r,o,p){for(var k=0;k<l;k++){var n=m[q+k].position;r[p]=n.x;r[p+1]=n.y;r[p+o]=n.x;r[p+o+1]=n.y;r[p+o*2]=n.x;r[p+o*2+1]=n.y;r[p+o*3]=n.x;r[p+o*3+1]=n.y;p+=o*4}};a.prototype.uploadRotation=function(n,q,m,r,o,p){for(var l=0;l<m;l++){var k=n[q+l].rotation;r[p]=k;r[p+o]=k;r[p+o*2]=k;r[p+o*3]=k;p+=o*4}};a.prototype.uploadUvs=function(n,q,m,r,o,p){for(var l=0;l<m;l++){var k=n[q+l]._texture._uvs;if(k){r[p]=k.x0;r[p+1]=k.y0;r[p+o]=k.x1;r[p+o+1]=k.y1;r[p+o*2]=k.x2;r[p+o*2+1]=k.y2;r[p+o*3]=k.x3;r[p+o*3+1]=k.y3;p+=o*4}else{r[p]=0;r[p+1]=0;r[p+o]=0;r[p+o+1]=0;r[p+o*2]=0;r[p+o*2+1]=0;r[p+o*3]=0;r[p+o*3+1]=0;p+=o*4}}};a.prototype.uploadAlpha=function(m,q,l,r,o,p){for(var k=0;k<l;k++){var n=m[q+k].alpha;r[p]=n;r[p+o]=n;r[p+o*2]=n;r[p+o*3]=n;p+=o*4}};a.prototype.destroy=function(){if(this.renderer.gl){this.renderer.gl.deleteBuffer(this.indexBuffer)}j.prototype.destroy.apply(this,arguments);this.shader.destroy();this.indices=null;this.tempMatrix=null}},{"../../math":25,"../../renderers/webgl/WebGLRenderer":41,"../../renderers/webgl/utils/ObjectRenderer":55,"./ParticleBuffer":32,"./ParticleShader":34}],34:[function(d,f,b){var c=d("../../renderers/webgl/shaders/TextureShader");function a(g){c.call(this,g,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor * uAlpha ;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}a.prototype=Object.create(c.prototype);a.prototype.constructor=a;f.exports=a},{"../../renderers/webgl/shaders/TextureShader":54}],35:[function(f,g,d){var c=f("../utils"),i=f("../math"),a=f("../const"),h=f("eventemitter3");function b(n,m,j,k){h.call(this);c.sayHello(n);if(k){for(var l in a.DEFAULT_RENDER_OPTIONS){if(typeof k[l]==="undefined"){k[l]=a.DEFAULT_RENDER_OPTIONS[l]}}}else{k=a.DEFAULT_RENDER_OPTIONS}this.type=a.RENDERER_TYPE.UNKNOWN;this.width=m||800;this.height=j||600;this.view=k.view||document.createElement("canvas");this.resolution=k.resolution;this.transparent=k.transparent;this.autoResize=k.autoResize||false;this.blendModes=null;this.preserveDrawingBuffer=k.preserveDrawingBuffer;this.clearBeforeRender=k.clearBeforeRender;this._backgroundColor=0;this._backgroundColorRgb=[0,0,0];this._backgroundColorString="#000000";this.backgroundColor=k.backgroundColor||this._backgroundColor;this._tempDisplayObjectParent={worldTransform:new i.Matrix(),worldAlpha:1,children:[]};this._lastObjectRendered=this._tempDisplayObjectParent}b.prototype=Object.create(h.prototype);b.prototype.constructor=b;g.exports=b;Object.defineProperties(b.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(j){this._backgroundColor=j;this._backgroundColorString=c.hex2string(j);c.hex2rgb(j,this._backgroundColorRgb)}}});b.prototype.resize=function(k,j){this.width=k*this.resolution;this.height=j*this.resolution;this.view.width=this.width;this.view.height=this.height;if(this.autoResize){this.view.style.width=this.width/this.resolution+"px";this.view.style.height=this.height/this.resolution+"px"}};b.prototype.destroy=function(j){if(j&&this.view.parent){this.view.parent.removeChild(this.view)}this.type=a.RENDERER_TYPE.UNKNOWN;this.width=0;this.height=0;this.view=null;this.resolution=0;this.transparent=false;this.autoResize=false;this.blendModes=null;this.preserveDrawingBuffer=false;this.clearBeforeRender=false;this._backgroundColor=0;this._backgroundColorRgb=null;this._backgroundColorString=null}},{"../const":15,"../math":25,"../utils":68,eventemitter3:4}],36:[function(c,b,d){var i=c("../SystemRenderer"),a=c("./utils/CanvasMaskManager"),h=c("../../utils"),g=c("../../math"),j=c("../../const");function f(m,k,l){i.call(this,"Canvas",m,k,l);this.type=j.RENDERER_TYPE.CANVAS;this.context=this.view.getContext("2d",{alpha:this.transparent});this.refresh=true;this.maskManager=new a();this.roundPixels=false;this.currentScaleMode=j.SCALE_MODES.DEFAULT;this.currentBlendMode=j.BLEND_MODES.NORMAL;this.smoothProperty="imageSmoothingEnabled";if(!this.context.imageSmoothingEnabled){if(this.context.webkitImageSmoothingEnabled){this.smoothProperty="webkitImageSmoothingEnabled"}else{if(this.context.mozImageSmoothingEnabled){this.smoothProperty="mozImageSmoothingEnabled"}else{if(this.context.oImageSmoothingEnabled){this.smoothProperty="oImageSmoothingEnabled"}else{if(this.context.msImageSmoothingEnabled){this.smoothProperty="msImageSmoothingEnabled"}}}}}this.initPlugins();this._mapBlendModes();this._tempDisplayObjectParent={worldTransform:new g.Matrix(),worldAlpha:1};this.resize(m,k)}f.prototype=Object.create(i.prototype);f.prototype.constructor=f;b.exports=f;h.pluginTarget.mixin(f);f.prototype.render=function(k){var l=k.parent;this._lastObjectRendered=k;k.parent=this._tempDisplayObjectParent;k.updateTransform();k.parent=l;this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;this.currentBlendMode=j.BLEND_MODES.NORMAL;this.context.globalCompositeOperation=this.blendModes[j.BLEND_MODES.NORMAL];if(navigator.isCocoonJS&&this.view.screencanvas){this.context.fillStyle="black";this.context.clear()}if(this.clearBeforeRender){if(this.transparent){this.context.clearRect(0,0,this.width,this.height)}else{this.context.fillStyle=this._backgroundColorString;this.context.fillRect(0,0,this.width,this.height)}}this.renderDisplayObject(k,this.context)};f.prototype.destroy=function(k){this.destroyPlugins();i.prototype.destroy.call(this,k);this.context=null;this.refresh=true;this.maskManager.destroy();this.maskManager=null;this.roundPixels=false;this.currentScaleMode=0;this.currentBlendMode=0;this.smoothProperty=null};f.prototype.renderDisplayObject=function(m,l){var k=this.context;this.context=l;m.renderCanvas(this);this.context=k};f.prototype._mapBlendModes=function(){if(!this.blendModes){this.blendModes={};if(h.canUseNewCanvasBlendModes()){this.blendModes[j.BLEND_MODES.NORMAL]="source-over";this.blendModes[j.BLEND_MODES.ADD]="lighter";this.blendModes[j.BLEND_MODES.MULTIPLY]="multiply";this.blendModes[j.BLEND_MODES.SCREEN]="screen";this.blendModes[j.BLEND_MODES.OVERLAY]="overlay";this.blendModes[j.BLEND_MODES.DARKEN]="darken";this.blendModes[j.BLEND_MODES.LIGHTEN]="lighten";this.blendModes[j.BLEND_MODES.COLOR_DODGE]="color-dodge";this.blendModes[j.BLEND_MODES.COLOR_BURN]="color-burn";this.blendModes[j.BLEND_MODES.HARD_LIGHT]="hard-light";this.blendModes[j.BLEND_MODES.SOFT_LIGHT]="soft-light";this.blendModes[j.BLEND_MODES.DIFFERENCE]="difference";this.blendModes[j.BLEND_MODES.EXCLUSION]="exclusion";this.blendModes[j.BLEND_MODES.HUE]="hue";this.blendModes[j.BLEND_MODES.SATURATION]="saturation";this.blendModes[j.BLEND_MODES.COLOR]="color";this.blendModes[j.BLEND_MODES.LUMINOSITY]="luminosity"}else{this.blendModes[j.BLEND_MODES.NORMAL]="source-over";this.blendModes[j.BLEND_MODES.ADD]="lighter";this.blendModes[j.BLEND_MODES.MULTIPLY]="source-over";this.blendModes[j.BLEND_MODES.SCREEN]="source-over";this.blendModes[j.BLEND_MODES.OVERLAY]="source-over";this.blendModes[j.BLEND_MODES.DARKEN]="source-over";this.blendModes[j.BLEND_MODES.LIGHTEN]="source-over";this.blendModes[j.BLEND_MODES.COLOR_DODGE]="source-over";this.blendModes[j.BLEND_MODES.COLOR_BURN]="source-over";this.blendModes[j.BLEND_MODES.HARD_LIGHT]="source-over";this.blendModes[j.BLEND_MODES.SOFT_LIGHT]="source-over";this.blendModes[j.BLEND_MODES.DIFFERENCE]="source-over";this.blendModes[j.BLEND_MODES.EXCLUSION]="source-over";this.blendModes[j.BLEND_MODES.HUE]="source-over";this.blendModes[j.BLEND_MODES.SATURATION]="source-over";this.blendModes[j.BLEND_MODES.COLOR]="source-over";this.blendModes[j.BLEND_MODES.LUMINOSITY]="source-over"}}}},{"../../const":15,"../../math":25,"../../utils":68,"../SystemRenderer":35,"./utils/CanvasMaskManager":39}],37:[function(b,d,a){function c(g,f){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.canvas.width=g;this.canvas.height=f}c.prototype.constructor=c;d.exports=c;Object.defineProperties(c.prototype,{width:{get:function(){return this.canvas.width},set:function(f){this.canvas.width=f}},height:{get:function(){return this.canvas.height},set:function(f){this.canvas.height=f}}});c.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};c.prototype.resize=function(g,f){this.canvas.width=g;this.canvas.height=f};c.prototype.destroy=function(){this.context=null;this.canvas=null}},{}],38:[function(c,d,b){var a=c("../../../const");var f=d.exports={};f.renderGraphics=function(K,m){var F=K.worldAlpha;if(K.dirty){this.updateGraphicsTint(K);K.dirty=false}for(var I=0;I<K.graphicsData.length;I++){var M=K.graphicsData[I];var l=M.shape;var r=M._fillTint;var k=M._lineTint;m.lineWidth=M.lineWidth;if(M.type===a.SHAPES.POLY){m.beginPath();var H=l.points;m.moveTo(H[0],H[1]);for(var G=1;G<H.length/2;G++){m.lineTo(H[G*2],H[G*2+1])}if(l.closed){m.lineTo(H[0],H[1])}if(H[0]===H[H.length-2]&&H[1]===H[H.length-1]){m.closePath()}if(M.fill){m.globalAlpha=M.fillAlpha*F;m.fillStyle="#"+("00000"+(r|0).toString(16)).substr(-6);m.fill()}if(M.lineWidth){m.globalAlpha=M.lineAlpha*F;m.strokeStyle="#"+("00000"+(k|0).toString(16)).substr(-6);m.stroke()}}else{if(M.type===a.SHAPES.RECT){if(M.fillColor||M.fillColor===0){m.globalAlpha=M.fillAlpha*F;m.fillStyle="#"+("00000"+(r|0).toString(16)).substr(-6);m.fillRect(l.x,l.y,l.width,l.height)}if(M.lineWidth){m.globalAlpha=M.lineAlpha*F;m.strokeStyle="#"+("00000"+(k|0).toString(16)).substr(-6);m.strokeRect(l.x,l.y,l.width,l.height)}}else{if(M.type===a.SHAPES.CIRC){m.beginPath();m.arc(l.x,l.y,l.radius,0,2*Math.PI);m.closePath();if(M.fill){m.globalAlpha=M.fillAlpha*F;m.fillStyle="#"+("00000"+(r|0).toString(16)).substr(-6);m.fill()}if(M.lineWidth){m.globalAlpha=M.lineAlpha*F;m.strokeStyle="#"+("00000"+(k|0).toString(16)).substr(-6);m.stroke()}}else{if(M.type===a.SHAPES.ELIP){var z=l.width*2;var J=l.height*2;var v=l.x-z/2;var u=l.y-J/2;m.beginPath();var A=0.5522848,q=(z/2)*A,o=(J/2)*A,E=v+z,g=u+J,B=v+z/2,L=u+J/2;m.moveTo(v,L);m.bezierCurveTo(v,L-o,B-q,u,B,u);m.bezierCurveTo(B+q,u,E,L-o,E,L);m.bezierCurveTo(E,L+o,B+q,g,B,g);m.bezierCurveTo(B-q,g,v,L+o,v,L);m.closePath();if(M.fill){m.globalAlpha=M.fillAlpha*F;m.fillStyle="#"+("00000"+(r|0).toString(16)).substr(-6);m.fill()}if(M.lineWidth){m.globalAlpha=M.lineAlpha*F;m.strokeStyle="#"+("00000"+(k|0).toString(16)).substr(-6);m.stroke()}}else{if(M.type===a.SHAPES.RREC){var s=l.x;var p=l.y;var D=l.width;var C=l.height;var n=l.radius;var t=Math.min(D,C)/2|0;n=n>t?t:n;m.beginPath();m.moveTo(s,p+n);m.lineTo(s,p+C-n);m.quadraticCurveTo(s,p+C,s+n,p+C);m.lineTo(s+D-n,p+C);m.quadraticCurveTo(s+D,p+C,s+D,p+C-n);m.lineTo(s+D,p+n);m.quadraticCurveTo(s+D,p,s+D-n,p);m.lineTo(s+n,p);m.quadraticCurveTo(s,p,s,p+n);m.closePath();if(M.fillColor||M.fillColor===0){m.globalAlpha=M.fillAlpha*F;m.fillStyle="#"+("00000"+(r|0).toString(16)).substr(-6);m.fill()}if(M.lineWidth){m.globalAlpha=M.lineAlpha*F;m.strokeStyle="#"+("00000"+(k|0).toString(16)).substr(-6);m.stroke()}}}}}}}};f.renderGraphicsMask=function(I,l){var G=I.graphicsData.length;if(G===0){return}l.beginPath();for(var F=0;F<G;F++){var K=I.graphicsData[F];var k=K.shape;if(K.type===a.SHAPES.POLY){var E=k.points;l.moveTo(E[0],E[1]);for(var D=1;D<E.length/2;D++){l.lineTo(E[D*2],E[D*2+1])}if(E[0]===E[E.length-2]&&E[1]===E[E.length-1]){l.closePath()}}else{if(K.type===a.SHAPES.RECT){l.rect(k.x,k.y,k.width,k.height);l.closePath()}else{if(K.type===a.SHAPES.CIRC){l.arc(k.x,k.y,k.radius,0,2*Math.PI);l.closePath()}else{if(K.type===a.SHAPES.ELIP){var u=k.width*2;var H=k.height*2;var t=k.x-u/2;var s=k.y-H/2;var v=0.5522848,p=(u/2)*v,n=(H/2)*v,C=t+u,g=s+H,z=t+u/2,J=s+H/2;l.moveTo(t,J);l.bezierCurveTo(t,J-n,z-p,s,z,s);l.bezierCurveTo(z+p,s,C,J-n,C,J);l.bezierCurveTo(C,J+n,z+p,g,z,g);l.bezierCurveTo(z-p,g,t,J+n,t,J);l.closePath()}else{if(K.type===a.SHAPES.RREC){var q=k.x;var o=k.y;var B=k.width;var A=k.height;var m=k.radius;var r=Math.min(B,A)/2|0;m=m>r?r:m;l.moveTo(q,o+m);l.lineTo(q,o+A-m);l.quadraticCurveTo(q,o+A,q+m,o+A);l.lineTo(q+B-m,o+A);l.quadraticCurveTo(q+B,o+A,q+B,o+A-m);l.lineTo(q+B,o+m);l.quadraticCurveTo(q+B,o,q+B-m,o);l.lineTo(q+m,o);l.quadraticCurveTo(q,o,q,o+m);l.closePath()}}}}}}};f.updateGraphicsTint=function(j){if(j.tint===16777215){return}var h=(j.tint>>16&255)/255;var g=(j.tint>>8&255)/255;var m=(j.tint&255)/255;for(var k=0;k<j.graphicsData.length;k++){var l=j.graphicsData[k];var o=l.fillColor|0;var n=l.lineColor|0;l._fillTint=(((o>>16&255)/255*h*255<<16)+((o>>8&255)/255*g*255<<8)+(o&255)/255*m*255);l._lineTint=(((n>>16&255)/255*h*255<<16)+((n>>8&255)/255*g*255<<8)+(n&255)/255*m*255)}}},{"../../../const":15}],39:[function(b,c,a){var f=b("./CanvasGraphics");function d(){}d.prototype.constructor=d;c.exports=d;d.prototype.pushMask=function(k,j){j.context.save();var g=k.alpha;var i=k.worldTransform;var h=j.resolution;j.context.setTransform(i.a*h,i.b*h,i.c*h,i.d*h,i.tx*h,i.ty*h);if(!k.texture){f.renderGraphicsMask(k,j.context);j.context.clip()}k.worldAlpha=g};d.prototype.popMask=function(g){g.context.restore()}},{"./CanvasGraphics":38}],40:[function(c,d,b){var a=c("../../../utils");var f=d.exports={};f.getTintedTexture=function(j,g){var l=j.texture;g=f.roundColor(g);var k="#"+("00000"+(g|0).toString(16)).substr(-6);l.tintCache=l.tintCache||{};if(l.tintCache[k]){return l.tintCache[k]}var h=f.canvas||document.createElement("canvas");f.tintMethod(l,g,h);if(f.convertTintToImage){var i=new Image();i.src=h.toDataURL();l.tintCache[k]=i}else{l.tintCache[k]=h;f.canvas=null}return h};f.tintWithMultiply=function(k,g,h){var i=h.getContext("2d");var j=k.crop;h.width=j.width;h.height=j.height;i.fillStyle="#"+("00000"+(g|0).toString(16)).substr(-6);i.fillRect(0,0,j.width,j.height);i.globalCompositeOperation="multiply";i.drawImage(k.baseTexture.source,j.x,j.y,j.width,j.height,0,0,j.width,j.height);i.globalCompositeOperation="destination-atop";i.drawImage(k.baseTexture.source,j.x,j.y,j.width,j.height,0,0,j.width,j.height)};f.tintWithOverlay=function(k,g,h){var i=h.getContext("2d");var j=k.crop;h.width=j.width;h.height=j.height;i.globalCompositeOperation="copy";i.fillStyle="#"+("00000"+(g|0).toString(16)).substr(-6);i.fillRect(0,0,j.width,j.height);i.globalCompositeOperation="destination-atop";i.drawImage(k.baseTexture.source,j.x,j.y,j.width,j.height,0,0,j.width,j.height)};f.tintWithPerPixel=function(s,n,l){var k=l.getContext("2d");var p=s.crop;l.width=p.width;l.height=p.height;k.globalCompositeOperation="copy";k.drawImage(s.baseTexture.source,p.x,p.y,p.width,p.height,0,0,p.width,p.height);var j=a.hex2rgb(n);var h=j[0],q=j[1],t=j[2];var u=k.getImageData(0,0,p.width,p.height);var m=u.data;for(var o=0;o<m.length;o+=4){m[o+0]*=h;m[o+1]*=q;m[o+2]*=t}k.putImageData(u,0,0)};f.roundColor=function(g){var h=f.cacheStepsPerColorChannel;var i=a.hex2rgb(g);i[0]=Math.min(255,(i[0]/h)*h);i[1]=Math.min(255,(i[1]/h)*h);i[2]=Math.min(255,(i[2]/h)*h);return a.rgb2hex(i)};f.cacheStepsPerColorChannel=8;f.convertTintToImage=false;f.canUseMultiply=a.canUseNewCanvasBlendModes();f.tintMethod=f.canUseMultiply?f.tintWithMultiply:f.tintWithPerPixel},{"../../../utils":68}],41:[function(d,c,f){var o=d("../SystemRenderer"),j=d("./managers/ShaderManager"),a=d("./managers/MaskManager"),i=d("./managers/StencilManager"),g=d("./managers/FilterManager"),h=d("./managers/BlendModeManager"),b=d("./utils/RenderTarget"),n=d("./utils/ObjectRenderer"),l=d("./filters/FXAAFilter"),m=d("../../utils"),p=d("../../const");function k(s,q,r){r=r||{};o.call(this,"WebGL",s,q,r);this.type=p.RENDERER_TYPE.WEBGL;this.handleContextLost=this.handleContextLost.bind(this);this.handleContextRestored=this.handleContextRestored.bind(this);this.view.addEventListener("webglcontextlost",this.handleContextLost,false);this.view.addEventListener("webglcontextrestored",this.handleContextRestored,false);this._useFXAA=!!r.forceFXAA&&r.antialias;this._FXAAFilter=null;this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&this.transparent!=="notMultiplied",stencil:true,preserveDrawingBuffer:r.preserveDrawingBuffer};this.drawCount=0;this.shaderManager=new j(this);this.maskManager=new a(this);this.stencilManager=new i(this);this.filterManager=new g(this);this.blendModeManager=new h(this);this.currentRenderTarget=null;this.currentRenderer=new n(this);this.initPlugins();this._initContext();this._mapBlendModes();this._renderTargetStack=[]}k.prototype=Object.create(o.prototype);k.prototype.constructor=k;c.exports=k;m.pluginTarget.mixin(k);k.glContextId=0;k.prototype._initContext=function(){var q=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);this.gl=q;if(!q){throw new Error("This browser does not support webGL. Try using the canvas renderer")}this.glContextId=k.glContextId++;q.id=this.glContextId;q.renderer=this;q.disable(q.DEPTH_TEST);q.disable(q.CULL_FACE);q.enable(q.BLEND);this.renderTarget=new b(this.gl,this.width,this.height,null,this.resolution,true);this.setRenderTarget(this.renderTarget);this.emit("context",q);this.resize(this.width,this.height);if(!this._useFXAA){this._useFXAA=(this._contextOptions.antialias&&!q.getContextAttributes().antialias)}if(this._useFXAA){window.console.warn("FXAA antialiasing being used instead of native antialiasing");this._FXAAFilter=[new l()]}};k.prototype.render=function(q){if(this.gl.isContextLost()){return}this.drawCount=0;this._lastObjectRendered=q;if(this._useFXAA){this._FXAAFilter[0].uniforms.resolution.value.x=this.width;this._FXAAFilter[0].uniforms.resolution.value.y=this.height;q.filterArea=this.renderTarget.size;q.filters=this._FXAAFilter}var r=q.parent;q.parent=this._tempDisplayObjectParent;q.updateTransform();q.parent=r;var s=this.gl;this.setRenderTarget(this.renderTarget);if(this.clearBeforeRender){if(this.transparent){s.clearColor(0,0,0,0)}else{s.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1)}s.clear(s.COLOR_BUFFER_BIT)}this.renderDisplayObject(q,this.renderTarget)};k.prototype.renderDisplayObject=function(s,r,q){this.setRenderTarget(r);if(q){r.clear()}this.filterManager.setFilterStack(r.filterStack);s.renderWebGL(this);this.currentRenderer.flush()};k.prototype.setObjectRenderer=function(q){if(this.currentRenderer===q){return}this.currentRenderer.stop();this.currentRenderer=q;this.currentRenderer.start()};k.prototype.setRenderTarget=function(q){if(this.currentRenderTarget===q){return}this.currentRenderTarget=q;this.currentRenderTarget.activate();this.stencilManager.setMaskStack(q.stencilMaskStack)};k.prototype.resize=function(r,q){o.prototype.resize.call(this,r,q);this.filterManager.resize(r,q);this.renderTarget.resize(r,q);if(this.currentRenderTarget===this.renderTarget){this.renderTarget.activate()}};k.prototype.updateTexture=function(q){q=q.baseTexture||q;if(!q.hasLoaded){return}var r=this.gl;if(!q._glTextures[r.id]){q._glTextures[r.id]=r.createTexture();q.on("update",this.updateTexture,this);q.on("dispose",this.destroyTexture,this)}r.bindTexture(r.TEXTURE_2D,q._glTextures[r.id]);r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultipliedAlpha);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,q.source);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,q.scaleMode===p.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST);if(q.mipmap&&q.isPowerOfTwo){r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,q.scaleMode===p.SCALE_MODES.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);r.generateMipmap(r.TEXTURE_2D)}else{r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,q.scaleMode===p.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST)}if(!q.isPowerOfTwo){r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE)}else{r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT)}return q._glTextures[r.id]};k.prototype.destroyTexture=function(q){q=q.baseTexture||q;if(!q.hasLoaded){return}if(q._glTextures[this.gl.id]){this.gl.deleteTexture(q._glTextures[this.gl.id])}};k.prototype.handleContextLost=function(q){q.preventDefault()};k.prototype.handleContextRestored=function(){this._initContext();for(var q in m.BaseTextureCache){m.BaseTextureCache[q]._glTextures.length=0}};k.prototype.destroy=function(q){this.destroyPlugins();this.view.removeEventListener("webglcontextlost",this.handleContextLost);this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);o.prototype.destroy.call(this,q);this.uuid=0;this.shaderManager.destroy();this.maskManager.destroy();this.stencilManager.destroy();this.filterManager.destroy();this.shaderManager=null;this.maskManager=null;this.filterManager=null;this.blendModeManager=null;this.handleContextLost=null;this.handleContextRestored=null;this._contextOptions=null;this.drawCount=0;this.gl=null};k.prototype._mapBlendModes=function(){var q=this.gl;if(!this.blendModes){this.blendModes={};this.blendModes[p.BLEND_MODES.NORMAL]=[q.ONE,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.ADD]=[q.SRC_ALPHA,q.DST_ALPHA];this.blendModes[p.BLEND_MODES.MULTIPLY]=[q.DST_COLOR,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.SCREEN]=[q.SRC_ALPHA,q.ONE];this.blendModes[p.BLEND_MODES.OVERLAY]=[q.ONE,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.DARKEN]=[q.ONE,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.LIGHTEN]=[q.ONE,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.COLOR_DODGE]=[q.ONE,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.COLOR_BURN]=[q.ONE,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.HARD_LIGHT]=[q.ONE,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.SOFT_LIGHT]=[q.ONE,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.DIFFERENCE]=[q.ONE,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.EXCLUSION]=[q.ONE,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.HUE]=[q.ONE,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.SATURATION]=[q.ONE,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.COLOR]=[q.ONE,q.ONE_MINUS_SRC_ALPHA];this.blendModes[p.BLEND_MODES.LUMINOSITY]=[q.ONE,q.ONE_MINUS_SRC_ALPHA]}}},{"../../const":15,"../../utils":68,"../SystemRenderer":35,"./filters/FXAAFilter":43,"./managers/BlendModeManager":45,"./managers/FilterManager":46,"./managers/MaskManager":47,"./managers/ShaderManager":48,"./managers/StencilManager":49,"./utils/ObjectRenderer":55,"./utils/RenderTarget":57}],42:[function(b,c,a){var f=b("../shaders/TextureShader");function d(h,i,g){this.shaders=[];this.padding=0;this.uniforms=g||{};this.vertexSrc=h||f.defaultVertexSrc;this.fragmentSrc=i||f.defaultFragmentSrc}d.prototype.constructor=d;c.exports=d;d.prototype.getShader=function(h){var i=h.gl;var g=this.shaders[i.id];if(!g){g=new f(h.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes);this.shaders[i.id]=g}return g};d.prototype.applyFilter=function(k,i,h,g){var j=this.getShader(k);k.filterManager.applyFilter(j,i,h,g)};d.prototype.syncUniform=function(g){for(var k=0,h=this.shaders.length;k<h;++k){this.shaders[k].syncUniform(g)}}},{"../shaders/TextureShader":54}],43:[function(b,c,a){var d=b("./AbstractFilter");function f(){d.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}f.prototype=Object.create(d.prototype);f.prototype.constructor=f;c.exports=f;f.prototype.applyFilter=function(k,i,h){var g=k.filterManager;var j=this.getShader(k);g.applyFilter(j,i,h)}},{"./AbstractFilter":42}],44:[function(c,d,b){var f=c("./AbstractFilter"),g=c("../../../math");function a(h){var i=new g.Matrix();f.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:h._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:i.toArray(true)}});this.maskSprite=h;this.maskMatrix=i}a.prototype=Object.create(f.prototype);a.prototype.constructor=a;d.exports=a;a.prototype.applyFilter=function(l,j,i){var h=l.filterManager;this.uniforms.mask.value=this.maskSprite._texture;h.calculateMappedMatrix(j.frame,this.maskSprite,this.maskMatrix);this.uniforms.otherMatrix.value=this.maskMatrix.toArray(true);this.uniforms.alpha.value=this.maskSprite.worldAlpha;var k=this.getShader(l);h.applyFilter(k,j,i)};Object.defineProperties(a.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(h){this.uniforms.mask.value=h}},offset:{get:function(){return this.uniforms.offset.value},set:function(h){this.uniforms.offset.value=h}}})},{"../../../math":25,"./AbstractFilter":42}],45:[function(c,d,b){var f=c("./WebGLManager");function a(g){f.call(this,g);this.currentBlendMode=99999}a.prototype=Object.create(f.prototype);a.prototype.constructor=a;d.exports=a;a.prototype.setBlendMode=function(g){if(this.currentBlendMode===g){return false}this.currentBlendMode=g;var h=this.renderer.blendModes[this.currentBlendMode];this.renderer.gl.blendFunc(h[0],h[1]);return true}},{"./WebGLManager":50}],46:[function(d,b,f){var i=d("./WebGLManager"),a=d("../utils/RenderTarget"),j=d("../../../const"),c=d("../utils/Quad"),h=d("../../../math");function g(k){i.call(this,k);this.filterStack=[];this.filterStack.push({renderTarget:k.currentRenderTarget,filter:[],bounds:null});this.texturePool=[];this.textureSize=new h.Rectangle(0,0,k.width,k.height);this.currentFrame=null}g.prototype=Object.create(i.prototype);g.prototype.constructor=g;b.exports=g;g.prototype.onContextChange=function(){this.texturePool.length=0;var k=this.renderer.gl;this.quad=new c(k)};g.prototype.setFilterStack=function(k){this.filterStack=k};g.prototype.pushFilter=function(p,n){var m=p.filterArea?p.filterArea.clone():p.getBounds();m.x=m.x|0;m.y=m.y|0;m.width=m.width|0;m.height=m.height|0;var o=n[0].padding|0;m.x-=o;m.y-=o;m.width+=o*2;m.height+=o*2;if(this.renderer.currentRenderTarget.transform){var k=this.renderer.currentRenderTarget.transform;m.x+=k.tx;m.y+=k.ty;this.capFilterArea(m);m.x-=k.tx;m.y-=k.ty}else{this.capFilterArea(m)}if(m.width>0&&m.height>0){this.currentFrame=m;var l=this.getRenderTarget();this.renderer.setRenderTarget(l);l.clear();this.filterStack.push({renderTarget:l,filter:n})}else{this.filterStack.push({renderTarget:null,filter:n})}};g.prototype.popFilter=function(){var r=this.filterStack.pop();var q=this.filterStack[this.filterStack.length-1];var s=r.renderTarget;if(!r.renderTarget){return}var m=q.renderTarget;var p=this.renderer.gl;this.currentFrame=s.frame;this.quad.map(this.textureSize,s.frame);p.bindBuffer(p.ARRAY_BUFFER,this.quad.vertexBuffer);p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var l=r.filter;p.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,p.FLOAT,false,0,0);p.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,p.FLOAT,false,0,2*4*4);p.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,p.FLOAT,false,0,4*4*4);this.renderer.blendModeManager.setBlendMode(j.BLEND_MODES.NORMAL);if(l.length===1){if(l[0].uniforms.dimensions){l[0].uniforms.dimensions.value[0]=this.renderer.width;l[0].uniforms.dimensions.value[1]=this.renderer.height;l[0].uniforms.dimensions.value[2]=this.quad.vertices[0];l[0].uniforms.dimensions.value[3]=this.quad.vertices[5]}l[0].applyFilter(this.renderer,s,m);this.returnRenderTarget(s)}else{var n=s;var t=this.getRenderTarget(true);for(var o=0;o<l.length-1;o++){var k=l[o];if(k.uniforms.dimensions){k.uniforms.dimensions.value[0]=this.renderer.width;k.uniforms.dimensions.value[1]=this.renderer.height;k.uniforms.dimensions.value[2]=this.quad.vertices[0];k.uniforms.dimensions.value[3]=this.quad.vertices[5]}k.applyFilter(this.renderer,n,t);var u=n;n=t;t=u}l[l.length-1].applyFilter(this.renderer,n,m);this.returnRenderTarget(n);this.returnRenderTarget(t)}return r.filter};g.prototype.getRenderTarget=function(k){var l=this.texturePool.pop()||new a(this.renderer.gl,this.textureSize.width,this.textureSize.height,j.SCALE_MODES.LINEAR,this.renderer.resolution*j.FILTER_RESOLUTION);l.frame=this.currentFrame;if(k){l.clear(true)}return l};g.prototype.returnRenderTarget=function(k){this.texturePool.push(k)};g.prototype.applyFilter=function(m,l,o,k){var n=this.renderer.gl;this.renderer.setRenderTarget(o);if(k){o.clear()}this.renderer.shaderManager.setShader(m);m.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(true);m.syncUniforms();n.activeTexture(n.TEXTURE0);n.bindTexture(n.TEXTURE_2D,l.texture);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)};g.prototype.calculateMappedMatrix=function(n,s,o){var k=s.worldTransform.copy(h.Matrix.TEMP_MATRIX),p=s._texture.baseTexture;var r=o.identity();var q=this.textureSize.height/this.textureSize.width;r.translate(n.x/this.textureSize.width,n.y/this.textureSize.height);r.scale(1,q);var m=(this.textureSize.width/p.width);var l=(this.textureSize.height/p.height);k.tx/=p.width*m;k.ty/=p.width*m;k.invert();r.prepend(k);r.scale(1,1/q);r.scale(m,l);r.translate(s.anchor.x,s.anchor.y);return r};g.prototype.capFilterArea=function(k){if(k.x<0){k.width+=k.x;k.x=0}if(k.y<0){k.height+=k.y;k.y=0}if(k.x+k.width>this.textureSize.width){k.width=this.textureSize.width-k.x}if(k.y+k.height>this.textureSize.height){k.height=this.textureSize.height-k.y}};g.prototype.resize=function(m,k){this.textureSize.width=m;this.textureSize.height=k;for(var l=0;l<this.texturePool.length;l++){this.texturePool[l].resize(m,k)}};g.prototype.destroy=function(){this.filterStack=null;this.offsetY=0;for(var k=0;k<this.texturePool.length;k++){this.texturePool[k].destroy()}this.texturePool=null}},{"../../../const":15,"../../../math":25,"../utils/Quad":56,"../utils/RenderTarget":57,"./WebGLManager":50}],47:[function(b,d,a){var f=b("./WebGLManager"),c=b("../filters/SpriteMaskFilter");function g(h){f.call(this,h);this.stencilStack=[];this.reverse=true;this.count=0;this.alphaMaskPool=[]}g.prototype=Object.create(f.prototype);g.prototype.constructor=g;d.exports=g;g.prototype.pushMask=function(i,h){if(h.texture){this.pushSpriteMask(i,h)}else{this.pushStencilMask(i,h)}};g.prototype.popMask=function(i,h){if(h.texture){this.popSpriteMask(i,h)}else{this.popStencilMask(i,h)}};g.prototype.pushSpriteMask=function(j,i){var h=this.alphaMaskPool.pop();if(!h){h=[new c(i)]}h[0].maskSprite=i;this.renderer.filterManager.pushFilter(j,h)};g.prototype.popSpriteMask=function(){var h=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(h)};g.prototype.pushStencilMask=function(i,h){this.renderer.stencilManager.pushMask(h)};g.prototype.popStencilMask=function(i,h){this.renderer.stencilManager.popMask(h)}},{"../filters/SpriteMaskFilter":44,"./WebGLManager":50}],48:[function(b,a,c){var h=b("./WebGLManager"),d=b("../shaders/TextureShader"),j=b("../shaders/ComplexPrimitiveShader"),g=b("../shaders/PrimitiveShader"),i=b("../../../utils");function f(l){h.call(this,l);this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];for(var k=0;k<this.maxAttibs;k++){this.attribState[k]=false}this.stack=[];this._currentId=-1;this.currentShader=null}f.prototype=Object.create(h.prototype);f.prototype.constructor=f;i.pluginTarget.mixin(f);a.exports=f;f.prototype.onContextChange=function(){this.initPlugins();var l=this.renderer.gl;this.maxAttibs=l.getParameter(l.MAX_VERTEX_ATTRIBS);this.attribState=[];for(var k=0;k<this.maxAttibs;k++){this.attribState[k]=false}this.defaultShader=new d(this);this.primitiveShader=new g(this);this.complexPrimitiveShader=new j(this)};f.prototype.setAttribs=function(n){var l;for(l=0;l<this.tempAttribState.length;l++){this.tempAttribState[l]=false}for(var k in n){this.tempAttribState[n[k]]=true}var m=this.renderer.gl;for(l=0;l<this.attribState.length;l++){if(this.attribState[l]!==this.tempAttribState[l]){this.attribState[l]=this.tempAttribState[l];if(this.attribState[l]){m.enableVertexAttribArray(l)}else{m.disableVertexAttribArray(l)}}}};f.prototype.setShader=function(k){if(this._currentId===k.uuid){return false}this._currentId=k.uuid;this.currentShader=k;this.renderer.gl.useProgram(k.program);this.setAttribs(k.attributes);return true};f.prototype.destroy=function(){h.prototype.destroy.call(this);this.destroyPlugins();this.attribState=null;this.tempAttribState=null}},{"../../../utils":68,"../shaders/ComplexPrimitiveShader":51,"../shaders/PrimitiveShader":52,"../shaders/TextureShader":54,"./WebGLManager":50}],49:[function(c,d,b){var f=c("./WebGLManager"),a=c("../../../utils");function g(h){f.call(this,h);this.stencilMaskStack=null}g.prototype=Object.create(f.prototype);g.prototype.constructor=g;d.exports=g;g.prototype.setMaskStack=function(i){this.stencilMaskStack=i;var h=this.renderer.gl;if(i.stencilStack.length===0){h.disable(h.STENCIL_TEST)}else{h.enable(h.STENCIL_TEST)}};g.prototype.pushStencil=function(h,k){this.renderer.currentRenderTarget.attachStencilBuffer();var j=this.renderer.gl,i=this.stencilMaskStack;this.bindGraphics(h,k,this.renderer);if(i.stencilStack.length===0){j.enable(j.STENCIL_TEST);j.clear(j.STENCIL_BUFFER_BIT);i.reverse=true;i.count=0}i.stencilStack.push(k);var l=i.count;j.colorMask(false,false,false,false);j.stencilFunc(j.ALWAYS,0,255);j.stencilOp(j.KEEP,j.KEEP,j.INVERT);if(k.mode===1){j.drawElements(j.TRIANGLE_FAN,k.indices.length-4,j.UNSIGNED_SHORT,0);if(i.reverse){j.stencilFunc(j.EQUAL,255-l,255);j.stencilOp(j.KEEP,j.KEEP,j.DECR)}else{j.stencilFunc(j.EQUAL,l,255);j.stencilOp(j.KEEP,j.KEEP,j.INCR)}j.drawElements(j.TRIANGLE_FAN,4,j.UNSIGNED_SHORT,(k.indices.length-4)*2);if(i.reverse){j.stencilFunc(j.EQUAL,255-(l+1),255)}else{j.stencilFunc(j.EQUAL,l+1,255)}i.reverse=!i.reverse}else{if(!i.reverse){j.stencilFunc(j.EQUAL,255-l,255);j.stencilOp(j.KEEP,j.KEEP,j.DECR)}else{j.stencilFunc(j.EQUAL,l,255);j.stencilOp(j.KEEP,j.KEEP,j.INCR)}j.drawElements(j.TRIANGLE_STRIP,k.indices.length,j.UNSIGNED_SHORT,0);if(!i.reverse){j.stencilFunc(j.EQUAL,255-(l+1),255)}else{j.stencilFunc(j.EQUAL,l+1,255)}}j.colorMask(true,true,true,true);j.stencilOp(j.KEEP,j.KEEP,j.KEEP);i.count++};g.prototype.bindGraphics=function(h,k){this._currentGraphics=h;var j=this.renderer.gl;var i;if(k.mode===1){i=this.renderer.shaderManager.complexPrimitiveShader;this.renderer.shaderManager.setShader(i);j.uniformMatrix3fv(i.uniforms.translationMatrix._location,false,h.worldTransform.toArray(true));j.uniformMatrix3fv(i.uniforms.projectionMatrix._location,false,this.renderer.currentRenderTarget.projectionMatrix.toArray(true));j.uniform3fv(i.uniforms.tint._location,a.hex2rgb(h.tint));j.uniform3fv(i.uniforms.color._location,k.color);j.uniform1f(i.uniforms.alpha._location,h.worldAlpha);j.bindBuffer(j.ARRAY_BUFFER,k.buffer);j.vertexAttribPointer(i.attributes.aVertexPosition,2,j.FLOAT,false,4*2,0);j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,k.indexBuffer)}else{i=this.renderer.shaderManager.primitiveShader;this.renderer.shaderManager.setShader(i);j.uniformMatrix3fv(i.uniforms.translationMatrix._location,false,h.worldTransform.toArray(true));j.uniformMatrix3fv(i.uniforms.projectionMatrix._location,false,this.renderer.currentRenderTarget.projectionMatrix.toArray(true));j.uniform3fv(i.uniforms.tint._location,a.hex2rgb(h.tint));j.uniform1f(i.uniforms.alpha._location,h.worldAlpha);j.bindBuffer(j.ARRAY_BUFFER,k.buffer);j.vertexAttribPointer(i.attributes.aVertexPosition,2,j.FLOAT,false,4*6,0);j.vertexAttribPointer(i.attributes.aColor,4,j.FLOAT,false,4*6,2*4);j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,k.indexBuffer)}};g.prototype.popStencil=function(h,k){var j=this.renderer.gl,i=this.stencilMaskStack;i.stencilStack.pop();i.count--;if(i.stencilStack.length===0){j.disable(j.STENCIL_TEST)}else{var l=i.count;this.bindGraphics(h,k,this.renderer);j.colorMask(false,false,false,false);if(k.mode===1){i.reverse=!i.reverse;if(i.reverse){j.stencilFunc(j.EQUAL,255-(l+1),255);j.stencilOp(j.KEEP,j.KEEP,j.INCR)}else{j.stencilFunc(j.EQUAL,l+1,255);j.stencilOp(j.KEEP,j.KEEP,j.DECR)}j.drawElements(j.TRIANGLE_FAN,4,j.UNSIGNED_SHORT,(k.indices.length-4)*2);j.stencilFunc(j.ALWAYS,0,255);j.stencilOp(j.KEEP,j.KEEP,j.INVERT);j.drawElements(j.TRIANGLE_FAN,k.indices.length-4,j.UNSIGNED_SHORT,0);if(!i.reverse){j.stencilFunc(j.EQUAL,255-(l),255)}else{j.stencilFunc(j.EQUAL,l,255)}}else{if(!i.reverse){j.stencilFunc(j.EQUAL,255-(l+1),255);j.stencilOp(j.KEEP,j.KEEP,j.INCR)}else{j.stencilFunc(j.EQUAL,l+1,255);j.stencilOp(j.KEEP,j.KEEP,j.DECR)}j.drawElements(j.TRIANGLE_STRIP,k.indices.length,j.UNSIGNED_SHORT,0);if(!i.reverse){j.stencilFunc(j.EQUAL,255-(l),255)}else{j.stencilFunc(j.EQUAL,l,255)}}j.colorMask(true,true,true,true);j.stencilOp(j.KEEP,j.KEEP,j.KEEP)}};g.prototype.destroy=function(){f.prototype.destroy.call(this);this.stencilMaskStack.stencilStack=null};g.prototype.pushMask=function(h){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);if(h.dirty){this.renderer.plugins.graphics.updateGraphics(h,this.renderer.gl)}if(!h._webGL[this.renderer.gl.id].data.length){return}this.pushStencil(h,h._webGL[this.renderer.gl.id].data[0],this.renderer)};g.prototype.popMask=function(h){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);this.popStencil(h,h._webGL[this.renderer.gl.id].data[0],this.renderer)}},{"../../../utils":68,"./WebGLManager":50}],50:[function(b,c,a){function d(f){this.renderer=f;this.renderer.on("context",this.onContextChange,this)}d.prototype.constructor=d;c.exports=d;d.prototype.onContextChange=function(){};d.prototype.destroy=function(){this.renderer.off("context",this.onContextChange);this.renderer=null}},{}],51:[function(b,c,a){var d=b("./Shader");function f(g){d.call(this,g,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}f.prototype=Object.create(d.prototype);f.prototype.constructor=f;c.exports=f},{"./Shader":53}],52:[function(c,d,b){var f=c("./Shader");function a(g){f.call(this,g,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}a.prototype=Object.create(f.prototype);a.prototype.constructor=a;d.exports=a},{"./Shader":53}],53:[function(c,d,b){var a=c("../../../utils");function f(k,h,j,g,i){if(!h||!j){throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc")}this.uuid=a.uuid();this.gl=k.renderer.gl;this.shaderManager=k;this.program=null;this.uniforms=g||{};this.attributes=i||{};this.textureCount=1;this.vertexSrc=h;this.fragmentSrc=j;this.init()}f.prototype.constructor=f;d.exports=f;f.prototype.init=function(){this.compile();this.gl.useProgram(this.program);this.cacheUniformLocations(Object.keys(this.uniforms));this.cacheAttributeLocations(Object.keys(this.attributes))};f.prototype.cacheUniformLocations=function(h){for(var g=0;g<h.length;++g){this.uniforms[h[g]]._location=this.gl.getUniformLocation(this.program,h[g])}};f.prototype.cacheAttributeLocations=function(h){for(var g=0;g<h.length;++g){this.attributes[h[g]]=this.gl.getAttribLocation(this.program,h[g])}};f.prototype.compile=function(){var j=this.gl;var h=this._glCompile(j.VERTEX_SHADER,this.vertexSrc);var i=this._glCompile(j.FRAGMENT_SHADER,this.fragmentSrc);var g=j.createProgram();j.attachShader(g,h);j.attachShader(g,i);j.linkProgram(g);if(!j.getProgramParameter(g,j.LINK_STATUS)){console.error("Pixi.js Error: Could not initialize shader.");console.error("gl.VALIDATE_STATUS",j.getProgramParameter(g,j.VALIDATE_STATUS));console.error("gl.getError()",j.getError());if(j.getProgramInfoLog(g)!==""){console.warn("Pixi.js Warning: gl.getProgramInfoLog()",j.getProgramInfoLog(g))}j.deleteProgram(g);g=null}j.deleteShader(h);j.deleteShader(i);return(this.program=g)};f.prototype.syncUniform=function(g){var h=g._location,m=g.value,n=this.gl,k,j;switch(g.type){case"i":case"1i":n.uniform1i(h,m);break;case"f":case"1f":n.uniform1f(h,m);break;case"2f":n.uniform2f(h,m[0],m[1]);break;case"3f":n.uniform3f(h,m[0],m[1],m[2]);break;case"4f":n.uniform4f(h,m[0],m[1],m[2],m[3]);break;case"v2":n.uniform2f(h,m.x,m.y);break;case"v3":n.uniform3f(h,m.x,m.y,m.z);break;case"v4":n.uniform4f(h,m.x,m.y,m.z,m.w);break;case"1iv":n.uniform1iv(h,m);break;case"2iv":n.uniform2iv(h,m);break;case"3iv":n.uniform3iv(h,m);break;case"4iv":n.uniform4iv(h,m);break;case"1fv":n.uniform1fv(h,m);break;case"2fv":n.uniform2fv(h,m);break;case"3fv":n.uniform3fv(h,m);break;case"4fv":n.uniform4fv(h,m);break;case"m2":case"mat2":case"Matrix2fv":n.uniformMatrix2fv(h,g.transpose,m);break;case"m3":case"mat3":case"Matrix3fv":n.uniformMatrix3fv(h,g.transpose,m);break;case"m4":case"mat4":case"Matrix4fv":n.uniformMatrix4fv(h,g.transpose,m);break;case"c":if(typeof m==="number"){m=a.hex2rgb(m)}n.uniform3f(h,m[0],m[1],m[2]);break;case"iv1":n.uniform1iv(h,m);break;case"iv":n.uniform3iv(h,m);break;case"fv1":n.uniform1fv(h,m);break;case"fv":n.uniform3fv(h,m);break;case"v2v":if(!g._array){g._array=new Float32Array(2*m.length)}for(k=0,j=m.length;k<j;++k){g._array[k*2]=m[k].x;g._array[k*2+1]=m[k].y}n.uniform2fv(h,g._array);break;case"v3v":if(!g._array){g._array=new Float32Array(3*m.length)}for(k=0,j=m.length;k<j;++k){g._array[k*3]=m[k].x;g._array[k*3+1]=m[k].y;g._array[k*3+2]=m[k].z}n.uniform3fv(h,g._array);break;case"v4v":if(!g._array){g._array=new Float32Array(4*m.length)}for(k=0,j=m.length;k<j;++k){g._array[k*4]=m[k].x;g._array[k*4+1]=m[k].y;g._array[k*4+2]=m[k].z;g._array[k*4+3]=m[k].w}n.uniform4fv(h,g._array);break;case"t":case"sampler2D":if(!g.value||!g.value.baseTexture.hasLoaded){break}n.activeTexture(n["TEXTURE"+this.textureCount]);var l=g.value.baseTexture._glTextures[n.id];if(!l){this.initSampler2D(g)}n.bindTexture(n.TEXTURE_2D,l);n.uniform1i(g._location,this.textureCount);this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+g.type)}};f.prototype.syncUniforms=function(){this.textureCount=1;for(var g in this.uniforms){this.syncUniform(this.uniforms[g])}};f.prototype.initSampler2D=function(g){var j=this.gl;var h=g.value.baseTexture;if(!h.hasLoaded){return}if(g.textureData){var i=g.textureData;h._glTextures[j.id]=j.createTexture();j.bindTexture(j.TEXTURE_2D,h._glTextures[j.id]);j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.premultipliedAlpha);j.texImage2D(j.TEXTURE_2D,0,i.luminance?j.LUMINANCE:j.RGBA,j.RGBA,j.UNSIGNED_BYTE,h.source);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,i.magFilter?i.magFilter:j.LINEAR);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,i.wrapS?i.wrapS:j.CLAMP_TO_EDGE);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,i.wrapS?i.wrapS:j.CLAMP_TO_EDGE);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,i.wrapT?i.wrapT:j.CLAMP_TO_EDGE)}else{this.shaderManager.renderer.updateTexture(h)}};f.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.gl=null;this.uniforms=null;this.attributes=null;this.vertexSrc=null;this.fragmentSrc=null};f.prototype._glCompile=function(g,i){var h=this.gl.createShader(g);this.gl.shaderSource(h,i);this.gl.compileShader(h);if(!this.gl.getShaderParameter(h,this.gl.COMPILE_STATUS)){console.log(this.gl.getShaderInfoLog(h));return null}return h}},{"../../../utils":68}],54:[function(c,d,a){var f=c("./Shader");function b(j,i,o,g,l){var m={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array(1,0,0,0,1,0,0,0,1)}};if(g){for(var n in g){m[n]=g[n]}}var h={aVertexPosition:0,aTextureCoord:0,aColor:0};if(l){for(var k in l){h[k]=l[k]}}i=i||b.defaultVertexSrc;o=o||b.defaultFragmentSrc;f.call(this,j,i,o,m,h)}b.prototype=Object.create(f.prototype);b.prototype.constructor=b;d.exports=b;b.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n");b.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":53}],55:[function(b,c,a){var d=b("../managers/WebGLManager");function f(g){d.call(this,g)}f.prototype=Object.create(d.prototype);f.prototype.constructor=f;c.exports=f;f.prototype.start=function(){};f.prototype.stop=function(){this.flush()};f.prototype.flush=function(){};f.prototype.render=function(g){}},{"../managers/WebGLManager":50}],56:[function(b,c,a){function d(f){this.gl=f;this.vertices=new Float32Array([0,0,200,0,200,200,0,200]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]);this.indices=new Uint16Array([0,1,2,0,3,2]);this.vertexBuffer=f.createBuffer();this.indexBuffer=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,this.vertexBuffer);f.bufferData(f.ARRAY_BUFFER,(8+8+16)*4,f.DYNAMIC_DRAW);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,this.indexBuffer);f.bufferData(f.ELEMENT_ARRAY_BUFFER,this.indices,f.STATIC_DRAW);this.upload()}d.prototype.constructor=d;d.prototype.map=function(h,g){var f=0;var i=0;this.uvs[0]=f;this.uvs[1]=i;this.uvs[2]=f+g.width/h.width;this.uvs[3]=i;this.uvs[4]=f+g.width/h.width;this.uvs[5]=i+g.height/h.height;this.uvs[6]=f;this.uvs[7]=i+g.height/h.height;f=g.x;i=g.y;this.vertices[0]=f;this.vertices[1]=i;this.vertices[2]=f+g.width;this.vertices[3]=i;this.vertices[4]=f+g.width;this.vertices[5]=i+g.height;this.vertices[6]=f;this.vertices[7]=i+g.height;this.upload()};d.prototype.upload=function(){var f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,this.vertexBuffer);f.bufferSubData(f.ARRAY_BUFFER,0,this.vertices);f.bufferSubData(f.ARRAY_BUFFER,8*4,this.uvs);f.bufferSubData(f.ARRAY_BUFFER,(8+8)*4,this.colors)};c.exports=d},{}],57:[function(f,g,c){var h=f("../../../math"),b=f("../../../utils"),a=f("../../../const"),d=f("./StencilMaskStack");var i=function(p,o,j,n,m,l){this.gl=p;this.frameBuffer=null;this.texture=null;this.size=new h.Rectangle(0,0,1,1);this.resolution=m||a.RESOLUTION;this.projectionMatrix=new h.Matrix();this.transform=null;this.frame=null;this.stencilBuffer=null;this.stencilMaskStack=new d();this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}];this.scaleMode=n||a.SCALE_MODES.DEFAULT;this.root=l;if(!this.root){this.frameBuffer=p.createFramebuffer();this.texture=p.createTexture();p.bindTexture(p.TEXTURE_2D,this.texture);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,n===a.SCALE_MODES.LINEAR?p.LINEAR:p.NEAREST);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,n===a.SCALE_MODES.LINEAR?p.LINEAR:p.NEAREST);var k=b.isPowerOfTwo(o,j);if(!k){p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE)}else{p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT)}p.bindFramebuffer(p.FRAMEBUFFER,this.frameBuffer);p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,this.texture,0)}this.resize(o,j)};i.prototype.constructor=i;g.exports=i;i.prototype.clear=function(k){var j=this.gl;if(k){j.bindFramebuffer(j.FRAMEBUFFER,this.frameBuffer)}j.clearColor(0,0,0,0);j.clear(j.COLOR_BUFFER_BIT)};i.prototype.attachStencilBuffer=function(){if(this.stencilBuffer){return}if(!this.root){var j=this.gl;this.stencilBuffer=j.createRenderbuffer();j.bindRenderbuffer(j.RENDERBUFFER,this.stencilBuffer);j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_STENCIL_ATTACHMENT,j.RENDERBUFFER,this.stencilBuffer);j.renderbufferStorage(j.RENDERBUFFER,j.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}};i.prototype.activate=function(){var k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,this.frameBuffer);var j=this.frame||this.size;this.calculateProjection(j);if(this.transform){this.projectionMatrix.append(this.transform)}k.viewport(0,0,j.width*this.resolution,j.height*this.resolution)};i.prototype.calculateProjection=function(j){var k=this.projectionMatrix;k.identity();if(!this.root){k.a=1/j.width*2;k.d=1/j.height*2;k.tx=-1-j.x*k.a;k.ty=-1-j.y*k.d}else{k.a=1/j.width*2;k.d=-1/j.height*2;k.tx=-1-j.x*k.a;k.ty=1-j.y*k.d}};i.prototype.resize=function(l,j){l=l|0;j=j|0;if(this.size.width===l&&this.size.height===j){return}this.size.width=l;this.size.height=j;if(!this.root){var m=this.gl;m.bindTexture(m.TEXTURE_2D,this.texture);m.texImage2D(m.TEXTURE_2D,0,m.RGBA,l*this.resolution,j*this.resolution,0,m.RGBA,m.UNSIGNED_BYTE,null);if(this.stencilBuffer){m.bindRenderbuffer(m.RENDERBUFFER,this.stencilBuffer);m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_STENCIL,l*this.resolution,j*this.resolution)}}var k=this.frame||this.size;this.calculateProjection(k)};i.prototype.destroy=function(){var j=this.gl;j.deleteFramebuffer(this.frameBuffer);j.deleteTexture(this.texture);this.frameBuffer=null;this.texture=null}},{"../../../const":15,"../../../math":25,"../../../utils":68,"./StencilMaskStack":58}],58:[function(c,d,a){function b(){this.stencilStack=[];this.reverse=true;this.count=0}b.prototype.constructor=b;d.exports=b},{}],59:[function(f,d,i){var j=f("../math"),h=f("../textures/Texture"),g=f("../display/Container"),b=f("../renderers/canvas/utils/CanvasTinter"),k=f("../utils"),l=f("../const"),a=new j.Point();function c(m){g.call(this);this.anchor=new j.Point();this._texture=null;this._width=0;this._height=0;this.tint=16777215;this.blendMode=l.BLEND_MODES.NORMAL;this.shader=null;this.cachedTint=16777215;this.texture=m||h.EMPTY}c.prototype=Object.create(g.prototype);c.prototype.constructor=c;d.exports=c;Object.defineProperties(c.prototype,{width:{get:function(){return this.scale.x*this.texture._frame.width},set:function(m){this.scale.x=m/this.texture._frame.width;this._width=m}},height:{get:function(){return this.scale.y*this.texture._frame.height},set:function(m){this.scale.y=m/this.texture._frame.height;this._height=m}},texture:{get:function(){return this._texture},set:function(m){if(this._texture===m){return}this._texture=m;this.cachedTint=16777215;if(m){if(m.baseTexture.hasLoaded){this._onTextureUpdate()}else{m.once("update",this._onTextureUpdate,this)}}}}});c.prototype._onTextureUpdate=function(){if(this._width){this.scale.x=this._width/this.texture.frame.width}if(this._height){this.scale.y=this._height/this.texture.frame.height}};c.prototype._renderWebGL=function(m){m.setObjectRenderer(m.plugins.sprite);m.plugins.sprite.render(this)};c.prototype.getBounds=function(z){if(!this._currentBounds){var w=this._texture._frame.width;var v=this._texture._frame.height;var u=w*(1-this.anchor.x);var t=w*-this.anchor.x;var s=v*(1-this.anchor.y);var r=v*-this.anchor.y;var x=z||this.worldTransform;var M=x.a;var K=x.b;var I=x.c;var F=x.d;var N=x.tx;var L=x.ty;var J,H,G,D;if(K===0&&I===0){if(M<0){M*=-1}if(F<0){F*=-1}J=M*t+N;H=M*u+N;G=F*r+L;D=F*s+L}else{var C=M*t+I*r+N;var p=F*r+K*t+L;var B=M*u+I*r+N;var o=F*r+K*u+L;var A=M*u+I*s+N;var n=F*s+K*u+L;var y=M*t+I*s+N;var m=F*s+K*t+L;J=C;J=B<J?B:J;J=A<J?A:J;J=y<J?y:J;G=p;G=o<G?o:G;G=n<G?n:G;G=m<G?m:G;H=C;H=B>H?B:H;H=A>H?A:H;H=y>H?y:H;D=p;D=o>D?o:D;D=n>D?n:D;D=m>D?m:D}if(this.children.length){var E=this.containerGetBounds();u=E.x;t=E.x+E.width;s=E.y;r=E.y+E.height;J=(J<u)?J:u;G=(G<s)?G:s;H=(H>t)?H:t;D=(D>r)?D:r}var q=this._bounds;q.x=J;q.width=H-J;q.y=G;q.height=D-G;this._currentBounds=q}return this._currentBounds};c.prototype.getLocalBounds=function(){this._bounds.x=-this._texture._frame.width*this.anchor.x;this._bounds.y=-this._texture._frame.height*this.anchor.y;this._bounds.width=this._texture._frame.width;this._bounds.height=this._texture._frame.height;return this._bounds};c.prototype.containsPoint=function(n){this.worldTransform.applyInverse(n,a);var q=this._texture._frame.width;var m=this._texture._frame.height;var o=-q*this.anchor.x;var p;if(a.x>o&&a.x<o+q){p=-m*this.anchor.y;if(a.y>p&&a.y<p+m){return true}}return false};c.prototype._renderCanvas=function(p){if(this.texture.crop.width<=0||this.texture.crop.height<=0){return}if(this.blendMode!==p.currentBlendMode){p.currentBlendMode=this.blendMode;p.context.globalCompositeOperation=p.blendModes[p.currentBlendMode]}if(this.texture.valid){var q=this._texture,o=this.worldTransform,v,u,m,t;var n=q.baseTexture.resolution/p.resolution;p.context.globalAlpha=this.worldAlpha;if(p.smoothProperty&&p.currentScaleMode!==q.baseTexture.scaleMode){p.currentScaleMode=q.baseTexture.scaleMode;p.context[p.smoothProperty]=(p.currentScaleMode===l.SCALE_MODES.LINEAR)}if(q.rotate){var s=o.a;var r=o.b;o.a=-o.c;o.b=-o.d;o.c=s;o.d=r;m=q.crop.height;t=q.crop.width;v=(q.trim)?q.trim.y-this.anchor.y*q.trim.height:this.anchor.y*-q._frame.height;u=(q.trim)?q.trim.x-this.anchor.x*q.trim.width:this.anchor.x*-q._frame.width}else{m=q.crop.width;t=q.crop.height;v=(q.trim)?q.trim.x-this.anchor.x*q.trim.width:this.anchor.x*-q._frame.width;u=(q.trim)?q.trim.y-this.anchor.y*q.trim.height:this.anchor.y*-q._frame.height}if(p.roundPixels){p.context.setTransform(o.a,o.b,o.c,o.d,(o.tx*p.resolution)|0,(o.ty*p.resolution)|0);v=v|0;u=u|0}else{p.context.setTransform(o.a,o.b,o.c,o.d,o.tx*p.resolution,o.ty*p.resolution)}if(this.tint!==16777215){if(this.cachedTint!==this.tint){this.cachedTint=this.tint;this.tintedTexture=b.getTintedTexture(this,this.tint)}p.context.drawImage(this.tintedTexture,0,0,m*n*p.resolution,t*n*p.resolution,v,u,m*p.resolution,t*p.resolution)}else{p.context.drawImage(q.baseTexture.source,q.crop.x*n,q.crop.y*n,m*n*p.resolution,t*n*p.resolution,v,u,m*p.resolution,t*p.resolution)}}};c.prototype.destroy=function(m,n){g.prototype.destroy.call(this);this.anchor=null;if(m){this._texture.destroy(n)}this._texture=null;this.shader=null};c.fromFrame=function(n){var m=k.TextureCache[n];if(!m){throw new Error('The frameId "'+n+'" does not exist in the texture cache')}return new c(m)};c.fromImage=function(n,m,o){return new c(h.fromImage(n,m,o))}},{"../const":15,"../display/Container":16,"../math":25,"../renderers/canvas/utils/CanvasTinter":40,"../textures/Texture":64,"../utils":68}],60:[function(d,f,c){var h=d("../../renderers/webgl/utils/ObjectRenderer"),b=d("../../renderers/webgl/WebGLRenderer"),a=d("../../const");function g(n){h.call(this,n);this.vertSize=5;this.vertByteSize=this.vertSize*4;this.size=a.SPRITE_BATCH_SIZE;var k=this.size*4*this.vertByteSize;var o=this.size*6;this.vertices=new ArrayBuffer(k);this.positions=new Float32Array(this.vertices);this.colors=new Uint32Array(this.vertices);this.indices=new Uint16Array(o);this.lastIndexCount=0;for(var m=0,l=0;m<o;m+=6,l+=4){this.indices[m+0]=l+0;this.indices[m+1]=l+1;this.indices[m+2]=l+2;this.indices[m+3]=l+0;this.indices[m+4]=l+2;this.indices[m+5]=l+3}this.drawing=false;this.currentBatchSize=0;this.currentBaseTexture=null;this.textures=[];this.blendModes=[];this.shaders=[];this.sprites=[];this.shader=null}g.prototype=Object.create(h.prototype);g.prototype.constructor=g;f.exports=g;b.registerPlugin("sprite",g);g.prototype.onContextChange=function(){var i=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader;this.vertexBuffer=i.createBuffer();this.indexBuffer=i.createBuffer();i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer);i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.indices,i.STATIC_DRAW);i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffer);i.bufferData(i.ARRAY_BUFFER,this.vertices,i.DYNAMIC_DRAW);this.currentBlendMode=99999};g.prototype.render=function(u){var t=u._texture;if(this.currentBatchSize>=this.size){this.flush();this.currentBaseTexture=t.baseTexture}var q=t._uvs;if(!q){return}var j=u.anchor.x;var i=u.anchor.y;var s,r,o,n;if(t.trim){var w=t.trim;r=w.x-j*w.width;s=r+t.crop.width;n=w.y-i*w.height;o=n+t.crop.height}else{s=(t._frame.width)*(1-j);r=(t._frame.width)*-j;o=t._frame.height*(1-i);n=t._frame.height*-i}var k=this.currentBatchSize*this.vertByteSize;var v=u.worldTransform;var B=v.a;var A=v.b;var y=v.c;var x=v.d;var C=v.tx;var z=v.ty;var p=this.colors;var m=this.positions;if(this.renderer.roundPixels){m[k]=B*r+y*n+C|0;m[k+1]=x*n+A*r+z|0;m[k+5]=B*s+y*n+C|0;m[k+6]=x*n+A*s+z|0;m[k+10]=B*s+y*o+C|0;m[k+11]=x*o+A*s+z|0;m[k+15]=B*r+y*o+C|0;m[k+16]=x*o+A*r+z|0}else{m[k]=B*r+y*n+C;m[k+1]=x*n+A*r+z;m[k+5]=B*s+y*n+C;m[k+6]=x*n+A*s+z;m[k+10]=B*s+y*o+C;m[k+11]=x*o+A*s+z;m[k+15]=B*r+y*o+C;m[k+16]=x*o+A*r+z}m[k+2]=q.x0;m[k+3]=q.y0;m[k+7]=q.x1;m[k+8]=q.y1;m[k+12]=q.x2;m[k+13]=q.y2;m[k+17]=q.x3;m[k+18]=q.y3;var l=u.tint;p[k+4]=p[k+9]=p[k+14]=p[k+19]=(l>>16)+(l&65280)+((l&255)<<16)+(u.worldAlpha*255<<24);this.sprites[this.currentBatchSize++]=u};g.prototype.flush=function(){if(this.currentBatchSize===0){return}var s=this.renderer.gl;var u;if(this.currentBatchSize>(this.size*0.5)){s.bufferSubData(s.ARRAY_BUFFER,0,this.vertices)}else{var w=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);s.bufferSubData(s.ARRAY_BUFFER,0,w)}var z,o,k;var v=0;var m=0;var t=null;var n=this.renderer.blendModeManager.currentBlendMode;var l=null;var r=false;var x=false;var y;for(var q=0,p=this.currentBatchSize;q<p;q++){y=this.sprites[q];z=y._texture.baseTexture;o=y.blendMode;k=y.shader||this.shader;r=n!==o;x=l!==k;if(t!==z||r||x){this.renderBatch(t,v,m);m=q;v=0;t=z;if(r){n=o;this.renderer.blendModeManager.setBlendMode(n)}if(x){l=k;u=l.shaders?l.shaders[s.id]:l;if(!u){u=l.getShader(this.renderer)}this.renderer.shaderManager.setShader(u);u.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(true);u.syncUniforms();s.activeTexture(s.TEXTURE0)}}v++}this.renderBatch(t,v,m);this.currentBatchSize=0};g.prototype.renderBatch=function(j,i,l){if(i===0){return}var k=this.renderer.gl;if(!j._glTextures[k.id]){this.renderer.updateTexture(j)}else{k.bindTexture(k.TEXTURE_2D,j._glTextures[k.id])}k.drawElements(k.TRIANGLES,i*6,k.UNSIGNED_SHORT,l*6*2);this.renderer.drawCount++};g.prototype.start=function(){var j=this.renderer.gl;j.bindBuffer(j.ARRAY_BUFFER,this.vertexBuffer);j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var i=this.vertByteSize;j.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,j.FLOAT,false,i,0);j.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,j.FLOAT,false,i,2*4);j.vertexAttribPointer(this.shader.attributes.aColor,4,j.UNSIGNED_BYTE,true,i,4*4)};g.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer);this.renderer.gl.deleteBuffer(this.indexBuffer);this.shader.destroy();this.renderer=null;this.vertices=null;this.positions=null;this.colors=null;this.indices=null;this.vertexBuffer=null;this.indexBuffer=null;this.currentBaseTexture=null;this.drawing=false;this.textures=null;this.blendModes=null;this.shaders=null;this.sprites=null;this.shader=null}},{"../../const":15,"../../renderers/webgl/WebGLRenderer":41,"../../renderers/webgl/utils/ObjectRenderer":55}],61:[function(d,g,b){var c=d("../sprites/Sprite"),f=d("../textures/Texture"),i=d("../math"),a=d("../const");function h(m,k,j){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=j||a.RESOLUTION;this._text=null;this._style=null;var l=f.fromCanvas(this.canvas);l.trim=new i.Rectangle();c.call(this,l);this.text=m;this.style=k}h.prototype=Object.create(c.prototype);h.prototype.constructor=h;g.exports=h;h.fontPropertiesCache={};h.fontPropertiesCanvas=document.createElement("canvas");h.fontPropertiesContext=h.fontPropertiesCanvas.getContext("2d");Object.defineProperties(h.prototype,{width:{get:function(){if(this.dirty){this.updateText()}return this.scale.x*this._texture._frame.width},set:function(j){this.scale.x=j/this._texture._frame.width;this._width=j}},height:{get:function(){if(this.dirty){this.updateText()}return this.scale.y*this._texture._frame.height},set:function(j){this.scale.y=j/this._texture._frame.height;this._height=j}},style:{get:function(){return this._style},set:function(j){j=j||{};j.font=j.font||"bold 20pt Arial";j.fill=j.fill||"black";j.align=j.align||"left";j.stroke=j.stroke||"black";j.strokeThickness=j.strokeThickness||0;j.wordWrap=j.wordWrap||false;j.wordWrapWidth=j.wordWrapWidth||100;j.dropShadow=j.dropShadow||false;j.dropShadowColor=j.dropShadowColor||"#000000";j.dropShadowAngle=j.dropShadowAngle||Math.PI/6;j.dropShadowDistance=j.dropShadowDistance||5;j.padding=j.padding||0;j.textBaseline=j.textBaseline||"alphabetic";j.lineJoin=j.lineJoin||"miter";j.miterLimit=j.miterLimit||10;this._style=j;this.dirty=true}},text:{get:function(){return this._text},set:function(j){j=j.toString()||" ";if(this._text===j){return}this._text=j;this.dirty=true}}});h.prototype.updateText=function(){var k=this._style;this.context.font=k.font;var q=k.wordWrap?this.wordWrap(this._text):this._text;var w=q.split(/(?:\r\n|\r|\n)/);var p=new Array(w.length);var x=0;var n=this.determineFontProperties(k.font);for(var r=0;r<w.length;r++){var s=this.context.measureText(w[r]).width;p[r]=s;x=Math.max(x,s)}var m=x+k.strokeThickness;if(k.dropShadow){m+=k.dropShadowDistance}this.canvas.width=(m+this.context.lineWidth)*this.resolution;var u=this.style.lineHeight||n.fontSize+k.strokeThickness;var v=u*w.length;if(k.dropShadow){v+=k.dropShadowDistance}this.canvas.height=(v+this._style.padding*2)*this.resolution;this.context.scale(this.resolution,this.resolution);if(navigator.isCocoonJS){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}this.context.font=k.font;this.context.strokeStyle=k.stroke;this.context.lineWidth=k.strokeThickness;this.context.textBaseline=k.textBaseline;this.context.lineJoin=k.lineJoin;this.context.miterLimit=k.miterLimit;var o;var l;if(k.dropShadow){this.context.fillStyle=k.dropShadowColor;var t=Math.cos(k.dropShadowAngle)*k.dropShadowDistance;var j=Math.sin(k.dropShadowAngle)*k.dropShadowDistance;for(r=0;r<w.length;r++){o=k.strokeThickness/2;l=(k.strokeThickness/2+r*u)+n.ascent;if(k.align==="right"){o+=x-p[r]}else{if(k.align==="center"){o+=(x-p[r])/2}}if(k.fill){this.context.fillText(w[r],o+t,l+j+this._style.padding)}}}this.context.fillStyle=k.fill;for(r=0;r<w.length;r++){o=k.strokeThickness/2;l=(k.strokeThickness/2+r*u)+n.ascent;if(k.align==="right"){o+=x-p[r]}else{if(k.align==="center"){o+=(x-p[r])/2}}if(k.stroke&&k.strokeThickness){this.context.strokeText(w[r],o,l+this._style.padding)}if(k.fill){this.context.fillText(w[r],o,l+this._style.padding)}}this.updateTexture()};h.prototype.updateTexture=function(){var j=this._texture;j.baseTexture.hasLoaded=true;j.baseTexture.resolution=this.resolution;j.baseTexture.width=this.canvas.width/this.resolution;j.baseTexture.height=this.canvas.height/this.resolution;j.crop.width=j._frame.width=this.canvas.width/this.resolution;j.crop.height=j._frame.height=this.canvas.height/this.resolution;j.trim.x=0;j.trim.y=-this._style.padding;j.trim.width=j._frame.width;j.trim.height=j._frame.height-this._style.padding*2;this._width=this.canvas.width/this.resolution;this._height=this.canvas.height/this.resolution;j.baseTexture.emit("update",j.baseTexture);this.dirty=false};h.prototype.renderWebGL=function(j){if(this.dirty){this.updateText()}c.prototype.renderWebGL.call(this,j)};h.prototype._renderCanvas=function(j){if(this.dirty){this.updateText()}c.prototype._renderCanvas.call(this,j)};h.prototype.determineFontProperties=function(p){var s=h.fontPropertiesCache[p];if(!s){s={};var m=h.fontPropertiesCanvas;var l=h.fontPropertiesContext;l.font=p;var k=Math.ceil(l.measureText("|Mq").width);var r=Math.ceil(l.measureText("M").width);var w=2*r;r=r*1.4|0;m.width=k;m.height=w;l.fillStyle="#f00";l.fillRect(0,0,k,w);l.font=p;l.textBaseline="alphabetic";l.fillStyle="#000";l.fillText("|Mq",0,r);var t=l.getImageData(0,0,k,w).data;var n=t.length;var x=k*4;var q,o;var v=0;var u=false;for(q=0;q<r;q++){for(o=0;o<x;o+=4){if(t[v+o]!==255){u=true;break}}if(!u){v+=x}else{break}}s.ascent=r-q;v=n-x;u=false;for(q=w;q>r;q--){for(o=0;o<x;o+=4){if(t[v+o]!==255){u=true;break}}if(!u){v-=x}else{break}}s.descent=q-r;s.fontSize=s.ascent+s.descent;h.fontPropertiesCache[p]=s}return s};h.prototype.wordWrap=function(q){var t="";var s=q.split("\n");var k=this._style.wordWrapWidth;for(var n=0;n<s.length;n++){var m=k;var p=s[n].split(" ");for(var l=0;l<p.length;l++){var r=this.context.measureText(p[l]).width;var o=r+this.context.measureText(" ").width;if(l===0||o>m){if(l>0){t+="\n"}t+=p[l];m=k-r}else{m-=o;t+=" "+p[l]}}if(n<s.length-1){t+="\n"}}return t};h.prototype.getBounds=function(j){if(this.dirty){this.updateText()}return c.prototype.getBounds.call(this,j)};h.prototype.destroy=function(j){this.context=null;this.canvas=null;this._style=null;this._texture.destroy(j===undefined?true:j)}},{"../const":15,"../math":25,"../sprites/Sprite":59,"../textures/Texture":64}],62:[function(d,f,c){var b=d("../utils"),a=d("../const"),g=d("eventemitter3");function h(k,j,i){g.call(this);this.uuid=b.uuid();this.resolution=i||1;this.width=100;this.height=100;this.realWidth=100;this.realHeight=100;this.scaleMode=j||a.SCALE_MODES.DEFAULT;this.hasLoaded=false;this.isLoading=false;this.source=null;this.premultipliedAlpha=true;this.imageUrl=null;this.isPowerOfTwo=false;this.mipmap=false;this._glTextures=[];if(k){this.loadSource(k)}}h.prototype=Object.create(g.prototype);h.prototype.constructor=h;f.exports=h;h.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width;this.realHeight=this.source.naturalHeight||this.source.height;this.width=this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;this.isPowerOfTwo=b.isPowerOfTwo(this.realWidth,this.realHeight);this.emit("update",this)};h.prototype.loadSource=function(k){var j=this.isLoading;this.hasLoaded=false;this.isLoading=false;if(j&&this.source){this.source.onload=null;this.source.onerror=null}this.source=k;if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height){this._sourceLoaded()}else{if(!k.getContext){this.isLoading=true;var i=this;k.onload=function(){k.onload=null;k.onerror=null;if(!i.isLoading){return}i.isLoading=false;i._sourceLoaded();i.emit("loaded",i)};k.onerror=function(){k.onload=null;k.onerror=null;if(!i.isLoading){return}i.isLoading=false;i.emit("error",i)};if(k.complete&&k.src){this.isLoading=false;k.onload=null;k.onerror=null;if(k.width&&k.height){this._sourceLoaded();if(j){this.emit("loaded",this)}}else{if(j){this.emit("error",this)}}}}}};h.prototype._sourceLoaded=function(){this.hasLoaded=true;this.update()};h.prototype.destroy=function(){if(this.imageUrl){delete b.BaseTextureCache[this.imageUrl];delete b.TextureCache[this.imageUrl];this.imageUrl=null;if(!navigator.isCocoonJS){this.source.src=""}}else{if(this.source&&this.source._pixiId){delete b.BaseTextureCache[this.source._pixiId]}}this.source=null;this.dispose()};h.prototype.dispose=function(){this.emit("dispose",this)};h.prototype.updateSourceImage=function(i){this.source.src=i;this.loadSource(this.source)};h.fromImage=function(j,i,k){var l=b.BaseTextureCache[j];if(i===undefined&&j.indexOf("data:")!==0){i=true}if(!l){var m=new Image();if(i){m.crossOrigin=""}l=new h(m,k);l.imageUrl=j;m.src=j;b.BaseTextureCache[j]=l;l.resolution=b.getResolutionOfUrl(j)}return l};h.fromCanvas=function(i,j){if(!i._pixiId){i._pixiId="canvas_"+b.uuid()}var k=b.BaseTextureCache[i._pixiId];if(!k){k=new h(i,j);b.BaseTextureCache[i._pixiId]=k}return k}},{"../const":15,"../utils":68,eventemitter3:4}],63:[function(c,b,f){var h=c("./BaseTexture"),d=c("./Texture"),a=c("../renderers/webgl/utils/RenderTarget"),i=c("../renderers/webgl/managers/FilterManager"),k=c("../renderers/canvas/utils/CanvasBuffer"),l=c("../math"),m=c("../const"),j=new l.Matrix();function g(s,q,n,p,o){if(!s){throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.")}q=q||100;n=n||100;o=o||m.RESOLUTION;var r=new h();r.width=q;r.height=n;r.resolution=o;r.scaleMode=p||m.SCALE_MODES.DEFAULT;r.hasLoaded=true;d.call(this,r,new l.Rectangle(0,0,q,n));this.width=q;this.height=n;this.resolution=o;this.render=null;this.renderer=s;if(this.renderer.type===m.RENDERER_TYPE.WEBGL){var t=this.renderer.gl;this.textureBuffer=new a(t,this.width,this.height,r.scaleMode,this.resolution);this.baseTexture._glTextures[t.id]=this.textureBuffer.texture;this.filterManager=new i(this.renderer);this.filterManager.onContextChange();this.filterManager.resize(q,n);this.render=this.renderWebGL;this.renderer.currentRenderer.start();this.renderer.currentRenderTarget.activate()}else{this.render=this.renderCanvas;this.textureBuffer=new k(this.width*this.resolution,this.height*this.resolution);this.baseTexture.source=this.textureBuffer.canvas}this.valid=true;this._updateUvs()}g.prototype=Object.create(d.prototype);g.prototype.constructor=g;b.exports=g;g.prototype.resize=function(p,n,o){if(p===this.width&&n===this.height){return}this.valid=(p>0&&n>0);this.width=this._frame.width=this.crop.width=p;this.height=this._frame.height=this.crop.height=n;if(o){this.baseTexture.width=this.width;this.baseTexture.height=this.height}if(!this.valid){return}this.textureBuffer.resize(this.width*this.resolution,this.height*this.resolution);if(this.filterManager){this.filterManager.resize(this.width,this.height)}};g.prototype.clear=function(){if(!this.valid){return}if(this.renderer.type===m.RENDERER_TYPE.WEBGL){this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer)}this.textureBuffer.clear()};g.prototype.renderWebGL=function(u,p,n,t){if(!this.valid){return}t=(t!==undefined)?t:true;this.textureBuffer.transform=p;this.textureBuffer.activate();u.worldAlpha=u.alpha;if(t){u.worldTransform.identity();u.currentBounds=null;var s=u.children;var r,q;for(r=0,q=s.length;r<q;++r){s[r].updateTransform()}}var o=this.renderer.filterManager;this.renderer.filterManager=this.filterManager;this.renderer.renderDisplayObject(u,this.textureBuffer,n);this.renderer.filterManager=o};g.prototype.renderCanvas=function(v,x,t,q){if(!this.valid){return}q=!!q;var o=v.worldTransform;var u=j;u.identity();if(x){u.append(x)}v.worldTransform=u;v.worldAlpha=1;var p=v.children;var s,r;for(s=0,r=p.length;s<r;++s){p[s].updateTransform()}if(t){this.textureBuffer.clear()}v.worldTransform=o;var n=this.textureBuffer.context;var w=this.renderer.resolution;this.renderer.resolution=this.resolution;this.renderer.renderDisplayObject(v,n);this.renderer.resolution=w};g.prototype.destroy=function(){d.prototype.destroy.call(this,true);this.textureBuffer.destroy();if(this.filterManager){this.filterManager.destroy()}this.renderer=null};g.prototype.getImage=function(){var n=new Image();n.src=this.getBase64();return n};g.prototype.getBase64=function(){return this.getCanvas().toDataURL()};g.prototype.getCanvas=function(){if(this.renderer.type===m.RENDERER_TYPE.WEBGL){var s=this.renderer.gl;var q=this.textureBuffer.size.width;var n=this.textureBuffer.size.height;var o=new Uint8Array(4*q*n);s.bindFramebuffer(s.FRAMEBUFFER,this.textureBuffer.frameBuffer);s.readPixels(0,0,q,n,s.RGBA,s.UNSIGNED_BYTE,o);s.bindFramebuffer(s.FRAMEBUFFER,null);var r=new k(q,n);var p=r.context.getImageData(0,0,q,n);p.data.set(o);r.context.putImageData(p,0,0);return r.canvas}else{return this.textureBuffer.canvas}};g.prototype.getPixels=function(){var p,n;if(this.renderer.type===m.RENDERER_TYPE.WEBGL){var q=this.renderer.gl;p=this.textureBuffer.size.width;n=this.textureBuffer.size.height;var o=new Uint8Array(4*p*n);q.bindFramebuffer(q.FRAMEBUFFER,this.textureBuffer.frameBuffer);q.readPixels(0,0,p,n,q.RGBA,q.UNSIGNED_BYTE,o);q.bindFramebuffer(q.FRAMEBUFFER,null);return o}else{p=this.textureBuffer.canvas.width;n=this.textureBuffer.canvas.height;return this.textureBuffer.canvas.getContext("2d").getImageData(0,0,p,n).data}};g.prototype.getPixel=function(n,q){if(this.renderer.type===m.RENDERER_TYPE.WEBGL){var p=this.renderer.gl;var o=new Uint8Array(4);p.bindFramebuffer(p.FRAMEBUFFER,this.textureBuffer.frameBuffer);p.readPixels(n,q,1,1,p.RGBA,p.UNSIGNED_BYTE,o);p.bindFramebuffer(p.FRAMEBUFFER,null);return o}else{return this.textureBuffer.canvas.getContext("2d").getImageData(n,q,1,1).data}}},{"../const":15,"../math":25,"../renderers/canvas/utils/CanvasBuffer":37,"../renderers/webgl/managers/FilterManager":46,"../renderers/webgl/utils/RenderTarget":57,"./BaseTexture":62,"./Texture":64}],64:[function(b,a,d){var f=b("./BaseTexture"),j=b("./VideoBaseTexture"),g=b("./TextureUvs"),k=b("eventemitter3"),h=b("../math"),i=b("../utils");function c(o,p,n,l,m){k.call(this);this.noFrame=false;if(!p){this.noFrame=true;p=new h.Rectangle(0,0,1,1)}if(o instanceof c){o=o.baseTexture}this.baseTexture=o;this._frame=p;this.trim=l;this.valid=false;this.requiresUpdate=false;this._uvs=null;this.width=0;this.height=0;this.crop=n||p;this.rotate=!!m;if(o.hasLoaded){if(this.noFrame){p=new h.Rectangle(0,0,o.width,o.height);o.on("update",this.onBaseTextureUpdated,this)}this.frame=p}else{o.once("loaded",this.onBaseTextureLoaded,this)}}c.prototype=Object.create(k.prototype);c.prototype.constructor=c;a.exports=c;Object.defineProperties(c.prototype,{frame:{get:function(){return this._frame},set:function(l){this._frame=l;this.noFrame=false;this.width=l.width;this.height=l.height;if(!this.trim&&!this.rotate&&(l.x+l.width>this.baseTexture.width||l.y+l.height>this.baseTexture.height)){throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this)}this.valid=l&&l.width&&l.height&&this.baseTexture.hasLoaded;if(this.trim){this.width=this.trim.width;this.height=this.trim.height;this._frame.width=this.trim.width;this._frame.height=this.trim.height}else{this.crop=l}if(this.valid){this._updateUvs()}}}});c.prototype.update=function(){this.baseTexture.update()};c.prototype.onBaseTextureLoaded=function(l){if(this.noFrame){this.frame=new h.Rectangle(0,0,l.width,l.height)}else{this.frame=this._frame}this.emit("update",this)};c.prototype.onBaseTextureUpdated=function(l){this._frame.width=l.width;this._frame.height=l.height;this.emit("update",this)};c.prototype.destroy=function(l){if(l){this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated);this.baseTexture.off("loaded",this.onBaseTextureLoaded);this.valid=false};c.prototype.clone=function(){return new c(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)};c.prototype._updateUvs=function(){if(!this._uvs){this._uvs=new g()}this._uvs.set(this.crop,this.baseTexture,this.rotate)};c.fromImage=function(m,l,n){var o=i.TextureCache[m];if(!o){o=new c(f.fromImage(m,l,n));i.TextureCache[m]=o}return o};c.fromFrame=function(m){var l=i.TextureCache[m];if(!l){throw new Error('The frameId "'+m+'" does not exist in the texture cache')}return l};c.fromCanvas=function(l,m){return new c(f.fromCanvas(l,m))};c.fromVideo=function(m,l){if(typeof m==="string"){return c.fromVideoUrl(m,l)}else{return new c(j.fromVideo(m,l))}};c.fromVideoUrl=function(m,l){return new c(j.fromUrl(m,l))};c.addTextureToCache=function(l,m){i.TextureCache[m]=l};c.removeTextureFromCache=function(m){var l=i.TextureCache[m];delete i.TextureCache[m];delete i.BaseTextureCache[m];return l};c.EMPTY=new c(new f())},{"../math":25,"../utils":68,"./BaseTexture":62,"./TextureUvs":65,"./VideoBaseTexture":66,eventemitter3:4}],65:[function(b,c,a){function d(){this.x0=0;this.y0=0;this.x1=1;this.y1=0;this.x2=1;this.y2=1;this.x3=0;this.y3=1}c.exports=d;d.prototype.set=function(j,i,g){var f=i.width;var h=i.height;if(g){this.x0=(j.x+j.height)/f;this.y0=j.y/h;this.x1=(j.x+j.height)/f;this.y1=(j.y+j.width)/h;this.x2=j.x/f;this.y2=(j.y+j.width)/h;this.x3=j.x/f;this.y3=j.y/h}else{this.x0=j.x/f;this.y0=j.y/h;this.x1=(j.x+j.width)/f;this.y1=j.y/h;this.x2=(j.x+j.width)/f;this.y2=(j.y+j.height)/h;this.x3=j.x/f;this.y3=(j.y+j.height)/h}}},{}],66:[function(d,f,c){var h=d("./BaseTexture"),b=d("../utils");function a(j,i){if(!j){throw new Error("No video source element specified.")}if((j.readyState===j.HAVE_ENOUGH_DATA||j.readyState===j.HAVE_FUTURE_DATA)&&j.width&&j.height){j.complete=true}h.call(this,j,i);this.autoUpdate=false;this._onUpdate=this._onUpdate.bind(this);this._onCanPlay=this._onCanPlay.bind(this);if(!j.complete){j.addEventListener("canplay",this._onCanPlay);j.addEventListener("canplaythrough",this._onCanPlay);j.addEventListener("play",this._onPlayStart.bind(this));j.addEventListener("pause",this._onPlayStop.bind(this))}this.__loaded=false}a.prototype=Object.create(h.prototype);a.prototype.constructor=a;f.exports=a;a.prototype._onUpdate=function(){if(this.autoUpdate){window.requestAnimationFrame(this._onUpdate);this.update()}};a.prototype._onPlayStart=function(){if(!this.autoUpdate){window.requestAnimationFrame(this._onUpdate);this.autoUpdate=true}};a.prototype._onPlayStop=function(){this.autoUpdate=false};a.prototype._onCanPlay=function(){this.hasLoaded=true;if(this.source){this.source.removeEventListener("canplay",this._onCanPlay);this.source.removeEventListener("canplaythrough",this._onCanPlay);this.width=this.source.videoWidth;this.height=this.source.videoHeight;this.source.play();if(!this.__loaded){this.__loaded=true;this.emit("loaded",this)}}};a.prototype.destroy=function(){if(this.source&&this.source._pixiId){delete b.BaseTextureCache[this.source._pixiId];delete this.source._pixiId}h.prototype.destroy.call(this)};a.fromVideo=function(k,i){if(!k._pixiId){k._pixiId="video_"+b.uuid()}var j=b.BaseTextureCache[k._pixiId];if(!j){j=new a(k,i);b.BaseTextureCache[k._pixiId]=j}return j};a.fromUrl=function(j,l){var m=document.createElement("video");if(Array.isArray(j)){for(var k=0;k<j.length;++k){m.appendChild(g(j.src||j,j.mime))}}else{m.appendChild(g(j.src||j,j.mime))}m.load();m.play();return a.fromVideo(m,l)};a.fromUrls=a.fromUrl;function g(k,i){if(!i){i="video/"+k.substr(k.lastIndexOf(".")+1)}var j=document.createElement("source");j.src=k;j.type=i;return j}},{"../utils":68,"./BaseTexture":62}],67:[function(c,d,b){var a=d.exports={};a.Triangulate=function(o){var B=true;var q=o.length>>1;if(q<3){return[]}var y=[];var m=[];for(var w=0;w<q;w++){m.push(w)}w=0;var t=q;while(t>3){var u=m[(w+0)%t];var s=m[(w+1)%t];var r=m[(w+2)%t];var l=o[2*u],h=o[2*u+1];var z=o[2*s],x=o[2*s+1];var g=o[2*r],f=o[2*r+1];var k=false;if(a._convex(l,h,z,x,g,f,B)){k=true;for(var v=0;v<t;v++){var A=m[v];if(A===u||A===s||A===r){continue}if(a._PointInTriangle(o[2*A],o[2*A+1],l,h,z,x,g,f)){k=false;break}}}if(k){y.push(u,s,r);m.splice((w+1)%t,1);t--;w=0}else{if(w++>3*t){if(B){y=[];m=[];for(w=0;w<q;w++){m.push(w)}w=0;t=q;B=false}else{return null}}}}y.push(m[0],m[1],m[2]);return y};a._PointInTriangle=function(t,s,p,o,C,B,l,j){var i=l-p;var h=j-o;var n=C-p;var m=B-o;var A=t-p;var y=s-o;var z=i*i+h*h;var x=i*n+h*m;var w=i*A+h*y;var g=n*n+m*m;var f=n*A+m*y;var k=1/(z*g-x*x);var r=(g*w-x*f)*k;var q=(z*f-x*w)*k;return(r>=0)&&(q>=0)&&(r+q<1)};a._convex=function(i,h,k,j,f,l,g){return((h-j)*(f-k)+(k-i)*(l-j)>=0)===g}},{}],68:[function(d,f,c){var a=d("../const");var b=f.exports={_uid:0,_saidHello:false,pluginTarget:d("./pluginTarget"),PolyK:d("./PolyK"),async:d("async"),uuid:function(){return ++b._uid},hex2rgb:function(h,g){g=g||[];g[0]=(h>>16&255)/255;g[1]=(h>>8&255)/255;g[2]=(h&255)/255;return g},hex2string:function(g){g=g.toString(16);g="000000".substr(0,6-g.length)+g;return"#"+g},rgb2hex:function(g){return((g[0]*255<<16)+(g[1]*255<<8)+g[2]*255)},canUseNewCanvasBlendModes:function(){if(typeof document==="undefined"){return false}var h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/";var l="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";var g=new Image();g.src=h+"AP804Oa6"+l;var m=new Image();m.src=h+"/wCKxvRF"+l;var i=document.createElement("canvas");i.width=6;i.height=1;var j=i.getContext("2d");j.globalCompositeOperation="multiply";j.drawImage(g,0,0);j.drawImage(m,2,0);var k=j.getImageData(2,0,1,1).data;return(k[0]===255&&k[1]===0&&k[2]===0)},getNextPowerOfTwo:function(h){if(h>0&&(h&(h-1))===0){return h}else{var g=1;while(g<h){g<<=1}return g}},isPowerOfTwo:function(h,g){return(h>0&&(h&(h-1))===0&&g>0&&(g&(g-1))===0)},getResolutionOfUrl:function(h){var g=a.RETINA_PREFIX.exec(h);if(g){return parseFloat(g[1])}return 1},sayHello:function(h){if(b._saidHello){return}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var g=["\n %c %c %c Pixi.js "+a.VERSION+" -  "+h+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,g)}else{if(window.console){window.console.log("Pixi.js "+a.VERSION+" - "+h+" - http://www.pixijs.com/")}}b._saidHello=true},isWebGLSupported:function(){var g={stencil:true};try{if(!window.WebGLRenderingContext){return false}var h=document.createElement("canvas"),j=h.getContext("webgl",g)||h.getContext("experimental-webgl",g);return !!(j&&j.getContextAttributes().stencil)}catch(i){return false}},TextureCache:{},BaseTextureCache:{}}},{"../const":15,"./PolyK":67,"./pluginTarget":69,async:1}],69:[function(d,f,c){function a(g){g.__plugins={};g.registerPlugin=function(i,h){g.__plugins[i]=h};g.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var h in g.__plugins){this.plugins[h]=new (g.__plugins[h])(this)}};g.prototype.destroyPlugins=function(){for(var h in this.plugins){this.plugins[h].destroy();this.plugins[h]=null}this.plugins=null}}f.exports={mixin:function b(g){a(g)}}},{}],70:[function(d,f,c){var b=d("./core"),h=d("./mesh"),g=d("./extras"),a=d("./core/utils");b.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")};b.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")};Object.defineProperties(b,{Stage:{get:function(){console.warn("You do not need to use a PIXI Stage any more, you can simply render any container.");return b.Container}},DisplayObjectContainer:{get:function(){console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on.");return b.Container}},Strip:{get:function(){console.warn("The Strip class has been renamed to Mesh, please use Mesh from now on.");return h.Mesh}},MovieClip:{get:function(){console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on.");return g.MovieClip}},TilingSprite:{get:function(){console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.");return g.TilingSprite}},TextureCache:{get:function(){console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.");return a.TextureCache}},BitmapText:{get:function(){console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.");return g.BitmapText}},blendModes:{get:function(){console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.");return b.BLEND_MODES}},scaleModes:{get:function(){console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.");return b.SCALE_MODES}}});b.Sprite.prototype.setTexture=function(i){this.texture=i;console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")};g.BitmapText.prototype.setText=function(i){this.text=i;console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")};b.Text.prototype.setText=function(i){this.text=i;console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")};b.Text.prototype.setStyle=function(i){this.style=i;console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")};b.Texture.prototype.setFrame=function(i){this.frame=i;console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")}},{"./core":22,"./core/utils":68,"./extras":77,"./mesh":118}],71:[function(c,d,b){var a=c("../core");function f(h,g){a.Container.call(this);this.textWidth=0;this.textHeight=0;this._glyphs=[];this._font={tint:g.tint!==undefined?g.tint:16777215,align:g.align||"left",name:null,size:0};this.font=g.font;this._text=h;this.maxWidth=0;this.dirty=false;this.updateText()}f.prototype=Object.create(a.Container.prototype);f.prototype.constructor=f;d.exports=f;Object.defineProperties(f.prototype,{tint:{get:function(){return this._font.tint},set:function(g){this._font.tint=(typeof g==="number"&&g>=0)?g:16777215;this.dirty=true}},align:{get:function(){return this._font.align},set:function(g){this._font.align=g;this.dirty=true}},font:{get:function(){return this._font},set:function(g){if(typeof g==="string"){g=g.split(" ");this._font.name=g.length===1?g[0]:g.slice(1).join(" ");this._font.size=g.length>=2?parseInt(g[0],10):f.fonts[this._font.name].size}else{this._font.name=g.name;this._font.size=typeof g.size==="number"?g.size:parseInt(g.size,10)}this.dirty=true}},text:{get:function(){return this._text},set:function(g){this._text=g;this.dirty=true}}});f.prototype.updateText=function(){var v=f.fonts[this._font.name];var k=new a.math.Point();var l=null;var q=[];var p=0;var r=0;var y=[];var o=0;var w=this._font.size/v.size;var m=-1;for(var t=0;t<this.text.length;t++){var h=this.text.charCodeAt(t);m=/(\s)/.test(this.text.charAt(t))?t:m;if(/(?:\r\n|\r|\n)/.test(this.text.charAt(t))){y.push(p);r=Math.max(r,p);o++;k.x=0;k.y+=v.lineHeight;l=null;continue}if(m!==-1&&this.maxWidth>0&&k.x*w>this.maxWidth){q.splice(m,t-m);t=m;m=-1;y.push(p);r=Math.max(r,p);o++;k.x=0;k.y+=v.lineHeight;l=null;continue}var g=v.chars[h];if(!g){continue}if(l&&g.kerning[l]){k.x+=g.kerning[l]}q.push({texture:g.texture,line:o,charCode:h,position:new a.math.Point(k.x+g.xOffset,k.y+g.yOffset)});p=k.x+(g.texture.width+g.xOffset);k.x+=g.xAdvance;l=h}y.push(p);r=Math.max(r,p);var s=[];for(t=0;t<=o;t++){var x=0;if(this._font.align==="right"){x=r-y[t]}else{if(this._font.align==="center"){x=(r-y[t])/2}}s.push(x)}var j=q.length;var n=this.tint;for(t=0;t<j;t++){var u=this._glyphs[t];if(u){u.texture=q[t].texture}else{u=new a.Sprite(q[t].texture);this._glyphs.push(u)}u.position.x=(q[t].position.x+s[q[t].line])*w;u.position.y=q[t].position.y*w;u.scale.x=u.scale.y=w;u.tint=n;if(!u.parent){this.addChild(u)}}for(t=j;t<this._glyphs.length;++t){this.removeChild(this._glyphs[t])}this.textWidth=r*w;this.textHeight=(k.y+v.lineHeight)*w};f.prototype.updateTransform=function(){if(this.dirty){this.updateText();this.dirty=false}this.containerUpdateTransform()};f.fonts={}},{"../core":22}],72:[function(c,d,b){var a=c("../core"),g=c("../ticker");function f(h){a.Sprite.call(this,h[0]);this._textures=h;this.animationSpeed=1;this.loop=true;this.onComplete=null;this._currentTime=0;this.playing=false}f.prototype=Object.create(a.Sprite.prototype);f.prototype.constructor=f;d.exports=f;Object.defineProperties(f.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(h){this._textures=h;this.texture=this._textures[Math.floor(this._currentTime)%this._textures.length]}},currentFrame:{get:function(){return Math.floor(this._currentTime)%this._texture.length}}});f.prototype.stop=function(){if(!this.playing){return}this.playing=false;g.shared.remove(this.update,this)};f.prototype.play=function(){if(this.playing){return}this.playing=true;g.shared.add(this.update,this)};f.prototype.gotoAndStop=function(i){this.stop();this._currentTime=i;var h=Math.floor(this._currentTime);this._texture=this._textures[h%this._textures.length]};f.prototype.gotoAndPlay=function(h){this._currentTime=h;this.play()};f.prototype.update=function(h){this._currentTime+=this.animationSpeed*h;var i=Math.floor(this._currentTime);if(i<0){if(this.loop){this._currentTime+=this._textures.length;this._texture=this._textures[this._currentTime]}else{this.gotoAndStop(0);if(this.onComplete){this.onComplete()}}}else{if(this.loop||i<this._textures.length){this._texture=this._textures[i%this._textures.length]}else{if(i>=this._textures.length){this.gotoAndStop(this.textures.length-1);if(this.onComplete){this.onComplete()}}}}};f.prototype.destroy=function(){this.stop();a.Sprite.prototype.destroy.call(this)};f.fromFrames=function(k){var h=[];for(var j=0;j<k.length;++j){h.push(new a.Texture.fromFrame(k[j]))}return new f(h)};f.fromImages=function(j){var h=[];for(var k=0;k<j.length;++k){h.push(new a.Texture.fromImage(j[k]))}return new f(h)}},{"../core":22,"../ticker":125}],73:[function(c,d,b){var a=c("../core"),g=new a.Point();function f(j,i,h){a.Sprite.call(this,j);this.tileScale=new a.math.Point(1,1);this.tilePosition=new a.math.Point(0,0);this._width=i||100;this._height=h||100;this._uvs=new a.TextureUvs();this._canvasPattern=null;this.shader=new a.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   coord /= uFrame.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","void main(void){","   vec2 coord = fract(vTextureCoord);","   coord *= uFrame.zw;","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]}})}f.prototype=Object.create(a.Sprite.prototype);f.prototype.constructor=f;d.exports=f;Object.defineProperties(f.prototype,{width:{get:function(){return this._width},set:function(h){this._width=h}},height:{get:function(){return this._height},set:function(h){this._height=h}}});f.prototype._onTextureUpdate=function(){return};f.prototype._renderWebGL=function(m){var l=this._texture;if(!l||!l._uvs){return}var n=l._uvs,j=l._frame.width,i=l._frame.height,h=l.baseTexture.width,k=l.baseTexture.height;l._uvs=this._uvs;l._frame.width=this.width;l._frame.height=this.height;this.shader.uniforms.uFrame.value[0]=n.x0+(0.5/h);this.shader.uniforms.uFrame.value[1]=n.y0+(0.5/k);this.shader.uniforms.uFrame.value[2]=n.x1-n.x0+(-1/h);this.shader.uniforms.uFrame.value[3]=n.y2-n.y0+(-1/k);this.shader.uniforms.uTransform.value[0]=(this.tilePosition.x%h)/this._width;this.shader.uniforms.uTransform.value[1]=(this.tilePosition.y%k)/this._height;this.shader.uniforms.uTransform.value[2]=(h/this._width)*this.tileScale.x;this.shader.uniforms.uTransform.value[3]=(k/this._height)*this.tileScale.y;m.setObjectRenderer(m.plugins.sprite);m.plugins.sprite.render(this);l._uvs=n;l._frame.width=j;l._frame.height=i};f.prototype._renderCanvas=function(n){var o=this._texture;if(!o.baseTexture.hasLoaded){return}var k=n.context,l=this.worldTransform,m=n.resolution,i=o.baseTexture,j=this.tilePosition.x%i.width,h=this.tilePosition.y%i.height;if(!this._canvasPattern){var p=new a.CanvasBuffer(o._frame.width,o._frame.height);p.context.drawImage(i.source,-o._frame.x,-o._frame.y);this._canvasPattern=p.context.createPattern(p.canvas,"repeat")}k.globalAlpha=this.worldAlpha;k.setTransform(l.a*m,l.b*m,l.c*m,l.d*m,l.tx*m,l.ty*m);k.scale(this.tileScale.x,this.tileScale.y);k.translate(j+(this.anchor.x*-this._width),h+(this.anchor.y*-this._height));if(this.blendMode!==n.currentBlendMode){n.currentBlendMode=this.blendMode;k.globalCompositeOperation=n.blendModes[n.currentBlendMode]}k.fillStyle=this._canvasPattern;k.fillRect(-j,-h,this._width/this.tileScale.x,this._height/this.tileScale.y)};f.prototype.getBounds=function(){var r=this._width;var q=this._height;var p=r*(1-this.anchor.x);var o=r*-this.anchor.x;var n=q*(1-this.anchor.y);var m=q*-this.anchor.y;var s=this.worldTransform;var F=s.a;var D=s.b;var C=s.c;var A=s.d;var G=s.tx;var E=s.ty;var w=F*o+C*m+G;var k=A*m+D*o+E;var v=F*p+C*m+G;var j=A*m+D*p+E;var u=F*p+C*n+G;var i=A*n+D*p+E;var t=F*o+C*n+G;var h=A*n+D*o+E;var B,z,y,x;B=w;B=v<B?v:B;B=u<B?u:B;B=t<B?t:B;y=k;y=j<y?j:y;y=i<y?i:y;y=h<y?h:y;z=w;z=v>z?v:z;z=u>z?u:z;z=t>z?t:z;x=k;x=j>x?j:x;x=i>x?i:x;x=h>x?h:x;var l=this._bounds;l.x=B;l.width=z-B;l.y=y;l.height=x-y;this._currentBounds=l;return l};f.prototype.containsPoint=function(i){this.worldTransform.applyInverse(i,g);var l=this._width;var h=this._height;var j=-l*this.anchor.x;var k;if(g.x>j&&g.x<j+l){k=-h*this.anchor.y;if(g.y>k&&g.y<k+h){return true}}return false};f.prototype.destroy=function(){a.Sprite.prototype.destroy.call(this);this.tileScale=null;this._tileScaleOffset=null;this.tilePosition=null;this._uvs=null};f.fromFrame=function(k,i,h){var j=a.utils.TextureCache[k];if(!j){throw new Error('The frameId "'+k+'" does not exist in the texture cache '+this)}return new f(j,i,h)};f.fromImage=function(j,l,h,i,k){return new f(a.Texture.fromImage(j,i,k),l,h)}},{"../core":22}],74:[function(f,g,d){var b=f("../core"),c=b.DisplayObject,a=new b.Matrix();c.prototype._cacheAsBitmap=false;c.prototype._originalRenderWebGL=null;c.prototype._originalRenderCanvas=null;c.prototype._originalUpdateTransform=null;c.prototype._originalHitTest=null;c.prototype._cachedSprite=null;Object.defineProperties(c.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(h){if(this._cacheAsBitmap===h){return}this._cacheAsBitmap=h;if(h){this._originalRenderWebGL=this.renderWebGL;this._originalRenderCanvas=this.renderCanvas;this._originalUpdateTransform=this.updateTransform;this._originalGetBounds=this.getBounds;this._originalContainesPoint=this.containsPoint;this.renderWebGL=this._renderCachedWebGL;this.renderCanvas=this._renderCachedCanvas}else{if(this._cachedSprite){this._destroyCachedDisplayObject()}this.renderWebGL=this._originalRenderWebGL;this.renderCanvas=this._originalRenderCanvas;this.getBounds=this._originalGetBounds;this.updateTransform=this._originalUpdateTransform;this.containsPoint=this._originalContainsPoint}}}});c.prototype._renderCachedWebGL=function(h){this._initCachedDisplayObject(h);this._cachedSprite.worldAlpha=this.worldAlpha;h.setObjectRenderer(h.plugins.sprite);h.plugins.sprite.render(this._cachedSprite)};c.prototype._initCachedDisplayObject=function(n){if(this._cachedSprite){return}n.currentRenderer.flush();var l=this.getLocalBounds().clone();if(this._filters){var o=this._filters[0].padding;l.x-=o;l.y-=o;l.width+=o*2;l.height+=o*2}var k=n.currentRenderTarget;var i=n.filterManager.filterStack;var j=new b.RenderTexture(n,l.width|0,l.height|0);var h=a;h.tx=-l.x;h.ty=-l.y;this.renderWebGL=this._originalRenderWebGL;j.render(this,h,true,true);n.setRenderTarget(k);n.filterManager.filterStack=i;this.renderWebGL=this._renderCachedWebGL;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._cachedSprite=new b.Sprite(j);this._cachedSprite.worldTransform=this.worldTransform;this._cachedSprite.anchor.x=-(l.x/l.width);this._cachedSprite.anchor.y=-(l.y/l.height);this.updateTransform();this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)};c.prototype._renderCachedCanvas=function(h){this._initCachedDisplayObjectCanvas(h);this._cachedSprite.worldAlpha=this.worldAlpha;this._cachedSprite.renderCanvas(h)};c.prototype._initCachedDisplayObjectCanvas=function(l){if(this._cachedSprite){return}var k=this.getLocalBounds();var j=l.context;var i=new b.RenderTexture(l,k.width|0,k.height|0);var h=a;h.tx=-k.x;h.ty=-k.y;this.renderCanvas=this._originalRenderCanvas;i.render(this,h,true);l.context=j;this.renderCanvas=this._renderCachedCanvas;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._cachedSprite=new b.Sprite(i);this._cachedSprite.worldTransform=this.worldTransform;this._cachedSprite.anchor.x=-(k.x/k.width);this._cachedSprite.anchor.y=-(k.y/k.height);this.updateTransform();this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)};c.prototype._getCachedBounds=function(){this._cachedSprite._currentBounds=null;return this._cachedSprite.getBounds()};c.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy();this._cachedSprite=null}},{"../core":22}],75:[function(c,d,b){var a=c("../core");a.DisplayObject.prototype.name=null;a.Container.prototype.getChildByName=function(f){for(var g=0;g<this.children.length;g++){if(this.children[g].name===f){return this.children[g]}}return null}},{"../core":22}],76:[function(c,d,b){var a=c("../core");a.DisplayObject.prototype.getGlobalPosition=function(f){f=f||new a.Point();if(this.parent){this.displayObjectUpdateTransform();f.x=this.worldTransform.tx;f.y=this.worldTransform.ty}else{f.x=this.position.x;f.y=this.position.y}return f}},{"../core":22}],77:[function(b,c,a){b("./cacheAsBitmap");b("./getChildByName");b("./getGlobalPosition");c.exports={MovieClip:b("./MovieClip"),TilingSprite:b("./TilingSprite"),BitmapText:b("./BitmapText")}},{"./BitmapText":71,"./MovieClip":72,"./TilingSprite":73,"./cacheAsBitmap":74,"./getChildByName":75,"./getGlobalPosition":76}],78:[function(c,d,b){var a=c("../../core");function f(){a.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}f.prototype=Object.create(a.AbstractFilter.prototype);f.prototype.constructor=f;d.exports=f;Object.defineProperties(f.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(g){this.uniforms.pixelSize.value=g}}})},{"../../core":22}],79:[function(c,d,b){var a=c("../../core"),g=c("../blur/BlurXFilter"),h=c("../blur/BlurYFilter");function f(){a.AbstractFilter.call(this);this.blurXFilter=new g();this.blurYFilter=new h();this.defaultFilter=new a.AbstractFilter()}f.prototype=Object.create(a.AbstractFilter.prototype);f.prototype.constructor=f;d.exports=f;f.prototype.applyFilter=function(l,j,i){var k=l.filterManager.getRenderTarget(true);this.defaultFilter.applyFilter(l,j,i);this.blurXFilter.applyFilter(l,j,k);l.blendModeManager.setBlendMode(a.BLEND_MODES.SCREEN);this.blurYFilter.applyFilter(l,k,i);l.blendModeManager.setBlendMode(a.BLEND_MODES.NORMAL);l.filterManager.returnRenderTarget(k)};Object.defineProperties(f.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(i){this.blurXFilter.blur=this.blurYFilter.blur=i}},blurX:{get:function(){return this.blurXFilter.blur},set:function(i){this.blurXFilter.blur=i}},blurY:{get:function(){return this.blurYFilter.blur},set:function(i){this.blurYFilter.blur=i}}})},{"../../core":22,"../blur/BlurXFilter":82,"../blur/BlurYFilter":83}],80:[function(c,d,b){var a=c("../../core");function f(h,g){a.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:h||0},dirY:{type:"1f",value:g||0}});this.defaultFilter=new a.AbstractFilter();this.passes=1;this.dirX=h||0;this.dirY=g||0;this.strength=4}f.prototype=Object.create(a.AbstractFilter.prototype);f.prototype.constructor=f;d.exports=f;f.prototype.applyFilter=function(n,j,h,g){var l=this.getShader(n);this.uniforms.strength.value=this.strength/4/this.passes*(j.frame.width/j.size.width);if(this.passes===1){n.filterManager.applyFilter(l,j,h,g)}else{var m=n.filterManager.getRenderTarget(true);n.filterManager.applyFilter(l,j,m,g);for(var k=0;k<this.passes-2;k++){n.filterManager.applyFilter(l,m,m,g)}n.filterManager.applyFilter(l,m,h,g);n.filterManager.returnRenderTarget(m)}};Object.defineProperties(f.prototype,{blur:{get:function(){return this.strength},set:function(g){this.padding=g*0.5;this.strength=g}},dirX:{get:function(){return this.dirX},set:function(g){this.uniforms.dirX.value=g}},dirY:{get:function(){return this.dirY},set:function(g){this.uniforms.dirY.value=g}}})},{"../../core":22}],81:[function(c,d,b){var a=c("../../core"),f=c("./BlurDirFilter");function g(){a.AbstractFilter.call(this);this.defaultFilter=new a.AbstractFilter();this.blurFilters=[new f(1,0),new f(-1,0),new f(0,1),new f(0,-1),new f(0.7,0.7),new f(-0.7,0.7),new f(0.7,-0.7),new f(-0.7,-0.7)]}g.prototype=Object.create(a.AbstractFilter.prototype);g.prototype.constructor=g;d.exports=g;g.prototype.applyFilter=function(k,i,h){var j=k.filterManager.getRenderTarget(true);for(var l=0;l<this.blurFilters.length;l++){this.blurFilters[l].applyFilter(k,i,j)}this.defaultFilter.applyFilter(k,j,h);k.filterManager.returnRenderTarget(j)};Object.defineProperties(g.prototype,{blur:{get:function(){return this.blurFilters[0].blur},set:function(j){this.padding=j*0.5;for(var h=0;h<this.blurFilters.length;h++){this.blurFilters[h].blur=j}}},passes:{get:function(){return this.blurFilters[0].passes},set:function(j){for(var h=0;h<this.blurFilters.length;h++){this.blurFilters[h].passes=j}}},blurX:{get:function(){return this.blurFilters[0].blur},set:function(h){this.blurFilters[0].blur=h;this.blurFilters[1].blur=h;this.blurFilters[4].blur=h*this.blurFilters[2].blur;this.blurFilters[5].blur=h*this.blurFilters[2].blur;this.blurFilters[6].blur=h*this.blurFilters[3].blur;this.blurFilters[7].blur=h*this.blurFilters[3].blur}},blurY:{get:function(){return this.blurYFilter.blur},set:function(h){this.blurFilters[2].blur=h;this.blurFilters[3].blur=h;this.blurFilters[4].blur=h*this.blurFilters[0].blur;this.blurFilters[5].blur=h*this.blurFilters[0].blur;this.blurFilters[6].blur=h*this.blurFilters[1].blur;this.blurFilters[7].blur=h*this.blurFilters[1].blur}}})},{"../../core":22,"./BlurDirFilter":80}],82:[function(c,d,b){var a=c("../../core");function f(){a.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}});this.passes=1;this.strength=4}f.prototype=Object.create(a.AbstractFilter.prototype);f.prototype.constructor=f;d.exports=f;f.prototype.applyFilter=function(o,p,g,m){var n=this.getShader(o);this.uniforms.strength.value=this.strength/4/this.passes*(p.frame.width/p.size.width);if(this.passes===1){o.filterManager.applyFilter(n,p,g,m)}else{var l=o.filterManager.getRenderTarget(true);var k=p;var h=l;for(var j=0;j<this.passes-1;j++){o.filterManager.applyFilter(n,k,h,m);var q=h;h=k;k=q}o.filterManager.applyFilter(n,k,g,m);o.filterManager.returnRenderTarget(l)}};Object.defineProperties(f.prototype,{blur:{get:function(){return this.strength},set:function(g){this.padding=g*0.5;this.strength=g}}})},{"../../core":22}],83:[function(c,d,b){var a=c("../../core");function f(){a.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}});this.passes=1;this.strength=4}f.prototype=Object.create(a.AbstractFilter.prototype);f.prototype.constructor=f;d.exports=f;f.prototype.applyFilter=function(o,p,g,m){var n=this.getShader(o);this.uniforms.strength.value=this.strength/4/this.passes*(p.frame.height/p.size.height);if(this.passes===1){o.filterManager.applyFilter(n,p,g,m)}else{var l=o.filterManager.getRenderTarget(true);var k=p;var h=l;for(var j=0;j<this.passes-1;j++){o.filterManager.applyFilter(n,k,h,m);var q=h;h=k;k=q}o.filterManager.applyFilter(n,k,g,m);o.filterManager.returnRenderTarget(l)}};Object.defineProperties(f.prototype,{blur:{get:function(){return this.strength},set:function(g){this.padding=g*0.5;this.strength=g}}})},{"../../core":22}],84:[function(d,f,c){var b=d("../../core");function a(){b.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{delta:{type:"v2",value:{x:0.1,y:0}}})}a.prototype=Object.create(b.AbstractFilter.prototype);a.prototype.constructor=a;f.exports=a},{"../../core":22}],85:[function(c,f,b){var a=c("../../core");function d(){a.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float m[24];\n\nuniform vec4 d;\n\nvoid main(void)\n{\n    \n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n\tgl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[3] * c.a + m[4];\n\tgl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[8] * c.a + m[9];\n\tgl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[13] * c.a + m[14];\n\tgl_FragColor.a = c.a;\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}})}d.prototype=Object.create(a.AbstractFilter.prototype);d.prototype.constructor=d;f.exports=d;d.prototype._loadMatrix=function(h,g){g=!!g;var i=h;if(g){this._multiply(i,this.uniforms.m.value,h);i=this._colorMatrix(i)}this.uniforms.m.value=i};d.prototype._multiply=function(i,h,g){i[0]=h[0]*g[0]+h[1]*g[5]+h[2]*g[10]+h[3]*g[15]+h[4]*g[20];i[1]=h[0]*g[1]+h[1]*g[6]+h[2]*g[11]+h[3]*g[16]+h[4]*g[21];i[2]=h[0]*g[2]+h[1]*g[7]+h[2]*g[12]+h[3]*g[17]+h[4]*g[22];i[3]=h[0]*g[3]+h[1]*g[8]+h[2]*g[13]+h[3]*g[18]+h[4]*g[23];i[4]=h[0]*g[4]+h[1]*g[9]+h[2]*g[14]+h[3]*g[19]+h[4]*g[24];i[5]=h[5]*g[0]+h[6]*g[5]+h[7]*g[10]+h[8]*g[15]+h[9]*g[20];i[6]=h[5]*g[1]+h[6]*g[6]+h[7]*g[11]+h[8]*g[16]+h[9]*g[21];i[7]=h[5]*g[2]+h[6]*g[7]+h[7]*g[12]+h[8]*g[17]+h[9]*g[22];i[8]=h[5]*g[3]+h[6]*g[8]+h[7]*g[13]+h[8]*g[18]+h[9]*g[23];i[9]=h[5]*g[4]+h[6]*g[9]+h[7]*g[14]+h[8]*g[19]+h[9]*g[24];i[10]=h[10]*g[0]+h[11]*g[5]+h[12]*g[10]+h[13]*g[15]+h[14]*g[20];i[11]=h[10]*g[1]+h[11]*g[6]+h[12]*g[11]+h[13]*g[16]+h[14]*g[21];i[12]=h[10]*g[2]+h[11]*g[7]+h[12]*g[12]+h[13]*g[17]+h[14]*g[22];i[13]=h[10]*g[3]+h[11]*g[8]+h[12]*g[13]+h[13]*g[18]+h[14]*g[23];i[14]=h[10]*g[4]+h[11]*g[9]+h[12]*g[14]+h[13]*g[19]+h[14]*g[24];i[15]=h[15]*g[0]+h[16]*g[5]+h[17]*g[10]+h[18]*g[15]+h[19]*g[20];i[16]=h[15]*g[1]+h[16]*g[6]+h[17]*g[11]+h[18]*g[16]+h[19]*g[21];i[17]=h[15]*g[2]+h[16]*g[7]+h[17]*g[12]+h[18]*g[17]+h[19]*g[22];i[18]=h[15]*g[3]+h[16]*g[8]+h[17]*g[13]+h[18]*g[18]+h[19]*g[23];i[19]=h[15]*g[4]+h[16]*g[9]+h[17]*g[14]+h[18]*g[19]+h[19]*g[24];i[20]=h[20]*g[0]+h[21]*g[5]+h[22]*g[10]+h[23]*g[15]+h[24]*g[20];i[21]=h[20]*g[1]+h[21]*g[6]+h[22]*g[11]+h[23]*g[16]+h[24]*g[21];i[22]=h[20]*g[2]+h[21]*g[7]+h[22]*g[12]+h[23]*g[17]+h[24]*g[22];i[23]=h[20]*g[3]+h[21]*g[8]+h[22]*g[13]+h[23]*g[18]+h[24]*g[23];i[24]=h[20]*g[4]+h[21]*g[9]+h[22]*g[14]+h[23]*g[19]+h[24]*g[24];return i};d.prototype._colorMatrix=function(h){var g=new Float32Array(h);g[4]/=255;g[9]/=255;g[14]/=255;g[19]/=255;return g};d.prototype.brightness=function(g,i){var h=[g,0,0,0,0,0,g,0,0,0,0,0,g,0,0,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(h,i)};d.prototype.greyscale=function(i,h){var g=[i,i,i,0,0,i,i,i,0,0,i,i,i,0,0,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(g,h)};d.prototype.blackAndWhite=function(h){var g=[0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(g,h)};d.prototype.hue=function(l,i){l=(l||0)/180*Math.PI;var m=Math.cos(l),h=Math.sin(l);var k=0.213,j=0.715,n=0.072;var g=[k+m*(1-k)+h*(-k),j+m*(-j)+h*(-j),n+m*(-n)+h*(1-n),0,0,k+m*(-k)+h*(0.143),j+m*(1-j)+h*(0.14),n+m*(-n)+h*(-0.283),0,0,k+m*(-k)+h*(-(1-k)),j+m*(-j)+h*(j),n+m*(1-n)+h*(n),0,0,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(g,i)};d.prototype.contrast=function(j,i){var h=(j||0)+1;var k=-128*(h-1);var g=[h,0,0,0,k,0,h,0,0,k,0,0,h,0,k,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(g,i)};d.prototype.saturation=function(j,i){var g=(j||0)*2/3+1;var k=((g-1)*-0.5);var h=[g,k,k,0,0,k,g,k,0,0,k,k,g,0,0,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(h,i)};d.prototype.desaturate=function(g){this.saturation(-1)};d.prototype.negative=function(h){var g=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(g,h)};d.prototype.sepia=function(h){var g=[0.393,0.7689999,0.18899999,0,0,0.349,0.6859999,0.16799999,0,0,0.272,0.5339999,0.13099999,0,0,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(g,h)};d.prototype.technicolor=function(h){var g=[1.9125277891456083,-0.8545344976951645,-0.09155508482755585,0,11.793603434377337,-0.3087833385928097,1.7658908555458428,-0.10601743074722245,0,-70.35205161461398,-0.231103377548616,-0.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0,0,0,0,0,0];this._loadMatrix(g,h)};d.prototype.polaroid=function(h){var g=[1.438,-0.062,-0.062,0,0,-0.122,1.378,-0.122,0,0,-0.016,-0.016,1.483,0,0,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(g,h)};d.prototype.toBGR=function(h){var g=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(g,h)};d.prototype.kodachrome=function(h){var g=[1.1285582396593525,-0.3967382283601348,-0.03992559172921793,0,63.72958762196502,-0.16404339962244616,1.0835251566291304,-0.05498805115633132,0,24.732407896706203,-0.16786010706155763,-0.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(g,h)};d.prototype.browni=function(h){var g=[0.5997023498159715,0.34553243048391263,-0.2708298674538042,0,47.43192855600873,-0.037703249837783157,0.8609577587992641,0.15059552388459913,0,-36.96841498319127,0.24113635128153335,-0.07441037908422492,0.44972182064877153,0,-7.562075277591283,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(g,h)};d.prototype.vintage=function(h){var g=[0.6279345635605994,0.3202183420819367,-0.03965408211312453,0,9.651285835294123,0.02578397704808868,0.6441188644374771,0.03259127616149294,0,7.462829176470591,0.0466055556782719,-0.0851232987247891,0.5241648018700465,0,5.159190588235296,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(g,h)};d.prototype.colorTone=function(o,l,k,p,h){o=o||0.2;l=l||0.15;k=k||16770432;p=p||3375104;var r=((k>>16)&255)/255;var j=((k>>8)&255)/255;var m=(k&255)/255;var n=((p>>16)&255)/255;var g=((p>>8)&255)/255;var i=(p&255)/255;var q=[0.3,0.59,0.11,0,0,r,j,m,o,0,n,g,i,l,0,r-n,j-g,m-i,0,0,0,0,0,0,1];this._loadMatrix(q,h)};d.prototype.night=function(g,i){g=g||0.1;var h=[g*(-2),-g,0,0,0,-g,0,g,0,0,0,g,g*2,0,0,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(h,i)};d.prototype.predator=function(i,h){var g=[11.224130630493164*i,-4.794486999511719*i,-2.8746118545532227*i,0*i,0.40342438220977783*i,-3.6330697536468506*i,9.193157196044922*i,-2.951810836791992*i,0*i,-1.316135048866272*i,-3.2184197902679443*i,-4.2375030517578125*i,7.476448059082031*i,0*i,0.8044459223747253*i,0,0,0,1,0,0,0,0,0,0];this._loadMatrix(g,h)};d.prototype.lsd=function(h){var g=[2,-0.4,0.5,0,0,-0.5,2,-0.4,0,0,-0.4,-0.5,3,0,0,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(g,h)};d.prototype.reset=function(){var g=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1];this._loadMatrix(g,false)};Object.defineProperties(d.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(g){this.uniforms.m.value=g}}})},{"../../core":22}],86:[function(d,f,c){var b=d("../../core");function a(){b.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}a.prototype=Object.create(b.AbstractFilter.prototype);a.prototype.constructor=a;f.exports=a;Object.defineProperties(a.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(g){this.uniforms.step.value=g}}})},{"../../core":22}],87:[function(d,f,c){var b=d("../../core");function a(h,i,g){b.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(h)},texelSize:{type:"2v",value:{x:1/i,y:1/g}}})}a.prototype=Object.create(b.AbstractFilter.prototype);a.prototype.constructor=a;f.exports=a;Object.defineProperties(a.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(g){this.uniforms.matrix.value=new Float32Array(g)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(g){this.uniforms.texelSize.value.x=1/g}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(g){this.uniforms.texelSize.value.y=1/g}}})},{"../../core":22}],88:[function(c,d,b){var a=c("../../core");function f(){a.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}f.prototype=Object.create(a.AbstractFilter.prototype);f.prototype.constructor=f;d.exports=f},{"../../core":22}],89:[function(c,f,b){var a=c("../../core");function d(g){var h=new a.math.Matrix();g.renderable=false;a.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 original =  texture2D(uSampler, vTextureCoord);\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:g.texture},otherMatrix:{type:"mat3",value:h.toArray(true)},scale:{type:"v2",value:{x:1,y:1}}});this.maskSprite=g;this.maskMatrix=h;this.scale=new a.math.Point(20,20)}d.prototype=Object.create(a.AbstractFilter.prototype);d.prototype.constructor=d;f.exports=d;d.prototype.applyFilter=function(k,i,h){var g=k.filterManager;g.calculateMappedMatrix(i.frame,this.maskSprite,this.maskMatrix);this.uniforms.otherMatrix.value=this.maskMatrix.toArray(true);this.uniforms.scale.value.x=this.scale.x*(1/i.frame.width);this.uniforms.scale.value.y=this.scale.y*(1/i.frame.height);var j=this.getShader(k);g.applyFilter(j,i,h)};Object.defineProperties(d.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(g){this.uniforms.mapSampler.value=g}}})},{"../../core":22}],90:[function(d,f,c){var a=d("../../core");function b(){a.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}b.prototype=Object.create(a.AbstractFilter.prototype);b.prototype.constructor=b;f.exports=b;Object.defineProperties(b.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(g){this.uniforms.scale.value=g}},angle:{get:function(){return this.uniforms.angle.value},set:function(g){this.uniforms.angle.value=g}}})},{"../../core":22}],91:[function(d,f,c){var b=d("../../core");function a(){b.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:0.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}});this.passes=1;this.strength=4}a.prototype=Object.create(b.AbstractFilter.prototype);a.prototype.constructor=a;f.exports=a;a.prototype.applyFilter=function(o,p,g,m){var n=this.getShader(o);this.uniforms.strength.value=this.strength/4/this.passes*(p.frame.height/p.size.height);if(this.passes===1){o.filterManager.applyFilter(n,p,g,m)}else{var l=o.filterManager.getRenderTarget(true);var k=p;var h=l;for(var j=0;j<this.passes-1;j++){o.filterManager.applyFilter(n,k,h,m);var q=h;h=k;k=q}o.filterManager.applyFilter(n,k,g,m);o.filterManager.returnRenderTarget(l)}};Object.defineProperties(a.prototype,{blur:{get:function(){return this.strength},set:function(g){this.padding=g*0.5;this.strength=g}}})},{"../../core":22}],92:[function(d,f,c){var b=d("../../core"),g=d("../blur/BlurXFilter"),a=d("./BlurYTintFilter");function h(){b.AbstractFilter.call(this);this.blurXFilter=new g();this.blurYTintFilter=new a();this.defaultFilter=new b.AbstractFilter();this.padding=30;this._dirtyPosition=true;this._angle=45*Math.PI/180;this._distance=10;this.alpha=0.75;this.hideObject=false;this.blendMode=b.BLEND_MODES.MULTIPLY}h.prototype=Object.create(b.AbstractFilter.prototype);h.prototype.constructor=h;f.exports=h;h.prototype.applyFilter=function(l,j,i){var k=l.filterManager.getRenderTarget(true);if(this._dirtyPosition){this._dirtyPosition=false;this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance;this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance}this.blurXFilter.applyFilter(l,j,k);l.blendModeManager.setBlendMode(this.blendMode);this.blurYTintFilter.applyFilter(l,k,i);l.blendModeManager.setBlendMode(b.BLEND_MODES.NORMAL);if(!this.hideObject){this.defaultFilter.applyFilter(l,j,i)}l.filterManager.returnRenderTarget(k)};Object.defineProperties(h.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(i){this.blurXFilter.blur=this.blurYTintFilter.blur=i}},blurX:{get:function(){return this.blurXFilter.blur},set:function(i){this.blurXFilter.blur=i}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(i){this.blurYTintFilter.blur=i}},color:{get:function(){return b.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(i){this.blurYTintFilter.uniforms.color.value=b.utils.hex2rgb(i)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(i){this.blurYTintFilter.uniforms.alpha.value=i}},distance:{get:function(){return this._distance},set:function(i){this._dirtyPosition=true;this._distance=i}},angle:{get:function(){return this._angle},set:function(i){this._dirtyPosition=true;this._angle=i}}})},{"../../core":22,"../blur/BlurXFilter":82,"./BlurYTintFilter":91}],93:[function(d,f,b){var a=d("../../core");function c(){a.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}c.prototype=Object.create(a.AbstractFilter.prototype);c.prototype.constructor=c;f.exports=c;Object.defineProperties(c.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(g){this.uniforms.gray.value=g}}})},{"../../core":22}],94:[function(b,c,a){c.exports={AbstractFilter:b("../core/renderers/webgl/filters/AbstractFilter"),FXAAFilter:b("../core/renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:b("../core/renderers/webgl/filters/SpriteMaskFilter"),AsciiFilter:b("./ascii/AsciiFilter"),BloomFilter:b("./bloom/BloomFilter"),BlurFilter:b("./blur/BlurFilter"),BlurXFilter:b("./blur/BlurXFilter"),BlurYFilter:b("./blur/BlurYFilter"),BlurDirFilter:b("./blur/BlurDirFilter"),ColorMatrixFilter:b("./color/ColorMatrixFilter"),ColorStepFilter:b("./color/ColorStepFilter"),ConvolutionFilter:b("./convolution/ConvolutionFilter"),CrossHatchFilter:b("./crosshatch/CrossHatchFilter"),DisplacementFilter:b("./displacement/DisplacementFilter"),DotScreenFilter:b("./dot/DotScreenFilter"),GrayFilter:b("./gray/GrayFilter"),DropShadowFilter:b("./dropshadow/DropShadowFilter"),InvertFilter:b("./invert/InvertFilter"),NoiseFilter:b("./noise/NoiseFilter"),NormalMapFilter:b("./normal/NormalMapFilter"),PixelateFilter:b("./pixelate/PixelateFilter"),RGBSplitFilter:b("./rgb/RGBSplitFilter"),ShockwaveFilter:b("./shockwave/ShockwaveFilter"),SepiaFilter:b("./sepia/SepiaFilter"),SmartBlurFilter:b("./blur/SmartBlurFilter"),TiltShiftFilter:b("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:b("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:b("./tiltshift/TiltShiftYFilter"),TwistFilter:b("./twist/TwistFilter")}},{"../core/renderers/webgl/filters/AbstractFilter":42,"../core/renderers/webgl/filters/FXAAFilter":43,"../core/renderers/webgl/filters/SpriteMaskFilter":44,"./ascii/AsciiFilter":78,"./bloom/BloomFilter":79,"./blur/BlurDirFilter":80,"./blur/BlurFilter":81,"./blur/BlurXFilter":82,"./blur/BlurYFilter":83,"./blur/SmartBlurFilter":84,"./color/ColorMatrixFilter":85,"./color/ColorStepFilter":86,"./convolution/ConvolutionFilter":87,"./crosshatch/CrossHatchFilter":88,"./displacement/DisplacementFilter":89,"./dot/DotScreenFilter":90,"./dropshadow/DropShadowFilter":92,"./gray/GrayFilter":93,"./invert/InvertFilter":95,"./noise/NoiseFilter":96,"./normal/NormalMapFilter":97,"./pixelate/PixelateFilter":98,"./rgb/RGBSplitFilter":99,"./sepia/SepiaFilter":100,"./shockwave/ShockwaveFilter":101,"./tiltshift/TiltShiftFilter":103,"./tiltshift/TiltShiftXFilter":104,"./tiltshift/TiltShiftYFilter":105,"./twist/TwistFilter":106}],95:[function(d,f,c){var a=d("../../core");function b(){a.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}b.prototype=Object.create(a.AbstractFilter.prototype);b.prototype.constructor=b;f.exports=b;Object.defineProperties(b.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(g){this.uniforms.invert.value=g}}})},{"../../core":22}],96:[function(c,d,b){var a=c("../../core");function f(){a.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:0.5}})}f.prototype=Object.create(a.AbstractFilter.prototype);f.prototype.constructor=f;d.exports=f;Object.defineProperties(f.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(g){this.uniforms.noise.value=g}}})},{"../../core":22}],97:[function(c,d,b){var a=c("../../core");function f(g){a.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying float vColor;\n\nuniform sampler2D displacementMap;\nuniform sampler2D uSampler;\n\nuniform vec4 dimensions;\n\nconst vec2 Resolution = vec2(1.0,1.0);      //resolution of screen\nuniform vec3 LightPos;    //light position, normalized\nconst vec4 LightColor = vec4(1.0, 1.0, 1.0, 1.0);      //light RGBA -- alpha is intensity\nconst vec4 AmbientColor = vec4(1.0, 1.0, 1.0, 0.5);    //ambient RGBA -- alpha is intensity\nconst vec3 Falloff = vec3(0.0, 1.0, 0.2);         //attenuation coefficients\n\nuniform vec3 LightDir; // = vec3(1.0, 0.0, 1.0);\n\nuniform vec2 mapDimensions; // = vec2(256.0, 256.0);\n\n\nvoid main(void)\n{\n    vec2 mapCords = vTextureCoord.xy;\n\n    vec4 color = texture2D(uSampler, vTextureCoord.st);\n    vec3 nColor = texture2D(displacementMap, vTextureCoord.st).rgb;\n\n\n    mapCords *= vec2(dimensions.x/512.0, dimensions.y/512.0);\n\n    mapCords.y *= -1.0;\n    mapCords.y += 1.0;\n\n    // RGBA of our diffuse color\n    vec4 DiffuseColor = texture2D(uSampler, vTextureCoord);\n\n    // RGB of our normal map\n    vec3 NormalMap = texture2D(displacementMap, mapCords).rgb;\n\n    // The delta position of light\n    // vec3 LightDir = vec3(LightPos.xy - (gl_FragCoord.xy / Resolution.xy), LightPos.z);\n    vec3 LightDir = vec3(LightPos.xy - (mapCords.xy), LightPos.z);\n\n    // Correct for aspect ratio\n    // LightDir.x *= Resolution.x / Resolution.y;\n\n    // Determine distance (used for attenuation) BEFORE we normalize our LightDir\n    float D = length(LightDir);\n\n    // normalize our vectors\n    vec3 N = normalize(NormalMap * 2.0 - 1.0);\n    vec3 L = normalize(LightDir);\n\n    // Pre-multiply light color with intensity\n    // Then perform 'N dot L' to determine our diffuse term\n    vec3 Diffuse = (LightColor.rgb * LightColor.a) * max(dot(N, L), 0.0);\n\n    // pre-multiply ambient color with intensity\n    vec3 Ambient = AmbientColor.rgb * AmbientColor.a;\n\n    // calculate attenuation\n    float Attenuation = 1.0 / ( Falloff.x + (Falloff.y*D) + (Falloff.z*D*D) );\n\n    // the calculation which brings it all together\n    vec3 Intensity = Ambient + Diffuse * Attenuation;\n    vec3 FinalColor = DiffuseColor.rgb * Intensity;\n    gl_FragColor = vColor * vec4(FinalColor, DiffuseColor.a);\n\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, Attenuation); // vColor * vec4(FinalColor, DiffuseColor.a);\n\n/*\n    // normalise color\n    vec3 normal = normalize(nColor * 2.0 - 1.0);\n\n    vec3 deltaPos = vec3( (light.xy - gl_FragCoord.xy) / resolution.xy, light.z );\n\n    float lambert = clamp(dot(normal, lightDir), 0.0, 1.0);\n\n    float d = sqrt(dot(deltaPos, deltaPos));\n    float att = 1.0 / ( attenuation.x + (attenuation.y*d) + (attenuation.z*d*d) );\n\n    vec3 result = (ambientColor * ambientIntensity) + (lightColor.rgb * lambert) * att;\n    result *= color.rgb;\n\n    gl_FragColor = vec4(result, 1.0);\n*/\n}\n",{displacementMap:{type:"sampler2D",value:g},scale:{type:"2f",value:{x:15,y:15}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:1}},dimensions:{type:"4f",value:[0,0,0,0]},LightPos:{type:"3f",value:[0,1,0]}});g.baseTexture._powerOf2=true;if(g.baseTexture.hasLoaded){this.onTextureLoaded()}else{g.baseTexture.once("loaded",this.onTextureLoaded,this)}}f.prototype=Object.create(a.AbstractFilter.prototype);f.prototype.constructor=f;d.exports=f;f.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width;this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height};Object.defineProperties(f.prototype,{map:{get:function(){return this.uniforms.displacementMap.value},set:function(g){this.uniforms.displacementMap.value=g}},scale:{get:function(){return this.uniforms.scale.value},set:function(g){this.uniforms.scale.value=g}},offset:{get:function(){return this.uniforms.offset.value},set:function(g){this.uniforms.offset.value=g}}})},{"../../core":22}],98:[function(c,d,b){var a=c("../../core");function f(){a.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}f.prototype=Object.create(a.AbstractFilter.prototype);f.prototype.constructor=f;d.exports=f;Object.defineProperties(f.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(g){this.uniforms.pixelSize.value=g}}})},{"../../core":22}],99:[function(c,d,b){var a=c("../../core");function f(){a.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}f.prototype=Object.create(a.AbstractFilter.prototype);f.prototype.constructor=f;d.exports=f;Object.defineProperties(f.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(g){this.uniforms.red.value=g}},green:{get:function(){return this.uniforms.green.value},set:function(g){this.uniforms.green.value=g}},blue:{get:function(){return this.uniforms.blue.value},set:function(g){this.uniforms.blue.value=g}}})},{"../../core":22}],100:[function(d,f,b){var a=d("../../core");function c(){a.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}c.prototype=Object.create(a.AbstractFilter.prototype);c.prototype.constructor=c;f.exports=c;Object.defineProperties(c.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(g){this.uniforms.sepia.value=g}}})},{"../../core":22}],101:[function(c,d,b){var a=c("../../core");function f(){a.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:0.5,y:0.5}},params:{type:"v3",value:{x:10,y:0.8,z:0.1}},time:{type:"1f",value:0}})}f.prototype=Object.create(a.AbstractFilter.prototype);f.prototype.constructor=f;d.exports=f;Object.defineProperties(f.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(g){this.uniforms.center.value=g}},params:{get:function(){return this.uniforms.params.value},set:function(g){this.uniforms.params.value=g}},time:{get:function(){return this.uniforms.time.value},set:function(g){this.uniforms.time.value=g}}})},{"../../core":22}],102:[function(c,d,b){var a=c("../../core");function f(){a.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}});this.updateDelta()}f.prototype=Object.create(a.AbstractFilter.prototype);f.prototype.constructor=f;d.exports=f;f.prototype.updateDelta=function(){this.uniforms.delta.value.x=0;this.uniforms.delta.value.y=0};Object.defineProperties(f.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(g){this.uniforms.blur.value=g}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(g){this.uniforms.gradientBlur.value=g}},start:{get:function(){return this.uniforms.start.value},set:function(g){this.uniforms.start.value=g;this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(g){this.uniforms.end.value=g;this.updateDelta()}}})},{"../../core":22}],103:[function(c,f,b){var a=c("../../core"),g=c("./TiltShiftXFilter"),h=c("./TiltShiftYFilter");function d(){a.AbstractFilter.call(this);this.tiltShiftXFilter=new g();this.tiltShiftYFilter=new h()}d.prototype=Object.create(a.AbstractFilter.prototype);d.prototype.constructor=d;f.exports=d;d.prototype.applyFilter=function(l,j,i){var k=l.filterManager.getRenderTarget(true);this.tiltShiftXFilter.applyFilter(l,j,k);this.tiltShiftYFilter.applyFilter(l,k,i);l.filterManager.returnRenderTarget(k)};Object.defineProperties(d.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(i){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=i}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(i){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=i}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(i){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=i}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(i){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=i}}})},{"../../core":22,"./TiltShiftXFilter":104,"./TiltShiftYFilter":105}],104:[function(b,c,a){var f=b("./TiltShiftAxisFilter");function d(){f.call(this)}d.prototype=Object.create(f.prototype);d.prototype.constructor=d;c.exports=d;d.prototype.updateDelta=function(){var h=this.uniforms.end.value.x-this.uniforms.start.value.x;var g=this.uniforms.end.value.y-this.uniforms.start.value.y;var i=Math.sqrt(h*h+g*g);this.uniforms.delta.value.x=h/i;this.uniforms.delta.value.y=g/i}},{"./TiltShiftAxisFilter":102}],105:[function(b,c,a){var d=b("./TiltShiftAxisFilter");function f(){d.call(this)}f.prototype=Object.create(d.prototype);f.prototype.constructor=f;c.exports=f;f.prototype.updateDelta=function(){var h=this.uniforms.end.value.x-this.uniforms.start.value.x;var g=this.uniforms.end.value.y-this.uniforms.start.value.y;var i=Math.sqrt(h*h+g*g);this.uniforms.delta.value.x=-g/i;this.uniforms.delta.value.y=h/i}},{"./TiltShiftAxisFilter":102}],106:[function(c,d,b){var a=c("../../core");function f(){a.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:0.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:0.5,y:0.5}}})}f.prototype=Object.create(a.AbstractFilter.prototype);f.prototype.constructor=f;d.exports=f;Object.defineProperties(f.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(g){this.uniforms.offset.value=g}},radius:{get:function(){return this.uniforms.radius.value},set:function(g){this.uniforms.radius.value=g}},angle:{get:function(){return this.uniforms.angle.value},set:function(g){this.uniforms.angle.value=g}}})},{"../../core":22}],107:[function(d,f,b){var a=d("../core");function c(){this.global=new a.Point();this.target=null;this.originalEvent=null}c.prototype.constructor=c;f.exports=c;c.prototype.getLocalPosition=function(m,o,n){var g=m.worldTransform;var i=n?n:this.global;var l=g.a,k=g.c,j=g.tx,r=g.b,q=g.d,p=g.ty,h=1/(l*q+k*-r);o=o||new a.math.Point();o.x=q*h*i.x+-k*h*i.y+(p*k-j*q)*h;o.y=l*h*i.y+-r*h*i.x+(-p*l+j*r)*h;return o}},{"../core":22}],108:[function(d,f,b){var a=d("../core"),c=d("./InteractionData");Object.assign(a.DisplayObject.prototype,d("./interactiveTarget"));function g(i,h){h=h||{};this.renderer=i;this.autoPreventDefault=h.autoPreventDefault!==undefined?h.autoPreventDefault:true;this.interactionFrequency=h.interactionFrequency||10;this.mouse=new c();this.eventData={stopped:false,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=true}};this.interactiveDataPool=[];this.interactionDOMElement=null;this.eventsAdded=false;this.onMouseUp=this.onMouseUp.bind(this);this.processMouseUp=this.processMouseUp.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.processMouseDown=this.processMouseDown.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.processMouseMove=this.processMouseMove.bind(this);this.onMouseOut=this.onMouseOut.bind(this);this.processMouseOverOut=this.processMouseOverOut.bind(this);this.onTouchStart=this.onTouchStart.bind(this);this.processTouchStart=this.processTouchStart.bind(this);this.onTouchEnd=this.onTouchEnd.bind(this);this.processTouchEnd=this.processTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.processTouchMove=this.processTouchMove.bind(this);this.last=0;this.currentCursorStyle="inherit";this._tempPoint=new a.Point();this.resolution=1;this.setTargetElement(this.renderer.view,this.renderer.resolution)}g.prototype.constructor=g;f.exports=g;g.prototype.setTargetElement=function(i,h){this.removeEvents();this.interactionDOMElement=i;this.resolution=h||1;this.addEvents()};g.prototype.addEvents=function(){if(!this.interactionDOMElement){return}a.ticker.shared.add(this.update,this);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="none";this.interactionDOMElement.style["-ms-touch-action"]="none"}window.document.addEventListener("mousemove",this.onMouseMove,true);this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,true);this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,true);this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,true);this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,true);this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,true);window.addEventListener("mouseup",this.onMouseUp,true);this.eventsAdded=true};g.prototype.removeEvents=function(){if(!this.interactionDOMElement){return}a.ticker.shared.remove(this.update);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="";this.interactionDOMElement.style["-ms-touch-action"]=""}window.document.removeEventListener("mousemove",this.onMouseMove,true);this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,true);this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,true);this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,true);this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,true);this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,true);this.interactionDOMElement=null;window.removeEventListener("mouseup",this.onMouseUp,true);this.eventsAdded=false};g.prototype.update=function(h){this._deltaTime+=h;if(this._deltaTime<this.interactionFrequency){return}this._deltaTime=0;if(!this.interactionDOMElement){return}if(this.didMove){this.didMove=false;return}this.cursor="inherit";this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,true);if(this.currentCursorStyle!==this.cursor){this.currentCursorStyle=this.cursor;this.interactionDOMElement.style.cursor=this.cursor}};g.prototype.dispatchEvent=function(j,h,i){if(!i.stopped){i.target=j;i.type=h;j.emit(h,i);if(j[h]){j[h](i)}}};g.prototype.mapPositionToPoint=function(i,h,k){var j=this.interactionDOMElement.getBoundingClientRect();i.x=((h-j.left)*(this.interactionDOMElement.width/j.width))/this.resolution;i.y=((k-j.top)*(this.interactionDOMElement.height/j.height))/this.resolution};g.prototype.processInteractive=function(h,p,n,k,j){if(!p.visible){return false}var m=p.children;var o=false;j=j||p.interactive;if(p.interactiveChildren){for(var l=m.length-1;l>=0;l--){if(!o&&k){o=this.processInteractive(h,m[l],n,true,j)}else{this.processInteractive(h,m[l],n,false,false)}}}if(j){if(k){if(p.hitArea){p.worldTransform.applyInverse(h,this._tempPoint);o=p.hitArea.contains(this._tempPoint.x,this._tempPoint.y)}else{if(p.containsPoint){o=p.containsPoint(h)}}}if(p.interactive){n(p,o)}}return o};g.prototype.onMouseDown=function(h){this.mouse.originalEvent=h;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,h.clientX,h.clientY);if(this.autoPreventDefault){this.mouse.originalEvent.preventDefault()}this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,true)};g.prototype.processMouseDown=function(k,h){var i=this.mouse.originalEvent;var j=i.button===2||i.which===3;if(h){k[j?"_isRightDown":"_isLeftDown"]=true;this.dispatchEvent(k,j?"rightdown":"mousedown",this.eventData)}};g.prototype.onMouseUp=function(h){this.mouse.originalEvent=h;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,h.clientX,h.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,true)};g.prototype.processMouseUp=function(l,i){var j=this.mouse.originalEvent;var k=j.button===2||j.which===3;var h=k?"_isRightDown":"_isLeftDown";if(i){this.dispatchEvent(l,k?"rightup":"mouseup",this.eventData);if(l[h]){l[h]=false;this.dispatchEvent(l,k?"rightclick":"click",this.eventData)}}else{if(l[h]){l[h]=false;this.dispatchEvent(l,k?"rightupoutside":"mouseupoutside",this.eventData)}}};g.prototype.onMouseMove=function(h){this.mouse.originalEvent=h;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,h.clientX,h.clientY);this.didMove=true;this.cursor="inherit";this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,true);if(this.currentCursorStyle!==this.cursor){this.currentCursorStyle=this.cursor;this.interactionDOMElement.style.cursor=this.cursor}};g.prototype.processMouseMove=function(i,h){this.dispatchEvent(i,"mousemove",this.eventData);this.processMouseOverOut(i,h)};g.prototype.onMouseOut=function(h){this.mouse.originalEvent=h;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,h.clientX,h.clientY);this.interactionDOMElement.style.cursor="inherit";this.mapPositionToPoint(this.mouse.global,h.clientX,h.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,false)};g.prototype.processMouseOverOut=function(i,h){if(h){if(!i._over){i._over=true;this.dispatchEvent(i,"mouseover",this.eventData)}if(i.buttonMode){this.cursor=i.defaultCursor}}else{if(i._over){i._over=false;this.dispatchEvent(i,"mouseout",this.eventData)}}};g.prototype.onTouchStart=function(m){if(this.autoPreventDefault){m.preventDefault()}var l=m.changedTouches;var n=l.length;for(var k=0;k<n;k++){var h=l[k];var j=this.getTouchData(h);j.originalEvent=m;this.eventData.data=j;this.eventData.stopped=false;this.processInteractive(j.global,this.renderer._lastObjectRendered,this.processTouchStart,true);this.returnTouchData(j)}};g.prototype.processTouchStart=function(i,h){if(h){i._touchDown=true;this.dispatchEvent(i,"touchstart",this.eventData)}};g.prototype.onTouchEnd=function(m){if(this.autoPreventDefault){m.preventDefault()}var l=m.changedTouches;var n=l.length;for(var k=0;k<n;k++){var h=l[k];var j=this.getTouchData(h);j.originalEvent=m;this.eventData.data=j;this.eventData.stopped=false;this.processInteractive(j.global,this.renderer._lastObjectRendered,this.processTouchEnd,true);this.returnTouchData(j)}};g.prototype.processTouchEnd=function(i,h){if(h){this.dispatchEvent(i,"touchend",this.eventData);if(i._touchDown){i._touchDown=false;this.dispatchEvent(i,"tap",this.eventData)}}else{if(i._touchDown){i._touchDown=false;this.dispatchEvent(i,"touchendoutside",this.eventData)}}};g.prototype.onTouchMove=function(m){if(this.autoPreventDefault){m.preventDefault()}var l=m.changedTouches;var n=l.length;for(var k=0;k<n;k++){var h=l[k];var j=this.getTouchData(h);j.originalEvent=m;this.eventData.data=j;this.eventData.stopped=false;this.processInteractive(j.global,this.renderer._lastObjectRendered,this.processTouchMove,false);this.returnTouchData(j)}};g.prototype.processTouchMove=function(i,h){h=h;this.dispatchEvent(i,"touchmove",this.eventData)};g.prototype.getTouchData=function(h){var i=this.interactiveDataPool.pop();if(!i){i=new c()}i.identifier=h.identifier;this.mapPositionToPoint(i.global,h.clientX,h.clientY);h.globalX=i.global.x;h.globalY=i.global.y;return i};g.prototype.returnTouchData=function(h){this.interactiveDataPool.push(h)};g.prototype.destroy=function(){this.removeEvents();this.renderer=null;this.mouse=null;this.eventData=null;this.interactiveDataPool=null;this.interactionDOMElement=null;this.onMouseUp=null;this.processMouseUp=null;this.onMouseDown=null;this.processMouseDown=null;this.onMouseMove=null;this.processMouseMove=null;this.onMouseOut=null;this.processMouseOverOut=null;this.onTouchStart=null;this.processTouchStart=null;this.onTouchEnd=null;this.processTouchEnd=null;this.onTouchMove=null;this.processTouchMove=null;this._tempPoint=null};a.WebGLRenderer.registerPlugin("interaction",g);a.CanvasRenderer.registerPlugin("interaction",g)},{"../core":22,"./InteractionData":107,"./interactiveTarget":110}],109:[function(b,c,a){c.exports={InteractionData:b("./InteractionData"),InteractionManager:b("./InteractionManager"),interactiveTarget:b("./interactiveTarget")}},{"./InteractionData":107,"./InteractionManager":108,"./interactiveTarget":110}],110:[function(b,c,a){c.exports={interactive:false,buttonMode:false,interactiveChildren:true,defaultCursor:"pointer",_over:false,_touchDown:false}},{}],111:[function(c,b,h){var a=c("resource-loader").Resource,d=c("../core"),i=c("../core/utils"),g=c("../extras"),j=c("path");function f(m,t){var n={};var l=m.data.getElementsByTagName("info")[0];var r=m.data.getElementsByTagName("common")[0];n.font=l.getAttribute("face");n.size=parseInt(l.getAttribute("size"),10);n.lineHeight=parseInt(r.getAttribute("lineHeight"),10);n.chars={};var s=m.data.getElementsByTagName("char");for(var o=0;o<s.length;o++){var w=parseInt(s[o].getAttribute("id"),10);var v=new d.math.Rectangle(parseInt(s[o].getAttribute("x"),10)+t.frame.x,parseInt(s[o].getAttribute("y"),10)+t.frame.y,parseInt(s[o].getAttribute("width"),10),parseInt(s[o].getAttribute("height"),10));n.chars[w]={xOffset:parseInt(s[o].getAttribute("xoffset"),10),yOffset:parseInt(s[o].getAttribute("yoffset"),10),xAdvance:parseInt(s[o].getAttribute("xadvance"),10),kerning:{},texture:new d.Texture(t.baseTexture,v)}}var u=m.data.getElementsByTagName("kerning");for(o=0;o<u.length;o++){var q=parseInt(u[o].getAttribute("first"),10);var k=parseInt(u[o].getAttribute("second"),10);var p=parseInt(u[o].getAttribute("amount"),10);n.chars[k].kerning[q]=p}m.bitmapFont=n;g.BitmapText.fonts[n.font]=n}b.exports=function(){return function(o,m){if(!o.data||!o.isXml){return m()}if(o.data.getElementsByTagName("page").length===0||o.data.getElementsByTagName("info").length===0||o.data.getElementsByTagName("info")[0].getAttribute("face")===null){return m()}var l=j.dirname(o.url);if(l==="."){l=""}if(this.baseUrl&&l){if(this.baseUrl.charAt(this.baseUrl.length-1)==="/"){l+="/"}l=l.replace(this.baseUrl,"")}if(l&&l.charAt(l.length-1)!=="/"){l+="/"}var k=l+o.data.getElementsByTagName("page")[0].getAttribute("file");if(i.TextureCache[k]){f(o,i.TextureCache[k]);m()}else{var n={crossOrigin:o.crossOrigin,loadType:a.LOAD_TYPE.IMAGE};this.add(o.name+"_image",k,n,function(p){f(o,p.texture);m()})}}}},{"../core":22,"../core/utils":68,"../extras":77,path:2,"resource-loader":11}],112:[function(b,c,a){c.exports={Loader:b("./loader"),bitmapFontParser:b("./bitmapFontParser"),spritesheetParser:b("./spritesheetParser"),textureParser:b("./textureParser"),Resource:b("resource-loader").Resource}},{"./bitmapFontParser":111,"./loader":113,"./spritesheetParser":114,"./textureParser":115,"resource-loader":11}],113:[function(d,f,b){var i=d("resource-loader"),c=d("./textureParser"),a=d("./spritesheetParser"),g=d("./bitmapFontParser");function h(k,j){i.call(this,k,j);this.use(i.middleware.parsing.blob());this.use(c());this.use(a());this.use(g())}h.prototype=Object.create(i.prototype);h.prototype.constructor=h;f.exports=h},{"./bitmapFontParser":111,"./spritesheetParser":114,"./textureParser":115,"resource-loader":11}],114:[function(c,d,b){var g=c("resource-loader").Resource,f=c("path"),a=c("../core");d.exports=function(){return function(l,j){if(!l.data||!l.isJson||!l.data.frames){return j()}var k={crossOrigin:l.crossOrigin,loadType:g.LOAD_TYPE.IMAGE};var h=f.dirname(l.url.replace(this.baseUrl,""));var i=a.utils.getResolutionOfUrl(l.url);this.add(l.name+"_image",h+"/"+l.data.meta.image,k,function(q){l.textures={};var s=l.data.frames;for(var p in s){var r=s[p].frame;if(r){var o=null;var m=null;if(s[p].rotated){o=new a.math.Rectangle(r.x,r.y,r.h,r.w)}else{o=new a.math.Rectangle(r.x,r.y,r.w,r.h)}if(s[p].trimmed){m=new a.math.Rectangle(s[p].spriteSourceSize.x/i,s[p].spriteSourceSize.y/i,s[p].sourceSize.w/i,s[p].sourceSize.h/i)}if(s[p].rotated){var n=o.width;o.width=o.height;o.height=n}o.x/=i;o.y/=i;o.width/=i;o.height/=i;l.textures[p]=new a.Texture(q.texture.baseTexture,o,o.clone(),m,s[p].rotated);a.utils.TextureCache[p]=l.textures[p]}}j()})}}},{"../core":22,path:2,"resource-loader":11}],115:[function(c,d,b){var a=c("../core");d.exports=function(){return function(g,f){if(g.data&&g.isImage){g.texture=new a.Texture(new a.BaseTexture(g.data,null,a.utils.getResolutionOfUrl(g.url)));a.utils.TextureCache[g.url]=g.texture}f()}}},{"../core":22}],116:[function(c,d,b){var a=c("../core");function f(i,g,h,k,j){a.Container.call(this);this.texture=i;this.uvs=h||new Float32Array([0,1,1,1,1,0,0,1]);this.vertices=g||new Float32Array([0,0,100,0,100,100,0,100]);this.indices=k||new Uint16Array([0,1,2,3]);this.dirty=true;this.blendMode=a.BLEND_MODES.NORMAL;this.canvasPadding=0;this.drawMode=j||f.DRAW_MODES.TRIANGLE_MESH}f.prototype=Object.create(a.Container.prototype);f.prototype.constructor=f;d.exports=f;f.prototype._renderWebGL=function(g){g.setObjectRenderer(g.plugins.mesh);g.plugins.mesh.render(this)};f.prototype._renderCanvas=function(i){var h=i.context;var g=this.worldTransform;if(i.roundPixels){h.setTransform(g.a,g.b,g.c,g.d,g.tx|0,g.ty|0)}else{h.setTransform(g.a,g.b,g.c,g.d,g.tx,g.ty)}if(this.drawMode===f.DRAW_MODES.TRIANGLE_MESH){this._renderCanvasTriangleMesh(h)}else{this._renderCanvasTriangles(h)}};f.prototype._renderCanvasTriangleMesh=function(l){var h=this.vertices;var k=this.uvs;var m=h.length/2;for(var j=0;j<m-2;j++){var g=j*2;this._renderCanvasDrawTriangle(l,h,k,g,(g+2),(g+4))}};f.prototype._renderCanvasTriangles=function(g){var m=this.vertices;var j=this.uvs;var p=this.indices;var h=p.length;for(var k=0;k<h;k+=3){var o=p[k]*2,n=p[k+1]*2,l=p[k+2]*2;this._renderCanvasDrawTriangle(g,m,j,o,n,l)}};f.prototype._renderCanvasDrawTriangle=function(l,r,B,t,q,p){var i=this.texture.baseTexture.source;var g=this.texture.width;var C=this.texture.height;var N=r[t],M=r[q],K=r[p];var o=r[t+1],n=r[q+1],k=r[p+1];var L=B[t]*g,J=B[q]*g,I=B[p]*g;var m=B[t+1]*C,j=B[q+1]*C,h=B[p+1]*C;if(this.canvasPadding>0){var H=this.canvasPadding/this.worldTransform.a;var G=this.canvasPadding/this.worldTransform.d;var z=(N+M+K)/3;var x=(o+n+k)/3;var F=N-z;var E=o-x;var D=Math.sqrt(F*F+E*E);N=z+(F/D)*(D+H);o=x+(E/D)*(D+G);F=M-z;E=n-x;D=Math.sqrt(F*F+E*E);M=z+(F/D)*(D+H);n=x+(E/D)*(D+G);F=K-z;E=k-x;D=Math.sqrt(F*F+E*E);K=z+(F/D)*(D+H);k=x+(E/D)*(D+G)}l.save();l.beginPath();l.moveTo(N,o);l.lineTo(M,n);l.lineTo(K,k);l.closePath();l.clip();var O=(L*j)+(m*I)+(J*h)-(j*I)-(m*J)-(L*h);var A=(N*j)+(m*K)+(M*h)-(j*K)-(m*M)-(N*h);var y=(L*M)+(N*I)+(J*K)-(M*I)-(N*J)-(L*K);var w=(L*j*K)+(m*M*I)+(N*J*h)-(N*j*I)-(m*J*K)-(L*M*h);var v=(o*j)+(m*k)+(n*h)-(j*k)-(m*n)-(o*h);var u=(L*n)+(o*I)+(J*k)-(n*I)-(o*J)-(L*k);var s=(L*j*k)+(m*n*I)+(o*J*h)-(o*j*I)-(m*J*k)-(L*n*h);l.transform(A/O,v/O,y/O,u/O,w/O,s/O);l.drawImage(i,0,0);l.restore()};f.prototype.renderMeshFlat=function(m){var h=this.context;var p=m.vertices;var k=p.length/2;h.beginPath();for(var n=1;n<k-2;n++){var o=n*2;var l=p[o],j=p[o+2],g=p[o+4];var s=p[o+1],r=p[o+3],q=p[o+5];h.moveTo(l,s);h.lineTo(j,r);h.lineTo(g,q)}h.fillStyle="#FF0000";h.fill();h.closePath()};f.prototype.onTextureUpdate=function(){this.updateFrame=true};f.prototype.getBounds=function(q){var p=q||this.worldTransform;var C=p.a;var A=p.b;var w=p.c;var t=p.d;var D=p.tx;var B=p.ty;var v=-Infinity;var s=-Infinity;var z=Infinity;var u=Infinity;var j=this.vertices;for(var r=0,o=j.length;r<o;r+=2){var h=j[r],g=j[r+1];var m=(C*h)+(w*g)+D;var l=(t*g)+(A*h)+B;z=m<z?m:z;u=l<u?l:u;v=m>v?m:v;s=l>s?l:s}if(z===-Infinity||s===Infinity){return a.math.Rectangle.EMPTY}var k=this._bounds;k.x=z;k.width=v-z;k.y=u;k.height=s-u;this._currentBounds=k;return k};f.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":22}],117:[function(b,d,a){var f=b("./Mesh");function c(h,g){f.call(this,h);this.points=g;this.vertices=new Float32Array(g.length*4);this.uvs=new Float32Array(g.length*4);this.colors=new Float32Array(g.length*2);this.indices=new Uint16Array(g.length*2);this.refresh()}c.prototype=Object.create(f.prototype);c.prototype.constructor=c;d.exports=c;c.prototype.refresh=function(){var o=this.points;if(o.length<1){return}var h=this.uvs;var p=this.indices;var g=this.colors;h[0]=0;h[1]=0;h[2]=0;h[3]=1;g[0]=1;g[1]=1;p[0]=0;p[1]=1;var m=o.length,n,l,k;for(var j=1;j<m;j++){n=o[j];l=j*4;k=j/(m-1);if(j%2){h[l]=k;h[l+1]=0;h[l+2]=k;h[l+3]=1}else{h[l]=k;h[l+1]=0;h[l+2]=k;h[l+3]=1}l=j*2;g[l]=1;g[l+1]=1;l=j*2;p[l]=l;p[l+1]=l+1}};c.prototype.updateTransform=function(){var r=this.points;if(r.length<1){return}var p=r[0];var n;var t=0;var s=0;var l=this.vertices;var o=r.length,q,k,m,g,j;for(var h=0;h<o;h++){q=r[h];k=h*4;if(h<r.length-1){n=r[h+1]}else{n=q}s=-(n.x-p.x);t=n.y-p.y;m=(1-(h/(o-1)))*10;if(m>1){m=1}g=Math.sqrt(t*t+s*s);j=this.texture.height/2;t/=g;s/=g;t*=j;s*=j;l[k]=q.x+t;l[k+1]=q.y+s;l[k+2]=q.x-t;l[k+3]=q.y-s;p=q}this.containerUpdateTransform()}},{"./Mesh":116}],118:[function(b,c,a){c.exports={Mesh:b("./Mesh"),Rope:b("./Rope"),MeshRenderer:b("./webgl/MeshRenderer"),MeshShader:b("./webgl/MeshShader")}},{"./Mesh":116,"./Rope":117,"./webgl/MeshRenderer":119,"./webgl/MeshShader":120}],119:[function(d,f,c){var g=d("../../core/renderers/webgl/utils/ObjectRenderer"),a=d("../../core/renderers/webgl/WebGLRenderer");function b(l){g.call(this,l);this.indices=new Uint16Array(15000);for(var k=0,h=0;k<15000;k+=6,h+=4){this.indices[k+0]=h+0;this.indices[k+1]=h+1;this.indices[k+2]=h+2;this.indices[k+3]=h+0;this.indices[k+4]=h+2;this.indices[k+5]=h+3}}b.prototype=Object.create(g.prototype);b.prototype.constructor=b;f.exports=b;a.registerPlugin("mesh",b);b.prototype.onContextChange=function(){};b.prototype.render=function(m){if(!m._vertexBuffer){this._initWebGL(m)}var k=this.renderer,l=k.gl,i=m.texture.baseTexture,h=k.shaderManager.plugins.meshShader;var j=l.TRIANGLE_STRIP;k.blendModeManager.setBlendMode(m.blendMode);l.uniformMatrix3fv(h.uniforms.translationMatrix._location,false,m.worldTransform.toArray(true));l.uniformMatrix3fv(h.uniforms.projectionMatrix._location,false,k.currentRenderTarget.projectionMatrix.toArray(true));l.uniform1f(h.uniforms.alpha._location,m.worldAlpha);if(!m.dirty){l.bindBuffer(l.ARRAY_BUFFER,m._vertexBuffer);l.bufferSubData(l.ARRAY_BUFFER,0,m.vertices);l.vertexAttribPointer(h.attributes.aVertexPosition,2,l.FLOAT,false,0,0);l.bindBuffer(l.ARRAY_BUFFER,m._uvBuffer);l.vertexAttribPointer(h.attributes.aTextureCoord,2,l.FLOAT,false,0,0);l.activeTexture(l.TEXTURE0);if(!i._glTextures[l.id]){this.renderer.updateTexture(i)}else{l.bindTexture(l.TEXTURE_2D,i._glTextures[l.id])}}else{m.dirty=false;l.bindBuffer(l.ARRAY_BUFFER,m._vertexBuffer);l.bufferData(l.ARRAY_BUFFER,m.vertices,l.STATIC_DRAW);l.vertexAttribPointer(h.attributes.aVertexPosition,2,l.FLOAT,false,0,0);l.bindBuffer(l.ARRAY_BUFFER,m._uvBuffer);l.bufferData(l.ARRAY_BUFFER,m.uvs,l.STATIC_DRAW);l.vertexAttribPointer(h.attributes.aTextureCoord,2,l.FLOAT,false,0,0);l.activeTexture(l.TEXTURE0);if(!i._glTextures[l.id]){this.renderer.updateTexture(i)}else{l.bindTexture(l.TEXTURE_2D,i._glTextures[l.id])}l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,m._indexBuffer);l.bufferData(l.ELEMENT_ARRAY_BUFFER,m.indices,l.STATIC_DRAW)}l.drawElements(j,m.indices.length,l.UNSIGNED_SHORT,0)};b.prototype._initWebGL=function(i){var h=this.renderer.gl;i._vertexBuffer=h.createBuffer();i._indexBuffer=h.createBuffer();i._uvBuffer=h.createBuffer();i._colorBuffer=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,i._vertexBuffer);h.bufferData(h.ARRAY_BUFFER,i.vertices,h.DYNAMIC_DRAW);h.bindBuffer(h.ARRAY_BUFFER,i._uvBuffer);h.bufferData(h.ARRAY_BUFFER,i.uvs,h.STATIC_DRAW);h.bindBuffer(h.ARRAY_BUFFER,i._colorBuffer);h.bufferData(h.ARRAY_BUFFER,i.colors,h.STATIC_DRAW);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,i._indexBuffer);h.bufferData(h.ELEMENT_ARRAY_BUFFER,i.indices,h.STATIC_DRAW)};b.prototype.flush=function(){};b.prototype.start=function(){var h=this.renderer.shaderManager.plugins.meshShader;this.renderer.shaderManager.setShader(h)};b.prototype.destroy=function(){}},{"../../core/renderers/webgl/WebGLRenderer":41,"../../core/renderers/webgl/utils/ObjectRenderer":55}],120:[function(d,f,c){var a=d("../../core");function b(g){a.Shader.call(this,g,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}b.prototype=Object.create(a.Shader.prototype);b.prototype.constructor=b;f.exports=b;a.ShaderManager.registerPlugin("meshShader",b)},{"../../core":22}],121:[function(b,c,a){if(!Object.assign){Object.assign=b("object-assign")}},{"object-assign":5}],122:[function(b,c,a){b("./Object.assign");b("./requestAnimationFrame")},{"./Object.assign":121,"./requestAnimationFrame":123}],123:[function(b,c,a){(function(h){if(!(Date.now&&Date.prototype.getTime)){Date.now=function f(){return new Date().getTime()}}if(!(h.performance&&h.performance.now)){var g=Date.now();if(!h.performance){h.performance={}}h.performance.now=function(){return Date.now()-g}}var i=Date.now();var j=["ms","moz","webkit","o"];for(var d=0;d<j.length&&!h.requestAnimationFrame;++d){h.requestAnimationFrame=h[j[d]+"RequestAnimationFrame"];h.cancelAnimationFrame=h[j[d]+"CancelAnimationFrame"]||h[j[d]+"CancelRequestAnimationFrame"]}if(!h.requestAnimationFrame){h.requestAnimationFrame=function(m){if(typeof m!=="function"){throw new TypeError(m+"is not a function")}var l=Date.now(),k=16+i-l;if(k<0){k=0}i=l;return setTimeout(function(){i=Date.now();m(performance.now())},k)}}if(!h.cancelAnimationFrame){h.cancelAnimationFrame=function(k){clearTimeout(k)}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],124:[function(g,d,k){var h=g("../core"),q=g("eventemitter3"),j="tick";function a(){var s=this;this._tick=function r(t){s._requestId=null;if(s.started){s.update(t);if(s.started&&s._requestId===null&&s._emitter.listeners(j,true)){s._requestId=requestAnimationFrame(s._tick)}}};this._emitter=new q();this._requestId=null;this._maxElapsedMS=100;this.autoStart=false;this.deltaTime=1;this.elapsedMS=1/h.TARGET_FPMS;this.lastTime=0;this.speed=1;this.started=false}Object.defineProperties(a.prototype,{FPS:{get:function(){return 1000/this.elapsedMS}},minFPS:{get:function(){return 1000/this._maxElapsedMS},set:function(r){var s=Math.min(Math.max(0,r)/1000,h.TARGET_FPMS);this._maxElapsedMS=1/s}}});a.prototype._requestIfNeeded=function p(){if(this._requestId===null&&this._emitter.listeners(j,true)){this.lastTime=performance.now();this._requestId=requestAnimationFrame(this._tick)}};a.prototype._cancelIfNeeded=function f(){if(this._requestId!==null){cancelAnimationFrame(this._requestId);this._requestId=null}};a.prototype._startIfPossible=function o(){if(this.started){this._requestIfNeeded()}else{if(this.autoStart){this.start()}}};a.prototype.add=function n(s,r){this._emitter.on(j,s,r);this._startIfPossible();return this};a.prototype.addOnce=function b(s,r){this._emitter.once(j,s,r);this._startIfPossible();return this};a.prototype.remove=function l(s,r){this._emitter.off(j,s,r);if(!this._emitter.listeners(j,true)){this._cancelIfNeeded()}return this};a.prototype.start=function c(){if(!this.started){this.started=true;this._requestIfNeeded()}};a.prototype.stop=function m(){if(this.started){this.started=false;this._cancelIfNeeded()}};a.prototype.update=function i(s){var r;s=s||performance.now();r=this.elapsedMS=s-this.lastTime;if(r>this._maxElapsedMS){r=this._maxElapsedMS}this.deltaTime=r*h.TARGET_FPMS*this.speed;this._emitter.emit(j,this.deltaTime);this.lastTime=s};d.exports=a},{"../core":22,eventemitter3:4}],125:[function(b,c,a){var f=b("./Ticker");var d=new f();d.autoStart=true;c.exports={shared:d,Ticker:f}},{"./Ticker":124}],"pixi.js":[function(b,c,a){(function(f){b("./polyfill");var d=c.exports=b("./core");d.extras=b("./extras");d.filters=b("./filters");d.interaction=b("./interaction");d.loaders=b("./loaders");d.mesh=b("./mesh");d.ticker=b("./ticker");d.loader=new d.loaders.Loader();Object.assign(d,b("./deprecation"));f.PIXI=d;if(typeof define==="function"&&define.amd){define(function(){return d})}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./core":22,"./deprecation":70,"./extras":77,"./filters":94,"./interaction":109,"./loaders":112,"./mesh":118,"./polyfill":122,"./ticker":125}]},{},["pixi.js"]);