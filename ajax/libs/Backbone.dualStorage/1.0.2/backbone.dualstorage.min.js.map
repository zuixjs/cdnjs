{"version":3,"sources":["./1.0.2/backbone.dualstorage.js"],"names":["S4","backboneSync","callbackTranslator","dualsync","localsync","modelUpdatedWithResponse","onlineSync","parseRemoteResponse","result","Backbone","Collection","prototype","syncDirty","id","ids","model","store","url","_i","_len","_results","this","localStorage","getItem","split","length","where","get","push","save","syncDestroyed","collection","destroy","syncDirtyAndDestroyed","Math","random","toString","substring","window","Store","name","records","recordsOn","sep","generateId","setItem","join","key","dirty","dirtyRecords","_","include","clean","from","without","destroyed","destroyedRecords","create","isObject","set","idAttribute","JSON","stringify","update","clear","_ref","removeItem","hasDirtyOrDestroyed","isEmpty","find","parse","findAll","reject","record_id","needsTranslation","VERSION","forBackboneCaller","callback","resp","options","call","forDualstorageCaller","method","isValidModel","preExisting","response","Model","Error","storeName","add","merge","attributes","ignoreCallbacks","success","error","object","property","value","isFunction","parseBeforeLocalSave","modelClone","clone","sync","local","originalModel","remote","status","xhr","modelAttributes","responseModel","isArray","constructor","updatedModel","isString"],"mappings":"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","file":"./1.0.2/backbone.dualstorage.min.js"}