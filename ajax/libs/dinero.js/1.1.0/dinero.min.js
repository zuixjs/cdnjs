(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?module.exports=b():'function'==typeof define&&define.amd?define(b):a.Dinero=b()})(this,function(){'use strict';function a(a){return!isNaN(parseInt(a))&&isFinite(a)}function b(b){return a(b)&&100>=b&&0<=b}function c(a){return 0<a.length&&a.every(function(a){return 0<a})}function d(a){return 0==a%2}function e(b){return a(b)&&!q(b)}function f(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,b=a.toString().split('.')[1];return b?b.length:0}function g(a){return .5==p(a)%1}function h(){var a=Math.sign,b=Math.round,c=function(c,a){var b=function(a){return o(10,f(a))},d=Math.max(b(c),b(a));return c*d*(a*d)/(d*d)},h={HALF_ODD:function(a){var c=b(a);return g(a)?d(c)?c-1:c:c},HALF_EVEN:function(a){var c=b(a);return g(a)?d(c)?c:c-1:c},HALF_UP:function(a){return b(a)},HALF_DOWN:function(a){return g(a)?n(a):b(a)},HALF_TOWARDS_ZERO:function(c){return g(c)?a(c)*n(p(c)):b(c)},HALF_AWAY_FROM_ZERO:function(c){return g(c)?a(c)*Math.ceil(p(c)):b(c)}};return{add:function(c,a){return c+a},subtract:function(c,a){return c-a},multiply:function(d,a){return e(d)||e(a)?c(d,a):d*a},divide:function(c,a){return c/a},modulo:function(c,a){return c%a},round:function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'HALF_EVEN';return h[b](a)}}}function i(a){var b=/^(?:(\$|USD)?0(?:(,)0)?(\.)?(0+)?|0(?:(,)0)?(\.)?(0+)?\s?(dollar)?)$/gm.exec(a);return{getMatches:function(){return null===b?[]:b.slice(1).filter(function(a){return'undefined'!=typeof a})},getMinimumFractionDigits:function(){var a=function(a){return'.'===a};return'undefined'==typeof this.getMatches().find(a)?0:this.getMatches()[r.add(this.getMatches().findIndex(a),1)].split('').length},getCurrencyDisplay:function(){return{USD:'code',dollar:'name',$:'symbol'}[this.getMatches().find(function(a){return'USD'===a||'dollar'===a||'$'===a})]},getStyle:function(){return'undefined'==typeof this.getCurrencyDisplay(this.getMatches())?'decimal':'currency'},getUseGrouping:function(){return'undefined'!=typeof this.getMatches().find(function(a){return','===a})}}}function j(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:new Error;if(!a)throw b}function k(a){j(b(a),new RangeError('You must provide a numeric value between 0 and 100.'))}function l(a){j(c(a),new TypeError('You must provide a non-empty array of numeric values greater than 0.'))}function m(a){j(q(a),new TypeError('You must provide an integer.'))}var n=Math.floor,o=Math.pow,p=Math.abs,q=Number.isInteger,r=h(),s=h(),t=Object.assign(function a(b){var c=Object.assign({},{amount:a.defaultAmount,currency:a.defaultCurrency},b),d=c.amount,e=c.currency;m(d);var f=a.globalLocale,g=a.globalFormat,h=a.globalRoundingMode,p=a.globalFormatRoundingMode,q=function(b){var c=Object.assign({},Object.assign({},{amount:d,currency:e},b),Object.assign({},{locale:this.locale},b));return Object.assign(a({amount:c.amount,currency:c.currency}),{locale:c.locale})},r=function(a){j(this.hasSameCurrency(a),new TypeError('You must provide a Dinero instance with the same currency.'))};return{getAmount:function(){return d},getCurrency:function(){return e},getLocale:function(){return this.locale||f},setLocale:function(a){return q.call(this,{locale:a})},add:function(a){return r.call(this,a),q.call(this,{amount:s.add(this.getAmount(),a.getAmount())})},subtract:function(a){return r.call(this,a),q.call(this,{amount:s.subtract(this.getAmount(),a.getAmount())})},multiply:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h;return q.call(this,{amount:s.round(s.multiply(this.getAmount(),a),b)})},divide:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h;return q.call(this,{amount:s.round(s.divide(this.getAmount(),a),b)})},percentage:function(a){return k(a),this.multiply(s.divide(a,100))},allocate:function(a){var b=this;l(a);for(var c=a.reduce(function(c,a){return s.add(c,a)}),d=this.getAmount(),e=a.map(function(a){var e=n(s.divide(s.multiply(b.getAmount(),a),c));return d=s.subtract(d,e),q.call(b,{amount:e})}),f=0;0<d;f++)e[f]=e[f].add(q.call(this,{amount:1})),d=s.subtract(d,1);return e},equalsTo:function(a){return this.hasSameAmount(a)&&this.hasSameCurrency(a)},lessThan:function(a){return r.call(this,a),this.getAmount()<a.getAmount()},lessThanOrEqual:function(a){return r.call(this,a),this.getAmount()<=a.getAmount()},greaterThan:function(a){return r.call(this,a),this.getAmount()>a.getAmount()},greaterThanOrEqual:function(a){return r.call(this,a),this.getAmount()>=a.getAmount()},isZero:function(){return 0===this.getAmount()},isPositive:function(){return 0<=this.getAmount()},isNegative:function(){return 0>this.getAmount()},hasCents:function(){return 0!==s.modulo(this.getAmount(),100)},hasSameCurrency:function(a){return this.getCurrency()===a.getCurrency()},hasSameAmount:function(a){return this.getAmount()===a.getAmount()},toFormat:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:g,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:p,c=i(a);return this.toRoundedUnit(c.getMinimumFractionDigits(),b).toLocaleString(this.getLocale(),{currencyDisplay:c.getCurrencyDisplay(),useGrouping:c.getUseGrouping(),minimumFractionDigits:c.getMinimumFractionDigits(),style:c.getStyle(),currency:this.getCurrency()})},toUnit:function(){return s.divide(this.getAmount(),100)},toRoundedUnit:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:p,c=o(10,a);return s.divide(s.round(s.multiply(s.divide(this.getAmount(),100),c),b),c)},toObject:function(){return{amount:d,currency:e}}}},{defaultAmount:0,defaultCurrency:'USD'},{globalLocale:'en-US',globalFormat:'$0,0.00',globalRoundingMode:'HALF_EVEN',globalFormatRoundingMode:'HALF_AWAY_FROM_ZERO'});return t});
