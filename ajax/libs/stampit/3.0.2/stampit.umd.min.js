!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.stampit=r.stampit||{})}(this,function(r){"use strict";function e(r){var e=typeof r;return!!r&&("object"===e||"function"===e)}function t(r){return"function"==typeof r}function i(r){return!!r&&"object"==typeof r&&Object.getPrototypeOf(r)===Object.prototype}function o(r,t){if(void 0===t)return r;if(Array.isArray(t))return(Array.isArray(r)?r:[]).concat(t);if(!i(t))return t;for(var s=e(r)?r:{},n=Object.keys(t),p=0;p<n.length;p+=1){var c=n[p],a=t[c];if(void 0!==a){var f=s[c],u=i(f)||Array.isArray(a)?f:{};s[c]=o(u,a)}}return s}function s(r){return function e(i){for(var o=arguments.length,s=Array(o>1?o-1:0),n=1;n<o;n++)s[n-1]=arguments[n];var p=Object.create(r.methods||{});return l(p,r.deepProperties),h(p,r.properties),Object.defineProperties(p,r.propertyDescriptors||{}),r.initializers&&0!==r.initializers.length?(void 0===i&&(i={}),r.initializers.filter(t).reduce(function(r,t){var o=t.call(r,i,{instance:r,stamp:e,args:[i].concat(s)});return void 0===o?r:o},p)):p}}function n(r,e){var i=s(r);l(i,r.staticDeepProperties),h(i,r.staticProperties),Object.defineProperties(i,r.staticPropertyDescriptors||{});var o=t(i.compose)?i.compose:e;return i.compose=function(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];return o.apply(this,e)},h(i.compose,r),i}function p(r,i){var o=i&&i.compose||i;if(!e(o))return r;var s=function(t,i){e(o[t])&&(e(r[t])||(r[t]={}),i(r[t],o[t]))};return s("methods",h),s("properties",h),s("deepProperties",l),s("propertyDescriptors",h),s("staticProperties",h),s("staticDeepProperties",l),s("staticPropertyDescriptors",h),s("configuration",h),s("deepConfiguration",l),Array.isArray(o.initializers)&&(r.initializers=o.initializers.reduce(function(r,e){return t(e)&&r.indexOf(e)<0&&r.push(e),r},Array.isArray(r.initializers)?r.initializers:[])),r}function c(){for(var r=arguments.length,t=Array(r),i=0;i<r;i++)t[i]=arguments[i];var o=[this].concat(t).filter(e).reduce(p,{});return n(o,c)}function a(r){return t(r)&&t(r.compose)}function f(r,e){return function(){var t={};return t[r]=e.apply(void 0,[{}].concat(Array.prototype.slice.call(arguments))),(this&&this.compose||d).call(this,t)}}function u(){return(this&&this.compose||d).call(this,{initializers:y.apply(void 0,arguments)})}function d(){for(var r=arguments.length,t=Array(r),i=0;i<r;i++)t[i]=arguments[i];return t=t.filter(e).map(function(r){return a(r)?r:P(r)}),c.apply(this||_,t)}var y=function(){for(var r=[],e=0;e<arguments.length;e+=1){var i=arguments.length<=e+0?void 0:arguments[e+0];t(i)?r.push(i):Array.isArray(i)&&(r=r.concat(i.filter(t)))}return 0===r.length?void 0:r},l=function(r){for(var e=arguments.length,t=Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return t.reduce(o,r)},v=Object.assign,P=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.methods,i=r.properties,o=r.props,s=r.refs,n=r.initializers,p=r.init,c=r.deepProperties,a=r.deepProps,f=r.propertyDescriptors,u=r.staticProperties,d=r.statics,P=r.staticDeepProperties,h=r.deepStatics,g=r.staticPropertyDescriptors,m=r.configuration,D=r.conf,A=r.deepConfiguration,b=r.deepConf,j=e(o)||e(s)||e(i)?v({},o,s,i):void 0,z=e(a)?l({},a):void 0;z=e(c)?l(z,c):z;var O=e(d)||e(u)?v({},d,u):void 0,C=e(h)?l({},h):void 0;C=e(P)?l(C,P):C;var x=e(D)||e(m)?v({},D,m):void 0,S=e(b)?l({},b):void 0;return S=e(A)?l(S,A):S,{methods:t,properties:j,initializers:y(p,n),deepProperties:z,staticProperties:O,staticDeepProperties:C,propertyDescriptors:f,staticPropertyDescriptors:g,configuration:x,deepConfiguration:S}},h=Object.assign,g=Object.assign,m=f("methods",g),D=f("properties",g),A=f("deepProperties",l),b=f("staticProperties",g),j=f("staticDeepProperties",l),z=f("configuration",g),O=f("deepConfiguration",l),C=f("propertyDescriptors",g),x=f("staticPropertyDescriptors",g),S={methods:m,properties:D,refs:D,props:D,initializers:u,init:u,deepProperties:A,deepProps:A,staticProperties:b,statics:b,staticDeepProperties:j,deepStatics:j,configuration:z,conf:z,deepConfiguration:O,deepConf:O,propertyDescriptors:C,staticPropertyDescriptors:x},_=c({staticProperties:S},{staticProperties:{create:function(){return this.apply(void 0,arguments)},compose:d}}),k=d.bind();d.compose=k;var M=g(d,S);r.methods=m,r.properties=D,r.refs=D,r.props=D,r.initializers=u,r.init=u,r.deepProperties=A,r.deepProps=A,r.staticProperties=b,r.statics=b,r.staticDeepProperties=j,r.deepStatics=j,r.configuration=z,r.conf=z,r.deepConfiguration=O,r.deepConf=O,r.propertyDescriptors=C,r.staticPropertyDescriptors=x,r.compose=k,r.default=M,Object.defineProperty(r,"__esModule",{value:!0})});
