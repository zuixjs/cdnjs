!function(e){"use strict";"function"==typeof define&&define.amd?define(["angular","moment"],e):"object"==typeof exports?module.exports=e(require("angular"),require("moment")):e(window.angular,window.moment)}(function(e,t){"use strict";e.module("ui.bootstrap.datetimepicker",[]).constant("dateTimePickerConfig",{configureOn:null,dropdownSelector:null,minuteStep:5,minView:"minute",renderOn:null,startView:"day"}).directive("datetimepicker",["$log","dateTimePickerConfig",function(a,r){function n(){var e=new Date,t=6e4*e.getTimezoneOffset();this.utcDateValue=e.getTime(),this.selectable=!0,this.localDateValue=function(){return this.utcDateValue+t};var a=["utcDateValue","localDateValue","display","active","selectable","past","future"];for(var r in arguments[0])a.indexOf(r)>=0&&(this[r]=arguments[0][r])}var i=function(t){var r=["configureOn","dropdownSelector","minuteStep","minView","renderOn","startView"];for(var n in t)if(r.indexOf(n)<0)throw"invalid option: "+n;var i=["minute","hour","day","month","year"];if(i.indexOf(t.startView)<0)throw"invalid startView value: "+t.startView;if(i.indexOf(t.minView)<0)throw"invalid minView value: "+t.minView;if(i.indexOf(t.minView)>i.indexOf(t.startView))throw"startView must be greater than minView";if(!e.isNumber(t.minuteStep))throw"minuteStep must be numeric";if(t.minuteStep<=0||t.minuteStep>=60)throw"minuteStep must be greater than zero and less than 60";if(null!==t.configureOn&&!e.isString(t.configureOn))throw"configureOn must be a string";if(null!==t.configureOn&&t.configureOn.length<1)throw"configureOn must not be an empty string";if(null!==t.renderOn&&!e.isString(t.renderOn))throw"renderOn must be a string";if(null!==t.renderOn&&t.renderOn.length<1)throw"renderOn must not be an empty string";if(null!==t.dropdownSelector&&!e.isString(t.dropdownSelector))throw"dropdownSelector must be a string";null===t.dropdownSelector||"undefined"!=typeof jQuery&&"function"==typeof jQuery().dropdown||(a.error("Please DO NOT specify the dropdownSelector option unless you are using jQuery AND Bootstrap.js. Please include jQuery AND Bootstrap.js, or write code to close the dropdown in the on-set-time callback. \n\nThe dropdownSelector configuration option is being removed because it will not function properly."),delete t.dropdownSelector)};return{restrict:"E",require:"ngModel",template:'<div class="datetimepicker table-responsive"><table class="table table-condensed  {{ data.currentView }}-view">   <thead>       <tr>           <th class="left" data-ng-click="changeView(data.currentView, data.leftDate, $event)" data-ng-show="data.leftDate.selectable"><i class="glyphicon glyphicon-arrow-left"/></th>           <th class="switch" colspan="5" data-ng-show="data.previousViewDate.selectable" data-ng-click="changeView(data.previousView, data.previousViewDate, $event)">{{ data.previousViewDate.display }}</th>           <th class="right" data-ng-click="changeView(data.currentView, data.rightDate, $event)" data-ng-show="data.rightDate.selectable"><i class="glyphicon glyphicon-arrow-right"/></th>       </tr>       <tr>           <th class="dow" data-ng-repeat="day in data.dayNames" >{{ day }}</th>       </tr>   </thead>   <tbody>       <tr data-ng-if="data.currentView !== \'day\'" >           <td colspan="7" >              <span    class="{{ data.currentView }}"                        data-ng-repeat="dateObject in data.dates"                         data-ng-class="{active: dateObject.active, past: dateObject.past, future: dateObject.future, disabled: !dateObject.selectable}"                        data-ng-click="changeView(data.nextView, dateObject, $event)">{{ dateObject.display }}</span>            </td>       </tr>       <tr data-ng-if="data.currentView === \'day\'" data-ng-repeat="week in data.weeks">           <td data-ng-repeat="dateObject in week.dates"                data-ng-click="changeView(data.nextView, dateObject, $event)"               class="day"                data-ng-class="{active: dateObject.active, past: dateObject.past, future: dateObject.future, disabled: !dateObject.selectable}" >{{ dateObject.display }}</td>       </tr>   </tbody></table></div>',scope:{onSetTime:"&",beforeRender:"&"},replace:!0,link:function(a,u,o,d){var l=function(){var t={};o.datetimepickerConfig&&(t=a.$parent.$eval(o.datetimepickerConfig));var n={};return e.extend(n,r,t),i(n),n},s=l(),c=function(e){var a=10*parseInt(t.utc(e).year()/10,10);return t.utc(e).year(a).startOf("year")},f={year:function(e){for(var a=t.utc(e).startOf("year"),r=10*parseInt(a.year()/10,10),i=t.utc(c(e)).subtract(1,"year").startOf("year"),u=d.$modelValue?t(d.$modelValue).year():0,o={currentView:"year",nextView:"year"===s.minView?"setTime":"month",previousViewDate:new n({utcDateValue:null,display:r+"-"+(r+9)}),leftDate:new n({utcDateValue:t.utc(i).subtract(9,"year").valueOf()}),rightDate:new n({utcDateValue:t.utc(i).add(11,"year").valueOf()}),dates:[]},l=0;12>l;l+=1){var f=t.utc(i).add(l,"years"),w={utcDateValue:f.valueOf(),display:f.format("YYYY"),past:f.year()<r,future:f.year()>r+9,active:f.year()===u};o.dates.push(new n(w))}return o},month:function(e){for(var a=t.utc(e).startOf("year"),r=c(e),i=d.$modelValue?t(d.$modelValue).format("YYYY-MMM"):0,u={previousView:"year",currentView:"month",nextView:"month"===s.minView?"setTime":"day",previousViewDate:new n({utcDateValue:r.valueOf(),display:a.format("YYYY")}),leftDate:new n({utcDateValue:t.utc(a).subtract(1,"year").valueOf()}),rightDate:new n({utcDateValue:t.utc(a).add(1,"year").valueOf()}),dates:[]},o=0;12>o;o+=1){var l=t.utc(a).add(o,"months"),f={utcDateValue:l.valueOf(),display:l.format("MMM"),active:l.format("YYYY-MMM")===i};u.dates.push(new n(f))}return u},day:function(e){for(var a=t.utc(e),r=t.utc(a).startOf("month"),i=t.utc(a).startOf("year"),u=t.utc(a).endOf("month"),o=t.utc(r).subtract(Math.abs(r.weekday()),"days"),l=d.$modelValue?t(d.$modelValue).format("YYYY-MMM-DD"):"",c={previousView:"month",currentView:"day",nextView:"day"===s.minView?"setTime":"hour",previousViewDate:new n({utcDateValue:i.valueOf(),display:r.format("YYYY-MMM")}),leftDate:new n({utcDateValue:t.utc(r).subtract(1,"months").valueOf()}),rightDate:new n({utcDateValue:t.utc(r).add(1,"months").valueOf()}),dayNames:[],weeks:[]},f=0;7>f;f+=1)c.dayNames.push(t.utc().weekday(f).format("dd"));for(var w=0;6>w;w+=1){for(var m={dates:[]},p=0;7>p;p+=1){var V=t.utc(o).add(7*w+p,"days"),h={utcDateValue:V.valueOf(),display:V.format("D"),active:V.format("YYYY-MMM-DD")===l,past:V.isBefore(r),future:V.isAfter(u)};m.dates.push(new n(h))}c.weeks.push(m)}return c},hour:function(e){for(var a=t.utc(e).startOf("day"),r=t.utc(a).startOf("month"),i=d.$modelValue?t(d.$modelValue).format("YYYY-MM-DD H"):"",u={previousView:"day",currentView:"hour",nextView:"hour"===s.minView?"setTime":"minute",previousViewDate:new n({utcDateValue:r.valueOf(),display:a.format("ll")}),leftDate:new n({utcDateValue:t.utc(a).subtract(1,"days").valueOf()}),rightDate:new n({utcDateValue:t.utc(a).add(1,"days").valueOf()}),dates:[]},o=0;24>o;o+=1){var l=t.utc(a).add(o,"hours"),c={utcDateValue:l.valueOf(),display:l.format("LT"),active:l.format("YYYY-MM-DD H")===i};u.dates.push(new n(c))}return u},minute:function(e){for(var a=t.utc(e).startOf("hour"),r=t.utc(a).startOf("day"),i=d.$modelValue?t(d.$modelValue).format("YYYY-MM-DD H:mm"):"",u={previousView:"hour",currentView:"minute",nextView:"setTime",previousViewDate:new n({utcDateValue:r.valueOf(),display:a.format("lll")}),leftDate:new n({utcDateValue:t.utc(a).subtract(1,"hours").valueOf()}),rightDate:new n({utcDateValue:t.utc(a).add(1,"hours").valueOf()}),dates:[]},o=60/s.minuteStep,l=0;o>l;l+=1){var c=t.utc(a).add(l*s.minuteStep,"minute"),f={utcDateValue:c.valueOf(),display:c.format("LT"),active:c.format("YYYY-MM-DD H:mm")===i};u.dates.push(new n(f))}return u},setTime:function(e){var t=new Date(e),r=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),n=d.$modelValue;return d.$setViewValue(r),s.dropdownSelector&&jQuery(s.dropdownSelector).dropdown("toggle"),a.onSetTime({newDate:r,oldDate:n}),f[s.startView](e)}},w=function(e){var a=e?t(e).toDate():new Date;return a.getTime()-6e4*a.getTimezoneOffset()};a.changeView=function(e,t,r){if(r&&(r.stopPropagation(),r.preventDefault()),e&&t.utcDateValue>-(1/0)&&t.selectable&&f[e]){var n=f[e](t.utcDateValue),i=[];if(n.weeks)for(var u=0;u<n.weeks.length;u+=1)for(var o=n.weeks[u],d=0;d<o.dates.length;d+=1){var l=o.dates[d];i.push(l)}a.beforeRender({$view:n.currentView,$dates:n.dates||i,$leftDate:n.leftDate,$upDate:n.previousViewDate,$rightDate:n.rightDate}),a.data=n}},d.$render=function(){a.changeView(s.startView,new n({utcDateValue:w(d.$viewValue)}))},s.configureOn&&a.$on(s.configureOn,function(){s=l(),d.$render()}),s.renderOn&&a.$on(s.renderOn,d.$render)}}}])});