!function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var r=t[s][1][e];return i(r?r:e)},f,f.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(r,"__esModule",{value:!0}),r.socket=r.collections=r.administration=void 0;var i=e("./RxSchema"),o=n(i);r.administration=o.create({properties:{key:{type:"string",primary:!0},value:{type:"string"}},required:["value"]}),r.collections=o.create({properties:{name:{type:"string",primary:!0},schemaHash:{type:"string"}},required:["schemaHash"]}),r.socket=o.create({properties:{it:{description:"token of the db-instance",type:"string",index:!0},t:{description:"timestamp unix",type:"number",min:100},op:{description:"operation-code of the changeEvent",type:"string"},col:{description:"collection-name",type:"string"},doc:{description:"Document._id",type:"string"},v:{description:"the value, maybe encrypted or JSON.stringify",type:"string"}},required:["it","t","op"]})},{"./RxSchema":8}],2:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("pouchdb-core"),s=i(o),a=e("pouchdb-find"),u=n(a);s.default.plugin(u),r.default=s.default},{"pouchdb-core":194,"pouchdb-find":212}],3:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return new p(e)}function s(e,t){var r="RxDocument.insert";"1"==e._rev.charAt(0)&&"-"==e._rev.charAt(1)&&(r="RxDocument.save");var n={op:r,t:(new Date).getTime(),db:"remote",col:t.name,it:t.database.token,doc:e._id,v:e};return new p(n)}function a(e,t,r,n,i){var o={op:e,t:(new Date).getTime(),db:t.prefix,it:t.token};r&&(o.col=r.name),n&&(o.doc=n.rawData._id),i&&(o.v=i);var s=new p(o);return s}Object.defineProperty(r,"__esModule",{value:!0});var u=e("babel-runtime/helpers/classCallCheck"),c=i(u),f=e("babel-runtime/helpers/createClass"),l=i(f);r.fromJSON=o,r.fromPouchChange=s,r.create=a;var h=e("./util"),d=n(h),p=function(){function e(t){(0,c.default)(this,e),this.data=t}return(0,l.default)(e,[{key:"toJSON",value:function(){var e={op:this.data.op,t:this.data.t,db:this.data.db,it:this.data.it};return this.data.col&&(e.col=this.data.col),this.data.doc&&(e.doc=this.data.doc),this.data.v&&(e.v=this.data.v),e}},{key:"isIntern",value:function(){return!(!this.data.col||"_"!=this.data.col.charAt(0))}},{key:"hash",value:function(){return this._hash||(this._hash=d.hash(this.data)),this._hash}}]),e}()},{"./util":13,"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26}],4:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.create=void 0;var o=e("babel-runtime/regenerator"),s=i(o),a=e("babel-runtime/helpers/asyncToGenerator"),u=i(a),c=e("babel-runtime/helpers/classCallCheck"),f=i(c),l=e("babel-runtime/helpers/createClass"),h=i(l),d=(r.create=function(){var e=(0,u.default)(s.default.mark(function e(t,r,n){var i;arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("RxSchema"==n.constructor.name){e.next=2;break}throw new TypeError("given schema is no Schema-object");case 2:if("RxDatabase"==t.constructor.name){e.next=4;break}throw new TypeError("given database is no Database-object");case 4:if("string"==typeof r&&0!=r.length){e.next=6;break}throw new TypeError("given name is no string or empty");case 6:return i=new O(t,r,n),e.next=9,i.prepare();case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}},e,this)}));return function(t,r,n,i){return e.apply(this,arguments)}}(),e("./PouchDB")),p=i(d),y=e("object-path"),v=i(y),b=e("clone"),m=i(b),g=e("./util"),_=n(g),w=e("./RxDocument"),x=n(w),k=e("./RxQuery"),E=n(k),S=e("./RxChangeEvent"),j=n(S),O=function(){function e(t,r,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,f.default)(this,e),this.$=function(){return i.observable$},this.$emit=function(e){return i.database.$emit(e)},this.database=t,this.name=r,this.schema=n,this.synced=!1;var s={db:this.database.adapter};"string"==typeof this.database.adapter&&(s={adapter:this.database.adapter}),this.pouch=new p.default(t.prefix+":RxDB:"+r,s,o),this.observable$=this.database.$().filter(function(e){return e.data.col==i.name})}return(0,h.default)(e,[{key:"prepare",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){var t=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.schema.indexes.map(function(e){return t.pouch.createIndex({index:{fields:e}})}));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"insert",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(t){var r,n,i,o,a,u,c=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=2;break}throw new Error("do not provide ._id, it will be generated");case 2:return t=(0,m.default)(t),t._id=_.generate_id(),this.schema.validate(t),r=this.schema.getEncryptedPaths(),Object.keys(r).map(function(e){var r=v.default.get(t,e),n=c.database._encrypt(r);v.default.set(t,e,n)}),n=this.schema.swapPrimaryToId(t),e.next=10,this.pouch.put(n);case 10:return i=e.sent,o=t,o._id=i.id,o._rev=i.rev,a=x.create(this,o,{}),u=j.create("RxCollection.insert",this.database,this,a,o),this.$emit(u),e.abrupt("return",a);case 18:case"end":return e.stop()}},e,this)}));return e}()},{key:"find",value:function(e){var t=this;if("string"==typeof e)throw new Error("if you want to search by _id, use .findOne(_id)");var r=E.create(e,this);return r.exec=(0,u.default)(s.default.mark(function e(){var n,i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.toJSON(),e.next=3,t.pouch.find(n);case 3:return i=e.sent,o=x.createAr(t,i.docs,n),e.abrupt("return",o);case 6:case"end":return e.stop()}},e,t)})),r}},{key:"findOne",value:function(e){var t=this,r=void 0;return r="string"==typeof e?E.create({_id:e},this):E.create(e,this),r.exec=(0,u.default)(s.default.mark(function e(){var n,i,o,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.toJSON(),n.limit=1,e.next=4,t.pouch.find(n);case 4:if(i=e.sent,0!==i.docs.length){e.next=7;break}return e.abrupt("return",null);case 7:return o=i.docs.shift(),a=x.create(t,o,n),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,t)})),r.limit=function(e,t){throw new Error(".limit() cannot be called on .findOne()")},r}},{key:"query",value:function e(t){if("string"==typeof t)throw new Error("if you want to search by _id, use .findOne(_id)");var e=E.create(t,this);return e}},{key:"dump",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){var t,r,n=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:this.name,schemaHash:this.schema.hash(),encrypted:!1,passwordHash:null,docs:[]},this.database.password&&(t.passwordHash=_.hash(this.database.password),i?t.encrypted=!1:t.encrypted=!0),e.next=4,this.find().exec();case 4:return r=e.sent,r.map(function(e){var r=e.rawData;n.database.password&&i&&(r=Object.assign(e.rawData,e.data)),delete r._rev,t.docs.push(r)}),e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"importDump",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(t){var r,n,i=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.schemaHash==this.schema.hash()){e.next=2;break}throw new Error("the imported json relies on a different schema");case 2:if(!t.encrypted||t.passwordHash==_.hash(this.database.password)){e.next=4;break}throw new Error("json.passwordHash does not match the own");case 4:return r=[],t.docs.map(function(e){if(e=(0,m.default)(e),t.encrypted){var n=i.schema.getEncryptedPaths();Object.keys(n).map(function(t){var r=v.default.get(e,t);if(r){var n=i.database._decrypt(r);v.default.set(e,t,n)}})}r.push(e)}),r.map(function(e){i.schema.validate(e)}),n=[],t.docs.map(function(e){n.push(i.pouch.put(e))}),e.next=11,Promise.all(n);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"sync",value:function(e){var t=this;return this.synced||!function(){var e={};_.Rx.Observable.fromEvent(t.pouch.changes({since:"now",live:!0,include_docs:!0}),"change").filter(function(e){return"_"!=e.id.charAt(0)}).map(function(e){return e.doc}).map(function(e){return e._ext=!0,e}).filter(function(t){return e[t._rev]="YES"}).delay(10).map(function(t){var r=null;return"YES"==e[t._rev]&&(r=t),delete e[t._rev],r}).filter(function(e){return null!=e}).subscribe(function(e){t.$emit(j.fromPouchChange(e,t))}),t.$().map(function(e){return e.data.v}).map(function(t){e[t._rev]&&(e[t._rev]="NO")}).subscribe()}(),this.synced=!0,this.pouch.sync(e,{live:!0,retry:!0}).on("error",function(e){throw console.log("sync error:"),console.log(JSON.stringify(e)),new Error(e)})}}]),e}()},{"./PouchDB":2,"./RxChangeEvent":3,"./RxDocument":6,"./RxQuery":7,"./util":13,"babel-runtime/helpers/asyncToGenerator":24,"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,"babel-runtime/regenerator":28,clone:34,"object-path":175}],5:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.RxSchema=r.create=void 0;var o=e("babel-runtime/regenerator"),s=i(o),a=e("babel-runtime/helpers/asyncToGenerator"),u=i(a),c=e("babel-runtime/helpers/classCallCheck"),f=i(c),l=e("babel-runtime/helpers/createClass"),h=i(l),d=(r.create=function(){var e=(0,u.default)(s.default.mark(function e(t,r,n,i){var o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError("given prefix is no string ");case 2:if("string"!=typeof r){e.next=7;break}if(j.default.adapters&&j.default.adapters[r]){e.next=5;break}throw new Error("Adapter "+r+" not added. Use RxDB.PouchDB.plugin(require('pouchdb-adapter-"+r+"'));");case 5:e.next=10;break;case 7:if(v.isLevelDown(r),j.default.adapters&&j.default.adapters.leveldb){e.next=10;break}throw new Error("To use leveldown-adapters, you have to add the leveldb-plugin. Use RxDB.PouchDB.plugin(require('pouchdb-adapter-leveldb'));");case 10:if(!n||"string"==typeof n){e.next=12;break}throw new TypeError("password is no string");case 12:if(!(n&&n.length<O.settings.minPassLength)){e.next=14;break}throw new Error("password must be at least "+O.settings.minPassLength+" chars");case 14:return o=new O(t,r,n,i),e.next=17,o.prepare();case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}},e,this)}));return function(t,r,n,i){return e.apply(this,arguments)}}(),e("random-token")),p=i(d),y=e("./util"),v=n(y),b=e("./RxCollection"),m=n(b),g=e("./RxSchema"),_=n(g),w=e("./Database.schemas"),x=n(w),k=e("./RxChangeEvent"),E=n(k),S=e("./PouchDB"),j=i(S),O=function(){function e(t,r,n,i){var o=this;if((0,f.default)(this,e),this.$=function(){return o.observable$},this._cleanSocket_running=!1,this.prefix=t,this.adapter=r,this.token=(0,p.default)(10),this.password=n,this.collections={},this.pull$Count=0,this.subject=new v.Rx.Subject,this.observable$=this.subject.asObservable().filter(function(e){return"RxChangeEvent"==e.constructor.name}),this.multiInstance=i||!1,this.isPulling=!1,this.lastPull=(new Date).getTime(),this.recievedEvents={},this.autoPull$,this.multiInstance){var s=200;v.hasBroadcastChannel()&&(s=1e3,this.bc$=new BroadcastChannel("RxDB:"+this.prefix),this.bc$.onmessage=function(e){e.data!=o.token&&o.$pull()}),this.autoPull$=v.Rx.Observable.interval(s).subscribe(function(e){return o.$pull()})}}return(0,h.default)(e,[{key:"prepare",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){var t,r=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([m.create(this,"_admin",x.administration,{auto_compaction:!0}).then(function(e){return r.administrationCollection=e}),m.create(this,"_collections",x.collections).then(function(e){return r.collectionsCollection=e}),m.create(this,"_socket",x.socket).then(function(e){return r.socketCollection=e})]);case 2:return e.next=4,this.administrationCollection.findOne({key:"pwHash"}).exec();case 4:if(t=e.sent,t||!this.password){e.next=8;break}return e.next=8,this.administrationCollection.insert({key:"pwHash",value:v.hash(this.password)});case 8:if(!t||!this.password||v.hash(this.password)==t.get("value")){e.next=10;break}throw new Error("another instance on this adapter has a different password");case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"$emit",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(t){var r,n,i,o=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:this.subject.next(t),this.multiInstance&&!t.isIntern()&&t.data.it==this.token&&(r=t.toJSON(),delete r.db,r.v&&(this.password?r.v=this._encrypt(r.v):r.v=JSON.stringify(r.v)),this.socketCollection.insert(r).then(function(){o.bc$&&o.bc$.postMessage(o.token)}),n=v.fastUnsecureHash(this.token+t.hash()),i=n%10,0==i&&this._cleanSocket());case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"_cleanSocket",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){var t,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._cleanSocket_running){e.next=2;break}return e.abrupt("return");case 2:return this._cleanSocket_running=!0,t=(new Date).getTime()-1200,e.next=6,this.socketCollection.find({t:{$lt:t}}).exec();case 6:return r=e.sent,e.next=9,Promise.all(r.map(function(e){return e.remove()}));case 9:this._cleanSocket_running=!1;case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"$pull",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){var t,r=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.pull$Count++,this.subject&&this.socketCollection){e.next=3;break}return e.abrupt("return");case 3:if(!this.isPulling){e.next=6;break}return this._repull=!0,e.abrupt("return");case 6:return this.isPulling=!0,t=this.lastPull-50,e.next=10,this.socketCollection.find({it:{$ne:this.token},t:{$gt:t}}).exec().then(function(e){return e.sort(function(e,t){return e.data.t>t.data.t?1:-1})}).then(function(e){e.map(function(e){return E.fromJSON(e.data)}).filter(function(e){return!r.recievedEvents[e.hash()]&&(r.recievedEvents[e.hash()]=(new Date).getTime())}).filter(function(e){return setTimeout(function(){return delete r.recievedEvents[e.hash()]},2e4)}).map(function(e){return e.data.v&&(r.password?e.data.v=r._decrypt(e.data.v):e.data.v=JSON.parse(e.data.v)),e}).forEach(function(e){return r.$emit(e)})});case 10:return this.lastPull=(new Date).getTime(),this.isPulling=!1,this._repull&&(this._repull=!1,this.$pull()),e.abrupt("return",!0);case 14:case"end":return e.stop()}},e,this)}));return e}()},{key:"_encrypt",value:function(e){if(!this.password)throw new Error("no passord given");return v.encrypt(JSON.stringify(e),this.password)}},{key:"_decrypt",value:function(e){if(!this.password)throw new Error("no passord given");var t=v.decrypt(e,this.password);return JSON.parse(t)}},{key:"collection",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(t,r){var n,i,o,a,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("_"!=t.charAt(0)){e.next=2;break}throw new Error("collection-names cannot start with underscore _");case 2:if(r&&"RxSchema"!=r.constructor.name&&(r=_.create(r)),this.collections[t]){e.next=25;break}return n=r.hash(),e.next=7,this.collectionsCollection.findOne({name:t}).exec();case 7:if(i=e.sent,!i||i.get("schemaHash")==n){e.next=10;break}throw new Error("another instance created this collection with a different schema");case 10:return e.next=12,m.create(this,t,r,u);case 12:if(o=e.sent,!(Object.keys(o.schema.getEncryptedPaths()).length>0)||this.password){e.next=15;break}throw new Error("schema encrypted but no password given");case 15:if(i){e.next=18;break}return e.next=18,this.collectionsCollection.insert({name:t,schemaHash:n});case 18:a=E.create("RxDatabase.collection",this),a.data.v=o.name,a.data.col="_collections",this.$emit(a),this.collections[t]=o,e.next=27;break;case 25:if(!r||r.hash()==this.collections[t].schema.hash()){e.next=27;break}throw new Error("collection "+t+" already has a different schema");case 27:return e.abrupt("return",this.collections[t]);case 28:case"end":return e.stop()}},e,this)}));return e}()},{key:"destroy",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.bc$.close();case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"dump",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){var t,r,n=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:this.prefix,instanceToken:this.token,encrypted:!1,passwordHash:null,collections:[]},this.password&&(t.passwordHash=v.hash(this.password),i?t.encrypted=!1:t.encrypted=!0),r=Object.keys(this.collections).filter(function(e){return!o||o.includes(e)}).filter(function(e){return"_"!=e.charAt(0)}).map(function(e){return n.collections[e]}),e.next=5,Promise.all(r.map(function(e){return e.dump(i)}));case 5:return t.collections=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"importDump",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(t){var r=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.collections.filter(function(e){return r.collections[e.name]}).map(function(e){return r.collections[e.name].importDump(e)})));case 1:case"end":return e.stop()}},e,this)}));return e}()}]),e}();O.settings={minPassLength:8},r.RxSchema=_},{"./Database.schemas":1,"./PouchDB":2,"./RxChangeEvent":3,"./RxCollection":4,"./RxSchema":8,"./util":13,"babel-runtime/helpers/asyncToGenerator":24,"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,"babel-runtime/regenerator":28,"random-token":236}],6:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){if(t._id.startsWith("_design"))return null;var n=new x(e,t,r);return n}function s(e,t,r){var n=[],i=!0,s=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=u.value;f._id.startsWith("_design")||n.push(o(e,f,r))}}catch(e){s=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw a}}return n}Object.defineProperty(r,"__esModule",{value:!0});var a=e("babel-runtime/regenerator"),u=i(a),c=e("babel-runtime/helpers/asyncToGenerator"),f=i(c),l=e("babel-runtime/helpers/classCallCheck"),h=i(l),d=e("babel-runtime/helpers/createClass"),p=i(d);r.create=o,r.createAr=s;var y=e("clone"),v=i(y),b=e("object-path"),m=i(b),g=e("./util"),_=(n(g),e("./RxChangeEvent")),w=n(_),x=function(){function e(t,r,n){var i=this;(0,h.default)(this,e),this.$emit=function(e){return i.collection.$emit(e)},this.collection=t,this.rawData=r,this.query=n,this.data=(0,v.default)(this.rawData),delete this.data._rev,delete this.data._id;var o=this.collection.schema.getEncryptedPaths(),s=void 0;Object.keys(o).map(function(e){return s=e}).map(function(e){return m.default.get(i.data,s)}).filter(function(e){return!!e}).map(function(e){return i.collection.database._decrypt(e)}).forEach(function(e){return m.default.set(i.data,s,e)}),this.deleted=!1,this.changed=!1,this.observable$=this.collection.$().filter(function(e){return e.data.doc==i.rawData._id||"*"==e.data.doc})}return(0,p.default)(e,[{key:"$",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){var t=this.collection.schema.getSchemaByObjectPath(e);if(!t)throw new Error("cannot observe a non-existed field ("+e+")");return this.observable$.map(function(t){return m.default.get(t.data.v,e)}).distinctUntilChanged().startWith(this.get(e))}return this.observable$}},{key:"get",value:function(e){if("string"!=typeof e)throw new TypeError("RxDocument.get(): objPath must be a string");return e==this.collection.schema.primaryPath?this.rawData._id:m.default.get(this.data,e)}},{key:"set",value:function(e,t){if("string"!=typeof e)throw new TypeError("RxDocument.set(): objPath must be a string");if("_id"==e)throw new Error("_id cannot be modified");if(e==this.collection.schema.primaryPath)throw new Error("primary-fields cannot be modified");if(!Object.is(this.get(e),t)){this.changed=!0;var r=e.split(".");r.pop();var n=r.join(".");if("undefined"==typeof m.default.get(this.data,n))throw new Error("cannot set childpath "+e+" when rootPath "+n+" not selected");var i=this.collection.schema.getSchemaByObjectPath(e);return this.collection.schema.validate(t,i),m.default.set(this.data,e,t),m.default.set(this.rawData,e,t),this}}},{key:"save",value:function(){function e(){return t.apply(this,arguments)}var t=(0,f.default)(u.default.mark(function e(){var t,r,n,i,o=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.changed){e.next=2;break}return e.abrupt("return");case 2:if(!this.deleted){e.next=4;break}throw new Error("RxDocument.save(): cant save deleted document");case 4:if(!this.query.fields){e.next=10;break}return e.next=7,this.collection.findOne(this.rawData._id).exec();case 7:t=e.sent,this.rawData=Object.assign(t.rawData,this.rawData),this.data=Object.assign(t.data,this.data);case 10:return r=(0,v.default)(this.rawData),n=this.collection.schema.getEncryptedPaths(),Object.keys(n).map(function(e){var t=m.default.get(o.rawData,e),r=o.collection.database._encrypt(t);m.default.set(o.rawData,e,r)}),e.next=15,this.collection.pouch.put(this.rawData);case 15:if(i=e.sent,i.ok){e.next=18;break}throw new Error("RxDocument.save(): error "+JSON.stringify(i));case 18:this.rawData._rev=i.rev,this.$emit(w.create("RxDocument.save",this.collection.database,this.collection,this,r)),this.changed=!1;case 21:case"end":return e.stop()}},e,this)}));return e}()},{key:"remove",value:function(){function e(){return t.apply(this,arguments)}var t=(0,f.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.deleted){e.next=2;break}throw new Error("RxDocument.remove(): Document is already deleted");case 2:return this.deleted=!0,e.next=5,this.collection.pouch.remove(this.rawData._id,this.rawData._rev);case 5:this.$emit(w.create("RxDocument.remove",this.collection.database,this.collection,this,null));case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"destroy",value:function(){}}]),e}()},{"./RxChangeEvent":3,"./util":13,"babel-runtime/helpers/asyncToGenerator":24,"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,"babel-runtime/regenerator":28,clone:34,"object-path":175}],7:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments[1];if(Array.isArray(e))throw new TypeError("query cannot be an array");return new x(e,t)}Object.defineProperty(r,"__esModule",{value:!0});var s=e("babel-runtime/regenerator"),a=i(s),u=e("babel-runtime/helpers/asyncToGenerator"),c=i(u),f=e("babel-runtime/helpers/classCallCheck"),l=i(f),h=e("babel-runtime/helpers/createClass"),d=i(h);r.create=o;var p=e("./mquery/mquery"),y=i(p),v=e("./util"),b=n(v),m=e("./RxDocument"),g=n(m),_={_id:{}},w=["exec","collection","result"],x=function(){function e(t,r){var n=this;(0,l.default)(this,e),this.collection=r,this.subject$,this.collectionSub$,this.defaultQuery=!1,t&&(0!==Object.keys(t).length||Array.isArray(t))||(t=_,this.defaultQuery=!0),this.mquery=(0,y.default)(t);var i=Object.getPrototypeOf(this.mquery);Object.keys(i).map(function(e){w.includes(e)||"function"!=typeof i[e]||(n[e]=function(t){return n.mquery[e](t),n})}),this.sort=function(e){return Object.keys(e).map(function(e){return n.mquery.where(e).gt(null)}),n.mquery.sort(e),n}}return(0,d.default)(e,[{key:"$",value:function(){var e=this;return this.subject$?this.subject$.asObservable():(this.subject$=new b.Rx.BehaviorSubject(null),this.refresh$(),this.collectionSub$=this.collection.$().filter(function(t){return e.subject$.observers.length>0}).filter(function(e){return["RxCollection.insert","RxDocument.save"].includes(e.data.op)}).subscribe(function(t){return e.refresh$()}),this.subject$.asObservable())}},{key:"refresh$",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(a.default.mark(function e(){var t,r,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.refresh$_running){e.next=2;break}return e.abrupt("return");case 2:return this.refresh$_running=!0,t=this.toJSON(),e.next=6,this.collection.pouch.find(t);case 6:r=e.sent,n=g.createAr(this.collection,r.docs,t),this.subject$.next(n),this.refresh$_running=!1;case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"toJSON",value:function(){var e=this,t=this.mquery._conditions,r={selector:t},n=this.mquery._optionsForExec();if(this.mquery._fields&&!function(){var t=e.mquery._fieldsForExec(),n=Object.keys(t).filter(function(e){return 1==t[e]});n.push("_id"),n.push("_rev"),n=n.filter(function(e,t,r){return r.indexOf(e)==t}),r.fields=n}(),n.sort&&!function(){var t=[];Object.keys(n.sort).map(function(r){var i=n.sort[r],o="asc";i==-1&&(o="desc");var s={};r==e.collection.schema.primaryPath&&(r="_id"),s[r]=o,t.push(s)}),r.sort=t}(),n.limit){if("number"!=typeof n.limit)throw new TypeError("limit() must get a number");r.limit=n.limit}if(n.skip){if("number"!=typeof n.skip)throw new TypeError("skip() must get a number");r.skip=n.skip}if(r.selector.language||(r.selector.language={}),r.selector.language.$ne="query",this.collection.schema.primaryPath&&r.selector[this.collection.schema.primaryPath]){var i=this.collection.schema.primaryPath;r.selector._id=r.selector[i],delete r.selector[i]}return r}}]),e}()},{"./RxDocument":6,"./mquery/mquery":11,"./util":13,"babel-runtime/helpers/asyncToGenerator":24,"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,"babel-runtime/regenerator":28}],8:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e,n){if("object"===("undefined"==typeof e?"undefined":(0,d.default)(e))){if(e.encrypted)return void(r[n.substring(1)]=e);for(var i in e){var o=n;"properties"!=i&&(o=o+"."+i),t(e[i],o)}}}var r={};return t(e,""),r}function s(e){var t=o(e);return Object.keys(t).length>0}function a(e){return Object.keys(e.properties).filter(function(t){return e.properties[t].index}).map(function(e){return[e]}).concat(e.compoundIndexes||[]).filter(function(e,t,r){return r.indexOf(e)==t})}function u(e){return Object.keys(e.properties).filter(function(t){return e.properties[t].primary}).shift()}function c(e){function t(e,t,r){if(["properties","language"].includes(e))throw new Error("fieldname is not allowed: "+e);if(e.includes("."))throw new Error("field-names cannot contain dots .");var n=r.split(".").length>=2;if(n){if(t.primary)throw new Error("primary can only be defined at top-level");if(t.index)throw new Error("index can only be defined at top-level")}if(!n&&"_"==e.charAt(0))throw new Error("first level-fields cannot start with underscore _")}function r(e,n){if("object"===("undefined"==typeof e?"undefined":(0,d.default)(e)))for(var i in e){e.properties||t(i,e[i],n);var o=n;"properties"!=i&&(o=o+"."+i),r(e[i],o)}}return r(e,""),!0}function f(e){if(e.properties._id)throw new Error("schema defines ._id, this will be done automatically");if(e.properties._rev)throw new Error("schema defines ._rev, this will be done automatically");c(e);var t=void 0;if(Object.keys(e.properties).forEach(function(r){var n=e.properties[r];if(n.primary){if(t)throw new Error("primary can only be defined once");if(t=r,n.index)throw new Error("primary is always index, do not declare it as index");if(n.unique)throw new Error("primary is always unique, do not declare it as unique");if(n.encrypted)throw new Error("primary cannot be encrypted");if("string"!==n.type)throw new Error("primary must have type: string")}}),t&&e&&e.required&&e.required.includes(t))throw new Error("primary is always required, do not declare it as required");if(e.compoundIndexes)try{k.jsonSchemaValidate({type:"array",items:{type:"array",items:{type:"string"}}},e.compoundIndexes)}catch(e){throw new Error("schema.compoundIndexes must be array<array><string>")}a(e).reduce(function(e,t){return e.concat(t)},[]).filter(function(e,t,r){return r.indexOf(e)==t}).filter(function(t){return"string"!=e.properties[t].type&&"integer"!=e.properties[t].type}).forEach(function(t){throw new Error("given indexKey ("+t+") is not type:string but "+e.properties[t].type)})}function l(e){return f(e),new E(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptedPaths=void 0;var h=e("babel-runtime/helpers/typeof"),d=i(h),p=e("babel-runtime/helpers/classCallCheck"),y=i(p),v=e("babel-runtime/helpers/createClass"),b=i(v);r.hasCrypt=s,r.getIndexes=a,r.getPrimary=u,r.validateFieldsDeep=c,r.checkSchema=f,r.create=l;var m=e("object-path"),g=i(m),_=e("clone"),w=i(_),x=e("./util"),k=n(x),E=function(){function e(t){var r=this;(0,y.default)(this,e),this.jsonID=(0,w.default)(t),this.compoundIndexes=this.jsonID.compoundIndexes||[],delete this.jsonID.compoundIndexes,this.indexes=a(this.jsonID),this.jsonID.required=this.jsonID.required||[],this.indexes.map(function(e){e.filter(function(e){return!r.jsonID.required.includes(e)}).forEach(function(e){return r.jsonID.required.push(e)})}),this.primaryPath=u(this.jsonID),this.primaryPath&&this.jsonID.required.push(this.primaryPath),this.jsonID.properties._id={
type:"string",minLength:1},this.jsonID.properties._rev={type:"string",minLength:1},this.crypt=s(this.jsonID),this.encryptedPaths,this.jsonID.additionalProperties=!1}return(0,b.default)(e,[{key:"getSchemaByObjectPath",value:function(e){return e=e.replace(/\./g,".properties."),e="properties."+e,g.default.get(this.jsonID,e)}},{key:"getEncryptedPaths",value:function(){return this.encryptedPaths||(this.encryptedPaths=o(this.jsonID)),this.encryptedPaths}},{key:"validate",value:function(e,t){return t=t||this.jsonID,k.jsonSchemaValidate(t,e),!0}},{key:"hash",value:function(){return k.hash(this.jsonID)}},{key:"swapIdToPrimary",value:function(e){return this.primaryPath?(e[this.primaryPath]=e._id,delete e._id,e):e}},{key:"swapPrimaryToId",value:function(e){return this.primaryPath?(e._id=e[this.primaryPath],delete e[this.primaryPath],e):e}}]),e}();r.getEncryptedPaths=o},{"./util":13,"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,"babel-runtime/helpers/typeof":27,clone:34,"object-path":175}],9:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var i=e("./index.js"),o=n(i);o.plugin(e("pouchdb-adapter-localstorage")),o.plugin(e("pouchdb-adapter-http")),o.plugin(e("pouchdb-replication")),window.RxDB=o},{"./index.js":10,"pouchdb-adapter-http":176,"pouchdb-adapter-localstorage":185,"pouchdb-replication":224}],10:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e){y.default.plugin(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.PouchDB=r.RxSchema=r.create=void 0;var s=e("babel-runtime/regenerator"),a=i(s),u=e("babel-runtime/helpers/asyncToGenerator"),c=i(u);r.create=function(){var e=(0,c.default)(a.default.mark(function e(t,r,n,i){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.create(t,r,n,i));case 1:case"end":return e.stop()}},e,this)}));return function(t,r,n,i){return e.apply(this,arguments)}}();r.plugin=o;var f=e("./RxDatabase"),l=n(f),h=e("./RxSchema"),d=n(h),p=e("./PouchDB"),y=i(p);r.RxSchema=d,r.PouchDB=y.default},{"./PouchDB":2,"./RxDatabase":5,"./RxSchema":8,"babel-runtime/helpers/asyncToGenerator":24,"babel-runtime/regenerator":28}],11:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(this instanceof i))return new i(e,t);var r=this.constructor.prototype;this.op=r.op||void 0,this.options={},this.setOptions(r.options),this._conditions=r._conditions?f.clone(r._conditions,{retainKeyOrder:this.options.retainKeyOrder}):{},this._fields=r._fields?f.clone(r._fields,{retainKeyOrder:this.options.retainKeyOrder}):void 0,this._update=r._update?f.clone(r._update,{retainKeyOrder:this.options.retainKeyOrder}):void 0,this._path=r._path||void 0,this._distinct=r._distinct||void 0,this._traceFunction=r._traceFunction||void 0,t&&this.setOptions(t),e&&(e.find&&e.remove&&e.update?this.collection(e):this.find(e))}function o(e,t,r){if(Array.isArray(e.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");if(r&&r.$meta){var n=e.sort||(e.sort={});return void(n[t]={$meta:r.$meta})}var i=String(r||1).toLowerCase();if(!/^(?:ascending|asc|descending|desc|1|-1)$/.test(i))throw f.isArray(r)&&(r="["+r+"]"),new TypeError("Invalid sort value: {"+t+": "+r+" }");var n=e.sort||(e.sort={}),o=r.toString().replace("asc","1").replace("ascending","1").replace("desc","-1").replace("descending","-1");n[t]=parseInt(o,10)}function s(e,t,r){if(e.sort=e.sort||[],!Array.isArray(e.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");r.toString().replace("asc","1").replace("ascending","1").replace("desc","-1").replace("descending","-1");e.sort.push([t,r])}Object.defineProperty(r,"__esModule",{value:!0});var a=e("babel-runtime/helpers/typeof"),u=n(a),c=e("sliced"),f=e("./mquery_utils"),l="$geoWithin";Object.defineProperty(i,"use$geoWithin",{get:function(){return"$geoWithin"==l},set:function(e){l=!0===e?"$geoWithin":"$within"}}),i.prototype.toConstructor=function(){function e(t,r){return this instanceof e?void i.call(this,t,r):new e(t,r)}f.inherits(e,i);var t=e.prototype;return t.options={},t.setOptions(this.options),t.op=this.op,t._conditions=f.clone(this._conditions,{retainKeyOrder:this.options.retainKeyOrder}),t._fields=f.clone(this._fields,{retainKeyOrder:this.options.retainKeyOrder}),t._update=f.clone(this._update,{retainKeyOrder:this.options.retainKeyOrder}),t._path=this._path,t._distinct=this._distinct,t._traceFunction=this._traceFunction,e},i.prototype.setOptions=function(e){if(!e||!f.isObject(e))return this;for(var t,r=f.keys(e),n=0;n<r.length;++n)if(t=r[n],"function"==typeof this[t]){var i=f.isArray(e[t])?e[t]:[e[t]];this[t].apply(this,i)}else this.options[t]=e[t];return this},i.prototype.$where=function(e){return this._conditions.$where=e,this},i.prototype.where=function(){if(!arguments.length)return this;this.op||(this.op="find");var e=(0,u.default)(arguments[0]);if("string"==e)return this._path=arguments[0],2===arguments.length&&(this._conditions[this._path]=arguments[1]),this;if("object"==e&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")},i.prototype.equals=function(e){this._ensurePath("equals");var t=this._path;return this._conditions[t]=e,this},i.prototype.eq=function(e){this._ensurePath("eq");var t=this._path;return this._conditions[t]=e,this},i.prototype.or=function e(t){var e=this._conditions.$or||(this._conditions.$or=[]);return f.isArray(t)||(t=[t]),e.push.apply(e,t),this},i.prototype.nor=function e(t){var e=this._conditions.$nor||(this._conditions.$nor=[]);return f.isArray(t)||(t=[t]),e.push.apply(e,t),this},i.prototype.and=function e(t){var e=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(t)||(t=[t]),e.push.apply(e,t),this},"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(e){i.prototype[e]=function(){var t,r;1===arguments.length?(this._ensurePath(e),r=arguments[0],t=this._path):(r=arguments[1],t=arguments[0]);var n=null===this._conditions[t]||"object"===(0,u.default)(this._conditions[t])?this._conditions[t]:this._conditions[t]={};return n["$"+e]=r,this}}),i.prototype.mod=function(){var e,t;1===arguments.length?(this._ensurePath("mod"),e=arguments[0],t=this._path):2!==arguments.length||f.isArray(arguments[1])?3===arguments.length?(e=c(arguments,1),t=arguments[0]):(e=arguments[1],t=arguments[0]):(this._ensurePath("mod"),e=c(arguments),t=this._path);var r=this._conditions[t]||(this._conditions[t]={});return r.$mod=e,this},i.prototype.exists=function(){var e,t;0===arguments.length?(this._ensurePath("exists"),e=this._path,t=!0):1===arguments.length?"boolean"==typeof arguments[0]?(this._ensurePath("exists"),e=this._path,t=arguments[0]):(e=arguments[0],t=!0):2===arguments.length&&(e=arguments[0],t=arguments[1]);var r=this._conditions[e]||(this._conditions[e]={});return r.$exists=t,this},i.prototype.elemMatch=function(){if(null==arguments[0])throw new TypeError("Invalid argument");var e,t,r;if("function"==typeof arguments[0])this._ensurePath("elemMatch"),t=this._path,e=arguments[0];else if(f.isObject(arguments[0]))this._ensurePath("elemMatch"),t=this._path,r=arguments[0];else if("function"==typeof arguments[1])t=arguments[0],e=arguments[1];else{if(!arguments[1]||!f.isObject(arguments[1]))throw new TypeError("Invalid argument");t=arguments[0],r=arguments[1]}e&&(r=new i,e(r),r=r._conditions);var n=this._conditions[t]||(this._conditions[t]={});return n.$elemMatch=r,this},i.prototype.within=function(){if(this._ensurePath("within"),this._geoComparison=l,0===arguments.length)return this;if(2===arguments.length)return this.box.apply(this,arguments);if(2<arguments.length)return this.polygon.apply(this,arguments);var e=arguments[0];if(!e)throw new TypeError("Invalid argument");if(e.center)return this.circle(e);if(e.box)return this.box.apply(this,e.box);if(e.polygon)return this.polygon.apply(this,e.polygon);if(e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")},i.prototype.box=function(){var e,t;if(3===arguments.length)e=arguments[0],t=[arguments[1],arguments[2]];else{if(2!==arguments.length)throw new TypeError("Invalid argument");this._ensurePath("box"),e=this._path,t=[arguments[0],arguments[1]]}var r=this._conditions[e]||(this._conditions[e]={});return r[this._geoComparison||l]={$box:t},this},i.prototype.polygon=function(){var e,t;"string"==typeof arguments[0]?(t=arguments[0],e=c(arguments,1)):(this._ensurePath("polygon"),t=this._path,e=c(arguments));var r=this._conditions[t]||(this._conditions[t]={});return r[this._geoComparison||l]={$polygon:e},this},i.prototype.circle=function(){var e,t;if(1===arguments.length)this._ensurePath("circle"),e=this._path,t=arguments[0];else{if(2!==arguments.length)throw new TypeError("Invalid argument");e=arguments[0],t=arguments[1]}if(!("radius"in t&&t.center))throw new Error("center and radius are required");var r=this._conditions[e]||(this._conditions[e]={}),n=t.spherical?"$centerSphere":"$center",i=this._geoComparison||l;return r[i]={},r[i][n]=[t.center,t.radius],"unique"in t&&(r[i].$uniqueDocs=!!t.unique),this},i.prototype.near=function(){var e,t;if(this._geoComparison="$near",0===arguments.length)return this;if(1===arguments.length)this._ensurePath("near"),e=this._path,t=arguments[0];else{if(2!==arguments.length)throw new TypeError("Invalid argument");e=arguments[0],t=arguments[1]}if(!t.center)throw new Error("center is required");var r=this._conditions[e]||(this._conditions[e]={}),n=t.spherical?"$nearSphere":"$near";if(Array.isArray(t.center)){r[n]=t.center;var i="maxDistance"in t?t.maxDistance:null;null!=i&&(r.$maxDistance=i),null!=t.minDistance&&(r.$minDistance=t.minDistance)}else{if("Point"!=t.center.type||!Array.isArray(t.center.coordinates))throw new Error("Invalid GeoJSON specified for "+n);r[n]={$geometry:t.center},"maxDistance"in t&&(r[n].$maxDistance=t.maxDistance),"minDistance"in t&&(r[n].$minDistance=t.minDistance)}return this},i.prototype.intersects=function(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",0===arguments.length)return this;var e=arguments[0];if(null!=e&&e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")},i.prototype.geometry=function(){if("$within"!=this._geoComparison&&"$geoWithin"!=this._geoComparison&&"$near"!=this._geoComparison&&"$geoIntersects"!=this._geoComparison)throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");var e,t;if(1!==arguments.length)throw new TypeError("Invalid argument");if(this._ensurePath("geometry"),t=this._path,e=arguments[0],!e.type||!Array.isArray(e.coordinates))throw new TypeError("Invalid argument");var r=this._conditions[t]||(this._conditions[t]={});return r[this._geoComparison]={$geometry:e},this},i.prototype.select=function(){var e=arguments[0];if(!e)return this;if(1!==arguments.length)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");var t=this._fields||(this._fields={}),r="undefined"==typeof e?"undefined":(0,u.default)(e);if(("string"==r||f.isArgumentsObject(e))&&"number"==typeof e.length){"string"==r&&(e=e.split(/\s+/));for(var n=0,i=e.length;n<i;++n){var o=e[n];if(o){var s="-"==o[0]?0:1;0===s&&(o=o.substring(1)),t[o]=s}}return this}if(f.isObject(e)&&!Array.isArray(e)){for(var a=f.keys(e),n=0;n<a.length;++n)t[a[n]]=e[a[n]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")},i.prototype.slice=function(){if(0===arguments.length)return this;this._validate("slice");var e,t;if(1===arguments.length){var r=arguments[0];if("object"===("undefined"==typeof r?"undefined":(0,u.default)(r))&&!Array.isArray(r)){for(var n=Object.keys(r),i=n.length,o=0;o<i;++o)this.slice(n[o],r[n[o]]);return this}this._ensurePath("slice"),e=this._path,t=arguments[0]}else 2===arguments.length?"number"==typeof arguments[0]?(this._ensurePath("slice"),e=this._path,t=c(arguments)):(e=arguments[0],t=arguments[1]):3===arguments.length&&(e=arguments[0],t=c(arguments,1));var s=this._fields||(this._fields={});return s[e]={$slice:t},this},i.prototype.sort=function(e){if(!e)return this;var t;this._validate("sort");var r="undefined"==typeof e?"undefined":(0,u.default)(e);if(Array.isArray(e)){t=e.length;for(var n=0;n<e.length;++n)s(this.options,e[n][0],e[n][1]);return this}if(1===arguments.length&&"string"==r){e=e.split(/\s+/),t=e.length;for(var n=0;n<t;++n){var i=e[n];if(i){var a="-"==i[0]?-1:1;a===-1&&(i=i.substring(1)),o(this.options,i,a)}}return this}if(f.isObject(e)){for(var c=f.keys(e),n=0;n<c.length;++n){var i=c[n];o(this.options,i,e[i])}return this}throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")},["limit","skip","maxScan","batchSize","comment"].forEach(function(e){i.prototype[e]=function(t){return this._validate(e),this.options[e]=t,this}}),i.prototype.maxTime=function(e){return this._validate("maxTime"),this.options.maxTimeMS=e,this},i.prototype.snapshot=function(){return this._validate("snapshot"),this.options.snapshot=!arguments.length||!!arguments[0],this},i.prototype.hint=function(){if(0===arguments.length)return this;this._validate("hint");var e=arguments[0];if(f.isObject(e)){var t=this.options.hint||(this.options.hint={});for(var r in e)t[r]=e[r];return this}throw new TypeError("Invalid hint. "+e)},i.prototype.slaveOk=function(e){return this.options.slaveOk=!arguments.length||!!e,this},i.prototype.read=function(e){return arguments.length>1&&!i.prototype.read.deprecationWarningIssued&&(console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),i.prototype.read.deprecationWarningIssued=!0),this.options.readPreference=f.readPref(e),this},i.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=!arguments.length||!!arguments[0],this},i.prototype.merge=function(e){if(!e)return this;if(!i.canMerge(e))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");return e instanceof i?(e._conditions&&f.merge(this._conditions,e._conditions),e._fields&&(this._fields||(this._fields={}),f.merge(this._fields,e._fields)),e.options&&(this.options||(this.options={}),f.merge(this.options,e.options)),e._update&&(this._update||(this._update={}),f.mergeClone(this._update,e._update)),e._distinct&&(this._distinct=e._distinct),this):(f.merge(this._conditions,e),this)},i.prototype.find=function(e,t){if(this.op="find","function"==typeof e?(t=e,e=void 0):i.canMerge(e)&&this.merge(e),!t)return this;var r=this._conditions,n=this._optionsForExec();return n.fields=this._fieldsForExec(),t=this._wrapCallback("find",t,{conditions:r,options:n}),this},i.prototype.distinct=function(e,t,r){if(this.op="distinct",this._validate(),!r){switch("undefined"==typeof t?"undefined":(0,u.default)(t)){case"function":r=t,"string"==typeof e&&(t=e,e=void 0);break;case"undefined":case"string":break;default:throw new TypeError("Invalid `field` argument. Must be string or function")}switch("undefined"==typeof e?"undefined":(0,u.default)(e)){case"function":r=e,e=t=void 0;break;case"string":t=e,e=void 0}}if("string"==typeof t&&(this._distinct=t),i.canMerge(e)&&this.merge(e),!r)return this;if(!this._distinct)throw new Error("No value for `distinct` has been declared");var n=this._conditions,o=this._optionsForExec();return r=this._wrapCallback("distinct",r,{conditions:n,options:o}),this._collection.distinct(this._distinct,n,o,f.tick(r)),this},i.prototype.update=function(e,t,r,n){this.op="update";var o;switch(arguments.length){case 3:"function"==typeof r&&(n=r,r=void 0);break;case 2:"function"==typeof t&&(n=t,t=e,e=void 0);break;case 1:switch("undefined"==typeof e?"undefined":(0,u.default)(e)){case"function":n=e,e=r=t=void 0;break;case"boolean":o=e,e=void 0;break;default:t=e,e=r=void 0}}if(i.canMerge(e)&&this.merge(e),t&&this._mergeUpdate(t),f.isObject(r)&&this.setOptions(r),!o&&!n)return this;if(!this._update||!this.options.overwrite&&0===f.keys(this._update).length)return n&&f.soon(n.bind(null,null,0)),this;r=this._optionsForExec(),n||(r.safe=!1);var e=this._conditions;return t=this._updateForExec(),n=this._wrapCallback("update",n,{conditions:e,doc:t,options:r}),this._collection.update(e,t,r,f.tick(n)),this},i.prototype.remove=function(e,t){this.op="remove";var r;if("function"==typeof e?(t=e,e=void 0):i.canMerge(e)?this.merge(e):!0===e&&(r=e,e=void 0),!r&&!t)return this;var n=this._optionsForExec();t||(n.safe=!1);var o=this._conditions;return t=this._wrapCallback("remove",t,{conditions:o,options:n}),this._collection.remove(o,n,f.tick(t)),this},i.prototype._wrapCallback=function(e,t,r){var n=this._traceFunction||i.traceFunction;if(n){r.collectionName=this._collection.collectionName;var o=n&&n.call(null,e,r,this),s=(new Date).getTime();return function(e,r){if(o){var n=(new Date).getTime()-s;o.call(null,e,r,n)}t&&t.apply(null,arguments)}}return t},i.prototype.selected=function(){return!!(this._fields&&Object.keys(this._fields).length>0)},i.prototype.selectedInclusively=function(){if(!this._fields)return!1;var e=Object.keys(this._fields);if(0===e.length)return!1;for(var t=0;t<e.length;++t){var r=e[t];if(0===this._fields[r])return!1;if(this._fields[r]&&"object"===(0,u.default)(this._fields[r])&&this._fields[r].$meta)return!1}return!0},i.prototype.selectedExclusively=function(){if(!this._fields)return!1;var e=Object.keys(this._fields);if(0===e.length)return!1;for(var t=0;t<e.length;++t){var r=e[t];if(0===this._fields[r])return!0}return!1},i.prototype._mergeUpdate=function(e){this._update||(this._update={}),e instanceof i?e._update&&f.mergeClone(this._update,e._update):f.mergeClone(this._update,e)},i.prototype._optionsForExec=function(){var e=f.clone(this.options,{retainKeyOrder:!0});return e},i.prototype._fieldsForExec=function(){return f.clone(this._fields,{retainKeyOrder:!0})},i.prototype._updateForExec=function(){for(var e=f.clone(this._update,{retainKeyOrder:!0}),t=f.keys(e),r=t.length,n={};r--;){var i=t[r];this.options.overwrite?n[i]=e[i]:"$"!==i[0]?(n.$set||(e.$set?n.$set=e.$set:n.$set={}),n.$set[i]=e[i],t.splice(r,1),~t.indexOf("$set")||t.push("$set")):"$set"===i?n.$set||(n[i]=e[i]):n[i]=e[i]}return this._compiledUpdate=n,n},i.prototype._ensurePath=function(e){if(!this._path){var t=e+"() must be used after where() when called with these arguments";throw new Error(t)}},i._isPermitted=function(e,t){return!1},i.prototype._validate=function(e){},i.canMerge=function(e){return e instanceof i||f.isObject(e)},i.setGlobalTraceFunction=function(e){i.traceFunction=e},i.utils=f,r.default=i},{"./mquery_utils":12,"babel-runtime/helpers/typeof":27,sliced:311}],12:[function(e,t,r){(function(t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(){}if(arguments.length>1)throw new Error("Adding properties is not supported");return t.prototype=e,new t}var s=e("babel-runtime/helpers/typeof"),a=i(s),u=e("regexp-clone"),c=r.clone=function e(t,n){if(void 0===t||null===t)return t;if(Array.isArray(t))return r.cloneArray(t,n);if(t.constructor){if(/ObjectI[dD]$/.test(t.constructor.name))return"function"==typeof t.clone?t.clone():new t.constructor(t.id);if("ReadPreference"===t._type&&t.isValid&&t.toObject)return"function"==typeof t.clone?t.clone():new t.constructor(t.mode,e(t.tags,n));if("Binary"==t._bsontype&&t.buffer&&t.value)return"function"==typeof t.clone?t.clone():new t.constructor(t.value(!0),t.sub_type);if("Date"===t.constructor.name||"Function"===t.constructor.name)return new t.constructor(+t);if("RegExp"===t.constructor.name)return u(t);if("Buffer"===t.constructor.name)return r.cloneBuffer(t)}return l(t)?r.cloneObject(t,n):t.valueOf?t.valueOf():void 0};r.cloneObject=function(e,t){var r,n,i,o,s,a=t&&t.retainKeyOrder,u=t&&t.minimize,f={};if(a)for(o in e)i=c(e[o],t),u&&"undefined"==typeof i||(r||(r=!0),f[o]=i);else for(n=Object.keys(e),s=n.length;s--;)o=n[s],i=c(e[o],t),u&&"undefined"==typeof i||(r||(r=!0),f[o]=i);return u?r&&f:f},r.cloneArray=function(e,t){for(var r=[],n=0,i=e.length;n<i;n++)r.push(c(e[n],t));return r},r.tick=function(e){if("function"==typeof e)return function(){var t=arguments;h(function(){e.apply(this,t)})}},r.merge=function e(t,n){for(var i,o=Object.keys(n),s=o.length;s--;)i=o[s],"undefined"==typeof t[i]?t[i]=n[i]:r.isObject(n[i])?e(t[i],n[i]):t[i]=n[i]},r.mergeClone=function e(t,n){for(var i,o=Object.keys(n),s=o.length;s--;)i=o[s],"undefined"==typeof t[i]?t[i]=c(n[i],{retainKeyOrder:1}):r.isObject(n[i])?e(t[i],n[i]):t[i]=c(n[i],{retainKeyOrder:1})};r.readPref=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest"}return e};var f=Object.prototype.toString,l=(r.toString=function(e){return f.call(e)},r.isObject=function(e){return"[object Object]"==r.toString(e)});r.isArray=function(e){return Array.isArray(e)||"object"==("undefined"==typeof e?"undefined":(0,a.default)(e))&&"[object Array]"==r.toString(e)};r.keys=Object.keys||function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t},r.create="function"==typeof Object.create?Object.create:o,r.inherits=function(e,t){e.prototype=r.create(t.prototype),e.prototype.constructor=e};var h=r.soon="function"==typeof setImmediate?setImmediate:t.nextTick;r.cloneBuffer=function(e){var t=new n(e.length);return e.copy(t,0,0,e.length),t},r.isArgumentsObject=function(e){return"[object Arguments]"===Object.prototype.toString.call(e)}}).call(this,e("_process"),e("buffer").Buffer)},{_process:230,"babel-runtime/helpers/typeof":27,buffer:32,"regexp-clone":245}],13:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=A.encrypt(e,t);return r.toString()}function s(e,t){var r=A.decrypt(e,t);return r.toString(R)}function a(e){if(!e||"function"!=typeof e.super_||"function"!=typeof e.destroy)throw new Error("given leveldown is no valid adapter")}function u(e){"string"!=typeof e&&(e=JSON.stringify(e));var t=0,r=void 0,n=void 0,i=void 0;if(0===e.length)return t;for(r=0,i=e.length;r<i;r++)n=e.charCodeAt(r),t=(t<<5)-t+n,t|=0;return t<0&&(t*=-1),t}function c(e){var t=e;return"string"!=typeof e&&(t=JSON.stringify(e)),(0,_.sha3_512)(t)}function f(){return(0,x.default)(10)+":"+(new Date).getTime()}function l(e,t){B||(B=new k.Validator);var r=B.validate(t,e);if(r.errors.length>0)throw new Error(JSON.stringify({name:"object does not match schema",errors:r.errors,object:t,schema:e}))}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t={};return t.promise=new Promise(function(r){t.resolve=function(){return r()},setTimeout(r,e)}),t}function d(){return!("object"!==("undefined"==typeof window?"undefined":(0,y.default)(window))||!window.BroadcastChannel||"function"!=typeof window.BroadcastChannel||"function"!=typeof window.BroadcastChannel.prototype.postMessage||"function"!=typeof window.BroadcastChannel.prototype.close)}Object.defineProperty(r,"__esModule",{value:!0}),r.promiseWait=r.assertThrowsAsync=r.Rx=void 0;var p=e("babel-runtime/helpers/typeof"),y=i(p),v=e("babel-runtime/regenerator"),b=i(v),m=e("babel-runtime/helpers/asyncToGenerator"),g=i(m);r.assertThrowsAsync=function(){var e=(0,g.default)(b.default.mark(function e(t,r){return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),r&&!(e.t0 instanceof r)){e.next=9;break}return e.abrupt("return","util.assertThrowsAsync(): everything is fine");case 9:throw new Error("util.assertThrowsAsync(): Missing rejection"+(r?" with "+r.name:""));case 10:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t,r){return e.apply(this,arguments)}}(),r.promiseWait=function(){var e=(0,g.default)(b.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){setTimeout(e,t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();r.encrypt=o,r.decrypt=s,r.isLevelDown=a,r.fastUnsecureHash=u,r.hash=c,r.generate_id=f,r.jsonSchemaValidate=l,r.promiseWaitResolveable=h,r.hasBroadcastChannel=d;var _=e("js-sha3"),w=e("random-token"),x=i(w),k=e("jsonschema"),E=e("rxjs/Observable"),S=e("rxjs/Subject"),j=e("rxjs/BehaviorSubject");e("rxjs/add/observable/merge"),e("rxjs/add/observable/interval"),e("rxjs/add/observable/fromEvent"),e("rxjs/add/operator/timeout"),e("rxjs/add/operator/delay"),e("rxjs/add/operator/map"),e("rxjs/add/operator/filter"),e("rxjs/add/operator/first"),e("rxjs/add/operator/startWith"),e("rxjs/add/operator/toPromise"),e("rxjs/add/operator/distinctUntilChanged");var O=e("crypto-js/aes"),A=n(O),C=e("crypto-js/enc-utf8"),R=n(C),B=(r.Rx={Observable:E.Observable,Subject:S.Subject,BehaviorSubject:j.BehaviorSubject},void 0)},{"babel-runtime/helpers/asyncToGenerator":24,"babel-runtime/helpers/typeof":27,"babel-runtime/regenerator":28,"crypto-js/aes":118,"crypto-js/enc-utf8":122,"js-sha3":147,jsonschema:150,"random-token":236,"rxjs/BehaviorSubject":246,"rxjs/Observable":249,"rxjs/Subject":253,"rxjs/add/observable/fromEvent":257,"rxjs/add/observable/interval":258,"rxjs/add/observable/merge":259,"rxjs/add/operator/delay":260,"rxjs/add/operator/distinctUntilChanged":261,"rxjs/add/operator/filter":262,"rxjs/add/operator/first":263,"rxjs/add/operator/map":264,"rxjs/add/operator/startWith":265,"rxjs/add/operator/timeout":266,"rxjs/add/operator/toPromise":267}],14:[function(e,t,r){(function(e){function r(e){this._db=e,this._operations=[],this._written=!1}r.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},r.prototype.put=function(e,t){this._checkWritten();var r=this._db._checkKey(e,"key",this._db._isBuffer);if(r)throw r;return this._db._isBuffer(e)||(e=String(e)),this._db._isBuffer(t)||(t=String(t)),"function"==typeof this._put?this._put(e,t):this._operations.push({type:"put",key:e,value:t}),this},r.prototype.del=function(e){this._checkWritten();var t=this._db._checkKey(e,"key",this._db._isBuffer);if(t)throw t;return this._db._isBuffer(e)||(e=String(e)),"function"==typeof this._del?this._del(e):this._operations.push({type:"del",key:e}),this},r.prototype.clear=function(){return this._checkWritten(),this._operations=[],"function"==typeof this._clear&&this._clear(),this},r.prototype.write=function(t,r){if(this._checkWritten(),"function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("write() requires a callback argument");return"object"!=typeof t&&(t={}),this._written=!0,"function"==typeof this._write?this._write(r):"function"==typeof this._db._batch?this._db._batch(this._operations,t,r):void e.nextTick(r)},t.exports=r}).call(this,e("_process"))},{_process:230}],15:[function(e,t,r){(function(e){function r(e){this.db=e,this._ended=!1,this._nexting=!1}r.prototype.next=function(t){var r=this;if("function"!=typeof t)throw new Error("next() requires a callback argument");return r._ended?t(new Error("cannot call next() after end()")):r._nexting?t(new Error("cannot call next() before previous next() has completed")):(r._nexting=!0,"function"==typeof r._next?r._next(function(){r._nexting=!1,t.apply(null,arguments)}):void e.nextTick(function(){r._nexting=!1,t()}))},r.prototype.end=function(t){if("function"!=typeof t)throw new Error("end() requires a callback argument");return this._ended?t(new Error("end() already called on iterator")):(this._ended=!0,"function"==typeof this._end?this._end(t):void e.nextTick(t))},t.exports=r}).call(this,e("_process"))},{_process:230}],16:[function(e,t,r){(function(r,n){function i(e){if(!arguments.length||void 0===e)throw new Error("constructor requires at least a location argument");if("string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.status="new"}var o=e("xtend"),s=e("./abstract-iterator"),a=e("./abstract-chained-batch");i.prototype.open=function(e,t){var r=this,i=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"!=typeof e&&(e={}),e.createIfMissing=0!=e.createIfMissing,e.errorIfExists=!!e.errorIfExists,"function"==typeof this._open?(this.status="opening",this._open(e,function(e){return e?(r.status=i,t(e)):(r.status="open",void t())})):(this.status="open",n.nextTick(t))},i.prototype.close=function(e){var t=this,r=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");"function"==typeof this._close?(this.status="closing",this._close(function(n){return n?(t.status=r,e(n)):(t.status="closed",void e())})):(this.status="closed",n.nextTick(e))},i.prototype.get=function(e,t,r){var i;if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("get() requires a callback argument");return(i=this._checkKey(e,"key",this._isBuffer))?r(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),t.asBuffer=0!=t.asBuffer,"function"==typeof this._get?this._get(e,t,r):void n.nextTick(function(){r(new Error("NotFound"))}))},i.prototype.put=function(e,t,r,i){var o;if("function"==typeof r&&(i=r),"function"!=typeof i)throw new Error("put() requires a callback argument");return(o=this._checkKey(e,"key",this._isBuffer))?i(o):(this._isBuffer(e)||(e=String(e)),null==t||this._isBuffer(t)||n.browser||(t=String(t)),"object"!=typeof r&&(r={}),"function"==typeof this._put?this._put(e,t,r,i):void n.nextTick(i))},i.prototype.del=function(e,t,r){var i;if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("del() requires a callback argument");return(i=this._checkKey(e,"key",this._isBuffer))?r(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),"function"==typeof this._del?this._del(e,t,r):void n.nextTick(r))},i.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(r=t),"function"==typeof e&&(r=e),"function"!=typeof r)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return r(new Error("batch(array) requires an array argument"));t&&"object"==typeof t||(t={});for(var i,o,s=0,a=e.length;s<a;s++)if(i=e[s],"object"==typeof i){if(o=this._checkKey(i.type,"type",this._isBuffer))return r(o);if(o=this._checkKey(i.key,"key",this._isBuffer))return r(o)}return"function"==typeof this._batch?this._batch(e,t,r):void n.nextTick(r)},i.prototype.approximateSize=function(e,t,r){if(null==e||null==t||"function"==typeof e||"function"==typeof t)throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof r)throw new Error("approximateSize() requires a callback argument");return this._isBuffer(e)||(e=String(e)),this._isBuffer(t)||(t=String(t)),"function"==typeof this._approximateSize?this._approximateSize(e,t,r):void n.nextTick(function(){r(null,0)})},i.prototype._setupIteratorOptions=function(e){var t=this;return e=o(e),["start","end","gt","gte","lt","lte"].forEach(function(r){e[r]&&t._isBuffer(e[r])&&0===e[r].length&&delete e[r]}),e.reverse=!!e.reverse,e.keys=0!=e.keys,e.values=0!=e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=0!=e.keyAsBuffer,e.valueAsBuffer=0!=e.valueAsBuffer,e},i.prototype.iterator=function(e){return"object"!=typeof e&&(e={}),e=this._setupIteratorOptions(e),
"function"==typeof this._iterator?this._iterator(e):new s(this)},i.prototype._chainedBatch=function(){return new a(this)},i.prototype._isBuffer=function(e){return r.isBuffer(e)},i.prototype._checkKey=function(e,t){if(null===e||void 0===e)return new Error(t+" cannot be `null` or `undefined`");if(this._isBuffer(e)){if(0===e.length)return new Error(t+" cannot be an empty Buffer")}else if(""===String(e))return new Error(t+" cannot be an empty String")},t.exports=i}).call(this,{isBuffer:e("../is-buffer/index.js")},e("_process"))},{"../is-buffer/index.js":145,"./abstract-chained-batch":14,"./abstract-iterator":15,_process:230,xtend:342}],17:[function(e,t,r){r.AbstractLevelDOWN=e("./abstract-leveldown"),r.AbstractIterator=e("./abstract-iterator"),r.AbstractChainedBatch=e("./abstract-chained-batch"),r.isLevelDOWN=e("./is-leveldown")},{"./abstract-chained-batch":14,"./abstract-iterator":15,"./abstract-leveldown":16,"./is-leveldown":18}],18:[function(e,t,r){function n(e){return!(!e||"object"!=typeof e)&&Object.keys(i.prototype).filter(function(e){return"_"!=e[0]&&"approximateSize"!=e}).every(function(t){return"function"==typeof e[t]})}var i=e("./abstract-leveldown");t.exports=n},{"./abstract-leveldown":16}],19:[function(e,t,r){"use strict";function n(e){return function(){var t=arguments.length;if(t){for(var r=[],n=-1;++n<t;)r[n]=arguments[n];return e.call(this,r)}return e.call(this,[])}}t.exports=n},{}],20:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":35}],21:[function(e,t,r){t.exports={default:e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":36}],22:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":37}],23:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":38}],24:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("../core-js/promise"),o=n(i);r.default=function(e){return function(){var t=e.apply(this,arguments);return new o.default(function(e,r){function n(i,s){try{var a=t[i](s),u=a.value}catch(e){return void r(e)}return a.done?void e(u):o.default.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}},{"../core-js/promise":21}],25:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],26:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("../core-js/object/define-property"),o=n(i);r.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},{"../core-js/object/define-property":20}],27:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("../core-js/symbol/iterator"),o=n(i),s=e("../core-js/symbol"),a=n(s),u="function"==typeof a.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};r.default="function"==typeof a.default&&"symbol"===u(o.default)?function(e){return"undefined"==typeof e?"undefined":u(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":"undefined"==typeof e?"undefined":u(e)}},{"../core-js/symbol":22,"../core-js/symbol/iterator":23}],28:[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":243}],29:[function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function o(e){var t,r,i,o,s,a,u=e.length;s=n(e),a=new l(3*u/4-s),i=s>0?u-4:u;var c=0;for(t=0,r=0;t<i;t+=4,r+=3)o=f[e.charCodeAt(t)]<<18|f[e.charCodeAt(t+1)]<<12|f[e.charCodeAt(t+2)]<<6|f[e.charCodeAt(t+3)],a[c++]=o>>16&255,a[c++]=o>>8&255,a[c++]=255&o;return 2===s?(o=f[e.charCodeAt(t)]<<2|f[e.charCodeAt(t+1)]>>4,a[c++]=255&o):1===s&&(o=f[e.charCodeAt(t)]<<10|f[e.charCodeAt(t+1)]<<4|f[e.charCodeAt(t+2)]>>2,a[c++]=o>>8&255,a[c++]=255&o),a}function s(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function a(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(s(n));return i.join("")}function u(e){for(var t,r=e.length,n=r%3,i="",o=[],s=16383,u=0,f=r-n;u<f;u+=s)o.push(a(e,u,u+s>f?f:u+s));return 1===n?(t=e[r-1],i+=c[t>>2],i+=c[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=c[t>>10],i+=c[t>>4&63],i+=c[t<<2&63],i+="="),o.push(i),o.join("")}r.byteLength=i,r.toByteArray=o,r.fromByteArray=u;for(var c=[],f=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=h.length;d<p;++d)c[d]=h[d],f[h.charCodeAt(d)]=d;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},{}],30:[function(e,t,r){},{}],31:[function(e,t,r){(function(t){"use strict";var n=e("buffer"),i=n.Buffer,o=n.SlowBuffer,s=n.kMaxLength||2147483647;r.alloc=function(e,t,r){if("function"==typeof i.alloc)return i.alloc(e,t,r);if("number"==typeof r)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");var n=r,o=t;void 0===o&&(n=void 0,o=0);var a=new i(e);if("string"==typeof o)for(var u=new i(o,n),c=u.length,f=-1;++f<e;)a[f]=u[f%c];else a.fill(o);return a},r.allocUnsafe=function(e){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");return new i(e)},r.from=function(e,r,n){if("function"==typeof i.from&&(!t.Uint8Array||Uint8Array.from!==i.from))return i.from(e,r,n);if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("string"==typeof e)return new i(e,r);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=r;if(1===arguments.length)return new i(e);"undefined"==typeof o&&(o=0);var s=n;if("undefined"==typeof s&&(s=e.byteLength-o),o>=e.byteLength)throw new RangeError("'offset' is out of bounds");if(s>e.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(e.slice(o,o+s))}if(i.isBuffer(e)){var a=new i(e.length);return e.copy(a,0,0,e.length),a}if(e){if(Array.isArray(e)||"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return new i(e);if("Buffer"===e.type&&Array.isArray(e.data))return new i(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},r.allocUnsafeSlow=function(e){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=s)throw new RangeError("size is too large");return new o(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:32}],32:[function(e,t,r){(function(t){"use strict";function n(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=s.prototype):(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,r){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return a(this,e,t,r)}function a(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,r,n):"string"==typeof t?l(e,t,r):p(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,r,n){return u(t),t<=0?o(e,t):void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t)}function f(e,t){if(u(t),e=o(e,t<0?0:0|y(t)),!s.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function l(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!s.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|b(t,r);e=o(e,n);var i=e.write(t,r);return i!==n&&(e=e.slice(0,i)),e}function h(e,t){var r=t.length<0?0:0|y(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),s.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=s.prototype):e=h(e,t),e}function p(e,t){if(s.isBuffer(t)){var r=0|y(t.length);return e=o(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Y(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&X(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),s.alloc(+e)}function b(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(n)return V(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return C(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function _(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=s.from(t,n)),s.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,i);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}var c;if(i){var f=-1;for(c=r;c<a;c++)if(o(e,c)===o(t,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===u)return f*s}else f!==-1&&(c-=c-f),f=-1}else for(r+u>a&&(r=a-u),c=r;c>=0;c--){for(var l=!0,h=0;h<u;h++)if(o(e,c+h)!==o(t,h)){l=!1;break}if(l)return c}return-1}function x(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function k(e,t,r,n){return H(V(t,e.length-r),e,r,n)}function E(e,t,r,n){return H(K(t),e,r,n)}function S(e,t,r,n){return E(e,t,r,n)}function j(e,t,r,n){return H(G(t),e,r,n)}function O(e,t,r,n){return H(J(t,e.length-r),e,r,n)}function A(e,t,r){return 0===t&&r===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,r))}function C(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,c,f,l;switch(a){case 1:o<128&&(s=o);break;case 2:u=e[i+1],128===(192&u)&&(l=(31&o)<<6|63&u,l>127&&(s=l));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:u=e[i+1],c=e[i+2],f=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&f)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&f,l>65535&&l<1114112&&(s=l))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return R(n)}function R(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ee));return r}function B(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function T(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=W(e[o]);return i}function I(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function D(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,i,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function q(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function N(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,n,i){return i||N(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,r,n,23,4),r+4}function $(e,t,r,n,i){return i||N(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,r,n,52,8),r+8}function U(e){if(e=z(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function K(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function J(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function G(e){return Z.toByteArray(U(e))}function H(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Y(e){return e!==e}var Z=e("base64-js"),Q=e("ieee754"),X=e("isarray");r.Buffer=s,r.SlowBuffer=v,r.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:n(),r.kMaxLength=i(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,r){return a(null,e,t,r)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,r){return c(null,e,t,r)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!X(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=s.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},s.byteLength=b,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):m.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,r,n,i){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,a=r-t,u=Math.min(o,a),c=this.slice(n,i),f=e.slice(t,r),l=0;l<u;++l)if(c[l]!==f[l]){o=c[l],a=f[l];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},s.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},s.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},s.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return k(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return S(this,e,t,r);case"base64":return j(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;s.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n;if(s.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=s.prototype;else{var i=t-e;n=new s(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},s.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},s.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},s.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},s.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),Q.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),Q.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),Q.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),Q.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;M(this,e,t,r,i,0)}var o=1,s=0;for(this[t]=255&e;++s<r&&(o*=256);)this[t+s]=e/o&255;return t+r},s.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;M(this,e,t,r,i,0)}var o=r-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+r},s.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):q(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):q(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);M(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},s.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);M(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},s.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):q(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):q(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},s.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},s.prototype.writeDoubleLE=function(e,t,r){return $(this,e,t,!0,r)},s.prototype.writeDoubleBE=function(e,t,r){return $(this,e,t,!1,r)},s.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},s.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=s.isBuffer(e)?e:V(new s(e,n).toString()),u=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":29,ieee754:141,isarray:33}],33:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],34:[function(e,t,r){(function(e){var r=function(){"use strict";function t(r,n,i,o,f){function l(r,i){if(null===r)return null;if(0===i)return r;var y,v;if("object"!=typeof r)return r;if(r instanceof a)y=new a;else if(r instanceof u)y=new u;else if(r instanceof c)y=new c(function(e,t){r.then(function(t){e(l(t,i-1))},function(e){t(l(e,i-1))})});else if(t.__isArray(r))y=[];else if(t.__isRegExp(r))y=new RegExp(r.source,s(r)),r.lastIndex&&(y.lastIndex=r.lastIndex);else if(t.__isDate(r))y=new Date(r.getTime());else{if(p&&e.isBuffer(r))return y=new e(r.length),r.copy(y),y;r instanceof Error?y=Object.create(r):"undefined"==typeof o?(v=Object.getPrototypeOf(r),y=Object.create(v)):(y=Object.create(o),v=o)}if(n){var b=h.indexOf(r);if(b!=-1)return d[b];h.push(r),d.push(y)}if(r instanceof a)for(var m=r.keys();;){var g=m.next();if(g.done)break;var _=l(g.value,i-1),w=l(r.get(g.value),i-1);y.set(_,w)}if(r instanceof u)for(var x=r.keys();;){var g=x.next();if(g.done)break;var k=l(g.value,i-1);y.add(k)}for(var E in r){var S;v&&(S=Object.getOwnPropertyDescriptor(v,E)),S&&null==S.set||(y[E]=l(r[E],i-1))}if(Object.getOwnPropertySymbols)for(var j=Object.getOwnPropertySymbols(r),E=0;E<j.length;E++){var O=j[E],A=Object.getOwnPropertyDescriptor(r,O);(!A||A.enumerable||f)&&(y[O]=l(r[O],i-1),A.enumerable||Object.defineProperty(y,O,{enumerable:!1}))}if(f)for(var C=Object.getOwnPropertyNames(r),E=0;E<C.length;E++){var R=C[E],A=Object.getOwnPropertyDescriptor(r,R);A&&A.enumerable||(y[R]=l(r[R],i-1),Object.defineProperty(y,R,{enumerable:!1}))}return y}"object"==typeof n&&(i=n.depth,o=n.prototype,f=n.includeNonEnumerable,n=n.circular);var h=[],d=[],p="undefined"!=typeof e;return"undefined"==typeof n&&(n=!0),"undefined"==typeof i&&(i=1/0),l(r,i)}function r(e){return Object.prototype.toString.call(e)}function n(e){return"object"==typeof e&&"[object Date]"===r(e)}function i(e){return"object"==typeof e&&"[object Array]"===r(e)}function o(e){return"object"==typeof e&&"[object RegExp]"===r(e)}function s(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}var a;try{a=Map}catch(e){a=function(){}}var u;try{u=Set}catch(e){u=function(){}}var c;try{c=Promise}catch(e){c=function(){}}return t.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},t.__objToStr=r,t.__isDate=n,t.__isArray=i,t.__isRegExp=o,t.__getRegExpFlags=s,t}();"object"==typeof t&&t.exports&&(t.exports=r)}).call(this,e("buffer").Buffer)},{buffer:32}],35:[function(e,t,r){e("../../modules/es6.object.define-property");var n=e("../../modules/_core").Object;t.exports=function(e,t,r){return n.defineProperty(e,t,r)}},{"../../modules/_core":46,"../../modules/es6.object.define-property":109}],36:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/_core").Promise},{"../modules/_core":46,"../modules/es6.object.to-string":110,"../modules/es6.promise":111,"../modules/es6.string.iterator":112,"../modules/web.dom.iterable":116}],37:[function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":46,"../../modules/es6.object.to-string":110,"../../modules/es6.symbol":113,"../../modules/es7.symbol.async-iterator":114,"../../modules/es7.symbol.observable":115}],38:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":105,"../../modules/es6.string.iterator":112,"../../modules/web.dom.iterable":116}],39:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],40:[function(e,t,r){t.exports=function(){}},{}],41:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],42:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":65}],43:[function(e,t,r){var n=e("./_to-iobject"),i=e("./_to-length"),o=e("./_to-index");t.exports=function(e){return function(t,r,s){var a,u=n(t),c=i(u.length),f=o(s,c);if(e&&r!=r){for(;c>f;)if(a=u[f++],a!=a)return!0}else for(;c>f;f++)if((e||f in u)&&u[f]===r)return e||f||0;return!e&&-1}}},{"./_to-index":97,
"./_to-iobject":99,"./_to-length":100}],44:[function(e,t,r){var n=e("./_cof"),i=e("./_wks")("toStringTag"),o="Arguments"==n(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=s(t=Object(e),i))?r:o?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},{"./_cof":45,"./_wks":106}],45:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],46:[function(e,t,r){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},{}],47:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":39}],48:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],49:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":54}],50:[function(e,t,r){var n=e("./_is-object"),i=e("./_global").document,o=n(i)&&n(i.createElement);t.exports=function(e){return o?i.createElement(e):{}}},{"./_global":56,"./_is-object":65}],51:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],52:[function(e,t,r){var n=e("./_object-keys"),i=e("./_object-gops"),o=e("./_object-pie");t.exports=function(e){var t=n(e),r=i.f;if(r)for(var s,a=r(e),u=o.f,c=0;a.length>c;)u.call(e,s=a[c++])&&t.push(s);return t}},{"./_object-gops":82,"./_object-keys":85,"./_object-pie":86}],53:[function(e,t,r){var n=e("./_global"),i=e("./_core"),o=e("./_ctx"),s=e("./_hide"),a="prototype",u=function(e,t,r){var c,f,l,h=e&u.F,d=e&u.G,p=e&u.S,y=e&u.P,v=e&u.B,b=e&u.W,m=d?i:i[t]||(i[t]={}),g=m[a],_=d?n:p?n[t]:(n[t]||{})[a];d&&(r=t);for(c in r)f=!h&&_&&void 0!==_[c],f&&c in m||(l=f?_[c]:r[c],m[c]=d&&"function"!=typeof _[c]?r[c]:v&&f?o(l,n):b&&_[c]==l?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t[a]=e[a],t}(l):y&&"function"==typeof l?o(Function.call,l):l,y&&((m.virtual||(m.virtual={}))[c]=l,e&u.R&&g&&!g[c]&&s(g,c,l)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":46,"./_ctx":47,"./_global":56,"./_hide":58}],54:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],55:[function(e,t,r){var n=e("./_ctx"),i=e("./_iter-call"),o=e("./_is-array-iter"),s=e("./_an-object"),a=e("./_to-length"),u=e("./core.get-iterator-method"),c={},f={},r=t.exports=function(e,t,r,l,h){var d,p,y,v,b=h?function(){return e}:u(e),m=n(r,l,t?2:1),g=0;if("function"!=typeof b)throw TypeError(e+" is not iterable!");if(o(b)){for(d=a(e.length);d>g;g++)if(v=t?m(s(p=e[g])[0],p[1]):m(e[g]),v===c||v===f)return v}else for(y=b.call(e);!(p=y.next()).done;)if(v=i(y,m,p.value,t),v===c||v===f)return v};r.BREAK=c,r.RETURN=f},{"./_an-object":42,"./_ctx":47,"./_is-array-iter":63,"./_iter-call":66,"./_to-length":100,"./core.get-iterator-method":107}],56:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],57:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],58:[function(e,t,r){var n=e("./_object-dp"),i=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":49,"./_object-dp":77,"./_property-desc":87}],59:[function(e,t,r){t.exports=e("./_global").document&&document.documentElement},{"./_global":56}],60:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":49,"./_dom-create":50,"./_fails":54}],61:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],62:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":45}],63:[function(e,t,r){var n=e("./_iterators"),i=e("./_wks")("iterator"),o=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},{"./_iterators":71,"./_wks":106}],64:[function(e,t,r){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":45}],65:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],66:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},{"./_an-object":42}],67:[function(e,t,r){"use strict";var n=e("./_object-create"),i=e("./_property-desc"),o=e("./_set-to-string-tag"),s={};e("./_hide")(s,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(s,{next:i(1,r)}),o(e,t+" Iterator")}},{"./_hide":58,"./_object-create":76,"./_property-desc":87,"./_set-to-string-tag":91,"./_wks":106}],68:[function(e,t,r){"use strict";var n=e("./_library"),i=e("./_export"),o=e("./_redefine"),s=e("./_hide"),a=e("./_has"),u=e("./_iterators"),c=e("./_iter-create"),f=e("./_set-to-string-tag"),l=e("./_object-gpo"),h=e("./_wks")("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",y="keys",v="values",b=function(){return this};t.exports=function(e,t,r,m,g,_,w){c(r,t,m);var x,k,E,S=function(e){if(!d&&e in C)return C[e];switch(e){case y:return function(){return new r(this,e)};case v:return function(){return new r(this,e)}}return function(){return new r(this,e)}},j=t+" Iterator",O=g==v,A=!1,C=e.prototype,R=C[h]||C[p]||g&&C[g],B=R||S(g),P=g?O?S("entries"):B:void 0,T="Array"==t?C.entries||R:R;if(T&&(E=l(T.call(new e)),E!==Object.prototype&&(f(E,j,!0),n||a(E,h)||s(E,h,b))),O&&R&&R.name!==v&&(A=!0,B=function(){return R.call(this)}),n&&!w||!d&&!A&&C[h]||s(C,h,B),u[t]=B,u[j]=b,g)if(x={values:O?B:S(v),keys:_?B:S(y),entries:P},w)for(k in x)k in C||o(C,k,x[k]);else i(i.P+i.F*(d||A),t,x);return x}},{"./_export":53,"./_has":57,"./_hide":58,"./_iter-create":67,"./_iterators":71,"./_library":73,"./_object-gpo":83,"./_redefine":89,"./_set-to-string-tag":91,"./_wks":106}],69:[function(e,t,r){var n=e("./_wks")("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:r=!0}},o[n]=function(){return s},e(o)}catch(e){}return r}},{"./_wks":106}],70:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],71:[function(e,t,r){t.exports={}},{}],72:[function(e,t,r){var n=e("./_object-keys"),i=e("./_to-iobject");t.exports=function(e,t){for(var r,o=i(e),s=n(o),a=s.length,u=0;a>u;)if(o[r=s[u++]]===t)return r}},{"./_object-keys":85,"./_to-iobject":99}],73:[function(e,t,r){t.exports=!0},{}],74:[function(e,t,r){var n=e("./_uid")("meta"),i=e("./_is-object"),o=e("./_has"),s=e("./_object-dp").f,a=0,u=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),f=function(e){s(e,n,{value:{i:"O"+ ++a,w:{}}})},l=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!u(e))return"F";if(!t)return"E";f(e)}return e[n].i},h=function(e,t){if(!o(e,n)){if(!u(e))return!0;if(!t)return!1;f(e)}return e[n].w},d=function(e){return c&&p.NEED&&u(e)&&!o(e,n)&&f(e),e},p=t.exports={KEY:n,NEED:!1,fastKey:l,getWeak:h,onFreeze:d}},{"./_fails":54,"./_has":57,"./_is-object":65,"./_object-dp":77,"./_uid":103}],75:[function(e,t,r){var n=e("./_global"),i=e("./_task").set,o=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,u="process"==e("./_cof")(s);t.exports=function(){var e,t,r,c=function(){var n,i;for(u&&(n=s.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){s.nextTick(c)};else if(o){var f=!0,l=document.createTextNode("");new o(c).observe(l,{characterData:!0}),r=function(){l.data=f=!f}}else if(a&&a.resolve){var h=a.resolve();r=function(){h.then(c)}}else r=function(){i.call(n,c)};return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},{"./_cof":45,"./_global":56,"./_task":96}],76:[function(e,t,r){var n=e("./_an-object"),i=e("./_object-dps"),o=e("./_enum-bug-keys"),s=e("./_shared-key")("IE_PROTO"),a=function(){},u="prototype",c=function(){var t,r=e("./_dom-create")("iframe"),n=o.length,i="<",s=">";for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",t=r.contentWindow.document,t.open(),t.write(i+"script"+s+"document.F=Object"+i+"/script"+s),t.close(),c=t.F;n--;)delete c[u][o[n]];return c()};t.exports=Object.create||function(e,t){var r;return null!==e?(a[u]=n(e),r=new a,a[u]=null,r[s]=e):r=c(),void 0===t?r:i(r,t)}},{"./_an-object":42,"./_dom-create":50,"./_enum-bug-keys":51,"./_html":59,"./_object-dps":78,"./_shared-key":92}],77:[function(e,t,r){var n=e("./_an-object"),i=e("./_ie8-dom-define"),o=e("./_to-primitive"),s=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":42,"./_descriptors":49,"./_ie8-dom-define":60,"./_to-primitive":102}],78:[function(e,t,r){var n=e("./_object-dp"),i=e("./_an-object"),o=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){i(e);for(var r,s=o(t),a=s.length,u=0;a>u;)n.f(e,r=s[u++],t[r]);return e}},{"./_an-object":42,"./_descriptors":49,"./_object-dp":77,"./_object-keys":85}],79:[function(e,t,r){var n=e("./_object-pie"),i=e("./_property-desc"),o=e("./_to-iobject"),s=e("./_to-primitive"),a=e("./_has"),u=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;r.f=e("./_descriptors")?c:function(e,t){if(e=o(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(a(e,t))return i(!n.f.call(e,t),e[t])}},{"./_descriptors":49,"./_has":57,"./_ie8-dom-define":60,"./_object-pie":86,"./_property-desc":87,"./_to-iobject":99,"./_to-primitive":102}],80:[function(e,t,r){var n=e("./_to-iobject"),i=e("./_object-gopn").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(e){return s.slice()}};t.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):i(n(e))}},{"./_object-gopn":81,"./_to-iobject":99}],81:[function(e,t,r){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},{"./_enum-bug-keys":51,"./_object-keys-internal":84}],82:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],83:[function(e,t,r){var n=e("./_has"),i=e("./_to-object"),o=e("./_shared-key")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"./_has":57,"./_shared-key":92,"./_to-object":101}],84:[function(e,t,r){var n=e("./_has"),i=e("./_to-iobject"),o=e("./_array-includes")(!1),s=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,a=i(e),u=0,c=[];for(r in a)r!=s&&n(a,r)&&c.push(r);for(;t.length>u;)n(a,r=t[u++])&&(~o(c,r)||c.push(r));return c}},{"./_array-includes":43,"./_has":57,"./_shared-key":92,"./_to-iobject":99}],85:[function(e,t,r){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,i)}},{"./_enum-bug-keys":51,"./_object-keys-internal":84}],86:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],87:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],88:[function(e,t,r){var n=e("./_hide");t.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},{"./_hide":58}],89:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":58}],90:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_core"),o=e("./_object-dp"),s=e("./_descriptors"),a=e("./_wks")("species");t.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];s&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},{"./_core":46,"./_descriptors":49,"./_global":56,"./_object-dp":77,"./_wks":106}],91:[function(e,t,r){var n=e("./_object-dp").f,i=e("./_has"),o=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},{"./_has":57,"./_object-dp":77,"./_wks":106}],92:[function(e,t,r){var n=e("./_shared")("keys"),i=e("./_uid");t.exports=function(e){return n[e]||(n[e]=i(e))}},{"./_shared":93,"./_uid":103}],93:[function(e,t,r){var n=e("./_global"),i="__core-js_shared__",o=n[i]||(n[i]={});t.exports=function(e){return o[e]||(o[e]={})}},{"./_global":56}],94:[function(e,t,r){var n=e("./_an-object"),i=e("./_a-function"),o=e("./_wks")("species");t.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||void 0==(r=n(s)[o])?t:i(r)}},{"./_a-function":39,"./_an-object":42,"./_wks":106}],95:[function(e,t,r){var n=e("./_to-integer"),i=e("./_defined");t.exports=function(e){return function(t,r){var o,s,a=String(i(t)),u=n(r),c=a.length;return u<0||u>=c?e?"":void 0:(o=a.charCodeAt(u),o<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):o:e?a.slice(u,u+2):(o-55296<<10)+(s-56320)+65536)}}},{"./_defined":48,"./_to-integer":98}],96:[function(e,t,r){var n,i,o,s=e("./_ctx"),a=e("./_invoke"),u=e("./_html"),c=e("./_dom-create"),f=e("./_global"),l=f.process,h=f.setImmediate,d=f.clearImmediate,p=f.MessageChannel,y=0,v={},b="onreadystatechange",m=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},g=function(e){m.call(e.data)};h&&d||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return v[++y]=function(){a("function"==typeof e?e:Function(e),t)},n(y),y},d=function(e){delete v[e]},"process"==e("./_cof")(l)?n=function(e){l.nextTick(s(m,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=g,n=s(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(n=function(e){f.postMessage(e+"","*")},f.addEventListener("message",g,!1)):n=b in c("script")?function(e){u.appendChild(c("script"))[b]=function(){u.removeChild(this),m.call(e)}}:function(e){setTimeout(s(m,e,1),0)}),t.exports={set:h,clear:d}},{"./_cof":45,"./_ctx":47,"./_dom-create":50,"./_global":56,"./_html":59,"./_invoke":61}],97:[function(e,t,r){var n=e("./_to-integer"),i=Math.max,o=Math.min;t.exports=function(e,t){return e=n(e),e<0?i(e+t,0):o(e,t)}},{"./_to-integer":98}],98:[function(e,t,r){var n=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},{}],99:[function(e,t,r){var n=e("./_iobject"),i=e("./_defined");t.exports=function(e){return n(i(e))}},{"./_defined":48,"./_iobject":62}],100:[function(e,t,r){var n=e("./_to-integer"),i=Math.min;t.exports=function(e){return e>0?i(n(e),9007199254740991):0}},{"./_to-integer":98}],101:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":48}],102:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":65}],103:[function(e,t,r){var n=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},{}],104:[function(e,t,r){var n=e("./_global"),i=e("./_core"),o=e("./_library"),s=e("./_wks-ext"),a=e("./_object-dp").f;t.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},{"./_core":46,"./_global":56,"./_library":73,"./_object-dp":77,"./_wks-ext":105}],105:[function(e,t,r){r.f=e("./_wks")},{"./_wks":106}],106:[function(e,t,r){var n=e("./_shared")("wks"),i=e("./_uid"),o=e("./_global").Symbol,s="function"==typeof o,a=t.exports=function(e){return n[e]||(n[e]=s&&o[e]||(s?o:i)("Symbol."+e))};a.store=n},{"./_global":56,"./_shared":93,"./_uid":103}],107:[function(e,t,r){var n=e("./_classof"),i=e("./_wks")("iterator"),o=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[n(e)]}},{"./_classof":44,"./_core":46,"./_iterators":71,"./_wks":106}],108:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),i=e("./_iter-step"),o=e("./_iterators"),s=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":40,"./_iter-define":68,"./_iter-step":70,"./_iterators":71,"./_to-iobject":99}],109:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":49,"./_export":53,"./_object-dp":77}],110:[function(e,t,r){arguments[4][30][0].apply(r,arguments)},{dup:30}],111:[function(e,t,r){"use strict";var n,i,o,s=e("./_library"),a=e("./_global"),u=e("./_ctx"),c=e("./_classof"),f=e("./_export"),l=e("./_is-object"),h=e("./_a-function"),d=e("./_an-instance"),p=e("./_for-of"),y=e("./_species-constructor"),v=e("./_task").set,b=e("./_microtask")(),m="Promise",g=a.TypeError,_=a.process,w=a[m],_=a.process,x="process"==c(_),k=function(){},E=!!function(){try{var t=w.resolve(1),r=(t.constructor={})[e("./_wks")("species")]=function(e){e(k,k)};return(x||"function"==typeof PromiseRejectionEvent)&&t.then(k)instanceof r}catch(e){}}(),S=function(e,t){return e===t||e===w&&t===o},j=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},O=function(e){return S(w,e)?new A(e):new i(e)},A=i=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw g("Bad Promise constructor");t=e,r=n}),this.resolve=h(t),this.reject=h(r)},C=function(e){try{e()}catch(e){return{error:e}}},R=function(e,t){if(!e._n){e._n=!0;var r=e._c;b(function(){for(var n=e._v,i=1==e._s,o=0,s=function(t){var r,o,s=i?t.ok:t.fail,a=t.resolve,u=t.reject,c=t.domain;try{s?(i||(2==e._h&&T(e),e._h=1),s===!0?r=n:(c&&c.enter(),r=s(n),c&&c.exit()),r===t.promise?u(g("Promise-chain cycle")):(o=j(r))?o.call(r,a,u):a(r)):u(n)}catch(e){u(e)}};r.length>o;)s(r[o++]);e._c=[],e._n=!1,t&&!e._h&&B(e)})}},B=function(e){v.call(a,function(){var t,r,n,i=e._v;if(P(e)&&(t=C(function(){x?_.emit("unhandledRejection",i,e):(r=a.onunhandledrejection)?r({promise:e,reason:i}):(n=a.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=x||P(e)?2:1),e._a=void 0,t)throw t.error})},P=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!P(t.promise))return!1;return!0},T=function(e){v.call(a,function(){var t;x?_.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})})},I=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),R(t,!0))},D=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw g("Promise can't be resolved itself");(t=j(e))?b(function(){var n={_w:r,_d:!1};try{t.call(e,u(D,n,1),u(I,n,1))}catch(e){I.call(n,e)}}):(r._v=e,r._s=1,R(r,!1))}catch(e){I.call({_w:r,_d:!1},e)}}};E||(w=function(e){d(this,w,m,"_h"),h(e),n.call(this);try{e(u(D,this,1),u(I,this,1))}catch(e){I.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=e("./_redefine-all")(w.prototype,{then:function(e,t){var r=O(y(this,w));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=x?_.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&R(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),A=function(){var e=new n;this.promise=e,this.resolve=u(D,e,1),this.reject=u(I,e,1)}),f(f.G+f.W+f.F*!E,{Promise:w}),e("./_set-to-string-tag")(w,m),e("./_set-species")(m),o=e("./_core")[m],f(f.S+f.F*!E,m,{reject:function(e){var t=O(this),r=t.reject;return r(e),t.promise}}),f(f.S+f.F*(s||!E),m,{resolve:function(e){if(e instanceof w&&S(e.constructor,this))return e;var t=O(this),r=t.resolve;return r(e),t.promise}}),f(f.S+f.F*!(E&&e("./_iter-detect")(function(e){w.all(e).catch(k)})),m,{all:function(e){var t=this,r=O(t),n=r.resolve,i=r.reject,o=C(function(){var r=[],o=0,s=1;p(e,!1,function(e){var a=o++,u=!1;r.push(void 0),s++,t.resolve(e).then(function(e){u||(u=!0,r[a]=e,--s||n(r))},i)}),--s||n(r)});return o&&i(o.error),r.promise},race:function(e){var t=this,r=O(t),n=r.reject,i=C(function(){p(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i&&n(i.error),r.promise}})},{"./_a-function":39,"./_an-instance":41,"./_classof":44,"./_core":46,"./_ctx":47,"./_export":53,"./_for-of":55,"./_global":56,"./_is-object":65,"./_iter-detect":69,"./_library":73,"./_microtask":75,"./_redefine-all":88,"./_set-species":90,"./_set-to-string-tag":91,"./_species-constructor":94,"./_task":96,"./_wks":106}],112:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":68,"./_string-at":95}],113:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_has"),o=e("./_descriptors"),s=e("./_export"),a=e("./_redefine"),u=e("./_meta").KEY,c=e("./_fails"),f=e("./_shared"),l=e("./_set-to-string-tag"),h=e("./_uid"),d=e("./_wks"),p=e("./_wks-ext"),y=e("./_wks-define"),v=e("./_keyof"),b=e("./_enum-keys"),m=e("./_is-array"),g=e("./_an-object"),_=e("./_to-iobject"),w=e("./_to-primitive"),x=e("./_property-desc"),k=e("./_object-create"),E=e("./_object-gopn-ext"),S=e("./_object-gopd"),j=e("./_object-dp"),O=e("./_object-keys"),A=S.f,C=j.f,R=E.f,B=n.Symbol,P=n.JSON,T=P&&P.stringify,I="prototype",D=d("_hidden"),M=d("toPrimitive"),L={}.propertyIsEnumerable,q=f("symbol-registry"),N=f("symbols"),F=f("op-symbols"),$=Object[I],U="function"==typeof B,z=n.QObject,W=!z||!z[I]||!z[I].findChild,V=o&&c(function(){return 7!=k(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=A($,t);n&&delete $[t],C(e,t,r),n&&e!==$&&C($,t,n)}:C,K=function(e){var t=N[e]=k(B[I]);return t._k=e,t},J=U&&"symbol"==typeof B.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof B},G=function(e,t,r){return e===$&&G(F,t,r),g(e),t=w(t,!0),g(r),i(N,t)?(r.enumerable?(i(e,D)&&e[D][t]&&(e[D][t]=!1),r=k(r,{enumerable:x(0,!1)})):(i(e,D)||C(e,D,x(1,{})),e[D][t]=!0),V(e,t,r)):C(e,t,r)},H=function(e,t){g(e);for(var r,n=b(t=_(t)),i=0,o=n.length;o>i;)G(e,r=n[i++],t[r]);return e},Y=function(e,t){return void 0===t?k(e):H(k(e),t)},Z=function(e){var t=L.call(this,e=w(e,!0));return!(this===$&&i(N,e)&&!i(F,e))&&(!(t||!i(this,e)||!i(N,e)||i(this,D)&&this[D][e])||t)},Q=function(e,t){if(e=_(e),t=w(t,!0),e!==$||!i(N,t)||i(F,t)){var r=A(e,t);return!r||!i(N,t)||i(e,D)&&e[D][t]||(r.enumerable=!0),r}},X=function(e){for(var t,r=R(_(e)),n=[],o=0;r.length>o;)i(N,t=r[o++])||t==D||t==u||n.push(t);return n},ee=function(e){for(var t,r=e===$,n=R(r?F:_(e)),o=[],s=0;n.length>s;)!i(N,t=n[s++])||r&&!i($,t)||o.push(N[t]);return o};U||(B=function(){if(this instanceof B)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===$&&t.call(F,r),i(this,D)&&i(this[D],e)&&(this[D][e]=!1),V(this,e,x(1,r))};return o&&W&&V($,e,{configurable:!0,set:t}),K(e)},a(B[I],"toString",function(){return this._k}),S.f=Q,j.f=G,e("./_object-gopn").f=E.f=X,e("./_object-pie").f=Z,e("./_object-gops").f=ee,o&&!e("./_library")&&a($,"propertyIsEnumerable",Z,!0),p.f=function(e){return K(d(e))}),s(s.G+s.W+s.F*!U,{Symbol:B});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)d(te[re++]);for(var te=O(d.store),re=0;te.length>re;)y(te[re++]);s(s.S+s.F*!U,"Symbol",{for:function(e){return i(q,e+="")?q[e]:q[e]=B(e)},keyFor:function(e){if(J(e))return v(q,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!U,"Object",{create:Y,defineProperty:G,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:X,getOwnPropertySymbols:ee}),P&&s(s.S+s.F*(!U||c(function(){var e=B();return"[null]"!=T([e])||"{}"!=T({a:e})||"{}"!=T(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!J(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&m(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!J(t))return t}),n[1]=t,T.apply(P,n)}}}),B[I][M]||e("./_hide")(B[I],M,B[I].valueOf),l(B,"Symbol"),l(Math,"Math",!0),l(n.JSON,"JSON",!0)},{"./_an-object":42,"./_descriptors":49,"./_enum-keys":52,"./_export":53,"./_fails":54,"./_global":56,"./_has":57,"./_hide":58,"./_is-array":64,"./_keyof":72,"./_library":73,"./_meta":74,"./_object-create":76,"./_object-dp":77,"./_object-gopd":79,"./_object-gopn":81,"./_object-gopn-ext":80,"./_object-gops":82,"./_object-keys":85,"./_object-pie":86,"./_property-desc":87,"./_redefine":89,"./_set-to-string-tag":91,"./_shared":93,"./_to-iobject":99,"./_to-primitive":102,"./_uid":103,"./_wks":106,"./_wks-define":104,"./_wks-ext":105}],114:[function(e,t,r){e("./_wks-define")("asyncIterator")},{"./_wks-define":104}],115:[function(e,t,r){e("./_wks-define")("observable")},{"./_wks-define":104}],116:[function(e,t,r){e("./es6.array.iterator");for(var n=e("./_global"),i=e("./_hide"),o=e("./_iterators"),s=e("./_wks")("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=a[u],f=n[c],l=f&&f.prototype;l&&!l[s]&&i(l,s,c),o[c]=o.Array}},{"./_global":56,"./_hide":58,"./_iterators":71,"./_wks":106,"./es6.array.iterator":108}],117:[function(e,t,r){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function f(e){return"[object RegExp]"===v(e)}function l(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===v(e)}function d(e){return"[object Error]"===v(e)||e instanceof Error}function p(e){return"function"==typeof e}function y(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function v(e){return Object.prototype.toString.call(e)}r.isArray=t,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=s,r.isString=a,r.isSymbol=u,r.isUndefined=c,r.isRegExp=f,r.isObject=l,r.isDate=h,r.isError=d,r.isFunction=p,r.isPrimitive=y,r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":145}],118:[function(e,t,r){!function(n,i,o){"object"==typeof r?t.exports=r=i(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i):i(n.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib,n=r.BlockCipher,i=t.algo,o=[],s=[],a=[],u=[],c=[],f=[],l=[],h=[],d=[],p=[];!function(){for(var e=[],t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;for(var r=0,n=0,t=0;t<256;t++){var i=n^n<<1^n<<2^n<<3^n<<4;i=i>>>8^255&i^99,o[r]=i,s[i]=r;var y=e[r],v=e[y],b=e[v],m=257*e[i]^16843008*i;a[r]=m<<24|m>>>8,u[r]=m<<16|m>>>16,c[r]=m<<8|m>>>24,f[r]=m;var m=16843009*b^65537*v^257*y^16843008*r;l[i]=m<<24|m>>>8,h[i]=m<<16|m>>>16,d[i]=m<<8|m>>>24,p[i]=m,r?(r=y^e[e[e[b^y]]],n^=e[e[n]]):r=n=1}}();var y=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=this._nRounds=r+6,i=4*(n+1),s=this._keySchedule=[],a=0;a<i;a++)if(a<r)s[a]=t[a];else{var u=s[a-1];a%r?r>6&&a%r==4&&(u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u]):(u=u<<8|u>>>24,u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u],u^=y[a/r|0]<<24),s[a]=s[a-r]^u}for(var c=this._invKeySchedule=[],f=0;f<i;f++){var a=i-f;if(f%4)var u=s[a];else var u=s[a-4];f<4||a<=4?c[f]=u:c[f]=l[o[u>>>24]]^h[o[u>>>16&255]]^d[o[u>>>8&255]]^p[o[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,u,c,f,o)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,l,h,d,p,s);var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,s,a){for(var u=this._nRounds,c=e[t]^r[0],f=e[t+1]^r[1],l=e[t+2]^r[2],h=e[t+3]^r[3],d=4,p=1;p<u;p++){var y=n[c>>>24]^i[f>>>16&255]^o[l>>>8&255]^s[255&h]^r[d++],v=n[f>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&c]^r[d++],b=n[l>>>24]^i[h>>>16&255]^o[c>>>8&255]^s[255&f]^r[d++],m=n[h>>>24]^i[c>>>16&255]^o[f>>>8&255]^s[255&l]^r[d++];c=y,f=v,l=b,h=m}var y=(a[c>>>24]<<24|a[f>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^r[d++],v=(a[f>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&c])^r[d++],b=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[c>>>8&255]<<8|a[255&f])^r[d++],m=(a[h>>>24]<<24|a[c>>>16&255]<<16|a[f>>>8&255]<<8|a[255&l])^r[d++];e[t]=y,e[t+1]=v,e[t+2]=b,e[t+3]=m},keySize:8});t.AES=n._createHelper(v)}(),e.AES})},{"./cipher-core":119,"./core":120,"./enc-base64":121,"./evpkdf":123,"./md5":125}],119:[function(e,t,r){!function(n,i){"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)}(this,function(e){e.lib.Cipher||function(t){var r=e,n=r.lib,i=n.Base,o=n.WordArray,s=n.BufferedBlockAlgorithm,a=r.enc,u=(a.Utf8,a.Base64),c=r.algo,f=c.EvpKDF,l=n.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?k:_}return function(t){return{encrypt:function(r,n,i){return e(n).encrypt(t,r,n,i)},decrypt:function(r,n,i){return e(n).decrypt(t,r,n,i)}}}}()}),h=(n.StreamCipher=l.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),r.mode={}),d=n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=h.CBC=function(){function e(e,r,n){var i=this._iv;if(i){var o=i;this._iv=t}else var o=this._prevBlock;for(var s=0;s<n;s++)e[r+s]^=o[s]}var r=d.extend();return r.Encryptor=r.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize;e.call(this,t,r,i),n.encryptBlock(t,r),
this._prevBlock=t.slice(r,r+i)}}),r.Decryptor=r.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize,o=t.slice(r,r+i);n.decryptBlock(t,r),e.call(this,t,r,i),this._prevBlock=o}}),r}(),y=r.pad={},v=y.Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,i=n<<24|n<<16|n<<8|n,s=[],a=0;a<n;a+=4)s.push(i);var u=o.create(s,n);e.concat(u)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},b=(n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:p,padding:v}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=r.createEncryptor;else{var n=r.createDecryptor;this._minBufferSize=1}this._mode=n.call(r,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=r.format={},g=m.OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var n=o.create([1398893684,1701076831]).concat(r).concat(t);else var n=t;return n.toString(u)},parse:function(e){var t=u.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var n=o.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return b.create({ciphertext:t,salt:n})}},_=n.SerializableCipher=i.extend({cfg:i.extend({format:g}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),o=i.finalize(t),s=i.cfg;return b.create({ciphertext:o,key:r,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=e.createDecryptor(r,n).finalize(t.ciphertext);return i},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),w=r.kdf={},x=w.OpenSSL={execute:function(e,t,r,n){n||(n=o.random(8));var i=f.create({keySize:t+r}).compute(e,n),s=o.create(i.words.slice(t),4*r);return i.sigBytes=4*t,b.create({key:i,iv:s,salt:n})}},k=n.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:x}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=n.kdf.execute(r,e.keySize,e.ivSize);n.iv=i.iv;var o=_.encrypt.call(this,e,t,i.key,n);return o.mixIn(i),o},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);n.iv=i.iv;var o=_.decrypt.call(this,e,t,i.key,n);return o}})}()})},{"./core":120}],120:[function(e,t,r){!function(e,n){"object"==typeof r?t.exports=r=n():"function"==typeof define&&define.amd?define([],n):e.CryptoJS=n()}(this,function(){var e=e||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),n={},i=n.lib={},o=i.Base=function(){return{extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=i.WordArray=o.extend({init:function(e,r){e=this.words=e||[],r!=t?this.sigBytes=r:this.sigBytes=4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=s<<24-(n+o)%4*8}else for(var o=0;o<i;o+=4)t[n+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,n=[],i=function(t){var t=t,r=987654321,n=4294967295;return function(){r=36969*(65535&r)+(r>>16)&n,t=18e3*(65535&t)+(t>>16)&n;var i=(r<<16)+t&n;return i/=4294967296,i+=.5,i*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var a=i(4294967296*(r||e.random()));r=987654071*a(),n.push(4294967296*a()|0)}return new s.init(n,t)}}),a=n.enc={},u=a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new s.init(r,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new s.init(r,t)}},f=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,a=4*o,u=i/a;u=t?e.ceil(u):e.max((0|u)-this._minBufferSize,0);var c=u*o,f=e.min(4*c,i);if(c){for(var l=0;l<c;l+=o)this._doProcessBlock(n,l);var h=n.splice(0,c);r.sigBytes-=f}return new s.init(h,f)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(i.Hasher=l.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new h.HMAC.init(e,r).finalize(t)}}}),n.algo={});return n}(Math);return e})},{}],121:[function(e,t,r){!function(n,i){"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)}(this,function(e){return function(){function t(e,t,r){for(var n=[],o=0,s=0;s<t;s++)if(s%4){var a=r[e.charCodeAt(s-1)]<<s%4*2,u=r[e.charCodeAt(s)]>>>6-s%4*2;n[o>>>2]|=(a|u)<<24-o%4*8,o++}return i.create(n,o)}var r=e,n=r.lib,i=n.WordArray,o=r.enc;o.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],o=0;o<r;o+=3)for(var s=t[o>>>2]>>>24-o%4*8&255,a=t[o+1>>>2]>>>24-(o+1)%4*8&255,u=t[o+2>>>2]>>>24-(o+2)%4*8&255,c=s<<16|a<<8|u,f=0;f<4&&o+.75*f<r;f++)i.push(n.charAt(c>>>6*(3-f)&63));var l=n.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e){var r=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);a!==-1&&(r=a)}return t(e,r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64})},{"./core":120}],122:[function(e,t,r){!function(n,i){"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)}(this,function(e){return e.enc.Utf8})},{"./core":120}],123:[function(e,t,r){!function(n,i,o){"object"==typeof r?t.exports=r=i(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],i):i(n.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib,n=r.Base,i=r.WordArray,o=t.algo,s=o.MD5,a=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=r.hasher.create(),o=i.create(),s=o.words,a=r.keySize,u=r.iterations;s.length<a;){c&&n.update(c);var c=n.update(e).finalize(t);n.reset();for(var f=1;f<u;f++)c=n.finalize(c),n.reset();o.concat(c)}return o.sigBytes=4*a,o}});t.EvpKDF=function(e,t,r){return a.create(r).compute(e,t)}}(),e.EvpKDF})},{"./core":120,"./hmac":124,"./sha1":126}],124:[function(e,t,r){!function(n,i){"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)}(this,function(e){!function(){var t=e,r=t.lib,n=r.Base,i=t.enc,o=i.Utf8,s=t.algo;s.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),s=this._iKey=t.clone(),a=i.words,u=s.words,c=0;c<r;c++)a[c]^=1549556828,u[c]^=909522486;i.sigBytes=s.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);t.reset();var n=t.finalize(this._oKey.clone().concat(r));return n}})}()})},{"./core":120}],125:[function(e,t,r){!function(n,i){"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)}(this,function(e){return function(t){function r(e,t,r,n,i,o,s){var a=e+(t&r|~t&n)+i+s;return(a<<o|a>>>32-o)+t}function n(e,t,r,n,i,o,s){var a=e+(t&n|r&~n)+i+s;return(a<<o|a>>>32-o)+t}function i(e,t,r,n,i,o,s){var a=e+(t^r^n)+i+s;return(a<<o|a>>>32-o)+t}function o(e,t,r,n,i,o,s){var a=e+(r^(t|~n))+i+s;return(a<<o|a>>>32-o)+t}var s=e,a=s.lib,u=a.WordArray,c=a.Hasher,f=s.algo,l=[];!function(){for(var e=0;e<64;e++)l[e]=4294967296*t.abs(t.sin(e+1))|0}();var h=f.MD5=c.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var s=0;s<16;s++){var a=t+s,u=e[a];e[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var c=this._hash.words,f=e[t+0],h=e[t+1],d=e[t+2],p=e[t+3],y=e[t+4],v=e[t+5],b=e[t+6],m=e[t+7],g=e[t+8],_=e[t+9],w=e[t+10],x=e[t+11],k=e[t+12],E=e[t+13],S=e[t+14],j=e[t+15],O=c[0],A=c[1],C=c[2],R=c[3];O=r(O,A,C,R,f,7,l[0]),R=r(R,O,A,C,h,12,l[1]),C=r(C,R,O,A,d,17,l[2]),A=r(A,C,R,O,p,22,l[3]),O=r(O,A,C,R,y,7,l[4]),R=r(R,O,A,C,v,12,l[5]),C=r(C,R,O,A,b,17,l[6]),A=r(A,C,R,O,m,22,l[7]),O=r(O,A,C,R,g,7,l[8]),R=r(R,O,A,C,_,12,l[9]),C=r(C,R,O,A,w,17,l[10]),A=r(A,C,R,O,x,22,l[11]),O=r(O,A,C,R,k,7,l[12]),R=r(R,O,A,C,E,12,l[13]),C=r(C,R,O,A,S,17,l[14]),A=r(A,C,R,O,j,22,l[15]),O=n(O,A,C,R,h,5,l[16]),R=n(R,O,A,C,b,9,l[17]),C=n(C,R,O,A,x,14,l[18]),A=n(A,C,R,O,f,20,l[19]),O=n(O,A,C,R,v,5,l[20]),R=n(R,O,A,C,w,9,l[21]),C=n(C,R,O,A,j,14,l[22]),A=n(A,C,R,O,y,20,l[23]),O=n(O,A,C,R,_,5,l[24]),R=n(R,O,A,C,S,9,l[25]),C=n(C,R,O,A,p,14,l[26]),A=n(A,C,R,O,g,20,l[27]),O=n(O,A,C,R,E,5,l[28]),R=n(R,O,A,C,d,9,l[29]),C=n(C,R,O,A,m,14,l[30]),A=n(A,C,R,O,k,20,l[31]),O=i(O,A,C,R,v,4,l[32]),R=i(R,O,A,C,g,11,l[33]),C=i(C,R,O,A,x,16,l[34]),A=i(A,C,R,O,S,23,l[35]),O=i(O,A,C,R,h,4,l[36]),R=i(R,O,A,C,y,11,l[37]),C=i(C,R,O,A,m,16,l[38]),A=i(A,C,R,O,w,23,l[39]),O=i(O,A,C,R,E,4,l[40]),R=i(R,O,A,C,f,11,l[41]),C=i(C,R,O,A,p,16,l[42]),A=i(A,C,R,O,b,23,l[43]),O=i(O,A,C,R,_,4,l[44]),R=i(R,O,A,C,k,11,l[45]),C=i(C,R,O,A,j,16,l[46]),A=i(A,C,R,O,d,23,l[47]),O=o(O,A,C,R,f,6,l[48]),R=o(R,O,A,C,m,10,l[49]),C=o(C,R,O,A,S,15,l[50]),A=o(A,C,R,O,v,21,l[51]),O=o(O,A,C,R,k,6,l[52]),R=o(R,O,A,C,p,10,l[53]),C=o(C,R,O,A,w,15,l[54]),A=o(A,C,R,O,h,21,l[55]),O=o(O,A,C,R,g,6,l[56]),R=o(R,O,A,C,j,10,l[57]),C=o(C,R,O,A,b,15,l[58]),A=o(A,C,R,O,E,21,l[59]),O=o(O,A,C,R,y,6,l[60]),R=o(R,O,A,C,x,10,l[61]),C=o(C,R,O,A,d,15,l[62]),A=o(A,C,R,O,_,21,l[63]),c[0]=c[0]+O|0,c[1]=c[1]+A|0,c[2]=c[2]+C|0,c[3]=c[3]+R|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(n/4294967296),s=n;r[(i+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[(i+64>>>9<<4)+14]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,u=a.words,c=0;c<4;c++){var f=u[c];u[c]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return a},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}});s.MD5=c._createHelper(h),s.HmacMD5=c._createHmacHelper(h)}(Math),e.MD5})},{"./core":120}],126:[function(e,t,r){!function(n,i){"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib,n=r.WordArray,i=r.Hasher,o=t.algo,s=[],a=o.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],u=r[4],c=0;c<80;c++){if(c<16)s[c]=0|e[t+c];else{var f=s[c-3]^s[c-8]^s[c-14]^s[c-16];s[c]=f<<1|f>>>31}var l=(n<<5|n>>>27)+u+s[c];l+=c<20?(i&o|~i&a)+1518500249:c<40?(i^o^a)+1859775393:c<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,u=a,a=o,o=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),t[(n+64>>>9<<4)+15]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=i._createHelper(a),t.HmacSHA1=i._createHmacHelper(a)}(),e.SHA1})},{"./core":120}],127:[function(e,t,r){var n=e("buffer").Buffer,i=".PYFGCRLAOEUIDHTNSQJKXBMWVZ_pyfgcrlaoeuidhtnsqjkxbmwvz1234567890".split("").sort().join("");t.exports=function(e,t){if(e=e||i,t=t||{},64!==e.length)throw new Error("a base 64 encoding requires 64 chars");var r=new n(128);r.fill();for(var o=0;o<64;o++){var s=e.charCodeAt(o);r[s]=o}return t.encode=function(t){for(var r="",n=t.length,i=0,o=0;o<n;o++){var s=t[o];switch(o%3){case 0:r+=e[s>>2],i=(3&s)<<4;break;case 1:r+=e[i|s>>4],i=(15&s)<<2;break;case 2:r+=e[i|s>>6],r+=e[63&s],i=0}}return n%3&&(r+=e[i]),r},t.decode=function(e){for(var t=e.length,i=0,o=new n(~~(t/4*3)),s=0,a=0;a<t;a++){var u=r[e.charCodeAt(a)];switch(a%4){case 0:s=u<<2;break;case 1:o[i++]=s|u>>4,s=u<<4&255;break;case 2:o[i++]=s|u>>2,s=u<<6&255;break;case 3:o[i++]=s|u}}return o},t},t.exports(i,t.exports)},{buffer:32}],128:[function(e,t,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}}function a(){var e;try{e=r.storage.debug}catch(e){}return e}function u(){try{return window.localStorage}catch(e){}}r=t.exports=e("./debug"),r.log=o,r.formatArgs=i,r.save=s,r.load=a,r.useColors=n,r.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){return JSON.stringify(e)},r.enable(a())},{"./debug":129}],129:[function(e,t,r){function n(){return r.colors[f++%r.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,o=t-(c||t);e.diff=o,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=r.useColors()),null==e.color&&e.useColors&&(e.color=n());var s=Array.prototype.slice.call(arguments);s[0]=r.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,n){if("%%"===t)return t;a++;var i=r.formatters[n];if("function"==typeof i){var o=s[a];t=i.call(e,o),s.splice(a,1),a--}return t}),"function"==typeof r.formatArgs&&(s=r.formatArgs.apply(e,s));var u=i.log||r.log||console.log.bind(console);u.apply(e,s)}t.enabled=!1,i.enabled=!0;var o=r.enabled(e)?i:t;return o.namespace=e,o}function o(e){r.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,i=0;i<n;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function s(){r.enable("")}function a(e){var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}r=t.exports=i,r.coerce=u,r.disable=s,r.enable=o,r.enabled=a,r.humanize=e("ms"),r.names=[],r.skips=[],r.formatters={};var c,f=0},{ms:174}],130:[function(e,t,r){function n(e){o.call(this,e),this._options=e,this._iterator=null,this._operations=[]}var i=e("util"),o=e("abstract-leveldown").AbstractIterator;i.inherits(n,o),n.prototype.setDb=function(e){var t=this._iterator=e.iterator(this._options);this._operations.forEach(function(e){t[e.method].apply(t,e.args)})},n.prototype._operation=function(e,t){return this._iterator?this._iterator[e].apply(this._iterator,t):void this._operations.push({method:e,args:t})},"next end".split(" ").forEach(function(e){n.prototype["_"+e]=function(){this._operation(e,arguments)}}),t.exports=n},{"abstract-leveldown":17,util:340}],131:[function(e,t,r){(function(r,n){function i(e){s.call(this,"string"==typeof e?e:""),this._db=void 0,this._operations=[],this._iterators=[]}var o=e("util"),s=e("abstract-leveldown").AbstractLevelDOWN,a=e("./deferred-iterator");o.inherits(i,s),i.prototype.setDb=function(e){this._db=e,this._operations.forEach(function(t){e[t.method].apply(e,t.args)}),this._iterators.forEach(function(t){t.setDb(e)})},i.prototype._open=function(e,t){return n.nextTick(t)},i.prototype._operation=function(e,t){return this._db?this._db[e].apply(this._db,t):void this._operations.push({method:e,args:t})},"put get del batch approximateSize".split(" ").forEach(function(e){i.prototype["_"+e]=function(){this._operation(e,arguments)}}),i.prototype._isBuffer=function(e){return r.isBuffer(e)},i.prototype._iterator=function(e){if(this._db)return this._db.iterator.apply(this._db,arguments);var t=new a(e);return this._iterators.push(t),t},t.exports=i,t.exports.DeferredIterator=a}).call(this,{isBuffer:e("../is-buffer/index.js")},e("_process"))},{"../is-buffer/index.js":145,"./deferred-iterator":130,_process:230,"abstract-leveldown":17,util:340}],132:[function(e,t,r){"use strict";function n(e){if(this._capacity=s(e),this._length=0,this._front=0,a(e)){for(var t=e.length,r=0;r<t;++r)this[r]=e[r];this._length=t}}function i(e,t,r,n,i){for(var o=0;o<i;++o)r[o+n]=e[o+t],e[o+t]=void 0}function o(e){return e>>>=0,e-=1,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e+1}function s(e){if("number"!=typeof e){if(!a(e))return 16;e=e.length}return o(Math.min(Math.max(16,e),1073741824))}n.prototype.toArray=function(){for(var e=this._length,t=new Array(e),r=this._front,n=this._capacity,i=0;i<e;++i)t[i]=this[r+i&n-1];return t},n.prototype.push=function(e){var t=arguments.length,r=this._length;if(t>1){var n=this._capacity;if(r+t>n){for(var i=0;i<t;++i){this._checkCapacity(r+1);var o=this._front+r&this._capacity-1;this[o]=arguments[i],r++,this._length=r}return r}for(var o=this._front,i=0;i<t;++i)this[o+r&n-1]=arguments[i],o++;return this._length=r+t,r+t}if(0===t)return r;this._checkCapacity(r+1);var i=this._front+r&this._capacity-1;return this[i]=e,this._length=r+1,r+1},n.prototype.pop=function(){var e=this._length;if(0!==e){var t=this._front+e-1&this._capacity-1,r=this[t];return this[t]=void 0,this._length=e-1,r}},n.prototype.shift=function(){var e=this._length;if(0!==e){var t=this._front,r=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length=e-1,r}},n.prototype.unshift=function(e){var t=this._length,r=arguments.length;if(r>1){var n=this._capacity;if(t+r>n){for(var i=r-1;i>=0;i--){this._checkCapacity(t+1);var n=this._capacity,o=(this._front-1&n-1^n)-n;this[o]=arguments[i],t++,this._length=t,this._front=o}return t}for(var s=this._front,i=r-1;i>=0;i--){var o=(s-1&n-1^n)-n;this[o]=arguments[i],s=o}return this._front=s,this._length=t+r,t+r}if(0===r)return t;this._checkCapacity(t+1);var n=this._capacity,i=(this._front-1&n-1^n)-n;return this[i]=e,this._length=t+1,this._front=i,t+1},n.prototype.peekBack=function(){var e=this._length;if(0!==e){var t=this._front+e-1&this._capacity-1;return this[t]}},n.prototype.peekFront=function(){if(0!==this._length)return this[this._front]},n.prototype.get=function(e){var t=e;if(t===(0|t)){var r=this._length;if(t<0&&(t+=r),!(t<0||t>=r))return this[this._front+t&this._capacity-1]}},n.prototype.isEmpty=function(){return 0===this._length},n.prototype.clear=function(){for(var e=this._length,t=this._front,r=this._capacity,n=0;n<e;++n)this[t+n&r-1]=void 0;this._length=0,this._front=0},n.prototype.toString=function(){return this.toArray().toString()},n.prototype.valueOf=n.prototype.toString,n.prototype.removeFront=n.prototype.shift,n.prototype.removeBack=n.prototype.pop,n.prototype.insertFront=n.prototype.unshift,n.prototype.insertBack=n.prototype.push,n.prototype.enqueue=n.prototype.push,n.prototype.dequeue=n.prototype.shift,n.prototype.toJSON=n.prototype.toArray,Object.defineProperty(n.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("")}}),n.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(s(1.5*this._capacity+16))},n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var r=this._front,n=this._length;if(r+n>t){var o=r+n&t-1;i(this,0,this,t,o)}};var a=Array.isArray;t.exports=n},{}],133:[function(e,t,r){function n(e,t,r){s(this,{type:e,name:e,cause:"string"!=typeof t?t:r,message:t&&"string"!=typeof t?t.message:t},"ewr")}function i(e,t){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee),n.call(this,"CustomError",e,t)}function o(e,t,r){var o=function(r,i){n.call(this,t,r,i),"FilesystemError"==t&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(e.errno[this.cause.errno]?e.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee)};return o.prototype=r?new r:new i,o}var s=e("prr");i.prototype=new Error,t.exports=function(e){var t=function(t,r){return o(e,t,r)};return{CustomError:i,FilesystemError:t("FilesystemError"),createError:t}}},{prr:135}],134:[function(e,t,r){var n=t.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];t.exports.errno={},t.exports.code={},n.forEach(function(e){t.exports.errno[e.errno]=e,t.exports.code[e.code]=e}),t.exports.custom=e("./custom")(t.exports),t.exports.create=t.exports.custom.createError},{"./custom":133}],135:[function(e,t,r){!function(e,r,n){"undefined"!=typeof t&&t.exports?t.exports=n():r[e]=n()}("prr",this,function(){var e="function"==typeof Object.defineProperty?function(e,t,r){return Object.defineProperty(e,t,r),e}:function(e,t,r){return e[t]=r.value,e},t=function(e,t){var r="object"==typeof t,n=!r&&"string"==typeof t,i=function(e){return r?!!t[e]:!!n&&t.indexOf(e[0])>-1};return{enumerable:i("enumerable"),configurable:i("configurable"),writable:i("writable"),value:e}},r=function(r,n,i,o){var s;if(o=t(i,o),"object"==typeof n){for(s in n)Object.hasOwnProperty.call(n,s)&&(o.value=n[s],e(r,s,o));return r}return e(r,n,o)};return r})},{}],136:[function(e,t,r){!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof r?t.exports=n():(e.PromisePool=n(),e.promisePool=e.PromisePool)}(this,function(){"use strict";var e=function(){this._listeners={}};e.prototype.addEventListener=function(e,t){this._listeners[e]=this._listeners[e]||[],this._listeners[e].indexOf(t)<0&&this._listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){if(this._listeners[e]){var r=this._listeners[e].indexOf(t);r>=0&&this._listeners[e].splice(r,1)}},e.prototype.dispatchEvent=function(e){if(this._listeners[e.type]&&this._listeners[e.type].length)for(var t=this._listeners[e.type].slice(),r=0,n=t.length;r<n;++r)t[r].call(this,e)};var t=function(e){return"function"==typeof e.constructor&&"GeneratorFunction"===e.constructor.name},r=function(e){return{next:function(){var t=e();return t?{value:t}:{done:!0}}}},n=function(e){var t=!1;return{next:function(){return t?{done:!0}:(t=!0,{value:e})}}},i=function(e,i){var o=typeof e;if("object"===o){if("function"==typeof e.next)return e;if("function"==typeof e.then)return n(e)}return"function"===o?t(e)?e():r(e):n(i.resolve(e))},o=function(e,t,r){this.target=e,this.type=t,this.data=r},s=function(t,r,n){if(e.call(this),"number"!=typeof r||Math.floor(r)!==r||r<1)throw new Error("Invalid concurrency");this._concurrency=r,this._options=n||{},this._options.promise=this._options.promise||Promise,this._iterator=i(t,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return s.prototype=new e,s.prototype.constructor=s,s.prototype.concurrency=function(e){return"undefined"!=typeof e&&(this._concurrency=e,this.active()&&this._proceed()),this._concurrency},s.prototype.size=function(){return this._size},s.prototype.active=function(){return!!this._promise},s.prototype.promise=function(){return this._promise},s.prototype.start=function(){var e=this,t=this._options.promise;return this._promise=new t(function(t,r){e._callbacks={reject:r,resolve:t},e._proceed()}),this._promise},s.prototype._fireEvent=function(e,t){this.dispatchEvent(new o(this,e,t))},s.prototype._settle=function(e){e?this._callbacks.reject(e):this._callbacks.resolve(),this._promise=null,this._callbacks=null},s.prototype._onPooledPromiseFulfilled=function(e,t){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:e,result:t}),this._proceed())},s.prototype._onPooledPromiseRejected=function(e,t){this._size--,this.active()&&(this._fireEvent("rejected",{promise:e,error:t}),this._settle(t||new Error("Unknown error")))},s.prototype._trackPromise=function(e){var t=this;e.then(function(r){t._onPooledPromiseFulfilled(e,r)},function(r){t._onPooledPromiseRejected(e,r)}).catch(function(e){t._settle(new Error("Promise processing failed: "+e))})},s.prototype._proceed=function(){if(!this._done){for(var e=null;this._size<this._concurrency&&!(e=this._iterator.next()).done;)this._size++,this._trackPromise(e.value);this._done=null===e||!!e.done}this._done&&0===this._size&&this._settle()},s.PromisePoolEvent=o,s.PromisePool=s,s})},{}],137:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(r=this._events[e],a(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(s(r))for(o=Array.prototype.slice.call(arguments,1),c=r.slice(),n=c.length,u=0;u<n;u++)c[u].apply(this,o);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),
this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(a=o;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],138:[function(e,t,r){function n(){try{if("undefined"==typeof localStorage)return!1;if(localStorage.setItem("Storage-Test","1"),"1"!==localStorage.getItem("Storage-Test"))return!1;localStorage.removeItem("Storage-Test")}catch(e){return!1}return!0}"object"==typeof r&&(t.exports=n)},{}],139:[function(e,t,r){(function(r){var n=t.exports={},i=e("localstorage-memory");n.hasLocalStorage=e("has-localstorage"),n.create=function(){var e;return n.hasLocalStorage()?(e=r.localStorage,e={get length(){return r.localStorage.length},getItem:r.localStorage.getItem.bind(r.localStorage),setItem:r.localStorage.setItem.bind(r.localStorage),removeItem:r.localStorage.removeItem.bind(r.localStorage),key:r.localStorage.key.bind(r.localStorage),clear:r.localStorage.clear.bind(r.localStorage)},e.isPersistent=!0):(e=i,e.isPersistent=!1),e.getObject=n.getObject.bind(null,e),e.setObject=n.setObject.bind(null,e),e},n.setObject=function(e,t,r){return"object"!=typeof r?e.setItem(t,r):e.setItem(t,JSON.stringify(r))},n.getObject=function(e,t){var r=e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"has-localstorage":138,"localstorage-memory":173}],140:[function(e,t,r){var n=e("./api");t.exports=n.create()},{"./api":139}],141:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,f=-7,l=r?i-1:0,h=r?-1:1,d=e[t+l];for(l+=h,o=d&(1<<-f)-1,d>>=-f,f+=a;f>0;o=256*o+e[t+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=256*s+e[t+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+l>=1?h/u:h*Math.pow(2,1-l),t*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(t*u-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+d]=255&s,d+=p,s/=256,c-=8);e[r+d-p]|=128*y}},{}],142:[function(e,t,r){(function(e){"use strict";function r(){f=!0;for(var e,t,r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}f=!1}function n(e){1!==l.push(e)||f||i()}var i,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var s=0,a=new o(r),u=e.document.createTextNode("");a.observe(u,{characterData:!0}),i=function(){u.data=s=++s%2}}else if(e.setImmediate||"undefined"==typeof e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){r(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(r,0)};else{var c=new e.MessageChannel;c.port1.onmessage=r,i=function(){c.port2.postMessage(0)}}var f,l=[];t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],143:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],144:[function(e,t,r){var n=Array.isArray,i=Object.prototype.toString;t.exports=n||function(e){return!!e&&"[object Array]"==i.call(e)}},{}],145:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}t.exports=function(e){return null!=e&&(n(e)||i(e)||!!e._isBuffer)}},{}],146:[function(e,t,r){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],147:[function(e,t,r){(function(e,r){!function(n){"use strict";function i(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}var o="object"==typeof e&&e.versions&&e.versions.node;o&&(n=r);for(var s=!n.JS_SHA3_TEST&&"object"==typeof t&&t.exports,a="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],c=[1,256,65536,16777216],f=[6,1536,393216,100663296],l=[0,8,16,24],h=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],d=[224,256,384,512],p=[128,256],y=["hex","buffer","arrayBuffer","array"],v=function(e,t,r){return function(n){return new i(e,t,e).update(n)[r]()}},b=function(e,t,r){return function(n,o){return new i(e,t,o).update(n)[r]()}},m=function(e,t){var r=v(e,t,"hex");r.create=function(){return new i(e,t,e)},r.update=function(e){return r.create().update(e)};for(var n=0;n<y.length;++n){var o=y[n];r[o]=v(e,t,o)}return r},g=function(e,t){var r=b(e,t,"hex");r.create=function(r){return new i(e,t,r)},r.update=function(e,t){return r.create(t).update(e)};for(var n=0;n<y.length;++n){var o=y[n];r[o]=b(e,t,o)}return r},_=[{name:"keccak",padding:c,bits:d,createMethod:m},{name:"sha3",padding:f,bits:d,createMethod:m},{name:"shake",padding:u,bits:p,createMethod:g}],w={},x=0;x<_.length;++x)for(var k=_[x],E=k.bits,S=0;S<E.length;++S)w[k.name+"_"+E[S]]=k.createMethod(E[S],k.padding);i.prototype.update=function(e){var t="string"!=typeof e;t&&e.constructor==n.ArrayBuffer&&(e=new Uint8Array(e));for(var r,i,o=e.length,s=this.blocks,a=this.byteCount,u=this.blockCount,c=0,f=this.s;c<o;){if(this.reset)for(this.reset=!1,s[0]=this.block,r=1;r<u+1;++r)s[r]=0;if(t)for(r=this.start;c<o&&r<a;++c)s[r>>2]|=e[c]<<l[3&r++];else for(r=this.start;c<o&&r<a;++c)i=e.charCodeAt(c),i<128?s[r>>2]|=i<<l[3&r++]:i<2048?(s[r>>2]|=(192|i>>6)<<l[3&r++],s[r>>2]|=(128|63&i)<<l[3&r++]):i<55296||i>=57344?(s[r>>2]|=(224|i>>12)<<l[3&r++],s[r>>2]|=(128|i>>6&63)<<l[3&r++],s[r>>2]|=(128|63&i)<<l[3&r++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++c)),s[r>>2]|=(240|i>>18)<<l[3&r++],s[r>>2]|=(128|i>>12&63)<<l[3&r++],s[r>>2]|=(128|i>>6&63)<<l[3&r++],s[r>>2]|=(128|63&i)<<l[3&r++]);if(this.lastByteIndex=r,r>=a){for(this.start=r-a,this.block=s[u],r=0;r<u;++r)f[r]^=s[r];j(f),this.reset=!0}else this.start=r}return this},i.prototype.finalize=function(){var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex==this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];j(n)},i.prototype.toString=i.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,u="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],u+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(j(r),o=0)}return i&&(e=r[o],i>0&&(u+=a[e>>4&15]+a[15&e]),i>1&&(u+=a[e>>12&15]+a[e>>8&15]),i>2&&(u+=a[e>>20&15]+a[e>>16&15])),u},i.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var u=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)u[s]=r[o];s%t==0&&j(r)}return i&&(u[o]=r[o],e=e.slice(0,a)),e},i.prototype.buffer=i.prototype.arrayBuffer,i.prototype.digest=i.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,u=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],u[e]=255&t,u[e+1]=t>>8&255,u[e+2]=t>>16&255,u[e+3]=t>>24&255;a%r==0&&j(n)}return o&&(e=a<<2,t=n[s],o>0&&(u[e]=255&t),o>1&&(u[e+1]=t>>8&255),o>2&&(u[e+2]=t>>16&255)),u};var j=function(e){var t,r,n,i,o,s,a,u,c,f,l,d,p,y,v,b,m,g,_,w,x,k,E,S,j,O,A,C,R,B,P,T,I,D,M,L,q,N,F,$,U,z,W,V,K,J,G,H,Y,Z,Q,X,ee,te,re,ne,ie,oe,se,ae,ue,ce,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],u=e[4]^e[14]^e[24]^e[34]^e[44],c=e[5]^e[15]^e[25]^e[35]^e[45],f=e[6]^e[16]^e[26]^e[36]^e[46],l=e[7]^e[17]^e[27]^e[37]^e[47],d=e[8]^e[18]^e[28]^e[38]^e[48],p=e[9]^e[19]^e[29]^e[39]^e[49],t=d^(s<<1|a>>>31),r=p^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(u<<1|c>>>31),r=o^(c<<1|u>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(f<<1|l>>>31),r=a^(l<<1|f>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=u^(d<<1|p>>>31),r=c^(p<<1|d>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=f^(i<<1|o>>>31),r=l^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,y=e[0],v=e[1],J=e[11]<<4|e[10]>>>28,G=e[10]<<4|e[11]>>>28,C=e[20]<<3|e[21]>>>29,R=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ue=e[30]<<9|e[31]>>>23,z=e[40]<<18|e[41]>>>14,W=e[41]<<18|e[40]>>>14,D=e[2]<<1|e[3]>>>31,M=e[3]<<1|e[2]>>>31,b=e[13]<<12|e[12]>>>20,m=e[12]<<12|e[13]>>>20,H=e[22]<<10|e[23]>>>22,Y=e[23]<<10|e[22]>>>22,B=e[33]<<13|e[32]>>>19,P=e[32]<<13|e[33]>>>19,ce=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,L=e[14]<<6|e[15]>>>26,q=e[15]<<6|e[14]>>>26,g=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Z=e[34]<<15|e[35]>>>17,Q=e[35]<<15|e[34]>>>17,T=e[45]<<29|e[44]>>>3,I=e[44]<<29|e[45]>>>3,S=e[6]<<28|e[7]>>>4,j=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,N=e[26]<<25|e[27]>>>7,F=e[27]<<25|e[26]>>>7,w=e[36]<<21|e[37]>>>11,x=e[37]<<21|e[36]>>>11,X=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,K=e[9]<<27|e[8]>>>5,O=e[18]<<20|e[19]>>>12,A=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,$=e[38]<<8|e[39]>>>24,U=e[39]<<8|e[38]>>>24,k=e[48]<<14|e[49]>>>18,E=e[49]<<14|e[48]>>>18,e[0]=y^~b&g,e[1]=v^~m&_,e[10]=S^~O&C,e[11]=j^~A&R,e[20]=D^~L&N,e[21]=M^~q&F,e[30]=V^~J&H,e[31]=K^~G&Y,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=b^~g&w,e[3]=m^~_&x,e[12]=O^~C&B,e[13]=A^~R&P,e[22]=L^~N&$,e[23]=q^~F&U,e[32]=J^~H&Z,e[33]=G^~Y&Q,e[42]=ne^~oe&ae,e[43]=ie^~se&ue,e[4]=g^~w&k,e[5]=_^~x&E,e[14]=C^~B&T,e[15]=R^~P&I,e[24]=N^~$&z,e[25]=F^~U&W,e[34]=H^~Z&X,e[35]=Y^~Q&ee,e[44]=oe^~ae&ce,e[45]=se^~ue&fe,e[6]=w^~k&y,e[7]=x^~E&v,e[16]=B^~T&S,e[17]=P^~I&j,e[26]=$^~z&D,e[27]=U^~W&M,e[36]=Z^~X&V,e[37]=Q^~ee&K,e[46]=ae^~ce&te,e[47]=ue^~fe&re,e[8]=k^~y&b,e[9]=E^~v&m,e[18]=T^~S&O,e[19]=I^~j&A,e[28]=z^~D&L,e[29]=W^~M&q,e[38]=X^~V&J,e[39]=ee^~K&G,e[48]=ce^~te&ne,e[49]=fe^~re&ie,e[0]^=h[n],e[1]^=h[n+1]};if(s)t.exports=w;else if(n)for(var O in w)n[O]=w[O]}(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:230}],148:[function(e,t,r){"use strict";function n(e,t,r,n){return this.validateSchema(e,n,t,r).valid}function i(e,t,r,n,i,o){if(!t.properties||void 0===t.properties[i])if(t.additionalProperties===!1)o.addError({name:"additionalProperties",argument:i,message:"additionalProperty "+JSON.stringify(i)+" exists in instance when not allowed"});else{var s=t.additionalProperties||{},a=this.validateSchema(e[i],s,r,n.makeChild(s,i));a.instance!==o.instance[i]&&(o.instance[i]=a.instance),o.importErrors(a)}}function o(e,t,r){var n,i=r.length;for(n=t+1,i;n<i;n++)if(s.deepCompareStrict(e,r[n]))return!1;return!0}var s=e("./helpers"),a=s.ValidatorResult,u=s.SchemaError,c={};c.ignoreProperties={id:!0,default:!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,extends:!0};var f=c.validators={};f.type=function(e,t,r,n){if(void 0===e)return null;var i=new a(e,t,r,n),o=t.type instanceof Array?t.type:[t.type];if(!o.some(this.testType.bind(this,e,t,r,n))){var s=o.map(function(e){return e.id&&"<"+e.id+">"||e+""});i.addError({name:"type",argument:s,message:"is not of a type(s) "+s})}return i},f.anyOf=function(e,t,r,i){if(void 0===e)return null;var o=new a(e,t,r,i);if(!(t.anyOf instanceof Array))throw new u("anyOf must be an array");if(!t.anyOf.some(n.bind(this,e,r,i))){var s=t.anyOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});o.addError({name:"anyOf",argument:s,message:"is not any of "+s.join(",")})}return o},f.allOf=function(e,t,r,n){if(void 0===e)return null;if(!(t.allOf instanceof Array))throw new u("allOf must be an array");var i=new a(e,t,r,n),o=this;return t.allOf.forEach(function(t,s){var a=o.validateSchema(e,t,r,n);if(!a.valid){var u=t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+s+"]";i.addError({name:"allOf",argument:{id:u,length:a.errors.length,valid:a},message:"does not match allOf schema "+u+" with "+a.errors.length+" error[s]:"}),i.importErrors(a)}}),i},f.oneOf=function(e,t,r,i){if(void 0===e)return null;if(!(t.oneOf instanceof Array))throw new u("oneOf must be an array");var o=new a(e,t,r,i),s=t.oneOf.filter(n.bind(this,e,r,i)).length,c=t.oneOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});return 1!==s&&o.addError({name:"oneOf",argument:c,message:"is not exactly one from "+c.join(",")}),o},f.properties=function(e,t,r,n){if(void 0!==e&&e instanceof Object){var i=new a(e,t,r,n),o=t.properties||{};for(var s in o){var u=(e||void 0)&&e[s],c=this.validateSchema(u,o[s],r,n.makeChild(o[s],s));c.instance!==i.instance[s]&&(i.instance[s]=c.instance),i.importErrors(c)}return i}},f.patternProperties=function(e,t,r,n){if(void 0!==e&&this.types.object(e)){var o=new a(e,t,r,n),s=t.patternProperties||{};for(var u in e){var c=!0;for(var f in s){var l=new RegExp(f);if(l.test(u)){c=!1;var h=this.validateSchema(e[u],s[f],r,n.makeChild(s[f],u));h.instance!==o.instance[u]&&(o.instance[u]=h.instance),o.importErrors(h)}}c&&i.call(this,e,t,r,n,u,o)}return o}},f.additionalProperties=function(e,t,r,n){if(void 0!==e&&this.types.object(e)){if(t.patternProperties)return null;var o=new a(e,t,r,n);for(var s in e)i.call(this,e,t,r,n,s,o);return o}},f.minProperties=function(e,t,r,n){if(!e||"object"!=typeof e)return null;var i=new a(e,t,r,n),o=Object.keys(e);return o.length>=t.minProperties||i.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),i},f.maxProperties=function(e,t,r,n){if(!e||"object"!=typeof e)return null;var i=new a(e,t,r,n),o=Object.keys(e);return o.length<=t.maxProperties||i.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),i},f.items=function(e,t,r,n){if(!(e instanceof Array))return null;var i=this,o=new a(e,t,r,n);return void 0!==e&&t.items?(e.every(function(e,s){var a=t.items instanceof Array?t.items[s]||t.additionalItems:t.items;if(void 0===a)return!0;if(a===!1)return o.addError({name:"items",message:"additionalItems not permitted"}),!1;var u=i.validateSchema(e,a,r,n.makeChild(a,s));return u.instance!==o.instance[s]&&(o.instance[s]=u.instance),o.importErrors(u),!0}),o):o},f.minimum=function(e,t,r,n){if("number"!=typeof e)return null;var i=new a(e,t,r,n),o=!0;return o=t.exclusiveMinimum&&t.exclusiveMinimum===!0?e>t.minimum:e>=t.minimum,o||i.addError({name:"minimum",argument:t.minimum,message:"must have a minimum value of "+t.minimum}),i},f.maximum=function(e,t,r,n){if("number"!=typeof e)return null;var i,o=new a(e,t,r,n);return i=t.exclusiveMaximum&&t.exclusiveMaximum===!0?e<t.maximum:e<=t.maximum,i||o.addError({name:"maximum",argument:t.maximum,message:"must have a maximum value of "+t.maximum}),o},f.divisibleBy=function(e,t,r,n){if("number"!=typeof e)return null;if(0==t.divisibleBy)throw new u("divisibleBy cannot be zero");var i=new a(e,t,r,n);return e/t.divisibleBy%1&&i.addError({name:"divisibleBy",argument:t.divisibleBy,message:"is not divisible by (multiple of) "+JSON.stringify(t.divisibleBy)}),i},f.multipleOf=function(e,t,r,n){if("number"!=typeof e)return null;if(0==t.multipleOf)throw new u("multipleOf cannot be zero");var i=new a(e,t,r,n);return e/t.multipleOf%1&&i.addError({name:"multipleOf",argument:t.multipleOf,message:"is not a multiple of (divisible by) "+JSON.stringify(t.multipleOf)}),i},f.required=function(e,t,r,n){var i=new a(e,t,r,n);return void 0===e&&t.required===!0?i.addError({name:"required",message:"is required"}):e&&"object"==typeof e&&Array.isArray(t.required)&&t.required.forEach(function(t){void 0===e[t]&&i.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})}),i},f.pattern=function(e,t,r,n){if("string"!=typeof e)return null;var i=new a(e,t,r,n);return e.match(t.pattern)||i.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern)}),i},f.format=function(e,t,r,n){var i=new a(e,t,r,n);return i.disableFormat||s.isFormat(e,t.format,this)||i.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),i},f.minLength=function(e,t,r,n){if("string"!=typeof e)return null;var i=new a(e,t,r,n);return e.length>=t.minLength||i.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),i},f.maxLength=function(e,t,r,n){if("string"!=typeof e)return null;var i=new a(e,t,r,n);return e.length<=t.maxLength||i.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),i},f.minItems=function(e,t,r,n){if(!(e instanceof Array))return null;var i=new a(e,t,r,n);return e.length>=t.minItems||i.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),i},f.maxItems=function(e,t,r,n){if(!(e instanceof Array))return null;var i=new a(e,t,r,n);return e.length<=t.maxItems||i.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),i},f.uniqueItems=function(e,t,r,n){function i(e,t,r){for(var n=t+1;n<r.length;n++)if(s.deepCompareStrict(e,r[n]))return!1;return!0}var o=new a(e,t,r,n);return e instanceof Array?(e.every(i)||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o):o},f.uniqueItems=function(e,t,r,n){if(!(e instanceof Array))return null;var i=new a(e,t,r,n);return e.every(o)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i},f.dependencies=function(e,t,r,n){if(!e||"object"!=typeof e)return null;var i=new a(e,t,r,n);for(var o in t.dependencies)if(void 0!==e[o]){var s=t.dependencies[o],u=n.makeChild(s,o);if("string"==typeof s&&(s=[s]),s instanceof Array)s.forEach(function(t){void 0===e[t]&&i.addError({name:"dependencies",argument:u.propertyPath,message:"property "+t+" not found, required by "+u.propertyPath})});else{var c=this.validateSchema(e,s,r,u);i.instance!==c.instance&&(i.instance=c.instance),c&&c.errors.length&&(i.addError({name:"dependencies",argument:u.propertyPath,message:"does not meet dependency required by "+u.propertyPath}),i.importErrors(c))}}return i},f.enum=function(e,t,r,n){if(!(t.enum instanceof Array))throw new u("enum expects an array",t);if(void 0===e)return null;var i=new a(e,t,r,n);return t.enum.some(s.deepCompareStrict.bind(null,e))||i.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.join(",")}),i},f.not=f.disallow=function(e,t,r,n){var i=this;if(void 0===e)return null;var o=new a(e,t,r,n),s=t.not||t.disallow;return s?(s instanceof Array||(s=[s]),s.forEach(function(s){if(i.testType(e,t,r,n,s)){var a=s&&s.id&&"<"+s.id+">"||s;o.addError({name:"not",argument:a,message:"is of prohibited type "+a})}}),o):null},t.exports=c},{"./helpers":149}],149:[function(e,t,r){"use strict";var n=e("url"),i=r.ValidationError=function(e,t,r,n,i,o){n&&(this.property=n),e&&(this.message=e),r&&(r.id?this.schema=r.id:this.schema=r),t&&(this.instance=t),this.name=i,this.argument=o,this.stack=this.toString()};i.prototype.toString=function(){return this.property+" "+this.message};var o=r.ValidatorResult=function(e,t,r,n){this.instance=e,this.schema=t,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.disableFormat=r&&r.disableFormat===!0};o.prototype.addError=function(e){var t;if("string"==typeof e)t=new i(e,this.instance,this.schema,this.propertyPath);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new i(e.message,this.instance,this.schema,this.propertyPath,e.name,e.argument)}if(this.throwError)throw t;return this.errors.push(t),t},o.prototype.importErrors=function(e){if("string"==typeof e||e&&e.validatorType)this.addError(e);else if(e&&e.errors){var t=this.errors;e.errors.forEach(function(e){t.push(e)})}},o.prototype.toString=function(e){return this.errors.map(function(e,t){return t+": "+e.toString()+"\n"}).join("")},Object.defineProperty(o.prototype,"valid",{get:function(){return!this.errors.length}});var s=r.SchemaError=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)};s.prototype=Object.create(Error.prototype,{constructor:{value:s,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var a=r.SchemaContext=function(e,t,r,n,i){this.schema=e,this.options=t,this.propertyPath=r,this.base=n,this.schemas=i};a.prototype.resolve=function(e){return n.resolve(this.base,e)},a.prototype.makeChild=function(e,t){var r=void 0===t?this.propertyPath:this.propertyPath+c(t),i=n.resolve(this.base,e.id||""),o=new a(e,this.options,r,i,Object.create(this.schemas));return e.id&&!o.schemas[i]&&(o.schemas[i]=e),o};var u=r.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};u.regexp=u.regex,u.pattern=u.regex,u.ipv4=u["ip-address"],r.isFormat=function(e,t,r){if("string"==typeof e&&void 0!==u[t]){if(u[t]instanceof RegExp)return u[t].test(e);if("function"==typeof u[t])return u[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0};var c=r.makeSuffix=function(e){return e=e.toString(),e.match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};r.deepCompareStrict=function e(t,r){if(typeof t!=typeof r)return!1;if(t instanceof Array)return r instanceof Array&&(t.length===r.length&&t.every(function(n,i){return e(t[i],r[i])}));if("object"==typeof t){if(!t||!r)return t===r;var n=Object.keys(t),i=Object.keys(r);return n.length===i.length&&n.every(function(n){return e(t[n],r[n])})}return t===r},t.exports.deepMerge=function e(t,r){var n=Array.isArray(r),i=n&&[]||{};return n?(t=t||[],i=i.concat(t),r.forEach(function(r,n){"object"==typeof r?i[n]=e(t[n],r):t.indexOf(r)===-1&&i.push(r)})):(t&&"object"==typeof t&&Object.keys(t).forEach(function(e){i[e]=t[e]}),Object.keys(r).forEach(function(n){"object"==typeof r[n]&&r[n]&&t[n]?i[n]=e(t[n],r[n]):i[n]=r[n]})),i},r.objectGetPath=function(e,t){for(var r,n=t.split("/").slice(1);"string"==typeof(r=n.shift());){var i=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(i in e))return;e=e[i]}return e},r.encodePath=function(e){return e.map(function(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}).join("")}},{url:335}],150:[function(e,t,r){"use strict";var n=t.exports.Validator=e("./validator");t.exports.ValidatorResult=e("./helpers").ValidatorResult,t.exports.ValidationError=e("./helpers").ValidationError,t.exports.SchemaError=e("./helpers").SchemaError,t.exports.validate=function(e,t,r){var i=new n;return i.validate(e,t,r)}},{"./helpers":149,"./validator":151}],151:[function(e,t,r){"use strict";var n=e("url"),i=e("./attribute"),o=e("./helpers"),s=o.ValidatorResult,a=o.SchemaError,u=o.SchemaContext,c=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(f),this.attributes=Object.create(i.validators)};c.prototype.customFormats={},c.prototype.schemas=null,c.prototype.types=null,c.prototype.attributes=null,c.prototype.unresolvedRefs=null,c.prototype.addSchema=function(e,t){if(!e)return null;var r=t||e.id;return this.addSubSchema(r,e),r&&(this.schemas[r]=e),this.schemas[r]},c.prototype.addSubSchema=function(e,t){if(t&&"object"==typeof t){if(t.$ref){var r=n.resolve(e,t.$ref);return void(void 0===this.schemas[r]&&(this.schemas[r]=null,this.unresolvedRefs.push(r)))}var i=t.id&&n.resolve(e,t.id),s=i||e;if(i){if(this.schemas[i]){if(!o.deepCompareStrict(this.schemas[i],t))throw new Error("Schema <"+t+"> already exists with different definition");return this.schemas[i]}this.schemas[i]=t;var a=i.replace(/^([^#]*)#$/,"$1");this.schemas[a]=t}return this.addSubSchemaArray(s,t.items instanceof Array?t.items:[t.items]),this.addSubSchemaArray(s,t.extends instanceof Array?t.extends:[t.extends]),this.addSubSchema(s,t.additionalItems),this.addSubSchemaObject(s,t.properties),this.addSubSchema(s,t.additionalProperties),this.addSubSchemaObject(s,t.definitions),this.addSubSchemaObject(s,t.patternProperties),this.addSubSchemaObject(s,t.dependencies),this.addSubSchemaArray(s,t.disallow),this.addSubSchemaArray(s,t.allOf),this.addSubSchemaArray(s,t.anyOf),this.addSubSchemaArray(s,t.oneOf),this.addSubSchema(s,t.not),this.schemas[i]}},c.prototype.addSubSchemaArray=function(e,t){if(t instanceof Array)for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},c.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var r in t)this.addSubSchema(e,t[r])},c.prototype.setSchemas=function(e){this.schemas=e},c.prototype.getSchema=function(e){return this.schemas[e]},c.prototype.validate=function(e,t,r,i){r||(r={});var o=r.propertyName||"instance",s=n.resolve(r.base||"/",t.id||"");if(i||(i=new u(t,r,o,s,Object.create(this.schemas)),i.schemas[s]||(i.schemas[s]=t)),t){var c=this.validateSchema(e,t,r,i);if(!c)throw new Error("Result undefined");return c}throw new a("no schema specified",t)},c.prototype.validateSchema=function(e,t,r,n){function c(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}function f(e,t){var r;return(r=c(e))?l.resolve(e,r,t).subschema:e}var l=this,h=new s(e,t,r,n);if(!t)throw new Error("schema is undefined");t.extends&&(t.extends instanceof Array?t.extends.forEach(function(e){t=o.deepMerge(t,f(e,n))}):t=o.deepMerge(t,f(t.extends,n)));var d;if(d=c(t)){var p=this.resolve(t,d,n),y=new u(p.subschema,r,n.propertyPath,p.switchSchema,n.schemas);return this.validateSchema(e,p.subschema,r,y)}var v=r&&r.skipAttributes||[];for(var b in t)if(!i.ignoreProperties[b]&&v.indexOf(b)<0){var m=null,g=l.attributes[b];if(g)m=g.call(l,e,t,r,n);else if(r.allowUnknownAttributes===!1)throw new a("Unsupported attribute: "+b,t);m&&h.importErrors(m);
}if("function"==typeof r.rewrite){var _=r.rewrite.call(this,e,t,r,n);h.instance=_}return h},c.prototype.resolve=function(e,t,r){if(t=r.resolve(t),r.schemas[t])return{subschema:r.schemas[t],switchSchema:t};var i=n.parse(t),s=i&&i.hash,u=s&&s.length&&t.substr(0,t.length-s.length);if(!u||!r.schemas[u])throw new a("no such schema <"+t+">",e);var c=o.objectGetPath(r.schemas[u],s.substr(1));if(void 0===c)throw new a("no such schema "+s+" located in <"+u+">",e);return{subschema:c,switchSchema:t}},c.prototype.testType=function(e,t,r,n,i){if("function"==typeof this.types[i])return this.types[i].call(this,e);if(i&&"object"==typeof i){var o=this.validateSchema(e,i,r,n);return void 0===o||!(o&&o.errors.length)}return!0};var f=c.prototype.types={};f.string=function(e){return"string"==typeof e},f.number=function(e){return"number"==typeof e&&isFinite(e)},f.integer=function(e){return"number"==typeof e&&e%1===0},f.boolean=function(e){return"boolean"==typeof e},f.array=function(e){return e instanceof Array},f.null=function(e){return null===e},f.date=function(e){return e instanceof Date},f.any=function(e){return!0},f.object=function(e){return e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)},t.exports=c},{"./attribute":148,"./helpers":149,url:335}],152:[function(e,t,r){function n(e){this.opts=e||{},this.encodings=i}var i=e("./lib/encodings");t.exports=n,n.prototype._encoding=function(e){return"string"==typeof e&&(e=i[e]),e||(e=i.id),e},n.prototype._keyEncoding=function(e,t){return this._encoding(t&&t.keyEncoding||e&&e.keyEncoding||this.opts.keyEncoding)},n.prototype._valueEncoding=function(e,t){return this._encoding(t&&(t.valueEncoding||t.encoding)||e&&(e.valueEncoding||e.encoding)||this.opts.valueEncoding||this.opts.encoding)},n.prototype.encodeKey=function(e,t,r){return this._keyEncoding(t,r).encode(e)},n.prototype.encodeValue=function(e,t,r){return this._valueEncoding(t,r).encode(e)},n.prototype.decodeKey=function(e,t){return this._keyEncoding(t).decode(e)},n.prototype.decodeValue=function(e,t){return this._valueEncoding(t).decode(e)},n.prototype.encodeBatch=function(e,t){var r=this;return e.map(function(e){var n={type:e.type,key:r.encodeKey(e.key,t,e)};return r.keyAsBuffer(t,e)&&(n.keyEncoding="binary"),e.prefix&&(n.prefix=e.prefix),"value"in e&&(n.value=r.encodeValue(e.value,t,e),r.valueAsBuffer(t,e)&&(n.valueEncoding="binary")),n})};var o=["lt","gt","lte","gte","start","end"];n.prototype.encodeLtgt=function(e){var t=this,r={};return Object.keys(e).forEach(function(n){r[n]=o.indexOf(n)>-1?t.encodeKey(e[n],e):e[n]}),r},n.prototype.createStreamDecoder=function(e){var t=this;return e.keys&&e.values?function(r,n){return{key:t.decodeKey(r,e),value:t.decodeValue(n,e)}}:e.keys?function(r){return t.decodeKey(r,e)}:e.values?function(r,n){return t.decodeValue(n,e)}:function(){}},n.prototype.keyAsBuffer=function(e){return this._keyEncoding(e).buffer},n.prototype.valueAsBuffer=function(e){return this._valueEncoding(e).buffer}},{"./lib/encodings":153}],153:[function(e,t,r){(function(e){function t(e){return e}function n(t){return void 0===t||null===t||e.isBuffer(t)}r.utf8=r["utf-8"]={encode:function(e){return n(e)?e:String(e)},decode:t,buffer:!1,type:"utf8"},r.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},r.binary={encode:function(t){return n(t)?t:new e(t)},decode:t,buffer:!0,type:"binary"},r.none={encode:function(e){return e},decode:function(e){return e},buffer:!1,type:"id"},r.id=r.none;var i=["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"];i.forEach(function(t){r[t]={encode:function(r){return n(r)?r:new e(r,t)},decode:function(e){return e.toString(t)},buffer:!0,type:t}})}).call(this,e("buffer").Buffer)},{buffer:32}],154:[function(e,t,r){var n=e("errno").create,i=n("LevelUPError"),o=n("NotFoundError",i);o.prototype.notFound=!0,o.prototype.status=404,t.exports={LevelUPError:i,InitializationError:n("InitializationError",i),OpenError:n("OpenError",i),ReadError:n("ReadError",i),WriteError:n("WriteError",i),NotFoundError:o,EncodingError:n("EncodingError",i)}},{errno:134}],155:[function(e,t,r){function n(e,t){return this instanceof n?(o.call(this,s(t,{objectMode:!0})),this._iterator=e,this._destroyed=!1,this._decoder=null,t&&t.decoder&&(this._decoder=t.decoder),void this.on("end",this._cleanup.bind(this))):new n(e,t)}var i=e("inherits"),o=e("readable-stream").Readable,s=e("xtend"),a=e("level-errors").EncodingError;t.exports=n,i(n,o),n.prototype._read=function(){var e=this;this._destroyed||this._iterator.next(function(t,r,n){if(!e._destroyed){if(t)return e.emit("error",t);if(void 0===r&&void 0===n)e.push(null);else{if(!e._decoder)return e.push({key:r,value:n});try{var n=e._decoder(r,n)}catch(t){return e.emit("error",new a(t)),void e.push(null)}e.push(n)}}})},n.prototype.destroy=n.prototype._cleanup=function(){var e=this;this._destroyed||(this._destroyed=!0,this._iterator.end(function(t){return t?e.emit("error",t):void e.emit("close")}))}},{inherits:143,"level-errors":154,"readable-stream":242,xtend:342}],156:[function(e,t,r){function n(e,t){this._levelup=e,this._codec=t,this.batch=e.db.batch(),this.ops=[],this.length=0}var i=e("./util"),o=e("level-errors").WriteError,s=i.getOptions,a=i.dispatchError;n.prototype.put=function(e,t,r){r=s(r);var n=this._codec.encodeKey(e,r),i=this._codec.encodeValue(t,r);try{this.batch.put(n,i)}catch(e){throw new o(e)}return this.ops.push({type:"put",key:n,value:i}),this.length++,this},n.prototype.del=function(e,t){t=s(t);var r=this._codec.encodeKey(e,t);try{this.batch.del(r)}catch(e){throw new o(e)}return this.ops.push({type:"del",key:r}),this.length++,this},n.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new o(e)}return this.ops=[],this.length=0,this},n.prototype.write=function(e){var t=this._levelup,r=this.ops;try{this.batch.write(function(n){return n?a(t,new o(n),e):(t.emit("batch",r),void(e&&e()))})}catch(e){throw new o(e)}},t.exports=n},{"./util":158,"level-errors":154}],157:[function(e,t,r){(function(r){function n(e,t){return"function"==typeof e?e:t}function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);var o;if(c.call(this),this.setMaxListeners(1/0),"function"==typeof e?(t="object"==typeof t?t:{},t.db=e,e=null):"object"==typeof e&&"function"==typeof e.db&&(t=e,e=null),"function"==typeof t&&(n=t,t={}),(!t||"function"!=typeof t.db)&&"string"!=typeof e){if(o=new x("Must provide a location for the database"),n)return r.nextTick(function(){n(o)});throw o}t=j(t),this.options=h(O,t),this._codec=new S(this.options),this._status="new",d(this,"location",e,"e"),this.open(n)}function o(e,t,r){if(!e._isOpening()&&!e.isOpen())return C(e,new m("Database is not open"),r),!0}function s(e,t,r){C(e,new b(t),r)}function a(e,t,r){C(e,new m(t),r)}function u(e){return function(t,r){A()[e](t,r||function(){})}}var c=e("events").EventEmitter,f=e("util").inherits,l=e("util").deprecate,h=e("xtend"),d=e("prr"),p=e("deferred-leveldown"),y=e("level-iterator-stream"),v=e("level-errors"),b=v.WriteError,m=v.ReadError,g=v.NotFoundError,_=v.OpenError,w=v.EncodingError,x=v.InitializationError,k=e("./util"),E=e("./batch"),S=e("level-codec"),j=k.getOptions,O=k.defaultOptions,A=k.getLevelDOWN,C=k.dispatchError;k.isDefined;f(i,c),i.prototype.open=function(e){var t,n,i=this;return this.isOpen()?(e&&r.nextTick(function(){e(null,i)}),this):this._isOpening()?e&&this.once("open",function(){e(null,i)}):(this.emit("opening"),this._status="opening",this.db=new p(this.location),t=this.options.db||A(),n=t(this.location),void n.open(this.options,function(t){return t?C(i,new _(t),e):(i.db.setDb(n),i.db=n,i._status="open",e&&e(null,i),i.emit("open"),i.emit("ready"),void 0)}))},i.prototype.close=function(e){var t=this;if(this.isOpen())this._status="closing",this.db.close(function(){t._status="closed",t.emit("closed"),e&&e.apply(null,arguments)}),this.emit("closing"),this.db=new p(this.location);else{if("closed"==this._status&&e)return r.nextTick(e);"closing"==this._status&&e?this.once("closed",e):this._isOpening()&&this.once("open",function(){t.close(e)})}},i.prototype.isOpen=function(){return"open"==this._status},i.prototype._isOpening=function(){return"opening"==this._status},i.prototype.isClosed=function(){return/^clos/.test(this._status)},i.prototype.get=function(e,t,r){var i,s=this;if(r=n(t,r),!o(this,t,r)){if(null===e||void 0===e||"function"!=typeof r)return a(this,"get() requires key and callback arguments",r);t=k.getOptions(t),i=this._codec.encodeKey(e,t),t.asBuffer=this._codec.valueAsBuffer(t),this.db.get(i,t,function(n,i){if(n)return n=/notfound/i.test(n)||n.notFound?new g("Key not found in database ["+e+"]",n):new m(n),C(s,n,r);if(r){try{i=s._codec.decodeValue(i,t)}catch(e){return r(new w(e))}r(null,i)}})}},i.prototype.put=function(e,t,r,i){var a,u,c=this;return i=n(r,i),null===e||void 0===e?s(this,"put() requires a key argument",i):void(o(this,r,i)||(r=j(r),a=this._codec.encodeKey(e,r),u=this._codec.encodeValue(t,r),this.db.put(a,u,r,function(r){return r?C(c,new b(r),i):(c.emit("put",e,t),void(i&&i()))})))},i.prototype.del=function(e,t,r){var i,a=this;return r=n(t,r),null===e||void 0===e?s(this,"del() requires a key argument",r):void(o(this,t,r)||(t=j(t),i=this._codec.encodeKey(e,t),this.db.del(i,t,function(t){return t?C(a,new b(t),r):(a.emit("del",e),void(r&&r()))})))},i.prototype.batch=function(e,t,r){var i,a=this;return arguments.length?(r=n(t,r),Array.isArray(e)?void(o(this,t,r)||(t=j(t),i=a._codec.encodeBatch(e,t),i=i.map(function(e){return e.type||void 0===e.key||void 0===e.value||(e.type="put"),e}),this.db.batch(i,t,function(t){return t?C(a,new b(t),r):(a.emit("batch",e),void(r&&r()))}))):s(this,"batch() requires an array argument",r)):new E(this,this._codec)},i.prototype.approximateSize=l(function(e,t,r,i){var o,s,u=this;return i=n(r,i),r=j(r),null===e||void 0===e||null===t||void 0===t||"function"!=typeof i?a(this,"approximateSize() requires start, end and callback arguments",i):(o=this._codec.encodeKey(e,r),s=this._codec.encodeKey(t,r),void this.db.approximateSize(o,s,function(e,t){return e?C(u,new _(e),i):void(i&&i(null,t))}))},"db.approximateSize() is deprecated. Use db.db.approximateSize() instead"),i.prototype.readStream=i.prototype.createReadStream=function(e){return e=h({keys:!0,values:!0},this.options,e),e.keyEncoding=e.keyEncoding,e.valueEncoding=e.valueEncoding,e=this._codec.encodeLtgt(e),e.keyAsBuffer=this._codec.keyAsBuffer(e),e.valueAsBuffer=this._codec.valueAsBuffer(e),"number"!=typeof e.limit&&(e.limit=-1),new y(this.db.iterator(e),h(e,{decoder:this._codec.createStreamDecoder(e)}))},i.prototype.keyStream=i.prototype.createKeyStream=function(e){return this.createReadStream(h(e,{keys:!0,values:!1}))},i.prototype.valueStream=i.prototype.createValueStream=function(e){return this.createReadStream(h(e,{keys:!1,values:!0}))},i.prototype.toString=function(){return"LevelUP"},t.exports=i,t.exports.errors=e("level-errors"),t.exports.destroy=l(u("destroy"),"levelup.destroy() is deprecated. Use leveldown.destroy() instead"),t.exports.repair=l(u("repair"),"levelup.repair() is deprecated. Use leveldown.repair() instead")}).call(this,e("_process"))},{"./batch":156,"./util":158,_process:230,"deferred-leveldown":131,events:137,"level-codec":159,"level-errors":154,"level-iterator-stream":155,prr:231,util:340,xtend:342}],158:[function(e,t,r){function n(e){return"string"==typeof e&&(e={valueEncoding:e}),"object"!=typeof e&&(e={}),e}function i(){if(u)return u;var t,r=e("../package.json").devDependencies.leveldown;try{t=e("leveldown/package").version}catch(e){throw o(e)}if(!e("semver").satisfies(t,r))throw new c("Installed version of LevelDOWN ("+t+") does not match required version ("+r+")");try{return u=e("leveldown")}catch(e){throw o(e)}}function o(e){var t="Failed to require LevelDOWN (%s). Try `npm install leveldown` if it's missing";return new c(f(t,e.message))}function s(e,t,r){"function"==typeof r?r(t):e.emit("error",t)}function a(e){return"undefined"!=typeof e}var u,c=(e("xtend"),e("level-errors").LevelUPError),f=e("util").format,l={createIfMissing:!0,errorIfExists:!1,keyEncoding:"utf8",valueEncoding:"utf8",compression:!0};t.exports={defaultOptions:l,getOptions:n,getLevelDOWN:i,dispatchError:s,isDefined:a}},{"../package.json":161,"level-errors":154,leveldown:30,"leveldown/package":30,semver:30,util:340,xtend:342}],159:[function(e,t,r){arguments[4][152][0].apply(r,arguments)},{"./lib/encodings":160,dup:152}],160:[function(e,t,r){(function(e){function t(e){return e}function n(t){return void 0===t||null===t||e.isBuffer(t)}r.utf8=r["utf-8"]={encode:function(e){return n(e)?e:String(e)},decode:t,buffer:!1,type:"utf8"},r.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},r.binary={encode:function(t){return n(t)?t:new e(t)},decode:t,buffer:!0,type:"binary"},r.id={encode:function(e){return e},decode:function(e){return e},buffer:!1,type:"id"};var i=["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"];i.forEach(function(t){r[t]={encode:function(r){return n(r)?r:new e(r,t)},decode:function(e){return e.toString(t)},buffer:!0,type:t}})}).call(this,e("buffer").Buffer)},{buffer:32}],161:[function(e,t,r){t.exports={_args:[[{raw:"levelup@1.3.3",scope:null,escapedName:"levelup",name:"levelup",rawSpec:"1.3.3",spec:"1.3.3",type:"version"},"/home/sinnombre/workspace/rxdb/node_modules/pouchdb"]],_from:"levelup@1.3.3",_id:"levelup@1.3.3",_inCache:!0,_location:"/levelup",_nodeVersion:"4.4.7",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/levelup-1.3.3.tgz_1476029541340_0.44339725002646446"},_npmUser:{name:"juliangruber",email:"julian@juliangruber.com"},_npmVersion:"2.15.8",_phantomChildren:{},_requested:{raw:"levelup@1.3.3",scope:null,escapedName:"levelup",name:"levelup",rawSpec:"1.3.3",spec:"1.3.3",type:"version"},_requiredBy:["/pouchdb","/pouchdb-adapter-leveldb","/pouchdb-adapter-leveldb-core"],_resolved:"https://registry.npmjs.org/levelup/-/levelup-1.3.3.tgz",_shasum:"bf9db62bdb6188d08eaaa2efcf6cc311916f41fd",_shrinkwrap:null,_spec:"levelup@1.3.3",_where:"/home/sinnombre/workspace/rxdb/node_modules/pouchdb",browser:{leveldown:!1,"leveldown/package":!1,semver:!1},bugs:{url:"https://github.com/level/levelup/issues"},contributors:[{name:"Rod Vagg",email:"r@va.gg",url:"https://github.com/rvagg"},{name:"John Chesley",email:"john@chesl.es",url:"https://github.com/chesles/"},{name:"Jake Verbaten",email:"raynos2@gmail.com",url:"https://github.com/raynos"},{name:"Dominic Tarr",email:"dominic.tarr@gmail.com",url:"https://github.com/dominictarr"},{name:"Max Ogden",email:"max@maxogden.com",url:"https://github.com/maxogden"},{name:"Lars-Magnus Skog",email:"ralphtheninja@riseup.net",url:"https://github.com/ralphtheninja"},{name:"David Bjrklund",email:"david.bjorklund@gmail.com",url:"https://github.com/kesla"},{name:"Julian Gruber",email:"julian@juliangruber.com",url:"https://github.com/juliangruber"},{name:"Paolo Fragomeni",email:"paolo@async.ly",url:"https://github.com/0x00a"},{name:"Anton Whalley",email:"anton.whalley@nearform.com",url:"https://github.com/No9"},{name:"Matteo Collina",email:"matteo.collina@gmail.com",url:"https://github.com/mcollina"},{name:"Pedro Teixeira",email:"pedro.teixeira@gmail.com",url:"https://github.com/pgte"},{name:"James Halliday",email:"mail@substack.net",url:"https://github.com/substack"},{name:"Jarrett Cruger",email:"jcrugzz@gmail.com",url:"https://github.com/jcrugzz"}],dependencies:{"deferred-leveldown":"~1.2.1","level-codec":"~6.1.0","level-errors":"~1.0.3","level-iterator-stream":"~1.3.0",prr:"~1.0.1",semver:"~5.1.0",xtend:"~4.0.0"},description:"Fast & simple storage - a Node.js-style LevelDB wrapper",devDependencies:{async:"~1.5.0",bustermove:"~1.0.0",delayed:"~1.0.1",faucet:"~0.0.1",leveldown:"^1.1.0",memdown:"~1.1.0","msgpack-js":"~0.3.0",referee:"~1.2.0",rimraf:"~2.4.3","slow-stream":"0.0.4",tap:"~2.3.1",tape:"~4.2.1"},directories:{},dist:{shasum:"bf9db62bdb6188d08eaaa2efcf6cc311916f41fd",tarball:"https://registry.npmjs.org/levelup/-/levelup-1.3.3.tgz"},gitHead:"cced27dc9f0095823be5ed388ec601ec2bfe7366",homepage:"https://github.com/level/levelup",keywords:["leveldb","stream","database","db","store","storage","json"],license:"MIT",main:"lib/levelup.js",maintainers:[{name:"rvagg",email:"rod@vagg.org"},{name:"ralphtheninja",email:"ralphtheninja@riseup.net"},{name:"juliangruber",email:"julian@juliangruber.com"}],name:"levelup",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/level/levelup.git"},scripts:{test:"tape test/*-test.js | faucet"},version:"1.3.3"}},{}],162:[function(e,t,r){"use strict";function n(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,e!==n&&u(this,e)}function o(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function s(e,t,r){p(function(){var n;try{n=t(r)}catch(t){return y.reject(e,t)}n===e?y.reject(e,new TypeError("Cannot resolve promise with itself")):y.resolve(e,n)})}function a(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function u(e,t){function r(t){o||(o=!0,y.reject(e,t))}function n(t){o||(o=!0,y.resolve(e,t))}function i(){t(n,r)}var o=!1,s=c(i);"error"===s.status&&r(s.value)}function c(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}function f(e){return e instanceof this?e:y.resolve(new this(n),e)}function l(e){var t=new this(n);return y.reject(t,e)}function h(e){function t(e,t){function n(e){s[t]=e,++a!==i||o||(o=!0,y.resolve(c,s))}r.resolve(e).then(n,function(e){o||(o=!0,y.reject(c,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var s=new Array(i),a=0,u=-1,c=new this(n);++u<i;)t(e[u],u);return c}function d(e){function t(e){r.resolve(e).then(function(e){o||(o=!0,y.resolve(a,e))},function(e){o||(o=!0,y.reject(a,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var s=-1,a=new this(n);++s<i;)t(e[s]);return a}var p=e("immediate"),y={},v=["REJECTED"],b=["FULFILLED"],m=["PENDING"];t.exports=i,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===b||"function"!=typeof t&&this.state===v)return this;var r=new this.constructor(n);if(this.state!==m){var i=this.state===b?e:t;s(r,i,this.outcome)}else this.queue.push(new o(r,e,t));return r},o.prototype.callFulfilled=function(e){y.resolve(this.promise,e)},o.prototype.otherCallFulfilled=function(e){s(this.promise,this.onFulfilled,e)},o.prototype.callRejected=function(e){y.reject(this.promise,e)},o.prototype.otherCallRejected=function(e){s(this.promise,this.onRejected,e)},y.resolve=function(e,t){var r=c(a,t);if("error"===r.status)return y.reject(e,r.value);var n=r.value;if(n)u(e,n);else{e.state=b,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},y.reject=function(e,t){e.state=v,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},i.resolve=f,i.reject=l,i.all=h,i.race=d},{immediate:142}],163:[function(e,t,r){(function(r,n,i){"use strict";function o(e,t){f.call(this,e),this._reverse=!!t.reverse,this._endkey=t.end,this._startkey=t.start,this._gt=t.gt,this._gte=t.gte,this._lt=t.lt,this._lte=t.lte,this._exclusiveStart=t.exclusiveStart,this._limit=t.limit,this._count=0,this.onInitCompleteListeners=[]}function s(e){return this instanceof s?(c.call(this,e),void(this.container=new l(e))):new s(e)}function a(e,t){if(null===e||void 0===e)return new Error(t+" cannot be `null` or `undefined`");if(null===e||void 0===e)return new Error(t+" cannot be `null` or `undefined`");if("key"===t){if(e instanceof Boolean)return new Error(t+" cannot be `null` or `undefined`");if(""===e)return new Error(t+" cannot be empty")}if(0===e.toString().indexOf("[object ArrayBuffer]")&&(0===e.byteLength||void 0===e.byteLength))return new Error(t+" cannot be an empty Buffer");if(i.isBuffer(e)){if(0===e.length)return new Error(t+" cannot be an empty Buffer")}else if(""===String(e))return new Error(t+" cannot be an empty String")}var u=e("inherits"),c=e("abstract-leveldown").AbstractLevelDOWN,f=e("abstract-leveldown").AbstractIterator,l=e("./localstorage").LocalStorage,h=e("./localstorage-core"),d=e("./utils"),p=n.setImmediate||r.nextTick;u(o,f),o.prototype._init=function(e){p(function(){e()})},o.prototype._next=function(e){function t(){if(n._pos===n._keys.length||n._pos<0)return e();var t=n._keys[n._pos];return n._endkey&&(n._reverse?t<n._endkey:t>n._endkey)?e():n._limit&&n._limit>0&&n._count++>=n._limit?e():n._lt&&t>=n._lt||n._lte&&t>n._lte||n._gt&&t<=n._gt||n._gte&&t<n._gte?e():(n._pos+=n._reverse?-1:1,void n.db.container.getItem(t,function(r,i){return r?"NotFound"===r.message?p(function(){n._next(e)}):e(r):void e(null,t,i)}))}var n=this;n.initStarted?n.initCompleted?r.nextTick(t):n.onInitCompleteListeners.push(t):r.nextTick(function(){n.initStarted=!0,n._init(function(r){return r?e(r):void n.db.container.keys(function(r,i){if(r)return e(r);if(n._keys=i,n._startkey){var o=d.sortedIndexOf(n._keys,n._startkey),s=o>=n._keys.length||o<0?void 0:n._keys[o];n._pos=o,n._reverse?(n._exclusiveStart||s!==n._startkey)&&n._pos--:n._exclusiveStart&&s===n._startkey&&n._pos++}else n._pos=n._reverse?n._keys.length-1:0;t(),n.initCompleted=!0;for(var a=-1;++a<n.onInitCompleteListeners.length;)p(n.onInitCompleteListeners[a])})})})},u(s,c),s.prototype._open=function(e,t){this.container.init(t)},s.prototype._put=function(e,t,r,n){var o=a(e,"key");if(o)return p(function(){n(o)});if(o=a(t,"value"))return p(function(){n(o)});if("object"==typeof t&&!i.isBuffer(t)&&void 0===t.buffer){var s={};s.storetype="json",s.data=t,t=JSON.stringify(s)}this.container.setItem(e,t,n)},s.prototype._get=function(e,t,r){var n=a(e,"key");return n?p(function(){r(n)}):(i.isBuffer(e)||(e=String(e)),void this.container.getItem(e,function(e,n){if(e)return r(e);if(t.asBuffer===!1||i.isBuffer(n)||(n=new i(n)),t.asBuffer===!1&&n.indexOf('{"storetype":"json","data"')>-1){var o=JSON.parse(n);n=o.data}r(null,n)}))},s.prototype._del=function(e,t,r){var n=a(e,"key");return n?p(function(){r(n)}):(i.isBuffer(e)||(e=String(e)),void this.container.removeItem(e,r))},s.prototype._batch=function(e,t,r){var n=this;p(function(){function o(){++l===e.length&&r(f)}var s,u,c,f,l=0;if(Array.isArray(e)&&e.length)for(var h=0;h<e.length;h++){var d=e[h];d?(u=i.isBuffer(d.key)?d.key:String(d.key),s=a(u,"key"),s?(f=s,o()):"del"===d.type?n._del(d.key,t,o):"put"===d.type&&(c=i.isBuffer(d.value)?d.value:String(d.value),s=a(c,"value"),s?(f=s,o()):n._put(u,c,t,o))):o()}else r()})},s.prototype._iterator=function(e){return new o(this,e)},s.destroy=function(e,t){h.destroy(e,t)},t.exports=s}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./localstorage":165,"./localstorage-core":164,"./utils":167,_process:230,"abstract-leveldown":170,buffer:32,inherits:143}],164:[function(e,t,r){(function(r,n){"use strict";function i(e,t){var r,n;try{r=t()}catch(e){n=e}a(function(){e(n,r)})}function o(e){return e.replace(/!/g,"!!")+"!"}function s(e){this._prefix=o(e)}var a=n.setImmediate||r.nextTick,u=e("humble-localstorage");s.prototype.getKeys=function(e){var t=this;i(e,function(){for(var e=[],r=t._prefix.length,n=-1,i=u.length;++n<i;){var o=u.key(n);o.substring(0,r)===t._prefix&&e.push(o.substring(r))}return e.sort(),e})},s.prototype.put=function(e,t,r){var n=this;i(r,function(){u.setItem(n._prefix+e,t)})},s.prototype.get=function(e,t){var r=this;i(t,function(){return u.getItem(r._prefix+e)})},s.prototype.remove=function(e,t){var r=this;i(t,function(){u.removeItem(r._prefix+e)})},s.destroy=function(e,t){var r=o(e);i(t,function(){for(var e=[],t=-1,n=u.length;++t<n;){var i=u.key(t);i.substring(0,r.length)===r&&e.push(i)}e.forEach(function(e){u.removeItem(e)})})},t.exports=s}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:230,"humble-localstorage":140}],165:[function(e,t,r){(function(t){"use strict";function n(e){this._store=new l(e),this._queue=new h}var i="ArrayBuffer:",o=new RegExp("^"+i),s="Uint8Array:",a=new RegExp("^"+s),u="Buff:",c=new RegExp("^"+u),f=e("./utils"),l=e("./localstorage-core"),h=e("./taskqueue"),d=e("d64");n.prototype.sequentialize=function(e,t){this._queue.add(t,e)},n.prototype.init=function(e){var t=this;t.sequentialize(e,function(e){t._store.getKeys(function(r,n){return r?e(r):(t._keys=n,e())})})},n.prototype.keys=function(e){var t=this;t.sequentialize(e,function(e){e(null,t._keys.slice())})},n.prototype.setItem=function(e,r,n){var i=this;i.sequentialize(n,function(n){t.isBuffer(r)&&(r=u+d.encode(r));var o=f.sortedIndexOf(i._keys,e);i._keys[o]!==e&&i._keys.splice(o,0,e),i._store.put(e,r,n)})},n.prototype.getItem=function(e,t){var r=this;r.sequentialize(t,function(t){r._store.get(e,function(e,r){return e?t(e):"undefined"==typeof r||null===r?t(new Error("NotFound")):("undefined"!=typeof r&&(c.test(r)?r=d.decode(r.substring(u.length)):o.test(r)?(r=r.substring(i.length),r=new ArrayBuffer(atob(r).split("").map(function(e){return e.charCodeAt(0)}))):a.test(r)&&(r=r.substring(s.length),r=new Uint8Array(atob(r).split("").map(function(e){return e.charCodeAt(0)})))),void t(null,r))})})},n.prototype.removeItem=function(e,t){var r=this;r.sequentialize(t,function(t){var n=f.sortedIndexOf(r._keys,e);r._keys[n]===e?(r._keys.splice(n,1),r._store.remove(e,function(e){return e?t(e):void t()})):t()})},n.prototype.length=function(e){var t=this;t.sequentialize(e,function(e){e(null,t._keys.length)})},r.LocalStorage=n}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":145,"./localstorage-core":164,"./taskqueue":166,"./utils":167,d64:127}],166:[function(e,t,r){(function(r,n){"use strict";function i(){this.queue=new s,this.running=!1}var o=e("argsarray"),s=e("tiny-queue"),a=n.setImmediate||r.nextTick;i.prototype.add=function(e,t){this.queue.push({fun:e,callback:t}),this.processNext()},i.prototype.processNext=function(){var e=this;if(!e.running&&e.queue.length){e.running=!0;var t=e.queue.shift();a(function(){t.fun(o(function(r){t.callback.apply(null,r),e.running=!1,e.processNext()}))})}},t.exports=i}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:230,argsarray:19,"tiny-queue":171}],167:[function(e,t,r){"use strict";r.sortedIndexOf=function(e,t){for(var r,n=0,i=e.length;n<i;)r=n+i>>>1,e[r]<t?n=r+1:i=r;return n}},{}],168:[function(e,t,r){(function(e){function r(e){this._db=e,this._operations=[],this._written=!1}r.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},r.prototype.put=function(e,t){this._checkWritten();var r=this._db._checkKeyValue(e,"key",this._db._isBuffer);if(r)throw r;if(r=this._db._checkKeyValue(t,"value",this._db._isBuffer))throw r;return this._db._isBuffer(e)||(e=String(e)),this._db._isBuffer(t)||(t=String(t)),"function"==typeof this._put?this._put(e,t):this._operations.push({type:"put",key:e,value:t}),this},r.prototype.del=function(e){this._checkWritten();var t=this._db._checkKeyValue(e,"key",this._db._isBuffer);if(t)throw t;return this._db._isBuffer(e)||(e=String(e)),"function"==typeof this._del?this._del(e):this._operations.push({type:"del",key:e}),this},r.prototype.clear=function(){return this._checkWritten(),this._operations=[],"function"==typeof this._clear&&this._clear(),this},r.prototype.write=function(t,r){if(this._checkWritten(),"function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("write() requires a callback argument");return"object"!=typeof t&&(t={}),this._written=!0,"function"==typeof this._write?this._write(r):"function"==typeof this._db._batch?this._db._batch(this._operations,t,r):void e.nextTick(r)},t.exports=r}).call(this,e("_process"))},{_process:230}],169:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{_process:230,dup:15}],170:[function(e,t,r){(function(r,n){function i(e){if(!arguments.length||void 0===e)throw new Error("constructor requires at least a location argument");if("string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e}var o=e("xtend"),s=e("./abstract-iterator"),a=e("./abstract-chained-batch");i.prototype.open=function(e,t){if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");return"object"!=typeof e&&(e={}),"function"==typeof this._open?this._open(e,t):void n.nextTick(t)},i.prototype.close=function(e){if("function"!=typeof e)throw new Error("close() requires a callback argument");return"function"==typeof this._close?this._close(e):void n.nextTick(e)},i.prototype.get=function(e,t,r){var i;if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("get() requires a callback argument");return(i=this._checkKeyValue(e,"key",this._isBuffer))?r(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),"function"==typeof this._get?this._get(e,t,r):void n.nextTick(function(){r(new Error("NotFound"))}))},i.prototype.put=function(e,t,r,i){var o;if("function"==typeof r&&(i=r),"function"!=typeof i)throw new Error("put() requires a callback argument");return(o=this._checkKeyValue(e,"key",this._isBuffer))?i(o):(o=this._checkKeyValue(t,"value",this._isBuffer))?i(o):(this._isBuffer(e)||(e=String(e)),this._isBuffer(t)||n.browser||(t=String(t)),"object"!=typeof r&&(r={}),"function"==typeof this._put?this._put(e,t,r,i):void n.nextTick(i))},i.prototype.del=function(e,t,r){var i;if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("del() requires a callback argument");return(i=this._checkKeyValue(e,"key",this._isBuffer))?r(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),"function"==typeof this._del?this._del(e,t,r):void n.nextTick(r))},i.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return r(new Error("batch(array) requires an array argument"));"object"!=typeof t&&(t={});for(var i,o,s=0,a=e.length;s<a;s++)if(i=e[s],"object"==typeof i){if(o=this._checkKeyValue(i.type,"type",this._isBuffer))return r(o);if(o=this._checkKeyValue(i.key,"key",this._isBuffer))return r(o);if("put"==i.type&&(o=this._checkKeyValue(i.value,"value",this._isBuffer)))return r(o)}return"function"==typeof this._batch?this._batch(e,t,r):void n.nextTick(r)},i.prototype.approximateSize=function(e,t,r){if(null==e||null==t||"function"==typeof e||"function"==typeof t)throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof r)throw new Error("approximateSize() requires a callback argument");return this._isBuffer(e)||(e=String(e)),this._isBuffer(t)||(t=String(t)),"function"==typeof this._approximateSize?this._approximateSize(e,t,r):void n.nextTick(function(){r(null,0)})},i.prototype._setupIteratorOptions=function(e){var t=this;return e=o(e),["start","end","gt","gte","lt","lte"].forEach(function(r){e[r]&&t._isBuffer(e[r])&&0===e[r].length&&delete e[r]}),e.reverse=!!e.reverse,e.reverse&&e.lt&&(e.start=e.lt),e.reverse&&e.lte&&(e.start=e.lte),!e.reverse&&e.gt&&(e.start=e.gt),!e.reverse&&e.gte&&(e.start=e.gte),(e.reverse&&e.lt&&!e.lte||!e.reverse&&e.gt&&!e.gte)&&(e.exclusiveStart=!0),e},i.prototype.iterator=function(e){return"object"!=typeof e&&(e={}),e=this._setupIteratorOptions(e),"function"==typeof this._iterator?this._iterator(e):new s(this);
},i.prototype._chainedBatch=function(){return new a(this)},i.prototype._isBuffer=function(e){return r.isBuffer(e)},i.prototype._checkKeyValue=function(e,t){if(null===e||void 0===e)return new Error(t+" cannot be `null` or `undefined`");if(null===e||void 0===e)return new Error(t+" cannot be `null` or `undefined`");if(this._isBuffer(e)){if(0===e.length)return new Error(t+" cannot be an empty Buffer")}else if(""===String(e))return new Error(t+" cannot be an empty String")},t.exports.AbstractLevelDOWN=i,t.exports.AbstractIterator=s,t.exports.AbstractChainedBatch=a}).call(this,{isBuffer:e("../../../is-buffer/index.js")},e("_process"))},{"../../../is-buffer/index.js":145,"./abstract-chained-batch":168,"./abstract-iterator":169,_process:230,xtend:172}],171:[function(e,t,r){"use strict";function n(){this.length=0}n.prototype.push=function(e){var t={item:e};this.last?this.last=this.last.next=t:this.last=this.first=t,this.length++},n.prototype.shift=function(){var e=this.first;if(e)return this.first=e.next,--this.length||(this.last=void 0),e.item},n.prototype.slice=function(e,t){e="undefined"==typeof e?0:e,t="undefined"==typeof t?1/0:t;for(var r=[],n=0,i=this.first;i&&!(--t<0);i=i.next)++n>e&&r.push(i.item);return r},t.exports=n},{}],172:[function(e,t,r){function n(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}t.exports=n},{}],173:[function(e,t,r){!function(e){var n={},i={};n.length=0,n.getItem=function(e){return i[e]||null},n.setItem=function(e,t){"undefined"==typeof t?n.removeItem(e):(i.hasOwnProperty(e)||n.length++,i[e]=""+t)},n.removeItem=function(e){i.hasOwnProperty(e)&&(delete i[e],n.length--)},n.key=function(e){return Object.keys(i)[e]||null},n.clear=function(){i={},n.length=0},"object"==typeof r?t.exports=n:e.localStorageMemory=n}(this)},{}],174:[function(e,t,r){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*l;case"days":case"day":case"d":return r*f;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*u;case"seconds":case"second":case"secs":case"sec":case"s":return r*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function i(e){return e>=f?Math.round(e/f)+"d":e>=c?Math.round(e/c)+"h":e>=u?Math.round(e/u)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return s(e,f,"day")||s(e,c,"hour")||s(e,u,"minute")||s(e,a,"second")||e+" ms"}function s(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var a=1e3,u=60*a,c=60*u,f=24*c,l=365.25*f;t.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t.long?o(e):i(e)}},{}],175:[function(e,t,r){!function(e,r){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=r():"function"==typeof define&&define.amd?define([],r):e.objectPath=r()}(this,function(){"use strict";function e(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function t(t){if(!t)return!0;if(u(t)&&0===t.length)return!0;if("string"!=typeof t){for(var r in t)if(e(t,r))return!1;return!0}return!1}function r(e){return a.call(e)}function n(e){return"object"==typeof e&&"[object Object]"===r(e)}function i(e){return"boolean"==typeof e||"[object Boolean]"===r(e)}function o(e){var t=parseInt(e);return t.toString()===e?t:e}function s(r){function s(t,n){if(r.includeInheritedProps||"number"==typeof n&&Array.isArray(t)||e(t,n))return t[n]}function a(e,t,r,n){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return a(e,t.split(".").map(o),r,n);var i=t[0],u=s(e,i);return 1===t.length?(void 0!==u&&n||(e[i]=r),u):(void 0===u&&("number"==typeof t[1]?e[i]=[]:e[i]={}),a(e[i],t.slice(1),r,n))}r=r||{};var c=function(e){return Object.keys(c).reduce(function(t,r){return"create"===r?t:("function"==typeof c[r]&&(t[r]=c[r].bind(c,e)),t)},{})};return c.has=function(t,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!t;for(var i=0;i<n.length;i++){var s=o(n[i]);if(!("number"==typeof s&&u(t)&&s<t.length||(r.includeInheritedProps?s in Object(t):e(t,s))))return!1;t=t[s]}return!0},c.ensureExists=function(e,t,r){return a(e,t,r,!0)},c.set=function(e,t,r,n){return a(e,t,r,n)},c.insert=function(e,t,r,n){var i=c.get(e,t);n=~~n,u(i)||(i=[],c.set(e,t,i)),i.splice(n,0,r)},c.empty=function(r,o){if(!t(o)&&null!=r){var s,a;if(s=c.get(r,o)){if("string"==typeof s)return c.set(r,o,"");if(i(s))return c.set(r,o,!1);if("number"==typeof s)return c.set(r,o,0);if(u(s))s.length=0;else{if(!n(s))return c.set(r,o,null);for(a in s)e(s,a)&&delete s[a]}}}},c.push=function(e,t){var r=c.get(e,t);u(r)||(r=[],c.set(e,t,r)),r.push.apply(r,Array.prototype.slice.call(arguments,2))},c.coalesce=function(e,t,r){for(var n,i=0,o=t.length;i<o;i++)if(void 0!==(n=c.get(e,t[i])))return n;return r},c.get=function(e,t,r){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return r;if("string"==typeof t)return c.get(e,t.split("."),r);var n=o(t[0]),i=s(e,n);return void 0===i?r:1===t.length?i:c.get(e[n],t.slice(1),r)},c.del=function(e,r){if("number"==typeof r&&(r=[r]),null==e)return e;if(t(r))return e;if("string"==typeof r)return c.del(e,r.split("."));var n=o(r[0]),i=s(e,n);if(null==i)return i;if(1===r.length)u(e)?e.splice(n,1):delete e[n];else if(void 0!==e[n])return c.del(e[n],r.slice(1));return e},c}var a=Object.prototype.toString,u=Array.isArray||function(e){return"[object Array]"===a.call(e)},c=s();return c.create=s,c.withInheritedProps=s({includeInheritedProps:!0}),c})},{}],176:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var r=t[e];r.data=m.base64StringToBlobOrBuffer(r.data,r.content_type)})}function o(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function s(e){return e._attachments&&Object.keys(e._attachments)?y.all(Object.keys(e._attachments).map(function(t){var r=e._attachments[t];if(r.data&&"string"!=typeof r.data)return new y(function(e){m.blobOrBufferToBase64(r.data,e)}).then(function(e){r.data=e})})):y.resolve()}function a(e){if(!e.prefix)return!1;var t=p.parseUri(e.prefix).protocol;return"http"===t||"https"===t}function u(e,t){if(a(t)){var r=t.name.substr(t.prefix.length);e=t.prefix+encodeURIComponent(r)}var n=p.parseUri(e);(n.user||n.password)&&(n.auth={username:n.user,password:n.password});var i=n.path.replace(/(^\/|\/$)/g,"").split("/");return n.db=i.pop(),n.db.indexOf("%")===-1&&(n.db=encodeURIComponent(n.db)),n.path=i.join("/"),n}function c(e,t){return f(e,e.db+"/"+t)}function f(e,t){var r=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+r+t}function l(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}function h(e,t){function r(e,t,r){var n=e.ajax||{},i=p.jsExtend(p.clone(A),n,t);return S(i.method+" "+i.url),w._ajax(i,r)}function n(e,t){return new y(function(n,i){r(e,t,function(e,t){return e?i(e):void n(t)})})}function a(e,t){return p.adapterFun(e,b(function(e){h().then(function(){return t.apply(this,e)}).catch(function(t){var r=e.pop();r(t)})}))}function h(){if(e.skipSetup||e.skip_setup)return y.resolve();if(P)return P;var t={method:"GET",url:O};return P=n({},t).catch(function(e){return e&&e.status&&404===e.status?(p.explainError(404,"PouchDB is just detecting if the remote exists."),n({},{method:"PUT",url:O})):y.reject(e)}).catch(function(e){return!(!e||!e.status||412!==e.status)||y.reject(e)}),P.catch(function(){P=null}),P}function d(e){return e.split("/").map(encodeURIComponent).join("/")}var w=this,j=u(e.name,e),O=c(j,"");e=p.clone(e);var A=e.ajax||{};if(e.auth||j.auth){var C=e.auth||j.auth,R=C.username+":"+C.password,B=m.btoa(unescape(encodeURIComponent(R)));A.headers=A.headers||{},A.headers.Authorization="Basic "+B}w._ajax=v;var P;setTimeout(function(){t(null,w)}),w.type=function(){return"http"},w.id=a("id",function(e){r({},{method:"GET",url:f(j,"")},function(t,r){var n=r&&r.uuid?r.uuid+j.db:c(j,"");e(null,n)})}),w.request=a("request",function(e,t){e.url=c(j,e.url),r({},e,t)}),w.compact=a("compact",function(e,t){"function"==typeof e&&(t=e,e={}),e=p.clone(e),r(e,{url:c(j,"_compact"),method:"POST"},function(){function r(){w.info(function(n,i){i&&!i.compact_running?t(null,{ok:!0}):setTimeout(r,e.interval||200)})}r()})}),w.bulkGet=p.adapterFun("bulkGet",function(e,t){function n(t){var n={};e.revs&&(n.revs=!0),e.attachments&&(n.attachments=!0),r({},{url:c(j,"_bulk_get"+l(n)),method:"POST",body:{docs:e.docs}},t)}function i(){function r(e){return function(r,n){a[e]=n.results,++s===i&&t(null,{results:p.flatten(a)})}}for(var n=k,i=Math.ceil(e.docs.length/n),s=0,a=new Array(i),u=0;u<i;u++){var c=p.pick(e,["revs","attachments"]);c.ajax=A,c.docs=e.docs.slice(u*n,Math.min(e.docs.length,(u+1)*n)),p.bulkGetShim(o,c,r(u))}}var o=this,s=f(j,""),a=E[s];"boolean"!=typeof a?n(function(e,r){if(e){var n=Math.floor(e.status/100);4===n||5===n?(E[s]=!1,p.explainError(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),i()):t(e)}else E[s]=!0,t(null,r)}):a?n(t):i()}),w._info=function(e){h().then(function(){r({},{method:"GET",url:c(j,"")},function(t,r){return t?e(t):(r.host=c(j,""),void e(null,r))})}).catch(e)},w.get=a("get",function(e,t,r){function i(e){function r(){if(!s.length)return null;var r=s.pop(),a=i[r],u=o(e._id)+"/"+d(r)+"?rev="+e._rev;return n(t,{method:"GET",url:c(j,u),binary:!0}).then(function(e){return t.binary?e:new y(function(t){m.blobOrBufferToBase64(e,t)})}).then(function(e){delete a.stub,delete a.length,a.data=e})}var i=e._attachments,s=i&&Object.keys(i);if(i&&s.length)return new g(r,5,{promise:y}).start()}function s(e){return Array.isArray(e)?y.all(e.map(function(e){if(e.ok)return i(e.ok)})):i(e)}"function"==typeof t&&(r=t,t={}),t=p.clone(t);var a={};t.revs&&(a.revs=!0),t.revs_info&&(a.revs_info=!0),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),a.open_revs=t.open_revs),t.rev&&(a.rev=t.rev),t.conflicts&&(a.conflicts=t.conflicts),e=o(e);var u={method:"GET",url:c(j,e+l(a))};n(t,u).then(function(e){return y.resolve().then(function(){if(t.attachments)return s(e)}).then(function(){r(null,e)})}).catch(r)}),w.remove=a("remove",function(e,t,n,i){var s;"string"==typeof t?(s={_id:e,_rev:t},"function"==typeof n&&(i=n,n={})):(s=e,"function"==typeof t?(i=t,n={}):(i=n,n=t));var a=s._rev||n.rev;r(n,{method:"DELETE",url:c(j,o(s._id))+"?rev="+a},i)}),w.getAttachment=a("getAttachment",function(e,t,n,i){"function"==typeof n&&(i=n,n={});var s=n.rev?"?rev="+n.rev:"",a=c(j,o(e))+"/"+d(t)+s;r(n,{method:"GET",url:a,binary:!0},i)}),w.removeAttachment=a("removeAttachment",function(e,t,n,i){var s=c(j,o(e)+"/"+d(t))+"?rev="+n;r({},{method:"DELETE",url:s},i)}),w.putAttachment=a("putAttachment",function(e,t,n,i,s,a){"function"==typeof s&&(a=s,s=i,i=n,n=null);var u=o(e)+"/"+d(t),f=c(j,u);if(n&&(f+="?rev="+n),"string"==typeof i){var l;try{l=m.atob(i)}catch(e){return a(_.createError(_.BAD_ARG,"Attachment is not a valid base64 string"))}i=l?m.binaryStringToBlobOrBuffer(l,s):""}var h={headers:{"Content-Type":s},method:"PUT",url:f,processData:!1,body:i,timeout:A.timeout||6e4};r({},h,a)}),w._bulkDocs=function(e,t,n){e.new_edits=t.new_edits,h().then(function(){return y.all(e.docs.map(s))}).then(function(){r(t,{method:"POST",url:c(j,"_bulk_docs"),timeout:t.timeout,body:e},function(e,t){return e?n(e):(t.forEach(function(e){e.ok=!0}),void n(null,t))})}).catch(n)},w._put=function(e,t,n){h().then(function(){return s(e)}).then(function(){r(t,{method:"PUT",url:c(j,o(e._id)),body:e},function(e,t){return e?n(e):void n(null,t)})}).catch(n)},w.allDocs=a("allDocs",function(e,t){"function"==typeof e&&(t=e,e={}),e=p.clone(e);var r,o={},s="GET";e.conflicts&&(o.conflicts=!0),e.descending&&(o.descending=!0),e.include_docs&&(o.include_docs=!0),e.attachments&&(o.attachments=!0),e.key&&(o.key=JSON.stringify(e.key)),e.start_key&&(e.startkey=e.start_key),e.startkey&&(o.startkey=JSON.stringify(e.startkey)),e.end_key&&(e.endkey=e.end_key),e.endkey&&(o.endkey=JSON.stringify(e.endkey)),"undefined"!=typeof e.inclusive_end&&(o.inclusive_end=!!e.inclusive_end),"undefined"!=typeof e.limit&&(o.limit=e.limit),"undefined"!=typeof e.skip&&(o.skip=e.skip);var a=l(o);"undefined"!=typeof e.keys&&(s="POST",r={keys:e.keys}),n(e,{method:s,url:c(j,"_all_docs"+a),body:r}).then(function(r){e.include_docs&&e.attachments&&e.binary&&r.rows.forEach(i),t(null,r)}).catch(t)}),w._changes=function(e){var t="batch_size"in e?e.batch_size:x;e=p.clone(e),e.timeout="timeout"in e?e.timeout:"timeout"in A?A.timeout:3e4;var n,o=e.timeout?{timeout:e.timeout-5e3}:{},s="undefined"!=typeof e.limit&&e.limit;n="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var a=s;if(e.style&&(o.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(o.include_docs=!0),e.attachments&&(o.attachments=!0),e.continuous&&(o.feed="longpoll"),e.conflicts&&(o.conflicts=!0),e.descending&&(o.descending=!0),"heartbeat"in e?e.heartbeat&&(o.heartbeat=e.heartbeat):o.heartbeat=1e4,e.filter&&"string"==typeof e.filter&&(o.filter=e.filter),e.view&&"string"==typeof e.view&&(o.filter="_view",o.view=e.view),e.query_params&&"object"==typeof e.query_params)for(var u in e.query_params)e.query_params.hasOwnProperty(u)&&(o[u]=e.query_params[u]);var f,d="GET";e.doc_ids&&(o.filter="_doc_ids",d="POST",f={doc_ids:e.doc_ids});var y,v,b=function(n,i){if(!e.aborted){o.since=n,"object"==typeof o.since&&(o.since=JSON.stringify(o.since)),e.descending?s&&(o.limit=a):o.limit=!s||a>t?t:a;var u={method:d,url:c(j,"_changes"+l(o)),timeout:e.timeout,body:f};v=n,e.aborted||h().then(function(){y=r(e,u,i)}).catch(i)}},m={results:[]},g=function(r,o){if(!e.aborted){var u=0;if(o&&o.results){u=o.results.length,m.last_seq=o.last_seq;var c={};c.query=e.query_params,o.results=o.results.filter(function(t){a--;var r=p.filterChange(e)(t);return r&&(e.include_docs&&e.attachments&&e.binary&&i(t),n&&m.results.push(t),e.onChange(t)),r})}else if(r)return e.aborted=!0,void e.complete(r);o&&o.last_seq&&(v=o.last_seq);var f=s&&a<=0||o&&u<t||e.descending;(!e.continuous||s&&a<=0)&&f?e.complete(null,m):setTimeout(function(){b(v,g)},0)}};return b(e.since||0,g),{cancel:function(){e.aborted=!0,y&&y.abort()}}},w.revsDiff=a("revsDiff",function(e,t,n){"function"==typeof t&&(n=t,t={}),r(t,{method:"POST",url:c(j,"_revs_diff"),body:e},n)}),w._close=function(e){e()},w._destroy=function(e,t){r(e,{url:c(j,""),method:"DELETE"},function(e,r){return e&&e.status&&404!==e.status?t(e):void t(null,r)})}}function d(e){e.adapter("http",h,!1),e.adapter("https",h,!1)}var p=e("pouchdb-utils"),y=n(e("pouchdb-promise")),v=n(e("pouchdb-ajax")),b=n(e("argsarray")),m=e("pouchdb-binary-utils"),g=n(e("es6-promise-pool")),_=e("pouchdb-errors"),w=n(e("debug")),x=25,k=50,E={},S=w("pouchdb:http");h.valid=function(){return!0},t.exports=d},{argsarray:19,debug:128,"es6-promise-pool":136,"pouchdb-ajax":187,"pouchdb-binary-utils":188,"pouchdb-errors":195,"pouchdb-promise":223,"pouchdb-utils":228}],177:[function(e,t,r){(function(r,n){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function o(e,t){var r=new Uint8Array(e);return O.blob([r],{type:t})}function s(e,t){O.readAsBinaryString(e,t)}function a(e){return O.blob([""],{type:e})}function u(e,t){var r=t.prefix()[0],n=e._cache,i=n.get(r);return i||(i=new g.Map,n.set(r,i)),i}function c(){this._batch=[],this._cache=new g.Map}function f(e){return"winningRev"in e?e.winningRev:E.winningRev(e)}function l(e,t){return"deleted"in e?e.deleted:k.isDeleted(e,t)}function h(e,t,r){var n=e.content_type;return new w(function(i,s){t.binaryStore.get(e.digest,function(t,a){var u;if(t){if("NotFoundError"!==t.name)return s(t);u=r.binary?O.binaryStringToBlobOrBuffer("",n):""}else u=r.binary?o(a,n):a.toString("base64");delete e.stub,delete e.length,e.data=u,i()})})}function d(e,t,r){var n=[];return e.forEach(function(e){if(e.doc&&e.doc._attachments){var t=Object.keys(e.doc._attachments);t.forEach(function(t){var r=e.doc._attachments[t];"data"in r||n.push(r)})}}),w.all(n.map(function(e){return h(e,t,r)}))}function p(e,t){function i(){Q.docStore=Y.sublevel(C,{valueEncoding:F}),Q.bySeqStore=Y.sublevel(R,{valueEncoding:"json"}),Q.attachmentStore=Y.sublevel(B,{valueEncoding:"json"}),Q.binaryStore=Y.sublevel(P,{valueEncoding:"binary"}),Q.localStore=Y.sublevel(T,{valueEncoding:"json"}),Q.metaStore=Y.sublevel(I,{valueEncoding:"json"}),"object"==typeof e.migrate?e.migrate.doMigrationTwo(Y,Q,u):u()}function u(){Q.metaStore.get(M,function(e,n){"undefined"==typeof Y._updateSeq&&(Y._updateSeq=n||0),Q.metaStore.get(L,function(e,n){Y._docCount=e?0:n,Q.metaStore.get(q,function(e,n){H=e?x.uuid():n,Q.metaStore.put(q,H,function(){r.nextTick(function(){t(null,Z)})})})})})}function h(e){return Y.isClosed()?e(new Error("database is closed")):e(null,Y._docCount)}function p(e,t){try{e.apply(null,t)}catch(e){t[t.length-1](e)}}function S(){var e=Y._queue.peekFront();"read"===e.type?U(e):z(e)}function U(e){for(var t=[e],n=1,i=Y._queue.get(n);"undefined"!=typeof i&&"read"===i.type;)t.push(i),n++,i=Y._queue.get(n);var o=0;t.forEach(function(e){var n=e.args,i=n[n.length-1];n[n.length-1]=m(function(e){i.apply(null,e),++o===t.length&&r.nextTick(function(){t.forEach(function(){Y._queue.shift()}),Y._queue.length&&S()})}),p(e.fun,n)})}function z(e){var t=e.args,n=t[t.length-1];t[t.length-1]=m(function(e){n.apply(null,e),r.nextTick(function(){Y._queue.shift(),Y._queue.length&&S()})}),p(e.fun,t)}function W(e){return m(function(t){Y._queue.push({fun:e,args:t,type:"write"}),1===Y._queue.length&&r.nextTick(S)})}function V(e){return m(function(t){Y._queue.push({fun:e,args:t,type:"read"}),1===Y._queue.length&&r.nextTick(S)})}function K(e){return("0000000000000000"+e).slice(-16)}function J(e){return parseInt(e,10)}function G(e,t){re.destroy(e,t)}e=x.clone(e);var H,Y,Z=this,Q={},X=e.revs_limit,ee=e.name;"undefined"==typeof e.createIfMissing&&(e.createIfMissing=!0);var te,re=e.db,ne=x.functionName(re);D.has(ne)?te=D.get(ne):(te=new g.Map,D.set(ne,te)),te.has(ee)?(Y=te.get(ee),i()):te.set(ee,v(y(ee,e,function(r){return r?(te.delete(ee),t(r)):(Y=te.get(ee),Y._docCount=-1,Y._queue=new _,void("object"==typeof e.migrate?e.migrate.doMigrationOne(ee,Y,i):i()))}))),Z.type=function(){return"leveldb"},Z._id=function(e){e(null,H)},Z._info=function(e){var t={doc_count:Y._docCount,update_seq:Y._updateSeq,backend_adapter:x.functionName(re)};return r.nextTick(function(){e(null,t)})},Z._get=V(function(e,t,r){t=x.clone(t),Q.docStore.get(e,function(e,n){if(e||!n)return r(A.createError(A.MISSING_DOC,"missing"));var i=f(n),o=l(n,i);if(o&&!t.rev)return r(A.createError(A.MISSING_DOC,"deleted"));i=t.rev?t.rev:i;var s=n.rev_map[i];Q.bySeqStore.get(K(s),function(e,t){if(!t)return r(A.createError(A.MISSING_DOC));if("_id"in t&&t._id!==n.id)return r(new Error("wrong doc returned"));if(t._id=n.id,"_rev"in t){if(t._rev!==i)return r(new Error("wrong doc returned"))}else t._rev=i;return r(null,{doc:t,metadata:n})})})}),Z._getAttachment=function(e,t,r,n,i){var s=r.digest,u=r.content_type;Q.binaryStore.get(s,function(e,t){return e?"NotFoundError"!==e.name?i(e):i(null,n.binary?a(u):""):void(n.binary?i(null,o(t,u)):i(null,t.toString("base64")))})},Z._bulkDocs=W(function(e,t,i){function o(e,t){S.get(Q.attachmentStore,e,function(r){if(r){var n=A.createError(A.MISSING_STUB,"unknown stub attachment with digest "+e);t(n)}else t()})}function a(e){var t=[];if(B.forEach(function(e){e&&e._attachments&&Object.keys(e._attachments).forEach(function(r){var n=e._attachments[r];n.stub&&t.push(n.digest)})}),!t.length)return e();var r,n=0;t.forEach(function(i){o(i,function(i){i&&!r&&(r=i),++n===t.length&&e(r)})})}function u(e){function t(){if(++n===B.length)return e(r)}var r,n=0;B.forEach(function(e){return e._id&&k.isLocalId(e._id)?t():void S.get(Q.docStore,e._id,function(n,i){n?"NotFoundError"!==n.name&&(r=n):_.set(e._id,i),t()})})}function f(e,t){var r=w.resolve();e.forEach(function(e,t){r=r.then(function(){return new w(function(r,n){Z._doCompactionNoLock(t,e,{ctx:S},function(e){return e?n(e):void r()})})})}),r.then(function(){t()},t)}function l(e){var t=new g.Map;_.forEach(function(e,r){t.set(r,E.compactTree(e))}),f(t,e)}function h(){f(x,function(e){return e&&v(e),Z.auto_compaction?l(v):void v()})}function d(e,t,r,n,o,a,u,c){function f(e){b++,v||(e?(v=e,c(v)):b===g.length&&d())}function l(e,t,r,n){return function(i){y(e,N+i,t,r,n)}}function h(e,t,r){return function(n){j.binaryMd5(n,l(e,t,n,r))}}function d(){var r=e.metadata.rev_map[e.metadata.rev];if(r)return c();r=++R,e.metadata.rev_map[e.metadata.rev]=e.metadata.seq=r;var n=K(r),i=[{key:n,value:e.data,prefix:Q.bySeqStore,type:"put"},{key:e.metadata.id,value:e.metadata,prefix:Q.docStore,type:"put"}];S.batch(i),m[u]={ok:!0,id:e.metadata.id,rev:t},_.set(e.metadata.id,e.metadata),c()}C+=a;var v=null,b=0;e.metadata.winningRev=t,e.metadata.deleted=r,e.data._id=e.metadata.id,e.data._rev=e.metadata.rev,n&&(e.data._deleted=!0),e.stemmedRevs.length&&x.set(e.metadata.id,e.stemmedRevs);for(var g=e.data._attachments?Object.keys(e.data._attachments):[],w=0;w<g.length;w++){var k=g[w],E=e.data._attachments[k];if(E.stub){var B=e.data._id,P=e.data._rev;p(B,P,E.digest,f)}else{var T;if("string"==typeof E.data){try{T=O.atob(E.data)}catch(e){return void i(A.createError(A.BAD_ARG,"Attachment is not a valid base64 string"))}h(e,k,f)(T)}else s(E.data,h(e,k,f))}}g.length||d()}function p(e,t,r,n){function i(){return new w(function(e,t){S.get(Q.attachmentStore,r,function(r,n){return r&&"NotFoundError"!==r.name?t(r):void e(n)})})}function o(n){var i=[e,t].join("@"),o={};return n?n.refs&&(o.refs=n.refs,o.refs[i]=!0):(o.refs={},o.refs[i]=!0),new w(function(e){S.batch([{type:"put",prefix:Q.attachmentStore,key:r,value:o}]),e(!n)})}var s=I[r]||w.resolve();I[r]=s.then(function(){return i().then(o).then(function(e){n(null,e)},n)})}function y(e,t,r,i,o){var s=e.data._attachments[r];delete s.data,s.digest=t,s.length=i.length;var a=e.metadata.id,u=e.metadata.rev;s.revpos=parseInt(u,10),p(a,u,t,function(e,r){return e?o(e):0===i.length?o(e):r?(S.batch([{type:"put",prefix:Q.binaryStore,key:t,value:new n(i,"binary")}]),void o()):o(e)})}function v(e){return e?r.nextTick(function(){i(e)}):(S.batch([{prefix:Q.metaStore,type:"put",key:M,value:R},{prefix:Q.metaStore,type:"put",key:L,value:Y._docCount+C}]),void S.execute(Y,function(e){return e?i(e):(Y._docCount+=C,Y._updateSeq=R,$.notify(ee),void r.nextTick(function(){i(null,m)}))}))}var b=t.new_edits,m=new Array(e.docs.length),_=new g.Map,x=new g.Map,S=new c,C=0,R=Y._updateSeq,B=e.docs,P=B.map(function(e){if(e._id&&k.isLocalId(e._id))return e;var t=k.parseDoc(e,b);return t.metadata&&!t.metadata.rev_map&&(t.metadata.rev_map={}),t}),T=P.filter(function(e){return e.error});if(T.length)return i(T[0]);var I={};return P.length?void a(function(e){return e?i(e):void u(function(e){return e?i(e):void k.processDocs(X,P,Z,_,S,m,d,t,h)})}):i(null,[])}),Z._allDocs=V(function(e,t){e=x.clone(e),h(function(r,n){if(r)return t(r);var i={},o=e.skip||0;if(e.startkey&&(i.gte=e.startkey),e.endkey&&(i.lte=e.endkey),e.key&&(i.gte=i.lte=e.key),e.descending){i.reverse=!0;var s=i.lte;i.lte=i.gte,i.gte=s}var a;if("number"==typeof e.limit&&(a=e.limit),0===a||"start"in i&&"end"in i&&i.start>i.end)return t(null,{total_rows:n,offset:e.skip,rows:[]});var u=[],c=Q.docStore.readStream(i),h=b.obj(function(t,r,n){function i(t){var r={id:s.id,key:s.id,value:{rev:h}};if(e.include_docs){r.doc=t,r.doc._rev=r.value.rev,e.conflicts&&(r.doc._conflicts=E.collectConflicts(s));for(var i in r.doc._attachments)r.doc._attachments.hasOwnProperty(i)&&(r.doc._attachments[i].stub=!0)}if(e.inclusive_end===!1&&s.id===e.endkey)return n();if(d){if("ok"!==e.deleted)return n();r.value.deleted=!0,r.doc=null}u.push(r),n()}var s=t.value,h=f(s),d=l(s,h);if(d){if("ok"!==e.deleted)return void n()}else{if(o-- >0)return void n();if("number"==typeof a&&a--<=0)return c.unpipe(),c.destroy(),void n()}if(e.include_docs){var p=s.rev_map[h];Q.bySeqStore.get(K(p),function(e,t){i(t)})}else i()},function(r){w.resolve().then(function(){if(e.include_docs&&e.attachments)return d(u,Q,e)}).then(function(){t(null,{total_rows:n,offset:e.skip,rows:u})},t),r()}).on("unpipe",function(){h.end()});c.on("error",t),c.pipe(h)})}),Z._changes=function(e){function t(){e.done=!0,c&&e.limit&&e.limit<o.length&&(o.length=e.limit),y.unpipe(v),y.destroy(),e.continuous||e.cancelled||(e.include_docs&&e.attachments?d(o,Q,e).then(function(){e.complete(null,{results:o,last_seq:s})}):e.complete(null,{results:o,last_seq:s}))}if(e=x.clone(e),e.continuous){var r=ee+":"+x.uuid();return $.addListener(ee,r,Z,e),$.notify(ee),{cancel:function(){$.removeListener(ee,r)}}}var n,i=e.descending,o=[],s=e.since||0,a=0,u={reverse:i};"limit"in e&&e.limit>0&&(n=e.limit),u.reverse||(u.start=K(e.since||0));var c,l=e.doc_ids&&new g.Set(e.doc_ids),h=x.filterChange(e),p=new g.Map;c="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var y=Q.bySeqStore.readStream(u),v=b.obj(function(r,u,y){function v(t){function r(r){var n=e.processChange(r,t,e);n.seq=t.seq;var i=h(n);return"object"==typeof i?e.complete(i):(i&&(a++,e.attachments&&e.include_docs?d([n],Q,e).then(function(){e.onChange(n)}):e.onChange(n),c&&o.push(n)),void y())}var n=f(t);if(t.seq!==b)return y();if(s=b,n===m._rev)return r(m);var i=t.rev_map[n];Q.bySeqStore.get(K(i),function(e,t){r(t)})}if(n&&a>=n)return t(),y();if(e.cancelled||e.done)return y();var b=J(r.key),m=r.value;if(b===e.since&&!i)return y();if(l&&!l.has(m._id))return y();var g;return(g=p.get(m._id))?v(g):void Q.docStore.get(m._id,function(t,r){return e.cancelled||e.done||Y.isClosed()||k.isLocalId(r.id)?y():(p.set(m._id,r),void v(r))})},function(t){return e.cancelled?t():(c&&e.limit&&e.limit<o.length&&(o.length=e.limit),void t())}).on("unpipe",function(){v.end(),t()});return y.pipe(v),{cancel:function(){e.cancelled=!0,t()}}},Z._close=function(e){return Y.isClosed()?e(A.createError(A.NOT_OPEN)):void Y.close(function(t){t?e(t):(te.delete(ee),e())})},Z._getRevisionTree=function(e,t){Q.docStore.get(e,function(e,r){e?t(A.createError(A.MISSING_DOC)):t(null,r.rev_tree)})},Z._doCompaction=W(function(e,t,r,n){Z._doCompactionNoLock(e,t,r,n)}),Z._doCompactionNoLock=function(e,t,r,n){if("function"==typeof r&&(n=r,r={}),!t.length)return n();var i=r.ctx||new c;i.get(Q.docStore,e,function(o,s){function a(e){if(e&&(h=e),++p===t.length){if(h)return n(h);c()}}function u(e){return e?n(e):(i.batch(l),r.ctx?n():void i.execute(Y,n))}function c(){function r(e){e&&(o=e),++s===n.length&&u(o)}var n=Object.keys(d);if(!n.length)return u();var o,s=0,a=new g.Map;t.forEach(function(t){a.set(e+"@"+t,!0)}),n.forEach(function(e){i.get(Q.attachmentStore,e,function(t,n){if(t)return"NotFoundError"===t.name?r():r(t);var i=Object.keys(n.refs||{}).filter(function(e){return!a.has(e)}),o={};i.forEach(function(e){o[e]=!0}),i.length?l.push({key:e,type:"put",value:{refs:o},prefix:Q.attachmentStore}):l=l.concat([{key:e,type:"del",prefix:Q.attachmentStore},{key:e,type:"del",prefix:Q.binaryStore}]),r()})})}if(o)return n(o);var f=t.map(function(e){var t=s.rev_map[e];return delete s.rev_map[e],t});E.traverseRevTree(s.rev_tree,function(e,r,n,i,o){var s=r+"-"+n;t.indexOf(s)!==-1&&(o.status="missing")});var l=[];l.push({key:s.id,value:s,type:"put",prefix:Q.docStore});var h,d={},p=0;f.forEach(function(e){l.push({key:K(e),type:"del",prefix:Q.bySeqStore}),i.get(Q.bySeqStore,K(e),function(e,t){if(e)return"NotFoundError"===e.name?a():a(e);var r=Object.keys(t._attachments||{});r.forEach(function(e){var r=t._attachments[e].digest;d[r]=!0}),a()})})})},Z._getLocal=function(e,t){Q.localStore.get(e,function(e,r){e?t(A.createError(A.MISSING_DOC)):t(null,r)})},Z._putLocal=function(e,t,r){"function"==typeof t&&(r=t,t={}),t.ctx?Z._putLocalNoLock(e,t,r):Z._putLocalWithLock(e,t,r)},Z._putLocalWithLock=W(function(e,t,r){Z._putLocalNoLock(e,t,r)}),Z._putLocalNoLock=function(e,t,r){delete e._revisions;var n=e._rev,i=e._id,o=t.ctx||new c;o.get(Q.localStore,i,function(s,a){if(s&&n)return r(A.createError(A.REV_CONFLICT));if(a&&a._rev!==n)return r(A.createError(A.REV_CONFLICT));e._rev=n?"0-"+(parseInt(n.split("-")[1],10)+1):"0-1";var u=[{type:"put",prefix:Q.localStore,key:i,value:e}];o.batch(u);var c={ok:!0,id:e._id,rev:e._rev};return t.ctx?r(null,c):void o.execute(Y,function(e){return e?r(e):void r(null,c)})})},Z._removeLocal=function(e,t,r){"function"==typeof t&&(r=t,t={}),t.ctx?Z._removeLocalNoLock(e,t,r):Z._removeLocalWithLock(e,t,r)},Z._removeLocalWithLock=W(function(e,t,r){Z._removeLocalNoLock(e,t,r)}),Z._removeLocalNoLock=function(e,t,r){var n=t.ctx||new c;n.get(Q.localStore,e._id,function(i,o){if(i)return r("NotFoundError"!==i.name?i:A.createError(A.MISSING_DOC));if(o._rev!==e._rev)return r(A.createError(A.REV_CONFLICT));n.batch([{prefix:Q.localStore,type:"del",key:e._id}]);var s={ok:!0,id:e._id,rev:"0-0"};return t.ctx?r(null,s):void n.execute(Y,function(e){return e?r(e):void r(null,s)})})},Z._destroy=function(e,t){var r,n=x.functionName(re);return D.has(n)?(r=D.get(n),void(r.has(ee)?($.removeAllListeners(ee),r.get(ee).close(function(){r.delete(ee),G(ee,t)})):G(ee,t))):G(ee,t)}}var y=i(e("levelup")),v=i(e("sublevel-pouchdb")),b=e("through2"),m=i(e("argsarray")),g=e("pouchdb-collections"),_=i(e("double-ended-queue")),w=i(e("pouchdb-promise")),x=e("pouchdb-utils"),k=e("pouchdb-adapter-utils"),E=e("pouchdb-merge"),S=e("pouchdb-json"),j=e("pouchdb-md5"),O=e("pouchdb-binary-utils"),A=e("pouchdb-errors");c.prototype.get=function(e,t,n){var i=u(this,e),o=i.get(t);return o?r.nextTick(function(){n(null,o)}):null===o?r.nextTick(function(){n({name:"NotFoundError"})}):void e.get(t,function(e,r){return e?("NotFoundError"===e.name&&i.set(t,null),n(e)):(i.set(t,r),void n(null,r))})},c.prototype.batch=function(e){for(var t=0,r=e.length;t<r;t++){var n=e[t],i=u(this,n.prefix);"put"===n.type?i.set(n.key,n.value):i.set(n.key,null)}this._batch=this._batch.concat(e)},c.prototype.execute=function(e,t){for(var r=new g.Set,n=[],i=this._batch.length-1;i>=0;i--){var o=this._batch[i],s=o.prefix.prefix()[0]+""+o.key;r.has(s)||(r.add(s),n.push(o))}e.batch(n,t)};var C="document-store",R="by-sequence",B="attach-store",P="attach-binary-store",T="local-store",I="meta-store",D=new g.Map,M="_local_last_update_seq",L="_local_doc_count",q="_local_uuid",N="md5-",F={encode:S.safeJsonStringify,decode:S.safeJsonParse,buffer:!1,type:"cheap-json"},$=new x.changesHandler;t.exports=p}).call(this,e("_process"),e("buffer").Buffer)},{_process:230,argsarray:19,buffer:32,"double-ended-queue":132,levelup:157,"pouchdb-adapter-utils":186,"pouchdb-binary-utils":188,"pouchdb-collections":193,"pouchdb-errors":195,"pouchdb-json":219,"pouchdb-md5":220,"pouchdb-merge":222,"pouchdb-promise":223,"pouchdb-utils":228,"sublevel-pouchdb":327,through2:184}],178:[function(e,t,r){arguments[4][33][0].apply(r,arguments)},{dup:33}],179:[function(e,t,r){"use strict";function n(e){return this instanceof n?(c.call(this,e),f.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(e)}function i(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(e){e.end()}var s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=n;var a=e("process-nextick-args"),u=e("core-util-is");u.inherits=e("inherits");var c=e("./_stream_readable"),f=e("./_stream_writable");u.inherits(n,c);for(var l=s(f.prototype),h=0;h<l.length;h++){var d=l[h];n.prototype[d]||(n.prototype[d]=f.prototype[d])}},{"./_stream_readable":180,"./_stream_writable":182,"core-util-is":117,
inherits:143,"process-nextick-args":229}],180:[function(e,t,r){(function(r){"use strict";function n(t,r){I=I||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof I&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(T||(T=e("string_decoder/").StringDecoder),this.decoder=new T(t.encoding),this.encoding=t.encoding)}function i(t){return I=I||e("./_stream_duplex"),this instanceof i?(this._readableState=new n(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void A.call(this)):new i(t)}function o(e,t,r,n,i){var o=c(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,f(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{var u;!t.decoder||i||n||(r=t.decoder.write(r),u=!t.objectMode&&0===r.length),i||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&l(e))),d(e,t)}else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){return e>=D?e=D:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var r=null;return O.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function f(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,l(e)}}function l(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(P("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?S(h,e):h(e))}function h(e){P("emit readable"),e.emit("readable"),g(e)}function d(e,t){t.readingMore||(t.readingMore=!0,S(p,e,t))}function p(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(P("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function y(e){return function(){var t=e._readableState;P("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&C(e,"data")&&(t.flowing=!0,g(e))}}function v(e){P("readable nexttick read 0"),e.read(0)}function b(e,t){t.resumeScheduled||(t.resumeScheduled=!0,S(m,e,t))}function m(e,t){t.reading||(P("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),g(e),t.flowing&&!t.reading&&e.read(0)}function g(e){var t=e._readableState;if(P("flow",t.flowing),t.flowing)do var r=e.read();while(null!==r&&t.flowing)}function _(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!e||e>=i)r=o?n.join(""):1===n.length?n[0]:O.concat(n,i),n.length=0;else if(e<n[0].length){var a=n[0];r=a.slice(0,e),n[0]=a.slice(e)}else if(e===n[0].length)r=n.shift();else{r=o?"":new O(e);for(var u=0,c=0,f=n.length;c<f&&u<e;c++){var a=n[0],l=Math.min(e-u,a.length);o?r+=a.slice(0,l):a.copy(r,u,0,l),l<a.length?n[0]=a.slice(l):n.shift(),u+=l}}return r}function w(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,S(x,t,e))}function x(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function k(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function E(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}t.exports=i;var S=e("process-nextick-args"),j=e("isarray"),O=e("buffer").Buffer;i.ReadableState=n;var A,C=(e("events"),function(e,t){return e.listeners(t).length});!function(){try{A=e("stream")}catch(e){}finally{A||(A=e("events").EventEmitter)}}();var O=e("buffer").Buffer,R=e("core-util-is");R.inherits=e("inherits");var B=e("util"),P=void 0;P=B&&B.debuglog?B.debuglog("stream"):function(){};var T;R.inherits(i,A);var I,I;i.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding,t!==r.encoding&&(e=new O(e,t),t="")),o(this,r,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.isPaused=function(){return this._readableState.flowing===!1},i.prototype.setEncoding=function(t){return T||(T=e("string_decoder/").StringDecoder),this._readableState.decoder=new T(t),this._readableState.encoding=t,this};var D=8388608;i.prototype.read=function(e){P("read",e);var t=this._readableState,r=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return P("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?w(this):l(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&w(this),null;var n=t.needReadable;P("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,P("length less than watermark",n)),(t.ended||t.reading)&&(n=!1,P("reading or ended",n)),n&&(P("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),n&&!t.reading&&(e=u(r,t));var i;return i=e>0?_(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),r!==e&&t.ended&&0===t.length&&w(this),null!==i&&this.emit("data",i),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){P("onunpipe"),e===l&&o()}function i(){P("onend"),e.end()}function o(){P("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",v),e.removeListener("error",a),e.removeListener("unpipe",n),l.removeListener("end",i),l.removeListener("end",o),l.removeListener("data",s),b=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function s(t){P("ondata");var r=e.write(t);!1===r&&(1!==h.pipesCount||h.pipes[0]!==e||1!==l.listenerCount("data")||b||(P("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++),l.pause())}function a(t){P("onerror",t),f(),e.removeListener("error",a),0===C(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),f()}function c(){P("onfinish"),e.removeListener("close",u),f()}function f(){P("unpipe"),l.unpipe(e)}var l=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,P("pipe count=%d opts=%j",h.pipesCount,t);var d=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,p=d?i:o;h.endEmitted?S(p):l.once("end",p),e.on("unpipe",n);var v=y(l);e.on("drain",v);var b=!1;return l.on("data",s),e._events&&e._events.error?j(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",u),e.once("finish",c),e.emit("pipe",l),h.flowing||(P("pipe resume"),l.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=E(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=A.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&!this._readableState.endEmitted){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&l(this,n):S(v,this))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(P("resume"),e.flowing=!0,b(this,e)),this},i.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(P("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(P("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=n.push(i);o||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return k(o,function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){P("wrapped _read",t),r&&(r=!1,e.resume())},n},i._fromList=_}).call(this,e("_process"))},{"./_stream_duplex":179,_process:230,buffer:32,"core-util-is":117,events:137,inherits:143,isarray:178,"process-nextick-args":229,"string_decoder/":326,util:30}],181:[function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=o;var a=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":179,"core-util-is":117,inherits:143}],182:[function(e,t,r){(function(r){"use strict";function n(){}function i(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function o(t,r){C=C||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof C&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new x(this),this.corkedRequestsFree.next=new x(this)}function s(t){return C=C||e("./_stream_duplex"),this instanceof s||this instanceof C?(this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void O.call(this)):new s(t)}function a(e,t){var r=new Error("write after end");e.emit("error",r),k(t,r)}function u(e,t,r,n){var i=!0;if(!S.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!t.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),k(n,o),i=!1}return i}function c(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new S(t,r)),t}function f(e,t,r,n,o){r=c(t,r,n),S.isBuffer(r)&&(n="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new i(r,n,o),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else l(e,t,!1,s,r,n,o);return a}function l(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,r,n,i){--t.pendingcb,r?k(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(d(r),t)h(e,r,n,t,i);else{var o=m(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||b(e,r),n?E(y,e,r,o,i):y(e,r,o,i)}}function y(e,t,r,n){r||v(e,t),t.pendingcb--,n(),_(e,t)}function v(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function b(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0;r;)i[s]=r,r=r.next,s+=1;l(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,t.corkedRequestsFree=o.next,o.next=null}else{for(;r;){var a=r.chunk,u=r.encoding,c=r.callback,f=t.objectMode?1:a.length;if(l(e,t,!1,f,a,u,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function m(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function g(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function _(e,t){var r=m(t);return r&&(0===t.pendingcb?(g(e,t),t.finished=!0,e.emit("finish")):g(e,t)),r}function w(e,t,r){t.ending=!0,_(e,t),r&&(t.finished?k(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function x(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}t.exports=s;var k=e("process-nextick-args"),E=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:k,S=e("buffer").Buffer;s.WritableState=o;var j=e("core-util-is");j.inherits=e("inherits");var O,A={deprecate:e("util-deprecate")};!function(){try{O=e("stream")}catch(e){}finally{O||(O=e("events").EventEmitter)}}();var S=e("buffer").Buffer;j.inherits(s,O);var C;o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var C;s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},s.prototype.write=function(e,t,r){var i=this._writableState,o=!1;return"function"==typeof t&&(r=t,t=null),S.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=n),i.ended?a(this,r):u(this,i,e,r)&&(i.pendingcb++,o=f(this,i,e,t,r)),o},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||b(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e},s.prototype._write=function(e,t,r){r(new Error("not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||w(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":179,_process:230,buffer:32,"core-util-is":117,events:137,inherits:143,"process-nextick-args":229,"util-deprecate":337}],183:[function(e,t,r){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":181}],184:[function(e,t,r){(function(r){function n(e){s.call(this,e),this._destroyed=!1}function i(e,t,r){r(null,e)}function o(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=i),"function"!=typeof n&&(n=null),e(t,r,n)}}var s=e("readable-stream/transform"),a=e("util").inherits,u=e("xtend");a(n,s),n.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;r.nextTick(function(){e&&t.emit("error",e),t.emit("close")})}},t.exports=o(function(e,t,r){var i=new n(e);return i._transform=t,r&&(i._flush=r),i}),t.exports.ctor=o(function(e,t,r){function i(t){return this instanceof i?(this.options=u(e,t),void n.call(this,this.options)):new i(t)}return a(i,n),i.prototype._transform=t,r&&(i.prototype._flush=r),i}),t.exports.obj=o(function(e,t,r){var i=new n(u({objectMode:!0,highWaterMark:16},e));return i._transform=t,r&&(i._flush=r),i})}).call(this,e("_process"))},{_process:230,"readable-stream/transform":183,util:340,xtend:342}],185:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e,t){var r=a.jsExtend({db:u},e);s.call(this,r,t)}function o(e){e.adapter("localstorage",i,!0)}var s=n(e("pouchdb-adapter-leveldb-core")),a=e("pouchdb-utils"),u=n(e("localstorage-down"));i.valid=function(){return"undefined"!=typeof localStorage},i.use_prefix=!0,t.exports=o},{"localstorage-down":163,"pouchdb-adapter-leveldb-core":177,"pouchdb-utils":228}],186:[function(e,t,r){"use strict";function n(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}function i(e){if(!/^\d+\-./.test(e))return v.createError(v.INVALID_REV);var t=e.indexOf("-"),r=e.substring(0,t),n=e.substring(t+1);return{prefix:parseInt(r,10),id:n}}function o(e,t){for(var r=e.start-e.ids.length+1,n=e.ids,i=[n[0],t,[]],o=1,s=n.length;o<s;o++)i=[n[o],{status:"missing"},[i]];return[{pos:r,ids:i}]}function s(e,t){var r,n,s,a={status:"available"};if(e._deleted&&(a.deleted=!0),t)if(e._id||(e._id=y.uuid()),n=y.uuid(32,16).toLowerCase(),e._rev){if(s=i(e._rev),s.error)return s;e._rev_tree=[{pos:s.prefix,ids:[s.id,{status:"missing"},[[n,a,[]]]]}],r=s.prefix+1}else e._rev_tree=[{pos:1,ids:[n,a,[]]}],r=1;else if(e._revisions&&(e._rev_tree=o(e._revisions,a),r=e._revisions.start,n=e._revisions.ids[0]),!e._rev_tree){if(s=i(e._rev),s.error)return s;r=s.prefix,n=s.id,e._rev_tree=[{pos:r,ids:[n,a,[]]}]}y.invalidIdError(e._id),e._rev=r+"-"+n;var u={metadata:{},data:{}};for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var f="_"===c[0];if(f&&!w[c]){var l=v.createError(v.DOC_VALIDATION,c);throw l.message=v.DOC_VALIDATION.message+": "+c,l}f&&!x[c]?u.metadata[c.slice(1)]=e[c]:u.data[c]=e[c]}return u}function a(e){try{return m.atob(e)}catch(e){var t=v.createError(v.BAD_ARG,"Attachment is not a valid base64 string");return{error:t}}}function u(e,t,r){var n=a(e.data);return n.error?r(n.error):(e.length=n.length,"blob"===t?e.data=m.binaryStringToBlobOrBuffer(n,e.content_type):"base64"===t?e.data=m.btoa(n):e.data=n,void g.binaryMd5(n,function(t){e.digest="md5-"+t,r()}))}function c(e,t,r){g.binaryMd5(e.data,function(n){e.digest="md5-"+n,e.length=e.data.size||e.data.length||0,"binary"===t?m.blobOrBufferToBinaryString(e.data,function(t){e.data=t,r()}):"base64"===t?m.blobOrBufferToBase64(e.data,function(t){e.data=t,r()}):r()})}function f(e,t,r){return e.stub?r():void("string"==typeof e.data?u(e,t,r):c(e,t,r))}function l(e,t,r){function n(){o++,e.length===o&&(i?r(i):r())}if(!e.length)return r();var i,o=0;e.forEach(function(e){function r(e){i=e,s++,s===o.length&&n()}var o=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],s=0;if(!o.length)return n();for(var a in e.data._attachments)e.data._attachments.hasOwnProperty(a)&&f(e.data._attachments[a],t,r)})}function h(e,t,r,n,i,o,a,u){if(b.revExists(t.rev_tree,r.metadata.rev))return n[i]=r,o();var c=t.winningRev||b.winningRev(t),f="deleted"in t?t.deleted:b.isDeleted(t,c),l="deleted"in r.metadata?r.metadata.deleted:b.isDeleted(r.metadata),h=/^1-/.test(r.metadata.rev);if(f&&!l&&u&&h){var d=r.data;d._rev=c,d._id=r.metadata.id,r=s(d,u)}var p=b.merge(t.rev_tree,r.metadata.rev_tree[0],e),y=u&&(f&&l||!f&&"new_leaf"!==p.conflicts||f&&!l&&"new_branch"===p.conflicts);if(y){var m=v.createError(v.REV_CONFLICT);return n[i]=m,o()}var g=r.metadata.rev;r.metadata.rev_tree=p.tree,r.stemmedRevs=p.stemmedRevs||[],t.rev_map&&(r.metadata.rev_map=t.rev_map);var _,w=b.winningRev(r.metadata),x=b.isDeleted(r.metadata,w),k=f===x?0:f<x?-1:1;_=g===w?x:b.isDeleted(r.metadata,g),a(r,w,x,_,!0,k,i,o)}function d(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}function p(e,t,r,n,i,o,s,a,u){function c(e,t,r){var n=b.winningRev(e.metadata),i=b.isDeleted(e.metadata,n);if("was_delete"in a&&i)return o[t]=v.createError(v.MISSING_DOC,"deleted"),r();var u=l&&d(e);if(u){var c=v.createError(v.REV_CONFLICT);return o[t]=c,r()}var f=i?0:1;s(e,n,i,i,!1,f,t,r)}function f(){++y===m&&u&&u()}e=e||1e3;var l=a.new_edits,p=new _.Map,y=0,m=t.length;t.forEach(function(e,t){if(e._id&&b.isLocalId(e._id)){var n=e._deleted?"_removeLocal":"_putLocal";return void r[n](e,{ctx:i},function(e,r){o[t]=e||r,f()})}var s=e.metadata.id;p.has(s)?(m--,p.get(s).push([e,t])):p.set(s,[[e,t]])}),p.forEach(function(t,r){function i(){++u<t.length?a():f()}function a(){var a=t[u],f=a[0],d=a[1];if(n.has(r))h(e,n.get(r),f,o,d,i,s,l);else{var p=b.merge([],f.metadata.rev_tree[0],e);f.metadata.rev_tree=p.tree,f.stemmedRevs=p.stemmedRevs||[],c(f,d,i)}}var u=0;a()})}Object.defineProperty(r,"__esModule",{value:!0});var y=e("pouchdb-utils"),v=e("pouchdb-errors"),b=e("pouchdb-merge"),m=e("pouchdb-binary-utils"),g=e("pouchdb-md5"),_=e("pouchdb-collections"),w=n(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),x=n(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);r.invalidIdError=y.invalidIdError,r.isDeleted=b.isDeleted,r.isLocalId=b.isLocalId,r.normalizeDdocFunctionName=y.normalizeDdocFunctionName,r.parseDdocFunctionName=y.parseDdocFunctionName,r.parseDoc=s,r.preprocessAttachments=l,r.processDocs=p,r.updateDoc=h},{"pouchdb-binary-utils":188,"pouchdb-collections":193,"pouchdb-errors":195,"pouchdb-md5":220,"pouchdb-merge":222,"pouchdb-utils":228}],187:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(){for(var e={},t=new d(function(t,r){e.resolve=t,e.reject=r}),r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.promise=t,d.resolve().then(function(){return fetch.apply(null,r)}).then(function(t){e.resolve(t)}).catch(function(t){e.reject(t)}),e}function o(e,t){var r,n,o,s=new Headers,a={method:e.method,credentials:"include",headers:s};return e.json&&(s.set("Accept","application/json"),s.set("Content-Type",e.headers["Content-Type"]||"application/json")),e.body&&e.body instanceof Blob?h.readAsArrayBuffer(e.body,function(e){a.body=e}):e.body&&e.processData&&"string"!=typeof e.body?a.body=JSON.stringify(e.body):"body"in e?a.body=e.body:a.body=null,Object.keys(e.headers).forEach(function(t){e.headers.hasOwnProperty(t)&&s.set(t,e.headers[t])}),r=i(e.url,a),e.timeout>0&&(n=setTimeout(function(){r.reject(new Error("Load timeout for resource: "+e.url))},e.timeout)),r.promise.then(function(t){return o={statusCode:t.status},e.timeout>0&&clearTimeout(n),o.statusCode>=200&&o.statusCode<300?e.binary?t.blob():t.text():t.json()}).then(function(e){o.statusCode>=200&&o.statusCode<300?t(null,o,e):t(e,o)}).catch(function(e){t(e,o)}),{abort:r.reject}}function s(e,t){var r,n,i=!1,o=function(){r.abort(),u()},s=function(){i=!0,r.abort(),u()},a={abort:o},u=function(){clearTimeout(n),a.abort=function(){},r&&(r.onprogress=void 0,r.upload&&(r.upload.onprogress=void 0),r.onreadystatechange=void 0,r=void 0)};r=e.xhr?new e.xhr:new XMLHttpRequest;try{r.open(e.method,e.url)}catch(e){return t(new Error(e.name||"Url is invalid"))}r.withCredentials=!("withCredentials"in e)||e.withCredentials,"GET"===e.method?delete e.headers["Content-Type"]:e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(r.responseType="arraybuffer"),"body"in e||(e.body=null);for(var c in e.headers)e.headers.hasOwnProperty(c)&&r.setRequestHeader(c,e.headers[c]);return e.timeout>0&&(n=setTimeout(s,e.timeout),r.onprogress=function(){clearTimeout(n),4!==r.readyState&&(n=setTimeout(s,e.timeout))},"undefined"!=typeof r.upload&&(r.upload.onprogress=r.onprogress)),r.onreadystatechange=function(){if(4===r.readyState){var n={statusCode:r.status};if(r.status>=200&&r.status<300){var o;o=e.binary?h.blob([r.response||""],{type:r.getResponseHeader("Content-Type")}):r.responseText,t(null,n,o)}else{var s={};if(i)s=new Error("ETIMEDOUT"),s.code="ETIMEDOUT";else if("string"==typeof r.response)try{s=JSON.parse(r.response)}catch(e){}s.status=r.status,t(s)}u()}},e.body&&e.body instanceof Blob?h.readAsArrayBuffer(e.body,function(e){r.send(e)}):r.send(e.body),a}function a(){try{return new XMLHttpRequest,!0}catch(e){return!1}}function u(e,t){return v||e.xhr?s(e,t):o(e,t)}function c(){return""}function f(e,t){function r(t,r,n){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){return n(e)}Array.isArray(t)&&(t=t.map(function(e){return e.error||e.missing?y.generateErrorFromResponse(e):e})),e.binary&&b(t,r),n(null,t,r)}e=p.clone(e);var n={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};return e=p.jsExtend(n,e),e.json&&(e.binary||(e.headers.Accept="application/json"),e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json"),e.binary&&(e.encoding=null,e.json=!1),e.processData||(e.json=!1),u(e,function(n,i,o){if(n)return t(y.generateErrorFromResponse(n));var s,a=i.headers&&i.headers["content-type"],u=o||c();if(!e.binary&&(e.json||!e.processData)&&"object"!=typeof u&&(/json/.test(a)||/^[\s]*\{/.test(u)&&/\}[\s]*$/.test(u)))try{u=JSON.parse(u.toString())}catch(e){}i.statusCode>=200&&i.statusCode<300?r(u,i,t):(s=y.generateErrorFromResponse(u),s.status=i.statusCode,t(s))})}function l(e,t){var r=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=r.indexOf("safari")!==-1&&r.indexOf("chrome")===-1,i=r.indexOf("msie")!==-1,o=r.indexOf("edge")!==-1,s=n||(i||o)&&"GET"===e.method,a=!("cache"in e)||e.cache,u=/^blob:/.test(e.url);if(!u&&(s||!a)){var c=e.url.indexOf("?")!==-1;e.url+=(c?"&":"?")+"_nonce="+Date.now()}return f(e,t)}var h=e("pouchdb-binary-utils"),d=n(e("pouchdb-promise")),p=e("pouchdb-utils"),y=e("pouchdb-errors"),v=a(),b=function(){};t.exports=l},{"pouchdb-binary-utils":188,"pouchdb-errors":195,"pouchdb-promise":223,"pouchdb-utils":228}],188:[function(e,t,r){"use strict";function n(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,n=new r,i=0;i<e.length;i+=1)n.append(e[i]);return n.getBlob(t.type)}}function i(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}function o(e,t){return n([i(e)],{type:t})}function s(e,t){return o(d(e),t)}function a(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,i=0;i<n;i++)t+=String.fromCharCode(r[i]);return t}function u(e,t){if("undefined"==typeof FileReader)return t(a((new FileReaderSync).readAsArrayBuffer(e)));var r=new FileReader,n="function"==typeof r.readAsBinaryString;r.onloadend=function(e){var r=e.target.result||"";return n?t(r):void t(a(r))},n?r.readAsBinaryString(e):r.readAsArrayBuffer(e)}function c(e,t){u(e,function(e){t(e)})}function f(e,t){c(e,function(e){t(p(e))})}function l(e,t){if("undefined"==typeof FileReader)return t((new FileReaderSync).readAsArrayBuffer(e));var r=new FileReader;r.onloadend=function(e){var r=e.target.result||new ArrayBuffer(0);t(r)},r.readAsArrayBuffer(e)}function h(){}Object.defineProperty(r,"__esModule",{value:!0});var d=function(e){return atob(e)},p=function(e){return btoa(e)};r.atob=d,r.btoa=p,r.base64StringToBlobOrBuffer=s,r.binaryStringToArrayBuffer=i,r.binaryStringToBlobOrBuffer=o,r.blob=n,r.blobOrBufferToBase64=f,r.blobOrBufferToBinaryString=c,r.readAsArrayBuffer=l,r.readAsBinaryString=u,r.typedBuffer=h},{}],189:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e,t,r,n,o){return e.get(t).catch(function(r){if(404===r.status)return"http"===e.type()&&l.explainError(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:n,_id:t,history:[],replicator:p,version:d};throw r}).then(function(s){if(!o.cancelled&&s.last_seq!==r)return s.history=(s.history||[]).filter(function(e){return e.session_id!==n}),s.history.unshift({last_seq:r,session_id:n}),s.history=s.history.slice(0,y),s.version=d,s.replicator=p,s.session_id=n,s.last_seq=r,e.put(s).catch(function(s){if(409===s.status)return i(e,t,r,n,o);throw s})})}function o(e,t,r,n){this.src=e,this.target=t,this.id=r,this.returnValue=n}function s(e,t){return e.session_id===t.session_id?{last_seq:e.last_seq,history:e.history}:a(e.history,t.history)}function a(e,t){var r=e[0],n=e.slice(1),i=t[0],o=t.slice(1);if(!r||0===t.length)return{last_seq:v,history:[]};var s=r.session_id;if(u(s,t))return{last_seq:r.last_seq,history:e};var c=i.session_id;return u(c,n)?{last_seq:i.last_seq,history:o}:a(n,o)}function u(e,t){var r=t[0],n=t.slice(1);return!(!e||0===t.length)&&(e===r.session_id||u(e,n))}function c(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}var f=n(e("pouchdb-promise")),l=e("pouchdb-utils"),h=e("pouchdb-collate"),d=1,p="pouchdb",y=5,v=0;o.prototype.writeCheckpoint=function(e,t){var r=this;return this.updateTarget(e,t).then(function(){return r.updateSource(e,t)})},o.prototype.updateTarget=function(e,t){return i(this.target,this.id,e,t,this.returnValue)},o.prototype.updateSource=function(e,t){var r=this;return this.readOnlySource?f.resolve(!0):i(this.src,this.id,e,t,this.returnValue).catch(function(e){if(c(e))return r.readOnlySource=!0,!0;throw e})};var b={undefined:function(e,t){return 0===h.collate(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return s(t,e).last_seq;
}};o.prototype.getCheckpoint=function(){var e=this;return e.target.get(e.id).then(function(t){return e.readOnlySource?f.resolve(t.last_seq):e.src.get(e.id).then(function(e){if(t.version!==e.version)return v;var r;return r=t.version?t.version.toString():"undefined",r in b?b[r](t,e):v},function(r){if(404===r.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:v}).then(function(){return v},function(r){return c(r)?(e.readOnlySource=!0,t.last_seq):v});throw r})}).catch(function(e){if(404!==e.status)throw e;return v})},t.exports=o},{"pouchdb-collate":190,"pouchdb-promise":223,"pouchdb-utils":228}],190:[function(e,t,r){"use strict";function n(e,t,r){for(var n="",i=r-e.length;n.length<i;)n+=t;return n}function i(e,t,r){var i=n(e,t,r);return i+e}function o(e,t){if(e===t)return 0;e=s(e),t=s(t);var r=y(e),n=y(t);if(r-n!==0)return r-n;if(null===e)return 0;switch(typeof e){case"number":return e-t;case"boolean":return e===t?0:e<t?-1:1;case"string":return d(e,t)}return Array.isArray(e)?h(e,t):p(e,t)}function s(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-(1/0)||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var n=0;n<r;n++)e[n]=s(t[n])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];"undefined"!=typeof o&&(e[i]=s(o))}}}}return e}function a(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return v(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),r=t?e:Object.keys(e),n=-1,i=r.length,o="";if(t)for(;++n<i;)o+=u(r[n]);else for(;++n<i;){var s=r[n];o+=u(s)+u(e[s])}return o}return""}function u(e){var t="\0";return e=s(e),y(e)+g+a(e)+t}function c(e,t){var r,n=t,i="1"===e[t];if(i)r=0,t++;else{var o="0"===e[t];t++;var s="",a=e.substring(t,t+m),u=parseInt(a,10)+b;for(o&&(u=-u),t+=m;;){var c=e[t];if("\0"===c)break;s+=c,t++}s=s.split("."),r=1===s.length?parseInt(s,10):parseFloat(s[0]+"."+s[1]),o&&(r-=10),0!==u&&(r=parseFloat(r+"e"+u))}return{num:r,length:t-n}}function f(e,t){var r=e.pop();if(t.length){var n=t[t.length-1];r===n.element&&(t.pop(),n=t[t.length-1]);var i=n.element,o=n.index;if(Array.isArray(i))i.push(r);else if(o===e.length-2){var s=e.pop();i[s]=r}else e.push(r)}}function l(e){for(var t=[],r=[],n=0;;){var i=e[n++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[n]),n++;break;case"3":var o=c(e,n);t.push(o.num),n+=o.length;break;case"4":for(var s="";;){var a=e[n];if("\0"===a)break;s+=a,n++}s=s.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(s);break;case"5":var u={element:[],index:t.length};t.push(u.element),r.push(u);break;case"6":var l={element:{},index:t.length};t.push(l.element),r.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();f(t,r)}}}function h(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){var i=o(e[n],t[n]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}function d(e,t){return e===t?0:e>t?1:-1}function p(e,t){for(var r=Object.keys(e),n=Object.keys(t),i=Math.min(r.length,n.length),s=0;s<i;s++){var a=o(r[s],n[s]);if(0!==a)return a;if(a=o(e[r[s]],t[n[s]]),0!==a)return a}return r.length===n.length?0:r.length>n.length?1:-1}function y(e){var t=["boolean","number","string","object"],r=t.indexOf(typeof e);return~r?null===e?1:Array.isArray(e)?5:r<3?r+2:r+3:Array.isArray(e)?5:void 0}function v(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),r=parseInt(t[1],10),n=e<0,o=n?"0":"2",s=(n?-r:r)-b,a=i(s.toString(),"0",m);o+=g+a;var u=Math.abs(parseFloat(t[0]));n&&(u=10-u);var c=u.toFixed(20);return c=c.replace(/\.?0+$/,""),o+=g+c}Object.defineProperty(r,"__esModule",{value:!0});var b=-324,m=3,g="";r.collate=o,r.normalizeKey=s,r.toIndexableString=u,r.parseIndexableString=l},{}],191:[function(e,t,r){"use strict";function n(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return f(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),i=-1,o=n.length,s="";if(t)for(;++i<o;)s+=r.toIndexableString(n[i]);else for(;++i<o;){var a=n[i];s+=r.toIndexableString(a)+r.toIndexableString(e[a])}return s}return""}function i(e,t){var r,n=t,i="1"===e[t];if(i)r=0,t++;else{var o="0"===e[t];t++;var s="",a=e.substring(t,t+h),u=parseInt(a,10)+l;for(o&&(u=-u),t+=h;;){var c=e[t];if("\0"===c)break;s+=c,t++}s=s.split("."),r=1===s.length?parseInt(s,10):parseFloat(s[0]+"."+s[1]),o&&(r-=10),0!==u&&(r=parseFloat(r+"e"+u))}return{num:r,length:t-n}}function o(e,t){var r=e.pop();if(t.length){var n=t[t.length-1];r===n.element&&(t.pop(),n=t[t.length-1]);var i=n.element,o=n.index;if(Array.isArray(i))i.push(r);else if(o===e.length-2){var s=e.pop();i[s]=r}else e.push(r)}}function s(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++){var o=r.collate(e[i],t[i]);if(0!==o)return o}return e.length===t.length?0:e.length>t.length?1:-1}function a(e,t){return e===t?0:e>t?1:-1}function u(e,t){for(var n=Object.keys(e),i=Object.keys(t),o=Math.min(n.length,i.length),s=0;s<o;s++){var a=r.collate(n[s],i[s]);if(0!==a)return a;if(a=r.collate(e[n[s]],t[i[s]]),0!==a)return a}return n.length===i.length?0:n.length>i.length?1:-1}function c(e){var t=["boolean","number","string","object"],r=t.indexOf(typeof e);return~r?null===e?1:Array.isArray(e)?5:r<3?r+2:r+3:Array.isArray(e)?5:void 0}function f(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),r=parseInt(t[1],10),n=e<0,i=n?"0":"2",o=(n?-r:r)-l,s=p.padLeft(o.toString(),"0",h);i+=d+s;var a=Math.abs(parseFloat(t[0]));n&&(a=10-a);var u=a.toFixed(20);return u=u.replace(/\.?0+$/,""),i+=d+u}var l=-324,h=3,d="",p=e("./utils");r.collate=function(e,t){if(e===t)return 0;e=r.normalizeKey(e),t=r.normalizeKey(t);var n=c(e),i=c(t);if(n-i!==0)return n-i;if(null===e)return 0;switch(typeof e){case"number":return e-t;case"boolean":return e===t?0:e<t?-1:1;case"string":return a(e,t)}return Array.isArray(e)?s(e,t):u(e,t)},r.normalizeKey=function(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-(1/0)||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var i=0;i<n;i++)e[i]=r.normalizeKey(t[i])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];"undefined"!=typeof s&&(e[o]=r.normalizeKey(s))}}}}return e},r.toIndexableString=function(e){var t="\0";return e=r.normalizeKey(e),c(e)+d+n(e)+t},r.parseIndexableString=function(e){for(var t=[],r=[],n=0;;){var s=e[n++];if("\0"!==s)switch(s){case"1":t.push(null);break;case"2":t.push("1"===e[n]),n++;break;case"3":var a=i(e,n);t.push(a.num),n+=a.length;break;case"4":for(var u="";;){var c=e[n];if("\0"===c)break;u+=c,n++}u=u.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(u);break;case"5":var f={element:[],index:t.length};t.push(f.element),r.push(f);break;case"6":var l={element:{},index:t.length};t.push(l.element),r.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+s)}else{if(1===t.length)return t.pop();o(t,r)}}}},{"./utils":192}],192:[function(e,t,r){"use strict";function n(e,t,r){for(var n="",i=r-e.length;n.length<i;)n+=t;return n}r.padLeft=function(e,t,r){var i=n(e,t,r);return i+e},r.padRight=function(e,t,r){var i=n(e,t,r);return e+i},r.stringLexCompare=function(e,t){var r,n=e.length,i=t.length;for(r=0;r<n;r++){if(r===i)return 1;var o=e.charAt(r),s=t.charAt(r);if(o!==s)return o<s?-1:1}return n<i?-1:0},r.intToDecimalForm=function(e){var t=e<0,r="";do{var n=t?-Math.ceil(e%10):Math.floor(e%10);r=n+r,e=t?Math.ceil(e/10):Math.floor(e/10)}while(e);return t&&"0"!==r&&(r="-"+r),r}},{}],193:[function(e,t,r){"use strict";function n(e){return"$"+e}function i(e){return e.substring(1)}function o(){this.store={}}function s(e){if(this.store=new o,e&&Array.isArray(e))for(var t=0,r=e.length;t<r;t++)this.add(e[t])}Object.defineProperty(r,"__esModule",{value:!0}),o.prototype.get=function(e){var t=n(e);return this.store[t]},o.prototype.set=function(e,t){var r=n(e);return this.store[r]=t,!0},o.prototype.has=function(e){var t=n(e);return t in this.store},o.prototype.delete=function(e){var t=n(e),r=t in this.store;return delete this.store[t],r},o.prototype.forEach=function(e){for(var t=Object.keys(this.store),r=0,n=t.length;r<n;r++){var o=t[r],s=this.store[o];o=i(o),e(s,o)}},s.prototype.add=function(e){return this.store.set(e,!0)},s.prototype.has=function(e){return this.store.has(e)},r.Set=s,r.Map=o},{}],194:[function(e,t,r){(function(r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){return P('"use strict";\nreturn '+e+";",{})}function o(e){var t=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+e+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n");return P(t,{})}function s(e,t){try{e.emit("change",t)}catch(e){E.guardedConsole("error",'Error in .on("change", function):',e)}}function a(e,t,r){function n(){i.cancel()}C.EventEmitter.call(this);var i=this;this.db=e,t=t?E.clone(t):{};var o=t.complete=E.once(function(t,r){t?E.listenerCount(i,"error")>0&&i.emit("error",t):i.emit("complete",r),i.removeAllListeners(),e.removeListener("destroyed",n)});r&&(i.on("complete",function(e){r(null,e)}),i.on("error",r)),e.once("destroyed",n),t.onChange=function(e){t.isCancelled||s(i,e)};var a=new O(function(e,r){t.complete=function(t,n){t?r(t):e(n)}});i.once("cancel",function(){e.removeListener("destroyed",n),t.complete(null,{status:"cancelled"})}),this.then=a.then.bind(a),this.catch=a.catch.bind(a),this.then(function(e){o(null,e)},o),e.taskqueue.isReady?i.doChanges(t):e.taskqueue.addTask(function(e){e?t.complete(e):i.isCancelled?i.emit("cancel"):i.doChanges(t)})}function u(e,t,r){var n=[{rev:e._rev}];"all_docs"===r.style&&(n=B.collectLeaves(t.rev_tree).map(function(e){return{rev:e.rev}}));var i={id:t.id,changes:n,doc:e};return B.isDeleted(t,e._rev)&&(i.deleted=!0),r.conflicts&&(i.doc._conflicts=B.collectConflicts(t),i.doc._conflicts.length||delete i.doc._conflicts),i}function c(e,t){return e<t?-1:e>t?1:0}function f(e,t){for(var r=0;r<e.length;r++)if(t(e[r],r)===!0)return e[r]}function l(e){return function(t,r){t||r[0]&&r[0].error?e(t||r[0]):e(null,r.length?r[0]:r)}}function h(e){for(var t=0;t<e.length;t++){var r=e[t];if(r._deleted)delete r._attachments;else if(r._attachments)for(var n=Object.keys(r._attachments),i=0;i<n.length;i++){var o=n[i];r._attachments[o]=E.pick(r._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}function d(e,t){var r=c(e._id,t._id);if(0!==r)return r;var n=e._revisions?e._revisions.start:0,i=t._revisions?t._revisions.start:0;return c(n,i)}function p(e){var t={},r=[];return B.traverseRevTree(e,function(e,n,i,o){var s=n+"-"+i;return e&&(t[s]=0),void 0!==o&&r.push({from:o,to:s}),s}),r.reverse(),r.forEach(function(e){void 0===t[e.from]?t[e.from]=1+t[e.to]:t[e.from]=Math.min(t[e.from],1+t[e.to])}),t}function y(e,t,r){var n="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;if(t.descending&&n.reverse(),!n.length)return e._allDocs({limit:0},r);var i={offset:t.skip};return O.all(n.map(function(r){var n=E.jsExtend({key:r,deleted:"ok"},t);return["limit","skip","keys"].forEach(function(e){delete n[e]}),new O(function(t,o){e._allDocs(n,function(e,n){return e?o(e):(i.total_rows=n.total_rows,void t(n.rows[0]||{key:r,error:"not_found"}))})})})).then(function(e){return i.rows=e,i})}function v(e){var t=e._compactionQueue[0],n=t.opts,i=t.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(t){t&&t.last_seq&&(n.last_seq=t.last_seq),e._compact(n,function(t,n){t?i(t):i(null,n),r.nextTick(function(){e._compactionQueue.shift(),e._compactionQueue.length&&v(e)})})})}function b(e){return"_"===e.charAt(0)&&e+"is not a valid attachment name, attachment names cannot start with '_'"}function m(){C.EventEmitter.call(this)}function g(){this.isReady=!1,this.failed=!1,this.queue=[]}function _(e,t){var r=e.match(/([a-z\-]*):\/\/(.*)/);if(r)return e=/http(s?)/.test(r[1])?r[1]+"://"+r[2]:r[2],{name:e,adapter:r[1]};var n,i="idb"in x.adapters&&"websql"in x.adapters&&E.hasLocalStorage()&&localStorage["_pouch__websqldb_"+x.prefix+e];if(t.adapter)n=t.adapter;else if("undefined"!=typeof t&&t.db)n="leveldb";else for(var o=0;o<x.preferredAdapters.length;++o){n=x.preferredAdapters[o];{if(!i||"idb"!==n)break;E.guardedConsole("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.')}}var s=x.adapters[n],a=!(s&&"use_prefix"in s)||s.use_prefix;return{name:a?x.prefix+e:e,adapter:n}}function w(e){function t(){e.constructor.emit("destroyed",e.name)}function r(){e.removeListener("destroyed",t),e.emit("destroyed",e)}var n=e.constructor._destructionListeners;e.once("destroyed",t),n.has(e.name)||n.set(e.name,[]),n.get(e.name).push(r)}function x(e,t){if(!(this instanceof x))return new x(e,t);var r=this;if(t=t||{},e&&"object"==typeof e&&(t=e,e=t.name,delete t.name),this.__opts=t=E.clone(t),r.auto_compaction=t.auto_compaction,r.prefix=x.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var n=(t.prefix||"")+e,i=_(n,t);if(t.name=i.name,t.adapter=t.adapter||i.adapter,r.name=e,r._adapter=t.adapter,S("pouchdb:adapter")("Picked adapter: "+t.adapter),!x.adapters[t.adapter]||!x.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);m.call(r),r.taskqueue=new g,r.adapter=t.adapter,x.adapters[t.adapter].call(r,t,function(e){return e?r.taskqueue.fail(e):(w(r),r.emit("created",r),x.emit("created",r.name),void r.taskqueue.ready(r))})}function k(e){Object.keys(C.EventEmitter.prototype).forEach(function(t){"function"==typeof C.EventEmitter.prototype[t]&&(e[t]=I[t].bind(I))});var t=e._destructionListeners=new A.Map;e.on("destroyed",function(e){t.get(e).forEach(function(e){e()}),t.delete(e)})}var E=e("pouchdb-utils"),S=n(e("debug")),j=n(e("inherits")),O=n(e("pouchdb-promise")),A=e("pouchdb-collections"),C=e("events"),R=n(e("argsarray")),B=e("pouchdb-merge"),P=n(e("scope-eval")),T=e("pouchdb-errors");j(a,C.EventEmitter),a.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},a.prototype.doChanges=function(e){var t=this,r=e.complete;if(e=E.clone(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=u,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"===e.since)return void this.db.info().then(function(n){return t.isCancelled?void r(null,{status:"cancelled"}):(e.since=n.update_seq,void t.doChanges(e))},r);if(e.view&&!e.filter&&(e.filter="_view"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=E.normalizeDdocFunctionName(e.view):e.filter=E.normalizeDdocFunctionName(e.filter),"http"!==this.db.type()&&!e.doc_ids))return this.filterChanges(e);"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=r;var n=this.db._changes(e);if(n&&"function"==typeof n.cancel){var i=t.cancel;t.cancel=R(function(e){n.cancel(),i.apply(this,e)})}},a.prototype.filterChanges=function(e){var t=this,r=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var n=T.createError(T.BAD_REQUEST,"`view` filter parameter not found or invalid.");return r(n)}var s=E.parseDdocFunctionName(e.view);this.db.get("_design/"+s[0],function(n,i){if(t.isCancelled)return r(null,{status:"cancelled"});if(n)return r(T.generateErrorFromResponse(n));var a=i&&i.views&&i.views[s[1]]&&i.views[s[1]].map;return a?(e.filter=o(a),void t.doChanges(e)):r(T.createError(T.MISSING_DOC,i.views?"missing json key: "+s[1]:"missing json key: views"))})}else{var a=E.parseDdocFunctionName(e.filter);if(!a)return t.doChanges(e);this.db.get("_design/"+a[0],function(n,o){if(t.isCancelled)return r(null,{status:"cancelled"});if(n)return r(T.generateErrorFromResponse(n));var s=o&&o.filters&&o.filters[a[1]];return s?(e.filter=i(s),void t.doChanges(e)):r(T.createError(T.MISSING_DOC,o&&o.filters?"missing json key: "+a[1]:"missing json key: filters"))})}},j(m,C.EventEmitter),m.prototype.post=E.adapterFun("post",function(e,t,r){return"function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e)?r(T.createError(T.NOT_AN_OBJECT)):void this.bulkDocs({docs:[e]},t,l(r))}),m.prototype.put=E.adapterFun("put",function(e,t,r){return"function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e)?r(T.createError(T.NOT_AN_OBJECT)):(E.invalidIdError(e._id),B.isLocalId(e._id)&&"function"==typeof this._putLocal?e._deleted?this._removeLocal(e,r):this._putLocal(e,r):void("function"==typeof this._put&&t.new_edits!==!1?this._put(e,t,r):this.bulkDocs({docs:[e]},t,l(r))))}),m.prototype.putAttachment=E.adapterFun("putAttachment",function(e,t,r,n,i){function o(e){var r="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[t]={content_type:i,data:n,revpos:++r},s.put(e)}var s=this;return"function"==typeof i&&(i=n,n=r,r=null),"undefined"==typeof i&&(i=n,n=r,r=null),s.get(e).then(function(e){if(e._rev!==r)throw T.createError(T.REV_CONFLICT);return o(e)},function(t){if(t.reason===T.MISSING_DOC.message)return o({_id:e});throw t})}),m.prototype.removeAttachment=E.adapterFun("removeAttachment",function(e,t,r,n){var i=this;i.get(e,function(e,o){return e?void n(e):o._rev!==r?void n(T.createError(T.REV_CONFLICT)):o._attachments?(delete o._attachments[t],0===Object.keys(o._attachments).length&&delete o._attachments,void i.put(o,n)):n()})}),m.prototype.remove=E.adapterFun("remove",function(e,t,r,n){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof r&&(n=r,r={})):(i=e,"function"==typeof t?(n=t,r={}):(n=r,r=t)),r=r||{},r.was_delete=!0;var o={_id:i._id,_rev:i._rev||r.rev};return o._deleted=!0,B.isLocalId(o._id)&&"function"==typeof this._removeLocal?this._removeLocal(i,n):void this.bulkDocs({docs:[o]},r,l(n))}),m.prototype.revsDiff=E.adapterFun("revsDiff",function(e,t,r){function n(e,t){a.has(e)||a.set(e,{missing:[]}),a.get(e).missing.push(t)}function i(t,r){var i=e[t].slice(0);B.traverseRevTree(r,function(e,r,o,s,a){var u=r+"-"+o,c=i.indexOf(u);c!==-1&&(i.splice(c,1),"available"!==a.status&&n(t,u))}),i.forEach(function(e){n(t,e)})}"function"==typeof t&&(r=t,t={});var o=Object.keys(e);if(!o.length)return r(null,{});var s=0,a=new A.Map;o.map(function(t){this._getRevisionTree(t,function(n,u){if(n&&404===n.status&&"missing"===n.message)a.set(t,{missing:e[t]});else{if(n)return r(n);i(t,u)}if(++s===o.length){var c={};return a.forEach(function(e,t){c[t]=e}),r(null,c)}})},this)}),m.prototype.bulkGet=E.adapterFun("bulkGet",function(e,t){E.bulkGetShim(this,e,t)}),m.prototype.compactDocument=E.adapterFun("compactDocument",function(e,t,r){var n=this;this._getRevisionTree(e,function(i,o){if(i)return r(i);var s=p(o),a=[],u=[];Object.keys(s).forEach(function(e){s[e]>t&&a.push(e)}),B.traverseRevTree(o,function(e,t,r,n,i){var o=t+"-"+r;"available"===i.status&&a.indexOf(o)!==-1&&u.push(o)}),n._doCompaction(e,u,r)})}),m.prototype.compact=E.adapterFun("compact",function(e,t){"function"==typeof e&&(t=e,e={});var r=this;e=e||{},r._compactionQueue=r._compactionQueue||[],r._compactionQueue.push({opts:e,callback:t}),1===r._compactionQueue.length&&v(r)}),m.prototype._compact=function(e,t){function r(e){s.push(i.compactDocument(e.id,0))}function n(e){var r=e.last_seq;O.all(s).then(function(){return E.upsert(i,"_local/compaction",function(e){return(!e.last_seq||e.last_seq<r)&&(e.last_seq=r,e)})}).then(function(){t(null,{ok:!0})}).catch(t)}var i=this,o={return_docs:!1,last_seq:e.last_seq||0},s=[];i.changes(o).on("change",r).on("complete",n).on("error",t)},m.prototype.get=E.adapterFun("get",function(e,t,r){function n(){var n=[],s=i.length;return s?void i.forEach(function(i){o.get(e,{rev:i,revs:t.revs,attachments:t.attachments},function(e,t){e?n.push({missing:i}):n.push({ok:t}),s--,s||r(null,n)})}):r(null,n)}if("function"==typeof t&&(r=t,t={}),"string"!=typeof e)return r(T.createError(T.INVALID_ID));if(B.isLocalId(e)&&"function"==typeof this._getLocal)return this._getLocal(e,r);var i=[],o=this;if(!t.open_revs)return this._get(e,t,function(e,n){if(e)return r(e);var i=n.doc,s=n.metadata,a=n.ctx;if(t.conflicts){var u=B.collectConflicts(s);u.length&&(i._conflicts=u)}if(B.isDeleted(s,i._rev)&&(i._deleted=!0),t.revs||t.revs_info){var c=B.rootToLeaf(s.rev_tree),l=f(c,function(e){return e.ids.map(function(e){return e.id}).indexOf(i._rev.split("-")[1])!==-1}),h=l.ids.map(function(e){return e.id}).indexOf(i._rev.split("-")[1])+1,d=l.ids.length-h;if(l.ids.splice(h,d),l.ids.reverse(),t.revs&&(i._revisions={start:l.pos+l.ids.length-1,ids:l.ids.map(function(e){return e.id})}),t.revs_info){var p=l.pos+l.ids.length;i._revs_info=l.ids.map(function(e){return p--,{rev:p+"-"+e.id,status:e.opts.status}})}}if(t.attachments&&i._attachments){var y=i._attachments,v=Object.keys(y).length;if(0===v)return r(null,i);Object.keys(y).forEach(function(e){this._getAttachment(i._id,e,y[e],{rev:i._rev,binary:t.binary,ctx:a},function(t,n){var o=i._attachments[e];o.data=n,delete o.stub,delete o.length,--v||r(null,i)})},o)}else{if(i._attachments)for(var b in i._attachments)i._attachments.hasOwnProperty(b)&&(i._attachments[b].stub=!0);r(null,i)}});if("all"===t.open_revs)this._getRevisionTree(e,function(e,t){return e?r(e):(i=B.collectLeaves(t).map(function(e){return e.rev}),void n())});else{if(!Array.isArray(t.open_revs))return r(T.createError(T.UNKNOWN_ERROR,"function_clause"));i=t.open_revs;for(var s=0;s<i.length;s++){var a=i[s];if("string"!=typeof a||!/^\d+-/.test(a))return r(T.createError(T.INVALID_REV))}n()}}),m.prototype.getAttachment=E.adapterFun("getAttachment",function(e,t,r,n){var i=this;r instanceof Function&&(n=r,r={}),this._get(e,r,function(o,s){return o?n(o):s.doc._attachments&&s.doc._attachments[t]?(r.ctx=s.ctx,r.binary=!0,i._getAttachment(e,t,s.doc._attachments[t],r,n),void 0):n(T.createError(T.MISSING_DOC))})}),m.prototype.allDocs=E.adapterFun("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip="undefined"!=typeof e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(r)return void t(T.createError(T.QUERY_PARSE_ERROR,"Query parameter `"+r+"` is not compatible with multi-get"));if("http"!==this.type())return y(this,e,t)}return this._allDocs(e,t)}),m.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new a(this,e,t)},m.prototype.close=E.adapterFun("close",function(e){return this._closed=!0,this._close(e)}),m.prototype.info=E.adapterFun("info",function(e){var t=this;this._info(function(r,n){return r?e(r):(n.db_name=n.db_name||t.name,n.auto_compaction=!(!t.auto_compaction||"http"===t.type()),n.adapter=t.type(),void e(null,n))})}),m.prototype.id=E.adapterFun("id",function(e){return this._id(e)}),m.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},m.prototype.bulkDocs=E.adapterFun("bulkDocs",function(e,t,r){if("function"==typeof t&&(r=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return r(T.createError(T.MISSING_BULK_DOCS));for(var n=0;n<e.docs.length;++n)if("object"!=typeof e.docs[n]||Array.isArray(e.docs[n]))return r(T.createError(T.NOT_AN_OBJECT));var i;return e.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(e){i=i||b(e)})}),i?r(T.createError(T.BAD_REQUEST,i)):("new_edits"in t||("new_edits"in e?t.new_edits=e.new_edits:t.new_edits=!0),t.new_edits||"http"===this.type()||e.docs.sort(d),h(e.docs),this._bulkDocs(e,t,function(e,n){return e?r(e):(t.new_edits||(n=n.filter(function(e){return e.error})),void r(null,n))}))}),m.prototype.registerDependentDatabase=E.adapterFun("registerDependentDatabase",function(e,t){function r(t){return t.dependentDbs=t.dependentDbs||{},!t.dependentDbs[e]&&(t.dependentDbs[e]=!0,t)}var n=new this.constructor(e,this.__opts);E.upsert(this,"_local/_pouch_dependentDbs",r).then(function(){t(null,{db:n})}).catch(t)}),m.prototype.destroy=E.adapterFun("destroy",function(e,t){function r(){n._destroy(e,function(e,r){return e?t(e):(n._destroyed=!0,n.emit("destroyed"),void t(null,r||{ok:!0}))})}"function"==typeof e&&(t=e,e={});var n=this,i=!("use_prefix"in n)||n.use_prefix;return"http"===n.type()?r():void n.get("_local/_pouch_dependentDbs",function(e,o){if(e)return 404!==e.status?t(e):r();var s=o.dependentDbs,a=n.constructor,u=Object.keys(s).map(function(e){var t=i?e.replace(new RegExp("^"+a.prefix),""):e;return new a(t,n.__opts).destroy()});O.all(u).then(r,t)})}),g.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},g.prototype.fail=function(e){this.failed=e,this.execute()},g.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},g.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},j(x,m),x.debug=S,x.adapters={},x.preferredAdapters=[],x.prefix="_pouch_";var I=new C.EventEmitter;k(x),x.adapter=function(e,t,r){t.valid()&&(x.adapters[e]=t,r&&x.preferredAdapters.push(e))},x.plugin=function(e){if("function"==typeof e)e(x);else{if("object"!=typeof e||0===Object.keys(e).length)throw new Error("Invalid plugin: object passed in is empty or not an object");Object.keys(e).forEach(function(t){x.prototype[t]=e[t]})}return x},x.defaults=function(e){function t(r,n){return this instanceof t?(n=n||{},r&&"object"==typeof r&&(n=r,r=n.name,delete n.name),n=E.jsExtend({},e,n),void x.call(this,r,n)):new t(r,n)}return j(t,x),t.preferredAdapters=x.preferredAdapters.slice(),Object.keys(x).forEach(function(e){e in t||(t[e]=x[e])}),t};var D="6.0.7";x.version=D,t.exports=x}).call(this,e("_process"))},{_process:230,argsarray:19,debug:128,events:137,inherits:143,"pouchdb-collections":193,"pouchdb-errors":195,"pouchdb-merge":222,"pouchdb-promise":223,"pouchdb-utils":228,"scope-eval":310}],195:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){Error.call(this,e.reason),this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}function o(e,t){function r(t){for(var r in e)"function"!=typeof e[r]&&(this[r]=e[r]);void 0!==t&&(this.reason=t)}return r.prototype=i.prototype,new r(t)}function s(e){if("object"!=typeof e){var t=e;e=v,e.data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}Object.defineProperty(r,"__esModule",{value:!0});var a=n(e("inherits"));a(i,Error),i.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var u=new i({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),c=new i({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),f=new i({status:404,error:"not_found",reason:"missing"}),l=new i({status:409,error:"conflict",reason:"Document update conflict"}),h=new i({status:400,error:"bad_request",reason:"_id field must contain a string"}),d=new i({status:412,error:"missing_id",reason:"_id is required for puts"}),p=new i({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),y=new i({status:412,error:"precondition_failed",reason:"Database not open"}),v=new i({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),b=new i({status:500,error:"badarg",reason:"Some query argument is invalid"}),m=new i({status:400,error:"invalid_request",reason:"Request was invalid"}),g=new i({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),_=new i({status:500,error:"doc_validation",reason:"Bad special document member"}),w=new i({status:400,error:"bad_request",reason:"Something wrong with the request"}),x=new i({status:400,error:"bad_request",reason:"Document must be a JSON object"}),k=new i({status:404,error:"not_found",reason:"Database not found"}),E=new i({status:500,error:"indexed_db_went_bad",reason:"unknown"}),S=new i({status:500,error:"web_sql_went_bad",reason:"unknown"}),j=new i({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),O=new i({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),A=new i({status:400,error:"bad_request",reason:"Invalid rev format"}),C=new i({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),R=new i({status:412,error:"missing_stub"}),B=new i({status:413,error:"invalid_url",reason:"Provided URL is invalid"});r.UNAUTHORIZED=u,r.MISSING_BULK_DOCS=c,r.MISSING_DOC=f,r.REV_CONFLICT=l,r.INVALID_ID=h,r.MISSING_ID=d,r.RESERVED_ID=p,r.NOT_OPEN=y,r.UNKNOWN_ERROR=v,r.BAD_ARG=b,r.INVALID_REQUEST=m,r.QUERY_PARSE_ERROR=g,r.DOC_VALIDATION=_,r.BAD_REQUEST=w,r.NOT_AN_OBJECT=x,r.DB_MISSING=k,r.WSQ_ERROR=S,r.LDB_ERROR=j,r.FORBIDDEN=O,r.INVALID_REV=A,r.FILE_EXISTS=C,r.MISSING_STUB=R,r.IDB_ERROR=E,r.INVALID_URL=B,r.createError=o,r.generateErrorFromResponse=s},{inherits:143}],196:[function(e,t,r){"use strict";function n(e){return null===e?String(e):"object"==typeof e||"function"==typeof e?c[d.call(e)]||"object":typeof e}function i(e){return null!==e&&e===e.window}function o(e){if(!e||"object"!==n(e)||e.nodeType||i(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var t;for(t in e);return void 0===t||p.call(e,t)}function s(e){return"function"===n(e)}function a(){for(var e=[],t=-1,r=arguments.length,n=new Array(r);++t<r;)n[t]=arguments[t];var i={};e.push({args:n,result:{container:i,key:"key"}});for(var o;o=e.pop();)u(e,o.args,o.result);return i.key}function u(e,t,r){var n,i,a,u,c,f,l,h=t[0]||{},d=1,p=t.length,v=!1,b=/\d+/;for("boolean"==typeof h&&(v=h,h=t[1]||{},d=2),"object"==typeof h||s(h)||(h={}),p===d&&(h=this,--d);d<p;d++)if(null!=(n=t[d])){l=y(n);for(i in n)if(!(i in Object.prototype)){if(l&&!b.test(i))continue;if(a=h[i],u=n[i],h===u)continue;v&&u&&(o(u)||(c=y(u)))?(c?(c=!1,f=a&&y(a)?a:[]):f=a&&o(a)?a:{},e.push({args:[v,f,u],result:{container:h,key:i}})):void 0!==u&&(y(n)&&s(u)||(h[i]=u))}}r.container[r.key]=h}for(var c={},f=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],l=0;l<f.length;l++){var h=f[l];c["[object "+h+"]"]=h.toLowerCase()}var d=c.toString,p=c.hasOwnProperty,y=Array.isArray||function(e){return"array"===n(e)};t.exports=a},{}],197:[function(e,t,r){"use strict";function n(e){if(!e)return"undefined";switch(typeof e){case"function":return e.toString();case"string":return e.toString();default:return JSON.stringify(e)}}var i=e("./upsert"),o=e("./utils"),s=o.Promise;t.exports=function(e){var t=e.db,r=e.viewName,a=e.map,u=e.reduce,c=e.temporary,f=e.pluginName,l=n(a)+n(u)+"undefined";if(!c&&t._cachedViews){var h=t._cachedViews[l];if(h)return s.resolve(h)}return t.info().then(function(e){function n(e){e.views=e.views||{};var t=r;t.indexOf("/")===-1&&(t=r+"/"+r);var n=e.views[t]=e.views[t]||{};if(!n[s])return n[s]=!0,e}var s=e.db_name+"-mrview-"+(c?"temp":o.MD5(l));return i(t,"_local/"+f,n).then(function(){return t.registerDependentDatabase(s).then(function(e){var r=e.db;r.auto_compaction=!0;var n={name:s,db:r,sourceDB:t,adapter:t.adapter,mapFun:a,reduceFun:u};return n.db.get("_local/lastSeq").catch(function(e){if(404!==e.status)throw e}).then(function(e){return n.seq=e?e.seq:0,c||(t._cachedViews=t._cachedViews||{},t._cachedViews[l]=n,n.db.on("destroyed",function(){delete t._cachedViews[l]})),n})})})})}},{"./upsert":200,"./utils":201}],198:[function(e,t,r){
(function(r){"use strict";function n(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,n)}catch(e){}}function i(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,i)}catch(e){}}function o(e){return e.indexOf("/")===-1?[e,e]:e.split("/")}function s(e){return 1===e.length&&/^1-/.test(e[0].rev)}function a(e,t){var r=m(e.key,t.key);return 0!==r?r:m(e.value,t.value)}function u(e,t,r){return r=r||0,"number"==typeof t?e.slice(r,t+r):r>0?e.slice(r):e}function c(e){var t=e.value,r=t&&"object"==typeof t&&t._id||e.id;return r}function f(e,t){try{e.emit("error",t)}catch(e){console.error("The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),console.error(t)}}function l(e,t,r){try{return{output:t.apply(null,r)}}catch(t){return f(e,t),{error:t}}}function h(e,t){var r=e.descending?"endkey":"startkey",i=e.descending?"startkey":"endkey";if("undefined"!=typeof e[r]&&"undefined"!=typeof e[i]&&m(e[r],e[i])>0)throw new n("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&e.reduce!==!1){if(e.include_docs)throw new n("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new n("Multi-key fetches for reduce views must use {group: true}")}if(e.group_level){if("number"!=typeof e.group_level)throw new n('Invalid value for integer: "'+e.group_level+'"');if(e.group_level<0)throw new n('Invalid value for positive integer: "'+e.group_level+'"')}}function d(e){return function(t){if(404===t.status)return e;throw t}}function p(e){function t(e,t,r){function n(){return s(l)?k.resolve(u):t.db.get(a).catch(d(u))}function i(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):k.resolve({rows:[]})}function o(e,t){for(var r=[],n={},i=0,o=t.rows.length;i<o;i++){var s=t.rows[i],a=s.doc;if(a&&(r.push(a),n[a._id]=!0,a._deleted=!f[a._id],!a._deleted)){var u=f[a._id];"value"in u&&(a.value=u.value)}}var c=Object.keys(f);return c.forEach(function(e){if(!n[e]){var t={_id:e},i=f[e];"value"in i&&(t.value=i.value),r.push(t)}}),e.keys=x.uniq(c.concat(e.keys)),r.push(e),r}var a="_local/doc_"+e,u={_id:a,keys:[]},c=r[e],f=c.indexableKeysToKeyValues,l=c.changes;return n().then(function(e){return i(e).then(function(t){return o(e,t)})})}function n(e,r,n){var i="_local/lastSeq";return e.db.get(i).catch(d({_id:i,seq:0})).then(function(i){var o=Object.keys(r);return k.all(o.map(function(n){return t(n,e,r)})).then(function(t){var r=x.flatten(t);return i.seq=n,r.push(i),e.db.bulkDocs({docs:r})})})}function f(e){var t="string"==typeof e?e:e.name,r=E[t];return r||(r=E[t]=new b),r}function p(e){return x.sequentialize(f(e),function(){return y(e)})()}function y(e){function t(e,t){var r={id:o._id,key:_(e)};"undefined"!=typeof t&&null!==t&&(r.value=_(t)),i.push(r)}function r(t,r){return function(){return n(e,t,r)}}var i,o,s=T(e.mapFun,t),u=e.seq||0,c=new b;return new k(function(t,n){function f(){c.finish().then(function(){e.seq=u,t()})}function h(){function t(e){n(e)}e.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:u,limit:j}).on("complete",function(t){var n=t.results;if(!n.length)return f();for(var d={},p=0,y=n.length;p<y;p++){var v=n[p];if("_"!==v.doc._id[0]){i=[],o=v.doc,o._deleted||l(e.sourceDB,s,[o]),i.sort(a);for(var b,_={},w=0,x=i.length;w<x;w++){var k=i[w],E=[k.key,k.id];0===m(k.key,b)&&E.push(w);var S=g(E);_[S]=k,b=k.key}d[v.doc._id]={indexableKeysToKeyValues:_,changes:v.changes}}u=v.seq}return c.add(r(d,u)),n.length<j?f():h()}).on("error",t)}h()})}function O(e,t,r){0===r.group_level&&delete r.group_level;var n=r.group||r.group_level,i=I(e.reduceFun),o=[],s=r.group_level;t.forEach(function(e){var t=o[o.length-1],r=n?e.key:null;return n&&Array.isArray(r)&&"number"==typeof s&&(r=r.length>s?r.slice(0,s):r),t&&0===m(t.key[0][0],r)?(t.key.push([r,e.id]),void t.value.push(e.value)):void o.push({key:[[r,e.id]],value:[e.value]})});for(var a=0,c=o.length;a<c;a++){var f=o[a],h=l(e.sourceDB,i,[f.key,f.value,!1]);if(h.error&&/BuiltInError/.test(h.error.constructor))throw h.error;f.value=h.error?null:h.output,f.key=f.key[0][0]}return{rows:u(o,r.limit,r.skip)}}function A(e,t){return x.sequentialize(f(e),function(){return C(e,t)})()}function C(e,t){function r(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return i=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),r=["id","key","value"];if(!(t<r||t>r))return e.doc.value}var n=v.parseIndexableString(e.doc._id);return{key:n[0],id:n[1],value:"value"in e.doc?e.doc.value:null}})})}function n(r){var n;if(n=o?O(e,r,t):{total_rows:i,offset:s,rows:r},t.include_docs){var a=x.uniq(r.map(c));return e.sourceDB.allDocs({keys:a,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}).then(function(e){var t={};return e.rows.forEach(function(e){e.doc&&(t["$"+e.id]=e.doc)}),r.forEach(function(e){var r=c(e),n=t["$"+r];n&&(e.doc=n)}),n})}return n}var i,o=e.reduceFun&&t.reduce!==!1,s=t.skip||0;"undefined"==typeof t.keys||t.keys.length||(t.limit=0,delete t.keys);var a=function(e){return e.reduce(function(e,t){return e.concat(t)})};if("undefined"!=typeof t.keys){var u=t.keys,f=u.map(function(e){var t={startkey:g([e]),endkey:g([e,{}])};return r(t)});return k.all(f).then(a).then(n)}var l={descending:t.descending};if("undefined"!=typeof t.startkey&&(l.startkey=g(t.descending?[t.startkey,{}]:[t.startkey])),"undefined"!=typeof t.endkey){var h=t.inclusive_end!==!1;t.descending&&(h=!h),l.endkey=g(h?[t.endkey,{}]:[t.endkey])}if("undefined"!=typeof t.key){var d=g([t.key]),p=g([t.key,{}]);l.descending?(l.endkey=d,l.startkey=p):(l.startkey=d,l.endkey=p)}return o||("number"==typeof t.limit&&(l.limit=t.limit),l.skip=s),r(l).then(n)}function R(e){return e.get("_local/"+P).then(function(t){var r={};Object.keys(t.views).forEach(function(e){var t=o(e),n="_design/"+t[0],i=t[1];r[n]=r[n]||{},r[n][i]=!0});var n={keys:Object.keys(r),include_docs:!0};return e.allDocs(n).then(function(n){var i={};n.rows.forEach(function(e){var n=e.key.substring(8);Object.keys(r[e.key]).forEach(function(r){var o=n+"/"+r;t.views[o]||(o=r);var s=Object.keys(t.views[o]),a=e.doc&&e.doc.views&&e.doc.views[r];s.forEach(function(e){i[e]=i[e]||a})})});var o=Object.keys(i).filter(function(e){return!i[e]}),s=o.map(function(t){return x.sequentialize(f(t),function(){return new e.constructor(t,e.__opts).destroy()})()});return k.all(s).then(function(){return{ok:!0}})})},d({ok:!0}))}function B(e,t,n){if("string"!=typeof t){h(n,t);var s={db:e,viewName:"temp_view/temp_view",map:t.map,reduce:t.reduce,temporary:!0,pluginName:P};return S.add(function(){return w(s).then(function(e){function t(){return e.db.destroy()}return x.fin(p(e).then(function(){return A(e,n)}),t)})}),S.finish()}var a=t,u=o(a),c=u[0],f=u[1];return e.get("_design/"+c).then(function(t){var o=t.views&&t.views[f];if(!o)throw new i("ddoc "+t._id+" has no view named "+f);D(t,f),h(n,o);var s={db:e,viewName:a,map:o.map,reduce:o.reduce,pluginName:P};return w(s).then(function(e){return"ok"===n.stale||"update_after"===n.stale?("update_after"===n.stale&&r.nextTick(function(){p(e)}),A(e,n)):p(e).then(function(){return A(e,n)})})})}var P=e.name,T=e.mapper,I=e.reducer,D=e.ddocValidator,M=function(e,t,r){var n=this;"function"==typeof t&&(r=t,t={}),t=x.extend(!0,{},t),"function"==typeof e&&(e={map:e});var i=k.resolve().then(function(){return B(n,e,t)});return x.promisedCallback(i,r),i},L=x.callbackify(function(){var e=this;return R(e)});return{query:M,viewCleanup:L}}var y,v=e("pouchdb-collate"),b=e("./taskqueue"),m=v.collate,g=v.toIndexableString,_=v.normalizeKey,w=e("./create-view");y="undefined"!=typeof console&&"function"==typeof console.log?Function.prototype.bind.call(console.log,console):function(){};var x=e("./utils"),k=x.Promise,E={},S=new b,j=50;x.inherits(n,Error),x.inherits(i,Error),t.exports=p}).call(this,e("_process"))},{"./create-view":197,"./taskqueue":199,"./utils":201,_process:230,"pouchdb-collate":191}],199:[function(e,t,r){"use strict";function n(){this.promise=new i(function(e){e()})}var i=e("./utils").Promise;n.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},n.prototype.finish=function(){return this.promise},t.exports=n},{"./utils":201}],200:[function(e,t,r){"use strict";var n=e("pouchdb-upsert").upsert;t.exports=function(e,t,r){return n.apply(e,[t,r])}},{"pouchdb-upsert":225}],201:[function(e,t,r){(function(t){"use strict";r.Promise=e("pouchdb-promise"),r.inherits=e("inherits"),r.extend=e("pouchdb-extend");var n=e("argsarray");r.promisedCallback=function(e,r){return r&&e.then(function(e){t.nextTick(function(){r(null,e)})},function(e){t.nextTick(function(){r(e)})}),e},r.callbackify=function(e){return n(function(t){var n=t.pop(),i=e.apply(this,t);return"function"==typeof n&&r.promisedCallback(i,n),i})},r.fin=function(e,t){return e.then(function(e){var r=t();return"function"==typeof r.then?r.then(function(){return e}):e},function(e){var r=t();if("function"==typeof r.then)return r.then(function(){throw e});throw e})},r.sequentialize=function(e,t){return function(){var r=arguments,n=this;return e.add(function(){return t.apply(n,r)})}},r.flatten=function(e){for(var t=[],r=0,n=e.length;r<n;r++)t=t.concat(e[r]);return t},r.uniq=function(e){for(var t={},r=0,n=e.length;r<n;r++)t["$"+e[r]]=!0;var i=Object.keys(t),o=new Array(i.length);for(r=0,n=i.length;r<n;r++)o[r]=i[r].substring(1);return o};var i=e("crypto"),o=e("spark-md5");r.MD5=function(e){return t.browser?o.hash(e):i.createHash("md5").update(e).digest("hex")}}).call(this,e("_process"))},{_process:230,argsarray:19,crypto:30,inherits:143,"pouchdb-extend":196,"pouchdb-promise":216,"spark-md5":312}],202:[function(e,t,r){"use strict";function n(e,t,r){t=a(t),e.request({method:"POST",url:"_index",body:t},r)}function i(e,t,r){e.request({method:"POST",url:"_find",body:t},r)}function o(e,t){e.request({method:"GET",url:"_index"},t)}function s(e,t,r){var n=t.ddoc,i=t.type||"json",o=t.name;if(!n)return r(new Error("you must provide an index's ddoc"));if(!o)return r(new Error("you must provide an index's name"));var s="_index/"+[n,i,o].map(encodeURIComponent).join("/");e.request({method:"DELETE",url:s},r)}var a=e("../../massageCreateIndexRequest");r.createIndex=n,r.find=i,r.getIndexes=o,r.deleteIndex=s},{"../../massageCreateIndexRequest":213}],203:[function(e,t,r){"use strict";function n(e,t){return function(r){for(var n=[],i=0,o=e.length;i<o;i++){for(var s=p(e[i]),a=r,u=0,c=s.length;u<c;u++){var f=s[u];if(a=a[f],!a)break}n.push(a)}t(n)}}function i(e,t){var r=p(e);return function(e){for(var n=e,i=0,o=r.length;i<o;i++){var s=r[i];if(n=n[s],!n)return}t(n)}}function o(e,t){return function(r){t(r[e])}}function s(e,t){return function(r){for(var n=[],i=0,o=e.length;i<o;i++)n.push(r[e[i]]);t(n)}}function a(e){for(var t=0,r=e.length;t<r;t++){var n=e[t];if(n.indexOf(".")!==-1)return!1}return!0}function u(e,t){var r=a(e),u=1===e.length;return r?u?o(e[0],t):s(e,t):u?i(e[0],t):n(e,t)}function c(e,t){var r=Object.keys(e.fields);return u(r,t)}function f(){throw new Error("reduce not supported")}function l(e,t){var r=e.views[t];if(!r.map||!r.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")}var h=e("./utils"),d=e("../../abstract-mapreduce"),p=h.parseField,y=d({name:"indexes",mapper:c,reducer:f,ddocValidator:l});t.exports=y},{"../../abstract-mapreduce":198,"./utils":211}],204:[function(e,t,r){"use strict";function n(e,t,r){return a.upsert.call(e,t,r)}function i(e,t){function r(e){return e._rev&&"query"!==e.language&&(y=!0),e.language="query",e.views=e.views||{},!(v=!!e.views[c])&&(e.views[c]={map:{fields:o.mergeObjects(t.index.fields)},reduce:"_count",options:{def:i}},e)}t=h(t);var i=o.clone(t.index);t.index=l(t.index),f(t.index);var a=o.MD5(JSON.stringify(t)),c=t.name||"idx-"+a,d=t.ddoc||"idx-"+a,p="_design/"+d,y=!1,v=!1;return s("creating index",p),n(e,p,r).then(function(){if(y)throw new Error('invalid language for ddoc with id "'+p+'" (should be "query")')}).then(function(){var t=d+"/"+c;return u.query.call(e,t,{limit:0,reduce:!1}).then(function(){return{id:p,name:c,result:v?"exists":"created"}})})}var o=e("../../../utils"),s=o.log,a=e("pouchdb-upsert"),u=e("../abstract-mapper"),c=e("../utils"),f=c.validateIndex,l=c.massageIndexDef,h=e("../../../massageCreateIndexRequest");t.exports=i},{"../../../massageCreateIndexRequest":213,"../../../utils":214,"../abstract-mapper":203,"../utils":211,"pouchdb-upsert":225}],205:[function(e,t,r){"use strict";function n(e,t){function r(e){return 1===Object.keys(e.views).length&&e.views[s]?{_id:n,_deleted:!0}:(delete e.views[s],e)}if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");var n=t.ddoc,s=t.name;return o(e,n,r).then(function(){return i.viewCleanup.apply(e)}).then(function(){return{ok:!0}})}var i=e("../abstract-mapper"),o=e("../../../abstract-mapreduce/upsert");t.exports=n},{"../../../abstract-mapreduce/upsert":200,"../abstract-mapper":203}],206:[function(e,t,r){"use strict";function n(e){function t(t){return e.map(function(e){var r=w(e),n=k(r),i=S(t,n);return i})}return function(e,r){var n=t(e.doc),i=t(r.doc),o=m(n,i);return 0!==o?o:E.compare(e.doc._id,r.doc._id)}}function i(e,t,r){if(e=e.filter(function(e){return o(e.doc,t.selector,r)}),t.sort){var i=n(t.sort);e=e.sort(i),"string"!=typeof t.sort[0]&&"desc"===x(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var s=t.skip||0,a=("limit"in t?t.limit:e.length)+s;e=e.slice(s,a)}return e}function o(e,t,r){return r.every(function(r){var n=t[r],i=k(r),o=S(e,i);return _(r)?a(r,n,e):s(n,e,i,o)})}function s(e,t,r,n){return!e||Object.keys(e).every(function(i){var o=e[i];return u(i,t,o,r,n)})}function a(e,t,r){return"$or"===e?t.some(function(e){return o(r,e,Object.keys(e))}):"$not"===e?!o(r,t,Object.keys(t)):!t.find(function(e){return o(r,e,Object.keys(e))})}function u(e,t,r,n,i){if(!j[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type or $all');return j[e](t,r,n,i)}function c(e){return"undefined"!=typeof e&&null!==e}function f(e){return"undefined"!=typeof e}function l(e,t){var r=t[0],n=t[1];if(0===r)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(r,10)!==r)throw new Error("Divisor is not an integer");if(parseInt(n,10)!==n)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%r===n}function h(e,t){return t.some(function(t){return e instanceof Array?e.indexOf(t)>-1:e===t})}function d(e,t){return t.every(function(t){return e.indexOf(t)>-1})}function p(e,t){return e.length===t}function y(e,t){var r=new RegExp(t);return r.test(e)}function v(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}var b=e("is-array"),m=e("pouchdb-collate").collate,g=e("../utils"),_=g.isCombinationalField,w=g.getKey,x=g.getValue,k=g.parseField,E=e("../../../utils"),S=E.getFieldFromDoc,j={$elemMatch:function(e,t,r,n){return!!b(n)&&(0!==n.length&&("object"==typeof n[0]?n.some(function(e){return o(e,t,Object.keys(t))}):n.some(function(n){return s(t,e,r,n)})))},$eq:function(e,t,r,n){return f(n)&&0===m(n,t)},$gte:function(e,t,r,n){return f(n)&&m(n,t)>=0},$gt:function(e,t,r,n){return f(n)&&m(n,t)>0},$lte:function(e,t,r,n){return f(n)&&m(n,t)<=0},$lt:function(e,t,r,n){return f(n)&&m(n,t)<0},$exists:function(e,t,r,n){return t?f(n):!f(n)},$mod:function(e,t,r,n){return c(n)&&l(n,t)},$ne:function(e,t,r,n){return t.every(function(e){return 0!==m(n,e)})},$in:function(e,t,r,n){return c(n)&&h(n,t)},$nin:function(e,t,r,n){return c(n)&&!h(n,t)},$size:function(e,t,r,n){return c(n)&&p(n,t)},$all:function(e,t,r,n){return b(n)&&d(n,t)},$regex:function(e,t,r,n){return c(n)&&y(n,t)},$type:function(e,t,r,n){return v(n,t)}};t.exports=i},{"../../../utils":214,"../utils":211,"is-array":144,"pouchdb-collate":191}],207:[function(e,t,r){"use strict";function n(e){return e.ddoc.substring(8)+"/"+e.name}function i(e,t){var r=a(t);return r.descending?("endkey"in r&&"string"!=typeof r.endkey&&(r.endkey=""),"startkey"in r&&"string"!=typeof r.startkey&&(r.limit=0)):("startkey"in r&&"string"!=typeof r.startkey&&(r.startkey=""),"endkey"in r&&"string"!=typeof r.endkey&&(r.limit=0)),"key"in r&&"string"!=typeof r.key&&(r.limit=0),e.allDocs(r)}function o(e,t){return t.selector&&(t.selector=p(t.selector)),t.sort&&(t.sort=y(t.sort)),b(t),u(e).then(function(r){var o=l(t,r.indexes),a=o.index;m(t,a);var u=s.extend(!0,{include_docs:!0,reduce:!1},o.queryOpts);if("startkey"in u&&"endkey"in u&&c(u.startkey,u.endkey)>0)return{docs:[]};var h=t.sort&&"string"!=typeof t.sort[0]&&"desc"===v(t.sort[0]);return h&&(u.descending=!0,u=g(u)),o.inMemoryFields.length||("limit"in t&&(u.limit=t.limit),"skip"in t&&(u.skip=t.skip)),w.resolve().then(function(){if("_all_docs"===a.name)return i(e,u);var t=n(a);return f.query.call(e,t,u)}).then(function(e){u.inclusive_start===!1&&(e.rows=_(e.rows,u.startkey,a)),o.inMemoryFields.length&&(e.rows=d(e.rows,t,o.inMemoryFields));var r={docs:e.rows.map(function(e){var r=e.doc;return t.fields?s.pick(r,t.fields):r})};return a.defaultUsed&&(r.warning="no matching index found, create an index to optimize query time"),r})})}var s=e("../../../utils"),a=s.clone,u=e("../get-indexes"),c=e("pouchdb-collate").collate,f=e("../abstract-mapper"),l=e("./query-planner"),h=e("../utils"),d=e("./in-memory-filter"),p=h.massageSelector,y=h.massageSort,v=h.getValue,b=h.validateFindRequest,m=h.validateSort,g=h.reverseOptions,_=h.filterInclusiveStart,w=s.Promise;t.exports=o},{"../../../utils":214,"../abstract-mapper":203,"../get-indexes":209,"../utils":211,"./in-memory-filter":206,"./query-planner":208,"pouchdb-collate":191}],208:[function(e,t,r){"use strict";function n(e,t){for(var r=e.def.fields.map(S),n=0,i=r.length;n<i;n++){var o=r[n];if(t===o)return!0}return!1}function i(e,t){var r=e[t],n=S(r);return"$eq"!==n}function o(e,t){var r=t.def.fields.map(S);return e.slice().sort(function(e,t){var n=r.indexOf(e),i=r.indexOf(t);return n===-1&&(n=Number.MAX_VALUE),i===-1&&(i=Number.MAX_VALUE),x.compare(n,i)})}function s(e,t,r){r=o(r,e);for(var s=!1,a=0,u=r.length;a<u;a++){var c=r[a];if(s||!n(e,c))return r.slice(a);a<u-1&&i(t,c)&&(s=!0)}return[]}function a(e){var t=[];return Object.keys(e).forEach(function(r){var n=e[r];Object.keys(n).forEach(function(e){"$ne"===e&&t.push(r)})}),t}function u(e,t,r,n){var i=x.flatten(e,s(t,r,n),a(r));return o(x.uniq(i),t)}function c(e,t,r){if(t){var n=x.oneArrayIsStrictSubArrayOfOther(t,e),i=x.oneArrayIsSubArrayOfOther(r,e);return n&&i}return x.oneSetIsSubArrayOfOther(r,e)}function f(e){return C.indexOf(e)===-1}function l(e,t){var r=e[0],n=t[r],i=Object.keys(n).some(function(e){return!f(e)});if(!i)return!1;var o=1===Object.keys(n).length&&"$ne"===S(n);return!o}function h(e,t,r,n){var i=e.def.fields.map(S),o=c(i,t,r);return!!o&&l(i,n)}function d(e,t,r,n){return n.reduce(function(n,i){var o=h(i,r,t,e);return o&&n.push(i),n},[])}function p(e,t,r,n){function i(e){for(var t=e.def.fields.map(S),r=0,n=0,i=t.length;n<i;n++){var o=t[n];a[o]&&r++}return r}var o=d(e,t,r,n);if(0===o.length){var s=n[0];return s.defaultUsed=!0,s}if(1===o.length)return o[0];var a=x.arrayToObject(t);return x.max(o,i)}function y(e,t){switch(e){case"$eq":return{key:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}function v(e,t){var r,n=S(t.def.fields[0]),i=e[n],o=[],s=Object.keys(i);return s.forEach(function(e){if(f(e))return void o.push(n);var t=i[e],s=y(e,t);r=r?x.mergeObjects([r,s]):s}),{queryOpts:r,inMemoryFields:o}}function b(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}function m(e,t){function r(e){n!==!1&&a.push(O),i!==!1&&u.push(A),s=o.slice(e)}for(var n,i,o=t.def.fields.map(S),s=[],a=[],u=[],c=0,f=o.length;c<f;c++){var l=o[c],h=e[l];if(!h){r(c);break}if(c>0){if("$ne"in h){r(c);break}var d="$gt"in h||"$gte"in h||"$lt"in h||"$lte"in h,p=Object.keys(e[o[c-1]]),y=x.arrayEquals(p,["$eq"]),v=x.arrayEquals(p,Object.keys(h)),m=d&&!y&&!v;if(m){r(c);break}}for(var g=Object.keys(h),_=null,w=0;w<g.length;w++){var k=g[w],E=h[k],j=b(k,E);_=_?x.mergeObjects([_,j]):j}a.push("startkey"in _?_.startkey:O),u.push("endkey"in _?_.endkey:A),"inclusive_start"in _&&(n=_.inclusive_start),"inclusive_end"in _&&(i=_.inclusive_end)}var C={startkey:a,endkey:u};return"undefined"!=typeof n&&(C.inclusive_start=n),"undefined"!=typeof i&&(C.inclusive_end=i),{queryOpts:C,inMemoryFields:s}}function g(){return{queryOpts:{startkey:null},inMemoryFields:[]}}function _(e,t){return t.defaultUsed?g(e,t):1===t.def.fields.length?v(e,t):m(e,t)}function w(e,t){k("planning query",e);var r=e.selector,n=e.sort,i=j(r,n),o=i.fields,s=i.sortOrder,a=p(r,o,s,t),c=_(r,a),f=c.queryOpts,l=c.inMemoryFields,h=u(l,a,r,o),d={queryOpts:f,index:a,inMemoryFields:h};return k("query plan",d),d}var x=e("../../../utils"),k=x.log,E=e("../utils"),S=E.getKey,j=E.getUserFields,O=null,A={"":{}},C=["$eq","$gt","$gte","$lt","$lte"];t.exports=w},{"../../../utils":214,"../utils":211}],209:[function(e,t,r){"use strict";function n(e){return e.allDocs({startkey:"_design/",endkey:"_design/",include_docs:!0}).then(function(e){var t={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return t.indexes=i.flatten(t.indexes,e.rows.filter(function(e){return"query"===e.doc.language}).map(function(e){var t=void 0!==e.doc.views?Object.keys(e.doc.views):[];return t.map(function(t){var r=e.doc.views[t];return{ddoc:e.id,name:t,type:"json",def:s(r.options.def)}})})),t.indexes.sort(function(e,t){return i.compare(e.name,t.name)}),t.total_rows=t.indexes.length,t})}var i=e("../../../utils"),o=e("../utils"),s=o.massageIndexDef;t.exports=n},{"../../../utils":214,"../utils":211}],210:[function(e,t,r){"use strict";var n=e("../../utils"),i=n.callbackify;r.createIndex=i(e("./create-index")),r.find=i(e("./find")),r.getIndexes=i(e("./get-indexes")),r.deleteIndex=i(e("./delete-index"))},{"../../utils":214,"./create-index":204,"./delete-index":205,"./find":207,"./get-indexes":209}],211:[function(e,t,r){"use strict";function n(e){return Object.keys(e)[0]}function i(e){return e[n(e)]}function o(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map(function(e){if("string"==typeof e){var t={};return t[e]="asc",t}return e})}function s(e){return k.indexOf(e)>-1}function a(e,t,r){"undefined"==typeof r.$eq&&("undefined"!=typeof r.$gte?"$gte"===e?t>r.$gte&&(r.$gte=t):t>=r.$gte&&(delete r.$gte,r.$gt=t):"undefined"!=typeof r.$gt?"$gte"===e?t>r.$gt&&(delete r.$gt,r.$gte=t):t>r.$gt&&(r.$gt=t):r[e]=t)}function u(e,t,r){"undefined"==typeof r.$eq&&("undefined"!=typeof r.$lte?"$lte"===e?t<r.$lte&&(r.$lte=t):t<=r.$lte&&(delete r.$lte,r.$lt=t):"undefined"!=typeof r.$lt?"$lte"===e?t<r.$lt&&(delete r.$lt,r.$lte=t):t<r.$lt&&(r.$lt=t):r[e]=t)}function c(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}function f(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}function l(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(r){var n=e[r];if("object"!=typeof n&&(n={$eq:n}),s(r))n instanceof Array?t[r]=n.map(function(e){return l([e])}):t[r]=l([n]);else{var i=t[r]=t[r]||{};Object.keys(n).forEach(function(e){var t=n[e];return"$gt"===e||"$gte"===e?a(e,t,i):"$lt"===e||"$lte"===e?u(e,t,i):"$ne"===e?c(t,i):"$eq"===e?f(t,i):void(i[e]=t)})}})}),t}function h(e){var t=w.clone(e),r=!1;"$and"in t&&(t=l(t.$and),r=!0),"$not"in t&&(t.$not=l([t.$not]));for(var n=Object.keys(t),i=0;i<n.length;i++){var o=n[i],s=t[o];"object"!=typeof s||null===s?s={$eq:s}:"$ne"in s&&!r&&(s.$ne=[s.$ne]),t[o]=s}return t}function d(e){return e.fields=e.fields.map(function(e){if("string"==typeof e){var t={};return t[e]="asc",t}return e}),e}function p(e,t){for(var r=[],i=0;i<t.def.fields.length;i++){var o=n(t.def.fields[i]);r.push(e[o])}return r}function y(e,t,r){for(var n=r.def.fields,i=0,o=e.length;i<o;i++){var s=e[i],a=p(s.doc,r);if(1===n.length)a=a[0];else for(;a.length>t.length;)a.pop();if(Math.abs(x.collate(a,t))>0)break}return i>0?e.slice(i):e}function v(e){var t=w.clone(e);return delete t.startkey,delete t.endkey,delete t.inclusive_start,delete t.inclusive_end,"endkey"in e&&(t.startkey=e.endkey),"startkey"in e&&(t.endkey=e.startkey),"inclusive_start"in e&&(t.inclusive_end=e.inclusive_start),"inclusive_end"in e&&(t.inclusive_start=e.inclusive_end),t}function b(e){var t=e.fields.filter(function(e){return"asc"===i(e)});if(0!==t.length&&t.length!==e.fields.length)throw new Error("unsupported mixed sorting")}function m(e,t){if(t.defaultUsed&&e.sort){var r=e.sort.filter(function(e){return"_id"!==Object.keys(e)[0]}).map(function(e){return Object.keys(e)[0]});if(r.length>0)throw new Error('Cannot sort on field(s) "'+r.join(",")+'" when using the default index')}t.defaultUsed}function g(e){if("object"!=typeof e.selector)throw new Error("you must provide a selector when you find()")}function _(e,t){var r,i=Object.keys(e),o=t?t.map(n):[];return r=i.length>=o.length?i:o,0===o.length?{fields:r}:(r=r.sort(function(e,t){var r=o.indexOf(e);r===-1&&(r=Number.MAX_VALUE);var n=o.indexOf(t);return n===-1&&(n=Number.MAX_VALUE),r<n?-1:r>n?1:0}),{fields:r,sortOrder:t.map(n)})}var w=e("../../utils"),x=e("pouchdb-collate"),k=["$or","$nor","$not"];t.exports={getKey:n,getValue:i,massageSort:o,massageSelector:h,validateIndex:b,validateFindRequest:g,validateSort:m,reverseOptions:v,filterInclusiveStart:y,massageIndexDef:d,parseField:w.parseField,getUserFields:_,isCombinationalField:s}},{"../../utils":214,"pouchdb-collate":191}],212:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./adapters/http"),o=e("./adapters/local"),s={};s.createIndex=n.toPromise(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to create"));var r="http"===this.type()?i:o;r.createIndex(this,e,t)}),s.find=n.toPromise(function(e,t){if("undefined"==typeof t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to find()"));var r="http"===this.type()?i:o;r.find(this,e,t)}),s.getIndexes=n.toPromise(function(e){var t="http"===this.type()?i:o;t.getIndexes(this,e)}),s.deleteIndex=n.toPromise(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to delete"));var r="http"===this.type()?i:o;r.deleteIndex(this,e,t)}),t.exports=s,"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(s)},{"./adapters/http":202,"./adapters/local":210,"./utils":214}],213:[function(e,t,r){"use strict";var n=e("./utils"),i=n.clone;t.exports=function(e){return e=i(e),e.index||(e.index={}),["type","name","ddoc"].forEach(function(t){e.index[t]&&(e[t]=e.index[t],delete e.index[t])}),e.fields&&(e.index.fields=e.fields,delete e.fields),e.type||(e.type="json"),e}},{"./utils":214}],214:[function(e,t,r){(function(t){"use strict";var n=e("pouchdb-promise");r.once=function(e){var t=!1;return r.getArguments(function(r){if(t)throw console.trace(),new Error("once called  more than once");t=!0,e.apply(this,r)})},r.getArguments=function(e){return function(){for(var t=arguments.length,r=new Array(t),n=-1;++n<t;)r[n]=arguments[n];return e.call(this,r)}},r.toPromise=function(e){return r.getArguments(function(i){var o,s=this,a="function"==typeof i[i.length-1]&&i.pop();a&&(o=function(e,r){t.nextTick(function(){a(e,r)})});var u=new n(function(t,n){try{var o=r.once(function(e,r){e?n(e):t(r)});i.push(o),e.apply(s,i)}catch(e){n(e)}});return o&&u.then(function(e){o(null,e)},o),u.cancel=function(){return this},u})},r.inherits=e("inherits"),r.Promise=n,r.clone=function(e){return r.extend(!0,{},e)},r.extend=e("pouchdb-extend"),r.callbackify=function(e){return r.getArguments(function(t){var n=t.pop(),i=e.apply(this,t);return r.promisedCallback(i,n),i})},r.promisedCallback=function(e,r){return e.then(function(e){t.nextTick(function(){r(null,e)})},function(e){t.nextTick(function(){r(e)})}),e};var i=e("crypto"),o=e("spark-md5");r.MD5=function(e){return t.browser?o.hash(e):i.createHash("md5").update(e).digest("hex")},r.flatten=r.getArguments(function(e){for(var t=[],n=0,i=e.length;n<i;n++){var o=e[n];Array.isArray(o)?t=t.concat(r.flatten.apply(null,o)):t.push(o)}return t}),r.mergeObjects=function(e){for(var t={},n=0,i=e.length;n<i;n++)t=r.extend(!0,t,e[n]);return t},r.getFieldFromDoc=function(e,t){for(var r=e,n=0,i=t.length;n<i;n++){var o=t[n];if(r=r[o],!r)break}return r},r.setFieldInDoc=function(e,t,r){for(var n=0,i=t.length;n<i-1;n++){var o=t[n];e=e[o]={}}e[t[i-1]]=r},r.parseField=function(e){for(var t=[],r="",n=0,i=e.length;n<i;n++){var o=e[n];"."===o?n>0&&"\\"===e[n-1]?r=r.substring(0,r.length-1)+".":(t.push(r),r=""):r+=o}return t.push(r),t},r.pick=function(e,t){for(var n={},i=0,o=t.length;i<o;i++){var s=r.parseField(t[i]),a=r.getFieldFromDoc(e,s);"undefined"!=typeof a&&r.setFieldInDoc(n,s,a)}return n},r.oneArrayIsSubArrayOfOther=function(e,t){for(var r=0,n=Math.min(e.length,t.length);r<n;r++)if(e[r]!==t[r])return!1;return!0},r.oneArrayIsStrictSubArrayOfOther=function(e,t){return!(e.length>t.length)&&r.oneArrayIsSubArrayOfOther(e,t)},r.oneSetIsSubArrayOfOther=function(e,t){e=e.slice();for(var r=0,n=t.length;r<n;r++){var i=t[r];if(!e.length)break;var o=e.indexOf(i);if(o===-1)return!1;e.splice(o,1)}return!0},r.compare=function(e,t){return e<t?-1:e>t?1:0},r.arrayToObject=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e[r]]=!0;return t},r.max=function(e,t){for(var r=null,n=-1,i=0,o=e.length;i<o;i++){var s=e[i],a=t(s);a>n&&(n=a,r=s)}return r},r.arrayEquals=function(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0},r.uniq=function(e){for(var t={},r=0;r<e.length;r++)t["$"+e[r]]=!0;return Object.keys(t).map(function(e){return e.substring(1)})},r.log=e("debug")("pouchdb:find")}).call(this,e("_process"))},{_process:230,crypto:30,debug:128,inherits:143,"pouchdb-extend":196,"pouchdb-promise":216,"spark-md5":312}],215:[function(e,t,r){arguments[4][162][0].apply(r,arguments)},{dup:162,immediate:142}],216:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=n(e("lie")),o="function"==typeof Promise?Promise:i;t.exports=o},{lie:215}],217:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){return Object.keys(e).sort(u.collate).reduce(function(t,r){return t[r]=e[r],t},{})}function o(e,t,r){var n=r.doc_ids?r.doc_ids.sort(u.collate):"",o=r.filter?r.filter.toString():"",c="",f="";return r.filter&&r.query_params&&(c=JSON.stringify(i(r.query_params))),r.filter&&"_view"===r.filter&&(f=r.view.toString()),s.all([e.id(),t.id()]).then(function(e){var t=e[0]+e[1]+o+f+c+n;return new s(function(e){a.binaryMd5(t,e)})}).then(function(e){return e=e.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+e})}var s=n(e("pouchdb-promise")),a=e("pouchdb-md5"),u=e("pouchdb-collate");t.exports=o},{"pouchdb-collate":218,"pouchdb-md5":220,"pouchdb-promise":223}],218:[function(e,t,r){arguments[4][190][0].apply(r,arguments)},{dup:190}],219:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){try{
return JSON.parse(e)}catch(t){return a.parse(e)}}function o(e){return e.length<5e4?JSON.parse(e):i(e)}function s(e){try{return JSON.stringify(e)}catch(t){return a.stringify(e)}}Object.defineProperty(r,"__esModule",{value:!0});var a=n(e("vuvuzela"));r.safeJsonParse=o,r.safeJsonStringify=s},{vuvuzela:341}],220:[function(e,t,r){(function(t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){return f.btoa(e)}function o(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.slice(t,r)}function s(e,t,r,n,i){(r>0||n<t.size)&&(t=o(t,r,n)),f.readAsArrayBuffer(t,function(t){e.append(t),i()})}function a(e,t,r,n,i){(r>0||n<t.length)&&(t=t.substring(r,n)),e.appendBinary(t),i()}function u(e,t){function r(){h(o)}function n(){var e=v.end(!0),r=i(e);t(r),v.destroy()}function o(){var t=y*f,i=t+f;y++,y<p?b(v,e,t,i,r):b(v,e,t,i,n)}var u="string"==typeof e,c=u?e.length:e.size,f=Math.min(d,c),p=Math.ceil(c/f),y=0,v=u?new l:new l.ArrayBuffer,b=u?a:s;o()}function c(e){return l.hash(e)}Object.defineProperty(r,"__esModule",{value:!0});var f=e("pouchdb-binary-utils"),l=n(e("spark-md5")),h=t.setImmediate||t.setTimeout,d=32768;r.binaryMd5=u,r.stringMd5=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pouchdb-binary-utils":188,"spark-md5":221}],221:[function(e,t,r){!function(e){if("object"==typeof r)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var n;try{n=window}catch(e){n=self}n.SparkMD5=e()}}(function(e){"use strict";function t(e,t,r,n,i,o){return t=g(g(t,e),g(n,o)),g(t<<i|t>>>32-i,r)}function r(e,r,n,i,o,s,a){return t(r&n|~r&i,e,r,o,s,a)}function n(e,r,n,i,o,s,a){return t(r&i|n&~i,e,r,o,s,a)}function i(e,r,n,i,o,s,a){return t(r^n^i,e,r,o,s,a)}function o(e,r,n,i,o,s,a){return t(n^(r|~i),e,r,o,s,a)}function s(e,t){var s=e[0],a=e[1],u=e[2],c=e[3];s=r(s,a,u,c,t[0],7,-680876936),c=r(c,s,a,u,t[1],12,-389564586),u=r(u,c,s,a,t[2],17,606105819),a=r(a,u,c,s,t[3],22,-1044525330),s=r(s,a,u,c,t[4],7,-176418897),c=r(c,s,a,u,t[5],12,1200080426),u=r(u,c,s,a,t[6],17,-1473231341),a=r(a,u,c,s,t[7],22,-45705983),s=r(s,a,u,c,t[8],7,1770035416),c=r(c,s,a,u,t[9],12,-1958414417),u=r(u,c,s,a,t[10],17,-42063),a=r(a,u,c,s,t[11],22,-1990404162),s=r(s,a,u,c,t[12],7,1804603682),c=r(c,s,a,u,t[13],12,-40341101),u=r(u,c,s,a,t[14],17,-1502002290),a=r(a,u,c,s,t[15],22,1236535329),s=n(s,a,u,c,t[1],5,-165796510),c=n(c,s,a,u,t[6],9,-1069501632),u=n(u,c,s,a,t[11],14,643717713),a=n(a,u,c,s,t[0],20,-373897302),s=n(s,a,u,c,t[5],5,-701558691),c=n(c,s,a,u,t[10],9,38016083),u=n(u,c,s,a,t[15],14,-660478335),a=n(a,u,c,s,t[4],20,-405537848),s=n(s,a,u,c,t[9],5,568446438),c=n(c,s,a,u,t[14],9,-1019803690),u=n(u,c,s,a,t[3],14,-187363961),a=n(a,u,c,s,t[8],20,1163531501),s=n(s,a,u,c,t[13],5,-1444681467),c=n(c,s,a,u,t[2],9,-51403784),u=n(u,c,s,a,t[7],14,1735328473),a=n(a,u,c,s,t[12],20,-1926607734),s=i(s,a,u,c,t[5],4,-378558),c=i(c,s,a,u,t[8],11,-2022574463),u=i(u,c,s,a,t[11],16,1839030562),a=i(a,u,c,s,t[14],23,-35309556),s=i(s,a,u,c,t[1],4,-1530992060),c=i(c,s,a,u,t[4],11,1272893353),u=i(u,c,s,a,t[7],16,-155497632),a=i(a,u,c,s,t[10],23,-1094730640),s=i(s,a,u,c,t[13],4,681279174),c=i(c,s,a,u,t[0],11,-358537222),u=i(u,c,s,a,t[3],16,-722521979),a=i(a,u,c,s,t[6],23,76029189),s=i(s,a,u,c,t[9],4,-640364487),c=i(c,s,a,u,t[12],11,-421815835),u=i(u,c,s,a,t[15],16,530742520),a=i(a,u,c,s,t[2],23,-995338651),s=o(s,a,u,c,t[0],6,-198630844),c=o(c,s,a,u,t[7],10,1126891415),u=o(u,c,s,a,t[14],15,-1416354905),a=o(a,u,c,s,t[5],21,-57434055),s=o(s,a,u,c,t[12],6,1700485571),c=o(c,s,a,u,t[3],10,-1894986606),u=o(u,c,s,a,t[10],15,-1051523),a=o(a,u,c,s,t[1],21,-2054922799),s=o(s,a,u,c,t[8],6,1873313359),c=o(c,s,a,u,t[15],10,-30611744),u=o(u,c,s,a,t[6],15,-1560198380),a=o(a,u,c,s,t[13],21,1309151649),s=o(s,a,u,c,t[4],6,-145523070),c=o(c,s,a,u,t[11],10,-1120210379),u=o(u,c,s,a,t[2],15,718787259),a=o(a,u,c,s,t[9],21,-343485551),e[0]=g(s,e[0]),e[1]=g(a,e[1]),e[2]=g(u,e[2]),e[3]=g(c,e[3])}function a(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function u(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function c(e){var t,r,n,i,o,u,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)s(f,a(e.substring(t-64,t)));for(e=e.substring(t-64),r=e.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(s(f,n),t=0;t<16;t+=1)n[t]=0;return i=8*c,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),u=parseInt(i[1],16)||0,n[14]=o,n[15]=u,s(f,n),f}function f(e){var t,r,n,i,o,a,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)s(f,u(e.subarray(t-64,t)));for(e=t-64<c?e.subarray(t-64):new Uint8Array(0),r=e.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)n[t>>2]|=e[t]<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(s(f,n),t=0;t<16;t+=1)n[t]=0;return i=8*c,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),a=parseInt(i[1],16)||0,n[14]=o,n[15]=a,s(f,n),f}function l(e){var t,r="";for(t=0;t<4;t+=1)r+=_[e>>8*t+4&15]+_[e>>8*t&15];return r}function h(e){var t;for(t=0;t<e.length;t+=1)e[t]=l(e[t]);return e.join("")}function d(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function p(e,t){var r,n=e.length,i=new ArrayBuffer(n),o=new Uint8Array(i);for(r=0;r<n;r+=1)o[r]=e.charCodeAt(r);return t?o:i}function y(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function v(e,t,r){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e)),n.set(new Uint8Array(t),e.byteLength),r?n:n.buffer}function b(e){var t,r=[],n=e.length;for(t=0;t<n-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function m(){this.reset()}var g=function(e,t){return e+t&4294967295},_=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==h(c("hello"))&&(g=function(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||!function(){function t(e,t){return e=0|e||0,e<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(r,n){var i,o,s,a,u=this.byteLength,c=t(r,u),f=u;return n!==e&&(f=t(n,u)),c>f?new ArrayBuffer(0):(i=f-c,o=new ArrayBuffer(i),s=new Uint8Array(o),a=new Uint8Array(this,c,i),s.set(a),o)}}(),m.prototype.append=function(e){return this.appendBinary(d(e)),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,r=this._buff.length;for(t=64;t<=r;t+=64)s(this._hash,a(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},m.prototype.end=function(e){var t,r,n=this._buff,i=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),r=h(this._hash),e&&(r=b(r)),this.reset(),r},m.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},m.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},m.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},m.prototype._finish=function(e,t){var r,n,i,o=t;if(e[o>>2]|=128<<(o%4<<3),o>55)for(s(this._hash,e),o=0;o<16;o+=1)e[o]=0;r=8*this._length,r=r.toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(r[2],16),i=parseInt(r[1],16)||0,e[14]=n,e[15]=i,s(this._hash,e)},m.hash=function(e,t){return m.hashBinary(d(e),t)},m.hashBinary=function(e,t){var r=c(e),n=h(r);return t?b(n):n},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t,r=v(this._buff.buffer,e,!0),n=r.length;for(this._length+=e.byteLength,t=64;t<=n;t+=64)s(this._hash,u(r.subarray(t-64,t)));return this._buff=t-64<n?new Uint8Array(r.buffer.slice(t-64)):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,i=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=n[t]<<(t%4<<3);return this._finish(o,i),r=h(this._hash),e&&(r=b(r)),this.reset(),r},m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.getState=function(){var e=m.prototype.getState.call(this);return e.buff=y(e.buff),e},m.ArrayBuffer.prototype.setState=function(e){return e.buff=p(e.buff,!0),m.prototype.setState.call(this,e)},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.hash=function(e,t){var r=f(new Uint8Array(e)),n=h(r);return t?b(n):n},m})},{}],222:[function(e,t,r){"use strict";function n(e){for(var t,r,n,i,o=e.rev_tree.slice();i=o.pop();){var s=i.ids,a=s[2],u=i.pos;if(a.length)for(var c=0,f=a.length;c<f;c++)o.push({pos:u+1,ids:a[c]});else{var l=!!s[1].deleted,h=s[0];t&&!(n!==l?n:r!==u?r<u:t<h)||(t=h,r=u,n=l)}}return r+"-"+t}function i(e,t){for(var r,n=e.slice();r=n.pop();)for(var i=r.pos,o=r.ids,s=o[2],a=t(0===s.length,i,o[0],r.ctx,o[1]),u=0,c=s.length;u<c;u++)n.push({pos:i+1,ids:s[u],ctx:a})}function o(e,t){return e.pos-t.pos}function s(e){var t=[];i(e,function(e,r,n,i,o){e&&t.push({rev:r+"-"+n,pos:r,opts:o})}),t.sort(o).reverse();for(var r=0,n=t.length;r<n;r++)delete t[r].pos;return t}function a(e){for(var t=n(e),r=s(e.rev_tree),i=[],o=0,a=r.length;o<a;o++){var u=r[o];u.rev===t||u.opts.deleted||i.push(u.rev)}return i}function u(e){var t=[];return i(e.rev_tree,function(e,r,n,i,o){"available"!==o.status||e||(t.push(r+"-"+n),o.status="missing")}),t}function c(e){for(var t,r=[],n=e.slice();t=n.pop();){var i=t.pos,o=t.ids,s=o[0],a=o[1],u=o[2],c=0===u.length,f=t.history?t.history.slice():[];f.push({id:s,opts:a}),c&&r.push({pos:i+1-f.length,ids:f});for(var l=0,h=u.length;l<h;l++)n.push({pos:i+1,ids:u[l],history:f})}return r.reverse()}function f(e,t){return e.pos-t.pos}function l(e,t,r){for(var n,i=0,o=e.length;i<o;)n=i+o>>>1,r(e[n],t)<0?i=n+1:o=n;return i}function h(e,t,r){var n=l(e,t,r);e.splice(n,0,t)}function d(e,t){for(var r,n,i=t,o=e.length;i<o;i++){var s=e[i],a=[s.id,s.opts,[]];n?(n[2].push(a),n=a):r=n=a}return r}function p(e,t){return e[0]<t[0]?-1:1}function y(e,t){for(var r=[{tree1:e,tree2:t}],n=!1;r.length>0;){var i=r.pop(),o=i.tree1,s=i.tree2;(o[1].status||s[1].status)&&(o[1].status="available"===o[1].status||"available"===s[1].status?"available":"missing");for(var a=0;a<s[2].length;a++)if(o[2][0]){for(var u=!1,c=0;c<o[2].length;c++)o[2][c][0]===s[2][a][0]&&(r.push({tree1:o[2][c],tree2:s[2][a]}),u=!0);u||(n="new_branch",h(o[2],s[2][a],p))}else n="new_leaf",o[2][0]=s[2][a]}return{conflicts:n,tree:e}}function v(e,t,r){var n,i=[],o=!1,s=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var a=0,u=e.length;a<u;a++){var c=e[a];if(c.pos===t.pos&&c.ids[0]===t.ids[0])n=y(c.ids,t.ids),i.push({pos:c.pos,ids:n.tree}),o=o||n.conflicts,s=!0;else if(r!==!0){var l=c.pos<t.pos?c:t,h=c.pos<t.pos?t:c,d=h.pos-l.pos,p=[],v=[];for(v.push({ids:l.ids,diff:d,parent:null,parentIdx:null});v.length>0;){var b=v.pop();if(0!==b.diff)for(var m=b.ids[2],g=0,_=m.length;g<_;g++)v.push({ids:m[g],diff:b.diff-1,parent:b.ids,parentIdx:g});else b.ids[0]===h.ids[0]&&p.push(b)}var w=p[0];w?(n=y(w.ids,h.ids),w.parent[2][w.parentIdx]=n.tree,i.push({pos:l.pos,ids:l.ids}),o=o||n.conflicts,s=!0):i.push(c)}else i.push(c)}return s||i.push(t),i.sort(f),{tree:i,conflicts:o||"internal_node"}}function b(e,t){for(var r,n=c(e),o={},s=0,a=n.length;s<a;s++){for(var u=n[s],f=u.ids,l=Math.max(0,f.length-t),h={pos:u.pos+l,ids:d(f,l)},p=0;p<l;p++){var y=u.pos+p+"-"+f[p].id;o[y]=!0}r=r?v(r,h,!0).tree:[h]}return i(r,function(e,t,r){delete o[t+"-"+r]}),{tree:r,revs:Object.keys(o)}}function m(e,t,r){var n=v(e,t),i=b(n.tree,r);return{tree:i.tree,stemmedRevs:i.revs,conflicts:n.conflicts}}function g(e,t){for(var r,n=e.slice(),i=t.split("-"),o=parseInt(i[0],10),s=i[1];r=n.pop();){if(r.pos===o&&r.ids[0]===s)return!0;for(var a=r.ids[2],u=0,c=a.length;u<c;u++)n.push({pos:r.pos+1,ids:a[u]})}return!1}function _(e){return e.ids}function w(e,t){t||(t=n(e));for(var r,i=t.substring(t.indexOf("-")+1),o=e.rev_tree.map(_);r=o.pop();){if(r[0]===i)return!!r[1].deleted;o=o.concat(r[2])}}function x(e){return/^_local/.test(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.collectConflicts=a,r.collectLeaves=s,r.compactTree=u,r.isDeleted=w,r.isLocalId=x,r.merge=m,r.revExists=g,r.rootToLeaf=c,r.traverseRevTree=i,r.winningRev=n},{}],223:[function(e,t,r){arguments[4][216][0].apply(r,arguments)},{dup:216,lie:162}],224:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){return/^1-/.test(e)}function o(e,t,r){return!e._attachments||!e._attachments[r]||e._attachments[r].digest!==t._attachments[r].digest}function s(e,t){var r=Object.keys(t._attachments);return g.all(r.map(function(r){return e.getAttachment(t._id,r,{rev:t._rev})}))}function a(e,t,r){var n="http"===t.type()&&"http"!==e.type(),i=Object.keys(r._attachments);return n?e.get(r._id).then(function(n){return g.all(i.map(function(i){return o(n,r,i)?t.getAttachment(r._id,i):e.getAttachment(n._id,i)}))}).catch(function(e){if(404!==e.status)throw e;return s(t,r)}):s(t,r)}function u(e){var t=[];return Object.keys(e).forEach(function(r){var n=e[r].missing;n.forEach(function(e){t.push({id:r,rev:e})})}),{docs:t,revs:!0}}function c(e,t,r,n){function o(){var i=u(r);if(i.docs.length)return e.bulkGet(i).then(function(r){if(n.cancelled)throw new Error("cancelled");return g.all(r.results.map(function(r){return g.all(r.docs.map(function(r){var n=r.ok;return r.error&&(p=!1),n&&n._attachments?a(t,e,n).then(function(e){var t=Object.keys(n._attachments);return e.forEach(function(e,r){var i=n._attachments[t[r]];delete i.stub,delete i.length,i.data=e}),n}):n}))})).then(function(e){d=d.concat(m.flatten(e).filter(Boolean))})})}function s(e){return e._attachments&&Object.keys(e._attachments).length>0}function c(e){return e._conflicts&&e._conflicts.length>0}function f(t){return e.allDocs({keys:t,include_docs:!0,conflicts:!0}).then(function(e){if(n.cancelled)throw new Error("cancelled");e.rows.forEach(function(e){e.deleted||!e.doc||!i(e.value.rev)||s(e.doc)||c(e.doc)||(d.push(e.doc),delete r[e.id])})})}function l(){var e=Object.keys(r).filter(function(e){var t=r[e].missing;return 1===t.length&&i(t[0])});if(e.length>0)return f(e)}function h(){return{ok:p,docs:d}}r=m.clone(r);var d=[],p=!0;return g.resolve().then(l).then(o).then(h)}function f(e,t,r,n){if(e.retry===!1)return t.emit("error",r),void t.removeAllListeners();if("function"!=typeof e.back_off_function&&(e.back_off_function=m.defaultBackOff),t.emit("requestError",r),"active"===t.state||"pending"===t.state){t.emit("paused",r),t.state="stopped";var i=function(){e.current_back_off=S},o=function(){t.removeListener("active",i)};t.once("paused",o),t.once("active",i)}e.current_back_off=e.current_back_off||S,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(n,e.current_back_off)}function l(e,t,r,n,i){function o(){return C?g.resolve():w(e,t,r).then(function(r){A=r,C=new _(e,t,A,n)})}function s(){if($=[],0!==O.docs.length){var e=O.docs,o={timeout:r.timeout};return t.bulkDocs({docs:e,new_edits:!1},o).then(function(t){if(n.cancelled)throw v(),new Error("cancelled");var r=Object.create(null);t.forEach(function(e){e.error&&(r[e.id]=e)});var o=Object.keys(r).length;i.doc_write_failures+=o,i.docs_written+=e.length-o,e.forEach(function(e){var t=r[e._id];if(t){if(i.errors.push(t),"unauthorized"!==t.name&&"forbidden"!==t.name)throw t;n.emit("denied",m.clone(t))}else $.push(e)})},function(t){throw i.doc_write_failures+=e.length,t})}}function a(){if(O.error)throw new Error("There was a problem getting docs.");i.last_seq=D=O.seq;var e=m.clone(i);return $.length&&(e.docs=$,n.emit("change",e)),P=!0,C.writeCheckpoint(O.seq,U).then(function(){if(P=!1,n.cancelled)throw v(),new Error("cancelled");O=void 0,E()}).catch(function(e){throw j(e),e})}function u(){var e={};return O.changes.forEach(function(t){"_user/"!==t.id&&(e[t.id]=t.changes.map(function(e){return e.rev}))}),t.revsDiff(e).then(function(e){if(n.cancelled)throw v(),new Error("cancelled");O.diffs=e})}function h(){return c(e,t,O.diffs,n).then(function(e){O.error=!e.ok,e.docs.forEach(function(e){delete O.diffs[e._id],i.docs_read++,O.docs.push(e)})})}function d(){if(!n.cancelled&&!O){if(0===R.length)return void p(!0);O=R.shift(),u().then(h).then(s).then(a).then(d).catch(function(e){y("batch processing terminated with error",e)})}}function p(e){return 0===B.changes.length?void(0!==R.length||O||((M&&z.live||T)&&(n.state="pending",n.emit("paused")),T&&v())):void((e||T||B.changes.length>=L)&&(R.push(B),B={seq:0,changes:[],docs:[]},"pending"!==n.state&&"stopped"!==n.state||(n.state="active",n.emit("active")),d()))}function y(e,t){I||(t.message||(t.message=e),i.ok=!1,i.status="aborting",R=[],B={seq:0,changes:[],docs:[]},v(t))}function v(o){I||n.cancelled&&(i.status="cancelled",P)||(i.status=i.status||"complete",i.end_time=new Date,i.last_seq=D,I=!0,o?(o.result=i,"unauthorized"===o.name||"forbidden"===o.name?(n.emit("error",o),n.removeAllListeners()):f(r,n,o,function(){l(e,t,r,n)})):(n.emit("complete",i),n.removeAllListeners()))}function b(e){if(n.cancelled)return v();var t=m.filterChange(r)(e);t&&(B.seq=e.seq,B.changes.push(e),p(0===R.length&&z.live))}function x(e){if(N=!1,n.cancelled)return v();if(e.results.length>0)z.since=e.last_seq,E(),p(!0);else{var t=function(){M?(z.live=!0,E()):T=!0,p(!0)};O||0!==e.results.length?t():(P=!0,C.writeCheckpoint(e.last_seq,U).then(function(){P=!1,i.last_seq=D=e.last_seq,t()}).catch(j))}}function k(e){return N=!1,n.cancelled?v():void y("changes rejected",e)}function E(){function t(){o.cancel()}function i(){n.removeListener("cancel",t)}if(!N&&!T&&R.length<q){N=!0,n._changes&&(n.removeListener("cancel",n._abortChanges),n._changes.cancel()),n.once("cancel",t);var o=e.changes(z).on("change",b);o.then(i,i),o.then(x).catch(k),r.retry&&(n._changes=o,n._abortChanges=t)}}function S(){o().then(function(){return n.cancelled?void v():C.getCheckpoint().then(function(e){D=e,z={since:D,limit:L,batch_size:L,style:"all_docs",doc_ids:F,return_docs:!0},r.filter&&("string"!=typeof r.filter?z.include_docs=!0:z.filter=r.filter),"heartbeat"in r&&(z.heartbeat=r.heartbeat),"timeout"in r&&(z.timeout=r.timeout),r.query_params&&(z.query_params=r.query_params),r.view&&(z.view=r.view),E()})}).catch(function(e){y("getCheckpoint rejected with ",e)})}function j(e){P=!1,y("writeCheckpoint completed with error",e)}var O,A,C,R=[],B={seq:0,changes:[],docs:[]},P=!1,T=!1,I=!1,D=0,M=r.continuous||r.live||!1,L=r.batch_size||100,q=r.batches_limit||10,N=!1,F=r.doc_ids,$=[],U=m.uuid();i=i||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var z={};return n.ready(e,t),n.cancelled?void v():(n._addedListeners||(n.once("cancel",v),"function"==typeof r.complete&&(n.once("error",r.complete),n.once("complete",function(e){r.complete(null,e)})),n._addedListeners=!0),void("undefined"==typeof r.since?S():o().then(function(){return P=!0,C.writeCheckpoint(r.since,U)}).then(function(){return P=!1,n.cancelled?void v():(D=r.since,void S())}).catch(j)))}function h(){x.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new g(function(t,r){e.once("complete",t),e.once("error",r)});e.then=function(e,r){return t.then(e,r)},e.catch=function(e){return t.catch(e)},e.catch(function(){})}function d(e,t){var r=t.PouchConstructor;return"string"==typeof e?new r(e,t):e}function p(e,t,r,n){if("function"==typeof r&&(n=r,r={}),"undefined"==typeof r&&(r={}),r.doc_ids&&!Array.isArray(r.doc_ids))throw E.createError(E.BAD_REQUEST,"`doc_ids` filter parameter is not a list.");r.complete=n,r=m.clone(r),r.continuous=r.continuous||r.live,r.retry="retry"in r&&r.retry,r.PouchConstructor=r.PouchConstructor||this;var i=new h(r),o=d(e,r),s=d(t,r);return l(o,s,r,i),i}function y(e,t,r,n){return"function"==typeof r&&(n=r,r={}),"undefined"==typeof r&&(r={}),r=m.clone(r),r.PouchConstructor=r.PouchConstructor||this,e=d(e,r),t=d(t,r),new v(e,t,r,n)}function v(e,t,r,n){function i(e){d.emit("change",{direction:"pull",change:e})}function o(e){d.emit("change",{direction:"push",change:e})}function s(e){d.emit("denied",{direction:"push",doc:e})}function a(e){d.emit("denied",{direction:"pull",doc:e})}function u(){d.pushPaused=!0,d.pullPaused&&d.emit("paused")}function c(){d.pullPaused=!0,d.pushPaused&&d.emit("paused")}function f(){d.pushPaused=!1,d.pullPaused&&d.emit("active",{direction:"push"})}function l(){d.pullPaused=!1,d.pushPaused&&d.emit("active",{direction:"pull"})}function h(e){return function(t,r){var n="change"===t&&(r===i||r===o),h="denied"===t&&(r===a||r===s),p="paused"===t&&(r===c||r===u),y="active"===t&&(r===l||r===f);(n||h||p||y)&&(t in b||(b[t]={}),b[t][e]=!0,2===Object.keys(b[t]).length&&d.removeAllListeners(t))}}var d=this;this.canceled=!1;var y=r.push?m.jsExtend({},r,r.push):r,v=r.pull?m.jsExtend({},r,r.pull):r;this.push=p(e,t,y),this.pull=p(t,e,v),this.pushPaused=!0,this.pullPaused=!0;var b={};r.live&&(this.push.on("complete",d.pull.cancel.bind(d.pull)),this.pull.on("complete",d.push.cancel.bind(d.push))),this.on("newListener",function(e){"change"===e?(d.pull.on("change",i),d.push.on("change",o)):"denied"===e?(d.pull.on("denied",a),d.push.on("denied",s)):"active"===e?(d.pull.on("active",l),d.push.on("active",f)):"paused"===e&&(d.pull.on("paused",c),d.push.on("paused",u))}),this.on("removeListener",function(e){"change"===e?(d.pull.removeListener("change",i),d.push.removeListener("change",o)):"denied"===e?(d.pull.removeListener("denied",a),d.push.removeListener("denied",s)):"active"===e?(d.pull.removeListener("active",l),d.push.removeListener("active",f)):"paused"===e&&(d.pull.removeListener("paused",c),d.push.removeListener("paused",u))}),this.pull.on("removeListener",h("pull")),this.push.on("removeListener",h("push"));var _=g.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return d.emit("complete",t),n&&n(null,t),d.removeAllListeners(),t},function(e){if(d.cancel(),n?n(e):d.emit("error",e),d.removeAllListeners(),n)throw e});this.then=function(e,t){return _.then(e,t)},this.catch=function(e){return _.catch(e)}}function b(e){e.replicate=p,e.sync=y,Object.defineProperty(e.prototype,"replicate",{get:function(){var e=this;return{from:function(t,r,n){return e.constructor.replicate(t,e,r,n)},to:function(t,r,n){return e.constructor.replicate(e,t,r,n)}}}}),e.prototype.sync=function(e,t,r){return this.constructor.sync(this,e,t,r)}}var m=e("pouchdb-utils"),g=n(e("pouchdb-promise")),_=n(e("pouchdb-checkpointer")),w=n(e("pouchdb-generate-replication-id")),x=e("events"),k=n(e("inherits")),E=e("pouchdb-errors"),S=0;k(h,x.EventEmitter),h.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},h.prototype.ready=function(e,t){function r(){i.cancel()}function n(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}var i=this;i._readyCalled||(i._readyCalled=!0,e.once("destroyed",r),t.once("destroyed",r),i.once("complete",n))},k(v,x.EventEmitter),v.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},t.exports=b},{events:137,inherits:143,"pouchdb-checkpointer":189,"pouchdb-errors":195,"pouchdb-generate-replication-id":217,"pouchdb-promise":223,"pouchdb-utils":228}],225:[function(e,t,r){"use strict";function n(e,t,r){return"string"!=typeof t?o.reject(new Error("doc id is required")):e.get(t).catch(function(e){if(404!==e.status)throw e;return{}}).then(function(n){var o=n._rev,s=r(n);return s?(s._id=t,s._rev=o,i(e,s,r)):{updated:!1,rev:o}})}function i(e,t,r){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(i){if(409!==i.status)throw i;return n(e,t._id,r)})}var o=e("pouchdb-promise");r.upsert=function(e,t,r){var i=this,o=n(i,e,t);return"function"!=typeof r?o:void o.then(function(e){r(null,e)},r)},r.putIfNotExists=function(e,t,r){var i=this;"string"!=typeof e&&(r=t,t=e,e=t._id);var o=function(e){return!e._rev&&t},s=n(i,e,o);return"function"!=typeof r?s:void s.then(function(e){r(null,e)},r)},"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(r)},{"pouchdb-promise":227}],226:[function(e,t,r){arguments[4][162][0].apply(r,arguments)},{dup:162,immediate:142}],227:[function(e,t,r){arguments[4][216][0].apply(r,arguments)},{dup:216,lie:226}],228:[function(e,t,r){(function(t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}function o(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),r=new Uint8Array(t),n=new Uint8Array(e);return r.set(n),t}function s(e){if(e instanceof ArrayBuffer)return o(e);var t=e.size,r=e.type;return"function"==typeof e.slice?e.slice(0,t,r):e.webkitSlice(0,t,r)}function a(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=t.constructor;return"function"==typeof r&&r instanceof r&&G.call(r)==H}function u(e){var t,r,n;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],r=0,n=e.length;r<n;r++)t[r]=u(e[r]);return t}if(e instanceof Date)return e.toISOString();if(i(e))return s(e);if(!a(e))return e;t={};for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=u(e[r]);"undefined"!=typeof o&&(t[r]=o)}return t}function c(e){var t=!1;return z(function(r){if(t)throw new Error("once called more than once");t=!0,e.apply(this,r)})}function f(e){return z(function(r){r=u(r);var n,i=this,o="function"==typeof r[r.length-1]&&r.pop();o&&(n=function(e,r){t.nextTick(function(){o(e,r)})});var s=new U(function(t,n){var o;try{var s=c(function(e,r){e?n(e):t(r)});r.push(s),o=e.apply(i,r),o&&"function"==typeof o.then&&t(o)}catch(e){n(e)}});return n&&s.then(function(e){n(null,e)},n),s})}function l(e,t){function r(e,t,r){if(Y.enabled){for(var n=[e.name,t],i=0;i<r.length-1;i++)n.push(r[i]);Y.apply(null,n);var o=r[r.length-1];r[r.length-1]=function(r,n){var i=[e.name,t];i=i.concat(r?["error",r]:["success",n]),Y.apply(null,i),o(r,n)}}}return f(z(function(n){if(this._closed)return U.reject(new Error("database is closed"));if(this._destroyed)return U.reject(new Error("database is destroyed"));var i=this;return r(i,e,n),this.taskqueue.isReady?t.apply(this,n):new U(function(t,r){i.taskqueue.addTask(function(o){o?r(o):t(i[e].apply(i,n))})})}))}function h(e,t){for(var r={},n=0,i=t.length;n<i;n++){var o=t[n];o in e&&(r[o]=e[o])}return r}function d(e){return e}function p(e){return[{ok:e}]}function y(e,t,r){function n(){var e=[];y.forEach(function(t){t.docs.forEach(function(r){e.push({id:t.id,docs:[r]})})}),r(null,{results:e})}function i(){++l===f&&n()}function o(e,t,r){y[e]={id:t,docs:r},i()}function s(){if(!(b>=v.length)){var e=Math.min(b+Z,v.length),t=v.slice(b,e);a(t,b),b+=t.length}}function a(r,n){r.forEach(function(r,i){var a=n+i,u=c[r],f=h(u[0],["atts_since","attachments"]);f.open_revs=u.map(function(e){return e.rev}),f.open_revs=f.open_revs.filter(d);var l=d;0===f.open_revs.length&&(delete f.open_revs,l=p),["revs","attachments","binary","ajax"].forEach(function(e){e in t&&(f[e]=t[e])}),e.get(r,f,function(e,t){var n;n=e?[{error:e}]:l(t),o(a,r,n),s()})})}var u=t.docs,c={};u.forEach(function(e){e.id in c?c[e.id].push(e):c[e.id]=[e]});var f=Object.keys(c).length,l=0,y=new Array(f),v=Object.keys(c),b=0;s()}function v(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function b(){return $}function m(e){v()?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):b()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}function g(){V.EventEmitter.call(this),this._listeners={},m(this)}function _(e){if("undefined"!==console&&e in console){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function w(e,t){var r=6e5;e=parseInt(e,10)||0,t=parseInt(t,10),t!==t||t<=e?t=(e||1)<<1:t+=1,t>r&&(e=r>>1,t=r);var n=Math.random(),i=t-e;return~~(i*n+e)}function x(e){var t=0;return e||(t=2e3),w(e,t)}function k(e,t){_("info","The above "+e+" is totally normal. "+t)}function E(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n=u(t[r]);"undefined"!=typeof n&&(e[r]=n)}}function S(e,t,r){return E(e,t),r&&E(e,r),e}function j(e){if("object"!=typeof e)throw e+" is not an object";var t=X.call(arguments,1);return ee.call(t,function(t){if(t)for(var r in t)"object"==typeof t[r]&&e[r]?j.call(e,e[r],t[r]):e[r]=t[r]}),e}function O(e,t,r){try{return!e(t,r)}catch(e){var n="Filter function threw: "+e.toString();return J.createError(J.BAD_REQUEST,n)}}function A(e){var t={},r=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(n){n.doc||(n.doc={});var i=r&&O(e.filter,n.doc,t);if("object"==typeof i)return i;if(i)return!1;if(e.include_docs){if(!e.attachments)for(var o in n.doc._attachments)n.doc._attachments.hasOwnProperty(o)&&(n.doc._attachments[o].stub=!0)}else delete n.doc;return!0}}function C(e){for(var t=[],r=0,n=e.length;r<n;r++)t=t.concat(e[r]);return t}function R(){}function B(e){var t;if(e?"string"!=typeof e?t=J.createError(J.INVALID_ID):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=J.createError(J.RESERVED_ID)):t=J.createError(J.MISSING_ID),t)throw t}function P(){return"undefined"!=typeof cordova||"undefined"!=typeof PhoneGap||"undefined"!=typeof phonegap}function T(e,t){return"listenerCount"in e?e.listenerCount(t):V.EventEmitter.listenerCount(e,t)}function I(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function D(e){var t=I(e);return t?t.join("/"):null}function M(e){for(var t=se.exec(e),r={},n=14;n--;){var i=ne[n],o=t[n]||"",s=["user","password"].indexOf(i)!==-1;r[i]=s?decodeURIComponent(o):o}return r[ie]={},r[ne[12]].replace(oe,function(e,t,n){t&&(r[ie][t]=n)}),r}function L(e,t,r){return new U(function(n,i){e.get(t,function(o,s){if(o){if(404!==o.status)return i(o);s={}}var a=s._rev,u=r(s);return u?(u._id=t,u._rev=a,void n(q(e,u,r))):n({updated:!1,rev:a})})})}function q(e,t,r){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(n){if(409!==n.status)throw n;return L(e,t._id,r)})}function N(e){return 0|Math.random()*e}function F(e,t){t=t||ae.length;var r="",n=-1;if(e){for(;++n<e;)r+=ae[N(t)];return r}for(;++n<36;)switch(n){case 8:case 13:case 18:case 23:r+="-";break;case 19:r+=ae[3&N(16)|8];break;default:r+=ae[N(16)]}return r}Object.defineProperty(r,"__esModule",{value:!0});var $,U=n(e("pouchdb-promise")),z=n(e("argsarray")),W=n(e("debug")),V=e("events"),K=n(e("inherits")),J=e("pouchdb-errors"),G=Function.prototype.toString,H=G.call(Object),Y=W("pouchdb:api"),Z=6;if(v())$=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),$=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){$=!1}K(g,V.EventEmitter),g.prototype.addListener=function(e,t,r,n){function i(){function e(){s=!1}if(o._listeners[t]){if(s)return void(s="waiting");s=!0;var a=h(n,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);r.changes(a).on("change",function(e){e.seq>n.since&&!n.cancelled&&(n.since=e.seq,n.onChange(e))}).on("complete",function(){"waiting"===s&&setTimeout(function(){i()},0),s=!1}).on("error",e)}}if(!this._listeners[t]){var o=this,s=!1;this._listeners[t]=i,this.on(e,i)}},g.prototype.removeListener=function(e,t){t in this._listeners&&(V.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},g.prototype.notifyLocalWindows=function(e){v()?chrome.storage.local.set({dbName:e}):b()&&(localStorage[e]="a"===localStorage[e]?"b":"a");
},g.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var Q,X=Array.prototype.slice,ee=Array.prototype.forEach,te=R.name;Q=te?function(e){return e.name}:function(e){return e.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]};var re=Q,ne=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],ie="queryKey",oe=/(?:^|&)([^&=]*)=?([^&]*)/g,se=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ae="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");r.adapterFun=l,r.bulkGetShim=y,r.changesHandler=g,r.clone=u,r.defaultBackOff=x,r.explainError=k,r.extend=S,r.jsExtend=j,r.filterChange=A,r.flatten=C,r.functionName=re,r.guardedConsole=_,r.hasLocalStorage=b,r.invalidIdError=B,r.isChromeApp=v,r.isCordova=P,r.listenerCount=T,r.normalizeDdocFunctionName=D,r.once=c,r.parseDdocFunctionName=I,r.parseUri=M,r.pick=h,r.toPromise=f,r.upsert=L,r.uuid=F}).call(this,e("_process"))},{_process:230,argsarray:19,debug:128,events:137,inherits:143,"pouchdb-errors":195,"pouchdb-promise":223}],229:[function(e,t,r){(function(e){"use strict";function r(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,n)});case 4:return e.nextTick(function(){t.call(null,r,n,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=r:t.exports=e.nextTick}).call(this,e("_process"))},{_process:230}],230:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function s(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){v&&p&&(v=!1,p.length?y=p.concat(y):b=-1,y.length&&u())}function u(){if(!v){var e=o(a);v=!0;for(var t=y.length;t;){for(p=y,y=[];++b<t;)p&&p[b].run();b=-1,t=y.length}p=null,v=!1,s(e)}}function c(e,t){this.fun=e,this.array=t}function f(){}var l,h,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var p,y=[],v=!1,b=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];y.push(new c(e,t)),1!==y.length||v||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=f,d.addListener=f,d.once=f,d.off=f,d.removeListener=f,d.removeAllListeners=f,d.emit=f,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],231:[function(e,t,r){arguments[4][135][0].apply(r,arguments)},{dup:135}],232:[function(e,t,r){(function(e){!function(n){function i(e){throw new RangeError(T[e])}function o(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function s(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(P,".");var i=e.split("."),s=o(i,t).join(".");return n+s}function a(e){for(var t,r,n=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function u(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=M(e>>>10&1023|55296),e=56320|1023&e),t+=M(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:x}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function l(e,t,r){var n=0;for(e=r?D(e/j):e>>1,e+=D(e/t);e>I*E>>1;n+=x)e=D(e/I);return D(n+(I+1)*e/(e+S))}function h(e){var t,r,n,o,s,a,f,h,d,p,y=[],v=e.length,b=0,m=A,g=O;for(r=e.lastIndexOf(C),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&i("not-basic"),y.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<v;){for(s=b,a=1,f=x;o>=v&&i("invalid-input"),h=c(e.charCodeAt(o++)),(h>=x||h>D((w-b)/a))&&i("overflow"),b+=h*a,d=f<=g?k:f>=g+E?E:f-g,!(h<d);f+=x)p=x-d,a>D(w/p)&&i("overflow"),a*=p;t=y.length+1,g=l(b-s,t,0==s),D(b/t)>w-m&&i("overflow"),m+=D(b/t),b%=t,y.splice(b++,0,m)}return u(y)}function d(e){var t,r,n,o,s,u,c,h,d,p,y,v,b,m,g,_=[];for(e=a(e),v=e.length,t=A,r=0,s=O,u=0;u<v;++u)y=e[u],y<128&&_.push(M(y));for(n=o=_.length,o&&_.push(C);n<v;){for(c=w,u=0;u<v;++u)y=e[u],y>=t&&y<c&&(c=y);for(b=n+1,c-t>D((w-r)/b)&&i("overflow"),r+=(c-t)*b,t=c,u=0;u<v;++u)if(y=e[u],y<t&&++r>w&&i("overflow"),y==t){for(h=r,d=x;p=d<=s?k:d>=s+E?E:d-s,!(h<p);d+=x)g=h-p,m=x-p,_.push(M(f(p+g%m,0))),h=D(g/m);_.push(M(f(h,0))),s=l(r,b,n==o),r=0,++n}++r,++t}return _.join("")}function p(e){return s(e,function(e){return R.test(e)?h(e.slice(4).toLowerCase()):e})}function y(e){return s(e,function(e){return B.test(e)?"xn--"+d(e):e})}var v="object"==typeof r&&r&&!r.nodeType&&r,b="object"==typeof t&&t&&!t.nodeType&&t,m="object"==typeof e&&e;m.global!==m&&m.window!==m&&m.self!==m||(n=m);var g,_,w=2147483647,x=36,k=1,E=26,S=38,j=700,O=72,A=128,C="-",R=/^xn--/,B=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=x-k,D=Math.floor,M=String.fromCharCode;if(g={version:"1.4.1",ucs2:{decode:a,encode:u},decode:h,encode:d,toASCII:y,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return g});else if(v&&b)if(t.exports==v)b.exports=g;else for(_ in g)g.hasOwnProperty(_)&&(v[_]=g[_]);else n.punycode=g}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],233:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var f=0;f<c;++f){var l,h,d,p,y=e[f].replace(a,"%20"),v=y.indexOf(r);v>=0?(l=y.substr(0,v),h=y.substr(v+1)):(l=y,h=""),d=decodeURIComponent(l),p=decodeURIComponent(h),n(s,d)?i(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],234:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(s){var a=encodeURIComponent(i(s))+r;return o(e[s])?n(e[s],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[s]))}).join(t):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],235:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":233,"./encode":234}],236:[function(e,t,r){void function(e){function r(e){return Math.floor(Math.random()*e)}function n(e,t){for(var n="",i=e.length;t--;){var o=r(i);n+=e[o]}return n}function i(e){e="string"==typeof e&&e.length>0?e:"abcdefghijklmnopqrstuvwxzy0123456789";var t=o.bind(o,e);return t.salt=function(){return e},t.create=i,t.gen=i,t}var o=function(e,t){return isNaN(t)?void 0:t<1?void 0:n(e,t)};o.gen=i,t.exports=i()}(this)},{}],237:[function(e,t,r){(function(r){function n(e){return this instanceof n?(u.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(e)}function i(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}function o(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}t.exports=n;var s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},a=e("core-util-is");a.inherits=e("inherits");var u=e("./_stream_readable"),c=e("./_stream_writable");a.inherits(n,u),o(s(c.prototype),function(e){n.prototype[e]||(n.prototype[e]=c.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":239,"./_stream_writable":241,_process:230,"core-util-is":117,inherits:143}],238:[function(e,t,r){function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.exports=n;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":240,"core-util-is":117,inherits:143}],239:[function(e,t,r){(function(r){function n(t,r){t=t||{};var n=t.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(A||(A=e("string_decoder/").StringDecoder),this.decoder=new A(t.encoding),this.encoding=t.encoding)}function i(e){return this instanceof i?(this._readableState=new n(e,this),this.readable=!0,void j.call(this)):new i(e)}function o(e,t,r,n,i){var o=c(t,r);if(o)e.emit("error",o);else if(null===r||void 0===r)t.reading=!1,t.ended||f(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||n||(r=t.decoder.write(r)),t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):(t.reading=!1,t.buffer.push(r)),t.needReadable&&l(e),d(e,t);else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=C)e=C;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var r=null;return E.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function f(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.length>0?l(e):_(e)}function l(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?r.nextTick(function(){h(e)}):h(e))}function h(e){e.emit("readable")}function d(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){p(e,t)}))}function p(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function y(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&v(e)}}function v(e){function t(e,t,i){var o=e.write(r);!1===o&&n.awaitDrain++}var r,n=e._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=e.read());)if(1===n.pipesCount?t(n.pipes,0,null):w(n.pipes,t),e.emit("data",r),n.awaitDrain>0)return;return 0===n.pipesCount?(n.flowing=!1,void(S.listenerCount(e,"data")>0&&m(e))):void(n.ranOut=!0)}function b(){this._readableState.ranOut&&(this._readableState.ranOut=!1,v(this))}function m(e,t){var n=e._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var i=t||!1,o=!1;e.readable=!0,e.pipe=j.prototype.pipe,e.on=e.addListener=j.prototype.on,e.on("readable",function(){o=!0;for(var t;!i&&null!==(t=e.read());)e.emit("data",t);null===t&&(o=!1,e._readableState.needReadable=!0)}),e.pause=function(){i=!0,this.emit("pause")},e.resume=function(){i=!1,o?r.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function g(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!e||e>=i)r=o?n.join(""):E.concat(n,i),n.length=0;else if(e<n[0].length){var a=n[0];r=a.slice(0,e),n[0]=a.slice(e)}else if(e===n[0].length)r=n.shift();else{r=o?"":new E(e);for(var u=0,c=0,f=n.length;c<f&&u<e;c++){var a=n[0],l=Math.min(e-u,a.length);o?r+=a.slice(0,l):a.copy(r,u,0,l),l<a.length?n[0]=a.slice(l):n.shift(),u+=l}}return r}function _(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function w(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function x(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}t.exports=i;var k=e("isarray"),E=e("buffer").Buffer;i.ReadableState=n;var S=e("events").EventEmitter;S.listenerCount||(S.listenerCount=function(e,t){return e.listeners(t).length});var j=e("stream"),O=e("core-util-is");O.inherits=e("inherits");var A;O.inherits(i,j),i.prototype.push=function(e,t){var r=this._readableState;return"string"!=typeof e||r.objectMode||(t=t||r.defaultEncoding,t!==r.encoding&&(e=new E(e,t),t="")),o(this,r,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(t){A||(A=e("string_decoder/").StringDecoder),this._readableState.decoder=new A(t),this._readableState.encoding=t};var C=8388608;i.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return l(this),null;if(e=u(e,t),0===e&&t.ended)return r=null,t.length>0&&t.decoder&&(r=g(e,t),t.length-=r.length),0===t.length&&_(this),r;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=u(n,t)),r=e>0?g(e,t):null,null===r&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&_(this),r},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){e===f&&o()}function i(){e.end()}function o(){e.removeListener("close",a),e.removeListener("finish",u),e.removeListener("drain",p),e.removeListener("error",s),e.removeListener("unpipe",n),f.removeListener("end",i),f.removeListener("end",o),e._writableState&&!e._writableState.needDrain||p()}function s(t){c(),e.removeListener("error",s),0===S.listenerCount(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",u),c()}function u(){e.removeListener("close",a),c()}function c(){f.unpipe(e)}var f=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=e;break;case 1:l.pipes=[l.pipes,e];break;default:l.pipes.push(e)}l.pipesCount+=1;var h=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,d=h?i:o;l.endEmitted?r.nextTick(d):f.once("end",d),e.on("unpipe",n);var p=y(f);return e.on("drain",p),e._events&&e._events.error?k(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",a),e.once("finish",u),e.emit("pipe",f),l.flowing||(this.on("readable",b),l.flowing=!0,r.nextTick(function(){v(f)})),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",b),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",b),t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var i=x(t.pipes,e);return i===-1?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=j.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||m(this),"readable"===e&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&l(this,n):this.read(0))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){m(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){m(this,!0),this.emit("pause")},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=n.push(i);o||(r=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return w(o,function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){r&&(r=!1,e.resume())},n},i._fromList=g}).call(this,e("_process"))},{_process:230,buffer:32,"core-util-is":117,events:137,inherits:143,isarray:146,stream:313,"string_decoder/":326}],240:[function(e,t,r){function n(e,t){this.afterTransform=function(e,r){return i(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e);var t=(this._transformState=new n(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=(e._readableState,e._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=o;var a=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":237,"core-util-is":117,inherits:143}],241:[function(e,t,r){(function(r){function n(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function i(e,t){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=e.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(t){var r=e("./_stream_duplex");return this instanceof o||this instanceof r?(this._writableState=new i(t,this),this.writable=!0,void x.call(this)):new o(t)}function s(e,t,n){var i=new Error("write after end");e.emit("error",i),r.nextTick(function(){n(i)})}function a(e,t,n,i){var o=!0;if(!_.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),r.nextTick(function(){i(s)}),o=!1}return o}function u(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new _(t,r)),t}function c(e,t,r,i,o){r=u(t,r,i),_.isBuffer(r)&&(i="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing?t.buffer.push(new n(r,i,o)):f(e,t,s,r,i,o),a}function f(e,t,r,n,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,e._write(n,i,t.onwrite),t.sync=!1}function l(e,t,n,i,o){n?r.nextTick(function(){o(i)}):o(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(h(n),t)l(e,n,i,t,o);else{var s=b(e,n);s||n.bufferProcessing||!n.buffer.length||v(e,n),i?r.nextTick(function(){p(e,n,s,o)}):p(e,n,s,o)}}function p(e,t,r,n){r||y(e,t),n(),r&&m(e,t)}function y(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function v(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var n=t.buffer[r],i=n.chunk,o=n.encoding,s=n.callback,a=t.objectMode?1:i.length;if(f(e,t,a,i,o,s),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}function b(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function m(e,t){var r=b(e,t);return r&&(t.finished=!0,e.emit("finish")),r}function g(e,t,n){t.ending=!0,m(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0}t.exports=o;var _=e("buffer").Buffer;o.WritableState=i;var w=e("core-util-is");w.inherits=e("inherits");var x=e("stream");w.inherits(o,x),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),_.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?s(this,n,r):a(this,n,e,r)&&(i=c(this,n,e,t,r)),i},o.prototype._write=function(e,t,r){r(new Error("not implemented"))},o.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),n.ending||n.finished||g(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":237,_process:230,buffer:32,"core-util-is":117,inherits:143,stream:313}],242:[function(e,t,r){(function(n){var i=e("stream");r=t.exports=e("./lib/_stream_readable.js"),r.Stream=i,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),n.browser||"disable"!==n.env.READABLE_STREAM||(t.exports=e("stream"))}).call(this,e("_process"))},{"./lib/_stream_duplex.js":237,"./lib/_stream_passthrough.js":238,"./lib/_stream_readable.js":239,"./lib/_stream_transform.js":240,"./lib/_stream_writable.js":241,_process:230,stream:313}],243:[function(e,t,r){(function(r){var n="object"==typeof r?r:"object"==typeof window?window:"object"==typeof self?self:this,i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=e("./runtime"),i)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./runtime":244}],244:[function(e,t,r){(function(e,r){!function(r){"use strict";function n(e,t,r,n){var i=t&&t.prototype instanceof o?t:o,s=Object.create(i.prototype),a=new p(n||[]);return s._invoke=l(e,r,a),s}function i(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function o(){}function s(){}function a(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(e){this.arg=e}function f(t){function r(e,n,o,s){var a=i(t[e],t,n);if("throw"!==a.type){var u=a.arg,f=u.value;return f instanceof c?Promise.resolve(f.arg).then(function(e){r("next",e,o,s)},function(e){r("throw",e,o,s)}):Promise.resolve(f).then(function(e){u.value=e,o(u)},s)}s(a.arg)}function n(e,t){function n(){return new Promise(function(n,i){r(e,t,n,i)})}return o=o?o.then(n,n):n()}"object"==typeof e&&e.domain&&(r=e.domain.bind(r));var o;this._invoke=n}function l(e,t,r){var n=E;return function(o,s){if(n===j)throw new Error("Generator is already running");if(n===O){if("throw"===o)throw s;return v()}for(;;){var a=r.delegate;if(a){if("return"===o||"throw"===o&&a.iterator[o]===b){r.delegate=null;var u=a.iterator.return;if(u){var c=i(u,a.iterator,s);if("throw"===c.type){o="throw",s=c.arg;continue}}if("return"===o)continue}var c=i(a.iterator[o],a.iterator,s);if("throw"===c.type){r.delegate=null,o="throw",s=c.arg;continue}o="next",s=b;var f=c.arg;if(!f.done)return n=S,f;r[a.resultName]=f.value,r.next=a.nextLoc,r.delegate=null}if("next"===o)r.sent=r._sent=s;else if("throw"===o){if(n===E)throw n=O,s;r.dispatchException(s)&&(o="next",s=b)}else"return"===o&&r.abrupt("return",s);n=j;var c=i(e,t,r);if("normal"===c.type){n=r.done?O:S;var f={value:c.arg,done:r.done};if(c.arg!==A)return f;r.delegate&&"next"===o&&(s=b)}else"throw"===c.type&&(n=O,o="throw",s=c.arg)}}}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function y(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(m.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=b,t.done=!0,t};return n.next=n}}return{next:v}}function v(){return{value:b,done:!0}}var b,m=Object.prototype.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},_=g.iterator||"@@iterator",w=g.toStringTag||"@@toStringTag",x="object"==typeof t,k=r.regeneratorRuntime;if(k)return void(x&&(t.exports=k));k=r.regeneratorRuntime=x?t.exports:{},k.wrap=n;var E="suspendedStart",S="suspendedYield",j="executing",O="completed",A={},C=a.prototype=o.prototype;s.prototype=C.constructor=a,a.constructor=s,a[w]=s.displayName="GeneratorFunction",k.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},k.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(C),e},k.awrap=function(e){return new c(e)},u(f.prototype),k.async=function(e,t,r,i){var o=new f(n(e,t,r,i));return k.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},u(C),C[_]=function(){return this},C[w]="Generator",C.toString=function(){return"[object Generator]"},k.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},k.values=y,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=b,this.done=!1,this.delegate=null,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=b)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var s=m.call(i,"catchLoc"),a=m.call(i,"finallyLoc");if(s&&a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&m.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?this.next=i.finallyLoc:this.complete(o),A},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;d(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:y(e),resultName:t,nextLoc:r},A}}}("object"==typeof r?r:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:230}],245:[function(e,t,r){function n(e){return"object"==typeof e&&"[object RegExp]"==i.call(e)}var i=Object.prototype.toString;t.exports=r=function(e){if(!n(e))throw new TypeError("Not a RegExp");var t=[];return e.global&&t.push("g"),e.multiline&&t.push("m"),e.ignoreCase&&t.push("i"),new RegExp(e.source,t.join(""))}},{}],246:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./Subject"),o=e("./util/ObjectUnsubscribedError"),s=function(e){function t(t){e.call(this),this._value=t}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i.Subject);r.BehaviorSubject=s},{"./Subject":253,"./util/ObjectUnsubscribedError":295}],247:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./Subscriber"),o=function(e){
function t(t,r,n){e.call(this),this.parent=t,this.outerValue=r,this.outerIndex=n,this.index=0}return n(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(i.Subscriber);r.InnerSubscriber=o},{"./Subscriber":255}],248:[function(e,t,r){"use strict";var n=e("./Observable"),i=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){var n=this.kind;switch(n){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return n.Observable.of(this.value);case"E":return n.Observable.throw(this.error);case"C":return n.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"!=typeof t?new e("N",t):this.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return this.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();r.Notification=i},{"./Observable":249}],249:[function(e,t,r){"use strict";var n=e("./util/root"),i=e("./util/toSubscriber"),o=e("./symbol/observable"),s=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,o=i.toSubscriber(e,t,r);if(n?n.call(o,this):o.add(this._subscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype.forEach=function(e,t){var r=this;if(t||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?t=n.root.Rx.config.Promise:n.root.Promise&&(t=n.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var i=r.subscribe(function(t){if(i)try{e(t)}catch(e){n(e),i.unsubscribe()}else e(t)},n,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.$$observable]=function(){return this},e.create=function(t){return new e(t)},e}();r.Observable=s},{"./symbol/observable":292,"./util/root":306,"./util/toSubscriber":308}],250:[function(e,t,r){"use strict";r.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},{}],251:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./Subscriber"),o=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(i.Subscriber);r.OuterSubscriber=o},{"./Subscriber":255}],252:[function(e,t,r){"use strict";var n=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();r.Scheduler=n},{}],253:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./Observable"),o=e("./Subscriber"),s=e("./Subscription"),a=e("./util/ObjectUnsubscribedError"),u=e("./SubjectSubscription"),c=e("./symbol/rxSubscriber"),f=function(e){function t(t){e.call(this,t),this.destination=t}return n(t,e),t}(o.Subscriber);r.SubjectSubscriber=f;var l=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(t,e),t.prototype[c.$$rxSubscriber]=function(){return new f(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._subscribe=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(e.complete(),s.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(i.Observable);r.Subject=l;var h=function(e){function t(t,r){e.call(this),this.destination=t,this.source=r}return n(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):s.Subscription.EMPTY},t}(l);r.AnonymousSubject=h},{"./Observable":249,"./SubjectSubscription":254,"./Subscriber":255,"./Subscription":256,"./symbol/rxSubscriber":293,"./util/ObjectUnsubscribedError":295}],254:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./Subscription"),o=function(e){function t(t,r){e.call(this),this.subject=t,this.subscriber=r,this.closed=!1}return n(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);r!==-1&&t.splice(r,1)}}},t}(i.Subscription);r.SubjectSubscription=o},{"./Subscription":256}],255:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./util/isFunction"),o=e("./Subscription"),s=e("./Observer"),a=e("./symbol/rxSubscriber"),u=function(e){function t(r,n,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!r){this.destination=s.empty;break}if("object"==typeof r){r instanceof t?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,r,n,i)}}return n(t,e),t.prototype[a.$$rxSubscriber]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t}(o.Subscription);r.Subscriber=u;var c=function(e){function t(t,r,n,o){e.call(this),this._parent=t;var s,a=this;i.isFunction(r)?s=r:r&&(a=r,s=r.next,n=r.error,o=r.complete,i.isFunction(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this)),this._context=a,this._next=s,this._error=n,this._complete=o}return n(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parent;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parent;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){if(!this.isStopped){var e=this._parent;this._complete?e.syncErrorThrowable?(this.__tryOrSetError(e,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parent;this._context=null,this._parent=null,e.unsubscribe()},t}(u)},{"./Observer":250,"./Subscription":256,"./symbol/rxSubscriber":293,"./util/isFunction":301}],256:[function(e,t,r){"use strict";var n=e("./util/isArray"),i=e("./util/isObject"),o=e("./util/isFunction"),s=e("./util/tryCatch"),a=e("./util/errorObject"),u=e("./util/UnsubscriptionError"),c=function(){function e(e){this.closed=!1,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){this.closed=!0;var r=this,c=r._unsubscribe,f=r._subscriptions;if(this._subscriptions=null,o.isFunction(c)){var l=s.tryCatch(c).call(this);l===a.errorObject&&(t=!0,(e=e||[]).push(a.errorObject.e))}if(n.isArray(f))for(var h=-1,d=f.length;++h<d;){var p=f[h];if(i.isObject(p)){var l=s.tryCatch(p.unsubscribe).call(p);if(l===a.errorObject){t=!0,e=e||[];var y=a.errorObject.e;y instanceof u.UnsubscriptionError?e=e.concat(y.errors):e.push(y)}}}if(t)throw new u.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.closed||"function"!=typeof r.unsubscribe)break;this.closed?r.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(r);break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return r},e.prototype.remove=function(t){if(null!=t&&t!==this&&t!==e.EMPTY){var r=this._subscriptions;if(r){var n=r.indexOf(t);n!==-1&&r.splice(n,1)}}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();r.Subscription=c},{"./util/UnsubscriptionError":297,"./util/errorObject":298,"./util/isArray":299,"./util/isFunction":301,"./util/isObject":303,"./util/tryCatch":309}],257:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../observable/fromEvent");n.Observable.fromEvent=i.fromEvent},{"../../Observable":249,"../../observable/fromEvent":273}],258:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../observable/interval");n.Observable.interval=i.interval},{"../../Observable":249,"../../observable/interval":274}],259:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../observable/merge");n.Observable.merge=i.merge},{"../../Observable":249,"../../observable/merge":275}],260:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/delay");n.Observable.prototype.delay=i.delay},{"../../Observable":249,"../../operator/delay":277}],261:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/distinctUntilChanged");n.Observable.prototype.distinctUntilChanged=i.distinctUntilChanged},{"../../Observable":249,"../../operator/distinctUntilChanged":278}],262:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/filter");n.Observable.prototype.filter=i.filter},{"../../Observable":249,"../../operator/filter":279}],263:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/first");n.Observable.prototype.first=i.first},{"../../Observable":249,"../../operator/first":280}],264:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/map");n.Observable.prototype.map=i.map},{"../../Observable":249,"../../operator/map":281}],265:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/startWith");n.Observable.prototype.startWith=i.startWith},{"../../Observable":249,"../../operator/startWith":284}],266:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/timeout");n.Observable.prototype.timeout=i.timeout},{"../../Observable":249,"../../operator/timeout":285}],267:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/toPromise");n.Observable.prototype.toPromise=i.toPromise},{"../../Observable":249,"../../operator/toPromise":286}],268:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Observable"),o=e("./ScalarObservable"),s=e("./EmptyObservable"),a=e("../util/isScheduler"),u=function(e){function t(t,r){e.call(this),this.array=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(t,e),t.create=function(e,r){return new t(e,r)},t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=e[e.length-1];a.isScheduler(n)?e.pop():n=null;var i=e.length;return i>1?new t(e,n):1===i?new o.ScalarObservable(e[0],n):new s.EmptyObservable(n)},t.dispatch=function(e){var t=e.array,r=e.index,n=e.count,i=e.subscriber;return r>=n?void i.complete():(i.next(t[r]),void(i.closed||(e.index=r+1,this.schedule(e))))},t.prototype._subscribe=function(e){var r=0,n=this.array,i=n.length,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{array:n,index:r,count:i,subscriber:e});for(var s=0;s<i&&!e.closed;s++)e.next(n[s]);e.complete()},t}(i.Observable);r.ArrayObservable=u},{"../Observable":249,"../util/isScheduler":305,"./EmptyObservable":269,"./ScalarObservable":272}],269:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Observable"),o=function(e){function t(t){e.call(this),this.scheduler=t}return n(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){var t=e.subscriber;t.complete()},t.prototype._subscribe=function(e){var r=this.scheduler;return r?r.schedule(t.dispatch,0,{subscriber:e}):void e.complete()},t}(i.Observable);r.EmptyObservable=o},{"../Observable":249}],270:[function(e,t,r){"use strict";function n(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function i(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}function o(e){return!!e&&"[object NodeList]"===e.toString()}function s(e){return!!e&&"[object HTMLCollection]"===e.toString()}function a(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}var u=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},c=e("../Observable"),f=e("../util/tryCatch"),l=e("../util/isFunction"),h=e("../util/errorObject"),d=e("../Subscription"),p=function(e){function t(t,r,n,i){e.call(this),this.sourceObj=t,this.eventName=r,this.selector=n,this.options=i}return u(t,e),t.create=function(e,r,n,i){return l.isFunction(n)&&(i=n,n=void 0),new t(e,r,i,n)},t.setupSubscription=function(e,r,u,c,f){var l;if(o(e)||s(e))for(var h=0,p=e.length;h<p;h++)t.setupSubscription(e[h],r,u,c,f);else if(a(e)){var y=e;e.addEventListener(r,u,f),l=function(){return y.removeEventListener(r,u)}}else if(i(e)){var v=e;e.on(r,u),l=function(){return v.off(r,u)}}else{if(!n(e))throw new TypeError("Invalid event target");var b=e;e.addListener(r,u),l=function(){return b.removeListener(r,u)}}c.add(new d.Subscription(l))},t.prototype._subscribe=function(e){var r=this.sourceObj,n=this.eventName,i=this.options,o=this.selector,s=o?function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=f.tryCatch(o).apply(void 0,t);n===h.errorObject?e.error(h.errorObject.e):e.next(n)}:function(t){return e.next(t)};t.setupSubscription(r,n,s,e,i)},t}(c.Observable);r.FromEventObservable=p},{"../Observable":249,"../Subscription":256,"../util/errorObject":298,"../util/isFunction":301,"../util/tryCatch":309}],271:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../util/isNumeric"),o=e("../Observable"),s=e("../scheduler/async"),a=function(e){function t(t,r){void 0===t&&(t=0),void 0===r&&(r=s.async),e.call(this),this.period=t,this.scheduler=r,(!i.isNumeric(t)||t<0)&&(this.period=0),r&&"function"==typeof r.schedule||(this.scheduler=s.async)}return n(t,e),t.create=function(e,r){return void 0===e&&(e=0),void 0===r&&(r=s.async),new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.subscriber,n=e.period;r.next(t),r.closed||(e.index+=1,this.schedule(e,n))},t.prototype._subscribe=function(e){var r=0,n=this.period,i=this.scheduler;e.add(i.schedule(t.dispatch,n,{index:r,subscriber:e,period:n}))},t}(o.Observable);r.IntervalObservable=a},{"../Observable":249,"../scheduler/async":290,"../util/isNumeric":302}],272:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Observable"),o=function(e){function t(t,r){e.call(this),this.value=t,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return n(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.done,r=e.value,n=e.subscriber;return t?void n.complete():(n.next(r),void(n.closed||(e.done=!0,this.schedule(e))))},t.prototype._subscribe=function(e){var r=this.value,n=this.scheduler;return n?n.schedule(t.dispatch,0,{done:!1,value:r,subscriber:e}):(e.next(r),void(e.closed||e.complete()))},t}(i.Observable);r.ScalarObservable=o},{"../Observable":249}],273:[function(e,t,r){"use strict";var n=e("./FromEventObservable");r.fromEvent=n.FromEventObservable.create},{"./FromEventObservable":270}],274:[function(e,t,r){"use strict";var n=e("./IntervalObservable");r.interval=n.IntervalObservable.create},{"./IntervalObservable":271}],275:[function(e,t,r){"use strict";var n=e("../operator/merge");r.merge=n.mergeStatic},{"../operator/merge":282}],276:[function(e,t,r){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(i.apply(void 0,[this].concat(e)))}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null,n=e;return o.isScheduler(n[e.length-1])&&(r=n.pop()),null===r&&1===e.length?e[0]:new s.ArrayObservable(e,r).lift(new a.MergeAllOperator(1))}var o=e("../util/isScheduler"),s=e("../observable/ArrayObservable"),a=e("./mergeAll");r.concat=n,r.concatStatic=i},{"../observable/ArrayObservable":268,"../util/isScheduler":305,"./mergeAll":283}],277:[function(e,t,r){"use strict";function n(e,t){void 0===t&&(t=o.async);var r=s.isDate(e),n=r?+e-t.now():Math.abs(e);return this.lift(new c(n,t))}var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=e("../scheduler/async"),s=e("../util/isDate"),a=e("../Subscriber"),u=e("../Notification");r.delay=n;var c=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t._subscribe(new f(e,this.delay,this.scheduler))},e}(),f=function(e){function t(t,r,n){e.call(this,t),this.delay=r,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return i(t,e),t.dispatch=function(e){for(var t=e.source,r=t.queue,n=e.scheduler,i=e.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(r.length>0){var o=Math.max(0,r[0].time-n.now());this.schedule(e,o)}else t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(this.errored!==!0){var t=this.scheduler,r=new l(t.now()+this.delay,e);this.queue.push(r),this.active===!1&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(u.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(u.Notification.createComplete())},t}(a.Subscriber),l=function(){function e(e,t){this.time=e,this.notification=t}return e}()},{"../Notification":248,"../Subscriber":255,"../scheduler/async":290,"../util/isDate":300}],278:[function(e,t,r){"use strict";function n(e,t){return this.lift(new u(e,t))}var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=e("../Subscriber"),s=e("../util/tryCatch"),a=e("../util/errorObject");r.distinctUntilChanged=n;var u=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.compare,this.keySelector))},e}(),c=function(e){function t(t,r,n){e.call(this,t),this.keySelector=n,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}return i(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=this.keySelector,r=e;if(t&&(r=s.tryCatch(this.keySelector)(e),r===a.errorObject))return this.destination.error(a.errorObject.e);var n=!1;if(this.hasKey){if(n=s.tryCatch(this.compare)(this.key,r),n===a.errorObject)return this.destination.error(a.errorObject.e)}else this.hasKey=!0;Boolean(n)===!1&&(this.key=r,this.destination.next(e))},t}(o.Subscriber)},{"../Subscriber":255,"../util/errorObject":298,"../util/tryCatch":309}],279:[function(e,t,r){"use strict";function n(e,t){return this.lift(new s(e,t))}var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=e("../Subscriber");r.filter=n;var s=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t._subscribe(new a(e,this.predicate,this.thisArg))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.thisArg=n,this.count=0,this.predicate=r}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(o.Subscriber)},{"../Subscriber":255}],280:[function(e,t,r){"use strict";function n(e,t,r){return this.lift(new a(e,t,r,this))}var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=e("../Subscriber"),s=e("../util/EmptyError");r.first=n;var a=function(){function e(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),u=function(e){function t(t,r,n,i,o){e.call(this,t),this.predicate=r,this.resultSelector=n,this.defaultValue=i,this.source=o,this.index=0,this.hasCompleted=!1,this._emitted=!1}return i(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}r&&this._emit(e,t)},t.prototype._emit=function(e,t){return this.resultSelector?void this._tryResultSelector(e,t):void this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this._emitFinal(r)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?this.hasCompleted||e.error(new s.EmptyError):(e.next(this.defaultValue),e.complete())},t}(o.Subscriber)},{"../Subscriber":255,"../util/EmptyError":294}],281:[function(e,t,r){"use strict";function n(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new s(e,t))}var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=e("../Subscriber");r.map=n;var s=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t._subscribe(new a(e,this.project,this.thisArg))},e}();r.MapOperator=s;var a=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.count=0,this.thisArg=n||this}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(o.Subscriber)},{"../Subscriber":255}],282:[function(e,t,r){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(i.apply(void 0,[this].concat(e)))}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return a.isScheduler(i)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof i&&(r=e.pop()),null===n&&1===e.length?e[0]:new o.ArrayObservable(e,n).lift(new s.MergeAllOperator(r))}var o=e("../observable/ArrayObservable"),s=e("./mergeAll"),a=e("../util/isScheduler");r.merge=n,r.mergeStatic=i},{"../observable/ArrayObservable":268,"../util/isScheduler":305,"./mergeAll":283}],283:[function(e,t,r){"use strict";function n(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new a(e))}var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=e("../OuterSubscriber"),s=e("../util/subscribeToResult");r.mergeAll=n;var a=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.concurrent))},e}();r.MergeAllOperator=a;var u=function(e){function t(t,r){e.call(this,t),this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(s.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber);r.MergeAllSubscriber=u},{"../OuterSubscriber":251,"../util/subscribeToResult":307}],284:[function(e,t,r){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];u.isScheduler(r)?e.pop():r=null;var n=e.length;return 1===n?a.concatStatic(new o.ScalarObservable(e[0],r),this):n>1?a.concatStatic(new i.ArrayObservable(e,r),this):a.concatStatic(new s.EmptyObservable(r),this)}var i=e("../observable/ArrayObservable"),o=e("../observable/ScalarObservable"),s=e("../observable/EmptyObservable"),a=e("./concat"),u=e("../util/isScheduler");r.startWith=n},{"../observable/ArrayObservable":268,"../observable/EmptyObservable":269,"../observable/ScalarObservable":272,"../util/isScheduler":305,"./concat":276}],285:[function(e,t,r){"use strict";function n(e,t,r){void 0===t&&(t=null),void 0===r&&(r=o.async);var n=s.isDate(e),i=n?+e-r.now():Math.abs(e),a=t||new u.TimeoutError;return this.lift(new c(i,n,a,r))}var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=e("../scheduler/async"),s=e("../util/isDate"),a=e("../Subscriber"),u=e("../util/TimeoutError");r.timeout=n;var c=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.errorToSend=r,this.scheduler=n}return e.prototype.call=function(e,t){return t._subscribe(new f(e,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler))},e}(),f=function(e){function t(t,r,n,i,o){e.call(this,t),this.absoluteTimeout=r,this.waitFor=n,this.errorToSend=i,this.scheduler=o,this.index=0,this._previousIndex=0,this._hasCompleted=!1,this.scheduleTimeout()}return i(t,e),Object.defineProperty(t.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),t.dispatchTimeout=function(e){var t=e.subscriber,r=e.index;t.hasCompleted||t.previousIndex!==r||t.notifyTimeout()},t.prototype.scheduleTimeout=function(){var e=this.index;this.scheduler.schedule(t.dispatchTimeout,this.waitFor,{subscriber:this,index:e}),this.index++,this._previousIndex=e},t.prototype._next=function(e){this.destination.next(e),this.absoluteTimeout||this.scheduleTimeout()},t.prototype._error=function(e){this.destination.error(e),this._hasCompleted=!0},t.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},t.prototype.notifyTimeout=function(){this.error(this.errorToSend)},t}(a.Subscriber)},{"../Subscriber":255,"../scheduler/async":290,"../util/TimeoutError":296,"../util/isDate":300}],286:[function(e,t,r){"use strict";function n(e){var t=this;if(e||(i.root.Rx&&i.root.Rx.config&&i.root.Rx.config.Promise?e=i.root.Rx.config.Promise:i.root.Promise&&(e=i.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})}var i=e("../util/root");r.toPromise=n},{"../util/root":306}],287:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Subscription"),o=function(e){function t(t,r){e.call(this)}return n(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i.Subscription);r.Action=o},{"../Subscription":256}],288:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,
new r)},i=e("../util/root"),o=e("./Action"),s=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r,this.pending=!1}return n(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),i.root.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){return void 0===r&&(r=0),null!==r&&this.delay===r?t:i.root.clearInterval(t)&&void 0||void 0},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);return r?r:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},t.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.delay=null,this.state=null,this.pending=!1,this.scheduler=null,n!==-1&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null))},t}(o.Action);r.AsyncAction=s},{"../util/root":306,"./Action":287}],289:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Scheduler"),o=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return n(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)return void t.push(e);var r;this.active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}},t}(i.Scheduler);r.AsyncScheduler=o},{"../Scheduler":252}],290:[function(e,t,r){"use strict";var n=e("./AsyncAction"),i=e("./AsyncScheduler");r.async=new i.AsyncScheduler(n.AsyncAction)},{"./AsyncAction":288,"./AsyncScheduler":289}],291:[function(e,t,r){"use strict";function n(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var r=e.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=e.Map;if(n)for(var i=Object.getOwnPropertyNames(n.prototype),o=0;o<i.length;++o){var s=i[o];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}var i=e("../util/root");r.symbolIteratorPonyfill=n,r.$$iterator=n(i.root)},{"../util/root":306}],292:[function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}var i=e("../util/root");r.getSymbolObservable=n,r.$$observable=n(i.root)},{"../util/root":306}],293:[function(e,t,r){"use strict";var n=e("../util/root"),i=n.root.Symbol;r.$$rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber"},{"../util/root":306}],294:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);r.EmptyError=i},{}],295:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);r.ObjectUnsubscribedError=i},{}],296:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){var t=e.call(this,"Timeout has occurred");this.name=t.name="TimeoutError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);r.TimeoutError=i},{}],297:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t){e.call(this),this.errors=t;var r=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return n(t,e),t}(Error);r.UnsubscriptionError=i},{}],298:[function(e,t,r){"use strict";r.errorObject={e:{}}},{}],299:[function(e,t,r){"use strict";r.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},{}],300:[function(e,t,r){"use strict";function n(e){return e instanceof Date&&!isNaN(+e)}r.isDate=n},{}],301:[function(e,t,r){"use strict";function n(e){return"function"==typeof e}r.isFunction=n},{}],302:[function(e,t,r){"use strict";function n(e){return!i.isArray(e)&&e-parseFloat(e)+1>=0}var i=e("../util/isArray");r.isNumeric=n},{"../util/isArray":299}],303:[function(e,t,r){"use strict";function n(e){return null!=e&&"object"==typeof e}r.isObject=n},{}],304:[function(e,t,r){"use strict";function n(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}r.isPromise=n},{}],305:[function(e,t,r){"use strict";function n(e){return e&&"function"==typeof e.schedule}r.isScheduler=n},{}],306:[function(e,t,r){(function(e){"use strict";if(r.root="object"==typeof window&&window.window===window&&window||"object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e,!r.root)throw new Error("RxJS could not find any global context (window, self, global)")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],307:[function(e,t,r){"use strict";function n(e,t,r,n){var l=new c.InnerSubscriber(e,r,n);if(l.closed)return null;if(t instanceof a.Observable)return t._isScalar?(l.next(t.value),l.complete(),null):t.subscribe(l);if(o.isArray(t)){for(var h=0,d=t.length;h<d&&!l.closed;h++)l.next(t[h]);l.closed||l.complete()}else{if(s.isPromise(t))return t.then(function(e){l.closed||(l.next(e),l.complete())},function(e){return l.error(e)}).then(null,function(e){i.root.setTimeout(function(){throw e})}),l;if("function"==typeof t[u.$$iterator])for(var p=t[u.$$iterator]();;){var y=p.next();if(y.done){l.complete();break}if(l.next(y.value),l.closed)break}else if("function"==typeof t[f.$$observable]){var v=t[f.$$observable]();if("function"==typeof v.subscribe)return v.subscribe(new c.InnerSubscriber(e,r,n));l.error(new Error("invalid observable"))}else l.error(new TypeError("unknown type returned"))}return null}var i=e("./root"),o=e("./isArray"),s=e("./isPromise"),a=e("../Observable"),u=e("../symbol/iterator"),c=e("../InnerSubscriber"),f=e("../symbol/observable");r.subscribeToResult=n},{"../InnerSubscriber":247,"../Observable":249,"../symbol/iterator":291,"../symbol/observable":292,"./isArray":299,"./isPromise":304,"./root":306}],308:[function(e,t,r){"use strict";function n(e,t,r){if(e){if(e instanceof i.Subscriber)return e;if(e[o.$$rxSubscriber])return e[o.$$rxSubscriber]()}return e||t||r?new i.Subscriber(e,t,r):new i.Subscriber(s.empty)}var i=e("../Subscriber"),o=e("../symbol/rxSubscriber"),s=e("../Observer");r.toSubscriber=n},{"../Observer":250,"../Subscriber":255,"../symbol/rxSubscriber":293}],309:[function(e,t,r){"use strict";function n(){try{return o.apply(this,arguments)}catch(e){return s.errorObject.e=e,s.errorObject}}function i(e){return o=e,n}var o,s=e("./errorObject");r.tryCatch=i},{"./errorObject":298}],310:[function(e,t,r){(function(){var e={}.hasOwnProperty,r=[].slice;t.exports=function(t,n){var i,o,s,a;o=[],a=[];for(i in n)e.call(n,i)&&(s=n[i],"this"!==i&&(o.push(i),a.push(s)));return Function.apply(null,r.call(o).concat([t])).apply(n.this,a)}}).call(this)},{}],311:[function(e,t,r){t.exports=function(e,t,r){var n=[],i=e.length;if(0===i)return n;var o=t<0?Math.max(0,t+i):t||0;for(void 0!==r&&(i=r<0?r+i:r);i-- >o;)n[i-o]=e[i];return n}},{}],312:[function(e,t,r){!function(e){if("object"==typeof r)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var n;try{n=window}catch(e){n=self}n.SparkMD5=e()}}(function(e){"use strict";var t=function(e,t){return e+t&4294967295},r=function(e,r,n,i,o,s){return r=t(t(r,e),t(i,s)),t(r<<o|r>>>32-o,n)},n=function(e,t,n,i,o,s,a){return r(t&n|~t&i,e,t,o,s,a)},i=function(e,t,n,i,o,s,a){return r(t&i|n&~i,e,t,o,s,a)},o=function(e,t,n,i,o,s,a){return r(t^n^i,e,t,o,s,a)},s=function(e,t,n,i,o,s,a){return r(n^(t|~i),e,t,o,s,a)},a=function(e,r){var a=e[0],u=e[1],c=e[2],f=e[3];a=n(a,u,c,f,r[0],7,-680876936),f=n(f,a,u,c,r[1],12,-389564586),c=n(c,f,a,u,r[2],17,606105819),u=n(u,c,f,a,r[3],22,-1044525330),a=n(a,u,c,f,r[4],7,-176418897),f=n(f,a,u,c,r[5],12,1200080426),c=n(c,f,a,u,r[6],17,-1473231341),u=n(u,c,f,a,r[7],22,-45705983),a=n(a,u,c,f,r[8],7,1770035416),f=n(f,a,u,c,r[9],12,-1958414417),c=n(c,f,a,u,r[10],17,-42063),u=n(u,c,f,a,r[11],22,-1990404162),a=n(a,u,c,f,r[12],7,1804603682),f=n(f,a,u,c,r[13],12,-40341101),c=n(c,f,a,u,r[14],17,-1502002290),u=n(u,c,f,a,r[15],22,1236535329),a=i(a,u,c,f,r[1],5,-165796510),f=i(f,a,u,c,r[6],9,-1069501632),c=i(c,f,a,u,r[11],14,643717713),u=i(u,c,f,a,r[0],20,-373897302),a=i(a,u,c,f,r[5],5,-701558691),f=i(f,a,u,c,r[10],9,38016083),c=i(c,f,a,u,r[15],14,-660478335),u=i(u,c,f,a,r[4],20,-405537848),a=i(a,u,c,f,r[9],5,568446438),f=i(f,a,u,c,r[14],9,-1019803690),c=i(c,f,a,u,r[3],14,-187363961),u=i(u,c,f,a,r[8],20,1163531501),a=i(a,u,c,f,r[13],5,-1444681467),f=i(f,a,u,c,r[2],9,-51403784),c=i(c,f,a,u,r[7],14,1735328473),u=i(u,c,f,a,r[12],20,-1926607734),a=o(a,u,c,f,r[5],4,-378558),f=o(f,a,u,c,r[8],11,-2022574463),c=o(c,f,a,u,r[11],16,1839030562),u=o(u,c,f,a,r[14],23,-35309556),a=o(a,u,c,f,r[1],4,-1530992060),f=o(f,a,u,c,r[4],11,1272893353),c=o(c,f,a,u,r[7],16,-155497632),u=o(u,c,f,a,r[10],23,-1094730640),a=o(a,u,c,f,r[13],4,681279174),f=o(f,a,u,c,r[0],11,-358537222),c=o(c,f,a,u,r[3],16,-722521979),u=o(u,c,f,a,r[6],23,76029189),a=o(a,u,c,f,r[9],4,-640364487),f=o(f,a,u,c,r[12],11,-421815835),c=o(c,f,a,u,r[15],16,530742520),u=o(u,c,f,a,r[2],23,-995338651),a=s(a,u,c,f,r[0],6,-198630844),f=s(f,a,u,c,r[7],10,1126891415),c=s(c,f,a,u,r[14],15,-1416354905),u=s(u,c,f,a,r[5],21,-57434055),a=s(a,u,c,f,r[12],6,1700485571),f=s(f,a,u,c,r[3],10,-1894986606),c=s(c,f,a,u,r[10],15,-1051523),u=s(u,c,f,a,r[1],21,-2054922799),a=s(a,u,c,f,r[8],6,1873313359),f=s(f,a,u,c,r[15],10,-30611744),c=s(c,f,a,u,r[6],15,-1560198380),u=s(u,c,f,a,r[13],21,1309151649),a=s(a,u,c,f,r[4],6,-145523070),f=s(f,a,u,c,r[11],10,-1120210379),c=s(c,f,a,u,r[2],15,718787259),u=s(u,c,f,a,r[9],21,-343485551),e[0]=t(a,e[0]),e[1]=t(u,e[1]),e[2]=t(c,e[2]),e[3]=t(f,e[3])},u=function(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r},c=function(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r},f=function(e){var t,r,n,i,o,s,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)a(f,u(e.substring(t-64,t)));for(e=e.substring(t-64),r=e.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(a(f,n),t=0;t<16;t+=1)n[t]=0;return i=8*c,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),s=parseInt(i[1],16)||0,n[14]=o,n[15]=s,a(f,n),f},l=function(e){var t,r,n,i,o,s,u=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)a(f,c(e.subarray(t-64,t)));for(e=t-64<u?e.subarray(t-64):new Uint8Array(0),r=e.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)n[t>>2]|=e[t]<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(a(f,n),t=0;t<16;t+=1)n[t]=0;return i=8*u,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),s=parseInt(i[1],16)||0,n[14]=o,n[15]=s,a(f,n),f},h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],d=function(e){var t,r="";for(t=0;t<4;t+=1)r+=h[e>>8*t+4&15]+h[e>>8*t&15];return r},p=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=d(e[t]);return e.join("")},y=function(e){return p(f(e))},v=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==y("hello")&&(t=function(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}),v.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},v.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,r=this._buff.length;for(t=64;t<=r;t+=64)a(this._state,u(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},v.prototype.end=function(e){var t,r,n=this._buff,i=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),r=e?this._state:p(this._state),this.reset(),r},v.prototype._finish=function(e,t){var r,n,i,o=t;if(e[o>>2]|=128<<(o%4<<3),o>55)for(a(this._state,e),o=0;o<16;o+=1)e[o]=0;r=8*this._length,r=r.toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(r[2],16),i=parseInt(r[1],16)||0,e[14]=n,e[15]=i,a(this._state,e)},v.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},v.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},v.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var r=f(e);return t?r:p(r)},v.hashBinary=function(e,t){var r=f(e);return t?r:p(r)},v.ArrayBuffer=function(){this.reset()},v.ArrayBuffer.prototype.append=function(e){var t,r=this._concatArrayBuffer(this._buff,e),n=r.length;for(this._length+=e.byteLength,t=64;t<=n;t+=64)a(this._state,c(r.subarray(t-64,t)));return this._buff=t-64<n?r.subarray(t-64):new Uint8Array(0),this},v.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,i=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=n[t]<<(t%4<<3);return this._finish(o,i),r=e?this._state:p(this._state),this.reset(),r},v.ArrayBuffer.prototype._finish=v.prototype._finish,v.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},v.ArrayBuffer.prototype.destroy=v.prototype.destroy,v.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var r=e.length,n=new Uint8Array(r+t.byteLength);return n.set(e),n.set(new Uint8Array(t),r),n},v.ArrayBuffer.hash=function(e,t){var r=l(new Uint8Array(e));return t?r:p(r)},v})},{}],313:[function(e,t,r){function n(){i.call(this)}t.exports=n;var i=e("events").EventEmitter,o=e("inherits");o(n,i),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function o(){f||(f=!0,e.end())}function s(){f||(f=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",r),e.removeListener("drain",n),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),e.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",r),e.on("drain",n),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",s));var f=!1;return c.on("error",a),e.on("error",a),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},{events:137,inherits:143,"readable-stream/duplex.js":315,"readable-stream/passthrough.js":322,"readable-stream/readable.js":323,"readable-stream/transform.js":324,"readable-stream/writable.js":325}],314:[function(e,t,r){arguments[4][33][0].apply(r,arguments)},{dup:33}],315:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":316}],316:[function(e,t,r){arguments[4][179][0].apply(r,arguments)},{"./_stream_readable":318,"./_stream_writable":320,"core-util-is":117,dup:179,inherits:143,"process-nextick-args":229}],317:[function(e,t,r){"use strict";function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.exports=n;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":319,"core-util-is":117,inherits:143}],318:[function(e,t,r){(function(r){"use strict";function n(e,t,r){return"function"==typeof e.prependListener?e.prependListener(t,r):void(e._events&&e._events[t]?B(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r))}function i(t,r){C=C||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof C&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new F,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(N||(N=e("string_decoder/").StringDecoder),this.decoder=new N(t.encoding),this.encoding=t.encoding)}function o(t){return C=C||e("./_stream_duplex"),this instanceof o?(this._readableState=new i(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void P.call(this)):new o(t)}function s(e,t,r,n,i){var o=f(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,l(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var c;!t.decoder||i||n||(r=t.decoder.write(r),c=!t.objectMode&&0===r.length),i||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&h(e))),p(e,t)}else i||(t.reading=!1);return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function u(e){return e>=$?e=$:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function c(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=u(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function f(e,t){var r=null;return I.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function l(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,h(e)}}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(q("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?R(d,e):d(e))}function d(e){q("emit readable"),e.emit("readable"),_(e)}function p(e,t){t.readingMore||(t.readingMore=!0,R(y,e,t))}function y(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(q("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function v(e){return function(){var t=e._readableState;q("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&T(e,"data")&&(t.flowing=!0,_(e))}}function b(e){q("readable nexttick read 0"),e.read(0)}function m(e,t){t.resumeScheduled||(t.resumeScheduled=!0,R(g,e,t))}function g(e,t){t.reading||(q("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),_(e),t.flowing&&!t.reading&&e.read(0)}function _(e){var t=e._readableState;for(q("flow",t.flowing);t.flowing&&null!==e.read(););}function w(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=x(e,t.buffer,t.decoder),r}function x(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?k(e,t):E(e,t),n}function k(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(i+=s===o.length?o:o.slice(0,e),e-=s,0===e){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}function E(e,t){var r=D.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),e-=s,0===e){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}function S(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,R(j,t,e))}function j(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function O(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function A(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}t.exports=o;var C,R=e("process-nextick-args"),B=e("isarray");o.ReadableState=i;var P,T=(e("events").EventEmitter,function(e,t){return e.listeners(t).length});!function(){try{P=e("stream")}catch(e){}finally{P||(P=e("events").EventEmitter)}}();var I=e("buffer").Buffer,D=e("buffer-shims"),M=e("core-util-is");M.inherits=e("inherits");var L=e("util"),q=void 0;q=L&&L.debuglog?L.debuglog("stream"):function(){};var N,F=e("./internal/streams/BufferList");M.inherits(o,P),o.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding,t!==r.encoding&&(e=D.from(e,t),t="")),s(this,r,e,t,!1)},o.prototype.unshift=function(e){var t=this._readableState;return s(this,t,e,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(t){return N||(N=e("string_decoder/").StringDecoder),this._readableState.decoder=new N(t),this._readableState.encoding=t,this};var $=8388608;o.prototype.read=function(e){q("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return q("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?S(this):h(this),null;if(e=c(e,t),0===e&&t.ended)return 0===t.length&&S(this),null;var n=t.needReadable;q("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,q("length less than watermark",n)),t.ended||t.reading?(n=!1,q("reading or ended",n)):n&&(q("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=c(r,t)));var i;return i=e>0?w(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&S(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,t){function i(e){q("onunpipe"),e===h&&s()}function o(){q("onend"),e.end()}function s(){q("cleanup"),e.removeListener("close",c),e.removeListener("finish",f),e.removeListener("drain",b),e.removeListener("error",u),e.removeListener("unpipe",i),h.removeListener("end",o),h.removeListener("end",s),h.removeListener("data",a),m=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||b()}function a(t){q("ondata"),g=!1;var r=e.write(t);!1!==r||g||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&A(d.pipes,e)!==-1)&&!m&&(q("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,g=!0),h.pause())}function u(t){q("onerror",t),l(),e.removeListener("error",u),0===T(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",f),l()}function f(){q("onfinish"),e.removeListener("close",c),l()}function l(){q("unpipe"),h.unpipe(e)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,q("pipe count=%d opts=%j",d.pipesCount,t);var p=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,y=p?o:s;d.endEmitted?R(y):h.once("end",y),e.on("unpipe",i);var b=v(h);e.on("drain",b);var m=!1,g=!1;return h.on("data",a),n(e,"error",u),e.once("close",c),e.once("finish",f),e.emit("pipe",h),d.flowing||(q("pipe resume"),h.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=A(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var r=P.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&h(this,n):R(b,this))}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(q("resume"),e.flowing=!0,m(this,e)),this},o.prototype.pause=function(){return q("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(q("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(q("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(q("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=n.push(i);o||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return O(o,function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){q("wrapped _read",t),r&&(r=!1,e.resume())},n},o._fromList=w}).call(this,e("_process"))},{"./_stream_duplex":316,"./internal/streams/BufferList":321,_process:230,buffer:32,"buffer-shims":31,"core-util-is":117,events:137,inherits:143,isarray:314,"process-nextick-args":229,"string_decoder/":326,util:30}],319:[function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){s(t,e,r)}):s(t)})}function s(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=o;var a=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":316,"core-util-is":117,inherits:143}],320:[function(e,t,r){(function(r){"use strict";function n(){}function i(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function o(t,r){k=k||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof k&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new x(this)}function s(t){return k=k||e("./_stream_duplex"),B.call(s,this)||this instanceof k?(this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void O.call(this)):new s(t)}function a(e,t){var r=new Error("write after end");e.emit("error",r),E(t,r)}function u(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):C.isBuffer(r)||"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),E(n,o),i=!1),i}function c(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=R.from(t,r)),t}function f(e,t,r,n,o){r=c(t,r,n),C.isBuffer(r)&&(n="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new i(r,n,o),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else l(e,t,!1,s,r,n,o);return a}function l(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,r,n,i){--t.pendingcb,r?E(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(d(r),t)h(e,r,n,t,i);else{var o=m(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||b(e,r),n?S(y,e,r,o,i):y(e,r,o,i)}}function y(e,t,r,n){r||v(e,t),t.pendingcb--,n(),_(e,t)}function v(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function b(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;
o.entry=r;for(var s=0;r;)i[s]=r,r=r.next,s+=1;l(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new x(t)}else{for(;r;){var a=r.chunk,u=r.encoding,c=r.callback,f=t.objectMode?1:a.length;if(l(e,t,!1,f,a,u,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function m(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function g(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function _(e,t){var r=m(t);return r&&(0===t.pendingcb?(g(e,t),t.finished=!0,e.emit("finish")):g(e,t)),r}function w(e,t,r){t.ending=!0,_(e,t),r&&(t.finished?E(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function x(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}t.exports=s;var k,E=e("process-nextick-args"),S=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:E;s.WritableState=o;var j=e("core-util-is");j.inherits=e("inherits");var O,A={deprecate:e("util-deprecate")};!function(){try{O=e("stream")}catch(e){}finally{O||(O=e("events").EventEmitter)}}();var C=e("buffer").Buffer,R=e("buffer-shims");j.inherits(s,O),o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var B;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(B=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return!!B.call(this,e)||e&&e._writableState instanceof o}})):B=function(e){return e instanceof this},s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(e,t,r){var i=this._writableState,o=!1;return"function"==typeof t&&(r=t,t=null),C.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=n),i.ended?a(this,r):u(this,i,e,r)&&(i.pendingcb++,o=f(this,i,e,t,r)),o},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||b(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},s.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||w(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":316,_process:230,buffer:32,"buffer-shims":31,"core-util-is":117,events:137,inherits:143,"process-nextick-args":229,"util-deprecate":337}],321:[function(e,t,r){"use strict";function n(){this.head=null,this.tail=null,this.length=0}var i=(e("buffer").Buffer,e("buffer-shims"));t.exports=n,n.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},n.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},n.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},n.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t}},{buffer:32,"buffer-shims":31}],322:[function(e,t,r){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":317}],323:[function(e,t,r){(function(n){var i=function(){try{return e("stream")}catch(e){}}();r=t.exports=e("./lib/_stream_readable.js"),r.Stream=i||r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),!n.browser&&"disable"===n.env.READABLE_STREAM&&i&&(t.exports=i)}).call(this,e("_process"))},{"./lib/_stream_duplex.js":316,"./lib/_stream_passthrough.js":317,"./lib/_stream_readable.js":318,"./lib/_stream_transform.js":319,"./lib/_stream_writable.js":320,_process:230}],324:[function(e,t,r){arguments[4][183][0].apply(r,arguments)},{"./lib/_stream_transform.js":319,dup:183}],325:[function(e,t,r){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":320}],326:[function(e,t,r){function n(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,u=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,n=t.charCodeAt(i);if(n>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},{buffer:32}],327:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){return"function"==typeof e}function o(e){return i(e.prefix)?e.prefix():e}function s(e){var t={};for(var r in e)t[r]=e[r];return t}function a(e,t,r){function n(e,n,i,o){return t.encode([e,r.encodeKey(n,i,o)])}function i(e,t){return t&&t.options&&(e.keyEncoding=e.keyEncoding||t.options.keyEncoding,e.valueEncoding=e.valueEncoding||t.options.valueEncoding),e}return e.open(function(){}),{apply:function(t,s,a){s=s||{};for(var u=[],c=-1,f=t.length;++c<f;){var l=t[c];i(l,l.prefix),l.prefix=o(l.prefix),u.push({key:n(l.prefix,l.key,s,l),value:"del"!==l.type&&r.encodeValue(l.value,s,l),type:l.type})}e.db.batch(u,s,a)},get:function(t,i,o,s){return o.asBuffer=r.valueAsBuffer(o),e.db.get(n(i,t,o),o,function(e,t){e?s(e):s(null,r.decodeValue(t,o))})},createDecoder:function(e){return function(n,i){return{key:r.decodeKey(t.decode(n)[1],e),value:r.decodeValue(i,e)}}},isClosed:function(){return e.isClosed()},close:function(t){return e.close(t)},iterator:function(i){function o(e){return n(c,e,u,{})}function a(e){return{next:function(t){return e.next(t)},end:function(t){e.end(t)}}}var u=s(i||{}),c=i.prefix||[];return l.toLtgt(i,u,o,t.lowerBound,t.upperBound),u.prefix=null,u.keyAsBuffer=u.valueAsBuffer=!1,"number"!=typeof u.limit&&(u.limit=-1),u.keyAsBuffer=t.buffer,u.valueAsBuffer=r.valueAsBuffer(u),a(e.db.iterator(u))}}}function u(){Error.call(this)}function c(e,t){return this instanceof c?(_.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this._waiting=!1,this._options=e,void(this._makeData=t)):new c(e,t)}function f(e){return g(a(e,w,x),[],c,e.options)}var l=n(e("ltgt")),h=n(e("events")),d=n(e("inherits")),p=n(e("level-codec")),y=n(e("readable-stream"));d(u,Error),u.prototype.name="NotFoundError";var v=h.EventEmitter,b="6.5.4",m=new u,g=function(e,t,r,n){function i(e){var t,r={};if(n)for(t in n)"undefined"!=typeof n[t]&&(r[t]=n[t]);if(e)for(t in e)"undefined"!=typeof e[t]&&(r[t]=e[t]);return r}var o=new v;return o.sublevels={},o.options=n,o.version=b,o.methods={},t=t||[],o.put=function(r,n,s,a){"function"==typeof s&&(a=s,s={}),e.apply([{key:r,value:n,prefix:t.slice(),type:"put"}],i(s),function(e){return e?a(e):(o.emit("put",r,n),void a(null))})},o.prefix=function(){return t.slice()},o.batch=function(r,n,s){"function"==typeof n&&(s=n,n={}),r=r.map(function(e){return{key:e.key,value:e.value,prefix:e.prefix||t,keyEncoding:e.keyEncoding,valueEncoding:e.valueEncoding,type:e.type}}),e.apply(r,i(n),function(e){return e?s(e):(o.emit("batch",r),void s(null))})},o.get=function(r,n,o){"function"==typeof n&&(o=n,n={}),e.get(r,t,i(n),function(e,t){e?o(m):o(null,t)})},o.sublevel=function(n,s){return o.sublevels[n]=o.sublevels[n]||g(e,t.concat(n),r,i(s))},o.readStream=o.createReadStream=function(n){n=i(n),n.prefix=t;var o,s=e.iterator(n);return o=r(n,e.createDecoder(n)),o.setIterator(s),o},o.close=function(t){e.close(t)},o.isOpen=e.isOpen,o.isClosed=e.isClosed,o},_=y.Readable;d(c,_),c.prototype.setIterator=function(e){return this._iterator=e,this._destroyed?e.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this},c.prototype._read=function(){var e=this;if(!e._destroyed)return e._iterator?void e._iterator.next(function(t,r,n){return t||void 0===r&&void 0===n?(t||e._destroyed||e.push(null),e._cleanup(t)):(n=e._makeData(r,n),void(e._destroyed||e.push(n)))}):this._waiting=!0},c.prototype._cleanup=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;e&&t.emit("error",e),t._iterator?t._iterator.end(function(){t._iterator=null,t.emit("close")}):t.emit("close")}},c.prototype.destroy=function(){this._cleanup()};var w={encode:function(e){return""+e[0]+""+e[1]},decode:function(e){var t=e.toString(),r=t.indexOf("",1);return[t.substring(1,r),t.substring(r+1)]},lowerBound:"\0",upperBound:""},x=new p;t.exports=f},{events:137,inherits:143,"level-codec":152,ltgt:328,"readable-stream":334}],328:[function(e,t,r){(function(e){function t(e,t){return Object.hasOwnProperty.call(e,t)}function n(e){return void 0!==e&&""!==e}function t(e,t){return Object.hasOwnProperty.call(e,t)}function i(e,t){return Object.hasOwnProperty.call(e,t)&&t}function o(e){return e}r.compare=function(t,r){if(e.isBuffer(t)){for(var n=Math.min(t.length,r.length),i=0;i<n;i++){var o=t[i]-r[i];if(o)return o}return t.length-r.length}return t<r?-1:t>r?1:0};var s=r.lowerBoundKey=function(e){return i(e,"gt")||i(e,"gte")||i(e,"min")||(e.reverse?i(e,"end"):i(e,"start"))||void 0},a=r.lowerBound=function(e){var t=s(e);return t&&e[t]};r.lowerBoundInclusive=function(e){return!t(e,"gt")},r.upperBoundInclusive=function(e){return!(t(e,"lt")||!e.minEx)};var u=r.lowerBoundExclusive=function(e){return!(!t(e,"gt")&&!e.minEx)},c=r.upperBoundExclusive=function(e){return!!t(e,"lt")},f=r.upperBoundKey=function(e){return i(e,"lt")||i(e,"lte")||i(e,"max")||(e.reverse?i(e,"start"):i(e,"end"))||void 0},l=r.upperBound=function(e){var t=f(e);return t&&e[t]};r.toLtgt=function(e,n,i,s,a){n=n||{},i=i||o;var u=arguments.length>3,c=r.lowerBoundKey(e),f=r.upperBoundKey(e);return c?"gt"===c?n.gt=i(e.gt,!1):n.gte=i(e[c],!1):u&&(n.gte=i(s,!1)),f?"lt"===f?n.lt=i(e.lt,!0):n.lte=i(e[f],!0):u&&(n.lte=i(a,!0)),null!=e.reverse&&(n.reverse=!!e.reverse),t(n,"max")&&delete n.max,t(n,"min")&&delete n.min,t(n,"start")&&delete n.start,t(n,"end")&&delete n.end,n},r.contains=function(e,t,i){i=i||r.compare;var o=a(e);if(n(o)){var s=i(t,o);if(s<0||0===s&&u(e))return!1}var f=l(e);if(n(f)){var s=i(t,f);if(s>0||0===s&&c(e))return!1}return!0},r.filter=function(e,t){return function(n){return r.contains(e,n,t)}}}).call(this,{isBuffer:e("../../../is-buffer/index.js")})},{"../../../is-buffer/index.js":145}],329:[function(e,t,r){arguments[4][237][0].apply(r,arguments)},{"./_stream_readable":331,"./_stream_writable":333,_process:230,"core-util-is":117,dup:237,inherits:143}],330:[function(e,t,r){arguments[4][238][0].apply(r,arguments)},{"./_stream_transform":332,"core-util-is":117,dup:238,inherits:143}],331:[function(e,t,r){arguments[4][239][0].apply(r,arguments)},{_process:230,buffer:32,"core-util-is":117,dup:239,events:137,inherits:143,isarray:146,stream:313,"string_decoder/":326}],332:[function(e,t,r){arguments[4][240][0].apply(r,arguments)},{"./_stream_duplex":329,"core-util-is":117,dup:240,inherits:143}],333:[function(e,t,r){arguments[4][241][0].apply(r,arguments)},{"./_stream_duplex":329,_process:230,buffer:32,"core-util-is":117,dup:241,inherits:143,stream:313}],334:[function(e,t,r){var n=e("stream");r=t.exports=e("./lib/_stream_readable.js"),r.Stream=n,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":329,"./lib/_stream_passthrough.js":330,"./lib/_stream_readable.js":331,"./lib/_stream_transform.js":332,"./lib/_stream_writable.js":333,stream:313}],335:[function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&c.isObject(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return c.isString(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function s(e,t){return i(e,!1,!0).resolve(t)}function a(e,t){return e?i(e,!1,!0).resolveObject(t):t}var u=e("punycode"),c=e("./util");r.parse=i,r.resolve=s,r.resolveObject=a,r.format=o,r.Url=n;var f=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(d),y=["'"].concat(p),v=["%","/","?",";","#"].concat(y),b=["/","?","#"],m=255,g=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=e("querystring");n.prototype.parse=function(e,t,r){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=n!==-1&&n<e.indexOf("#")?"?":"#",o=e.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),e=o.join(i);var a=e;if(a=a.trim(),!r&&1===e.split("#").length){var l=h.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=E.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var d=f.exec(a);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,a=a.substr(d.length)}if(r||d||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===a.substr(0,2);!S||d&&x[d]||(a=a.substr(2),this.slashes=!0)}if(!x[d]&&(S||d&&!k[d])){for(var j=-1,O=0;O<b.length;O++){var A=a.indexOf(b[O]);A!==-1&&(j===-1||A<j)&&(j=A)}var C,R;R=j===-1?a.lastIndexOf("@"):a.lastIndexOf("@",j),R!==-1&&(C=a.slice(0,R),a=a.slice(R+1),this.auth=decodeURIComponent(C)),j=-1;for(var O=0;O<v.length;O++){var A=a.indexOf(v[O]);A!==-1&&(j===-1||A<j)&&(j=A)}j===-1&&(j=a.length),this.host=a.slice(0,j),a=a.slice(j),this.parseHost(),this.hostname=this.hostname||"";var B="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!B)for(var P=this.hostname.split(/\./),O=0,T=P.length;O<T;O++){var I=P[O];if(I&&!I.match(g)){for(var D="",M=0,L=I.length;M<L;M++)D+=I.charCodeAt(M)>127?"x":I[M];if(!D.match(g)){var q=P.slice(0,O),N=P.slice(O+1),F=I.match(_);F&&(q.push(F[1]),N.unshift(F[2])),N.length&&(a="/"+N.join(".")+a),this.hostname=q.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),B||(this.hostname=u.toASCII(this.hostname));var $=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+$,this.href+=this.host,B&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!w[p])for(var O=0,T=y.length;O<T;O++){var z=y[O];if(a.indexOf(z)!==-1){var W=encodeURIComponent(z);W===z&&(W=escape(z)),a=a.split(z).join(W)}}var V=a.indexOf("#");V!==-1&&(this.hash=a.substr(V),a=a.slice(0,V));var K=a.indexOf("?");if(K!==-1?(this.search=a.substr(K),this.query=a.substr(K+1),t&&(this.query=E.parse(this.query)),a=a.slice(0,K)):t&&(this.search="",this.query={}),a&&(this.pathname=a),k[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var $=this.pathname||"",J=this.search||"";this.path=$+J}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=E.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+i+r+s+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(c.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),u=0;u<a.length;u++){var f=a[u];"protocol"!==f&&(r[f]=e[f])}return k[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!k[e.protocol]){for(var l=Object.keys(e),h=0;h<l.length;h++){var d=l[h];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||x[e.protocol])r.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var y=r.pathname||"",v=r.search||"";r.path=y+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=m||b||r.host&&e.pathname,_=g,w=r.pathname&&r.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],E=r.protocol&&!k[r.protocol];if(E&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),g=g&&(""===p[0]||""===w[0])),m)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),r.search=e.search,r.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(E){r.hostname=r.host=w.shift();var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return r.search=e.search,r.query=e.query,c.isNull(r.pathname)&&c.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var j=w.slice(-1)[0],O=(r.host||e.host||w.length>1)&&("."===j||".."===j)||""===j,A=0,C=w.length;C>=0;C--)j=w[C],"."===j?w.splice(C,1):".."===j?(w.splice(C,1),A++):A&&(w.splice(C,1),A--);if(!g&&!_)for(;A--;A)w.unshift("..");!g||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),O&&"/"!==w.join("/").substr(-1)&&w.push("");var R=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(E){r.hostname=r.host=R?"":w.length?w.shift():"";var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return g=g||r.host&&w.length,g&&!R&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),c.isNull(r.pathname)&&c.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":336,punycode:232,querystring:235}],336:[function(e,t,r){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],337:[function(e,t,r){(function(e){function r(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var i=!1;return r}function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],338:[function(e,t,r){arguments[4][143][0].apply(r,arguments)},{dup:143}],339:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],340:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(t)?n.showHidden=t:t&&r._extend(n,t),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function s(e,t){return e}function a(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function u(e,t,n){if(e.customInspect&&t&&j(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return g(i)||(i=u(e,i,n)),i}var o=c(e,t);if(o)return o;var s=Object.keys(t),y=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),S(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(t);if(0===s.length){if(j(t)){var v=t.name?": "+t.name:"";return e.stylize("[Function"+v+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(S(t))return f(t)}var b="",m=!1,_=["{","}"];if(p(t)&&(m=!0,_=["[","]"]),j(t)){var w=t.name?": "+t.name:"";b=" [Function"+w+"]"}if(x(t)&&(b=" "+RegExp.prototype.toString.call(t)),E(t)&&(b=" "+Date.prototype.toUTCString.call(t)),S(t)&&(b=" "+f(t)),0===s.length&&(!m||0==t.length))return _[0]+b+_[1];if(n<0)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var k;return k=m?l(e,t,n,y,s):s.map(function(r){return h(e,t,n,y,r,m)}),e.seen.pop(),d(k,b,_)}function c(e,t){if(w(t))return e.stylize("undefined","undefined");if(g(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):y(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)B(t,String(s))?o.push(h(e,t,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,r,n,i,!0))}),o}function h(e,t,r,n,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),B(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=v(r)?u(e,c.value,null):u(e,c.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function d(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function p(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function v(e){return null===e}function b(e){return null==e}function m(e){return"number"==typeof e}function g(e){return"string"==typeof e}function _(e){return"symbol"==typeof e}function w(e){return void 0===e}function x(e){return k(e)&&"[object RegExp]"===A(e)}function k(e){return"object"==typeof e&&null!==e}function E(e){return k(e)&&"[object Date]"===A(e)}function S(e){return k(e)&&("[object Error]"===A(e)||e instanceof Error)}function j(e){return"function"==typeof e}function O(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function A(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}function R(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var P=/%[sdj%]/g;r.format=function(e){if(!g(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(e).replace(P,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];r<o;a=n[++r])s+=v(a)||!k(a)?" "+a:" "+i(a);return s},r.deprecate=function(e,i){function o(){if(!s){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),s=!0}return e.apply(this,arguments)}if(w(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return o};var T,I={};r.debuglog=function(e){if(w(T)&&(T=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!I[e])if(new RegExp("\\b"+e+"\\b","i").test(T)){var n=t.pid;I[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else I[e]=function(){};return I[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=p,r.isBoolean=y,r.isNull=v,r.isNullOrUndefined=b,r.isNumber=m,r.isString=g,r.isSymbol=_,r.isUndefined=w,r.isRegExp=x,r.isObject=k,r.isDate=E,r.isError=S,r.isFunction=j,r.isPrimitive=O,r.isBuffer=e("./support/isBuffer");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",R(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!k(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":339,_process:230,inherits:338}],341:[function(e,t,r){"use strict";function n(e,t,r){var n=r[r.length-1];e===n.element&&(r.pop(),n=r[r.length-1]);var i=n.element,o=n.index;if(Array.isArray(i))i.push(e);else if(o===t.length-2){var s=t.pop();i[s]=e}else t.push(e)}r.stringify=function(e){var t=[];t.push({obj:e});for(var r,n,i,o,s,a,u,c,f,l,h,d="";r=t.pop();)if(n=r.obj,i=r.prefix||"",o=r.val||"",d+=i,o)d+=o;else if("object"!=typeof n)d+="undefined"==typeof n?null:JSON.stringify(n);else if(null===n)d+="null";else if(Array.isArray(n)){for(t.push({val:"]"}),s=n.length-1;s>=0;s--)a=0===s?"":",",t.push({obj:n[s],prefix:a});t.push({val:"["})}else{u=[];for(c in n)n.hasOwnProperty(c)&&u.push(c);for(t.push({val:"}"}),s=u.length-1;s>=0;s--)f=u[s],l=n[f],h=s>0?",":"",h+=JSON.stringify(f)+":",t.push({obj:l,prefix:h});t.push({val:"{"})}return d},r.parse=function(e){for(var t,r,i,o,s,a,u,c,f,l=[],h=[],d=0;;)if(t=e[d++],"}"!==t&&"]"!==t&&"undefined"!=typeof t)switch(t){case" ":case"\t":case"\n":case":":case",":break;case"n":d+=3,n(null,l,h);break;case"t":d+=3,n(!0,l,h);break;case"f":d+=4,n(!1,l,h);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(r="",d--;;){if(i=e[d++],!/[\d\.\-e\+]/.test(i)){d--;break}r+=i}n(parseFloat(r),l,h);break;case'"':for(o="",s=void 0,a=0;;){if(u=e[d++],'"'===u&&("\\"!==s||a%2!==1))break;o+=u,s=u,"\\"===s?a++:a=0}n(JSON.parse('"'+o+'"'),l,h);break;case"[":c={element:[],index:l.length},l.push(c.element),h.push(c);break;case"{":f={element:{},index:l.length},l.push(f.element),h.push(f);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===l.length)return l.pop();n(l.pop(),l,h)}}},{}],342:[function(e,t,r){function n(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)i.call(r,n)&&(e[n]=r[n])}return e}t.exports=n;var i=Object.prototype.hasOwnProperty},{}]},{},[9]);