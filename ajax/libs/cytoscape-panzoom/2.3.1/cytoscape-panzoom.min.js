!function(){"use strict";var o=function(o,n){o&&(n.fn.cyPanzoom=n.fn.cytoscapePanzoom=function(o){return a.apply(this,[o,n]),this},o("core","panzoom",function(o){var t=this;return a.apply(t.container(),[o,n]),this}))},n={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"},a=function(o,a){var t=a.extend(!0,{},n,o),e=o,i={destroy:function(){var o=a(this),n=o.find(".cy-panzoom");n.data("winbdgs").forEach(function(o){a(window).unbind(o.evt,o.fn)}),n.data("cybdgs").forEach(function(n){o.cytoscape("get").off(n.evt,n.fn)}),n.remove()},init:function(){"ontouchstart"in window;return a(this).each(function(){function o(o){var n={x:o.originalEvent.pageX-P.offset().left-P.width()/2,y:o.originalEvent.pageY-P.offset().top-P.height()/2},a=t.panDragAreaSize,e=Math.sqrt(n.x*n.x+n.y*n.y),i=Math.min(e/a,1);if(e<t.panInactiveArea)return{x:NaN,y:NaN};n={x:n.x/e,y:n.y/e},i=Math.max(t.panMinPercentSpeed,i);var c={x:-1*n.x*(i*t.panDistance),y:-1*n.y*(i*t.panDistance)};return c}function n(){clearInterval(C),y("mousemove",Y),k.hide()}function e(o){var n=o,a=Math.sqrt(n.x*n.x+n.y*n.y),e={x:-1*n.x/a,y:-1*n.y/a},i=P.width(),c=P.height(),p=a/t.panDistance,s=Math.max(t.panIndicatorMinOpacity,p),r=255-Math.round(255*s);k.show().css({left:i/2*e.x+i/2,top:c/2*e.y+c/2,background:"rgb("+r+", "+r+", "+r+")"})}function i(){var o=u.cytoscape("get");o.pan(),o.zoom();E=u.width()/2,q=u.height()/2}function c(){F=!0,i()}function p(){F=!1}function s(o){var n=u.cytoscape("get");F||i(),n.zoom({level:o,renderedPosition:{x:E,y:q}})}function r(o,n){void 0===n&&(n=0);var a=X,e=0+a,i=I.height()-Z.height()-2*a,c=o.pageY-I.offset().top-n;e>c&&(c=e),c>i&&(c=i);var p=1-(c-e)/(i-e);Z.css("top",c);var r=t.minZoom,d=t.maxZoom,m=Math.log(r)/Math.log(d),u=(1-m)*p+m,v=Math.pow(d,u);r>v?v=r:v>d&&(v=d),s(v)}function d(){var o=u.cytoscape("get"),n=o.zoom(),a=t.minZoom,e=t.maxZoom,i=Math.log(a)/Math.log(e),c=Math.log(n)/Math.log(e),p=1-(c-i)/(1-i),s=X,r=I.height()-Z.height()-2*X,d=p*(r-s);s>d&&(d=s),d>r&&(d=r),Z.css("top",d)}function m(o,n){var a;o.bind("mousedown",function(o){if(o.preventDefault(),o.stopPropagation(),0==o.button){var e=u.cytoscape("get"),i=function(){var o=e.zoom(),a=e.zoom()*n;a<t.minZoom&&(a=t.minZoom),a>t.maxZoom&&(a=t.maxZoom),a==t.maxZoom&&o==t.maxZoom||a==t.minZoom&&o==t.minZoom||s(a)};return c(),i(),a=setInterval(i,t.zoomDelay),!1}}),l("mouseup blur",function(){clearInterval(a),p()})}var u=a(this),v=[],f=a(window),l=function(o,n){v.push({evt:o,fn:n}),f.bind(o,n)},y=function(o,n){for(var a=0;a<v.length;a++){var t=v[a];if(t.evt===o&&t.fn===n){v.splice(a,1);break}}f.unbind(o,n)},h=[],z=u.cytoscape("get"),g=function(o,n){h.push({evt:o,fn:n}),z.on(o,n)},b=a('<div class="cy-panzoom"></div>');u.prepend(b),b.css("position","absolute"),b.data("winbdgs",v),b.data("cybdgs",h),t.zoomOnly&&b.addClass("cy-panzoom-zoom-only");var x=a('<div class="cy-panzoom-zoom-in cy-panzoom-zoom-button"><span class="icon '+t.zoomInIcon+'"></span></div>');b.append(x);var w=a('<div class="cy-panzoom-zoom-out cy-panzoom-zoom-button"><span class="icon '+t.zoomOutIcon+'"></span></div>');b.append(w);var M=a('<div class="cy-panzoom-reset cy-panzoom-zoom-button"><span class="icon '+t.resetIcon+'"></span></div>');b.append(M);var I=a('<div class="cy-panzoom-slider"></div>');b.append(I),I.append('<div class="cy-panzoom-slider-background"></div>');var Z=a('<div class="cy-panzoom-slider-handle"><span class="icon '+t.sliderHandleIcon+'"></span></div>');I.append(Z);var D=a('<div class="cy-panzoom-no-zoom-tick"></div>');I.append(D);var P=a('<div class="cy-panzoom-panner"></div>');b.append(P);var N=a('<div class="cy-panzoom-panner-handle"></div>');P.append(N);var O=a('<div class="cy-panzoom-pan-up cy-panzoom-pan-button"></div>'),S=a('<div class="cy-panzoom-pan-down cy-panzoom-pan-button"></div>'),A=a('<div class="cy-panzoom-pan-left cy-panzoom-pan-button"></div>'),j=a('<div class="cy-panzoom-pan-right cy-panzoom-pan-button"></div>');P.append(O).append(S).append(A).append(j);var k=a('<div class="cy-panzoom-pan-indicator"></div>');P.append(k);var E,q,C,F=!1,Y=function(n){n.stopPropagation(),n.preventDefault(),clearInterval(C);var a=o(n);return isNaN(a.x)||isNaN(a.y)?void k.hide():(e(a),void(C=setInterval(function(){u.cytoscape("get").panBy(a)},t.panSpeed)))};N.bind("mousedown",function(o){Y(o),l("mousemove",Y)}),N.bind("mouseup",function(){n()}),l("mouseup blur",function(){n()}),I.bind("mousedown",function(){return!1});var H,Q,B=!1,X=2;Z.bind("mousedown",H=function(o){var n=o.target===Z[0]?o.offsetY:0;B=!0,c(),Z.addClass("active");var a=0;return l("mousemove",Q=function(o){var t=+new Date;return t>a+10?(a=t,r(o,n),!1):!1}),l("mouseup",function(){y("mousemove",Q),B=!1,Z.removeClass("active"),p()}),!1}),I.bind("mousedown",function(o){o.target!==Z[0]&&(H(o),r(o))}),d(),g("zoom",function(){B||d()}),function(){var o=1,n=t.minZoom,a=t.maxZoom,e=Math.log(n)/Math.log(a),i=Math.log(o)/Math.log(a),c=1-(i-e)/(1-e);if(c>1||0>c)return void D.hide();var p=X,s=I.height()-Z.height()-2*X,r=c*(s-p);p>r&&(r=p),r>s&&(r=s),D.css("top",r)}(),m(x,1+t.zoomFactor),m(w,1-t.zoomFactor),M.bind("mousedown",function(o){if(0==o.button){var n=u.cytoscape("get");return 0===n.elements().size()?n.reset():n.fit(t.fitPadding),!1}})})}};return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(a.error("No such function `"+e+"` for jquery.cytoscapePanzoom"),a(this)):i.init.apply(this,arguments)};"undefined"!=typeof module&&module.exports&&(module.exports=o),"undefined"!=typeof define&&define.amd&&define("cytoscape-panzoom",function(){return o}),"undefined"!=typeof cytoscape&&"undefined"!=typeof jQuery&&o(cytoscape,jQuery)}();
//# sourceMappingURL=cytoscape-panzoom.min.js.map