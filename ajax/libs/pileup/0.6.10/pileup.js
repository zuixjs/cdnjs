(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.pileup = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){t.Backbone=e(t,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){var s=t.Backbone,r=[],a=r.slice;e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,i){return c(this,"on",t,[e,i])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:i,ctx:i||this}),this):this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var s=this,r=i.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var s,r,a,o,h,u,l,d;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(o=t?[t]:i.keys(this._events),h=0,u=o.length;h<u;h++)if(t=o[h],a=this._events[t]){if(this._events[t]=s=[],e||n)for(l=0,d=a.length;l<d;l++)r=a[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&u(i,e),n&&u(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var a in s)t=s[a],t.off(e,n,this),(r||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},h=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(h.test(i)){for(var r=i.split(h),a=0,o=r.length;a<o;a++)t[e].apply(t,[r[a]].concat(n));return!1}return!0},u=function(t,e){var i,n=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},l={listenTo:"on",listenToOnce:"once"};i.each(l,function(t,e){o[e]=function(e,n,s){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=i.uniqueId("l"))]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),o.bind=o.on,o.unbind=o.off,i.extend(e,o);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,r,a,o,h,c,u,l;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;a=n.unset,h=n.silent,o=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),l=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],i.isEqual(l[s],e)||o.push(s),i.isEqual(u[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete l[s]:l[s]=e;if(!h){o.length&&(this._pending=n);for(var d=0,f=o.length;d<f;d++)this.trigger("change:"+o[d],this,l[o[d]],n)}if(c)return this;if(!h)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(s[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){if(!e.set(e.parse(i,t),t))return!1;n&&n(e,i,t),e.trigger("sync",e,i,t)},H(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,r,a,o=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},o,s)),void 0===n.parse&&(n.parse=!0);var h=this,c=n.success;return n.success=function(t){h.attributes=o;var e=h.parse(t,n);if(n.wait&&(e=i.extend(s||{},e)),i.isObject(e)&&!h.set(e,n))return!1;c&&c(h,t,n),h.trigger("sync",h,t,n)},H(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=s),a=this.sync(r,this,n),s&&n.wait&&(this.attributes=o),a},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;H(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||S();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});var f=["keys","values","pairs","invert","pick","omit"];i.each(f,function(t){d.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};i.extend(p.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,v))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var s,r,a,o;for(s=0,r=t.length;s<r;s++)(o=t[s]=this.get(t[s]))&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var s,r,a,o,h,c,u,l=e.at,f=this.model,p=this.comparator&&null==l&&!1!==e.sort,v=i.isString(this.comparator)?this.comparator:null,m=[],y=[],_={},b=e.add,w=e.merge,x=e.remove,E=!(p||!b||!x)&&[];for(s=0,r=t.length;s<r;s++){if(h=t[s]||{},a=h instanceof d?o=h:h[f.prototype.idAttribute||"id"],c=this.get(a))x&&(_[c.cid]=!0),w&&(h=h===o?o.attributes:h,e.parse&&(h=c.parse(h,e)),c.set(h,e),p&&!u&&c.hasChanged(v)&&(u=!0)),t[s]=c;else if(b){if(!(o=t[s]=this._prepareModel(h,e)))continue;m.push(o),this._addReference(o,e)}o=c||o,!E||!o.isNew()&&_[o.id]||E.push(o),_[o.id]=!0}if(x){for(s=0,r=this.length;s<r;++s)_[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,e)}if(m.length||E&&E.length)if(p&&(u=!0),this.length+=m.length,null!=l)for(s=0,r=m.length;s<r;s++)this.models.splice(l+s,0,m[s]);else{E&&(this.models.length=0);var k=E||m;for(s=0,r=k.length;s<r;s++)this.models.push(k[s])}if(u&&this.sort({silent:!0}),!e.silent){for(s=0,r=m.length;s<r;s++)(o=m[s]).trigger("add",o,this,e);(u||E&&E.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;n<s;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},H(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(m,function(t){p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){p.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)}});var _=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,b)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=["model","collection","el","id","attributes","className","tagName","events"];i.extend(_.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==i&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(/^(\S+)\s*(.*)$/),r=s[1],a=s[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n):this.$el.on(r,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,s){var r=x[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||S()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",r),o)return o.apply(this,arguments)}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&w&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,h,s),h};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};i.extend(E.prototype,o,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var a=r._extractParameters(t,i);r.execute(s,a),r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),e.history.trigger("route",r,n,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(t,e){return e?t:"([^/?]+)"}).replace(/\*\w+/g,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var k=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},$=/msie [\w.]+/;k.started=!1,i.extend(k.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(/\/$/,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(/^[#\/]|\s+$/g,"")},start:function(t){if(k.started)throw new Error("Backbone.history has already been started");k.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,r=$.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);if(this.root=("/"+this.root+"/").replace(/^\/+|\/+$/g,"/"),r&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(/^[#\/]|\s+$/g,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),k.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!k.started)return!1;e&&!0!==e||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(/#.*$/,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new k;var T=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};d.extend=p.extend=E.extend=_.extend=k.extend=T;var S=function(){throw new Error('A "url" property or function must be specified')},H=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e});

},{"underscore":178}],2:[function(require,module,exports){
var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h||r===u?62:r===c||r===f?63:r<o?-1:r<o+10?r-o+26+26:r<i+26?r-i:r<A+26?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;n<c;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}var e,n,a,h=t.length%3,c="";for(e=0,a=t.length-h;e<a;e+=3)n=(t[e]<<16)+(t[e+1]<<8)+t[e+2],c+=function(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}(n);switch(h){case 1:n=t[t.length-1],c+=r(n>>2),c+=r(n<<4&63),c+="==";break;case 2:n=(t[t.length-2]<<8)+t[t.length-1],c+=r(n>>10),c+=r(n>>4&63),c+=r(n<<2&63),c+="="}return c}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0),u="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);

},{}],3:[function(require,module,exports){
(function (global){
"use strict";function typedArraySupport(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(t){return this instanceof Buffer?(Buffer.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?fromNumber(this,t):"string"==typeof t?fromString(this,t,arguments.length>1?arguments[1]:"utf8"):fromObject(this,t)):arguments.length>1?new Buffer(t,arguments[1]):new Buffer(t)}function fromNumber(t,e){if(t=allocate(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;r++)t[r]=0;return t}function fromString(t,e,r){return"string"==typeof r&&""!==r||(r="utf8"),t=allocate(t,0|byteLength(e,r)),t.write(e,r),t}function fromObject(t,e){if(Buffer.isBuffer(e))return fromBuffer(t,e);if(isArray(e))return fromArray(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return fromTypedArray(t,e);if(e instanceof ArrayBuffer)return fromArrayBuffer(t,e)}return e.length?fromArrayLike(t,e):fromJsonObject(t,e)}function fromBuffer(t,e){var r=0|checked(e.length);return t=allocate(t,r),e.copy(t,0,0,r),t}function fromArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromTypedArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e){return Buffer.TYPED_ARRAY_SUPPORT?(e.byteLength,t=Buffer._augment(new Uint8Array(e))):t=fromTypedArray(t,new Uint8Array(e)),t}function fromArrayLike(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromJsonObject(t,e){var r,n=0;"Buffer"===e.type&&isArray(e.data)&&(r=e.data,n=0|checked(r.length)),t=allocate(t,n);for(var f=0;f<n;f+=1)t[f]=255&r[f];return t}function allocate(t,e){return Buffer.TYPED_ARRAY_SUPPORT?(t=Buffer._augment(new Uint8Array(e)),t.__proto__=Buffer.prototype):(t.length=e,t._isBuffer=!0),0!==e&&e<=Buffer.poolSize>>>1&&(t.parent=rootParent),t}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t,e){if(!(this instanceof SlowBuffer))return new SlowBuffer(t,e);var r=new Buffer(t,e);return delete r.parent,r}function byteLength(t,e){"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if(e|=0,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),e<0&&(e=0),r>this.length&&(r=this.length),r<=e)return"";for(;;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"binary":return binarySlice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function hexWrite(t,e,r,n){r=Number(r)||0;var f=t.length-r;n?(n=Number(n))>f&&(n=f):n=f;var i=e.length;if(i%2!=0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;o++){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function binaryWrite(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],f=e;f<r;){var i=t[f],o=null,u=i>239?4:i>223?3:i>191?2:1;if(f+u<=r){var s,a,h,c;switch(u){case 1:i<128&&(o=i);break;case 2:s=t[f+1],128==(192&s)&&(c=(31&i)<<6|63&s)>127&&(o=c);break;case 3:s=t[f+1],a=t[f+2],128==(192&s)&&128==(192&a)&&(c=(15&i)<<12|(63&s)<<6|63&a)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:s=t[f+1],a=t[f+2],h=t[f+3],128==(192&s)&&128==(192&a)&&128==(192&h)&&(c=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&h)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),f+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;f++)n+=String.fromCharCode(127&t[f]);return n}function binarySlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;f++)n+=String.fromCharCode(t[f]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=e;i<r;i++)f+=toHex(t[i]);return f}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,f,i){if(!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>f||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var f=0,i=Math.min(t.length-r,2);f<i;f++)t[r+f]=(e&255<<8*(n?f:1-f))>>>8*(n?f:1-f)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var f=0,i=Math.min(t.length-r,4);f<i;f++)t[r+f]=e>>>8*(n?f:3-f)&255}function checkIEEE754(t,e,r,n,f,i){if(e>f||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(r<0)throw new RangeError("index out of range")}function writeFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,f){return f||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,f=null,i=[],o=0;o<n;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!f){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),f=r;continue}r=65536+(f-55296<<10|r-56320)}else f&&(e-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,f,i=[],o=0;o<t.length&&!((e-=2)<0);o++)r=t.charCodeAt(o),n=r>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var f=0;f<n&&!(f+r>=e.length||f>=t.length);f++)e[f+r]=t[f];return f}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("isarray");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT?(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array):(Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0),Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,f=0,i=Math.min(r,n);f<i&&t[f]===e[f];)++f;return f!==i&&(r=t[f],n=e[f]),r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new Buffer(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new Buffer(e),f=0;for(r=0;r<t.length;r++){var i=t[r];i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:Buffer.compare(this,t)},Buffer.prototype.indexOf=function(t,e){function r(t,e,r){for(var n=-1,f=0;r+f<t.length;f++)if(t[r+f]===e[-1===n?0:f-n]){if(-1===n&&(n=f),f-n+1===e.length)return r+n}else n=-1;return-1}if(e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(e<0&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(Buffer.isBuffer(t))return r(this,t,e);if("number"==typeof t)return Buffer.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);throw new TypeError("val must be string, number or Buffer")},Buffer.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},Buffer.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var f=n;n=e,e=0|r,r=f}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"binary":return binaryWrite(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=Buffer._augment(this.subarray(t,e));else{var f=e-t;n=new Buffer(f,void 0);for(var i=0;i<f;i++)n[i]=this[i+t]}return n.length&&(n.parent=this.parent||this),n},Buffer.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return n},Buffer.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t+--e],f=1;e>0&&(f*=256);)n+=this[t+--e]*f;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return f*=128,n>=f&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=e,f=1,i=this[t+--n];n>0&&(f*=256);)i+=this[t+--n]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=1,i=0;for(this[e]=255&t;++i<r&&(f*=256);)this[e+i]=t/f&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=r-1,i=1;for(this[e+f]=255&t;--f>=0&&(i*=256);)this[e+f]=t/i&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=0,o=1,u=t<0?1:0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=r-1,o=1,u=t<0?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f,i=n-r;if(this===t&&r<e&&e<n)for(f=i-1;f>=0;f--)t[f+e]=this[f+r];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;f<i;f++)t[f+e]=this[f+r];else t._set(this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),r<e)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(e<0||e>=this.length)throw new RangeError("start out of bounds");if(r<0||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;n<r;n++)this[n]=t;else{var f=utf8ToBytes(t.toString()),i=f.length;for(n=e;n<r;n++)this[n]=f[n%i]}return this}},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;e<r;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(t){return t.constructor=Buffer,t._isBuffer=!0,t._set=t.set,t.get=BP.get,t.set=BP.set,t.write=BP.write,t.toString=BP.toString,t.toLocaleString=BP.toString,t.toJSON=BP.toJSON,t.equals=BP.equals,t.compare=BP.compare,t.indexOf=BP.indexOf,t.copy=BP.copy,t.slice=BP.slice,t.readUIntLE=BP.readUIntLE,t.readUIntBE=BP.readUIntBE,t.readUInt8=BP.readUInt8,t.readUInt16LE=BP.readUInt16LE,t.readUInt16BE=BP.readUInt16BE,t.readUInt32LE=BP.readUInt32LE,t.readUInt32BE=BP.readUInt32BE,t.readIntLE=BP.readIntLE,t.readIntBE=BP.readIntBE,t.readInt8=BP.readInt8,t.readInt16LE=BP.readInt16LE,t.readInt16BE=BP.readInt16BE,t.readInt32LE=BP.readInt32LE,t.readInt32BE=BP.readInt32BE,t.readFloatLE=BP.readFloatLE,t.readFloatBE=BP.readFloatBE,t.readDoubleLE=BP.readDoubleLE,t.readDoubleBE=BP.readDoubleBE,t.writeUInt8=BP.writeUInt8,t.writeUIntLE=BP.writeUIntLE,t.writeUIntBE=BP.writeUIntBE,t.writeUInt16LE=BP.writeUInt16LE,t.writeUInt16BE=BP.writeUInt16BE,t.writeUInt32LE=BP.writeUInt32LE,t.writeUInt32BE=BP.writeUInt32BE,t.writeIntLE=BP.writeIntLE,t.writeIntBE=BP.writeIntBE,t.writeInt8=BP.writeInt8,t.writeInt16LE=BP.writeInt16LE,t.writeInt16BE=BP.writeInt16BE,t.writeInt32LE=BP.writeInt32LE,t.writeInt32BE=BP.writeInt32BE,t.writeFloatLE=BP.writeFloatLE,t.writeFloatBE=BP.writeFloatBE,t.writeDoubleLE=BP.writeDoubleLE,t.writeDoubleBE=BP.writeDoubleBE,t.fill=BP.fill,t.inspect=BP.inspect,t.toArrayBuffer=BP.toArrayBuffer,t};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"base64-js":2,"ieee754":6,"isarray":4}],4:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};

},{}],5:[function(require,module,exports){
!function(){"use strict";function t(t,e,n){n=n||!1;for(var r in e)!function(r){"function"==typeof e[r]?n||(t[r]=e[r].bind(e)):Object.defineProperty(t,r,{get:function(){return e[r]},set:function(t){e[r]=t}})}(r)}function e(e){t(this,e),this.pushObject=this.popObject=this.reset=function(){}}function n(t){if(t instanceof HTMLCanvasElement)return n(t.getContext("2d"));var r=t;if(u)return u(r);for(var o=0;o<n.cache.length;o++){var i=n.cache[o];if(i[0]==r)return i[1]}var c=new e(r);return n.cache.push([r,c]),c}function r(e){t(this,e,!0);var n=[];this.calls=n;for(var i in e)(function(t){"function"==typeof e[t]&&(this[t]=function(){var r=Array.prototype.slice.call(arguments);return n.push([t].concat(r)),e[t].apply(e,arguments)})}).bind(this)(i);this.pushObject=function(t){n.push(["pushObject",t])},this.popObject=function(){n.push(["popObject"])},this.reset=function(){this.calls=n=[]};var c=this.drawImage;this.drawImage=function(t){var i=r.recorderForCanvas(t);i?(e.drawImage.apply(e,arguments),n=n.concat(o(i.calls,arguments)),this.calls=n):c.apply(e,arguments)}}function o(t,e){var n,r,o=e[0],a=0,s=0,u=o.width,h=o.height,d=o.width,p=o.height;3==e.length?(n=e[1],r=e[2]):5==e.length?(n=e[1],r=e[2],d=e[3],p=e[4]):9==e.length&&(a=e[1],s=e[2],u=e[3],h=e[4],n=e[5],r=e[6],d=e[7],p=e[8]);var v=i(a,a+u,n,n+d),g=c(a,a+u,n,n+d),b=i(s,s+h,r,r+p),C=c(s,s+h,r,r+p),w=function(t){var e=t.slice(),n=e[0];if(n in l){var r=l[n];"number"==typeof r&&(r=[r]),r.forEach(function(t){e[1+t]=g(e[1+t]),e[2+t]=C(e[2+t])})}if(n in f){var o=f[n];"number"==typeof o&&(o=[o]),o.forEach(function(t){e[1+t]*=v,e[2+t]*=b})}return e};return t.map(w)}function i(t,e,n,r){return(r-n)/(e-t)}function c(t,e,n,r){var o=i(t,e,n,r);return function(e){return n+o*(e-t)}}function a(t,e){if(t)return r.recorderForSelector(t,e);if(r.recorders){if(0==r.recorders.length)throw"Called a RecordingContext method, but no canvases are being recorded.";if(r.recorders.length>1)throw"Called a RecordingContext method while multiple canvases were being recorded. Specify one using a div and selector.";return r.recorders[0][1]}throw"You must call RecordingContext.recordAll() before using other RecordingContext static methods"}function s(e,n,r){function o(){c.hits.unshift(Array.prototype.slice.call(i)),c.hit=c.hits[0]}t(this,e);var i=[];this.hits=[],this.hit=null;var c=this;this.pushObject=function(t){i.unshift(t)},this.popObject=function(){i.shift()},this.reset=function(){this.hits=[],this.hit=null},this.clearRect=function(t,e,n,r){},this.fillRect=function(t,e,i,c){n>=t&&n<=t+i&&r>=e&&r<=e+c&&o()},this.strokeRect=function(t,e,n,r){},this.fill=function(t){e.isPointInPath(n,r)&&o()},this.stroke=function(){e.isPointInStroke(n,r)&&o()},this.fillText=function(t,e,n,r){},this.strokeText=function(t,e,n,r){}}var u=null;n.cache=[];var l={clearRect:0,fillRect:0,strokeRect:0,fillText:1,strokeText:1,moveTo:0,lineTo:0,bezierCurveTo:[0,2,4],quadraticCurveTo:[0,2],rect:0},f={clearRect:2,fillRect:2,strokeRect:2,rect:2};r.prototype.drawnObjectsWith=function(t){return t||(t=function(){return!0}),this.callsOf("pushObject").filter(function(e){return t(e[1])}).map(function(t){return t[1]})},r.prototype.drawnObjects=r.prototype.drawnObjectsWith,r.prototype.callsOf=function(t){return this.calls.filter(function(e){return e[0]==t})},r.recordAll=function(){if(null!=u)throw"You forgot to call RecordingContext.reset()";r.recorders=[],u=function(t){var e=r.recorderForCanvas(t.canvas);return e||(e=new r(t),r.recorders.push([t.canvas,e]),e)}},r.reset=function(){if(!u)throw"Called RecordingContext.reset() before RecordingContext.recordAll()";u=null,r.recorders=null},r.recorderForCanvas=function(t){var e=r.recorders;if(null==e)throw"You must call RecordingContext.recordAll() before using other RecordingContext static methods";for(var n=0;n<e.length;n++){var o=e[n];if(o[0]==t)return o[1]}return null},r.recorderForSelector=function(t,e){var n=t.querySelector(e+" canvas")||t.querySelector(e);if(!n)throw"Unable to find a canvas matching "+e;if(!(n instanceof HTMLCanvasElement))throw"Selector "+e+" neither matches nor contains a canvas";return r.recorderForCanvas(n)},r.drawnObjectsWith=function(t,e,n){"function"!=typeof t&&0!=arguments.length||(n=t,t=null);var r=a(t,e);return n=n||function(){return!0},r?r.drawnObjectsWith(n):[]},r.drawnObjects=r.drawnObjectsWith,r.callsOf=function(t,e,n){"string"==typeof t&&(n=t,t=null);var r=a(t,e);return r?r.callsOf(n):[]};var h={DataContext:e,RecordingContext:r,ClickTrackingContext:s,getDataContext:n};"undefined"!=typeof module?module.exports=h:window.dataCanvas=h}();

},{}],6:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};

},{}],7:[function(require,module,exports){
!function(t){var e=this;"object"==typeof exports?module.exports=t(e,require("jdataview")):"function"==typeof define&&define.amd?define(["jdataview"],function(i){return t(e,i)}):e.jBinary=t(e,e.jDataView)}(function(t,e){"use strict";function i(t,e){return e&&t instanceof e}function n(t){for(var e=1,i=arguments.length;i>e;++e){var n=arguments[e];for(var r in n)void 0!==n[r]&&(t[r]=n[r])}return t}function r(t){return arguments[0]=l(t),n.apply(null,arguments)}function a(t,e,n){return i(n,Function)?n.call(t,e.contexts[0]):n}function s(t){return function(){var e=arguments,n=e.length-1,r=t.length-1,a=e[n];if(e.length=r+1,!i(a,Function)){var s=this;return new f(function(i,n){e[r]=function(t,e){return t?n(t):i(e)},t.apply(s,e)})}e[n]=void 0,e[r]=a,t.apply(this,e)}}function o(t,n){return i(t,o)?t.as(n):(i(t,e)||(t=new e(t,void 0,void 0,n?n["jBinary.littleEndian"]:void 0)),i(this,o)?(this.view=t,this.view.seek(0),this.contexts=[],this.as(n,!0)):new o(t,n))}function h(t){return r(h.prototype,t)}function u(t){return r(u.prototype,t,{createProperty:function(){var e=(t.createProperty||u.prototype.createProperty).apply(this,arguments);return e.getBaseType&&(e.baseType=e.binary.getType(e.getBaseType(e.binary.contexts[0]))),e}})}var c=t.document;"atob"in t&&"btoa"in t||function(){function e(t){var e,i,r,a,s,o;for(r=t.length,i=0,e="";r>i;){if(a=255&t.charCodeAt(i++),i==r){e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4),e+="==";break}if(s=t.charCodeAt(i++),i==r){e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4|(240&s)>>4),e+=n.charAt((15&s)<<2),e+="=";break}o=t.charCodeAt(i++),e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4|(240&s)>>4),e+=n.charAt((15&s)<<2|(192&o)>>6),e+=n.charAt(63&o)}return e}function i(t){var e,i,n,a,s,o,h;for(o=t.length,s=0,h="";o>s;){do{e=r[255&t.charCodeAt(s++)]}while(o>s&&-1==e);if(-1==e)break;do{i=r[255&t.charCodeAt(s++)]}while(o>s&&-1==i);if(-1==i)break;h+=String.fromCharCode(e<<2|(48&i)>>4);do{if(61==(n=255&t.charCodeAt(s++)))return h;n=r[n]}while(o>s&&-1==n);if(-1==n)break;h+=String.fromCharCode((15&i)<<4|(60&n)>>2);do{if(61==(a=255&t.charCodeAt(s++)))return h;a=r[a]}while(o>s&&-1==a);if(-1==a)break;h+=String.fromCharCode((3&n)<<6|a)}return h}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];t.btoa||(t.btoa=e),t.atob||(t.atob=i)}();var f=t.Promise||function(t){this.then=t},l=Object.create;l||(l=function(t){var e=function(){};return e.prototype=t,new e});var p=o.prototype,y=p.typeSet={};p.toValue=function(t){return a(this,this,t)},p._named=function(t,e,i){return t.displayName=e+" @ "+(void 0!==i?i:this.view.tell()),t};var d=Object.defineProperty;if(d)try{d({},"x",{})}catch(t){d=void 0}else d=function(t,e,i,n){n&&(t[e]=i.value)};var v="jBinary.Cache",b=0;if(p._getCached=function(t,e,i){if(t.hasOwnProperty(this.cacheKey))return t[this.cacheKey];var n=e.call(this,t);return d(t,this.cacheKey,{value:n},i),n},p.getContext=function(t){switch(typeof t){case"undefined":t=0;case"number":return this.contexts[t];case"string":return this.getContext(function(e){return t in e});case"function":for(var e=0,i=this.contexts.length;i>e;e++){var n=this.contexts[e];if(t.call(this,n))return n}}},p.inContext=function(t,e){this.contexts.unshift(t);var i=e.call(this);return this.contexts.shift(),i},h.prototype={inherit:function(t,e){function i(t,e){var i=a[t];i&&(n||(n=r(a)),e.call(n,i),n[t]=null)}var n,a=this;return i("params",function(e){for(var i=0,n=e.length;n>i;i++)this[e[i]]=t[i]}),i("setParams",function(e){e.apply(this,t)}),i("typeParams",function(t){for(var i=0,n=t.length;n>i;i++){var r=t[i],a=this[r];a&&(this[r]=e(a))}}),i("resolve",function(t){t.call(this,e)}),n||a},createProperty:function(t){return r(this,{binary:t,view:t.view})},toValue:function(t,e){return!1!==e&&"string"==typeof t?this.binary.getContext(t)[t]:a(this,this.binary,t)}},o.Type=h,u.prototype=r(h.prototype,{setParams:function(){this.baseType&&(this.typeParams=["baseType"].concat(this.typeParams||[]))},baseRead:function(){return this.binary.read(this.baseType)},baseWrite:function(t){return this.binary.write(this.baseType,t)}}),n(u.prototype,{read:u.prototype.baseRead,write:u.prototype.baseWrite}),o.Template=u,p.as=function(t,e){var i=e?this:r(this);return t=t||y,i.typeSet=t===y||y.isPrototypeOf(t)?t:r(y,t),i.cacheKey=v,i.cacheKey=i._getCached(t,function(){return v+"."+ ++b},!0),i},p.seek=function(t,e){if(t=this.toValue(t),void 0!==e){var i=this.view.tell();this.view.seek(t);var n=e.call(this);return this.view.seek(i),n}return this.view.seek(t)},p.tell=function(){return this.view.tell()},p.skip=function(t,e){return this.seek(this.tell()+this.toValue(t),e)},p.slice=function(t,e,i){return new o(this.view.slice(t,e,i),this.typeSet)},p._getType=function(t,e){switch(typeof t){case"string":if(!(t in this.typeSet))throw new ReferenceError("Unknown type: "+t);return this._getType(this.typeSet[t],e);case"number":return this._getType(y.bitfield,[t]);case"object":if(i(t,h)){var n=this;return t.inherit(e||[],function(t){return n.getType(t)})}return i(t,Array)?this._getCached(t,function(t){return this.getType(t[0],t.slice(1))},!0):this._getCached(t,function(t){return this.getType(y.object,[t])},!1)}},p.getType=function(t,e){var n=this._getType(t,e);return n&&!i(t,h)&&(n.name="object"==typeof t?i(t,Array)?t[0]+"("+t.slice(1).join(", ")+")":"object":String(t)),n},p._action=function(t,e,i){if(void 0!==t){t=this.getType(t);var n=this._named(function(){return i.call(this,t.createProperty(this),this.contexts[0])},"["+t.name+"]",e);return void 0!==e?this.seek(e,n):n.call(this)}},p.read=function(t,e){return this._action(t,e,function(t,e){return t.read(e)})},p.readAll=function(){return this.read("jBinary.all",0)},p.write=function(t,e,i){return this._action(t,i,function(t,i){var n=this.tell();return t.write(e,i),this.tell()-n})},p.writeAll=function(t){return this.write("jBinary.all",t,0)},function(t,e){for(var i=0,n=e.length;n>i;i++){var a=e[i];y[a.toLowerCase()]=r(t,{dataType:a})}}(h({params:["littleEndian"],read:function(){return this.view["get"+this.dataType](void 0,this.littleEndian)},write:function(t){this.view["write"+this.dataType](t,this.littleEndian)}}),["Uint8","Uint16","Uint32","Uint64","Int8","Int16","Int32","Int64","Float32","Float64","Char"]),n(y,{byte:y.uint8,float:y.float32,double:y.float64}),y.array=u({params:["baseType","length"],read:function(){var t=this.toValue(this.length);if(this.baseType===y.uint8)return this.view.getBytes(t,void 0,!0,!0);var e;if(void 0!==t){e=new Array(t);for(var i=0;t>i;i++)e[i]=this.baseRead()}else{var n=this.view.byteLength;for(e=[];this.binary.tell()<n;)e.push(this.baseRead())}return e},write:function(t){if(this.baseType===y.uint8)return this.view.writeBytes(t);for(var e=0,i=t.length;i>e;e++)this.baseWrite(t[e])}}),y.binary=u({params:["length","typeSet"],read:function(){var t=this.binary.tell(),e=this.binary.skip(this.toValue(this.length));return new o(this.view.slice(t,e),this.typeSet)},write:function(t){this.binary.write("blob",t.read("blob",0))}}),y.bitfield=h({params:["bitSize"],read:function(){return this.view.getUnsigned(this.bitSize)},write:function(t){this.view.writeUnsigned(t,this.bitSize)}}),y.blob=h({params:["length"],read:function(){return this.view.getBytes(this.toValue(this.length))},write:function(t){this.view.writeBytes(t,!0)}}),y.const=u({params:["baseType","value","strict"],read:function(){var t=this.baseRead();if(this.strict&&t!==this.value){if(i(this.strict,Function))return this.strict(t);throw new TypeError("Unexpected value ("+t+" !== "+this.value+").")}return t},write:function(t){this.baseWrite(this.strict||void 0===t?this.value:t)}}),y.enum=u({params:["baseType","matches"],setParams:function(t,e){this.backMatches={};for(var i in e)this.backMatches[e[i]]=i},read:function(){var t=this.baseRead();return t in this.matches?this.matches[t]:t},write:function(t){this.baseWrite(t in this.backMatches?this.backMatches[t]:t)}}),y.extend=h({setParams:function(){this.parts=arguments},resolve:function(t){for(var e=this.parts,i=e.length,n=new Array(i),r=0;i>r;r++)n[r]=t(e[r]);this.parts=n},read:function(){var t=this.parts,e=this.binary.read(t[0]);return this.binary.inContext(e,function(){for(var i=1,r=t.length;r>i;i++)n(e,this.read(t[i]))}),e},write:function(t){var e=this.parts;this.binary.inContext(t,function(){for(var i=0,n=e.length;n>i;i++)this.write(e[i],t)})}}),y.if=u({params:["condition","trueType","falseType"],typeParams:["trueType","falseType"],getBaseType:function(){return this.toValue(this.condition)?this.trueType:this.falseType}}),y.if_not=y.ifNot=u({setParams:function(t,e,i){this.baseType=["if",t,i,e]}}),y.lazy=u({marker:"jBinary.Lazy",params:["innerType","length"],getBaseType:function(){return["binary",this.length,this.binary.typeSet]},read:function(){var t=function(e){return 0===arguments.length?"value"in t?t.value:t.value=t.binary.read(t.innerType):n(t,{wasChanged:!0,value:e}).value};return t[this.marker]=!0,n(t,{binary:n(this.baseRead(),{contexts:this.binary.contexts.slice()}),innerType:this.innerType})},write:function(t){t.wasChanged||!t[this.marker]?this.binary.write(this.innerType,t()):this.baseWrite(t.binary)}}),y.object=h({params:["structure","proto"],resolve:function(t){var e={};for(var n in this.structure)e[n]=i(this.structure[n],Function)?this.structure[n]:t(this.structure[n]);this.structure=e},read:function(){var t=this,e=this.structure,n=this.proto?r(this.proto):{};return this.binary.inContext(n,function(){for(var r in e)this._named(function(){var a=i(e[r],Function)?e[r].call(t,n):this.read(e[r]);void 0!==a&&(n[r]=a)},r).call(this)}),n},write:function(t){var e=this,n=this.structure;this.binary.inContext(t,function(){for(var r in n)this._named(function(){i(n[r],Function)?t[r]=n[r].call(e,t):this.write(n[r],t[r])},r).call(this)})}}),y.skip=h({params:["length"],read:function(){this.view.skip(this.toValue(this.length))},write:function(){this.read()}}),y.string=u({params:["length","encoding"],read:function(){return this.view.getString(this.toValue(this.length),void 0,this.encoding)},write:function(t){this.view.writeString(t,this.encoding)}}),y.string0=h({params:["length","encoding"],read:function(){var t=this.view,e=this.length;if(void 0===e){var i=t.tell(),n=0;for(e=t.byteLength-i;e>n&&t.getUint8();)n++;var r=t.getString(n,i,this.encoding);return e>n&&t.skip(1),r}return t.getString(e,void 0,this.encoding).replace(/\0.*$/,"")},write:function(t){var e=this.view,i=void 0===this.length?1:this.length-t.length;e.writeString(t,void 0,this.encoding),i>0&&(e.writeUint8(0),e.skip(i-1))}}),o.loadData=s(function(e,n){var r;if(i(e,t.Blob)){var a;if("FileReader"in t)a=new FileReader,a.onload=a.onerror=function(){n(this.error,this.result)},a.readAsArrayBuffer(e);else{a=new FileReaderSync;var s,o;try{o=a.readAsArrayBuffer(e)}catch(t){s=t}finally{n(s,o)}}}else if("string"!=typeof e)n(new TypeError("Unsupported source type."));else if(r=e.match(/^data:(.+?)(;base64)?,(.*)$/))try{var h=r[2],u=r[3];n(null,(h?atob:decodeURIComponent)(u))}catch(t){n(t)}else if("XMLHttpRequest"in t){var c=new XMLHttpRequest;c.open("GET",e,!0),"responseType"in c?c.responseType="arraybuffer":"overrideMimeType"in c?c.overrideMimeType("text/plain; charset=x-user-defined"):c.setRequestHeader("Accept-Charset","x-user-defined"),"onload"in c||(c.onreadystatechange=function(){4===this.readyState&&this.onload()});var f=function(t){n(new Error(t))};c.onload=function(){return 0!==this.status&&200!==this.status?f("HTTP Error #"+this.status+": "+this.statusText):("response"in this||(this.response=new VBArray(this.responseBody).toArray()),void n(null,this.response))},c.onerror=function(){f("Network error.")},c.send(null)}else n(new TypeError("Unsupported source type."))}),o.load=s(function(t,e,i){var n=o.loadData(t);o.load.getTypeSet(t,e,function(t){n.then(function(e){i(null,new o(e,t))},i)})}),o.load.getTypeSet=function(t,e,i){i(e)},p._toURI="URL"in t&&"createObjectURL"in URL?function(t){var e=this.seek(0,function(){return this.view.getBytes()});return URL.createObjectURL(new Blob([e],{type:t}))}:function(t){var e=this.seek(0,function(){return this.view.getString(void 0,void 0,"binary")});return"data:"+t+";base64,"+btoa(e)},p._mimeType=function(t){return t||this.typeSet["jBinary.mimeType"]||"application/octet-stream"},p.toURI=function(t){return this._toURI(this._mimeType(t))},c){var g=o.downloader=c.createElement("a");g.style.display="none"}return p.saveAs=s(function(t,e,i){"string"==typeof t?("msSaveBlob"in navigator?navigator.msSaveBlob(new Blob([this.read("blob",0)],{type:this._mimeType(e)}),t):c?(g.parentNode||c.body.appendChild(g),g.href=this.toURI(e),g.download=t,g.click(),g.href=g.download=""):i(new TypeError("Saving from Web Worker is not supported.")),i()):i(new TypeError("Unsupported storage type."))}),o});

},{"jdataview":8}],8:[function(require,module,exports){
(function (Buffer){
!function(t){var e=this;module.exports=function(t){"use strict";function e(t,e){return"object"==typeof t&&null!==t&&(t.constructor===e||Object.prototype.toString.call(t)==="[object "+e.name+"]")}function i(t,i){return!i&&e(t,Array)?t:Array.prototype.slice.call(t)}function n(t,e){return void 0!==t?t:e}function r(t,i,f,s){if(r.is(t)){var o=t.slice(i,i+f);return o._littleEndian=n(s,o._littleEndian),o}if(!r.is(this))return new r(t,i,f,s);if(this.buffer=t=r.wrapBuffer(t),this._isArrayBuffer=h.ArrayBuffer&&e(t,ArrayBuffer),this._isPixelData=!1,this._isDataView=h.DataView&&this._isArrayBuffer,this._isNodeBuffer=h.NodeBuffer&&e(t,Buffer),!this._isNodeBuffer&&!this._isArrayBuffer&&!e(t,Array))throw new TypeError("jDataView buffer has an incompatible type");this._littleEndian=!!s;var u="byteLength"in t?t.byteLength:t.length;this.byteOffset=i=n(i,0),this.byteLength=f=n(f,u-i),this._offset=this._bitOffset=0,this._isDataView?this._view=new DataView(t,i,f):this._checkBounds(i,f,u),this._engineAction=this._isDataView?this._dataViewAction:this._isNodeBuffer?this._nodeBufferAction:this._isArrayBuffer?this._arrayBufferAction:this._arrayAction}function f(t){if(h.NodeBuffer)return new Buffer(t,"binary");for(var e=h.ArrayBuffer?Uint8Array:Array,i=new e(t.length),n=0,r=t.length;r>n;n++)i[n]=255&t.charCodeAt(n);return i}function s(t){return t>=0&&31>t?1<<t:s[t]||(s[t]=Math.pow(2,t))}function o(t,e){this.lo=t,this.hi=e}function u(){o.apply(this,arguments)}var h={NodeBuffer:"Buffer"in t,DataView:"DataView"in t,ArrayBuffer:"ArrayBuffer"in t,PixelData:!1},a=t.TextEncoder,_=t.TextDecoder;h.NodeBuffer&&function(t){try{t.writeFloatLE(1/0,0)}catch(t){h.NodeBuffer=!1}}(new Buffer(4));var c={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};r.wrapBuffer=function(t){switch(typeof t){case"number":if(h.NodeBuffer)t=new Buffer(t),t.fill(0);else if(h.ArrayBuffer)t=new Uint8Array(t).buffer;else{t=new Array(t);for(var n=0;n<t.length;n++)t[n]=0}return t;case"string":t=f(t);default:return"length"in t&&!(h.NodeBuffer&&e(t,Buffer)||h.ArrayBuffer&&e(t,ArrayBuffer))&&(h.NodeBuffer?t=new Buffer(t):h.ArrayBuffer?e(t,ArrayBuffer)||(t=new Uint8Array(t).buffer,e(t,ArrayBuffer)||(t=new Uint8Array(i(t,!0)).buffer)):t=i(t)),t}},r.is=function(t){return t&&t.jDataView},r.from=function(){return new r(arguments)},r.Uint64=o,o.prototype={valueOf:function(){return this.lo+s(32)*this.hi},toString:function(){return Number.prototype.toString.apply(this.valueOf(),arguments)}},o.fromNumber=function(t){var e=Math.floor(t/s(32));return new o(t-e*s(32),e)},r.Int64=u,u.prototype="create"in Object?Object.create(o.prototype):new o,u.prototype.valueOf=function(){return this.hi<s(31)?o.prototype.valueOf.apply(this,arguments):-(s(32)-this.lo+s(32)*(s(32)-1-this.hi))},u.fromNumber=function(t){var e,i;if(t>=0){var n=o.fromNumber(t);e=n.lo,i=n.hi}else i=Math.floor(t/s(32)),e=t-i*s(32),i+=s(32);return new u(e,i)};var y=r.prototype={compatibility:h,jDataView:!0,_checkBounds:function(t,e,i){if("number"!=typeof t)throw new TypeError("Offset is not a number.");if("number"!=typeof e)throw new TypeError("Size is not a number.");if(0>e)throw new RangeError("Length is negative.");if(0>t||t+e>n(i,this.byteLength))throw new RangeError("Offsets are out of bounds.")},_action:function(t,e,i,r,f){return this._engineAction(t,e,n(i,this._offset),n(r,this._littleEndian),f)},_dataViewAction:function(t,e,i,n,r){return this._offset=i+c[t],e?this._view["get"+t](i,n):this._view["set"+t](i,r,n)},_arrayBufferAction:function(e,i,r,f,s){var o,u=c[e],h=t[e+"Array"];if(f=n(f,this._littleEndian),1===u||(this.byteOffset+r)%u==0&&f)return o=new h(this.buffer,this.byteOffset+r,1),this._offset=r+u,i?o[0]:o[0]=s;var a=new Uint8Array(i?this.getBytes(u,r,f,!0):u);return o=new h(a.buffer,0,1),i?o[0]:(o[0]=s,void this._setBytes(r,a,f))},_arrayAction:function(t,e,i,n,r){return e?this["_get"+t](i,n):this["_set"+t](i,r,n)},_getBytes:function(t,e,r){r=n(r,this._littleEndian),e=n(e,this._offset),t=n(t,this.byteLength-e),this._checkBounds(e,t),e+=this.byteOffset,this._offset=e-this.byteOffset+t;var f=this._isArrayBuffer?new Uint8Array(this.buffer,e,t):(this.buffer.slice||Array.prototype.slice).call(this.buffer,e,e+t);return r||1>=t?f:i(f).reverse()},getBytes:function(t,e,r,f){var s=this._getBytes(t,e,n(r,!0));return f?i(s):s},_setBytes:function(t,e,r){var f=e.length;if(0!==f){if(r=n(r,this._littleEndian),t=n(t,this._offset),this._checkBounds(t,f),!r&&f>1&&(e=i(e,!0).reverse()),t+=this.byteOffset,this._isArrayBuffer)new Uint8Array(this.buffer,t,f).set(e);else if(this._isNodeBuffer)new Buffer(e).copy(this.buffer,t);else for(var s=0;f>s;s++)this.buffer[t+s]=e[s];this._offset=t-this.byteOffset+f}},setBytes:function(t,e,i){this._setBytes(t,e,n(i,!0))},getString:function(t,e,i){if(this._isNodeBuffer)return e=n(e,this._offset),t=n(t,this.byteLength-e),this._checkBounds(e,t),this._offset=e+t,this.buffer.toString(i||"binary",this.byteOffset+e,this.byteOffset+this._offset);var r=this._getBytes(t,e,!0);if(i="utf8"===i?"utf-8":i||"binary",_&&"binary"!==i)return new _(i).decode(this._isArrayBuffer?r:new Uint8Array(r));var f="";t=r.length;for(var s=0;t>s;s++)f+=String.fromCharCode(r[s]);return"utf-8"===i&&(f=decodeURIComponent(escape(f))),f},setString:function(t,e,i){if(this._isNodeBuffer)return t=n(t,this._offset),this._checkBounds(t,e.length),void(this._offset=t+this.buffer.write(e,this.byteOffset+t,i||"binary"));i="utf8"===i?"utf-8":i||"binary";var r;a&&"binary"!==i?r=new a(i).encode(e):("utf-8"===i&&(e=unescape(encodeURIComponent(e))),r=f(e)),this._setBytes(t,r,!0)},getChar:function(t){return this.getString(1,t)},setChar:function(t,e){this.setString(t,e)},tell:function(){return this._offset},seek:function(t){return this._checkBounds(t,0),this._offset=t},skip:function(t){return this.seek(this._offset+t)},slice:function(t,e,i){function f(t,e){return 0>t?t+e:t}return t=f(t,this.byteLength),e=f(n(e,this.byteLength),this.byteLength),i?new r(this.getBytes(e-t,t,!0,!0),void 0,void 0,this._littleEndian):new r(this.buffer,this.byteOffset+t,e-t,this._littleEndian)},alignBy:function(t){return this._bitOffset=0,1!==n(t,1)?this.skip(t-(this._offset%t||t)):this._offset},_getFloat64:function(t,e){var i=this._getBytes(8,t,e),n=1-2*(i[7]>>7),r=((i[7]<<1&255)<<3|i[6]>>4)-1023,f=(15&i[6])*s(48)+i[5]*s(40)+i[4]*s(32)+i[3]*s(24)+i[2]*s(16)+i[1]*s(8)+i[0];return 1024===r?0!==f?NaN:1/0*n:-1023===r?n*f*s(-1074):n*(1+f*s(-52))*s(r)},_getFloat32:function(t,e){var i=this._getBytes(4,t,e),n=1-2*(i[3]>>7),r=(i[3]<<1&255|i[2]>>7)-127,f=(127&i[2])<<16|i[1]<<8|i[0];return 128===r?0!==f?NaN:1/0*n:-127===r?n*f*s(-149):n*(1+f*s(-23))*s(r)},_get64:function(t,e,i){i=n(i,this._littleEndian),e=n(e,this._offset);for(var r=i?[0,4]:[4,0],f=0;2>f;f++)r[f]=this.getUint32(e+r[f],i);return this._offset=e+8,new t(r[0],r[1])},getInt64:function(t,e){return this._get64(u,t,e)},getUint64:function(t,e){return this._get64(o,t,e)},_getInt32:function(t,e){var i=this._getBytes(4,t,e);return i[3]<<24|i[2]<<16|i[1]<<8|i[0]},_getUint32:function(t,e){return this._getInt32(t,e)>>>0},_getInt16:function(t,e){return this._getUint16(t,e)<<16>>16},_getUint16:function(t,e){var i=this._getBytes(2,t,e);return i[1]<<8|i[0]},_getInt8:function(t){return this._getUint8(t)<<24>>24},_getUint8:function(t){return this._getBytes(1,t)[0]},_getBitRangeData:function(t,e){var i=(n(e,this._offset)<<3)+this._bitOffset,r=i+t,f=i>>>3,s=r+7>>>3,o=this._getBytes(s-f,f,!0),u=0;(this._bitOffset=7&r)&&(this._bitOffset-=8);for(var h=0,a=o.length;a>h;h++)u=u<<8|o[h];return{start:f,bytes:o,wideValue:u}},getSigned:function(t,e){var i=32-t;return this.getUnsigned(t,e)<<i>>i},getUnsigned:function(t,e){var i=this._getBitRangeData(t,e).wideValue>>>-this._bitOffset;return 32>t?i&~(-1<<t):i},_setBinaryFloat:function(t,e,i,n,r){var f,o,u=0>e?1:0,h=~(-1<<n-1),a=1-h;0>e&&(e=-e),0===e?(f=0,o=0):isNaN(e)?(f=2*h+1,o=1):1/0===e?(f=2*h+1,o=0):(f=Math.floor(Math.log(e)/Math.LN2),f>=a&&h>=f?(o=Math.floor((e*s(-f)-1)*s(i)),f+=h):(o=Math.floor(e/s(a-i)),f=0));for(var _=[];i>=8;)_.push(o%256),o=Math.floor(o/256),i-=8;for(f=f<<i|o,n+=i;n>=8;)_.push(255&f),f>>>=8,n-=8;_.push(u<<n|f),this._setBytes(t,_,r)},_setFloat32:function(t,e,i){this._setBinaryFloat(t,e,23,8,i)},_setFloat64:function(t,e,i){this._setBinaryFloat(t,e,52,11,i)},_set64:function(t,e,i,r){"object"!=typeof i&&(i=t.fromNumber(i)),r=n(r,this._littleEndian),e=n(e,this._offset);var f=r?{lo:0,hi:4}:{lo:4,hi:0};for(var s in f)this.setUint32(e+f[s],i[s],r);this._offset=e+8},setInt64:function(t,e,i){this._set64(u,t,e,i)},setUint64:function(t,e,i){this._set64(o,t,e,i)},_setUint32:function(t,e,i){this._setBytes(t,[255&e,e>>>8&255,e>>>16&255,e>>>24],i)},_setUint16:function(t,e,i){this._setBytes(t,[255&e,e>>>8&255],i)},_setUint8:function(t,e){this._setBytes(t,[255&e])},setUnsigned:function(t,e,i){var n=this._getBitRangeData(i,t),r=n.wideValue,f=n.bytes;r&=~(~(-1<<i)<<-this._bitOffset),r|=(32>i?e&~(-1<<i):e)<<-this._bitOffset;for(var s=f.length-1;s>=0;s--)f[s]=255&r,r>>>=8;this._setBytes(n.start,f,!0)}},l={Int8:"Int8",Int16:"Int16",Int32:"Int32",Uint8:"UInt8",Uint16:"UInt16",Uint32:"UInt32",Float32:"Float",Float64:"Double"};y._nodeBufferAction=function(t,e,i,n,r){this._offset=i+c[t];var f=l[t]+("Int8"===t||"Uint8"===t?"":n?"LE":"BE");return i+=this.byteOffset,e?this.buffer["read"+f](i):this.buffer["write"+f](r,i)};for(var g in c)!function(t){y["get"+t]=function(e,i){return this._action(t,!0,e,i)},y["set"+t]=function(e,i,n){this._action(t,!1,e,n,i)}}(g);y._setInt32=y._setUint32,y._setInt16=y._setUint16,y._setInt8=y._setUint8,y.setSigned=y.setUnsigned;for(var B in y)"set"===B.slice(0,3)&&function(t){y["write"+t]=function(){Array.prototype.unshift.call(arguments,void 0),this["set"+t].apply(this,arguments)}}(B.slice(3));return r}(e)}();

}).call(this,require("buffer").Buffer)

},{"buffer":3}],9:[function(require,module,exports){
"use strict";function _del(e){size--,delete cache[e]}var cache=Object.create(null),debug=!1,hitCount=0,missCount=0,size=0;exports.put=function(e,t,i,o){if(debug&&console.log("caching: %s = %j (@%s)",e,t,i),void 0!==i&&("number"!=typeof i||isNaN(i)||i<=0))throw new Error("Cache timeout must be a positive number");if(void 0!==o&&"function"!=typeof o)throw new Error("Cache timeout callback must be a function");var u=cache[e];u?clearTimeout(u.timeout):size++;var n={value:t,expire:i+Date.now()};return isNaN(n.expire)||(n.timeout=setTimeout(function(){_del(e),o&&o(e,t)},i)),cache[e]=n,t},exports.del=function(e){var t=!0,i=cache[e];return i?(clearTimeout(i.timeout),!isNaN(i.expire)&&i.expire<Date.now()&&(t=!1)):t=!1,t&&_del(e),t},exports.clear=function(){for(var e in cache)clearTimeout(cache[e].timeout);size=0,cache=Object.create(null),debug&&(hitCount=0,missCount=0)},exports.get=function(e){var t=cache[e];if(void 0!==t){if(isNaN(t.expire)||t.expire>=Date.now())return debug&&hitCount++,t.value;debug&&missCount++,size--,delete cache[e]}else debug&&missCount++;return null},exports.size=function(){return size},exports.memsize=function(){var e,t=0;for(e in cache)t++;return t},exports.debug=function(e){debug=e},exports.hits=function(){return hitCount},exports.misses=function(){return missCount},exports.keys=function(){return Object.keys(cache)};

},{}],10:[function(require,module,exports){
"use strict";function Inflate(t){if(!(this instanceof Inflate))return new Inflate(t);this.options=utils.assign({chunkSize:16384,windowBits:0,to:""},t||{});var i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,0===i.windowBits&&(i.windowBits=-15)),!(i.windowBits>=0&&i.windowBits<16)||t&&t.windowBits||(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&0==(15&i.windowBits)&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var n=zlib_inflate.inflateInit2(this.strm,i.windowBits);if(n!==c.Z_OK)throw new Error(msg[n]);this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header)}function inflate(t,i){var n=new Inflate(i);if(n.push(t,!0),n.err)throw n.msg;return n.result}function inflateRaw(t,i){return i=i||{},i.raw=!0,inflate(t,i)}var zlib_inflate=require("./zlib/inflate"),utils=require("./utils/common"),strings=require("./utils/strings"),c=require("./zlib/constants"),msg=require("./zlib/messages"),ZStream=require("./zlib/zstream"),GZheader=require("./zlib/gzheader"),toString=Object.prototype.toString;Inflate.prototype.push=function(t,i){var n,s,e,r,o,a,u=this.strm,l=this.options.chunkSize,h=this.options.dictionary,_=!1;if(this.ended)return!1;s=i===~~i?i:!0===i?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof t?u.input=strings.binstring2buf(t):"[object ArrayBuffer]"===toString.call(t)?u.input=new Uint8Array(t):u.input=t,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new utils.Buf8(l),u.next_out=0,u.avail_out=l),n=zlib_inflate.inflate(u,c.Z_NO_FLUSH),n===c.Z_NEED_DICT&&h&&(a="string"==typeof h?strings.string2buf(h):"[object ArrayBuffer]"===toString.call(h)?new Uint8Array(h):h,n=zlib_inflate.inflateSetDictionary(this.strm,a)),n===c.Z_BUF_ERROR&&!0===_&&(n=c.Z_OK,_=!1),n!==c.Z_STREAM_END&&n!==c.Z_OK)return this.onEnd(n),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&n!==c.Z_STREAM_END&&(0!==u.avail_in||s!==c.Z_FINISH&&s!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(e=strings.utf8border(u.output,u.next_out),r=u.next_out-e,o=strings.buf2string(u.output,e),u.next_out=r,u.avail_out=l-r,r&&utils.arraySet(u.output,u.output,e,r,0),this.onData(o)):this.onData(utils.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(_=!0)}while((u.avail_in>0||0===u.avail_out)&&n!==c.Z_STREAM_END);return n===c.Z_STREAM_END&&(s=c.Z_FINISH),s===c.Z_FINISH?(n=zlib_inflate.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c.Z_OK):s!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),u.avail_out=0,!0)},Inflate.prototype.onData=function(t){this.chunks.push(t)},Inflate.prototype.onEnd=function(t){t===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},exports.Inflate=Inflate,exports.inflate=inflate,exports.inflateRaw=inflateRaw,exports.ungzip=inflate;

},{"./utils/common":11,"./utils/strings":12,"./zlib/constants":14,"./zlib/gzheader":16,"./zlib/inflate":18,"./zlib/messages":20,"./zlib/zstream":21}],11:[function(require,module,exports){
"use strict";var TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;exports.assign=function(r){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n])}}return r},exports.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var fnTyped={arraySet:function(r,t,e,n,a){if(t.subarray&&r.subarray)return void r.set(t.subarray(e,e+n),a);for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){var t,e,n,a,o,s;for(n=0,t=0,e=r.length;t<e;t++)n+=r[t].length;for(s=new Uint8Array(n),a=0,t=0,e=r.length;t<e;t++)o=r[t],s.set(o,a),a+=o.length;return s}},fnUntyped={arraySet:function(r,t,e,n,a){for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){return[].concat.apply([],r)}};exports.setTyped=function(r){r?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK);

},{}],12:[function(require,module,exports){
"use strict";function buf2binstring(r,t){if(t<65537&&(r.subarray&&STR_APPLY_UIA_OK||!r.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils.shrinkBuf(r,t));for(var n="",e=0;e<t;e++)n+=String.fromCharCode(r[e]);return n}var utils=require("./common"),STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(r){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){STR_APPLY_UIA_OK=!1}for(var _utf8len=new utils.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1,exports.string2buf=function(r){var t,n,e,u,f,o=r.length,i=0;for(u=0;u<o;u++)n=r.charCodeAt(u),55296==(64512&n)&&u+1<o&&56320==(64512&(e=r.charCodeAt(u+1)))&&(n=65536+(n-55296<<10)+(e-56320),u++),i+=n<128?1:n<2048?2:n<65536?3:4;for(t=new utils.Buf8(i),f=0,u=0;f<i;u++)n=r.charCodeAt(u),55296==(64512&n)&&u+1<o&&56320==(64512&(e=r.charCodeAt(u+1)))&&(n=65536+(n-55296<<10)+(e-56320),u++),n<128?t[f++]=n:n<2048?(t[f++]=192|n>>>6,t[f++]=128|63&n):n<65536?(t[f++]=224|n>>>12,t[f++]=128|n>>>6&63,t[f++]=128|63&n):(t[f++]=240|n>>>18,t[f++]=128|n>>>12&63,t[f++]=128|n>>>6&63,t[f++]=128|63&n);return t},exports.buf2binstring=function(r){return buf2binstring(r,r.length)},exports.binstring2buf=function(r){for(var t=new utils.Buf8(r.length),n=0,e=t.length;n<e;n++)t[n]=r.charCodeAt(n);return t},exports.buf2string=function(r,t){var n,e,u,f,o=t||r.length,i=new Array(2*o);for(e=0,n=0;n<o;)if((u=r[n++])<128)i[e++]=u;else if((f=_utf8len[u])>4)i[e++]=65533,n+=f-1;else{for(u&=2===f?31:3===f?15:7;f>1&&n<o;)u=u<<6|63&r[n++],f--;f>1?i[e++]=65533:u<65536?i[e++]=u:(u-=65536,i[e++]=55296|u>>10&1023,i[e++]=56320|1023&u)}return buf2binstring(i,e)},exports.utf8border=function(r,t){var n;for(t=t||r.length,t>r.length&&(t=r.length),n=t-1;n>=0&&128==(192&r[n]);)n--;return n<0?t:0===n?t:n+_utf8len[r[n]]>t?n:t};

},{"./common":11}],13:[function(require,module,exports){
"use strict";function adler32(e,r,o,t){for(var d=65535&e|0,l=e>>>16&65535|0,u=0;0!==o;){u=o>2e3?2e3:o,o-=u;do{d=d+r[t++]|0,l=l+d|0}while(--u);d%=65521,l%=65521}return d|l<<16|0}module.exports=adler32;

},{}],14:[function(require,module,exports){
"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};

},{}],15:[function(require,module,exports){
"use strict";function makeTable(){for(var r,a=[],c=0;c<256;c++){r=c;for(var e=0;e<8;e++)r=1&r?3988292384^r>>>1:r>>>1;a[c]=r}return a}function crc32(r,a,c,e){var o=crcTable,t=e+c;r^=-1;for(var n=e;n<t;n++)r=r>>>8^o[255&(r^a[n])];return-1^r}var crcTable=makeTable();module.exports=crc32;

},{}],16:[function(require,module,exports){
"use strict";function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}module.exports=GZheader;

},{}],17:[function(require,module,exports){
"use strict";var BAD=30,TYPE=12;module.exports=function(i,e){var o,a,t,d,n,l,s,f,r,b,c,u,v,m,w,h,k,_,x,g,A,B,D,p,E;o=i.state,a=i.next_in,p=i.input,t=a+(i.avail_in-5),d=i.next_out,E=i.output,n=d-(e-i.avail_out),l=d+(i.avail_out-257),s=o.dmax,f=o.wsize,r=o.whave,b=o.wnext,c=o.window,u=o.hold,v=o.bits,m=o.lencode,w=o.distcode,h=(1<<o.lenbits)-1,k=(1<<o.distbits)-1;i:do{v<15&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=m[u&h];e:for(;;){if(x=_>>>24,u>>>=x,v-=x,0===(x=_>>>16&255))E[d++]=65535&_;else{if(!(16&x)){if(0==(64&x)){_=m[(65535&_)+(u&(1<<x)-1)];continue e}if(32&x){o.mode=TYPE;break i}i.msg="invalid literal/length code",o.mode=BAD;break i}g=65535&_,x&=15,x&&(v<x&&(u+=p[a++]<<v,v+=8),g+=u&(1<<x)-1,u>>>=x,v-=x),v<15&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=w[u&k];o:for(;;){if(x=_>>>24,u>>>=x,v-=x,!(16&(x=_>>>16&255))){if(0==(64&x)){_=w[(65535&_)+(u&(1<<x)-1)];continue o}i.msg="invalid distance code",o.mode=BAD;break i}if(A=65535&_,x&=15,v<x&&(u+=p[a++]<<v,(v+=8)<x&&(u+=p[a++]<<v,v+=8)),(A+=u&(1<<x)-1)>s){i.msg="invalid distance too far back",o.mode=BAD;break i}if(u>>>=x,v-=x,x=d-n,A>x){if((x=A-x)>r&&o.sane){i.msg="invalid distance too far back",o.mode=BAD;break i}if(B=0,D=c,0===b){if(B+=f-x,x<g){g-=x;do{E[d++]=c[B++]}while(--x);B=d-A,D=E}}else if(b<x){if(B+=f+b-x,(x-=b)<g){g-=x;do{E[d++]=c[B++]}while(--x);if(B=0,b<g){x=b,g-=x;do{E[d++]=c[B++]}while(--x);B=d-A,D=E}}}else if(B+=b-x,x<g){g-=x;do{E[d++]=c[B++]}while(--x);B=d-A,D=E}for(;g>2;)E[d++]=D[B++],E[d++]=D[B++],E[d++]=D[B++],g-=3;g&&(E[d++]=D[B++],g>1&&(E[d++]=D[B++]))}else{B=d-A;do{E[d++]=E[B++],E[d++]=E[B++],E[d++]=E[B++],g-=3}while(g>2);g&&(E[d++]=E[B++],g>1&&(E[d++]=E[B++]))}break}}break}}while(a<t&&d<l);g=v>>3,a-=g,v-=g<<3,u&=(1<<v)-1,i.next_in=a,i.next_out=d,i.avail_in=a<t?t-a+5:5-(a-t),i.avail_out=d<l?l-d+257:257-(d-l),o.hold=u,o.bits=v};

},{}],18:[function(require,module,exports){
"use strict";function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new utils.Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new utils.Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):Z_STREAM_ERROR}function inflateReset2(e,t){var a,i;return e&&e.state?(i=e.state,t<0?(a=0,t=-t):(a=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=a,i.wbits=t,inflateReset(e))):Z_STREAM_ERROR}function inflateInit2(e,t){var a,i;return e?(i=new InflateState,e.state=i,i.window=null,a=inflateReset2(e,t),a!==Z_OK&&(e.state=null),a):Z_STREAM_ERROR}function inflateInit(e){return inflateInit2(e,DEF_WBITS)}function fixedtables(e){if(virgin){var t;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,a,i){var n,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new utils.Buf8(s.wsize)),i>=s.wsize?(utils.arraySet(s.window,t,a-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),utils.arraySet(s.window,t,a-i,n,s.wnext),i-=n,i?(utils.arraySet(s.window,t,a-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}function inflate(e,t){var a,i,n,s,l,r,o,d,f,c,h,E,b,_,k,m,w,u,R,T,D,g,S,x,A=0,v=new utils.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR;a=e.state,a.mode===TYPE&&(a.mode=TYPEDO),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,c=r,h=o,g=Z_OK;e:for(;;)switch(a.mode){case HEAD:if(0===a.wrap){a.mode=TYPEDO;break}for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(2&a.wrap&&35615===d){a.check=0,v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0),d=0,f=0,a.mode=FLAGS;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",a.mode=BAD;break}if((15&d)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(d>>>=4,f-=4,D=8+(15&d),0===a.wbits)a.wbits=D;else if(D>a.wbits){e.msg="invalid window size",a.mode=BAD;break}a.dmax=1<<D,e.adler=a.check=1,a.mode=512&d?DICTID:TYPE,d=0,f=0;break;case FLAGS:for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.flags=d,(255&a.flags)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=BAD;break}a.head&&(a.head.text=d>>8&1),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=TIME;case TIME:for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.time=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,v[2]=d>>>16&255,v[3]=d>>>24&255,a.check=crc32(a.check,v,4,0)),d=0,f=0,a.mode=OS;case OS:for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.xflags=255&d,a.head.os=d>>8),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=EXLEN;case EXLEN:if(1024&a.flags){for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length=d,a.head&&(a.head.extra_len=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0}else a.head&&(a.head.extra=null);a.mode=EXTRA;case EXTRA:if(1024&a.flags&&(E=a.length,E>r&&(E=r),E&&(a.head&&(D=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),utils.arraySet(a.head.extra,i,s,E,D)),512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,a.length-=E),a.length))break e;a.length=0,a.mode=NAME;case NAME:if(2048&a.flags){if(0===r)break e;E=0;do{D=i[s+E++],a.head&&D&&a.length<65536&&(a.head.name+=String.fromCharCode(D))}while(D&&E<r);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,D)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=COMMENT;case COMMENT:if(4096&a.flags){if(0===r)break e;E=0;do{D=i[s+E++],a.head&&D&&a.length<65536&&(a.head.comment+=String.fromCharCode(D))}while(D&&E<r);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,D)break e}else a.head&&(a.head.comment=null);a.mode=HCRC;case HCRC:if(512&a.flags){for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(65535&a.check)){e.msg="header crc mismatch",a.mode=BAD;break}d=0,f=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=TYPE;break;case DICTID:for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}e.adler=a.check=zswap32(d),d=0,f=0,a.mode=DICT;case DICT:if(0===a.havedict)return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,Z_NEED_DICT;e.adler=a.check=1,a.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(a.last){d>>>=7&f,f-=7&f,a.mode=CHECK;break}for(;f<3;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}switch(a.last=1&d,d>>>=1,f-=1,3&d){case 0:a.mode=STORED;break;case 1:if(fixedtables(a),a.mode=LEN_,t===Z_TREES){d>>>=2,f-=2;break e}break;case 2:a.mode=TABLE;break;case 3:e.msg="invalid block type",a.mode=BAD}d>>>=2,f-=2;break;case STORED:for(d>>>=7&f,f-=7&f;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",a.mode=BAD;break}if(a.length=65535&d,d=0,f=0,a.mode=COPY_,t===Z_TREES)break e;case COPY_:a.mode=COPY;case COPY:if(E=a.length){if(E>r&&(E=r),E>o&&(E=o),0===E)break e;utils.arraySet(n,i,s,E,l),r-=E,s+=E,o-=E,l+=E,a.length-=E;break}a.mode=TYPE;break;case TABLE:for(;f<14;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.nlen=257+(31&d),d>>>=5,f-=5,a.ndist=1+(31&d),d>>>=5,f-=5,a.ncode=4+(15&d),d>>>=4,f-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=BAD;break}a.have=0,a.mode=LENLENS;case LENLENS:for(;a.have<a.ncode;){for(;f<3;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.lens[O[a.have++]]=7&d,d>>>=3,f-=3}for(;a.have<19;)a.lens[O[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,S={bits:a.lenbits},g=inflate_table(CODES,a.lens,0,19,a.lencode,0,a.work,S),a.lenbits=S.bits,g){e.msg="invalid code lengths set",a.mode=BAD;break}a.have=0,a.mode=CODELENS;case CODELENS:for(;a.have<a.nlen+a.ndist;){for(;A=a.lencode[d&(1<<a.lenbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(w<16)d>>>=k,f-=k,a.lens[a.have++]=w;else{if(16===w){for(x=k+2;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d>>>=k,f-=k,0===a.have){e.msg="invalid bit length repeat",a.mode=BAD;break}D=a.lens[a.have-1],E=3+(3&d),d>>>=2,f-=2}else if(17===w){for(x=k+3;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=k,f-=k,D=0,E=3+(7&d),d>>>=3,f-=3}else{for(x=k+7;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=k,f-=k,D=0,E=11+(127&d),d>>>=7,f-=7}if(a.have+E>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=BAD;break}for(;E--;)a.lens[a.have++]=D}}if(a.mode===BAD)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=BAD;break}if(a.lenbits=9,S={bits:a.lenbits},g=inflate_table(LENS,a.lens,0,a.nlen,a.lencode,0,a.work,S),a.lenbits=S.bits,g){e.msg="invalid literal/lengths set",a.mode=BAD;break}if(a.distbits=6,a.distcode=a.distdyn,S={bits:a.distbits},g=inflate_table(DISTS,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,S),a.distbits=S.bits,g){e.msg="invalid distances set",a.mode=BAD;break}if(a.mode=LEN_,t===Z_TREES)break e;case LEN_:a.mode=LEN;case LEN:if(r>=6&&o>=258){e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,inflate_fast(e,h),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,a.mode===TYPE&&(a.back=-1);break}for(a.back=0;A=a.lencode[d&(1<<a.lenbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(m&&0==(240&m)){for(u=k,R=m,T=w;A=a.lencode[T+((d&(1<<u+R)-1)>>u)],k=A>>>24,m=A>>>16&255,w=65535&A,!(u+k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=u,f-=u,a.back+=u}if(d>>>=k,f-=k,a.back+=k,a.length=w,0===m){a.mode=LIT;break}if(32&m){a.back=-1,a.mode=TYPE;break}if(64&m){e.msg="invalid literal/length code",a.mode=BAD;break}a.extra=15&m,a.mode=LENEXT;case LENEXT:if(a.extra){for(x=a.extra;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=DIST;case DIST:for(;A=a.distcode[d&(1<<a.distbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(0==(240&m)){for(u=k,R=m,T=w;A=a.distcode[T+((d&(1<<u+R)-1)>>u)],k=A>>>24,m=A>>>16&255,w=65535&A,!(u+k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=u,f-=u,a.back+=u}if(d>>>=k,f-=k,a.back+=k,64&m){e.msg="invalid distance code",a.mode=BAD;break}a.offset=w,a.extra=15&m,a.mode=DISTEXT;case DISTEXT:if(a.extra){for(x=a.extra;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.offset+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=BAD;break}a.mode=MATCH;case MATCH:if(0===o)break e;if(E=h-o,a.offset>E){if((E=a.offset-E)>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=BAD;break}E>a.wnext?(E-=a.wnext,b=a.wsize-E):b=a.wnext-E,E>a.length&&(E=a.length),_=a.window}else _=n,b=l-a.offset,E=a.length;E>o&&(E=o),o-=E,a.length-=E;do{n[l++]=_[b++]}while(--E);0===a.length&&(a.mode=LEN);break;case LIT:if(0===o)break e;n[l++]=a.length,o--,a.mode=LEN;break;case CHECK:if(a.wrap){for(;f<32;){if(0===r)break e;r--,d|=i[s++]<<f,f+=8}if(h-=o,e.total_out+=h,a.total+=h,h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,l-h):adler32(a.check,n,h,l-h)),h=o,(a.flags?d:zswap32(d))!==a.check){e.msg="incorrect data check",a.mode=BAD;break}d=0,f=0}a.mode=LENGTH;case LENGTH:if(a.wrap&&a.flags){for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=BAD;break}d=0,f=0}a.mode=DONE;case DONE:g=Z_STREAM_END;break e;case BAD:g=Z_DATA_ERROR;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,(a.wsize||h!==e.avail_out&&a.mode<BAD&&(a.mode<CHECK||t!==Z_FINISH))&&updatewindow(e,e.output,e.next_out,h-e.avail_out)?(a.mode=MEM,Z_MEM_ERROR):(c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,a.total+=h,a.wrap&&h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,e.next_out-h):adler32(a.check,n,h,e.next_out-h)),e.data_type=a.bits+(a.last?64:0)+(a.mode===TYPE?128:0)+(a.mode===LEN_||a.mode===COPY_?256:0),(0===c&&0===h||t===Z_FINISH)&&g===Z_OK&&(g=Z_BUF_ERROR),g)}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK}function inflateGetHeader(e,t){var a;return e&&e.state?(a=e.state,0==(2&a.wrap)?Z_STREAM_ERROR:(a.head=t,t.done=!1,Z_OK)):Z_STREAM_ERROR}function inflateSetDictionary(e,t){var a,i,n=t.length;return e&&e.state?(a=e.state,0!==a.wrap&&a.mode!==DICT?Z_STREAM_ERROR:a.mode===DICT&&(i=1,(i=adler32(i,t,n,0))!==a.check)?Z_DATA_ERROR:updatewindow(e,t,n,n)?(a.mode=MEM,Z_MEM_ERROR):(a.havedict=1,Z_OK)):Z_STREAM_ERROR}var utils=require("../utils/common"),adler32=require("./adler32"),crc32=require("./crc32"),inflate_fast=require("./inffast"),inflate_table=require("./inftrees"),CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,virgin=!0,lenfix,distfix;exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=inflateInit,exports.inflateInit2=inflateInit2,exports.inflate=inflate,exports.inflateEnd=inflateEnd,exports.inflateGetHeader=inflateGetHeader,exports.inflateSetDictionary=inflateSetDictionary,exports.inflateInfo="pako inflate (from Nodeca project)";

},{"../utils/common":11,"./adler32":13,"./crc32":15,"./inffast":17,"./inftrees":19}],19:[function(require,module,exports){
"use strict";var utils=require("../utils/common"),MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(r,S,e,f,t,i,u,o){var E,l,s,n,I,N,T,B,D,O=o.bits,a=0,b=0,A=0,L=0,M=0,X=0,d=0,G=0,H=0,U=0,_=null,x=0,c=new utils.Buf16(MAXBITS+1),m=new utils.Buf16(MAXBITS+1),v=null,w=0;for(a=0;a<=MAXBITS;a++)c[a]=0;for(b=0;b<f;b++)c[S[e+b]]++;for(M=O,L=MAXBITS;L>=1&&0===c[L];L--);if(M>L&&(M=L),0===L)return t[i++]=20971520,t[i++]=20971520,o.bits=1,0;for(A=1;A<L&&0===c[A];A++);for(M<A&&(M=A),G=1,a=1;a<=MAXBITS;a++)if(G<<=1,(G-=c[a])<0)return-1;if(G>0&&(r===CODES||1!==L))return-1;for(m[1]=0,a=1;a<MAXBITS;a++)m[a+1]=m[a]+c[a];for(b=0;b<f;b++)0!==S[e+b]&&(u[m[S[e+b]]++]=b);if(r===CODES?(_=v=u,N=19):r===LENS?(_=lbase,x-=257,v=lext,w-=257,N=256):(_=dbase,v=dext,N=-1),U=0,b=0,a=A,I=i,X=M,d=0,s=-1,H=1<<M,n=H-1,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;for(var C=0;;){C++,T=a-d,u[b]<N?(B=0,D=u[b]):u[b]>N?(B=v[w+u[b]],D=_[x+u[b]]):(B=96,D=0),E=1<<a-d,l=1<<X,A=l;do{l-=E,t[I+(U>>d)+l]=T<<24|B<<16|D|0}while(0!==l);for(E=1<<a-1;U&E;)E>>=1;if(0!==E?(U&=E-1,U+=E):U=0,b++,0==--c[a]){if(a===L)break;a=S[e+u[b]]}if(a>M&&(U&n)!==s){for(0===d&&(d=M),I+=A,X=a-d,G=1<<X;X+d<L&&!((G-=c[X+d])<=0);)X++,G<<=1;if(H+=1<<X,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;s=U&n,t[s]=M<<24|X<<16|I-i|0}}return 0!==U&&(t[I+U]=a-d<<24|64<<16|0),o.bits=M,0};

},{"../utils/common":11}],20:[function(require,module,exports){
"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};

},{}],21:[function(require,module,exports){
"use strict";function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=ZStream;

},{}],22:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],23:[function(require,module,exports){
(function (process){
!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var n="undefined"!=typeof window?window:self,e=n.Q;n.Q=t(),n.Q.noConflict=function(){return n.Q=e,this}}}(function(){"use strict";function t(t){return function(){return q.apply(t,arguments)}}function n(t){return t===Object(t)}function e(t){return"[object StopIteration]"===nt(t)||t instanceof V}function r(t,n){if(B&&n.stack&&"object"==typeof t&&null!==t&&t.stack){for(var e=[],r=n;r;r=r.source)r.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>r.stackCounter)&&(Y(t,"__minimumStackCounter__",{value:r.stackCounter,configurable:!0}),e.unshift(r.stack));e.unshift(t.stack);var i=e.join("\n"+et+"\n"),u=o(i);Y(t,"stack",{value:u,configurable:!0})}}function o(t){for(var n=t.split("\n"),e=[],r=0;r<n.length;++r){var o=n[r];c(o)||i(o)||!o||e.push(o)}return e.join("\n")}function i(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function u(t){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(n)return[n[1],Number(n[2])];var e=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(e)return[e[1],Number(e[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function c(t){var n=u(t);if(!n)return!1;var e=n[0],r=n[1];return e===$&&r>=G&&r<=ft}function f(){if(B)try{throw new Error}catch(r){var t=r.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],e=u(n);if(!e)return;return $=e[0],e[1]}}function s(t){return t instanceof d?t:m(t)?S(t):R(t)}function p(){function t(t){n=t,s.longStackSupport&&B&&(i.source=t),J(e,function(n,e){s.nextTick(function(){t.promiseDispatch.apply(t,e)})},void 0),e=void 0,r=void 0}var n,e=[],r=[],o=X(p.prototype),i=X(d.prototype);if(i.promiseDispatch=function(t,o,i){var u=z(arguments);e?(e.push(u),"when"===o&&i[1]&&r.push(i[1])):s.nextTick(function(){n.promiseDispatch.apply(n,u)})},i.valueOf=function(){if(e)return i;var t=y(n);return v(t)&&(n=t),t},i.inspect=function(){return n?n.inspect():{state:"pending"}},s.longStackSupport&&B)try{throw new Error}catch(t){i.stack=t.stack.substring(t.stack.indexOf("\n")+1),i.stackCounter=rt++}return o.promise=i,o.resolve=function(e){n||t(s(e))},o.fulfill=function(e){n||t(R(e))},o.reject=function(e){n||t(T(e))},o.notify=function(t){n||J(r,function(n,e){s.nextTick(function(){e(t)})},void 0)},o}function a(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var n=p();try{t(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}return n.promise}function l(t){return a(function(n,e){for(var r=0,o=t.length;r<o;r++)s(t[r]).then(n,e)})}function d(t,n,e){void 0===n&&(n=function(t){return T(new Error("Promise does not support operation: "+t))}),void 0===e&&(e=function(){return{state:"unknown"}});var r=X(d.prototype);if(r.promiseDispatch=function(e,o,i){var u;try{u=t[o]?t[o].apply(r,i):n.call(r,o,i)}catch(t){u=T(t)}e&&e(u)},r.inspect=e,e){var o=e();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var t=e();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function h(t,n,e,r){return s(t).then(n,e,r)}function y(t){if(v(t)){var n=t.inspect();if("fulfilled"===n.state)return n.value}return t}function v(t){return t instanceof d}function m(t){return n(t)&&"function"==typeof t.then}function k(t){return v(t)&&"pending"===t.inspect().state}function w(t){return!v(t)||"fulfilled"===t.inspect().state}function j(t){return v(t)&&"rejected"===t.inspect().state}function g(){ot.length=0,it.length=0,ct||(ct=!0)}function b(t,n){ct&&("object"==typeof process&&"function"==typeof process.emit&&s.nextTick.runAfter(function(){-1!==K(it,t)&&(process.emit("unhandledRejection",n,t),ut.push(t))}),it.push(t),n&&void 0!==n.stack?ot.push(n.stack):ot.push("(no stack) "+n))}function x(t){if(ct){var n=K(it,t);-1!==n&&("object"==typeof process&&"function"==typeof process.emit&&s.nextTick.runAfter(function(){var e=K(ut,t);-1!==e&&(process.emit("rejectionHandled",ot[n],t),ut.splice(e,1))}),it.splice(n,1),ot.splice(n,1))}}function T(t){var n=d({when:function(n){return n&&x(this),n?n(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return b(n,t),n}function R(t){return d({when:function(){return t},get:function(n){return t[n]},set:function(n,e){t[n]=e},delete:function(n){delete t[n]},post:function(n,e){return null===n||void 0===n?t.apply(void 0,e):t[n].apply(t,e)},apply:function(n,e){return t.apply(n,e)},keys:function(){return tt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function S(t){var n=p();return s.nextTick(function(){try{t.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}}),n.promise}function E(t){return d({isDef:function(){}},function(n,e){return P(t,n,e)},function(){return s(t).inspect()})}function O(t,n,e){return s(t).spread(n,e)}function C(t){return function(){function n(t,n){var u;if("undefined"==typeof StopIteration){try{u=r[t](n)}catch(t){return T(t)}return u.done?s(u.value):h(u.value,o,i)}try{u=r[t](n)}catch(t){return e(t)?s(t.value):T(t)}return h(u,o,i)}var r=t.apply(this,arguments),o=n.bind(n,"next"),i=n.bind(n,"throw");return o()}}function Q(t){s.done(s.async(t)())}function _(t){throw new V(t)}function N(t){return function(){return O([this,D(arguments)],function(n,e){return t.apply(n,e)})}}function P(t,n,e){return s(t).dispatch(n,e)}function D(t){return h(t,function(t){var n=0,e=p();return J(t,function(r,o,i){var u;v(o)&&"fulfilled"===(u=o.inspect()).state?t[i]=u.value:(++n,h(o,function(r){t[i]=r,0==--n&&e.resolve(t)},e.reject,function(t){e.notify({index:i,value:t})}))},void 0),0===n&&e.resolve(t),e.promise})}function A(t){if(0===t.length)return s.resolve();var n=s.defer(),e=0;return J(t,function(r,o,i){function u(t){n.resolve(t)}function c(t){0===--e&&(t.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+t.message,n.reject(t))}function f(t){n.notify({index:i,value:t})}var s=t[i];e++,h(s,u,c,f)},void 0),n.promise}function I(t){return h(t,function(t){return t=W(t,s),h(D(W(t,function(t){return h(t,H,H)})),function(){return t})})}function U(t){return s(t).allSettled()}function F(t,n){return s(t).then(void 0,void 0,n)}function M(t,n){return s(t).nodeify(n)}var B=!1;try{throw new Error}catch(t){B=!!t.stack}var $,V,G=f(),H=function(){},L=function(){function t(){for(var t,r;e.next;)e=e.next,t=e.task,e.task=void 0,r=e.domain,r&&(e.domain=void 0,r.enter()),n(t,r);for(;c.length;)t=c.pop(),n(t);o=!1}function n(n,e){try{n()}catch(n){if(u)throw e&&e.exit(),setTimeout(t,0),e&&e.enter(),n;setTimeout(function(){throw n},0)}e&&e.exit()}var e={task:void 0,next:null},r=e,o=!1,i=void 0,u=!1,c=[];if(L=function(t){r=r.next={task:t,domain:u&&process.domain,next:null},o||(o=!0,i())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)u=!0,i=function(){process.nextTick(t)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var f=new MessageChannel;f.port1.onmessage=function(){i=s,f.port1.onmessage=t,t()};var s=function(){f.port2.postMessage(0)};i=function(){setTimeout(t,0),s()}}else i=function(){setTimeout(t,0)};return L.runAfter=function(t){c.push(t),o||(o=!0,i())},L}(),q=Function.call,z=t(Array.prototype.slice),J=t(Array.prototype.reduce||function(t,n){var e=0,r=this.length;if(1===arguments.length)for(;;){if(e in this){n=this[e++];break}if(++e>=r)throw new TypeError}for(;e<r;e++)e in this&&(n=t(n,this[e],e));return n}),K=t(Array.prototype.indexOf||function(t){for(var n=0;n<this.length;n++)if(this[n]===t)return n;return-1}),W=t(Array.prototype.map||function(t,n){var e=this,r=[];return J(e,function(o,i,u){r.push(t.call(n,i,u,e))},void 0),r}),X=Object.create||function(t){function n(){}return n.prototype=t,new n},Y=Object.defineProperty||function(t,n,e){return t[n]=e.value,t},Z=t(Object.prototype.hasOwnProperty),tt=Object.keys||function(t){var n=[];for(var e in t)Z(t,e)&&n.push(e);return n},nt=t(Object.prototype.toString);V="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var et="From previous event:";s.resolve=s,s.nextTick=L,s.longStackSupport=!1;var rt=1;"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(s.longStackSupport=!0),s.defer=p,p.prototype.makeNodeResolver=function(){var t=this;return function(n,e){n?t.reject(n):arguments.length>2?t.resolve(z(arguments,1)):t.resolve(e)}},s.Promise=a,s.promise=a,a.race=l,a.all=D,a.reject=T,a.resolve=s,s.passByCopy=function(t){return t},d.prototype.passByCopy=function(){return this},s.join=function(t,n){return s(t).join(n)},d.prototype.join=function(t){return s([this,t]).spread(function(t,n){if(t===n)return t;throw new Error("Q can't join: not the same: "+t+" "+n)})},s.race=l,d.prototype.race=function(){return this.then(s.race)},s.makePromise=d,d.prototype.toString=function(){return"[object Promise]"},d.prototype.then=function(t,n,e){function o(n){try{return"function"==typeof t?t(n):n}catch(t){return T(t)}}function i(t){if("function"==typeof n){r(t,c);try{return n(t)}catch(t){return T(t)}}return T(t)}function u(t){return"function"==typeof e?e(t):t}var c=this,f=p(),a=!1;return s.nextTick(function(){c.promiseDispatch(function(t){a||(a=!0,f.resolve(o(t)))},"when",[function(t){a||(a=!0,f.resolve(i(t)))}])}),c.promiseDispatch(void 0,"when",[void 0,function(t){var n,e=!1;try{n=u(t)}catch(t){if(e=!0,!s.onerror)throw t;s.onerror(t)}e||f.notify(n)}]),f.promise},s.tap=function(t,n){return s(t).tap(n)},d.prototype.tap=function(t){return t=s(t),this.then(function(n){return t.fcall(n).thenResolve(n)})},s.when=h,d.prototype.thenResolve=function(t){return this.then(function(){return t})},s.thenResolve=function(t,n){return s(t).thenResolve(n)},d.prototype.thenReject=function(t){return this.then(function(){throw t})},s.thenReject=function(t,n){return s(t).thenReject(n)},s.nearer=y,s.isPromise=v,s.isPromiseAlike=m,s.isPending=k,d.prototype.isPending=function(){return"pending"===this.inspect().state},s.isFulfilled=w,d.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},s.isRejected=j,d.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ot=[],it=[],ut=[],ct=!0;s.resetUnhandledRejections=g,s.getUnhandledReasons=function(){return ot.slice()},s.stopUnhandledRejectionTracking=function(){g(),ct=!1},g(),s.reject=T,s.fulfill=R,s.master=E,s.spread=O,d.prototype.spread=function(t,n){return this.all().then(function(n){return t.apply(void 0,n)},n)},s.async=C,s.spawn=Q,s.return=_,s.promised=N,s.dispatch=P,d.prototype.dispatch=function(t,n){var e=this,r=p();return s.nextTick(function(){e.promiseDispatch(r.resolve,t,n)}),r.promise},s.get=function(t,n){return s(t).dispatch("get",[n])},d.prototype.get=function(t){return this.dispatch("get",[t])},s.set=function(t,n,e){return s(t).dispatch("set",[n,e])},d.prototype.set=function(t,n){return this.dispatch("set",[t,n])},s.del=s.delete=function(t,n){return s(t).dispatch("delete",[n])},d.prototype.del=d.prototype.delete=function(t){return this.dispatch("delete",[t])},s.mapply=s.post=function(t,n,e){return s(t).dispatch("post",[n,e])},d.prototype.mapply=d.prototype.post=function(t,n){return this.dispatch("post",[t,n])},s.send=s.mcall=s.invoke=function(t,n){return s(t).dispatch("post",[n,z(arguments,2)])},d.prototype.send=d.prototype.mcall=d.prototype.invoke=function(t){return this.dispatch("post",[t,z(arguments,1)])},s.fapply=function(t,n){return s(t).dispatch("apply",[void 0,n])},d.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},s.try=s.fcall=function(t){return s(t).dispatch("apply",[void 0,z(arguments,1)])},d.prototype.fcall=function(){return this.dispatch("apply",[void 0,z(arguments)])},s.fbind=function(t){var n=s(t),e=z(arguments,1);return function(){return n.dispatch("apply",[this,e.concat(z(arguments))])}},d.prototype.fbind=function(){var t=this,n=z(arguments);return function(){return t.dispatch("apply",[this,n.concat(z(arguments))])}},s.keys=function(t){return s(t).dispatch("keys",[])},d.prototype.keys=function(){return this.dispatch("keys",[])},s.all=D,d.prototype.all=function(){return D(this)},s.any=A,d.prototype.any=function(){return A(this)},s.allResolved=function(t,n,e){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(n+" is deprecated, use "+e+" instead.",new Error("").stack),t.apply(t,arguments)}}(I,"allResolved","allSettled"),d.prototype.allResolved=function(){return I(this)},s.allSettled=U,d.prototype.allSettled=function(){return this.then(function(t){return D(W(t,function(t){function n(){return t.inspect()}return t=s(t),t.then(n,n)}))})},s.fail=s.catch=function(t,n){return s(t).then(void 0,n)},d.prototype.fail=d.prototype.catch=function(t){return this.then(void 0,t)},s.progress=F,d.prototype.progress=function(t){return this.then(void 0,void 0,t)},s.fin=s.finally=function(t,n){return s(t).finally(n)},d.prototype.fin=d.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=s(t),this.then(function(n){return t.fcall().then(function(){return n})},function(n){return t.fcall().then(function(){throw n})})},s.done=function(t,n,e,r){return s(t).done(n,e,r)},d.prototype.done=function(t,n,e){var o=function(t){s.nextTick(function(){if(r(t,i),!s.onerror)throw t;s.onerror(t)})},i=t||n||e?this.then(t,n,e):this;"object"==typeof process&&process&&process.domain&&(o=process.domain.bind(o)),i.then(void 0,o)},s.timeout=function(t,n,e){return s(t).timeout(n,e)},d.prototype.timeout=function(t,n){var e=p(),r=setTimeout(function(){n&&"string"!=typeof n||(n=new Error(n||"Timed out after "+t+" ms"),n.code="ETIMEDOUT"),e.reject(n)},t);return this.then(function(t){clearTimeout(r),e.resolve(t)},function(t){clearTimeout(r),e.reject(t)},e.notify),e.promise},s.delay=function(t,n){return void 0===n&&(n=t,t=void 0),s(t).delay(n)},d.prototype.delay=function(t){return this.then(function(n){var e=p();return setTimeout(function(){e.resolve(n)},t),e.promise})},s.nfapply=function(t,n){return s(t).nfapply(n)},d.prototype.nfapply=function(t){var n=p(),e=z(t);return e.push(n.makeNodeResolver()),this.fapply(e).fail(n.reject),n.promise},s.nfcall=function(t){var n=z(arguments,1);return s(t).nfapply(n)},d.prototype.nfcall=function(){var t=z(arguments),n=p();return t.push(n.makeNodeResolver()),this.fapply(t).fail(n.reject),n.promise},s.nfbind=s.denodeify=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var n=z(arguments,1);return function(){var e=n.concat(z(arguments)),r=p();return e.push(r.makeNodeResolver()),s(t).fapply(e).fail(r.reject),r.promise}},d.prototype.nfbind=d.prototype.denodeify=function(){var t=z(arguments);return t.unshift(this),s.denodeify.apply(void 0,t)},s.nbind=function(t,n){var e=z(arguments,2);return function(){function r(){return t.apply(n,arguments)}var o=e.concat(z(arguments)),i=p();return o.push(i.makeNodeResolver()),s(r).fapply(o).fail(i.reject),i.promise}},d.prototype.nbind=function(){var t=z(arguments,0);return t.unshift(this),s.nbind.apply(void 0,t)},s.nmapply=s.npost=function(t,n,e){return s(t).npost(n,e)},d.prototype.nmapply=d.prototype.npost=function(t,n){var e=z(n||[]),r=p();return e.push(r.makeNodeResolver()),this.dispatch("post",[t,e]).fail(r.reject),r.promise},s.nsend=s.nmcall=s.ninvoke=function(t,n){var e=z(arguments,2),r=p();return e.push(r.makeNodeResolver()),s(t).dispatch("post",[n,e]).fail(r.reject),r.promise},d.prototype.nsend=d.prototype.nmcall=d.prototype.ninvoke=function(t){var n=z(arguments,1),e=p();return n.push(e.makeNodeResolver()),this.dispatch("post",[t,n]).fail(e.reject),e.promise},s.nodeify=M,d.prototype.nodeify=function(t){if(!t)return this;this.then(function(n){s.nextTick(function(){t(null,n)})},function(n){s.nextTick(function(){t(n)})})},s.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ft=f();return s});

}).call(this,require('_process'))

},{"_process":22}],24:[function(require,module,exports){
"use strict";module.exports=require("react/lib/ReactDOM");

},{"react/lib/ReactDOM":59}],25:[function(require,module,exports){
"use strict";var ReactMount=require("./ReactMount"),findDOMNode=require("./findDOMNode"),focusNode=require("fbjs/lib/focusNode"),Mixin={componentDidMount:function(){this.props.autoFocus&&focusNode(findDOMNode(this))}},AutoFocusUtils={Mixin:Mixin,focusDOMComponent:function(){focusNode(ReactMount.getNode(this._rootNodeID))}};module.exports=AutoFocusUtils;

},{"./ReactMount":87,"./findDOMNode":130,"fbjs/lib/focusNode":160}],26:[function(require,module,exports){
"use strict";function isPresto(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function isKeypressCommand(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function getCompositionEventType(e){switch(e){case topLevelTypes.topCompositionStart:return eventTypes.compositionStart;case topLevelTypes.topCompositionEnd:return eventTypes.compositionEnd;case topLevelTypes.topCompositionUpdate:return eventTypes.compositionUpdate}}function isFallbackCompositionStart(e,t){return e===topLevelTypes.topKeyDown&&t.keyCode===START_KEYCODE}function isFallbackCompositionEnd(e,t){switch(e){case topLevelTypes.topKeyUp:return-1!==END_KEYCODES.indexOf(t.keyCode);case topLevelTypes.topKeyDown:return t.keyCode!==START_KEYCODE;case topLevelTypes.topKeyPress:case topLevelTypes.topMouseDown:case topLevelTypes.topBlur:return!0;default:return!1}}function getDataFromCustomEvent(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function extractCompositionEvent(e,t,o,n,p){var s,i;if(canUseCompositionEvent?s=getCompositionEventType(e):currentComposition?isFallbackCompositionEnd(e,n)&&(s=eventTypes.compositionEnd):isFallbackCompositionStart(e,n)&&(s=eventTypes.compositionStart),!s)return null;useFallbackCompositionData&&(currentComposition||s!==eventTypes.compositionStart?s===eventTypes.compositionEnd&&currentComposition&&(i=currentComposition.getData()):currentComposition=FallbackCompositionState.getPooled(t));var r=SyntheticCompositionEvent.getPooled(s,o,n,p);if(i)r.data=i;else{var a=getDataFromCustomEvent(n);null!==a&&(r.data=a)}return EventPropagators.accumulateTwoPhaseDispatches(r),r}function getNativeBeforeInputChars(e,t){switch(e){case topLevelTypes.topCompositionEnd:return getDataFromCustomEvent(t);case topLevelTypes.topKeyPress:return t.which!==SPACEBAR_CODE?null:(hasSpaceKeypress=!0,SPACEBAR_CHAR);case topLevelTypes.topTextInput:var o=t.data;return o===SPACEBAR_CHAR&&hasSpaceKeypress?null:o;default:return null}}function getFallbackBeforeInputChars(e,t){if(currentComposition){if(e===topLevelTypes.topCompositionEnd||isFallbackCompositionEnd(e,t)){var o=currentComposition.getData();return FallbackCompositionState.release(currentComposition),currentComposition=null,o}return null}switch(e){case topLevelTypes.topPaste:return null;case topLevelTypes.topKeyPress:return t.which&&!isKeypressCommand(t)?String.fromCharCode(t.which):null;case topLevelTypes.topCompositionEnd:return useFallbackCompositionData?null:t.data;default:return null}}function extractBeforeInputEvent(e,t,o,n,p){var s;if(!(s=canUseTextInputEvent?getNativeBeforeInputChars(e,n):getFallbackBeforeInputChars(e,n)))return null;var i=SyntheticInputEvent.getPooled(eventTypes.beforeInput,o,n,p);return i.data=s,EventPropagators.accumulateTwoPhaseDispatches(i),i}var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),FallbackCompositionState=require("./FallbackCompositionState"),SyntheticCompositionEvent=require("./SyntheticCompositionEvent"),SyntheticInputEvent=require("./SyntheticInputEvent"),keyOf=require("fbjs/lib/keyOf"),END_KEYCODES=[9,13,27,32],START_KEYCODE=229,canUseCompositionEvent=ExecutionEnvironment.canUseDOM&&"CompositionEvent"in window,documentMode=null;ExecutionEnvironment.canUseDOM&&"documentMode"in document&&(documentMode=document.documentMode);var canUseTextInputEvent=ExecutionEnvironment.canUseDOM&&"TextEvent"in window&&!documentMode&&!isPresto(),useFallbackCompositionData=ExecutionEnvironment.canUseDOM&&(!canUseCompositionEvent||documentMode&&documentMode>8&&documentMode<=11),SPACEBAR_CODE=32,SPACEBAR_CHAR=String.fromCharCode(SPACEBAR_CODE),topLevelTypes=EventConstants.topLevelTypes,eventTypes={beforeInput:{phasedRegistrationNames:{bubbled:keyOf({onBeforeInput:null}),captured:keyOf({onBeforeInputCapture:null})},dependencies:[topLevelTypes.topCompositionEnd,topLevelTypes.topKeyPress,topLevelTypes.topTextInput,topLevelTypes.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:keyOf({onCompositionEnd:null}),captured:keyOf({onCompositionEndCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionEnd,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:keyOf({onCompositionStart:null}),captured:keyOf({onCompositionStartCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionStart,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:keyOf({onCompositionUpdate:null}),captured:keyOf({onCompositionUpdateCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionUpdate,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]}},hasSpaceKeypress=!1,currentComposition=null,BeforeInputEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,o,n,p){return[extractCompositionEvent(e,t,o,n,p),extractBeforeInputEvent(e,t,o,n,p)]}};module.exports=BeforeInputEventPlugin;

},{"./EventConstants":38,"./EventPropagators":42,"./FallbackCompositionState":43,"./SyntheticCompositionEvent":112,"./SyntheticInputEvent":116,"fbjs/lib/ExecutionEnvironment":152,"fbjs/lib/keyOf":170}],27:[function(require,module,exports){
"use strict";function prefixKey(o,r){return o+r.charAt(0).toUpperCase()+r.substring(1)}var isUnitlessNumber={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},prefixes=["Webkit","ms","Moz","O"];Object.keys(isUnitlessNumber).forEach(function(o){prefixes.forEach(function(r){isUnitlessNumber[prefixKey(r,o)]=isUnitlessNumber[o]})});var shorthandPropertyExpansions={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},CSSProperty={isUnitlessNumber:isUnitlessNumber,shorthandPropertyExpansions:shorthandPropertyExpansions};module.exports=CSSProperty;

},{}],28:[function(require,module,exports){
"use strict";var CSSProperty=require("./CSSProperty"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactPerf=require("./ReactPerf"),camelizeStyleName=require("fbjs/lib/camelizeStyleName"),dangerousStyleValue=require("./dangerousStyleValue"),hyphenateStyleName=require("fbjs/lib/hyphenateStyleName"),memoizeStringOnly=require("fbjs/lib/memoizeStringOnly"),warning=require("fbjs/lib/warning"),processStyleName=memoizeStringOnly(function(e){return hyphenateStyleName(e)}),hasShorthandPropertyBug=!1,styleFloatAccessor="cssFloat";if(ExecutionEnvironment.canUseDOM){var tempStyle=document.createElement("div").style;try{tempStyle.font=""}catch(e){hasShorthandPropertyBug=!0}void 0===document.documentElement.style.cssFloat&&(styleFloatAccessor="styleFloat")}var badVendoredStyleNamePattern,badStyleValueWithSemicolonPattern,warnedStyleNames,warnedStyleValues,warnHyphenatedStyleName,warnBadVendoredStyleName,warnStyleValueWithSemicolon,warnValidStyle,CSSPropertyOperations={createMarkupForStyles:function(e){var r="";for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];null!=a&&(r+=processStyleName(t)+":",r+=dangerousStyleValue(t,a)+";")}return r||null},setValueForStyles:function(e,r){var t=e.style;for(var a in r)if(r.hasOwnProperty(a)){var n=dangerousStyleValue(a,r[a]);if("float"===a&&(a=styleFloatAccessor),n)t[a]=n;else{var l=hasShorthandPropertyBug&&CSSProperty.shorthandPropertyExpansions[a];if(l)for(var o in l)t[o]="";else t[a]=""}}}};ReactPerf.measureMethods(CSSPropertyOperations,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),module.exports=CSSPropertyOperations;

},{"./CSSProperty":27,"./ReactPerf":93,"./dangerousStyleValue":127,"fbjs/lib/ExecutionEnvironment":152,"fbjs/lib/camelizeStyleName":154,"fbjs/lib/hyphenateStyleName":165,"fbjs/lib/memoizeStringOnly":172,"fbjs/lib/warning":175}],29:[function(require,module,exports){
"use strict";function CallbackQueue(){this._callbacks=null,this._contexts=null}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant");assign(CallbackQueue.prototype,{enqueue:function(t,l){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(l)},notifyAll:function(){var t=this._callbacks,l=this._contexts;if(t){t.length!==l.length&&invariant(!1),this._callbacks=null,this._contexts=null;for(var s=0;s<t.length;s++)t[s].call(l[s]);t.length=0,l.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),PooledClass.addPoolingTo(CallbackQueue),module.exports=CallbackQueue;

},{"./Object.assign":46,"./PooledClass":47,"fbjs/lib/invariant":166}],30:[function(require,module,exports){
"use strict";function shouldUseChangeEvent(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function manualDispatchChangeEvent(e){var t=SyntheticEvent.getPooled(eventTypes.change,activeElementID,e,getEventTarget(e));EventPropagators.accumulateTwoPhaseDispatches(t),ReactUpdates.batchedUpdates(runEventInBatch,t)}function runEventInBatch(e){EventPluginHub.enqueueEvents(e),EventPluginHub.processEventQueue(!1)}function startWatchingForChangeEventIE8(e,t){activeElement=e,activeElementID=t,activeElement.attachEvent("onchange",manualDispatchChangeEvent)}function stopWatchingForChangeEventIE8(){activeElement&&(activeElement.detachEvent("onchange",manualDispatchChangeEvent),activeElement=null,activeElementID=null)}function getTargetIDForChangeEvent(e,t,n){if(e===topLevelTypes.topChange)return n}function handleEventsForChangeEventIE8(e,t,n){e===topLevelTypes.topFocus?(stopWatchingForChangeEventIE8(),startWatchingForChangeEventIE8(t,n)):e===topLevelTypes.topBlur&&stopWatchingForChangeEventIE8()}function startWatchingForValueChange(e,t){activeElement=e,activeElementID=t,activeElementValue=e.value,activeElementValueProp=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(activeElement,"value",newValueProp),activeElement.attachEvent("onpropertychange",handlePropertyChange)}function stopWatchingForValueChange(){activeElement&&(delete activeElement.value,activeElement.detachEvent("onpropertychange",handlePropertyChange),activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null)}function handlePropertyChange(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==activeElementValue&&(activeElementValue=t,manualDispatchChangeEvent(e))}}function getTargetIDForInputEvent(e,t,n){if(e===topLevelTypes.topInput)return n}function handleEventsForInputEventIE(e,t,n){e===topLevelTypes.topFocus?(stopWatchingForValueChange(),startWatchingForValueChange(t,n)):e===topLevelTypes.topBlur&&stopWatchingForValueChange()}function getTargetIDForInputEventIE(e,t,n){if((e===topLevelTypes.topSelectionChange||e===topLevelTypes.topKeyUp||e===topLevelTypes.topKeyDown)&&activeElement&&activeElement.value!==activeElementValue)return activeElementValue=activeElement.value,activeElementID}function shouldUseClickEvent(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function getTargetIDForClickEvent(e,t,n){if(e===topLevelTypes.topClick)return n}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactUpdates=require("./ReactUpdates"),SyntheticEvent=require("./SyntheticEvent"),getEventTarget=require("./getEventTarget"),isEventSupported=require("./isEventSupported"),isTextInputElement=require("./isTextInputElement"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,eventTypes={change:{phasedRegistrationNames:{bubbled:keyOf({onChange:null}),captured:keyOf({onChangeCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topChange,topLevelTypes.topClick,topLevelTypes.topFocus,topLevelTypes.topInput,topLevelTypes.topKeyDown,topLevelTypes.topKeyUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null,doesChangeEventBubble=!1;ExecutionEnvironment.canUseDOM&&(doesChangeEventBubble=isEventSupported("change")&&(!("documentMode"in document)||document.documentMode>8));var isInputEventSupported=!1;ExecutionEnvironment.canUseDOM&&(isInputEventSupported=isEventSupported("input")&&(!("documentMode"in document)||document.documentMode>9));var newValueProp={get:function(){return activeElementValueProp.get.call(this)},set:function(e){activeElementValue=""+e,activeElementValueProp.set.call(this,e)}},ChangeEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,a,o){var l,u;if(shouldUseChangeEvent(t)?doesChangeEventBubble?l=getTargetIDForChangeEvent:u=handleEventsForChangeEventIE8:isTextInputElement(t)?isInputEventSupported?l=getTargetIDForInputEvent:(l=getTargetIDForInputEventIE,u=handleEventsForInputEventIE):shouldUseClickEvent(t)&&(l=getTargetIDForClickEvent),l){var v=l(e,t,n);if(v){var p=SyntheticEvent.getPooled(eventTypes.change,v,a,o);return p.type="change",EventPropagators.accumulateTwoPhaseDispatches(p),p}}u&&u(e,t,n)}};module.exports=ChangeEventPlugin;

},{"./EventConstants":38,"./EventPluginHub":39,"./EventPropagators":42,"./ReactUpdates":105,"./SyntheticEvent":114,"./getEventTarget":136,"./isEventSupported":141,"./isTextInputElement":142,"fbjs/lib/ExecutionEnvironment":152,"fbjs/lib/keyOf":170}],31:[function(require,module,exports){
"use strict";var nextReactRootIndex=0,ClientReactRootIndex={createReactRootIndex:function(){return nextReactRootIndex++}};module.exports=ClientReactRootIndex;

},{}],32:[function(require,module,exports){
"use strict";function insertChildAt(e,t,n){var r=n>=e.childNodes.length?null:e.childNodes.item(n);e.insertBefore(t,r)}var Danger=require("./Danger"),ReactMultiChildUpdateTypes=require("./ReactMultiChildUpdateTypes"),ReactPerf=require("./ReactPerf"),setInnerHTML=require("./setInnerHTML"),setTextContent=require("./setTextContent"),invariant=require("fbjs/lib/invariant"),DOMChildrenOperations={dangerouslyReplaceNodeWithMarkup:Danger.dangerouslyReplaceNodeWithMarkup,updateTextContent:setTextContent,processUpdates:function(e,t){for(var n,r=null,a=null,i=0;i<e.length;i++)if(n=e[i],n.type===ReactMultiChildUpdateTypes.MOVE_EXISTING||n.type===ReactMultiChildUpdateTypes.REMOVE_NODE){var d=n.fromIndex,l=n.parentNode.childNodes[d],p=n.parentID;l||invariant(!1),r=r||{},r[p]=r[p]||[],r[p][d]=l,a=a||[],a.push(l)}var s;if(s=t.length&&"string"==typeof t[0]?Danger.dangerouslyRenderMarkup(t):t,a)for(var o=0;o<a.length;o++)a[o].parentNode.removeChild(a[o]);for(var u=0;u<e.length;u++)switch(n=e[u],n.type){case ReactMultiChildUpdateTypes.INSERT_MARKUP:insertChildAt(n.parentNode,s[n.markupIndex],n.toIndex);break;case ReactMultiChildUpdateTypes.MOVE_EXISTING:insertChildAt(n.parentNode,r[n.parentID][n.fromIndex],n.toIndex);break;case ReactMultiChildUpdateTypes.SET_MARKUP:setInnerHTML(n.parentNode,n.content);break;case ReactMultiChildUpdateTypes.TEXT_CONTENT:setTextContent(n.parentNode,n.content);break;case ReactMultiChildUpdateTypes.REMOVE_NODE:}}};ReactPerf.measureMethods(DOMChildrenOperations,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),module.exports=DOMChildrenOperations;

},{"./Danger":35,"./ReactMultiChildUpdateTypes":89,"./ReactPerf":93,"./setInnerHTML":146,"./setTextContent":147,"fbjs/lib/invariant":166}],33:[function(require,module,exports){
"use strict";function checkMask(t,e){return(t&e)===e}var invariant=require("fbjs/lib/invariant"),DOMPropertyInjection={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(t){var e=DOMPropertyInjection,r=t.Properties||{},a=t.DOMAttributeNamespaces||{},o=t.DOMAttributeNames||{},i=t.DOMPropertyNames||{},s=t.DOMMutationMethods||{};t.isCustomAttribute&&DOMProperty._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var u in r){DOMProperty.properties.hasOwnProperty(u)&&invariant(!1);var n=u.toLowerCase(),c=r[u],E={attributeName:n,attributeNamespace:null,propertyName:u,mutationMethod:null,mustUseAttribute:checkMask(c,e.MUST_USE_ATTRIBUTE),mustUseProperty:checkMask(c,e.MUST_USE_PROPERTY),hasSideEffects:checkMask(c,e.HAS_SIDE_EFFECTS),hasBooleanValue:checkMask(c,e.HAS_BOOLEAN_VALUE),hasNumericValue:checkMask(c,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:checkMask(c,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:checkMask(c,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(E.mustUseAttribute&&E.mustUseProperty&&invariant(!1),!E.mustUseProperty&&E.hasSideEffects&&invariant(!1),E.hasBooleanValue+E.hasNumericValue+E.hasOverloadedBooleanValue<=1||invariant(!1),o.hasOwnProperty(u)){var A=o[u];E.attributeName=A}a.hasOwnProperty(u)&&(E.attributeNamespace=a[u]),i.hasOwnProperty(u)&&(E.propertyName=i[u]),s.hasOwnProperty(u)&&(E.mutationMethod=s[u]),DOMProperty.properties[u]=E}}},defaultValueCache={},DOMProperty={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<DOMProperty._isCustomAttributeFunctions.length;e++){if((0,DOMProperty._isCustomAttributeFunctions[e])(t))return!0}return!1},getDefaultValueForProperty:function(t,e){var r,a=defaultValueCache[t];return a||(defaultValueCache[t]=a={}),e in a||(r=document.createElement(t),a[e]=r[e]),a[e]},injection:DOMPropertyInjection};module.exports=DOMProperty;

},{"fbjs/lib/invariant":166}],34:[function(require,module,exports){
"use strict";function isAttributeNameSafe(e){return!!validatedAttributeNameCache.hasOwnProperty(e)||!illegalAttributeNameCache.hasOwnProperty(e)&&(VALID_ATTRIBUTE_NAME_REGEX.test(e)?(validatedAttributeNameCache[e]=!0,!0):(illegalAttributeNameCache[e]=!0,!1))}function shouldIgnoreValue(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&!1===t}var DOMProperty=require("./DOMProperty"),ReactPerf=require("./ReactPerf"),quoteAttributeValueForBrowser=require("./quoteAttributeValueForBrowser"),warning=require("fbjs/lib/warning"),VALID_ATTRIBUTE_NAME_REGEX=/^[a-zA-Z_][\w\.\-]*$/,illegalAttributeNameCache={},validatedAttributeNameCache={},reactProps,warnedProperties,warnUnknownProperty,DOMPropertyOperations={createMarkupForID:function(e){return DOMProperty.ID_ATTRIBUTE_NAME+"="+quoteAttributeValueForBrowser(e)},setAttributeForID:function(e,t){e.setAttribute(DOMProperty.ID_ATTRIBUTE_NAME,t)},createMarkupForProperty:function(e,t){var r=DOMProperty.properties.hasOwnProperty(e)?DOMProperty.properties[e]:null;if(r){if(shouldIgnoreValue(r,t))return"";var o=r.attributeName;return r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===t?o+'=""':o+"="+quoteAttributeValueForBrowser(t)}return DOMProperty.isCustomAttribute(e)?null==t?"":e+"="+quoteAttributeValueForBrowser(t):null},createMarkupForCustomAttribute:function(e,t){return isAttributeNameSafe(e)&&null!=t?e+"="+quoteAttributeValueForBrowser(t):""},setValueForProperty:function(e,t,r){var o=DOMProperty.properties.hasOwnProperty(t)?DOMProperty.properties[t]:null;if(o){var a=o.mutationMethod;if(a)a(e,r);else if(shouldIgnoreValue(o,r))this.deleteValueForProperty(e,t);else if(o.mustUseAttribute){var u=o.attributeName,i=o.attributeNamespace;i?e.setAttributeNS(i,u,""+r):o.hasBooleanValue||o.hasOverloadedBooleanValue&&!0===r?e.setAttribute(u,""):e.setAttribute(u,""+r)}else{var s=o.propertyName;o.hasSideEffects&&""+e[s]==""+r||(e[s]=r)}}else DOMProperty.isCustomAttribute(t)&&DOMPropertyOperations.setValueForAttribute(e,t,r)},setValueForAttribute:function(e,t,r){isAttributeNameSafe(t)&&(null==r?e.removeAttribute(t):e.setAttribute(t,""+r))},deleteValueForProperty:function(e,t){var r=DOMProperty.properties.hasOwnProperty(t)?DOMProperty.properties[t]:null;if(r){var o=r.mutationMethod;if(o)o(e,void 0);else if(r.mustUseAttribute)e.removeAttribute(r.attributeName);else{var a=r.propertyName,u=DOMProperty.getDefaultValueForProperty(e.nodeName,a);r.hasSideEffects&&""+e[a]===u||(e[a]=u)}}else DOMProperty.isCustomAttribute(t)&&e.removeAttribute(t)}};ReactPerf.measureMethods(DOMPropertyOperations,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),module.exports=DOMPropertyOperations;

},{"./DOMProperty":33,"./ReactPerf":93,"./quoteAttributeValueForBrowser":144,"fbjs/lib/warning":175}],35:[function(require,module,exports){
"use strict";function getNodeName(e){return e.substring(1,e.indexOf(" "))}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),createNodesFromMarkup=require("fbjs/lib/createNodesFromMarkup"),emptyFunction=require("fbjs/lib/emptyFunction"),getMarkupWrap=require("fbjs/lib/getMarkupWrap"),invariant=require("fbjs/lib/invariant"),OPEN_TAG_NAME_EXP=/^(<[^ \/>]+)/,RESULT_INDEX_ATTR="data-danger-index",Danger={dangerouslyRenderMarkup:function(e){ExecutionEnvironment.canUseDOM||invariant(!1);for(var r,n={},t=0;t<e.length;t++)e[t]||invariant(!1),r=getNodeName(e[t]),r=getMarkupWrap(r)?r:"*",n[r]=n[r]||[],n[r][t]=e[t];var a=[],i=0;for(r in n)if(n.hasOwnProperty(r)){var o,u=n[r];for(o in u)if(u.hasOwnProperty(o)){var p=u[o];u[o]=p.replace(OPEN_TAG_NAME_EXP,"$1 "+RESULT_INDEX_ATTR+'="'+o+'" ')}for(var s=createNodesFromMarkup(u.join(""),emptyFunction),E=0;E<s.length;++E){var v=s[E];v.hasAttribute&&v.hasAttribute(RESULT_INDEX_ATTR)&&(o=+v.getAttribute(RESULT_INDEX_ATTR),v.removeAttribute(RESULT_INDEX_ATTR),a.hasOwnProperty(o)&&invariant(!1),a[o]=v,i+=1)}}return i!==a.length&&invariant(!1),a.length!==e.length&&invariant(!1),a},dangerouslyReplaceNodeWithMarkup:function(e,r){ExecutionEnvironment.canUseDOM||invariant(!1),r||invariant(!1),"html"===e.tagName.toLowerCase()&&invariant(!1);var n;n="string"==typeof r?createNodesFromMarkup(r,emptyFunction)[0]:r,e.parentNode.replaceChild(n,e)}};module.exports=Danger;

},{"fbjs/lib/ExecutionEnvironment":152,"fbjs/lib/createNodesFromMarkup":157,"fbjs/lib/emptyFunction":158,"fbjs/lib/getMarkupWrap":162,"fbjs/lib/invariant":166}],36:[function(require,module,exports){
"use strict";var keyOf=require("fbjs/lib/keyOf"),DefaultEventPluginOrder=[keyOf({ResponderEventPlugin:null}),keyOf({SimpleEventPlugin:null}),keyOf({TapEventPlugin:null}),keyOf({EnterLeaveEventPlugin:null}),keyOf({ChangeEventPlugin:null}),keyOf({SelectEventPlugin:null}),keyOf({BeforeInputEventPlugin:null})];module.exports=DefaultEventPluginOrder;

},{"fbjs/lib/keyOf":170}],37:[function(require,module,exports){
"use strict";var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),SyntheticMouseEvent=require("./SyntheticMouseEvent"),ReactMount=require("./ReactMount"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,getFirstReactDOM=ReactMount.getFirstReactDOM,eventTypes={mouseEnter:{registrationName:keyOf({onMouseEnter:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]},mouseLeave:{registrationName:keyOf({onMouseLeave:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]}},extractedEvents=[null,null],EnterLeaveEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,o,r){if(e===topLevelTypes.topMouseOver&&(o.relatedTarget||o.fromElement))return null;if(e!==topLevelTypes.topMouseOut&&e!==topLevelTypes.topMouseOver)return null;var s;if(t.window===t)s=t;else{var a=t.ownerDocument;s=a?a.defaultView||a.parentWindow:window}var u,v,p="",l="";if(e===topLevelTypes.topMouseOut?(u=t,p=n,v=getFirstReactDOM(o.relatedTarget||o.toElement),v?l=ReactMount.getID(v):v=s,v=v||s):(u=s,v=t,l=n),u===v)return null;var i=SyntheticMouseEvent.getPooled(eventTypes.mouseLeave,p,o,r);i.type="mouseleave",i.target=u,i.relatedTarget=v;var y=SyntheticMouseEvent.getPooled(eventTypes.mouseEnter,l,o,r);return y.type="mouseenter",y.target=v,y.relatedTarget=u,EventPropagators.accumulateEnterLeaveDispatches(i,y,p,l),extractedEvents[0]=i,extractedEvents[1]=y,extractedEvents}};module.exports=EnterLeaveEventPlugin;

},{"./EventConstants":38,"./EventPropagators":42,"./ReactMount":87,"./SyntheticMouseEvent":118,"fbjs/lib/keyOf":170}],38:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),PropagationPhases=keyMirror({bubbled:null,captured:null}),topLevelTypes=keyMirror({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),EventConstants={topLevelTypes:topLevelTypes,PropagationPhases:PropagationPhases};module.exports=EventConstants;

},{"fbjs/lib/keyMirror":169}],39:[function(require,module,exports){
"use strict";function validateInstanceHandle(){InstanceHandle&&InstanceHandle.traverseTwoPhase&&InstanceHandle.traverseEnterLeave}var EventPluginRegistry=require("./EventPluginRegistry"),EventPluginUtils=require("./EventPluginUtils"),ReactErrorUtils=require("./ReactErrorUtils"),accumulateInto=require("./accumulateInto"),forEachAccumulated=require("./forEachAccumulated"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),listenerBank={},eventQueue=null,executeDispatchesAndRelease=function(e,n){e&&(EventPluginUtils.executeDispatchesInOrder(e,n),e.isPersistent()||e.constructor.release(e))},executeDispatchesAndReleaseSimulated=function(e){return executeDispatchesAndRelease(e,!0)},executeDispatchesAndReleaseTopLevel=function(e){return executeDispatchesAndRelease(e,!1)},InstanceHandle=null,EventPluginHub={injection:{injectMount:EventPluginUtils.injection.injectMount,injectInstanceHandle:function(e){InstanceHandle=e},getInstanceHandle:function(){return InstanceHandle},injectEventPluginOrder:EventPluginRegistry.injectEventPluginOrder,injectEventPluginsByName:EventPluginRegistry.injectEventPluginsByName},eventNameDispatchConfigs:EventPluginRegistry.eventNameDispatchConfigs,registrationNameModules:EventPluginRegistry.registrationNameModules,putListener:function(e,n,t){"function"!=typeof t&&invariant(!1),(listenerBank[n]||(listenerBank[n]={}))[e]=t;var i=EventPluginRegistry.registrationNameModules[n];i&&i.didPutListener&&i.didPutListener(e,n,t)},getListener:function(e,n){var t=listenerBank[n];return t&&t[e]},deleteListener:function(e,n){var t=EventPluginRegistry.registrationNameModules[n];t&&t.willDeleteListener&&t.willDeleteListener(e,n);var i=listenerBank[n];i&&delete i[e]},deleteAllListeners:function(e){for(var n in listenerBank)if(listenerBank[n][e]){var t=EventPluginRegistry.registrationNameModules[n];t&&t.willDeleteListener&&t.willDeleteListener(e,n),delete listenerBank[n][e]}},extractEvents:function(e,n,t,i,r){for(var a,u=EventPluginRegistry.plugins,s=0;s<u.length;s++){var l=u[s];if(l){var c=l.extractEvents(e,n,t,i,r);c&&(a=accumulateInto(a,c))}}return a},enqueueEvents:function(e){e&&(eventQueue=accumulateInto(eventQueue,e))},processEventQueue:function(e){var n=eventQueue;eventQueue=null,e?forEachAccumulated(n,executeDispatchesAndReleaseSimulated):forEachAccumulated(n,executeDispatchesAndReleaseTopLevel),eventQueue&&invariant(!1),ReactErrorUtils.rethrowCaughtError()},__purge:function(){listenerBank={}},__getListenerBank:function(){return listenerBank}};module.exports=EventPluginHub;

},{"./EventPluginRegistry":40,"./EventPluginUtils":41,"./ReactErrorUtils":78,"./accumulateInto":124,"./forEachAccumulated":132,"fbjs/lib/invariant":166,"fbjs/lib/warning":175}],40:[function(require,module,exports){
"use strict";function recomputePluginOrdering(){if(EventPluginOrder)for(var e in namesToPlugins){var n=namesToPlugins[e],i=EventPluginOrder.indexOf(e);if(i>-1||invariant(!1),!EventPluginRegistry.plugins[i]){n.extractEvents||invariant(!1),EventPluginRegistry.plugins[i]=n;var r=n.eventTypes;for(var t in r)publishEventForPlugin(r[t],n,t)||invariant(!1)}}}function publishEventForPlugin(e,n,i){EventPluginRegistry.eventNameDispatchConfigs.hasOwnProperty(i)&&invariant(!1),EventPluginRegistry.eventNameDispatchConfigs[i]=e;var r=e.phasedRegistrationNames;if(r){for(var t in r)if(r.hasOwnProperty(t)){var a=r[t];publishRegistrationName(a,n,i)}return!0}return!!e.registrationName&&(publishRegistrationName(e.registrationName,n,i),!0)}function publishRegistrationName(e,n,i){EventPluginRegistry.registrationNameModules[e]&&invariant(!1),EventPluginRegistry.registrationNameModules[e]=n,EventPluginRegistry.registrationNameDependencies[e]=n.eventTypes[i].dependencies}var invariant=require("fbjs/lib/invariant"),EventPluginOrder=null,namesToPlugins={},EventPluginRegistry={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){EventPluginOrder&&invariant(!1),EventPluginOrder=Array.prototype.slice.call(e),recomputePluginOrdering()},injectEventPluginsByName:function(e){var n=!1;for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];namesToPlugins.hasOwnProperty(i)&&namesToPlugins[i]===r||(namesToPlugins[i]&&invariant(!1),namesToPlugins[i]=r,n=!0)}n&&recomputePluginOrdering()},getPluginModuleForEvent:function(e){var n=e.dispatchConfig;if(n.registrationName)return EventPluginRegistry.registrationNameModules[n.registrationName]||null;for(var i in n.phasedRegistrationNames)if(n.phasedRegistrationNames.hasOwnProperty(i)){var r=EventPluginRegistry.registrationNameModules[n.phasedRegistrationNames[i]];if(r)return r}return null},_resetEventPlugins:function(){EventPluginOrder=null;for(var e in namesToPlugins)namesToPlugins.hasOwnProperty(e)&&delete namesToPlugins[e];EventPluginRegistry.plugins.length=0;var n=EventPluginRegistry.eventNameDispatchConfigs;for(var i in n)n.hasOwnProperty(i)&&delete n[i];var r=EventPluginRegistry.registrationNameModules;for(var t in r)r.hasOwnProperty(t)&&delete r[t]}};module.exports=EventPluginRegistry;

},{"fbjs/lib/invariant":166}],41:[function(require,module,exports){
"use strict";function isEndish(e){return e===topLevelTypes.topMouseUp||e===topLevelTypes.topTouchEnd||e===topLevelTypes.topTouchCancel}function isMoveish(e){return e===topLevelTypes.topMouseMove||e===topLevelTypes.topTouchMove}function isStartish(e){return e===topLevelTypes.topMouseDown||e===topLevelTypes.topTouchStart}function executeDispatch(e,t,i,n){var s=e.type||"unknown-event";e.currentTarget=injection.Mount.getNode(n),t?ReactErrorUtils.invokeGuardedCallbackWithCatch(s,i,e,n):ReactErrorUtils.invokeGuardedCallback(s,i,e,n),e.currentTarget=null}function executeDispatchesInOrder(e,t){var i=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(i))for(var s=0;s<i.length&&!e.isPropagationStopped();s++)executeDispatch(e,t,i[s],n[s]);else i&&executeDispatch(e,t,i,n);e._dispatchListeners=null,e._dispatchIDs=null}function executeDispatchesInOrderStopAtTrueImpl(e){var t=e._dispatchListeners,i=e._dispatchIDs;if(Array.isArray(t)){for(var n=0;n<t.length&&!e.isPropagationStopped();n++)if(t[n](e,i[n]))return i[n]}else if(t&&t(e,i))return i;return null}function executeDispatchesInOrderStopAtTrue(e){var t=executeDispatchesInOrderStopAtTrueImpl(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function executeDirectDispatch(e){var t=e._dispatchListeners,i=e._dispatchIDs;Array.isArray(t)&&invariant(!1);var n=t?t(e,i):null;return e._dispatchListeners=null,e._dispatchIDs=null,n}function hasDispatches(e){return!!e._dispatchListeners}var EventConstants=require("./EventConstants"),ReactErrorUtils=require("./ReactErrorUtils"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),injection={Mount:null,injectMount:function(e){injection.Mount=e}},topLevelTypes=EventConstants.topLevelTypes,validateEventDispatches,EventPluginUtils={isEndish:isEndish,isMoveish:isMoveish,isStartish:isStartish,executeDirectDispatch:executeDirectDispatch,executeDispatchesInOrder:executeDispatchesInOrder,executeDispatchesInOrderStopAtTrue:executeDispatchesInOrderStopAtTrue,hasDispatches:hasDispatches,getNode:function(e){return injection.Mount.getNode(e)},getID:function(e){return injection.Mount.getID(e)},injection:injection};module.exports=EventPluginUtils;

},{"./EventConstants":38,"./ReactErrorUtils":78,"fbjs/lib/invariant":166,"fbjs/lib/warning":175}],42:[function(require,module,exports){
"use strict";function listenerAtPhase(e,a,t){var c=a.dispatchConfig.phasedRegistrationNames[t];return getListener(e,c)}function accumulateDirectionalDispatches(e,a,t){var c=a?PropagationPhases.bubbled:PropagationPhases.captured,s=listenerAtPhase(e,t,c);s&&(t._dispatchListeners=accumulateInto(t._dispatchListeners,s),t._dispatchIDs=accumulateInto(t._dispatchIDs,e))}function accumulateTwoPhaseDispatchesSingle(e){e&&e.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,accumulateDirectionalDispatches,e)}function accumulateTwoPhaseDispatchesSingleSkipTarget(e){e&&e.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(e.dispatchMarker,accumulateDirectionalDispatches,e)}function accumulateDispatches(e,a,t){if(t&&t.dispatchConfig.registrationName){var c=t.dispatchConfig.registrationName,s=getListener(e,c);s&&(t._dispatchListeners=accumulateInto(t._dispatchListeners,s),t._dispatchIDs=accumulateInto(t._dispatchIDs,e))}}function accumulateDirectDispatchesSingle(e){e&&e.dispatchConfig.registrationName&&accumulateDispatches(e.dispatchMarker,null,e)}function accumulateTwoPhaseDispatches(e){forEachAccumulated(e,accumulateTwoPhaseDispatchesSingle)}function accumulateTwoPhaseDispatchesSkipTarget(e){forEachAccumulated(e,accumulateTwoPhaseDispatchesSingleSkipTarget)}function accumulateEnterLeaveDispatches(e,a,t,c){EventPluginHub.injection.getInstanceHandle().traverseEnterLeave(t,c,accumulateDispatches,e,a)}function accumulateDirectDispatches(e){forEachAccumulated(e,accumulateDirectDispatchesSingle)}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),warning=require("fbjs/lib/warning"),accumulateInto=require("./accumulateInto"),forEachAccumulated=require("./forEachAccumulated"),PropagationPhases=EventConstants.PropagationPhases,getListener=EventPluginHub.getListener,EventPropagators={accumulateTwoPhaseDispatches:accumulateTwoPhaseDispatches,accumulateTwoPhaseDispatchesSkipTarget:accumulateTwoPhaseDispatchesSkipTarget,accumulateDirectDispatches:accumulateDirectDispatches,accumulateEnterLeaveDispatches:accumulateEnterLeaveDispatches};module.exports=EventPropagators;

},{"./EventConstants":38,"./EventPluginHub":39,"./accumulateInto":124,"./forEachAccumulated":132,"fbjs/lib/warning":175}],43:[function(require,module,exports){
"use strict";function FallbackCompositionState(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),getTextContentAccessor=require("./getTextContentAccessor");assign(FallbackCompositionState.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[getTextContentAccessor()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,o=this._startText,s=o.length,a=this.getText(),l=a.length;for(t=0;t<s&&o[t]===a[t];t++);var i=s-t;for(e=1;e<=i&&o[s-e]===a[l-e];e++);var r=e>1?1-e:void 0;return this._fallbackText=a.slice(t,r),this._fallbackText}}),PooledClass.addPoolingTo(FallbackCompositionState),module.exports=FallbackCompositionState;

},{"./Object.assign":46,"./PooledClass":47,"./getTextContentAccessor":139}],44:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,MUST_USE_PROPERTY=DOMProperty.injection.MUST_USE_PROPERTY,HAS_BOOLEAN_VALUE=DOMProperty.injection.HAS_BOOLEAN_VALUE,HAS_SIDE_EFFECTS=DOMProperty.injection.HAS_SIDE_EFFECTS,HAS_NUMERIC_VALUE=DOMProperty.injection.HAS_NUMERIC_VALUE,HAS_POSITIVE_NUMERIC_VALUE=DOMProperty.injection.HAS_POSITIVE_NUMERIC_VALUE,HAS_OVERLOADED_BOOLEAN_VALUE=DOMProperty.injection.HAS_OVERLOADED_BOOLEAN_VALUE,hasSVG;if(ExecutionEnvironment.canUseDOM){var implementation=document.implementation;hasSVG=implementation&&implementation.hasFeature&&implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var HTMLDOMPropertyConfig={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,allowTransparency:MUST_USE_ATTRIBUTE,alt:null,async:HAS_BOOLEAN_VALUE,autoComplete:null,autoPlay:HAS_BOOLEAN_VALUE,capture:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,cellPadding:null,cellSpacing:null,charSet:MUST_USE_ATTRIBUTE,challenge:MUST_USE_ATTRIBUTE,checked:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,classID:MUST_USE_ATTRIBUTE,className:hasSVG?MUST_USE_ATTRIBUTE:MUST_USE_PROPERTY,cols:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,colSpan:null,content:null,contentEditable:null,contextMenu:MUST_USE_ATTRIBUTE,controls:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,coords:null,crossOrigin:null,data:null,dateTime:MUST_USE_ATTRIBUTE,default:HAS_BOOLEAN_VALUE,defer:HAS_BOOLEAN_VALUE,dir:null,disabled:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,download:HAS_OVERLOADED_BOOLEAN_VALUE,draggable:null,encType:null,form:MUST_USE_ATTRIBUTE,formAction:MUST_USE_ATTRIBUTE,formEncType:MUST_USE_ATTRIBUTE,formMethod:MUST_USE_ATTRIBUTE,formNoValidate:HAS_BOOLEAN_VALUE,formTarget:MUST_USE_ATTRIBUTE,frameBorder:MUST_USE_ATTRIBUTE,headers:null,height:MUST_USE_ATTRIBUTE,hidden:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:MUST_USE_PROPERTY,inputMode:MUST_USE_ATTRIBUTE,integrity:null,is:MUST_USE_ATTRIBUTE,keyParams:MUST_USE_ATTRIBUTE,keyType:MUST_USE_ATTRIBUTE,kind:null,label:null,lang:null,list:MUST_USE_ATTRIBUTE,loop:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,low:null,manifest:MUST_USE_ATTRIBUTE,marginHeight:null,marginWidth:null,max:null,maxLength:MUST_USE_ATTRIBUTE,media:MUST_USE_ATTRIBUTE,mediaGroup:null,method:null,min:null,minLength:MUST_USE_ATTRIBUTE,multiple:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,muted:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,name:null,nonce:MUST_USE_ATTRIBUTE,noValidate:HAS_BOOLEAN_VALUE,open:HAS_BOOLEAN_VALUE,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,rel:null,required:HAS_BOOLEAN_VALUE,reversed:HAS_BOOLEAN_VALUE,role:MUST_USE_ATTRIBUTE,rows:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,rowSpan:null,sandbox:null,scope:null,scoped:HAS_BOOLEAN_VALUE,scrolling:null,seamless:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,selected:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,shape:null,size:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,sizes:MUST_USE_ATTRIBUTE,span:HAS_POSITIVE_NUMERIC_VALUE,spellCheck:null,src:null,srcDoc:MUST_USE_PROPERTY,srcLang:null,srcSet:MUST_USE_ATTRIBUTE,start:HAS_NUMERIC_VALUE,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:MUST_USE_PROPERTY|HAS_SIDE_EFFECTS,width:MUST_USE_ATTRIBUTE,wmode:MUST_USE_ATTRIBUTE,wrap:null,about:MUST_USE_ATTRIBUTE,datatype:MUST_USE_ATTRIBUTE,inlist:MUST_USE_ATTRIBUTE,prefix:MUST_USE_ATTRIBUTE,property:MUST_USE_ATTRIBUTE,resource:MUST_USE_ATTRIBUTE,typeof:MUST_USE_ATTRIBUTE,vocab:MUST_USE_ATTRIBUTE,autoCapitalize:MUST_USE_ATTRIBUTE,autoCorrect:MUST_USE_ATTRIBUTE,autoSave:null,color:null,itemProp:MUST_USE_ATTRIBUTE,itemScope:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,itemType:MUST_USE_ATTRIBUTE,itemID:MUST_USE_ATTRIBUTE,itemRef:MUST_USE_ATTRIBUTE,results:null,security:MUST_USE_ATTRIBUTE,unselectable:MUST_USE_ATTRIBUTE},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoComplete:"autocomplete",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};module.exports=HTMLDOMPropertyConfig;

},{"./DOMProperty":33,"fbjs/lib/ExecutionEnvironment":152}],45:[function(require,module,exports){
"use strict";function _assertSingleLink(e){null!=e.checkedLink&&null!=e.valueLink&&invariant(!1)}function _assertValueLink(e){_assertSingleLink(e),(null!=e.value||null!=e.onChange)&&invariant(!1)}function _assertCheckedLink(e){_assertSingleLink(e),(null!=e.checked||null!=e.onChange)&&invariant(!1)}function getDeclarationErrorAddendum(e){if(e){var n=e.getName();if(n)return" Check the render method of `"+n+"`."}return""}var ReactPropTypes=require("./ReactPropTypes"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),hasReadOnlyValue={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},propTypes={value:function(e,n,a){return!e[n]||hasReadOnlyValue[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,n,a){return!e[n]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:ReactPropTypes.func},loggedTypeFailures={},LinkedValueUtils={checkPropTypes:function(e,n,a){for(var r in propTypes){if(propTypes.hasOwnProperty(r))var i=propTypes[r](n,r,e,ReactPropTypeLocations.prop,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(i instanceof Error&&!(i.message in loggedTypeFailures)){loggedTypeFailures[i.message]=!0;getDeclarationErrorAddendum(a)}}},getValue:function(e){return e.valueLink?(_assertValueLink(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(_assertCheckedLink(e),e.checkedLink.value):e.checked},executeOnChange:function(e,n){return e.valueLink?(_assertValueLink(e),e.valueLink.requestChange(n.target.value)):e.checkedLink?(_assertCheckedLink(e),e.checkedLink.requestChange(n.target.checked)):e.onChange?e.onChange.call(void 0,n):void 0}};module.exports=LinkedValueUtils;

},{"./ReactPropTypeLocations":95,"./ReactPropTypes":96,"fbjs/lib/invariant":166,"fbjs/lib/warning":175}],46:[function(require,module,exports){
"use strict";function assign(r,e){if(null==r)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(r),t=Object.prototype.hasOwnProperty,o=1;o<arguments.length;o++){var a=arguments[o];if(null!=a){var l=Object(a);for(var s in l)t.call(l,s)&&(n[s]=l[s])}}return n}module.exports=assign;

},{}],47:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),oneArgumentPooler=function(o){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,o),n}return new e(o)},twoArgumentPooler=function(o,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,o,e),r}return new n(o,e)},threeArgumentPooler=function(o,e,n){var r=this;if(r.instancePool.length){var t=r.instancePool.pop();return r.call(t,o,e,n),t}return new r(o,e,n)},fourArgumentPooler=function(o,e,n,r){var t=this;if(t.instancePool.length){var l=t.instancePool.pop();return t.call(l,o,e,n,r),l}return new t(o,e,n,r)},fiveArgumentPooler=function(o,e,n,r,t){var l=this;if(l.instancePool.length){var a=l.instancePool.pop();return l.call(a,o,e,n,r,t),a}return new l(o,e,n,r,t)},standardReleaser=function(o){var e=this;o instanceof e||invariant(!1),o.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(o)},DEFAULT_POOL_SIZE=10,DEFAULT_POOLER=oneArgumentPooler,addPoolingTo=function(o,e){var n=o;return n.instancePool=[],n.getPooled=e||DEFAULT_POOLER,n.poolSize||(n.poolSize=DEFAULT_POOL_SIZE),n.release=standardReleaser,n},PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fourArgumentPooler:fourArgumentPooler,fiveArgumentPooler:fiveArgumentPooler};module.exports=PooledClass;

},{"fbjs/lib/invariant":166}],48:[function(require,module,exports){
"use strict";var ReactDOM=require("./ReactDOM"),ReactDOMServer=require("./ReactDOMServer"),ReactIsomorphic=require("./ReactIsomorphic"),assign=require("./Object.assign"),deprecated=require("./deprecated"),React={};assign(React,ReactIsomorphic),assign(React,{findDOMNode:deprecated("findDOMNode","ReactDOM","react-dom",ReactDOM,ReactDOM.findDOMNode),render:deprecated("render","ReactDOM","react-dom",ReactDOM,ReactDOM.render),unmountComponentAtNode:deprecated("unmountComponentAtNode","ReactDOM","react-dom",ReactDOM,ReactDOM.unmountComponentAtNode),renderToString:deprecated("renderToString","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToString),renderToStaticMarkup:deprecated("renderToStaticMarkup","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToStaticMarkup)}),React.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOM,React.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOMServer,module.exports=React;

},{"./Object.assign":46,"./ReactDOM":59,"./ReactDOMServer":69,"./ReactIsomorphic":85,"./deprecated":128}],49:[function(require,module,exports){
"use strict";var ReactInstanceMap=require("./ReactInstanceMap"),findDOMNode=require("./findDOMNode"),warning=require("fbjs/lib/warning"),didWarnKey="_getDOMNodeDidWarn",ReactBrowserComponentMixin={getDOMNode:function(){return this.constructor[didWarnKey]=!0,findDOMNode(this)}};module.exports=ReactBrowserComponentMixin;

},{"./ReactInstanceMap":84,"./findDOMNode":130,"fbjs/lib/warning":175}],50:[function(require,module,exports){
"use strict";function getListeningForDocument(e){return Object.prototype.hasOwnProperty.call(e,topListenersIDKey)||(e[topListenersIDKey]=reactTopListenersCounter++,alreadyListeningTo[e[topListenersIDKey]]={}),alreadyListeningTo[e[topListenersIDKey]]}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),EventPluginRegistry=require("./EventPluginRegistry"),ReactEventEmitterMixin=require("./ReactEventEmitterMixin"),ReactPerf=require("./ReactPerf"),ViewportMetrics=require("./ViewportMetrics"),assign=require("./Object.assign"),isEventSupported=require("./isEventSupported"),alreadyListeningTo={},isMonitoringScrollValue=!1,reactTopListenersCounter=0,topEventMapping={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},topListenersIDKey="_reactListenersID"+String(Math.random()).slice(2),ReactBrowserEventEmitter=assign({},ReactEventEmitterMixin,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(ReactBrowserEventEmitter.handleTopLevel),ReactBrowserEventEmitter.ReactEventListener=e}},setEnabled:function(e){ReactBrowserEventEmitter.ReactEventListener&&ReactBrowserEventEmitter.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!ReactBrowserEventEmitter.ReactEventListener||!ReactBrowserEventEmitter.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var r=t,n=getListeningForDocument(r),o=EventPluginRegistry.registrationNameDependencies[e],i=EventConstants.topLevelTypes,a=0;a<o.length;a++){var s=o[a];n.hasOwnProperty(s)&&n[s]||(s===i.topWheel?isEventSupported("wheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"wheel",r):isEventSupported("mousewheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"mousewheel",r):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"DOMMouseScroll",r):s===i.topScroll?isEventSupported("scroll",!0)?ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topScroll,"scroll",r):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topScroll,"scroll",ReactBrowserEventEmitter.ReactEventListener.WINDOW_HANDLE):s===i.topFocus||s===i.topBlur?(isEventSupported("focus",!0)?(ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topFocus,"focus",r),ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topBlur,"blur",r)):isEventSupported("focusin")&&(ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topFocus,"focusin",r),ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topBlur,"focusout",r)),n[i.topBlur]=!0,n[i.topFocus]=!0):topEventMapping.hasOwnProperty(s)&&ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(s,topEventMapping[s],r),n[s]=!0)}},trapBubbledEvent:function(e,t,r){return ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(e,t,r)},trapCapturedEvent:function(e,t,r){return ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(e,t,r)},ensureScrollValueMonitoring:function(){if(!isMonitoringScrollValue){var e=ViewportMetrics.refreshScrollValues;ReactBrowserEventEmitter.ReactEventListener.monitorScrollValue(e),isMonitoringScrollValue=!0}},eventNameDispatchConfigs:EventPluginHub.eventNameDispatchConfigs,registrationNameModules:EventPluginHub.registrationNameModules,putListener:EventPluginHub.putListener,getListener:EventPluginHub.getListener,deleteListener:EventPluginHub.deleteListener,deleteAllListeners:EventPluginHub.deleteAllListeners});ReactPerf.measureMethods(ReactBrowserEventEmitter,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),module.exports=ReactBrowserEventEmitter;

},{"./EventConstants":38,"./EventPluginHub":39,"./EventPluginRegistry":40,"./Object.assign":46,"./ReactEventEmitterMixin":79,"./ReactPerf":93,"./ViewportMetrics":123,"./isEventSupported":141}],51:[function(require,module,exports){
"use strict";function instantiateChild(e,n,t){var r=void 0===e[t];null!=n&&r&&(e[t]=instantiateReactComponent(n,null))}var ReactReconciler=require("./ReactReconciler"),instantiateReactComponent=require("./instantiateReactComponent"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),traverseAllChildren=require("./traverseAllChildren"),warning=require("fbjs/lib/warning"),ReactChildReconciler={instantiateChildren:function(e,n,t){if(null==e)return null;var r={};return traverseAllChildren(e,instantiateChild,r),r},updateChildren:function(e,n,t,r){if(!n&&!e)return null;var i;for(i in n)if(n.hasOwnProperty(i)){var o=e&&e[i],a=o&&o._currentElement,l=n[i];if(null!=o&&shouldUpdateReactComponent(a,l))ReactReconciler.receiveComponent(o,l,t,r),n[i]=o;else{o&&ReactReconciler.unmountComponent(o,i);var c=instantiateReactComponent(l,null);n[i]=c}}for(i in e)!e.hasOwnProperty(i)||n&&n.hasOwnProperty(i)||ReactReconciler.unmountComponent(e[i]);return n},unmountChildren:function(e){for(var n in e)if(e.hasOwnProperty(n)){var t=e[n];ReactReconciler.unmountComponent(t)}}};module.exports=ReactChildReconciler;

},{"./ReactReconciler":98,"./instantiateReactComponent":140,"./shouldUpdateReactComponent":148,"./traverseAllChildren":149,"fbjs/lib/warning":175}],52:[function(require,module,exports){
"use strict";function escapeUserProvidedKey(e){return(""+e).replace(userProvidedKeyEscapeRegex,"//")}function ForEachBookKeeping(e,n){this.func=e,this.context=n,this.count=0}function forEachSingleChild(e,n,t){var r=e.func,o=e.context;r.call(o,n,e.count++)}function forEachChildren(e,n,t){if(null==e)return e;var r=ForEachBookKeeping.getPooled(n,t);traverseAllChildren(e,forEachSingleChild,r),ForEachBookKeeping.release(r)}function MapBookKeeping(e,n,t,r){this.result=e,this.keyPrefix=n,this.func=t,this.context=r,this.count=0}function mapSingleChildIntoContext(e,n,t){var r=e.result,o=e.keyPrefix,l=e.func,i=e.context,u=l.call(i,n,e.count++);Array.isArray(u)?mapIntoWithKeyPrefixInternal(u,r,t,emptyFunction.thatReturnsArgument):null!=u&&(ReactElement.isValidElement(u)&&(u=ReactElement.cloneAndReplaceKey(u,o+(u!==n?escapeUserProvidedKey(u.key||"")+"/":"")+t)),r.push(u))}function mapIntoWithKeyPrefixInternal(e,n,t,r,o){var l="";null!=t&&(l=escapeUserProvidedKey(t)+"/");var i=MapBookKeeping.getPooled(n,l,r,o);traverseAllChildren(e,mapSingleChildIntoContext,i),MapBookKeeping.release(i)}function mapChildren(e,n,t){if(null==e)return e;var r=[];return mapIntoWithKeyPrefixInternal(e,r,null,n,t),r}function forEachSingleChildDummy(e,n,t){return null}function countChildren(e,n){return traverseAllChildren(e,forEachSingleChildDummy,null)}function toArray(e){var n=[];return mapIntoWithKeyPrefixInternal(e,n,null,emptyFunction.thatReturnsArgument),n}var PooledClass=require("./PooledClass"),ReactElement=require("./ReactElement"),emptyFunction=require("fbjs/lib/emptyFunction"),traverseAllChildren=require("./traverseAllChildren"),twoArgumentPooler=PooledClass.twoArgumentPooler,fourArgumentPooler=PooledClass.fourArgumentPooler,userProvidedKeyEscapeRegex=/\/(?!\/)/g;ForEachBookKeeping.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler),MapBookKeeping.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(MapBookKeeping,fourArgumentPooler);var ReactChildren={forEach:forEachChildren,map:mapChildren,mapIntoWithKeyPrefixInternal:mapIntoWithKeyPrefixInternal,count:countChildren,toArray:toArray};module.exports=ReactChildren;

},{"./PooledClass":47,"./ReactElement":74,"./traverseAllChildren":149,"fbjs/lib/emptyFunction":158}],53:[function(require,module,exports){
"use strict";function warnSetProps(){warnedSetProps||(warnedSetProps=!0)}function validateTypeDef(e,t,n){for(var i in t)t.hasOwnProperty(i)}function validateMethodOverride(e,t){var n=ReactClassInterface.hasOwnProperty(t)?ReactClassInterface[t]:null;ReactClassMixin.hasOwnProperty(t)&&n!==SpecPolicy.OVERRIDE_BASE&&invariant(!1),e.hasOwnProperty(t)&&n!==SpecPolicy.DEFINE_MANY&&n!==SpecPolicy.DEFINE_MANY_MERGED&&invariant(!1)}function mixSpecIntoComponent(e,t){if(t){"function"==typeof t&&invariant(!1),ReactElement.isValidElement(t)&&invariant(!1);var n=e.prototype;t.hasOwnProperty(MIXINS_KEY)&&RESERVED_SPEC_KEYS.mixins(e,t.mixins);for(var i in t)if(t.hasOwnProperty(i)&&i!==MIXINS_KEY){var o=t[i];if(validateMethodOverride(n,i),RESERVED_SPEC_KEYS.hasOwnProperty(i))RESERVED_SPEC_KEYS[i](e,o);else{var a=ReactClassInterface.hasOwnProperty(i),r=n.hasOwnProperty(i),c="function"==typeof o,p=c&&!a&&!r&&!1!==t.autobind;if(p)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[i]=o,n[i]=o;else if(r){var s=ReactClassInterface[i];(!a||s!==SpecPolicy.DEFINE_MANY_MERGED&&s!==SpecPolicy.DEFINE_MANY)&&invariant(!1),s===SpecPolicy.DEFINE_MANY_MERGED?n[i]=createMergedResultFunction(n[i],o):s===SpecPolicy.DEFINE_MANY&&(n[i]=createChainedFunction(n[i],o))}else n[i]=o}}}}function mixStaticSpecIntoComponent(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var o=n in RESERVED_SPEC_KEYS;o&&invariant(!1);var a=n in e;a&&invariant(!1),e[n]=i}}}function mergeIntoWithNoDuplicateKeys(e,t){e&&t&&"object"==typeof e&&"object"==typeof t||invariant(!1);for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]&&invariant(!1),e[n]=t[n]);return e}function createMergedResultFunction(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);if(null==n)return i;if(null==i)return n;var o={};return mergeIntoWithNoDuplicateKeys(o,n),mergeIntoWithNoDuplicateKeys(o,i),o}}function createChainedFunction(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function bindAutoBindMethod(e,t){var n=t.bind(e);return n}function bindAutoBindMethods(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=bindAutoBindMethod(e,n)}}var ReactComponent=require("./ReactComponent"),ReactElement=require("./ReactElement"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),keyMirror=require("fbjs/lib/keyMirror"),keyOf=require("fbjs/lib/keyOf"),warning=require("fbjs/lib/warning"),MIXINS_KEY=keyOf({mixins:null}),SpecPolicy=keyMirror({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),injectedMixins=[],warnedSetProps=!1,ReactClassInterface={mixins:SpecPolicy.DEFINE_MANY,statics:SpecPolicy.DEFINE_MANY,propTypes:SpecPolicy.DEFINE_MANY,contextTypes:SpecPolicy.DEFINE_MANY,childContextTypes:SpecPolicy.DEFINE_MANY,getDefaultProps:SpecPolicy.DEFINE_MANY_MERGED,getInitialState:SpecPolicy.DEFINE_MANY_MERGED,getChildContext:SpecPolicy.DEFINE_MANY_MERGED,render:SpecPolicy.DEFINE_ONCE,componentWillMount:SpecPolicy.DEFINE_MANY,componentDidMount:SpecPolicy.DEFINE_MANY,componentWillReceiveProps:SpecPolicy.DEFINE_MANY,shouldComponentUpdate:SpecPolicy.DEFINE_ONCE,componentWillUpdate:SpecPolicy.DEFINE_MANY,componentDidUpdate:SpecPolicy.DEFINE_MANY,componentWillUnmount:SpecPolicy.DEFINE_MANY,updateComponent:SpecPolicy.OVERRIDE_BASE},RESERVED_SPEC_KEYS={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)mixSpecIntoComponent(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=assign({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=assign({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=createMergedResultFunction(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=assign({},e.propTypes,t)},statics:function(e,t){mixStaticSpecIntoComponent(e,t)},autobind:function(){}},ReactClassMixin={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(e,t){this.updater.enqueueSetProps(this,e),t&&this.updater.enqueueCallback(this,t)},replaceProps:function(e,t){this.updater.enqueueReplaceProps(this,e),t&&this.updater.enqueueCallback(this,t)}},ReactClassComponent=function(){};assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin);var ReactClass={createClass:function(e){var t=function(e,t,n){this.__reactAutoBindMap&&bindAutoBindMethods(this),this.props=e,this.context=t,this.refs=emptyObject,this.updater=n||ReactNoopUpdateQueue,this.state=null;var i=this.getInitialState?this.getInitialState():null;("object"!=typeof i||Array.isArray(i))&&invariant(!1),this.state=i};t.prototype=new ReactClassComponent,t.prototype.constructor=t,injectedMixins.forEach(mixSpecIntoComponent.bind(null,t)),mixSpecIntoComponent(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render||invariant(!1);for(var n in ReactClassInterface)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){injectedMixins.push(e)}}};module.exports=ReactClass;

},{"./Object.assign":46,"./ReactComponent":54,"./ReactElement":74,"./ReactNoopUpdateQueue":91,"./ReactPropTypeLocationNames":94,"./ReactPropTypeLocations":95,"fbjs/lib/emptyObject":159,"fbjs/lib/invariant":166,"fbjs/lib/keyMirror":169,"fbjs/lib/keyOf":170,"fbjs/lib/warning":175}],54:[function(require,module,exports){
"use strict";function ReactComponent(e,t,n){this.props=e,this.context=t,this.refs=emptyObject,this.updater=n||ReactNoopUpdateQueue}var ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue"),canDefineProperty=require("./canDefineProperty"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning");ReactComponent.prototype.isReactComponent={},ReactComponent.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&invariant(!1),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t)},ReactComponent.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e)};var deprecatedAPIs,defineDeprecationWarning,fnName;module.exports=ReactComponent;

},{"./ReactNoopUpdateQueue":91,"./canDefineProperty":126,"fbjs/lib/emptyObject":159,"fbjs/lib/invariant":166,"fbjs/lib/warning":175}],55:[function(require,module,exports){
"use strict";var ReactDOMIDOperations=require("./ReactDOMIDOperations"),ReactMount=require("./ReactMount"),ReactComponentBrowserEnvironment={processChildrenUpdates:ReactDOMIDOperations.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:ReactDOMIDOperations.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){ReactMount.purgeID(e)}};module.exports=ReactComponentBrowserEnvironment;

},{"./ReactDOMIDOperations":64,"./ReactMount":87}],56:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),injected=!1,ReactComponentEnvironment={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(n){injected&&invariant(!1),ReactComponentEnvironment.unmountIDFromEnvironment=n.unmountIDFromEnvironment,ReactComponentEnvironment.replaceNodeWithMarkupByID=n.replaceNodeWithMarkupByID,ReactComponentEnvironment.processChildrenUpdates=n.processChildrenUpdates,injected=!0}}};module.exports=ReactComponentEnvironment;

},{"fbjs/lib/invariant":166}],57:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}function StatelessComponent(e){}var ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceMap=require("./ReactInstanceMap"),ReactPerf=require("./ReactPerf"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactReconciler=require("./ReactReconciler"),ReactUpdateQueue=require("./ReactUpdateQueue"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),warning=require("fbjs/lib/warning");StatelessComponent.prototype.render=function(){return(0,ReactInstanceMap.get(this)._currentElement.type)(this.props,this.context,this.updater)};var nextMountID=1,ReactCompositeComponentMixin={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=nextMountID++,this._rootNodeID=e;var o,i,r=this._processProps(this._currentElement.props),a=this._processContext(n),s=this._currentElement.type,c="prototype"in s;c&&(o=new s(r,a,ReactUpdateQueue)),c&&null!==o&&!1!==o&&!ReactElement.isValidElement(o)||(i=o,o=new StatelessComponent(s)),o.props=r,o.context=a,o.refs=emptyObject,o.updater=ReactUpdateQueue,this._instance=o,ReactInstanceMap.set(o,this);var p=o.state;void 0===p&&(o.state=p=null),("object"!=typeof p||Array.isArray(p))&&invariant(!1),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===i&&(i=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(i);var u=ReactReconciler.mountComponent(this._renderedComponent,e,t,this._processChildContext(n));return o.componentDidMount&&t.getReactMountReady().enqueue(o.componentDidMount,o),u},unmountComponent:function(){var e=this._instance;e.componentWillUnmount&&e.componentWillUnmount(),ReactReconciler.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,ReactInstanceMap.remove(e)},_maskContext:function(e){var t=null,n=this._currentElement.type,o=n.contextTypes;if(!o)return emptyObject;t={};for(var i in o)t[i]=e[i];return t},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t=this._currentElement.type,n=this._instance,o=n.getChildContext&&n.getChildContext();if(o){"object"!=typeof t.childContextTypes&&invariant(!1);for(var i in o)i in t.childContextTypes||invariant(!1);return assign({},e,o)}return e},_processProps:function(e){return e},_checkPropTypes:function(e,t,n){var o=this.getName();for(var i in e)if(e.hasOwnProperty(i)){var r;try{"function"!=typeof e[i]&&invariant(!1),r=e[i](t,i,o,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){r=e}if(r instanceof Error){getDeclarationErrorAddendum(this);ReactPropTypeLocations.prop}}},receiveComponent:function(e,t,n){var o=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,o,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&ReactReconciler.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(e,t,n,o,i){var r,a=this._instance,s=this._context===i?a.context:this._processContext(i);t===n?r=n.props:(r=this._processProps(n.props),a.componentWillReceiveProps&&a.componentWillReceiveProps(r,s));var c=this._processPendingState(r,s),p=this._pendingForceUpdate||!a.shouldComponentUpdate||a.shouldComponentUpdate(r,c,s);p?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,r,c,s,e,i)):(this._currentElement=n,this._context=i,a.props=r,a.state=c,a.context=s)},_processPendingState:function(e,t){var n=this._instance,o=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!o)return n.state;if(i&&1===o.length)return o[0];for(var r=assign({},i?o[0]:n.state),a=i?1:0;a<o.length;a++){var s=o[a];assign(r,"function"==typeof s?s.call(n,r,e,t):s)}return r},_performComponentUpdate:function(e,t,n,o,i,r){var a,s,c,p=this._instance,u=Boolean(p.componentDidUpdate);u&&(a=p.props,s=p.state,c=p.context),p.componentWillUpdate&&p.componentWillUpdate(t,n,o),this._currentElement=e,this._context=r,p.props=t,p.state=n,p.context=o,this._updateRenderedComponent(i,r),u&&i.getReactMountReady().enqueue(p.componentDidUpdate.bind(p,a,s,c),p)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,o=n._currentElement,i=this._renderValidatedComponent();if(shouldUpdateReactComponent(o,i))ReactReconciler.receiveComponent(n,i,e,this._processChildContext(t));else{var r=this._rootNodeID,a=n._rootNodeID;ReactReconciler.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(i);var s=ReactReconciler.mountComponent(this._renderedComponent,r,e,this._processChildContext(t));this._replaceNodeWithMarkupByID(a,s)}},_replaceNodeWithMarkupByID:function(e,t){ReactComponentEnvironment.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(){var e;ReactCurrentOwner.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{ReactCurrentOwner.current=null}return null===e||!1===e||ReactElement.isValidElement(e)||invariant(!1),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n&&invariant(!1);var o=t.getPublicInstance();(n.refs===emptyObject?n.refs={}:n.refs)[e]=o},detachRef:function(e){delete this.getPublicInstance().refs[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return e instanceof StatelessComponent?null:e},_instantiateReactComponent:null};ReactPerf.measureMethods(ReactCompositeComponentMixin,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var ReactCompositeComponent={Mixin:ReactCompositeComponentMixin};module.exports=ReactCompositeComponent;

},{"./Object.assign":46,"./ReactComponentEnvironment":56,"./ReactCurrentOwner":58,"./ReactElement":74,"./ReactInstanceMap":84,"./ReactPerf":93,"./ReactPropTypeLocationNames":94,"./ReactPropTypeLocations":95,"./ReactReconciler":98,"./ReactUpdateQueue":104,"./shouldUpdateReactComponent":148,"fbjs/lib/emptyObject":159,"fbjs/lib/invariant":166,"fbjs/lib/warning":175}],58:[function(require,module,exports){
"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner;

},{}],59:[function(require,module,exports){
"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactDOMTextComponent=require("./ReactDOMTextComponent"),ReactDefaultInjection=require("./ReactDefaultInjection"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),ReactUpdates=require("./ReactUpdates"),ReactVersion=require("./ReactVersion"),findDOMNode=require("./findDOMNode"),renderSubtreeIntoContainer=require("./renderSubtreeIntoContainer"),warning=require("fbjs/lib/warning");ReactDefaultInjection.inject();var render=ReactPerf.measure("React","render",ReactMount.render),React={findDOMNode:findDOMNode,render:render,unmountComponentAtNode:ReactMount.unmountComponentAtNode,version:ReactVersion,unstable_batchedUpdates:ReactUpdates.batchedUpdates,unstable_renderSubtreeIntoContainer:renderSubtreeIntoContainer};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:ReactCurrentOwner,InstanceHandles:ReactInstanceHandles,Mount:ReactMount,Reconciler:ReactReconciler,TextComponent:ReactDOMTextComponent});var ExecutionEnvironment,ieCompatibilityMode,expectedFeatures,i;module.exports=React;

},{"./ReactCurrentOwner":58,"./ReactDOMTextComponent":70,"./ReactDefaultInjection":73,"./ReactInstanceHandles":83,"./ReactMount":87,"./ReactPerf":93,"./ReactReconciler":98,"./ReactUpdates":105,"./ReactVersion":106,"./findDOMNode":130,"./renderSubtreeIntoContainer":145,"fbjs/lib/warning":175}],60:[function(require,module,exports){
"use strict";var mouseListenerNames={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},ReactDOMButton={getNativeProps:function(e,o,n){if(!o.disabled)return o;var t={};for(var u in o)o.hasOwnProperty(u)&&!mouseListenerNames[u]&&(t[u]=o[u]);return t}};module.exports=ReactDOMButton;

},{}],61:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){if(e){var t=e._currentElement._owner||null;if(t){var r=t.getName();if(r)return" This DOM node was rendered by `"+r+"`."}}return""}function legacyGetDOMNode(){return this}function legacyIsMounted(){var e=this._reactInternalComponent;return!!e}function legacySetStateEtc(){}function legacySetProps(e,t){var r=this._reactInternalComponent;r&&(ReactUpdateQueue.enqueueSetPropsInternal(r,e),t&&ReactUpdateQueue.enqueueCallbackInternal(r,t))}function legacyReplaceProps(e,t){var r=this._reactInternalComponent;r&&(ReactUpdateQueue.enqueueReplacePropsInternal(r,e),t&&ReactUpdateQueue.enqueueCallbackInternal(r,t))}function friendlyStringify(e){if("object"==typeof e){if(Array.isArray(e))return"["+e.map(friendlyStringify).join(", ")+"]";var t=[];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=/^[a-z$_][\w$_]*$/i.test(r)?r:JSON.stringify(r);t.push(n+": "+friendlyStringify(e[r]))}return"{"+t.join(", ")+"}"}return"string"==typeof e?JSON.stringify(e):"function"==typeof e?"[function object]":String(e)}function checkAndWarnForMutatedStyle(e,t,r){if(null!=e&&null!=t&&!shallowEqual(e,t)){var n,a=r._tag,o=r._currentElement._owner;o&&(n=o.getName());var i=n+"|"+a;styleMutationWarning.hasOwnProperty(i)||(styleMutationWarning[i]=!0)}}function assertValidProps(e,t){t&&(null!=t.dangerouslySetInnerHTML&&(null!=t.children&&invariant(!1),"object"==typeof t.dangerouslySetInnerHTML&&HTML in t.dangerouslySetInnerHTML||invariant(!1)),null!=t.style&&"object"!=typeof t.style&&invariant(!1))}function enqueuePutListener(e,t,r,n){var a=ReactMount.findReactContainerForID(e);if(a){var o=a.nodeType===ELEMENT_NODE_TYPE?a.ownerDocument:a;listenTo(t,o)}n.getReactMountReady().enqueue(putListener,{id:e,registrationName:t,listener:r})}function putListener(){var e=this;ReactBrowserEventEmitter.putListener(e.id,e.registrationName,e.listener)}function trapBubbledEventsLocal(){var e=this;e._rootNodeID||invariant(!1);var t=ReactMount.getNode(e._rootNodeID);switch(t||invariant(!1),e._tag){case"iframe":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var r in mediaEvents)mediaEvents.hasOwnProperty(r)&&e._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes[r],mediaEvents[r],t));break;case"img":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topError,"error",t),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topReset,"reset",t),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topSubmit,"submit",t)]}}function mountReadyInputWrapper(){ReactDOMInput.mountReadyWrapper(this)}function postUpdateSelectWrapper(){ReactDOMSelect.postUpdateWrapper(this)}function validateDangerousTag(e){hasOwnProperty.call(validatedTagCache,e)||(VALID_TAG_REGEX.test(e)||invariant(!1),validatedTagCache[e]=!0)}function processChildContextDev(e,t){e=assign({},e);var r=e[validateDOMNesting.ancestorInfoContextKey];return e[validateDOMNesting.ancestorInfoContextKey]=validateDOMNesting.updatedAncestorInfo(r,t._tag,t),e}function isCustomComponent(e,t){return e.indexOf("-")>=0||null!=t.is}function ReactDOMComponent(e){validateDangerousTag(e),this._tag=e.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null}var AutoFocusUtils=require("./AutoFocusUtils"),CSSPropertyOperations=require("./CSSPropertyOperations"),DOMProperty=require("./DOMProperty"),DOMPropertyOperations=require("./DOMPropertyOperations"),EventConstants=require("./EventConstants"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactDOMButton=require("./ReactDOMButton"),ReactDOMInput=require("./ReactDOMInput"),ReactDOMOption=require("./ReactDOMOption"),ReactDOMSelect=require("./ReactDOMSelect"),ReactDOMTextarea=require("./ReactDOMTextarea"),ReactMount=require("./ReactMount"),ReactMultiChild=require("./ReactMultiChild"),ReactPerf=require("./ReactPerf"),ReactUpdateQueue=require("./ReactUpdateQueue"),assign=require("./Object.assign"),canDefineProperty=require("./canDefineProperty"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),invariant=require("fbjs/lib/invariant"),isEventSupported=require("./isEventSupported"),keyOf=require("fbjs/lib/keyOf"),setInnerHTML=require("./setInnerHTML"),setTextContent=require("./setTextContent"),shallowEqual=require("fbjs/lib/shallowEqual"),validateDOMNesting=require("./validateDOMNesting"),warning=require("fbjs/lib/warning"),deleteListener=ReactBrowserEventEmitter.deleteListener,listenTo=ReactBrowserEventEmitter.listenTo,registrationNameModules=ReactBrowserEventEmitter.registrationNameModules,CONTENT_TYPES={string:!0,number:!0},CHILDREN=keyOf({children:null}),STYLE=keyOf({style:null}),HTML=keyOf({__html:null}),ELEMENT_NODE_TYPE=1,legacyPropsDescriptor,styleMutationWarning={},mediaEvents={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},omittedCloseTags={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},newlineEatingTags={listing:!0,pre:!0,textarea:!0},voidElementTags=assign({menuitem:!0},omittedCloseTags),VALID_TAG_REGEX=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,validatedTagCache={},hasOwnProperty={}.hasOwnProperty;ReactDOMComponent.displayName="ReactDOMComponent",ReactDOMComponent.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,r){this._rootNodeID=e;var n=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"button":n=ReactDOMButton.getNativeProps(this,n,r);break;case"input":ReactDOMInput.mountWrapper(this,n,r),n=ReactDOMInput.getNativeProps(this,n,r);break;case"option":ReactDOMOption.mountWrapper(this,n,r),n=ReactDOMOption.getNativeProps(this,n,r);break;case"select":ReactDOMSelect.mountWrapper(this,n,r),n=ReactDOMSelect.getNativeProps(this,n,r),r=ReactDOMSelect.processChildContext(this,n,r);break;case"textarea":ReactDOMTextarea.mountWrapper(this,n,r),n=ReactDOMTextarea.getNativeProps(this,n,r)}assertValidProps(this,n);var a;if(t.useCreateElement){var o=r[ReactMount.ownerDocumentContextKey],i=o.createElement(this._currentElement.type);DOMPropertyOperations.setAttributeForID(i,this._rootNodeID),ReactMount.getID(i),this._updateDOMProperties({},n,t,i),this._createInitialChildren(t,n,r,i),a=i}else{var s=this._createOpenTagMarkupAndPutListeners(t,n),p=this._createContentMarkup(t,n,r);a=!p&&omittedCloseTags[this._tag]?s+"/>":s+">"+p+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(mountReadyInputWrapper,this);case"button":case"select":case"textarea":n.autoFocus&&t.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}return a},_createOpenTagMarkupAndPutListeners:function(e,t){var r="<"+this._currentElement.type;for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];if(null!=a)if(registrationNameModules.hasOwnProperty(n))a&&enqueuePutListener(this._rootNodeID,n,a,e);else{n===STYLE&&(a&&(a=this._previousStyleCopy=assign({},t.style)),a=CSSPropertyOperations.createMarkupForStyles(a));var o=null;null!=this._tag&&isCustomComponent(this._tag,t)?n!==CHILDREN&&(o=DOMPropertyOperations.createMarkupForCustomAttribute(n,a)):o=DOMPropertyOperations.createMarkupForProperty(n,a),o&&(r+=" "+o)}}return e.renderToStaticMarkup?r:r+" "+DOMPropertyOperations.createMarkupForID(this._rootNodeID)},_createContentMarkup:function(e,t,r){var n="",a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&(n=a.__html);else{var o=CONTENT_TYPES[typeof t.children]?t.children:null,i=null!=o?null:t.children;if(null!=o)n=escapeTextContentForBrowser(o);else if(null!=i){var s=this.mountChildren(i,e,r);n=s.join("")}}return newlineEatingTags[this._tag]&&"\n"===n.charAt(0)?"\n"+n:n},_createInitialChildren:function(e,t,r,n){var a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&setInnerHTML(n,a.__html);else{var o=CONTENT_TYPES[typeof t.children]?t.children:null,i=null!=o?null:t.children;if(null!=o)setTextContent(n,o);else if(null!=i)for(var s=this.mountChildren(i,e,r),p=0;p<s.length;p++)n.appendChild(s[p])}},receiveComponent:function(e,t,r){var n=this._currentElement;this._currentElement=e,this.updateComponent(t,n,e,r)},updateComponent:function(e,t,r,n){var a=t.props,o=this._currentElement.props;switch(this._tag){case"button":a=ReactDOMButton.getNativeProps(this,a),o=ReactDOMButton.getNativeProps(this,o);break;case"input":ReactDOMInput.updateWrapper(this),a=ReactDOMInput.getNativeProps(this,a),o=ReactDOMInput.getNativeProps(this,o);break;case"option":a=ReactDOMOption.getNativeProps(this,a),o=ReactDOMOption.getNativeProps(this,o);break;case"select":a=ReactDOMSelect.getNativeProps(this,a),o=ReactDOMSelect.getNativeProps(this,o);break;case"textarea":ReactDOMTextarea.updateWrapper(this),a=ReactDOMTextarea.getNativeProps(this,a),o=ReactDOMTextarea.getNativeProps(this,o)}assertValidProps(this,o),this._updateDOMProperties(a,o,e,null),this._updateDOMChildren(a,o,e,n),!canDefineProperty&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=o),"select"===this._tag&&e.getReactMountReady().enqueue(postUpdateSelectWrapper,this)},_updateDOMProperties:function(e,t,r,n){var a,o,i;for(a in e)if(!t.hasOwnProperty(a)&&e.hasOwnProperty(a))if(a===STYLE){var s=this._previousStyleCopy;for(o in s)s.hasOwnProperty(o)&&(i=i||{},i[o]="");this._previousStyleCopy=null}else registrationNameModules.hasOwnProperty(a)?e[a]&&deleteListener(this._rootNodeID,a):(DOMProperty.properties[a]||DOMProperty.isCustomAttribute(a))&&(n||(n=ReactMount.getNode(this._rootNodeID)),DOMPropertyOperations.deleteValueForProperty(n,a));for(a in t){var p=t[a],l=a===STYLE?this._previousStyleCopy:e[a];if(t.hasOwnProperty(a)&&p!==l)if(a===STYLE)if(p?p=this._previousStyleCopy=assign({},p):this._previousStyleCopy=null,l){for(o in l)!l.hasOwnProperty(o)||p&&p.hasOwnProperty(o)||(i=i||{},i[o]="");for(o in p)p.hasOwnProperty(o)&&l[o]!==p[o]&&(i=i||{},i[o]=p[o])}else i=p;else registrationNameModules.hasOwnProperty(a)?p?enqueuePutListener(this._rootNodeID,a,p,r):l&&deleteListener(this._rootNodeID,a):isCustomComponent(this._tag,t)?(n||(n=ReactMount.getNode(this._rootNodeID)),a===CHILDREN&&(p=null),DOMPropertyOperations.setValueForAttribute(n,a,p)):(DOMProperty.properties[a]||DOMProperty.isCustomAttribute(a))&&(n||(n=ReactMount.getNode(this._rootNodeID)),null!=p?DOMPropertyOperations.setValueForProperty(n,a,p):DOMPropertyOperations.deleteValueForProperty(n,a))}i&&(n||(n=ReactMount.getNode(this._rootNodeID)),CSSPropertyOperations.setValueForStyles(n,i))},_updateDOMChildren:function(e,t,r,n){var a=CONTENT_TYPES[typeof e.children]?e.children:null,o=CONTENT_TYPES[typeof t.children]?t.children:null,i=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,p=null!=a?null:e.children,l=null!=o?null:t.children,u=null!=a||null!=i,c=null!=o||null!=s;null!=p&&null==l?this.updateChildren(null,r,n):u&&!c&&this.updateTextContent(""),null!=o?a!==o&&this.updateTextContent(""+o):null!=s?i!==s&&this.updateMarkup(""+s):null!=l&&this.updateChildren(l,r,n)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var e=this._wrapperState.listeners;if(e)for(var t=0;t<e.length;t++)e[t].remove();break;case"input":ReactDOMInput.unmountWrapper(this);break;case"html":case"head":case"body":invariant(!1)}if(this.unmountChildren(),ReactBrowserEventEmitter.deleteAllListeners(this._rootNodeID),ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){this._nodeWithLegacyProperties._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var e=ReactMount.getNode(this._rootNodeID);e._reactInternalComponent=this,e.getDOMNode=legacyGetDOMNode,e.isMounted=legacyIsMounted,e.setState=legacySetStateEtc,e.replaceState=legacySetStateEtc,e.forceUpdate=legacySetStateEtc,e.setProps=legacySetProps,e.replaceProps=legacyReplaceProps,e.props=this._currentElement.props,this._nodeWithLegacyProperties=e}return this._nodeWithLegacyProperties}},ReactPerf.measureMethods(ReactDOMComponent,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),assign(ReactDOMComponent.prototype,ReactDOMComponent.Mixin,ReactMultiChild.Mixin),module.exports=ReactDOMComponent;

},{"./AutoFocusUtils":25,"./CSSPropertyOperations":28,"./DOMProperty":33,"./DOMPropertyOperations":34,"./EventConstants":38,"./Object.assign":46,"./ReactBrowserEventEmitter":50,"./ReactComponentBrowserEnvironment":55,"./ReactDOMButton":60,"./ReactDOMInput":65,"./ReactDOMOption":66,"./ReactDOMSelect":67,"./ReactDOMTextarea":71,"./ReactMount":87,"./ReactMultiChild":88,"./ReactPerf":93,"./ReactUpdateQueue":104,"./canDefineProperty":126,"./escapeTextContentForBrowser":129,"./isEventSupported":141,"./setInnerHTML":146,"./setTextContent":147,"./validateDOMNesting":150,"fbjs/lib/invariant":166,"fbjs/lib/keyOf":170,"fbjs/lib/shallowEqual":173,"fbjs/lib/warning":175}],62:[function(require,module,exports){
"use strict";function createDOMFactory(e){return ReactElement.createFactory(e)}var ReactElement=require("./ReactElement"),ReactElementValidator=require("./ReactElementValidator"),mapObject=require("fbjs/lib/mapObject"),ReactDOMFactories=mapObject({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul",var:"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},createDOMFactory);module.exports=ReactDOMFactories;

},{"./ReactElement":74,"./ReactElementValidator":75,"fbjs/lib/mapObject":171}],63:[function(require,module,exports){
"use strict";var ReactDOMFeatureFlags={useCreateElement:!1};module.exports=ReactDOMFeatureFlags;

},{}],64:[function(require,module,exports){
"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations"),DOMPropertyOperations=require("./DOMPropertyOperations"),ReactMount=require("./ReactMount"),ReactPerf=require("./ReactPerf"),invariant=require("fbjs/lib/invariant"),INVALID_PROPERTY_ERRORS={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},ReactDOMIDOperations={updatePropertyByID:function(e,r,t){var a=ReactMount.getNode(e);INVALID_PROPERTY_ERRORS.hasOwnProperty(r)&&invariant(!1),null!=t?DOMPropertyOperations.setValueForProperty(a,r,t):DOMPropertyOperations.deleteValueForProperty(a,r)},dangerouslyReplaceNodeWithMarkupByID:function(e,r){var t=ReactMount.getNode(e);DOMChildrenOperations.dangerouslyReplaceNodeWithMarkup(t,r)},dangerouslyProcessChildrenUpdates:function(e,r){for(var t=0;t<e.length;t++)e[t].parentNode=ReactMount.getNode(e[t].parentID);DOMChildrenOperations.processUpdates(e,r)}};ReactPerf.measureMethods(ReactDOMIDOperations,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),module.exports=ReactDOMIDOperations;

},{"./DOMChildrenOperations":32,"./DOMPropertyOperations":34,"./ReactMount":87,"./ReactPerf":93,"fbjs/lib/invariant":166}],65:[function(require,module,exports){
"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMInput.updateWrapper(this)}function _handleChange(e){var t=this._currentElement.props,a=LinkedValueUtils.executeOnChange(t,e);ReactUpdates.asap(forceUpdateIfMounted,this);var n=t.name;if("radio"===t.type&&null!=n){for(var r=ReactMount.getNode(this._rootNodeID),i=r;i.parentNode;)i=i.parentNode;for(var u=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),o=0;o<u.length;o++){var l=u[o];if(l!==r&&l.form===r.form){var d=ReactMount.getID(l);d||invariant(!1);var p=instancesByReactID[d];p||invariant(!1),ReactUpdates.asap(forceUpdateIfMounted,p)}}}return a}var ReactDOMIDOperations=require("./ReactDOMIDOperations"),LinkedValueUtils=require("./LinkedValueUtils"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),instancesByReactID={},ReactDOMInput={getNativeProps:function(e,t,a){var n=LinkedValueUtils.getValue(t),r=LinkedValueUtils.getChecked(t);return assign({},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var a=t.defaultValue;e._wrapperState={initialChecked:t.defaultChecked||!1,initialValue:null!=a?a:null,onChange:_handleChange.bind(e)}},mountReadyWrapper:function(e){instancesByReactID[e._rootNodeID]=e},unmountWrapper:function(e){delete instancesByReactID[e._rootNodeID]},updateWrapper:function(e){var t=e._currentElement.props,a=t.checked;null!=a&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"checked",a||!1);var n=LinkedValueUtils.getValue(t);null!=n&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"value",""+n)}};module.exports=ReactDOMInput;

},{"./LinkedValueUtils":45,"./Object.assign":46,"./ReactDOMIDOperations":64,"./ReactMount":87,"./ReactUpdates":105,"fbjs/lib/invariant":166}],66:[function(require,module,exports){
"use strict";var ReactChildren=require("./ReactChildren"),ReactDOMSelect=require("./ReactDOMSelect"),assign=require("./Object.assign"),warning=require("fbjs/lib/warning"),valueContextKey=ReactDOMSelect.valueContextKey,ReactDOMOption={mountWrapper:function(e,t,r){var a=r[valueContextKey],n=null;if(null!=a)if(n=!1,Array.isArray(a)){for(var l=0;l<a.length;l++)if(""+a[l]==""+t.value){n=!0;break}}else n=""+a==""+t.value;e._wrapperState={selected:n}},getNativeProps:function(e,t,r){var a=assign({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(a.selected=e._wrapperState.selected);var n="";return ReactChildren.forEach(t.children,function(e){null!=e&&("string"!=typeof e&&"number"!=typeof e||(n+=e))}),n&&(a.children=n),a}};module.exports=ReactDOMOption;

},{"./Object.assign":46,"./ReactChildren":52,"./ReactDOMSelect":67,"fbjs/lib/warning":175}],67:[function(require,module,exports){
"use strict";function updateOptionsIfPendingUpdateAndMounted(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=LinkedValueUtils.getValue(e);null!=t&&updateOptions(this,Boolean(e.multiple),t)}}function getDeclarationErrorAddendum(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function checkSelectPropTypes(e,t){var a=e._currentElement._owner;LinkedValueUtils.checkPropTypes("select",t,a);for(var n=0;n<valuePropNames.length;n++){var l=valuePropNames[n];null!=t[l]&&t.multiple}}function updateOptions(e,t,a){var n,l,r=ReactMount.getNode(e._rootNodeID).options;if(t){for(n={},l=0;l<a.length;l++)n[""+a[l]]=!0;for(l=0;l<r.length;l++){var i=n.hasOwnProperty(r[l].value);r[l].selected!==i&&(r[l].selected=i)}}else{for(n=""+a,l=0;l<r.length;l++)if(r[l].value===n)return void(r[l].selected=!0);r.length&&(r[0].selected=!0)}}function _handleChange(e){var t=this._currentElement.props,a=LinkedValueUtils.executeOnChange(t,e);return this._wrapperState.pendingUpdate=!0,ReactUpdates.asap(updateOptionsIfPendingUpdateAndMounted,this),a}var LinkedValueUtils=require("./LinkedValueUtils"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),warning=require("fbjs/lib/warning"),valueContextKey="__ReactDOMSelect_value$"+Math.random().toString(36).slice(2),valuePropNames=["value","defaultValue"],ReactDOMSelect={valueContextKey:valueContextKey,getNativeProps:function(e,t,a){return assign({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var a=LinkedValueUtils.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=a?a:t.defaultValue,onChange:_handleChange.bind(e),wasMultiple:Boolean(t.multiple)}},processChildContext:function(e,t,a){var n=assign({},a);return n[valueContextKey]=e._wrapperState.initialValue,n},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var a=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var n=LinkedValueUtils.getValue(t);null!=n?(e._wrapperState.pendingUpdate=!1,updateOptions(e,Boolean(t.multiple),n)):a!==Boolean(t.multiple)&&(null!=t.defaultValue?updateOptions(e,Boolean(t.multiple),t.defaultValue):updateOptions(e,Boolean(t.multiple),t.multiple?[]:""))}};module.exports=ReactDOMSelect;

},{"./LinkedValueUtils":45,"./Object.assign":46,"./ReactMount":87,"./ReactUpdates":105,"fbjs/lib/warning":175}],68:[function(require,module,exports){
"use strict";function isCollapsed(e,t,n,o){return e===n&&t===o}function getIEOffsets(e){var t=document.selection,n=t.createRange(),o=n.text.length,s=n.duplicate();s.moveToElementText(e),s.setEndPoint("EndToStart",n);var r=s.text.length;return{start:r,end:r+o}}function getModernOffsets(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,o=t.anchorOffset,s=t.focusNode,r=t.focusOffset,a=t.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(e){return null}var f=isCollapsed(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),d=f?0:a.toString().length,c=a.cloneRange();c.selectNodeContents(e),c.setEnd(a.startContainer,a.startOffset);var i=isCollapsed(c.startContainer,c.startOffset,c.endContainer,c.endOffset),l=i?0:c.toString().length,g=l+d,u=document.createRange();u.setStart(n,o),u.setEnd(s,r);var O=u.collapsed;return{start:O?g:l,end:O?l:g}}function setIEOffsets(e,t){var n,o,s=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,o=n):t.start>t.end?(n=t.end,o=t.start):(n=t.start,o=t.end),s.moveToElementText(e),s.moveStart("character",n),s.setEndPoint("EndToStart",s),s.moveEnd("character",o-n),s.select()}function setModernOffsets(e,t){if(window.getSelection){var n=window.getSelection(),o=e[getTextContentAccessor()].length,s=Math.min(t.start,o),r=void 0===t.end?s:Math.min(t.end,o);if(!n.extend&&s>r){var a=r;r=s,s=a}var f=getNodeForCharacterOffset(e,s),d=getNodeForCharacterOffset(e,r);if(f&&d){var c=document.createRange();c.setStart(f.node,f.offset),n.removeAllRanges(),s>r?(n.addRange(c),n.extend(d.node,d.offset)):(c.setEnd(d.node,d.offset),n.addRange(c))}}}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),getNodeForCharacterOffset=require("./getNodeForCharacterOffset"),getTextContentAccessor=require("./getTextContentAccessor"),useIEOffsets=ExecutionEnvironment.canUseDOM&&"selection"in document&&!("getSelection"in window),ReactDOMSelection={getOffsets:useIEOffsets?getIEOffsets:getModernOffsets,setOffsets:useIEOffsets?setIEOffsets:setModernOffsets};module.exports=ReactDOMSelection;

},{"./getNodeForCharacterOffset":138,"./getTextContentAccessor":139,"fbjs/lib/ExecutionEnvironment":152}],69:[function(require,module,exports){
"use strict";var ReactDefaultInjection=require("./ReactDefaultInjection"),ReactServerRendering=require("./ReactServerRendering"),ReactVersion=require("./ReactVersion");ReactDefaultInjection.inject();var ReactDOMServer={renderToString:ReactServerRendering.renderToString,renderToStaticMarkup:ReactServerRendering.renderToStaticMarkup,version:ReactVersion};module.exports=ReactDOMServer;

},{"./ReactDefaultInjection":73,"./ReactServerRendering":102,"./ReactVersion":106}],70:[function(require,module,exports){
"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations"),DOMPropertyOperations=require("./DOMPropertyOperations"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactMount=require("./ReactMount"),assign=require("./Object.assign"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),setTextContent=require("./setTextContent"),validateDOMNesting=require("./validateDOMNesting"),ReactDOMTextComponent=function(e){};assign(ReactDOMTextComponent.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){if(this._rootNodeID=e,t.useCreateElement){var r=n[ReactMount.ownerDocumentContextKey],o=r.createElement("span");return DOMPropertyOperations.setAttributeForID(o,e),ReactMount.getID(o),setTextContent(o,this._stringText),o}var i=escapeTextContentForBrowser(this._stringText);return t.renderToStaticMarkup?i:"<span "+DOMPropertyOperations.createMarkupForID(e)+">"+i+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=ReactMount.getNode(this._rootNodeID);DOMChildrenOperations.updateTextContent(r,n)}}},unmountComponent:function(){ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID)}}),module.exports=ReactDOMTextComponent;

},{"./DOMChildrenOperations":32,"./DOMPropertyOperations":34,"./Object.assign":46,"./ReactComponentBrowserEnvironment":55,"./ReactMount":87,"./escapeTextContentForBrowser":129,"./setTextContent":147,"./validateDOMNesting":150}],71:[function(require,module,exports){
"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMTextarea.updateWrapper(this)}function _handleChange(e){var a=this._currentElement.props,t=LinkedValueUtils.executeOnChange(a,e);return ReactUpdates.asap(forceUpdateIfMounted,this),t}var LinkedValueUtils=require("./LinkedValueUtils"),ReactDOMIDOperations=require("./ReactDOMIDOperations"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactDOMTextarea={getNativeProps:function(e,a,t){return null!=a.dangerouslySetInnerHTML&&invariant(!1),assign({},a,{defaultValue:void 0,value:void 0,children:e._wrapperState.initialValue,onChange:e._wrapperState.onChange})},mountWrapper:function(e,a){var t=a.defaultValue,n=a.children;null!=n&&(null!=t&&invariant(!1),Array.isArray(n)&&(n.length<=1||invariant(!1),n=n[0]),t=""+n),null==t&&(t="");var r=LinkedValueUtils.getValue(a);e._wrapperState={initialValue:""+(null!=r?r:t),onChange:_handleChange.bind(e)}},updateWrapper:function(e){var a=e._currentElement.props,t=LinkedValueUtils.getValue(a);null!=t&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"value",""+t)}};module.exports=ReactDOMTextarea;

},{"./LinkedValueUtils":45,"./Object.assign":46,"./ReactDOMIDOperations":64,"./ReactUpdates":105,"fbjs/lib/invariant":166,"fbjs/lib/warning":175}],72:[function(require,module,exports){
"use strict";function ReactDefaultBatchingStrategyTransaction(){this.reinitializeTransaction()}var ReactUpdates=require("./ReactUpdates"),Transaction=require("./Transaction"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),RESET_BATCHED_UPDATES={initialize:emptyFunction,close:function(){ReactDefaultBatchingStrategy.isBatchingUpdates=!1}},FLUSH_BATCHED_UPDATES={initialize:emptyFunction,close:ReactUpdates.flushBatchedUpdates.bind(ReactUpdates)},TRANSACTION_WRAPPERS=[FLUSH_BATCHED_UPDATES,RESET_BATCHED_UPDATES];assign(ReactDefaultBatchingStrategyTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS}});var transaction=new ReactDefaultBatchingStrategyTransaction,ReactDefaultBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(t,a,e,i,n,c){var r=ReactDefaultBatchingStrategy.isBatchingUpdates;ReactDefaultBatchingStrategy.isBatchingUpdates=!0,r?t(a,e,i,n,c):transaction.perform(t,null,a,e,i,n,c)}};module.exports=ReactDefaultBatchingStrategy;

},{"./Object.assign":46,"./ReactUpdates":105,"./Transaction":122,"fbjs/lib/emptyFunction":158}],73:[function(require,module,exports){
"use strict";function inject(){if(!alreadyInjected){alreadyInjected=!0,ReactInjection.EventEmitter.injectReactEventListener(ReactEventListener),ReactInjection.EventPluginHub.injectEventPluginOrder(DefaultEventPluginOrder),ReactInjection.EventPluginHub.injectInstanceHandle(ReactInstanceHandles),ReactInjection.EventPluginHub.injectMount(ReactMount),ReactInjection.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:SimpleEventPlugin,EnterLeaveEventPlugin:EnterLeaveEventPlugin,ChangeEventPlugin:ChangeEventPlugin,SelectEventPlugin:SelectEventPlugin,BeforeInputEventPlugin:BeforeInputEventPlugin}),ReactInjection.NativeComponent.injectGenericComponentClass(ReactDOMComponent),ReactInjection.NativeComponent.injectTextComponentClass(ReactDOMTextComponent),ReactInjection.Class.injectMixin(ReactBrowserComponentMixin),ReactInjection.DOMProperty.injectDOMPropertyConfig(HTMLDOMPropertyConfig),ReactInjection.DOMProperty.injectDOMPropertyConfig(SVGDOMPropertyConfig),ReactInjection.EmptyComponent.injectEmptyComponent("noscript"),ReactInjection.Updates.injectReconcileTransaction(ReactReconcileTransaction),ReactInjection.Updates.injectBatchingStrategy(ReactDefaultBatchingStrategy),ReactInjection.RootIndex.injectCreateReactRootIndex(ExecutionEnvironment.canUseDOM?ClientReactRootIndex.createReactRootIndex:ServerReactRootIndex.createReactRootIndex),ReactInjection.Component.injectEnvironment(ReactComponentBrowserEnvironment)}}var BeforeInputEventPlugin=require("./BeforeInputEventPlugin"),ChangeEventPlugin=require("./ChangeEventPlugin"),ClientReactRootIndex=require("./ClientReactRootIndex"),DefaultEventPluginOrder=require("./DefaultEventPluginOrder"),EnterLeaveEventPlugin=require("./EnterLeaveEventPlugin"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),HTMLDOMPropertyConfig=require("./HTMLDOMPropertyConfig"),ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy"),ReactDOMComponent=require("./ReactDOMComponent"),ReactDOMTextComponent=require("./ReactDOMTextComponent"),ReactEventListener=require("./ReactEventListener"),ReactInjection=require("./ReactInjection"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactReconcileTransaction=require("./ReactReconcileTransaction"),SelectEventPlugin=require("./SelectEventPlugin"),ServerReactRootIndex=require("./ServerReactRootIndex"),SimpleEventPlugin=require("./SimpleEventPlugin"),SVGDOMPropertyConfig=require("./SVGDOMPropertyConfig"),alreadyInjected=!1;module.exports={inject:inject};

},{"./BeforeInputEventPlugin":26,"./ChangeEventPlugin":30,"./ClientReactRootIndex":31,"./DefaultEventPluginOrder":36,"./EnterLeaveEventPlugin":37,"./HTMLDOMPropertyConfig":44,"./ReactBrowserComponentMixin":49,"./ReactComponentBrowserEnvironment":55,"./ReactDOMComponent":61,"./ReactDOMTextComponent":70,"./ReactDefaultBatchingStrategy":72,"./ReactEventListener":80,"./ReactInjection":81,"./ReactInstanceHandles":83,"./ReactMount":87,"./ReactReconcileTransaction":97,"./SVGDOMPropertyConfig":107,"./SelectEventPlugin":108,"./ServerReactRootIndex":109,"./SimpleEventPlugin":110,"fbjs/lib/ExecutionEnvironment":152}],74:[function(require,module,exports){
"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner"),assign=require("./Object.assign"),canDefineProperty=require("./canDefineProperty"),REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,RESERVED_PROPS={key:!0,ref:!0,__self:!0,__source:!0},ReactElement=function(e,r,n,t,l,o,c){var a={$$typeof:REACT_ELEMENT_TYPE,type:e,key:r,ref:n,props:c,_owner:o};return a};ReactElement.createElement=function(e,r,n){var t,l={},o=null,c=null,a=null,u=null;if(null!=r){c=void 0===r.ref?null:r.ref,o=void 0===r.key?null:""+r.key,a=void 0===r.__self?null:r.__self,u=void 0===r.__source?null:r.__source;for(t in r)r.hasOwnProperty(t)&&!RESERVED_PROPS.hasOwnProperty(t)&&(l[t]=r[t])}var f=arguments.length-2;if(1===f)l.children=n;else if(f>1){for(var i=Array(f),E=0;E<f;E++)i[E]=arguments[E+2];l.children=i}if(e&&e.defaultProps){var s=e.defaultProps;for(t in s)void 0===l[t]&&(l[t]=s[t])}return ReactElement(e,o,c,a,u,ReactCurrentOwner.current,l)},ReactElement.createFactory=function(e){var r=ReactElement.createElement.bind(null,e);return r.type=e,r},ReactElement.cloneAndReplaceKey=function(e,r){return ReactElement(e.type,r,e.ref,e._self,e._source,e._owner,e.props)},ReactElement.cloneAndReplaceProps=function(e,r){var n=ReactElement(e.type,e.key,e.ref,e._self,e._source,e._owner,r);return n},ReactElement.cloneElement=function(e,r,n){var t,l=assign({},e.props),o=e.key,c=e.ref,a=e._self,u=e._source,f=e._owner;if(null!=r){void 0!==r.ref&&(c=r.ref,f=ReactCurrentOwner.current),void 0!==r.key&&(o=""+r.key);for(t in r)r.hasOwnProperty(t)&&!RESERVED_PROPS.hasOwnProperty(t)&&(l[t]=r[t])}var i=arguments.length-2;if(1===i)l.children=n;else if(i>1){for(var E=Array(i),s=0;s<i;s++)E[s]=arguments[s+2];l.children=E}return ReactElement(e.type,o,c,a,u,f,l)},ReactElement.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===REACT_ELEMENT_TYPE},module.exports=ReactElement;

},{"./Object.assign":46,"./ReactCurrentOwner":58,"./canDefineProperty":126}],75:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(){if(ReactCurrentOwner.current){var e=ReactCurrentOwner.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function validateExplicitKey(e,r){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;getAddendaForKeyUse("uniqueKey",e,r)}}function getAddendaForKeyUse(e,r,t){var a=getDeclarationErrorAddendum();if(!a){var n="string"==typeof t?t:t.displayName||t.name;n&&(a=" Check the top-level render call using <"+n+">.")}var i=ownerHasKeyUseWarning[e]||(ownerHasKeyUseWarning[e]={});if(i[a])return null;i[a]=!0;var o={parentOrOwner:a,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return r&&r._owner&&r._owner!==ReactCurrentOwner.current&&(o.childOwner=" It was passed a child from "+r._owner.getName()+"."),o}function validateChildKeys(e,r){if("object"==typeof e)if(Array.isArray(e))for(var t=0;t<e.length;t++){var a=e[t];ReactElement.isValidElement(a)&&validateExplicitKey(a,r)}else if(ReactElement.isValidElement(e))e._store&&(e._store.validated=!0);else if(e){var n=getIteratorFn(e);if(n&&n!==e.entries)for(var i,o=n.call(e);!(i=o.next()).done;)ReactElement.isValidElement(i.value)&&validateExplicitKey(i.value,r)}}function checkPropTypes(e,r,t,a){for(var n in r)if(r.hasOwnProperty(n)){var i;try{"function"!=typeof r[n]&&invariant(!1),i=r[n](t,n,e,a,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){i=e}if(i instanceof Error&&!(i.message in loggedTypeFailures)){loggedTypeFailures[i.message]=!0;getDeclarationErrorAddendum()}}}function validatePropTypes(e){var r=e.type;if("function"==typeof r){var t=r.displayName||r.name;r.propTypes&&checkPropTypes(t,r.propTypes,e.props,ReactPropTypeLocations.prop),r.getDefaultProps}}var ReactElement=require("./ReactElement"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactCurrentOwner=require("./ReactCurrentOwner"),canDefineProperty=require("./canDefineProperty"),getIteratorFn=require("./getIteratorFn"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ownerHasKeyUseWarning={},loggedTypeFailures={},ReactElementValidator={createElement:function(e,r,t){var a="string"==typeof e||"function"==typeof e,n=ReactElement.createElement.apply(this,arguments);if(null==n)return n;if(a)for(var i=2;i<arguments.length;i++)validateChildKeys(arguments[i],e);return validatePropTypes(n),n},createFactory:function(e){var r=ReactElementValidator.createElement.bind(null,e);return r.type=e,r},cloneElement:function(e,r,t){for(var a=ReactElement.cloneElement.apply(this,arguments),n=2;n<arguments.length;n++)validateChildKeys(arguments[n],a.type);return validatePropTypes(a),a}};module.exports=ReactElementValidator;

},{"./ReactCurrentOwner":58,"./ReactElement":74,"./ReactPropTypeLocationNames":94,"./ReactPropTypeLocations":95,"./canDefineProperty":126,"./getIteratorFn":137,"fbjs/lib/invariant":166,"fbjs/lib/warning":175}],76:[function(require,module,exports){
"use strict";function registerNullComponentID(){ReactEmptyComponentRegistry.registerNullComponentID(this._rootNodeID)}var ReactElement=require("./ReactElement"),ReactEmptyComponentRegistry=require("./ReactEmptyComponentRegistry"),ReactReconciler=require("./ReactReconciler"),assign=require("./Object.assign"),placeholderElement,ReactEmptyComponentInjection={injectEmptyComponent:function(e){placeholderElement=ReactElement.createElement(e)}},ReactEmptyComponent=function(e){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=e(placeholderElement)};assign(ReactEmptyComponent.prototype,{construct:function(e){},mountComponent:function(e,t,n){return t.getReactMountReady().enqueue(registerNullComponentID,this),this._rootNodeID=e,ReactReconciler.mountComponent(this._renderedComponent,e,t,n)},receiveComponent:function(){},unmountComponent:function(e,t,n){ReactReconciler.unmountComponent(this._renderedComponent),ReactEmptyComponentRegistry.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),ReactEmptyComponent.injection=ReactEmptyComponentInjection,module.exports=ReactEmptyComponent;

},{"./Object.assign":46,"./ReactElement":74,"./ReactEmptyComponentRegistry":77,"./ReactReconciler":98}],77:[function(require,module,exports){
"use strict";function isNullComponentID(e){return!!nullComponentIDsRegistry[e]}function registerNullComponentID(e){nullComponentIDsRegistry[e]=!0}function deregisterNullComponentID(e){delete nullComponentIDsRegistry[e]}var nullComponentIDsRegistry={},ReactEmptyComponentRegistry={isNullComponentID:isNullComponentID,registerNullComponentID:registerNullComponentID,deregisterNullComponentID:deregisterNullComponentID};module.exports=ReactEmptyComponentRegistry;

},{}],78:[function(require,module,exports){
"use strict";function invokeGuardedCallback(r,a,t,o){try{return a(t,o)}catch(r){return void(null===caughtError&&(caughtError=r))}}var caughtError=null,ReactErrorUtils={invokeGuardedCallback:invokeGuardedCallback,invokeGuardedCallbackWithCatch:invokeGuardedCallback,rethrowCaughtError:function(){if(caughtError){var r=caughtError;throw caughtError=null,r}}},fakeNode;module.exports=ReactErrorUtils;

},{}],79:[function(require,module,exports){
"use strict";function runEventQueueInBatch(e){EventPluginHub.enqueueEvents(e),EventPluginHub.processEventQueue(!1)}var EventPluginHub=require("./EventPluginHub"),ReactEventEmitterMixin={handleTopLevel:function(e,n,t,u,i){runEventQueueInBatch(EventPluginHub.extractEvents(e,n,t,u,i))}};module.exports=ReactEventEmitterMixin;

},{"./EventPluginHub":39}],80:[function(require,module,exports){
"use strict";function findParent(e){var t=ReactMount.getID(e),n=ReactInstanceHandles.getReactRootIDFromNodeID(t),a=ReactMount.findReactContainerForID(n);return ReactMount.getFirstReactDOM(a)}function TopLevelCallbackBookKeeping(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function handleTopLevelImpl(e){handleTopLevelWithoutPath(e)}function handleTopLevelWithoutPath(e){for(var t=ReactMount.getFirstReactDOM(getEventTarget(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=findParent(n);for(var a=0;a<e.ancestors.length;a++){t=e.ancestors[a];var o=ReactMount.getID(t)||"";ReactEventListener._handleTopLevel(e.topLevelType,t,o,e.nativeEvent,getEventTarget(e.nativeEvent))}}function handleTopLevelWithPath(e){for(var t=e.nativeEvent.path,n=t[0],a=0,o=0;o<t.length;o++){var l=t[o];l.nodeType===DOCUMENT_FRAGMENT_NODE_TYPE&&(n=t[o+1]);if(ReactMount.getFirstReactDOM(l)===l){var i=ReactMount.getID(l),r=ReactInstanceHandles.getReactRootIDFromNodeID(i);e.ancestors.push(l);var s=ReactMount.getID(l)||"";for(a++,ReactEventListener._handleTopLevel(e.topLevelType,l,s,e.nativeEvent,n);i!==r;)o++,l=t[o],i=ReactMount.getID(l)}}0===a&&ReactEventListener._handleTopLevel(e.topLevelType,window,"",e.nativeEvent,getEventTarget(e.nativeEvent))}function scrollValueMonitor(e){e(getUnboundedScrollPosition(window))}var EventListener=require("fbjs/lib/EventListener"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),PooledClass=require("./PooledClass"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),getEventTarget=require("./getEventTarget"),getUnboundedScrollPosition=require("fbjs/lib/getUnboundedScrollPosition"),DOCUMENT_FRAGMENT_NODE_TYPE=11;assign(TopLevelCallbackBookKeeping.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),PooledClass.addPoolingTo(TopLevelCallbackBookKeeping,PooledClass.twoArgumentPooler);var ReactEventListener={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:ExecutionEnvironment.canUseDOM?window:null,setHandleTopLevel:function(e){ReactEventListener._handleTopLevel=e},setEnabled:function(e){ReactEventListener._enabled=!!e},isEnabled:function(){return ReactEventListener._enabled},trapBubbledEvent:function(e,t,n){var a=n;return a?EventListener.listen(a,t,ReactEventListener.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var a=n;return a?EventListener.capture(a,t,ReactEventListener.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=scrollValueMonitor.bind(null,e);EventListener.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(ReactEventListener._enabled){var n=TopLevelCallbackBookKeeping.getPooled(e,t);try{ReactUpdates.batchedUpdates(handleTopLevelImpl,n)}finally{TopLevelCallbackBookKeeping.release(n)}}}};module.exports=ReactEventListener;

},{"./Object.assign":46,"./PooledClass":47,"./ReactInstanceHandles":83,"./ReactMount":87,"./ReactUpdates":105,"./getEventTarget":136,"fbjs/lib/EventListener":151,"fbjs/lib/ExecutionEnvironment":152,"fbjs/lib/getUnboundedScrollPosition":163}],81:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),EventPluginHub=require("./EventPluginHub"),ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactClass=require("./ReactClass"),ReactEmptyComponent=require("./ReactEmptyComponent"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactNativeComponent=require("./ReactNativeComponent"),ReactPerf=require("./ReactPerf"),ReactRootIndex=require("./ReactRootIndex"),ReactUpdates=require("./ReactUpdates"),ReactInjection={Component:ReactComponentEnvironment.injection,Class:ReactClass.injection,DOMProperty:DOMProperty.injection,EmptyComponent:ReactEmptyComponent.injection,EventPluginHub:EventPluginHub.injection,EventEmitter:ReactBrowserEventEmitter.injection,NativeComponent:ReactNativeComponent.injection,Perf:ReactPerf.injection,RootIndex:ReactRootIndex.injection,Updates:ReactUpdates.injection};module.exports=ReactInjection;

},{"./DOMProperty":33,"./EventPluginHub":39,"./ReactBrowserEventEmitter":50,"./ReactClass":53,"./ReactComponentEnvironment":56,"./ReactEmptyComponent":76,"./ReactNativeComponent":90,"./ReactPerf":93,"./ReactRootIndex":100,"./ReactUpdates":105}],82:[function(require,module,exports){
"use strict";function isInDocument(e){return containsNode(document.documentElement,e)}var ReactDOMSelection=require("./ReactDOMSelection"),containsNode=require("fbjs/lib/containsNode"),focusNode=require("fbjs/lib/focusNode"),getActiveElement=require("fbjs/lib/getActiveElement"),ReactInputSelection={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=getActiveElement();return{focusedElem:e,selectionRange:ReactInputSelection.hasSelectionCapabilities(e)?ReactInputSelection.getSelection(e):null}},restoreSelection:function(e){var t=getActiveElement(),n=e.focusedElem,o=e.selectionRange;t!==n&&isInDocument(n)&&(ReactInputSelection.hasSelectionCapabilities(n)&&ReactInputSelection.setSelection(n,o),focusNode(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=ReactDOMSelection.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,o=t.end;if(void 0===o&&(o=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(o,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var c=e.createTextRange();c.collapse(!0),c.moveStart("character",n),c.moveEnd("character",o-n),c.select()}else ReactDOMSelection.setOffsets(e,t)}};module.exports=ReactInputSelection;

},{"./ReactDOMSelection":68,"fbjs/lib/containsNode":155,"fbjs/lib/focusNode":160,"fbjs/lib/getActiveElement":161}],83:[function(require,module,exports){
"use strict";function getReactRootIDString(t){return SEPARATOR+t.toString(36)}function isBoundary(t,e){return t.charAt(e)===SEPARATOR||e===t.length}function isValidID(t){return""===t||t.charAt(0)===SEPARATOR&&t.charAt(t.length-1)!==SEPARATOR}function isAncestorIDOf(t,e){return 0===e.indexOf(t)&&isBoundary(e,t.length)}function getParentID(t){return t?t.substr(0,t.lastIndexOf(SEPARATOR)):""}function getNextDescendantID(t,e){if(isValidID(t)&&isValidID(e)||invariant(!1),isAncestorIDOf(t,e)||invariant(!1),t===e)return t;var r,n=t.length+SEPARATOR_LENGTH;for(r=n;r<e.length&&!isBoundary(e,r);r++);return e.substr(0,r)}function getFirstCommonAncestorID(t,e){var r=Math.min(t.length,e.length);if(0===r)return"";for(var n=0,a=0;a<=r;a++)if(isBoundary(t,a)&&isBoundary(e,a))n=a;else if(t.charAt(a)!==e.charAt(a))break;var i=t.substr(0,n);return isValidID(i)||invariant(!1),i}function traverseParentPath(t,e,r,n,a,i){t=t||"",e=e||"",t===e&&invariant(!1);var s=isAncestorIDOf(e,t);s||isAncestorIDOf(t,e)||invariant(!1);for(var o=0,c=s?getParentID:getNextDescendantID,R=t;;R=c(R,e)){var A;if(a&&R===t||i&&R===e||(A=r(R,s,n)),!1===A||R===e)break;o++<MAX_TREE_DEPTH||invariant(!1)}}var ReactRootIndex=require("./ReactRootIndex"),invariant=require("fbjs/lib/invariant"),SEPARATOR=".",SEPARATOR_LENGTH=SEPARATOR.length,MAX_TREE_DEPTH=1e4,ReactInstanceHandles={createReactRootID:function(){return getReactRootIDString(ReactRootIndex.createReactRootIndex())},createReactID:function(t,e){return t+e},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===SEPARATOR&&t.length>1){var e=t.indexOf(SEPARATOR,1);return e>-1?t.substr(0,e):t}return null},traverseEnterLeave:function(t,e,r,n,a){var i=getFirstCommonAncestorID(t,e);i!==t&&traverseParentPath(t,i,r,n,!1,!0),i!==e&&traverseParentPath(i,e,r,a,!0,!1)},traverseTwoPhase:function(t,e,r){t&&(traverseParentPath("",t,e,r,!0,!1),traverseParentPath(t,"",e,r,!1,!0))},traverseTwoPhaseSkipTarget:function(t,e,r){t&&(traverseParentPath("",t,e,r,!0,!0),traverseParentPath(t,"",e,r,!0,!0))},traverseAncestors:function(t,e,r){traverseParentPath("",t,e,r,!0,!1)},getFirstCommonAncestorID:getFirstCommonAncestorID,_getNextDescendantID:getNextDescendantID,isAncestorIDOf:isAncestorIDOf,SEPARATOR:SEPARATOR};module.exports=ReactInstanceHandles;

},{"./ReactRootIndex":100,"fbjs/lib/invariant":166}],84:[function(require,module,exports){
"use strict";var ReactInstanceMap={remove:function(n){n._reactInternalInstance=void 0},get:function(n){return n._reactInternalInstance},has:function(n){return void 0!==n._reactInternalInstance},set:function(n,t){n._reactInternalInstance=t}};module.exports=ReactInstanceMap;

},{}],85:[function(require,module,exports){
"use strict";var ReactChildren=require("./ReactChildren"),ReactComponent=require("./ReactComponent"),ReactClass=require("./ReactClass"),ReactDOMFactories=require("./ReactDOMFactories"),ReactElement=require("./ReactElement"),ReactElementValidator=require("./ReactElementValidator"),ReactPropTypes=require("./ReactPropTypes"),ReactVersion=require("./ReactVersion"),assign=require("./Object.assign"),onlyChild=require("./onlyChild"),createElement=ReactElement.createElement,createFactory=ReactElement.createFactory,cloneElement=ReactElement.cloneElement,React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,toArray:ReactChildren.toArray,only:onlyChild},Component:ReactComponent,createElement:createElement,cloneElement:cloneElement,isValidElement:ReactElement.isValidElement,PropTypes:ReactPropTypes,createClass:ReactClass.createClass,createFactory:createFactory,createMixin:function(e){return e},DOM:ReactDOMFactories,version:ReactVersion,__spread:assign};module.exports=React;

},{"./Object.assign":46,"./ReactChildren":52,"./ReactClass":53,"./ReactComponent":54,"./ReactDOMFactories":62,"./ReactElement":74,"./ReactElementValidator":75,"./ReactPropTypes":96,"./ReactVersion":106,"./onlyChild":143}],86:[function(require,module,exports){
"use strict";var adler32=require("./adler32"),TAG_END=/\/?>/,ReactMarkupChecksum={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var r=adler32(e);return e.replace(TAG_END," "+ReactMarkupChecksum.CHECKSUM_ATTR_NAME+'="'+r+'"$&')},canReuseMarkup:function(e,r){var a=r.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);return a=a&&parseInt(a,10),adler32(e)===a}};module.exports=ReactMarkupChecksum;

},{"./adler32":125}],87:[function(require,module,exports){
"use strict";function firstDifferenceIndex(e,t){for(var n=Math.min(e.length,t.length),o=0;o<n;o++)if(e.charAt(o)!==t.charAt(o))return o;return e.length===t.length?-1:n}function getReactRootElementInContainer(e){return e?e.nodeType===DOC_NODE_TYPE?e.documentElement:e.firstChild:null}function getReactRootID(e){var t=getReactRootElementInContainer(e);return t&&ReactMount.getID(t)}function getID(e){var t=internalGetID(e);if(t)if(nodeCache.hasOwnProperty(t)){var n=nodeCache[t];n!==e&&(isValid(n,t)&&invariant(!1),nodeCache[t]=e)}else nodeCache[t]=e;return t}function internalGetID(e){return e&&e.getAttribute&&e.getAttribute(ATTR_NAME)||""}function setID(e,t){var n=internalGetID(e);n!==t&&delete nodeCache[n],e.setAttribute(ATTR_NAME,t),nodeCache[t]=e}function getNode(e){return nodeCache.hasOwnProperty(e)&&isValid(nodeCache[e],e)||(nodeCache[e]=ReactMount.findReactNodeByID(e)),nodeCache[e]}function getNodeFromInstance(e){var t=ReactInstanceMap.get(e)._rootNodeID;return ReactEmptyComponentRegistry.isNullComponentID(t)?null:(nodeCache.hasOwnProperty(t)&&isValid(nodeCache[t],t)||(nodeCache[t]=ReactMount.findReactNodeByID(t)),nodeCache[t])}function isValid(e,t){if(e){internalGetID(e)!==t&&invariant(!1);var n=ReactMount.findReactContainerForID(t);if(n&&containsNode(n,e))return!0}return!1}function purgeID(e){delete nodeCache[e]}function findDeepestCachedAncestorImpl(e){var t=nodeCache[e];if(!t||!isValid(t,e))return!1;deepestNodeSoFar=t}function findDeepestCachedAncestor(e){deepestNodeSoFar=null,ReactInstanceHandles.traverseAncestors(e,findDeepestCachedAncestorImpl);var t=deepestNodeSoFar;return deepestNodeSoFar=null,t}function mountComponentIntoNode(e,t,n,o,r,a){ReactDOMFeatureFlags.useCreateElement&&(a=assign({},a),n.nodeType===DOC_NODE_TYPE?a[ownerDocumentContextKey]=n:a[ownerDocumentContextKey]=n.ownerDocument);var c=ReactReconciler.mountComponent(e,t,o,a);e._renderedComponent._topLevelWrapper=e,ReactMount._mountImageIntoNode(c,n,r,o)}function batchedMountComponentIntoNode(e,t,n,o,r){var a=ReactUpdates.ReactReconcileTransaction.getPooled(o);a.perform(mountComponentIntoNode,null,e,t,n,a,o,r),ReactUpdates.ReactReconcileTransaction.release(a)}function unmountComponentFromNode(e,t){for(ReactReconciler.unmountComponent(e),t.nodeType===DOC_NODE_TYPE&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function hasNonRootReactChild(e){var t=getReactRootID(e);return!!t&&t!==ReactInstanceHandles.getReactRootIDFromNodeID(t)}function findFirstReactDOMImpl(e){for(;e&&e.parentNode!==e;e=e.parentNode)if(1===e.nodeType){var t=internalGetID(e);if(t){var n,o=ReactInstanceHandles.getReactRootIDFromNodeID(t),r=e;do{if(n=internalGetID(r),null==(r=r.parentNode))return null}while(n!==o);if(r===containersByReactRootID[o])return e}}return null}var DOMProperty=require("./DOMProperty"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactDOMFeatureFlags=require("./ReactDOMFeatureFlags"),ReactElement=require("./ReactElement"),ReactEmptyComponentRegistry=require("./ReactEmptyComponentRegistry"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactInstanceMap=require("./ReactInstanceMap"),ReactMarkupChecksum=require("./ReactMarkupChecksum"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),ReactUpdateQueue=require("./ReactUpdateQueue"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),containsNode=require("fbjs/lib/containsNode"),instantiateReactComponent=require("./instantiateReactComponent"),invariant=require("fbjs/lib/invariant"),setInnerHTML=require("./setInnerHTML"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),validateDOMNesting=require("./validateDOMNesting"),warning=require("fbjs/lib/warning"),ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME,nodeCache={},ELEMENT_NODE_TYPE=1,DOC_NODE_TYPE=9,DOCUMENT_FRAGMENT_NODE_TYPE=11,ownerDocumentContextKey="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),instancesByReactRootID={},containersByReactRootID={},rootElementsByReactRootID,findComponentRootReusableArray=[],deepestNodeSoFar=null,TopLevelWrapper=function(){};TopLevelWrapper.prototype.isReactComponent={},TopLevelWrapper.prototype.render=function(){return this.props};var ReactMount={TopLevelWrapper:TopLevelWrapper,_instancesByReactRootID:instancesByReactRootID,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,o){return ReactMount.scrollMonitor(n,function(){ReactUpdateQueue.enqueueElementInternal(e,t),o&&ReactUpdateQueue.enqueueCallbackInternal(e,o)}),e},_registerComponent:function(e,t){(!t||t.nodeType!==ELEMENT_NODE_TYPE&&t.nodeType!==DOC_NODE_TYPE&&t.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE)&&invariant(!1),ReactBrowserEventEmitter.ensureScrollValueMonitoring();var n=ReactMount.registerContainer(t);return instancesByReactRootID[n]=e,n},_renderNewRootComponent:function(e,t,n,o){var r=instantiateReactComponent(e,null),a=ReactMount._registerComponent(r,t);return ReactUpdates.batchedUpdates(batchedMountComponentIntoNode,r,a,t,n,o),r},renderSubtreeIntoContainer:function(e,t,n,o){return(null==e||null==e._reactInternalInstance)&&invariant(!1),ReactMount._renderSubtreeIntoContainer(e,t,n,o)},_renderSubtreeIntoContainer:function(e,t,n,o){ReactElement.isValidElement(t)||invariant(!1);var r=new ReactElement(TopLevelWrapper,null,null,null,null,null,t),a=instancesByReactRootID[getReactRootID(n)];if(a){var c=a._currentElement,i=c.props;if(shouldUpdateReactComponent(i,t)){var u=a._renderedComponent.getPublicInstance(),R=o&&function(){o.call(u)};return ReactMount._updateRootComponent(a,r,n,R),u}ReactMount.unmountComponentAtNode(n)}var d=getReactRootElementInContainer(n),s=d&&!!internalGetID(d),l=hasNonRootReactChild(n),p=s&&!a&&!l,C=ReactMount._renderNewRootComponent(r,n,p,null!=e?e._reactInternalInstance._processChildContext(e._reactInternalInstance._context):emptyObject)._renderedComponent.getPublicInstance();return o&&o.call(C),C},render:function(e,t,n){return ReactMount._renderSubtreeIntoContainer(null,e,t,n)},registerContainer:function(e){var t=getReactRootID(e);return t&&(t=ReactInstanceHandles.getReactRootIDFromNodeID(t)),t||(t=ReactInstanceHandles.createReactRootID()),containersByReactRootID[t]=e,t},unmountComponentAtNode:function(e){(!e||e.nodeType!==ELEMENT_NODE_TYPE&&e.nodeType!==DOC_NODE_TYPE&&e.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE)&&invariant(!1);var t=getReactRootID(e),n=instancesByReactRootID[t];if(!n){var o=(hasNonRootReactChild(e),internalGetID(e));o&&ReactInstanceHandles.getReactRootIDFromNodeID(o);return!1}return ReactUpdates.batchedUpdates(unmountComponentFromNode,n,e),delete instancesByReactRootID[t],delete containersByReactRootID[t],!0},findReactContainerForID:function(e){var t=ReactInstanceHandles.getReactRootIDFromNodeID(e),n=containersByReactRootID[t];return n},findReactNodeByID:function(e){var t=ReactMount.findReactContainerForID(e);return ReactMount.findComponentRoot(t,e)},getFirstReactDOM:function(e){return findFirstReactDOMImpl(e)},findComponentRoot:function(e,t){var n=findComponentRootReusableArray,o=0,r=findDeepestCachedAncestor(t)||e;for(n[0]=r.firstChild,n.length=1;o<n.length;){for(var a,c=n[o++];c;){var i=ReactMount.getID(c);i?t===i?a=c:ReactInstanceHandles.isAncestorIDOf(i,t)&&(n.length=o=0,n.push(c.firstChild)):n.push(c.firstChild),c=c.nextSibling}if(a)return n.length=0,a}n.length=0,invariant(!1)},_mountImageIntoNode:function(e,t,n,o){if((!t||t.nodeType!==ELEMENT_NODE_TYPE&&t.nodeType!==DOC_NODE_TYPE&&t.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE)&&invariant(!1),n){var r=getReactRootElementInContainer(t);if(ReactMarkupChecksum.canReuseMarkup(e,r))return;var a=r.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);r.removeAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);var c=r.outerHTML;r.setAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME,a);var i=e,u=firstDifferenceIndex(i,c);i.substring(u-20,u+20),c.substring(u-20,u+20);t.nodeType===DOC_NODE_TYPE&&invariant(!1)}if(t.nodeType===DOC_NODE_TYPE&&invariant(!1),o.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);t.appendChild(e)}else setInnerHTML(t,e)},ownerDocumentContextKey:ownerDocumentContextKey,getReactRootID:getReactRootID,getID:getID,setID:setID,getNode:getNode,getNodeFromInstance:getNodeFromInstance,isValid:isValid,purgeID:purgeID};ReactPerf.measureMethods(ReactMount,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),module.exports=ReactMount;

},{"./DOMProperty":33,"./Object.assign":46,"./ReactBrowserEventEmitter":50,"./ReactCurrentOwner":58,"./ReactDOMFeatureFlags":63,"./ReactElement":74,"./ReactEmptyComponentRegistry":77,"./ReactInstanceHandles":83,"./ReactInstanceMap":84,"./ReactMarkupChecksum":86,"./ReactPerf":93,"./ReactReconciler":98,"./ReactUpdateQueue":104,"./ReactUpdates":105,"./instantiateReactComponent":140,"./setInnerHTML":146,"./shouldUpdateReactComponent":148,"./validateDOMNesting":150,"fbjs/lib/containsNode":155,"fbjs/lib/emptyObject":159,"fbjs/lib/invariant":166,"fbjs/lib/warning":175}],88:[function(require,module,exports){
"use strict";function enqueueInsertMarkup(e,n,t){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.INSERT_MARKUP,markupIndex:markupQueue.push(n)-1,content:null,fromIndex:null,toIndex:t})}function enqueueMove(e,n,t){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:n,toIndex:t})}function enqueueRemove(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.REMOVE_NODE,markupIndex:null,content:null,fromIndex:n,toIndex:null})}function enqueueSetMarkup(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.SET_MARKUP,markupIndex:null,content:n,fromIndex:null,toIndex:null})}function enqueueTextContent(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.TEXT_CONTENT,markupIndex:null,content:n,fromIndex:null,toIndex:null})}function processQueue(){updateQueue.length&&(ReactComponentEnvironment.processChildrenUpdates(updateQueue,markupQueue),clearQueue())}function clearQueue(){updateQueue.length=0,markupQueue.length=0}var ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactMultiChildUpdateTypes=require("./ReactMultiChildUpdateTypes"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactReconciler=require("./ReactReconciler"),ReactChildReconciler=require("./ReactChildReconciler"),flattenChildren=require("./flattenChildren"),updateDepth=0,updateQueue=[],markupQueue=[],ReactMultiChild={Mixin:{_reconcilerInstantiateChildren:function(e,n,t){return ReactChildReconciler.instantiateChildren(e,n,t)},_reconcilerUpdateChildren:function(e,n,t,u){var r;return r=flattenChildren(n),ReactChildReconciler.updateChildren(e,r,t,u)},mountChildren:function(e,n,t){var u=this._reconcilerInstantiateChildren(e,n,t);this._renderedChildren=u;var r=[],i=0;for(var o in u)if(u.hasOwnProperty(o)){var d=u[o],a=this._rootNodeID+o,l=ReactReconciler.mountComponent(d,a,n,t);d._mountIndex=i++,r.push(l)}return r},updateTextContent:function(e){updateDepth++;var n=!0;try{var t=this._renderedChildren;ReactChildReconciler.unmountChildren(t);for(var u in t)t.hasOwnProperty(u)&&this._unmountChild(t[u]);this.setTextContent(e),n=!1}finally{updateDepth--,updateDepth||(n?clearQueue():processQueue())}},updateMarkup:function(e){updateDepth++;var n=!0;try{var t=this._renderedChildren;ReactChildReconciler.unmountChildren(t);for(var u in t)t.hasOwnProperty(u)&&this._unmountChildByName(t[u],u);this.setMarkup(e),n=!1}finally{updateDepth--,updateDepth||(n?clearQueue():processQueue())}},updateChildren:function(e,n,t){updateDepth++;var u=!0;try{this._updateChildren(e,n,t),u=!1}finally{updateDepth--,updateDepth||(u?clearQueue():processQueue())}},_updateChildren:function(e,n,t){var u=this._renderedChildren,r=this._reconcilerUpdateChildren(u,e,n,t);if(this._renderedChildren=r,r||u){var i,o=0,d=0;for(i in r)if(r.hasOwnProperty(i)){var a=u&&u[i],l=r[i];a===l?(this.moveChild(a,d,o),o=Math.max(a._mountIndex,o),a._mountIndex=d):(a&&(o=Math.max(a._mountIndex,o),this._unmountChild(a)),this._mountChildByNameAtIndex(l,i,d,n,t)),d++}for(i in u)!u.hasOwnProperty(i)||r&&r.hasOwnProperty(i)||this._unmountChild(u[i])}},unmountChildren:function(){var e=this._renderedChildren;ReactChildReconciler.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,n,t){e._mountIndex<t&&enqueueMove(this._rootNodeID,e._mountIndex,n)},createChild:function(e,n){enqueueInsertMarkup(this._rootNodeID,n,e._mountIndex)},removeChild:function(e){enqueueRemove(this._rootNodeID,e._mountIndex)},setTextContent:function(e){enqueueTextContent(this._rootNodeID,e)},setMarkup:function(e){enqueueSetMarkup(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,n,t,u,r){var i=this._rootNodeID+n,o=ReactReconciler.mountComponent(e,i,u,r);e._mountIndex=t,this.createChild(e,o)},_unmountChild:function(e){this.removeChild(e),e._mountIndex=null}}};module.exports=ReactMultiChild;

},{"./ReactChildReconciler":51,"./ReactComponentEnvironment":56,"./ReactCurrentOwner":58,"./ReactMultiChildUpdateTypes":89,"./ReactReconciler":98,"./flattenChildren":131}],89:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),ReactMultiChildUpdateTypes=keyMirror({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});module.exports=ReactMultiChildUpdateTypes;

},{"fbjs/lib/keyMirror":169}],90:[function(require,module,exports){
"use strict";function getComponentClassForElement(n){if("function"==typeof n.type)return n.type;var e=n.type,t=tagToComponentClass[e];return null==t&&(tagToComponentClass[e]=t=autoGenerateWrapperClass(e)),t}function createInternalComponent(n){return genericComponentClass||invariant(!1),new genericComponentClass(n.type,n.props)}function createInstanceForText(n){return new textComponentClass(n)}function isTextComponent(n){return n instanceof textComponentClass}var assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),autoGenerateWrapperClass=null,genericComponentClass=null,tagToComponentClass={},textComponentClass=null,ReactNativeComponentInjection={injectGenericComponentClass:function(n){genericComponentClass=n},injectTextComponentClass:function(n){textComponentClass=n},injectComponentClasses:function(n){assign(tagToComponentClass,n)}},ReactNativeComponent={getComponentClassForElement:getComponentClassForElement,createInternalComponent:createInternalComponent,createInstanceForText:createInstanceForText,isTextComponent:isTextComponent,injection:ReactNativeComponentInjection};module.exports=ReactNativeComponent;

},{"./Object.assign":46,"fbjs/lib/invariant":166}],91:[function(require,module,exports){
"use strict";function warnTDZ(e,n){}var warning=require("fbjs/lib/warning"),ReactNoopUpdateQueue={isMounted:function(e){return!1},enqueueCallback:function(e,n){},enqueueForceUpdate:function(e){warnTDZ(e,"forceUpdate")},enqueueReplaceState:function(e,n){warnTDZ(e,"replaceState")},enqueueSetState:function(e,n){warnTDZ(e,"setState")},enqueueSetProps:function(e,n){warnTDZ(e,"setProps")},enqueueReplaceProps:function(e,n){warnTDZ(e,"replaceProps")}};module.exports=ReactNoopUpdateQueue;

},{"fbjs/lib/warning":175}],92:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),ReactOwner={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,n,t){ReactOwner.isValidOwner(t)||invariant(!1),t.attachRef(n,e)},removeComponentAsRefFrom:function(e,n,t){ReactOwner.isValidOwner(t)||invariant(!1),t.getPublicInstance().refs[n]===e.getPublicInstance()&&t.detachRef(n)}};module.exports=ReactOwner;

},{"fbjs/lib/invariant":166}],93:[function(require,module,exports){
"use strict";function _noMeasure(e,r,t){return t}var ReactPerf={enableMeasure:!1,storedMeasure:_noMeasure,measureMethods:function(e,r,t){},measure:function(e,r,t){return t},injection:{injectMeasure:function(e){ReactPerf.storedMeasure=e}}};module.exports=ReactPerf;

},{}],94:[function(require,module,exports){
"use strict";var ReactPropTypeLocationNames={};module.exports=ReactPropTypeLocationNames;

},{}],95:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),ReactPropTypeLocations=keyMirror({prop:null,context:null,childContext:null});module.exports=ReactPropTypeLocations;

},{"fbjs/lib/keyMirror":169}],96:[function(require,module,exports){
"use strict";function createChainableTypeChecker(e){function r(r,n,t,a,c,o){if(a=a||ANONYMOUS,o=o||t,null==n[t]){var i=ReactPropTypeLocationNames[c];return r?new Error("Required "+i+" `"+o+"` was not specified in `"+a+"`."):null}return e(n,t,a,c,o)}var n=r.bind(null,!1);return n.isRequired=r.bind(null,!0),n}function createPrimitiveTypeChecker(e){function r(r,n,t,a,c){var o=r[n];if(getPropType(o)!==e){var i=ReactPropTypeLocationNames[a],u=getPreciseType(o);return new Error("Invalid "+i+" `"+c+"` of type `"+u+"` supplied to `"+t+"`, expected `"+e+"`.")}return null}return createChainableTypeChecker(r)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturns(null))}function createArrayOfTypeChecker(e){function r(r,n,t,a,c){var o=r[n];if(!Array.isArray(o)){var i=ReactPropTypeLocationNames[a],u=getPropType(o);return new Error("Invalid "+i+" `"+c+"` of type `"+u+"` supplied to `"+t+"`, expected an array.")}for(var p=0;p<o.length;p++){var l=e(o,p,t,a,c+"["+p+"]","SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(l instanceof Error)return l}return null}return createChainableTypeChecker(r)}function createElementTypeChecker(){function e(e,r,n,t,a){if(!ReactElement.isValidElement(e[r])){var c=ReactPropTypeLocationNames[t];return new Error("Invalid "+c+" `"+a+"` supplied to `"+n+"`, expected a single ReactElement.")}return null}return createChainableTypeChecker(e)}function createInstanceTypeChecker(e){function r(r,n,t,a,c){if(!(r[n]instanceof e)){var o=ReactPropTypeLocationNames[a],i=e.name||ANONYMOUS,u=getClassName(r[n]);return new Error("Invalid "+o+" `"+c+"` of type `"+u+"` supplied to `"+t+"`, expected instance of `"+i+"`.")}return null}return createChainableTypeChecker(r)}function createEnumTypeChecker(e){function r(r,n,t,a,c){for(var o=r[n],i=0;i<e.length;i++)if(o===e[i])return null;var u=ReactPropTypeLocationNames[a],p=JSON.stringify(e);return new Error("Invalid "+u+" `"+c+"` of value `"+o+"` supplied to `"+t+"`, expected one of "+p+".")}return createChainableTypeChecker(Array.isArray(e)?r:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function createObjectOfTypeChecker(e){function r(r,n,t,a,c){var o=r[n],i=getPropType(o);if("object"!==i){var u=ReactPropTypeLocationNames[a];return new Error("Invalid "+u+" `"+c+"` of type `"+i+"` supplied to `"+t+"`, expected an object.")}for(var p in o)if(o.hasOwnProperty(p)){var l=e(o,p,t,a,c+"."+p,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(l instanceof Error)return l}return null}return createChainableTypeChecker(r)}function createUnionTypeChecker(e){function r(r,n,t,a,c){for(var o=0;o<e.length;o++){if(null==(0,e[o])(r,n,t,a,c,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return null}var i=ReactPropTypeLocationNames[a];return new Error("Invalid "+i+" `"+c+"` supplied to `"+t+"`.")}return createChainableTypeChecker(Array.isArray(e)?r:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function createNodeChecker(){function e(e,r,n,t,a){if(!isNode(e[r])){var c=ReactPropTypeLocationNames[t];return new Error("Invalid "+c+" `"+a+"` supplied to `"+n+"`, expected a ReactNode.")}return null}return createChainableTypeChecker(e)}function createShapeTypeChecker(e){function r(r,n,t,a,c){var o=r[n],i=getPropType(o);if("object"!==i){var u=ReactPropTypeLocationNames[a];return new Error("Invalid "+u+" `"+c+"` of type `"+i+"` supplied to `"+t+"`, expected `object`.")}for(var p in e){var l=e[p];if(l){var y=l(o,p,t,a,c+"."+p,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(y)return y}}return null}return createChainableTypeChecker(r)}function isNode(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(isNode);if(null===e||ReactElement.isValidElement(e))return!0;var r=getIteratorFn(e);if(!r)return!1;var n,t=r.call(e);if(r!==e.entries){for(;!(n=t.next()).done;)if(!isNode(n.value))return!1}else for(;!(n=t.next()).done;){var a=n.value;if(a&&!isNode(a[1]))return!1}return!0;default:return!1}}function getPropType(e){var r=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":r}function getPreciseType(e){var r=getPropType(e);if("object"===r){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return r}function getClassName(e){return e.constructor&&e.constructor.name?e.constructor.name:"<<anonymous>>"}var ReactElement=require("./ReactElement"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),emptyFunction=require("fbjs/lib/emptyFunction"),getIteratorFn=require("./getIteratorFn"),ANONYMOUS="<<anonymous>>",ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};module.exports=ReactPropTypes;

},{"./ReactElement":74,"./ReactPropTypeLocationNames":94,"./getIteratorFn":137,"fbjs/lib/emptyFunction":158}],97:[function(require,module,exports){
"use strict";function ReactReconcileTransaction(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!e&&ReactDOMFeatureFlags.useCreateElement}var CallbackQueue=require("./CallbackQueue"),PooledClass=require("./PooledClass"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactDOMFeatureFlags=require("./ReactDOMFeatureFlags"),ReactInputSelection=require("./ReactInputSelection"),Transaction=require("./Transaction"),assign=require("./Object.assign"),SELECTION_RESTORATION={initialize:ReactInputSelection.getSelectionInformation,close:ReactInputSelection.restoreSelection},EVENT_SUPPRESSION={initialize:function(){var e=ReactBrowserEventEmitter.isEnabled();return ReactBrowserEventEmitter.setEnabled(!1),e},close:function(e){ReactBrowserEventEmitter.setEnabled(e)}},ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},TRANSACTION_WRAPPERS=[SELECTION_RESTORATION,EVENT_SUPPRESSION,ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactReconcileTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactReconcileTransaction),module.exports=ReactReconcileTransaction;

},{"./CallbackQueue":29,"./Object.assign":46,"./PooledClass":47,"./ReactBrowserEventEmitter":50,"./ReactDOMFeatureFlags":63,"./ReactInputSelection":82,"./Transaction":122}],98:[function(require,module,exports){
"use strict";function attachRefs(){ReactRef.attachRefs(this,this._currentElement)}var ReactRef=require("./ReactRef"),ReactReconciler={mountComponent:function(e,t,n,c){var r=e.mountComponent(t,n,c);return e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(attachRefs,e),r},unmountComponent:function(e){ReactRef.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,c){var r=e._currentElement;if(t!==r||c!==e._context){var a=ReactRef.shouldUpdateRefs(r,t);a&&ReactRef.detachRefs(e,r),e.receiveComponent(t,n,c),a&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(attachRefs,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}};module.exports=ReactReconciler;

},{"./ReactRef":99}],99:[function(require,module,exports){
"use strict";function attachRef(e,n,t){"function"==typeof e?e(n.getPublicInstance()):ReactOwner.addComponentAsRefTo(n,e,t)}function detachRef(e,n,t){"function"==typeof e?e(null):ReactOwner.removeComponentAsRefFrom(n,e,t)}var ReactOwner=require("./ReactOwner"),ReactRef={};ReactRef.attachRefs=function(e,n){if(null!==n&&!1!==n){var t=n.ref;null!=t&&attachRef(t,e,n._owner)}},ReactRef.shouldUpdateRefs=function(e,n){var t=null===e||!1===e,f=null===n||!1===n;return t||f||n._owner!==e._owner||n.ref!==e.ref},ReactRef.detachRefs=function(e,n){if(null!==n&&!1!==n){var t=n.ref;null!=t&&detachRef(t,e,n._owner)}},module.exports=ReactRef;

},{"./ReactOwner":92}],100:[function(require,module,exports){
"use strict";var ReactRootIndexInjection={injectCreateReactRootIndex:function(e){ReactRootIndex.createReactRootIndex=e}},ReactRootIndex={createReactRootIndex:null,injection:ReactRootIndexInjection};module.exports=ReactRootIndex;

},{}],101:[function(require,module,exports){
"use strict";var ReactServerBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(t){}};module.exports=ReactServerBatchingStrategy;

},{}],102:[function(require,module,exports){
"use strict";function renderToString(e){ReactElement.isValidElement(e)||invariant(!1);var t;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var a=ReactInstanceHandles.createReactRootID();return t=ReactServerRenderingTransaction.getPooled(!1),t.perform(function(){var n=instantiateReactComponent(e,null),r=n.mountComponent(a,t,emptyObject);return ReactMarkupChecksum.addChecksumToMarkup(r)},null)}finally{ReactServerRenderingTransaction.release(t),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}function renderToStaticMarkup(e){ReactElement.isValidElement(e)||invariant(!1);var t;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var a=ReactInstanceHandles.createReactRootID();return t=ReactServerRenderingTransaction.getPooled(!0),t.perform(function(){return instantiateReactComponent(e,null).mountComponent(a,t,emptyObject)},null)}finally{ReactServerRenderingTransaction.release(t),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}var ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy"),ReactElement=require("./ReactElement"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMarkupChecksum=require("./ReactMarkupChecksum"),ReactServerBatchingStrategy=require("./ReactServerBatchingStrategy"),ReactServerRenderingTransaction=require("./ReactServerRenderingTransaction"),ReactUpdates=require("./ReactUpdates"),emptyObject=require("fbjs/lib/emptyObject"),instantiateReactComponent=require("./instantiateReactComponent"),invariant=require("fbjs/lib/invariant");module.exports={renderToString:renderToString,renderToStaticMarkup:renderToStaticMarkup};

},{"./ReactDefaultBatchingStrategy":72,"./ReactElement":74,"./ReactInstanceHandles":83,"./ReactMarkupChecksum":86,"./ReactServerBatchingStrategy":101,"./ReactServerRenderingTransaction":103,"./ReactUpdates":105,"./instantiateReactComponent":140,"fbjs/lib/emptyObject":159,"fbjs/lib/invariant":166}],103:[function(require,module,exports){
"use strict";function ReactServerRenderingTransaction(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!1}var PooledClass=require("./PooledClass"),CallbackQueue=require("./CallbackQueue"),Transaction=require("./Transaction"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:emptyFunction},TRANSACTION_WRAPPERS=[ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactServerRenderingTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactServerRenderingTransaction),module.exports=ReactServerRenderingTransaction;

},{"./CallbackQueue":29,"./Object.assign":46,"./PooledClass":47,"./Transaction":122,"fbjs/lib/emptyFunction":158}],104:[function(require,module,exports){
"use strict";function enqueueUpdate(e){ReactUpdates.enqueueUpdate(e)}function getInternalInstanceReadyForUpdate(e,n){var t=ReactInstanceMap.get(e);return t||null}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceMap=require("./ReactInstanceMap"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactUpdateQueue={isMounted:function(e){var n=ReactInstanceMap.get(e);return!!n&&!!n._renderedComponent},enqueueCallback:function(e,n){"function"!=typeof n&&invariant(!1);var t=getInternalInstanceReadyForUpdate(e);if(!t)return null;t._pendingCallbacks?t._pendingCallbacks.push(n):t._pendingCallbacks=[n],enqueueUpdate(t)},enqueueCallbackInternal:function(e,n){"function"!=typeof n&&invariant(!1),e._pendingCallbacks?e._pendingCallbacks.push(n):e._pendingCallbacks=[n],enqueueUpdate(e)},enqueueForceUpdate:function(e){var n=getInternalInstanceReadyForUpdate(e,"forceUpdate");n&&(n._pendingForceUpdate=!0,enqueueUpdate(n))},enqueueReplaceState:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"replaceState");t&&(t._pendingStateQueue=[n],t._pendingReplaceState=!0,enqueueUpdate(t))},enqueueSetState:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"setState");if(t){(t._pendingStateQueue||(t._pendingStateQueue=[])).push(n),enqueueUpdate(t)}},enqueueSetProps:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"setProps");t&&ReactUpdateQueue.enqueueSetPropsInternal(t,n)},enqueueSetPropsInternal:function(e,n){var t=e._topLevelWrapper;t||invariant(!1);var a=t._pendingElement||t._currentElement,r=a.props,u=assign({},r.props,n);t._pendingElement=ReactElement.cloneAndReplaceProps(a,ReactElement.cloneAndReplaceProps(r,u)),enqueueUpdate(t)},enqueueReplaceProps:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"replaceProps");t&&ReactUpdateQueue.enqueueReplacePropsInternal(t,n)},enqueueReplacePropsInternal:function(e,n){var t=e._topLevelWrapper;t||invariant(!1);var a=t._pendingElement||t._currentElement,r=a.props;t._pendingElement=ReactElement.cloneAndReplaceProps(a,ReactElement.cloneAndReplaceProps(r,n)),enqueueUpdate(t)},enqueueElementInternal:function(e,n){e._pendingElement=n,enqueueUpdate(e)}};module.exports=ReactUpdateQueue;

},{"./Object.assign":46,"./ReactCurrentOwner":58,"./ReactElement":74,"./ReactInstanceMap":84,"./ReactUpdates":105,"fbjs/lib/invariant":166,"fbjs/lib/warning":175}],105:[function(require,module,exports){
"use strict";function ensureInjected(){ReactUpdates.ReactReconcileTransaction&&batchingStrategy||invariant(!1)}function ReactUpdatesFlushTransaction(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=CallbackQueue.getPooled(),this.reconcileTransaction=ReactUpdates.ReactReconcileTransaction.getPooled(!1)}function batchedUpdates(e,t,a,n,i,c){ensureInjected(),batchingStrategy.batchedUpdates(e,t,a,n,i,c)}function mountOrderComparator(e,t){return e._mountOrder-t._mountOrder}function runBatchedUpdates(e){var t=e.dirtyComponentsLength;t!==dirtyComponents.length&&invariant(!1),dirtyComponents.sort(mountOrderComparator);for(var a=0;a<t;a++){var n=dirtyComponents[a],i=n._pendingCallbacks;if(n._pendingCallbacks=null,ReactReconciler.performUpdateIfNecessary(n,e.reconcileTransaction),i)for(var c=0;c<i.length;c++)e.callbackQueue.enqueue(i[c],n.getPublicInstance())}}function enqueueUpdate(e){if(ensureInjected(),!batchingStrategy.isBatchingUpdates)return void batchingStrategy.batchedUpdates(enqueueUpdate,e);dirtyComponents.push(e)}function asap(e,t){batchingStrategy.isBatchingUpdates||invariant(!1),asapCallbackQueue.enqueue(e,t),asapEnqueued=!0}var CallbackQueue=require("./CallbackQueue"),PooledClass=require("./PooledClass"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),Transaction=require("./Transaction"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),dirtyComponents=[],asapCallbackQueue=CallbackQueue.getPooled(),asapEnqueued=!1,batchingStrategy=null,NESTED_UPDATES={initialize:function(){this.dirtyComponentsLength=dirtyComponents.length},close:function(){this.dirtyComponentsLength!==dirtyComponents.length?(dirtyComponents.splice(0,this.dirtyComponentsLength),flushBatchedUpdates()):dirtyComponents.length=0}},UPDATE_QUEUEING={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},TRANSACTION_WRAPPERS=[NESTED_UPDATES,UPDATE_QUEUEING];assign(ReactUpdatesFlushTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},destructor:function(){this.dirtyComponentsLength=null,CallbackQueue.release(this.callbackQueue),this.callbackQueue=null,ReactUpdates.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,a){return Transaction.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,a)}}),PooledClass.addPoolingTo(ReactUpdatesFlushTransaction);var flushBatchedUpdates=function(){for(;dirtyComponents.length||asapEnqueued;){if(dirtyComponents.length){var e=ReactUpdatesFlushTransaction.getPooled();e.perform(runBatchedUpdates,null,e),ReactUpdatesFlushTransaction.release(e)}if(asapEnqueued){asapEnqueued=!1;var t=asapCallbackQueue;asapCallbackQueue=CallbackQueue.getPooled(),t.notifyAll(),CallbackQueue.release(t)}}};flushBatchedUpdates=ReactPerf.measure("ReactUpdates","flushBatchedUpdates",flushBatchedUpdates);var ReactUpdatesInjection={injectReconcileTransaction:function(e){e||invariant(!1),ReactUpdates.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e||invariant(!1),"function"!=typeof e.batchedUpdates&&invariant(!1),"boolean"!=typeof e.isBatchingUpdates&&invariant(!1),batchingStrategy=e}},ReactUpdates={ReactReconcileTransaction:null,batchedUpdates:batchedUpdates,enqueueUpdate:enqueueUpdate,flushBatchedUpdates:flushBatchedUpdates,injection:ReactUpdatesInjection,asap:asap};module.exports=ReactUpdates;

},{"./CallbackQueue":29,"./Object.assign":46,"./PooledClass":47,"./ReactPerf":93,"./ReactReconciler":98,"./Transaction":122,"fbjs/lib/invariant":166}],106:[function(require,module,exports){
"use strict";module.exports="0.14.9";

},{}],107:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,NS={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},SVGDOMPropertyConfig={Properties:{clipPath:MUST_USE_ATTRIBUTE,cx:MUST_USE_ATTRIBUTE,cy:MUST_USE_ATTRIBUTE,d:MUST_USE_ATTRIBUTE,dx:MUST_USE_ATTRIBUTE,dy:MUST_USE_ATTRIBUTE,fill:MUST_USE_ATTRIBUTE,fillOpacity:MUST_USE_ATTRIBUTE,fontFamily:MUST_USE_ATTRIBUTE,fontSize:MUST_USE_ATTRIBUTE,fx:MUST_USE_ATTRIBUTE,fy:MUST_USE_ATTRIBUTE,gradientTransform:MUST_USE_ATTRIBUTE,gradientUnits:MUST_USE_ATTRIBUTE,markerEnd:MUST_USE_ATTRIBUTE,markerMid:MUST_USE_ATTRIBUTE,markerStart:MUST_USE_ATTRIBUTE,offset:MUST_USE_ATTRIBUTE,opacity:MUST_USE_ATTRIBUTE,patternContentUnits:MUST_USE_ATTRIBUTE,patternUnits:MUST_USE_ATTRIBUTE,points:MUST_USE_ATTRIBUTE,preserveAspectRatio:MUST_USE_ATTRIBUTE,r:MUST_USE_ATTRIBUTE,rx:MUST_USE_ATTRIBUTE,ry:MUST_USE_ATTRIBUTE,spreadMethod:MUST_USE_ATTRIBUTE,stopColor:MUST_USE_ATTRIBUTE,stopOpacity:MUST_USE_ATTRIBUTE,stroke:MUST_USE_ATTRIBUTE,strokeDasharray:MUST_USE_ATTRIBUTE,strokeLinecap:MUST_USE_ATTRIBUTE,strokeOpacity:MUST_USE_ATTRIBUTE,strokeWidth:MUST_USE_ATTRIBUTE,textAnchor:MUST_USE_ATTRIBUTE,transform:MUST_USE_ATTRIBUTE,version:MUST_USE_ATTRIBUTE,viewBox:MUST_USE_ATTRIBUTE,x1:MUST_USE_ATTRIBUTE,x2:MUST_USE_ATTRIBUTE,x:MUST_USE_ATTRIBUTE,xlinkActuate:MUST_USE_ATTRIBUTE,xlinkArcrole:MUST_USE_ATTRIBUTE,xlinkHref:MUST_USE_ATTRIBUTE,xlinkRole:MUST_USE_ATTRIBUTE,xlinkShow:MUST_USE_ATTRIBUTE,xlinkTitle:MUST_USE_ATTRIBUTE,xlinkType:MUST_USE_ATTRIBUTE,xmlBase:MUST_USE_ATTRIBUTE,xmlLang:MUST_USE_ATTRIBUTE,xmlSpace:MUST_USE_ATTRIBUTE,y1:MUST_USE_ATTRIBUTE,y2:MUST_USE_ATTRIBUTE,y:MUST_USE_ATTRIBUTE},DOMAttributeNamespaces:{xlinkActuate:NS.xlink,xlinkArcrole:NS.xlink,xlinkHref:NS.xlink,xlinkRole:NS.xlink,xlinkShow:NS.xlink,xlinkTitle:NS.xlink,xlinkType:NS.xlink,xmlBase:NS.xml,xmlLang:NS.xml,xmlSpace:NS.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};module.exports=SVGDOMPropertyConfig;

},{"./DOMProperty":33}],108:[function(require,module,exports){
"use strict";function getSelection(e){if("selectionStart"in e&&ReactInputSelection.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function constructSelectEvent(e,t){if(mouseDown||null==activeElement||activeElement!==getActiveElement())return null;var n=getSelection(activeElement);if(!lastSelection||!shallowEqual(lastSelection,n)){lastSelection=n;var o=SyntheticEvent.getPooled(eventTypes.select,activeElementID,e,t);return o.type="select",o.target=activeElement,EventPropagators.accumulateTwoPhaseDispatches(o),o}return null}var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactInputSelection=require("./ReactInputSelection"),SyntheticEvent=require("./SyntheticEvent"),getActiveElement=require("fbjs/lib/getActiveElement"),isTextInputElement=require("./isTextInputElement"),keyOf=require("fbjs/lib/keyOf"),shallowEqual=require("fbjs/lib/shallowEqual"),topLevelTypes=EventConstants.topLevelTypes,skipSelectionChangeEvent=ExecutionEnvironment.canUseDOM&&"documentMode"in document&&document.documentMode<=11,eventTypes={select:{phasedRegistrationNames:{bubbled:keyOf({onSelect:null}),captured:keyOf({onSelectCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topContextMenu,topLevelTypes.topFocus,topLevelTypes.topKeyDown,topLevelTypes.topMouseDown,topLevelTypes.topMouseUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,lastSelection=null,mouseDown=!1,hasListener=!1,ON_SELECT_KEY=keyOf({onSelect:null}),SelectEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,o,l){if(!hasListener)return null;switch(e){case topLevelTypes.topFocus:(isTextInputElement(t)||"true"===t.contentEditable)&&(activeElement=t,activeElementID=n,lastSelection=null);break;case topLevelTypes.topBlur:activeElement=null,activeElementID=null,lastSelection=null;break;case topLevelTypes.topMouseDown:mouseDown=!0;break;case topLevelTypes.topContextMenu:case topLevelTypes.topMouseUp:return mouseDown=!1,constructSelectEvent(o,l);case topLevelTypes.topSelectionChange:if(skipSelectionChangeEvent)break;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:return constructSelectEvent(o,l)}return null},didPutListener:function(e,t,n){t===ON_SELECT_KEY&&(hasListener=!0)}};module.exports=SelectEventPlugin;

},{"./EventConstants":38,"./EventPropagators":42,"./ReactInputSelection":82,"./SyntheticEvent":114,"./isTextInputElement":142,"fbjs/lib/ExecutionEnvironment":152,"fbjs/lib/getActiveElement":161,"fbjs/lib/keyOf":170,"fbjs/lib/shallowEqual":173}],109:[function(require,module,exports){
"use strict";var GLOBAL_MOUNT_POINT_MAX=Math.pow(2,53),ServerReactRootIndex={createReactRootIndex:function(){return Math.ceil(Math.random()*GLOBAL_MOUNT_POINT_MAX)}};module.exports=ServerReactRootIndex;

},{}],110:[function(require,module,exports){
"use strict";var EventConstants=require("./EventConstants"),EventListener=require("fbjs/lib/EventListener"),EventPropagators=require("./EventPropagators"),ReactMount=require("./ReactMount"),SyntheticClipboardEvent=require("./SyntheticClipboardEvent"),SyntheticEvent=require("./SyntheticEvent"),SyntheticFocusEvent=require("./SyntheticFocusEvent"),SyntheticKeyboardEvent=require("./SyntheticKeyboardEvent"),SyntheticMouseEvent=require("./SyntheticMouseEvent"),SyntheticDragEvent=require("./SyntheticDragEvent"),SyntheticTouchEvent=require("./SyntheticTouchEvent"),SyntheticUIEvent=require("./SyntheticUIEvent"),SyntheticWheelEvent=require("./SyntheticWheelEvent"),emptyFunction=require("fbjs/lib/emptyFunction"),getEventCharCode=require("./getEventCharCode"),invariant=require("fbjs/lib/invariant"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,eventTypes={abort:{phasedRegistrationNames:{bubbled:keyOf({onAbort:!0}),captured:keyOf({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:keyOf({onBlur:!0}),captured:keyOf({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:keyOf({onCanPlay:!0}),captured:keyOf({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:keyOf({onCanPlayThrough:!0}),captured:keyOf({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:keyOf({onClick:!0}),captured:keyOf({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:keyOf({onContextMenu:!0}),captured:keyOf({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:keyOf({onCopy:!0}),captured:keyOf({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:keyOf({onCut:!0}),captured:keyOf({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:keyOf({onDoubleClick:!0}),captured:keyOf({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:keyOf({onDrag:!0}),captured:keyOf({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:keyOf({onDragEnd:!0}),captured:keyOf({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:keyOf({onDragEnter:!0}),captured:keyOf({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:keyOf({onDragExit:!0}),captured:keyOf({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:keyOf({onDragLeave:!0}),captured:keyOf({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:keyOf({onDragOver:!0}),captured:keyOf({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:keyOf({onDragStart:!0}),captured:keyOf({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:keyOf({onDrop:!0}),captured:keyOf({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:keyOf({onDurationChange:!0}),captured:keyOf({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:keyOf({onEmptied:!0}),captured:keyOf({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:keyOf({onEncrypted:!0}),captured:keyOf({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:keyOf({onEnded:!0}),captured:keyOf({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:keyOf({onError:!0}),captured:keyOf({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:keyOf({onFocus:!0}),captured:keyOf({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:keyOf({onInput:!0}),captured:keyOf({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:keyOf({onKeyDown:!0}),captured:keyOf({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:keyOf({onKeyPress:!0}),captured:keyOf({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:keyOf({onKeyUp:!0}),captured:keyOf({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:keyOf({onLoad:!0}),captured:keyOf({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:keyOf({onLoadedData:!0}),captured:keyOf({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:keyOf({onLoadedMetadata:!0}),captured:keyOf({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:keyOf({onLoadStart:!0}),captured:keyOf({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:keyOf({onMouseDown:!0}),captured:keyOf({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:keyOf({onMouseMove:!0}),captured:keyOf({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:keyOf({onMouseOut:!0}),captured:keyOf({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:keyOf({onMouseOver:!0}),captured:keyOf({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:keyOf({onMouseUp:!0}),captured:keyOf({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:keyOf({onPaste:!0}),captured:keyOf({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:keyOf({onPause:!0}),captured:keyOf({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:keyOf({onPlay:!0}),captured:keyOf({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:keyOf({onPlaying:!0}),captured:keyOf({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:keyOf({onProgress:!0}),captured:keyOf({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:keyOf({onRateChange:!0}),captured:keyOf({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:keyOf({onReset:!0}),captured:keyOf({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:keyOf({onScroll:!0}),captured:keyOf({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:keyOf({onSeeked:!0}),captured:keyOf({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:keyOf({onSeeking:!0}),captured:keyOf({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:keyOf({onStalled:!0}),captured:keyOf({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:keyOf({onSubmit:!0}),captured:keyOf({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:keyOf({onSuspend:!0}),captured:keyOf({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:keyOf({onTimeUpdate:!0}),captured:keyOf({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:keyOf({onTouchCancel:!0}),captured:keyOf({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:keyOf({onTouchEnd:!0}),captured:keyOf({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:keyOf({onTouchMove:!0}),captured:keyOf({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:keyOf({onTouchStart:!0}),captured:keyOf({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:keyOf({onVolumeChange:!0}),captured:keyOf({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:keyOf({onWaiting:!0}),captured:keyOf({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:keyOf({onWheel:!0}),captured:keyOf({onWheelCapture:!0})}}},topLevelEventsToDispatchConfig={topAbort:eventTypes.abort,topBlur:eventTypes.blur,topCanPlay:eventTypes.canPlay,topCanPlayThrough:eventTypes.canPlayThrough,topClick:eventTypes.click,topContextMenu:eventTypes.contextMenu,topCopy:eventTypes.copy,topCut:eventTypes.cut,topDoubleClick:eventTypes.doubleClick,topDrag:eventTypes.drag,topDragEnd:eventTypes.dragEnd,topDragEnter:eventTypes.dragEnter,topDragExit:eventTypes.dragExit,topDragLeave:eventTypes.dragLeave,topDragOver:eventTypes.dragOver,topDragStart:eventTypes.dragStart,topDrop:eventTypes.drop,topDurationChange:eventTypes.durationChange,topEmptied:eventTypes.emptied,topEncrypted:eventTypes.encrypted,topEnded:eventTypes.ended,topError:eventTypes.error,topFocus:eventTypes.focus,topInput:eventTypes.input,topKeyDown:eventTypes.keyDown,topKeyPress:eventTypes.keyPress,topKeyUp:eventTypes.keyUp,topLoad:eventTypes.load,topLoadedData:eventTypes.loadedData,topLoadedMetadata:eventTypes.loadedMetadata,topLoadStart:eventTypes.loadStart,topMouseDown:eventTypes.mouseDown,topMouseMove:eventTypes.mouseMove,topMouseOut:eventTypes.mouseOut,topMouseOver:eventTypes.mouseOver,topMouseUp:eventTypes.mouseUp,topPaste:eventTypes.paste,topPause:eventTypes.pause,topPlay:eventTypes.play,topPlaying:eventTypes.playing,topProgress:eventTypes.progress,topRateChange:eventTypes.rateChange,topReset:eventTypes.reset,topScroll:eventTypes.scroll,topSeeked:eventTypes.seeked,topSeeking:eventTypes.seeking,topStalled:eventTypes.stalled,topSubmit:eventTypes.submit,topSuspend:eventTypes.suspend,topTimeUpdate:eventTypes.timeUpdate,topTouchCancel:eventTypes.touchCancel,topTouchEnd:eventTypes.touchEnd,topTouchMove:eventTypes.touchMove,topTouchStart:eventTypes.touchStart,topVolumeChange:eventTypes.volumeChange,topWaiting:eventTypes.waiting,topWheel:eventTypes.wheel};for(var type in topLevelEventsToDispatchConfig)topLevelEventsToDispatchConfig[type].dependencies=[type];var ON_CLICK_KEY=keyOf({onClick:null}),onClickListeners={},SimpleEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,a,o,p){var s=topLevelEventsToDispatchConfig[e];if(!s)return null;var n;switch(e){case topLevelTypes.topAbort:case topLevelTypes.topCanPlay:case topLevelTypes.topCanPlayThrough:case topLevelTypes.topDurationChange:case topLevelTypes.topEmptied:case topLevelTypes.topEncrypted:case topLevelTypes.topEnded:case topLevelTypes.topError:case topLevelTypes.topInput:case topLevelTypes.topLoad:case topLevelTypes.topLoadedData:case topLevelTypes.topLoadedMetadata:case topLevelTypes.topLoadStart:case topLevelTypes.topPause:case topLevelTypes.topPlay:case topLevelTypes.topPlaying:case topLevelTypes.topProgress:case topLevelTypes.topRateChange:case topLevelTypes.topReset:case topLevelTypes.topSeeked:case topLevelTypes.topSeeking:case topLevelTypes.topStalled:case topLevelTypes.topSubmit:case topLevelTypes.topSuspend:case topLevelTypes.topTimeUpdate:case topLevelTypes.topVolumeChange:case topLevelTypes.topWaiting:n=SyntheticEvent;break;case topLevelTypes.topKeyPress:if(0===getEventCharCode(o))return null;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:n=SyntheticKeyboardEvent;break;case topLevelTypes.topBlur:case topLevelTypes.topFocus:n=SyntheticFocusEvent;break;case topLevelTypes.topClick:if(2===o.button)return null;case topLevelTypes.topContextMenu:case topLevelTypes.topDoubleClick:case topLevelTypes.topMouseDown:case topLevelTypes.topMouseMove:case topLevelTypes.topMouseOut:case topLevelTypes.topMouseOver:case topLevelTypes.topMouseUp:n=SyntheticMouseEvent;break;case topLevelTypes.topDrag:case topLevelTypes.topDragEnd:case topLevelTypes.topDragEnter:case topLevelTypes.topDragExit:case topLevelTypes.topDragLeave:case topLevelTypes.topDragOver:case topLevelTypes.topDragStart:case topLevelTypes.topDrop:n=SyntheticDragEvent;break;case topLevelTypes.topTouchCancel:case topLevelTypes.topTouchEnd:case topLevelTypes.topTouchMove:case topLevelTypes.topTouchStart:n=SyntheticTouchEvent;break;case topLevelTypes.topScroll:n=SyntheticUIEvent;break;case topLevelTypes.topWheel:n=SyntheticWheelEvent;break;case topLevelTypes.topCopy:case topLevelTypes.topCut:case topLevelTypes.topPaste:n=SyntheticClipboardEvent}n||invariant(!1);var r=n.getPooled(s,a,o,p);return EventPropagators.accumulateTwoPhaseDispatches(r),r},didPutListener:function(e,t,a){if(t===ON_CLICK_KEY){var o=ReactMount.getNode(e);onClickListeners[e]||(onClickListeners[e]=EventListener.listen(o,"click",emptyFunction))}},willDeleteListener:function(e,t){t===ON_CLICK_KEY&&(onClickListeners[e].remove(),delete onClickListeners[e])}};module.exports=SimpleEventPlugin;

},{"./EventConstants":38,"./EventPropagators":42,"./ReactMount":87,"./SyntheticClipboardEvent":111,"./SyntheticDragEvent":113,"./SyntheticEvent":114,"./SyntheticFocusEvent":115,"./SyntheticKeyboardEvent":117,"./SyntheticMouseEvent":118,"./SyntheticTouchEvent":119,"./SyntheticUIEvent":120,"./SyntheticWheelEvent":121,"./getEventCharCode":133,"fbjs/lib/EventListener":151,"fbjs/lib/emptyFunction":158,"fbjs/lib/invariant":166,"fbjs/lib/keyOf":170}],111:[function(require,module,exports){
"use strict";function SyntheticClipboardEvent(t,e,n,a){SyntheticEvent.call(this,t,e,n,a)}var SyntheticEvent=require("./SyntheticEvent"),ClipboardEventInterface={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};SyntheticEvent.augmentClass(SyntheticClipboardEvent,ClipboardEventInterface),module.exports=SyntheticClipboardEvent;

},{"./SyntheticEvent":114}],112:[function(require,module,exports){
"use strict";function SyntheticCompositionEvent(t,n,e,i){SyntheticEvent.call(this,t,n,e,i)}var SyntheticEvent=require("./SyntheticEvent"),CompositionEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticCompositionEvent,CompositionEventInterface),module.exports=SyntheticCompositionEvent;

},{"./SyntheticEvent":114}],113:[function(require,module,exports){
"use strict";function SyntheticDragEvent(t,e,n,a){SyntheticMouseEvent.call(this,t,e,n,a)}var SyntheticMouseEvent=require("./SyntheticMouseEvent"),DragEventInterface={dataTransfer:null};SyntheticMouseEvent.augmentClass(SyntheticDragEvent,DragEventInterface),module.exports=SyntheticDragEvent;

},{"./SyntheticMouseEvent":118}],114:[function(require,module,exports){
"use strict";function SyntheticEvent(t,e,n,r){this.dispatchConfig=t,this.dispatchMarker=e,this.nativeEvent=n;var a=this.constructor.Interface;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i?this[s]=i(n):"target"===s?this.target=r:this[s]=n[s]}var o=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;this.isDefaultPrevented=o?emptyFunction.thatReturnsTrue:emptyFunction.thatReturnsFalse,this.isPropagationStopped=emptyFunction.thatReturnsFalse}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),warning=require("fbjs/lib/warning"),EventInterface={type:null,target:null,currentTarget:emptyFunction.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};assign(SyntheticEvent.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=emptyFunction.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=emptyFunction.thatReturnsTrue)},persist:function(){this.isPersistent=emptyFunction.thatReturnsTrue},isPersistent:emptyFunction.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),SyntheticEvent.Interface=EventInterface,SyntheticEvent.augmentClass=function(t,e){var n=this,r=Object.create(n.prototype);assign(r,t.prototype),t.prototype=r,t.prototype.constructor=t,t.Interface=assign({},n.Interface,e),t.augmentClass=n.augmentClass,PooledClass.addPoolingTo(t,PooledClass.fourArgumentPooler)},PooledClass.addPoolingTo(SyntheticEvent,PooledClass.fourArgumentPooler),module.exports=SyntheticEvent;

},{"./Object.assign":46,"./PooledClass":47,"fbjs/lib/emptyFunction":158,"fbjs/lib/warning":175}],115:[function(require,module,exports){
"use strict";function SyntheticFocusEvent(t,e,n,c){SyntheticUIEvent.call(this,t,e,n,c)}var SyntheticUIEvent=require("./SyntheticUIEvent"),FocusEventInterface={relatedTarget:null};SyntheticUIEvent.augmentClass(SyntheticFocusEvent,FocusEventInterface),module.exports=SyntheticFocusEvent;

},{"./SyntheticUIEvent":120}],116:[function(require,module,exports){
"use strict";function SyntheticInputEvent(t,n,e,c){SyntheticEvent.call(this,t,n,e,c)}var SyntheticEvent=require("./SyntheticEvent"),InputEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticInputEvent,InputEventInterface),module.exports=SyntheticInputEvent;

},{"./SyntheticEvent":114}],117:[function(require,module,exports){
"use strict";function SyntheticKeyboardEvent(e,t,n,r){SyntheticUIEvent.call(this,e,t,n,r)}var SyntheticUIEvent=require("./SyntheticUIEvent"),getEventCharCode=require("./getEventCharCode"),getEventKey=require("./getEventKey"),getEventModifierState=require("./getEventModifierState"),KeyboardEventInterface={key:getEventKey,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:getEventModifierState,charCode:function(e){return"keypress"===e.type?getEventCharCode(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?getEventCharCode(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};SyntheticUIEvent.augmentClass(SyntheticKeyboardEvent,KeyboardEventInterface),module.exports=SyntheticKeyboardEvent;

},{"./SyntheticUIEvent":120,"./getEventCharCode":133,"./getEventKey":134,"./getEventModifierState":135}],118:[function(require,module,exports){
"use strict";function SyntheticMouseEvent(e,t,n,r){SyntheticUIEvent.call(this,e,t,n,r)}var SyntheticUIEvent=require("./SyntheticUIEvent"),ViewportMetrics=require("./ViewportMetrics"),getEventModifierState=require("./getEventModifierState"),MouseEventInterface={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:getEventModifierState,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+ViewportMetrics.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+ViewportMetrics.currentScrollTop}};SyntheticUIEvent.augmentClass(SyntheticMouseEvent,MouseEventInterface),module.exports=SyntheticMouseEvent;

},{"./SyntheticUIEvent":120,"./ViewportMetrics":123,"./getEventModifierState":135}],119:[function(require,module,exports){
"use strict";function SyntheticTouchEvent(e,t,n,c){SyntheticUIEvent.call(this,e,t,n,c)}var SyntheticUIEvent=require("./SyntheticUIEvent"),getEventModifierState=require("./getEventModifierState"),TouchEventInterface={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:getEventModifierState};SyntheticUIEvent.augmentClass(SyntheticTouchEvent,TouchEventInterface),module.exports=SyntheticTouchEvent;

},{"./SyntheticUIEvent":120,"./getEventModifierState":135}],120:[function(require,module,exports){
"use strict";function SyntheticUIEvent(e,t,n,i){SyntheticEvent.call(this,e,t,n,i)}var SyntheticEvent=require("./SyntheticEvent"),getEventTarget=require("./getEventTarget"),UIEventInterface={view:function(e){if(e.view)return e.view;var t=getEventTarget(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};SyntheticEvent.augmentClass(SyntheticUIEvent,UIEventInterface),module.exports=SyntheticUIEvent;

},{"./SyntheticEvent":114,"./getEventTarget":136}],121:[function(require,module,exports){
"use strict";function SyntheticWheelEvent(e,t,n,l){SyntheticMouseEvent.call(this,e,t,n,l)}var SyntheticMouseEvent=require("./SyntheticMouseEvent"),WheelEventInterface={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};SyntheticMouseEvent.augmentClass(SyntheticWheelEvent,WheelEventInterface),module.exports=SyntheticWheelEvent;

},{"./SyntheticMouseEvent":118}],122:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),Mixin={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(i,t,a,n,r,s,l,e){this.isInTransaction()&&invariant(!1);var c,o;try{this._isInTransaction=!0,c=!0,this.initializeAll(0),o=i.call(t,a,n,r,s,l,e),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(i){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return o},initializeAll:function(i){for(var t=this.transactionWrappers,a=i;a<t.length;a++){var n=t[a];try{this.wrapperInitData[a]=Transaction.OBSERVED_ERROR,this.wrapperInitData[a]=n.initialize?n.initialize.call(this):null}finally{if(this.wrapperInitData[a]===Transaction.OBSERVED_ERROR)try{this.initializeAll(a+1)}catch(i){}}}},closeAll:function(i){this.isInTransaction()||invariant(!1);for(var t=this.transactionWrappers,a=i;a<t.length;a++){var n,r=t[a],s=this.wrapperInitData[a];try{n=!0,s!==Transaction.OBSERVED_ERROR&&r.close&&r.close.call(this,s),n=!1}finally{if(n)try{this.closeAll(a+1)}catch(i){}}}this.wrapperInitData.length=0}},Transaction={Mixin:Mixin,OBSERVED_ERROR:{}};module.exports=Transaction;

},{"fbjs/lib/invariant":166}],123:[function(require,module,exports){
"use strict";var ViewportMetrics={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(r){ViewportMetrics.currentScrollLeft=r.x,ViewportMetrics.currentScrollTop=r.y}};module.exports=ViewportMetrics;

},{}],124:[function(require,module,exports){
"use strict";function accumulateInto(r,a){if(null==a&&invariant(!1),null==r)return a;var n=Array.isArray(r),t=Array.isArray(a);return n&&t?(r.push.apply(r,a),r):n?(r.push(a),r):t?[r].concat(a):[r,a]}var invariant=require("fbjs/lib/invariant");module.exports=accumulateInto;

},{"fbjs/lib/invariant":166}],125:[function(require,module,exports){
"use strict";function adler32(r){for(var e=1,t=0,o=0,a=r.length,d=-4&a;o<d;){for(;o<Math.min(o+4096,d);o+=4)t+=(e+=r.charCodeAt(o))+(e+=r.charCodeAt(o+1))+(e+=r.charCodeAt(o+2))+(e+=r.charCodeAt(o+3));e%=MOD,t%=MOD}for(;o<a;o++)t+=e+=r.charCodeAt(o);return e%=MOD,t%=MOD,e|t<<16}var MOD=65521;module.exports=adler32;

},{}],126:[function(require,module,exports){
"use strict";var canDefineProperty=!1;module.exports=canDefineProperty;

},{}],127:[function(require,module,exports){
"use strict";function dangerousStyleValue(e,r){return null==r||"boolean"==typeof r||""===r?"":isNaN(r)||0===r||isUnitlessNumber.hasOwnProperty(e)&&isUnitlessNumber[e]?""+r:("string"==typeof r&&(r=r.trim()),r+"px")}var CSSProperty=require("./CSSProperty"),isUnitlessNumber=CSSProperty.isUnitlessNumber;module.exports=dangerousStyleValue;

},{"./CSSProperty":27}],128:[function(require,module,exports){
"use strict";function deprecated(e,r,i,n,s){return s}var assign=require("./Object.assign"),warning=require("fbjs/lib/warning");module.exports=deprecated;

},{"./Object.assign":46,"fbjs/lib/warning":175}],129:[function(require,module,exports){
"use strict";function escaper(e){return ESCAPE_LOOKUP[e]}function escapeTextContentForBrowser(e){return(""+e).replace(ESCAPE_REGEX,escaper)}var ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;module.exports=escapeTextContentForBrowser;

},{}],130:[function(require,module,exports){
"use strict";function findDOMNode(e){return null==e?null:1===e.nodeType?e:ReactInstanceMap.has(e)?ReactMount.getNodeFromInstance(e):(null!=e.render&&"function"==typeof e.render&&invariant(!1),void invariant(!1))}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactInstanceMap=require("./ReactInstanceMap"),ReactMount=require("./ReactMount"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning");module.exports=findDOMNode;

},{"./ReactCurrentOwner":58,"./ReactInstanceMap":84,"./ReactMount":87,"fbjs/lib/invariant":166,"fbjs/lib/warning":175}],131:[function(require,module,exports){
"use strict";function flattenSingleChildIntoContext(e,n,r){var l=e,t=void 0===l[r];t&&null!=n&&(l[r]=n)}function flattenChildren(e){if(null==e)return e;var n={};return traverseAllChildren(e,flattenSingleChildIntoContext,n),n}var traverseAllChildren=require("./traverseAllChildren"),warning=require("fbjs/lib/warning");module.exports=flattenChildren;

},{"./traverseAllChildren":149,"fbjs/lib/warning":175}],132:[function(require,module,exports){
"use strict";var forEachAccumulated=function(c,r,a){Array.isArray(c)?c.forEach(r,a):c&&r.call(a,c)};module.exports=forEachAccumulated;

},{}],133:[function(require,module,exports){
"use strict";function getEventCharCode(e){var r,t=e.keyCode;return"charCode"in e?0===(r=e.charCode)&&13===t&&(r=13):r=t,r>=32||13===r?r:0}module.exports=getEventCharCode;

},{}],134:[function(require,module,exports){
"use strict";function getEventKey(e){if(e.key){var r=normalizeKey[e.key]||e.key;if("Unidentified"!==r)return r}if("keypress"===e.type){var t=getEventCharCode(e);return 13===t?"Enter":String.fromCharCode(t)}return"keydown"===e.type||"keyup"===e.type?translateToKey[e.keyCode]||"Unidentified":""}var getEventCharCode=require("./getEventCharCode"),normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};module.exports=getEventKey;

},{"./getEventCharCode":133}],135:[function(require,module,exports){
"use strict";function modifierStateGetter(t){var e=this,r=e.nativeEvent;if(r.getModifierState)return r.getModifierState(t);var i=modifierKeyToProp[t];return!!i&&!!r[i]}function getEventModifierState(t){return modifierStateGetter}var modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};module.exports=getEventModifierState;

},{}],136:[function(require,module,exports){
"use strict";function getEventTarget(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}module.exports=getEventTarget;

},{}],137:[function(require,module,exports){
"use strict";function getIteratorFn(t){var r=t&&(ITERATOR_SYMBOL&&t[ITERATOR_SYMBOL]||t[FAUX_ITERATOR_SYMBOL]);if("function"==typeof r)return r}var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator";module.exports=getIteratorFn;

},{}],138:[function(require,module,exports){
"use strict";function getLeafNode(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function getSiblingNode(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function getNodeForCharacterOffset(e,t){for(var o=getLeafNode(e),n=0,r=0;o;){if(3===o.nodeType){if(r=n+o.textContent.length,n<=t&&r>=t)return{node:o,offset:t-n};n=r}o=getLeafNode(getSiblingNode(o))}}module.exports=getNodeForCharacterOffset;

},{}],139:[function(require,module,exports){
"use strict";function getTextContentAccessor(){return!contentKey&&ExecutionEnvironment.canUseDOM&&(contentKey="textContent"in document.documentElement?"textContent":"innerText"),contentKey}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),contentKey=null;module.exports=getTextContentAccessor;

},{"fbjs/lib/ExecutionEnvironment":152}],140:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function isInternalComponentType(e){return"function"==typeof e&&void 0!==e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function instantiateReactComponent(e){var t;if(null===e||!1===e)t=new ReactEmptyComponent(instantiateReactComponent);else if("object"==typeof e){var n=e;(!n||"function"!=typeof n.type&&"string"!=typeof n.type)&&invariant(!1),t="string"==typeof n.type?ReactNativeComponent.createInternalComponent(n):isInternalComponentType(n.type)?new n.type(n):new ReactCompositeComponentWrapper}else"string"==typeof e||"number"==typeof e?t=ReactNativeComponent.createInstanceForText(e):invariant(!1);return t.construct(e),t._mountIndex=0,t._mountImage=null,t}var ReactCompositeComponent=require("./ReactCompositeComponent"),ReactEmptyComponent=require("./ReactEmptyComponent"),ReactNativeComponent=require("./ReactNativeComponent"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactCompositeComponentWrapper=function(){};assign(ReactCompositeComponentWrapper.prototype,ReactCompositeComponent.Mixin,{_instantiateReactComponent:instantiateReactComponent}),module.exports=instantiateReactComponent;

},{"./Object.assign":46,"./ReactCompositeComponent":57,"./ReactEmptyComponent":76,"./ReactNativeComponent":90,"fbjs/lib/invariant":166,"fbjs/lib/warning":175}],141:[function(require,module,exports){
"use strict";function isEventSupported(e,t){if(!ExecutionEnvironment.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,u=n in document;if(!u){var i=document.createElement("div");i.setAttribute(n,"return;"),u="function"==typeof i[n]}return!u&&useHasFeature&&"wheel"===e&&(u=document.implementation.hasFeature("Events.wheel","3.0")),u}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),useHasFeature;ExecutionEnvironment.canUseDOM&&(useHasFeature=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),module.exports=isEventSupported;

},{"fbjs/lib/ExecutionEnvironment":152}],142:[function(require,module,exports){
"use strict";function isTextInputElement(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&supportedInputTypes[e.type]||"textarea"===t)}var supportedInputTypes={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};module.exports=isTextInputElement;

},{}],143:[function(require,module,exports){
"use strict";function onlyChild(e){return ReactElement.isValidElement(e)||invariant(!1),e}var ReactElement=require("./ReactElement"),invariant=require("fbjs/lib/invariant");module.exports=onlyChild;

},{"./ReactElement":74,"fbjs/lib/invariant":166}],144:[function(require,module,exports){
"use strict";function quoteAttributeValueForBrowser(e){return'"'+escapeTextContentForBrowser(e)+'"'}var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");module.exports=quoteAttributeValueForBrowser;

},{"./escapeTextContentForBrowser":129}],145:[function(require,module,exports){
"use strict";var ReactMount=require("./ReactMount");module.exports=ReactMount.renderSubtreeIntoContainer;

},{"./ReactMount":87}],146:[function(require,module,exports){
"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),WHITESPACE_TEST=/^[ \r\n\t\f]/,NONVISIBLE_TEST=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,setInnerHTML=function(e,n){e.innerHTML=n};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(setInnerHTML=function(e,n){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=n})}),ExecutionEnvironment.canUseDOM){var testElement=document.createElement("div");testElement.innerHTML=" ",""===testElement.innerHTML&&(setInnerHTML=function(e,n){if(e.parentNode&&e.parentNode.replaceChild(e,e),WHITESPACE_TEST.test(n)||"<"===n[0]&&NONVISIBLE_TEST.test(n)){e.innerHTML=String.fromCharCode(65279)+n;var t=e.firstChild;1===t.data.length?e.removeChild(t):t.deleteData(0,1)}else e.innerHTML=n})}module.exports=setInnerHTML;

},{"fbjs/lib/ExecutionEnvironment":152}],147:[function(require,module,exports){
"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),setInnerHTML=require("./setInnerHTML"),setTextContent=function(e,t){e.textContent=t};ExecutionEnvironment.canUseDOM&&("textContent"in document.documentElement||(setTextContent=function(e,t){setInnerHTML(e,escapeTextContentForBrowser(t))})),module.exports=setTextContent;

},{"./escapeTextContentForBrowser":129,"./setInnerHTML":146,"fbjs/lib/ExecutionEnvironment":152}],148:[function(require,module,exports){
"use strict";function shouldUpdateReactComponent(e,t){var n=null===e||!1===e,o=null===t||!1===t;if(n||o)return n===o;var r=typeof e,u=typeof t;return"string"===r||"number"===r?"string"===u||"number"===u:"object"===u&&e.type===t.type&&e.key===t.key}module.exports=shouldUpdateReactComponent;

},{}],149:[function(require,module,exports){
"use strict";function userProvidedKeyEscaper(e){return userProvidedKeyEscaperLookup[e]}function getComponentKey(e,r){return e&&null!=e.key?wrapUserProvidedKey(e.key):r.toString(36)}function escapeUserProvidedKey(e){return(""+e).replace(userProvidedKeyEscapeRegex,userProvidedKeyEscaper)}function wrapUserProvidedKey(e){return"$"+escapeUserProvidedKey(e)}function traverseAllChildrenImpl(e,r,n,t){var a=typeof e;if("undefined"!==a&&"boolean"!==a||(e=null),null===e||"string"===a||"number"===a||ReactElement.isValidElement(e))return n(t,e,""===r?SEPARATOR+getComponentKey(e,0):r),1;var i,l,o=0,s=""===r?SEPARATOR:r+SUBSEPARATOR;if(Array.isArray(e))for(var d=0;d<e.length;d++)i=e[d],l=s+getComponentKey(i,d),o+=traverseAllChildrenImpl(i,l,n,t);else{var u=getIteratorFn(e);if(u){var v,c=u.call(e);if(u!==e.entries)for(var p=0;!(v=c.next()).done;)i=v.value,l=s+getComponentKey(i,p++),o+=traverseAllChildrenImpl(i,l,n,t);else for(;!(v=c.next()).done;){var A=v.value;A&&(i=A[1],l=s+wrapUserProvidedKey(A[0])+SUBSEPARATOR+getComponentKey(i,0),o+=traverseAllChildrenImpl(i,l,n,t))}}else if("object"===a){String(e);invariant(!1)}}return o}function traverseAllChildren(e,r,n){return null==e?0:traverseAllChildrenImpl(e,"",r,n)}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceHandles=require("./ReactInstanceHandles"),getIteratorFn=require("./getIteratorFn"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),SEPARATOR=ReactInstanceHandles.SEPARATOR,SUBSEPARATOR=":",userProvidedKeyEscaperLookup={"=":"=0",".":"=1",":":"=2"},userProvidedKeyEscapeRegex=/[=.:]/g,didWarnAboutMaps=!1;module.exports=traverseAllChildren;

},{"./ReactCurrentOwner":58,"./ReactElement":74,"./ReactInstanceHandles":83,"./getIteratorFn":137,"fbjs/lib/invariant":166,"fbjs/lib/warning":175}],150:[function(require,module,exports){
"use strict";var assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),warning=require("fbjs/lib/warning"),validateDOMNesting=emptyFunction,specialTags,inScopeTags,buttonScopeTags,impliedEndTags,emptyAncestorInfo,updatedAncestorInfo,isTagValidWithParent,findInvalidAncestorForTag,findOwnerStack,didWarn;module.exports=validateDOMNesting;

},{"./Object.assign":46,"fbjs/lib/emptyFunction":158,"fbjs/lib/warning":175}],151:[function(require,module,exports){
"use strict";var emptyFunction=require("./emptyFunction"),EventListener={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:emptyFunction}},registerDefault:function(){}};module.exports=EventListener;

},{"./emptyFunction":158}],152:[function(require,module,exports){
"use strict";var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:canUseDOM&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:canUseDOM&&!!window.screen,isInWorker:!canUseDOM};module.exports=ExecutionEnvironment;

},{}],153:[function(require,module,exports){
"use strict";function camelize(e){return e.replace(_hyphenPattern,function(e,t){return t.toUpperCase()})}var _hyphenPattern=/-(.)/g;module.exports=camelize;

},{}],154:[function(require,module,exports){
"use strict";function camelizeStyleName(e){return camelize(e.replace(msPattern,"ms-"))}var camelize=require("./camelize"),msPattern=/^-ms-/;module.exports=camelizeStyleName;

},{"./camelize":153}],155:[function(require,module,exports){
"use strict";function containsNode(e,o){var t=!0;e:for(;t;){var n=e,i=o;if(t=!1,n&&i){if(n===i)return!0;if(isTextNode(n))return!1;if(isTextNode(i)){e=n,o=i.parentNode,t=!0;continue e}return n.contains?n.contains(i):!!n.compareDocumentPosition&&!!(16&n.compareDocumentPosition(i))}return!1}}var isTextNode=require("./isTextNode");module.exports=containsNode;

},{"./isTextNode":168}],156:[function(require,module,exports){
"use strict";function hasArrayNature(r){return!!r&&("object"==typeof r||"function"==typeof r)&&"length"in r&&!("setInterval"in r)&&"number"!=typeof r.nodeType&&(Array.isArray(r)||"callee"in r||"item"in r)}function createArrayFromMixed(r){return hasArrayNature(r)?Array.isArray(r)?r.slice():toArray(r):[r]}var toArray=require("./toArray");module.exports=createArrayFromMixed;

},{"./toArray":174}],157:[function(require,module,exports){
"use strict";function getNodeName(e){var r=e.match(nodeNamePattern);return r&&r[1].toLowerCase()}function createNodesFromMarkup(e,r){var a=dummyNode;dummyNode||invariant(!1);var t=getNodeName(e),n=t&&getMarkupWrap(t);if(n){a.innerHTML=n[1]+e+n[2];for(var i=n[0];i--;)a=a.lastChild}else a.innerHTML=e;var o=a.getElementsByTagName("script");o.length&&(r||invariant(!1),createArrayFromMixed(o).forEach(r));for(var m=createArrayFromMixed(a.childNodes);a.lastChild;)a.removeChild(a.lastChild);return m}var ExecutionEnvironment=require("./ExecutionEnvironment"),createArrayFromMixed=require("./createArrayFromMixed"),getMarkupWrap=require("./getMarkupWrap"),invariant=require("./invariant"),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,nodeNamePattern=/^\s*<(\w+)/;module.exports=createNodesFromMarkup;

},{"./ExecutionEnvironment":152,"./createArrayFromMixed":156,"./getMarkupWrap":162,"./invariant":166}],158:[function(require,module,exports){
"use strict";function makeEmptyFunction(t){return function(){return t}}function emptyFunction(){}emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(t){return t},module.exports=emptyFunction;

},{}],159:[function(require,module,exports){
"use strict";var emptyObject={};module.exports=emptyObject;

},{}],160:[function(require,module,exports){
"use strict";function focusNode(o){try{o.focus()}catch(o){}}module.exports=focusNode;

},{}],161:[function(require,module,exports){
"use strict";function getActiveElement(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}module.exports=getActiveElement;

},{}],162:[function(require,module,exports){
"use strict";function getMarkupWrap(t){return dummyNode||invariant(!1),markupWrap.hasOwnProperty(t)||(t="*"),shouldWrap.hasOwnProperty(t)||(dummyNode.innerHTML="*"===t?"<link />":"<"+t+"></"+t+">",shouldWrap[t]=!dummyNode.firstChild),shouldWrap[t]?markupWrap[t]:null}var ExecutionEnvironment=require("./ExecutionEnvironment"),invariant=require("./invariant"),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,shouldWrap={},selectWrap=[1,'<select multiple="true">',"</select>"],tableWrap=[1,"<table>","</table>"],trWrap=[3,"<table><tbody><tr>","</tr></tbody></table>"],svgWrap=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],markupWrap={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:selectWrap,option:selectWrap,caption:tableWrap,colgroup:tableWrap,tbody:tableWrap,tfoot:tableWrap,thead:tableWrap,td:trWrap,th:trWrap},svgElements=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];svgElements.forEach(function(t){markupWrap[t]=svgWrap,shouldWrap[t]=!0}),module.exports=getMarkupWrap;

},{"./ExecutionEnvironment":152,"./invariant":166}],163:[function(require,module,exports){
"use strict";function getUnboundedScrollPosition(o){return o===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:o.scrollLeft,y:o.scrollTop}}module.exports=getUnboundedScrollPosition;

},{}],164:[function(require,module,exports){
"use strict";function hyphenate(e){return e.replace(_uppercasePattern,"-$1").toLowerCase()}var _uppercasePattern=/([A-Z])/g;module.exports=hyphenate;

},{}],165:[function(require,module,exports){
"use strict";function hyphenateStyleName(e){return hyphenate(e).replace(msPattern,"-ms-")}var hyphenate=require("./hyphenate"),msPattern=/^ms-/;module.exports=hyphenateStyleName;

},{"./hyphenate":164}],166:[function(require,module,exports){
"use strict";function invariant(e,n,r,i,o,a,t,f){if(!e){var s;if(void 0===n)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,i,o,a,t,f],l=0;s=new Error(n.replace(/%s/g,function(){return d[l++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}module.exports=invariant;

},{}],167:[function(require,module,exports){
"use strict";function isNode(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}module.exports=isNode;

},{}],168:[function(require,module,exports){
"use strict";function isTextNode(e){return isNode(e)&&3==e.nodeType}var isNode=require("./isNode");module.exports=isTextNode;

},{"./isNode":167}],169:[function(require,module,exports){
"use strict";var invariant=require("./invariant"),keyMirror=function(r){var i,n={};r instanceof Object&&!Array.isArray(r)||invariant(!1);for(i in r)r.hasOwnProperty(i)&&(n[i]=i);return n};module.exports=keyMirror;

},{"./invariant":166}],170:[function(require,module,exports){
"use strict";var keyOf=function(r){var e;for(e in r)if(r.hasOwnProperty(e))return e;return null};module.exports=keyOf;

},{}],171:[function(require,module,exports){
"use strict";function mapObject(r,t,e){if(!r)return null;var a={};for(var n in r)hasOwnProperty.call(r,n)&&(a[n]=t.call(e,r[n],n,r));return a}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=mapObject;

},{}],172:[function(require,module,exports){
"use strict";function memoizeStringOnly(n){var r={};return function(t){return r.hasOwnProperty(t)||(r[t]=n.call(this,t)),r[t]}}module.exports=memoizeStringOnly;

},{}],173:[function(require,module,exports){
"use strict";function shallowEqual(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=hasOwnProperty.bind(t),l=0;l<r.length;l++)if(!o(r[l])||e[r[l]]!==t[r[l]])return!1;return!0}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=shallowEqual;

},{}],174:[function(require,module,exports){
"use strict";function toArray(r){var t=r.length;if((Array.isArray(r)||"object"!=typeof r&&"function"!=typeof r)&&invariant(!1),"number"!=typeof t&&invariant(!1),0===t||t-1 in r||invariant(!1),r.hasOwnProperty)try{return Array.prototype.slice.call(r)}catch(r){}for(var a=Array(t),n=0;n<t;n++)a[n]=r[n];return a}var invariant=require("./invariant");module.exports=toArray;

},{"./invariant":166}],175:[function(require,module,exports){
"use strict";var emptyFunction=require("./emptyFunction"),warning=emptyFunction;module.exports=warning;

},{"./emptyFunction":158}],176:[function(require,module,exports){
"use strict";module.exports=require("./lib/React");

},{"./lib/React":48}],177:[function(require,module,exports){
function shallow(r,n,t){var a=Array.isArray(r);if(a!==Array.isArray(n))return!1;var e=typeof r;return e===typeof n&&(flat(e)?t?t(r,n):r===n:a?shallowArray(r,n,t):shallowObject(r,n,t))}function shallowArray(r,n,t){var a=r.length;if(a!==n.length)return!1;if(t){for(var e=0;e<a;e++)if(!t(r[e],n[e]))return!1}else for(var e=0;e<a;e++)if(r[e]!==n[e])return!1;return!0}function shallowObject(r,n,t){var a=0,e=0;if(t)for(var o in r){if(r.hasOwnProperty(o)&&!t(r[o],n[o]))return!1;a++}else for(var o in r){if(r.hasOwnProperty(o)&&r[o]!==n[o])return!1;a++}for(var o in n)n.hasOwnProperty(o)&&e++;return a===e}function flat(r){return"function"!==r&&"object"!==r}module.exports=shallow;

},{}],178:[function(require,module,exports){
(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&i<o;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&i<u;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&i<a;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)(i=I[r])in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,y=c.bind,d=Object.create,g=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(e<2||null==r)return r;for(var u=1;u<e;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;c<a;c++){var f=o[c];t&&void 0!==r[f]||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(d)return d(n);g.prototype=n;var t=new g;return g.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&t<=A};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;e<u;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;e<u;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;o<u;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;if(void 0!==(e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r))&&-1!==e)return n[e]},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;a<c;a++)(e=n[a])>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){((u=t(n,r,e))>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;a<c;a++)(e=n[a])<i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){((u=t(n,r,e))<o||u===1/0&&i===1/0)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;i<e;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(r<e||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){if(null!=n)return null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){if(null!=n)return null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);o<a;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;f<l;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);o<a;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);e<u;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;o<r&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;e<t;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);e<u;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);i<o;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;i<e;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(y&&n.bind===y)return y.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;o<u;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(e<=1)throw new Error("bindAll must be passed function names");for(t=1;t<e;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=!1===r.leading?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||!1!==r.leading||(a=f);var l=t-(f-a);return e=this,u=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||!1===r.trailing||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;f<t&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),n<=1&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;u<r;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;a<i;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;u<r;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;e<u;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;i<o;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;a<c;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;i<e;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!=+n?+t!=+t:0==+n?1/+n==1/t:+n==+t;case"[object Date]":case"[object Boolean]":return+n==+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if((c=n.length)!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n||(k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length)},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return void 0===n},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;u<n;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return void 0===e&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},z=function(n){return"\\"+K[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||/(.)^/).source,(t.interpolate||/(.)^/).source,(t.evaluate||/(.)^/).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(/\\|'|\r|\n|\u2028|\u2029/g,z),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(n){throw n.source=i,n}var a=function(n){return o.call(this,n,m)};return a.source="function("+(t.variable||"obj")+"){\n"+i+"}",a},m.chain=function(n){var t=m(n);return t._chain=!0,t};var D=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),D(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],D(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return D(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);

},{}],179:[function(require,module,exports){
!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function n(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function e(t){return t}function r(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function i(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=W.length;e<r;++e){var i=W[e]+n;if(i in t)return i}}function o(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function u(){this._=Object.create(null)}function a(t){return(t+="")===F||t[0]===J?J+t:t}function s(t){return(t+="")[0]===J?t.slice(1):t}function c(t){return a(t)in this._}function l(t){return(t=a(t))in this._&&delete this._[t]}function f(){var t=[];for(var n in this._)t.push(s(n));return t}function h(){var t=0;for(var n in this._)++t;return t}function p(){for(var t in this._)return!1;return!0}function v(){}function d(){}function _(t){function n(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}var e=[],r=new u;return n.on=function(n,i){var o,u=r.get(n);return arguments.length<2?u&&u.on:(u&&(u.on=null,e=e.slice(0,o=e.indexOf(u)).concat(e.slice(o+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function g(){U.event.preventDefault()}function y(){for(var t,n=U.event;t=n.sourceEvent;)n=t;return n}function m(t){for(var n=new d,e=0,r=arguments.length;++e<r;)n[arguments[e]]=_(n);return n.of=function(e,r){return function(i){try{var o=i.sourceEvent=U.event;i.target=t,U.event=i,n[i.type].apply(e,r)}finally{U.event=o}}},n}function w(t){return nt(t,ot),t}function x(t){return"function"==typeof t?t:function(){return et(t,this)}}function b(t){return"function"==typeof t?t:function(){return rt(t,this)}}function N(t,n){function e(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function u(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function a(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=U.ns.qualify(t),null==n?t.local?r:e:"function"==typeof n?t.local?a:u:t.local?o:i}function A(t){return t.trim().replace(/\s+/g," ")}function S(t){return new RegExp("(?:^|\\s+)"+U.requote(t)+"(?:\\s+|$)","g")}function E(t){return(t+"").trim().split(/^|\s+/)}function z(t,n){function e(){for(var e=-1;++e<i;)t[e](this,n)}function r(){for(var e=-1,r=n.apply(this,arguments);++e<i;)t[e](this,r)}t=E(t).map(T);var i=t.length;return"function"==typeof n?r:e}function T(t){var n=S(t);return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);var i=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(i)||e.setAttribute("class",A(i+" "+t))):e.setAttribute("class",A(i.replace(n," ")))}}function C(t,n,e){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,e)}function o(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}return null==n?r:"function"==typeof n?o:i}function L(t,n){function e(){delete this[t]}function r(){this[t]=n}function i(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return null==n?e:"function"==typeof n?i:r}function P(t){function n(){var n=this.ownerDocument,e=this.namespaceURI;return e===ut&&n.documentElement.namespaceURI===ut?n.createElement(t):n.createElementNS(e,t)}function e(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=U.ns.qualify(t)).local?e:n}function O(){var t=this.parentNode;t&&t.removeChild(this)}function q(){this._=Object.create(null)}function M(t){return{__data__:t}}function D(t){return function(){return it(this,t)}}function $(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function k(t){return arguments.length||(t=$),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function V(t,n){for(var e=0,r=t.length;e<r;e++)for(var i,o=t[e],u=0,a=o.length;u<a;u++)(i=o[u])&&n(i,u,e);return t}function R(t){return nt(t,st),t}function X(t){var n,e;return function(r,i,o){var u,a=t[o].update,s=a.length;for(o!=e&&(e=o,n=0),i>=n&&(n=i+1);!(u=a[n])&&++n<s;);return u}}function j(t,n,e){function r(){var n=this[u];n&&(this.removeEventListener(t,n,n.$),delete this[u])}function i(){var i=s(n,Z(arguments));r.call(this),this.addEventListener(t,this[u]=i,i.$=e),i._=n}function o(){var n,e=new RegExp("^__on([^.]+)"+U.requote(t)+"$");for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i.$),delete this[r]}}var u="__on"+t,a=t.indexOf("."),s=H;a>0&&(t=t.slice(0,a));var c=ct.get(t);return c&&(t=c,s=Y),a?n?i:r:n?v:o}function H(t,n){return function(e){var r=U.event;U.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{U.event=r}}}function Y(t,n){var e=H(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function B(e){var r=".dragsuppress-"+ ++ft,o="click"+r,u=U.select(n(e)).on("touchmove"+r,g).on("dragstart"+r,g).on("selectstart"+r,g);if(null==lt&&(lt=!("onselectstart"in e)&&i(e.style,"userSelect")),lt){var a=t(e).style,s=a[lt];a[lt]="none"}return function(t){if(u.on(r,null),lt&&(a[lt]=s),t){var n=function(){u.on(o,null)};u.on(o,function(){g(),n()},!0),setTimeout(n,0)}}}function G(t,e){e.changedTouches&&(e=e.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(ht<0){var o=n(t);if(o.scrollX||o.scrollY){r=U.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var u=r[0][0].getScreenCTM();ht=!(u.f||u.e),r.remove()}}return ht?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function I(){return U.event.changedTouches[0].identifier}var U={version:"3.5.17"},K=this.document;U.rebind=function(t,n){for(var e,i=1,o=arguments.length;++i<o;)t[e=arguments[i]]=r(t,n,n[e]);return t};var W=["webkit","ms","moz","Moz","o","O"];U.map=function(t,n){var e=new u;if(t instanceof u)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n.call(t,r=t[i],i),r)}else for(var a in t)e.set(a,t[a]);return e};var F="__proto__",J="\0";o(u,{has:c,get:function(t){return this._[a(t)]},set:function(t,n){return this._[a(t)]=n},remove:l,keys:f,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:s(n),value:this._[n]});return t},size:h,empty:p,forEach:function(t){for(var n in this._)t.call(this,s(n),this._[n])}});var Q=[].slice,Z=function(t){return Q.call(t)};U.dispatch=function(){for(var t=new d,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=_(t);return t},d.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},U.event=null,U.requote=function(t){return t.replace(tt,"\\$&")};var tt=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,nt={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},et=function(t,n){return n.querySelector(t)},rt=function(t,n){return n.querySelectorAll(t)},it=function(t,n){var e=t.matches||t[i(t,"matchesSelector")];return(it=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(et=function(t,n){return Sizzle(t,n)[0]||null},rt=Sizzle,it=Sizzle.matchesSelector),U.selection=function(){return U.select(K.documentElement)};var ot=U.selection.prototype=[];ot.select=function(t){var n,e,r,i,o=[];t=x(t);for(var u=-1,a=this.length;++u<a;){o.push(n=[]),n.parentNode=(r=this[u]).parentNode;for(var s=-1,c=r.length;++s<c;)(i=r[s])?(n.push(e=t.call(i,i.__data__,s,u)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return w(o)},ot.selectAll=function(t){var n,e,r=[];t=b(t);for(var i=-1,o=this.length;++i<o;)for(var u=this[i],a=-1,s=u.length;++a<s;)(e=u[a])&&(r.push(n=Z(t.call(e,e.__data__,a,i))),n.parentNode=e);return w(r)};var ut="http://www.w3.org/1999/xhtml",at={svg:"http://www.w3.org/2000/svg",xhtml:ut,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};U.ns={prefix:at,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),at.hasOwnProperty(e)?{space:at[e],local:t}:t}},ot.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return t=U.ns.qualify(t),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(N(n,t[n]));return this}return this.each(N(t,n))},ot.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=E(t)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!S(t[i]).test(n))return!1;return!0}for(n in t)this.each(z(n,t[n]));return this}return this.each(z(t,n))},ot.style=function(t,e,r){var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(e="");for(r in t)this.each(C(r,t[r],e));return this}if(i<2){var o=this.node();return n(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(C(t,e,r))},ot.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(L(n,t[n]));return this}return this.each(L(t,n))},ot.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},ot.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},ot.append=function(t){return t=P(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ot.insert=function(t,n){return t=P(t),n=x(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},ot.remove=function(){return this.each(O)},U.set=function(t){var n=new q;if(t)for(var e=0,r=t.length;e<r;++e)n.add(t[e]);return n},o(q,{has:c,add:function(t){return this._[a(t+="")]=!0,t},remove:l,values:f,size:h,empty:p,forEach:function(t){for(var n in this._)t.call(this,s(n))}}),ot.data=function(t,n){function e(t,e){var r,i,o,a=t.length,f=e.length,h=Math.min(a,f),p=new Array(f),v=new Array(f),d=new Array(a);if(n){var _,g=new u,y=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(g.has(_=n.call(i,i.__data__,r))?d[r]=i:g.set(_,i),y[r]=_);for(r=-1;++r<f;)(i=g.get(_=n.call(e,o=e[r],r)))?!0!==i&&(p[r]=i,i.__data__=o):v[r]=M(o),g.set(_,!0);for(r=-1;++r<a;)r in y&&!0!==g.get(y[r])&&(d[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],o=e[r],i?(i.__data__=o,p[r]=i):v[r]=M(o);for(;r<f;++r)v[r]=M(e[r]);for(;r<a;++r)d[r]=t[r]}v.update=p,v.parentNode=p.parentNode=d.parentNode=t.parentNode,s.push(v),c.push(p),l.push(d)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var s=R([]),c=w([]),l=w([]);if("function"==typeof t)for(;++o<a;)e(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)e(r=this[o],t);return c.enter=function(){return s},c.exit=function(){return l},c},ot.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ot.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=D(t));for(var o=0,u=this.length;o<u;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var a=0,s=e.length;a<s;a++)(r=e[a])&&t.call(r,r.__data__,a,o)&&n.push(r)}return w(i)},ot.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];--i>=0;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},U.ascending=$,ot.sort=function(t){t=k.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},ot.each=function(t){return V(this,function(n,e,r){t.call(n,n.__data__,e,r)})},ot.call=function(t){var n=Z(arguments);return t.apply(n[0]=this,n),this},ot.empty=function(){return!this.node()},ot.node=function(){for(var t=0,n=this.length;t<n;t++)for(var e=this[t],r=0,i=e.length;r<i;r++){var o=e[r];if(o)return o}return null},ot.size=function(){var t=0;return V(this,function(){++t}),t};var st=[];U.selection.enter=R,U.selection.enter.prototype=st,st.append=ot.append,st.empty=ot.empty,st.node=ot.node,st.call=ot.call,st.size=ot.size,st.select=function(t){for(var n,e,r,i,o,u=[],a=-1,s=this.length;++a<s;){r=(i=this[a]).update,u.push(n=[]),n.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(o=i[c])?(n.push(r[c]=e=t.call(i.parentNode,o.__data__,c,a)),e.__data__=o.__data__):n.push(null)}return w(u)},st.insert=function(t,n){return arguments.length<2&&(n=X(this)),ot.insert.call(this,t,n)},U.select=function(n){var e;return"string"==typeof n?(e=[et(n,K)],e.parentNode=K.documentElement):(e=[n],e.parentNode=t(n)),w([e])},U.selectAll=function(t){var n;return"string"==typeof t?(n=Z(rt(t,K)),n.parentNode=K.documentElement):(n=Z(t),n.parentNode=null),w([n])},ot.on=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(n=!1);for(e in t)this.each(j(e,t[e],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(j(t,n,e))};var ct=U.map({mouseenter:"mouseover",mouseleave:"mouseout"});K&&ct.forEach(function(t){"on"+t in K&&ct.remove(t)});var lt,ft=0;U.mouse=function(t){return G(t,y())};var ht=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;U.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=y().changedTouches),n)for(var r,i=0,o=n.length;i<o;++i)if((r=n[i]).identifier===e)return G(t,r)},U.behavior={},U.behavior.drag=function(){function t(){this.on("mousedown.drag",u).on("touchstart.drag",a)}function r(t,n,e,r,u){return function(){function a(){var t,e,r=n(h,d);r&&(t=r[0]-m[0],e=r[1]-m[1],v|=t|e,m=r,p({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:t,dy:e}))}function s(){n(h,d)&&(g.on(r+_,null).on(u+_,null),y(v),p({type:"dragend"}))}var c,l=this,f=U.event.target.correspondingElement||U.event.target,h=l.parentNode,p=i.of(l,arguments),v=0,d=t(),_=".drag"+(null==d?"":"-"+d),g=U.select(e(f)).on(r+_,a).on(u+_,s),y=B(f),m=n(h,d);o?(c=o.apply(l,arguments),c=[c.x-m[0],c.y-m[1]]):c=[0,0],p({type:"dragstart"})}}var i=m(t,"drag","dragstart","dragend"),o=null,u=r(v,U.mouse,n,"mousemove","mouseup"),a=r(I,U.touch,e,"touchmove","touchend");return t.origin=function(n){return arguments.length?(o=n,t):o},U.rebind(t,i,"on")},"function"==typeof define&&define.amd?(this.d3=U,define(U)):"object"==typeof module&&module.exports?module.exports=U:this.d3=U}();

},{}],180:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),AbstractFile=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getBytes",value:function(e,t){throw new TypeError("Method getBytes is not implemented")}},{key:"getAll",value:function(){throw new TypeError("Method getAll is not implemented")}},{key:"getAllString",value:function(){throw new TypeError("Method getAllString is not implemented")}},{key:"getSize",value:function(){throw new TypeError("Method getSize is not implemented")}}]),e}();module.exports=AbstractFile;

},{}],181:[function(require,module,exports){
"use strict";function strToStrand(t){return t&&"+"==t?"+":t&&"-"==t?"-":"."}Object.defineProperty(exports,"__esModule",{value:!0}),module.exports={strToStrand:strToStrand};

},{}],182:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),_utils=require("./utils"),ContigInterval=function(){function t(n,e,r){_classCallCheck(this,t),this.contig=n,this.interval=new _Interval2.default(e,r)}return _createClass(t,[{key:"start",value:function(){return this.interval.start}},{key:"stop",value:function(){return this.interval.stop}},{key:"length",value:function(){return this.interval.length()}},{key:"intersects",value:function(t){return this.chrOnContig(t.contig)&&this.interval.intersects(t.interval)}},{key:"containsInterval",value:function(t){return this.chrOnContig(t.contig)&&this.interval.containsInterval(t.interval)}},{key:"isAdjacentTo",value:function(t){return this.chrOnContig(t.contig)&&(this.start()==1+t.stop()||this.stop()+1==t.start())}},{key:"isCoveredBy",value:function(t){var n=this,e=t.filter(function(t){return n.chrOnContig(t.contig)}).map(function(t){return t.interval});return this.interval.isCoveredBy(e)}},{key:"containsLocus",value:function(t,n){return this.chrOnContig(t)&&this.interval.contains(n)}},{key:"chrOnContig",value:function(t){return this.contig===t||this.contig==="chr"+t||"chr"+this.contig===t}},{key:"clone",value:function(){return new t(this.contig,this.interval.start,this.interval.stop)}},{key:"complementIntervals",value:function(n){var e=this;return this.interval.complementIntervals((0,_utils.flatMap)(n,function(t){return e.chrOnContig(t.contig)?[t.interval]:[]})).map(function(n){return new t(e.contig,n.start,n.stop)})}},{key:"toString",value:function(){return this.contig+":"+this.start()+"-"+this.stop()}},{key:"toGenomeRange",value:function(){if(!("string"==typeof this.contig||this.contig instanceof String))throw"Cannot convert numeric ContigInterval to GenomeRange";return{contig:this.contig,start:this.start(),stop:this.stop()}}},{key:"round",value:function(n,e){var r=this.interval.round(n,e);return new t(this.contig,r.start,r.stop)}}],[{key:"compare",value:function(t,n){return t.contig.toString()>n.contig.toString()?-1:t.contig.toString()<n.contig.toString()?1:t.start()-n.start()}},{key:"coalesce",value:function(n){n.sort(t.compare);var e=[];return n.forEach(function(t){if(0===e.length)return void e.push(t);var n=e[e.length-1];t.intersects(n)||t.isAdjacentTo(n)?(n=e[e.length-1]=n.clone(),n.interval.stop=Math.max(t.interval.stop,n.interval.stop)):e.push(t)}),e}},{key:"fromGenomeRange",value:function(n){return new t(n.contig.toString(),n.start,n.stop)}}]),t}();module.exports=ContigInterval;

},{"./Interval":185,"./utils":223}],183:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_get=function(t,e,n){for(var r=!0;r;){var o=t,a=e,i=n;r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,a);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(i)}var l=Object.getPrototypeOf(o);if(null===l)return;t=l,e=a,n=i,r=!0,u=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_utils=require("./utils"),_utils2=_interopRequireDefault(_utils),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),Controls=function(t){function e(t){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return _inherits(e,t),_createClass(e,[{key:"makeRange",value:function(){return{contig:this.refs.contig.value,start:Number(this.refs.start.value),stop:Number(this.refs.stop.value)}}},{key:"completeRange",value:function(t){var e=this;if(t=t||{},t.start&&void 0===t.stop&&(t.stop=t.start+20,t.start-=20),t.contig){var n;!function(){var r=t.contig;(n=_underscore2.default.find(e.props.contigList,function(t){return _utils2.default.isChrMatch(r,t)}))&&(t.contig=n)}()}return _underscore2.default.extend(_underscore2.default.clone(this.props.range),t)}},{key:"handleContigChange",value:function(t){this.props.onChange(this.completeRange({contig:this.refs.contig.value}))}},{key:"handleFormSubmit",value:function(t){t.preventDefault();var e=this.completeRange(_utils2.default.parseRange(this.refs.position.value));this.props.onChange(e)}},{key:"updateRangeUI",value:function(){var t=this.props.range;if(t&&(this.refs.position.value=_utils2.default.formatInterval(new _Interval2.default(t.start,t.stop)),this.props.contigList)){var e=this.props.contigList.indexOf(t.contig);this.refs.contig.selectedIndex=e}}},{key:"zoomIn",value:function(t){t.preventDefault(),this.zoomByFactor(.5)}},{key:"zoomOut",value:function(t){t.preventDefault(),this.zoomByFactor(2)}},{key:"zoomByFactor",value:function(t){var e=this.props.range;if(e){var n=_utils2.default.scaleRange(new _Interval2.default(e.start,e.stop),t);this.props.onChange({contig:e.contig,start:n.start,stop:n.stop})}}},{key:"render",value:function(){var t=this.props.contigList?this.props.contigList.map(function(t,e){return _react2.default.createElement("option",{key:e},t)}):null;return _react2.default.createElement("form",{className:"controls",onSubmit:this.handleFormSubmit.bind(this)},_react2.default.createElement("select",{ref:"contig",onChange:this.handleContigChange.bind(this)},t)," ",_react2.default.createElement("input",{ref:"position",type:"text"})," ",_react2.default.createElement("button",{className:"btn-submit",onClick:this.handleFormSubmit.bind(this)},"Go")," ",_react2.default.createElement("div",{className:"zoom-controls"},_react2.default.createElement("button",{className:"btn-zoom-out",onClick:this.zoomOut.bind(this)})," ",_react2.default.createElement("button",{className:"btn-zoom-in",onClick:this.zoomIn.bind(this)})))}},{key:"componentDidUpdate",value:function(t){_underscore2.default.isEqual(t.range,this.props.range)||this.updateRangeUI()}},{key:"componentDidMount",value:function(){this.updateRangeUI()}}]),e}(_react2.default.Component);module.exports=Controls;

},{"./Interval":185,"./utils":223,"react":176,"underscore":178}],184:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_ContigInterval=require("./ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataSamRead=require("./data/SamRead"),_dataSamRead2=_interopRequireDefault(_dataSamRead),OP_MAP={ALIGNMENT_MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",CLIP_SOFT:"S",CLIP_HARD:"H",PAD:"P",SEQUENCE_MATCH:"=",SEQUENCE_MISMATCH:"X"},GA4GHAlignment=function(){function e(t){_classCallCheck(this,e),this.alignment=t,this.pos=parseInt(t.alignment.position.position),this.ref=t.alignment.position.referenceName,this.name=t.fragmentName,this.cigarOps=t.alignment.cigar.map(function(e){var t=e.operation,n=e.operationLength;return{op:OP_MAP[t],length:parseInt(n)}}),this._interval=new _ContigInterval2.default(this.ref,this.pos,this.pos+this.getReferenceLength()-1)}return _createClass(e,[{key:"getKey",value:function(){return e.keyFromGA4GHResponse(this.alignment)}},{key:"getStrand",value:function(){return"NEG_STRAND"==this.alignment.alignment.position.strand?"-":"+"}},{key:"getQualityScores",value:function(){return this.alignment.alignedQuality}},{key:"getSequence",value:function(){return this.alignment.alignedSequence}},{key:"getInterval",value:function(){return this._interval}},{key:"intersects",value:function(e){return e.intersects(this.getInterval())}},{key:"getReferenceLength",value:function(){return _dataSamRead2.default.referenceLengthFromOps(this.cigarOps)}},{key:"getMateProperties",value:function(){var e=this.alignment.nextMatePosition;return e&&{ref:e.referenceName,pos:parseInt(e.position),strand:"NEG_STRAND"==e.strand?"-":"+"}}},{key:"getInferredInsertSize",value:function(){var e=this.getMateProperties();if(e&&e.ref==this.ref){var t=this._interval.start(),n=this._interval.stop(),r=e.pos,a=r+this.getSequence().length;return Math.max(n,a)-Math.min(t,r)}return 0}}],[{key:"keyFromGA4GHResponse",value:function(e){return e.fragmentName+":"+e.readNumber}}]),e}();module.exports=GA4GHAlignment;

},{"./ContigInterval":182,"./data/SamRead":194}],185:[function(require,module,exports){
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}(),Interval=function(){function t(n,r){_classCallCheck(this,t),this.start=n,this.stop=r}return _createClass(t,[{key:"length",value:function(){return Math.max(0,this.stop-this.start+1)}},{key:"intersect",value:function(n){return new t(Math.max(this.start,n.start),Math.min(this.stop,n.stop))}},{key:"intersects",value:function(t){return this.start<=t.stop&&t.start<=this.stop}},{key:"contains",value:function(t){return t>=this.start&&t<=this.stop}},{key:"containsInterval",value:function(t){return this.contains(t.start)&&this.contains(t.stop)}},{key:"round",value:function(n,r){var e=r?0:1,s=function(t){return t-t%n};return new t(Math.max(e,s(this.start)),s(this.stop+n-1))}},{key:"clone",value:function(){return new t(this.start,this.stop)}},{key:"isCoveredBy",value:function(t){for(var n=this.clone(),r=0;r<t.length;r++){var e=t[r];if(r&&e.start<t[r-1].start)throw"isCoveredBy must be called with sorted ranges";if(e.start>n.start)return!1;if(n.start=Math.max(n.start,e.stop+1),n.length()<=0)return!0}return!1}},{key:"subtract",value:function(n){return this.intersects(n)?this.containsInterval(n)?[new t(this.start,n.start-1),new t(n.stop+1,this.stop)].filter(function(t){return t.length()>0}):n.containsInterval(this)?[]:n.start<this.start?[new t(n.stop+1,this.stop)]:[new t(this.start,n.start-1)]:[this]}},{key:"complementIntervals",value:function(t){var n=[this];return t.forEach(function(t){var r=[];n.forEach(function(n){r=r.concat(n.subtract(t))}),n=r}),n}},{key:"toString",value:function(){return"["+this.start+", "+this.stop+"]"}}],[{key:"intersectAll",value:function(t){if(!t.length)throw new Error("Tried to intersect zero intervals");var n=t[0].clone();return t.slice(1).forEach(function(t){var r=t.start,e=t.stop;n.start=Math.max(r,n.start),n.stop=Math.min(e,n.stop)}),n}},{key:"boundingInterval",value:function(t){if(!t.length)throw new Error("Tried to bound zero intervals");var n=t[0].clone();return t.slice(1).forEach(function(t){var r=t.start,e=t.stop;n.start=Math.min(r,n.start),n.stop=Math.max(e,n.stop)}),n}}]),t}();module.exports=Interval;

},{}],186:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var i=e,o=t,u=r;n=!1,null===i&&(i=Function.prototype);var l=Object.getOwnPropertyDescriptor(i,o);if(void 0!==l){if("value"in l)return l.value;var a=l.get;if(void 0===a)return;return a.call(u)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=o,r=u,n=!0,l=f=void 0}},_q=require("q"),_q2=_interopRequireDefault(_q),_AbstractFile2=require("./AbstractFile"),_AbstractFile3=_interopRequireDefault(_AbstractFile2),LocalStringFile=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.fileLength=e.length,this.buffer=new ArrayBuffer(e.length),this.content=e;for(var r=new Uint8Array(this.buffer),n=0;n<this.fileLength;n++)r[n]=e.charCodeAt(n)}return _inherits(t,e),_createClass(t,[{key:"getBytes",value:function(e,t){if(t<0)return _q2.default.reject("Requested <0 bytes ("+t+")");var r=e+t-1;-1!=this.fileLength&&(r=Math.min(this.fileLength-1,r));var n=this.getFromCache(e,r);return _q2.default.when(n)}},{key:"getAll",value:function(){var e=this.getFromCache(0,this.fileLength-1);return _q2.default.when(e)}},{key:"getAllString",value:function(){return _q2.default.when(this.content)}},{key:"getSize",value:function(){return _q2.default.when(this.fileLength)}},{key:"getFromCache",value:function(e,t){return this.buffer.slice(e,t+1)}}]),t}(_AbstractFile3.default);module.exports=LocalStringFile;

},{"./AbstractFile":180,"q":23}],187:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var a=e,c=t,o=r;n=!1,null===a&&(a=Function.prototype);var u=Object.getOwnPropertyDescriptor(a,c);if(void 0!==u){if("value"in u)return u.value;var i=u.get;if(void 0===i)return;return i.call(o)}var l=Object.getPrototypeOf(a);if(null===l)return;e=l,t=c,r=o,n=!0,u=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),Menu=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"clickHandler",value:function(e,t){t.preventDefault();var r=this.props.items[e];"string"!=typeof r&&this.props.onSelect(r.key)}},{key:"render",value:function(){var e=this,t=function(t){return e.clickHandler.bind(e,t)},r=[];return this.props.header&&r.push(_react2.default.createElement("div",{key:"header",className:"menu-header"},this.props.header)),r=r.concat(this.props.items.map(function(e,r){if("string"==typeof e)return _react2.default.createElement("div",{key:r,className:"menu-separator"});var n="check"+(e.checked?" checked":"");return _react2.default.createElement("div",{key:r,className:"menu-item",onClick:t(r)},_react2.default.createElement("span",{className:n}),_react2.default.createElement("span",{className:"menu-item-label"},e.label))})),_react2.default.createElement("div",{className:"menu"},r)}}]),t}(_react2.default.Component);module.exports=Menu;

},{"react":176}],188:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var u,s=e[Symbol.iterator]();!(n=(u=s.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var i=e,o=t,u=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var a=s.get;if(void 0===a)return;return a.call(u)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,r=u,n=!0,s=l=void 0}},_q=require("q"),_q2=_interopRequireDefault(_q),_AbstractFile2=require("./AbstractFile"),_AbstractFile3=_interopRequireDefault(_AbstractFile2),RemoteFile=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e,this.fileLength=-1,this.chunks=[],this.numNetworkRequests=0}return _inherits(t,e),_createClass(t,[{key:"getBytes",value:function(e,t){if(t<0)return _q2.default.reject("Requested <0 bytes ("+t+") from "+this.url);var r=e+t-1;-1!=this.fileLength&&(r=Math.min(this.fileLength-1,r));var n=this.getFromCache(e,r);return n?_q2.default.when(n):this.getFromNetwork(e,r)}},{key:"getAll",value:function(){var e=this;if(-1!=this.fileLength){var t=this.getFromCache(0,this.fileLength-1);if(t)return _q2.default.when(t)}var r=new XMLHttpRequest;return r.open("GET",this.url),r.responseType="arraybuffer",this.promiseXHR(r).then(function(t){var r=_slicedToArray(t,1),n=r[0];return e.fileLength=n.byteLength,e.chunks=[{start:0,stop:e.fileLength-1,buffer:n}],n})}},{key:"getAllString",value:function(){var e=new XMLHttpRequest;return e.open("GET",this.url),this.promiseXHR(e).then(function(e){return _slicedToArray(e,1)[0]})}},{key:"getSize",value:function(){if(-1!=this.fileLength)return _q2.default.when(this.fileLength);var e=new XMLHttpRequest;return e.open("HEAD",this.url),this.promiseXHR(e).then(function(){var t=e.getResponseHeader("Content-Length");if(null!==t)return Number(t);throw"Remote resource has unknown length"})}},{key:"getFromCache",value:function(e,t){for(var r=0;r<this.chunks.length;r++){var n=this.chunks[r];if(n.start<=e&&n.stop>=t)return n.buffer.slice(e-n.start,t-n.start+1)}return null}},{key:"getFromNetwork",value:function(e,t){var r=this,n=t-e+1;if(n>5e7)throw"Monster request: Won't fetch "+n+" bytes from "+this.url;var i=new XMLHttpRequest;return i.open("GET",this.url),i.responseType="arraybuffer",i.setRequestHeader("Range","bytes="+e+"-"+t),this.promiseXHR(i).then(function(t){var n=_slicedToArray(t,1),o=n[0],u={start:e,stop:e+o.byteLength-1,buffer:o};r.chunks.push(u);var s=r._getLengthFromContentRange(i);return null!==s&&void 0!==s&&(-1!=r.fileLength&&r.fileLength!=s?console.warn("Size of remote file "+r.url+" changed from "+r.fileLength+" to "+s):r.fileLength=s),o})}},{key:"promiseXHR",value:function(e){var t=this.url,r=_q2.default.defer();return e.addEventListener("load",function(e){this.status>=400?r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText):r.resolve([this.response,e])}),e.addEventListener("error",function(e){r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText)}),this.numNetworkRequests++,e.send(),r.promise}},{key:"_getLengthFromContentRange",value:function(e){if(!/Content-Range/i.exec(e.getAllResponseHeaders()))return null;var t=e.getResponseHeader("Content-Range"),r=/\/(\d+)$/.exec(t);return r?Number(r[1]):(console.warn("Received improper Content-Range value for "+this.url+": "+t),null)}},{key:"clearCache",value:function(){this.chunks=[]}}]),t}(_AbstractFile3.default);module.exports=RemoteFile;

},{"./AbstractFile":180,"q":23}],189:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_ContigInterval=require("./ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),MONSTER_REQUEST=5e6,RemoteRequest=function(){function e(t){_classCallCheck(this,e),this.cache=require("memory-cache"),this.url=t,this.numNetworkRequests=0}return _createClass(e,[{key:"get",value:function(e,t,r){var n=r-t;if(n<=0)return _q2.default.reject("Requested <0 interval ("+n+") from "+this.url);var s=new _ContigInterval2.default(e,t,r),u=this.cache.get(s);return u?_q2.default.when(u):this.getFromNetwork(e,t,r)}},{key:"getFromNetwork",value:function(e,t,r){var n=this,s=r-t;if(s>5e6)throw"Monster request: Won't fetch "+s+" sized ranges from "+this.url;var u=new XMLHttpRequest,i=this.getEndpointFromContig(e,t,r);return u.open("GET",i),u.responseType="json",u.setRequestHeader("Content-Type","application/json"),this.promiseXHR(u).then(function(s){var u=s[0],i=new _ContigInterval2.default(e,t,r);return n.cache.put(i,u),u})}},{key:"getEndpointFromContig",value:function(e,t,r){return this.url+"/"+e+"?start="+t+"&end="+r}},{key:"promiseXHR",value:function(e){var t=this.url,r=_q2.default.defer();return e.addEventListener("load",function(e){this.status>=400?r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText):r.resolve([this.response,e])}),e.addEventListener("error",function(e){r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText)}),this.numNetworkRequests++,e.send(),r.promise}}]),e}();module.exports={RemoteRequest:RemoteRequest,MONSTER_REQUEST:MONSTER_REQUEST};

},{"./ContigInterval":182,"memory-cache":9,"q":23}],190:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_get=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;if(void 0===c)return;return c.call(o)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,a=o,n=!0,s=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_Controls=require("./Controls"),_Controls2=_interopRequireDefault(_Controls),_Menu=require("./Menu"),_Menu2=_interopRequireDefault(_Menu),_VisualizationWrapper=require("./VisualizationWrapper"),_VisualizationWrapper2=_interopRequireDefault(_VisualizationWrapper),Root=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={contigList:this.props.referenceSource.contigList(),range:null,updateSize:!1,settingsMenuKey:null},this.trackReactElements=[]}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=this;this.props.referenceSource.on("contigs",function(){e.setState({contigList:e.props.referenceSource.contigList()})}),this.state.range||this.handleRangeChange(this.props.initialRange),this.setState({contigList:this.props.referenceSource.contigList()})}},{key:"handleRangeChange",value:function(e){var t=this;e.start<0&&(e.start=0),this.props.referenceSource.normalizeRange(e).then(function(e){t.setState({range:e}),t.props.tracks.forEach(function(t){t.source.rangeChanged(e)})}).done()}},{key:"toggleSettingsMenu",value:function(e,t){this.state.settingsMenuKey==e?this.setState({settingsMenuKey:null}):this.setState({settingsMenuKey:e})}},{key:"handleSelectOption",value:function(e,t){this.setState({settingsMenuKey:null});var a=this.props.tracks[Number(e)].visualization,n=a.options,r=a.component.handleSelectOption(t,n);a.options=r,r!=n&&this.forceUpdate()}},{key:"makeDivForTrack",value:function(e,t){var a=this,n=parseInt(e),r=_react2.default.createElement(_VisualizationWrapper2.default,{visualization:t.visualization,range:this.state.range,onRangeChange:this.handleRangeChange.bind(this),source:t.source,options:t.track.options,referenceSource:this.props.referenceSource,ref:function(e){a.trackReactElements[n]=e}}),i=t.track.name||"(track name)",o=null,s=null;if(t.visualization.component.getOptionsMenu&&(o=_react2.default.createElement("span",{ref:"gear-"+e,className:"gear",onClick:this.toggleSettingsMenu.bind(this,e)},"")),this.state.settingsMenuKey==e){var c=this.refs["gear-"+e],l=c.offsetLeft,u=c.offsetWidth,p=c.offsetTop,f={position:"absolute",left:l+u+"px",top:p+"px"},h=t.visualization.component.getOptionsMenu(t.visualization.options);s=_react2.default.createElement("div",{className:"menu-container",style:f},_react2.default.createElement(_Menu2.default,{header:i,items:h,onSelect:this.handleSelectOption.bind(this,e)}))}var d=["track",t.visualization.component.displayName||"",t.track.cssClass||""].join(" ");return _react2.default.createElement("div",{key:e,className:d},_react2.default.createElement("div",{className:"track-label"},_react2.default.createElement("span",null,i),_react2.default.createElement("br",null),o,s),_react2.default.createElement("div",{className:"track-content"},r))}},{key:"render",value:function(){var e=this,t=this.props.tracks.map(function(t,a){return e.makeDivForTrack(""+a,t)});return _react2.default.createElement("div",{className:"pileup-root"},_react2.default.createElement("div",{className:"track controls"},_react2.default.createElement("div",{className:"track-label"},""),_react2.default.createElement("div",{className:"track-content"},_react2.default.createElement(_Controls2.default,{contigList:this.state.contigList,range:this.state.range,onChange:this.handleRangeChange.bind(this)}))),t)}},{key:"componentDidUpdate",value:function(e,t){if(this.state.updateSize){for(var a=0;a<this.props.tracks.length;a++)this.trackReactElements[a].setState({updateSize:this.state.updateSize});this.state.updateSize=!1}}}]),t}(_react2.default.Component);Root.displayName="Root",module.exports=Root;

},{"./Controls":183,"./Menu":187,"./VisualizationWrapper":192,"react":176}],191:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_utils=require("./utils"),CHUNK_SIZE=1e3,SequenceStore=function(){function t(){_classCallCheck(this,t),this.contigMap={}}return _createClass(t,[{key:"setRange",value:function(t,e){if(0!==t.length()){if(t.length()!=e.length)throw"setRange length mismatch";var n=this._getSequences(t.contig);n||(n=this.contigMap[t.contig]={});var r=!0,u=!1,a=void 0;try{for(var i,o=this._chunkForInterval(t.interval)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value,s=l.chunkStart+l.offset-t.start();this._setChunk(n,l,e.slice(s,s+l.length))}}catch(t){u=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(u)throw a}}}}},{key:"getAsString",value:function(t){var e=this._getSequences(t.contig);if(!e)return".".repeat(t.length());var n=this._chunkForInterval(t.interval),r="",u=!0,a=!1,i=void 0;try{for(var o,l=n[Symbol.iterator]();!(u=(o=l.next()).done);u=!0){var s=o.value,c=e[s.chunkStart];c?0===s.offset&&s.length==c.length?r+=c:r+=c.slice(s.offset,s.offset+s.length):r+=".".repeat(s.length)}}catch(t){a=!0,i=t}finally{try{!u&&l.return&&l.return()}finally{if(a)throw i}}return r}},{key:"getAsObjects",value:function(t){return _underscore2.default.object(_underscore2.default.map(this.getAsString(t),function(e,n){return[t.contig+":"+(t.start()+n),"."==e?null:e]}))}},{key:"_getChunk",value:function(t,e){return t[e]||".".repeat(CHUNK_SIZE)}},{key:"_chunkForInterval",value:function(t){var e=t.start%CHUNK_SIZE,n=t.start-e,r=[{chunkStart:n,offset:e,length:Math.min(CHUNK_SIZE-e,t.length())}];for(n+=CHUNK_SIZE;n<=t.stop;n+=CHUNK_SIZE)r.push({chunkStart:n,offset:0,length:Math.min(CHUNK_SIZE,t.stop-n+1)});return r}},{key:"_setChunk",value:function(t,e,n){if(0===e.offset&&n.length==CHUNK_SIZE)return void(t[e.chunkStart]=n);var r=this._getChunk(t,e.chunkStart);t[e.chunkStart]=r.slice(0,e.offset)+n+r.slice(e.offset+n.length)}},{key:"_getSequences",value:function(t){return this.contigMap[t]||this.contigMap[(0,_utils.altContigName)(t)]||null}}]),t}();module.exports=SequenceStore;

},{"./utils":223,"underscore":178}],192:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),_get=function(e,t,i){for(var r=!0;r;){var n=e,a=t,o=i;r=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=a,i=o,r=!0,s=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_vizD3utils=require("./viz/d3utils"),_vizD3utils2=_interopRequireDefault(_vizD3utils),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_libMinid3=require("../lib/minid3"),_libMinid32=_interopRequireDefault(_libMinid3),VisualizationWrapper=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.hasDragBeenInitialized=!1,this.state={updateSize:!1,width:0,height:0}}return _inherits(t,e),_createClass(t,[{key:"updateSize",value:function(){var e=_reactDom2.default.findDOMNode(this);if(e&&e instanceof Element){var t=e.parentNode;t&&t instanceof HTMLElement&&this.setState({updateSize:!1,width:t.offsetWidth,height:t.offsetHeight})}}},{key:"componentDidMount",value:function(){var e=this;this.onResizeListener=function(){return e.updateSize()},window.addEventListener("resize",this.onResizeListener),this.updateSize(),this.props.range&&!this.hasDragBeenInitialized&&this.addDragInterface()}},{key:"componentDidUpdate",value:function(){this.props.range&&!this.hasDragBeenInitialized&&this.addDragInterface()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResizeListener)}},{key:"getScale",value:function(){return this.props.range?_vizD3utils2.default.getTrackScale(this.props.range,this.state.width):function(e){return e}}},{key:"addDragInterface",value:function(){function e(){s()}var t=this;this.hasDragBeenInitialized=!0;var i,r,n=_reactDom2.default.findDOMNode(this),a=0,o=function(){_libMinid32.default.event.sourceEvent.stopPropagation(),a=0,i=_underscore2.default.clone(t.props.range),r=t.getScale()},s=function(){if(r&&i){var e=r.invert(-a),n=Math.round(e),o=r(e)-r(n),s={contig:i.contig,start:n,stop:n+(i.stop-i.start),offsetPx:o};t.props.onRangeChange(s)}},u=function(){a+=_libMinid32.default.event.dx,s()},l=_libMinid32.default.behavior.drag().on("dragstart",o).on("drag",u).on("dragend",e);_libMinid32.default.select(n).call(l).on("click",this.handleClick.bind(this))}},{key:"handleClick",value:function(){_libMinid32.default.event.defaultPrevented&&_libMinid32.default.event.stopPropagation()}},{key:"componentWillUpdate",value:function(e,t){t.updateSize&&this.updateSize()}},{key:"render",value:function(){var e=this.props.range,t=this.props.visualization.component;if(!e)return null!=t.displayName?_react2.default.createElement(EmptyTrack,{className:t.displayName}):_react2.default.createElement(EmptyTrack,{className:"EmptyTrack"});var i=_underscore2.default.extend(_underscore2.default.clone(this.props.visualization.options),this.props.options),r=_react2.default.createElement(t,{range:e,source:this.props.source,referenceSource:this.props.referenceSource,width:this.state.width,height:this.state.height,options:i});return _react2.default.createElement("div",{className:"drag-wrapper"},r)}}]),t}(_react2.default.Component);VisualizationWrapper.displayName="VisualizationWrapper";var EmptyTrack=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props.className+" empty";return _react2.default.createElement("div",{className:e})}}]),t}(_react2.default.Component);module.exports=VisualizationWrapper;

},{"../lib/minid3":179,"./viz/d3utils":239,"react":176,"react-dom":24,"underscore":178}],193:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function parseHeader(e){return new _jbinary2.default(e,_formatsBbi2.default.TYPE_SET).read("Header")}function parseCirTree(e){return new _jbinary2.default(e,_formatsBbi2.default.TYPE_SET).read("CirTree")}function generateContigMap(e){var t=e.chromosomeTree.nodes.contents;if(!t)throw"Invalid chromosome tree";return _underscore2.default.object(t.map(function(e){var t=e.id;return[e.key.replace(/\0.*/,""),t]}))}function reverseContigMap(e){var t=[];return _underscore2.default.each(e,function(e,r){t[e]=r}),t}function extractFeaturesFromBlock(e,t,r,n){var a=r.offset-t.start,i=a+r.size,o=e.slice(a+(n?2:0),i),u=n?_pakoLibInflate2.default.inflateRaw(new Uint8Array(o)):o;return new _jbinary2.default(u,_formatsBbi2.default.TYPE_SET).read("BedBlock")}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_pakoLibInflate=require("pako/lib/inflate"),_pakoLibInflate2=_interopRequireDefault(_pakoLibInflate),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_formatsBbi=require("./formats/bbi"),_formatsBbi2=_interopRequireDefault(_formatsBbi),ImmediateBigBed=function(){function e(t,r,n,a){_classCallCheck(this,e),this.remoteFile=t,this.header=r,this.cirTree=n,this.contigMap=a,this.chrIdToContig=reverseContigMap(a)}return _createClass(e,[{key:"getContigId",value:function(e){if(e in this.contigMap)return this.contigMap[e];var t="chr"+e;if(t in this.contigMap)return this.contigMap[t];throw"Invalid contig "+e}},{key:"getChrIdInterval",value:function(e){return new _ContigInterval2.default(this.getContigId(e.contig),e.start(),e.stop())}},{key:"getContigInterval",value:function(e){return new _ContigInterval2.default(this.chrIdToContig[e.contig],e.start(),e.stop())}},{key:"attachContigToBedRows",value:function(e){var t=this;return e.map(function(e){return{contig:t.chrIdToContig[e.chrId],start:e.start,stop:e.stop,rest:e.rest}})}},{key:"findOverlappingBlocks",value:function(e){var t=[],r=[[e.contig,e.start()],[e.contig,e.stop()]];return function e(n){if(n.contents)n.contents.forEach(e);else{var a=[[n.startChromIx,n.startBase],[n.endChromIx,n.endBase]];_utils2.default.tupleRangeOverlaps(a,r)&&t.push(n)}}(this.cirTree.blocks),t}},{key:"fetchFeaturesByBlock",value:function(e){var t=this.findOverlappingBlocks(e);if(0===t.length)return _q2.default.when([]);var r=_Interval2.default.boundingInterval(t.map(function(e){return new _Interval2.default(+e.offset,e.offset+e.size)})),n=this.header.uncompressBufSize>0;return this.remoteFile.getBytes(r.start,r.length()).then(function(e){return t.map(function(t){var a=extractFeaturesFromBlock(e,r,t,n);if(t.startChromIx!=t.endChromIx)throw"Can't handle blocks which span chromosomes!";return{range:new _ContigInterval2.default(t.startChromIx,t.startBase,t.endBase),rows:a}})})}},{key:"fetchFeatures",value:function(e){var t=this;return this.fetchFeaturesByBlock(e).then(function(r){var n=_underscore2.default.flatten(r.map(function(e){return e.rows}));return n=n.filter(function(t){var r=new _ContigInterval2.default(t.chrId,t.start,t.stop-1);return e.intersects(r)}),t.attachContigToBedRows(n)})}},{key:"getFeaturesInRange",value:function(e){return this.fetchFeatures(this.getChrIdInterval(e))}},{key:"getFeatureBlocksOverlapping",value:function(e){var t=this,r=this.getChrIdInterval(e);return this.fetchFeaturesByBlock(r).then(function(e){return e.map(function(e){return{range:t.getContigInterval(e.range),rows:t.attachContigToBedRows(e.rows)}})})}}]),e}(),BigBed=function(){function e(t){var r=this;_classCallCheck(this,e),this.remoteFile=new _RemoteFile2.default(t),this.header=this.remoteFile.getBytes(0,65536).then(parseHeader),this.contigMap=this.header.then(generateContigMap),this.cirTree=this.header.then(function(e){var t=e.unzoomedIndexOffset,n=e.zoomHeaders[0],a=n?n.dataOffset-t:4096;return r.remoteFile.getBytes(t,a).then(parseCirTree)}),this.immediate=_q2.default.all([this.header,this.cirTree,this.contigMap]).then(function(e){var t=_slicedToArray(e,3),n=t[0],a=t[1],i=t[2],o=i;return new ImmediateBigBed(r.remoteFile,n,a,o)}),this.immediate.done()}return _createClass(e,[{key:"getFeaturesInRange",value:function(e,t,r){var n=new _ContigInterval2.default(e,t,r);return this.immediate.then(function(e){return e.getFeaturesInRange(n)})}},{key:"getFeatureBlocksOverlapping",value:function(e){return this.immediate.then(function(t){return t.getFeatureBlocksOverlapping(e)})}}]),e}();module.exports=BigBed;

},{"../ContigInterval":182,"../Interval":185,"../RemoteFile":188,"../utils":223,"./formats/bbi":202,"jbinary":7,"pako/lib/inflate":10,"q":23,"underscore":178}],194:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function strandFlagToString(e){return e?"-":"+"}function makeCigarString(e){return e.map(function(e){var t=e.op;return e.length+t}).join("")}function makeAsciiPhred(e){return 0===e.length?"":_underscore2.default.every(e,function(e){return 255==e})?"*":e.map(function(e){return String.fromCharCode(33+e)}).join("")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),CIGAR_OPS=["M","I","D","N","S","H","P","=","X"],SEQUENCE_VALUES=["=","A","C","M","G","R","S","V","T","W","Y","H","K","D","B","N"],SamRead=function(){function e(t,r,n){_classCallCheck(this,e),this.buffer=t,this.offset=r;var i=this._getJDataView();this.refID=i.getInt32(0),this.ref=n,this.pos=i.getInt32(4),this.l_seq=i.getInt32(16),this.cigarOps=this._getCigarOps(),this.name=this._getName()}return _createClass(e,[{key:"toString",value:function(){var e=this.pos+this.l_seq;return this.ref+":"+(1+this.pos)+"-"+e}},{key:"_getJDataView",value:function(){var e=this.buffer;return new _jdataview2.default(e,0,e.byteLength,!0)}},{key:"getKey",value:function(){return this.offset.toString()}},{key:"_getName",value:function(){var e=this._getJDataView(),t=e.getUint8(8);return e.seek(32),e.getString(t-1)}},{key:"getFlag",value:function(){return this._getJDataView().getUint16(14)}},{key:"getInferredInsertSize",value:function(){return this._getJDataView().getUint16(28)}},{key:"getStrand",value:function(){return strandFlagToString(this.getFlag()&_formatsBamTypes2.default.Flags.READ_STRAND)}},{key:"getFull",value:function(){if(this._full)return this._full;var e=new _jbinary2.default(this.buffer,_formatsBamTypes2.default.TYPE_SET),t=e.read(_formatsBamTypes2.default.ThickAlignment,0);return this._full=t,t}},{key:"getInterval",value:function(){return this._interval?this._interval:new _ContigInterval2.default(this.ref,this.pos,this.pos+this.getReferenceLength()-1)}},{key:"intersects",value:function(e){return e.intersects(this.getInterval())}},{key:"_getCigarOps",value:function(){for(var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=32+t,i=new Array(r),a=0;a<r;a++){var u=e.getUint32(n+4*a);i[a]={op:CIGAR_OPS[15&u],length:u>>4}}return i}},{key:"getQualityScores",value:function(){var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=e.getInt32(16),i=32+t+4*r+Math.ceil(n/2);return e.getBytes(n,i,!0,!0)}},{key:"getCigarString",value:function(){return makeCigarString(this.getFull().cigar)}},{key:"getQualPhred",value:function(){return makeAsciiPhred(this.getQualityScores())}},{key:"getSequence",value:function(){if(this._seq)return this._seq;for(var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=e.getInt32(16),i=32+t+4*r,a=new Array(n),u=Math.ceil(n/2),s=0;s<u;s++){var g=e.getUint8(i+s);a[2*s]=SEQUENCE_VALUES[g>>4],2*s+1<n&&(a[2*s+1]=SEQUENCE_VALUES[15&g])}var l=a.join("");return this._seq=l,l}},{key:"getReferenceLength",value:function(){return e.referenceLengthFromOps(this.cigarOps)}},{key:"getMateProperties",value:function(){var e=this._getJDataView(),t=e.getUint16(14);if(!(t&_formatsBamTypes2.default.Flags.READ_PAIRED))return null;var r=e.getInt32(20),n=e.getInt32(24),i=strandFlagToString(t&_formatsBamTypes2.default.Flags.MATE_STRAND);return{ref:r==this.refID?this.ref:null,pos:n,strand:i}}},{key:"debugString",value:function(){var e=this.getFull();return"Name: "+this.name+"\nFLAG: "+this.getFlag()+"\nPosition: "+this.getInterval().toString()+"\nCIGAR: "+this.getCigarString()+"\nSequence: "+e.seq+"\nQuality:  "+this.getQualPhred()+"\nTags: "+JSON.stringify(e.auxiliary,null,"  ")+"\n    "}}],[{key:"referenceLengthFromOps",value:function(e){var t=0;return e.forEach(function(e){var r=e.op,n=e.length;switch(r){case"M":case"D":case"N":case"=":case"X":t+=n}}),t}}]),e}();module.exports=SamRead;

},{"../ContigInterval":182,"./formats/bamTypes":201,"jbinary":7,"jdataview":8,"underscore":178}],195:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function parseSequenceRecord(e,r){var t=new _jbinary2.default(e,_formatsTwoBitTypes2.default.TYPE_SET),n=t.read("SequenceRecord"),o=t.tell()+8*n.maskBlockCount+4;return{numBases:n.dnaSize,unknownBlockStarts:n.nBlockStarts,unknownBlockLengths:n.nBlockSizes,numMaskBlocks:n.maskBlockCount,maskBlockStarts:[],maskBlockLengths:[],dnaOffsetFromHeader:o,offset:r}}function parseHeader(e){var r=new _jbinary2.default(e,_formatsTwoBitTypes2.default.TYPE_SET),t=r.read("Header");return{sequenceCount:t.sequenceCount,sequences:t.sequences}}function unpackDNA(e,r,t){var n=[];n.length=4*e.byteLength;for(var o=-r,a=0;a<e.byteLength;a++)for(var u=e.getUint8(a),i=6;i>=0;i-=2){var s=BASE_PAIRS[u>>i&3];r>=0&&(n[o]=s),o++}return n.length=t,n}function markUnknownDNA(e,r,t){for(var n=r+e.length-1,o=0;o<t.unknownBlockStarts.length;o++){var a=t.unknownBlockStarts[o],u=t.unknownBlockLengths[o],i=a+u-1,s=Math.max(a,r),c=Math.min(i,n);if(!(c<s))for(var f=s;f<=c;f++)e[f-r]="N"}return e}function IncompleteChunkError(e){this.name="IncompleteChunkError",this.message=e||""}function parseWithException(e){try{return e()}catch(e){throw"RangeError"==e.name||"INDEX_SIZE_ERR"==e.name?(console.log("Error name: "+e.name),new IncompleteChunkError(e)):e}}function retryRemoteGet(e,r,t,n,o){return e.getBytes(r,t).then(o).catch(function(a){if("IncompleteChunkError"==a.name){if(t>n)throw"Couldn't parse the header from the first "+t+" bytes of the file. Corrupted 2bit file?";return retryRemoteGet(e,r,2*t,n,o)}throw a})}var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_formatsTwoBitTypes=require("./formats/twoBitTypes"),_formatsTwoBitTypes2=_interopRequireDefault(_formatsTwoBitTypes),BASE_PAIRS=["T","C","A","G"],FIRST_HEADER_CHUNKSIZE=16384,FIRST_SEQUENCE_CHUNKSIZE=4095,MAX_CHUNKSIZE=1048576;IncompleteChunkError.prototype=Object.create(Error.prototype,{constructor:{value:IncompleteChunkError,writable:!0,configurable:!0}});var TwoBit=function(){function e(r){_classCallCheck(this,e),this.remoteFile=r;var t=_q2.default.defer();this.header=t.promise,retryRemoteGet(this.remoteFile,0,FIRST_HEADER_CHUNKSIZE,MAX_CHUNKSIZE,function(e){var r=parseWithException(function(){return parseHeader(e)});t.resolve(r)}).done()}return _createClass(e,[{key:"getFeaturesInRange",value:function(e,r,t){var n=this;if(r>t)throw"Requested a 2bit range with start > stop ("+r+", "+t+")";return this._getSequenceHeader(e).then(function(e){var o=e.offset+e.dnaOffsetFromHeader,a=Math.floor(o+r/4),u=Math.ceil((t-r+1)/4)+1;return n.remoteFile.getBytes(a,u).then(function(n){return markUnknownDNA(unpackDNA(new DataView(n),r%4,t-r+1),r,e).join("")})}).then(function(e){return e})}},{key:"getContigList",value:function(){return this.header.then(function(e){return e.sequences.map(function(e){return e.name})})}},{key:"_getSequenceHeader",value:function(e){var r=this;return this.header.then(function(t){var n=_underscore2.default.findWhere(t.sequences,{name:e})||_underscore2.default.findWhere(t.sequences,{name:"chr"+e});if(null===n||void 0===n)throw"Invalid contig: "+e;var o=n;return retryRemoteGet(r.remoteFile,o.offset,FIRST_SEQUENCE_CHUNKSIZE,MAX_CHUNKSIZE,function(e){return parseWithException(function(){return parseSequenceRecord(e,o.offset)})})}).then(function(e){return e})}}]),e}();module.exports=TwoBit;

},{"./formats/twoBitTypes":204,"jbinary":7,"q":23,"underscore":178}],196:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var f=0;f<e.length;f++){var s=e[f];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,f,s){return f&&t(e.prototype,f),s&&t(e,s),e}}(),VirtualOffset=function(){function t(e,f){_classCallCheck(this,t),this.coffset=e,this.uoffset=f}return _createClass(t,[{key:"toString",value:function(){return this.coffset+":"+this.uoffset}},{key:"isLessThan",value:function(t){return this.coffset<t.coffset||this.coffset==t.coffset&&this.uoffset<t.uoffset}},{key:"isLessThanOrEqual",value:function(t){return this.coffset<=t.coffset||this.coffset==t.coffset&&this.uoffset<=t.uoffset}},{key:"isEqual",value:function(t){return this.coffset==t.coffset&&this.uoffset==t.uoffset}},{key:"compareTo",value:function(t){return this.coffset-t.coffset||this.uoffset-t.uoffset}},{key:"clone",value:function(){return new t(this.coffset,this.uoffset)}}],[{key:"fromBlob",value:function(e,f){f=f||0;var s=e[f]+256*e[f+1];return new t(e[f+2]+256*e[f+3]+65536*e[f+4]+16777216*e[f+5]+4294967296*e[f+6]+1099511627776*e[f+7],s)}}]),t}();module.exports=VirtualOffset;

},{}],197:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function computeIndexChunks(e){var n=new _jdataview2.default(e,0,e.byteLength,!0),t=1/0,r=[];n.getInt32();for(var i=n.getInt32(),u=0;u<i;u++){r.push(n.tell());for(var a=n.getInt32(),s=0;s<a;s++){n.getUint32();var o=n.getInt32();n.skip(16*o)}var h=n.getInt32();if(h){var l=_VirtualOffset2.default.fromBlob(n.getBytes(8),0),f=l.coffset+(l.uoffset?65536:0);t=f?Math.min(f,t):65536,n.skip(8*(h-1))}}return r.push(n.tell()),{chunks:_underscore2.default.zip(_underscore2.default.initial(r),_underscore2.default.rest(r)),minBlockIndex:t}}function readChunks(e){return new _jbinary2.default(e,_formatsBamTypes2.default.TYPE_SET).read("ChunksArray")}function readIntervals(e){for(var n=new Array(Math.floor(e.length/8)),t=0;t<e.length-7;t+=8)n[t>>3]=_VirtualOffset2.default.fromBlob(e,t);return n}function doChunksOverlap(e,n){return e.chunk_beg.isLessThanOrEqual(n.chunk_end)&&n.chunk_beg.isLessThanOrEqual(e.chunk_end)}function areChunksAdjacent(e,n){return e.chunk_beg.isEqual(n.chunk_end)||e.chunk_end.isEqual(n.chunk_beg)}function optimizeChunkList(e,n){e.sort(function(e,n){var t=e.chunk_beg.compareTo(n.chunk_beg);return 0===t&&(t=e.chunk_end.compareTo(n.chunk_end)),t});var t=[];return e.forEach(function(e){if(!e.chunk_end.isLessThan(n)){if(0===t.length)return void t.push(e);var r=t[t.length-1];doChunksOverlap(r,e)||areChunksAdjacent(r,e)?r.chunk_end.isLessThan(e.chunk_end)&&(r.chunk_end=e.chunk_end):t.push(e)}}),t}function reg2bins(e,n){var t,r=[];for(--n,r.push(0),t=1+(e>>26);t<=1+(n>>26);++t)r.push(t);for(t=9+(e>>23);t<=9+(n>>23);++t)r.push(t);for(t=73+(e>>20);t<=73+(n>>20);++t)r.push(t);for(t=585+(e>>17);t<=585+(n>>17);++t)r.push(t);for(t=4681+(e>>14);t<=4681+(n>>14);++t)r.push(t);return r}var _slicedToArray=function(){function e(e,n){var t=[],r=!0,i=!1,u=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){i=!0,u=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw u}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_VirtualOffset=require("./VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),ImmediateBaiFile=function(){function e(n,t,r){if(_classCallCheck(this,e),this.buffer=n,this.remoteFile=t,n)this.indexChunks=computeIndexChunks(n);else{if(!r)throw"Without index chunks, the entire BAI buffer must be loaded";this.indexChunks=r}this.indexCache=new Array(this.indexChunks.chunks.length),this.intervalsCache=new Array(this.indexChunks.chunks.length)}return _createClass(e,[{key:"getChunksForInterval",value:function(e){var n=this;if(e.contig<0||e.contig>this.indexChunks.chunks.length)return _q2.default.reject("Invalid contig "+e.contig);var t=reg2bins(e.start(),e.stop()+1);return this.indexForContig(e.contig).then(function(r){var i=_underscore2.default.chain(r.bins).filter(function(e){return t.indexOf(e.bin)>=0}).map(function(e){return readChunks(e.chunks)}).flatten().value();return i=optimizeChunkList(i,n.getIntervals(r.intervals,e.contig)[Math.max(0,Math.floor(e.start()/16384))])})}},{key:"indexForContig",value:function(e){var n=this.indexCache[e];if(n)return n;var t=_slicedToArray(this.indexChunks.chunks[e],2),r=t[0],i=t[1];return this.indexCache[e]=this.getSlice(r,i).then(function(e){return new _jbinary2.default(e,_formatsBamTypes2.default.TYPE_SET).read("BaiIndex")}),this.indexCache[e]}},{key:"getSlice",value:function(e,n){return this.buffer?_q2.default.when(this.buffer.slice(e,n)):this.remoteFile.getBytes(e,n-e+1)}},{key:"getIntervals",value:function(e,n){var t=this.intervalsCache[n];return t||(t=readIntervals(e),this.intervalsCache[n]=t,t)}}]),e}(),BaiFile=function(){function e(n,t){_classCallCheck(this,e),this.remoteFile=n,this.immediate=t?_q2.default.when(new ImmediateBaiFile(null,n,t)):n.getAll().then(function(e){return new ImmediateBaiFile(e,n,t)}),this.immediate.done()}return _createClass(e,[{key:"getChunksForInterval",value:function(e){return this.immediate.then(function(n){return n.getChunksForInterval(e)})}},{key:"getHeaderSize",value:function(){return this.immediate.then(function(e){return e.indexChunks.minBlockIndex})}}]),e}();module.exports=BaiFile;

},{"./VirtualOffset":196,"./formats/bamTypes":201,"jbinary":7,"jdataview":8,"q":23,"underscore":178}],198:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function isAlignmentInRange(e,t,n){var r=new _ContigInterval2.default(e.refID,e.pos,e.pos+e.l_seq-1);return n?t.containsInterval(r):r.intersects(t)}function readAlignment(e,t,n,r){var a=e.getInt32(t);if((t+=4)+a>e.byteLength)return null;var i=e.buffer.slice(t,t+a);return{read:new _SamRead2.default(i,n.clone(),r),readLength:4+a}}function readAlignmentsToEnd(e,t,n,r,a,i,u){var f=new _jdataview2.default(e,0,e.byteLength,!0),l=!1,o=0;a=a.clone();var s=0;try{for(;o<e.byteLength;){var c=readAlignment(f,o,a,t);if(!c)break;var d=c.read,h=c.readLength;o+=h,isAlignmentInRange(d,n,r)&&u.push(d),a.uoffset+=h;var _=i[s].buffer.byteLength;a.uoffset>=_&&(a.uoffset-=_,a.coffset+=i[s].compressedLength,s++);var g=new _ContigInterval2.default(d.refID,d.pos,d.pos+1);if(g.contig>n.contig||g.contig==n.contig&&g.start()>n.stop()){l=!0;break}}}catch(e){if(!(e instanceof RangeError))throw e}return{shouldAbort:l,nextOffset:a}}function fetchAlignments(e,t,n,r,a){function i(a){if(0===a.length)return void l.resolve(f);var o=a[0],s=o.chunk_beg.coffset,c=o.chunk_end.coffset,d=Math.min(kMaxFetch,c+65536-s);e.getBytes(s,d).then(function(d){u++,l.notify({numRequests:u});var h={filename:e.url,initialOffset:s},_=_utils2.default.inflateConcatenatedGzip(d,c-s,h),g=_[_.length-1],v=s+g.offset-1,m=null;_.length>1&&v<c&&(m={chunk_beg:new _VirtualOffset2.default(v+1,0),chunk_end:o.chunk_end});var y=_.map(function(e){return e.buffer});y[0]=y[0].slice(o.chunk_beg.uoffset);var p=_utils2.default.concatArrayBuffers(y);if(p.byteLength>0){var b=readAlignmentsToEnd(p,t,n,r,o.chunk_beg,_,f),q=b.shouldAbort,w=b.nextOffset;if(q)return void l.resolve(f);m&&(m.chunk_beg=w)}else m=null;i((null!==m?[m]:[]).concat(_underscore2.default.rest(a)))})}var u=0,f=[],l=_q2.default.defer();return i(a),l.promise}var _slicedToArray=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var u,f=e[Symbol.iterator]();!(r=(u=f.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&f.return&&f.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_bai=require("./bai"),_bai2=_interopRequireDefault(_bai),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_VirtualOffset=require("./VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),_SamRead=require("./SamRead"),_SamRead2=_interopRequireDefault(_SamRead),kMaxFetch=131072,Bam=function(){function e(t,n,r){var a=this;_classCallCheck(this,e),this.remoteFile=t,this.index=n?new _bai2.default(n,r):null,this.hasIndexChunks=!!r;var i=this.index?this.index.getHeaderSize():_q2.default.when(131070);this.header=i.then(function(e){var t=_q2.default.defer();return _q2.default.when().then(function(){t.notify({status:"Fetching BAM header"})}),_utils2.default.pipePromise(t,a.remoteFile.getBytes(0,e).then(function(e){var t=_utils2.default.inflateGzip(e);return new _jbinary2.default(t,_formatsBamTypes2.default.TYPE_SET).read("BamHeader")})),t.promise}),this.header.done()}return _createClass(e,[{key:"readAll",value:function(){return this.remoteFile.getAll().then(function(e){var t=_utils2.default.inflateGzip(e),n=new _jbinary2.default(t,_formatsBamTypes2.default.TYPE_SET),r=n.read("BamFile"),a=new _VirtualOffset2.default(0,0),i=function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength-1)};return r.alignments=r.alignments.map(function(e){var t=new _SamRead2.default(i(e.contents),a,"");return-1!=t.refID&&(t.ref=r.header.references[t.refID].name),t}),r})}},{key:"readAtOffset",value:function(e){var t=this.remoteFile.getBytes(e.coffset,kMaxFetch).then(function(t){var n=_utils2.default.inflateGzip(t);return readAlignment(new _jdataview2.default(n,0,n.byteLength,!0),e.uoffset,e,"").read});return _q2.default.all([t,this.header]).then(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return n.ref=r.references[n.refID].name,n})}},{key:"getContigIndex",value:function(e){return this.header.then(function(t){for(var n=0;n<t.references.length;n++){var r=t.references[n].name;if(r==e||r=="chr"+e||"chr"+r==e)return{idx:n,name:r}}throw"Invalid contig name: "+e})}},{key:"getAlignmentsInRange",value:function(e,t){var n=this,r=t||!1;if(!this.index)throw"Range searches are only supported on BAMs with BAI indices.";var a=this.index;return this.getContigIndex(e.contig).then(function(t){var i=t.idx,u=t.name,f=_q2.default.defer();_q2.default.when().then(function(){f.notify({status:"Fetching BAM index"})});var l=new _ContigInterval2.default(i,e.start(),e.stop()),o=a.getChunksForInterval(l).then(function(e){return fetchAlignments(n.remoteFile,u,l,r,e)}).then(function(e){return e});return _utils2.default.pipePromise(f,o),f.promise})}}]),e}();module.exports=Bam;

},{"../ContigInterval":182,"../utils":223,"./SamRead":194,"./VirtualOffset":196,"./bai":197,"./formats/bamTypes":201,"jbinary":7,"jdataview":8,"q":23,"underscore":178}],199:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function splitCodingExons(t,e){return _underscore2.default.flatten(t.map(function(t){if(t.containsInterval(e))return[new CodingInterval(t.start,e.start-1,!1),new CodingInterval(e.start,e.stop,!0),new CodingInterval(e.stop+1,t.stop,!1)].filter(function(t){return t.start<=t.stop});var n=e.contains(t.start);return n==e.contains(t.stop)?[new CodingInterval(t.start,t.stop,n)]:n?[new CodingInterval(t.start,e.stop,!0),new CodingInterval(e.stop+1,t.stop,!1)]:[new CodingInterval(t.start,e.start-1,!1),new CodingInterval(e.start,t.stop,!0)]}))}var _get=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=i,n=a,r=!0,s=u=void 0}},_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_Interval2=require("../Interval"),_Interval3=_interopRequireDefault(_Interval2),CodingInterval=function(t){function e(t,n,r){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n),this.isCoding=r}return _inherits(e,t),e}(_Interval3.default);module.exports={splitCodingExons:splitCodingExons,CodingInterval:CodingInterval};

},{"../Interval":185,"underscore":178}],200:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),Feature=function(){function e(t){_classCallCheck(this,e),this.id=t.id,this.featureType=t.featureType,this.position=t.position,this.score=t.score}return _createClass(e,[{key:"intersects",value:function(e){return e.intersects(this.position)}}],[{key:"fromGA4GH",value:function(t){var n=new _ContigInterval2.default(t.referenceName,parseInt(t.start),parseInt(t.end));return new e({id:t.id,featureType:t.featureType,position:n,score:1e3})}}]),e}();module.exports=Feature;

},{"../ContigInterval":182}],201:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_VirtualOffset=require("../VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),_helpers=require("./helpers"),SEQUENCE_VALUES=["=","A","C","M","G","R","S","V","T","W","Y","H","K","D","B","N"],CIGAR_OPS=["M","I","D","N","S","H","P","=","X"],ThinAlignment={refID:"int32",pos:"int32",l_read_name:"uint8",MAPQ:"uint8",bin:"uint16",n_cigar_op:"uint16",FLAG:"uint16",l_seq:"int32",next_refID:"int32",next_pos:"int32",tlen:"int32"},Flags={READ_PAIRED:1,PROPER_PAIR:2,READ_UNMAPPED:4,MATE_UNMAPPED:8,READ_STRAND:16,MATE_STRAND:32,FIRST_OF_PAIR:64,SECOND_OF_PAIR:128,NOT_PRIMARY_ALIGNMENT:256,READ_FAILS_VENDOR_QUALITY_CHECK:512,DUPLICATE_READ:1024,SUPPLEMENTARY_ALIGNMENT:2048},ThickAlignment=_underscore2.default.extend(_underscore2.default.clone(ThinAlignment),{read_name:[_helpers.nullString,"l_read_name"],cigar:["array","CigarOp","n_cigar_op"],seq:["FourBitSequence","l_seq"],qual:["array","uint8","l_seq"],auxiliary:["array",{tag:["string",2],val_type:"char",value:["if",function(e){return"B"==e.val_type},{val_type:"char",num_values:"int32",values:["array","AuxiliaryValue","num_values"]},"AuxiliaryValue"]}]}),TYPE_SET={"jBinary.littleEndian":!0,BamHeader:{_magic:["const",["string",4],"BAM",!0],l_text:"int32",text:["string","l_text"],n_ref:"int32",references:["array",{l_name:"int32",name:[_helpers.nullString,"l_name"],l_ref:"int32"},"n_ref"]},BamAlignment:{block_size:"int32",contents:["blob","block_size"]},AuxiliaryValue:["if",function(e){return"A"==e.val_type},"char",["if",function(e){return"c"==e.val_type},"int8",["if",function(e){return"C"==e.val_type},"uint8",["if",function(e){return"s"==e.val_type},"int16",["if",function(e){return"S"==e.val_type},"uint16",["if",function(e){return"i"==e.val_type},"int32",["if",function(e){return"I"==e.val_type},"uint32",["if",function(e){return"f"==e.val_type},"float32",["if",function(e){return"Z"==e.val_type},"string0",["skip",0]]]]]]]]]],CigarOp:_jbinary2.default.Template({baseType:"uint32",read:function(e){var n=this.baseRead();return{length:n>>4,op:CIGAR_OPS[15&n]}}}),FourBitSequence:_jbinary2.default.Template({setParams:function(e){this.lengthField=e;var n=function(n){return Math.floor((+n[e]+1)/2)};this.baseType=["array","uint8",n]},read:function(e){var n=+e[this.lengthField];return this.baseRead().map(function(e,t){return SEQUENCE_VALUES[e>>4]+(2*t+1<n?SEQUENCE_VALUES[15&e]:"")}).join("")}}),BamFile:{header:"BamHeader",alignments:["array","BamAlignment"]},VirtualOffset:_jbinary2.default.Template({baseType:"uint64",read:function(){var e=this.baseRead();return new _VirtualOffset2.default(65536*e.hi+(e.lo>>>16),65535&e.lo)}}),ChunksArray:["array",{chunk_beg:"VirtualOffset",chunk_end:"VirtualOffset"}],IntervalsArray:["array","VirtualOffset"],BaiIndex:{n_bin:"int32",bins:["array",{bin:"uint32",n_chunk:"int32",chunks:["blob",function(e){return 16*e.n_chunk}]},"n_bin"],n_intv:"int32",intervals:["blob",function(e){return 8*e.n_intv}]},BaiFile:{magic:["const",["string",4],"BAI"],n_ref:"int32",indices:["array","BaiIndex","n_ref"],n_no_coor:_helpers.uint64native}};module.exports={TYPE_SET:TYPE_SET,ThinAlignment:ThinAlignment,ThickAlignment:ThickAlignment,Flags:Flags};

},{"../VirtualOffset":196,"./helpers":203,"jbinary":7,"underscore":178}],202:[function(require,module,exports){
"use strict";var _helpers=require("./helpers"),TYPE_SET={"jBinary.littleEndian":!0,Header:{_magic:["const","uint32",2273964779,!0],version:"uint16",zoomLevels:"uint16",chromosomeTreeOffset:"uint64",unzoomedDataOffset:"uint64",unzoomedIndexOffset:"uint64",fieldCount:"uint16",definedFieldCount:"uint16",autoSqlOffset:"uint64",totalSummaryOffset:"uint64",uncompressBufSize:"uint32",extensionOffset:"uint64",zoomHeaders:["array","ZoomHeader","zoomLevels"],totalSummary:(0,_helpers.typeAtOffset)("TotalSummary","totalSummaryOffset"),chromosomeTree:(0,_helpers.typeAtOffset)("BPlusTree","chromosomeTreeOffset")},TotalSummary:{basesCovered:"uint64",minVal:"float64",maxVal:"float64",sumData:"float64",sumSquared:"float64"},ZoomHeader:{reductionLevel:"uint32",_reserved:"uint32",dataOffset:"uint64",indexOffset:"uint64"},BPlusTree:{magic:["const","uint32",2026540177,!0],blockSize:"uint32",keySize:"uint32",valSize:"uint32",itemCount:"uint64",_reserved2:["skip",4],_reserved3:["skip",4],nodes:"BPlusTreeNode"},BPlusTreeNode:{isLeaf:"uint8",_reserved:"uint8",count:"uint16",contents:["array",["if","isLeaf",{key:["string","keySize"],id:"uint32",size:"uint32"},{key:["string","keySize"],offset:"uint64"}],"count"]},CirTree:{_magic:["const","uint32",610839776,!0],blockSize:"uint32",itemCount:"uint64",startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",fileSize:"uint64",itemsPerSlot:"uint32",_reserved:["skip",4],blocks:"CirNode"},CirNode:{isLeaf:"uint8",_reserved:"uint8",count:"uint16",contents:["array",["if","isLeaf","LeafData","NonLeafData"],"count"]},LeafData:{startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",offset:"uint64",size:"uint64"},NonLeafData:{startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",offset:"uint64"},BedEntry:{chrId:"uint32",start:"uint32",stop:"uint32",rest:"string0"},BedBlock:["array","BedEntry"]};module.exports={TYPE_SET:TYPE_SET};

},{"./helpers":203}],203:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function typeAtOffset(e,t){return _jbinary2.default.Template({baseType:e,read:function(e){return 0==+e[t]?null:this.binary.read(this.baseType,+e[t])}})}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),sizedBlock=_jbinary2.default.Type({params:["itemType","lengthField"],resolve:function(e){this.itemType=e(this.itemType)},read:function(e){var t=this.binary.tell(),i=+e[this.lengthField];return this.binary.skip(i),this.binary.slice(t,t+i).read(this.itemType)}}),nullString=_jbinary2.default.Template({setParams:function(e){this.baseType=["binary",e]},read:function(){return this.baseRead().read("string0")}}),uint64native=_jbinary2.default.Template({baseType:"uint64",read:function(){var e=this.baseRead(),t=+e;if(t<0||1+t==t)throw new RangeError("Number out of precise floating point range: "+e);return+e}}),LazyArray=function(){function e(t,i,r){_classCallCheck(this,e),this.bytesPerItem=i,this.jb=t,this.itemType=r,this.length=this.jb.view.byteLength/this.bytesPerItem}return _createClass(e,[{key:"get",value:function(e){return this.jb.seek(e*this.bytesPerItem),this.jb.read(this.itemType)}},{key:"getAll",value:function(){return this.jb.seek(0),this.jb.read(["array",this.itemType,this.length])}}]),e}(),lazyArray=_jbinary2.default.Type({params:["itemType","bytesPerItem","numItems"],read:function(){var e=this.toValue(this.numItems),t=this.toValue(this.bytesPerItem);if(void 0===e||void 0===t)throw"bytesPerItem and numItems must be set for lazyArray";var i=this.binary.tell(),r=e*t,n=this.binary.slice(i,i+r);return this.binary.skip(r),new LazyArray(n,t,this.itemType)}});module.exports={typeAtOffset:typeAtOffset,sizedBlock:sizedBlock,nullString:nullString,uint64native:uint64native,lazyArray:lazyArray};

},{"jbinary":7}],204:[function(require,module,exports){
"use strict";var TYPE_SET={"jBinary.littleEndian":!0,Header:{magic:["const","uint32",440477507,!0],version:["const","uint32",0,!0],sequenceCount:"uint32",reserved:"uint32",sequences:["array","SequenceHeader","sequenceCount"]},SequenceHeader:{nameSize:"uint8",name:["string","nameSize"],offset:"uint32"},SequenceRecord:{dnaSize:"uint32",nBlockCount:"uint32",nBlockStarts:["array","uint32","nBlockCount"],nBlockSizes:["array","uint32","nBlockCount"],maskBlockCount:"uint32"}};module.exports={TYPE_SET:TYPE_SET};

},{}],205:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),GenericFeature=function e(t,i,n){_classCallCheck(this,e),this.id=n.id,this.position=n.position,this.gFeature=n};module.exports=GenericFeature;

},{"../ContigInterval":182}],206:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _intersects(e,t){return t.intersects(new _ContigInterval2.default(e.contig,e.position,e.position+1))}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),Variant=function(){function e(t){_classCallCheck(this,e),this.contig=t.contig,this.position=parseInt(t.position),this.ref=t.ref,this.alt=t.alt,this.id=t.id,this.majorFrequency=t.majorFrequency,this.minorFrequency=t.minorFrequency,this.vcfLine=t.vcfLine}return _createClass(e,[{key:"intersects",value:function(e){return _intersects(this,e)}}],[{key:"fromGA4GH",value:function(t){return new e({contig:t.referenceName,position:parseInt(t.start),id:t.id,ref:t.referenceBases,alt:t.alternateBases,majorFrequency:0,minorFrequency:0,vcfLine:""})}}]),e}();module.exports={Variant:Variant,intersects:_intersects};

},{"../ContigInterval":182}],207:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function extractLocusLine(e){var t=e.indexOf("\t"),n=e.indexOf("\t",t+1);return{contig:e.slice(0,t),position:Number(e.slice(t+1,n)),line:e}}function extractVariant(e){var t=e.split("\t"),n=null,i=null;if(t.length>=7)for(var r=t[7].split(";"),o=0;o<r.length;o++){var a=r[o];if(a.startsWith("AF=")){n=0,i=1;for(var c=a.substr(3).split(","),s=0;s<c.length;s++){var u=parseFloat(c[s]);n=Math.max(n,u),i=Math.min(i,u)}}}var l=t[0],f=Number(t[1]);return new Variant({contig:l,position:f,id:t[2],ref:t[3],alt:t[4],majorFrequency:n,minorFrequency:i,vcfLine:e})}function compareLocusLine(e,t){return e.contig<t.contig?-1:e.contig>t.contig?1:e.position-t.position}function lowestIndex(e,t,n){for(var i=0,r=e.length;i<r;){var o=Math.floor((i+r)/2);n(e[o],t)<0?i=o+1:r=o}return i}function _intersects(e,t){return t.intersects(new _ContigInterval2.default(e.contig,e.position,e.position+1))}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),ImmediateVcfFile=function(){function e(t){_classCallCheck(this,e),this.lines=t,this.contigMap=this.extractContigs()}return _createClass(e,[{key:"extractContigs",value:function(){for(var e=[],t=0;t<this.lines.length;t++){var n=this.lines[t];""!=n.contig&&e.push(n.contig)}var i={};return e.forEach(function(e){"chr"==e.slice(0,3)?i[e.slice(4)]=e:i["chr"+e]=e,i[e]=e}),i}},{key:"getFeaturesInRange",value:function(e){var t=this.lines,n=this.contigMap[e.contig];if(!n)return[];for(var i={contig:n,position:e.start(),line:""},r={contig:n,position:e.stop(),line:""},o=lowestIndex(t,i,compareLocusLine),a=[],c=o;c<t.length&&!(compareLocusLine(t[c],r)>0);c++)a.push(t[c]);return a.map(function(e){return extractVariant(e.line)})}}]),e}(),VcfFile=function(){function e(t){_classCallCheck(this,e),this.remoteFile=t,this.immediate=this.remoteFile.getAllString().then(function(e){return e.split("\n").filter(function(e){return e.length&&"#"!=e[0]}).map(extractLocusLine)}).then(function(e){return e.sort(compareLocusLine),new ImmediateVcfFile(e)}),this.immediate.done()}return _createClass(e,[{key:"getFeaturesInRange",value:function(e){return this.immediate.then(function(t){return t.getFeaturesInRange(e)})}}]),e}(),Variant=function(){function e(t){_classCallCheck(this,e),this.contig=t.contig,this.position=t.position,this.ref=t.ref,this.alt=t.alt,this.id=t.id,this.majorFrequency=t.majorFrequency,this.minorFrequency=t.minorFrequency,this.vcfLine=t.vcfLine}return _createClass(e,[{key:"intersects",value:function(e){return _intersects(this,e)}}],[{key:"fromGA4GH",value:function(t){return new e({contig:t.referenceName,position:t.start,id:t.id,ref:t.referenceBases,alt:t.alternateBases,majorFrequency:0,minorFrequency:0,vcfLine:""})}}]),e}();module.exports={VcfFile:VcfFile,Variant:Variant};

},{"../ContigInterval":182}],208:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function n(e){var n=new _ContigInterval2.default(e.contig,e.start,e.stop);i.trigger("newdata",n),i.trigger("networkdone")}function t(e){return e?_underscore2.default.filter(u,function(n){return n.intersects(e)}):[]}var r=JSON.parse(e),u=[];_underscore2.default.isEmpty(r)||(u=_underscore2.default.values(r.alignments).map(function(e){return new _GA4GHAlignment2.default(e)}));var i={rangeChanged:n,getAlignmentsInRange:t,on:function(){},once:function(){},off:function(){},trigger:function(e,n){}};return _underscore2.default.extend(i,_backbone.Events),i}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_GA4GHAlignment=require("../GA4GHAlignment"),_GA4GHAlignment2=_interopRequireDefault(_GA4GHAlignment);module.exports={create:create};

},{"../ContigInterval":182,"../GA4GHAlignment":184,"backbone":1,"underscore":178}],209:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function r(e){var r=new _ContigInterval2.default(e.contig,e.start,e.stop);a.trigger("newdata",r),a.trigger("networkdone")}function t(e){return e?_underscore2.default.filter(u,function(r){return r.intersects(e)}):[]}var n=JSON.parse(e),u=[];_underscore2.default.isEmpty(n)||(u=_underscore2.default.values(n.features).map(function(e){return _dataFeature2.default.fromGA4GH(e)}));var a={rangeChanged:r,getFeaturesInRange:t,on:function(){},once:function(){},off:function(){},trigger:function(e,r){}};return _underscore2.default.extend(a,_backbone.Events),a}var _dataFeature=require("../data/feature"),_dataFeature2=_interopRequireDefault(_dataFeature),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval);module.exports={create:create};

},{"../ContigInterval":182,"../data/feature":200,"backbone":1,"underscore":178}],210:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function r(e){var r=new _ContigInterval2.default(e.contig,e.start,e.stop);u.trigger("newdata",r),u.trigger("networkdone")}function n(e){return e?_underscore2.default.filter(a,function(r){return r.intersects(e)}):[]}var t=JSON.parse(e),a=[];_underscore2.default.isEmpty(t)||(a=_underscore2.default.values(t.variants).map(function(e){return _dataVariant.Variant.fromGA4GH(e)}));var u={rangeChanged:r,getFeaturesInRange:n,on:function(){},once:function(){},off:function(){},trigger:function(e,r){}};return _underscore2.default.extend(u,_backbone.Events),u}var _dataVariant=require("../data/variant"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval);module.exports={create:create};

},{"../ContigInterval":182,"../data/variant":206,"backbone":1,"underscore":178}],211:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function findReference(e){return _underscore2.default.find(e,function(e){return!!e.track.isReference})}function create(e,r){var t="string"==typeof e?document.getElementById(e):e;if(!t)throw new Error("Attempted to create pileup with non-existent element "+e.toString());var a=r.tracks.map(function(e){var r=e.data?e.data:e.viz.component.defaultSource;if(!r){var t=null!=e.viz.component.displayName?e.viz.component.displayName:"track";throw new Error("Track '"+t+"' doesn't have a default data source; you must specify one when initializing it.")}return{visualization:e.viz,source:r,track:e}}),o=findReference(a);if(!o)throw new Error("You must include at least one track with type=reference");var u=_reactDom2.default.render(_react2.default.createElement(_Root2.default,{referenceSource:o.source,tracks:a,initialRange:r.range}),t),n=null,i=document.body;if(!i)throw new Error("Failed to match: document.body");if(!i.contains(t)){n=new MutationObserver(function(e){e.forEach(function(e){if("childList"===e.type){for(var r=!1,a=0;a<e.addedNodes.length;a++)(e.addedNodes[a]===t||e.addedNodes[a].contains(t))&&(r=!0);if(r){if(!u)throw"ReactElement was not initialized properly";u.setState({updateSize:!0})}}})});var c={attributes:!0,childList:!0,characterData:!0,subtree:!0};n.observe(document,c)}return{setRange:function(e){if(null===u)throw"Cannot call setRange on a destroyed pileup";u.handleRangeChange(e)},getRange:function(){if(null===u)throw"Cannot call getRange on a destroyed pileup";if(null!=u.state.range)return _underscore2.default.clone(u.state.range);throw"Cannot call setRange on non-existent range"},destroy:function(){if(!a)throw"Cannot call destroy() twice on the same pileup";a.forEach(function(e){e.source.off()}),_reactDom2.default.unmountComponentAtNode(t),u=null,o=null,a=null,null!==n&&void 0!==n&&n.disconnect()}}}function makeVizObject(e){return function(r){return r=_underscore2.default.extend({},e.defaultOptions,r),{component:e,options:r}}}var _types=require("./types"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_sourcesTwoBitDataSource=require("./sources/TwoBitDataSource"),_sourcesTwoBitDataSource2=_interopRequireDefault(_sourcesTwoBitDataSource),_sourcesBigBedDataSource=require("./sources/BigBedDataSource"),_sourcesBigBedDataSource2=_interopRequireDefault(_sourcesBigBedDataSource),_sourcesVcfDataSource=require("./sources/VcfDataSource"),_sourcesVcfDataSource2=_interopRequireDefault(_sourcesVcfDataSource),_sourcesBamDataSource=require("./sources/BamDataSource"),_sourcesBamDataSource2=_interopRequireDefault(_sourcesBamDataSource),_sourcesEmptySource=require("./sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_jsonGA4GHAlignmentJson=require("./json/GA4GHAlignmentJson"),_jsonGA4GHAlignmentJson2=_interopRequireDefault(_jsonGA4GHAlignmentJson),_jsonGA4GHVariantJson=require("./json/GA4GHVariantJson"),_jsonGA4GHVariantJson2=_interopRequireDefault(_jsonGA4GHVariantJson),_jsonGA4GHFeatureJson=require("./json/GA4GHFeatureJson"),_jsonGA4GHFeatureJson2=_interopRequireDefault(_jsonGA4GHFeatureJson),_sourcesGA4GHAlignmentSource=require("./sources/GA4GHAlignmentSource"),_sourcesGA4GHAlignmentSource2=_interopRequireDefault(_sourcesGA4GHAlignmentSource),_sourcesGA4GHVariantSource=require("./sources/GA4GHVariantSource"),_sourcesGA4GHVariantSource2=_interopRequireDefault(_sourcesGA4GHVariantSource),_sourcesGA4GHFeatureSource=require("./sources/GA4GHFeatureSource"),_sourcesGA4GHFeatureSource2=_interopRequireDefault(_sourcesGA4GHFeatureSource),_vizCoverageTrack=require("./viz/CoverageTrack"),_vizCoverageTrack2=_interopRequireDefault(_vizCoverageTrack),_vizGenomeTrack=require("./viz/GenomeTrack"),_vizGenomeTrack2=_interopRequireDefault(_vizGenomeTrack),_vizGeneTrack=require("./viz/GeneTrack"),_vizGeneTrack2=_interopRequireDefault(_vizGeneTrack),_vizFeatureTrack=require("./viz/FeatureTrack"),_vizFeatureTrack2=_interopRequireDefault(_vizFeatureTrack),_vizLocationTrack=require("./viz/LocationTrack"),_vizLocationTrack2=_interopRequireDefault(_vizLocationTrack),_vizPileupTrack=require("./viz/PileupTrack"),_vizPileupTrack2=_interopRequireDefault(_vizPileupTrack),_vizScaleTrack=require("./viz/ScaleTrack"),_vizScaleTrack2=_interopRequireDefault(_vizScaleTrack),_vizVariantTrack=require("./viz/VariantTrack"),_vizVariantTrack2=_interopRequireDefault(_vizVariantTrack),_Root=require("./Root"),_Root2=_interopRequireDefault(_Root),pileup={create:create,formats:{bam:_sourcesBamDataSource2.default.create,alignmentJson:_jsonGA4GHAlignmentJson2.default.create,variantJson:_jsonGA4GHVariantJson2.default.create,featureJson:_jsonGA4GHFeatureJson2.default.create,vcf:_sourcesVcfDataSource2.default.create,twoBit:_sourcesTwoBitDataSource2.default.create,bigBed:_sourcesBigBedDataSource2.default.create,GAReadAlignment:_sourcesGA4GHAlignmentSource2.default.create,GAVariant:_sourcesGA4GHVariantSource2.default.create,GAFeature:_sourcesGA4GHFeatureSource2.default.create,empty:_sourcesEmptySource2.default.create},viz:{coverage:makeVizObject(_vizCoverageTrack2.default),genome:makeVizObject(_vizGenomeTrack2.default),genes:makeVizObject(_vizGeneTrack2.default),features:makeVizObject(_vizFeatureTrack2.default),location:makeVizObject(_vizLocationTrack2.default),scale:makeVizObject(_vizScaleTrack2.default),variants:makeVizObject(_vizVariantTrack2.default),pileup:makeVizObject(_vizPileupTrack2.default)},enum:{variants:{allelFrequencyStrategy:_types.AllelFrequencyStrategy}},version:"0.6.10"};module.exports=pileup,"undefined"!=typeof window&&(window.pileup=pileup);

},{"./Root":190,"./json/GA4GHAlignmentJson":208,"./json/GA4GHFeatureJson":209,"./json/GA4GHVariantJson":210,"./sources/BamDataSource":213,"./sources/BigBedDataSource":214,"./sources/EmptySource":215,"./sources/GA4GHAlignmentSource":216,"./sources/GA4GHFeatureSource":217,"./sources/GA4GHVariantSource":218,"./sources/TwoBitDataSource":219,"./sources/VcfDataSource":220,"./types":222,"./viz/CoverageTrack":226,"./viz/FeatureTrack":228,"./viz/GeneTrack":229,"./viz/GenomeTrack":231,"./viz/LocationTrack":232,"./viz/PileupTrack":234,"./viz/ScaleTrack":235,"./viz/VariantTrack":237,"react":176,"react-dom":24,"underscore":178}],212:[function(require,module,exports){
"use strict";function linear(){var n=!1,t=[0,1],r=[0,1],i=function(i){return n&&(i=Math.max(Math.min(i,t[1]),t[0])),(i-t[0])/(t[1]-t[0])*(r[1]-r[0])+r[0]};return i.clamp=function(t){return void 0===t?n:(n=t,this)},i.domain=function(n){return void 0===n?t:(t=n,this)},i.range=function(n){return void 0===n?r:(r=n,this)},i.invert=function(i){if(n)throw"Can't invert a clamped linear scale.";return(i-r[0])/(r[1]-r[0])*(t[1]-t[0])+t[0]},i.nice=function(){var n=t,r=Math.abs(n[1]-n[0]),i=Math.pow(10,Math.floor(Math.log(r/10)/Math.LN10)),o=10/r*i;o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2);var a,e={floor:function(n){return Math.floor(n/i)*i},ceil:function(n){return Math.ceil(n/i)*i}},u=0,c=1,l=t[u],f=t[c];return f<l&&(a=u,u=c,c=a,a=l,l=f,f=a),t[u]=e.floor(l),t[c]=e.ceil(f),this},i}module.exports={linear:linear};

},{}],213:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function createFromBamFile(e){function t(e){var t=e.getKey();i[t]||(i[t]=e)}function n(e){e.references.forEach(function(e){var t=e.name;u[t]=t,u["chr"+t]=t,"chr"==t.slice(0,3)&&(u[t.slice(3)]=t)})}function r(r){var a=_underscore2.default.isEmpty(u)?e.header.then(n):_q2.default.when();return _q2.default.when().then(function(){a.isPending()&&!e.hasIndexChunks&&f.trigger("networkprogress",{status:"Fetching BAM index -- use index chunks to speed this up"})}).done(),a.then(function(){var n=u[r.contig],a=new _ContigInterval2.default(n,r.start,r.stop);if(a.isCoveredBy(o))return _q2.default.when();a=a.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var i=a.complementIntervals(o);return o.push(a),o=_ContigInterval2.default.coalesce(o),_q2.default.all(i.map(function(n){return e.getAlignmentsInRange(n).progress(function(e){f.trigger("networkprogress",e)}).then(function(e){e.forEach(function(e){return t(e)}),f.trigger("networkdone"),f.trigger("newdata",n)})}))})}function a(e){if(!e)return[];if(_underscore2.default.isEmpty(u))return[];var t=new _ContigInterval2.default(u[e.contig],e.start(),e.stop());return _underscore2.default.filter(i,function(e){return e.intersects(t)})}var i={},u={},o=[],f={rangeChanged:function(e){r(e).done()},getAlignmentsInRange:a,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(f,_backbone.Events),f}function create(e){var t=e.url;if(!t)throw new Error("Missing URL from track data: "+JSON.stringify(e));var n=e.indexUrl;if(!n)throw new Error("Missing indexURL from track data: "+JSON.stringify(e));return createFromBamFile(e.indexChunks?new _dataBam2.default(new _RemoteFile2.default(t),new _RemoteFile2.default(n),e.indexChunks):new _dataBam2.default(new _RemoteFile2.default(t),new _RemoteFile2.default(n)))}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataBam=require("../data/bam"),_dataBam2=_interopRequireDefault(_dataBam),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),BASE_PAIRS_PER_FETCH=100,ZERO_BASED=!1;module.exports={create:create,createFromBamFile:createFromBamFile};

},{"../ContigInterval":182,"../RemoteFile":188,"../data/bam":198,"backbone":1,"q":23,"underscore":178}],214:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function parseBedFeature(e){var r=new _ContigInterval2.default(e.contig,e.start,e.stop),t=e.rest.split("\t"),n=t[0]?t[0]:r.toString(),a=t[1]?parseInt(t[1]):1e3,i=(0,_Alignment.strToStrand)(t[2]),u=t[3]&&t[4]?new _Interval2.default(Number(t[3]),Number(t[4])):new _Interval2.default(e.start,e.stop),o=t[9]?t[9]:n,l=t[10]?t[10]:"",d=[];if(t[7]&&t[8]){var c=t[7].replace(/,*$/,"").split(",").map(Number),f=t[8].replace(/,*$/,"").split(",").map(Number);d=_underscore2.default.zip(f,c).map(function(r){var t=_slicedToArray(r,2),n=t[0],a=t[1];return new _Interval2.default(e.start+n,e.start+n+a)})}return{position:r,id:n,score:a,strand:i,codingRegion:u,geneId:o,name:l,exons:d}}function createFromBigBedFile(e){function r(e){a[e.id]||(a[e.id]=e)}function t(e){if(!e)return[];var r=[];return _underscore2.default.each(a,function(t){e.intersects(t.position)&&r.push(t)}),r}function n(t){var n=new _ContigInterval2.default(t.contig,t.start,t.stop);return n.isCoveredBy(i)?_q2.default.when():(i.push(n),i=_ContigInterval2.default.coalesce(i),e.getFeatureBlocksOverlapping(n).then(function(e){e.forEach(function(e){i.push(e.range),i=_ContigInterval2.default.coalesce(i),e.rows.map(parseBedFeature).forEach(function(e){return r(e)}),u.trigger("newdata",e.range)})}))}var a={},i=[],u={rangeChanged:function(e){n(e).done()},getFeaturesInRange:t,on:function(){},off:function(){},trigger:function(e,r){}};return _underscore2.default.extend(u,_backbone.Events),u}function create(e){var r=e.url;if(!r)throw new Error("Missing URL from track: "+JSON.stringify(e));return createFromBigBedFile(new _dataBigBed2.default(r))}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(n=(u=o.next()).done)&&(t.push(u.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_Alignment=require("../Alignment"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_dataBigBed=require("../data/BigBed"),_dataBigBed2=_interopRequireDefault(_dataBigBed),_dataFeature=require("../data/feature"),_dataFeature2=_interopRequireDefault(_dataFeature);module.exports={create:create,createFromBigBedFile:createFromBigBedFile};

},{"../Alignment":181,"../ContigInterval":182,"../Interval":185,"../data/BigBed":193,"../data/feature":200,"backbone":1,"q":23,"underscore":178}],215:[function(require,module,exports){
"use strict";var create=function(){return{rangeChanged:function(){},on:function(){},off:function(){},trigger:function(){}}};module.exports={create:create};

},{}],216:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function n(e){void 0!==e.alignments&&e.alignments.forEach(function(e){var n=_GA4GHAlignment2.default.keyFromGA4GHResponse(e);if(!(n in s))try{var t=new _GA4GHAlignment2.default(e);s[n]=t}catch(e){}})}function t(e){var n=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!n.isCoveredBy(u)){n=n.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var t=n.complementIntervals(u);u.push(n),u=_ContigInterval2.default.coalesce(u),t.forEach(function(e){o(e,null,1)})}}function r(e){c.trigger("networkfailure",e),c.trigger("networkdone"),console.warn(e)}function o(t,i,s){var u=new XMLHttpRequest;u.open("POST",a),u.responseType="json",u.setRequestHeader("Content-Type","application/json"),u.addEventListener("load",function(e){var i=this.response;this.status>=400?r(this.status+" "+this.statusText+" "+JSON.stringify(i)):i.errorCode?r("Error from GA4GH endpoint: "+JSON.stringify(i)):(n(i),c.trigger("newdata",t),i.nextPageToken?o(t,i.nextPageToken,s+1):c.trigger("networkdone"))}),u.addEventListener("error",function(e){r("Request failed with status: "+this.status)}),c.trigger("networkprogress",{numRequests:s});var d=t.contig;void 0!==e.forcedReferenceId&&(d=e.forcedReferenceId),u.send(JSON.stringify({pageToken:i,pageSize:ALIGNMENTS_PER_REQUEST,readGroupIds:[e.readGroupId],referenceId:d,start:t.start(),end:t.stop()}))}function i(e){return e?(e=new _ContigInterval2.default(e.contig,e.start(),e.stop()),_underscore2.default.filter(s,function(n){return n.intersects(e)})):[]}var a=e.endpoint+"/reads/search",s={},u=[],c={rangeChanged:t,getAlignmentsInRange:i,on:function(){},once:function(){},off:function(){},trigger:function(e,n){}};return _underscore2.default.extend(c,_backbone.Events),c}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_GA4GHAlignment=require("../GA4GHAlignment"),_GA4GHAlignment2=_interopRequireDefault(_GA4GHAlignment),ALIGNMENTS_PER_REQUEST=200,ZERO_BASED=!1,BASE_PAIRS_PER_FETCH=100;module.exports={create:create};

},{"../ContigInterval":182,"../GA4GHAlignment":184,"backbone":1,"underscore":178}],217:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function t(e){void 0!==e.features&&e.features.forEach(function(e){var t=new _ContigInterval2.default(e.referenceName,e.start,e.end),r=e.id+t.toString();if(!(r in u)){var n=_dataFeature2.default.fromGA4GH(e);u[r]=n}})}function r(e){var t=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!t.isCoveredBy(s)){t=t.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var r=t.complementIntervals(s);s.push(t),s=_ContigInterval2.default.coalesce(s),r.forEach(function(e){a(e,null,1)})}}function n(e){f.trigger("networkfailure",e),f.trigger("networkdone"),console.warn(e)}function a(r,o,u){var s=new XMLHttpRequest;s.open("POST",i),s.responseType="json",s.setRequestHeader("Content-Type","application/json"),s.addEventListener("load",function(e){var o=this.response;this.status>=400?n(this.status+" "+this.statusText+" "+JSON.stringify(o)):o.errorCode?n("Error from GA4GH Feature endpoint: "+JSON.stringify(o)):(t(o),f.trigger("newdata",r),o.nextPageToken?a(r,o.nextPageToken,u+1):f.trigger("networkdone"))}),s.addEventListener("error",function(e){n("Request failed with status: "+this.status)}),f.trigger("networkprogress",{numRequests:u}),s.send(JSON.stringify({featureSetId:e.featureSetId,pageToken:o,pageSize:FEATURES_PER_REQUEST,referenceName:r.contig,start:r.start(),end:r.stop()}))}function o(e){return e?_underscore2.default.filter(u,function(t){return t.intersects(e)}):[]}var i=e.endpoint+"/features/search",u={},s=[],f={rangeChanged:r,getFeaturesInRange:o,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(f,_backbone.Events),f}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataFeature=require("../data/feature"),_dataFeature2=_interopRequireDefault(_dataFeature),BASE_PAIRS_PER_FETCH=100,FEATURES_PER_REQUEST=400,ZERO_BASED=!1;module.exports={create:create};

},{"../ContigInterval":182,"../data/feature":200,"backbone":1,"underscore":178}],218:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function t(e){void 0!==e.variants&&e.variants.forEach(function(e){var t=e.id;if(!(t in s)){var n=_dataVariant.Variant.fromGA4GH(e);s[t]=n}})}function n(e){var t=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!t.isCoveredBy(u)){t=t.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var n=t.complementIntervals(u);u.push(t),u=_ContigInterval2.default.coalesce(u),n.forEach(function(e){a(e,null,1)})}}function r(e){c.trigger("networkfailure",e),c.trigger("networkdone"),console.warn(e)}function a(n,i,s){var u=new XMLHttpRequest;u.open("POST",o),u.responseType="json",u.setRequestHeader("Content-Type","application/json"),u.addEventListener("load",function(e){var i=this.response;this.status>=400?r(this.status+" "+this.statusText+" "+JSON.stringify(i)):i.errorCode?r("Error from GA4GH Variant endpoint: "+JSON.stringify(i)):(t(i),c.trigger("newdata",n),i.nextPageToken?a(n,i.nextPageToken,s+1):c.trigger("networkdone"))}),u.addEventListener("error",function(e){r("Request failed with status: "+this.status)}),c.trigger("networkprogress",{numRequests:s}),u.send(JSON.stringify({variantSetId:e.variantSetId,pageToken:i,pageSize:VARIANTS_PER_REQUEST,referenceName:n.contig,callSetIds:e.callSetIds,start:n.start(),end:n.stop()}))}function i(e){return e?(e=new _ContigInterval2.default(e.contig,e.start(),e.stop()),_underscore2.default.filter(s,function(t){return intersects(t,e)})):[]}var o=e.endpoint+"/variants/search",s={},u=[],c={rangeChanged:n,getFeaturesInRange:i,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(c,_backbone.Events),c}function intersects(e,t){var n=new _ContigInterval2.default(e.contig,e.position,e.position+1);return t.intersects(n)}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataVariant=require("../data/variant"),BASE_PAIRS_PER_FETCH=100,VARIANTS_PER_REQUEST=400,ZERO_BASED=!1;module.exports={create:create,intersects:intersects};

},{"../ContigInterval":182,"../data/variant":206,"backbone":1,"underscore":178}],219:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){var t=e.url;if(!t)throw new Error("Missing URL from track: "+JSON.stringify(e));return createFromTwoBitFile(new _dataTwoBit2.default(new _RemoteFile2.default(t)))}function testBasePairsToFetch(e){if(!e)return BASE_PAIRS_PER_FETCH;BASE_PAIRS_PER_FETCH=e}Object.defineProperty(exports,"__esModule",{value:!0});var _q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataTwoBit=require("../data/TwoBit"),_dataTwoBit2=_interopRequireDefault(_dataTwoBit),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_SequenceStore=require("../SequenceStore"),_SequenceStore2=_interopRequireDefault(_SequenceStore),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),BASE_PAIRS_PER_FETCH=1e4,MAX_BASE_PAIRS_TO_FETCH=1e5,ZERO_BASED=!0,createFromTwoBitFile=function(e){function t(t){if(t.length()>MAX_BASE_PAIRS_TO_FETCH)return l.trigger("newdatarefused",t),_q2.default.when();_.push(t),_=_ContigInterval2.default.coalesce(_),e.getFeaturesInRange(t.contig,t.start(),t.stop()).then(function(e){e&&(e.length<t.length()&&(t=new _ContigInterval2.default(t.contig,t.start(),t.start()+e.length-1)),a.setRange(t,e))}).then(function(){l.trigger("newdata",t)}).done()}function n(e){if(u.indexOf(e.contig)>=0)return e;var t=_utils2.default.altContigName(e.contig);return u.indexOf(t)>=0?{contig:t,start:e.start,stop:e.stop}:e}function r(e){return c.then(function(){return n(e)})}function i(e){return a.getAsObjects(_ContigInterval2.default.fromGenomeRange(e))}function o(e){return e?a.getAsString(_ContigInterval2.default.fromGenomeRange(e)):""}var u=[],a=new _SequenceStore2.default,_=[],c=e.getContigList().then(function(e){return u=e,l.trigger("contigs",u),e});c.done();var l={rangeChanged:function(e){r(e).then(function(e){var n=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!n.isCoveredBy(_)){n=n.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var r=n.complementIntervals(_),i=!0,o=!1,u=void 0;try{for(var a,c=r[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){t(a.value)}}catch(e){o=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}}}).done()},getRange:i,getRangeAsString:o,contigList:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return u}),normalizeRange:r,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(l,_backbone.Events),l};module.exports={create:create,createFromTwoBitFile:createFromTwoBitFile,testBasePairsToFetch:testBasePairsToFetch};

},{"../ContigInterval":182,"../RemoteFile":188,"../SequenceStore":191,"../data/TwoBit":195,"../utils":223,"backbone":1,"q":23,"underscore":178}],220:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function variantKey(e){return e.contig+":"+e.position}function createFromVcfFile(e){function r(e){var r=variantKey(e);i[r]||(i[r]=e)}function t(t){var n=new _ContigInterval2.default(t.contig,t.start,t.stop);return n.isCoveredBy(o)?_q2.default.when():(n=n.round(BASE_PAIRS_PER_FETCH,ZERO_BASED),o.push(n),o=_ContigInterval2.default.coalesce(o),e.getFeaturesInRange(n).then(function(e){e.forEach(function(e){return r(e)}),a.trigger("newdata",n)}))}function n(e){return e?_underscore2.default.filter(i,function(r){return e.containsLocus(r.contig,r.position)}):[]}var i={},o=[],a={rangeChanged:function(e){t(e).done()},getFeaturesInRange:n,on:function(){},off:function(){},trigger:function(e,r){}};return _underscore2.default.extend(a,_backbone2.default),a}function create(e){var r=e.url,t=e.content;if(r)return createFromVcfFile(new _dataVcf.VcfFile(new _RemoteFile2.default(r)));if(t)return createFromVcfFile(new _dataVcf.VcfFile(new _LocalStringFile2.default(t)));throw new Error("Missing URL or content from track: "+JSON.stringify(e))}Object.defineProperty(exports,"__esModule",{value:!0});var _backbone=require("backbone"),_backbone2=_interopRequireDefault(_backbone),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_LocalStringFile=require("../LocalStringFile"),_LocalStringFile2=_interopRequireDefault(_LocalStringFile),_dataVariant=require("../data/variant"),_dataVcf=require("../data/vcf"),BASE_PAIRS_PER_FETCH=100,ZERO_BASED=!1;module.exports={create:create,createFromVcfFile:createFromVcfFile};

},{"../ContigInterval":182,"../LocalStringFile":186,"../RemoteFile":188,"../data/variant":206,"../data/vcf":207,"backbone":1,"q":23,"underscore":178}],221:[function(require,module,exports){
"use strict";module.exports={BASE_COLORS:{A:"#188712",G:"#C45C16",C:"#0600F9",T:"#F70016",U:"#F70016",N:"black"},LOOSE_TEXT_STYLE:"24px 'Helvetica Neue', Helvetica, Arial, sans-serif",TIGHT_TEXT_STYLE:"bold 12px 'Helvetica Neue', Helvetica, Arial, sans-serif",GENE_ARROW_SIZE:4,GENE_COLOR:"blue",GENE_COMPLEMENT_COLOR:"white",GENE_FONT:"'Helvetica Neue', Helvetica, Arial, sans-serif",GENE_FONT_SIZE:16,GENE_TEXT_PADDING:5,ALIGNMENT_COLOR:"#c8c8c8",ALIGNMENT_MINUS_STRAND_COLOR:"rgb(176, 176, 236)",ALIGNMENT_PLUS_STRAND_COLOR:"rgb(236, 176, 176)",DELETE_COLOR:"black",INSERT_COLOR:"rgb(97, 0, 216)",READ_SPACING:2,READ_HEIGHT:13,COVERAGE_FONT_STYLE:"bold 9px 'Helvetica Neue', Helvetica, Arial, sans-serif",COVERAGE_FONT_COLOR:"black",COVERAGE_TICK_LENGTH:5,COVERAGE_TEXT_PADDING:3,COVERAGE_TEXT_Y_OFFSET:3,COVERAGE_BIN_COLOR:"#a0a0a0",COVERAGE_MIN_BAR_WIDTH_FOR_GAP:8,SCALE_LINE_PADDING:40,SCALE_FONT_STYLE:"bold 12px 'Helvetica Neue', Helvetica, Arial, sans-serif",SCALE_TEXT_Y_OFFSET:5,SCALE_FONT_COLOR:"black",SCALE_ARROW_SIZE:4,LOC_TEXT_PADDING:5,LOC_TICK_LENGTH:10,LOC_TEXT_Y_OFFSET:5,LOC_FONT_STYLE:"13px 'Helvetica Neue', Helvetica, Arial, sans-serif",LOC_FONT_COLOR:"black",VARIANT_STROKE:"blue",VARIANT_FILL:"#ddd",VARIANT_HEIGHT:14};

},{}],222:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=require("react"),_react2=_interopRequireDefault(_react),AllelFrequencyStrategy={Minor:{name:"Minor"},Major:{name:"Major"}};exports.AllelFrequencyStrategy=AllelFrequencyStrategy;

},{"react":176}],223:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function tupleLessOrEqual(e,t){if(e.length!=t.length)throw new Error("Comparing non-equal length tuples");for(var r=0;r<e.length;r++){if(e[r]>t[r])return!1;if(e[r]<t[r])return!0}return!0}function tupleRangeOverlaps(e,t){return tupleLessOrEqual(e[0],t[1])&&tupleLessOrEqual(t[0],e[1])&&tupleLessOrEqual(e[0],e[1])&&tupleLessOrEqual(t[0],t[1])}function concatArrayBuffers(e){var t=e.map(function(e){return e.byteLength}).reduce(function(e,t){return e+t},0),r=new Uint8Array(t),n=0;return e.forEach(function(e){r.set(new Uint8Array(e),n),n+=e.byteLength}),r.buffer}function _inflateOne(e,t){var r=new _pakoLibInflate2.default.Inflate;return r.push(e.slice(t)),{err:r.err,msg:r.msg,buffer:r.result?r.result.buffer:null,total_in:r.strm.total_in}}function cachedInflateOne(e,t,r){if(!r)return _inflateOne(e,t);var n=r.filename+":"+(r.initialOffset+t),a=inflationCache[n];return a&&t+a.total_in>e.byteLength?_inflateOne(e,t):(a||(a=_inflateOne(e,t)),!a.err&&a.buffer&&(inflationCache[n]=a),a)}function inflateConcatenatedGzip(e,t,r){var n=0,a=[];void 0===t&&(t=e.byteLength);do{var u=cachedInflateOne(e,n,r);if(u.err)throw"Gzip error: "+u.msg;u.buffer&&a.push({offset:n,compressedLength:u.total_in,buffer:u.buffer}),n+=u.total_in}while(n<=t&&n<e.byteLength);return a}function inflateGzip(e){return concatArrayBuffers(inflateConcatenatedGzip(e).map(function(e){return e.buffer}))}function altContigName(e){return"chr"==e.slice(0,3)?e.slice(3):"chr"+e}function isChrMatch(e,t){return e==t||"chr"+e==t||e=="chr"+t}function pipePromise(e,t){t.then(e.resolve,e.reject,e.notify)}function scaleRange(e,t){var r=e.stop-e.start,n=Math.floor((e.start+e.stop)/2),a=2*Math.round(t*r/2),u=n-a/2,i=n+a/2;return u<0&&(i-=u,u=0),new _Interval2.default(u,i)}function parseRange(e){var t=/^([^ :]+):([0-9,]+)-([0-9,]+)$/.exec(e);return t?{contig:t[1],start:parseNumberWithCommas(t[2]),stop:parseNumberWithCommas(t[3])}:(t=/^([^ :]+):([0-9,]+)$/.exec(e))?{contig:t[1],start:parseNumberWithCommas(t[2])}:(t=/^([0-9,]+)-([0-9,]+)$/.exec(e))?{start:parseNumberWithCommas(t[1]),stop:parseNumberWithCommas(t[2])}:(t=/^([^ :]+):$/.exec(e)||/^([^0-9][^ :]+)$/.exec(e))?{contig:t[1]}:(t=/^([0-9,]+)$/.exec(e),t?{start:parseNumberWithCommas(t[1])}:null)}function formatInterval(e){return numberWithCommas(e.start)+"-"+numberWithCommas(e.stop)}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function parseNumberWithCommas(e){return parseInt(e.replace(/,/g,""),10)}function flatMap(e,t){return _underscore2.default.flatten(e.map(t),!0)}function computePercentile(e,t){if(0===e.length)return 0;e.sort(function(e,t){return e-t});var r=(e.length-1)*t/100,n=Math.floor(r),a=Math.ceil(r);return n==a?e[n]:e[n]*(r-n)+e[a]*(a-r)}var _pakoLibInflate=require("pako/lib/inflate"),_pakoLibInflate2=_interopRequireDefault(_pakoLibInflate),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),inflationCache={};module.exports={tupleLessOrEqual:tupleLessOrEqual,tupleRangeOverlaps:tupleRangeOverlaps,concatArrayBuffers:concatArrayBuffers,inflateConcatenatedGzip:inflateConcatenatedGzip,inflateGzip:inflateGzip,altContigName:altContigName,pipePromise:pipePromise,scaleRange:scaleRange,parseRange:parseRange,formatInterval:formatInterval,isChrMatch:isChrMatch,flatMap:flatMap,computePercentile:computePercentile};

},{"./Interval":185,"pako/lib/inflate":10,"underscore":178}],224:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_dataGenericFeatureJs=require("../data/genericFeature.js"),_dataGenericFeatureJs2=_interopRequireDefault(_dataGenericFeatureJs),AbstractCache=function(){function e(r){_classCallCheck(this,e),this.groups={},this.refToPileup={},this.referenceSource=r}return _createClass(e,[{key:"pileupForRef",value:function(e){if(e in this.refToPileup)return this.refToPileup[e];var r=_utils2.default.altContigName(e);return r in this.refToPileup?this.refToPileup[r]:[]}},{key:"pileupHeightForRef",value:function(e){var r=this.pileupForRef(e);return r?r.length:0}},{key:"getGroupsOverlapping",value:function(e){return _underscore2.default.filter(this.groups,function(r){return r.span.intersects(e)})}},{key:"anyGroupsOverlapping",value:function(e){for(var r in this.groups){if(this.groups[r].span.intersects(e))return!0}return!1}}]),e}();module.exports=AbstractCache;

},{"../ContigInterval":182,"../Interval":185,"../data/genericFeature.js":205,"../utils":223,"underscore":178}],225:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_pileuputils=require("./pileuputils"),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),CoverageCache=function(){function e(t){_classCallCheck(this,e),this.reads={},this.refToCounts={},this.refToMaxCoverage={},this.referenceSource=t}return _createClass(e,[{key:"addAlignment",value:function(e){var t=e.getKey();if(!(t in this.reads)){this.reads[t]=e;var r=(0,_pileuputils.getOpInfo)(e,this.referenceSource);this.addReadToCoverage(e,r)}}},{key:"updateMismatches",value:function(e){var t=this._canonicalRef(e.contig);this.refToCounts[t]={},this.refToMaxCoverage[t]=0;for(var r in this.reads){var a=this.reads[r];if(a.getInterval().chrOnContig(e.contig)){var o=(0,_pileuputils.getOpInfo)(a,this.referenceSource);this.addReadToCoverage(a,o)}}}},{key:"addReadToCoverage",value:function(e,t){var r=this._canonicalRef(e.ref);r in this.refToCounts||(this.refToCounts[r]={},this.refToMaxCoverage[r]=0);for(var a=this.refToCounts[r],o=this.refToMaxCoverage[r],i=e.getInterval(),n=i.start(),s=i.stop(),u=n;u<=s;u++){var f=a[u];f||(a[u]=f={count:0}),f.count+=1,f.count>o&&(o=f.count)}var l=!0,c=!1,h=void 0;try{for(var v,C=t.mismatches[Symbol.iterator]();!(l=(v=C.next()).done);l=!0){var g,d=v.value,p=a[d.pos];p.mismatches?g=p.mismatches:(g=p.mismatches={},p.ref=this.referenceSource.getRangeAsString({contig:r,start:d.pos,stop:d.pos}));var f=g[d.basePair]||0;g[d.basePair]=1+f}}catch(e){c=!0,h=e}finally{try{!l&&C.return&&C.return()}finally{if(c)throw h}}this.refToMaxCoverage[r]=o}},{key:"maxCoverageForRef",value:function(e){return this.refToMaxCoverage[e]||this.refToMaxCoverage[_utils2.default.altContigName(e)]||0}},{key:"binsForRef",value:function(e){return this.refToCounts[e]||this.refToCounts[_utils2.default.altContigName(e)]||{}}},{key:"_canonicalRef",value:function(e){if(this.refToCounts[e])return e;var t=_utils2.default.altContigName(e);return this.refToCounts[t]?t:e}}]),e}();module.exports=CoverageCache;

},{"../utils":223,"./pileuputils":240}],226:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderBars(e,t,a,r,n,i){if(!_underscore2.default.isEmpty(n)){var o=t(1)-t(0),s=o>_style2.default.COVERAGE_MIN_BAR_WIDTH_FOR_GAP,l=s?1:0,u=function(e,r){return{barX1:Math.round(t(1+e)),barX2:Math.round(t(2+e))-l,barY:Math.round(a(r))}},c={},f=a(0),h=r.start(),_=r.stop(),d=u(h,h in n?n[h].count:0),p=d.barX1;e.fillStyle=_style2.default.COVERAGE_BIN_COLOR,e.beginPath(),e.moveTo(p,f);for(var v=h;v<_;v++){var g=n[v];if(g){e.pushObject(g);var C=u(v,g.count),y=C.barX1,O=C.barX2,T=C.barY;e.lineTo(y,T),e.lineTo(O,T),s&&(e.lineTo(O,f),e.lineTo(O+1,f)),SHOW_MISMATCHES&&!_underscore2.default.isEmpty(g.mismatches)&&(c[v]=g),e.popObject()}}var R=u(_,_ in n?n[_].count:0),b=R.barX2;e.lineTo(b,f),e.closePath(),e.fill(),_underscore2.default.each(c,function(t,r){if(t.mismatches){var n=_underscore2.default.clone(t.mismatches);r=Number(r);var o=_underscore2.default.reduce(n,function(e,t){return e+t});_underscore2.default.max(n)>MISMATCH_THRESHOLD&&o>i.vafColorThreshold*t.count&&o<t.count&&t.ref&&(n[t.ref]=t.count-o);var s=u(r,t.count),l=s.barX1,c=s.barX2;e.pushObject(t);var f=0;_underscore2.default.chain(n).map(function(e,t){return{count:e,base:t}}).filter(function(e){return e.count>MISMATCH_THRESHOLD}).sortBy(function(e){return-e.count}).each(function(t){var n=t.count,i=t.base,o={position:1+r,count:n,base:i};e.pushObject(o),e.fillStyle=_style2.default.BASE_COLORS[i];var s=a(f);e.fillRect(l,s,Math.max(1,c-l),a(f+n)-s),f+=n,e.popObject()}),e.popObject()}})}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,i=t,o=a;r=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=i,a=o,r=!0,s=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_CoverageCache=require("./CoverageCache"),_CoverageCache2=_interopRequireDefault(_CoverageCache),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_style=require("../style"),_style2=_interopRequireDefault(_style),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),SHOW_MISMATCHES=!0,MISMATCH_THRESHOLD=1,CoverageTiledCanvas=function(e){function t(e,a,r){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.cache=e,this.height=Math.max(1,a),this.options=r}return _inherits(t,e),_createClass(t,[{key:"heightForRef",value:function(e){return this.height}},{key:"update",value:function(e,t){this.height=Math.max(1,e),this.options=t}},{key:"yScaleForRef",value:function(e,t,a){var r=this.cache.maxCoverageForRef(e);return _scale2.default.linear().domain([r,0]).range([t,this.height-a]).nice()}},{key:"render",value:function(e,t,a){var r=this.cache.binsForRef(a.contig);renderBars(e,t,this.yScaleForRef(a.contig,0,30),new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1),r,this.options)}}]),t}(_TiledCanvas3.default),CoverageTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _CoverageCache2.default(this.props.referenceSource),this.tiles=new CoverageTiledCanvas(this.cache,this.props.height,this.props.options),this.props.source.on("newdata",function(t){var a=e.cache.maxCoverageForRef(t.contig);e.props.source.getAlignmentsInRange(t).forEach(function(t){return e.cache.addAlignment(t)}),a!=e.cache.maxCoverageForRef(t.contig)?e.tiles.invalidateAll():e.tiles.invalidateRange(t),e.visualizeCoverage()}),this.props.referenceSource.on("newdata",function(t){e.cache.updateMismatches(t),e.tiles.invalidateRange(t),e.visualizeCoverage()})}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)||(this.props.height==e.height&&this.props.options==e.options||(this.tiles.update(this.props.height,this.props.options),this.tiles.invalidateAll()),this.visualizeCoverage())}},{key:"getContext",value:function(){return this.refs.canvas.getContext("2d")}},{key:"renderTicks",value:function(e,t){var a=t.domain()[0];[0,Math.round(a/2),a].forEach(function(a){e.pushObject({value:a,type:"tick"});var r=Math.round(t(a));e.strokeStyle=_style2.default.COVERAGE_FONT_COLOR,_canvasUtils2.default.drawLine(e,0,r,_style2.default.COVERAGE_TICK_LENGTH,r),e.popObject();var n=a+"X";e.pushObject({value:a,label:n,type:"label"}),e.font=_style2.default.COVERAGE_FONT_STYLE;var i=_style2.default.COVERAGE_TICK_LENGTH+_style2.default.COVERAGE_TEXT_PADDING,o=r+_style2.default.COVERAGE_TEXT_Y_OFFSET;e.strokeStyle="white",e.lineWidth=2,e.strokeText(n,i,o),e.lineWidth=1,e.fillStyle=_style2.default.COVERAGE_FONT_COLOR,e.fillText(n,i,o),e.popObject()})}},{key:"visualizeCoverage",value:function(){var e=this.refs.canvas,t=this.props.width,a=this.props.height,r=_ContigInterval2.default.fromGenomeRange(this.props.range);if(0!==t){_d3utils2.default.sizeCanvas(e,t,a);var n=_dataCanvas2.default.getDataContext(this.getContext());n.save(),n.reset(),n.clearRect(0,0,n.canvas.width,n.canvas.height);var i=this.tiles.yScaleForRef(r.contig,10,10);this.tiles.renderToScreen(n,r,this.getScale()),this.renderTicks(n,i),n.restore()}}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,r=_ContigInterval2.default.fromGenomeRange(this.props.range),n=this.getScale(),i=this.cache.binsForRef(r.contig),o=Math.floor(n.invert(a))-1,s=i[o],l=window.alert||console.log;if(s){var u=s.mismatches?_underscore2.default.reduce(s.mismatches,function(e,t){return e+t}):0,c=s.ref||this.props.referenceSource.getRangeAsString({contig:r.contig,start:o,stop:o}),f=_underscore2.default.extend({position:r.contig+":"+(1+o),"read depth":s.count},s.mismatches);f[c]=s.count-u,l(JSON.stringify(f,null,"  "))}}}]),t}(_react2.default.Component);CoverageTrack.displayName="coverage",CoverageTrack.defaultOptions={vafColorThreshold:.2},module.exports=CoverageTrack;

},{"../ContigInterval":182,"../scale":212,"../style":221,"./CoverageCache":225,"./TiledCanvas":236,"./canvas-utils":238,"./d3utils":239,"data-canvas":5,"react":176,"shallow-equals":177,"underscore":178}],227:[function(require,module,exports){
"use strict";var DisplayMode={LOOSE:1,TIGHT:2,BLOCKS:3,HIDDEN:4,getDisplayMode:function(e){return e>=25?DisplayMode.LOOSE:e>=10?DisplayMode.TIGHT:e>=1?DisplayMode.BLOCKS:DisplayMode.HIDDEN},isText:function(e){return e==DisplayMode.LOOSE||e==DisplayMode.TIGHT}};module.exports=DisplayMode;

},{}],228:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderFeatures(e,t,a,r){e.font=_style2.default.GENE_FONT_SIZE+"px "+_style2.default.GENE_FONT,e.textAlign="center",r.forEach(function(r){var i=r.items[0].gFeature;if(r.span.intersects(a)){e.pushObject(i),e.lineWidth=1;var n=Math.max(i.score/1e3,.2);e.fillStyle="rgba(0, 0, 0, "+n+")";var s=Math.round(t(r.span.start())),o=Math.ceil(t(r.span.stop())-t(r.span.start())),u=(0,_pileuputils.yForRow)(r.row);e.fillRect(s-.5,u,o,_style2.default.READ_HEIGHT),e.popObject()}})}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var i=e,n=t,s=a;r=!1,null===i&&(i=Function.prototype);var o=Object.getOwnPropertyDescriptor(i,n);if(void 0!==o){if("value"in o)return o.value;var u=o.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=n,a=s,r=!0,o=l=void 0}},_dataGenericFeature=require("../data/genericFeature"),_dataGenericFeature2=_interopRequireDefault(_dataGenericFeature),_GenericFeatureCache=require("./GenericFeatureCache"),_react=require("react"),_react2=_interopRequireDefault(_react),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_RemoteRequest=require("../RemoteRequest"),_RemoteRequest2=_interopRequireDefault(_RemoteRequest),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_pileuputils=require("./pileuputils"),FeatureTiledCanvas=function(e){function t(e,a,r){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.cache=a,this.options=r}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.options=e}},{key:"heightForRef",value:function(e){return this.cache.pileupHeightForRef(e)*(_style2.default.READ_HEIGHT+_style2.default.READ_SPACING)}},{key:"render",value:function(e,t,a,r,i){var n=this,s=new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1);this.source.getFeaturesInRange(s,i).forEach(function(e){return n.cache.addFeature(new _dataGenericFeature2.default(e.id,e.position,e))}),renderFeatures(e,t,s,this.cache.getGroupsOverlapping(s))}}]),t}(_TiledCanvas3.default),FeatureTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e={height:"100%"},t=null;return this.state.networkStatus&&(t=_react2.default.createElement("div",{ref:"status",className:"network-status-small"},_react2.default.createElement("div",{className:"network-status-message-small"},"Loading features"))),this.props.range.stop-this.props.range.start>_RemoteRequest2.default.MONSTER_REQUEST?_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"center"},"Zoom in to see features"),_react2.default.createElement("canvas",{onClick:this.handleClick.bind(this)})):_react2.default.createElement("div",null,t,_react2.default.createElement("div",{ref:"container",style:e},_react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})))}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _GenericFeatureCache.GenericFeatureCache(this.props.referenceSource),this.tiles=new FeatureTiledCanvas(this.props.source,this.cache,this.props.options),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.referenceSource.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)||(this.tiles.update(this.props.options),this.tiles.invalidateAll(),this.updateVisualization())}},{key:"updateVisualization",value:function(){var e=this.refs.canvas,t=this.props.width,a=this.props.range,r=new _ContigInterval2.default(a.contig,a.start,a.stop);if(0!==t&&void 0!==e){var i=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));i.reset(),i.clearRect(0,0,i.canvas.width,i.canvas.height);var n=_d3utils2.default.findParent(e,"features"),s=(0,_pileuputils.yForRow)(this.cache.pileupHeightForRef(this.props.range.contig));s=_d3utils2.default.heightForCanvas(e,s),n&&(n.style.height=s+"px"),_d3utils2.default.sizeCanvas(e,t,s),this.tiles.renderToScreen(i,r,this.getScale())}}},{key:"handleClick",value:function(e){var t=window.devicePixelRatio,a=e.nativeEvent,r=a.offsetX,i=a.offsetY/t,n=_canvasUtils2.default.getContext(this.refs.canvas),s=new _dataCanvas2.default.ClickTrackingContext(n,r,i),o=this.props.range,u=new _ContigInterval2.default(o.contig,o.start-1,o.stop+1);renderFeatures(s,this.getScale(),u,this.cache.getGroupsOverlapping(u));var l=_underscore2.default.find(s.hits[0],function(e){return e});if(l)if("function"==typeof this.props.options.onFeatureClicked)this.props.options.onFeatureClicked(l);else{var c=window.alert||console.log,p=_underscore2.default.extend({id:l.id,range:l.position.contig+":"+l.position.start()+"-"+l.position.stop(),score:l.score});c(JSON.stringify(p,null,"  "))}}}]),t}(_react2.default.Component);FeatureTrack.displayName="features",module.exports=FeatureTrack;

},{"../ContigInterval":182,"../RemoteRequest":189,"../data/genericFeature":205,"../style":221,"./GenericFeatureCache":230,"./TiledCanvas":236,"./canvas-utils":238,"./d3utils":239,"./pileuputils":240,"data-canvas":5,"react":176,"shallow-equals":177,"underscore":178}],229:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function drawArrow(e,t,a,r,n){var i=t(1+a.start),o=t(1+a.stop);if(!(o-i<=2*_style2.default.GENE_ARROW_SIZE)){var u=(i+o)/2;e.beginPath(),"-"==n?(e.moveTo(u+_style2.default.GENE_ARROW_SIZE,r-_style2.default.GENE_ARROW_SIZE),e.lineTo(u,r),e.lineTo(u+_style2.default.GENE_ARROW_SIZE,r+_style2.default.GENE_ARROW_SIZE)):(e.moveTo(u-_style2.default.GENE_ARROW_SIZE,r-_style2.default.GENE_ARROW_SIZE),e.lineTo(u,r),e.lineTo(u-_style2.default.GENE_ARROW_SIZE,r+_style2.default.GENE_ARROW_SIZE)),e.stroke()}}function drawGeneName(e,t,a,r,n){var i=r.position,o=.5*(t(1+i.start())+t(1+i.stop())),u=r.name||r.id,l=e.measureText(u).width,s=new _Interval2.default(o-.5*l,o+.5*l);if(!_underscore2.default.any(n,function(e){return s.intersects(e)})){n.push(s);var c=a+_style2.default.GENE_FONT_SIZE+_style2.default.GENE_TEXT_PADDING;e.fillText(u,o,c)}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,i=t,o=a;r=!1,null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(o)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=i,a=o,r=!0,u=s=void 0}},_dataGenericFeature=require("../data/genericFeature"),_dataGenericFeature2=_interopRequireDefault(_dataGenericFeature),_GenericFeatureCache=require("./GenericFeatureCache"),_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_dataBedtools=require("../data/bedtools"),_dataBedtools2=_interopRequireDefault(_dataBedtools),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),GeneTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",null)}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _GenericFeatureCache.GenericFeatureCache(this.props.referenceSource),this.props.source.on("newdata",function(t){e.props.source.getFeaturesInRange(t).forEach(function(t){return e.cache.addFeature(new _dataGenericFeature2.default(t.id,t.position,t))}),e.updateVisualization()}),this.props.referenceSource.on("newdata",function(t){e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)||this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.width,r=t.height,n=this.props.range,i=new _ContigInterval2.default(n.contig,n.start,n.stop);if(0!==a){var o=this.getScale(),u=_scale2.default.linear().domain([o.invert(0),o.invert(a)]).range([0,a]).clamp(!0);if(e&&e instanceof Element){e instanceof HTMLCanvasElement&&_d3utils2.default.sizeCanvas(e,a,r);var l=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));l.reset(),l.clearRect(0,0,l.canvas.width,l.canvas.height);var s=Math.round(r/4),c=[];l.font=_style2.default.GENE_FONT_SIZE+"px "+_style2.default.GENE_FONT,l.textAlign="center";_underscore2.default.flatten(_underscore2.default.map(this.cache.getGroupsOverlapping(i),function(e){return e.items})).forEach(function(e){var t=e.gFeature;if(t.position.intersects(i)){l.pushObject(t),l.lineWidth=1,l.strokeStyle=_style2.default.GENE_COLOR,l.fillStyle=_style2.default.GENE_COLOR,_canvasUtils2.default.drawLine(l,u(1+t.position.start()),s+.5,u(1+t.position.stop()),s+.5);_dataBedtools2.default.splitCodingExons(t.exons,t.codingRegion).forEach(function(e){l.fillRect(o(1+e.start),s-3*(e.isCoding?2:1),o(e.stop+2)-o(1+e.start),6*(e.isCoding?2:1))});t.position.interval.complementIntervals(t.exons).forEach(function(e){drawArrow(l,u,e,s+.5,t.strand)}),l.strokeStyle=_style2.default.GENE_COMPLEMENT_COLOR,l.lineWidth=2,t.exons.forEach(function(e){drawArrow(l,u,e,s+.5,t.strand)}),drawGeneName(l,u,s,t,c),l.popObject()}})}}}}]),t}(_react2.default.Component);GeneTrack.displayName="genes",module.exports=GeneTrack;

},{"../ContigInterval":182,"../Interval":185,"../data/bedtools":199,"../data/genericFeature":205,"../scale":212,"../style":221,"./GenericFeatureCache":230,"./canvas-utils":238,"./d3utils":239,"data-canvas":5,"react":176,"react-dom":24,"shallow-equals":177,"underscore":178}],230:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_get=function(e,t,r){for(var i=!0;i;){var n=e,o=t,u=r;i=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,o);if(void 0!==a){if("value"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(u)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=o,r=u,i=!0,a=s=void 0}},_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_dataGenericFeatureJs=require("../data/genericFeature.js"),_dataGenericFeatureJs2=_interopRequireDefault(_dataGenericFeatureJs),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_pileuputils=require("./pileuputils"),_AbstractCache2=require("./AbstractCache"),_AbstractCache3=_interopRequireDefault(_AbstractCache2),GenericFeatureCache=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"groupKey",value:function(e){return e.id||e.position.toString()}},{key:"addFeature",value:function(e){var t=this.groupKey(e);t in this.groups||(this.groups[t]={key:t,span:e.position,row:-1,insert:null,items:[]});var r=this.groups[t];if(!_underscore2.default.find(r.items,function(t){return t.gFeature==e.gFeature})){r.items.push(e),e.position.contig in this.refToPileup||(this.refToPileup[e.position.contig]=[]);var i=this.refToPileup[e.position.contig];r.row=(0,_pileuputils.addToPileup)(r.span.interval,i)}}}]),t}(_AbstractCache3.default);module.exports={GenericFeatureCache:GenericFeatureCache};

},{"../Interval":185,"../data/genericFeature.js":205,"./AbstractCache":224,"./pileuputils":240,"underscore":178}],231:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderGenome(e,t,a,i,r){var n=t(1)-t(0),l=_DisplayMode2.default.getDisplayMode(n),o=_DisplayMode2.default.isText(l);if(l!=_DisplayMode2.default.HIDDEN){e.textAlign="center",l==_DisplayMode2.default.LOOSE?e.font=_style2.default.LOOSE_TEXT_STYLE:l==_DisplayMode2.default.TIGHT&&(e.font=_style2.default.TIGHT_TEXT_STYLE);for(var s=null,u=i.start(),c=i.stop(),f=u;f<=c;f++){var _=r[f-u];"."!=_&&(e.save(),e.pushObject({pos:f,letter:_}),e.fillStyle=_style2.default.BASE_COLORS[_],o?e.fillText(_,t(1.5+f),a-1):n>=_style2.default.COVERAGE_MIN_BAR_WIDTH_FOR_GAP?e.fillRect(t(1+f)+.5,0,n-1.5,a):s===_?e.fillRect(t(1+f)-1.5,0,n+1.5,a):e.fillRect(t(1+f)-.5,0,n+1.5,a),e.popObject(),e.restore(),s=_)}}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),_get=function(e,t,a){for(var i=!0;i;){var r=e,n=t,l=a;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,n);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=n,a=l,i=!0,o=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_DisplayMode=require("./DisplayMode"),_DisplayMode2=_interopRequireDefault(_DisplayMode),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_style=require("../style"),_style2=_interopRequireDefault(_style),GenomeTiledCanvas=function(e){function t(e,a){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.height=Math.max(1,a)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(e,t,a){var i={contig:a.contig,start:Math.max(0,a.start()-1),stop:a.stop()+1},r=this.source.getRangeAsString(i);renderGenome(e,t,this.height,_ContigInterval2.default.fromGenomeRange(i),r)}},{key:"heightForRef",value:function(e){return this.height}},{key:"updateHeight",value:function(e){this.height=e}}]),t}(_TiledCanvas3.default),GenomeTrack=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",null)}},{key:"componentDidMount",value:function(){var e=this;this.tiles=new GenomeTiledCanvas(this.props.source,this.props.height),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||(this.props.height!=e.height&&(this.tiles.updateHeight(this.props.height),this.tiles.invalidateAll()),this.updateVisualization())}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.width,i=t.height,r=t.range;if(0!==a&&e&&e instanceof Element){e instanceof HTMLCanvasElement&&_d3utils2.default.sizeCanvas(e,a,i);var n=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));n.reset(),n.clearRect(0,0,n.canvas.width,n.canvas.height),this.tiles.renderToScreen(n,_ContigInterval2.default.fromGenomeRange(r),this.getScale())}}}]),t}(_react2.default.Component);GenomeTrack.displayName="reference",module.exports=GenomeTrack;

},{"../ContigInterval":182,"../style":221,"./DisplayMode":227,"./TiledCanvas":236,"./canvas-utils":238,"./d3utils":239,"data-canvas":5,"react":176,"react-dom":24,"shallow-equals":177}],232:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,o=t,i=a;r=!1,null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,o);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(i)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=o,a=i,r=!0,u=s=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_sourcesEmptySource=require("../sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),LocationTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"render",value:function(){return _react2.default.createElement("canvas",null)}},{key:"componentDidMount",value:function(){this.updateVisualization()}},{key:"componentDidUpdate",value:function(e,t){this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.range,r=t.width,n=t.height,o=this.getScale();if(e&&e instanceof Element){e instanceof HTMLCanvasElement&&_d3utils2.default.sizeCanvas(e,r,n);var i=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));i.save(),i.reset(),i.clearRect(0,0,i.canvas.width,i.canvas.height);var u=Math.floor((a.stop+a.start)/2),l=Math.round(o(u+1)),s=Math.round(o(u));_canvasUtils2.default.drawLine(i,s-.5,0,s-.5,n),_canvasUtils2.default.drawLine(i,l-.5,0,l-.5,n);var c=n/2;i.fillStyle=_style2.default.LOC_FONT_COLOR,i.font=_style2.default.LOC_FONT_STYLE,i.fillText(u.toLocaleString()+" bp",l+_style2.default.LOC_TICK_LENGTH+_style2.default.LOC_TEXT_PADDING,c+_style2.default.LOC_TEXT_Y_OFFSET),_canvasUtils2.default.drawLine(i,l-.5,c-.5,l+_style2.default.LOC_TICK_LENGTH-.5,c-.5),i.restore()}}}]),t}(_react2.default.Component);LocationTrack.displayName="location",LocationTrack.defaultSource=_sourcesEmptySource2.default.create(),module.exports=LocationTrack;

},{"../sources/EmptySource":215,"../style":221,"./canvas-utils":238,"./d3utils":239,"data-canvas":5,"react":176,"react-dom":24}],233:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function spanAndInsert(e){for(var t=!0;t;){var r=e;if(t=!1,1==r.length)return{insert:null,span:r[0]};if(2!=r.length)throw"Called spanAndInsert with "+r.length+" \notin [1, 2]";if(r[0].chrOnContig(r[1].contig)){var n=r[0].interval,i=r[1].interval,u=n.start<i.start?new _Interval2.default(n.stop,i.start):new _Interval2.default(i.stop,n.start),a=_Interval2.default.boundingInterval([n,i]);return{insert:u,span:new _ContigInterval2.default(r[0].contig,a.start,a.stop)}}e=[r[0]],t=!0}}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var i=e,u=t,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,u);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=u,r=a,n=!0,s=l=void 0}},_AbstractCache2=require("./AbstractCache"),_AbstractCache3=_interopRequireDefault(_AbstractCache2),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_pileuputils=require("./pileuputils"),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),MIN_OUTLIER_PERCENTILE=.5,MAX_OUTLIER_PERCENTILE=99.5,MAX_INSERT_SIZE=3e4,MIN_READS_FOR_OUTLIERS=500,PileupCache=function(e){function t(e,r){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.viewAsPairs=r,this._insertStats=null}return _inherits(t,e),_createClass(t,[{key:"groupKey",value:function(e){return this.viewAsPairs?e.name+":"+e.ref:e.getKey()}},{key:"addAlignment",value:function(e){this._insertStats=null;var t=this.groupKey(e),r=e.getInterval();t in this.groups||(this.groups[t]={key:t,row:-1,insert:null,span:r,items:[]});var n=this.groups[t];if(!_underscore2.default.find(n.items,function(t){return t.read==e})){var i=(0,_pileuputils.getOpInfo)(e,this.referenceSource),u={read:e,strand:e.getStrand(),refLength:r.length(),ops:i.ops,mismatches:i.mismatches};n.items.push(u);var a=null;if(1==n.items.length){if(this.viewAsPairs){var s=e.getMateProperties(),o=[r];s&&s.ref&&s.ref==e.ref&&(a=new _ContigInterval2.default(s.ref,s.pos,s.pos+r.length()),o.push(a)),n=_underscore2.default.extend(n,spanAndInsert(o))}else n.span=r;e.ref in this.refToPileup||(this.refToPileup[e.ref]=[]);var l=this.refToPileup[e.ref];n.row=(0,_pileuputils.addToPileup)(n.span.interval,l)}else if(2==n.items.length){a=n.items[0].read.getInterval();var f=spanAndInsert([r,a]),c=f.span,p=f.insert;n.insert=p,p&&(n.span=c)}}}},{key:"updateMismatches",value:function(e){for(var t in this.groups){var r=this.groups[t].items,n=!0,i=!1,u=void 0;try{for(var a,s=r[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l=o.read;if(l.getInterval().intersects(e)){var f=(0,_pileuputils.getOpInfo)(l,this.referenceSource);o.mismatches=f.mismatches}}}catch(e){i=!0,u=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw u}}}}},{key:"sortReadsAt",value:function(e,t){var r=this.pileupForRef(e),n=_underscore2.default.filter(this.groups,function(r){return _underscore2.default.any(r.items,function(r){return r.read.getInterval().containsLocus(e,t)})}),i=_underscore2.default.mapObject(_underscore2.default.groupBy(n,function(e){return e.row}),function(e){return _underscore2.default.min(e,function(e){return e.span.start()}).span.start()}),u=_underscore2.default.sortBy(_underscore2.default.range(0,r.length),function(e){return i[e]||1/0}),a=[];u.forEach(function(e,t){a[e]=t});var s=_underscore2.default.range(0,r.length).map(function(e){return r[a[e]]}),o=e in this.refToPileup?e:_utils2.default.altContigName(e);this.refToPileup[o]=s,_underscore2.default.each(this.groups,function(t){t.span.chrOnContig(e)&&(t.row=a[t.row])})}},{key:"getInsertStats",value:function(){if(this._insertStats)return this._insertStats;var e=_underscore2.default.map(this.groups,function(e){return e.items[0].read.getInferredInsertSize()}).filter(function(e){return e<MAX_INSERT_SIZE}),t=e.length>=MIN_READS_FOR_OUTLIERS?{minOutlierSize:_utils2.default.computePercentile(e,MIN_OUTLIER_PERCENTILE),maxOutlierSize:_utils2.default.computePercentile(e,MAX_OUTLIER_PERCENTILE)}:{minOutlierSize:0,maxOutlierSize:1/0};return this._insertStats=t,t}}]),t}(_AbstractCache3.default);module.exports=PileupCache;

},{"../ContigInterval":182,"../Interval":185,"../utils":223,"./AbstractCache":224,"./pileuputils":240,"underscore":178}],234:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function isRendered(e){return e.op==_pileuputils.CigarOp.MATCH||e.op==_pileuputils.CigarOp.DELETE||e.op==_pileuputils.CigarOp.INSERT}function renderPileup(e,t,i,a,s,n){function r(i,a,s,n){var r=t(i+1),l=t(i+a+1),o=s+_style2.default.READ_HEIGHT,u=Math.min(READ_STRAND_ARROW_WIDTH,(l-r)/6);e.beginPath(),"R"==n?(e.moveTo(r,s),e.lineTo(l-u,s),e.lineTo(l,(s+o)/2),e.lineTo(l-u,o),e.lineTo(r,o)):(e.moveTo(l,s),e.lineTo(r+u,s),e.lineTo(r,(s+o)/2),e.lineTo(r+u,o),e.lineTo(l,o)),e.fill()}function l(i,a,s){switch(i.op){case _pileuputils.CigarOp.MATCH:if(i.arrow)r(i.pos,i.length,a,i.arrow);else{var n=t(i.pos+1);e.fillRect(n,a,t(i.pos+i.length+1)-n,_style2.default.READ_HEIGHT)}break;case _pileuputils.CigarOp.DELETE:var l=t(i.pos+1),o=t(i.pos+1+i.length),u=a+_style2.default.READ_HEIGHT/2-.5;e.save(),e.fillStyle=_style2.default.DELETE_COLOR,e.fillRect(l,u,o-l,1),e.restore();break;case _pileuputils.CigarOp.INSERT:e.save(),e.fillStyle=_style2.default.INSERT_COLOR;var c=t(i.pos+1)-2,p=a-1,d=a+_style2.default.READ_HEIGHT+2;e.fillRect(c,p,1,d-p),e.restore()}}function o(t,i){e.pushObject(t),e.save(),s&&(e.fillStyle="+"==t.strand?_style2.default.ALIGNMENT_PLUS_STRAND_COLOR:_style2.default.ALIGNMENT_MINUS_STRAND_COLOR),t.ops.forEach(function(e){isRendered(e)&&l(e,i,t)}),t.mismatches.forEach(function(e){return c(e,i)}),e.restore(),e.popObject()}function u(i){if(e.save(),a&&i.insert){var s=i.span.length();s<a.minOutlierSize?e.fillStyle="blue":s>a.maxOutlierSize?e.fillStyle="red":e.fillStyle=_style2.default.ALIGNMENT_COLOR}else e.fillStyle=_style2.default.ALIGNMENT_COLOR;var n=(0,_pileuputils.yForRow)(i.row);if(e.pushObject(i),i.insert){var r=i.insert,l=t(r.start+1),u=t(r.stop+1);e.fillRect(l,n+_style2.default.READ_HEIGHT/2-.5,u-l,1)}i.items.forEach(function(e){return o(e,n)}),e.popObject(),e.restore()}function c(a,s){i.interval.contains(a.pos)&&(e.pushObject(a),e.save(),e.fillStyle=_style2.default.BASE_COLORS[a.basePair],e.globalAlpha=opacityForQuality(a.quality),e.textAlign="center",h?e.fillText(a.basePair,t(1.5+a.pos),s+_style2.default.READ_HEIGHT-2):e.fillRect(t(1+a.pos),s,p-1,_style2.default.READ_HEIGHT),e.restore(),e.popObject())}var p=t(1)-t(0),d=_DisplayMode2.default.getDisplayMode(p),h=_DisplayMode2.default.isText(d);e.font=_style2.default.TIGHT_TEXT_STYLE,n.forEach(function(e){return u(e)})}function opacityForQuality(e){var t=Q_SCALE(e);return t=Math.round(10*t+.5)/10,Math.min(1,t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),_get=function(e,t,i){for(var a=!0;a;){var s=e,n=t,r=i;a=!1,null===s&&(s=Function.prototype);var l=Object.getOwnPropertyDescriptor(s,n);if(void 0!==l){if("value"in l)return l.value;var o=l.get;if(void 0===o)return;return o.call(r)}var u=Object.getPrototypeOf(s);if(null===u)return;e=u,t=n,i=r,a=!0,l=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_pileuputils=require("./pileuputils"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_DisplayMode=require("./DisplayMode"),_DisplayMode2=_interopRequireDefault(_DisplayMode),_PileupCache=require("./PileupCache"),_PileupCache2=_interopRequireDefault(_PileupCache),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),READ_STRAND_ARROW_WIDTH=5,SUPPORTS_DASHES="undefined"!=typeof CanvasRenderingContext2D&&!!CanvasRenderingContext2D.prototype.setLineDash,PileupTiledCanvas=function(e){function t(e,i){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.cache=e,this.options=i}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.options=e}},{key:"heightForRef",value:function(e){return this.cache.pileupHeightForRef(e)*(_style2.default.READ_HEIGHT+_style2.default.READ_SPACING)}},{key:"render",value:function(e,t,i){var a=new _ContigInterval2.default(i.contig,i.start()-1,i.stop()+1),s=this.cache.getGroupsOverlapping(a);renderPileup(e,t,a,this.options.colorByInsert?this.cache.getInsertStats():null,this.options.colorByStrand,s)}}]),t}(_TiledCanvas3.default),MIN_Q=5,MAX_Q=20,Q_SCALE=_scale2.default.linear().domain([MIN_Q,MAX_Q]).range([.1,.9]).clamp(!0),PileupTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e={height:"100%"},t=null,i=this.state.networkStatus;if(i){var a=this.formatStatus(i);t=_react2.default.createElement("div",{ref:"status",className:"network-status"},_react2.default.createElement("div",{className:"network-status-message"},"Loading alignments (",a,")"))}return _react2.default.createElement("div",null,t,_react2.default.createElement("div",{ref:"container",style:e},_react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})))}},{key:"formatStatus",value:function(e){if(e.numRequests){var t=e.numRequests>1?"s":"";return"issued "+e.numRequests+" request"+t}if(e.status)return e.status;throw"invalid"}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _PileupCache2.default(this.props.referenceSource,this.props.options.viewAsPairs),this.tiles=new PileupTiledCanvas(this.cache,this.props.options),this.props.source.on("newdata",function(t){e.updateReads(t),e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.referenceSource.on("newdata",function(t){e.cache.updateMismatches(t),e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){var i=!1;this.props.options!=e.options&&(this.handleOptionsChange(e.options),i=!0),(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)&&!i||this.updateVisualization()}},{key:"handleOptionsChange",value:function(e){this.tiles.invalidateAll(),e.viewAsPairs!=this.props.options.viewAsPairs?(this.cache=new _PileupCache2.default(this.props.referenceSource,this.props.options.viewAsPairs),this.tiles=new PileupTiledCanvas(this.cache,this.props.options),this.updateReads(_ContigInterval2.default.fromGenomeRange(this.props.range))):e.colorByInsert!=this.props.options.colorByInsert?(this.tiles.update(this.props.options),this.tiles.invalidateAll(),this.updateVisualization()):e.hideAlignments!=this.props.options.hideAlignments&&(this.tiles.update(this.props.options),this.updateVisualization()),e.sort!=this.props.options.sort&&this.handleSort()}},{key:"updateReads",value:function(e){var t=this,i=this.cache.anyGroupsOverlapping(e);this.props.source.getAlignmentsInRange(e).forEach(function(e){return t.cache.addAlignment(e)}),!i&&this.cache.anyGroupsOverlapping(e)&&this.handleSort()}},{key:"updateVisualization",value:function(){var e=this.refs.canvas;if(0!==this.props.width){var t=_canvasUtils2.default.getContext(e),i=_dataCanvas2.default.getDataContext(t);this.renderScene(i)}}},{key:"renderScene",value:function(e){var t=this.props.range,i=new _ContigInterval2.default(t.contig,t.start,t.stop),a=this.getScale(),s=this.refs.canvas,n=this.props.width;e.reset(),e.clearRect(0,0,e.canvas.width,e.canvas.height);var r=_d3utils2.default.findParent(s,"pileup");if(this.props.options.hideAlignments)return _d3utils2.default.sizeCanvas(s,n,0),void(r&&(r.style.minHeight="0px"));r&&(r.style.minHeight="");var l=(0,_pileuputils.yForRow)(this.cache.pileupHeightForRef(this.props.range.contig));_d3utils2.default.sizeCanvas(s,n,l),this.tiles.renderToScreen(e,i,a),this.renderCenterLine(e,i,a);var o=_d3utils2.default.findParent(this.refs.canvas,"track-content");o&&(o.scrollLeft=0)}},{key:"renderCenterLine",value:function(e,t,i){var a=Math.floor((t.stop()+t.start())/2),s=Math.ceil(i(a+1)),n=Math.floor(i(a)),r=e.canvas.height;if(e.save(),e.lineWidth=1,SUPPORTS_DASHES&&e.setLineDash([5,5]),s-n<3){var l=Math.round((n+s)/2);_canvasUtils2.default.drawLine(e,l-.5,0,l-.5,r)}else _canvasUtils2.default.drawLine(e,n-.5,0,n-.5,r),_canvasUtils2.default.drawLine(e,s-.5,0,s-.5,r);e.restore()}},{key:"handleSort",value:function(){var e=this.props.range,t=e.start,i=e.stop,a=(t+i)/2;this.cache.sortReadsAt(this.props.range.contig,a),this.tiles.invalidateAll(),this.updateVisualization()}},{key:"handleClick",value:function(e){var t=e.nativeEvent,i=t.offsetX,a=t.offsetY,s=_canvasUtils2.default.getContext(this.refs.canvas),n=new _dataCanvas2.default.ClickTrackingContext(s,i,a),r=this.props.range,l=new _ContigInterval2.default(r.contig,r.start,r.stop);renderPileup(n,this.getScale(),l,null,!1,this.cache.getGroupsOverlapping(l));var o=_underscore2.default.find(n.hits[0],function(e){return e.read}),u=window.alert||console.log;o&&u(o.read.debugString())}}]),t}(_react2.default.Component);PileupTrack.displayName="pileup",PileupTrack.defaultOptions={viewAsPairs:!1,colorByInsert:!0,colorByStrand:!1,hideAlignments:!1},PileupTrack.getOptionsMenu=function(e){return[{key:"view-pairs",label:"View as pairs",checked:e.viewAsPairs},"-",{key:"color-insert",label:"Color by insert size",checked:e.colorByInsert},{key:"color-strand",label:"Color by strand",checked:e.colorByStrand},{key:"hide-alignments",label:"Hide alignments",checked:e.hideAlignments},"-",{key:"sort",label:"Sort alignments"}]};var messageId=1;PileupTrack.handleSelectOption=function(e,t){var i=_underscore2.default.clone(t);return"view-pairs"==e?(i.viewAsPairs=!i.viewAsPairs,i):"color-insert"==e?(i.colorByInsert=!i.colorByInsert,i.colorByInsert&&(i.colorByStrand=!1),i):"color-strand"==e?(i.colorByStrand=!i.colorByStrand,i.colorByStrand&&(i.colorByInsert=!1),i):"hide-alignments"==e?(i.hideAlignments=!i.hideAlignments,i):"sort"==e?(i.sort=messageId++,i):t},module.exports=PileupTrack;

},{"../ContigInterval":182,"../scale":212,"../style":221,"./DisplayMode":227,"./PileupCache":233,"./TiledCanvas":236,"./canvas-utils":238,"./d3utils":239,"./pileuputils":240,"data-canvas":5,"react":176,"shallow-equals":177,"underscore":178}],235:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var l=e,u=t,n=a;r=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,u);if(void 0!==i){if("value"in i)return i.value;var o=i.get;if(void 0===o)return;return o.call(n)}var s=Object.getPrototypeOf(l);if(null===s)return;e=s,t=u,a=n,r=!0,i=s=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_sourcesEmptySource=require("../sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),ScaleTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"render",value:function(){return _react2.default.createElement("canvas",{ref:"canvas"})}},{key:"componentDidMount",value:function(){this.updateVisualization()}},{key:"componentDidUpdate",value:function(e,t){this.updateVisualization()}},{key:"getDOMNode",value:function(){return _reactDom2.default.findDOMNode(this)}},{key:"updateVisualization",value:function(){var e=this.getDOMNode(),t=this.props,a=t.range,r=t.width,l=t.height;_d3utils2.default.sizeCanvas(e,r,l);var u=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));u.save(),u.reset(),u.clearRect(0,0,u.canvas.width,u.canvas.height);var n=a.stop-a.start+1,i=Math.round(r/2),o=Math.round(l/2),s=_d3utils2.default.formatRange(n),c=s.prefix,_=s.unit;u.lineWidth=1,u.fillStyle=_style2.default.SCALE_FONT_COLOR,u.font=_style2.default.SCALE_FONT_STYLE,u.textAlign="center",u.fillText(c+" "+_,i,o+_style2.default.SCALE_TEXT_Y_OFFSET),_canvasUtils2.default.drawLine(u,.5,o-.5,i-_style2.default.SCALE_LINE_PADDING-.5,o-.5),u.beginPath(),u.moveTo(.5+_style2.default.SCALE_ARROW_SIZE,o-_style2.default.SCALE_ARROW_SIZE-.5),u.lineTo(.5,o-.5),u.lineTo(.5+_style2.default.SCALE_ARROW_SIZE,o+_style2.default.SCALE_ARROW_SIZE-.5),u.closePath(),u.fill(),u.stroke(),_canvasUtils2.default.drawLine(u,i+_style2.default.SCALE_LINE_PADDING-.5,o-.5,r-.5,o-.5),u.beginPath(),u.moveTo(r-_style2.default.SCALE_ARROW_SIZE-.5,o-_style2.default.SCALE_ARROW_SIZE-.5),u.lineTo(r-.5,o-.5),u.lineTo(r-_style2.default.SCALE_ARROW_SIZE-.5,o+_style2.default.SCALE_ARROW_SIZE-.5),u.closePath(),u.fill(),u.stroke(),u.restore()}}]),t}(_react2.default.Component);ScaleTrack.displayName="scale",ScaleTrack.defaultSource=_sourcesEmptySource2.default.create(),module.exports=ScaleTrack;

},{"../sources/EmptySource":215,"../style":221,"./canvas-utils":238,"./d3utils":239,"data-canvas":5,"react":176,"react-dom":24}],236:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),EPSILON=1e-6,MIN_PX_PER_BUFFER=500,DEBUG_RENDER_TILE_EDGES=!1,TiledCanvas=function(){function e(){_classCallCheck(this,e),this.tileCache=[]}return _createClass(e,[{key:"renderTile",value:function(e){var t=e.range,r=this.heightForRef(t.contig),n=Math.round(e.pixelsPerBase*t.length());e.buffer=document.createElement("canvas"),_d3utils2.default.sizeCanvas(e.buffer,n,r);var a=_scale2.default.linear().domain([t.start(),t.stop()+1]).range([0,n]),i=_canvasUtils2.default.getContext(e.buffer),u=_dataCanvas2.default.getDataContext(i);this.render(u,a,t)}},{key:"makeNewTiles",value:function(t,r,n){var a=this,i=e.getNewTileRanges(t,n.interval,r),u=i.map(function(e){return{pixelsPerBase:r,range:new _ContigInterval2.default(n.contig,e.start,e.stop),buffer:document.createElement("canvas")}});return u.forEach(function(e){return a.renderTile(e)}),this.tileCache=this.tileCache.concat(u),this.tileCache.sort(function(e,t){return _ContigInterval2.default.compare(e.range,t.range)}),u}},{key:"renderToScreen",value:function(e,t,r){var n=r(1)-r(0),a=this.tileCache.filter(function(e){return Math.abs(e.pixelsPerBase-n)<EPSILON&&t.chrOnContig(e.range.contig)}),i=this.heightForRef(t.contig),u=a.map(function(e){return e.range.interval});t.interval.isCoveredBy(u)||(a=a.concat(this.makeNewTiles(u,n,t))),a.filter(function(e){return t.intersects(e.range)}).forEach(function(t){var n=Math.round(r(t.range.start())),a=Math.round(r(t.range.stop()+1)),u=a-n;0!==t.buffer.height&&(e.drawImage(t.buffer,0,0,t.buffer.width,t.buffer.height,n,0,u,t.buffer.height),DEBUG_RENDER_TILE_EDGES&&(e.save(),e.strokeStyle="black",_canvasUtils2.default.drawLine(e,n-.5,0,n-.5,i),_canvasUtils2.default.drawLine(e,a-.5,0,a-.5,i),e.restore()))})}},{key:"invalidateAll",value:function(){this.tileCache=[]}},{key:"invalidateRange",value:function(e){this.tileCache=this.tileCache.filter(function(t){return!t.range.intersects(e)})}},{key:"heightForRef",value:function(e){throw"Not implemented"}},{key:"render",value:function(e,t,r){throw"Not implemented"}}],[{key:"getNewTileRanges",value:function(e,t,r){var n=Math.ceil(MIN_PX_PER_BUFFER/r),a=Math.floor(t.start/n)*n,i=_underscore2.default.range(a,t.stop,n).map(function(e){return new _Interval2.default(e,e+n-1)}).filter(function(t){return!t.isCoveredBy(e)});return _utils2.default.flatMap(i,function(t){return t.complementIntervals(e)}).filter(function(e){return e.intersects(t)})}}]),e}();module.exports=TiledCanvas;

},{"../ContigInterval":182,"../Interval":185,"../scale":212,"../utils":223,"./canvas-utils":238,"./d3utils":239,"data-canvas":5,"underscore":178}],237:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,i=t,o=a;r=!1,null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=i,a=o,r=!0,l=u=void 0}},_types=require("../types"),_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),VariantTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",{onClick:this.handleClick.bind(this)})}},{key:"componentDidMount",value:function(){var e=this;this.updateVisualization(),this.props.source.on("newdata",function(){e.updateVisualization()})}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.width,r=t.height;if(0!==a){if(!(e&&e instanceof Element))throw new TypeError("canvas is not an Element");e instanceof HTMLCanvasElement&&_d3utils2.default.sizeCanvas(e,a,r);var n=_canvasUtils2.default.getContext(e),i=_dataCanvas2.default.getDataContext(n);this.renderScene(i)}}},{key:"renderScene",value:function(e){var t=this,a=this.props.range,r=new _ContigInterval2.default(a.contig,a.start,a.stop),n=this.props.source.getFeaturesInRange(r),i=this.getScale(),o=this.props.height,l=o-_style2.default.VARIANT_HEIGHT-1;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.reset(),e.save(),e.fillStyle=_style2.default.VARIANT_FILL,e.strokeStyle=_style2.default.VARIANT_STROKE,n.forEach(function(a){var r=1;if(t.props.options.variantHeightByFrequency){var n=null;void 0===t.props.options.allelFrequencyStrategy?n=a.majorFrequency:t.props.options.allelFrequencyStrategy===_types.AllelFrequencyStrategy.Major?n=a.majorFrequency:t.props.options.allelFrequencyStrategy===_types.AllelFrequencyStrategy.Minor?n=a.minorFrequency:console.log("Unknown AllelFrequencyStrategy: ",t.props.options.allelFrequencyStrategy),null!==n&&void 0!==n&&(r=n)}var o=_style2.default.VARIANT_HEIGHT*r,s=l-.5+_style2.default.VARIANT_HEIGHT-o,u=Math.round(i(a.position))-.5,c=Math.max(1,Math.round(i(a.position+1)-i(a.position)));e.pushObject(a),e.fillRect(u,s,c,o),e.strokeRect(u,s,c,o),e.popObject()}),e.restore()}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,r=t.offsetY,n=_reactDom2.default.findDOMNode(this);if(null!=n){if(!(n&&n instanceof Element))throw new TypeError("canvas is not an Element");var i=_canvasUtils2.default.getContext(n),o=new _dataCanvas2.default.ClickTrackingContext(i,a,r);this.renderScene(o);var l=o.hit;if(l&&l.length>0){for(var s=[],u=0;u<l.length;u++)s.push({id:l[u].id,vcfLine:l[u].vcfLine,ref:l[u].ref,alt:l[u].alt});"function"==typeof this.props.options.onVariantClicked?this.props.options.onVariantClicked(s):console.log("Variants clicked: ",s)}}}}]),t}(_react2.default.Component);VariantTrack.displayName="variants",module.exports=VariantTrack;

},{"../ContigInterval":182,"../style":221,"../types":222,"./canvas-utils":238,"./d3utils":239,"data-canvas":5,"react":176,"react-dom":24,"shallow-equals":177}],238:[function(require,module,exports){
"use strict";function getContext(t){return t.getContext("2d")}function drawLine(t,e,n,o,i){t.beginPath(),t.moveTo(e,n),t.lineTo(o,i),t.stroke()}module.exports={getContext:getContext,drawLine:drawLine};

},{}],239:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getTrackScale(e,a){return e?_scale2.default.linear().domain([e.start,e.stop+1]).range([0,a]):_scale2.default.linear()}function formatPrefix(e){var a=0;e&&(e<0&&(e*=-1),a=1+Math.floor(1e-12+Math.log(e)/Math.LN10),a=Math.max(0,Math.min(24,3*Math.floor((a-1)/3))));var t=Math.pow(10,a);return{symbol:formatPrefixes[a/3],scale:function(e){return e/t}}}function formatRange(e){var a=e/1e3,t=formatPrefix(Math.max(1,a)),n=t.symbol+"bp";return{prefix:Math.round(t.scale(e)).toLocaleString(),unit:n}}function heightForCanvas(e,a){return a*window.devicePixelRatio}function sizeCanvas(e,a,t){var n=window.devicePixelRatio;e.width=a*n,e.height=t*n,e.style.width=a+"px",e.style.height=t+"px";var r=e.getContext("2d");null!==r&&r instanceof CanvasRenderingContext2D&&r.scale(n,n)}function findParent(e,a){var t=e;do{if(t.classList.contains(a))return t;t=t.parentElement}while(t);return null}Object.defineProperty(exports,"__esModule",{value:!0});var _scale=require("../scale"),_scale2=_interopRequireDefault(_scale),formatPrefixes=["","k","M","G","T","P","E","Z","Y"];module.exports={heightForCanvas:heightForCanvas,formatRange:formatRange,getTrackScale:getTrackScale,sizeCanvas:sizeCanvas,findParent:findParent};

},{"../scale":212}],240:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function yForRow(e){return e*((arguments.length<=1||void 0===arguments[1]?_style2.default.READ_HEIGHT:arguments[1])+(arguments.length<=2||void 0===arguments[2]?_style2.default.READ_SPACING:arguments[2]))}function pileup(e){for(var r=new Array(e.length),t=[],a=0;a<e.length;a++){for(var n=e[a],i=t.length,o=0;o<t.length;o++)if(!n.intersects(t[o])){i=o;break}r[a]=i,t[i]=n}return r}function addToPileup(e,r){for(var t=-1,a=0;a<r.length;a++){for(var n=r[a],i=!0,o=0;o<n.length;o++)if(n[o].intersects(e)){i=!1;break}if(i){t=a;break}}return-1==t&&(t=r.length,r[t]=[]),r[t].push(e),t}function findMismatches(e,r,t,a){for(var n=[],i=0;i<r.length;i++){var o=t+i,s=e.charAt(i),g=r.charAt(i);s!=g&&"."!=s&&n.push({pos:o,basePair:g,quality:a[i]})}return n}function getArrowIndex(e){var r,t,a=e.cigarOps;if("-"==e.getStrand()){for(r=0;r<a.length;r++)if(t=a[r],"S"!=t.op)return"M"==t.op?r:-1}else for(r=a.length-1;r>=0;r--)if(t=a[r],"S"!=t.op)return"M"==t.op?r:-1;return-1}function getOpInfo(e,r){for(var t=e.cigarOps,a=e.getInterval(),n=a.start(),i=e.getSequence(),o=e.getQualityScores(),s=0,g=n,p=getArrowIndex(e),l=[],u=[],c=0;c<t.length;c++){var f=t[c];if("M"==f.op){var h=r.getRangeAsString({contig:a.contig,start:g,stop:g+f.length-1}),C=i.slice(s,s+f.length);u=u.concat(findMismatches(h,C,g,o))}switch(l.push({op:f.op,length:f.length,pos:g,arrow:null}),f.op){case CigarOp.MATCH:case CigarOp.DELETE:case CigarOp.SKIP:case CigarOp.SEQMATCH:case CigarOp.SEQMISMATCH:g+=f.length}switch(f.op){case CigarOp.MATCH:case CigarOp.INSERT:case CigarOp.SOFTCLIP:case CigarOp.SEQMATCH:case CigarOp.SEQMISMATCH:s+=f.length}}return p>=0&&(l[p].arrow="-"==e.getStrand()?"L":"R"),{ops:l,mismatches:u}}Object.defineProperty(exports,"__esModule",{value:!0});var _style=require("../style"),_style2=_interopRequireDefault(_style),CigarOp={MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",SOFTCLIP:"S",HARDCLIP:"H",PADDING:"P",SEQMATCH:"=",SEQMISMATCH:"X"};module.exports={yForRow:yForRow,pileup:pileup,addToPileup:addToPileup,getOpInfo:getOpInfo,CigarOp:CigarOp};

},{"../style":221}]},{},[211])(211)
});

//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFja2JvbmUvYmFja2JvbmUuanMiLCJub2RlX21vZHVsZXMvYmFzZTY0LWpzL2xpYi9iNjQuanMiLCJub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2J1ZmZlci9ub2RlX21vZHVsZXMvaXNhcnJheS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9kYXRhLWNhbnZhcy9zcmMvZGF0YS1jYW52YXMuanMiLCJub2RlX21vZHVsZXMvaWVlZTc1NC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9qYmluYXJ5L2Rpc3QvYnJvd3Nlci9qYmluYXJ5LmpzIiwibm9kZV9tb2R1bGVzL2pkYXRhdmlldy9kaXN0L25vZGUvamRhdGF2aWV3LmpzIiwibm9kZV9tb2R1bGVzL21lbW9yeS1jYWNoZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi9pbmZsYXRlLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3V0aWxzL2NvbW1vbi5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi91dGlscy9zdHJpbmdzLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvYWRsZXIzMi5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2NvbnN0YW50cy5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2NyYzMyLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvZ3poZWFkZXIuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvemxpYi9pbmZmYXN0LmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvaW5mbGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2luZnRyZWVzLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvbWVzc2FnZXMuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvemxpYi96c3RyZWFtLmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9xL3EuanMiLCJub2RlX21vZHVsZXMvcmVhY3QtZG9tL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9BdXRvRm9jdXNVdGlscy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQmVmb3JlSW5wdXRFdmVudFBsdWdpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQ1NTUHJvcGVydHkuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0NTU1Byb3BlcnR5T3BlcmF0aW9ucy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQ2FsbGJhY2tRdWV1ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQ2hhbmdlRXZlbnRQbHVnaW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0NsaWVudFJlYWN0Um9vdEluZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9ET01DaGlsZHJlbk9wZXJhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0RPTVByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9ET01Qcm9wZXJ0eU9wZXJhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0Rhbmdlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0VudGVyTGVhdmVFdmVudFBsdWdpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRXZlbnRDb25zdGFudHMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0V2ZW50UGx1Z2luSHViLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9FdmVudFBsdWdpblJlZ2lzdHJ5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9FdmVudFBsdWdpblV0aWxzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9FdmVudFByb3BhZ2F0b3JzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9GYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0hUTUxET01Qcm9wZXJ0eUNvbmZpZy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvTGlua2VkVmFsdWVVdGlscy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvT2JqZWN0LmFzc2lnbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUG9vbGVkQ2xhc3MuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEJyb3dzZXJDb21wb25lbnRNaXhpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdENoaWxkUmVjb25jaWxlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDaGlsZHJlbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDbGFzcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdENvbXBvbmVudEVudmlyb25tZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdENvbXBvc2l0ZUNvbXBvbmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDdXJyZW50T3duZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTUJ1dHRvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01Db21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NRmFjdG9yaWVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTUZlYXR1cmVGbGFncy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01JRE9wZXJhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NSW5wdXQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NT3B0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTVNlbGVjdC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01TZWxlY3Rpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NU2VydmVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTVRleHRDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NVGV4dGFyZWEuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RGVmYXVsdEluamVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RFbGVtZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEVsZW1lbnRWYWxpZGF0b3IuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RW1wdHlDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RFcnJvclV0aWxzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEV2ZW50RW1pdHRlck1peGluLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEV2ZW50TGlzdGVuZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0SW5qZWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdElucHV0U2VsZWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEluc3RhbmNlSGFuZGxlcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RJbnN0YW5jZU1hcC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RJc29tb3JwaGljLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE1hcmt1cENoZWNrc3VtLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE1vdW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE11bHRpQ2hpbGQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE5hdGl2ZUNvbXBvbmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3ROb29wVXBkYXRlUXVldWUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0T3duZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UGVyZi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFJlY29uY2lsZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UmVmLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFJvb3RJbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFNlcnZlclJlbmRlcmluZy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RVcGRhdGVRdWV1ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RVcGRhdGVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFZlcnNpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1NWR0RPTVByb3BlcnR5Q29uZmlnLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9TZWxlY3RFdmVudFBsdWdpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU2VydmVyUmVhY3RSb290SW5kZXguanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1NpbXBsZUV2ZW50UGx1Z2luLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9TeW50aGV0aWNDbGlwYm9hcmRFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljQ29tcG9zaXRpb25FdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljRHJhZ0V2ZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9TeW50aGV0aWNFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljRm9jdXNFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljSW5wdXRFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljS2V5Ym9hcmRFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljTW91c2VFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljVG91Y2hFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljVUlFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljV2hlZWxFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvVHJhbnNhY3Rpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1ZpZXdwb3J0TWV0cmljcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvYWNjdW11bGF0ZUludG8uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2FkbGVyMzIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2NhbkRlZmluZVByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9kYW5nZXJvdXNTdHlsZVZhbHVlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9kZXByZWNhdGVkLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9lc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2ZpbmRET01Ob2RlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9mbGF0dGVuQ2hpbGRyZW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2ZvckVhY2hBY2N1bXVsYXRlZC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZ2V0RXZlbnRDaGFyQ29kZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZ2V0RXZlbnRLZXkuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldEV2ZW50TW9kaWZpZXJTdGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZ2V0RXZlbnRUYXJnZXQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldEl0ZXJhdG9yRm4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldFRleHRDb250ZW50QWNjZXNzb3IuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2lzRXZlbnRTdXBwb3J0ZWQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2lzVGV4dElucHV0RWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvb25seUNoaWxkLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9xdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvcmVuZGVyU3VidHJlZUludG9Db250YWluZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL3NldElubmVySFRNTC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvc2V0VGV4dENvbnRlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL3Nob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi90cmF2ZXJzZUFsbENoaWxkcmVuLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi92YWxpZGF0ZURPTU5lc3RpbmcuanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL0V2ZW50TGlzdGVuZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L25vZGVfbW9kdWxlcy9mYmpzL2xpYi9jYW1lbGl6ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvY2FtZWxpemVTdHlsZU5hbWUuanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL2NvbnRhaW5zTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvY3JlYXRlQXJyYXlGcm9tTWl4ZWQuanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL2NyZWF0ZU5vZGVzRnJvbU1hcmt1cC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvZW1wdHlGdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvZW1wdHlPYmplY3QuanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL2ZvY3VzTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvZ2V0QWN0aXZlRWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvZ2V0TWFya3VwV3JhcC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL2h5cGhlbmF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvaHlwaGVuYXRlU3R5bGVOYW1lLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L25vZGVfbW9kdWxlcy9mYmpzL2xpYi9pbnZhcmlhbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL2lzTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvaXNUZXh0Tm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIva2V5TWlycm9yLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L25vZGVfbW9kdWxlcy9mYmpzL2xpYi9rZXlPZi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvbWFwT2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L25vZGVfbW9kdWxlcy9mYmpzL2xpYi9tZW1vaXplU3RyaW5nT25seS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvc2hhbGxvd0VxdWFsLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L25vZGVfbW9kdWxlcy9mYmpzL2xpYi90b0FycmF5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L25vZGVfbW9kdWxlcy9mYmpzL2xpYi93YXJuaW5nLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzIiwibm9kZV9tb2R1bGVzL3NoYWxsb3ctZXF1YWxzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUvdW5kZXJzY29yZS5qcyIsInNyYy9saWIvbWluaWQzLmpzIiwic3JjL21haW4vQWJzdHJhY3RGaWxlLmpzIiwic3JjL21haW4vQWxpZ25tZW50LmpzIiwic3JjL21haW4vQ29udGlnSW50ZXJ2YWwuanMiLCJzcmMvbWFpbi9Db250cm9scy5qcyIsInNyYy9tYWluL0dBNEdIQWxpZ25tZW50LmpzIiwic3JjL21haW4vSW50ZXJ2YWwuanMiLCJzcmMvbWFpbi9Mb2NhbFN0cmluZ0ZpbGUuanMiLCJzcmMvbWFpbi9NZW51LmpzIiwic3JjL21haW4vUmVtb3RlRmlsZS5qcyIsInNyYy9tYWluL1JlbW90ZVJlcXVlc3QuanMiLCJzcmMvbWFpbi9Sb290LmpzIiwic3JjL21haW4vU2VxdWVuY2VTdG9yZS5qcyIsInNyYy9tYWluL1Zpc3VhbGl6YXRpb25XcmFwcGVyLmpzIiwic3JjL21haW4vZGF0YS9CaWdCZWQuanMiLCJzcmMvbWFpbi9kYXRhL1NhbVJlYWQuanMiLCJzcmMvbWFpbi9kYXRhL1R3b0JpdC5qcyIsInNyYy9tYWluL2RhdGEvVmlydHVhbE9mZnNldC5qcyIsInNyYy9tYWluL2RhdGEvYmFpLmpzIiwic3JjL21haW4vZGF0YS9iYW0uanMiLCJzcmMvbWFpbi9kYXRhL2JlZHRvb2xzLmpzIiwic3JjL21haW4vZGF0YS9mZWF0dXJlLmpzIiwic3JjL21haW4vZGF0YS9mb3JtYXRzL2JhbVR5cGVzLmpzIiwic3JjL21haW4vZGF0YS9mb3JtYXRzL2JiaS5qcyIsInNyYy9tYWluL2RhdGEvZm9ybWF0cy9oZWxwZXJzLmpzIiwic3JjL21haW4vZGF0YS9mb3JtYXRzL3R3b0JpdFR5cGVzLmpzIiwic3JjL21haW4vZGF0YS9nZW5lcmljRmVhdHVyZS5qcyIsInNyYy9tYWluL2RhdGEvdmFyaWFudC5qcyIsInNyYy9tYWluL2RhdGEvdmNmLmpzIiwic3JjL21haW4vanNvbi9HQTRHSEFsaWdubWVudEpzb24uanMiLCJzcmMvbWFpbi9qc29uL0dBNEdIRmVhdHVyZUpzb24uanMiLCJzcmMvbWFpbi9qc29uL0dBNEdIVmFyaWFudEpzb24uanMiLCJzcmMvbWFpbi9waWxldXAuanMiLCJzcmMvbWFpbi9zY2FsZS5qcyIsInNyYy9tYWluL3NvdXJjZXMvQmFtRGF0YVNvdXJjZS5qcyIsInNyYy9tYWluL3NvdXJjZXMvQmlnQmVkRGF0YVNvdXJjZS5qcyIsInNyYy9tYWluL3NvdXJjZXMvRW1wdHlTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0dBNEdIQWxpZ25tZW50U291cmNlLmpzIiwic3JjL21haW4vc291cmNlcy9HQTRHSEZlYXR1cmVTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0dBNEdIVmFyaWFudFNvdXJjZS5qcyIsInNyYy9tYWluL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZS5qcyIsInNyYy9tYWluL3NvdXJjZXMvVmNmRGF0YVNvdXJjZS5qcyIsInNyYy9tYWluL3N0eWxlLmpzIiwic3JjL21haW4vdHlwZXMuanMiLCJzcmMvbWFpbi91dGlscy5qcyIsInNyYy9tYWluL3Zpei9BYnN0cmFjdENhY2hlLmpzIiwic3JjL21haW4vdml6L0NvdmVyYWdlQ2FjaGUuanMiLCJzcmMvbWFpbi92aXovQ292ZXJhZ2VUcmFjay5qcyIsInNyYy9tYWluL3Zpei9EaXNwbGF5TW9kZS5qcyIsInNyYy9tYWluL3Zpei9GZWF0dXJlVHJhY2suanMiLCJzcmMvbWFpbi92aXovR2VuZVRyYWNrLmpzIiwic3JjL21haW4vdml6L0dlbmVyaWNGZWF0dXJlQ2FjaGUuanMiLCJzcmMvbWFpbi92aXovR2Vub21lVHJhY2suanMiLCJzcmMvbWFpbi92aXovTG9jYXRpb25UcmFjay5qcyIsInNyYy9tYWluL3Zpei9QaWxldXBDYWNoZS5qcyIsInNyYy9tYWluL3Zpei9QaWxldXBUcmFjay5qcyIsInNyYy9tYWluL3Zpei9TY2FsZVRyYWNrLmpzIiwic3JjL21haW4vdml6L1RpbGVkQ2FudmFzLmpzIiwic3JjL21haW4vdml6L1ZhcmlhbnRUcmFjay5qcyIsInNyYy9tYWluL3Zpei9jYW52YXMtdXRpbHMuanMiLCJzcmMvbWFpbi92aXovZDN1dGlscy5qcyIsInNyYy9tYWluL3Zpei9waWxldXB1dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtDQ09DLFNBQVMsRUFBTSxHQUdkLEdBQXNCLGtCQUFYLFNBQXlCLE9BQU8sSUFDekMsUUFBUSxhQUFjLFNBQVUsV0FBWSxTQUFTLEVBQUcsRUFBRyxHQUd6RCxFQUFLLFNBQVcsRUFBUSxFQUFNLEVBQVMsRUFBRyxTQUl2QyxJQUF1QixtQkFBWixTQUF5QixDQUN6QyxHQUFJLEdBQUksUUFBUSxhQUNoQixHQUFRLEVBQU0sUUFBUyxPQUl2QixHQUFLLFNBQVcsRUFBUSxLQUFVLEVBQUssRUFBSSxFQUFLLFFBQVUsRUFBSyxPQUFTLEVBQUssT0FBUyxFQUFLLElBRzdGLEtBQU0sU0FBUyxFQUFNLEVBQVUsRUFBRyxHQU9sQyxHQUFJLEdBQW1CLEVBQUssU0FHeEIsS0FFQSxFQUFRLEVBQU0sS0FJbEIsR0FBUyxRQUFVLFFBSW5CLEVBQVMsRUFBSSxFQUliLEVBQVMsV0FBYSxXQUVwQixNQURBLEdBQUssU0FBVyxFQUNULE1BTVQsRUFBUyxhQUFjLEVBTXZCLEVBQVMsYUFBYyxDQWV2QixJQUFJLEdBQVMsRUFBUyxR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QUFTLEdBQUUsRUFBRSxHQUFHLE1BQU8sSUFBRyxZQUFhLEdBQUUsUUFBUyxHQUFFLEdBQUcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLFVBQVUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLEdBQUksR0FBRSxVQUFVLEVBQUcsS0FBSSxHQUFJLEtBQUssT0FBRSxLQUFTLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxJQUFJLE1BQU8sR0FBRSxRQUFTLEdBQUUsR0FBRyxNQUFPLFdBQVUsR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLEtBQUssV0FBVyxRQUFTLEdBQUUsRUFBRSxFQUFFLEdBQUcsTUFBTyxHQUFFLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxFQUFFLFNBQVMsSUFBSSxFQUFFLFFBQVMsR0FBRSxHQUFHLE1BQU8sWUFBVyxHQUFJLEdBQUUsVUFBVSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUcsSUFBRyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsRUFBRSxVQUFVLENBQUMsR0FBSSxHQUFFLElBQUssT0FBTyxJQUFJLEdBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxHQUFHLFNBQVMsRUFBRSxHQUFHLE1BQU8sR0FBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxPQUFHLEdBQU8sRUFBRSxHQUFHLEVBQUUsRUFBRSxNQUFNLEtBQUssSUFBSSxRQUFTLEdBQUUsRUFBRSxHQUFHLE1BQU8sR0FBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFJLEdBQUUsTUFBRSxPQUFPLEdBQU8sRUFBRSxFQUFFLDRCQUF3QixLQUFTLEVBQUUsS0FBSyxJQUFJLEtBQUssS0FBSyxFQUFFLEtBQUssS0FBSyxLQUFLLEdBQUcsS0FBSyxZQUFZLEtBQUssR0FBRyxHQUFFLElBQUssR0FBSSxHQUFFLEVBQUUsSUFBSSxRQUFTLEdBQUUsR0FBRyxNQUFPLEdBQUUsRUFBRSxVQUFVLEdBQUcsUUFBUyxHQUFFLEdBQUcsTUFBTyxHQUFFLEVBQUUsVUFBVSxHQUFHLGVBQWUsV0FBVyxHQUFJLElBQUcsRUFBRSxnQkFBZ0IsRUFBRSxVQUFVLGdCQUFnQixNQUFNLEtBQUssVUFBVyxPQUFPLEdBQUUsY0FBYyxFQUFFLFNBQVMsRUFBRSxPQUFPLFFBQVEsRUFBRSxZQUFZLEVBQUUsT0FBTyxTQUFTLE1BQU0sS0FBSyxHQUFJLEdBQUUsRUFBRSxRQUFTLFNBQVMsSUFBRyxRQUFTLElBQUksV0FBVyxRQUFTLEdBQUUsR0FBRyxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFFLEtBQUksRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLFdBQVcsS0FBSyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxHQUFHLEdBQUcsR0FBRyxFQUFFLFFBQVEsRUFBRSxJQUFJLEdBQUcsR0FBRyxJQUFLLE9BQU0sR0FBRyxFQUFFLEVBQUUsV0FBVyxLQUFLLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxPQUFPLEdBQUcsR0FBRyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksR0FBRyxJQUFJLElBQUksR0FBRyxHQUFHLEVBQUUsUUFBUSxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUksT0FBTSxFQUFFLEVBQUUsV0FBVyxLQUFLLEdBQUcsRUFBRSxPQUFPLEdBQUcsR0FBRyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksR0FBRyxJQUFJLElBQUksR0FBRyxHQUFHLEVBQUUsUUFBUSxHQUFHLElBQUksR0FBRyxJQUFJLElBQUksR0FBRyxHQUFHLEVBQUUsT0FBTyxHQUFHLEdBQUcsTUFBTyxHQUFFLFFBQVMsR0FBRSxHQUFHLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBRSxLQUFJLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsWUFBWSxFQUFFLElBQUksR0FBRyxFQUFHLEtBQUksR0FBRyxFQUFFLEtBQU0sSUFBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsWUFBWSxFQUFFLElBQUksR0FBRyxFQUFHLEtBQUksR0FBRyxFQUFFLEtBQU0sSUFBRyxPQUFPLGFBQWEsR0FBRyxHQUFHLEdBQUcsSUFBSSxFQUFHLEdBQUUsQ0FBQyxHQUEyQixLQUF4QixFQUFFLElBQUksRUFBRSxXQUFXLE1BQVcsTUFBTyxFQUFFLEdBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxHQUFHLEVBQUcsS0FBSSxHQUFHLEVBQUUsS0FBTSxJQUFHLE9BQU8sY0FBYyxHQUFHLElBQUksR0FBRyxHQUFHLElBQUksRUFBRyxHQUFFLENBQUMsR0FBMkIsS0FBeEIsRUFBRSxJQUFJLEVBQUUsV0FBVyxNQUFXLE1BQU8sRUFBRSxHQUFFLEVBQUUsU0FBUyxFQUFFLElBQUksR0FBRyxFQUFHLEtBQUksR0FBRyxFQUFFLEtBQU0sSUFBRyxPQUFPLGNBQWMsRUFBRSxJQUFJLEVBQUUsR0FBRyxNQUFPLEdBQUUsR0FBSSxHQUFFLG1FQUFtRSxJQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUUsSUFBSSxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsRUFBRyxHQUFFLE9BQU8sRUFBRSxLQUFLLEdBQUcsRUFBRSxPQUFPLEVBQUUsS0FBSyxLQUFNLElBQUksR0FBRSxFQUFFLFNBQVMsU0FBUyxHQUFHLEtBQUssS0FBSyxHQUFHLEVBQUUsT0FBTyxNQUFPLEtBQUksRUFBRSxTQUFTLEdBQUcsR0FBSSxHQUFFLFlBQWEsT0FBTyxHQUFFLFVBQVUsRUFBRSxHQUFJLElBQUksSUFBSSxHQUFFLEVBQUUsVUFBVSxFQUFFLEVBQUUsVUFBVyxHQUFFLFFBQVEsU0FBUyxHQUFHLE1BQU8sR0FBRSxLQUFLLEtBQUssSUFBSSxFQUFFLE9BQU8sU0FBUyxFQUFFLEVBQUUsR0FBRyxNQUFPLEdBQUUsWUFBWSxFQUFFLFdBQU8sS0FBUyxFQUFFLEVBQUUsS0FBSyxLQUFLLFFBQVEsRUFBRyxJQUFJLEdBQUUsT0FBTyxjQUFlLElBQUcsRUFBRSxJQUFJLEtBQUssUUFBUSxNQUFNLEdBQUcsTUFBRSxPQUFZLEdBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxHQUFHLElBQUksRUFBRSxHQUFHLEVBQUUsT0FBUSxJQUFJLEdBQUUsZ0JBQWdCLEVBQUUsQ0FBKzJTLElBQTcyUyxFQUFFLFdBQVcsU0FBUyxFQUFFLEVBQUUsR0FBRyxHQUFHLEVBQUUsZUFBZSxLQUFLLFVBQVUsTUFBTyxHQUFFLEtBQUssU0FBVSxJQUFJLEdBQUUsRUFBRSxLQUFLLEtBQUssRUFBRyxPQUFPLEdBQUUsRUFBRSxLQUFLLFVBQVUsTUFBTSxHQUFHLEdBQUcsR0FBRyxFQUFFLFdBQVcsU0FBUyxHQUFHLGFBQWMsSUFBRyxJQUFJLFlBQVksRUFBRSxDQUFFLEtBQUksU0FBUyxNQUFPLE1BQUssU0FBUyxFQUFHLEtBQUksU0FBUyxNQUFPLE1BQUssV0FBVyxTQUFTLEdBQUcsTUFBTyxLQUFLLElBQUksS0FBSSxXQUFXLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxLQUFLLFNBQVMsT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUksR0FBRSxLQUFLLFNBQVMsRUFBRyxJQUFHLEVBQUUsS0FBSyxLQUFLLEdBQUcsTUFBTyxNQUFLLEVBQUUsVUFBVSxTQUFTLEVBQUUsR0FBRyxLQUFLLFNBQVMsUUFBUSxFQUFHLElBQUksR0FBRSxFQUFFLEtBQUssS0FBTSxPQUFPLE1BQUssU0FBUyxRQUFRLEdBQUcsRUFBRSxXQUFXLFFBQVEsU0FBUyxFQUFFLEdBQUcsUUFBUyxHQUFFLEVBQUUsR0FBRyxHQUFJLEdBQUUsRUFBRSxFQUFHLEtBQUksSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxNQUFNLEdBQUksR0FBRSxFQUFFLElBQUssT0FBTyxHQUFFLFNBQVMsU0FBUyxHQUFHLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsWUFBWSxTQUFTLEdBQUcsRUFBRSxNQUFNLEtBQUssS0FBSyxFQUFFLGFBQWEsU0FBUyxHQUFHLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksQ0FBQyxHQUFJLEdBQUUsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFHLEtBQUksS0FBSyxHQUFHLEVBQUUsT0FBTyxFQUFFLFVBQVUsU0FBUyxHQUFHLEVBQUUsS0FBSyxLQUFLLEtBQUssR0FBRyxHQUFHLGVBQWUsU0FBUyxHQUFHLE1BQU8sR0FBRSxNQUFNLE9BQU8sRUFBRSxLQUFLLEVBQUUsUUFBUSxRQUFRLFNBQVMsRUFBRSxHQUFHLE9BQVcsSUFBSixHQUFRLGdCQUFpQixHQUFFLEtBQUssT0FBTyxXQUFXLEdBQUcsR0FBRyxFQUFFLEtBQUssS0FBSyxPQUFPLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxVQUFVLEVBQUUsRUFBRSxXQUFXLFVBQVUsV0FBVyxLQUFLLFdBQVcsS0FBSyxZQUFZLFlBQVksT0FBTyxLQUFLLGtCQUFrQixTQUFTLFdBQVcsTUFBTyxNQUFLLE9BQU8sS0FBSyxLQUFLLFdBQVcsVUFBVSxTQUFTLEdBQUcsTUFBTyxNQUFLLE9BQU8sTUFBTSxLQUFLLFNBQVMsTUFBTSxFQUFFLEVBQUUsV0FBVyxLQUFLLEVBQUUsVUFBVSxTQUFTLE1BQU0sRUFBRSxVQUFVLFlBQVksRUFBRSxTQUFTLEVBQUUsRUFBRSxHQUFHLFNBQVMsRUFBRSxHQUFHLEdBQUksR0FBRSxFQUFFLEtBQUssRUFBRSxLQUFNLE9BQU8sR0FBRSxHQUFHLEVBQUUsRUFBRSxRQUFRLElBQUksR0FBRyxFQUFFLGNBQWMsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxXQUFXLE1BQU8sR0FBRSxPQUFPLElBQUcsR0FBSSxHQUFHLEVBQUUsS0FBSyxTQUFTLEVBQUUsR0FBRyxHQUFHLEVBQUUsS0FBSyxRQUFRLE9BQUcsS0FBUyxFQUFFLENBQUMsR0FBSSxHQUFFLEtBQUssS0FBSyxNQUFPLE1BQUssS0FBSyxLQUFLLEVBQUcsSUFBSSxHQUFFLEVBQUUsS0FBSyxLQUFNLE9BQU8sTUFBSyxLQUFLLEtBQUssR0FBRyxFQUFFLE1BQU8sTUFBSyxLQUFLLEtBQUssSUFBSSxFQUFFLEtBQUssV0FBVyxNQUFPLE1BQUssS0FBSyxRQUFRLEVBQUUsS0FBSyxTQUFTLEVBQUUsR0FBRyxNQUFPLE1BQUssS0FBSyxLQUFLLE9BQU8sS0FBSyxRQUFRLEdBQUcsSUFBSSxFQUFFLE1BQU0sU0FBUyxFQUFFLEVBQUUsR0FBRyxNQUFPLElBQUksR0FBRSxLQUFLLEtBQUssTUFBTSxFQUFFLEVBQUUsR0FBRyxLQUFLLFVBQVUsRUFBRSxTQUFTLFNBQVMsRUFBRSxHQUFHLGFBQWMsSUFBRyxJQUFJLFNBQVMsS0FBSyxJQUFLLE1BQUssU0FBUyxLQUFNLElBQUksZ0JBQWUsaUJBQWlCLEVBQUcsT0FBTyxNQUFLLFNBQVMsS0FBSyxRQUFRLEdBQUcsRUFBRyxLQUFJLFNBQVMsTUFBTyxNQUFLLFNBQVMsRUFBRSxVQUFVLEdBQUksS0FBSSxTQUFTLEdBQUcsRUFBRSxFQUFFLEdBQUcsQ0FBQyxHQUFJLEdBQUUsSUFBSyxPQUFPLEdBQUUsUUFBUSxNQUFNLFNBQVMsR0FBRyxNQUFPLEdBQUUsUUFBUSxLQUFLLE1BQU8sR0FBRSxFQUFFLE9BQU8sS0FBSyxXQUFXLEVBQUUsU0FBUyxHQUFHLE1BQU8sTUFBSyxRQUFRLEVBQUUsR0FBRyxFQUFFLE1BQU0sTUFBSyxHQUFJLEtBQUssV0FBVyxFQUFFLFNBQVMsR0FBRyxNQUFPLE1BQUssUUFBUSxFQUFFLFFBQVEsTUFBSyxLQUFNLEVBQUUsUUFBUSxTQUFTLEVBQUUsR0FBRyxHQUFJLEdBQUUsS0FBSyxTQUFTLEVBQUUsRUFBRyxPQUFPLEtBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLGdCQUFpQixHQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsR0FBRyxJQUFJLEVBQUUsTUFBTSxHQUFHLEtBQUssTUFBTSxJQUFJLFNBQVMsT0FBTyxJQUFJLEdBQUcsRUFBRSxRQUFRLFNBQVMsRUFBRSxFQUFFLEdBQUcsT0FBRyxLQUFTLEVBQUUsQ0FBQyxFQUFFLEtBQUssUUFBUSxFQUFHLElBQUksR0FBRSxLQUFLLE9BQU8sV0FBVyxNQUFPLEdBQUUsS0FBSyxLQUFLLEVBQUUsZUFBZSxNQUFNLEtBQUssU0FBUyxLQUFLLElBQUksRUFBRSxLQUFLLElBQUksRUFBRyxZQUFPLEtBQVMsRUFBRSxLQUFLLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxRQUFRLEVBQUUsS0FBSyxTQUFTLEVBQUUsR0FBRyxNQUFPLE1BQUssUUFBUSxFQUFFLEVBQUUsU0FBUyxFQUFFLEdBQUcsTUFBTyxHQUFFLEtBQUssTUFBTSxFQUFFLFFBQVEsV0FBVyxNQUFPLE1BQUssS0FBSyxjQUFjLElBQUksRUFBRSxNQUFNLFNBQVMsRUFBRSxFQUFFLEdBQUcsTUFBTyxNQUFLLFFBQVEsRUFBRSxFQUFFLFNBQVMsRUFBRSxHQUFHLEdBQUksR0FBRSxLQUFLLE1BQU8sT0FBTyxHQUFFLE1BQU0sRUFBRSxHQUFHLEtBQUssT0FBTyxLQUFLLEVBQUUsU0FBUyxTQUFTLEdBQUcsTUFBTyxNQUFLLE1BQU0sY0FBYyxFQUFFLElBQUksU0FBUyxFQUFFLEdBQUcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUksR0FBRSxFQUFFLEVBQUcsR0FBRSxFQUFFLGVBQWUsRUFBRSxHQUFHLFNBQVMsTUFBTSxHQUFHLFFBQVEsZ0JBQWdCLEtBQUssV0FBVyxNQUFPLE1BQUssS0FBSyxNQUFNLEtBQUssY0FBVSxHQUFPLEtBQUssZUFBZSxNQUFNLFNBQVMsR0FBRyxLQUFLLEtBQUssUUFBUSxLQUFLLFVBQVUsRUFBRSxLQUFLLGtCQUFrQixRQUFRLFNBQVMsU0FBUyxTQUFTLE9BQU8sUUFBUSxRQUFRLFFBQVEsVUFBVSxVQUFVLFNBQVMsRUFBRSxHQUFHLEtBQU8sRUFBRSxNQUFNLE1BQVEsRUFBRSxRQUFRLE9BQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxHQUFHLFFBQVEsV0FBVyxVQUFVLEtBQUssV0FBVyxHQUFJLEdBQUUsS0FBSyxRQUFRLEtBQUssT0FBUSxJQUFHLEtBQUssV0FBVyxFQUFFLE1BQU0sTUFBTyxNQUFLLEtBQUssU0FBUyxNQUFFLElBQU8sR0FBRyxFQUFJLElBQUksRUFBRSxRQUFHLEtBQVMsRUFBRSxDQUFDLEVBQUUsR0FBSSxPQUFNLEVBQUcsS0FBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsS0FBSyxlQUFlLENBQUMsR0FBSSxHQUFFLEtBQUssS0FBSyxVQUFXLEtBQUksS0FBSyxLQUFLLE9BQU8sT0FBTyxHQUFHLEVBQUUsS0FBSyxLQUFLLFlBQVksTUFBTyxJQUFHLE1BQU0sU0FBUyxHQUFHLEdBQUcsS0FBSyxXQUFXLEVBQUUsTUFBTSxNQUFPLE1BQUssS0FBSyxXQUFXLEVBQUcsS0FBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxLQUFLLFVBQVUsRUFBRSxPQUFPLEVBQUUsT0FBTyxHQUFHLFFBQVEsU0FBUyxXQUFXLEtBQUssV0FBVyxHQUFJLEdBQUUsS0FBSyxPQUFPLE9BQU8sRUFBRSxLQUFLLE9BQU8sS0FBSyxLQUFLLFFBQVEsS0FBSyxRQUFnQyxPQUFPLElBQUksR0FBaEMsS0FBSyxLQUFLLE1BQU0sRUFBRSxHQUFrQixLQUFLLFVBQVUsTUFBTSxTQUFTLEdBQUcsS0FBSyxPQUFPLE1BQU0sT0FBTyxFQUFFLEtBQUssT0FBTyxPQUFPLEVBQUUsU0FBUyxHQUFHLFFBQVEsV0FBVyxLQUFLLFdBQVcsTUFBTyxNQUFLLEtBQUssWUFBWSxLQUFLLFVBQVUsTUFBTSxTQUFTLEdBQUcsS0FBSyxLQUFLLGNBQWMsRUFBRSxLQUFLLFlBQVksRUFBRSxLQUFLLEdBQUcsUUFBUSxVQUFVLEtBQUssV0FBVyxNQUFPLE1BQUssS0FBSyxTQUFTLEtBQUssUUFBUSxLQUFLLFVBQVUsTUFBTSxTQUFTLEdBQUcsS0FBSyxLQUFLLFdBQVcsR0FBRSxNQUFPLEVBQVMsTUFBRSxHQUFHLFFBQVEsV0FBVyxRQUFRLFVBQVUsS0FBSyxXQUFXLEdBQUksR0FBRSxLQUFLLFVBQVcsSUFBRyxLQUFLLFFBQVEsSUFBSSxLQUFLLE1BQU0sQ0FBQyxHQUFHLEVBQUUsS0FBSyxPQUFPLFVBQVUsTUFBTyxNQUFLLE9BQU8sRUFBRyxNQUFNLElBQUksV0FBVSxxQkFBcUIsRUFBRSxRQUFRLEtBQUssTUFBTSxNQUFNLE1BQU8sSUFBRyxNQUFNLFNBQVMsR0FBRyxLQUFLLFVBQVUsS0FBSyxZQUFRLEtBQVMsRUFBRSxLQUFLLE1BQU0sTUFBTSxFQUFRLEtBQUUsR0FBRyxRQUFRLFdBQVcsV0FBVyxVQUFVLFNBQVMsRUFBRSxHQUFHLEtBQUssY0FBZSxLQUFJLEdBQUksS0FBSyxHQUFFLEtBQUssWUFBWSxFQUFFLElBQUksR0FBRyxLQUFLLFdBQVcsR0FBSSxHQUFFLEtBQUssVUFBVyxPQUFPLEtBQUssTUFBSyxRQUFRLEtBQUssUUFBUSxHQUFHLEdBQUcsTUFBTSxTQUFTLEdBQUcsS0FBSyxVQUFVLElBQUssTUFBSyxZQUFZLEtBQUssWUFBWSxHQUFHLE1BQU0sRUFBRSxPQUFPLEdBQUcsVUFBVSxXQUFXLEtBQUssTUFBTSxXQUFXLFFBQVEsU0FBUyxHQUFHLElBQUksR0FBSSxHQUFFLEtBQUssTUFBTSxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUksT0FBTSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUksTUFBSyxNQUFNLEdBQUcsS0FBSyxXQUFXLEdBQUksR0FBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLE9BQU8sS0FBSyxFQUFFLEdBQUksT0FBTyxNQUFLLE9BQU8sVUFBVSxFQUFFLFdBQVcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsS0FBSyxLQUFLLEVBQUUsT0FBTyxHQUFHLE1BQU0sU0FBUyxHQUFHLEdBQUksR0FBRSxLQUFLLEtBQU0sTUFBSyxPQUFPLFVBQVUsRUFBRSxXQUFXLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksS0FBSyxNQUFNLEVBQUUsR0FBRyxRQUFRLEVBQU0sR0FBRSxHQUFHLFFBQVEsWUFBWSxXQUFXLGFBQWEsWUFBWSxXQUFXLGFBQWEsWUFBWSxXQUFXLE1BQU8sTUFBSyxRQUFRLEtBQUssV0FBVyxLQUFLLFNBQVMsS0FBSyxhQUFhLEVBQUUsT0FBTyxFQUFFLE1BQU0sR0FBRyxVQUFVLFNBQVMsRUFBRSxFQUFFLEdBQUcsS0FBSyxVQUFVLEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEdBQUcsT0FBTyxlQUFlLFFBQVEsWUFBWSxVQUFVLFlBQVksV0FBVyxPQUFPLFNBQVMsS0FBSyxPQUFPLEtBQUssT0FBTyxVQUFVLEtBQUssV0FBVyxHQUFJLEdBQUUsU0FBUyxHQUFHLE1BQU8sS0FBSSxVQUFVLE9BQU8sU0FBVSxHQUFFLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLEtBQUssRUFBRSxXQUFXLEVBQUUsR0FBRyxZQUFXLEVBQUcsTUFBTSxJQUFJLE1BQU8sT0FBTyxHQUFFLEtBQUssU0FBUSxFQUFHLEVBQUUsR0FBRyxPQUFPLEVBQUUsS0FBSyxZQUFZLFNBQVMsS0FBSyxPQUFPLFNBQVMsVUFBVSxVQUFVLEtBQUssYUFBYSxNQUFNLFNBQVMsR0FBRyxFQUFFLGFBQWEsRUFBRSxLQUFLLFFBQVEsS0FBSyxPQUFPLE1BQU0sS0FBSyxVQUFVLEtBQUssS0FBSyxVQUFVLEVBQUUsV0FBVyxFQUFFLE9BQU8sR0FBRyxRQUFRLFlBQVksU0FBUyxRQUFRLFNBQVMsR0FBRyxHQUFJLEtBQUssS0FBSSxHQUFJLEtBQUssTUFBSyxVQUFVLEVBQUUsR0FBRyxFQUFFLEtBQUssVUFBVSxHQUFHLFVBQVUsS0FBSyxVQUFVLEdBQUcsRUFBRSxLQUFLLFVBQVUsR0FBSSxNQUFLLFVBQVUsR0FBRyxLQUFLLFdBQVcsR0FBSSxHQUFFLEtBQUssRUFBRSxLQUFLLFVBQVUsRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLFNBQVUsT0FBTyxNQUFLLE9BQU8sVUFBVSxFQUFFLFdBQVcsSUFBSSxHQUFJLEtBQUssR0FBRSxLQUFLLE9BQU8sV0FBVyxHQUFJLEdBQUUsRUFBRSxFQUFFLEdBQUcsVUFBVSxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSyxLQUFLLEVBQUUsUUFBSSxLQUFTLElBQUksRUFBRSxHQUFHLElBQUksR0FBRyxLQUFLLFFBQVEsR0FBRyxNQUFNLFNBQVMsR0FBRyxHQUFJLEdBQUUsS0FBSyxFQUFFLEtBQUssU0FBVSxNQUFLLE9BQU8sVUFBVSxFQUFFLFdBQVcsSUFBSSxHQUFJLEtBQUssR0FBRSxLQUFLLE9BQU8sV0FBVyxFQUFFLEVBQUUsR0FBRyxVQUFVLEVBQUUsR0FBRyxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSyxNQUFNLEVBQUUsR0FBRyxFQUFFLEtBQUssR0FBRyxLQUFLLFdBQVcsRUFBRSxLQUFLLEdBQUcsUUFBUSxVQUFVLEtBQUssV0FBVyxLQUFLLEtBQUssS0FBSyxLQUFLLFFBQVEsS0FBSyxVQUFVLE1BQU0sV0FBVyxLQUFLLFVBQVUsRUFBRSxPQUFPLEdBQUcsUUFBUSxTQUFTLFlBQVksS0FBSyxXQUFXLE1BQU8sTUFBSyxLQUFLLFVBQVUsS0FBSyxRQUFRLEtBQUssWUFBUSxHQUFPLEtBQUssV0FBVyxNQUFNLFNBQVMsR0FBRyxLQUFLLEtBQUssWUFBWSxFQUFFLEtBQUssYUFBYSxFQUFFLFFBQVEsR0FBRyxRQUFRLFNBQVMsWUFBWSxLQUFLLFdBQVcsR0FBSSxHQUFFLEtBQUssS0FBSyxFQUFFLEtBQUssTUFBTyxRQUFHLEtBQVMsRUFBRSxDQUFDLEdBQU0sR0FBRSxFQUFFLE9BQU8sRUFBRSxDQUFFLEtBQUksRUFBRSxFQUFFLFdBQVcsRUFBRSxFQUFFLEdBQU0sRUFBRSxZQUFhLEdBQUksSUFBSSxHQUFFLEVBQUUsVUFBVSxFQUFFLEVBQUUsS0FBSyxTQUFVLE9BQU8sR0FBRSxHQUFHLEVBQUUsS0FBSyxHQUFHLEVBQUUsTUFBTyxHQUFFLFVBQVUsTUFBRSxHQUFPLEtBQUssVUFBVSxRQUFRLFFBQVEsS0FBSyxNQUFNLFNBQVMsR0FBRyxHQUFJLEdBQUUsS0FBSyxLQUFLLE1BQUUsS0FBUyxLQUFLLE9BQU8sRUFBRSxLQUFLLE9BQU8sRUFBRSxNQUFPLEdBQUUsWUFBWSxNQUFFLEdBQU8sS0FBSyxVQUFVLEVBQUUsSUFBSSxFQUFFLFdBQVcsR0FBRyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxHQUFHLEdBQUksRUFBRSxJQUFHLEVBQUUsRUFBRSxFQUFFLE1BQU0sQ0FBQyxHQUFJLEVBQUUsSUFBRyxjQUFlLEdBQUUs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Q1gsSUFBSyxFQUNMLE1BQU8sT0FJRCxFQUFHLElBQ1QsSUFBSyxTQUFRLE1BQ2IsSUFBSyxTQUFRLE9BQ2IsSUFBSyxTQUFRLEtBQ2IsSUFBSyxTQUFRLFNBQ2IsSUFBSyxTQUFRLFlBQ1gsR0FBVSxFQUFHLE9BSWpCLE9BQVEsRUFBRyxJQUNULElBQUssU0FBUSxNQUNiLElBQUssU0FBUSxPQUNiLElBQUssU0FBUSxTQUNiLElBQUssU0FBUSxTQUNiLElBQUssU0FBUSxZQUNYLEdBQVUsRUFBRyxRQVNuQixNQUpJLElBQWMsSUFDaEIsRUFBTyxHQUFZLE1BQTRCLEtBQXBCLEVBQUssWUFBcUIsSUFBTSxNQUkzRCxJQUFLLEVBQ0wsV0FBQSw2RUE3TWMsbURBd0hkLFNBQ0YsTUFBTyxJQUNQLE9BQVEsSUFDUixPQUFRLElBQ1IsS0FBTSxJQUNOLFNBQVUsSUFDVixTQUFVLElBQ1YsUUFBUyxJQUNULFNBQVUsSUFDVixZQUFhLElBZ0ZmLFFBQU8sU0FDTCxRQUFBLFFBQ0EsT0FBQSxPQUNBLFlBQUEsWUFDQSxVQUFBLFVBQ0EsUUFBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvLyAgICAgQmFja2JvbmUuanMgMS4xLjJcblxuLy8gICAgIChjKSAyMDEwLTIwMTQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbi8vICAgICBCYWNrYm9uZSBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vICAgICBGb3IgYWxsIGRldGFpbHMgYW5kIGRvY3VtZW50YXRpb246XG4vLyAgICAgaHR0cDovL2JhY2tib25lanMub3JnXG5cbihmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG5cbiAgLy8gU2V0IHVwIEJhY2tib25lIGFwcHJvcHJpYXRlbHkgZm9yIHRoZSBlbnZpcm9ubWVudC4gU3RhcnQgd2l0aCBBTUQuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoWyd1bmRlcnNjb3JlJywgJ2pxdWVyeScsICdleHBvcnRzJ10sIGZ1bmN0aW9uKF8sICQsIGV4cG9ydHMpIHtcbiAgICAgIC8vIEV4cG9ydCBnbG9iYWwgZXZlbiBpbiBBTUQgY2FzZSBpbiBjYXNlIHRoaXMgc2NyaXB0IGlzIGxvYWRlZCB3aXRoXG4gICAgICAvLyBvdGhlcnMgdGhhdCBtYXkgc3RpbGwgZXhwZWN0IGEgZ2xvYmFsIEJhY2tib25lLlxuICAgICAgcm9vdC5CYWNrYm9uZSA9IGZhY3Rvcnkocm9vdCwgZXhwb3J0cywgXywgJCk7XG4gICAgfSk7XG5cbiAgLy8gTmV4dCBmb3IgTm9kZS5qcyBvciBDb21tb25KUy4galF1ZXJ5IG1heSBub3QgYmUgbmVlZGVkIGFzIGEgbW9kdWxlLlxuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBfID0gcmVxdWlyZSgndW5kZXJzY29yZScpO1xuICAgIGZhY3Rvcnkocm9vdCwgZXhwb3J0cywgXyk7XG5cbiAgLy8gRmluYWxseSwgYXMgYSBicm93c2VyIGdsb2JhbC5cbiAgfSBlbHNlIHtcbiAgICByb290LkJhY2tib25lID0gZmFjdG9yeShyb290LCB7fSwgcm9vdC5fLCAocm9vdC5qUXVlcnkgfHwgcm9vdC5aZXB0byB8fCByb290LmVuZGVyIHx8IHJvb3QuJCkpO1xuICB9XG5cbn0odGhpcywgZnVuY3Rpb24ocm9vdCwgQmFja2JvbmUsIF8sICQpIHtcblxuICAvLyBJbml0aWFsIFNldHVwXG4gIC8vIC0tLS0tLS0tLS0tLS1cblxuICAvLyBTYXZlIHRoZSBwcmV2aW91cyB2YWx1ZSBvZiB0aGUgYEJhY2tib25lYCB2YXJpYWJsZSwgc28gdGhhdCBpdCBjYW4gYmVcbiAgLy8gcmVzdG9yZWQgbGF0ZXIgb24sIGlmIGBub0NvbmZsaWN0YCBpcyB1c2VkLlxuICB2YXIgcHJldmlvdXNCYWNrYm9uZSA9IHJvb3QuQmFja2JvbmU7XG5cbiAgLy8gQ3JlYXRlIGxvY2FsIHJlZmVyZW5jZXMgdG8gYXJyYXkgbWV0aG9kcyB3ZSdsbCB3YW50IHRvIHVzZSBsYXRlci5cbiAgdmFyIGFycmF5ID0gW107XG4gIHZhciBwdXNoID0gYXJyYXkucHVzaDtcbiAgdmFyIHNsaWNlID0gYXJyYXkuc2xpY2U7XG4gIHZhciBzcGxpY2UgPSBhcnJheS5zcGxpY2U7XG5cbiAgLy8gQ3VycmVudCB2ZXJzaW9uIG9mIHRoZSBsaWJyYXJ5LiBLZWVwIGluIHN5bmMgd2l0aCBgcGFja2FnZS5qc29uYC5cbiAgQmFja2JvbmUuVkVSU0lPTiA9ICcxLjEuMic7XG5cbiAgLy8gRm9yIEJhY2tib25lJ3MgcHVycG9zZXMsIGpRdWVyeSwgWmVwdG8sIEVuZGVyLCBvciBNeSBMaWJyYXJ5IChraWRkaW5nKSBvd25zXG4gIC8vIHRoZSBgJGAgdmFyaWFibGUuXG4gIEJhY2tib25lLiQgPSAkO1xuXG4gIC8vIFJ1bnMgQmFja2JvbmUuanMgaW4gKm5vQ29uZmxpY3QqIG1vZGUsIHJldHVybmluZyB0aGUgYEJhY2tib25lYCB2YXJpYWJsZVxuICAvLyB0byBpdHMgcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhpcyBCYWNrYm9uZSBvYmplY3QuXG4gIEJhY2tib25lLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICByb290LkJhY2tib25lID0gcHJldmlvdXNCYWNrYm9uZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBUdXJuIG9uIGBlbXVsYXRlSFRUUGAgdG8gc3VwcG9ydCBsZWdhY3kgSFRUUCBzZXJ2ZXJzLiBTZXR0aW5nIHRoaXMgb3B0aW9uXG4gIC8vIHdpbGwgZmFrZSBgXCJQQVRDSFwiYCwgYFwiUFVUXCJgIGFuZCBgXCJERUxFVEVcImAgcmVxdWVzdHMgdmlhIHRoZSBgX21ldGhvZGAgcGFyYW1ldGVyIGFuZFxuICAvLyBzZXQgYSBgWC1IdHRwLU1ldGhvZC1PdmVycmlkZWAgaGVhZGVyLlxuICBCYWNrYm9uZS5lbXVsYXRlSFRUUCA9IGZhbHNlO1xuXG4gIC8vIFR1cm4gb24gYGVtdWxhdGVKU09OYCB0byBzdXBwb3J0IGxlZ2FjeSBzZXJ2ZXJzIHRoYXQgY2FuJ3QgZGVhbCB3aXRoIGRpcmVjdFxuICAvLyBgYXBwbGljYXRpb24vanNvbmAgcmVxdWVzdHMgLi4uIHdpbGwgZW5jb2RlIHRoZSBib2R5IGFzXG4gIC8vIGBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRgIGluc3RlYWQgYW5kIHdpbGwgc2VuZCB0aGUgbW9kZWwgaW4gYVxuICAvLyBmb3JtIHBhcmFtIG5hbWVkIGBtb2RlbGAuXG4gIEJhY2tib25lLmVtdWxhdGVKU09OID0gZmFsc2U7XG5cbiAgLy8gQmFja2JvbmUuRXZlbnRzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEEgbW9kdWxlIHRoYXQgY2FuIGJlIG1peGVkIGluIHRvICphbnkgb2JqZWN0KiBpbiBvcmRlciB0byBwcm92aWRlIGl0IHdpdGhcbiAgLy8gY3VzdG9tIGV2ZW50cy4gWW91IG1heSBiaW5kIHdpdGggYG9uYCBvciByZW1vdmUgd2l0aCBgb2ZmYCBjYWxsYmFja1xuICAvLyBmdW5jdGlvbnMgdG8gYW4gZXZlbnQ7IGB0cmlnZ2VyYC1pbmcgYW4gZXZlbnQgZmlyZXMgYWxsIGNhbGxiYWNrcyBpblxuICAvLyBzdWNjZXNzaW9uLlxuICAvL1xuICAvLyAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAvLyAgICAgXy5leHRlbmQob2JqZWN0LCBCYWNrYm9uZS5FdmVudHMpO1xuICAvLyAgICAgb2JqZWN0Lm9uKCdleHBhbmQnLCBmdW5jdGlvbigpeyBhbGVydCgnZXhwYW5kZWQnKTsgfSk7XG4gIC8vICAgICBvYmplY3QudHJpZ2dlcignZXhwYW5kJyk7XG4gIC8vXG4gIHZhciBFdmVudHMgPSBCYWNrYm9uZS5FdmVudHMgPSB7XG5cbiAgICAvLyBCaW5kIGFuIGV2ZW50IHRvIGEgYGNhbGxiYWNrYCBmdW5jdGlvbi4gUGFzc2luZyBgXCJhbGxcImAgd2lsbCBiaW5kXG4gICAgLy8gdGhlIGNhbGxiYWNrIHRvIGFsbCBldmVudHMgZmlyZWQuXG4gICAgb246IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgICBpZiAoIWV2ZW50c0FwaSh0aGlzLCAnb24nLCBuYW1lLCBbY2FsbGJhY2ssIGNvbnRleHRdKSB8fCAhY2FsbGJhY2spIHJldHVybiB0aGlzO1xuICAgICAgdGhpcy5fZXZlbnRzIHx8ICh0aGlzLl9ldmVudHMgPSB7fSk7XG4gICAgICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzW25hbWVdIHx8ICh0aGlzLl9ldmVudHNbbmFtZV0gPSBbXSk7XG4gICAgICBldmVudHMucHVzaCh7Y2FsbGJhY2s6IGNhbGxiYWNrLCBjb250ZXh0OiBjb250ZXh0LCBjdHg6IGNvbnRleHQgfHwgdGhpc30pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEJpbmQgYW4gZXZlbnQgdG8gb25seSBiZSB0cmlnZ2VyZWQgYSBzaW5nbGUgdGltZS4gQWZ0ZXIgdGhlIGZpcnN0IHRpbWVcbiAgICAvLyB0aGUgY2FsbGJhY2sgaXMgaW52b2tlZCwgaXQgd2lsbCBiZSByZW1vdmVkLlxuICAgIG9uY2U6IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgICBpZiAoIWV2ZW50c0FwaSh0aGlzLCAnb25jZScsIG5hbWUsIFtjYWxsYmFjaywgY29udGV4dF0pIHx8ICFjYWxsYmFjaykgcmV0dXJuIHRoaXM7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgb25jZSA9IF8ub25jZShmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5vZmYobmFtZSwgb25jZSk7XG4gICAgICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9KTtcbiAgICAgIG9uY2UuX2NhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICByZXR1cm4gdGhpcy5vbihuYW1lLCBvbmNlLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIG9uZSBvciBtYW55IGNhbGxiYWNrcy4gSWYgYGNvbnRleHRgIGlzIG51bGwsIHJlbW92ZXMgYWxsXG4gICAgLy8gY2FsbGJhY2tzIHdpdGggdGhhdCBmdW5jdGlvbi4gSWYgYGNhbGxiYWNrYCBpcyBudWxsLCByZW1vdmVzIGFsbFxuICAgIC8vIGNhbGxiYWNrcyBmb3IgdGhlIGV2ZW50LiBJZiBgbmFtZWAgaXMgbnVsbCwgcmVtb3ZlcyBhbGwgYm91bmRcbiAgICAvLyBjYWxsYmFja3MgZm9yIGFsbCBldmVudHMuXG4gICAgb2ZmOiBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgICAgdmFyIHJldGFpbiwgZXYsIGV2ZW50cywgbmFtZXMsIGksIGwsIGosIGs7XG4gICAgICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhZXZlbnRzQXBpKHRoaXMsICdvZmYnLCBuYW1lLCBbY2FsbGJhY2ssIGNvbnRleHRdKSkgcmV0dXJuIHRoaXM7XG4gICAgICBpZiAoIW5hbWUgJiYgIWNhbGxiYWNrICYmICFjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IHZvaWQgMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBuYW1lcyA9IG5hbWUgPyBbbmFtZV0gOiBfLmtleXModGhpcy5fZXZlbnRzKTtcbiAgICAgIGZvciAoaSA9IDAsIGwgPSBuYW1lcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbmFtZSA9IG5hbWVzW2ldO1xuICAgICAgICBpZiAoZXZlbnRzID0gdGhpcy5fZXZlbnRzW25hbWVdKSB7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzW25hbWVdID0gcmV0YWluID0gW107XG4gICAgICAgICAgaWYgKGNhbGxiYWNrIHx8IGNvbnRleHQpIHtcbiAgICAgICAgICAgIGZvciAoaiA9IDAsIGsgPSBldmVudHMubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgICAgIGV2ID0gZXZlbnRzW2pdO1xuICAgICAgICAgICAgICBpZiAoKGNhbGxiYWNrICYmIGNhbGxiYWNrICE9PSBldi5jYWxsYmFjayAmJiBjYWxsYmFjayAhPT0gZXYuY2FsbGJhY2suX2NhbGxiYWNrKSB8fFxuICAgICAgICAgICAgICAgICAgKGNvbnRleHQgJiYgY29udGV4dCAhPT0gZXYuY29udGV4dCkpIHtcbiAgICAgICAgICAgICAgICByZXRhaW4ucHVzaChldik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFyZXRhaW4ubGVuZ3RoKSBkZWxldGUgdGhpcy5fZXZlbnRzW25hbWVdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBUcmlnZ2VyIG9uZSBvciBtYW55IGV2ZW50cywgZmlyaW5nIGFsbCBib3VuZCBjYWxsYmFja3MuIENhbGxiYWNrcyBhcmVcbiAgICAvLyBwYXNzZWQgdGhlIHNhbWUgYXJndW1lbnRzIGFzIGB0cmlnZ2VyYCBpcywgYXBhcnQgZnJvbSB0aGUgZXZlbnQgbmFtZVxuICAgIC8vICh1bmxlc3MgeW91J3JlIGxpc3RlbmluZyBvbiBgXCJhbGxcImAsIHdoaWNoIHdpbGwgY2F1c2UgeW91ciBjYWxsYmFjayB0b1xuICAgIC8vIHJlY2VpdmUgdGhlIHRydWUgbmFtZSBvZiB0aGUgZXZlbnQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50KS5cbiAgICB0cmlnZ2VyOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICBpZiAoIXRoaXMuX2V2ZW50cykgcmV0dXJuIHRoaXM7XG4gICAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgIGlmICghZXZlbnRzQXBpKHRoaXMsICd0cmlnZ2VyJywgbmFtZSwgYXJncykpIHJldHVybiB0aGlzO1xuICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50c1tuYW1lXTtcbiAgICAgIHZhciBhbGxFdmVudHMgPSB0aGlzLl9ldmVudHMuYWxsO1xuICAgICAgaWYgKGV2ZW50cykgdHJpZ2dlckV2ZW50cyhldmVudHMsIGFyZ3MpO1xuICAgICAgaWYgKGFsbEV2ZW50cykgdHJpZ2dlckV2ZW50cyhhbGxFdmVudHMsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gVGVsbCB0aGlzIG9iamVjdCB0byBzdG9wIGxpc3RlbmluZyB0byBlaXRoZXIgc3BlY2lmaWMgZXZlbnRzIC4uLiBvclxuICAgIC8vIHRvIGV2ZXJ5IG9iamVjdCBpdCdzIGN1cnJlbnRseSBsaXN0ZW5pbmcgdG8uXG4gICAgc3RvcExpc3RlbmluZzogZnVuY3Rpb24ob2JqLCBuYW1lLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGxpc3RlbmluZ1RvID0gdGhpcy5fbGlzdGVuaW5nVG87XG4gICAgICBpZiAoIWxpc3RlbmluZ1RvKSByZXR1cm4gdGhpcztcbiAgICAgIHZhciByZW1vdmUgPSAhbmFtZSAmJiAhY2FsbGJhY2s7XG4gICAgICBpZiAoIWNhbGxiYWNrICYmIHR5cGVvZiBuYW1lID09PSAnb2JqZWN0JykgY2FsbGJhY2sgPSB0aGlzO1xuICAgICAgaWYgKG9iaikgKGxpc3RlbmluZ1RvID0ge30pW29iai5fbGlzdGVuSWRdID0gb2JqO1xuICAgICAgZm9yICh2YXIgaWQgaW4gbGlzdGVuaW5nVG8pIHtcbiAgICAgICAgb2JqID0gbGlzdGVuaW5nVG9baWRdO1xuICAgICAgICBvYmoub2ZmKG5hbWUsIGNhbGxiYWNrLCB0aGlzKTtcbiAgICAgICAgaWYgKHJlbW92ZSB8fCBfLmlzRW1wdHkob2JqLl9ldmVudHMpKSBkZWxldGUgdGhpcy5fbGlzdGVuaW5nVG9baWRdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gIH07XG5cbiAgLy8gUmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gc3BsaXQgZXZlbnQgc3RyaW5ncy5cbiAgdmFyIGV2ZW50U3BsaXR0ZXIgPSAvXFxzKy87XG5cbiAgLy8gSW1wbGVtZW50IGZhbmN5IGZlYXR1cmVzIG9mIHRoZSBFdmVudHMgQVBJIHN1Y2ggYXMgbXVsdGlwbGUgZXZlbnRcbiAgLy8gbmFtZXMgYFwiY2hhbmdlIGJsdXJcImAgYW5kIGpRdWVyeS1zdHlsZSBldmVudCBtYXBzIGB7Y2hhbmdlOiBhY3Rpb259YFxuICAvLyBpbiB0ZXJtcyBvZiB0aGUgZXhpc3RpbmcgQVBJLlxuICB2YXIgZXZlbnRzQXBpID0gZnVuY3Rpb24ob2JqLCBhY3Rpb24sIG5hbWUsIHJlc3QpIHtcbiAgICBpZiAoIW5hbWUpIHJldHVybiB0cnVlO1xuXG4gICAgLy8gSGFuZGxlIGV2ZW50IG1hcHMuXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSAnb2JqZWN0Jykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHtcbiAgICAgICAgb2JqW2FjdGlvbl0uYXBwbHkob2JqLCBba2V5LCBuYW1lW2tleV1dLmNvbmNhdChyZXN0KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHNwYWNlIHNlcGFyYXRlZCBldmVudCBuYW1lcy5cbiAgICBpZiAoZXZlbnRTcGxpdHRlci50ZXN0KG5hbWUpKSB7XG4gICAgICB2YXIgbmFtZXMgPSBuYW1lLnNwbGl0KGV2ZW50U3BsaXR0ZXIpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBuYW1lcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgb2JqW2FjdGlvbl0uYXBwbHkob2JqLCBbbmFtZXNbaV1dLmNvbmNhdChyZXN0KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gQSBkaWZmaWN1bHQtdG8tYmVsaWV2ZSwgYnV0IG9wdGltaXplZCBpbnRlcm5hbCBkaXNwYXRjaCBmdW5jdGlvbiBmb3JcbiAgLy8gdHJpZ2dlcmluZyBldmVudHMuIFRyaWVzIHRvIGtlZXAgdGhlIHVzdWFsIGNhc2VzIHNwZWVkeSAobW9zdCBpbnRlcm5hbFxuICAvLyBCYWNrYm9uZSBldmVudHMgaGF2ZSAzIGFyZ3VtZW50cykuXG4gIHZhciB0cmlnZ2VyRXZlbnRzID0gZnVuY3Rpb24oZXZlbnRzLCBhcmdzKSB7XG4gICAgdmFyIGV2LCBpID0gLTEsIGwgPSBldmVudHMubGVuZ3RoLCBhMSA9IGFyZ3NbMF0sIGEyID0gYXJnc1sxXSwgYTMgPSBhcmdzWzJdO1xuICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgIGNhc2UgMDogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgpOyByZXR1cm47XG4gICAgICBjYXNlIDE6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmNhbGwoZXYuY3R4LCBhMSk7IHJldHVybjtcbiAgICAgIGNhc2UgMjogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExLCBhMik7IHJldHVybjtcbiAgICAgIGNhc2UgMzogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExLCBhMiwgYTMpOyByZXR1cm47XG4gICAgICBkZWZhdWx0OiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5hcHBseShldi5jdHgsIGFyZ3MpOyByZXR1cm47XG4gICAgfVxuICB9O1xuXG4gIHZhciBsaXN0ZW5NZXRob2RzID0ge2xpc3RlblRvOiAnb24nLCBsaXN0ZW5Ub09uY2U6ICdvbmNlJ307XG5cbiAgLy8gSW52ZXJzaW9uLW9mLWNvbnRyb2wgdmVyc2lvbnMgb2YgYG9uYCBhbmQgYG9uY2VgLiBUZWxsICp0aGlzKiBvYmplY3QgdG9cbiAgLy8gbGlzdGVuIHRvIGFuIGV2ZW50IGluIGFub3RoZXIgb2JqZWN0IC4uLiBrZWVwaW5nIHRyYWNrIG9mIHdoYXQgaXQnc1xuICAvLyBsaXN0ZW5pbmcgdG8uXG4gIF8uZWFjaChsaXN0ZW5NZXRob2RzLCBmdW5jdGlvbihpbXBsZW1lbnRhdGlvbiwgbWV0aG9kKSB7XG4gICAgRXZlbnRzW21ldGhvZF0gPSBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgbGlzdGVuaW5nVG8gPSB0aGlzLl9saXN0ZW5pbmdUbyB8fCAodGhpcy5fbGlzdGVuaW5nVG8gPSB7fSk7XG4gICAgICB2YXIgaWQgPSBvYmouX2xpc3RlbklkIHx8IChvYmouX2xpc3RlbklkID0gXy51bmlxdWVJZCgnbCcpKTtcbiAgICAgIGxpc3RlbmluZ1RvW2lkXSA9IG9iajtcbiAgICAgIGlmICghY2FsbGJhY2sgJiYgdHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSBjYWxsYmFjayA9IHRoaXM7XG4gICAgICBvYmpbaW1wbGVtZW50YXRpb25dKG5hbWUsIGNhbGxiYWNrLCB0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEFsaWFzZXMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICBFdmVudHMuYmluZCAgID0gRXZlbnRzLm9uO1xuICBFdmVudHMudW5iaW5kID0gRXZlbnRzLm9mZjtcblxuICAvLyBBbGxvdyB0aGUgYEJhY2tib25lYCBvYmplY3QgdG8gc2VydmUgYXMgYSBnbG9iYWwgZXZlbnQgYnVzLCBmb3IgZm9sa3Mgd2hvXG4gIC8vIHdhbnQgZ2xvYmFsIFwicHVic3ViXCIgaW4gYSBjb252ZW5pZW50IHBsYWNlLlxuICBfLmV4dGVuZChCYWNrYm9uZSwgRXZlbnRzKTtcblxuICAvLyBCYWNrYm9uZS5Nb2RlbFxuICAvLyAtLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEJhY2tib25lICoqTW9kZWxzKiogYXJlIHRoZSBiYXNpYyBkYXRhIG9iamVjdCBpbiB0aGUgZnJhbWV3b3JrIC0tXG4gIC8vIGZyZXF1ZW50bHkgcmVwcmVzZW50aW5nIGEgcm93IGluIGEgdGFibGUgaW4gYSBkYXRhYmFzZSBvbiB5b3VyIHNlcnZlci5cbiAgLy8gQSBkaXNjcmV0ZSBjaHVuayBvZiBkYXRhIGFuZCBhIGJ1bmNoIG9mIHVzZWZ1bCwgcmVsYXRlZCBtZXRob2RzIGZvclxuICAvLyBwZXJmb3JtaW5nIGNvbXB1dGF0aW9ucyBhbmQgdHJhbnNmb3JtYXRpb25zIG9uIHRoYXQgZGF0YS5cblxuICAvLyBDcmVhdGUgYSBuZXcgbW9kZWwgd2l0aCB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZXMuIEEgY2xpZW50IGlkIChgY2lkYClcbiAgLy8gaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYW5kIGFzc2lnbmVkIGZvciB5b3UuXG4gIHZhciBNb2RlbCA9IEJhY2tib25lLk1vZGVsID0gZnVuY3Rpb24oYXR0cmlidXRlcywgb3B0aW9ucykge1xuICAgIHZhciBhdHRycyA9IGF0dHJpYnV0ZXMgfHwge307XG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICB0aGlzLmNpZCA9IF8udW5pcXVlSWQoJ2MnKTtcbiAgICB0aGlzLmF0dHJpYnV0ZXMgPSB7fTtcbiAgICBpZiAob3B0aW9ucy5jb2xsZWN0aW9uKSB0aGlzLmNvbGxlY3Rpb24gPSBvcHRpb25zLmNvbGxlY3Rpb247XG4gICAgaWYgKG9wdGlvbnMucGFyc2UpIGF0dHJzID0gdGhpcy5wYXJzZShhdHRycywgb3B0aW9ucykgfHwge307XG4gICAgYXR0cnMgPSBfLmRlZmF1bHRzKHt9LCBhdHRycywgXy5yZXN1bHQodGhpcywgJ2RlZmF1bHRzJykpO1xuICAgIHRoaXMuc2V0KGF0dHJzLCBvcHRpb25zKTtcbiAgICB0aGlzLmNoYW5nZWQgPSB7fTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBBdHRhY2ggYWxsIGluaGVyaXRhYmxlIG1ldGhvZHMgdG8gdGhlIE1vZGVsIHByb3RvdHlwZS5cbiAgXy5leHRlbmQoTW9kZWwucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIEEgaGFzaCBvZiBhdHRyaWJ1dGVzIHdob3NlIGN1cnJlbnQgYW5kIHByZXZpb3VzIHZhbHVlIGRpZmZlci5cbiAgICBjaGFuZ2VkOiBudWxsLFxuXG4gICAgLy8gVGhlIHZhbHVlIHJldHVybmVkIGR1cmluZyB0aGUgbGFzdCBmYWlsZWQgdmFsaWRhdGlvbi5cbiAgICB2YWxpZGF0aW9uRXJyb3I6IG51bGwsXG5cbiAgICAvLyBUaGUgZGVmYXVsdCBuYW1lIGZvciB0aGUgSlNPTiBgaWRgIGF0dHJpYnV0ZSBpcyBgXCJpZFwiYC4gTW9uZ29EQiBhbmRcbiAgICAvLyBDb3VjaERCIHVzZXJzIG1heSB3YW50IHRvIHNldCB0aGlzIHRvIGBcIl9pZFwiYC5cbiAgICBpZEF0dHJpYnV0ZTogJ2lkJyxcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG1vZGVsJ3MgYGF0dHJpYnV0ZXNgIG9iamVjdC5cbiAgICB0b0pTT046IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBfLmNsb25lKHRoaXMuYXR0cmlidXRlcyk7XG4gICAgfSxcblxuICAgIC8vIFByb3h5IGBCYWNrYm9uZS5zeW5jYCBieSBkZWZhdWx0IC0tIGJ1dCBvdmVycmlkZSB0aGlzIGlmIHlvdSBuZWVkXG4gICAgLy8gY3VzdG9tIHN5bmNpbmcgc2VtYW50aWNzIGZvciAqdGhpcyogcGFydGljdWxhciBtb2RlbC5cbiAgICBzeW5jOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCYWNrYm9uZS5zeW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgdmFsdWUgb2YgYW4gYXR0cmlidXRlLlxuICAgIGdldDogZnVuY3Rpb24oYXR0cikge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1thdHRyXTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBIVE1MLWVzY2FwZWQgdmFsdWUgb2YgYW4gYXR0cmlidXRlLlxuICAgIGVzY2FwZTogZnVuY3Rpb24oYXR0cikge1xuICAgICAgcmV0dXJuIF8uZXNjYXBlKHRoaXMuZ2V0KGF0dHIpKTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGF0dHJpYnV0ZSBjb250YWlucyBhIHZhbHVlIHRoYXQgaXMgbm90IG51bGxcbiAgICAvLyBvciB1bmRlZmluZWQuXG4gICAgaGFzOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXQoYXR0cikgIT0gbnVsbDtcbiAgICB9LFxuXG4gICAgLy8gU2V0IGEgaGFzaCBvZiBtb2RlbCBhdHRyaWJ1dGVzIG9uIHRoZSBvYmplY3QsIGZpcmluZyBgXCJjaGFuZ2VcImAuIFRoaXMgaXNcbiAgICAvLyB0aGUgY29yZSBwcmltaXRpdmUgb3BlcmF0aW9uIG9mIGEgbW9kZWwsIHVwZGF0aW5nIHRoZSBkYXRhIGFuZCBub3RpZnlpbmdcbiAgICAvLyBhbnlvbmUgd2hvIG5lZWRzIHRvIGtub3cgYWJvdXQgdGhlIGNoYW5nZSBpbiBzdGF0ZS4gVGhlIGhlYXJ0IG9mIHRoZSBiZWFzdC5cbiAgICBzZXQ6IGZ1bmN0aW9uKGtleSwgdmFsLCBvcHRpb25zKSB7XG4gICAgICB2YXIgYXR0ciwgYXR0cnMsIHVuc2V0LCBjaGFuZ2VzLCBzaWxlbnQsIGNoYW5naW5nLCBwcmV2LCBjdXJyZW50O1xuICAgICAgaWYgKGtleSA9PSBudWxsKSByZXR1cm4gdGhpcztcblxuICAgICAgLy8gSGFuZGxlIGJvdGggYFwia2V5XCIsIHZhbHVlYCBhbmQgYHtrZXk6IHZhbHVlfWAgLXN0eWxlIGFyZ3VtZW50cy5cbiAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhdHRycyA9IGtleTtcbiAgICAgICAgb3B0aW9ucyA9IHZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIChhdHRycyA9IHt9KVtrZXldID0gdmFsO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXG4gICAgICAvLyBSdW4gdmFsaWRhdGlvbi5cbiAgICAgIGlmICghdGhpcy5fdmFsaWRhdGUoYXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIC8vIEV4dHJhY3QgYXR0cmlidXRlcyBhbmQgb3B0aW9ucy5cbiAgICAgIHVuc2V0ICAgICAgICAgICA9IG9wdGlvbnMudW5zZXQ7XG4gICAgICBzaWxlbnQgICAgICAgICAgPSBvcHRpb25zLnNpbGVudDtcbiAgICAgIGNoYW5nZXMgICAgICAgICA9IFtdO1xuICAgICAgY2hhbmdpbmcgICAgICAgID0gdGhpcy5fY2hhbmdpbmc7XG4gICAgICB0aGlzLl9jaGFuZ2luZyAgPSB0cnVlO1xuXG4gICAgICBpZiAoIWNoYW5naW5nKSB7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyA9IF8uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkID0ge307XG4gICAgICB9XG4gICAgICBjdXJyZW50ID0gdGhpcy5hdHRyaWJ1dGVzLCBwcmV2ID0gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzO1xuXG4gICAgICAvLyBDaGVjayBmb3IgY2hhbmdlcyBvZiBgaWRgLlxuICAgICAgaWYgKHRoaXMuaWRBdHRyaWJ1dGUgaW4gYXR0cnMpIHRoaXMuaWQgPSBhdHRyc1t0aGlzLmlkQXR0cmlidXRlXTtcblxuICAgICAgLy8gRm9yIGVhY2ggYHNldGAgYXR0cmlidXRlLCB1cGRhdGUgb3IgZGVsZXRlIHRoZSBjdXJyZW50IHZhbHVlLlxuICAgICAgZm9yIChhdHRyIGluIGF0dHJzKSB7XG4gICAgICAgIHZhbCA9IGF0dHJzW2F0dHJdO1xuICAgICAgICBpZiAoIV8uaXNFcXVhbChjdXJyZW50W2F0dHJdLCB2YWwpKSBjaGFuZ2VzLnB1c2goYXR0cik7XG4gICAgICAgIGlmICghXy5pc0VxdWFsKHByZXZbYXR0cl0sIHZhbCkpIHtcbiAgICAgICAgICB0aGlzLmNoYW5nZWRbYXR0cl0gPSB2YWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuY2hhbmdlZFthdHRyXTtcbiAgICAgICAgfVxuICAgICAgICB1bnNldCA/IGRlbGV0ZSBjdXJyZW50W2F0dHJdIDogY3VycmVudFthdHRyXSA9IHZhbDtcbiAgICAgIH1cblxuICAgICAgLy8gVHJpZ2dlciBhbGwgcmVsZXZhbnQgYXR0cmlidXRlIGNoYW5nZXMuXG4gICAgICBpZiAoIXNpbGVudCkge1xuICAgICAgICBpZiAoY2hhbmdlcy5sZW5ndGgpIHRoaXMuX3BlbmRpbmcgPSBvcHRpb25zO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoYW5nZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2U6JyArIGNoYW5nZXNbaV0sIHRoaXMsIGN1cnJlbnRbY2hhbmdlc1tpXV0sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFlvdSBtaWdodCBiZSB3b25kZXJpbmcgd2h5IHRoZXJlJ3MgYSBgd2hpbGVgIGxvb3AgaGVyZS4gQ2hhbmdlcyBjYW5cbiAgICAgIC8vIGJlIHJlY3Vyc2l2ZWx5IG5lc3RlZCB3aXRoaW4gYFwiY2hhbmdlXCJgIGV2ZW50cy5cbiAgICAgIGlmIChjaGFuZ2luZykgcmV0dXJuIHRoaXM7XG4gICAgICBpZiAoIXNpbGVudCkge1xuICAgICAgICB3aGlsZSAodGhpcy5fcGVuZGluZykge1xuICAgICAgICAgIG9wdGlvbnMgPSB0aGlzLl9wZW5kaW5nO1xuICAgICAgICAgIHRoaXMuX3BlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9wZW5kaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLl9jaGFuZ2luZyA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhbiBhdHRyaWJ1dGUgZnJvbSB0aGUgbW9kZWwsIGZpcmluZyBgXCJjaGFuZ2VcImAuIGB1bnNldGAgaXMgYSBub29wXG4gICAgLy8gaWYgdGhlIGF0dHJpYnV0ZSBkb2Vzbid0IGV4aXN0LlxuICAgIHVuc2V0OiBmdW5jdGlvbihhdHRyLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXQoYXR0ciwgdm9pZCAwLCBfLmV4dGVuZCh7fSwgb3B0aW9ucywge3Vuc2V0OiB0cnVlfSkpO1xuICAgIH0sXG5cbiAgICAvLyBDbGVhciBhbGwgYXR0cmlidXRlcyBvbiB0aGUgbW9kZWwsIGZpcmluZyBgXCJjaGFuZ2VcImAuXG4gICAgY2xlYXI6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBhdHRycyA9IHt9O1xuICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuYXR0cmlidXRlcykgYXR0cnNba2V5XSA9IHZvaWQgMDtcbiAgICAgIHJldHVybiB0aGlzLnNldChhdHRycywgXy5leHRlbmQoe30sIG9wdGlvbnMsIHt1bnNldDogdHJ1ZX0pKTtcbiAgICB9LFxuXG4gICAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBtb2RlbCBoYXMgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdCBgXCJjaGFuZ2VcImAgZXZlbnQuXG4gICAgLy8gSWYgeW91IHNwZWNpZnkgYW4gYXR0cmlidXRlIG5hbWUsIGRldGVybWluZSBpZiB0aGF0IGF0dHJpYnV0ZSBoYXMgY2hhbmdlZC5cbiAgICBoYXNDaGFuZ2VkOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICBpZiAoYXR0ciA9PSBudWxsKSByZXR1cm4gIV8uaXNFbXB0eSh0aGlzLmNoYW5nZWQpO1xuICAgICAgcmV0dXJuIF8uaGFzKHRoaXMuY2hhbmdlZCwgYXR0cik7XG4gICAgfSxcblxuICAgIC8vIFJldHVybiBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgdGhlIGF0dHJpYnV0ZXMgdGhhdCBoYXZlIGNoYW5nZWQsIG9yXG4gICAgLy8gZmFsc2UgaWYgdGhlcmUgYXJlIG5vIGNoYW5nZWQgYXR0cmlidXRlcy4gVXNlZnVsIGZvciBkZXRlcm1pbmluZyB3aGF0XG4gICAgLy8gcGFydHMgb2YgYSB2aWV3IG5lZWQgdG8gYmUgdXBkYXRlZCBhbmQvb3Igd2hhdCBhdHRyaWJ1dGVzIG5lZWQgdG8gYmVcbiAgICAvLyBwZXJzaXN0ZWQgdG8gdGhlIHNlcnZlci4gVW5zZXQgYXR0cmlidXRlcyB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuXG4gICAgLy8gWW91IGNhbiBhbHNvIHBhc3MgYW4gYXR0cmlidXRlcyBvYmplY3QgdG8gZGlmZiBhZ2FpbnN0IHRoZSBtb2RlbCxcbiAgICAvLyBkZXRlcm1pbmluZyBpZiB0aGVyZSAqd291bGQgYmUqIGEgY2hhbmdlLlxuICAgIGNoYW5nZWRBdHRyaWJ1dGVzOiBmdW5jdGlvbihkaWZmKSB7XG4gICAgICBpZiAoIWRpZmYpIHJldHVybiB0aGlzLmhhc0NoYW5nZWQoKSA/IF8uY2xvbmUodGhpcy5jaGFuZ2VkKSA6IGZhbHNlO1xuICAgICAgdmFyIHZhbCwgY2hhbmdlZCA9IGZhbHNlO1xuICAgICAgdmFyIG9sZCA9IHRoaXMuX2NoYW5naW5nID8gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzIDogdGhpcy5hdHRyaWJ1dGVzO1xuICAgICAgZm9yICh2YXIgYXR0ciBpbiBkaWZmKSB7XG4gICAgICAgIGlmIChfLmlzRXF1YWwob2xkW2F0dHJdLCAodmFsID0gZGlmZlthdHRyXSkpKSBjb250aW51ZTtcbiAgICAgICAgKGNoYW5nZWQgfHwgKGNoYW5nZWQgPSB7fSkpW2F0dHJdID0gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNoYW5nZWQ7XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgcHJldmlvdXMgdmFsdWUgb2YgYW4gYXR0cmlidXRlLCByZWNvcmRlZCBhdCB0aGUgdGltZSB0aGUgbGFzdFxuICAgIC8vIGBcImNoYW5nZVwiYCBldmVudCB3YXMgZmlyZWQuXG4gICAgcHJldmlvdXM6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIGlmIChhdHRyID09IG51bGwgfHwgIXRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcykgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzW2F0dHJdO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgYWxsIG9mIHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBtb2RlbCBhdCB0aGUgdGltZSBvZiB0aGUgcHJldmlvdXNcbiAgICAvLyBgXCJjaGFuZ2VcImAgZXZlbnQuXG4gICAgcHJldmlvdXNBdHRyaWJ1dGVzOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfLmNsb25lKHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyk7XG4gICAgfSxcblxuICAgIC8vIEZldGNoIHRoZSBtb2RlbCBmcm9tIHRoZSBzZXJ2ZXIuIElmIHRoZSBzZXJ2ZXIncyByZXByZXNlbnRhdGlvbiBvZiB0aGVcbiAgICAvLyBtb2RlbCBkaWZmZXJzIGZyb20gaXRzIGN1cnJlbnQgYXR0cmlidXRlcywgdGhleSB3aWxsIGJlIG92ZXJyaWRkZW4sXG4gICAgLy8gdHJpZ2dlcmluZyBhIGBcImNoYW5nZVwiYCBldmVudC5cbiAgICBmZXRjaDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICBpZiAob3B0aW9ucy5wYXJzZSA9PT0gdm9pZCAwKSBvcHRpb25zLnBhcnNlID0gdHJ1ZTtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXM7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgaWYgKCFtb2RlbC5zZXQobW9kZWwucGFyc2UocmVzcCwgb3B0aW9ucyksIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzKG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcy5zeW5jKCdyZWFkJywgdGhpcywgb3B0aW9ucyk7XG4gICAgfSxcblxuICAgIC8vIFNldCBhIGhhc2ggb2YgbW9kZWwgYXR0cmlidXRlcywgYW5kIHN5bmMgdGhlIG1vZGVsIHRvIHRoZSBzZXJ2ZXIuXG4gICAgLy8gSWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGF0dHJpYnV0ZXMgaGFzaCB0aGF0IGRpZmZlcnMsIHRoZSBtb2RlbCdzXG4gICAgLy8gc3RhdGUgd2lsbCBiZSBgc2V0YCBhZ2Fpbi5cbiAgICBzYXZlOiBmdW5jdGlvbihrZXksIHZhbCwgb3B0aW9ucykge1xuICAgICAgdmFyIGF0dHJzLCBtZXRob2QsIHhociwgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcztcblxuICAgICAgLy8gSGFuZGxlIGJvdGggYFwia2V5XCIsIHZhbHVlYCBhbmQgYHtrZXk6IHZhbHVlfWAgLXN0eWxlIGFyZ3VtZW50cy5cbiAgICAgIGlmIChrZXkgPT0gbnVsbCB8fCB0eXBlb2Yga2V5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhdHRycyA9IGtleTtcbiAgICAgICAgb3B0aW9ucyA9IHZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIChhdHRycyA9IHt9KVtrZXldID0gdmFsO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zID0gXy5leHRlbmQoe3ZhbGlkYXRlOiB0cnVlfSwgb3B0aW9ucyk7XG5cbiAgICAgIC8vIElmIHdlJ3JlIG5vdCB3YWl0aW5nIGFuZCBhdHRyaWJ1dGVzIGV4aXN0LCBzYXZlIGFjdHMgYXNcbiAgICAgIC8vIGBzZXQoYXR0cikuc2F2ZShudWxsLCBvcHRzKWAgd2l0aCB2YWxpZGF0aW9uLiBPdGhlcndpc2UsIGNoZWNrIGlmXG4gICAgICAvLyB0aGUgbW9kZWwgd2lsbCBiZSB2YWxpZCB3aGVuIHRoZSBhdHRyaWJ1dGVzLCBpZiBhbnksIGFyZSBzZXQuXG4gICAgICBpZiAoYXR0cnMgJiYgIW9wdGlvbnMud2FpdCkge1xuICAgICAgICBpZiAoIXRoaXMuc2V0KGF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzLl92YWxpZGF0ZShhdHRycywgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0IHRlbXBvcmFyeSBhdHRyaWJ1dGVzIGlmIGB7d2FpdDogdHJ1ZX1gLlxuICAgICAgaWYgKGF0dHJzICYmIG9wdGlvbnMud2FpdCkge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBfLmV4dGVuZCh7fSwgYXR0cmlidXRlcywgYXR0cnMpO1xuICAgICAgfVxuXG4gICAgICAvLyBBZnRlciBhIHN1Y2Nlc3NmdWwgc2VydmVyLXNpZGUgc2F2ZSwgdGhlIGNsaWVudCBpcyAob3B0aW9uYWxseSlcbiAgICAgIC8vIHVwZGF0ZWQgd2l0aCB0aGUgc2VydmVyLXNpZGUgc3RhdGUuXG4gICAgICBpZiAob3B0aW9ucy5wYXJzZSA9PT0gdm9pZCAwKSBvcHRpb25zLnBhcnNlID0gdHJ1ZTtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXM7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgLy8gRW5zdXJlIGF0dHJpYnV0ZXMgYXJlIHJlc3RvcmVkIGR1cmluZyBzeW5jaHJvbm91cyBzYXZlcy5cbiAgICAgICAgbW9kZWwuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgICAgIHZhciBzZXJ2ZXJBdHRycyA9IG1vZGVsLnBhcnNlKHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBpZiAob3B0aW9ucy53YWl0KSBzZXJ2ZXJBdHRycyA9IF8uZXh0ZW5kKGF0dHJzIHx8IHt9LCBzZXJ2ZXJBdHRycyk7XG4gICAgICAgIGlmIChfLmlzT2JqZWN0KHNlcnZlckF0dHJzKSAmJiAhbW9kZWwuc2V0KHNlcnZlckF0dHJzLCBvcHRpb25zKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcyhtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIG1vZGVsLnRyaWdnZXIoJ3N5bmMnLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgICAgd3JhcEVycm9yKHRoaXMsIG9wdGlvbnMpO1xuXG4gICAgICBtZXRob2QgPSB0aGlzLmlzTmV3KCkgPyAnY3JlYXRlJyA6IChvcHRpb25zLnBhdGNoID8gJ3BhdGNoJyA6ICd1cGRhdGUnKTtcbiAgICAgIGlmIChtZXRob2QgPT09ICdwYXRjaCcpIG9wdGlvbnMuYXR0cnMgPSBhdHRycztcbiAgICAgIHhociA9IHRoaXMuc3luYyhtZXRob2QsIHRoaXMsIG9wdGlvbnMpO1xuXG4gICAgICAvLyBSZXN0b3JlIGF0dHJpYnV0ZXMuXG4gICAgICBpZiAoYXR0cnMgJiYgb3B0aW9ucy53YWl0KSB0aGlzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuXG4gICAgICByZXR1cm4geGhyO1xuICAgIH0sXG5cbiAgICAvLyBEZXN0cm95IHRoaXMgbW9kZWwgb24gdGhlIHNlcnZlciBpZiBpdCB3YXMgYWxyZWFkeSBwZXJzaXN0ZWQuXG4gICAgLy8gT3B0aW1pc3RpY2FsbHkgcmVtb3ZlcyB0aGUgbW9kZWwgZnJvbSBpdHMgY29sbGVjdGlvbiwgaWYgaXQgaGFzIG9uZS5cbiAgICAvLyBJZiBgd2FpdDogdHJ1ZWAgaXMgcGFzc2VkLCB3YWl0cyBmb3IgdGhlIHNlcnZlciB0byByZXNwb25kIGJlZm9yZSByZW1vdmFsLlxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgdmFyIG1vZGVsID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuXG4gICAgICB2YXIgZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBtb2RlbC50cmlnZ2VyKCdkZXN0cm95JywgbW9kZWwsIG1vZGVsLmNvbGxlY3Rpb24sIG9wdGlvbnMpO1xuICAgICAgfTtcblxuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICBpZiAob3B0aW9ucy53YWl0IHx8IG1vZGVsLmlzTmV3KCkpIGRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MobW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoIW1vZGVsLmlzTmV3KCkpIG1vZGVsLnRyaWdnZXIoJ3N5bmMnLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5pc05ldygpKSB7XG4gICAgICAgIG9wdGlvbnMuc3VjY2VzcygpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG5cbiAgICAgIHZhciB4aHIgPSB0aGlzLnN5bmMoJ2RlbGV0ZScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgaWYgKCFvcHRpb25zLndhaXQpIGRlc3Ryb3koKTtcbiAgICAgIHJldHVybiB4aHI7XG4gICAgfSxcblxuICAgIC8vIERlZmF1bHQgVVJMIGZvciB0aGUgbW9kZWwncyByZXByZXNlbnRhdGlvbiBvbiB0aGUgc2VydmVyIC0tIGlmIHlvdSdyZVxuICAgIC8vIHVzaW5nIEJhY2tib25lJ3MgcmVzdGZ1bCBtZXRob2RzLCBvdmVycmlkZSB0aGlzIHRvIGNoYW5nZSB0aGUgZW5kcG9pbnRcbiAgICAvLyB0aGF0IHdpbGwgYmUgY2FsbGVkLlxuICAgIHVybDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYmFzZSA9XG4gICAgICAgIF8ucmVzdWx0KHRoaXMsICd1cmxSb290JykgfHxcbiAgICAgICAgXy5yZXN1bHQodGhpcy5jb2xsZWN0aW9uLCAndXJsJykgfHxcbiAgICAgICAgdXJsRXJyb3IoKTtcbiAgICAgIGlmICh0aGlzLmlzTmV3KCkpIHJldHVybiBiYXNlO1xuICAgICAgcmV0dXJuIGJhc2UucmVwbGFjZSgvKFteXFwvXSkkLywgJyQxLycpICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuaWQpO1xuICAgIH0sXG5cbiAgICAvLyAqKnBhcnNlKiogY29udmVydHMgYSByZXNwb25zZSBpbnRvIHRoZSBoYXNoIG9mIGF0dHJpYnV0ZXMgdG8gYmUgYHNldGAgb25cbiAgICAvLyB0aGUgbW9kZWwuIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGlzIGp1c3QgdG8gcGFzcyB0aGUgcmVzcG9uc2UgYWxvbmcuXG4gICAgcGFyc2U6IGZ1bmN0aW9uKHJlc3AsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiByZXNwO1xuICAgIH0sXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgbW9kZWwgd2l0aCBpZGVudGljYWwgYXR0cmlidXRlcyB0byB0aGlzIG9uZS5cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gQSBtb2RlbCBpcyBuZXcgaWYgaXQgaGFzIG5ldmVyIGJlZW4gc2F2ZWQgdG8gdGhlIHNlcnZlciwgYW5kIGxhY2tzIGFuIGlkLlxuICAgIGlzTmV3OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5oYXModGhpcy5pZEF0dHJpYnV0ZSk7XG4gICAgfSxcblxuICAgIC8vIENoZWNrIGlmIHRoZSBtb2RlbCBpcyBjdXJyZW50bHkgaW4gYSB2YWxpZCBzdGF0ZS5cbiAgICBpc1ZhbGlkOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmFsaWRhdGUoe30sIF8uZXh0ZW5kKG9wdGlvbnMgfHwge30sIHsgdmFsaWRhdGU6IHRydWUgfSkpO1xuICAgIH0sXG5cbiAgICAvLyBSdW4gdmFsaWRhdGlvbiBhZ2FpbnN0IHRoZSBuZXh0IGNvbXBsZXRlIHNldCBvZiBtb2RlbCBhdHRyaWJ1dGVzLFxuICAgIC8vIHJldHVybmluZyBgdHJ1ZWAgaWYgYWxsIGlzIHdlbGwuIE90aGVyd2lzZSwgZmlyZSBhbiBgXCJpbnZhbGlkXCJgIGV2ZW50LlxuICAgIF92YWxpZGF0ZTogZnVuY3Rpb24oYXR0cnMsIG9wdGlvbnMpIHtcbiAgICAgIGlmICghb3B0aW9ucy52YWxpZGF0ZSB8fCAhdGhpcy52YWxpZGF0ZSkgcmV0dXJuIHRydWU7XG4gICAgICBhdHRycyA9IF8uZXh0ZW5kKHt9LCB0aGlzLmF0dHJpYnV0ZXMsIGF0dHJzKTtcbiAgICAgIHZhciBlcnJvciA9IHRoaXMudmFsaWRhdGlvbkVycm9yID0gdGhpcy52YWxpZGF0ZShhdHRycywgb3B0aW9ucykgfHwgbnVsbDtcbiAgICAgIGlmICghZXJyb3IpIHJldHVybiB0cnVlO1xuICAgICAgdGhpcy50cmlnZ2VyKCdpbnZhbGlkJywgdGhpcywgZXJyb3IsIF8uZXh0ZW5kKG9wdGlvbnMsIHt2YWxpZGF0aW9uRXJyb3I6IGVycm9yfSkpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBVbmRlcnNjb3JlIG1ldGhvZHMgdGhhdCB3ZSB3YW50IHRvIGltcGxlbWVudCBvbiB0aGUgTW9kZWwuXG4gIHZhciBtb2RlbE1ldGhvZHMgPSBbJ2tleXMnLCAndmFsdWVzJywgJ3BhaXJzJywgJ2ludmVydCcsICdwaWNrJywgJ29taXQnXTtcblxuICAvLyBNaXggaW4gZWFjaCBVbmRlcnNjb3JlIG1ldGhvZCBhcyBhIHByb3h5IHRvIGBNb2RlbCNhdHRyaWJ1dGVzYC5cbiAgXy5lYWNoKG1vZGVsTWV0aG9kcywgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgTW9kZWwucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgYXJncy51bnNoaWZ0KHRoaXMuYXR0cmlidXRlcyk7XG4gICAgICByZXR1cm4gX1ttZXRob2RdLmFwcGx5KF8sIGFyZ3MpO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEJhY2tib25lLkNvbGxlY3Rpb25cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIElmIG1vZGVscyB0ZW5kIHRvIHJlcHJlc2VudCBhIHNpbmdsZSByb3cgb2YgZGF0YSwgYSBCYWNrYm9uZSBDb2xsZWN0aW9uIGlzXG4gIC8vIG1vcmUgYW5hbGFnb3VzIHRvIGEgdGFibGUgZnVsbCBvZiBkYXRhIC4uLiBvciBhIHNtYWxsIHNsaWNlIG9yIHBhZ2Ugb2YgdGhhdFxuICAvLyB0YWJsZSwgb3IgYSBjb2xsZWN0aW9uIG9mIHJvd3MgdGhhdCBiZWxvbmcgdG9nZXRoZXIgZm9yIGEgcGFydGljdWxhciByZWFzb25cbiAgLy8gLS0gYWxsIG9mIHRoZSBtZXNzYWdlcyBpbiB0aGlzIHBhcnRpY3VsYXIgZm9sZGVyLCBhbGwgb2YgdGhlIGRvY3VtZW50c1xuICAvLyBiZWxvbmdpbmcgdG8gdGhpcyBwYXJ0aWN1bGFyIGF1dGhvciwgYW5kIHNvIG9uLiBDb2xsZWN0aW9ucyBtYWludGFpblxuICAvLyBpbmRleGVzIG9mIHRoZWlyIG1vZGVscywgYm90aCBpbiBvcmRlciwgYW5kIGZvciBsb29rdXAgYnkgYGlkYC5cblxuICAvLyBDcmVhdGUgYSBuZXcgKipDb2xsZWN0aW9uKiosIHBlcmhhcHMgdG8gY29udGFpbiBhIHNwZWNpZmljIHR5cGUgb2YgYG1vZGVsYC5cbiAgLy8gSWYgYSBgY29tcGFyYXRvcmAgaXMgc3BlY2lmaWVkLCB0aGUgQ29sbGVjdGlvbiB3aWxsIG1haW50YWluXG4gIC8vIGl0cyBtb2RlbHMgaW4gc29ydCBvcmRlciwgYXMgdGhleSdyZSBhZGRlZCBhbmQgcmVtb3ZlZC5cbiAgdmFyIENvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uID0gZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICBpZiAob3B0aW9ucy5tb2RlbCkgdGhpcy5tb2RlbCA9IG9wdGlvbnMubW9kZWw7XG4gICAgaWYgKG9wdGlvbnMuY29tcGFyYXRvciAhPT0gdm9pZCAwKSB0aGlzLmNvbXBhcmF0b3IgPSBvcHRpb25zLmNvbXBhcmF0b3I7XG4gICAgdGhpcy5fcmVzZXQoKTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAobW9kZWxzKSB0aGlzLnJlc2V0KG1vZGVscywgXy5leHRlbmQoe3NpbGVudDogdHJ1ZX0sIG9wdGlvbnMpKTtcbiAgfTtcblxuICAvLyBEZWZhdWx0IG9wdGlvbnMgZm9yIGBDb2xsZWN0aW9uI3NldGAuXG4gIHZhciBzZXRPcHRpb25zID0ge2FkZDogdHJ1ZSwgcmVtb3ZlOiB0cnVlLCBtZXJnZTogdHJ1ZX07XG4gIHZhciBhZGRPcHRpb25zID0ge2FkZDogdHJ1ZSwgcmVtb3ZlOiBmYWxzZX07XG5cbiAgLy8gRGVmaW5lIHRoZSBDb2xsZWN0aW9uJ3MgaW5oZXJpdGFibGUgbWV0aG9kcy5cbiAgXy5leHRlbmQoQ29sbGVjdGlvbi5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gVGhlIGRlZmF1bHQgbW9kZWwgZm9yIGEgY29sbGVjdGlvbiBpcyBqdXN0IGEgKipCYWNrYm9uZS5Nb2RlbCoqLlxuICAgIC8vIFRoaXMgc2hvdWxkIGJlIG92ZXJyaWRkZW4gaW4gbW9zdCBjYXNlcy5cbiAgICBtb2RlbDogTW9kZWwsXG5cbiAgICAvLyBJbml0aWFsaXplIGlzIGFuIGVtcHR5IGZ1bmN0aW9uIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGl0IHdpdGggeW91ciBvd25cbiAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpe30sXG5cbiAgICAvLyBUaGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhIENvbGxlY3Rpb24gaXMgYW4gYXJyYXkgb2YgdGhlXG4gICAgLy8gbW9kZWxzJyBhdHRyaWJ1dGVzLlxuICAgIHRvSlNPTjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKG1vZGVsKXsgcmV0dXJuIG1vZGVsLnRvSlNPTihvcHRpb25zKTsgfSk7XG4gICAgfSxcblxuICAgIC8vIFByb3h5IGBCYWNrYm9uZS5zeW5jYCBieSBkZWZhdWx0LlxuICAgIHN5bmM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJhY2tib25lLnN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgbW9kZWwsIG9yIGxpc3Qgb2YgbW9kZWxzIHRvIHRoZSBzZXQuXG4gICAgYWRkOiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldChtb2RlbHMsIF8uZXh0ZW5kKHttZXJnZTogZmFsc2V9LCBvcHRpb25zLCBhZGRPcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhIG1vZGVsLCBvciBhIGxpc3Qgb2YgbW9kZWxzIGZyb20gdGhlIHNldC5cbiAgICByZW1vdmU6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgICAgdmFyIHNpbmd1bGFyID0gIV8uaXNBcnJheShtb2RlbHMpO1xuICAgICAgbW9kZWxzID0gc2luZ3VsYXIgPyBbbW9kZWxzXSA6IF8uY2xvbmUobW9kZWxzKTtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgICB2YXIgaSwgbCwgaW5kZXgsIG1vZGVsO1xuICAgICAgZm9yIChpID0gMCwgbCA9IG1vZGVscy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbW9kZWwgPSBtb2RlbHNbaV0gPSB0aGlzLmdldChtb2RlbHNbaV0pO1xuICAgICAgICBpZiAoIW1vZGVsKSBjb250aW51ZTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2J5SWRbbW9kZWwuaWRdO1xuICAgICAgICBkZWxldGUgdGhpcy5fYnlJZFttb2RlbC5jaWRdO1xuICAgICAgICBpbmRleCA9IHRoaXMuaW5kZXhPZihtb2RlbCk7XG4gICAgICAgIHRoaXMubW9kZWxzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHRoaXMubGVuZ3RoLS07XG4gICAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHtcbiAgICAgICAgICBvcHRpb25zLmluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbW9kZWwudHJpZ2dlcigncmVtb3ZlJywgbW9kZWwsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3JlbW92ZVJlZmVyZW5jZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2luZ3VsYXIgPyBtb2RlbHNbMF0gOiBtb2RlbHM7XG4gICAgfSxcblxuICAgIC8vIFVwZGF0ZSBhIGNvbGxlY3Rpb24gYnkgYHNldGAtaW5nIGEgbmV3IGxpc3Qgb2YgbW9kZWxzLCBhZGRpbmcgbmV3IG9uZXMsXG4gICAgLy8gcmVtb3ZpbmcgbW9kZWxzIHRoYXQgYXJlIG5vIGxvbmdlciBwcmVzZW50LCBhbmQgbWVyZ2luZyBtb2RlbHMgdGhhdFxuICAgIC8vIGFscmVhZHkgZXhpc3QgaW4gdGhlIGNvbGxlY3Rpb24sIGFzIG5lY2Vzc2FyeS4gU2ltaWxhciB0byAqKk1vZGVsI3NldCoqLFxuICAgIC8vIHRoZSBjb3JlIG9wZXJhdGlvbiBmb3IgdXBkYXRpbmcgdGhlIGRhdGEgY29udGFpbmVkIGJ5IHRoZSBjb2xsZWN0aW9uLlxuICAgIHNldDogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gXy5kZWZhdWx0cyh7fSwgb3B0aW9ucywgc2V0T3B0aW9ucyk7XG4gICAgICBpZiAob3B0aW9ucy5wYXJzZSkgbW9kZWxzID0gdGhpcy5wYXJzZShtb2RlbHMsIG9wdGlvbnMpO1xuICAgICAgdmFyIHNpbmd1bGFyID0gIV8uaXNBcnJheShtb2RlbHMpO1xuICAgICAgbW9kZWxzID0gc2luZ3VsYXIgPyAobW9kZWxzID8gW21vZGVsc10gOiBbXSkgOiBfLmNsb25lKG1vZGVscyk7XG4gICAgICB2YXIgaSwgbCwgaWQsIG1vZGVsLCBhdHRycywgZXhpc3RpbmcsIHNvcnQ7XG4gICAgICB2YXIgYXQgPSBvcHRpb25zLmF0O1xuICAgICAgdmFyIHRhcmdldE1vZGVsID0gdGhpcy5tb2RlbDtcbiAgICAgIHZhciBzb3J0YWJsZSA9IHRoaXMuY29tcGFyYXRvciAmJiAoYXQgPT0gbnVsbCkgJiYgb3B0aW9ucy5zb3J0ICE9PSBmYWxzZTtcbiAgICAgIHZhciBzb3J0QXR0ciA9IF8uaXNTdHJpbmcodGhpcy5jb21wYXJhdG9yKSA/IHRoaXMuY29tcGFyYXRvciA6IG51bGw7XG4gICAgICB2YXIgdG9BZGQgPSBbXSwgdG9SZW1vdmUgPSBbXSwgbW9kZWxNYXAgPSB7fTtcbiAgICAgIHZhciBhZGQgPSBvcHRpb25zLmFkZCwgbWVyZ2UgPSBvcHRpb25zLm1lcmdlLCByZW1vdmUgPSBvcHRpb25zLnJlbW92ZTtcbiAgICAgIHZhciBvcmRlciA9ICFzb3J0YWJsZSAmJiBhZGQgJiYgcmVtb3ZlID8gW10gOiBmYWxzZTtcblxuICAgICAgLy8gVHVybiBiYXJlIG9iamVjdHMgaW50byBtb2RlbCByZWZlcmVuY2VzLCBhbmQgcHJldmVudCBpbnZhbGlkIG1vZGVsc1xuICAgICAgLy8gZnJvbSBiZWluZyBhZGRlZC5cbiAgICAgIGZvciAoaSA9IDAsIGwgPSBtb2RlbHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGF0dHJzID0gbW9kZWxzW2ldIHx8IHt9O1xuICAgICAgICBpZiAoYXR0cnMgaW5zdGFuY2VvZiBNb2RlbCkge1xuICAgICAgICAgIGlkID0gbW9kZWwgPSBhdHRycztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZCA9IGF0dHJzW3RhcmdldE1vZGVsLnByb3RvdHlwZS5pZEF0dHJpYnV0ZSB8fCAnaWQnXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGEgZHVwbGljYXRlIGlzIGZvdW5kLCBwcmV2ZW50IGl0IGZyb20gYmVpbmcgYWRkZWQgYW5kXG4gICAgICAgIC8vIG9wdGlvbmFsbHkgbWVyZ2UgaXQgaW50byB0aGUgZXhpc3RpbmcgbW9kZWwuXG4gICAgICAgIGlmIChleGlzdGluZyA9IHRoaXMuZ2V0KGlkKSkge1xuICAgICAgICAgIGlmIChyZW1vdmUpIG1vZGVsTWFwW2V4aXN0aW5nLmNpZF0gPSB0cnVlO1xuICAgICAgICAgIGlmIChtZXJnZSkge1xuICAgICAgICAgICAgYXR0cnMgPSBhdHRycyA9PT0gbW9kZWwgPyBtb2RlbC5hdHRyaWJ1dGVzIDogYXR0cnM7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wYXJzZSkgYXR0cnMgPSBleGlzdGluZy5wYXJzZShhdHRycywgb3B0aW9ucyk7XG4gICAgICAgICAgICBleGlzdGluZy5zZXQoYXR0cnMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKHNvcnRhYmxlICYmICFzb3J0ICYmIGV4aXN0aW5nLmhhc0NoYW5nZWQoc29ydEF0dHIpKSBzb3J0ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbW9kZWxzW2ldID0gZXhpc3Rpbmc7XG5cbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhIG5ldywgdmFsaWQgbW9kZWwsIHB1c2ggaXQgdG8gdGhlIGB0b0FkZGAgbGlzdC5cbiAgICAgICAgfSBlbHNlIGlmIChhZGQpIHtcbiAgICAgICAgICBtb2RlbCA9IG1vZGVsc1tpXSA9IHRoaXMuX3ByZXBhcmVNb2RlbChhdHRycywgb3B0aW9ucyk7XG4gICAgICAgICAgaWYgKCFtb2RlbCkgY29udGludWU7XG4gICAgICAgICAgdG9BZGQucHVzaChtb2RlbCk7XG4gICAgICAgICAgdGhpcy5fYWRkUmVmZXJlbmNlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERvIG5vdCBhZGQgbXVsdGlwbGUgbW9kZWxzIHdpdGggdGhlIHNhbWUgYGlkYC5cbiAgICAgICAgbW9kZWwgPSBleGlzdGluZyB8fCBtb2RlbDtcbiAgICAgICAgaWYgKG9yZGVyICYmIChtb2RlbC5pc05ldygpIHx8ICFtb2RlbE1hcFttb2RlbC5pZF0pKSBvcmRlci5wdXNoKG1vZGVsKTtcbiAgICAgICAgbW9kZWxNYXBbbW9kZWwuaWRdID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIG5vbmV4aXN0ZW50IG1vZGVscyBpZiBhcHByb3ByaWF0ZS5cbiAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgaWYgKCFtb2RlbE1hcFsobW9kZWwgPSB0aGlzLm1vZGVsc1tpXSkuY2lkXSkgdG9SZW1vdmUucHVzaChtb2RlbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvUmVtb3ZlLmxlbmd0aCkgdGhpcy5yZW1vdmUodG9SZW1vdmUsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWUgaWYgc29ydGluZyBpcyBuZWVkZWQsIHVwZGF0ZSBgbGVuZ3RoYCBhbmQgc3BsaWNlIGluIG5ldyBtb2RlbHMuXG4gICAgICBpZiAodG9BZGQubGVuZ3RoIHx8IChvcmRlciAmJiBvcmRlci5sZW5ndGgpKSB7XG4gICAgICAgIGlmIChzb3J0YWJsZSkgc29ydCA9IHRydWU7XG4gICAgICAgIHRoaXMubGVuZ3RoICs9IHRvQWRkLmxlbmd0aDtcbiAgICAgICAgaWYgKGF0ICE9IG51bGwpIHtcbiAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gdG9BZGQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVscy5zcGxpY2UoYXQgKyBpLCAwLCB0b0FkZFtpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChvcmRlcikgdGhpcy5tb2RlbHMubGVuZ3RoID0gMDtcbiAgICAgICAgICB2YXIgb3JkZXJlZE1vZGVscyA9IG9yZGVyIHx8IHRvQWRkO1xuICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBvcmRlcmVkTW9kZWxzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5tb2RlbHMucHVzaChvcmRlcmVkTW9kZWxzW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU2lsZW50bHkgc29ydCB0aGUgY29sbGVjdGlvbiBpZiBhcHByb3ByaWF0ZS5cbiAgICAgIGlmIChzb3J0KSB0aGlzLnNvcnQoe3NpbGVudDogdHJ1ZX0pO1xuXG4gICAgICAvLyBVbmxlc3Mgc2lsZW5jZWQsIGl0J3MgdGltZSB0byBmaXJlIGFsbCBhcHByb3ByaWF0ZSBhZGQvc29ydCBldmVudHMuXG4gICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB7XG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSB0b0FkZC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAobW9kZWwgPSB0b0FkZFtpXSkudHJpZ2dlcignYWRkJywgbW9kZWwsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzb3J0IHx8IChvcmRlciAmJiBvcmRlci5sZW5ndGgpKSB0aGlzLnRyaWdnZXIoJ3NvcnQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJuIHRoZSBhZGRlZCAob3IgbWVyZ2VkKSBtb2RlbCAob3IgbW9kZWxzKS5cbiAgICAgIHJldHVybiBzaW5ndWxhciA/IG1vZGVsc1swXSA6IG1vZGVscztcbiAgICB9LFxuXG4gICAgLy8gV2hlbiB5b3UgaGF2ZSBtb3JlIGl0ZW1zIHRoYW4geW91IHdhbnQgdG8gYWRkIG9yIHJlbW92ZSBpbmRpdmlkdWFsbHksXG4gICAgLy8geW91IGNhbiByZXNldCB0aGUgZW50aXJlIHNldCB3aXRoIGEgbmV3IGxpc3Qgb2YgbW9kZWxzLCB3aXRob3V0IGZpcmluZ1xuICAgIC8vIGFueSBncmFudWxhciBgYWRkYCBvciBgcmVtb3ZlYCBldmVudHMuIEZpcmVzIGByZXNldGAgd2hlbiBmaW5pc2hlZC5cbiAgICAvLyBVc2VmdWwgZm9yIGJ1bGsgb3BlcmF0aW9ucyBhbmQgb3B0aW1pemF0aW9ucy5cbiAgICByZXNldDogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLm1vZGVscy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKHRoaXMubW9kZWxzW2ldLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMucHJldmlvdXNNb2RlbHMgPSB0aGlzLm1vZGVscztcbiAgICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgICBtb2RlbHMgPSB0aGlzLmFkZChtb2RlbHMsIF8uZXh0ZW5kKHtzaWxlbnQ6IHRydWV9LCBvcHRpb25zKSk7XG4gICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLnRyaWdnZXIoJ3Jlc2V0JywgdGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gbW9kZWxzO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSBtb2RlbCB0byB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHB1c2g6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZGQobW9kZWwsIF8uZXh0ZW5kKHthdDogdGhpcy5sZW5ndGh9LCBvcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhIG1vZGVsIGZyb20gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICBwb3A6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuYXQodGhpcy5sZW5ndGggLSAxKTtcbiAgICAgIHRoaXMucmVtb3ZlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBtb2RlbDtcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgbW9kZWwgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICB1bnNoaWZ0OiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuYWRkKG1vZGVsLCBfLmV4dGVuZCh7YXQ6IDB9LCBvcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhIG1vZGVsIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICBzaGlmdDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIG1vZGVsID0gdGhpcy5hdCgwKTtcbiAgICAgIHRoaXMucmVtb3ZlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBtb2RlbDtcbiAgICB9LFxuXG4gICAgLy8gU2xpY2Ugb3V0IGEgc3ViLWFycmF5IG9mIG1vZGVscyBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgIHNsaWNlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBzbGljZS5hcHBseSh0aGlzLm1vZGVscywgYXJndW1lbnRzKTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IGEgbW9kZWwgZnJvbSB0aGUgc2V0IGJ5IGlkLlxuICAgIGdldDogZnVuY3Rpb24ob2JqKSB7XG4gICAgICBpZiAob2JqID09IG51bGwpIHJldHVybiB2b2lkIDA7XG4gICAgICByZXR1cm4gdGhpcy5fYnlJZFtvYmpdIHx8IHRoaXMuX2J5SWRbb2JqLmlkXSB8fCB0aGlzLl9ieUlkW29iai5jaWRdO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIG1vZGVsIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICBhdDogZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vZGVsc1tpbmRleF07XG4gICAgfSxcblxuICAgIC8vIFJldHVybiBtb2RlbHMgd2l0aCBtYXRjaGluZyBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIHNpbXBsZSBjYXNlcyBvZlxuICAgIC8vIGBmaWx0ZXJgLlxuICAgIHdoZXJlOiBmdW5jdGlvbihhdHRycywgZmlyc3QpIHtcbiAgICAgIGlmIChfLmlzRW1wdHkoYXR0cnMpKSByZXR1cm4gZmlyc3QgPyB2b2lkIDAgOiBbXTtcbiAgICAgIHJldHVybiB0aGlzW2ZpcnN0ID8gJ2ZpbmQnIDogJ2ZpbHRlciddKGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBhdHRycykge1xuICAgICAgICAgIGlmIChhdHRyc1trZXldICE9PSBtb2RlbC5nZXQoa2V5KSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vIFJldHVybiB0aGUgZmlyc3QgbW9kZWwgd2l0aCBtYXRjaGluZyBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIHNpbXBsZSBjYXNlc1xuICAgIC8vIG9mIGBmaW5kYC5cbiAgICBmaW5kV2hlcmU6IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgICByZXR1cm4gdGhpcy53aGVyZShhdHRycywgdHJ1ZSk7XG4gICAgfSxcblxuICAgIC8vIEZvcmNlIHRoZSBjb2xsZWN0aW9uIHRvIHJlLXNvcnQgaXRzZWxmLiBZb3UgZG9uJ3QgbmVlZCB0byBjYWxsIHRoaXMgdW5kZXJcbiAgICAvLyBub3JtYWwgY2lyY3Vtc3RhbmNlcywgYXMgdGhlIHNldCB3aWxsIG1haW50YWluIHNvcnQgb3JkZXIgYXMgZWFjaCBpdGVtXG4gICAgLy8gaXMgYWRkZWQuXG4gICAgc29ydDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgaWYgKCF0aGlzLmNvbXBhcmF0b3IpIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHNvcnQgYSBzZXQgd2l0aG91dCBhIGNvbXBhcmF0b3InKTtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cbiAgICAgIC8vIFJ1biBzb3J0IGJhc2VkIG9uIHR5cGUgb2YgYGNvbXBhcmF0b3JgLlxuICAgICAgaWYgKF8uaXNTdHJpbmcodGhpcy5jb21wYXJhdG9yKSB8fCB0aGlzLmNvbXBhcmF0b3IubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHRoaXMubW9kZWxzID0gdGhpcy5zb3J0QnkodGhpcy5jb21wYXJhdG9yLCB0aGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubW9kZWxzLnNvcnQoXy5iaW5kKHRoaXMuY29tcGFyYXRvciwgdGhpcykpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLnRyaWdnZXIoJ3NvcnQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBQbHVjayBhbiBhdHRyaWJ1dGUgZnJvbSBlYWNoIG1vZGVsIGluIHRoZSBjb2xsZWN0aW9uLlxuICAgIHBsdWNrOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gXy5pbnZva2UodGhpcy5tb2RlbHMsICdnZXQnLCBhdHRyKTtcbiAgICB9LFxuXG4gICAgLy8gRmV0Y2ggdGhlIGRlZmF1bHQgc2V0IG9mIG1vZGVscyBmb3IgdGhpcyBjb2xsZWN0aW9uLCByZXNldHRpbmcgdGhlXG4gICAgLy8gY29sbGVjdGlvbiB3aGVuIHRoZXkgYXJyaXZlLiBJZiBgcmVzZXQ6IHRydWVgIGlzIHBhc3NlZCwgdGhlIHJlc3BvbnNlXG4gICAgLy8gZGF0YSB3aWxsIGJlIHBhc3NlZCB0aHJvdWdoIHRoZSBgcmVzZXRgIG1ldGhvZCBpbnN0ZWFkIG9mIGBzZXRgLlxuICAgIGZldGNoOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIGlmIChvcHRpb25zLnBhcnNlID09PSB2b2lkIDApIG9wdGlvbnMucGFyc2UgPSB0cnVlO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSBvcHRpb25zLnJlc2V0ID8gJ3Jlc2V0JyA6ICdzZXQnO1xuICAgICAgICBjb2xsZWN0aW9uW21ldGhvZF0ocmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzKGNvbGxlY3Rpb24sIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBjb2xsZWN0aW9uLnRyaWdnZXIoJ3N5bmMnLCBjb2xsZWN0aW9uLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcy5zeW5jKCdyZWFkJywgdGhpcywgb3B0aW9ucyk7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBhIG1vZGVsIGluIHRoaXMgY29sbGVjdGlvbi4gQWRkIHRoZSBtb2RlbCB0byB0aGVcbiAgICAvLyBjb2xsZWN0aW9uIGltbWVkaWF0ZWx5LCB1bmxlc3MgYHdhaXQ6IHRydWVgIGlzIHBhc3NlZCwgaW4gd2hpY2ggY2FzZSB3ZVxuICAgIC8vIHdhaXQgZm9yIHRoZSBzZXJ2ZXIgdG8gYWdyZWUuXG4gICAgY3JlYXRlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICBpZiAoIShtb2RlbCA9IHRoaXMuX3ByZXBhcmVNb2RlbChtb2RlbCwgb3B0aW9ucykpKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoIW9wdGlvbnMud2FpdCkgdGhpcy5hZGQobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihtb2RlbCwgcmVzcCkge1xuICAgICAgICBpZiAob3B0aW9ucy53YWl0KSBjb2xsZWN0aW9uLmFkZChtb2RlbCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzKG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICBtb2RlbC5zYXZlKG51bGwsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH0sXG5cbiAgICAvLyAqKnBhcnNlKiogY29udmVydHMgYSByZXNwb25zZSBpbnRvIGEgbGlzdCBvZiBtb2RlbHMgdG8gYmUgYWRkZWQgdG8gdGhlXG4gICAgLy8gY29sbGVjdGlvbi4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gaXMganVzdCB0byBwYXNzIGl0IHRocm91Z2guXG4gICAgcGFyc2U6IGZ1bmN0aW9uKHJlc3AsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiByZXNwO1xuICAgIH0sXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgY29sbGVjdGlvbiB3aXRoIGFuIGlkZW50aWNhbCBsaXN0IG9mIG1vZGVscyBhcyB0aGlzIG9uZS5cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5tb2RlbHMpO1xuICAgIH0sXG5cbiAgICAvLyBQcml2YXRlIG1ldGhvZCB0byByZXNldCBhbGwgaW50ZXJuYWwgc3RhdGUuIENhbGxlZCB3aGVuIHRoZSBjb2xsZWN0aW9uXG4gICAgLy8gaXMgZmlyc3QgaW5pdGlhbGl6ZWQgb3IgcmVzZXQuXG4gICAgX3Jlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMubW9kZWxzID0gW107XG4gICAgICB0aGlzLl9ieUlkICA9IHt9O1xuICAgIH0sXG5cbiAgICAvLyBQcmVwYXJlIGEgaGFzaCBvZiBhdHRyaWJ1dGVzIChvciBvdGhlciBtb2RlbCkgdG8gYmUgYWRkZWQgdG8gdGhpc1xuICAgIC8vIGNvbGxlY3Rpb24uXG4gICAgX3ByZXBhcmVNb2RlbDogZnVuY3Rpb24oYXR0cnMsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChhdHRycyBpbnN0YW5jZW9mIE1vZGVsKSByZXR1cm4gYXR0cnM7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIG9wdGlvbnMuY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICB2YXIgbW9kZWwgPSBuZXcgdGhpcy5tb2RlbChhdHRycywgb3B0aW9ucyk7XG4gICAgICBpZiAoIW1vZGVsLnZhbGlkYXRpb25FcnJvcikgcmV0dXJuIG1vZGVsO1xuICAgICAgdGhpcy50cmlnZ2VyKCdpbnZhbGlkJywgdGhpcywgbW9kZWwudmFsaWRhdGlvbkVycm9yLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIGNyZWF0ZSBhIG1vZGVsJ3MgdGllcyB0byBhIGNvbGxlY3Rpb24uXG4gICAgX2FkZFJlZmVyZW5jZTogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuX2J5SWRbbW9kZWwuY2lkXSA9IG1vZGVsO1xuICAgICAgaWYgKG1vZGVsLmlkICE9IG51bGwpIHRoaXMuX2J5SWRbbW9kZWwuaWRdID0gbW9kZWw7XG4gICAgICBpZiAoIW1vZGVsLmNvbGxlY3Rpb24pIG1vZGVsLmNvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgbW9kZWwub24oJ2FsbCcsIHRoaXMuX29uTW9kZWxFdmVudCwgdGhpcyk7XG4gICAgfSxcblxuICAgIC8vIEludGVybmFsIG1ldGhvZCB0byBzZXZlciBhIG1vZGVsJ3MgdGllcyB0byBhIGNvbGxlY3Rpb24uXG4gICAgX3JlbW92ZVJlZmVyZW5jZTogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIGlmICh0aGlzID09PSBtb2RlbC5jb2xsZWN0aW9uKSBkZWxldGUgbW9kZWwuY29sbGVjdGlvbjtcbiAgICAgIG1vZGVsLm9mZignYWxsJywgdGhpcy5fb25Nb2RlbEV2ZW50LCB0aGlzKTtcbiAgICB9LFxuXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIGNhbGxlZCBldmVyeSB0aW1lIGEgbW9kZWwgaW4gdGhlIHNldCBmaXJlcyBhbiBldmVudC5cbiAgICAvLyBTZXRzIG5lZWQgdG8gdXBkYXRlIHRoZWlyIGluZGV4ZXMgd2hlbiBtb2RlbHMgY2hhbmdlIGlkcy4gQWxsIG90aGVyXG4gICAgLy8gZXZlbnRzIHNpbXBseSBwcm94eSB0aHJvdWdoLiBcImFkZFwiIGFuZCBcInJlbW92ZVwiIGV2ZW50cyB0aGF0IG9yaWdpbmF0ZVxuICAgIC8vIGluIG90aGVyIGNvbGxlY3Rpb25zIGFyZSBpZ25vcmVkLlxuICAgIF9vbk1vZGVsRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50LCBtb2RlbCwgY29sbGVjdGlvbiwgb3B0aW9ucykge1xuICAgICAgaWYgKChldmVudCA9PT0gJ2FkZCcgfHwgZXZlbnQgPT09ICdyZW1vdmUnKSAmJiBjb2xsZWN0aW9uICE9PSB0aGlzKSByZXR1cm47XG4gICAgICBpZiAoZXZlbnQgPT09ICdkZXN0cm95JykgdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgaWYgKG1vZGVsICYmIGV2ZW50ID09PSAnY2hhbmdlOicgKyBtb2RlbC5pZEF0dHJpYnV0ZSkge1xuICAgICAgICBkZWxldGUgdGhpcy5fYnlJZFttb2RlbC5wcmV2aW91cyhtb2RlbC5pZEF0dHJpYnV0ZSldO1xuICAgICAgICBpZiAobW9kZWwuaWQgIT0gbnVsbCkgdGhpcy5fYnlJZFttb2RlbC5pZF0gPSBtb2RlbDtcbiAgICAgIH1cbiAgICAgIHRoaXMudHJpZ2dlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBVbmRlcnNjb3JlIG1ldGhvZHMgdGhhdCB3ZSB3YW50IHRvIGltcGxlbWVudCBvbiB0aGUgQ29sbGVjdGlvbi5cbiAgLy8gOTAlIG9mIHRoZSBjb3JlIHVzZWZ1bG5lc3Mgb2YgQmFja2JvbmUgQ29sbGVjdGlvbnMgaXMgYWN0dWFsbHkgaW1wbGVtZW50ZWRcbiAgLy8gcmlnaHQgaGVyZTpcbiAgdmFyIG1ldGhvZHMgPSBbJ2ZvckVhY2gnLCAnZWFjaCcsICdtYXAnLCAnY29sbGVjdCcsICdyZWR1Y2UnLCAnZm9sZGwnLFxuICAgICdpbmplY3QnLCAncmVkdWNlUmlnaHQnLCAnZm9sZHInLCAnZmluZCcsICdkZXRlY3QnLCAnZmlsdGVyJywgJ3NlbGVjdCcsXG4gICAgJ3JlamVjdCcsICdldmVyeScsICdhbGwnLCAnc29tZScsICdhbnknLCAnaW5jbHVkZScsICdjb250YWlucycsICdpbnZva2UnLFxuICAgICdtYXgnLCAnbWluJywgJ3RvQXJyYXknLCAnc2l6ZScsICdmaXJzdCcsICdoZWFkJywgJ3Rha2UnLCAnaW5pdGlhbCcsICdyZXN0JyxcbiAgICAndGFpbCcsICdkcm9wJywgJ2xhc3QnLCAnd2l0aG91dCcsICdkaWZmZXJlbmNlJywgJ2luZGV4T2YnLCAnc2h1ZmZsZScsXG4gICAgJ2xhc3RJbmRleE9mJywgJ2lzRW1wdHknLCAnY2hhaW4nLCAnc2FtcGxlJ107XG5cbiAgLy8gTWl4IGluIGVhY2ggVW5kZXJzY29yZSBtZXRob2QgYXMgYSBwcm94eSB0byBgQ29sbGVjdGlvbiNtb2RlbHNgLlxuICBfLmVhY2gobWV0aG9kcywgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICBhcmdzLnVuc2hpZnQodGhpcy5tb2RlbHMpO1xuICAgICAgcmV0dXJuIF9bbWV0aG9kXS5hcHBseShfLCBhcmdzKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBVbmRlcnNjb3JlIG1ldGhvZHMgdGhhdCB0YWtlIGEgcHJvcGVydHkgbmFtZSBhcyBhbiBhcmd1bWVudC5cbiAgdmFyIGF0dHJpYnV0ZU1ldGhvZHMgPSBbJ2dyb3VwQnknLCAnY291bnRCeScsICdzb3J0QnknLCAnaW5kZXhCeSddO1xuXG4gIC8vIFVzZSBhdHRyaWJ1dGVzIGluc3RlYWQgb2YgcHJvcGVydGllcy5cbiAgXy5lYWNoKGF0dHJpYnV0ZU1ldGhvZHMsIGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgICAgdmFyIGl0ZXJhdG9yID0gXy5pc0Z1bmN0aW9uKHZhbHVlKSA/IHZhbHVlIDogZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIG1vZGVsLmdldCh2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzLm1vZGVscywgaXRlcmF0b3IsIGNvbnRleHQpO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEJhY2tib25lLlZpZXdcbiAgLy8gLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEJhY2tib25lIFZpZXdzIGFyZSBhbG1vc3QgbW9yZSBjb252ZW50aW9uIHRoYW4gdGhleSBhcmUgYWN0dWFsIGNvZGUuIEEgVmlld1xuICAvLyBpcyBzaW1wbHkgYSBKYXZhU2NyaXB0IG9iamVjdCB0aGF0IHJlcHJlc2VudHMgYSBsb2dpY2FsIGNodW5rIG9mIFVJIGluIHRoZVxuICAvLyBET00uIFRoaXMgbWlnaHQgYmUgYSBzaW5nbGUgaXRlbSwgYW4gZW50aXJlIGxpc3QsIGEgc2lkZWJhciBvciBwYW5lbCwgb3JcbiAgLy8gZXZlbiB0aGUgc3Vycm91bmRpbmcgZnJhbWUgd2hpY2ggd3JhcHMgeW91ciB3aG9sZSBhcHAuIERlZmluaW5nIGEgY2h1bmsgb2ZcbiAgLy8gVUkgYXMgYSAqKlZpZXcqKiBhbGxvd3MgeW91IHRvIGRlZmluZSB5b3VyIERPTSBldmVudHMgZGVjbGFyYXRpdmVseSwgd2l0aG91dFxuICAvLyBoYXZpbmcgdG8gd29ycnkgYWJvdXQgcmVuZGVyIG9yZGVyIC4uLiBhbmQgbWFrZXMgaXQgZWFzeSBmb3IgdGhlIHZpZXcgdG9cbiAgLy8gcmVhY3QgdG8gc3BlY2lmaWMgY2hhbmdlcyBpbiB0aGUgc3RhdGUgb2YgeW91ciBtb2RlbHMuXG5cbiAgLy8gQ3JlYXRpbmcgYSBCYWNrYm9uZS5WaWV3IGNyZWF0ZXMgaXRzIGluaXRpYWwgZWxlbWVudCBvdXRzaWRlIG9mIHRoZSBET00sXG4gIC8vIGlmIGFuIGV4aXN0aW5nIGVsZW1lbnQgaXMgbm90IHByb3ZpZGVkLi4uXG4gIHZhciBWaWV3ID0gQmFja2JvbmUuVmlldyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB0aGlzLmNpZCA9IF8udW5pcXVlSWQoJ3ZpZXcnKTtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIF8uZXh0ZW5kKHRoaXMsIF8ucGljayhvcHRpb25zLCB2aWV3T3B0aW9ucykpO1xuICAgIHRoaXMuX2Vuc3VyZUVsZW1lbnQoKTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLmRlbGVnYXRlRXZlbnRzKCk7XG4gIH07XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IHRvIHNwbGl0IGtleXMgZm9yIGBkZWxlZ2F0ZWAuXG4gIHZhciBkZWxlZ2F0ZUV2ZW50U3BsaXR0ZXIgPSAvXihcXFMrKVxccyooLiopJC87XG5cbiAgLy8gTGlzdCBvZiB2aWV3IG9wdGlvbnMgdG8gYmUgbWVyZ2VkIGFzIHByb3BlcnRpZXMuXG4gIHZhciB2aWV3T3B0aW9ucyA9IFsnbW9kZWwnLCAnY29sbGVjdGlvbicsICdlbCcsICdpZCcsICdhdHRyaWJ1dGVzJywgJ2NsYXNzTmFtZScsICd0YWdOYW1lJywgJ2V2ZW50cyddO1xuXG4gIC8vIFNldCB1cCBhbGwgaW5oZXJpdGFibGUgKipCYWNrYm9uZS5WaWV3KiogcHJvcGVydGllcyBhbmQgbWV0aG9kcy5cbiAgXy5leHRlbmQoVmlldy5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gVGhlIGRlZmF1bHQgYHRhZ05hbWVgIG9mIGEgVmlldydzIGVsZW1lbnQgaXMgYFwiZGl2XCJgLlxuICAgIHRhZ05hbWU6ICdkaXYnLFxuXG4gICAgLy8galF1ZXJ5IGRlbGVnYXRlIGZvciBlbGVtZW50IGxvb2t1cCwgc2NvcGVkIHRvIERPTSBlbGVtZW50cyB3aXRoaW4gdGhlXG4gICAgLy8gY3VycmVudCB2aWV3LiBUaGlzIHNob3VsZCBiZSBwcmVmZXJyZWQgdG8gZ2xvYmFsIGxvb2t1cHMgd2hlcmUgcG9zc2libGUuXG4gICAgJDogZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICAgIHJldHVybiB0aGlzLiRlbC5maW5kKHNlbGVjdG9yKTtcbiAgICB9LFxuXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXG4gICAgLy8gKipyZW5kZXIqKiBpcyB0aGUgY29yZSBmdW5jdGlvbiB0aGF0IHlvdXIgdmlldyBzaG91bGQgb3ZlcnJpZGUsIGluIG9yZGVyXG4gICAgLy8gdG8gcG9wdWxhdGUgaXRzIGVsZW1lbnQgKGB0aGlzLmVsYCksIHdpdGggdGhlIGFwcHJvcHJpYXRlIEhUTUwuIFRoZVxuICAgIC8vIGNvbnZlbnRpb24gaXMgZm9yICoqcmVuZGVyKiogdG8gYWx3YXlzIHJldHVybiBgdGhpc2AuXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgdGhpcyB2aWV3IGJ5IHRha2luZyB0aGUgZWxlbWVudCBvdXQgb2YgdGhlIERPTSwgYW5kIHJlbW92aW5nIGFueVxuICAgIC8vIGFwcGxpY2FibGUgQmFja2JvbmUuRXZlbnRzIGxpc3RlbmVycy5cbiAgICByZW1vdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy4kZWwucmVtb3ZlKCk7XG4gICAgICB0aGlzLnN0b3BMaXN0ZW5pbmcoKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcncyBlbGVtZW50IChgdGhpcy5lbGAgcHJvcGVydHkpLCBpbmNsdWRpbmcgZXZlbnRcbiAgICAvLyByZS1kZWxlZ2F0aW9uLlxuICAgIHNldEVsZW1lbnQ6IGZ1bmN0aW9uKGVsZW1lbnQsIGRlbGVnYXRlKSB7XG4gICAgICBpZiAodGhpcy4kZWwpIHRoaXMudW5kZWxlZ2F0ZUV2ZW50cygpO1xuICAgICAgdGhpcy4kZWwgPSBlbGVtZW50IGluc3RhbmNlb2YgQmFja2JvbmUuJCA/IGVsZW1lbnQgOiBCYWNrYm9uZS4kKGVsZW1lbnQpO1xuICAgICAgdGhpcy5lbCA9IHRoaXMuJGVsWzBdO1xuICAgICAgaWYgKGRlbGVnYXRlICE9PSBmYWxzZSkgdGhpcy5kZWxlZ2F0ZUV2ZW50cygpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFNldCBjYWxsYmFja3MsIHdoZXJlIGB0aGlzLmV2ZW50c2AgaXMgYSBoYXNoIG9mXG4gICAgLy9cbiAgICAvLyAqe1wiZXZlbnQgc2VsZWN0b3JcIjogXCJjYWxsYmFja1wifSpcbiAgICAvL1xuICAgIC8vICAgICB7XG4gICAgLy8gICAgICAgJ21vdXNlZG93biAudGl0bGUnOiAgJ2VkaXQnLFxuICAgIC8vICAgICAgICdjbGljayAuYnV0dG9uJzogICAgICdzYXZlJyxcbiAgICAvLyAgICAgICAnY2xpY2sgLm9wZW4nOiAgICAgICBmdW5jdGlvbihlKSB7IC4uLiB9XG4gICAgLy8gICAgIH1cbiAgICAvL1xuICAgIC8vIHBhaXJzLiBDYWxsYmFja3Mgd2lsbCBiZSBib3VuZCB0byB0aGUgdmlldywgd2l0aCBgdGhpc2Agc2V0IHByb3Blcmx5LlxuICAgIC8vIFVzZXMgZXZlbnQgZGVsZWdhdGlvbiBmb3IgZWZmaWNpZW5jeS5cbiAgICAvLyBPbWl0dGluZyB0aGUgc2VsZWN0b3IgYmluZHMgdGhlIGV2ZW50IHRvIGB0aGlzLmVsYC5cbiAgICAvLyBUaGlzIG9ubHkgd29ya3MgZm9yIGRlbGVnYXRlLWFibGUgZXZlbnRzOiBub3QgYGZvY3VzYCwgYGJsdXJgLCBhbmRcbiAgICAvLyBub3QgYGNoYW5nZWAsIGBzdWJtaXRgLCBhbmQgYHJlc2V0YCBpbiBJbnRlcm5ldCBFeHBsb3Jlci5cbiAgICBkZWxlZ2F0ZUV2ZW50czogZnVuY3Rpb24oZXZlbnRzKSB7XG4gICAgICBpZiAoIShldmVudHMgfHwgKGV2ZW50cyA9IF8ucmVzdWx0KHRoaXMsICdldmVudHMnKSkpKSByZXR1cm4gdGhpcztcbiAgICAgIHRoaXMudW5kZWxlZ2F0ZUV2ZW50cygpO1xuICAgICAgZm9yICh2YXIga2V5IGluIGV2ZW50cykge1xuICAgICAgICB2YXIgbWV0aG9kID0gZXZlbnRzW2tleV07XG4gICAgICAgIGlmICghXy5pc0Z1bmN0aW9uKG1ldGhvZCkpIG1ldGhvZCA9IHRoaXNbZXZlbnRzW2tleV1dO1xuICAgICAgICBpZiAoIW1ldGhvZCkgY29udGludWU7XG5cbiAgICAgICAgdmFyIG1hdGNoID0ga2V5Lm1hdGNoKGRlbGVnYXRlRXZlbnRTcGxpdHRlcik7XG4gICAgICAgIHZhciBldmVudE5hbWUgPSBtYXRjaFsxXSwgc2VsZWN0b3IgPSBtYXRjaFsyXTtcbiAgICAgICAgbWV0aG9kID0gXy5iaW5kKG1ldGhvZCwgdGhpcyk7XG4gICAgICAgIGV2ZW50TmFtZSArPSAnLmRlbGVnYXRlRXZlbnRzJyArIHRoaXMuY2lkO1xuICAgICAgICBpZiAoc2VsZWN0b3IgPT09ICcnKSB7XG4gICAgICAgICAgdGhpcy4kZWwub24oZXZlbnROYW1lLCBtZXRob2QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuJGVsLm9uKGV2ZW50TmFtZSwgc2VsZWN0b3IsIG1ldGhvZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBDbGVhcnMgYWxsIGNhbGxiYWNrcyBwcmV2aW91c2x5IGJvdW5kIHRvIHRoZSB2aWV3IHdpdGggYGRlbGVnYXRlRXZlbnRzYC5cbiAgICAvLyBZb3UgdXN1YWxseSBkb24ndCBuZWVkIHRvIHVzZSB0aGlzLCBidXQgbWF5IHdpc2ggdG8gaWYgeW91IGhhdmUgbXVsdGlwbGVcbiAgICAvLyBCYWNrYm9uZSB2aWV3cyBhdHRhY2hlZCB0byB0aGUgc2FtZSBET00gZWxlbWVudC5cbiAgICB1bmRlbGVnYXRlRXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuJGVsLm9mZignLmRlbGVnYXRlRXZlbnRzJyArIHRoaXMuY2lkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBFbnN1cmUgdGhhdCB0aGUgVmlldyBoYXMgYSBET00gZWxlbWVudCB0byByZW5kZXIgaW50by5cbiAgICAvLyBJZiBgdGhpcy5lbGAgaXMgYSBzdHJpbmcsIHBhc3MgaXQgdGhyb3VnaCBgJCgpYCwgdGFrZSB0aGUgZmlyc3RcbiAgICAvLyBtYXRjaGluZyBlbGVtZW50LCBhbmQgcmUtYXNzaWduIGl0IHRvIGBlbGAuIE90aGVyd2lzZSwgY3JlYXRlXG4gICAgLy8gYW4gZWxlbWVudCBmcm9tIHRoZSBgaWRgLCBgY2xhc3NOYW1lYCBhbmQgYHRhZ05hbWVgIHByb3BlcnRpZXMuXG4gICAgX2Vuc3VyZUVsZW1lbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLmVsKSB7XG4gICAgICAgIHZhciBhdHRycyA9IF8uZXh0ZW5kKHt9LCBfLnJlc3VsdCh0aGlzLCAnYXR0cmlidXRlcycpKTtcbiAgICAgICAgaWYgKHRoaXMuaWQpIGF0dHJzLmlkID0gXy5yZXN1bHQodGhpcywgJ2lkJyk7XG4gICAgICAgIGlmICh0aGlzLmNsYXNzTmFtZSkgYXR0cnNbJ2NsYXNzJ10gPSBfLnJlc3VsdCh0aGlzLCAnY2xhc3NOYW1lJyk7XG4gICAgICAgIHZhciAkZWwgPSBCYWNrYm9uZS4kKCc8JyArIF8ucmVzdWx0KHRoaXMsICd0YWdOYW1lJykgKyAnPicpLmF0dHIoYXR0cnMpO1xuICAgICAgICB0aGlzLnNldEVsZW1lbnQoJGVsLCBmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldEVsZW1lbnQoXy5yZXN1bHQodGhpcywgJ2VsJyksIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfSk7XG5cbiAgLy8gQmFja2JvbmUuc3luY1xuICAvLyAtLS0tLS0tLS0tLS0tXG5cbiAgLy8gT3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiB0byBjaGFuZ2UgdGhlIG1hbm5lciBpbiB3aGljaCBCYWNrYm9uZSBwZXJzaXN0c1xuICAvLyBtb2RlbHMgdG8gdGhlIHNlcnZlci4gWW91IHdpbGwgYmUgcGFzc2VkIHRoZSB0eXBlIG9mIHJlcXVlc3QsIGFuZCB0aGVcbiAgLy8gbW9kZWwgaW4gcXVlc3Rpb24uIEJ5IGRlZmF1bHQsIG1ha2VzIGEgUkVTVGZ1bCBBamF4IHJlcXVlc3RcbiAgLy8gdG8gdGhlIG1vZGVsJ3MgYHVybCgpYC4gU29tZSBwb3NzaWJsZSBjdXN0b21pemF0aW9ucyBjb3VsZCBiZTpcbiAgLy9cbiAgLy8gKiBVc2UgYHNldFRpbWVvdXRgIHRvIGJhdGNoIHJhcGlkLWZpcmUgdXBkYXRlcyBpbnRvIGEgc2luZ2xlIHJlcXVlc3QuXG4gIC8vICogU2VuZCB1cCB0aGUgbW9kZWxzIGFzIFhNTCBpbnN0ZWFkIG9mIEpTT04uXG4gIC8vICogUGVyc2lzdCBtb2RlbHMgdmlhIFdlYlNvY2tldHMgaW5zdGVhZCBvZiBBamF4LlxuICAvL1xuICAvLyBUdXJuIG9uIGBCYWNrYm9uZS5lbXVsYXRlSFRUUGAgaW4gb3JkZXIgdG8gc2VuZCBgUFVUYCBhbmQgYERFTEVURWAgcmVxdWVzdHNcbiAgLy8gYXMgYFBPU1RgLCB3aXRoIGEgYF9tZXRob2RgIHBhcmFtZXRlciBjb250YWluaW5nIHRoZSB0cnVlIEhUVFAgbWV0aG9kLFxuICAvLyBhcyB3ZWxsIGFzIGFsbCByZXF1ZXN0cyB3aXRoIHRoZSBib2R5IGFzIGBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRgXG4gIC8vIGluc3RlYWQgb2YgYGFwcGxpY2F0aW9uL2pzb25gIHdpdGggdGhlIG1vZGVsIGluIGEgcGFyYW0gbmFtZWQgYG1vZGVsYC5cbiAgLy8gVXNlZnVsIHdoZW4gaW50ZXJmYWNpbmcgd2l0aCBzZXJ2ZXItc2lkZSBsYW5ndWFnZXMgbGlrZSAqKlBIUCoqIHRoYXQgbWFrZVxuICAvLyBpdCBkaWZmaWN1bHQgdG8gcmVhZCB0aGUgYm9keSBvZiBgUFVUYCByZXF1ZXN0cy5cbiAgQmFja2JvbmUuc3luYyA9IGZ1bmN0aW9uKG1ldGhvZCwgbW9kZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgdHlwZSA9IG1ldGhvZE1hcFttZXRob2RdO1xuXG4gICAgLy8gRGVmYXVsdCBvcHRpb25zLCB1bmxlc3Mgc3BlY2lmaWVkLlxuICAgIF8uZGVmYXVsdHMob3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KSwge1xuICAgICAgZW11bGF0ZUhUVFA6IEJhY2tib25lLmVtdWxhdGVIVFRQLFxuICAgICAgZW11bGF0ZUpTT046IEJhY2tib25lLmVtdWxhdGVKU09OXG4gICAgfSk7XG5cbiAgICAvLyBEZWZhdWx0IEpTT04tcmVxdWVzdCBvcHRpb25zLlxuICAgIHZhciBwYXJhbXMgPSB7dHlwZTogdHlwZSwgZGF0YVR5cGU6ICdqc29uJ307XG5cbiAgICAvLyBFbnN1cmUgdGhhdCB3ZSBoYXZlIGEgVVJMLlxuICAgIGlmICghb3B0aW9ucy51cmwpIHtcbiAgICAgIHBhcmFtcy51cmwgPSBfLnJlc3VsdChtb2RlbCwgJ3VybCcpIHx8IHVybEVycm9yKCk7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHRoYXQgd2UgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgcmVxdWVzdCBkYXRhLlxuICAgIGlmIChvcHRpb25zLmRhdGEgPT0gbnVsbCAmJiBtb2RlbCAmJiAobWV0aG9kID09PSAnY3JlYXRlJyB8fCBtZXRob2QgPT09ICd1cGRhdGUnIHx8IG1ldGhvZCA9PT0gJ3BhdGNoJykpIHtcbiAgICAgIHBhcmFtcy5jb250ZW50VHlwZSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgIHBhcmFtcy5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5hdHRycyB8fCBtb2RlbC50b0pTT04ob3B0aW9ucykpO1xuICAgIH1cblxuICAgIC8vIEZvciBvbGRlciBzZXJ2ZXJzLCBlbXVsYXRlIEpTT04gYnkgZW5jb2RpbmcgdGhlIHJlcXVlc3QgaW50byBhbiBIVE1MLWZvcm0uXG4gICAgaWYgKG9wdGlvbnMuZW11bGF0ZUpTT04pIHtcbiAgICAgIHBhcmFtcy5jb250ZW50VHlwZSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnO1xuICAgICAgcGFyYW1zLmRhdGEgPSBwYXJhbXMuZGF0YSA/IHttb2RlbDogcGFyYW1zLmRhdGF9IDoge307XG4gICAgfVxuXG4gICAgLy8gRm9yIG9sZGVyIHNlcnZlcnMsIGVtdWxhdGUgSFRUUCBieSBtaW1pY2tpbmcgdGhlIEhUVFAgbWV0aG9kIHdpdGggYF9tZXRob2RgXG4gICAgLy8gQW5kIGFuIGBYLUhUVFAtTWV0aG9kLU92ZXJyaWRlYCBoZWFkZXIuXG4gICAgaWYgKG9wdGlvbnMuZW11bGF0ZUhUVFAgJiYgKHR5cGUgPT09ICdQVVQnIHx8IHR5cGUgPT09ICdERUxFVEUnIHx8IHR5cGUgPT09ICdQQVRDSCcpKSB7XG4gICAgICBwYXJhbXMudHlwZSA9ICdQT1NUJztcbiAgICAgIGlmIChvcHRpb25zLmVtdWxhdGVKU09OKSBwYXJhbXMuZGF0YS5fbWV0aG9kID0gdHlwZTtcbiAgICAgIHZhciBiZWZvcmVTZW5kID0gb3B0aW9ucy5iZWZvcmVTZW5kO1xuICAgICAgb3B0aW9ucy5iZWZvcmVTZW5kID0gZnVuY3Rpb24oeGhyKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLUhUVFAtTWV0aG9kLU92ZXJyaWRlJywgdHlwZSk7XG4gICAgICAgIGlmIChiZWZvcmVTZW5kKSByZXR1cm4gYmVmb3JlU2VuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBwcm9jZXNzIGRhdGEgb24gYSBub24tR0VUIHJlcXVlc3QuXG4gICAgaWYgKHBhcmFtcy50eXBlICE9PSAnR0VUJyAmJiAhb3B0aW9ucy5lbXVsYXRlSlNPTikge1xuICAgICAgcGFyYW1zLnByb2Nlc3NEYXRhID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UncmUgc2VuZGluZyBhIGBQQVRDSGAgcmVxdWVzdCwgYW5kIHdlJ3JlIGluIGFuIG9sZCBJbnRlcm5ldCBFeHBsb3JlclxuICAgIC8vIHRoYXQgc3RpbGwgaGFzIEFjdGl2ZVggZW5hYmxlZCBieSBkZWZhdWx0LCBvdmVycmlkZSBqUXVlcnkgdG8gdXNlIHRoYXRcbiAgICAvLyBmb3IgWEhSIGluc3RlYWQuIFJlbW92ZSB0aGlzIGxpbmUgd2hlbiBqUXVlcnkgc3VwcG9ydHMgYFBBVENIYCBvbiBJRTguXG4gICAgaWYgKHBhcmFtcy50eXBlID09PSAnUEFUQ0gnICYmIG5vWGhyUGF0Y2gpIHtcbiAgICAgIHBhcmFtcy54aHIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIik7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIE1ha2UgdGhlIHJlcXVlc3QsIGFsbG93aW5nIHRoZSB1c2VyIHRvIG92ZXJyaWRlIGFueSBBamF4IG9wdGlvbnMuXG4gICAgdmFyIHhociA9IG9wdGlvbnMueGhyID0gQmFja2JvbmUuYWpheChfLmV4dGVuZChwYXJhbXMsIG9wdGlvbnMpKTtcbiAgICBtb2RlbC50cmlnZ2VyKCdyZXF1ZXN0JywgbW9kZWwsIHhociwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHhocjtcbiAgfTtcblxuICB2YXIgbm9YaHJQYXRjaCA9XG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgISF3aW5kb3cuQWN0aXZlWE9iamVjdCAmJlxuICAgICAgISh3aW5kb3cuWE1MSHR0cFJlcXVlc3QgJiYgKG5ldyBYTUxIdHRwUmVxdWVzdCkuZGlzcGF0Y2hFdmVudCk7XG5cbiAgLy8gTWFwIGZyb20gQ1JVRCB0byBIVFRQIGZvciBvdXIgZGVmYXVsdCBgQmFja2JvbmUuc3luY2AgaW1wbGVtZW50YXRpb24uXG4gIHZhciBtZXRob2RNYXAgPSB7XG4gICAgJ2NyZWF0ZSc6ICdQT1NUJyxcbiAgICAndXBkYXRlJzogJ1BVVCcsXG4gICAgJ3BhdGNoJzogICdQQVRDSCcsXG4gICAgJ2RlbGV0ZSc6ICdERUxFVEUnLFxuICAgICdyZWFkJzogICAnR0VUJ1xuICB9O1xuXG4gIC8vIFNldCB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiBgQmFja2JvbmUuYWpheGAgdG8gcHJveHkgdGhyb3VnaCB0byBgJGAuXG4gIC8vIE92ZXJyaWRlIHRoaXMgaWYgeW91J2QgbGlrZSB0byB1c2UgYSBkaWZmZXJlbnQgbGlicmFyeS5cbiAgQmFja2JvbmUuYWpheCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS4kLmFqYXguYXBwbHkoQmFja2JvbmUuJCwgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBCYWNrYm9uZS5Sb3V0ZXJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gUm91dGVycyBtYXAgZmF1eC1VUkxzIHRvIGFjdGlvbnMsIGFuZCBmaXJlIGV2ZW50cyB3aGVuIHJvdXRlcyBhcmVcbiAgLy8gbWF0Y2hlZC4gQ3JlYXRpbmcgYSBuZXcgb25lIHNldHMgaXRzIGByb3V0ZXNgIGhhc2gsIGlmIG5vdCBzZXQgc3RhdGljYWxseS5cbiAgdmFyIFJvdXRlciA9IEJhY2tib25lLlJvdXRlciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIGlmIChvcHRpb25zLnJvdXRlcykgdGhpcy5yb3V0ZXMgPSBvcHRpb25zLnJvdXRlcztcbiAgICB0aGlzLl9iaW5kUm91dGVzKCk7XG4gICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQ2FjaGVkIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm9yIG1hdGNoaW5nIG5hbWVkIHBhcmFtIHBhcnRzIGFuZCBzcGxhdHRlZFxuICAvLyBwYXJ0cyBvZiByb3V0ZSBzdHJpbmdzLlxuICB2YXIgb3B0aW9uYWxQYXJhbSA9IC9cXCgoLio/KVxcKS9nO1xuICB2YXIgbmFtZWRQYXJhbSAgICA9IC8oXFwoXFw/KT86XFx3Ky9nO1xuICB2YXIgc3BsYXRQYXJhbSAgICA9IC9cXCpcXHcrL2c7XG4gIHZhciBlc2NhcGVSZWdFeHAgID0gL1tcXC17fVxcW1xcXSs/LixcXFxcXFxeJHwjXFxzXS9nO1xuXG4gIC8vIFNldCB1cCBhbGwgaW5oZXJpdGFibGUgKipCYWNrYm9uZS5Sb3V0ZXIqKiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLlxuICBfLmV4dGVuZChSb3V0ZXIucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vIE1hbnVhbGx5IGJpbmQgYSBzaW5nbGUgbmFtZWQgcm91dGUgdG8gYSBjYWxsYmFjay4gRm9yIGV4YW1wbGU6XG4gICAgLy9cbiAgICAvLyAgICAgdGhpcy5yb3V0ZSgnc2VhcmNoLzpxdWVyeS9wOm51bScsICdzZWFyY2gnLCBmdW5jdGlvbihxdWVyeSwgbnVtKSB7XG4gICAgLy8gICAgICAgLi4uXG4gICAgLy8gICAgIH0pO1xuICAgIC8vXG4gICAgcm91dGU6IGZ1bmN0aW9uKHJvdXRlLCBuYW1lLCBjYWxsYmFjaykge1xuICAgICAgaWYgKCFfLmlzUmVnRXhwKHJvdXRlKSkgcm91dGUgPSB0aGlzLl9yb3V0ZVRvUmVnRXhwKHJvdXRlKTtcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24obmFtZSkpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuYW1lO1xuICAgICAgICBuYW1lID0gJyc7XG4gICAgICB9XG4gICAgICBpZiAoIWNhbGxiYWNrKSBjYWxsYmFjayA9IHRoaXNbbmFtZV07XG4gICAgICB2YXIgcm91dGVyID0gdGhpcztcbiAgICAgIEJhY2tib25lLmhpc3Rvcnkucm91dGUocm91dGUsIGZ1bmN0aW9uKGZyYWdtZW50KSB7XG4gICAgICAgIHZhciBhcmdzID0gcm91dGVyLl9leHRyYWN0UGFyYW1ldGVycyhyb3V0ZSwgZnJhZ21lbnQpO1xuICAgICAgICByb3V0ZXIuZXhlY3V0ZShjYWxsYmFjaywgYXJncyk7XG4gICAgICAgIHJvdXRlci50cmlnZ2VyLmFwcGx5KHJvdXRlciwgWydyb3V0ZTonICsgbmFtZV0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgcm91dGVyLnRyaWdnZXIoJ3JvdXRlJywgbmFtZSwgYXJncyk7XG4gICAgICAgIEJhY2tib25lLmhpc3RvcnkudHJpZ2dlcigncm91dGUnLCByb3V0ZXIsIG5hbWUsIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gRXhlY3V0ZSBhIHJvdXRlIGhhbmRsZXIgd2l0aCB0aGUgcHJvdmlkZWQgcGFyYW1ldGVycy4gIFRoaXMgaXMgYW5cbiAgICAvLyBleGNlbGxlbnQgcGxhY2UgdG8gZG8gcHJlLXJvdXRlIHNldHVwIG9yIHBvc3Qtcm91dGUgY2xlYW51cC5cbiAgICBleGVjdXRlOiBmdW5jdGlvbihjYWxsYmFjaywgYXJncykge1xuICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9LFxuXG4gICAgLy8gU2ltcGxlIHByb3h5IHRvIGBCYWNrYm9uZS5oaXN0b3J5YCB0byBzYXZlIGEgZnJhZ21lbnQgaW50byB0aGUgaGlzdG9yeS5cbiAgICBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsIG9wdGlvbnMpIHtcbiAgICAgIEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoZnJhZ21lbnQsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEJpbmQgYWxsIGRlZmluZWQgcm91dGVzIHRvIGBCYWNrYm9uZS5oaXN0b3J5YC4gV2UgaGF2ZSB0byByZXZlcnNlIHRoZVxuICAgIC8vIG9yZGVyIG9mIHRoZSByb3V0ZXMgaGVyZSB0byBzdXBwb3J0IGJlaGF2aW9yIHdoZXJlIHRoZSBtb3N0IGdlbmVyYWxcbiAgICAvLyByb3V0ZXMgY2FuIGJlIGRlZmluZWQgYXQgdGhlIGJvdHRvbSBvZiB0aGUgcm91dGUgbWFwLlxuICAgIF9iaW5kUm91dGVzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5yb3V0ZXMpIHJldHVybjtcbiAgICAgIHRoaXMucm91dGVzID0gXy5yZXN1bHQodGhpcywgJ3JvdXRlcycpO1xuICAgICAgdmFyIHJvdXRlLCByb3V0ZXMgPSBfLmtleXModGhpcy5yb3V0ZXMpO1xuICAgICAgd2hpbGUgKChyb3V0ZSA9IHJvdXRlcy5wb3AoKSkgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnJvdXRlKHJvdXRlLCB0aGlzLnJvdXRlc1tyb3V0ZV0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBDb252ZXJ0IGEgcm91dGUgc3RyaW5nIGludG8gYSByZWd1bGFyIGV4cHJlc3Npb24sIHN1aXRhYmxlIGZvciBtYXRjaGluZ1xuICAgIC8vIGFnYWluc3QgdGhlIGN1cnJlbnQgbG9jYXRpb24gaGFzaC5cbiAgICBfcm91dGVUb1JlZ0V4cDogZnVuY3Rpb24ocm91dGUpIHtcbiAgICAgIHJvdXRlID0gcm91dGUucmVwbGFjZShlc2NhcGVSZWdFeHAsICdcXFxcJCYnKVxuICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKG9wdGlvbmFsUGFyYW0sICcoPzokMSk/JylcbiAgICAgICAgICAgICAgICAgICAucmVwbGFjZShuYW1lZFBhcmFtLCBmdW5jdGlvbihtYXRjaCwgb3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25hbCA/IG1hdGNoIDogJyhbXi8/XSspJztcbiAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKHNwbGF0UGFyYW0sICcoW14/XSo/KScpO1xuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcm91dGUgKyAnKD86XFxcXD8oW1xcXFxzXFxcXFNdKikpPyQnKTtcbiAgICB9LFxuXG4gICAgLy8gR2l2ZW4gYSByb3V0ZSwgYW5kIGEgVVJMIGZyYWdtZW50IHRoYXQgaXQgbWF0Y2hlcywgcmV0dXJuIHRoZSBhcnJheSBvZlxuICAgIC8vIGV4dHJhY3RlZCBkZWNvZGVkIHBhcmFtZXRlcnMuIEVtcHR5IG9yIHVubWF0Y2hlZCBwYXJhbWV0ZXJzIHdpbGwgYmVcbiAgICAvLyB0cmVhdGVkIGFzIGBudWxsYCB0byBub3JtYWxpemUgY3Jvc3MtYnJvd3NlciBiZWhhdmlvci5cbiAgICBfZXh0cmFjdFBhcmFtZXRlcnM6IGZ1bmN0aW9uKHJvdXRlLCBmcmFnbWVudCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHJvdXRlLmV4ZWMoZnJhZ21lbnQpLnNsaWNlKDEpO1xuICAgICAgcmV0dXJuIF8ubWFwKHBhcmFtcywgZnVuY3Rpb24ocGFyYW0sIGkpIHtcbiAgICAgICAgLy8gRG9uJ3QgZGVjb2RlIHRoZSBzZWFyY2ggcGFyYW1zLlxuICAgICAgICBpZiAoaSA9PT0gcGFyYW1zLmxlbmd0aCAtIDEpIHJldHVybiBwYXJhbSB8fCBudWxsO1xuICAgICAgICByZXR1cm4gcGFyYW0gPyBkZWNvZGVVUklDb21wb25lbnQocGFyYW0pIDogbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBCYWNrYm9uZS5IaXN0b3J5XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBIYW5kbGVzIGNyb3NzLWJyb3dzZXIgaGlzdG9yeSBtYW5hZ2VtZW50LCBiYXNlZCBvbiBlaXRoZXJcbiAgLy8gW3B1c2hTdGF0ZV0oaHR0cDovL2RpdmVpbnRvaHRtbDUuaW5mby9oaXN0b3J5Lmh0bWwpIGFuZCByZWFsIFVSTHMsIG9yXG4gIC8vIFtvbmhhc2hjaGFuZ2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvRE9NL3dpbmRvdy5vbmhhc2hjaGFuZ2UpXG4gIC8vIGFuZCBVUkwgZnJhZ21lbnRzLiBJZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBuZWl0aGVyIChvbGQgSUUsIG5hdGNoKSxcbiAgLy8gZmFsbHMgYmFjayB0byBwb2xsaW5nLlxuICB2YXIgSGlzdG9yeSA9IEJhY2tib25lLkhpc3RvcnkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmhhbmRsZXJzID0gW107XG4gICAgXy5iaW5kQWxsKHRoaXMsICdjaGVja1VybCcpO1xuXG4gICAgLy8gRW5zdXJlIHRoYXQgYEhpc3RvcnlgIGNhbiBiZSB1c2VkIG91dHNpZGUgb2YgdGhlIGJyb3dzZXIuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuICAgICAgdGhpcy5oaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XG4gICAgfVxuICB9O1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3Igc3RyaXBwaW5nIGEgbGVhZGluZyBoYXNoL3NsYXNoIGFuZCB0cmFpbGluZyBzcGFjZS5cbiAgdmFyIHJvdXRlU3RyaXBwZXIgPSAvXlsjXFwvXXxcXHMrJC9nO1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3Igc3RyaXBwaW5nIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMuXG4gIHZhciByb290U3RyaXBwZXIgPSAvXlxcLyt8XFwvKyQvZztcblxuICAvLyBDYWNoZWQgcmVnZXggZm9yIGRldGVjdGluZyBNU0lFLlxuICB2YXIgaXNFeHBsb3JlciA9IC9tc2llIFtcXHcuXSsvO1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3IgcmVtb3ZpbmcgYSB0cmFpbGluZyBzbGFzaC5cbiAgdmFyIHRyYWlsaW5nU2xhc2ggPSAvXFwvJC87XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciBzdHJpcHBpbmcgdXJscyBvZiBoYXNoLlxuICB2YXIgcGF0aFN0cmlwcGVyID0gLyMuKiQvO1xuXG4gIC8vIEhhcyB0aGUgaGlzdG9yeSBoYW5kbGluZyBhbHJlYWR5IGJlZW4gc3RhcnRlZD9cbiAgSGlzdG9yeS5zdGFydGVkID0gZmFsc2U7XG5cbiAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLkhpc3RvcnkqKiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLlxuICBfLmV4dGVuZChIaXN0b3J5LnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBpbnRlcnZhbCB0byBwb2xsIGZvciBoYXNoIGNoYW5nZXMsIGlmIG5lY2Vzc2FyeSwgaXNcbiAgICAvLyB0d2VudHkgdGltZXMgYSBzZWNvbmQuXG4gICAgaW50ZXJ2YWw6IDUwLFxuXG4gICAgLy8gQXJlIHdlIGF0IHRoZSBhcHAgcm9vdD9cbiAgICBhdFJvb3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvW15cXC9dJC8sICckJi8nKSA9PT0gdGhpcy5yb290O1xuICAgIH0sXG5cbiAgICAvLyBHZXRzIHRoZSB0cnVlIGhhc2ggdmFsdWUuIENhbm5vdCB1c2UgbG9jYXRpb24uaGFzaCBkaXJlY3RseSBkdWUgdG8gYnVnXG4gICAgLy8gaW4gRmlyZWZveCB3aGVyZSBsb2NhdGlvbi5oYXNoIHdpbGwgYWx3YXlzIGJlIGRlY29kZWQuXG4gICAgZ2V0SGFzaDogZnVuY3Rpb24od2luZG93KSB7XG4gICAgICB2YXIgbWF0Y2ggPSAod2luZG93IHx8IHRoaXMpLmxvY2F0aW9uLmhyZWYubWF0Y2goLyMoLiopJC8pO1xuICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiAnJztcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBjcm9zcy1icm93c2VyIG5vcm1hbGl6ZWQgVVJMIGZyYWdtZW50LCBlaXRoZXIgZnJvbSB0aGUgVVJMLFxuICAgIC8vIHRoZSBoYXNoLCBvciB0aGUgb3ZlcnJpZGUuXG4gICAgZ2V0RnJhZ21lbnQ6IGZ1bmN0aW9uKGZyYWdtZW50LCBmb3JjZVB1c2hTdGF0ZSkge1xuICAgICAgaWYgKGZyYWdtZW50ID09IG51bGwpIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc1B1c2hTdGF0ZSB8fCAhdGhpcy5fd2FudHNIYXNoQ2hhbmdlIHx8IGZvcmNlUHVzaFN0YXRlKSB7XG4gICAgICAgICAgZnJhZ21lbnQgPSBkZWNvZGVVUkkodGhpcy5sb2NhdGlvbi5wYXRobmFtZSArIHRoaXMubG9jYXRpb24uc2VhcmNoKTtcbiAgICAgICAgICB2YXIgcm9vdCA9IHRoaXMucm9vdC5yZXBsYWNlKHRyYWlsaW5nU2xhc2gsICcnKTtcbiAgICAgICAgICBpZiAoIWZyYWdtZW50LmluZGV4T2Yocm9vdCkpIGZyYWdtZW50ID0gZnJhZ21lbnQuc2xpY2Uocm9vdC5sZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZyYWdtZW50ID0gdGhpcy5nZXRIYXNoKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmcmFnbWVudC5yZXBsYWNlKHJvdXRlU3RyaXBwZXIsICcnKTtcbiAgICB9LFxuXG4gICAgLy8gU3RhcnQgdGhlIGhhc2ggY2hhbmdlIGhhbmRsaW5nLCByZXR1cm5pbmcgYHRydWVgIGlmIHRoZSBjdXJyZW50IFVSTCBtYXRjaGVzXG4gICAgLy8gYW4gZXhpc3Rpbmcgcm91dGUsIGFuZCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICBzdGFydDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgaWYgKEhpc3Rvcnkuc3RhcnRlZCkgdGhyb3cgbmV3IEVycm9yKFwiQmFja2JvbmUuaGlzdG9yeSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWRcIik7XG4gICAgICBIaXN0b3J5LnN0YXJ0ZWQgPSB0cnVlO1xuXG4gICAgICAvLyBGaWd1cmUgb3V0IHRoZSBpbml0aWFsIGNvbmZpZ3VyYXRpb24uIERvIHdlIG5lZWQgYW4gaWZyYW1lP1xuICAgICAgLy8gSXMgcHVzaFN0YXRlIGRlc2lyZWQgLi4uIGlzIGl0IGF2YWlsYWJsZT9cbiAgICAgIHRoaXMub3B0aW9ucyAgICAgICAgICA9IF8uZXh0ZW5kKHtyb290OiAnLyd9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgdGhpcy5yb290ICAgICAgICAgICAgID0gdGhpcy5vcHRpb25zLnJvb3Q7XG4gICAgICB0aGlzLl93YW50c0hhc2hDaGFuZ2UgPSB0aGlzLm9wdGlvbnMuaGFzaENoYW5nZSAhPT0gZmFsc2U7XG4gICAgICB0aGlzLl93YW50c1B1c2hTdGF0ZSAgPSAhIXRoaXMub3B0aW9ucy5wdXNoU3RhdGU7XG4gICAgICB0aGlzLl9oYXNQdXNoU3RhdGUgICAgPSAhISh0aGlzLm9wdGlvbnMucHVzaFN0YXRlICYmIHRoaXMuaGlzdG9yeSAmJiB0aGlzLmhpc3RvcnkucHVzaFN0YXRlKTtcbiAgICAgIHZhciBmcmFnbWVudCAgICAgICAgICA9IHRoaXMuZ2V0RnJhZ21lbnQoKTtcbiAgICAgIHZhciBkb2NNb2RlICAgICAgICAgICA9IGRvY3VtZW50LmRvY3VtZW50TW9kZTtcbiAgICAgIHZhciBvbGRJRSAgICAgICAgICAgICA9IChpc0V4cGxvcmVyLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKSAmJiAoIWRvY01vZGUgfHwgZG9jTW9kZSA8PSA3KSk7XG5cbiAgICAgIC8vIE5vcm1hbGl6ZSByb290IHRvIGFsd2F5cyBpbmNsdWRlIGEgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2guXG4gICAgICB0aGlzLnJvb3QgPSAoJy8nICsgdGhpcy5yb290ICsgJy8nKS5yZXBsYWNlKHJvb3RTdHJpcHBlciwgJy8nKTtcblxuICAgICAgaWYgKG9sZElFICYmIHRoaXMuX3dhbnRzSGFzaENoYW5nZSkge1xuICAgICAgICB2YXIgZnJhbWUgPSBCYWNrYm9uZS4kKCc8aWZyYW1lIHNyYz1cImphdmFzY3JpcHQ6MFwiIHRhYmluZGV4PVwiLTFcIj4nKTtcbiAgICAgICAgdGhpcy5pZnJhbWUgPSBmcmFtZS5oaWRlKCkuYXBwZW5kVG8oJ2JvZHknKVswXS5jb250ZW50V2luZG93O1xuICAgICAgICB0aGlzLm5hdmlnYXRlKGZyYWdtZW50KTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVwZW5kaW5nIG9uIHdoZXRoZXIgd2UncmUgdXNpbmcgcHVzaFN0YXRlIG9yIGhhc2hlcywgYW5kIHdoZXRoZXJcbiAgICAgIC8vICdvbmhhc2hjaGFuZ2UnIGlzIHN1cHBvcnRlZCwgZGV0ZXJtaW5lIGhvdyB3ZSBjaGVjayB0aGUgVVJMIHN0YXRlLlxuICAgICAgaWYgKHRoaXMuX2hhc1B1c2hTdGF0ZSkge1xuICAgICAgICBCYWNrYm9uZS4kKHdpbmRvdykub24oJ3BvcHN0YXRlJywgdGhpcy5jaGVja1VybCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiAoJ29uaGFzaGNoYW5nZScgaW4gd2luZG93KSAmJiAhb2xkSUUpIHtcbiAgICAgICAgQmFja2JvbmUuJCh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1VybCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSkge1xuICAgICAgICB0aGlzLl9jaGVja1VybEludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5jaGVja1VybCwgdGhpcy5pbnRlcnZhbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIERldGVybWluZSBpZiB3ZSBuZWVkIHRvIGNoYW5nZSB0aGUgYmFzZSB1cmwsIGZvciBhIHB1c2hTdGF0ZSBsaW5rXG4gICAgICAvLyBvcGVuZWQgYnkgYSBub24tcHVzaFN0YXRlIGJyb3dzZXIuXG4gICAgICB0aGlzLmZyYWdtZW50ID0gZnJhZ21lbnQ7XG4gICAgICB2YXIgbG9jID0gdGhpcy5sb2NhdGlvbjtcblxuICAgICAgLy8gVHJhbnNpdGlvbiBmcm9tIGhhc2hDaGFuZ2UgdG8gcHVzaFN0YXRlIG9yIHZpY2UgdmVyc2EgaWYgYm90aCBhcmVcbiAgICAgIC8vIHJlcXVlc3RlZC5cbiAgICAgIGlmICh0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgdGhpcy5fd2FudHNQdXNoU3RhdGUpIHtcblxuICAgICAgICAvLyBJZiB3ZSd2ZSBzdGFydGVkIG9mZiB3aXRoIGEgcm91dGUgZnJvbSBhIGBwdXNoU3RhdGVgLWVuYWJsZWRcbiAgICAgICAgLy8gYnJvd3NlciwgYnV0IHdlJ3JlIGN1cnJlbnRseSBpbiBhIGJyb3dzZXIgdGhhdCBkb2Vzbid0IHN1cHBvcnQgaXQuLi5cbiAgICAgICAgaWYgKCF0aGlzLl9oYXNQdXNoU3RhdGUgJiYgIXRoaXMuYXRSb290KCkpIHtcbiAgICAgICAgICB0aGlzLmZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudChudWxsLCB0cnVlKTtcbiAgICAgICAgICB0aGlzLmxvY2F0aW9uLnJlcGxhY2UodGhpcy5yb290ICsgJyMnICsgdGhpcy5mcmFnbWVudCk7XG4gICAgICAgICAgLy8gUmV0dXJuIGltbWVkaWF0ZWx5IGFzIGJyb3dzZXIgd2lsbCBkbyByZWRpcmVjdCB0byBuZXcgdXJsXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgLy8gT3IgaWYgd2UndmUgc3RhcnRlZCBvdXQgd2l0aCBhIGhhc2gtYmFzZWQgcm91dGUsIGJ1dCB3ZSdyZSBjdXJyZW50bHlcbiAgICAgICAgLy8gaW4gYSBicm93c2VyIHdoZXJlIGl0IGNvdWxkIGJlIGBwdXNoU3RhdGVgLWJhc2VkIGluc3RlYWQuLi5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9oYXNQdXNoU3RhdGUgJiYgdGhpcy5hdFJvb3QoKSAmJiBsb2MuaGFzaCkge1xuICAgICAgICAgIHRoaXMuZnJhZ21lbnQgPSB0aGlzLmdldEhhc2goKS5yZXBsYWNlKHJvdXRlU3RyaXBwZXIsICcnKTtcbiAgICAgICAgICB0aGlzLmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBkb2N1bWVudC50aXRsZSwgdGhpcy5yb290ICsgdGhpcy5mcmFnbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5zaWxlbnQpIHJldHVybiB0aGlzLmxvYWRVcmwoKTtcbiAgICB9LFxuXG4gICAgLy8gRGlzYWJsZSBCYWNrYm9uZS5oaXN0b3J5LCBwZXJoYXBzIHRlbXBvcmFyaWx5LiBOb3QgdXNlZnVsIGluIGEgcmVhbCBhcHAsXG4gICAgLy8gYnV0IHBvc3NpYmx5IHVzZWZ1bCBmb3IgdW5pdCB0ZXN0aW5nIFJvdXRlcnMuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICBCYWNrYm9uZS4kKHdpbmRvdykub2ZmKCdwb3BzdGF0ZScsIHRoaXMuY2hlY2tVcmwpLm9mZignaGFzaGNoYW5nZScsIHRoaXMuY2hlY2tVcmwpO1xuICAgICAgaWYgKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpIGNsZWFySW50ZXJ2YWwodGhpcy5fY2hlY2tVcmxJbnRlcnZhbCk7XG4gICAgICBIaXN0b3J5LnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgcm91dGUgdG8gYmUgdGVzdGVkIHdoZW4gdGhlIGZyYWdtZW50IGNoYW5nZXMuIFJvdXRlcyBhZGRlZCBsYXRlclxuICAgIC8vIG1heSBvdmVycmlkZSBwcmV2aW91cyByb3V0ZXMuXG4gICAgcm91dGU6IGZ1bmN0aW9uKHJvdXRlLCBjYWxsYmFjaykge1xuICAgICAgdGhpcy5oYW5kbGVycy51bnNoaWZ0KHtyb3V0ZTogcm91dGUsIGNhbGxiYWNrOiBjYWxsYmFja30pO1xuICAgIH0sXG5cbiAgICAvLyBDaGVja3MgdGhlIGN1cnJlbnQgVVJMIHRvIHNlZSBpZiBpdCBoYXMgY2hhbmdlZCwgYW5kIGlmIGl0IGhhcyxcbiAgICAvLyBjYWxscyBgbG9hZFVybGAsIG5vcm1hbGl6aW5nIGFjcm9zcyB0aGUgaGlkZGVuIGlmcmFtZS5cbiAgICBjaGVja1VybDogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmdldEZyYWdtZW50KCk7XG4gICAgICBpZiAoY3VycmVudCA9PT0gdGhpcy5mcmFnbWVudCAmJiB0aGlzLmlmcmFtZSkge1xuICAgICAgICBjdXJyZW50ID0gdGhpcy5nZXRGcmFnbWVudCh0aGlzLmdldEhhc2godGhpcy5pZnJhbWUpKTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLmZyYWdtZW50KSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAodGhpcy5pZnJhbWUpIHRoaXMubmF2aWdhdGUoY3VycmVudCk7XG4gICAgICB0aGlzLmxvYWRVcmwoKTtcbiAgICB9LFxuXG4gICAgLy8gQXR0ZW1wdCB0byBsb2FkIHRoZSBjdXJyZW50IFVSTCBmcmFnbWVudC4gSWYgYSByb3V0ZSBzdWNjZWVkcyB3aXRoIGFcbiAgICAvLyBtYXRjaCwgcmV0dXJucyBgdHJ1ZWAuIElmIG5vIGRlZmluZWQgcm91dGVzIG1hdGNoZXMgdGhlIGZyYWdtZW50LFxuICAgIC8vIHJldHVybnMgYGZhbHNlYC5cbiAgICBsb2FkVXJsOiBmdW5jdGlvbihmcmFnbWVudCkge1xuICAgICAgZnJhZ21lbnQgPSB0aGlzLmZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudChmcmFnbWVudCk7XG4gICAgICByZXR1cm4gXy5hbnkodGhpcy5oYW5kbGVycywgZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgICBpZiAoaGFuZGxlci5yb3V0ZS50ZXN0KGZyYWdtZW50KSkge1xuICAgICAgICAgIGhhbmRsZXIuY2FsbGJhY2soZnJhZ21lbnQpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gU2F2ZSBhIGZyYWdtZW50IGludG8gdGhlIGhhc2ggaGlzdG9yeSwgb3IgcmVwbGFjZSB0aGUgVVJMIHN0YXRlIGlmIHRoZVxuICAgIC8vICdyZXBsYWNlJyBvcHRpb24gaXMgcGFzc2VkLiBZb3UgYXJlIHJlc3BvbnNpYmxlIGZvciBwcm9wZXJseSBVUkwtZW5jb2RpbmdcbiAgICAvLyB0aGUgZnJhZ21lbnQgaW4gYWR2YW5jZS5cbiAgICAvL1xuICAgIC8vIFRoZSBvcHRpb25zIG9iamVjdCBjYW4gY29udGFpbiBgdHJpZ2dlcjogdHJ1ZWAgaWYgeW91IHdpc2ggdG8gaGF2ZSB0aGVcbiAgICAvLyByb3V0ZSBjYWxsYmFjayBiZSBmaXJlZCAobm90IHVzdWFsbHkgZGVzaXJhYmxlKSwgb3IgYHJlcGxhY2U6IHRydWVgLCBpZlxuICAgIC8vIHlvdSB3aXNoIHRvIG1vZGlmeSB0aGUgY3VycmVudCBVUkwgd2l0aG91dCBhZGRpbmcgYW4gZW50cnkgdG8gdGhlIGhpc3RvcnkuXG4gICAgbmF2aWdhdGU6IGZ1bmN0aW9uKGZyYWdtZW50LCBvcHRpb25zKSB7XG4gICAgICBpZiAoIUhpc3Rvcnkuc3RhcnRlZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKCFvcHRpb25zIHx8IG9wdGlvbnMgPT09IHRydWUpIG9wdGlvbnMgPSB7dHJpZ2dlcjogISFvcHRpb25zfTtcblxuICAgICAgdmFyIHVybCA9IHRoaXMucm9vdCArIChmcmFnbWVudCA9IHRoaXMuZ2V0RnJhZ21lbnQoZnJhZ21lbnQgfHwgJycpKTtcblxuICAgICAgLy8gU3RyaXAgdGhlIGhhc2ggZm9yIG1hdGNoaW5nLlxuICAgICAgZnJhZ21lbnQgPSBmcmFnbWVudC5yZXBsYWNlKHBhdGhTdHJpcHBlciwgJycpO1xuXG4gICAgICBpZiAodGhpcy5mcmFnbWVudCA9PT0gZnJhZ21lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZnJhZ21lbnQgPSBmcmFnbWVudDtcblxuICAgICAgLy8gRG9uJ3QgaW5jbHVkZSBhIHRyYWlsaW5nIHNsYXNoIG9uIHRoZSByb290LlxuICAgICAgaWYgKGZyYWdtZW50ID09PSAnJyAmJiB1cmwgIT09ICcvJykgdXJsID0gdXJsLnNsaWNlKDAsIC0xKTtcblxuICAgICAgLy8gSWYgcHVzaFN0YXRlIGlzIGF2YWlsYWJsZSwgd2UgdXNlIGl0IHRvIHNldCB0aGUgZnJhZ21lbnQgYXMgYSByZWFsIFVSTC5cbiAgICAgIGlmICh0aGlzLl9oYXNQdXNoU3RhdGUpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5W29wdGlvbnMucmVwbGFjZSA/ICdyZXBsYWNlU3RhdGUnIDogJ3B1c2hTdGF0ZSddKHt9LCBkb2N1bWVudC50aXRsZSwgdXJsKTtcblxuICAgICAgLy8gSWYgaGFzaCBjaGFuZ2VzIGhhdmVuJ3QgYmVlbiBleHBsaWNpdGx5IGRpc2FibGVkLCB1cGRhdGUgdGhlIGhhc2hcbiAgICAgIC8vIGZyYWdtZW50IHRvIHN0b3JlIGhpc3RvcnkuXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSkge1xuICAgICAgICB0aGlzLl91cGRhdGVIYXNoKHRoaXMubG9jYXRpb24sIGZyYWdtZW50LCBvcHRpb25zLnJlcGxhY2UpO1xuICAgICAgICBpZiAodGhpcy5pZnJhbWUgJiYgKGZyYWdtZW50ICE9PSB0aGlzLmdldEZyYWdtZW50KHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZSkpKSkge1xuICAgICAgICAgIC8vIE9wZW5pbmcgYW5kIGNsb3NpbmcgdGhlIGlmcmFtZSB0cmlja3MgSUU3IGFuZCBlYXJsaWVyIHRvIHB1c2ggYVxuICAgICAgICAgIC8vIGhpc3RvcnkgZW50cnkgb24gaGFzaC10YWcgY2hhbmdlLiAgV2hlbiByZXBsYWNlIGlzIHRydWUsIHdlIGRvbid0XG4gICAgICAgICAgLy8gd2FudCB0aGlzLlxuICAgICAgICAgIGlmKCFvcHRpb25zLnJlcGxhY2UpIHRoaXMuaWZyYW1lLmRvY3VtZW50Lm9wZW4oKS5jbG9zZSgpO1xuICAgICAgICAgIHRoaXMuX3VwZGF0ZUhhc2godGhpcy5pZnJhbWUubG9jYXRpb24sIGZyYWdtZW50LCBvcHRpb25zLnJlcGxhY2UpO1xuICAgICAgICB9XG5cbiAgICAgIC8vIElmIHlvdSd2ZSB0b2xkIHVzIHRoYXQgeW91IGV4cGxpY2l0bHkgZG9uJ3Qgd2FudCBmYWxsYmFjayBoYXNoY2hhbmdlLVxuICAgICAgLy8gYmFzZWQgaGlzdG9yeSwgdGhlbiBgbmF2aWdhdGVgIGJlY29tZXMgYSBwYWdlIHJlZnJlc2guXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5hc3NpZ24odXJsKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnRyaWdnZXIpIHJldHVybiB0aGlzLmxvYWRVcmwoZnJhZ21lbnQpO1xuICAgIH0sXG5cbiAgICAvLyBVcGRhdGUgdGhlIGhhc2ggbG9jYXRpb24sIGVpdGhlciByZXBsYWNpbmcgdGhlIGN1cnJlbnQgZW50cnksIG9yIGFkZGluZ1xuICAgIC8vIGEgbmV3IG9uZSB0byB0aGUgYnJvd3NlciBoaXN0b3J5LlxuICAgIF91cGRhdGVIYXNoOiBmdW5jdGlvbihsb2NhdGlvbiwgZnJhZ21lbnQsIHJlcGxhY2UpIHtcbiAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgIHZhciBocmVmID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8oamF2YXNjcmlwdDp8IykuKiQvLCAnJyk7XG4gICAgICAgIGxvY2F0aW9uLnJlcGxhY2UoaHJlZiArICcjJyArIGZyYWdtZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFNvbWUgYnJvd3NlcnMgcmVxdWlyZSB0aGF0IGBoYXNoYCBjb250YWlucyBhIGxlYWRpbmcgIy5cbiAgICAgICAgbG9jYXRpb24uaGFzaCA9ICcjJyArIGZyYWdtZW50O1xuICAgICAgfVxuICAgIH1cblxuICB9KTtcblxuICAvLyBDcmVhdGUgdGhlIGRlZmF1bHQgQmFja2JvbmUuaGlzdG9yeS5cbiAgQmFja2JvbmUuaGlzdG9yeSA9IG5ldyBIaXN0b3J5O1xuXG4gIC8vIEhlbHBlcnNcbiAgLy8gLS0tLS0tLVxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb3JyZWN0bHkgc2V0IHVwIHRoZSBwcm90b3R5cGUgY2hhaW4sIGZvciBzdWJjbGFzc2VzLlxuICAvLyBTaW1pbGFyIHRvIGBnb29nLmluaGVyaXRzYCwgYnV0IHVzZXMgYSBoYXNoIG9mIHByb3RvdHlwZSBwcm9wZXJ0aWVzIGFuZFxuICAvLyBjbGFzcyBwcm9wZXJ0aWVzIHRvIGJlIGV4dGVuZGVkLlxuICB2YXIgZXh0ZW5kID0gZnVuY3Rpb24ocHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICB2YXIgcGFyZW50ID0gdGhpcztcbiAgICB2YXIgY2hpbGQ7XG5cbiAgICAvLyBUaGUgY29uc3RydWN0b3IgZnVuY3Rpb24gZm9yIHRoZSBuZXcgc3ViY2xhc3MgaXMgZWl0aGVyIGRlZmluZWQgYnkgeW91XG4gICAgLy8gKHRoZSBcImNvbnN0cnVjdG9yXCIgcHJvcGVydHkgaW4geW91ciBgZXh0ZW5kYCBkZWZpbml0aW9uKSwgb3IgZGVmYXVsdGVkXG4gICAgLy8gYnkgdXMgdG8gc2ltcGx5IGNhbGwgdGhlIHBhcmVudCdzIGNvbnN0cnVjdG9yLlxuICAgIGlmIChwcm90b1Byb3BzICYmIF8uaGFzKHByb3RvUHJvcHMsICdjb25zdHJ1Y3RvcicpKSB7XG4gICAgICBjaGlsZCA9IHByb3RvUHJvcHMuY29uc3RydWN0b3I7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNoaWxkID0gZnVuY3Rpb24oKXsgcmV0dXJuIHBhcmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9O1xuICAgIH1cblxuICAgIC8vIEFkZCBzdGF0aWMgcHJvcGVydGllcyB0byB0aGUgY29uc3RydWN0b3IgZnVuY3Rpb24sIGlmIHN1cHBsaWVkLlxuICAgIF8uZXh0ZW5kKGNoaWxkLCBwYXJlbnQsIHN0YXRpY1Byb3BzKTtcblxuICAgIC8vIFNldCB0aGUgcHJvdG90eXBlIGNoYWluIHRvIGluaGVyaXQgZnJvbSBgcGFyZW50YCwgd2l0aG91dCBjYWxsaW5nXG4gICAgLy8gYHBhcmVudGAncyBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICB2YXIgU3Vycm9nYXRlID0gZnVuY3Rpb24oKXsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9O1xuICAgIFN1cnJvZ2F0ZS5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlO1xuICAgIGNoaWxkLnByb3RvdHlwZSA9IG5ldyBTdXJyb2dhdGU7XG5cbiAgICAvLyBBZGQgcHJvdG90eXBlIHByb3BlcnRpZXMgKGluc3RhbmNlIHByb3BlcnRpZXMpIHRvIHRoZSBzdWJjbGFzcyxcbiAgICAvLyBpZiBzdXBwbGllZC5cbiAgICBpZiAocHJvdG9Qcm9wcykgXy5leHRlbmQoY2hpbGQucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcblxuICAgIC8vIFNldCBhIGNvbnZlbmllbmNlIHByb3BlcnR5IGluIGNhc2UgdGhlIHBhcmVudCdzIHByb3RvdHlwZSBpcyBuZWVkZWRcbiAgICAvLyBsYXRlci5cbiAgICBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlO1xuXG4gICAgcmV0dXJuIGNoaWxkO1xuICB9O1xuXG4gIC8vIFNldCB1cCBpbmhlcml0YW5jZSBmb3IgdGhlIG1vZGVsLCBjb2xsZWN0aW9uLCByb3V0ZXIsIHZpZXcgYW5kIGhpc3RvcnkuXG4gIE1vZGVsLmV4dGVuZCA9IENvbGxlY3Rpb24uZXh0ZW5kID0gUm91dGVyLmV4dGVuZCA9IFZpZXcuZXh0ZW5kID0gSGlzdG9yeS5leHRlbmQgPSBleHRlbmQ7XG5cbiAgLy8gVGhyb3cgYW4gZXJyb3Igd2hlbiBhIFVSTCBpcyBuZWVkZWQsIGFuZCBub25lIGlzIHN1cHBsaWVkLlxuICB2YXIgdXJsRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgXCJ1cmxcIiBwcm9wZXJ0eSBvciBmdW5jdGlvbiBtdXN0IGJlIHNwZWNpZmllZCcpO1xuICB9O1xuXG4gIC8vIFdyYXAgYW4gb3B0aW9uYWwgZXJyb3IgY2FsbGJhY2sgd2l0aCBhIGZhbGxiYWNrIGVycm9yIGV2ZW50LlxuICB2YXIgd3JhcEVycm9yID0gZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgZXJyb3IgPSBvcHRpb25zLmVycm9yO1xuICAgIG9wdGlvbnMuZXJyb3IgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICBpZiAoZXJyb3IpIGVycm9yKG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIG1vZGVsLnRyaWdnZXIoJ2Vycm9yJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIEJhY2tib25lO1xuXG59KSk7XG4iLCJ2YXIgbG9va3VwID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuXG47KGZ1bmN0aW9uIChleHBvcnRzKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuICB2YXIgQXJyID0gKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJylcbiAgICA/IFVpbnQ4QXJyYXlcbiAgICA6IEFycmF5XG5cblx0dmFyIFBMVVMgICA9ICcrJy5jaGFyQ29kZUF0KDApXG5cdHZhciBTTEFTSCAgPSAnLycuY2hhckNvZGVBdCgwKVxuXHR2YXIgTlVNQkVSID0gJzAnLmNoYXJDb2RlQXQoMClcblx0dmFyIExPV0VSICA9ICdhJy5jaGFyQ29kZUF0KDApXG5cdHZhciBVUFBFUiAgPSAnQScuY2hhckNvZGVBdCgwKVxuXHR2YXIgUExVU19VUkxfU0FGRSA9ICctJy5jaGFyQ29kZUF0KDApXG5cdHZhciBTTEFTSF9VUkxfU0FGRSA9ICdfJy5jaGFyQ29kZUF0KDApXG5cblx0ZnVuY3Rpb24gZGVjb2RlIChlbHQpIHtcblx0XHR2YXIgY29kZSA9IGVsdC5jaGFyQ29kZUF0KDApXG5cdFx0aWYgKGNvZGUgPT09IFBMVVMgfHxcblx0XHQgICAgY29kZSA9PT0gUExVU19VUkxfU0FGRSlcblx0XHRcdHJldHVybiA2MiAvLyAnKydcblx0XHRpZiAoY29kZSA9PT0gU0xBU0ggfHxcblx0XHQgICAgY29kZSA9PT0gU0xBU0hfVVJMX1NBRkUpXG5cdFx0XHRyZXR1cm4gNjMgLy8gJy8nXG5cdFx0aWYgKGNvZGUgPCBOVU1CRVIpXG5cdFx0XHRyZXR1cm4gLTEgLy9ubyBtYXRjaFxuXHRcdGlmIChjb2RlIDwgTlVNQkVSICsgMTApXG5cdFx0XHRyZXR1cm4gY29kZSAtIE5VTUJFUiArIDI2ICsgMjZcblx0XHRpZiAoY29kZSA8IFVQUEVSICsgMjYpXG5cdFx0XHRyZXR1cm4gY29kZSAtIFVQUEVSXG5cdFx0aWYgKGNvZGUgPCBMT1dFUiArIDI2KVxuXHRcdFx0cmV0dXJuIGNvZGUgLSBMT1dFUiArIDI2XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRUb0J5dGVBcnJheSAoYjY0KSB7XG5cdFx0dmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnJcblxuXHRcdGlmIChiNjQubGVuZ3RoICUgNCA+IDApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpXG5cdFx0fVxuXG5cdFx0Ly8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycylcblx0XHQvLyBpZiB0aGVyZSBhcmUgdHdvIHBsYWNlaG9sZGVycywgdGhhbiB0aGUgdHdvIGNoYXJhY3RlcnMgYmVmb3JlIGl0XG5cdFx0Ly8gcmVwcmVzZW50IG9uZSBieXRlXG5cdFx0Ly8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzXG5cdFx0Ly8gdGhpcyBpcyBqdXN0IGEgY2hlYXAgaGFjayB0byBub3QgZG8gaW5kZXhPZiB0d2ljZVxuXHRcdHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cdFx0cGxhY2VIb2xkZXJzID0gJz0nID09PSBiNjQuY2hhckF0KGxlbiAtIDIpID8gMiA6ICc9JyA9PT0gYjY0LmNoYXJBdChsZW4gLSAxKSA/IDEgOiAwXG5cblx0XHQvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGFcblx0XHRhcnIgPSBuZXcgQXJyKGI2NC5sZW5ndGggKiAzIC8gNCAtIHBsYWNlSG9sZGVycylcblxuXHRcdC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcblx0XHRsID0gcGxhY2VIb2xkZXJzID4gMCA/IGI2NC5sZW5ndGggLSA0IDogYjY0Lmxlbmd0aFxuXG5cdFx0dmFyIEwgPSAwXG5cblx0XHRmdW5jdGlvbiBwdXNoICh2KSB7XG5cdFx0XHRhcnJbTCsrXSA9IHZcblx0XHR9XG5cblx0XHRmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGw7IGkgKz0gNCwgaiArPSAzKSB7XG5cdFx0XHR0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDE4KSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpIDw8IDEyKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMikpIDw8IDYpIHwgZGVjb2RlKGI2NC5jaGFyQXQoaSArIDMpKVxuXHRcdFx0cHVzaCgodG1wICYgMHhGRjAwMDApID4+IDE2KVxuXHRcdFx0cHVzaCgodG1wICYgMHhGRjAwKSA+PiA4KVxuXHRcdFx0cHVzaCh0bXAgJiAweEZGKVxuXHRcdH1cblxuXHRcdGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMikgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDEpKSA+PiA0KVxuXHRcdFx0cHVzaCh0bXAgJiAweEZGKVxuXHRcdH0gZWxzZSBpZiAocGxhY2VIb2xkZXJzID09PSAxKSB7XG5cdFx0XHR0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDEwKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpIDw8IDQpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAyKSkgPj4gMilcblx0XHRcdHB1c2goKHRtcCA+PiA4KSAmIDB4RkYpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFyclxuXHR9XG5cblx0ZnVuY3Rpb24gdWludDhUb0Jhc2U2NCAodWludDgpIHtcblx0XHR2YXIgaSxcblx0XHRcdGV4dHJhQnl0ZXMgPSB1aW50OC5sZW5ndGggJSAzLCAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuXHRcdFx0b3V0cHV0ID0gXCJcIixcblx0XHRcdHRlbXAsIGxlbmd0aFxuXG5cdFx0ZnVuY3Rpb24gZW5jb2RlIChudW0pIHtcblx0XHRcdHJldHVybiBsb29rdXAuY2hhckF0KG51bSlcblx0XHR9XG5cblx0XHRmdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuXHRcdFx0cmV0dXJuIGVuY29kZShudW0gPj4gMTggJiAweDNGKSArIGVuY29kZShudW0gPj4gMTIgJiAweDNGKSArIGVuY29kZShudW0gPj4gNiAmIDB4M0YpICsgZW5jb2RlKG51bSAmIDB4M0YpXG5cdFx0fVxuXG5cdFx0Ly8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuXHRcdGZvciAoaSA9IDAsIGxlbmd0aCA9IHVpbnQ4Lmxlbmd0aCAtIGV4dHJhQnl0ZXM7IGkgPCBsZW5ndGg7IGkgKz0gMykge1xuXHRcdFx0dGVtcCA9ICh1aW50OFtpXSA8PCAxNikgKyAodWludDhbaSArIDFdIDw8IDgpICsgKHVpbnQ4W2kgKyAyXSlcblx0XHRcdG91dHB1dCArPSB0cmlwbGV0VG9CYXNlNjQodGVtcClcblx0XHR9XG5cblx0XHQvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzXG5cdFx0c3dpdGNoIChleHRyYUJ5dGVzKSB7XG5cdFx0XHRjYXNlIDE6XG5cdFx0XHRcdHRlbXAgPSB1aW50OFt1aW50OC5sZW5ndGggLSAxXVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKHRlbXAgPj4gMilcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSgodGVtcCA8PCA0KSAmIDB4M0YpXG5cdFx0XHRcdG91dHB1dCArPSAnPT0nXG5cdFx0XHRcdGJyZWFrXG5cdFx0XHRjYXNlIDI6XG5cdFx0XHRcdHRlbXAgPSAodWludDhbdWludDgubGVuZ3RoIC0gMl0gPDwgOCkgKyAodWludDhbdWludDgubGVuZ3RoIC0gMV0pXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUodGVtcCA+PiAxMClcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSgodGVtcCA+PiA0KSAmIDB4M0YpXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUoKHRlbXAgPDwgMikgJiAweDNGKVxuXHRcdFx0XHRvdXRwdXQgKz0gJz0nXG5cdFx0XHRcdGJyZWFrXG5cdFx0fVxuXG5cdFx0cmV0dXJuIG91dHB1dFxuXHR9XG5cblx0ZXhwb3J0cy50b0J5dGVBcnJheSA9IGI2NFRvQnl0ZUFycmF5XG5cdGV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IHVpbnQ4VG9CYXNlNjRcbn0odHlwZW9mIGV4cG9ydHMgPT09ICd1bmRlZmluZWQnID8gKHRoaXMuYmFzZTY0anMgPSB7fSkgOiBleHBvcnRzKSlcbiIsIi8qIVxuICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cbid1c2Ugc3RyaWN0J1xuXG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnYmFzZTY0LWpzJylcbnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2lzYXJyYXknKVxuXG5leHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwXG5CdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblxudmFyIHJvb3RQYXJlbnQgPSB7fVxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG4gKiB3aGVuIHRoZSBicm93c2VyIHN1cHBvcnRzIHR5cGVkIGFycmF5cy5cbiAqXG4gKiBOb3RlOlxuICpcbiAqICAgLSBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMsXG4gKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG4gKlxuICogICAtIFNhZmFyaSA1LTcgbGFja3Mgc3VwcG9ydCBmb3IgY2hhbmdpbmcgdGhlIGBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yYCBwcm9wZXJ0eVxuICogICAgIG9uIG9iamVjdHMuXG4gKlxuICogICAtIENocm9tZSA5LTEwIGlzIG1pc3NpbmcgdGhlIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24uXG4gKlxuICogICAtIElFMTAgaGFzIGEgYnJva2VuIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhcnJheXMgb2ZcbiAqICAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cblxuICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXlcbiAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IGJlaGF2ZXMgY29ycmVjdGx5LlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUICE9PSB1bmRlZmluZWRcbiAgPyBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVFxuICA6IHR5cGVkQXJyYXlTdXBwb3J0KClcblxuZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkge1xuICBmdW5jdGlvbiBCYXIgKCkge31cbiAgdHJ5IHtcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcbiAgICBhcnIuZm9vID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfVxuICAgIGFyci5jb25zdHJ1Y3RvciA9IEJhclxuICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyICYmIC8vIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkXG4gICAgICAgIGFyci5jb25zdHJ1Y3RvciA9PT0gQmFyICYmIC8vIGNvbnN0cnVjdG9yIGNhbiBiZSBzZXRcbiAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcbiAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGtNYXhMZW5ndGggKCkge1xuICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgICA/IDB4N2ZmZmZmZmZcbiAgICA6IDB4M2ZmZmZmZmZcbn1cblxuLyoqXG4gKiBDbGFzczogQnVmZmVyXG4gKiA9PT09PT09PT09PT09XG4gKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBhcmUgYXVnbWVudGVkXG4gKiB3aXRoIGZ1bmN0aW9uIHByb3BlcnRpZXMgZm9yIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBBUEkgZnVuY3Rpb25zLiBXZSB1c2VcbiAqIGBVaW50OEFycmF5YCBzbyB0aGF0IHNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0IHJldHVybnNcbiAqIGEgc2luZ2xlIG9jdGV0LlxuICpcbiAqIEJ5IGF1Z21lbnRpbmcgdGhlIGluc3RhbmNlcywgd2UgY2FuIGF2b2lkIG1vZGlmeWluZyB0aGUgYFVpbnQ4QXJyYXlgXG4gKiBwcm90b3R5cGUuXG4gKi9cbmZ1bmN0aW9uIEJ1ZmZlciAoYXJnKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG4gICAgLy8gQXZvaWQgZ29pbmcgdGhyb3VnaCBhbiBBcmd1bWVudHNBZGFwdG9yVHJhbXBvbGluZSBpbiB0aGUgY29tbW9uIGNhc2UuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGFyZ3VtZW50c1sxXSlcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcpXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpcy5sZW5ndGggPSAwXG4gICAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWRcbiAgfVxuXG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gZnJvbU51bWJlcih0aGlzLCBhcmcpXG4gIH1cblxuICAvLyBTbGlnaHRseSBsZXNzIGNvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZnJvbVN0cmluZyh0aGlzLCBhcmcsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogJ3V0ZjgnKVxuICB9XG5cbiAgLy8gVW51c3VhbC5cbiAgcmV0dXJuIGZyb21PYmplY3QodGhpcywgYXJnKVxufVxuXG5mdW5jdGlvbiBmcm9tTnVtYmVyICh0aGF0LCBsZW5ndGgpIHtcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChsZW5ndGgpIHwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoYXRbaV0gPSAwXG4gICAgfVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21TdHJpbmcgKHRoYXQsIHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIC8vIEFzc3VtcHRpb246IGJ5dGVMZW5ndGgoKSByZXR1cm4gdmFsdWUgaXMgYWx3YXlzIDwga01heExlbmd0aC5cbiAgdmFyIGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG5cbiAgdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmplY3QpIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmplY3QpKSByZXR1cm4gZnJvbUJ1ZmZlcih0aGF0LCBvYmplY3QpXG5cbiAgaWYgKGlzQXJyYXkob2JqZWN0KSkgcmV0dXJuIGZyb21BcnJheSh0aGF0LCBvYmplY3QpXG5cbiAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbXVzdCBzdGFydCB3aXRoIG51bWJlciwgYnVmZmVyLCBhcnJheSBvciBzdHJpbmcnKVxuICB9XG5cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAob2JqZWN0LmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICByZXR1cm4gZnJvbVR5cGVkQXJyYXkodGhhdCwgb2JqZWN0KVxuICAgIH1cbiAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgb2JqZWN0KVxuICAgIH1cbiAgfVxuXG4gIGlmIChvYmplY3QubGVuZ3RoKSByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmplY3QpXG5cbiAgcmV0dXJuIGZyb21Kc29uT2JqZWN0KHRoYXQsIG9iamVjdClcbn1cblxuZnVuY3Rpb24gZnJvbUJ1ZmZlciAodGhhdCwgYnVmZmVyKSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGJ1ZmZlci5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICBidWZmZXIuY29weSh0aGF0LCAwLCAwLCBsZW5ndGgpXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbi8vIER1cGxpY2F0ZSBvZiBmcm9tQXJyYXkoKSB0byBrZWVwIGZyb21BcnJheSgpIG1vbm9tb3JwaGljLlxuZnVuY3Rpb24gZnJvbVR5cGVkQXJyYXkgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIC8vIFRydW5jYXRpbmcgdGhlIGVsZW1lbnRzIGlzIHByb2JhYmx5IG5vdCB3aGF0IHBlb3BsZSBleHBlY3QgZnJvbSB0eXBlZFxuICAvLyBhcnJheXMgd2l0aCBCWVRFU19QRVJfRUxFTUVOVCA+IDEgYnV0IGl0J3MgY29tcGF0aWJsZSB3aXRoIHRoZSBiZWhhdmlvclxuICAvLyBvZiB0aGUgb2xkIEJ1ZmZlciBjb25zdHJ1Y3Rvci5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXkpIHtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgYXJyYXkuYnl0ZUxlbmd0aFxuICAgIHRoYXQgPSBCdWZmZXIuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkoYXJyYXkpKVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICB0aGF0ID0gZnJvbVR5cGVkQXJyYXkodGhhdCwgbmV3IFVpbnQ4QXJyYXkoYXJyYXkpKVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUxpa2UgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG4vLyBEZXNlcmlhbGl6ZSB7IHR5cGU6ICdCdWZmZXInLCBkYXRhOiBbMSwyLDMsLi4uXSB9IGludG8gYSBCdWZmZXIgb2JqZWN0LlxuLy8gUmV0dXJucyBhIHplcm8tbGVuZ3RoIGJ1ZmZlciBmb3IgaW5wdXRzIHRoYXQgZG9uJ3QgY29uZm9ybSB0byB0aGUgc3BlYy5cbmZ1bmN0aW9uIGZyb21Kc29uT2JqZWN0ICh0aGF0LCBvYmplY3QpIHtcbiAgdmFyIGFycmF5XG4gIHZhciBsZW5ndGggPSAwXG5cbiAgaWYgKG9iamVjdC50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iamVjdC5kYXRhKSkge1xuICAgIGFycmF5ID0gb2JqZWN0LmRhdGFcbiAgICBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIH1cbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGVcbiAgQnVmZmVyLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXlcbn0gZWxzZSB7XG4gIC8vIHByZS1zZXQgZm9yIHZhbHVlcyB0aGF0IG1heSBleGlzdCBpbiB0aGUgZnV0dXJlXG4gIEJ1ZmZlci5wcm90b3R5cGUubGVuZ3RoID0gdW5kZWZpbmVkXG4gIEJ1ZmZlci5wcm90b3R5cGUucGFyZW50ID0gdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIGFsbG9jYXRlICh0aGF0LCBsZW5ndGgpIHtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IEJ1ZmZlci5fYXVnbWVudChuZXcgVWludDhBcnJheShsZW5ndGgpKVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aFxuICAgIHRoYXQuX2lzQnVmZmVyID0gdHJ1ZVxuICB9XG5cbiAgdmFyIGZyb21Qb29sID0gbGVuZ3RoICE9PSAwICYmIGxlbmd0aCA8PSBCdWZmZXIucG9vbFNpemUgPj4+IDFcbiAgaWYgKGZyb21Qb29sKSB0aGF0LnBhcmVudCA9IHJvb3RQYXJlbnRcblxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aGAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlblxuICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcbiAgaWYgKGxlbmd0aCA+PSBrTWF4TGVuZ3RoKCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuICB9XG4gIHJldHVybiBsZW5ndGggfCAwXG59XG5cbmZ1bmN0aW9uIFNsb3dCdWZmZXIgKHN1YmplY3QsIGVuY29kaW5nKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTbG93QnVmZmVyKSkgcmV0dXJuIG5ldyBTbG93QnVmZmVyKHN1YmplY3QsIGVuY29kaW5nKVxuXG4gIHZhciBidWYgPSBuZXcgQnVmZmVyKHN1YmplY3QsIGVuY29kaW5nKVxuICBkZWxldGUgYnVmLnBhcmVudFxuICByZXR1cm4gYnVmXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG59XG5cbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG4gIH1cblxuICBpZiAoYSA9PT0gYikgcmV0dXJuIDBcblxuICB2YXIgeCA9IGEubGVuZ3RoXG4gIHZhciB5ID0gYi5sZW5ndGhcblxuICB2YXIgaSA9IDBcbiAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpXG4gIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIGJyZWFrXG5cbiAgICArK2lcbiAgfVxuXG4gIGlmIChpICE9PSBsZW4pIHtcbiAgICB4ID0gYVtpXVxuICAgIHkgPSBiW2ldXG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHtcbiAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOlxuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICBjYXNlICdhc2NpaSc6XG4gICAgY2FzZSAnYmluYXJ5JzpcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgIGNhc2UgJ3Jhdyc6XG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbkJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkge1xuICBpZiAoIWlzQXJyYXkobGlzdCkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2xpc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzLicpXG5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoMClcbiAgfVxuXG4gIHZhciBpXG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGxlbmd0aCA9IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuICB2YXIgcG9zID0gMFxuICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXVxuICAgIGl0ZW0uY29weShidWYsIHBvcylcbiAgICBwb3MgKz0gaXRlbS5sZW5ndGhcbiAgfVxuICByZXR1cm4gYnVmXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSBzdHJpbmcgPSAnJyArIHN0cmluZ1xuXG4gIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChsZW4gPT09IDApIHJldHVybiAwXG5cbiAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgLy8gRGVwcmVjYXRlZFxuICAgICAgY2FzZSAncmF3JzpcbiAgICAgIGNhc2UgJ3Jhd3MnOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gbGVuICogMlxuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMVxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4XG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5CdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblxuZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkge1xuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXG4gIHN0YXJ0ID0gc3RhcnQgfCAwXG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA9PT0gSW5maW5pdHkgPyB0aGlzLmxlbmd0aCA6IGVuZCB8IDBcblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAoZW5kIDw9IHN0YXJ0KSByZXR1cm4gJydcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBiaW5hcnlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMFxuICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuICB2YXIgc3RyID0gJydcbiAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVNcbiAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpXG4gICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJ1xuICB9XG4gIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIDBcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCkge1xuICBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG4gIGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG4gIGJ5dGVPZmZzZXQgPj49IDBcblxuICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiAtMVxuICBpZiAoYnl0ZU9mZnNldCA+PSB0aGlzLmxlbmd0aCkgcmV0dXJuIC0xXG5cbiAgLy8gTmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBNYXRoLm1heCh0aGlzLmxlbmd0aCArIGJ5dGVPZmZzZXQsIDApXG5cbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHJldHVybiAtMSAvLyBzcGVjaWFsIGNhc2U6IGxvb2tpbmcgZm9yIGVtcHR5IHN0cmluZyBhbHdheXMgZmFpbHNcbiAgICByZXR1cm4gU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICB9XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIHJldHVybiBhcnJheUluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICB9XG4gIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsIHZhbCwgYnl0ZU9mZnNldClcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZih0aGlzLCBbIHZhbCBdLCBieXRlT2Zmc2V0KVxuICB9XG5cbiAgZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCkge1xuICAgIHZhciBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKHZhciBpID0gMDsgYnl0ZU9mZnNldCArIGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhcnJbYnl0ZU9mZnNldCArIGldID09PSB2YWxbZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXhdKSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGlcbiAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsLmxlbmd0aCkgcmV0dXJuIGJ5dGVPZmZzZXQgKyBmb3VuZEluZGV4XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3VuZEluZGV4ID0gLTFcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xXG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxufVxuXG4vLyBgZ2V0YCBpcyBkZXByZWNhdGVkXG5CdWZmZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCAob2Zmc2V0KSB7XG4gIGNvbnNvbGUubG9nKCcuZ2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuICByZXR1cm4gdGhpcy5yZWFkVUludDgob2Zmc2V0KVxufVxuXG4vLyBgc2V0YCBpcyBkZXByZWNhdGVkXG5CdWZmZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIHNldCAodiwgb2Zmc2V0KSB7XG4gIGNvbnNvbGUubG9nKCcuc2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuICByZXR1cm4gdGhpcy53cml0ZVVJbnQ4KHYsIG9mZnNldClcbn1cblxuZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwXG4gIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcbiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG4gICAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgICB9XG4gIH1cblxuICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChpc05hTihwYXJzZWQpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG4gICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiaW5hcnlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcbiAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4J1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aFxuICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG4gICAgfVxuICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG4gIH0gZWxzZSB7XG4gICAgdmFyIHN3YXAgPSBlbmNvZGluZ1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgb2Zmc2V0ID0gbGVuZ3RoIHwgMFxuICAgIGxlbmd0aCA9IHN3YXBcbiAgfVxuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblxuICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gYmluYXJ5V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcbiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQnVmZmVyJyxcbiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuICB2YXIgcmVzID0gW11cblxuICB2YXIgaSA9IHN0YXJ0XG4gIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuICAgIHZhciBjb2RlUG9pbnQgPSBudWxsXG4gICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0XG4gICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMlxuICAgICAgOiAxXG5cbiAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7XG4gICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50XG5cbiAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM11cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG4gICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhXG4gICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlXG4gICAgICBjb2RlUG9pbnQgPSAweEZGRkRcbiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHtcbiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG4gICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMFxuICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKVxuICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcbiAgICB9XG5cbiAgICByZXMucHVzaChjb2RlUG9pbnQpXG4gICAgaSArPSBieXRlc1BlclNlcXVlbmNlXG4gIH1cblxuICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcbn1cblxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG4vLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG4vLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblxuZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG4gIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aFxuICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG4gIH1cblxuICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG4gIHZhciByZXMgPSAnJ1xuICB2YXIgaSA9IDBcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcbiAgICAgIFN0cmluZyxcbiAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcbiAgICApXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBiaW5hcnlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cbiAgdmFyIG91dCA9ICcnXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuICB2YXIgcmVzID0gJydcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWZcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gQnVmZmVyLl9hdWdtZW50KHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCkpXG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgaSsrKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH1cblxuICBpZiAobmV3QnVmLmxlbmd0aCkgbmV3QnVmLnBhcmVudCA9IHRoaXMucGFyZW50IHx8IHRoaXNcblxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuICB9XG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuICB2YXIgbXVsID0gMVxuICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aFxuICB2YXIgbXVsID0gMVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2J1ZmZlciBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgaSsrKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7IGkrKykge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IHZhbHVlIDwgMCA/IDEgOiAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3ZhbHVlIGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG5mdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblxuICAvLyBBcmUgd2Ugb29iP1xuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkge1xuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG4gIH1cblxuICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcbiAgdmFyIGlcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcbiAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcbiAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQuX3NldCh0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksIHRhcmdldFN0YXJ0KVxuICB9XG5cbiAgcmV0dXJuIGxlblxufVxuXG4vLyBmaWxsKHZhbHVlLCBzdGFydD0wLCBlbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbHVlLCBzdGFydCwgZW5kKSB7XG4gIGlmICghdmFsdWUpIHZhbHVlID0gMFxuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQpIGVuZCA9IHRoaXMubGVuZ3RoXG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIDwgc3RhcnQnKVxuXG4gIC8vIEZpbGwgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuXG4gIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3N0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2VuZCBvdXQgb2YgYm91bmRzJylcblxuICB2YXIgaVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHRoaXNbaV0gPSB2YWx1ZVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSB1dGY4VG9CeXRlcyh2YWx1ZS50b1N0cmluZygpKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICB0aGlzW2ldID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYEFycmF5QnVmZmVyYCB3aXRoIHRoZSAqY29waWVkKiBtZW1vcnkgb2YgdGhlIGJ1ZmZlciBpbnN0YW5jZS5cbiAqIEFkZGVkIGluIE5vZGUgMC4xMi4gT25seSBhdmFpbGFibGUgaW4gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IEFycmF5QnVmZmVyLlxuICovXG5CdWZmZXIucHJvdG90eXBlLnRvQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiB0b0FycmF5QnVmZmVyICgpIHtcbiAgaWYgKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgICAgcmV0dXJuIChuZXcgQnVmZmVyKHRoaXMpKS5idWZmZXJcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoKVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJ1Zi5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICBidWZbaV0gPSB0aGlzW2ldXG4gICAgICB9XG4gICAgICByZXR1cm4gYnVmLmJ1ZmZlclxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCdWZmZXIudG9BcnJheUJ1ZmZlciBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpXG4gIH1cbn1cblxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PVxuXG52YXIgQlAgPSBCdWZmZXIucHJvdG90eXBlXG5cbi8qKlxuICogQXVnbWVudCBhIFVpbnQ4QXJyYXkgKmluc3RhbmNlKiAobm90IHRoZSBVaW50OEFycmF5IGNsYXNzISkgd2l0aCBCdWZmZXIgbWV0aG9kc1xuICovXG5CdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiBfYXVnbWVudCAoYXJyKSB7XG4gIGFyci5jb25zdHJ1Y3RvciA9IEJ1ZmZlclxuICBhcnIuX2lzQnVmZmVyID0gdHJ1ZVxuXG4gIC8vIHNhdmUgcmVmZXJlbmNlIHRvIG9yaWdpbmFsIFVpbnQ4QXJyYXkgc2V0IG1ldGhvZCBiZWZvcmUgb3ZlcndyaXRpbmdcbiAgYXJyLl9zZXQgPSBhcnIuc2V0XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBhcnIuZ2V0ID0gQlAuZ2V0XG4gIGFyci5zZXQgPSBCUC5zZXRcblxuICBhcnIud3JpdGUgPSBCUC53cml0ZVxuICBhcnIudG9TdHJpbmcgPSBCUC50b1N0cmluZ1xuICBhcnIudG9Mb2NhbGVTdHJpbmcgPSBCUC50b1N0cmluZ1xuICBhcnIudG9KU09OID0gQlAudG9KU09OXG4gIGFyci5lcXVhbHMgPSBCUC5lcXVhbHNcbiAgYXJyLmNvbXBhcmUgPSBCUC5jb21wYXJlXG4gIGFyci5pbmRleE9mID0gQlAuaW5kZXhPZlxuICBhcnIuY29weSA9IEJQLmNvcHlcbiAgYXJyLnNsaWNlID0gQlAuc2xpY2VcbiAgYXJyLnJlYWRVSW50TEUgPSBCUC5yZWFkVUludExFXG4gIGFyci5yZWFkVUludEJFID0gQlAucmVhZFVJbnRCRVxuICBhcnIucmVhZFVJbnQ4ID0gQlAucmVhZFVJbnQ4XG4gIGFyci5yZWFkVUludDE2TEUgPSBCUC5yZWFkVUludDE2TEVcbiAgYXJyLnJlYWRVSW50MTZCRSA9IEJQLnJlYWRVSW50MTZCRVxuICBhcnIucmVhZFVJbnQzMkxFID0gQlAucmVhZFVJbnQzMkxFXG4gIGFyci5yZWFkVUludDMyQkUgPSBCUC5yZWFkVUludDMyQkVcbiAgYXJyLnJlYWRJbnRMRSA9IEJQLnJlYWRJbnRMRVxuICBhcnIucmVhZEludEJFID0gQlAucmVhZEludEJFXG4gIGFyci5yZWFkSW50OCA9IEJQLnJlYWRJbnQ4XG4gIGFyci5yZWFkSW50MTZMRSA9IEJQLnJlYWRJbnQxNkxFXG4gIGFyci5yZWFkSW50MTZCRSA9IEJQLnJlYWRJbnQxNkJFXG4gIGFyci5yZWFkSW50MzJMRSA9IEJQLnJlYWRJbnQzMkxFXG4gIGFyci5yZWFkSW50MzJCRSA9IEJQLnJlYWRJbnQzMkJFXG4gIGFyci5yZWFkRmxvYXRMRSA9IEJQLnJlYWRGbG9hdExFXG4gIGFyci5yZWFkRmxvYXRCRSA9IEJQLnJlYWRGbG9hdEJFXG4gIGFyci5yZWFkRG91YmxlTEUgPSBCUC5yZWFkRG91YmxlTEVcbiAgYXJyLnJlYWREb3VibGVCRSA9IEJQLnJlYWREb3VibGVCRVxuICBhcnIud3JpdGVVSW50OCA9IEJQLndyaXRlVUludDhcbiAgYXJyLndyaXRlVUludExFID0gQlAud3JpdGVVSW50TEVcbiAgYXJyLndyaXRlVUludEJFID0gQlAud3JpdGVVSW50QkVcbiAgYXJyLndyaXRlVUludDE2TEUgPSBCUC53cml0ZVVJbnQxNkxFXG4gIGFyci53cml0ZVVJbnQxNkJFID0gQlAud3JpdGVVSW50MTZCRVxuICBhcnIud3JpdGVVSW50MzJMRSA9IEJQLndyaXRlVUludDMyTEVcbiAgYXJyLndyaXRlVUludDMyQkUgPSBCUC53cml0ZVVJbnQzMkJFXG4gIGFyci53cml0ZUludExFID0gQlAud3JpdGVJbnRMRVxuICBhcnIud3JpdGVJbnRCRSA9IEJQLndyaXRlSW50QkVcbiAgYXJyLndyaXRlSW50OCA9IEJQLndyaXRlSW50OFxuICBhcnIud3JpdGVJbnQxNkxFID0gQlAud3JpdGVJbnQxNkxFXG4gIGFyci53cml0ZUludDE2QkUgPSBCUC53cml0ZUludDE2QkVcbiAgYXJyLndyaXRlSW50MzJMRSA9IEJQLndyaXRlSW50MzJMRVxuICBhcnIud3JpdGVJbnQzMkJFID0gQlAud3JpdGVJbnQzMkJFXG4gIGFyci53cml0ZUZsb2F0TEUgPSBCUC53cml0ZUZsb2F0TEVcbiAgYXJyLndyaXRlRmxvYXRCRSA9IEJQLndyaXRlRmxvYXRCRVxuICBhcnIud3JpdGVEb3VibGVMRSA9IEJQLndyaXRlRG91YmxlTEVcbiAgYXJyLndyaXRlRG91YmxlQkUgPSBCUC53cml0ZURvdWJsZUJFXG4gIGFyci5maWxsID0gQlAuZmlsbFxuICBhcnIuaW5zcGVjdCA9IEJQLmluc3BlY3RcbiAgYXJyLnRvQXJyYXlCdWZmZXIgPSBCUC50b0FycmF5QnVmZmVyXG5cbiAgcmV0dXJuIGFyclxufVxuXG52YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXFwvMC05QS1aYS16LV9dL2dcblxuZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuICAvLyBOb2RlIHN0cmlwcyBvdXQgaW52YWxpZCBjaGFyYWN0ZXJzIGxpa2UgXFxuIGFuZCBcXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKVxuICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG4gIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnXG4gIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdFxuICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcbiAgICBzdHIgPSBzdHIgKyAnPSdcbiAgfVxuICByZXR1cm4gc3RyXG59XG5cbmZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpXG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG59XG5cbmZ1bmN0aW9uIHRvSGV4IChuKSB7XG4gIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuICByZXR1cm4gbi50b1N0cmluZygxNilcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICB2YXIgY29kZVBvaW50XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoXG4gIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICB2YXIgYnl0ZXMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG4gICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZCBsZWFkXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG4gICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwXG4gICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICB9XG5cbiAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXG4gICAgLy8gZW5jb2RlIHV0ZjhcbiAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvXG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuXG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaGkgPSBjID4+IDhcbiAgICBsbyA9IGMgJSAyNTZcbiAgICBieXRlQXJyYXkucHVzaChsbylcbiAgICBieXRlQXJyYXkucHVzaChoaSlcbiAgfVxuXG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7XG4gIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSlcbn1cblxuZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrXG4gICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldXG4gIH1cbiAgcmV0dXJuIGlcbn1cbiIsInZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuIiwiLyoqXG4gKiBXcmFwcGVycyBhcm91bmQgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHRvIGZhY2lsaXRhdGUgdGVzdGluZyBhbmQgY2xpY2stdHJhY2tpbmcuXG4gKlxuICogVGhpcyBhZGRzIHRoZSBjb25jZXB0IG9mIGEgXCJkYXRhIHN0YWNrXCIgdG8gdGhlIGNhbnZhcy4gV2hlbiBzaGFwZXMgYXJlXG4gKiBkcmF3biwgdGhleSByZXByZXNlbnQgdGhlIG9iamVjdHMgY3VycmVudGx5IG9uIHRoZSBzdGFjay4gVGhpcyBzdGFjayBjYW4gYmVcbiAqIG1hbmlwdWxhdGVkIHVzaW5nIGNvbnRleHQucHVzaE9iamVjdCgpIGFuZCBjb250ZXh0LnBvcE9iamVjdCgpLlxuICpcbiAqIFNlZSB0ZXN0IGZpbGUgZm9yIHNhbXBsZSB1c2FnZS5cbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cbid1c2Ugc3RyaWN0JztcblxuLy8gVHVybiBvYmogaW50byBhIHByb3h5IGZvciB0YXJnZXQuIFRoaXMgZm9yd2FyZHMgYm90aCBmdW5jdGlvbiBjYWxscyBhbmRcbi8vIHByb3BlcnR5IHNldHRlcnMvZ2V0dGVycy5cbmZ1bmN0aW9uIGZvcndhcmQob2JqLCB0YXJnZXQsIG9ubHlBY2Nlc3NvcnMpIHtcbiAgb25seUFjY2Vzc29ycyA9IG9ubHlBY2Nlc3NvcnMgfHwgZmFsc2U7XG4gIGZvciAodmFyIGsgaW4gdGFyZ2V0KSB7XG4gICAgKGZ1bmN0aW9uKGspIHtcbiAgICAgIGlmICh0eXBlb2YodGFyZ2V0W2tdKSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGlmICghb25seUFjY2Vzc29ycykge1xuICAgICAgICAgIG9ialtrXSA9ICB0YXJnZXRba10uYmluZCh0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRhcmdldFtrXTsgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHgpIHsgdGFyZ2V0W2tdID0geDsgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KShrKTtcbiAgfVxufVxuXG4vLyBUaGUgbW9zdCBiYXNpYyBkYXRhLWF3YXJlIGNhbnZhcy4gVGhpcyB0aHJvd3MgYXdheSBhbGwgZGF0YSBpbmZvcm1hdGlvbi5cbi8vIFVzZSB0aGlzIGZvciBiYXNpYyBkcmF3aW5nXG5mdW5jdGlvbiBEYXRhQ29udGV4dChjdHgpIHtcbiAgZm9yd2FyZCh0aGlzLCBjdHgpO1xuICB0aGlzLnB1c2hPYmplY3QgPSB0aGlzLnBvcE9iamVjdCA9IHRoaXMucmVzZXQgPSBmdW5jdGlvbigpIHt9O1xufVxuXG52YXIgc3R1YkdldERhdGFDb250ZXh0ID0gbnVsbDtcblxuLyoqXG4gKiBHZXQgYSBEYXRhQ29udGV4dCBmb3IgdGhlIGJ1aWx0LWluIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5cbiAqXG4gKiBUaGlzIGNhY2hlcyBEYXRhQ29udGV4dHMgYW5kIGZhY2lsaXRhdGVzIHN0dWJiaW5nIGluIHRlc3RzLlxuICpcbiAqIEFzIGEgY29udmVuaWVuY2UsIHlvdSBtYXkgcGFzcyBpbiBhIENhbnZhcyBlbGVtZW50IGluc3RlYWQgb2YgYVxuICogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELiBkYXRhLWNhbnZhcyB3aWxsIGNhbGwgZ2V0Q29udGV4dCgnMmQnKSBmb3IgeW91LlxuICovXG5mdW5jdGlvbiBnZXREYXRhQ29udGV4dChjdHhPckNhbnZhcykge1xuICBpZiAoY3R4T3JDYW52YXMgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgIHJldHVybiBnZXREYXRhQ29udGV4dChjdHhPckNhbnZhcy5nZXRDb250ZXh0KCcyZCcpKTtcbiAgfVxuXG4gIHZhciBjdHggPSBjdHhPckNhbnZhcztcbiAgaWYgKHN0dWJHZXREYXRhQ29udGV4dCkge1xuICAgIHJldHVybiBzdHViR2V0RGF0YUNvbnRleHQoY3R4KTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdldERhdGFDb250ZXh0LmNhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcGFpciA9IGdldERhdGFDb250ZXh0LmNhY2hlW2ldO1xuICAgICAgaWYgKHBhaXJbMF0gPT0gY3R4KSByZXR1cm4gcGFpclsxXTtcbiAgICB9XG4gICAgdmFyIGR0eCA9IG5ldyBEYXRhQ29udGV4dChjdHgpO1xuICAgIGdldERhdGFDb250ZXh0LmNhY2hlLnB1c2goW2N0eCwgZHR4XSk7XG4gICAgcmV0dXJuIGR0eDtcbiAgfVxufVxuZ2V0RGF0YUNvbnRleHQuY2FjaGUgPSBbXTsgIC8vIChDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIERhdGFDb250ZXh0KSBwYWlyc1xuXG5cbi8qKlxuICogQSBjb250ZXh0IHdoaWNoIHJlY29yZHMgd2hhdCBpdCBkb2VzIChmb3IgdGVzdGluZykuXG4gKlxuICogVGhpcyBwcm94aWVzIGFsbCBjYWxscyB0byB0aGUgdW5kZXJseWluZyBjYW52YXMsIHNvIHRoZXkgZG8gcHJvZHVjZSB2aXNpYmxlXG4gKiBkcmF3aW5nLiBVc2UgYGRyYXduT2JqZWN0c1dpdGhgIG9yIGBjYWxsc2AgdG8gdGVzdCB3aGF0IHdhcyBkcmF3bi5cbiAqL1xuZnVuY3Rpb24gUmVjb3JkaW5nQ29udGV4dChjdHgpIHtcbiAgZm9yd2FyZCh0aGlzLCBjdHgsIHRydWUgLyogb25seSBmb3dhcmQgYWNjZXNzb3JzICovKTtcblxuICB2YXIgY2FsbHMgPSBbXTtcbiAgdGhpcy5jYWxscyA9IGNhbGxzO1xuXG4gIGZvciAodmFyIGsgaW4gY3R4KSB7XG4gICAgKGZ1bmN0aW9uKGspIHtcbiAgICAgIGlmICh0eXBlb2YoY3R4W2tdKSAhPSAnZnVuY3Rpb24nKSByZXR1cm47XG4gICAgICB0aGlzW2tdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFRPRE86IHJlY29yZCBjdXJyZW50IGRyYXdpbmcgc3R5bGVcbiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICBjYWxscy5wdXNoKFtrXS5jb25jYXQoYXJncykpO1xuICAgICAgICByZXR1cm4gY3R4W2tdLmFwcGx5KGN0eCwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSkuYmluZCh0aGlzKShrKTtcbiAgfVxuXG4gIHRoaXMucHVzaE9iamVjdCA9IGZ1bmN0aW9uKG8pIHtcbiAgICBjYWxscy5wdXNoKFsncHVzaE9iamVjdCcsIG9dKTtcbiAgfTtcbiAgXG4gIHRoaXMucG9wT2JqZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgY2FsbHMucHVzaChbJ3BvcE9iamVjdCddKTtcbiAgfTtcblxuICB0aGlzLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jYWxscyA9IGNhbGxzID0gW107XG4gIH07XG5cbiAgdmFyIHJlY29yZGluZ0RyYXdJbWFnZSA9IHRoaXMuZHJhd0ltYWdlOyAgLy8gcGxhaW4gcmVjb3JkaW5nIGRyYXdJbWFnZSgpXG4gIHRoaXMuZHJhd0ltYWdlID0gZnVuY3Rpb24oaW1hZ2UpIHtcbiAgICAvLyBJZiB0aGUgZHJhd24gaW1hZ2UgaGFzIHJlY29yZGVkIGNhbGxzLCB0aGVuIHRoZXkgbmVlZCB0byBiZSB0cmFuc2ZlcnJlZCBvdmVyLlxuICAgIHZhciByZWNvcmRlciA9IFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJGb3JDYW52YXMoaW1hZ2UpO1xuICAgIGlmICghcmVjb3JkZXIpIHtcbiAgICAgIHJlY29yZGluZ0RyYXdJbWFnZS5hcHBseShjdHgsIGFyZ3VtZW50cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0eC5kcmF3SW1hZ2UuYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xuICAgICAgY2FsbHMgPSBjYWxscy5jb25jYXQodHJhbnNmb3JtZWRDYWxscyhyZWNvcmRlci5jYWxscywgYXJndW1lbnRzKSk7XG4gICAgICB0aGlzLmNhbGxzID0gY2FsbHM7XG4gICAgfVxuICB9XG59XG5cbi8vIFRyYW5zZm9ybSB0aGUgY2FsbHMgdG8gYSBuZXcgY29vcmRpbmF0ZSBzeXN0ZW0uXG4vLyBUaGUgYXJndW1lbnRzIGFyZSB0aG9zZSB0byBkcmF3SW1hZ2UoKS5cbmZ1bmN0aW9uIHRyYW5zZm9ybWVkQ2FsbHMoY2FsbHMsIGFyZ3MpIHtcbiAgdmFyIGltYWdlID0gYXJnc1swXSxcbiAgICAgIHN4ID0gMCxcbiAgICAgIHN5ID0gMCxcbiAgICAgIHNXaWR0aCA9IGltYWdlLndpZHRoLFxuICAgICAgc0hlaWdodCA9IGltYWdlLmhlaWdodCxcbiAgICAgIGR4LFxuICAgICAgZHksXG4gICAgICBkV2lkdGggPSBpbWFnZS53aWR0aCxcbiAgICAgIGRIZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG5cbiAgaWYgKGFyZ3MubGVuZ3RoID09IDMpIHtcbiAgICAvLyB2b2lkIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIGR4LCBkeSk7XG4gICAgZHggPSBhcmdzWzFdO1xuICAgIGR5ID0gYXJnc1syXTtcbiAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PSA1KSB7XG4gICAgLy8gdm9pZCBjdHguZHJhd0ltYWdlKGltYWdlLCBkeCwgZHksIGRXaWR0aCwgZEhlaWdodCk7XG4gICAgZHggPSBhcmdzWzFdO1xuICAgIGR5ID0gYXJnc1syXTtcbiAgICBkV2lkdGggPSBhcmdzWzNdO1xuICAgIGRIZWlnaHQgPSBhcmdzWzRdO1xuICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09IDkpIHtcbiAgICAvLyB2b2lkIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIHN4LCBzeSwgc1dpZHRoLCBzSGVpZ2h0LCBkeCwgZHksIGRXaWR0aCwgZEhlaWdodCk7XG4gICAgc3ggPSBhcmdzWzFdO1xuICAgIHN5ID0gYXJnc1syXTtcbiAgICBzV2lkdGggPSBhcmdzWzNdO1xuICAgIHNIZWlnaHQgPSBhcmdzWzRdO1xuICAgIGR4ID0gYXJnc1s1XTtcbiAgICBkeSA9IGFyZ3NbNl07XG4gICAgZFdpZHRoID0gYXJnc1s3XTtcbiAgICBkSGVpZ2h0ID0gYXJnc1s4XTtcbiAgfVxuICAvLyBPdGhlciBhcml0aWVzIHdpbGwgbWFrZSB0aGUgYnJvd3NlciB0aHJvdyBhbiBlcnJvciBvbiBjdHguZHJhd0ltYWdlLmFwcGx5XG5cbiAgdmFyIHhTY2FsaW5nID0gZ2V0U2NhbGVGYWN0b3Ioc3gsIHN4ICsgc1dpZHRoLCBkeCwgZHggKyBkV2lkdGgpLFxuICAgICAgeFNjYWxlICAgPSBtYWtlU2NhbGUoIHN4LCBzeCArIHNXaWR0aCwgZHgsIGR4ICsgZFdpZHRoKSxcbiAgICAgIHlTY2FsaW5nID0gZ2V0U2NhbGVGYWN0b3Ioc3ksIHN5ICsgc0hlaWdodCwgZHksIGR5ICsgZEhlaWdodCksXG4gICAgICB5U2NhbGUgICA9IG1ha2VTY2FsZSggc3ksIHN5ICsgc0hlaWdodCwgZHksIGR5ICsgZEhlaWdodCk7XG5cbiAgLy8gVGhlc2UgY2FsbHMgYXJlIG1vcmUgY29tcGxleDpcbiAgLy8gYXJjXG4gIC8vIGFyY1RvXG4gIC8vIGVsbGlwc2VcblxuICAvLyBUT0RPOiBjbGlwIGNhbGxzIG91dHNpZGUgb2YgdGhlIHNvdXJjZSByZWN0YW5nbGUuXG4gIHZhciB0cmFuc2Zvcm1DYWxsID0gZnVuY3Rpb24ob3JpZ2luYWxDYWxsKSB7XG4gICAgdmFyIGNhbGwgPSBvcmlnaW5hbENhbGwuc2xpY2UoKSwgIC8vIG1ha2UgYSBjb3B5XG4gICAgICAgIHR5cGUgPSBjYWxsWzBdO1xuICAgIGlmICh0eXBlIGluIENBTExTX1hZKSB7XG4gICAgICB2YXIgeHlzID0gQ0FMTFNfWFlbdHlwZV07XG4gICAgICBpZiAodHlwZW9mKHh5cykgPT0gJ251bWJlcicpIHh5cyA9IFt4eXNdO1xuICAgICAgeHlzLmZvckVhY2goZnVuY3Rpb24ocG9zKSB7XG4gICAgICAgIGNhbGxbMSArIHBvc10gPSB4U2NhbGUoY2FsbFsxICsgcG9zXSk7XG4gICAgICAgIGNhbGxbMiArIHBvc10gPSB5U2NhbGUoY2FsbFsyICsgcG9zXSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHR5cGUgaW4gQ0FMTFNfV0gpIHtcbiAgICAgIHZhciB3aHMgPSBDQUxMU19XSFt0eXBlXTtcbiAgICAgIGlmICh0eXBlb2Yod2hzKSA9PSAnbnVtYmVyJykgd2hzID0gW3doc107XG4gICAgICB3aHMuZm9yRWFjaChmdW5jdGlvbihwb3MpIHtcbiAgICAgICAgY2FsbFsxICsgcG9zXSAqPSB4U2NhbGluZztcbiAgICAgICAgY2FsbFsyICsgcG9zXSAqPSB5U2NhbGluZztcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY2FsbDtcbiAgfTtcblxuICByZXR1cm4gY2FsbHMubWFwKHRyYW5zZm9ybUNhbGwpO1xufVxuXG4vLyBIZWxwZXJzIGZvciB0cmFuc2Zvcm1lZENhbGxzXG5cbi8vIE1hcCAoeDEsIHgyKSAtLT4gKHkxLCB5MilcbmZ1bmN0aW9uIGdldFNjYWxlRmFjdG9yKHgxLCB4MiwgeTEsIHkyKSB7XG4gIHJldHVybiAoeTIgLSB5MSkgLyAoeDIgLSB4MSk7XG59O1xuZnVuY3Rpb24gbWFrZVNjYWxlKHgxLCB4MiwgeTEsIHkyKSB7XG4gIHZhciBzY2FsZSA9IGdldFNjYWxlRmFjdG9yKHgxLCB4MiwgeTEsIHkyKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4geTEgKyBzY2FsZSAqICh4IC0geDEpO1xuICB9O1xufTtcblxuLy8gVGhlc2UgY2FsbHMgYWxsIGhhdmUgKHgsIHkpIGFzIGFyZ3MgYXQgdGhlIHNwZWNpZmllZCBwb3NpdGlvbnMuXG52YXIgQ0FMTFNfWFkgPSB7XG4gIGNsZWFyUmVjdDogMCxcbiAgZmlsbFJlY3Q6IDAsXG4gIHN0cm9rZVJlY3Q6IDAsXG4gIGZpbGxUZXh0OiAxLFxuICBzdHJva2VUZXh0OiAxLFxuICBtb3ZlVG86IDAsXG4gIGxpbmVUbzogMCxcbiAgYmV6aWVyQ3VydmVUbzogWzAsIDIsIDRdLFxuICBxdWFkcmF0aWNDdXJ2ZVRvOiBbMCwgMl0sXG4gIHJlY3Q6IDBcbn07XG4vLyBUaGVzZSBjYWxscyBoYXZlICh3aWR0aCwgaGVpZ2h0KSBhcyBhcmdzIGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb25zLlxudmFyIENBTExTX1dIID0ge1xuICBjbGVhclJlY3Q6IDIsXG4gIGZpbGxSZWN0OiAyLFxuICBzdHJva2VSZWN0OiAyLFxuICAvLyBmaWxsVGV4dCBoYXMgYW4gb3B0aW9uYWwgYG1heF93aWR0aGAgcGFyYW1cbiAgcmVjdDogMixcbn07XG5cbi8qKlxuICogR2V0IGEgbGlzdCBvZiBvYmplY3RzIHdoaWNoIGhhdmUgYmVlbiBwdXNoZWQgdG8gdGhlIGRhdGEgY2FudmFzIHRoYXQgbWF0Y2hcbiAqIHRoZSBwYXJ0aWN1bGFyIHByZWRpY2F0ZS5cbiAqIElmIG5vIHByZWRpY2F0ZSBpcyBzcGVjaWZpZWQsIGFsbCBvYmplY3RzIGFyZSByZXR1cm5lZC5cbiAqL1xuUmVjb3JkaW5nQ29udGV4dC5wcm90b3R5cGUuZHJhd25PYmplY3RzV2l0aCA9IGZ1bmN0aW9uKHByZWRpY2F0ZSkge1xuICBpZiAoIXByZWRpY2F0ZSkgcHJlZGljYXRlID0gZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9O1xuICByZXR1cm4gdGhpcy5jYWxsc09mKCdwdXNoT2JqZWN0JylcbiAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHByZWRpY2F0ZSh4WzFdKSB9KVxuICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oeCkgeyByZXR1cm4geFsxXTsgfSk7XG59O1xuLy8gVGhpcyB2ZXJzaW9uIHJlYWRzIGJldHRlciBpZiB0aGVyZSdzIG5vIHByZWRpY2F0ZS5cblJlY29yZGluZ0NvbnRleHQucHJvdG90eXBlLmRyYXduT2JqZWN0cyA9IFJlY29yZGluZ0NvbnRleHQucHJvdG90eXBlLmRyYXduT2JqZWN0c1dpdGg7XG5cbi8qKlxuICogRmluZCBjYWxscyBvZiBhIHBhcnRpY3VsYXIgdHlwZSwgZS5nLiBgZmlsbFRleHRgIG9yIGBwdXNoT2JqZWN0YC5cbiAqXG4gKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBjYWxscyBhbmQgdGhlaXIgcGFyYW1ldGVycywgZS5nLlxuICogWyBbJ2ZpbGxUZXh0JywgJ0hlbGxvIScsIDIwLCAxMF0gXVxuICovXG5SZWNvcmRpbmdDb250ZXh0LnByb3RvdHlwZS5jYWxsc09mID0gZnVuY3Rpb24odHlwZSkge1xuICByZXR1cm4gdGhpcy5jYWxscy5maWx0ZXIoZnVuY3Rpb24oY2FsbCkgeyByZXR1cm4gY2FsbFswXSA9PSB0eXBlIH0pO1xufTtcblxuLyoqXG4gKiBTdGF0aWMgbWV0aG9kIHRvIGJlZ2luIHN3YXBwaW5nIGluIFJlY29yZGluZ0NvbnRleHQgaW4gcGxhY2Ugb2YgRGF0YUNvbnRleHQuXG4gKiBEb24ndCBmb3JnZXQgdG8gY2FsbCBSZWNvcmRpbmdDb250ZXh0LnJlc2V0KCkgYWZ0ZXIgdGhlIHRlc3QgY29tcGxldGVzIVxuICovXG5SZWNvcmRpbmdDb250ZXh0LnJlY29yZEFsbCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoc3R1YkdldERhdGFDb250ZXh0ICE9IG51bGwpIHtcbiAgICB0aHJvdyAnWW91IGZvcmdvdCB0byBjYWxsIFJlY29yZGluZ0NvbnRleHQucmVzZXQoKSc7XG4gIH1cbiAgUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlcnMgPSBbXTtcbiAgc3R1YkdldERhdGFDb250ZXh0ID0gZnVuY3Rpb24oY3R4KSB7XG4gICAgdmFyIHJlY29yZGVyID0gUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlckZvckNhbnZhcyhjdHguY2FudmFzKTtcbiAgICBpZiAocmVjb3JkZXIpIHJldHVybiByZWNvcmRlcjtcblxuICAgIHJlY29yZGVyID0gbmV3IFJlY29yZGluZ0NvbnRleHQoY3R4KTtcbiAgICBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycy5wdXNoKFtjdHguY2FudmFzLCByZWNvcmRlcl0pO1xuICAgIHJldHVybiByZWNvcmRlcjtcbiAgfTtcbn07XG5cbi8qKlxuICogUmV2ZXJ0IHRoZSBzdHViYmluZyBwZXJmb3JtZWQgYnkgUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRBbGwuXG4gKi9cblJlY29yZGluZ0NvbnRleHQucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCFzdHViR2V0RGF0YUNvbnRleHQpIHtcbiAgICB0aHJvdyAnQ2FsbGVkIFJlY29yZGluZ0NvbnRleHQucmVzZXQoKSBiZWZvcmUgUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRBbGwoKSc7XG4gIH1cbiAgc3R1YkdldERhdGFDb250ZXh0ID0gbnVsbDtcbiAgUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlcnMgPSBudWxsO1xufTtcblxuLy8gR2V0IHRoZSByZWNvcmRpbmcgY29udGV4dCBmb3IgYSBjYW52YXMuXG5SZWNvcmRpbmdDb250ZXh0LnJlY29yZGVyRm9yQ2FudmFzID0gZnVuY3Rpb24oY2FudmFzKSB7XG4gIHZhciByZWNvcmRlcnMgPSBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycztcbiAgaWYgKHJlY29yZGVycyA9PSBudWxsKSB7XG4gICAgdGhyb3cgJ1lvdSBtdXN0IGNhbGwgUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRBbGwoKSBiZWZvcmUgdXNpbmcgb3RoZXIgUmVjb3JkaW5nQ29udGV4dCBzdGF0aWMgbWV0aG9kcyc7XG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWNvcmRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgciA9IHJlY29yZGVyc1tpXTtcbiAgICBpZiAoclswXSA9PSBjYW52YXMpIHJldHVybiByWzFdO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIHJlY29yZGluZyBjb250ZXh0IGZvciBhIGNhbnZhcyBpbnNpZGUgb2YgZGl2LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIHdoZW4geW91IGhhdmUgYSB0ZXN0IGRpdiBhbmQgc2V2ZXJhbCBjYW52YXNlcy5cbiAqL1xuUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlckZvclNlbGVjdG9yID0gZnVuY3Rpb24oZGl2LCBzZWxlY3Rvcikge1xuICB2YXIgY2FudmFzID0gZGl2LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IgKyAnIGNhbnZhcycpIHx8IGRpdi5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgaWYgKCFjYW52YXMpIHtcbiAgICB0aHJvdyAnVW5hYmxlIHRvIGZpbmQgYSBjYW52YXMgbWF0Y2hpbmcgJyArIHNlbGVjdG9yO1xuICB9IGVsc2UgaWYgKCEoY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpKSB7XG4gICAgdGhyb3cgJ1NlbGVjdG9yICcgKyBzZWxlY3RvciArICcgbmVpdGhlciBtYXRjaGVzIG5vciBjb250YWlucyBhIGNhbnZhcyc7XG4gIH1cbiAgcmV0dXJuIFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJGb3JDYW52YXMoY2FudmFzKTtcbn07XG5cbi8vIFJlc29sdmVzIGFyZ3VtZW50cyBmb3IgUmVjb3JkaW5nQ29udGV4dCBoZWxwZXJzLlxuLy8gWW91IGNhbiBlaXRoZXIgc3BlY2lmeSBhIGRpdiAmIHNlbGVjdG9yIHRvIGZpbmQgdGhlIGNhbnZhcywgb3Igb21pdCB0aGlzIGlmXG4vLyB0aGVyZSdzIG9ubHkgb25lIGNhbnZhcyBiZWluZyByZWNvcmRlZC5cbmZ1bmN0aW9uIGZpbmRSZWNvcmRlcihkaXYsIHNlbGVjdG9yKSB7XG4gIGlmICghZGl2KSB7XG4gICAgaWYgKCFSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycykge1xuICAgICAgdGhyb3cgJ1lvdSBtdXN0IGNhbGwgUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRBbGwoKSBiZWZvcmUgdXNpbmcgb3RoZXIgUmVjb3JkaW5nQ29udGV4dCBzdGF0aWMgbWV0aG9kcyc7XG4gICAgfSBlbHNlIGlmIChSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycy5sZW5ndGggPT0gMCkge1xuICAgICAgdGhyb3cgJ0NhbGxlZCBhIFJlY29yZGluZ0NvbnRleHQgbWV0aG9kLCBidXQgbm8gY2FudmFzZXMgYXJlIGJlaW5nIHJlY29yZGVkLic7XG4gICAgfSBlbHNlIGlmIChSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycy5sZW5ndGggPiAxKSB7XG4gICAgICB0aHJvdyAnQ2FsbGVkIGEgUmVjb3JkaW5nQ29udGV4dCBtZXRob2Qgd2hpbGUgbXVsdGlwbGUgY2FudmFzZXMgd2VyZSBiZWluZyByZWNvcmRlZC4gU3BlY2lmeSBvbmUgdXNpbmcgYSBkaXYgYW5kIHNlbGVjdG9yLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVyc1swXVsxXTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJGb3JTZWxlY3RvcihkaXYsIHNlbGVjdG9yKTtcbiAgfVxufVxuXG4vLyBGaW5kIG9iamVjdHMgcHVzaGVkIG9udG8gYSBwYXJ0aWN1bGFyIHJlY29yZGVkIGNhbnZhcy5cblJlY29yZGluZ0NvbnRleHQuZHJhd25PYmplY3RzV2l0aCA9IGZ1bmN0aW9uKGRpdiwgc2VsZWN0b3IsIHByZWRpY2F0ZSkge1xuICAvLyBDaGVjayBmb3IgdGhlIHplcm8tYXJndW1lbnQgb3Igb25lLWFyZ3VtZW50IHZlcnNpb24uXG4gIGlmICh0eXBlb2YoZGl2KSA9PSAnZnVuY3Rpb24nIHx8IGFyZ3VtZW50cy5sZW5ndGggPT0gMCkge1xuICAgIHByZWRpY2F0ZSA9IGRpdjtcbiAgICBkaXYgPSBudWxsO1xuICB9XG4gIHZhciByZWNvcmRlciA9IGZpbmRSZWNvcmRlcihkaXYsIHNlbGVjdG9yKTtcbiAgcHJlZGljYXRlID0gcHJlZGljYXRlIHx8IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfTtcbiAgcmV0dXJuIHJlY29yZGVyID8gcmVjb3JkZXIuZHJhd25PYmplY3RzV2l0aChwcmVkaWNhdGUpIDogW107XG59O1xuXG4vLyBUaGlzIHZlcnNpb24gcmVhZHMgYmV0dGVyIGlmIHRoZXJlJ3Mgbm8gcHJlZGljYXRlLlxuUmVjb3JkaW5nQ29udGV4dC5kcmF3bk9iamVjdHMgPSBSZWNvcmRpbmdDb250ZXh0LmRyYXduT2JqZWN0c1dpdGg7XG5cbi8vIEZpbmQgY2FsbHMgb2YgcGFydGljdWxhciBkcmF3aW5nIGZ1bmN0aW9ucyAoZS5nLiBmaWxsVGV4dClcblJlY29yZGluZ0NvbnRleHQuY2FsbHNPZiA9IGZ1bmN0aW9uIChkaXYsIHNlbGVjdG9yLCB0eXBlKSB7XG4gIC8vIENoZWNrIGZvciB0aGUgb25lLWFyZ3VtZW50IHZlcnNpb24uXG4gIGlmICh0eXBlb2YoZGl2KSA9PSAnc3RyaW5nJykge1xuICAgIHR5cGUgPSBkaXY7XG4gICAgZGl2ID0gbnVsbDtcbiAgfVxuICB2YXIgcmVjb3JkZXIgPSBmaW5kUmVjb3JkZXIoZGl2LCBzZWxlY3Rvcik7XG4gIHJldHVybiByZWNvcmRlciA/IHJlY29yZGVyLmNhbGxzT2YodHlwZSkgOiBbXTtcbn07XG5cblxuLyoqXG4gKiBBIGNvbnRleHQgd2hpY2ggZGV0ZXJtaW5lcyB0aGUgZGF0YSBhdCBhIHBhcnRpY3VsYXIgbG9jYXRpb24uXG4gKlxuICogV2hlbiBkcmF3aW5nIG1ldGhvZHMgYXJlIGNhbGxlZCBvbiB0aGlzIGNsYXNzLCBub3RoaW5nIGlzIHJlbmRlcmVkLiBJbnN0ZWFkLFxuICogZWFjaCBzaGFwZSBpcyBjaGVja2VkIHRvIHNlZSBpZiBpdCBpbmNsdWRlcyB0aGUgcG9pbnQgb2YgaW50ZXJlc3QuIElmIGl0XG4gKiBkb2VzLCB0aGUgY3VycmVudCBkYXRhIHN0YWNrIGlzIHNhdmVkIGFzIGEgXCJoaXRcIi5cbiAqXG4gKiBUaGUgYGhpdHNgIHByb3BlcnR5IHJlY29yZHMgYWxsIHN1Y2ggaGl0cy5cbiAqIFRoZSBgaGl0YCBwcm9wZXJ0eSByZWNvcmRzIG9ubHkgdGhlIGxhc3QgKHRvcCkgaGl0LlxuICovXG5mdW5jdGlvbiBDbGlja1RyYWNraW5nQ29udGV4dChjdHgsIHB4LCBweSkge1xuICBmb3J3YXJkKHRoaXMsIGN0eCk7XG5cbiAgdmFyIHN0YWNrID0gW107XG4gIHRoaXMuaGl0cyA9IFtdO1xuICB0aGlzLmhpdCA9IG51bGw7XG4gIFxuICB2YXIgdGhhdCA9IHRoaXM7XG4gIGZ1bmN0aW9uIHJlY29yZEhpdCgpIHtcbiAgICB0aGF0LmhpdHMudW5zaGlmdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChzdGFjaykpO1xuICAgIHRoYXQuaGl0ID0gdGhhdC5oaXRzWzBdO1xuICB9XG5cbiAgdGhpcy5wdXNoT2JqZWN0ID0gZnVuY3Rpb24obykge1xuICAgIHN0YWNrLnVuc2hpZnQobyk7XG4gIH07XG4gIFxuICB0aGlzLnBvcE9iamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHN0YWNrLnNoaWZ0KCk7XG4gIH07XG5cbiAgdGhpcy5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaGl0cyA9IFtdO1xuICAgIHRoaXMuaGl0ID0gbnVsbDtcbiAgfTtcblxuICAvLyBUaGVzZSBhcmUgKG1vc3Qgb2YpIHRoZSBjYW52YXMgbWV0aG9kcyB3aGljaCBkcmF3IHNvbWV0aGluZy5cbiAgLy8gVE9ETzogd291bGQgaXQgbWFrZSBzZW5zZSB0byBwdXJnZSBleGlzdGluZyBoaXRzIGNvdmVyZWQgYnkgdGhpcz9cbiAgdGhpcy5jbGVhclJlY3QgPSBmdW5jdGlvbih4LCB5LCB3LCBoKSB7IH07XG5cbiAgdGhpcy5maWxsUmVjdCA9IGZ1bmN0aW9uKHgsIHksIHcsIGgpIHtcbiAgICBpZiAocHggPj0geCAmJiBweCA8PSB4ICsgdyAmJiBweSA+PSB5ICYmIHB5IDw9IHkgKyBoKSByZWNvcmRIaXQoKTtcbiAgfTtcblxuICB0aGlzLnN0cm9rZVJlY3QgPSBmdW5jdGlvbih4LCB5LCB3LCBoKSB7XG4gICAgLy8gLi4uXG4gIH07XG5cbiAgdGhpcy5maWxsID0gZnVuY3Rpb24oZmlsbFJ1bGUpIHtcbiAgICAvLyBUT0RPOiBpbXBsZW1lbnQgZmlsbFJ1bGVcbiAgICBpZiAoY3R4LmlzUG9pbnRJblBhdGgocHgsIHB5KSkgcmVjb3JkSGl0KCk7XG4gIH07XG5cbiAgdGhpcy5zdHJva2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoY3R4LmlzUG9pbnRJblN0cm9rZShweCwgcHkpKSByZWNvcmRIaXQoKTtcbiAgfTtcblxuICB0aGlzLmZpbGxUZXh0ID0gZnVuY3Rpb24odGV4dCwgeCwgeSwgbWF4V2lkdGgpIHtcbiAgICAvLyAuLi5cbiAgfTtcblxuICB0aGlzLnN0cm9rZVRleHQgPSBmdW5jdGlvbih0ZXh0LCB4LCB5LCBtYXhXaWR0aCkge1xuICAgIC8vIC4uLlxuICB9O1xufVxuXG52YXIgZXhwb3J0cyA9IHtcbiAgRGF0YUNvbnRleHQ6IERhdGFDb250ZXh0LFxuICBSZWNvcmRpbmdDb250ZXh0OiBSZWNvcmRpbmdDb250ZXh0LFxuICBDbGlja1RyYWNraW5nQ29udGV4dDogQ2xpY2tUcmFja2luZ0NvbnRleHQsXG4gIGdldERhdGFDb250ZXh0OiBnZXREYXRhQ29udGV4dFxufTtcblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG59IGVsc2Uge1xuICB3aW5kb3cuZGF0YUNhbnZhcyA9IGV4cG9ydHM7XG59XG5cbn0pKCk7XG4iLCJleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbVxuICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgbkJpdHMgPSAtN1xuICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG4gIHZhciBkID0gaXNMRSA/IC0xIDogMVxuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IChlICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIGUgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IG1MZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IChtICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIGlmIChlID09PSAwKSB7XG4gICAgZSA9IDEgLSBlQmlhc1xuICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSlcbiAgfSBlbHNlIHtcbiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pXG4gICAgZSA9IGUgLSBlQmlhc1xuICB9XG4gIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pXG59XG5cbmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG0sIGNcbiAgdmFyIGVMZW4gPSAobkJ5dGVzICogOCkgLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG4gIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cbiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcbiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcbiAgICBlID0gZU1heFxuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcbiAgICAgIGUtLVxuICAgICAgYyAqPSAyXG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrK1xuICAgICAgYyAvPSAyXG4gICAgfVxuXG4gICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG4gICAgICBtID0gMFxuICAgICAgZSA9IGVNYXhcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKCh2YWx1ZSAqIGMpIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IGUgKyBlQmlhc1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSAwXG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtXG4gIGVMZW4gKz0gbUxlblxuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG59XG4iLCIhZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hKGIscmVxdWlyZShcImpkYXRhdmlld1wiKSk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJqZGF0YXZpZXdcIl0sZnVuY3Rpb24oYyl7cmV0dXJuIGEoYixjKX0pOmIuakJpbmFyeT1hKGIsYi5qRGF0YVZpZXcpfShmdW5jdGlvbihhLGIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGMoYSxiKXtyZXR1cm4gYiYmYSBpbnN0YW5jZW9mIGJ9ZnVuY3Rpb24gZChhKXtmb3IodmFyIGI9MSxjPWFyZ3VtZW50cy5sZW5ndGg7Yz5iOysrYil7dmFyIGQ9YXJndW1lbnRzW2JdO2Zvcih2YXIgZSBpbiBkKXZvaWQgMCE9PWRbZV0mJihhW2VdPWRbZV0pfXJldHVybiBhfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGFyZ3VtZW50c1swXT1tKGEpLGQuYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIGYoYSxiLGQpe3JldHVybiBjKGQsRnVuY3Rpb24pP2QuY2FsbChhLGIuY29udGV4dHNbMF0pOmR9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj1hcmd1bWVudHMsZD1iLmxlbmd0aC0xLGU9YS5sZW5ndGgtMSxmPWJbZF07aWYoYi5sZW5ndGg9ZSsxLCFjKGYsRnVuY3Rpb24pKXt2YXIgZz10aGlzO3JldHVybiBuZXcgbChmdW5jdGlvbihjLGQpe2JbZV09ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9kKGEpOmMoYil9LGEuYXBwbHkoZyxiKX0pfWJbZF09dm9pZCAwLGJbZV09ZixhLmFwcGx5KHRoaXMsYil9fWZ1bmN0aW9uIGgoYSxkKXtyZXR1cm4gYyhhLGgpP2EuYXMoZCk6KGMoYSxiKXx8KGE9bmV3IGIoYSx2b2lkIDAsdm9pZCAwLGQ/ZFtcImpCaW5hcnkubGl0dGxlRW5kaWFuXCJdOnZvaWQgMCkpLGModGhpcyxoKT8odGhpcy52aWV3PWEsdGhpcy52aWV3LnNlZWsoMCksdGhpcy5jb250ZXh0cz1bXSx0aGlzLmFzKGQsITApKTpuZXcgaChhLGQpKX1mdW5jdGlvbiBpKGEpe3JldHVybiBlKGkucHJvdG90eXBlLGEpfWZ1bmN0aW9uIGooYSl7cmV0dXJuIGUoai5wcm90b3R5cGUsYSx7Y3JlYXRlUHJvcGVydHk6ZnVuY3Rpb24oKXt2YXIgYj0oYS5jcmVhdGVQcm9wZXJ0eXx8ai5wcm90b3R5cGUuY3JlYXRlUHJvcGVydHkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gYi5nZXRCYXNlVHlwZSYmKGIuYmFzZVR5cGU9Yi5iaW5hcnkuZ2V0VHlwZShiLmdldEJhc2VUeXBlKGIuYmluYXJ5LmNvbnRleHRzWzBdKSkpLGJ9fSl9dmFyIGs9YS5kb2N1bWVudDtcImF0b2JcImluIGEmJlwiYnRvYVwiaW4gYXx8IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYihhKXt2YXIgYixjLGUsZixnLGg7Zm9yKGU9YS5sZW5ndGgsYz0wLGI9XCJcIjtlPmM7KXtpZihmPTI1NSZhLmNoYXJDb2RlQXQoYysrKSxjPT1lKXtiKz1kLmNoYXJBdChmPj4yKSxiKz1kLmNoYXJBdCgoMyZmKTw8NCksYis9XCI9PVwiO2JyZWFrfWlmKGc9YS5jaGFyQ29kZUF0KGMrKyksYz09ZSl7Yis9ZC5jaGFyQXQoZj4+MiksYis9ZC5jaGFyQXQoKDMmZik8PDR8KDI0MCZnKT4+NCksYis9ZC5jaGFyQXQoKDE1JmcpPDwyKSxiKz1cIj1cIjticmVha31oPWEuY2hhckNvZGVBdChjKyspLGIrPWQuY2hhckF0KGY+PjIpLGIrPWQuY2hhckF0KCgzJmYpPDw0fCgyNDAmZyk+PjQpLGIrPWQuY2hhckF0KCgxNSZnKTw8MnwoMTkyJmgpPj42KSxiKz1kLmNoYXJBdCg2MyZoKX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEpe3ZhciBiLGMsZCxmLGcsaCxpO2ZvcihoPWEubGVuZ3RoLGc9MCxpPVwiXCI7aD5nOyl7ZG8gYj1lWzI1NSZhLmNoYXJDb2RlQXQoZysrKV07d2hpbGUoaD5nJiYtMT09Yik7aWYoLTE9PWIpYnJlYWs7ZG8gYz1lWzI1NSZhLmNoYXJDb2RlQXQoZysrKV07d2hpbGUoaD5nJiYtMT09Yyk7aWYoLTE9PWMpYnJlYWs7aSs9U3RyaW5nLmZyb21DaGFyQ29kZShiPDwyfCg0OCZjKT4+NCk7ZG97aWYoZD0yNTUmYS5jaGFyQ29kZUF0KGcrKyksNjE9PWQpcmV0dXJuIGk7ZD1lW2RdfXdoaWxlKGg+ZyYmLTE9PWQpO2lmKC0xPT1kKWJyZWFrO2krPVN0cmluZy5mcm9tQ2hhckNvZGUoKDE1JmMpPDw0fCg2MCZkKT4+Mik7ZG97aWYoZj0yNTUmYS5jaGFyQ29kZUF0KGcrKyksNjE9PWYpcmV0dXJuIGk7Zj1lW2ZdfXdoaWxlKGg+ZyYmLTE9PWYpO2lmKC0xPT1mKWJyZWFrO2krPVN0cmluZy5mcm9tQ2hhckNvZGUoKDMmZCk8PDZ8Zil9cmV0dXJuIGl9dmFyIGQ9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIsZT1bLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsNjIsLTEsLTEsLTEsNjMsNTIsNTMsNTQsNTUsNTYsNTcsNTgsNTksNjAsNjEsLTEsLTEsLTEsLTEsLTEsLTEsLTEsMCwxLDIsMyw0LDUsNiw3LDgsOSwxMCwxMSwxMiwxMywxNCwxNSwxNiwxNywxOCwxOSwyMCwyMSwyMiwyMywyNCwyNSwtMSwtMSwtMSwtMSwtMSwtMSwyNiwyNywyOCwyOSwzMCwzMSwzMiwzMywzNCwzNSwzNiwzNywzOCwzOSw0MCw0MSw0Miw0Myw0NCw0NSw0Niw0Nyw0OCw0OSw1MCw1MSwtMSwtMSwtMSwtMSwtMV07YS5idG9hfHwoYS5idG9hPWIpLGEuYXRvYnx8KGEuYXRvYj1jKX0oKTt2YXIgbD1hLlByb21pc2V8fGZ1bmN0aW9uKGEpe3RoaXMudGhlbj1hfSxtPU9iamVjdC5jcmVhdGU7bXx8KG09ZnVuY3Rpb24oYSl7dmFyIGI9ZnVuY3Rpb24oKXt9O3JldHVybiBiLnByb3RvdHlwZT1hLG5ldyBifSk7dmFyIG49aC5wcm90b3R5cGUsbz1uLnR5cGVTZXQ9e307bi50b1ZhbHVlPWZ1bmN0aW9uKGEpe3JldHVybiBmKHRoaXMsdGhpcyxhKX0sbi5fbmFtZWQ9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLmRpc3BsYXlOYW1lPWIrXCIgQCBcIisodm9pZCAwIT09Yz9jOnRoaXMudmlldy50ZWxsKCkpLGF9O3ZhciBwPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTtpZihwKXRyeXtwKHt9LFwieFwiLHt9KX1jYXRjaChxKXtwPXZvaWQgMH1lbHNlIHA9ZnVuY3Rpb24oYSxiLGMsZCl7ZCYmKGFbYl09Yy52YWx1ZSl9O3ZhciByPVwiakJpbmFyeS5DYWNoZVwiLHM9MDtuLl9nZXRDYWNoZWQ9ZnVuY3Rpb24oYSxiLGMpe2lmKGEuaGFzT3duUHJvcGVydHkodGhpcy5jYWNoZUtleSkpcmV0dXJuIGFbdGhpcy5jYWNoZUtleV07dmFyIGQ9Yi5jYWxsKHRoaXMsYSk7cmV0dXJuIHAoYSx0aGlzLmNhY2hlS2V5LHt2YWx1ZTpkfSxjKSxkfSxuLmdldENvbnRleHQ9ZnVuY3Rpb24oYSl7c3dpdGNoKHR5cGVvZiBhKXtjYXNlXCJ1bmRlZmluZWRcIjphPTA7Y2FzZVwibnVtYmVyXCI6cmV0dXJuIHRoaXMuY29udGV4dHNbYV07Y2FzZVwic3RyaW5nXCI6cmV0dXJuIHRoaXMuZ2V0Q29udGV4dChmdW5jdGlvbihiKXtyZXR1cm4gYSBpbiBifSk7Y2FzZVwiZnVuY3Rpb25cIjpmb3IodmFyIGI9MCxjPXRoaXMuY29udGV4dHMubGVuZ3RoO2M+YjtiKyspe3ZhciBkPXRoaXMuY29udGV4dHNbYl07aWYoYS5jYWxsKHRoaXMsZCkpcmV0dXJuIGR9fX0sbi5pbkNvbnRleHQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmNvbnRleHRzLnVuc2hpZnQoYSk7dmFyIGM9Yi5jYWxsKHRoaXMpO3JldHVybiB0aGlzLmNvbnRleHRzLnNoaWZ0KCksY30saS5wcm90b3R5cGU9e2luaGVyaXQ6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYil7dmFyIGM9ZlthXTtjJiYoZHx8KGQ9ZShmKSksYi5jYWxsKGQsYyksZFthXT1udWxsKX12YXIgZCxmPXRoaXM7cmV0dXJuIGMoXCJwYXJhbXNcIixmdW5jdGlvbihiKXtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2Q+YztjKyspdGhpc1tiW2NdXT1hW2NdfSksYyhcInNldFBhcmFtc1wiLGZ1bmN0aW9uKGIpe2IuYXBwbHkodGhpcyxhKX0pLGMoXCJ0eXBlUGFyYW1zXCIsZnVuY3Rpb24oYSl7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKXt2YXIgZT1hW2NdLGY9dGhpc1tlXTtmJiYodGhpc1tlXT1iKGYpKX19KSxjKFwicmVzb2x2ZVwiLGZ1bmN0aW9uKGEpe2EuY2FsbCh0aGlzLGIpfSksZHx8Zn0sY3JlYXRlUHJvcGVydHk6ZnVuY3Rpb24oYSl7cmV0dXJuIGUodGhpcyx7YmluYXJ5OmEsdmlldzphLnZpZXd9KX0sdG9WYWx1ZTpmdW5jdGlvbihhLGIpe3JldHVybiBiIT09ITEmJlwic3RyaW5nXCI9PXR5cGVvZiBhP3RoaXMuYmluYXJ5LmdldENvbnRleHQoYSlbYV06Zih0aGlzLHRoaXMuYmluYXJ5LGEpfX0saC5UeXBlPWksai5wcm90b3R5cGU9ZShpLnByb3RvdHlwZSx7c2V0UGFyYW1zOmZ1bmN0aW9uKCl7dGhpcy5iYXNlVHlwZSYmKHRoaXMudHlwZVBhcmFtcz1bXCJiYXNlVHlwZVwiXS5jb25jYXQodGhpcy50eXBlUGFyYW1zfHxbXSkpfSxiYXNlUmVhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJpbmFyeS5yZWFkKHRoaXMuYmFzZVR5cGUpfSxiYXNlV3JpdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYmluYXJ5LndyaXRlKHRoaXMuYmFzZVR5cGUsYSl9fSksZChqLnByb3RvdHlwZSx7cmVhZDpqLnByb3RvdHlwZS5iYXNlUmVhZCx3cml0ZTpqLnByb3RvdHlwZS5iYXNlV3JpdGV9KSxoLlRlbXBsYXRlPWosbi5hcz1mdW5jdGlvbihhLGIpe3ZhciBjPWI/dGhpczplKHRoaXMpO3JldHVybiBhPWF8fG8sYy50eXBlU2V0PWE9PT1vfHxvLmlzUHJvdG90eXBlT2YoYSk/YTplKG8sYSksYy5jYWNoZUtleT1yLGMuY2FjaGVLZXk9Yy5fZ2V0Q2FjaGVkKGEsZnVuY3Rpb24oKXtyZXR1cm4gcitcIi5cIisgKytzfSwhMCksY30sbi5zZWVrPWZ1bmN0aW9uKGEsYil7aWYoYT10aGlzLnRvVmFsdWUoYSksdm9pZCAwIT09Yil7dmFyIGM9dGhpcy52aWV3LnRlbGwoKTt0aGlzLnZpZXcuc2VlayhhKTt2YXIgZD1iLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMudmlldy5zZWVrKGMpLGR9cmV0dXJuIHRoaXMudmlldy5zZWVrKGEpfSxuLnRlbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3LnRlbGwoKX0sbi5za2lwPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc2Vlayh0aGlzLnRlbGwoKSt0aGlzLnRvVmFsdWUoYSksYil9LG4uc2xpY2U9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuZXcgaCh0aGlzLnZpZXcuc2xpY2UoYSxiLGMpLHRoaXMudHlwZVNldCl9LG4uX2dldFR5cGU9ZnVuY3Rpb24oYSxiKXtzd2l0Y2godHlwZW9mIGEpe2Nhc2VcInN0cmluZ1wiOmlmKCEoYSBpbiB0aGlzLnR5cGVTZXQpKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcIlVua25vd24gdHlwZTogXCIrYSk7cmV0dXJuIHRoaXMuX2dldFR5cGUodGhpcy50eXBlU2V0W2FdLGIpO2Nhc2VcIm51bWJlclwiOnJldHVybiB0aGlzLl9nZXRUeXBlKG8uYml0ZmllbGQsW2FdKTtjYXNlXCJvYmplY3RcIjppZihjKGEsaSkpe3ZhciBkPXRoaXM7cmV0dXJuIGEuaW5oZXJpdChifHxbXSxmdW5jdGlvbihhKXtyZXR1cm4gZC5nZXRUeXBlKGEpfSl9cmV0dXJuIGMoYSxBcnJheSk/dGhpcy5fZ2V0Q2FjaGVkKGEsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0VHlwZShhWzBdLGEuc2xpY2UoMSkpfSwhMCk6dGhpcy5fZ2V0Q2FjaGVkKGEsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0VHlwZShvLm9iamVjdCxbYV0pfSwhMSl9fSxuLmdldFR5cGU9ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLl9nZXRUeXBlKGEsYik7cmV0dXJuIGQmJiFjKGEsaSkmJihkLm5hbWU9XCJvYmplY3RcIj09dHlwZW9mIGE/YyhhLEFycmF5KT9hWzBdK1wiKFwiK2Euc2xpY2UoMSkuam9pbihcIiwgXCIpK1wiKVwiOlwib2JqZWN0XCI6U3RyaW5nKGEpKSxkfSxuLl9hY3Rpb249ZnVuY3Rpb24oYSxiLGMpe2lmKHZvaWQgMCE9PWEpe2E9dGhpcy5nZXRUeXBlKGEpO3ZhciBkPXRoaXMuX25hbWVkKGZ1bmN0aW9uKCl7cmV0dXJuIGMuY2FsbCh0aGlzLGEuY3JlYXRlUHJvcGVydHkodGhpcyksdGhpcy5jb250ZXh0c1swXSl9LFwiW1wiK2EubmFtZStcIl1cIixiKTtyZXR1cm4gdm9pZCAwIT09Yj90aGlzLnNlZWsoYixkKTpkLmNhbGwodGhpcyl9fSxuLnJlYWQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5fYWN0aW9uKGEsYixmdW5jdGlvbihhLGIpe3JldHVybiBhLnJlYWQoYil9KX0sbi5yZWFkQWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVhZChcImpCaW5hcnkuYWxsXCIsMCl9LG4ud3JpdGU9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLl9hY3Rpb24oYSxjLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9dGhpcy50ZWxsKCk7cmV0dXJuIGEud3JpdGUoYixjKSx0aGlzLnRlbGwoKS1kfSl9LG4ud3JpdGVBbGw9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud3JpdGUoXCJqQmluYXJ5LmFsbFwiLGEsMCl9LGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aDtkPmM7YysrKXt2YXIgZj1iW2NdO29bZi50b0xvd2VyQ2FzZSgpXT1lKGEse2RhdGFUeXBlOmZ9KX19KGkoe3BhcmFtczpbXCJsaXR0bGVFbmRpYW5cIl0scmVhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXdbXCJnZXRcIit0aGlzLmRhdGFUeXBlXSh2b2lkIDAsdGhpcy5saXR0bGVFbmRpYW4pfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLnZpZXdbXCJ3cml0ZVwiK3RoaXMuZGF0YVR5cGVdKGEsdGhpcy5saXR0bGVFbmRpYW4pfX0pLFtcIlVpbnQ4XCIsXCJVaW50MTZcIixcIlVpbnQzMlwiLFwiVWludDY0XCIsXCJJbnQ4XCIsXCJJbnQxNlwiLFwiSW50MzJcIixcIkludDY0XCIsXCJGbG9hdDMyXCIsXCJGbG9hdDY0XCIsXCJDaGFyXCJdKSxkKG8se1wiYnl0ZVwiOm8udWludDgsXCJmbG9hdFwiOm8uZmxvYXQzMixcImRvdWJsZVwiOm8uZmxvYXQ2NH0pLG8uYXJyYXk9aih7cGFyYW1zOltcImJhc2VUeXBlXCIsXCJsZW5ndGhcIl0scmVhZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMudG9WYWx1ZSh0aGlzLmxlbmd0aCk7aWYodGhpcy5iYXNlVHlwZT09PW8udWludDgpcmV0dXJuIHRoaXMudmlldy5nZXRCeXRlcyhhLHZvaWQgMCwhMCwhMCk7dmFyIGI7aWYodm9pZCAwIT09YSl7Yj1uZXcgQXJyYXkoYSk7Zm9yKHZhciBjPTA7YT5jO2MrKyliW2NdPXRoaXMuYmFzZVJlYWQoKX1lbHNle3ZhciBkPXRoaXMudmlldy5ieXRlTGVuZ3RoO2ZvcihiPVtdO3RoaXMuYmluYXJ5LnRlbGwoKTxkOyliLnB1c2godGhpcy5iYXNlUmVhZCgpKX1yZXR1cm4gYn0sd3JpdGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5iYXNlVHlwZT09PW8udWludDgpcmV0dXJuIHRoaXMudmlldy53cml0ZUJ5dGVzKGEpO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7Yz5iO2IrKyl0aGlzLmJhc2VXcml0ZShhW2JdKX19KSxvLmJpbmFyeT1qKHtwYXJhbXM6W1wibGVuZ3RoXCIsXCJ0eXBlU2V0XCJdLHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJpbmFyeS50ZWxsKCksYj10aGlzLmJpbmFyeS5za2lwKHRoaXMudG9WYWx1ZSh0aGlzLmxlbmd0aCkpLGM9dGhpcy52aWV3LnNsaWNlKGEsYik7cmV0dXJuIG5ldyBoKGMsdGhpcy50eXBlU2V0KX0sd3JpdGU6ZnVuY3Rpb24oYSl7dGhpcy5iaW5hcnkud3JpdGUoXCJibG9iXCIsYS5yZWFkKFwiYmxvYlwiLDApKX19KSxvLmJpdGZpZWxkPWkoe3BhcmFtczpbXCJiaXRTaXplXCJdLHJlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3LmdldFVuc2lnbmVkKHRoaXMuYml0U2l6ZSl9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMudmlldy53cml0ZVVuc2lnbmVkKGEsdGhpcy5iaXRTaXplKX19KSxvLmJsb2I9aSh7cGFyYW1zOltcImxlbmd0aFwiXSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlldy5nZXRCeXRlcyh0aGlzLnRvVmFsdWUodGhpcy5sZW5ndGgpKX0sd3JpdGU6ZnVuY3Rpb24oYSl7dGhpcy52aWV3LndyaXRlQnl0ZXMoYSwhMCl9fSksb1tcImNvbnN0XCJdPWooe3BhcmFtczpbXCJiYXNlVHlwZVwiLFwidmFsdWVcIixcInN0cmljdFwiXSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5iYXNlUmVhZCgpO2lmKHRoaXMuc3RyaWN0JiZhIT09dGhpcy52YWx1ZSl7aWYoYyh0aGlzLnN0cmljdCxGdW5jdGlvbikpcmV0dXJuIHRoaXMuc3RyaWN0KGEpO3Rocm93IG5ldyBUeXBlRXJyb3IoXCJVbmV4cGVjdGVkIHZhbHVlIChcIithK1wiICE9PSBcIit0aGlzLnZhbHVlK1wiKS5cIil9cmV0dXJuIGF9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMuYmFzZVdyaXRlKHRoaXMuc3RyaWN0fHx2b2lkIDA9PT1hP3RoaXMudmFsdWU6YSl9fSksb1tcImVudW1cIl09aih7cGFyYW1zOltcImJhc2VUeXBlXCIsXCJtYXRjaGVzXCJdLHNldFBhcmFtczpmdW5jdGlvbihhLGIpe3RoaXMuYmFja01hdGNoZXM9e307Zm9yKHZhciBjIGluIGIpdGhpcy5iYWNrTWF0Y2hlc1tiW2NdXT1jfSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5iYXNlUmVhZCgpO3JldHVybiBhIGluIHRoaXMubWF0Y2hlcz90aGlzLm1hdGNoZXNbYV06YX0sd3JpdGU6ZnVuY3Rpb24oYSl7dGhpcy5iYXNlV3JpdGUoYSBpbiB0aGlzLmJhY2tNYXRjaGVzP3RoaXMuYmFja01hdGNoZXNbYV06YSl9fSksby5leHRlbmQ9aSh7c2V0UGFyYW1zOmZ1bmN0aW9uKCl7dGhpcy5wYXJ0cz1hcmd1bWVudHN9LHJlc29sdmU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucGFydHMsYz1iLmxlbmd0aCxkPW5ldyBBcnJheShjKSxlPTA7Yz5lO2UrKylkW2VdPWEoYltlXSk7dGhpcy5wYXJ0cz1kfSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYXJ0cyxiPXRoaXMuYmluYXJ5LnJlYWQoYVswXSk7cmV0dXJuIHRoaXMuYmluYXJ5LmluQ29udGV4dChiLGZ1bmN0aW9uKCl7Zm9yKHZhciBjPTEsZT1hLmxlbmd0aDtlPmM7YysrKWQoYix0aGlzLnJlYWQoYVtjXSkpfSksYn0sd3JpdGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wYXJ0czt0aGlzLmJpbmFyeS5pbkNvbnRleHQoYSxmdW5jdGlvbigpe2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl0aGlzLndyaXRlKGJbY10sYSl9KX19KSxvW1wiaWZcIl09aih7cGFyYW1zOltcImNvbmRpdGlvblwiLFwidHJ1ZVR5cGVcIixcImZhbHNlVHlwZVwiXSx0eXBlUGFyYW1zOltcInRydWVUeXBlXCIsXCJmYWxzZVR5cGVcIl0sZ2V0QmFzZVR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1ZhbHVlKHRoaXMuY29uZGl0aW9uKT90aGlzLnRydWVUeXBlOnRoaXMuZmFsc2VUeXBlfX0pLG8uaWZfbm90PW8uaWZOb3Q9aih7c2V0UGFyYW1zOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmJhc2VUeXBlPVtcImlmXCIsYSxjLGJdfX0pLG8ubGF6eT1qKHttYXJrZXI6XCJqQmluYXJ5LkxhenlcIixwYXJhbXM6W1wiaW5uZXJUeXBlXCIsXCJsZW5ndGhcIl0sZ2V0QmFzZVR5cGU6ZnVuY3Rpb24oKXtyZXR1cm5bXCJiaW5hcnlcIix0aGlzLmxlbmd0aCx0aGlzLmJpbmFyeS50eXBlU2V0XX0scmVhZDpmdW5jdGlvbigpe3ZhciBhPWZ1bmN0aW9uKGIpe3JldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD9cInZhbHVlXCJpbiBhP2EudmFsdWU6YS52YWx1ZT1hLmJpbmFyeS5yZWFkKGEuaW5uZXJUeXBlKTpkKGEse3dhc0NoYW5nZWQ6ITAsdmFsdWU6Yn0pLnZhbHVlfTtyZXR1cm4gYVt0aGlzLm1hcmtlcl09ITAsZChhLHtiaW5hcnk6ZCh0aGlzLmJhc2VSZWFkKCkse2NvbnRleHRzOnRoaXMuYmluYXJ5LmNvbnRleHRzLnNsaWNlKCl9KSxpbm5lclR5cGU6dGhpcy5pbm5lclR5cGV9KX0sd3JpdGU6ZnVuY3Rpb24oYSl7YS53YXNDaGFuZ2VkfHwhYVt0aGlzLm1hcmtlcl0/dGhpcy5iaW5hcnkud3JpdGUodGhpcy5pbm5lclR5cGUsYSgpKTp0aGlzLmJhc2VXcml0ZShhLmJpbmFyeSl9fSksby5vYmplY3Q9aSh7cGFyYW1zOltcInN0cnVjdHVyZVwiLFwicHJvdG9cIl0scmVzb2x2ZTpmdW5jdGlvbihhKXt2YXIgYj17fTtmb3IodmFyIGQgaW4gdGhpcy5zdHJ1Y3R1cmUpYltkXT1jKHRoaXMuc3RydWN0dXJlW2RdLEZ1bmN0aW9uKT90aGlzLnN0cnVjdHVyZVtkXTphKHRoaXMuc3RydWN0dXJlW2RdKTt0aGlzLnN0cnVjdHVyZT1ifSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPXRoaXMuc3RydWN0dXJlLGQ9dGhpcy5wcm90bz9lKHRoaXMucHJvdG8pOnt9O3JldHVybiB0aGlzLmJpbmFyeS5pbkNvbnRleHQoZCxmdW5jdGlvbigpe2Zvcih2YXIgZSBpbiBiKXRoaXMuX25hbWVkKGZ1bmN0aW9uKCl7dmFyIGY9YyhiW2VdLEZ1bmN0aW9uKT9iW2VdLmNhbGwoYSxkKTp0aGlzLnJlYWQoYltlXSk7dm9pZCAwIT09ZiYmKGRbZV09Zil9LGUpLmNhbGwodGhpcyl9KSxkfSx3cml0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGQ9dGhpcy5zdHJ1Y3R1cmU7dGhpcy5iaW5hcnkuaW5Db250ZXh0KGEsZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gZCl0aGlzLl9uYW1lZChmdW5jdGlvbigpe2MoZFtlXSxGdW5jdGlvbik/YVtlXT1kW2VdLmNhbGwoYixhKTp0aGlzLndyaXRlKGRbZV0sYVtlXSl9LGUpLmNhbGwodGhpcyl9KX19KSxvLnNraXA9aSh7cGFyYW1zOltcImxlbmd0aFwiXSxyZWFkOmZ1bmN0aW9uKCl7dGhpcy52aWV3LnNraXAodGhpcy50b1ZhbHVlKHRoaXMubGVuZ3RoKSl9LHdyaXRlOmZ1bmN0aW9uKCl7dGhpcy5yZWFkKCl9fSksby5zdHJpbmc9aih7cGFyYW1zOltcImxlbmd0aFwiLFwiZW5jb2RpbmdcIl0scmVhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcuZ2V0U3RyaW5nKHRoaXMudG9WYWx1ZSh0aGlzLmxlbmd0aCksdm9pZCAwLHRoaXMuZW5jb2RpbmcpfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLnZpZXcud3JpdGVTdHJpbmcoYSx0aGlzLmVuY29kaW5nKX19KSxvLnN0cmluZzA9aSh7cGFyYW1zOltcImxlbmd0aFwiLFwiZW5jb2RpbmdcIl0scmVhZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMudmlldyxiPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWIpe3ZhciBjLGQ9YS50ZWxsKCksZT0wO2ZvcihiPWEuYnl0ZUxlbmd0aC1kO2I+ZSYmKGM9YS5nZXRVaW50OCgpKTspZSsrO3ZhciBmPWEuZ2V0U3RyaW5nKGUsZCx0aGlzLmVuY29kaW5nKTtyZXR1cm4gYj5lJiZhLnNraXAoMSksZn1yZXR1cm4gYS5nZXRTdHJpbmcoYix2b2lkIDAsdGhpcy5lbmNvZGluZykucmVwbGFjZSgvXFwwLiokLyxcIlwiKX0sd3JpdGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy52aWV3LGM9dm9pZCAwPT09dGhpcy5sZW5ndGg/MTp0aGlzLmxlbmd0aC1hLmxlbmd0aDtiLndyaXRlU3RyaW5nKGEsdm9pZCAwLHRoaXMuZW5jb2RpbmcpLGM+MCYmKGIud3JpdGVVaW50OCgwKSxiLnNraXAoYy0xKSl9fSk7aC5sb2FkRGF0YT1nKGZ1bmN0aW9uKGIsZCl7dmFyIGU7aWYoYyhiLGEuQmxvYikpe3ZhciBmO2lmKFwiRmlsZVJlYWRlclwiaW4gYSlmPW5ldyBGaWxlUmVhZGVyLGYub25sb2FkPWYub25lcnJvcj1mdW5jdGlvbigpe2QodGhpcy5lcnJvcix0aGlzLnJlc3VsdCl9LGYucmVhZEFzQXJyYXlCdWZmZXIoYik7ZWxzZXtmPW5ldyBGaWxlUmVhZGVyU3luYzt2YXIgZyxoO3RyeXtoPWYucmVhZEFzQXJyYXlCdWZmZXIoYil9Y2F0Y2goaSl7Zz1pfWZpbmFsbHl7ZChnLGgpfX19ZWxzZXtpZihcInN0cmluZ1wiIT10eXBlb2YgYilkKG5ldyBUeXBlRXJyb3IoXCJVbnN1cHBvcnRlZCBzb3VyY2UgdHlwZS5cIikpO2Vsc2UgaWYoZT1iLm1hdGNoKC9eZGF0YTooLis/KSg7YmFzZTY0KT8sKC4qKSQvKSl0cnl7dmFyIGo9ZVsyXSxrPWVbM107ZChudWxsLChqP2F0b2I6ZGVjb2RlVVJJQ29tcG9uZW50KShrKSl9Y2F0Y2goaSl7ZChpKX1lbHNlIGlmKFwiWE1MSHR0cFJlcXVlc3RcImluIGEpe3ZhciBsPW5ldyBYTUxIdHRwUmVxdWVzdDtsLm9wZW4oXCJHRVRcIixiLCEwKSxcInJlc3BvbnNlVHlwZVwiaW4gbD9sLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCI6XCJvdmVycmlkZU1pbWVUeXBlXCJpbiBsP2wub3ZlcnJpZGVNaW1lVHlwZShcInRleHQvcGxhaW47IGNoYXJzZXQ9eC11c2VyLWRlZmluZWRcIik6bC5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0LUNoYXJzZXRcIixcIngtdXNlci1kZWZpbmVkXCIpLFwib25sb2FkXCJpbiBsfHwobC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09dGhpcy5yZWFkeVN0YXRlJiZ0aGlzLm9ubG9hZCgpfSk7dmFyIG09ZnVuY3Rpb24oYSl7ZChuZXcgRXJyb3IoYSkpfTtsLm9ubG9hZD1mdW5jdGlvbigpe3JldHVybiAwIT09dGhpcy5zdGF0dXMmJjIwMCE9PXRoaXMuc3RhdHVzP20oXCJIVFRQIEVycm9yICNcIit0aGlzLnN0YXR1cytcIjogXCIrdGhpcy5zdGF0dXNUZXh0KTooXCJyZXNwb25zZVwiaW4gdGhpc3x8KHRoaXMucmVzcG9uc2U9bmV3IFZCQXJyYXkodGhpcy5yZXNwb25zZUJvZHkpLnRvQXJyYXkoKSksdm9pZCBkKG51bGwsdGhpcy5yZXNwb25zZSkpfSxsLm9uZXJyb3I9ZnVuY3Rpb24oKXttKFwiTmV0d29yayBlcnJvci5cIil9LGwuc2VuZChudWxsKX1lbHNlIGQobmV3IFR5cGVFcnJvcihcIlVuc3VwcG9ydGVkIHNvdXJjZSB0eXBlLlwiKSl9fSksaC5sb2FkPWcoZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWgubG9hZERhdGEoYSk7aC5sb2FkLmdldFR5cGVTZXQoYSxiLGZ1bmN0aW9uKGEpe2QudGhlbihmdW5jdGlvbihiKXtjKG51bGwsbmV3IGgoYixhKSl9LGMpfSl9KSxoLmxvYWQuZ2V0VHlwZVNldD1mdW5jdGlvbihhLGIsYyl7YyhiKX0sbi5fdG9VUkk9XCJVUkxcImluIGEmJlwiY3JlYXRlT2JqZWN0VVJMXCJpbiBVUkw/ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zZWVrKDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3LmdldEJ5dGVzKCl9KTtyZXR1cm4gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbYl0se3R5cGU6YX0pKX06ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zZWVrKDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3LmdldFN0cmluZyh2b2lkIDAsdm9pZCAwLFwiYmluYXJ5XCIpfSk7cmV0dXJuXCJkYXRhOlwiK2ErXCI7YmFzZTY0LFwiK2J0b2EoYil9LG4uX21pbWVUeXBlPWZ1bmN0aW9uKGEpe3JldHVybiBhfHx0aGlzLnR5cGVTZXRbXCJqQmluYXJ5Lm1pbWVUeXBlXCJdfHxcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwifSxuLnRvVVJJPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl90b1VSSSh0aGlzLl9taW1lVHlwZShhKSl9O2lmKGspe3ZhciB0PWguZG93bmxvYWRlcj1rLmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3Quc3R5bGUuZGlzcGxheT1cIm5vbmVcIn1yZXR1cm4gbi5zYXZlQXM9ZyhmdW5jdGlvbihhLGIsYyl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe1wibXNTYXZlQmxvYlwiaW4gbmF2aWdhdG9yP25hdmlnYXRvci5tc1NhdmVCbG9iKG5ldyBCbG9iKFt0aGlzLnJlYWQoXCJibG9iXCIsMCldLHt0eXBlOnRoaXMuX21pbWVUeXBlKGIpfSksYSk6az8odC5wYXJlbnROb2RlfHxrLmJvZHkuYXBwZW5kQ2hpbGQodCksdC5ocmVmPXRoaXMudG9VUkkoYiksdC5kb3dubG9hZD1hLHQuY2xpY2soKSx0LmhyZWY9dC5kb3dubG9hZD1cIlwiKTpjKG5ldyBUeXBlRXJyb3IoXCJTYXZpbmcgZnJvbSBXZWIgV29ya2VyIGlzIG5vdCBzdXBwb3J0ZWQuXCIpKSxjKCl9ZWxzZSBjKG5ldyBUeXBlRXJyb3IoXCJVbnN1cHBvcnRlZCBzdG9yYWdlIHR5cGUuXCIpKX0pLGh9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWpiaW5hcnkuanMubWFwIiwiIWZ1bmN0aW9uKGZhY3RvcnkpIHtcbiAgICB2YXIgZ2xvYmFsID0gdGhpcztcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoZ2xvYmFsKTtcbn0oZnVuY3Rpb24oZ2xvYmFsKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gaXMob2JqLCBDdG9yKSB7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiICE9IHR5cGVvZiBvYmogfHwgbnVsbCA9PT0gb2JqID8gITEgOiBvYmouY29uc3RydWN0b3IgPT09IEN0b3IgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09IFwiW29iamVjdCBcIiArIEN0b3IubmFtZSArIFwiXVwiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhcnJheUZyb20oYXJyYXlMaWtlLCBmb3JjZUNvcHkpIHtcbiAgICAgICAgcmV0dXJuICFmb3JjZUNvcHkgJiYgaXMoYXJyYXlMaWtlLCBBcnJheSkgPyBhcnJheUxpa2UgOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnJheUxpa2UpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZWZpbmVkKHZhbHVlLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdmFsdWUgPyB2YWx1ZSA6IGRlZmF1bHRWYWx1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gakRhdGFWaWV3KGJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgIGlmIChqRGF0YVZpZXcuaXMoYnVmZmVyKSkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGJ1ZmZlci5zbGljZShieXRlT2Zmc2V0LCBieXRlT2Zmc2V0ICsgYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0Ll9saXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgcmVzdWx0Ll9saXR0bGVFbmRpYW4pLCByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFqRGF0YVZpZXcuaXModGhpcykpIHJldHVybiBuZXcgakRhdGFWaWV3KGJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyID0gYnVmZmVyID0gakRhdGFWaWV3LndyYXBCdWZmZXIoYnVmZmVyKSwgdGhpcy5faXNBcnJheUJ1ZmZlciA9IGNvbXBhdGliaWxpdHkuQXJyYXlCdWZmZXIgJiYgaXMoYnVmZmVyLCBBcnJheUJ1ZmZlciksIFxuICAgICAgICB0aGlzLl9pc1BpeGVsRGF0YSA9ICExLCB0aGlzLl9pc0RhdGFWaWV3ID0gY29tcGF0aWJpbGl0eS5EYXRhVmlldyAmJiB0aGlzLl9pc0FycmF5QnVmZmVyLCBcbiAgICAgICAgdGhpcy5faXNOb2RlQnVmZmVyID0gITAgJiYgY29tcGF0aWJpbGl0eS5Ob2RlQnVmZmVyICYmIGlzKGJ1ZmZlciwgQnVmZmVyKSwgIXRoaXMuX2lzTm9kZUJ1ZmZlciAmJiAhdGhpcy5faXNBcnJheUJ1ZmZlciAmJiAhaXMoYnVmZmVyLCBBcnJheSkpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJqRGF0YVZpZXcgYnVmZmVyIGhhcyBhbiBpbmNvbXBhdGlibGUgdHlwZVwiKTtcbiAgICAgICAgdGhpcy5fbGl0dGxlRW5kaWFuID0gISFsaXR0bGVFbmRpYW47XG4gICAgICAgIHZhciBidWZmZXJMZW5ndGggPSBcImJ5dGVMZW5ndGhcIiBpbiBidWZmZXIgPyBidWZmZXIuYnl0ZUxlbmd0aCA6IGJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIHRoaXMuYnl0ZU9mZnNldCA9IGJ5dGVPZmZzZXQgPSBkZWZpbmVkKGJ5dGVPZmZzZXQsIDApLCB0aGlzLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID0gZGVmaW5lZChieXRlTGVuZ3RoLCBidWZmZXJMZW5ndGggLSBieXRlT2Zmc2V0KSwgXG4gICAgICAgIHRoaXMuX29mZnNldCA9IHRoaXMuX2JpdE9mZnNldCA9IDAsIHRoaXMuX2lzRGF0YVZpZXcgPyB0aGlzLl92aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCkgOiB0aGlzLl9jaGVja0JvdW5kcyhieXRlT2Zmc2V0LCBieXRlTGVuZ3RoLCBidWZmZXJMZW5ndGgpLCBcbiAgICAgICAgdGhpcy5fZW5naW5lQWN0aW9uID0gdGhpcy5faXNEYXRhVmlldyA/IHRoaXMuX2RhdGFWaWV3QWN0aW9uIDogdGhpcy5faXNOb2RlQnVmZmVyID8gdGhpcy5fbm9kZUJ1ZmZlckFjdGlvbiA6IHRoaXMuX2lzQXJyYXlCdWZmZXIgPyB0aGlzLl9hcnJheUJ1ZmZlckFjdGlvbiA6IHRoaXMuX2FycmF5QWN0aW9uO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRDaGFyQ29kZXMoc3RyaW5nKSB7XG4gICAgICAgIGlmIChjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIpIHJldHVybiBuZXcgQnVmZmVyKHN0cmluZywgXCJiaW5hcnlcIik7XG4gICAgICAgIGZvciAodmFyIFR5cGUgPSBjb21wYXRpYmlsaXR5LkFycmF5QnVmZmVyID8gVWludDhBcnJheSA6IEFycmF5LCBjb2RlcyA9IG5ldyBUeXBlKHN0cmluZy5sZW5ndGgpLCBpID0gMCwgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aDsgbGVuZ3RoID4gaTsgaSsrKSBjb2Rlc1tpXSA9IDI1NSAmIHN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgICAgICByZXR1cm4gY29kZXM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBvdzIobikge1xuICAgICAgICByZXR1cm4gbiA+PSAwICYmIDMxID4gbiA/IDEgPDwgbiA6IHBvdzJbbl0gfHwgKHBvdzJbbl0gPSBNYXRoLnBvdygyLCBuKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFVpbnQ2NChsbywgaGkpIHtcbiAgICAgICAgdGhpcy5sbyA9IGxvLCB0aGlzLmhpID0gaGk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEludDY0KCkge1xuICAgICAgICBVaW50NjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgdmFyIGNvbXBhdGliaWxpdHkgPSB7XG4gICAgICAgIE5vZGVCdWZmZXI6ICEwICYmIFwiQnVmZmVyXCIgaW4gZ2xvYmFsLFxuICAgICAgICBEYXRhVmlldzogXCJEYXRhVmlld1wiIGluIGdsb2JhbCxcbiAgICAgICAgQXJyYXlCdWZmZXI6IFwiQXJyYXlCdWZmZXJcIiBpbiBnbG9iYWwsXG4gICAgICAgIFBpeGVsRGF0YTogITFcbiAgICB9LCBUZXh0RW5jb2RlciA9IGdsb2JhbC5UZXh0RW5jb2RlciwgVGV4dERlY29kZXIgPSBnbG9iYWwuVGV4dERlY29kZXI7XG4gICAgY29tcGF0aWJpbGl0eS5Ob2RlQnVmZmVyICYmICFmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGJ1ZmZlci53cml0ZUZsb2F0TEUoMS8wLCAwKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29tcGF0aWJpbGl0eS5Ob2RlQnVmZmVyID0gITE7XG4gICAgICAgIH1cbiAgICB9KG5ldyBCdWZmZXIoNCkpO1xuICAgIHZhciBkYXRhVHlwZXMgPSB7XG4gICAgICAgIEludDg6IDEsXG4gICAgICAgIEludDE2OiAyLFxuICAgICAgICBJbnQzMjogNCxcbiAgICAgICAgVWludDg6IDEsXG4gICAgICAgIFVpbnQxNjogMixcbiAgICAgICAgVWludDMyOiA0LFxuICAgICAgICBGbG9hdDMyOiA0LFxuICAgICAgICBGbG9hdDY0OiA4XG4gICAgfTtcbiAgICBqRGF0YVZpZXcud3JhcEJ1ZmZlciA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiBidWZmZXIpIHtcbiAgICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICBpZiAoY29tcGF0aWJpbGl0eS5Ob2RlQnVmZmVyKSBidWZmZXIgPSBuZXcgQnVmZmVyKGJ1ZmZlciksIGJ1ZmZlci5maWxsKDApOyBlbHNlIGlmIChjb21wYXRpYmlsaXR5LkFycmF5QnVmZmVyKSBidWZmZXIgPSBuZXcgVWludDhBcnJheShidWZmZXIpLmJ1ZmZlcjsgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyID0gbmV3IEFycmF5KGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspIGJ1ZmZlcltpXSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyO1xuXG4gICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgYnVmZmVyID0gZ2V0Q2hhckNvZGVzKGJ1ZmZlcik7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwibGVuZ3RoXCIgaW4gYnVmZmVyICYmICEoY29tcGF0aWJpbGl0eS5Ob2RlQnVmZmVyICYmIGlzKGJ1ZmZlciwgQnVmZmVyKSB8fCBjb21wYXRpYmlsaXR5LkFycmF5QnVmZmVyICYmIGlzKGJ1ZmZlciwgQXJyYXlCdWZmZXIpKSAmJiAoY29tcGF0aWJpbGl0eS5Ob2RlQnVmZmVyID8gYnVmZmVyID0gbmV3IEJ1ZmZlcihidWZmZXIpIDogY29tcGF0aWJpbGl0eS5BcnJheUJ1ZmZlciA/IGlzKGJ1ZmZlciwgQXJyYXlCdWZmZXIpIHx8IChidWZmZXIgPSBuZXcgVWludDhBcnJheShidWZmZXIpLmJ1ZmZlciwgXG4gICAgICAgICAgICBpcyhidWZmZXIsIEFycmF5QnVmZmVyKSB8fCAoYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlGcm9tKGJ1ZmZlciwgITApKS5idWZmZXIpKSA6IGJ1ZmZlciA9IGFycmF5RnJvbShidWZmZXIpKSwgXG4gICAgICAgICAgICBidWZmZXI7XG4gICAgICAgIH1cbiAgICB9LCBqRGF0YVZpZXcuaXMgPSBmdW5jdGlvbih2aWV3KSB7XG4gICAgICAgIHJldHVybiB2aWV3ICYmIHZpZXcuakRhdGFWaWV3O1xuICAgIH0sIGpEYXRhVmlldy5mcm9tID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgakRhdGFWaWV3KGFyZ3VtZW50cyk7XG4gICAgfSwgakRhdGFWaWV3LlVpbnQ2NCA9IFVpbnQ2NCwgVWludDY0LnByb3RvdHlwZSA9IHtcbiAgICAgICAgdmFsdWVPZjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sbyArIHBvdzIoMzIpICogdGhpcy5oaTtcbiAgICAgICAgfSxcbiAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIE51bWJlci5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkodGhpcy52YWx1ZU9mKCksIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICB9LCBVaW50NjQuZnJvbU51bWJlciA9IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICB2YXIgaGkgPSBNYXRoLmZsb29yKG51bWJlciAvIHBvdzIoMzIpKSwgbG8gPSBudW1iZXIgLSBoaSAqIHBvdzIoMzIpO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ2NChsbywgaGkpO1xuICAgIH0sIGpEYXRhVmlldy5JbnQ2NCA9IEludDY0LCBJbnQ2NC5wcm90b3R5cGUgPSBcImNyZWF0ZVwiIGluIE9iamVjdCA/IE9iamVjdC5jcmVhdGUoVWludDY0LnByb3RvdHlwZSkgOiBuZXcgVWludDY0KCksIFxuICAgIEludDY0LnByb3RvdHlwZS52YWx1ZU9mID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpIDwgcG93MigzMSkgPyBVaW50NjQucHJvdG90eXBlLnZhbHVlT2YuYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IC0ocG93MigzMikgLSB0aGlzLmxvICsgcG93MigzMikgKiAocG93MigzMikgLSAxIC0gdGhpcy5oaSkpO1xuICAgIH0sIEludDY0LmZyb21OdW1iZXIgPSBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgdmFyIGxvLCBoaTtcbiAgICAgICAgaWYgKG51bWJlciA+PSAwKSB7XG4gICAgICAgICAgICB2YXIgdW5zaWduZWQgPSBVaW50NjQuZnJvbU51bWJlcihudW1iZXIpO1xuICAgICAgICAgICAgbG8gPSB1bnNpZ25lZC5sbywgaGkgPSB1bnNpZ25lZC5oaTtcbiAgICAgICAgfSBlbHNlIGhpID0gTWF0aC5mbG9vcihudW1iZXIgLyBwb3cyKDMyKSksIGxvID0gbnVtYmVyIC0gaGkgKiBwb3cyKDMyKSwgaGkgKz0gcG93MigzMik7XG4gICAgICAgIHJldHVybiBuZXcgSW50NjQobG8sIGhpKTtcbiAgICB9O1xuICAgIHZhciBwcm90byA9IGpEYXRhVmlldy5wcm90b3R5cGUgPSB7XG4gICAgICAgIGNvbXBhdGliaWxpdHk6IGNvbXBhdGliaWxpdHksXG4gICAgICAgIGpEYXRhVmlldzogITAsXG4gICAgICAgIF9jaGVja0JvdW5kczogZnVuY3Rpb24oYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4TGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoXCJudW1iZXJcIiAhPSB0eXBlb2YgYnl0ZU9mZnNldCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9mZnNldCBpcyBub3QgYSBudW1iZXIuXCIpO1xuICAgICAgICAgICAgaWYgKFwibnVtYmVyXCIgIT0gdHlwZW9mIGJ5dGVMZW5ndGgpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTaXplIGlzIG5vdCBhIG51bWJlci5cIik7XG4gICAgICAgICAgICBpZiAoMCA+IGJ5dGVMZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKFwiTGVuZ3RoIGlzIG5lZ2F0aXZlLlwiKTtcbiAgICAgICAgICAgIGlmICgwID4gYnl0ZU9mZnNldCB8fCBieXRlT2Zmc2V0ICsgYnl0ZUxlbmd0aCA+IGRlZmluZWQobWF4TGVuZ3RoLCB0aGlzLmJ5dGVMZW5ndGgpKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk9mZnNldHMgYXJlIG91dCBvZiBib3VuZHMuXCIpO1xuICAgICAgICB9LFxuICAgICAgICBfYWN0aW9uOiBmdW5jdGlvbih0eXBlLCBpc1JlYWRBY3Rpb24sIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmVBY3Rpb24odHlwZSwgaXNSZWFkQWN0aW9uLCBkZWZpbmVkKGJ5dGVPZmZzZXQsIHRoaXMuX29mZnNldCksIGRlZmluZWQobGl0dGxlRW5kaWFuLCB0aGlzLl9saXR0bGVFbmRpYW4pLCB2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIF9kYXRhVmlld0FjdGlvbjogZnVuY3Rpb24odHlwZSwgaXNSZWFkQWN0aW9uLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4sIHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIGRhdGFUeXBlc1t0eXBlXSwgaXNSZWFkQWN0aW9uID8gdGhpcy5fdmlld1tcImdldFwiICsgdHlwZV0oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSA6IHRoaXMuX3ZpZXdbXCJzZXRcIiArIHR5cGVdKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBfYXJyYXlCdWZmZXJBY3Rpb246IGZ1bmN0aW9uKHR5cGUsIGlzUmVhZEFjdGlvbiwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHR5cGVkQXJyYXksIHNpemUgPSBkYXRhVHlwZXNbdHlwZV0sIFR5cGVkQXJyYXkgPSBnbG9iYWxbdHlwZSArIFwiQXJyYXlcIl07XG4gICAgICAgICAgICBpZiAobGl0dGxlRW5kaWFuID0gZGVmaW5lZChsaXR0bGVFbmRpYW4sIHRoaXMuX2xpdHRsZUVuZGlhbiksIDEgPT09IHNpemUgfHwgKHRoaXMuYnl0ZU9mZnNldCArIGJ5dGVPZmZzZXQpICUgc2l6ZSA9PT0gMCAmJiBsaXR0bGVFbmRpYW4pIHJldHVybiB0eXBlZEFycmF5ID0gbmV3IFR5cGVkQXJyYXkodGhpcy5idWZmZXIsIHRoaXMuYnl0ZU9mZnNldCArIGJ5dGVPZmZzZXQsIDEpLCBcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgKyBzaXplLCBpc1JlYWRBY3Rpb24gPyB0eXBlZEFycmF5WzBdIDogdHlwZWRBcnJheVswXSA9IHZhbHVlO1xuICAgICAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoaXNSZWFkQWN0aW9uID8gdGhpcy5nZXRCeXRlcyhzaXplLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4sICEwKSA6IHNpemUpO1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVkQXJyYXkgPSBuZXcgVHlwZWRBcnJheShieXRlcy5idWZmZXIsIDAsIDEpLCBpc1JlYWRBY3Rpb24gPyB0eXBlZEFycmF5WzBdIDogKHR5cGVkQXJyYXlbMF0gPSB2YWx1ZSwgXG4gICAgICAgICAgICB2b2lkIHRoaXMuX3NldEJ5dGVzKGJ5dGVPZmZzZXQsIGJ5dGVzLCBsaXR0bGVFbmRpYW4pKTtcbiAgICAgICAgfSxcbiAgICAgICAgX2FycmF5QWN0aW9uOiBmdW5jdGlvbih0eXBlLCBpc1JlYWRBY3Rpb24sIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBpc1JlYWRBY3Rpb24gPyB0aGlzW1wiX2dldFwiICsgdHlwZV0oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSA6IHRoaXNbXCJfc2V0XCIgKyB0eXBlXShieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldEJ5dGVzOiBmdW5jdGlvbihsZW5ndGgsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgbGl0dGxlRW5kaWFuID0gZGVmaW5lZChsaXR0bGVFbmRpYW4sIHRoaXMuX2xpdHRsZUVuZGlhbiksIGJ5dGVPZmZzZXQgPSBkZWZpbmVkKGJ5dGVPZmZzZXQsIHRoaXMuX29mZnNldCksIFxuICAgICAgICAgICAgbGVuZ3RoID0gZGVmaW5lZChsZW5ndGgsIHRoaXMuYnl0ZUxlbmd0aCAtIGJ5dGVPZmZzZXQpLCB0aGlzLl9jaGVja0JvdW5kcyhieXRlT2Zmc2V0LCBsZW5ndGgpLCBcbiAgICAgICAgICAgIGJ5dGVPZmZzZXQgKz0gdGhpcy5ieXRlT2Zmc2V0LCB0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0IC0gdGhpcy5ieXRlT2Zmc2V0ICsgbGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2lzQXJyYXlCdWZmZXIgPyBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlciwgYnl0ZU9mZnNldCwgbGVuZ3RoKSA6ICh0aGlzLmJ1ZmZlci5zbGljZSB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UpLmNhbGwodGhpcy5idWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVPZmZzZXQgKyBsZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdHRsZUVuZGlhbiB8fCAxID49IGxlbmd0aCA/IHJlc3VsdCA6IGFycmF5RnJvbShyZXN1bHQpLnJldmVyc2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Qnl0ZXM6IGZ1bmN0aW9uKGxlbmd0aCwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuLCB0b0FycmF5KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fZ2V0Qnl0ZXMobGVuZ3RoLCBieXRlT2Zmc2V0LCBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgITApKTtcbiAgICAgICAgICAgIHJldHVybiB0b0FycmF5ID8gYXJyYXlGcm9tKHJlc3VsdCkgOiByZXN1bHQ7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRCeXRlczogZnVuY3Rpb24oYnl0ZU9mZnNldCwgYnl0ZXMsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICgwICE9PSBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAobGl0dGxlRW5kaWFuID0gZGVmaW5lZChsaXR0bGVFbmRpYW4sIHRoaXMuX2xpdHRsZUVuZGlhbiksIGJ5dGVPZmZzZXQgPSBkZWZpbmVkKGJ5dGVPZmZzZXQsIHRoaXMuX29mZnNldCksIFxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrQm91bmRzKGJ5dGVPZmZzZXQsIGxlbmd0aCksICFsaXR0bGVFbmRpYW4gJiYgbGVuZ3RoID4gMSAmJiAoYnl0ZXMgPSBhcnJheUZyb20oYnl0ZXMsICEwKS5yZXZlcnNlKCkpLCBcbiAgICAgICAgICAgICAgICBieXRlT2Zmc2V0ICs9IHRoaXMuYnl0ZU9mZnNldCwgdGhpcy5faXNBcnJheUJ1ZmZlcikgbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIsIGJ5dGVPZmZzZXQsIGxlbmd0aCkuc2V0KGJ5dGVzKTsgZWxzZSBpZiAodGhpcy5faXNOb2RlQnVmZmVyKSBuZXcgQnVmZmVyKGJ5dGVzKS5jb3B5KHRoaXMuYnVmZmVyLCBieXRlT2Zmc2V0KTsgZWxzZSBmb3IgKHZhciBpID0gMDsgbGVuZ3RoID4gaTsgaSsrKSB0aGlzLmJ1ZmZlcltieXRlT2Zmc2V0ICsgaV0gPSBieXRlc1tpXTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0IC0gdGhpcy5ieXRlT2Zmc2V0ICsgbGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzZXRCeXRlczogZnVuY3Rpb24oYnl0ZU9mZnNldCwgYnl0ZXMsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgYnl0ZXMsIGRlZmluZWQobGl0dGxlRW5kaWFuLCAhMCkpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRTdHJpbmc6IGZ1bmN0aW9uKGJ5dGVMZW5ndGgsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faXNOb2RlQnVmZmVyKSByZXR1cm4gYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSwgYnl0ZUxlbmd0aCA9IGRlZmluZWQoYnl0ZUxlbmd0aCwgdGhpcy5ieXRlTGVuZ3RoIC0gYnl0ZU9mZnNldCksIFxuICAgICAgICAgICAgdGhpcy5fY2hlY2tCb3VuZHMoYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCksIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgKyBieXRlTGVuZ3RoLCBcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnRvU3RyaW5nKGVuY29kaW5nIHx8IFwiYmluYXJ5XCIsIHRoaXMuYnl0ZU9mZnNldCArIGJ5dGVPZmZzZXQsIHRoaXMuYnl0ZU9mZnNldCArIHRoaXMuX29mZnNldCk7XG4gICAgICAgICAgICB2YXIgYnl0ZXMgPSB0aGlzLl9nZXRCeXRlcyhieXRlTGVuZ3RoLCBieXRlT2Zmc2V0LCAhMCk7XG4gICAgICAgICAgICBpZiAoZW5jb2RpbmcgPSBcInV0ZjhcIiA9PT0gZW5jb2RpbmcgPyBcInV0Zi04XCIgOiBlbmNvZGluZyB8fCBcImJpbmFyeVwiLCBUZXh0RGVjb2RlciAmJiBcImJpbmFyeVwiICE9PSBlbmNvZGluZykgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcihlbmNvZGluZykuZGVjb2RlKHRoaXMuX2lzQXJyYXlCdWZmZXIgPyBieXRlcyA6IG5ldyBVaW50OEFycmF5KGJ5dGVzKSk7XG4gICAgICAgICAgICB2YXIgc3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgIGJ5dGVMZW5ndGggPSBieXRlcy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgYnl0ZUxlbmd0aCA+IGk7IGkrKykgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0pO1xuICAgICAgICAgICAgcmV0dXJuIFwidXRmLThcIiA9PT0gZW5jb2RpbmcgJiYgKHN0cmluZyA9IGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoc3RyaW5nKSkpLCBzdHJpbmc7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFN0cmluZzogZnVuY3Rpb24oYnl0ZU9mZnNldCwgc3ViU3RyaW5nLCBlbmNvZGluZykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzTm9kZUJ1ZmZlcikgcmV0dXJuIGJ5dGVPZmZzZXQgPSBkZWZpbmVkKGJ5dGVPZmZzZXQsIHRoaXMuX29mZnNldCksIHRoaXMuX2NoZWNrQm91bmRzKGJ5dGVPZmZzZXQsIHN1YlN0cmluZy5sZW5ndGgpLCBcbiAgICAgICAgICAgIHZvaWQgKHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgKyB0aGlzLmJ1ZmZlci53cml0ZShzdWJTdHJpbmcsIHRoaXMuYnl0ZU9mZnNldCArIGJ5dGVPZmZzZXQsIGVuY29kaW5nIHx8IFwiYmluYXJ5XCIpKTtcbiAgICAgICAgICAgIGVuY29kaW5nID0gXCJ1dGY4XCIgPT09IGVuY29kaW5nID8gXCJ1dGYtOFwiIDogZW5jb2RpbmcgfHwgXCJiaW5hcnlcIjtcbiAgICAgICAgICAgIHZhciBieXRlcztcbiAgICAgICAgICAgIFRleHRFbmNvZGVyICYmIFwiYmluYXJ5XCIgIT09IGVuY29kaW5nID8gYnl0ZXMgPSBuZXcgVGV4dEVuY29kZXIoZW5jb2RpbmcpLmVuY29kZShzdWJTdHJpbmcpIDogKFwidXRmLThcIiA9PT0gZW5jb2RpbmcgJiYgKHN1YlN0cmluZyA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChzdWJTdHJpbmcpKSksIFxuICAgICAgICAgICAgYnl0ZXMgPSBnZXRDaGFyQ29kZXMoc3ViU3RyaW5nKSksIHRoaXMuX3NldEJ5dGVzKGJ5dGVPZmZzZXQsIGJ5dGVzLCAhMCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldENoYXI6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN0cmluZygxLCBieXRlT2Zmc2V0KTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0Q2hhcjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgY2hhcmFjdGVyKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0cmluZyhieXRlT2Zmc2V0LCBjaGFyYWN0ZXIpO1xuICAgICAgICB9LFxuICAgICAgICB0ZWxsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vZmZzZXQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNlZWs6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja0JvdW5kcyhieXRlT2Zmc2V0LCAwKSwgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldDtcbiAgICAgICAgfSxcbiAgICAgICAgc2tpcDogZnVuY3Rpb24oYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2Vlayh0aGlzLl9vZmZzZXQgKyBieXRlTGVuZ3RoKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2xpY2U6IGZ1bmN0aW9uKHN0YXJ0LCBlbmQsIGZvcmNlQ29weSkge1xuICAgICAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwID4gb2Zmc2V0ID8gb2Zmc2V0ICsgYnl0ZUxlbmd0aCA6IG9mZnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGFydCA9IG5vcm1hbGl6ZU9mZnNldChzdGFydCwgdGhpcy5ieXRlTGVuZ3RoKSwgZW5kID0gbm9ybWFsaXplT2Zmc2V0KGRlZmluZWQoZW5kLCB0aGlzLmJ5dGVMZW5ndGgpLCB0aGlzLmJ5dGVMZW5ndGgpLCBcbiAgICAgICAgICAgIGZvcmNlQ29weSA/IG5ldyBqRGF0YVZpZXcodGhpcy5nZXRCeXRlcyhlbmQgLSBzdGFydCwgc3RhcnQsICEwLCAhMCksIHZvaWQgMCwgdm9pZCAwLCB0aGlzLl9saXR0bGVFbmRpYW4pIDogbmV3IGpEYXRhVmlldyh0aGlzLmJ1ZmZlciwgdGhpcy5ieXRlT2Zmc2V0ICsgc3RhcnQsIGVuZCAtIHN0YXJ0LCB0aGlzLl9saXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBhbGlnbkJ5OiBmdW5jdGlvbihieXRlQ291bnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9iaXRPZmZzZXQgPSAwLCAxICE9PSBkZWZpbmVkKGJ5dGVDb3VudCwgMSkgPyB0aGlzLnNraXAoYnl0ZUNvdW50IC0gKHRoaXMuX29mZnNldCAlIGJ5dGVDb3VudCB8fCBieXRlQ291bnQpKSA6IHRoaXMuX29mZnNldDtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldEZsb2F0NjQ6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLl9nZXRCeXRlcyg4LCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pLCBzaWduID0gMSAtIDIgKiAoYls3XSA+PiA3KSwgZXhwb25lbnQgPSAoKGJbN10gPDwgMSAmIDI1NSkgPDwgMyB8IGJbNl0gPj4gNCkgLSAxMDIzLCBtYW50aXNzYSA9ICgxNSAmIGJbNl0pICogcG93Mig0OCkgKyBiWzVdICogcG93Mig0MCkgKyBiWzRdICogcG93MigzMikgKyBiWzNdICogcG93MigyNCkgKyBiWzJdICogcG93MigxNikgKyBiWzFdICogcG93Mig4KSArIGJbMF07XG4gICAgICAgICAgICByZXR1cm4gMTAyNCA9PT0gZXhwb25lbnQgPyAwICE9PSBtYW50aXNzYSA/IDAvMCA6IDEvMCAqIHNpZ24gOiAtMTAyMyA9PT0gZXhwb25lbnQgPyBzaWduICogbWFudGlzc2EgKiBwb3cyKC0xMDc0KSA6IHNpZ24gKiAoMSArIG1hbnRpc3NhICogcG93MigtNTIpKSAqIHBvdzIoZXhwb25lbnQpO1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0RmxvYXQzMjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuX2dldEJ5dGVzKDQsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiksIHNpZ24gPSAxIC0gMiAqIChiWzNdID4+IDcpLCBleHBvbmVudCA9IChiWzNdIDw8IDEgJiAyNTUgfCBiWzJdID4+IDcpIC0gMTI3LCBtYW50aXNzYSA9ICgxMjcgJiBiWzJdKSA8PCAxNiB8IGJbMV0gPDwgOCB8IGJbMF07XG4gICAgICAgICAgICByZXR1cm4gMTI4ID09PSBleHBvbmVudCA/IDAgIT09IG1hbnRpc3NhID8gMC8wIDogMS8wICogc2lnbiA6IC0xMjcgPT09IGV4cG9uZW50ID8gc2lnbiAqIG1hbnRpc3NhICogcG93MigtMTQ5KSA6IHNpZ24gKiAoMSArIG1hbnRpc3NhICogcG93MigtMjMpKSAqIHBvdzIoZXhwb25lbnQpO1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0NjQ6IGZ1bmN0aW9uKFR5cGUsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgbGl0dGxlRW5kaWFuID0gZGVmaW5lZChsaXR0bGVFbmRpYW4sIHRoaXMuX2xpdHRsZUVuZGlhbiksIGJ5dGVPZmZzZXQgPSBkZWZpbmVkKGJ5dGVPZmZzZXQsIHRoaXMuX29mZnNldCk7XG4gICAgICAgICAgICBmb3IgKHZhciBwYXJ0cyA9IGxpdHRsZUVuZGlhbiA/IFsgMCwgNCBdIDogWyA0LCAwIF0sIGkgPSAwOyAyID4gaTsgaSsrKSBwYXJ0c1tpXSA9IHRoaXMuZ2V0VWludDMyKGJ5dGVPZmZzZXQgKyBwYXJ0c1tpXSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0ICsgOCwgbmV3IFR5cGUocGFydHNbMF0sIHBhcnRzWzFdKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0SW50NjQ6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldDY0KEludDY0LCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBnZXRVaW50NjQ6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldDY0KFVpbnQ2NCwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldEludDMyOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5fZ2V0Qnl0ZXMoNCwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICAgIHJldHVybiBiWzNdIDw8IDI0IHwgYlsyXSA8PCAxNiB8IGJbMV0gPDwgOCB8IGJbMF07XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRVaW50MzI6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldEludDMyKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikgPj4+IDA7XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRJbnQxNjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VWludDE2KGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikgPDwgMTYgPj4gMTY7XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRVaW50MTY6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLl9nZXRCeXRlcygyLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgcmV0dXJuIGJbMV0gPDwgOCB8IGJbMF07XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRJbnQ4OiBmdW5jdGlvbihieXRlT2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VWludDgoYnl0ZU9mZnNldCkgPDwgMjQgPj4gMjQ7XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRVaW50ODogZnVuY3Rpb24oYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldEJ5dGVzKDEsIGJ5dGVPZmZzZXQpWzBdO1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0Qml0UmFuZ2VEYXRhOiBmdW5jdGlvbihiaXRMZW5ndGgsIGJ5dGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHZhciBzdGFydEJpdCA9IChkZWZpbmVkKGJ5dGVPZmZzZXQsIHRoaXMuX29mZnNldCkgPDwgMykgKyB0aGlzLl9iaXRPZmZzZXQsIGVuZEJpdCA9IHN0YXJ0Qml0ICsgYml0TGVuZ3RoLCBzdGFydCA9IHN0YXJ0Qml0ID4+PiAzLCBlbmQgPSBlbmRCaXQgKyA3ID4+PiAzLCBiID0gdGhpcy5fZ2V0Qnl0ZXMoZW5kIC0gc3RhcnQsIHN0YXJ0LCAhMCksIHdpZGVWYWx1ZSA9IDA7XG4gICAgICAgICAgICAodGhpcy5fYml0T2Zmc2V0ID0gNyAmIGVuZEJpdCkgJiYgKHRoaXMuX2JpdE9mZnNldCAtPSA4KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBiLmxlbmd0aDsgbGVuZ3RoID4gaTsgaSsrKSB3aWRlVmFsdWUgPSB3aWRlVmFsdWUgPDwgOCB8IGJbaV07XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgICAgICAgICBieXRlczogYixcbiAgICAgICAgICAgICAgICB3aWRlVmFsdWU6IHdpZGVWYWx1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0U2lnbmVkOiBmdW5jdGlvbihiaXRMZW5ndGgsIGJ5dGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHZhciBzaGlmdCA9IDMyIC0gYml0TGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VW5zaWduZWQoYml0TGVuZ3RoLCBieXRlT2Zmc2V0KSA8PCBzaGlmdCA+PiBzaGlmdDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VW5zaWduZWQ6IGZ1bmN0aW9uKGJpdExlbmd0aCwgYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5fZ2V0Qml0UmFuZ2VEYXRhKGJpdExlbmd0aCwgYnl0ZU9mZnNldCkud2lkZVZhbHVlID4+PiAtdGhpcy5fYml0T2Zmc2V0O1xuICAgICAgICAgICAgcmV0dXJuIDMyID4gYml0TGVuZ3RoID8gdmFsdWUgJiB+KC0xIDw8IGJpdExlbmd0aCkgOiB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldEJpbmFyeUZsb2F0OiBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgbWFudFNpemUsIGV4cFNpemUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdmFyIGV4cG9uZW50LCBtYW50aXNzYSwgc2lnbkJpdCA9IDAgPiB2YWx1ZSA/IDEgOiAwLCBlTWF4ID0gfigtMSA8PCBleHBTaXplIC0gMSksIGVNaW4gPSAxIC0gZU1heDtcbiAgICAgICAgICAgIDAgPiB2YWx1ZSAmJiAodmFsdWUgPSAtdmFsdWUpLCAwID09PSB2YWx1ZSA/IChleHBvbmVudCA9IDAsIG1hbnRpc3NhID0gMCkgOiBpc05hTih2YWx1ZSkgPyAoZXhwb25lbnQgPSAyICogZU1heCArIDEsIFxuICAgICAgICAgICAgbWFudGlzc2EgPSAxKSA6IDEvMCA9PT0gdmFsdWUgPyAoZXhwb25lbnQgPSAyICogZU1heCArIDEsIG1hbnRpc3NhID0gMCkgOiAoZXhwb25lbnQgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKSwgXG4gICAgICAgICAgICBleHBvbmVudCA+PSBlTWluICYmIGVNYXggPj0gZXhwb25lbnQgPyAobWFudGlzc2EgPSBNYXRoLmZsb29yKCh2YWx1ZSAqIHBvdzIoLWV4cG9uZW50KSAtIDEpICogcG93MihtYW50U2l6ZSkpLCBcbiAgICAgICAgICAgIGV4cG9uZW50ICs9IGVNYXgpIDogKG1hbnRpc3NhID0gTWF0aC5mbG9vcih2YWx1ZSAvIHBvdzIoZU1pbiAtIG1hbnRTaXplKSksIGV4cG9uZW50ID0gMCkpO1xuICAgICAgICAgICAgZm9yICh2YXIgYiA9IFtdOyBtYW50U2l6ZSA+PSA4OyApIGIucHVzaChtYW50aXNzYSAlIDI1NiksIG1hbnRpc3NhID0gTWF0aC5mbG9vcihtYW50aXNzYSAvIDI1NiksIFxuICAgICAgICAgICAgbWFudFNpemUgLT0gODtcbiAgICAgICAgICAgIGZvciAoZXhwb25lbnQgPSBleHBvbmVudCA8PCBtYW50U2l6ZSB8IG1hbnRpc3NhLCBleHBTaXplICs9IG1hbnRTaXplOyBleHBTaXplID49IDg7ICkgYi5wdXNoKDI1NSAmIGV4cG9uZW50KSwgXG4gICAgICAgICAgICBleHBvbmVudCA+Pj49IDgsIGV4cFNpemUgLT0gODtcbiAgICAgICAgICAgIGIucHVzaChzaWduQml0IDw8IGV4cFNpemUgfCBleHBvbmVudCksIHRoaXMuX3NldEJ5dGVzKGJ5dGVPZmZzZXQsIGIsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRGbG9hdDMyOiBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRCaW5hcnlGbG9hdChieXRlT2Zmc2V0LCB2YWx1ZSwgMjMsIDgsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRGbG9hdDY0OiBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRCaW5hcnlGbG9hdChieXRlT2Zmc2V0LCB2YWx1ZSwgNTIsIDExLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBfc2V0NjQ6IGZ1bmN0aW9uKFR5cGUsIGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIFwib2JqZWN0XCIgIT0gdHlwZW9mIHZhbHVlICYmICh2YWx1ZSA9IFR5cGUuZnJvbU51bWJlcih2YWx1ZSkpLCBsaXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgXG4gICAgICAgICAgICBieXRlT2Zmc2V0ID0gZGVmaW5lZChieXRlT2Zmc2V0LCB0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgdmFyIHBhcnRzID0gbGl0dGxlRW5kaWFuID8ge1xuICAgICAgICAgICAgICAgIGxvOiAwLFxuICAgICAgICAgICAgICAgIGhpOiA0XG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIGxvOiA0LFxuICAgICAgICAgICAgICAgIGhpOiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yICh2YXIgcGFydE5hbWUgaW4gcGFydHMpIHRoaXMuc2V0VWludDMyKGJ5dGVPZmZzZXQgKyBwYXJ0c1twYXJ0TmFtZV0sIHZhbHVlW3BhcnROYW1lXSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgKyA4O1xuICAgICAgICB9LFxuICAgICAgICBzZXRJbnQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdGhpcy5fc2V0NjQoSW50NjQsIGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBzZXRVaW50NjQ6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NldDY0KFVpbnQ2NCwgYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRVaW50MzI6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJ5dGVzKGJ5dGVPZmZzZXQsIFsgMjU1ICYgdmFsdWUsIHZhbHVlID4+PiA4ICYgMjU1LCB2YWx1ZSA+Pj4gMTYgJiAyNTUsIHZhbHVlID4+PiAyNCBdLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBfc2V0VWludDE2OiBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRCeXRlcyhieXRlT2Zmc2V0LCBbIDI1NSAmIHZhbHVlLCB2YWx1ZSA+Pj4gOCAmIDI1NSBdLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBfc2V0VWludDg6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRCeXRlcyhieXRlT2Zmc2V0LCBbIDI1NSAmIHZhbHVlIF0pO1xuICAgICAgICB9LFxuICAgICAgICBzZXRVbnNpZ25lZDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUsIGJpdExlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLl9nZXRCaXRSYW5nZURhdGEoYml0TGVuZ3RoLCBieXRlT2Zmc2V0KSwgd2lkZVZhbHVlID0gZGF0YS53aWRlVmFsdWUsIGIgPSBkYXRhLmJ5dGVzO1xuICAgICAgICAgICAgd2lkZVZhbHVlICY9IH4ofigtMSA8PCBiaXRMZW5ndGgpIDw8IC10aGlzLl9iaXRPZmZzZXQpLCB3aWRlVmFsdWUgfD0gKDMyID4gYml0TGVuZ3RoID8gdmFsdWUgJiB+KC0xIDw8IGJpdExlbmd0aCkgOiB2YWx1ZSkgPDwgLXRoaXMuX2JpdE9mZnNldDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBiLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBiW2ldID0gMjU1ICYgd2lkZVZhbHVlLCB3aWRlVmFsdWUgPj4+PSA4O1xuICAgICAgICAgICAgdGhpcy5fc2V0Qnl0ZXMoZGF0YS5zdGFydCwgYiwgITApO1xuICAgICAgICB9XG4gICAgfSwgbm9kZU5hbWluZyA9IHtcbiAgICAgICAgSW50ODogXCJJbnQ4XCIsXG4gICAgICAgIEludDE2OiBcIkludDE2XCIsXG4gICAgICAgIEludDMyOiBcIkludDMyXCIsXG4gICAgICAgIFVpbnQ4OiBcIlVJbnQ4XCIsXG4gICAgICAgIFVpbnQxNjogXCJVSW50MTZcIixcbiAgICAgICAgVWludDMyOiBcIlVJbnQzMlwiLFxuICAgICAgICBGbG9hdDMyOiBcIkZsb2F0XCIsXG4gICAgICAgIEZsb2F0NjQ6IFwiRG91YmxlXCJcbiAgICB9O1xuICAgIHByb3RvLl9ub2RlQnVmZmVyQWN0aW9uID0gZnVuY3Rpb24odHlwZSwgaXNSZWFkQWN0aW9uLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4sIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgKyBkYXRhVHlwZXNbdHlwZV07XG4gICAgICAgIHZhciBub2RlTmFtZSA9IG5vZGVOYW1pbmdbdHlwZV0gKyAoXCJJbnQ4XCIgPT09IHR5cGUgfHwgXCJVaW50OFwiID09PSB0eXBlID8gXCJcIiA6IGxpdHRsZUVuZGlhbiA/IFwiTEVcIiA6IFwiQkVcIik7XG4gICAgICAgIHJldHVybiBieXRlT2Zmc2V0ICs9IHRoaXMuYnl0ZU9mZnNldCwgaXNSZWFkQWN0aW9uID8gdGhpcy5idWZmZXJbXCJyZWFkXCIgKyBub2RlTmFtZV0oYnl0ZU9mZnNldCkgOiB0aGlzLmJ1ZmZlcltcIndyaXRlXCIgKyBub2RlTmFtZV0odmFsdWUsIGJ5dGVPZmZzZXQpO1xuICAgIH07XG4gICAgZm9yICh2YXIgdHlwZSBpbiBkYXRhVHlwZXMpICFmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIHByb3RvW1wiZ2V0XCIgKyB0eXBlXSA9IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbih0eXBlLCAhMCwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSwgcHJvdG9bXCJzZXRcIiArIHR5cGVdID0gZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdGhpcy5fYWN0aW9uKHR5cGUsICExLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4sIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICB9KHR5cGUpO1xuICAgIHByb3RvLl9zZXRJbnQzMiA9IHByb3RvLl9zZXRVaW50MzIsIHByb3RvLl9zZXRJbnQxNiA9IHByb3RvLl9zZXRVaW50MTYsIHByb3RvLl9zZXRJbnQ4ID0gcHJvdG8uX3NldFVpbnQ4LCBcbiAgICBwcm90by5zZXRTaWduZWQgPSBwcm90by5zZXRVbnNpZ25lZDtcbiAgICBmb3IgKHZhciBtZXRob2QgaW4gcHJvdG8pIFwic2V0XCIgPT09IG1ldGhvZC5zbGljZSgwLCAzKSAmJiAhZnVuY3Rpb24odHlwZSkge1xuICAgICAgICBwcm90b1tcIndyaXRlXCIgKyB0eXBlXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnVuc2hpZnQuY2FsbChhcmd1bWVudHMsIHZvaWQgMCksIHRoaXNbXCJzZXRcIiArIHR5cGVdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfShtZXRob2Quc2xpY2UoMykpO1xuICAgIHJldHVybiBqRGF0YVZpZXc7XG59KTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG52YXIgZGVidWcgPSBmYWxzZTtcbnZhciBoaXRDb3VudCA9IDA7XG52YXIgbWlzc0NvdW50ID0gMDtcbnZhciBzaXplID0gMDtcblxuZXhwb3J0cy5wdXQgPSBmdW5jdGlvbihrZXksIHZhbHVlLCB0aW1lLCB0aW1lb3V0Q2FsbGJhY2spIHtcbiAgaWYgKGRlYnVnKSB7XG4gICAgY29uc29sZS5sb2coJ2NhY2hpbmc6ICVzID0gJWogKEAlcyknLCBrZXksIHZhbHVlLCB0aW1lKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdGltZSAhPT0gJ3VuZGVmaW5lZCcgJiYgKHR5cGVvZiB0aW1lICE9PSAnbnVtYmVyJyB8fCBpc05hTih0aW1lKSB8fCB0aW1lIDw9IDApKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYWNoZSB0aW1lb3V0IG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdGltZW91dENhbGxiYWNrICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdGltZW91dENhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYWNoZSB0aW1lb3V0IGNhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG5cbiAgdmFyIG9sZFJlY29yZCA9IGNhY2hlW2tleV07XG4gIGlmIChvbGRSZWNvcmQpIHtcbiAgICBjbGVhclRpbWVvdXQob2xkUmVjb3JkLnRpbWVvdXQpO1xuICB9IGVsc2Uge1xuICAgIHNpemUrKztcbiAgfVxuXG4gIHZhciByZWNvcmQgPSB7XG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGV4cGlyZTogdGltZSArIERhdGUubm93KClcbiAgfTtcblxuICBpZiAoIWlzTmFOKHJlY29yZC5leHBpcmUpKSB7XG4gICAgcmVjb3JkLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgX2RlbChrZXkpO1xuICAgICAgaWYgKHRpbWVvdXRDYWxsYmFjaykge1xuICAgICAgICB0aW1lb3V0Q2FsbGJhY2soa2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgdGltZSk7XG4gIH1cblxuICBjYWNoZVtrZXldID0gcmVjb3JkO1xuXG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbmV4cG9ydHMuZGVsID0gZnVuY3Rpb24oa2V5KSB7XG4gIHZhciBjYW5EZWxldGUgPSB0cnVlO1xuXG4gIHZhciBvbGRSZWNvcmQgPSBjYWNoZVtrZXldO1xuICBpZiAob2xkUmVjb3JkKSB7XG4gICAgY2xlYXJUaW1lb3V0KG9sZFJlY29yZC50aW1lb3V0KTtcbiAgICBpZiAoIWlzTmFOKG9sZFJlY29yZC5leHBpcmUpICYmIG9sZFJlY29yZC5leHBpcmUgPCBEYXRlLm5vdygpKSB7XG4gICAgICBjYW5EZWxldGUgPSBmYWxzZTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY2FuRGVsZXRlID0gZmFsc2U7XG4gIH1cblxuICBpZiAoY2FuRGVsZXRlKSB7XG4gICAgX2RlbChrZXkpO1xuICB9XG5cbiAgcmV0dXJuIGNhbkRlbGV0ZTtcbn07XG5cbmZ1bmN0aW9uIF9kZWwoa2V5KXtcbiAgc2l6ZS0tO1xuICBkZWxldGUgY2FjaGVba2V5XTtcbn1cblxuZXhwb3J0cy5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICBmb3IgKHZhciBrZXkgaW4gY2FjaGUpIHtcbiAgICBjbGVhclRpbWVvdXQoY2FjaGVba2V5XS50aW1lb3V0KTtcbiAgfVxuICBzaXplID0gMDtcbiAgY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBpZiAoZGVidWcpIHtcbiAgICBoaXRDb3VudCA9IDA7XG4gICAgbWlzc0NvdW50ID0gMDtcbiAgfVxufTtcblxuZXhwb3J0cy5nZXQgPSBmdW5jdGlvbihrZXkpIHtcbiAgdmFyIGRhdGEgPSBjYWNoZVtrZXldO1xuICBpZiAodHlwZW9mIGRhdGEgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGlmIChpc05hTihkYXRhLmV4cGlyZSkgfHwgZGF0YS5leHBpcmUgPj0gRGF0ZS5ub3coKSkge1xuICAgICAgaWYgKGRlYnVnKSBoaXRDb3VudCsrO1xuICAgICAgcmV0dXJuIGRhdGEudmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGZyZWUgc29tZSBzcGFjZVxuICAgICAgaWYgKGRlYnVnKSBtaXNzQ291bnQrKztcbiAgICAgIHNpemUtLTtcbiAgICAgIGRlbGV0ZSBjYWNoZVtrZXldO1xuICAgIH1cbiAgfSBlbHNlIGlmIChkZWJ1Zykge1xuICAgIG1pc3NDb3VudCsrO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuZXhwb3J0cy5zaXplID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBzaXplO1xufTtcblxuZXhwb3J0cy5tZW1zaXplID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzaXplID0gMCxcbiAgICBrZXk7XG4gIGZvciAoa2V5IGluIGNhY2hlKSB7XG4gICAgc2l6ZSsrO1xuICB9XG4gIHJldHVybiBzaXplO1xufTtcblxuZXhwb3J0cy5kZWJ1ZyA9IGZ1bmN0aW9uKGJvb2wpIHtcbiAgZGVidWcgPSBib29sO1xufTtcblxuZXhwb3J0cy5oaXRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBoaXRDb3VudDtcbn07XG5cbmV4cG9ydHMubWlzc2VzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBtaXNzQ291bnQ7XG59O1xuXG5leHBvcnRzLmtleXMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGNhY2hlKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cblxudmFyIHpsaWJfaW5mbGF0ZSA9IHJlcXVpcmUoJy4vemxpYi9pbmZsYXRlJyk7XG52YXIgdXRpbHMgICAgICAgID0gcmVxdWlyZSgnLi91dGlscy9jb21tb24nKTtcbnZhciBzdHJpbmdzICAgICAgPSByZXF1aXJlKCcuL3V0aWxzL3N0cmluZ3MnKTtcbnZhciBjICAgICAgICAgICAgPSByZXF1aXJlKCcuL3psaWIvY29uc3RhbnRzJyk7XG52YXIgbXNnICAgICAgICAgID0gcmVxdWlyZSgnLi96bGliL21lc3NhZ2VzJyk7XG52YXIgWlN0cmVhbSAgICAgID0gcmVxdWlyZSgnLi96bGliL3pzdHJlYW0nKTtcbnZhciBHWmhlYWRlciAgICAgPSByZXF1aXJlKCcuL3psaWIvZ3poZWFkZXInKTtcblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBjbGFzcyBJbmZsYXRlXG4gKlxuICogR2VuZXJpYyBKUy1zdHlsZSB3cmFwcGVyIGZvciB6bGliIGNhbGxzLiBJZiB5b3UgZG9uJ3QgbmVlZFxuICogc3RyZWFtaW5nIGJlaGF2aW91ciAtIHVzZSBtb3JlIHNpbXBsZSBmdW5jdGlvbnM6IFtbaW5mbGF0ZV1dXG4gKiBhbmQgW1tpbmZsYXRlUmF3XV0uXG4gKiovXG5cbi8qIGludGVybmFsXG4gKiBpbmZsYXRlLmNodW5rcyAtPiBBcnJheVxuICpcbiAqIENodW5rcyBvZiBvdXRwdXQgZGF0YSwgaWYgW1tJbmZsYXRlI29uRGF0YV1dIG5vdCBvdmVycmlkZW4uXG4gKiovXG5cbi8qKlxuICogSW5mbGF0ZS5yZXN1bHQgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmdcbiAqXG4gKiBVbmNvbXByZXNzZWQgcmVzdWx0LCBnZW5lcmF0ZWQgYnkgZGVmYXVsdCBbW0luZmxhdGUjb25EYXRhXV1cbiAqIGFuZCBbW0luZmxhdGUjb25FbmRdXSBoYW5kbGVycy4gRmlsbGVkIGFmdGVyIHlvdSBwdXNoIGxhc3QgY2h1bmtcbiAqIChjYWxsIFtbSW5mbGF0ZSNwdXNoXV0gd2l0aCBgWl9GSU5JU0hgIC8gYHRydWVgIHBhcmFtKSBvciBpZiB5b3VcbiAqIHB1c2ggYSBjaHVuayB3aXRoIGV4cGxpY2l0IGZsdXNoIChjYWxsIFtbSW5mbGF0ZSNwdXNoXV0gd2l0aFxuICogYFpfU1lOQ19GTFVTSGAgcGFyYW0pLlxuICoqL1xuXG4vKipcbiAqIEluZmxhdGUuZXJyIC0+IE51bWJlclxuICpcbiAqIEVycm9yIGNvZGUgYWZ0ZXIgaW5mbGF0ZSBmaW5pc2hlZC4gMCAoWl9PSykgb24gc3VjY2Vzcy5cbiAqIFNob3VsZCBiZSBjaGVja2VkIGlmIGJyb2tlbiBkYXRhIHBvc3NpYmxlLlxuICoqL1xuXG4vKipcbiAqIEluZmxhdGUubXNnIC0+IFN0cmluZ1xuICpcbiAqIEVycm9yIG1lc3NhZ2UsIGlmIFtbSW5mbGF0ZS5lcnJdXSAhPSAwXG4gKiovXG5cblxuLyoqXG4gKiBuZXcgSW5mbGF0ZShvcHRpb25zKVxuICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy5cbiAqXG4gKiBDcmVhdGVzIG5ldyBpbmZsYXRvciBpbnN0YW5jZSB3aXRoIHNwZWNpZmllZCBwYXJhbXMuIFRocm93cyBleGNlcHRpb25cbiAqIG9uIGJhZCBwYXJhbXMuIFN1cHBvcnRlZCBvcHRpb25zOlxuICpcbiAqIC0gYHdpbmRvd0JpdHNgXG4gKiAtIGBkaWN0aW9uYXJ5YFxuICpcbiAqIFtodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWRdKGh0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZClcbiAqIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHRoZXNlLlxuICpcbiAqIEFkZGl0aW9uYWwgb3B0aW9ucywgZm9yIGludGVybmFsIG5lZWRzOlxuICpcbiAqIC0gYGNodW5rU2l6ZWAgLSBzaXplIG9mIGdlbmVyYXRlZCBkYXRhIGNodW5rcyAoMTZLIGJ5IGRlZmF1bHQpXG4gKiAtIGByYXdgIChCb29sZWFuKSAtIGRvIHJhdyBpbmZsYXRlXG4gKiAtIGB0b2AgKFN0cmluZykgLSBpZiBlcXVhbCB0byAnc3RyaW5nJywgdGhlbiByZXN1bHQgd2lsbCBiZSBjb252ZXJ0ZWRcbiAqICAgZnJvbSB1dGY4IHRvIHV0ZjE2IChqYXZhc2NyaXB0KSBzdHJpbmcuIFdoZW4gc3RyaW5nIG91dHB1dCByZXF1ZXN0ZWQsXG4gKiAgIGNodW5rIGxlbmd0aCBjYW4gZGlmZmVyIGZyb20gYGNodW5rU2l6ZWAsIGRlcGVuZGluZyBvbiBjb250ZW50LlxuICpcbiAqIEJ5IGRlZmF1bHQsIHdoZW4gbm8gb3B0aW9ucyBzZXQsIGF1dG9kZXRlY3QgZGVmbGF0ZS9nemlwIGRhdGEgZm9ybWF0IHZpYVxuICogd3JhcHBlciBoZWFkZXIuXG4gKlxuICogIyMjIyMgRXhhbXBsZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiB2YXIgcGFrbyA9IHJlcXVpcmUoJ3Bha28nKVxuICogICAsIGNodW5rMSA9IFVpbnQ4QXJyYXkoWzEsMiwzLDQsNSw2LDcsOCw5XSlcbiAqICAgLCBjaHVuazIgPSBVaW50OEFycmF5KFsxMCwxMSwxMiwxMywxNCwxNSwxNiwxNywxOCwxOV0pO1xuICpcbiAqIHZhciBpbmZsYXRlID0gbmV3IHBha28uSW5mbGF0ZSh7IGxldmVsOiAzfSk7XG4gKlxuICogaW5mbGF0ZS5wdXNoKGNodW5rMSwgZmFsc2UpO1xuICogaW5mbGF0ZS5wdXNoKGNodW5rMiwgdHJ1ZSk7ICAvLyB0cnVlIC0+IGxhc3QgY2h1bmtcbiAqXG4gKiBpZiAoaW5mbGF0ZS5lcnIpIHsgdGhyb3cgbmV3IEVycm9yKGluZmxhdGUuZXJyKTsgfVxuICpcbiAqIGNvbnNvbGUubG9nKGluZmxhdGUucmVzdWx0KTtcbiAqIGBgYFxuICoqL1xuZnVuY3Rpb24gSW5mbGF0ZShvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBJbmZsYXRlKSkgcmV0dXJuIG5ldyBJbmZsYXRlKG9wdGlvbnMpO1xuXG4gIHRoaXMub3B0aW9ucyA9IHV0aWxzLmFzc2lnbih7XG4gICAgY2h1bmtTaXplOiAxNjM4NCxcbiAgICB3aW5kb3dCaXRzOiAwLFxuICAgIHRvOiAnJ1xuICB9LCBvcHRpb25zIHx8IHt9KTtcblxuICB2YXIgb3B0ID0gdGhpcy5vcHRpb25zO1xuXG4gIC8vIEZvcmNlIHdpbmRvdyBzaXplIGZvciBgcmF3YCBkYXRhLCBpZiBub3Qgc2V0IGRpcmVjdGx5LFxuICAvLyBiZWNhdXNlIHdlIGhhdmUgbm8gaGVhZGVyIGZvciBhdXRvZGV0ZWN0LlxuICBpZiAob3B0LnJhdyAmJiAob3B0LndpbmRvd0JpdHMgPj0gMCkgJiYgKG9wdC53aW5kb3dCaXRzIDwgMTYpKSB7XG4gICAgb3B0LndpbmRvd0JpdHMgPSAtb3B0LndpbmRvd0JpdHM7XG4gICAgaWYgKG9wdC53aW5kb3dCaXRzID09PSAwKSB7IG9wdC53aW5kb3dCaXRzID0gLTE1OyB9XG4gIH1cblxuICAvLyBJZiBgd2luZG93Qml0c2Agbm90IGRlZmluZWQgKGFuZCBtb2RlIG5vdCByYXcpIC0gc2V0IGF1dG9kZXRlY3QgZmxhZyBmb3IgZ3ppcC9kZWZsYXRlXG4gIGlmICgob3B0LndpbmRvd0JpdHMgPj0gMCkgJiYgKG9wdC53aW5kb3dCaXRzIDwgMTYpICYmXG4gICAgICAhKG9wdGlvbnMgJiYgb3B0aW9ucy53aW5kb3dCaXRzKSkge1xuICAgIG9wdC53aW5kb3dCaXRzICs9IDMyO1xuICB9XG5cbiAgLy8gR3ppcCBoZWFkZXIgaGFzIG5vIGluZm8gYWJvdXQgd2luZG93cyBzaXplLCB3ZSBjYW4gZG8gYXV0b2RldGVjdCBvbmx5XG4gIC8vIGZvciBkZWZsYXRlLiBTbywgaWYgd2luZG93IHNpemUgbm90IHNldCwgZm9yY2UgaXQgdG8gbWF4IHdoZW4gZ3ppcCBwb3NzaWJsZVxuICBpZiAoKG9wdC53aW5kb3dCaXRzID4gMTUpICYmIChvcHQud2luZG93Qml0cyA8IDQ4KSkge1xuICAgIC8vIGJpdCAzICgxNikgLT4gZ3ppcHBlZCBkYXRhXG4gICAgLy8gYml0IDQgKDMyKSAtPiBhdXRvZGV0ZWN0IGd6aXAvZGVmbGF0ZVxuICAgIGlmICgob3B0LndpbmRvd0JpdHMgJiAxNSkgPT09IDApIHtcbiAgICAgIG9wdC53aW5kb3dCaXRzIHw9IDE1O1xuICAgIH1cbiAgfVxuXG4gIHRoaXMuZXJyICAgID0gMDsgICAgICAvLyBlcnJvciBjb2RlLCBpZiBoYXBwZW5zICgwID0gWl9PSylcbiAgdGhpcy5tc2cgICAgPSAnJzsgICAgIC8vIGVycm9yIG1lc3NhZ2VcbiAgdGhpcy5lbmRlZCAgPSBmYWxzZTsgIC8vIHVzZWQgdG8gYXZvaWQgbXVsdGlwbGUgb25FbmQoKSBjYWxsc1xuICB0aGlzLmNodW5rcyA9IFtdOyAgICAgLy8gY2h1bmtzIG9mIGNvbXByZXNzZWQgZGF0YVxuXG4gIHRoaXMuc3RybSAgID0gbmV3IFpTdHJlYW0oKTtcbiAgdGhpcy5zdHJtLmF2YWlsX291dCA9IDA7XG5cbiAgdmFyIHN0YXR1cyAgPSB6bGliX2luZmxhdGUuaW5mbGF0ZUluaXQyKFxuICAgIHRoaXMuc3RybSxcbiAgICBvcHQud2luZG93Qml0c1xuICApO1xuXG4gIGlmIChzdGF0dXMgIT09IGMuWl9PSykge1xuICAgIHRocm93IG5ldyBFcnJvcihtc2dbc3RhdHVzXSk7XG4gIH1cblxuICB0aGlzLmhlYWRlciA9IG5ldyBHWmhlYWRlcigpO1xuXG4gIHpsaWJfaW5mbGF0ZS5pbmZsYXRlR2V0SGVhZGVyKHRoaXMuc3RybSwgdGhpcy5oZWFkZXIpO1xufVxuXG4vKipcbiAqIEluZmxhdGUjcHVzaChkYXRhWywgbW9kZV0pIC0+IEJvb2xlYW5cbiAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheXxBcnJheUJ1ZmZlcnxTdHJpbmcpOiBpbnB1dCBkYXRhXG4gKiAtIG1vZGUgKE51bWJlcnxCb29sZWFuKTogMC4uNiBmb3IgY29ycmVzcG9uZGluZyBaX05PX0ZMVVNILi5aX1RSRUUgbW9kZXMuXG4gKiAgIFNlZSBjb25zdGFudHMuIFNraXBwZWQgb3IgYGZhbHNlYCBtZWFucyBaX05PX0ZMVVNILCBgdHJ1ZWAgbWVhbnNoIFpfRklOSVNILlxuICpcbiAqIFNlbmRzIGlucHV0IGRhdGEgdG8gaW5mbGF0ZSBwaXBlLCBnZW5lcmF0aW5nIFtbSW5mbGF0ZSNvbkRhdGFdXSBjYWxscyB3aXRoXG4gKiBuZXcgb3V0cHV0IGNodW5rcy4gUmV0dXJucyBgdHJ1ZWAgb24gc3VjY2Vzcy4gVGhlIGxhc3QgZGF0YSBibG9jayBtdXN0IGhhdmVcbiAqIG1vZGUgWl9GSU5JU0ggKG9yIGB0cnVlYCkuIFRoYXQgd2lsbCBmbHVzaCBpbnRlcm5hbCBwZW5kaW5nIGJ1ZmZlcnMgYW5kIGNhbGxcbiAqIFtbSW5mbGF0ZSNvbkVuZF1dLiBGb3IgaW50ZXJpbSBleHBsaWNpdCBmbHVzaGVzICh3aXRob3V0IGVuZGluZyB0aGUgc3RyZWFtKSB5b3VcbiAqIGNhbiB1c2UgbW9kZSBaX1NZTkNfRkxVU0gsIGtlZXBpbmcgdGhlIGRlY29tcHJlc3Npb24gY29udGV4dC5cbiAqXG4gKiBPbiBmYWlsIGNhbGwgW1tJbmZsYXRlI29uRW5kXV0gd2l0aCBlcnJvciBjb2RlIGFuZCByZXR1cm4gZmFsc2UuXG4gKlxuICogV2Ugc3Ryb25nbHkgcmVjb21tZW5kIHRvIHVzZSBgVWludDhBcnJheWAgb24gaW5wdXQgZm9yIGJlc3Qgc3BlZWQgKG91dHB1dFxuICogZm9ybWF0IGlzIGRldGVjdGVkIGF1dG9tYXRpY2FsbHkpLiBBbHNvLCBkb24ndCBza2lwIGxhc3QgcGFyYW0gYW5kIGFsd2F5c1xuICogdXNlIHRoZSBzYW1lIHR5cGUgaW4geW91ciBjb2RlIChib29sZWFuIG9yIG51bWJlcikuIFRoYXQgd2lsbCBpbXByb3ZlIEpTIHNwZWVkLlxuICpcbiAqIEZvciByZWd1bGFyIGBBcnJheWAtcyBtYWtlIHN1cmUgYWxsIGVsZW1lbnRzIGFyZSBbMC4uMjU1XS5cbiAqXG4gKiAjIyMjIyBFeGFtcGxlXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogcHVzaChjaHVuaywgZmFsc2UpOyAvLyBwdXNoIG9uZSBvZiBkYXRhIGNodW5rc1xuICogLi4uXG4gKiBwdXNoKGNodW5rLCB0cnVlKTsgIC8vIHB1c2ggbGFzdCBjaHVua1xuICogYGBgXG4gKiovXG5JbmZsYXRlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGRhdGEsIG1vZGUpIHtcbiAgdmFyIHN0cm0gPSB0aGlzLnN0cm07XG4gIHZhciBjaHVua1NpemUgPSB0aGlzLm9wdGlvbnMuY2h1bmtTaXplO1xuICB2YXIgZGljdGlvbmFyeSA9IHRoaXMub3B0aW9ucy5kaWN0aW9uYXJ5O1xuICB2YXIgc3RhdHVzLCBfbW9kZTtcbiAgdmFyIG5leHRfb3V0X3V0ZjgsIHRhaWwsIHV0ZjhzdHI7XG4gIHZhciBkaWN0O1xuXG4gIC8vIEZsYWcgdG8gcHJvcGVybHkgcHJvY2VzcyBaX0JVRl9FUlJPUiBvbiB0ZXN0aW5nIGluZmxhdGUgY2FsbFxuICAvLyB3aGVuIHdlIGNoZWNrIHRoYXQgYWxsIG91dHB1dCBkYXRhIHdhcyBmbHVzaGVkLlxuICB2YXIgYWxsb3dCdWZFcnJvciA9IGZhbHNlO1xuXG4gIGlmICh0aGlzLmVuZGVkKSB7IHJldHVybiBmYWxzZTsgfVxuICBfbW9kZSA9IChtb2RlID09PSB+fm1vZGUpID8gbW9kZSA6ICgobW9kZSA9PT0gdHJ1ZSkgPyBjLlpfRklOSVNIIDogYy5aX05PX0ZMVVNIKTtcblxuICAvLyBDb252ZXJ0IGRhdGEgaWYgbmVlZGVkXG4gIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBPbmx5IGJpbmFyeSBzdHJpbmdzIGNhbiBiZSBkZWNvbXByZXNzZWQgb24gcHJhY3RpY2VcbiAgICBzdHJtLmlucHV0ID0gc3RyaW5ncy5iaW5zdHJpbmcyYnVmKGRhdGEpO1xuICB9IGVsc2UgaWYgKHRvU3RyaW5nLmNhbGwoZGF0YSkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpIHtcbiAgICBzdHJtLmlucHV0ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XG4gIH0gZWxzZSB7XG4gICAgc3RybS5pbnB1dCA9IGRhdGE7XG4gIH1cblxuICBzdHJtLm5leHRfaW4gPSAwO1xuICBzdHJtLmF2YWlsX2luID0gc3RybS5pbnB1dC5sZW5ndGg7XG5cbiAgZG8ge1xuICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgc3RybS5vdXRwdXQgPSBuZXcgdXRpbHMuQnVmOChjaHVua1NpemUpO1xuICAgICAgc3RybS5uZXh0X291dCA9IDA7XG4gICAgICBzdHJtLmF2YWlsX291dCA9IGNodW5rU2l6ZTtcbiAgICB9XG5cbiAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZShzdHJtLCBjLlpfTk9fRkxVU0gpOyAgICAvKiBubyBiYWQgcmV0dXJuIHZhbHVlICovXG5cbiAgICBpZiAoc3RhdHVzID09PSBjLlpfTkVFRF9ESUNUICYmIGRpY3Rpb25hcnkpIHtcbiAgICAgIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWRcbiAgICAgIGlmICh0eXBlb2YgZGljdGlvbmFyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZGljdCA9IHN0cmluZ3Muc3RyaW5nMmJ1ZihkaWN0aW9uYXJ5KTtcbiAgICAgIH0gZWxzZSBpZiAodG9TdHJpbmcuY2FsbChkaWN0aW9uYXJ5KSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJykge1xuICAgICAgICBkaWN0ID0gbmV3IFVpbnQ4QXJyYXkoZGljdGlvbmFyeSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaWN0ID0gZGljdGlvbmFyeTtcbiAgICAgIH1cblxuICAgICAgc3RhdHVzID0gemxpYl9pbmZsYXRlLmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSwgZGljdCk7XG5cbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSBjLlpfQlVGX0VSUk9SICYmIGFsbG93QnVmRXJyb3IgPT09IHRydWUpIHtcbiAgICAgIHN0YXR1cyA9IGMuWl9PSztcbiAgICAgIGFsbG93QnVmRXJyb3IgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzICE9PSBjLlpfU1RSRUFNX0VORCAmJiBzdGF0dXMgIT09IGMuWl9PSykge1xuICAgICAgdGhpcy5vbkVuZChzdGF0dXMpO1xuICAgICAgdGhpcy5lbmRlZCA9IHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHN0cm0ubmV4dF9vdXQpIHtcbiAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCB8fCBzdGF0dXMgPT09IGMuWl9TVFJFQU1fRU5EIHx8IChzdHJtLmF2YWlsX2luID09PSAwICYmIChfbW9kZSA9PT0gYy5aX0ZJTklTSCB8fCBfbW9kZSA9PT0gYy5aX1NZTkNfRkxVU0gpKSkge1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICdzdHJpbmcnKSB7XG5cbiAgICAgICAgICBuZXh0X291dF91dGY4ID0gc3RyaW5ncy51dGY4Ym9yZGVyKHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0KTtcblxuICAgICAgICAgIHRhaWwgPSBzdHJtLm5leHRfb3V0IC0gbmV4dF9vdXRfdXRmODtcbiAgICAgICAgICB1dGY4c3RyID0gc3RyaW5ncy5idWYyc3RyaW5nKHN0cm0ub3V0cHV0LCBuZXh0X291dF91dGY4KTtcblxuICAgICAgICAgIC8vIG1vdmUgdGFpbFxuICAgICAgICAgIHN0cm0ubmV4dF9vdXQgPSB0YWlsO1xuICAgICAgICAgIHN0cm0uYXZhaWxfb3V0ID0gY2h1bmtTaXplIC0gdGFpbDtcbiAgICAgICAgICBpZiAodGFpbCkgeyB1dGlscy5hcnJheVNldChzdHJtLm91dHB1dCwgc3RybS5vdXRwdXQsIG5leHRfb3V0X3V0ZjgsIHRhaWwsIDApOyB9XG5cbiAgICAgICAgICB0aGlzLm9uRGF0YSh1dGY4c3RyKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub25EYXRhKHV0aWxzLnNocmlua0J1ZihzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2hlbiBubyBtb3JlIGlucHV0IGRhdGEsIHdlIHNob3VsZCBjaGVjayB0aGF0IGludGVybmFsIGluZmxhdGUgYnVmZmVyc1xuICAgIC8vIGFyZSBmbHVzaGVkLiBUaGUgb25seSB3YXkgdG8gZG8gaXQgd2hlbiBhdmFpbF9vdXQgPSAwIC0gcnVuIG9uZSBtb3JlXG4gICAgLy8gaW5mbGF0ZSBwYXNzLiBCdXQgaWYgb3V0cHV0IGRhdGEgbm90IGV4aXN0cywgaW5mbGF0ZSByZXR1cm4gWl9CVUZfRVJST1IuXG4gICAgLy8gSGVyZSB3ZSBzZXQgZmxhZyB0byBwcm9jZXNzIHRoaXMgZXJyb3IgcHJvcGVybHkuXG4gICAgLy9cbiAgICAvLyBOT1RFLiBEZWZsYXRlIGRvZXMgbm90IHJldHVybiBlcnJvciBpbiB0aGlzIGNhc2UgYW5kIGRvZXMgbm90IG5lZWRzIHN1Y2hcbiAgICAvLyBsb2dpYy5cbiAgICBpZiAoc3RybS5hdmFpbF9pbiA9PT0gMCAmJiBzdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgYWxsb3dCdWZFcnJvciA9IHRydWU7XG4gICAgfVxuXG4gIH0gd2hpbGUgKChzdHJtLmF2YWlsX2luID4gMCB8fCBzdHJtLmF2YWlsX291dCA9PT0gMCkgJiYgc3RhdHVzICE9PSBjLlpfU1RSRUFNX0VORCk7XG5cbiAgaWYgKHN0YXR1cyA9PT0gYy5aX1NUUkVBTV9FTkQpIHtcbiAgICBfbW9kZSA9IGMuWl9GSU5JU0g7XG4gIH1cblxuICAvLyBGaW5hbGl6ZSBvbiB0aGUgbGFzdCBjaHVuay5cbiAgaWYgKF9tb2RlID09PSBjLlpfRklOSVNIKSB7XG4gICAgc3RhdHVzID0gemxpYl9pbmZsYXRlLmluZmxhdGVFbmQodGhpcy5zdHJtKTtcbiAgICB0aGlzLm9uRW5kKHN0YXR1cyk7XG4gICAgdGhpcy5lbmRlZCA9IHRydWU7XG4gICAgcmV0dXJuIHN0YXR1cyA9PT0gYy5aX09LO1xuICB9XG5cbiAgLy8gY2FsbGJhY2sgaW50ZXJpbSByZXN1bHRzIGlmIFpfU1lOQ19GTFVTSC5cbiAgaWYgKF9tb2RlID09PSBjLlpfU1lOQ19GTFVTSCkge1xuICAgIHRoaXMub25FbmQoYy5aX09LKTtcbiAgICBzdHJtLmF2YWlsX291dCA9IDA7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cblxuLyoqXG4gKiBJbmZsYXRlI29uRGF0YShjaHVuaykgLT4gVm9pZFxuICogLSBjaHVuayAoVWludDhBcnJheXxBcnJheXxTdHJpbmcpOiBvdXB1dCBkYXRhLiBUeXBlIG9mIGFycmF5IGRlcGVuZHNcbiAqICAgb24ganMgZW5naW5lIHN1cHBvcnQuIFdoZW4gc3RyaW5nIG91dHB1dCByZXF1ZXN0ZWQsIGVhY2ggY2h1bmtcbiAqICAgd2lsbCBiZSBzdHJpbmcuXG4gKlxuICogQnkgZGVmYXVsdCwgc3RvcmVzIGRhdGEgYmxvY2tzIGluIGBjaHVua3NbXWAgcHJvcGVydHkgYW5kIGdsdWVcbiAqIHRob3NlIGluIGBvbkVuZGAuIE92ZXJyaWRlIHRoaXMgaGFuZGxlciwgaWYgeW91IG5lZWQgYW5vdGhlciBiZWhhdmlvdXIuXG4gKiovXG5JbmZsYXRlLnByb3RvdHlwZS5vbkRhdGEgPSBmdW5jdGlvbiAoY2h1bmspIHtcbiAgdGhpcy5jaHVua3MucHVzaChjaHVuayk7XG59O1xuXG5cbi8qKlxuICogSW5mbGF0ZSNvbkVuZChzdGF0dXMpIC0+IFZvaWRcbiAqIC0gc3RhdHVzIChOdW1iZXIpOiBpbmZsYXRlIHN0YXR1cy4gMCAoWl9PSykgb24gc3VjY2VzcyxcbiAqICAgb3RoZXIgaWYgbm90LlxuICpcbiAqIENhbGxlZCBlaXRoZXIgYWZ0ZXIgeW91IHRlbGwgaW5mbGF0ZSB0aGF0IHRoZSBpbnB1dCBzdHJlYW0gaXNcbiAqIGNvbXBsZXRlIChaX0ZJTklTSCkgb3Igc2hvdWxkIGJlIGZsdXNoZWQgKFpfU1lOQ19GTFVTSClcbiAqIG9yIGlmIGFuIGVycm9yIGhhcHBlbmVkLiBCeSBkZWZhdWx0IC0gam9pbiBjb2xsZWN0ZWQgY2h1bmtzLFxuICogZnJlZSBtZW1vcnkgYW5kIGZpbGwgYHJlc3VsdHNgIC8gYGVycmAgcHJvcGVydGllcy5cbiAqKi9cbkluZmxhdGUucHJvdG90eXBlLm9uRW5kID0gZnVuY3Rpb24gKHN0YXR1cykge1xuICAvLyBPbiBzdWNjZXNzIC0gam9pblxuICBpZiAoc3RhdHVzID09PSBjLlpfT0spIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLnRvID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gR2x1ZSAmIGNvbnZlcnQgaGVyZSwgdW50aWwgd2UgdGVhY2ggcGFrbyB0byBzZW5kXG4gICAgICAvLyB1dGY4IGFsbGlnbmVkIHN0cmluZ3MgdG8gb25EYXRhXG4gICAgICB0aGlzLnJlc3VsdCA9IHRoaXMuY2h1bmtzLmpvaW4oJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlc3VsdCA9IHV0aWxzLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpO1xuICAgIH1cbiAgfVxuICB0aGlzLmNodW5rcyA9IFtdO1xuICB0aGlzLmVyciA9IHN0YXR1cztcbiAgdGhpcy5tc2cgPSB0aGlzLnN0cm0ubXNnO1xufTtcblxuXG4vKipcbiAqIGluZmxhdGUoZGF0YVssIG9wdGlvbnNdKSAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZ1xuICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IGlucHV0IGRhdGEgdG8gZGVjb21wcmVzcy5cbiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBpbmZsYXRlIG9wdGlvbnMuXG4gKlxuICogRGVjb21wcmVzcyBgZGF0YWAgd2l0aCBpbmZsYXRlL3VuZ3ppcCBhbmQgYG9wdGlvbnNgLiBBdXRvZGV0ZWN0XG4gKiBmb3JtYXQgdmlhIHdyYXBwZXIgaGVhZGVyIGJ5IGRlZmF1bHQuIFRoYXQncyB3aHkgd2UgZG9uJ3QgcHJvdmlkZVxuICogc2VwYXJhdGUgYHVuZ3ppcGAgbWV0aG9kLlxuICpcbiAqIFN1cHBvcnRlZCBvcHRpb25zIGFyZTpcbiAqXG4gKiAtIHdpbmRvd0JpdHNcbiAqXG4gKiBbaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkXShodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWQpXG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqXG4gKiBTdWdhciAob3B0aW9ucyk6XG4gKlxuICogLSBgcmF3YCAoQm9vbGVhbikgLSBzYXkgdGhhdCB3ZSB3b3JrIHdpdGggcmF3IHN0cmVhbSwgaWYgeW91IGRvbid0IHdpc2ggdG8gc3BlY2lmeVxuICogICBuZWdhdGl2ZSB3aW5kb3dCaXRzIGltcGxpY2l0bHkuXG4gKiAtIGB0b2AgKFN0cmluZykgLSBpZiBlcXVhbCB0byAnc3RyaW5nJywgdGhlbiByZXN1bHQgd2lsbCBiZSBjb252ZXJ0ZWRcbiAqICAgZnJvbSB1dGY4IHRvIHV0ZjE2IChqYXZhc2NyaXB0KSBzdHJpbmcuIFdoZW4gc3RyaW5nIG91dHB1dCByZXF1ZXN0ZWQsXG4gKiAgIGNodW5rIGxlbmd0aCBjYW4gZGlmZmVyIGZyb20gYGNodW5rU2l6ZWAsIGRlcGVuZGluZyBvbiBjb250ZW50LlxuICpcbiAqXG4gKiAjIyMjIyBFeGFtcGxlOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIHZhciBwYWtvID0gcmVxdWlyZSgncGFrbycpXG4gKiAgICwgaW5wdXQgPSBwYWtvLmRlZmxhdGUoWzEsMiwzLDQsNSw2LDcsOCw5XSlcbiAqICAgLCBvdXRwdXQ7XG4gKlxuICogdHJ5IHtcbiAqICAgb3V0cHV0ID0gcGFrby5pbmZsYXRlKGlucHV0KTtcbiAqIH0gY2F0Y2ggKGVycilcbiAqICAgY29uc29sZS5sb2coZXJyKTtcbiAqIH1cbiAqIGBgYFxuICoqL1xuZnVuY3Rpb24gaW5mbGF0ZShpbnB1dCwgb3B0aW9ucykge1xuICB2YXIgaW5mbGF0b3IgPSBuZXcgSW5mbGF0ZShvcHRpb25zKTtcblxuICBpbmZsYXRvci5wdXNoKGlucHV0LCB0cnVlKTtcblxuICAvLyBUaGF0IHdpbGwgbmV2ZXIgaGFwcGVucywgaWYgeW91IGRvbid0IGNoZWF0IHdpdGggb3B0aW9ucyA6KVxuICBpZiAoaW5mbGF0b3IuZXJyKSB7IHRocm93IGluZmxhdG9yLm1zZzsgfVxuXG4gIHJldHVybiBpbmZsYXRvci5yZXN1bHQ7XG59XG5cblxuLyoqXG4gKiBpbmZsYXRlUmF3KGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmdcbiAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheXxTdHJpbmcpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgaW5mbGF0ZSBvcHRpb25zLlxuICpcbiAqIFRoZSBzYW1lIGFzIFtbaW5mbGF0ZV1dLCBidXQgY3JlYXRlcyByYXcgZGF0YSwgd2l0aG91dCB3cmFwcGVyXG4gKiAoaGVhZGVyIGFuZCBhZGxlcjMyIGNyYykuXG4gKiovXG5mdW5jdGlvbiBpbmZsYXRlUmF3KGlucHV0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBvcHRpb25zLnJhdyA9IHRydWU7XG4gIHJldHVybiBpbmZsYXRlKGlucHV0LCBvcHRpb25zKTtcbn1cblxuXG4vKipcbiAqIHVuZ3ppcChkYXRhWywgb3B0aW9uc10pIC0+IFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nXG4gKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nKTogaW5wdXQgZGF0YSB0byBkZWNvbXByZXNzLlxuICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy5cbiAqXG4gKiBKdXN0IHNob3J0Y3V0IHRvIFtbaW5mbGF0ZV1dLCBiZWNhdXNlIGl0IGF1dG9kZXRlY3RzIGZvcm1hdFxuICogYnkgaGVhZGVyLmNvbnRlbnQuIERvbmUgZm9yIGNvbnZlbmllbmNlLlxuICoqL1xuXG5cbmV4cG9ydHMuSW5mbGF0ZSA9IEluZmxhdGU7XG5leHBvcnRzLmluZmxhdGUgPSBpbmZsYXRlO1xuZXhwb3J0cy5pbmZsYXRlUmF3ID0gaW5mbGF0ZVJhdztcbmV4cG9ydHMudW5nemlwICA9IGluZmxhdGU7XG4iLCIndXNlIHN0cmljdCc7XG5cblxudmFyIFRZUEVEX09LID0gICh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcpICYmXG4gICAgICAgICAgICAgICAgKHR5cGVvZiBVaW50MTZBcnJheSAhPT0gJ3VuZGVmaW5lZCcpICYmXG4gICAgICAgICAgICAgICAgKHR5cGVvZiBJbnQzMkFycmF5ICE9PSAndW5kZWZpbmVkJyk7XG5cblxuZXhwb3J0cy5hc3NpZ24gPSBmdW5jdGlvbiAob2JqIC8qZnJvbTEsIGZyb20yLCBmcm9tMywgLi4uKi8pIHtcbiAgdmFyIHNvdXJjZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICB3aGlsZSAoc291cmNlcy5sZW5ndGgpIHtcbiAgICB2YXIgc291cmNlID0gc291cmNlcy5zaGlmdCgpO1xuICAgIGlmICghc291cmNlKSB7IGNvbnRpbnVlOyB9XG5cbiAgICBpZiAodHlwZW9mIHNvdXJjZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3Ioc291cmNlICsgJ211c3QgYmUgbm9uLW9iamVjdCcpO1xuICAgIH1cblxuICAgIGZvciAodmFyIHAgaW4gc291cmNlKSB7XG4gICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgIG9ialtwXSA9IHNvdXJjZVtwXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JqO1xufTtcblxuXG4vLyByZWR1Y2UgYnVmZmVyIHNpemUsIGF2b2lkaW5nIG1lbSBjb3B5XG5leHBvcnRzLnNocmlua0J1ZiA9IGZ1bmN0aW9uIChidWYsIHNpemUpIHtcbiAgaWYgKGJ1Zi5sZW5ndGggPT09IHNpemUpIHsgcmV0dXJuIGJ1ZjsgfVxuICBpZiAoYnVmLnN1YmFycmF5KSB7IHJldHVybiBidWYuc3ViYXJyYXkoMCwgc2l6ZSk7IH1cbiAgYnVmLmxlbmd0aCA9IHNpemU7XG4gIHJldHVybiBidWY7XG59O1xuXG5cbnZhciBmblR5cGVkID0ge1xuICBhcnJheVNldDogZnVuY3Rpb24gKGRlc3QsIHNyYywgc3JjX29mZnMsIGxlbiwgZGVzdF9vZmZzKSB7XG4gICAgaWYgKHNyYy5zdWJhcnJheSAmJiBkZXN0LnN1YmFycmF5KSB7XG4gICAgICBkZXN0LnNldChzcmMuc3ViYXJyYXkoc3JjX29mZnMsIHNyY19vZmZzICsgbGVuKSwgZGVzdF9vZmZzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gRmFsbGJhY2sgdG8gb3JkaW5hcnkgYXJyYXlcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBkZXN0W2Rlc3Rfb2ZmcyArIGldID0gc3JjW3NyY19vZmZzICsgaV07XG4gICAgfVxuICB9LFxuICAvLyBKb2luIGFycmF5IG9mIGNodW5rcyB0byBzaW5nbGUgYXJyYXkuXG4gIGZsYXR0ZW5DaHVua3M6IGZ1bmN0aW9uIChjaHVua3MpIHtcbiAgICB2YXIgaSwgbCwgbGVuLCBwb3MsIGNodW5rLCByZXN1bHQ7XG5cbiAgICAvLyBjYWxjdWxhdGUgZGF0YSBsZW5ndGhcbiAgICBsZW4gPSAwO1xuICAgIGZvciAoaSA9IDAsIGwgPSBjaHVua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBsZW4gKz0gY2h1bmtzW2ldLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvLyBqb2luIGNodW5rc1xuICAgIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KGxlbik7XG4gICAgcG9zID0gMDtcbiAgICBmb3IgKGkgPSAwLCBsID0gY2h1bmtzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY2h1bmsgPSBjaHVua3NbaV07XG4gICAgICByZXN1bHQuc2V0KGNodW5rLCBwb3MpO1xuICAgICAgcG9zICs9IGNodW5rLmxlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59O1xuXG52YXIgZm5VbnR5cGVkID0ge1xuICBhcnJheVNldDogZnVuY3Rpb24gKGRlc3QsIHNyYywgc3JjX29mZnMsIGxlbiwgZGVzdF9vZmZzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgZGVzdFtkZXN0X29mZnMgKyBpXSA9IHNyY1tzcmNfb2ZmcyArIGldO1xuICAgIH1cbiAgfSxcbiAgLy8gSm9pbiBhcnJheSBvZiBjaHVua3MgdG8gc2luZ2xlIGFycmF5LlxuICBmbGF0dGVuQ2h1bmtzOiBmdW5jdGlvbiAoY2h1bmtzKSB7XG4gICAgcmV0dXJuIFtdLmNvbmNhdC5hcHBseShbXSwgY2h1bmtzKTtcbiAgfVxufTtcblxuXG4vLyBFbmFibGUvRGlzYWJsZSB0eXBlZCBhcnJheXMgdXNlLCBmb3IgdGVzdGluZ1xuLy9cbmV4cG9ydHMuc2V0VHlwZWQgPSBmdW5jdGlvbiAob24pIHtcbiAgaWYgKG9uKSB7XG4gICAgZXhwb3J0cy5CdWY4ICA9IFVpbnQ4QXJyYXk7XG4gICAgZXhwb3J0cy5CdWYxNiA9IFVpbnQxNkFycmF5O1xuICAgIGV4cG9ydHMuQnVmMzIgPSBJbnQzMkFycmF5O1xuICAgIGV4cG9ydHMuYXNzaWduKGV4cG9ydHMsIGZuVHlwZWQpO1xuICB9IGVsc2Uge1xuICAgIGV4cG9ydHMuQnVmOCAgPSBBcnJheTtcbiAgICBleHBvcnRzLkJ1ZjE2ID0gQXJyYXk7XG4gICAgZXhwb3J0cy5CdWYzMiA9IEFycmF5O1xuICAgIGV4cG9ydHMuYXNzaWduKGV4cG9ydHMsIGZuVW50eXBlZCk7XG4gIH1cbn07XG5cbmV4cG9ydHMuc2V0VHlwZWQoVFlQRURfT0spO1xuIiwiLy8gU3RyaW5nIGVuY29kZS9kZWNvZGUgaGVscGVyc1xuJ3VzZSBzdHJpY3QnO1xuXG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vY29tbW9uJyk7XG5cblxuLy8gUXVpY2sgY2hlY2sgaWYgd2UgY2FuIHVzZSBmYXN0IGFycmF5IHRvIGJpbiBzdHJpbmcgY29udmVyc2lvblxuLy9cbi8vIC0gYXBwbHkoQXJyYXkpIGNhbiBmYWlsIG9uIEFuZHJvaWQgMi4yXG4vLyAtIGFwcGx5KFVpbnQ4QXJyYXkpIGNhbiBmYWlsIG9uIGlPUyA1LjEgU2FmYXJ5XG4vL1xudmFyIFNUUl9BUFBMWV9PSyA9IHRydWU7XG52YXIgU1RSX0FQUExZX1VJQV9PSyA9IHRydWU7XG5cbnRyeSB7IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgWyAwIF0pOyB9IGNhdGNoIChfXykgeyBTVFJfQVBQTFlfT0sgPSBmYWxzZTsgfVxudHJ5IHsgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheSgxKSk7IH0gY2F0Y2ggKF9fKSB7IFNUUl9BUFBMWV9VSUFfT0sgPSBmYWxzZTsgfVxuXG5cbi8vIFRhYmxlIHdpdGggdXRmOCBsZW5ndGhzIChjYWxjdWxhdGVkIGJ5IGZpcnN0IGJ5dGUgb2Ygc2VxdWVuY2UpXG4vLyBOb3RlLCB0aGF0IDUgJiA2LWJ5dGUgdmFsdWVzIGFuZCBzb21lIDQtYnl0ZSB2YWx1ZXMgY2FuIG5vdCBiZSByZXByZXNlbnRlZCBpbiBKUyxcbi8vIGJlY2F1c2UgbWF4IHBvc3NpYmxlIGNvZGVwb2ludCBpcyAweDEwZmZmZlxudmFyIF91dGY4bGVuID0gbmV3IHV0aWxzLkJ1ZjgoMjU2KTtcbmZvciAodmFyIHEgPSAwOyBxIDwgMjU2OyBxKyspIHtcbiAgX3V0ZjhsZW5bcV0gPSAocSA+PSAyNTIgPyA2IDogcSA+PSAyNDggPyA1IDogcSA+PSAyNDAgPyA0IDogcSA+PSAyMjQgPyAzIDogcSA+PSAxOTIgPyAyIDogMSk7XG59XG5fdXRmOGxlblsyNTRdID0gX3V0ZjhsZW5bMjU0XSA9IDE7IC8vIEludmFsaWQgc2VxdWVuY2Ugc3RhcnRcblxuXG4vLyBjb252ZXJ0IHN0cmluZyB0byBhcnJheSAodHlwZWQsIHdoZW4gcG9zc2libGUpXG5leHBvcnRzLnN0cmluZzJidWYgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHZhciBidWYsIGMsIGMyLCBtX3BvcywgaSwgc3RyX2xlbiA9IHN0ci5sZW5ndGgsIGJ1Zl9sZW4gPSAwO1xuXG4gIC8vIGNvdW50IGJpbmFyeSBzaXplXG4gIGZvciAobV9wb3MgPSAwOyBtX3BvcyA8IHN0cl9sZW47IG1fcG9zKyspIHtcbiAgICBjID0gc3RyLmNoYXJDb2RlQXQobV9wb3MpO1xuICAgIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJiAobV9wb3MgKyAxIDwgc3RyX2xlbikpIHtcbiAgICAgIGMyID0gc3RyLmNoYXJDb2RlQXQobV9wb3MgKyAxKTtcbiAgICAgIGlmICgoYzIgJiAweGZjMDApID09PSAweGRjMDApIHtcbiAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgLSAweGQ4MDApIDw8IDEwKSArIChjMiAtIDB4ZGMwMCk7XG4gICAgICAgIG1fcG9zKys7XG4gICAgICB9XG4gICAgfVxuICAgIGJ1Zl9sZW4gKz0gYyA8IDB4ODAgPyAxIDogYyA8IDB4ODAwID8gMiA6IGMgPCAweDEwMDAwID8gMyA6IDQ7XG4gIH1cblxuICAvLyBhbGxvY2F0ZSBidWZmZXJcbiAgYnVmID0gbmV3IHV0aWxzLkJ1ZjgoYnVmX2xlbik7XG5cbiAgLy8gY29udmVydFxuICBmb3IgKGkgPSAwLCBtX3BvcyA9IDA7IGkgPCBidWZfbGVuOyBtX3BvcysrKSB7XG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zKTtcbiAgICBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiYgKG1fcG9zICsgMSA8IHN0cl9sZW4pKSB7XG4gICAgICBjMiA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zICsgMSk7XG4gICAgICBpZiAoKGMyICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XG4gICAgICAgIGMgPSAweDEwMDAwICsgKChjIC0gMHhkODAwKSA8PCAxMCkgKyAoYzIgLSAweGRjMDApO1xuICAgICAgICBtX3BvcysrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYyA8IDB4ODApIHtcbiAgICAgIC8qIG9uZSBieXRlICovXG4gICAgICBidWZbaSsrXSA9IGM7XG4gICAgfSBlbHNlIGlmIChjIDwgMHg4MDApIHtcbiAgICAgIC8qIHR3byBieXRlcyAqL1xuICAgICAgYnVmW2krK10gPSAweEMwIHwgKGMgPj4+IDYpO1xuICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgJiAweDNmKTtcbiAgICB9IGVsc2UgaWYgKGMgPCAweDEwMDAwKSB7XG4gICAgICAvKiB0aHJlZSBieXRlcyAqL1xuICAgICAgYnVmW2krK10gPSAweEUwIHwgKGMgPj4+IDEyKTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjID4+PiA2ICYgMHgzZik7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyAmIDB4M2YpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKiBmb3VyIGJ5dGVzICovXG4gICAgICBidWZbaSsrXSA9IDB4ZjAgfCAoYyA+Pj4gMTgpO1xuICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgPj4+IDEyICYgMHgzZik7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gNiAmIDB4M2YpO1xuICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgJiAweDNmKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnVmO1xufTtcblxuLy8gSGVscGVyICh1c2VkIGluIDIgcGxhY2VzKVxuZnVuY3Rpb24gYnVmMmJpbnN0cmluZyhidWYsIGxlbikge1xuICAvLyB1c2UgZmFsbGJhY2sgZm9yIGJpZyBhcnJheXMgdG8gYXZvaWQgc3RhY2sgb3ZlcmZsb3dcbiAgaWYgKGxlbiA8IDY1NTM3KSB7XG4gICAgaWYgKChidWYuc3ViYXJyYXkgJiYgU1RSX0FQUExZX1VJQV9PSykgfHwgKCFidWYuc3ViYXJyYXkgJiYgU1RSX0FQUExZX09LKSkge1xuICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgdXRpbHMuc2hyaW5rQnVmKGJ1ZiwgbGVuKSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHJlc3VsdCA9ICcnO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbi8vIENvbnZlcnQgYnl0ZSBhcnJheSB0byBiaW5hcnkgc3RyaW5nXG5leHBvcnRzLmJ1ZjJiaW5zdHJpbmcgPSBmdW5jdGlvbiAoYnVmKSB7XG4gIHJldHVybiBidWYyYmluc3RyaW5nKGJ1ZiwgYnVmLmxlbmd0aCk7XG59O1xuXG5cbi8vIENvbnZlcnQgYmluYXJ5IHN0cmluZyAodHlwZWQsIHdoZW4gcG9zc2libGUpXG5leHBvcnRzLmJpbnN0cmluZzJidWYgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHZhciBidWYgPSBuZXcgdXRpbHMuQnVmOChzdHIubGVuZ3RoKTtcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJ1Zi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGJ1ZltpXSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICB9XG4gIHJldHVybiBidWY7XG59O1xuXG5cbi8vIGNvbnZlcnQgYXJyYXkgdG8gc3RyaW5nXG5leHBvcnRzLmJ1ZjJzdHJpbmcgPSBmdW5jdGlvbiAoYnVmLCBtYXgpIHtcbiAgdmFyIGksIG91dCwgYywgY19sZW47XG4gIHZhciBsZW4gPSBtYXggfHwgYnVmLmxlbmd0aDtcblxuICAvLyBSZXNlcnZlIG1heCBwb3NzaWJsZSBsZW5ndGggKDIgd29yZHMgcGVyIGNoYXIpXG4gIC8vIE5COiBieSB1bmtub3duIHJlYXNvbnMsIEFycmF5IGlzIHNpZ25pZmljYW50bHkgZmFzdGVyIGZvclxuICAvLyAgICAgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseSB0aGFuIFVpbnQxNkFycmF5LlxuICB2YXIgdXRmMTZidWYgPSBuZXcgQXJyYXkobGVuICogMik7XG5cbiAgZm9yIChvdXQgPSAwLCBpID0gMDsgaSA8IGxlbjspIHtcbiAgICBjID0gYnVmW2krK107XG4gICAgLy8gcXVpY2sgcHJvY2VzcyBhc2NpaVxuICAgIGlmIChjIDwgMHg4MCkgeyB1dGYxNmJ1ZltvdXQrK10gPSBjOyBjb250aW51ZTsgfVxuXG4gICAgY19sZW4gPSBfdXRmOGxlbltjXTtcbiAgICAvLyBza2lwIDUgJiA2IGJ5dGUgY29kZXNcbiAgICBpZiAoY19sZW4gPiA0KSB7IHV0ZjE2YnVmW291dCsrXSA9IDB4ZmZmZDsgaSArPSBjX2xlbiAtIDE7IGNvbnRpbnVlOyB9XG5cbiAgICAvLyBhcHBseSBtYXNrIG9uIGZpcnN0IGJ5dGVcbiAgICBjICY9IGNfbGVuID09PSAyID8gMHgxZiA6IGNfbGVuID09PSAzID8gMHgwZiA6IDB4MDc7XG4gICAgLy8gam9pbiB0aGUgcmVzdFxuICAgIHdoaWxlIChjX2xlbiA+IDEgJiYgaSA8IGxlbikge1xuICAgICAgYyA9IChjIDw8IDYpIHwgKGJ1ZltpKytdICYgMHgzZik7XG4gICAgICBjX2xlbi0tO1xuICAgIH1cblxuICAgIC8vIHRlcm1pbmF0ZWQgYnkgZW5kIG9mIHN0cmluZz9cbiAgICBpZiAoY19sZW4gPiAxKSB7IHV0ZjE2YnVmW291dCsrXSA9IDB4ZmZmZDsgY29udGludWU7IH1cblxuICAgIGlmIChjIDwgMHgxMDAwMCkge1xuICAgICAgdXRmMTZidWZbb3V0KytdID0gYztcbiAgICB9IGVsc2Uge1xuICAgICAgYyAtPSAweDEwMDAwO1xuICAgICAgdXRmMTZidWZbb3V0KytdID0gMHhkODAwIHwgKChjID4+IDEwKSAmIDB4M2ZmKTtcbiAgICAgIHV0ZjE2YnVmW291dCsrXSA9IDB4ZGMwMCB8IChjICYgMHgzZmYpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWYyYmluc3RyaW5nKHV0ZjE2YnVmLCBvdXQpO1xufTtcblxuXG4vLyBDYWxjdWxhdGUgbWF4IHBvc3NpYmxlIHBvc2l0aW9uIGluIHV0ZjggYnVmZmVyLFxuLy8gdGhhdCB3aWxsIG5vdCBicmVhayBzZXF1ZW5jZS4gSWYgdGhhdCdzIG5vdCBwb3NzaWJsZVxuLy8gLSAodmVyeSBzbWFsbCBsaW1pdHMpIHJldHVybiBtYXggc2l6ZSBhcyBpcy5cbi8vXG4vLyBidWZbXSAtIHV0ZjggYnl0ZXMgYXJyYXlcbi8vIG1heCAgIC0gbGVuZ3RoIGxpbWl0IChtYW5kYXRvcnkpO1xuZXhwb3J0cy51dGY4Ym9yZGVyID0gZnVuY3Rpb24gKGJ1ZiwgbWF4KSB7XG4gIHZhciBwb3M7XG5cbiAgbWF4ID0gbWF4IHx8IGJ1Zi5sZW5ndGg7XG4gIGlmIChtYXggPiBidWYubGVuZ3RoKSB7IG1heCA9IGJ1Zi5sZW5ndGg7IH1cblxuICAvLyBnbyBiYWNrIGZyb20gbGFzdCBwb3NpdGlvbiwgdW50aWwgc3RhcnQgb2Ygc2VxdWVuY2UgZm91bmRcbiAgcG9zID0gbWF4IC0gMTtcbiAgd2hpbGUgKHBvcyA+PSAwICYmIChidWZbcG9zXSAmIDB4QzApID09PSAweDgwKSB7IHBvcy0tOyB9XG5cbiAgLy8gRnVja3VwIC0gdmVyeSBzbWFsbCBhbmQgYnJva2VuIHNlcXVlbmNlLFxuICAvLyByZXR1cm4gbWF4LCBiZWNhdXNlIHdlIHNob3VsZCByZXR1cm4gc29tZXRoaW5nIGFueXdheS5cbiAgaWYgKHBvcyA8IDApIHsgcmV0dXJuIG1heDsgfVxuXG4gIC8vIElmIHdlIGNhbWUgdG8gc3RhcnQgb2YgYnVmZmVyIC0gdGhhdCBtZWFucyB2dWZmZXIgaXMgdG9vIHNtYWxsLFxuICAvLyByZXR1cm4gbWF4IHRvby5cbiAgaWYgKHBvcyA9PT0gMCkgeyByZXR1cm4gbWF4OyB9XG5cbiAgcmV0dXJuIChwb3MgKyBfdXRmOGxlbltidWZbcG9zXV0gPiBtYXgpID8gcG9zIDogbWF4O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gTm90ZTogYWRsZXIzMiB0YWtlcyAxMiUgZm9yIGxldmVsIDAgYW5kIDIlIGZvciBsZXZlbCA2LlxuLy8gSXQgZG9lc24ndCB3b3J0aCB0byBtYWtlIGFkZGl0aW9uYWwgb3B0aW1pemF0aW9uYSBhcyBpbiBvcmlnaW5hbC5cbi8vIFNtYWxsIHNpemUgaXMgcHJlZmVyYWJsZS5cblxuZnVuY3Rpb24gYWRsZXIzMihhZGxlciwgYnVmLCBsZW4sIHBvcykge1xuICB2YXIgczEgPSAoYWRsZXIgJiAweGZmZmYpIHwwLFxuICAgICAgczIgPSAoKGFkbGVyID4+PiAxNikgJiAweGZmZmYpIHwwLFxuICAgICAgbiA9IDA7XG5cbiAgd2hpbGUgKGxlbiAhPT0gMCkge1xuICAgIC8vIFNldCBsaW1pdCB+IHR3aWNlIGxlc3MgdGhhbiA1NTUyLCB0byBrZWVwXG4gICAgLy8gczIgaW4gMzEtYml0cywgYmVjYXVzZSB3ZSBmb3JjZSBzaWduZWQgaW50cy5cbiAgICAvLyBpbiBvdGhlciBjYXNlICU9IHdpbGwgZmFpbC5cbiAgICBuID0gbGVuID4gMjAwMCA/IDIwMDAgOiBsZW47XG4gICAgbGVuIC09IG47XG5cbiAgICBkbyB7XG4gICAgICBzMSA9IChzMSArIGJ1Zltwb3MrK10pIHwwO1xuICAgICAgczIgPSAoczIgKyBzMSkgfDA7XG4gICAgfSB3aGlsZSAoLS1uKTtcblxuICAgIHMxICU9IDY1NTIxO1xuICAgIHMyICU9IDY1NTIxO1xuICB9XG5cbiAgcmV0dXJuIChzMSB8IChzMiA8PCAxNikpIHwwO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0gYWRsZXIzMjtcbiIsIid1c2Ugc3RyaWN0JztcblxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICAvKiBBbGxvd2VkIGZsdXNoIHZhbHVlczsgc2VlIGRlZmxhdGUoKSBhbmQgaW5mbGF0ZSgpIGJlbG93IGZvciBkZXRhaWxzICovXG4gIFpfTk9fRkxVU0g6ICAgICAgICAgMCxcbiAgWl9QQVJUSUFMX0ZMVVNIOiAgICAxLFxuICBaX1NZTkNfRkxVU0g6ICAgICAgIDIsXG4gIFpfRlVMTF9GTFVTSDogICAgICAgMyxcbiAgWl9GSU5JU0g6ICAgICAgICAgICA0LFxuICBaX0JMT0NLOiAgICAgICAgICAgIDUsXG4gIFpfVFJFRVM6ICAgICAgICAgICAgNixcblxuICAvKiBSZXR1cm4gY29kZXMgZm9yIHRoZSBjb21wcmVzc2lvbi9kZWNvbXByZXNzaW9uIGZ1bmN0aW9ucy4gTmVnYXRpdmUgdmFsdWVzXG4gICogYXJlIGVycm9ycywgcG9zaXRpdmUgdmFsdWVzIGFyZSB1c2VkIGZvciBzcGVjaWFsIGJ1dCBub3JtYWwgZXZlbnRzLlxuICAqL1xuICBaX09LOiAgICAgICAgICAgICAgIDAsXG4gIFpfU1RSRUFNX0VORDogICAgICAgMSxcbiAgWl9ORUVEX0RJQ1Q6ICAgICAgICAyLFxuICBaX0VSUk5POiAgICAgICAgICAgLTEsXG4gIFpfU1RSRUFNX0VSUk9SOiAgICAtMixcbiAgWl9EQVRBX0VSUk9SOiAgICAgIC0zLFxuICAvL1pfTUVNX0VSUk9SOiAgICAgLTQsXG4gIFpfQlVGX0VSUk9SOiAgICAgICAtNSxcbiAgLy9aX1ZFUlNJT05fRVJST1I6IC02LFxuXG4gIC8qIGNvbXByZXNzaW9uIGxldmVscyAqL1xuICBaX05PX0NPTVBSRVNTSU9OOiAgICAgICAgIDAsXG4gIFpfQkVTVF9TUEVFRDogICAgICAgICAgICAgMSxcbiAgWl9CRVNUX0NPTVBSRVNTSU9OOiAgICAgICA5LFxuICBaX0RFRkFVTFRfQ09NUFJFU1NJT046ICAgLTEsXG5cblxuICBaX0ZJTFRFUkVEOiAgICAgICAgICAgICAgIDEsXG4gIFpfSFVGRk1BTl9PTkxZOiAgICAgICAgICAgMixcbiAgWl9STEU6ICAgICAgICAgICAgICAgICAgICAzLFxuICBaX0ZJWEVEOiAgICAgICAgICAgICAgICAgIDQsXG4gIFpfREVGQVVMVF9TVFJBVEVHWTogICAgICAgMCxcblxuICAvKiBQb3NzaWJsZSB2YWx1ZXMgb2YgdGhlIGRhdGFfdHlwZSBmaWVsZCAodGhvdWdoIHNlZSBpbmZsYXRlKCkpICovXG4gIFpfQklOQVJZOiAgICAgICAgICAgICAgICAgMCxcbiAgWl9URVhUOiAgICAgICAgICAgICAgICAgICAxLFxuICAvL1pfQVNDSUk6ICAgICAgICAgICAgICAgIDEsIC8vID0gWl9URVhUIChkZXByZWNhdGVkKVxuICBaX1VOS05PV046ICAgICAgICAgICAgICAgIDIsXG5cbiAgLyogVGhlIGRlZmxhdGUgY29tcHJlc3Npb24gbWV0aG9kICovXG4gIFpfREVGTEFURUQ6ICAgICAgICAgICAgICAgOFxuICAvL1pfTlVMTDogICAgICAgICAgICAgICAgIG51bGwgLy8gVXNlIC0xIG9yIG51bGwgaW5saW5lLCBkZXBlbmRpbmcgb24gdmFyIHR5cGVcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vIE5vdGU6IHdlIGNhbid0IGdldCBzaWduaWZpY2FudCBzcGVlZCBib29zdCBoZXJlLlxuLy8gU28gd3JpdGUgY29kZSB0byBtaW5pbWl6ZSBzaXplIC0gbm8gcHJlZ2VuZXJhdGVkIHRhYmxlc1xuLy8gYW5kIGFycmF5IHRvb2xzIGRlcGVuZGVuY2llcy5cblxuXG4vLyBVc2Ugb3JkaW5hcnkgYXJyYXksIHNpbmNlIHVudHlwZWQgbWFrZXMgbm8gYm9vc3QgaGVyZVxuZnVuY3Rpb24gbWFrZVRhYmxlKCkge1xuICB2YXIgYywgdGFibGUgPSBbXTtcblxuICBmb3IgKHZhciBuID0gMDsgbiA8IDI1NjsgbisrKSB7XG4gICAgYyA9IG47XG4gICAgZm9yICh2YXIgayA9IDA7IGsgPCA4OyBrKyspIHtcbiAgICAgIGMgPSAoKGMgJiAxKSA/ICgweEVEQjg4MzIwIF4gKGMgPj4+IDEpKSA6IChjID4+PiAxKSk7XG4gICAgfVxuICAgIHRhYmxlW25dID0gYztcbiAgfVxuXG4gIHJldHVybiB0YWJsZTtcbn1cblxuLy8gQ3JlYXRlIHRhYmxlIG9uIGxvYWQuIEp1c3QgMjU1IHNpZ25lZCBsb25ncy4gTm90IGEgcHJvYmxlbS5cbnZhciBjcmNUYWJsZSA9IG1ha2VUYWJsZSgpO1xuXG5cbmZ1bmN0aW9uIGNyYzMyKGNyYywgYnVmLCBsZW4sIHBvcykge1xuICB2YXIgdCA9IGNyY1RhYmxlLFxuICAgICAgZW5kID0gcG9zICsgbGVuO1xuXG4gIGNyYyBePSAtMTtcblxuICBmb3IgKHZhciBpID0gcG9zOyBpIDwgZW5kOyBpKyspIHtcbiAgICBjcmMgPSAoY3JjID4+PiA4KSBeIHRbKGNyYyBeIGJ1ZltpXSkgJiAweEZGXTtcbiAgfVxuXG4gIHJldHVybiAoY3JjIF4gKC0xKSk7IC8vID4+PiAwO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0gY3JjMzI7XG4iLCIndXNlIHN0cmljdCc7XG5cblxuZnVuY3Rpb24gR1poZWFkZXIoKSB7XG4gIC8qIHRydWUgaWYgY29tcHJlc3NlZCBkYXRhIGJlbGlldmVkIHRvIGJlIHRleHQgKi9cbiAgdGhpcy50ZXh0ICAgICAgID0gMDtcbiAgLyogbW9kaWZpY2F0aW9uIHRpbWUgKi9cbiAgdGhpcy50aW1lICAgICAgID0gMDtcbiAgLyogZXh0cmEgZmxhZ3MgKG5vdCB1c2VkIHdoZW4gd3JpdGluZyBhIGd6aXAgZmlsZSkgKi9cbiAgdGhpcy54ZmxhZ3MgICAgID0gMDtcbiAgLyogb3BlcmF0aW5nIHN5c3RlbSAqL1xuICB0aGlzLm9zICAgICAgICAgPSAwO1xuICAvKiBwb2ludGVyIHRvIGV4dHJhIGZpZWxkIG9yIFpfTlVMTCBpZiBub25lICovXG4gIHRoaXMuZXh0cmEgICAgICA9IG51bGw7XG4gIC8qIGV4dHJhIGZpZWxkIGxlbmd0aCAodmFsaWQgaWYgZXh0cmEgIT0gWl9OVUxMKSAqL1xuICB0aGlzLmV4dHJhX2xlbiAgPSAwOyAvLyBBY3R1YWxseSwgd2UgZG9uJ3QgbmVlZCBpdCBpbiBKUyxcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGxlYXZlIGZvciBmZXcgY29kZSBtb2RpZmljYXRpb25zXG5cbiAgLy9cbiAgLy8gU2V0dXAgbGltaXRzIGlzIG5vdCBuZWNlc3NhcnkgYmVjYXVzZSBpbiBqcyB3ZSBzaG91bGQgbm90IHByZWFsbG9jYXRlIG1lbW9yeVxuICAvLyBmb3IgaW5mbGF0ZSB1c2UgY29uc3RhbnQgbGltaXQgaW4gNjU1MzYgYnl0ZXNcbiAgLy9cblxuICAvKiBzcGFjZSBhdCBleHRyYSAob25seSB3aGVuIHJlYWRpbmcgaGVhZGVyKSAqL1xuICAvLyB0aGlzLmV4dHJhX21heCAgPSAwO1xuICAvKiBwb2ludGVyIHRvIHplcm8tdGVybWluYXRlZCBmaWxlIG5hbWUgb3IgWl9OVUxMICovXG4gIHRoaXMubmFtZSAgICAgICA9ICcnO1xuICAvKiBzcGFjZSBhdCBuYW1lIChvbmx5IHdoZW4gcmVhZGluZyBoZWFkZXIpICovXG4gIC8vIHRoaXMubmFtZV9tYXggICA9IDA7XG4gIC8qIHBvaW50ZXIgdG8gemVyby10ZXJtaW5hdGVkIGNvbW1lbnQgb3IgWl9OVUxMICovXG4gIHRoaXMuY29tbWVudCAgICA9ICcnO1xuICAvKiBzcGFjZSBhdCBjb21tZW50IChvbmx5IHdoZW4gcmVhZGluZyBoZWFkZXIpICovXG4gIC8vIHRoaXMuY29tbV9tYXggICA9IDA7XG4gIC8qIHRydWUgaWYgdGhlcmUgd2FzIG9yIHdpbGwgYmUgYSBoZWFkZXIgY3JjICovXG4gIHRoaXMuaGNyYyAgICAgICA9IDA7XG4gIC8qIHRydWUgd2hlbiBkb25lIHJlYWRpbmcgZ3ppcCBoZWFkZXIgKG5vdCB1c2VkIHdoZW4gd3JpdGluZyBhIGd6aXAgZmlsZSkgKi9cbiAgdGhpcy5kb25lICAgICAgID0gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gR1poZWFkZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vIFNlZSBzdGF0ZSBkZWZzIGZyb20gaW5mbGF0ZS5qc1xudmFyIEJBRCA9IDMwOyAgICAgICAvKiBnb3QgYSBkYXRhIGVycm9yIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovXG52YXIgVFlQRSA9IDEyOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIHR5cGUgYml0cywgaW5jbHVkaW5nIGxhc3QtZmxhZyBiaXQgKi9cblxuLypcbiAgIERlY29kZSBsaXRlcmFsLCBsZW5ndGgsIGFuZCBkaXN0YW5jZSBjb2RlcyBhbmQgd3JpdGUgb3V0IHRoZSByZXN1bHRpbmdcbiAgIGxpdGVyYWwgYW5kIG1hdGNoIGJ5dGVzIHVudGlsIGVpdGhlciBub3QgZW5vdWdoIGlucHV0IG9yIG91dHB1dCBpc1xuICAgYXZhaWxhYmxlLCBhbiBlbmQtb2YtYmxvY2sgaXMgZW5jb3VudGVyZWQsIG9yIGEgZGF0YSBlcnJvciBpcyBlbmNvdW50ZXJlZC5cbiAgIFdoZW4gbGFyZ2UgZW5vdWdoIGlucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBhcmUgc3VwcGxpZWQgdG8gaW5mbGF0ZSgpLCBmb3JcbiAgIGV4YW1wbGUsIGEgMTZLIGlucHV0IGJ1ZmZlciBhbmQgYSA2NEsgb3V0cHV0IGJ1ZmZlciwgbW9yZSB0aGFuIDk1JSBvZiB0aGVcbiAgIGluZmxhdGUgZXhlY3V0aW9uIHRpbWUgaXMgc3BlbnQgaW4gdGhpcyByb3V0aW5lLlxuXG4gICBFbnRyeSBhc3N1bXB0aW9uczpcblxuICAgICAgICBzdGF0ZS5tb2RlID09PSBMRU5cbiAgICAgICAgc3RybS5hdmFpbF9pbiA+PSA2XG4gICAgICAgIHN0cm0uYXZhaWxfb3V0ID49IDI1OFxuICAgICAgICBzdGFydCA+PSBzdHJtLmF2YWlsX291dFxuICAgICAgICBzdGF0ZS5iaXRzIDwgOFxuXG4gICBPbiByZXR1cm4sIHN0YXRlLm1vZGUgaXMgb25lIG9mOlxuXG4gICAgICAgIExFTiAtLSByYW4gb3V0IG9mIGVub3VnaCBvdXRwdXQgc3BhY2Ugb3IgZW5vdWdoIGF2YWlsYWJsZSBpbnB1dFxuICAgICAgICBUWVBFIC0tIHJlYWNoZWQgZW5kIG9mIGJsb2NrIGNvZGUsIGluZmxhdGUoKSB0byBpbnRlcnByZXQgbmV4dCBibG9ja1xuICAgICAgICBCQUQgLS0gZXJyb3IgaW4gYmxvY2sgZGF0YVxuXG4gICBOb3RlczpcblxuICAgIC0gVGhlIG1heGltdW0gaW5wdXQgYml0cyB1c2VkIGJ5IGEgbGVuZ3RoL2Rpc3RhbmNlIHBhaXIgaXMgMTUgYml0cyBmb3IgdGhlXG4gICAgICBsZW5ndGggY29kZSwgNSBiaXRzIGZvciB0aGUgbGVuZ3RoIGV4dHJhLCAxNSBiaXRzIGZvciB0aGUgZGlzdGFuY2UgY29kZSxcbiAgICAgIGFuZCAxMyBiaXRzIGZvciB0aGUgZGlzdGFuY2UgZXh0cmEuICBUaGlzIHRvdGFscyA0OCBiaXRzLCBvciBzaXggYnl0ZXMuXG4gICAgICBUaGVyZWZvcmUgaWYgc3RybS5hdmFpbF9pbiA+PSA2LCB0aGVuIHRoZXJlIGlzIGVub3VnaCBpbnB1dCB0byBhdm9pZFxuICAgICAgY2hlY2tpbmcgZm9yIGF2YWlsYWJsZSBpbnB1dCB3aGlsZSBkZWNvZGluZy5cblxuICAgIC0gVGhlIG1heGltdW0gYnl0ZXMgdGhhdCBhIHNpbmdsZSBsZW5ndGgvZGlzdGFuY2UgcGFpciBjYW4gb3V0cHV0IGlzIDI1OFxuICAgICAgYnl0ZXMsIHdoaWNoIGlzIHRoZSBtYXhpbXVtIGxlbmd0aCB0aGF0IGNhbiBiZSBjb2RlZC4gIGluZmxhdGVfZmFzdCgpXG4gICAgICByZXF1aXJlcyBzdHJtLmF2YWlsX291dCA+PSAyNTggZm9yIGVhY2ggbG9vcCB0byBhdm9pZCBjaGVja2luZyBmb3JcbiAgICAgIG91dHB1dCBzcGFjZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmZsYXRlX2Zhc3Qoc3RybSwgc3RhcnQpIHtcbiAgdmFyIHN0YXRlO1xuICB2YXIgX2luOyAgICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5pbnB1dCAqL1xuICB2YXIgbGFzdDsgICAgICAgICAgICAgICAgICAgLyogaGF2ZSBlbm91Z2ggaW5wdXQgd2hpbGUgaW4gPCBsYXN0ICovXG4gIHZhciBfb3V0OyAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLm91dHB1dCAqL1xuICB2YXIgYmVnOyAgICAgICAgICAgICAgICAgICAgLyogaW5mbGF0ZSgpJ3MgaW5pdGlhbCBzdHJtLm91dHB1dCAqL1xuICB2YXIgZW5kOyAgICAgICAgICAgICAgICAgICAgLyogd2hpbGUgb3V0IDwgZW5kLCBlbm91Z2ggc3BhY2UgYXZhaWxhYmxlICovXG4vLyNpZmRlZiBJTkZMQVRFX1NUUklDVFxuICB2YXIgZG1heDsgICAgICAgICAgICAgICAgICAgLyogbWF4aW11bSBkaXN0YW5jZSBmcm9tIHpsaWIgaGVhZGVyICovXG4vLyNlbmRpZlxuICB2YXIgd3NpemU7ICAgICAgICAgICAgICAgICAgLyogd2luZG93IHNpemUgb3IgemVybyBpZiBub3QgdXNpbmcgd2luZG93ICovXG4gIHZhciB3aGF2ZTsgICAgICAgICAgICAgICAgICAvKiB2YWxpZCBieXRlcyBpbiB0aGUgd2luZG93ICovXG4gIHZhciB3bmV4dDsgICAgICAgICAgICAgICAgICAvKiB3aW5kb3cgd3JpdGUgaW5kZXggKi9cbiAgLy8gVXNlIGBzX3dpbmRvd2AgaW5zdGVhZCBgd2luZG93YCwgYXZvaWQgY29uZmxpY3Qgd2l0aCBpbnN0cnVtZW50YXRpb24gdG9vbHNcbiAgdmFyIHNfd2luZG93OyAgICAgICAgICAgICAgIC8qIGFsbG9jYXRlZCBzbGlkaW5nIHdpbmRvdywgaWYgd3NpemUgIT0gMCAqL1xuICB2YXIgaG9sZDsgICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5ob2xkICovXG4gIHZhciBiaXRzOyAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmJpdHMgKi9cbiAgdmFyIGxjb2RlOyAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0ubGVuY29kZSAqL1xuICB2YXIgZGNvZGU7ICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5kaXN0Y29kZSAqL1xuICB2YXIgbG1hc2s7ICAgICAgICAgICAgICAgICAgLyogbWFzayBmb3IgZmlyc3QgbGV2ZWwgb2YgbGVuZ3RoIGNvZGVzICovXG4gIHZhciBkbWFzazsgICAgICAgICAgICAgICAgICAvKiBtYXNrIGZvciBmaXJzdCBsZXZlbCBvZiBkaXN0YW5jZSBjb2RlcyAqL1xuICB2YXIgaGVyZTsgICAgICAgICAgICAgICAgICAgLyogcmV0cmlldmVkIHRhYmxlIGVudHJ5ICovXG4gIHZhciBvcDsgICAgICAgICAgICAgICAgICAgICAvKiBjb2RlIGJpdHMsIG9wZXJhdGlvbiwgZXh0cmEgYml0cywgb3IgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICB3aW5kb3cgcG9zaXRpb24sIHdpbmRvdyBieXRlcyB0byBjb3B5ICovXG4gIHZhciBsZW47ICAgICAgICAgICAgICAgICAgICAvKiBtYXRjaCBsZW5ndGgsIHVudXNlZCBieXRlcyAqL1xuICB2YXIgZGlzdDsgICAgICAgICAgICAgICAgICAgLyogbWF0Y2ggZGlzdGFuY2UgKi9cbiAgdmFyIGZyb207ICAgICAgICAgICAgICAgICAgIC8qIHdoZXJlIHRvIGNvcHkgbWF0Y2ggZnJvbSAqL1xuICB2YXIgZnJvbV9zb3VyY2U7XG5cblxuICB2YXIgaW5wdXQsIG91dHB1dDsgLy8gSlMgc3BlY2lmaWMsIGJlY2F1c2Ugd2UgaGF2ZSBubyBwb2ludGVyc1xuXG4gIC8qIGNvcHkgc3RhdGUgdG8gbG9jYWwgdmFyaWFibGVzICovXG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgLy9oZXJlID0gc3RhdGUuaGVyZTtcbiAgX2luID0gc3RybS5uZXh0X2luO1xuICBpbnB1dCA9IHN0cm0uaW5wdXQ7XG4gIGxhc3QgPSBfaW4gKyAoc3RybS5hdmFpbF9pbiAtIDUpO1xuICBfb3V0ID0gc3RybS5uZXh0X291dDtcbiAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7XG4gIGJlZyA9IF9vdXQgLSAoc3RhcnQgLSBzdHJtLmF2YWlsX291dCk7XG4gIGVuZCA9IF9vdXQgKyAoc3RybS5hdmFpbF9vdXQgLSAyNTcpO1xuLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1RcbiAgZG1heCA9IHN0YXRlLmRtYXg7XG4vLyNlbmRpZlxuICB3c2l6ZSA9IHN0YXRlLndzaXplO1xuICB3aGF2ZSA9IHN0YXRlLndoYXZlO1xuICB3bmV4dCA9IHN0YXRlLnduZXh0O1xuICBzX3dpbmRvdyA9IHN0YXRlLndpbmRvdztcbiAgaG9sZCA9IHN0YXRlLmhvbGQ7XG4gIGJpdHMgPSBzdGF0ZS5iaXRzO1xuICBsY29kZSA9IHN0YXRlLmxlbmNvZGU7XG4gIGRjb2RlID0gc3RhdGUuZGlzdGNvZGU7XG4gIGxtYXNrID0gKDEgPDwgc3RhdGUubGVuYml0cykgLSAxO1xuICBkbWFzayA9ICgxIDw8IHN0YXRlLmRpc3RiaXRzKSAtIDE7XG5cblxuICAvKiBkZWNvZGUgbGl0ZXJhbHMgYW5kIGxlbmd0aC9kaXN0YW5jZXMgdW50aWwgZW5kLW9mLWJsb2NrIG9yIG5vdCBlbm91Z2hcbiAgICAgaW5wdXQgZGF0YSBvciBvdXRwdXQgc3BhY2UgKi9cblxuICB0b3A6XG4gIGRvIHtcbiAgICBpZiAoYml0cyA8IDE1KSB7XG4gICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgYml0cyArPSA4O1xuICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgIGJpdHMgKz0gODtcbiAgICB9XG5cbiAgICBoZXJlID0gbGNvZGVbaG9sZCAmIGxtYXNrXTtcblxuICAgIGRvbGVuOlxuICAgIGZvciAoOzspIHsgLy8gR290byBlbXVsYXRpb25cbiAgICAgIG9wID0gaGVyZSA+Pj4gMjQvKmhlcmUuYml0cyovO1xuICAgICAgaG9sZCA+Pj49IG9wO1xuICAgICAgYml0cyAtPSBvcDtcbiAgICAgIG9wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmYvKmhlcmUub3AqLztcbiAgICAgIGlmIChvcCA9PT0gMCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgLyogbGl0ZXJhbCAqL1xuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgaGVyZS52YWwgPj0gMHgyMCAmJiBoZXJlLnZhbCA8IDB4N2YgP1xuICAgICAgICAvLyAgICAgICAgXCJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgJyVjJ1xcblwiIDpcbiAgICAgICAgLy8gICAgICAgIFwiaW5mbGF0ZTogICAgICAgICBsaXRlcmFsIDB4JTAyeFxcblwiLCBoZXJlLnZhbCkpO1xuICAgICAgICBvdXRwdXRbX291dCsrXSA9IGhlcmUgJiAweGZmZmYvKmhlcmUudmFsKi87XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChvcCAmIDE2KSB7ICAgICAgICAgICAgICAgICAgICAgLyogbGVuZ3RoIGJhc2UgKi9cbiAgICAgICAgbGVuID0gaGVyZSAmIDB4ZmZmZi8qaGVyZS52YWwqLztcbiAgICAgICAgb3AgJj0gMTU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGV4dHJhIGJpdHMgKi9cbiAgICAgICAgaWYgKG9wKSB7XG4gICAgICAgICAgaWYgKGJpdHMgPCBvcCkge1xuICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGVuICs9IGhvbGQgJiAoKDEgPDwgb3ApIC0gMSk7XG4gICAgICAgICAgaG9sZCA+Pj49IG9wO1xuICAgICAgICAgIGJpdHMgLT0gb3A7XG4gICAgICAgIH1cbiAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBsZW5ndGggJXVcXG5cIiwgbGVuKSk7XG4gICAgICAgIGlmIChiaXRzIDwgMTUpIHtcbiAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICBoZXJlID0gZGNvZGVbaG9sZCAmIGRtYXNrXTtcblxuICAgICAgICBkb2Rpc3Q6XG4gICAgICAgIGZvciAoOzspIHsgLy8gZ290byBlbXVsYXRpb25cbiAgICAgICAgICBvcCA9IGhlcmUgPj4+IDI0LypoZXJlLmJpdHMqLztcbiAgICAgICAgICBob2xkID4+Pj0gb3A7XG4gICAgICAgICAgYml0cyAtPSBvcDtcbiAgICAgICAgICBvcCA9IChoZXJlID4+PiAxNikgJiAweGZmLypoZXJlLm9wKi87XG5cbiAgICAgICAgICBpZiAob3AgJiAxNikgeyAgICAgICAgICAgICAgICAgICAgICAvKiBkaXN0YW5jZSBiYXNlICovXG4gICAgICAgICAgICBkaXN0ID0gaGVyZSAmIDB4ZmZmZi8qaGVyZS52YWwqLztcbiAgICAgICAgICAgIG9wICY9IDE1OyAgICAgICAgICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGV4dHJhIGJpdHMgKi9cbiAgICAgICAgICAgIGlmIChiaXRzIDwgb3ApIHtcbiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgICAgICBpZiAoYml0cyA8IG9wKSB7XG4gICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpc3QgKz0gaG9sZCAmICgoMSA8PCBvcCkgLSAxKTtcbi8vI2lmZGVmIElORkxBVEVfU1RSSUNUXG4gICAgICAgICAgICBpZiAoZGlzdCA+IGRtYXgpIHtcbiAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2snO1xuICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgICBicmVhayB0b3A7XG4gICAgICAgICAgICB9XG4vLyNlbmRpZlxuICAgICAgICAgICAgaG9sZCA+Pj49IG9wO1xuICAgICAgICAgICAgYml0cyAtPSBvcDtcbiAgICAgICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgZGlzdGFuY2UgJXVcXG5cIiwgZGlzdCkpO1xuICAgICAgICAgICAgb3AgPSBfb3V0IC0gYmVnOyAgICAgICAgICAgICAgICAvKiBtYXggZGlzdGFuY2UgaW4gb3V0cHV0ICovXG4gICAgICAgICAgICBpZiAoZGlzdCA+IG9wKSB7ICAgICAgICAgICAgICAgIC8qIHNlZSBpZiBjb3B5IGZyb20gd2luZG93ICovXG4gICAgICAgICAgICAgIG9wID0gZGlzdCAtIG9wOyAgICAgICAgICAgICAgIC8qIGRpc3RhbmNlIGJhY2sgaW4gd2luZG93ICovXG4gICAgICAgICAgICAgIGlmIChvcCA+IHdoYXZlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLnNhbmUpIHtcbiAgICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJztcbiAgICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICAgICAgICBicmVhayB0b3A7XG4gICAgICAgICAgICAgICAgfVxuXG4vLyAoISkgVGhpcyBibG9jayBpcyBkaXNhYmxlZCBpbiB6bGliIGRlZmFpbHRzLFxuLy8gZG9uJ3QgZW5hYmxlIGl0IGZvciBiaW5hcnkgY29tcGF0aWJpbGl0eVxuLy8jaWZkZWYgSU5GTEFURV9BTExPV19JTlZBTElEX0RJU1RBTkNFX1RPT0ZBUl9BUlJSXG4vLyAgICAgICAgICAgICAgICBpZiAobGVuIDw9IG9wIC0gd2hhdmUpIHtcbi8vICAgICAgICAgICAgICAgICAgZG8ge1xuLy8gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gMDtcbi8vICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1sZW4pO1xuLy8gICAgICAgICAgICAgICAgICBjb250aW51ZSB0b3A7XG4vLyAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICBsZW4gLT0gb3AgLSB3aGF2ZTtcbi8vICAgICAgICAgICAgICAgIGRvIHtcbi8vICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSAwO1xuLy8gICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCA+IHdoYXZlKTtcbi8vICAgICAgICAgICAgICAgIGlmIChvcCA9PT0gMCkge1xuLy8gICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7XG4vLyAgICAgICAgICAgICAgICAgIGRvIHtcbi8vICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuLy8gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLWxlbik7XG4vLyAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIHRvcDtcbi8vICAgICAgICAgICAgICAgIH1cbi8vI2VuZGlmXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZnJvbSA9IDA7IC8vIHdpbmRvdyBpbmRleFxuICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IHNfd2luZG93O1xuICAgICAgICAgICAgICBpZiAod25leHQgPT09IDApIHsgICAgICAgICAgIC8qIHZlcnkgY29tbW9uIGNhc2UgKi9cbiAgICAgICAgICAgICAgICBmcm9tICs9IHdzaXplIC0gb3A7XG4gICAgICAgICAgICAgICAgaWYgKG9wIDwgbGVuKSB7ICAgICAgICAgLyogc29tZSBmcm9tIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgICAgbGVuIC09IG9wO1xuICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107XG4gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTtcbiAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgIC8qIHJlc3QgZnJvbSBvdXRwdXQgKi9cbiAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmICh3bmV4dCA8IG9wKSB7ICAgICAgLyogd3JhcCBhcm91bmQgd2luZG93ICovXG4gICAgICAgICAgICAgICAgZnJvbSArPSB3c2l6ZSArIHduZXh0IC0gb3A7XG4gICAgICAgICAgICAgICAgb3AgLT0gd25leHQ7XG4gICAgICAgICAgICAgICAgaWYgKG9wIDwgbGVuKSB7ICAgICAgICAgLyogc29tZSBmcm9tIGVuZCBvZiB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICAgIGxlbiAtPSBvcDtcbiAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBzX3dpbmRvd1tmcm9tKytdO1xuICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7XG4gICAgICAgICAgICAgICAgICBmcm9tID0gMDtcbiAgICAgICAgICAgICAgICAgIGlmICh3bmV4dCA8IGxlbikgeyAgLyogc29tZSBmcm9tIHN0YXJ0IG9mIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgICAgICBvcCA9IHduZXh0O1xuICAgICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7XG4gICAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107XG4gICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApO1xuICAgICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAgICAgLyogcmVzdCBmcm9tIG91dHB1dCAqL1xuICAgICAgICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgIC8qIGNvbnRpZ3VvdXMgaW4gd2luZG93ICovXG4gICAgICAgICAgICAgICAgZnJvbSArPSB3bmV4dCAtIG9wO1xuICAgICAgICAgICAgICAgIGlmIChvcCA8IGxlbikgeyAgICAgICAgIC8qIHNvbWUgZnJvbSB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICAgIGxlbiAtPSBvcDtcbiAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBzX3dpbmRvd1tmcm9tKytdO1xuICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7XG4gICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAvKiByZXN0IGZyb20gb3V0cHV0ICovXG4gICAgICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgd2hpbGUgKGxlbiA+IDIpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBsZW4gLT0gMztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAobGVuKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgICAgICAgICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0OyAgICAgICAgICAvKiBjb3B5IGRpcmVjdCBmcm9tIG91dHB1dCAqL1xuICAgICAgICAgICAgICBkbyB7ICAgICAgICAgICAgICAgICAgICAgICAgLyogbWluaW11bSBsZW5ndGggaXMgdGhyZWUgKi9cbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBsZW4gLT0gMztcbiAgICAgICAgICAgICAgfSB3aGlsZSAobGVuID4gMik7XG4gICAgICAgICAgICAgIGlmIChsZW4pIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuICAgICAgICAgICAgICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmICgob3AgJiA2NCkgPT09IDApIHsgICAgICAgICAgLyogMm5kIGxldmVsIGRpc3RhbmNlIGNvZGUgKi9cbiAgICAgICAgICAgIGhlcmUgPSBkY29kZVsoaGVyZSAmIDB4ZmZmZikvKmhlcmUudmFsKi8gKyAoaG9sZCAmICgoMSA8PCBvcCkgLSAxKSldO1xuICAgICAgICAgICAgY29udGludWUgZG9kaXN0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgY29kZSc7XG4gICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgYnJlYWsgdG9wO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrOyAvLyBuZWVkIHRvIGVtdWxhdGUgZ290byB2aWEgXCJjb250aW51ZVwiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKChvcCAmIDY0KSA9PT0gMCkgeyAgICAgICAgICAgICAgLyogMm5kIGxldmVsIGxlbmd0aCBjb2RlICovXG4gICAgICAgIGhlcmUgPSBsY29kZVsoaGVyZSAmIDB4ZmZmZikvKmhlcmUudmFsKi8gKyAoaG9sZCAmICgoMSA8PCBvcCkgLSAxKSldO1xuICAgICAgICBjb250aW51ZSBkb2xlbjtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG9wICYgMzIpIHsgICAgICAgICAgICAgICAgICAgICAvKiBlbmQtb2YtYmxvY2sgKi9cbiAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBlbmQgb2YgYmxvY2tcXG5cIikpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRTtcbiAgICAgICAgYnJlYWsgdG9wO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgbGl0ZXJhbC9sZW5ndGggY29kZSc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrIHRvcDtcbiAgICAgIH1cblxuICAgICAgYnJlYWs7IC8vIG5lZWQgdG8gZW11bGF0ZSBnb3RvIHZpYSBcImNvbnRpbnVlXCJcbiAgICB9XG4gIH0gd2hpbGUgKF9pbiA8IGxhc3QgJiYgX291dCA8IGVuZCk7XG5cbiAgLyogcmV0dXJuIHVudXNlZCBieXRlcyAob24gZW50cnksIGJpdHMgPCA4LCBzbyBpbiB3b24ndCBnbyB0b28gZmFyIGJhY2spICovXG4gIGxlbiA9IGJpdHMgPj4gMztcbiAgX2luIC09IGxlbjtcbiAgYml0cyAtPSBsZW4gPDwgMztcbiAgaG9sZCAmPSAoMSA8PCBiaXRzKSAtIDE7XG5cbiAgLyogdXBkYXRlIHN0YXRlIGFuZCByZXR1cm4gKi9cbiAgc3RybS5uZXh0X2luID0gX2luO1xuICBzdHJtLm5leHRfb3V0ID0gX291dDtcbiAgc3RybS5hdmFpbF9pbiA9IChfaW4gPCBsYXN0ID8gNSArIChsYXN0IC0gX2luKSA6IDUgLSAoX2luIC0gbGFzdCkpO1xuICBzdHJtLmF2YWlsX291dCA9IChfb3V0IDwgZW5kID8gMjU3ICsgKGVuZCAtIF9vdXQpIDogMjU3IC0gKF9vdXQgLSBlbmQpKTtcbiAgc3RhdGUuaG9sZCA9IGhvbGQ7XG4gIHN0YXRlLmJpdHMgPSBiaXRzO1xuICByZXR1cm47XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbnZhciB1dGlscyAgICAgICAgID0gcmVxdWlyZSgnLi4vdXRpbHMvY29tbW9uJyk7XG52YXIgYWRsZXIzMiAgICAgICA9IHJlcXVpcmUoJy4vYWRsZXIzMicpO1xudmFyIGNyYzMyICAgICAgICAgPSByZXF1aXJlKCcuL2NyYzMyJyk7XG52YXIgaW5mbGF0ZV9mYXN0ICA9IHJlcXVpcmUoJy4vaW5mZmFzdCcpO1xudmFyIGluZmxhdGVfdGFibGUgPSByZXF1aXJlKCcuL2luZnRyZWVzJyk7XG5cbnZhciBDT0RFUyA9IDA7XG52YXIgTEVOUyA9IDE7XG52YXIgRElTVFMgPSAyO1xuXG4vKiBQdWJsaWMgY29uc3RhbnRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuXG4vKiBBbGxvd2VkIGZsdXNoIHZhbHVlczsgc2VlIGRlZmxhdGUoKSBhbmQgaW5mbGF0ZSgpIGJlbG93IGZvciBkZXRhaWxzICovXG4vL3ZhciBaX05PX0ZMVVNIICAgICAgPSAwO1xuLy92YXIgWl9QQVJUSUFMX0ZMVVNIID0gMTtcbi8vdmFyIFpfU1lOQ19GTFVTSCAgICA9IDI7XG4vL3ZhciBaX0ZVTExfRkxVU0ggICAgPSAzO1xudmFyIFpfRklOSVNIICAgICAgICA9IDQ7XG52YXIgWl9CTE9DSyAgICAgICAgID0gNTtcbnZhciBaX1RSRUVTICAgICAgICAgPSA2O1xuXG5cbi8qIFJldHVybiBjb2RlcyBmb3IgdGhlIGNvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gZnVuY3Rpb25zLiBOZWdhdGl2ZSB2YWx1ZXNcbiAqIGFyZSBlcnJvcnMsIHBvc2l0aXZlIHZhbHVlcyBhcmUgdXNlZCBmb3Igc3BlY2lhbCBidXQgbm9ybWFsIGV2ZW50cy5cbiAqL1xudmFyIFpfT0sgICAgICAgICAgICA9IDA7XG52YXIgWl9TVFJFQU1fRU5EICAgID0gMTtcbnZhciBaX05FRURfRElDVCAgICAgPSAyO1xuLy92YXIgWl9FUlJOTyAgICAgICAgID0gLTE7XG52YXIgWl9TVFJFQU1fRVJST1IgID0gLTI7XG52YXIgWl9EQVRBX0VSUk9SICAgID0gLTM7XG52YXIgWl9NRU1fRVJST1IgICAgID0gLTQ7XG52YXIgWl9CVUZfRVJST1IgICAgID0gLTU7XG4vL3ZhciBaX1ZFUlNJT05fRVJST1IgPSAtNjtcblxuLyogVGhlIGRlZmxhdGUgY29tcHJlc3Npb24gbWV0aG9kICovXG52YXIgWl9ERUZMQVRFRCAgPSA4O1xuXG5cbi8qIFNUQVRFUyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cbnZhciAgICBIRUFEID0gMTsgICAgICAgLyogaTogd2FpdGluZyBmb3IgbWFnaWMgaGVhZGVyICovXG52YXIgICAgRkxBR1MgPSAyOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIG1ldGhvZCBhbmQgZmxhZ3MgKGd6aXApICovXG52YXIgICAgVElNRSA9IDM7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIG1vZGlmaWNhdGlvbiB0aW1lIChnemlwKSAqL1xudmFyICAgIE9TID0gNDsgICAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBmbGFncyBhbmQgb3BlcmF0aW5nIHN5c3RlbSAoZ3ppcCkgKi9cbnZhciAgICBFWExFTiA9IDU7ICAgICAgLyogaTogd2FpdGluZyBmb3IgZXh0cmEgbGVuZ3RoIChnemlwKSAqL1xudmFyICAgIEVYVFJBID0gNjsgICAgICAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBieXRlcyAoZ3ppcCkgKi9cbnZhciAgICBOQU1FID0gNzsgICAgICAgLyogaTogd2FpdGluZyBmb3IgZW5kIG9mIGZpbGUgbmFtZSAoZ3ppcCkgKi9cbnZhciAgICBDT01NRU5UID0gODsgICAgLyogaTogd2FpdGluZyBmb3IgZW5kIG9mIGNvbW1lbnQgKGd6aXApICovXG52YXIgICAgSENSQyA9IDk7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGhlYWRlciBjcmMgKGd6aXApICovXG52YXIgICAgRElDVElEID0gMTA7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIGRpY3Rpb25hcnkgY2hlY2sgdmFsdWUgKi9cbnZhciAgICBESUNUID0gMTE7ICAgICAgLyogd2FpdGluZyBmb3IgaW5mbGF0ZVNldERpY3Rpb25hcnkoKSBjYWxsICovXG52YXIgICAgICAgIFRZUEUgPSAxMjsgICAgICAvKiBpOiB3YWl0aW5nIGZvciB0eXBlIGJpdHMsIGluY2x1ZGluZyBsYXN0LWZsYWcgYml0ICovXG52YXIgICAgICAgIFRZUEVETyA9IDEzOyAgICAvKiBpOiBzYW1lLCBidXQgc2tpcCBjaGVjayB0byBleGl0IGluZmxhdGUgb24gbmV3IGJsb2NrICovXG52YXIgICAgICAgIFNUT1JFRCA9IDE0OyAgICAvKiBpOiB3YWl0aW5nIGZvciBzdG9yZWQgc2l6ZSAobGVuZ3RoIGFuZCBjb21wbGVtZW50KSAqL1xudmFyICAgICAgICBDT1BZXyA9IDE1OyAgICAgLyogaS9vOiBzYW1lIGFzIENPUFkgYmVsb3csIGJ1dCBvbmx5IGZpcnN0IHRpbWUgaW4gKi9cbnZhciAgICAgICAgQ09QWSA9IDE2OyAgICAgIC8qIGkvbzogd2FpdGluZyBmb3IgaW5wdXQgb3Igb3V0cHV0IHRvIGNvcHkgc3RvcmVkIGJsb2NrICovXG52YXIgICAgICAgIFRBQkxFID0gMTc7ICAgICAvKiBpOiB3YWl0aW5nIGZvciBkeW5hbWljIGJsb2NrIHRhYmxlIGxlbmd0aHMgKi9cbnZhciAgICAgICAgTEVOTEVOUyA9IDE4OyAgIC8qIGk6IHdhaXRpbmcgZm9yIGNvZGUgbGVuZ3RoIGNvZGUgbGVuZ3RocyAqL1xudmFyICAgICAgICBDT0RFTEVOUyA9IDE5OyAgLyogaTogd2FpdGluZyBmb3IgbGVuZ3RoL2xpdCBhbmQgZGlzdGFuY2UgY29kZSBsZW5ndGhzICovXG52YXIgICAgICAgICAgICBMRU5fID0gMjA7ICAgICAgLyogaTogc2FtZSBhcyBMRU4gYmVsb3csIGJ1dCBvbmx5IGZpcnN0IHRpbWUgaW4gKi9cbnZhciAgICAgICAgICAgIExFTiA9IDIxOyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBsZW5ndGgvbGl0L2VvYiBjb2RlICovXG52YXIgICAgICAgICAgICBMRU5FWFQgPSAyMjsgICAgLyogaTogd2FpdGluZyBmb3IgbGVuZ3RoIGV4dHJhIGJpdHMgKi9cbnZhciAgICAgICAgICAgIERJU1QgPSAyMzsgICAgICAvKiBpOiB3YWl0aW5nIGZvciBkaXN0YW5jZSBjb2RlICovXG52YXIgICAgICAgICAgICBESVNURVhUID0gMjQ7ICAgLyogaTogd2FpdGluZyBmb3IgZGlzdGFuY2UgZXh0cmEgYml0cyAqL1xudmFyICAgICAgICAgICAgTUFUQ0ggPSAyNTsgICAgIC8qIG86IHdhaXRpbmcgZm9yIG91dHB1dCBzcGFjZSB0byBjb3B5IHN0cmluZyAqL1xudmFyICAgICAgICAgICAgTElUID0gMjY7ICAgICAgIC8qIG86IHdhaXRpbmcgZm9yIG91dHB1dCBzcGFjZSB0byB3cml0ZSBsaXRlcmFsICovXG52YXIgICAgQ0hFQ0sgPSAyNzsgICAgIC8qIGk6IHdhaXRpbmcgZm9yIDMyLWJpdCBjaGVjayB2YWx1ZSAqL1xudmFyICAgIExFTkdUSCA9IDI4OyAgICAvKiBpOiB3YWl0aW5nIGZvciAzMi1iaXQgbGVuZ3RoIChnemlwKSAqL1xudmFyICAgIERPTkUgPSAyOTsgICAgICAvKiBmaW5pc2hlZCBjaGVjaywgZG9uZSAtLSByZW1haW4gaGVyZSB1bnRpbCByZXNldCAqL1xudmFyICAgIEJBRCA9IDMwOyAgICAgICAvKiBnb3QgYSBkYXRhIGVycm9yIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovXG52YXIgICAgTUVNID0gMzE7ICAgICAgIC8qIGdvdCBhbiBpbmZsYXRlKCkgbWVtb3J5IGVycm9yIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovXG52YXIgICAgU1lOQyA9IDMyOyAgICAgIC8qIGxvb2tpbmcgZm9yIHN5bmNocm9uaXphdGlvbiBieXRlcyB0byByZXN0YXJ0IGluZmxhdGUoKSAqL1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cblxudmFyIEVOT1VHSF9MRU5TID0gODUyO1xudmFyIEVOT1VHSF9ESVNUUyA9IDU5Mjtcbi8vdmFyIEVOT1VHSCA9ICAoRU5PVUdIX0xFTlMrRU5PVUdIX0RJU1RTKTtcblxudmFyIE1BWF9XQklUUyA9IDE1O1xuLyogMzJLIExaNzcgd2luZG93ICovXG52YXIgREVGX1dCSVRTID0gTUFYX1dCSVRTO1xuXG5cbmZ1bmN0aW9uIHpzd2FwMzIocSkge1xuICByZXR1cm4gICgoKHEgPj4+IDI0KSAmIDB4ZmYpICtcbiAgICAgICAgICAoKHEgPj4+IDgpICYgMHhmZjAwKSArXG4gICAgICAgICAgKChxICYgMHhmZjAwKSA8PCA4KSArXG4gICAgICAgICAgKChxICYgMHhmZikgPDwgMjQpKTtcbn1cblxuXG5mdW5jdGlvbiBJbmZsYXRlU3RhdGUoKSB7XG4gIHRoaXMubW9kZSA9IDA7ICAgICAgICAgICAgIC8qIGN1cnJlbnQgaW5mbGF0ZSBtb2RlICovXG4gIHRoaXMubGFzdCA9IGZhbHNlOyAgICAgICAgICAvKiB0cnVlIGlmIHByb2Nlc3NpbmcgbGFzdCBibG9jayAqL1xuICB0aGlzLndyYXAgPSAwOyAgICAgICAgICAgICAgLyogYml0IDAgdHJ1ZSBmb3IgemxpYiwgYml0IDEgdHJ1ZSBmb3IgZ3ppcCAqL1xuICB0aGlzLmhhdmVkaWN0ID0gZmFsc2U7ICAgICAgLyogdHJ1ZSBpZiBkaWN0aW9uYXJ5IHByb3ZpZGVkICovXG4gIHRoaXMuZmxhZ3MgPSAwOyAgICAgICAgICAgICAvKiBnemlwIGhlYWRlciBtZXRob2QgYW5kIGZsYWdzICgwIGlmIHpsaWIpICovXG4gIHRoaXMuZG1heCA9IDA7ICAgICAgICAgICAgICAvKiB6bGliIGhlYWRlciBtYXggZGlzdGFuY2UgKElORkxBVEVfU1RSSUNUKSAqL1xuICB0aGlzLmNoZWNrID0gMDsgICAgICAgICAgICAgLyogcHJvdGVjdGVkIGNvcHkgb2YgY2hlY2sgdmFsdWUgKi9cbiAgdGhpcy50b3RhbCA9IDA7ICAgICAgICAgICAgIC8qIHByb3RlY3RlZCBjb3B5IG9mIG91dHB1dCBjb3VudCAqL1xuICAvLyBUT0RPOiBtYXkgYmUge31cbiAgdGhpcy5oZWFkID0gbnVsbDsgICAgICAgICAgIC8qIHdoZXJlIHRvIHNhdmUgZ3ppcCBoZWFkZXIgaW5mb3JtYXRpb24gKi9cblxuICAvKiBzbGlkaW5nIHdpbmRvdyAqL1xuICB0aGlzLndiaXRzID0gMDsgICAgICAgICAgICAgLyogbG9nIGJhc2UgMiBvZiByZXF1ZXN0ZWQgd2luZG93IHNpemUgKi9cbiAgdGhpcy53c2l6ZSA9IDA7ICAgICAgICAgICAgIC8qIHdpbmRvdyBzaXplIG9yIHplcm8gaWYgbm90IHVzaW5nIHdpbmRvdyAqL1xuICB0aGlzLndoYXZlID0gMDsgICAgICAgICAgICAgLyogdmFsaWQgYnl0ZXMgaW4gdGhlIHdpbmRvdyAqL1xuICB0aGlzLnduZXh0ID0gMDsgICAgICAgICAgICAgLyogd2luZG93IHdyaXRlIGluZGV4ICovXG4gIHRoaXMud2luZG93ID0gbnVsbDsgICAgICAgICAvKiBhbGxvY2F0ZWQgc2xpZGluZyB3aW5kb3csIGlmIG5lZWRlZCAqL1xuXG4gIC8qIGJpdCBhY2N1bXVsYXRvciAqL1xuICB0aGlzLmhvbGQgPSAwOyAgICAgICAgICAgICAgLyogaW5wdXQgYml0IGFjY3VtdWxhdG9yICovXG4gIHRoaXMuYml0cyA9IDA7ICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgYml0cyBpbiBcImluXCIgKi9cblxuICAvKiBmb3Igc3RyaW5nIGFuZCBzdG9yZWQgYmxvY2sgY29weWluZyAqL1xuICB0aGlzLmxlbmd0aCA9IDA7ICAgICAgICAgICAgLyogbGl0ZXJhbCBvciBsZW5ndGggb2YgZGF0YSB0byBjb3B5ICovXG4gIHRoaXMub2Zmc2V0ID0gMDsgICAgICAgICAgICAvKiBkaXN0YW5jZSBiYWNrIHRvIGNvcHkgc3RyaW5nIGZyb20gKi9cblxuICAvKiBmb3IgdGFibGUgYW5kIGNvZGUgZGVjb2RpbmcgKi9cbiAgdGhpcy5leHRyYSA9IDA7ICAgICAgICAgICAgIC8qIGV4dHJhIGJpdHMgbmVlZGVkICovXG5cbiAgLyogZml4ZWQgYW5kIGR5bmFtaWMgY29kZSB0YWJsZXMgKi9cbiAgdGhpcy5sZW5jb2RlID0gbnVsbDsgICAgICAgICAgLyogc3RhcnRpbmcgdGFibGUgZm9yIGxlbmd0aC9saXRlcmFsIGNvZGVzICovXG4gIHRoaXMuZGlzdGNvZGUgPSBudWxsOyAgICAgICAgIC8qIHN0YXJ0aW5nIHRhYmxlIGZvciBkaXN0YW5jZSBjb2RlcyAqL1xuICB0aGlzLmxlbmJpdHMgPSAwOyAgICAgICAgICAgLyogaW5kZXggYml0cyBmb3IgbGVuY29kZSAqL1xuICB0aGlzLmRpc3RiaXRzID0gMDsgICAgICAgICAgLyogaW5kZXggYml0cyBmb3IgZGlzdGNvZGUgKi9cblxuICAvKiBkeW5hbWljIHRhYmxlIGJ1aWxkaW5nICovXG4gIHRoaXMubmNvZGUgPSAwOyAgICAgICAgICAgICAvKiBudW1iZXIgb2YgY29kZSBsZW5ndGggY29kZSBsZW5ndGhzICovXG4gIHRoaXMubmxlbiA9IDA7ICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgbGVuZ3RoIGNvZGUgbGVuZ3RocyAqL1xuICB0aGlzLm5kaXN0ID0gMDsgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGRpc3RhbmNlIGNvZGUgbGVuZ3RocyAqL1xuICB0aGlzLmhhdmUgPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGNvZGUgbGVuZ3RocyBpbiBsZW5zW10gKi9cbiAgdGhpcy5uZXh0ID0gbnVsbDsgICAgICAgICAgICAgIC8qIG5leHQgYXZhaWxhYmxlIHNwYWNlIGluIGNvZGVzW10gKi9cblxuICB0aGlzLmxlbnMgPSBuZXcgdXRpbHMuQnVmMTYoMzIwKTsgLyogdGVtcG9yYXJ5IHN0b3JhZ2UgZm9yIGNvZGUgbGVuZ3RocyAqL1xuICB0aGlzLndvcmsgPSBuZXcgdXRpbHMuQnVmMTYoMjg4KTsgLyogd29yayBhcmVhIGZvciBjb2RlIHRhYmxlIGJ1aWxkaW5nICovXG5cbiAgLypcbiAgIGJlY2F1c2Ugd2UgZG9uJ3QgaGF2ZSBwb2ludGVycyBpbiBqcywgd2UgdXNlIGxlbmNvZGUgYW5kIGRpc3Rjb2RlIGRpcmVjdGx5XG4gICBhcyBidWZmZXJzIHNvIHdlIGRvbid0IG5lZWQgY29kZXNcbiAgKi9cbiAgLy90aGlzLmNvZGVzID0gbmV3IHV0aWxzLkJ1ZjMyKEVOT1VHSCk7ICAgICAgIC8qIHNwYWNlIGZvciBjb2RlIHRhYmxlcyAqL1xuICB0aGlzLmxlbmR5biA9IG51bGw7ICAgICAgICAgICAgICAvKiBkeW5hbWljIHRhYmxlIGZvciBsZW5ndGgvbGl0ZXJhbCBjb2RlcyAoSlMgc3BlY2lmaWMpICovXG4gIHRoaXMuZGlzdGR5biA9IG51bGw7ICAgICAgICAgICAgIC8qIGR5bmFtaWMgdGFibGUgZm9yIGRpc3RhbmNlIGNvZGVzIChKUyBzcGVjaWZpYykgKi9cbiAgdGhpcy5zYW5lID0gMDsgICAgICAgICAgICAgICAgICAgLyogaWYgZmFsc2UsIGFsbG93IGludmFsaWQgZGlzdGFuY2UgdG9vIGZhciAqL1xuICB0aGlzLmJhY2sgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBiaXRzIGJhY2sgb2YgbGFzdCB1bnByb2Nlc3NlZCBsZW5ndGgvbGl0ICovXG4gIHRoaXMud2FzID0gMDsgICAgICAgICAgICAgICAgICAgIC8qIGluaXRpYWwgbGVuZ3RoIG9mIG1hdGNoICovXG59XG5cbmZ1bmN0aW9uIGluZmxhdGVSZXNldEtlZXAoc3RybSkge1xuICB2YXIgc3RhdGU7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIHN0cm0udG90YWxfaW4gPSBzdHJtLnRvdGFsX291dCA9IHN0YXRlLnRvdGFsID0gMDtcbiAgc3RybS5tc2cgPSAnJzsgLypaX05VTEwqL1xuICBpZiAoc3RhdGUud3JhcCkgeyAgICAgICAvKiB0byBzdXBwb3J0IGlsbC1jb25jZWl2ZWQgSmF2YSB0ZXN0IHN1aXRlICovXG4gICAgc3RybS5hZGxlciA9IHN0YXRlLndyYXAgJiAxO1xuICB9XG4gIHN0YXRlLm1vZGUgPSBIRUFEO1xuICBzdGF0ZS5sYXN0ID0gMDtcbiAgc3RhdGUuaGF2ZWRpY3QgPSAwO1xuICBzdGF0ZS5kbWF4ID0gMzI3Njg7XG4gIHN0YXRlLmhlYWQgPSBudWxsLypaX05VTEwqLztcbiAgc3RhdGUuaG9sZCA9IDA7XG4gIHN0YXRlLmJpdHMgPSAwO1xuICAvL3N0YXRlLmxlbmNvZGUgPSBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLm5leHQgPSBzdGF0ZS5jb2RlcztcbiAgc3RhdGUubGVuY29kZSA9IHN0YXRlLmxlbmR5biA9IG5ldyB1dGlscy5CdWYzMihFTk9VR0hfTEVOUyk7XG4gIHN0YXRlLmRpc3Rjb2RlID0gc3RhdGUuZGlzdGR5biA9IG5ldyB1dGlscy5CdWYzMihFTk9VR0hfRElTVFMpO1xuXG4gIHN0YXRlLnNhbmUgPSAxO1xuICBzdGF0ZS5iYWNrID0gLTE7XG4gIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogcmVzZXRcXG5cIikpO1xuICByZXR1cm4gWl9PSztcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZVJlc2V0KHN0cm0pIHtcbiAgdmFyIHN0YXRlO1xuXG4gIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBzdGF0ZS53c2l6ZSA9IDA7XG4gIHN0YXRlLndoYXZlID0gMDtcbiAgc3RhdGUud25leHQgPSAwO1xuICByZXR1cm4gaW5mbGF0ZVJlc2V0S2VlcChzdHJtKTtcblxufVxuXG5mdW5jdGlvbiBpbmZsYXRlUmVzZXQyKHN0cm0sIHdpbmRvd0JpdHMpIHtcbiAgdmFyIHdyYXA7XG4gIHZhciBzdGF0ZTtcblxuICAvKiBnZXQgdGhlIHN0YXRlICovXG4gIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuXG4gIC8qIGV4dHJhY3Qgd3JhcCByZXF1ZXN0IGZyb20gd2luZG93Qml0cyBwYXJhbWV0ZXIgKi9cbiAgaWYgKHdpbmRvd0JpdHMgPCAwKSB7XG4gICAgd3JhcCA9IDA7XG4gICAgd2luZG93Qml0cyA9IC13aW5kb3dCaXRzO1xuICB9XG4gIGVsc2Uge1xuICAgIHdyYXAgPSAod2luZG93Qml0cyA+PiA0KSArIDE7XG4gICAgaWYgKHdpbmRvd0JpdHMgPCA0OCkge1xuICAgICAgd2luZG93Qml0cyAmPSAxNTtcbiAgICB9XG4gIH1cblxuICAvKiBzZXQgbnVtYmVyIG9mIHdpbmRvdyBiaXRzLCBmcmVlIHdpbmRvdyBpZiBkaWZmZXJlbnQgKi9cbiAgaWYgKHdpbmRvd0JpdHMgJiYgKHdpbmRvd0JpdHMgPCA4IHx8IHdpbmRvd0JpdHMgPiAxNSkpIHtcbiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gIH1cbiAgaWYgKHN0YXRlLndpbmRvdyAhPT0gbnVsbCAmJiBzdGF0ZS53Yml0cyAhPT0gd2luZG93Qml0cykge1xuICAgIHN0YXRlLndpbmRvdyA9IG51bGw7XG4gIH1cblxuICAvKiB1cGRhdGUgc3RhdGUgYW5kIHJlc2V0IHRoZSByZXN0IG9mIGl0ICovXG4gIHN0YXRlLndyYXAgPSB3cmFwO1xuICBzdGF0ZS53Yml0cyA9IHdpbmRvd0JpdHM7XG4gIHJldHVybiBpbmZsYXRlUmVzZXQoc3RybSk7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGVJbml0MihzdHJtLCB3aW5kb3dCaXRzKSB7XG4gIHZhciByZXQ7XG4gIHZhciBzdGF0ZTtcblxuICBpZiAoIXN0cm0pIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9XG4gIC8vc3RybS5tc2cgPSBaX05VTEw7ICAgICAgICAgICAgICAgICAvKiBpbiBjYXNlIHdlIHJldHVybiBhbiBlcnJvciAqL1xuXG4gIHN0YXRlID0gbmV3IEluZmxhdGVTdGF0ZSgpO1xuXG4gIC8vaWYgKHN0YXRlID09PSBaX05VTEwpIHJldHVybiBaX01FTV9FUlJPUjtcbiAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiBhbGxvY2F0ZWRcXG5cIikpO1xuICBzdHJtLnN0YXRlID0gc3RhdGU7XG4gIHN0YXRlLndpbmRvdyA9IG51bGwvKlpfTlVMTCovO1xuICByZXQgPSBpbmZsYXRlUmVzZXQyKHN0cm0sIHdpbmRvd0JpdHMpO1xuICBpZiAocmV0ICE9PSBaX09LKSB7XG4gICAgc3RybS5zdGF0ZSA9IG51bGwvKlpfTlVMTCovO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGVJbml0KHN0cm0pIHtcbiAgcmV0dXJuIGluZmxhdGVJbml0MihzdHJtLCBERUZfV0JJVFMpO1xufVxuXG5cbi8qXG4gUmV0dXJuIHN0YXRlIHdpdGggbGVuZ3RoIGFuZCBkaXN0YW5jZSBkZWNvZGluZyB0YWJsZXMgYW5kIGluZGV4IHNpemVzIHNldCB0b1xuIGZpeGVkIGNvZGUgZGVjb2RpbmcuICBOb3JtYWxseSB0aGlzIHJldHVybnMgZml4ZWQgdGFibGVzIGZyb20gaW5mZml4ZWQuaC5cbiBJZiBCVUlMREZJWEVEIGlzIGRlZmluZWQsIHRoZW4gaW5zdGVhZCB0aGlzIHJvdXRpbmUgYnVpbGRzIHRoZSB0YWJsZXMgdGhlXG4gZmlyc3QgdGltZSBpdCdzIGNhbGxlZCwgYW5kIHJldHVybnMgdGhvc2UgdGFibGVzIHRoZSBmaXJzdCB0aW1lIGFuZFxuIHRoZXJlYWZ0ZXIuICBUaGlzIHJlZHVjZXMgdGhlIHNpemUgb2YgdGhlIGNvZGUgYnkgYWJvdXQgMksgYnl0ZXMsIGluXG4gZXhjaGFuZ2UgZm9yIGEgbGl0dGxlIGV4ZWN1dGlvbiB0aW1lLiAgSG93ZXZlciwgQlVJTERGSVhFRCBzaG91bGQgbm90IGJlXG4gdXNlZCBmb3IgdGhyZWFkZWQgYXBwbGljYXRpb25zLCBzaW5jZSB0aGUgcmV3cml0aW5nIG9mIHRoZSB0YWJsZXMgYW5kIHZpcmdpblxuIG1heSBub3QgYmUgdGhyZWFkLXNhZmUuXG4gKi9cbnZhciB2aXJnaW4gPSB0cnVlO1xuXG52YXIgbGVuZml4LCBkaXN0Zml4OyAvLyBXZSBoYXZlIG5vIHBvaW50ZXJzIGluIEpTLCBzbyBrZWVwIHRhYmxlcyBzZXBhcmF0ZVxuXG5mdW5jdGlvbiBmaXhlZHRhYmxlcyhzdGF0ZSkge1xuICAvKiBidWlsZCBmaXhlZCBodWZmbWFuIHRhYmxlcyBpZiBmaXJzdCBjYWxsIChtYXkgbm90IGJlIHRocmVhZCBzYWZlKSAqL1xuICBpZiAodmlyZ2luKSB7XG4gICAgdmFyIHN5bTtcblxuICAgIGxlbmZpeCA9IG5ldyB1dGlscy5CdWYzMig1MTIpO1xuICAgIGRpc3RmaXggPSBuZXcgdXRpbHMuQnVmMzIoMzIpO1xuXG4gICAgLyogbGl0ZXJhbC9sZW5ndGggdGFibGUgKi9cbiAgICBzeW0gPSAwO1xuICAgIHdoaWxlIChzeW0gPCAxNDQpIHsgc3RhdGUubGVuc1tzeW0rK10gPSA4OyB9XG4gICAgd2hpbGUgKHN5bSA8IDI1NikgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDk7IH1cbiAgICB3aGlsZSAoc3ltIDwgMjgwKSB7IHN0YXRlLmxlbnNbc3ltKytdID0gNzsgfVxuICAgIHdoaWxlIChzeW0gPCAyODgpIHsgc3RhdGUubGVuc1tzeW0rK10gPSA4OyB9XG5cbiAgICBpbmZsYXRlX3RhYmxlKExFTlMsICBzdGF0ZS5sZW5zLCAwLCAyODgsIGxlbmZpeCwgICAwLCBzdGF0ZS53b3JrLCB7IGJpdHM6IDkgfSk7XG5cbiAgICAvKiBkaXN0YW5jZSB0YWJsZSAqL1xuICAgIHN5bSA9IDA7XG4gICAgd2hpbGUgKHN5bSA8IDMyKSB7IHN0YXRlLmxlbnNbc3ltKytdID0gNTsgfVxuXG4gICAgaW5mbGF0ZV90YWJsZShESVNUUywgc3RhdGUubGVucywgMCwgMzIsICAgZGlzdGZpeCwgMCwgc3RhdGUud29yaywgeyBiaXRzOiA1IH0pO1xuXG4gICAgLyogZG8gdGhpcyBqdXN0IG9uY2UgKi9cbiAgICB2aXJnaW4gPSBmYWxzZTtcbiAgfVxuXG4gIHN0YXRlLmxlbmNvZGUgPSBsZW5maXg7XG4gIHN0YXRlLmxlbmJpdHMgPSA5O1xuICBzdGF0ZS5kaXN0Y29kZSA9IGRpc3RmaXg7XG4gIHN0YXRlLmRpc3RiaXRzID0gNTtcbn1cblxuXG4vKlxuIFVwZGF0ZSB0aGUgd2luZG93IHdpdGggdGhlIGxhc3Qgd3NpemUgKG5vcm1hbGx5IDMySykgYnl0ZXMgd3JpdHRlbiBiZWZvcmVcbiByZXR1cm5pbmcuICBJZiB3aW5kb3cgZG9lcyBub3QgZXhpc3QgeWV0LCBjcmVhdGUgaXQuICBUaGlzIGlzIG9ubHkgY2FsbGVkXG4gd2hlbiBhIHdpbmRvdyBpcyBhbHJlYWR5IGluIHVzZSwgb3Igd2hlbiBvdXRwdXQgaGFzIGJlZW4gd3JpdHRlbiBkdXJpbmcgdGhpc1xuIGluZmxhdGUgY2FsbCwgYnV0IHRoZSBlbmQgb2YgdGhlIGRlZmxhdGUgc3RyZWFtIGhhcyBub3QgYmVlbiByZWFjaGVkIHlldC5cbiBJdCBpcyBhbHNvIGNhbGxlZCB0byBjcmVhdGUgYSB3aW5kb3cgZm9yIGRpY3Rpb25hcnkgZGF0YSB3aGVuIGEgZGljdGlvbmFyeVxuIGlzIGxvYWRlZC5cblxuIFByb3ZpZGluZyBvdXRwdXQgYnVmZmVycyBsYXJnZXIgdGhhbiAzMksgdG8gaW5mbGF0ZSgpIHNob3VsZCBwcm92aWRlIGEgc3BlZWRcbiBhZHZhbnRhZ2UsIHNpbmNlIG9ubHkgdGhlIGxhc3QgMzJLIG9mIG91dHB1dCBpcyBjb3BpZWQgdG8gdGhlIHNsaWRpbmcgd2luZG93XG4gdXBvbiByZXR1cm4gZnJvbSBpbmZsYXRlKCksIGFuZCBzaW5jZSBhbGwgZGlzdGFuY2VzIGFmdGVyIHRoZSBmaXJzdCAzMksgb2ZcbiBvdXRwdXQgd2lsbCBmYWxsIGluIHRoZSBvdXRwdXQgZGF0YSwgbWFraW5nIG1hdGNoIGNvcGllcyBzaW1wbGVyIGFuZCBmYXN0ZXIuXG4gVGhlIGFkdmFudGFnZSBtYXkgYmUgZGVwZW5kZW50IG9uIHRoZSBzaXplIG9mIHRoZSBwcm9jZXNzb3IncyBkYXRhIGNhY2hlcy5cbiAqL1xuZnVuY3Rpb24gdXBkYXRld2luZG93KHN0cm0sIHNyYywgZW5kLCBjb3B5KSB7XG4gIHZhciBkaXN0O1xuICB2YXIgc3RhdGUgPSBzdHJtLnN0YXRlO1xuXG4gIC8qIGlmIGl0IGhhc24ndCBiZWVuIGRvbmUgYWxyZWFkeSwgYWxsb2NhdGUgc3BhY2UgZm9yIHRoZSB3aW5kb3cgKi9cbiAgaWYgKHN0YXRlLndpbmRvdyA9PT0gbnVsbCkge1xuICAgIHN0YXRlLndzaXplID0gMSA8PCBzdGF0ZS53Yml0cztcbiAgICBzdGF0ZS53bmV4dCA9IDA7XG4gICAgc3RhdGUud2hhdmUgPSAwO1xuXG4gICAgc3RhdGUud2luZG93ID0gbmV3IHV0aWxzLkJ1Zjgoc3RhdGUud3NpemUpO1xuICB9XG5cbiAgLyogY29weSBzdGF0ZS0+d3NpemUgb3IgbGVzcyBvdXRwdXQgYnl0ZXMgaW50byB0aGUgY2lyY3VsYXIgd2luZG93ICovXG4gIGlmIChjb3B5ID49IHN0YXRlLndzaXplKSB7XG4gICAgdXRpbHMuYXJyYXlTZXQoc3RhdGUud2luZG93LCBzcmMsIGVuZCAtIHN0YXRlLndzaXplLCBzdGF0ZS53c2l6ZSwgMCk7XG4gICAgc3RhdGUud25leHQgPSAwO1xuICAgIHN0YXRlLndoYXZlID0gc3RhdGUud3NpemU7XG4gIH1cbiAgZWxzZSB7XG4gICAgZGlzdCA9IHN0YXRlLndzaXplIC0gc3RhdGUud25leHQ7XG4gICAgaWYgKGRpc3QgPiBjb3B5KSB7XG4gICAgICBkaXN0ID0gY29weTtcbiAgICB9XG4gICAgLy96bWVtY3B5KHN0YXRlLT53aW5kb3cgKyBzdGF0ZS0+d25leHQsIGVuZCAtIGNvcHksIGRpc3QpO1xuICAgIHV0aWxzLmFycmF5U2V0KHN0YXRlLndpbmRvdywgc3JjLCBlbmQgLSBjb3B5LCBkaXN0LCBzdGF0ZS53bmV4dCk7XG4gICAgY29weSAtPSBkaXN0O1xuICAgIGlmIChjb3B5KSB7XG4gICAgICAvL3ptZW1jcHkoc3RhdGUtPndpbmRvdywgZW5kIC0gY29weSwgY29weSk7XG4gICAgICB1dGlscy5hcnJheVNldChzdGF0ZS53aW5kb3csIHNyYywgZW5kIC0gY29weSwgY29weSwgMCk7XG4gICAgICBzdGF0ZS53bmV4dCA9IGNvcHk7XG4gICAgICBzdGF0ZS53aGF2ZSA9IHN0YXRlLndzaXplO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHN0YXRlLnduZXh0ICs9IGRpc3Q7XG4gICAgICBpZiAoc3RhdGUud25leHQgPT09IHN0YXRlLndzaXplKSB7IHN0YXRlLnduZXh0ID0gMDsgfVxuICAgICAgaWYgKHN0YXRlLndoYXZlIDwgc3RhdGUud3NpemUpIHsgc3RhdGUud2hhdmUgKz0gZGlzdDsgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gMDtcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZShzdHJtLCBmbHVzaCkge1xuICB2YXIgc3RhdGU7XG4gIHZhciBpbnB1dCwgb3V0cHV0OyAgICAgICAgICAvLyBpbnB1dC9vdXRwdXQgYnVmZmVyc1xuICB2YXIgbmV4dDsgICAgICAgICAgICAgICAgICAgLyogbmV4dCBpbnB1dCBJTkRFWCAqL1xuICB2YXIgcHV0OyAgICAgICAgICAgICAgICAgICAgLyogbmV4dCBvdXRwdXQgSU5ERVggKi9cbiAgdmFyIGhhdmUsIGxlZnQ7ICAgICAgICAgICAgIC8qIGF2YWlsYWJsZSBpbnB1dCBhbmQgb3V0cHV0ICovXG4gIHZhciBob2xkOyAgICAgICAgICAgICAgICAgICAvKiBiaXQgYnVmZmVyICovXG4gIHZhciBiaXRzOyAgICAgICAgICAgICAgICAgICAvKiBiaXRzIGluIGJpdCBidWZmZXIgKi9cbiAgdmFyIF9pbiwgX291dDsgICAgICAgICAgICAgIC8qIHNhdmUgc3RhcnRpbmcgYXZhaWxhYmxlIGlucHV0IGFuZCBvdXRwdXQgKi9cbiAgdmFyIGNvcHk7ICAgICAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBzdG9yZWQgb3IgbWF0Y2ggYnl0ZXMgdG8gY29weSAqL1xuICB2YXIgZnJvbTsgICAgICAgICAgICAgICAgICAgLyogd2hlcmUgdG8gY29weSBtYXRjaCBieXRlcyBmcm9tICovXG4gIHZhciBmcm9tX3NvdXJjZTtcbiAgdmFyIGhlcmUgPSAwOyAgICAgICAgICAgICAgIC8qIGN1cnJlbnQgZGVjb2RpbmcgdGFibGUgZW50cnkgKi9cbiAgdmFyIGhlcmVfYml0cywgaGVyZV9vcCwgaGVyZV92YWw7IC8vIHBha2VkIFwiaGVyZVwiIGRlbm9ybWFsaXplZCAoSlMgc3BlY2lmaWMpXG4gIC8vdmFyIGxhc3Q7ICAgICAgICAgICAgICAgICAgIC8qIHBhcmVudCB0YWJsZSBlbnRyeSAqL1xuICB2YXIgbGFzdF9iaXRzLCBsYXN0X29wLCBsYXN0X3ZhbDsgLy8gcGFrZWQgXCJsYXN0XCIgZGVub3JtYWxpemVkIChKUyBzcGVjaWZpYylcbiAgdmFyIGxlbjsgICAgICAgICAgICAgICAgICAgIC8qIGxlbmd0aCB0byBjb3B5IGZvciByZXBlYXRzLCBiaXRzIHRvIGRyb3AgKi9cbiAgdmFyIHJldDsgICAgICAgICAgICAgICAgICAgIC8qIHJldHVybiBjb2RlICovXG4gIHZhciBoYnVmID0gbmV3IHV0aWxzLkJ1ZjgoNCk7ICAgIC8qIGJ1ZmZlciBmb3IgZ3ppcCBoZWFkZXIgY3JjIGNhbGN1bGF0aW9uICovXG4gIHZhciBvcHRzO1xuXG4gIHZhciBuOyAvLyB0ZW1wb3JhcnkgdmFyIGZvciBORUVEX0JJVFNcblxuICB2YXIgb3JkZXIgPSAvKiBwZXJtdXRhdGlvbiBvZiBjb2RlIGxlbmd0aHMgKi9cbiAgICBbIDE2LCAxNywgMTgsIDAsIDgsIDcsIDksIDYsIDEwLCA1LCAxMSwgNCwgMTIsIDMsIDEzLCAyLCAxNCwgMSwgMTUgXTtcblxuXG4gIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSB8fCAhc3RybS5vdXRwdXQgfHxcbiAgICAgICghc3RybS5pbnB1dCAmJiBzdHJtLmF2YWlsX2luICE9PSAwKSkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuXG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgaWYgKHN0YXRlLm1vZGUgPT09IFRZUEUpIHsgc3RhdGUubW9kZSA9IFRZUEVETzsgfSAgICAvKiBza2lwIGNoZWNrICovXG5cblxuICAvLy0tLSBMT0FEKCkgLS0tXG4gIHB1dCA9IHN0cm0ubmV4dF9vdXQ7XG4gIG91dHB1dCA9IHN0cm0ub3V0cHV0O1xuICBsZWZ0ID0gc3RybS5hdmFpbF9vdXQ7XG4gIG5leHQgPSBzdHJtLm5leHRfaW47XG4gIGlucHV0ID0gc3RybS5pbnB1dDtcbiAgaGF2ZSA9IHN0cm0uYXZhaWxfaW47XG4gIGhvbGQgPSBzdGF0ZS5ob2xkO1xuICBiaXRzID0gc3RhdGUuYml0cztcbiAgLy8tLS1cblxuICBfaW4gPSBoYXZlO1xuICBfb3V0ID0gbGVmdDtcbiAgcmV0ID0gWl9PSztcblxuICBpbmZfbGVhdmU6IC8vIGdvdG8gZW11bGF0aW9uXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKHN0YXRlLm1vZGUpIHtcbiAgICBjYXNlIEhFQUQ6XG4gICAgICBpZiAoc3RhdGUud3JhcCA9PT0gMCkge1xuICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRURPO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vPT09IE5FRURCSVRTKDE2KTtcbiAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGhhdmUtLTtcbiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgIH1cbiAgICAgIC8vPT09Ly9cbiAgICAgIGlmICgoc3RhdGUud3JhcCAmIDIpICYmIGhvbGQgPT09IDB4OGIxZikgeyAgLyogZ3ppcCBoZWFkZXIgKi9cbiAgICAgICAgc3RhdGUuY2hlY2sgPSAwLypjcmMzMigwTCwgWl9OVUxMLCAwKSovO1xuICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmO1xuICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjtcbiAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgIC8vPT09Ly9cblxuICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICBob2xkID0gMDtcbiAgICAgICAgYml0cyA9IDA7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubW9kZSA9IEZMQUdTO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHN0YXRlLmZsYWdzID0gMDsgICAgICAgICAgIC8qIGV4cGVjdCB6bGliIGhlYWRlciAqL1xuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5kb25lID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoIShzdGF0ZS53cmFwICYgMSkgfHwgICAvKiBjaGVjayBpZiB6bGliIGhlYWRlciBhbGxvd2VkICovXG4gICAgICAgICgoKGhvbGQgJiAweGZmKS8qQklUUyg4KSovIDw8IDgpICsgKGhvbGQgPj4gOCkpICUgMzEpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGhlYWRlciBjaGVjayc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKChob2xkICYgMHgwZikvKkJJVFMoNCkqLyAhPT0gWl9ERUZMQVRFRCkge1xuICAgICAgICBzdHJtLm1zZyA9ICd1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZCc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy8tLS0gRFJPUEJJVFMoNCkgLS0tLy9cbiAgICAgIGhvbGQgPj4+PSA0O1xuICAgICAgYml0cyAtPSA0O1xuICAgICAgLy8tLS0vL1xuICAgICAgbGVuID0gKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICsgODtcbiAgICAgIGlmIChzdGF0ZS53Yml0cyA9PT0gMCkge1xuICAgICAgICBzdGF0ZS53Yml0cyA9IGxlbjtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGxlbiA+IHN0YXRlLndiaXRzKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgd2luZG93IHNpemUnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHN0YXRlLmRtYXggPSAxIDw8IGxlbjtcbiAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICB6bGliIGhlYWRlciBva1xcblwiKSk7XG4gICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAxLyphZGxlcjMyKDBMLCBaX05VTEwsIDApKi87XG4gICAgICBzdGF0ZS5tb2RlID0gaG9sZCAmIDB4MjAwID8gRElDVElEIDogVFlQRTtcbiAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICBob2xkID0gMDtcbiAgICAgIGJpdHMgPSAwO1xuICAgICAgLy89PT0vL1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBGTEFHUzpcbiAgICAgIC8vPT09IE5FRURCSVRTKDE2KTsgKi9cbiAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGhhdmUtLTtcbiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgIH1cbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLmZsYWdzID0gaG9sZDtcbiAgICAgIGlmICgoc3RhdGUuZmxhZ3MgJiAweGZmKSAhPT0gWl9ERUZMQVRFRCkge1xuICAgICAgICBzdHJtLm1zZyA9ICd1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZCc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHhlMDAwKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ3Vua25vd24gaGVhZGVyIGZsYWdzIHNldCc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC50ZXh0ID0gKChob2xkID4+IDgpICYgMSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7XG4gICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjtcbiAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApO1xuICAgICAgICAvLz09PS8vXG4gICAgICB9XG4gICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgaG9sZCA9IDA7XG4gICAgICBiaXRzID0gMDtcbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLm1vZGUgPSBUSU1FO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgVElNRTpcbiAgICAgIC8vPT09IE5FRURCSVRTKDMyKTsgKi9cbiAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGhhdmUtLTtcbiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgIH1cbiAgICAgIC8vPT09Ly9cbiAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgIHN0YXRlLmhlYWQudGltZSA9IGhvbGQ7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgLy89PT0gQ1JDNChzdGF0ZS5jaGVjaywgaG9sZClcbiAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmO1xuICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjtcbiAgICAgICAgaGJ1ZlsyXSA9IChob2xkID4+PiAxNikgJiAweGZmO1xuICAgICAgICBoYnVmWzNdID0gKGhvbGQgPj4+IDI0KSAmIDB4ZmY7XG4gICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDQsIDApO1xuICAgICAgICAvLz09PVxuICAgICAgfVxuICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgIGhvbGQgPSAwO1xuICAgICAgYml0cyA9IDA7XG4gICAgICAvLz09PS8vXG4gICAgICBzdGF0ZS5tb2RlID0gT1M7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBPUzpcbiAgICAgIC8vPT09IE5FRURCSVRTKDE2KTsgKi9cbiAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGhhdmUtLTtcbiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgIH1cbiAgICAgIC8vPT09Ly9cbiAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgIHN0YXRlLmhlYWQueGZsYWdzID0gKGhvbGQgJiAweGZmKTtcbiAgICAgICAgc3RhdGUuaGVhZC5vcyA9IChob2xkID4+IDgpO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgIC8vPT09IENSQzIoc3RhdGUuY2hlY2ssIGhvbGQpO1xuICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTtcbiAgICAgICAgLy89PT0vL1xuICAgICAgfVxuICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgIGhvbGQgPSAwO1xuICAgICAgYml0cyA9IDA7XG4gICAgICAvLz09PS8vXG4gICAgICBzdGF0ZS5tb2RlID0gRVhMRU47XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBFWExFTjpcbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDQwMCkge1xuICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovXG4gICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubGVuZ3RoID0gaG9sZDtcbiAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhX2xlbiA9IGhvbGQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7XG4gICAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmO1xuICAgICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApO1xuICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgfVxuICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICBob2xkID0gMDtcbiAgICAgICAgYml0cyA9IDA7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5leHRyYSA9IG51bGwvKlpfTlVMTCovO1xuICAgICAgfVxuICAgICAgc3RhdGUubW9kZSA9IEVYVFJBO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgRVhUUkE6XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDA0MDApIHtcbiAgICAgICAgY29weSA9IHN0YXRlLmxlbmd0aDtcbiAgICAgICAgaWYgKGNvcHkgPiBoYXZlKSB7IGNvcHkgPSBoYXZlOyB9XG4gICAgICAgIGlmIChjb3B5KSB7XG4gICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgICAgIGxlbiA9IHN0YXRlLmhlYWQuZXh0cmFfbGVuIC0gc3RhdGUubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKCFzdGF0ZS5oZWFkLmV4dHJhKSB7XG4gICAgICAgICAgICAgIC8vIFVzZSB1bnR5cGVkIGFycmF5IGZvciBtb3JlIGNvbnZlbmllbmQgcHJvY2Vzc2luZyBsYXRlclxuICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhID0gbmV3IEFycmF5KHN0YXRlLmhlYWQuZXh0cmFfbGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHV0aWxzLmFycmF5U2V0KFxuICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhLFxuICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgbmV4dCxcbiAgICAgICAgICAgICAgLy8gZXh0cmEgZmllbGQgaXMgbGltaXRlZCB0byA2NTUzNiBieXRlc1xuICAgICAgICAgICAgICAvLyAtIG5vIG5lZWQgZm9yIGFkZGl0aW9uYWwgc2l6ZSBjaGVja1xuICAgICAgICAgICAgICBjb3B5LFxuICAgICAgICAgICAgICAvKmxlbiArIGNvcHkgPiBzdGF0ZS5oZWFkLmV4dHJhX21heCAtIGxlbiA/IHN0YXRlLmhlYWQuZXh0cmFfbWF4IDogY29weSwqL1xuICAgICAgICAgICAgICBsZW5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAvL3ptZW1jcHkoc3RhdGUuaGVhZC5leHRyYSArIGxlbiwgbmV4dCxcbiAgICAgICAgICAgIC8vICAgICAgICBsZW4gKyBjb3B5ID4gc3RhdGUuaGVhZC5leHRyYV9tYXggP1xuICAgICAgICAgICAgLy8gICAgICAgIHN0YXRlLmhlYWQuZXh0cmFfbWF4IC0gbGVuIDogY29weSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaW5wdXQsIGNvcHksIG5leHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgICAgbmV4dCArPSBjb3B5O1xuICAgICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5O1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZS5sZW5ndGgpIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICB9XG4gICAgICBzdGF0ZS5sZW5ndGggPSAwO1xuICAgICAgc3RhdGUubW9kZSA9IE5BTUU7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBOQU1FOlxuICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwODAwKSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBjb3B5ID0gMDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIC8vIFRPRE86IDIgb3IgMSBieXRlcz9cbiAgICAgICAgICBsZW4gPSBpbnB1dFtuZXh0ICsgY29weSsrXTtcbiAgICAgICAgICAvKiB1c2UgY29uc3RhbnQgbGltaXQgYmVjYXVzZSBpbiBqcyB3ZSBzaG91bGQgbm90IHByZWFsbG9jYXRlIG1lbW9yeSAqL1xuICAgICAgICAgIGlmIChzdGF0ZS5oZWFkICYmIGxlbiAmJlxuICAgICAgICAgICAgICAoc3RhdGUubGVuZ3RoIDwgNjU1MzYgLypzdGF0ZS5oZWFkLm5hbWVfbWF4Ki8pKSB7XG4gICAgICAgICAgICBzdGF0ZS5oZWFkLm5hbWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShsZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAobGVuICYmIGNvcHkgPCBoYXZlKTtcblxuICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgaGF2ZSAtPSBjb3B5O1xuICAgICAgICBuZXh0ICs9IGNvcHk7XG4gICAgICAgIGlmIChsZW4pIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgIHN0YXRlLmhlYWQubmFtZSA9IG51bGw7XG4gICAgICB9XG4gICAgICBzdGF0ZS5sZW5ndGggPSAwO1xuICAgICAgc3RhdGUubW9kZSA9IENPTU1FTlQ7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBDT01NRU5UOlxuICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgxMDAwKSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBjb3B5ID0gMDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIGxlbiA9IGlucHV0W25leHQgKyBjb3B5KytdO1xuICAgICAgICAgIC8qIHVzZSBjb25zdGFudCBsaW1pdCBiZWNhdXNlIGluIGpzIHdlIHNob3VsZCBub3QgcHJlYWxsb2NhdGUgbWVtb3J5ICovXG4gICAgICAgICAgaWYgKHN0YXRlLmhlYWQgJiYgbGVuICYmXG4gICAgICAgICAgICAgIChzdGF0ZS5sZW5ndGggPCA2NTUzNiAvKnN0YXRlLmhlYWQuY29tbV9tYXgqLykpIHtcbiAgICAgICAgICAgIHN0YXRlLmhlYWQuY29tbWVudCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGxlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChsZW4gJiYgY29weSA8IGhhdmUpO1xuICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgaGF2ZSAtPSBjb3B5O1xuICAgICAgICBuZXh0ICs9IGNvcHk7XG4gICAgICAgIGlmIChsZW4pIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgIHN0YXRlLmhlYWQuY29tbWVudCA9IG51bGw7XG4gICAgICB9XG4gICAgICBzdGF0ZS5tb2RlID0gSENSQztcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIEhDUkM6XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgICB3aGlsZSAoYml0cyA8IDE2KSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIGlmIChob2xkICE9PSAoc3RhdGUuY2hlY2sgJiAweGZmZmYpKSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAnaGVhZGVyIGNyYyBtaXNtYXRjaCc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICBob2xkID0gMDtcbiAgICAgICAgYml0cyA9IDA7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgIHN0YXRlLmhlYWQuaGNyYyA9ICgoc3RhdGUuZmxhZ3MgPj4gOSkgJiAxKTtcbiAgICAgICAgc3RhdGUuaGVhZC5kb25lID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gVFlQRTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgRElDVElEOlxuICAgICAgLy89PT0gTkVFREJJVFMoMzIpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0genN3YXAzMihob2xkKTtcbiAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICBob2xkID0gMDtcbiAgICAgIGJpdHMgPSAwO1xuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubW9kZSA9IERJQ1Q7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBESUNUOlxuICAgICAgaWYgKHN0YXRlLmhhdmVkaWN0ID09PSAwKSB7XG4gICAgICAgIC8vLS0tIFJFU1RPUkUoKSAtLS1cbiAgICAgICAgc3RybS5uZXh0X291dCA9IHB1dDtcbiAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBsZWZ0O1xuICAgICAgICBzdHJtLm5leHRfaW4gPSBuZXh0O1xuICAgICAgICBzdHJtLmF2YWlsX2luID0gaGF2ZTtcbiAgICAgICAgc3RhdGUuaG9sZCA9IGhvbGQ7XG4gICAgICAgIHN0YXRlLmJpdHMgPSBiaXRzO1xuICAgICAgICAvLy0tLVxuICAgICAgICByZXR1cm4gWl9ORUVEX0RJQ1Q7XG4gICAgICB9XG4gICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAxLyphZGxlcjMyKDBMLCBaX05VTEwsIDApKi87XG4gICAgICBzdGF0ZS5tb2RlID0gVFlQRTtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIFRZUEU6XG4gICAgICBpZiAoZmx1c2ggPT09IFpfQkxPQ0sgfHwgZmx1c2ggPT09IFpfVFJFRVMpIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBUWVBFRE86XG4gICAgICBpZiAoc3RhdGUubGFzdCkge1xuICAgICAgICAvLy0tLSBCWVRFQklUUygpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSBiaXRzICYgNztcbiAgICAgICAgYml0cyAtPSBiaXRzICYgNztcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBzdGF0ZS5tb2RlID0gQ0hFQ0s7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy89PT0gTkVFREJJVFMoMyk7ICovXG4gICAgICB3aGlsZSAoYml0cyA8IDMpIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGhhdmUtLTtcbiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgIH1cbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLmxhc3QgPSAoaG9sZCAmIDB4MDEpLypCSVRTKDEpKi87XG4gICAgICAvLy0tLSBEUk9QQklUUygxKSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IDE7XG4gICAgICBiaXRzIC09IDE7XG4gICAgICAvLy0tLS8vXG5cbiAgICAgIHN3aXRjaCAoKGhvbGQgJiAweDAzKS8qQklUUygyKSovKSB7XG4gICAgICBjYXNlIDA6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBzdG9yZWQgYmxvY2sgKi9cbiAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgc3RvcmVkIGJsb2NrJXNcXG5cIixcbiAgICAgICAgLy8gICAgICAgIHN0YXRlLmxhc3QgPyBcIiAobGFzdClcIiA6IFwiXCIpKTtcbiAgICAgICAgc3RhdGUubW9kZSA9IFNUT1JFRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBmaXhlZCBibG9jayAqL1xuICAgICAgICBmaXhlZHRhYmxlcyhzdGF0ZSk7XG4gICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgIGZpeGVkIGNvZGVzIGJsb2NrJXNcXG5cIixcbiAgICAgICAgLy8gICAgICAgIHN0YXRlLmxhc3QgPyBcIiAobGFzdClcIiA6IFwiXCIpKTtcbiAgICAgICAgc3RhdGUubW9kZSA9IExFTl87ICAgICAgICAgICAgIC8qIGRlY29kZSBjb2RlcyAqL1xuICAgICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHtcbiAgICAgICAgICAvLy0tLSBEUk9QQklUUygyKSAtLS0vL1xuICAgICAgICAgIGhvbGQgPj4+PSAyO1xuICAgICAgICAgIGJpdHMgLT0gMjtcbiAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgYnJlYWsgaW5mX2xlYXZlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZHluYW1pYyBibG9jayAqL1xuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICBkeW5hbWljIGNvZGVzIGJsb2NrJXNcXG5cIixcbiAgICAgICAgLy8gICAgICAgIHN0YXRlLmxhc3QgPyBcIiAobGFzdClcIiA6IFwiXCIpKTtcbiAgICAgICAgc3RhdGUubW9kZSA9IFRBQkxFO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBibG9jayB0eXBlJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgIH1cbiAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gMjtcbiAgICAgIGJpdHMgLT0gMjtcbiAgICAgIC8vLS0tLy9cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgU1RPUkVEOlxuICAgICAgLy8tLS0gQllURUJJVFMoKSAtLS0vLyAvKiBnbyB0byBieXRlIGJvdW5kYXJ5ICovXG4gICAgICBob2xkID4+Pj0gYml0cyAmIDc7XG4gICAgICBiaXRzIC09IGJpdHMgJiA3O1xuICAgICAgLy8tLS0vL1xuICAgICAgLy89PT0gTkVFREJJVFMoMzIpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKChob2xkICYgMHhmZmZmKSAhPT0gKChob2xkID4+PiAxNikgXiAweGZmZmYpKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgc3RvcmVkIGJsb2NrIGxlbmd0aHMnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHN0YXRlLmxlbmd0aCA9IGhvbGQgJiAweGZmZmY7XG4gICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIHN0b3JlZCBsZW5ndGggJXVcXG5cIixcbiAgICAgIC8vICAgICAgICBzdGF0ZS5sZW5ndGgpKTtcbiAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICBob2xkID0gMDtcbiAgICAgIGJpdHMgPSAwO1xuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubW9kZSA9IENPUFlfO1xuICAgICAgaWYgKGZsdXNoID09PSBaX1RSRUVTKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgQ09QWV86XG4gICAgICBzdGF0ZS5tb2RlID0gQ09QWTtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIENPUFk6XG4gICAgICBjb3B5ID0gc3RhdGUubGVuZ3RoO1xuICAgICAgaWYgKGNvcHkpIHtcbiAgICAgICAgaWYgKGNvcHkgPiBoYXZlKSB7IGNvcHkgPSBoYXZlOyB9XG4gICAgICAgIGlmIChjb3B5ID4gbGVmdCkgeyBjb3B5ID0gbGVmdDsgfVxuICAgICAgICBpZiAoY29weSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgLy8tLS0gem1lbWNweShwdXQsIG5leHQsIGNvcHkpOyAtLS1cbiAgICAgICAgdXRpbHMuYXJyYXlTZXQob3V0cHV0LCBpbnB1dCwgbmV4dCwgY29weSwgcHV0KTtcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgbGVmdCAtPSBjb3B5O1xuICAgICAgICBwdXQgKz0gY29weTtcbiAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICBzdG9yZWQgZW5kXFxuXCIpKTtcbiAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBUQUJMRTpcbiAgICAgIC8vPT09IE5FRURCSVRTKDE0KTsgKi9cbiAgICAgIHdoaWxlIChiaXRzIDwgMTQpIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGhhdmUtLTtcbiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgIH1cbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLm5sZW4gPSAoaG9sZCAmIDB4MWYpLypCSVRTKDUpKi8gKyAyNTc7XG4gICAgICAvLy0tLSBEUk9QQklUUyg1KSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IDU7XG4gICAgICBiaXRzIC09IDU7XG4gICAgICAvLy0tLS8vXG4gICAgICBzdGF0ZS5uZGlzdCA9IChob2xkICYgMHgxZikvKkJJVFMoNSkqLyArIDE7XG4gICAgICAvLy0tLSBEUk9QQklUUyg1KSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IDU7XG4gICAgICBiaXRzIC09IDU7XG4gICAgICAvLy0tLS8vXG4gICAgICBzdGF0ZS5uY29kZSA9IChob2xkICYgMHgwZikvKkJJVFMoNCkqLyArIDQ7XG4gICAgICAvLy0tLSBEUk9QQklUUyg0KSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IDQ7XG4gICAgICBiaXRzIC09IDQ7XG4gICAgICAvLy0tLS8vXG4vLyNpZm5kZWYgUEtaSVBfQlVHX1dPUktBUk9VTkRcbiAgICAgIGlmIChzdGF0ZS5ubGVuID4gMjg2IHx8IHN0YXRlLm5kaXN0ID4gMzApIHtcbiAgICAgICAgc3RybS5tc2cgPSAndG9vIG1hbnkgbGVuZ3RoIG9yIGRpc3RhbmNlIHN5bWJvbHMnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbi8vI2VuZGlmXG4gICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIHRhYmxlIHNpemVzIG9rXFxuXCIpKTtcbiAgICAgIHN0YXRlLmhhdmUgPSAwO1xuICAgICAgc3RhdGUubW9kZSA9IExFTkxFTlM7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBMRU5MRU5TOlxuICAgICAgd2hpbGUgKHN0YXRlLmhhdmUgPCBzdGF0ZS5uY29kZSkge1xuICAgICAgICAvLz09PSBORUVEQklUUygzKTtcbiAgICAgICAgd2hpbGUgKGJpdHMgPCAzKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLmxlbnNbb3JkZXJbc3RhdGUuaGF2ZSsrXV0gPSAoaG9sZCAmIDB4MDcpOy8vQklUUygzKTtcbiAgICAgICAgLy8tLS0gRFJPUEJJVFMoMykgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IDM7XG4gICAgICAgIGJpdHMgLT0gMztcbiAgICAgICAgLy8tLS0vL1xuICAgICAgfVxuICAgICAgd2hpbGUgKHN0YXRlLmhhdmUgPCAxOSkge1xuICAgICAgICBzdGF0ZS5sZW5zW29yZGVyW3N0YXRlLmhhdmUrK11dID0gMDtcbiAgICAgIH1cbiAgICAgIC8vIFdlIGhhdmUgc2VwYXJhdGUgdGFibGVzICYgbm8gcG9pbnRlcnMuIDIgY29tbWVudGVkIGxpbmVzIGJlbG93IG5vdCBuZWVkZWQuXG4gICAgICAvL3N0YXRlLm5leHQgPSBzdGF0ZS5jb2RlcztcbiAgICAgIC8vc3RhdGUubGVuY29kZSA9IHN0YXRlLm5leHQ7XG4gICAgICAvLyBTd2l0Y2ggdG8gdXNlIGR5bmFtaWMgdGFibGVcbiAgICAgIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5sZW5keW47XG4gICAgICBzdGF0ZS5sZW5iaXRzID0gNztcblxuICAgICAgb3B0cyA9IHsgYml0czogc3RhdGUubGVuYml0cyB9O1xuICAgICAgcmV0ID0gaW5mbGF0ZV90YWJsZShDT0RFUywgc3RhdGUubGVucywgMCwgMTksIHN0YXRlLmxlbmNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpO1xuICAgICAgc3RhdGUubGVuYml0cyA9IG9wdHMuYml0cztcblxuICAgICAgaWYgKHJldCkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGNvZGUgbGVuZ3RocyBzZXQnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgY29kZSBsZW5ndGhzIG9rXFxuXCIpKTtcbiAgICAgIHN0YXRlLmhhdmUgPSAwO1xuICAgICAgc3RhdGUubW9kZSA9IENPREVMRU5TO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgQ09ERUxFTlM6XG4gICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IHN0YXRlLm5sZW4gKyBzdGF0ZS5uZGlzdCkge1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbaG9sZCAmICgoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDEpXTsvKkJJVFMoc3RhdGUubGVuYml0cykqL1xuICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7XG5cbiAgICAgICAgICBpZiAoKGhlcmVfYml0cykgPD0gYml0cykgeyBicmVhazsgfVxuICAgICAgICAgIC8vLS0tIFBVTExCWVRFKCkgLS0tLy9cbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgfVxuICAgICAgICBpZiAoaGVyZV92YWwgPCAxNikge1xuICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICBzdGF0ZS5sZW5zW3N0YXRlLmhhdmUrK10gPSBoZXJlX3ZhbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBpZiAoaGVyZV92YWwgPT09IDE2KSB7XG4gICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyAyKTtcbiAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyAyO1xuICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLz09PS8vXG4gICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICBpZiAoc3RhdGUuaGF2ZSA9PT0gMCkge1xuICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0JztcbiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZW4gPSBzdGF0ZS5sZW5zW3N0YXRlLmhhdmUgLSAxXTtcbiAgICAgICAgICAgIGNvcHkgPSAzICsgKGhvbGQgJiAweDAzKTsvL0JJVFMoMik7XG4gICAgICAgICAgICAvLy0tLSBEUk9QQklUUygyKSAtLS0vL1xuICAgICAgICAgICAgaG9sZCA+Pj49IDI7XG4gICAgICAgICAgICBiaXRzIC09IDI7XG4gICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKGhlcmVfdmFsID09PSAxNykge1xuICAgICAgICAgICAgLy89PT0gTkVFREJJVFMoaGVyZS5iaXRzICsgMyk7XG4gICAgICAgICAgICBuID0gaGVyZV9iaXRzICsgMztcbiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikge1xuICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy89PT0vL1xuICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgICAgbGVuID0gMDtcbiAgICAgICAgICAgIGNvcHkgPSAzICsgKGhvbGQgJiAweDA3KTsvL0JJVFMoMyk7XG4gICAgICAgICAgICAvLy0tLSBEUk9QQklUUygzKSAtLS0vL1xuICAgICAgICAgICAgaG9sZCA+Pj49IDM7XG4gICAgICAgICAgICBiaXRzIC09IDM7XG4gICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy89PT0gTkVFREJJVFMoaGVyZS5iaXRzICsgNyk7XG4gICAgICAgICAgICBuID0gaGVyZV9iaXRzICsgNztcbiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikge1xuICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy89PT0vL1xuICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgICAgbGVuID0gMDtcbiAgICAgICAgICAgIGNvcHkgPSAxMSArIChob2xkICYgMHg3Zik7Ly9CSVRTKDcpO1xuICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoNykgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSA3O1xuICAgICAgICAgICAgYml0cyAtPSA3O1xuICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RhdGUuaGF2ZSArIGNvcHkgPiBzdGF0ZS5ubGVuICsgc3RhdGUubmRpc3QpIHtcbiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgYml0IGxlbmd0aCByZXBlYXQnO1xuICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICB3aGlsZSAoY29weS0tKSB7XG4gICAgICAgICAgICBzdGF0ZS5sZW5zW3N0YXRlLmhhdmUrK10gPSBsZW47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIGhhbmRsZSBlcnJvciBicmVha3MgaW4gd2hpbGUgKi9cbiAgICAgIGlmIChzdGF0ZS5tb2RlID09PSBCQUQpIHsgYnJlYWs7IH1cblxuICAgICAgLyogY2hlY2sgZm9yIGVuZC1vZi1ibG9jayBjb2RlIChiZXR0ZXIgaGF2ZSBvbmUpICovXG4gICAgICBpZiAoc3RhdGUubGVuc1syNTZdID09PSAwKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9jayc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvKiBidWlsZCBjb2RlIHRhYmxlcyAtLSBub3RlOiBkbyBub3QgY2hhbmdlIHRoZSBsZW5iaXRzIG9yIGRpc3RiaXRzXG4gICAgICAgICB2YWx1ZXMgaGVyZSAoOSBhbmQgNikgd2l0aG91dCByZWFkaW5nIHRoZSBjb21tZW50cyBpbiBpbmZ0cmVlcy5oXG4gICAgICAgICBjb25jZXJuaW5nIHRoZSBFTk9VR0ggY29uc3RhbnRzLCB3aGljaCBkZXBlbmQgb24gdGhvc2UgdmFsdWVzICovXG4gICAgICBzdGF0ZS5sZW5iaXRzID0gOTtcblxuICAgICAgb3B0cyA9IHsgYml0czogc3RhdGUubGVuYml0cyB9O1xuICAgICAgcmV0ID0gaW5mbGF0ZV90YWJsZShMRU5TLCBzdGF0ZS5sZW5zLCAwLCBzdGF0ZS5ubGVuLCBzdGF0ZS5sZW5jb2RlLCAwLCBzdGF0ZS53b3JrLCBvcHRzKTtcbiAgICAgIC8vIFdlIGhhdmUgc2VwYXJhdGUgdGFibGVzICYgbm8gcG9pbnRlcnMuIDIgY29tbWVudGVkIGxpbmVzIGJlbG93IG5vdCBuZWVkZWQuXG4gICAgICAvLyBzdGF0ZS5uZXh0X2luZGV4ID0gb3B0cy50YWJsZV9pbmRleDtcbiAgICAgIHN0YXRlLmxlbmJpdHMgPSBvcHRzLmJpdHM7XG4gICAgICAvLyBzdGF0ZS5sZW5jb2RlID0gc3RhdGUubmV4dDtcblxuICAgICAgaWYgKHJldCkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGxpdGVyYWwvbGVuZ3RocyBzZXQnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgc3RhdGUuZGlzdGJpdHMgPSA2O1xuICAgICAgLy9zdGF0ZS5kaXN0Y29kZS5jb3B5KHN0YXRlLmNvZGVzKTtcbiAgICAgIC8vIFN3aXRjaCB0byB1c2UgZHluYW1pYyB0YWJsZVxuICAgICAgc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5kaXN0ZHluO1xuICAgICAgb3B0cyA9IHsgYml0czogc3RhdGUuZGlzdGJpdHMgfTtcbiAgICAgIHJldCA9IGluZmxhdGVfdGFibGUoRElTVFMsIHN0YXRlLmxlbnMsIHN0YXRlLm5sZW4sIHN0YXRlLm5kaXN0LCBzdGF0ZS5kaXN0Y29kZSwgMCwgc3RhdGUud29yaywgb3B0cyk7XG4gICAgICAvLyBXZSBoYXZlIHNlcGFyYXRlIHRhYmxlcyAmIG5vIHBvaW50ZXJzLiAyIGNvbW1lbnRlZCBsaW5lcyBiZWxvdyBub3QgbmVlZGVkLlxuICAgICAgLy8gc3RhdGUubmV4dF9pbmRleCA9IG9wdHMudGFibGVfaW5kZXg7XG4gICAgICBzdGF0ZS5kaXN0Yml0cyA9IG9wdHMuYml0cztcbiAgICAgIC8vIHN0YXRlLmRpc3Rjb2RlID0gc3RhdGUubmV4dDtcblxuICAgICAgaWYgKHJldCkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlcyBzZXQnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vVHJhY2V2KChzdGRlcnIsICdpbmZsYXRlOiAgICAgICBjb2RlcyBva1xcbicpKTtcbiAgICAgIHN0YXRlLm1vZGUgPSBMRU5fO1xuICAgICAgaWYgKGZsdXNoID09PSBaX1RSRUVTKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgTEVOXzpcbiAgICAgIHN0YXRlLm1vZGUgPSBMRU47XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBMRU46XG4gICAgICBpZiAoaGF2ZSA+PSA2ICYmIGxlZnQgPj0gMjU4KSB7XG4gICAgICAgIC8vLS0tIFJFU1RPUkUoKSAtLS1cbiAgICAgICAgc3RybS5uZXh0X291dCA9IHB1dDtcbiAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBsZWZ0O1xuICAgICAgICBzdHJtLm5leHRfaW4gPSBuZXh0O1xuICAgICAgICBzdHJtLmF2YWlsX2luID0gaGF2ZTtcbiAgICAgICAgc3RhdGUuaG9sZCA9IGhvbGQ7XG4gICAgICAgIHN0YXRlLmJpdHMgPSBiaXRzO1xuICAgICAgICAvLy0tLVxuICAgICAgICBpbmZsYXRlX2Zhc3Qoc3RybSwgX291dCk7XG4gICAgICAgIC8vLS0tIExPQUQoKSAtLS1cbiAgICAgICAgcHV0ID0gc3RybS5uZXh0X291dDtcbiAgICAgICAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7XG4gICAgICAgIGxlZnQgPSBzdHJtLmF2YWlsX291dDtcbiAgICAgICAgbmV4dCA9IHN0cm0ubmV4dF9pbjtcbiAgICAgICAgaW5wdXQgPSBzdHJtLmlucHV0O1xuICAgICAgICBoYXZlID0gc3RybS5hdmFpbF9pbjtcbiAgICAgICAgaG9sZCA9IHN0YXRlLmhvbGQ7XG4gICAgICAgIGJpdHMgPSBzdGF0ZS5iaXRzO1xuICAgICAgICAvLy0tLVxuXG4gICAgICAgIGlmIChzdGF0ZS5tb2RlID09PSBUWVBFKSB7XG4gICAgICAgICAgc3RhdGUuYmFjayA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUuYmFjayA9IDA7XG4gICAgICBmb3IgKDs7KSB7XG4gICAgICAgIGhlcmUgPSBzdGF0ZS5sZW5jb2RlW2hvbGQgJiAoKDEgPDwgc3RhdGUubGVuYml0cykgLSAxKV07ICAvKkJJVFMoc3RhdGUubGVuYml0cykqL1xuICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7XG5cbiAgICAgICAgaWYgKGhlcmVfYml0cyA8PSBiaXRzKSB7IGJyZWFrOyB9XG4gICAgICAgIC8vLS0tIFBVTExCWVRFKCkgLS0tLy9cbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGhhdmUtLTtcbiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgLy8tLS0vL1xuICAgICAgfVxuICAgICAgaWYgKGhlcmVfb3AgJiYgKGhlcmVfb3AgJiAweGYwKSA9PT0gMCkge1xuICAgICAgICBsYXN0X2JpdHMgPSBoZXJlX2JpdHM7XG4gICAgICAgIGxhc3Rfb3AgPSBoZXJlX29wO1xuICAgICAgICBsYXN0X3ZhbCA9IGhlcmVfdmFsO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbbGFzdF92YWwgK1xuICAgICAgICAgICAgICAgICAgKChob2xkICYgKCgxIDw8IChsYXN0X2JpdHMgKyBsYXN0X29wKSkgLSAxKSkvKkJJVFMobGFzdC5iaXRzICsgbGFzdC5vcCkqLyA+PiBsYXN0X2JpdHMpXTtcbiAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmO1xuXG4gICAgICAgICAgaWYgKChsYXN0X2JpdHMgKyBoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vXG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAvLy0tLS8vXG4gICAgICAgIH1cbiAgICAgICAgLy8tLS0gRFJPUEJJVFMobGFzdC5iaXRzKSAtLS0vL1xuICAgICAgICBob2xkID4+Pj0gbGFzdF9iaXRzO1xuICAgICAgICBiaXRzIC09IGxhc3RfYml0cztcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBzdGF0ZS5iYWNrICs9IGxhc3RfYml0cztcbiAgICAgIH1cbiAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgIC8vLS0tLy9cbiAgICAgIHN0YXRlLmJhY2sgKz0gaGVyZV9iaXRzO1xuICAgICAgc3RhdGUubGVuZ3RoID0gaGVyZV92YWw7XG4gICAgICBpZiAoaGVyZV9vcCA9PT0gMCkge1xuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgaGVyZS52YWwgPj0gMHgyMCAmJiBoZXJlLnZhbCA8IDB4N2YgP1xuICAgICAgICAvLyAgICAgICAgXCJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgJyVjJ1xcblwiIDpcbiAgICAgICAgLy8gICAgICAgIFwiaW5mbGF0ZTogICAgICAgICBsaXRlcmFsIDB4JTAyeFxcblwiLCBoZXJlLnZhbCkpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gTElUO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChoZXJlX29wICYgMzIpIHtcbiAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBlbmQgb2YgYmxvY2tcXG5cIikpO1xuICAgICAgICBzdGF0ZS5iYWNrID0gLTE7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChoZXJlX29wICYgNjQpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzdGF0ZS5leHRyYSA9IGhlcmVfb3AgJiAxNTtcbiAgICAgIHN0YXRlLm1vZGUgPSBMRU5FWFQ7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBMRU5FWFQ6XG4gICAgICBpZiAoc3RhdGUuZXh0cmEpIHtcbiAgICAgICAgLy89PT0gTkVFREJJVFMoc3RhdGUuZXh0cmEpO1xuICAgICAgICBuID0gc3RhdGUuZXh0cmE7XG4gICAgICAgIHdoaWxlIChiaXRzIDwgbikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5sZW5ndGggKz0gaG9sZCAmICgoMSA8PCBzdGF0ZS5leHRyYSkgLSAxKS8qQklUUyhzdGF0ZS5leHRyYSkqLztcbiAgICAgICAgLy8tLS0gRFJPUEJJVFMoc3RhdGUuZXh0cmEpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSBzdGF0ZS5leHRyYTtcbiAgICAgICAgYml0cyAtPSBzdGF0ZS5leHRyYTtcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBzdGF0ZS5iYWNrICs9IHN0YXRlLmV4dHJhO1xuICAgICAgfVxuICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBsZW5ndGggJXVcXG5cIiwgc3RhdGUubGVuZ3RoKSk7XG4gICAgICBzdGF0ZS53YXMgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICBzdGF0ZS5tb2RlID0gRElTVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIERJU1Q6XG4gICAgICBmb3IgKDs7KSB7XG4gICAgICAgIGhlcmUgPSBzdGF0ZS5kaXN0Y29kZVtob2xkICYgKCgxIDw8IHN0YXRlLmRpc3RiaXRzKSAtIDEpXTsvKkJJVFMoc3RhdGUuZGlzdGJpdHMpKi9cbiAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7XG4gICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmO1xuXG4gICAgICAgIGlmICgoaGVyZV9iaXRzKSA8PSBiaXRzKSB7IGJyZWFrOyB9XG4gICAgICAgIC8vLS0tIFBVTExCWVRFKCkgLS0tLy9cbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGhhdmUtLTtcbiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgLy8tLS0vL1xuICAgICAgfVxuICAgICAgaWYgKChoZXJlX29wICYgMHhmMCkgPT09IDApIHtcbiAgICAgICAgbGFzdF9iaXRzID0gaGVyZV9iaXRzO1xuICAgICAgICBsYXN0X29wID0gaGVyZV9vcDtcbiAgICAgICAgbGFzdF92YWwgPSBoZXJlX3ZhbDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgIGhlcmUgPSBzdGF0ZS5kaXN0Y29kZVtsYXN0X3ZhbCArXG4gICAgICAgICAgICAgICAgICAoKGhvbGQgJiAoKDEgPDwgKGxhc3RfYml0cyArIGxhc3Rfb3ApKSAtIDEpKS8qQklUUyhsYXN0LmJpdHMgKyBsYXN0Lm9wKSovID4+IGxhc3RfYml0cyldO1xuICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7XG5cbiAgICAgICAgICBpZiAoKGxhc3RfYml0cyArIGhlcmVfYml0cykgPD0gYml0cykgeyBicmVhazsgfVxuICAgICAgICAgIC8vLS0tIFBVTExCWVRFKCkgLS0tLy9cbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgfVxuICAgICAgICAvLy0tLSBEUk9QQklUUyhsYXN0LmJpdHMpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSBsYXN0X2JpdHM7XG4gICAgICAgIGJpdHMgLT0gbGFzdF9iaXRzO1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIHN0YXRlLmJhY2sgKz0gbGFzdF9iaXRzO1xuICAgICAgfVxuICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgLy8tLS0vL1xuICAgICAgc3RhdGUuYmFjayArPSBoZXJlX2JpdHM7XG4gICAgICBpZiAoaGVyZV9vcCAmIDY0KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgY29kZSc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUub2Zmc2V0ID0gaGVyZV92YWw7XG4gICAgICBzdGF0ZS5leHRyYSA9IChoZXJlX29wKSAmIDE1O1xuICAgICAgc3RhdGUubW9kZSA9IERJU1RFWFQ7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBESVNURVhUOlxuICAgICAgaWYgKHN0YXRlLmV4dHJhKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKHN0YXRlLmV4dHJhKTtcbiAgICAgICAgbiA9IHN0YXRlLmV4dHJhO1xuICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUub2Zmc2V0ICs9IGhvbGQgJiAoKDEgPDwgc3RhdGUuZXh0cmEpIC0gMSkvKkJJVFMoc3RhdGUuZXh0cmEpKi87XG4gICAgICAgIC8vLS0tIERST1BCSVRTKHN0YXRlLmV4dHJhKSAtLS0vL1xuICAgICAgICBob2xkID4+Pj0gc3RhdGUuZXh0cmE7XG4gICAgICAgIGJpdHMgLT0gc3RhdGUuZXh0cmE7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUuYmFjayArPSBzdGF0ZS5leHRyYTtcbiAgICAgIH1cbi8vI2lmZGVmIElORkxBVEVfU1RSSUNUXG4gICAgICBpZiAoc3RhdGUub2Zmc2V0ID4gc3RhdGUuZG1heCkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuLy8jZW5kaWZcbiAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgZGlzdGFuY2UgJXVcXG5cIiwgc3RhdGUub2Zmc2V0KSk7XG4gICAgICBzdGF0ZS5tb2RlID0gTUFUQ0g7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBNQVRDSDpcbiAgICAgIGlmIChsZWZ0ID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgY29weSA9IF9vdXQgLSBsZWZ0O1xuICAgICAgaWYgKHN0YXRlLm9mZnNldCA+IGNvcHkpIHsgICAgICAgICAvKiBjb3B5IGZyb20gd2luZG93ICovXG4gICAgICAgIGNvcHkgPSBzdGF0ZS5vZmZzZXQgLSBjb3B5O1xuICAgICAgICBpZiAoY29weSA+IHN0YXRlLndoYXZlKSB7XG4gICAgICAgICAgaWYgKHN0YXRlLnNhbmUpIHtcbiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJztcbiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4vLyAoISkgVGhpcyBibG9jayBpcyBkaXNhYmxlZCBpbiB6bGliIGRlZmFpbHRzLFxuLy8gZG9uJ3QgZW5hYmxlIGl0IGZvciBiaW5hcnkgY29tcGF0aWJpbGl0eVxuLy8jaWZkZWYgSU5GTEFURV9BTExPV19JTlZBTElEX0RJU1RBTkNFX1RPT0ZBUl9BUlJSXG4vLyAgICAgICAgICBUcmFjZSgoc3RkZXJyLCBcImluZmxhdGUuYyB0b28gZmFyXFxuXCIpKTtcbi8vICAgICAgICAgIGNvcHkgLT0gc3RhdGUud2hhdmU7XG4vLyAgICAgICAgICBpZiAoY29weSA+IHN0YXRlLmxlbmd0aCkgeyBjb3B5ID0gc3RhdGUubGVuZ3RoOyB9XG4vLyAgICAgICAgICBpZiAoY29weSA+IGxlZnQpIHsgY29weSA9IGxlZnQ7IH1cbi8vICAgICAgICAgIGxlZnQgLT0gY29weTtcbi8vICAgICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5O1xuLy8gICAgICAgICAgZG8ge1xuLy8gICAgICAgICAgICBvdXRwdXRbcHV0KytdID0gMDtcbi8vICAgICAgICAgIH0gd2hpbGUgKC0tY29weSk7XG4vLyAgICAgICAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7IHN0YXRlLm1vZGUgPSBMRU47IH1cbi8vICAgICAgICAgIGJyZWFrO1xuLy8jZW5kaWZcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29weSA+IHN0YXRlLnduZXh0KSB7XG4gICAgICAgICAgY29weSAtPSBzdGF0ZS53bmV4dDtcbiAgICAgICAgICBmcm9tID0gc3RhdGUud3NpemUgLSBjb3B5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGZyb20gPSBzdGF0ZS53bmV4dCAtIGNvcHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS5sZW5ndGgpIHsgY29weSA9IHN0YXRlLmxlbmd0aDsgfVxuICAgICAgICBmcm9tX3NvdXJjZSA9IHN0YXRlLndpbmRvdztcbiAgICAgIH1cbiAgICAgIGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGNvcHkgZnJvbSBvdXRwdXQgKi9cbiAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7XG4gICAgICAgIGZyb20gPSBwdXQgLSBzdGF0ZS5vZmZzZXQ7XG4gICAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICB9XG4gICAgICBpZiAoY29weSA+IGxlZnQpIHsgY29weSA9IGxlZnQ7IH1cbiAgICAgIGxlZnQgLT0gY29weTtcbiAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5O1xuICAgICAgZG8ge1xuICAgICAgICBvdXRwdXRbcHV0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgIH0gd2hpbGUgKC0tY29weSk7XG4gICAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7IHN0YXRlLm1vZGUgPSBMRU47IH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgTElUOlxuICAgICAgaWYgKGxlZnQgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICBvdXRwdXRbcHV0KytdID0gc3RhdGUubGVuZ3RoO1xuICAgICAgbGVmdC0tO1xuICAgICAgc3RhdGUubW9kZSA9IExFTjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQ0hFQ0s6XG4gICAgICBpZiAoc3RhdGUud3JhcCkge1xuICAgICAgICAvLz09PSBORUVEQklUUygzMik7XG4gICAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgLy8gVXNlICd8JyBpbnNkZWFkIG9mICcrJyB0byBtYWtlIHN1cmUgdGhhdCByZXN1bHQgaXMgc2lnbmVkXG4gICAgICAgICAgaG9sZCB8PSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgX291dCAtPSBsZWZ0O1xuICAgICAgICBzdHJtLnRvdGFsX291dCArPSBfb3V0O1xuICAgICAgICBzdGF0ZS50b3RhbCArPSBfb3V0O1xuICAgICAgICBpZiAoX291dCkge1xuICAgICAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9XG4gICAgICAgICAgICAgIC8qVVBEQVRFKHN0YXRlLmNoZWNrLCBwdXQgLSBfb3V0LCBfb3V0KTsqL1xuICAgICAgICAgICAgICAoc3RhdGUuZmxhZ3MgPyBjcmMzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBwdXQgLSBfb3V0KSA6IGFkbGVyMzIoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgcHV0IC0gX291dCkpO1xuXG4gICAgICAgIH1cbiAgICAgICAgX291dCA9IGxlZnQ7XG4gICAgICAgIC8vIE5COiBjcmMzMiBzdG9yZWQgYXMgc2lnbmVkIDMyLWJpdCBpbnQsIHpzd2FwMzIgcmV0dXJucyBzaWduZWQgdG9vXG4gICAgICAgIGlmICgoc3RhdGUuZmxhZ3MgPyBob2xkIDogenN3YXAzMihob2xkKSkgIT09IHN0YXRlLmNoZWNrKSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGRhdGEgY2hlY2snO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAvLz09PS8vXG4gICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICBjaGVjayBtYXRjaGVzIHRyYWlsZXJcXG5cIikpO1xuICAgICAgfVxuICAgICAgc3RhdGUubW9kZSA9IExFTkdUSDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIExFTkdUSDpcbiAgICAgIGlmIChzdGF0ZS53cmFwICYmIHN0YXRlLmZsYWdzKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDMyKTtcbiAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBpZiAoaG9sZCAhPT0gKHN0YXRlLnRvdGFsICYgMHhmZmZmZmZmZikpIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdpbmNvcnJlY3QgbGVuZ3RoIGNoZWNrJztcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgbGVuZ3RoIG1hdGNoZXMgdHJhaWxlclxcblwiKSk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5tb2RlID0gRE9ORTtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIERPTkU6XG4gICAgICByZXQgPSBaX1NUUkVBTV9FTkQ7XG4gICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgY2FzZSBCQUQ6XG4gICAgICByZXQgPSBaX0RBVEFfRVJST1I7XG4gICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgY2FzZSBNRU06XG4gICAgICByZXR1cm4gWl9NRU1fRVJST1I7XG4gICAgY2FzZSBTWU5DOlxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gICAgfVxuICB9XG5cbiAgLy8gaW5mX2xlYXZlIDwtIGhlcmUgaXMgcmVhbCBwbGFjZSBmb3IgXCJnb3RvIGluZl9sZWF2ZVwiLCBlbXVsYXRlZCB2aWEgXCJicmVhayBpbmZfbGVhdmVcIlxuXG4gIC8qXG4gICAgIFJldHVybiBmcm9tIGluZmxhdGUoKSwgdXBkYXRpbmcgdGhlIHRvdGFsIGNvdW50cyBhbmQgdGhlIGNoZWNrIHZhbHVlLlxuICAgICBJZiB0aGVyZSB3YXMgbm8gcHJvZ3Jlc3MgZHVyaW5nIHRoZSBpbmZsYXRlKCkgY2FsbCwgcmV0dXJuIGEgYnVmZmVyXG4gICAgIGVycm9yLiAgQ2FsbCB1cGRhdGV3aW5kb3coKSB0byBjcmVhdGUgYW5kL29yIHVwZGF0ZSB0aGUgd2luZG93IHN0YXRlLlxuICAgICBOb3RlOiBhIG1lbW9yeSBlcnJvciBmcm9tIGluZmxhdGUoKSBpcyBub24tcmVjb3ZlcmFibGUuXG4gICAqL1xuXG4gIC8vLS0tIFJFU1RPUkUoKSAtLS1cbiAgc3RybS5uZXh0X291dCA9IHB1dDtcbiAgc3RybS5hdmFpbF9vdXQgPSBsZWZ0O1xuICBzdHJtLm5leHRfaW4gPSBuZXh0O1xuICBzdHJtLmF2YWlsX2luID0gaGF2ZTtcbiAgc3RhdGUuaG9sZCA9IGhvbGQ7XG4gIHN0YXRlLmJpdHMgPSBiaXRzO1xuICAvLy0tLVxuXG4gIGlmIChzdGF0ZS53c2l6ZSB8fCAoX291dCAhPT0gc3RybS5hdmFpbF9vdXQgJiYgc3RhdGUubW9kZSA8IEJBRCAmJlxuICAgICAgICAgICAgICAgICAgICAgIChzdGF0ZS5tb2RlIDwgQ0hFQ0sgfHwgZmx1c2ggIT09IFpfRklOSVNIKSkpIHtcbiAgICBpZiAodXBkYXRld2luZG93KHN0cm0sIHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0LCBfb3V0IC0gc3RybS5hdmFpbF9vdXQpKSB7XG4gICAgICBzdGF0ZS5tb2RlID0gTUVNO1xuICAgICAgcmV0dXJuIFpfTUVNX0VSUk9SO1xuICAgIH1cbiAgfVxuICBfaW4gLT0gc3RybS5hdmFpbF9pbjtcbiAgX291dCAtPSBzdHJtLmF2YWlsX291dDtcbiAgc3RybS50b3RhbF9pbiArPSBfaW47XG4gIHN0cm0udG90YWxfb3V0ICs9IF9vdXQ7XG4gIHN0YXRlLnRvdGFsICs9IF9vdXQ7XG4gIGlmIChzdGF0ZS53cmFwICYmIF9vdXQpIHtcbiAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAvKlVQREFURShzdGF0ZS5jaGVjaywgc3RybS5uZXh0X291dCAtIF9vdXQsIF9vdXQpOyovXG4gICAgICAoc3RhdGUuZmxhZ3MgPyBjcmMzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBzdHJtLm5leHRfb3V0IC0gX291dCkgOiBhZGxlcjMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHN0cm0ubmV4dF9vdXQgLSBfb3V0KSk7XG4gIH1cbiAgc3RybS5kYXRhX3R5cGUgPSBzdGF0ZS5iaXRzICsgKHN0YXRlLmxhc3QgPyA2NCA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgKHN0YXRlLm1vZGUgPT09IFRZUEUgPyAxMjggOiAwKSArXG4gICAgICAgICAgICAgICAgICAgIChzdGF0ZS5tb2RlID09PSBMRU5fIHx8IHN0YXRlLm1vZGUgPT09IENPUFlfID8gMjU2IDogMCk7XG4gIGlmICgoKF9pbiA9PT0gMCAmJiBfb3V0ID09PSAwKSB8fCBmbHVzaCA9PT0gWl9GSU5JU0gpICYmIHJldCA9PT0gWl9PSykge1xuICAgIHJldCA9IFpfQlVGX0VSUk9SO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGVFbmQoc3RybSkge1xuXG4gIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSAvKnx8IHN0cm0tPnpmcmVlID09IChmcmVlX2Z1bmMpMCovKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG5cbiAgdmFyIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgaWYgKHN0YXRlLndpbmRvdykge1xuICAgIHN0YXRlLndpbmRvdyA9IG51bGw7XG4gIH1cbiAgc3RybS5zdGF0ZSA9IG51bGw7XG4gIHJldHVybiBaX09LO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlR2V0SGVhZGVyKHN0cm0sIGhlYWQpIHtcbiAgdmFyIHN0YXRlO1xuXG4gIC8qIGNoZWNrIHN0YXRlICovXG4gIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBpZiAoKHN0YXRlLndyYXAgJiAyKSA9PT0gMCkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cblxuICAvKiBzYXZlIGhlYWRlciBzdHJ1Y3R1cmUgKi9cbiAgc3RhdGUuaGVhZCA9IGhlYWQ7XG4gIGhlYWQuZG9uZSA9IGZhbHNlO1xuICByZXR1cm4gWl9PSztcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZVNldERpY3Rpb25hcnkoc3RybSwgZGljdGlvbmFyeSkge1xuICB2YXIgZGljdExlbmd0aCA9IGRpY3Rpb25hcnkubGVuZ3RoO1xuXG4gIHZhciBzdGF0ZTtcbiAgdmFyIGRpY3RpZDtcbiAgdmFyIHJldDtcblxuICAvKiBjaGVjayBzdGF0ZSAqL1xuICBpZiAoIXN0cm0gLyogPT0gWl9OVUxMICovIHx8ICFzdHJtLnN0YXRlIC8qID09IFpfTlVMTCAqLykgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuXG4gIGlmIChzdGF0ZS53cmFwICE9PSAwICYmIHN0YXRlLm1vZGUgIT09IERJQ1QpIHtcbiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gIH1cblxuICAvKiBjaGVjayBmb3IgY29ycmVjdCBkaWN0aW9uYXJ5IGlkZW50aWZpZXIgKi9cbiAgaWYgKHN0YXRlLm1vZGUgPT09IERJQ1QpIHtcbiAgICBkaWN0aWQgPSAxOyAvKiBhZGxlcjMyKDAsIG51bGwsIDApKi9cbiAgICAvKiBkaWN0aWQgPSBhZGxlcjMyKGRpY3RpZCwgZGljdGlvbmFyeSwgZGljdExlbmd0aCk7ICovXG4gICAgZGljdGlkID0gYWRsZXIzMihkaWN0aWQsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgsIDApO1xuICAgIGlmIChkaWN0aWQgIT09IHN0YXRlLmNoZWNrKSB7XG4gICAgICByZXR1cm4gWl9EQVRBX0VSUk9SO1xuICAgIH1cbiAgfVxuICAvKiBjb3B5IGRpY3Rpb25hcnkgdG8gd2luZG93IHVzaW5nIHVwZGF0ZXdpbmRvdygpLCB3aGljaCB3aWxsIGFtZW5kIHRoZVxuICAgZXhpc3RpbmcgZGljdGlvbmFyeSBpZiBhcHByb3ByaWF0ZSAqL1xuICByZXQgPSB1cGRhdGV3aW5kb3coc3RybSwgZGljdGlvbmFyeSwgZGljdExlbmd0aCwgZGljdExlbmd0aCk7XG4gIGlmIChyZXQpIHtcbiAgICBzdGF0ZS5tb2RlID0gTUVNO1xuICAgIHJldHVybiBaX01FTV9FUlJPUjtcbiAgfVxuICBzdGF0ZS5oYXZlZGljdCA9IDE7XG4gIC8vIFRyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgZGljdGlvbmFyeSBzZXRcXG5cIikpO1xuICByZXR1cm4gWl9PSztcbn1cblxuZXhwb3J0cy5pbmZsYXRlUmVzZXQgPSBpbmZsYXRlUmVzZXQ7XG5leHBvcnRzLmluZmxhdGVSZXNldDIgPSBpbmZsYXRlUmVzZXQyO1xuZXhwb3J0cy5pbmZsYXRlUmVzZXRLZWVwID0gaW5mbGF0ZVJlc2V0S2VlcDtcbmV4cG9ydHMuaW5mbGF0ZUluaXQgPSBpbmZsYXRlSW5pdDtcbmV4cG9ydHMuaW5mbGF0ZUluaXQyID0gaW5mbGF0ZUluaXQyO1xuZXhwb3J0cy5pbmZsYXRlID0gaW5mbGF0ZTtcbmV4cG9ydHMuaW5mbGF0ZUVuZCA9IGluZmxhdGVFbmQ7XG5leHBvcnRzLmluZmxhdGVHZXRIZWFkZXIgPSBpbmZsYXRlR2V0SGVhZGVyO1xuZXhwb3J0cy5pbmZsYXRlU2V0RGljdGlvbmFyeSA9IGluZmxhdGVTZXREaWN0aW9uYXJ5O1xuZXhwb3J0cy5pbmZsYXRlSW5mbyA9ICdwYWtvIGluZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpJztcblxuLyogTm90IGltcGxlbWVudGVkXG5leHBvcnRzLmluZmxhdGVDb3B5ID0gaW5mbGF0ZUNvcHk7XG5leHBvcnRzLmluZmxhdGVHZXREaWN0aW9uYXJ5ID0gaW5mbGF0ZUdldERpY3Rpb25hcnk7XG5leHBvcnRzLmluZmxhdGVNYXJrID0gaW5mbGF0ZU1hcms7XG5leHBvcnRzLmluZmxhdGVQcmltZSA9IGluZmxhdGVQcmltZTtcbmV4cG9ydHMuaW5mbGF0ZVN5bmMgPSBpbmZsYXRlU3luYztcbmV4cG9ydHMuaW5mbGF0ZVN5bmNQb2ludCA9IGluZmxhdGVTeW5jUG9pbnQ7XG5leHBvcnRzLmluZmxhdGVVbmRlcm1pbmUgPSBpbmZsYXRlVW5kZXJtaW5lO1xuKi9cbiIsIid1c2Ugc3RyaWN0JztcblxuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy9jb21tb24nKTtcblxudmFyIE1BWEJJVFMgPSAxNTtcbnZhciBFTk9VR0hfTEVOUyA9IDg1MjtcbnZhciBFTk9VR0hfRElTVFMgPSA1OTI7XG4vL3ZhciBFTk9VR0ggPSAoRU5PVUdIX0xFTlMrRU5PVUdIX0RJU1RTKTtcblxudmFyIENPREVTID0gMDtcbnZhciBMRU5TID0gMTtcbnZhciBESVNUUyA9IDI7XG5cbnZhciBsYmFzZSA9IFsgLyogTGVuZ3RoIGNvZGVzIDI1Ny4uMjg1IGJhc2UgKi9cbiAgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMywgMTUsIDE3LCAxOSwgMjMsIDI3LCAzMSxcbiAgMzUsIDQzLCA1MSwgNTksIDY3LCA4MywgOTksIDExNSwgMTMxLCAxNjMsIDE5NSwgMjI3LCAyNTgsIDAsIDBcbl07XG5cbnZhciBsZXh0ID0gWyAvKiBMZW5ndGggY29kZXMgMjU3Li4yODUgZXh0cmEgKi9cbiAgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNywgMTcsIDE3LCAxNywgMTgsIDE4LCAxOCwgMTgsXG4gIDE5LCAxOSwgMTksIDE5LCAyMCwgMjAsIDIwLCAyMCwgMjEsIDIxLCAyMSwgMjEsIDE2LCA3MiwgNzhcbl07XG5cbnZhciBkYmFzZSA9IFsgLyogRGlzdGFuY2UgY29kZXMgMC4uMjkgYmFzZSAqL1xuICAxLCAyLCAzLCA0LCA1LCA3LCA5LCAxMywgMTcsIDI1LCAzMywgNDksIDY1LCA5NywgMTI5LCAxOTMsXG4gIDI1NywgMzg1LCA1MTMsIDc2OSwgMTAyNSwgMTUzNywgMjA0OSwgMzA3MywgNDA5NywgNjE0NSxcbiAgODE5MywgMTIyODksIDE2Mzg1LCAyNDU3NywgMCwgMFxuXTtcblxudmFyIGRleHQgPSBbIC8qIERpc3RhbmNlIGNvZGVzIDAuLjI5IGV4dHJhICovXG4gIDE2LCAxNiwgMTYsIDE2LCAxNywgMTcsIDE4LCAxOCwgMTksIDE5LCAyMCwgMjAsIDIxLCAyMSwgMjIsIDIyLFxuICAyMywgMjMsIDI0LCAyNCwgMjUsIDI1LCAyNiwgMjYsIDI3LCAyNyxcbiAgMjgsIDI4LCAyOSwgMjksIDY0LCA2NFxuXTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmZsYXRlX3RhYmxlKHR5cGUsIGxlbnMsIGxlbnNfaW5kZXgsIGNvZGVzLCB0YWJsZSwgdGFibGVfaW5kZXgsIHdvcmssIG9wdHMpXG57XG4gIHZhciBiaXRzID0gb3B0cy5iaXRzO1xuICAgICAgLy9oZXJlID0gb3B0cy5oZXJlOyAvKiB0YWJsZSBlbnRyeSBmb3IgZHVwbGljYXRpb24gKi9cblxuICB2YXIgbGVuID0gMDsgICAgICAgICAgICAgICAvKiBhIGNvZGUncyBsZW5ndGggaW4gYml0cyAqL1xuICB2YXIgc3ltID0gMDsgICAgICAgICAgICAgICAvKiBpbmRleCBvZiBjb2RlIHN5bWJvbHMgKi9cbiAgdmFyIG1pbiA9IDAsIG1heCA9IDA7ICAgICAgICAgIC8qIG1pbmltdW0gYW5kIG1heGltdW0gY29kZSBsZW5ndGhzICovXG4gIHZhciByb290ID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciByb290IHRhYmxlICovXG4gIHZhciBjdXJyID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciBjdXJyZW50IHRhYmxlICovXG4gIHZhciBkcm9wID0gMDsgICAgICAgICAgICAgIC8qIGNvZGUgYml0cyB0byBkcm9wIGZvciBzdWItdGFibGUgKi9cbiAgdmFyIGxlZnQgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgcHJlZml4IGNvZGVzIGF2YWlsYWJsZSAqL1xuICB2YXIgdXNlZCA9IDA7ICAgICAgICAgICAgICAvKiBjb2RlIGVudHJpZXMgaW4gdGFibGUgdXNlZCAqL1xuICB2YXIgaHVmZiA9IDA7ICAgICAgICAgICAgICAvKiBIdWZmbWFuIGNvZGUgKi9cbiAgdmFyIGluY3I7ICAgICAgICAgICAgICAvKiBmb3IgaW5jcmVtZW50aW5nIGNvZGUsIGluZGV4ICovXG4gIHZhciBmaWxsOyAgICAgICAgICAgICAgLyogaW5kZXggZm9yIHJlcGxpY2F0aW5nIGVudHJpZXMgKi9cbiAgdmFyIGxvdzsgICAgICAgICAgICAgICAvKiBsb3cgYml0cyBmb3IgY3VycmVudCByb290IGVudHJ5ICovXG4gIHZhciBtYXNrOyAgICAgICAgICAgICAgLyogbWFzayBmb3IgbG93IHJvb3QgYml0cyAqL1xuICB2YXIgbmV4dDsgICAgICAgICAgICAgLyogbmV4dCBhdmFpbGFibGUgc3BhY2UgaW4gdGFibGUgKi9cbiAgdmFyIGJhc2UgPSBudWxsOyAgICAgLyogYmFzZSB2YWx1ZSB0YWJsZSB0byB1c2UgKi9cbiAgdmFyIGJhc2VfaW5kZXggPSAwO1xuLy8gIHZhciBzaG9leHRyYTsgICAgLyogZXh0cmEgYml0cyB0YWJsZSB0byB1c2UgKi9cbiAgdmFyIGVuZDsgICAgICAgICAgICAgICAgICAgIC8qIHVzZSBiYXNlIGFuZCBleHRyYSBmb3Igc3ltYm9sID4gZW5kICovXG4gIHZhciBjb3VudCA9IG5ldyB1dGlscy5CdWYxNihNQVhCSVRTICsgMSk7IC8vW01BWEJJVFMrMV07ICAgIC8qIG51bWJlciBvZiBjb2RlcyBvZiBlYWNoIGxlbmd0aCAqL1xuICB2YXIgb2ZmcyA9IG5ldyB1dGlscy5CdWYxNihNQVhCSVRTICsgMSk7IC8vW01BWEJJVFMrMV07ICAgICAvKiBvZmZzZXRzIGluIHRhYmxlIGZvciBlYWNoIGxlbmd0aCAqL1xuICB2YXIgZXh0cmEgPSBudWxsO1xuICB2YXIgZXh0cmFfaW5kZXggPSAwO1xuXG4gIHZhciBoZXJlX2JpdHMsIGhlcmVfb3AsIGhlcmVfdmFsO1xuXG4gIC8qXG4gICBQcm9jZXNzIGEgc2V0IG9mIGNvZGUgbGVuZ3RocyB0byBjcmVhdGUgYSBjYW5vbmljYWwgSHVmZm1hbiBjb2RlLiAgVGhlXG4gICBjb2RlIGxlbmd0aHMgYXJlIGxlbnNbMC4uY29kZXMtMV0uICBFYWNoIGxlbmd0aCBjb3JyZXNwb25kcyB0byB0aGVcbiAgIHN5bWJvbHMgMC4uY29kZXMtMS4gIFRoZSBIdWZmbWFuIGNvZGUgaXMgZ2VuZXJhdGVkIGJ5IGZpcnN0IHNvcnRpbmcgdGhlXG4gICBzeW1ib2xzIGJ5IGxlbmd0aCBmcm9tIHNob3J0IHRvIGxvbmcsIGFuZCByZXRhaW5pbmcgdGhlIHN5bWJvbCBvcmRlclxuICAgZm9yIGNvZGVzIHdpdGggZXF1YWwgbGVuZ3Rocy4gIFRoZW4gdGhlIGNvZGUgc3RhcnRzIHdpdGggYWxsIHplcm8gYml0c1xuICAgZm9yIHRoZSBmaXJzdCBjb2RlIG9mIHRoZSBzaG9ydGVzdCBsZW5ndGgsIGFuZCB0aGUgY29kZXMgYXJlIGludGVnZXJcbiAgIGluY3JlbWVudHMgZm9yIHRoZSBzYW1lIGxlbmd0aCwgYW5kIHplcm9zIGFyZSBhcHBlbmRlZCBhcyB0aGUgbGVuZ3RoXG4gICBpbmNyZWFzZXMuICBGb3IgdGhlIGRlZmxhdGUgZm9ybWF0LCB0aGVzZSBiaXRzIGFyZSBzdG9yZWQgYmFja3dhcmRzXG4gICBmcm9tIHRoZWlyIG1vcmUgbmF0dXJhbCBpbnRlZ2VyIGluY3JlbWVudCBvcmRlcmluZywgYW5kIHNvIHdoZW4gdGhlXG4gICBkZWNvZGluZyB0YWJsZXMgYXJlIGJ1aWx0IGluIHRoZSBsYXJnZSBsb29wIGJlbG93LCB0aGUgaW50ZWdlciBjb2Rlc1xuICAgYXJlIGluY3JlbWVudGVkIGJhY2t3YXJkcy5cblxuICAgVGhpcyByb3V0aW5lIGFzc3VtZXMsIGJ1dCBkb2VzIG5vdCBjaGVjaywgdGhhdCBhbGwgb2YgdGhlIGVudHJpZXMgaW5cbiAgIGxlbnNbXSBhcmUgaW4gdGhlIHJhbmdlIDAuLk1BWEJJVFMuICBUaGUgY2FsbGVyIG11c3QgYXNzdXJlIHRoaXMuXG4gICAxLi5NQVhCSVRTIGlzIGludGVycHJldGVkIGFzIHRoYXQgY29kZSBsZW5ndGguICB6ZXJvIG1lYW5zIHRoYXQgdGhhdFxuICAgc3ltYm9sIGRvZXMgbm90IG9jY3VyIGluIHRoaXMgY29kZS5cblxuICAgVGhlIGNvZGVzIGFyZSBzb3J0ZWQgYnkgY29tcHV0aW5nIGEgY291bnQgb2YgY29kZXMgZm9yIGVhY2ggbGVuZ3RoLFxuICAgY3JlYXRpbmcgZnJvbSB0aGF0IGEgdGFibGUgb2Ygc3RhcnRpbmcgaW5kaWNlcyBmb3IgZWFjaCBsZW5ndGggaW4gdGhlXG4gICBzb3J0ZWQgdGFibGUsIGFuZCB0aGVuIGVudGVyaW5nIHRoZSBzeW1ib2xzIGluIG9yZGVyIGluIHRoZSBzb3J0ZWRcbiAgIHRhYmxlLiAgVGhlIHNvcnRlZCB0YWJsZSBpcyB3b3JrW10sIHdpdGggdGhhdCBzcGFjZSBiZWluZyBwcm92aWRlZCBieVxuICAgdGhlIGNhbGxlci5cblxuICAgVGhlIGxlbmd0aCBjb3VudHMgYXJlIHVzZWQgZm9yIG90aGVyIHB1cnBvc2VzIGFzIHdlbGwsIGkuZS4gZmluZGluZ1xuICAgdGhlIG1pbmltdW0gYW5kIG1heGltdW0gbGVuZ3RoIGNvZGVzLCBkZXRlcm1pbmluZyBpZiB0aGVyZSBhcmUgYW55XG4gICBjb2RlcyBhdCBhbGwsIGNoZWNraW5nIGZvciBhIHZhbGlkIHNldCBvZiBsZW5ndGhzLCBhbmQgbG9va2luZyBhaGVhZFxuICAgYXQgbGVuZ3RoIGNvdW50cyB0byBkZXRlcm1pbmUgc3ViLXRhYmxlIHNpemVzIHdoZW4gYnVpbGRpbmcgdGhlXG4gICBkZWNvZGluZyB0YWJsZXMuXG4gICAqL1xuXG4gIC8qIGFjY3VtdWxhdGUgbGVuZ3RocyBmb3IgY29kZXMgKGFzc3VtZXMgbGVuc1tdIGFsbCBpbiAwLi5NQVhCSVRTKSAqL1xuICBmb3IgKGxlbiA9IDA7IGxlbiA8PSBNQVhCSVRTOyBsZW4rKykge1xuICAgIGNvdW50W2xlbl0gPSAwO1xuICB9XG4gIGZvciAoc3ltID0gMDsgc3ltIDwgY29kZXM7IHN5bSsrKSB7XG4gICAgY291bnRbbGVuc1tsZW5zX2luZGV4ICsgc3ltXV0rKztcbiAgfVxuXG4gIC8qIGJvdW5kIGNvZGUgbGVuZ3RocywgZm9yY2Ugcm9vdCB0byBiZSB3aXRoaW4gY29kZSBsZW5ndGhzICovXG4gIHJvb3QgPSBiaXRzO1xuICBmb3IgKG1heCA9IE1BWEJJVFM7IG1heCA+PSAxOyBtYXgtLSkge1xuICAgIGlmIChjb3VudFttYXhdICE9PSAwKSB7IGJyZWFrOyB9XG4gIH1cbiAgaWYgKHJvb3QgPiBtYXgpIHtcbiAgICByb290ID0gbWF4O1xuICB9XG4gIGlmIChtYXggPT09IDApIHsgICAgICAgICAgICAgICAgICAgICAvKiBubyBzeW1ib2xzIHRvIGNvZGUgYXQgYWxsICovXG4gICAgLy90YWJsZS5vcFtvcHRzLnRhYmxlX2luZGV4XSA9IDY0OyAgLy9oZXJlLm9wID0gKHZhciBjaGFyKTY0OyAgICAvKiBpbnZhbGlkIGNvZGUgbWFya2VyICovXG4gICAgLy90YWJsZS5iaXRzW29wdHMudGFibGVfaW5kZXhdID0gMTsgICAvL2hlcmUuYml0cyA9ICh2YXIgY2hhcikxO1xuICAgIC8vdGFibGUudmFsW29wdHMudGFibGVfaW5kZXgrK10gPSAwOyAgIC8vaGVyZS52YWwgPSAodmFyIHNob3J0KTA7XG4gICAgdGFibGVbdGFibGVfaW5kZXgrK10gPSAoMSA8PCAyNCkgfCAoNjQgPDwgMTYpIHwgMDtcblxuXG4gICAgLy90YWJsZS5vcFtvcHRzLnRhYmxlX2luZGV4XSA9IDY0O1xuICAgIC8vdGFibGUuYml0c1tvcHRzLnRhYmxlX2luZGV4XSA9IDE7XG4gICAgLy90YWJsZS52YWxbb3B0cy50YWJsZV9pbmRleCsrXSA9IDA7XG4gICAgdGFibGVbdGFibGVfaW5kZXgrK10gPSAoMSA8PCAyNCkgfCAoNjQgPDwgMTYpIHwgMDtcblxuICAgIG9wdHMuYml0cyA9IDE7XG4gICAgcmV0dXJuIDA7ICAgICAvKiBubyBzeW1ib2xzLCBidXQgd2FpdCBmb3IgZGVjb2RpbmcgdG8gcmVwb3J0IGVycm9yICovXG4gIH1cbiAgZm9yIChtaW4gPSAxOyBtaW4gPCBtYXg7IG1pbisrKSB7XG4gICAgaWYgKGNvdW50W21pbl0gIT09IDApIHsgYnJlYWs7IH1cbiAgfVxuICBpZiAocm9vdCA8IG1pbikge1xuICAgIHJvb3QgPSBtaW47XG4gIH1cblxuICAvKiBjaGVjayBmb3IgYW4gb3Zlci1zdWJzY3JpYmVkIG9yIGluY29tcGxldGUgc2V0IG9mIGxlbmd0aHMgKi9cbiAgbGVmdCA9IDE7XG4gIGZvciAobGVuID0gMTsgbGVuIDw9IE1BWEJJVFM7IGxlbisrKSB7XG4gICAgbGVmdCA8PD0gMTtcbiAgICBsZWZ0IC09IGNvdW50W2xlbl07XG4gICAgaWYgKGxlZnQgPCAwKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfSAgICAgICAgLyogb3Zlci1zdWJzY3JpYmVkICovXG4gIH1cbiAgaWYgKGxlZnQgPiAwICYmICh0eXBlID09PSBDT0RFUyB8fCBtYXggIT09IDEpKSB7XG4gICAgcmV0dXJuIC0xOyAgICAgICAgICAgICAgICAgICAgICAvKiBpbmNvbXBsZXRlIHNldCAqL1xuICB9XG5cbiAgLyogZ2VuZXJhdGUgb2Zmc2V0cyBpbnRvIHN5bWJvbCB0YWJsZSBmb3IgZWFjaCBsZW5ndGggZm9yIHNvcnRpbmcgKi9cbiAgb2Zmc1sxXSA9IDA7XG4gIGZvciAobGVuID0gMTsgbGVuIDwgTUFYQklUUzsgbGVuKyspIHtcbiAgICBvZmZzW2xlbiArIDFdID0gb2Zmc1tsZW5dICsgY291bnRbbGVuXTtcbiAgfVxuXG4gIC8qIHNvcnQgc3ltYm9scyBieSBsZW5ndGgsIGJ5IHN5bWJvbCBvcmRlciB3aXRoaW4gZWFjaCBsZW5ndGggKi9cbiAgZm9yIChzeW0gPSAwOyBzeW0gPCBjb2Rlczsgc3ltKyspIHtcbiAgICBpZiAobGVuc1tsZW5zX2luZGV4ICsgc3ltXSAhPT0gMCkge1xuICAgICAgd29ya1tvZmZzW2xlbnNbbGVuc19pbmRleCArIHN5bV1dKytdID0gc3ltO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICBDcmVhdGUgYW5kIGZpbGwgaW4gZGVjb2RpbmcgdGFibGVzLiAgSW4gdGhpcyBsb29wLCB0aGUgdGFibGUgYmVpbmdcbiAgIGZpbGxlZCBpcyBhdCBuZXh0IGFuZCBoYXMgY3VyciBpbmRleCBiaXRzLiAgVGhlIGNvZGUgYmVpbmcgdXNlZCBpcyBodWZmXG4gICB3aXRoIGxlbmd0aCBsZW4uICBUaGF0IGNvZGUgaXMgY29udmVydGVkIHRvIGFuIGluZGV4IGJ5IGRyb3BwaW5nIGRyb3BcbiAgIGJpdHMgb2ZmIG9mIHRoZSBib3R0b20uICBGb3IgY29kZXMgd2hlcmUgbGVuIGlzIGxlc3MgdGhhbiBkcm9wICsgY3VycixcbiAgIHRob3NlIHRvcCBkcm9wICsgY3VyciAtIGxlbiBiaXRzIGFyZSBpbmNyZW1lbnRlZCB0aHJvdWdoIGFsbCB2YWx1ZXMgdG9cbiAgIGZpbGwgdGhlIHRhYmxlIHdpdGggcmVwbGljYXRlZCBlbnRyaWVzLlxuXG4gICByb290IGlzIHRoZSBudW1iZXIgb2YgaW5kZXggYml0cyBmb3IgdGhlIHJvb3QgdGFibGUuICBXaGVuIGxlbiBleGNlZWRzXG4gICByb290LCBzdWItdGFibGVzIGFyZSBjcmVhdGVkIHBvaW50ZWQgdG8gYnkgdGhlIHJvb3QgZW50cnkgd2l0aCBhbiBpbmRleFxuICAgb2YgdGhlIGxvdyByb290IGJpdHMgb2YgaHVmZi4gIFRoaXMgaXMgc2F2ZWQgaW4gbG93IHRvIGNoZWNrIGZvciB3aGVuIGFcbiAgIG5ldyBzdWItdGFibGUgc2hvdWxkIGJlIHN0YXJ0ZWQuICBkcm9wIGlzIHplcm8gd2hlbiB0aGUgcm9vdCB0YWJsZSBpc1xuICAgYmVpbmcgZmlsbGVkLCBhbmQgZHJvcCBpcyByb290IHdoZW4gc3ViLXRhYmxlcyBhcmUgYmVpbmcgZmlsbGVkLlxuXG4gICBXaGVuIGEgbmV3IHN1Yi10YWJsZSBpcyBuZWVkZWQsIGl0IGlzIG5lY2Vzc2FyeSB0byBsb29rIGFoZWFkIGluIHRoZVxuICAgY29kZSBsZW5ndGhzIHRvIGRldGVybWluZSB3aGF0IHNpemUgc3ViLXRhYmxlIGlzIG5lZWRlZC4gIFRoZSBsZW5ndGhcbiAgIGNvdW50cyBhcmUgdXNlZCBmb3IgdGhpcywgYW5kIHNvIGNvdW50W10gaXMgZGVjcmVtZW50ZWQgYXMgY29kZXMgYXJlXG4gICBlbnRlcmVkIGluIHRoZSB0YWJsZXMuXG5cbiAgIHVzZWQga2VlcHMgdHJhY2sgb2YgaG93IG1hbnkgdGFibGUgZW50cmllcyBoYXZlIGJlZW4gYWxsb2NhdGVkIGZyb20gdGhlXG4gICBwcm92aWRlZCAqdGFibGUgc3BhY2UuICBJdCBpcyBjaGVja2VkIGZvciBMRU5TIGFuZCBESVNUIHRhYmxlcyBhZ2FpbnN0XG4gICB0aGUgY29uc3RhbnRzIEVOT1VHSF9MRU5TIGFuZCBFTk9VR0hfRElTVFMgdG8gZ3VhcmQgYWdhaW5zdCBjaGFuZ2VzIGluXG4gICB0aGUgaW5pdGlhbCByb290IHRhYmxlIHNpemUgY29uc3RhbnRzLiAgU2VlIHRoZSBjb21tZW50cyBpbiBpbmZ0cmVlcy5oXG4gICBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgc3ltIGluY3JlbWVudHMgdGhyb3VnaCBhbGwgc3ltYm9scywgYW5kIHRoZSBsb29wIHRlcm1pbmF0ZXMgd2hlblxuICAgYWxsIGNvZGVzIG9mIGxlbmd0aCBtYXgsIGkuZS4gYWxsIGNvZGVzLCBoYXZlIGJlZW4gcHJvY2Vzc2VkLiAgVGhpc1xuICAgcm91dGluZSBwZXJtaXRzIGluY29tcGxldGUgY29kZXMsIHNvIGFub3RoZXIgbG9vcCBhZnRlciB0aGlzIG9uZSBmaWxsc1xuICAgaW4gdGhlIHJlc3Qgb2YgdGhlIGRlY29kaW5nIHRhYmxlcyB3aXRoIGludmFsaWQgY29kZSBtYXJrZXJzLlxuICAgKi9cblxuICAvKiBzZXQgdXAgZm9yIGNvZGUgdHlwZSAqL1xuICAvLyBwb29yIG1hbiBvcHRpbWl6YXRpb24gLSB1c2UgaWYtZWxzZSBpbnN0ZWFkIG9mIHN3aXRjaCxcbiAgLy8gdG8gYXZvaWQgZGVvcHRzIGluIG9sZCB2OFxuICBpZiAodHlwZSA9PT0gQ09ERVMpIHtcbiAgICBiYXNlID0gZXh0cmEgPSB3b3JrOyAgICAvKiBkdW1teSB2YWx1ZS0tbm90IHVzZWQgKi9cbiAgICBlbmQgPSAxOTtcblxuICB9IGVsc2UgaWYgKHR5cGUgPT09IExFTlMpIHtcbiAgICBiYXNlID0gbGJhc2U7XG4gICAgYmFzZV9pbmRleCAtPSAyNTc7XG4gICAgZXh0cmEgPSBsZXh0O1xuICAgIGV4dHJhX2luZGV4IC09IDI1NztcbiAgICBlbmQgPSAyNTY7XG5cbiAgfSBlbHNlIHsgICAgICAgICAgICAgICAgICAgIC8qIERJU1RTICovXG4gICAgYmFzZSA9IGRiYXNlO1xuICAgIGV4dHJhID0gZGV4dDtcbiAgICBlbmQgPSAtMTtcbiAgfVxuXG4gIC8qIGluaXRpYWxpemUgb3B0cyBmb3IgbG9vcCAqL1xuICBodWZmID0gMDsgICAgICAgICAgICAgICAgICAgLyogc3RhcnRpbmcgY29kZSAqL1xuICBzeW0gPSAwOyAgICAgICAgICAgICAgICAgICAgLyogc3RhcnRpbmcgY29kZSBzeW1ib2wgKi9cbiAgbGVuID0gbWluOyAgICAgICAgICAgICAgICAgIC8qIHN0YXJ0aW5nIGNvZGUgbGVuZ3RoICovXG4gIG5leHQgPSB0YWJsZV9pbmRleDsgICAgICAgICAgICAgIC8qIGN1cnJlbnQgdGFibGUgdG8gZmlsbCBpbiAqL1xuICBjdXJyID0gcm9vdDsgICAgICAgICAgICAgICAgLyogY3VycmVudCB0YWJsZSBpbmRleCBiaXRzICovXG4gIGRyb3AgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBjdXJyZW50IGJpdHMgdG8gZHJvcCBmcm9tIGNvZGUgZm9yIGluZGV4ICovXG4gIGxvdyA9IC0xOyAgICAgICAgICAgICAgICAgICAvKiB0cmlnZ2VyIG5ldyBzdWItdGFibGUgd2hlbiBsZW4gPiByb290ICovXG4gIHVzZWQgPSAxIDw8IHJvb3Q7ICAgICAgICAgIC8qIHVzZSByb290IHRhYmxlIGVudHJpZXMgKi9cbiAgbWFzayA9IHVzZWQgLSAxOyAgICAgICAgICAgIC8qIG1hc2sgZm9yIGNvbXBhcmluZyBsb3cgKi9cblxuICAvKiBjaGVjayBhdmFpbGFibGUgdGFibGUgc3BhY2UgKi9cbiAgaWYgKCh0eXBlID09PSBMRU5TICYmIHVzZWQgPiBFTk9VR0hfTEVOUykgfHxcbiAgICAodHlwZSA9PT0gRElTVFMgJiYgdXNlZCA+IEVOT1VHSF9ESVNUUykpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIHZhciBpID0gMDtcbiAgLyogcHJvY2VzcyBhbGwgY29kZXMgYW5kIG1ha2UgdGFibGUgZW50cmllcyAqL1xuICBmb3IgKDs7KSB7XG4gICAgaSsrO1xuICAgIC8qIGNyZWF0ZSB0YWJsZSBlbnRyeSAqL1xuICAgIGhlcmVfYml0cyA9IGxlbiAtIGRyb3A7XG4gICAgaWYgKHdvcmtbc3ltXSA8IGVuZCkge1xuICAgICAgaGVyZV9vcCA9IDA7XG4gICAgICBoZXJlX3ZhbCA9IHdvcmtbc3ltXTtcbiAgICB9XG4gICAgZWxzZSBpZiAod29ya1tzeW1dID4gZW5kKSB7XG4gICAgICBoZXJlX29wID0gZXh0cmFbZXh0cmFfaW5kZXggKyB3b3JrW3N5bV1dO1xuICAgICAgaGVyZV92YWwgPSBiYXNlW2Jhc2VfaW5kZXggKyB3b3JrW3N5bV1dO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGhlcmVfb3AgPSAzMiArIDY0OyAgICAgICAgIC8qIGVuZCBvZiBibG9jayAqL1xuICAgICAgaGVyZV92YWwgPSAwO1xuICAgIH1cblxuICAgIC8qIHJlcGxpY2F0ZSBmb3IgdGhvc2UgaW5kaWNlcyB3aXRoIGxvdyBsZW4gYml0cyBlcXVhbCB0byBodWZmICovXG4gICAgaW5jciA9IDEgPDwgKGxlbiAtIGRyb3ApO1xuICAgIGZpbGwgPSAxIDw8IGN1cnI7XG4gICAgbWluID0gZmlsbDsgICAgICAgICAgICAgICAgIC8qIHNhdmUgb2Zmc2V0IHRvIG5leHQgdGFibGUgKi9cbiAgICBkbyB7XG4gICAgICBmaWxsIC09IGluY3I7XG4gICAgICB0YWJsZVtuZXh0ICsgKGh1ZmYgPj4gZHJvcCkgKyBmaWxsXSA9IChoZXJlX2JpdHMgPDwgMjQpIHwgKGhlcmVfb3AgPDwgMTYpIHwgaGVyZV92YWwgfDA7XG4gICAgfSB3aGlsZSAoZmlsbCAhPT0gMCk7XG5cbiAgICAvKiBiYWNrd2FyZHMgaW5jcmVtZW50IHRoZSBsZW4tYml0IGNvZGUgaHVmZiAqL1xuICAgIGluY3IgPSAxIDw8IChsZW4gLSAxKTtcbiAgICB3aGlsZSAoaHVmZiAmIGluY3IpIHtcbiAgICAgIGluY3IgPj49IDE7XG4gICAgfVxuICAgIGlmIChpbmNyICE9PSAwKSB7XG4gICAgICBodWZmICY9IGluY3IgLSAxO1xuICAgICAgaHVmZiArPSBpbmNyO1xuICAgIH0gZWxzZSB7XG4gICAgICBodWZmID0gMDtcbiAgICB9XG5cbiAgICAvKiBnbyB0byBuZXh0IHN5bWJvbCwgdXBkYXRlIGNvdW50LCBsZW4gKi9cbiAgICBzeW0rKztcbiAgICBpZiAoLS1jb3VudFtsZW5dID09PSAwKSB7XG4gICAgICBpZiAobGVuID09PSBtYXgpIHsgYnJlYWs7IH1cbiAgICAgIGxlbiA9IGxlbnNbbGVuc19pbmRleCArIHdvcmtbc3ltXV07XG4gICAgfVxuXG4gICAgLyogY3JlYXRlIG5ldyBzdWItdGFibGUgaWYgbmVlZGVkICovXG4gICAgaWYgKGxlbiA+IHJvb3QgJiYgKGh1ZmYgJiBtYXNrKSAhPT0gbG93KSB7XG4gICAgICAvKiBpZiBmaXJzdCB0aW1lLCB0cmFuc2l0aW9uIHRvIHN1Yi10YWJsZXMgKi9cbiAgICAgIGlmIChkcm9wID09PSAwKSB7XG4gICAgICAgIGRyb3AgPSByb290O1xuICAgICAgfVxuXG4gICAgICAvKiBpbmNyZW1lbnQgcGFzdCBsYXN0IHRhYmxlICovXG4gICAgICBuZXh0ICs9IG1pbjsgICAgICAgICAgICAvKiBoZXJlIG1pbiBpcyAxIDw8IGN1cnIgKi9cblxuICAgICAgLyogZGV0ZXJtaW5lIGxlbmd0aCBvZiBuZXh0IHRhYmxlICovXG4gICAgICBjdXJyID0gbGVuIC0gZHJvcDtcbiAgICAgIGxlZnQgPSAxIDw8IGN1cnI7XG4gICAgICB3aGlsZSAoY3VyciArIGRyb3AgPCBtYXgpIHtcbiAgICAgICAgbGVmdCAtPSBjb3VudFtjdXJyICsgZHJvcF07XG4gICAgICAgIGlmIChsZWZ0IDw9IDApIHsgYnJlYWs7IH1cbiAgICAgICAgY3VycisrO1xuICAgICAgICBsZWZ0IDw8PSAxO1xuICAgICAgfVxuXG4gICAgICAvKiBjaGVjayBmb3IgZW5vdWdoIHNwYWNlICovXG4gICAgICB1c2VkICs9IDEgPDwgY3VycjtcbiAgICAgIGlmICgodHlwZSA9PT0gTEVOUyAmJiB1c2VkID4gRU5PVUdIX0xFTlMpIHx8XG4gICAgICAgICh0eXBlID09PSBESVNUUyAmJiB1c2VkID4gRU5PVUdIX0RJU1RTKSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cblxuICAgICAgLyogcG9pbnQgZW50cnkgaW4gcm9vdCB0YWJsZSB0byBzdWItdGFibGUgKi9cbiAgICAgIGxvdyA9IGh1ZmYgJiBtYXNrO1xuICAgICAgLyp0YWJsZS5vcFtsb3ddID0gY3VycjtcbiAgICAgIHRhYmxlLmJpdHNbbG93XSA9IHJvb3Q7XG4gICAgICB0YWJsZS52YWxbbG93XSA9IG5leHQgLSBvcHRzLnRhYmxlX2luZGV4OyovXG4gICAgICB0YWJsZVtsb3ddID0gKHJvb3QgPDwgMjQpIHwgKGN1cnIgPDwgMTYpIHwgKG5leHQgLSB0YWJsZV9pbmRleCkgfDA7XG4gICAgfVxuICB9XG5cbiAgLyogZmlsbCBpbiByZW1haW5pbmcgdGFibGUgZW50cnkgaWYgY29kZSBpcyBpbmNvbXBsZXRlIChndWFyYW50ZWVkIHRvIGhhdmVcbiAgIGF0IG1vc3Qgb25lIHJlbWFpbmluZyBlbnRyeSwgc2luY2UgaWYgdGhlIGNvZGUgaXMgaW5jb21wbGV0ZSwgdGhlXG4gICBtYXhpbXVtIGNvZGUgbGVuZ3RoIHRoYXQgd2FzIGFsbG93ZWQgdG8gZ2V0IHRoaXMgZmFyIGlzIG9uZSBiaXQpICovXG4gIGlmIChodWZmICE9PSAwKSB7XG4gICAgLy90YWJsZS5vcFtuZXh0ICsgaHVmZl0gPSA2NDsgICAgICAgICAgICAvKiBpbnZhbGlkIGNvZGUgbWFya2VyICovXG4gICAgLy90YWJsZS5iaXRzW25leHQgKyBodWZmXSA9IGxlbiAtIGRyb3A7XG4gICAgLy90YWJsZS52YWxbbmV4dCArIGh1ZmZdID0gMDtcbiAgICB0YWJsZVtuZXh0ICsgaHVmZl0gPSAoKGxlbiAtIGRyb3ApIDw8IDI0KSB8ICg2NCA8PCAxNikgfDA7XG4gIH1cblxuICAvKiBzZXQgcmV0dXJuIHBhcmFtZXRlcnMgKi9cbiAgLy9vcHRzLnRhYmxlX2luZGV4ICs9IHVzZWQ7XG4gIG9wdHMuYml0cyA9IHJvb3Q7XG4gIHJldHVybiAwO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIDI6ICAgICAgJ25lZWQgZGljdGlvbmFyeScsICAgICAvKiBaX05FRURfRElDVCAgICAgICAyICAqL1xuICAxOiAgICAgICdzdHJlYW0gZW5kJywgICAgICAgICAgLyogWl9TVFJFQU1fRU5EICAgICAgMSAgKi9cbiAgMDogICAgICAnJywgICAgICAgICAgICAgICAgICAgIC8qIFpfT0sgICAgICAgICAgICAgIDAgICovXG4gICctMSc6ICAgJ2ZpbGUgZXJyb3InLCAgICAgICAgICAvKiBaX0VSUk5PICAgICAgICAgKC0xKSAqL1xuICAnLTInOiAgICdzdHJlYW0gZXJyb3InLCAgICAgICAgLyogWl9TVFJFQU1fRVJST1IgICgtMikgKi9cbiAgJy0zJzogICAnZGF0YSBlcnJvcicsICAgICAgICAgIC8qIFpfREFUQV9FUlJPUiAgICAoLTMpICovXG4gICctNCc6ICAgJ2luc3VmZmljaWVudCBtZW1vcnknLCAvKiBaX01FTV9FUlJPUiAgICAgKC00KSAqL1xuICAnLTUnOiAgICdidWZmZXIgZXJyb3InLCAgICAgICAgLyogWl9CVUZfRVJST1IgICAgICgtNSkgKi9cbiAgJy02JzogICAnaW5jb21wYXRpYmxlIHZlcnNpb24nIC8qIFpfVkVSU0lPTl9FUlJPUiAoLTYpICovXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbmZ1bmN0aW9uIFpTdHJlYW0oKSB7XG4gIC8qIG5leHQgaW5wdXQgYnl0ZSAqL1xuICB0aGlzLmlucHV0ID0gbnVsbDsgLy8gSlMgc3BlY2lmaWMsIGJlY2F1c2Ugd2UgaGF2ZSBubyBwb2ludGVyc1xuICB0aGlzLm5leHRfaW4gPSAwO1xuICAvKiBudW1iZXIgb2YgYnl0ZXMgYXZhaWxhYmxlIGF0IGlucHV0ICovXG4gIHRoaXMuYXZhaWxfaW4gPSAwO1xuICAvKiB0b3RhbCBudW1iZXIgb2YgaW5wdXQgYnl0ZXMgcmVhZCBzbyBmYXIgKi9cbiAgdGhpcy50b3RhbF9pbiA9IDA7XG4gIC8qIG5leHQgb3V0cHV0IGJ5dGUgc2hvdWxkIGJlIHB1dCB0aGVyZSAqL1xuICB0aGlzLm91dHB1dCA9IG51bGw7IC8vIEpTIHNwZWNpZmljLCBiZWNhdXNlIHdlIGhhdmUgbm8gcG9pbnRlcnNcbiAgdGhpcy5uZXh0X291dCA9IDA7XG4gIC8qIHJlbWFpbmluZyBmcmVlIHNwYWNlIGF0IG91dHB1dCAqL1xuICB0aGlzLmF2YWlsX291dCA9IDA7XG4gIC8qIHRvdGFsIG51bWJlciBvZiBieXRlcyBvdXRwdXQgc28gZmFyICovXG4gIHRoaXMudG90YWxfb3V0ID0gMDtcbiAgLyogbGFzdCBlcnJvciBtZXNzYWdlLCBOVUxMIGlmIG5vIGVycm9yICovXG4gIHRoaXMubXNnID0gJycvKlpfTlVMTCovO1xuICAvKiBub3QgdmlzaWJsZSBieSBhcHBsaWNhdGlvbnMgKi9cbiAgdGhpcy5zdGF0ZSA9IG51bGw7XG4gIC8qIGJlc3QgZ3Vlc3MgYWJvdXQgdGhlIGRhdGEgdHlwZTogYmluYXJ5IG9yIHRleHQgKi9cbiAgdGhpcy5kYXRhX3R5cGUgPSAyLypaX1VOS05PV04qLztcbiAgLyogYWRsZXIzMiB2YWx1ZSBvZiB0aGUgdW5jb21wcmVzc2VkIGRhdGEgKi9cbiAgdGhpcy5hZGxlciA9IDA7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gWlN0cmVhbTtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIvLyB2aW06dHM9NDpzdHM9NDpzdz00OlxuLyohXG4gKlxuICogQ29weXJpZ2h0IDIwMDktMjAxNyBLcmlzIEtvd2FsIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTUlUXG4gKiBsaWNlbnNlIGZvdW5kIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvcS9ibG9iL3YxL0xJQ0VOU0VcbiAqXG4gKiBXaXRoIHBhcnRzIGJ5IFR5bGVyIENsb3NlXG4gKiBDb3B5cmlnaHQgMjAwNy0yMDA5IFR5bGVyIENsb3NlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTUlUIFggbGljZW5zZSBmb3VuZFxuICogYXQgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5odG1sXG4gKiBGb3JrZWQgYXQgcmVmX3NlbmQuanMgdmVyc2lvbjogMjAwOS0wNS0xMVxuICpcbiAqIFdpdGggcGFydHMgYnkgTWFyayBNaWxsZXJcbiAqIENvcHlyaWdodCAoQykgMjAxMSBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICpcbiAqL1xuXG4oZnVuY3Rpb24gKGRlZmluaXRpb24pIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8vIFRoaXMgZmlsZSB3aWxsIGZ1bmN0aW9uIHByb3Blcmx5IGFzIGEgPHNjcmlwdD4gdGFnLCBvciBhIG1vZHVsZVxuICAgIC8vIHVzaW5nIENvbW1vbkpTIGFuZCBOb2RlSlMgb3IgUmVxdWlyZUpTIG1vZHVsZSBmb3JtYXRzLiAgSW5cbiAgICAvLyBDb21tb24vTm9kZS9SZXF1aXJlSlMsIHRoZSBtb2R1bGUgZXhwb3J0cyB0aGUgUSBBUEkgYW5kIHdoZW5cbiAgICAvLyBleGVjdXRlZCBhcyBhIHNpbXBsZSA8c2NyaXB0PiwgaXQgY3JlYXRlcyBhIFEgZ2xvYmFsIGluc3RlYWQuXG5cbiAgICAvLyBNb250YWdlIFJlcXVpcmVcbiAgICBpZiAodHlwZW9mIGJvb3RzdHJhcCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGJvb3RzdHJhcChcInByb21pc2VcIiwgZGVmaW5pdGlvbik7XG5cbiAgICAvLyBDb21tb25KU1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGRlZmluaXRpb24oKTtcblxuICAgIC8vIFJlcXVpcmVKU1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKGRlZmluaXRpb24pO1xuXG4gICAgLy8gU0VTIChTZWN1cmUgRWNtYVNjcmlwdClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZXMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgaWYgKCFzZXMub2soKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VzLm1ha2VRID0gZGVmaW5pdGlvbjtcbiAgICAgICAgfVxuXG4gICAgLy8gPHNjcmlwdD5cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgLy8gUHJlZmVyIHdpbmRvdyBvdmVyIHNlbGYgZm9yIGFkZC1vbiBzY3JpcHRzLiBVc2Ugc2VsZiBmb3JcbiAgICAgICAgLy8gbm9uLXdpbmRvd2VkIGNvbnRleHRzLlxuICAgICAgICB2YXIgZ2xvYmFsID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHNlbGY7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBgd2luZG93YCBvYmplY3QsIHNhdmUgdGhlIHByZXZpb3VzIFEgZ2xvYmFsXG4gICAgICAgIC8vIGFuZCBpbml0aWFsaXplIFEgYXMgYSBnbG9iYWwuXG4gICAgICAgIHZhciBwcmV2aW91c1EgPSBnbG9iYWwuUTtcbiAgICAgICAgZ2xvYmFsLlEgPSBkZWZpbml0aW9uKCk7XG5cbiAgICAgICAgLy8gQWRkIGEgbm9Db25mbGljdCBmdW5jdGlvbiBzbyBRIGNhbiBiZSByZW1vdmVkIGZyb20gdGhlXG4gICAgICAgIC8vIGdsb2JhbCBuYW1lc3BhY2UuXG4gICAgICAgIGdsb2JhbC5RLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBnbG9iYWwuUSA9IHByZXZpb3VzUTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBlbnZpcm9ubWVudCB3YXMgbm90IGFudGljaXBhdGVkIGJ5IFEuIFBsZWFzZSBmaWxlIGEgYnVnLlwiKTtcbiAgICB9XG5cbn0pKGZ1bmN0aW9uICgpIHtcblwidXNlIHN0cmljdFwiO1xuXG52YXIgaGFzU3RhY2tzID0gZmFsc2U7XG50cnkge1xuICAgIHRocm93IG5ldyBFcnJvcigpO1xufSBjYXRjaCAoZSkge1xuICAgIGhhc1N0YWNrcyA9ICEhZS5zdGFjaztcbn1cblxuLy8gQWxsIGNvZGUgYWZ0ZXIgdGhpcyBwb2ludCB3aWxsIGJlIGZpbHRlcmVkIGZyb20gc3RhY2sgdHJhY2VzIHJlcG9ydGVkXG4vLyBieSBRLlxudmFyIHFTdGFydGluZ0xpbmUgPSBjYXB0dXJlTGluZSgpO1xudmFyIHFGaWxlTmFtZTtcblxuLy8gc2hpbXNcblxuLy8gdXNlZCBmb3IgZmFsbGJhY2sgaW4gXCJhbGxSZXNvbHZlZFwiXG52YXIgbm9vcCA9IGZ1bmN0aW9uICgpIHt9O1xuXG4vLyBVc2UgdGhlIGZhc3Rlc3QgcG9zc2libGUgbWVhbnMgdG8gZXhlY3V0ZSBhIHRhc2sgaW4gYSBmdXR1cmUgdHVyblxuLy8gb2YgdGhlIGV2ZW50IGxvb3AuXG52YXIgbmV4dFRpY2sgPShmdW5jdGlvbiAoKSB7XG4gICAgLy8gbGlua2VkIGxpc3Qgb2YgdGFza3MgKHNpbmdsZSwgd2l0aCBoZWFkIG5vZGUpXG4gICAgdmFyIGhlYWQgPSB7dGFzazogdm9pZCAwLCBuZXh0OiBudWxsfTtcbiAgICB2YXIgdGFpbCA9IGhlYWQ7XG4gICAgdmFyIGZsdXNoaW5nID0gZmFsc2U7XG4gICAgdmFyIHJlcXVlc3RUaWNrID0gdm9pZCAwO1xuICAgIHZhciBpc05vZGVKUyA9IGZhbHNlO1xuICAgIC8vIHF1ZXVlIGZvciBsYXRlIHRhc2tzLCB1c2VkIGJ5IHVuaGFuZGxlZCByZWplY3Rpb24gdHJhY2tpbmdcbiAgICB2YXIgbGF0ZXJRdWV1ZSA9IFtdO1xuXG4gICAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgICAgIC8qIGpzaGludCBsb29wZnVuYzogdHJ1ZSAqL1xuICAgICAgICB2YXIgdGFzaywgZG9tYWluO1xuXG4gICAgICAgIHdoaWxlIChoZWFkLm5leHQpIHtcbiAgICAgICAgICAgIGhlYWQgPSBoZWFkLm5leHQ7XG4gICAgICAgICAgICB0YXNrID0gaGVhZC50YXNrO1xuICAgICAgICAgICAgaGVhZC50YXNrID0gdm9pZCAwO1xuICAgICAgICAgICAgZG9tYWluID0gaGVhZC5kb21haW47XG5cbiAgICAgICAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgICAgICAgICBoZWFkLmRvbWFpbiA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBkb21haW4uZW50ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJ1blNpbmdsZSh0YXNrLCBkb21haW4pO1xuXG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGxhdGVyUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICB0YXNrID0gbGF0ZXJRdWV1ZS5wb3AoKTtcbiAgICAgICAgICAgIHJ1blNpbmdsZSh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgICBmbHVzaGluZyA9IGZhbHNlO1xuICAgIH1cbiAgICAvLyBydW5zIGEgc2luZ2xlIGZ1bmN0aW9uIGluIHRoZSBhc3luYyBxdWV1ZVxuICAgIGZ1bmN0aW9uIHJ1blNpbmdsZSh0YXNrLCBkb21haW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRhc2soKTtcblxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoaXNOb2RlSlMpIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBub2RlLCB1bmNhdWdodCBleGNlcHRpb25zIGFyZSBjb25zaWRlcmVkIGZhdGFsIGVycm9ycy5cbiAgICAgICAgICAgICAgICAvLyBSZS10aHJvdyB0aGVtIHN5bmNocm9ub3VzbHkgdG8gaW50ZXJydXB0IGZsdXNoaW5nIVxuXG4gICAgICAgICAgICAgICAgLy8gRW5zdXJlIGNvbnRpbnVhdGlvbiBpZiB0aGUgdW5jYXVnaHQgZXhjZXB0aW9uIGlzIHN1cHByZXNzZWRcbiAgICAgICAgICAgICAgICAvLyBsaXN0ZW5pbmcgXCJ1bmNhdWdodEV4Y2VwdGlvblwiIGV2ZW50cyAoYXMgZG9tYWlucyBkb2VzKS5cbiAgICAgICAgICAgICAgICAvLyBDb250aW51ZSBpbiBuZXh0IGV2ZW50IHRvIGF2b2lkIHRpY2sgcmVjdXJzaW9uLlxuICAgICAgICAgICAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluLmV4aXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmbHVzaCwgMCk7XG4gICAgICAgICAgICAgICAgaWYgKGRvbWFpbikge1xuICAgICAgICAgICAgICAgICAgICBkb21haW4uZW50ZXIoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEluIGJyb3dzZXJzLCB1bmNhdWdodCBleGNlcHRpb25zIGFyZSBub3QgZmF0YWwuXG4gICAgICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlbSBhc3luY2hyb25vdXNseSB0byBhdm9pZCBzbG93LWRvd25zLlxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRvbWFpbikge1xuICAgICAgICAgICAgZG9tYWluLmV4aXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG5leHRUaWNrID0gZnVuY3Rpb24gKHRhc2spIHtcbiAgICAgICAgdGFpbCA9IHRhaWwubmV4dCA9IHtcbiAgICAgICAgICAgIHRhc2s6IHRhc2ssXG4gICAgICAgICAgICBkb21haW46IGlzTm9kZUpTICYmIHByb2Nlc3MuZG9tYWluLFxuICAgICAgICAgICAgbmV4dDogbnVsbFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICghZmx1c2hpbmcpIHtcbiAgICAgICAgICAgIGZsdXNoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlcXVlc3RUaWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIHByb2Nlc3MudG9TdHJpbmcoKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIgJiYgcHJvY2Vzcy5uZXh0VGljaykge1xuICAgICAgICAvLyBFbnN1cmUgUSBpcyBpbiBhIHJlYWwgTm9kZSBlbnZpcm9ubWVudCwgd2l0aCBhIGBwcm9jZXNzLm5leHRUaWNrYC5cbiAgICAgICAgLy8gVG8gc2VlIHRocm91Z2ggZmFrZSBOb2RlIGVudmlyb25tZW50czpcbiAgICAgICAgLy8gKiBNb2NoYSB0ZXN0IHJ1bm5lciAtIGV4cG9zZXMgYSBgcHJvY2Vzc2AgZ2xvYmFsIHdpdGhvdXQgYSBgbmV4dFRpY2tgXG4gICAgICAgIC8vICogQnJvd3NlcmlmeSAtIGV4cG9zZXMgYSBgcHJvY2Vzcy5uZXhUaWNrYCBmdW5jdGlvbiB0aGF0IHVzZXNcbiAgICAgICAgLy8gICBgc2V0VGltZW91dGAuIEluIHRoaXMgY2FzZSBgc2V0SW1tZWRpYXRlYCBpcyBwcmVmZXJyZWQgYmVjYXVzZVxuICAgICAgICAvLyAgICBpdCBpcyBmYXN0ZXIuIEJyb3dzZXJpZnkncyBgcHJvY2Vzcy50b1N0cmluZygpYCB5aWVsZHNcbiAgICAgICAgLy8gICBcIltvYmplY3QgT2JqZWN0XVwiLCB3aGlsZSBpbiBhIHJlYWwgTm9kZSBlbnZpcm9ubWVudFxuICAgICAgICAvLyAgIGBwcm9jZXNzLnRvU3RyaW5nKClgIHlpZWxkcyBcIltvYmplY3QgcHJvY2Vzc11cIi5cbiAgICAgICAgaXNOb2RlSlMgPSB0cnVlO1xuXG4gICAgICAgIHJlcXVlc3RUaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gICAgICAgIH07XG5cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAvLyBJbiBJRTEwLCBOb2RlLmpzIDAuOSssIG9yIGh0dHBzOi8vZ2l0aHViLmNvbS9Ob2JsZUpTL3NldEltbWVkaWF0ZVxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgcmVxdWVzdFRpY2sgPSBzZXRJbW1lZGlhdGUuYmluZCh3aW5kb3csIGZsdXNoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcXVlc3RUaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNldEltbWVkaWF0ZShmbHVzaCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAvLyBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgLy8gaHR0cDovL3d3dy5ub25ibG9ja2luZy5pby8yMDExLzA2L3dpbmRvd25leHR0aWNrLmh0bWxcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgLy8gQXQgbGVhc3QgU2FmYXJpIFZlcnNpb24gNi4wLjUgKDg1MzYuMzAuMSkgaW50ZXJtaXR0ZW50bHkgY2Fubm90IGNyZWF0ZVxuICAgICAgICAvLyB3b3JraW5nIG1lc3NhZ2UgcG9ydHMgdGhlIGZpcnN0IHRpbWUgYSBwYWdlIGxvYWRzLlxuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlcXVlc3RUaWNrID0gcmVxdWVzdFBvcnRUaWNrO1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaDtcbiAgICAgICAgICAgIGZsdXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciByZXF1ZXN0UG9ydFRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBPcGVyYSByZXF1aXJlcyB1cyB0byBwcm92aWRlIGEgbWVzc2FnZSBwYXlsb2FkLCByZWdhcmRsZXNzIG9mXG4gICAgICAgICAgICAvLyB3aGV0aGVyIHdlIHVzZSBpdC5cbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3RUaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmbHVzaCwgMCk7XG4gICAgICAgICAgICByZXF1ZXN0UG9ydFRpY2soKTtcbiAgICAgICAgfTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG9sZCBicm93c2Vyc1xuICAgICAgICByZXF1ZXN0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZmx1c2gsIDApO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBydW5zIGEgdGFzayBhZnRlciBhbGwgb3RoZXIgdGFza3MgaGF2ZSBiZWVuIHJ1blxuICAgIC8vIHRoaXMgaXMgdXNlZnVsIGZvciB1bmhhbmRsZWQgcmVqZWN0aW9uIHRyYWNraW5nIHRoYXQgbmVlZHMgdG8gaGFwcGVuXG4gICAgLy8gYWZ0ZXIgYWxsIGB0aGVuYGQgdGFza3MgaGF2ZSBiZWVuIHJ1bi5cbiAgICBuZXh0VGljay5ydW5BZnRlciA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgIGxhdGVyUXVldWUucHVzaCh0YXNrKTtcbiAgICAgICAgaWYgKCFmbHVzaGluZykge1xuICAgICAgICAgICAgZmx1c2hpbmcgPSB0cnVlO1xuICAgICAgICAgICAgcmVxdWVzdFRpY2soKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIG5leHRUaWNrO1xufSkoKTtcblxuLy8gQXR0ZW1wdCB0byBtYWtlIGdlbmVyaWNzIHNhZmUgaW4gdGhlIGZhY2Ugb2YgZG93bnN0cmVhbVxuLy8gbW9kaWZpY2F0aW9ucy5cbi8vIFRoZXJlIGlzIG5vIHNpdHVhdGlvbiB3aGVyZSB0aGlzIGlzIG5lY2Vzc2FyeS5cbi8vIElmIHlvdSBuZWVkIGEgc2VjdXJpdHkgZ3VhcmFudGVlLCB0aGVzZSBwcmltb3JkaWFscyBuZWVkIHRvIGJlXG4vLyBkZWVwbHkgZnJvemVuIGFueXdheSwgYW5kIGlmIHlvdSBkb27igJl0IG5lZWQgYSBzZWN1cml0eSBndWFyYW50ZWUsXG4vLyB0aGlzIGlzIGp1c3QgcGxhaW4gcGFyYW5vaWQuXG4vLyBIb3dldmVyLCB0aGlzICoqbWlnaHQqKiBoYXZlIHRoZSBuaWNlIHNpZGUtZWZmZWN0IG9mIHJlZHVjaW5nIHRoZSBzaXplIG9mXG4vLyB0aGUgbWluaWZpZWQgY29kZSBieSByZWR1Y2luZyB4LmNhbGwoKSB0byBtZXJlbHkgeCgpXG4vLyBTZWUgTWFyayBNaWxsZXLigJlzIGV4cGxhbmF0aW9uIG9mIHdoYXQgdGhpcyBkb2VzLlxuLy8gaHR0cDovL3dpa2kuZWNtYXNjcmlwdC5vcmcvZG9rdS5waHA/aWQ9Y29udmVudGlvbnM6c2FmZV9tZXRhX3Byb2dyYW1taW5nXG52YXIgY2FsbCA9IEZ1bmN0aW9uLmNhbGw7XG5mdW5jdGlvbiB1bmN1cnJ5VGhpcyhmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGNhbGwuYXBwbHkoZiwgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuLy8gVGhpcyBpcyBlcXVpdmFsZW50LCBidXQgc2xvd2VyOlxuLy8gdW5jdXJyeVRoaXMgPSBGdW5jdGlvbl9iaW5kLmJpbmQoRnVuY3Rpb25fYmluZC5jYWxsKTtcbi8vIGh0dHA6Ly9qc3BlcmYuY29tL3VuY3Vycnl0aGlzXG5cbnZhciBhcnJheV9zbGljZSA9IHVuY3VycnlUaGlzKEFycmF5LnByb3RvdHlwZS5zbGljZSk7XG5cbnZhciBhcnJheV9yZWR1Y2UgPSB1bmN1cnJ5VGhpcyhcbiAgICBBcnJheS5wcm90b3R5cGUucmVkdWNlIHx8IGZ1bmN0aW9uIChjYWxsYmFjaywgYmFzaXMpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gMCxcbiAgICAgICAgICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICAgICAgICAvLyBjb25jZXJuaW5nIHRoZSBpbml0aWFsIHZhbHVlLCBpZiBvbmUgaXMgbm90IHByb3ZpZGVkXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvLyBzZWVrIHRvIHRoZSBmaXJzdCB2YWx1ZSBpbiB0aGUgYXJyYXksIGFjY291bnRpbmdcbiAgICAgICAgICAgIC8vIGZvciB0aGUgcG9zc2liaWxpdHkgdGhhdCBpcyBpcyBhIHNwYXJzZSBhcnJheVxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCBpbiB0aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2lzID0gdGhpc1tpbmRleCsrXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgrK2luZGV4ID49IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAoMSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVkdWNlXG4gICAgICAgIGZvciAoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgLy8gYWNjb3VudCBmb3IgdGhlIHBvc3NpYmlsaXR5IHRoYXQgdGhlIGFycmF5IGlzIHNwYXJzZVxuICAgICAgICAgICAgaWYgKGluZGV4IGluIHRoaXMpIHtcbiAgICAgICAgICAgICAgICBiYXNpcyA9IGNhbGxiYWNrKGJhc2lzLCB0aGlzW2luZGV4XSwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYXNpcztcbiAgICB9XG4pO1xuXG52YXIgYXJyYXlfaW5kZXhPZiA9IHVuY3VycnlUaGlzKFxuICAgIEFycmF5LnByb3RvdHlwZS5pbmRleE9mIHx8IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBub3QgYSB2ZXJ5IGdvb2Qgc2hpbSwgYnV0IGdvb2QgZW5vdWdoIGZvciBvdXIgb25lIHVzZSBvZiBpdFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzW2ldID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4pO1xuXG52YXIgYXJyYXlfbWFwID0gdW5jdXJyeVRoaXMoXG4gICAgQXJyYXkucHJvdG90eXBlLm1hcCB8fCBmdW5jdGlvbiAoY2FsbGJhY2ssIHRoaXNwKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGNvbGxlY3QgPSBbXTtcbiAgICAgICAgYXJyYXlfcmVkdWNlKHNlbGYsIGZ1bmN0aW9uICh1bmRlZmluZWQsIHZhbHVlLCBpbmRleCkge1xuICAgICAgICAgICAgY29sbGVjdC5wdXNoKGNhbGxiYWNrLmNhbGwodGhpc3AsIHZhbHVlLCBpbmRleCwgc2VsZikpO1xuICAgICAgICB9LCB2b2lkIDApO1xuICAgICAgICByZXR1cm4gY29sbGVjdDtcbiAgICB9XG4pO1xuXG52YXIgb2JqZWN0X2NyZWF0ZSA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gKHByb3RvdHlwZSkge1xuICAgIGZ1bmN0aW9uIFR5cGUoKSB7IH1cbiAgICBUeXBlLnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgICByZXR1cm4gbmV3IFR5cGUoKTtcbn07XG5cbnZhciBvYmplY3RfZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgfHwgZnVuY3Rpb24gKG9iaiwgcHJvcCwgZGVzY3JpcHRvcikge1xuICAgIG9ialtwcm9wXSA9IGRlc2NyaXB0b3IudmFsdWU7XG4gICAgcmV0dXJuIG9iajtcbn07XG5cbnZhciBvYmplY3RfaGFzT3duUHJvcGVydHkgPSB1bmN1cnJ5VGhpcyhPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5KTtcblxudmFyIG9iamVjdF9rZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iamVjdCkge1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAgICBpZiAob2JqZWN0X2hhc093blByb3BlcnR5KG9iamVjdCwga2V5KSkge1xuICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleXM7XG59O1xuXG52YXIgb2JqZWN0X3RvU3RyaW5nID0gdW5jdXJyeVRoaXMoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyk7XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBPYmplY3QodmFsdWUpO1xufVxuXG4vLyBnZW5lcmF0b3IgcmVsYXRlZCBzaGltc1xuXG4vLyBGSVhNRTogUmVtb3ZlIHRoaXMgZnVuY3Rpb24gb25jZSBFUzYgZ2VuZXJhdG9ycyBhcmUgaW4gU3BpZGVyTW9ua2V5LlxuZnVuY3Rpb24gaXNTdG9wSXRlcmF0aW9uKGV4Y2VwdGlvbikge1xuICAgIHJldHVybiAoXG4gICAgICAgIG9iamVjdF90b1N0cmluZyhleGNlcHRpb24pID09PSBcIltvYmplY3QgU3RvcEl0ZXJhdGlvbl1cIiB8fFxuICAgICAgICBleGNlcHRpb24gaW5zdGFuY2VvZiBRUmV0dXJuVmFsdWVcbiAgICApO1xufVxuXG4vLyBGSVhNRTogUmVtb3ZlIHRoaXMgaGVscGVyIGFuZCBRLnJldHVybiBvbmNlIEVTNiBnZW5lcmF0b3JzIGFyZSBpblxuLy8gU3BpZGVyTW9ua2V5LlxudmFyIFFSZXR1cm5WYWx1ZTtcbmlmICh0eXBlb2YgUmV0dXJuVmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBRUmV0dXJuVmFsdWUgPSBSZXR1cm5WYWx1ZTtcbn0gZWxzZSB7XG4gICAgUVJldHVyblZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9O1xufVxuXG4vLyBsb25nIHN0YWNrIHRyYWNlc1xuXG52YXIgU1RBQ0tfSlVNUF9TRVBBUkFUT1IgPSBcIkZyb20gcHJldmlvdXMgZXZlbnQ6XCI7XG5cbmZ1bmN0aW9uIG1ha2VTdGFja1RyYWNlTG9uZyhlcnJvciwgcHJvbWlzZSkge1xuICAgIC8vIElmIHBvc3NpYmxlLCB0cmFuc2Zvcm0gdGhlIGVycm9yIHN0YWNrIHRyYWNlIGJ5IHJlbW92aW5nIE5vZGUgYW5kIFFcbiAgICAvLyBjcnVmdCwgdGhlbiBjb25jYXRlbmF0aW5nIHdpdGggdGhlIHN0YWNrIHRyYWNlIG9mIGBwcm9taXNlYC4gU2VlICM1Ny5cbiAgICBpZiAoaGFzU3RhY2tzICYmXG4gICAgICAgIHByb21pc2Uuc3RhY2sgJiZcbiAgICAgICAgdHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIGVycm9yICE9PSBudWxsICYmXG4gICAgICAgIGVycm9yLnN0YWNrXG4gICAgKSB7XG4gICAgICAgIHZhciBzdGFja3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgcCA9IHByb21pc2U7ICEhcDsgcCA9IHAuc291cmNlKSB7XG4gICAgICAgICAgICBpZiAocC5zdGFjayAmJiAoIWVycm9yLl9fbWluaW11bVN0YWNrQ291bnRlcl9fIHx8IGVycm9yLl9fbWluaW11bVN0YWNrQ291bnRlcl9fID4gcC5zdGFja0NvdW50ZXIpKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0X2RlZmluZVByb3BlcnR5KGVycm9yLCBcIl9fbWluaW11bVN0YWNrQ291bnRlcl9fXCIsIHt2YWx1ZTogcC5zdGFja0NvdW50ZXIsIGNvbmZpZ3VyYWJsZTogdHJ1ZX0pO1xuICAgICAgICAgICAgICAgIHN0YWNrcy51bnNoaWZ0KHAuc3RhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YWNrcy51bnNoaWZ0KGVycm9yLnN0YWNrKTtcblxuICAgICAgICB2YXIgY29uY2F0ZWRTdGFja3MgPSBzdGFja3Muam9pbihcIlxcblwiICsgU1RBQ0tfSlVNUF9TRVBBUkFUT1IgKyBcIlxcblwiKTtcbiAgICAgICAgdmFyIHN0YWNrID0gZmlsdGVyU3RhY2tTdHJpbmcoY29uY2F0ZWRTdGFja3MpO1xuICAgICAgICBvYmplY3RfZGVmaW5lUHJvcGVydHkoZXJyb3IsIFwic3RhY2tcIiwge3ZhbHVlOiBzdGFjaywgY29uZmlndXJhYmxlOiB0cnVlfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmaWx0ZXJTdGFja1N0cmluZyhzdGFja1N0cmluZykge1xuICAgIHZhciBsaW5lcyA9IHN0YWNrU3RyaW5nLnNwbGl0KFwiXFxuXCIpO1xuICAgIHZhciBkZXNpcmVkTGluZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBsaW5lID0gbGluZXNbaV07XG5cbiAgICAgICAgaWYgKCFpc0ludGVybmFsRnJhbWUobGluZSkgJiYgIWlzTm9kZUZyYW1lKGxpbmUpICYmIGxpbmUpIHtcbiAgICAgICAgICAgIGRlc2lyZWRMaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkZXNpcmVkTGluZXMuam9pbihcIlxcblwiKTtcbn1cblxuZnVuY3Rpb24gaXNOb2RlRnJhbWUoc3RhY2tMaW5lKSB7XG4gICAgcmV0dXJuIHN0YWNrTGluZS5pbmRleE9mKFwiKG1vZHVsZS5qczpcIikgIT09IC0xIHx8XG4gICAgICAgICAgIHN0YWNrTGluZS5pbmRleE9mKFwiKG5vZGUuanM6XCIpICE9PSAtMTtcbn1cblxuZnVuY3Rpb24gZ2V0RmlsZU5hbWVBbmRMaW5lTnVtYmVyKHN0YWNrTGluZSkge1xuICAgIC8vIE5hbWVkIGZ1bmN0aW9uczogXCJhdCBmdW5jdGlvbk5hbWUgKGZpbGVuYW1lOmxpbmVOdW1iZXI6Y29sdW1uTnVtYmVyKVwiXG4gICAgLy8gSW4gSUUxMCBmdW5jdGlvbiBuYW1lIGNhbiBoYXZlIHNwYWNlcyAoXCJBbm9ueW1vdXMgZnVuY3Rpb25cIikgT19vXG4gICAgdmFyIGF0dGVtcHQxID0gL2F0IC4rIFxcKCguKyk6KFxcZCspOig/OlxcZCspXFwpJC8uZXhlYyhzdGFja0xpbmUpO1xuICAgIGlmIChhdHRlbXB0MSkge1xuICAgICAgICByZXR1cm4gW2F0dGVtcHQxWzFdLCBOdW1iZXIoYXR0ZW1wdDFbMl0pXTtcbiAgICB9XG5cbiAgICAvLyBBbm9ueW1vdXMgZnVuY3Rpb25zOiBcImF0IGZpbGVuYW1lOmxpbmVOdW1iZXI6Y29sdW1uTnVtYmVyXCJcbiAgICB2YXIgYXR0ZW1wdDIgPSAvYXQgKFteIF0rKTooXFxkKyk6KD86XFxkKykkLy5leGVjKHN0YWNrTGluZSk7XG4gICAgaWYgKGF0dGVtcHQyKSB7XG4gICAgICAgIHJldHVybiBbYXR0ZW1wdDJbMV0sIE51bWJlcihhdHRlbXB0MlsyXSldO1xuICAgIH1cblxuICAgIC8vIEZpcmVmb3ggc3R5bGU6IFwiZnVuY3Rpb25AZmlsZW5hbWU6bGluZU51bWJlciBvciBAZmlsZW5hbWU6bGluZU51bWJlclwiXG4gICAgdmFyIGF0dGVtcHQzID0gLy4qQCguKyk6KFxcZCspJC8uZXhlYyhzdGFja0xpbmUpO1xuICAgIGlmIChhdHRlbXB0Mykge1xuICAgICAgICByZXR1cm4gW2F0dGVtcHQzWzFdLCBOdW1iZXIoYXR0ZW1wdDNbMl0pXTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzSW50ZXJuYWxGcmFtZShzdGFja0xpbmUpIHtcbiAgICB2YXIgZmlsZU5hbWVBbmRMaW5lTnVtYmVyID0gZ2V0RmlsZU5hbWVBbmRMaW5lTnVtYmVyKHN0YWNrTGluZSk7XG5cbiAgICBpZiAoIWZpbGVOYW1lQW5kTGluZU51bWJlcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGZpbGVOYW1lID0gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzBdO1xuICAgIHZhciBsaW5lTnVtYmVyID0gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzFdO1xuXG4gICAgcmV0dXJuIGZpbGVOYW1lID09PSBxRmlsZU5hbWUgJiZcbiAgICAgICAgbGluZU51bWJlciA+PSBxU3RhcnRpbmdMaW5lICYmXG4gICAgICAgIGxpbmVOdW1iZXIgPD0gcUVuZGluZ0xpbmU7XG59XG5cbi8vIGRpc2NvdmVyIG93biBmaWxlIG5hbWUgYW5kIGxpbmUgbnVtYmVyIHJhbmdlIGZvciBmaWx0ZXJpbmcgc3RhY2tcbi8vIHRyYWNlc1xuZnVuY3Rpb24gY2FwdHVyZUxpbmUoKSB7XG4gICAgaWYgKCFoYXNTdGFja3MpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdmFyIGxpbmVzID0gZS5zdGFjay5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgdmFyIGZpcnN0TGluZSA9IGxpbmVzWzBdLmluZGV4T2YoXCJAXCIpID4gMCA/IGxpbmVzWzFdIDogbGluZXNbMl07XG4gICAgICAgIHZhciBmaWxlTmFtZUFuZExpbmVOdW1iZXIgPSBnZXRGaWxlTmFtZUFuZExpbmVOdW1iZXIoZmlyc3RMaW5lKTtcbiAgICAgICAgaWYgKCFmaWxlTmFtZUFuZExpbmVOdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHFGaWxlTmFtZSA9IGZpbGVOYW1lQW5kTGluZU51bWJlclswXTtcbiAgICAgICAgcmV0dXJuIGZpbGVOYW1lQW5kTGluZU51bWJlclsxXTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRlcHJlY2F0ZShjYWxsYmFjaywgbmFtZSwgYWx0ZXJuYXRpdmUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgICAgIHR5cGVvZiBjb25zb2xlLndhcm4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKG5hbWUgKyBcIiBpcyBkZXByZWNhdGVkLCB1c2UgXCIgKyBhbHRlcm5hdGl2ZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgXCIgaW5zdGVhZC5cIiwgbmV3IEVycm9yKFwiXCIpLnN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkoY2FsbGJhY2ssIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuLy8gZW5kIG9mIHNoaW1zXG4vLyBiZWdpbm5pbmcgb2YgcmVhbCB3b3JrXG5cbi8qKlxuICogQ29uc3RydWN0cyBhIHByb21pc2UgZm9yIGFuIGltbWVkaWF0ZSByZWZlcmVuY2UsIHBhc3NlcyBwcm9taXNlcyB0aHJvdWdoLCBvclxuICogY29lcmNlcyBwcm9taXNlcyBmcm9tIGRpZmZlcmVudCBzeXN0ZW1zLlxuICogQHBhcmFtIHZhbHVlIGltbWVkaWF0ZSByZWZlcmVuY2Ugb3IgcHJvbWlzZVxuICovXG5mdW5jdGlvbiBRKHZhbHVlKSB7XG4gICAgLy8gSWYgdGhlIG9iamVjdCBpcyBhbHJlYWR5IGEgUHJvbWlzZSwgcmV0dXJuIGl0IGRpcmVjdGx5LiAgVGhpcyBlbmFibGVzXG4gICAgLy8gdGhlIHJlc29sdmUgZnVuY3Rpb24gdG8gYm90aCBiZSB1c2VkIHRvIGNyZWF0ZWQgcmVmZXJlbmNlcyBmcm9tIG9iamVjdHMsXG4gICAgLy8gYnV0IHRvIHRvbGVyYWJseSBjb2VyY2Ugbm9uLXByb21pc2VzIHRvIHByb21pc2VzLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8vIGFzc2ltaWxhdGUgdGhlbmFibGVzXG4gICAgaWYgKGlzUHJvbWlzZUFsaWtlKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gY29lcmNlKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZnVsZmlsbCh2YWx1ZSk7XG4gICAgfVxufVxuUS5yZXNvbHZlID0gUTtcblxuLyoqXG4gKiBQZXJmb3JtcyBhIHRhc2sgaW4gYSBmdXR1cmUgdHVybiBvZiB0aGUgZXZlbnQgbG9vcC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHRhc2tcbiAqL1xuUS5uZXh0VGljayA9IG5leHRUaWNrO1xuXG4vKipcbiAqIENvbnRyb2xzIHdoZXRoZXIgb3Igbm90IGxvbmcgc3RhY2sgdHJhY2VzIHdpbGwgYmUgb25cbiAqL1xuUS5sb25nU3RhY2tTdXBwb3J0ID0gZmFsc2U7XG5cbi8qKlxuICogVGhlIGNvdW50ZXIgaXMgdXNlZCB0byBkZXRlcm1pbmUgdGhlIHN0b3BwaW5nIHBvaW50IGZvciBidWlsZGluZ1xuICogbG9uZyBzdGFjayB0cmFjZXMuIEluIG1ha2VTdGFja1RyYWNlTG9uZyB3ZSB3YWxrIGJhY2t3YXJkcyB0aHJvdWdoXG4gKiB0aGUgbGlua2VkIGxpc3Qgb2YgcHJvbWlzZXMsIG9ubHkgc3RhY2tzIHdoaWNoIHdlcmUgY3JlYXRlZCBiZWZvcmVcbiAqIHRoZSByZWplY3Rpb24gYXJlIGNvbmNhdGVuYXRlZC5cbiAqL1xudmFyIGxvbmdTdGFja0NvdW50ZXIgPSAxO1xuXG4vLyBlbmFibGUgbG9uZyBzdGFja3MgaWYgUV9ERUJVRyBpcyBzZXRcbmlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJiBwcm9jZXNzICYmIHByb2Nlc3MuZW52ICYmIHByb2Nlc3MuZW52LlFfREVCVUcpIHtcbiAgICBRLmxvbmdTdGFja1N1cHBvcnQgPSB0cnVlO1xufVxuXG4vKipcbiAqIENvbnN0cnVjdHMgYSB7cHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0fSBvYmplY3QuXG4gKlxuICogYHJlc29sdmVgIGlzIGEgY2FsbGJhY2sgdG8gaW52b2tlIHdpdGggYSBtb3JlIHJlc29sdmVkIHZhbHVlIGZvciB0aGVcbiAqIHByb21pc2UuIFRvIGZ1bGZpbGwgdGhlIHByb21pc2UsIGludm9rZSBgcmVzb2x2ZWAgd2l0aCBhbnkgdmFsdWUgdGhhdCBpc1xuICogbm90IGEgdGhlbmFibGUuIFRvIHJlamVjdCB0aGUgcHJvbWlzZSwgaW52b2tlIGByZXNvbHZlYCB3aXRoIGEgcmVqZWN0ZWRcbiAqIHRoZW5hYmxlLCBvciBpbnZva2UgYHJlamVjdGAgd2l0aCB0aGUgcmVhc29uIGRpcmVjdGx5LiBUbyByZXNvbHZlIHRoZVxuICogcHJvbWlzZSB0byBhbm90aGVyIHRoZW5hYmxlLCB0aHVzIHB1dHRpbmcgaXQgaW4gdGhlIHNhbWUgc3RhdGUsIGludm9rZVxuICogYHJlc29sdmVgIHdpdGggdGhhdCBvdGhlciB0aGVuYWJsZS5cbiAqL1xuUS5kZWZlciA9IGRlZmVyO1xuZnVuY3Rpb24gZGVmZXIoKSB7XG4gICAgLy8gaWYgXCJtZXNzYWdlc1wiIGlzIGFuIFwiQXJyYXlcIiwgdGhhdCBpbmRpY2F0ZXMgdGhhdCB0aGUgcHJvbWlzZSBoYXMgbm90IHlldFxuICAgIC8vIGJlZW4gcmVzb2x2ZWQuICBJZiBpdCBpcyBcInVuZGVmaW5lZFwiLCBpdCBoYXMgYmVlbiByZXNvbHZlZC4gIEVhY2hcbiAgICAvLyBlbGVtZW50IG9mIHRoZSBtZXNzYWdlcyBhcnJheSBpcyBpdHNlbGYgYW4gYXJyYXkgb2YgY29tcGxldGUgYXJndW1lbnRzIHRvXG4gICAgLy8gZm9yd2FyZCB0byB0aGUgcmVzb2x2ZWQgcHJvbWlzZS4gIFdlIGNvZXJjZSB0aGUgcmVzb2x1dGlvbiB2YWx1ZSB0byBhXG4gICAgLy8gcHJvbWlzZSB1c2luZyB0aGUgYHJlc29sdmVgIGZ1bmN0aW9uIGJlY2F1c2UgaXQgaGFuZGxlcyBib3RoIGZ1bGx5XG4gICAgLy8gbm9uLXRoZW5hYmxlIHZhbHVlcyBhbmQgb3RoZXIgdGhlbmFibGVzIGdyYWNlZnVsbHkuXG4gICAgdmFyIG1lc3NhZ2VzID0gW10sIHByb2dyZXNzTGlzdGVuZXJzID0gW10sIHJlc29sdmVkUHJvbWlzZTtcblxuICAgIHZhciBkZWZlcnJlZCA9IG9iamVjdF9jcmVhdGUoZGVmZXIucHJvdG90eXBlKTtcbiAgICB2YXIgcHJvbWlzZSA9IG9iamVjdF9jcmVhdGUoUHJvbWlzZS5wcm90b3R5cGUpO1xuXG4gICAgcHJvbWlzZS5wcm9taXNlRGlzcGF0Y2ggPSBmdW5jdGlvbiAocmVzb2x2ZSwgb3AsIG9wZXJhbmRzKSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKG1lc3NhZ2VzKSB7XG4gICAgICAgICAgICBtZXNzYWdlcy5wdXNoKGFyZ3MpO1xuICAgICAgICAgICAgaWYgKG9wID09PSBcIndoZW5cIiAmJiBvcGVyYW5kc1sxXSkgeyAvLyBwcm9ncmVzcyBvcGVyYW5kXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NMaXN0ZW5lcnMucHVzaChvcGVyYW5kc1sxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlZFByb21pc2UucHJvbWlzZURpc3BhdGNoLmFwcGx5KHJlc29sdmVkUHJvbWlzZSwgYXJncyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBYWFggZGVwcmVjYXRlZFxuICAgIHByb21pc2UudmFsdWVPZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2VzKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmVhcmVyVmFsdWUgPSBuZWFyZXIocmVzb2x2ZWRQcm9taXNlKTtcbiAgICAgICAgaWYgKGlzUHJvbWlzZShuZWFyZXJWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJlc29sdmVkUHJvbWlzZSA9IG5lYXJlclZhbHVlOyAvLyBzaG9ydGVuIGNoYWluXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5lYXJlclZhbHVlO1xuICAgIH07XG5cbiAgICBwcm9taXNlLmluc3BlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghcmVzb2x2ZWRQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0ZTogXCJwZW5kaW5nXCIgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzb2x2ZWRQcm9taXNlLmluc3BlY3QoKTtcbiAgICB9O1xuXG4gICAgaWYgKFEubG9uZ1N0YWNrU3VwcG9ydCAmJiBoYXNTdGFja3MpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBOT1RFOiBkb24ndCB0cnkgdG8gdXNlIGBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZWAgb3IgdHJhbnNmZXIgdGhlXG4gICAgICAgICAgICAvLyBhY2Nlc3NvciBhcm91bmQ7IHRoYXQgY2F1c2VzIG1lbW9yeSBsZWFrcyBhcyBwZXIgR0gtMTExLiBKdXN0XG4gICAgICAgICAgICAvLyByZWlmeSB0aGUgc3RhY2sgdHJhY2UgYXMgYSBzdHJpbmcgQVNBUC5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBBdCB0aGUgc2FtZSB0aW1lLCBjdXQgb2ZmIHRoZSBmaXJzdCBsaW5lOyBpdCdzIGFsd2F5cyBqdXN0XG4gICAgICAgICAgICAvLyBcIltvYmplY3QgUHJvbWlzZV1cXG5cIiwgYXMgcGVyIHRoZSBgdG9TdHJpbmdgLlxuICAgICAgICAgICAgcHJvbWlzZS5zdGFjayA9IGUuc3RhY2suc3Vic3RyaW5nKGUuc3RhY2suaW5kZXhPZihcIlxcblwiKSArIDEpO1xuICAgICAgICAgICAgcHJvbWlzZS5zdGFja0NvdW50ZXIgPSBsb25nU3RhY2tDb3VudGVyKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOT1RFOiB3ZSBkbyB0aGUgY2hlY2tzIGZvciBgcmVzb2x2ZWRQcm9taXNlYCBpbiBlYWNoIG1ldGhvZCwgaW5zdGVhZCBvZlxuICAgIC8vIGNvbnNvbGlkYXRpbmcgdGhlbSBpbnRvIGBiZWNvbWVgLCBzaW5jZSBvdGhlcndpc2Ugd2UnZCBjcmVhdGUgbmV3XG4gICAgLy8gcHJvbWlzZXMgd2l0aCB0aGUgbGluZXMgYGJlY29tZSh3aGF0ZXZlcih2YWx1ZSkpYC4gU2VlIGUuZy4gR0gtMjUyLlxuXG4gICAgZnVuY3Rpb24gYmVjb21lKG5ld1Byb21pc2UpIHtcbiAgICAgICAgcmVzb2x2ZWRQcm9taXNlID0gbmV3UHJvbWlzZTtcblxuICAgICAgICBpZiAoUS5sb25nU3RhY2tTdXBwb3J0ICYmIGhhc1N0YWNrcykge1xuICAgICAgICAgICAgLy8gT25seSBob2xkIGEgcmVmZXJlbmNlIHRvIHRoZSBuZXcgcHJvbWlzZSBpZiBsb25nIHN0YWNrc1xuICAgICAgICAgICAgLy8gYXJlIGVuYWJsZWQgdG8gcmVkdWNlIG1lbW9yeSB1c2FnZVxuICAgICAgICAgICAgcHJvbWlzZS5zb3VyY2UgPSBuZXdQcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgYXJyYXlfcmVkdWNlKG1lc3NhZ2VzLCBmdW5jdGlvbiAodW5kZWZpbmVkLCBtZXNzYWdlKSB7XG4gICAgICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBuZXdQcm9taXNlLnByb21pc2VEaXNwYXRjaC5hcHBseShuZXdQcm9taXNlLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCB2b2lkIDApO1xuXG4gICAgICAgIG1lc3NhZ2VzID0gdm9pZCAwO1xuICAgICAgICBwcm9ncmVzc0xpc3RlbmVycyA9IHZvaWQgMDtcbiAgICB9XG5cbiAgICBkZWZlcnJlZC5wcm9taXNlID0gcHJvbWlzZTtcbiAgICBkZWZlcnJlZC5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmIChyZXNvbHZlZFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJlY29tZShRKHZhbHVlKSk7XG4gICAgfTtcblxuICAgIGRlZmVycmVkLmZ1bGZpbGwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHJlc29sdmVkUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYmVjb21lKGZ1bGZpbGwodmFsdWUpKTtcbiAgICB9O1xuICAgIGRlZmVycmVkLnJlamVjdCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgaWYgKHJlc29sdmVkUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYmVjb21lKHJlamVjdChyZWFzb24pKTtcbiAgICB9O1xuICAgIGRlZmVycmVkLm5vdGlmeSA9IGZ1bmN0aW9uIChwcm9ncmVzcykge1xuICAgICAgICBpZiAocmVzb2x2ZWRQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhcnJheV9yZWR1Y2UocHJvZ3Jlc3NMaXN0ZW5lcnMsIGZ1bmN0aW9uICh1bmRlZmluZWQsIHByb2dyZXNzTGlzdGVuZXIpIHtcbiAgICAgICAgICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHByb2dyZXNzTGlzdGVuZXIocHJvZ3Jlc3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIHZvaWQgMCk7XG4gICAgfTtcblxuICAgIHJldHVybiBkZWZlcnJlZDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgTm9kZS1zdHlsZSBjYWxsYmFjayB0aGF0IHdpbGwgcmVzb2x2ZSBvciByZWplY3QgdGhlIGRlZmVycmVkXG4gKiBwcm9taXNlLlxuICogQHJldHVybnMgYSBub2RlYmFja1xuICovXG5kZWZlci5wcm90b3R5cGUubWFrZU5vZGVSZXNvbHZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlcnJvciwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBzZWxmLnJlamVjdChlcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICAgIHNlbGYucmVzb2x2ZShhcnJheV9zbGljZShhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYucmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gcmVzb2x2ZXIge0Z1bmN0aW9ufSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBub3RoaW5nIGFuZCBhY2NlcHRzXG4gKiB0aGUgcmVzb2x2ZSwgcmVqZWN0LCBhbmQgbm90aWZ5IGZ1bmN0aW9ucyBmb3IgYSBkZWZlcnJlZC5cbiAqIEByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IG1heSBiZSByZXNvbHZlZCB3aXRoIHRoZSBnaXZlbiByZXNvbHZlIGFuZCByZWplY3RcbiAqIGZ1bmN0aW9ucywgb3IgcmVqZWN0ZWQgYnkgYSB0aHJvd24gZXhjZXB0aW9uIGluIHJlc29sdmVyXG4gKi9cblEuUHJvbWlzZSA9IHByb21pc2U7IC8vIEVTNlxuUS5wcm9taXNlID0gcHJvbWlzZTtcbmZ1bmN0aW9uIHByb21pc2UocmVzb2x2ZXIpIHtcbiAgICBpZiAodHlwZW9mIHJlc29sdmVyICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcInJlc29sdmVyIG11c3QgYmUgYSBmdW5jdGlvbi5cIik7XG4gICAgfVxuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgdHJ5IHtcbiAgICAgICAgcmVzb2x2ZXIoZGVmZXJyZWQucmVzb2x2ZSwgZGVmZXJyZWQucmVqZWN0LCBkZWZlcnJlZC5ub3RpZnkpO1xuICAgIH0gY2F0Y2ggKHJlYXNvbikge1xuICAgICAgICBkZWZlcnJlZC5yZWplY3QocmVhc29uKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbnByb21pc2UucmFjZSA9IHJhY2U7IC8vIEVTNlxucHJvbWlzZS5hbGwgPSBhbGw7IC8vIEVTNlxucHJvbWlzZS5yZWplY3QgPSByZWplY3Q7IC8vIEVTNlxucHJvbWlzZS5yZXNvbHZlID0gUTsgLy8gRVM2XG5cbi8vIFhYWCBleHBlcmltZW50YWwuICBUaGlzIG1ldGhvZCBpcyBhIHdheSB0byBkZW5vdGUgdGhhdCBhIGxvY2FsIHZhbHVlIGlzXG4vLyBzZXJpYWxpemFibGUgYW5kIHNob3VsZCBiZSBpbW1lZGlhdGVseSBkaXNwYXRjaGVkIHRvIGEgcmVtb3RlIHVwb24gcmVxdWVzdCxcbi8vIGluc3RlYWQgb2YgcGFzc2luZyBhIHJlZmVyZW5jZS5cblEucGFzc0J5Q29weSA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAvL2ZyZWV6ZShvYmplY3QpO1xuICAgIC8vcGFzc0J5Q29waWVzLnNldChvYmplY3QsIHRydWUpO1xuICAgIHJldHVybiBvYmplY3Q7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5wYXNzQnlDb3B5ID0gZnVuY3Rpb24gKCkge1xuICAgIC8vZnJlZXplKG9iamVjdCk7XG4gICAgLy9wYXNzQnlDb3BpZXMuc2V0KG9iamVjdCwgdHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIElmIHR3byBwcm9taXNlcyBldmVudHVhbGx5IGZ1bGZpbGwgdG8gdGhlIHNhbWUgdmFsdWUsIHByb21pc2VzIHRoYXQgdmFsdWUsXG4gKiBidXQgb3RoZXJ3aXNlIHJlamVjdHMuXG4gKiBAcGFyYW0geCB7QW55Kn1cbiAqIEBwYXJhbSB5IHtBbnkqfVxuICogQHJldHVybnMge0FueSp9IGEgcHJvbWlzZSBmb3IgeCBhbmQgeSBpZiB0aGV5IGFyZSB0aGUgc2FtZSwgYnV0IGEgcmVqZWN0aW9uXG4gKiBvdGhlcndpc2UuXG4gKlxuICovXG5RLmpvaW4gPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgIHJldHVybiBRKHgpLmpvaW4oeSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5qb2luID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gUShbdGhpcywgdGhhdF0pLnNwcmVhZChmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICBpZiAoeCA9PT0geSkge1xuICAgICAgICAgICAgLy8gVE9ETzogXCI9PT1cIiBzaG91bGQgYmUgT2JqZWN0LmlzIG9yIGVxdWl2XG4gICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlEgY2FuJ3Qgam9pbjogbm90IHRoZSBzYW1lOiBcIiArIHggKyBcIiBcIiArIHkpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgZmlyc3Qgb2YgYW4gYXJyYXkgb2YgcHJvbWlzZXMgdG8gYmVjb21lIHNldHRsZWQuXG4gKiBAcGFyYW0gYW5zd2VycyB7QXJyYXlbQW55Kl19IHByb21pc2VzIHRvIHJhY2VcbiAqIEByZXR1cm5zIHtBbnkqfSB0aGUgZmlyc3QgcHJvbWlzZSB0byBiZSBzZXR0bGVkXG4gKi9cblEucmFjZSA9IHJhY2U7XG5mdW5jdGlvbiByYWNlKGFuc3dlclBzKSB7XG4gICAgcmV0dXJuIHByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBTd2l0Y2ggdG8gdGhpcyBvbmNlIHdlIGNhbiBhc3N1bWUgYXQgbGVhc3QgRVM1XG4gICAgICAgIC8vIGFuc3dlclBzLmZvckVhY2goZnVuY3Rpb24gKGFuc3dlclApIHtcbiAgICAgICAgLy8gICAgIFEoYW5zd2VyUCkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAvLyB9KTtcbiAgICAgICAgLy8gVXNlIHRoaXMgaW4gdGhlIG1lYW50aW1lXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhbnN3ZXJQcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgUShhbnN3ZXJQc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cblByb21pc2UucHJvdG90eXBlLnJhY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihRLnJhY2UpO1xufTtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgUHJvbWlzZSB3aXRoIGEgcHJvbWlzZSBkZXNjcmlwdG9yIG9iamVjdCBhbmQgb3B0aW9uYWwgZmFsbGJhY2tcbiAqIGZ1bmN0aW9uLiAgVGhlIGRlc2NyaXB0b3IgY29udGFpbnMgbWV0aG9kcyBsaWtlIHdoZW4ocmVqZWN0ZWQpLCBnZXQobmFtZSksXG4gKiBzZXQobmFtZSwgdmFsdWUpLCBwb3N0KG5hbWUsIGFyZ3MpLCBhbmQgZGVsZXRlKG5hbWUpLCB3aGljaCBhbGxcbiAqIHJldHVybiBlaXRoZXIgYSB2YWx1ZSwgYSBwcm9taXNlIGZvciBhIHZhbHVlLCBvciBhIHJlamVjdGlvbi4gIFRoZSBmYWxsYmFja1xuICogYWNjZXB0cyB0aGUgb3BlcmF0aW9uIG5hbWUsIGEgcmVzb2x2ZXIsIGFuZCBhbnkgZnVydGhlciBhcmd1bWVudHMgdGhhdCB3b3VsZFxuICogaGF2ZSBiZWVuIGZvcndhcmRlZCB0byB0aGUgYXBwcm9wcmlhdGUgbWV0aG9kIGFib3ZlIGhhZCBhIG1ldGhvZCBiZWVuXG4gKiBwcm92aWRlZCB3aXRoIHRoZSBwcm9wZXIgbmFtZS4gIFRoZSBBUEkgbWFrZXMgbm8gZ3VhcmFudGVlcyBhYm91dCB0aGUgbmF0dXJlXG4gKiBvZiB0aGUgcmV0dXJuZWQgb2JqZWN0LCBhcGFydCBmcm9tIHRoYXQgaXQgaXMgdXNhYmxlIHdoZXJlZXZlciBwcm9taXNlcyBhcmVcbiAqIGJvdWdodCBhbmQgc29sZC5cbiAqL1xuUS5tYWtlUHJvbWlzZSA9IFByb21pc2U7XG5mdW5jdGlvbiBQcm9taXNlKGRlc2NyaXB0b3IsIGZhbGxiYWNrLCBpbnNwZWN0KSB7XG4gICAgaWYgKGZhbGxiYWNrID09PSB2b2lkIDApIHtcbiAgICAgICAgZmFsbGJhY2sgPSBmdW5jdGlvbiAob3ApIHtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIFwiUHJvbWlzZSBkb2VzIG5vdCBzdXBwb3J0IG9wZXJhdGlvbjogXCIgKyBvcFxuICAgICAgICAgICAgKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpbnNwZWN0ID09PSB2b2lkIDApIHtcbiAgICAgICAgaW5zcGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7c3RhdGU6IFwidW5rbm93blwifTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IG9iamVjdF9jcmVhdGUoUHJvbWlzZS5wcm90b3R5cGUpO1xuXG4gICAgcHJvbWlzZS5wcm9taXNlRGlzcGF0Y2ggPSBmdW5jdGlvbiAocmVzb2x2ZSwgb3AsIGFyZ3MpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChkZXNjcmlwdG9yW29wXSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRlc2NyaXB0b3Jbb3BdLmFwcGx5KHByb21pc2UsIGFyZ3MpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxsYmFjay5jYWxsKHByb21pc2UsIG9wLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZWplY3QoZXhjZXB0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByb21pc2UuaW5zcGVjdCA9IGluc3BlY3Q7XG5cbiAgICAvLyBYWFggZGVwcmVjYXRlZCBgdmFsdWVPZmAgYW5kIGBleGNlcHRpb25gIHN1cHBvcnRcbiAgICBpZiAoaW5zcGVjdCkge1xuICAgICAgICB2YXIgaW5zcGVjdGVkID0gaW5zcGVjdCgpO1xuICAgICAgICBpZiAoaW5zcGVjdGVkLnN0YXRlID09PSBcInJlamVjdGVkXCIpIHtcbiAgICAgICAgICAgIHByb21pc2UuZXhjZXB0aW9uID0gaW5zcGVjdGVkLnJlYXNvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb21pc2UudmFsdWVPZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbnNwZWN0ZWQgPSBpbnNwZWN0KCk7XG4gICAgICAgICAgICBpZiAoaW5zcGVjdGVkLnN0YXRlID09PSBcInBlbmRpbmdcIiB8fFxuICAgICAgICAgICAgICAgIGluc3BlY3RlZC5zdGF0ZSA9PT0gXCJyZWplY3RlZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5zcGVjdGVkLnZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gXCJbb2JqZWN0IFByb21pc2VdXCI7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIHByb2dyZXNzZWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICB2YXIgZG9uZSA9IGZhbHNlOyAgIC8vIGVuc3VyZSB0aGUgdW50cnVzdGVkIHByb21pc2UgbWFrZXMgYXQgbW9zdCBhXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaW5nbGUgY2FsbCB0byBvbmUgb2YgdGhlIGNhbGxiYWNrc1xuXG4gICAgZnVuY3Rpb24gX2Z1bGZpbGxlZCh2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBmdWxmaWxsZWQgPT09IFwiZnVuY3Rpb25cIiA/IGZ1bGZpbGxlZCh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfcmVqZWN0ZWQoZXhjZXB0aW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVqZWN0ZWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgbWFrZVN0YWNrVHJhY2VMb25nKGV4Y2VwdGlvbiwgc2VsZik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3RlZChleGNlcHRpb24pO1xuICAgICAgICAgICAgfSBjYXRjaCAobmV3RXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXdFeGNlcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWplY3QoZXhjZXB0aW9uKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfcHJvZ3Jlc3NlZCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHByb2dyZXNzZWQgPT09IFwiZnVuY3Rpb25cIiA/IHByb2dyZXNzZWQodmFsdWUpIDogdmFsdWU7XG4gICAgfVxuXG4gICAgUS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYucHJvbWlzZURpc3BhdGNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb25lID0gdHJ1ZTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShfZnVsZmlsbGVkKHZhbHVlKSk7XG4gICAgICAgIH0sIFwid2hlblwiLCBbZnVuY3Rpb24gKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb25lID0gdHJ1ZTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShfcmVqZWN0ZWQoZXhjZXB0aW9uKSk7XG4gICAgICAgIH1dKTtcbiAgICB9KTtcblxuICAgIC8vIFByb2dyZXNzIHByb3BhZ2F0b3IgbmVlZCB0byBiZSBhdHRhY2hlZCBpbiB0aGUgY3VycmVudCB0aWNrLlxuICAgIHNlbGYucHJvbWlzZURpc3BhdGNoKHZvaWQgMCwgXCJ3aGVuXCIsIFt2b2lkIDAsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgbmV3VmFsdWU7XG4gICAgICAgIHZhciB0aHJldyA9IGZhbHNlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbmV3VmFsdWUgPSBfcHJvZ3Jlc3NlZCh2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocmV3ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChRLm9uZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBRLm9uZXJyb3IoZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRocmV3KSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5ub3RpZnkobmV3VmFsdWUpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG5RLnRhcCA9IGZ1bmN0aW9uIChwcm9taXNlLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBRKHByb21pc2UpLnRhcChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFdvcmtzIGFsbW9zdCBsaWtlIFwiZmluYWxseVwiLCBidXQgbm90IGNhbGxlZCBmb3IgcmVqZWN0aW9ucy5cbiAqIE9yaWdpbmFsIHJlc29sdXRpb24gdmFsdWUgaXMgcGFzc2VkIHRocm91Z2ggY2FsbGJhY2sgdW5hZmZlY3RlZC5cbiAqIENhbGxiYWNrIG1heSByZXR1cm4gYSBwcm9taXNlIHRoYXQgd2lsbCBiZSBhd2FpdGVkIGZvci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7US5Qcm9taXNlfVxuICogQGV4YW1wbGVcbiAqIGRvU29tZXRoaW5nKClcbiAqICAgLnRoZW4oLi4uKVxuICogICAudGFwKGNvbnNvbGUubG9nKVxuICogICAudGhlbiguLi4pO1xuICovXG5Qcm9taXNlLnByb3RvdHlwZS50YXAgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICBjYWxsYmFjayA9IFEoY2FsbGJhY2spO1xuXG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmZjYWxsKHZhbHVlKS50aGVuUmVzb2x2ZSh2YWx1ZSk7XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIFJlZ2lzdGVycyBhbiBvYnNlcnZlciBvbiBhIHByb21pc2UuXG4gKlxuICogR3VhcmFudGVlczpcbiAqXG4gKiAxLiB0aGF0IGZ1bGZpbGxlZCBhbmQgcmVqZWN0ZWQgd2lsbCBiZSBjYWxsZWQgb25seSBvbmNlLlxuICogMi4gdGhhdCBlaXRoZXIgdGhlIGZ1bGZpbGxlZCBjYWxsYmFjayBvciB0aGUgcmVqZWN0ZWQgY2FsbGJhY2sgd2lsbCBiZVxuICogICAgY2FsbGVkLCBidXQgbm90IGJvdGguXG4gKiAzLiB0aGF0IGZ1bGZpbGxlZCBhbmQgcmVqZWN0ZWQgd2lsbCBub3QgYmUgY2FsbGVkIGluIHRoaXMgdHVybi5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgICAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgdG8gb2JzZXJ2ZVxuICogQHBhcmFtIGZ1bGZpbGxlZCAgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdpdGggdGhlIGZ1bGZpbGxlZCB2YWx1ZVxuICogQHBhcmFtIHJlamVjdGVkICAgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdpdGggdGhlIHJlamVjdGlvbiBleGNlcHRpb25cbiAqIEBwYXJhbSBwcm9ncmVzc2VkIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBhbnkgcHJvZ3Jlc3Mgbm90aWZpY2F0aW9uc1xuICogQHJldHVybiBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlIGZyb20gdGhlIGludm9rZWQgY2FsbGJhY2tcbiAqL1xuUS53aGVuID0gd2hlbjtcbmZ1bmN0aW9uIHdoZW4odmFsdWUsIGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIHByb2dyZXNzZWQpIHtcbiAgICByZXR1cm4gUSh2YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkLCBwcm9ncmVzc2VkKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUudGhlblJlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZhbHVlOyB9KTtcbn07XG5cblEudGhlblJlc29sdmUgPSBmdW5jdGlvbiAocHJvbWlzZSwgdmFsdWUpIHtcbiAgICByZXR1cm4gUShwcm9taXNlKS50aGVuUmVzb2x2ZSh2YWx1ZSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuUmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKCkgeyB0aHJvdyByZWFzb247IH0pO1xufTtcblxuUS50aGVuUmVqZWN0ID0gZnVuY3Rpb24gKHByb21pc2UsIHJlYXNvbikge1xuICAgIHJldHVybiBRKHByb21pc2UpLnRoZW5SZWplY3QocmVhc29uKTtcbn07XG5cbi8qKlxuICogSWYgYW4gb2JqZWN0IGlzIG5vdCBhIHByb21pc2UsIGl0IGlzIGFzIFwibmVhclwiIGFzIHBvc3NpYmxlLlxuICogSWYgYSBwcm9taXNlIGlzIHJlamVjdGVkLCBpdCBpcyBhcyBcIm5lYXJcIiBhcyBwb3NzaWJsZSB0b28uXG4gKiBJZiBpdOKAmXMgYSBmdWxmaWxsZWQgcHJvbWlzZSwgdGhlIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5lYXJlci5cbiAqIElmIGl04oCZcyBhIGRlZmVycmVkIHByb21pc2UgYW5kIHRoZSBkZWZlcnJlZCBoYXMgYmVlbiByZXNvbHZlZCwgdGhlXG4gKiByZXNvbHV0aW9uIGlzIFwibmVhcmVyXCIuXG4gKiBAcGFyYW0gb2JqZWN0XG4gKiBAcmV0dXJucyBtb3N0IHJlc29sdmVkIChuZWFyZXN0KSBmb3JtIG9mIHRoZSBvYmplY3RcbiAqL1xuXG4vLyBYWFggc2hvdWxkIHdlIHJlLWRvIHRoaXM/XG5RLm5lYXJlciA9IG5lYXJlcjtcbmZ1bmN0aW9uIG5lYXJlcih2YWx1ZSkge1xuICAgIGlmIChpc1Byb21pc2UodmFsdWUpKSB7XG4gICAgICAgIHZhciBpbnNwZWN0ZWQgPSB2YWx1ZS5pbnNwZWN0KCk7XG4gICAgICAgIGlmIChpbnNwZWN0ZWQuc3RhdGUgPT09IFwiZnVsZmlsbGVkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnNwZWN0ZWQudmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG4vKipcbiAqIEByZXR1cm5zIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhIHByb21pc2UuXG4gKiBPdGhlcndpc2UgaXQgaXMgYSBmdWxmaWxsZWQgdmFsdWUuXG4gKi9cblEuaXNQcm9taXNlID0gaXNQcm9taXNlO1xuZnVuY3Rpb24gaXNQcm9taXNlKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBQcm9taXNlO1xufVxuXG5RLmlzUHJvbWlzZUFsaWtlID0gaXNQcm9taXNlQWxpa2U7XG5mdW5jdGlvbiBpc1Byb21pc2VBbGlrZShvYmplY3QpIHtcbiAgICByZXR1cm4gaXNPYmplY3Qob2JqZWN0KSAmJiB0eXBlb2Ygb2JqZWN0LnRoZW4gPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuLyoqXG4gKiBAcmV0dXJucyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYSBwZW5kaW5nIHByb21pc2UsIG1lYW5pbmcgbm90XG4gKiBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG4gKi9cblEuaXNQZW5kaW5nID0gaXNQZW5kaW5nO1xuZnVuY3Rpb24gaXNQZW5kaW5nKG9iamVjdCkge1xuICAgIHJldHVybiBpc1Byb21pc2Uob2JqZWN0KSAmJiBvYmplY3QuaW5zcGVjdCgpLnN0YXRlID09PSBcInBlbmRpbmdcIjtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuaXNQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmluc3BlY3QoKS5zdGF0ZSA9PT0gXCJwZW5kaW5nXCI7XG59O1xuXG4vKipcbiAqIEByZXR1cm5zIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhIHZhbHVlIG9yIGZ1bGZpbGxlZFxuICogcHJvbWlzZS5cbiAqL1xuUS5pc0Z1bGZpbGxlZCA9IGlzRnVsZmlsbGVkO1xuZnVuY3Rpb24gaXNGdWxmaWxsZWQob2JqZWN0KSB7XG4gICAgcmV0dXJuICFpc1Byb21pc2Uob2JqZWN0KSB8fCBvYmplY3QuaW5zcGVjdCgpLnN0YXRlID09PSBcImZ1bGZpbGxlZFwiO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5pc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNwZWN0KCkuc3RhdGUgPT09IFwiZnVsZmlsbGVkXCI7XG59O1xuXG4vKipcbiAqIEByZXR1cm5zIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhIHJlamVjdGVkIHByb21pc2UuXG4gKi9cblEuaXNSZWplY3RlZCA9IGlzUmVqZWN0ZWQ7XG5mdW5jdGlvbiBpc1JlamVjdGVkKG9iamVjdCkge1xuICAgIHJldHVybiBpc1Byb21pc2Uob2JqZWN0KSAmJiBvYmplY3QuaW5zcGVjdCgpLnN0YXRlID09PSBcInJlamVjdGVkXCI7XG59XG5cblByb21pc2UucHJvdG90eXBlLmlzUmVqZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zcGVjdCgpLnN0YXRlID09PSBcInJlamVjdGVkXCI7XG59O1xuXG4vLy8vIEJFR0lOIFVOSEFORExFRCBSRUpFQ1RJT04gVFJBQ0tJTkdcblxuLy8gVGhpcyBwcm9taXNlIGxpYnJhcnkgY29uc3VtZXMgZXhjZXB0aW9ucyB0aHJvd24gaW4gaGFuZGxlcnMgc28gdGhleSBjYW4gYmVcbi8vIGhhbmRsZWQgYnkgYSBzdWJzZXF1ZW50IHByb21pc2UuICBUaGUgZXhjZXB0aW9ucyBnZXQgYWRkZWQgdG8gdGhpcyBhcnJheSB3aGVuXG4vLyB0aGV5IGFyZSBjcmVhdGVkLCBhbmQgcmVtb3ZlZCB3aGVuIHRoZXkgYXJlIGhhbmRsZWQuICBOb3RlIHRoYXQgaW4gRVM2IG9yXG4vLyBzaGltbWVkIGVudmlyb25tZW50cywgdGhpcyB3b3VsZCBuYXR1cmFsbHkgYmUgYSBgU2V0YC5cbnZhciB1bmhhbmRsZWRSZWFzb25zID0gW107XG52YXIgdW5oYW5kbGVkUmVqZWN0aW9ucyA9IFtdO1xudmFyIHJlcG9ydGVkVW5oYW5kbGVkUmVqZWN0aW9ucyA9IFtdO1xudmFyIHRyYWNrVW5oYW5kbGVkUmVqZWN0aW9ucyA9IHRydWU7XG5cbmZ1bmN0aW9uIHJlc2V0VW5oYW5kbGVkUmVqZWN0aW9ucygpIHtcbiAgICB1bmhhbmRsZWRSZWFzb25zLmxlbmd0aCA9IDA7XG4gICAgdW5oYW5kbGVkUmVqZWN0aW9ucy5sZW5ndGggPSAwO1xuXG4gICAgaWYgKCF0cmFja1VuaGFuZGxlZFJlamVjdGlvbnMpIHtcbiAgICAgICAgdHJhY2tVbmhhbmRsZWRSZWplY3Rpb25zID0gdHJ1ZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRyYWNrUmVqZWN0aW9uKHByb21pc2UsIHJlYXNvbikge1xuICAgIGlmICghdHJhY2tVbmhhbmRsZWRSZWplY3Rpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBwcm9jZXNzLmVtaXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBRLm5leHRUaWNrLnJ1bkFmdGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChhcnJheV9pbmRleE9mKHVuaGFuZGxlZFJlamVjdGlvbnMsIHByb21pc2UpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHByb2Nlc3MuZW1pdChcInVuaGFuZGxlZFJlamVjdGlvblwiLCByZWFzb24sIHByb21pc2UpO1xuICAgICAgICAgICAgICAgIHJlcG9ydGVkVW5oYW5kbGVkUmVqZWN0aW9ucy5wdXNoKHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB1bmhhbmRsZWRSZWplY3Rpb25zLnB1c2gocHJvbWlzZSk7XG4gICAgaWYgKHJlYXNvbiAmJiB0eXBlb2YgcmVhc29uLnN0YWNrICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHVuaGFuZGxlZFJlYXNvbnMucHVzaChyZWFzb24uc3RhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHVuaGFuZGxlZFJlYXNvbnMucHVzaChcIihubyBzdGFjaykgXCIgKyByZWFzb24pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdW50cmFja1JlamVjdGlvbihwcm9taXNlKSB7XG4gICAgaWYgKCF0cmFja1VuaGFuZGxlZFJlamVjdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBhdCA9IGFycmF5X2luZGV4T2YodW5oYW5kbGVkUmVqZWN0aW9ucywgcHJvbWlzZSk7XG4gICAgaWYgKGF0ICE9PSAtMSkge1xuICAgICAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHByb2Nlc3MuZW1pdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBRLm5leHRUaWNrLnJ1bkFmdGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXRSZXBvcnQgPSBhcnJheV9pbmRleE9mKHJlcG9ydGVkVW5oYW5kbGVkUmVqZWN0aW9ucywgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgaWYgKGF0UmVwb3J0ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVtaXQoXCJyZWplY3Rpb25IYW5kbGVkXCIsIHVuaGFuZGxlZFJlYXNvbnNbYXRdLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0ZWRVbmhhbmRsZWRSZWplY3Rpb25zLnNwbGljZShhdFJlcG9ydCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdW5oYW5kbGVkUmVqZWN0aW9ucy5zcGxpY2UoYXQsIDEpO1xuICAgICAgICB1bmhhbmRsZWRSZWFzb25zLnNwbGljZShhdCwgMSk7XG4gICAgfVxufVxuXG5RLnJlc2V0VW5oYW5kbGVkUmVqZWN0aW9ucyA9IHJlc2V0VW5oYW5kbGVkUmVqZWN0aW9ucztcblxuUS5nZXRVbmhhbmRsZWRSZWFzb25zID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIE1ha2UgYSBjb3B5IHNvIHRoYXQgY29uc3VtZXJzIGNhbid0IGludGVyZmVyZSB3aXRoIG91ciBpbnRlcm5hbCBzdGF0ZS5cbiAgICByZXR1cm4gdW5oYW5kbGVkUmVhc29ucy5zbGljZSgpO1xufTtcblxuUS5zdG9wVW5oYW5kbGVkUmVqZWN0aW9uVHJhY2tpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmVzZXRVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgdHJhY2tVbmhhbmRsZWRSZWplY3Rpb25zID0gZmFsc2U7XG59O1xuXG5yZXNldFVuaGFuZGxlZFJlamVjdGlvbnMoKTtcblxuLy8vLyBFTkQgVU5IQU5ETEVEIFJFSkVDVElPTiBUUkFDS0lOR1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYSByZWplY3RlZCBwcm9taXNlLlxuICogQHBhcmFtIHJlYXNvbiB2YWx1ZSBkZXNjcmliaW5nIHRoZSBmYWlsdXJlXG4gKi9cblEucmVqZWN0ID0gcmVqZWN0O1xuZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAgIHZhciByZWplY3Rpb24gPSBQcm9taXNlKHtcbiAgICAgICAgXCJ3aGVuXCI6IGZ1bmN0aW9uIChyZWplY3RlZCkge1xuICAgICAgICAgICAgLy8gbm90ZSB0aGF0IHRoZSBlcnJvciBoYXMgYmVlbiBoYW5kbGVkXG4gICAgICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB1bnRyYWNrUmVqZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdGVkID8gcmVqZWN0ZWQocmVhc29uKSA6IHRoaXM7XG4gICAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiBmYWxsYmFjaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSwgZnVuY3Rpb24gaW5zcGVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RhdGU6IFwicmVqZWN0ZWRcIiwgcmVhc29uOiByZWFzb24gfTtcbiAgICB9KTtcblxuICAgIC8vIE5vdGUgdGhhdCB0aGUgcmVhc29uIGhhcyBub3QgYmVlbiBoYW5kbGVkLlxuICAgIHRyYWNrUmVqZWN0aW9uKHJlamVjdGlvbiwgcmVhc29uKTtcblxuICAgIHJldHVybiByZWplY3Rpb247XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIGZ1bGZpbGxlZCBwcm9taXNlIGZvciBhbiBpbW1lZGlhdGUgcmVmZXJlbmNlLlxuICogQHBhcmFtIHZhbHVlIGltbWVkaWF0ZSByZWZlcmVuY2VcbiAqL1xuUS5mdWxmaWxsID0gZnVsZmlsbDtcbmZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHtcbiAgICByZXR1cm4gUHJvbWlzZSh7XG4gICAgICAgIFwid2hlblwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVbbmFtZV07XG4gICAgICAgIH0sXG4gICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uIChuYW1lLCByaHMpIHtcbiAgICAgICAgICAgIHZhbHVlW25hbWVdID0gcmhzO1xuICAgICAgICB9LFxuICAgICAgICBcImRlbGV0ZVwiOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgZGVsZXRlIHZhbHVlW25hbWVdO1xuICAgICAgICB9LFxuICAgICAgICBcInBvc3RcIjogZnVuY3Rpb24gKG5hbWUsIGFyZ3MpIHtcbiAgICAgICAgICAgIC8vIE1hcmsgTWlsbGVyIHByb3Bvc2VzIHRoYXQgcG9zdCB3aXRoIG5vIG5hbWUgc2hvdWxkIGFwcGx5IGFcbiAgICAgICAgICAgIC8vIHByb21pc2VkIGZ1bmN0aW9uLlxuICAgICAgICAgICAgaWYgKG5hbWUgPT09IG51bGwgfHwgbmFtZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZVtuYW1lXS5hcHBseSh2YWx1ZSwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiYXBwbHlcIjogZnVuY3Rpb24gKHRoaXNwLCBhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuYXBwbHkodGhpc3AsIGFyZ3MpO1xuICAgICAgICB9LFxuICAgICAgICBcImtleXNcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdF9rZXlzKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0sIHZvaWQgMCwgZnVuY3Rpb24gaW5zcGVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RhdGU6IFwiZnVsZmlsbGVkXCIsIHZhbHVlOiB2YWx1ZSB9O1xuICAgIH0pO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZW5hYmxlcyB0byBRIHByb21pc2VzLlxuICogQHBhcmFtIHByb21pc2UgdGhlbmFibGUgcHJvbWlzZVxuICogQHJldHVybnMgYSBRIHByb21pc2VcbiAqL1xuZnVuY3Rpb24gY29lcmNlKHByb21pc2UpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJvbWlzZS50aGVuKGRlZmVycmVkLnJlc29sdmUsIGRlZmVycmVkLnJlamVjdCwgZGVmZXJyZWQubm90aWZ5KTtcbiAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXhjZXB0aW9uKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG4vKipcbiAqIEFubm90YXRlcyBhbiBvYmplY3Qgc3VjaCB0aGF0IGl0IHdpbGwgbmV2ZXIgYmVcbiAqIHRyYW5zZmVycmVkIGF3YXkgZnJvbSB0aGlzIHByb2Nlc3Mgb3ZlciBhbnkgcHJvbWlzZVxuICogY29tbXVuaWNhdGlvbiBjaGFubmVsLlxuICogQHBhcmFtIG9iamVjdFxuICogQHJldHVybnMgcHJvbWlzZSBhIHdyYXBwaW5nIG9mIHRoYXQgb2JqZWN0IHRoYXRcbiAqIGFkZGl0aW9uYWxseSByZXNwb25kcyB0byB0aGUgXCJpc0RlZlwiIG1lc3NhZ2VcbiAqIHdpdGhvdXQgYSByZWplY3Rpb24uXG4gKi9cblEubWFzdGVyID0gbWFzdGVyO1xuZnVuY3Rpb24gbWFzdGVyKG9iamVjdCkge1xuICAgIHJldHVybiBQcm9taXNlKHtcbiAgICAgICAgXCJpc0RlZlwiOiBmdW5jdGlvbiAoKSB7fVxuICAgIH0sIGZ1bmN0aW9uIGZhbGxiYWNrKG9wLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiBkaXNwYXRjaChvYmplY3QsIG9wLCBhcmdzKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBRKG9iamVjdCkuaW5zcGVjdCgpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIFNwcmVhZHMgdGhlIHZhbHVlcyBvZiBhIHByb21pc2VkIGFycmF5IG9mIGFyZ3VtZW50cyBpbnRvIHRoZVxuICogZnVsZmlsbG1lbnQgY2FsbGJhY2suXG4gKiBAcGFyYW0gZnVsZmlsbGVkIGNhbGxiYWNrIHRoYXQgcmVjZWl2ZXMgdmFyaWFkaWMgYXJndW1lbnRzIGZyb20gdGhlXG4gKiBwcm9taXNlZCBhcnJheVxuICogQHBhcmFtIHJlamVjdGVkIGNhbGxiYWNrIHRoYXQgcmVjZWl2ZXMgdGhlIGV4Y2VwdGlvbiBpZiB0aGUgcHJvbWlzZVxuICogaXMgcmVqZWN0ZWQuXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWUgb3IgdGhyb3duIGV4Y2VwdGlvbiBvZlxuICogZWl0aGVyIGNhbGxiYWNrLlxuICovXG5RLnNwcmVhZCA9IHNwcmVhZDtcbmZ1bmN0aW9uIHNwcmVhZCh2YWx1ZSwgZnVsZmlsbGVkLCByZWplY3RlZCkge1xuICAgIHJldHVybiBRKHZhbHVlKS5zcHJlYWQoZnVsZmlsbGVkLCByZWplY3RlZCk7XG59XG5cblByb21pc2UucHJvdG90eXBlLnNwcmVhZCA9IGZ1bmN0aW9uIChmdWxmaWxsZWQsIHJlamVjdGVkKSB7XG4gICAgcmV0dXJuIHRoaXMuYWxsKCkudGhlbihmdW5jdGlvbiAoYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bGZpbGxlZC5hcHBseSh2b2lkIDAsIGFycmF5KTtcbiAgICB9LCByZWplY3RlZCk7XG59O1xuXG4vKipcbiAqIFRoZSBhc3luYyBmdW5jdGlvbiBpcyBhIGRlY29yYXRvciBmb3IgZ2VuZXJhdG9yIGZ1bmN0aW9ucywgdHVybmluZ1xuICogdGhlbSBpbnRvIGFzeW5jaHJvbm91cyBnZW5lcmF0b3JzLiAgQWx0aG91Z2ggZ2VuZXJhdG9ycyBhcmUgb25seSBwYXJ0XG4gKiBvZiB0aGUgbmV3ZXN0IEVDTUFTY3JpcHQgNiBkcmFmdHMsIHRoaXMgY29kZSBkb2VzIG5vdCBjYXVzZSBzeW50YXhcbiAqIGVycm9ycyBpbiBvbGRlciBlbmdpbmVzLiAgVGhpcyBjb2RlIHNob3VsZCBjb250aW51ZSB0byB3b3JrIGFuZCB3aWxsXG4gKiBpbiBmYWN0IGltcHJvdmUgb3ZlciB0aW1lIGFzIHRoZSBsYW5ndWFnZSBpbXByb3Zlcy5cbiAqXG4gKiBFUzYgZ2VuZXJhdG9ycyBhcmUgY3VycmVudGx5IHBhcnQgb2YgVjggdmVyc2lvbiAzLjE5IHdpdGggdGhlXG4gKiAtLWhhcm1vbnktZ2VuZXJhdG9ycyBydW50aW1lIGZsYWcgZW5hYmxlZC4gIFNwaWRlck1vbmtleSBoYXMgaGFkIHRoZW1cbiAqIGZvciBsb25nZXIsIGJ1dCB1bmRlciBhbiBvbGRlciBQeXRob24taW5zcGlyZWQgZm9ybS4gIFRoaXMgZnVuY3Rpb25cbiAqIHdvcmtzIG9uIGJvdGgga2luZHMgb2YgZ2VuZXJhdG9ycy5cbiAqXG4gKiBEZWNvcmF0ZXMgYSBnZW5lcmF0b3IgZnVuY3Rpb24gc3VjaCB0aGF0OlxuICogIC0gaXQgbWF5IHlpZWxkIHByb21pc2VzXG4gKiAgLSBleGVjdXRpb24gd2lsbCBjb250aW51ZSB3aGVuIHRoYXQgcHJvbWlzZSBpcyBmdWxmaWxsZWRcbiAqICAtIHRoZSB2YWx1ZSBvZiB0aGUgeWllbGQgZXhwcmVzc2lvbiB3aWxsIGJlIHRoZSBmdWxmaWxsZWQgdmFsdWVcbiAqICAtIGl0IHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlICh3aGVuIHRoZSBnZW5lcmF0b3JcbiAqICAgIHN0b3BzIGl0ZXJhdGluZylcbiAqICAtIHRoZSBkZWNvcmF0ZWQgZnVuY3Rpb24gcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWVcbiAqICAgIG9mIHRoZSBnZW5lcmF0b3Igb3IgdGhlIGZpcnN0IHJlamVjdGVkIHByb21pc2UgYW1vbmcgdGhvc2VcbiAqICAgIHlpZWxkZWQuXG4gKiAgLSBpZiBhbiBlcnJvciBpcyB0aHJvd24gaW4gdGhlIGdlbmVyYXRvciwgaXQgcHJvcGFnYXRlcyB0aHJvdWdoXG4gKiAgICBldmVyeSBmb2xsb3dpbmcgeWllbGQgdW50aWwgaXQgaXMgY2F1Z2h0LCBvciB1bnRpbCBpdCBlc2NhcGVzXG4gKiAgICB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uIGFsdG9nZXRoZXIsIGFuZCBpcyB0cmFuc2xhdGVkIGludG8gYVxuICogICAgcmVqZWN0aW9uIGZvciB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGUgZGVjb3JhdGVkIGdlbmVyYXRvci5cbiAqL1xuUS5hc3luYyA9IGFzeW5jO1xuZnVuY3Rpb24gYXN5bmMobWFrZUdlbmVyYXRvcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHdoZW4gdmVyYiBpcyBcInNlbmRcIiwgYXJnIGlzIGEgdmFsdWVcbiAgICAgICAgLy8gd2hlbiB2ZXJiIGlzIFwidGhyb3dcIiwgYXJnIGlzIGFuIGV4Y2VwdGlvblxuICAgICAgICBmdW5jdGlvbiBjb250aW51ZXIodmVyYiwgYXJnKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuXG4gICAgICAgICAgICAvLyBVbnRpbCBWOCAzLjE5IC8gQ2hyb21pdW0gMjkgaXMgcmVsZWFzZWQsIFNwaWRlck1vbmtleSBpcyB0aGUgb25seVxuICAgICAgICAgICAgLy8gZW5naW5lIHRoYXQgaGFzIGEgZGVwbG95ZWQgYmFzZSBvZiBicm93c2VycyB0aGF0IHN1cHBvcnQgZ2VuZXJhdG9ycy5cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIFNNJ3MgZ2VuZXJhdG9ycyB1c2UgdGhlIFB5dGhvbi1pbnNwaXJlZCBzZW1hbnRpY3Mgb2ZcbiAgICAgICAgICAgIC8vIG91dGRhdGVkIEVTNiBkcmFmdHMuICBXZSB3b3VsZCBsaWtlIHRvIHN1cHBvcnQgRVM2LCBidXQgd2UnZCBhbHNvXG4gICAgICAgICAgICAvLyBsaWtlIHRvIG1ha2UgaXQgcG9zc2libGUgdG8gdXNlIGdlbmVyYXRvcnMgaW4gZGVwbG95ZWQgYnJvd3NlcnMsIHNvXG4gICAgICAgICAgICAvLyB3ZSBhbHNvIHN1cHBvcnQgUHl0aG9uLXN0eWxlIGdlbmVyYXRvcnMuICBBdCBzb21lIHBvaW50IHdlIGNhbiByZW1vdmVcbiAgICAgICAgICAgIC8vIHRoaXMgYmxvY2suXG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgU3RvcEl0ZXJhdGlvbiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIC8vIEVTNiBHZW5lcmF0b3JzXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZ2VuZXJhdG9yW3ZlcmJdKGFyZyk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXhjZXB0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBRKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdoZW4ocmVzdWx0LnZhbHVlLCBjYWxsYmFjaywgZXJyYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTcGlkZXJNb25rZXkgR2VuZXJhdG9yc1xuICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBSZW1vdmUgdGhpcyBjYXNlIHdoZW4gU00gZG9lcyBFUzYgZ2VuZXJhdG9ycy5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBnZW5lcmF0b3JbdmVyYl0oYXJnKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzU3RvcEl0ZXJhdGlvbihleGNlcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUShleGNlcHRpb24udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChleGNlcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB3aGVuKHJlc3VsdCwgY2FsbGJhY2ssIGVycmJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBnZW5lcmF0b3IgPSBtYWtlR2VuZXJhdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGNvbnRpbnVlci5iaW5kKGNvbnRpbnVlciwgXCJuZXh0XCIpO1xuICAgICAgICB2YXIgZXJyYmFjayA9IGNvbnRpbnVlci5iaW5kKGNvbnRpbnVlciwgXCJ0aHJvd1wiKTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBUaGUgc3Bhd24gZnVuY3Rpb24gaXMgYSBzbWFsbCB3cmFwcGVyIGFyb3VuZCBhc3luYyB0aGF0IGltbWVkaWF0ZWx5XG4gKiBjYWxscyB0aGUgZ2VuZXJhdG9yIGFuZCBhbHNvIGVuZHMgdGhlIHByb21pc2UgY2hhaW4sIHNvIHRoYXQgYW55XG4gKiB1bmhhbmRsZWQgZXJyb3JzIGFyZSB0aHJvd24gaW5zdGVhZCBvZiBmb3J3YXJkZWQgdG8gdGhlIGVycm9yXG4gKiBoYW5kbGVyLiBUaGlzIGlzIHVzZWZ1bCBiZWNhdXNlIGl0J3MgZXh0cmVtZWx5IGNvbW1vbiB0byBydW5cbiAqIGdlbmVyYXRvcnMgYXQgdGhlIHRvcC1sZXZlbCB0byB3b3JrIHdpdGggbGlicmFyaWVzLlxuICovXG5RLnNwYXduID0gc3Bhd247XG5mdW5jdGlvbiBzcGF3bihtYWtlR2VuZXJhdG9yKSB7XG4gICAgUS5kb25lKFEuYXN5bmMobWFrZUdlbmVyYXRvcikoKSk7XG59XG5cbi8vIEZJWE1FOiBSZW1vdmUgdGhpcyBpbnRlcmZhY2Ugb25jZSBFUzYgZ2VuZXJhdG9ycyBhcmUgaW4gU3BpZGVyTW9ua2V5LlxuLyoqXG4gKiBUaHJvd3MgYSBSZXR1cm5WYWx1ZSBleGNlcHRpb24gdG8gc3RvcCBhbiBhc3luY2hyb25vdXMgZ2VuZXJhdG9yLlxuICpcbiAqIFRoaXMgaW50ZXJmYWNlIGlzIGEgc3RvcC1nYXAgbWVhc3VyZSB0byBzdXBwb3J0IGdlbmVyYXRvciByZXR1cm5cbiAqIHZhbHVlcyBpbiBvbGRlciBGaXJlZm94L1NwaWRlck1vbmtleS4gIEluIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBFUzZcbiAqIGdlbmVyYXRvcnMgbGlrZSBDaHJvbWl1bSAyOSwganVzdCB1c2UgXCJyZXR1cm5cIiBpbiB5b3VyIGdlbmVyYXRvclxuICogZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSB0aGUgcmV0dXJuIHZhbHVlIGZvciB0aGUgc3Vycm91bmRpbmcgZ2VuZXJhdG9yXG4gKiBAdGhyb3dzIFJldHVyblZhbHVlIGV4Y2VwdGlvbiB3aXRoIHRoZSB2YWx1ZS5cbiAqIEBleGFtcGxlXG4gKiAvLyBFUzYgc3R5bGVcbiAqIFEuYXN5bmMoZnVuY3Rpb24qICgpIHtcbiAqICAgICAgdmFyIGZvbyA9IHlpZWxkIGdldEZvb1Byb21pc2UoKTtcbiAqICAgICAgdmFyIGJhciA9IHlpZWxkIGdldEJhclByb21pc2UoKTtcbiAqICAgICAgcmV0dXJuIGZvbyArIGJhcjtcbiAqIH0pXG4gKiAvLyBPbGRlciBTcGlkZXJNb25rZXkgc3R5bGVcbiAqIFEuYXN5bmMoZnVuY3Rpb24gKCkge1xuICogICAgICB2YXIgZm9vID0geWllbGQgZ2V0Rm9vUHJvbWlzZSgpO1xuICogICAgICB2YXIgYmFyID0geWllbGQgZ2V0QmFyUHJvbWlzZSgpO1xuICogICAgICBRLnJldHVybihmb28gKyBiYXIpO1xuICogfSlcbiAqL1xuUVtcInJldHVyblwiXSA9IF9yZXR1cm47XG5mdW5jdGlvbiBfcmV0dXJuKHZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IFFSZXR1cm5WYWx1ZSh2YWx1ZSk7XG59XG5cbi8qKlxuICogVGhlIHByb21pc2VkIGZ1bmN0aW9uIGRlY29yYXRvciBlbnN1cmVzIHRoYXQgYW55IHByb21pc2UgYXJndW1lbnRzXG4gKiBhcmUgc2V0dGxlZCBhbmQgcGFzc2VkIGFzIHZhbHVlcyAoYHRoaXNgIGlzIGFsc28gc2V0dGxlZCBhbmQgcGFzc2VkXG4gKiBhcyBhIHZhbHVlKS4gIEl0IHdpbGwgYWxzbyBlbnN1cmUgdGhhdCB0aGUgcmVzdWx0IG9mIGEgZnVuY3Rpb24gaXNcbiAqIGFsd2F5cyBhIHByb21pc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBhZGQgPSBRLnByb21pc2VkKGZ1bmN0aW9uIChhLCBiKSB7XG4gKiAgICAgcmV0dXJuIGEgKyBiO1xuICogfSk7XG4gKiBhZGQoUShhKSwgUShCKSk7XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIGRlY29yYXRlXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb259IGEgZnVuY3Rpb24gdGhhdCBoYXMgYmVlbiBkZWNvcmF0ZWQuXG4gKi9cblEucHJvbWlzZWQgPSBwcm9taXNlZDtcbmZ1bmN0aW9uIHByb21pc2VkKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNwcmVhZChbdGhpcywgYWxsKGFyZ3VtZW50cyldLCBmdW5jdGlvbiAoc2VsZiwgYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuXG4vKipcbiAqIHNlbmRzIGEgbWVzc2FnZSB0byBhIHZhbHVlIGluIGEgZnV0dXJlIHR1cm5cbiAqIEBwYXJhbSBvYmplY3QqIHRoZSByZWNpcGllbnRcbiAqIEBwYXJhbSBvcCB0aGUgbmFtZSBvZiB0aGUgbWVzc2FnZSBvcGVyYXRpb24sIGUuZy4sIFwid2hlblwiLFxuICogQHBhcmFtIGFyZ3MgZnVydGhlciBhcmd1bWVudHMgdG8gYmUgZm9yd2FyZGVkIHRvIHRoZSBvcGVyYXRpb25cbiAqIEByZXR1cm5zIHJlc3VsdCB7UHJvbWlzZX0gYSBwcm9taXNlIGZvciB0aGUgcmVzdWx0IG9mIHRoZSBvcGVyYXRpb25cbiAqL1xuUS5kaXNwYXRjaCA9IGRpc3BhdGNoO1xuZnVuY3Rpb24gZGlzcGF0Y2gob2JqZWN0LCBvcCwgYXJncykge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2gob3AsIGFyZ3MpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChvcCwgYXJncykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnByb21pc2VEaXNwYXRjaChkZWZlcnJlZC5yZXNvbHZlLCBvcCwgYXJncyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciB0YXJnZXQgb2JqZWN0XG4gKiBAcGFyYW0gbmFtZSAgICAgIG5hbWUgb2YgcHJvcGVydHkgdG8gZ2V0XG4gKiBAcmV0dXJuIHByb21pc2UgZm9yIHRoZSBwcm9wZXJ0eSB2YWx1ZVxuICovXG5RLmdldCA9IGZ1bmN0aW9uIChvYmplY3QsIGtleSkge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2goXCJnZXRcIiwgW2tleV0pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKFwiZ2V0XCIsIFtrZXldKTtcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgdmFsdWUgb2YgYSBwcm9wZXJ0eSBpbiBhIGZ1dHVyZSB0dXJuLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIG9iamVjdCBvYmplY3RcbiAqIEBwYXJhbSBuYW1lICAgICAgbmFtZSBvZiBwcm9wZXJ0eSB0byBzZXRcbiAqIEBwYXJhbSB2YWx1ZSAgICAgbmV3IHZhbHVlIG9mIHByb3BlcnR5XG4gKiBAcmV0dXJuIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWVcbiAqL1xuUS5zZXQgPSBmdW5jdGlvbiAob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcInNldFwiLCBba2V5LCB2YWx1ZV0pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcInNldFwiLCBba2V5LCB2YWx1ZV0pO1xufTtcblxuLyoqXG4gKiBEZWxldGVzIGEgcHJvcGVydHkgaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciB0YXJnZXQgb2JqZWN0XG4gKiBAcGFyYW0gbmFtZSAgICAgIG5hbWUgb2YgcHJvcGVydHkgdG8gZGVsZXRlXG4gKiBAcmV0dXJuIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWVcbiAqL1xuUS5kZWwgPSAvLyBYWFggbGVnYWN5XG5RW1wiZGVsZXRlXCJdID0gZnVuY3Rpb24gKG9iamVjdCwga2V5KSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcImRlbGV0ZVwiLCBba2V5XSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5kZWwgPSAvLyBYWFggbGVnYWN5XG5Qcm9taXNlLnByb3RvdHlwZVtcImRlbGV0ZVwiXSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcImRlbGV0ZVwiLCBba2V5XSk7XG59O1xuXG4vKipcbiAqIEludm9rZXMgYSBtZXRob2QgaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciB0YXJnZXQgb2JqZWN0XG4gKiBAcGFyYW0gbmFtZSAgICAgIG5hbWUgb2YgbWV0aG9kIHRvIGludm9rZVxuICogQHBhcmFtIHZhbHVlICAgICBhIHZhbHVlIHRvIHBvc3QsIHR5cGljYWxseSBhbiBhcnJheSBvZlxuICogICAgICAgICAgICAgICAgICBpbnZvY2F0aW9uIGFyZ3VtZW50cyBmb3IgcHJvbWlzZXMgdGhhdFxuICogICAgICAgICAgICAgICAgICBhcmUgdWx0aW1hdGVseSBiYWNrZWQgd2l0aCBgcmVzb2x2ZWAgdmFsdWVzLFxuICogICAgICAgICAgICAgICAgICBhcyBvcHBvc2VkIHRvIHRob3NlIGJhY2tlZCB3aXRoIFVSTHNcbiAqICAgICAgICAgICAgICAgICAgd2hlcmVpbiB0aGUgcG9zdGVkIHZhbHVlIGNhbiBiZSBhbnlcbiAqICAgICAgICAgICAgICAgICAgSlNPTiBzZXJpYWxpemFibGUgb2JqZWN0LlxuICogQHJldHVybiBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlXG4gKi9cbi8vIGJvdW5kIGxvY2FsbHkgYmVjYXVzZSBpdCBpcyB1c2VkIGJ5IG90aGVyIG1ldGhvZHNcblEubWFwcGx5ID0gLy8gWFhYIEFzIHByb3Bvc2VkIGJ5IFwiUmVkc2FuZHJvXCJcblEucG9zdCA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWUsIGFyZ3MpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgYXJnc10pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubWFwcGx5ID0gLy8gWFhYIEFzIHByb3Bvc2VkIGJ5IFwiUmVkc2FuZHJvXCJcblByb21pc2UucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAobmFtZSwgYXJncykge1xuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgYXJnc10pO1xufTtcblxuLyoqXG4gKiBJbnZva2VzIGEgbWV0aG9kIGluIGEgZnV0dXJlIHR1cm4uXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IG9iamVjdFxuICogQHBhcmFtIG5hbWUgICAgICBuYW1lIG9mIG1ldGhvZCB0byBpbnZva2VcbiAqIEBwYXJhbSAuLi5hcmdzICAgYXJyYXkgb2YgaW52b2NhdGlvbiBhcmd1bWVudHNcbiAqIEByZXR1cm4gcHJvbWlzZSBmb3IgdGhlIHJldHVybiB2YWx1ZVxuICovXG5RLnNlbmQgPSAvLyBYWFggTWFyayBNaWxsZXIncyBwcm9wb3NlZCBwYXJsYW5jZVxuUS5tY2FsbCA9IC8vIFhYWCBBcyBwcm9wb3NlZCBieSBcIlJlZHNhbmRyb1wiXG5RLmludm9rZSA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWUgLyouLi5hcmdzKi8pIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAyKV0pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc2VuZCA9IC8vIFhYWCBNYXJrIE1pbGxlcidzIHByb3Bvc2VkIHBhcmxhbmNlXG5Qcm9taXNlLnByb3RvdHlwZS5tY2FsbCA9IC8vIFhYWCBBcyBwcm9wb3NlZCBieSBcIlJlZHNhbmRyb1wiXG5Qcm9taXNlLnByb3RvdHlwZS5pbnZva2UgPSBmdW5jdGlvbiAobmFtZSAvKi4uLmFyZ3MqLykge1xuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAxKV0pO1xufTtcblxuLyoqXG4gKiBBcHBsaWVzIHRoZSBwcm9taXNlZCBmdW5jdGlvbiBpbiBhIGZ1dHVyZSB0dXJuLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIHRhcmdldCBmdW5jdGlvblxuICogQHBhcmFtIGFyZ3MgICAgICBhcnJheSBvZiBhcHBsaWNhdGlvbiBhcmd1bWVudHNcbiAqL1xuUS5mYXBwbHkgPSBmdW5jdGlvbiAob2JqZWN0LCBhcmdzKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcImFwcGx5XCIsIFt2b2lkIDAsIGFyZ3NdKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmZhcHBseSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJhcHBseVwiLCBbdm9pZCAwLCBhcmdzXSk7XG59O1xuXG4vKipcbiAqIENhbGxzIHRoZSBwcm9taXNlZCBmdW5jdGlvbiBpbiBhIGZ1dHVyZSB0dXJuLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIHRhcmdldCBmdW5jdGlvblxuICogQHBhcmFtIC4uLmFyZ3MgICBhcnJheSBvZiBhcHBsaWNhdGlvbiBhcmd1bWVudHNcbiAqL1xuUVtcInRyeVwiXSA9XG5RLmZjYWxsID0gZnVuY3Rpb24gKG9iamVjdCAvKiAuLi5hcmdzKi8pIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKFwiYXBwbHlcIiwgW3ZvaWQgMCwgYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAxKV0pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZmNhbGwgPSBmdW5jdGlvbiAoLyouLi5hcmdzKi8pIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcImFwcGx5XCIsIFt2b2lkIDAsIGFycmF5X3NsaWNlKGFyZ3VtZW50cyldKTtcbn07XG5cbi8qKlxuICogQmluZHMgdGhlIHByb21pc2VkIGZ1bmN0aW9uLCB0cmFuc2Zvcm1pbmcgcmV0dXJuIHZhbHVlcyBpbnRvIGEgZnVsZmlsbGVkXG4gKiBwcm9taXNlIGFuZCB0aHJvd24gZXJyb3JzIGludG8gYSByZWplY3RlZCBvbmUuXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IGZ1bmN0aW9uXG4gKiBAcGFyYW0gLi4uYXJncyAgIGFycmF5IG9mIGFwcGxpY2F0aW9uIGFyZ3VtZW50c1xuICovXG5RLmZiaW5kID0gZnVuY3Rpb24gKG9iamVjdCAvKi4uLmFyZ3MqLykge1xuICAgIHZhciBwcm9taXNlID0gUShvYmplY3QpO1xuICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAxKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gZmJvdW5kKCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzZS5kaXNwYXRjaChcImFwcGx5XCIsIFtcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBhcmdzLmNvbmNhdChhcnJheV9zbGljZShhcmd1bWVudHMpKVxuICAgICAgICBdKTtcbiAgICB9O1xufTtcblByb21pc2UucHJvdG90eXBlLmZiaW5kID0gZnVuY3Rpb24gKC8qLi4uYXJncyovKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gZmJvdW5kKCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzZS5kaXNwYXRjaChcImFwcGx5XCIsIFtcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBhcmdzLmNvbmNhdChhcnJheV9zbGljZShhcmd1bWVudHMpKVxuICAgICAgICBdKTtcbiAgICB9O1xufTtcblxuLyoqXG4gKiBSZXF1ZXN0cyB0aGUgbmFtZXMgb2YgdGhlIG93bmVkIHByb3BlcnRpZXMgb2YgYSBwcm9taXNlZFxuICogb2JqZWN0IGluIGEgZnV0dXJlIHR1cm4uXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IG9iamVjdFxuICogQHJldHVybiBwcm9taXNlIGZvciB0aGUga2V5cyBvZiB0aGUgZXZlbnR1YWxseSBzZXR0bGVkIG9iamVjdFxuICovXG5RLmtleXMgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcImtleXNcIiwgW10pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcImtleXNcIiwgW10pO1xufTtcblxuLyoqXG4gKiBUdXJucyBhbiBhcnJheSBvZiBwcm9taXNlcyBpbnRvIGEgcHJvbWlzZSBmb3IgYW4gYXJyYXkuICBJZiBhbnkgb2ZcbiAqIHRoZSBwcm9taXNlcyBnZXRzIHJlamVjdGVkLCB0aGUgd2hvbGUgYXJyYXkgaXMgcmVqZWN0ZWQgaW1tZWRpYXRlbHkuXG4gKiBAcGFyYW0ge0FycmF5Kn0gYW4gYXJyYXkgKG9yIHByb21pc2UgZm9yIGFuIGFycmF5KSBvZiB2YWx1ZXMgKG9yXG4gKiBwcm9taXNlcyBmb3IgdmFsdWVzKVxuICogQHJldHVybnMgYSBwcm9taXNlIGZvciBhbiBhcnJheSBvZiB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZXNcbiAqL1xuLy8gQnkgTWFyayBNaWxsZXJcbi8vIGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPXN0cmF3bWFuOmNvbmN1cnJlbmN5JnJldj0xMzA4Nzc2NTIxI2FsbGZ1bGZpbGxlZFxuUS5hbGwgPSBhbGw7XG5mdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcbiAgICByZXR1cm4gd2hlbihwcm9taXNlcywgZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgICAgIHZhciBwZW5kaW5nQ291bnQgPSAwO1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgICAgICBhcnJheV9yZWR1Y2UocHJvbWlzZXMsIGZ1bmN0aW9uICh1bmRlZmluZWQsIHByb21pc2UsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgc25hcHNob3Q7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaXNQcm9taXNlKHByb21pc2UpICYmXG4gICAgICAgICAgICAgICAgKHNuYXBzaG90ID0gcHJvbWlzZS5pbnNwZWN0KCkpLnN0YXRlID09PSBcImZ1bGZpbGxlZFwiXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlc1tpbmRleF0gPSBzbmFwc2hvdC52YWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgKytwZW5kaW5nQ291bnQ7XG4gICAgICAgICAgICAgICAgd2hlbihcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlc1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgtLXBlbmRpbmdDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocHJvbWlzZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChwcm9ncmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQubm90aWZ5KHsgaW5kZXg6IGluZGV4LCB2YWx1ZTogcHJvZ3Jlc3MgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB2b2lkIDApO1xuICAgICAgICBpZiAocGVuZGluZ0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHByb21pc2VzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9KTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuYWxsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBhbGwodGhpcyk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGZpcnN0IHJlc29sdmVkIHByb21pc2Ugb2YgYW4gYXJyYXkuIFByaW9yIHJlamVjdGVkIHByb21pc2VzIGFyZVxuICogaWdub3JlZC4gIFJlamVjdHMgb25seSBpZiBhbGwgcHJvbWlzZXMgYXJlIHJlamVjdGVkLlxuICogQHBhcmFtIHtBcnJheSp9IGFuIGFycmF5IGNvbnRhaW5pbmcgdmFsdWVzIG9yIHByb21pc2VzIGZvciB2YWx1ZXNcbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmdWxmaWxsZWQgd2l0aCB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IHJlc29sdmVkIHByb21pc2UsXG4gKiBvciBhIHJlamVjdGVkIHByb21pc2UgaWYgYWxsIHByb21pc2VzIGFyZSByZWplY3RlZC5cbiAqL1xuUS5hbnkgPSBhbnk7XG5cbmZ1bmN0aW9uIGFueShwcm9taXNlcykge1xuICAgIGlmIChwcm9taXNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFEucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHZhciBkZWZlcnJlZCA9IFEuZGVmZXIoKTtcbiAgICB2YXIgcGVuZGluZ0NvdW50ID0gMDtcbiAgICBhcnJheV9yZWR1Y2UocHJvbWlzZXMsIGZ1bmN0aW9uIChwcmV2LCBjdXJyZW50LCBpbmRleCkge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHByb21pc2VzW2luZGV4XTtcblxuICAgICAgICBwZW5kaW5nQ291bnQrKztcblxuICAgICAgICB3aGVuKHByb21pc2UsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBvblByb2dyZXNzKTtcbiAgICAgICAgZnVuY3Rpb24gb25GdWxmaWxsZWQocmVzdWx0KSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gb25SZWplY3RlZChlcnIpIHtcbiAgICAgICAgICAgIHBlbmRpbmdDb3VudC0tO1xuICAgICAgICAgICAgaWYgKHBlbmRpbmdDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGVyci5tZXNzYWdlID0gKFwiUSBjYW4ndCBnZXQgZnVsZmlsbG1lbnQgdmFsdWUgZnJvbSBhbnkgcHJvbWlzZSwgYWxsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJwcm9taXNlcyB3ZXJlIHJlamVjdGVkLiBMYXN0IGVycm9yIG1lc3NhZ2U6IFwiICsgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG9uUHJvZ3Jlc3MocHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9ncmVzc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB1bmRlZmluZWQpO1xuXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cblByb21pc2UucHJvdG90eXBlLmFueSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYW55KHRoaXMpO1xufTtcblxuLyoqXG4gKiBXYWl0cyBmb3IgYWxsIHByb21pc2VzIHRvIGJlIHNldHRsZWQsIGVpdGhlciBmdWxmaWxsZWQgb3JcbiAqIHJlamVjdGVkLiAgVGhpcyBpcyBkaXN0aW5jdCBmcm9tIGBhbGxgIHNpbmNlIHRoYXQgd291bGQgc3RvcFxuICogd2FpdGluZyBhdCB0aGUgZmlyc3QgcmVqZWN0aW9uLiAgVGhlIHByb21pc2UgcmV0dXJuZWQgYnlcbiAqIGBhbGxSZXNvbHZlZGAgd2lsbCBuZXZlciBiZSByZWplY3RlZC5cbiAqIEBwYXJhbSBwcm9taXNlcyBhIHByb21pc2UgZm9yIGFuIGFycmF5IChvciBhbiBhcnJheSkgb2YgcHJvbWlzZXNcbiAqIChvciB2YWx1ZXMpXG4gKiBAcmV0dXJuIGEgcHJvbWlzZSBmb3IgYW4gYXJyYXkgb2YgcHJvbWlzZXNcbiAqL1xuUS5hbGxSZXNvbHZlZCA9IGRlcHJlY2F0ZShhbGxSZXNvbHZlZCwgXCJhbGxSZXNvbHZlZFwiLCBcImFsbFNldHRsZWRcIik7XG5mdW5jdGlvbiBhbGxSZXNvbHZlZChwcm9taXNlcykge1xuICAgIHJldHVybiB3aGVuKHByb21pc2VzLCBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICAgICAgcHJvbWlzZXMgPSBhcnJheV9tYXAocHJvbWlzZXMsIFEpO1xuICAgICAgICByZXR1cm4gd2hlbihhbGwoYXJyYXlfbWFwKHByb21pc2VzLCBmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHdoZW4ocHJvbWlzZSwgbm9vcCwgbm9vcCk7XG4gICAgICAgIH0pKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2VzO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuYWxsUmVzb2x2ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFsbFJlc29sdmVkKHRoaXMpO1xufTtcblxuLyoqXG4gKiBAc2VlIFByb21pc2UjYWxsU2V0dGxlZFxuICovXG5RLmFsbFNldHRsZWQgPSBhbGxTZXR0bGVkO1xuZnVuY3Rpb24gYWxsU2V0dGxlZChwcm9taXNlcykge1xuICAgIHJldHVybiBRKHByb21pc2VzKS5hbGxTZXR0bGVkKCk7XG59XG5cbi8qKlxuICogVHVybnMgYW4gYXJyYXkgb2YgcHJvbWlzZXMgaW50byBhIHByb21pc2UgZm9yIGFuIGFycmF5IG9mIHRoZWlyIHN0YXRlcyAoYXNcbiAqIHJldHVybmVkIGJ5IGBpbnNwZWN0YCkgd2hlbiB0aGV5IGhhdmUgYWxsIHNldHRsZWQuXG4gKiBAcGFyYW0ge0FycmF5W0FueSpdfSB2YWx1ZXMgYW4gYXJyYXkgKG9yIHByb21pc2UgZm9yIGFuIGFycmF5KSBvZiB2YWx1ZXMgKG9yXG4gKiBwcm9taXNlcyBmb3IgdmFsdWVzKVxuICogQHJldHVybnMge0FycmF5W1N0YXRlXX0gYW4gYXJyYXkgb2Ygc3RhdGVzIGZvciB0aGUgcmVzcGVjdGl2ZSB2YWx1ZXMuXG4gKi9cblByb21pc2UucHJvdG90eXBlLmFsbFNldHRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICAgICAgcmV0dXJuIGFsbChhcnJheV9tYXAocHJvbWlzZXMsIGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgICAgICAgICBwcm9taXNlID0gUShwcm9taXNlKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlZ2FyZGxlc3MoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuaW5zcGVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihyZWdhcmRsZXNzLCByZWdhcmRsZXNzKTtcbiAgICAgICAgfSkpO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBDYXB0dXJlcyB0aGUgZmFpbHVyZSBvZiBhIHByb21pc2UsIGdpdmluZyBhbiBvcG9ydHVuaXR5IHRvIHJlY292ZXJcbiAqIHdpdGggYSBjYWxsYmFjay4gIElmIHRoZSBnaXZlbiBwcm9taXNlIGlzIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkXG4gKiBwcm9taXNlIGlzIGZ1bGZpbGxlZC5cbiAqIEBwYXJhbSB7QW55Kn0gcHJvbWlzZSBmb3Igc29tZXRoaW5nXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayB0byBmdWxmaWxsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlmIHRoZVxuICogZ2l2ZW4gcHJvbWlzZSBpcyByZWplY3RlZFxuICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBjYWxsYmFja1xuICovXG5RLmZhaWwgPSAvLyBYWFggbGVnYWN5XG5RW1wiY2F0Y2hcIl0gPSBmdW5jdGlvbiAob2JqZWN0LCByZWplY3RlZCkge1xuICAgIHJldHVybiBRKG9iamVjdCkudGhlbih2b2lkIDAsIHJlamVjdGVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmZhaWwgPSAvLyBYWFggbGVnYWN5XG5Qcm9taXNlLnByb3RvdHlwZVtcImNhdGNoXCJdID0gZnVuY3Rpb24gKHJlamVjdGVkKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbih2b2lkIDAsIHJlamVjdGVkKTtcbn07XG5cbi8qKlxuICogQXR0YWNoZXMgYSBsaXN0ZW5lciB0aGF0IGNhbiByZXNwb25kIHRvIHByb2dyZXNzIG5vdGlmaWNhdGlvbnMgZnJvbSBhXG4gKiBwcm9taXNlJ3Mgb3JpZ2luYXRpbmcgZGVmZXJyZWQuIFRoaXMgbGlzdGVuZXIgcmVjZWl2ZXMgdGhlIGV4YWN0IGFyZ3VtZW50c1xuICogcGFzc2VkIHRvIGBgZGVmZXJyZWQubm90aWZ5YGAuXG4gKiBAcGFyYW0ge0FueSp9IHByb21pc2UgZm9yIHNvbWV0aGluZ1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgdG8gcmVjZWl2ZSBhbnkgcHJvZ3Jlc3Mgbm90aWZpY2F0aW9uc1xuICogQHJldHVybnMgdGhlIGdpdmVuIHByb21pc2UsIHVuY2hhbmdlZFxuICovXG5RLnByb2dyZXNzID0gcHJvZ3Jlc3M7XG5mdW5jdGlvbiBwcm9ncmVzcyhvYmplY3QsIHByb2dyZXNzZWQpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLnRoZW4odm9pZCAwLCB2b2lkIDAsIHByb2dyZXNzZWQpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5wcm9ncmVzcyA9IGZ1bmN0aW9uIChwcm9ncmVzc2VkKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbih2b2lkIDAsIHZvaWQgMCwgcHJvZ3Jlc3NlZCk7XG59O1xuXG4vKipcbiAqIFByb3ZpZGVzIGFuIG9wcG9ydHVuaXR5IHRvIG9ic2VydmUgdGhlIHNldHRsaW5nIG9mIGEgcHJvbWlzZSxcbiAqIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGUgcHJvbWlzZSBpcyBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuICBGb3J3YXJkc1xuICogdGhlIHJlc29sdXRpb24gdG8gdGhlIHJldHVybmVkIHByb21pc2Ugd2hlbiB0aGUgY2FsbGJhY2sgaXMgZG9uZS5cbiAqIFRoZSBjYWxsYmFjayBjYW4gcmV0dXJuIGEgcHJvbWlzZSB0byBkZWZlciBjb21wbGV0aW9uLlxuICogQHBhcmFtIHtBbnkqfSBwcm9taXNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayB0byBvYnNlcnZlIHRoZSByZXNvbHV0aW9uIG9mIHRoZSBnaXZlblxuICogcHJvbWlzZSwgdGFrZXMgbm8gYXJndW1lbnRzLlxuICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmVzb2x1dGlvbiBvZiB0aGUgZ2l2ZW4gcHJvbWlzZSB3aGVuXG4gKiBgYGZpbmBgIGlzIGRvbmUuXG4gKi9cblEuZmluID0gLy8gWFhYIGxlZ2FjeVxuUVtcImZpbmFsbHlcIl0gPSBmdW5jdGlvbiAob2JqZWN0LCBjYWxsYmFjaykge1xuICAgIHJldHVybiBRKG9iamVjdClbXCJmaW5hbGx5XCJdKGNhbGxiYWNrKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmZpbiA9IC8vIFhYWCBsZWdhY3lcblByb21pc2UucHJvdG90eXBlW1wiZmluYWxseVwiXSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrLmFwcGx5ICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUSBjYW4ndCBhcHBseSBmaW5hbGx5IGNhbGxiYWNrXCIpO1xuICAgIH1cbiAgICBjYWxsYmFjayA9IFEoY2FsbGJhY2spO1xuICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5mY2FsbCgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIC8vIFRPRE8gYXR0ZW1wdCB0byByZWN5Y2xlIHRoZSByZWplY3Rpb24gd2l0aCBcInRoaXNcIi5cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmZjYWxsKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBUZXJtaW5hdGVzIGEgY2hhaW4gb2YgcHJvbWlzZXMsIGZvcmNpbmcgcmVqZWN0aW9ucyB0byBiZVxuICogdGhyb3duIGFzIGV4Y2VwdGlvbnMuXG4gKiBAcGFyYW0ge0FueSp9IHByb21pc2UgYXQgdGhlIGVuZCBvZiBhIGNoYWluIG9mIHByb21pc2VzXG4gKiBAcmV0dXJucyBub3RoaW5nXG4gKi9cblEuZG9uZSA9IGZ1bmN0aW9uIChvYmplY3QsIGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIHByb2dyZXNzKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kb25lKGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIHByb2dyZXNzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRvbmUgPSBmdW5jdGlvbiAoZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3MpIHtcbiAgICB2YXIgb25VbmhhbmRsZWRFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAvLyBmb3J3YXJkIHRvIGEgZnV0dXJlIHR1cm4gc28gdGhhdCBgYHdoZW5gYFxuICAgICAgICAvLyBkb2VzIG5vdCBjYXRjaCBpdCBhbmQgdHVybiBpdCBpbnRvIGEgcmVqZWN0aW9uLlxuICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG1ha2VTdGFja1RyYWNlTG9uZyhlcnJvciwgcHJvbWlzZSk7XG4gICAgICAgICAgICBpZiAoUS5vbmVycm9yKSB7XG4gICAgICAgICAgICAgICAgUS5vbmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBBdm9pZCB1bm5lY2Vzc2FyeSBgbmV4dFRpY2tgaW5nIHZpYSBhbiB1bm5lY2Vzc2FyeSBgd2hlbmAuXG4gICAgdmFyIHByb21pc2UgPSBmdWxmaWxsZWQgfHwgcmVqZWN0ZWQgfHwgcHJvZ3Jlc3MgP1xuICAgICAgICB0aGlzLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3MpIDpcbiAgICAgICAgdGhpcztcblxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJiBwcm9jZXNzICYmIHByb2Nlc3MuZG9tYWluKSB7XG4gICAgICAgIG9uVW5oYW5kbGVkRXJyb3IgPSBwcm9jZXNzLmRvbWFpbi5iaW5kKG9uVW5oYW5kbGVkRXJyb3IpO1xuICAgIH1cblxuICAgIHByb21pc2UudGhlbih2b2lkIDAsIG9uVW5oYW5kbGVkRXJyb3IpO1xufTtcblxuLyoqXG4gKiBDYXVzZXMgYSBwcm9taXNlIHRvIGJlIHJlamVjdGVkIGlmIGl0IGRvZXMgbm90IGdldCBmdWxmaWxsZWQgYmVmb3JlXG4gKiBzb21lIG1pbGxpc2Vjb25kcyB0aW1lIG91dC5cbiAqIEBwYXJhbSB7QW55Kn0gcHJvbWlzZVxuICogQHBhcmFtIHtOdW1iZXJ9IG1pbGxpc2Vjb25kcyB0aW1lb3V0XG4gKiBAcGFyYW0ge0FueSp9IGN1c3RvbSBlcnJvciBtZXNzYWdlIG9yIEVycm9yIG9iamVjdCAob3B0aW9uYWwpXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSByZXNvbHV0aW9uIG9mIHRoZSBnaXZlbiBwcm9taXNlIGlmIGl0IGlzXG4gKiBmdWxmaWxsZWQgYmVmb3JlIHRoZSB0aW1lb3V0LCBvdGhlcndpc2UgcmVqZWN0ZWQuXG4gKi9cblEudGltZW91dCA9IGZ1bmN0aW9uIChvYmplY3QsIG1zLCBlcnJvcikge1xuICAgIHJldHVybiBRKG9iamVjdCkudGltZW91dChtcywgZXJyb3IpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGltZW91dCA9IGZ1bmN0aW9uIChtcywgZXJyb3IpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIHZhciB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFlcnJvciB8fCBcInN0cmluZ1wiID09PSB0eXBlb2YgZXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9yID0gbmV3IEVycm9yKGVycm9yIHx8IFwiVGltZWQgb3V0IGFmdGVyIFwiICsgbXMgKyBcIiBtc1wiKTtcbiAgICAgICAgICAgIGVycm9yLmNvZGUgPSBcIkVUSU1FRE9VVFwiO1xuICAgICAgICB9XG4gICAgICAgIGRlZmVycmVkLnJlamVjdChlcnJvcik7XG4gICAgfSwgbXMpO1xuXG4gICAgdGhpcy50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKGV4Y2VwdGlvbikge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgfSwgZGVmZXJyZWQubm90aWZ5KTtcblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIGdpdmVuIHZhbHVlIChvciBwcm9taXNlZCB2YWx1ZSksIHNvbWVcbiAqIG1pbGxpc2Vjb25kcyBhZnRlciBpdCByZXNvbHZlZC4gUGFzc2VzIHJlamVjdGlvbnMgaW1tZWRpYXRlbHkuXG4gKiBAcGFyYW0ge0FueSp9IHByb21pc2VcbiAqIEBwYXJhbSB7TnVtYmVyfSBtaWxsaXNlY29uZHNcbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHJlc29sdXRpb24gb2YgdGhlIGdpdmVuIHByb21pc2UgYWZ0ZXIgbWlsbGlzZWNvbmRzXG4gKiB0aW1lIGhhcyBlbGFwc2VkIHNpbmNlIHRoZSByZXNvbHV0aW9uIG9mIHRoZSBnaXZlbiBwcm9taXNlLlxuICogSWYgdGhlIGdpdmVuIHByb21pc2UgcmVqZWN0cywgdGhhdCBpcyBwYXNzZWQgaW1tZWRpYXRlbHkuXG4gKi9cblEuZGVsYXkgPSBmdW5jdGlvbiAob2JqZWN0LCB0aW1lb3V0KSB7XG4gICAgaWYgKHRpbWVvdXQgPT09IHZvaWQgMCkge1xuICAgICAgICB0aW1lb3V0ID0gb2JqZWN0O1xuICAgICAgICBvYmplY3QgPSB2b2lkIDA7XG4gICAgfVxuICAgIHJldHVybiBRKG9iamVjdCkuZGVsYXkodGltZW91dCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5kZWxheSA9IGZ1bmN0aW9uICh0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBQYXNzZXMgYSBjb250aW51YXRpb24gdG8gYSBOb2RlIGZ1bmN0aW9uLCB3aGljaCBpcyBjYWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAqIGFyZ3VtZW50cyBwcm92aWRlZCBhcyBhbiBhcnJheSwgYW5kIHJldHVybnMgYSBwcm9taXNlLlxuICpcbiAqICAgICAgUS5uZmFwcGx5KEZTLnJlYWRGaWxlLCBbX19maWxlbmFtZV0pXG4gKiAgICAgIC50aGVuKGZ1bmN0aW9uIChjb250ZW50KSB7XG4gKiAgICAgIH0pXG4gKlxuICovXG5RLm5mYXBwbHkgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFyZ3MpIHtcbiAgICByZXR1cm4gUShjYWxsYmFjaykubmZhcHBseShhcmdzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm5mYXBwbHkgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgdmFyIG5vZGVBcmdzID0gYXJyYXlfc2xpY2UoYXJncyk7XG4gICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgIHRoaXMuZmFwcGx5KG5vZGVBcmdzKS5mYWlsKGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG4vKipcbiAqIFBhc3NlcyBhIGNvbnRpbnVhdGlvbiB0byBhIE5vZGUgZnVuY3Rpb24sIHdoaWNoIGlzIGNhbGxlZCB3aXRoIHRoZSBnaXZlblxuICogYXJndW1lbnRzIHByb3ZpZGVkIGluZGl2aWR1YWxseSwgYW5kIHJldHVybnMgYSBwcm9taXNlLlxuICogQGV4YW1wbGVcbiAqIFEubmZjYWxsKEZTLnJlYWRGaWxlLCBfX2ZpbGVuYW1lKVxuICogLnRoZW4oZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAqIH0pXG4gKlxuICovXG5RLm5mY2FsbCA9IGZ1bmN0aW9uIChjYWxsYmFjayAvKi4uLmFyZ3MqLykge1xuICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAxKTtcbiAgICByZXR1cm4gUShjYWxsYmFjaykubmZhcHBseShhcmdzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm5mY2FsbCA9IGZ1bmN0aW9uICgvKi4uLmFyZ3MqLykge1xuICAgIHZhciBub2RlQXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cyk7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgdGhpcy5mYXBwbHkobm9kZUFyZ3MpLmZhaWwoZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn07XG5cbi8qKlxuICogV3JhcHMgYSBOb2RlSlMgY29udGludWF0aW9uIHBhc3NpbmcgZnVuY3Rpb24gYW5kIHJldHVybnMgYW4gZXF1aXZhbGVudFxuICogdmVyc2lvbiB0aGF0IHJldHVybnMgYSBwcm9taXNlLlxuICogQGV4YW1wbGVcbiAqIFEubmZiaW5kKEZTLnJlYWRGaWxlLCBfX2ZpbGVuYW1lKShcInV0Zi04XCIpXG4gKiAudGhlbihjb25zb2xlLmxvZylcbiAqIC5kb25lKClcbiAqL1xuUS5uZmJpbmQgPVxuUS5kZW5vZGVpZnkgPSBmdW5jdGlvbiAoY2FsbGJhY2sgLyouLi5hcmdzKi8pIHtcbiAgICBpZiAoY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJRIGNhbid0IHdyYXAgYW4gdW5kZWZpbmVkIGZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgICB2YXIgYmFzZUFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDEpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBub2RlQXJncyA9IGJhc2VBcmdzLmNvbmNhdChhcnJheV9zbGljZShhcmd1bWVudHMpKTtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICAgICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgICAgICBRKGNhbGxiYWNrKS5mYXBwbHkobm9kZUFyZ3MpLmZhaWwoZGVmZXJyZWQucmVqZWN0KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm5mYmluZCA9XG5Qcm9taXNlLnByb3RvdHlwZS5kZW5vZGVpZnkgPSBmdW5jdGlvbiAoLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgYXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cyk7XG4gICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgIHJldHVybiBRLmRlbm9kZWlmeS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufTtcblxuUS5uYmluZCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdGhpc3AgLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgYmFzZUFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDIpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBub2RlQXJncyA9IGJhc2VBcmdzLmNvbmNhdChhcnJheV9zbGljZShhcmd1bWVudHMpKTtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICAgICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgICAgICBmdW5jdGlvbiBib3VuZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzcCwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBRKGJvdW5kKS5mYXBwbHkobm9kZUFyZ3MpLmZhaWwoZGVmZXJyZWQucmVqZWN0KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm5iaW5kID0gZnVuY3Rpb24gKC8qdGhpc3AsIC4uLmFyZ3MqLykge1xuICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAwKTtcbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgcmV0dXJuIFEubmJpbmQuYXBwbHkodm9pZCAwLCBhcmdzKTtcbn07XG5cbi8qKlxuICogQ2FsbHMgYSBtZXRob2Qgb2YgYSBOb2RlLXN0eWxlIG9iamVjdCB0aGF0IGFjY2VwdHMgYSBOb2RlLXN0eWxlXG4gKiBjYWxsYmFjayB3aXRoIGEgZ2l2ZW4gYXJyYXkgb2YgYXJndW1lbnRzLCBwbHVzIGEgcHJvdmlkZWQgY2FsbGJhY2suXG4gKiBAcGFyYW0gb2JqZWN0IGFuIG9iamVjdCB0aGF0IGhhcyB0aGUgbmFtZWQgbWV0aG9kXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBtZXRob2Qgb2Ygb2JqZWN0XG4gKiBAcGFyYW0ge0FycmF5fSBhcmdzIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBtZXRob2Q7IHRoZSBjYWxsYmFja1xuICogd2lsbCBiZSBwcm92aWRlZCBieSBRIGFuZCBhcHBlbmRlZCB0byB0aGVzZSBhcmd1bWVudHMuXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSB2YWx1ZSBvciBlcnJvclxuICovXG5RLm5tYXBwbHkgPSAvLyBYWFggQXMgcHJvcG9zZWQgYnkgXCJSZWRzYW5kcm9cIlxuUS5ucG9zdCA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWUsIGFyZ3MpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLm5wb3N0KG5hbWUsIGFyZ3MpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubm1hcHBseSA9IC8vIFhYWCBBcyBwcm9wb3NlZCBieSBcIlJlZHNhbmRyb1wiXG5Qcm9taXNlLnByb3RvdHlwZS5ucG9zdCA9IGZ1bmN0aW9uIChuYW1lLCBhcmdzKSB7XG4gICAgdmFyIG5vZGVBcmdzID0gYXJyYXlfc2xpY2UoYXJncyB8fCBbXSk7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgdGhpcy5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIG5vZGVBcmdzXSkuZmFpbChkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuLyoqXG4gKiBDYWxscyBhIG1ldGhvZCBvZiBhIE5vZGUtc3R5bGUgb2JqZWN0IHRoYXQgYWNjZXB0cyBhIE5vZGUtc3R5bGVcbiAqIGNhbGxiYWNrLCBmb3J3YXJkaW5nIHRoZSBnaXZlbiB2YXJpYWRpYyBhcmd1bWVudHMsIHBsdXMgYSBwcm92aWRlZFxuICogY2FsbGJhY2sgYXJndW1lbnQuXG4gKiBAcGFyYW0gb2JqZWN0IGFuIG9iamVjdCB0aGF0IGhhcyB0aGUgbmFtZWQgbWV0aG9kXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBtZXRob2Qgb2Ygb2JqZWN0XG4gKiBAcGFyYW0gLi4uYXJncyBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgbWV0aG9kOyB0aGUgY2FsbGJhY2sgd2lsbFxuICogYmUgcHJvdmlkZWQgYnkgUSBhbmQgYXBwZW5kZWQgdG8gdGhlc2UgYXJndW1lbnRzLlxuICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgdmFsdWUgb3IgZXJyb3JcbiAqL1xuUS5uc2VuZCA9IC8vIFhYWCBCYXNlZCBvbiBNYXJrIE1pbGxlcidzIHByb3Bvc2VkIFwic2VuZFwiXG5RLm5tY2FsbCA9IC8vIFhYWCBCYXNlZCBvbiBcIlJlZHNhbmRybydzXCIgcHJvcG9zYWxcblEubmludm9rZSA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWUgLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgbm9kZUFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDIpO1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgIFEob2JqZWN0KS5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIG5vZGVBcmdzXSkuZmFpbChkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubnNlbmQgPSAvLyBYWFggQmFzZWQgb24gTWFyayBNaWxsZXIncyBwcm9wb3NlZCBcInNlbmRcIlxuUHJvbWlzZS5wcm90b3R5cGUubm1jYWxsID0gLy8gWFhYIEJhc2VkIG9uIFwiUmVkc2FuZHJvJ3NcIiBwcm9wb3NhbFxuUHJvbWlzZS5wcm90b3R5cGUubmludm9rZSA9IGZ1bmN0aW9uIChuYW1lIC8qLi4uYXJncyovKSB7XG4gICAgdmFyIG5vZGVBcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAxKTtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIG5vZGVBcmdzLnB1c2goZGVmZXJyZWQubWFrZU5vZGVSZXNvbHZlcigpKTtcbiAgICB0aGlzLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgbm9kZUFyZ3NdKS5mYWlsKGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG4vKipcbiAqIElmIGEgZnVuY3Rpb24gd291bGQgbGlrZSB0byBzdXBwb3J0IGJvdGggTm9kZSBjb250aW51YXRpb24tcGFzc2luZy1zdHlsZSBhbmRcbiAqIHByb21pc2UtcmV0dXJuaW5nLXN0eWxlLCBpdCBjYW4gZW5kIGl0cyBpbnRlcm5hbCBwcm9taXNlIGNoYWluIHdpdGhcbiAqIGBub2RlaWZ5KG5vZGViYWNrKWAsIGZvcndhcmRpbmcgdGhlIG9wdGlvbmFsIG5vZGViYWNrIGFyZ3VtZW50LiAgSWYgdGhlIHVzZXJcbiAqIGVsZWN0cyB0byB1c2UgYSBub2RlYmFjaywgdGhlIHJlc3VsdCB3aWxsIGJlIHNlbnQgdGhlcmUuICBJZiB0aGV5IGRvIG5vdFxuICogcGFzcyBhIG5vZGViYWNrLCB0aGV5IHdpbGwgcmVjZWl2ZSB0aGUgcmVzdWx0IHByb21pc2UuXG4gKiBAcGFyYW0gb2JqZWN0IGEgcmVzdWx0IChvciBhIHByb21pc2UgZm9yIGEgcmVzdWx0KVxuICogQHBhcmFtIHtGdW5jdGlvbn0gbm9kZWJhY2sgYSBOb2RlLmpzLXN0eWxlIGNhbGxiYWNrXG4gKiBAcmV0dXJucyBlaXRoZXIgdGhlIHByb21pc2Ugb3Igbm90aGluZ1xuICovXG5RLm5vZGVpZnkgPSBub2RlaWZ5O1xuZnVuY3Rpb24gbm9kZWlmeShvYmplY3QsIG5vZGViYWNrKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5ub2RlaWZ5KG5vZGViYWNrKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUubm9kZWlmeSA9IGZ1bmN0aW9uIChub2RlYmFjaykge1xuICAgIGlmIChub2RlYmFjaykge1xuICAgICAgICB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBub2RlYmFjayhudWxsLCB2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBub2RlYmFjayhlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufTtcblxuUS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUS5ub0NvbmZsaWN0IG9ubHkgd29ya3Mgd2hlbiBRIGlzIHVzZWQgYXMgYSBnbG9iYWxcIik7XG59O1xuXG4vLyBBbGwgY29kZSBiZWZvcmUgdGhpcyBwb2ludCB3aWxsIGJlIGZpbHRlcmVkIGZyb20gc3RhY2sgdHJhY2VzLlxudmFyIHFFbmRpbmdMaW5lID0gY2FwdHVyZUxpbmUoKTtcblxucmV0dXJuIFE7XG5cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ3JlYWN0L2xpYi9SZWFjdERPTScpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEF1dG9Gb2N1c1V0aWxzXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcblxudmFyIGZpbmRET01Ob2RlID0gcmVxdWlyZSgnLi9maW5kRE9NTm9kZScpO1xudmFyIGZvY3VzTm9kZSA9IHJlcXVpcmUoJ2ZianMvbGliL2ZvY3VzTm9kZScpO1xuXG52YXIgTWl4aW4gPSB7XG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuYXV0b0ZvY3VzKSB7XG4gICAgICBmb2N1c05vZGUoZmluZERPTU5vZGUodGhpcykpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIEF1dG9Gb2N1c1V0aWxzID0ge1xuICBNaXhpbjogTWl4aW4sXG5cbiAgZm9jdXNET01Db21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICBmb2N1c05vZGUoUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBBdXRvRm9jdXNVdGlsczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UHJvcGFnYXRvcnMgPSByZXF1aXJlKCcuL0V2ZW50UHJvcGFnYXRvcnMnKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlID0gcmVxdWlyZSgnLi9GYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUnKTtcbnZhciBTeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50Jyk7XG52YXIgU3ludGhldGljSW5wdXRFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljSW5wdXRFdmVudCcpO1xuXG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG52YXIgRU5EX0tFWUNPREVTID0gWzksIDEzLCAyNywgMzJdOyAvLyBUYWIsIFJldHVybiwgRXNjLCBTcGFjZVxudmFyIFNUQVJUX0tFWUNPREUgPSAyMjk7XG5cbnZhciBjYW5Vc2VDb21wb3NpdGlvbkV2ZW50ID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmICdDb21wb3NpdGlvbkV2ZW50JyBpbiB3aW5kb3c7XG5cbnZhciBkb2N1bWVudE1vZGUgPSBudWxsO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiAnZG9jdW1lbnRNb2RlJyBpbiBkb2N1bWVudCkge1xuICBkb2N1bWVudE1vZGUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XG59XG5cbi8vIFdlYmtpdCBvZmZlcnMgYSB2ZXJ5IHVzZWZ1bCBgdGV4dElucHV0YCBldmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvXG4vLyBkaXJlY3RseSByZXByZXNlbnQgYGJlZm9yZUlucHV0YC4gVGhlIElFIGB0ZXh0aW5wdXRgIGV2ZW50IGlzIG5vdCBhc1xuLy8gdXNlZnVsLCBzbyB3ZSBkb24ndCB1c2UgaXQuXG52YXIgY2FuVXNlVGV4dElucHV0RXZlbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ1RleHRFdmVudCcgaW4gd2luZG93ICYmICFkb2N1bWVudE1vZGUgJiYgIWlzUHJlc3RvKCk7XG5cbi8vIEluIElFOSssIHdlIGhhdmUgYWNjZXNzIHRvIGNvbXBvc2l0aW9uIGV2ZW50cywgYnV0IHRoZSBkYXRhIHN1cHBsaWVkXG4vLyBieSB0aGUgbmF0aXZlIGNvbXBvc2l0aW9uZW5kIGV2ZW50IG1heSBiZSBpbmNvcnJlY3QuIEphcGFuZXNlIGlkZW9ncmFwaGljXG4vLyBzcGFjZXMsIGZvciBpbnN0YW5jZSAoXFx1MzAwMCkgYXJlIG5vdCByZWNvcmRlZCBjb3JyZWN0bHkuXG52YXIgdXNlRmFsbGJhY2tDb21wb3NpdGlvbkRhdGEgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgKCFjYW5Vc2VDb21wb3NpdGlvbkV2ZW50IHx8IGRvY3VtZW50TW9kZSAmJiBkb2N1bWVudE1vZGUgPiA4ICYmIGRvY3VtZW50TW9kZSA8PSAxMSk7XG5cbi8qKlxuICogT3BlcmEgPD0gMTIgaW5jbHVkZXMgVGV4dEV2ZW50IGluIHdpbmRvdywgYnV0IGRvZXMgbm90IGZpcmVcbiAqIHRleHQgaW5wdXQgZXZlbnRzLiBSZWx5IG9uIGtleXByZXNzIGluc3RlYWQuXG4gKi9cbmZ1bmN0aW9uIGlzUHJlc3RvKCkge1xuICB2YXIgb3BlcmEgPSB3aW5kb3cub3BlcmE7XG4gIHJldHVybiB0eXBlb2Ygb3BlcmEgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvcGVyYS52ZXJzaW9uID09PSAnZnVuY3Rpb24nICYmIHBhcnNlSW50KG9wZXJhLnZlcnNpb24oKSwgMTApIDw9IDEyO1xufVxuXG52YXIgU1BBQ0VCQVJfQ09ERSA9IDMyO1xudmFyIFNQQUNFQkFSX0NIQVIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFNQQUNFQkFSX0NPREUpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbi8vIEV2ZW50cyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0eSBuYW1lcy5cbnZhciBldmVudFR5cGVzID0ge1xuICBiZWZvcmVJbnB1dDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQmVmb3JlSW5wdXQ6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkJlZm9yZUlucHV0Q2FwdHVyZTogbnVsbCB9KVxuICAgIH0sXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvbkVuZCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlQcmVzcywgdG9wTGV2ZWxUeXBlcy50b3BUZXh0SW5wdXQsIHRvcExldmVsVHlwZXMudG9wUGFzdGVdXG4gIH0sXG4gIGNvbXBvc2l0aW9uRW5kOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db21wb3NpdGlvbkVuZDogbnVsbCB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25FbmRDYXB0dXJlOiBudWxsIH0pXG4gICAgfSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcEJsdXIsIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQsIHRvcExldmVsVHlwZXMudG9wS2V5RG93biwgdG9wTGV2ZWxUeXBlcy50b3BLZXlQcmVzcywgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcCwgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZURvd25dXG4gIH0sXG4gIGNvbXBvc2l0aW9uU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uU3RhcnQ6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uU3RhcnRDYXB0dXJlOiBudWxsIH0pXG4gICAgfSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcEJsdXIsIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25TdGFydCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bl1cbiAgfSxcbiAgY29tcG9zaXRpb25VcGRhdGU6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uVXBkYXRlOiBudWxsIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Db21wb3NpdGlvblVwZGF0ZUNhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvblVwZGF0ZSwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bl1cbiAgfVxufTtcblxuLy8gVHJhY2sgd2hldGhlciB3ZSd2ZSBldmVyIGhhbmRsZWQgYSBrZXlwcmVzcyBvbiB0aGUgc3BhY2Uga2V5LlxudmFyIGhhc1NwYWNlS2V5cHJlc3MgPSBmYWxzZTtcblxuLyoqXG4gKiBSZXR1cm4gd2hldGhlciBhIG5hdGl2ZSBrZXlwcmVzcyBldmVudCBpcyBhc3N1bWVkIHRvIGJlIGEgY29tbWFuZC5cbiAqIFRoaXMgaXMgcmVxdWlyZWQgYmVjYXVzZSBGaXJlZm94IGZpcmVzIGBrZXlwcmVzc2AgZXZlbnRzIGZvciBrZXkgY29tbWFuZHNcbiAqIChjdXQsIGNvcHksIHNlbGVjdC1hbGwsIGV0Yy4pIGV2ZW4gdGhvdWdoIG5vIGNoYXJhY3RlciBpcyBpbnNlcnRlZC5cbiAqL1xuZnVuY3Rpb24gaXNLZXlwcmVzc0NvbW1hbmQobmF0aXZlRXZlbnQpIHtcbiAgcmV0dXJuIChuYXRpdmVFdmVudC5jdHJsS2V5IHx8IG5hdGl2ZUV2ZW50LmFsdEtleSB8fCBuYXRpdmVFdmVudC5tZXRhS2V5KSAmJlxuICAvLyBjdHJsS2V5ICYmIGFsdEtleSBpcyBlcXVpdmFsZW50IHRvIEFsdEdyLCBhbmQgaXMgbm90IGEgY29tbWFuZC5cbiAgIShuYXRpdmVFdmVudC5jdHJsS2V5ICYmIG5hdGl2ZUV2ZW50LmFsdEtleSk7XG59XG5cbi8qKlxuICogVHJhbnNsYXRlIG5hdGl2ZSB0b3AgbGV2ZWwgZXZlbnRzIGludG8gZXZlbnQgdHlwZXMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZVxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRDb21wb3NpdGlvbkV2ZW50VHlwZSh0b3BMZXZlbFR5cGUpIHtcbiAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25TdGFydDpcbiAgICAgIHJldHVybiBldmVudFR5cGVzLmNvbXBvc2l0aW9uU3RhcnQ7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kOlxuICAgICAgcmV0dXJuIGV2ZW50VHlwZXMuY29tcG9zaXRpb25FbmQ7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uVXBkYXRlOlxuICAgICAgcmV0dXJuIGV2ZW50VHlwZXMuY29tcG9zaXRpb25VcGRhdGU7XG4gIH1cbn1cblxuLyoqXG4gKiBEb2VzIG91ciBmYWxsYmFjayBiZXN0LWd1ZXNzIG1vZGVsIHRoaW5rIHRoaXMgZXZlbnQgc2lnbmlmaWVzIHRoYXRcbiAqIGNvbXBvc2l0aW9uIGhhcyBiZWd1bj9cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRmFsbGJhY2tDb21wb3NpdGlvblN0YXJ0KHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duICYmIG5hdGl2ZUV2ZW50LmtleUNvZGUgPT09IFNUQVJUX0tFWUNPREU7XG59XG5cbi8qKlxuICogRG9lcyBvdXIgZmFsbGJhY2sgbW9kZSB0aGluayB0aGF0IHRoaXMgZXZlbnQgaXMgdGhlIGVuZCBvZiBjb21wb3NpdGlvbj9cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSB7XG4gIHN3aXRjaCAodG9wTGV2ZWxUeXBlKSB7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVVwOlxuICAgICAgLy8gQ29tbWFuZCBrZXlzIGluc2VydCBvciBjbGVhciBJTUUgaW5wdXQuXG4gICAgICByZXR1cm4gRU5EX0tFWUNPREVTLmluZGV4T2YobmF0aXZlRXZlbnQua2V5Q29kZSkgIT09IC0xO1xuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duOlxuICAgICAgLy8gRXhwZWN0IElNRSBrZXlDb2RlIG9uIGVhY2gga2V5ZG93bi4gSWYgd2UgZ2V0IGFueSBvdGhlclxuICAgICAgLy8gY29kZSB3ZSBtdXN0IGhhdmUgZXhpdGVkIGVhcmxpZXIuXG4gICAgICByZXR1cm4gbmF0aXZlRXZlbnQua2V5Q29kZSAhPT0gU1RBUlRfS0VZQ09ERTtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3M6XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bjpcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQmx1cjpcbiAgICAgIC8vIEV2ZW50cyBhcmUgbm90IHBvc3NpYmxlIHdpdGhvdXQgY2FuY2VsbGluZyBJTUUuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogR29vZ2xlIElucHV0IFRvb2xzIHByb3ZpZGVzIGNvbXBvc2l0aW9uIGRhdGEgdmlhIGEgQ3VzdG9tRXZlbnQsXG4gKiB3aXRoIHRoZSBgZGF0YWAgcHJvcGVydHkgcG9wdWxhdGVkIGluIHRoZSBgZGV0YWlsYCBvYmplY3QuIElmIHRoaXNcbiAqIGlzIGF2YWlsYWJsZSBvbiB0aGUgZXZlbnQgb2JqZWN0LCB1c2UgaXQuIElmIG5vdCwgdGhpcyBpcyBhIHBsYWluXG4gKiBjb21wb3NpdGlvbiBldmVudCBhbmQgd2UgaGF2ZSBub3RoaW5nIHNwZWNpYWwgdG8gZXh0cmFjdC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldERhdGFGcm9tQ3VzdG9tRXZlbnQobmF0aXZlRXZlbnQpIHtcbiAgdmFyIGRldGFpbCA9IG5hdGl2ZUV2ZW50LmRldGFpbDtcbiAgaWYgKHR5cGVvZiBkZXRhaWwgPT09ICdvYmplY3QnICYmICdkYXRhJyBpbiBkZXRhaWwpIHtcbiAgICByZXR1cm4gZGV0YWlsLmRhdGE7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8vIFRyYWNrIHRoZSBjdXJyZW50IElNRSBjb21wb3NpdGlvbiBmYWxsYmFjayBvYmplY3QsIGlmIGFueS5cbnZhciBjdXJyZW50Q29tcG9zaXRpb24gPSBudWxsO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/b2JqZWN0fSBBIFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RDb21wb3NpdGlvbkV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICB2YXIgZXZlbnRUeXBlO1xuICB2YXIgZmFsbGJhY2tEYXRhO1xuXG4gIGlmIChjYW5Vc2VDb21wb3NpdGlvbkV2ZW50KSB7XG4gICAgZXZlbnRUeXBlID0gZ2V0Q29tcG9zaXRpb25FdmVudFR5cGUodG9wTGV2ZWxUeXBlKTtcbiAgfSBlbHNlIGlmICghY3VycmVudENvbXBvc2l0aW9uKSB7XG4gICAgaWYgKGlzRmFsbGJhY2tDb21wb3NpdGlvblN0YXJ0KHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpKSB7XG4gICAgICBldmVudFR5cGUgPSBldmVudFR5cGVzLmNvbXBvc2l0aW9uU3RhcnQ7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSkge1xuICAgIGV2ZW50VHlwZSA9IGV2ZW50VHlwZXMuY29tcG9zaXRpb25FbmQ7XG4gIH1cblxuICBpZiAoIWV2ZW50VHlwZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKHVzZUZhbGxiYWNrQ29tcG9zaXRpb25EYXRhKSB7XG4gICAgLy8gVGhlIGN1cnJlbnQgY29tcG9zaXRpb24gaXMgc3RvcmVkIHN0YXRpY2FsbHkgYW5kIG11c3Qgbm90IGJlXG4gICAgLy8gb3ZlcndyaXR0ZW4gd2hpbGUgY29tcG9zaXRpb24gY29udGludWVzLlxuICAgIGlmICghY3VycmVudENvbXBvc2l0aW9uICYmIGV2ZW50VHlwZSA9PT0gZXZlbnRUeXBlcy5jb21wb3NpdGlvblN0YXJ0KSB7XG4gICAgICBjdXJyZW50Q29tcG9zaXRpb24gPSBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUuZ2V0UG9vbGVkKHRvcExldmVsVGFyZ2V0KTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gZXZlbnRUeXBlcy5jb21wb3NpdGlvbkVuZCkge1xuICAgICAgaWYgKGN1cnJlbnRDb21wb3NpdGlvbikge1xuICAgICAgICBmYWxsYmFja0RhdGEgPSBjdXJyZW50Q29tcG9zaXRpb24uZ2V0RGF0YSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBldmVudCA9IFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZSwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICBpZiAoZmFsbGJhY2tEYXRhKSB7XG4gICAgLy8gSW5qZWN0IGRhdGEgZ2VuZXJhdGVkIGZyb20gZmFsbGJhY2sgcGF0aCBpbnRvIHRoZSBzeW50aGV0aWMgZXZlbnQuXG4gICAgLy8gVGhpcyBtYXRjaGVzIHRoZSBwcm9wZXJ0eSBvZiBuYXRpdmUgQ29tcG9zaXRpb25FdmVudEludGVyZmFjZS5cbiAgICBldmVudC5kYXRhID0gZmFsbGJhY2tEYXRhO1xuICB9IGVsc2Uge1xuICAgIHZhciBjdXN0b21EYXRhID0gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCk7XG4gICAgaWYgKGN1c3RvbURhdGEgIT09IG51bGwpIHtcbiAgICAgIGV2ZW50LmRhdGEgPSBjdXN0b21EYXRhO1xuICAgIH1cbiAgfVxuXG4gIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudCk7XG4gIHJldHVybiBldmVudDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBUaGUgc3RyaW5nIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBgYmVmb3JlSW5wdXRgIGV2ZW50LlxuICovXG5mdW5jdGlvbiBnZXROYXRpdmVCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQ6XG4gICAgICByZXR1cm4gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCk7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzOlxuICAgICAgLyoqXG4gICAgICAgKiBJZiBuYXRpdmUgYHRleHRJbnB1dGAgZXZlbnRzIGFyZSBhdmFpbGFibGUsIG91ciBnb2FsIGlzIHRvIG1ha2VcbiAgICAgICAqIHVzZSBvZiB0aGVtLiBIb3dldmVyLCB0aGVyZSBpcyBhIHNwZWNpYWwgY2FzZTogdGhlIHNwYWNlYmFyIGtleS5cbiAgICAgICAqIEluIFdlYmtpdCwgcHJldmVudGluZyBkZWZhdWx0IG9uIGEgc3BhY2ViYXIgYHRleHRJbnB1dGAgZXZlbnRcbiAgICAgICAqIGNhbmNlbHMgY2hhcmFjdGVyIGluc2VydGlvbiwgYnV0IGl0ICphbHNvKiBjYXVzZXMgdGhlIGJyb3dzZXJcbiAgICAgICAqIHRvIGZhbGwgYmFjayB0byBpdHMgZGVmYXVsdCBzcGFjZWJhciBiZWhhdmlvciBvZiBzY3JvbGxpbmcgdGhlXG4gICAgICAgKiBwYWdlLlxuICAgICAgICpcbiAgICAgICAqIFRyYWNraW5nIGF0OlxuICAgICAgICogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM1NTEwM1xuICAgICAgICpcbiAgICAgICAqIFRvIGF2b2lkIHRoaXMgaXNzdWUsIHVzZSB0aGUga2V5cHJlc3MgZXZlbnQgYXMgaWYgbm8gYHRleHRJbnB1dGBcbiAgICAgICAqIGV2ZW50IGlzIGF2YWlsYWJsZS5cbiAgICAgICAqL1xuICAgICAgdmFyIHdoaWNoID0gbmF0aXZlRXZlbnQud2hpY2g7XG4gICAgICBpZiAod2hpY2ggIT09IFNQQUNFQkFSX0NPREUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGhhc1NwYWNlS2V5cHJlc3MgPSB0cnVlO1xuICAgICAgcmV0dXJuIFNQQUNFQkFSX0NIQVI7XG5cbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVGV4dElucHV0OlxuICAgICAgLy8gUmVjb3JkIHRoZSBjaGFyYWN0ZXJzIHRvIGJlIGFkZGVkIHRvIHRoZSBET00uXG4gICAgICB2YXIgY2hhcnMgPSBuYXRpdmVFdmVudC5kYXRhO1xuXG4gICAgICAvLyBJZiBpdCdzIGEgc3BhY2ViYXIgY2hhcmFjdGVyLCBhc3N1bWUgdGhhdCB3ZSBoYXZlIGFscmVhZHkgaGFuZGxlZFxuICAgICAgLy8gaXQgYXQgdGhlIGtleXByZXNzIGxldmVsIGFuZCBiYWlsIGltbWVkaWF0ZWx5LiBBbmRyb2lkIENocm9tZVxuICAgICAgLy8gZG9lc24ndCBnaXZlIHVzIGtleWNvZGVzLCBzbyB3ZSBuZWVkIHRvIGJsYWNrbGlzdCBpdC5cbiAgICAgIGlmIChjaGFycyA9PT0gU1BBQ0VCQVJfQ0hBUiAmJiBoYXNTcGFjZUtleXByZXNzKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2hhcnM7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgLy8gRm9yIG90aGVyIG5hdGl2ZSBldmVudCB0eXBlcywgZG8gbm90aGluZy5cbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogRm9yIGJyb3dzZXJzIHRoYXQgZG8gbm90IHByb3ZpZGUgdGhlIGB0ZXh0SW5wdXRgIGV2ZW50LCBleHRyYWN0IHRoZVxuICogYXBwcm9wcmlhdGUgc3RyaW5nIHRvIHVzZSBmb3IgU3ludGhldGljSW5wdXRFdmVudC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBUaGUgZmFsbGJhY2sgc3RyaW5nIGZvciB0aGlzIGBiZWZvcmVJbnB1dGAgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGdldEZhbGxiYWNrQmVmb3JlSW5wdXRDaGFycyh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSB7XG4gIC8vIElmIHdlIGFyZSBjdXJyZW50bHkgY29tcG9zaW5nIChJTUUpIGFuZCB1c2luZyBhIGZhbGxiYWNrIHRvIGRvIHNvLFxuICAvLyB0cnkgdG8gZXh0cmFjdCB0aGUgY29tcG9zZWQgY2hhcmFjdGVycyBmcm9tIHRoZSBmYWxsYmFjayBvYmplY3QuXG4gIGlmIChjdXJyZW50Q29tcG9zaXRpb24pIHtcbiAgICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kIHx8IGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSkge1xuICAgICAgdmFyIGNoYXJzID0gY3VycmVudENvbXBvc2l0aW9uLmdldERhdGEoKTtcbiAgICAgIEZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZS5yZWxlYXNlKGN1cnJlbnRDb21wb3NpdGlvbik7XG4gICAgICBjdXJyZW50Q29tcG9zaXRpb24gPSBudWxsO1xuICAgICAgcmV0dXJuIGNoYXJzO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHN3aXRjaCAodG9wTGV2ZWxUeXBlKSB7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBhc3RlOlxuICAgICAgLy8gSWYgYSBwYXN0ZSBldmVudCBvY2N1cnMgYWZ0ZXIgYSBrZXlwcmVzcywgdGhyb3cgb3V0IHRoZSBpbnB1dFxuICAgICAgLy8gY2hhcnMuIFBhc3RlIGV2ZW50cyBzaG91bGQgbm90IGxlYWQgdG8gQmVmb3JlSW5wdXQgZXZlbnRzLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzOlxuICAgICAgLyoqXG4gICAgICAgKiBBcyBvZiB2MjcsIEZpcmVmb3ggbWF5IGZpcmUga2V5cHJlc3MgZXZlbnRzIGV2ZW4gd2hlbiBubyBjaGFyYWN0ZXJcbiAgICAgICAqIHdpbGwgYmUgaW5zZXJ0ZWQuIEEgZmV3IHBvc3NpYmlsaXRpZXM6XG4gICAgICAgKlxuICAgICAgICogLSBgd2hpY2hgIGlzIGAwYC4gQXJyb3cga2V5cywgRXNjIGtleSwgZXRjLlxuICAgICAgICpcbiAgICAgICAqIC0gYHdoaWNoYCBpcyB0aGUgcHJlc3NlZCBrZXkgY29kZSwgYnV0IG5vIGNoYXIgaXMgYXZhaWxhYmxlLlxuICAgICAgICogICBFeDogJ0FsdEdyICsgZGAgaW4gUG9saXNoLiBUaGVyZSBpcyBubyBtb2RpZmllZCBjaGFyYWN0ZXIgZm9yXG4gICAgICAgKiAgIHRoaXMga2V5IGNvbWJpbmF0aW9uIGFuZCBubyBjaGFyYWN0ZXIgaXMgaW5zZXJ0ZWQgaW50byB0aGVcbiAgICAgICAqICAgZG9jdW1lbnQsIGJ1dCBGRiBmaXJlcyB0aGUga2V5cHJlc3MgZm9yIGNoYXIgY29kZSBgMTAwYCBhbnl3YXkuXG4gICAgICAgKiAgIE5vIGBpbnB1dGAgZXZlbnQgd2lsbCBvY2N1ci5cbiAgICAgICAqXG4gICAgICAgKiAtIGB3aGljaGAgaXMgdGhlIHByZXNzZWQga2V5IGNvZGUsIGJ1dCBhIGNvbW1hbmQgY29tYmluYXRpb24gaXNcbiAgICAgICAqICAgYmVpbmcgdXNlZC4gRXg6IGBDbWQrQ2AuIE5vIGNoYXJhY3RlciBpcyBpbnNlcnRlZCwgYW5kIG5vXG4gICAgICAgKiAgIGBpbnB1dGAgZXZlbnQgd2lsbCBvY2N1ci5cbiAgICAgICAqL1xuICAgICAgaWYgKG5hdGl2ZUV2ZW50LndoaWNoICYmICFpc0tleXByZXNzQ29tbWFuZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUobmF0aXZlRXZlbnQud2hpY2gpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kOlxuICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrQ29tcG9zaXRpb25EYXRhID8gbnVsbCA6IG5hdGl2ZUV2ZW50LmRhdGE7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogRXh0cmFjdCBhIFN5bnRoZXRpY0lucHV0RXZlbnQgZm9yIGBiZWZvcmVJbnB1dGAsIGJhc2VkIG9uIGVpdGhlciBuYXRpdmVcbiAqIGB0ZXh0SW5wdXRgIG9yIGZhbGxiYWNrIGJlaGF2aW9yLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/b2JqZWN0fSBBIFN5bnRoZXRpY0lucHV0RXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RCZWZvcmVJbnB1dEV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICB2YXIgY2hhcnM7XG5cbiAgaWYgKGNhblVzZVRleHRJbnB1dEV2ZW50KSB7XG4gICAgY2hhcnMgPSBnZXROYXRpdmVCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpO1xuICB9IGVsc2Uge1xuICAgIGNoYXJzID0gZ2V0RmFsbGJhY2tCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpO1xuICB9XG5cbiAgLy8gSWYgbm8gY2hhcmFjdGVycyBhcmUgYmVpbmcgaW5zZXJ0ZWQsIG5vIEJlZm9yZUlucHV0IGV2ZW50IHNob3VsZFxuICAvLyBiZSBmaXJlZC5cbiAgaWYgKCFjaGFycykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGV2ZW50ID0gU3ludGhldGljSW5wdXRFdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlcy5iZWZvcmVJbnB1dCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICBldmVudC5kYXRhID0gY2hhcnM7XG4gIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudCk7XG4gIHJldHVybiBldmVudDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gYG9uQmVmb3JlSW5wdXRgIGV2ZW50IHRvIG1hdGNoXG4gKiBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDEzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDEzMTEwNS8jZXZlbnRzLWlucHV0ZXZlbnRzLlxuICpcbiAqIFRoaXMgZXZlbnQgcGx1Z2luIGlzIGJhc2VkIG9uIHRoZSBuYXRpdmUgYHRleHRJbnB1dGAgZXZlbnRcbiAqIGF2YWlsYWJsZSBpbiBDaHJvbWUsIFNhZmFyaSwgT3BlcmEsIGFuZCBJRS4gVGhpcyBldmVudCBmaXJlcyBhZnRlclxuICogYG9uS2V5UHJlc3NgIGFuZCBgb25Db21wb3NpdGlvbkVuZGAsIGJ1dCBiZWZvcmUgYG9uSW5wdXRgLlxuICpcbiAqIGBiZWZvcmVJbnB1dGAgaXMgc3BlYydkIGJ1dCBub3QgaW1wbGVtZW50ZWQgaW4gYW55IGJyb3dzZXJzLCBhbmRcbiAqIHRoZSBgaW5wdXRgIGV2ZW50IGRvZXMgbm90IHByb3ZpZGUgYW55IHVzZWZ1bCBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGhhc1xuICogYWN0dWFsbHkgYmVlbiBhZGRlZCwgY29udHJhcnkgdG8gdGhlIHNwZWMuIFRodXMsIGB0ZXh0SW5wdXRgIGlzIHRoZSBiZXN0XG4gKiBhdmFpbGFibGUgZXZlbnQgdG8gaWRlbnRpZnkgdGhlIGNoYXJhY3RlcnMgdGhhdCBoYXZlIGFjdHVhbGx5IGJlZW4gaW5zZXJ0ZWRcbiAqIGludG8gdGhlIHRhcmdldCBub2RlLlxuICpcbiAqIFRoaXMgcGx1Z2luIGlzIGFsc28gcmVzcG9uc2libGUgZm9yIGVtaXR0aW5nIGBjb21wb3NpdGlvbmAgZXZlbnRzLCB0aHVzXG4gKiBhbGxvd2luZyB1cyB0byBzaGFyZSBjb21wb3NpdGlvbiBmYWxsYmFjayBjb2RlIGZvciBib3RoIGBiZWZvcmVJbnB1dGAgYW5kXG4gKiBgY29tcG9zaXRpb25gIGV2ZW50IHR5cGVzLlxuICovXG52YXIgQmVmb3JlSW5wdXRFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50c31cbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICByZXR1cm4gW2V4dHJhY3RDb21wb3NpdGlvbkV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCksIGV4dHJhY3RCZWZvcmVJbnB1dEV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCldO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJlZm9yZUlucHV0RXZlbnRQbHVnaW47IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIENTU1Byb3BlcnR5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENTUyBwcm9wZXJ0aWVzIHdoaWNoIGFjY2VwdCBudW1iZXJzIGJ1dCBhcmUgbm90IGluIHVuaXRzIG9mIFwicHhcIi5cbiAqL1xudmFyIGlzVW5pdGxlc3NOdW1iZXIgPSB7XG4gIGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiB0cnVlLFxuICBib3hGbGV4OiB0cnVlLFxuICBib3hGbGV4R3JvdXA6IHRydWUsXG4gIGJveE9yZGluYWxHcm91cDogdHJ1ZSxcbiAgY29sdW1uQ291bnQ6IHRydWUsXG4gIGZsZXg6IHRydWUsXG4gIGZsZXhHcm93OiB0cnVlLFxuICBmbGV4UG9zaXRpdmU6IHRydWUsXG4gIGZsZXhTaHJpbms6IHRydWUsXG4gIGZsZXhOZWdhdGl2ZTogdHJ1ZSxcbiAgZmxleE9yZGVyOiB0cnVlLFxuICBmb250V2VpZ2h0OiB0cnVlLFxuICBsaW5lQ2xhbXA6IHRydWUsXG4gIGxpbmVIZWlnaHQ6IHRydWUsXG4gIG9wYWNpdHk6IHRydWUsXG4gIG9yZGVyOiB0cnVlLFxuICBvcnBoYW5zOiB0cnVlLFxuICB0YWJTaXplOiB0cnVlLFxuICB3aWRvd3M6IHRydWUsXG4gIHpJbmRleDogdHJ1ZSxcbiAgem9vbTogdHJ1ZSxcblxuICAvLyBTVkctcmVsYXRlZCBwcm9wZXJ0aWVzXG4gIGZpbGxPcGFjaXR5OiB0cnVlLFxuICBzdG9wT3BhY2l0eTogdHJ1ZSxcbiAgc3Ryb2tlRGFzaG9mZnNldDogdHJ1ZSxcbiAgc3Ryb2tlT3BhY2l0eTogdHJ1ZSxcbiAgc3Ryb2tlV2lkdGg6IHRydWVcbn07XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHByZWZpeCB2ZW5kb3Itc3BlY2lmaWMgcHJlZml4LCBlZzogV2Via2l0XG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IHN0eWxlIG5hbWUsIGVnOiB0cmFuc2l0aW9uRHVyYXRpb25cbiAqIEByZXR1cm4ge3N0cmluZ30gc3R5bGUgbmFtZSBwcmVmaXhlZCB3aXRoIGBwcmVmaXhgLCBwcm9wZXJseSBjYW1lbENhc2VkLCBlZzpcbiAqIFdlYmtpdFRyYW5zaXRpb25EdXJhdGlvblxuICovXG5mdW5jdGlvbiBwcmVmaXhLZXkocHJlZml4LCBrZXkpIHtcbiAgcmV0dXJuIHByZWZpeCArIGtleS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleS5zdWJzdHJpbmcoMSk7XG59XG5cbi8qKlxuICogU3VwcG9ydCBzdHlsZSBuYW1lcyB0aGF0IG1heSBjb21lIHBhc3NlZCBpbiBwcmVmaXhlZCBieSBhZGRpbmcgcGVybXV0YXRpb25zXG4gKiBvZiB2ZW5kb3IgcHJlZml4ZXMuXG4gKi9cbnZhciBwcmVmaXhlcyA9IFsnV2Via2l0JywgJ21zJywgJ01veicsICdPJ107XG5cbi8vIFVzaW5nIE9iamVjdC5rZXlzIGhlcmUsIG9yIGVsc2UgdGhlIHZhbmlsbGEgZm9yLWluIGxvb3AgbWFrZXMgSUU4IGdvIGludG8gYW5cbi8vIGluZmluaXRlIGxvb3AsIGJlY2F1c2UgaXQgaXRlcmF0ZXMgb3ZlciB0aGUgbmV3bHkgYWRkZWQgcHJvcHMgdG9vLlxuT2JqZWN0LmtleXMoaXNVbml0bGVzc051bWJlcikuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICBwcmVmaXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChwcmVmaXgpIHtcbiAgICBpc1VuaXRsZXNzTnVtYmVyW3ByZWZpeEtleShwcmVmaXgsIHByb3ApXSA9IGlzVW5pdGxlc3NOdW1iZXJbcHJvcF07XG4gIH0pO1xufSk7XG5cbi8qKlxuICogTW9zdCBzdHlsZSBwcm9wZXJ0aWVzIGNhbiBiZSB1bnNldCBieSBkb2luZyAuc3R5bGVbcHJvcF0gPSAnJyBidXQgSUU4XG4gKiBkb2Vzbid0IGxpa2UgZG9pbmcgdGhhdCB3aXRoIHNob3J0aGFuZCBwcm9wZXJ0aWVzIHNvIGZvciB0aGUgcHJvcGVydGllcyB0aGF0XG4gKiBJRTggYnJlYWtzIG9uLCB3aGljaCBhcmUgbGlzdGVkIGhlcmUsIHdlIGluc3RlYWQgdW5zZXQgZWFjaCBvZiB0aGVcbiAqIGluZGl2aWR1YWwgcHJvcGVydGllcy4gU2VlIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEyMzg1LlxuICogVGhlIDQtdmFsdWUgJ2Nsb2NrJyBwcm9wZXJ0aWVzIGxpa2UgbWFyZ2luLCBwYWRkaW5nLCBib3JkZXItd2lkdGggc2VlbSB0b1xuICogYmVoYXZlIHdpdGhvdXQgYW55IHByb2JsZW1zLiBDdXJpb3VzbHksIGxpc3Qtc3R5bGUgd29ya3MgdG9vIHdpdGhvdXQgYW55XG4gKiBzcGVjaWFsIHByb2RkaW5nLlxuICovXG52YXIgc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zID0ge1xuICBiYWNrZ3JvdW5kOiB7XG4gICAgYmFja2dyb3VuZEF0dGFjaG1lbnQ6IHRydWUsXG4gICAgYmFja2dyb3VuZENvbG9yOiB0cnVlLFxuICAgIGJhY2tncm91bmRJbWFnZTogdHJ1ZSxcbiAgICBiYWNrZ3JvdW5kUG9zaXRpb25YOiB0cnVlLFxuICAgIGJhY2tncm91bmRQb3NpdGlvblk6IHRydWUsXG4gICAgYmFja2dyb3VuZFJlcGVhdDogdHJ1ZVxuICB9LFxuICBiYWNrZ3JvdW5kUG9zaXRpb246IHtcbiAgICBiYWNrZ3JvdW5kUG9zaXRpb25YOiB0cnVlLFxuICAgIGJhY2tncm91bmRQb3NpdGlvblk6IHRydWVcbiAgfSxcbiAgYm9yZGVyOiB7XG4gICAgYm9yZGVyV2lkdGg6IHRydWUsXG4gICAgYm9yZGVyU3R5bGU6IHRydWUsXG4gICAgYm9yZGVyQ29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyQm90dG9tOiB7XG4gICAgYm9yZGVyQm90dG9tV2lkdGg6IHRydWUsXG4gICAgYm9yZGVyQm90dG9tU3R5bGU6IHRydWUsXG4gICAgYm9yZGVyQm90dG9tQ29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyTGVmdDoge1xuICAgIGJvcmRlckxlZnRXaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJMZWZ0U3R5bGU6IHRydWUsXG4gICAgYm9yZGVyTGVmdENvbG9yOiB0cnVlXG4gIH0sXG4gIGJvcmRlclJpZ2h0OiB7XG4gICAgYm9yZGVyUmlnaHRXaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJSaWdodFN0eWxlOiB0cnVlLFxuICAgIGJvcmRlclJpZ2h0Q29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyVG9wOiB7XG4gICAgYm9yZGVyVG9wV2lkdGg6IHRydWUsXG4gICAgYm9yZGVyVG9wU3R5bGU6IHRydWUsXG4gICAgYm9yZGVyVG9wQ29sb3I6IHRydWVcbiAgfSxcbiAgZm9udDoge1xuICAgIGZvbnRTdHlsZTogdHJ1ZSxcbiAgICBmb250VmFyaWFudDogdHJ1ZSxcbiAgICBmb250V2VpZ2h0OiB0cnVlLFxuICAgIGZvbnRTaXplOiB0cnVlLFxuICAgIGxpbmVIZWlnaHQ6IHRydWUsXG4gICAgZm9udEZhbWlseTogdHJ1ZVxuICB9LFxuICBvdXRsaW5lOiB7XG4gICAgb3V0bGluZVdpZHRoOiB0cnVlLFxuICAgIG91dGxpbmVTdHlsZTogdHJ1ZSxcbiAgICBvdXRsaW5lQ29sb3I6IHRydWVcbiAgfVxufTtcblxudmFyIENTU1Byb3BlcnR5ID0ge1xuICBpc1VuaXRsZXNzTnVtYmVyOiBpc1VuaXRsZXNzTnVtYmVyLFxuICBzaG9ydGhhbmRQcm9wZXJ0eUV4cGFuc2lvbnM6IHNob3J0aGFuZFByb3BlcnR5RXhwYW5zaW9uc1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDU1NQcm9wZXJ0eTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQ1NTUHJvcGVydHlPcGVyYXRpb25zXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENTU1Byb3BlcnR5ID0gcmVxdWlyZSgnLi9DU1NQcm9wZXJ0eScpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xuXG52YXIgY2FtZWxpemVTdHlsZU5hbWUgPSByZXF1aXJlKCdmYmpzL2xpYi9jYW1lbGl6ZVN0eWxlTmFtZScpO1xudmFyIGRhbmdlcm91c1N0eWxlVmFsdWUgPSByZXF1aXJlKCcuL2Rhbmdlcm91c1N0eWxlVmFsdWUnKTtcbnZhciBoeXBoZW5hdGVTdHlsZU5hbWUgPSByZXF1aXJlKCdmYmpzL2xpYi9oeXBoZW5hdGVTdHlsZU5hbWUnKTtcbnZhciBtZW1vaXplU3RyaW5nT25seSA9IHJlcXVpcmUoJ2ZianMvbGliL21lbW9pemVTdHJpbmdPbmx5Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIHByb2Nlc3NTdHlsZU5hbWUgPSBtZW1vaXplU3RyaW5nT25seShmdW5jdGlvbiAoc3R5bGVOYW1lKSB7XG4gIHJldHVybiBoeXBoZW5hdGVTdHlsZU5hbWUoc3R5bGVOYW1lKTtcbn0pO1xuXG52YXIgaGFzU2hvcnRoYW5kUHJvcGVydHlCdWcgPSBmYWxzZTtcbnZhciBzdHlsZUZsb2F0QWNjZXNzb3IgPSAnY3NzRmxvYXQnO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICB2YXIgdGVtcFN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGU7XG4gIHRyeSB7XG4gICAgLy8gSUU4IHRocm93cyBcIkludmFsaWQgYXJndW1lbnQuXCIgaWYgcmVzZXR0aW5nIHNob3J0aGFuZCBzdHlsZSBwcm9wZXJ0aWVzLlxuICAgIHRlbXBTdHlsZS5mb250ID0gJyc7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBoYXNTaG9ydGhhbmRQcm9wZXJ0eUJ1ZyA9IHRydWU7XG4gIH1cbiAgLy8gSUU4IG9ubHkgc3VwcG9ydHMgYWNjZXNzaW5nIGNzc0Zsb2F0IChzdGFuZGFyZCkgYXMgc3R5bGVGbG9hdFxuICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmNzc0Zsb2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdHlsZUZsb2F0QWNjZXNzb3IgPSAnc3R5bGVGbG9hdCc7XG4gIH1cbn1cblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgLy8gJ21zVHJhbnNmb3JtJyBpcyBjb3JyZWN0LCBidXQgdGhlIG90aGVyIHByZWZpeGVzIHNob3VsZCBiZSBjYXBpdGFsaXplZFxuICB2YXIgYmFkVmVuZG9yZWRTdHlsZU5hbWVQYXR0ZXJuID0gL14oPzp3ZWJraXR8bW96fG8pW0EtWl0vO1xuXG4gIC8vIHN0eWxlIHZhbHVlcyBzaG91bGRuJ3QgY29udGFpbiBhIHNlbWljb2xvblxuICB2YXIgYmFkU3R5bGVWYWx1ZVdpdGhTZW1pY29sb25QYXR0ZXJuID0gLztcXHMqJC87XG5cbiAgdmFyIHdhcm5lZFN0eWxlTmFtZXMgPSB7fTtcbiAgdmFyIHdhcm5lZFN0eWxlVmFsdWVzID0ge307XG5cbiAgdmFyIHdhcm5IeXBoZW5hdGVkU3R5bGVOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAod2FybmVkU3R5bGVOYW1lcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiB3YXJuZWRTdHlsZU5hbWVzW25hbWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2FybmVkU3R5bGVOYW1lc1tuYW1lXSA9IHRydWU7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdVbnN1cHBvcnRlZCBzdHlsZSBwcm9wZXJ0eSAlcy4gRGlkIHlvdSBtZWFuICVzPycsIG5hbWUsIGNhbWVsaXplU3R5bGVOYW1lKG5hbWUpKSA6IHVuZGVmaW5lZDtcbiAgfTtcblxuICB2YXIgd2FybkJhZFZlbmRvcmVkU3R5bGVOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAod2FybmVkU3R5bGVOYW1lcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiB3YXJuZWRTdHlsZU5hbWVzW25hbWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2FybmVkU3R5bGVOYW1lc1tuYW1lXSA9IHRydWU7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdVbnN1cHBvcnRlZCB2ZW5kb3ItcHJlZml4ZWQgc3R5bGUgcHJvcGVydHkgJXMuIERpZCB5b3UgbWVhbiAlcz8nLCBuYW1lLCBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKSkgOiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgdmFyIHdhcm5TdHlsZVZhbHVlV2l0aFNlbWljb2xvbiA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmICh3YXJuZWRTdHlsZVZhbHVlcy5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkgJiYgd2FybmVkU3R5bGVWYWx1ZXNbdmFsdWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2FybmVkU3R5bGVWYWx1ZXNbdmFsdWVdID0gdHJ1ZTtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1N0eWxlIHByb3BlcnR5IHZhbHVlcyBzaG91bGRuXFwndCBjb250YWluIGEgc2VtaWNvbG9uLiAnICsgJ1RyeSBcIiVzOiAlc1wiIGluc3RlYWQuJywgbmFtZSwgdmFsdWUucmVwbGFjZShiYWRTdHlsZVZhbHVlV2l0aFNlbWljb2xvblBhdHRlcm4sICcnKSkgOiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICovXG4gIHZhciB3YXJuVmFsaWRTdHlsZSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmIChuYW1lLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICB3YXJuSHlwaGVuYXRlZFN0eWxlTmFtZShuYW1lKTtcbiAgICB9IGVsc2UgaWYgKGJhZFZlbmRvcmVkU3R5bGVOYW1lUGF0dGVybi50ZXN0KG5hbWUpKSB7XG4gICAgICB3YXJuQmFkVmVuZG9yZWRTdHlsZU5hbWUobmFtZSk7XG4gICAgfSBlbHNlIGlmIChiYWRTdHlsZVZhbHVlV2l0aFNlbWljb2xvblBhdHRlcm4udGVzdCh2YWx1ZSkpIHtcbiAgICAgIHdhcm5TdHlsZVZhbHVlV2l0aFNlbWljb2xvbihuYW1lLCB2YWx1ZSk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIE9wZXJhdGlvbnMgZm9yIGRlYWxpbmcgd2l0aCBDU1MgcHJvcGVydGllcy5cbiAqL1xudmFyIENTU1Byb3BlcnR5T3BlcmF0aW9ucyA9IHtcblxuICAvKipcbiAgICogU2VyaWFsaXplcyBhIG1hcHBpbmcgb2Ygc3R5bGUgcHJvcGVydGllcyBmb3IgdXNlIGFzIGlubGluZSBzdHlsZXM6XG4gICAqXG4gICAqICAgPiBjcmVhdGVNYXJrdXBGb3JTdHlsZXMoe3dpZHRoOiAnMjAwcHgnLCBoZWlnaHQ6IDB9KVxuICAgKiAgIFwid2lkdGg6MjAwcHg7aGVpZ2h0OjA7XCJcbiAgICpcbiAgICogVW5kZWZpbmVkIHZhbHVlcyBhcmUgaWdub3JlZCBzbyB0aGF0IGRlY2xhcmF0aXZlIHByb2dyYW1taW5nIGlzIGVhc2llci5cbiAgICogVGhlIHJlc3VsdCBzaG91bGQgYmUgSFRNTC1lc2NhcGVkIGJlZm9yZSBpbnNlcnRpb24gaW50byB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gc3R5bGVzXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JTdHlsZXM6IGZ1bmN0aW9uIChzdHlsZXMpIHtcbiAgICB2YXIgc2VyaWFsaXplZCA9ICcnO1xuICAgIGZvciAodmFyIHN0eWxlTmFtZSBpbiBzdHlsZXMpIHtcbiAgICAgIGlmICghc3R5bGVzLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgc3R5bGVWYWx1ZSA9IHN0eWxlc1tzdHlsZU5hbWVdO1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FyblZhbGlkU3R5bGUoc3R5bGVOYW1lLCBzdHlsZVZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHlsZVZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgc2VyaWFsaXplZCArPSBwcm9jZXNzU3R5bGVOYW1lKHN0eWxlTmFtZSkgKyAnOic7XG4gICAgICAgIHNlcmlhbGl6ZWQgKz0gZGFuZ2Vyb3VzU3R5bGVWYWx1ZShzdHlsZU5hbWUsIHN0eWxlVmFsdWUpICsgJzsnO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VyaWFsaXplZCB8fCBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBmb3IgbXVsdGlwbGUgc3R5bGVzIG9uIGEgbm9kZS4gIElmIGEgdmFsdWUgaXMgc3BlY2lmaWVkIGFzXG4gICAqICcnIChlbXB0eSBzdHJpbmcpLCB0aGUgY29ycmVzcG9uZGluZyBzdHlsZSBwcm9wZXJ0eSB3aWxsIGJlIHVuc2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAgICogQHBhcmFtIHtvYmplY3R9IHN0eWxlc1xuICAgKi9cbiAgc2V0VmFsdWVGb3JTdHlsZXM6IGZ1bmN0aW9uIChub2RlLCBzdHlsZXMpIHtcbiAgICB2YXIgc3R5bGUgPSBub2RlLnN0eWxlO1xuICAgIGZvciAodmFyIHN0eWxlTmFtZSBpbiBzdHlsZXMpIHtcbiAgICAgIGlmICghc3R5bGVzLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuVmFsaWRTdHlsZShzdHlsZU5hbWUsIHN0eWxlc1tzdHlsZU5hbWVdKTtcbiAgICAgIH1cbiAgICAgIHZhciBzdHlsZVZhbHVlID0gZGFuZ2Vyb3VzU3R5bGVWYWx1ZShzdHlsZU5hbWUsIHN0eWxlc1tzdHlsZU5hbWVdKTtcbiAgICAgIGlmIChzdHlsZU5hbWUgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgc3R5bGVOYW1lID0gc3R5bGVGbG9hdEFjY2Vzc29yO1xuICAgICAgfVxuICAgICAgaWYgKHN0eWxlVmFsdWUpIHtcbiAgICAgICAgc3R5bGVbc3R5bGVOYW1lXSA9IHN0eWxlVmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZXhwYW5zaW9uID0gaGFzU2hvcnRoYW5kUHJvcGVydHlCdWcgJiYgQ1NTUHJvcGVydHkuc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zW3N0eWxlTmFtZV07XG4gICAgICAgIGlmIChleHBhbnNpb24pIHtcbiAgICAgICAgICAvLyBTaG9ydGhhbmQgcHJvcGVydHkgdGhhdCBJRTggd29uJ3QgbGlrZSB1bnNldHRpbmcsIHNvIHVuc2V0IGVhY2hcbiAgICAgICAgICAvLyBjb21wb25lbnQgdG8gcGxhY2F0ZSBpdFxuICAgICAgICAgIGZvciAodmFyIGluZGl2aWR1YWxTdHlsZU5hbWUgaW4gZXhwYW5zaW9uKSB7XG4gICAgICAgICAgICBzdHlsZVtpbmRpdmlkdWFsU3R5bGVOYW1lXSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHlsZVtzdHlsZU5hbWVdID0gJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKENTU1Byb3BlcnR5T3BlcmF0aW9ucywgJ0NTU1Byb3BlcnR5T3BlcmF0aW9ucycsIHtcbiAgc2V0VmFsdWVGb3JTdHlsZXM6ICdzZXRWYWx1ZUZvclN0eWxlcydcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENTU1Byb3BlcnR5T3BlcmF0aW9uczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQ2FsbGJhY2tRdWV1ZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCBwc2V1ZG8tZXZlbnQgbW9kdWxlIHRvIGhlbHAga2VlcCB0cmFjayBvZiBjb21wb25lbnRzIHdhaXRpbmcgdG9cbiAqIGJlIG5vdGlmaWVkIHdoZW4gdGhlaXIgRE9NIHJlcHJlc2VudGF0aW9ucyBhcmUgYXZhaWxhYmxlIGZvciB1c2UuXG4gKlxuICogVGhpcyBpbXBsZW1lbnRzIGBQb29sZWRDbGFzc2AsIHNvIHlvdSBzaG91bGQgbmV2ZXIgbmVlZCB0byBpbnN0YW50aWF0ZSB0aGlzLlxuICogSW5zdGVhZCwgdXNlIGBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpYC5cbiAqXG4gKiBAY2xhc3MgUmVhY3RNb3VudFJlYWR5XG4gKiBAaW1wbGVtZW50cyBQb29sZWRDbGFzc1xuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIENhbGxiYWNrUXVldWUoKSB7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IG51bGw7XG4gIHRoaXMuX2NvbnRleHRzID0gbnVsbDtcbn1cblxuYXNzaWduKENhbGxiYWNrUXVldWUucHJvdG90eXBlLCB7XG5cbiAgLyoqXG4gICAqIEVucXVldWVzIGEgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIGBub3RpZnlBbGxgIGlzIGludm9rZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIEludm9rZWQgd2hlbiBgbm90aWZ5QWxsYCBpcyBpbnZva2VkLlxuICAgKiBAcGFyYW0gez9vYmplY3R9IGNvbnRleHQgQ29udGV4dCB0byBjYWxsIGBjYWxsYmFja2Agd2l0aC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlOiBmdW5jdGlvbiAoY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwgW107XG4gICAgdGhpcy5fY29udGV4dHMgPSB0aGlzLl9jb250ZXh0cyB8fCBbXTtcbiAgICB0aGlzLl9jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgdGhpcy5fY29udGV4dHMucHVzaChjb250ZXh0KTtcbiAgfSxcblxuICAvKipcbiAgICogSW52b2tlcyBhbGwgZW5xdWV1ZWQgY2FsbGJhY2tzIGFuZCBjbGVhcnMgdGhlIHF1ZXVlLiBUaGlzIGlzIGludm9rZWQgYWZ0ZXJcbiAgICogdGhlIERPTSByZXByZXNlbnRhdGlvbiBvZiBhIGNvbXBvbmVudCBoYXMgYmVlbiBjcmVhdGVkIG9yIHVwZGF0ZWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbm90aWZ5QWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcztcbiAgICB2YXIgY29udGV4dHMgPSB0aGlzLl9jb250ZXh0cztcbiAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICAhKGNhbGxiYWNrcy5sZW5ndGggPT09IGNvbnRleHRzLmxlbmd0aCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnTWlzbWF0Y2hlZCBsaXN0IG9mIGNvbnRleHRzIGluIGNhbGxiYWNrIHF1ZXVlJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgdGhpcy5fY2FsbGJhY2tzID0gbnVsbDtcbiAgICAgIHRoaXMuX2NvbnRleHRzID0gbnVsbDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNhbGxiYWNrc1tpXS5jYWxsKGNvbnRleHRzW2ldKTtcbiAgICAgIH1cbiAgICAgIGNhbGxiYWNrcy5sZW5ndGggPSAwO1xuICAgICAgY29udGV4dHMubGVuZ3RoID0gMDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0aGUgaW50ZXJuYWwgcXVldWUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9jYWxsYmFja3MgPSBudWxsO1xuICAgIHRoaXMuX2NvbnRleHRzID0gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogYFBvb2xlZENsYXNzYCBsb29rcyBmb3IgdGhpcy5cbiAgICovXG4gIGRlc3RydWN0b3I6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxufSk7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhDYWxsYmFja1F1ZXVlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYWxsYmFja1F1ZXVlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBDaGFuZ2VFdmVudFBsdWdpblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xudmFyIEV2ZW50UHJvcGFnYXRvcnMgPSByZXF1aXJlKCcuL0V2ZW50UHJvcGFnYXRvcnMnKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxudmFyIGdldEV2ZW50VGFyZ2V0ID0gcmVxdWlyZSgnLi9nZXRFdmVudFRhcmdldCcpO1xudmFyIGlzRXZlbnRTdXBwb3J0ZWQgPSByZXF1aXJlKCcuL2lzRXZlbnRTdXBwb3J0ZWQnKTtcbnZhciBpc1RleHRJbnB1dEVsZW1lbnQgPSByZXF1aXJlKCcuL2lzVGV4dElucHV0RWxlbWVudCcpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcblxudmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xuXG52YXIgZXZlbnRUeXBlcyA9IHtcbiAgY2hhbmdlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25DaGFuZ2U6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNoYW5nZUNhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDaGFuZ2UsIHRvcExldmVsVHlwZXMudG9wQ2xpY2ssIHRvcExldmVsVHlwZXMudG9wRm9jdXMsIHRvcExldmVsVHlwZXMudG9wSW5wdXQsIHRvcExldmVsVHlwZXMudG9wS2V5RG93biwgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcCwgdG9wTGV2ZWxUeXBlcy50b3BTZWxlY3Rpb25DaGFuZ2VdXG4gIH1cbn07XG5cbi8qKlxuICogRm9yIElFIHNoaW1zXG4gKi9cbnZhciBhY3RpdmVFbGVtZW50ID0gbnVsbDtcbnZhciBhY3RpdmVFbGVtZW50SUQgPSBudWxsO1xudmFyIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IG51bGw7XG52YXIgYWN0aXZlRWxlbWVudFZhbHVlUHJvcCA9IG51bGw7XG5cbi8qKlxuICogU0VDVElPTjogaGFuZGxlIGBjaGFuZ2VgIGV2ZW50XG4gKi9cbmZ1bmN0aW9uIHNob3VsZFVzZUNoYW5nZUV2ZW50KGVsZW0pIHtcbiAgdmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBub2RlTmFtZSA9PT0gJ3NlbGVjdCcgfHwgbm9kZU5hbWUgPT09ICdpbnB1dCcgJiYgZWxlbS50eXBlID09PSAnZmlsZSc7XG59XG5cbnZhciBkb2VzQ2hhbmdlRXZlbnRCdWJibGUgPSBmYWxzZTtcbmlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcbiAgLy8gU2VlIGBoYW5kbGVDaGFuZ2VgIGNvbW1lbnQgYmVsb3dcbiAgZG9lc0NoYW5nZUV2ZW50QnViYmxlID0gaXNFdmVudFN1cHBvcnRlZCgnY2hhbmdlJykgJiYgKCEoJ2RvY3VtZW50TW9kZScgaW4gZG9jdW1lbnQpIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDgpO1xufVxuXG5mdW5jdGlvbiBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KG5hdGl2ZUV2ZW50KSB7XG4gIHZhciBldmVudCA9IFN5bnRoZXRpY0V2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLmNoYW5nZSwgYWN0aXZlRWxlbWVudElELCBuYXRpdmVFdmVudCwgZ2V0RXZlbnRUYXJnZXQobmF0aXZlRXZlbnQpKTtcbiAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcblxuICAvLyBJZiBjaGFuZ2UgYW5kIHByb3BlcnR5Y2hhbmdlIGJ1YmJsZWQsIHdlJ2QganVzdCBiaW5kIHRvIGl0IGxpa2UgYWxsIHRoZVxuICAvLyBvdGhlciBldmVudHMgYW5kIGhhdmUgaXQgZ28gdGhyb3VnaCBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuIFNpbmNlIGl0XG4gIC8vIGRvZXNuJ3QsIHdlIG1hbnVhbGx5IGxpc3RlbiBmb3IgdGhlIGV2ZW50cyBhbmQgc28gd2UgaGF2ZSB0byBlbnF1ZXVlIGFuZFxuICAvLyBwcm9jZXNzIHRoZSBhYnN0cmFjdCBldmVudCBtYW51YWxseS5cbiAgLy9cbiAgLy8gQmF0Y2hpbmcgaXMgbmVjZXNzYXJ5IGhlcmUgaW4gb3JkZXIgdG8gZW5zdXJlIHRoYXQgYWxsIGV2ZW50IGhhbmRsZXJzIHJ1blxuICAvLyBiZWZvcmUgdGhlIG5leHQgcmVyZW5kZXIgKGluY2x1ZGluZyBldmVudCBoYW5kbGVycyBhdHRhY2hlZCB0byBhbmNlc3RvclxuICAvLyBlbGVtZW50cyBpbnN0ZWFkIG9mIGRpcmVjdGx5IG9uIHRoZSBpbnB1dCkuIFdpdGhvdXQgdGhpcywgY29udHJvbGxlZFxuICAvLyBjb21wb25lbnRzIGRvbid0IHdvcmsgcHJvcGVybHkgaW4gY29uanVuY3Rpb24gd2l0aCBldmVudCBidWJibGluZyBiZWNhdXNlXG4gIC8vIHRoZSBjb21wb25lbnQgaXMgcmVyZW5kZXJlZCBhbmQgdGhlIHZhbHVlIHJldmVydGVkIGJlZm9yZSBhbGwgdGhlIGV2ZW50XG4gIC8vIGhhbmRsZXJzIGNhbiBydW4uIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzcwOC5cbiAgUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzKHJ1bkV2ZW50SW5CYXRjaCwgZXZlbnQpO1xufVxuXG5mdW5jdGlvbiBydW5FdmVudEluQmF0Y2goZXZlbnQpIHtcbiAgRXZlbnRQbHVnaW5IdWIuZW5xdWV1ZUV2ZW50cyhldmVudCk7XG4gIEV2ZW50UGx1Z2luSHViLnByb2Nlc3NFdmVudFF1ZXVlKGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gc3RhcnRXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KHRhcmdldCwgdGFyZ2V0SUQpIHtcbiAgYWN0aXZlRWxlbWVudCA9IHRhcmdldDtcbiAgYWN0aXZlRWxlbWVudElEID0gdGFyZ2V0SUQ7XG4gIGFjdGl2ZUVsZW1lbnQuYXR0YWNoRXZlbnQoJ29uY2hhbmdlJywgbWFudWFsRGlzcGF0Y2hDaGFuZ2VFdmVudCk7XG59XG5cbmZ1bmN0aW9uIHN0b3BXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KCkge1xuICBpZiAoIWFjdGl2ZUVsZW1lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYWN0aXZlRWxlbWVudC5kZXRhY2hFdmVudCgnb25jaGFuZ2UnLCBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KTtcbiAgYWN0aXZlRWxlbWVudCA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG59XG5cbmZ1bmN0aW9uIGdldFRhcmdldElERm9yQ2hhbmdlRXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcENoYW5nZSkge1xuICAgIHJldHVybiB0b3BMZXZlbFRhcmdldElEO1xuICB9XG59XG5mdW5jdGlvbiBoYW5kbGVFdmVudHNGb3JDaGFuZ2VFdmVudElFOCh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKSB7XG4gIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wRm9jdXMpIHtcbiAgICAvLyBzdG9wV2F0Y2hpbmcoKSBzaG91bGQgYmUgYSBub29wIGhlcmUgYnV0IHdlIGNhbGwgaXQganVzdCBpbiBjYXNlIHdlXG4gICAgLy8gbWlzc2VkIGEgYmx1ciBldmVudCBzb21laG93LlxuICAgIHN0b3BXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KCk7XG4gICAgc3RhcnRXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcbiAgfSBlbHNlIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQmx1cikge1xuICAgIHN0b3BXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KCk7XG4gIH1cbn1cblxuLyoqXG4gKiBTRUNUSU9OOiBoYW5kbGUgYGlucHV0YCBldmVudFxuICovXG52YXIgaXNJbnB1dEV2ZW50U3VwcG9ydGVkID0gZmFsc2U7XG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIC8vIElFOSBjbGFpbXMgdG8gc3VwcG9ydCB0aGUgaW5wdXQgZXZlbnQgYnV0IGZhaWxzIHRvIHRyaWdnZXIgaXQgd2hlblxuICAvLyBkZWxldGluZyB0ZXh0LCBzbyB3ZSBpZ25vcmUgaXRzIGlucHV0IGV2ZW50c1xuICBpc0lucHV0RXZlbnRTdXBwb3J0ZWQgPSBpc0V2ZW50U3VwcG9ydGVkKCdpbnB1dCcpICYmICghKCdkb2N1bWVudE1vZGUnIGluIGRvY3VtZW50KSB8fCBkb2N1bWVudC5kb2N1bWVudE1vZGUgPiA5KTtcbn1cblxuLyoqXG4gKiAoRm9yIG9sZCBJRS4pIFJlcGxhY2VtZW50IGdldHRlci9zZXR0ZXIgZm9yIHRoZSBgdmFsdWVgIHByb3BlcnR5IHRoYXQgZ2V0c1xuICogc2V0IG9uIHRoZSBhY3RpdmUgZWxlbWVudC5cbiAqL1xudmFyIG5ld1ZhbHVlUHJvcCA9IHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3AuZ2V0LmNhbGwodGhpcyk7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgIC8vIENhc3QgdG8gYSBzdHJpbmcgc28gd2UgY2FuIGRvIGVxdWFsaXR5IGNoZWNrcy5cbiAgICBhY3RpdmVFbGVtZW50VmFsdWUgPSAnJyArIHZhbDtcbiAgICBhY3RpdmVFbGVtZW50VmFsdWVQcm9wLnNldC5jYWxsKHRoaXMsIHZhbCk7XG4gIH1cbn07XG5cbi8qKlxuICogKEZvciBvbGQgSUUuKSBTdGFydHMgdHJhY2tpbmcgcHJvcGVydHljaGFuZ2UgZXZlbnRzIG9uIHRoZSBwYXNzZWQtaW4gZWxlbWVudFxuICogYW5kIG92ZXJyaWRlIHRoZSB2YWx1ZSBwcm9wZXJ0eSBzbyB0aGF0IHdlIGNhbiBkaXN0aW5ndWlzaCB1c2VyIGV2ZW50cyBmcm9tXG4gKiB2YWx1ZSBjaGFuZ2VzIGluIEpTLlxuICovXG5mdW5jdGlvbiBzdGFydFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UodGFyZ2V0LCB0YXJnZXRJRCkge1xuICBhY3RpdmVFbGVtZW50ID0gdGFyZ2V0O1xuICBhY3RpdmVFbGVtZW50SUQgPSB0YXJnZXRJRDtcbiAgYWN0aXZlRWxlbWVudFZhbHVlID0gdGFyZ2V0LnZhbHVlO1xuICBhY3RpdmVFbGVtZW50VmFsdWVQcm9wID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQuY29uc3RydWN0b3IucHJvdG90eXBlLCAndmFsdWUnKTtcblxuICAvLyBOb3QgZ3VhcmRlZCBpbiBhIGNhbkRlZmluZVByb3BlcnR5IGNoZWNrOiBJRTggc3VwcG9ydHMgZGVmaW5lUHJvcGVydHkgb25seVxuICAvLyBvbiBET00gZWxlbWVudHNcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFjdGl2ZUVsZW1lbnQsICd2YWx1ZScsIG5ld1ZhbHVlUHJvcCk7XG4gIGFjdGl2ZUVsZW1lbnQuYXR0YWNoRXZlbnQoJ29ucHJvcGVydHljaGFuZ2UnLCBoYW5kbGVQcm9wZXJ0eUNoYW5nZSk7XG59XG5cbi8qKlxuICogKEZvciBvbGQgSUUuKSBSZW1vdmVzIHRoZSBldmVudCBsaXN0ZW5lcnMgZnJvbSB0aGUgY3VycmVudGx5LXRyYWNrZWQgZWxlbWVudCxcbiAqIGlmIGFueSBleGlzdHMuXG4gKi9cbmZ1bmN0aW9uIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCkge1xuICBpZiAoIWFjdGl2ZUVsZW1lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBkZWxldGUgcmVzdG9yZXMgdGhlIG9yaWdpbmFsIHByb3BlcnR5IGRlZmluaXRpb25cbiAgZGVsZXRlIGFjdGl2ZUVsZW1lbnQudmFsdWU7XG4gIGFjdGl2ZUVsZW1lbnQuZGV0YWNoRXZlbnQoJ29ucHJvcGVydHljaGFuZ2UnLCBoYW5kbGVQcm9wZXJ0eUNoYW5nZSk7XG5cbiAgYWN0aXZlRWxlbWVudCA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3AgPSBudWxsO1xufVxuXG4vKipcbiAqIChGb3Igb2xkIElFLikgSGFuZGxlcyBhIHByb3BlcnR5Y2hhbmdlIGV2ZW50LCBzZW5kaW5nIGEgYGNoYW5nZWAgZXZlbnQgaWZcbiAqIHRoZSB2YWx1ZSBvZiB0aGUgYWN0aXZlIGVsZW1lbnQgaGFzIGNoYW5nZWQuXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZVByb3BlcnR5Q2hhbmdlKG5hdGl2ZUV2ZW50KSB7XG4gIGlmIChuYXRpdmVFdmVudC5wcm9wZXJ0eU5hbWUgIT09ICd2YWx1ZScpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHZhbHVlID0gbmF0aXZlRXZlbnQuc3JjRWxlbWVudC52YWx1ZTtcbiAgaWYgKHZhbHVlID09PSBhY3RpdmVFbGVtZW50VmFsdWUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYWN0aXZlRWxlbWVudFZhbHVlID0gdmFsdWU7XG5cbiAgbWFudWFsRGlzcGF0Y2hDaGFuZ2VFdmVudChuYXRpdmVFdmVudCk7XG59XG5cbi8qKlxuICogSWYgYSBgY2hhbmdlYCBldmVudCBzaG91bGQgYmUgZmlyZWQsIHJldHVybnMgdGhlIHRhcmdldCdzIElELlxuICovXG5mdW5jdGlvbiBnZXRUYXJnZXRJREZvcklucHV0RXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcElucHV0KSB7XG4gICAgLy8gSW4gbW9kZXJuIGJyb3dzZXJzIChpLmUuLCBub3QgSUU4IG9yIElFOSksIHRoZSBpbnB1dCBldmVudCBpcyBleGFjdGx5XG4gICAgLy8gd2hhdCB3ZSB3YW50IHNvIGZhbGwgdGhyb3VnaCBoZXJlIGFuZCB0cmlnZ2VyIGFuIGFic3RyYWN0IGV2ZW50XG4gICAgcmV0dXJuIHRvcExldmVsVGFyZ2V0SUQ7XG4gIH1cbn1cblxuLy8gRm9yIElFOCBhbmQgSUU5LlxuZnVuY3Rpb24gaGFuZGxlRXZlbnRzRm9ySW5wdXRFdmVudElFKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcbiAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BGb2N1cykge1xuICAgIC8vIEluIElFOCwgd2UgY2FuIGNhcHR1cmUgYWxtb3N0IGFsbCAudmFsdWUgY2hhbmdlcyBieSBhZGRpbmcgYVxuICAgIC8vIHByb3BlcnR5Y2hhbmdlIGhhbmRsZXIgYW5kIGxvb2tpbmcgZm9yIGV2ZW50cyB3aXRoIHByb3BlcnR5TmFtZVxuICAgIC8vIGVxdWFsIHRvICd2YWx1ZSdcbiAgICAvLyBJbiBJRTksIHByb3BlcnR5Y2hhbmdlIGZpcmVzIGZvciBtb3N0IGlucHV0IGV2ZW50cyBidXQgaXMgYnVnZ3kgYW5kXG4gICAgLy8gZG9lc24ndCBmaXJlIHdoZW4gdGV4dCBpcyBkZWxldGVkLCBidXQgY29udmVuaWVudGx5LCBzZWxlY3Rpb25jaGFuZ2VcbiAgICAvLyBhcHBlYXJzIHRvIGZpcmUgaW4gYWxsIG9mIHRoZSByZW1haW5pbmcgY2FzZXMgc28gd2UgY2F0Y2ggdGhvc2UgYW5kXG4gICAgLy8gZm9yd2FyZCB0aGUgZXZlbnQgaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkXG4gICAgLy8gSW4gZWl0aGVyIGNhc2UsIHdlIGRvbid0IHdhbnQgdG8gY2FsbCB0aGUgZXZlbnQgaGFuZGxlciBpZiB0aGUgdmFsdWVcbiAgICAvLyBpcyBjaGFuZ2VkIGZyb20gSlMgc28gd2UgcmVkZWZpbmUgYSBzZXR0ZXIgZm9yIGAudmFsdWVgIHRoYXQgdXBkYXRlc1xuICAgIC8vIG91ciBhY3RpdmVFbGVtZW50VmFsdWUgdmFyaWFibGUsIGFsbG93aW5nIHVzIHRvIGlnbm9yZSB0aG9zZSBjaGFuZ2VzXG4gICAgLy9cbiAgICAvLyBzdG9wV2F0Y2hpbmcoKSBzaG91bGQgYmUgYSBub29wIGhlcmUgYnV0IHdlIGNhbGwgaXQganVzdCBpbiBjYXNlIHdlXG4gICAgLy8gbWlzc2VkIGEgYmx1ciBldmVudCBzb21laG93LlxuICAgIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCk7XG4gICAgc3RhcnRXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcbiAgfSBlbHNlIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQmx1cikge1xuICAgIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCk7XG4gIH1cbn1cblxuLy8gRm9yIElFOCBhbmQgSUU5LlxuZnVuY3Rpb24gZ2V0VGFyZ2V0SURGb3JJbnB1dEV2ZW50SUUodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZSB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wS2V5VXAgfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24pIHtcbiAgICAvLyBPbiB0aGUgc2VsZWN0aW9uY2hhbmdlIGV2ZW50LCB0aGUgdGFyZ2V0IGlzIGp1c3QgZG9jdW1lbnQgd2hpY2ggaXNuJ3RcbiAgICAvLyBoZWxwZnVsIGZvciB1cyBzbyBqdXN0IGNoZWNrIGFjdGl2ZUVsZW1lbnQgaW5zdGVhZC5cbiAgICAvL1xuICAgIC8vIDk5JSBvZiB0aGUgdGltZSwga2V5ZG93biBhbmQga2V5dXAgYXJlbid0IG5lY2Vzc2FyeS4gSUU4IGZhaWxzIHRvIGZpcmVcbiAgICAvLyBwcm9wZXJ0eWNoYW5nZSBvbiB0aGUgZmlyc3QgaW5wdXQgZXZlbnQgYWZ0ZXIgc2V0dGluZyBgdmFsdWVgIGZyb20gYVxuICAgIC8vIHNjcmlwdCBhbmQgZmlyZXMgb25seSBrZXlkb3duLCBrZXlwcmVzcywga2V5dXAuIENhdGNoaW5nIGtleXVwIHVzdWFsbHlcbiAgICAvLyBnZXRzIGl0IGFuZCBjYXRjaGluZyBrZXlkb3duIGxldHMgdXMgZmlyZSBhbiBldmVudCBmb3IgdGhlIGZpcnN0XG4gICAgLy8ga2V5c3Ryb2tlIGlmIHVzZXIgZG9lcyBhIGtleSByZXBlYXQgKGl0J2xsIGJlIGEgbGl0dGxlIGRlbGF5ZWQ6IHJpZ2h0XG4gICAgLy8gYmVmb3JlIHRoZSBzZWNvbmQga2V5c3Ryb2tlKS4gT3RoZXIgaW5wdXQgbWV0aG9kcyAoZS5nLiwgcGFzdGUpIHNlZW0gdG9cbiAgICAvLyBmaXJlIHNlbGVjdGlvbmNoYW5nZSBub3JtYWxseS5cbiAgICBpZiAoYWN0aXZlRWxlbWVudCAmJiBhY3RpdmVFbGVtZW50LnZhbHVlICE9PSBhY3RpdmVFbGVtZW50VmFsdWUpIHtcbiAgICAgIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IGFjdGl2ZUVsZW1lbnQudmFsdWU7XG4gICAgICByZXR1cm4gYWN0aXZlRWxlbWVudElEO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFNFQ1RJT046IGhhbmRsZSBgY2xpY2tgIGV2ZW50XG4gKi9cbmZ1bmN0aW9uIHNob3VsZFVzZUNsaWNrRXZlbnQoZWxlbSkge1xuICAvLyBVc2UgdGhlIGBjbGlja2AgZXZlbnQgdG8gZGV0ZWN0IGNoYW5nZXMgdG8gY2hlY2tib3ggYW5kIHJhZGlvIGlucHV0cy5cbiAgLy8gVGhpcyBhcHByb2FjaCB3b3JrcyBhY3Jvc3MgYWxsIGJyb3dzZXJzLCB3aGVyZWFzIGBjaGFuZ2VgIGRvZXMgbm90IGZpcmVcbiAgLy8gdW50aWwgYGJsdXJgIGluIElFOC5cbiAgcmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnICYmIChlbGVtLnR5cGUgPT09ICdjaGVja2JveCcgfHwgZWxlbS50eXBlID09PSAncmFkaW8nKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGFyZ2V0SURGb3JDbGlja0V2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcbiAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BDbGljaykge1xuICAgIHJldHVybiB0b3BMZXZlbFRhcmdldElEO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBwbHVnaW4gY3JlYXRlcyBhbiBgb25DaGFuZ2VgIGV2ZW50IHRoYXQgbm9ybWFsaXplcyBjaGFuZ2UgZXZlbnRzXG4gKiBhY3Jvc3MgZm9ybSBlbGVtZW50cy4gVGhpcyBldmVudCBmaXJlcyBhdCBhIHRpbWUgd2hlbiBpdCdzIHBvc3NpYmxlIHRvXG4gKiBjaGFuZ2UgdGhlIGVsZW1lbnQncyB2YWx1ZSB3aXRob3V0IHNlZWluZyBhIGZsaWNrZXIuXG4gKlxuICogU3VwcG9ydGVkIGVsZW1lbnRzIGFyZTpcbiAqIC0gaW5wdXQgKHNlZSBgaXNUZXh0SW5wdXRFbGVtZW50YClcbiAqIC0gdGV4dGFyZWFcbiAqIC0gc2VsZWN0XG4gKi9cbnZhciBDaGFuZ2VFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50c31cbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcblxuICAgIHZhciBnZXRUYXJnZXRJREZ1bmMsIGhhbmRsZUV2ZW50RnVuYztcbiAgICBpZiAoc2hvdWxkVXNlQ2hhbmdlRXZlbnQodG9wTGV2ZWxUYXJnZXQpKSB7XG4gICAgICBpZiAoZG9lc0NoYW5nZUV2ZW50QnViYmxlKSB7XG4gICAgICAgIGdldFRhcmdldElERnVuYyA9IGdldFRhcmdldElERm9yQ2hhbmdlRXZlbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoYW5kbGVFdmVudEZ1bmMgPSBoYW5kbGVFdmVudHNGb3JDaGFuZ2VFdmVudElFODtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVGV4dElucHV0RWxlbWVudCh0b3BMZXZlbFRhcmdldCkpIHtcbiAgICAgIGlmIChpc0lucHV0RXZlbnRTdXBwb3J0ZWQpIHtcbiAgICAgICAgZ2V0VGFyZ2V0SURGdW5jID0gZ2V0VGFyZ2V0SURGb3JJbnB1dEV2ZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2V0VGFyZ2V0SURGdW5jID0gZ2V0VGFyZ2V0SURGb3JJbnB1dEV2ZW50SUU7XG4gICAgICAgIGhhbmRsZUV2ZW50RnVuYyA9IGhhbmRsZUV2ZW50c0ZvcklucHV0RXZlbnRJRTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNob3VsZFVzZUNsaWNrRXZlbnQodG9wTGV2ZWxUYXJnZXQpKSB7XG4gICAgICBnZXRUYXJnZXRJREZ1bmMgPSBnZXRUYXJnZXRJREZvckNsaWNrRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGdldFRhcmdldElERnVuYykge1xuICAgICAgdmFyIHRhcmdldElEID0gZ2V0VGFyZ2V0SURGdW5jKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpO1xuICAgICAgaWYgKHRhcmdldElEKSB7XG4gICAgICAgIHZhciBldmVudCA9IFN5bnRoZXRpY0V2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLmNoYW5nZSwgdGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgICAgIGV2ZW50LnR5cGUgPSAnY2hhbmdlJztcbiAgICAgICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcbiAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChoYW5kbGVFdmVudEZ1bmMpIHtcbiAgICAgIGhhbmRsZUV2ZW50RnVuYyh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDaGFuZ2VFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQ2xpZW50UmVhY3RSb290SW5kZXhcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgbmV4dFJlYWN0Um9vdEluZGV4ID0gMDtcblxudmFyIENsaWVudFJlYWN0Um9vdEluZGV4ID0ge1xuICBjcmVhdGVSZWFjdFJvb3RJbmRleDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXh0UmVhY3RSb290SW5kZXgrKztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDbGllbnRSZWFjdFJvb3RJbmRleDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRE9NQ2hpbGRyZW5PcGVyYXRpb25zXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERhbmdlciA9IHJlcXVpcmUoJy4vRGFuZ2VyJyk7XG52YXIgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMgPSByZXF1aXJlKCcuL1JlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzJyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcblxudmFyIHNldElubmVySFRNTCA9IHJlcXVpcmUoJy4vc2V0SW5uZXJIVE1MJyk7XG52YXIgc2V0VGV4dENvbnRlbnQgPSByZXF1aXJlKCcuL3NldFRleHRDb250ZW50Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogSW5zZXJ0cyBgY2hpbGROb2RlYCBhcyBhIGNoaWxkIG9mIGBwYXJlbnROb2RlYCBhdCB0aGUgYGluZGV4YC5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHBhcmVudE5vZGUgUGFyZW50IG5vZGUgaW4gd2hpY2ggdG8gaW5zZXJ0LlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjaGlsZE5vZGUgQ2hpbGQgbm9kZSB0byBpbnNlcnQuXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggYXQgd2hpY2ggdG8gaW5zZXJ0IHRoZSBjaGlsZC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBpbnNlcnRDaGlsZEF0KHBhcmVudE5vZGUsIGNoaWxkTm9kZSwgaW5kZXgpIHtcbiAgLy8gQnkgZXhwbG9pdGluZyBhcnJheXMgcmV0dXJuaW5nIGB1bmRlZmluZWRgIGZvciBhbiB1bmRlZmluZWQgaW5kZXgsIHdlIGNhblxuICAvLyByZWx5IGV4Y2x1c2l2ZWx5IG9uIGBpbnNlcnRCZWZvcmUobm9kZSwgbnVsbClgIGluc3RlYWQgb2YgYWxzbyB1c2luZ1xuICAvLyBgYXBwZW5kQ2hpbGQobm9kZSlgLiBIb3dldmVyLCB1c2luZyBgdW5kZWZpbmVkYCBpcyBub3QgYWxsb3dlZCBieSBhbGxcbiAgLy8gYnJvd3NlcnMgc28gd2UgbXVzdCByZXBsYWNlIGl0IHdpdGggYG51bGxgLlxuXG4gIC8vIGZpeCByZW5kZXIgb3JkZXIgZXJyb3IgaW4gc2FmYXJpXG4gIC8vIElFOCB3aWxsIHRocm93IGVycm9yIHdoZW4gaW5kZXggb3V0IG9mIGxpc3Qgc2l6ZS5cbiAgdmFyIGJlZm9yZUNoaWxkID0gaW5kZXggPj0gcGFyZW50Tm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA/IG51bGwgOiBwYXJlbnROb2RlLmNoaWxkTm9kZXMuaXRlbShpbmRleCk7XG5cbiAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2hpbGROb2RlLCBiZWZvcmVDaGlsZCk7XG59XG5cbi8qKlxuICogT3BlcmF0aW9ucyBmb3IgdXBkYXRpbmcgd2l0aCBET00gY2hpbGRyZW4uXG4gKi9cbnZhciBET01DaGlsZHJlbk9wZXJhdGlvbnMgPSB7XG5cbiAgZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXA6IERhbmdlci5kYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cCxcblxuICB1cGRhdGVUZXh0Q29udGVudDogc2V0VGV4dENvbnRlbnQsXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSBjb21wb25lbnQncyBjaGlsZHJlbiBieSBwcm9jZXNzaW5nIGEgc2VyaWVzIG9mIHVwZGF0ZXMuIFRoZVxuICAgKiB1cGRhdGUgY29uZmlndXJhdGlvbnMgYXJlIGVhY2ggZXhwZWN0ZWQgdG8gaGF2ZSBhIGBwYXJlbnROb2RlYCBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheTxvYmplY3Q+fSB1cGRhdGVzIExpc3Qgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb25zLlxuICAgKiBAcGFyYW0ge2FycmF5PHN0cmluZz59IG1hcmt1cExpc3QgTGlzdCBvZiBtYXJrdXAgc3RyaW5ncy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcm9jZXNzVXBkYXRlczogZnVuY3Rpb24gKHVwZGF0ZXMsIG1hcmt1cExpc3QpIHtcbiAgICB2YXIgdXBkYXRlO1xuICAgIC8vIE1hcHBpbmcgZnJvbSBwYXJlbnQgSURzIHRvIGluaXRpYWwgY2hpbGQgb3JkZXJpbmdzLlxuICAgIHZhciBpbml0aWFsQ2hpbGRyZW4gPSBudWxsO1xuICAgIC8vIExpc3Qgb2YgY2hpbGRyZW4gdGhhdCB3aWxsIGJlIG1vdmVkIG9yIHJlbW92ZWQuXG4gICAgdmFyIHVwZGF0ZWRDaGlsZHJlbiA9IG51bGw7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVwZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHVwZGF0ZSA9IHVwZGF0ZXNbaV07XG4gICAgICBpZiAodXBkYXRlLnR5cGUgPT09IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLk1PVkVfRVhJU1RJTkcgfHwgdXBkYXRlLnR5cGUgPT09IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlJFTU9WRV9OT0RFKSB7XG4gICAgICAgIHZhciB1cGRhdGVkSW5kZXggPSB1cGRhdGUuZnJvbUluZGV4O1xuICAgICAgICB2YXIgdXBkYXRlZENoaWxkID0gdXBkYXRlLnBhcmVudE5vZGUuY2hpbGROb2Rlc1t1cGRhdGVkSW5kZXhdO1xuICAgICAgICB2YXIgcGFyZW50SUQgPSB1cGRhdGUucGFyZW50SUQ7XG5cbiAgICAgICAgIXVwZGF0ZWRDaGlsZCA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwcm9jZXNzVXBkYXRlcygpOiBVbmFibGUgdG8gZmluZCBjaGlsZCAlcyBvZiBlbGVtZW50LiBUaGlzICcgKyAncHJvYmFibHkgbWVhbnMgdGhlIERPTSB3YXMgdW5leHBlY3RlZGx5IG11dGF0ZWQgKGUuZy4sIGJ5IHRoZSAnICsgJ2Jyb3dzZXIpLCB1c3VhbGx5IGR1ZSB0byBmb3JnZXR0aW5nIGEgPHRib2R5PiB3aGVuIHVzaW5nIHRhYmxlcywgJyArICduZXN0aW5nIHRhZ3MgbGlrZSA8Zm9ybT4sIDxwPiwgb3IgPGE+LCBvciB1c2luZyBub24tU1ZHIGVsZW1lbnRzICcgKyAnaW4gYW4gPHN2Zz4gcGFyZW50LiBUcnkgaW5zcGVjdGluZyB0aGUgY2hpbGQgbm9kZXMgb2YgdGhlIGVsZW1lbnQgJyArICd3aXRoIFJlYWN0IElEIGAlc2AuJywgdXBkYXRlZEluZGV4LCBwYXJlbnRJRCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIGluaXRpYWxDaGlsZHJlbiA9IGluaXRpYWxDaGlsZHJlbiB8fCB7fTtcbiAgICAgICAgaW5pdGlhbENoaWxkcmVuW3BhcmVudElEXSA9IGluaXRpYWxDaGlsZHJlbltwYXJlbnRJRF0gfHwgW107XG4gICAgICAgIGluaXRpYWxDaGlsZHJlbltwYXJlbnRJRF1bdXBkYXRlZEluZGV4XSA9IHVwZGF0ZWRDaGlsZDtcblxuICAgICAgICB1cGRhdGVkQ2hpbGRyZW4gPSB1cGRhdGVkQ2hpbGRyZW4gfHwgW107XG4gICAgICAgIHVwZGF0ZWRDaGlsZHJlbi5wdXNoKHVwZGF0ZWRDaGlsZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJlbmRlcmVkTWFya3VwO1xuICAgIC8vIG1hcmt1cExpc3QgaXMgZWl0aGVyIGEgbGlzdCBvZiBtYXJrdXAgb3IganVzdCBhIGxpc3Qgb2YgZWxlbWVudHNcbiAgICBpZiAobWFya3VwTGlzdC5sZW5ndGggJiYgdHlwZW9mIG1hcmt1cExpc3RbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICByZW5kZXJlZE1hcmt1cCA9IERhbmdlci5kYW5nZXJvdXNseVJlbmRlck1hcmt1cChtYXJrdXBMaXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVuZGVyZWRNYXJrdXAgPSBtYXJrdXBMaXN0O1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSB1cGRhdGVkIGNoaWxkcmVuIGZpcnN0IHNvIHRoYXQgYHRvSW5kZXhgIGlzIGNvbnNpc3RlbnQuXG4gICAgaWYgKHVwZGF0ZWRDaGlsZHJlbikge1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB1cGRhdGVkQ2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdXBkYXRlZENoaWxkcmVuW2pdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodXBkYXRlZENoaWxkcmVuW2pdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBrID0gMDsgayA8IHVwZGF0ZXMubGVuZ3RoOyBrKyspIHtcbiAgICAgIHVwZGF0ZSA9IHVwZGF0ZXNba107XG4gICAgICBzd2l0Y2ggKHVwZGF0ZS50eXBlKSB7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuSU5TRVJUX01BUktVUDpcbiAgICAgICAgICBpbnNlcnRDaGlsZEF0KHVwZGF0ZS5wYXJlbnROb2RlLCByZW5kZXJlZE1hcmt1cFt1cGRhdGUubWFya3VwSW5kZXhdLCB1cGRhdGUudG9JbmRleCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuTU9WRV9FWElTVElORzpcbiAgICAgICAgICBpbnNlcnRDaGlsZEF0KHVwZGF0ZS5wYXJlbnROb2RlLCBpbml0aWFsQ2hpbGRyZW5bdXBkYXRlLnBhcmVudElEXVt1cGRhdGUuZnJvbUluZGV4XSwgdXBkYXRlLnRvSW5kZXgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlNFVF9NQVJLVVA6XG4gICAgICAgICAgc2V0SW5uZXJIVE1MKHVwZGF0ZS5wYXJlbnROb2RlLCB1cGRhdGUuY29udGVudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuVEVYVF9DT05URU5UOlxuICAgICAgICAgIHNldFRleHRDb250ZW50KHVwZGF0ZS5wYXJlbnROb2RlLCB1cGRhdGUuY29udGVudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuUkVNT1ZFX05PREU6XG4gICAgICAgICAgLy8gQWxyZWFkeSByZW1vdmVkIGJ5IHRoZSBmb3ItbG9vcCBhYm92ZS5cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKERPTUNoaWxkcmVuT3BlcmF0aW9ucywgJ0RPTUNoaWxkcmVuT3BlcmF0aW9ucycsIHtcbiAgdXBkYXRlVGV4dENvbnRlbnQ6ICd1cGRhdGVUZXh0Q29udGVudCdcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERPTUNoaWxkcmVuT3BlcmF0aW9uczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRE9NUHJvcGVydHlcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbmZ1bmN0aW9uIGNoZWNrTWFzayh2YWx1ZSwgYml0bWFzaykge1xuICByZXR1cm4gKHZhbHVlICYgYml0bWFzaykgPT09IGJpdG1hc2s7XG59XG5cbnZhciBET01Qcm9wZXJ0eUluamVjdGlvbiA9IHtcbiAgLyoqXG4gICAqIE1hcHBpbmcgZnJvbSBub3JtYWxpemVkLCBjYW1lbGNhc2VkIHByb3BlcnR5IG5hbWVzIHRvIGEgY29uZmlndXJhdGlvbiB0aGF0XG4gICAqIHNwZWNpZmllcyBob3cgdGhlIGFzc29jaWF0ZWQgRE9NIHByb3BlcnR5IHNob3VsZCBiZSBhY2Nlc3NlZCBvciByZW5kZXJlZC5cbiAgICovXG4gIE1VU1RfVVNFX0FUVFJJQlVURTogMHgxLFxuICBNVVNUX1VTRV9QUk9QRVJUWTogMHgyLFxuICBIQVNfU0lERV9FRkZFQ1RTOiAweDQsXG4gIEhBU19CT09MRUFOX1ZBTFVFOiAweDgsXG4gIEhBU19OVU1FUklDX1ZBTFVFOiAweDEwLFxuICBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRTogMHgyMCB8IDB4MTAsXG4gIEhBU19PVkVSTE9BREVEX0JPT0xFQU5fVkFMVUU6IDB4NDAsXG5cbiAgLyoqXG4gICAqIEluamVjdCBzb21lIHNwZWNpYWxpemVkIGtub3dsZWRnZSBhYm91dCB0aGUgRE9NLiBUaGlzIHRha2VzIGEgY29uZmlnIG9iamVjdFxuICAgKiB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICpcbiAgICogaXNDdXN0b21BdHRyaWJ1dGU6IGZ1bmN0aW9uIHRoYXQgZ2l2ZW4gYW4gYXR0cmlidXRlIG5hbWUgd2lsbCByZXR1cm4gdHJ1ZVxuICAgKiBpZiBpdCBjYW4gYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9NIHZlcmJhdGltLiBVc2VmdWwgZm9yIGRhdGEtKiBvciBhcmlhLSpcbiAgICogYXR0cmlidXRlcyB3aGVyZSBpdCdzIGltcG9zc2libGUgdG8gZW51bWVyYXRlIGFsbCBvZiB0aGUgcG9zc2libGVcbiAgICogYXR0cmlidXRlIG5hbWVzLFxuICAgKlxuICAgKiBQcm9wZXJ0aWVzOiBvYmplY3QgbWFwcGluZyBET00gcHJvcGVydHkgbmFtZSB0byBvbmUgb2YgdGhlXG4gICAqIERPTVByb3BlcnR5SW5qZWN0aW9uIGNvbnN0YW50cyBvciBudWxsLiBJZiB5b3VyIGF0dHJpYnV0ZSBpc24ndCBpbiBoZXJlLFxuICAgKiBpdCB3b24ndCBnZXQgd3JpdHRlbiB0byB0aGUgRE9NLlxuICAgKlxuICAgKiBET01BdHRyaWJ1dGVOYW1lczogb2JqZWN0IG1hcHBpbmcgUmVhY3QgYXR0cmlidXRlIG5hbWUgdG8gdGhlIERPTVxuICAgKiBhdHRyaWJ1dGUgbmFtZS4gQXR0cmlidXRlIG5hbWVzIG5vdCBzcGVjaWZpZWQgdXNlIHRoZSAqKmxvd2VyY2FzZSoqXG4gICAqIG5vcm1hbGl6ZWQgbmFtZS5cbiAgICpcbiAgICogRE9NQXR0cmlidXRlTmFtZXNwYWNlczogb2JqZWN0IG1hcHBpbmcgUmVhY3QgYXR0cmlidXRlIG5hbWUgdG8gdGhlIERPTVxuICAgKiBhdHRyaWJ1dGUgbmFtZXNwYWNlIFVSTC4gKEF0dHJpYnV0ZSBuYW1lcyBub3Qgc3BlY2lmaWVkIHVzZSBubyBuYW1lc3BhY2UuKVxuICAgKlxuICAgKiBET01Qcm9wZXJ0eU5hbWVzOiBzaW1pbGFyIHRvIERPTUF0dHJpYnV0ZU5hbWVzIGJ1dCBmb3IgRE9NIHByb3BlcnRpZXMuXG4gICAqIFByb3BlcnR5IG5hbWVzIG5vdCBzcGVjaWZpZWQgdXNlIHRoZSBub3JtYWxpemVkIG5hbWUuXG4gICAqXG4gICAqIERPTU11dGF0aW9uTWV0aG9kczogUHJvcGVydGllcyB0aGF0IHJlcXVpcmUgc3BlY2lhbCBtdXRhdGlvbiBtZXRob2RzLiBJZlxuICAgKiBgdmFsdWVgIGlzIHVuZGVmaW5lZCwgdGhlIG11dGF0aW9uIG1ldGhvZCBzaG91bGQgdW5zZXQgdGhlIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZG9tUHJvcGVydHlDb25maWcgdGhlIGNvbmZpZyBhcyBkZXNjcmliZWQgYWJvdmUuXG4gICAqL1xuICBpbmplY3RET01Qcm9wZXJ0eUNvbmZpZzogZnVuY3Rpb24gKGRvbVByb3BlcnR5Q29uZmlnKSB7XG4gICAgdmFyIEluamVjdGlvbiA9IERPTVByb3BlcnR5SW5qZWN0aW9uO1xuICAgIHZhciBQcm9wZXJ0aWVzID0gZG9tUHJvcGVydHlDb25maWcuUHJvcGVydGllcyB8fCB7fTtcbiAgICB2YXIgRE9NQXR0cmlidXRlTmFtZXNwYWNlcyA9IGRvbVByb3BlcnR5Q29uZmlnLkRPTUF0dHJpYnV0ZU5hbWVzcGFjZXMgfHwge307XG4gICAgdmFyIERPTUF0dHJpYnV0ZU5hbWVzID0gZG9tUHJvcGVydHlDb25maWcuRE9NQXR0cmlidXRlTmFtZXMgfHwge307XG4gICAgdmFyIERPTVByb3BlcnR5TmFtZXMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5ET01Qcm9wZXJ0eU5hbWVzIHx8IHt9O1xuICAgIHZhciBET01NdXRhdGlvbk1ldGhvZHMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5ET01NdXRhdGlvbk1ldGhvZHMgfHwge307XG5cbiAgICBpZiAoZG9tUHJvcGVydHlDb25maWcuaXNDdXN0b21BdHRyaWJ1dGUpIHtcbiAgICAgIERPTVByb3BlcnR5Ll9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9ucy5wdXNoKGRvbVByb3BlcnR5Q29uZmlnLmlzQ3VzdG9tQXR0cmlidXRlKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBQcm9wZXJ0aWVzKSB7XG4gICAgICAhIURPTVByb3BlcnR5LnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2luamVjdERPTVByb3BlcnR5Q29uZmlnKC4uLik6IFlvdVxcJ3JlIHRyeWluZyB0byBpbmplY3QgRE9NIHByb3BlcnR5ICcgKyAnXFwnJXNcXCcgd2hpY2ggaGFzIGFscmVhZHkgYmVlbiBpbmplY3RlZC4gWW91IG1heSBiZSBhY2NpZGVudGFsbHkgJyArICdpbmplY3RpbmcgdGhlIHNhbWUgRE9NIHByb3BlcnR5IGNvbmZpZyB0d2ljZSwgb3IgeW91IG1heSBiZSAnICsgJ2luamVjdGluZyB0d28gY29uZmlncyB0aGF0IGhhdmUgY29uZmxpY3RpbmcgcHJvcGVydHkgbmFtZXMuJywgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgdmFyIGxvd2VyQ2FzZWQgPSBwcm9wTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFyIHByb3BDb25maWcgPSBQcm9wZXJ0aWVzW3Byb3BOYW1lXTtcblxuICAgICAgdmFyIHByb3BlcnR5SW5mbyA9IHtcbiAgICAgICAgYXR0cmlidXRlTmFtZTogbG93ZXJDYXNlZCxcbiAgICAgICAgYXR0cmlidXRlTmFtZXNwYWNlOiBudWxsLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IHByb3BOYW1lLFxuICAgICAgICBtdXRhdGlvbk1ldGhvZDogbnVsbCxcblxuICAgICAgICBtdXN0VXNlQXR0cmlidXRlOiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLk1VU1RfVVNFX0FUVFJJQlVURSksXG4gICAgICAgIG11c3RVc2VQcm9wZXJ0eTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5NVVNUX1VTRV9QUk9QRVJUWSksXG4gICAgICAgIGhhc1NpZGVFZmZlY3RzOiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLkhBU19TSURFX0VGRkVDVFMpLFxuICAgICAgICBoYXNCb29sZWFuVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX0JPT0xFQU5fVkFMVUUpLFxuICAgICAgICBoYXNOdW1lcmljVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX05VTUVSSUNfVkFMVUUpLFxuICAgICAgICBoYXNQb3NpdGl2ZU51bWVyaWNWYWx1ZTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5IQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSksXG4gICAgICAgIGhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRSlcbiAgICAgIH07XG5cbiAgICAgICEoIXByb3BlcnR5SW5mby5tdXN0VXNlQXR0cmlidXRlIHx8ICFwcm9wZXJ0eUluZm8ubXVzdFVzZVByb3BlcnR5KSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdET01Qcm9wZXJ0eTogQ2Fubm90IHJlcXVpcmUgdXNpbmcgYm90aCBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5OiAlcycsIHByb3BOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAhKHByb3BlcnR5SW5mby5tdXN0VXNlUHJvcGVydHkgfHwgIXByb3BlcnR5SW5mby5oYXNTaWRlRWZmZWN0cykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRE9NUHJvcGVydHk6IFByb3BlcnRpZXMgdGhhdCBoYXZlIHNpZGUgZWZmZWN0cyBtdXN0IHVzZSBwcm9wZXJ0eTogJXMnLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgIShwcm9wZXJ0eUluZm8uaGFzQm9vbGVhblZhbHVlICsgcHJvcGVydHlJbmZvLmhhc051bWVyaWNWYWx1ZSArIHByb3BlcnR5SW5mby5oYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlIDw9IDEpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0RPTVByb3BlcnR5OiBWYWx1ZSBjYW4gYmUgb25lIG9mIGJvb2xlYW4sIG92ZXJsb2FkZWQgYm9vbGVhbiwgb3IgJyArICdudW1lcmljIHZhbHVlLCBidXQgbm90IGEgY29tYmluYXRpb246ICVzJywgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgRE9NUHJvcGVydHkuZ2V0UG9zc2libGVTdGFuZGFyZE5hbWVbbG93ZXJDYXNlZF0gPSBwcm9wTmFtZTtcbiAgICAgIH1cblxuICAgICAgaWYgKERPTUF0dHJpYnV0ZU5hbWVzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICB2YXIgYXR0cmlidXRlTmFtZSA9IERPTUF0dHJpYnV0ZU5hbWVzW3Byb3BOYW1lXTtcbiAgICAgICAgcHJvcGVydHlJbmZvLmF0dHJpYnV0ZU5hbWUgPSBhdHRyaWJ1dGVOYW1lO1xuICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lW2F0dHJpYnV0ZU5hbWVdID0gcHJvcE5hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKERPTUF0dHJpYnV0ZU5hbWVzcGFjZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lc3BhY2UgPSBET01BdHRyaWJ1dGVOYW1lc3BhY2VzW3Byb3BOYW1lXTtcbiAgICAgIH1cblxuICAgICAgaWYgKERPTVByb3BlcnR5TmFtZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BlcnR5SW5mby5wcm9wZXJ0eU5hbWUgPSBET01Qcm9wZXJ0eU5hbWVzW3Byb3BOYW1lXTtcbiAgICAgIH1cblxuICAgICAgaWYgKERPTU11dGF0aW9uTWV0aG9kcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgcHJvcGVydHlJbmZvLm11dGF0aW9uTWV0aG9kID0gRE9NTXV0YXRpb25NZXRob2RzW3Byb3BOYW1lXTtcbiAgICAgIH1cblxuICAgICAgRE9NUHJvcGVydHkucHJvcGVydGllc1twcm9wTmFtZV0gPSBwcm9wZXJ0eUluZm87XG4gICAgfVxuICB9XG59O1xudmFyIGRlZmF1bHRWYWx1ZUNhY2hlID0ge307XG5cbi8qKlxuICogRE9NUHJvcGVydHkgZXhwb3J0cyBsb29rdXAgb2JqZWN0cyB0aGF0IGNhbiBiZSB1c2VkIGxpa2UgZnVuY3Rpb25zOlxuICpcbiAqICAgPiBET01Qcm9wZXJ0eS5pc1ZhbGlkWydpZCddXG4gKiAgIHRydWVcbiAqICAgPiBET01Qcm9wZXJ0eS5pc1ZhbGlkWydmb29iYXInXVxuICogICB1bmRlZmluZWRcbiAqXG4gKiBBbHRob3VnaCB0aGlzIG1heSBiZSBjb25mdXNpbmcsIGl0IHBlcmZvcm1zIGJldHRlciBpbiBnZW5lcmFsLlxuICpcbiAqIEBzZWUgaHR0cDovL2pzcGVyZi5jb20va2V5LWV4aXN0c1xuICogQHNlZSBodHRwOi8vanNwZXJmLmNvbS9rZXktbWlzc2luZ1xuICovXG52YXIgRE9NUHJvcGVydHkgPSB7XG5cbiAgSURfQVRUUklCVVRFX05BTUU6ICdkYXRhLXJlYWN0aWQnLFxuXG4gIC8qKlxuICAgKiBNYXAgZnJvbSBwcm9wZXJ0eSBcInN0YW5kYXJkIG5hbWVcIiB0byBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IGhvdyB0byBzZXRcbiAgICogdGhlIHByb3BlcnR5IGluIHRoZSBET00uIEVhY2ggb2JqZWN0IGNvbnRhaW5zOlxuICAgKlxuICAgKiBhdHRyaWJ1dGVOYW1lOlxuICAgKiAgIFVzZWQgd2hlbiByZW5kZXJpbmcgbWFya3VwIG9yIHdpdGggYCpBdHRyaWJ1dGUoKWAuXG4gICAqIGF0dHJpYnV0ZU5hbWVzcGFjZVxuICAgKiBwcm9wZXJ0eU5hbWU6XG4gICAqICAgVXNlZCBvbiBET00gbm9kZSBpbnN0YW5jZXMuIChUaGlzIGluY2x1ZGVzIHByb3BlcnRpZXMgdGhhdCBtdXRhdGUgZHVlIHRvXG4gICAqICAgZXh0ZXJuYWwgZmFjdG9ycy4pXG4gICAqIG11dGF0aW9uTWV0aG9kOlxuICAgKiAgIElmIG5vbi1udWxsLCB1c2VkIGluc3RlYWQgb2YgdGhlIHByb3BlcnR5IG9yIGBzZXRBdHRyaWJ1dGUoKWAgYWZ0ZXJcbiAgICogICBpbml0aWFsIHJlbmRlci5cbiAgICogbXVzdFVzZUF0dHJpYnV0ZTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBtdXN0IGJlIGFjY2Vzc2VkIGFuZCBtdXRhdGVkIHVzaW5nIGAqQXR0cmlidXRlKClgLlxuICAgKiAgIChUaGlzIGluY2x1ZGVzIGFueXRoaW5nIHRoYXQgZmFpbHMgYDxwcm9wTmFtZT4gaW4gPGVsZW1lbnQ+YC4pXG4gICAqIG11c3RVc2VQcm9wZXJ0eTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBtdXN0IGJlIGFjY2Vzc2VkIGFuZCBtdXRhdGVkIGFzIGFuIG9iamVjdCBwcm9wZXJ0eS5cbiAgICogaGFzU2lkZUVmZmVjdHM6XG4gICAqICAgV2hldGhlciBvciBub3Qgc2V0dGluZyBhIHZhbHVlIGNhdXNlcyBzaWRlIGVmZmVjdHMgc3VjaCBhcyB0cmlnZ2VyaW5nXG4gICAqICAgcmVzb3VyY2VzIHRvIGJlIGxvYWRlZCBvciB0ZXh0IHNlbGVjdGlvbiBjaGFuZ2VzLiBJZiB0cnVlLCB3ZSByZWFkIGZyb21cbiAgICogICB0aGUgRE9NIGJlZm9yZSB1cGRhdGluZyB0byBlbnN1cmUgdGhhdCB0aGUgdmFsdWUgaXMgb25seSBzZXQgaWYgaXQgaGFzXG4gICAqICAgY2hhbmdlZC5cbiAgICogaGFzQm9vbGVhblZhbHVlOlxuICAgKiAgIFdoZXRoZXIgdGhlIHByb3BlcnR5IHNob3VsZCBiZSByZW1vdmVkIHdoZW4gc2V0IHRvIGEgZmFsc2V5IHZhbHVlLlxuICAgKiBoYXNOdW1lcmljVmFsdWU6XG4gICAqICAgV2hldGhlciB0aGUgcHJvcGVydHkgbXVzdCBiZSBudW1lcmljIG9yIHBhcnNlIGFzIGEgbnVtZXJpYyBhbmQgc2hvdWxkIGJlXG4gICAqICAgcmVtb3ZlZCB3aGVuIHNldCB0byBhIGZhbHNleSB2YWx1ZS5cbiAgICogaGFzUG9zaXRpdmVOdW1lcmljVmFsdWU6XG4gICAqICAgV2hldGhlciB0aGUgcHJvcGVydHkgbXVzdCBiZSBwb3NpdGl2ZSBudW1lcmljIG9yIHBhcnNlIGFzIGEgcG9zaXRpdmVcbiAgICogICBudW1lcmljIGFuZCBzaG91bGQgYmUgcmVtb3ZlZCB3aGVuIHNldCB0byBhIGZhbHNleSB2YWx1ZS5cbiAgICogaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBjYW4gYmUgdXNlZCBhcyBhIGZsYWcgYXMgd2VsbCBhcyB3aXRoIGEgdmFsdWUuXG4gICAqICAgUmVtb3ZlZCB3aGVuIHN0cmljdGx5IGVxdWFsIHRvIGZhbHNlOyBwcmVzZW50IHdpdGhvdXQgYSB2YWx1ZSB3aGVuXG4gICAqICAgc3RyaWN0bHkgZXF1YWwgdG8gdHJ1ZTsgcHJlc2VudCB3aXRoIGEgdmFsdWUgb3RoZXJ3aXNlLlxuICAgKi9cbiAgcHJvcGVydGllczoge30sXG5cbiAgLyoqXG4gICAqIE1hcHBpbmcgZnJvbSBsb3dlcmNhc2UgcHJvcGVydHkgbmFtZXMgdG8gdGhlIHByb3Blcmx5IGNhc2VkIHZlcnNpb24sIHVzZWRcbiAgICogdG8gd2FybiBpbiB0aGUgY2FzZSBvZiBtaXNzaW5nIHByb3BlcnRpZXMuIEF2YWlsYWJsZSBvbmx5IGluIF9fREVWX18uXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBnZXRQb3NzaWJsZVN0YW5kYXJkTmFtZTogXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHt9IDogbnVsbCxcblxuICAvKipcbiAgICogQWxsIG9mIHRoZSBpc0N1c3RvbUF0dHJpYnV0ZSgpIGZ1bmN0aW9ucyB0aGF0IGhhdmUgYmVlbiBpbmplY3RlZC5cbiAgICovXG4gIF9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9uczogW10sXG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIGEgcHJvcGVydHkgbmFtZSBpcyBhIGN1c3RvbSBhdHRyaWJ1dGUuXG4gICAqIEBtZXRob2RcbiAgICovXG4gIGlzQ3VzdG9tQXR0cmlidXRlOiBmdW5jdGlvbiAoYXR0cmlidXRlTmFtZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgRE9NUHJvcGVydHkuX2lzQ3VzdG9tQXR0cmlidXRlRnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXNDdXN0b21BdHRyaWJ1dGVGbiA9IERPTVByb3BlcnR5Ll9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9uc1tpXTtcbiAgICAgIGlmIChpc0N1c3RvbUF0dHJpYnV0ZUZuKGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGRlZmF1bHQgcHJvcGVydHkgdmFsdWUgZm9yIGEgRE9NIHByb3BlcnR5IChpLmUuLCBub3QgYW5cbiAgICogYXR0cmlidXRlKS4gTW9zdCBkZWZhdWx0IHZhbHVlcyBhcmUgJycgb3IgZmFsc2UsIGJ1dCBub3QgYWxsLiBXb3JzZSB5ZXQsXG4gICAqIHNvbWUgKGluIHBhcnRpY3VsYXIsIGB0eXBlYCkgdmFyeSBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2YgZWxlbWVudC5cbiAgICpcbiAgICogVE9ETzogSXMgaXQgYmV0dGVyIHRvIGdyYWIgYWxsIHRoZSBwb3NzaWJsZSBwcm9wZXJ0aWVzIHdoZW4gY3JlYXRpbmcgYW5cbiAgICogZWxlbWVudCB0byBhdm9pZCBoYXZpbmcgdG8gY3JlYXRlIHRoZSBzYW1lIGVsZW1lbnQgdHdpY2U/XG4gICAqL1xuICBnZXREZWZhdWx0VmFsdWVGb3JQcm9wZXJ0eTogZnVuY3Rpb24gKG5vZGVOYW1lLCBwcm9wKSB7XG4gICAgdmFyIG5vZGVEZWZhdWx0cyA9IGRlZmF1bHRWYWx1ZUNhY2hlW25vZGVOYW1lXTtcbiAgICB2YXIgdGVzdEVsZW1lbnQ7XG4gICAgaWYgKCFub2RlRGVmYXVsdHMpIHtcbiAgICAgIGRlZmF1bHRWYWx1ZUNhY2hlW25vZGVOYW1lXSA9IG5vZGVEZWZhdWx0cyA9IHt9O1xuICAgIH1cbiAgICBpZiAoIShwcm9wIGluIG5vZGVEZWZhdWx0cykpIHtcbiAgICAgIHRlc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSk7XG4gICAgICBub2RlRGVmYXVsdHNbcHJvcF0gPSB0ZXN0RWxlbWVudFtwcm9wXTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGVEZWZhdWx0c1twcm9wXTtcbiAgfSxcblxuICBpbmplY3Rpb246IERPTVByb3BlcnR5SW5qZWN0aW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IERPTVByb3BlcnR5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBET01Qcm9wZXJ0eU9wZXJhdGlvbnNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NUHJvcGVydHkgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5Jyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcblxudmFyIHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyID0gcmVxdWlyZSgnLi9xdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3NlcicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8vIFNpbXBsaWZpZWQgc3Vic2V0XG52YXIgVkFMSURfQVRUUklCVVRFX05BTUVfUkVHRVggPSAvXlthLXpBLVpfXVtcXHdcXC5cXC1dKiQvO1xudmFyIGlsbGVnYWxBdHRyaWJ1dGVOYW1lQ2FjaGUgPSB7fTtcbnZhciB2YWxpZGF0ZWRBdHRyaWJ1dGVOYW1lQ2FjaGUgPSB7fTtcblxuZnVuY3Rpb24gaXNBdHRyaWJ1dGVOYW1lU2FmZShhdHRyaWJ1dGVOYW1lKSB7XG4gIGlmICh2YWxpZGF0ZWRBdHRyaWJ1dGVOYW1lQ2FjaGUuaGFzT3duUHJvcGVydHkoYXR0cmlidXRlTmFtZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoaWxsZWdhbEF0dHJpYnV0ZU5hbWVDYWNoZS5oYXNPd25Qcm9wZXJ0eShhdHRyaWJ1dGVOYW1lKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoVkFMSURfQVRUUklCVVRFX05BTUVfUkVHRVgudGVzdChhdHRyaWJ1dGVOYW1lKSkge1xuICAgIHZhbGlkYXRlZEF0dHJpYnV0ZU5hbWVDYWNoZVthdHRyaWJ1dGVOYW1lXSA9IHRydWU7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWxsZWdhbEF0dHJpYnV0ZU5hbWVDYWNoZVthdHRyaWJ1dGVOYW1lXSA9IHRydWU7XG4gIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnSW52YWxpZCBhdHRyaWJ1dGUgbmFtZTogYCVzYCcsIGF0dHJpYnV0ZU5hbWUpIDogdW5kZWZpbmVkO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHNob3VsZElnbm9yZVZhbHVlKHByb3BlcnR5SW5mbywgdmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgfHwgcHJvcGVydHlJbmZvLmhhc0Jvb2xlYW5WYWx1ZSAmJiAhdmFsdWUgfHwgcHJvcGVydHlJbmZvLmhhc051bWVyaWNWYWx1ZSAmJiBpc05hTih2YWx1ZSkgfHwgcHJvcGVydHlJbmZvLmhhc1Bvc2l0aXZlTnVtZXJpY1ZhbHVlICYmIHZhbHVlIDwgMSB8fCBwcm9wZXJ0eUluZm8uaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZSAmJiB2YWx1ZSA9PT0gZmFsc2U7XG59XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciByZWFjdFByb3BzID0ge1xuICAgIGNoaWxkcmVuOiB0cnVlLFxuICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB0cnVlLFxuICAgIGtleTogdHJ1ZSxcbiAgICByZWY6IHRydWVcbiAgfTtcbiAgdmFyIHdhcm5lZFByb3BlcnRpZXMgPSB7fTtcblxuICB2YXIgd2FyblVua25vd25Qcm9wZXJ0eSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKHJlYWN0UHJvcHMuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgcmVhY3RQcm9wc1tuYW1lXSB8fCB3YXJuZWRQcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KG5hbWUpICYmIHdhcm5lZFByb3BlcnRpZXNbbmFtZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3YXJuZWRQcm9wZXJ0aWVzW25hbWVdID0gdHJ1ZTtcbiAgICB2YXIgbG93ZXJDYXNlZE5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBkYXRhLSogYXR0cmlidXRlcyBzaG91bGQgYmUgbG93ZXJjYXNlOyBzdWdnZXN0IHRoZSBsb3dlcmNhc2UgdmVyc2lvblxuICAgIHZhciBzdGFuZGFyZE5hbWUgPSBET01Qcm9wZXJ0eS5pc0N1c3RvbUF0dHJpYnV0ZShsb3dlckNhc2VkTmFtZSkgPyBsb3dlckNhc2VkTmFtZSA6IERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lLmhhc093blByb3BlcnR5KGxvd2VyQ2FzZWROYW1lKSA/IERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lW2xvd2VyQ2FzZWROYW1lXSA6IG51bGw7XG5cbiAgICAvLyBGb3Igbm93LCBvbmx5IHdhcm4gd2hlbiB3ZSBoYXZlIGEgc3VnZ2VzdGVkIGNvcnJlY3Rpb24uIFRoaXMgcHJldmVudHNcbiAgICAvLyBsb2dnaW5nIHRvbyBtdWNoIHdoZW4gdXNpbmcgdHJhbnNmZXJQcm9wc1RvLlxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHN0YW5kYXJkTmFtZSA9PSBudWxsLCAnVW5rbm93biBET00gcHJvcGVydHkgJXMuIERpZCB5b3UgbWVhbiAlcz8nLCBuYW1lLCBzdGFuZGFyZE5hbWUpIDogdW5kZWZpbmVkO1xuICB9O1xufVxuXG4vKipcbiAqIE9wZXJhdGlvbnMgZm9yIGRlYWxpbmcgd2l0aCBET00gcHJvcGVydGllcy5cbiAqL1xudmFyIERPTVByb3BlcnR5T3BlcmF0aW9ucyA9IHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIHRoZSBJRCBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIFVuZXNjYXBlZCBJRC5cbiAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgc3RyaW5nLlxuICAgKi9cbiAgY3JlYXRlTWFya3VwRm9ySUQ6IGZ1bmN0aW9uIChpZCkge1xuICAgIHJldHVybiBET01Qcm9wZXJ0eS5JRF9BVFRSSUJVVEVfTkFNRSArICc9JyArIHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyKGlkKTtcbiAgfSxcblxuICBzZXRBdHRyaWJ1dGVGb3JJRDogZnVuY3Rpb24gKG5vZGUsIGlkKSB7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoRE9NUHJvcGVydHkuSURfQVRUUklCVVRFX05BTUUsIGlkKTtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIGEgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHJldHVybiB7P3N0cmluZ30gTWFya3VwIHN0cmluZywgb3IgbnVsbCBpZiB0aGUgcHJvcGVydHkgd2FzIGludmFsaWQuXG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JQcm9wZXJ0eTogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIHByb3BlcnR5SW5mbyA9IERPTVByb3BlcnR5LnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW25hbWVdIDogbnVsbDtcbiAgICBpZiAocHJvcGVydHlJbmZvKSB7XG4gICAgICBpZiAoc2hvdWxkSWdub3JlVmFsdWUocHJvcGVydHlJbmZvLCB2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgICAgdmFyIGF0dHJpYnV0ZU5hbWUgPSBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZTtcbiAgICAgIGlmIChwcm9wZXJ0eUluZm8uaGFzQm9vbGVhblZhbHVlIHx8IHByb3BlcnR5SW5mby5oYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlICYmIHZhbHVlID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVOYW1lICsgJz1cIlwiJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdHRyaWJ1dGVOYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUobmFtZSkpIHtcbiAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FyblVua25vd25Qcm9wZXJ0eShuYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgbWFya3VwIGZvciBhIGN1c3RvbSBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBzdHJpbmcsIG9yIGVtcHR5IHN0cmluZyBpZiB0aGUgcHJvcGVydHkgd2FzIGludmFsaWQuXG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JDdXN0b21BdHRyaWJ1dGU6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghaXNBdHRyaWJ1dGVOYW1lU2FmZShuYW1lKSB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHJldHVybiBuYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBmb3IgYSBwcm9wZXJ0eSBvbiBhIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqL1xuICBzZXRWYWx1ZUZvclByb3BlcnR5OiBmdW5jdGlvbiAobm9kZSwgbmFtZSwgdmFsdWUpIHtcbiAgICB2YXIgcHJvcGVydHlJbmZvID0gRE9NUHJvcGVydHkucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IERPTVByb3BlcnR5LnByb3BlcnRpZXNbbmFtZV0gOiBudWxsO1xuICAgIGlmIChwcm9wZXJ0eUluZm8pIHtcbiAgICAgIHZhciBtdXRhdGlvbk1ldGhvZCA9IHByb3BlcnR5SW5mby5tdXRhdGlvbk1ldGhvZDtcbiAgICAgIGlmIChtdXRhdGlvbk1ldGhvZCkge1xuICAgICAgICBtdXRhdGlvbk1ldGhvZChub2RlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHNob3VsZElnbm9yZVZhbHVlKHByb3BlcnR5SW5mbywgdmFsdWUpKSB7XG4gICAgICAgIHRoaXMuZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eShub2RlLCBuYW1lKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlJbmZvLm11c3RVc2VBdHRyaWJ1dGUpIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZU5hbWUgPSBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZTtcbiAgICAgICAgdmFyIG5hbWVzcGFjZSA9IHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lc3BhY2U7XG4gICAgICAgIC8vIGBzZXRBdHRyaWJ1dGVgIHdpdGggb2JqZWN0cyBiZWNvbWVzIG9ubHkgYFtvYmplY3RdYCBpbiBJRTgvOSxcbiAgICAgICAgLy8gKCcnICsgdmFsdWUpIG1ha2VzIGl0IG91dHB1dCB0aGUgY29ycmVjdCB0b1N0cmluZygpLXZhbHVlLlxuICAgICAgICBpZiAobmFtZXNwYWNlKSB7XG4gICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGVOUyhuYW1lc3BhY2UsIGF0dHJpYnV0ZU5hbWUsICcnICsgdmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnR5SW5mby5oYXNCb29sZWFuVmFsdWUgfHwgcHJvcGVydHlJbmZvLmhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWUgJiYgdmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCAnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgJycgKyB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwcm9wTmFtZSA9IHByb3BlcnR5SW5mby5wcm9wZXJ0eU5hbWU7XG4gICAgICAgIC8vIE11c3QgZXhwbGljaXRseSBjYXN0IHZhbHVlcyBmb3IgSEFTX1NJREVfRUZGRUNUUy1wcm9wZXJ0aWVzIHRvIHRoZVxuICAgICAgICAvLyBwcm9wZXJ0eSB0eXBlIGJlZm9yZSBjb21wYXJpbmc7IG9ubHkgYHZhbHVlYCBkb2VzIGFuZCBpcyBzdHJpbmcuXG4gICAgICAgIGlmICghcHJvcGVydHlJbmZvLmhhc1NpZGVFZmZlY3RzIHx8ICcnICsgbm9kZVtwcm9wTmFtZV0gIT09ICcnICsgdmFsdWUpIHtcbiAgICAgICAgICAvLyBDb250cmFyeSB0byBgc2V0QXR0cmlidXRlYCwgb2JqZWN0IHByb3BlcnRpZXMgYXJlIHByb3Blcmx5XG4gICAgICAgICAgLy8gYHRvU3RyaW5nYGVkIGJ5IElFOC85LlxuICAgICAgICAgIG5vZGVbcHJvcE5hbWVdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKG5hbWUpKSB7XG4gICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JBdHRyaWJ1dGUobm9kZSwgbmFtZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FyblVua25vd25Qcm9wZXJ0eShuYW1lKTtcbiAgICB9XG4gIH0sXG5cbiAgc2V0VmFsdWVGb3JBdHRyaWJ1dGU6IGZ1bmN0aW9uIChub2RlLCBuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghaXNBdHRyaWJ1dGVOYW1lU2FmZShuYW1lKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsICcnICsgdmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGVsZXRlcyB0aGUgdmFsdWUgZm9yIGEgcHJvcGVydHkgb24gYSBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICovXG4gIGRlbGV0ZVZhbHVlRm9yUHJvcGVydHk6IGZ1bmN0aW9uIChub2RlLCBuYW1lKSB7XG4gICAgdmFyIHByb3BlcnR5SW5mbyA9IERPTVByb3BlcnR5LnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW25hbWVdIDogbnVsbDtcbiAgICBpZiAocHJvcGVydHlJbmZvKSB7XG4gICAgICB2YXIgbXV0YXRpb25NZXRob2QgPSBwcm9wZXJ0eUluZm8ubXV0YXRpb25NZXRob2Q7XG4gICAgICBpZiAobXV0YXRpb25NZXRob2QpIHtcbiAgICAgICAgbXV0YXRpb25NZXRob2Qobm9kZSwgdW5kZWZpbmVkKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlJbmZvLm11c3RVc2VBdHRyaWJ1dGUpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUocHJvcGVydHlJbmZvLmF0dHJpYnV0ZU5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHByb3BOYW1lID0gcHJvcGVydHlJbmZvLnByb3BlcnR5TmFtZTtcbiAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9IERPTVByb3BlcnR5LmdldERlZmF1bHRWYWx1ZUZvclByb3BlcnR5KG5vZGUubm9kZU5hbWUsIHByb3BOYW1lKTtcbiAgICAgICAgaWYgKCFwcm9wZXJ0eUluZm8uaGFzU2lkZUVmZmVjdHMgfHwgJycgKyBub2RlW3Byb3BOYW1lXSAhPT0gZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgbm9kZVtwcm9wTmFtZV0gPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKG5hbWUpKSB7XG4gICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICB9IGVsc2UgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm5Vbmtub3duUHJvcGVydHkobmFtZSk7XG4gICAgfVxuICB9XG5cbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhET01Qcm9wZXJ0eU9wZXJhdGlvbnMsICdET01Qcm9wZXJ0eU9wZXJhdGlvbnMnLCB7XG4gIHNldFZhbHVlRm9yUHJvcGVydHk6ICdzZXRWYWx1ZUZvclByb3BlcnR5JyxcbiAgc2V0VmFsdWVGb3JBdHRyaWJ1dGU6ICdzZXRWYWx1ZUZvckF0dHJpYnV0ZScsXG4gIGRlbGV0ZVZhbHVlRm9yUHJvcGVydHk6ICdkZWxldGVWYWx1ZUZvclByb3BlcnR5J1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRE9NUHJvcGVydHlPcGVyYXRpb25zOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBEYW5nZXJcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgY3JlYXRlTm9kZXNGcm9tTWFya3VwID0gcmVxdWlyZSgnZmJqcy9saWIvY3JlYXRlTm9kZXNGcm9tTWFya3VwJyk7XG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcbnZhciBnZXRNYXJrdXBXcmFwID0gcmVxdWlyZSgnZmJqcy9saWIvZ2V0TWFya3VwV3JhcCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgT1BFTl9UQUdfTkFNRV9FWFAgPSAvXig8W14gXFwvPl0rKS87XG52YXIgUkVTVUxUX0lOREVYX0FUVFIgPSAnZGF0YS1kYW5nZXItaW5kZXgnO1xuXG4vKipcbiAqIEV4dHJhY3RzIHRoZSBgbm9kZU5hbWVgIGZyb20gYSBzdHJpbmcgb2YgbWFya3VwLlxuICpcbiAqIE5PVEU6IEV4dHJhY3RpbmcgdGhlIGBub2RlTmFtZWAgZG9lcyBub3QgcmVxdWlyZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBtYXRjaFxuICogYmVjYXVzZSB3ZSBtYWtlIGFzc3VtcHRpb25zIGFib3V0IFJlYWN0LWdlbmVyYXRlZCBtYXJrdXAgKGkuZS4gdGhlcmUgYXJlIG5vXG4gKiBzcGFjZXMgc3Vycm91bmRpbmcgdGhlIG9wZW5pbmcgdGFnIGFuZCB0aGVyZSBpcyBhdCBsZWFzdCBvbmUgYXR0cmlidXRlKS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIFN0cmluZyBvZiBtYXJrdXAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IE5vZGUgbmFtZSBvZiB0aGUgc3VwcGxpZWQgbWFya3VwLlxuICogQHNlZSBodHRwOi8vanNwZXJmLmNvbS9leHRyYWN0LW5vZGVuYW1lXG4gKi9cbmZ1bmN0aW9uIGdldE5vZGVOYW1lKG1hcmt1cCkge1xuICByZXR1cm4gbWFya3VwLnN1YnN0cmluZygxLCBtYXJrdXAuaW5kZXhPZignICcpKTtcbn1cblxudmFyIERhbmdlciA9IHtcblxuICAvKipcbiAgICogUmVuZGVycyBtYXJrdXAgaW50byBhbiBhcnJheSBvZiBub2Rlcy4gVGhlIG1hcmt1cCBpcyBleHBlY3RlZCB0byByZW5kZXJcbiAgICogaW50byBhIGxpc3Qgb2Ygcm9vdCBub2Rlcy4gQWxzbywgdGhlIGxlbmd0aCBvZiBgcmVzdWx0TGlzdGAgYW5kXG4gICAqIGBtYXJrdXBMaXN0YCBzaG91bGQgYmUgdGhlIHNhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7YXJyYXk8c3RyaW5nPn0gbWFya3VwTGlzdCBMaXN0IG9mIG1hcmt1cCBzdHJpbmdzIHRvIHJlbmRlci5cbiAgICogQHJldHVybiB7YXJyYXk8RE9NRWxlbWVudD59IExpc3Qgb2YgcmVuZGVyZWQgbm9kZXMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZGFuZ2Vyb3VzbHlSZW5kZXJNYXJrdXA6IGZ1bmN0aW9uIChtYXJrdXBMaXN0KSB7XG4gICAgIUV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdkYW5nZXJvdXNseVJlbmRlck1hcmt1cCguLi4pOiBDYW5ub3QgcmVuZGVyIG1hcmt1cCBpbiBhIHdvcmtlciAnICsgJ3RocmVhZC4gTWFrZSBzdXJlIGB3aW5kb3dgIGFuZCBgZG9jdW1lbnRgIGFyZSBhdmFpbGFibGUgZ2xvYmFsbHkgJyArICdiZWZvcmUgcmVxdWlyaW5nIFJlYWN0IHdoZW4gdW5pdCB0ZXN0aW5nIG9yIHVzZSAnICsgJ1JlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RyaW5nIGZvciBzZXJ2ZXIgcmVuZGVyaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgbm9kZU5hbWU7XG4gICAgdmFyIG1hcmt1cEJ5Tm9kZU5hbWUgPSB7fTtcbiAgICAvLyBHcm91cCBtYXJrdXAgYnkgYG5vZGVOYW1lYCBpZiBhIHdyYXAgaXMgbmVjZXNzYXJ5LCBlbHNlIGJ5ICcqJy5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmt1cExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICFtYXJrdXBMaXN0W2ldID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVuZGVyTWFya3VwKC4uLik6IE1pc3NpbmcgbWFya3VwLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIG5vZGVOYW1lID0gZ2V0Tm9kZU5hbWUobWFya3VwTGlzdFtpXSk7XG4gICAgICBub2RlTmFtZSA9IGdldE1hcmt1cFdyYXAobm9kZU5hbWUpID8gbm9kZU5hbWUgOiAnKic7XG4gICAgICBtYXJrdXBCeU5vZGVOYW1lW25vZGVOYW1lXSA9IG1hcmt1cEJ5Tm9kZU5hbWVbbm9kZU5hbWVdIHx8IFtdO1xuICAgICAgbWFya3VwQnlOb2RlTmFtZVtub2RlTmFtZV1baV0gPSBtYXJrdXBMaXN0W2ldO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0TGlzdCA9IFtdO1xuICAgIHZhciByZXN1bHRMaXN0QXNzaWdubWVudENvdW50ID0gMDtcbiAgICBmb3IgKG5vZGVOYW1lIGluIG1hcmt1cEJ5Tm9kZU5hbWUpIHtcbiAgICAgIGlmICghbWFya3VwQnlOb2RlTmFtZS5oYXNPd25Qcm9wZXJ0eShub2RlTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgbWFya3VwTGlzdEJ5Tm9kZU5hbWUgPSBtYXJrdXBCeU5vZGVOYW1lW25vZGVOYW1lXTtcblxuICAgICAgLy8gVGhpcyBmb3ItaW4gbG9vcCBza2lwcyB0aGUgaG9sZXMgb2YgdGhlIHNwYXJzZSBhcnJheS4gVGhlIG9yZGVyIG9mXG4gICAgICAvLyBpdGVyYXRpb24gc2hvdWxkIGZvbGxvdyB0aGUgb3JkZXIgb2YgYXNzaWdubWVudCwgd2hpY2ggaGFwcGVucyB0byBtYXRjaFxuICAgICAgLy8gbnVtZXJpY2FsIGluZGV4IG9yZGVyLCBidXQgd2UgZG9uJ3QgcmVseSBvbiB0aGF0LlxuICAgICAgdmFyIHJlc3VsdEluZGV4O1xuICAgICAgZm9yIChyZXN1bHRJbmRleCBpbiBtYXJrdXBMaXN0QnlOb2RlTmFtZSkge1xuICAgICAgICBpZiAobWFya3VwTGlzdEJ5Tm9kZU5hbWUuaGFzT3duUHJvcGVydHkocmVzdWx0SW5kZXgpKSB7XG4gICAgICAgICAgdmFyIG1hcmt1cCA9IG1hcmt1cExpc3RCeU5vZGVOYW1lW3Jlc3VsdEluZGV4XTtcblxuICAgICAgICAgIC8vIFB1c2ggdGhlIHJlcXVlc3RlZCBtYXJrdXAgd2l0aCBhbiBhZGRpdGlvbmFsIFJFU1VMVF9JTkRFWF9BVFRSXG4gICAgICAgICAgLy8gYXR0cmlidXRlLiAgSWYgdGhlIG1hcmt1cCBkb2VzIG5vdCBzdGFydCB3aXRoIGEgPCBjaGFyYWN0ZXIsIGl0XG4gICAgICAgICAgLy8gd2lsbCBiZSBkaXNjYXJkZWQgYmVsb3cgKHdpdGggYW4gYXBwcm9wcmlhdGUgY29uc29sZS5lcnJvcikuXG4gICAgICAgICAgbWFya3VwTGlzdEJ5Tm9kZU5hbWVbcmVzdWx0SW5kZXhdID0gbWFya3VwLnJlcGxhY2UoT1BFTl9UQUdfTkFNRV9FWFAsXG4gICAgICAgICAgLy8gVGhpcyBpbmRleCB3aWxsIGJlIHBhcnNlZCBiYWNrIG91dCBiZWxvdy5cbiAgICAgICAgICAnJDEgJyArIFJFU1VMVF9JTkRFWF9BVFRSICsgJz1cIicgKyByZXN1bHRJbmRleCArICdcIiAnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZW5kZXIgZWFjaCBncm91cCBvZiBtYXJrdXAgd2l0aCBzaW1pbGFyIHdyYXBwaW5nIGBub2RlTmFtZWAuXG4gICAgICB2YXIgcmVuZGVyTm9kZXMgPSBjcmVhdGVOb2Rlc0Zyb21NYXJrdXAobWFya3VwTGlzdEJ5Tm9kZU5hbWUuam9pbignJyksIGVtcHR5RnVuY3Rpb24gLy8gRG8gbm90aGluZyBzcGVjaWFsIHdpdGggPHNjcmlwdD4gdGFncy5cbiAgICAgICk7XG5cbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVuZGVyTm9kZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIHJlbmRlck5vZGUgPSByZW5kZXJOb2Rlc1tqXTtcbiAgICAgICAgaWYgKHJlbmRlck5vZGUuaGFzQXR0cmlidXRlICYmIHJlbmRlck5vZGUuaGFzQXR0cmlidXRlKFJFU1VMVF9JTkRFWF9BVFRSKSkge1xuXG4gICAgICAgICAgcmVzdWx0SW5kZXggPSArcmVuZGVyTm9kZS5nZXRBdHRyaWJ1dGUoUkVTVUxUX0lOREVYX0FUVFIpO1xuICAgICAgICAgIHJlbmRlck5vZGUucmVtb3ZlQXR0cmlidXRlKFJFU1VMVF9JTkRFWF9BVFRSKTtcblxuICAgICAgICAgICEhcmVzdWx0TGlzdC5oYXNPd25Qcm9wZXJ0eShyZXN1bHRJbmRleCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGFuZ2VyOiBBc3NpZ25pbmcgdG8gYW4gYWxyZWFkeS1vY2N1cGllZCByZXN1bHQgaW5kZXguJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgcmVzdWx0TGlzdFtyZXN1bHRJbmRleF0gPSByZW5kZXJOb2RlO1xuXG4gICAgICAgICAgLy8gVGhpcyBzaG91bGQgbWF0Y2ggcmVzdWx0TGlzdC5sZW5ndGggYW5kIG1hcmt1cExpc3QubGVuZ3RoIHdoZW5cbiAgICAgICAgICAvLyB3ZSdyZSBkb25lLlxuICAgICAgICAgIHJlc3VsdExpc3RBc3NpZ25tZW50Q291bnQgKz0gMTtcbiAgICAgICAgfSBlbHNlIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRGFuZ2VyOiBEaXNjYXJkaW5nIHVuZXhwZWN0ZWQgbm9kZTonLCByZW5kZXJOb2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFsdGhvdWdoIHJlc3VsdExpc3Qgd2FzIHBvcHVsYXRlZCBvdXQgb2Ygb3JkZXIsIGl0IHNob3VsZCBub3cgYmUgYSBkZW5zZVxuICAgIC8vIGFycmF5LlxuICAgICEocmVzdWx0TGlzdEFzc2lnbm1lbnRDb3VudCA9PT0gcmVzdWx0TGlzdC5sZW5ndGgpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0RhbmdlcjogRGlkIG5vdCBhc3NpZ24gdG8gZXZlcnkgaW5kZXggb2YgcmVzdWx0TGlzdC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAhKHJlc3VsdExpc3QubGVuZ3RoID09PSBtYXJrdXBMaXN0Lmxlbmd0aCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGFuZ2VyOiBFeHBlY3RlZCBtYXJrdXAgdG8gcmVuZGVyICVzIG5vZGVzLCBidXQgcmVuZGVyZWQgJXMuJywgbWFya3VwTGlzdC5sZW5ndGgsIHJlc3VsdExpc3QubGVuZ3RoKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICByZXR1cm4gcmVzdWx0TGlzdDtcbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYSBub2RlIHdpdGggYSBzdHJpbmcgb2YgbWFya3VwIGF0IGl0cyBjdXJyZW50IHBvc2l0aW9uIHdpdGhpbiBpdHNcbiAgICogcGFyZW50LiBUaGUgbWFya3VwIG11c3QgcmVuZGVyIGludG8gYSBzaW5nbGUgcm9vdCBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG9sZENoaWxkIENoaWxkIG5vZGUgdG8gcmVwbGFjZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBNYXJrdXAgdG8gcmVuZGVyIGluIHBsYWNlIG9mIHRoZSBjaGlsZCBub2RlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwOiBmdW5jdGlvbiAob2xkQ2hpbGQsIG1hcmt1cCkge1xuICAgICFFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXAoLi4uKTogQ2Fubm90IHJlbmRlciBtYXJrdXAgaW4gYSAnICsgJ3dvcmtlciB0aHJlYWQuIE1ha2Ugc3VyZSBgd2luZG93YCBhbmQgYGRvY3VtZW50YCBhcmUgYXZhaWxhYmxlICcgKyAnZ2xvYmFsbHkgYmVmb3JlIHJlcXVpcmluZyBSZWFjdCB3aGVuIHVuaXQgdGVzdGluZyBvciB1c2UgJyArICdSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0cmluZygpIGZvciBzZXJ2ZXIgcmVuZGVyaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhbWFya3VwID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwKC4uLik6IE1pc3NpbmcgbWFya3VwLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhKG9sZENoaWxkLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ2h0bWwnKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cCguLi4pOiBDYW5ub3QgcmVwbGFjZSBtYXJrdXAgb2YgdGhlICcgKyAnPGh0bWw+IG5vZGUuIFRoaXMgaXMgYmVjYXVzZSBicm93c2VyIHF1aXJrcyBtYWtlIHRoaXMgdW5yZWxpYWJsZSAnICsgJ2FuZC9vciBzbG93LiBJZiB5b3Ugd2FudCB0byByZW5kZXIgdG8gdGhlIHJvb3QgeW91IG11c3QgdXNlICcgKyAnc2VydmVyIHJlbmRlcmluZy4gU2VlIFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RyaW5nKCkuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIG5ld0NoaWxkO1xuICAgIGlmICh0eXBlb2YgbWFya3VwID09PSAnc3RyaW5nJykge1xuICAgICAgbmV3Q2hpbGQgPSBjcmVhdGVOb2Rlc0Zyb21NYXJrdXAobWFya3VwLCBlbXB0eUZ1bmN0aW9uKVswXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3Q2hpbGQgPSBtYXJrdXA7XG4gICAgfVxuICAgIG9sZENoaWxkLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0NoaWxkLCBvbGRDaGlsZCk7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEYW5nZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIERlZmF1bHRFdmVudFBsdWdpbk9yZGVyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG4vKipcbiAqIE1vZHVsZSB0aGF0IGlzIGluamVjdGFibGUgaW50byBgRXZlbnRQbHVnaW5IdWJgLCB0aGF0IHNwZWNpZmllcyBhXG4gKiBkZXRlcm1pbmlzdGljIG9yZGVyaW5nIG9mIGBFdmVudFBsdWdpbmBzLiBBIGNvbnZlbmllbnQgd2F5IHRvIHJlYXNvbiBhYm91dFxuICogcGx1Z2lucywgd2l0aG91dCBoYXZpbmcgdG8gcGFja2FnZSBldmVyeSBvbmUgb2YgdGhlbS4gVGhpcyBpcyBiZXR0ZXIgdGhhblxuICogaGF2aW5nIHBsdWdpbnMgYmUgb3JkZXJlZCBpbiB0aGUgc2FtZSBvcmRlciB0aGF0IHRoZXkgYXJlIGluamVjdGVkIGJlY2F1c2VcbiAqIHRoYXQgb3JkZXJpbmcgd291bGQgYmUgaW5mbHVlbmNlZCBieSB0aGUgcGFja2FnaW5nIG9yZGVyLlxuICogYFJlc3BvbmRlckV2ZW50UGx1Z2luYCBtdXN0IG9jY3VyIGJlZm9yZSBgU2ltcGxlRXZlbnRQbHVnaW5gIHNvIHRoYXRcbiAqIHByZXZlbnRpbmcgZGVmYXVsdCBvbiBldmVudHMgaXMgY29udmVuaWVudCBpbiBgU2ltcGxlRXZlbnRQbHVnaW5gIGhhbmRsZXJzLlxuICovXG52YXIgRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIgPSBba2V5T2YoeyBSZXNwb25kZXJFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBTaW1wbGVFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBUYXBFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBFbnRlckxlYXZlRXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgQ2hhbmdlRXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgU2VsZWN0RXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgQmVmb3JlSW5wdXRFdmVudFBsdWdpbjogbnVsbCB9KV07XG5cbm1vZHVsZS5leHBvcnRzID0gRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEVudGVyTGVhdmVFdmVudFBsdWdpblxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudENvbnN0YW50cyA9IHJlcXVpcmUoJy4vRXZlbnRDb25zdGFudHMnKTtcbnZhciBFdmVudFByb3BhZ2F0b3JzID0gcmVxdWlyZSgnLi9FdmVudFByb3BhZ2F0b3JzJyk7XG52YXIgU3ludGhldGljTW91c2VFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljTW91c2VFdmVudCcpO1xuXG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcblxudmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xudmFyIGdldEZpcnN0UmVhY3RET00gPSBSZWFjdE1vdW50LmdldEZpcnN0UmVhY3RET007XG5cbnZhciBldmVudFR5cGVzID0ge1xuICBtb3VzZUVudGVyOiB7XG4gICAgcmVnaXN0cmF0aW9uTmFtZToga2V5T2YoeyBvbk1vdXNlRW50ZXI6IG51bGwgfSksXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU91dCwgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU92ZXJdXG4gIH0sXG4gIG1vdXNlTGVhdmU6IHtcbiAgICByZWdpc3RyYXRpb25OYW1lOiBrZXlPZih7IG9uTW91c2VMZWF2ZTogbnVsbCB9KSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3V0LCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3Zlcl1cbiAgfVxufTtcblxudmFyIGV4dHJhY3RlZEV2ZW50cyA9IFtudWxsLCBudWxsXTtcblxudmFyIEVudGVyTGVhdmVFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBGb3IgYWxtb3N0IGV2ZXJ5IGludGVyYWN0aW9uIHdlIGNhcmUgYWJvdXQsIHRoZXJlIHdpbGwgYmUgYm90aCBhIHRvcC1sZXZlbFxuICAgKiBgbW91c2VvdmVyYCBhbmQgYG1vdXNlb3V0YCBldmVudCB0aGF0IG9jY3Vycy4gT25seSB1c2UgYG1vdXNlb3V0YCBzbyB0aGF0XG4gICAqIHdlIGRvIG5vdCBleHRyYWN0IGR1cGxpY2F0ZSBldmVudHMuIEhvd2V2ZXIsIG1vdmluZyB0aGUgbW91c2UgaW50byB0aGVcbiAgICogYnJvd3NlciBmcm9tIG91dHNpZGUgd2lsbCBub3QgZmlyZSBhIGBtb3VzZW91dGAgZXZlbnQuIEluIHRoaXMgY2FzZSwgd2UgdXNlXG4gICAqIHRoZSBgbW91c2VvdmVyYCB0b3AtbGV2ZWwgZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyICYmIChuYXRpdmVFdmVudC5yZWxhdGVkVGFyZ2V0IHx8IG5hdGl2ZUV2ZW50LmZyb21FbGVtZW50KSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICh0b3BMZXZlbFR5cGUgIT09IHRvcExldmVsVHlwZXMudG9wTW91c2VPdXQgJiYgdG9wTGV2ZWxUeXBlICE9PSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3Zlcikge1xuICAgICAgLy8gTXVzdCBub3QgYmUgYSBtb3VzZSBpbiBvciBtb3VzZSBvdXQgLSBpZ25vcmluZy5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciB3aW47XG4gICAgaWYgKHRvcExldmVsVGFyZ2V0LndpbmRvdyA9PT0gdG9wTGV2ZWxUYXJnZXQpIHtcbiAgICAgIC8vIGB0b3BMZXZlbFRhcmdldGAgaXMgcHJvYmFibHkgYSB3aW5kb3cgb2JqZWN0LlxuICAgICAgd2luID0gdG9wTGV2ZWxUYXJnZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRPRE86IEZpZ3VyZSBvdXQgd2h5IGBvd25lckRvY3VtZW50YCBpcyBzb21ldGltZXMgdW5kZWZpbmVkIGluIElFOC5cbiAgICAgIHZhciBkb2MgPSB0b3BMZXZlbFRhcmdldC5vd25lckRvY3VtZW50O1xuICAgICAgaWYgKGRvYykge1xuICAgICAgICB3aW4gPSBkb2MuZGVmYXVsdFZpZXcgfHwgZG9jLnBhcmVudFdpbmRvdztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbiA9IHdpbmRvdztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZnJvbTtcbiAgICB2YXIgdG87XG4gICAgdmFyIGZyb21JRCA9ICcnO1xuICAgIHZhciB0b0lEID0gJyc7XG4gICAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU91dCkge1xuICAgICAgZnJvbSA9IHRvcExldmVsVGFyZ2V0O1xuICAgICAgZnJvbUlEID0gdG9wTGV2ZWxUYXJnZXRJRDtcbiAgICAgIHRvID0gZ2V0Rmlyc3RSZWFjdERPTShuYXRpdmVFdmVudC5yZWxhdGVkVGFyZ2V0IHx8IG5hdGl2ZUV2ZW50LnRvRWxlbWVudCk7XG4gICAgICBpZiAodG8pIHtcbiAgICAgICAgdG9JRCA9IFJlYWN0TW91bnQuZ2V0SUQodG8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG8gPSB3aW47XG4gICAgICB9XG4gICAgICB0byA9IHRvIHx8IHdpbjtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJvbSA9IHdpbjtcbiAgICAgIHRvID0gdG9wTGV2ZWxUYXJnZXQ7XG4gICAgICB0b0lEID0gdG9wTGV2ZWxUYXJnZXRJRDtcbiAgICB9XG5cbiAgICBpZiAoZnJvbSA9PT0gdG8pIHtcbiAgICAgIC8vIE5vdGhpbmcgcGVydGFpbnMgdG8gb3VyIG1hbmFnZWQgY29tcG9uZW50cy5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBsZWF2ZSA9IFN5bnRoZXRpY01vdXNlRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMubW91c2VMZWF2ZSwgZnJvbUlELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuICAgIGxlYXZlLnR5cGUgPSAnbW91c2VsZWF2ZSc7XG4gICAgbGVhdmUudGFyZ2V0ID0gZnJvbTtcbiAgICBsZWF2ZS5yZWxhdGVkVGFyZ2V0ID0gdG87XG5cbiAgICB2YXIgZW50ZXIgPSBTeW50aGV0aWNNb3VzZUV2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLm1vdXNlRW50ZXIsIHRvSUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgZW50ZXIudHlwZSA9ICdtb3VzZWVudGVyJztcbiAgICBlbnRlci50YXJnZXQgPSB0bztcbiAgICBlbnRlci5yZWxhdGVkVGFyZ2V0ID0gZnJvbTtcblxuICAgIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZUVudGVyTGVhdmVEaXNwYXRjaGVzKGxlYXZlLCBlbnRlciwgZnJvbUlELCB0b0lEKTtcblxuICAgIGV4dHJhY3RlZEV2ZW50c1swXSA9IGxlYXZlO1xuICAgIGV4dHJhY3RlZEV2ZW50c1sxXSA9IGVudGVyO1xuXG4gICAgcmV0dXJuIGV4dHJhY3RlZEV2ZW50cztcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEVudGVyTGVhdmVFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRDb25zdGFudHNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBrZXlNaXJyb3IgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlNaXJyb3InKTtcblxudmFyIFByb3BhZ2F0aW9uUGhhc2VzID0ga2V5TWlycm9yKHsgYnViYmxlZDogbnVsbCwgY2FwdHVyZWQ6IG51bGwgfSk7XG5cbi8qKlxuICogVHlwZXMgb2YgcmF3IHNpZ25hbHMgZnJvbSB0aGUgYnJvd3NlciBjYXVnaHQgYXQgdGhlIHRvcCBsZXZlbC5cbiAqL1xudmFyIHRvcExldmVsVHlwZXMgPSBrZXlNaXJyb3Ioe1xuICB0b3BBYm9ydDogbnVsbCxcbiAgdG9wQmx1cjogbnVsbCxcbiAgdG9wQ2FuUGxheTogbnVsbCxcbiAgdG9wQ2FuUGxheVRocm91Z2g6IG51bGwsXG4gIHRvcENoYW5nZTogbnVsbCxcbiAgdG9wQ2xpY2s6IG51bGwsXG4gIHRvcENvbXBvc2l0aW9uRW5kOiBudWxsLFxuICB0b3BDb21wb3NpdGlvblN0YXJ0OiBudWxsLFxuICB0b3BDb21wb3NpdGlvblVwZGF0ZTogbnVsbCxcbiAgdG9wQ29udGV4dE1lbnU6IG51bGwsXG4gIHRvcENvcHk6IG51bGwsXG4gIHRvcEN1dDogbnVsbCxcbiAgdG9wRG91YmxlQ2xpY2s6IG51bGwsXG4gIHRvcERyYWc6IG51bGwsXG4gIHRvcERyYWdFbmQ6IG51bGwsXG4gIHRvcERyYWdFbnRlcjogbnVsbCxcbiAgdG9wRHJhZ0V4aXQ6IG51bGwsXG4gIHRvcERyYWdMZWF2ZTogbnVsbCxcbiAgdG9wRHJhZ092ZXI6IG51bGwsXG4gIHRvcERyYWdTdGFydDogbnVsbCxcbiAgdG9wRHJvcDogbnVsbCxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6IG51bGwsXG4gIHRvcEVtcHRpZWQ6IG51bGwsXG4gIHRvcEVuY3J5cHRlZDogbnVsbCxcbiAgdG9wRW5kZWQ6IG51bGwsXG4gIHRvcEVycm9yOiBudWxsLFxuICB0b3BGb2N1czogbnVsbCxcbiAgdG9wSW5wdXQ6IG51bGwsXG4gIHRvcEtleURvd246IG51bGwsXG4gIHRvcEtleVByZXNzOiBudWxsLFxuICB0b3BLZXlVcDogbnVsbCxcbiAgdG9wTG9hZDogbnVsbCxcbiAgdG9wTG9hZGVkRGF0YTogbnVsbCxcbiAgdG9wTG9hZGVkTWV0YWRhdGE6IG51bGwsXG4gIHRvcExvYWRTdGFydDogbnVsbCxcbiAgdG9wTW91c2VEb3duOiBudWxsLFxuICB0b3BNb3VzZU1vdmU6IG51bGwsXG4gIHRvcE1vdXNlT3V0OiBudWxsLFxuICB0b3BNb3VzZU92ZXI6IG51bGwsXG4gIHRvcE1vdXNlVXA6IG51bGwsXG4gIHRvcFBhc3RlOiBudWxsLFxuICB0b3BQYXVzZTogbnVsbCxcbiAgdG9wUGxheTogbnVsbCxcbiAgdG9wUGxheWluZzogbnVsbCxcbiAgdG9wUHJvZ3Jlc3M6IG51bGwsXG4gIHRvcFJhdGVDaGFuZ2U6IG51bGwsXG4gIHRvcFJlc2V0OiBudWxsLFxuICB0b3BTY3JvbGw6IG51bGwsXG4gIHRvcFNlZWtlZDogbnVsbCxcbiAgdG9wU2Vla2luZzogbnVsbCxcbiAgdG9wU2VsZWN0aW9uQ2hhbmdlOiBudWxsLFxuICB0b3BTdGFsbGVkOiBudWxsLFxuICB0b3BTdWJtaXQ6IG51bGwsXG4gIHRvcFN1c3BlbmQ6IG51bGwsXG4gIHRvcFRleHRJbnB1dDogbnVsbCxcbiAgdG9wVGltZVVwZGF0ZTogbnVsbCxcbiAgdG9wVG91Y2hDYW5jZWw6IG51bGwsXG4gIHRvcFRvdWNoRW5kOiBudWxsLFxuICB0b3BUb3VjaE1vdmU6IG51bGwsXG4gIHRvcFRvdWNoU3RhcnQ6IG51bGwsXG4gIHRvcFZvbHVtZUNoYW5nZTogbnVsbCxcbiAgdG9wV2FpdGluZzogbnVsbCxcbiAgdG9wV2hlZWw6IG51bGxcbn0pO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSB7XG4gIHRvcExldmVsVHlwZXM6IHRvcExldmVsVHlwZXMsXG4gIFByb3BhZ2F0aW9uUGhhc2VzOiBQcm9wYWdhdGlvblBoYXNlc1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudENvbnN0YW50czsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQbHVnaW5IdWJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudFBsdWdpblJlZ2lzdHJ5ID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpblJlZ2lzdHJ5Jyk7XG52YXIgRXZlbnRQbHVnaW5VdGlscyA9IHJlcXVpcmUoJy4vRXZlbnRQbHVnaW5VdGlscycpO1xudmFyIFJlYWN0RXJyb3JVdGlscyA9IHJlcXVpcmUoJy4vUmVhY3RFcnJvclV0aWxzJyk7XG5cbnZhciBhY2N1bXVsYXRlSW50byA9IHJlcXVpcmUoJy4vYWNjdW11bGF0ZUludG8nKTtcbnZhciBmb3JFYWNoQWNjdW11bGF0ZWQgPSByZXF1aXJlKCcuL2ZvckVhY2hBY2N1bXVsYXRlZCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogSW50ZXJuYWwgc3RvcmUgZm9yIGV2ZW50IGxpc3RlbmVyc1xuICovXG52YXIgbGlzdGVuZXJCYW5rID0ge307XG5cbi8qKlxuICogSW50ZXJuYWwgcXVldWUgb2YgZXZlbnRzIHRoYXQgaGF2ZSBhY2N1bXVsYXRlZCB0aGVpciBkaXNwYXRjaGVzIGFuZCBhcmVcbiAqIHdhaXRpbmcgdG8gaGF2ZSB0aGVpciBkaXNwYXRjaGVzIGV4ZWN1dGVkLlxuICovXG52YXIgZXZlbnRRdWV1ZSA9IG51bGw7XG5cbi8qKlxuICogRGlzcGF0Y2hlcyBhbiBldmVudCBhbmQgcmVsZWFzZXMgaXQgYmFjayBpbnRvIHRoZSBwb29sLCB1bmxlc3MgcGVyc2lzdGVudC5cbiAqXG4gKiBAcGFyYW0gez9vYmplY3R9IGV2ZW50IFN5bnRoZXRpYyBldmVudCB0byBiZSBkaXNwYXRjaGVkLlxuICogQHBhcmFtIHtib29sZWFufSBzaW11bGF0ZWQgSWYgdGhlIGV2ZW50IGlzIHNpbXVsYXRlZCAoY2hhbmdlcyBleG4gYmVoYXZpb3IpXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlID0gZnVuY3Rpb24gKGV2ZW50LCBzaW11bGF0ZWQpIHtcbiAgaWYgKGV2ZW50KSB7XG4gICAgRXZlbnRQbHVnaW5VdGlscy5leGVjdXRlRGlzcGF0Y2hlc0luT3JkZXIoZXZlbnQsIHNpbXVsYXRlZCk7XG5cbiAgICBpZiAoIWV2ZW50LmlzUGVyc2lzdGVudCgpKSB7XG4gICAgICBldmVudC5jb25zdHJ1Y3Rvci5yZWxlYXNlKGV2ZW50KTtcbiAgICB9XG4gIH1cbn07XG52YXIgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlU2ltdWxhdGVkID0gZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuIGV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZShlLCB0cnVlKTtcbn07XG52YXIgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlVG9wTGV2ZWwgPSBmdW5jdGlvbiAoZSkge1xuICByZXR1cm4gZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlKGUsIGZhbHNlKTtcbn07XG5cbi8qKlxuICogLSBgSW5zdGFuY2VIYW5kbGVgOiBbcmVxdWlyZWRdIE1vZHVsZSB0aGF0IHBlcmZvcm1zIGxvZ2ljYWwgdHJhdmVyc2FscyBvZiBET01cbiAqICAgaGllcmFyY2h5IGdpdmVuIGlkcyBvZiB0aGUgbG9naWNhbCBET00gZWxlbWVudHMgaW52b2x2ZWQuXG4gKi9cbnZhciBJbnN0YW5jZUhhbmRsZSA9IG51bGw7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlSW5zdGFuY2VIYW5kbGUoKSB7XG4gIHZhciB2YWxpZCA9IEluc3RhbmNlSGFuZGxlICYmIEluc3RhbmNlSGFuZGxlLnRyYXZlcnNlVHdvUGhhc2UgJiYgSW5zdGFuY2VIYW5kbGUudHJhdmVyc2VFbnRlckxlYXZlO1xuICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh2YWxpZCwgJ0luc3RhbmNlSGFuZGxlIG5vdCBpbmplY3RlZCBiZWZvcmUgdXNlIScpIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSB1bmlmaWVkIGludGVyZmFjZSBmb3IgZXZlbnQgcGx1Z2lucyB0byBiZSBpbnN0YWxsZWQgYW5kIGNvbmZpZ3VyZWQuXG4gKlxuICogRXZlbnQgcGx1Z2lucyBjYW4gaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAgIGBleHRyYWN0RXZlbnRzYCB7ZnVuY3Rpb24oc3RyaW5nLCBET01FdmVudFRhcmdldCwgc3RyaW5nLCBvYmplY3QpOiAqfVxuICogICAgIFJlcXVpcmVkLiBXaGVuIGEgdG9wLWxldmVsIGV2ZW50IGlzIGZpcmVkLCB0aGlzIG1ldGhvZCBpcyBleHBlY3RlZCB0b1xuICogICAgIGV4dHJhY3Qgc3ludGhldGljIGV2ZW50cyB0aGF0IHdpbGwgaW4gdHVybiBiZSBxdWV1ZWQgYW5kIGRpc3BhdGNoZWQuXG4gKlxuICogICBgZXZlbnRUeXBlc2Age29iamVjdH1cbiAqICAgICBPcHRpb25hbCwgcGx1Z2lucyB0aGF0IGZpcmUgZXZlbnRzIG11c3QgcHVibGlzaCBhIG1hcHBpbmcgb2YgcmVnaXN0cmF0aW9uXG4gKiAgICAgbmFtZXMgdGhhdCBhcmUgdXNlZCB0byByZWdpc3RlciBsaXN0ZW5lcnMuIFZhbHVlcyBvZiB0aGlzIG1hcHBpbmcgbXVzdFxuICogICAgIGJlIG9iamVjdHMgdGhhdCBjb250YWluIGByZWdpc3RyYXRpb25OYW1lYCBvciBgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXNgLlxuICpcbiAqICAgYGV4ZWN1dGVEaXNwYXRjaGAge2Z1bmN0aW9uKG9iamVjdCwgZnVuY3Rpb24sIHN0cmluZyl9XG4gKiAgICAgT3B0aW9uYWwsIGFsbG93cyBwbHVnaW5zIHRvIG92ZXJyaWRlIGhvdyBhbiBldmVudCBnZXRzIGRpc3BhdGNoZWQuIEJ5XG4gKiAgICAgZGVmYXVsdCwgdGhlIGxpc3RlbmVyIGlzIHNpbXBseSBpbnZva2VkLlxuICpcbiAqIEVhY2ggcGx1Z2luIHRoYXQgaXMgaW5qZWN0ZWQgaW50byBgRXZlbnRzUGx1Z2luSHViYCBpcyBpbW1lZGlhdGVseSBvcGVyYWJsZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbnZhciBFdmVudFBsdWdpbkh1YiA9IHtcblxuICAvKipcbiAgICogTWV0aG9kcyBmb3IgaW5qZWN0aW5nIGRlcGVuZGVuY2llcy5cbiAgICovXG4gIGluamVjdGlvbjoge1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IEluamVjdGVkTW91bnRcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgaW5qZWN0TW91bnQ6IEV2ZW50UGx1Z2luVXRpbHMuaW5qZWN0aW9uLmluamVjdE1vdW50LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IEluamVjdGVkSW5zdGFuY2VIYW5kbGVcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgaW5qZWN0SW5zdGFuY2VIYW5kbGU6IGZ1bmN0aW9uIChJbmplY3RlZEluc3RhbmNlSGFuZGxlKSB7XG4gICAgICBJbnN0YW5jZUhhbmRsZSA9IEluamVjdGVkSW5zdGFuY2VIYW5kbGU7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YWxpZGF0ZUluc3RhbmNlSGFuZGxlKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGdldEluc3RhbmNlSGFuZGxlOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YWxpZGF0ZUluc3RhbmNlSGFuZGxlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gSW5zdGFuY2VIYW5kbGU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7YXJyYXl9IEluamVjdGVkRXZlbnRQbHVnaW5PcmRlclxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBpbmplY3RFdmVudFBsdWdpbk9yZGVyOiBFdmVudFBsdWdpblJlZ2lzdHJ5LmluamVjdEV2ZW50UGx1Z2luT3JkZXIsXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gaW5qZWN0ZWROYW1lc1RvUGx1Z2lucyBNYXAgZnJvbSBuYW1lcyB0byBwbHVnaW4gbW9kdWxlcy5cbiAgICAgKi9cbiAgICBpbmplY3RFdmVudFBsdWdpbnNCeU5hbWU6IEV2ZW50UGx1Z2luUmVnaXN0cnkuaW5qZWN0RXZlbnRQbHVnaW5zQnlOYW1lXG5cbiAgfSxcblxuICBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M6IEV2ZW50UGx1Z2luUmVnaXN0cnkuZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzLFxuXG4gIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzOiBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLFxuXG4gIC8qKlxuICAgKiBTdG9yZXMgYGxpc3RlbmVyYCBhdCBgbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdW2lkXWAuIElzIGlkZW1wb3RlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiB0aGUgRE9NIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWdpc3RyYXRpb25OYW1lIE5hbWUgb2YgbGlzdGVuZXIgKGUuZy4gYG9uQ2xpY2tgKS5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGxpc3RlbmVyIFRoZSBjYWxsYmFjayB0byBzdG9yZS5cbiAgICovXG4gIHB1dExpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUsIGxpc3RlbmVyKSB7XG4gICAgISh0eXBlb2YgbGlzdGVuZXIgPT09ICdmdW5jdGlvbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V4cGVjdGVkICVzIGxpc3RlbmVyIHRvIGJlIGEgZnVuY3Rpb24sIGluc3RlYWQgZ290IHR5cGUgJXMnLCByZWdpc3RyYXRpb25OYW1lLCB0eXBlb2YgbGlzdGVuZXIpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZSA9IGxpc3RlbmVyQmFua1tyZWdpc3RyYXRpb25OYW1lXSB8fCAobGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdID0ge30pO1xuICAgIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lW2lkXSA9IGxpc3RlbmVyO1xuXG4gICAgdmFyIFBsdWdpbk1vZHVsZSA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgaWYgKFBsdWdpbk1vZHVsZSAmJiBQbHVnaW5Nb2R1bGUuZGlkUHV0TGlzdGVuZXIpIHtcbiAgICAgIFBsdWdpbk1vZHVsZS5kaWRQdXRMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuICAgKiBAcmV0dXJuIHs/ZnVuY3Rpb259IFRoZSBzdG9yZWQgY2FsbGJhY2suXG4gICAqL1xuICBnZXRMaXN0ZW5lcjogZnVuY3Rpb24gKGlkLCByZWdpc3RyYXRpb25OYW1lKSB7XG4gICAgdmFyIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lID0gbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdO1xuICAgIHJldHVybiBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZSAmJiBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZVtpZF07XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYSBsaXN0ZW5lciBmcm9tIHRoZSByZWdpc3RyYXRpb24gYmFuay5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuICAgKi9cbiAgZGVsZXRlTGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIHZhciBQbHVnaW5Nb2R1bGUgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW3JlZ2lzdHJhdGlvbk5hbWVdO1xuICAgIGlmIChQbHVnaW5Nb2R1bGUgJiYgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcikge1xuICAgICAgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSk7XG4gICAgfVxuXG4gICAgdmFyIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lID0gbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdO1xuICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIG5ldmVyIGJlIG51bGwgLS0gd2hlbiBpcyBpdD9cbiAgICBpZiAoYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICAgIGRlbGV0ZSBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZVtpZF07XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFsbCBsaXN0ZW5lcnMgZm9yIHRoZSBET00gZWxlbWVudCB3aXRoIHRoZSBzdXBwbGllZCBJRC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICovXG4gIGRlbGV0ZUFsbExpc3RlbmVyczogZnVuY3Rpb24gKGlkKSB7XG4gICAgZm9yICh2YXIgcmVnaXN0cmF0aW9uTmFtZSBpbiBsaXN0ZW5lckJhbmspIHtcbiAgICAgIGlmICghbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdW2lkXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIFBsdWdpbk1vZHVsZSA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgICBpZiAoUGx1Z2luTW9kdWxlICYmIFBsdWdpbk1vZHVsZS53aWxsRGVsZXRlTGlzdGVuZXIpIHtcbiAgICAgICAgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV1baWRdO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQWxsb3dzIHJlZ2lzdGVyZWQgcGx1Z2lucyBhbiBvcHBvcnR1bml0eSB0byBleHRyYWN0IGV2ZW50cyBmcm9tIHRvcC1sZXZlbFxuICAgKiBuYXRpdmUgYnJvd3NlciBldmVudHMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICB2YXIgZXZlbnRzO1xuICAgIHZhciBwbHVnaW5zID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5wbHVnaW5zO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGx1Z2lucy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gTm90IGV2ZXJ5IHBsdWdpbiBpbiB0aGUgb3JkZXJpbmcgbWF5IGJlIGxvYWRlZCBhdCBydW50aW1lLlxuICAgICAgdmFyIHBvc3NpYmxlUGx1Z2luID0gcGx1Z2luc1tpXTtcbiAgICAgIGlmIChwb3NzaWJsZVBsdWdpbikge1xuICAgICAgICB2YXIgZXh0cmFjdGVkRXZlbnRzID0gcG9zc2libGVQbHVnaW4uZXh0cmFjdEV2ZW50cyh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuICAgICAgICBpZiAoZXh0cmFjdGVkRXZlbnRzKSB7XG4gICAgICAgICAgZXZlbnRzID0gYWNjdW11bGF0ZUludG8oZXZlbnRzLCBleHRyYWN0ZWRFdmVudHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBldmVudHM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVucXVldWVzIGEgc3ludGhldGljIGV2ZW50IHRoYXQgc2hvdWxkIGJlIGRpc3BhdGNoZWQgd2hlblxuICAgKiBgcHJvY2Vzc0V2ZW50UXVldWVgIGlzIGludm9rZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnRzIEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVFdmVudHM6IGZ1bmN0aW9uIChldmVudHMpIHtcbiAgICBpZiAoZXZlbnRzKSB7XG4gICAgICBldmVudFF1ZXVlID0gYWNjdW11bGF0ZUludG8oZXZlbnRRdWV1ZSwgZXZlbnRzKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYWxsIHN5bnRoZXRpYyBldmVudHMgb24gdGhlIGV2ZW50IHF1ZXVlLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHByb2Nlc3NFdmVudFF1ZXVlOiBmdW5jdGlvbiAoc2ltdWxhdGVkKSB7XG4gICAgLy8gU2V0IGBldmVudFF1ZXVlYCB0byBudWxsIGJlZm9yZSBwcm9jZXNzaW5nIGl0IHNvIHRoYXQgd2UgY2FuIHRlbGwgaWYgbW9yZVxuICAgIC8vIGV2ZW50cyBnZXQgZW5xdWV1ZWQgd2hpbGUgcHJvY2Vzc2luZy5cbiAgICB2YXIgcHJvY2Vzc2luZ0V2ZW50UXVldWUgPSBldmVudFF1ZXVlO1xuICAgIGV2ZW50UXVldWUgPSBudWxsO1xuICAgIGlmIChzaW11bGF0ZWQpIHtcbiAgICAgIGZvckVhY2hBY2N1bXVsYXRlZChwcm9jZXNzaW5nRXZlbnRRdWV1ZSwgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlU2ltdWxhdGVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yRWFjaEFjY3VtdWxhdGVkKHByb2Nlc3NpbmdFdmVudFF1ZXVlLCBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2VUb3BMZXZlbCk7XG4gICAgfVxuICAgICEhZXZlbnRRdWV1ZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwcm9jZXNzRXZlbnRRdWV1ZSgpOiBBZGRpdGlvbmFsIGV2ZW50cyB3ZXJlIGVucXVldWVkIHdoaWxlIHByb2Nlc3NpbmcgJyArICdhbiBldmVudCBxdWV1ZS4gU3VwcG9ydCBmb3IgdGhpcyBoYXMgbm90IHlldCBiZWVuIGltcGxlbWVudGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIGEgZ29vZCB0aW1lIHRvIHJldGhyb3cgaWYgYW55IG9mIHRoZSBldmVudCBoYW5kbGVycyB0aHJldy5cbiAgICBSZWFjdEVycm9yVXRpbHMucmV0aHJvd0NhdWdodEVycm9yKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZXNlIGFyZSBuZWVkZWQgZm9yIHRlc3RzIG9ubHkuIERvIG5vdCB1c2UhXG4gICAqL1xuICBfX3B1cmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgbGlzdGVuZXJCYW5rID0ge307XG4gIH0sXG5cbiAgX19nZXRMaXN0ZW5lckJhbms6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbGlzdGVuZXJCYW5rO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQbHVnaW5IdWI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEV2ZW50UGx1Z2luUmVnaXN0cnlcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogSW5qZWN0YWJsZSBvcmRlcmluZyBvZiBldmVudCBwbHVnaW5zLlxuICovXG52YXIgRXZlbnRQbHVnaW5PcmRlciA9IG51bGw7XG5cbi8qKlxuICogSW5qZWN0YWJsZSBtYXBwaW5nIGZyb20gbmFtZXMgdG8gZXZlbnQgcGx1Z2luIG1vZHVsZXMuXG4gKi9cbnZhciBuYW1lc1RvUGx1Z2lucyA9IHt9O1xuXG4vKipcbiAqIFJlY29tcHV0ZXMgdGhlIHBsdWdpbiBsaXN0IHVzaW5nIHRoZSBpbmplY3RlZCBwbHVnaW5zIGFuZCBwbHVnaW4gb3JkZXJpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVjb21wdXRlUGx1Z2luT3JkZXJpbmcoKSB7XG4gIGlmICghRXZlbnRQbHVnaW5PcmRlcikge1xuICAgIC8vIFdhaXQgdW50aWwgYW4gYEV2ZW50UGx1Z2luT3JkZXJgIGlzIGluamVjdGVkLlxuICAgIHJldHVybjtcbiAgfVxuICBmb3IgKHZhciBwbHVnaW5OYW1lIGluIG5hbWVzVG9QbHVnaW5zKSB7XG4gICAgdmFyIFBsdWdpbk1vZHVsZSA9IG5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdO1xuICAgIHZhciBwbHVnaW5JbmRleCA9IEV2ZW50UGx1Z2luT3JkZXIuaW5kZXhPZihwbHVnaW5OYW1lKTtcbiAgICAhKHBsdWdpbkluZGV4ID4gLTEpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IENhbm5vdCBpbmplY3QgZXZlbnQgcGx1Z2lucyB0aGF0IGRvIG5vdCBleGlzdCBpbiAnICsgJ3RoZSBwbHVnaW4gb3JkZXJpbmcsIGAlc2AuJywgcGx1Z2luTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIGlmIChFdmVudFBsdWdpblJlZ2lzdHJ5LnBsdWdpbnNbcGx1Z2luSW5kZXhdKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgIVBsdWdpbk1vZHVsZS5leHRyYWN0RXZlbnRzID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IEV2ZW50IHBsdWdpbnMgbXVzdCBpbXBsZW1lbnQgYW4gYGV4dHJhY3RFdmVudHNgICcgKyAnbWV0aG9kLCBidXQgYCVzYCBkb2VzIG5vdC4nLCBwbHVnaW5OYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgRXZlbnRQbHVnaW5SZWdpc3RyeS5wbHVnaW5zW3BsdWdpbkluZGV4XSA9IFBsdWdpbk1vZHVsZTtcbiAgICB2YXIgcHVibGlzaGVkRXZlbnRzID0gUGx1Z2luTW9kdWxlLmV2ZW50VHlwZXM7XG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIHB1Ymxpc2hlZEV2ZW50cykge1xuICAgICAgIXB1Ymxpc2hFdmVudEZvclBsdWdpbihwdWJsaXNoZWRFdmVudHNbZXZlbnROYW1lXSwgUGx1Z2luTW9kdWxlLCBldmVudE5hbWUpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IEZhaWxlZCB0byBwdWJsaXNoIGV2ZW50IGAlc2AgZm9yIHBsdWdpbiBgJXNgLicsIGV2ZW50TmFtZSwgcGx1Z2luTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFB1Ymxpc2hlcyBhbiBldmVudCBzbyB0aGF0IGl0IGNhbiBiZSBkaXNwYXRjaGVkIGJ5IHRoZSBzdXBwbGllZCBwbHVnaW4uXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIERpc3BhdGNoIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBldmVudC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBQbHVnaW5Nb2R1bGUgUGx1Z2luIHB1Ymxpc2hpbmcgdGhlIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgd2FzIHN1Y2Nlc3NmdWxseSBwdWJsaXNoZWQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwdWJsaXNoRXZlbnRGb3JQbHVnaW4oZGlzcGF0Y2hDb25maWcsIFBsdWdpbk1vZHVsZSwgZXZlbnROYW1lKSB7XG4gICEhRXZlbnRQbHVnaW5SZWdpc3RyeS5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3MuaGFzT3duUHJvcGVydHkoZXZlbnROYW1lKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFdmVudFBsdWdpbkh1YjogTW9yZSB0aGFuIG9uZSBwbHVnaW4gYXR0ZW1wdGVkIHRvIHB1Ymxpc2ggdGhlIHNhbWUgJyArICdldmVudCBuYW1lLCBgJXNgLicsIGV2ZW50TmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBFdmVudFBsdWdpblJlZ2lzdHJ5LmV2ZW50TmFtZURpc3BhdGNoQ29uZmlnc1tldmVudE5hbWVdID0gZGlzcGF0Y2hDb25maWc7XG5cbiAgdmFyIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzID0gZGlzcGF0Y2hDb25maWcucGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM7XG4gIGlmIChwaGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgIGZvciAodmFyIHBoYXNlTmFtZSBpbiBwaGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgICAgaWYgKHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzLmhhc093blByb3BlcnR5KHBoYXNlTmFtZSkpIHtcbiAgICAgICAgdmFyIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWUgPSBwaGFzZWRSZWdpc3RyYXRpb25OYW1lc1twaGFzZU5hbWVdO1xuICAgICAgICBwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZShwaGFzZWRSZWdpc3RyYXRpb25OYW1lLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKGRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICBwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZShkaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFB1Ymxpc2hlcyBhIHJlZ2lzdHJhdGlvbiBuYW1lIHRoYXQgaXMgdXNlZCB0byBpZGVudGlmeSBkaXNwYXRjaGVkIGV2ZW50cyBhbmRcbiAqIGNhbiBiZSB1c2VkIHdpdGggYEV2ZW50UGx1Z2luSHViLnB1dExpc3RlbmVyYCB0byByZWdpc3RlciBsaXN0ZW5lcnMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgUmVnaXN0cmF0aW9uIG5hbWUgdG8gYWRkLlxuICogQHBhcmFtIHtvYmplY3R9IFBsdWdpbk1vZHVsZSBQbHVnaW4gcHVibGlzaGluZyB0aGUgZXZlbnQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZShyZWdpc3RyYXRpb25OYW1lLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSkge1xuICAhIUV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV0gPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5IdWI6IE1vcmUgdGhhbiBvbmUgcGx1Z2luIGF0dGVtcHRlZCB0byBwdWJsaXNoIHRoZSBzYW1lICcgKyAncmVnaXN0cmF0aW9uIG5hbWUsIGAlc2AuJywgcmVnaXN0cmF0aW9uTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW3JlZ2lzdHJhdGlvbk5hbWVdID0gUGx1Z2luTW9kdWxlO1xuICBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVEZXBlbmRlbmNpZXNbcmVnaXN0cmF0aW9uTmFtZV0gPSBQbHVnaW5Nb2R1bGUuZXZlbnRUeXBlc1tldmVudE5hbWVdLmRlcGVuZGVuY2llcztcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgcGx1Z2lucyBzbyB0aGF0IHRoZXkgY2FuIGV4dHJhY3QgYW5kIGRpc3BhdGNoIGV2ZW50cy5cbiAqXG4gKiBAc2VlIHtFdmVudFBsdWdpbkh1Yn1cbiAqL1xudmFyIEV2ZW50UGx1Z2luUmVnaXN0cnkgPSB7XG5cbiAgLyoqXG4gICAqIE9yZGVyZWQgbGlzdCBvZiBpbmplY3RlZCBwbHVnaW5zLlxuICAgKi9cbiAgcGx1Z2luczogW10sXG5cbiAgLyoqXG4gICAqIE1hcHBpbmcgZnJvbSBldmVudCBuYW1lIHRvIGRpc3BhdGNoIGNvbmZpZ1xuICAgKi9cbiAgZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzOiB7fSxcblxuICAvKipcbiAgICogTWFwcGluZyBmcm9tIHJlZ2lzdHJhdGlvbiBuYW1lIHRvIHBsdWdpbiBtb2R1bGVcbiAgICovXG4gIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzOiB7fSxcblxuICAvKipcbiAgICogTWFwcGluZyBmcm9tIHJlZ2lzdHJhdGlvbiBuYW1lIHRvIGV2ZW50IG5hbWVcbiAgICovXG4gIHJlZ2lzdHJhdGlvbk5hbWVEZXBlbmRlbmNpZXM6IHt9LFxuXG4gIC8qKlxuICAgKiBJbmplY3RzIGFuIG9yZGVyaW5nIG9mIHBsdWdpbnMgKGJ5IHBsdWdpbiBuYW1lKS4gVGhpcyBhbGxvd3MgdGhlIG9yZGVyaW5nXG4gICAqIHRvIGJlIGRlY291cGxlZCBmcm9tIGluamVjdGlvbiBvZiB0aGUgYWN0dWFsIHBsdWdpbnMgc28gdGhhdCBvcmRlcmluZyBpc1xuICAgKiBhbHdheXMgZGV0ZXJtaW5pc3RpYyByZWdhcmRsZXNzIG9mIHBhY2thZ2luZywgb24tdGhlLWZseSBpbmplY3Rpb24sIGV0Yy5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheX0gSW5qZWN0ZWRFdmVudFBsdWdpbk9yZGVyXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5pbmplY3Rpb24uaW5qZWN0RXZlbnRQbHVnaW5PcmRlcn1cbiAgICovXG4gIGluamVjdEV2ZW50UGx1Z2luT3JkZXI6IGZ1bmN0aW9uIChJbmplY3RlZEV2ZW50UGx1Z2luT3JkZXIpIHtcbiAgICAhIUV2ZW50UGx1Z2luT3JkZXIgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5SZWdpc3RyeTogQ2Fubm90IGluamVjdCBldmVudCBwbHVnaW4gb3JkZXJpbmcgbW9yZSB0aGFuICcgKyAnb25jZS4gWW91IGFyZSBsaWtlbHkgdHJ5aW5nIHRvIGxvYWQgbW9yZSB0aGFuIG9uZSBjb3B5IG9mIFJlYWN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAvLyBDbG9uZSB0aGUgb3JkZXJpbmcgc28gaXQgY2Fubm90IGJlIGR5bmFtaWNhbGx5IG11dGF0ZWQuXG4gICAgRXZlbnRQbHVnaW5PcmRlciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKEluamVjdGVkRXZlbnRQbHVnaW5PcmRlcik7XG4gICAgcmVjb21wdXRlUGx1Z2luT3JkZXJpbmcoKTtcbiAgfSxcblxuICAvKipcbiAgICogSW5qZWN0cyBwbHVnaW5zIHRvIGJlIHVzZWQgYnkgYEV2ZW50UGx1Z2luSHViYC4gVGhlIHBsdWdpbiBuYW1lcyBtdXN0IGJlXG4gICAqIGluIHRoZSBvcmRlcmluZyBpbmplY3RlZCBieSBgaW5qZWN0RXZlbnRQbHVnaW5PcmRlcmAuXG4gICAqXG4gICAqIFBsdWdpbnMgY2FuIGJlIGluamVjdGVkIGFzIHBhcnQgb2YgcGFnZSBpbml0aWFsaXphdGlvbiBvciBvbi10aGUtZmx5LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaW5qZWN0ZWROYW1lc1RvUGx1Z2lucyBNYXAgZnJvbSBuYW1lcyB0byBwbHVnaW4gbW9kdWxlcy5cbiAgICogQGludGVybmFsXG4gICAqIEBzZWUge0V2ZW50UGx1Z2luSHViLmluamVjdGlvbi5pbmplY3RFdmVudFBsdWdpbnNCeU5hbWV9XG4gICAqL1xuICBpbmplY3RFdmVudFBsdWdpbnNCeU5hbWU6IGZ1bmN0aW9uIChpbmplY3RlZE5hbWVzVG9QbHVnaW5zKSB7XG4gICAgdmFyIGlzT3JkZXJpbmdEaXJ0eSA9IGZhbHNlO1xuICAgIGZvciAodmFyIHBsdWdpbk5hbWUgaW4gaW5qZWN0ZWROYW1lc1RvUGx1Z2lucykge1xuICAgICAgaWYgKCFpbmplY3RlZE5hbWVzVG9QbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIFBsdWdpbk1vZHVsZSA9IGluamVjdGVkTmFtZXNUb1BsdWdpbnNbcGx1Z2luTmFtZV07XG4gICAgICBpZiAoIW5hbWVzVG9QbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpIHx8IG5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdICE9PSBQbHVnaW5Nb2R1bGUpIHtcbiAgICAgICAgISFuYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFdmVudFBsdWdpblJlZ2lzdHJ5OiBDYW5ub3QgaW5qZWN0IHR3byBkaWZmZXJlbnQgZXZlbnQgcGx1Z2lucyAnICsgJ3VzaW5nIHRoZSBzYW1lIG5hbWUsIGAlc2AuJywgcGx1Z2luTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICBuYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXSA9IFBsdWdpbk1vZHVsZTtcbiAgICAgICAgaXNPcmRlcmluZ0RpcnR5ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzT3JkZXJpbmdEaXJ0eSkge1xuICAgICAgcmVjb21wdXRlUGx1Z2luT3JkZXJpbmcoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIExvb2tzIHVwIHRoZSBwbHVnaW4gZm9yIHRoZSBzdXBwbGllZCBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IEEgc3ludGhldGljIGV2ZW50LlxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBUaGUgcGx1Z2luIHRoYXQgY3JlYXRlZCB0aGUgc3VwcGxpZWQgZXZlbnQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0UGx1Z2luTW9kdWxlRm9yRXZlbnQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBkaXNwYXRjaENvbmZpZyA9IGV2ZW50LmRpc3BhdGNoQ29uZmlnO1xuICAgIGlmIChkaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lKSB7XG4gICAgICByZXR1cm4gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tkaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lXSB8fCBudWxsO1xuICAgIH1cbiAgICBmb3IgKHZhciBwaGFzZSBpbiBkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgICAgaWYgKCFkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcy5oYXNPd25Qcm9wZXJ0eShwaGFzZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgUGx1Z2luTW9kdWxlID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lc1twaGFzZV1dO1xuICAgICAgaWYgKFBsdWdpbk1vZHVsZSkge1xuICAgICAgICByZXR1cm4gUGx1Z2luTW9kdWxlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogRXhwb3NlZCBmb3IgdW5pdCB0ZXN0aW5nLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Jlc2V0RXZlbnRQbHVnaW5zOiBmdW5jdGlvbiAoKSB7XG4gICAgRXZlbnRQbHVnaW5PcmRlciA9IG51bGw7XG4gICAgZm9yICh2YXIgcGx1Z2luTmFtZSBpbiBuYW1lc1RvUGx1Z2lucykge1xuICAgICAgaWYgKG5hbWVzVG9QbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpKSB7XG4gICAgICAgIGRlbGV0ZSBuYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gICAgRXZlbnRQbHVnaW5SZWdpc3RyeS5wbHVnaW5zLmxlbmd0aCA9IDA7XG5cbiAgICB2YXIgZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M7XG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIGV2ZW50TmFtZURpc3BhdGNoQ29uZmlncykge1xuICAgICAgaWYgKGV2ZW50TmFtZURpc3BhdGNoQ29uZmlncy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKSB7XG4gICAgICAgIGRlbGV0ZSBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3NbZXZlbnROYW1lXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzO1xuICAgIGZvciAodmFyIHJlZ2lzdHJhdGlvbk5hbWUgaW4gcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMpIHtcbiAgICAgIGlmIChyZWdpc3RyYXRpb25OYW1lTW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShyZWdpc3RyYXRpb25OYW1lKSkge1xuICAgICAgICBkZWxldGUgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQbHVnaW5SZWdpc3RyeTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQbHVnaW5VdGlsc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIFJlYWN0RXJyb3JVdGlscyA9IHJlcXVpcmUoJy4vUmVhY3RFcnJvclV0aWxzJyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG4vKipcbiAqIEluamVjdGVkIGRlcGVuZGVuY2llczpcbiAqL1xuXG4vKipcbiAqIC0gYE1vdW50YDogW3JlcXVpcmVkXSBNb2R1bGUgdGhhdCBjYW4gY29udmVydCBiZXR3ZWVuIFJlYWN0IGRvbSBJRHMgYW5kXG4gKiAgIGFjdHVhbCBub2RlIHJlZmVyZW5jZXMuXG4gKi9cbnZhciBpbmplY3Rpb24gPSB7XG4gIE1vdW50OiBudWxsLFxuICBpbmplY3RNb3VudDogZnVuY3Rpb24gKEluamVjdGVkTW91bnQpIHtcbiAgICBpbmplY3Rpb24uTW91bnQgPSBJbmplY3RlZE1vdW50O1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhJbmplY3RlZE1vdW50ICYmIEluamVjdGVkTW91bnQuZ2V0Tm9kZSAmJiBJbmplY3RlZE1vdW50LmdldElELCAnRXZlbnRQbHVnaW5VdGlscy5pbmplY3Rpb24uaW5qZWN0TW91bnQoLi4uKTogSW5qZWN0ZWQgTW91bnQgJyArICdtb2R1bGUgaXMgbWlzc2luZyBnZXROb2RlIG9yIGdldElELicpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xuXG5mdW5jdGlvbiBpc0VuZGlzaCh0b3BMZXZlbFR5cGUpIHtcbiAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZVVwIHx8IHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BUb3VjaEVuZCB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wVG91Y2hDYW5jZWw7XG59XG5cbmZ1bmN0aW9uIGlzTW92ZWlzaCh0b3BMZXZlbFR5cGUpIHtcbiAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU1vdmUgfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoTW92ZTtcbn1cbmZ1bmN0aW9uIGlzU3RhcnRpc2godG9wTGV2ZWxUeXBlKSB7XG4gIHJldHVybiB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duIHx8IHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BUb3VjaFN0YXJ0O1xufVxuXG52YXIgdmFsaWRhdGVFdmVudERpc3BhdGNoZXM7XG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBkaXNwYXRjaExpc3RlbmVycyA9IGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycztcbiAgICB2YXIgZGlzcGF0Y2hJRHMgPSBldmVudC5fZGlzcGF0Y2hJRHM7XG5cbiAgICB2YXIgbGlzdGVuZXJzSXNBcnIgPSBBcnJheS5pc0FycmF5KGRpc3BhdGNoTGlzdGVuZXJzKTtcbiAgICB2YXIgaWRzSXNBcnIgPSBBcnJheS5pc0FycmF5KGRpc3BhdGNoSURzKTtcbiAgICB2YXIgSURzTGVuID0gaWRzSXNBcnIgPyBkaXNwYXRjaElEcy5sZW5ndGggOiBkaXNwYXRjaElEcyA/IDEgOiAwO1xuICAgIHZhciBsaXN0ZW5lcnNMZW4gPSBsaXN0ZW5lcnNJc0FyciA/IGRpc3BhdGNoTGlzdGVuZXJzLmxlbmd0aCA6IGRpc3BhdGNoTGlzdGVuZXJzID8gMSA6IDA7XG5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhpZHNJc0FyciA9PT0gbGlzdGVuZXJzSXNBcnIgJiYgSURzTGVuID09PSBsaXN0ZW5lcnNMZW4sICdFdmVudFBsdWdpblV0aWxzOiBJbnZhbGlkIGBldmVudGAuJykgOiB1bmRlZmluZWQ7XG4gIH07XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggdGhlIGV2ZW50IHRvIHRoZSBsaXN0ZW5lci5cbiAqIEBwYXJhbSB7U3ludGhldGljRXZlbnR9IGV2ZW50IFN5bnRoZXRpY0V2ZW50IHRvIGhhbmRsZVxuICogQHBhcmFtIHtib29sZWFufSBzaW11bGF0ZWQgSWYgdGhlIGV2ZW50IGlzIHNpbXVsYXRlZCAoY2hhbmdlcyBleG4gYmVoYXZpb3IpXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBsaXN0ZW5lciBBcHBsaWNhdGlvbi1sZXZlbCBjYWxsYmFja1xuICogQHBhcmFtIHtzdHJpbmd9IGRvbUlEIERPTSBpZCB0byBwYXNzIHRvIHRoZSBjYWxsYmFjay5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZURpc3BhdGNoKGV2ZW50LCBzaW11bGF0ZWQsIGxpc3RlbmVyLCBkb21JRCkge1xuICB2YXIgdHlwZSA9IGV2ZW50LnR5cGUgfHwgJ3Vua25vd24tZXZlbnQnO1xuICBldmVudC5jdXJyZW50VGFyZ2V0ID0gaW5qZWN0aW9uLk1vdW50LmdldE5vZGUoZG9tSUQpO1xuICBpZiAoc2ltdWxhdGVkKSB7XG4gICAgUmVhY3RFcnJvclV0aWxzLmludm9rZUd1YXJkZWRDYWxsYmFja1dpdGhDYXRjaCh0eXBlLCBsaXN0ZW5lciwgZXZlbnQsIGRvbUlEKTtcbiAgfSBlbHNlIHtcbiAgICBSZWFjdEVycm9yVXRpbHMuaW52b2tlR3VhcmRlZENhbGxiYWNrKHR5cGUsIGxpc3RlbmVyLCBldmVudCwgZG9tSUQpO1xuICB9XG4gIGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBudWxsO1xufVxuXG4vKipcbiAqIFN0YW5kYXJkL3NpbXBsZSBpdGVyYXRpb24gdGhyb3VnaCBhbiBldmVudCdzIGNvbGxlY3RlZCBkaXNwYXRjaGVzLlxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXIoZXZlbnQsIHNpbXVsYXRlZCkge1xuICB2YXIgZGlzcGF0Y2hMaXN0ZW5lcnMgPSBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnM7XG4gIHZhciBkaXNwYXRjaElEcyA9IGV2ZW50Ll9kaXNwYXRjaElEcztcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcyhldmVudCk7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcnMpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNwYXRjaExpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLyBMaXN0ZW5lcnMgYW5kIElEcyBhcmUgdHdvIHBhcmFsbGVsIGFycmF5cyB0aGF0IGFyZSBhbHdheXMgaW4gc3luYy5cbiAgICAgIGV4ZWN1dGVEaXNwYXRjaChldmVudCwgc2ltdWxhdGVkLCBkaXNwYXRjaExpc3RlbmVyc1tpXSwgZGlzcGF0Y2hJRHNbaV0pO1xuICAgIH1cbiAgfSBlbHNlIGlmIChkaXNwYXRjaExpc3RlbmVycykge1xuICAgIGV4ZWN1dGVEaXNwYXRjaChldmVudCwgc2ltdWxhdGVkLCBkaXNwYXRjaExpc3RlbmVycywgZGlzcGF0Y2hJRHMpO1xuICB9XG4gIGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycyA9IG51bGw7XG4gIGV2ZW50Ll9kaXNwYXRjaElEcyA9IG51bGw7XG59XG5cbi8qKlxuICogU3RhbmRhcmQvc2ltcGxlIGl0ZXJhdGlvbiB0aHJvdWdoIGFuIGV2ZW50J3MgY29sbGVjdGVkIGRpc3BhdGNoZXMsIGJ1dCBzdG9wc1xuICogYXQgdGhlIGZpcnN0IGRpc3BhdGNoIGV4ZWN1dGlvbiByZXR1cm5pbmcgdHJ1ZSwgYW5kIHJldHVybnMgdGhhdCBpZC5cbiAqXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBpZCBvZiB0aGUgZmlyc3QgZGlzcGF0Y2ggZXhlY3V0aW9uIHdobydzIGxpc3RlbmVyIHJldHVybnNcbiAqIHRydWUsIG9yIG51bGwgaWYgbm8gbGlzdGVuZXIgcmV0dXJuZWQgdHJ1ZS5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZURpc3BhdGNoZXNJbk9yZGVyU3RvcEF0VHJ1ZUltcGwoZXZlbnQpIHtcbiAgdmFyIGRpc3BhdGNoTGlzdGVuZXJzID0gZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzO1xuICB2YXIgZGlzcGF0Y2hJRHMgPSBldmVudC5fZGlzcGF0Y2hJRHM7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFsaWRhdGVFdmVudERpc3BhdGNoZXMoZXZlbnQpO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KGRpc3BhdGNoTGlzdGVuZXJzKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlzcGF0Y2hMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy8gTGlzdGVuZXJzIGFuZCBJRHMgYXJlIHR3byBwYXJhbGxlbCBhcnJheXMgdGhhdCBhcmUgYWx3YXlzIGluIHN5bmMuXG4gICAgICBpZiAoZGlzcGF0Y2hMaXN0ZW5lcnNbaV0oZXZlbnQsIGRpc3BhdGNoSURzW2ldKSkge1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2hJRHNbaV07XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGRpc3BhdGNoTGlzdGVuZXJzKSB7XG4gICAgaWYgKGRpc3BhdGNoTGlzdGVuZXJzKGV2ZW50LCBkaXNwYXRjaElEcykpIHtcbiAgICAgIHJldHVybiBkaXNwYXRjaElEcztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQHNlZSBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlSW1wbFxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlKGV2ZW50KSB7XG4gIHZhciByZXQgPSBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlSW1wbChldmVudCk7XG4gIGV2ZW50Ll9kaXNwYXRjaElEcyA9IG51bGw7XG4gIGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycyA9IG51bGw7XG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogRXhlY3V0aW9uIG9mIGEgXCJkaXJlY3RcIiBkaXNwYXRjaCAtIHRoZXJlIG11c3QgYmUgYXQgbW9zdCBvbmUgZGlzcGF0Y2hcbiAqIGFjY3VtdWxhdGVkIG9uIHRoZSBldmVudCBvciBpdCBpcyBjb25zaWRlcmVkIGFuIGVycm9yLiBJdCBkb2Vzbid0IHJlYWxseSBtYWtlXG4gKiBzZW5zZSBmb3IgYW4gZXZlbnQgd2l0aCBtdWx0aXBsZSBkaXNwYXRjaGVzIChidWJibGVkKSB0byBrZWVwIHRyYWNrIG9mIHRoZVxuICogcmV0dXJuIHZhbHVlcyBhdCBlYWNoIGRpc3BhdGNoIGV4ZWN1dGlvbiwgYnV0IGl0IGRvZXMgdGVuZCB0byBtYWtlIHNlbnNlIHdoZW5cbiAqIGRlYWxpbmcgd2l0aCBcImRpcmVjdFwiIGRpc3BhdGNoZXMuXG4gKlxuICogQHJldHVybiB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBleGVjdXRpbmcgdGhlIHNpbmdsZSBkaXNwYXRjaC5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZURpcmVjdERpc3BhdGNoKGV2ZW50KSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFsaWRhdGVFdmVudERpc3BhdGNoZXMoZXZlbnQpO1xuICB9XG4gIHZhciBkaXNwYXRjaExpc3RlbmVyID0gZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzO1xuICB2YXIgZGlzcGF0Y2hJRCA9IGV2ZW50Ll9kaXNwYXRjaElEcztcbiAgISFBcnJheS5pc0FycmF5KGRpc3BhdGNoTGlzdGVuZXIpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2V4ZWN1dGVEaXJlY3REaXNwYXRjaCguLi4pOiBJbnZhbGlkIGBldmVudGAuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB2YXIgcmVzID0gZGlzcGF0Y2hMaXN0ZW5lciA/IGRpc3BhdGNoTGlzdGVuZXIoZXZlbnQsIGRpc3BhdGNoSUQpIDogbnVsbDtcbiAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gbnVsbDtcbiAgZXZlbnQuX2Rpc3BhdGNoSURzID0gbnVsbDtcbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBldmVudFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZmYgbnVtYmVyIG9mIGRpc3BhdGNoZXMgYWNjdW11bGF0ZWQgaXMgZ3JlYXRlciB0aGFuIDAuXG4gKi9cbmZ1bmN0aW9uIGhhc0Rpc3BhdGNoZXMoZXZlbnQpIHtcbiAgcmV0dXJuICEhZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzO1xufVxuXG4vKipcbiAqIEdlbmVyYWwgdXRpbGl0aWVzIHRoYXQgYXJlIHVzZWZ1bCBpbiBjcmVhdGluZyBjdXN0b20gRXZlbnQgUGx1Z2lucy5cbiAqL1xudmFyIEV2ZW50UGx1Z2luVXRpbHMgPSB7XG4gIGlzRW5kaXNoOiBpc0VuZGlzaCxcbiAgaXNNb3ZlaXNoOiBpc01vdmVpc2gsXG4gIGlzU3RhcnRpc2g6IGlzU3RhcnRpc2gsXG5cbiAgZXhlY3V0ZURpcmVjdERpc3BhdGNoOiBleGVjdXRlRGlyZWN0RGlzcGF0Y2gsXG4gIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlcjogZXhlY3V0ZURpc3BhdGNoZXNJbk9yZGVyLFxuICBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlOiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlLFxuICBoYXNEaXNwYXRjaGVzOiBoYXNEaXNwYXRjaGVzLFxuXG4gIGdldE5vZGU6IGZ1bmN0aW9uIChpZCkge1xuICAgIHJldHVybiBpbmplY3Rpb24uTW91bnQuZ2V0Tm9kZShpZCk7XG4gIH0sXG4gIGdldElEOiBmdW5jdGlvbiAobm9kZSkge1xuICAgIHJldHVybiBpbmplY3Rpb24uTW91bnQuZ2V0SUQobm9kZSk7XG4gIH0sXG5cbiAgaW5qZWN0aW9uOiBpbmplY3Rpb25cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQbHVnaW5VdGlsczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQcm9wYWdhdG9yc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xuXG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIGFjY3VtdWxhdGVJbnRvID0gcmVxdWlyZSgnLi9hY2N1bXVsYXRlSW50bycpO1xudmFyIGZvckVhY2hBY2N1bXVsYXRlZCA9IHJlcXVpcmUoJy4vZm9yRWFjaEFjY3VtdWxhdGVkJyk7XG5cbnZhciBQcm9wYWdhdGlvblBoYXNlcyA9IEV2ZW50Q29uc3RhbnRzLlByb3BhZ2F0aW9uUGhhc2VzO1xudmFyIGdldExpc3RlbmVyID0gRXZlbnRQbHVnaW5IdWIuZ2V0TGlzdGVuZXI7XG5cbi8qKlxuICogU29tZSBldmVudCB0eXBlcyBoYXZlIGEgbm90aW9uIG9mIGRpZmZlcmVudCByZWdpc3RyYXRpb24gbmFtZXMgZm9yIGRpZmZlcmVudFxuICogXCJwaGFzZXNcIiBvZiBwcm9wYWdhdGlvbi4gVGhpcyBmaW5kcyBsaXN0ZW5lcnMgYnkgYSBnaXZlbiBwaGFzZS5cbiAqL1xuZnVuY3Rpb24gbGlzdGVuZXJBdFBoYXNlKGlkLCBldmVudCwgcHJvcGFnYXRpb25QaGFzZSkge1xuICB2YXIgcmVnaXN0cmF0aW9uTmFtZSA9IGV2ZW50LmRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzW3Byb3BhZ2F0aW9uUGhhc2VdO1xuICByZXR1cm4gZ2V0TGlzdGVuZXIoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpO1xufVxuXG4vKipcbiAqIFRhZ3MgYSBgU3ludGhldGljRXZlbnRgIHdpdGggZGlzcGF0Y2hlZCBsaXN0ZW5lcnMuIENyZWF0aW5nIHRoaXMgZnVuY3Rpb25cbiAqIGhlcmUsIGFsbG93cyB1cyB0byBub3QgaGF2ZSB0byBiaW5kIG9yIGNyZWF0ZSBmdW5jdGlvbnMgZm9yIGVhY2ggZXZlbnQuXG4gKiBNdXRhdGluZyB0aGUgZXZlbnQncyBtZW1iZXJzIGFsbG93cyB1cyB0byBub3QgaGF2ZSB0byBjcmVhdGUgYSB3cmFwcGluZ1xuICogXCJkaXNwYXRjaFwiIG9iamVjdCB0aGF0IHBhaXJzIHRoZSBldmVudCB3aXRoIHRoZSBsaXN0ZW5lci5cbiAqL1xuZnVuY3Rpb24gYWNjdW11bGF0ZURpcmVjdGlvbmFsRGlzcGF0Y2hlcyhkb21JRCwgdXB3YXJkcywgZXZlbnQpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhkb21JRCwgJ0Rpc3BhdGNoaW5nIGlkIG11c3Qgbm90IGJlIG51bGwnKSA6IHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgcGhhc2UgPSB1cHdhcmRzID8gUHJvcGFnYXRpb25QaGFzZXMuYnViYmxlZCA6IFByb3BhZ2F0aW9uUGhhc2VzLmNhcHR1cmVkO1xuICB2YXIgbGlzdGVuZXIgPSBsaXN0ZW5lckF0UGhhc2UoZG9tSUQsIGV2ZW50LCBwaGFzZSk7XG4gIGlmIChsaXN0ZW5lcikge1xuICAgIGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycyA9IGFjY3VtdWxhdGVJbnRvKGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycywgbGlzdGVuZXIpO1xuICAgIGV2ZW50Ll9kaXNwYXRjaElEcyA9IGFjY3VtdWxhdGVJbnRvKGV2ZW50Ll9kaXNwYXRjaElEcywgZG9tSUQpO1xuICB9XG59XG5cbi8qKlxuICogQ29sbGVjdCBkaXNwYXRjaGVzIChtdXN0IGJlIGVudGlyZWx5IGNvbGxlY3RlZCBiZWZvcmUgZGlzcGF0Y2hpbmcgLSBzZWUgdW5pdFxuICogdGVzdHMpLiBMYXppbHkgYWxsb2NhdGUgdGhlIGFycmF5IHRvIGNvbnNlcnZlIG1lbW9yeS4gIFdlIG11c3QgbG9vcCB0aHJvdWdoXG4gKiBlYWNoIGV2ZW50IGFuZCBwZXJmb3JtIHRoZSB0cmF2ZXJzYWwgZm9yIGVhY2ggb25lLiBXZSBjYW5ub3QgcGVyZm9ybSBhXG4gKiBzaW5nbGUgdHJhdmVyc2FsIGZvciB0aGUgZW50aXJlIGNvbGxlY3Rpb24gb2YgZXZlbnRzIGJlY2F1c2UgZWFjaCBldmVudCBtYXlcbiAqIGhhdmUgYSBkaWZmZXJlbnQgdGFyZ2V0LlxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlKGV2ZW50KSB7XG4gIGlmIChldmVudCAmJiBldmVudC5kaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgIEV2ZW50UGx1Z2luSHViLmluamVjdGlvbi5nZXRJbnN0YW5jZUhhbmRsZSgpLnRyYXZlcnNlVHdvUGhhc2UoZXZlbnQuZGlzcGF0Y2hNYXJrZXIsIGFjY3VtdWxhdGVEaXJlY3Rpb25hbERpc3BhdGNoZXMsIGV2ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIFNhbWUgYXMgYGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGVgLCBidXQgc2tpcHMgb3ZlciB0aGUgdGFyZ2V0SUQuXG4gKi9cbmZ1bmN0aW9uIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGVTa2lwVGFyZ2V0KGV2ZW50KSB7XG4gIGlmIChldmVudCAmJiBldmVudC5kaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgIEV2ZW50UGx1Z2luSHViLmluamVjdGlvbi5nZXRJbnN0YW5jZUhhbmRsZSgpLnRyYXZlcnNlVHdvUGhhc2VTa2lwVGFyZ2V0KGV2ZW50LmRpc3BhdGNoTWFya2VyLCBhY2N1bXVsYXRlRGlyZWN0aW9uYWxEaXNwYXRjaGVzLCBldmVudCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBY2N1bXVsYXRlcyB3aXRob3V0IHJlZ2FyZCB0byBkaXJlY3Rpb24sIGRvZXMgbm90IGxvb2sgZm9yIHBoYXNlZFxuICogcmVnaXN0cmF0aW9uIG5hbWVzLiBTYW1lIGFzIGBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlc1NpbmdsZWAgYnV0IHdpdGhvdXRcbiAqIHJlcXVpcmluZyB0aGF0IHRoZSBgZGlzcGF0Y2hNYXJrZXJgIGJlIHRoZSBzYW1lIGFzIHRoZSBkaXNwYXRjaGVkIElELlxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlRGlzcGF0Y2hlcyhpZCwgaWdub3JlZERpcmVjdGlvbiwgZXZlbnQpIHtcbiAgaWYgKGV2ZW50ICYmIGV2ZW50LmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICB2YXIgcmVnaXN0cmF0aW9uTmFtZSA9IGV2ZW50LmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWU7XG4gICAgdmFyIGxpc3RlbmVyID0gZ2V0TGlzdGVuZXIoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpO1xuICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gYWNjdW11bGF0ZUludG8oZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzLCBsaXN0ZW5lcik7XG4gICAgICBldmVudC5fZGlzcGF0Y2hJRHMgPSBhY2N1bXVsYXRlSW50byhldmVudC5fZGlzcGF0Y2hJRHMsIGlkKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBY2N1bXVsYXRlcyBkaXNwYXRjaGVzIG9uIGFuIGBTeW50aGV0aWNFdmVudGAsIGJ1dCBvbmx5IGZvciB0aGVcbiAqIGBkaXNwYXRjaE1hcmtlcmAuXG4gKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBldmVudFxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlc1NpbmdsZShldmVudCkge1xuICBpZiAoZXZlbnQgJiYgZXZlbnQuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIGFjY3VtdWxhdGVEaXNwYXRjaGVzKGV2ZW50LmRpc3BhdGNoTWFya2VyLCBudWxsLCBldmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudHMpIHtcbiAgZm9yRWFjaEFjY3VtdWxhdGVkKGV2ZW50cywgYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NpbmdsZSk7XG59XG5cbmZ1bmN0aW9uIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTa2lwVGFyZ2V0KGV2ZW50cykge1xuICBmb3JFYWNoQWNjdW11bGF0ZWQoZXZlbnRzLCBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlU2tpcFRhcmdldCk7XG59XG5cbmZ1bmN0aW9uIGFjY3VtdWxhdGVFbnRlckxlYXZlRGlzcGF0Y2hlcyhsZWF2ZSwgZW50ZXIsIGZyb21JRCwgdG9JRCkge1xuICBFdmVudFBsdWdpbkh1Yi5pbmplY3Rpb24uZ2V0SW5zdGFuY2VIYW5kbGUoKS50cmF2ZXJzZUVudGVyTGVhdmUoZnJvbUlELCB0b0lELCBhY2N1bXVsYXRlRGlzcGF0Y2hlcywgbGVhdmUsIGVudGVyKTtcbn1cblxuZnVuY3Rpb24gYWNjdW11bGF0ZURpcmVjdERpc3BhdGNoZXMoZXZlbnRzKSB7XG4gIGZvckVhY2hBY2N1bXVsYXRlZChldmVudHMsIGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzU2luZ2xlKTtcbn1cblxuLyoqXG4gKiBBIHNtYWxsIHNldCBvZiBwcm9wYWdhdGlvbiBwYXR0ZXJucywgZWFjaCBvZiB3aGljaCB3aWxsIGFjY2VwdCBhIHNtYWxsIGFtb3VudFxuICogb2YgaW5mb3JtYXRpb24sIGFuZCBnZW5lcmF0ZSBhIHNldCBvZiBcImRpc3BhdGNoIHJlYWR5IGV2ZW50IG9iamVjdHNcIiAtIHdoaWNoXG4gKiBhcmUgc2V0cyBvZiBldmVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBhbm5vdGF0ZWQgd2l0aCBhIHNldCBvZiBkaXNwYXRjaGVkXG4gKiBsaXN0ZW5lciBmdW5jdGlvbnMvaWRzLiBUaGUgQVBJIGlzIGRlc2lnbmVkIHRoaXMgd2F5IHRvIGRpc2NvdXJhZ2UgdGhlc2VcbiAqIHByb3BhZ2F0aW9uIHN0cmF0ZWdpZXMgZnJvbSBhY3R1YWxseSBleGVjdXRpbmcgdGhlIGRpc3BhdGNoZXMsIHNpbmNlIHdlXG4gKiBhbHdheXMgd2FudCB0byBjb2xsZWN0IHRoZSBlbnRpcmUgc2V0IG9mIGRpc3BhdGNoZXMgYmVmb3JlIGV4ZWN1dGluZyBldmVudCBhXG4gKiBzaW5nbGUgb25lLlxuICpcbiAqIEBjb25zdHJ1Y3RvciBFdmVudFByb3BhZ2F0b3JzXG4gKi9cbnZhciBFdmVudFByb3BhZ2F0b3JzID0ge1xuICBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzOiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzLFxuICBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2tpcFRhcmdldDogYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NraXBUYXJnZXQsXG4gIGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzOiBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlcyxcbiAgYWNjdW11bGF0ZUVudGVyTGVhdmVEaXNwYXRjaGVzOiBhY2N1bXVsYXRlRW50ZXJMZWF2ZURpc3BhdGNoZXNcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQcm9wYWdhdG9yczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZ2V0VGV4dENvbnRlbnRBY2Nlc3NvciA9IHJlcXVpcmUoJy4vZ2V0VGV4dENvbnRlbnRBY2Nlc3NvcicpO1xuXG4vKipcbiAqIFRoaXMgaGVscGVyIGNsYXNzIHN0b3JlcyBpbmZvcm1hdGlvbiBhYm91dCB0ZXh0IGNvbnRlbnQgb2YgYSB0YXJnZXQgbm9kZSxcbiAqIGFsbG93aW5nIGNvbXBhcmlzb24gb2YgY29udGVudCBiZWZvcmUgYW5kIGFmdGVyIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogSWRlbnRpZnkgdGhlIG5vZGUgd2hlcmUgc2VsZWN0aW9uIGN1cnJlbnRseSBiZWdpbnMsIHRoZW4gb2JzZXJ2ZVxuICogYm90aCBpdHMgdGV4dCBjb250ZW50IGFuZCBpdHMgY3VycmVudCBwb3NpdGlvbiBpbiB0aGUgRE9NLiBTaW5jZSB0aGVcbiAqIGJyb3dzZXIgbWF5IG5hdGl2ZWx5IHJlcGxhY2UgdGhlIHRhcmdldCBub2RlIGR1cmluZyBjb21wb3NpdGlvbiwgd2UgY2FuXG4gKiB1c2UgaXRzIHBvc2l0aW9uIHRvIGZpbmQgaXRzIHJlcGxhY2VtZW50LlxuICpcbiAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHJvb3RcbiAqL1xuZnVuY3Rpb24gRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlKHJvb3QpIHtcbiAgdGhpcy5fcm9vdCA9IHJvb3Q7XG4gIHRoaXMuX3N0YXJ0VGV4dCA9IHRoaXMuZ2V0VGV4dCgpO1xuICB0aGlzLl9mYWxsYmFja1RleHQgPSBudWxsO1xufVxuXG5hc3NpZ24oRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlLnByb3RvdHlwZSwge1xuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcm9vdCA9IG51bGw7XG4gICAgdGhpcy5fc3RhcnRUZXh0ID0gbnVsbDtcbiAgICB0aGlzLl9mYWxsYmFja1RleHQgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCB0ZXh0IG9mIGlucHV0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXRUZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCd2YWx1ZScgaW4gdGhpcy5fcm9vdCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Jvb3QudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9yb290W2dldFRleHRDb250ZW50QWNjZXNzb3IoKV07XG4gIH0sXG5cbiAgLyoqXG4gICAqIERldGVybWluZSB0aGUgZGlmZmVyaW5nIHN1YnN0cmluZyBiZXR3ZWVuIHRoZSBpbml0aWFsbHkgc3RvcmVkXG4gICAqIHRleHQgY29udGVudCBhbmQgdGhlIGN1cnJlbnQgY29udGVudC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0RGF0YTogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9mYWxsYmFja1RleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9mYWxsYmFja1RleHQ7XG4gICAgfVxuXG4gICAgdmFyIHN0YXJ0O1xuICAgIHZhciBzdGFydFZhbHVlID0gdGhpcy5fc3RhcnRUZXh0O1xuICAgIHZhciBzdGFydExlbmd0aCA9IHN0YXJ0VmFsdWUubGVuZ3RoO1xuICAgIHZhciBlbmQ7XG4gICAgdmFyIGVuZFZhbHVlID0gdGhpcy5nZXRUZXh0KCk7XG4gICAgdmFyIGVuZExlbmd0aCA9IGVuZFZhbHVlLmxlbmd0aDtcblxuICAgIGZvciAoc3RhcnQgPSAwOyBzdGFydCA8IHN0YXJ0TGVuZ3RoOyBzdGFydCsrKSB7XG4gICAgICBpZiAoc3RhcnRWYWx1ZVtzdGFydF0gIT09IGVuZFZhbHVlW3N0YXJ0XSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbWluRW5kID0gc3RhcnRMZW5ndGggLSBzdGFydDtcbiAgICBmb3IgKGVuZCA9IDE7IGVuZCA8PSBtaW5FbmQ7IGVuZCsrKSB7XG4gICAgICBpZiAoc3RhcnRWYWx1ZVtzdGFydExlbmd0aCAtIGVuZF0gIT09IGVuZFZhbHVlW2VuZExlbmd0aCAtIGVuZF0pIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNsaWNlVGFpbCA9IGVuZCA+IDEgPyAxIC0gZW5kIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuX2ZhbGxiYWNrVGV4dCA9IGVuZFZhbHVlLnNsaWNlKHN0YXJ0LCBzbGljZVRhaWwpO1xuICAgIHJldHVybiB0aGlzLl9mYWxsYmFja1RleHQ7XG4gIH1cbn0pO1xuXG5Qb29sZWRDbGFzcy5hZGRQb29saW5nVG8oRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEhUTUxET01Qcm9wZXJ0eUNvbmZpZ1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTVByb3BlcnR5ID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eScpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIE1VU1RfVVNFX0FUVFJJQlVURSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5NVVNUX1VTRV9BVFRSSUJVVEU7XG52YXIgTVVTVF9VU0VfUFJPUEVSVFkgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uTVVTVF9VU0VfUFJPUEVSVFk7XG52YXIgSEFTX0JPT0xFQU5fVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX0JPT0xFQU5fVkFMVUU7XG52YXIgSEFTX1NJREVfRUZGRUNUUyA9IERPTVByb3BlcnR5LmluamVjdGlvbi5IQVNfU0lERV9FRkZFQ1RTO1xudmFyIEhBU19OVU1FUklDX1ZBTFVFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLkhBU19OVU1FUklDX1ZBTFVFO1xudmFyIEhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLkhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFO1xudmFyIEhBU19PVkVSTE9BREVEX0JPT0xFQU5fVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRTtcblxudmFyIGhhc1NWRztcbmlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcbiAgdmFyIGltcGxlbWVudGF0aW9uID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb247XG4gIGhhc1NWRyA9IGltcGxlbWVudGF0aW9uICYmIGltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUgJiYgaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgnaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNCYXNpY1N0cnVjdHVyZScsICcxLjEnKTtcbn1cblxudmFyIEhUTUxET01Qcm9wZXJ0eUNvbmZpZyA9IHtcbiAgaXNDdXN0b21BdHRyaWJ1dGU6IFJlZ0V4cC5wcm90b3R5cGUudGVzdC5iaW5kKC9eKGRhdGF8YXJpYSktW2Etel9dW2EtelxcZF8uXFwtXSokLyksXG4gIFByb3BlcnRpZXM6IHtcbiAgICAvKipcbiAgICAgKiBTdGFuZGFyZCBQcm9wZXJ0aWVzXG4gICAgICovXG4gICAgYWNjZXB0OiBudWxsLFxuICAgIGFjY2VwdENoYXJzZXQ6IG51bGwsXG4gICAgYWNjZXNzS2V5OiBudWxsLFxuICAgIGFjdGlvbjogbnVsbCxcbiAgICBhbGxvd0Z1bGxTY3JlZW46IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGFsbG93VHJhbnNwYXJlbmN5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgYWx0OiBudWxsLFxuICAgIGFzeW5jOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBhdXRvQ29tcGxldGU6IG51bGwsXG4gICAgLy8gYXV0b0ZvY3VzIGlzIHBvbHlmaWxsZWQvbm9ybWFsaXplZCBieSBBdXRvRm9jdXNVdGlsc1xuICAgIC8vIGF1dG9Gb2N1czogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgYXV0b1BsYXk6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNhcHR1cmU6IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNlbGxQYWRkaW5nOiBudWxsLFxuICAgIGNlbGxTcGFjaW5nOiBudWxsLFxuICAgIGNoYXJTZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBjaGFsbGVuZ2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBjaGVja2VkOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNsYXNzSUQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAvLyBUbyBzZXQgY2xhc3NOYW1lIG9uIFNWRyBlbGVtZW50cywgaXQncyBuZWNlc3NhcnkgdG8gdXNlIC5zZXRBdHRyaWJ1dGU7XG4gICAgLy8gdGhpcyB3b3JrcyBvbiBIVE1MIGVsZW1lbnRzIHRvbyBpbiBhbGwgYnJvd3NlcnMgZXhjZXB0IElFOC4gQ29udmVuaWVudGx5LFxuICAgIC8vIElFOCBkb2Vzbid0IHN1cHBvcnQgU1ZHIGFuZCBzbyB3ZSBjYW4gc2ltcGx5IHVzZSB0aGUgYXR0cmlidXRlIGluXG4gICAgLy8gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IFNWRyBhbmQgdGhlIHByb3BlcnR5IGluIGJyb3dzZXJzIHRoYXQgZG9uJ3QsXG4gICAgLy8gcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIEhUTUwgb3IgU1ZHLlxuICAgIGNsYXNzTmFtZTogaGFzU1ZHID8gTVVTVF9VU0VfQVRUUklCVVRFIDogTVVTVF9VU0VfUFJPUEVSVFksXG4gICAgY29sczogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUsXG4gICAgY29sU3BhbjogbnVsbCxcbiAgICBjb250ZW50OiBudWxsLFxuICAgIGNvbnRlbnRFZGl0YWJsZTogbnVsbCxcbiAgICBjb250ZXh0TWVudTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGNvbnRyb2xzOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNvb3JkczogbnVsbCxcbiAgICBjcm9zc09yaWdpbjogbnVsbCxcbiAgICBkYXRhOiBudWxsLCAvLyBGb3IgYDxvYmplY3QgLz5gIGFjdHMgYXMgYHNyY2AuXG4gICAgZGF0ZVRpbWU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAnZGVmYXVsdCc6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGRlZmVyOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBkaXI6IG51bGwsXG4gICAgZGlzYWJsZWQ6IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGRvd25sb2FkOiBIQVNfT1ZFUkxPQURFRF9CT09MRUFOX1ZBTFVFLFxuICAgIGRyYWdnYWJsZTogbnVsbCxcbiAgICBlbmNUeXBlOiBudWxsLFxuICAgIGZvcm06IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb3JtQWN0aW9uOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZm9ybUVuY1R5cGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb3JtTWV0aG9kOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZm9ybU5vVmFsaWRhdGU6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGZvcm1UYXJnZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmcmFtZUJvcmRlcjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGhlYWRlcnM6IG51bGwsXG4gICAgaGVpZ2h0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaGlkZGVuOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBoaWdoOiBudWxsLFxuICAgIGhyZWY6IG51bGwsXG4gICAgaHJlZkxhbmc6IG51bGwsXG4gICAgaHRtbEZvcjogbnVsbCxcbiAgICBodHRwRXF1aXY6IG51bGwsXG4gICAgaWNvbjogbnVsbCxcbiAgICBpZDogTVVTVF9VU0VfUFJPUEVSVFksXG4gICAgaW5wdXRNb2RlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaW50ZWdyaXR5OiBudWxsLFxuICAgIGlzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAga2V5UGFyYW1zOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAga2V5VHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGtpbmQ6IG51bGwsXG4gICAgbGFiZWw6IG51bGwsXG4gICAgbGFuZzogbnVsbCxcbiAgICBsaXN0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbG9vcDogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBsb3c6IG51bGwsXG4gICAgbWFuaWZlc3Q6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtYXJnaW5IZWlnaHQ6IG51bGwsXG4gICAgbWFyZ2luV2lkdGg6IG51bGwsXG4gICAgbWF4OiBudWxsLFxuICAgIG1heExlbmd0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG1lZGlhOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWVkaWFHcm91cDogbnVsbCxcbiAgICBtZXRob2Q6IG51bGwsXG4gICAgbWluOiBudWxsLFxuICAgIG1pbkxlbmd0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG11bHRpcGxlOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIG11dGVkOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIG5hbWU6IG51bGwsXG4gICAgbm9uY2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBub1ZhbGlkYXRlOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBvcGVuOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBvcHRpbXVtOiBudWxsLFxuICAgIHBhdHRlcm46IG51bGwsXG4gICAgcGxhY2Vob2xkZXI6IG51bGwsXG4gICAgcG9zdGVyOiBudWxsLFxuICAgIHByZWxvYWQ6IG51bGwsXG4gICAgcmFkaW9Hcm91cDogbnVsbCxcbiAgICByZWFkT25seTogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICByZWw6IG51bGwsXG4gICAgcmVxdWlyZWQ6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIHJldmVyc2VkOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICByb2xlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcm93czogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUsXG4gICAgcm93U3BhbjogbnVsbCxcbiAgICBzYW5kYm94OiBudWxsLFxuICAgIHNjb3BlOiBudWxsLFxuICAgIHNjb3BlZDogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgc2Nyb2xsaW5nOiBudWxsLFxuICAgIHNlYW1sZXNzOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBzZWxlY3RlZDogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBzaGFwZTogbnVsbCxcbiAgICBzaXplOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSxcbiAgICBzaXplczogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHNwYW46IEhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFLFxuICAgIHNwZWxsQ2hlY2s6IG51bGwsXG4gICAgc3JjOiBudWxsLFxuICAgIHNyY0RvYzogTVVTVF9VU0VfUFJPUEVSVFksXG4gICAgc3JjTGFuZzogbnVsbCxcbiAgICBzcmNTZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdGFydDogSEFTX05VTUVSSUNfVkFMVUUsXG4gICAgc3RlcDogbnVsbCxcbiAgICBzdHlsZTogbnVsbCxcbiAgICBzdW1tYXJ5OiBudWxsLFxuICAgIHRhYkluZGV4OiBudWxsLFxuICAgIHRhcmdldDogbnVsbCxcbiAgICB0aXRsZTogbnVsbCxcbiAgICB0eXBlOiBudWxsLFxuICAgIHVzZU1hcDogbnVsbCxcbiAgICB2YWx1ZTogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfU0lERV9FRkZFQ1RTLFxuICAgIHdpZHRoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgd21vZGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB3cmFwOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogUkRGYSBQcm9wZXJ0aWVzXG4gICAgICovXG4gICAgYWJvdXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBkYXRhdHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGlubGlzdDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHByZWZpeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIHByb3BlcnR5IGlzIGFsc28gc3VwcG9ydGVkIGZvciBPcGVuR3JhcGggaW4gbWV0YSB0YWdzLlxuICAgIHByb3BlcnR5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcmVzb3VyY2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAndHlwZW9mJzogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHZvY2FiOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cbiAgICAvKipcbiAgICAgKiBOb24tc3RhbmRhcmQgUHJvcGVydGllc1xuICAgICAqL1xuICAgIC8vIGF1dG9DYXBpdGFsaXplIGFuZCBhdXRvQ29ycmVjdCBhcmUgc3VwcG9ydGVkIGluIE1vYmlsZSBTYWZhcmkgZm9yXG4gICAgLy8ga2V5Ym9hcmQgaGludHMuXG4gICAgYXV0b0NhcGl0YWxpemU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBhdXRvQ29ycmVjdDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIGF1dG9TYXZlIGFsbG93cyBXZWJLaXQvQmxpbmsgdG8gcGVyc2lzdCB2YWx1ZXMgb2YgaW5wdXQgZmllbGRzIG9uIHBhZ2UgcmVsb2Fkc1xuICAgIGF1dG9TYXZlOiBudWxsLFxuICAgIC8vIGNvbG9yIGlzIGZvciBTYWZhcmkgbWFzay1pY29uIGxpbmtcbiAgICBjb2xvcjogbnVsbCxcbiAgICAvLyBpdGVtUHJvcCwgaXRlbVNjb3BlLCBpdGVtVHlwZSBhcmUgZm9yXG4gICAgLy8gTWljcm9kYXRhIHN1cHBvcnQuIFNlZSBodHRwOi8vc2NoZW1hLm9yZy9kb2NzL2dzLmh0bWxcbiAgICBpdGVtUHJvcDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGl0ZW1TY29wZTogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgaXRlbVR5cGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAvLyBpdGVtSUQgYW5kIGl0ZW1SZWYgYXJlIGZvciBNaWNyb2RhdGEgc3VwcG9ydCBhcyB3ZWxsIGJ1dFxuICAgIC8vIG9ubHkgc3BlY2lmaWVkIGluIHRoZSB0aGUgV0hBVFdHIHNwZWMgZG9jdW1lbnQuIFNlZVxuICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL21pY3JvZGF0YS5odG1sI21pY3JvZGF0YS1kb20tYXBpXG4gICAgaXRlbUlEOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaXRlbVJlZjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIHJlc3VsdHMgc2hvdyBsb29raW5nIGdsYXNzIGljb24gYW5kIHJlY2VudCBzZWFyY2hlcyBvbiBpbnB1dFxuICAgIC8vIHNlYXJjaCBmaWVsZHMgaW4gV2ViS2l0L0JsaW5rXG4gICAgcmVzdWx0czogbnVsbCxcbiAgICAvLyBJRS1vbmx5IGF0dHJpYnV0ZSB0aGF0IHNwZWNpZmllcyBzZWN1cml0eSByZXN0cmljdGlvbnMgb24gYW4gaWZyYW1lXG4gICAgLy8gYXMgYW4gYWx0ZXJuYXRpdmUgdG8gdGhlIHNhbmRib3ggYXR0cmlidXRlIG9uIElFPDEwXG4gICAgc2VjdXJpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAvLyBJRS1vbmx5IGF0dHJpYnV0ZSB0aGF0IGNvbnRyb2xzIGZvY3VzIGJlaGF2aW9yXG4gICAgdW5zZWxlY3RhYmxlOiBNVVNUX1VTRV9BVFRSSUJVVEVcbiAgfSxcbiAgRE9NQXR0cmlidXRlTmFtZXM6IHtcbiAgICBhY2NlcHRDaGFyc2V0OiAnYWNjZXB0LWNoYXJzZXQnLFxuICAgIGNsYXNzTmFtZTogJ2NsYXNzJyxcbiAgICBodG1sRm9yOiAnZm9yJyxcbiAgICBodHRwRXF1aXY6ICdodHRwLWVxdWl2J1xuICB9LFxuICBET01Qcm9wZXJ0eU5hbWVzOiB7XG4gICAgYXV0b0NvbXBsZXRlOiAnYXV0b2NvbXBsZXRlJyxcbiAgICBhdXRvRm9jdXM6ICdhdXRvZm9jdXMnLFxuICAgIGF1dG9QbGF5OiAnYXV0b3BsYXknLFxuICAgIGF1dG9TYXZlOiAnYXV0b3NhdmUnLFxuICAgIC8vIGBlbmNvZGluZ2AgaXMgZXF1aXZhbGVudCB0byBgZW5jdHlwZWAsIElFOCBsYWNrcyBhbiBgZW5jdHlwZWAgc2V0dGVyLlxuICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L2Zvcm1zLmh0bWwjZG9tLWZzLWVuY29kaW5nXG4gICAgZW5jVHlwZTogJ2VuY29kaW5nJyxcbiAgICBocmVmTGFuZzogJ2hyZWZsYW5nJyxcbiAgICByYWRpb0dyb3VwOiAncmFkaW9ncm91cCcsXG4gICAgc3BlbGxDaGVjazogJ3NwZWxsY2hlY2snLFxuICAgIHNyY0RvYzogJ3NyY2RvYycsXG4gICAgc3JjU2V0OiAnc3Jjc2V0J1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEhUTUxET01Qcm9wZXJ0eUNvbmZpZzsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgTGlua2VkVmFsdWVVdGlsc1xuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFByb3BUeXBlcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZXMnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25zID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25zJyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgaGFzUmVhZE9ubHlWYWx1ZSA9IHtcbiAgJ2J1dHRvbic6IHRydWUsXG4gICdjaGVja2JveCc6IHRydWUsXG4gICdpbWFnZSc6IHRydWUsXG4gICdoaWRkZW4nOiB0cnVlLFxuICAncmFkaW8nOiB0cnVlLFxuICAncmVzZXQnOiB0cnVlLFxuICAnc3VibWl0JzogdHJ1ZVxufTtcblxuZnVuY3Rpb24gX2Fzc2VydFNpbmdsZUxpbmsoaW5wdXRQcm9wcykge1xuICAhKGlucHV0UHJvcHMuY2hlY2tlZExpbmsgPT0gbnVsbCB8fCBpbnB1dFByb3BzLnZhbHVlTGluayA9PSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDYW5ub3QgcHJvdmlkZSBhIGNoZWNrZWRMaW5rIGFuZCBhIHZhbHVlTGluay4gSWYgeW91IHdhbnQgdG8gdXNlICcgKyAnY2hlY2tlZExpbmssIHlvdSBwcm9iYWJseSBkb25cXCd0IHdhbnQgdG8gdXNlIHZhbHVlTGluayBhbmQgdmljZSB2ZXJzYS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfYXNzZXJ0VmFsdWVMaW5rKGlucHV0UHJvcHMpIHtcbiAgX2Fzc2VydFNpbmdsZUxpbmsoaW5wdXRQcm9wcyk7XG4gICEoaW5wdXRQcm9wcy52YWx1ZSA9PSBudWxsICYmIGlucHV0UHJvcHMub25DaGFuZ2UgPT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnQ2Fubm90IHByb3ZpZGUgYSB2YWx1ZUxpbmsgYW5kIGEgdmFsdWUgb3Igb25DaGFuZ2UgZXZlbnQuIElmIHlvdSB3YW50ICcgKyAndG8gdXNlIHZhbHVlIG9yIG9uQ2hhbmdlLCB5b3UgcHJvYmFibHkgZG9uXFwndCB3YW50IHRvIHVzZSB2YWx1ZUxpbmsuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBfYXNzZXJ0Q2hlY2tlZExpbmsoaW5wdXRQcm9wcykge1xuICBfYXNzZXJ0U2luZ2xlTGluayhpbnB1dFByb3BzKTtcbiAgIShpbnB1dFByb3BzLmNoZWNrZWQgPT0gbnVsbCAmJiBpbnB1dFByb3BzLm9uQ2hhbmdlID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Nhbm5vdCBwcm92aWRlIGEgY2hlY2tlZExpbmsgYW5kIGEgY2hlY2tlZCBwcm9wZXJ0eSBvciBvbkNoYW5nZSBldmVudC4gJyArICdJZiB5b3Ugd2FudCB0byB1c2UgY2hlY2tlZCBvciBvbkNoYW5nZSwgeW91IHByb2JhYmx5IGRvblxcJ3Qgd2FudCB0byAnICsgJ3VzZSBjaGVja2VkTGluaycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbn1cblxudmFyIHByb3BUeXBlcyA9IHtcbiAgdmFsdWU6IGZ1bmN0aW9uIChwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUpIHtcbiAgICBpZiAoIXByb3BzW3Byb3BOYW1lXSB8fCBoYXNSZWFkT25seVZhbHVlW3Byb3BzLnR5cGVdIHx8IHByb3BzLm9uQ2hhbmdlIHx8IHByb3BzLnJlYWRPbmx5IHx8IHByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBFcnJvcignWW91IHByb3ZpZGVkIGEgYHZhbHVlYCBwcm9wIHRvIGEgZm9ybSBmaWVsZCB3aXRob3V0IGFuICcgKyAnYG9uQ2hhbmdlYCBoYW5kbGVyLiBUaGlzIHdpbGwgcmVuZGVyIGEgcmVhZC1vbmx5IGZpZWxkLiBJZiAnICsgJ3RoZSBmaWVsZCBzaG91bGQgYmUgbXV0YWJsZSB1c2UgYGRlZmF1bHRWYWx1ZWAuIE90aGVyd2lzZSwgJyArICdzZXQgZWl0aGVyIGBvbkNoYW5nZWAgb3IgYHJlYWRPbmx5YC4nKTtcbiAgfSxcbiAgY2hlY2tlZDogZnVuY3Rpb24gKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSkge1xuICAgIGlmICghcHJvcHNbcHJvcE5hbWVdIHx8IHByb3BzLm9uQ2hhbmdlIHx8IHByb3BzLnJlYWRPbmx5IHx8IHByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBFcnJvcignWW91IHByb3ZpZGVkIGEgYGNoZWNrZWRgIHByb3AgdG8gYSBmb3JtIGZpZWxkIHdpdGhvdXQgYW4gJyArICdgb25DaGFuZ2VgIGhhbmRsZXIuIFRoaXMgd2lsbCByZW5kZXIgYSByZWFkLW9ubHkgZmllbGQuIElmICcgKyAndGhlIGZpZWxkIHNob3VsZCBiZSBtdXRhYmxlIHVzZSBgZGVmYXVsdENoZWNrZWRgLiBPdGhlcndpc2UsICcgKyAnc2V0IGVpdGhlciBgb25DaGFuZ2VgIG9yIGByZWFkT25seWAuJyk7XG4gIH0sXG4gIG9uQ2hhbmdlOiBSZWFjdFByb3BUeXBlcy5mdW5jXG59O1xuXG52YXIgbG9nZ2VkVHlwZUZhaWx1cmVzID0ge307XG5mdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpIHtcbiAgaWYgKG93bmVyKSB7XG4gICAgdmFyIG5hbWUgPSBvd25lci5nZXROYW1lKCk7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIHJldHVybiAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mIGAnICsgbmFtZSArICdgLic7XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBQcm92aWRlIGEgbGlua2VkIGB2YWx1ZWAgYXR0cmlidXRlIGZvciBjb250cm9sbGVkIGZvcm1zLiBZb3Ugc2hvdWxkIG5vdCB1c2VcbiAqIHRoaXMgb3V0c2lkZSBvZiB0aGUgUmVhY3RET00gY29udHJvbGxlZCBmb3JtIGNvbXBvbmVudHMuXG4gKi9cbnZhciBMaW5rZWRWYWx1ZVV0aWxzID0ge1xuICBjaGVja1Byb3BUeXBlczogZnVuY3Rpb24gKHRhZ05hbWUsIHByb3BzLCBvd25lcikge1xuICAgIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BUeXBlcykge1xuICAgICAgaWYgKHByb3BUeXBlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgdmFyIGVycm9yID0gcHJvcFR5cGVzW3Byb3BOYW1lXShwcm9wcywgcHJvcE5hbWUsIHRhZ05hbWUsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCwgbnVsbCwgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG4gICAgICB9XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAhKGVycm9yLm1lc3NhZ2UgaW4gbG9nZ2VkVHlwZUZhaWx1cmVzKSkge1xuICAgICAgICAvLyBPbmx5IG1vbml0b3IgdGhpcyBmYWlsdXJlIG9uY2UgYmVjYXVzZSB0aGVyZSB0ZW5kcyB0byBiZSBhIGxvdCBvZiB0aGVcbiAgICAgICAgLy8gc2FtZSBlcnJvci5cbiAgICAgICAgbG9nZ2VkVHlwZUZhaWx1cmVzW2Vycm9yLm1lc3NhZ2VdID0gdHJ1ZTtcblxuICAgICAgICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpO1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ0ZhaWxlZCBmb3JtIHByb3BUeXBlOiAlcyVzJywgZXJyb3IubWVzc2FnZSwgYWRkZW5kdW0pIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IGlucHV0UHJvcHMgUHJvcHMgZm9yIGZvcm0gY29tcG9uZW50XG4gICAqIEByZXR1cm4geyp9IGN1cnJlbnQgdmFsdWUgb2YgdGhlIGlucHV0IGVpdGhlciBmcm9tIHZhbHVlIHByb3Agb3IgbGluay5cbiAgICovXG4gIGdldFZhbHVlOiBmdW5jdGlvbiAoaW5wdXRQcm9wcykge1xuICAgIGlmIChpbnB1dFByb3BzLnZhbHVlTGluaykge1xuICAgICAgX2Fzc2VydFZhbHVlTGluayhpbnB1dFByb3BzKTtcbiAgICAgIHJldHVybiBpbnB1dFByb3BzLnZhbHVlTGluay52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGlucHV0UHJvcHMudmFsdWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dFByb3BzIFByb3BzIGZvciBmb3JtIGNvbXBvbmVudFxuICAgKiBAcmV0dXJuIHsqfSBjdXJyZW50IGNoZWNrZWQgc3RhdHVzIG9mIHRoZSBpbnB1dCBlaXRoZXIgZnJvbSBjaGVja2VkIHByb3BcbiAgICogICAgICAgICAgICAgb3IgbGluay5cbiAgICovXG4gIGdldENoZWNrZWQ6IGZ1bmN0aW9uIChpbnB1dFByb3BzKSB7XG4gICAgaWYgKGlucHV0UHJvcHMuY2hlY2tlZExpbmspIHtcbiAgICAgIF9hc3NlcnRDaGVja2VkTGluayhpbnB1dFByb3BzKTtcbiAgICAgIHJldHVybiBpbnB1dFByb3BzLmNoZWNrZWRMaW5rLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXRQcm9wcy5jaGVja2VkO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaW5wdXRQcm9wcyBQcm9wcyBmb3IgZm9ybSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtTeW50aGV0aWNFdmVudH0gZXZlbnQgY2hhbmdlIGV2ZW50IHRvIGhhbmRsZVxuICAgKi9cbiAgZXhlY3V0ZU9uQ2hhbmdlOiBmdW5jdGlvbiAoaW5wdXRQcm9wcywgZXZlbnQpIHtcbiAgICBpZiAoaW5wdXRQcm9wcy52YWx1ZUxpbmspIHtcbiAgICAgIF9hc3NlcnRWYWx1ZUxpbmsoaW5wdXRQcm9wcyk7XG4gICAgICByZXR1cm4gaW5wdXRQcm9wcy52YWx1ZUxpbmsucmVxdWVzdENoYW5nZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoaW5wdXRQcm9wcy5jaGVja2VkTGluaykge1xuICAgICAgX2Fzc2VydENoZWNrZWRMaW5rKGlucHV0UHJvcHMpO1xuICAgICAgcmV0dXJuIGlucHV0UHJvcHMuY2hlY2tlZExpbmsucmVxdWVzdENoYW5nZShldmVudC50YXJnZXQuY2hlY2tlZCk7XG4gICAgfSBlbHNlIGlmIChpbnB1dFByb3BzLm9uQ2hhbmdlKSB7XG4gICAgICByZXR1cm4gaW5wdXRQcm9wcy5vbkNoYW5nZS5jYWxsKHVuZGVmaW5lZCwgZXZlbnQpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBMaW5rZWRWYWx1ZVV0aWxzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBPYmplY3QuYXNzaWduXG4gKi9cblxuLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5hc3NpZ25cblxuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2VzKSB7XG4gIGlmICh0YXJnZXQgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5hc3NpZ24gdGFyZ2V0IGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCcpO1xuICB9XG5cbiAgdmFyIHRvID0gT2JqZWN0KHRhcmdldCk7XG4gIHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbiAgZm9yICh2YXIgbmV4dEluZGV4ID0gMTsgbmV4dEluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgbmV4dEluZGV4KyspIHtcbiAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tuZXh0SW5kZXhdO1xuICAgIGlmIChuZXh0U291cmNlID09IG51bGwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBmcm9tID0gT2JqZWN0KG5leHRTb3VyY2UpO1xuXG4gICAgLy8gV2UgZG9uJ3QgY3VycmVudGx5IHN1cHBvcnQgYWNjZXNzb3JzIG5vciBwcm94aWVzLiBUaGVyZWZvcmUgdGhpc1xuICAgIC8vIGNvcHkgY2Fubm90IHRocm93LiBJZiB3ZSBldmVyIHN1cHBvcnRlZCB0aGlzIHRoZW4gd2UgbXVzdCBoYW5kbGVcbiAgICAvLyBleGNlcHRpb25zIGFuZCBzaWRlLWVmZmVjdHMuIFdlIGRvbid0IHN1cHBvcnQgc3ltYm9scyBzbyB0aGV5IHdvbid0XG4gICAgLy8gYmUgdHJhbnNmZXJyZWQuXG5cbiAgICBmb3IgKHZhciBrZXkgaW4gZnJvbSkge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoZnJvbSwga2V5KSkge1xuICAgICAgICB0b1trZXldID0gZnJvbVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0bztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhc3NpZ247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFBvb2xlZENsYXNzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogU3RhdGljIHBvb2xlcnMuIFNldmVyYWwgY3VzdG9tIHZlcnNpb25zIGZvciBlYWNoIHBvdGVudGlhbCBudW1iZXIgb2ZcbiAqIGFyZ3VtZW50cy4gQSBjb21wbGV0ZWx5IGdlbmVyaWMgcG9vbGVyIGlzIGVhc3kgdG8gaW1wbGVtZW50LCBidXQgd291bGRcbiAqIHJlcXVpcmUgYWNjZXNzaW5nIHRoZSBgYXJndW1lbnRzYCBvYmplY3QuIEluIGVhY2ggb2YgdGhlc2UsIGB0aGlzYCByZWZlcnMgdG9cbiAqIHRoZSBDbGFzcyBpdHNlbGYsIG5vdCBhbiBpbnN0YW5jZS4gSWYgYW55IG90aGVycyBhcmUgbmVlZGVkLCBzaW1wbHkgYWRkIHRoZW1cbiAqIGhlcmUsIG9yIGluIHRoZWlyIG93biBmaWxlcy5cbiAqL1xudmFyIG9uZUFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGNvcHlGaWVsZHNGcm9tKSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGNvcHlGaWVsZHNGcm9tKTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhjb3B5RmllbGRzRnJvbSk7XG4gIH1cbn07XG5cbnZhciB0d29Bcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyKTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIpO1xuICB9XG59O1xuXG52YXIgdGhyZWVBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIsIGEzKSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMiwgYTMpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMpO1xuICB9XG59O1xuXG52YXIgZm91ckFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMiwgYTMsIGE0KSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMiwgYTMsIGE0KTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIsIGEzLCBhNCk7XG4gIH1cbn07XG5cbnZhciBmaXZlQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoYTEsIGEyLCBhMywgYTQsIGE1KSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMiwgYTMsIGE0LCBhNSk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyLCBhMywgYTQsIGE1KTtcbiAgfVxufTtcblxudmFyIHN0YW5kYXJkUmVsZWFzZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgIShpbnN0YW5jZSBpbnN0YW5jZW9mIEtsYXNzKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUcnlpbmcgdG8gcmVsZWFzZSBhbiBpbnN0YW5jZSBpbnRvIGEgcG9vbCBvZiBhIGRpZmZlcmVudCB0eXBlLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgaW5zdGFuY2UuZGVzdHJ1Y3RvcigpO1xuICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCA8IEtsYXNzLnBvb2xTaXplKSB7XG4gICAgS2xhc3MuaW5zdGFuY2VQb29sLnB1c2goaW5zdGFuY2UpO1xuICB9XG59O1xuXG52YXIgREVGQVVMVF9QT09MX1NJWkUgPSAxMDtcbnZhciBERUZBVUxUX1BPT0xFUiA9IG9uZUFyZ3VtZW50UG9vbGVyO1xuXG4vKipcbiAqIEF1Z21lbnRzIGBDb3B5Q29uc3RydWN0b3JgIHRvIGJlIGEgcG9vbGFibGUgY2xhc3MsIGF1Z21lbnRpbmcgb25seSB0aGUgY2xhc3NcbiAqIGl0c2VsZiAoc3RhdGljYWxseSkgbm90IGFkZGluZyBhbnkgcHJvdG90eXBpY2FsIGZpZWxkcy4gQW55IENvcHlDb25zdHJ1Y3RvclxuICogeW91IGdpdmUgdGhpcyBtYXkgaGF2ZSBhIGBwb29sU2l6ZWAgcHJvcGVydHksIGFuZCB3aWxsIGxvb2sgZm9yIGFcbiAqIHByb3RvdHlwaWNhbCBgZGVzdHJ1Y3RvcmAgb24gaW5zdGFuY2VzIChvcHRpb25hbCkuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gQ29weUNvbnN0cnVjdG9yIENvbnN0cnVjdG9yIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVzZXQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwb29sZXIgQ3VzdG9taXphYmxlIHBvb2xlci5cbiAqL1xudmFyIGFkZFBvb2xpbmdUbyA9IGZ1bmN0aW9uIChDb3B5Q29uc3RydWN0b3IsIHBvb2xlcikge1xuICB2YXIgTmV3S2xhc3MgPSBDb3B5Q29uc3RydWN0b3I7XG4gIE5ld0tsYXNzLmluc3RhbmNlUG9vbCA9IFtdO1xuICBOZXdLbGFzcy5nZXRQb29sZWQgPSBwb29sZXIgfHwgREVGQVVMVF9QT09MRVI7XG4gIGlmICghTmV3S2xhc3MucG9vbFNpemUpIHtcbiAgICBOZXdLbGFzcy5wb29sU2l6ZSA9IERFRkFVTFRfUE9PTF9TSVpFO1xuICB9XG4gIE5ld0tsYXNzLnJlbGVhc2UgPSBzdGFuZGFyZFJlbGVhc2VyO1xuICByZXR1cm4gTmV3S2xhc3M7XG59O1xuXG52YXIgUG9vbGVkQ2xhc3MgPSB7XG4gIGFkZFBvb2xpbmdUbzogYWRkUG9vbGluZ1RvLFxuICBvbmVBcmd1bWVudFBvb2xlcjogb25lQXJndW1lbnRQb29sZXIsXG4gIHR3b0FyZ3VtZW50UG9vbGVyOiB0d29Bcmd1bWVudFBvb2xlcixcbiAgdGhyZWVBcmd1bWVudFBvb2xlcjogdGhyZWVBcmd1bWVudFBvb2xlcixcbiAgZm91ckFyZ3VtZW50UG9vbGVyOiBmb3VyQXJndW1lbnRQb29sZXIsXG4gIGZpdmVBcmd1bWVudFBvb2xlcjogZml2ZUFyZ3VtZW50UG9vbGVyXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBvb2xlZENsYXNzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NID0gcmVxdWlyZSgnLi9SZWFjdERPTScpO1xudmFyIFJlYWN0RE9NU2VydmVyID0gcmVxdWlyZSgnLi9SZWFjdERPTVNlcnZlcicpO1xudmFyIFJlYWN0SXNvbW9ycGhpYyA9IHJlcXVpcmUoJy4vUmVhY3RJc29tb3JwaGljJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBkZXByZWNhdGVkID0gcmVxdWlyZSgnLi9kZXByZWNhdGVkJyk7XG5cbi8vIGB2ZXJzaW9uYCB3aWxsIGJlIGFkZGVkIGhlcmUgYnkgUmVhY3RJc29tb3JwaGljLlxudmFyIFJlYWN0ID0ge307XG5cbmFzc2lnbihSZWFjdCwgUmVhY3RJc29tb3JwaGljKTtcblxuYXNzaWduKFJlYWN0LCB7XG4gIC8vIFJlYWN0RE9NXG4gIGZpbmRET01Ob2RlOiBkZXByZWNhdGVkKCdmaW5kRE9NTm9kZScsICdSZWFjdERPTScsICdyZWFjdC1kb20nLCBSZWFjdERPTSwgUmVhY3RET00uZmluZERPTU5vZGUpLFxuICByZW5kZXI6IGRlcHJlY2F0ZWQoJ3JlbmRlcicsICdSZWFjdERPTScsICdyZWFjdC1kb20nLCBSZWFjdERPTSwgUmVhY3RET00ucmVuZGVyKSxcbiAgdW5tb3VudENvbXBvbmVudEF0Tm9kZTogZGVwcmVjYXRlZCgndW5tb3VudENvbXBvbmVudEF0Tm9kZScsICdSZWFjdERPTScsICdyZWFjdC1kb20nLCBSZWFjdERPTSwgUmVhY3RET00udW5tb3VudENvbXBvbmVudEF0Tm9kZSksXG5cbiAgLy8gUmVhY3RET01TZXJ2ZXJcbiAgcmVuZGVyVG9TdHJpbmc6IGRlcHJlY2F0ZWQoJ3JlbmRlclRvU3RyaW5nJywgJ1JlYWN0RE9NU2VydmVyJywgJ3JlYWN0LWRvbS9zZXJ2ZXInLCBSZWFjdERPTVNlcnZlciwgUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdHJpbmcpLFxuICByZW5kZXJUb1N0YXRpY01hcmt1cDogZGVwcmVjYXRlZCgncmVuZGVyVG9TdGF0aWNNYXJrdXAnLCAnUmVhY3RET01TZXJ2ZXInLCAncmVhY3QtZG9tL3NlcnZlcicsIFJlYWN0RE9NU2VydmVyLCBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cClcbn0pO1xuXG5SZWFjdC5fX1NFQ1JFVF9ET01fRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRCA9IFJlYWN0RE9NO1xuUmVhY3QuX19TRUNSRVRfRE9NX1NFUlZFUl9ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEID0gUmVhY3RET01TZXJ2ZXI7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZU1hcCcpO1xuXG52YXIgZmluZERPTU5vZGUgPSByZXF1aXJlKCcuL2ZpbmRET01Ob2RlJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIGRpZFdhcm5LZXkgPSAnX2dldERPTU5vZGVEaWRXYXJuJztcblxudmFyIFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluID0ge1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgRE9NIG5vZGUgcmVuZGVyZWQgYnkgdGhpcyBjb21wb25lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge0RPTUVsZW1lbnR9IFRoZSByb290IG5vZGUgb2YgdGhpcyBjb21wb25lbnQuXG4gICAqIEBmaW5hbFxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBnZXRET01Ob2RlOiBmdW5jdGlvbiAoKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodGhpcy5jb25zdHJ1Y3RvcltkaWRXYXJuS2V5XSwgJyVzLmdldERPTU5vZGUoLi4uKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICcgKyAnUmVhY3RET00uZmluZERPTU5vZGUoaW5zdGFuY2UpIGluc3RlYWQuJywgUmVhY3RJbnN0YW5jZU1hcC5nZXQodGhpcykuZ2V0TmFtZSgpIHx8IHRoaXMudGFnTmFtZSB8fCAnVW5rbm93bicpIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuY29uc3RydWN0b3JbZGlkV2FybktleV0gPSB0cnVlO1xuICAgIHJldHVybiBmaW5kRE9NTm9kZSh0aGlzKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEJyb3dzZXJDb21wb25lbnRNaXhpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xudmFyIEV2ZW50UGx1Z2luUmVnaXN0cnkgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luUmVnaXN0cnknKTtcbnZhciBSZWFjdEV2ZW50RW1pdHRlck1peGluID0gcmVxdWlyZSgnLi9SZWFjdEV2ZW50RW1pdHRlck1peGluJyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBWaWV3cG9ydE1ldHJpY3MgPSByZXF1aXJlKCcuL1ZpZXdwb3J0TWV0cmljcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaXNFdmVudFN1cHBvcnRlZCA9IHJlcXVpcmUoJy4vaXNFdmVudFN1cHBvcnRlZCcpO1xuXG4vKipcbiAqIFN1bW1hcnkgb2YgYFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcmAgZXZlbnQgaGFuZGxpbmc6XG4gKlxuICogIC0gVG9wLWxldmVsIGRlbGVnYXRpb24gaXMgdXNlZCB0byB0cmFwIG1vc3QgbmF0aXZlIGJyb3dzZXIgZXZlbnRzLiBUaGlzXG4gKiAgICBtYXkgb25seSBvY2N1ciBpbiB0aGUgbWFpbiB0aHJlYWQgYW5kIGlzIHRoZSByZXNwb25zaWJpbGl0eSBvZlxuICogICAgUmVhY3RFdmVudExpc3RlbmVyLCB3aGljaCBpcyBpbmplY3RlZCBhbmQgY2FuIHRoZXJlZm9yZSBzdXBwb3J0IHBsdWdnYWJsZVxuICogICAgZXZlbnQgc291cmNlcy4gVGhpcyBpcyB0aGUgb25seSB3b3JrIHRoYXQgb2NjdXJzIGluIHRoZSBtYWluIHRocmVhZC5cbiAqXG4gKiAgLSBXZSBub3JtYWxpemUgYW5kIGRlLWR1cGxpY2F0ZSBldmVudHMgdG8gYWNjb3VudCBmb3IgYnJvd3NlciBxdWlya3MuIFRoaXNcbiAqICAgIG1heSBiZSBkb25lIGluIHRoZSB3b3JrZXIgdGhyZWFkLlxuICpcbiAqICAtIEZvcndhcmQgdGhlc2UgbmF0aXZlIGV2ZW50cyAod2l0aCB0aGUgYXNzb2NpYXRlZCB0b3AtbGV2ZWwgdHlwZSB1c2VkIHRvXG4gKiAgICB0cmFwIGl0KSB0byBgRXZlbnRQbHVnaW5IdWJgLCB3aGljaCBpbiB0dXJuIHdpbGwgYXNrIHBsdWdpbnMgaWYgdGhleSB3YW50XG4gKiAgICB0byBleHRyYWN0IGFueSBzeW50aGV0aWMgZXZlbnRzLlxuICpcbiAqICAtIFRoZSBgRXZlbnRQbHVnaW5IdWJgIHdpbGwgdGhlbiBwcm9jZXNzIGVhY2ggZXZlbnQgYnkgYW5ub3RhdGluZyB0aGVtIHdpdGhcbiAqICAgIFwiZGlzcGF0Y2hlc1wiLCBhIHNlcXVlbmNlIG9mIGxpc3RlbmVycyBhbmQgSURzIHRoYXQgY2FyZSBhYm91dCB0aGF0IGV2ZW50LlxuICpcbiAqICAtIFRoZSBgRXZlbnRQbHVnaW5IdWJgIHRoZW4gZGlzcGF0Y2hlcyB0aGUgZXZlbnRzLlxuICpcbiAqIE92ZXJ2aWV3IG9mIFJlYWN0IGFuZCB0aGUgZXZlbnQgc3lzdGVtOlxuICpcbiAqICstLS0tLS0tLS0tLS0rICAgIC5cbiAqIHwgICAgRE9NICAgICB8ICAgIC5cbiAqICstLS0tLS0tLS0tLS0rICAgIC5cbiAqICAgICAgIHwgICAgICAgICAgIC5cbiAqICAgICAgIHYgICAgICAgICAgIC5cbiAqICstLS0tLS0tLS0tLS0rICAgIC5cbiAqIHwgUmVhY3RFdmVudCB8ICAgIC5cbiAqIHwgIExpc3RlbmVyICB8ICAgIC5cbiAqICstLS0tLS0tLS0tLS0rICAgIC4gICAgICAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tK1xuICogICAgICAgfCAgICAgICAgICAgLiAgICAgICAgICAgICAgICstLS0tLS0tLSt8U2ltcGxlRXZlbnR8XG4gKiAgICAgICB8ICAgICAgICAgICAuICAgICAgICAgICAgICAgfCAgICAgICAgIHxQbHVnaW4gICAgIHxcbiAqICstLS0tLXwtLS0tLS0rICAgIC4gICAgICAgICAgICAgICB2ICAgICAgICAgKy0tLS0tLS0tLS0tK1xuICogfCAgICAgfCAgICAgIHwgICAgLiAgICArLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tK1xuICogfCAgICAgKy0tLS0tLS0tLS0tLi0tLT58RXZlbnRQbHVnaW5IdWJ8ICAgICAgICAgICAgICAgICAgICB8ICAgIEV2ZW50ICAgfFxuICogfCAgICAgICAgICAgIHwgICAgLiAgICB8ICAgICAgICAgICAgICB8ICAgICArLS0tLS0tLS0tLS0rICB8IFByb3BhZ2F0b3JzfFxuICogfCBSZWFjdEV2ZW50IHwgICAgLiAgICB8ICAgICAgICAgICAgICB8ICAgICB8VGFwRXZlbnQgICB8ICB8LS0tLS0tLS0tLS0tfFxuICogfCAgRW1pdHRlciAgIHwgICAgLiAgICB8ICAgICAgICAgICAgICB8PC0tLSt8UGx1Z2luICAgICB8ICB8b3RoZXIgcGx1Z2lufFxuICogfCAgICAgICAgICAgIHwgICAgLiAgICB8ICAgICAgICAgICAgICB8ICAgICArLS0tLS0tLS0tLS0rICB8ICB1dGlsaXRpZXMgfFxuICogfCAgICAgKy0tLS0tLS0tLS0tLi0tLT58ICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tK1xuICogfCAgICAgfCAgICAgIHwgICAgLiAgICArLS0tLS0tLS0tLS0tLS0rXG4gKiArLS0tLS18LS0tLS0tKyAgICAuICAgICAgICAgICAgICAgIF4gICAgICAgICstLS0tLS0tLS0tLStcbiAqICAgICAgIHwgICAgICAgICAgIC4gICAgICAgICAgICAgICAgfCAgICAgICAgfEVudGVyL0xlYXZlfFxuICogICAgICAgKyAgICAgICAgICAgLiAgICAgICAgICAgICAgICArLS0tLS0tLSt8UGx1Z2luICAgICB8XG4gKiArLS0tLS0tLS0tLS0tLSsgICAuICAgICAgICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLStcbiAqIHwgYXBwbGljYXRpb24gfCAgIC5cbiAqIHwtLS0tLS0tLS0tLS0tfCAgIC5cbiAqIHwgICAgICAgICAgICAgfCAgIC5cbiAqIHwgICAgICAgICAgICAgfCAgIC5cbiAqICstLS0tLS0tLS0tLS0tKyAgIC5cbiAqICAgICAgICAgICAgICAgICAgIC5cbiAqICAgIFJlYWN0IENvcmUgICAgIC4gIEdlbmVyYWwgUHVycG9zZSBFdmVudCBQbHVnaW4gU3lzdGVtXG4gKi9cblxudmFyIGFscmVhZHlMaXN0ZW5pbmdUbyA9IHt9O1xudmFyIGlzTW9uaXRvcmluZ1Njcm9sbFZhbHVlID0gZmFsc2U7XG52YXIgcmVhY3RUb3BMaXN0ZW5lcnNDb3VudGVyID0gMDtcblxuLy8gRm9yIGV2ZW50cyBsaWtlICdzdWJtaXQnIHdoaWNoIGRvbid0IGNvbnNpc3RlbnRseSBidWJibGUgKHdoaWNoIHdlIHRyYXAgYXQgYVxuLy8gbG93ZXIgbm9kZSB0aGFuIGBkb2N1bWVudGApLCBiaW5kaW5nIGF0IGBkb2N1bWVudGAgd291bGQgY2F1c2UgZHVwbGljYXRlXG4vLyBldmVudHMgc28gd2UgZG9uJ3QgaW5jbHVkZSB0aGVtIGhlcmVcbnZhciB0b3BFdmVudE1hcHBpbmcgPSB7XG4gIHRvcEFib3J0OiAnYWJvcnQnLFxuICB0b3BCbHVyOiAnYmx1cicsXG4gIHRvcENhblBsYXk6ICdjYW5wbGF5JyxcbiAgdG9wQ2FuUGxheVRocm91Z2g6ICdjYW5wbGF5dGhyb3VnaCcsXG4gIHRvcENoYW5nZTogJ2NoYW5nZScsXG4gIHRvcENsaWNrOiAnY2xpY2snLFxuICB0b3BDb21wb3NpdGlvbkVuZDogJ2NvbXBvc2l0aW9uZW5kJyxcbiAgdG9wQ29tcG9zaXRpb25TdGFydDogJ2NvbXBvc2l0aW9uc3RhcnQnLFxuICB0b3BDb21wb3NpdGlvblVwZGF0ZTogJ2NvbXBvc2l0aW9udXBkYXRlJyxcbiAgdG9wQ29udGV4dE1lbnU6ICdjb250ZXh0bWVudScsXG4gIHRvcENvcHk6ICdjb3B5JyxcbiAgdG9wQ3V0OiAnY3V0JyxcbiAgdG9wRG91YmxlQ2xpY2s6ICdkYmxjbGljaycsXG4gIHRvcERyYWc6ICdkcmFnJyxcbiAgdG9wRHJhZ0VuZDogJ2RyYWdlbmQnLFxuICB0b3BEcmFnRW50ZXI6ICdkcmFnZW50ZXInLFxuICB0b3BEcmFnRXhpdDogJ2RyYWdleGl0JyxcbiAgdG9wRHJhZ0xlYXZlOiAnZHJhZ2xlYXZlJyxcbiAgdG9wRHJhZ092ZXI6ICdkcmFnb3ZlcicsXG4gIHRvcERyYWdTdGFydDogJ2RyYWdzdGFydCcsXG4gIHRvcERyb3A6ICdkcm9wJyxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6ICdkdXJhdGlvbmNoYW5nZScsXG4gIHRvcEVtcHRpZWQ6ICdlbXB0aWVkJyxcbiAgdG9wRW5jcnlwdGVkOiAnZW5jcnlwdGVkJyxcbiAgdG9wRW5kZWQ6ICdlbmRlZCcsXG4gIHRvcEVycm9yOiAnZXJyb3InLFxuICB0b3BGb2N1czogJ2ZvY3VzJyxcbiAgdG9wSW5wdXQ6ICdpbnB1dCcsXG4gIHRvcEtleURvd246ICdrZXlkb3duJyxcbiAgdG9wS2V5UHJlc3M6ICdrZXlwcmVzcycsXG4gIHRvcEtleVVwOiAna2V5dXAnLFxuICB0b3BMb2FkZWREYXRhOiAnbG9hZGVkZGF0YScsXG4gIHRvcExvYWRlZE1ldGFkYXRhOiAnbG9hZGVkbWV0YWRhdGEnLFxuICB0b3BMb2FkU3RhcnQ6ICdsb2Fkc3RhcnQnLFxuICB0b3BNb3VzZURvd246ICdtb3VzZWRvd24nLFxuICB0b3BNb3VzZU1vdmU6ICdtb3VzZW1vdmUnLFxuICB0b3BNb3VzZU91dDogJ21vdXNlb3V0JyxcbiAgdG9wTW91c2VPdmVyOiAnbW91c2VvdmVyJyxcbiAgdG9wTW91c2VVcDogJ21vdXNldXAnLFxuICB0b3BQYXN0ZTogJ3Bhc3RlJyxcbiAgdG9wUGF1c2U6ICdwYXVzZScsXG4gIHRvcFBsYXk6ICdwbGF5JyxcbiAgdG9wUGxheWluZzogJ3BsYXlpbmcnLFxuICB0b3BQcm9ncmVzczogJ3Byb2dyZXNzJyxcbiAgdG9wUmF0ZUNoYW5nZTogJ3JhdGVjaGFuZ2UnLFxuICB0b3BTY3JvbGw6ICdzY3JvbGwnLFxuICB0b3BTZWVrZWQ6ICdzZWVrZWQnLFxuICB0b3BTZWVraW5nOiAnc2Vla2luZycsXG4gIHRvcFNlbGVjdGlvbkNoYW5nZTogJ3NlbGVjdGlvbmNoYW5nZScsXG4gIHRvcFN0YWxsZWQ6ICdzdGFsbGVkJyxcbiAgdG9wU3VzcGVuZDogJ3N1c3BlbmQnLFxuICB0b3BUZXh0SW5wdXQ6ICd0ZXh0SW5wdXQnLFxuICB0b3BUaW1lVXBkYXRlOiAndGltZXVwZGF0ZScsXG4gIHRvcFRvdWNoQ2FuY2VsOiAndG91Y2hjYW5jZWwnLFxuICB0b3BUb3VjaEVuZDogJ3RvdWNoZW5kJyxcbiAgdG9wVG91Y2hNb3ZlOiAndG91Y2htb3ZlJyxcbiAgdG9wVG91Y2hTdGFydDogJ3RvdWNoc3RhcnQnLFxuICB0b3BWb2x1bWVDaGFuZ2U6ICd2b2x1bWVjaGFuZ2UnLFxuICB0b3BXYWl0aW5nOiAnd2FpdGluZycsXG4gIHRvcFdoZWVsOiAnd2hlZWwnXG59O1xuXG4vKipcbiAqIFRvIGVuc3VyZSBubyBjb25mbGljdHMgd2l0aCBvdGhlciBwb3RlbnRpYWwgUmVhY3QgaW5zdGFuY2VzIG9uIHRoZSBwYWdlXG4gKi9cbnZhciB0b3BMaXN0ZW5lcnNJREtleSA9ICdfcmVhY3RMaXN0ZW5lcnNJRCcgKyBTdHJpbmcoTWF0aC5yYW5kb20oKSkuc2xpY2UoMik7XG5cbmZ1bmN0aW9uIGdldExpc3RlbmluZ0ZvckRvY3VtZW50KG1vdW50QXQpIHtcbiAgLy8gSW4gSUU4LCBgbW91bnRBdGAgaXMgYSBob3N0IG9iamVjdCBhbmQgZG9lc24ndCBoYXZlIGBoYXNPd25Qcm9wZXJ0eWBcbiAgLy8gZGlyZWN0bHkuXG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vdW50QXQsIHRvcExpc3RlbmVyc0lES2V5KSkge1xuICAgIG1vdW50QXRbdG9wTGlzdGVuZXJzSURLZXldID0gcmVhY3RUb3BMaXN0ZW5lcnNDb3VudGVyKys7XG4gICAgYWxyZWFkeUxpc3RlbmluZ1RvW21vdW50QXRbdG9wTGlzdGVuZXJzSURLZXldXSA9IHt9O1xuICB9XG4gIHJldHVybiBhbHJlYWR5TGlzdGVuaW5nVG9bbW91bnRBdFt0b3BMaXN0ZW5lcnNJREtleV1dO1xufVxuXG4vKipcbiAqIGBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXJgIGlzIHVzZWQgdG8gYXR0YWNoIHRvcC1sZXZlbCBldmVudCBsaXN0ZW5lcnMuIEZvclxuICogZXhhbXBsZTpcbiAqXG4gKiAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5wdXRMaXN0ZW5lcignbXlJRCcsICdvbkNsaWNrJywgbXlGdW5jdGlvbik7XG4gKlxuICogVGhpcyB3b3VsZCBhbGxvY2F0ZSBhIFwicmVnaXN0cmF0aW9uXCIgb2YgYCgnb25DbGljaycsIG15RnVuY3Rpb24pYCBvbiAnbXlJRCcuXG4gKlxuICogQGludGVybmFsXG4gKi9cbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSBhc3NpZ24oe30sIFJlYWN0RXZlbnRFbWl0dGVyTWl4aW4sIHtcblxuICAvKipcbiAgICogSW5qZWN0YWJsZSBldmVudCBiYWNrZW5kXG4gICAqL1xuICBSZWFjdEV2ZW50TGlzdGVuZXI6IG51bGwsXG5cbiAgaW5qZWN0aW9uOiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFJlYWN0RXZlbnRMaXN0ZW5lclxuICAgICAqL1xuICAgIGluamVjdFJlYWN0RXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gKFJlYWN0RXZlbnRMaXN0ZW5lcikge1xuICAgICAgUmVhY3RFdmVudExpc3RlbmVyLnNldEhhbmRsZVRvcExldmVsKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5oYW5kbGVUb3BMZXZlbCk7XG4gICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyID0gUmVhY3RFdmVudExpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU2V0cyB3aGV0aGVyIG9yIG5vdCBhbnkgY3JlYXRlZCBjYWxsYmFja3Mgc2hvdWxkIGJlIGVuYWJsZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCBUcnVlIGlmIGNhbGxiYWNrcyBzaG91bGQgYmUgZW5hYmxlZC5cbiAgICovXG4gIHNldEVuYWJsZWQ6IGZ1bmN0aW9uIChlbmFibGVkKSB7XG4gICAgaWYgKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIuc2V0RW5hYmxlZChlbmFibGVkKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgY2FsbGJhY2tzIGFyZSBlbmFibGVkLlxuICAgKi9cbiAgaXNFbmFibGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICEhKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIgJiYgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci5pc0VuYWJsZWQoKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdlIGxpc3RlbiBmb3IgYnViYmxlZCB0b3VjaCBldmVudHMgb24gdGhlIGRvY3VtZW50IG9iamVjdC5cbiAgICpcbiAgICogRmlyZWZveCB2OC4wMSAoYW5kIHBvc3NpYmx5IG90aGVycykgZXhoaWJpdGVkIHN0cmFuZ2UgYmVoYXZpb3Igd2hlblxuICAgKiBtb3VudGluZyBgb25tb3VzZW1vdmVgIGV2ZW50cyBhdCBzb21lIG5vZGUgdGhhdCB3YXMgbm90IHRoZSBkb2N1bWVudFxuICAgKiBlbGVtZW50LiBUaGUgc3ltcHRvbXMgd2VyZSB0aGF0IGlmIHlvdXIgbW91c2UgaXMgbm90IG1vdmluZyBvdmVyIHNvbWV0aGluZ1xuICAgKiBjb250YWluZWQgd2l0aGluIHRoYXQgbW91bnQgcG9pbnQgKGZvciBleGFtcGxlIG9uIHRoZSBiYWNrZ3JvdW5kKSB0aGVcbiAgICogdG9wLWxldmVsIGxpc3RlbmVycyBmb3IgYG9ubW91c2Vtb3ZlYCB3b24ndCBiZSBjYWxsZWQuIEhvd2V2ZXIsIGlmIHlvdVxuICAgKiByZWdpc3RlciB0aGUgYG1vdXNlbW92ZWAgb24gdGhlIGRvY3VtZW50IG9iamVjdCwgdGhlbiBpdCB3aWxsIG9mIGNvdXJzZVxuICAgKiBjYXRjaCBhbGwgYG1vdXNlbW92ZWBzLiBUaGlzIGFsb25nIHdpdGggaU9TIHF1aXJrcywganVzdGlmaWVzIHJlc3RyaWN0aW5nXG4gICAqIHRvcC1sZXZlbCBsaXN0ZW5lcnMgdG8gdGhlIGRvY3VtZW50IG9iamVjdCBvbmx5LCBhdCBsZWFzdCBmb3IgdGhlc2VcbiAgICogbW92ZW1lbnQgdHlwZXMgb2YgZXZlbnRzIGFuZCBwb3NzaWJseSBhbGwgZXZlbnRzLlxuICAgKlxuICAgKiBAc2VlIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvYmxvZy9hcmNoaXZlcy8yMDEwLzA5L2NsaWNrX2V2ZW50X2RlbC5odG1sXG4gICAqXG4gICAqIEFsc28sIGBrZXl1cGAvYGtleXByZXNzYC9ga2V5ZG93bmAgZG8gbm90IGJ1YmJsZSB0byB0aGUgd2luZG93IG9uIElFLCBidXRcbiAgICogdGhleSBidWJibGUgdG8gZG9jdW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWdpc3RyYXRpb25OYW1lIE5hbWUgb2YgbGlzdGVuZXIgKGUuZy4gYG9uQ2xpY2tgKS5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRlbnREb2N1bWVudEhhbmRsZSBEb2N1bWVudCB3aGljaCBvd25zIHRoZSBjb250YWluZXJcbiAgICovXG4gIGxpc3RlblRvOiBmdW5jdGlvbiAocmVnaXN0cmF0aW9uTmFtZSwgY29udGVudERvY3VtZW50SGFuZGxlKSB7XG4gICAgdmFyIG1vdW50QXQgPSBjb250ZW50RG9jdW1lbnRIYW5kbGU7XG4gICAgdmFyIGlzTGlzdGVuaW5nID0gZ2V0TGlzdGVuaW5nRm9yRG9jdW1lbnQobW91bnRBdCk7XG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZURlcGVuZGVuY2llc1tyZWdpc3RyYXRpb25OYW1lXTtcblxuICAgIHZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlcGVuZGVuY3kgPSBkZXBlbmRlbmNpZXNbaV07XG4gICAgICBpZiAoIShpc0xpc3RlbmluZy5oYXNPd25Qcm9wZXJ0eShkZXBlbmRlbmN5KSAmJiBpc0xpc3RlbmluZ1tkZXBlbmRlbmN5XSkpIHtcbiAgICAgICAgaWYgKGRlcGVuZGVuY3kgPT09IHRvcExldmVsVHlwZXMudG9wV2hlZWwpIHtcbiAgICAgICAgICBpZiAoaXNFdmVudFN1cHBvcnRlZCgnd2hlZWwnKSkge1xuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wV2hlZWwsICd3aGVlbCcsIG1vdW50QXQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNFdmVudFN1cHBvcnRlZCgnbW91c2V3aGVlbCcpKSB7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BXaGVlbCwgJ21vdXNld2hlZWwnLCBtb3VudEF0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRmlyZWZveCBuZWVkcyB0byBjYXB0dXJlIGEgZGlmZmVyZW50IG1vdXNlIHNjcm9sbCBldmVudC5cbiAgICAgICAgICAgIC8vIEBzZWUgaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9kb20vZXZlbnRzL3Rlc3RzL3Njcm9sbC5odG1sXG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BXaGVlbCwgJ0RPTU1vdXNlU2Nyb2xsJywgbW91bnRBdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRlcGVuZGVuY3kgPT09IHRvcExldmVsVHlwZXMudG9wU2Nyb2xsKSB7XG5cbiAgICAgICAgICBpZiAoaXNFdmVudFN1cHBvcnRlZCgnc2Nyb2xsJywgdHJ1ZSkpIHtcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcENhcHR1cmVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BTY3JvbGwsICdzY3JvbGwnLCBtb3VudEF0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wU2Nyb2xsLCAnc2Nyb2xsJywgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci5XSU5ET1dfSEFORExFKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGVwZW5kZW5jeSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BGb2N1cyB8fCBkZXBlbmRlbmN5ID09PSB0b3BMZXZlbFR5cGVzLnRvcEJsdXIpIHtcblxuICAgICAgICAgIGlmIChpc0V2ZW50U3VwcG9ydGVkKCdmb2N1cycsIHRydWUpKSB7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBDYXB0dXJlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wRm9jdXMsICdmb2N1cycsIG1vdW50QXQpO1xuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQ2FwdHVyZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcEJsdXIsICdibHVyJywgbW91bnRBdCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0V2ZW50U3VwcG9ydGVkKCdmb2N1c2luJykpIHtcbiAgICAgICAgICAgIC8vIElFIGhhcyBgZm9jdXNpbmAgYW5kIGBmb2N1c291dGAgZXZlbnRzIHdoaWNoIGJ1YmJsZS5cbiAgICAgICAgICAgIC8vIEBzZWUgaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9ibG9nL2FyY2hpdmVzLzIwMDgvMDQvZGVsZWdhdGluZ190aGUuaHRtbFxuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wRm9jdXMsICdmb2N1c2luJywgbW91bnRBdCk7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BCbHVyLCAnZm9jdXNvdXQnLCBtb3VudEF0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgYmx1ciBhbmQgZm9jdXMgZXZlbnQgbGlzdGVuZXJzIGFyZSBvbmx5IGF0dGFjaGVkIG9uY2VcbiAgICAgICAgICBpc0xpc3RlbmluZ1t0b3BMZXZlbFR5cGVzLnRvcEJsdXJdID0gdHJ1ZTtcbiAgICAgICAgICBpc0xpc3RlbmluZ1t0b3BMZXZlbFR5cGVzLnRvcEZvY3VzXSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodG9wRXZlbnRNYXBwaW5nLmhhc093blByb3BlcnR5KGRlcGVuZGVuY3kpKSB7XG4gICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KGRlcGVuZGVuY3ksIHRvcEV2ZW50TWFwcGluZ1tkZXBlbmRlbmN5XSwgbW91bnRBdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpc0xpc3RlbmluZ1tkZXBlbmRlbmN5XSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHRyYXBCdWJibGVkRXZlbnQ6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKSB7XG4gICAgcmV0dXJuIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKTtcbiAgfSxcblxuICB0cmFwQ2FwdHVyZWRFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpIHtcbiAgICByZXR1cm4gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQ2FwdHVyZWRFdmVudCh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKTtcbiAgfSxcblxuICAvKipcbiAgICogTGlzdGVucyB0byB3aW5kb3cgc2Nyb2xsIGFuZCByZXNpemUgZXZlbnRzLiBXZSBjYWNoZSBzY3JvbGwgdmFsdWVzIHNvIHRoYXRcbiAgICogYXBwbGljYXRpb24gY29kZSBjYW4gYWNjZXNzIHRoZW0gd2l0aG91dCB0cmlnZ2VyaW5nIHJlZmxvd3MuXG4gICAqXG4gICAqIE5PVEU6IFNjcm9sbCBldmVudHMgZG8gbm90IGJ1YmJsZS5cbiAgICpcbiAgICogQHNlZSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2RvbS9ldmVudHMvc2Nyb2xsLmh0bWxcbiAgICovXG4gIGVuc3VyZVNjcm9sbFZhbHVlTW9uaXRvcmluZzogZnVuY3Rpb24gKCkge1xuICAgIGlmICghaXNNb25pdG9yaW5nU2Nyb2xsVmFsdWUpIHtcbiAgICAgIHZhciByZWZyZXNoID0gVmlld3BvcnRNZXRyaWNzLnJlZnJlc2hTY3JvbGxWYWx1ZXM7XG4gICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLm1vbml0b3JTY3JvbGxWYWx1ZShyZWZyZXNoKTtcbiAgICAgIGlzTW9uaXRvcmluZ1Njcm9sbFZhbHVlID0gdHJ1ZTtcbiAgICB9XG4gIH0sXG5cbiAgZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzOiBFdmVudFBsdWdpbkh1Yi5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3MsXG5cbiAgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXM6IEV2ZW50UGx1Z2luSHViLnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLFxuXG4gIHB1dExpc3RlbmVyOiBFdmVudFBsdWdpbkh1Yi5wdXRMaXN0ZW5lcixcblxuICBnZXRMaXN0ZW5lcjogRXZlbnRQbHVnaW5IdWIuZ2V0TGlzdGVuZXIsXG5cbiAgZGVsZXRlTGlzdGVuZXI6IEV2ZW50UGx1Z2luSHViLmRlbGV0ZUxpc3RlbmVyLFxuXG4gIGRlbGV0ZUFsbExpc3RlbmVyczogRXZlbnRQbHVnaW5IdWIuZGVsZXRlQWxsTGlzdGVuZXJzXG5cbn0pO1xuXG5SZWFjdFBlcmYubWVhc3VyZU1ldGhvZHMoUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLCAnUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJywge1xuICBwdXRMaXN0ZW5lcjogJ3B1dExpc3RlbmVyJyxcbiAgZGVsZXRlTGlzdGVuZXI6ICdkZWxldGVMaXN0ZW5lcidcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDaGlsZFJlY29uY2lsZXJcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcblxudmFyIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciB0cmF2ZXJzZUFsbENoaWxkcmVuID0gcmVxdWlyZSgnLi90cmF2ZXJzZUFsbENoaWxkcmVuJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuZnVuY3Rpb24gaW5zdGFudGlhdGVDaGlsZChjaGlsZEluc3RhbmNlcywgY2hpbGQsIG5hbWUpIHtcbiAgLy8gV2UgZm91bmQgYSBjb21wb25lbnQgaW5zdGFuY2UuXG4gIHZhciBrZXlVbmlxdWUgPSBjaGlsZEluc3RhbmNlc1tuYW1lXSA9PT0gdW5kZWZpbmVkO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGtleVVuaXF1ZSwgJ2ZsYXR0ZW5DaGlsZHJlbiguLi4pOiBFbmNvdW50ZXJlZCB0d28gY2hpbGRyZW4gd2l0aCB0aGUgc2FtZSBrZXksICcgKyAnYCVzYC4gQ2hpbGQga2V5cyBtdXN0IGJlIHVuaXF1ZTsgd2hlbiB0d28gY2hpbGRyZW4gc2hhcmUgYSBrZXksIG9ubHkgJyArICd0aGUgZmlyc3QgY2hpbGQgd2lsbCBiZSB1c2VkLicsIG5hbWUpIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmIChjaGlsZCAhPSBudWxsICYmIGtleVVuaXF1ZSkge1xuICAgIGNoaWxkSW5zdGFuY2VzW25hbWVdID0gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChjaGlsZCwgbnVsbCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZWFjdENoaWxkUmVjb25jaWxlciBwcm92aWRlcyBoZWxwZXJzIGZvciBpbml0aWFsaXppbmcgb3IgdXBkYXRpbmcgYSBzZXQgb2ZcbiAqIGNoaWxkcmVuLiBJdHMgb3V0cHV0IGlzIHN1aXRhYmxlIGZvciBwYXNzaW5nIGl0IG9udG8gUmVhY3RNdWx0aUNoaWxkIHdoaWNoXG4gKiBkb2VzIGRpZmZlZCByZW9yZGVyaW5nIGFuZCBpbnNlcnRpb24uXG4gKi9cbnZhciBSZWFjdENoaWxkUmVjb25jaWxlciA9IHtcbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIFwibW91bnQgaW1hZ2VcIiBmb3IgZWFjaCBvZiB0aGUgc3VwcGxpZWQgY2hpbGRyZW4uIEluIHRoZSBjYXNlXG4gICAqIG9mIGBSZWFjdERPTUNvbXBvbmVudGAsIGEgbW91bnQgaW1hZ2UgaXMgYSBzdHJpbmcgb2YgbWFya3VwLlxuICAgKlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5lc3RlZENoaWxkTm9kZXMgTmVzdGVkIGNoaWxkIG1hcHMuXG4gICAqIEByZXR1cm4gez9vYmplY3R9IEEgc2V0IG9mIGNoaWxkIGluc3RhbmNlcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBpbnN0YW50aWF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAobmVzdGVkQ2hpbGROb2RlcywgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICBpZiAobmVzdGVkQ2hpbGROb2RlcyA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIGNoaWxkSW5zdGFuY2VzID0ge307XG4gICAgdHJhdmVyc2VBbGxDaGlsZHJlbihuZXN0ZWRDaGlsZE5vZGVzLCBpbnN0YW50aWF0ZUNoaWxkLCBjaGlsZEluc3RhbmNlcyk7XG4gICAgcmV0dXJuIGNoaWxkSW5zdGFuY2VzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSByZW5kZXJlZCBjaGlsZHJlbiBhbmQgcmV0dXJucyBhIG5ldyBzZXQgb2YgY2hpbGRyZW4uXG4gICAqXG4gICAqIEBwYXJhbSB7P29iamVjdH0gcHJldkNoaWxkcmVuIFByZXZpb3VzbHkgaW5pdGlhbGl6ZWQgc2V0IG9mIGNoaWxkcmVuLlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDaGlsZHJlbiBGbGF0IGNoaWxkIGVsZW1lbnQgbWFwcy5cbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBBIG5ldyBzZXQgb2YgY2hpbGQgaW5zdGFuY2VzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHVwZGF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAocHJldkNoaWxkcmVuLCBuZXh0Q2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgLy8gV2UgY3VycmVudGx5IGRvbid0IGhhdmUgYSB3YXkgdG8gdHJhY2sgbW92ZXMgaGVyZSBidXQgaWYgd2UgdXNlIGl0ZXJhdG9yc1xuICAgIC8vIGluc3RlYWQgb2YgZm9yLi5pbiB3ZSBjYW4gemlwIHRoZSBpdGVyYXRvcnMgYW5kIGNoZWNrIGlmIGFuIGl0ZW0gaGFzXG4gICAgLy8gbW92ZWQuXG4gICAgLy8gVE9ETzogSWYgbm90aGluZyBoYXMgY2hhbmdlZCwgcmV0dXJuIHRoZSBwcmV2Q2hpbGRyZW4gb2JqZWN0IHNvIHRoYXQgd2VcbiAgICAvLyBjYW4gcXVpY2tseSBiYWlsb3V0IGlmIG5vdGhpbmcgaGFzIGNoYW5nZWQuXG4gICAgaWYgKCFuZXh0Q2hpbGRyZW4gJiYgIXByZXZDaGlsZHJlbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHZhciBuYW1lO1xuICAgIGZvciAobmFtZSBpbiBuZXh0Q2hpbGRyZW4pIHtcbiAgICAgIGlmICghbmV4dENoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIHByZXZDaGlsZCA9IHByZXZDaGlsZHJlbiAmJiBwcmV2Q2hpbGRyZW5bbmFtZV07XG4gICAgICB2YXIgcHJldkVsZW1lbnQgPSBwcmV2Q2hpbGQgJiYgcHJldkNoaWxkLl9jdXJyZW50RWxlbWVudDtcbiAgICAgIHZhciBuZXh0RWxlbWVudCA9IG5leHRDaGlsZHJlbltuYW1lXTtcbiAgICAgIGlmIChwcmV2Q2hpbGQgIT0gbnVsbCAmJiBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudChwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQpKSB7XG4gICAgICAgIFJlYWN0UmVjb25jaWxlci5yZWNlaXZlQ29tcG9uZW50KHByZXZDaGlsZCwgbmV4dEVsZW1lbnQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgbmV4dENoaWxkcmVuW25hbWVdID0gcHJldkNoaWxkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHByZXZDaGlsZCkge1xuICAgICAgICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHByZXZDaGlsZCwgbmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIGNoaWxkIG11c3QgYmUgaW5zdGFudGlhdGVkIGJlZm9yZSBpdCdzIG1vdW50ZWQuXG4gICAgICAgIHZhciBuZXh0Q2hpbGRJbnN0YW5jZSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQobmV4dEVsZW1lbnQsIG51bGwpO1xuICAgICAgICBuZXh0Q2hpbGRyZW5bbmFtZV0gPSBuZXh0Q2hpbGRJbnN0YW5jZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gVW5tb3VudCBjaGlsZHJlbiB0aGF0IGFyZSBubyBsb25nZXIgcHJlc2VudC5cbiAgICBmb3IgKG5hbWUgaW4gcHJldkNoaWxkcmVuKSB7XG4gICAgICBpZiAocHJldkNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpICYmICEobmV4dENoaWxkcmVuICYmIG5leHRDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkpIHtcbiAgICAgICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQocHJldkNoaWxkcmVuW25hbWVdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5leHRDaGlsZHJlbjtcbiAgfSxcblxuICAvKipcbiAgICogVW5tb3VudHMgYWxsIHJlbmRlcmVkIGNoaWxkcmVuLiBUaGlzIHNob3VsZCBiZSB1c2VkIHRvIGNsZWFuIHVwIGNoaWxkcmVuXG4gICAqIHdoZW4gdGhpcyBjb21wb25lbnQgaXMgdW5tb3VudGVkLlxuICAgKlxuICAgKiBAcGFyYW0gez9vYmplY3R9IHJlbmRlcmVkQ2hpbGRyZW4gUHJldmlvdXNseSBpbml0aWFsaXplZCBzZXQgb2YgY2hpbGRyZW4uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdW5tb3VudENoaWxkcmVuOiBmdW5jdGlvbiAocmVuZGVyZWRDaGlsZHJlbikge1xuICAgIGZvciAodmFyIG5hbWUgaW4gcmVuZGVyZWRDaGlsZHJlbikge1xuICAgICAgaWYgKHJlbmRlcmVkQ2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgdmFyIHJlbmRlcmVkQ2hpbGQgPSByZW5kZXJlZENoaWxkcmVuW25hbWVdO1xuICAgICAgICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudChyZW5kZXJlZENoaWxkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENoaWxkUmVjb25jaWxlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDaGlsZHJlblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIHRyYXZlcnNlQWxsQ2hpbGRyZW4gPSByZXF1aXJlKCcuL3RyYXZlcnNlQWxsQ2hpbGRyZW4nKTtcblxudmFyIHR3b0FyZ3VtZW50UG9vbGVyID0gUG9vbGVkQ2xhc3MudHdvQXJndW1lbnRQb29sZXI7XG52YXIgZm91ckFyZ3VtZW50UG9vbGVyID0gUG9vbGVkQ2xhc3MuZm91ckFyZ3VtZW50UG9vbGVyO1xuXG52YXIgdXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXggPSAvXFwvKD8hXFwvKS9nO1xuZnVuY3Rpb24gZXNjYXBlVXNlclByb3ZpZGVkS2V5KHRleHQpIHtcbiAgcmV0dXJuICgnJyArIHRleHQpLnJlcGxhY2UodXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXgsICcvLycpO1xufVxuXG4vKipcbiAqIFBvb2xlZENsYXNzIHJlcHJlc2VudGluZyB0aGUgYm9va2tlZXBpbmcgYXNzb2NpYXRlZCB3aXRoIHBlcmZvcm1pbmcgYSBjaGlsZFxuICogdHJhdmVyc2FsLiBBbGxvd3MgYXZvaWRpbmcgYmluZGluZyBjYWxsYmFja3MuXG4gKlxuICogQGNvbnN0cnVjdG9yIEZvckVhY2hCb29rS2VlcGluZ1xuICogQHBhcmFtIHshZnVuY3Rpb259IGZvckVhY2hGdW5jdGlvbiBGdW5jdGlvbiB0byBwZXJmb3JtIHRyYXZlcnNhbCB3aXRoLlxuICogQHBhcmFtIHs/Kn0gZm9yRWFjaENvbnRleHQgQ29udGV4dCB0byBwZXJmb3JtIGNvbnRleHQgd2l0aC5cbiAqL1xuZnVuY3Rpb24gRm9yRWFjaEJvb2tLZWVwaW5nKGZvckVhY2hGdW5jdGlvbiwgZm9yRWFjaENvbnRleHQpIHtcbiAgdGhpcy5mdW5jID0gZm9yRWFjaEZ1bmN0aW9uO1xuICB0aGlzLmNvbnRleHQgPSBmb3JFYWNoQ29udGV4dDtcbiAgdGhpcy5jb3VudCA9IDA7XG59XG5Gb3JFYWNoQm9va0tlZXBpbmcucHJvdG90eXBlLmRlc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZnVuYyA9IG51bGw7XG4gIHRoaXMuY29udGV4dCA9IG51bGw7XG4gIHRoaXMuY291bnQgPSAwO1xufTtcblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhGb3JFYWNoQm9va0tlZXBpbmcsIHR3b0FyZ3VtZW50UG9vbGVyKTtcblxuZnVuY3Rpb24gZm9yRWFjaFNpbmdsZUNoaWxkKGJvb2tLZWVwaW5nLCBjaGlsZCwgbmFtZSkge1xuICB2YXIgZnVuYyA9IGJvb2tLZWVwaW5nLmZ1bmM7XG4gIHZhciBjb250ZXh0ID0gYm9va0tlZXBpbmcuY29udGV4dDtcblxuICBmdW5jLmNhbGwoY29udGV4dCwgY2hpbGQsIGJvb2tLZWVwaW5nLmNvdW50KyspO1xufVxuXG4vKipcbiAqIEl0ZXJhdGVzIHRocm91Z2ggY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLlxuICpcbiAqIFRoZSBwcm92aWRlZCBmb3JFYWNoRnVuYyhjaGlsZCwgaW5kZXgpIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoXG4gKiBsZWFmIGNoaWxkLlxuICpcbiAqIEBwYXJhbSB7Pyp9IGNoaWxkcmVuIENoaWxkcmVuIHRyZWUgY29udGFpbmVyLlxuICogQHBhcmFtIHtmdW5jdGlvbigqLCBpbnQpfSBmb3JFYWNoRnVuY1xuICogQHBhcmFtIHsqfSBmb3JFYWNoQ29udGV4dCBDb250ZXh0IGZvciBmb3JFYWNoQ29udGV4dC5cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaENoaWxkcmVuKGNoaWxkcmVuLCBmb3JFYWNoRnVuYywgZm9yRWFjaENvbnRleHQpIHtcbiAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cbiAgdmFyIHRyYXZlcnNlQ29udGV4dCA9IEZvckVhY2hCb29rS2VlcGluZy5nZXRQb29sZWQoZm9yRWFjaEZ1bmMsIGZvckVhY2hDb250ZXh0KTtcbiAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgZm9yRWFjaFNpbmdsZUNoaWxkLCB0cmF2ZXJzZUNvbnRleHQpO1xuICBGb3JFYWNoQm9va0tlZXBpbmcucmVsZWFzZSh0cmF2ZXJzZUNvbnRleHQpO1xufVxuXG4vKipcbiAqIFBvb2xlZENsYXNzIHJlcHJlc2VudGluZyB0aGUgYm9va2tlZXBpbmcgYXNzb2NpYXRlZCB3aXRoIHBlcmZvcm1pbmcgYSBjaGlsZFxuICogbWFwcGluZy4gQWxsb3dzIGF2b2lkaW5nIGJpbmRpbmcgY2FsbGJhY2tzLlxuICpcbiAqIEBjb25zdHJ1Y3RvciBNYXBCb29rS2VlcGluZ1xuICogQHBhcmFtIHshKn0gbWFwUmVzdWx0IE9iamVjdCBjb250YWluaW5nIHRoZSBvcmRlcmVkIG1hcCBvZiByZXN1bHRzLlxuICogQHBhcmFtIHshZnVuY3Rpb259IG1hcEZ1bmN0aW9uIEZ1bmN0aW9uIHRvIHBlcmZvcm0gbWFwcGluZyB3aXRoLlxuICogQHBhcmFtIHs/Kn0gbWFwQ29udGV4dCBDb250ZXh0IHRvIHBlcmZvcm0gbWFwcGluZyB3aXRoLlxuICovXG5mdW5jdGlvbiBNYXBCb29rS2VlcGluZyhtYXBSZXN1bHQsIGtleVByZWZpeCwgbWFwRnVuY3Rpb24sIG1hcENvbnRleHQpIHtcbiAgdGhpcy5yZXN1bHQgPSBtYXBSZXN1bHQ7XG4gIHRoaXMua2V5UHJlZml4ID0ga2V5UHJlZml4O1xuICB0aGlzLmZ1bmMgPSBtYXBGdW5jdGlvbjtcbiAgdGhpcy5jb250ZXh0ID0gbWFwQ29udGV4dDtcbiAgdGhpcy5jb3VudCA9IDA7XG59XG5NYXBCb29rS2VlcGluZy5wcm90b3R5cGUuZGVzdHJ1Y3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5yZXN1bHQgPSBudWxsO1xuICB0aGlzLmtleVByZWZpeCA9IG51bGw7XG4gIHRoaXMuZnVuYyA9IG51bGw7XG4gIHRoaXMuY29udGV4dCA9IG51bGw7XG4gIHRoaXMuY291bnQgPSAwO1xufTtcblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhNYXBCb29rS2VlcGluZywgZm91ckFyZ3VtZW50UG9vbGVyKTtcblxuZnVuY3Rpb24gbWFwU2luZ2xlQ2hpbGRJbnRvQ29udGV4dChib29rS2VlcGluZywgY2hpbGQsIGNoaWxkS2V5KSB7XG4gIHZhciByZXN1bHQgPSBib29rS2VlcGluZy5yZXN1bHQ7XG4gIHZhciBrZXlQcmVmaXggPSBib29rS2VlcGluZy5rZXlQcmVmaXg7XG4gIHZhciBmdW5jID0gYm9va0tlZXBpbmcuZnVuYztcbiAgdmFyIGNvbnRleHQgPSBib29rS2VlcGluZy5jb250ZXh0O1xuXG4gIHZhciBtYXBwZWRDaGlsZCA9IGZ1bmMuY2FsbChjb250ZXh0LCBjaGlsZCwgYm9va0tlZXBpbmcuY291bnQrKyk7XG4gIGlmIChBcnJheS5pc0FycmF5KG1hcHBlZENoaWxkKSkge1xuICAgIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwobWFwcGVkQ2hpbGQsIHJlc3VsdCwgY2hpbGRLZXksIGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNBcmd1bWVudCk7XG4gIH0gZWxzZSBpZiAobWFwcGVkQ2hpbGQgIT0gbnVsbCkge1xuICAgIGlmIChSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQobWFwcGVkQ2hpbGQpKSB7XG4gICAgICBtYXBwZWRDaGlsZCA9IFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VLZXkobWFwcGVkQ2hpbGQsXG4gICAgICAvLyBLZWVwIGJvdGggdGhlIChtYXBwZWQpIGFuZCBvbGQga2V5cyBpZiB0aGV5IGRpZmZlciwganVzdCBhc1xuICAgICAgLy8gdHJhdmVyc2VBbGxDaGlsZHJlbiB1c2VkIHRvIGRvIGZvciBvYmplY3RzIGFzIGNoaWxkcmVuXG4gICAgICBrZXlQcmVmaXggKyAobWFwcGVkQ2hpbGQgIT09IGNoaWxkID8gZXNjYXBlVXNlclByb3ZpZGVkS2V5KG1hcHBlZENoaWxkLmtleSB8fCAnJykgKyAnLycgOiAnJykgKyBjaGlsZEtleSk7XG4gICAgfVxuICAgIHJlc3VsdC5wdXNoKG1hcHBlZENoaWxkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsKGNoaWxkcmVuLCBhcnJheSwgcHJlZml4LCBmdW5jLCBjb250ZXh0KSB7XG4gIHZhciBlc2NhcGVkUHJlZml4ID0gJyc7XG4gIGlmIChwcmVmaXggIT0gbnVsbCkge1xuICAgIGVzY2FwZWRQcmVmaXggPSBlc2NhcGVVc2VyUHJvdmlkZWRLZXkocHJlZml4KSArICcvJztcbiAgfVxuICB2YXIgdHJhdmVyc2VDb250ZXh0ID0gTWFwQm9va0tlZXBpbmcuZ2V0UG9vbGVkKGFycmF5LCBlc2NhcGVkUHJlZml4LCBmdW5jLCBjb250ZXh0KTtcbiAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgbWFwU2luZ2xlQ2hpbGRJbnRvQ29udGV4dCwgdHJhdmVyc2VDb250ZXh0KTtcbiAgTWFwQm9va0tlZXBpbmcucmVsZWFzZSh0cmF2ZXJzZUNvbnRleHQpO1xufVxuXG4vKipcbiAqIE1hcHMgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLlxuICpcbiAqIFRoZSBwcm92aWRlZCBtYXBGdW5jdGlvbihjaGlsZCwga2V5LCBpbmRleCkgd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2hcbiAqIGxlYWYgY2hpbGQuXG4gKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCosIGludCl9IGZ1bmMgVGhlIG1hcCBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBDb250ZXh0IGZvciBtYXBGdW5jdGlvbi5cbiAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIG9yZGVyZWQgbWFwIG9mIHJlc3VsdHMuXG4gKi9cbmZ1bmN0aW9uIG1hcENoaWxkcmVuKGNoaWxkcmVuLCBmdW5jLCBjb250ZXh0KSB7XG4gIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbChjaGlsZHJlbiwgcmVzdWx0LCBudWxsLCBmdW5jLCBjb250ZXh0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZm9yRWFjaFNpbmdsZUNoaWxkRHVtbXkodHJhdmVyc2VDb250ZXh0LCBjaGlsZCwgbmFtZSkge1xuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBDb3VudCB0aGUgbnVtYmVyIG9mIGNoaWxkcmVuIHRoYXQgYXJlIHR5cGljYWxseSBzcGVjaWZpZWQgYXNcbiAqIGBwcm9wcy5jaGlsZHJlbmAuXG4gKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgY2hpbGRyZW4uXG4gKi9cbmZ1bmN0aW9uIGNvdW50Q2hpbGRyZW4oY2hpbGRyZW4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIHRyYXZlcnNlQWxsQ2hpbGRyZW4oY2hpbGRyZW4sIGZvckVhY2hTaW5nbGVDaGlsZER1bW15LCBudWxsKTtcbn1cblxuLyoqXG4gKiBGbGF0dGVuIGEgY2hpbGRyZW4gb2JqZWN0ICh0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmApIGFuZFxuICogcmV0dXJuIGFuIGFycmF5IHdpdGggYXBwcm9wcmlhdGVseSByZS1rZXllZCBjaGlsZHJlbi5cbiAqL1xuZnVuY3Rpb24gdG9BcnJheShjaGlsZHJlbikge1xuICB2YXIgcmVzdWx0ID0gW107XG4gIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwoY2hpbGRyZW4sIHJlc3VsdCwgbnVsbCwgZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0FyZ3VtZW50KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIFJlYWN0Q2hpbGRyZW4gPSB7XG4gIGZvckVhY2g6IGZvckVhY2hDaGlsZHJlbixcbiAgbWFwOiBtYXBDaGlsZHJlbixcbiAgbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbDogbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbCxcbiAgY291bnQ6IGNvdW50Q2hpbGRyZW4sXG4gIHRvQXJyYXk6IHRvQXJyYXlcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDaGlsZHJlbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDbGFzc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvbmVudCcpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9ucycpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcycpO1xudmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdE5vb3BVcGRhdGVRdWV1ZScpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eU9iamVjdCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIGtleU1pcnJvciA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU1pcnJvcicpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgTUlYSU5TX0tFWSA9IGtleU9mKHsgbWl4aW5zOiBudWxsIH0pO1xuXG4vKipcbiAqIFBvbGljaWVzIHRoYXQgZGVzY3JpYmUgbWV0aG9kcyBpbiBgUmVhY3RDbGFzc0ludGVyZmFjZWAuXG4gKi9cbnZhciBTcGVjUG9saWN5ID0ga2V5TWlycm9yKHtcbiAgLyoqXG4gICAqIFRoZXNlIG1ldGhvZHMgbWF5IGJlIGRlZmluZWQgb25seSBvbmNlIGJ5IHRoZSBjbGFzcyBzcGVjaWZpY2F0aW9uIG9yIG1peGluLlxuICAgKi9cbiAgREVGSU5FX09OQ0U6IG51bGwsXG4gIC8qKlxuICAgKiBUaGVzZSBtZXRob2RzIG1heSBiZSBkZWZpbmVkIGJ5IGJvdGggdGhlIGNsYXNzIHNwZWNpZmljYXRpb24gYW5kIG1peGlucy5cbiAgICogU3Vic2VxdWVudCBkZWZpbml0aW9ucyB3aWxsIGJlIGNoYWluZWQuIFRoZXNlIG1ldGhvZHMgbXVzdCByZXR1cm4gdm9pZC5cbiAgICovXG4gIERFRklORV9NQU5ZOiBudWxsLFxuICAvKipcbiAgICogVGhlc2UgbWV0aG9kcyBhcmUgb3ZlcnJpZGluZyB0aGUgYmFzZSBjbGFzcy5cbiAgICovXG4gIE9WRVJSSURFX0JBU0U6IG51bGwsXG4gIC8qKlxuICAgKiBUaGVzZSBtZXRob2RzIGFyZSBzaW1pbGFyIHRvIERFRklORV9NQU5ZLCBleGNlcHQgd2UgYXNzdW1lIHRoZXkgcmV0dXJuXG4gICAqIG9iamVjdHMuIFdlIHRyeSB0byBtZXJnZSB0aGUga2V5cyBvZiB0aGUgcmV0dXJuIHZhbHVlcyBvZiBhbGwgdGhlIG1peGVkIGluXG4gICAqIGZ1bmN0aW9ucy4gSWYgdGhlcmUgaXMgYSBrZXkgY29uZmxpY3Qgd2UgdGhyb3cuXG4gICAqL1xuICBERUZJTkVfTUFOWV9NRVJHRUQ6IG51bGxcbn0pO1xuXG52YXIgaW5qZWN0ZWRNaXhpbnMgPSBbXTtcblxudmFyIHdhcm5lZFNldFByb3BzID0gZmFsc2U7XG5mdW5jdGlvbiB3YXJuU2V0UHJvcHMoKSB7XG4gIGlmICghd2FybmVkU2V0UHJvcHMpIHtcbiAgICB3YXJuZWRTZXRQcm9wcyA9IHRydWU7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdzZXRQcm9wcyguLi4pIGFuZCByZXBsYWNlUHJvcHMoLi4uKSBhcmUgZGVwcmVjYXRlZC4gJyArICdJbnN0ZWFkLCBjYWxsIHJlbmRlciBhZ2FpbiBhdCB0aGUgdG9wIGxldmVsLicpIDogdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogQ29tcG9zaXRlIGNvbXBvbmVudHMgYXJlIGhpZ2hlci1sZXZlbCBjb21wb25lbnRzIHRoYXQgY29tcG9zZSBvdGhlciBjb21wb3NpdGVcbiAqIG9yIG5hdGl2ZSBjb21wb25lbnRzLlxuICpcbiAqIFRvIGNyZWF0ZSBhIG5ldyB0eXBlIG9mIGBSZWFjdENsYXNzYCwgcGFzcyBhIHNwZWNpZmljYXRpb24gb2ZcbiAqIHlvdXIgbmV3IGNsYXNzIHRvIGBSZWFjdC5jcmVhdGVDbGFzc2AuIFRoZSBvbmx5IHJlcXVpcmVtZW50IG9mIHlvdXIgY2xhc3NcbiAqIHNwZWNpZmljYXRpb24gaXMgdGhhdCB5b3UgaW1wbGVtZW50IGEgYHJlbmRlcmAgbWV0aG9kLlxuICpcbiAqICAgdmFyIE15Q29tcG9uZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICByZXR1cm4gPGRpdj5IZWxsbyBXb3JsZDwvZGl2PjtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFRoZSBjbGFzcyBzcGVjaWZpY2F0aW9uIHN1cHBvcnRzIGEgc3BlY2lmaWMgcHJvdG9jb2wgb2YgbWV0aG9kcyB0aGF0IGhhdmVcbiAqIHNwZWNpYWwgbWVhbmluZyAoZS5nLiBgcmVuZGVyYCkuIFNlZSBgUmVhY3RDbGFzc0ludGVyZmFjZWAgZm9yXG4gKiBtb3JlIHRoZSBjb21wcmVoZW5zaXZlIHByb3RvY29sLiBBbnkgb3RoZXIgcHJvcGVydGllcyBhbmQgbWV0aG9kcyBpbiB0aGVcbiAqIGNsYXNzIHNwZWNpZmljYXRpb24gd2lsbCBiZSBhdmFpbGFibGUgb24gdGhlIHByb3RvdHlwZS5cbiAqXG4gKiBAaW50ZXJmYWNlIFJlYWN0Q2xhc3NJbnRlcmZhY2VcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RDbGFzc0ludGVyZmFjZSA9IHtcblxuICAvKipcbiAgICogQW4gYXJyYXkgb2YgTWl4aW4gb2JqZWN0cyB0byBpbmNsdWRlIHdoZW4gZGVmaW5pbmcgeW91ciBjb21wb25lbnQuXG4gICAqXG4gICAqIEB0eXBlIHthcnJheX1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBtaXhpbnM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBjb250YWluaW5nIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMgdGhhdCBzaG91bGQgYmUgZGVmaW5lZCBvblxuICAgKiB0aGUgY29tcG9uZW50J3MgY29uc3RydWN0b3IgaW5zdGVhZCBvZiBpdHMgcHJvdG90eXBlIChzdGF0aWMgbWV0aG9kcykuXG4gICAqXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgc3RhdGljczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogRGVmaW5pdGlvbiBvZiBwcm9wIHR5cGVzIGZvciB0aGlzIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHR5cGUge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBwcm9wVHlwZXM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIERlZmluaXRpb24gb2YgY29udGV4dCB0eXBlcyBmb3IgdGhpcyBjb21wb25lbnQuXG4gICAqXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY29udGV4dFR5cGVzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBEZWZpbml0aW9uIG9mIGNvbnRleHQgdHlwZXMgdGhpcyBjb21wb25lbnQgc2V0cyBmb3IgaXRzIGNoaWxkcmVuLlxuICAgKlxuICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNoaWxkQ29udGV4dFR5cGVzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8vID09PT0gRGVmaW5pdGlvbiBtZXRob2RzID09PT1cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZC4gVmFsdWVzIGluIHRoZSBtYXBwaW5nIHdpbGwgYmUgc2V0IG9uXG4gICAqIGB0aGlzLnByb3BzYCBpZiB0aGF0IHByb3AgaXMgbm90IHNwZWNpZmllZCAoaS5lLiB1c2luZyBhbiBgaW5gIGNoZWNrKS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgaW52b2tlZCBiZWZvcmUgYGdldEluaXRpYWxTdGF0ZWAgYW5kIHRoZXJlZm9yZSBjYW5ub3QgcmVseVxuICAgKiBvbiBgdGhpcy5zdGF0ZWAgb3IgdXNlIGB0aGlzLnNldFN0YXRlYC5cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGdldERlZmF1bHRQcm9wczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQsXG5cbiAgLyoqXG4gICAqIEludm9rZWQgb25jZSBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkLiBUaGUgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZFxuICAgKiBhcyB0aGUgaW5pdGlhbCB2YWx1ZSBvZiBgdGhpcy5zdGF0ZWAuXG4gICAqXG4gICAqICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICogICAgIHJldHVybiB7XG4gICAqICAgICAgIGlzT246IGZhbHNlLFxuICAgKiAgICAgICBmb29CYXo6IG5ldyBCYXpGb28oKVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGdldEluaXRpYWxTdGF0ZTogU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQsXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBnZXRDaGlsZENvbnRleHQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VELFxuXG4gIC8qKlxuICAgKiBVc2VzIHByb3BzIGZyb20gYHRoaXMucHJvcHNgIGFuZCBzdGF0ZSBmcm9tIGB0aGlzLnN0YXRlYCB0byByZW5kZXIgdGhlXG4gICAqIHN0cnVjdHVyZSBvZiB0aGUgY29tcG9uZW50LlxuICAgKlxuICAgKiBObyBndWFyYW50ZWVzIGFyZSBtYWRlIGFib3V0IHdoZW4gb3IgaG93IG9mdGVuIHRoaXMgbWV0aG9kIGlzIGludm9rZWQsIHNvXG4gICAqIGl0IG11c3Qgbm90IGhhdmUgc2lkZSBlZmZlY3RzLlxuICAgKlxuICAgKiAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAqICAgICB2YXIgbmFtZSA9IHRoaXMucHJvcHMubmFtZTtcbiAgICogICAgIHJldHVybiA8ZGl2PkhlbGxvLCB7bmFtZX0hPC9kaXY+O1xuICAgKiAgIH1cbiAgICpcbiAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9XG4gICAqIEBub3NpZGVlZmZlY3RzXG4gICAqIEByZXF1aXJlZFxuICAgKi9cbiAgcmVuZGVyOiBTcGVjUG9saWN5LkRFRklORV9PTkNFLFxuXG4gIC8vID09PT0gRGVsZWdhdGUgbWV0aG9kcyA9PT09XG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGluaXRpYWxseSBjcmVhdGVkIGFuZCBhYm91dCB0byBiZSBtb3VudGVkLlxuICAgKiBUaGlzIG1heSBoYXZlIHNpZGUgZWZmZWN0cywgYnV0IGFueSBleHRlcm5hbCBzdWJzY3JpcHRpb25zIG9yIGRhdGEgY3JlYXRlZFxuICAgKiBieSB0aGlzIG1ldGhvZCBtdXN0IGJlIGNsZWFuZWQgdXAgaW4gYGNvbXBvbmVudFdpbGxVbm1vdW50YC5cbiAgICpcbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnRXaWxsTW91bnQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGhhcyBiZWVuIG1vdW50ZWQgYW5kIGhhcyBhIERPTSByZXByZXNlbnRhdGlvbi5cbiAgICogSG93ZXZlciwgdGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgdGhlIERPTSBub2RlIGlzIGluIHRoZSBkb2N1bWVudC5cbiAgICpcbiAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gb3BlcmF0ZSBvbiB0aGUgRE9NIHdoZW4gdGhlIGNvbXBvbmVudCBoYXNcbiAgICogYmVlbiBtb3VudGVkIChpbml0aWFsaXplZCBhbmQgcmVuZGVyZWQpIGZvciB0aGUgZmlyc3QgdGltZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSByb290Tm9kZSBET00gZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIGNvbXBvbmVudC5cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnREaWRNb3VudDogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogSW52b2tlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCByZWNlaXZlcyBuZXcgcHJvcHMuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIHJlYWN0IHRvIGEgcHJvcCB0cmFuc2l0aW9uIGJ5IHVwZGF0aW5nIHRoZVxuICAgKiBzdGF0ZSB1c2luZyBgdGhpcy5zZXRTdGF0ZWAuIEN1cnJlbnQgcHJvcHMgYXJlIGFjY2Vzc2VkIHZpYSBgdGhpcy5wcm9wc2AuXG4gICAqXG4gICAqICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24obmV4dFByb3BzLCBuZXh0Q29udGV4dCkge1xuICAgKiAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAqICAgICAgIGxpa2VzSW5jcmVhc2luZzogbmV4dFByb3BzLmxpa2VDb3VudCA+IHRoaXMucHJvcHMubGlrZUNvdW50XG4gICAqICAgICB9KTtcbiAgICogICB9XG4gICAqXG4gICAqIE5PVEU6IFRoZXJlIGlzIG5vIGVxdWl2YWxlbnQgYGNvbXBvbmVudFdpbGxSZWNlaXZlU3RhdGVgLiBBbiBpbmNvbWluZyBwcm9wXG4gICAqIHRyYW5zaXRpb24gbWF5IGNhdXNlIGEgc3RhdGUgY2hhbmdlLCBidXQgdGhlIG9wcG9zaXRlIGlzIG5vdCB0cnVlLiBJZiB5b3VcbiAgICogbmVlZCBpdCwgeW91IGFyZSBwcm9iYWJseSBsb29raW5nIGZvciBgY29tcG9uZW50V2lsbFVwZGF0ZWAuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoaWxlIGRlY2lkaW5nIGlmIHRoZSBjb21wb25lbnQgc2hvdWxkIGJlIHVwZGF0ZWQgYXMgYSByZXN1bHQgb2ZcbiAgICogcmVjZWl2aW5nIG5ldyBwcm9wcywgc3RhdGUgYW5kL29yIGNvbnRleHQuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIGByZXR1cm4gZmFsc2VgIHdoZW4geW91J3JlIGNlcnRhaW4gdGhhdCB0aGVcbiAgICogdHJhbnNpdGlvbiB0byB0aGUgbmV3IHByb3BzL3N0YXRlL2NvbnRleHQgd2lsbCBub3QgcmVxdWlyZSBhIGNvbXBvbmVudFxuICAgKiB1cGRhdGUuXG4gICAqXG4gICAqICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBmdW5jdGlvbihuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpIHtcbiAgICogICAgIHJldHVybiAhZXF1YWwobmV4dFByb3BzLCB0aGlzLnByb3BzKSB8fFxuICAgKiAgICAgICAhZXF1YWwobmV4dFN0YXRlLCB0aGlzLnN0YXRlKSB8fFxuICAgKiAgICAgICAhZXF1YWwobmV4dENvbnRleHQsIHRoaXMuY29udGV4dCk7XG4gICAqICAgfVxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dFN0YXRlXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dENvbnRleHRcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY29tcG9uZW50IHNob3VsZCB1cGRhdGUuXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBTcGVjUG9saWN5LkRFRklORV9PTkNFLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhYm91dCB0byB1cGRhdGUgZHVlIHRvIGEgdHJhbnNpdGlvbiBmcm9tXG4gICAqIGB0aGlzLnByb3BzYCwgYHRoaXMuc3RhdGVgIGFuZCBgdGhpcy5jb250ZXh0YCB0byBgbmV4dFByb3BzYCwgYG5leHRTdGF0ZWBcbiAgICogYW5kIGBuZXh0Q29udGV4dGAuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIHBlcmZvcm0gcHJlcGFyYXRpb24gYmVmb3JlIGFuIHVwZGF0ZSBvY2N1cnMuXG4gICAqXG4gICAqIE5PVEU6IFlvdSAqKmNhbm5vdCoqIHVzZSBgdGhpcy5zZXRTdGF0ZSgpYCBpbiB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG5leHRQcm9wc1xuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRTdGF0ZVxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDb250ZXh0XG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnRXaWxsVXBkYXRlOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCdzIERPTSByZXByZXNlbnRhdGlvbiBoYXMgYmVlbiB1cGRhdGVkLlxuICAgKlxuICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBvcGVyYXRlIG9uIHRoZSBET00gd2hlbiB0aGUgY29tcG9uZW50IGhhc1xuICAgKiBiZWVuIHVwZGF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcmV2UHJvcHNcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2U3RhdGVcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2Q29udGV4dFxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHJvb3ROb2RlIERPTSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgY29tcG9uZW50LlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZCBmcm9tIGl0cyBwYXJlbnQgYW5kIGhhdmVcbiAgICogaXRzIERPTSByZXByZXNlbnRhdGlvbiBkZXN0cm95ZWQuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIGRlYWxsb2NhdGUgYW55IGV4dGVybmFsIHJlc291cmNlcy5cbiAgICpcbiAgICogTk9URTogVGhlcmUgaXMgbm8gYGNvbXBvbmVudERpZFVubW91bnRgIHNpbmNlIHlvdXIgY29tcG9uZW50IHdpbGwgaGF2ZSBiZWVuXG4gICAqIGRlc3Ryb3llZCBieSB0aGF0IHBvaW50LlxuICAgKlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8vID09PT0gQWR2YW5jZWQgbWV0aG9kcyA9PT09XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNvbXBvbmVudCdzIGN1cnJlbnRseSBtb3VudGVkIERPTSByZXByZXNlbnRhdGlvbi5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhpcyBpbXBsZW1lbnRzIFJlYWN0J3MgcmVuZGVyaW5nIGFuZCByZWNvbmNpbGlhdGlvbiBhbGdvcml0aG0uXG4gICAqIFNvcGhpc3RpY2F0ZWQgY2xpZW50cyBtYXkgd2lzaCB0byBvdmVycmlkZSB0aGlzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAb3ZlcnJpZGFibGVcbiAgICovXG4gIHVwZGF0ZUNvbXBvbmVudDogU3BlY1BvbGljeS5PVkVSUklERV9CQVNFXG5cbn07XG5cbi8qKlxuICogTWFwcGluZyBmcm9tIGNsYXNzIHNwZWNpZmljYXRpb24ga2V5cyB0byBzcGVjaWFsIHByb2Nlc3NpbmcgZnVuY3Rpb25zLlxuICpcbiAqIEFsdGhvdWdoIHRoZXNlIGFyZSBkZWNsYXJlZCBsaWtlIGluc3RhbmNlIHByb3BlcnRpZXMgaW4gdGhlIHNwZWNpZmljYXRpb25cbiAqIHdoZW4gZGVmaW5pbmcgY2xhc3NlcyB1c2luZyBgUmVhY3QuY3JlYXRlQ2xhc3NgLCB0aGV5IGFyZSBhY3R1YWxseSBzdGF0aWNcbiAqIGFuZCBhcmUgYWNjZXNzaWJsZSBvbiB0aGUgY29uc3RydWN0b3IgaW5zdGVhZCBvZiB0aGUgcHJvdG90eXBlLiBEZXNwaXRlXG4gKiBiZWluZyBzdGF0aWMsIHRoZXkgbXVzdCBiZSBkZWZpbmVkIG91dHNpZGUgb2YgdGhlIFwic3RhdGljc1wiIGtleSB1bmRlclxuICogd2hpY2ggYWxsIG90aGVyIHN0YXRpYyBtZXRob2RzIGFyZSBkZWZpbmVkLlxuICovXG52YXIgUkVTRVJWRURfU1BFQ19LRVlTID0ge1xuICBkaXNwbGF5TmFtZTogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBkaXNwbGF5TmFtZSkge1xuICAgIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7XG4gIH0sXG4gIG1peGluczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBtaXhpbnMpIHtcbiAgICBpZiAobWl4aW5zKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1peGlucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3RvciwgbWl4aW5zW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGNoaWxkQ29udGV4dFR5cGVzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGNoaWxkQ29udGV4dFR5cGVzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgY2hpbGRDb250ZXh0VHlwZXMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY2hpbGRDb250ZXh0KTtcbiAgICB9XG4gICAgQ29uc3RydWN0b3IuY2hpbGRDb250ZXh0VHlwZXMgPSBhc3NpZ24oe30sIENvbnN0cnVjdG9yLmNoaWxkQ29udGV4dFR5cGVzLCBjaGlsZENvbnRleHRUeXBlcyk7XG4gIH0sXG4gIGNvbnRleHRUeXBlczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBjb250ZXh0VHlwZXMpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCBjb250ZXh0VHlwZXMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY29udGV4dCk7XG4gICAgfVxuICAgIENvbnN0cnVjdG9yLmNvbnRleHRUeXBlcyA9IGFzc2lnbih7fSwgQ29uc3RydWN0b3IuY29udGV4dFR5cGVzLCBjb250ZXh0VHlwZXMpO1xuICB9LFxuICAvKipcbiAgICogU3BlY2lhbCBjYXNlIGdldERlZmF1bHRQcm9wcyB3aGljaCBzaG91bGQgbW92ZSBpbnRvIHN0YXRpY3MgYnV0IHJlcXVpcmVzXG4gICAqIGF1dG9tYXRpYyBtZXJnaW5nLlxuICAgKi9cbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGdldERlZmF1bHRQcm9wcykge1xuICAgIGlmIChDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMpIHtcbiAgICAgIENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcyA9IGNyZWF0ZU1lcmdlZFJlc3VsdEZ1bmN0aW9uKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcywgZ2V0RGVmYXVsdFByb3BzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzID0gZ2V0RGVmYXVsdFByb3BzO1xuICAgIH1cbiAgfSxcbiAgcHJvcFR5cGVzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3BUeXBlcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YWxpZGF0ZVR5cGVEZWYoQ29uc3RydWN0b3IsIHByb3BUeXBlcywgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5wcm9wKTtcbiAgICB9XG4gICAgQ29uc3RydWN0b3IucHJvcFR5cGVzID0gYXNzaWduKHt9LCBDb25zdHJ1Y3Rvci5wcm9wVHlwZXMsIHByb3BUeXBlcyk7XG4gIH0sXG4gIHN0YXRpY3M6IGZ1bmN0aW9uIChDb25zdHJ1Y3Rvciwgc3RhdGljcykge1xuICAgIG1peFN0YXRpY1NwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzdGF0aWNzKTtcbiAgfSxcbiAgYXV0b2JpbmQ6IGZ1bmN0aW9uICgpIHt9IH07XG5cbi8vIG5vb3BcbmZ1bmN0aW9uIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgdHlwZURlZiwgbG9jYXRpb24pIHtcbiAgZm9yICh2YXIgcHJvcE5hbWUgaW4gdHlwZURlZikge1xuICAgIGlmICh0eXBlRGVmLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgLy8gdXNlIGEgd2FybmluZyBpbnN0ZWFkIG9mIGFuIGludmFyaWFudCBzbyBjb21wb25lbnRzXG4gICAgICAvLyBkb24ndCBzaG93IHVwIGluIHByb2QgYnV0IG5vdCBpbiBfX0RFVl9fXG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgdHlwZURlZltwcm9wTmFtZV0gPT09ICdmdW5jdGlvbicsICclczogJXMgdHlwZSBgJXNgIGlzIGludmFsaWQ7IGl0IG11c3QgYmUgYSBmdW5jdGlvbiwgdXN1YWxseSBmcm9tICcgKyAnUmVhY3QuUHJvcFR5cGVzLicsIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8ICdSZWFjdENsYXNzJywgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dLCBwcm9wTmFtZSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUocHJvdG8sIG5hbWUpIHtcbiAgdmFyIHNwZWNQb2xpY3kgPSBSZWFjdENsYXNzSW50ZXJmYWNlLmhhc093blByb3BlcnR5KG5hbWUpID8gUmVhY3RDbGFzc0ludGVyZmFjZVtuYW1lXSA6IG51bGw7XG5cbiAgLy8gRGlzYWxsb3cgb3ZlcnJpZGluZyBvZiBiYXNlIGNsYXNzIG1ldGhvZHMgdW5sZXNzIGV4cGxpY2l0bHkgYWxsb3dlZC5cbiAgaWYgKFJlYWN0Q2xhc3NNaXhpbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICEoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5PVkVSUklERV9CQVNFKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzSW50ZXJmYWNlOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gb3ZlcnJpZGUgJyArICdgJXNgIGZyb20geW91ciBjbGFzcyBzcGVjaWZpY2F0aW9uLiBFbnN1cmUgdGhhdCB5b3VyIG1ldGhvZCBuYW1lcyAnICsgJ2RvIG5vdCBvdmVybGFwIHdpdGggUmVhY3QgbWV0aG9kcy4nLCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH1cblxuICAvLyBEaXNhbGxvdyBkZWZpbmluZyBtZXRob2RzIG1vcmUgdGhhbiBvbmNlIHVubGVzcyBleHBsaWNpdGx5IGFsbG93ZWQuXG4gIGlmIChwcm90by5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICEoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWSB8fCBzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzc0ludGVyZmFjZTogWW91IGFyZSBhdHRlbXB0aW5nIHRvIGRlZmluZSAnICsgJ2Alc2Agb24geW91ciBjb21wb25lbnQgbW9yZSB0aGFuIG9uY2UuIFRoaXMgY29uZmxpY3QgbWF5IGJlIGR1ZSAnICsgJ3RvIGEgbWl4aW4uJywgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogTWl4aW4gaGVscGVyIHdoaWNoIGhhbmRsZXMgcG9saWN5IHZhbGlkYXRpb24gYW5kIHJlc2VydmVkXG4gKiBzcGVjaWZpY2F0aW9uIGtleXMgd2hlbiBidWlsZGluZyBSZWFjdCBjbGFzc3Nlcy5cbiAqL1xuZnVuY3Rpb24gbWl4U3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIHNwZWMpIHtcbiAgaWYgKCFzcGVjKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgISh0eXBlb2Ygc3BlYyAhPT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91XFwncmUgYXR0ZW1wdGluZyB0byAnICsgJ3VzZSBhIGNvbXBvbmVudCBjbGFzcyBhcyBhIG1peGluLiBJbnN0ZWFkLCBqdXN0IHVzZSBhIHJlZ3VsYXIgb2JqZWN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgISFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoc3BlYykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91XFwncmUgYXR0ZW1wdGluZyB0byAnICsgJ3VzZSBhIGNvbXBvbmVudCBhcyBhIG1peGluLiBJbnN0ZWFkLCBqdXN0IHVzZSBhIHJlZ3VsYXIgb2JqZWN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICB2YXIgcHJvdG8gPSBDb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG5cbiAgLy8gQnkgaGFuZGxpbmcgbWl4aW5zIGJlZm9yZSBhbnkgb3RoZXIgcHJvcGVydGllcywgd2UgZW5zdXJlIHRoZSBzYW1lXG4gIC8vIGNoYWluaW5nIG9yZGVyIGlzIGFwcGxpZWQgdG8gbWV0aG9kcyB3aXRoIERFRklORV9NQU5ZIHBvbGljeSwgd2hldGhlclxuICAvLyBtaXhpbnMgYXJlIGxpc3RlZCBiZWZvcmUgb3IgYWZ0ZXIgdGhlc2UgbWV0aG9kcyBpbiB0aGUgc3BlYy5cbiAgaWYgKHNwZWMuaGFzT3duUHJvcGVydHkoTUlYSU5TX0tFWSkpIHtcbiAgICBSRVNFUlZFRF9TUEVDX0tFWVMubWl4aW5zKENvbnN0cnVjdG9yLCBzcGVjLm1peGlucyk7XG4gIH1cblxuICBmb3IgKHZhciBuYW1lIGluIHNwZWMpIHtcbiAgICBpZiAoIXNwZWMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChuYW1lID09PSBNSVhJTlNfS0VZKSB7XG4gICAgICAvLyBXZSBoYXZlIGFscmVhZHkgaGFuZGxlZCBtaXhpbnMgaW4gYSBzcGVjaWFsIGNhc2UgYWJvdmUuXG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICB2YXIgcHJvcGVydHkgPSBzcGVjW25hbWVdO1xuICAgIHZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUocHJvdG8sIG5hbWUpO1xuXG4gICAgaWYgKFJFU0VSVkVEX1NQRUNfS0VZUy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgUkVTRVJWRURfU1BFQ19LRVlTW25hbWVdKENvbnN0cnVjdG9yLCBwcm9wZXJ0eSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNldHVwIG1ldGhvZHMgb24gcHJvdG90eXBlOlxuICAgICAgLy8gVGhlIGZvbGxvd2luZyBtZW1iZXIgbWV0aG9kcyBzaG91bGQgbm90IGJlIGF1dG9tYXRpY2FsbHkgYm91bmQ6XG4gICAgICAvLyAxLiBFeHBlY3RlZCBSZWFjdENsYXNzIG1ldGhvZHMgKGluIHRoZSBcImludGVyZmFjZVwiKS5cbiAgICAgIC8vIDIuIE92ZXJyaWRkZW4gbWV0aG9kcyAodGhhdCB3ZXJlIG1peGVkIGluKS5cbiAgICAgIHZhciBpc1JlYWN0Q2xhc3NNZXRob2QgPSBSZWFjdENsYXNzSW50ZXJmYWNlLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgICAgdmFyIGlzQWxyZWFkeURlZmluZWQgPSBwcm90by5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcbiAgICAgIHZhciBpc0Z1bmN0aW9uID0gdHlwZW9mIHByb3BlcnR5ID09PSAnZnVuY3Rpb24nO1xuICAgICAgdmFyIHNob3VsZEF1dG9CaW5kID0gaXNGdW5jdGlvbiAmJiAhaXNSZWFjdENsYXNzTWV0aG9kICYmICFpc0FscmVhZHlEZWZpbmVkICYmIHNwZWMuYXV0b2JpbmQgIT09IGZhbHNlO1xuXG4gICAgICBpZiAoc2hvdWxkQXV0b0JpbmQpIHtcbiAgICAgICAgaWYgKCFwcm90by5fX3JlYWN0QXV0b0JpbmRNYXApIHtcbiAgICAgICAgICBwcm90by5fX3JlYWN0QXV0b0JpbmRNYXAgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBwcm90by5fX3JlYWN0QXV0b0JpbmRNYXBbbmFtZV0gPSBwcm9wZXJ0eTtcbiAgICAgICAgcHJvdG9bbmFtZV0gPSBwcm9wZXJ0eTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc0FscmVhZHlEZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIHNwZWNQb2xpY3kgPSBSZWFjdENsYXNzSW50ZXJmYWNlW25hbWVdO1xuXG4gICAgICAgICAgLy8gVGhlc2UgY2FzZXMgc2hvdWxkIGFscmVhZHkgYmUgY2F1Z2h0IGJ5IHZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUuXG4gICAgICAgICAgIShpc1JlYWN0Q2xhc3NNZXRob2QgJiYgKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VEIHx8IHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTlkpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBVbmV4cGVjdGVkIHNwZWMgcG9saWN5ICVzIGZvciBrZXkgJXMgJyArICd3aGVuIG1peGluZyBpbiBjb21wb25lbnQgc3BlY3MuJywgc3BlY1BvbGljeSwgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgLy8gRm9yIG1ldGhvZHMgd2hpY2ggYXJlIGRlZmluZWQgbW9yZSB0aGFuIG9uY2UsIGNhbGwgdGhlIGV4aXN0aW5nXG4gICAgICAgICAgLy8gbWV0aG9kcyBiZWZvcmUgY2FsbGluZyB0aGUgbmV3IHByb3BlcnR5LCBtZXJnaW5nIGlmIGFwcHJvcHJpYXRlLlxuICAgICAgICAgIGlmIChzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCkge1xuICAgICAgICAgICAgcHJvdG9bbmFtZV0gPSBjcmVhdGVNZXJnZWRSZXN1bHRGdW5jdGlvbihwcm90b1tuYW1lXSwgcHJvcGVydHkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWSkge1xuICAgICAgICAgICAgcHJvdG9bbmFtZV0gPSBjcmVhdGVDaGFpbmVkRnVuY3Rpb24ocHJvdG9bbmFtZV0sIHByb3BlcnR5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvdG9bbmFtZV0gPSBwcm9wZXJ0eTtcbiAgICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgLy8gQWRkIHZlcmJvc2UgZGlzcGxheU5hbWUgdG8gdGhlIGZ1bmN0aW9uLCB3aGljaCBoZWxwcyB3aGVuIGxvb2tpbmdcbiAgICAgICAgICAgIC8vIGF0IHByb2ZpbGluZyB0b29scy5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcGVydHkgPT09ICdmdW5jdGlvbicgJiYgc3BlYy5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgICAgICBwcm90b1tuYW1lXS5kaXNwbGF5TmFtZSA9IHNwZWMuZGlzcGxheU5hbWUgKyAnXycgKyBuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBtaXhTdGF0aWNTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3RhdGljcykge1xuICBpZiAoIXN0YXRpY3MpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZm9yICh2YXIgbmFtZSBpbiBzdGF0aWNzKSB7XG4gICAgdmFyIHByb3BlcnR5ID0gc3RhdGljc1tuYW1lXTtcbiAgICBpZiAoIXN0YXRpY3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBpc1Jlc2VydmVkID0gKG5hbWUgaW4gUkVTRVJWRURfU1BFQ19LRVlTKTtcbiAgICAhIWlzUmVzZXJ2ZWQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91IGFyZSBhdHRlbXB0aW5nIHRvIGRlZmluZSBhIHJlc2VydmVkICcgKyAncHJvcGVydHksIGAlc2AsIHRoYXQgc2hvdWxkblxcJ3QgYmUgb24gdGhlIFwic3RhdGljc1wiIGtleS4gRGVmaW5lIGl0ICcgKyAnYXMgYW4gaW5zdGFuY2UgcHJvcGVydHkgaW5zdGVhZDsgaXQgd2lsbCBzdGlsbCBiZSBhY2Nlc3NpYmxlIG9uIHRoZSAnICsgJ2NvbnN0cnVjdG9yLicsIG5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBpc0luaGVyaXRlZCA9IChuYW1lIGluIENvbnN0cnVjdG9yKTtcbiAgICAhIWlzSW5oZXJpdGVkID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBkZWZpbmUgJyArICdgJXNgIG9uIHlvdXIgY29tcG9uZW50IG1vcmUgdGhhbiBvbmNlLiBUaGlzIGNvbmZsaWN0IG1heSBiZSAnICsgJ2R1ZSB0byBhIG1peGluLicsIG5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBDb25zdHJ1Y3RvcltuYW1lXSA9IHByb3BlcnR5O1xuICB9XG59XG5cbi8qKlxuICogTWVyZ2UgdHdvIG9iamVjdHMsIGJ1dCB0aHJvdyBpZiBib3RoIGNvbnRhaW4gdGhlIHNhbWUga2V5LlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvbmUgVGhlIGZpcnN0IG9iamVjdCwgd2hpY2ggaXMgbXV0YXRlZC5cbiAqIEBwYXJhbSB7b2JqZWN0fSB0d28gVGhlIHNlY29uZCBvYmplY3RcbiAqIEByZXR1cm4ge29iamVjdH0gb25lIGFmdGVyIGl0IGhhcyBiZWVuIG11dGF0ZWQgdG8gY29udGFpbiBldmVyeXRoaW5nIGluIHR3by5cbiAqL1xuZnVuY3Rpb24gbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cyhvbmUsIHR3bykge1xuICAhKG9uZSAmJiB0d28gJiYgdHlwZW9mIG9uZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHR3byA9PT0gJ29iamVjdCcpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ21lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoKTogQ2Fubm90IG1lcmdlIG5vbi1vYmplY3RzLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICBmb3IgKHZhciBrZXkgaW4gdHdvKSB7XG4gICAgaWYgKHR3by5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAhKG9uZVtrZXldID09PSB1bmRlZmluZWQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ21lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoKTogJyArICdUcmllZCB0byBtZXJnZSB0d28gb2JqZWN0cyB3aXRoIHRoZSBzYW1lIGtleTogYCVzYC4gVGhpcyBjb25mbGljdCAnICsgJ21heSBiZSBkdWUgdG8gYSBtaXhpbjsgaW4gcGFydGljdWxhciwgdGhpcyBtYXkgYmUgY2F1c2VkIGJ5IHR3byAnICsgJ2dldEluaXRpYWxTdGF0ZSgpIG9yIGdldERlZmF1bHRQcm9wcygpIG1ldGhvZHMgcmV0dXJuaW5nIG9iamVjdHMgJyArICd3aXRoIGNsYXNoaW5nIGtleXMuJywga2V5KSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICBvbmVba2V5XSA9IHR3b1trZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb25lO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdHdvIGZ1bmN0aW9ucyBhbmQgbWVyZ2VzIHRoZWlyIHJldHVybiB2YWx1ZXMuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gb25lIEZ1bmN0aW9uIHRvIGludm9rZSBmaXJzdC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHR3byBGdW5jdGlvbiB0byBpbnZva2Ugc2Vjb25kLlxuICogQHJldHVybiB7ZnVuY3Rpb259IEZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0aGUgdHdvIGFyZ3VtZW50IGZ1bmN0aW9ucy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU1lcmdlZFJlc3VsdEZ1bmN0aW9uKG9uZSwgdHdvKSB7XG4gIHJldHVybiBmdW5jdGlvbiBtZXJnZWRSZXN1bHQoKSB7XG4gICAgdmFyIGEgPSBvbmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB2YXIgYiA9IHR3by5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChhID09IG51bGwpIHtcbiAgICAgIHJldHVybiBiO1xuICAgIH0gZWxzZSBpZiAoYiA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gYTtcbiAgICB9XG4gICAgdmFyIGMgPSB7fTtcbiAgICBtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKGMsIGEpO1xuICAgIG1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoYywgYik7XG4gICAgcmV0dXJuIGM7XG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0d28gZnVuY3Rpb25zIGFuZCBpZ25vcmVzIHRoZWlyIHJldHVybiB2YWxlcy5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbmUgRnVuY3Rpb24gdG8gaW52b2tlIGZpcnN0LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHdvIEZ1bmN0aW9uIHRvIGludm9rZSBzZWNvbmQuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gRnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSB0d28gYXJndW1lbnQgZnVuY3Rpb25zLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2hhaW5lZEZ1bmN0aW9uKG9uZSwgdHdvKSB7XG4gIHJldHVybiBmdW5jdGlvbiBjaGFpbmVkRnVuY3Rpb24oKSB7XG4gICAgb25lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdHdvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbi8qKlxuICogQmluZHMgYSBtZXRob2QgdG8gdGhlIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29tcG9uZW50IENvbXBvbmVudCB3aG9zZSBtZXRob2QgaXMgZ29pbmcgdG8gYmUgYm91bmQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBtZXRob2QgTWV0aG9kIHRvIGJlIGJvdW5kLlxuICogQHJldHVybiB7ZnVuY3Rpb259IFRoZSBib3VuZCBtZXRob2QuXG4gKi9cbmZ1bmN0aW9uIGJpbmRBdXRvQmluZE1ldGhvZChjb21wb25lbnQsIG1ldGhvZCkge1xuICB2YXIgYm91bmRNZXRob2QgPSBtZXRob2QuYmluZChjb21wb25lbnQpO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZENvbnRleHQgPSBjb21wb25lbnQ7XG4gICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kTWV0aG9kID0gbWV0aG9kO1xuICAgIGJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZEFyZ3VtZW50cyA9IG51bGw7XG4gICAgdmFyIGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQuY29uc3RydWN0b3IuZGlzcGxheU5hbWU7XG4gICAgdmFyIF9iaW5kID0gYm91bmRNZXRob2QuYmluZDtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBibG9jay1zY29wZWQtdmFyLCBuby11bmRlZiAqL1xuICAgIGJvdW5kTWV0aG9kLmJpbmQgPSBmdW5jdGlvbiAobmV3VGhpcykge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICAvLyBVc2VyIGlzIHRyeWluZyB0byBiaW5kKCkgYW4gYXV0b2JvdW5kIG1ldGhvZDsgd2UgZWZmZWN0aXZlbHkgd2lsbFxuICAgICAgLy8gaWdub3JlIHRoZSB2YWx1ZSBvZiBcInRoaXNcIiB0aGF0IHRoZSB1c2VyIGlzIHRyeWluZyB0byB1c2UsIHNvXG4gICAgICAvLyBsZXQncyB3YXJuLlxuICAgICAgaWYgKG5ld1RoaXMgIT09IGNvbXBvbmVudCAmJiBuZXdUaGlzICE9PSBudWxsKSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnYmluZCgpOiBSZWFjdCBjb21wb25lbnQgbWV0aG9kcyBtYXkgb25seSBiZSBib3VuZCB0byB0aGUgJyArICdjb21wb25lbnQgaW5zdGFuY2UuIFNlZSAlcycsIGNvbXBvbmVudE5hbWUpIDogdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIGlmICghYXJncy5sZW5ndGgpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdiaW5kKCk6IFlvdSBhcmUgYmluZGluZyBhIGNvbXBvbmVudCBtZXRob2QgdG8gdGhlIGNvbXBvbmVudC4gJyArICdSZWFjdCBkb2VzIHRoaXMgZm9yIHlvdSBhdXRvbWF0aWNhbGx5IGluIGEgaGlnaC1wZXJmb3JtYW5jZSAnICsgJ3dheSwgc28geW91IGNhbiBzYWZlbHkgcmVtb3ZlIHRoaXMgY2FsbC4gU2VlICVzJywgY29tcG9uZW50TmFtZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBib3VuZE1ldGhvZDtcbiAgICAgIH1cbiAgICAgIHZhciByZWJvdW5kTWV0aG9kID0gX2JpbmQuYXBwbHkoYm91bmRNZXRob2QsIGFyZ3VtZW50cyk7XG4gICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZENvbnRleHQgPSBjb21wb25lbnQ7XG4gICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZE1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIHJlYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQXJndW1lbnRzID0gYXJncztcbiAgICAgIHJldHVybiByZWJvdW5kTWV0aG9kO1xuICAgICAgLyogZXNsaW50LWVuYWJsZSAqL1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGJvdW5kTWV0aG9kO1xufVxuXG4vKipcbiAqIEJpbmRzIGFsbCBhdXRvLWJvdW5kIG1ldGhvZHMgaW4gYSBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGNvbXBvbmVudCBDb21wb25lbnQgd2hvc2UgbWV0aG9kIGlzIGdvaW5nIHRvIGJlIGJvdW5kLlxuICovXG5mdW5jdGlvbiBiaW5kQXV0b0JpbmRNZXRob2RzKGNvbXBvbmVudCkge1xuICBmb3IgKHZhciBhdXRvQmluZEtleSBpbiBjb21wb25lbnQuX19yZWFjdEF1dG9CaW5kTWFwKSB7XG4gICAgaWYgKGNvbXBvbmVudC5fX3JlYWN0QXV0b0JpbmRNYXAuaGFzT3duUHJvcGVydHkoYXV0b0JpbmRLZXkpKSB7XG4gICAgICB2YXIgbWV0aG9kID0gY29tcG9uZW50Ll9fcmVhY3RBdXRvQmluZE1hcFthdXRvQmluZEtleV07XG4gICAgICBjb21wb25lbnRbYXV0b0JpbmRLZXldID0gYmluZEF1dG9CaW5kTWV0aG9kKGNvbXBvbmVudCwgbWV0aG9kKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgbW9yZSB0byB0aGUgUmVhY3RDbGFzcyBiYXNlIGNsYXNzLiBUaGVzZSBhcmUgYWxsIGxlZ2FjeSBmZWF0dXJlcyBhbmRcbiAqIHRoZXJlZm9yZSBub3QgYWxyZWFkeSBwYXJ0IG9mIHRoZSBtb2Rlcm4gUmVhY3RDb21wb25lbnQuXG4gKi9cbnZhciBSZWFjdENsYXNzTWl4aW4gPSB7XG5cbiAgLyoqXG4gICAqIFRPRE86IFRoaXMgd2lsbCBiZSBkZXByZWNhdGVkIGJlY2F1c2Ugc3RhdGUgc2hvdWxkIGFsd2F5cyBrZWVwIGEgY29uc2lzdGVudFxuICAgKiB0eXBlIHNpZ25hdHVyZSBhbmQgdGhlIG9ubHkgdXNlIGNhc2UgZm9yIHRoaXMsIGlzIHRvIGF2b2lkIHRoYXQuXG4gICAqL1xuICByZXBsYWNlU3RhdGU6IGZ1bmN0aW9uIChuZXdTdGF0ZSwgY2FsbGJhY2spIHtcbiAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZVJlcGxhY2VTdGF0ZSh0aGlzLCBuZXdTdGF0ZSk7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGNvbXBvc2l0ZSBjb21wb25lbnQgaXMgbW91bnRlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBtb3VudGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQGZpbmFsXG4gICAqL1xuICBpc01vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVyLmlzTW91bnRlZCh0aGlzKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsUHJvcHMgU3Vic2V0IG9mIHRoZSBuZXh0IHByb3BzLlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHByb3BzIGFyZSB1cGRhdGVkLlxuICAgKiBAZmluYWxcbiAgICogQHB1YmxpY1xuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgc2V0UHJvcHM6IGZ1bmN0aW9uIChwYXJ0aWFsUHJvcHMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm5TZXRQcm9wcygpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZVNldFByb3BzKHRoaXMsIHBhcnRpYWxQcm9wcyk7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgYWxsIHRoZSBwcm9wcy5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG5ld1Byb3BzIFN1YnNldCBvZiB0aGUgbmV4dCBwcm9wcy5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxlZCBhZnRlciBwcm9wcyBhcmUgdXBkYXRlZC5cbiAgICogQGZpbmFsXG4gICAqIEBwdWJsaWNcbiAgICogQGRlcHJlY2F0ZWRcbiAgICovXG4gIHJlcGxhY2VQcm9wczogZnVuY3Rpb24gKG5ld1Byb3BzLCBjYWxsYmFjaykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuU2V0UHJvcHMoKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVyLmVucXVldWVSZXBsYWNlUHJvcHModGhpcywgbmV3UHJvcHMpO1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgdGhpcy51cGRhdGVyLmVucXVldWVDYWxsYmFjayh0aGlzLCBjYWxsYmFjayk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgUmVhY3RDbGFzc0NvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHt9O1xuYXNzaWduKFJlYWN0Q2xhc3NDb21wb25lbnQucHJvdG90eXBlLCBSZWFjdENvbXBvbmVudC5wcm90b3R5cGUsIFJlYWN0Q2xhc3NNaXhpbik7XG5cbi8qKlxuICogTW9kdWxlIGZvciBjcmVhdGluZyBjb21wb3NpdGUgY29tcG9uZW50cy5cbiAqXG4gKiBAY2xhc3MgUmVhY3RDbGFzc1xuICovXG52YXIgUmVhY3RDbGFzcyA9IHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvbXBvc2l0ZSBjb21wb25lbnQgY2xhc3MgZ2l2ZW4gYSBjbGFzcyBzcGVjaWZpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gc3BlYyBDbGFzcyBzcGVjaWZpY2F0aW9uICh3aGljaCBtdXN0IGRlZmluZSBgcmVuZGVyYCkuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9ufSBDb21wb25lbnQgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNyZWF0ZUNsYXNzOiBmdW5jdGlvbiAoc3BlYykge1xuICAgIHZhciBDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uIChwcm9wcywgY29udGV4dCwgdXBkYXRlcikge1xuICAgICAgLy8gVGhpcyBjb25zdHJ1Y3RvciBpcyBvdmVycmlkZGVuIGJ5IG1vY2tzLiBUaGUgYXJndW1lbnQgaXMgdXNlZFxuICAgICAgLy8gYnkgbW9ja3MgdG8gYXNzZXJ0IG9uIHdoYXQgZ2V0cyBtb3VudGVkLlxuXG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0aGlzIGluc3RhbmNlb2YgQ29uc3RydWN0b3IsICdTb21ldGhpbmcgaXMgY2FsbGluZyBhIFJlYWN0IGNvbXBvbmVudCBkaXJlY3RseS4gVXNlIGEgZmFjdG9yeSBvciAnICsgJ0pTWCBpbnN0ZWFkLiBTZWU6IGh0dHBzOi8vZmIubWUvcmVhY3QtbGVnYWN5ZmFjdG9yeScpIDogdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICAvLyBXaXJlIHVwIGF1dG8tYmluZGluZ1xuICAgICAgaWYgKHRoaXMuX19yZWFjdEF1dG9CaW5kTWFwKSB7XG4gICAgICAgIGJpbmRBdXRvQmluZE1ldGhvZHModGhpcyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICB0aGlzLnJlZnMgPSBlbXB0eU9iamVjdDtcbiAgICAgIHRoaXMudXBkYXRlciA9IHVwZGF0ZXIgfHwgUmVhY3ROb29wVXBkYXRlUXVldWU7XG5cbiAgICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuXG4gICAgICAvLyBSZWFjdENsYXNzZXMgZG9lc24ndCBoYXZlIGNvbnN0cnVjdG9ycy4gSW5zdGVhZCwgdGhleSB1c2UgdGhlXG4gICAgICAvLyBnZXRJbml0aWFsU3RhdGUgYW5kIGNvbXBvbmVudFdpbGxNb3VudCBtZXRob2RzIGZvciBpbml0aWFsaXphdGlvbi5cblxuICAgICAgdmFyIGluaXRpYWxTdGF0ZSA9IHRoaXMuZ2V0SW5pdGlhbFN0YXRlID8gdGhpcy5nZXRJbml0aWFsU3RhdGUoKSA6IG51bGw7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAvLyBXZSBhbGxvdyBhdXRvLW1vY2tzIHRvIHByb2NlZWQgYXMgaWYgdGhleSdyZSByZXR1cm5pbmcgbnVsbC5cbiAgICAgICAgaWYgKHR5cGVvZiBpbml0aWFsU3RhdGUgPT09ICd1bmRlZmluZWQnICYmIHRoaXMuZ2V0SW5pdGlhbFN0YXRlLl9pc01vY2tGdW5jdGlvbikge1xuICAgICAgICAgIC8vIFRoaXMgaXMgcHJvYmFibHkgYmFkIHByYWN0aWNlLiBDb25zaWRlciB3YXJuaW5nIGhlcmUgYW5kXG4gICAgICAgICAgLy8gZGVwcmVjYXRpbmcgdGhpcyBjb252ZW5pZW5jZS5cbiAgICAgICAgICBpbml0aWFsU3RhdGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAhKHR5cGVvZiBpbml0aWFsU3RhdGUgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGluaXRpYWxTdGF0ZSkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJyVzLmdldEluaXRpYWxTdGF0ZSgpOiBtdXN0IHJldHVybiBhbiBvYmplY3Qgb3IgbnVsbCcsIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy5zdGF0ZSA9IGluaXRpYWxTdGF0ZTtcbiAgICB9O1xuICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IG5ldyBSZWFjdENsYXNzQ29tcG9uZW50KCk7XG4gICAgQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG5cbiAgICBpbmplY3RlZE1peGlucy5mb3JFYWNoKG1peFNwZWNJbnRvQ29tcG9uZW50LmJpbmQobnVsbCwgQ29uc3RydWN0b3IpKTtcblxuICAgIG1peFNwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzcGVjKTtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIGRlZmF1bHRQcm9wcyBwcm9wZXJ0eSBhZnRlciBhbGwgbWl4aW5zIGhhdmUgYmVlbiBtZXJnZWQuXG4gICAgaWYgKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcykge1xuICAgICAgQ29uc3RydWN0b3IuZGVmYXVsdFByb3BzID0gQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKCk7XG4gICAgfVxuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFRoaXMgaXMgYSB0YWcgdG8gaW5kaWNhdGUgdGhhdCB0aGUgdXNlIG9mIHRoZXNlIG1ldGhvZCBuYW1lcyBpcyBvayxcbiAgICAgIC8vIHNpbmNlIGl0J3MgdXNlZCB3aXRoIGNyZWF0ZUNsYXNzLiBJZiBpdCdzIG5vdCwgdGhlbiBpdCdzIGxpa2VseSBhXG4gICAgICAvLyBtaXN0YWtlIHNvIHdlJ2xsIHdhcm4geW91IHRvIHVzZSB0aGUgc3RhdGljIHByb3BlcnR5LCBwcm9wZXJ0eVxuICAgICAgLy8gaW5pdGlhbGl6ZXIgb3IgY29uc3RydWN0b3IgcmVzcGVjdGl2ZWx5LlxuICAgICAgaWYgKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcykge1xuICAgICAgICBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMuaXNSZWFjdENsYXNzQXBwcm92ZWQgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0SW5pdGlhbFN0YXRlKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRJbml0aWFsU3RhdGUuaXNSZWFjdENsYXNzQXBwcm92ZWQgPSB7fTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAhQ29uc3RydWN0b3IucHJvdG90eXBlLnJlbmRlciA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdjcmVhdGVDbGFzcyguLi4pOiBDbGFzcyBzcGVjaWZpY2F0aW9uIG11c3QgaW1wbGVtZW50IGEgYHJlbmRlcmAgbWV0aG9kLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbXBvbmVudFNob3VsZFVwZGF0ZSwgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnRTaG91bGRVcGRhdGUoKS4gRGlkIHlvdSBtZWFuIHNob3VsZENvbXBvbmVudFVwZGF0ZSgpPyAnICsgJ1RoZSBuYW1lIGlzIHBocmFzZWQgYXMgYSBxdWVzdGlvbiBiZWNhdXNlIHRoZSBmdW5jdGlvbiBpcyAnICsgJ2V4cGVjdGVkIHRvIHJldHVybiBhIHZhbHVlLicsIHNwZWMuZGlzcGxheU5hbWUgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcygpLiBEaWQgeW91IG1lYW4gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygpPycsIHNwZWMuZGlzcGxheU5hbWUgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gUmVkdWNlIHRpbWUgc3BlbnQgZG9pbmcgbG9va3VwcyBieSBzZXR0aW5nIHRoZXNlIG9uIHRoZSBwcm90b3R5cGUuXG4gICAgZm9yICh2YXIgbWV0aG9kTmFtZSBpbiBSZWFjdENsYXNzSW50ZXJmYWNlKSB7XG4gICAgICBpZiAoIUNvbnN0cnVjdG9yLnByb3RvdHlwZVttZXRob2ROYW1lXSkge1xuICAgICAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfSxcblxuICBpbmplY3Rpb246IHtcbiAgICBpbmplY3RNaXhpbjogZnVuY3Rpb24gKG1peGluKSB7XG4gICAgICBpbmplY3RlZE1peGlucy5wdXNoKG1peGluKTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENsYXNzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvbmVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdE5vb3BVcGRhdGVRdWV1ZScpO1xuXG52YXIgY2FuRGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL2NhbkRlZmluZVByb3BlcnR5Jyk7XG52YXIgZW1wdHlPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eU9iamVjdCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogQmFzZSBjbGFzcyBoZWxwZXJzIGZvciB0aGUgdXBkYXRpbmcgc3RhdGUgb2YgYSBjb21wb25lbnQuXG4gKi9cbmZ1bmN0aW9uIFJlYWN0Q29tcG9uZW50KHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7XG4gIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7XG4gIC8vIFdlIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgdXBkYXRlciBidXQgdGhlIHJlYWwgb25lIGdldHMgaW5qZWN0ZWQgYnkgdGhlXG4gIC8vIHJlbmRlcmVyLlxuICB0aGlzLnVwZGF0ZXIgPSB1cGRhdGVyIHx8IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlO1xufVxuXG5SZWFjdENvbXBvbmVudC5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCA9IHt9O1xuXG4vKipcbiAqIFNldHMgYSBzdWJzZXQgb2YgdGhlIHN0YXRlLiBBbHdheXMgdXNlIHRoaXMgdG8gbXV0YXRlXG4gKiBzdGF0ZS4gWW91IHNob3VsZCB0cmVhdCBgdGhpcy5zdGF0ZWAgYXMgaW1tdXRhYmxlLlxuICpcbiAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGB0aGlzLnN0YXRlYCB3aWxsIGJlIGltbWVkaWF0ZWx5IHVwZGF0ZWQsIHNvXG4gKiBhY2Nlc3NpbmcgYHRoaXMuc3RhdGVgIGFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QgbWF5IHJldHVybiB0aGUgb2xkIHZhbHVlLlxuICpcbiAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGNhbGxzIHRvIGBzZXRTdGF0ZWAgd2lsbCBydW4gc3luY2hyb25vdXNseSxcbiAqIGFzIHRoZXkgbWF5IGV2ZW50dWFsbHkgYmUgYmF0Y2hlZCB0b2dldGhlci4gIFlvdSBjYW4gcHJvdmlkZSBhbiBvcHRpb25hbFxuICogY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGNhbGwgdG8gc2V0U3RhdGUgaXMgYWN0dWFsbHlcbiAqIGNvbXBsZXRlZC5cbiAqXG4gKiBXaGVuIGEgZnVuY3Rpb24gaXMgcHJvdmlkZWQgdG8gc2V0U3RhdGUsIGl0IHdpbGwgYmUgY2FsbGVkIGF0IHNvbWUgcG9pbnQgaW5cbiAqIHRoZSBmdXR1cmUgKG5vdCBzeW5jaHJvbm91c2x5KS4gSXQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgdXAgdG8gZGF0ZVxuICogY29tcG9uZW50IGFyZ3VtZW50cyAoc3RhdGUsIHByb3BzLCBjb250ZXh0KS4gVGhlc2UgdmFsdWVzIGNhbiBiZSBkaWZmZXJlbnRcbiAqIGZyb20gdGhpcy4qIGJlY2F1c2UgeW91ciBmdW5jdGlvbiBtYXkgYmUgY2FsbGVkIGFmdGVyIHJlY2VpdmVQcm9wcyBidXQgYmVmb3JlXG4gKiBzaG91bGRDb21wb25lbnRVcGRhdGUsIGFuZCB0aGlzIG5ldyBzdGF0ZSwgcHJvcHMsIGFuZCBjb250ZXh0IHdpbGwgbm90IHlldCBiZVxuICogYXNzaWduZWQgdG8gdGhpcy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdHxmdW5jdGlvbn0gcGFydGlhbFN0YXRlIE5leHQgcGFydGlhbCBzdGF0ZSBvciBmdW5jdGlvbiB0b1xuICogICAgICAgIHByb2R1Y2UgbmV4dCBwYXJ0aWFsIHN0YXRlIHRvIGJlIG1lcmdlZCB3aXRoIGN1cnJlbnQgc3RhdGUuXG4gKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHN0YXRlIGlzIHVwZGF0ZWQuXG4gKiBAZmluYWxcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuUmVhY3RDb21wb25lbnQucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHBhcnRpYWxTdGF0ZSwgY2FsbGJhY2spIHtcbiAgISh0eXBlb2YgcGFydGlhbFN0YXRlID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgcGFydGlhbFN0YXRlID09PSAnZnVuY3Rpb24nIHx8IHBhcnRpYWxTdGF0ZSA9PSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdzZXRTdGF0ZSguLi4pOiB0YWtlcyBhbiBvYmplY3Qgb2Ygc3RhdGUgdmFyaWFibGVzIHRvIHVwZGF0ZSBvciBhICcgKyAnZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhbiBvYmplY3Qgb2Ygc3RhdGUgdmFyaWFibGVzLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwYXJ0aWFsU3RhdGUgIT0gbnVsbCwgJ3NldFN0YXRlKC4uLik6IFlvdSBwYXNzZWQgYW4gdW5kZWZpbmVkIG9yIG51bGwgc3RhdGUgb2JqZWN0OyAnICsgJ2luc3RlYWQsIHVzZSBmb3JjZVVwZGF0ZSgpLicpIDogdW5kZWZpbmVkO1xuICB9XG4gIHRoaXMudXBkYXRlci5lbnF1ZXVlU2V0U3RhdGUodGhpcywgcGFydGlhbFN0YXRlKTtcbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgdGhpcy51cGRhdGVyLmVucXVldWVDYWxsYmFjayh0aGlzLCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbi8qKlxuICogRm9yY2VzIGFuIHVwZGF0ZS4gVGhpcyBzaG91bGQgb25seSBiZSBpbnZva2VkIHdoZW4gaXQgaXMga25vd24gd2l0aFxuICogY2VydGFpbnR5IHRoYXQgd2UgYXJlICoqbm90KiogaW4gYSBET00gdHJhbnNhY3Rpb24uXG4gKlxuICogWW91IG1heSB3YW50IHRvIGNhbGwgdGhpcyB3aGVuIHlvdSBrbm93IHRoYXQgc29tZSBkZWVwZXIgYXNwZWN0IG9mIHRoZVxuICogY29tcG9uZW50J3Mgc3RhdGUgaGFzIGNoYW5nZWQgYnV0IGBzZXRTdGF0ZWAgd2FzIG5vdCBjYWxsZWQuXG4gKlxuICogVGhpcyB3aWxsIG5vdCBpbnZva2UgYHNob3VsZENvbXBvbmVudFVwZGF0ZWAsIGJ1dCBpdCB3aWxsIGludm9rZVxuICogYGNvbXBvbmVudFdpbGxVcGRhdGVgIGFuZCBgY29tcG9uZW50RGlkVXBkYXRlYC5cbiAqXG4gKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHVwZGF0ZSBpcyBjb21wbGV0ZS5cbiAqIEBmaW5hbFxuICogQHByb3RlY3RlZFxuICovXG5SZWFjdENvbXBvbmVudC5wcm90b3R5cGUuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgdGhpcy51cGRhdGVyLmVucXVldWVGb3JjZVVwZGF0ZSh0aGlzKTtcbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgdGhpcy51cGRhdGVyLmVucXVldWVDYWxsYmFjayh0aGlzLCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbi8qKlxuICogRGVwcmVjYXRlZCBBUElzLiBUaGVzZSBBUElzIHVzZWQgdG8gZXhpc3Qgb24gY2xhc3NpYyBSZWFjdCBjbGFzc2VzIGJ1dCBzaW5jZVxuICogd2Ugd291bGQgbGlrZSB0byBkZXByZWNhdGUgdGhlbSwgd2UncmUgbm90IGdvaW5nIHRvIG1vdmUgdGhlbSBvdmVyIHRvIHRoaXNcbiAqIG1vZGVybiBiYXNlIGNsYXNzLiBJbnN0ZWFkLCB3ZSBkZWZpbmUgYSBnZXR0ZXIgdGhhdCB3YXJucyBpZiBpdCdzIGFjY2Vzc2VkLlxuICovXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICB2YXIgZGVwcmVjYXRlZEFQSXMgPSB7XG4gICAgZ2V0RE9NTm9kZTogWydnZXRET01Ob2RlJywgJ1VzZSBSZWFjdERPTS5maW5kRE9NTm9kZShjb21wb25lbnQpIGluc3RlYWQuJ10sXG4gICAgaXNNb3VudGVkOiBbJ2lzTW91bnRlZCcsICdJbnN0ZWFkLCBtYWtlIHN1cmUgdG8gY2xlYW4gdXAgc3Vic2NyaXB0aW9ucyBhbmQgcGVuZGluZyByZXF1ZXN0cyBpbiAnICsgJ2NvbXBvbmVudFdpbGxVbm1vdW50IHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzLiddLFxuICAgIHJlcGxhY2VQcm9wczogWydyZXBsYWNlUHJvcHMnLCAnSW5zdGVhZCwgY2FsbCByZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4nXSxcbiAgICByZXBsYWNlU3RhdGU6IFsncmVwbGFjZVN0YXRlJywgJ1JlZmFjdG9yIHlvdXIgY29kZSB0byB1c2Ugc2V0U3RhdGUgaW5zdGVhZCAoc2VlICcgKyAnaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8zMjM2KS4nXSxcbiAgICBzZXRQcm9wczogWydzZXRQcm9wcycsICdJbnN0ZWFkLCBjYWxsIHJlbmRlciBhZ2FpbiBhdCB0aGUgdG9wIGxldmVsLiddXG4gIH07XG4gIHZhciBkZWZpbmVEZXByZWNhdGlvbldhcm5pbmcgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgaW5mbykge1xuICAgIGlmIChjYW5EZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWN0Q29tcG9uZW50LnByb3RvdHlwZSwgbWV0aG9kTmFtZSwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJyVzKC4uLikgaXMgZGVwcmVjYXRlZCBpbiBwbGFpbiBKYXZhU2NyaXB0IFJlYWN0IGNsYXNzZXMuICVzJywgaW5mb1swXSwgaW5mb1sxXSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBmb3IgKHZhciBmbk5hbWUgaW4gZGVwcmVjYXRlZEFQSXMpIHtcbiAgICBpZiAoZGVwcmVjYXRlZEFQSXMuaGFzT3duUHJvcGVydHkoZm5OYW1lKSkge1xuICAgICAgZGVmaW5lRGVwcmVjYXRpb25XYXJuaW5nKGZuTmFtZSwgZGVwcmVjYXRlZEFQSXNbZm5OYW1lXSk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDb21wb25lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RET01JRE9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0RE9NSURPcGVyYXRpb25zJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xuXG4vKipcbiAqIEFic3RyYWN0cyBhd2F5IGFsbCBmdW5jdGlvbmFsaXR5IG9mIHRoZSByZWNvbmNpbGVyIHRoYXQgcmVxdWlyZXMga25vd2xlZGdlIG9mXG4gKiB0aGUgYnJvd3NlciBjb250ZXh0LiBUT0RPOiBUaGVzZSBjYWxsZXJzIHNob3VsZCBiZSByZWZhY3RvcmVkIHRvIGF2b2lkIHRoZVxuICogbmVlZCBmb3IgdGhpcyBpbmplY3Rpb24uXG4gKi9cbnZhciBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCA9IHtcblxuICBwcm9jZXNzQ2hpbGRyZW5VcGRhdGVzOiBSZWFjdERPTUlET3BlcmF0aW9ucy5kYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXMsXG5cbiAgcmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDogUmVhY3RET01JRE9wZXJhdGlvbnMuZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlELFxuXG4gIC8qKlxuICAgKiBJZiBhIHBhcnRpY3VsYXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgdGhhdCBzb21lIHJlc291cmNlcyBiZSBjbGVhbmVkIHVwLFxuICAgKiBzcGVjaWZ5IHRoaXMgaW4gdGhlIGluamVjdGVkIE1peGluLiBJbiB0aGUgRE9NLCB3ZSB3b3VsZCBsaWtlbHkgd2FudCB0b1xuICAgKiBwdXJnZSBhbnkgY2FjaGVkIG5vZGUgSUQgbG9va3Vwcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVubW91bnRJREZyb21FbnZpcm9ubWVudDogZnVuY3Rpb24gKHJvb3ROb2RlSUQpIHtcbiAgICBSZWFjdE1vdW50LnB1cmdlSUQocm9vdE5vZGVJRCk7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgaW5qZWN0ZWQgPSBmYWxzZTtcblxudmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSB7XG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsbHkgaW5qZWN0YWJsZSBlbnZpcm9ubWVudCBkZXBlbmRlbnQgY2xlYW51cCBob29rLiAoc2VydmVyIHZzLlxuICAgKiBicm93c2VyIGV0YykuIEV4YW1wbGU6IEEgYnJvd3NlciBzeXN0ZW0gY2FjaGVzIERPTSBub2RlcyBiYXNlZCBvbiBjb21wb25lbnRcbiAgICogSUQgYW5kIG11c3QgcmVtb3ZlIHRoYXQgY2FjaGUgZW50cnkgd2hlbiB0aGlzIGluc3RhbmNlIGlzIHVubW91bnRlZC5cbiAgICovXG4gIHVubW91bnRJREZyb21FbnZpcm9ubWVudDogbnVsbCxcblxuICAvKipcbiAgICogT3B0aW9uYWxseSBpbmplY3RhYmxlIGhvb2sgZm9yIHN3YXBwaW5nIG91dCBtb3VudCBpbWFnZXMgaW4gdGhlIG1pZGRsZSBvZlxuICAgKiB0aGUgdHJlZS5cbiAgICovXG4gIHJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQ6IG51bGwsXG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsbHkgaW5qZWN0YWJsZSBob29rIGZvciBwcm9jZXNzaW5nIGEgcXVldWUgb2YgY2hpbGQgdXBkYXRlcy4gV2lsbFxuICAgKiBsYXRlciBtb3ZlIGludG8gTXVsdGlDaGlsZENvbXBvbmVudHMuXG4gICAqL1xuICBwcm9jZXNzQ2hpbGRyZW5VcGRhdGVzOiBudWxsLFxuXG4gIGluamVjdGlvbjoge1xuICAgIGluamVjdEVudmlyb25tZW50OiBmdW5jdGlvbiAoZW52aXJvbm1lbnQpIHtcbiAgICAgICEhaW5qZWN0ZWQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQ6IGluamVjdEVudmlyb25tZW50KCkgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC51bm1vdW50SURGcm9tRW52aXJvbm1lbnQgPSBlbnZpcm9ubWVudC51bm1vdW50SURGcm9tRW52aXJvbm1lbnQ7XG4gICAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQgPSBlbnZpcm9ubWVudC5yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEO1xuICAgICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5wcm9jZXNzQ2hpbGRyZW5VcGRhdGVzID0gZW52aXJvbm1lbnQucHJvY2Vzc0NoaWxkcmVuVXBkYXRlcztcbiAgICAgIGluamVjdGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENvbXBvbmVudEVudmlyb25tZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0SW5zdGFuY2VNYXAgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VNYXAnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMnKTtcbnZhciBSZWFjdFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0UmVjb25jaWxlcicpO1xudmFyIFJlYWN0VXBkYXRlUXVldWUgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlUXVldWUnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5T2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlPYmplY3QnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSB7XG4gIHZhciBvd25lciA9IGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQuX293bmVyIHx8IG51bGw7XG4gIGlmIChvd25lcikge1xuICAgIHZhciBuYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuICAgIGlmIChuYW1lKSB7XG4gICAgICByZXR1cm4gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbmZ1bmN0aW9uIFN0YXRlbGVzc0NvbXBvbmVudChDb21wb25lbnQpIHt9XG5TdGF0ZWxlc3NDb21wb25lbnQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIENvbXBvbmVudCA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KHRoaXMpLl9jdXJyZW50RWxlbWVudC50eXBlO1xuICByZXR1cm4gQ29tcG9uZW50KHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCwgdGhpcy51cGRhdGVyKTtcbn07XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tIFRoZSBMaWZlLUN5Y2xlIG9mIGEgQ29tcG9zaXRlIENvbXBvbmVudCAtLS0tLS0tLS0tLS0tLS0tLS1cbiAqXG4gKiAtIGNvbnN0cnVjdG9yOiBJbml0aWFsaXphdGlvbiBvZiBzdGF0ZS4gVGhlIGluc3RhbmNlIGlzIG5vdyByZXRhaW5lZC5cbiAqICAgLSBjb21wb25lbnRXaWxsTW91bnRcbiAqICAgLSByZW5kZXJcbiAqICAgLSBbY2hpbGRyZW4ncyBjb25zdHJ1Y3RvcnNdXG4gKiAgICAgLSBbY2hpbGRyZW4ncyBjb21wb25lbnRXaWxsTW91bnQgYW5kIHJlbmRlcl1cbiAqICAgICAtIFtjaGlsZHJlbidzIGNvbXBvbmVudERpZE1vdW50XVxuICogICAgIC0gY29tcG9uZW50RGlkTW91bnRcbiAqXG4gKiAgICAgICBVcGRhdGUgUGhhc2VzOlxuICogICAgICAgLSBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIChvbmx5IGNhbGxlZCBpZiBwYXJlbnQgdXBkYXRlZClcbiAqICAgICAgIC0gc2hvdWxkQ29tcG9uZW50VXBkYXRlXG4gKiAgICAgICAgIC0gY29tcG9uZW50V2lsbFVwZGF0ZVxuICogICAgICAgICAgIC0gcmVuZGVyXG4gKiAgICAgICAgICAgLSBbY2hpbGRyZW4ncyBjb25zdHJ1Y3RvcnMgb3IgcmVjZWl2ZSBwcm9wcyBwaGFzZXNdXG4gKiAgICAgICAgIC0gY29tcG9uZW50RGlkVXBkYXRlXG4gKlxuICogICAgIC0gY29tcG9uZW50V2lsbFVubW91bnRcbiAqICAgICAtIFtjaGlsZHJlbidzIGNvbXBvbmVudFdpbGxVbm1vdW50XVxuICogICAtIFtjaGlsZHJlbiBkZXN0cm95ZWRdXG4gKiAtIChkZXN0cm95ZWQpOiBUaGUgaW5zdGFuY2UgaXMgbm93IGJsYW5rLCByZWxlYXNlZCBieSBSZWFjdCBhbmQgcmVhZHkgZm9yIEdDLlxuICpcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxuLyoqXG4gKiBBbiBpbmNyZW1lbnRpbmcgSUQgYXNzaWduZWQgdG8gZWFjaCBjb21wb25lbnQgd2hlbiBpdCBpcyBtb3VudGVkLiBUaGlzIGlzXG4gKiB1c2VkIHRvIGVuZm9yY2UgdGhlIG9yZGVyIGluIHdoaWNoIGBSZWFjdFVwZGF0ZXNgIHVwZGF0ZXMgZGlydHkgY29tcG9uZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgbmV4dE1vdW50SUQgPSAxO1xuXG4vKipcbiAqIEBsZW5kcyB7UmVhY3RDb21wb3NpdGVDb21wb25lbnQucHJvdG90eXBlfVxuICovXG52YXIgUmVhY3RDb21wb3NpdGVDb21wb25lbnRNaXhpbiA9IHtcblxuICAvKipcbiAgICogQmFzZSBjb25zdHJ1Y3RvciBmb3IgYWxsIGNvbXBvc2l0ZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50XG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IG51bGw7XG4gICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuXG4gICAgLy8gU2VlIFJlYWN0VXBkYXRlUXVldWVcbiAgICB0aGlzLl9wZW5kaW5nRWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy5fcGVuZGluZ1N0YXRlUXVldWUgPSBudWxsO1xuICAgIHRoaXMuX3BlbmRpbmdSZXBsYWNlU3RhdGUgPSBmYWxzZTtcbiAgICB0aGlzLl9wZW5kaW5nRm9yY2VVcGRhdGUgPSBmYWxzZTtcblxuICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcblxuICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xuICAgIHRoaXMuX21vdW50T3JkZXIgPSAwO1xuICAgIHRoaXMuX3RvcExldmVsV3JhcHBlciA9IG51bGw7XG5cbiAgICAvLyBTZWUgUmVhY3RVcGRhdGVzIGFuZCBSZWFjdFVwZGF0ZVF1ZXVlLlxuICAgIHRoaXMuX3BlbmRpbmdDYWxsYmFja3MgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgY29tcG9uZW50LCByZW5kZXJzIG1hcmt1cCwgYW5kIHJlZ2lzdGVycyBldmVudCBsaXN0ZW5lcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgRE9NIElEIG9mIHRoZSByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBSZW5kZXJlZCBtYXJrdXAgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9NLlxuICAgKiBAZmluYWxcbiAgICogQGludGVybmFsXG4gICAqL1xuICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gKHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB0aGlzLl9jb250ZXh0ID0gY29udGV4dDtcbiAgICB0aGlzLl9tb3VudE9yZGVyID0gbmV4dE1vdW50SUQrKztcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gcm9vdElEO1xuXG4gICAgdmFyIHB1YmxpY1Byb3BzID0gdGhpcy5fcHJvY2Vzc1Byb3BzKHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzKTtcbiAgICB2YXIgcHVibGljQ29udGV4dCA9IHRoaXMuX3Byb2Nlc3NDb250ZXh0KGNvbnRleHQpO1xuXG4gICAgdmFyIENvbXBvbmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBwdWJsaWMgY2xhc3NcbiAgICB2YXIgaW5zdDtcbiAgICB2YXIgcmVuZGVyZWRFbGVtZW50O1xuXG4gICAgLy8gVGhpcyBpcyBhIHdheSB0byBkZXRlY3QgaWYgQ29tcG9uZW50IGlzIGEgc3RhdGVsZXNzIGFycm93IGZ1bmN0aW9uXG4gICAgLy8gY29tcG9uZW50LCB3aGljaCBpcyBub3QgbmV3YWJsZS4gSXQgbWlnaHQgbm90IGJlIDEwMCUgcmVsaWFibGUgYnV0IGlzXG4gICAgLy8gc29tZXRoaW5nIHdlIGNhbiBkbyB1bnRpbCB3ZSBzdGFydCBkZXRlY3RpbmcgdGhhdCBDb21wb25lbnQgZXh0ZW5kc1xuICAgIC8vIFJlYWN0LkNvbXBvbmVudC4gV2UgYWxyZWFkeSBhc3N1bWUgdGhhdCB0eXBlb2YgQ29tcG9uZW50ID09PSAnZnVuY3Rpb24nLlxuICAgIHZhciBjYW5JbnN0YW50aWF0ZSA9ICgncHJvdG90eXBlJyBpbiBDb21wb25lbnQpO1xuXG4gICAgaWYgKGNhbkluc3RhbnRpYXRlKSB7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gdGhpcztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpbnN0ID0gbmV3IENvbXBvbmVudChwdWJsaWNQcm9wcywgcHVibGljQ29udGV4dCwgUmVhY3RVcGRhdGVRdWV1ZSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluc3QgPSBuZXcgQ29tcG9uZW50KHB1YmxpY1Byb3BzLCBwdWJsaWNDb250ZXh0LCBSZWFjdFVwZGF0ZVF1ZXVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNhbkluc3RhbnRpYXRlIHx8IGluc3QgPT09IG51bGwgfHwgaW5zdCA9PT0gZmFsc2UgfHwgUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGluc3QpKSB7XG4gICAgICByZW5kZXJlZEVsZW1lbnQgPSBpbnN0O1xuICAgICAgaW5zdCA9IG5ldyBTdGF0ZWxlc3NDb21wb25lbnQoQ29tcG9uZW50KTtcbiAgICB9XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGxhdGVyIGluIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQsIGJ1dCBhZGQgYW4gZWFybHlcbiAgICAgIC8vIHdhcm5pbmcgbm93IHRvIGhlbHAgZGVidWdnaW5nXG4gICAgICBpZiAoaW5zdC5yZW5kZXIgPT0gbnVsbCkge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJyVzKC4uLik6IE5vIGByZW5kZXJgIG1ldGhvZCBmb3VuZCBvbiB0aGUgcmV0dXJuZWQgY29tcG9uZW50ICcgKyAnaW5zdGFuY2U6IHlvdSBtYXkgaGF2ZSBmb3Jnb3R0ZW4gdG8gZGVmaW5lIGByZW5kZXJgLCByZXR1cm5lZCAnICsgJ251bGwvZmFsc2UgZnJvbSBhIHN0YXRlbGVzcyBjb21wb25lbnQsIG9yIHRyaWVkIHRvIHJlbmRlciBhbiAnICsgJ2VsZW1lbnQgd2hvc2UgdHlwZSBpcyBhIGZ1bmN0aW9uIHRoYXQgaXNuXFwndCBhIFJlYWN0IGNvbXBvbmVudC4nLCBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWUgfHwgJ0NvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gV2Ugc3VwcG9ydCBFUzYgaW5oZXJpdGluZyBmcm9tIFJlYWN0LkNvbXBvbmVudCwgdGhlIG1vZHVsZSBwYXR0ZXJuLFxuICAgICAgICAvLyBhbmQgc3RhdGVsZXNzIGNvbXBvbmVudHMsIGJ1dCBub3QgRVM2IGNsYXNzZXMgdGhhdCBkb24ndCBleHRlbmRcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoQ29tcG9uZW50LnByb3RvdHlwZSAmJiBDb21wb25lbnQucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQgfHwgIWNhbkluc3RhbnRpYXRlIHx8ICEoaW5zdCBpbnN0YW5jZW9mIENvbXBvbmVudCksICclcyguLi4pOiBSZWFjdCBjb21wb25lbnQgY2xhc3NlcyBtdXN0IGV4dGVuZCBSZWFjdC5Db21wb25lbnQuJywgQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIHx8ICdDb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUaGVzZSBzaG91bGQgYmUgc2V0IHVwIGluIHRoZSBjb25zdHJ1Y3RvciwgYnV0IGFzIGEgY29udmVuaWVuY2UgZm9yXG4gICAgLy8gc2ltcGxlciBjbGFzcyBhYnN0cmFjdGlvbnMsIHdlIHNldCB0aGVtIHVwIGFmdGVyIHRoZSBmYWN0LlxuICAgIGluc3QucHJvcHMgPSBwdWJsaWNQcm9wcztcbiAgICBpbnN0LmNvbnRleHQgPSBwdWJsaWNDb250ZXh0O1xuICAgIGluc3QucmVmcyA9IGVtcHR5T2JqZWN0O1xuICAgIGluc3QudXBkYXRlciA9IFJlYWN0VXBkYXRlUXVldWU7XG5cbiAgICB0aGlzLl9pbnN0YW5jZSA9IGluc3Q7XG5cbiAgICAvLyBTdG9yZSBhIHJlZmVyZW5jZSBmcm9tIHRoZSBpbnN0YW5jZSBiYWNrIHRvIHRoZSBpbnRlcm5hbCByZXByZXNlbnRhdGlvblxuICAgIFJlYWN0SW5zdGFuY2VNYXAuc2V0KGluc3QsIHRoaXMpO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFNpbmNlIHBsYWluIEpTIGNsYXNzZXMgYXJlIGRlZmluZWQgd2l0aG91dCBhbnkgc3BlY2lhbCBpbml0aWFsaXphdGlvblxuICAgICAgLy8gbG9naWMsIHdlIGNhbiBub3QgY2F0Y2ggY29tbW9uIGVycm9ycyBlYXJseS4gVGhlcmVmb3JlLCB3ZSBoYXZlIHRvXG4gICAgICAvLyBjYXRjaCB0aGVtIGhlcmUsIGF0IGluaXRpYWxpemF0aW9uIHRpbWUsIGluc3RlYWQuXG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaW5zdC5nZXRJbml0aWFsU3RhdGUgfHwgaW5zdC5nZXRJbml0aWFsU3RhdGUuaXNSZWFjdENsYXNzQXBwcm92ZWQsICdnZXRJbml0aWFsU3RhdGUgd2FzIGRlZmluZWQgb24gJXMsIGEgcGxhaW4gSmF2YVNjcmlwdCBjbGFzcy4gJyArICdUaGlzIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBjbGFzc2VzIGNyZWF0ZWQgdXNpbmcgUmVhY3QuY3JlYXRlQ2xhc3MuICcgKyAnRGlkIHlvdSBtZWFuIHRvIGRlZmluZSBhIHN0YXRlIHByb3BlcnR5IGluc3RlYWQ/JywgdGhpcy5nZXROYW1lKCkgfHwgJ2EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaW5zdC5nZXREZWZhdWx0UHJvcHMgfHwgaW5zdC5nZXREZWZhdWx0UHJvcHMuaXNSZWFjdENsYXNzQXBwcm92ZWQsICdnZXREZWZhdWx0UHJvcHMgd2FzIGRlZmluZWQgb24gJXMsIGEgcGxhaW4gSmF2YVNjcmlwdCBjbGFzcy4gJyArICdUaGlzIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBjbGFzc2VzIGNyZWF0ZWQgdXNpbmcgUmVhY3QuY3JlYXRlQ2xhc3MuICcgKyAnVXNlIGEgc3RhdGljIHByb3BlcnR5IHRvIGRlZmluZSBkZWZhdWx0UHJvcHMgaW5zdGVhZC4nLCB0aGlzLmdldE5hbWUoKSB8fCAnYSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFpbnN0LnByb3BUeXBlcywgJ3Byb3BUeXBlcyB3YXMgZGVmaW5lZCBhcyBhbiBpbnN0YW5jZSBwcm9wZXJ0eSBvbiAlcy4gVXNlIGEgc3RhdGljICcgKyAncHJvcGVydHkgdG8gZGVmaW5lIHByb3BUeXBlcyBpbnN0ZWFkLicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdhIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWluc3QuY29udGV4dFR5cGVzLCAnY29udGV4dFR5cGVzIHdhcyBkZWZpbmVkIGFzIGFuIGluc3RhbmNlIHByb3BlcnR5IG9uICVzLiBVc2UgYSAnICsgJ3N0YXRpYyBwcm9wZXJ0eSB0byBkZWZpbmUgY29udGV4dFR5cGVzIGluc3RlYWQuJywgdGhpcy5nZXROYW1lKCkgfHwgJ2EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgaW5zdC5jb21wb25lbnRTaG91bGRVcGRhdGUgIT09ICdmdW5jdGlvbicsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50U2hvdWxkVXBkYXRlKCkuIERpZCB5b3UgbWVhbiBzaG91bGRDb21wb25lbnRVcGRhdGUoKT8gJyArICdUaGUgbmFtZSBpcyBwaHJhc2VkIGFzIGEgcXVlc3Rpb24gYmVjYXVzZSB0aGUgZnVuY3Rpb24gaXMgJyArICdleHBlY3RlZCB0byByZXR1cm4gYSB2YWx1ZS4nLCB0aGlzLmdldE5hbWUoKSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiBpbnN0LmNvbXBvbmVudERpZFVubW91bnQgIT09ICdmdW5jdGlvbicsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50RGlkVW5tb3VudCgpLiBCdXQgdGhlcmUgaXMgbm8gc3VjaCBsaWZlY3ljbGUgbWV0aG9kLiAnICsgJ0RpZCB5b3UgbWVhbiBjb21wb25lbnRXaWxsVW5tb3VudCgpPycsIHRoaXMuZ2V0TmFtZSgpIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodHlwZW9mIGluc3QuY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcyAhPT0gJ2Z1bmN0aW9uJywgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzKCkuIERpZCB5b3UgbWVhbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKCk/JywgdGhpcy5nZXROYW1lKCkgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdmFyIGluaXRpYWxTdGF0ZSA9IGluc3Quc3RhdGU7XG4gICAgaWYgKGluaXRpYWxTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpbnN0LnN0YXRlID0gaW5pdGlhbFN0YXRlID0gbnVsbDtcbiAgICB9XG4gICAgISh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShpbml0aWFsU3RhdGUpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5zdGF0ZTogbXVzdCBiZSBzZXQgdG8gYW4gb2JqZWN0IG9yIG51bGwnLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSA9IG51bGw7XG4gICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdGb3JjZVVwZGF0ZSA9IGZhbHNlO1xuXG4gICAgaWYgKGluc3QuY29tcG9uZW50V2lsbE1vdW50KSB7XG4gICAgICBpbnN0LmNvbXBvbmVudFdpbGxNb3VudCgpO1xuICAgICAgLy8gV2hlbiBtb3VudGluZywgY2FsbHMgdG8gYHNldFN0YXRlYCBieSBgY29tcG9uZW50V2lsbE1vdW50YCB3aWxsIHNldFxuICAgICAgLy8gYHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlYCB3aXRob3V0IHRyaWdnZXJpbmcgYSByZS1yZW5kZXIuXG4gICAgICBpZiAodGhpcy5fcGVuZGluZ1N0YXRlUXVldWUpIHtcbiAgICAgICAgaW5zdC5zdGF0ZSA9IHRoaXMuX3Byb2Nlc3NQZW5kaW5nU3RhdGUoaW5zdC5wcm9wcywgaW5zdC5jb250ZXh0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBub3QgYSBzdGF0ZWxlc3MgY29tcG9uZW50LCB3ZSBub3cgcmVuZGVyXG4gICAgaWYgKHJlbmRlcmVkRWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZW5kZXJlZEVsZW1lbnQgPSB0aGlzLl9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZW5kZXJlZENvbXBvbmVudCA9IHRoaXMuX2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQocmVuZGVyZWRFbGVtZW50KTtcblxuICAgIHZhciBtYXJrdXAgPSBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIHRoaXMuX3Byb2Nlc3NDaGlsZENvbnRleHQoY29udGV4dCkpO1xuICAgIGlmIChpbnN0LmNvbXBvbmVudERpZE1vdW50KSB7XG4gICAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKGluc3QuY29tcG9uZW50RGlkTW91bnQsIGluc3QpO1xuICAgIH1cblxuICAgIHJldHVybiBtYXJrdXA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbGVhc2VzIGFueSByZXNvdXJjZXMgYWxsb2NhdGVkIGJ5IGBtb3VudENvbXBvbmVudGAuXG4gICAqXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuXG4gICAgaWYgKGluc3QuY29tcG9uZW50V2lsbFVubW91bnQpIHtcbiAgICAgIGluc3QuY29tcG9uZW50V2lsbFVubW91bnQoKTtcbiAgICB9XG5cbiAgICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudCh0aGlzLl9yZW5kZXJlZENvbXBvbmVudCk7XG4gICAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSBudWxsO1xuICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcblxuICAgIC8vIFJlc2V0IHBlbmRpbmcgZmllbGRzXG4gICAgLy8gRXZlbiBpZiB0aGlzIGNvbXBvbmVudCBpcyBzY2hlZHVsZWQgZm9yIGFub3RoZXIgdXBkYXRlIGluIFJlYWN0VXBkYXRlcyxcbiAgICAvLyBpdCB3b3VsZCBzdGlsbCBiZSBpZ25vcmVkIGJlY2F1c2UgdGhlc2UgZmllbGRzIGFyZSByZXNldC5cbiAgICB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSA9IG51bGw7XG4gICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdGb3JjZVVwZGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdDYWxsYmFja3MgPSBudWxsO1xuICAgIHRoaXMuX3BlbmRpbmdFbGVtZW50ID0gbnVsbDtcblxuICAgIC8vIFRoZXNlIGZpZWxkcyBkbyBub3QgcmVhbGx5IG5lZWQgdG8gYmUgcmVzZXQgc2luY2UgdGhpcyBvYmplY3QgaXMgbm9cbiAgICAvLyBsb25nZXIgYWNjZXNzaWJsZS5cbiAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgICB0aGlzLl90b3BMZXZlbFdyYXBwZXIgPSBudWxsO1xuXG4gICAgLy8gRGVsZXRlIHRoZSByZWZlcmVuY2UgZnJvbSB0aGUgaW5zdGFuY2UgdG8gdGhpcyBpbnRlcm5hbCByZXByZXNlbnRhdGlvblxuICAgIC8vIHdoaWNoIGFsbG93IHRoZSBpbnRlcm5hbHMgdG8gYmUgcHJvcGVybHkgY2xlYW5lZCB1cCBldmVuIGlmIHRoZSB1c2VyXG4gICAgLy8gbGVha3MgYSByZWZlcmVuY2UgdG8gdGhlIHB1YmxpYyBpbnN0YW5jZS5cbiAgICBSZWFjdEluc3RhbmNlTWFwLnJlbW92ZShpbnN0KTtcblxuICAgIC8vIFNvbWUgZXhpc3RpbmcgY29tcG9uZW50cyByZWx5IG9uIGluc3QucHJvcHMgZXZlbiBhZnRlciB0aGV5J3ZlIGJlZW5cbiAgICAvLyBkZXN0cm95ZWQgKGluIGV2ZW50IGhhbmRsZXJzKS5cbiAgICAvLyBUT0RPOiBpbnN0LnByb3BzID0gbnVsbDtcbiAgICAvLyBUT0RPOiBpbnN0LnN0YXRlID0gbnVsbDtcbiAgICAvLyBUT0RPOiBpbnN0LmNvbnRleHQgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGaWx0ZXJzIHRoZSBjb250ZXh0IG9iamVjdCB0byBvbmx5IGNvbnRhaW4ga2V5cyBzcGVjaWZpZWQgaW5cbiAgICogYGNvbnRleHRUeXBlc2BcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICogQHJldHVybiB7P29iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9tYXNrQ29udGV4dDogZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICB2YXIgbWFza2VkQ29udGV4dCA9IG51bGw7XG4gICAgdmFyIENvbXBvbmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG4gICAgdmFyIGNvbnRleHRUeXBlcyA9IENvbXBvbmVudC5jb250ZXh0VHlwZXM7XG4gICAgaWYgKCFjb250ZXh0VHlwZXMpIHtcbiAgICAgIHJldHVybiBlbXB0eU9iamVjdDtcbiAgICB9XG4gICAgbWFza2VkQ29udGV4dCA9IHt9O1xuICAgIGZvciAodmFyIGNvbnRleHROYW1lIGluIGNvbnRleHRUeXBlcykge1xuICAgICAgbWFza2VkQ29udGV4dFtjb250ZXh0TmFtZV0gPSBjb250ZXh0W2NvbnRleHROYW1lXTtcbiAgICB9XG4gICAgcmV0dXJuIG1hc2tlZENvbnRleHQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbHRlcnMgdGhlIGNvbnRleHQgb2JqZWN0IHRvIG9ubHkgY29udGFpbiBrZXlzIHNwZWNpZmllZCBpblxuICAgKiBgY29udGV4dFR5cGVzYCwgYW5kIGFzc2VydHMgdGhhdCB0aGV5IGFyZSB2YWxpZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICogQHJldHVybiB7P29iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9wcm9jZXNzQ29udGV4dDogZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICB2YXIgbWFza2VkQ29udGV4dCA9IHRoaXMuX21hc2tDb250ZXh0KGNvbnRleHQpO1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgQ29tcG9uZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcbiAgICAgIGlmIChDb21wb25lbnQuY29udGV4dFR5cGVzKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrUHJvcFR5cGVzKENvbXBvbmVudC5jb250ZXh0VHlwZXMsIG1hc2tlZENvbnRleHQsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY29udGV4dCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXNrZWRDb250ZXh0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY3VycmVudENvbnRleHRcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Byb2Nlc3NDaGlsZENvbnRleHQ6IGZ1bmN0aW9uIChjdXJyZW50Q29udGV4dCkge1xuICAgIHZhciBDb21wb25lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG4gICAgdmFyIGNoaWxkQ29udGV4dCA9IGluc3QuZ2V0Q2hpbGRDb250ZXh0ICYmIGluc3QuZ2V0Q2hpbGRDb250ZXh0KCk7XG4gICAgaWYgKGNoaWxkQ29udGV4dCkge1xuICAgICAgISh0eXBlb2YgQ29tcG9uZW50LmNoaWxkQ29udGV4dFR5cGVzID09PSAnb2JqZWN0JykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMuZ2V0Q2hpbGRDb250ZXh0KCk6IGNoaWxkQ29udGV4dFR5cGVzIG11c3QgYmUgZGVmaW5lZCBpbiBvcmRlciB0byAnICsgJ3VzZSBnZXRDaGlsZENvbnRleHQoKS4nLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB0aGlzLl9jaGVja1Byb3BUeXBlcyhDb21wb25lbnQuY2hpbGRDb250ZXh0VHlwZXMsIGNoaWxkQ29udGV4dCwgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5jaGlsZENvbnRleHQpO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgbmFtZSBpbiBjaGlsZENvbnRleHQpIHtcbiAgICAgICAgIShuYW1lIGluIENvbXBvbmVudC5jaGlsZENvbnRleHRUeXBlcykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMuZ2V0Q2hpbGRDb250ZXh0KCk6IGtleSBcIiVzXCIgaXMgbm90IGRlZmluZWQgaW4gY2hpbGRDb250ZXh0VHlwZXMuJywgdGhpcy5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JywgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFzc2lnbih7fSwgY3VycmVudENvbnRleHQsIGNoaWxkQ29udGV4dCk7XG4gICAgfVxuICAgIHJldHVybiBjdXJyZW50Q29udGV4dDtcbiAgfSxcblxuICAvKipcbiAgICogUHJvY2Vzc2VzIHByb3BzIGJ5IHNldHRpbmcgZGVmYXVsdCB2YWx1ZXMgZm9yIHVuc3BlY2lmaWVkIHByb3BzIGFuZFxuICAgKiBhc3NlcnRpbmcgdGhhdCB0aGUgcHJvcHMgYXJlIHZhbGlkLiBEb2VzIG5vdCBtdXRhdGUgaXRzIGFyZ3VtZW50OyByZXR1cm5zXG4gICAqIGEgbmV3IHByb3BzIG9iamVjdCB3aXRoIGRlZmF1bHRzIG1lcmdlZCBpbi5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG5ld1Byb3BzXG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9wcm9jZXNzUHJvcHM6IGZ1bmN0aW9uIChuZXdQcm9wcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgQ29tcG9uZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcbiAgICAgIGlmIChDb21wb25lbnQucHJvcFR5cGVzKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrUHJvcFR5cGVzKENvbXBvbmVudC5wcm9wVHlwZXMsIG5ld1Byb3BzLCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLnByb3ApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3UHJvcHM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFzc2VydCB0aGF0IHRoZSBwcm9wcyBhcmUgdmFsaWRcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHByb3BUeXBlcyBNYXAgb2YgcHJvcCBuYW1lIHRvIGEgUmVhY3RQcm9wVHlwZVxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uIGUuZy4gXCJwcm9wXCIsIFwiY29udGV4dFwiLCBcImNoaWxkIGNvbnRleHRcIlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NoZWNrUHJvcFR5cGVzOiBmdW5jdGlvbiAocHJvcFR5cGVzLCBwcm9wcywgbG9jYXRpb24pIHtcbiAgICAvLyBUT0RPOiBTdG9wIHZhbGlkYXRpbmcgcHJvcCB0eXBlcyBoZXJlIGFuZCBvbmx5IHVzZSB0aGUgZWxlbWVudFxuICAgIC8vIHZhbGlkYXRpb24uXG4gICAgdmFyIGNvbXBvbmVudE5hbWUgPSB0aGlzLmdldE5hbWUoKTtcbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBwcm9wVHlwZXMpIHtcbiAgICAgIGlmIChwcm9wVHlwZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHZhciBlcnJvcjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgYW4gaW52YXJpYW50IHRoYXQgZ2V0cyBjYXVnaHQuIEl0J3MgdGhlIHNhbWVcbiAgICAgICAgICAvLyBiZWhhdmlvciBhcyB3aXRob3V0IHRoaXMgc3RhdGVtZW50IGV4Y2VwdCB3aXRoIGEgYmV0dGVyIG1lc3NhZ2UuXG4gICAgICAgICAgISh0eXBlb2YgcHJvcFR5cGVzW3Byb3BOYW1lXSA9PT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXM6ICVzIHR5cGUgYCVzYCBpcyBpbnZhbGlkOyBpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgJyArICdmcm9tIFJlYWN0LlByb3BUeXBlcy4nLCBjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICBlcnJvciA9IHByb3BUeXBlc1twcm9wTmFtZV0ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgbnVsbCwgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgZXJyb3IgPSBleDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIC8vIFdlIG1heSB3YW50IHRvIGV4dGVuZCB0aGlzIGxvZ2ljIGZvciBzaW1pbGFyIGVycm9ycyBpblxuICAgICAgICAgIC8vIHRvcC1sZXZlbCByZW5kZXIgY2FsbHMsIHNvIEknbSBhYnN0cmFjdGluZyBpdCBhd2F5IGludG9cbiAgICAgICAgICAvLyBhIGZ1bmN0aW9uIHRvIG1pbmltaXplIHJlZmFjdG9yaW5nIGluIHRoZSBmdXR1cmVcbiAgICAgICAgICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0odGhpcyk7XG5cbiAgICAgICAgICBpZiAobG9jYXRpb24gPT09IFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCkge1xuICAgICAgICAgICAgLy8gUHJlZmFjZSBnaXZlcyB1cyBzb21ldGhpbmcgdG8gYmxhY2tsaXN0IGluIHdhcm5pbmcgbW9kdWxlXG4gICAgICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ0ZhaWxlZCBDb21wb3NpdGUgcHJvcFR5cGU6ICVzJXMnLCBlcnJvci5tZXNzYWdlLCBhZGRlbmR1bSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFpbGVkIENvbnRleHQgVHlwZXM6ICVzJXMnLCBlcnJvci5tZXNzYWdlLCBhZGRlbmR1bSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHJlY2VpdmVDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0RWxlbWVudCwgdHJhbnNhY3Rpb24sIG5leHRDb250ZXh0KSB7XG4gICAgdmFyIHByZXZFbGVtZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQ7XG4gICAgdmFyIHByZXZDb250ZXh0ID0gdGhpcy5fY29udGV4dDtcblxuICAgIHRoaXMuX3BlbmRpbmdFbGVtZW50ID0gbnVsbDtcblxuICAgIHRoaXMudXBkYXRlQ29tcG9uZW50KHRyYW5zYWN0aW9uLCBwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQsIHByZXZDb250ZXh0LCBuZXh0Q29udGV4dCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIElmIGFueSBvZiBgX3BlbmRpbmdFbGVtZW50YCwgYF9wZW5kaW5nU3RhdGVRdWV1ZWAsIG9yIGBfcGVuZGluZ0ZvcmNlVXBkYXRlYFxuICAgKiBpcyBzZXQsIHVwZGF0ZSB0aGUgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5OiBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcbiAgICBpZiAodGhpcy5fcGVuZGluZ0VsZW1lbnQgIT0gbnVsbCkge1xuICAgICAgUmVhY3RSZWNvbmNpbGVyLnJlY2VpdmVDb21wb25lbnQodGhpcywgdGhpcy5fcGVuZGluZ0VsZW1lbnQgfHwgdGhpcy5fY3VycmVudEVsZW1lbnQsIHRyYW5zYWN0aW9uLCB0aGlzLl9jb250ZXh0KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcGVuZGluZ1N0YXRlUXVldWUgIT09IG51bGwgfHwgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlKSB7XG4gICAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudCh0cmFuc2FjdGlvbiwgdGhpcy5fY3VycmVudEVsZW1lbnQsIHRoaXMuX2N1cnJlbnRFbGVtZW50LCB0aGlzLl9jb250ZXh0LCB0aGlzLl9jb250ZXh0KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYW4gdXBkYXRlIHRvIGEgbW91bnRlZCBjb21wb25lbnQuIFRoZSBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIGFuZFxuICAgKiBzaG91bGRDb21wb25lbnRVcGRhdGUgbWV0aG9kcyBhcmUgY2FsbGVkLCB0aGVuIChhc3N1bWluZyB0aGUgdXBkYXRlIGlzbid0XG4gICAqIHNraXBwZWQpIHRoZSByZW1haW5pbmcgdXBkYXRlIGxpZmVjeWNsZSBtZXRob2RzIGFyZSBjYWxsZWQgYW5kIHRoZSBET01cbiAgICogcmVwcmVzZW50YXRpb24gaXMgdXBkYXRlZC5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhpcyBpbXBsZW1lbnRzIFJlYWN0J3MgcmVuZGVyaW5nIGFuZCByZWNvbmNpbGlhdGlvbiBhbGdvcml0aG0uXG4gICAqIFNvcGhpc3RpY2F0ZWQgY2xpZW50cyBtYXkgd2lzaCB0byBvdmVycmlkZSB0aGlzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBwcmV2UGFyZW50RWxlbWVudFxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dFBhcmVudEVsZW1lbnRcbiAgICogQGludGVybmFsXG4gICAqIEBvdmVycmlkYWJsZVxuICAgKi9cbiAgdXBkYXRlQ29tcG9uZW50OiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHByZXZQYXJlbnRFbGVtZW50LCBuZXh0UGFyZW50RWxlbWVudCwgcHJldlVubWFza2VkQ29udGV4dCwgbmV4dFVubWFza2VkQ29udGV4dCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG5cbiAgICB2YXIgbmV4dENvbnRleHQgPSB0aGlzLl9jb250ZXh0ID09PSBuZXh0VW5tYXNrZWRDb250ZXh0ID8gaW5zdC5jb250ZXh0IDogdGhpcy5fcHJvY2Vzc0NvbnRleHQobmV4dFVubWFza2VkQ29udGV4dCk7XG4gICAgdmFyIG5leHRQcm9wcztcblxuICAgIC8vIERpc3Rpbmd1aXNoIGJldHdlZW4gYSBwcm9wcyB1cGRhdGUgdmVyc3VzIGEgc2ltcGxlIHN0YXRlIHVwZGF0ZVxuICAgIGlmIChwcmV2UGFyZW50RWxlbWVudCA9PT0gbmV4dFBhcmVudEVsZW1lbnQpIHtcbiAgICAgIC8vIFNraXAgY2hlY2tpbmcgcHJvcCB0eXBlcyBhZ2FpbiAtLSB3ZSBkb24ndCByZWFkIGluc3QucHJvcHMgdG8gYXZvaWRcbiAgICAgIC8vIHdhcm5pbmcgZm9yIERPTSBjb21wb25lbnQgcHJvcHMgaW4gdGhpcyB1cGdyYWRlXG4gICAgICBuZXh0UHJvcHMgPSBuZXh0UGFyZW50RWxlbWVudC5wcm9wcztcbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dFByb3BzID0gdGhpcy5fcHJvY2Vzc1Byb3BzKG5leHRQYXJlbnRFbGVtZW50LnByb3BzKTtcbiAgICAgIC8vIEFuIHVwZGF0ZSBoZXJlIHdpbGwgc2NoZWR1bGUgYW4gdXBkYXRlIGJ1dCBpbW1lZGlhdGVseSBzZXRcbiAgICAgIC8vIF9wZW5kaW5nU3RhdGVRdWV1ZSB3aGljaCB3aWxsIGVuc3VyZSB0aGF0IGFueSBzdGF0ZSB1cGRhdGVzIGdldHNcbiAgICAgIC8vIGltbWVkaWF0ZWx5IHJlY29uY2lsZWQgaW5zdGVhZCBvZiB3YWl0aW5nIGZvciB0aGUgbmV4dCBiYXRjaC5cblxuICAgICAgaWYgKGluc3QuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcykge1xuICAgICAgICBpbnN0LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzLCBuZXh0Q29udGV4dCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIG5leHRTdGF0ZSA9IHRoaXMuX3Byb2Nlc3NQZW5kaW5nU3RhdGUobmV4dFByb3BzLCBuZXh0Q29udGV4dCk7XG5cbiAgICB2YXIgc2hvdWxkVXBkYXRlID0gdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlIHx8ICFpbnN0LnNob3VsZENvbXBvbmVudFVwZGF0ZSB8fCBpbnN0LnNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiBzaG91bGRVcGRhdGUgIT09ICd1bmRlZmluZWQnLCAnJXMuc2hvdWxkQ29tcG9uZW50VXBkYXRlKCk6IFJldHVybmVkIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIGEgJyArICdib29sZWFuIHZhbHVlLiBNYWtlIHN1cmUgdG8gcmV0dXJuIHRydWUgb3IgZmFsc2UuJywgdGhpcy5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlID0gZmFsc2U7XG4gICAgICAvLyBXaWxsIHNldCBgdGhpcy5wcm9wc2AsIGB0aGlzLnN0YXRlYCBhbmQgYHRoaXMuY29udGV4dGAuXG4gICAgICB0aGlzLl9wZXJmb3JtQ29tcG9uZW50VXBkYXRlKG5leHRQYXJlbnRFbGVtZW50LCBuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQsIHRyYW5zYWN0aW9uLCBuZXh0VW5tYXNrZWRDb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgaXQncyBkZXRlcm1pbmVkIHRoYXQgYSBjb21wb25lbnQgc2hvdWxkIG5vdCB1cGRhdGUsIHdlIHN0aWxsIHdhbnRcbiAgICAgIC8vIHRvIHNldCBwcm9wcyBhbmQgc3RhdGUgYnV0IHdlIHNob3J0Y3V0IHRoZSByZXN0IG9mIHRoZSB1cGRhdGUuXG4gICAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG5leHRQYXJlbnRFbGVtZW50O1xuICAgICAgdGhpcy5fY29udGV4dCA9IG5leHRVbm1hc2tlZENvbnRleHQ7XG4gICAgICBpbnN0LnByb3BzID0gbmV4dFByb3BzO1xuICAgICAgaW5zdC5zdGF0ZSA9IG5leHRTdGF0ZTtcbiAgICAgIGluc3QuY29udGV4dCA9IG5leHRDb250ZXh0O1xuICAgIH1cbiAgfSxcblxuICBfcHJvY2Vzc1BlbmRpbmdTdGF0ZTogZnVuY3Rpb24gKHByb3BzLCBjb250ZXh0KSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcbiAgICB2YXIgcXVldWUgPSB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZTtcbiAgICB2YXIgcmVwbGFjZSA9IHRoaXMuX3BlbmRpbmdSZXBsYWNlU3RhdGU7XG4gICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlID0gbnVsbDtcblxuICAgIGlmICghcXVldWUpIHtcbiAgICAgIHJldHVybiBpbnN0LnN0YXRlO1xuICAgIH1cblxuICAgIGlmIChyZXBsYWNlICYmIHF1ZXVlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHF1ZXVlWzBdO1xuICAgIH1cblxuICAgIHZhciBuZXh0U3RhdGUgPSBhc3NpZ24oe30sIHJlcGxhY2UgPyBxdWV1ZVswXSA6IGluc3Quc3RhdGUpO1xuICAgIGZvciAodmFyIGkgPSByZXBsYWNlID8gMSA6IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHBhcnRpYWwgPSBxdWV1ZVtpXTtcbiAgICAgIGFzc2lnbihuZXh0U3RhdGUsIHR5cGVvZiBwYXJ0aWFsID09PSAnZnVuY3Rpb24nID8gcGFydGlhbC5jYWxsKGluc3QsIG5leHRTdGF0ZSwgcHJvcHMsIGNvbnRleHQpIDogcGFydGlhbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5leHRTdGF0ZTtcbiAgfSxcblxuICAvKipcbiAgICogTWVyZ2VzIG5ldyBwcm9wcyBhbmQgc3RhdGUsIG5vdGlmaWVzIGRlbGVnYXRlIG1ldGhvZHMgb2YgdXBkYXRlIGFuZFxuICAgKiBwZXJmb3JtcyB1cGRhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBOZXh0IGVsZW1lbnRcbiAgICogQHBhcmFtIHtvYmplY3R9IG5leHRQcm9wcyBOZXh0IHB1YmxpYyBvYmplY3QgdG8gc2V0IGFzIHByb3BlcnRpZXMuXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dFN0YXRlIE5leHQgb2JqZWN0IHRvIHNldCBhcyBzdGF0ZS5cbiAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0Q29udGV4dCBOZXh0IHB1YmxpYyBvYmplY3QgdG8gc2V0IGFzIGNvbnRleHQuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHs/b2JqZWN0fSB1bm1hc2tlZENvbnRleHRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9wZXJmb3JtQ29tcG9uZW50VXBkYXRlOiBmdW5jdGlvbiAobmV4dEVsZW1lbnQsIG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCwgdHJhbnNhY3Rpb24sIHVubWFza2VkQ29udGV4dCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG5cbiAgICB2YXIgaGFzQ29tcG9uZW50RGlkVXBkYXRlID0gQm9vbGVhbihpbnN0LmNvbXBvbmVudERpZFVwZGF0ZSk7XG4gICAgdmFyIHByZXZQcm9wcztcbiAgICB2YXIgcHJldlN0YXRlO1xuICAgIHZhciBwcmV2Q29udGV4dDtcbiAgICBpZiAoaGFzQ29tcG9uZW50RGlkVXBkYXRlKSB7XG4gICAgICBwcmV2UHJvcHMgPSBpbnN0LnByb3BzO1xuICAgICAgcHJldlN0YXRlID0gaW5zdC5zdGF0ZTtcbiAgICAgIHByZXZDb250ZXh0ID0gaW5zdC5jb250ZXh0O1xuICAgIH1cblxuICAgIGlmIChpbnN0LmNvbXBvbmVudFdpbGxVcGRhdGUpIHtcbiAgICAgIGluc3QuY29tcG9uZW50V2lsbFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpO1xuICAgIH1cblxuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbmV4dEVsZW1lbnQ7XG4gICAgdGhpcy5fY29udGV4dCA9IHVubWFza2VkQ29udGV4dDtcbiAgICBpbnN0LnByb3BzID0gbmV4dFByb3BzO1xuICAgIGluc3Quc3RhdGUgPSBuZXh0U3RhdGU7XG4gICAgaW5zdC5jb250ZXh0ID0gbmV4dENvbnRleHQ7XG5cbiAgICB0aGlzLl91cGRhdGVSZW5kZXJlZENvbXBvbmVudCh0cmFuc2FjdGlvbiwgdW5tYXNrZWRDb250ZXh0KTtcblxuICAgIGlmIChoYXNDb21wb25lbnREaWRVcGRhdGUpIHtcbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoaW5zdC5jb21wb25lbnREaWRVcGRhdGUuYmluZChpbnN0LCBwcmV2UHJvcHMsIHByZXZTdGF0ZSwgcHJldkNvbnRleHQpLCBpbnN0KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENhbGwgdGhlIGNvbXBvbmVudCdzIGByZW5kZXJgIG1ldGhvZCBhbmQgdXBkYXRlIHRoZSBET00gYWNjb3JkaW5nbHkuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQGludGVybmFsXG4gICAqL1xuICBfdXBkYXRlUmVuZGVyZWRDb21wb25lbnQ6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHZhciBwcmV2Q29tcG9uZW50SW5zdGFuY2UgPSB0aGlzLl9yZW5kZXJlZENvbXBvbmVudDtcbiAgICB2YXIgcHJldlJlbmRlcmVkRWxlbWVudCA9IHByZXZDb21wb25lbnRJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQ7XG4gICAgdmFyIG5leHRSZW5kZXJlZEVsZW1lbnQgPSB0aGlzLl9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQoKTtcbiAgICBpZiAoc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQocHJldlJlbmRlcmVkRWxlbWVudCwgbmV4dFJlbmRlcmVkRWxlbWVudCkpIHtcbiAgICAgIFJlYWN0UmVjb25jaWxlci5yZWNlaXZlQ29tcG9uZW50KHByZXZDb21wb25lbnRJbnN0YW5jZSwgbmV4dFJlbmRlcmVkRWxlbWVudCwgdHJhbnNhY3Rpb24sIHRoaXMuX3Byb2Nlc3NDaGlsZENvbnRleHQoY29udGV4dCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGVzZSB0d28gSURzIGFyZSBhY3R1YWxseSB0aGUgc2FtZSEgQnV0IG5vdGhpbmcgc2hvdWxkIHJlbHkgb24gdGhhdC5cbiAgICAgIHZhciB0aGlzSUQgPSB0aGlzLl9yb290Tm9kZUlEO1xuICAgICAgdmFyIHByZXZDb21wb25lbnRJRCA9IHByZXZDb21wb25lbnRJbnN0YW5jZS5fcm9vdE5vZGVJRDtcbiAgICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHByZXZDb21wb25lbnRJbnN0YW5jZSk7XG5cbiAgICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gdGhpcy5faW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChuZXh0UmVuZGVyZWRFbGVtZW50KTtcbiAgICAgIHZhciBuZXh0TWFya3VwID0gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50LCB0aGlzSUQsIHRyYW5zYWN0aW9uLCB0aGlzLl9wcm9jZXNzQ2hpbGRDb250ZXh0KGNvbnRleHQpKTtcbiAgICAgIHRoaXMuX3JlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQocHJldkNvbXBvbmVudElELCBuZXh0TWFya3VwKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEOiBmdW5jdGlvbiAocHJldkNvbXBvbmVudElELCBuZXh0TWFya3VwKSB7XG4gICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEKHByZXZDb21wb25lbnRJRCwgbmV4dE1hcmt1cCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnRXaXRob3V0T3duZXJPckNvbnRleHQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuICAgIHZhciByZW5kZXJlZENvbXBvbmVudCA9IGluc3QucmVuZGVyKCk7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFdlIGFsbG93IGF1dG8tbW9ja3MgdG8gcHJvY2VlZCBhcyBpZiB0aGV5J3JlIHJldHVybmluZyBudWxsLlxuICAgICAgaWYgKHR5cGVvZiByZW5kZXJlZENvbXBvbmVudCA9PT0gJ3VuZGVmaW5lZCcgJiYgaW5zdC5yZW5kZXIuX2lzTW9ja0Z1bmN0aW9uKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgcHJvYmFibHkgYmFkIHByYWN0aWNlLiBDb25zaWRlciB3YXJuaW5nIGhlcmUgYW5kXG4gICAgICAgIC8vIGRlcHJlY2F0aW5nIHRoaXMgY29udmVuaWVuY2UuXG4gICAgICAgIHJlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVuZGVyZWRDb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlbmRlcmVkQ29tcG9uZW50O1xuICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSB0aGlzO1xuICAgIHRyeSB7XG4gICAgICByZW5kZXJlZENvbXBvbmVudCA9IHRoaXMuX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudFdpdGhvdXRPd25lck9yQ29udGV4dCgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgIShcbiAgICAvLyBUT0RPOiBBbiBgaXNWYWxpZE5vZGVgIGZ1bmN0aW9uIHdvdWxkIHByb2JhYmx5IGJlIG1vcmUgYXBwcm9wcmlhdGVcbiAgICByZW5kZXJlZENvbXBvbmVudCA9PT0gbnVsbCB8fCByZW5kZXJlZENvbXBvbmVudCA9PT0gZmFsc2UgfHwgUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KHJlbmRlcmVkQ29tcG9uZW50KSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMucmVuZGVyKCk6IEEgdmFsaWQgUmVhY3RDb21wb25lbnQgbXVzdCBiZSByZXR1cm5lZC4gWW91IG1heSBoYXZlICcgKyAncmV0dXJuZWQgdW5kZWZpbmVkLCBhbiBhcnJheSBvciBzb21lIG90aGVyIGludmFsaWQgb2JqZWN0LicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVuZGVyZWRDb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIExhemlseSBhbGxvY2F0ZXMgdGhlIHJlZnMgb2JqZWN0IGFuZCBzdG9yZXMgYGNvbXBvbmVudGAgYXMgYHJlZmAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWYgUmVmZXJlbmNlIG5hbWUuXG4gICAqIEBwYXJhbSB7Y29tcG9uZW50fSBjb21wb25lbnQgQ29tcG9uZW50IHRvIHN0b3JlIGFzIGByZWZgLlxuICAgKiBAZmluYWxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGF0dGFjaFJlZjogZnVuY3Rpb24gKHJlZiwgY29tcG9uZW50KSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLmdldFB1YmxpY0luc3RhbmNlKCk7XG4gICAgIShpbnN0ICE9IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1N0YXRlbGVzcyBmdW5jdGlvbiBjb21wb25lbnRzIGNhbm5vdCBoYXZlIHJlZnMuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHZhciBwdWJsaWNDb21wb25lbnRJbnN0YW5jZSA9IGNvbXBvbmVudC5nZXRQdWJsaWNJbnN0YW5jZSgpO1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudCAmJiBjb21wb25lbnQuZ2V0TmFtZSA/IGNvbXBvbmVudC5nZXROYW1lKCkgOiAnYSBjb21wb25lbnQnO1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcocHVibGljQ29tcG9uZW50SW5zdGFuY2UgIT0gbnVsbCwgJ1N0YXRlbGVzcyBmdW5jdGlvbiBjb21wb25lbnRzIGNhbm5vdCBiZSBnaXZlbiByZWZzICcgKyAnKFNlZSByZWYgXCIlc1wiIGluICVzIGNyZWF0ZWQgYnkgJXMpLiAnICsgJ0F0dGVtcHRzIHRvIGFjY2VzcyB0aGlzIHJlZiB3aWxsIGZhaWwuJywgcmVmLCBjb21wb25lbnROYW1lLCB0aGlzLmdldE5hbWUoKSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHZhciByZWZzID0gaW5zdC5yZWZzID09PSBlbXB0eU9iamVjdCA/IGluc3QucmVmcyA9IHt9IDogaW5zdC5yZWZzO1xuICAgIHJlZnNbcmVmXSA9IHB1YmxpY0NvbXBvbmVudEluc3RhbmNlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEZXRhY2hlcyBhIHJlZmVyZW5jZSBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmIE5hbWUgdG8gZGVyZWZlcmVuY2UuXG4gICAqIEBmaW5hbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGV0YWNoUmVmOiBmdW5jdGlvbiAocmVmKSB7XG4gICAgdmFyIHJlZnMgPSB0aGlzLmdldFB1YmxpY0luc3RhbmNlKCkucmVmcztcbiAgICBkZWxldGUgcmVmc1tyZWZdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgYSB0ZXh0IGRlc2NyaXB0aW9uIG9mIHRoZSBjb21wb25lbnQgdGhhdCBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBpdFxuICAgKiBpbiBlcnJvciBtZXNzYWdlcy5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgbmFtZSBvciBudWxsLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldE5hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdHlwZSA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG4gICAgdmFyIGNvbnN0cnVjdG9yID0gdGhpcy5faW5zdGFuY2UgJiYgdGhpcy5faW5zdGFuY2UuY29uc3RydWN0b3I7XG4gICAgcmV0dXJuIHR5cGUuZGlzcGxheU5hbWUgfHwgY29uc3RydWN0b3IgJiYgY29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgdHlwZS5uYW1lIHx8IGNvbnN0cnVjdG9yICYmIGNvbnN0cnVjdG9yLm5hbWUgfHwgbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBwdWJsaWNseSBhY2Nlc3NpYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgY29tcG9uZW50IC0gaS5lLiB3aGF0XG4gICAqIGlzIGV4cG9zZWQgYnkgcmVmcyBhbmQgcmV0dXJuZWQgYnkgcmVuZGVyLiBDYW4gYmUgbnVsbCBmb3Igc3RhdGVsZXNzXG4gICAqIGNvbXBvbmVudHMuXG4gICAqXG4gICAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fSB0aGUgcHVibGljIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXRQdWJsaWNJbnN0YW5jZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG4gICAgaWYgKGluc3QgaW5zdGFuY2VvZiBTdGF0ZWxlc3NDb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gaW5zdDtcbiAgfSxcblxuICAvLyBTdHViXG4gIF9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50OiBudWxsXG5cbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdENvbXBvc2l0ZUNvbXBvbmVudE1peGluLCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnLCB7XG4gIG1vdW50Q29tcG9uZW50OiAnbW91bnRDb21wb25lbnQnLFxuICB1cGRhdGVDb21wb25lbnQ6ICd1cGRhdGVDb21wb25lbnQnLFxuICBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50OiAnX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCdcbn0pO1xuXG52YXIgUmVhY3RDb21wb3NpdGVDb21wb25lbnQgPSB7XG5cbiAgTWl4aW46IFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50TWl4aW5cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDdXJyZW50T3duZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogS2VlcHMgdHJhY2sgb2YgdGhlIGN1cnJlbnQgb3duZXIuXG4gKlxuICogVGhlIGN1cnJlbnQgb3duZXIgaXMgdGhlIGNvbXBvbmVudCB3aG8gc2hvdWxkIG93biBhbnkgY29tcG9uZW50cyB0aGF0IGFyZVxuICogY3VycmVudGx5IGJlaW5nIGNvbnN0cnVjdGVkLlxuICovXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSB7XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAdHlwZSB7UmVhY3RDb21wb25lbnR9XG4gICAqL1xuICBjdXJyZW50OiBudWxsXG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDdXJyZW50T3duZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NXG4gKi9cblxuLyogZ2xvYmFscyBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18qL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcbnZhciBSZWFjdERPTVRleHRDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0RE9NVGV4dENvbXBvbmVudCcpO1xudmFyIFJlYWN0RGVmYXVsdEluamVjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3REZWZhdWx0SW5qZWN0aW9uJyk7XG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VIYW5kbGVzJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xudmFyIFJlYWN0VmVyc2lvbiA9IHJlcXVpcmUoJy4vUmVhY3RWZXJzaW9uJyk7XG5cbnZhciBmaW5kRE9NTm9kZSA9IHJlcXVpcmUoJy4vZmluZERPTU5vZGUnKTtcbnZhciByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lciA9IHJlcXVpcmUoJy4vcmVuZGVyU3VidHJlZUludG9Db250YWluZXInKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5SZWFjdERlZmF1bHRJbmplY3Rpb24uaW5qZWN0KCk7XG5cbnZhciByZW5kZXIgPSBSZWFjdFBlcmYubWVhc3VyZSgnUmVhY3QnLCAncmVuZGVyJywgUmVhY3RNb3VudC5yZW5kZXIpO1xuXG52YXIgUmVhY3QgPSB7XG4gIGZpbmRET01Ob2RlOiBmaW5kRE9NTm9kZSxcbiAgcmVuZGVyOiByZW5kZXIsXG4gIHVubW91bnRDb21wb25lbnRBdE5vZGU6IFJlYWN0TW91bnQudW5tb3VudENvbXBvbmVudEF0Tm9kZSxcbiAgdmVyc2lvbjogUmVhY3RWZXJzaW9uLFxuXG4gIC8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuICB1bnN0YWJsZV9iYXRjaGVkVXBkYXRlczogUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzLFxuICB1bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcjogcmVuZGVyU3VidHJlZUludG9Db250YWluZXJcbn07XG5cbi8vIEluamVjdCB0aGUgcnVudGltZSBpbnRvIGEgZGV2dG9vbHMgZ2xvYmFsIGhvb2sgcmVnYXJkbGVzcyBvZiBicm93c2VyLlxuLy8gQWxsb3dzIGZvciBkZWJ1Z2dpbmcgd2hlbiB0aGUgaG9vayBpcyBpbmplY3RlZCBvbiB0aGUgcGFnZS5cbi8qIGVzbGludC1lbmFibGUgY2FtZWxjYXNlICovXG5pZiAodHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5pbmplY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLmluamVjdCh7XG4gICAgQ3VycmVudE93bmVyOiBSZWFjdEN1cnJlbnRPd25lcixcbiAgICBJbnN0YW5jZUhhbmRsZXM6IFJlYWN0SW5zdGFuY2VIYW5kbGVzLFxuICAgIE1vdW50OiBSZWFjdE1vdW50LFxuICAgIFJlY29uY2lsZXI6IFJlYWN0UmVjb25jaWxlcixcbiAgICBUZXh0Q29tcG9uZW50OiBSZWFjdERPTVRleHRDb21wb25lbnRcbiAgfSk7XG59XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG4gIGlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgd2luZG93LnRvcCA9PT0gd2luZG93LnNlbGYpIHtcblxuICAgIC8vIEZpcnN0IGNoZWNrIGlmIGRldnRvb2xzIGlzIG5vdCBpbnN0YWxsZWRcbiAgICBpZiAodHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIElmIHdlJ3JlIGluIENocm9tZSBvciBGaXJlZm94LCBwcm92aWRlIGEgZG93bmxvYWQgbGluayBpZiBub3QgaW5zdGFsbGVkLlxuICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPiAtMSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0VkZ2UnKSA9PT0gLTEgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgPiAtMSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCdEb3dubG9hZCB0aGUgUmVhY3QgRGV2VG9vbHMgZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6ICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC1kZXZ0b29scycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHdlJ3JlIGluIElFOCwgY2hlY2sgdG8gc2VlIGlmIHdlIGFyZSBpbiBjb21wYXRpYmlsaXR5IG1vZGUgYW5kIHByb3ZpZGVcbiAgICAvLyBpbmZvcm1hdGlvbiBvbiBwcmV2ZW50aW5nIGNvbXBhdGliaWxpdHkgbW9kZVxuICAgIHZhciBpZUNvbXBhdGliaWxpdHlNb2RlID0gZG9jdW1lbnQuZG9jdW1lbnRNb2RlICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSA8IDg7XG5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaWVDb21wYXRpYmlsaXR5TW9kZSwgJ0ludGVybmV0IEV4cGxvcmVyIGlzIHJ1bm5pbmcgaW4gY29tcGF0aWJpbGl0eSBtb2RlOyBwbGVhc2UgYWRkIHRoZSAnICsgJ2ZvbGxvd2luZyB0YWcgdG8geW91ciBIVE1MIHRvIHByZXZlbnQgdGhpcyBmcm9tIGhhcHBlbmluZzogJyArICc8bWV0YSBodHRwLWVxdWl2PVwiWC1VQS1Db21wYXRpYmxlXCIgY29udGVudD1cIklFPWVkZ2VcIiAvPicpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIGV4cGVjdGVkRmVhdHVyZXMgPSBbXG4gICAgLy8gc2hpbXNcbiAgICBBcnJheS5pc0FycmF5LCBBcnJheS5wcm90b3R5cGUuZXZlcnksIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLCBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiwgQXJyYXkucHJvdG90eXBlLm1hcCwgRGF0ZS5ub3csIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLCBPYmplY3Qua2V5cywgU3RyaW5nLnByb3RvdHlwZS5zcGxpdCwgU3RyaW5nLnByb3RvdHlwZS50cmltLFxuXG4gICAgLy8gc2hhbXNcbiAgICBPYmplY3QuY3JlYXRlLCBPYmplY3QuZnJlZXplXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwZWN0ZWRGZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFleHBlY3RlZEZlYXR1cmVzW2ldKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ09uZSBvciBtb3JlIEVTNSBzaGltL3NoYW1zIGV4cGVjdGVkIGJ5IFJlYWN0IGFyZSBub3QgYXZhaWxhYmxlOiAnICsgJ2h0dHBzOi8vZmIubWUvcmVhY3Qtd2FybmluZy1wb2x5ZmlsbHMnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NQnV0dG9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgbW91c2VMaXN0ZW5lck5hbWVzID0ge1xuICBvbkNsaWNrOiB0cnVlLFxuICBvbkRvdWJsZUNsaWNrOiB0cnVlLFxuICBvbk1vdXNlRG93bjogdHJ1ZSxcbiAgb25Nb3VzZU1vdmU6IHRydWUsXG4gIG9uTW91c2VVcDogdHJ1ZSxcblxuICBvbkNsaWNrQ2FwdHVyZTogdHJ1ZSxcbiAgb25Eb3VibGVDbGlja0NhcHR1cmU6IHRydWUsXG4gIG9uTW91c2VEb3duQ2FwdHVyZTogdHJ1ZSxcbiAgb25Nb3VzZU1vdmVDYXB0dXJlOiB0cnVlLFxuICBvbk1vdXNlVXBDYXB0dXJlOiB0cnVlXG59O1xuXG4vKipcbiAqIEltcGxlbWVudHMgYSA8YnV0dG9uPiBuYXRpdmUgY29tcG9uZW50IHRoYXQgZG9lcyBub3QgcmVjZWl2ZSBtb3VzZSBldmVudHNcbiAqIHdoZW4gYGRpc2FibGVkYCBpcyBzZXQuXG4gKi9cbnZhciBSZWFjdERPTUJ1dHRvbiA9IHtcbiAgZ2V0TmF0aXZlUHJvcHM6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIGlmICghcHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiBwcm9wcztcbiAgICB9XG5cbiAgICAvLyBDb3B5IHRoZSBwcm9wcywgZXhjZXB0IHRoZSBtb3VzZSBsaXN0ZW5lcnNcbiAgICB2YXIgbmF0aXZlUHJvcHMgPSB7fTtcbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHtcbiAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmICFtb3VzZUxpc3RlbmVyTmFtZXNba2V5XSkge1xuICAgICAgICBuYXRpdmVQcm9wc1trZXldID0gcHJvcHNba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmF0aXZlUHJvcHM7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01CdXR0b247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NQ29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbi8qIGdsb2JhbCBoYXNPd25Qcm9wZXJ0eTp0cnVlICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEF1dG9Gb2N1c1V0aWxzID0gcmVxdWlyZSgnLi9BdXRvRm9jdXNVdGlscycpO1xudmFyIENTU1Byb3BlcnR5T3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vQ1NTUHJvcGVydHlPcGVyYXRpb25zJyk7XG52YXIgRE9NUHJvcGVydHkgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5Jyk7XG52YXIgRE9NUHJvcGVydHlPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eU9wZXJhdGlvbnMnKTtcbnZhciBFdmVudENvbnN0YW50cyA9IHJlcXVpcmUoJy4vRXZlbnRDb25zdGFudHMnKTtcbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlcicpO1xudmFyIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0RE9NQnV0dG9uID0gcmVxdWlyZSgnLi9SZWFjdERPTUJ1dHRvbicpO1xudmFyIFJlYWN0RE9NSW5wdXQgPSByZXF1aXJlKCcuL1JlYWN0RE9NSW5wdXQnKTtcbnZhciBSZWFjdERPTU9wdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RET01PcHRpb24nKTtcbnZhciBSZWFjdERPTVNlbGVjdCA9IHJlcXVpcmUoJy4vUmVhY3RET01TZWxlY3QnKTtcbnZhciBSZWFjdERPTVRleHRhcmVhID0gcmVxdWlyZSgnLi9SZWFjdERPTVRleHRhcmVhJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFJlYWN0TXVsdGlDaGlsZCA9IHJlcXVpcmUoJy4vUmVhY3RNdWx0aUNoaWxkJyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBSZWFjdFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZVF1ZXVlJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vY2FuRGVmaW5lUHJvcGVydHknKTtcbnZhciBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIgPSByZXF1aXJlKCcuL2VzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlcicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIGlzRXZlbnRTdXBwb3J0ZWQgPSByZXF1aXJlKCcuL2lzRXZlbnRTdXBwb3J0ZWQnKTtcbnZhciBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG52YXIgc2V0SW5uZXJIVE1MID0gcmVxdWlyZSgnLi9zZXRJbm5lckhUTUwnKTtcbnZhciBzZXRUZXh0Q29udGVudCA9IHJlcXVpcmUoJy4vc2V0VGV4dENvbnRlbnQnKTtcbnZhciBzaGFsbG93RXF1YWwgPSByZXF1aXJlKCdmYmpzL2xpYi9zaGFsbG93RXF1YWwnKTtcbnZhciB2YWxpZGF0ZURPTU5lc3RpbmcgPSByZXF1aXJlKCcuL3ZhbGlkYXRlRE9NTmVzdGluZycpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBkZWxldGVMaXN0ZW5lciA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5kZWxldGVMaXN0ZW5lcjtcbnZhciBsaXN0ZW5UbyA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5saXN0ZW5UbztcbnZhciByZWdpc3RyYXRpb25OYW1lTW9kdWxlcyA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5yZWdpc3RyYXRpb25OYW1lTW9kdWxlcztcblxuLy8gRm9yIHF1aWNrbHkgbWF0Y2hpbmcgY2hpbGRyZW4gdHlwZSwgdG8gdGVzdCBpZiBjYW4gYmUgdHJlYXRlZCBhcyBjb250ZW50LlxudmFyIENPTlRFTlRfVFlQRVMgPSB7ICdzdHJpbmcnOiB0cnVlLCAnbnVtYmVyJzogdHJ1ZSB9O1xuXG52YXIgQ0hJTERSRU4gPSBrZXlPZih7IGNoaWxkcmVuOiBudWxsIH0pO1xudmFyIFNUWUxFID0ga2V5T2YoeyBzdHlsZTogbnVsbCB9KTtcbnZhciBIVE1MID0ga2V5T2YoeyBfX2h0bWw6IG51bGwgfSk7XG5cbnZhciBFTEVNRU5UX05PREVfVFlQRSA9IDE7XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShpbnRlcm5hbEluc3RhbmNlKSB7XG4gIGlmIChpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgdmFyIG93bmVyID0gaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyIHx8IG51bGw7XG4gICAgaWYgKG93bmVyKSB7XG4gICAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcbiAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgIHJldHVybiAnIFRoaXMgRE9NIG5vZGUgd2FzIHJlbmRlcmVkIGJ5IGAnICsgbmFtZSArICdgLic7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn1cblxudmFyIGxlZ2FjeVByb3BzRGVzY3JpcHRvcjtcbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGxlZ2FjeVByb3BzRGVzY3JpcHRvciA9IHtcbiAgICBwcm9wczoge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbXBvbmVudCA9IHRoaXMuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQ7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnByb3BzIG9mIGEgRE9NIG5vZGU7IGluc3RlYWQsICcgKyAncmVjcmVhdGUgdGhlIHByb3BzIGFzIGByZW5kZXJgIGRpZCBvcmlnaW5hbGx5IG9yIHJlYWQgdGhlIERPTSAnICsgJ3Byb3BlcnRpZXMvYXR0cmlidXRlcyBkaXJlY3RseSBmcm9tIHRoaXMgbm9kZSAoZS5nLiwgJyArICd0aGlzLnJlZnMuYm94LmNsYXNzTmFtZSkuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gbGVnYWN5R2V0RE9NTm9kZSgpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5nZXRET01Ob2RlKCkgb2YgYSBET00gbm9kZTsgJyArICdpbnN0ZWFkLCB1c2UgdGhlIG5vZGUgZGlyZWN0bHkuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIGxlZ2FjeUlzTW91bnRlZCgpIHtcbiAgdmFyIGNvbXBvbmVudCA9IHRoaXMuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQ7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdERPTUNvbXBvbmVudDogRG8gbm90IGFjY2VzcyAuaXNNb3VudGVkKCkgb2YgYSBET00gbm9kZS4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gISFjb21wb25lbnQ7XG59XG5cbmZ1bmN0aW9uIGxlZ2FjeVNldFN0YXRlRXRjKCkge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnNldFN0YXRlKCksIC5yZXBsYWNlU3RhdGUoKSwgb3IgJyArICcuZm9yY2VVcGRhdGUoKSBvZiBhIERPTSBub2RlLiBUaGlzIGlzIGEgbm8tb3AuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gbGVnYWN5U2V0UHJvcHMocGFydGlhbFByb3BzLCBjYWxsYmFjaykge1xuICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5zZXRQcm9wcygpIG9mIGEgRE9NIG5vZGUuICcgKyAnSW5zdGVhZCwgY2FsbCBSZWFjdERPTS5yZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoIWNvbXBvbmVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVTZXRQcm9wc0ludGVybmFsKGNvbXBvbmVudCwgcGFydGlhbFByb3BzKTtcbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlQ2FsbGJhY2tJbnRlcm5hbChjb21wb25lbnQsIGNhbGxiYWNrKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBsZWdhY3lSZXBsYWNlUHJvcHMocGFydGlhbFByb3BzLCBjYWxsYmFjaykge1xuICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5yZXBsYWNlUHJvcHMoKSBvZiBhIERPTSBub2RlLiAnICsgJ0luc3RlYWQsIGNhbGwgUmVhY3RET00ucmVuZGVyIGFnYWluIGF0IHRoZSB0b3AgbGV2ZWwuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFjb21wb25lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlUmVwbGFjZVByb3BzSW50ZXJuYWwoY29tcG9uZW50LCBwYXJ0aWFsUHJvcHMpO1xuICBpZiAoY2FsbGJhY2spIHtcbiAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVDYWxsYmFja0ludGVybmFsKGNvbXBvbmVudCwgY2FsbGJhY2spO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZyaWVuZGx5U3RyaW5naWZ5KG9iaikge1xuICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICByZXR1cm4gJ1snICsgb2JqLm1hcChmcmllbmRseVN0cmluZ2lmeSkuam9pbignLCAnKSArICddJztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHBhaXJzID0gW107XG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgdmFyIGtleUVzY2FwZWQgPSAvXlthLXokX11bXFx3JF9dKiQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpO1xuICAgICAgICAgIHBhaXJzLnB1c2goa2V5RXNjYXBlZCArICc6ICcgKyBmcmllbmRseVN0cmluZ2lmeShvYmpba2V5XSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gJ3snICsgcGFpcnMuam9pbignLCAnKSArICd9JztcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKTtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuICdbZnVuY3Rpb24gb2JqZWN0XSc7XG4gIH1cbiAgLy8gRGlmZmVycyBmcm9tIEpTT04uc3RyaW5naWZ5IGluIHRoYXQgdW5kZWZpbmVkIGJlY2F1c2VzIHVuZGVmaW5lZCBhbmQgdGhhdFxuICAvLyBpbmYgYW5kIG5hbiBkb24ndCBiZWNvbWUgbnVsbFxuICByZXR1cm4gU3RyaW5nKG9iaik7XG59XG5cbnZhciBzdHlsZU11dGF0aW9uV2FybmluZyA9IHt9O1xuXG5mdW5jdGlvbiBjaGVja0FuZFdhcm5Gb3JNdXRhdGVkU3R5bGUoc3R5bGUxLCBzdHlsZTIsIGNvbXBvbmVudCkge1xuICBpZiAoc3R5bGUxID09IG51bGwgfHwgc3R5bGUyID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNoYWxsb3dFcXVhbChzdHlsZTEsIHN0eWxlMikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5fdGFnO1xuICB2YXIgb3duZXIgPSBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcbiAgdmFyIG93bmVyTmFtZTtcbiAgaWYgKG93bmVyKSB7XG4gICAgb3duZXJOYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuICB9XG5cbiAgdmFyIGhhc2ggPSBvd25lck5hbWUgKyAnfCcgKyBjb21wb25lbnROYW1lO1xuXG4gIGlmIChzdHlsZU11dGF0aW9uV2FybmluZy5oYXNPd25Qcm9wZXJ0eShoYXNoKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN0eWxlTXV0YXRpb25XYXJuaW5nW2hhc2hdID0gdHJ1ZTtcblxuICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ2Alc2Agd2FzIHBhc3NlZCBhIHN0eWxlIG9iamVjdCB0aGF0IGhhcyBwcmV2aW91c2x5IGJlZW4gbXV0YXRlZC4gJyArICdNdXRhdGluZyBgc3R5bGVgIGlzIGRlcHJlY2F0ZWQuIENvbnNpZGVyIGNsb25pbmcgaXQgYmVmb3JlaGFuZC4gQ2hlY2sgJyArICd0aGUgYHJlbmRlcmAgJXMuIFByZXZpb3VzIHN0eWxlOiAlcy4gTXV0YXRlZCBzdHlsZTogJXMuJywgY29tcG9uZW50TmFtZSwgb3duZXIgPyAnb2YgYCcgKyBvd25lck5hbWUgKyAnYCcgOiAndXNpbmcgPCcgKyBjb21wb25lbnROYW1lICsgJz4nLCBmcmllbmRseVN0cmluZ2lmeShzdHlsZTEpLCBmcmllbmRseVN0cmluZ2lmeShzdHlsZTIpKSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gY29tcG9uZW50XG4gKiBAcGFyYW0gez9vYmplY3R9IHByb3BzXG4gKi9cbmZ1bmN0aW9uIGFzc2VydFZhbGlkUHJvcHMoY29tcG9uZW50LCBwcm9wcykge1xuICBpZiAoIXByb3BzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIE5vdGUgdGhlIHVzZSBvZiBgPT1gIHdoaWNoIGNoZWNrcyBmb3IgbnVsbCBvciB1bmRlZmluZWQuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKHZvaWRFbGVtZW50VGFnc1tjb21wb25lbnQuX3RhZ10pIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHByb3BzLmNoaWxkcmVuID09IG51bGwgJiYgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgPT0gbnVsbCwgJyVzIGlzIGEgdm9pZCBlbGVtZW50IHRhZyBhbmQgbXVzdCBub3QgaGF2ZSBgY2hpbGRyZW5gIG9yICcgKyAndXNlIGBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTGAuJXMnLCBjb21wb25lbnQuX3RhZywgY29tcG9uZW50Ll9jdXJyZW50RWxlbWVudC5fb3duZXIgPyAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mICcgKyBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50Ll9vd25lci5nZXROYW1lKCkgKyAnLicgOiAnJykgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG4gIGlmIChwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCAhPSBudWxsKSB7XG4gICAgIShwcm9wcy5jaGlsZHJlbiA9PSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDYW4gb25seSBzZXQgb25lIG9mIGBjaGlsZHJlbmAgb3IgYHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgISh0eXBlb2YgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgPT09ICdvYmplY3QnICYmIEhUTUwgaW4gcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Bwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTGAgbXVzdCBiZSBpbiB0aGUgZm9ybSBge19faHRtbDogLi4ufWAuICcgKyAnUGxlYXNlIHZpc2l0IGh0dHBzOi8vZmIubWUvcmVhY3QtaW52YXJpYW50LWRhbmdlcm91c2x5LXNldC1pbm5lci1odG1sICcgKyAnZm9yIG1vcmUgaW5mb3JtYXRpb24uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcocHJvcHMuaW5uZXJIVE1MID09IG51bGwsICdEaXJlY3RseSBzZXR0aW5nIHByb3BlcnR5IGBpbm5lckhUTUxgIGlzIG5vdCBwZXJtaXR0ZWQuICcgKyAnRm9yIG1vcmUgaW5mb3JtYXRpb24sIGxvb2t1cCBkb2N1bWVudGF0aW9uIG9uIGBkYW5nZXJvdXNseVNldElubmVySFRNTGAuJykgOiB1bmRlZmluZWQ7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIXByb3BzLmNvbnRlbnRFZGl0YWJsZSB8fCBwcm9wcy5jaGlsZHJlbiA9PSBudWxsLCAnQSBjb21wb25lbnQgaXMgYGNvbnRlbnRFZGl0YWJsZWAgYW5kIGNvbnRhaW5zIGBjaGlsZHJlbmAgbWFuYWdlZCBieSAnICsgJ1JlYWN0LiBJdCBpcyBub3cgeW91ciByZXNwb25zaWJpbGl0eSB0byBndWFyYW50ZWUgdGhhdCBub25lIG9mICcgKyAndGhvc2Ugbm9kZXMgYXJlIHVuZXhwZWN0ZWRseSBtb2RpZmllZCBvciBkdXBsaWNhdGVkLiBUaGlzIGlzICcgKyAncHJvYmFibHkgbm90IGludGVudGlvbmFsLicpIDogdW5kZWZpbmVkO1xuICB9XG4gICEocHJvcHMuc3R5bGUgPT0gbnVsbCB8fCB0eXBlb2YgcHJvcHMuc3R5bGUgPT09ICdvYmplY3QnKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUaGUgYHN0eWxlYCBwcm9wIGV4cGVjdHMgYSBtYXBwaW5nIGZyb20gc3R5bGUgcHJvcGVydGllcyB0byB2YWx1ZXMsICcgKyAnbm90IGEgc3RyaW5nLiBGb3IgZXhhbXBsZSwgc3R5bGU9e3ttYXJnaW5SaWdodDogc3BhY2luZyArIFxcJ2VtXFwnfX0gd2hlbiAnICsgJ3VzaW5nIEpTWC4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGVucXVldWVQdXRMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIsIHRyYW5zYWN0aW9uKSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgLy8gSUU4IGhhcyBubyBBUEkgZm9yIGV2ZW50IGNhcHR1cmluZyBhbmQgdGhlIGBvblNjcm9sbGAgZXZlbnQgZG9lc24ndFxuICAgIC8vIGJ1YmJsZS5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhyZWdpc3RyYXRpb25OYW1lICE9PSAnb25TY3JvbGwnIHx8IGlzRXZlbnRTdXBwb3J0ZWQoJ3Njcm9sbCcsIHRydWUpLCAnVGhpcyBicm93c2VyIGRvZXNuXFwndCBzdXBwb3J0IHRoZSBgb25TY3JvbGxgIGV2ZW50JykgOiB1bmRlZmluZWQ7XG4gIH1cbiAgdmFyIGNvbnRhaW5lciA9IFJlYWN0TW91bnQuZmluZFJlYWN0Q29udGFpbmVyRm9ySUQoaWQpO1xuICBpZiAoY29udGFpbmVyKSB7XG4gICAgdmFyIGRvYyA9IGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFX1RZUEUgPyBjb250YWluZXIub3duZXJEb2N1bWVudCA6IGNvbnRhaW5lcjtcbiAgICBsaXN0ZW5UbyhyZWdpc3RyYXRpb25OYW1lLCBkb2MpO1xuICB9XG4gIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUocHV0TGlzdGVuZXIsIHtcbiAgICBpZDogaWQsXG4gICAgcmVnaXN0cmF0aW9uTmFtZTogcmVnaXN0cmF0aW9uTmFtZSxcbiAgICBsaXN0ZW5lcjogbGlzdGVuZXJcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHB1dExpc3RlbmVyKCkge1xuICB2YXIgbGlzdGVuZXJUb1B1dCA9IHRoaXM7XG4gIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5wdXRMaXN0ZW5lcihsaXN0ZW5lclRvUHV0LmlkLCBsaXN0ZW5lclRvUHV0LnJlZ2lzdHJhdGlvbk5hbWUsIGxpc3RlbmVyVG9QdXQubGlzdGVuZXIpO1xufVxuXG4vLyBUaGVyZSBhcmUgc28gbWFueSBtZWRpYSBldmVudHMsIGl0IG1ha2VzIHNlbnNlIHRvIGp1c3Rcbi8vIG1haW50YWluIGEgbGlzdCByYXRoZXIgdGhhbiBjcmVhdGUgYSBgdHJhcEJ1YmJsZWRFdmVudGAgZm9yIGVhY2hcbnZhciBtZWRpYUV2ZW50cyA9IHtcbiAgdG9wQWJvcnQ6ICdhYm9ydCcsXG4gIHRvcENhblBsYXk6ICdjYW5wbGF5JyxcbiAgdG9wQ2FuUGxheVRocm91Z2g6ICdjYW5wbGF5dGhyb3VnaCcsXG4gIHRvcER1cmF0aW9uQ2hhbmdlOiAnZHVyYXRpb25jaGFuZ2UnLFxuICB0b3BFbXB0aWVkOiAnZW1wdGllZCcsXG4gIHRvcEVuY3J5cHRlZDogJ2VuY3J5cHRlZCcsXG4gIHRvcEVuZGVkOiAnZW5kZWQnLFxuICB0b3BFcnJvcjogJ2Vycm9yJyxcbiAgdG9wTG9hZGVkRGF0YTogJ2xvYWRlZGRhdGEnLFxuICB0b3BMb2FkZWRNZXRhZGF0YTogJ2xvYWRlZG1ldGFkYXRhJyxcbiAgdG9wTG9hZFN0YXJ0OiAnbG9hZHN0YXJ0JyxcbiAgdG9wUGF1c2U6ICdwYXVzZScsXG4gIHRvcFBsYXk6ICdwbGF5JyxcbiAgdG9wUGxheWluZzogJ3BsYXlpbmcnLFxuICB0b3BQcm9ncmVzczogJ3Byb2dyZXNzJyxcbiAgdG9wUmF0ZUNoYW5nZTogJ3JhdGVjaGFuZ2UnLFxuICB0b3BTZWVrZWQ6ICdzZWVrZWQnLFxuICB0b3BTZWVraW5nOiAnc2Vla2luZycsXG4gIHRvcFN0YWxsZWQ6ICdzdGFsbGVkJyxcbiAgdG9wU3VzcGVuZDogJ3N1c3BlbmQnLFxuICB0b3BUaW1lVXBkYXRlOiAndGltZXVwZGF0ZScsXG4gIHRvcFZvbHVtZUNoYW5nZTogJ3ZvbHVtZWNoYW5nZScsXG4gIHRvcFdhaXRpbmc6ICd3YWl0aW5nJ1xufTtcblxuZnVuY3Rpb24gdHJhcEJ1YmJsZWRFdmVudHNMb2NhbCgpIHtcbiAgdmFyIGluc3QgPSB0aGlzO1xuICAvLyBJZiBhIGNvbXBvbmVudCByZW5kZXJzIHRvIG51bGwgb3IgaWYgYW5vdGhlciBjb21wb25lbnQgZmF0YWxzIGFuZCBjYXVzZXNcbiAgLy8gdGhlIHN0YXRlIG9mIHRoZSB0cmVlIHRvIGJlIGNvcnJ1cHRlZCwgYG5vZGVgIGhlcmUgY2FuIGJlIG51bGwuXG4gICFpbnN0Ll9yb290Tm9kZUlEID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ011c3QgYmUgbW91bnRlZCB0byB0cmFwIGV2ZW50cycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUoaW5zdC5fcm9vdE5vZGVJRCk7XG4gICFub2RlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RyYXBCdWJibGVkRXZlbnQoLi4uKTogUmVxdWlyZXMgbm9kZSB0byBiZSByZW5kZXJlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgc3dpdGNoIChpbnN0Ll90YWcpIHtcbiAgICBjYXNlICdpZnJhbWUnOlxuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycyA9IFtSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcExvYWQsICdsb2FkJywgbm9kZSldO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndmlkZW8nOlxuICAgIGNhc2UgJ2F1ZGlvJzpcblxuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycyA9IFtdO1xuICAgICAgLy8gY3JlYXRlIGxpc3RlbmVyIGZvciBlYWNoIG1lZGlhIGV2ZW50XG4gICAgICBmb3IgKHZhciBldmVudCBpbiBtZWRpYUV2ZW50cykge1xuICAgICAgICBpZiAobWVkaWFFdmVudHMuaGFzT3duUHJvcGVydHkoZXZlbnQpKSB7XG4gICAgICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycy5wdXNoKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXNbZXZlbnRdLCBtZWRpYUV2ZW50c1tldmVudF0sIG5vZGUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVhaztcbiAgICBjYXNlICdpbWcnOlxuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycyA9IFtSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcEVycm9yLCAnZXJyb3InLCBub2RlKSwgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnRyYXBCdWJibGVkRXZlbnQoRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcy50b3BMb2FkLCAnbG9hZCcsIG5vZGUpXTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycyA9IFtSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcFJlc2V0LCAncmVzZXQnLCBub2RlKSwgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnRyYXBCdWJibGVkRXZlbnQoRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcy50b3BTdWJtaXQsICdzdWJtaXQnLCBub2RlKV07XG4gICAgICBicmVhaztcbiAgfVxufVxuXG5mdW5jdGlvbiBtb3VudFJlYWR5SW5wdXRXcmFwcGVyKCkge1xuICBSZWFjdERPTUlucHV0Lm1vdW50UmVhZHlXcmFwcGVyKHRoaXMpO1xufVxuXG5mdW5jdGlvbiBwb3N0VXBkYXRlU2VsZWN0V3JhcHBlcigpIHtcbiAgUmVhY3RET01TZWxlY3QucG9zdFVwZGF0ZVdyYXBwZXIodGhpcyk7XG59XG5cbi8vIEZvciBIVE1MLCBjZXJ0YWluIHRhZ3Mgc2hvdWxkIG9taXQgdGhlaXIgY2xvc2UgdGFnLiBXZSBrZWVwIGEgd2hpdGVsaXN0IGZvclxuLy8gdGhvc2Ugc3BlY2lhbCBjYXNlZCB0YWdzLlxuXG52YXIgb21pdHRlZENsb3NlVGFncyA9IHtcbiAgJ2FyZWEnOiB0cnVlLFxuICAnYmFzZSc6IHRydWUsXG4gICdicic6IHRydWUsXG4gICdjb2wnOiB0cnVlLFxuICAnZW1iZWQnOiB0cnVlLFxuICAnaHInOiB0cnVlLFxuICAnaW1nJzogdHJ1ZSxcbiAgJ2lucHV0JzogdHJ1ZSxcbiAgJ2tleWdlbic6IHRydWUsXG4gICdsaW5rJzogdHJ1ZSxcbiAgJ21ldGEnOiB0cnVlLFxuICAncGFyYW0nOiB0cnVlLFxuICAnc291cmNlJzogdHJ1ZSxcbiAgJ3RyYWNrJzogdHJ1ZSxcbiAgJ3dicic6IHRydWVcbn07XG5cbi8vIE5PVEU6IG1lbnVpdGVtJ3MgY2xvc2UgdGFnIHNob3VsZCBiZSBvbWl0dGVkLCBidXQgdGhhdCBjYXVzZXMgcHJvYmxlbXMuXG52YXIgbmV3bGluZUVhdGluZ1RhZ3MgPSB7XG4gICdsaXN0aW5nJzogdHJ1ZSxcbiAgJ3ByZSc6IHRydWUsXG4gICd0ZXh0YXJlYSc6IHRydWVcbn07XG5cbi8vIEZvciBIVE1MLCBjZXJ0YWluIHRhZ3MgY2Fubm90IGhhdmUgY2hpbGRyZW4uIFRoaXMgaGFzIHRoZSBzYW1lIHB1cnBvc2UgYXNcbi8vIGBvbWl0dGVkQ2xvc2VUYWdzYCBleGNlcHQgdGhhdCBgbWVudWl0ZW1gIHNob3VsZCBzdGlsbCBoYXZlIGl0cyBjbG9zaW5nIHRhZy5cblxudmFyIHZvaWRFbGVtZW50VGFncyA9IGFzc2lnbih7XG4gICdtZW51aXRlbSc6IHRydWVcbn0sIG9taXR0ZWRDbG9zZVRhZ3MpO1xuXG4vLyBXZSBhY2NlcHQgYW55IHRhZyB0byBiZSByZW5kZXJlZCBidXQgc2luY2UgdGhpcyBnZXRzIGluamVjdGVkIGludG8gYXJiaXRyYXJ5XG4vLyBIVE1MLCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB0aGF0IGl0J3MgYSBzYWZlIHRhZy5cbi8vIGh0dHA6Ly93d3cudzMub3JnL1RSL1JFQy14bWwvI05ULU5hbWVcblxudmFyIFZBTElEX1RBR19SRUdFWCA9IC9eW2EtekEtWl1bYS16QS1aOl9cXC5cXC1cXGRdKiQvOyAvLyBTaW1wbGlmaWVkIHN1YnNldFxudmFyIHZhbGlkYXRlZFRhZ0NhY2hlID0ge307XG52YXIgaGFzT3duUHJvcGVydHkgPSAoe30pLmhhc093blByb3BlcnR5O1xuXG5mdW5jdGlvbiB2YWxpZGF0ZURhbmdlcm91c1RhZyh0YWcpIHtcbiAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbGlkYXRlZFRhZ0NhY2hlLCB0YWcpKSB7XG4gICAgIVZBTElEX1RBR19SRUdFWC50ZXN0KHRhZykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnSW52YWxpZCB0YWc6ICVzJywgdGFnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFsaWRhdGVkVGFnQ2FjaGVbdGFnXSA9IHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0NoaWxkQ29udGV4dERldihjb250ZXh0LCBpbnN0KSB7XG4gIC8vIFBhc3MgZG93biBvdXIgdGFnIG5hbWUgdG8gY2hpbGQgY29tcG9uZW50cyBmb3IgdmFsaWRhdGlvbiBwdXJwb3Nlc1xuICBjb250ZXh0ID0gYXNzaWduKHt9LCBjb250ZXh0KTtcbiAgdmFyIGluZm8gPSBjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XTtcbiAgY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0gPSB2YWxpZGF0ZURPTU5lc3RpbmcudXBkYXRlZEFuY2VzdG9ySW5mbyhpbmZvLCBpbnN0Ll90YWcsIGluc3QpO1xuICByZXR1cm4gY29udGV4dDtcbn1cblxuZnVuY3Rpb24gaXNDdXN0b21Db21wb25lbnQodGFnTmFtZSwgcHJvcHMpIHtcbiAgcmV0dXJuIHRhZ05hbWUuaW5kZXhPZignLScpID49IDAgfHwgcHJvcHMuaXMgIT0gbnVsbDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFJlYWN0IGNsYXNzIHRoYXQgaXMgaWRlbXBvdGVudCBhbmQgY2FwYWJsZSBvZiBjb250YWluaW5nIG90aGVyXG4gKiBSZWFjdCBjb21wb25lbnRzLiBJdCBhY2NlcHRzIGV2ZW50IGxpc3RlbmVycyBhbmQgRE9NIHByb3BlcnRpZXMgdGhhdCBhcmVcbiAqIHZhbGlkIGFjY29yZGluZyB0byBgRE9NUHJvcGVydHlgLlxuICpcbiAqICAtIEV2ZW50IGxpc3RlbmVyczogYG9uQ2xpY2tgLCBgb25Nb3VzZURvd25gLCBldGMuXG4gKiAgLSBET00gcHJvcGVydGllczogYGNsYXNzTmFtZWAsIGBuYW1lYCwgYHRpdGxlYCwgZXRjLlxuICpcbiAqIFRoZSBgc3R5bGVgIHByb3BlcnR5IGZ1bmN0aW9ucyBkaWZmZXJlbnRseSBmcm9tIHRoZSBET00gQVBJLiBJdCBhY2NlcHRzIGFuXG4gKiBvYmplY3QgbWFwcGluZyBvZiBzdHlsZSBwcm9wZXJ0aWVzIHRvIHZhbHVlcy5cbiAqXG4gKiBAY29uc3RydWN0b3IgUmVhY3RET01Db21wb25lbnRcbiAqIEBleHRlbmRzIFJlYWN0TXVsdGlDaGlsZFxuICovXG5mdW5jdGlvbiBSZWFjdERPTUNvbXBvbmVudCh0YWcpIHtcbiAgdmFsaWRhdGVEYW5nZXJvdXNUYWcodGFnKTtcbiAgdGhpcy5fdGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7XG4gIHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW4gPSBudWxsO1xuICB0aGlzLl9wcmV2aW91c1N0eWxlID0gbnVsbDtcbiAgdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBudWxsO1xuICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgdGhpcy5fd3JhcHBlclN0YXRlID0gbnVsbDtcbiAgdGhpcy5fdG9wTGV2ZWxXcmFwcGVyID0gbnVsbDtcbiAgdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzID0gbnVsbDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB0aGlzLl91bnByb2Nlc3NlZENvbnRleHREZXYgPSBudWxsO1xuICAgIHRoaXMuX3Byb2Nlc3NlZENvbnRleHREZXYgPSBudWxsO1xuICB9XG59XG5cblJlYWN0RE9NQ29tcG9uZW50LmRpc3BsYXlOYW1lID0gJ1JlYWN0RE9NQ29tcG9uZW50JztcblxuUmVhY3RET01Db21wb25lbnQuTWl4aW4gPSB7XG5cbiAgY29uc3RydWN0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gZWxlbWVudDtcbiAgfSxcblxuICAvKipcbiAgICogR2VuZXJhdGVzIHJvb3QgdGFnIG1hcmt1cCB0aGVuIHJlY3Vyc2VzLiBUaGlzIG1ldGhvZCBoYXMgc2lkZSBlZmZlY3RzIGFuZFxuICAgKiBpcyBub3QgaWRlbXBvdGVudC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgVGhlIHJvb3QgRE9NIElEIGZvciB0aGlzIG5vZGUuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjb21wdXRlZCBtYXJrdXAuXG4gICAqL1xuICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gKHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gcm9vdElEO1xuXG4gICAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cbiAgICBzd2l0Y2ggKHRoaXMuX3RhZykge1xuICAgICAgY2FzZSAnaWZyYW1lJzpcbiAgICAgIGNhc2UgJ2ltZyc6XG4gICAgICBjYXNlICdmb3JtJzpcbiAgICAgIGNhc2UgJ3ZpZGVvJzpcbiAgICAgIGNhc2UgJ2F1ZGlvJzpcbiAgICAgICAgdGhpcy5fd3JhcHBlclN0YXRlID0ge1xuICAgICAgICAgIGxpc3RlbmVyczogbnVsbFxuICAgICAgICB9O1xuICAgICAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKHRyYXBCdWJibGVkRXZlbnRzTG9jYWwsIHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1dHRvbic6XG4gICAgICAgIHByb3BzID0gUmVhY3RET01CdXR0b24uZ2V0TmF0aXZlUHJvcHModGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgUmVhY3RET01JbnB1dC5tb3VudFdyYXBwZXIodGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBwcm9wcyA9IFJlYWN0RE9NSW5wdXQuZ2V0TmF0aXZlUHJvcHModGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ29wdGlvbic6XG4gICAgICAgIFJlYWN0RE9NT3B0aW9uLm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHByb3BzID0gUmVhY3RET01PcHRpb24uZ2V0TmF0aXZlUHJvcHModGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgIFJlYWN0RE9NU2VsZWN0Lm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHByb3BzID0gUmVhY3RET01TZWxlY3QuZ2V0TmF0aXZlUHJvcHModGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBjb250ZXh0ID0gUmVhY3RET01TZWxlY3QucHJvY2Vzc0NoaWxkQ29udGV4dCh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICBSZWFjdERPTVRleHRhcmVhLm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHByb3BzID0gUmVhY3RET01UZXh0YXJlYS5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGFzc2VydFZhbGlkUHJvcHModGhpcywgcHJvcHMpO1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pIHtcbiAgICAgICAgdmFsaWRhdGVET01OZXN0aW5nKHRoaXMuX3RhZywgdGhpcywgY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB0aGlzLl91bnByb2Nlc3NlZENvbnRleHREZXYgPSBjb250ZXh0O1xuICAgICAgdGhpcy5fcHJvY2Vzc2VkQ29udGV4dERldiA9IHByb2Nlc3NDaGlsZENvbnRleHREZXYoY29udGV4dCwgdGhpcyk7XG4gICAgICBjb250ZXh0ID0gdGhpcy5fcHJvY2Vzc2VkQ29udGV4dERldjtcbiAgICB9XG5cbiAgICB2YXIgbW91bnRJbWFnZTtcbiAgICBpZiAodHJhbnNhY3Rpb24udXNlQ3JlYXRlRWxlbWVudCkge1xuICAgICAgdmFyIG93bmVyRG9jdW1lbnQgPSBjb250ZXh0W1JlYWN0TW91bnQub3duZXJEb2N1bWVudENvbnRleHRLZXldO1xuICAgICAgdmFyIGVsID0gb3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGUpO1xuICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLnNldEF0dHJpYnV0ZUZvcklEKGVsLCB0aGlzLl9yb290Tm9kZUlEKTtcbiAgICAgIC8vIFBvcHVsYXRlIG5vZGUgY2FjaGVcbiAgICAgIFJlYWN0TW91bnQuZ2V0SUQoZWwpO1xuICAgICAgdGhpcy5fdXBkYXRlRE9NUHJvcGVydGllcyh7fSwgcHJvcHMsIHRyYW5zYWN0aW9uLCBlbCk7XG4gICAgICB0aGlzLl9jcmVhdGVJbml0aWFsQ2hpbGRyZW4odHJhbnNhY3Rpb24sIHByb3BzLCBjb250ZXh0LCBlbCk7XG4gICAgICBtb3VudEltYWdlID0gZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0YWdPcGVuID0gdGhpcy5fY3JlYXRlT3BlblRhZ01hcmt1cEFuZFB1dExpc3RlbmVycyh0cmFuc2FjdGlvbiwgcHJvcHMpO1xuICAgICAgdmFyIHRhZ0NvbnRlbnQgPSB0aGlzLl9jcmVhdGVDb250ZW50TWFya3VwKHRyYW5zYWN0aW9uLCBwcm9wcywgY29udGV4dCk7XG4gICAgICBpZiAoIXRhZ0NvbnRlbnQgJiYgb21pdHRlZENsb3NlVGFnc1t0aGlzLl90YWddKSB7XG4gICAgICAgIG1vdW50SW1hZ2UgPSB0YWdPcGVuICsgJy8+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vdW50SW1hZ2UgPSB0YWdPcGVuICsgJz4nICsgdGFnQ29udGVudCArICc8LycgKyB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlICsgJz4nO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG4gICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUobW91bnRSZWFkeUlucHV0V3JhcHBlciwgdGhpcyk7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlICdidXR0b24nOlxuICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICAgICAgaWYgKHByb3BzLmF1dG9Gb2N1cykge1xuICAgICAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoQXV0b0ZvY3VzVXRpbHMuZm9jdXNET01Db21wb25lbnQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiBtb3VudEltYWdlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG1hcmt1cCBmb3IgdGhlIG9wZW4gdGFnIGFuZCBhbGwgYXR0cmlidXRlcy5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaGFzIHNpZGUgZWZmZWN0cyBiZWNhdXNlIGV2ZW50cyBnZXQgcmVnaXN0ZXJlZC5cbiAgICpcbiAgICogSXRlcmF0aW5nIG92ZXIgb2JqZWN0IHByb3BlcnRpZXMgaXMgZmFzdGVyIHRoYW4gaXRlcmF0aW5nIG92ZXIgYXJyYXlzLlxuICAgKiBAc2VlIGh0dHA6Ly9qc3BlcmYuY29tL29iai12cy1hcnItaXRlcmF0aW9uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgb2Ygb3BlbmluZyB0YWcuXG4gICAqL1xuICBfY3JlYXRlT3BlblRhZ01hcmt1cEFuZFB1dExpc3RlbmVyczogZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBwcm9wcykge1xuICAgIHZhciByZXQgPSAnPCcgKyB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuXG4gICAgZm9yICh2YXIgcHJvcEtleSBpbiBwcm9wcykge1xuICAgICAgaWYgKCFwcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wS2V5XTtcbiAgICAgIGlmIChwcm9wVmFsdWUgPT0gbnVsbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChyZWdpc3RyYXRpb25OYW1lTW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSkge1xuICAgICAgICBpZiAocHJvcFZhbHVlKSB7XG4gICAgICAgICAgZW5xdWV1ZVB1dExpc3RlbmVyKHRoaXMuX3Jvb3ROb2RlSUQsIHByb3BLZXksIHByb3BWYWx1ZSwgdHJhbnNhY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJvcEtleSA9PT0gU1RZTEUpIHtcbiAgICAgICAgICBpZiAocHJvcFZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAvLyBTZWUgYF91cGRhdGVET01Qcm9wZXJ0aWVzYC4gc3R5bGUgYmxvY2tcbiAgICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNTdHlsZSA9IHByb3BWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb3BWYWx1ZSA9IHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5ID0gYXNzaWduKHt9LCBwcm9wcy5zdHlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHByb3BWYWx1ZSA9IENTU1Byb3BlcnR5T3BlcmF0aW9ucy5jcmVhdGVNYXJrdXBGb3JTdHlsZXMocHJvcFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFya3VwID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuX3RhZyAhPSBudWxsICYmIGlzQ3VzdG9tQ29tcG9uZW50KHRoaXMuX3RhZywgcHJvcHMpKSB7XG4gICAgICAgICAgaWYgKHByb3BLZXkgIT09IENISUxEUkVOKSB7XG4gICAgICAgICAgICBtYXJrdXAgPSBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuY3JlYXRlTWFya3VwRm9yQ3VzdG9tQXR0cmlidXRlKHByb3BLZXksIHByb3BWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hcmt1cCA9IERPTVByb3BlcnR5T3BlcmF0aW9ucy5jcmVhdGVNYXJrdXBGb3JQcm9wZXJ0eShwcm9wS2V5LCBwcm9wVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXJrdXApIHtcbiAgICAgICAgICByZXQgKz0gJyAnICsgbWFya3VwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRm9yIHN0YXRpYyBwYWdlcywgbm8gbmVlZCB0byBwdXQgUmVhY3QgSUQgYW5kIGNoZWNrc3VtLiBTYXZlcyBsb3RzIG9mXG4gICAgLy8gYnl0ZXMuXG4gICAgaWYgKHRyYW5zYWN0aW9uLnJlbmRlclRvU3RhdGljTWFya3VwKSB7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIHZhciBtYXJrdXBGb3JJRCA9IERPTVByb3BlcnR5T3BlcmF0aW9ucy5jcmVhdGVNYXJrdXBGb3JJRCh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICByZXR1cm4gcmV0ICsgJyAnICsgbWFya3VwRm9ySUQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgbWFya3VwIGZvciB0aGUgY29udGVudCBiZXR3ZWVuIHRoZSB0YWdzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtvYmplY3R9IHByb3BzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEByZXR1cm4ge3N0cmluZ30gQ29udGVudCBtYXJrdXAuXG4gICAqL1xuICBfY3JlYXRlQ29udGVudE1hcmt1cDogZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBwcm9wcywgY29udGV4dCkge1xuICAgIHZhciByZXQgPSAnJztcblxuICAgIC8vIEludGVudGlvbmFsIHVzZSBvZiAhPSB0byBhdm9pZCBjYXRjaGluZyB6ZXJvL2ZhbHNlLlxuICAgIHZhciBpbm5lckhUTUwgPSBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTDtcbiAgICBpZiAoaW5uZXJIVE1MICE9IG51bGwpIHtcbiAgICAgIGlmIChpbm5lckhUTUwuX19odG1sICE9IG51bGwpIHtcbiAgICAgICAgcmV0ID0gaW5uZXJIVE1MLl9faHRtbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGNvbnRlbnRUb1VzZSA9IENPTlRFTlRfVFlQRVNbdHlwZW9mIHByb3BzLmNoaWxkcmVuXSA/IHByb3BzLmNoaWxkcmVuIDogbnVsbDtcbiAgICAgIHZhciBjaGlsZHJlblRvVXNlID0gY29udGVudFRvVXNlICE9IG51bGwgPyBudWxsIDogcHJvcHMuY2hpbGRyZW47XG4gICAgICBpZiAoY29udGVudFRvVXNlICE9IG51bGwpIHtcbiAgICAgICAgLy8gVE9ETzogVmFsaWRhdGUgdGhhdCB0ZXh0IGlzIGFsbG93ZWQgYXMgYSBjaGlsZCBvZiB0aGlzIG5vZGVcbiAgICAgICAgcmV0ID0gZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKGNvbnRlbnRUb1VzZSk7XG4gICAgICB9IGVsc2UgaWYgKGNoaWxkcmVuVG9Vc2UgIT0gbnVsbCkge1xuICAgICAgICB2YXIgbW91bnRJbWFnZXMgPSB0aGlzLm1vdW50Q2hpbGRyZW4oY2hpbGRyZW5Ub1VzZSwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICByZXQgPSBtb3VudEltYWdlcy5qb2luKCcnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5ld2xpbmVFYXRpbmdUYWdzW3RoaXMuX3RhZ10gJiYgcmV0LmNoYXJBdCgwKSA9PT0gJ1xcbicpIHtcbiAgICAgIC8vIHRleHQvaHRtbCBpZ25vcmVzIHRoZSBmaXJzdCBjaGFyYWN0ZXIgaW4gdGhlc2UgdGFncyBpZiBpdCdzIGEgbmV3bGluZVxuICAgICAgLy8gUHJlZmVyIHRvIGJyZWFrIGFwcGxpY2F0aW9uL3htbCBvdmVyIHRleHQvaHRtbCAoZm9yIG5vdykgYnkgYWRkaW5nXG4gICAgICAvLyBhIG5ld2xpbmUgc3BlY2lmaWNhbGx5IHRvIGdldCBlYXRlbiBieSB0aGUgcGFyc2VyLiAoQWx0ZXJuYXRlbHkgZm9yXG4gICAgICAvLyB0ZXh0YXJlYXMsIHJlcGxhY2luZyBcIl5cXG5cIiB3aXRoIFwiXFxyXFxuXCIgZG9lc24ndCBnZXQgZWF0ZW4sIGFuZCB0aGUgZmlyc3RcbiAgICAgIC8vIFxcciBpcyBub3JtYWxpemVkIG91dCBieSBIVE1MVGV4dEFyZWFFbGVtZW50I3ZhbHVlLilcbiAgICAgIC8vIFNlZTogPGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWwtcG9seWdsb3QvI25ld2xpbmVzLWluLXRleHRhcmVhLWFuZC1wcmU+XG4gICAgICAvLyBTZWU6IDxodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9zeW50YXguaHRtbCNlbGVtZW50LXJlc3RyaWN0aW9ucz5cbiAgICAgIC8vIFNlZTogPGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L3N5bnRheC5odG1sI25ld2xpbmVzPlxuICAgICAgLy8gU2VlOiBQYXJzaW5nIG9mIFwidGV4dGFyZWFcIiBcImxpc3RpbmdcIiBhbmQgXCJwcmVcIiBlbGVtZW50c1xuICAgICAgLy8gIGZyb20gPGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmJvZHk+XG4gICAgICByZXR1cm4gJ1xcbicgKyByZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICB9LFxuXG4gIF9jcmVhdGVJbml0aWFsQ2hpbGRyZW46IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcHJvcHMsIGNvbnRleHQsIGVsKSB7XG4gICAgLy8gSW50ZW50aW9uYWwgdXNlIG9mICE9IHRvIGF2b2lkIGNhdGNoaW5nIHplcm8vZmFsc2UuXG4gICAgdmFyIGlubmVySFRNTCA9IHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MO1xuICAgIGlmIChpbm5lckhUTUwgIT0gbnVsbCkge1xuICAgICAgaWYgKGlubmVySFRNTC5fX2h0bWwgIT0gbnVsbCkge1xuICAgICAgICBzZXRJbm5lckhUTUwoZWwsIGlubmVySFRNTC5fX2h0bWwpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY29udGVudFRvVXNlID0gQ09OVEVOVF9UWVBFU1t0eXBlb2YgcHJvcHMuY2hpbGRyZW5dID8gcHJvcHMuY2hpbGRyZW4gOiBudWxsO1xuICAgICAgdmFyIGNoaWxkcmVuVG9Vc2UgPSBjb250ZW50VG9Vc2UgIT0gbnVsbCA/IG51bGwgOiBwcm9wcy5jaGlsZHJlbjtcbiAgICAgIGlmIChjb250ZW50VG9Vc2UgIT0gbnVsbCkge1xuICAgICAgICAvLyBUT0RPOiBWYWxpZGF0ZSB0aGF0IHRleHQgaXMgYWxsb3dlZCBhcyBhIGNoaWxkIG9mIHRoaXMgbm9kZVxuICAgICAgICBzZXRUZXh0Q29udGVudChlbCwgY29udGVudFRvVXNlKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hpbGRyZW5Ub1VzZSAhPSBudWxsKSB7XG4gICAgICAgIHZhciBtb3VudEltYWdlcyA9IHRoaXMubW91bnRDaGlsZHJlbihjaGlsZHJlblRvVXNlLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW91bnRJbWFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBlbC5hcHBlbmRDaGlsZChtb3VudEltYWdlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlY2VpdmVzIGEgbmV4dCBlbGVtZW50IGFuZCB1cGRhdGVzIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnRcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqL1xuICByZWNlaXZlQ29tcG9uZW50OiBmdW5jdGlvbiAobmV4dEVsZW1lbnQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdmFyIHByZXZFbGVtZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQ7XG4gICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBuZXh0RWxlbWVudDtcbiAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudCh0cmFuc2FjdGlvbiwgcHJldkVsZW1lbnQsIG5leHRFbGVtZW50LCBjb250ZXh0KTtcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlcyBhIG5hdGl2ZSBET00gY29tcG9uZW50IGFmdGVyIGl0IGhhcyBhbHJlYWR5IGJlZW4gYWxsb2NhdGVkIGFuZFxuICAgKiBhdHRhY2hlZCB0byB0aGUgRE9NLiBSZWNvbmNpbGVzIHRoZSByb290IERPTSBub2RlLCB0aGVuIHJlY3Vyc2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBwcmV2RWxlbWVudFxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnRcbiAgICogQGludGVybmFsXG4gICAqIEBvdmVycmlkYWJsZVxuICAgKi9cbiAgdXBkYXRlQ29tcG9uZW50OiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCwgY29udGV4dCkge1xuICAgIHZhciBsYXN0UHJvcHMgPSBwcmV2RWxlbWVudC5wcm9wcztcbiAgICB2YXIgbmV4dFByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cbiAgICBzd2l0Y2ggKHRoaXMuX3RhZykge1xuICAgICAgY2FzZSAnYnV0dG9uJzpcbiAgICAgICAgbGFzdFByb3BzID0gUmVhY3RET01CdXR0b24uZ2V0TmF0aXZlUHJvcHModGhpcywgbGFzdFByb3BzKTtcbiAgICAgICAgbmV4dFByb3BzID0gUmVhY3RET01CdXR0b24uZ2V0TmF0aXZlUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgIFJlYWN0RE9NSW5wdXQudXBkYXRlV3JhcHBlcih0aGlzKTtcbiAgICAgICAgbGFzdFByb3BzID0gUmVhY3RET01JbnB1dC5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTUlucHV0LmdldE5hdGl2ZVByb3BzKHRoaXMsIG5leHRQcm9wcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb3B0aW9uJzpcbiAgICAgICAgbGFzdFByb3BzID0gUmVhY3RET01PcHRpb24uZ2V0TmF0aXZlUHJvcHModGhpcywgbGFzdFByb3BzKTtcbiAgICAgICAgbmV4dFByb3BzID0gUmVhY3RET01PcHRpb24uZ2V0TmF0aXZlUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTVNlbGVjdC5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTVNlbGVjdC5nZXROYXRpdmVQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICAgICAgUmVhY3RET01UZXh0YXJlYS51cGRhdGVXcmFwcGVyKHRoaXMpO1xuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTVRleHRhcmVhLmdldE5hdGl2ZVByb3BzKHRoaXMsIGxhc3RQcm9wcyk7XG4gICAgICAgIG5leHRQcm9wcyA9IFJlYWN0RE9NVGV4dGFyZWEuZ2V0TmF0aXZlUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIElmIHRoZSBjb250ZXh0IGlzIHJlZmVyZW5jZS1lcXVhbCB0byB0aGUgb2xkIG9uZSwgcGFzcyBkb3duIHRoZSBzYW1lXG4gICAgICAvLyBwcm9jZXNzZWQgb2JqZWN0IHNvIHRoZSB1cGRhdGUgYmFpbG91dCBpbiBSZWFjdFJlY29uY2lsZXIgYmVoYXZlc1xuICAgICAgLy8gY29ycmVjdGx5IChhbmQgaWRlbnRpY2FsbHkgaW4gZGV2IGFuZCBwcm9kKS4gU2VlICM1MDA1LlxuICAgICAgaWYgKHRoaXMuX3VucHJvY2Vzc2VkQ29udGV4dERldiAhPT0gY29udGV4dCkge1xuICAgICAgICB0aGlzLl91bnByb2Nlc3NlZENvbnRleHREZXYgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2ID0gcHJvY2Vzc0NoaWxkQ29udGV4dERldihjb250ZXh0LCB0aGlzKTtcbiAgICAgIH1cbiAgICAgIGNvbnRleHQgPSB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2O1xuICAgIH1cblxuICAgIGFzc2VydFZhbGlkUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICB0aGlzLl91cGRhdGVET01Qcm9wZXJ0aWVzKGxhc3RQcm9wcywgbmV4dFByb3BzLCB0cmFuc2FjdGlvbiwgbnVsbCk7XG4gICAgdGhpcy5fdXBkYXRlRE9NQ2hpbGRyZW4obGFzdFByb3BzLCBuZXh0UHJvcHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcblxuICAgIGlmICghY2FuRGVmaW5lUHJvcGVydHkgJiYgdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzKSB7XG4gICAgICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMucHJvcHMgPSBuZXh0UHJvcHM7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3RhZyA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgIC8vIDxzZWxlY3Q+IHZhbHVlIHVwZGF0ZSBuZWVkcyB0byBvY2N1ciBhZnRlciA8b3B0aW9uPiBjaGlsZHJlblxuICAgICAgLy8gcmVjb25jaWxpYXRpb25cbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUocG9zdFVwZGF0ZVNlbGVjdFdyYXBwZXIsIHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVjb25jaWxlcyB0aGUgcHJvcGVydGllcyBieSBkZXRlY3RpbmcgZGlmZmVyZW5jZXMgaW4gcHJvcGVydHkgdmFsdWVzIGFuZFxuICAgKiB1cGRhdGluZyB0aGUgRE9NIGFzIG5lY2Vzc2FyeS4gVGhpcyBmdW5jdGlvbiBpcyBwcm9iYWJseSB0aGUgc2luZ2xlIG1vc3RcbiAgICogY3JpdGljYWwgcGF0aCBmb3IgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uLlxuICAgKlxuICAgKiBUT0RPOiBCZW5jaG1hcmsgd2hldGhlciBjaGVja2luZyBmb3IgY2hhbmdlZCB2YWx1ZXMgaW4gbWVtb3J5IGFjdHVhbGx5XG4gICAqICAgICAgIGltcHJvdmVzIHBlcmZvcm1hbmNlIChlc3BlY2lhbGx5IHN0YXRpY2FsbHkgcG9zaXRpb25lZCBlbGVtZW50cykuXG4gICAqIFRPRE86IEJlbmNobWFyayB0aGUgZWZmZWN0cyBvZiBwdXR0aW5nIHRoaXMgYXQgdGhlIHRvcCBzaW5jZSA5OSUgb2YgcHJvcHNcbiAgICogICAgICAgZG8gbm90IGNoYW5nZSBmb3IgYSBnaXZlbiByZWNvbmNpbGlhdGlvbi5cbiAgICogVE9ETzogQmVuY2htYXJrIGFyZWFzIHRoYXQgY2FuIGJlIGltcHJvdmVkIHdpdGggY2FjaGluZy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtvYmplY3R9IGxhc3RQcm9wc1xuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHs/RE9NRWxlbWVudH0gbm9kZVxuICAgKi9cbiAgX3VwZGF0ZURPTVByb3BlcnRpZXM6IGZ1bmN0aW9uIChsYXN0UHJvcHMsIG5leHRQcm9wcywgdHJhbnNhY3Rpb24sIG5vZGUpIHtcbiAgICB2YXIgcHJvcEtleTtcbiAgICB2YXIgc3R5bGVOYW1lO1xuICAgIHZhciBzdHlsZVVwZGF0ZXM7XG4gICAgZm9yIChwcm9wS2V5IGluIGxhc3RQcm9wcykge1xuICAgICAgaWYgKG5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSB8fCAhbGFzdFByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BLZXkgPT09IFNUWUxFKSB7XG4gICAgICAgIHZhciBsYXN0U3R5bGUgPSB0aGlzLl9wcmV2aW91c1N0eWxlQ29weTtcbiAgICAgICAgZm9yIChzdHlsZU5hbWUgaW4gbGFzdFN0eWxlKSB7XG4gICAgICAgICAgaWYgKGxhc3RTdHlsZS5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpKSB7XG4gICAgICAgICAgICBzdHlsZVVwZGF0ZXMgPSBzdHlsZVVwZGF0ZXMgfHwge307XG4gICAgICAgICAgICBzdHlsZVVwZGF0ZXNbc3R5bGVOYW1lXSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlQ29weSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGlmIChsYXN0UHJvcHNbcHJvcEtleV0pIHtcbiAgICAgICAgICAvLyBPbmx5IGNhbGwgZGVsZXRlTGlzdGVuZXIgaWYgdGhlcmUgd2FzIGEgbGlzdGVuZXIgcHJldmlvdXNseSBvclxuICAgICAgICAgIC8vIGVsc2Ugd2lsbERlbGV0ZUxpc3RlbmVyIGdldHMgY2FsbGVkIHdoZW4gdGhlcmUgd2Fzbid0IGFjdHVhbGx5IGFcbiAgICAgICAgICAvLyBsaXN0ZW5lciAoZS5nLiwgb25DbGljaz17bnVsbH0pXG4gICAgICAgICAgZGVsZXRlTGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoRE9NUHJvcGVydHkucHJvcGVydGllc1twcm9wS2V5XSB8fCBET01Qcm9wZXJ0eS5pc0N1c3RvbUF0dHJpYnV0ZShwcm9wS2V5KSkge1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgICAgICB9XG4gICAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5kZWxldGVWYWx1ZUZvclByb3BlcnR5KG5vZGUsIHByb3BLZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHByb3BLZXkgaW4gbmV4dFByb3BzKSB7XG4gICAgICB2YXIgbmV4dFByb3AgPSBuZXh0UHJvcHNbcHJvcEtleV07XG4gICAgICB2YXIgbGFzdFByb3AgPSBwcm9wS2V5ID09PSBTVFlMRSA/IHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5IDogbGFzdFByb3BzW3Byb3BLZXldO1xuICAgICAgaWYgKCFuZXh0UHJvcHMuaGFzT3duUHJvcGVydHkocHJvcEtleSkgfHwgbmV4dFByb3AgPT09IGxhc3RQcm9wKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BLZXkgPT09IFNUWUxFKSB7XG4gICAgICAgIGlmIChuZXh0UHJvcCkge1xuICAgICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBjaGVja0FuZFdhcm5Gb3JNdXRhdGVkU3R5bGUodGhpcy5fcHJldmlvdXNTdHlsZUNvcHksIHRoaXMuX3ByZXZpb3VzU3R5bGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNTdHlsZSA9IG5leHRQcm9wO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXh0UHJvcCA9IHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5ID0gYXNzaWduKHt9LCBuZXh0UHJvcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0UHJvcCkge1xuICAgICAgICAgIC8vIFVuc2V0IHN0eWxlcyBvbiBgbGFzdFByb3BgIGJ1dCBub3Qgb24gYG5leHRQcm9wYC5cbiAgICAgICAgICBmb3IgKHN0eWxlTmFtZSBpbiBsYXN0UHJvcCkge1xuICAgICAgICAgICAgaWYgKGxhc3RQcm9wLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkgJiYgKCFuZXh0UHJvcCB8fCAhbmV4dFByb3AuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSkpIHtcbiAgICAgICAgICAgICAgc3R5bGVVcGRhdGVzID0gc3R5bGVVcGRhdGVzIHx8IHt9O1xuICAgICAgICAgICAgICBzdHlsZVVwZGF0ZXNbc3R5bGVOYW1lXSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBVcGRhdGUgc3R5bGVzIHRoYXQgY2hhbmdlZCBzaW5jZSBgbGFzdFByb3BgLlxuICAgICAgICAgIGZvciAoc3R5bGVOYW1lIGluIG5leHRQcm9wKSB7XG4gICAgICAgICAgICBpZiAobmV4dFByb3AuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSAmJiBsYXN0UHJvcFtzdHlsZU5hbWVdICE9PSBuZXh0UHJvcFtzdHlsZU5hbWVdKSB7XG4gICAgICAgICAgICAgIHN0eWxlVXBkYXRlcyA9IHN0eWxlVXBkYXRlcyB8fCB7fTtcbiAgICAgICAgICAgICAgc3R5bGVVcGRhdGVzW3N0eWxlTmFtZV0gPSBuZXh0UHJvcFtzdHlsZU5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZWxpZXMgb24gYHVwZGF0ZVN0eWxlc0J5SURgIG5vdCBtdXRhdGluZyBgc3R5bGVVcGRhdGVzYC5cbiAgICAgICAgICBzdHlsZVVwZGF0ZXMgPSBuZXh0UHJvcDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZWdpc3RyYXRpb25OYW1lTW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSkge1xuICAgICAgICBpZiAobmV4dFByb3ApIHtcbiAgICAgICAgICBlbnF1ZXVlUHV0TGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSwgbmV4dFByb3AsIHRyYW5zYWN0aW9uKTtcbiAgICAgICAgfSBlbHNlIGlmIChsYXN0UHJvcCkge1xuICAgICAgICAgIGRlbGV0ZUxpc3RlbmVyKHRoaXMuX3Jvb3ROb2RlSUQsIHByb3BLZXkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzQ3VzdG9tQ29tcG9uZW50KHRoaXMuX3RhZywgbmV4dFByb3BzKSkge1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wS2V5ID09PSBDSElMRFJFTikge1xuICAgICAgICAgIG5leHRQcm9wID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JBdHRyaWJ1dGUobm9kZSwgcHJvcEtleSwgbmV4dFByb3ApO1xuICAgICAgfSBlbHNlIGlmIChET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW3Byb3BLZXldIHx8IERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKHByb3BLZXkpKSB7XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2UncmUgdXBkYXRpbmcgdG8gbnVsbCBvciB1bmRlZmluZWQsIHdlIHNob3VsZCByZW1vdmUgdGhlIHByb3BlcnR5XG4gICAgICAgIC8vIGZyb20gdGhlIERPTSBub2RlIGluc3RlYWQgb2YgaW5hZHZlcnRhbnRseSBzZXR0aW5nIHRvIGEgc3RyaW5nLiBUaGlzXG4gICAgICAgIC8vIGJyaW5ncyB1cyBpbiBsaW5lIHdpdGggdGhlIHNhbWUgYmVoYXZpb3Igd2UgaGF2ZSBvbiBpbml0aWFsIHJlbmRlci5cbiAgICAgICAgaWYgKG5leHRQcm9wICE9IG51bGwpIHtcbiAgICAgICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JQcm9wZXJ0eShub2RlLCBwcm9wS2V5LCBuZXh0UHJvcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLmRlbGV0ZVZhbHVlRm9yUHJvcGVydHkobm9kZSwgcHJvcEtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHN0eWxlVXBkYXRlcykge1xuICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICB9XG4gICAgICBDU1NQcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JTdHlsZXMobm9kZSwgc3R5bGVVcGRhdGVzKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlY29uY2lsZXMgdGhlIGNoaWxkcmVuIHdpdGggdGhlIHZhcmlvdXMgcHJvcGVydGllcyB0aGF0IGFmZmVjdCB0aGVcbiAgICogY2hpbGRyZW4gY29udGVudC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGxhc3RQcm9wc1xuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICovXG4gIF91cGRhdGVET01DaGlsZHJlbjogZnVuY3Rpb24gKGxhc3RQcm9wcywgbmV4dFByb3BzLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHZhciBsYXN0Q29udGVudCA9IENPTlRFTlRfVFlQRVNbdHlwZW9mIGxhc3RQcm9wcy5jaGlsZHJlbl0gPyBsYXN0UHJvcHMuY2hpbGRyZW4gOiBudWxsO1xuICAgIHZhciBuZXh0Q29udGVudCA9IENPTlRFTlRfVFlQRVNbdHlwZW9mIG5leHRQcm9wcy5jaGlsZHJlbl0gPyBuZXh0UHJvcHMuY2hpbGRyZW4gOiBudWxsO1xuXG4gICAgdmFyIGxhc3RIdG1sID0gbGFzdFByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MICYmIGxhc3RQcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTC5fX2h0bWw7XG4gICAgdmFyIG5leHRIdG1sID0gbmV4dFByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MICYmIG5leHRQcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTC5fX2h0bWw7XG5cbiAgICAvLyBOb3RlIHRoZSB1c2Ugb2YgYCE9YCB3aGljaCBjaGVja3MgZm9yIG51bGwgb3IgdW5kZWZpbmVkLlxuICAgIHZhciBsYXN0Q2hpbGRyZW4gPSBsYXN0Q29udGVudCAhPSBudWxsID8gbnVsbCA6IGxhc3RQcm9wcy5jaGlsZHJlbjtcbiAgICB2YXIgbmV4dENoaWxkcmVuID0gbmV4dENvbnRlbnQgIT0gbnVsbCA/IG51bGwgOiBuZXh0UHJvcHMuY2hpbGRyZW47XG5cbiAgICAvLyBJZiB3ZSdyZSBzd2l0Y2hpbmcgZnJvbSBjaGlsZHJlbiB0byBjb250ZW50L2h0bWwgb3IgdmljZSB2ZXJzYSwgcmVtb3ZlXG4gICAgLy8gdGhlIG9sZCBjb250ZW50XG4gICAgdmFyIGxhc3RIYXNDb250ZW50T3JIdG1sID0gbGFzdENvbnRlbnQgIT0gbnVsbCB8fCBsYXN0SHRtbCAhPSBudWxsO1xuICAgIHZhciBuZXh0SGFzQ29udGVudE9ySHRtbCA9IG5leHRDb250ZW50ICE9IG51bGwgfHwgbmV4dEh0bWwgIT0gbnVsbDtcbiAgICBpZiAobGFzdENoaWxkcmVuICE9IG51bGwgJiYgbmV4dENoaWxkcmVuID09IG51bGwpIHtcbiAgICAgIHRoaXMudXBkYXRlQ2hpbGRyZW4obnVsbCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgIH0gZWxzZSBpZiAobGFzdEhhc0NvbnRlbnRPckh0bWwgJiYgIW5leHRIYXNDb250ZW50T3JIdG1sKSB7XG4gICAgICB0aGlzLnVwZGF0ZVRleHRDb250ZW50KCcnKTtcbiAgICB9XG5cbiAgICBpZiAobmV4dENvbnRlbnQgIT0gbnVsbCkge1xuICAgICAgaWYgKGxhc3RDb250ZW50ICE9PSBuZXh0Q29udGVudCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRleHRDb250ZW50KCcnICsgbmV4dENvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobmV4dEh0bWwgIT0gbnVsbCkge1xuICAgICAgaWYgKGxhc3RIdG1sICE9PSBuZXh0SHRtbCkge1xuICAgICAgICB0aGlzLnVwZGF0ZU1hcmt1cCgnJyArIG5leHRIdG1sKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG5leHRDaGlsZHJlbiAhPSBudWxsKSB7XG4gICAgICB0aGlzLnVwZGF0ZUNoaWxkcmVuKG5leHRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGVzdHJveXMgYWxsIGV2ZW50IHJlZ2lzdHJhdGlvbnMgZm9yIHRoaXMgaW5zdGFuY2UuIERvZXMgbm90IHJlbW92ZSBmcm9tXG4gICAqIHRoZSBET00uIFRoYXQgbXVzdCBiZSBkb25lIGJ5IHRoZSBwYXJlbnQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdW5tb3VudENvbXBvbmVudDogZnVuY3Rpb24gKCkge1xuICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG4gICAgICBjYXNlICdpZnJhbWUnOlxuICAgICAgY2FzZSAnaW1nJzpcbiAgICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgY2FzZSAndmlkZW8nOlxuICAgICAgY2FzZSAnYXVkaW8nOlxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fd3JhcHBlclN0YXRlLmxpc3RlbmVycztcbiAgICAgICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNbaV0ucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICBSZWFjdERPTUlucHV0LnVubW91bnRXcmFwcGVyKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2h0bWwnOlxuICAgICAgY2FzZSAnaGVhZCc6XG4gICAgICBjYXNlICdib2R5JzpcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbXBvbmVudHMgbGlrZSA8aHRtbD4gPGhlYWQ+IGFuZCA8Ym9keT4gY2FuJ3QgYmUgcmVtb3ZlZCBvciBhZGRlZFxuICAgICAgICAgKiBlYXNpbHkgaW4gYSBjcm9zcy1icm93c2VyIHdheSwgaG93ZXZlciBpdCdzIHZhbHVhYmxlIHRvIGJlIGFibGUgdG9cbiAgICAgICAgICogdGFrZSBhZHZhbnRhZ2Ugb2YgUmVhY3QncyByZWNvbmNpbGlhdGlvbiBmb3Igc3R5bGluZyBhbmQgPHRpdGxlPlxuICAgICAgICAgKiBtYW5hZ2VtZW50LiBTbyB3ZSBqdXN0IGRvY3VtZW50IGl0IGFuZCB0aHJvdyBpbiBkYW5nZXJvdXMgY2FzZXMuXG4gICAgICAgICAqL1xuICAgICAgICAhZmFsc2UgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnPCVzPiB0cmllZCB0byB1bm1vdW50LiBCZWNhdXNlIG9mIGNyb3NzLWJyb3dzZXIgcXVpcmtzIGl0IGlzICcgKyAnaW1wb3NzaWJsZSB0byB1bm1vdW50IHNvbWUgdG9wLWxldmVsIGNvbXBvbmVudHMgKGVnIDxodG1sPiwgJyArICc8aGVhZD4sIGFuZCA8Ym9keT4pIHJlbGlhYmx5IGFuZCBlZmZpY2llbnRseS4gVG8gZml4IHRoaXMsIGhhdmUgYSAnICsgJ3NpbmdsZSB0b3AtbGV2ZWwgY29tcG9uZW50IHRoYXQgbmV2ZXIgdW5tb3VudHMgcmVuZGVyIHRoZXNlICcgKyAnZWxlbWVudHMuJywgdGhpcy5fdGFnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMudW5tb3VudENoaWxkcmVuKCk7XG4gICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmRlbGV0ZUFsbExpc3RlbmVycyh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudC51bm1vdW50SURGcm9tRW52aXJvbm1lbnQodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IG51bGw7XG4gICAgdGhpcy5fd3JhcHBlclN0YXRlID0gbnVsbDtcbiAgICBpZiAodGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzKSB7XG4gICAgICB2YXIgbm9kZSA9IHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcztcbiAgICAgIG5vZGUuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQgPSBudWxsO1xuICAgICAgdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzID0gbnVsbDtcbiAgICB9XG4gIH0sXG5cbiAgZ2V0UHVibGljSW5zdGFuY2U6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcykge1xuICAgICAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG5cbiAgICAgIG5vZGUuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQgPSB0aGlzO1xuICAgICAgbm9kZS5nZXRET01Ob2RlID0gbGVnYWN5R2V0RE9NTm9kZTtcbiAgICAgIG5vZGUuaXNNb3VudGVkID0gbGVnYWN5SXNNb3VudGVkO1xuICAgICAgbm9kZS5zZXRTdGF0ZSA9IGxlZ2FjeVNldFN0YXRlRXRjO1xuICAgICAgbm9kZS5yZXBsYWNlU3RhdGUgPSBsZWdhY3lTZXRTdGF0ZUV0YztcbiAgICAgIG5vZGUuZm9yY2VVcGRhdGUgPSBsZWdhY3lTZXRTdGF0ZUV0YztcbiAgICAgIG5vZGUuc2V0UHJvcHMgPSBsZWdhY3lTZXRQcm9wcztcbiAgICAgIG5vZGUucmVwbGFjZVByb3BzID0gbGVnYWN5UmVwbGFjZVByb3BzO1xuXG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhub2RlLCBsZWdhY3lQcm9wc0Rlc2NyaXB0b3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHVwZGF0ZUNvbXBvbmVudCB3aWxsIHVwZGF0ZSB0aGlzIHByb3BlcnR5IG9uIHN1YnNlcXVlbnQgcmVuZGVyc1xuICAgICAgICAgIG5vZGUucHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdXBkYXRlQ29tcG9uZW50IHdpbGwgdXBkYXRlIHRoaXMgcHJvcGVydHkgb24gc3Vic2VxdWVudCByZW5kZXJzXG4gICAgICAgIG5vZGUucHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICAgIH1cblxuICAgICAgdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzID0gbm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcztcbiAgfVxuXG59O1xuXG5SZWFjdFBlcmYubWVhc3VyZU1ldGhvZHMoUmVhY3RET01Db21wb25lbnQsICdSZWFjdERPTUNvbXBvbmVudCcsIHtcbiAgbW91bnRDb21wb25lbnQ6ICdtb3VudENvbXBvbmVudCcsXG4gIHVwZGF0ZUNvbXBvbmVudDogJ3VwZGF0ZUNvbXBvbmVudCdcbn0pO1xuXG5hc3NpZ24oUmVhY3RET01Db21wb25lbnQucHJvdG90eXBlLCBSZWFjdERPTUNvbXBvbmVudC5NaXhpbiwgUmVhY3RNdWx0aUNoaWxkLk1peGluKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUNvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01GYWN0b3JpZXNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEVsZW1lbnRWYWxpZGF0b3IgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudFZhbGlkYXRvcicpO1xuXG52YXIgbWFwT2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvbWFwT2JqZWN0Jyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgZmFjdG9yeSB0aGF0IGNyZWF0ZXMgSFRNTCB0YWcgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRhZyBUYWcgbmFtZSAoZS5nLiBgZGl2YCkuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVET01GYWN0b3J5KHRhZykge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHJldHVybiBSZWFjdEVsZW1lbnRWYWxpZGF0b3IuY3JlYXRlRmFjdG9yeSh0YWcpO1xuICB9XG4gIHJldHVybiBSZWFjdEVsZW1lbnQuY3JlYXRlRmFjdG9yeSh0YWcpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBtYXBwaW5nIGZyb20gc3VwcG9ydGVkIEhUTUwgdGFncyB0byBgUmVhY3RET01Db21wb25lbnRgIGNsYXNzZXMuXG4gKiBUaGlzIGlzIGFsc28gYWNjZXNzaWJsZSB2aWEgYFJlYWN0LkRPTWAuXG4gKlxuICogQHB1YmxpY1xuICovXG52YXIgUmVhY3RET01GYWN0b3JpZXMgPSBtYXBPYmplY3Qoe1xuICBhOiAnYScsXG4gIGFiYnI6ICdhYmJyJyxcbiAgYWRkcmVzczogJ2FkZHJlc3MnLFxuICBhcmVhOiAnYXJlYScsXG4gIGFydGljbGU6ICdhcnRpY2xlJyxcbiAgYXNpZGU6ICdhc2lkZScsXG4gIGF1ZGlvOiAnYXVkaW8nLFxuICBiOiAnYicsXG4gIGJhc2U6ICdiYXNlJyxcbiAgYmRpOiAnYmRpJyxcbiAgYmRvOiAnYmRvJyxcbiAgYmlnOiAnYmlnJyxcbiAgYmxvY2txdW90ZTogJ2Jsb2NrcXVvdGUnLFxuICBib2R5OiAnYm9keScsXG4gIGJyOiAnYnInLFxuICBidXR0b246ICdidXR0b24nLFxuICBjYW52YXM6ICdjYW52YXMnLFxuICBjYXB0aW9uOiAnY2FwdGlvbicsXG4gIGNpdGU6ICdjaXRlJyxcbiAgY29kZTogJ2NvZGUnLFxuICBjb2w6ICdjb2wnLFxuICBjb2xncm91cDogJ2NvbGdyb3VwJyxcbiAgZGF0YTogJ2RhdGEnLFxuICBkYXRhbGlzdDogJ2RhdGFsaXN0JyxcbiAgZGQ6ICdkZCcsXG4gIGRlbDogJ2RlbCcsXG4gIGRldGFpbHM6ICdkZXRhaWxzJyxcbiAgZGZuOiAnZGZuJyxcbiAgZGlhbG9nOiAnZGlhbG9nJyxcbiAgZGl2OiAnZGl2JyxcbiAgZGw6ICdkbCcsXG4gIGR0OiAnZHQnLFxuICBlbTogJ2VtJyxcbiAgZW1iZWQ6ICdlbWJlZCcsXG4gIGZpZWxkc2V0OiAnZmllbGRzZXQnLFxuICBmaWdjYXB0aW9uOiAnZmlnY2FwdGlvbicsXG4gIGZpZ3VyZTogJ2ZpZ3VyZScsXG4gIGZvb3RlcjogJ2Zvb3RlcicsXG4gIGZvcm06ICdmb3JtJyxcbiAgaDE6ICdoMScsXG4gIGgyOiAnaDInLFxuICBoMzogJ2gzJyxcbiAgaDQ6ICdoNCcsXG4gIGg1OiAnaDUnLFxuICBoNjogJ2g2JyxcbiAgaGVhZDogJ2hlYWQnLFxuICBoZWFkZXI6ICdoZWFkZXInLFxuICBoZ3JvdXA6ICdoZ3JvdXAnLFxuICBocjogJ2hyJyxcbiAgaHRtbDogJ2h0bWwnLFxuICBpOiAnaScsXG4gIGlmcmFtZTogJ2lmcmFtZScsXG4gIGltZzogJ2ltZycsXG4gIGlucHV0OiAnaW5wdXQnLFxuICBpbnM6ICdpbnMnLFxuICBrYmQ6ICdrYmQnLFxuICBrZXlnZW46ICdrZXlnZW4nLFxuICBsYWJlbDogJ2xhYmVsJyxcbiAgbGVnZW5kOiAnbGVnZW5kJyxcbiAgbGk6ICdsaScsXG4gIGxpbms6ICdsaW5rJyxcbiAgbWFpbjogJ21haW4nLFxuICBtYXA6ICdtYXAnLFxuICBtYXJrOiAnbWFyaycsXG4gIG1lbnU6ICdtZW51JyxcbiAgbWVudWl0ZW06ICdtZW51aXRlbScsXG4gIG1ldGE6ICdtZXRhJyxcbiAgbWV0ZXI6ICdtZXRlcicsXG4gIG5hdjogJ25hdicsXG4gIG5vc2NyaXB0OiAnbm9zY3JpcHQnLFxuICBvYmplY3Q6ICdvYmplY3QnLFxuICBvbDogJ29sJyxcbiAgb3B0Z3JvdXA6ICdvcHRncm91cCcsXG4gIG9wdGlvbjogJ29wdGlvbicsXG4gIG91dHB1dDogJ291dHB1dCcsXG4gIHA6ICdwJyxcbiAgcGFyYW06ICdwYXJhbScsXG4gIHBpY3R1cmU6ICdwaWN0dXJlJyxcbiAgcHJlOiAncHJlJyxcbiAgcHJvZ3Jlc3M6ICdwcm9ncmVzcycsXG4gIHE6ICdxJyxcbiAgcnA6ICdycCcsXG4gIHJ0OiAncnQnLFxuICBydWJ5OiAncnVieScsXG4gIHM6ICdzJyxcbiAgc2FtcDogJ3NhbXAnLFxuICBzY3JpcHQ6ICdzY3JpcHQnLFxuICBzZWN0aW9uOiAnc2VjdGlvbicsXG4gIHNlbGVjdDogJ3NlbGVjdCcsXG4gIHNtYWxsOiAnc21hbGwnLFxuICBzb3VyY2U6ICdzb3VyY2UnLFxuICBzcGFuOiAnc3BhbicsXG4gIHN0cm9uZzogJ3N0cm9uZycsXG4gIHN0eWxlOiAnc3R5bGUnLFxuICBzdWI6ICdzdWInLFxuICBzdW1tYXJ5OiAnc3VtbWFyeScsXG4gIHN1cDogJ3N1cCcsXG4gIHRhYmxlOiAndGFibGUnLFxuICB0Ym9keTogJ3Rib2R5JyxcbiAgdGQ6ICd0ZCcsXG4gIHRleHRhcmVhOiAndGV4dGFyZWEnLFxuICB0Zm9vdDogJ3Rmb290JyxcbiAgdGg6ICd0aCcsXG4gIHRoZWFkOiAndGhlYWQnLFxuICB0aW1lOiAndGltZScsXG4gIHRpdGxlOiAndGl0bGUnLFxuICB0cjogJ3RyJyxcbiAgdHJhY2s6ICd0cmFjaycsXG4gIHU6ICd1JyxcbiAgdWw6ICd1bCcsXG4gICd2YXInOiAndmFyJyxcbiAgdmlkZW86ICd2aWRlbycsXG4gIHdicjogJ3dicicsXG5cbiAgLy8gU1ZHXG4gIGNpcmNsZTogJ2NpcmNsZScsXG4gIGNsaXBQYXRoOiAnY2xpcFBhdGgnLFxuICBkZWZzOiAnZGVmcycsXG4gIGVsbGlwc2U6ICdlbGxpcHNlJyxcbiAgZzogJ2cnLFxuICBpbWFnZTogJ2ltYWdlJyxcbiAgbGluZTogJ2xpbmUnLFxuICBsaW5lYXJHcmFkaWVudDogJ2xpbmVhckdyYWRpZW50JyxcbiAgbWFzazogJ21hc2snLFxuICBwYXRoOiAncGF0aCcsXG4gIHBhdHRlcm46ICdwYXR0ZXJuJyxcbiAgcG9seWdvbjogJ3BvbHlnb24nLFxuICBwb2x5bGluZTogJ3BvbHlsaW5lJyxcbiAgcmFkaWFsR3JhZGllbnQ6ICdyYWRpYWxHcmFkaWVudCcsXG4gIHJlY3Q6ICdyZWN0JyxcbiAgc3RvcDogJ3N0b3AnLFxuICBzdmc6ICdzdmcnLFxuICB0ZXh0OiAndGV4dCcsXG4gIHRzcGFuOiAndHNwYW4nXG5cbn0sIGNyZWF0ZURPTUZhY3RvcnkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NRmFjdG9yaWVzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTUZlYXR1cmVGbGFnc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0ge1xuICB1c2VDcmVhdGVFbGVtZW50OiBmYWxzZVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUZlYXR1cmVGbGFnczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01JRE9wZXJhdGlvbnNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NQ2hpbGRyZW5PcGVyYXRpb25zID0gcmVxdWlyZSgnLi9ET01DaGlsZHJlbk9wZXJhdGlvbnMnKTtcbnZhciBET01Qcm9wZXJ0eU9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5T3BlcmF0aW9ucycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogRXJyb3JzIGZvciBwcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIG5vdCBiZSB1cGRhdGVkIHdpdGggYHVwZGF0ZVByb3BlcnR5QnlJRCgpYC5cbiAqXG4gKiBAdHlwZSB7b2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmFyIElOVkFMSURfUFJPUEVSVFlfRVJST1JTID0ge1xuICBkYW5nZXJvdXNseVNldElubmVySFRNTDogJ2BkYW5nZXJvdXNseVNldElubmVySFRNTGAgbXVzdCBiZSBzZXQgdXNpbmcgYHVwZGF0ZUlubmVySFRNTEJ5SUQoKWAuJyxcbiAgc3R5bGU6ICdgc3R5bGVgIG11c3QgYmUgc2V0IHVzaW5nIGB1cGRhdGVTdHlsZXNCeUlEKClgLidcbn07XG5cbi8qKlxuICogT3BlcmF0aW9ucyB1c2VkIHRvIHByb2Nlc3MgdXBkYXRlcyB0byBET00gbm9kZXMuXG4gKi9cbnZhciBSZWFjdERPTUlET3BlcmF0aW9ucyA9IHtcblxuICAvKipcbiAgICogVXBkYXRlcyBhIERPTSBub2RlIHdpdGggbmV3IHByb3BlcnR5IHZhbHVlcy4gVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIHRvXG4gICAqIHVwZGF0ZSBET00gcHJvcGVydGllcyBpbiBgRE9NUHJvcGVydHlgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgdGhlIG5vZGUgdG8gdXBkYXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBBIHZhbGlkIHByb3BlcnR5IG5hbWUsIHNlZSBgRE9NUHJvcGVydHlgLlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIE5ldyB2YWx1ZSBvZiB0aGUgcHJvcGVydHkuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdXBkYXRlUHJvcGVydHlCeUlEOiBmdW5jdGlvbiAoaWQsIG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUoaWQpO1xuICAgICEhSU5WQUxJRF9QUk9QRVJUWV9FUlJPUlMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndXBkYXRlUHJvcGVydHlCeUlEKC4uLik6ICVzJywgSU5WQUxJRF9QUk9QRVJUWV9FUlJPUlNbbmFtZV0pIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIElmIHdlJ3JlIHVwZGF0aW5nIHRvIG51bGwgb3IgdW5kZWZpbmVkLCB3ZSBzaG91bGQgcmVtb3ZlIHRoZSBwcm9wZXJ0eVxuICAgIC8vIGZyb20gdGhlIERPTSBub2RlIGluc3RlYWQgb2YgaW5hZHZlcnRhbnRseSBzZXR0aW5nIHRvIGEgc3RyaW5nLiBUaGlzXG4gICAgLy8gYnJpbmdzIHVzIGluIGxpbmUgd2l0aCB0aGUgc2FtZSBiZWhhdmlvciB3ZSBoYXZlIG9uIGluaXRpYWwgcmVuZGVyLlxuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JQcm9wZXJ0eShub2RlLCBuYW1lLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5kZWxldGVWYWx1ZUZvclByb3BlcnR5KG5vZGUsIG5hbWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYSBET00gbm9kZSB0aGF0IGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQgd2l0aCBtYXJrdXAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiBjaGlsZCB0byBiZSByZXBsYWNlZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBEYW5nZXJvdXMgbWFya3VwIHRvIGluamVjdCBpbiBwbGFjZSBvZiBjaGlsZC5cbiAgICogQGludGVybmFsXG4gICAqIEBzZWUge0Rhbmdlci5kYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cH1cbiAgICovXG4gIGRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDogZnVuY3Rpb24gKGlkLCBtYXJrdXApIHtcbiAgICB2YXIgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZShpZCk7XG4gICAgRE9NQ2hpbGRyZW5PcGVyYXRpb25zLmRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwKG5vZGUsIG1hcmt1cCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSBjb21wb25lbnQncyBjaGlsZHJlbiBieSBwcm9jZXNzaW5nIGEgc2VyaWVzIG9mIHVwZGF0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7YXJyYXk8b2JqZWN0Pn0gdXBkYXRlcyBMaXN0IG9mIHVwZGF0ZSBjb25maWd1cmF0aW9ucy5cbiAgICogQHBhcmFtIHthcnJheTxzdHJpbmc+fSBtYXJrdXAgTGlzdCBvZiBtYXJrdXAgc3RyaW5ncy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBkYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXM6IGZ1bmN0aW9uICh1cGRhdGVzLCBtYXJrdXApIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVwZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHVwZGF0ZXNbaV0ucGFyZW50Tm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh1cGRhdGVzW2ldLnBhcmVudElEKTtcbiAgICB9XG4gICAgRE9NQ2hpbGRyZW5PcGVyYXRpb25zLnByb2Nlc3NVcGRhdGVzKHVwZGF0ZXMsIG1hcmt1cCk7XG4gIH1cbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdERPTUlET3BlcmF0aW9ucywgJ1JlYWN0RE9NSURPcGVyYXRpb25zJywge1xuICBkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQ6ICdkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQnLFxuICBkYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXM6ICdkYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXMnXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUlET3BlcmF0aW9uczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01JbnB1dFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NSURPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9SZWFjdERPTUlET3BlcmF0aW9ucycpO1xudmFyIExpbmtlZFZhbHVlVXRpbHMgPSByZXF1aXJlKCcuL0xpbmtlZFZhbHVlVXRpbHMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgaW5zdGFuY2VzQnlSZWFjdElEID0ge307XG5cbmZ1bmN0aW9uIGZvcmNlVXBkYXRlSWZNb3VudGVkKCkge1xuICBpZiAodGhpcy5fcm9vdE5vZGVJRCkge1xuICAgIC8vIERPTSBjb21wb25lbnQgaXMgc3RpbGwgbW91bnRlZDsgdXBkYXRlXG4gICAgUmVhY3RET01JbnB1dC51cGRhdGVXcmFwcGVyKHRoaXMpO1xuICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyBhbiA8aW5wdXQ+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCBhbGxvd3Mgc2V0dGluZyB0aGVzZSBvcHRpb25hbFxuICogcHJvcHM6IGBjaGVja2VkYCwgYHZhbHVlYCwgYGRlZmF1bHRDaGVja2VkYCwgYW5kIGBkZWZhdWx0VmFsdWVgLlxuICpcbiAqIElmIGBjaGVja2VkYCBvciBgdmFsdWVgIGFyZSBub3Qgc3VwcGxpZWQgKG9yIG51bGwvdW5kZWZpbmVkKSwgdXNlciBhY3Rpb25zXG4gKiB0aGF0IGFmZmVjdCB0aGUgY2hlY2tlZCBzdGF0ZSBvciB2YWx1ZSB3aWxsIHRyaWdnZXIgdXBkYXRlcyB0byB0aGUgZWxlbWVudC5cbiAqXG4gKiBJZiB0aGV5IGFyZSBzdXBwbGllZCAoYW5kIG5vdCBudWxsL3VuZGVmaW5lZCksIHRoZSByZW5kZXJlZCBlbGVtZW50IHdpbGwgbm90XG4gKiB0cmlnZ2VyIHVwZGF0ZXMgdG8gdGhlIGVsZW1lbnQuIEluc3RlYWQsIHRoZSBwcm9wcyBtdXN0IGNoYW5nZSBpbiBvcmRlciBmb3JcbiAqIHRoZSByZW5kZXJlZCBlbGVtZW50IHRvIGJlIHVwZGF0ZWQuXG4gKlxuICogVGhlIHJlbmRlcmVkIGVsZW1lbnQgd2lsbCBiZSBpbml0aWFsaXplZCBhcyB1bmNoZWNrZWQgKG9yIGBkZWZhdWx0Q2hlY2tlZGApXG4gKiB3aXRoIGFuIGVtcHR5IHZhbHVlIChvciBgZGVmYXVsdFZhbHVlYCkuXG4gKlxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDEyL1dELWh0bWw1LTIwMTIxMDI1L3RoZS1pbnB1dC1lbGVtZW50Lmh0bWxcbiAqL1xudmFyIFJlYWN0RE9NSW5wdXQgPSB7XG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICB2YXIgY2hlY2tlZCA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0Q2hlY2tlZChwcm9wcyk7XG5cbiAgICB2YXIgbmF0aXZlUHJvcHMgPSBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICBkZWZhdWx0Q2hlY2tlZDogdW5kZWZpbmVkLFxuICAgICAgZGVmYXVsdFZhbHVlOiB1bmRlZmluZWQsXG4gICAgICB2YWx1ZTogdmFsdWUgIT0gbnVsbCA/IHZhbHVlIDogaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSxcbiAgICAgIGNoZWNrZWQ6IGNoZWNrZWQgIT0gbnVsbCA/IGNoZWNrZWQgOiBpbnN0Ll93cmFwcGVyU3RhdGUuaW5pdGlhbENoZWNrZWQsXG4gICAgICBvbkNoYW5nZTogaW5zdC5fd3JhcHBlclN0YXRlLm9uQ2hhbmdlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gbmF0aXZlUHJvcHM7XG4gIH0sXG5cbiAgbW91bnRXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgTGlua2VkVmFsdWVVdGlscy5jaGVja1Byb3BUeXBlcygnaW5wdXQnLCBwcm9wcywgaW5zdC5fY3VycmVudEVsZW1lbnQuX293bmVyKTtcbiAgICB9XG5cbiAgICB2YXIgZGVmYXVsdFZhbHVlID0gcHJvcHMuZGVmYXVsdFZhbHVlO1xuICAgIGluc3QuX3dyYXBwZXJTdGF0ZSA9IHtcbiAgICAgIGluaXRpYWxDaGVja2VkOiBwcm9wcy5kZWZhdWx0Q2hlY2tlZCB8fCBmYWxzZSxcbiAgICAgIGluaXRpYWxWYWx1ZTogZGVmYXVsdFZhbHVlICE9IG51bGwgPyBkZWZhdWx0VmFsdWUgOiBudWxsLFxuICAgICAgb25DaGFuZ2U6IF9oYW5kbGVDaGFuZ2UuYmluZChpbnN0KVxuICAgIH07XG4gIH0sXG5cbiAgbW91bnRSZWFkeVdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgLy8gQ2FuJ3QgYmUgaW4gbW91bnRXcmFwcGVyIG9yIGVsc2Ugc2VydmVyIHJlbmRlcmluZyBsZWFrcy5cbiAgICBpbnN0YW5jZXNCeVJlYWN0SURbaW5zdC5fcm9vdE5vZGVJRF0gPSBpbnN0O1xuICB9LFxuXG4gIHVubW91bnRXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCkge1xuICAgIGRlbGV0ZSBpbnN0YW5jZXNCeVJlYWN0SURbaW5zdC5fcm9vdE5vZGVJRF07XG4gIH0sXG5cbiAgdXBkYXRlV3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcbiAgICB2YXIgcHJvcHMgPSBpbnN0Ll9jdXJyZW50RWxlbWVudC5wcm9wcztcblxuICAgIC8vIFRPRE86IFNob3VsZG4ndCB0aGlzIGJlIGdldENoZWNrZWQocHJvcHMpP1xuICAgIHZhciBjaGVja2VkID0gcHJvcHMuY2hlY2tlZDtcbiAgICBpZiAoY2hlY2tlZCAhPSBudWxsKSB7XG4gICAgICBSZWFjdERPTUlET3BlcmF0aW9ucy51cGRhdGVQcm9wZXJ0eUJ5SUQoaW5zdC5fcm9vdE5vZGVJRCwgJ2NoZWNrZWQnLCBjaGVja2VkIHx8IGZhbHNlKTtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgLy8gQ2FzdCBgdmFsdWVgIHRvIGEgc3RyaW5nIHRvIGVuc3VyZSB0aGUgdmFsdWUgaXMgc2V0IGNvcnJlY3RseS4gV2hpbGVcbiAgICAgIC8vIGJyb3dzZXJzIHR5cGljYWxseSBkbyB0aGlzIGFzIG5lY2Vzc2FyeSwganNkb20gZG9lc24ndC5cbiAgICAgIFJlYWN0RE9NSURPcGVyYXRpb25zLnVwZGF0ZVByb3BlcnR5QnlJRChpbnN0Ll9yb290Tm9kZUlELCAndmFsdWUnLCAnJyArIHZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9oYW5kbGVDaGFuZ2UoZXZlbnQpIHtcbiAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cbiAgdmFyIHJldHVyblZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5leGVjdXRlT25DaGFuZ2UocHJvcHMsIGV2ZW50KTtcblxuICAvLyBIZXJlIHdlIHVzZSBhc2FwIHRvIHdhaXQgdW50aWwgYWxsIHVwZGF0ZXMgaGF2ZSBwcm9wYWdhdGVkLCB3aGljaFxuICAvLyBpcyBpbXBvcnRhbnQgd2hlbiB1c2luZyBjb250cm9sbGVkIGNvbXBvbmVudHMgd2l0aGluIGxheWVyczpcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8xNjk4XG4gIFJlYWN0VXBkYXRlcy5hc2FwKGZvcmNlVXBkYXRlSWZNb3VudGVkLCB0aGlzKTtcblxuICB2YXIgbmFtZSA9IHByb3BzLm5hbWU7XG4gIGlmIChwcm9wcy50eXBlID09PSAncmFkaW8nICYmIG5hbWUgIT0gbnVsbCkge1xuICAgIHZhciByb290Tm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICB2YXIgcXVlcnlSb290ID0gcm9vdE5vZGU7XG5cbiAgICB3aGlsZSAocXVlcnlSb290LnBhcmVudE5vZGUpIHtcbiAgICAgIHF1ZXJ5Um9vdCA9IHF1ZXJ5Um9vdC5wYXJlbnROb2RlO1xuICAgIH1cblxuICAgIC8vIElmIGByb290Tm9kZS5mb3JtYCB3YXMgbm9uLW51bGwsIHRoZW4gd2UgY291bGQgdHJ5IGBmb3JtLmVsZW1lbnRzYCxcbiAgICAvLyBidXQgdGhhdCBzb21ldGltZXMgYmVoYXZlcyBzdHJhbmdlbHkgaW4gSUU4LiBXZSBjb3VsZCBhbHNvIHRyeSB1c2luZ1xuICAgIC8vIGBmb3JtLmdldEVsZW1lbnRzQnlOYW1lYCwgYnV0IHRoYXQgd2lsbCBvbmx5IHJldHVybiBkaXJlY3QgY2hpbGRyZW5cbiAgICAvLyBhbmQgd29uJ3QgaW5jbHVkZSBpbnB1dHMgdGhhdCB1c2UgdGhlIEhUTUw1IGBmb3JtPWAgYXR0cmlidXRlLiBTaW5jZVxuICAgIC8vIHRoZSBpbnB1dCBtaWdodCBub3QgZXZlbiBiZSBpbiBhIGZvcm0sIGxldCdzIGp1c3QgdXNlIHRoZSBnbG9iYWxcbiAgICAvLyBgcXVlcnlTZWxlY3RvckFsbGAgdG8gZW5zdXJlIHdlIGRvbid0IG1pc3MgYW55dGhpbmcuXG4gICAgdmFyIGdyb3VwID0gcXVlcnlSb290LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9JyArIEpTT04uc3RyaW5naWZ5KCcnICsgbmFtZSkgKyAnXVt0eXBlPVwicmFkaW9cIl0nKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXAubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBvdGhlck5vZGUgPSBncm91cFtpXTtcbiAgICAgIGlmIChvdGhlck5vZGUgPT09IHJvb3ROb2RlIHx8IG90aGVyTm9kZS5mb3JtICE9PSByb290Tm9kZS5mb3JtKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGlmIHJhZGlvIGJ1dHRvbnMgcmVuZGVyZWQgYnkgZGlmZmVyZW50IGNvcGllcyBvZiBSZWFjdFxuICAgICAgLy8gYW5kIHRoZSBzYW1lIG5hbWUgYXJlIHJlbmRlcmVkIGludG8gdGhlIHNhbWUgZm9ybSAoc2FtZSBhcyAjMTkzOSkuXG4gICAgICAvLyBUaGF0J3MgcHJvYmFibHkgb2theTsgd2UgZG9uJ3Qgc3VwcG9ydCBpdCBqdXN0IGFzIHdlIGRvbid0IHN1cHBvcnRcbiAgICAgIC8vIG1peGluZyBSZWFjdCB3aXRoIG5vbi1SZWFjdC5cbiAgICAgIHZhciBvdGhlcklEID0gUmVhY3RNb3VudC5nZXRJRChvdGhlck5vZGUpO1xuICAgICAgIW90aGVySUQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RET01JbnB1dDogTWl4aW5nIFJlYWN0IGFuZCBub24tUmVhY3QgcmFkaW8gaW5wdXRzIHdpdGggdGhlICcgKyAnc2FtZSBgbmFtZWAgaXMgbm90IHN1cHBvcnRlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICB2YXIgb3RoZXJJbnN0YW5jZSA9IGluc3RhbmNlc0J5UmVhY3RJRFtvdGhlcklEXTtcbiAgICAgICFvdGhlckluc3RhbmNlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0RE9NSW5wdXQ6IFVua25vd24gcmFkaW8gYnV0dG9uIElEICVzLicsIG90aGVySUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIC8vIElmIHRoaXMgaXMgYSBjb250cm9sbGVkIHJhZGlvIGJ1dHRvbiBncm91cCwgZm9yY2luZyB0aGUgaW5wdXQgdGhhdFxuICAgICAgLy8gd2FzIHByZXZpb3VzbHkgY2hlY2tlZCB0byB1cGRhdGUgd2lsbCBjYXVzZSBpdCB0byBiZSBjb21lIHJlLWNoZWNrZWRcbiAgICAgIC8vIGFzIGFwcHJvcHJpYXRlLlxuICAgICAgUmVhY3RVcGRhdGVzLmFzYXAoZm9yY2VVcGRhdGVJZk1vdW50ZWQsIG90aGVySW5zdGFuY2UpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXR1cm5WYWx1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUlucHV0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTU9wdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q2hpbGRyZW4gPSByZXF1aXJlKCcuL1JlYWN0Q2hpbGRyZW4nKTtcbnZhciBSZWFjdERPTVNlbGVjdCA9IHJlcXVpcmUoJy4vUmVhY3RET01TZWxlY3QnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciB2YWx1ZUNvbnRleHRLZXkgPSBSZWFjdERPTVNlbGVjdC52YWx1ZUNvbnRleHRLZXk7XG5cbi8qKlxuICogSW1wbGVtZW50cyBhbiA8b3B0aW9uPiBuYXRpdmUgY29tcG9uZW50IHRoYXQgd2FybnMgd2hlbiBgc2VsZWN0ZWRgIGlzIHNldC5cbiAqL1xudmFyIFJlYWN0RE9NT3B0aW9uID0ge1xuICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIC8vIFRPRE8gKHl1bmdzdGVycyk6IFJlbW92ZSBzdXBwb3J0IGZvciBgc2VsZWN0ZWRgIGluIDxvcHRpb24+LlxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwcm9wcy5zZWxlY3RlZCA9PSBudWxsLCAnVXNlIHRoZSBgZGVmYXVsdFZhbHVlYCBvciBgdmFsdWVgIHByb3BzIG9uIDxzZWxlY3Q+IGluc3RlYWQgb2YgJyArICdzZXR0aW5nIGBzZWxlY3RlZGAgb24gPG9wdGlvbj4uJykgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gTG9vayB1cCB3aGV0aGVyIHRoaXMgb3B0aW9uIGlzICdzZWxlY3RlZCcgdmlhIGNvbnRleHRcbiAgICB2YXIgc2VsZWN0VmFsdWUgPSBjb250ZXh0W3ZhbHVlQ29udGV4dEtleV07XG5cbiAgICAvLyBJZiBjb250ZXh0IGtleSBpcyBudWxsIChlLmcuLCBubyBzcGVjaWZpZWQgdmFsdWUgb3IgYWZ0ZXIgaW5pdGlhbCBtb3VudClcbiAgICAvLyBvciBtaXNzaW5nIChlLmcuLCBmb3IgPGRhdGFsaXN0PiksIHdlIGRvbid0IGNoYW5nZSBwcm9wcy5zZWxlY3RlZFxuICAgIHZhciBzZWxlY3RlZCA9IG51bGw7XG4gICAgaWYgKHNlbGVjdFZhbHVlICE9IG51bGwpIHtcbiAgICAgIHNlbGVjdGVkID0gZmFsc2U7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzZWxlY3RWYWx1ZSkpIHtcbiAgICAgICAgLy8gbXVsdGlwbGVcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICgnJyArIHNlbGVjdFZhbHVlW2ldID09PSAnJyArIHByb3BzLnZhbHVlKSB7XG4gICAgICAgICAgICBzZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdGVkID0gJycgKyBzZWxlY3RWYWx1ZSA9PT0gJycgKyBwcm9wcy52YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7IHNlbGVjdGVkOiBzZWxlY3RlZCB9O1xuICB9LFxuXG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICB2YXIgbmF0aXZlUHJvcHMgPSBhc3NpZ24oeyBzZWxlY3RlZDogdW5kZWZpbmVkLCBjaGlsZHJlbjogdW5kZWZpbmVkIH0sIHByb3BzKTtcblxuICAgIC8vIFJlYWQgc3RhdGUgb25seSBmcm9tIGluaXRpYWwgbW91bnQgYmVjYXVzZSA8c2VsZWN0PiB1cGRhdGVzIHZhbHVlXG4gICAgLy8gbWFudWFsbHk7IHdlIG5lZWQgdGhlIGluaXRpYWwgc3RhdGUgb25seSBmb3Igc2VydmVyIHJlbmRlcmluZ1xuICAgIGlmIChpbnN0Ll93cmFwcGVyU3RhdGUuc2VsZWN0ZWQgIT0gbnVsbCkge1xuICAgICAgbmF0aXZlUHJvcHMuc2VsZWN0ZWQgPSBpbnN0Ll93cmFwcGVyU3RhdGUuc2VsZWN0ZWQ7XG4gICAgfVxuXG4gICAgdmFyIGNvbnRlbnQgPSAnJztcblxuICAgIC8vIEZsYXR0ZW4gY2hpbGRyZW4gYW5kIHdhcm4gaWYgdGhleSBhcmVuJ3Qgc3RyaW5ncyBvciBudW1iZXJzO1xuICAgIC8vIGludmFsaWQgdHlwZXMgYXJlIGlnbm9yZWQuXG4gICAgUmVhY3RDaGlsZHJlbi5mb3JFYWNoKHByb3BzLmNoaWxkcmVuLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIGlmIChjaGlsZCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY2hpbGQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBjaGlsZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29udGVudCArPSBjaGlsZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnT25seSBzdHJpbmdzIGFuZCBudW1iZXJzIGFyZSBzdXBwb3J0ZWQgYXMgPG9wdGlvbj4gY2hpbGRyZW4uJykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoY29udGVudCkge1xuICAgICAgbmF0aXZlUHJvcHMuY2hpbGRyZW4gPSBjb250ZW50O1xuICAgIH1cblxuICAgIHJldHVybiBuYXRpdmVQcm9wcztcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NT3B0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTVNlbGVjdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIExpbmtlZFZhbHVlVXRpbHMgPSByZXF1aXJlKCcuL0xpbmtlZFZhbHVlVXRpbHMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciB2YWx1ZUNvbnRleHRLZXkgPSAnX19SZWFjdERPTVNlbGVjdF92YWx1ZSQnICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7XG5cbmZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnNJZlBlbmRpbmdVcGRhdGVBbmRNb3VudGVkKCkge1xuICBpZiAodGhpcy5fcm9vdE5vZGVJRCAmJiB0aGlzLl93cmFwcGVyU3RhdGUucGVuZGluZ1VwZGF0ZSkge1xuICAgIHRoaXMuX3dyYXBwZXJTdGF0ZS5wZW5kaW5nVXBkYXRlID0gZmFsc2U7XG5cbiAgICB2YXIgcHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcblxuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICB1cGRhdGVPcHRpb25zKHRoaXMsIEJvb2xlYW4ocHJvcHMubXVsdGlwbGUpLCB2YWx1ZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikge1xuICBpZiAob3duZXIpIHtcbiAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG52YXIgdmFsdWVQcm9wTmFtZXMgPSBbJ3ZhbHVlJywgJ2RlZmF1bHRWYWx1ZSddO1xuXG4vKipcbiAqIFZhbGlkYXRpb24gZnVuY3Rpb24gZm9yIGB2YWx1ZWAgYW5kIGBkZWZhdWx0VmFsdWVgLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2hlY2tTZWxlY3RQcm9wVHlwZXMoaW5zdCwgcHJvcHMpIHtcbiAgdmFyIG93bmVyID0gaW5zdC5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuICBMaW5rZWRWYWx1ZVV0aWxzLmNoZWNrUHJvcFR5cGVzKCdzZWxlY3QnLCBwcm9wcywgb3duZXIpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVQcm9wTmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcHJvcE5hbWUgPSB2YWx1ZVByb3BOYW1lc1tpXTtcbiAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09IG51bGwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAocHJvcHMubXVsdGlwbGUpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKEFycmF5LmlzQXJyYXkocHJvcHNbcHJvcE5hbWVdKSwgJ1RoZSBgJXNgIHByb3Agc3VwcGxpZWQgdG8gPHNlbGVjdD4gbXVzdCBiZSBhbiBhcnJheSBpZiAnICsgJ2BtdWx0aXBsZWAgaXMgdHJ1ZS4lcycsIHByb3BOYW1lLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpKSA6IHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIUFycmF5LmlzQXJyYXkocHJvcHNbcHJvcE5hbWVdKSwgJ1RoZSBgJXNgIHByb3Agc3VwcGxpZWQgdG8gPHNlbGVjdD4gbXVzdCBiZSBhIHNjYWxhciAnICsgJ3ZhbHVlIGlmIGBtdWx0aXBsZWAgaXMgZmFsc2UuJXMnLCBwcm9wTmFtZSwgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKG93bmVyKSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWFjdERPTUNvbXBvbmVudH0gaW5zdFxuICogQHBhcmFtIHtib29sZWFufSBtdWx0aXBsZVxuICogQHBhcmFtIHsqfSBwcm9wVmFsdWUgQSBzdHJpbmdhYmxlICh3aXRoIGBtdWx0aXBsZWAsIGEgbGlzdCBvZiBzdHJpbmdhYmxlcykuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB1cGRhdGVPcHRpb25zKGluc3QsIG11bHRpcGxlLCBwcm9wVmFsdWUpIHtcbiAgdmFyIHNlbGVjdGVkVmFsdWUsIGk7XG4gIHZhciBvcHRpb25zID0gUmVhY3RNb3VudC5nZXROb2RlKGluc3QuX3Jvb3ROb2RlSUQpLm9wdGlvbnM7XG5cbiAgaWYgKG11bHRpcGxlKSB7XG4gICAgc2VsZWN0ZWRWYWx1ZSA9IHt9O1xuICAgIGZvciAoaSA9IDA7IGkgPCBwcm9wVmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNlbGVjdGVkVmFsdWVbJycgKyBwcm9wVmFsdWVbaV1dID0gdHJ1ZTtcbiAgICB9XG4gICAgZm9yIChpID0gMDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzZWxlY3RlZCA9IHNlbGVjdGVkVmFsdWUuaGFzT3duUHJvcGVydHkob3B0aW9uc1tpXS52YWx1ZSk7XG4gICAgICBpZiAob3B0aW9uc1tpXS5zZWxlY3RlZCAhPT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgb3B0aW9uc1tpXS5zZWxlY3RlZCA9IHNlbGVjdGVkO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBEbyBub3Qgc2V0IGBzZWxlY3QudmFsdWVgIGFzIGV4YWN0IGJlaGF2aW9yIGlzbid0IGNvbnNpc3RlbnQgYWNyb3NzIGFsbFxuICAgIC8vIGJyb3dzZXJzIGZvciBhbGwgY2FzZXMuXG4gICAgc2VsZWN0ZWRWYWx1ZSA9ICcnICsgcHJvcFZhbHVlO1xuICAgIGZvciAoaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAob3B0aW9uc1tpXS52YWx1ZSA9PT0gc2VsZWN0ZWRWYWx1ZSkge1xuICAgICAgICBvcHRpb25zW2ldLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgIG9wdGlvbnNbMF0uc2VsZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEltcGxlbWVudHMgYSA8c2VsZWN0PiBuYXRpdmUgY29tcG9uZW50IHRoYXQgYWxsb3dzIG9wdGlvbmFsbHkgc2V0dGluZyB0aGVcbiAqIHByb3BzIGB2YWx1ZWAgYW5kIGBkZWZhdWx0VmFsdWVgLiBJZiBgbXVsdGlwbGVgIGlzIGZhbHNlLCB0aGUgcHJvcCBtdXN0IGJlIGFcbiAqIHN0cmluZ2FibGUuIElmIGBtdWx0aXBsZWAgaXMgdHJ1ZSwgdGhlIHByb3AgbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdhYmxlcy5cbiAqXG4gKiBJZiBgdmFsdWVgIGlzIG5vdCBzdXBwbGllZCAob3IgbnVsbC91bmRlZmluZWQpLCB1c2VyIGFjdGlvbnMgdGhhdCBjaGFuZ2UgdGhlXG4gKiBzZWxlY3RlZCBvcHRpb24gd2lsbCB0cmlnZ2VyIHVwZGF0ZXMgdG8gdGhlIHJlbmRlcmVkIG9wdGlvbnMuXG4gKlxuICogSWYgaXQgaXMgc3VwcGxpZWQgKGFuZCBub3QgbnVsbC91bmRlZmluZWQpLCB0aGUgcmVuZGVyZWQgb3B0aW9ucyB3aWxsIG5vdFxuICogdXBkYXRlIGluIHJlc3BvbnNlIHRvIHVzZXIgYWN0aW9ucy4gSW5zdGVhZCwgdGhlIGB2YWx1ZWAgcHJvcCBtdXN0IGNoYW5nZSBpblxuICogb3JkZXIgZm9yIHRoZSByZW5kZXJlZCBvcHRpb25zIHRvIHVwZGF0ZS5cbiAqXG4gKiBJZiBgZGVmYXVsdFZhbHVlYCBpcyBwcm92aWRlZCwgYW55IG9wdGlvbnMgd2l0aCB0aGUgc3VwcGxpZWQgdmFsdWVzIHdpbGwgYmVcbiAqIHNlbGVjdGVkLlxuICovXG52YXIgUmVhY3RET01TZWxlY3QgPSB7XG4gIHZhbHVlQ29udGV4dEtleTogdmFsdWVDb250ZXh0S2V5LFxuXG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gYXNzaWduKHt9LCBwcm9wcywge1xuICAgICAgb25DaGFuZ2U6IGluc3QuX3dyYXBwZXJTdGF0ZS5vbkNoYW5nZSxcbiAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgfSxcblxuICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjaGVja1NlbGVjdFByb3BUeXBlcyhpbnN0LCBwcm9wcyk7XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG4gICAgaW5zdC5fd3JhcHBlclN0YXRlID0ge1xuICAgICAgcGVuZGluZ1VwZGF0ZTogZmFsc2UsXG4gICAgICBpbml0aWFsVmFsdWU6IHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IHByb3BzLmRlZmF1bHRWYWx1ZSxcbiAgICAgIG9uQ2hhbmdlOiBfaGFuZGxlQ2hhbmdlLmJpbmQoaW5zdCksXG4gICAgICB3YXNNdWx0aXBsZTogQm9vbGVhbihwcm9wcy5tdWx0aXBsZSlcbiAgICB9O1xuICB9LFxuXG4gIHByb2Nlc3NDaGlsZENvbnRleHQ6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIC8vIFBhc3MgZG93biBpbml0aWFsIHZhbHVlIHNvIGluaXRpYWwgZ2VuZXJhdGVkIG1hcmt1cCBoYXMgY29ycmVjdFxuICAgIC8vIGBzZWxlY3RlZGAgYXR0cmlidXRlc1xuICAgIHZhciBjaGlsZENvbnRleHQgPSBhc3NpZ24oe30sIGNvbnRleHQpO1xuICAgIGNoaWxkQ29udGV4dFt2YWx1ZUNvbnRleHRLZXldID0gaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZTtcbiAgICByZXR1cm4gY2hpbGRDb250ZXh0O1xuICB9LFxuXG4gIHBvc3RVcGRhdGVXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCkge1xuICAgIHZhciBwcm9wcyA9IGluc3QuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuXG4gICAgLy8gQWZ0ZXIgdGhlIGluaXRpYWwgbW91bnQsIHdlIGNvbnRyb2wgc2VsZWN0ZWQtbmVzcyBtYW51YWxseSBzbyBkb24ndCBwYXNzXG4gICAgLy8gdGhlIGNvbnRleHQgdmFsdWUgZG93blxuICAgIGluc3QuX3dyYXBwZXJTdGF0ZS5pbml0aWFsVmFsdWUgPSB1bmRlZmluZWQ7XG5cbiAgICB2YXIgd2FzTXVsdGlwbGUgPSBpbnN0Ll93cmFwcGVyU3RhdGUud2FzTXVsdGlwbGU7XG4gICAgaW5zdC5fd3JhcHBlclN0YXRlLndhc011bHRpcGxlID0gQm9vbGVhbihwcm9wcy5tdWx0aXBsZSk7XG5cbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLnBlbmRpbmdVcGRhdGUgPSBmYWxzZTtcbiAgICAgIHVwZGF0ZU9wdGlvbnMoaW5zdCwgQm9vbGVhbihwcm9wcy5tdWx0aXBsZSksIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHdhc011bHRpcGxlICE9PSBCb29sZWFuKHByb3BzLm11bHRpcGxlKSkge1xuICAgICAgLy8gRm9yIHNpbXBsaWNpdHksIHJlYXBwbHkgYGRlZmF1bHRWYWx1ZWAgaWYgYG11bHRpcGxlYCBpcyB0b2dnbGVkLlxuICAgICAgaWYgKHByb3BzLmRlZmF1bHRWYWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHVwZGF0ZU9wdGlvbnMoaW5zdCwgQm9vbGVhbihwcm9wcy5tdWx0aXBsZSksIHByb3BzLmRlZmF1bHRWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXZlcnQgdGhlIHNlbGVjdCBiYWNrIHRvIGl0cyBkZWZhdWx0IHVuc2VsZWN0ZWQgc3RhdGUuXG4gICAgICAgIHVwZGF0ZU9wdGlvbnMoaW5zdCwgQm9vbGVhbihwcm9wcy5tdWx0aXBsZSksIHByb3BzLm11bHRpcGxlID8gW10gOiAnJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBfaGFuZGxlQ2hhbmdlKGV2ZW50KSB7XG4gIHZhciBwcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICB2YXIgcmV0dXJuVmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmV4ZWN1dGVPbkNoYW5nZShwcm9wcywgZXZlbnQpO1xuXG4gIHRoaXMuX3dyYXBwZXJTdGF0ZS5wZW5kaW5nVXBkYXRlID0gdHJ1ZTtcbiAgUmVhY3RVcGRhdGVzLmFzYXAodXBkYXRlT3B0aW9uc0lmUGVuZGluZ1VwZGF0ZUFuZE1vdW50ZWQsIHRoaXMpO1xuICByZXR1cm4gcmV0dXJuVmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01TZWxlY3Q7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NU2VsZWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldCA9IHJlcXVpcmUoJy4vZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldCcpO1xudmFyIGdldFRleHRDb250ZW50QWNjZXNzb3IgPSByZXF1aXJlKCcuL2dldFRleHRDb250ZW50QWNjZXNzb3InKTtcblxuLyoqXG4gKiBXaGlsZSBgaXNDb2xsYXBzZWRgIGlzIGF2YWlsYWJsZSBvbiB0aGUgU2VsZWN0aW9uIG9iamVjdCBhbmQgYGNvbGxhcHNlZGBcbiAqIGlzIGF2YWlsYWJsZSBvbiB0aGUgUmFuZ2Ugb2JqZWN0LCBJRTExIHNvbWV0aW1lcyBnZXRzIHRoZW0gd3JvbmcuXG4gKiBJZiB0aGUgYW5jaG9yL2ZvY3VzIG5vZGVzIGFuZCBvZmZzZXRzIGFyZSB0aGUgc2FtZSwgdGhlIHJhbmdlIGlzIGNvbGxhcHNlZC5cbiAqL1xuZnVuY3Rpb24gaXNDb2xsYXBzZWQoYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0LCBmb2N1c05vZGUsIGZvY3VzT2Zmc2V0KSB7XG4gIHJldHVybiBhbmNob3JOb2RlID09PSBmb2N1c05vZGUgJiYgYW5jaG9yT2Zmc2V0ID09PSBmb2N1c09mZnNldDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGFwcHJvcHJpYXRlIGFuY2hvciBhbmQgZm9jdXMgbm9kZS9vZmZzZXQgcGFpcnMgZm9yIElFLlxuICpcbiAqIFRoZSBjYXRjaCBoZXJlIGlzIHRoYXQgSUUncyBzZWxlY3Rpb24gQVBJIGRvZXNuJ3QgcHJvdmlkZSBpbmZvcm1hdGlvblxuICogYWJvdXQgd2hldGhlciB0aGUgc2VsZWN0aW9uIGlzIGZvcndhcmQgb3IgYmFja3dhcmQsIHNvIHdlIGhhdmUgdG9cbiAqIGJlaGF2ZSBhcyB0aG91Z2ggaXQncyBhbHdheXMgZm9yd2FyZC5cbiAqXG4gKiBJRSB0ZXh0IGRpZmZlcnMgZnJvbSBtb2Rlcm4gc2VsZWN0aW9uIGluIHRoYXQgaXQgYmVoYXZlcyBhcyB0aG91Z2hcbiAqIGJsb2NrIGVsZW1lbnRzIGVuZCB3aXRoIGEgbmV3IGxpbmUuIFRoaXMgbWVhbnMgY2hhcmFjdGVyIG9mZnNldHMgd2lsbFxuICogZGlmZmVyIGJldHdlZW4gdGhlIHR3byBBUElzLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRJRU9mZnNldHMobm9kZSkge1xuICB2YXIgc2VsZWN0aW9uID0gZG9jdW1lbnQuc2VsZWN0aW9uO1xuICB2YXIgc2VsZWN0ZWRSYW5nZSA9IHNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICB2YXIgc2VsZWN0ZWRMZW5ndGggPSBzZWxlY3RlZFJhbmdlLnRleHQubGVuZ3RoO1xuXG4gIC8vIER1cGxpY2F0ZSBzZWxlY3Rpb24gc28gd2UgY2FuIG1vdmUgcmFuZ2Ugd2l0aG91dCBicmVha2luZyB1c2VyIHNlbGVjdGlvbi5cbiAgdmFyIGZyb21TdGFydCA9IHNlbGVjdGVkUmFuZ2UuZHVwbGljYXRlKCk7XG4gIGZyb21TdGFydC5tb3ZlVG9FbGVtZW50VGV4dChub2RlKTtcbiAgZnJvbVN0YXJ0LnNldEVuZFBvaW50KCdFbmRUb1N0YXJ0Jywgc2VsZWN0ZWRSYW5nZSk7XG5cbiAgdmFyIHN0YXJ0T2Zmc2V0ID0gZnJvbVN0YXJ0LnRleHQubGVuZ3RoO1xuICB2YXIgZW5kT2Zmc2V0ID0gc3RhcnRPZmZzZXQgKyBzZWxlY3RlZExlbmd0aDtcblxuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBzdGFydE9mZnNldCxcbiAgICBlbmQ6IGVuZE9mZnNldFxuICB9O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7P29iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0TW9kZXJuT2Zmc2V0cyhub2RlKSB7XG4gIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uICYmIHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcblxuICBpZiAoIXNlbGVjdGlvbiB8fCBzZWxlY3Rpb24ucmFuZ2VDb3VudCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGFuY2hvck5vZGUgPSBzZWxlY3Rpb24uYW5jaG9yTm9kZTtcbiAgdmFyIGFuY2hvck9mZnNldCA9IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQ7XG4gIHZhciBmb2N1c05vZGUgPSBzZWxlY3Rpb24uZm9jdXNOb2RlO1xuICB2YXIgZm9jdXNPZmZzZXQgPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQ7XG5cbiAgdmFyIGN1cnJlbnRSYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApO1xuXG4gIC8vIEluIEZpcmVmb3gsIHJhbmdlLnN0YXJ0Q29udGFpbmVyIGFuZCByYW5nZS5lbmRDb250YWluZXIgY2FuIGJlIFwiYW5vbnltb3VzXG4gIC8vIGRpdnNcIiwgZS5nLiB0aGUgdXAvZG93biBidXR0b25zIG9uIGFuIDxpbnB1dCB0eXBlPVwibnVtYmVyXCI+LiBBbm9ueW1vdXNcbiAgLy8gZGl2cyBkbyBub3Qgc2VlbSB0byBleHBvc2UgcHJvcGVydGllcywgdHJpZ2dlcmluZyBhIFwiUGVybWlzc2lvbiBkZW5pZWRcbiAgLy8gZXJyb3JcIiBpZiBhbnkgb2YgaXRzIHByb3BlcnRpZXMgYXJlIGFjY2Vzc2VkLiBUaGUgb25seSBzZWVtaW5nbHkgcG9zc2libGVcbiAgLy8gd2F5IHRvIGF2b2lkIGVycm9yaW5nIGlzIHRvIGFjY2VzcyBhIHByb3BlcnR5IHRoYXQgdHlwaWNhbGx5IHdvcmtzIGZvclxuICAvLyBub24tYW5vbnltb3VzIGRpdnMgYW5kIGNhdGNoIGFueSBlcnJvciB0aGF0IG1heSBvdGhlcndpc2UgYXJpc2UuIFNlZVxuICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0yMDg0MjdcbiAgdHJ5IHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtZXhwcmVzc2lvbnMgKi9cbiAgICBjdXJyZW50UmFuZ2Uuc3RhcnRDb250YWluZXIubm9kZVR5cGU7XG4gICAgY3VycmVudFJhbmdlLmVuZENvbnRhaW5lci5ub2RlVHlwZTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBJZiB0aGUgbm9kZSBhbmQgb2Zmc2V0IHZhbHVlcyBhcmUgdGhlIHNhbWUsIHRoZSBzZWxlY3Rpb24gaXMgY29sbGFwc2VkLlxuICAvLyBgU2VsZWN0aW9uLmlzQ29sbGFwc2VkYCBpcyBhdmFpbGFibGUgbmF0aXZlbHksIGJ1dCBJRSBzb21ldGltZXMgZ2V0c1xuICAvLyB0aGlzIHZhbHVlIHdyb25nLlxuICB2YXIgaXNTZWxlY3Rpb25Db2xsYXBzZWQgPSBpc0NvbGxhcHNlZChzZWxlY3Rpb24uYW5jaG9yTm9kZSwgc2VsZWN0aW9uLmFuY2hvck9mZnNldCwgc2VsZWN0aW9uLmZvY3VzTm9kZSwgc2VsZWN0aW9uLmZvY3VzT2Zmc2V0KTtcblxuICB2YXIgcmFuZ2VMZW5ndGggPSBpc1NlbGVjdGlvbkNvbGxhcHNlZCA/IDAgOiBjdXJyZW50UmFuZ2UudG9TdHJpbmcoKS5sZW5ndGg7XG5cbiAgdmFyIHRlbXBSYW5nZSA9IGN1cnJlbnRSYW5nZS5jbG9uZVJhbmdlKCk7XG4gIHRlbXBSYW5nZS5zZWxlY3ROb2RlQ29udGVudHMobm9kZSk7XG4gIHRlbXBSYW5nZS5zZXRFbmQoY3VycmVudFJhbmdlLnN0YXJ0Q29udGFpbmVyLCBjdXJyZW50UmFuZ2Uuc3RhcnRPZmZzZXQpO1xuXG4gIHZhciBpc1RlbXBSYW5nZUNvbGxhcHNlZCA9IGlzQ29sbGFwc2VkKHRlbXBSYW5nZS5zdGFydENvbnRhaW5lciwgdGVtcFJhbmdlLnN0YXJ0T2Zmc2V0LCB0ZW1wUmFuZ2UuZW5kQ29udGFpbmVyLCB0ZW1wUmFuZ2UuZW5kT2Zmc2V0KTtcblxuICB2YXIgc3RhcnQgPSBpc1RlbXBSYW5nZUNvbGxhcHNlZCA/IDAgOiB0ZW1wUmFuZ2UudG9TdHJpbmcoKS5sZW5ndGg7XG4gIHZhciBlbmQgPSBzdGFydCArIHJhbmdlTGVuZ3RoO1xuXG4gIC8vIERldGVjdCB3aGV0aGVyIHRoZSBzZWxlY3Rpb24gaXMgYmFja3dhcmQuXG4gIHZhciBkZXRlY3Rpb25SYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gIGRldGVjdGlvblJhbmdlLnNldFN0YXJ0KGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCk7XG4gIGRldGVjdGlvblJhbmdlLnNldEVuZChmb2N1c05vZGUsIGZvY3VzT2Zmc2V0KTtcbiAgdmFyIGlzQmFja3dhcmQgPSBkZXRlY3Rpb25SYW5nZS5jb2xsYXBzZWQ7XG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydDogaXNCYWNrd2FyZCA/IGVuZCA6IHN0YXJ0LFxuICAgIGVuZDogaXNCYWNrd2FyZCA/IHN0YXJ0IDogZW5kXG4gIH07XG59XG5cbi8qKlxuICogQHBhcmFtIHtET01FbGVtZW50fERPTVRleHROb2RlfSBub2RlXG4gKiBAcGFyYW0ge29iamVjdH0gb2Zmc2V0c1xuICovXG5mdW5jdGlvbiBzZXRJRU9mZnNldHMobm9kZSwgb2Zmc2V0cykge1xuICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKS5kdXBsaWNhdGUoKTtcbiAgdmFyIHN0YXJ0LCBlbmQ7XG5cbiAgaWYgKHR5cGVvZiBvZmZzZXRzLmVuZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBzdGFydCA9IG9mZnNldHMuc3RhcnQ7XG4gICAgZW5kID0gc3RhcnQ7XG4gIH0gZWxzZSBpZiAob2Zmc2V0cy5zdGFydCA+IG9mZnNldHMuZW5kKSB7XG4gICAgc3RhcnQgPSBvZmZzZXRzLmVuZDtcbiAgICBlbmQgPSBvZmZzZXRzLnN0YXJ0O1xuICB9IGVsc2Uge1xuICAgIHN0YXJ0ID0gb2Zmc2V0cy5zdGFydDtcbiAgICBlbmQgPSBvZmZzZXRzLmVuZDtcbiAgfVxuXG4gIHJhbmdlLm1vdmVUb0VsZW1lbnRUZXh0KG5vZGUpO1xuICByYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHN0YXJ0KTtcbiAgcmFuZ2Uuc2V0RW5kUG9pbnQoJ0VuZFRvU3RhcnQnLCByYW5nZSk7XG4gIHJhbmdlLm1vdmVFbmQoJ2NoYXJhY3RlcicsIGVuZCAtIHN0YXJ0KTtcbiAgcmFuZ2Uuc2VsZWN0KCk7XG59XG5cbi8qKlxuICogSW4gbW9kZXJuIG5vbi1JRSBicm93c2Vycywgd2UgY2FuIHN1cHBvcnQgYm90aCBmb3J3YXJkIGFuZCBiYWNrd2FyZFxuICogc2VsZWN0aW9ucy5cbiAqXG4gKiBOb3RlOiBJRTEwKyBzdXBwb3J0cyB0aGUgU2VsZWN0aW9uIG9iamVjdCwgYnV0IGl0IGRvZXMgbm90IHN1cHBvcnRcbiAqIHRoZSBgZXh0ZW5kYCBtZXRob2QsIHdoaWNoIG1lYW5zIHRoYXQgZXZlbiBpbiBtb2Rlcm4gSUUsIGl0J3Mgbm90IHBvc3NpYmxlXG4gKiB0byBwcm9ncmFtYXRpY2FsbHkgY3JlYXRlIGEgYmFja3dhcmQgc2VsZWN0aW9uLiBUaHVzLCBmb3IgYWxsIElFXG4gKiB2ZXJzaW9ucywgd2UgdXNlIHRoZSBvbGQgSUUgQVBJIHRvIGNyZWF0ZSBvdXIgc2VsZWN0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBvZmZzZXRzXG4gKi9cbmZ1bmN0aW9uIHNldE1vZGVybk9mZnNldHMobm9kZSwgb2Zmc2V0cykge1xuICBpZiAoIXdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICB2YXIgbGVuZ3RoID0gbm9kZVtnZXRUZXh0Q29udGVudEFjY2Vzc29yKCldLmxlbmd0aDtcbiAgdmFyIHN0YXJ0ID0gTWF0aC5taW4ob2Zmc2V0cy5zdGFydCwgbGVuZ3RoKTtcbiAgdmFyIGVuZCA9IHR5cGVvZiBvZmZzZXRzLmVuZCA9PT0gJ3VuZGVmaW5lZCcgPyBzdGFydCA6IE1hdGgubWluKG9mZnNldHMuZW5kLCBsZW5ndGgpO1xuXG4gIC8vIElFIDExIHVzZXMgbW9kZXJuIHNlbGVjdGlvbiwgYnV0IGRvZXNuJ3Qgc3VwcG9ydCB0aGUgZXh0ZW5kIG1ldGhvZC5cbiAgLy8gRmxpcCBiYWNrd2FyZCBzZWxlY3Rpb25zLCBzbyB3ZSBjYW4gc2V0IHdpdGggYSBzaW5nbGUgcmFuZ2UuXG4gIGlmICghc2VsZWN0aW9uLmV4dGVuZCAmJiBzdGFydCA+IGVuZCkge1xuICAgIHZhciB0ZW1wID0gZW5kO1xuICAgIGVuZCA9IHN0YXJ0O1xuICAgIHN0YXJ0ID0gdGVtcDtcbiAgfVxuXG4gIHZhciBzdGFydE1hcmtlciA9IGdldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXQobm9kZSwgc3RhcnQpO1xuICB2YXIgZW5kTWFya2VyID0gZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldChub2RlLCBlbmQpO1xuXG4gIGlmIChzdGFydE1hcmtlciAmJiBlbmRNYXJrZXIpIHtcbiAgICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIHJhbmdlLnNldFN0YXJ0KHN0YXJ0TWFya2VyLm5vZGUsIHN0YXJ0TWFya2VyLm9mZnNldCk7XG4gICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO1xuXG4gICAgaWYgKHN0YXJ0ID4gZW5kKSB7XG4gICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xuICAgICAgc2VsZWN0aW9uLmV4dGVuZChlbmRNYXJrZXIubm9kZSwgZW5kTWFya2VyLm9mZnNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJhbmdlLnNldEVuZChlbmRNYXJrZXIubm9kZSwgZW5kTWFya2VyLm9mZnNldCk7XG4gICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgdXNlSUVPZmZzZXRzID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmICdzZWxlY3Rpb24nIGluIGRvY3VtZW50ICYmICEoJ2dldFNlbGVjdGlvbicgaW4gd2luZG93KTtcblxudmFyIFJlYWN0RE9NU2VsZWN0aW9uID0ge1xuICAvKipcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gICAqL1xuICBnZXRPZmZzZXRzOiB1c2VJRU9mZnNldHMgPyBnZXRJRU9mZnNldHMgOiBnZXRNb2Rlcm5PZmZzZXRzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9IG5vZGVcbiAgICogQHBhcmFtIHtvYmplY3R9IG9mZnNldHNcbiAgICovXG4gIHNldE9mZnNldHM6IHVzZUlFT2Zmc2V0cyA/IHNldElFT2Zmc2V0cyA6IHNldE1vZGVybk9mZnNldHNcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01TZWxlY3Rpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NU2VydmVyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3REZWZhdWx0SW5qZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRJbmplY3Rpb24nKTtcbnZhciBSZWFjdFNlcnZlclJlbmRlcmluZyA9IHJlcXVpcmUoJy4vUmVhY3RTZXJ2ZXJSZW5kZXJpbmcnKTtcbnZhciBSZWFjdFZlcnNpb24gPSByZXF1aXJlKCcuL1JlYWN0VmVyc2lvbicpO1xuXG5SZWFjdERlZmF1bHRJbmplY3Rpb24uaW5qZWN0KCk7XG5cbnZhciBSZWFjdERPTVNlcnZlciA9IHtcbiAgcmVuZGVyVG9TdHJpbmc6IFJlYWN0U2VydmVyUmVuZGVyaW5nLnJlbmRlclRvU3RyaW5nLFxuICByZW5kZXJUb1N0YXRpY01hcmt1cDogUmVhY3RTZXJ2ZXJSZW5kZXJpbmcucmVuZGVyVG9TdGF0aWNNYXJrdXAsXG4gIHZlcnNpb246IFJlYWN0VmVyc2lvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTVNlcnZlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01UZXh0Q29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTUNoaWxkcmVuT3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vRE9NQ2hpbGRyZW5PcGVyYXRpb25zJyk7XG52YXIgRE9NUHJvcGVydHlPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eU9wZXJhdGlvbnMnKTtcbnZhciBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIgPSByZXF1aXJlKCcuL2VzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlcicpO1xudmFyIHNldFRleHRDb250ZW50ID0gcmVxdWlyZSgnLi9zZXRUZXh0Q29udGVudCcpO1xudmFyIHZhbGlkYXRlRE9NTmVzdGluZyA9IHJlcXVpcmUoJy4vdmFsaWRhdGVET01OZXN0aW5nJyk7XG5cbi8qKlxuICogVGV4dCBub2RlcyB2aW9sYXRlIGEgY291cGxlIGFzc3VtcHRpb25zIHRoYXQgUmVhY3QgbWFrZXMgYWJvdXQgY29tcG9uZW50czpcbiAqXG4gKiAgLSBXaGVuIG1vdW50aW5nIHRleHQgaW50byB0aGUgRE9NLCBhZGphY2VudCB0ZXh0IG5vZGVzIGFyZSBtZXJnZWQuXG4gKiAgLSBUZXh0IG5vZGVzIGNhbm5vdCBiZSBhc3NpZ25lZCBhIFJlYWN0IHJvb3QgSUQuXG4gKlxuICogVGhpcyBjb21wb25lbnQgaXMgdXNlZCB0byB3cmFwIHN0cmluZ3MgaW4gZWxlbWVudHMgc28gdGhhdCB0aGV5IGNhbiB1bmRlcmdvXG4gKiB0aGUgc2FtZSByZWNvbmNpbGlhdGlvbiB0aGF0IGlzIGFwcGxpZWQgdG8gZWxlbWVudHMuXG4gKlxuICogVE9ETzogSW52ZXN0aWdhdGUgcmVwcmVzZW50aW5nIFJlYWN0IGNvbXBvbmVudHMgaW4gdGhlIERPTSB3aXRoIHRleHQgbm9kZXMuXG4gKlxuICogQGNsYXNzIFJlYWN0RE9NVGV4dENvbXBvbmVudFxuICogQGV4dGVuZHMgUmVhY3RDb21wb25lbnRcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RET01UZXh0Q29tcG9uZW50ID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gIC8vIFRoaXMgY29uc3RydWN0b3IgYW5kIGl0cyBhcmd1bWVudCBpcyBjdXJyZW50bHkgdXNlZCBieSBtb2Nrcy5cbn07XG5cbmFzc2lnbihSZWFjdERPTVRleHRDb21wb25lbnQucHJvdG90eXBlLCB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UmVhY3RUZXh0fSB0ZXh0XG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgY29uc3RydWN0OiBmdW5jdGlvbiAodGV4dCkge1xuICAgIC8vIFRPRE86IFRoaXMgaXMgcmVhbGx5IGEgUmVhY3RUZXh0IChSZWFjdE5vZGUpLCBub3QgYSBSZWFjdEVsZW1lbnRcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IHRleHQ7XG4gICAgdGhpcy5fc3RyaW5nVGV4dCA9ICcnICsgdGV4dDtcblxuICAgIC8vIFByb3BlcnRpZXNcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgICB0aGlzLl9tb3VudEluZGV4ID0gMDtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUgbWFya3VwIGZvciB0aGlzIHRleHQgbm9kZS4gVGhpcyBub2RlIGlzIG5vdCBpbnRlbmRlZCB0byBoYXZlXG4gICAqIGFueSBmZWF0dXJlcyBiZXNpZGVzIGNvbnRhaW5pbmcgdGV4dCBjb250ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgZm9yIHRoaXMgdGV4dCBub2RlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pIHtcbiAgICAgICAgdmFsaWRhdGVET01OZXN0aW5nKCdzcGFuJywgbnVsbCwgY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSByb290SUQ7XG4gICAgaWYgKHRyYW5zYWN0aW9uLnVzZUNyZWF0ZUVsZW1lbnQpIHtcbiAgICAgIHZhciBvd25lckRvY3VtZW50ID0gY29udGV4dFtSZWFjdE1vdW50Lm93bmVyRG9jdW1lbnRDb250ZXh0S2V5XTtcbiAgICAgIHZhciBlbCA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLnNldEF0dHJpYnV0ZUZvcklEKGVsLCByb290SUQpO1xuICAgICAgLy8gUG9wdWxhdGUgbm9kZSBjYWNoZVxuICAgICAgUmVhY3RNb3VudC5nZXRJRChlbCk7XG4gICAgICBzZXRUZXh0Q29udGVudChlbCwgdGhpcy5fc3RyaW5nVGV4dCk7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBlc2NhcGVkVGV4dCA9IGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3Nlcih0aGlzLl9zdHJpbmdUZXh0KTtcblxuICAgICAgaWYgKHRyYW5zYWN0aW9uLnJlbmRlclRvU3RhdGljTWFya3VwKSB7XG4gICAgICAgIC8vIE5vcm1hbGx5IHdlJ2Qgd3JhcCB0aGlzIGluIGEgYHNwYW5gIGZvciB0aGUgcmVhc29ucyBzdGF0ZWQgYWJvdmUsIGJ1dFxuICAgICAgICAvLyBzaW5jZSB0aGlzIGlzIGEgc2l0dWF0aW9uIHdoZXJlIFJlYWN0IHdvbid0IHRha2Ugb3ZlciAoc3RhdGljIHBhZ2VzKSxcbiAgICAgICAgLy8gd2UgY2FuIHNpbXBseSByZXR1cm4gdGhlIHRleHQgYXMgaXQgaXMuXG4gICAgICAgIHJldHVybiBlc2NhcGVkVGV4dDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICc8c3BhbiAnICsgRE9NUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvcklEKHJvb3RJRCkgKyAnPicgKyBlc2NhcGVkVGV4dCArICc8L3NwYW4+JztcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhpcyBjb21wb25lbnQgYnkgdXBkYXRpbmcgdGhlIHRleHQgY29udGVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdFRleHR9IG5leHRUZXh0IFRoZSBuZXh0IHRleHQgY29udGVudFxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKG5leHRUZXh0LCB0cmFuc2FjdGlvbikge1xuICAgIGlmIChuZXh0VGV4dCAhPT0gdGhpcy5fY3VycmVudEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbmV4dFRleHQ7XG4gICAgICB2YXIgbmV4dFN0cmluZ1RleHQgPSAnJyArIG5leHRUZXh0O1xuICAgICAgaWYgKG5leHRTdHJpbmdUZXh0ICE9PSB0aGlzLl9zdHJpbmdUZXh0KSB7XG4gICAgICAgIC8vIFRPRE86IFNhdmUgdGhpcyBhcyBwZW5kaW5nIHByb3BzIGFuZCB1c2UgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5XG4gICAgICAgIC8vIGFuZC9vciB1cGRhdGVDb21wb25lbnQgdG8gZG8gdGhlIGFjdHVhbCB1cGRhdGUgZm9yIGNvbnNpc3RlbmN5IHdpdGhcbiAgICAgICAgLy8gb3RoZXIgY29tcG9uZW50IHR5cGVzP1xuICAgICAgICB0aGlzLl9zdHJpbmdUZXh0ID0gbmV4dFN0cmluZ1RleHQ7XG4gICAgICAgIHZhciBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgICAgICBET01DaGlsZHJlbk9wZXJhdGlvbnMudXBkYXRlVGV4dENvbnRlbnQobm9kZSwgbmV4dFN0cmluZ1RleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB1bm1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQudW5tb3VudElERnJvbUVudmlyb25tZW50KHRoaXMuX3Jvb3ROb2RlSUQpO1xuICB9XG5cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NVGV4dENvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01UZXh0YXJlYVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIExpbmtlZFZhbHVlVXRpbHMgPSByZXF1aXJlKCcuL0xpbmtlZFZhbHVlVXRpbHMnKTtcbnZhciBSZWFjdERPTUlET3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RET01JRE9wZXJhdGlvbnMnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuZnVuY3Rpb24gZm9yY2VVcGRhdGVJZk1vdW50ZWQoKSB7XG4gIGlmICh0aGlzLl9yb290Tm9kZUlEKSB7XG4gICAgLy8gRE9NIGNvbXBvbmVudCBpcyBzdGlsbCBtb3VudGVkOyB1cGRhdGVcbiAgICBSZWFjdERPTVRleHRhcmVhLnVwZGF0ZVdyYXBwZXIodGhpcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGEgPHRleHRhcmVhPiBuYXRpdmUgY29tcG9uZW50IHRoYXQgYWxsb3dzIHNldHRpbmcgYHZhbHVlYCwgYW5kXG4gKiBgZGVmYXVsdFZhbHVlYC4gVGhpcyBkaWZmZXJzIGZyb20gdGhlIHRyYWRpdGlvbmFsIERPTSBBUEkgYmVjYXVzZSB2YWx1ZSBpc1xuICogdXN1YWxseSBzZXQgYXMgUENEQVRBIGNoaWxkcmVuLlxuICpcbiAqIElmIGB2YWx1ZWAgaXMgbm90IHN1cHBsaWVkIChvciBudWxsL3VuZGVmaW5lZCksIHVzZXIgYWN0aW9ucyB0aGF0IGFmZmVjdCB0aGVcbiAqIHZhbHVlIHdpbGwgdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LlxuICpcbiAqIElmIGB2YWx1ZWAgaXMgc3VwcGxpZWQgKGFuZCBub3QgbnVsbC91bmRlZmluZWQpLCB0aGUgcmVuZGVyZWQgZWxlbWVudCB3aWxsXG4gKiBub3QgdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LiBJbnN0ZWFkLCB0aGUgYHZhbHVlYCBwcm9wIG11c3QgY2hhbmdlIGluXG4gKiBvcmRlciBmb3IgdGhlIHJlbmRlcmVkIGVsZW1lbnQgdG8gYmUgdXBkYXRlZC5cbiAqXG4gKiBUaGUgcmVuZGVyZWQgZWxlbWVudCB3aWxsIGJlIGluaXRpYWxpemVkIHdpdGggYW4gZW1wdHkgdmFsdWUsIHRoZSBwcm9wXG4gKiBgZGVmYXVsdFZhbHVlYCBpZiBzcGVjaWZpZWQsIG9yIHRoZSBjaGlsZHJlbiBjb250ZW50IChkZXByZWNhdGVkKS5cbiAqL1xudmFyIFJlYWN0RE9NVGV4dGFyZWEgPSB7XG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICAhKHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2BkYW5nZXJvdXNseVNldElubmVySFRNTGAgZG9lcyBub3QgbWFrZSBzZW5zZSBvbiA8dGV4dGFyZWE+LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIEFsd2F5cyBzZXQgY2hpbGRyZW4gdG8gdGhlIHNhbWUgdGhpbmcuIEluIElFOSwgdGhlIHNlbGVjdGlvbiByYW5nZSB3aWxsXG4gICAgLy8gZ2V0IHJlc2V0IGlmIGB0ZXh0Q29udGVudGAgaXMgbXV0YXRlZC5cbiAgICB2YXIgbmF0aXZlUHJvcHMgPSBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICBkZWZhdWx0VmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICBjaGlsZHJlbjogaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSxcbiAgICAgIG9uQ2hhbmdlOiBpbnN0Ll93cmFwcGVyU3RhdGUub25DaGFuZ2VcbiAgICB9KTtcblxuICAgIHJldHVybiBuYXRpdmVQcm9wcztcbiAgfSxcblxuICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBMaW5rZWRWYWx1ZVV0aWxzLmNoZWNrUHJvcFR5cGVzKCd0ZXh0YXJlYScsIHByb3BzLCBpbnN0Ll9jdXJyZW50RWxlbWVudC5fb3duZXIpO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0VmFsdWUgPSBwcm9wcy5kZWZhdWx0VmFsdWU7XG4gICAgLy8gVE9ETyAoeXVuZ3N0ZXJzKTogUmVtb3ZlIHN1cHBvcnQgZm9yIGNoaWxkcmVuIGNvbnRlbnQgaW4gPHRleHRhcmVhPi5cbiAgICB2YXIgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbjtcbiAgICBpZiAoY2hpbGRyZW4gIT0gbnVsbCkge1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdVc2UgdGhlIGBkZWZhdWx0VmFsdWVgIG9yIGB2YWx1ZWAgcHJvcHMgaW5zdGVhZCBvZiBzZXR0aW5nICcgKyAnY2hpbGRyZW4gb24gPHRleHRhcmVhPi4nKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgICEoZGVmYXVsdFZhbHVlID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0lmIHlvdSBzdXBwbHkgYGRlZmF1bHRWYWx1ZWAgb24gYSA8dGV4dGFyZWE+LCBkbyBub3QgcGFzcyBjaGlsZHJlbi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICAgICAgIShjaGlsZHJlbi5sZW5ndGggPD0gMSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnPHRleHRhcmVhPiBjYW4gb25seSBoYXZlIGF0IG1vc3Qgb25lIGNoaWxkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgY2hpbGRyZW4gPSBjaGlsZHJlblswXTtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdFZhbHVlID0gJycgKyBjaGlsZHJlbjtcbiAgICB9XG4gICAgaWYgKGRlZmF1bHRWYWx1ZSA9PSBudWxsKSB7XG4gICAgICBkZWZhdWx0VmFsdWUgPSAnJztcbiAgICB9XG4gICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG5cbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7XG4gICAgICAvLyBXZSBzYXZlIHRoZSBpbml0aWFsIHZhbHVlIHNvIHRoYXQgYFJlYWN0RE9NQ29tcG9uZW50YCBkb2Vzbid0IHVwZGF0ZVxuICAgICAgLy8gYHRleHRDb250ZW50YCAodW5uZWNlc3Nhcnkgc2luY2Ugd2UgdXBkYXRlIHZhbHVlKS5cbiAgICAgIC8vIFRoZSBpbml0aWFsIHZhbHVlIGNhbiBiZSBhIGJvb2xlYW4gb3Igb2JqZWN0IHNvIHRoYXQncyB3aHkgaXQnc1xuICAgICAgLy8gZm9yY2VkIHRvIGJlIGEgc3RyaW5nLlxuICAgICAgaW5pdGlhbFZhbHVlOiAnJyArICh2YWx1ZSAhPSBudWxsID8gdmFsdWUgOiBkZWZhdWx0VmFsdWUpLFxuICAgICAgb25DaGFuZ2U6IF9oYW5kbGVDaGFuZ2UuYmluZChpbnN0KVxuICAgIH07XG4gIH0sXG5cbiAgdXBkYXRlV3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcbiAgICB2YXIgcHJvcHMgPSBpbnN0Ll9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgLy8gQ2FzdCBgdmFsdWVgIHRvIGEgc3RyaW5nIHRvIGVuc3VyZSB0aGUgdmFsdWUgaXMgc2V0IGNvcnJlY3RseS4gV2hpbGVcbiAgICAgIC8vIGJyb3dzZXJzIHR5cGljYWxseSBkbyB0aGlzIGFzIG5lY2Vzc2FyeSwganNkb20gZG9lc24ndC5cbiAgICAgIFJlYWN0RE9NSURPcGVyYXRpb25zLnVwZGF0ZVByb3BlcnR5QnlJRChpbnN0Ll9yb290Tm9kZUlELCAndmFsdWUnLCAnJyArIHZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9oYW5kbGVDaGFuZ2UoZXZlbnQpIHtcbiAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG4gIHZhciByZXR1cm5WYWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZXhlY3V0ZU9uQ2hhbmdlKHByb3BzLCBldmVudCk7XG4gIFJlYWN0VXBkYXRlcy5hc2FwKGZvcmNlVXBkYXRlSWZNb3VudGVkLCB0aGlzKTtcbiAgcmV0dXJuIHJldHVyblZhbHVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NVGV4dGFyZWE7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3lcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xudmFyIFRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9UcmFuc2FjdGlvbicpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcblxudmFyIFJFU0VUX0JBVENIRURfVVBEQVRFUyA9IHtcbiAgaW5pdGlhbGl6ZTogZW1wdHlGdW5jdGlvbixcbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzID0gZmFsc2U7XG4gIH1cbn07XG5cbnZhciBGTFVTSF9CQVRDSEVEX1VQREFURVMgPSB7XG4gIGluaXRpYWxpemU6IGVtcHR5RnVuY3Rpb24sXG4gIGNsb3NlOiBSZWFjdFVwZGF0ZXMuZmx1c2hCYXRjaGVkVXBkYXRlcy5iaW5kKFJlYWN0VXBkYXRlcylcbn07XG5cbnZhciBUUkFOU0FDVElPTl9XUkFQUEVSUyA9IFtGTFVTSF9CQVRDSEVEX1VQREFURVMsIFJFU0VUX0JBVENIRURfVVBEQVRFU107XG5cbmZ1bmN0aW9uIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3lUcmFuc2FjdGlvbigpIHtcbiAgdGhpcy5yZWluaXRpYWxpemVUcmFuc2FjdGlvbigpO1xufVxuXG5hc3NpZ24oUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneVRyYW5zYWN0aW9uLnByb3RvdHlwZSwgVHJhbnNhY3Rpb24uTWl4aW4sIHtcbiAgZ2V0VHJhbnNhY3Rpb25XcmFwcGVyczogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBUUkFOU0FDVElPTl9XUkFQUEVSUztcbiAgfVxufSk7XG5cbnZhciB0cmFuc2FjdGlvbiA9IG5ldyBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5VHJhbnNhY3Rpb24oKTtcblxudmFyIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kgPSB7XG4gIGlzQmF0Y2hpbmdVcGRhdGVzOiBmYWxzZSxcblxuICAvKipcbiAgICogQ2FsbCB0aGUgcHJvdmlkZWQgZnVuY3Rpb24gaW4gYSBjb250ZXh0IHdpdGhpbiB3aGljaCBjYWxscyB0byBgc2V0U3RhdGVgXG4gICAqIGFuZCBmcmllbmRzIGFyZSBiYXRjaGVkIHN1Y2ggdGhhdCBjb21wb25lbnRzIGFyZW4ndCB1cGRhdGVkIHVubmVjZXNzYXJpbHkuXG4gICAqL1xuICBiYXRjaGVkVXBkYXRlczogZnVuY3Rpb24gKGNhbGxiYWNrLCBhLCBiLCBjLCBkLCBlKSB7XG4gICAgdmFyIGFscmVhZHlCYXRjaGluZ1VwZGF0ZXMgPSBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzO1xuXG4gICAgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcyA9IHRydWU7XG5cbiAgICAvLyBUaGUgY29kZSBpcyB3cml0dGVuIHRoaXMgd2F5IHRvIGF2b2lkIGV4dHJhIGFsbG9jYXRpb25zXG4gICAgaWYgKGFscmVhZHlCYXRjaGluZ1VwZGF0ZXMpIHtcbiAgICAgIGNhbGxiYWNrKGEsIGIsIGMsIGQsIGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmFuc2FjdGlvbi5wZXJmb3JtKGNhbGxiYWNrLCBudWxsLCBhLCBiLCBjLCBkLCBlKTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3REZWZhdWx0SW5qZWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQmVmb3JlSW5wdXRFdmVudFBsdWdpbiA9IHJlcXVpcmUoJy4vQmVmb3JlSW5wdXRFdmVudFBsdWdpbicpO1xudmFyIENoYW5nZUV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9DaGFuZ2VFdmVudFBsdWdpbicpO1xudmFyIENsaWVudFJlYWN0Um9vdEluZGV4ID0gcmVxdWlyZSgnLi9DbGllbnRSZWFjdFJvb3RJbmRleCcpO1xudmFyIERlZmF1bHRFdmVudFBsdWdpbk9yZGVyID0gcmVxdWlyZSgnLi9EZWZhdWx0RXZlbnRQbHVnaW5PcmRlcicpO1xudmFyIEVudGVyTGVhdmVFdmVudFBsdWdpbiA9IHJlcXVpcmUoJy4vRW50ZXJMZWF2ZUV2ZW50UGx1Z2luJyk7XG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xudmFyIEhUTUxET01Qcm9wZXJ0eUNvbmZpZyA9IHJlcXVpcmUoJy4vSFRNTERPTVByb3BlcnR5Q29uZmlnJyk7XG52YXIgUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4gPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckNvbXBvbmVudE1peGluJyk7XG52YXIgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50Jyk7XG52YXIgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSA9IHJlcXVpcmUoJy4vUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneScpO1xudmFyIFJlYWN0RE9NQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdERPTUNvbXBvbmVudCcpO1xudmFyIFJlYWN0RE9NVGV4dENvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RET01UZXh0Q29tcG9uZW50Jyk7XG52YXIgUmVhY3RFdmVudExpc3RlbmVyID0gcmVxdWlyZSgnLi9SZWFjdEV2ZW50TGlzdGVuZXInKTtcbnZhciBSZWFjdEluamVjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RJbmplY3Rpb24nKTtcbnZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZUhhbmRsZXMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbicpO1xudmFyIFNlbGVjdEV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9TZWxlY3RFdmVudFBsdWdpbicpO1xudmFyIFNlcnZlclJlYWN0Um9vdEluZGV4ID0gcmVxdWlyZSgnLi9TZXJ2ZXJSZWFjdFJvb3RJbmRleCcpO1xudmFyIFNpbXBsZUV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9TaW1wbGVFdmVudFBsdWdpbicpO1xudmFyIFNWR0RPTVByb3BlcnR5Q29uZmlnID0gcmVxdWlyZSgnLi9TVkdET01Qcm9wZXJ0eUNvbmZpZycpO1xuXG52YXIgYWxyZWFkeUluamVjdGVkID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGluamVjdCgpIHtcbiAgaWYgKGFscmVhZHlJbmplY3RlZCkge1xuICAgIC8vIFRPRE86IFRoaXMgaXMgY3VycmVudGx5IHRydWUgYmVjYXVzZSB0aGVzZSBpbmplY3Rpb25zIGFyZSBzaGFyZWQgYmV0d2VlblxuICAgIC8vIHRoZSBjbGllbnQgYW5kIHRoZSBzZXJ2ZXIgcGFja2FnZS4gVGhleSBzaG91bGQgYmUgYnVpbHQgaW5kZXBlbmRlbnRseVxuICAgIC8vIGFuZCBub3Qgc2hhcmUgYW55IGluamVjdGlvbiBzdGF0ZS4gVGhlbiB0aGlzIHByb2JsZW0gd2lsbCBiZSBzb2x2ZWQuXG4gICAgcmV0dXJuO1xuICB9XG4gIGFscmVhZHlJbmplY3RlZCA9IHRydWU7XG5cbiAgUmVhY3RJbmplY3Rpb24uRXZlbnRFbWl0dGVyLmluamVjdFJlYWN0RXZlbnRMaXN0ZW5lcihSZWFjdEV2ZW50TGlzdGVuZXIpO1xuXG4gIC8qKlxuICAgKiBJbmplY3QgbW9kdWxlcyBmb3IgcmVzb2x2aW5nIERPTSBoaWVyYXJjaHkgYW5kIHBsdWdpbiBvcmRlcmluZy5cbiAgICovXG4gIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdEV2ZW50UGx1Z2luT3JkZXIoRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIpO1xuICBSZWFjdEluamVjdGlvbi5FdmVudFBsdWdpbkh1Yi5pbmplY3RJbnN0YW5jZUhhbmRsZShSZWFjdEluc3RhbmNlSGFuZGxlcyk7XG4gIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdE1vdW50KFJlYWN0TW91bnQpO1xuXG4gIC8qKlxuICAgKiBTb21lIGltcG9ydGFudCBldmVudCBwbHVnaW5zIGluY2x1ZGVkIGJ5IGRlZmF1bHQgKHdpdGhvdXQgaGF2aW5nIHRvIHJlcXVpcmVcbiAgICogdGhlbSkuXG4gICAqL1xuICBSZWFjdEluamVjdGlvbi5FdmVudFBsdWdpbkh1Yi5pbmplY3RFdmVudFBsdWdpbnNCeU5hbWUoe1xuICAgIFNpbXBsZUV2ZW50UGx1Z2luOiBTaW1wbGVFdmVudFBsdWdpbixcbiAgICBFbnRlckxlYXZlRXZlbnRQbHVnaW46IEVudGVyTGVhdmVFdmVudFBsdWdpbixcbiAgICBDaGFuZ2VFdmVudFBsdWdpbjogQ2hhbmdlRXZlbnRQbHVnaW4sXG4gICAgU2VsZWN0RXZlbnRQbHVnaW46IFNlbGVjdEV2ZW50UGx1Z2luLFxuICAgIEJlZm9yZUlucHV0RXZlbnRQbHVnaW46IEJlZm9yZUlucHV0RXZlbnRQbHVnaW5cbiAgfSk7XG5cbiAgUmVhY3RJbmplY3Rpb24uTmF0aXZlQ29tcG9uZW50LmluamVjdEdlbmVyaWNDb21wb25lbnRDbGFzcyhSZWFjdERPTUNvbXBvbmVudCk7XG5cbiAgUmVhY3RJbmplY3Rpb24uTmF0aXZlQ29tcG9uZW50LmluamVjdFRleHRDb21wb25lbnRDbGFzcyhSZWFjdERPTVRleHRDb21wb25lbnQpO1xuXG4gIFJlYWN0SW5qZWN0aW9uLkNsYXNzLmluamVjdE1peGluKFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluKTtcblxuICBSZWFjdEluamVjdGlvbi5ET01Qcm9wZXJ0eS5pbmplY3RET01Qcm9wZXJ0eUNvbmZpZyhIVE1MRE9NUHJvcGVydHlDb25maWcpO1xuICBSZWFjdEluamVjdGlvbi5ET01Qcm9wZXJ0eS5pbmplY3RET01Qcm9wZXJ0eUNvbmZpZyhTVkdET01Qcm9wZXJ0eUNvbmZpZyk7XG5cbiAgUmVhY3RJbmplY3Rpb24uRW1wdHlDb21wb25lbnQuaW5qZWN0RW1wdHlDb21wb25lbnQoJ25vc2NyaXB0Jyk7XG5cbiAgUmVhY3RJbmplY3Rpb24uVXBkYXRlcy5pbmplY3RSZWNvbmNpbGVUcmFuc2FjdGlvbihSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uKTtcbiAgUmVhY3RJbmplY3Rpb24uVXBkYXRlcy5pbmplY3RCYXRjaGluZ1N0cmF0ZWd5KFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kpO1xuXG4gIFJlYWN0SW5qZWN0aW9uLlJvb3RJbmRleC5pbmplY3RDcmVhdGVSZWFjdFJvb3RJbmRleChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBDbGllbnRSZWFjdFJvb3RJbmRleC5jcmVhdGVSZWFjdFJvb3RJbmRleCA6IFNlcnZlclJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4KTtcblxuICBSZWFjdEluamVjdGlvbi5Db21wb25lbnQuaW5qZWN0RW52aXJvbm1lbnQoUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQpO1xuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFyIHVybCA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiB3aW5kb3cubG9jYXRpb24uaHJlZiB8fCAnJztcbiAgICBpZiAoL1s/Jl1yZWFjdF9wZXJmXFxiLy50ZXN0KHVybCkpIHtcbiAgICAgIHZhciBSZWFjdERlZmF1bHRQZXJmID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRQZXJmJyk7XG4gICAgICBSZWFjdERlZmF1bHRQZXJmLnN0YXJ0KCk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpbmplY3Q6IGluamVjdFxufTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFbGVtZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vY2FuRGVmaW5lUHJvcGVydHknKTtcblxuLy8gVGhlIFN5bWJvbCB1c2VkIHRvIHRhZyB0aGUgUmVhY3RFbGVtZW50IHR5cGUuIElmIHRoZXJlIGlzIG5vIG5hdGl2ZSBTeW1ib2xcbi8vIG5vciBwb2x5ZmlsbCwgdGhlbiBhIHBsYWluIG51bWJlciBpcyB1c2VkIGZvciBwZXJmb3JtYW5jZS5cbnZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbFsnZm9yJ10gJiYgU3ltYm9sWydmb3InXSgncmVhY3QuZWxlbWVudCcpIHx8IDB4ZWFjNztcblxudmFyIFJFU0VSVkVEX1BST1BTID0ge1xuICBrZXk6IHRydWUsXG4gIHJlZjogdHJ1ZSxcbiAgX19zZWxmOiB0cnVlLFxuICBfX3NvdXJjZTogdHJ1ZVxufTtcblxuLyoqXG4gKiBCYXNlIGNvbnN0cnVjdG9yIGZvciBhbGwgUmVhY3QgZWxlbWVudHMuIFRoaXMgaXMgb25seSB1c2VkIHRvIG1ha2UgdGhpc1xuICogd29yayB3aXRoIGEgZHluYW1pYyBpbnN0YW5jZW9mIGNoZWNrLiBOb3RoaW5nIHNob3VsZCBsaXZlIG9uIHRoaXMgcHJvdG90eXBlLlxuICpcbiAqIEBwYXJhbSB7Kn0gdHlwZVxuICogQHBhcmFtIHsqfSBrZXlcbiAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gcmVmXG4gKiBAcGFyYW0geyp9IHNlbGYgQSAqdGVtcG9yYXJ5KiBoZWxwZXIgdG8gZGV0ZWN0IHBsYWNlcyB3aGVyZSBgdGhpc2AgaXNcbiAqIGRpZmZlcmVudCBmcm9tIHRoZSBgb3duZXJgIHdoZW4gUmVhY3QuY3JlYXRlRWxlbWVudCBpcyBjYWxsZWQsIHNvIHRoYXQgd2VcbiAqIGNhbiB3YXJuLiBXZSB3YW50IHRvIGdldCByaWQgb2Ygb3duZXIgYW5kIHJlcGxhY2Ugc3RyaW5nIGByZWZgcyB3aXRoIGFycm93XG4gKiBmdW5jdGlvbnMsIGFuZCBhcyBsb25nIGFzIGB0aGlzYCBhbmQgb3duZXIgYXJlIHRoZSBzYW1lLCB0aGVyZSB3aWxsIGJlIG5vXG4gKiBjaGFuZ2UgaW4gYmVoYXZpb3IuXG4gKiBAcGFyYW0geyp9IHNvdXJjZSBBbiBhbm5vdGF0aW9uIG9iamVjdCAoYWRkZWQgYnkgYSB0cmFuc3BpbGVyIG9yIG90aGVyd2lzZSlcbiAqIGluZGljYXRpbmcgZmlsZW5hbWUsIGxpbmUgbnVtYmVyLCBhbmQvb3Igb3RoZXIgaW5mb3JtYXRpb24uXG4gKiBAcGFyYW0geyp9IG93bmVyXG4gKiBAcGFyYW0geyp9IHByb3BzXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIFJlYWN0RWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBrZXksIHJlZiwgc2VsZiwgc291cmNlLCBvd25lciwgcHJvcHMpIHtcbiAgdmFyIGVsZW1lbnQgPSB7XG4gICAgLy8gVGhpcyB0YWcgYWxsb3cgdXMgdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhpcyBhcyBhIFJlYWN0IEVsZW1lbnRcbiAgICAkJHR5cGVvZjogUkVBQ1RfRUxFTUVOVF9UWVBFLFxuXG4gICAgLy8gQnVpbHQtaW4gcHJvcGVydGllcyB0aGF0IGJlbG9uZyBvbiB0aGUgZWxlbWVudFxuICAgIHR5cGU6IHR5cGUsXG4gICAga2V5OiBrZXksXG4gICAgcmVmOiByZWYsXG4gICAgcHJvcHM6IHByb3BzLFxuXG4gICAgLy8gUmVjb3JkIHRoZSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoaXMgZWxlbWVudC5cbiAgICBfb3duZXI6IG93bmVyXG4gIH07XG5cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyBUaGUgdmFsaWRhdGlvbiBmbGFnIGlzIGN1cnJlbnRseSBtdXRhdGl2ZS4gV2UgcHV0IGl0IG9uXG4gICAgLy8gYW4gZXh0ZXJuYWwgYmFja2luZyBzdG9yZSBzbyB0aGF0IHdlIGNhbiBmcmVlemUgdGhlIHdob2xlIG9iamVjdC5cbiAgICAvLyBUaGlzIGNhbiBiZSByZXBsYWNlZCB3aXRoIGEgV2Vha01hcCBvbmNlIHRoZXkgYXJlIGltcGxlbWVudGVkIGluXG4gICAgLy8gY29tbW9ubHkgdXNlZCBkZXZlbG9wbWVudCBlbnZpcm9ubWVudHMuXG4gICAgZWxlbWVudC5fc3RvcmUgPSB7fTtcblxuICAgIC8vIFRvIG1ha2UgY29tcGFyaW5nIFJlYWN0RWxlbWVudHMgZWFzaWVyIGZvciB0ZXN0aW5nIHB1cnBvc2VzLCB3ZSBtYWtlXG4gICAgLy8gdGhlIHZhbGlkYXRpb24gZmxhZyBub24tZW51bWVyYWJsZSAod2hlcmUgcG9zc2libGUsIHdoaWNoIHNob3VsZFxuICAgIC8vIGluY2x1ZGUgZXZlcnkgZW52aXJvbm1lbnQgd2UgcnVuIHRlc3RzIGluKSwgc28gdGhlIHRlc3QgZnJhbWV3b3JrXG4gICAgLy8gaWdub3JlcyBpdC5cbiAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50Ll9zdG9yZSwgJ3ZhbGlkYXRlZCcsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgLy8gc2VsZiBhbmQgc291cmNlIGFyZSBERVYgb25seSBwcm9wZXJ0aWVzLlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdfc2VsZicsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IHNlbGZcbiAgICAgIH0pO1xuICAgICAgLy8gVHdvIGVsZW1lbnRzIGNyZWF0ZWQgaW4gdHdvIGRpZmZlcmVudCBwbGFjZXMgc2hvdWxkIGJlIGNvbnNpZGVyZWRcbiAgICAgIC8vIGVxdWFsIGZvciB0ZXN0aW5nIHB1cnBvc2VzIGFuZCB0aGVyZWZvcmUgd2UgaGlkZSBpdCBmcm9tIGVudW1lcmF0aW9uLlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdfc291cmNlJywge1xuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogc291cmNlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudC5fc3RvcmUudmFsaWRhdGVkID0gZmFsc2U7XG4gICAgICBlbGVtZW50Ll9zZWxmID0gc2VsZjtcbiAgICAgIGVsZW1lbnQuX3NvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgT2JqZWN0LmZyZWV6ZShlbGVtZW50LnByb3BzKTtcbiAgICBPYmplY3QuZnJlZXplKGVsZW1lbnQpO1xuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnQ7XG59O1xuXG5SZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBjb25maWcsIGNoaWxkcmVuKSB7XG4gIHZhciBwcm9wTmFtZTtcblxuICAvLyBSZXNlcnZlZCBuYW1lcyBhcmUgZXh0cmFjdGVkXG4gIHZhciBwcm9wcyA9IHt9O1xuXG4gIHZhciBrZXkgPSBudWxsO1xuICB2YXIgcmVmID0gbnVsbDtcbiAgdmFyIHNlbGYgPSBudWxsO1xuICB2YXIgc291cmNlID0gbnVsbDtcblxuICBpZiAoY29uZmlnICE9IG51bGwpIHtcbiAgICByZWYgPSBjb25maWcucmVmID09PSB1bmRlZmluZWQgPyBudWxsIDogY29uZmlnLnJlZjtcbiAgICBrZXkgPSBjb25maWcua2V5ID09PSB1bmRlZmluZWQgPyBudWxsIDogJycgKyBjb25maWcua2V5O1xuICAgIHNlbGYgPSBjb25maWcuX19zZWxmID09PSB1bmRlZmluZWQgPyBudWxsIDogY29uZmlnLl9fc2VsZjtcbiAgICBzb3VyY2UgPSBjb25maWcuX19zb3VyY2UgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjb25maWcuX19zb3VyY2U7XG4gICAgLy8gUmVtYWluaW5nIHByb3BlcnRpZXMgYXJlIGFkZGVkIHRvIGEgbmV3IHByb3BzIG9iamVjdFxuICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKSB7XG4gICAgICBpZiAoY29uZmlnLmhhc093blByb3BlcnR5KHByb3BOYW1lKSAmJiAhUkVTRVJWRURfUFJPUFMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hpbGRyZW4gY2FuIGJlIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQsIGFuZCB0aG9zZSBhcmUgdHJhbnNmZXJyZWQgb250b1xuICAvLyB0aGUgbmV3bHkgYWxsb2NhdGVkIHByb3BzIG9iamVjdC5cbiAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG4gIGlmIChjaGlsZHJlbkxlbmd0aCA9PT0gMSkge1xuICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gIH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7XG4gICAgdmFyIGNoaWxkQXJyYXkgPSBBcnJheShjaGlsZHJlbkxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbkxlbmd0aDsgaSsrKSB7XG4gICAgICBjaGlsZEFycmF5W2ldID0gYXJndW1lbnRzW2kgKyAyXTtcbiAgICB9XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZEFycmF5O1xuICB9XG5cbiAgLy8gUmVzb2x2ZSBkZWZhdWx0IHByb3BzXG4gIGlmICh0eXBlICYmIHR5cGUuZGVmYXVsdFByb3BzKSB7XG4gICAgdmFyIGRlZmF1bHRQcm9wcyA9IHR5cGUuZGVmYXVsdFByb3BzO1xuICAgIGZvciAocHJvcE5hbWUgaW4gZGVmYXVsdFByb3BzKSB7XG4gICAgICBpZiAodHlwZW9mIHByb3BzW3Byb3BOYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcHJvcHNbcHJvcE5hbWVdID0gZGVmYXVsdFByb3BzW3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gUmVhY3RFbGVtZW50KHR5cGUsIGtleSwgcmVmLCBzZWxmLCBzb3VyY2UsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQsIHByb3BzKTtcbn07XG5cblJlYWN0RWxlbWVudC5jcmVhdGVGYWN0b3J5ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgdmFyIGZhY3RvcnkgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudC5iaW5kKG51bGwsIHR5cGUpO1xuICAvLyBFeHBvc2UgdGhlIHR5cGUgb24gdGhlIGZhY3RvcnkgYW5kIHRoZSBwcm90b3R5cGUgc28gdGhhdCBpdCBjYW4gYmVcbiAgLy8gZWFzaWx5IGFjY2Vzc2VkIG9uIGVsZW1lbnRzLiBFLmcuIGA8Rm9vIC8+LnR5cGUgPT09IEZvb2AuXG4gIC8vIFRoaXMgc2hvdWxkIG5vdCBiZSBuYW1lZCBgY29uc3RydWN0b3JgIHNpbmNlIHRoaXMgbWF5IG5vdCBiZSB0aGUgZnVuY3Rpb25cbiAgLy8gdGhhdCBjcmVhdGVkIHRoZSBlbGVtZW50LCBhbmQgaXQgbWF5IG5vdCBldmVuIGJlIGEgY29uc3RydWN0b3IuXG4gIC8vIExlZ2FjeSBob29rIFRPRE86IFdhcm4gaWYgdGhpcyBpcyBhY2Nlc3NlZFxuICBmYWN0b3J5LnR5cGUgPSB0eXBlO1xuICByZXR1cm4gZmFjdG9yeTtcbn07XG5cblJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VLZXkgPSBmdW5jdGlvbiAob2xkRWxlbWVudCwgbmV3S2V5KSB7XG4gIHZhciBuZXdFbGVtZW50ID0gUmVhY3RFbGVtZW50KG9sZEVsZW1lbnQudHlwZSwgbmV3S2V5LCBvbGRFbGVtZW50LnJlZiwgb2xkRWxlbWVudC5fc2VsZiwgb2xkRWxlbWVudC5fc291cmNlLCBvbGRFbGVtZW50Ll9vd25lciwgb2xkRWxlbWVudC5wcm9wcyk7XG5cbiAgcmV0dXJuIG5ld0VsZW1lbnQ7XG59O1xuXG5SZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlUHJvcHMgPSBmdW5jdGlvbiAob2xkRWxlbWVudCwgbmV3UHJvcHMpIHtcbiAgdmFyIG5ld0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQob2xkRWxlbWVudC50eXBlLCBvbGRFbGVtZW50LmtleSwgb2xkRWxlbWVudC5yZWYsIG9sZEVsZW1lbnQuX3NlbGYsIG9sZEVsZW1lbnQuX3NvdXJjZSwgb2xkRWxlbWVudC5fb3duZXIsIG5ld1Byb3BzKTtcblxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIC8vIElmIHRoZSBrZXkgb24gdGhlIG9yaWdpbmFsIGlzIHZhbGlkLCB0aGVuIHRoZSBjbG9uZSBpcyB2YWxpZFxuICAgIG5ld0VsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCA9IG9sZEVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZDtcbiAgfVxuXG4gIHJldHVybiBuZXdFbGVtZW50O1xufTtcblxuUmVhY3RFbGVtZW50LmNsb25lRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb25maWcsIGNoaWxkcmVuKSB7XG4gIHZhciBwcm9wTmFtZTtcblxuICAvLyBPcmlnaW5hbCBwcm9wcyBhcmUgY29waWVkXG4gIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgZWxlbWVudC5wcm9wcyk7XG5cbiAgLy8gUmVzZXJ2ZWQgbmFtZXMgYXJlIGV4dHJhY3RlZFxuICB2YXIga2V5ID0gZWxlbWVudC5rZXk7XG4gIHZhciByZWYgPSBlbGVtZW50LnJlZjtcbiAgLy8gU2VsZiBpcyBwcmVzZXJ2ZWQgc2luY2UgdGhlIG93bmVyIGlzIHByZXNlcnZlZC5cbiAgdmFyIHNlbGYgPSBlbGVtZW50Ll9zZWxmO1xuICAvLyBTb3VyY2UgaXMgcHJlc2VydmVkIHNpbmNlIGNsb25lRWxlbWVudCBpcyB1bmxpa2VseSB0byBiZSB0YXJnZXRlZCBieSBhXG4gIC8vIHRyYW5zcGlsZXIsIGFuZCB0aGUgb3JpZ2luYWwgc291cmNlIGlzIHByb2JhYmx5IGEgYmV0dGVyIGluZGljYXRvciBvZiB0aGVcbiAgLy8gdHJ1ZSBvd25lci5cbiAgdmFyIHNvdXJjZSA9IGVsZW1lbnQuX3NvdXJjZTtcblxuICAvLyBPd25lciB3aWxsIGJlIHByZXNlcnZlZCwgdW5sZXNzIHJlZiBpcyBvdmVycmlkZGVuXG4gIHZhciBvd25lciA9IGVsZW1lbnQuX293bmVyO1xuXG4gIGlmIChjb25maWcgIT0gbnVsbCkge1xuICAgIGlmIChjb25maWcucmVmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIFNpbGVudGx5IHN0ZWFsIHRoZSByZWYgZnJvbSB0aGUgcGFyZW50LlxuICAgICAgcmVmID0gY29uZmlnLnJlZjtcbiAgICAgIG93bmVyID0gUmVhY3RDdXJyZW50T3duZXIuY3VycmVudDtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5rZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5ID0gJycgKyBjb25maWcua2V5O1xuICAgIH1cbiAgICAvLyBSZW1haW5pbmcgcHJvcGVydGllcyBvdmVycmlkZSBleGlzdGluZyBwcm9wc1xuICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKSB7XG4gICAgICBpZiAoY29uZmlnLmhhc093blByb3BlcnR5KHByb3BOYW1lKSAmJiAhUkVTRVJWRURfUFJPUFMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hpbGRyZW4gY2FuIGJlIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQsIGFuZCB0aG9zZSBhcmUgdHJhbnNmZXJyZWQgb250b1xuICAvLyB0aGUgbmV3bHkgYWxsb2NhdGVkIHByb3BzIG9iamVjdC5cbiAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG4gIGlmIChjaGlsZHJlbkxlbmd0aCA9PT0gMSkge1xuICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gIH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7XG4gICAgdmFyIGNoaWxkQXJyYXkgPSBBcnJheShjaGlsZHJlbkxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbkxlbmd0aDsgaSsrKSB7XG4gICAgICBjaGlsZEFycmF5W2ldID0gYXJndW1lbnRzW2kgKyAyXTtcbiAgICB9XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZEFycmF5O1xuICB9XG5cbiAgcmV0dXJuIFJlYWN0RWxlbWVudChlbGVtZW50LnR5cGUsIGtleSwgcmVmLCBzZWxmLCBzb3VyY2UsIG93bmVyLCBwcm9wcyk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7P29iamVjdH0gb2JqZWN0XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBvYmplY3RgIGlzIGEgdmFsaWQgY29tcG9uZW50LlxuICogQGZpbmFsXG4gKi9cblJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudCA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdCAhPT0gbnVsbCAmJiBvYmplY3QuJCR0eXBlb2YgPT09IFJFQUNUX0VMRU1FTlRfVFlQRTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RFbGVtZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVsZW1lbnRWYWxpZGF0b3JcbiAqL1xuXG4vKipcbiAqIFJlYWN0RWxlbWVudFZhbGlkYXRvciBwcm92aWRlcyBhIHdyYXBwZXIgYXJvdW5kIGEgZWxlbWVudCBmYWN0b3J5XG4gKiB3aGljaCB2YWxpZGF0ZXMgdGhlIHByb3BzIHBhc3NlZCB0byB0aGUgZWxlbWVudC4gVGhpcyBpcyBpbnRlbmRlZCB0byBiZVxuICogdXNlZCBvbmx5IGluIERFViBhbmQgY291bGQgYmUgcmVwbGFjZWQgYnkgYSBzdGF0aWMgdHlwZSBjaGVja2VyIGZvciBsYW5ndWFnZXNcbiAqIHRoYXQgc3VwcG9ydCBpdC5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMnKTtcbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcblxudmFyIGNhbkRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9jYW5EZWZpbmVQcm9wZXJ0eScpO1xudmFyIGdldEl0ZXJhdG9yRm4gPSByZXF1aXJlKCcuL2dldEl0ZXJhdG9yRm4nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKSB7XG4gIGlmIChSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG4gICAgdmFyIG5hbWUgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKTtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIFdhcm4gaWYgdGhlcmUncyBubyBrZXkgZXhwbGljaXRseSBzZXQgb24gZHluYW1pYyBhcnJheXMgb2YgY2hpbGRyZW4gb3JcbiAqIG9iamVjdCBrZXlzIGFyZSBub3QgdmFsaWQuIFRoaXMgYWxsb3dzIHVzIHRvIGtlZXAgdHJhY2sgb2YgY2hpbGRyZW4gYmV0d2VlblxuICogdXBkYXRlcy5cbiAqL1xudmFyIG93bmVySGFzS2V5VXNlV2FybmluZyA9IHt9O1xuXG52YXIgbG9nZ2VkVHlwZUZhaWx1cmVzID0ge307XG5cbi8qKlxuICogV2FybiBpZiB0aGUgZWxlbWVudCBkb2Vzbid0IGhhdmUgYW4gZXhwbGljaXQga2V5IGFzc2lnbmVkIHRvIGl0LlxuICogVGhpcyBlbGVtZW50IGlzIGluIGFuIGFycmF5LiBUaGUgYXJyYXkgY291bGQgZ3JvdyBhbmQgc2hyaW5rIG9yIGJlXG4gKiByZW9yZGVyZWQuIEFsbCBjaGlsZHJlbiB0aGF0IGhhdmVuJ3QgYWxyZWFkeSBiZWVuIHZhbGlkYXRlZCBhcmUgcmVxdWlyZWQgdG9cbiAqIGhhdmUgYSBcImtleVwiIHByb3BlcnR5IGFzc2lnbmVkIHRvIGl0LlxuICpcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudCB0aGF0IHJlcXVpcmVzIGEga2V5LlxuICogQHBhcmFtIHsqfSBwYXJlbnRUeXBlIGVsZW1lbnQncyBwYXJlbnQncyB0eXBlLlxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUV4cGxpY2l0S2V5KGVsZW1lbnQsIHBhcmVudFR5cGUpIHtcbiAgaWYgKCFlbGVtZW50Ll9zdG9yZSB8fCBlbGVtZW50Ll9zdG9yZS52YWxpZGF0ZWQgfHwgZWxlbWVudC5rZXkgIT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBlbGVtZW50Ll9zdG9yZS52YWxpZGF0ZWQgPSB0cnVlO1xuXG4gIHZhciBhZGRlbmRhID0gZ2V0QWRkZW5kYUZvcktleVVzZSgndW5pcXVlS2V5JywgZWxlbWVudCwgcGFyZW50VHlwZSk7XG4gIGlmIChhZGRlbmRhID09PSBudWxsKSB7XG4gICAgLy8gd2UgYWxyZWFkeSBzaG93ZWQgdGhlIHdhcm5pbmdcbiAgICByZXR1cm47XG4gIH1cbiAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdFYWNoIGNoaWxkIGluIGFuIGFycmF5IG9yIGl0ZXJhdG9yIHNob3VsZCBoYXZlIGEgdW5pcXVlIFwia2V5XCIgcHJvcC4nICsgJyVzJXMlcycsIGFkZGVuZGEucGFyZW50T3JPd25lciB8fCAnJywgYWRkZW5kYS5jaGlsZE93bmVyIHx8ICcnLCBhZGRlbmRhLnVybCB8fCAnJykgOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogU2hhcmVkIHdhcm5pbmcgYW5kIG1vbml0b3JpbmcgY29kZSBmb3IgdGhlIGtleSB3YXJuaW5ncy5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlVHlwZSBBIGtleSB1c2VkIGZvciBkZS1kdXBpbmcgd2FybmluZ3MuXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudCBDb21wb25lbnQgdGhhdCByZXF1aXJlcyBhIGtleS5cbiAqIEBwYXJhbSB7Kn0gcGFyZW50VHlwZSBlbGVtZW50J3MgcGFyZW50J3MgdHlwZS5cbiAqIEByZXR1cm5zIHs/b2JqZWN0fSBBIHNldCBvZiBhZGRlbmRhIHRvIHVzZSBpbiB0aGUgd2FybmluZyBtZXNzYWdlLCBvciBudWxsXG4gKiBpZiB0aGUgd2FybmluZyBoYXMgYWxyZWFkeSBiZWVuIHNob3duIGJlZm9yZSAoYW5kIHNob3VsZG4ndCBiZSBzaG93biBhZ2FpbikuXG4gKi9cbmZ1bmN0aW9uIGdldEFkZGVuZGFGb3JLZXlVc2UobWVzc2FnZVR5cGUsIGVsZW1lbnQsIHBhcmVudFR5cGUpIHtcbiAgdmFyIGFkZGVuZHVtID0gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKCk7XG4gIGlmICghYWRkZW5kdW0pIHtcbiAgICB2YXIgcGFyZW50TmFtZSA9IHR5cGVvZiBwYXJlbnRUeXBlID09PSAnc3RyaW5nJyA/IHBhcmVudFR5cGUgOiBwYXJlbnRUeXBlLmRpc3BsYXlOYW1lIHx8IHBhcmVudFR5cGUubmFtZTtcbiAgICBpZiAocGFyZW50TmFtZSkge1xuICAgICAgYWRkZW5kdW0gPSAnIENoZWNrIHRoZSB0b3AtbGV2ZWwgcmVuZGVyIGNhbGwgdXNpbmcgPCcgKyBwYXJlbnROYW1lICsgJz4uJztcbiAgICB9XG4gIH1cblxuICB2YXIgbWVtb2l6ZXIgPSBvd25lckhhc0tleVVzZVdhcm5pbmdbbWVzc2FnZVR5cGVdIHx8IChvd25lckhhc0tleVVzZVdhcm5pbmdbbWVzc2FnZVR5cGVdID0ge30pO1xuICBpZiAobWVtb2l6ZXJbYWRkZW5kdW1dKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgbWVtb2l6ZXJbYWRkZW5kdW1dID0gdHJ1ZTtcblxuICB2YXIgYWRkZW5kYSA9IHtcbiAgICBwYXJlbnRPck93bmVyOiBhZGRlbmR1bSxcbiAgICB1cmw6ICcgU2VlIGh0dHBzOi8vZmIubWUvcmVhY3Qtd2FybmluZy1rZXlzIGZvciBtb3JlIGluZm9ybWF0aW9uLicsXG4gICAgY2hpbGRPd25lcjogbnVsbFxuICB9O1xuXG4gIC8vIFVzdWFsbHkgdGhlIGN1cnJlbnQgb3duZXIgaXMgdGhlIG9mZmVuZGVyLCBidXQgaWYgaXQgYWNjZXB0cyBjaGlsZHJlbiBhcyBhXG4gIC8vIHByb3BlcnR5LCBpdCBtYXkgYmUgdGhlIGNyZWF0b3Igb2YgdGhlIGNoaWxkIHRoYXQncyByZXNwb25zaWJsZSBmb3JcbiAgLy8gYXNzaWduaW5nIGl0IGEga2V5LlxuICBpZiAoZWxlbWVudCAmJiBlbGVtZW50Ll9vd25lciAmJiBlbGVtZW50Ll9vd25lciAhPT0gUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCkge1xuICAgIC8vIEdpdmUgdGhlIGNvbXBvbmVudCB0aGF0IG9yaWdpbmFsbHkgY3JlYXRlZCB0aGlzIGNoaWxkLlxuICAgIGFkZGVuZGEuY2hpbGRPd25lciA9ICcgSXQgd2FzIHBhc3NlZCBhIGNoaWxkIGZyb20gJyArIGVsZW1lbnQuX293bmVyLmdldE5hbWUoKSArICcuJztcbiAgfVxuXG4gIHJldHVybiBhZGRlbmRhO1xufVxuXG4vKipcbiAqIEVuc3VyZSB0aGF0IGV2ZXJ5IGVsZW1lbnQgZWl0aGVyIGlzIHBhc3NlZCBpbiBhIHN0YXRpYyBsb2NhdGlvbiwgaW4gYW5cbiAqIGFycmF5IHdpdGggYW4gZXhwbGljaXQga2V5cyBwcm9wZXJ0eSBkZWZpbmVkLCBvciBpbiBhbiBvYmplY3QgbGl0ZXJhbFxuICogd2l0aCB2YWxpZCBrZXkgcHJvcGVydHkuXG4gKlxuICogQGludGVybmFsXG4gKiBAcGFyYW0ge1JlYWN0Tm9kZX0gbm9kZSBTdGF0aWNhbGx5IHBhc3NlZCBjaGlsZCBvZiBhbnkgdHlwZS5cbiAqIEBwYXJhbSB7Kn0gcGFyZW50VHlwZSBub2RlJ3MgcGFyZW50J3MgdHlwZS5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVDaGlsZEtleXMobm9kZSwgcGFyZW50VHlwZSkge1xuICBpZiAodHlwZW9mIG5vZGUgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KG5vZGUpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY2hpbGQgPSBub2RlW2ldO1xuICAgICAgaWYgKFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZCkpIHtcbiAgICAgICAgdmFsaWRhdGVFeHBsaWNpdEtleShjaGlsZCwgcGFyZW50VHlwZSk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChub2RlKSkge1xuICAgIC8vIFRoaXMgZWxlbWVudCB3YXMgcGFzc2VkIGluIGEgdmFsaWQgbG9jYXRpb24uXG4gICAgaWYgKG5vZGUuX3N0b3JlKSB7XG4gICAgICBub2RlLl9zdG9yZS52YWxpZGF0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIGlmIChub2RlKSB7XG4gICAgdmFyIGl0ZXJhdG9yRm4gPSBnZXRJdGVyYXRvckZuKG5vZGUpO1xuICAgIC8vIEVudHJ5IGl0ZXJhdG9ycyBwcm92aWRlIGltcGxpY2l0IGtleXMuXG4gICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAgICAgIGlmIChpdGVyYXRvckZuICE9PSBub2RlLmVudHJpZXMpIHtcbiAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKG5vZGUpO1xuICAgICAgICB2YXIgc3RlcDtcbiAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgIGlmIChSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoc3RlcC52YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlRXhwbGljaXRLZXkoc3RlcC52YWx1ZSwgcGFyZW50VHlwZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQXNzZXJ0IHRoYXQgdGhlIHByb3BzIGFyZSB2YWxpZFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnROYW1lIE5hbWUgb2YgdGhlIGNvbXBvbmVudCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcFR5cGVzIE1hcCBvZiBwcm9wIG5hbWUgdG8gYSBSZWFjdFByb3BUeXBlXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbiBlLmcuIFwicHJvcFwiLCBcImNvbnRleHRcIiwgXCJjaGlsZCBjb250ZXh0XCJcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNoZWNrUHJvcFR5cGVzKGNvbXBvbmVudE5hbWUsIHByb3BUeXBlcywgcHJvcHMsIGxvY2F0aW9uKSB7XG4gIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BUeXBlcykge1xuICAgIGlmIChwcm9wVHlwZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICB2YXIgZXJyb3I7XG4gICAgICAvLyBQcm9wIHR5cGUgdmFsaWRhdGlvbiBtYXkgdGhyb3cuIEluIGNhc2UgdGhleSBkbywgd2UgZG9uJ3Qgd2FudCB0b1xuICAgICAgLy8gZmFpbCB0aGUgcmVuZGVyIHBoYXNlIHdoZXJlIGl0IGRpZG4ndCBmYWlsIGJlZm9yZS4gU28gd2UgbG9nIGl0LlxuICAgICAgLy8gQWZ0ZXIgdGhlc2UgaGF2ZSBiZWVuIGNsZWFuZWQgdXAsIHdlJ2xsIGxldCB0aGVtIHRocm93LlxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyBpcyBpbnRlbnRpb25hbGx5IGFuIGludmFyaWFudCB0aGF0IGdldHMgY2F1Z2h0LiBJdCdzIHRoZSBzYW1lXG4gICAgICAgIC8vIGJlaGF2aW9yIGFzIHdpdGhvdXQgdGhpcyBzdGF0ZW1lbnQgZXhjZXB0IHdpdGggYSBiZXR0ZXIgbWVzc2FnZS5cbiAgICAgICAgISh0eXBlb2YgcHJvcFR5cGVzW3Byb3BOYW1lXSA9PT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXM6ICVzIHR5cGUgYCVzYCBpcyBpbnZhbGlkOyBpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgZnJvbSAnICsgJ1JlYWN0LlByb3BUeXBlcy4nLCBjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgZXJyb3IgPSBwcm9wVHlwZXNbcHJvcE5hbWVdKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIG51bGwsICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCcpO1xuICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgZXJyb3IgPSBleDtcbiAgICAgIH1cbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFlcnJvciB8fCBlcnJvciBpbnN0YW5jZW9mIEVycm9yLCAnJXM6IHR5cGUgc3BlY2lmaWNhdGlvbiBvZiAlcyBgJXNgIGlzIGludmFsaWQ7IHRoZSB0eXBlIGNoZWNrZXIgJyArICdmdW5jdGlvbiBtdXN0IHJldHVybiBgbnVsbGAgb3IgYW4gYEVycm9yYCBidXQgcmV0dXJuZWQgYSAlcy4gJyArICdZb3UgbWF5IGhhdmUgZm9yZ290dGVuIHRvIHBhc3MgYW4gYXJndW1lbnQgdG8gdGhlIHR5cGUgY2hlY2tlciAnICsgJ2NyZWF0b3IgKGFycmF5T2YsIGluc3RhbmNlT2YsIG9iamVjdE9mLCBvbmVPZiwgb25lT2ZUeXBlLCBhbmQgJyArICdzaGFwZSBhbGwgcmVxdWlyZSBhbiBhcmd1bWVudCkuJywgY29tcG9uZW50TmFtZSB8fCAnUmVhY3QgY2xhc3MnLCBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl0sIHByb3BOYW1lLCB0eXBlb2YgZXJyb3IpIDogdW5kZWZpbmVkO1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgIShlcnJvci5tZXNzYWdlIGluIGxvZ2dlZFR5cGVGYWlsdXJlcykpIHtcbiAgICAgICAgLy8gT25seSBtb25pdG9yIHRoaXMgZmFpbHVyZSBvbmNlIGJlY2F1c2UgdGhlcmUgdGVuZHMgdG8gYmUgYSBsb3Qgb2YgdGhlXG4gICAgICAgIC8vIHNhbWUgZXJyb3IuXG4gICAgICAgIGxvZ2dlZFR5cGVGYWlsdXJlc1tlcnJvci5tZXNzYWdlXSA9IHRydWU7XG5cbiAgICAgICAgdmFyIGFkZGVuZHVtID0gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKCk7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFpbGVkIHByb3BUeXBlOiAlcyVzJywgZXJyb3IubWVzc2FnZSwgYWRkZW5kdW0pIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEdpdmVuIGFuIGVsZW1lbnQsIHZhbGlkYXRlIHRoYXQgaXRzIHByb3BzIGZvbGxvdyB0aGUgcHJvcFR5cGVzIGRlZmluaXRpb24sXG4gKiBwcm92aWRlZCBieSB0aGUgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudFxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BUeXBlcyhlbGVtZW50KSB7XG4gIHZhciBjb21wb25lbnRDbGFzcyA9IGVsZW1lbnQudHlwZTtcbiAgaWYgKHR5cGVvZiBjb21wb25lbnRDbGFzcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbmFtZSA9IGNvbXBvbmVudENsYXNzLmRpc3BsYXlOYW1lIHx8IGNvbXBvbmVudENsYXNzLm5hbWU7XG4gIGlmIChjb21wb25lbnRDbGFzcy5wcm9wVHlwZXMpIHtcbiAgICBjaGVja1Byb3BUeXBlcyhuYW1lLCBjb21wb25lbnRDbGFzcy5wcm9wVHlwZXMsIGVsZW1lbnQucHJvcHMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBjb21wb25lbnRDbGFzcy5nZXREZWZhdWx0UHJvcHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhjb21wb25lbnRDbGFzcy5nZXREZWZhdWx0UHJvcHMuaXNSZWFjdENsYXNzQXBwcm92ZWQsICdnZXREZWZhdWx0UHJvcHMgaXMgb25seSB1c2VkIG9uIGNsYXNzaWMgUmVhY3QuY3JlYXRlQ2xhc3MgJyArICdkZWZpbml0aW9ucy4gVXNlIGEgc3RhdGljIHByb3BlcnR5IG5hbWVkIGBkZWZhdWx0UHJvcHNgIGluc3RlYWQuJykgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxudmFyIFJlYWN0RWxlbWVudFZhbGlkYXRvciA9IHtcblxuICBjcmVhdGVFbGVtZW50OiBmdW5jdGlvbiAodHlwZSwgcHJvcHMsIGNoaWxkcmVuKSB7XG4gICAgdmFyIHZhbGlkVHlwZSA9IHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAvLyBXZSB3YXJuIGluIHRoaXMgY2FzZSBidXQgZG9uJ3QgdGhyb3cuIFdlIGV4cGVjdCB0aGUgZWxlbWVudCBjcmVhdGlvbiB0b1xuICAgIC8vIHN1Y2NlZWQgYW5kIHRoZXJlIHdpbGwgbGlrZWx5IGJlIGVycm9ycyBpbiByZW5kZXIuXG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodmFsaWRUeXBlLCAnUmVhY3QuY3JlYXRlRWxlbWVudDogdHlwZSBzaG91bGQgbm90IGJlIG51bGwsIHVuZGVmaW5lZCwgYm9vbGVhbiwgb3IgJyArICdudW1iZXIuIEl0IHNob3VsZCBiZSBhIHN0cmluZyAoZm9yIERPTSBlbGVtZW50cykgb3IgYSBSZWFjdENsYXNzICcgKyAnKGZvciBjb21wb3NpdGUgY29tcG9uZW50cykuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKSkgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgZWxlbWVudCA9IFJlYWN0RWxlbWVudC5jcmVhdGVFbGVtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICAvLyBUaGUgcmVzdWx0IGNhbiBiZSBudWxsaXNoIGlmIGEgbW9jayBvciBhIGN1c3RvbSBmdW5jdGlvbiBpcyB1c2VkLlxuICAgIC8vIFRPRE86IERyb3AgdGhpcyB3aGVuIHRoZXNlIGFyZSBubyBsb25nZXIgYWxsb3dlZCBhcyB0aGUgdHlwZSBhcmd1bWVudC5cbiAgICBpZiAoZWxlbWVudCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICAvLyBTa2lwIGtleSB3YXJuaW5nIGlmIHRoZSB0eXBlIGlzbid0IHZhbGlkIHNpbmNlIG91ciBrZXkgdmFsaWRhdGlvbiBsb2dpY1xuICAgIC8vIGRvZXNuJ3QgZXhwZWN0IGEgbm9uLXN0cmluZy9mdW5jdGlvbiB0eXBlIGFuZCBjYW4gdGhyb3cgY29uZnVzaW5nIGVycm9ycy5cbiAgICAvLyBXZSBkb24ndCB3YW50IGV4Y2VwdGlvbiBiZWhhdmlvciB0byBkaWZmZXIgYmV0d2VlbiBkZXYgYW5kIHByb2QuXG4gICAgLy8gKFJlbmRlcmluZyB3aWxsIHRocm93IHdpdGggYSBoZWxwZnVsIG1lc3NhZ2UgYW5kIGFzIHNvb24gYXMgdGhlIHR5cGUgaXNcbiAgICAvLyBmaXhlZCwgdGhlIGtleSB3YXJuaW5ncyB3aWxsIGFwcGVhci4pXG4gICAgaWYgKHZhbGlkVHlwZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsaWRhdGVDaGlsZEtleXMoYXJndW1lbnRzW2ldLCB0eXBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YWxpZGF0ZVByb3BUeXBlcyhlbGVtZW50KTtcblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9LFxuXG4gIGNyZWF0ZUZhY3Rvcnk6IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgdmFyIHZhbGlkYXRlZEZhY3RvcnkgPSBSZWFjdEVsZW1lbnRWYWxpZGF0b3IuY3JlYXRlRWxlbWVudC5iaW5kKG51bGwsIHR5cGUpO1xuICAgIC8vIExlZ2FjeSBob29rIFRPRE86IFdhcm4gaWYgdGhpcyBpcyBhY2Nlc3NlZFxuICAgIHZhbGlkYXRlZEZhY3RvcnkudHlwZSA9IHR5cGU7XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKGNhbkRlZmluZVByb3BlcnR5KSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2YWxpZGF0ZWRGYWN0b3J5LCAndHlwZScsIHtcbiAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFjdG9yeS50eXBlIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB0aGUgY2xhc3MgZGlyZWN0bHkgJyArICdiZWZvcmUgcGFzc2luZyBpdCB0byBjcmVhdGVGYWN0b3J5LicpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICd0eXBlJywge1xuICAgICAgICAgICAgICB2YWx1ZTogdHlwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdHlwZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB2YWxpZGF0ZWRGYWN0b3J5O1xuICB9LFxuXG4gIGNsb25lRWxlbWVudDogZnVuY3Rpb24gKGVsZW1lbnQsIHByb3BzLCBjaGlsZHJlbikge1xuICAgIHZhciBuZXdFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNsb25lRWxlbWVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGZvciAodmFyIGkgPSAyOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YWxpZGF0ZUNoaWxkS2V5cyhhcmd1bWVudHNbaV0sIG5ld0VsZW1lbnQudHlwZSk7XG4gICAgfVxuICAgIHZhbGlkYXRlUHJvcFR5cGVzKG5ld0VsZW1lbnQpO1xuICAgIHJldHVybiBuZXdFbGVtZW50O1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVtcHR5Q29tcG9uZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkgPSByZXF1aXJlKCcuL1JlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeScpO1xudmFyIFJlYWN0UmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVyJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcblxudmFyIHBsYWNlaG9sZGVyRWxlbWVudDtcblxudmFyIFJlYWN0RW1wdHlDb21wb25lbnRJbmplY3Rpb24gPSB7XG4gIGluamVjdEVtcHR5Q29tcG9uZW50OiBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgcGxhY2Vob2xkZXJFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50KTtcbiAgfVxufTtcblxuZnVuY3Rpb24gcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQoKSB7XG4gIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5yZWdpc3Rlck51bGxDb21wb25lbnRJRCh0aGlzLl9yb290Tm9kZUlEKTtcbn1cblxudmFyIFJlYWN0RW1wdHlDb21wb25lbnQgPSBmdW5jdGlvbiAoaW5zdGFudGlhdGUpIHtcbiAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBudWxsO1xuICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSBpbnN0YW50aWF0ZShwbGFjZWhvbGRlckVsZW1lbnQpO1xufTtcbmFzc2lnbihSZWFjdEVtcHR5Q29tcG9uZW50LnByb3RvdHlwZSwge1xuICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7fSxcbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShyZWdpc3Rlck51bGxDb21wb25lbnRJRCwgdGhpcyk7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IHJvb3RJRDtcbiAgICByZXR1cm4gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50LCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgfSxcbiAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKCkge30sXG4gIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQpO1xuICAgIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5kZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcbiAgfVxufSk7XG5cblJlYWN0RW1wdHlDb21wb25lbnQuaW5qZWN0aW9uID0gUmVhY3RFbXB0eUNvbXBvbmVudEluamVjdGlvbjtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVtcHR5Q29tcG9uZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8vIFRoaXMgcmVnaXN0cnkga2VlcHMgdHJhY2sgb2YgdGhlIFJlYWN0IElEcyBvZiB0aGUgY29tcG9uZW50cyB0aGF0IHJlbmRlcmVkIHRvXG4vLyBgbnVsbGAgKGluIHJlYWxpdHkgYSBwbGFjZWhvbGRlciBzdWNoIGFzIGBub3NjcmlwdGApXG52YXIgbnVsbENvbXBvbmVudElEc1JlZ2lzdHJ5ID0ge307XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIENvbXBvbmVudCdzIGBfcm9vdE5vZGVJRGAuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBjb21wb25lbnQgaXMgcmVuZGVyZWQgdG8gbnVsbC5cbiAqL1xuZnVuY3Rpb24gaXNOdWxsQ29tcG9uZW50SUQoaWQpIHtcbiAgcmV0dXJuICEhbnVsbENvbXBvbmVudElEc1JlZ2lzdHJ5W2lkXTtcbn1cblxuLyoqXG4gKiBNYXJrIHRoZSBjb21wb25lbnQgYXMgaGF2aW5nIHJlbmRlcmVkIHRvIG51bGwuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQ29tcG9uZW50J3MgYF9yb290Tm9kZUlEYC5cbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQoaWQpIHtcbiAgbnVsbENvbXBvbmVudElEc1JlZ2lzdHJ5W2lkXSA9IHRydWU7XG59XG5cbi8qKlxuICogVW5tYXJrIHRoZSBjb21wb25lbnQgYXMgaGF2aW5nIHJlbmRlcmVkIHRvIG51bGw6IGl0IHJlbmRlcnMgdG8gc29tZXRoaW5nIG5vdy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBDb21wb25lbnQncyBgX3Jvb3ROb2RlSURgLlxuICovXG5mdW5jdGlvbiBkZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEKGlkKSB7XG4gIGRlbGV0ZSBudWxsQ29tcG9uZW50SURzUmVnaXN0cnlbaWRdO1xufVxuXG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5ID0ge1xuICBpc051bGxDb21wb25lbnRJRDogaXNOdWxsQ29tcG9uZW50SUQsXG4gIHJlZ2lzdGVyTnVsbENvbXBvbmVudElEOiByZWdpc3Rlck51bGxDb21wb25lbnRJRCxcbiAgZGVyZWdpc3Rlck51bGxDb21wb25lbnRJRDogZGVyZWdpc3Rlck51bGxDb21wb25lbnRJRFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnk7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RXJyb3JVdGlsc1xuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBjYXVnaHRFcnJvciA9IG51bGw7XG5cbi8qKlxuICogQ2FsbCBhIGZ1bmN0aW9uIHdoaWxlIGd1YXJkaW5nIGFnYWluc3QgZXJyb3JzIHRoYXQgaGFwcGVucyB3aXRoaW4gaXQuXG4gKlxuICogQHBhcmFtIHs/U3RyaW5nfSBuYW1lIG9mIHRoZSBndWFyZCB0byB1c2UgZm9yIGxvZ2dpbmcgb3IgZGVidWdnaW5nXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBpbnZva2VcbiAqIEBwYXJhbSB7Kn0gYSBGaXJzdCBhcmd1bWVudFxuICogQHBhcmFtIHsqfSBiIFNlY29uZCBhcmd1bWVudFxuICovXG5mdW5jdGlvbiBpbnZva2VHdWFyZGVkQ2FsbGJhY2sobmFtZSwgZnVuYywgYSwgYikge1xuICB0cnkge1xuICAgIHJldHVybiBmdW5jKGEsIGIpO1xuICB9IGNhdGNoICh4KSB7XG4gICAgaWYgKGNhdWdodEVycm9yID09PSBudWxsKSB7XG4gICAgICBjYXVnaHRFcnJvciA9IHg7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxudmFyIFJlYWN0RXJyb3JVdGlscyA9IHtcbiAgaW52b2tlR3VhcmRlZENhbGxiYWNrOiBpbnZva2VHdWFyZGVkQ2FsbGJhY2ssXG5cbiAgLyoqXG4gICAqIEludm9rZWQgYnkgUmVhY3RUZXN0VXRpbHMuU2ltdWxhdGUgc28gdGhhdCBhbnkgZXJyb3JzIHRocm93biBieSB0aGUgZXZlbnRcbiAgICogaGFuZGxlciBhcmUgc3VyZSB0byBiZSByZXRocm93biBieSByZXRocm93Q2F1Z2h0RXJyb3IuXG4gICAqL1xuICBpbnZva2VHdWFyZGVkQ2FsbGJhY2tXaXRoQ2F0Y2g6IGludm9rZUd1YXJkZWRDYWxsYmFjayxcblxuICAvKipcbiAgICogRHVyaW5nIGV4ZWN1dGlvbiBvZiBndWFyZGVkIGZ1bmN0aW9ucyB3ZSB3aWxsIGNhcHR1cmUgdGhlIGZpcnN0IGVycm9yIHdoaWNoXG4gICAqIHdlIHdpbGwgcmV0aHJvdyB0byBiZSBoYW5kbGVkIGJ5IHRoZSB0b3AgbGV2ZWwgZXJyb3IgaGFuZGxlci5cbiAgICovXG4gIHJldGhyb3dDYXVnaHRFcnJvcjogZnVuY3Rpb24gKCkge1xuICAgIGlmIChjYXVnaHRFcnJvcikge1xuICAgICAgdmFyIGVycm9yID0gY2F1Z2h0RXJyb3I7XG4gICAgICBjYXVnaHRFcnJvciA9IG51bGw7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn07XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8qKlxuICAgKiBUbyBoZWxwIGRldmVsb3BtZW50IHdlIGNhbiBnZXQgYmV0dGVyIGRldnRvb2xzIGludGVncmF0aW9uIGJ5IHNpbXVsYXRpbmcgYVxuICAgKiByZWFsIGJyb3dzZXIgZXZlbnQuXG4gICAqL1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5kaXNwYXRjaEV2ZW50ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIGZha2VOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncmVhY3QnKTtcbiAgICBSZWFjdEVycm9yVXRpbHMuaW52b2tlR3VhcmRlZENhbGxiYWNrID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMsIGEsIGIpIHtcbiAgICAgIHZhciBib3VuZEZ1bmMgPSBmdW5jLmJpbmQobnVsbCwgYSwgYik7XG4gICAgICB2YXIgZXZ0VHlwZSA9ICdyZWFjdC0nICsgbmFtZTtcbiAgICAgIGZha2VOb2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZ0VHlwZSwgYm91bmRGdW5jLCBmYWxzZSk7XG4gICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICBldnQuaW5pdEV2ZW50KGV2dFR5cGUsIGZhbHNlLCBmYWxzZSk7XG4gICAgICBmYWtlTm9kZS5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgICBmYWtlTm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2dFR5cGUsIGJvdW5kRnVuYywgZmFsc2UpO1xuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVycm9yVXRpbHM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RXZlbnRFbWl0dGVyTWl4aW5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudFBsdWdpbkh1YiA9IHJlcXVpcmUoJy4vRXZlbnRQbHVnaW5IdWInKTtcblxuZnVuY3Rpb24gcnVuRXZlbnRRdWV1ZUluQmF0Y2goZXZlbnRzKSB7XG4gIEV2ZW50UGx1Z2luSHViLmVucXVldWVFdmVudHMoZXZlbnRzKTtcbiAgRXZlbnRQbHVnaW5IdWIucHJvY2Vzc0V2ZW50UXVldWUoZmFsc2UpO1xufVxuXG52YXIgUmVhY3RFdmVudEVtaXR0ZXJNaXhpbiA9IHtcblxuICAvKipcbiAgICogU3RyZWFtcyBhIGZpcmVkIHRvcC1sZXZlbCBldmVudCB0byBgRXZlbnRQbHVnaW5IdWJgIHdoZXJlIHBsdWdpbnMgaGF2ZSB0aGVcbiAgICogb3Bwb3J0dW5pdHkgdG8gY3JlYXRlIGBSZWFjdEV2ZW50YHMgdG8gYmUgZGlzcGF0Y2hlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGVudmlyb25tZW50IGV2ZW50LlxuICAgKi9cbiAgaGFuZGxlVG9wTGV2ZWw6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICB2YXIgZXZlbnRzID0gRXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50cyh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuICAgIHJ1bkV2ZW50UXVldWVJbkJhdGNoKGV2ZW50cyk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RFdmVudEVtaXR0ZXJNaXhpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFdmVudExpc3RlbmVyXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50TGlzdGVuZXIgPSByZXF1aXJlKCdmYmpzL2xpYi9FdmVudExpc3RlbmVyJyk7XG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlSGFuZGxlcycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZ2V0RXZlbnRUYXJnZXQgPSByZXF1aXJlKCcuL2dldEV2ZW50VGFyZ2V0Jyk7XG52YXIgZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9nZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvbicpO1xuXG52YXIgRE9DVU1FTlRfRlJBR01FTlRfTk9ERV9UWVBFID0gMTE7XG5cbi8qKlxuICogRmluZHMgdGhlIHBhcmVudCBSZWFjdCBjb21wb25lbnQgb2YgYG5vZGVgLlxuICpcbiAqIEBwYXJhbSB7Kn0gbm9kZVxuICogQHJldHVybiB7P0RPTUV2ZW50VGFyZ2V0fSBQYXJlbnQgY29udGFpbmVyLCBvciBgbnVsbGAgaWYgdGhlIHNwZWNpZmllZCBub2RlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIG5vdCBuZXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIGZpbmRQYXJlbnQobm9kZSkge1xuICAvLyBUT0RPOiBJdCBtYXkgYmUgYSBnb29kIGlkZWEgdG8gY2FjaGUgdGhpcyB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IERPTVxuICAvLyB0cmF2ZXJzYWwsIGJ1dCBjYWNoaW5nIGlzIGRpZmZpY3VsdCB0byBkbyBjb3JyZWN0bHkgd2l0aG91dCB1c2luZyBhXG4gIC8vIG11dGF0aW9uIG9ic2VydmVyIHRvIGxpc3RlbiBmb3IgYWxsIERPTSBjaGFuZ2VzLlxuICB2YXIgbm9kZUlEID0gUmVhY3RNb3VudC5nZXRJRChub2RlKTtcbiAgdmFyIHJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChub2RlSUQpO1xuICB2YXIgY29udGFpbmVyID0gUmVhY3RNb3VudC5maW5kUmVhY3RDb250YWluZXJGb3JJRChyb290SUQpO1xuICB2YXIgcGFyZW50ID0gUmVhY3RNb3VudC5nZXRGaXJzdFJlYWN0RE9NKGNvbnRhaW5lcik7XG4gIHJldHVybiBwYXJlbnQ7XG59XG5cbi8vIFVzZWQgdG8gc3RvcmUgYW5jZXN0b3IgaGllcmFyY2h5IGluIHRvcCBsZXZlbCBjYWxsYmFja1xuZnVuY3Rpb24gVG9wTGV2ZWxDYWxsYmFja0Jvb2tLZWVwaW5nKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgdGhpcy50b3BMZXZlbFR5cGUgPSB0b3BMZXZlbFR5cGU7XG4gIHRoaXMubmF0aXZlRXZlbnQgPSBuYXRpdmVFdmVudDtcbiAgdGhpcy5hbmNlc3RvcnMgPSBbXTtcbn1cbmFzc2lnbihUb3BMZXZlbENhbGxiYWNrQm9va0tlZXBpbmcucHJvdG90eXBlLCB7XG4gIGRlc3RydWN0b3I6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnRvcExldmVsVHlwZSA9IG51bGw7XG4gICAgdGhpcy5uYXRpdmVFdmVudCA9IG51bGw7XG4gICAgdGhpcy5hbmNlc3RvcnMubGVuZ3RoID0gMDtcbiAgfVxufSk7XG5Qb29sZWRDbGFzcy5hZGRQb29saW5nVG8oVG9wTGV2ZWxDYWxsYmFja0Jvb2tLZWVwaW5nLCBQb29sZWRDbGFzcy50d29Bcmd1bWVudFBvb2xlcik7XG5cbmZ1bmN0aW9uIGhhbmRsZVRvcExldmVsSW1wbChib29rS2VlcGluZykge1xuICAvLyBUT0RPOiBSZS1lbmFibGUgZXZlbnQucGF0aCBoYW5kbGluZ1xuICAvL1xuICAvLyBpZiAoYm9va0tlZXBpbmcubmF0aXZlRXZlbnQucGF0aCAmJiBib29rS2VlcGluZy5uYXRpdmVFdmVudC5wYXRoLmxlbmd0aCA+IDEpIHtcbiAgLy8gICAvLyBOZXcgYnJvd3NlcnMgaGF2ZSBhIHBhdGggYXR0cmlidXRlIG9uIG5hdGl2ZSBldmVudHNcbiAgLy8gICBoYW5kbGVUb3BMZXZlbFdpdGhQYXRoKGJvb2tLZWVwaW5nKTtcbiAgLy8gfSBlbHNlIHtcbiAgLy8gICAvLyBMZWdhY3kgYnJvd3NlcnMgZG9uJ3QgaGF2ZSBhIHBhdGggYXR0cmlidXRlIG9uIG5hdGl2ZSBldmVudHNcbiAgLy8gICBoYW5kbGVUb3BMZXZlbFdpdGhvdXRQYXRoKGJvb2tLZWVwaW5nKTtcbiAgLy8gfVxuXG4gIHZvaWQgaGFuZGxlVG9wTGV2ZWxXaXRoUGF0aDsgLy8gdGVtcG9yYXJpbHkgdW51c2VkXG4gIGhhbmRsZVRvcExldmVsV2l0aG91dFBhdGgoYm9va0tlZXBpbmcpO1xufVxuXG4vLyBMZWdhY3kgYnJvd3NlcnMgZG9uJ3QgaGF2ZSBhIHBhdGggYXR0cmlidXRlIG9uIG5hdGl2ZSBldmVudHNcbmZ1bmN0aW9uIGhhbmRsZVRvcExldmVsV2l0aG91dFBhdGgoYm9va0tlZXBpbmcpIHtcbiAgdmFyIHRvcExldmVsVGFyZ2V0ID0gUmVhY3RNb3VudC5nZXRGaXJzdFJlYWN0RE9NKGdldEV2ZW50VGFyZ2V0KGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50KSkgfHwgd2luZG93O1xuXG4gIC8vIExvb3AgdGhyb3VnaCB0aGUgaGllcmFyY2h5LCBpbiBjYXNlIHRoZXJlJ3MgYW55IG5lc3RlZCBjb21wb25lbnRzLlxuICAvLyBJdCdzIGltcG9ydGFudCB0aGF0IHdlIGJ1aWxkIHRoZSBhcnJheSBvZiBhbmNlc3RvcnMgYmVmb3JlIGNhbGxpbmcgYW55XG4gIC8vIGV2ZW50IGhhbmRsZXJzLCBiZWNhdXNlIGV2ZW50IGhhbmRsZXJzIGNhbiBtb2RpZnkgdGhlIERPTSwgbGVhZGluZyB0b1xuICAvLyBpbmNvbnNpc3RlbmNpZXMgd2l0aCBSZWFjdE1vdW50J3Mgbm9kZSBjYWNoZS4gU2VlICMxMTA1LlxuICB2YXIgYW5jZXN0b3IgPSB0b3BMZXZlbFRhcmdldDtcbiAgd2hpbGUgKGFuY2VzdG9yKSB7XG4gICAgYm9va0tlZXBpbmcuYW5jZXN0b3JzLnB1c2goYW5jZXN0b3IpO1xuICAgIGFuY2VzdG9yID0gZmluZFBhcmVudChhbmNlc3Rvcik7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGJvb2tLZWVwaW5nLmFuY2VzdG9ycy5sZW5ndGg7IGkrKykge1xuICAgIHRvcExldmVsVGFyZ2V0ID0gYm9va0tlZXBpbmcuYW5jZXN0b3JzW2ldO1xuICAgIHZhciB0b3BMZXZlbFRhcmdldElEID0gUmVhY3RNb3VudC5nZXRJRCh0b3BMZXZlbFRhcmdldCkgfHwgJyc7XG4gICAgUmVhY3RFdmVudExpc3RlbmVyLl9oYW5kbGVUb3BMZXZlbChib29rS2VlcGluZy50b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBib29rS2VlcGluZy5uYXRpdmVFdmVudCwgZ2V0RXZlbnRUYXJnZXQoYm9va0tlZXBpbmcubmF0aXZlRXZlbnQpKTtcbiAgfVxufVxuXG4vLyBOZXcgYnJvd3NlcnMgaGF2ZSBhIHBhdGggYXR0cmlidXRlIG9uIG5hdGl2ZSBldmVudHNcbmZ1bmN0aW9uIGhhbmRsZVRvcExldmVsV2l0aFBhdGgoYm9va0tlZXBpbmcpIHtcbiAgdmFyIHBhdGggPSBib29rS2VlcGluZy5uYXRpdmVFdmVudC5wYXRoO1xuICB2YXIgY3VycmVudE5hdGl2ZVRhcmdldCA9IHBhdGhbMF07XG4gIHZhciBldmVudHNGaXJlZCA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBjdXJyZW50UGF0aEVsZW1lbnQgPSBwYXRoW2ldO1xuICAgIGlmIChjdXJyZW50UGF0aEVsZW1lbnQubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREVfVFlQRSkge1xuICAgICAgY3VycmVudE5hdGl2ZVRhcmdldCA9IHBhdGhbaSArIDFdO1xuICAgIH1cbiAgICAvLyBUT0RPOiBzbG93XG4gICAgdmFyIHJlYWN0UGFyZW50ID0gUmVhY3RNb3VudC5nZXRGaXJzdFJlYWN0RE9NKGN1cnJlbnRQYXRoRWxlbWVudCk7XG4gICAgaWYgKHJlYWN0UGFyZW50ID09PSBjdXJyZW50UGF0aEVsZW1lbnQpIHtcbiAgICAgIHZhciBjdXJyZW50UGF0aEVsZW1lbnRJRCA9IFJlYWN0TW91bnQuZ2V0SUQoY3VycmVudFBhdGhFbGVtZW50KTtcbiAgICAgIHZhciBuZXdSb290SUQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQoY3VycmVudFBhdGhFbGVtZW50SUQpO1xuICAgICAgYm9va0tlZXBpbmcuYW5jZXN0b3JzLnB1c2goY3VycmVudFBhdGhFbGVtZW50KTtcblxuICAgICAgdmFyIHRvcExldmVsVGFyZ2V0SUQgPSBSZWFjdE1vdW50LmdldElEKGN1cnJlbnRQYXRoRWxlbWVudCkgfHwgJyc7XG4gICAgICBldmVudHNGaXJlZCsrO1xuICAgICAgUmVhY3RFdmVudExpc3RlbmVyLl9oYW5kbGVUb3BMZXZlbChib29rS2VlcGluZy50b3BMZXZlbFR5cGUsIGN1cnJlbnRQYXRoRWxlbWVudCwgdG9wTGV2ZWxUYXJnZXRJRCwgYm9va0tlZXBpbmcubmF0aXZlRXZlbnQsIGN1cnJlbnROYXRpdmVUYXJnZXQpO1xuXG4gICAgICAvLyBKdW1wIHRvIHRoZSByb290IG9mIHRoaXMgUmVhY3QgcmVuZGVyIHRyZWVcbiAgICAgIHdoaWxlIChjdXJyZW50UGF0aEVsZW1lbnRJRCAhPT0gbmV3Um9vdElEKSB7XG4gICAgICAgIGkrKztcbiAgICAgICAgY3VycmVudFBhdGhFbGVtZW50ID0gcGF0aFtpXTtcbiAgICAgICAgY3VycmVudFBhdGhFbGVtZW50SUQgPSBSZWFjdE1vdW50LmdldElEKGN1cnJlbnRQYXRoRWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChldmVudHNGaXJlZCA9PT0gMCkge1xuICAgIFJlYWN0RXZlbnRMaXN0ZW5lci5faGFuZGxlVG9wTGV2ZWwoYm9va0tlZXBpbmcudG9wTGV2ZWxUeXBlLCB3aW5kb3csICcnLCBib29rS2VlcGluZy5uYXRpdmVFdmVudCwgZ2V0RXZlbnRUYXJnZXQoYm9va0tlZXBpbmcubmF0aXZlRXZlbnQpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzY3JvbGxWYWx1ZU1vbml0b3IoY2IpIHtcbiAgdmFyIHNjcm9sbFBvc2l0aW9uID0gZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24od2luZG93KTtcbiAgY2Ioc2Nyb2xsUG9zaXRpb24pO1xufVxuXG52YXIgUmVhY3RFdmVudExpc3RlbmVyID0ge1xuICBfZW5hYmxlZDogdHJ1ZSxcbiAgX2hhbmRsZVRvcExldmVsOiBudWxsLFxuXG4gIFdJTkRPV19IQU5ETEU6IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IHdpbmRvdyA6IG51bGwsXG5cbiAgc2V0SGFuZGxlVG9wTGV2ZWw6IGZ1bmN0aW9uIChoYW5kbGVUb3BMZXZlbCkge1xuICAgIFJlYWN0RXZlbnRMaXN0ZW5lci5faGFuZGxlVG9wTGV2ZWwgPSBoYW5kbGVUb3BMZXZlbDtcbiAgfSxcblxuICBzZXRFbmFibGVkOiBmdW5jdGlvbiAoZW5hYmxlZCkge1xuICAgIFJlYWN0RXZlbnRMaXN0ZW5lci5fZW5hYmxlZCA9ICEhZW5hYmxlZDtcbiAgfSxcblxuICBpc0VuYWJsZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gUmVhY3RFdmVudExpc3RlbmVyLl9lbmFibGVkO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUcmFwcyB0b3AtbGV2ZWwgZXZlbnRzIGJ5IHVzaW5nIGV2ZW50IGJ1YmJsaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoYW5kbGVyQmFzZU5hbWUgRXZlbnQgbmFtZSAoZS5nLiBcImNsaWNrXCIpLlxuICAgKiBAcGFyYW0ge29iamVjdH0gaGFuZGxlIEVsZW1lbnQgb24gd2hpY2ggdG8gYXR0YWNoIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBBbiBvYmplY3Qgd2l0aCBhIHJlbW92ZSBmdW5jdGlvbiB3aGljaCB3aWxsIGZvcmNlZnVsbHlcbiAgICogICAgICAgICAgICAgICAgICByZW1vdmUgdGhlIGxpc3RlbmVyLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHRyYXBCdWJibGVkRXZlbnQ6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBoYW5kbGU7XG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIEV2ZW50TGlzdGVuZXIubGlzdGVuKGVsZW1lbnQsIGhhbmRsZXJCYXNlTmFtZSwgUmVhY3RFdmVudExpc3RlbmVyLmRpc3BhdGNoRXZlbnQuYmluZChudWxsLCB0b3BMZXZlbFR5cGUpKTtcbiAgfSxcblxuICAvKipcbiAgICogVHJhcHMgYSB0b3AtbGV2ZWwgZXZlbnQgYnkgdXNpbmcgZXZlbnQgY2FwdHVyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoYW5kbGVyQmFzZU5hbWUgRXZlbnQgbmFtZSAoZS5nLiBcImNsaWNrXCIpLlxuICAgKiBAcGFyYW0ge29iamVjdH0gaGFuZGxlIEVsZW1lbnQgb24gd2hpY2ggdG8gYXR0YWNoIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBBbiBvYmplY3Qgd2l0aCBhIHJlbW92ZSBmdW5jdGlvbiB3aGljaCB3aWxsIGZvcmNlZnVsbHlcbiAgICogICAgICAgICAgICAgICAgICByZW1vdmUgdGhlIGxpc3RlbmVyLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHRyYXBDYXB0dXJlZEV2ZW50OiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCBoYW5kbGVyQmFzZU5hbWUsIGhhbmRsZSkge1xuICAgIHZhciBlbGVtZW50ID0gaGFuZGxlO1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBFdmVudExpc3RlbmVyLmNhcHR1cmUoZWxlbWVudCwgaGFuZGxlckJhc2VOYW1lLCBSZWFjdEV2ZW50TGlzdGVuZXIuZGlzcGF0Y2hFdmVudC5iaW5kKG51bGwsIHRvcExldmVsVHlwZSkpO1xuICB9LFxuXG4gIG1vbml0b3JTY3JvbGxWYWx1ZTogZnVuY3Rpb24gKHJlZnJlc2gpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBzY3JvbGxWYWx1ZU1vbml0b3IuYmluZChudWxsLCByZWZyZXNoKTtcbiAgICBFdmVudExpc3RlbmVyLmxpc3Rlbih3aW5kb3csICdzY3JvbGwnLCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgZGlzcGF0Y2hFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgICBpZiAoIVJlYWN0RXZlbnRMaXN0ZW5lci5fZW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBib29rS2VlcGluZyA9IFRvcExldmVsQ2FsbGJhY2tCb29rS2VlcGluZy5nZXRQb29sZWQodG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEV2ZW50IHF1ZXVlIGJlaW5nIHByb2Nlc3NlZCBpbiB0aGUgc2FtZSBjeWNsZSBhbGxvd3NcbiAgICAgIC8vIGBwcmV2ZW50RGVmYXVsdGAuXG4gICAgICBSZWFjdFVwZGF0ZXMuYmF0Y2hlZFVwZGF0ZXMoaGFuZGxlVG9wTGV2ZWxJbXBsLCBib29rS2VlcGluZyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIFRvcExldmVsQ2FsbGJhY2tCb29rS2VlcGluZy5yZWxlYXNlKGJvb2tLZWVwaW5nKTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RFdmVudExpc3RlbmVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEluamVjdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTVByb3BlcnR5ID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eScpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xudmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdENsYXNzID0gcmVxdWlyZSgnLi9SZWFjdENsYXNzJyk7XG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbXB0eUNvbXBvbmVudCcpO1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJyk7XG52YXIgUmVhY3ROYXRpdmVDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0TmF0aXZlQ29tcG9uZW50Jyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBSZWFjdFJvb3RJbmRleCA9IHJlcXVpcmUoJy4vUmVhY3RSb290SW5kZXgnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgUmVhY3RJbmplY3Rpb24gPSB7XG4gIENvbXBvbmVudDogUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5pbmplY3Rpb24sXG4gIENsYXNzOiBSZWFjdENsYXNzLmluamVjdGlvbixcbiAgRE9NUHJvcGVydHk6IERPTVByb3BlcnR5LmluamVjdGlvbixcbiAgRW1wdHlDb21wb25lbnQ6IFJlYWN0RW1wdHlDb21wb25lbnQuaW5qZWN0aW9uLFxuICBFdmVudFBsdWdpbkh1YjogRXZlbnRQbHVnaW5IdWIuaW5qZWN0aW9uLFxuICBFdmVudEVtaXR0ZXI6IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5pbmplY3Rpb24sXG4gIE5hdGl2ZUNvbXBvbmVudDogUmVhY3ROYXRpdmVDb21wb25lbnQuaW5qZWN0aW9uLFxuICBQZXJmOiBSZWFjdFBlcmYuaW5qZWN0aW9uLFxuICBSb290SW5kZXg6IFJlYWN0Um9vdEluZGV4LmluamVjdGlvbixcbiAgVXBkYXRlczogUmVhY3RVcGRhdGVzLmluamVjdGlvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEluamVjdGlvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RJbnB1dFNlbGVjdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NU2VsZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdERPTVNlbGVjdGlvbicpO1xuXG52YXIgY29udGFpbnNOb2RlID0gcmVxdWlyZSgnZmJqcy9saWIvY29udGFpbnNOb2RlJyk7XG52YXIgZm9jdXNOb2RlID0gcmVxdWlyZSgnZmJqcy9saWIvZm9jdXNOb2RlJyk7XG52YXIgZ2V0QWN0aXZlRWxlbWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL2dldEFjdGl2ZUVsZW1lbnQnKTtcblxuZnVuY3Rpb24gaXNJbkRvY3VtZW50KG5vZGUpIHtcbiAgcmV0dXJuIGNvbnRhaW5zTm9kZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIG5vZGUpO1xufVxuXG4vKipcbiAqIEBSZWFjdElucHV0U2VsZWN0aW9uOiBSZWFjdCBpbnB1dCBzZWxlY3Rpb24gbW9kdWxlLiBCYXNlZCBvbiBTZWxlY3Rpb24uanMsXG4gKiBidXQgbW9kaWZpZWQgdG8gYmUgc3VpdGFibGUgZm9yIHJlYWN0IGFuZCBoYXMgYSBjb3VwbGUgb2YgYnVnIGZpeGVzIChkb2Vzbid0XG4gKiBhc3N1bWUgYnV0dG9ucyBoYXZlIHJhbmdlIHNlbGVjdGlvbnMgYWxsb3dlZCkuXG4gKiBJbnB1dCBzZWxlY3Rpb24gbW9kdWxlIGZvciBSZWFjdC5cbiAqL1xudmFyIFJlYWN0SW5wdXRTZWxlY3Rpb24gPSB7XG5cbiAgaGFzU2VsZWN0aW9uQ2FwYWJpbGl0aWVzOiBmdW5jdGlvbiAoZWxlbSkge1xuICAgIHZhciBub2RlTmFtZSA9IGVsZW0gJiYgZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIG5vZGVOYW1lICYmIChub2RlTmFtZSA9PT0gJ2lucHV0JyAmJiBlbGVtLnR5cGUgPT09ICd0ZXh0JyB8fCBub2RlTmFtZSA9PT0gJ3RleHRhcmVhJyB8fCBlbGVtLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnKTtcbiAgfSxcblxuICBnZXRTZWxlY3Rpb25JbmZvcm1hdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBmb2N1c2VkRWxlbSA9IGdldEFjdGl2ZUVsZW1lbnQoKTtcbiAgICByZXR1cm4ge1xuICAgICAgZm9jdXNlZEVsZW06IGZvY3VzZWRFbGVtLFxuICAgICAgc2VsZWN0aW9uUmFuZ2U6IFJlYWN0SW5wdXRTZWxlY3Rpb24uaGFzU2VsZWN0aW9uQ2FwYWJpbGl0aWVzKGZvY3VzZWRFbGVtKSA/IFJlYWN0SW5wdXRTZWxlY3Rpb24uZ2V0U2VsZWN0aW9uKGZvY3VzZWRFbGVtKSA6IG51bGxcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcmVzdG9yZVNlbGVjdGlvbjogSWYgYW55IHNlbGVjdGlvbiBpbmZvcm1hdGlvbiB3YXMgcG90ZW50aWFsbHkgbG9zdCxcbiAgICogcmVzdG9yZSBpdC4gVGhpcyBpcyB1c2VmdWwgd2hlbiBwZXJmb3JtaW5nIG9wZXJhdGlvbnMgdGhhdCBjb3VsZCByZW1vdmUgZG9tXG4gICAqIG5vZGVzIGFuZCBwbGFjZSB0aGVtIGJhY2sgaW4sIHJlc3VsdGluZyBpbiBmb2N1cyBiZWluZyBsb3N0LlxuICAgKi9cbiAgcmVzdG9yZVNlbGVjdGlvbjogZnVuY3Rpb24gKHByaW9yU2VsZWN0aW9uSW5mb3JtYXRpb24pIHtcbiAgICB2YXIgY3VyRm9jdXNlZEVsZW0gPSBnZXRBY3RpdmVFbGVtZW50KCk7XG4gICAgdmFyIHByaW9yRm9jdXNlZEVsZW0gPSBwcmlvclNlbGVjdGlvbkluZm9ybWF0aW9uLmZvY3VzZWRFbGVtO1xuICAgIHZhciBwcmlvclNlbGVjdGlvblJhbmdlID0gcHJpb3JTZWxlY3Rpb25JbmZvcm1hdGlvbi5zZWxlY3Rpb25SYW5nZTtcbiAgICBpZiAoY3VyRm9jdXNlZEVsZW0gIT09IHByaW9yRm9jdXNlZEVsZW0gJiYgaXNJbkRvY3VtZW50KHByaW9yRm9jdXNlZEVsZW0pKSB7XG4gICAgICBpZiAoUmVhY3RJbnB1dFNlbGVjdGlvbi5oYXNTZWxlY3Rpb25DYXBhYmlsaXRpZXMocHJpb3JGb2N1c2VkRWxlbSkpIHtcbiAgICAgICAgUmVhY3RJbnB1dFNlbGVjdGlvbi5zZXRTZWxlY3Rpb24ocHJpb3JGb2N1c2VkRWxlbSwgcHJpb3JTZWxlY3Rpb25SYW5nZSk7XG4gICAgICB9XG4gICAgICBmb2N1c05vZGUocHJpb3JGb2N1c2VkRWxlbSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAZ2V0U2VsZWN0aW9uOiBHZXRzIHRoZSBzZWxlY3Rpb24gYm91bmRzIG9mIGEgZm9jdXNlZCB0ZXh0YXJlYSwgaW5wdXQgb3JcbiAgICogY29udGVudEVkaXRhYmxlIG5vZGUuXG4gICAqIC1AaW5wdXQ6IExvb2sgdXAgc2VsZWN0aW9uIGJvdW5kcyBvZiB0aGlzIGlucHV0XG4gICAqIC1AcmV0dXJuIHtzdGFydDogc2VsZWN0aW9uU3RhcnQsIGVuZDogc2VsZWN0aW9uRW5kfVxuICAgKi9cbiAgZ2V0U2VsZWN0aW9uOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICB2YXIgc2VsZWN0aW9uO1xuXG4gICAgaWYgKCdzZWxlY3Rpb25TdGFydCcgaW4gaW5wdXQpIHtcbiAgICAgIC8vIE1vZGVybiBicm93c2VyIHdpdGggaW5wdXQgb3IgdGV4dGFyZWEuXG4gICAgICBzZWxlY3Rpb24gPSB7XG4gICAgICAgIHN0YXJ0OiBpbnB1dC5zZWxlY3Rpb25TdGFydCxcbiAgICAgICAgZW5kOiBpbnB1dC5zZWxlY3Rpb25FbmRcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChkb2N1bWVudC5zZWxlY3Rpb24gJiYgKGlucHV0Lm5vZGVOYW1lICYmIGlucHV0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcpKSB7XG4gICAgICAvLyBJRTggaW5wdXQuXG4gICAgICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcbiAgICAgIC8vIFRoZXJlIGNhbiBvbmx5IGJlIG9uZSBzZWxlY3Rpb24gcGVyIGRvY3VtZW50IGluIElFLCBzbyBpdCBtdXN0XG4gICAgICAvLyBiZSBpbiBvdXIgZWxlbWVudC5cbiAgICAgIGlmIChyYW5nZS5wYXJlbnRFbGVtZW50KCkgPT09IGlucHV0KSB7XG4gICAgICAgIHNlbGVjdGlvbiA9IHtcbiAgICAgICAgICBzdGFydDogLXJhbmdlLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgLWlucHV0LnZhbHVlLmxlbmd0aCksXG4gICAgICAgICAgZW5kOiAtcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgLWlucHV0LnZhbHVlLmxlbmd0aClcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ29udGVudCBlZGl0YWJsZSBvciBvbGQgSUUgdGV4dGFyZWEuXG4gICAgICBzZWxlY3Rpb24gPSBSZWFjdERPTVNlbGVjdGlvbi5nZXRPZmZzZXRzKGlucHV0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZWN0aW9uIHx8IHsgc3RhcnQ6IDAsIGVuZDogMCB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBAc2V0U2VsZWN0aW9uOiBTZXRzIHRoZSBzZWxlY3Rpb24gYm91bmRzIG9mIGEgdGV4dGFyZWEgb3IgaW5wdXQgYW5kIGZvY3VzZXNcbiAgICogdGhlIGlucHV0LlxuICAgKiAtQGlucHV0ICAgICBTZXQgc2VsZWN0aW9uIGJvdW5kcyBvZiB0aGlzIGlucHV0IG9yIHRleHRhcmVhXG4gICAqIC1Ab2Zmc2V0cyAgIE9iamVjdCBvZiBzYW1lIGZvcm0gdGhhdCBpcyByZXR1cm5lZCBmcm9tIGdldCpcbiAgICovXG4gIHNldFNlbGVjdGlvbjogZnVuY3Rpb24gKGlucHV0LCBvZmZzZXRzKSB7XG4gICAgdmFyIHN0YXJ0ID0gb2Zmc2V0cy5zdGFydDtcbiAgICB2YXIgZW5kID0gb2Zmc2V0cy5lbmQ7XG4gICAgaWYgKHR5cGVvZiBlbmQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBlbmQgPSBzdGFydDtcbiAgICB9XG5cbiAgICBpZiAoJ3NlbGVjdGlvblN0YXJ0JyBpbiBpbnB1dCkge1xuICAgICAgaW5wdXQuc2VsZWN0aW9uU3RhcnQgPSBzdGFydDtcbiAgICAgIGlucHV0LnNlbGVjdGlvbkVuZCA9IE1hdGgubWluKGVuZCwgaW5wdXQudmFsdWUubGVuZ3RoKTtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiAoaW5wdXQubm9kZU5hbWUgJiYgaW5wdXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0JykpIHtcbiAgICAgIHZhciByYW5nZSA9IGlucHV0LmNyZWF0ZVRleHRSYW5nZSgpO1xuICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XG4gICAgICByYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHN0YXJ0KTtcbiAgICAgIHJhbmdlLm1vdmVFbmQoJ2NoYXJhY3RlcicsIGVuZCAtIHN0YXJ0KTtcbiAgICAgIHJhbmdlLnNlbGVjdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBSZWFjdERPTVNlbGVjdGlvbi5zZXRPZmZzZXRzKGlucHV0LCBvZmZzZXRzKTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RJbnB1dFNlbGVjdGlvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RJbnN0YW5jZUhhbmRsZXNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RSb290SW5kZXggPSByZXF1aXJlKCcuL1JlYWN0Um9vdEluZGV4Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIFNFUEFSQVRPUiA9ICcuJztcbnZhciBTRVBBUkFUT1JfTEVOR1RIID0gU0VQQVJBVE9SLmxlbmd0aDtcblxuLyoqXG4gKiBNYXhpbXVtIGRlcHRoIG9mIHRyYXZlcnNhbHMgYmVmb3JlIHdlIGNvbnNpZGVyIHRoZSBwb3NzaWJpbGl0eSBvZiBhIGJhZCBJRC5cbiAqL1xudmFyIE1BWF9UUkVFX0RFUFRIID0gMTAwMDA7XG5cbi8qKlxuICogQ3JlYXRlcyBhIERPTSBJRCBwcmVmaXggdG8gdXNlIHdoZW4gbW91bnRpbmcgUmVhY3QgY29tcG9uZW50cy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggQSB1bmlxdWUgaW50ZWdlclxuICogQHJldHVybiB7c3RyaW5nfSBSZWFjdCByb290IElELlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGdldFJlYWN0Um9vdElEU3RyaW5nKGluZGV4KSB7XG4gIHJldHVybiBTRVBBUkFUT1IgKyBpbmRleC50b1N0cmluZygzNik7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgY2hhcmFjdGVyIGluIHRoZSBzdXBwbGllZCBJRCBpcyBhIHNlcGFyYXRvciBvciB0aGUgZW5kLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBIFJlYWN0IERPTSBJRC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCBvZiB0aGUgY2hhcmFjdGVyIHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY2hhcmFjdGVyIGlzIGEgc2VwYXJhdG9yIG9yIGVuZCBvZiB0aGUgSUQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpc0JvdW5kYXJ5KGlkLCBpbmRleCkge1xuICByZXR1cm4gaWQuY2hhckF0KGluZGV4KSA9PT0gU0VQQVJBVE9SIHx8IGluZGV4ID09PSBpZC5sZW5ndGg7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBzdXBwbGllZCBzdHJpbmcgaXMgYSB2YWxpZCBSZWFjdCBET00gSUQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIEEgUmVhY3QgRE9NIElELCBtYXliZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHN0cmluZyBpcyBhIHZhbGlkIFJlYWN0IERPTSBJRC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWRJRChpZCkge1xuICByZXR1cm4gaWQgPT09ICcnIHx8IGlkLmNoYXJBdCgwKSA9PT0gU0VQQVJBVE9SICYmIGlkLmNoYXJBdChpZC5sZW5ndGggLSAxKSAhPT0gU0VQQVJBVE9SO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgZmlyc3QgSUQgaXMgYW4gYW5jZXN0b3Igb2Ygb3IgZXF1YWwgdG8gdGhlIHNlY29uZCBJRC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYW5jZXN0b3JJRFxuICogQHBhcmFtIHtzdHJpbmd9IGRlc2NlbmRhbnRJRFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBgYW5jZXN0b3JJRGAgaXMgYW4gYW5jZXN0b3Igb2YgYGRlc2NlbmRhbnRJRGAuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gaXNBbmNlc3RvcklET2YoYW5jZXN0b3JJRCwgZGVzY2VuZGFudElEKSB7XG4gIHJldHVybiBkZXNjZW5kYW50SUQuaW5kZXhPZihhbmNlc3RvcklEKSA9PT0gMCAmJiBpc0JvdW5kYXJ5KGRlc2NlbmRhbnRJRCwgYW5jZXN0b3JJRC5sZW5ndGgpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHBhcmVudCBJRCBvZiB0aGUgc3VwcGxpZWQgUmVhY3QgRE9NIElELCBgaWRgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiBhIGNvbXBvbmVudC5cbiAqIEByZXR1cm4ge3N0cmluZ30gSUQgb2YgdGhlIHBhcmVudCwgb3IgYW4gZW1wdHkgc3RyaW5nLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0UGFyZW50SUQoaWQpIHtcbiAgcmV0dXJuIGlkID8gaWQuc3Vic3RyKDAsIGlkLmxhc3RJbmRleE9mKFNFUEFSQVRPUikpIDogJyc7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbmV4dCBET00gSUQgb24gdGhlIHRyZWUgcGF0aCBmcm9tIHRoZSBzdXBwbGllZCBgYW5jZXN0b3JJRGAgdG8gdGhlXG4gKiBzdXBwbGllZCBgZGVzdGluYXRpb25JRGAuIElmIHRoZXkgYXJlIGVxdWFsLCB0aGUgSUQgaXMgcmV0dXJuZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGFuY2VzdG9ySUQgSUQgb2YgYW4gYW5jZXN0b3Igbm9kZSBvZiBgZGVzdGluYXRpb25JRGAuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb25JRCBJRCBvZiB0aGUgZGVzdGluYXRpb24gbm9kZS5cbiAqIEByZXR1cm4ge3N0cmluZ30gTmV4dCBJRCBvbiB0aGUgcGF0aCBmcm9tIGBhbmNlc3RvcklEYCB0byBgZGVzdGluYXRpb25JRGAuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXROZXh0RGVzY2VuZGFudElEKGFuY2VzdG9ySUQsIGRlc3RpbmF0aW9uSUQpIHtcbiAgIShpc1ZhbGlkSUQoYW5jZXN0b3JJRCkgJiYgaXNWYWxpZElEKGRlc3RpbmF0aW9uSUQpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdnZXROZXh0RGVzY2VuZGFudElEKCVzLCAlcyk6IFJlY2VpdmVkIGFuIGludmFsaWQgUmVhY3QgRE9NIElELicsIGFuY2VzdG9ySUQsIGRlc3RpbmF0aW9uSUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgIWlzQW5jZXN0b3JJRE9mKGFuY2VzdG9ySUQsIGRlc3RpbmF0aW9uSUQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2dldE5leHREZXNjZW5kYW50SUQoLi4uKTogUmVhY3QgaGFzIG1hZGUgYW4gaW52YWxpZCBhc3N1bXB0aW9uIGFib3V0ICcgKyAndGhlIERPTSBoaWVyYXJjaHkuIEV4cGVjdGVkIGAlc2AgdG8gYmUgYW4gYW5jZXN0b3Igb2YgYCVzYC4nLCBhbmNlc3RvcklELCBkZXN0aW5hdGlvbklEKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGlmIChhbmNlc3RvcklEID09PSBkZXN0aW5hdGlvbklEKSB7XG4gICAgcmV0dXJuIGFuY2VzdG9ySUQ7XG4gIH1cbiAgLy8gU2tpcCBvdmVyIHRoZSBhbmNlc3RvciBhbmQgdGhlIGltbWVkaWF0ZSBzZXBhcmF0b3IuIFRyYXZlcnNlIHVudGlsIHdlIGhpdFxuICAvLyBhbm90aGVyIHNlcGFyYXRvciBvciB3ZSByZWFjaCB0aGUgZW5kIG9mIGBkZXN0aW5hdGlvbklEYC5cbiAgdmFyIHN0YXJ0ID0gYW5jZXN0b3JJRC5sZW5ndGggKyBTRVBBUkFUT1JfTEVOR1RIO1xuICB2YXIgaTtcbiAgZm9yIChpID0gc3RhcnQ7IGkgPCBkZXN0aW5hdGlvbklELmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGlzQm91bmRhcnkoZGVzdGluYXRpb25JRCwgaSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZGVzdGluYXRpb25JRC5zdWJzdHIoMCwgaSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbmVhcmVzdCBjb21tb24gYW5jZXN0b3IgSUQgb2YgdHdvIElEcy5cbiAqXG4gKiBVc2luZyB0aGlzIElEIHNjaGVtZSwgdGhlIG5lYXJlc3QgY29tbW9uIGFuY2VzdG9yIElEIGlzIHRoZSBsb25nZXN0IGNvbW1vblxuICogcHJlZml4IG9mIHRoZSB0d28gSURzIHRoYXQgaW1tZWRpYXRlbHkgcHJlY2VkZWQgYSBcIm1hcmtlclwiIGluIGJvdGggc3RyaW5ncy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gb25lSURcbiAqIEBwYXJhbSB7c3RyaW5nfSB0d29JRFxuICogQHJldHVybiB7c3RyaW5nfSBOZWFyZXN0IGNvbW1vbiBhbmNlc3RvciBJRCwgb3IgdGhlIGVtcHR5IHN0cmluZyBpZiBub25lLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0Rmlyc3RDb21tb25BbmNlc3RvcklEKG9uZUlELCB0d29JRCkge1xuICB2YXIgbWluTGVuZ3RoID0gTWF0aC5taW4ob25lSUQubGVuZ3RoLCB0d29JRC5sZW5ndGgpO1xuICBpZiAobWluTGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHZhciBsYXN0Q29tbW9uTWFya2VySW5kZXggPSAwO1xuICAvLyBVc2UgYDw9YCB0byB0cmF2ZXJzZSB1bnRpbCB0aGUgXCJFT0xcIiBvZiB0aGUgc2hvcnRlciBzdHJpbmcuXG4gIGZvciAodmFyIGkgPSAwOyBpIDw9IG1pbkxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGlzQm91bmRhcnkob25lSUQsIGkpICYmIGlzQm91bmRhcnkodHdvSUQsIGkpKSB7XG4gICAgICBsYXN0Q29tbW9uTWFya2VySW5kZXggPSBpO1xuICAgIH0gZWxzZSBpZiAob25lSUQuY2hhckF0KGkpICE9PSB0d29JRC5jaGFyQXQoaSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICB2YXIgbG9uZ2VzdENvbW1vbklEID0gb25lSUQuc3Vic3RyKDAsIGxhc3RDb21tb25NYXJrZXJJbmRleCk7XG4gICFpc1ZhbGlkSUQobG9uZ2VzdENvbW1vbklEKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdnZXRGaXJzdENvbW1vbkFuY2VzdG9ySUQoJXMsICVzKTogRXhwZWN0ZWQgYSB2YWxpZCBSZWFjdCBET00gSUQ6ICVzJywgb25lSUQsIHR3b0lELCBsb25nZXN0Q29tbW9uSUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgcmV0dXJuIGxvbmdlc3RDb21tb25JRDtcbn1cblxuLyoqXG4gKiBUcmF2ZXJzZXMgdGhlIHBhcmVudCBwYXRoIGJldHdlZW4gdHdvIElEcyAoZWl0aGVyIHVwIG9yIGRvd24pLiBUaGUgSURzIG11c3RcbiAqIG5vdCBiZSB0aGUgc2FtZSwgYW5kIHRoZXJlIG11c3QgZXhpc3QgYSBwYXJlbnQgcGF0aCBiZXR3ZWVuIHRoZW0uIElmIHRoZVxuICogY2FsbGJhY2sgcmV0dXJucyBgZmFsc2VgLCB0cmF2ZXJzYWwgaXMgc3RvcHBlZC5cbiAqXG4gKiBAcGFyYW0gez9zdHJpbmd9IHN0YXJ0IElEIGF0IHdoaWNoIHRvIHN0YXJ0IHRyYXZlcnNhbC5cbiAqIEBwYXJhbSB7P3N0cmluZ30gc3RvcCBJRCBhdCB3aGljaCB0byBlbmQgdHJhdmVyc2FsLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgQ2FsbGJhY2sgdG8gaW52b2tlIGVhY2ggSUQgd2l0aC5cbiAqIEBwYXJhbSB7Kn0gYXJnIEFyZ3VtZW50IHRvIGludm9rZSB0aGUgY2FsbGJhY2sgd2l0aC5cbiAqIEBwYXJhbSB7P2Jvb2xlYW59IHNraXBGaXJzdCBXaGV0aGVyIG9yIG5vdCB0byBza2lwIHRoZSBmaXJzdCBub2RlLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gc2tpcExhc3QgV2hldGhlciBvciBub3QgdG8gc2tpcCB0aGUgbGFzdCBub2RlLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VQYXJlbnRQYXRoKHN0YXJ0LCBzdG9wLCBjYiwgYXJnLCBza2lwRmlyc3QsIHNraXBMYXN0KSB7XG4gIHN0YXJ0ID0gc3RhcnQgfHwgJyc7XG4gIHN0b3AgPSBzdG9wIHx8ICcnO1xuICAhKHN0YXJ0ICE9PSBzdG9wKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0cmF2ZXJzZVBhcmVudFBhdGgoLi4uKTogQ2Fubm90IHRyYXZlcnNlIGZyb20gYW5kIHRvIHRoZSBzYW1lIElELCBgJXNgLicsIHN0YXJ0KSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHZhciB0cmF2ZXJzZVVwID0gaXNBbmNlc3RvcklET2Yoc3RvcCwgc3RhcnQpO1xuICAhKHRyYXZlcnNlVXAgfHwgaXNBbmNlc3RvcklET2Yoc3RhcnQsIHN0b3ApKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0cmF2ZXJzZVBhcmVudFBhdGgoJXMsICVzLCAuLi4pOiBDYW5ub3QgdHJhdmVyc2UgZnJvbSB0d28gSURzIHRoYXQgZG8gJyArICdub3QgaGF2ZSBhIHBhcmVudCBwYXRoLicsIHN0YXJ0LCBzdG9wKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIC8vIFRyYXZlcnNlIGZyb20gYHN0YXJ0YCB0byBgc3RvcGAgb25lIGRlcHRoIGF0IGEgdGltZS5cbiAgdmFyIGRlcHRoID0gMDtcbiAgdmFyIHRyYXZlcnNlID0gdHJhdmVyc2VVcCA/IGdldFBhcmVudElEIDogZ2V0TmV4dERlc2NlbmRhbnRJRDtcbiAgZm9yICh2YXIgaWQgPSBzdGFydDs7IC8qIHVudGlsIGJyZWFrICovaWQgPSB0cmF2ZXJzZShpZCwgc3RvcCkpIHtcbiAgICB2YXIgcmV0O1xuICAgIGlmICgoIXNraXBGaXJzdCB8fCBpZCAhPT0gc3RhcnQpICYmICghc2tpcExhc3QgfHwgaWQgIT09IHN0b3ApKSB7XG4gICAgICByZXQgPSBjYihpZCwgdHJhdmVyc2VVcCwgYXJnKTtcbiAgICB9XG4gICAgaWYgKHJldCA9PT0gZmFsc2UgfHwgaWQgPT09IHN0b3ApIHtcbiAgICAgIC8vIE9ubHkgYnJlYWsgLy9hZnRlci8vIHZpc2l0aW5nIGBzdG9wYC5cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAhKGRlcHRoKysgPCBNQVhfVFJFRV9ERVBUSCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndHJhdmVyc2VQYXJlbnRQYXRoKCVzLCAlcywgLi4uKTogRGV0ZWN0ZWQgYW4gaW5maW5pdGUgbG9vcCB3aGlsZSAnICsgJ3RyYXZlcnNpbmcgdGhlIFJlYWN0IERPTSBJRCB0cmVlLiBUaGlzIG1heSBiZSBkdWUgdG8gbWFsZm9ybWVkIElEczogJXMnLCBzdGFydCwgc3RvcCwgaWQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIE1hbmFnZXMgdGhlIElEcyBhc3NpZ25lZCB0byBET00gcmVwcmVzZW50YXRpb25zIG9mIFJlYWN0IGNvbXBvbmVudHMuIFRoaXNcbiAqIHVzZXMgYSBzcGVjaWZpYyBzY2hlbWUgaW4gb3JkZXIgdG8gdHJhdmVyc2UgdGhlIERPTSBlZmZpY2llbnRseSAoZS5nLiBpblxuICogb3JkZXIgdG8gc2ltdWxhdGUgZXZlbnRzKS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0ge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgUmVhY3Qgcm9vdCBJRFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IEEgUmVhY3Qgcm9vdCBJRC5cbiAgICovXG4gIGNyZWF0ZVJlYWN0Um9vdElEOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdldFJlYWN0Um9vdElEU3RyaW5nKFJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4KCkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgUmVhY3QgSUQgYnkgam9pbmluZyBhIHJvb3QgSUQgd2l0aCBhIG5hbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgUm9vdCBJRCBvZiBhIHBhcmVudCBjb21wb25lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEEgY29tcG9uZW50J3MgbmFtZSAoYXMgZmxhdHRlbmVkIGNoaWxkcmVuKS5cbiAgICogQHJldHVybiB7c3RyaW5nfSBBIFJlYWN0IElELlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNyZWF0ZVJlYWN0SUQ6IGZ1bmN0aW9uIChyb290SUQsIG5hbWUpIHtcbiAgICByZXR1cm4gcm9vdElEICsgbmFtZTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgRE9NIElEIG9mIHRoZSBSZWFjdCBjb21wb25lbnQgdGhhdCBpcyB0aGUgcm9vdCBvZiB0aGUgdHJlZSB0aGF0XG4gICAqIGNvbnRhaW5zIHRoZSBSZWFjdCBjb21wb25lbnQgd2l0aCB0aGUgc3VwcGxpZWQgRE9NIElELlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgRE9NIElEIG9mIGEgUmVhY3QgY29tcG9uZW50LlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBET00gSUQgb2YgdGhlIFJlYWN0IGNvbXBvbmVudCB0aGF0IGlzIHRoZSByb290LlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldFJlYWN0Um9vdElERnJvbU5vZGVJRDogZnVuY3Rpb24gKGlkKSB7XG4gICAgaWYgKGlkICYmIGlkLmNoYXJBdCgwKSA9PT0gU0VQQVJBVE9SICYmIGlkLmxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBpbmRleCA9IGlkLmluZGV4T2YoU0VQQVJBVE9SLCAxKTtcbiAgICAgIHJldHVybiBpbmRleCA+IC0xID8gaWQuc3Vic3RyKDAsIGluZGV4KSA6IGlkO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogVHJhdmVyc2VzIHRoZSBJRCBoaWVyYXJjaHkgYW5kIGludm9rZXMgdGhlIHN1cHBsaWVkIGBjYmAgb24gYW55IElEcyB0aGF0XG4gICAqIHNob3VsZCB3b3VsZCByZWNlaXZlIGEgYG1vdXNlRW50ZXJgIG9yIGBtb3VzZUxlYXZlYCBldmVudC5cbiAgICpcbiAgICogTk9URTogRG9lcyBub3QgaW52b2tlIHRoZSBjYWxsYmFjayBvbiB0aGUgbmVhcmVzdCBjb21tb24gYW5jZXN0b3IgYmVjYXVzZVxuICAgKiBub3RoaW5nIFwiZW50ZXJlZFwiIG9yIFwibGVmdFwiIHRoYXQgZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxlYXZlSUQgSUQgYmVpbmcgbGVmdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVudGVySUQgSUQgYmVpbmcgZW50ZXJlZC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgQ2FsbGJhY2sgdG8gaW52b2tlIG9uIGVhY2ggZW50ZXJlZC9sZWZ0IElELlxuICAgKiBAcGFyYW0geyp9IHVwQXJnIEFyZ3VtZW50IHRvIGludm9rZSB0aGUgY2FsbGJhY2sgd2l0aCBvbiBsZWZ0IElEcy5cbiAgICogQHBhcmFtIHsqfSBkb3duQXJnIEFyZ3VtZW50IHRvIGludm9rZSB0aGUgY2FsbGJhY2sgd2l0aCBvbiBlbnRlcmVkIElEcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICB0cmF2ZXJzZUVudGVyTGVhdmU6IGZ1bmN0aW9uIChsZWF2ZUlELCBlbnRlcklELCBjYiwgdXBBcmcsIGRvd25BcmcpIHtcbiAgICB2YXIgYW5jZXN0b3JJRCA9IGdldEZpcnN0Q29tbW9uQW5jZXN0b3JJRChsZWF2ZUlELCBlbnRlcklEKTtcbiAgICBpZiAoYW5jZXN0b3JJRCAhPT0gbGVhdmVJRCkge1xuICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKGxlYXZlSUQsIGFuY2VzdG9ySUQsIGNiLCB1cEFyZywgZmFsc2UsIHRydWUpO1xuICAgIH1cbiAgICBpZiAoYW5jZXN0b3JJRCAhPT0gZW50ZXJJRCkge1xuICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKGFuY2VzdG9ySUQsIGVudGVySUQsIGNiLCBkb3duQXJnLCB0cnVlLCBmYWxzZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTaW11bGF0ZXMgdGhlIHRyYXZlcnNhbCBvZiBhIHR3by1waGFzZSwgY2FwdHVyZS9idWJibGUgZXZlbnQgZGlzcGF0Y2guXG4gICAqXG4gICAqIE5PVEU6IFRoaXMgdHJhdmVyc2FsIGhhcHBlbnMgb24gSURzIHdpdGhvdXQgdG91Y2hpbmcgdGhlIERPTS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldElEIElEIG9mIHRoZSB0YXJnZXQgbm9kZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgQ2FsbGJhY2sgdG8gaW52b2tlLlxuICAgKiBAcGFyYW0geyp9IGFyZyBBcmd1bWVudCB0byBpbnZva2UgdGhlIGNhbGxiYWNrIHdpdGguXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdHJhdmVyc2VUd29QaGFzZTogZnVuY3Rpb24gKHRhcmdldElELCBjYiwgYXJnKSB7XG4gICAgaWYgKHRhcmdldElEKSB7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgoJycsIHRhcmdldElELCBjYiwgYXJnLCB0cnVlLCBmYWxzZSk7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgodGFyZ2V0SUQsICcnLCBjYiwgYXJnLCBmYWxzZSwgdHJ1ZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTYW1lIGFzIGB0cmF2ZXJzZVR3b1BoYXNlYCBidXQgc2tpcHMgdGhlIGB0YXJnZXRJRGAuXG4gICAqL1xuICB0cmF2ZXJzZVR3b1BoYXNlU2tpcFRhcmdldDogZnVuY3Rpb24gKHRhcmdldElELCBjYiwgYXJnKSB7XG4gICAgaWYgKHRhcmdldElEKSB7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgoJycsIHRhcmdldElELCBjYiwgYXJnLCB0cnVlLCB0cnVlKTtcbiAgICAgIHRyYXZlcnNlUGFyZW50UGF0aCh0YXJnZXRJRCwgJycsIGNiLCBhcmcsIHRydWUsIHRydWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVHJhdmVyc2UgYSBub2RlIElELCBjYWxsaW5nIHRoZSBzdXBwbGllZCBgY2JgIGZvciBlYWNoIGFuY2VzdG9yIElELiBGb3JcbiAgICogZXhhbXBsZSwgcGFzc2luZyBgLjAuJHJvdy0wLjFgIHdvdWxkIHJlc3VsdCBpbiBgY2JgIGdldHRpbmcgY2FsbGVkXG4gICAqIHdpdGggYC4wYCwgYC4wLiRyb3ctMGAsIGFuZCBgLjAuJHJvdy0wLjFgLlxuICAgKlxuICAgKiBOT1RFOiBUaGlzIHRyYXZlcnNhbCBoYXBwZW5zIG9uIElEcyB3aXRob3V0IHRvdWNoaW5nIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRJRCBJRCBvZiB0aGUgdGFyZ2V0IG5vZGUuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIENhbGxiYWNrIHRvIGludm9rZS5cbiAgICogQHBhcmFtIHsqfSBhcmcgQXJndW1lbnQgdG8gaW52b2tlIHRoZSBjYWxsYmFjayB3aXRoLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHRyYXZlcnNlQW5jZXN0b3JzOiBmdW5jdGlvbiAodGFyZ2V0SUQsIGNiLCBhcmcpIHtcbiAgICB0cmF2ZXJzZVBhcmVudFBhdGgoJycsIHRhcmdldElELCBjYiwgYXJnLCB0cnVlLCBmYWxzZSk7XG4gIH0sXG5cbiAgZ2V0Rmlyc3RDb21tb25BbmNlc3RvcklEOiBnZXRGaXJzdENvbW1vbkFuY2VzdG9ySUQsXG5cbiAgLyoqXG4gICAqIEV4cG9zZWQgZm9yIHVuaXQgdGVzdGluZy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXROZXh0RGVzY2VuZGFudElEOiBnZXROZXh0RGVzY2VuZGFudElELFxuXG4gIGlzQW5jZXN0b3JJRE9mOiBpc0FuY2VzdG9ySURPZixcblxuICBTRVBBUkFUT1I6IFNFUEFSQVRPUlxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEluc3RhbmNlTWFwXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIGBSZWFjdEluc3RhbmNlTWFwYCBtYWludGFpbnMgYSBtYXBwaW5nIGZyb20gYSBwdWJsaWMgZmFjaW5nIHN0YXRlZnVsXG4gKiBpbnN0YW5jZSAoa2V5KSBhbmQgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uICh2YWx1ZSkuIFRoaXMgYWxsb3dzIHB1YmxpY1xuICogbWV0aG9kcyB0byBhY2NlcHQgdGhlIHVzZXIgZmFjaW5nIGluc3RhbmNlIGFzIGFuIGFyZ3VtZW50IGFuZCBtYXAgdGhlbSBiYWNrXG4gKiB0byBpbnRlcm5hbCBtZXRob2RzLlxuICovXG5cbi8vIFRPRE86IFJlcGxhY2UgdGhpcyB3aXRoIEVTNjogdmFyIFJlYWN0SW5zdGFuY2VNYXAgPSBuZXcgTWFwKCk7XG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHtcblxuICAvKipcbiAgICogVGhpcyBBUEkgc2hvdWxkIGJlIGNhbGxlZCBgZGVsZXRlYCBidXQgd2UnZCBoYXZlIHRvIG1ha2Ugc3VyZSB0byBhbHdheXNcbiAgICogdHJhbnNmb3JtIHRoZXNlIHRvIHN0cmluZ3MgZm9yIElFIHN1cHBvcnQuIFdoZW4gdGhpcyB0cmFuc2Zvcm0gaXMgZnVsbHlcbiAgICogc3VwcG9ydGVkIHdlIGNhbiByZW5hbWUgaXQuXG4gICAqL1xuICByZW1vdmU6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBrZXkuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSA9IHVuZGVmaW5lZDtcbiAgfSxcblxuICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4ga2V5Ll9yZWFjdEludGVybmFsSW5zdGFuY2U7XG4gIH0sXG5cbiAgaGFzOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIGtleS5fcmVhY3RJbnRlcm5hbEluc3RhbmNlICE9PSB1bmRlZmluZWQ7XG4gIH0sXG5cbiAgc2V0OiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIGtleS5fcmVhY3RJbnRlcm5hbEluc3RhbmNlID0gdmFsdWU7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEluc3RhbmNlTWFwOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdElzb21vcnBoaWNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdENoaWxkcmVuID0gcmVxdWlyZSgnLi9SZWFjdENoaWxkcmVuJyk7XG52YXIgUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50Jyk7XG52YXIgUmVhY3RDbGFzcyA9IHJlcXVpcmUoJy4vUmVhY3RDbGFzcycpO1xudmFyIFJlYWN0RE9NRmFjdG9yaWVzID0gcmVxdWlyZSgnLi9SZWFjdERPTUZhY3RvcmllcycpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RFbGVtZW50VmFsaWRhdG9yID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnRWYWxpZGF0b3InKTtcbnZhciBSZWFjdFByb3BUeXBlcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZXMnKTtcbnZhciBSZWFjdFZlcnNpb24gPSByZXF1aXJlKCcuL1JlYWN0VmVyc2lvbicpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgb25seUNoaWxkID0gcmVxdWlyZSgnLi9vbmx5Q2hpbGQnKTtcblxudmFyIGNyZWF0ZUVsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudDtcbnZhciBjcmVhdGVGYWN0b3J5ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUZhY3Rvcnk7XG52YXIgY2xvbmVFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNsb25lRWxlbWVudDtcblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgY3JlYXRlRWxlbWVudCA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jcmVhdGVFbGVtZW50O1xuICBjcmVhdGVGYWN0b3J5ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNyZWF0ZUZhY3Rvcnk7XG4gIGNsb25lRWxlbWVudCA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jbG9uZUVsZW1lbnQ7XG59XG5cbnZhciBSZWFjdCA9IHtcblxuICAvLyBNb2Rlcm5cblxuICBDaGlsZHJlbjoge1xuICAgIG1hcDogUmVhY3RDaGlsZHJlbi5tYXAsXG4gICAgZm9yRWFjaDogUmVhY3RDaGlsZHJlbi5mb3JFYWNoLFxuICAgIGNvdW50OiBSZWFjdENoaWxkcmVuLmNvdW50LFxuICAgIHRvQXJyYXk6IFJlYWN0Q2hpbGRyZW4udG9BcnJheSxcbiAgICBvbmx5OiBvbmx5Q2hpbGRcbiAgfSxcblxuICBDb21wb25lbnQ6IFJlYWN0Q29tcG9uZW50LFxuXG4gIGNyZWF0ZUVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnQsXG4gIGNsb25lRWxlbWVudDogY2xvbmVFbGVtZW50LFxuICBpc1ZhbGlkRWxlbWVudDogUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50LFxuXG4gIC8vIENsYXNzaWNcblxuICBQcm9wVHlwZXM6IFJlYWN0UHJvcFR5cGVzLFxuICBjcmVhdGVDbGFzczogUmVhY3RDbGFzcy5jcmVhdGVDbGFzcyxcbiAgY3JlYXRlRmFjdG9yeTogY3JlYXRlRmFjdG9yeSxcbiAgY3JlYXRlTWl4aW46IGZ1bmN0aW9uIChtaXhpbikge1xuICAgIC8vIEN1cnJlbnRseSBhIG5vb3AuIFdpbGwgYmUgdXNlZCB0byB2YWxpZGF0ZSBhbmQgdHJhY2UgbWl4aW5zLlxuICAgIHJldHVybiBtaXhpbjtcbiAgfSxcblxuICAvLyBUaGlzIGxvb2tzIERPTSBzcGVjaWZpYyBidXQgdGhlc2UgYXJlIGFjdHVhbGx5IGlzb21vcnBoaWMgaGVscGVyc1xuICAvLyBzaW5jZSB0aGV5IGFyZSBqdXN0IGdlbmVyYXRpbmcgRE9NIHN0cmluZ3MuXG4gIERPTTogUmVhY3RET01GYWN0b3JpZXMsXG5cbiAgdmVyc2lvbjogUmVhY3RWZXJzaW9uLFxuXG4gIC8vIEhvb2sgZm9yIEpTWCBzcHJlYWQsIGRvbid0IHVzZSB0aGlzIGZvciBhbnl0aGluZyBlbHNlLlxuICBfX3NwcmVhZDogYXNzaWduXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE1hcmt1cENoZWNrc3VtXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWRsZXIzMiA9IHJlcXVpcmUoJy4vYWRsZXIzMicpO1xuXG52YXIgVEFHX0VORCA9IC9cXC8/Pi87XG5cbnZhciBSZWFjdE1hcmt1cENoZWNrc3VtID0ge1xuICBDSEVDS1NVTV9BVFRSX05BTUU6ICdkYXRhLXJlYWN0LWNoZWNrc3VtJyxcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBNYXJrdXAgc3RyaW5nXG4gICAqIEByZXR1cm4ge3N0cmluZ30gTWFya3VwIHN0cmluZyB3aXRoIGNoZWNrc3VtIGF0dHJpYnV0ZSBhdHRhY2hlZFxuICAgKi9cbiAgYWRkQ2hlY2tzdW1Ub01hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCkge1xuICAgIHZhciBjaGVja3N1bSA9IGFkbGVyMzIobWFya3VwKTtcblxuICAgIC8vIEFkZCBjaGVja3N1bSAoaGFuZGxlIGJvdGggcGFyZW50IHRhZ3MgYW5kIHNlbGYtY2xvc2luZyB0YWdzKVxuICAgIHJldHVybiBtYXJrdXAucmVwbGFjZShUQUdfRU5ELCAnICcgKyBSZWFjdE1hcmt1cENoZWNrc3VtLkNIRUNLU1VNX0FUVFJfTkFNRSArICc9XCInICsgY2hlY2tzdW0gKyAnXCIkJicpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIHRvIHVzZVxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgcm9vdCBSZWFjdCBlbGVtZW50XG4gICAqIEByZXR1cm5zIHtib29sZWFufSB3aGV0aGVyIG9yIG5vdCB0aGUgbWFya3VwIGlzIHRoZSBzYW1lXG4gICAqL1xuICBjYW5SZXVzZU1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCwgZWxlbWVudCkge1xuICAgIHZhciBleGlzdGluZ0NoZWNrc3VtID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoUmVhY3RNYXJrdXBDaGVja3N1bS5DSEVDS1NVTV9BVFRSX05BTUUpO1xuICAgIGV4aXN0aW5nQ2hlY2tzdW0gPSBleGlzdGluZ0NoZWNrc3VtICYmIHBhcnNlSW50KGV4aXN0aW5nQ2hlY2tzdW0sIDEwKTtcbiAgICB2YXIgbWFya3VwQ2hlY2tzdW0gPSBhZGxlcjMyKG1hcmt1cCk7XG4gICAgcmV0dXJuIG1hcmt1cENoZWNrc3VtID09PSBleGlzdGluZ0NoZWNrc3VtO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0TWFya3VwQ2hlY2tzdW07IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0TW91bnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBET01Qcm9wZXJ0eSA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHknKTtcbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlcicpO1xudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0gcmVxdWlyZSgnLi9SZWFjdERPTUZlYXR1cmVGbGFncycpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5ID0gcmVxdWlyZSgnLi9SZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnknKTtcbnZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZUhhbmRsZXMnKTtcbnZhciBSZWFjdEluc3RhbmNlTWFwID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlTWFwJyk7XG52YXIgUmVhY3RNYXJrdXBDaGVja3N1bSA9IHJlcXVpcmUoJy4vUmVhY3RNYXJrdXBDaGVja3N1bScpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcbnZhciBSZWFjdFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZVF1ZXVlJyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5T2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlPYmplY3QnKTtcbnZhciBjb250YWluc05vZGUgPSByZXF1aXJlKCdmYmpzL2xpYi9jb250YWluc05vZGUnKTtcbnZhciBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgc2V0SW5uZXJIVE1MID0gcmVxdWlyZSgnLi9zZXRJbm5lckhUTUwnKTtcbnZhciBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciB2YWxpZGF0ZURPTU5lc3RpbmcgPSByZXF1aXJlKCcuL3ZhbGlkYXRlRE9NTmVzdGluZycpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBBVFRSX05BTUUgPSBET01Qcm9wZXJ0eS5JRF9BVFRSSUJVVEVfTkFNRTtcbnZhciBub2RlQ2FjaGUgPSB7fTtcblxudmFyIEVMRU1FTlRfTk9ERV9UWVBFID0gMTtcbnZhciBET0NfTk9ERV9UWVBFID0gOTtcbnZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUgPSAxMTtcblxudmFyIG93bmVyRG9jdW1lbnRDb250ZXh0S2V5ID0gJ19fUmVhY3RNb3VudF9vd25lckRvY3VtZW50JCcgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKTtcblxuLyoqIE1hcHBpbmcgZnJvbSByZWFjdFJvb3RJRCB0byBSZWFjdCBjb21wb25lbnQgaW5zdGFuY2UuICovXG52YXIgaW5zdGFuY2VzQnlSZWFjdFJvb3RJRCA9IHt9O1xuXG4vKiogTWFwcGluZyBmcm9tIHJlYWN0Um9vdElEIHRvIGBjb250YWluZXJgIG5vZGVzLiAqL1xudmFyIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEID0ge307XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8qKiBfX0RFVl9fLW9ubHkgbWFwcGluZyBmcm9tIHJlYWN0Um9vdElEIHRvIHJvb3QgZWxlbWVudHMuICovXG4gIHZhciByb290RWxlbWVudHNCeVJlYWN0Um9vdElEID0ge307XG59XG5cbi8vIFVzZWQgdG8gc3RvcmUgYnJlYWR0aC1maXJzdCBzZWFyY2ggc3RhdGUgaW4gZmluZENvbXBvbmVudFJvb3QuXG52YXIgZmluZENvbXBvbmVudFJvb3RSZXVzYWJsZUFycmF5ID0gW107XG5cbi8qKlxuICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBjaGFyYWN0ZXJcbiAqIHRoYXQncyBub3QgY29tbW9uIGJldHdlZW4gdGhlIHR3byBnaXZlbiBzdHJpbmdzLlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIGluZGV4IG9mIHRoZSBjaGFyYWN0ZXIgd2hlcmUgdGhlIHN0cmluZ3MgZGl2ZXJnZVxuICovXG5mdW5jdGlvbiBmaXJzdERpZmZlcmVuY2VJbmRleChzdHJpbmcxLCBzdHJpbmcyKSB7XG4gIHZhciBtaW5MZW4gPSBNYXRoLm1pbihzdHJpbmcxLmxlbmd0aCwgc3RyaW5nMi5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG1pbkxlbjsgaSsrKSB7XG4gICAgaWYgKHN0cmluZzEuY2hhckF0KGkpICE9PSBzdHJpbmcyLmNoYXJBdChpKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHJpbmcxLmxlbmd0aCA9PT0gc3RyaW5nMi5sZW5ndGggPyAtMSA6IG1pbkxlbjtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NRG9jdW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCB0aGF0IG1heSBjb250YWluXG4gKiBhIFJlYWN0IGNvbXBvbmVudFxuICogQHJldHVybiB7Pyp9IERPTSBlbGVtZW50IHRoYXQgbWF5IGhhdmUgdGhlIHJlYWN0Um9vdCBJRCwgb3IgbnVsbC5cbiAqL1xuZnVuY3Rpb24gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcikge1xuICBpZiAoIWNvbnRhaW5lcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DX05PREVfVFlQRSkge1xuICAgIHJldHVybiBjb250YWluZXIuZG9jdW1lbnRFbGVtZW50O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjb250YWluZXIuZmlyc3RDaGlsZDtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRoYXQgbWF5IGNvbnRhaW4gYSBSZWFjdCBjb21wb25lbnQuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBBIFwicmVhY3RSb290XCIgSUQsIGlmIGEgUmVhY3QgY29tcG9uZW50IGlzIHJlbmRlcmVkLlxuICovXG5mdW5jdGlvbiBnZXRSZWFjdFJvb3RJRChjb250YWluZXIpIHtcbiAgdmFyIHJvb3RFbGVtZW50ID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gIHJldHVybiByb290RWxlbWVudCAmJiBSZWFjdE1vdW50LmdldElEKHJvb3RFbGVtZW50KTtcbn1cblxuLyoqXG4gKiBBY2Nlc3Npbmcgbm9kZVtBVFRSX05BTUVdIG9yIGNhbGxpbmcgZ2V0QXR0cmlidXRlKEFUVFJfTkFNRSkgb24gYSBmb3JtXG4gKiBlbGVtZW50IGNhbiByZXR1cm4gaXRzIGNvbnRyb2wgd2hvc2UgbmFtZSBvciBJRCBlcXVhbHMgQVRUUl9OQU1FLiBBbGxcbiAqIERPTSBub2RlcyBzdXBwb3J0IGBnZXRBdHRyaWJ1dGVOb2RlYCBidXQgdGhpcyBjYW4gYWxzbyBnZXQgY2FsbGVkIG9uXG4gKiBvdGhlciBvYmplY3RzIHNvIGp1c3QgcmV0dXJuICcnIGlmIHdlJ3JlIGdpdmVuIHNvbWV0aGluZyBvdGhlciB0aGFuIGFcbiAqIERPTSBub2RlIChzdWNoIGFzIHdpbmRvdykuXG4gKlxuICogQHBhcmFtIHs/RE9NRWxlbWVudHxET01XaW5kb3d8RE9NRG9jdW1lbnR8RE9NVGV4dE5vZGV9IG5vZGUgRE9NIG5vZGUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IElEIG9mIHRoZSBzdXBwbGllZCBgZG9tTm9kZWAuXG4gKi9cbmZ1bmN0aW9uIGdldElEKG5vZGUpIHtcbiAgdmFyIGlkID0gaW50ZXJuYWxHZXRJRChub2RlKTtcbiAgaWYgKGlkKSB7XG4gICAgaWYgKG5vZGVDYWNoZS5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICAgIHZhciBjYWNoZWQgPSBub2RlQ2FjaGVbaWRdO1xuICAgICAgaWYgKGNhY2hlZCAhPT0gbm9kZSkge1xuICAgICAgICAhIWlzVmFsaWQoY2FjaGVkLCBpZCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RNb3VudDogVHdvIHZhbGlkIGJ1dCB1bmVxdWFsIG5vZGVzIHdpdGggdGhlIHNhbWUgYCVzYDogJXMnLCBBVFRSX05BTUUsIGlkKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgbm9kZUNhY2hlW2lkXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGVDYWNoZVtpZF0gPSBub2RlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpZDtcbn1cblxuZnVuY3Rpb24gaW50ZXJuYWxHZXRJRChub2RlKSB7XG4gIC8vIElmIG5vZGUgaXMgc29tZXRoaW5nIGxpa2UgYSB3aW5kb3csIGRvY3VtZW50LCBvciB0ZXh0IG5vZGUsIG5vbmUgb2ZcbiAgLy8gd2hpY2ggc3VwcG9ydCBhdHRyaWJ1dGVzIG9yIGEgLmdldEF0dHJpYnV0ZSBtZXRob2QsIGdyYWNlZnVsbHkgcmV0dXJuXG4gIC8vIHRoZSBlbXB0eSBzdHJpbmcsIGFzIGlmIHRoZSBhdHRyaWJ1dGUgd2VyZSBtaXNzaW5nLlxuICByZXR1cm4gbm9kZSAmJiBub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZShBVFRSX05BTUUpIHx8ICcnO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIFJlYWN0LXNwZWNpZmljIElEIG9mIHRoZSBnaXZlbiBub2RlLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZSBUaGUgRE9NIG5vZGUgd2hvc2UgSUQgd2lsbCBiZSBzZXQuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIHZhbHVlIG9mIHRoZSBJRCBhdHRyaWJ1dGUuXG4gKi9cbmZ1bmN0aW9uIHNldElEKG5vZGUsIGlkKSB7XG4gIHZhciBvbGRJRCA9IGludGVybmFsR2V0SUQobm9kZSk7XG4gIGlmIChvbGRJRCAhPT0gaWQpIHtcbiAgICBkZWxldGUgbm9kZUNhY2hlW29sZElEXTtcbiAgfVxuICBub2RlLnNldEF0dHJpYnV0ZShBVFRSX05BTUUsIGlkKTtcbiAgbm9kZUNhY2hlW2lkXSA9IG5vZGU7XG59XG5cbi8qKlxuICogRmluZHMgdGhlIG5vZGUgd2l0aCB0aGUgc3VwcGxpZWQgUmVhY3QtZ2VuZXJhdGVkIERPTSBJRC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQSBSZWFjdC1nZW5lcmF0ZWQgRE9NIElELlxuICogQHJldHVybiB7RE9NRWxlbWVudH0gRE9NIG5vZGUgd2l0aCB0aGUgc3VwcGxlZCBgaWRgLlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGdldE5vZGUoaWQpIHtcbiAgaWYgKCFub2RlQ2FjaGUuaGFzT3duUHJvcGVydHkoaWQpIHx8ICFpc1ZhbGlkKG5vZGVDYWNoZVtpZF0sIGlkKSkge1xuICAgIG5vZGVDYWNoZVtpZF0gPSBSZWFjdE1vdW50LmZpbmRSZWFjdE5vZGVCeUlEKGlkKTtcbiAgfVxuICByZXR1cm4gbm9kZUNhY2hlW2lkXTtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgbm9kZSB3aXRoIHRoZSBzdXBwbGllZCBwdWJsaWMgUmVhY3QgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHsqfSBpbnN0YW5jZSBBIHB1YmxpYyBSZWFjdCBpbnN0YW5jZS5cbiAqIEByZXR1cm4gez9ET01FbGVtZW50fSBET00gbm9kZSB3aXRoIHRoZSBzdXBwbGVkIGBpZGAuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZUZyb21JbnN0YW5jZShpbnN0YW5jZSkge1xuICB2YXIgaWQgPSBSZWFjdEluc3RhbmNlTWFwLmdldChpbnN0YW5jZSkuX3Jvb3ROb2RlSUQ7XG4gIGlmIChSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkuaXNOdWxsQ29tcG9uZW50SUQoaWQpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKCFub2RlQ2FjaGUuaGFzT3duUHJvcGVydHkoaWQpIHx8ICFpc1ZhbGlkKG5vZGVDYWNoZVtpZF0sIGlkKSkge1xuICAgIG5vZGVDYWNoZVtpZF0gPSBSZWFjdE1vdW50LmZpbmRSZWFjdE5vZGVCeUlEKGlkKTtcbiAgfVxuICByZXR1cm4gbm9kZUNhY2hlW2lkXTtcbn1cblxuLyoqXG4gKiBBIG5vZGUgaXMgXCJ2YWxpZFwiIGlmIGl0IGlzIGNvbnRhaW5lZCBieSBhIGN1cnJlbnRseSBtb3VudGVkIGNvbnRhaW5lci5cbiAqXG4gKiBUaGlzIG1lYW5zIHRoYXQgdGhlIG5vZGUgZG9lcyBub3QgaGF2ZSB0byBiZSBjb250YWluZWQgYnkgYSBkb2N1bWVudCBpblxuICogb3JkZXIgdG8gYmUgY29uc2lkZXJlZCB2YWxpZC5cbiAqXG4gKiBAcGFyYW0gez9ET01FbGVtZW50fSBub2RlIFRoZSBjYW5kaWRhdGUgRE9NIG5vZGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIGV4cGVjdGVkIElEIG9mIHRoZSBub2RlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgbm9kZSBpcyBjb250YWluZWQgYnkgYSBtb3VudGVkIGNvbnRhaW5lci5cbiAqL1xuZnVuY3Rpb24gaXNWYWxpZChub2RlLCBpZCkge1xuICBpZiAobm9kZSkge1xuICAgICEoaW50ZXJuYWxHZXRJRChub2RlKSA9PT0gaWQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0TW91bnQ6IFVuZXhwZWN0ZWQgbW9kaWZpY2F0aW9uIG9mIGAlc2AnLCBBVFRSX05BTUUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBjb250YWluZXIgPSBSZWFjdE1vdW50LmZpbmRSZWFjdENvbnRhaW5lckZvcklEKGlkKTtcbiAgICBpZiAoY29udGFpbmVyICYmIGNvbnRhaW5zTm9kZShjb250YWluZXIsIG5vZGUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ2F1c2VzIHRoZSBjYWNoZSB0byBmb3JnZXQgYWJvdXQgb25lIFJlYWN0LXNwZWNpZmljIElELlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgSUQgdG8gZm9yZ2V0LlxuICovXG5mdW5jdGlvbiBwdXJnZUlEKGlkKSB7XG4gIGRlbGV0ZSBub2RlQ2FjaGVbaWRdO1xufVxuXG52YXIgZGVlcGVzdE5vZGVTb0ZhciA9IG51bGw7XG5mdW5jdGlvbiBmaW5kRGVlcGVzdENhY2hlZEFuY2VzdG9ySW1wbChhbmNlc3RvcklEKSB7XG4gIHZhciBhbmNlc3RvciA9IG5vZGVDYWNoZVthbmNlc3RvcklEXTtcbiAgaWYgKGFuY2VzdG9yICYmIGlzVmFsaWQoYW5jZXN0b3IsIGFuY2VzdG9ySUQpKSB7XG4gICAgZGVlcGVzdE5vZGVTb0ZhciA9IGFuY2VzdG9yO1xuICB9IGVsc2Uge1xuICAgIC8vIFRoaXMgbm9kZSBpc24ndCBwb3B1bGF0ZWQgaW4gdGhlIGNhY2hlLCBzbyBwcmVzdW1hYmx5IG5vbmUgb2YgaXRzXG4gICAgLy8gZGVzY2VuZGFudHMgYXJlLiBCcmVhayBvdXQgb2YgdGhlIGxvb3AuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBkZWVwZXN0IGNhY2hlZCBub2RlIHdob3NlIElEIGlzIGEgcHJlZml4IG9mIGB0YXJnZXRJRGAuXG4gKi9cbmZ1bmN0aW9uIGZpbmREZWVwZXN0Q2FjaGVkQW5jZXN0b3IodGFyZ2V0SUQpIHtcbiAgZGVlcGVzdE5vZGVTb0ZhciA9IG51bGw7XG4gIFJlYWN0SW5zdGFuY2VIYW5kbGVzLnRyYXZlcnNlQW5jZXN0b3JzKHRhcmdldElELCBmaW5kRGVlcGVzdENhY2hlZEFuY2VzdG9ySW1wbCk7XG5cbiAgdmFyIGZvdW5kTm9kZSA9IGRlZXBlc3ROb2RlU29GYXI7XG4gIGRlZXBlc3ROb2RlU29GYXIgPSBudWxsO1xuICByZXR1cm4gZm91bmROb2RlO1xufVxuXG4vKipcbiAqIE1vdW50cyB0aGlzIGNvbXBvbmVudCBhbmQgaW5zZXJ0cyBpdCBpbnRvIHRoZSBET00uXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50SW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIG1vdW50LlxuICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBET00gSUQgb2YgdGhlIHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIG1vdW50IGludG8uXG4gKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3VsZFJldXNlTWFya3VwIElmIHRydWUsIGRvIG5vdCBpbnNlcnQgbWFya3VwXG4gKi9cbmZ1bmN0aW9uIG1vdW50Q29tcG9uZW50SW50b05vZGUoY29tcG9uZW50SW5zdGFuY2UsIHJvb3RJRCwgY29udGFpbmVyLCB0cmFuc2FjdGlvbiwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpIHtcbiAgaWYgKFJlYWN0RE9NRmVhdHVyZUZsYWdzLnVzZUNyZWF0ZUVsZW1lbnQpIHtcbiAgICBjb250ZXh0ID0gYXNzaWduKHt9LCBjb250ZXh0KTtcbiAgICBpZiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NfTk9ERV9UWVBFKSB7XG4gICAgICBjb250ZXh0W293bmVyRG9jdW1lbnRDb250ZXh0S2V5XSA9IGNvbnRhaW5lcjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGV4dFtvd25lckRvY3VtZW50Q29udGV4dEtleV0gPSBjb250YWluZXIub3duZXJEb2N1bWVudDtcbiAgICB9XG4gIH1cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoY29udGV4dCA9PT0gZW1wdHlPYmplY3QpIHtcbiAgICAgIGNvbnRleHQgPSB7fTtcbiAgICB9XG4gICAgdmFyIHRhZyA9IGNvbnRhaW5lci5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnRleHRbdmFsaWRhdGVET01OZXN0aW5nLmFuY2VzdG9ySW5mb0NvbnRleHRLZXldID0gdmFsaWRhdGVET01OZXN0aW5nLnVwZGF0ZWRBbmNlc3RvckluZm8obnVsbCwgdGFnLCBudWxsKTtcbiAgfVxuICB2YXIgbWFya3VwID0gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgY29tcG9uZW50SW5zdGFuY2UuX3JlbmRlcmVkQ29tcG9uZW50Ll90b3BMZXZlbFdyYXBwZXIgPSBjb21wb25lbnRJbnN0YW5jZTtcbiAgUmVhY3RNb3VudC5fbW91bnRJbWFnZUludG9Ob2RlKG1hcmt1cCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgdHJhbnNhY3Rpb24pO1xufVxuXG4vKipcbiAqIEJhdGNoZWQgbW91bnQuXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50SW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIG1vdW50LlxuICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBET00gSUQgb2YgdGhlIHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIG1vdW50IGludG8uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3VsZFJldXNlTWFya3VwIElmIHRydWUsIGRvIG5vdCBpbnNlcnQgbWFya3VwXG4gKi9cbmZ1bmN0aW9uIGJhdGNoZWRNb3VudENvbXBvbmVudEludG9Ob2RlKGNvbXBvbmVudEluc3RhbmNlLCByb290SUQsIGNvbnRhaW5lciwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpIHtcbiAgdmFyIHRyYW5zYWN0aW9uID0gUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKFxuICAvKiBmb3JjZUhUTUwgKi9zaG91bGRSZXVzZU1hcmt1cCk7XG4gIHRyYW5zYWN0aW9uLnBlcmZvcm0obW91bnRDb21wb25lbnRJbnRvTm9kZSwgbnVsbCwgY29tcG9uZW50SW5zdGFuY2UsIHJvb3RJRCwgY29udGFpbmVyLCB0cmFuc2FjdGlvbiwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpO1xuICBSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5yZWxlYXNlKHRyYW5zYWN0aW9uKTtcbn1cblxuLyoqXG4gKiBVbm1vdW50cyBhIGNvbXBvbmVudCBhbmQgcmVtb3ZlcyBpdCBmcm9tIHRoZSBET00uXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gaW5zdGFuY2UgUmVhY3QgY29tcG9uZW50IGluc3RhbmNlLlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gdW5tb3VudCBmcm9tLlxuICogQGZpbmFsXG4gKiBAaW50ZXJuYWxcbiAqIEBzZWUge1JlYWN0TW91bnQudW5tb3VudENvbXBvbmVudEF0Tm9kZX1cbiAqL1xuZnVuY3Rpb24gdW5tb3VudENvbXBvbmVudEZyb21Ob2RlKGluc3RhbmNlLCBjb250YWluZXIpIHtcbiAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQoaW5zdGFuY2UpO1xuXG4gIGlmIChjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUpIHtcbiAgICBjb250YWluZXIgPSBjb250YWluZXIuZG9jdW1lbnRFbGVtZW50O1xuICB9XG5cbiAgLy8gaHR0cDovL2pzcGVyZi5jb20vZW1wdHlpbmctYS1ub2RlXG4gIHdoaWxlIChjb250YWluZXIubGFzdENoaWxkKSB7XG4gICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuICB9XG59XG5cbi8qKlxuICogVHJ1ZSBpZiB0aGUgc3VwcGxpZWQgRE9NIG5vZGUgaGFzIGEgZGlyZWN0IFJlYWN0LXJlbmRlcmVkIGNoaWxkIHRoYXQgaXNcbiAqIG5vdCBhIFJlYWN0IHJvb3QgZWxlbWVudC4gVXNlZnVsIGZvciB3YXJuaW5nIGluIGByZW5kZXJgLFxuICogYHVubW91bnRDb21wb25lbnRBdE5vZGVgLCBldGMuXG4gKlxuICogQHBhcmFtIHs/RE9NRWxlbWVudH0gbm9kZSBUaGUgY2FuZGlkYXRlIERPTSBub2RlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgRE9NIGVsZW1lbnQgY29udGFpbnMgYSBkaXJlY3QgY2hpbGQgdGhhdCB3YXNcbiAqIHJlbmRlcmVkIGJ5IFJlYWN0IGJ1dCBpcyBub3QgYSByb290IGVsZW1lbnQuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gaGFzTm9uUm9vdFJlYWN0Q2hpbGQobm9kZSkge1xuICB2YXIgcmVhY3RSb290SUQgPSBnZXRSZWFjdFJvb3RJRChub2RlKTtcbiAgcmV0dXJuIHJlYWN0Um9vdElEID8gcmVhY3RSb290SUQgIT09IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChyZWFjdFJvb3RJRCkgOiBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBmaXJzdCAoZGVlcGVzdCkgYW5jZXN0b3Igb2YgYSBub2RlIHdoaWNoIGlzIHJlbmRlcmVkIGJ5IHRoaXMgY29weVxuICogb2YgUmVhY3QuXG4gKi9cbmZ1bmN0aW9uIGZpbmRGaXJzdFJlYWN0RE9NSW1wbChub2RlKSB7XG4gIC8vIFRoaXMgbm9kZSBtaWdodCBiZSBmcm9tIGFub3RoZXIgUmVhY3QgaW5zdGFuY2UsIHNvIHdlIG1ha2Ugc3VyZSBub3QgdG9cbiAgLy8gZXhhbWluZSB0aGUgbm9kZSBjYWNoZSBoZXJlXG4gIGZvciAoOyBub2RlICYmIG5vZGUucGFyZW50Tm9kZSAhPT0gbm9kZTsgbm9kZSA9IG5vZGUucGFyZW50Tm9kZSkge1xuICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSAxKSB7XG4gICAgICAvLyBOb3QgYSBET01FbGVtZW50LCB0aGVyZWZvcmUgbm90IGEgUmVhY3QgY29tcG9uZW50XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFyIG5vZGVJRCA9IGludGVybmFsR2V0SUQobm9kZSk7XG4gICAgaWYgKCFub2RlSUQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YXIgcmVhY3RSb290SUQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQobm9kZUlEKTtcblxuICAgIC8vIElmIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEIGNvbnRhaW5zIHRoZSBjb250YWluZXIgd2UgZmluZCBieSBjcmF3bGluZyB1cFxuICAgIC8vIHRoZSB0cmVlLCB3ZSBrbm93IHRoYXQgdGhpcyBpbnN0YW5jZSBvZiBSZWFjdCByZW5kZXJlZCB0aGUgbm9kZS5cbiAgICAvLyBuYi4gaXNWYWxpZCdzIHN0cmF0ZWd5ICh3aXRoIGNvbnRhaW5zTm9kZSkgZG9lcyBub3Qgd29yayBiZWNhdXNlIHJlbmRlclxuICAgIC8vIHRyZWVzIG1heSBiZSBuZXN0ZWQgYW5kIHdlIGRvbid0IHdhbnQgYSBmYWxzZSBwb3NpdGl2ZSBpbiB0aGF0IGNhc2UuXG4gICAgdmFyIGN1cnJlbnQgPSBub2RlO1xuICAgIHZhciBsYXN0SUQ7XG4gICAgZG8ge1xuICAgICAgbGFzdElEID0gaW50ZXJuYWxHZXRJRChjdXJyZW50KTtcbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudE5vZGU7XG4gICAgICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG4gICAgICAgIC8vIFRoZSBwYXNzZWQtaW4gbm9kZSBoYXMgYmVlbiBkZXRhY2hlZCBmcm9tIHRoZSBjb250YWluZXIgaXQgd2FzXG4gICAgICAgIC8vIG9yaWdpbmFsbHkgcmVuZGVyZWQgaW50by5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSB3aGlsZSAobGFzdElEICE9PSByZWFjdFJvb3RJRCk7XG5cbiAgICBpZiAoY3VycmVudCA9PT0gY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdKSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogVGVtcG9yYXJ5ICg/KSBoYWNrIHNvIHRoYXQgd2UgY2FuIHN0b3JlIGFsbCB0b3AtbGV2ZWwgcGVuZGluZyB1cGRhdGVzIG9uXG4gKiBjb21wb3NpdGVzIGluc3RlYWQgb2YgaGF2aW5nIHRvIHdvcnJ5IGFib3V0IGRpZmZlcmVudCB0eXBlcyBvZiBjb21wb25lbnRzXG4gKiBoZXJlLlxuICovXG52YXIgVG9wTGV2ZWxXcmFwcGVyID0gZnVuY3Rpb24gKCkge307XG5Ub3BMZXZlbFdyYXBwZXIucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQgPSB7fTtcbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIFRvcExldmVsV3JhcHBlci5kaXNwbGF5TmFtZSA9ICdUb3BMZXZlbFdyYXBwZXInO1xufVxuVG9wTGV2ZWxXcmFwcGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHRoaXMucHJvcHMgaXMgYWN0dWFsbHkgYSBSZWFjdEVsZW1lbnRcbiAgcmV0dXJuIHRoaXMucHJvcHM7XG59O1xuXG4vKipcbiAqIE1vdW50aW5nIGlzIHRoZSBwcm9jZXNzIG9mIGluaXRpYWxpemluZyBhIFJlYWN0IGNvbXBvbmVudCBieSBjcmVhdGluZyBpdHNcbiAqIHJlcHJlc2VudGF0aXZlIERPTSBlbGVtZW50cyBhbmQgaW5zZXJ0aW5nIHRoZW0gaW50byBhIHN1cHBsaWVkIGBjb250YWluZXJgLlxuICogQW55IHByaW9yIGNvbnRlbnQgaW5zaWRlIGBjb250YWluZXJgIGlzIGRlc3Ryb3llZCBpbiB0aGUgcHJvY2Vzcy5cbiAqXG4gKiAgIFJlYWN0TW91bnQucmVuZGVyKFxuICogICAgIGNvbXBvbmVudCxcbiAqICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJylcbiAqICAgKTtcbiAqXG4gKiAgIDxkaXYgaWQ9XCJjb250YWluZXJcIj4gICAgICAgICAgICAgICAgICAgPC0tIFN1cHBsaWVkIGBjb250YWluZXJgLlxuICogICAgIDxkaXYgZGF0YS1yZWFjdGlkPVwiLjNcIj4gICAgICAgICAgICAgIDwtLSBSZW5kZXJlZCByZWFjdFJvb3Qgb2YgUmVhY3RcbiAqICAgICAgIC8vIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9kaXY+XG4gKlxuICogSW5zaWRlIG9mIGBjb250YWluZXJgLCB0aGUgZmlyc3QgZWxlbWVudCByZW5kZXJlZCBpcyB0aGUgXCJyZWFjdFJvb3RcIi5cbiAqL1xudmFyIFJlYWN0TW91bnQgPSB7XG5cbiAgVG9wTGV2ZWxXcmFwcGVyOiBUb3BMZXZlbFdyYXBwZXIsXG5cbiAgLyoqIEV4cG9zZWQgZm9yIGRlYnVnZ2luZyBwdXJwb3NlcyAqKi9cbiAgX2luc3RhbmNlc0J5UmVhY3RSb290SUQ6IGluc3RhbmNlc0J5UmVhY3RSb290SUQsXG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgYSBob29rIHByb3ZpZGVkIHRvIHN1cHBvcnQgcmVuZGVyaW5nIFJlYWN0IGNvbXBvbmVudHMgd2hpbGVcbiAgICogZW5zdXJpbmcgdGhhdCB0aGUgYXBwYXJlbnQgc2Nyb2xsIHBvc2l0aW9uIG9mIGl0cyBgY29udGFpbmVyYCBkb2VzIG5vdFxuICAgKiBjaGFuZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIFRoZSBgY29udGFpbmVyYCBiZWluZyByZW5kZXJlZCBpbnRvLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSByZW5kZXJDYWxsYmFjayBUaGlzIG11c3QgYmUgY2FsbGVkIG9uY2UgdG8gZG8gdGhlIHJlbmRlci5cbiAgICovXG4gIHNjcm9sbE1vbml0b3I6IGZ1bmN0aW9uIChjb250YWluZXIsIHJlbmRlckNhbGxiYWNrKSB7XG4gICAgcmVuZGVyQ2FsbGJhY2soKTtcbiAgfSxcblxuICAvKipcbiAgICogVGFrZSBhIGNvbXBvbmVudCB0aGF0J3MgYWxyZWFkeSBtb3VudGVkIGludG8gdGhlIERPTSBhbmQgcmVwbGFjZSBpdHMgcHJvcHNcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gcHJldkNvbXBvbmVudCBjb21wb25lbnQgaW5zdGFuY2UgYWxyZWFkeSBpbiB0aGUgRE9NXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBjb21wb25lbnQgaW5zdGFuY2UgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIGNvbnRhaW5lciB0byByZW5kZXIgaW50b1xuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIGNvbXBsZXRpb25cbiAgICovXG4gIF91cGRhdGVSb290Q29tcG9uZW50OiBmdW5jdGlvbiAocHJldkNvbXBvbmVudCwgbmV4dEVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHtcbiAgICBSZWFjdE1vdW50LnNjcm9sbE1vbml0b3IoY29udGFpbmVyLCBmdW5jdGlvbiAoKSB7XG4gICAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVFbGVtZW50SW50ZXJuYWwocHJldkNvbXBvbmVudCwgbmV4dEVsZW1lbnQpO1xuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZUNhbGxiYWNrSW50ZXJuYWwocHJldkNvbXBvbmVudCwgY2FsbGJhY2spO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFJlY29yZCB0aGUgcm9vdCBlbGVtZW50IGluIGNhc2UgaXQgbGF0ZXIgZ2V0cyB0cmFuc3BsYW50ZWQuXG4gICAgICByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW2dldFJlYWN0Um9vdElEKGNvbnRhaW5lcildID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZDb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgY29tcG9uZW50IGludG8gdGhlIGluc3RhbmNlIG1hcCBhbmQgc3RhcnRzIHNjcm9sbCB2YWx1ZVxuICAgKiBtb25pdG9yaW5nXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IG5leHRDb21wb25lbnQgY29tcG9uZW50IGluc3RhbmNlIHRvIHJlbmRlclxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBjb250YWluZXIgdG8gcmVuZGVyIGludG9cbiAgICogQHJldHVybiB7c3RyaW5nfSByZWFjdFJvb3QgSUQgcHJlZml4XG4gICAqL1xuICBfcmVnaXN0ZXJDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0Q29tcG9uZW50LCBjb250YWluZXIpIHtcbiAgICAhKGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdfcmVnaXN0ZXJDb21wb25lbnQoLi4uKTogVGFyZ2V0IGNvbnRhaW5lciBpcyBub3QgYSBET00gZWxlbWVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuZW5zdXJlU2Nyb2xsVmFsdWVNb25pdG9yaW5nKCk7XG5cbiAgICB2YXIgcmVhY3RSb290SUQgPSBSZWFjdE1vdW50LnJlZ2lzdGVyQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0gPSBuZXh0Q29tcG9uZW50O1xuICAgIHJldHVybiByZWFjdFJvb3RJRDtcbiAgfSxcblxuICAvKipcbiAgICogUmVuZGVyIGEgbmV3IGNvbXBvbmVudCBpbnRvIHRoZSBET00uXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBlbGVtZW50IHRvIHJlbmRlclxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBjb250YWluZXIgdG8gcmVuZGVyIGludG9cbiAgICogQHBhcmFtIHtib29sZWFufSBzaG91bGRSZXVzZU1hcmt1cCBpZiB3ZSBzaG91bGQgc2tpcCB0aGUgbWFya3VwIGluc2VydGlvblxuICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gbmV4dENvbXBvbmVudFxuICAgKi9cbiAgX3JlbmRlck5ld1Jvb3RDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0RWxlbWVudCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgY29udGV4dCkge1xuICAgIC8vIFZhcmlvdXMgcGFydHMgb2Ygb3VyIGNvZGUgKHN1Y2ggYXMgUmVhY3RDb21wb3NpdGVDb21wb25lbnQnc1xuICAgIC8vIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQpIGFzc3VtZSB0aGF0IGNhbGxzIHRvIHJlbmRlciBhcmVuJ3QgbmVzdGVkO1xuICAgIC8vIHZlcmlmeSB0aGF0IHRoYXQncyB0aGUgY2FzZS5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID09IG51bGwsICdfcmVuZGVyTmV3Um9vdENvbXBvbmVudCgpOiBSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uICcgKyAnb2YgcHJvcHMgYW5kIHN0YXRlOyB0cmlnZ2VyaW5nIG5lc3RlZCBjb21wb25lbnQgdXBkYXRlcyBmcm9tICcgKyAncmVuZGVyIGlzIG5vdCBhbGxvd2VkLiBJZiBuZWNlc3NhcnksIHRyaWdnZXIgbmVzdGVkIHVwZGF0ZXMgaW4gJyArICdjb21wb25lbnREaWRVcGRhdGUuIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mICVzLicsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgJiYgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudC5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgY29tcG9uZW50SW5zdGFuY2UgPSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KG5leHRFbGVtZW50LCBudWxsKTtcbiAgICB2YXIgcmVhY3RSb290SUQgPSBSZWFjdE1vdW50Ll9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSwgY29udGFpbmVyKTtcblxuICAgIC8vIFRoZSBpbml0aWFsIHJlbmRlciBpcyBzeW5jaHJvbm91cyBidXQgYW55IHVwZGF0ZXMgdGhhdCBoYXBwZW4gZHVyaW5nXG4gICAgLy8gcmVuZGVyaW5nLCBpbiBjb21wb25lbnRXaWxsTW91bnQgb3IgY29tcG9uZW50RGlkTW91bnQsIHdpbGwgYmUgYmF0Y2hlZFxuICAgIC8vIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBiYXRjaGluZyBzdHJhdGVneS5cblxuICAgIFJlYWN0VXBkYXRlcy5iYXRjaGVkVXBkYXRlcyhiYXRjaGVkTW91bnRDb21wb25lbnRJbnRvTm9kZSwgY29tcG9uZW50SW5zdGFuY2UsIHJlYWN0Um9vdElELCBjb250YWluZXIsIHNob3VsZFJldXNlTWFya3VwLCBjb250ZXh0KTtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBSZWNvcmQgdGhlIHJvb3QgZWxlbWVudCBpbiBjYXNlIGl0IGxhdGVyIGdldHMgdHJhbnNwbGFudGVkLlxuICAgICAgcm9vdEVsZW1lbnRzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0gPSBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29tcG9uZW50SW5zdGFuY2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgYSBSZWFjdCBjb21wb25lbnQgaW50byB0aGUgRE9NIGluIHRoZSBzdXBwbGllZCBgY29udGFpbmVyYC5cbiAgICpcbiAgICogSWYgdGhlIFJlYWN0IGNvbXBvbmVudCB3YXMgcHJldmlvdXNseSByZW5kZXJlZCBpbnRvIGBjb250YWluZXJgLCB0aGlzIHdpbGxcbiAgICogcGVyZm9ybSBhbiB1cGRhdGUgb24gaXQgYW5kIG9ubHkgbXV0YXRlIHRoZSBET00gYXMgbmVjZXNzYXJ5IHRvIHJlZmxlY3QgdGhlXG4gICAqIGxhdGVzdCBSZWFjdCBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IHBhcmVudENvbXBvbmVudCBUaGUgY29uY2VwdHVhbCBwYXJlbnQgb2YgdGhpcyByZW5kZXIgdHJlZS5cbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50IENvbXBvbmVudCBlbGVtZW50IHRvIHJlbmRlci5cbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gcmVuZGVyIGludG8uXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gY29tcGxldGlvblxuICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gQ29tcG9uZW50IGluc3RhbmNlIHJlbmRlcmVkIGluIGBjb250YWluZXJgLlxuICAgKi9cbiAgcmVuZGVyU3VidHJlZUludG9Db250YWluZXI6IGZ1bmN0aW9uIChwYXJlbnRDb21wb25lbnQsIG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XG4gICAgIShwYXJlbnRDb21wb25lbnQgIT0gbnVsbCAmJiBwYXJlbnRDb21wb25lbnQuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSAhPSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwYXJlbnRDb21wb25lbnQgbXVzdCBiZSBhIHZhbGlkIFJlYWN0IENvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gUmVhY3RNb3VudC5fcmVuZGVyU3VidHJlZUludG9Db250YWluZXIocGFyZW50Q29tcG9uZW50LCBuZXh0RWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyOiBmdW5jdGlvbiAocGFyZW50Q29tcG9uZW50LCBuZXh0RWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuICAgICFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQobmV4dEVsZW1lbnQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0RE9NLnJlbmRlcigpOiBJbnZhbGlkIGNvbXBvbmVudCBlbGVtZW50LiVzJywgdHlwZW9mIG5leHRFbGVtZW50ID09PSAnc3RyaW5nJyA/ICcgSW5zdGVhZCBvZiBwYXNzaW5nIGFuIGVsZW1lbnQgc3RyaW5nLCBtYWtlIHN1cmUgdG8gaW5zdGFudGlhdGUgJyArICdpdCBieSBwYXNzaW5nIGl0IHRvIFJlYWN0LmNyZWF0ZUVsZW1lbnQuJyA6IHR5cGVvZiBuZXh0RWxlbWVudCA9PT0gJ2Z1bmN0aW9uJyA/ICcgSW5zdGVhZCBvZiBwYXNzaW5nIGEgY29tcG9uZW50IGNsYXNzLCBtYWtlIHN1cmUgdG8gaW5zdGFudGlhdGUgJyArICdpdCBieSBwYXNzaW5nIGl0IHRvIFJlYWN0LmNyZWF0ZUVsZW1lbnQuJyA6XG4gICAgLy8gQ2hlY2sgaWYgaXQgcXVhY2tzIGxpa2UgYW4gZWxlbWVudFxuICAgIG5leHRFbGVtZW50ICE9IG51bGwgJiYgbmV4dEVsZW1lbnQucHJvcHMgIT09IHVuZGVmaW5lZCA/ICcgVGhpcyBtYXkgYmUgY2F1c2VkIGJ5IHVuaW50ZW50aW9uYWxseSBsb2FkaW5nIHR3byBpbmRlcGVuZGVudCAnICsgJ2NvcGllcyBvZiBSZWFjdC4nIDogJycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFjb250YWluZXIgfHwgIWNvbnRhaW5lci50YWdOYW1lIHx8IGNvbnRhaW5lci50YWdOYW1lLnRvVXBwZXJDYXNlKCkgIT09ICdCT0RZJywgJ3JlbmRlcigpOiBSZW5kZXJpbmcgY29tcG9uZW50cyBkaXJlY3RseSBpbnRvIGRvY3VtZW50LmJvZHkgaXMgJyArICdkaXNjb3VyYWdlZCwgc2luY2UgaXRzIGNoaWxkcmVuIGFyZSBvZnRlbiBtYW5pcHVsYXRlZCBieSB0aGlyZC1wYXJ0eSAnICsgJ3NjcmlwdHMgYW5kIGJyb3dzZXIgZXh0ZW5zaW9ucy4gVGhpcyBtYXkgbGVhZCB0byBzdWJ0bGUgJyArICdyZWNvbmNpbGlhdGlvbiBpc3N1ZXMuIFRyeSByZW5kZXJpbmcgaW50byBhIGNvbnRhaW5lciBlbGVtZW50IGNyZWF0ZWQgJyArICdmb3IgeW91ciBhcHAuJykgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgbmV4dFdyYXBwZWRFbGVtZW50ID0gbmV3IFJlYWN0RWxlbWVudChUb3BMZXZlbFdyYXBwZXIsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG5leHRFbGVtZW50KTtcblxuICAgIHZhciBwcmV2Q29tcG9uZW50ID0gaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtnZXRSZWFjdFJvb3RJRChjb250YWluZXIpXTtcblxuICAgIGlmIChwcmV2Q29tcG9uZW50KSB7XG4gICAgICB2YXIgcHJldldyYXBwZWRFbGVtZW50ID0gcHJldkNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQ7XG4gICAgICB2YXIgcHJldkVsZW1lbnQgPSBwcmV2V3JhcHBlZEVsZW1lbnQucHJvcHM7XG4gICAgICBpZiAoc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KSkge1xuICAgICAgICB2YXIgcHVibGljSW5zdCA9IHByZXZDb21wb25lbnQuX3JlbmRlcmVkQ29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCk7XG4gICAgICAgIHZhciB1cGRhdGVkQ2FsbGJhY2sgPSBjYWxsYmFjayAmJiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2FsbGJhY2suY2FsbChwdWJsaWNJbnN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVhY3RNb3VudC5fdXBkYXRlUm9vdENvbXBvbmVudChwcmV2Q29tcG9uZW50LCBuZXh0V3JhcHBlZEVsZW1lbnQsIGNvbnRhaW5lciwgdXBkYXRlZENhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHB1YmxpY0luc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBSZWFjdE1vdW50LnVubW91bnRDb21wb25lbnRBdE5vZGUoY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVhY3RSb290RWxlbWVudCA9IGdldFJlYWN0Um9vdEVsZW1lbnRJbkNvbnRhaW5lcihjb250YWluZXIpO1xuICAgIHZhciBjb250YWluZXJIYXNSZWFjdE1hcmt1cCA9IHJlYWN0Um9vdEVsZW1lbnQgJiYgISFpbnRlcm5hbEdldElEKHJlYWN0Um9vdEVsZW1lbnQpO1xuICAgIHZhciBjb250YWluZXJIYXNOb25Sb290UmVhY3RDaGlsZCA9IGhhc05vblJvb3RSZWFjdENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWNvbnRhaW5lckhhc05vblJvb3RSZWFjdENoaWxkLCAncmVuZGVyKC4uLik6IFJlcGxhY2luZyBSZWFjdC1yZW5kZXJlZCBjaGlsZHJlbiB3aXRoIGEgbmV3IHJvb3QgJyArICdjb21wb25lbnQuIElmIHlvdSBpbnRlbmRlZCB0byB1cGRhdGUgdGhlIGNoaWxkcmVuIG9mIHRoaXMgbm9kZSwgJyArICd5b3Ugc2hvdWxkIGluc3RlYWQgaGF2ZSB0aGUgZXhpc3RpbmcgY2hpbGRyZW4gdXBkYXRlIHRoZWlyIHN0YXRlICcgKyAnYW5kIHJlbmRlciB0aGUgbmV3IGNvbXBvbmVudHMgaW5zdGVhZCBvZiBjYWxsaW5nIFJlYWN0RE9NLnJlbmRlci4nKSA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKCFjb250YWluZXJIYXNSZWFjdE1hcmt1cCB8fCByZWFjdFJvb3RFbGVtZW50Lm5leHRTaWJsaW5nKSB7XG4gICAgICAgIHZhciByb290RWxlbWVudFNpYmxpbmcgPSByZWFjdFJvb3RFbGVtZW50O1xuICAgICAgICB3aGlsZSAocm9vdEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgICAgICAgaWYgKGludGVybmFsR2V0SUQocm9vdEVsZW1lbnRTaWJsaW5nKSkge1xuICAgICAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdyZW5kZXIoKTogVGFyZ2V0IG5vZGUgaGFzIG1hcmt1cCByZW5kZXJlZCBieSBSZWFjdCwgYnV0IHRoZXJlICcgKyAnYXJlIHVucmVsYXRlZCBub2RlcyBhcyB3ZWxsLiBUaGlzIGlzIG1vc3QgY29tbW9ubHkgY2F1c2VkIGJ5ICcgKyAnd2hpdGUtc3BhY2UgaW5zZXJ0ZWQgYXJvdW5kIHNlcnZlci1yZW5kZXJlZCBtYXJrdXAuJykgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgcm9vdEVsZW1lbnRTaWJsaW5nID0gcm9vdEVsZW1lbnRTaWJsaW5nLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNob3VsZFJldXNlTWFya3VwID0gY29udGFpbmVySGFzUmVhY3RNYXJrdXAgJiYgIXByZXZDb21wb25lbnQgJiYgIWNvbnRhaW5lckhhc05vblJvb3RSZWFjdENoaWxkO1xuICAgIHZhciBjb21wb25lbnQgPSBSZWFjdE1vdW50Ll9yZW5kZXJOZXdSb290Q29tcG9uZW50KG5leHRXcmFwcGVkRWxlbWVudCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgcGFyZW50Q29tcG9uZW50ICE9IG51bGwgPyBwYXJlbnRDb21wb25lbnQuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZS5fcHJvY2Vzc0NoaWxkQ29udGV4dChwYXJlbnRDb21wb25lbnQuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZS5fY29udGV4dCkgOiBlbXB0eU9iamVjdCkuX3JlbmRlcmVkQ29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCk7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjay5jYWxsKGNvbXBvbmVudCk7XG4gICAgfVxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgYSBSZWFjdCBjb21wb25lbnQgaW50byB0aGUgRE9NIGluIHRoZSBzdXBwbGllZCBgY29udGFpbmVyYC5cbiAgICpcbiAgICogSWYgdGhlIFJlYWN0IGNvbXBvbmVudCB3YXMgcHJldmlvdXNseSByZW5kZXJlZCBpbnRvIGBjb250YWluZXJgLCB0aGlzIHdpbGxcbiAgICogcGVyZm9ybSBhbiB1cGRhdGUgb24gaXQgYW5kIG9ubHkgbXV0YXRlIHRoZSBET00gYXMgbmVjZXNzYXJ5IHRvIHJlZmxlY3QgdGhlXG4gICAqIGxhdGVzdCBSZWFjdCBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBDb21wb25lbnQgZWxlbWVudCB0byByZW5kZXIuXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIHJlbmRlciBpbnRvLlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIGNvbXBsZXRpb25cbiAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9IENvbXBvbmVudCBpbnN0YW5jZSByZW5kZXJlZCBpbiBgY29udGFpbmVyYC5cbiAgICovXG4gIHJlbmRlcjogZnVuY3Rpb24gKG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFJlYWN0TW91bnQuX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyKG51bGwsIG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgY29udGFpbmVyIG5vZGUgaW50byB3aGljaCBSZWFjdCBjb21wb25lbnRzIHdpbGwgYmUgcmVuZGVyZWQuXG4gICAqIFRoaXMgYWxzbyBjcmVhdGVzIHRoZSBcInJlYWN0Um9vdFwiIElEIHRoYXQgd2lsbCBiZSBhc3NpZ25lZCB0byB0aGUgZWxlbWVudFxuICAgKiByZW5kZXJlZCB3aXRoaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIHJlZ2lzdGVyIGFzIGEgY29udGFpbmVyLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBcInJlYWN0Um9vdFwiIElEIG9mIGVsZW1lbnRzIHJlbmRlcmVkIHdpdGhpbi5cbiAgICovXG4gIHJlZ2lzdGVyQ29udGFpbmVyOiBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgdmFyIHJlYWN0Um9vdElEID0gZ2V0UmVhY3RSb290SUQoY29udGFpbmVyKTtcbiAgICBpZiAocmVhY3RSb290SUQpIHtcbiAgICAgIC8vIElmIG9uZSBleGlzdHMsIG1ha2Ugc3VyZSBpdCBpcyBhIHZhbGlkIFwicmVhY3RSb290XCIgSUQuXG4gICAgICByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChyZWFjdFJvb3RJRCk7XG4gICAgfVxuICAgIGlmICghcmVhY3RSb290SUQpIHtcbiAgICAgIC8vIE5vIHZhbGlkIFwicmVhY3RSb290XCIgSUQgZm91bmQsIGNyZWF0ZSBvbmUuXG4gICAgICByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0Um9vdElEKCk7XG4gICAgfVxuICAgIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXSA9IGNvbnRhaW5lcjtcbiAgICByZXR1cm4gcmVhY3RSb290SUQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVubW91bnRzIGFuZCBkZXN0cm95cyB0aGUgUmVhY3QgY29tcG9uZW50IHJlbmRlcmVkIGluIHRoZSBgY29udGFpbmVyYC5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgY29udGFpbmluZyBhIFJlYWN0IGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBhIGNvbXBvbmVudCB3YXMgZm91bmQgaW4gYW5kIHVubW91bnRlZCBmcm9tXG4gICAqICAgICAgICAgICAgICAgICAgIGBjb250YWluZXJgXG4gICAqL1xuICB1bm1vdW50Q29tcG9uZW50QXROb2RlOiBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgLy8gVmFyaW91cyBwYXJ0cyBvZiBvdXIgY29kZSAoc3VjaCBhcyBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCdzXG4gICAgLy8gX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCkgYXNzdW1lIHRoYXQgY2FsbHMgdG8gcmVuZGVyIGFyZW4ndCBuZXN0ZWQ7XG4gICAgLy8gdmVyaWZ5IHRoYXQgdGhhdCdzIHRoZSBjYXNlLiAoU3RyaWN0bHkgc3BlYWtpbmcsIHVubW91bnRpbmcgd29uJ3QgY2F1c2UgYVxuICAgIC8vIHJlbmRlciBidXQgd2Ugc3RpbGwgZG9uJ3QgZXhwZWN0IHRvIGJlIGluIGEgcmVuZGVyIGNhbGwgaGVyZS4pXG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9PSBudWxsLCAndW5tb3VudENvbXBvbmVudEF0Tm9kZSgpOiBSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uICcgKyAnb2YgcHJvcHMgYW5kIHN0YXRlOyB0cmlnZ2VyaW5nIG5lc3RlZCBjb21wb25lbnQgdXBkYXRlcyBmcm9tIHJlbmRlciAnICsgJ2lzIG5vdCBhbGxvd2VkLiBJZiBuZWNlc3NhcnksIHRyaWdnZXIgbmVzdGVkIHVwZGF0ZXMgaW4gJyArICdjb21wb25lbnREaWRVcGRhdGUuIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mICVzLicsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgJiYgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudC5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG5cbiAgICAhKGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd1bm1vdW50Q29tcG9uZW50QXROb2RlKC4uLik6IFRhcmdldCBjb250YWluZXIgaXMgbm90IGEgRE9NIGVsZW1lbnQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIHJlYWN0Um9vdElEID0gZ2V0UmVhY3RSb290SUQoY29udGFpbmVyKTtcbiAgICB2YXIgY29tcG9uZW50ID0gaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF07XG4gICAgaWYgKCFjb21wb25lbnQpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBub2RlIGJlaW5nIHVubW91bnRlZCB3YXMgcmVuZGVyZWQgYnkgUmVhY3QsIGJ1dCBpc24ndCBhXG4gICAgICAvLyByb290IG5vZGUuXG4gICAgICB2YXIgY29udGFpbmVySGFzTm9uUm9vdFJlYWN0Q2hpbGQgPSBoYXNOb25Sb290UmVhY3RDaGlsZChjb250YWluZXIpO1xuXG4gICAgICAvLyBDaGVjayBpZiB0aGUgY29udGFpbmVyIGl0c2VsZiBpcyBhIFJlYWN0IHJvb3Qgbm9kZS5cbiAgICAgIHZhciBjb250YWluZXJJRCA9IGludGVybmFsR2V0SUQoY29udGFpbmVyKTtcbiAgICAgIHZhciBpc0NvbnRhaW5lclJlYWN0Um9vdCA9IGNvbnRhaW5lcklEICYmIGNvbnRhaW5lcklEID09PSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQoY29udGFpbmVySUQpO1xuXG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghY29udGFpbmVySGFzTm9uUm9vdFJlYWN0Q2hpbGQsICd1bm1vdW50Q29tcG9uZW50QXROb2RlKCk6IFRoZSBub2RlIHlvdVxcJ3JlIGF0dGVtcHRpbmcgdG8gdW5tb3VudCAnICsgJ3dhcyByZW5kZXJlZCBieSBSZWFjdCBhbmQgaXMgbm90IGEgdG9wLWxldmVsIGNvbnRhaW5lci4gJXMnLCBpc0NvbnRhaW5lclJlYWN0Um9vdCA/ICdZb3UgbWF5IGhhdmUgYWNjaWRlbnRhbGx5IHBhc3NlZCBpbiBhIFJlYWN0IHJvb3Qgbm9kZSBpbnN0ZWFkICcgKyAnb2YgaXRzIGNvbnRhaW5lci4nIDogJ0luc3RlYWQsIGhhdmUgdGhlIHBhcmVudCBjb21wb25lbnQgdXBkYXRlIGl0cyBzdGF0ZSBhbmQgJyArICdyZXJlbmRlciBpbiBvcmRlciB0byByZW1vdmUgdGhpcyBjb21wb25lbnQuJykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzKHVubW91bnRDb21wb25lbnRGcm9tTm9kZSwgY29tcG9uZW50LCBjb250YWluZXIpO1xuICAgIGRlbGV0ZSBpbnN0YW5jZXNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcbiAgICBkZWxldGUgY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBkZWxldGUgcm9vdEVsZW1lbnRzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF07XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgY29udGFpbmVyIERPTSBlbGVtZW50IHRoYXQgY29udGFpbnMgUmVhY3QgY29tcG9uZW50IHRvIHdoaWNoIHRoZVxuICAgKiBzdXBwbGllZCBET00gYGlkYCBiZWxvbmdzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIElEIG9mIGFuIGVsZW1lbnQgcmVuZGVyZWQgYnkgYSBSZWFjdCBjb21wb25lbnQuXG4gICAqIEByZXR1cm4gez9ET01FbGVtZW50fSBET00gZWxlbWVudCB0aGF0IGNvbnRhaW5zIHRoZSBgaWRgLlxuICAgKi9cbiAgZmluZFJlYWN0Q29udGFpbmVyRm9ySUQ6IGZ1bmN0aW9uIChpZCkge1xuICAgIHZhciByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChpZCk7XG4gICAgdmFyIGNvbnRhaW5lciA9IGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgcm9vdEVsZW1lbnQgPSByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcbiAgICAgIGlmIChyb290RWxlbWVudCAmJiByb290RWxlbWVudC5wYXJlbnROb2RlICE9PSBjb250YWluZXIpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoXG4gICAgICAgIC8vIENhbGwgaW50ZXJuYWxHZXRJRCBoZXJlIGJlY2F1c2UgZ2V0SUQgY2FsbHMgaXNWYWxpZCB3aGljaCBjYWxsc1xuICAgICAgICAvLyBmaW5kUmVhY3RDb250YWluZXJGb3JJRCAodGhpcyBmdW5jdGlvbikuXG4gICAgICAgIGludGVybmFsR2V0SUQocm9vdEVsZW1lbnQpID09PSByZWFjdFJvb3RJRCwgJ1JlYWN0TW91bnQ6IFJvb3QgZWxlbWVudCBJRCBkaWZmZXJlZCBmcm9tIHJlYWN0Um9vdElELicpIDogdW5kZWZpbmVkO1xuICAgICAgICB2YXIgY29udGFpbmVyQ2hpbGQgPSBjb250YWluZXIuZmlyc3RDaGlsZDtcbiAgICAgICAgaWYgKGNvbnRhaW5lckNoaWxkICYmIHJlYWN0Um9vdElEID09PSBpbnRlcm5hbEdldElEKGNvbnRhaW5lckNoaWxkKSkge1xuICAgICAgICAgIC8vIElmIHRoZSBjb250YWluZXIgaGFzIGEgbmV3IGNoaWxkIHdpdGggdGhlIHNhbWUgSUQgYXMgdGhlIG9sZFxuICAgICAgICAgIC8vIHJvb3QgZWxlbWVudCwgdGhlbiByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXSBpc1xuICAgICAgICAgIC8vIGp1c3Qgc3RhbGUgYW5kIG5lZWRzIHRvIGJlIHVwZGF0ZWQuIFRoZSBjYXNlIHRoYXQgZGVzZXJ2ZXMgYVxuICAgICAgICAgIC8vIHdhcm5pbmcgaXMgd2hlbiB0aGUgY29udGFpbmVyIGlzIGVtcHR5LlxuICAgICAgICAgIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbcmVhY3RSb290SURdID0gY29udGFpbmVyQ2hpbGQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdE1vdW50OiBSb290IGVsZW1lbnQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIGl0cyBvcmlnaW5hbCAnICsgJ2NvbnRhaW5lci4gTmV3IGNvbnRhaW5lcjogJXMnLCByb290RWxlbWVudC5wYXJlbnROb2RlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmRzIGFuIGVsZW1lbnQgcmVuZGVyZWQgYnkgUmVhY3Qgd2l0aCB0aGUgc3VwcGxpZWQgSUQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiBhIERPTSBub2RlIGluIHRoZSBSZWFjdCBjb21wb25lbnQuXG4gICAqIEByZXR1cm4ge0RPTUVsZW1lbnR9IFJvb3QgRE9NIG5vZGUgb2YgdGhlIFJlYWN0IGNvbXBvbmVudC5cbiAgICovXG4gIGZpbmRSZWFjdE5vZGVCeUlEOiBmdW5jdGlvbiAoaWQpIHtcbiAgICB2YXIgcmVhY3RSb290ID0gUmVhY3RNb3VudC5maW5kUmVhY3RDb250YWluZXJGb3JJRChpZCk7XG4gICAgcmV0dXJuIFJlYWN0TW91bnQuZmluZENvbXBvbmVudFJvb3QocmVhY3RSb290LCBpZCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRyYXZlcnNlcyB1cCB0aGUgYW5jZXN0b3JzIG9mIHRoZSBzdXBwbGllZCBub2RlIHRvIGZpbmQgYSBub2RlIHRoYXQgaXMgYVxuICAgKiBET00gcmVwcmVzZW50YXRpb24gb2YgYSBSZWFjdCBjb21wb25lbnQgcmVuZGVyZWQgYnkgdGhpcyBjb3B5IG9mIFJlYWN0LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG5vZGVcbiAgICogQHJldHVybiB7P0RPTUV2ZW50VGFyZ2V0fVxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldEZpcnN0UmVhY3RET006IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIGZpbmRGaXJzdFJlYWN0RE9NSW1wbChub2RlKTtcbiAgfSxcblxuICAvKipcbiAgICogRmluZHMgYSBub2RlIHdpdGggdGhlIHN1cHBsaWVkIGB0YXJnZXRJRGAgaW5zaWRlIG9mIHRoZSBzdXBwbGllZFxuICAgKiBgYW5jZXN0b3JOb2RlYC4gIEV4cGxvaXRzIHRoZSBJRCBuYW1pbmcgc2NoZW1lIHRvIHBlcmZvcm0gdGhlIHNlYXJjaFxuICAgKiBxdWlja2x5LlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSBhbmNlc3Rvck5vZGUgU2VhcmNoIGZyb20gdGhpcyByb290LlxuICAgKiBAcGFyYXJtIHtzdHJpbmd9IHRhcmdldElEIElEIG9mIHRoZSBET00gcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7RE9NRXZlbnRUYXJnZXR9IERPTSBub2RlIHdpdGggdGhlIHN1cHBsaWVkIGB0YXJnZXRJRGAuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZmluZENvbXBvbmVudFJvb3Q6IGZ1bmN0aW9uIChhbmNlc3Rvck5vZGUsIHRhcmdldElEKSB7XG4gICAgdmFyIGZpcnN0Q2hpbGRyZW4gPSBmaW5kQ29tcG9uZW50Um9vdFJldXNhYmxlQXJyYXk7XG4gICAgdmFyIGNoaWxkSW5kZXggPSAwO1xuXG4gICAgdmFyIGRlZXBlc3RBbmNlc3RvciA9IGZpbmREZWVwZXN0Q2FjaGVkQW5jZXN0b3IodGFyZ2V0SUQpIHx8IGFuY2VzdG9yTm9kZTtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgb24gdGhlIG5leHQgbGluZTsgZ2l2ZSBhbiBlYXJseSB3YXJuaW5nXG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhkZWVwZXN0QW5jZXN0b3IgIT0gbnVsbCwgJ1JlYWN0IGNhblxcJ3QgZmluZCB0aGUgcm9vdCBjb21wb25lbnQgbm9kZSBmb3IgZGF0YS1yZWFjdGlkIHZhbHVlICcgKyAnYCVzYC4gSWYgeW91XFwncmUgc2VlaW5nIHRoaXMgbWVzc2FnZSwgaXQgcHJvYmFibHkgbWVhbnMgdGhhdCAnICsgJ3lvdVxcJ3ZlIGxvYWRlZCB0d28gY29waWVzIG9mIFJlYWN0IG9uIHRoZSBwYWdlLiBBdCB0aGlzIHRpbWUsIG9ubHkgJyArICdhIHNpbmdsZSBjb3B5IG9mIFJlYWN0IGNhbiBiZSBsb2FkZWQgYXQgYSB0aW1lLicsIHRhcmdldElEKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBmaXJzdENoaWxkcmVuWzBdID0gZGVlcGVzdEFuY2VzdG9yLmZpcnN0Q2hpbGQ7XG4gICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSAxO1xuXG4gICAgd2hpbGUgKGNoaWxkSW5kZXggPCBmaXJzdENoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgdmFyIGNoaWxkID0gZmlyc3RDaGlsZHJlbltjaGlsZEluZGV4KytdO1xuICAgICAgdmFyIHRhcmdldENoaWxkO1xuXG4gICAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgICAgdmFyIGNoaWxkSUQgPSBSZWFjdE1vdW50LmdldElEKGNoaWxkKTtcbiAgICAgICAgaWYgKGNoaWxkSUQpIHtcbiAgICAgICAgICAvLyBFdmVuIGlmIHdlIGZpbmQgdGhlIG5vZGUgd2UncmUgbG9va2luZyBmb3IsIHdlIGZpbmlzaCBsb29waW5nXG4gICAgICAgICAgLy8gdGhyb3VnaCBpdHMgc2libGluZ3MgdG8gZW5zdXJlIHRoZXkncmUgY2FjaGVkIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZVxuICAgICAgICAgIC8vIHRvIHJldmlzaXQgdGhpcyBub2RlIGFnYWluLiBPdGhlcndpc2UsIHdlIG1ha2Ugbl4yIGNhbGxzIHRvIGdldElEXG4gICAgICAgICAgLy8gd2hlbiB2aXNpdGluZyB0aGUgbWFueSBjaGlsZHJlbiBvZiBhIHNpbmdsZSBub2RlIGluIG9yZGVyLlxuXG4gICAgICAgICAgaWYgKHRhcmdldElEID09PSBjaGlsZElEKSB7XG4gICAgICAgICAgICB0YXJnZXRDaGlsZCA9IGNoaWxkO1xuICAgICAgICAgIH0gZWxzZSBpZiAoUmVhY3RJbnN0YW5jZUhhbmRsZXMuaXNBbmNlc3RvcklET2YoY2hpbGRJRCwgdGFyZ2V0SUQpKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBmaW5kIGEgY2hpbGQgd2hvc2UgSUQgaXMgYW4gYW5jZXN0b3Igb2YgdGhlIGdpdmVuIElELFxuICAgICAgICAgICAgLy8gdGhlbiB3ZSBjYW4gYmUgc3VyZSB0aGF0IHdlIG9ubHkgd2FudCB0byBzZWFyY2ggdGhlIHN1YnRyZWVcbiAgICAgICAgICAgIC8vIHJvb3RlZCBhdCB0aGlzIGNoaWxkLCBzbyB3ZSBjYW4gdGhyb3cgb3V0IHRoZSByZXN0IG9mIHRoZVxuICAgICAgICAgICAgLy8gc2VhcmNoIHN0YXRlLlxuICAgICAgICAgICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSBjaGlsZEluZGV4ID0gMDtcbiAgICAgICAgICAgIGZpcnN0Q2hpbGRyZW4ucHVzaChjaGlsZC5maXJzdENoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgdGhpcyBjaGlsZCBoYWQgbm8gSUQsIHRoZW4gdGhlcmUncyBhIGNoYW5jZSB0aGF0IGl0IHdhc1xuICAgICAgICAgIC8vIGluamVjdGVkIGF1dG9tYXRpY2FsbHkgYnkgdGhlIGJyb3dzZXIsIGFzIHdoZW4gYSBgPHRhYmxlPmBcbiAgICAgICAgICAvLyBlbGVtZW50IHNwcm91dHMgYW4gZXh0cmEgYDx0Ym9keT5gIGNoaWxkIGFzIGEgc2lkZSBlZmZlY3Qgb2ZcbiAgICAgICAgICAvLyBgLmlubmVySFRNTGAgcGFyc2luZy4gT3B0aW1pc3RpY2FsbHkgY29udGludWUgZG93biB0aGlzXG4gICAgICAgICAgLy8gYnJhbmNoLCBidXQgbm90IGJlZm9yZSBleGFtaW5pbmcgdGhlIG90aGVyIHNpYmxpbmdzLlxuICAgICAgICAgIGZpcnN0Q2hpbGRyZW4ucHVzaChjaGlsZC5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICB9XG5cbiAgICAgIGlmICh0YXJnZXRDaGlsZCkge1xuICAgICAgICAvLyBFbXB0eWluZyBmaXJzdENoaWxkcmVuL2ZpbmRDb21wb25lbnRSb290UmV1c2FibGVBcnJheSBpc1xuICAgICAgICAvLyBub3QgbmVjZXNzYXJ5IGZvciBjb3JyZWN0bmVzcywgYnV0IGl0IGhlbHBzIHRoZSBHQyByZWNsYWltXG4gICAgICAgIC8vIGFueSBub2RlcyB0aGF0IHdlcmUgbGVmdCBhdCB0aGUgZW5kIG9mIHRoZSBzZWFyY2guXG4gICAgICAgIGZpcnN0Q2hpbGRyZW4ubGVuZ3RoID0gMDtcblxuICAgICAgICByZXR1cm4gdGFyZ2V0Q2hpbGQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSAwO1xuXG4gICAgIWZhbHNlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2ZpbmRDb21wb25lbnRSb290KC4uLiwgJXMpOiBVbmFibGUgdG8gZmluZCBlbGVtZW50LiBUaGlzIHByb2JhYmx5ICcgKyAnbWVhbnMgdGhlIERPTSB3YXMgdW5leHBlY3RlZGx5IG11dGF0ZWQgKGUuZy4sIGJ5IHRoZSBicm93c2VyKSwgJyArICd1c3VhbGx5IGR1ZSB0byBmb3JnZXR0aW5nIGEgPHRib2R5PiB3aGVuIHVzaW5nIHRhYmxlcywgbmVzdGluZyB0YWdzICcgKyAnbGlrZSA8Zm9ybT4sIDxwPiwgb3IgPGE+LCBvciB1c2luZyBub24tU1ZHIGVsZW1lbnRzIGluIGFuIDxzdmc+ICcgKyAncGFyZW50LiAnICsgJ1RyeSBpbnNwZWN0aW5nIHRoZSBjaGlsZCBub2RlcyBvZiB0aGUgZWxlbWVudCB3aXRoIFJlYWN0IElEIGAlc2AuJywgdGFyZ2V0SUQsIFJlYWN0TW91bnQuZ2V0SUQoYW5jZXN0b3JOb2RlKSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9LFxuXG4gIF9tb3VudEltYWdlSW50b05vZGU6IGZ1bmN0aW9uIChtYXJrdXAsIGNvbnRhaW5lciwgc2hvdWxkUmV1c2VNYXJrdXAsIHRyYW5zYWN0aW9uKSB7XG4gICAgIShjb250YWluZXIgJiYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NfTk9ERV9UWVBFIHx8IGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DVU1FTlRfRlJBR01FTlRfTk9ERV9UWVBFKSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnbW91bnRDb21wb25lbnRJbnRvTm9kZSguLi4pOiBUYXJnZXQgY29udGFpbmVyIGlzIG5vdCB2YWxpZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoc2hvdWxkUmV1c2VNYXJrdXApIHtcbiAgICAgIHZhciByb290RWxlbWVudCA9IGdldFJlYWN0Um9vdEVsZW1lbnRJbkNvbnRhaW5lcihjb250YWluZXIpO1xuICAgICAgaWYgKFJlYWN0TWFya3VwQ2hlY2tzdW0uY2FuUmV1c2VNYXJrdXAobWFya3VwLCByb290RWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGNoZWNrc3VtID0gcm9vdEVsZW1lbnQuZ2V0QXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FKTtcbiAgICAgICAgcm9vdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FKTtcblxuICAgICAgICB2YXIgcm9vdE1hcmt1cCA9IHJvb3RFbGVtZW50Lm91dGVySFRNTDtcbiAgICAgICAgcm9vdEVsZW1lbnQuc2V0QXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FLCBjaGVja3N1bSk7XG5cbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRNYXJrdXAgPSBtYXJrdXA7XG4gICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgLy8gYmVjYXVzZSByb290TWFya3VwIGlzIHJldHJpZXZlZCBmcm9tIHRoZSBET00sIHZhcmlvdXMgbm9ybWFsaXphdGlvbnNcbiAgICAgICAgICAvLyB3aWxsIGhhdmUgb2NjdXJyZWQgd2hpY2ggd2lsbCBub3QgYmUgcHJlc2VudCBpbiBgbWFya3VwYC4gSGVyZSxcbiAgICAgICAgICAvLyBpbnNlcnQgbWFya3VwIGludG8gYSA8ZGl2PiBvciA8aWZyYW1lPiBkZXBlbmRpbmcgb24gdGhlIGNvbnRhaW5lclxuICAgICAgICAgIC8vIHR5cGUgdG8gcGVyZm9ybSB0aGUgc2FtZSBub3JtYWxpemF0aW9ucyBiZWZvcmUgY29tcGFyaW5nLlxuICAgICAgICAgIHZhciBub3JtYWxpemVyO1xuICAgICAgICAgIGlmIChjb250YWluZXIubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERV9UWVBFKSB7XG4gICAgICAgICAgICBub3JtYWxpemVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBub3JtYWxpemVyLmlubmVySFRNTCA9IG1hcmt1cDtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRNYXJrdXAgPSBub3JtYWxpemVyLmlubmVySFRNTDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9ybWFsaXplciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub3JtYWxpemVyKTtcbiAgICAgICAgICAgIG5vcm1hbGl6ZXIuY29udGVudERvY3VtZW50LndyaXRlKG1hcmt1cCk7XG4gICAgICAgICAgICBub3JtYWxpemVkTWFya3VwID0gbm9ybWFsaXplci5jb250ZW50RG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTDtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobm9ybWFsaXplcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRpZmZJbmRleCA9IGZpcnN0RGlmZmVyZW5jZUluZGV4KG5vcm1hbGl6ZWRNYXJrdXAsIHJvb3RNYXJrdXApO1xuICAgICAgICB2YXIgZGlmZmVyZW5jZSA9ICcgKGNsaWVudCkgJyArIG5vcm1hbGl6ZWRNYXJrdXAuc3Vic3RyaW5nKGRpZmZJbmRleCAtIDIwLCBkaWZmSW5kZXggKyAyMCkgKyAnXFxuIChzZXJ2ZXIpICcgKyByb290TWFya3VwLnN1YnN0cmluZyhkaWZmSW5kZXggLSAyMCwgZGlmZkluZGV4ICsgMjApO1xuXG4gICAgICAgICEoY29udGFpbmVyLm5vZGVUeXBlICE9PSBET0NfTk9ERV9UWVBFKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdZb3VcXCdyZSB0cnlpbmcgdG8gcmVuZGVyIGEgY29tcG9uZW50IHRvIHRoZSBkb2N1bWVudCB1c2luZyAnICsgJ3NlcnZlciByZW5kZXJpbmcgYnV0IHRoZSBjaGVja3N1bSB3YXMgaW52YWxpZC4gVGhpcyB1c3VhbGx5ICcgKyAnbWVhbnMgeW91IHJlbmRlcmVkIGEgZGlmZmVyZW50IGNvbXBvbmVudCB0eXBlIG9yIHByb3BzIG9uICcgKyAndGhlIGNsaWVudCBmcm9tIHRoZSBvbmUgb24gdGhlIHNlcnZlciwgb3IgeW91ciByZW5kZXIoKSAnICsgJ21ldGhvZHMgYXJlIGltcHVyZS4gUmVhY3QgY2Fubm90IGhhbmRsZSB0aGlzIGNhc2UgZHVlIHRvICcgKyAnY3Jvc3MtYnJvd3NlciBxdWlya3MgYnkgcmVuZGVyaW5nIGF0IHRoZSBkb2N1bWVudCByb290LiBZb3UgJyArICdzaG91bGQgbG9vayBmb3IgZW52aXJvbm1lbnQgZGVwZW5kZW50IGNvZGUgaW4geW91ciBjb21wb25lbnRzICcgKyAnYW5kIGVuc3VyZSB0aGUgcHJvcHMgYXJlIHRoZSBzYW1lIGNsaWVudCBhbmQgc2VydmVyIHNpZGU6XFxuJXMnLCBkaWZmZXJlbmNlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0IGF0dGVtcHRlZCB0byByZXVzZSBtYXJrdXAgaW4gYSBjb250YWluZXIgYnV0IHRoZSAnICsgJ2NoZWNrc3VtIHdhcyBpbnZhbGlkLiBUaGlzIGdlbmVyYWxseSBtZWFucyB0aGF0IHlvdSBhcmUgJyArICd1c2luZyBzZXJ2ZXIgcmVuZGVyaW5nIGFuZCB0aGUgbWFya3VwIGdlbmVyYXRlZCBvbiB0aGUgJyArICdzZXJ2ZXIgd2FzIG5vdCB3aGF0IHRoZSBjbGllbnQgd2FzIGV4cGVjdGluZy4gUmVhY3QgaW5qZWN0ZWQgJyArICduZXcgbWFya3VwIHRvIGNvbXBlbnNhdGUgd2hpY2ggd29ya3MgYnV0IHlvdSBoYXZlIGxvc3QgbWFueSAnICsgJ29mIHRoZSBiZW5lZml0cyBvZiBzZXJ2ZXIgcmVuZGVyaW5nLiBJbnN0ZWFkLCBmaWd1cmUgb3V0ICcgKyAnd2h5IHRoZSBtYXJrdXAgYmVpbmcgZ2VuZXJhdGVkIGlzIGRpZmZlcmVudCBvbiB0aGUgY2xpZW50ICcgKyAnb3Igc2VydmVyOlxcbiVzJywgZGlmZmVyZW5jZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAhKGNvbnRhaW5lci5ub2RlVHlwZSAhPT0gRE9DX05PREVfVFlQRSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnWW91XFwncmUgdHJ5aW5nIHRvIHJlbmRlciBhIGNvbXBvbmVudCB0byB0aGUgZG9jdW1lbnQgYnV0ICcgKyAneW91IGRpZG5cXCd0IHVzZSBzZXJ2ZXIgcmVuZGVyaW5nLiBXZSBjYW5cXCd0IGRvIHRoaXMgJyArICd3aXRob3V0IHVzaW5nIHNlcnZlciByZW5kZXJpbmcgZHVlIHRvIGNyb3NzLWJyb3dzZXIgcXVpcmtzLiAnICsgJ1NlZSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0cmluZygpIGZvciBzZXJ2ZXIgcmVuZGVyaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIGlmICh0cmFuc2FjdGlvbi51c2VDcmVhdGVFbGVtZW50KSB7XG4gICAgICB3aGlsZSAoY29udGFpbmVyLmxhc3RDaGlsZCkge1xuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG4gICAgICB9XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobWFya3VwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0SW5uZXJIVE1MKGNvbnRhaW5lciwgbWFya3VwKTtcbiAgICB9XG4gIH0sXG5cbiAgb3duZXJEb2N1bWVudENvbnRleHRLZXk6IG93bmVyRG9jdW1lbnRDb250ZXh0S2V5LFxuXG4gIC8qKlxuICAgKiBSZWFjdCBJRCB1dGlsaXRpZXMuXG4gICAqL1xuXG4gIGdldFJlYWN0Um9vdElEOiBnZXRSZWFjdFJvb3RJRCxcblxuICBnZXRJRDogZ2V0SUQsXG5cbiAgc2V0SUQ6IHNldElELFxuXG4gIGdldE5vZGU6IGdldE5vZGUsXG5cbiAgZ2V0Tm9kZUZyb21JbnN0YW5jZTogZ2V0Tm9kZUZyb21JbnN0YW5jZSxcblxuICBpc1ZhbGlkOiBpc1ZhbGlkLFxuXG4gIHB1cmdlSUQ6IHB1cmdlSURcbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdE1vdW50LCAnUmVhY3RNb3VudCcsIHtcbiAgX3JlbmRlck5ld1Jvb3RDb21wb25lbnQ6ICdfcmVuZGVyTmV3Um9vdENvbXBvbmVudCcsXG4gIF9tb3VudEltYWdlSW50b05vZGU6ICdfbW91bnRJbWFnZUludG9Ob2RlJ1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RNb3VudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RNdWx0aUNoaWxkXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcyA9IHJlcXVpcmUoJy4vUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMnKTtcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0UmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVyJyk7XG52YXIgUmVhY3RDaGlsZFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0Q2hpbGRSZWNvbmNpbGVyJyk7XG5cbnZhciBmbGF0dGVuQ2hpbGRyZW4gPSByZXF1aXJlKCcuL2ZsYXR0ZW5DaGlsZHJlbicpO1xuXG4vKipcbiAqIFVwZGF0aW5nIGNoaWxkcmVuIG9mIGEgY29tcG9uZW50IG1heSB0cmlnZ2VyIHJlY3Vyc2l2ZSB1cGRhdGVzLiBUaGUgZGVwdGggaXNcbiAqIHVzZWQgdG8gYmF0Y2ggcmVjdXJzaXZlIHVwZGF0ZXMgdG8gcmVuZGVyIG1hcmt1cCBtb3JlIGVmZmljaWVudGx5LlxuICpcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgdXBkYXRlRGVwdGggPSAwO1xuXG4vKipcbiAqIFF1ZXVlIG9mIHVwZGF0ZSBjb25maWd1cmF0aW9uIG9iamVjdHMuXG4gKlxuICogRWFjaCBvYmplY3QgaGFzIGEgYHR5cGVgIHByb3BlcnR5IHRoYXQgaXMgaW4gYFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzYC5cbiAqXG4gKiBAdHlwZSB7YXJyYXk8b2JqZWN0Pn1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciB1cGRhdGVRdWV1ZSA9IFtdO1xuXG4vKipcbiAqIFF1ZXVlIG9mIG1hcmt1cCB0byBiZSByZW5kZXJlZC5cbiAqXG4gKiBAdHlwZSB7YXJyYXk8c3RyaW5nPn1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBtYXJrdXBRdWV1ZSA9IFtdO1xuXG4vKipcbiAqIEVucXVldWVzIG1hcmt1cCB0byBiZSByZW5kZXJlZCBhbmQgaW5zZXJ0ZWQgYXQgYSBzdXBwbGllZCBpbmRleC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0aGF0IHJlbmRlcnMgaW50byBhbiBlbGVtZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHRvSW5kZXggRGVzdGluYXRpb24gaW5kZXguXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbnF1ZXVlSW5zZXJ0TWFya3VwKHBhcmVudElELCBtYXJrdXAsIHRvSW5kZXgpIHtcbiAgLy8gTk9URTogTnVsbCB2YWx1ZXMgcmVkdWNlIGhpZGRlbiBjbGFzc2VzLlxuICB1cGRhdGVRdWV1ZS5wdXNoKHtcbiAgICBwYXJlbnRJRDogcGFyZW50SUQsXG4gICAgcGFyZW50Tm9kZTogbnVsbCxcbiAgICB0eXBlOiBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5JTlNFUlRfTUFSS1VQLFxuICAgIG1hcmt1cEluZGV4OiBtYXJrdXBRdWV1ZS5wdXNoKG1hcmt1cCkgLSAxLFxuICAgIGNvbnRlbnQ6IG51bGwsXG4gICAgZnJvbUluZGV4OiBudWxsLFxuICAgIHRvSW5kZXg6IHRvSW5kZXhcbiAgfSk7XG59XG5cbi8qKlxuICogRW5xdWV1ZXMgbW92aW5nIGFuIGV4aXN0aW5nIGVsZW1lbnQgdG8gYW5vdGhlciBpbmRleC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IFNvdXJjZSBpbmRleCBvZiB0aGUgZXhpc3RpbmcgZWxlbWVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b0luZGV4IERlc3RpbmF0aW9uIGluZGV4IG9mIHRoZSBlbGVtZW50LlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZU1vdmUocGFyZW50SUQsIGZyb21JbmRleCwgdG9JbmRleCkge1xuICAvLyBOT1RFOiBOdWxsIHZhbHVlcyByZWR1Y2UgaGlkZGVuIGNsYXNzZXMuXG4gIHVwZGF0ZVF1ZXVlLnB1c2goe1xuICAgIHBhcmVudElEOiBwYXJlbnRJRCxcbiAgICBwYXJlbnROb2RlOiBudWxsLFxuICAgIHR5cGU6IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLk1PVkVfRVhJU1RJTkcsXG4gICAgbWFya3VwSW5kZXg6IG51bGwsXG4gICAgY29udGVudDogbnVsbCxcbiAgICBmcm9tSW5kZXg6IGZyb21JbmRleCxcbiAgICB0b0luZGV4OiB0b0luZGV4XG4gIH0pO1xufVxuXG4vKipcbiAqIEVucXVldWVzIHJlbW92aW5nIGFuIGVsZW1lbnQgYXQgYW4gaW5kZXguXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmVudElEIElEIG9mIHRoZSBwYXJlbnQgY29tcG9uZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBJbmRleCBvZiB0aGUgZWxlbWVudCB0byByZW1vdmUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbnF1ZXVlUmVtb3ZlKHBhcmVudElELCBmcm9tSW5kZXgpIHtcbiAgLy8gTk9URTogTnVsbCB2YWx1ZXMgcmVkdWNlIGhpZGRlbiBjbGFzc2VzLlxuICB1cGRhdGVRdWV1ZS5wdXNoKHtcbiAgICBwYXJlbnRJRDogcGFyZW50SUQsXG4gICAgcGFyZW50Tm9kZTogbnVsbCxcbiAgICB0eXBlOiBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5SRU1PVkVfTk9ERSxcbiAgICBtYXJrdXBJbmRleDogbnVsbCxcbiAgICBjb250ZW50OiBudWxsLFxuICAgIGZyb21JbmRleDogZnJvbUluZGV4LFxuICAgIHRvSW5kZXg6IG51bGxcbiAgfSk7XG59XG5cbi8qKlxuICogRW5xdWV1ZXMgc2V0dGluZyB0aGUgbWFya3VwIG9mIGEgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0aGF0IHJlbmRlcnMgaW50byBhbiBlbGVtZW50LlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZVNldE1hcmt1cChwYXJlbnRJRCwgbWFya3VwKSB7XG4gIC8vIE5PVEU6IE51bGwgdmFsdWVzIHJlZHVjZSBoaWRkZW4gY2xhc3Nlcy5cbiAgdXBkYXRlUXVldWUucHVzaCh7XG4gICAgcGFyZW50SUQ6IHBhcmVudElELFxuICAgIHBhcmVudE5vZGU6IG51bGwsXG4gICAgdHlwZTogUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuU0VUX01BUktVUCxcbiAgICBtYXJrdXBJbmRleDogbnVsbCxcbiAgICBjb250ZW50OiBtYXJrdXAsXG4gICAgZnJvbUluZGV4OiBudWxsLFxuICAgIHRvSW5kZXg6IG51bGxcbiAgfSk7XG59XG5cbi8qKlxuICogRW5xdWV1ZXMgc2V0dGluZyB0aGUgdGV4dCBjb250ZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJlbnRJRCBJRCBvZiB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0Q29udGVudCBUZXh0IGNvbnRlbnQgdG8gc2V0LlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZVRleHRDb250ZW50KHBhcmVudElELCB0ZXh0Q29udGVudCkge1xuICAvLyBOT1RFOiBOdWxsIHZhbHVlcyByZWR1Y2UgaGlkZGVuIGNsYXNzZXMuXG4gIHVwZGF0ZVF1ZXVlLnB1c2goe1xuICAgIHBhcmVudElEOiBwYXJlbnRJRCxcbiAgICBwYXJlbnROb2RlOiBudWxsLFxuICAgIHR5cGU6IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlRFWFRfQ09OVEVOVCxcbiAgICBtYXJrdXBJbmRleDogbnVsbCxcbiAgICBjb250ZW50OiB0ZXh0Q29udGVudCxcbiAgICBmcm9tSW5kZXg6IG51bGwsXG4gICAgdG9JbmRleDogbnVsbFxuICB9KTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzZXMgYW55IGVucXVldWVkIHVwZGF0ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKCkge1xuICBpZiAodXBkYXRlUXVldWUubGVuZ3RoKSB7XG4gICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5wcm9jZXNzQ2hpbGRyZW5VcGRhdGVzKHVwZGF0ZVF1ZXVlLCBtYXJrdXBRdWV1ZSk7XG4gICAgY2xlYXJRdWV1ZSgpO1xuICB9XG59XG5cbi8qKlxuICogQ2xlYXJzIGFueSBlbnF1ZXVlZCB1cGRhdGVzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNsZWFyUXVldWUoKSB7XG4gIHVwZGF0ZVF1ZXVlLmxlbmd0aCA9IDA7XG4gIG1hcmt1cFF1ZXVlLmxlbmd0aCA9IDA7XG59XG5cbi8qKlxuICogUmVhY3RNdWx0aUNoaWxkIGFyZSBjYXBhYmxlIG9mIHJlY29uY2lsaW5nIG11bHRpcGxlIGNoaWxkcmVuLlxuICpcbiAqIEBjbGFzcyBSZWFjdE11bHRpQ2hpbGRcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RNdWx0aUNoaWxkID0ge1xuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBjb21tb24gZnVuY3Rpb25hbGl0eSBmb3IgY29tcG9uZW50cyB0aGF0IG11c3QgcmVjb25jaWxlIG11bHRpcGxlXG4gICAqIGNoaWxkcmVuLiBUaGlzIGlzIHVzZWQgYnkgYFJlYWN0RE9NQ29tcG9uZW50YCB0byBtb3VudCwgdXBkYXRlLCBhbmRcbiAgICogdW5tb3VudCBjaGlsZCBjb21wb25lbnRzLlxuICAgKlxuICAgKiBAbGVuZHMge1JlYWN0TXVsdGlDaGlsZC5wcm90b3R5cGV9XG4gICAqL1xuICBNaXhpbjoge1xuXG4gICAgX3JlY29uY2lsZXJJbnN0YW50aWF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAobmVzdGVkQ2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdENoaWxkUmVjb25jaWxlci5pbnN0YW50aWF0ZUNoaWxkcmVuKG5lc3RlZENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLmluc3RhbnRpYXRlQ2hpbGRyZW4obmVzdGVkQ2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgX3JlY29uY2lsZXJVcGRhdGVDaGlsZHJlbjogZnVuY3Rpb24gKHByZXZDaGlsZHJlbiwgbmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICB2YXIgbmV4dENoaWxkcmVuO1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5fb3duZXI7XG4gICAgICAgICAgICBuZXh0Q2hpbGRyZW4gPSBmbGF0dGVuQ2hpbGRyZW4obmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMpO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVwZGF0ZUNoaWxkcmVuKHByZXZDaGlsZHJlbiwgbmV4dENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG5leHRDaGlsZHJlbiA9IGZsYXR0ZW5DaGlsZHJlbihuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cyk7XG4gICAgICByZXR1cm4gUmVhY3RDaGlsZFJlY29uY2lsZXIudXBkYXRlQ2hpbGRyZW4ocHJldkNoaWxkcmVuLCBuZXh0Q2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgXCJtb3VudCBpbWFnZVwiIGZvciBlYWNoIG9mIHRoZSBzdXBwbGllZCBjaGlsZHJlbi4gSW4gdGhlIGNhc2VcbiAgICAgKiBvZiBgUmVhY3RET01Db21wb25lbnRgLCBhIG1vdW50IGltYWdlIGlzIGEgc3RyaW5nIG9mIG1hcmt1cC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7P29iamVjdH0gbmVzdGVkQ2hpbGRyZW4gTmVzdGVkIGNoaWxkIG1hcHMuXG4gICAgICogQHJldHVybiB7YXJyYXl9IEFuIGFycmF5IG9mIG1vdW50ZWQgcmVwcmVzZW50YXRpb25zLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG1vdW50Q2hpbGRyZW46IGZ1bmN0aW9uIChuZXN0ZWRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuX3JlY29uY2lsZXJJbnN0YW50aWF0ZUNoaWxkcmVuKG5lc3RlZENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICB0aGlzLl9yZW5kZXJlZENoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICB2YXIgbW91bnRJbWFnZXMgPSBbXTtcbiAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICBmb3IgKHZhciBuYW1lIGluIGNoaWxkcmVuKSB7XG4gICAgICAgIGlmIChjaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW25hbWVdO1xuICAgICAgICAgIC8vIElubGluZWQgZm9yIHBlcmZvcm1hbmNlLCBzZWUgYFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0SURgLlxuICAgICAgICAgIHZhciByb290SUQgPSB0aGlzLl9yb290Tm9kZUlEICsgbmFtZTtcbiAgICAgICAgICB2YXIgbW91bnRJbWFnZSA9IFJlYWN0UmVjb25jaWxlci5tb3VudENvbXBvbmVudChjaGlsZCwgcm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgICAgY2hpbGQuX21vdW50SW5kZXggPSBpbmRleCsrO1xuICAgICAgICAgIG1vdW50SW1hZ2VzLnB1c2gobW91bnRJbWFnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBtb3VudEltYWdlcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVwbGFjZXMgYW55IHJlbmRlcmVkIGNoaWxkcmVuIHdpdGggYSB0ZXh0IGNvbnRlbnQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5leHRDb250ZW50IFN0cmluZyBvZiBjb250ZW50LlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVwZGF0ZVRleHRDb250ZW50OiBmdW5jdGlvbiAobmV4dENvbnRlbnQpIHtcbiAgICAgIHVwZGF0ZURlcHRoKys7XG4gICAgICB2YXIgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHByZXZDaGlsZHJlbiA9IHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW47XG4gICAgICAgIC8vIFJlbW92ZSBhbnkgcmVuZGVyZWQgY2hpbGRyZW4uXG4gICAgICAgIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVubW91bnRDaGlsZHJlbihwcmV2Q2hpbGRyZW4pO1xuICAgICAgICAvLyBUT0RPOiBUaGUgc2V0VGV4dENvbnRlbnQgb3BlcmF0aW9uIHNob3VsZCBiZSBlbm91Z2hcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgICBpZiAocHJldkNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLl91bm1vdW50Q2hpbGQocHJldkNoaWxkcmVuW25hbWVdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IG5ldyB0ZXh0IGNvbnRlbnQuXG4gICAgICAgIHRoaXMuc2V0VGV4dENvbnRlbnQobmV4dENvbnRlbnQpO1xuICAgICAgICBlcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdXBkYXRlRGVwdGgtLTtcbiAgICAgICAgaWYgKCF1cGRhdGVEZXB0aCkge1xuICAgICAgICAgIGlmIChlcnJvclRocm93bikge1xuICAgICAgICAgICAgY2xlYXJRdWV1ZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9jZXNzUXVldWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVwbGFjZXMgYW55IHJlbmRlcmVkIGNoaWxkcmVuIHdpdGggYSBtYXJrdXAgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5leHRNYXJrdXAgU3RyaW5nIG9mIG1hcmt1cC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB1cGRhdGVNYXJrdXA6IGZ1bmN0aW9uIChuZXh0TWFya3VwKSB7XG4gICAgICB1cGRhdGVEZXB0aCsrO1xuICAgICAgdmFyIGVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBwcmV2Q2hpbGRyZW4gPSB0aGlzLl9yZW5kZXJlZENoaWxkcmVuO1xuICAgICAgICAvLyBSZW1vdmUgYW55IHJlbmRlcmVkIGNoaWxkcmVuLlxuICAgICAgICBSZWFjdENoaWxkUmVjb25jaWxlci51bm1vdW50Q2hpbGRyZW4ocHJldkNoaWxkcmVuKTtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgICBpZiAocHJldkNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLl91bm1vdW50Q2hpbGRCeU5hbWUocHJldkNoaWxkcmVuW25hbWVdLCBuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRNYXJrdXAobmV4dE1hcmt1cCk7XG4gICAgICAgIGVycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB1cGRhdGVEZXB0aC0tO1xuICAgICAgICBpZiAoIXVwZGF0ZURlcHRoKSB7XG4gICAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICBjbGVhclF1ZXVlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2Nlc3NRdWV1ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSByZW5kZXJlZCBjaGlsZHJlbiB3aXRoIG5ldyBjaGlsZHJlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMgTmVzdGVkIGNoaWxkIGVsZW1lbnQgbWFwcy5cbiAgICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdXBkYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIHVwZGF0ZURlcHRoKys7XG4gICAgICB2YXIgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2hpbGRyZW4obmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgZXJyb3JUaHJvd24gPSBmYWxzZTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHVwZGF0ZURlcHRoLS07XG4gICAgICAgIGlmICghdXBkYXRlRGVwdGgpIHtcbiAgICAgICAgICBpZiAoZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgIGNsZWFyUXVldWUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvY2Vzc1F1ZXVlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEltcHJvdmUgcGVyZm9ybWFuY2UgYnkgaXNvbGF0aW5nIHRoaXMgaG90IGNvZGUgcGF0aCBmcm9tIHRoZSB0cnkvY2F0Y2hcbiAgICAgKiBibG9jayBpbiBgdXBkYXRlQ2hpbGRyZW5gLlxuICAgICAqXG4gICAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cyBOZXN0ZWQgY2hpbGQgZWxlbWVudCBtYXBzLlxuICAgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICAgKiBAZmluYWxcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX3VwZGF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAobmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICB2YXIgcHJldkNoaWxkcmVuID0gdGhpcy5fcmVuZGVyZWRDaGlsZHJlbjtcbiAgICAgIHZhciBuZXh0Q2hpbGRyZW4gPSB0aGlzLl9yZWNvbmNpbGVyVXBkYXRlQ2hpbGRyZW4ocHJldkNoaWxkcmVuLCBuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgdGhpcy5fcmVuZGVyZWRDaGlsZHJlbiA9IG5leHRDaGlsZHJlbjtcbiAgICAgIGlmICghbmV4dENoaWxkcmVuICYmICFwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIG5hbWU7XG4gICAgICAvLyBgbmV4dEluZGV4YCB3aWxsIGluY3JlbWVudCBmb3IgZWFjaCBjaGlsZCBpbiBgbmV4dENoaWxkcmVuYCwgYnV0XG4gICAgICAvLyBgbGFzdEluZGV4YCB3aWxsIGJlIHRoZSBsYXN0IGluZGV4IHZpc2l0ZWQgaW4gYHByZXZDaGlsZHJlbmAuXG4gICAgICB2YXIgbGFzdEluZGV4ID0gMDtcbiAgICAgIHZhciBuZXh0SW5kZXggPSAwO1xuICAgICAgZm9yIChuYW1lIGluIG5leHRDaGlsZHJlbikge1xuICAgICAgICBpZiAoIW5leHRDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcmV2Q2hpbGQgPSBwcmV2Q2hpbGRyZW4gJiYgcHJldkNoaWxkcmVuW25hbWVdO1xuICAgICAgICB2YXIgbmV4dENoaWxkID0gbmV4dENoaWxkcmVuW25hbWVdO1xuICAgICAgICBpZiAocHJldkNoaWxkID09PSBuZXh0Q2hpbGQpIHtcbiAgICAgICAgICB0aGlzLm1vdmVDaGlsZChwcmV2Q2hpbGQsIG5leHRJbmRleCwgbGFzdEluZGV4KTtcbiAgICAgICAgICBsYXN0SW5kZXggPSBNYXRoLm1heChwcmV2Q2hpbGQuX21vdW50SW5kZXgsIGxhc3RJbmRleCk7XG4gICAgICAgICAgcHJldkNoaWxkLl9tb3VudEluZGV4ID0gbmV4dEluZGV4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChwcmV2Q2hpbGQpIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBgbGFzdEluZGV4YCBiZWZvcmUgYF9tb3VudEluZGV4YCBnZXRzIHVuc2V0IGJ5IHVubW91bnRpbmcuXG4gICAgICAgICAgICBsYXN0SW5kZXggPSBNYXRoLm1heChwcmV2Q2hpbGQuX21vdW50SW5kZXgsIGxhc3RJbmRleCk7XG4gICAgICAgICAgICB0aGlzLl91bm1vdW50Q2hpbGQocHJldkNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gVGhlIGNoaWxkIG11c3QgYmUgaW5zdGFudGlhdGVkIGJlZm9yZSBpdCdzIG1vdW50ZWQuXG4gICAgICAgICAgdGhpcy5fbW91bnRDaGlsZEJ5TmFtZUF0SW5kZXgobmV4dENoaWxkLCBuYW1lLCBuZXh0SW5kZXgsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBuZXh0SW5kZXgrKztcbiAgICAgIH1cbiAgICAgIC8vIFJlbW92ZSBjaGlsZHJlbiB0aGF0IGFyZSBubyBsb25nZXIgcHJlc2VudC5cbiAgICAgIGZvciAobmFtZSBpbiBwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKHByZXZDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiAhKG5leHRDaGlsZHJlbiAmJiBuZXh0Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpKSB7XG4gICAgICAgICAgdGhpcy5fdW5tb3VudENoaWxkKHByZXZDaGlsZHJlbltuYW1lXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5tb3VudHMgYWxsIHJlbmRlcmVkIGNoaWxkcmVuLiBUaGlzIHNob3VsZCBiZSB1c2VkIHRvIGNsZWFuIHVwIGNoaWxkcmVuXG4gICAgICogd2hlbiB0aGlzIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB1bm1vdW50Q2hpbGRyZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByZW5kZXJlZENoaWxkcmVuID0gdGhpcy5fcmVuZGVyZWRDaGlsZHJlbjtcbiAgICAgIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVubW91bnRDaGlsZHJlbihyZW5kZXJlZENoaWxkcmVuKTtcbiAgICAgIHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW4gPSBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyBhIGNoaWxkIGNvbXBvbmVudCB0byB0aGUgc3VwcGxpZWQgaW5kZXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDb21wb25lbnQgdG8gbW92ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9JbmRleCBEZXN0aW5hdGlvbiBpbmRleCBvZiB0aGUgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGFzdEluZGV4IExhc3QgaW5kZXggdmlzaXRlZCBvZiB0aGUgc2libGluZ3Mgb2YgYGNoaWxkYC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgbW92ZUNoaWxkOiBmdW5jdGlvbiAoY2hpbGQsIHRvSW5kZXgsIGxhc3RJbmRleCkge1xuICAgICAgLy8gSWYgdGhlIGluZGV4IG9mIGBjaGlsZGAgaXMgbGVzcyB0aGFuIGBsYXN0SW5kZXhgLCB0aGVuIGl0IG5lZWRzIHRvXG4gICAgICAvLyBiZSBtb3ZlZC4gT3RoZXJ3aXNlLCB3ZSBkbyBub3QgbmVlZCB0byBtb3ZlIGl0IGJlY2F1c2UgYSBjaGlsZCB3aWxsIGJlXG4gICAgICAvLyBpbnNlcnRlZCBvciBtb3ZlZCBiZWZvcmUgYGNoaWxkYC5cbiAgICAgIGlmIChjaGlsZC5fbW91bnRJbmRleCA8IGxhc3RJbmRleCkge1xuICAgICAgICBlbnF1ZXVlTW92ZSh0aGlzLl9yb290Tm9kZUlELCBjaGlsZC5fbW91bnRJbmRleCwgdG9JbmRleCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjaGlsZCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDb21wb25lbnQgdG8gY3JlYXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb3VudEltYWdlIE1hcmt1cCB0byBpbnNlcnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGNyZWF0ZUNoaWxkOiBmdW5jdGlvbiAoY2hpbGQsIG1vdW50SW1hZ2UpIHtcbiAgICAgIGVucXVldWVJbnNlcnRNYXJrdXAodGhpcy5fcm9vdE5vZGVJRCwgbW91bnRJbWFnZSwgY2hpbGQuX21vdW50SW5kZXgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgY2hpbGQgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY2hpbGQgQ2hpbGQgdG8gcmVtb3ZlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICByZW1vdmVDaGlsZDogZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICBlbnF1ZXVlUmVtb3ZlKHRoaXMuX3Jvb3ROb2RlSUQsIGNoaWxkLl9tb3VudEluZGV4KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGlzIHRleHQgY29udGVudCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dENvbnRlbnQgVGV4dCBjb250ZW50IHRvIHNldC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgc2V0VGV4dENvbnRlbnQ6IGZ1bmN0aW9uICh0ZXh0Q29udGVudCkge1xuICAgICAgZW5xdWV1ZVRleHRDb250ZW50KHRoaXMuX3Jvb3ROb2RlSUQsIHRleHRDb250ZW50KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGlzIG1hcmt1cCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0byBzZXQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHNldE1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCkge1xuICAgICAgZW5xdWV1ZVNldE1hcmt1cCh0aGlzLl9yb290Tm9kZUlELCBtYXJrdXApO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNb3VudHMgYSBjaGlsZCB3aXRoIHRoZSBzdXBwbGllZCBuYW1lLlxuICAgICAqXG4gICAgICogTk9URTogVGhpcyBpcyBwYXJ0IG9mIGB1cGRhdGVDaGlsZHJlbmAgYW5kIGlzIGhlcmUgZm9yIHJlYWRhYmlsaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY2hpbGQgQ29tcG9uZW50IHRvIG1vdW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIGNoaWxkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCBhdCB3aGljaCB0byBpbnNlcnQgdGhlIGNoaWxkLlxuICAgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9tb3VudENoaWxkQnlOYW1lQXRJbmRleDogZnVuY3Rpb24gKGNoaWxkLCBuYW1lLCBpbmRleCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIC8vIElubGluZWQgZm9yIHBlcmZvcm1hbmNlLCBzZWUgYFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0SURgLlxuICAgICAgdmFyIHJvb3RJRCA9IHRoaXMuX3Jvb3ROb2RlSUQgKyBuYW1lO1xuICAgICAgdmFyIG1vdW50SW1hZ2UgPSBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQoY2hpbGQsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgY2hpbGQuX21vdW50SW5kZXggPSBpbmRleDtcbiAgICAgIHRoaXMuY3JlYXRlQ2hpbGQoY2hpbGQsIG1vdW50SW1hZ2UpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbm1vdW50cyBhIHJlbmRlcmVkIGNoaWxkLlxuICAgICAqXG4gICAgICogTk9URTogVGhpcyBpcyBwYXJ0IG9mIGB1cGRhdGVDaGlsZHJlbmAgYW5kIGlzIGhlcmUgZm9yIHJlYWRhYmlsaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY2hpbGQgQ29tcG9uZW50IHRvIHVubW91bnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfdW5tb3VudENoaWxkOiBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgICAgY2hpbGQuX21vdW50SW5kZXggPSBudWxsO1xuICAgIH1cblxuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RNdWx0aUNoaWxkOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGtleU1pcnJvciA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU1pcnJvcicpO1xuXG4vKipcbiAqIFdoZW4gYSBjb21wb25lbnQncyBjaGlsZHJlbiBhcmUgdXBkYXRlZCwgYSBzZXJpZXMgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb25cbiAqIG9iamVjdHMgYXJlIGNyZWF0ZWQgaW4gb3JkZXIgdG8gYmF0Y2ggYW5kIHNlcmlhbGl6ZSB0aGUgcmVxdWlyZWQgY2hhbmdlcy5cbiAqXG4gKiBFbnVtZXJhdGVzIGFsbCB0aGUgcG9zc2libGUgdHlwZXMgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb25zLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMgPSBrZXlNaXJyb3Ioe1xuICBJTlNFUlRfTUFSS1VQOiBudWxsLFxuICBNT1ZFX0VYSVNUSU5HOiBudWxsLFxuICBSRU1PVkVfTk9ERTogbnVsbCxcbiAgU0VUX01BUktVUDogbnVsbCxcbiAgVEVYVF9DT05URU5UOiBudWxsXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3ROYXRpdmVDb21wb25lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIGF1dG9HZW5lcmF0ZVdyYXBwZXJDbGFzcyA9IG51bGw7XG52YXIgZ2VuZXJpY0NvbXBvbmVudENsYXNzID0gbnVsbDtcbi8vIFRoaXMgcmVnaXN0cnkga2VlcHMgdHJhY2sgb2Ygd3JhcHBlciBjbGFzc2VzIGFyb3VuZCBuYXRpdmUgdGFncy5cbnZhciB0YWdUb0NvbXBvbmVudENsYXNzID0ge307XG52YXIgdGV4dENvbXBvbmVudENsYXNzID0gbnVsbDtcblxudmFyIFJlYWN0TmF0aXZlQ29tcG9uZW50SW5qZWN0aW9uID0ge1xuICAvLyBUaGlzIGFjY2VwdHMgYSBjbGFzcyB0aGF0IHJlY2VpdmVzIHRoZSB0YWcgc3RyaW5nLiBUaGlzIGlzIGEgY2F0Y2ggYWxsXG4gIC8vIHRoYXQgY2FuIHJlbmRlciBhbnkga2luZCBvZiB0YWcuXG4gIGluamVjdEdlbmVyaWNDb21wb25lbnRDbGFzczogZnVuY3Rpb24gKGNvbXBvbmVudENsYXNzKSB7XG4gICAgZ2VuZXJpY0NvbXBvbmVudENsYXNzID0gY29tcG9uZW50Q2xhc3M7XG4gIH0sXG4gIC8vIFRoaXMgYWNjZXB0cyBhIHRleHQgY29tcG9uZW50IGNsYXNzIHRoYXQgdGFrZXMgdGhlIHRleHQgc3RyaW5nIHRvIGJlXG4gIC8vIHJlbmRlcmVkIGFzIHByb3BzLlxuICBpbmplY3RUZXh0Q29tcG9uZW50Q2xhc3M6IGZ1bmN0aW9uIChjb21wb25lbnRDbGFzcykge1xuICAgIHRleHRDb21wb25lbnRDbGFzcyA9IGNvbXBvbmVudENsYXNzO1xuICB9LFxuICAvLyBUaGlzIGFjY2VwdHMgYSBrZXllZCBvYmplY3Qgd2l0aCBjbGFzc2VzIGFzIHZhbHVlcy4gRWFjaCBrZXkgcmVwcmVzZW50cyBhXG4gIC8vIHRhZy4gVGhhdCBwYXJ0aWN1bGFyIHRhZyB3aWxsIHVzZSB0aGlzIGNsYXNzIGluc3RlYWQgb2YgdGhlIGdlbmVyaWMgb25lLlxuICBpbmplY3RDb21wb25lbnRDbGFzc2VzOiBmdW5jdGlvbiAoY29tcG9uZW50Q2xhc3Nlcykge1xuICAgIGFzc2lnbih0YWdUb0NvbXBvbmVudENsYXNzLCBjb21wb25lbnRDbGFzc2VzKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgYSBjb21wb3NpdGUgY29tcG9uZW50IHdyYXBwZXIgY2xhc3MgZm9yIGEgc3BlY2lmaWMgdGFnLlxuICpcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50IFRoZSB0YWcgZm9yIHdoaWNoIHRvIGdldCB0aGUgY2xhc3MuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIFJlYWN0IGNsYXNzIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRDb21wb25lbnRDbGFzc0ZvckVsZW1lbnQoZWxlbWVudCkge1xuICBpZiAodHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbGVtZW50LnR5cGU7XG4gIH1cbiAgdmFyIHRhZyA9IGVsZW1lbnQudHlwZTtcbiAgdmFyIGNvbXBvbmVudENsYXNzID0gdGFnVG9Db21wb25lbnRDbGFzc1t0YWddO1xuICBpZiAoY29tcG9uZW50Q2xhc3MgPT0gbnVsbCkge1xuICAgIHRhZ1RvQ29tcG9uZW50Q2xhc3NbdGFnXSA9IGNvbXBvbmVudENsYXNzID0gYXV0b0dlbmVyYXRlV3JhcHBlckNsYXNzKHRhZyk7XG4gIH1cbiAgcmV0dXJuIGNvbXBvbmVudENsYXNzO1xufVxuXG4vKipcbiAqIEdldCBhIG5hdGl2ZSBpbnRlcm5hbCBjb21wb25lbnQgY2xhc3MgZm9yIGEgc3BlY2lmaWMgdGFnLlxuICpcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGNyZWF0ZS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9ufSBUaGUgaW50ZXJuYWwgY2xhc3MgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUludGVybmFsQ29tcG9uZW50KGVsZW1lbnQpIHtcbiAgIWdlbmVyaWNDb21wb25lbnRDbGFzcyA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUaGVyZSBpcyBubyByZWdpc3RlcmVkIGNvbXBvbmVudCBmb3IgdGhlIHRhZyAlcycsIGVsZW1lbnQudHlwZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICByZXR1cm4gbmV3IGdlbmVyaWNDb21wb25lbnRDbGFzcyhlbGVtZW50LnR5cGUsIGVsZW1lbnQucHJvcHMpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7UmVhY3RUZXh0fSB0ZXh0XG4gKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2VGb3JUZXh0KHRleHQpIHtcbiAgcmV0dXJuIG5ldyB0ZXh0Q29tcG9uZW50Q2xhc3ModGV4dCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc1RleHRDb21wb25lbnQoY29tcG9uZW50KSB7XG4gIHJldHVybiBjb21wb25lbnQgaW5zdGFuY2VvZiB0ZXh0Q29tcG9uZW50Q2xhc3M7XG59XG5cbnZhciBSZWFjdE5hdGl2ZUNvbXBvbmVudCA9IHtcbiAgZ2V0Q29tcG9uZW50Q2xhc3NGb3JFbGVtZW50OiBnZXRDb21wb25lbnRDbGFzc0ZvckVsZW1lbnQsXG4gIGNyZWF0ZUludGVybmFsQ29tcG9uZW50OiBjcmVhdGVJbnRlcm5hbENvbXBvbmVudCxcbiAgY3JlYXRlSW5zdGFuY2VGb3JUZXh0OiBjcmVhdGVJbnN0YW5jZUZvclRleHQsXG4gIGlzVGV4dENvbXBvbmVudDogaXNUZXh0Q29tcG9uZW50LFxuICBpbmplY3Rpb246IFJlYWN0TmF0aXZlQ29tcG9uZW50SW5qZWN0aW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0TmF0aXZlQ29tcG9uZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3ROb29wVXBkYXRlUXVldWVcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCBjYWxsZXJOYW1lKSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICclcyguLi4pOiBDYW4gb25seSB1cGRhdGUgYSBtb3VudGVkIG9yIG1vdW50aW5nIGNvbXBvbmVudC4gJyArICdUaGlzIHVzdWFsbHkgbWVhbnMgeW91IGNhbGxlZCAlcygpIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnQuICcgKyAnVGhpcyBpcyBhIG5vLW9wLiBQbGVhc2UgY2hlY2sgdGhlIGNvZGUgZm9yIHRoZSAlcyBjb21wb25lbnQuJywgY2FsbGVyTmFtZSwgY2FsbGVyTmFtZSwgcHVibGljSW5zdGFuY2UuY29uc3RydWN0b3IgJiYgcHVibGljSW5zdGFuY2UuY29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgJycpIDogdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgYWJzdHJhY3QgQVBJIGZvciBhbiB1cGRhdGUgcXVldWUuXG4gKi9cbnZhciBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IHtcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9zaXRlIGNvbXBvbmVudCBpcyBtb3VudGVkLlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB3ZSB3YW50IHRvIHRlc3QuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbW91bnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEBmaW5hbFxuICAgKi9cbiAgaXNNb3VudGVkOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVucXVldWUgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgYWZ0ZXIgYWxsIHRoZSBwZW5kaW5nIHVwZGF0ZXNcbiAgICogaGF2ZSBwcm9jZXNzZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIHVzZSBhcyBgdGhpc2AgY29udGV4dC5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxlZCBhZnRlciBzdGF0ZSBpcyB1cGRhdGVkLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVDYWxsYmFjazogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBjYWxsYmFjaykge30sXG5cbiAgLyoqXG4gICAqIEZvcmNlcyBhbiB1cGRhdGUuIFRoaXMgc2hvdWxkIG9ubHkgYmUgaW52b2tlZCB3aGVuIGl0IGlzIGtub3duIHdpdGhcbiAgICogY2VydGFpbnR5IHRoYXQgd2UgYXJlICoqbm90KiogaW4gYSBET00gdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIFlvdSBtYXkgd2FudCB0byBjYWxsIHRoaXMgd2hlbiB5b3Uga25vdyB0aGF0IHNvbWUgZGVlcGVyIGFzcGVjdCBvZiB0aGVcbiAgICogY29tcG9uZW50J3Mgc3RhdGUgaGFzIGNoYW5nZWQgYnV0IGBzZXRTdGF0ZWAgd2FzIG5vdCBjYWxsZWQuXG4gICAqXG4gICAqIFRoaXMgd2lsbCBub3QgaW52b2tlIGBzaG91bGRDb21wb25lbnRVcGRhdGVgLCBidXQgaXQgd2lsbCBpbnZva2VcbiAgICogYGNvbXBvbmVudFdpbGxVcGRhdGVgIGFuZCBgY29tcG9uZW50RGlkVXBkYXRlYC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZUZvcmNlVXBkYXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCAnZm9yY2VVcGRhdGUnKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYWxsIG9mIHRoZSBzdGF0ZS4gQWx3YXlzIHVzZSB0aGlzIG9yIGBzZXRTdGF0ZWAgdG8gbXV0YXRlIHN0YXRlLlxuICAgKiBZb3Ugc2hvdWxkIHRyZWF0IGB0aGlzLnN0YXRlYCBhcyBpbW11dGFibGUuXG4gICAqXG4gICAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGB0aGlzLnN0YXRlYCB3aWxsIGJlIGltbWVkaWF0ZWx5IHVwZGF0ZWQsIHNvXG4gICAqIGFjY2Vzc2luZyBgdGhpcy5zdGF0ZWAgYWZ0ZXIgY2FsbGluZyB0aGlzIG1ldGhvZCBtYXkgcmV0dXJuIHRoZSBvbGQgdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29tcGxldGVTdGF0ZSBOZXh0IHN0YXRlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVSZXBsYWNlU3RhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgY29tcGxldGVTdGF0ZSkge1xuICAgIHdhcm5URFoocHVibGljSW5zdGFuY2UsICdyZXBsYWNlU3RhdGUnKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgc3RhdGUuIFRoaXMgb25seSBleGlzdHMgYmVjYXVzZSBfcGVuZGluZ1N0YXRlIGlzXG4gICAqIGludGVybmFsLiBUaGlzIHByb3ZpZGVzIGEgbWVyZ2luZyBzdHJhdGVneSB0aGF0IGlzIG5vdCBhdmFpbGFibGUgdG8gZGVlcFxuICAgKiBwcm9wZXJ0aWVzIHdoaWNoIGlzIGNvbmZ1c2luZy4gVE9ETzogRXhwb3NlIHBlbmRpbmdTdGF0ZSBvciBkb24ndCB1c2UgaXRcbiAgICogZHVyaW5nIHRoZSBtZXJnZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsU3RhdGUgTmV4dCBwYXJ0aWFsIHN0YXRlIHRvIGJlIG1lcmdlZCB3aXRoIHN0YXRlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVTZXRTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwYXJ0aWFsU3RhdGUpIHtcbiAgICB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCAnc2V0U3RhdGUnKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcGFydGlhbFByb3BzIFN1YnNldCBvZiB0aGUgbmV4dCBwcm9wcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlU2V0UHJvcHM6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcGFydGlhbFByb3BzKSB7XG4gICAgd2FyblREWihwdWJsaWNJbnN0YW5jZSwgJ3NldFByb3BzJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIGFsbCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHMgTmV3IHByb3BzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVSZXBsYWNlUHJvcHM6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcHJvcHMpIHtcbiAgICB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCAncmVwbGFjZVByb3BzJyk7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE5vb3BVcGRhdGVRdWV1ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RPd25lclxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIFJlYWN0T3duZXJzIGFyZSBjYXBhYmxlIG9mIHN0b3JpbmcgcmVmZXJlbmNlcyB0byBvd25lZCBjb21wb25lbnRzLlxuICpcbiAqIEFsbCBjb21wb25lbnRzIGFyZSBjYXBhYmxlIG9mIC8vYmVpbmcvLyByZWZlcmVuY2VkIGJ5IG93bmVyIGNvbXBvbmVudHMsIGJ1dFxuICogb25seSBSZWFjdE93bmVyIGNvbXBvbmVudHMgYXJlIGNhcGFibGUgb2YgLy9yZWZlcmVuY2luZy8vIG93bmVkIGNvbXBvbmVudHMuXG4gKiBUaGUgbmFtZWQgcmVmZXJlbmNlIGlzIGtub3duIGFzIGEgXCJyZWZcIi5cbiAqXG4gKiBSZWZzIGFyZSBhdmFpbGFibGUgd2hlbiBtb3VudGVkIGFuZCB1cGRhdGVkIGR1cmluZyByZWNvbmNpbGlhdGlvbi5cbiAqXG4gKiAgIHZhciBNeUNvbXBvbmVudCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAqICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICogICAgICAgcmV0dXJuIChcbiAqICAgICAgICAgPGRpdiBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfT5cbiAqICAgICAgICAgICA8Q3VzdG9tQ29tcG9uZW50IHJlZj1cImN1c3RvbVwiIC8+XG4gKiAgICAgICAgIDwvZGl2PlxuICogICAgICAgKTtcbiAqICAgICB9LFxuICogICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbigpIHtcbiAqICAgICAgIHRoaXMucmVmcy5jdXN0b20uaGFuZGxlQ2xpY2soKTtcbiAqICAgICB9LFxuICogICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAqICAgICAgIHRoaXMucmVmcy5jdXN0b20uaW5pdGlhbGl6ZSgpO1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogUmVmcyBzaG91bGQgcmFyZWx5IGJlIHVzZWQuIFdoZW4gcmVmcyBhcmUgdXNlZCwgdGhleSBzaG91bGQgb25seSBiZSBkb25lIHRvXG4gKiBjb250cm9sIGRhdGEgdGhhdCBpcyBub3QgaGFuZGxlZCBieSBSZWFjdCdzIGRhdGEgZmxvdy5cbiAqXG4gKiBAY2xhc3MgUmVhY3RPd25lclxuICovXG52YXIgUmVhY3RPd25lciA9IHtcblxuICAvKipcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBvYmplY3RcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb2JqZWN0YCBpcyBhIHZhbGlkIG93bmVyLlxuICAgKiBAZmluYWxcbiAgICovXG4gIGlzVmFsaWRPd25lcjogZnVuY3Rpb24gKG9iamVjdCkge1xuICAgIHJldHVybiAhIShvYmplY3QgJiYgdHlwZW9mIG9iamVjdC5hdHRhY2hSZWYgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9iamVjdC5kZXRhY2hSZWYgPT09ICdmdW5jdGlvbicpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGRzIGEgY29tcG9uZW50IGJ5IHJlZiB0byBhbiBvd25lciBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNvbXBvbmVudCBDb21wb25lbnQgdG8gcmVmZXJlbmNlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmIE5hbWUgYnkgd2hpY2ggdG8gcmVmZXIgdG8gdGhlIGNvbXBvbmVudC5cbiAgICogQHBhcmFtIHtSZWFjdE93bmVyfSBvd25lciBDb21wb25lbnQgb24gd2hpY2ggdG8gcmVjb3JkIHRoZSByZWYuXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGFkZENvbXBvbmVudEFzUmVmVG86IGZ1bmN0aW9uIChjb21wb25lbnQsIHJlZiwgb3duZXIpIHtcbiAgICAhUmVhY3RPd25lci5pc1ZhbGlkT3duZXIob3duZXIpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2FkZENvbXBvbmVudEFzUmVmVG8oLi4uKTogT25seSBhIFJlYWN0T3duZXIgY2FuIGhhdmUgcmVmcy4gWW91IG1pZ2h0ICcgKyAnYmUgYWRkaW5nIGEgcmVmIHRvIGEgY29tcG9uZW50IHRoYXQgd2FzIG5vdCBjcmVhdGVkIGluc2lkZSBhIGNvbXBvbmVudFxcJ3MgJyArICdgcmVuZGVyYCBtZXRob2QsIG9yIHlvdSBoYXZlIG11bHRpcGxlIGNvcGllcyBvZiBSZWFjdCBsb2FkZWQgJyArICcoZGV0YWlsczogaHR0cHM6Ly9mYi5tZS9yZWFjdC1yZWZzLW11c3QtaGF2ZS1vd25lcikuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIG93bmVyLmF0dGFjaFJlZihyZWYsIGNvbXBvbmVudCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBjb21wb25lbnQgYnkgcmVmIGZyb20gYW4gb3duZXIgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjb21wb25lbnQgQ29tcG9uZW50IHRvIGRlcmVmZXJlbmNlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmIE5hbWUgb2YgdGhlIHJlZiB0byByZW1vdmUuXG4gICAqIEBwYXJhbSB7UmVhY3RPd25lcn0gb3duZXIgQ29tcG9uZW50IG9uIHdoaWNoIHRoZSByZWYgaXMgcmVjb3JkZWQuXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHJlbW92ZUNvbXBvbmVudEFzUmVmRnJvbTogZnVuY3Rpb24gKGNvbXBvbmVudCwgcmVmLCBvd25lcikge1xuICAgICFSZWFjdE93bmVyLmlzVmFsaWRPd25lcihvd25lcikgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAncmVtb3ZlQ29tcG9uZW50QXNSZWZGcm9tKC4uLik6IE9ubHkgYSBSZWFjdE93bmVyIGNhbiBoYXZlIHJlZnMuIFlvdSBtaWdodCAnICsgJ2JlIHJlbW92aW5nIGEgcmVmIHRvIGEgY29tcG9uZW50IHRoYXQgd2FzIG5vdCBjcmVhdGVkIGluc2lkZSBhIGNvbXBvbmVudFxcJ3MgJyArICdgcmVuZGVyYCBtZXRob2QsIG9yIHlvdSBoYXZlIG11bHRpcGxlIGNvcGllcyBvZiBSZWFjdCBsb2FkZWQgJyArICcoZGV0YWlsczogaHR0cHM6Ly9mYi5tZS9yZWFjdC1yZWZzLW11c3QtaGF2ZS1vd25lcikuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIC8vIENoZWNrIHRoYXQgYGNvbXBvbmVudGAgaXMgc3RpbGwgdGhlIGN1cnJlbnQgcmVmIGJlY2F1c2Ugd2UgZG8gbm90IHdhbnQgdG9cbiAgICAvLyBkZXRhY2ggdGhlIHJlZiBpZiBhbm90aGVyIGNvbXBvbmVudCBzdG9sZSBpdC5cbiAgICBpZiAob3duZXIuZ2V0UHVibGljSW5zdGFuY2UoKS5yZWZzW3JlZl0gPT09IGNvbXBvbmVudC5nZXRQdWJsaWNJbnN0YW5jZSgpKSB7XG4gICAgICBvd25lci5kZXRhY2hSZWYocmVmKTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE93bmVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFBlcmZcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFJlYWN0UGVyZiBpcyBhIGdlbmVyYWwgQU9QIHN5c3RlbSBkZXNpZ25lZCB0byBtZWFzdXJlIHBlcmZvcm1hbmNlLiBUaGlzXG4gKiBtb2R1bGUgb25seSBoYXMgdGhlIGhvb2tzOiBzZWUgUmVhY3REZWZhdWx0UGVyZiBmb3IgdGhlIGFuYWx5c2lzIHRvb2wuXG4gKi9cbnZhciBSZWFjdFBlcmYgPSB7XG4gIC8qKlxuICAgKiBCb29sZWFuIHRvIGVuYWJsZS9kaXNhYmxlIG1lYXN1cmVtZW50LiBTZXQgdG8gZmFsc2UgYnkgZGVmYXVsdCB0byBwcmV2ZW50XG4gICAqIGFjY2lkZW50YWwgbG9nZ2luZyBhbmQgcGVyZiBsb3NzLlxuICAgKi9cbiAgZW5hYmxlTWVhc3VyZTogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEhvbGRzIG9udG8gdGhlIG1lYXN1cmUgZnVuY3Rpb24gaW4gdXNlLiBCeSBkZWZhdWx0LCBkb24ndCBtZWFzdXJlXG4gICAqIGFueXRoaW5nLCBidXQgd2UnbGwgb3ZlcnJpZGUgdGhpcyBpZiB3ZSBpbmplY3QgYSBtZWFzdXJlIGZ1bmN0aW9uLlxuICAgKi9cbiAgc3RvcmVkTWVhc3VyZTogX25vTWVhc3VyZSxcblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gb2JqZWN0TmFtZVxuICAgKiBAcGFyYW0ge29iamVjdDxzdHJpbmc+fSBtZXRob2ROYW1lc1xuICAgKi9cbiAgbWVhc3VyZU1ldGhvZHM6IGZ1bmN0aW9uIChvYmplY3QsIG9iamVjdE5hbWUsIG1ldGhvZE5hbWVzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRob2ROYW1lcykge1xuICAgICAgICBpZiAoIW1ldGhvZE5hbWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBvYmplY3Rba2V5XSA9IFJlYWN0UGVyZi5tZWFzdXJlKG9iamVjdE5hbWUsIG1ldGhvZE5hbWVzW2tleV0sIG9iamVjdFtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVzZSB0aGlzIHRvIHdyYXAgbWV0aG9kcyB5b3Ugd2FudCB0byBtZWFzdXJlLiBaZXJvIG92ZXJoZWFkIGluIHByb2R1Y3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvYmpOYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbk5hbWVcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xuICAgKiBAcmV0dXJuIHtmdW5jdGlvbn1cbiAgICovXG4gIG1lYXN1cmU6IGZ1bmN0aW9uIChvYmpOYW1lLCBmbk5hbWUsIGZ1bmMpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIG1lYXN1cmVkRnVuYyA9IG51bGw7XG4gICAgICB2YXIgd3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFJlYWN0UGVyZi5lbmFibGVNZWFzdXJlKSB7XG4gICAgICAgICAgaWYgKCFtZWFzdXJlZEZ1bmMpIHtcbiAgICAgICAgICAgIG1lYXN1cmVkRnVuYyA9IFJlYWN0UGVyZi5zdG9yZWRNZWFzdXJlKG9iak5hbWUsIGZuTmFtZSwgZnVuYyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBtZWFzdXJlZEZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICAgIHdyYXBwZXIuZGlzcGxheU5hbWUgPSBvYmpOYW1lICsgJ18nICsgZm5OYW1lO1xuICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgfVxuICAgIHJldHVybiBmdW5jO1xuICB9LFxuXG4gIGluamVjdGlvbjoge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG1lYXN1cmVcbiAgICAgKi9cbiAgICBpbmplY3RNZWFzdXJlOiBmdW5jdGlvbiAobWVhc3VyZSkge1xuICAgICAgUmVhY3RQZXJmLnN0b3JlZE1lYXN1cmUgPSBtZWFzdXJlO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBTaW1wbHkgcGFzc2VzIHRocm91Z2ggdGhlIG1lYXN1cmVkIGZ1bmN0aW9uLCB3aXRob3V0IG1lYXN1cmluZyBpdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gb2JqTmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IGZuTmFtZVxuICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xuICogQHJldHVybiB7ZnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIF9ub01lYXN1cmUob2JqTmFtZSwgZm5OYW1lLCBmdW5jKSB7XG4gIHJldHVybiBmdW5jO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UGVyZjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHt9O1xuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHtcbiAgICBwcm9wOiAncHJvcCcsXG4gICAgY29udGV4dDogJ2NvbnRleHQnLFxuICAgIGNoaWxkQ29udGV4dDogJ2NoaWxkIGNvbnRleHQnXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBrZXlNaXJyb3IgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlNaXJyb3InKTtcblxudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSBrZXlNaXJyb3Ioe1xuICBwcm9wOiBudWxsLFxuICBjb250ZXh0OiBudWxsLFxuICBjaGlsZENvbnRleHQ6IG51bGxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbnM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UHJvcFR5cGVzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMnKTtcblxudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgZ2V0SXRlcmF0b3JGbiA9IHJlcXVpcmUoJy4vZ2V0SXRlcmF0b3JGbicpO1xuXG4vKipcbiAqIENvbGxlY3Rpb24gb2YgbWV0aG9kcyB0aGF0IGFsbG93IGRlY2xhcmF0aW9uIGFuZCB2YWxpZGF0aW9uIG9mIHByb3BzIHRoYXQgYXJlXG4gKiBzdXBwbGllZCB0byBSZWFjdCBjb21wb25lbnRzLiBFeGFtcGxlIHVzYWdlOlxuICpcbiAqICAgdmFyIFByb3BzID0gcmVxdWlyZSgnUmVhY3RQcm9wVHlwZXMnKTtcbiAqICAgdmFyIE15QXJ0aWNsZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAqICAgICBwcm9wVHlwZXM6IHtcbiAqICAgICAgIC8vIEFuIG9wdGlvbmFsIHN0cmluZyBwcm9wIG5hbWVkIFwiZGVzY3JpcHRpb25cIi5cbiAqICAgICAgIGRlc2NyaXB0aW9uOiBQcm9wcy5zdHJpbmcsXG4gKlxuICogICAgICAgLy8gQSByZXF1aXJlZCBlbnVtIHByb3AgbmFtZWQgXCJjYXRlZ29yeVwiLlxuICogICAgICAgY2F0ZWdvcnk6IFByb3BzLm9uZU9mKFsnTmV3cycsJ1Bob3RvcyddKS5pc1JlcXVpcmVkLFxuICpcbiAqICAgICAgIC8vIEEgcHJvcCBuYW1lZCBcImRpYWxvZ1wiIHRoYXQgcmVxdWlyZXMgYW4gaW5zdGFuY2Ugb2YgRGlhbG9nLlxuICogICAgICAgZGlhbG9nOiBQcm9wcy5pbnN0YW5jZU9mKERpYWxvZykuaXNSZXF1aXJlZFxuICogICAgIH0sXG4gKiAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHsgLi4uIH1cbiAqICAgfSk7XG4gKlxuICogQSBtb3JlIGZvcm1hbCBzcGVjaWZpY2F0aW9uIG9mIGhvdyB0aGVzZSBtZXRob2RzIGFyZSB1c2VkOlxuICpcbiAqICAgdHlwZSA6PSBhcnJheXxib29sfGZ1bmN8b2JqZWN0fG51bWJlcnxzdHJpbmd8b25lT2YoWy4uLl0pfGluc3RhbmNlT2YoLi4uKVxuICogICBkZWNsIDo9IFJlYWN0UHJvcFR5cGVzLnt0eXBlfSguaXNSZXF1aXJlZCk/XG4gKlxuICogRWFjaCBhbmQgZXZlcnkgZGVjbGFyYXRpb24gcHJvZHVjZXMgYSBmdW5jdGlvbiB3aXRoIHRoZSBzYW1lIHNpZ25hdHVyZS4gVGhpc1xuICogYWxsb3dzIHRoZSBjcmVhdGlvbiBvZiBjdXN0b20gdmFsaWRhdGlvbiBmdW5jdGlvbnMuIEZvciBleGFtcGxlOlxuICpcbiAqICB2YXIgTXlMaW5rID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgcHJvcFR5cGVzOiB7XG4gKiAgICAgIC8vIEFuIG9wdGlvbmFsIHN0cmluZyBvciBVUkkgcHJvcCBuYW1lZCBcImhyZWZcIi5cbiAqICAgICAgaHJlZjogZnVuY3Rpb24ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lKSB7XG4gKiAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAqICAgICAgICBpZiAocHJvcFZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHByb3BWYWx1ZSAhPT0gJ3N0cmluZycgJiZcbiAqICAgICAgICAgICAgIShwcm9wVmFsdWUgaW5zdGFuY2VvZiBVUkkpKSB7XG4gKiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKFxuICogICAgICAgICAgICAnRXhwZWN0ZWQgYSBzdHJpbmcgb3IgYW4gVVJJIGZvciAnICsgcHJvcE5hbWUgKyAnIGluICcgK1xuICogICAgICAgICAgICBjb21wb25lbnROYW1lXG4gKiAgICAgICAgICApO1xuICogICAgICAgIH1cbiAqICAgICAgfVxuICogICAgfSxcbiAqICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7Li4ufVxuICogIH0pO1xuICpcbiAqIEBpbnRlcm5hbFxuICovXG5cbnZhciBBTk9OWU1PVVMgPSAnPDxhbm9ueW1vdXM+Pic7XG5cbnZhciBSZWFjdFByb3BUeXBlcyA9IHtcbiAgYXJyYXk6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdhcnJheScpLFxuICBib29sOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignYm9vbGVhbicpLFxuICBmdW5jOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignZnVuY3Rpb24nKSxcbiAgbnVtYmVyOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignbnVtYmVyJyksXG4gIG9iamVjdDogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ29iamVjdCcpLFxuICBzdHJpbmc6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdzdHJpbmcnKSxcblxuICBhbnk6IGNyZWF0ZUFueVR5cGVDaGVja2VyKCksXG4gIGFycmF5T2Y6IGNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlcixcbiAgZWxlbWVudDogY3JlYXRlRWxlbWVudFR5cGVDaGVja2VyKCksXG4gIGluc3RhbmNlT2Y6IGNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIsXG4gIG5vZGU6IGNyZWF0ZU5vZGVDaGVja2VyKCksXG4gIG9iamVjdE9mOiBjcmVhdGVPYmplY3RPZlR5cGVDaGVja2VyLFxuICBvbmVPZjogY3JlYXRlRW51bVR5cGVDaGVja2VyLFxuICBvbmVPZlR5cGU6IGNyZWF0ZVVuaW9uVHlwZUNoZWNrZXIsXG4gIHNoYXBlOiBjcmVhdGVTaGFwZVR5cGVDaGVja2VyXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSkge1xuICBmdW5jdGlvbiBjaGVja1R5cGUoaXNSZXF1aXJlZCwgcHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudE5hbWUgfHwgQU5PTllNT1VTO1xuICAgIHByb3BGdWxsTmFtZSA9IHByb3BGdWxsTmFtZSB8fCBwcm9wTmFtZTtcbiAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09IG51bGwpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICBpZiAoaXNSZXF1aXJlZCkge1xuICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdSZXF1aXJlZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHdhcyBub3Qgc3BlY2lmaWVkIGluICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLicpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKTtcbiAgICB9XG4gIH1cblxuICB2YXIgY2hhaW5lZENoZWNrVHlwZSA9IGNoZWNrVHlwZS5iaW5kKG51bGwsIGZhbHNlKTtcbiAgY2hhaW5lZENoZWNrVHlwZS5pc1JlcXVpcmVkID0gY2hlY2tUeXBlLmJpbmQobnVsbCwgdHJ1ZSk7XG5cbiAgcmV0dXJuIGNoYWluZWRDaGVja1R5cGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKGV4cGVjdGVkVHlwZSkge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgaWYgKHByb3BUeXBlICE9PSBleHBlY3RlZFR5cGUpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICAvLyBgcHJvcFZhbHVlYCBiZWluZyBpbnN0YW5jZSBvZiwgc2F5LCBkYXRlL3JlZ2V4cCwgcGFzcyB0aGUgJ29iamVjdCdcbiAgICAgIC8vIGNoZWNrLCBidXQgd2UgY2FuIG9mZmVyIGEgbW9yZSBwcmVjaXNlIGVycm9yIG1lc3NhZ2UgaGVyZSByYXRoZXIgdGhhblxuICAgICAgLy8gJ29mIHR5cGUgYG9iamVjdGAnLlxuICAgICAgdmFyIHByZWNpc2VUeXBlID0gZ2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKTtcblxuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcmVjaXNlVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCAnKSArICgnYCcgKyBleHBlY3RlZFR5cGUgKyAnYC4nKSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFueVR5cGVDaGVja2VyKCkge1xuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIoZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJucyhudWxsKSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlcih0eXBlQ2hlY2tlcikge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYW4gYXJyYXkuJykpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGVycm9yID0gdHlwZUNoZWNrZXIocHJvcFZhbHVlLCBpLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJ1snICsgaSArICddJywgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlcigpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgaWYgKCFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQocHJvcHNbcHJvcE5hbWVdKSkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBzdXBwbGllZCB0byAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYSBzaW5nbGUgUmVhY3RFbGVtZW50LicpKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2VUeXBlQ2hlY2tlcihleHBlY3RlZENsYXNzKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIGlmICghKHByb3BzW3Byb3BOYW1lXSBpbnN0YW5jZW9mIGV4cGVjdGVkQ2xhc3MpKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgdmFyIGV4cGVjdGVkQ2xhc3NOYW1lID0gZXhwZWN0ZWRDbGFzcy5uYW1lIHx8IEFOT05ZTU9VUztcbiAgICAgIHZhciBhY3R1YWxDbGFzc05hbWUgPSBnZXRDbGFzc05hbWUocHJvcHNbcHJvcE5hbWVdKTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgYWN0dWFsQ2xhc3NOYW1lICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkICcpICsgKCdpbnN0YW5jZSBvZiBgJyArIGV4cGVjdGVkQ2xhc3NOYW1lICsgJ2AuJykpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVFbnVtVHlwZUNoZWNrZXIoZXhwZWN0ZWRWYWx1ZXMpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGV4cGVjdGVkVmFsdWVzKSkge1xuICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mLCBleHBlY3RlZCBhbiBpbnN0YW5jZSBvZiBhcnJheS4nKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleHBlY3RlZFZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHByb3BWYWx1ZSA9PT0gZXhwZWN0ZWRWYWx1ZXNbaV0pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICB2YXIgdmFsdWVzU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZXhwZWN0ZWRWYWx1ZXMpO1xuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB2YWx1ZSBgJyArIHByb3BWYWx1ZSArICdgICcgKyAoJ3N1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBvbmUgb2YgJyArIHZhbHVlc1N0cmluZyArICcuJykpO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIodHlwZUNoZWNrZXIpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuICAgIGlmIChwcm9wVHlwZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByb3BUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGFuIG9iamVjdC4nKSk7XG4gICAgfVxuICAgIGZvciAodmFyIGtleSBpbiBwcm9wVmFsdWUpIHtcbiAgICAgIGlmIChwcm9wVmFsdWUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICB2YXIgZXJyb3IgPSB0eXBlQ2hlY2tlcihwcm9wVmFsdWUsIGtleSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSArICcuJyArIGtleSwgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVVuaW9uVHlwZUNoZWNrZXIoYXJyYXlPZlR5cGVDaGVja2Vycykge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXlPZlR5cGVDaGVja2VycykpIHtcbiAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudCBzdXBwbGllZCB0byBvbmVPZlR5cGUsIGV4cGVjdGVkIGFuIGluc3RhbmNlIG9mIGFycmF5LicpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheU9mVHlwZUNoZWNrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY2hlY2tlciA9IGFycmF5T2ZUeXBlQ2hlY2tlcnNbaV07XG4gICAgICBpZiAoY2hlY2tlcihwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUsICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCcpID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agc3VwcGxpZWQgdG8gJyArICgnYCcgKyBjb21wb25lbnROYW1lICsgJ2AuJykpO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vZGVDaGVja2VyKCkge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICBpZiAoIWlzTm9kZShwcm9wc1twcm9wTmFtZV0pKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHN1cHBsaWVkIHRvICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhIFJlYWN0Tm9kZS4nKSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNoYXBlVHlwZUNoZWNrZXIoc2hhcGVUeXBlcykge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgaWYgKHByb3BUeXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlIGAnICsgcHJvcFR5cGUgKyAnYCAnICsgKCdzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYG9iamVjdGAuJykpO1xuICAgIH1cbiAgICBmb3IgKHZhciBrZXkgaW4gc2hhcGVUeXBlcykge1xuICAgICAgdmFyIGNoZWNrZXIgPSBzaGFwZVR5cGVzW2tleV07XG4gICAgICBpZiAoIWNoZWNrZXIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgZXJyb3IgPSBjaGVja2VyKHByb3BWYWx1ZSwga2V5LCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJy4nICsga2V5LCAnU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQnKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGlzTm9kZShwcm9wVmFsdWUpIHtcbiAgc3dpdGNoICh0eXBlb2YgcHJvcFZhbHVlKSB7XG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgIGNhc2UgJ3VuZGVmaW5lZCc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIHJldHVybiAhcHJvcFZhbHVlO1xuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBwcm9wVmFsdWUuZXZlcnkoaXNOb2RlKTtcbiAgICAgIH1cbiAgICAgIGlmIChwcm9wVmFsdWUgPT09IG51bGwgfHwgUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KHByb3BWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihwcm9wVmFsdWUpO1xuICAgICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKHByb3BWYWx1ZSk7XG4gICAgICAgIHZhciBzdGVwO1xuICAgICAgICBpZiAoaXRlcmF0b3JGbiAhPT0gcHJvcFZhbHVlLmVudHJpZXMpIHtcbiAgICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICBpZiAoIWlzTm9kZShzdGVwLnZhbHVlKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEl0ZXJhdG9yIHdpbGwgcHJvdmlkZSBlbnRyeSBbayx2XSB0dXBsZXMgcmF0aGVyIHRoYW4gdmFsdWVzLlxuICAgICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHN0ZXAudmFsdWU7XG4gICAgICAgICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgaWYgKCFpc05vZGUoZW50cnlbMV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gRXF1aXZhbGVudCBvZiBgdHlwZW9mYCBidXQgd2l0aCBzcGVjaWFsIGhhbmRsaW5nIGZvciBhcnJheSBhbmQgcmVnZXhwLlxuZnVuY3Rpb24gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKSB7XG4gIHZhciBwcm9wVHlwZSA9IHR5cGVvZiBwcm9wVmFsdWU7XG4gIGlmIChBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHtcbiAgICByZXR1cm4gJ2FycmF5JztcbiAgfVxuICBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgLy8gT2xkIHdlYmtpdHMgKGF0IGxlYXN0IHVudGlsIEFuZHJvaWQgNC4wKSByZXR1cm4gJ2Z1bmN0aW9uJyByYXRoZXIgdGhhblxuICAgIC8vICdvYmplY3QnIGZvciB0eXBlb2YgYSBSZWdFeHAuIFdlJ2xsIG5vcm1hbGl6ZSB0aGlzIGhlcmUgc28gdGhhdCAvYmxhL1xuICAgIC8vIHBhc3NlcyBQcm9wVHlwZXMub2JqZWN0LlxuICAgIHJldHVybiAnb2JqZWN0JztcbiAgfVxuICByZXR1cm4gcHJvcFR5cGU7XG59XG5cbi8vIFRoaXMgaGFuZGxlcyBtb3JlIHR5cGVzIHRoYW4gYGdldFByb3BUeXBlYC4gT25seSB1c2VkIGZvciBlcnJvciBtZXNzYWdlcy5cbi8vIFNlZSBgY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXJgLlxuZnVuY3Rpb24gZ2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKSB7XG4gIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gIGlmIChwcm9wVHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgcmV0dXJuICdkYXRlJztcbiAgICB9IGVsc2UgaWYgKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgcmV0dXJuICdyZWdleHAnO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcHJvcFR5cGU7XG59XG5cbi8vIFJldHVybnMgY2xhc3MgbmFtZSBvZiB0aGUgb2JqZWN0LCBpZiBhbnkuXG5mdW5jdGlvbiBnZXRDbGFzc05hbWUocHJvcFZhbHVlKSB7XG4gIGlmICghcHJvcFZhbHVlLmNvbnN0cnVjdG9yIHx8ICFwcm9wVmFsdWUuY29uc3RydWN0b3IubmFtZSkge1xuICAgIHJldHVybiAnPDxhbm9ueW1vdXM+Pic7XG4gIH1cbiAgcmV0dXJuIHByb3BWYWx1ZS5jb25zdHJ1Y3Rvci5uYW1lO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENhbGxiYWNrUXVldWUgPSByZXF1aXJlKCcuL0NhbGxiYWNrUXVldWUnKTtcbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlcicpO1xudmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0gcmVxdWlyZSgnLi9SZWFjdERPTUZlYXR1cmVGbGFncycpO1xudmFyIFJlYWN0SW5wdXRTZWxlY3Rpb24gPSByZXF1aXJlKCcuL1JlYWN0SW5wdXRTZWxlY3Rpb24nKTtcbnZhciBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vVHJhbnNhY3Rpb24nKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xuXG4vKipcbiAqIEVuc3VyZXMgdGhhdCwgd2hlbiBwb3NzaWJsZSwgdGhlIHNlbGVjdGlvbiByYW5nZSAoY3VycmVudGx5IHNlbGVjdGVkIHRleHRcbiAqIGlucHV0KSBpcyBub3QgZGlzdHVyYmVkIGJ5IHBlcmZvcm1pbmcgdGhlIHRyYW5zYWN0aW9uLlxuICovXG52YXIgU0VMRUNUSU9OX1JFU1RPUkFUSU9OID0ge1xuICAvKipcbiAgICogQHJldHVybiB7U2VsZWN0aW9ufSBTZWxlY3Rpb24gaW5mb3JtYXRpb24uXG4gICAqL1xuICBpbml0aWFsaXplOiBSZWFjdElucHV0U2VsZWN0aW9uLmdldFNlbGVjdGlvbkluZm9ybWF0aW9uLFxuICAvKipcbiAgICogQHBhcmFtIHtTZWxlY3Rpb259IHNlbCBTZWxlY3Rpb24gaW5mb3JtYXRpb24gcmV0dXJuZWQgZnJvbSBgaW5pdGlhbGl6ZWAuXG4gICAqL1xuICBjbG9zZTogUmVhY3RJbnB1dFNlbGVjdGlvbi5yZXN0b3JlU2VsZWN0aW9uXG59O1xuXG4vKipcbiAqIFN1cHByZXNzZXMgZXZlbnRzIChibHVyL2ZvY3VzKSB0aGF0IGNvdWxkIGJlIGluYWR2ZXJ0ZW50bHkgZGlzcGF0Y2hlZCBkdWUgdG9cbiAqIGhpZ2ggbGV2ZWwgRE9NIG1hbmlwdWxhdGlvbnMgKGxpa2UgdGVtcG9yYXJpbHkgcmVtb3ZpbmcgYSB0ZXh0IGlucHV0IGZyb20gdGhlXG4gKiBET00pLlxuICovXG52YXIgRVZFTlRfU1VQUFJFU1NJT04gPSB7XG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZW5hYmxlZCBzdGF0dXMgb2YgYFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcmAgYmVmb3JlXG4gICAqIHRoZSByZWNvbmNpbGlhdGlvbi5cbiAgICovXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY3VycmVudGx5RW5hYmxlZCA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5pc0VuYWJsZWQoKTtcbiAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuc2V0RW5hYmxlZChmYWxzZSk7XG4gICAgcmV0dXJuIGN1cnJlbnRseUVuYWJsZWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJldmlvdXNseUVuYWJsZWQgRW5hYmxlZCBzdGF0dXMgb2ZcbiAgICogICBgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyYCBiZWZvcmUgdGhlIHJlY29uY2lsaWF0aW9uIG9jY3VycmVkLiBgY2xvc2VgXG4gICAqICAgcmVzdG9yZXMgdGhlIHByZXZpb3VzIHZhbHVlLlxuICAgKi9cbiAgY2xvc2U6IGZ1bmN0aW9uIChwcmV2aW91c2x5RW5hYmxlZCkge1xuICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5zZXRFbmFibGVkKHByZXZpb3VzbHlFbmFibGVkKTtcbiAgfVxufTtcblxuLyoqXG4gKiBQcm92aWRlcyBhIHF1ZXVlIGZvciBjb2xsZWN0aW5nIGBjb21wb25lbnREaWRNb3VudGAgYW5kXG4gKiBgY29tcG9uZW50RGlkVXBkYXRlYCBjYWxsYmFja3MgZHVyaW5nIHRoZSB0aGUgdHJhbnNhY3Rpb24uXG4gKi9cbnZhciBPTl9ET01fUkVBRFlfUVVFVUVJTkcgPSB7XG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgaW50ZXJuYWwgYG9uRE9NUmVhZHlgIHF1ZXVlLlxuICAgKi9cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVhY3RNb3VudFJlYWR5LnJlc2V0KCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFmdGVyIERPTSBpcyBmbHVzaGVkLCBpbnZva2UgYWxsIHJlZ2lzdGVyZWQgYG9uRE9NUmVhZHlgIGNhbGxiYWNrcy5cbiAgICovXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkubm90aWZ5QWxsKCk7XG4gIH1cbn07XG5cbi8qKlxuICogRXhlY3V0ZWQgd2l0aGluIHRoZSBzY29wZSBvZiB0aGUgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gQ29uc2lkZXIgdGhlc2UgYXNcbiAqIGJlaW5nIG1lbWJlciBtZXRob2RzLCBidXQgd2l0aCBhbiBpbXBsaWVkIG9yZGVyaW5nIHdoaWxlIGJlaW5nIGlzb2xhdGVkIGZyb21cbiAqIGVhY2ggb3RoZXIuXG4gKi9cbnZhciBUUkFOU0FDVElPTl9XUkFQUEVSUyA9IFtTRUxFQ1RJT05fUkVTVE9SQVRJT04sIEVWRU5UX1NVUFBSRVNTSU9OLCBPTl9ET01fUkVBRFlfUVVFVUVJTkddO1xuXG4vKipcbiAqIEN1cnJlbnRseTpcbiAqIC0gVGhlIG9yZGVyIHRoYXQgdGhlc2UgYXJlIGxpc3RlZCBpbiB0aGUgdHJhbnNhY3Rpb24gaXMgY3JpdGljYWw6XG4gKiAtIFN1cHByZXNzZXMgZXZlbnRzLlxuICogLSBSZXN0b3JlcyBzZWxlY3Rpb24gcmFuZ2UuXG4gKlxuICogRnV0dXJlOlxuICogLSBSZXN0b3JlIGRvY3VtZW50L292ZXJmbG93IHNjcm9sbCBwb3NpdGlvbnMgdGhhdCB3ZXJlIHVuaW50ZW50aW9uYWxseVxuICogICBtb2RpZmllZCB2aWEgRE9NIGluc2VydGlvbnMgYWJvdmUgdGhlIHRvcCB2aWV3cG9ydCBib3VuZGFyeS5cbiAqIC0gSW1wbGVtZW50L2ludGVncmF0ZSB3aXRoIGN1c3RvbWl6ZWQgY29uc3RyYWludCBiYXNlZCBsYXlvdXQgc3lzdGVtIGFuZCBrZWVwXG4gKiAgIHRyYWNrIG9mIHdoaWNoIGRpbWVuc2lvbnMgbXVzdCBiZSByZW1lYXN1cmVkLlxuICpcbiAqIEBjbGFzcyBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uXG4gKi9cbmZ1bmN0aW9uIFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24oZm9yY2VIVE1MKSB7XG4gIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcbiAgLy8gT25seSBzZXJ2ZXItc2lkZSByZW5kZXJpbmcgcmVhbGx5IG5lZWRzIHRoaXMgb3B0aW9uIChzZWVcbiAgLy8gYFJlYWN0U2VydmVyUmVuZGVyaW5nYCksIGJ1dCBzZXJ2ZXItc2lkZSB1c2VzXG4gIC8vIGBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uYCBpbnN0ZWFkLiBUaGlzIG9wdGlvbiBpcyBoZXJlIHNvIHRoYXQgaXQnc1xuICAvLyBhY2Nlc3NpYmxlIGFuZCBkZWZhdWx0cyB0byBmYWxzZSB3aGVuIGBSZWFjdERPTUNvbXBvbmVudGAgYW5kXG4gIC8vIGBSZWFjdFRleHRDb21wb25lbnRgIGNoZWNrcyBpdCBpbiBgbW91bnRDb21wb25lbnRgLmBcbiAgdGhpcy5yZW5kZXJUb1N0YXRpY01hcmt1cCA9IGZhbHNlO1xuICB0aGlzLnJlYWN0TW91bnRSZWFkeSA9IENhbGxiYWNrUXVldWUuZ2V0UG9vbGVkKG51bGwpO1xuICB0aGlzLnVzZUNyZWF0ZUVsZW1lbnQgPSAhZm9yY2VIVE1MICYmIFJlYWN0RE9NRmVhdHVyZUZsYWdzLnVzZUNyZWF0ZUVsZW1lbnQ7XG59XG5cbnZhciBNaXhpbiA9IHtcbiAgLyoqXG4gICAqIEBzZWUgVHJhbnNhY3Rpb25cbiAgICogQGFic3RyYWN0XG4gICAqIEBmaW5hbFxuICAgKiBAcmV0dXJuIHthcnJheTxvYmplY3Q+fSBMaXN0IG9mIG9wZXJhdGlvbiB3cmFwIHByb2NlZHVyZXMuXG4gICAqICAgVE9ETzogY29udmVydCB0byBhcnJheTxUcmFuc2FjdGlvbldyYXBwZXI+XG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFRSQU5TQUNUSU9OX1dSQVBQRVJTO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBxdWV1ZSB0byBjb2xsZWN0IGBvbkRPTVJlYWR5YCBjYWxsYmFja3Mgd2l0aC5cbiAgICovXG4gIGdldFJlYWN0TW91bnRSZWFkeTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWN0TW91bnRSZWFkeTtcbiAgfSxcblxuICAvKipcbiAgICogYFBvb2xlZENsYXNzYCBsb29rcyBmb3IgdGhpcywgYW5kIHdpbGwgaW52b2tlIHRoaXMgYmVmb3JlIGFsbG93aW5nIHRoaXNcbiAgICogaW5zdGFuY2UgdG8gYmUgcmV1c2VkLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIENhbGxiYWNrUXVldWUucmVsZWFzZSh0aGlzLnJlYWN0TW91bnRSZWFkeSk7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkgPSBudWxsO1xuICB9XG59O1xuXG5hc3NpZ24oUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5wcm90b3R5cGUsIFRyYW5zYWN0aW9uLk1peGluLCBNaXhpbik7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFJlY29uY2lsZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFJlZiA9IHJlcXVpcmUoJy4vUmVhY3RSZWYnKTtcblxuLyoqXG4gKiBIZWxwZXIgdG8gY2FsbCBSZWFjdFJlZi5hdHRhY2hSZWZzIHdpdGggdGhpcyBjb21wb3NpdGUgY29tcG9uZW50LCBzcGxpdCBvdXRcbiAqIHRvIGF2b2lkIGFsbG9jYXRpb25zIGluIHRoZSB0cmFuc2FjdGlvbiBtb3VudC1yZWFkeSBxdWV1ZS5cbiAqL1xuZnVuY3Rpb24gYXR0YWNoUmVmcygpIHtcbiAgUmVhY3RSZWYuYXR0YWNoUmVmcyh0aGlzLCB0aGlzLl9jdXJyZW50RWxlbWVudCk7XG59XG5cbnZhciBSZWFjdFJlY29uY2lsZXIgPSB7XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBjb21wb25lbnQsIHJlbmRlcnMgbWFya3VwLCBhbmQgcmVnaXN0ZXJzIGV2ZW50IGxpc3RlbmVycy5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gaW50ZXJuYWxJbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHJldHVybiB7P3N0cmluZ30gUmVuZGVyZWQgbWFya3VwIHRvIGJlIGluc2VydGVkIGludG8gdGhlIERPTS5cbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdmFyIG1hcmt1cCA9IGludGVybmFsSW5zdGFuY2UubW91bnRDb21wb25lbnQocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgaWYgKGludGVybmFsSW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50ICYmIGludGVybmFsSW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50LnJlZiAhPSBudWxsKSB7XG4gICAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKGF0dGFjaFJlZnMsIGludGVybmFsSW5zdGFuY2UpO1xuICAgIH1cbiAgICByZXR1cm4gbWFya3VwO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyBhbnkgcmVzb3VyY2VzIGFsbG9jYXRlZCBieSBgbW91bnRDb21wb25lbnRgLlxuICAgKlxuICAgKiBAZmluYWxcbiAgICogQGludGVybmFsXG4gICAqL1xuICB1bm1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAoaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgIFJlYWN0UmVmLmRldGFjaFJlZnMoaW50ZXJuYWxJbnN0YW5jZSwgaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQpO1xuICAgIGludGVybmFsSW5zdGFuY2UudW5tb3VudENvbXBvbmVudCgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYSBjb21wb25lbnQgdXNpbmcgYSBuZXcgZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gaW50ZXJuYWxJbnN0YW5jZVxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnRcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHJlY2VpdmVDb21wb25lbnQ6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCBuZXh0RWxlbWVudCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB2YXIgcHJldkVsZW1lbnQgPSBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudDtcblxuICAgIGlmIChuZXh0RWxlbWVudCA9PT0gcHJldkVsZW1lbnQgJiYgY29udGV4dCA9PT0gaW50ZXJuYWxJbnN0YW5jZS5fY29udGV4dCkge1xuICAgICAgLy8gU2luY2UgZWxlbWVudHMgYXJlIGltbXV0YWJsZSBhZnRlciB0aGUgb3duZXIgaXMgcmVuZGVyZWQsXG4gICAgICAvLyB3ZSBjYW4gZG8gYSBjaGVhcCBpZGVudGl0eSBjb21wYXJlIGhlcmUgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXMgYVxuICAgICAgLy8gc3VwZXJmbHVvdXMgcmVjb25jaWxlLiBJdCdzIHBvc3NpYmxlIGZvciBzdGF0ZSB0byBiZSBtdXRhYmxlIGJ1dCBzdWNoXG4gICAgICAvLyBjaGFuZ2Ugc2hvdWxkIHRyaWdnZXIgYW4gdXBkYXRlIG9mIHRoZSBvd25lciB3aGljaCB3b3VsZCByZWNyZWF0ZVxuICAgICAgLy8gdGhlIGVsZW1lbnQuIFdlIGV4cGxpY2l0bHkgY2hlY2sgZm9yIHRoZSBleGlzdGVuY2Ugb2YgYW4gb3duZXIgc2luY2VcbiAgICAgIC8vIGl0J3MgcG9zc2libGUgZm9yIGFuIGVsZW1lbnQgY3JlYXRlZCBvdXRzaWRlIGEgY29tcG9zaXRlIHRvIGJlXG4gICAgICAvLyBkZWVwbHkgbXV0YXRlZCBhbmQgcmV1c2VkLlxuXG4gICAgICAvLyBUT0RPOiBCYWlsaW5nIG91dCBlYXJseSBpcyBqdXN0IGEgcGVyZiBvcHRpbWl6YXRpb24gcmlnaHQ/XG4gICAgICAvLyBUT0RPOiBSZW1vdmluZyB0aGUgcmV0dXJuIHN0YXRlbWVudCBzaG91bGQgYWZmZWN0IGNvcnJlY3RuZXNzP1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciByZWZzQ2hhbmdlZCA9IFJlYWN0UmVmLnNob3VsZFVwZGF0ZVJlZnMocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KTtcblxuICAgIGlmIChyZWZzQ2hhbmdlZCkge1xuICAgICAgUmVhY3RSZWYuZGV0YWNoUmVmcyhpbnRlcm5hbEluc3RhbmNlLCBwcmV2RWxlbWVudCk7XG4gICAgfVxuXG4gICAgaW50ZXJuYWxJbnN0YW5jZS5yZWNlaXZlQ29tcG9uZW50KG5leHRFbGVtZW50LCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG5cbiAgICBpZiAocmVmc0NoYW5nZWQgJiYgaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQgJiYgaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQucmVmICE9IG51bGwpIHtcbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoYXR0YWNoUmVmcywgaW50ZXJuYWxJbnN0YW5jZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBGbHVzaCBhbnkgZGlydHkgY2hhbmdlcyBpbiBhIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gaW50ZXJuYWxJbnN0YW5jZVxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5OiBmdW5jdGlvbiAoaW50ZXJuYWxJbnN0YW5jZSwgdHJhbnNhY3Rpb24pIHtcbiAgICBpbnRlcm5hbEluc3RhbmNlLnBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSh0cmFuc2FjdGlvbik7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFJlY29uY2lsZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UmVmXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RPd25lcicpO1xuXG52YXIgUmVhY3RSZWYgPSB7fTtcblxuZnVuY3Rpb24gYXR0YWNoUmVmKHJlZiwgY29tcG9uZW50LCBvd25lcikge1xuICBpZiAodHlwZW9mIHJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJlZihjb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gTGVnYWN5IHJlZlxuICAgIFJlYWN0T3duZXIuYWRkQ29tcG9uZW50QXNSZWZUbyhjb21wb25lbnQsIHJlZiwgb3duZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRldGFjaFJlZihyZWYsIGNvbXBvbmVudCwgb3duZXIpIHtcbiAgaWYgKHR5cGVvZiByZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZWYobnVsbCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gTGVnYWN5IHJlZlxuICAgIFJlYWN0T3duZXIucmVtb3ZlQ29tcG9uZW50QXNSZWZGcm9tKGNvbXBvbmVudCwgcmVmLCBvd25lcik7XG4gIH1cbn1cblxuUmVhY3RSZWYuYXR0YWNoUmVmcyA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgZWxlbWVudCkge1xuICBpZiAoZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgcmVmID0gZWxlbWVudC5yZWY7XG4gIGlmIChyZWYgIT0gbnVsbCkge1xuICAgIGF0dGFjaFJlZihyZWYsIGluc3RhbmNlLCBlbGVtZW50Ll9vd25lcik7XG4gIH1cbn07XG5cblJlYWN0UmVmLnNob3VsZFVwZGF0ZVJlZnMgPSBmdW5jdGlvbiAocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KSB7XG4gIC8vIElmIGVpdGhlciB0aGUgb3duZXIgb3IgYSBgcmVmYCBoYXMgY2hhbmdlZCwgbWFrZSBzdXJlIHRoZSBuZXdlc3Qgb3duZXJcbiAgLy8gaGFzIHN0b3JlZCBhIHJlZmVyZW5jZSB0byBgdGhpc2AsIGFuZCB0aGUgcHJldmlvdXMgb3duZXIgKGlmIGRpZmZlcmVudClcbiAgLy8gaGFzIGZvcmdvdHRlbiB0aGUgcmVmZXJlbmNlIHRvIGB0aGlzYC4gV2UgdXNlIHRoZSBlbGVtZW50IGluc3RlYWRcbiAgLy8gb2YgdGhlIHB1YmxpYyB0aGlzLnByb3BzIGJlY2F1c2UgdGhlIHBvc3QgcHJvY2Vzc2luZyBjYW5ub3QgZGV0ZXJtaW5lXG4gIC8vIGEgcmVmLiBUaGUgcmVmIGNvbmNlcHR1YWxseSBsaXZlcyBvbiB0aGUgZWxlbWVudC5cblxuICAvLyBUT0RPOiBTaG91bGQgdGhpcyBldmVuIGJlIHBvc3NpYmxlPyBUaGUgb3duZXIgY2Fubm90IGNoYW5nZSBiZWNhdXNlXG4gIC8vIGl0J3MgZm9yYmlkZGVuIGJ5IHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50LiBUaGUgcmVmIGNhbiBjaGFuZ2VcbiAgLy8gaWYgeW91IHN3YXAgdGhlIGtleXMgb2YgYnV0IG5vdCB0aGUgcmVmcy4gUmVjb25zaWRlciB3aGVyZSB0aGlzIGNoZWNrXG4gIC8vIGlzIG1hZGUuIEl0IHByb2JhYmx5IGJlbG9uZ3Mgd2hlcmUgdGhlIGtleSBjaGVja2luZyBhbmRcbiAgLy8gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCBpcyBkb25lLlxuXG4gIHZhciBwcmV2RW1wdHkgPSBwcmV2RWxlbWVudCA9PT0gbnVsbCB8fCBwcmV2RWxlbWVudCA9PT0gZmFsc2U7XG4gIHZhciBuZXh0RW1wdHkgPSBuZXh0RWxlbWVudCA9PT0gbnVsbCB8fCBuZXh0RWxlbWVudCA9PT0gZmFsc2U7XG5cbiAgcmV0dXJuKFxuICAgIC8vIFRoaXMgaGFzIGEgZmV3IGZhbHNlIHBvc2l0aXZlcyB3L3IvdCBlbXB0eSBjb21wb25lbnRzLlxuICAgIHByZXZFbXB0eSB8fCBuZXh0RW1wdHkgfHwgbmV4dEVsZW1lbnQuX293bmVyICE9PSBwcmV2RWxlbWVudC5fb3duZXIgfHwgbmV4dEVsZW1lbnQucmVmICE9PSBwcmV2RWxlbWVudC5yZWZcbiAgKTtcbn07XG5cblJlYWN0UmVmLmRldGFjaFJlZnMgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnQgPT09IG51bGwgfHwgZWxlbWVudCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHJlZiA9IGVsZW1lbnQucmVmO1xuICBpZiAocmVmICE9IG51bGwpIHtcbiAgICBkZXRhY2hSZWYocmVmLCBpbnN0YW5jZSwgZWxlbWVudC5fb3duZXIpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UmVmOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFJvb3RJbmRleFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFJvb3RJbmRleEluamVjdGlvbiA9IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9jcmVhdGVSZWFjdFJvb3RJbmRleFxuICAgKi9cbiAgaW5qZWN0Q3JlYXRlUmVhY3RSb290SW5kZXg6IGZ1bmN0aW9uIChfY3JlYXRlUmVhY3RSb290SW5kZXgpIHtcbiAgICBSZWFjdFJvb3RJbmRleC5jcmVhdGVSZWFjdFJvb3RJbmRleCA9IF9jcmVhdGVSZWFjdFJvb3RJbmRleDtcbiAgfVxufTtcblxudmFyIFJlYWN0Um9vdEluZGV4ID0ge1xuICBjcmVhdGVSZWFjdFJvb3RJbmRleDogbnVsbCxcbiAgaW5qZWN0aW9uOiBSZWFjdFJvb3RJbmRleEluamVjdGlvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFJvb3RJbmRleDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5XG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneSA9IHtcbiAgaXNCYXRjaGluZ1VwZGF0ZXM6IGZhbHNlLFxuICBiYXRjaGVkVXBkYXRlczogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaGVyZS4gRHVyaW5nIHRoZSBzZXJ2ZXIgcmVuZGVyaW5nIHdlIGRvbid0IHdhbnQgdG9cbiAgICAvLyBzY2hlZHVsZSBhbnkgdXBkYXRlcy4gV2Ugd2lsbCBzaW1wbHkgaWdub3JlIHRoZW0uXG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSA9IHJlcXVpcmUoJy4vUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneScpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VIYW5kbGVzJyk7XG52YXIgUmVhY3RNYXJrdXBDaGVja3N1bSA9IHJlcXVpcmUoJy4vUmVhY3RNYXJrdXBDaGVja3N1bScpO1xudmFyIFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneSA9IHJlcXVpcmUoJy4vUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5Jyk7XG52YXIgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbicpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBlbXB0eU9iamVjdCA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5T2JqZWN0Jyk7XG52YXIgaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBIVE1MIG1hcmt1cFxuICovXG5mdW5jdGlvbiByZW5kZXJUb1N0cmluZyhlbGVtZW50KSB7XG4gICFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoZWxlbWVudCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAncmVuZGVyVG9TdHJpbmcoKTogWW91IG11c3QgcGFzcyBhIHZhbGlkIFJlYWN0RWxlbWVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgdmFyIHRyYW5zYWN0aW9uO1xuICB0cnkge1xuICAgIFJlYWN0VXBkYXRlcy5pbmplY3Rpb24uaW5qZWN0QmF0Y2hpbmdTdHJhdGVneShSZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3kpO1xuXG4gICAgdmFyIGlkID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuY3JlYXRlUmVhY3RSb290SUQoKTtcbiAgICB0cmFuc2FjdGlvbiA9IFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKGZhbHNlKTtcblxuICAgIHJldHVybiB0cmFuc2FjdGlvbi5wZXJmb3JtKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQoZWxlbWVudCwgbnVsbCk7XG4gICAgICB2YXIgbWFya3VwID0gY29tcG9uZW50SW5zdGFuY2UubW91bnRDb21wb25lbnQoaWQsIHRyYW5zYWN0aW9uLCBlbXB0eU9iamVjdCk7XG4gICAgICByZXR1cm4gUmVhY3RNYXJrdXBDaGVja3N1bS5hZGRDaGVja3N1bVRvTWFya3VwKG1hcmt1cCk7XG4gICAgfSwgbnVsbCk7XG4gIH0gZmluYWxseSB7XG4gICAgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5yZWxlYXNlKHRyYW5zYWN0aW9uKTtcbiAgICAvLyBSZXZlcnQgdG8gdGhlIERPTSBiYXRjaGluZyBzdHJhdGVneSBzaW5jZSB0aGVzZSB0d28gcmVuZGVyZXJzXG4gICAgLy8gY3VycmVudGx5IHNoYXJlIHRoZXNlIHN0YXRlZnVsIG1vZHVsZXMuXG4gICAgUmVhY3RVcGRhdGVzLmluamVjdGlvbi5pbmplY3RCYXRjaGluZ1N0cmF0ZWd5KFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kpO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge3N0cmluZ30gdGhlIEhUTUwgbWFya3VwLCB3aXRob3V0IHRoZSBleHRyYSBSZWFjdCBJRCBhbmQgY2hlY2tzdW1cbiAqIChmb3IgZ2VuZXJhdGluZyBzdGF0aWMgcGFnZXMpXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclRvU3RhdGljTWFya3VwKGVsZW1lbnQpIHtcbiAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChlbGVtZW50KSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdyZW5kZXJUb1N0YXRpY01hcmt1cCgpOiBZb3UgbXVzdCBwYXNzIGEgdmFsaWQgUmVhY3RFbGVtZW50LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICB2YXIgdHJhbnNhY3Rpb247XG4gIHRyeSB7XG4gICAgUmVhY3RVcGRhdGVzLmluamVjdGlvbi5pbmplY3RCYXRjaGluZ1N0cmF0ZWd5KFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneSk7XG5cbiAgICB2YXIgaWQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5jcmVhdGVSZWFjdFJvb3RJRCgpO1xuICAgIHRyYW5zYWN0aW9uID0gUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5nZXRQb29sZWQodHJ1ZSk7XG5cbiAgICByZXR1cm4gdHJhbnNhY3Rpb24ucGVyZm9ybShmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY29tcG9uZW50SW5zdGFuY2UgPSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KGVsZW1lbnQsIG51bGwpO1xuICAgICAgcmV0dXJuIGNvbXBvbmVudEluc3RhbmNlLm1vdW50Q29tcG9uZW50KGlkLCB0cmFuc2FjdGlvbiwgZW1wdHlPYmplY3QpO1xuICAgIH0sIG51bGwpO1xuICB9IGZpbmFsbHkge1xuICAgIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24ucmVsZWFzZSh0cmFuc2FjdGlvbik7XG4gICAgLy8gUmV2ZXJ0IHRvIHRoZSBET00gYmF0Y2hpbmcgc3RyYXRlZ3kgc2luY2UgdGhlc2UgdHdvIHJlbmRlcmVyc1xuICAgIC8vIGN1cnJlbnRseSBzaGFyZSB0aGVzZSBzdGF0ZWZ1bCBtb2R1bGVzLlxuICAgIFJlYWN0VXBkYXRlcy5pbmplY3Rpb24uaW5qZWN0QmF0Y2hpbmdTdHJhdGVneShSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmVuZGVyVG9TdHJpbmc6IHJlbmRlclRvU3RyaW5nLFxuICByZW5kZXJUb1N0YXRpY01hcmt1cDogcmVuZGVyVG9TdGF0aWNNYXJrdXBcbn07IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb25cbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG52YXIgQ2FsbGJhY2tRdWV1ZSA9IHJlcXVpcmUoJy4vQ2FsbGJhY2tRdWV1ZScpO1xudmFyIFRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9UcmFuc2FjdGlvbicpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcblxuLyoqXG4gKiBQcm92aWRlcyBhIGBDYWxsYmFja1F1ZXVlYCBxdWV1ZSBmb3IgY29sbGVjdGluZyBgb25ET01SZWFkeWAgY2FsbGJhY2tzXG4gKiBkdXJpbmcgdGhlIHBlcmZvcm1pbmcgb2YgdGhlIHRyYW5zYWN0aW9uLlxuICovXG52YXIgT05fRE9NX1JFQURZX1FVRVVFSU5HID0ge1xuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGludGVybmFsIGBvbkRPTVJlYWR5YCBxdWV1ZS5cbiAgICovXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlYWN0TW91bnRSZWFkeS5yZXNldCgpO1xuICB9LFxuXG4gIGNsb3NlOiBlbXB0eUZ1bmN0aW9uXG59O1xuXG4vKipcbiAqIEV4ZWN1dGVkIHdpdGhpbiB0aGUgc2NvcGUgb2YgdGhlIGBUcmFuc2FjdGlvbmAgaW5zdGFuY2UuIENvbnNpZGVyIHRoZXNlIGFzXG4gKiBiZWluZyBtZW1iZXIgbWV0aG9kcywgYnV0IHdpdGggYW4gaW1wbGllZCBvcmRlcmluZyB3aGlsZSBiZWluZyBpc29sYXRlZCBmcm9tXG4gKiBlYWNoIG90aGVyLlxuICovXG52YXIgVFJBTlNBQ1RJT05fV1JBUFBFUlMgPSBbT05fRE9NX1JFQURZX1FVRVVFSU5HXTtcblxuLyoqXG4gKiBAY2xhc3MgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvblxuICogQHBhcmFtIHtib29sZWFufSByZW5kZXJUb1N0YXRpY01hcmt1cFxuICovXG5mdW5jdGlvbiBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uKHJlbmRlclRvU3RhdGljTWFya3VwKSB7XG4gIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcbiAgdGhpcy5yZW5kZXJUb1N0YXRpY01hcmt1cCA9IHJlbmRlclRvU3RhdGljTWFya3VwO1xuICB0aGlzLnJlYWN0TW91bnRSZWFkeSA9IENhbGxiYWNrUXVldWUuZ2V0UG9vbGVkKG51bGwpO1xuICB0aGlzLnVzZUNyZWF0ZUVsZW1lbnQgPSBmYWxzZTtcbn1cblxudmFyIE1peGluID0ge1xuICAvKipcbiAgICogQHNlZSBUcmFuc2FjdGlvblxuICAgKiBAYWJzdHJhY3RcbiAgICogQGZpbmFsXG4gICAqIEByZXR1cm4ge2FycmF5fSBFbXB0eSBsaXN0IG9mIG9wZXJhdGlvbiB3cmFwIHByb2NlZHVyZXMuXG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFRSQU5TQUNUSU9OX1dSQVBQRVJTO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBxdWV1ZSB0byBjb2xsZWN0IGBvbkRPTVJlYWR5YCBjYWxsYmFja3Mgd2l0aC5cbiAgICovXG4gIGdldFJlYWN0TW91bnRSZWFkeTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWN0TW91bnRSZWFkeTtcbiAgfSxcblxuICAvKipcbiAgICogYFBvb2xlZENsYXNzYCBsb29rcyBmb3IgdGhpcywgYW5kIHdpbGwgaW52b2tlIHRoaXMgYmVmb3JlIGFsbG93aW5nIHRoaXNcbiAgICogaW5zdGFuY2UgdG8gYmUgcmV1c2VkLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIENhbGxiYWNrUXVldWUucmVsZWFzZSh0aGlzLnJlYWN0TW91bnRSZWFkeSk7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkgPSBudWxsO1xuICB9XG59O1xuXG5hc3NpZ24oUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5wcm90b3R5cGUsIFRyYW5zYWN0aW9uLk1peGluLCBNaXhpbik7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RVcGRhdGVRdWV1ZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZU1hcCcpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpIHtcbiAgUmVhY3RVcGRhdGVzLmVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG59XG5cbmZ1bmN0aW9uIGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgY2FsbGVyTmFtZSkge1xuICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KHB1YmxpY0luc3RhbmNlKTtcbiAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIE9ubHkgd2FybiB3aGVuIHdlIGhhdmUgYSBjYWxsZXJOYW1lLiBPdGhlcndpc2Ugd2Ugc2hvdWxkIGJlIHNpbGVudC5cbiAgICAgIC8vIFdlJ3JlIHByb2JhYmx5IGNhbGxpbmcgZnJvbSBlbnF1ZXVlQ2FsbGJhY2suIFdlIGRvbid0IHdhbnQgdG8gd2FyblxuICAgICAgLy8gdGhlcmUgYmVjYXVzZSB3ZSBhbHJlYWR5IHdhcm5lZCBmb3IgdGhlIGNvcnJlc3BvbmRpbmcgbGlmZWN5Y2xlIG1ldGhvZC5cbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFjYWxsZXJOYW1lLCAnJXMoLi4uKTogQ2FuIG9ubHkgdXBkYXRlIGEgbW91bnRlZCBvciBtb3VudGluZyBjb21wb25lbnQuICcgKyAnVGhpcyB1c3VhbGx5IG1lYW5zIHlvdSBjYWxsZWQgJXMoKSBvbiBhbiB1bm1vdW50ZWQgY29tcG9uZW50LiAnICsgJ1RoaXMgaXMgYSBuby1vcC4gUGxlYXNlIGNoZWNrIHRoZSBjb2RlIGZvciB0aGUgJXMgY29tcG9uZW50LicsIGNhbGxlck5hbWUsIGNhbGxlck5hbWUsIHB1YmxpY0luc3RhbmNlLmNvbnN0cnVjdG9yLmRpc3BsYXlOYW1lKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPT0gbnVsbCwgJyVzKC4uLik6IENhbm5vdCB1cGRhdGUgZHVyaW5nIGFuIGV4aXN0aW5nIHN0YXRlIHRyYW5zaXRpb24gJyArICcoc3VjaCBhcyB3aXRoaW4gYHJlbmRlcmApLiBSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uICcgKyAnb2YgcHJvcHMgYW5kIHN0YXRlLicsIGNhbGxlck5hbWUpIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgcmV0dXJuIGludGVybmFsSW5zdGFuY2U7XG59XG5cbi8qKlxuICogUmVhY3RVcGRhdGVRdWV1ZSBhbGxvd3MgZm9yIHN0YXRlIHVwZGF0ZXMgdG8gYmUgc2NoZWR1bGVkIGludG8gYSBsYXRlclxuICogcmVjb25jaWxpYXRpb24gc3RlcC5cbiAqL1xudmFyIFJlYWN0VXBkYXRlUXVldWUgPSB7XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGNvbXBvc2l0ZSBjb21wb25lbnQgaXMgbW91bnRlZC5cbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2Ugd2Ugd2FudCB0byB0ZXN0LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG1vdW50ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAZmluYWxcbiAgICovXG4gIGlzTW91bnRlZDogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBvd25lciA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQ7XG4gICAgICBpZiAob3duZXIgIT09IG51bGwpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcob3duZXIuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyLCAnJXMgaXMgYWNjZXNzaW5nIGlzTW91bnRlZCBpbnNpZGUgaXRzIHJlbmRlcigpIGZ1bmN0aW9uLiAnICsgJ3JlbmRlcigpIHNob3VsZCBiZSBhIHB1cmUgZnVuY3Rpb24gb2YgcHJvcHMgYW5kIHN0YXRlLiBJdCBzaG91bGQgJyArICduZXZlciBhY2Nlc3Mgc29tZXRoaW5nIHRoYXQgcmVxdWlyZXMgc3RhbGUgZGF0YSBmcm9tIHRoZSBwcmV2aW91cyAnICsgJ3JlbmRlciwgc3VjaCBhcyByZWZzLiBNb3ZlIHRoaXMgbG9naWMgdG8gY29tcG9uZW50RGlkTW91bnQgYW5kICcgKyAnY29tcG9uZW50RGlkVXBkYXRlIGluc3RlYWQuJywgb3duZXIuZ2V0TmFtZSgpIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgICBvd25lci5fd2FybmVkQWJvdXRSZWZzSW5SZW5kZXIgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KHB1YmxpY0luc3RhbmNlKTtcbiAgICBpZiAoaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgLy8gRHVyaW5nIGNvbXBvbmVudFdpbGxNb3VudCBhbmQgcmVuZGVyIHRoaXMgd2lsbCBzdGlsbCBiZSBudWxsIGJ1dCBhZnRlclxuICAgICAgLy8gdGhhdCB3aWxsIGFsd2F5cyByZW5kZXIgdG8gc29tZXRoaW5nLiBBdCBsZWFzdCBmb3Igbm93LiBTbyB3ZSBjYW4gdXNlXG4gICAgICAvLyB0aGlzIGhhY2suXG4gICAgICByZXR1cm4gISFpbnRlcm5hbEluc3RhbmNlLl9yZW5kZXJlZENvbXBvbmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRW5xdWV1ZSBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhZnRlciBhbGwgdGhlIHBlbmRpbmcgdXBkYXRlc1xuICAgKiBoYXZlIHByb2Nlc3NlZC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gdXNlIGFzIGB0aGlzYCBjb250ZXh0LlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHN0YXRlIGlzIHVwZGF0ZWQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZUNhbGxiYWNrOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIGNhbGxiYWNrKSB7XG4gICAgISh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2VucXVldWVDYWxsYmFjayguLi4pOiBZb3UgY2FsbGVkIGBzZXRQcm9wc2AsIGByZXBsYWNlUHJvcHNgLCAnICsgJ2BzZXRTdGF0ZWAsIGByZXBsYWNlU3RhdGVgLCBvciBgZm9yY2VVcGRhdGVgIHdpdGggYSBjYWxsYmFjayB0aGF0ICcgKyAnaXNuXFwndCBjYWxsYWJsZS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UpO1xuXG4gICAgLy8gUHJldmlvdXNseSB3ZSB3b3VsZCB0aHJvdyBhbiBlcnJvciBpZiB3ZSBkaWRuJ3QgaGF2ZSBhbiBpbnRlcm5hbFxuICAgIC8vIGluc3RhbmNlLiBTaW5jZSB3ZSB3YW50IHRvIG1ha2UgaXQgYSBuby1vcCBpbnN0ZWFkLCB3ZSBtaXJyb3IgdGhlIHNhbWVcbiAgICAvLyBiZWhhdmlvciB3ZSBoYXZlIGluIG90aGVyIGVucXVldWUqIG1ldGhvZHMuXG4gICAgLy8gV2UgYWxzbyBuZWVkIHRvIGlnbm9yZSBjYWxsYmFja3MgaW4gY29tcG9uZW50V2lsbE1vdW50LiBTZWVcbiAgICAvLyBlbnF1ZXVlVXBkYXRlcy5cbiAgICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzKSB7XG4gICAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzID0gW2NhbGxiYWNrXTtcbiAgICB9XG4gICAgLy8gVE9ETzogVGhlIGNhbGxiYWNrIGhlcmUgaXMgaWdub3JlZCB3aGVuIHNldFN0YXRlIGlzIGNhbGxlZCBmcm9tXG4gICAgLy8gY29tcG9uZW50V2lsbE1vdW50LiBFaXRoZXIgZml4IGl0IG9yIGRpc2FsbG93IGRvaW5nIHNvIGNvbXBsZXRlbHkgaW5cbiAgICAvLyBmYXZvciBvZiBnZXRJbml0aWFsU3RhdGUuIEFsdGVybmF0aXZlbHksIHdlIGNhbiBkaXNhbGxvd1xuICAgIC8vIGNvbXBvbmVudFdpbGxNb3VudCBkdXJpbmcgc2VydmVyLXNpZGUgcmVuZGVyaW5nLlxuICAgIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG4gIH0sXG5cbiAgZW5xdWV1ZUNhbGxiYWNrSW50ZXJuYWw6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCBjYWxsYmFjaykge1xuICAgICEodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdlbnF1ZXVlQ2FsbGJhY2soLi4uKTogWW91IGNhbGxlZCBgc2V0UHJvcHNgLCBgcmVwbGFjZVByb3BzYCwgJyArICdgc2V0U3RhdGVgLCBgcmVwbGFjZVN0YXRlYCwgb3IgYGZvcmNlVXBkYXRlYCB3aXRoIGEgY2FsbGJhY2sgdGhhdCAnICsgJ2lzblxcJ3QgY2FsbGFibGUuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIGlmIChpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzKSB7XG4gICAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzID0gW2NhbGxiYWNrXTtcbiAgICB9XG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfSxcblxuICAvKipcbiAgICogRm9yY2VzIGFuIHVwZGF0ZS4gVGhpcyBzaG91bGQgb25seSBiZSBpbnZva2VkIHdoZW4gaXQgaXMga25vd24gd2l0aFxuICAgKiBjZXJ0YWludHkgdGhhdCB3ZSBhcmUgKipub3QqKiBpbiBhIERPTSB0cmFuc2FjdGlvbi5cbiAgICpcbiAgICogWW91IG1heSB3YW50IHRvIGNhbGwgdGhpcyB3aGVuIHlvdSBrbm93IHRoYXQgc29tZSBkZWVwZXIgYXNwZWN0IG9mIHRoZVxuICAgKiBjb21wb25lbnQncyBzdGF0ZSBoYXMgY2hhbmdlZCBidXQgYHNldFN0YXRlYCB3YXMgbm90IGNhbGxlZC5cbiAgICpcbiAgICogVGhpcyB3aWxsIG5vdCBpbnZva2UgYHNob3VsZENvbXBvbmVudFVwZGF0ZWAsIGJ1dCBpdCB3aWxsIGludm9rZVxuICAgKiBgY29tcG9uZW50V2lsbFVwZGF0ZWAgYW5kIGBjb21wb25lbnREaWRVcGRhdGVgLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlRm9yY2VVcGRhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuICAgIHZhciBpbnRlcm5hbEluc3RhbmNlID0gZ2V0SW50ZXJuYWxJbnN0YW5jZVJlYWR5Rm9yVXBkYXRlKHB1YmxpY0luc3RhbmNlLCAnZm9yY2VVcGRhdGUnKTtcblxuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdGb3JjZVVwZGF0ZSA9IHRydWU7XG5cbiAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhbGwgb2YgdGhlIHN0YXRlLiBBbHdheXMgdXNlIHRoaXMgb3IgYHNldFN0YXRlYCB0byBtdXRhdGUgc3RhdGUuXG4gICAqIFlvdSBzaG91bGQgdHJlYXQgYHRoaXMuc3RhdGVgIGFzIGltbXV0YWJsZS5cbiAgICpcbiAgICogVGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgYHRoaXMuc3RhdGVgIHdpbGwgYmUgaW1tZWRpYXRlbHkgdXBkYXRlZCwgc29cbiAgICogYWNjZXNzaW5nIGB0aGlzLnN0YXRlYCBhZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kIG1heSByZXR1cm4gdGhlIG9sZCB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wbGV0ZVN0YXRlIE5leHQgc3RhdGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBjb21wbGV0ZVN0YXRlKSB7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsICdyZXBsYWNlU3RhdGUnKTtcblxuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdTdGF0ZVF1ZXVlID0gW2NvbXBsZXRlU3RhdGVdO1xuICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdSZXBsYWNlU3RhdGUgPSB0cnVlO1xuXG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgc3RhdGUuIFRoaXMgb25seSBleGlzdHMgYmVjYXVzZSBfcGVuZGluZ1N0YXRlIGlzXG4gICAqIGludGVybmFsLiBUaGlzIHByb3ZpZGVzIGEgbWVyZ2luZyBzdHJhdGVneSB0aGF0IGlzIG5vdCBhdmFpbGFibGUgdG8gZGVlcFxuICAgKiBwcm9wZXJ0aWVzIHdoaWNoIGlzIGNvbmZ1c2luZy4gVE9ETzogRXhwb3NlIHBlbmRpbmdTdGF0ZSBvciBkb24ndCB1c2UgaXRcbiAgICogZHVyaW5nIHRoZSBtZXJnZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsU3RhdGUgTmV4dCBwYXJ0aWFsIHN0YXRlIHRvIGJlIG1lcmdlZCB3aXRoIHN0YXRlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVTZXRTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwYXJ0aWFsU3RhdGUpIHtcbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ3NldFN0YXRlJyk7XG5cbiAgICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcXVldWUgPSBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nU3RhdGVRdWV1ZSB8fCAoaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ1N0YXRlUXVldWUgPSBbXSk7XG4gICAgcXVldWUucHVzaChwYXJ0aWFsU3RhdGUpO1xuXG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcGFydGlhbFByb3BzIFN1YnNldCBvZiB0aGUgbmV4dCBwcm9wcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlU2V0UHJvcHM6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcGFydGlhbFByb3BzKSB7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsICdzZXRQcm9wcycpO1xuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVTZXRQcm9wc0ludGVybmFsKGludGVybmFsSW5zdGFuY2UsIHBhcnRpYWxQcm9wcyk7XG4gIH0sXG5cbiAgZW5xdWV1ZVNldFByb3BzSW50ZXJuYWw6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCBwYXJ0aWFsUHJvcHMpIHtcbiAgICB2YXIgdG9wTGV2ZWxXcmFwcGVyID0gaW50ZXJuYWxJbnN0YW5jZS5fdG9wTGV2ZWxXcmFwcGVyO1xuICAgICF0b3BMZXZlbFdyYXBwZXIgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnc2V0UHJvcHMoLi4uKTogWW91IGNhbGxlZCBgc2V0UHJvcHNgIG9uIGEgJyArICdjb21wb25lbnQgd2l0aCBhIHBhcmVudC4gVGhpcyBpcyBhbiBhbnRpLXBhdHRlcm4gc2luY2UgcHJvcHMgd2lsbCAnICsgJ2dldCByZWFjdGl2ZWx5IHVwZGF0ZWQgd2hlbiByZW5kZXJlZC4gSW5zdGVhZCwgY2hhbmdlIHRoZSBvd25lclxcJ3MgJyArICdgcmVuZGVyYCBtZXRob2QgdG8gcGFzcyB0aGUgY29ycmVjdCB2YWx1ZSBhcyBwcm9wcyB0byB0aGUgY29tcG9uZW50ICcgKyAnd2hlcmUgaXQgaXMgY3JlYXRlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAvLyBNZXJnZSB3aXRoIHRoZSBwZW5kaW5nIGVsZW1lbnQgaWYgaXQgZXhpc3RzLCBvdGhlcndpc2Ugd2l0aCBleGlzdGluZ1xuICAgIC8vIGVsZW1lbnQgcHJvcHMuXG4gICAgdmFyIHdyYXBFbGVtZW50ID0gdG9wTGV2ZWxXcmFwcGVyLl9wZW5kaW5nRWxlbWVudCB8fCB0b3BMZXZlbFdyYXBwZXIuX2N1cnJlbnRFbGVtZW50O1xuICAgIHZhciBlbGVtZW50ID0gd3JhcEVsZW1lbnQucHJvcHM7XG4gICAgdmFyIHByb3BzID0gYXNzaWduKHt9LCBlbGVtZW50LnByb3BzLCBwYXJ0aWFsUHJvcHMpO1xuICAgIHRvcExldmVsV3JhcHBlci5fcGVuZGluZ0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlUHJvcHMod3JhcEVsZW1lbnQsIFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VQcm9wcyhlbGVtZW50LCBwcm9wcykpO1xuXG4gICAgZW5xdWV1ZVVwZGF0ZSh0b3BMZXZlbFdyYXBwZXIpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhbGwgb2YgdGhlIHByb3BzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IHByb3BzIE5ldyBwcm9wcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlUmVwbGFjZVByb3BzOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIHByb3BzKSB7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsICdyZXBsYWNlUHJvcHMnKTtcbiAgICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlUmVwbGFjZVByb3BzSW50ZXJuYWwoaW50ZXJuYWxJbnN0YW5jZSwgcHJvcHMpO1xuICB9LFxuXG4gIGVucXVldWVSZXBsYWNlUHJvcHNJbnRlcm5hbDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIHByb3BzKSB7XG4gICAgdmFyIHRvcExldmVsV3JhcHBlciA9IGludGVybmFsSW5zdGFuY2UuX3RvcExldmVsV3JhcHBlcjtcbiAgICAhdG9wTGV2ZWxXcmFwcGVyID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3JlcGxhY2VQcm9wcyguLi4pOiBZb3UgY2FsbGVkIGByZXBsYWNlUHJvcHNgIG9uIGEgJyArICdjb21wb25lbnQgd2l0aCBhIHBhcmVudC4gVGhpcyBpcyBhbiBhbnRpLXBhdHRlcm4gc2luY2UgcHJvcHMgd2lsbCAnICsgJ2dldCByZWFjdGl2ZWx5IHVwZGF0ZWQgd2hlbiByZW5kZXJlZC4gSW5zdGVhZCwgY2hhbmdlIHRoZSBvd25lclxcJ3MgJyArICdgcmVuZGVyYCBtZXRob2QgdG8gcGFzcyB0aGUgY29ycmVjdCB2YWx1ZSBhcyBwcm9wcyB0byB0aGUgY29tcG9uZW50ICcgKyAnd2hlcmUgaXQgaXMgY3JlYXRlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAvLyBNZXJnZSB3aXRoIHRoZSBwZW5kaW5nIGVsZW1lbnQgaWYgaXQgZXhpc3RzLCBvdGhlcndpc2Ugd2l0aCBleGlzdGluZ1xuICAgIC8vIGVsZW1lbnQgcHJvcHMuXG4gICAgdmFyIHdyYXBFbGVtZW50ID0gdG9wTGV2ZWxXcmFwcGVyLl9wZW5kaW5nRWxlbWVudCB8fCB0b3BMZXZlbFdyYXBwZXIuX2N1cnJlbnRFbGVtZW50O1xuICAgIHZhciBlbGVtZW50ID0gd3JhcEVsZW1lbnQucHJvcHM7XG4gICAgdG9wTGV2ZWxXcmFwcGVyLl9wZW5kaW5nRWxlbWVudCA9IFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VQcm9wcyh3cmFwRWxlbWVudCwgUmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZVByb3BzKGVsZW1lbnQsIHByb3BzKSk7XG5cbiAgICBlbnF1ZXVlVXBkYXRlKHRvcExldmVsV3JhcHBlcik7XG4gIH0sXG5cbiAgZW5xdWV1ZUVsZW1lbnRJbnRlcm5hbDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIG5ld0VsZW1lbnQpIHtcbiAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nRWxlbWVudCA9IG5ld0VsZW1lbnQ7XG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0VXBkYXRlUXVldWU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0VXBkYXRlc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENhbGxiYWNrUXVldWUgPSByZXF1aXJlKCcuL0NhbGxiYWNrUXVldWUnKTtcbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFJlYWN0UmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVyJyk7XG52YXIgVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL1RyYW5zYWN0aW9uJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIGRpcnR5Q29tcG9uZW50cyA9IFtdO1xudmFyIGFzYXBDYWxsYmFja1F1ZXVlID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQoKTtcbnZhciBhc2FwRW5xdWV1ZWQgPSBmYWxzZTtcblxudmFyIGJhdGNoaW5nU3RyYXRlZ3kgPSBudWxsO1xuXG5mdW5jdGlvbiBlbnN1cmVJbmplY3RlZCgpIHtcbiAgIShSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbiAmJiBiYXRjaGluZ1N0cmF0ZWd5KSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXM6IG11c3QgaW5qZWN0IGEgcmVjb25jaWxlIHRyYW5zYWN0aW9uIGNsYXNzIGFuZCBiYXRjaGluZyAnICsgJ3N0cmF0ZWd5JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG52YXIgTkVTVEVEX1VQREFURVMgPSB7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRpcnR5Q29tcG9uZW50c0xlbmd0aCA9IGRpcnR5Q29tcG9uZW50cy5sZW5ndGg7XG4gIH0sXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZGlydHlDb21wb25lbnRzTGVuZ3RoICE9PSBkaXJ0eUNvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICAvLyBBZGRpdGlvbmFsIHVwZGF0ZXMgd2VyZSBlbnF1ZXVlZCBieSBjb21wb25lbnREaWRVcGRhdGUgaGFuZGxlcnMgb3JcbiAgICAgIC8vIHNpbWlsYXI7IGJlZm9yZSBvdXIgb3duIFVQREFURV9RVUVVRUlORyB3cmFwcGVyIGNsb3Nlcywgd2Ugd2FudCB0byBydW5cbiAgICAgIC8vIHRoZXNlIG5ldyB1cGRhdGVzIHNvIHRoYXQgaWYgQSdzIGNvbXBvbmVudERpZFVwZGF0ZSBjYWxscyBzZXRTdGF0ZSBvblxuICAgICAgLy8gQiwgQiB3aWxsIHVwZGF0ZSBiZWZvcmUgdGhlIGNhbGxiYWNrIEEncyB1cGRhdGVyIHByb3ZpZGVkIHdoZW4gY2FsbGluZ1xuICAgICAgLy8gc2V0U3RhdGUuXG4gICAgICBkaXJ0eUNvbXBvbmVudHMuc3BsaWNlKDAsIHRoaXMuZGlydHlDb21wb25lbnRzTGVuZ3RoKTtcbiAgICAgIGZsdXNoQmF0Y2hlZFVwZGF0ZXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlydHlDb21wb25lbnRzLmxlbmd0aCA9IDA7XG4gICAgfVxuICB9XG59O1xuXG52YXIgVVBEQVRFX1FVRVVFSU5HID0ge1xuICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsYmFja1F1ZXVlLnJlc2V0KCk7XG4gIH0sXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsYmFja1F1ZXVlLm5vdGlmeUFsbCgpO1xuICB9XG59O1xuXG52YXIgVFJBTlNBQ1RJT05fV1JBUFBFUlMgPSBbTkVTVEVEX1VQREFURVMsIFVQREFURV9RVUVVRUlOR107XG5cbmZ1bmN0aW9uIFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24oKSB7XG4gIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcbiAgdGhpcy5kaXJ0eUNvbXBvbmVudHNMZW5ndGggPSBudWxsO1xuICB0aGlzLmNhbGxiYWNrUXVldWUgPSBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpO1xuICB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uID0gUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKCAvKiBmb3JjZUhUTUwgKi9mYWxzZSk7XG59XG5cbmFzc2lnbihSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uLnByb3RvdHlwZSwgVHJhbnNhY3Rpb24uTWl4aW4sIHtcbiAgZ2V0VHJhbnNhY3Rpb25XcmFwcGVyczogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBUUkFOU0FDVElPTl9XUkFQUEVSUztcbiAgfSxcblxuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5kaXJ0eUNvbXBvbmVudHNMZW5ndGggPSBudWxsO1xuICAgIENhbGxiYWNrUXVldWUucmVsZWFzZSh0aGlzLmNhbGxiYWNrUXVldWUpO1xuICAgIHRoaXMuY2FsbGJhY2tRdWV1ZSA9IG51bGw7XG4gICAgUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24ucmVsZWFzZSh0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uKTtcbiAgICB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uID0gbnVsbDtcbiAgfSxcblxuICBwZXJmb3JtOiBmdW5jdGlvbiAobWV0aG9kLCBzY29wZSwgYSkge1xuICAgIC8vIEVzc2VudGlhbGx5IGNhbGxzIGB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uLnBlcmZvcm0obWV0aG9kLCBzY29wZSwgYSlgXG4gICAgLy8gd2l0aCB0aGlzIHRyYW5zYWN0aW9uJ3Mgd3JhcHBlcnMgYXJvdW5kIGl0LlxuICAgIHJldHVybiBUcmFuc2FjdGlvbi5NaXhpbi5wZXJmb3JtLmNhbGwodGhpcywgdGhpcy5yZWNvbmNpbGVUcmFuc2FjdGlvbi5wZXJmb3JtLCB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uLCBtZXRob2QsIHNjb3BlLCBhKTtcbiAgfVxufSk7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uKTtcblxuZnVuY3Rpb24gYmF0Y2hlZFVwZGF0ZXMoY2FsbGJhY2ssIGEsIGIsIGMsIGQsIGUpIHtcbiAgZW5zdXJlSW5qZWN0ZWQoKTtcbiAgYmF0Y2hpbmdTdHJhdGVneS5iYXRjaGVkVXBkYXRlcyhjYWxsYmFjaywgYSwgYiwgYywgZCwgZSk7XG59XG5cbi8qKlxuICogQXJyYXkgY29tcGFyYXRvciBmb3IgUmVhY3RDb21wb25lbnRzIGJ5IG1vdW50IG9yZGVyaW5nLlxuICpcbiAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGMxIGZpcnN0IGNvbXBvbmVudCB5b3UncmUgY29tcGFyaW5nXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjMiBzZWNvbmQgY29tcG9uZW50IHlvdSdyZSBjb21wYXJpbmdcbiAqIEByZXR1cm4ge251bWJlcn0gUmV0dXJuIHZhbHVlIHVzYWJsZSBieSBBcnJheS5wcm90b3R5cGUuc29ydCgpLlxuICovXG5mdW5jdGlvbiBtb3VudE9yZGVyQ29tcGFyYXRvcihjMSwgYzIpIHtcbiAgcmV0dXJuIGMxLl9tb3VudE9yZGVyIC0gYzIuX21vdW50T3JkZXI7XG59XG5cbmZ1bmN0aW9uIHJ1bkJhdGNoZWRVcGRhdGVzKHRyYW5zYWN0aW9uKSB7XG4gIHZhciBsZW4gPSB0cmFuc2FjdGlvbi5kaXJ0eUNvbXBvbmVudHNMZW5ndGg7XG4gICEobGVuID09PSBkaXJ0eUNvbXBvbmVudHMubGVuZ3RoKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFeHBlY3RlZCBmbHVzaCB0cmFuc2FjdGlvblxcJ3Mgc3RvcmVkIGRpcnR5LWNvbXBvbmVudHMgbGVuZ3RoICglcykgdG8gJyArICdtYXRjaCBkaXJ0eS1jb21wb25lbnRzIGFycmF5IGxlbmd0aCAoJXMpLicsIGxlbiwgZGlydHlDb21wb25lbnRzLmxlbmd0aCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIC8vIFNpbmNlIHJlY29uY2lsaW5nIGEgY29tcG9uZW50IGhpZ2hlciBpbiB0aGUgb3duZXIgaGllcmFyY2h5IHVzdWFsbHkgKG5vdFxuICAvLyBhbHdheXMgLS0gc2VlIHNob3VsZENvbXBvbmVudFVwZGF0ZSgpKSB3aWxsIHJlY29uY2lsZSBjaGlsZHJlbiwgcmVjb25jaWxlXG4gIC8vIHRoZW0gYmVmb3JlIHRoZWlyIGNoaWxkcmVuIGJ5IHNvcnRpbmcgdGhlIGFycmF5LlxuICBkaXJ0eUNvbXBvbmVudHMuc29ydChtb3VudE9yZGVyQ29tcGFyYXRvcik7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIC8vIElmIGEgY29tcG9uZW50IGlzIHVubW91bnRlZCBiZWZvcmUgcGVuZGluZyBjaGFuZ2VzIGFwcGx5LCBpdCB3aWxsIHN0aWxsXG4gICAgLy8gYmUgaGVyZSwgYnV0IHdlIGFzc3VtZSB0aGF0IGl0IGhhcyBjbGVhcmVkIGl0cyBfcGVuZGluZ0NhbGxiYWNrcyBhbmRcbiAgICAvLyB0aGF0IHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSBpcyBhIG5vb3AuXG4gICAgdmFyIGNvbXBvbmVudCA9IGRpcnR5Q29tcG9uZW50c1tpXTtcblxuICAgIC8vIElmIHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSBoYXBwZW5zIHRvIGVucXVldWUgYW55IG5ldyB1cGRhdGVzLCB3ZVxuICAgIC8vIHNob3VsZG4ndCBleGVjdXRlIHRoZSBjYWxsYmFja3MgdW50aWwgdGhlIG5leHQgcmVuZGVyIGhhcHBlbnMsIHNvXG4gICAgLy8gc3Rhc2ggdGhlIGNhbGxiYWNrcyBmaXJzdFxuICAgIHZhciBjYWxsYmFja3MgPSBjb21wb25lbnQuX3BlbmRpbmdDYWxsYmFja3M7XG4gICAgY29tcG9uZW50Ll9wZW5kaW5nQ2FsbGJhY2tzID0gbnVsbDtcblxuICAgIFJlYWN0UmVjb25jaWxlci5wZXJmb3JtVXBkYXRlSWZOZWNlc3NhcnkoY29tcG9uZW50LCB0cmFuc2FjdGlvbi5yZWNvbmNpbGVUcmFuc2FjdGlvbik7XG5cbiAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNhbGxiYWNrcy5sZW5ndGg7IGorKykge1xuICAgICAgICB0cmFuc2FjdGlvbi5jYWxsYmFja1F1ZXVlLmVucXVldWUoY2FsbGJhY2tzW2pdLCBjb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbnZhciBmbHVzaEJhdGNoZWRVcGRhdGVzID0gZnVuY3Rpb24gKCkge1xuICAvLyBSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uJ3Mgd3JhcHBlcnMgd2lsbCBjbGVhciB0aGUgZGlydHlDb21wb25lbnRzXG4gIC8vIGFycmF5IGFuZCBwZXJmb3JtIGFueSB1cGRhdGVzIGVucXVldWVkIGJ5IG1vdW50LXJlYWR5IGhhbmRsZXJzIChpLmUuLFxuICAvLyBjb21wb25lbnREaWRVcGRhdGUpIGJ1dCB3ZSBuZWVkIHRvIGNoZWNrIGhlcmUgdG9vIGluIG9yZGVyIHRvIGNhdGNoXG4gIC8vIHVwZGF0ZXMgZW5xdWV1ZWQgYnkgc2V0U3RhdGUgY2FsbGJhY2tzIGFuZCBhc2FwIGNhbGxzLlxuICB3aGlsZSAoZGlydHlDb21wb25lbnRzLmxlbmd0aCB8fCBhc2FwRW5xdWV1ZWQpIHtcbiAgICBpZiAoZGlydHlDb21wb25lbnRzLmxlbmd0aCkge1xuICAgICAgdmFyIHRyYW5zYWN0aW9uID0gUmVhY3RVcGRhdGVzRmx1c2hUcmFuc2FjdGlvbi5nZXRQb29sZWQoKTtcbiAgICAgIHRyYW5zYWN0aW9uLnBlcmZvcm0ocnVuQmF0Y2hlZFVwZGF0ZXMsIG51bGwsIHRyYW5zYWN0aW9uKTtcbiAgICAgIFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24ucmVsZWFzZSh0cmFuc2FjdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKGFzYXBFbnF1ZXVlZCkge1xuICAgICAgYXNhcEVucXVldWVkID0gZmFsc2U7XG4gICAgICB2YXIgcXVldWUgPSBhc2FwQ2FsbGJhY2tRdWV1ZTtcbiAgICAgIGFzYXBDYWxsYmFja1F1ZXVlID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQoKTtcbiAgICAgIHF1ZXVlLm5vdGlmeUFsbCgpO1xuICAgICAgQ2FsbGJhY2tRdWV1ZS5yZWxlYXNlKHF1ZXVlKTtcbiAgICB9XG4gIH1cbn07XG5mbHVzaEJhdGNoZWRVcGRhdGVzID0gUmVhY3RQZXJmLm1lYXN1cmUoJ1JlYWN0VXBkYXRlcycsICdmbHVzaEJhdGNoZWRVcGRhdGVzJywgZmx1c2hCYXRjaGVkVXBkYXRlcyk7XG5cbi8qKlxuICogTWFyayBhIGNvbXBvbmVudCBhcyBuZWVkaW5nIGEgcmVyZW5kZXIsIGFkZGluZyBhbiBvcHRpb25hbCBjYWxsYmFjayB0byBhXG4gKiBsaXN0IG9mIGZ1bmN0aW9ucyB3aGljaCB3aWxsIGJlIGV4ZWN1dGVkIG9uY2UgdGhlIHJlcmVuZGVyIG9jY3Vycy5cbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZVVwZGF0ZShjb21wb25lbnQpIHtcbiAgZW5zdXJlSW5qZWN0ZWQoKTtcblxuICAvLyBWYXJpb3VzIHBhcnRzIG9mIG91ciBjb2RlIChzdWNoIGFzIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50J3NcbiAgLy8gX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCkgYXNzdW1lIHRoYXQgY2FsbHMgdG8gcmVuZGVyIGFyZW4ndCBuZXN0ZWQ7XG4gIC8vIHZlcmlmeSB0aGF0IHRoYXQncyB0aGUgY2FzZS4gKFRoaXMgaXMgY2FsbGVkIGJ5IGVhY2ggdG9wLWxldmVsIHVwZGF0ZVxuICAvLyBmdW5jdGlvbiwgbGlrZSBzZXRQcm9wcywgc2V0U3RhdGUsIGZvcmNlVXBkYXRlLCBldGMuOyBjcmVhdGlvbiBhbmRcbiAgLy8gZGVzdHJ1Y3Rpb24gb2YgdG9wLWxldmVsIGNvbXBvbmVudHMgaXMgZ3VhcmRlZCBpbiBSZWFjdE1vdW50LilcblxuICBpZiAoIWJhdGNoaW5nU3RyYXRlZ3kuaXNCYXRjaGluZ1VwZGF0ZXMpIHtcbiAgICBiYXRjaGluZ1N0cmF0ZWd5LmJhdGNoZWRVcGRhdGVzKGVucXVldWVVcGRhdGUsIGNvbXBvbmVudCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZGlydHlDb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbn1cblxuLyoqXG4gKiBFbnF1ZXVlIGEgY2FsbGJhY2sgdG8gYmUgcnVuIGF0IHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgYmF0Y2hpbmcgY3ljbGUuIFRocm93c1xuICogaWYgbm8gdXBkYXRlcyBhcmUgY3VycmVudGx5IGJlaW5nIHBlcmZvcm1lZC5cbiAqL1xuZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgY29udGV4dCkge1xuICAhYmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcyA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXMuYXNhcDogQ2FuXFwndCBlbnF1ZXVlIGFuIGFzYXAgY2FsbGJhY2sgaW4gYSBjb250ZXh0IHdoZXJlJyArICd1cGRhdGVzIGFyZSBub3QgYmVpbmcgYmF0Y2hlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGFzYXBDYWxsYmFja1F1ZXVlLmVucXVldWUoY2FsbGJhY2ssIGNvbnRleHQpO1xuICBhc2FwRW5xdWV1ZWQgPSB0cnVlO1xufVxuXG52YXIgUmVhY3RVcGRhdGVzSW5qZWN0aW9uID0ge1xuICBpbmplY3RSZWNvbmNpbGVUcmFuc2FjdGlvbjogZnVuY3Rpb24gKFJlY29uY2lsZVRyYW5zYWN0aW9uKSB7XG4gICAgIVJlY29uY2lsZVRyYW5zYWN0aW9uID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgcmVjb25jaWxlIHRyYW5zYWN0aW9uIGNsYXNzJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIFJlYWN0VXBkYXRlcy5SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uID0gUmVjb25jaWxlVHJhbnNhY3Rpb247XG4gIH0sXG5cbiAgaW5qZWN0QmF0Y2hpbmdTdHJhdGVneTogZnVuY3Rpb24gKF9iYXRjaGluZ1N0cmF0ZWd5KSB7XG4gICAgIV9iYXRjaGluZ1N0cmF0ZWd5ID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgYmF0Y2hpbmcgc3RyYXRlZ3knKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgISh0eXBlb2YgX2JhdGNoaW5nU3RyYXRlZ3kuYmF0Y2hlZFVwZGF0ZXMgPT09ICdmdW5jdGlvbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgYmF0Y2hlZFVwZGF0ZXMoKSBmdW5jdGlvbicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhKHR5cGVvZiBfYmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcyA9PT0gJ2Jvb2xlYW4nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXM6IG11c3QgcHJvdmlkZSBhbiBpc0JhdGNoaW5nVXBkYXRlcyBib29sZWFuIGF0dHJpYnV0ZScpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBiYXRjaGluZ1N0cmF0ZWd5ID0gX2JhdGNoaW5nU3RyYXRlZ3k7XG4gIH1cbn07XG5cbnZhciBSZWFjdFVwZGF0ZXMgPSB7XG4gIC8qKlxuICAgKiBSZWFjdCByZWZlcmVuY2VzIGBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uYCB1c2luZyB0aGlzIHByb3BlcnR5IGluIG9yZGVyXG4gICAqIHRvIGFsbG93IGRlcGVuZGVuY3kgaW5qZWN0aW9uLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb246IG51bGwsXG5cbiAgYmF0Y2hlZFVwZGF0ZXM6IGJhdGNoZWRVcGRhdGVzLFxuICBlbnF1ZXVlVXBkYXRlOiBlbnF1ZXVlVXBkYXRlLFxuICBmbHVzaEJhdGNoZWRVcGRhdGVzOiBmbHVzaEJhdGNoZWRVcGRhdGVzLFxuICBpbmplY3Rpb246IFJlYWN0VXBkYXRlc0luamVjdGlvbixcbiAgYXNhcDogYXNhcFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFVwZGF0ZXM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0VmVyc2lvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSAnMC4xNC45JzsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU1ZHRE9NUHJvcGVydHlDb25maWdcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBET01Qcm9wZXJ0eSA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHknKTtcblxudmFyIE1VU1RfVVNFX0FUVFJJQlVURSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5NVVNUX1VTRV9BVFRSSUJVVEU7XG5cbnZhciBOUyA9IHtcbiAgeGxpbms6ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyxcbiAgeG1sOiAnaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlJ1xufTtcblxudmFyIFNWR0RPTVByb3BlcnR5Q29uZmlnID0ge1xuICBQcm9wZXJ0aWVzOiB7XG4gICAgY2xpcFBhdGg6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBjeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGN5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGR4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmaWxsOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZmlsbE9wYWNpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb250RmFtaWx5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZm9udFNpemU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZ5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZ3JhZGllbnRUcmFuc2Zvcm06IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBncmFkaWVudFVuaXRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWFya2VyRW5kOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWFya2VyTWlkOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWFya2VyU3RhcnQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBvZmZzZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBvcGFjaXR5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcGF0dGVybkNvbnRlbnRVbml0czogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHBhdHRlcm5Vbml0czogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHBvaW50czogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHByZXNlcnZlQXNwZWN0UmF0aW86IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICByOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcng6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICByeTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHNwcmVhZE1ldGhvZDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0b3BDb2xvcjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0b3BPcGFjaXR5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3Ryb2tlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3Ryb2tlRGFzaGFycmF5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3Ryb2tlTGluZWNhcDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0cm9rZU9wYWNpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdHJva2VXaWR0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHRleHRBbmNob3I6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB0cmFuc2Zvcm06IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB2ZXJzaW9uOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgdmlld0JveDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHgxOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeDI6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtBY3R1YXRlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtBcmNyb2xlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtIcmVmOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtSb2xlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtTaG93OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtUaXRsZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHhsaW5rVHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHhtbEJhc2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bWxMYW5nOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeG1sU3BhY2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB5MTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHkyOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeTogTVVTVF9VU0VfQVRUUklCVVRFXG4gIH0sXG4gIERPTUF0dHJpYnV0ZU5hbWVzcGFjZXM6IHtcbiAgICB4bGlua0FjdHVhdGU6IE5TLnhsaW5rLFxuICAgIHhsaW5rQXJjcm9sZTogTlMueGxpbmssXG4gICAgeGxpbmtIcmVmOiBOUy54bGluayxcbiAgICB4bGlua1JvbGU6IE5TLnhsaW5rLFxuICAgIHhsaW5rU2hvdzogTlMueGxpbmssXG4gICAgeGxpbmtUaXRsZTogTlMueGxpbmssXG4gICAgeGxpbmtUeXBlOiBOUy54bGluayxcbiAgICB4bWxCYXNlOiBOUy54bWwsXG4gICAgeG1sTGFuZzogTlMueG1sLFxuICAgIHhtbFNwYWNlOiBOUy54bWxcbiAgfSxcbiAgRE9NQXR0cmlidXRlTmFtZXM6IHtcbiAgICBjbGlwUGF0aDogJ2NsaXAtcGF0aCcsXG4gICAgZmlsbE9wYWNpdHk6ICdmaWxsLW9wYWNpdHknLFxuICAgIGZvbnRGYW1pbHk6ICdmb250LWZhbWlseScsXG4gICAgZm9udFNpemU6ICdmb250LXNpemUnLFxuICAgIGdyYWRpZW50VHJhbnNmb3JtOiAnZ3JhZGllbnRUcmFuc2Zvcm0nLFxuICAgIGdyYWRpZW50VW5pdHM6ICdncmFkaWVudFVuaXRzJyxcbiAgICBtYXJrZXJFbmQ6ICdtYXJrZXItZW5kJyxcbiAgICBtYXJrZXJNaWQ6ICdtYXJrZXItbWlkJyxcbiAgICBtYXJrZXJTdGFydDogJ21hcmtlci1zdGFydCcsXG4gICAgcGF0dGVybkNvbnRlbnRVbml0czogJ3BhdHRlcm5Db250ZW50VW5pdHMnLFxuICAgIHBhdHRlcm5Vbml0czogJ3BhdHRlcm5Vbml0cycsXG4gICAgcHJlc2VydmVBc3BlY3RSYXRpbzogJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLFxuICAgIHNwcmVhZE1ldGhvZDogJ3NwcmVhZE1ldGhvZCcsXG4gICAgc3RvcENvbG9yOiAnc3RvcC1jb2xvcicsXG4gICAgc3RvcE9wYWNpdHk6ICdzdG9wLW9wYWNpdHknLFxuICAgIHN0cm9rZURhc2hhcnJheTogJ3N0cm9rZS1kYXNoYXJyYXknLFxuICAgIHN0cm9rZUxpbmVjYXA6ICdzdHJva2UtbGluZWNhcCcsXG4gICAgc3Ryb2tlT3BhY2l0eTogJ3N0cm9rZS1vcGFjaXR5JyxcbiAgICBzdHJva2VXaWR0aDogJ3N0cm9rZS13aWR0aCcsXG4gICAgdGV4dEFuY2hvcjogJ3RleHQtYW5jaG9yJyxcbiAgICB2aWV3Qm94OiAndmlld0JveCcsXG4gICAgeGxpbmtBY3R1YXRlOiAneGxpbms6YWN0dWF0ZScsXG4gICAgeGxpbmtBcmNyb2xlOiAneGxpbms6YXJjcm9sZScsXG4gICAgeGxpbmtIcmVmOiAneGxpbms6aHJlZicsXG4gICAgeGxpbmtSb2xlOiAneGxpbms6cm9sZScsXG4gICAgeGxpbmtTaG93OiAneGxpbms6c2hvdycsXG4gICAgeGxpbmtUaXRsZTogJ3hsaW5rOnRpdGxlJyxcbiAgICB4bGlua1R5cGU6ICd4bGluazp0eXBlJyxcbiAgICB4bWxCYXNlOiAneG1sOmJhc2UnLFxuICAgIHhtbExhbmc6ICd4bWw6bGFuZycsXG4gICAgeG1sU3BhY2U6ICd4bWw6c3BhY2UnXG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU1ZHRE9NUHJvcGVydHlDb25maWc7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFNlbGVjdEV2ZW50UGx1Z2luXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRQcm9wYWdhdG9ycyA9IHJlcXVpcmUoJy4vRXZlbnRQcm9wYWdhdG9ycycpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdElucHV0U2VsZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdElucHV0U2VsZWN0aW9uJyk7XG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbnZhciBnZXRBY3RpdmVFbGVtZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvZ2V0QWN0aXZlRWxlbWVudCcpO1xudmFyIGlzVGV4dElucHV0RWxlbWVudCA9IHJlcXVpcmUoJy4vaXNUZXh0SW5wdXRFbGVtZW50Jyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xudmFyIHNoYWxsb3dFcXVhbCA9IHJlcXVpcmUoJ2ZianMvbGliL3NoYWxsb3dFcXVhbCcpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbnZhciBza2lwU2VsZWN0aW9uQ2hhbmdlRXZlbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ2RvY3VtZW50TW9kZScgaW4gZG9jdW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRNb2RlIDw9IDExO1xuXG52YXIgZXZlbnRUeXBlcyA9IHtcbiAgc2VsZWN0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TZWxlY3Q6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblNlbGVjdENhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDb250ZXh0TWVudSwgdG9wTGV2ZWxUeXBlcy50b3BGb2N1cywgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93biwgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZVVwLCB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZV1cbiAgfVxufTtcblxudmFyIGFjdGl2ZUVsZW1lbnQgPSBudWxsO1xudmFyIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG52YXIgbGFzdFNlbGVjdGlvbiA9IG51bGw7XG52YXIgbW91c2VEb3duID0gZmFsc2U7XG5cbi8vIFRyYWNrIHdoZXRoZXIgYSBsaXN0ZW5lciBleGlzdHMgZm9yIHRoaXMgcGx1Z2luLiBJZiBub25lIGV4aXN0LCB3ZSBkb1xuLy8gbm90IGV4dHJhY3QgZXZlbnRzLlxudmFyIGhhc0xpc3RlbmVyID0gZmFsc2U7XG52YXIgT05fU0VMRUNUX0tFWSA9IGtleU9mKHsgb25TZWxlY3Q6IG51bGwgfSk7XG5cbi8qKlxuICogR2V0IGFuIG9iamVjdCB3aGljaCBpcyBhIHVuaXF1ZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gKlxuICogVGhlIHJldHVybiB2YWx1ZSB3aWxsIG5vdCBiZSBjb25zaXN0ZW50IGFjcm9zcyBub2RlcyBvciBicm93c2VycywgYnV0XG4gKiB0d28gaWRlbnRpY2FsIHNlbGVjdGlvbnMgb24gdGhlIHNhbWUgbm9kZSB3aWxsIHJldHVybiBpZGVudGljYWwgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0U2VsZWN0aW9uKG5vZGUpIHtcbiAgaWYgKCdzZWxlY3Rpb25TdGFydCcgaW4gbm9kZSAmJiBSZWFjdElucHV0U2VsZWN0aW9uLmhhc1NlbGVjdGlvbkNhcGFiaWxpdGllcyhub2RlKSkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogbm9kZS5zZWxlY3Rpb25TdGFydCxcbiAgICAgIGVuZDogbm9kZS5zZWxlY3Rpb25FbmRcbiAgICB9O1xuICB9IGVsc2UgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcbiAgICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIHJldHVybiB7XG4gICAgICBhbmNob3JOb2RlOiBzZWxlY3Rpb24uYW5jaG9yTm9kZSxcbiAgICAgIGFuY2hvck9mZnNldDogc2VsZWN0aW9uLmFuY2hvck9mZnNldCxcbiAgICAgIGZvY3VzTm9kZTogc2VsZWN0aW9uLmZvY3VzTm9kZSxcbiAgICAgIGZvY3VzT2Zmc2V0OiBzZWxlY3Rpb24uZm9jdXNPZmZzZXRcbiAgICB9O1xuICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xuICAgIHZhciByYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgIHJldHVybiB7XG4gICAgICBwYXJlbnRFbGVtZW50OiByYW5nZS5wYXJlbnRFbGVtZW50KCksXG4gICAgICB0ZXh0OiByYW5nZS50ZXh0LFxuICAgICAgdG9wOiByYW5nZS5ib3VuZGluZ1RvcCxcbiAgICAgIGxlZnQ6IHJhbmdlLmJvdW5kaW5nTGVmdFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBQb2xsIHNlbGVjdGlvbiB0byBzZWUgd2hldGhlciBpdCdzIGNoYW5nZWQuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50XG4gKiBAcmV0dXJuIHs/U3ludGhldGljRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIGNvbnN0cnVjdFNlbGVjdEV2ZW50KG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAvLyBFbnN1cmUgd2UgaGF2ZSB0aGUgcmlnaHQgZWxlbWVudCwgYW5kIHRoYXQgdGhlIHVzZXIgaXMgbm90IGRyYWdnaW5nIGFcbiAgLy8gc2VsZWN0aW9uICh0aGlzIG1hdGNoZXMgbmF0aXZlIGBzZWxlY3RgIGV2ZW50IGJlaGF2aW9yKS4gSW4gSFRNTDUsIHNlbGVjdFxuICAvLyBmaXJlcyBvbmx5IG9uIGlucHV0IGFuZCB0ZXh0YXJlYSB0aHVzIGlmIHRoZXJlJ3Mgbm8gZm9jdXNlZCBlbGVtZW50IHdlXG4gIC8vIHdvbid0IGRpc3BhdGNoLlxuICBpZiAobW91c2VEb3duIHx8IGFjdGl2ZUVsZW1lbnQgPT0gbnVsbCB8fCBhY3RpdmVFbGVtZW50ICE9PSBnZXRBY3RpdmVFbGVtZW50KCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIE9ubHkgZmlyZSB3aGVuIHNlbGVjdGlvbiBoYXMgYWN0dWFsbHkgY2hhbmdlZC5cbiAgdmFyIGN1cnJlbnRTZWxlY3Rpb24gPSBnZXRTZWxlY3Rpb24oYWN0aXZlRWxlbWVudCk7XG4gIGlmICghbGFzdFNlbGVjdGlvbiB8fCAhc2hhbGxvd0VxdWFsKGxhc3RTZWxlY3Rpb24sIGN1cnJlbnRTZWxlY3Rpb24pKSB7XG4gICAgbGFzdFNlbGVjdGlvbiA9IGN1cnJlbnRTZWxlY3Rpb247XG5cbiAgICB2YXIgc3ludGhldGljRXZlbnQgPSBTeW50aGV0aWNFdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlcy5zZWxlY3QsIGFjdGl2ZUVsZW1lbnRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICAgIHN5bnRoZXRpY0V2ZW50LnR5cGUgPSAnc2VsZWN0JztcbiAgICBzeW50aGV0aWNFdmVudC50YXJnZXQgPSBhY3RpdmVFbGVtZW50O1xuXG4gICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKHN5bnRoZXRpY0V2ZW50KTtcblxuICAgIHJldHVybiBzeW50aGV0aWNFdmVudDtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIFRoaXMgcGx1Z2luIGNyZWF0ZXMgYW4gYG9uU2VsZWN0YCBldmVudCB0aGF0IG5vcm1hbGl6ZXMgc2VsZWN0IGV2ZW50c1xuICogYWNyb3NzIGZvcm0gZWxlbWVudHMuXG4gKlxuICogU3VwcG9ydGVkIGVsZW1lbnRzIGFyZTpcbiAqIC0gaW5wdXQgKHNlZSBgaXNUZXh0SW5wdXRFbGVtZW50YClcbiAqIC0gdGV4dGFyZWFcbiAqIC0gY29udGVudEVkaXRhYmxlXG4gKlxuICogVGhpcyBkaWZmZXJzIGZyb20gbmF0aXZlIGJyb3dzZXIgaW1wbGVtZW50YXRpb25zIGluIHRoZSBmb2xsb3dpbmcgd2F5czpcbiAqIC0gRmlyZXMgb24gY29udGVudEVkaXRhYmxlIGZpZWxkcyBhcyB3ZWxsIGFzIGlucHV0cy5cbiAqIC0gRmlyZXMgZm9yIGNvbGxhcHNlZCBzZWxlY3Rpb24uXG4gKiAtIEZpcmVzIGFmdGVyIHVzZXIgaW5wdXQuXG4gKi9cbnZhciBTZWxlY3RFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50c31cbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICBpZiAoIWhhc0xpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuICAgICAgLy8gVHJhY2sgdGhlIGlucHV0IG5vZGUgdGhhdCBoYXMgZm9jdXMuXG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRm9jdXM6XG4gICAgICAgIGlmIChpc1RleHRJbnB1dEVsZW1lbnQodG9wTGV2ZWxUYXJnZXQpIHx8IHRvcExldmVsVGFyZ2V0LmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgYWN0aXZlRWxlbWVudCA9IHRvcExldmVsVGFyZ2V0O1xuICAgICAgICAgIGFjdGl2ZUVsZW1lbnRJRCA9IHRvcExldmVsVGFyZ2V0SUQ7XG4gICAgICAgICAgbGFzdFNlbGVjdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQmx1cjpcbiAgICAgICAgYWN0aXZlRWxlbWVudCA9IG51bGw7XG4gICAgICAgIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG4gICAgICAgIGxhc3RTZWxlY3Rpb24gPSBudWxsO1xuICAgICAgICBicmVhaztcblxuICAgICAgLy8gRG9uJ3QgZmlyZSB0aGUgZXZlbnQgd2hpbGUgdGhlIHVzZXIgaXMgZHJhZ2dpbmcuIFRoaXMgbWF0Y2hlcyB0aGVcbiAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgbmF0aXZlIHNlbGVjdCBldmVudC5cbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZURvd246XG4gICAgICAgIG1vdXNlRG93biA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbnRleHRNZW51OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlVXA6XG4gICAgICAgIG1vdXNlRG93biA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gY29uc3RydWN0U2VsZWN0RXZlbnQobmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICAgICAgLy8gQ2hyb21lIGFuZCBJRSBmaXJlIG5vbi1zdGFuZGFyZCBldmVudCB3aGVuIHNlbGVjdGlvbiBpcyBjaGFuZ2VkIChhbmRcbiAgICAgIC8vIHNvbWV0aW1lcyB3aGVuIGl0IGhhc24ndCkuIElFJ3MgZXZlbnQgZmlyZXMgb3V0IG9mIG9yZGVyIHdpdGggcmVzcGVjdFxuICAgICAgLy8gdG8ga2V5IGFuZCBpbnB1dCBldmVudHMgb24gZGVsZXRpb24sIHNvIHdlIGRpc2NhcmQgaXQuXG4gICAgICAvL1xuICAgICAgLy8gRmlyZWZveCBkb2Vzbid0IHN1cHBvcnQgc2VsZWN0aW9uY2hhbmdlLCBzbyBjaGVjayBzZWxlY3Rpb24gc3RhdHVzXG4gICAgICAvLyBhZnRlciBlYWNoIGtleSBlbnRyeS4gVGhlIHNlbGVjdGlvbiBjaGFuZ2VzIGFmdGVyIGtleWRvd24gYW5kIGJlZm9yZVxuICAgICAgLy8ga2V5dXAsIGJ1dCB3ZSBjaGVjayBvbiBrZXlkb3duIGFzIHdlbGwgaW4gdGhlIGNhc2Ugb2YgaG9sZGluZyBkb3duIGFcbiAgICAgIC8vIGtleSwgd2hlbiBtdWx0aXBsZSBrZXlkb3duIGV2ZW50cyBhcmUgZmlyZWQgYnV0IG9ubHkgb25lIGtleXVwIGlzLlxuICAgICAgLy8gVGhpcyBpcyBhbHNvIG91ciBhcHByb2FjaCBmb3IgSUUgaGFuZGxpbmcsIGZvciB0aGUgcmVhc29uIGFib3ZlLlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZTpcbiAgICAgICAgaWYgKHNraXBTZWxlY3Rpb25DaGFuZ2VFdmVudCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5RG93bjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcDpcbiAgICAgICAgcmV0dXJuIGNvbnN0cnVjdFNlbGVjdEV2ZW50KG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG5cbiAgZGlkUHV0TGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAocmVnaXN0cmF0aW9uTmFtZSA9PT0gT05fU0VMRUNUX0tFWSkge1xuICAgICAgaGFzTGlzdGVuZXIgPSB0cnVlO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTZWxlY3RFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU2VydmVyUmVhY3RSb290SW5kZXhcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFNpemUgb2YgdGhlIHJlYWN0Um9vdCBJRCBzcGFjZS4gV2UgZ2VuZXJhdGUgcmFuZG9tIG51bWJlcnMgZm9yIFJlYWN0IHJvb3RcbiAqIElEcyBhbmQgaWYgdGhlcmUncyBhIGNvbGxpc2lvbiB0aGUgZXZlbnRzIGFuZCBET00gdXBkYXRlIHN5c3RlbSB3aWxsXG4gKiBnZXQgY29uZnVzZWQuIEluIHRoZSBmdXR1cmUgd2UgbmVlZCBhIHdheSB0byBnZW5lcmF0ZSBHVUlEcyBidXQgZm9yXG4gKiBub3cgdGhpcyB3aWxsIHdvcmsgb24gYSBzbWFsbGVyIHNjYWxlLlxuICovXG52YXIgR0xPQkFMX01PVU5UX1BPSU5UX01BWCA9IE1hdGgucG93KDIsIDUzKTtcblxudmFyIFNlcnZlclJlYWN0Um9vdEluZGV4ID0ge1xuICBjcmVhdGVSZWFjdFJvb3RJbmRleDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIEdMT0JBTF9NT1VOVF9QT0lOVF9NQVgpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlcnZlclJlYWN0Um9vdEluZGV4OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTaW1wbGVFdmVudFBsdWdpblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50TGlzdGVuZXIgPSByZXF1aXJlKCdmYmpzL2xpYi9FdmVudExpc3RlbmVyJyk7XG52YXIgRXZlbnRQcm9wYWdhdG9ycyA9IHJlcXVpcmUoJy4vRXZlbnRQcm9wYWdhdG9ycycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBTeW50aGV0aWNDbGlwYm9hcmRFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljQ2xpcGJvYXJkRXZlbnQnKTtcbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcbnZhciBTeW50aGV0aWNGb2N1c0V2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNGb2N1c0V2ZW50Jyk7XG52YXIgU3ludGhldGljS2V5Ym9hcmRFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljS2V5Ym9hcmRFdmVudCcpO1xudmFyIFN5bnRoZXRpY01vdXNlRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY01vdXNlRXZlbnQnKTtcbnZhciBTeW50aGV0aWNEcmFnRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0RyYWdFdmVudCcpO1xudmFyIFN5bnRoZXRpY1RvdWNoRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1RvdWNoRXZlbnQnKTtcbnZhciBTeW50aGV0aWNVSUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNVSUV2ZW50Jyk7XG52YXIgU3ludGhldGljV2hlZWxFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljV2hlZWxFdmVudCcpO1xuXG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcbnZhciBnZXRFdmVudENoYXJDb2RlID0gcmVxdWlyZSgnLi9nZXRFdmVudENoYXJDb2RlJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbnZhciBldmVudFR5cGVzID0ge1xuICBhYm9ydDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQWJvcnQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkFib3J0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgYmx1cjoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQmx1cjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQmx1ckNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGNhblBsYXk6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNhblBsYXk6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNhblBsYXlDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBjYW5QbGF5VGhyb3VnaDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQ2FuUGxheVRocm91Z2g6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNhblBsYXlUaHJvdWdoQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgY2xpY2s6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNsaWNrOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25DbGlja0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGNvbnRleHRNZW51OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db250ZXh0TWVudTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ29udGV4dE1lbnVDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBjb3B5OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db3B5OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Db3B5Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgY3V0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25DdXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkN1dENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRvdWJsZUNsaWNrOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Eb3VibGVDbGljazogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRG91YmxlQ2xpY2tDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJhZ0VuZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0VuZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ0VuZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWdFbnRlcjoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0VudGVyOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnRW50ZXJDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnRXhpdDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0V4aXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdFeGl0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJhZ0xlYXZlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnTGVhdmU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdMZWF2ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWdPdmVyOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnT3ZlcjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ092ZXJDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkRyYWdTdGFydDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ1N0YXJ0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJvcDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJvcDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJvcENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGR1cmF0aW9uQ2hhbmdlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EdXJhdGlvbkNoYW5nZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHVyYXRpb25DaGFuZ2VDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBlbXB0aWVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbXB0aWVkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25FbXB0aWVkQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZW5jcnlwdGVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbmNyeXB0ZWQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkVuY3J5cHRlZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGVuZGVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbmRlZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRW5kZWRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBlcnJvcjoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRXJyb3I6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkVycm9yQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZm9jdXM6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkZvY3VzOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Gb2N1c0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGlucHV0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25JbnB1dDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uSW5wdXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBrZXlEb3duOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25LZXlEb3duOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25LZXlEb3duQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAga2V5UHJlc3M6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbktleVByZXNzOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25LZXlQcmVzc0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGtleVVwOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25LZXlVcDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uS2V5VXBDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBsb2FkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Mb2FkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Mb2FkQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbG9hZGVkRGF0YToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTG9hZGVkRGF0YTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTG9hZGVkRGF0YUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGxvYWRlZE1ldGFkYXRhOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Mb2FkZWRNZXRhZGF0YTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTG9hZGVkTWV0YWRhdGFDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBsb2FkU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkxvYWRTdGFydDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTG9hZFN0YXJ0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgLy8gTm90ZTogV2UgZG8gbm90IGFsbG93IGxpc3RlbmluZyB0byBtb3VzZU92ZXIgZXZlbnRzLiBJbnN0ZWFkLCB1c2UgdGhlXG4gIC8vIG9uTW91c2VFbnRlci9vbk1vdXNlTGVhdmUgY3JlYXRlZCBieSBgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luYC5cbiAgbW91c2VEb3duOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Nb3VzZURvd246IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlRG93bkNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIG1vdXNlTW92ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTW91c2VNb3ZlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Nb3VzZU1vdmVDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBtb3VzZU91dDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTW91c2VPdXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlT3V0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbW91c2VPdmVyOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Nb3VzZU92ZXI6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlT3ZlckNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIG1vdXNlVXA6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbk1vdXNlVXA6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlVXBDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBwYXN0ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUGFzdGU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBhc3RlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgcGF1c2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblBhdXNlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25QYXVzZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHBsYXk6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblBsYXk6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBsYXlDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBwbGF5aW5nOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25QbGF5aW5nOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25QbGF5aW5nQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgcHJvZ3Jlc3M6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblByb2dyZXNzOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Qcm9ncmVzc0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHJhdGVDaGFuZ2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblJhdGVDaGFuZ2U6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblJhdGVDaGFuZ2VDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICByZXNldDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUmVzZXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblJlc2V0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgc2Nyb2xsOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TY3JvbGw6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblNjcm9sbENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHNlZWtlZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uU2Vla2VkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TZWVrZWRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBzZWVraW5nOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TZWVraW5nOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TZWVraW5nQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgc3RhbGxlZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uU3RhbGxlZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uU3RhbGxlZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHN1Ym1pdDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uU3VibWl0OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TdWJtaXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBzdXNwZW5kOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TdXNwZW5kOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TdXNwZW5kQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgdGltZVVwZGF0ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uVGltZVVwZGF0ZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVGltZVVwZGF0ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHRvdWNoQ2FuY2VsOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Ub3VjaENhbmNlbDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVG91Y2hDYW5jZWxDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB0b3VjaEVuZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uVG91Y2hFbmQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoRW5kQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgdG91Y2hNb3ZlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Ub3VjaE1vdmU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoTW92ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHRvdWNoU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblRvdWNoU3RhcnQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoU3RhcnRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB2b2x1bWVDaGFuZ2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblZvbHVtZUNoYW5nZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVm9sdW1lQ2hhbmdlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgd2FpdGluZzoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uV2FpdGluZzogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uV2FpdGluZ0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHdoZWVsOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25XaGVlbDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uV2hlZWxDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9XG59O1xuXG52YXIgdG9wTGV2ZWxFdmVudHNUb0Rpc3BhdGNoQ29uZmlnID0ge1xuICB0b3BBYm9ydDogZXZlbnRUeXBlcy5hYm9ydCxcbiAgdG9wQmx1cjogZXZlbnRUeXBlcy5ibHVyLFxuICB0b3BDYW5QbGF5OiBldmVudFR5cGVzLmNhblBsYXksXG4gIHRvcENhblBsYXlUaHJvdWdoOiBldmVudFR5cGVzLmNhblBsYXlUaHJvdWdoLFxuICB0b3BDbGljazogZXZlbnRUeXBlcy5jbGljayxcbiAgdG9wQ29udGV4dE1lbnU6IGV2ZW50VHlwZXMuY29udGV4dE1lbnUsXG4gIHRvcENvcHk6IGV2ZW50VHlwZXMuY29weSxcbiAgdG9wQ3V0OiBldmVudFR5cGVzLmN1dCxcbiAgdG9wRG91YmxlQ2xpY2s6IGV2ZW50VHlwZXMuZG91YmxlQ2xpY2ssXG4gIHRvcERyYWc6IGV2ZW50VHlwZXMuZHJhZyxcbiAgdG9wRHJhZ0VuZDogZXZlbnRUeXBlcy5kcmFnRW5kLFxuICB0b3BEcmFnRW50ZXI6IGV2ZW50VHlwZXMuZHJhZ0VudGVyLFxuICB0b3BEcmFnRXhpdDogZXZlbnRUeXBlcy5kcmFnRXhpdCxcbiAgdG9wRHJhZ0xlYXZlOiBldmVudFR5cGVzLmRyYWdMZWF2ZSxcbiAgdG9wRHJhZ092ZXI6IGV2ZW50VHlwZXMuZHJhZ092ZXIsXG4gIHRvcERyYWdTdGFydDogZXZlbnRUeXBlcy5kcmFnU3RhcnQsXG4gIHRvcERyb3A6IGV2ZW50VHlwZXMuZHJvcCxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6IGV2ZW50VHlwZXMuZHVyYXRpb25DaGFuZ2UsXG4gIHRvcEVtcHRpZWQ6IGV2ZW50VHlwZXMuZW1wdGllZCxcbiAgdG9wRW5jcnlwdGVkOiBldmVudFR5cGVzLmVuY3J5cHRlZCxcbiAgdG9wRW5kZWQ6IGV2ZW50VHlwZXMuZW5kZWQsXG4gIHRvcEVycm9yOiBldmVudFR5cGVzLmVycm9yLFxuICB0b3BGb2N1czogZXZlbnRUeXBlcy5mb2N1cyxcbiAgdG9wSW5wdXQ6IGV2ZW50VHlwZXMuaW5wdXQsXG4gIHRvcEtleURvd246IGV2ZW50VHlwZXMua2V5RG93bixcbiAgdG9wS2V5UHJlc3M6IGV2ZW50VHlwZXMua2V5UHJlc3MsXG4gIHRvcEtleVVwOiBldmVudFR5cGVzLmtleVVwLFxuICB0b3BMb2FkOiBldmVudFR5cGVzLmxvYWQsXG4gIHRvcExvYWRlZERhdGE6IGV2ZW50VHlwZXMubG9hZGVkRGF0YSxcbiAgdG9wTG9hZGVkTWV0YWRhdGE6IGV2ZW50VHlwZXMubG9hZGVkTWV0YWRhdGEsXG4gIHRvcExvYWRTdGFydDogZXZlbnRUeXBlcy5sb2FkU3RhcnQsXG4gIHRvcE1vdXNlRG93bjogZXZlbnRUeXBlcy5tb3VzZURvd24sXG4gIHRvcE1vdXNlTW92ZTogZXZlbnRUeXBlcy5tb3VzZU1vdmUsXG4gIHRvcE1vdXNlT3V0OiBldmVudFR5cGVzLm1vdXNlT3V0LFxuICB0b3BNb3VzZU92ZXI6IGV2ZW50VHlwZXMubW91c2VPdmVyLFxuICB0b3BNb3VzZVVwOiBldmVudFR5cGVzLm1vdXNlVXAsXG4gIHRvcFBhc3RlOiBldmVudFR5cGVzLnBhc3RlLFxuICB0b3BQYXVzZTogZXZlbnRUeXBlcy5wYXVzZSxcbiAgdG9wUGxheTogZXZlbnRUeXBlcy5wbGF5LFxuICB0b3BQbGF5aW5nOiBldmVudFR5cGVzLnBsYXlpbmcsXG4gIHRvcFByb2dyZXNzOiBldmVudFR5cGVzLnByb2dyZXNzLFxuICB0b3BSYXRlQ2hhbmdlOiBldmVudFR5cGVzLnJhdGVDaGFuZ2UsXG4gIHRvcFJlc2V0OiBldmVudFR5cGVzLnJlc2V0LFxuICB0b3BTY3JvbGw6IGV2ZW50VHlwZXMuc2Nyb2xsLFxuICB0b3BTZWVrZWQ6IGV2ZW50VHlwZXMuc2Vla2VkLFxuICB0b3BTZWVraW5nOiBldmVudFR5cGVzLnNlZWtpbmcsXG4gIHRvcFN0YWxsZWQ6IGV2ZW50VHlwZXMuc3RhbGxlZCxcbiAgdG9wU3VibWl0OiBldmVudFR5cGVzLnN1Ym1pdCxcbiAgdG9wU3VzcGVuZDogZXZlbnRUeXBlcy5zdXNwZW5kLFxuICB0b3BUaW1lVXBkYXRlOiBldmVudFR5cGVzLnRpbWVVcGRhdGUsXG4gIHRvcFRvdWNoQ2FuY2VsOiBldmVudFR5cGVzLnRvdWNoQ2FuY2VsLFxuICB0b3BUb3VjaEVuZDogZXZlbnRUeXBlcy50b3VjaEVuZCxcbiAgdG9wVG91Y2hNb3ZlOiBldmVudFR5cGVzLnRvdWNoTW92ZSxcbiAgdG9wVG91Y2hTdGFydDogZXZlbnRUeXBlcy50b3VjaFN0YXJ0LFxuICB0b3BWb2x1bWVDaGFuZ2U6IGV2ZW50VHlwZXMudm9sdW1lQ2hhbmdlLFxuICB0b3BXYWl0aW5nOiBldmVudFR5cGVzLndhaXRpbmcsXG4gIHRvcFdoZWVsOiBldmVudFR5cGVzLndoZWVsXG59O1xuXG5mb3IgKHZhciB0eXBlIGluIHRvcExldmVsRXZlbnRzVG9EaXNwYXRjaENvbmZpZykge1xuICB0b3BMZXZlbEV2ZW50c1RvRGlzcGF0Y2hDb25maWdbdHlwZV0uZGVwZW5kZW5jaWVzID0gW3R5cGVdO1xufVxuXG52YXIgT05fQ0xJQ0tfS0VZID0ga2V5T2YoeyBvbkNsaWNrOiBudWxsIH0pO1xudmFyIG9uQ2xpY2tMaXN0ZW5lcnMgPSB7fTtcblxudmFyIFNpbXBsZUV2ZW50UGx1Z2luID0ge1xuXG4gIGV2ZW50VHlwZXM6IGV2ZW50VHlwZXMsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIHZhciBkaXNwYXRjaENvbmZpZyA9IHRvcExldmVsRXZlbnRzVG9EaXNwYXRjaENvbmZpZ1t0b3BMZXZlbFR5cGVdO1xuICAgIGlmICghZGlzcGF0Y2hDb25maWcpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgRXZlbnRDb25zdHJ1Y3RvcjtcbiAgICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEFib3J0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENhblBsYXk6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ2FuUGxheVRocm91Z2g6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHVyYXRpb25DaGFuZ2U6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRW1wdGllZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BFbmNyeXB0ZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRW5kZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRXJyb3I6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wSW5wdXQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTG9hZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BMb2FkZWREYXRhOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcExvYWRlZE1ldGFkYXRhOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcExvYWRTdGFydDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BQYXVzZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BQbGF5OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBsYXlpbmc6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUHJvZ3Jlc3M6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUmF0ZUNoYW5nZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BSZXNldDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTZWVrZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wU2Vla2luZzpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTdGFsbGVkOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFN1Ym1pdDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTdXNwZW5kOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFRpbWVVcGRhdGU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVm9sdW1lQ2hhbmdlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFdhaXRpbmc6XG4gICAgICAgIC8vIEhUTUwgRXZlbnRzXG4gICAgICAgIC8vIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvaW5kZXguaHRtbCNldmVudHMtMFxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzOlxuICAgICAgICAvLyBGaXJlRm94IGNyZWF0ZXMgYSBrZXlwcmVzcyBldmVudCBmb3IgZnVuY3Rpb24ga2V5cyB0b28uIFRoaXMgcmVtb3Zlc1xuICAgICAgICAvLyB0aGUgdW53YW50ZWQga2V5cHJlc3MgZXZlbnRzLiBFbnRlciBpcyBob3dldmVyIGJvdGggcHJpbnRhYmxlIGFuZFxuICAgICAgICAvLyBub24tcHJpbnRhYmxlLiBPbmUgd291bGQgZXhwZWN0IFRhYiB0byBiZSBhcyB3ZWxsIChidXQgaXQgaXNuJ3QpLlxuICAgICAgICBpZiAoZ2V0RXZlbnRDaGFyQ29kZShuYXRpdmVFdmVudCkgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd246XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5VXA6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNLZXlib2FyZEV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BCbHVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzOlxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljRm9jdXNFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ2xpY2s6XG4gICAgICAgIC8vIEZpcmVmb3ggY3JlYXRlcyBhIGNsaWNrIGV2ZW50IG9uIHJpZ2h0IG1vdXNlIGNsaWNrcy4gVGhpcyByZW1vdmVzIHRoZVxuICAgICAgICAvLyB1bndhbnRlZCBjbGljayBldmVudHMuXG4gICAgICAgIGlmIChuYXRpdmVFdmVudC5idXR0b24gPT09IDIpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbnRleHRNZW51OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERvdWJsZUNsaWNrOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU1vdmU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VPdXQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlVXA6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNNb3VzZUV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdFbmQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJhZ0VudGVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdFeGl0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdMZWF2ZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnT3ZlcjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnU3RhcnQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJvcDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY0RyYWdFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hDYW5jZWw6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hFbmQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hNb3ZlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoU3RhcnQ6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNUb3VjaEV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTY3JvbGw6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNVSUV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BXaGVlbDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY1doZWVsRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvcHk6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ3V0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBhc3RlOlxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljQ2xpcGJvYXJkRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAhRXZlbnRDb25zdHJ1Y3RvciA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdTaW1wbGVFdmVudFBsdWdpbjogVW5oYW5kbGVkIGV2ZW50IHR5cGUsIGAlc2AuJywgdG9wTGV2ZWxUeXBlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIGV2ZW50ID0gRXZlbnRDb25zdHJ1Y3Rvci5nZXRQb29sZWQoZGlzcGF0Y2hDb25maWcsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcbiAgICByZXR1cm4gZXZlbnQ7XG4gIH0sXG5cbiAgZGlkUHV0TGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpIHtcbiAgICAvLyBNb2JpbGUgU2FmYXJpIGRvZXMgbm90IGZpcmUgcHJvcGVybHkgYnViYmxlIGNsaWNrIGV2ZW50cyBvblxuICAgIC8vIG5vbi1pbnRlcmFjdGl2ZSBlbGVtZW50cywgd2hpY2ggbWVhbnMgZGVsZWdhdGVkIGNsaWNrIGxpc3RlbmVycyBkbyBub3RcbiAgICAvLyBmaXJlLiBUaGUgd29ya2Fyb3VuZCBmb3IgdGhpcyBidWcgaW52b2x2ZXMgYXR0YWNoaW5nIGFuIGVtcHR5IGNsaWNrXG4gICAgLy8gbGlzdGVuZXIgb24gdGhlIHRhcmdldCBub2RlLlxuICAgIGlmIChyZWdpc3RyYXRpb25OYW1lID09PSBPTl9DTElDS19LRVkpIHtcbiAgICAgIHZhciBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKGlkKTtcbiAgICAgIGlmICghb25DbGlja0xpc3RlbmVyc1tpZF0pIHtcbiAgICAgICAgb25DbGlja0xpc3RlbmVyc1tpZF0gPSBFdmVudExpc3RlbmVyLmxpc3Rlbihub2RlLCAnY2xpY2snLCBlbXB0eUZ1bmN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgd2lsbERlbGV0ZUxpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICBpZiAocmVnaXN0cmF0aW9uTmFtZSA9PT0gT05fQ0xJQ0tfS0VZKSB7XG4gICAgICBvbkNsaWNrTGlzdGVuZXJzW2lkXS5yZW1vdmUoKTtcbiAgICAgIGRlbGV0ZSBvbkNsaWNrTGlzdGVuZXJzW2lkXTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTaW1wbGVFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljQ2xpcGJvYXJkRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9jbGlwYm9hcmQtYXBpcy9cbiAqL1xudmFyIENsaXBib2FyZEV2ZW50SW50ZXJmYWNlID0ge1xuICBjbGlwYm9hcmREYXRhOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gJ2NsaXBib2FyZERhdGEnIGluIGV2ZW50ID8gZXZlbnQuY2xpcGJvYXJkRGF0YSA6IHdpbmRvdy5jbGlwYm9hcmREYXRhO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNDbGlwYm9hcmRFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0NsaXBib2FyZEV2ZW50LCBDbGlwYm9hcmRFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljQ2xpcGJvYXJkRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2V2ZW50cy1jb21wb3NpdGlvbmV2ZW50c1xuICovXG52YXIgQ29tcG9zaXRpb25FdmVudEludGVyZmFjZSA9IHtcbiAgZGF0YTogbnVsbFxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljQ29tcG9zaXRpb25FdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQsIENvbXBvc2l0aW9uRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0RyYWdFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNNb3VzZUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNNb3VzZUV2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBEcmFnRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgRHJhZ0V2ZW50SW50ZXJmYWNlID0ge1xuICBkYXRhVHJhbnNmZXI6IG51bGxcbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY1VJRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY0RyYWdFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNNb3VzZUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNNb3VzZUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNEcmFnRXZlbnQsIERyYWdFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljRHJhZ0V2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIEV2ZW50SW50ZXJmYWNlID0ge1xuICB0eXBlOiBudWxsLFxuICB0YXJnZXQ6IG51bGwsXG4gIC8vIGN1cnJlbnRUYXJnZXQgaXMgc2V0IHdoZW4gZGlzcGF0Y2hpbmc7IG5vIHVzZSBpbiBjb3B5aW5nIGl0IGhlcmVcbiAgY3VycmVudFRhcmdldDogZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc051bGwsXG4gIGV2ZW50UGhhc2U6IG51bGwsXG4gIGJ1YmJsZXM6IG51bGwsXG4gIGNhbmNlbGFibGU6IG51bGwsXG4gIHRpbWVTdGFtcDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuIGV2ZW50LnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpO1xuICB9LFxuICBkZWZhdWx0UHJldmVudGVkOiBudWxsLFxuICBpc1RydXN0ZWQ6IG51bGxcbn07XG5cbi8qKlxuICogU3ludGhldGljIGV2ZW50cyBhcmUgZGlzcGF0Y2hlZCBieSBldmVudCBwbHVnaW5zLCB0eXBpY2FsbHkgaW4gcmVzcG9uc2UgdG8gYVxuICogdG9wLWxldmVsIGV2ZW50IGRlbGVnYXRpb24gaGFuZGxlci5cbiAqXG4gKiBUaGVzZSBzeXN0ZW1zIHNob3VsZCBnZW5lcmFsbHkgdXNlIHBvb2xpbmcgdG8gcmVkdWNlIHRoZSBmcmVxdWVuY3kgb2YgZ2FyYmFnZVxuICogY29sbGVjdGlvbi4gVGhlIHN5c3RlbSBzaG91bGQgY2hlY2sgYGlzUGVyc2lzdGVudGAgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlXG4gKiBldmVudCBzaG91bGQgYmUgcmVsZWFzZWQgaW50byB0aGUgcG9vbCBhZnRlciBiZWluZyBkaXNwYXRjaGVkLiBVc2VycyB0aGF0XG4gKiBuZWVkIGEgcGVyc2lzdGVkIGV2ZW50IHNob3VsZCBpbnZva2UgYHBlcnNpc3RgLlxuICpcbiAqIFN5bnRoZXRpYyBldmVudHMgKGFuZCBzdWJjbGFzc2VzKSBpbXBsZW1lbnQgdGhlIERPTSBMZXZlbCAzIEV2ZW50cyBBUEkgYnlcbiAqIG5vcm1hbGl6aW5nIGJyb3dzZXIgcXVpcmtzLiBTdWJjbGFzc2VzIGRvIG5vdCBuZWNlc3NhcmlseSBoYXZlIHRvIGltcGxlbWVudCBhXG4gKiBET00gaW50ZXJmYWNlOyBjdXN0b20gYXBwbGljYXRpb24tc3BlY2lmaWMgZXZlbnRzIGNhbiBhbHNvIHN1YmNsYXNzIHRoaXMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICB0aGlzLmRpc3BhdGNoQ29uZmlnID0gZGlzcGF0Y2hDb25maWc7XG4gIHRoaXMuZGlzcGF0Y2hNYXJrZXIgPSBkaXNwYXRjaE1hcmtlcjtcbiAgdGhpcy5uYXRpdmVFdmVudCA9IG5hdGl2ZUV2ZW50O1xuXG4gIHZhciBJbnRlcmZhY2UgPSB0aGlzLmNvbnN0cnVjdG9yLkludGVyZmFjZTtcbiAgZm9yICh2YXIgcHJvcE5hbWUgaW4gSW50ZXJmYWNlKSB7XG4gICAgaWYgKCFJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFyIG5vcm1hbGl6ZSA9IEludGVyZmFjZVtwcm9wTmFtZV07XG4gICAgaWYgKG5vcm1hbGl6ZSkge1xuICAgICAgdGhpc1twcm9wTmFtZV0gPSBub3JtYWxpemUobmF0aXZlRXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocHJvcE5hbWUgPT09ICd0YXJnZXQnKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbmF0aXZlRXZlbnRUYXJnZXQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzW3Byb3BOYW1lXSA9IG5hdGl2ZUV2ZW50W3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgZGVmYXVsdFByZXZlbnRlZCA9IG5hdGl2ZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgIT0gbnVsbCA/IG5hdGl2ZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgOiBuYXRpdmVFdmVudC5yZXR1cm5WYWx1ZSA9PT0gZmFsc2U7XG4gIGlmIChkZWZhdWx0UHJldmVudGVkKSB7XG4gICAgdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNGYWxzZTtcbiAgfVxuICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0ZhbHNlO1xufVxuXG5hc3NpZ24oU3ludGhldGljRXZlbnQucHJvdG90eXBlLCB7XG5cbiAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICAgIHZhciBldmVudCA9IHRoaXMubmF0aXZlRXZlbnQ7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGV2ZW50LCAnVGhpcyBzeW50aGV0aWMgZXZlbnQgaXMgcmV1c2VkIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLiBJZiB5b3VcXCdyZSAnICsgJ3NlZWluZyB0aGlzLCB5b3VcXCdyZSBjYWxsaW5nIGBwcmV2ZW50RGVmYXVsdGAgb24gYSAnICsgJ3JlbGVhc2VkL251bGxpZmllZCBzeW50aGV0aWMgZXZlbnQuIFRoaXMgaXMgYSBuby1vcC4gU2VlICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC1ldmVudC1wb29saW5nIGZvciBtb3JlIGluZm9ybWF0aW9uLicpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIWV2ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlO1xuICB9LFxuXG4gIHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBldmVudCA9IHRoaXMubmF0aXZlRXZlbnQ7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGV2ZW50LCAnVGhpcyBzeW50aGV0aWMgZXZlbnQgaXMgcmV1c2VkIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLiBJZiB5b3VcXCdyZSAnICsgJ3NlZWluZyB0aGlzLCB5b3VcXCdyZSBjYWxsaW5nIGBzdG9wUHJvcGFnYXRpb25gIG9uIGEgJyArICdyZWxlYXNlZC9udWxsaWZpZWQgc3ludGhldGljIGV2ZW50LiBUaGlzIGlzIGEgbm8tb3AuIFNlZSAnICsgJ2h0dHBzOi8vZmIubWUvcmVhY3QtZXZlbnQtcG9vbGluZyBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCFldmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgIH1cbiAgICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdlIHJlbGVhc2UgYWxsIGRpc3BhdGNoZWQgYFN5bnRoZXRpY0V2ZW50YHMgYWZ0ZXIgZWFjaCBldmVudCBsb29wLCBhZGRpbmdcbiAgICogdGhlbSBiYWNrIGludG8gdGhlIHBvb2wuIFRoaXMgYWxsb3dzIGEgd2F5IHRvIGhvbGQgb250byBhIHJlZmVyZW5jZSB0aGF0XG4gICAqIHdvbid0IGJlIGFkZGVkIGJhY2sgaW50byB0aGUgcG9vbC5cbiAgICovXG4gIHBlcnNpc3Q6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmlzUGVyc2lzdGVudCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhpcyBldmVudCBzaG91bGQgYmUgcmVsZWFzZWQgYmFjayBpbnRvIHRoZSBwb29sLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoaXMgc2hvdWxkIG5vdCBiZSByZWxlYXNlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cbiAgaXNQZXJzaXN0ZW50OiBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zRmFsc2UsXG5cbiAgLyoqXG4gICAqIGBQb29sZWRDbGFzc2AgbG9va3MgZm9yIGBkZXN0cnVjdG9yYCBvbiBlYWNoIGluc3RhbmNlIGl0IHJlbGVhc2VzLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBJbnRlcmZhY2UgPSB0aGlzLmNvbnN0cnVjdG9yLkludGVyZmFjZTtcbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBJbnRlcmZhY2UpIHtcbiAgICAgIHRoaXNbcHJvcE5hbWVdID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5kaXNwYXRjaENvbmZpZyA9IG51bGw7XG4gICAgdGhpcy5kaXNwYXRjaE1hcmtlciA9IG51bGw7XG4gICAgdGhpcy5uYXRpdmVFdmVudCA9IG51bGw7XG4gIH1cblxufSk7XG5cblN5bnRoZXRpY0V2ZW50LkludGVyZmFjZSA9IEV2ZW50SW50ZXJmYWNlO1xuXG4vKipcbiAqIEhlbHBlciB0byByZWR1Y2UgYm9pbGVycGxhdGUgd2hlbiBjcmVhdGluZyBzdWJjbGFzc2VzLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IENsYXNzXG4gKiBAcGFyYW0gez9vYmplY3R9IEludGVyZmFjZVxuICovXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MgPSBmdW5jdGlvbiAoQ2xhc3MsIEludGVyZmFjZSkge1xuICB2YXIgU3VwZXIgPSB0aGlzO1xuXG4gIHZhciBwcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XG4gIGFzc2lnbihwcm90b3R5cGUsIENsYXNzLnByb3RvdHlwZSk7XG4gIENsYXNzLnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2xhc3M7XG5cbiAgQ2xhc3MuSW50ZXJmYWNlID0gYXNzaWduKHt9LCBTdXBlci5JbnRlcmZhY2UsIEludGVyZmFjZSk7XG4gIENsYXNzLmF1Z21lbnRDbGFzcyA9IFN1cGVyLmF1Z21lbnRDbGFzcztcblxuICBQb29sZWRDbGFzcy5hZGRQb29saW5nVG8oQ2xhc3MsIFBvb2xlZENsYXNzLmZvdXJBcmd1bWVudFBvb2xlcik7XG59O1xuXG5Qb29sZWRDbGFzcy5hZGRQb29saW5nVG8oU3ludGhldGljRXZlbnQsIFBvb2xlZENsYXNzLmZvdXJBcmd1bWVudFBvb2xlcik7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0ZvY3VzRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljVUlFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljVUlFdmVudCcpO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgRm9jdXNFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvXG4gKi9cbnZhciBGb2N1c0V2ZW50SW50ZXJmYWNlID0ge1xuICByZWxhdGVkVGFyZ2V0OiBudWxsXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNGb2N1c0V2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY1VJRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY1VJRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0ZvY3VzRXZlbnQsIEZvY3VzRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0ZvY3VzRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0lucHV0RXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDEzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDEzMTEwNVxuICogICAgICAvI2V2ZW50cy1pbnB1dGV2ZW50c1xuICovXG52YXIgSW5wdXRFdmVudEludGVyZmFjZSA9IHtcbiAgZGF0YTogbnVsbFxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljSW5wdXRFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0lucHV0RXZlbnQsIElucHV0RXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0lucHV0RXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0tleWJvYXJkRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljVUlFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljVUlFdmVudCcpO1xuXG52YXIgZ2V0RXZlbnRDaGFyQ29kZSA9IHJlcXVpcmUoJy4vZ2V0RXZlbnRDaGFyQ29kZScpO1xudmFyIGdldEV2ZW50S2V5ID0gcmVxdWlyZSgnLi9nZXRFdmVudEtleScpO1xudmFyIGdldEV2ZW50TW9kaWZpZXJTdGF0ZSA9IHJlcXVpcmUoJy4vZ2V0RXZlbnRNb2RpZmllclN0YXRlJyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBLZXlib2FyZEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIEtleWJvYXJkRXZlbnRJbnRlcmZhY2UgPSB7XG4gIGtleTogZ2V0RXZlbnRLZXksXG4gIGxvY2F0aW9uOiBudWxsLFxuICBjdHJsS2V5OiBudWxsLFxuICBzaGlmdEtleTogbnVsbCxcbiAgYWx0S2V5OiBudWxsLFxuICBtZXRhS2V5OiBudWxsLFxuICByZXBlYXQ6IG51bGwsXG4gIGxvY2FsZTogbnVsbCxcbiAgZ2V0TW9kaWZpZXJTdGF0ZTogZ2V0RXZlbnRNb2RpZmllclN0YXRlLFxuICAvLyBMZWdhY3kgSW50ZXJmYWNlXG4gIGNoYXJDb2RlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBgY2hhckNvZGVgIGlzIHRoZSByZXN1bHQgb2YgYSBLZXlQcmVzcyBldmVudCBhbmQgcmVwcmVzZW50cyB0aGUgdmFsdWUgb2ZcbiAgICAvLyB0aGUgYWN0dWFsIHByaW50YWJsZSBjaGFyYWN0ZXIuXG5cbiAgICAvLyBLZXlQcmVzcyBpcyBkZXByZWNhdGVkLCBidXQgaXRzIHJlcGxhY2VtZW50IGlzIG5vdCB5ZXQgZmluYWwgYW5kIG5vdFxuICAgIC8vIGltcGxlbWVudGVkIGluIGFueSBtYWpvciBicm93c2VyLiBPbmx5IEtleVByZXNzIGhhcyBjaGFyQ29kZS5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleXByZXNzJykge1xuICAgICAgcmV0dXJuIGdldEV2ZW50Q2hhckNvZGUoZXZlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfSxcbiAga2V5Q29kZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gYGtleUNvZGVgIGlzIHRoZSByZXN1bHQgb2YgYSBLZXlEb3duL1VwIGV2ZW50IGFuZCByZXByZXNlbnRzIHRoZSB2YWx1ZSBvZlxuICAgIC8vIHBoeXNpY2FsIGtleWJvYXJkIGtleS5cblxuICAgIC8vIFRoZSBhY3R1YWwgbWVhbmluZyBvZiB0aGUgdmFsdWUgZGVwZW5kcyBvbiB0aGUgdXNlcnMnIGtleWJvYXJkIGxheW91dFxuICAgIC8vIHdoaWNoIGNhbm5vdCBiZSBkZXRlY3RlZC4gQXNzdW1pbmcgdGhhdCBpdCBpcyBhIFVTIGtleWJvYXJkIGxheW91dFxuICAgIC8vIHByb3ZpZGVzIGEgc3VycHJpc2luZ2x5IGFjY3VyYXRlIG1hcHBpbmcgZm9yIFVTIGFuZCBFdXJvcGVhbiB1c2Vycy5cbiAgICAvLyBEdWUgdG8gdGhpcywgaXQgaXMgbGVmdCB0byB0aGUgdXNlciB0byBpbXBsZW1lbnQgYXQgdGhpcyB0aW1lLlxuICAgIGlmIChldmVudC50eXBlID09PSAna2V5ZG93bicgfHwgZXZlbnQudHlwZSA9PT0gJ2tleXVwJykge1xuICAgICAgcmV0dXJuIGV2ZW50LmtleUNvZGU7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9LFxuICB3aGljaDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gYHdoaWNoYCBpcyBhbiBhbGlhcyBmb3IgZWl0aGVyIGBrZXlDb2RlYCBvciBgY2hhckNvZGVgIGRlcGVuZGluZyBvbiB0aGVcbiAgICAvLyB0eXBlIG9mIHRoZSBldmVudC5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleXByZXNzJykge1xuICAgICAgcmV0dXJuIGdldEV2ZW50Q2hhckNvZGUoZXZlbnQpO1xuICAgIH1cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleWRvd24nIHx8IGV2ZW50LnR5cGUgPT09ICdrZXl1cCcpIHtcbiAgICAgIHJldHVybiBldmVudC5rZXlDb2RlO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljS2V5Ym9hcmRFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNVSUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNVSUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNLZXlib2FyZEV2ZW50LCBLZXlib2FyZEV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNLZXlib2FyZEV2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNNb3VzZUV2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY1VJRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1VJRXZlbnQnKTtcbnZhciBWaWV3cG9ydE1ldHJpY3MgPSByZXF1aXJlKCcuL1ZpZXdwb3J0TWV0cmljcycpO1xuXG52YXIgZ2V0RXZlbnRNb2RpZmllclN0YXRlID0gcmVxdWlyZSgnLi9nZXRFdmVudE1vZGlmaWVyU3RhdGUnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIE1vdXNlRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgTW91c2VFdmVudEludGVyZmFjZSA9IHtcbiAgc2NyZWVuWDogbnVsbCxcbiAgc2NyZWVuWTogbnVsbCxcbiAgY2xpZW50WDogbnVsbCxcbiAgY2xpZW50WTogbnVsbCxcbiAgY3RybEtleTogbnVsbCxcbiAgc2hpZnRLZXk6IG51bGwsXG4gIGFsdEtleTogbnVsbCxcbiAgbWV0YUtleTogbnVsbCxcbiAgZ2V0TW9kaWZpZXJTdGF0ZTogZ2V0RXZlbnRNb2RpZmllclN0YXRlLFxuICBidXR0b246IGZ1bmN0aW9uIChldmVudCkge1xuICAgIC8vIFdlYmtpdCwgRmlyZWZveCwgSUU5K1xuICAgIC8vIHdoaWNoOiAgMSAyIDNcbiAgICAvLyBidXR0b246IDAgMSAyIChzdGFuZGFyZClcbiAgICB2YXIgYnV0dG9uID0gZXZlbnQuYnV0dG9uO1xuICAgIGlmICgnd2hpY2gnIGluIGV2ZW50KSB7XG4gICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cbiAgICAvLyBJRTw5XG4gICAgLy8gd2hpY2g6ICB1bmRlZmluZWRcbiAgICAvLyBidXR0b246IDAgMCAwXG4gICAgLy8gYnV0dG9uOiAxIDQgMiAob25tb3VzZXVwKVxuICAgIHJldHVybiBidXR0b24gPT09IDIgPyAyIDogYnV0dG9uID09PSA0ID8gMSA6IDA7XG4gIH0sXG4gIGJ1dHRvbnM6IG51bGwsXG4gIHJlbGF0ZWRUYXJnZXQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiBldmVudC5yZWxhdGVkVGFyZ2V0IHx8IChldmVudC5mcm9tRWxlbWVudCA9PT0gZXZlbnQuc3JjRWxlbWVudCA/IGV2ZW50LnRvRWxlbWVudCA6IGV2ZW50LmZyb21FbGVtZW50KTtcbiAgfSxcbiAgLy8gXCJQcm9wcmlldGFyeVwiIEludGVyZmFjZS5cbiAgcGFnZVg6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiAncGFnZVgnIGluIGV2ZW50ID8gZXZlbnQucGFnZVggOiBldmVudC5jbGllbnRYICsgVmlld3BvcnRNZXRyaWNzLmN1cnJlbnRTY3JvbGxMZWZ0O1xuICB9LFxuICBwYWdlWTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuICdwYWdlWScgaW4gZXZlbnQgPyBldmVudC5wYWdlWSA6IGV2ZW50LmNsaWVudFkgKyBWaWV3cG9ydE1ldHJpY3MuY3VycmVudFNjcm9sbFRvcDtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljTW91c2VFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNVSUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNVSUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNNb3VzZUV2ZW50LCBNb3VzZUV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNNb3VzZUV2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNUb3VjaEV2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY1VJRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1VJRXZlbnQnKTtcblxudmFyIGdldEV2ZW50TW9kaWZpZXJTdGF0ZSA9IHJlcXVpcmUoJy4vZ2V0RXZlbnRNb2RpZmllclN0YXRlJyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBUb3VjaEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3RvdWNoLWV2ZW50cy9cbiAqL1xudmFyIFRvdWNoRXZlbnRJbnRlcmZhY2UgPSB7XG4gIHRvdWNoZXM6IG51bGwsXG4gIHRhcmdldFRvdWNoZXM6IG51bGwsXG4gIGNoYW5nZWRUb3VjaGVzOiBudWxsLFxuICBhbHRLZXk6IG51bGwsXG4gIG1ldGFLZXk6IG51bGwsXG4gIGN0cmxLZXk6IG51bGwsXG4gIHNoaWZ0S2V5OiBudWxsLFxuICBnZXRNb2RpZmllclN0YXRlOiBnZXRFdmVudE1vZGlmaWVyU3RhdGVcbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY1VJRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY1RvdWNoRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgU3ludGhldGljVUlFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljVUlFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljVG91Y2hFdmVudCwgVG91Y2hFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljVG91Y2hFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljVUlFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxudmFyIGdldEV2ZW50VGFyZ2V0ID0gcmVxdWlyZSgnLi9nZXRFdmVudFRhcmdldCcpO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgVUlFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvXG4gKi9cbnZhciBVSUV2ZW50SW50ZXJmYWNlID0ge1xuICB2aWV3OiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudmlldykge1xuICAgICAgcmV0dXJuIGV2ZW50LnZpZXc7XG4gICAgfVxuXG4gICAgdmFyIHRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGV2ZW50KTtcbiAgICBpZiAodGFyZ2V0ICE9IG51bGwgJiYgdGFyZ2V0LndpbmRvdyA9PT0gdGFyZ2V0KSB7XG4gICAgICAvLyB0YXJnZXQgaXMgYSB3aW5kb3cgb2JqZWN0XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cblxuICAgIHZhciBkb2MgPSB0YXJnZXQub3duZXJEb2N1bWVudDtcbiAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IHdoeSBgb3duZXJEb2N1bWVudGAgaXMgc29tZXRpbWVzIHVuZGVmaW5lZCBpbiBJRTguXG4gICAgaWYgKGRvYykge1xuICAgICAgcmV0dXJuIGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cbiAgfSxcbiAgZGV0YWlsOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQuZGV0YWlsIHx8IDA7XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY0V2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNVSUV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljVUlFdmVudCwgVUlFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljVUlFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljV2hlZWxFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNNb3VzZUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNNb3VzZUV2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBXaGVlbEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIFdoZWVsRXZlbnRJbnRlcmZhY2UgPSB7XG4gIGRlbHRhWDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuICdkZWx0YVgnIGluIGV2ZW50ID8gZXZlbnQuZGVsdGFYIDpcbiAgICAvLyBGYWxsYmFjayB0byBgd2hlZWxEZWx0YVhgIGZvciBXZWJraXQgYW5kIG5vcm1hbGl6ZSAocmlnaHQgaXMgcG9zaXRpdmUpLlxuICAgICd3aGVlbERlbHRhWCcgaW4gZXZlbnQgPyAtZXZlbnQud2hlZWxEZWx0YVggOiAwO1xuICB9LFxuICBkZWx0YVk6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiAnZGVsdGFZJyBpbiBldmVudCA/IGV2ZW50LmRlbHRhWSA6XG4gICAgLy8gRmFsbGJhY2sgdG8gYHdoZWVsRGVsdGFZYCBmb3IgV2Via2l0IGFuZCBub3JtYWxpemUgKGRvd24gaXMgcG9zaXRpdmUpLlxuICAgICd3aGVlbERlbHRhWScgaW4gZXZlbnQgPyAtZXZlbnQud2hlZWxEZWx0YVkgOlxuICAgIC8vIEZhbGxiYWNrIHRvIGB3aGVlbERlbHRhYCBmb3IgSUU8OSBhbmQgbm9ybWFsaXplIChkb3duIGlzIHBvc2l0aXZlKS5cbiAgICAnd2hlZWxEZWx0YScgaW4gZXZlbnQgPyAtZXZlbnQud2hlZWxEZWx0YSA6IDA7XG4gIH0sXG4gIGRlbHRhWjogbnVsbCxcblxuICAvLyBCcm93c2VycyB3aXRob3V0IFwiZGVsdGFNb2RlXCIgaXMgcmVwb3J0aW5nIGluIHJhdyB3aGVlbCBkZWx0YSB3aGVyZSBvbmVcbiAgLy8gbm90Y2ggb24gdGhlIHNjcm9sbCBpcyBhbHdheXMgKy8tIDEyMCwgcm91Z2hseSBlcXVpdmFsZW50IHRvIHBpeGVscy5cbiAgLy8gQSBnb29kIGFwcHJveGltYXRpb24gb2YgRE9NX0RFTFRBX0xJTkUgKDEpIGlzIDUlIG9mIHZpZXdwb3J0IHNpemUgb3JcbiAgLy8gfjQwIHBpeGVscywgZm9yIERPTV9ERUxUQV9TQ1JFRU4gKDIpIGl0IGlzIDg3LjUlIG9mIHZpZXdwb3J0IHNpemUuXG4gIGRlbHRhTW9kZTogbnVsbFxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljTW91c2VFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljV2hlZWxFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNNb3VzZUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNNb3VzZUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNXaGVlbEV2ZW50LCBXaGVlbEV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNXaGVlbEV2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBUcmFuc2FjdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIGBUcmFuc2FjdGlvbmAgY3JlYXRlcyBhIGJsYWNrIGJveCB0aGF0IGlzIGFibGUgdG8gd3JhcCBhbnkgbWV0aG9kIHN1Y2ggdGhhdFxuICogY2VydGFpbiBpbnZhcmlhbnRzIGFyZSBtYWludGFpbmVkIGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIG1ldGhvZCBpcyBpbnZva2VkXG4gKiAoRXZlbiBpZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIHdoaWxlIGludm9raW5nIHRoZSB3cmFwcGVkIG1ldGhvZCkuIFdob2V2ZXJcbiAqIGluc3RhbnRpYXRlcyBhIHRyYW5zYWN0aW9uIGNhbiBwcm92aWRlIGVuZm9yY2VycyBvZiB0aGUgaW52YXJpYW50cyBhdFxuICogY3JlYXRpb24gdGltZS4gVGhlIGBUcmFuc2FjdGlvbmAgY2xhc3MgaXRzZWxmIHdpbGwgc3VwcGx5IG9uZSBhZGRpdGlvbmFsXG4gKiBhdXRvbWF0aWMgaW52YXJpYW50IGZvciB5b3UgLSB0aGUgaW52YXJpYW50IHRoYXQgYW55IHRyYW5zYWN0aW9uIGluc3RhbmNlXG4gKiBzaG91bGQgbm90IGJlIHJ1biB3aGlsZSBpdCBpcyBhbHJlYWR5IGJlaW5nIHJ1bi4gWW91IHdvdWxkIHR5cGljYWxseSBjcmVhdGUgYVxuICogc2luZ2xlIGluc3RhbmNlIG9mIGEgYFRyYW5zYWN0aW9uYCBmb3IgcmV1c2UgbXVsdGlwbGUgdGltZXMsIHRoYXQgcG90ZW50aWFsbHlcbiAqIGlzIHVzZWQgdG8gd3JhcCBzZXZlcmFsIGRpZmZlcmVudCBtZXRob2RzLiBXcmFwcGVycyBhcmUgZXh0cmVtZWx5IHNpbXBsZSAtXG4gKiB0aGV5IG9ubHkgcmVxdWlyZSBpbXBsZW1lbnRpbmcgdHdvIG1ldGhvZHMuXG4gKlxuICogPHByZT5cbiAqICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVycyAoaW5qZWN0ZWQgYXQgY3JlYXRpb24gdGltZSlcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICAgICAgICArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLXwtLS0tLS0tLS0tLS0tLStcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICB2ICAgICAgICB8ICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgICAgICstLS0tLS0tLS0tLS0tLS0rICAgfCAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICArLS18ICAgIHdyYXBwZXIxICAgfC0tLXwtLS0tKyAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgfCAgKy0tLS0tLS0tLS0tLS0tLSsgICB2ICAgIHwgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICAgICAgICAgKy0tLS0tLS0tLS0tLS0rICB8ICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICB8ICAgICArLS0tLXwgICB3cmFwcGVyMiAgfC0tLS0tLS0tKyAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgfCAgICAgfCAgICArLS0tLS0tLS0tLS0tLSsgIHwgICAgIHwgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICAgIHwgICAgICAgICAgICAgICAgICAgICB8ICAgICB8ICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICB2ICAgICB2ICAgICAgICAgICAgICAgICAgICAgdiAgICAgdiAgIHwgd3JhcHBlclxuICogICAgICAgICAgICAgICAgICAgIHwgKy0tLSsgKy0tLSsgICArLS0tLS0tLS0tKyAgICstLS0rICstLS0rIHwgaW52YXJpYW50c1xuICogcGVyZm9ybShhbnlNZXRob2QpIHwgfCAgIHwgfCAgIHwgICB8ICAgICAgICAgfCAgIHwgICB8IHwgICB8IHwgbWFpbnRhaW5lZFxuICogKy0tLS0tLS0tLS0tLS0tLS0tPnwtfC0tLXwtfC0tLXwtLT58YW55TWV0aG9kfC0tLXwtLS18LXwtLS18LXwtLS0tLS0tLT5cbiAqICAgICAgICAgICAgICAgICAgICB8IHwgICB8IHwgICB8ICAgfCAgICAgICAgIHwgICB8ICAgfCB8ICAgfCB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCB8ICAgfCB8ICAgfCAgIHwgICAgICAgICB8ICAgfCAgIHwgfCAgIHwgfFxuICogICAgICAgICAgICAgICAgICAgIHwgfCAgIHwgfCAgIHwgICB8ICAgICAgICAgfCAgIHwgICB8IHwgICB8IHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICstLS0rICstLS0rICAgKy0tLS0tLS0tLSsgICArLS0tKyArLS0tKyB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgaW5pdGlhbGl6ZSAgICAgICAgICAgICAgICAgICAgY2xvc2UgICAgfFxuICogICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAqIDwvcHJlPlxuICpcbiAqIFVzZSBjYXNlczpcbiAqIC0gUHJlc2VydmluZyB0aGUgaW5wdXQgc2VsZWN0aW9uIHJhbmdlcyBiZWZvcmUvYWZ0ZXIgcmVjb25jaWxpYXRpb24uXG4gKiAgIFJlc3RvcmluZyBzZWxlY3Rpb24gZXZlbiBpbiB0aGUgZXZlbnQgb2YgYW4gdW5leHBlY3RlZCBlcnJvci5cbiAqIC0gRGVhY3RpdmF0aW5nIGV2ZW50cyB3aGlsZSByZWFycmFuZ2luZyB0aGUgRE9NLCBwcmV2ZW50aW5nIGJsdXJzL2ZvY3VzZXMsXG4gKiAgIHdoaWxlIGd1YXJhbnRlZWluZyB0aGF0IGFmdGVyd2FyZHMsIHRoZSBldmVudCBzeXN0ZW0gaXMgcmVhY3RpdmF0ZWQuXG4gKiAtIEZsdXNoaW5nIGEgcXVldWUgb2YgY29sbGVjdGVkIERPTSBtdXRhdGlvbnMgdG8gdGhlIG1haW4gVUkgdGhyZWFkIGFmdGVyIGFcbiAqICAgcmVjb25jaWxpYXRpb24gdGFrZXMgcGxhY2UgaW4gYSB3b3JrZXIgdGhyZWFkLlxuICogLSBJbnZva2luZyBhbnkgY29sbGVjdGVkIGBjb21wb25lbnREaWRVcGRhdGVgIGNhbGxiYWNrcyBhZnRlciByZW5kZXJpbmcgbmV3XG4gKiAgIGNvbnRlbnQuXG4gKiAtIChGdXR1cmUgdXNlIGNhc2UpOiBXcmFwcGluZyBwYXJ0aWN1bGFyIGZsdXNoZXMgb2YgdGhlIGBSZWFjdFdvcmtlcmAgcXVldWVcbiAqICAgdG8gcHJlc2VydmUgdGhlIGBzY3JvbGxUb3BgIChhbiBhdXRvbWF0aWMgc2Nyb2xsIGF3YXJlIERPTSkuXG4gKiAtIChGdXR1cmUgdXNlIGNhc2UpOiBMYXlvdXQgY2FsY3VsYXRpb25zIGJlZm9yZSBhbmQgYWZ0ZXIgRE9NIHVwZGF0ZXMuXG4gKlxuICogVHJhbnNhY3Rpb25hbCBwbHVnaW4gQVBJOlxuICogLSBBIG1vZHVsZSB0aGF0IGhhcyBhbiBgaW5pdGlhbGl6ZWAgbWV0aG9kIHRoYXQgcmV0dXJucyBhbnkgcHJlY29tcHV0YXRpb24uXG4gKiAtIGFuZCBhIGBjbG9zZWAgbWV0aG9kIHRoYXQgYWNjZXB0cyB0aGUgcHJlY29tcHV0YXRpb24uIGBjbG9zZWAgaXMgaW52b2tlZFxuICogICB3aGVuIHRoZSB3cmFwcGVkIHByb2Nlc3MgaXMgY29tcGxldGVkLCBvciBoYXMgZmFpbGVkLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8VHJhbnNhY3Rpb25hbFdyYXBwZXI+fSB0cmFuc2FjdGlvbldyYXBwZXIgV3JhcHBlciBtb2R1bGVzXG4gKiB0aGF0IGltcGxlbWVudCBgaW5pdGlhbGl6ZWAgYW5kIGBjbG9zZWAuXG4gKiBAcmV0dXJuIHtUcmFuc2FjdGlvbn0gU2luZ2xlIHRyYW5zYWN0aW9uIGZvciByZXVzZSBpbiB0aHJlYWQuXG4gKlxuICogQGNsYXNzIFRyYW5zYWN0aW9uXG4gKi9cbnZhciBNaXhpbiA9IHtcbiAgLyoqXG4gICAqIFNldHMgdXAgdGhpcyBpbnN0YW5jZSBzbyB0aGF0IGl0IGlzIHByZXBhcmVkIGZvciBjb2xsZWN0aW5nIG1ldHJpY3MuIERvZXNcbiAgICogc28gc3VjaCB0aGF0IHRoaXMgc2V0dXAgbWV0aG9kIG1heSBiZSB1c2VkIG9uIGFuIGluc3RhbmNlIHRoYXQgaXMgYWxyZWFkeVxuICAgKiBpbml0aWFsaXplZCwgaW4gYSB3YXkgdGhhdCBkb2VzIG5vdCBjb25zdW1lIGFkZGl0aW9uYWwgbWVtb3J5IHVwb24gcmV1c2UuXG4gICAqIFRoYXQgY2FuIGJlIHVzZWZ1bCBpZiB5b3UgZGVjaWRlIHRvIG1ha2UgeW91ciBzdWJjbGFzcyBvZiB0aGlzIG1peGluIGFcbiAgICogXCJQb29sZWRDbGFzc1wiLlxuICAgKi9cbiAgcmVpbml0aWFsaXplVHJhbnNhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnRyYW5zYWN0aW9uV3JhcHBlcnMgPSB0aGlzLmdldFRyYW5zYWN0aW9uV3JhcHBlcnMoKTtcbiAgICBpZiAodGhpcy53cmFwcGVySW5pdERhdGEpIHtcbiAgICAgIHRoaXMud3JhcHBlckluaXREYXRhLmxlbmd0aCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud3JhcHBlckluaXREYXRhID0gW107XG4gICAgfVxuICAgIHRoaXMuX2lzSW5UcmFuc2FjdGlvbiA9IGZhbHNlO1xuICB9LFxuXG4gIF9pc0luVHJhbnNhY3Rpb246IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7QXJyYXk8VHJhbnNhY3Rpb25XcmFwcGVyPn0gQXJyYXkgb2YgdHJhbnNhY3Rpb24gd3JhcHBlcnMuXG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBudWxsLFxuXG4gIGlzSW5UcmFuc2FjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAhIXRoaXMuX2lzSW5UcmFuc2FjdGlvbjtcbiAgfSxcblxuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIGZ1bmN0aW9uIHdpdGhpbiBhIHNhZmV0eSB3aW5kb3cuIFVzZSB0aGlzIGZvciB0aGUgdG9wIGxldmVsXG4gICAqIG1ldGhvZHMgdGhhdCByZXN1bHQgaW4gbGFyZ2UgYW1vdW50cyBvZiBjb21wdXRhdGlvbi9tdXRhdGlvbnMgdGhhdCB3b3VsZFxuICAgKiBuZWVkIHRvIGJlIHNhZmV0eSBjaGVja2VkLiBUaGUgb3B0aW9uYWwgYXJndW1lbnRzIGhlbHBzIHByZXZlbnQgdGhlIG5lZWRcbiAgICogdG8gYmluZCBpbiBtYW55IGNhc2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtZXRob2QgTWVtYmVyIG9mIHNjb3BlIHRvIGNhbGwuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZSBTY29wZSB0byBpbnZva2UgZnJvbS5cbiAgICogQHBhcmFtIHtPYmplY3Q/PX0gYSBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG4gICAqIEBwYXJhbSB7T2JqZWN0Pz19IGIgQXJndW1lbnQgdG8gcGFzcyB0byB0aGUgbWV0aG9kLlxuICAgKiBAcGFyYW0ge09iamVjdD89fSBjIEFyZ3VtZW50IHRvIHBhc3MgdG8gdGhlIG1ldGhvZC5cbiAgICogQHBhcmFtIHtPYmplY3Q/PX0gZCBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG4gICAqIEBwYXJhbSB7T2JqZWN0Pz19IGUgQXJndW1lbnQgdG8gcGFzcyB0byB0aGUgbWV0aG9kLlxuICAgKiBAcGFyYW0ge09iamVjdD89fSBmIEFyZ3VtZW50IHRvIHBhc3MgdG8gdGhlIG1ldGhvZC5cbiAgICpcbiAgICogQHJldHVybiB7Kn0gUmV0dXJuIHZhbHVlIGZyb20gYG1ldGhvZGAuXG4gICAqL1xuICBwZXJmb3JtOiBmdW5jdGlvbiAobWV0aG9kLCBzY29wZSwgYSwgYiwgYywgZCwgZSwgZikge1xuICAgICEhdGhpcy5pc0luVHJhbnNhY3Rpb24oKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUcmFuc2FjdGlvbi5wZXJmb3JtKC4uLik6IENhbm5vdCBpbml0aWFsaXplIGEgdHJhbnNhY3Rpb24gd2hlbiB0aGVyZSAnICsgJ2lzIGFscmVhZHkgYW4gb3V0c3RhbmRpbmcgdHJhbnNhY3Rpb24uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHZhciBlcnJvclRocm93bjtcbiAgICB2YXIgcmV0O1xuICAgIHRyeSB7XG4gICAgICB0aGlzLl9pc0luVHJhbnNhY3Rpb24gPSB0cnVlO1xuICAgICAgLy8gQ2F0Y2hpbmcgZXJyb3JzIG1ha2VzIGRlYnVnZ2luZyBtb3JlIGRpZmZpY3VsdCwgc28gd2Ugc3RhcnQgd2l0aFxuICAgICAgLy8gZXJyb3JUaHJvd24gc2V0IHRvIHRydWUgYmVmb3JlIHNldHRpbmcgaXQgdG8gZmFsc2UgYWZ0ZXIgY2FsbGluZ1xuICAgICAgLy8gY2xvc2UgLS0gaWYgaXQncyBzdGlsbCBzZXQgdG8gdHJ1ZSBpbiB0aGUgZmluYWxseSBibG9jaywgaXQgbWVhbnNcbiAgICAgIC8vIG9uZSBvZiB0aGVzZSBjYWxscyB0aHJldy5cbiAgICAgIGVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZUFsbCgwKTtcbiAgICAgIHJldCA9IG1ldGhvZC5jYWxsKHNjb3BlLCBhLCBiLCBjLCBkLCBlLCBmKTtcbiAgICAgIGVycm9yVGhyb3duID0gZmFsc2U7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChlcnJvclRocm93bikge1xuICAgICAgICAgIC8vIElmIGBtZXRob2RgIHRocm93cywgcHJlZmVyIHRvIHNob3cgdGhhdCBzdGFjayB0cmFjZSBvdmVyIGFueSB0aHJvd25cbiAgICAgICAgICAvLyBieSBpbnZva2luZyBgY2xvc2VBbGxgLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlQWxsKDApO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge31cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTaW5jZSBgbWV0aG9kYCBkaWRuJ3QgdGhyb3csIHdlIGRvbid0IHdhbnQgdG8gc2lsZW5jZSB0aGUgZXhjZXB0aW9uXG4gICAgICAgICAgLy8gaGVyZS5cbiAgICAgICAgICB0aGlzLmNsb3NlQWxsKDApO1xuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0aGlzLl9pc0luVHJhbnNhY3Rpb24gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfSxcblxuICBpbml0aWFsaXplQWxsOiBmdW5jdGlvbiAoc3RhcnRJbmRleCkge1xuICAgIHZhciB0cmFuc2FjdGlvbldyYXBwZXJzID0gdGhpcy50cmFuc2FjdGlvbldyYXBwZXJzO1xuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgdHJhbnNhY3Rpb25XcmFwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHdyYXBwZXIgPSB0cmFuc2FjdGlvbldyYXBwZXJzW2ldO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ2F0Y2hpbmcgZXJyb3JzIG1ha2VzIGRlYnVnZ2luZyBtb3JlIGRpZmZpY3VsdCwgc28gd2Ugc3RhcnQgd2l0aCB0aGVcbiAgICAgICAgLy8gT0JTRVJWRURfRVJST1Igc3RhdGUgYmVmb3JlIG92ZXJ3cml0aW5nIGl0IHdpdGggdGhlIHJlYWwgcmV0dXJuIHZhbHVlXG4gICAgICAgIC8vIG9mIGluaXRpYWxpemUgLS0gaWYgaXQncyBzdGlsbCBzZXQgdG8gT0JTRVJWRURfRVJST1IgaW4gdGhlIGZpbmFsbHlcbiAgICAgICAgLy8gYmxvY2ssIGl0IG1lYW5zIHdyYXBwZXIuaW5pdGlhbGl6ZSB0aHJldy5cbiAgICAgICAgdGhpcy53cmFwcGVySW5pdERhdGFbaV0gPSBUcmFuc2FjdGlvbi5PQlNFUlZFRF9FUlJPUjtcbiAgICAgICAgdGhpcy53cmFwcGVySW5pdERhdGFbaV0gPSB3cmFwcGVyLmluaXRpYWxpemUgPyB3cmFwcGVyLmluaXRpYWxpemUuY2FsbCh0aGlzKSA6IG51bGw7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAodGhpcy53cmFwcGVySW5pdERhdGFbaV0gPT09IFRyYW5zYWN0aW9uLk9CU0VSVkVEX0VSUk9SKSB7XG4gICAgICAgICAgLy8gVGhlIGluaXRpYWxpemVyIGZvciB3cmFwcGVyIGkgdGhyZXcgYW4gZXJyb3I7IGluaXRpYWxpemUgdGhlXG4gICAgICAgICAgLy8gcmVtYWluaW5nIHdyYXBwZXJzIGJ1dCBzaWxlbmNlIGFueSBleGNlcHRpb25zIGZyb20gdGhlbSB0byBlbnN1cmVcbiAgICAgICAgICAvLyB0aGF0IHRoZSBmaXJzdCBlcnJvciBpcyB0aGUgb25lIHRvIGJ1YmJsZSB1cC5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQWxsKGkgKyAxKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHt9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEludm9rZXMgZWFjaCBvZiBgdGhpcy50cmFuc2FjdGlvbldyYXBwZXJzLmNsb3NlW2ldYCBmdW5jdGlvbnMsIHBhc3NpbmcgaW50b1xuICAgKiB0aGVtIHRoZSByZXNwZWN0aXZlIHJldHVybiB2YWx1ZXMgb2YgYHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycy5pbml0W2ldYFxuICAgKiAoYGNsb3NlYHJzIHRoYXQgY29ycmVzcG9uZCB0byBpbml0aWFsaXplcnMgdGhhdCBmYWlsZWQgd2lsbCBub3QgYmVcbiAgICogaW52b2tlZCkuXG4gICAqL1xuICBjbG9zZUFsbDogZnVuY3Rpb24gKHN0YXJ0SW5kZXgpIHtcbiAgICAhdGhpcy5pc0luVHJhbnNhY3Rpb24oKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUcmFuc2FjdGlvbi5jbG9zZUFsbCgpOiBDYW5ub3QgY2xvc2UgdHJhbnNhY3Rpb24gd2hlbiBub25lIGFyZSBvcGVuLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgdHJhbnNhY3Rpb25XcmFwcGVycyA9IHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycztcbiAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSA8IHRyYW5zYWN0aW9uV3JhcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB3cmFwcGVyID0gdHJhbnNhY3Rpb25XcmFwcGVyc1tpXTtcbiAgICAgIHZhciBpbml0RGF0YSA9IHRoaXMud3JhcHBlckluaXREYXRhW2ldO1xuICAgICAgdmFyIGVycm9yVGhyb3duO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ2F0Y2hpbmcgZXJyb3JzIG1ha2VzIGRlYnVnZ2luZyBtb3JlIGRpZmZpY3VsdCwgc28gd2Ugc3RhcnQgd2l0aFxuICAgICAgICAvLyBlcnJvclRocm93biBzZXQgdG8gdHJ1ZSBiZWZvcmUgc2V0dGluZyBpdCB0byBmYWxzZSBhZnRlciBjYWxsaW5nXG4gICAgICAgIC8vIGNsb3NlIC0tIGlmIGl0J3Mgc3RpbGwgc2V0IHRvIHRydWUgaW4gdGhlIGZpbmFsbHkgYmxvY2ssIGl0IG1lYW5zXG4gICAgICAgIC8vIHdyYXBwZXIuY2xvc2UgdGhyZXcuXG4gICAgICAgIGVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgaWYgKGluaXREYXRhICE9PSBUcmFuc2FjdGlvbi5PQlNFUlZFRF9FUlJPUiAmJiB3cmFwcGVyLmNsb3NlKSB7XG4gICAgICAgICAgd3JhcHBlci5jbG9zZS5jYWxsKHRoaXMsIGluaXREYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgLy8gVGhlIGNsb3NlciBmb3Igd3JhcHBlciBpIHRocmV3IGFuIGVycm9yOyBjbG9zZSB0aGUgcmVtYWluaW5nXG4gICAgICAgICAgLy8gd3JhcHBlcnMgYnV0IHNpbGVuY2UgYW55IGV4Y2VwdGlvbnMgZnJvbSB0aGVtIHRvIGVuc3VyZSB0aGF0IHRoZVxuICAgICAgICAgIC8vIGZpcnN0IGVycm9yIGlzIHRoZSBvbmUgdG8gYnViYmxlIHVwLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlQWxsKGkgKyAxKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMud3JhcHBlckluaXREYXRhLmxlbmd0aCA9IDA7XG4gIH1cbn07XG5cbnZhciBUcmFuc2FjdGlvbiA9IHtcblxuICBNaXhpbjogTWl4aW4sXG5cbiAgLyoqXG4gICAqIFRva2VuIHRvIGxvb2sgZm9yIHRvIGRldGVybWluZSBpZiBhbiBlcnJvciBvY2N1cnJlZC5cbiAgICovXG4gIE9CU0VSVkVEX0VSUk9SOiB7fVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYW5zYWN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBWaWV3cG9ydE1ldHJpY3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBWaWV3cG9ydE1ldHJpY3MgPSB7XG5cbiAgY3VycmVudFNjcm9sbExlZnQ6IDAsXG5cbiAgY3VycmVudFNjcm9sbFRvcDogMCxcblxuICByZWZyZXNoU2Nyb2xsVmFsdWVzOiBmdW5jdGlvbiAoc2Nyb2xsUG9zaXRpb24pIHtcbiAgICBWaWV3cG9ydE1ldHJpY3MuY3VycmVudFNjcm9sbExlZnQgPSBzY3JvbGxQb3NpdGlvbi54O1xuICAgIFZpZXdwb3J0TWV0cmljcy5jdXJyZW50U2Nyb2xsVG9wID0gc2Nyb2xsUG9zaXRpb24ueTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZpZXdwb3J0TWV0cmljczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgYWNjdW11bGF0ZUludG9cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKlxuICogQWNjdW11bGF0ZXMgaXRlbXMgdGhhdCBtdXN0IG5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCBpbnRvIHRoZSBmaXJzdCBvbmUuIFRoaXNcbiAqIGlzIHVzZWQgdG8gY29uc2VydmUgbWVtb3J5IGJ5IGF2b2lkaW5nIGFycmF5IGFsbG9jYXRpb25zLCBhbmQgdGh1cyBzYWNyaWZpY2VzXG4gKiBBUEkgY2xlYW5uZXNzLiBTaW5jZSBgY3VycmVudGAgY2FuIGJlIG51bGwgYmVmb3JlIGJlaW5nIHBhc3NlZCBpbiBhbmQgbm90XG4gKiBudWxsIGFmdGVyIHRoaXMgZnVuY3Rpb24sIG1ha2Ugc3VyZSB0byBhc3NpZ24gaXQgYmFjayB0byBgY3VycmVudGA6XG4gKlxuICogYGEgPSBhY2N1bXVsYXRlSW50byhhLCBiKTtgXG4gKlxuICogVGhpcyBBUEkgc2hvdWxkIGJlIHNwYXJpbmdseSB1c2VkLiBUcnkgYGFjY3VtdWxhdGVgIGZvciBzb21ldGhpbmcgY2xlYW5lci5cbiAqXG4gKiBAcmV0dXJuIHsqfGFycmF5PCo+fSBBbiBhY2N1bXVsYXRpb24gb2YgaXRlbXMuXG4gKi9cblxuZnVuY3Rpb24gYWNjdW11bGF0ZUludG8oY3VycmVudCwgbmV4dCkge1xuICAhKG5leHQgIT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnYWNjdW11bGF0ZUludG8oLi4uKTogQWNjdW11bGF0ZWQgaXRlbXMgbXVzdCBub3QgYmUgbnVsbCBvciB1bmRlZmluZWQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG5leHQ7XG4gIH1cblxuICAvLyBCb3RoIGFyZSBub3QgZW1wdHkuIFdhcm5pbmc6IE5ldmVyIGNhbGwgeC5jb25jYXQoeSkgd2hlbiB5b3UgYXJlIG5vdFxuICAvLyBjZXJ0YWluIHRoYXQgeCBpcyBhbiBBcnJheSAoeCBjb3VsZCBiZSBhIHN0cmluZyB3aXRoIGNvbmNhdCBtZXRob2QpLlxuICB2YXIgY3VycmVudElzQXJyYXkgPSBBcnJheS5pc0FycmF5KGN1cnJlbnQpO1xuICB2YXIgbmV4dElzQXJyYXkgPSBBcnJheS5pc0FycmF5KG5leHQpO1xuXG4gIGlmIChjdXJyZW50SXNBcnJheSAmJiBuZXh0SXNBcnJheSkge1xuICAgIGN1cnJlbnQucHVzaC5hcHBseShjdXJyZW50LCBuZXh0KTtcbiAgICByZXR1cm4gY3VycmVudDtcbiAgfVxuXG4gIGlmIChjdXJyZW50SXNBcnJheSkge1xuICAgIGN1cnJlbnQucHVzaChuZXh0KTtcbiAgICByZXR1cm4gY3VycmVudDtcbiAgfVxuXG4gIGlmIChuZXh0SXNBcnJheSkge1xuICAgIC8vIEEgYml0IHRvbyBkYW5nZXJvdXMgdG8gbXV0YXRlIGBuZXh0YC5cbiAgICByZXR1cm4gW2N1cnJlbnRdLmNvbmNhdChuZXh0KTtcbiAgfVxuXG4gIHJldHVybiBbY3VycmVudCwgbmV4dF07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYWNjdW11bGF0ZUludG87IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGFkbGVyMzJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBNT0QgPSA2NTUyMTtcblxuLy8gYWRsZXIzMiBpcyBub3QgY3J5cHRvZ3JhcGhpY2FsbHkgc3Ryb25nLCBhbmQgaXMgb25seSB1c2VkIHRvIHNhbml0eSBjaGVjayB0aGF0XG4vLyBtYXJrdXAgZ2VuZXJhdGVkIG9uIHRoZSBzZXJ2ZXIgbWF0Y2hlcyB0aGUgbWFya3VwIGdlbmVyYXRlZCBvbiB0aGUgY2xpZW50LlxuLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiAoYSBtb2RpZmllZCB2ZXJzaW9uIG9mIHRoZSBTaGVldEpTIHZlcnNpb24pIGhhcyBiZWVuIG9wdGltaXplZFxuLy8gZm9yIG91ciB1c2UgY2FzZSwgYXQgdGhlIGV4cGVuc2Ugb2YgY29uZm9ybWluZyB0byB0aGUgYWRsZXIzMiBzcGVjaWZpY2F0aW9uXG4vLyBmb3Igbm9uLWFzY2lpIGlucHV0cy5cbmZ1bmN0aW9uIGFkbGVyMzIoZGF0YSkge1xuICB2YXIgYSA9IDE7XG4gIHZhciBiID0gMDtcbiAgdmFyIGkgPSAwO1xuICB2YXIgbCA9IGRhdGEubGVuZ3RoO1xuICB2YXIgbSA9IGwgJiB+MHgzO1xuICB3aGlsZSAoaSA8IG0pIHtcbiAgICBmb3IgKDsgaSA8IE1hdGgubWluKGkgKyA0MDk2LCBtKTsgaSArPSA0KSB7XG4gICAgICBiICs9IChhICs9IGRhdGEuY2hhckNvZGVBdChpKSkgKyAoYSArPSBkYXRhLmNoYXJDb2RlQXQoaSArIDEpKSArIChhICs9IGRhdGEuY2hhckNvZGVBdChpICsgMikpICsgKGEgKz0gZGF0YS5jaGFyQ29kZUF0KGkgKyAzKSk7XG4gICAgfVxuICAgIGEgJT0gTU9EO1xuICAgIGIgJT0gTU9EO1xuICB9XG4gIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgYiArPSBhICs9IGRhdGEuY2hhckNvZGVBdChpKTtcbiAgfVxuICBhICU9IE1PRDtcbiAgYiAlPSBNT0Q7XG4gIHJldHVybiBhIHwgYiA8PCAxNjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhZGxlcjMyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBjYW5EZWZpbmVQcm9wZXJ0eVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGNhbkRlZmluZVByb3BlcnR5ID0gZmFsc2U7XG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICB0cnkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3gnLCB7IGdldDogZnVuY3Rpb24gKCkge30gfSk7XG4gICAgY2FuRGVmaW5lUHJvcGVydHkgPSB0cnVlO1xuICB9IGNhdGNoICh4KSB7XG4gICAgLy8gSUUgd2lsbCBmYWlsIG9uIGRlZmluZVByb3BlcnR5XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjYW5EZWZpbmVQcm9wZXJ0eTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZGFuZ2Vyb3VzU3R5bGVWYWx1ZVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBDU1NQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vQ1NTUHJvcGVydHknKTtcblxudmFyIGlzVW5pdGxlc3NOdW1iZXIgPSBDU1NQcm9wZXJ0eS5pc1VuaXRsZXNzTnVtYmVyO1xuXG4vKipcbiAqIENvbnZlcnQgYSB2YWx1ZSBpbnRvIHRoZSBwcm9wZXIgY3NzIHdyaXRhYmxlIHZhbHVlLiBUaGUgc3R5bGUgbmFtZSBgbmFtZWBcbiAqIHNob3VsZCBiZSBsb2dpY2FsIChubyBoeXBoZW5zKSwgYXMgc3BlY2lmaWVkXG4gKiBpbiBgQ1NTUHJvcGVydHkuaXNVbml0bGVzc051bWJlcmAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQ1NTIHByb3BlcnR5IG5hbWUgc3VjaCBhcyBgdG9wTWFyZ2luYC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgQ1NTIHByb3BlcnR5IHZhbHVlIHN1Y2ggYXMgYDEwcHhgLlxuICogQHJldHVybiB7c3RyaW5nfSBOb3JtYWxpemVkIHN0eWxlIHZhbHVlIHdpdGggZGltZW5zaW9ucyBhcHBsaWVkLlxuICovXG5mdW5jdGlvbiBkYW5nZXJvdXNTdHlsZVZhbHVlKG5hbWUsIHZhbHVlKSB7XG4gIC8vIE5vdGUgdGhhdCB3ZSd2ZSByZW1vdmVkIGVzY2FwZVRleHRGb3JCcm93c2VyKCkgY2FsbHMgaGVyZSBzaW5jZSB0aGVcbiAgLy8gd2hvbGUgc3RyaW5nIHdpbGwgYmUgZXNjYXBlZCB3aGVuIHRoZSBhdHRyaWJ1dGUgaXMgaW5qZWN0ZWQgaW50b1xuICAvLyB0aGUgbWFya3VwLiBJZiB5b3UgcHJvdmlkZSB1bnNhZmUgdXNlciBkYXRhIGhlcmUgdGhleSBjYW4gaW5qZWN0XG4gIC8vIGFyYml0cmFyeSBDU1Mgd2hpY2ggbWF5IGJlIHByb2JsZW1hdGljIChJIGNvdWxkbid0IHJlcHJvIHRoaXMpOlxuICAvLyBodHRwczovL3d3dy5vd2FzcC5vcmcvaW5kZXgucGhwL1hTU19GaWx0ZXJfRXZhc2lvbl9DaGVhdF9TaGVldFxuICAvLyBodHRwOi8vd3d3LnRoZXNwYW5uZXIuY28udWsvMjAwNy8xMS8yNi91bHRpbWF0ZS14c3MtY3NzLWluamVjdGlvbi9cbiAgLy8gVGhpcyBpcyBub3QgYW4gWFNTIGhvbGUgYnV0IGluc3RlYWQgYSBwb3RlbnRpYWwgQ1NTIGluamVjdGlvbiBpc3N1ZVxuICAvLyB3aGljaCBoYXMgbGVhZCB0byBhIGdyZWF0ZXIgZGlzY3Vzc2lvbiBhYm91dCBob3cgd2UncmUgZ29pbmcgdG9cbiAgLy8gdHJ1c3QgVVJMcyBtb3ZpbmcgZm9yd2FyZC4gU2VlICMyMTE1OTAxXG5cbiAgdmFyIGlzRW1wdHkgPSB2YWx1ZSA9PSBudWxsIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nIHx8IHZhbHVlID09PSAnJztcbiAgaWYgKGlzRW1wdHkpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICB2YXIgaXNOb25OdW1lcmljID0gaXNOYU4odmFsdWUpO1xuICBpZiAoaXNOb25OdW1lcmljIHx8IHZhbHVlID09PSAwIHx8IGlzVW5pdGxlc3NOdW1iZXIuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgaXNVbml0bGVzc051bWJlcltuYW1lXSkge1xuICAgIHJldHVybiAnJyArIHZhbHVlOyAvLyBjYXN0IHRvIHN0cmluZ1xuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgfVxuICByZXR1cm4gdmFsdWUgKyAncHgnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRhbmdlcm91c1N0eWxlVmFsdWU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGRlcHJlY2F0ZWRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG4vKipcbiAqIFRoaXMgd2lsbCBsb2cgYSBzaW5nbGUgZGVwcmVjYXRpb24gbm90aWNlIHBlciBmdW5jdGlvbiBhbmQgZm9yd2FyZCB0aGUgY2FsbFxuICogb24gdG8gdGhlIG5ldyBBUEkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGZuTmFtZSBUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBuZXdNb2R1bGUgVGhlIG1vZHVsZSB0aGF0IGZuIHdpbGwgZXhpc3QgaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuZXdQYWNrYWdlIFRoZSBtb2R1bGUgdGhhdCBmbiB3aWxsIGV4aXN0IGluXG4gKiBAcGFyYW0geyp9IGN0eCBUaGUgY29udGV4dCB0aGlzIGZvcndhcmRlZCBjYWxsIHNob3VsZCBydW4gaW5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBmb3J3YXJkIG9uIHRvXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCB3YXJuIG9uY2UgYW5kIHRoZW4gY2FsbCBmblxuICovXG5mdW5jdGlvbiBkZXByZWNhdGVkKGZuTmFtZSwgbmV3TW9kdWxlLCBuZXdQYWNrYWdlLCBjdHgsIGZuKSB7XG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YXIgbmV3Rm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh3YXJuZWQsXG4gICAgICAvLyBSZXF1aXJlIGV4YW1wbGVzIGluIHRoaXMgc3RyaW5nIG11c3QgYmUgc3BsaXQgdG8gcHJldmVudCBSZWFjdCdzXG4gICAgICAvLyBidWlsZCB0b29scyBmcm9tIG1pc3Rha2luZyB0aGVtIGZvciByZWFsIHJlcXVpcmVzLlxuICAgICAgLy8gT3RoZXJ3aXNlIHRoZSBidWlsZCB0b29scyB3aWxsIGF0dGVtcHQgdG8gYnVpbGQgYSAnJXMnIG1vZHVsZS5cbiAgICAgICdSZWFjdC4lcyBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICVzLiVzIGZyb20gcmVxdWlyZScgKyAnKFxcJyVzXFwnKSAnICsgJ2luc3RlYWQuJywgZm5OYW1lLCBuZXdNb2R1bGUsIGZuTmFtZSwgbmV3UGFja2FnZSkgOiB1bmRlZmluZWQ7XG4gICAgICB3YXJuZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKTtcbiAgICB9O1xuICAgIC8vIFdlIG5lZWQgdG8gbWFrZSBzdXJlIGFsbCBwcm9wZXJ0aWVzIG9mIHRoZSBvcmlnaW5hbCBmbiBhcmUgY29waWVkIG92ZXIuXG4gICAgLy8gSW4gcGFydGljdWxhciwgdGhpcyBpcyBuZWVkZWQgdG8gc3VwcG9ydCBQcm9wVHlwZXNcbiAgICByZXR1cm4gYXNzaWduKG5ld0ZuLCBmbik7XG4gIH1cblxuICByZXR1cm4gZm47XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVwcmVjYXRlZDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRVNDQVBFX0xPT0tVUCA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJzwnOiAnJmx0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICAnXFwnJzogJyYjeDI3Oydcbn07XG5cbnZhciBFU0NBUEVfUkVHRVggPSAvWyY+PFwiJ10vZztcblxuZnVuY3Rpb24gZXNjYXBlcihtYXRjaCkge1xuICByZXR1cm4gRVNDQVBFX0xPT0tVUFttYXRjaF07XG59XG5cbi8qKlxuICogRXNjYXBlcyB0ZXh0IHRvIHByZXZlbnQgc2NyaXB0aW5nIGF0dGFja3MuXG4gKlxuICogQHBhcmFtIHsqfSB0ZXh0IFRleHQgdmFsdWUgdG8gZXNjYXBlLlxuICogQHJldHVybiB7c3RyaW5nfSBBbiBlc2NhcGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKHRleHQpIHtcbiAgcmV0dXJuICgnJyArIHRleHQpLnJlcGxhY2UoRVNDQVBFX1JFR0VYLCBlc2NhcGVyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGZpbmRET01Ob2RlXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0SW5zdGFuY2VNYXAgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VNYXAnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIERPTSBub2RlIHJlbmRlcmVkIGJ5IHRoaXMgZWxlbWVudC5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fERPTUVsZW1lbnR9IGNvbXBvbmVudE9yRWxlbWVudFxuICogQHJldHVybiB7P0RPTUVsZW1lbnR9IFRoZSByb290IG5vZGUgb2YgdGhpcyBlbGVtZW50LlxuICovXG5mdW5jdGlvbiBmaW5kRE9NTm9kZShjb21wb25lbnRPckVsZW1lbnQpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YXIgb3duZXIgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50O1xuICAgIGlmIChvd25lciAhPT0gbnVsbCkge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcob3duZXIuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyLCAnJXMgaXMgYWNjZXNzaW5nIGdldERPTU5vZGUgb3IgZmluZERPTU5vZGUgaW5zaWRlIGl0cyByZW5kZXIoKS4gJyArICdyZW5kZXIoKSBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uIG9mIHByb3BzIGFuZCBzdGF0ZS4gSXQgc2hvdWxkICcgKyAnbmV2ZXIgYWNjZXNzIHNvbWV0aGluZyB0aGF0IHJlcXVpcmVzIHN0YWxlIGRhdGEgZnJvbSB0aGUgcHJldmlvdXMgJyArICdyZW5kZXIsIHN1Y2ggYXMgcmVmcy4gTW92ZSB0aGlzIGxvZ2ljIHRvIGNvbXBvbmVudERpZE1vdW50IGFuZCAnICsgJ2NvbXBvbmVudERpZFVwZGF0ZSBpbnN0ZWFkLicsIG93bmVyLmdldE5hbWUoKSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIG93bmVyLl93YXJuZWRBYm91dFJlZnNJblJlbmRlciA9IHRydWU7XG4gICAgfVxuICB9XG4gIGlmIChjb21wb25lbnRPckVsZW1lbnQgPT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChjb21wb25lbnRPckVsZW1lbnQubm9kZVR5cGUgPT09IDEpIHtcbiAgICByZXR1cm4gY29tcG9uZW50T3JFbGVtZW50O1xuICB9XG4gIGlmIChSZWFjdEluc3RhbmNlTWFwLmhhcyhjb21wb25lbnRPckVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIFJlYWN0TW91bnQuZ2V0Tm9kZUZyb21JbnN0YW5jZShjb21wb25lbnRPckVsZW1lbnQpO1xuICB9XG4gICEoY29tcG9uZW50T3JFbGVtZW50LnJlbmRlciA9PSBudWxsIHx8IHR5cGVvZiBjb21wb25lbnRPckVsZW1lbnQucmVuZGVyICE9PSAnZnVuY3Rpb24nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdmaW5kRE9NTm9kZSB3YXMgY2FsbGVkIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAhZmFsc2UgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRWxlbWVudCBhcHBlYXJzIHRvIGJlIG5laXRoZXIgUmVhY3RDb21wb25lbnQgbm9yIERPTU5vZGUgKGtleXM6ICVzKScsIE9iamVjdC5rZXlzKGNvbXBvbmVudE9yRWxlbWVudCkpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmaW5kRE9NTm9kZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZmxhdHRlbkNoaWxkcmVuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdHJhdmVyc2VBbGxDaGlsZHJlbiA9IHJlcXVpcmUoJy4vdHJhdmVyc2VBbGxDaGlsZHJlbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHJhdmVyc2VDb250ZXh0IENvbnRleHQgcGFzc2VkIHRocm91Z2ggdHJhdmVyc2FsLlxuICogQHBhcmFtIHs/UmVhY3RDb21wb25lbnR9IGNoaWxkIFJlYWN0IGNoaWxkIGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7IXN0cmluZ30gbmFtZSBTdHJpbmcgbmFtZSBvZiBrZXkgcGF0aCB0byBjaGlsZC5cbiAqL1xuZnVuY3Rpb24gZmxhdHRlblNpbmdsZUNoaWxkSW50b0NvbnRleHQodHJhdmVyc2VDb250ZXh0LCBjaGlsZCwgbmFtZSkge1xuICAvLyBXZSBmb3VuZCBhIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAgdmFyIHJlc3VsdCA9IHRyYXZlcnNlQ29udGV4dDtcbiAgdmFyIGtleVVuaXF1ZSA9IHJlc3VsdFtuYW1lXSA9PT0gdW5kZWZpbmVkO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGtleVVuaXF1ZSwgJ2ZsYXR0ZW5DaGlsZHJlbiguLi4pOiBFbmNvdW50ZXJlZCB0d28gY2hpbGRyZW4gd2l0aCB0aGUgc2FtZSBrZXksICcgKyAnYCVzYC4gQ2hpbGQga2V5cyBtdXN0IGJlIHVuaXF1ZTsgd2hlbiB0d28gY2hpbGRyZW4gc2hhcmUgYSBrZXksIG9ubHkgJyArICd0aGUgZmlyc3QgY2hpbGQgd2lsbCBiZSB1c2VkLicsIG5hbWUpIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmIChrZXlVbmlxdWUgJiYgY2hpbGQgIT0gbnVsbCkge1xuICAgIHJlc3VsdFtuYW1lXSA9IGNoaWxkO1xuICB9XG59XG5cbi8qKlxuICogRmxhdHRlbnMgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLiBBbnkgbnVsbFxuICogY2hpbGRyZW4gd2lsbCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBvYmplY3QuXG4gKiBAcmV0dXJuIHshb2JqZWN0fSBmbGF0dGVuZWQgY2hpbGRyZW4ga2V5ZWQgYnkgbmFtZS5cbiAqL1xuZnVuY3Rpb24gZmxhdHRlbkNoaWxkcmVuKGNoaWxkcmVuKSB7XG4gIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgZmxhdHRlblNpbmdsZUNoaWxkSW50b0NvbnRleHQsIHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZmxhdHRlbkNoaWxkcmVuOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBmb3JFYWNoQWNjdW11bGF0ZWRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQHBhcmFtIHthcnJheX0gYXJyIGFuIFwiYWNjdW11bGF0aW9uXCIgb2YgaXRlbXMgd2hpY2ggaXMgZWl0aGVyIGFuIEFycmF5IG9yXG4gKiBhIHNpbmdsZSBpdGVtLiBVc2VmdWwgd2hlbiBwYWlyZWQgd2l0aCB0aGUgYGFjY3VtdWxhdGVgIG1vZHVsZS4gVGhpcyBpcyBhXG4gKiBzaW1wbGUgdXRpbGl0eSB0aGF0IGFsbG93cyB1cyB0byByZWFzb24gYWJvdXQgYSBjb2xsZWN0aW9uIG9mIGl0ZW1zLCBidXRcbiAqIGhhbmRsaW5nIHRoZSBjYXNlIHdoZW4gdGhlcmUgaXMgZXhhY3RseSBvbmUgaXRlbSAoYW5kIHdlIGRvIG5vdCBuZWVkIHRvXG4gKiBhbGxvY2F0ZSBhbiBhcnJheSkuXG4gKi9cbnZhciBmb3JFYWNoQWNjdW11bGF0ZWQgPSBmdW5jdGlvbiAoYXJyLCBjYiwgc2NvcGUpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xuICAgIGFyci5mb3JFYWNoKGNiLCBzY29wZSk7XG4gIH0gZWxzZSBpZiAoYXJyKSB7XG4gICAgY2IuY2FsbChzY29wZSwgYXJyKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmb3JFYWNoQWNjdW11bGF0ZWQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50Q2hhckNvZGVcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIGBjaGFyQ29kZWAgcmVwcmVzZW50cyB0aGUgYWN0dWFsIFwiY2hhcmFjdGVyIGNvZGVcIiBhbmQgaXMgc2FmZSB0byB1c2Ugd2l0aFxuICogYFN0cmluZy5mcm9tQ2hhckNvZGVgLiBBcyBzdWNoLCBvbmx5IGtleXMgdGhhdCBjb3JyZXNwb25kIHRvIHByaW50YWJsZVxuICogY2hhcmFjdGVycyBwcm9kdWNlIGEgdmFsaWQgYGNoYXJDb2RlYCwgdGhlIG9ubHkgZXhjZXB0aW9uIHRvIHRoaXMgaXMgRW50ZXIuXG4gKiBUaGUgVGFiLWtleSBpcyBjb25zaWRlcmVkIG5vbi1wcmludGFibGUgYW5kIGRvZXMgbm90IGhhdmUgYSBgY2hhckNvZGVgLFxuICogcHJlc3VtYWJseSBiZWNhdXNlIGl0IGRvZXMgbm90IHByb2R1Y2UgYSB0YWItY2hhcmFjdGVyIGluIGJyb3dzZXJzLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gTm9ybWFsaXplZCBgY2hhckNvZGVgIHByb3BlcnR5LlxuICovXG5mdW5jdGlvbiBnZXRFdmVudENoYXJDb2RlKG5hdGl2ZUV2ZW50KSB7XG4gIHZhciBjaGFyQ29kZTtcbiAgdmFyIGtleUNvZGUgPSBuYXRpdmVFdmVudC5rZXlDb2RlO1xuXG4gIGlmICgnY2hhckNvZGUnIGluIG5hdGl2ZUV2ZW50KSB7XG4gICAgY2hhckNvZGUgPSBuYXRpdmVFdmVudC5jaGFyQ29kZTtcblxuICAgIC8vIEZGIGRvZXMgbm90IHNldCBgY2hhckNvZGVgIGZvciB0aGUgRW50ZXIta2V5LCBjaGVjayBhZ2FpbnN0IGBrZXlDb2RlYC5cbiAgICBpZiAoY2hhckNvZGUgPT09IDAgJiYga2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgIGNoYXJDb2RlID0gMTM7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIElFOCBkb2VzIG5vdCBpbXBsZW1lbnQgYGNoYXJDb2RlYCwgYnV0IGBrZXlDb2RlYCBoYXMgdGhlIGNvcnJlY3QgdmFsdWUuXG4gICAgY2hhckNvZGUgPSBrZXlDb2RlO1xuICB9XG5cbiAgLy8gU29tZSBub24tcHJpbnRhYmxlIGtleXMgYXJlIHJlcG9ydGVkIGluIGBjaGFyQ29kZWAvYGtleUNvZGVgLCBkaXNjYXJkIHRoZW0uXG4gIC8vIE11c3Qgbm90IGRpc2NhcmQgdGhlIChub24tKXByaW50YWJsZSBFbnRlci1rZXkuXG4gIGlmIChjaGFyQ29kZSA+PSAzMiB8fCBjaGFyQ29kZSA9PT0gMTMpIHtcbiAgICByZXR1cm4gY2hhckNvZGU7XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRFdmVudENoYXJDb2RlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRFdmVudEtleVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBnZXRFdmVudENoYXJDb2RlID0gcmVxdWlyZSgnLi9nZXRFdmVudENoYXJDb2RlJyk7XG5cbi8qKlxuICogTm9ybWFsaXphdGlvbiBvZiBkZXByZWNhdGVkIEhUTUw1IGBrZXlgIHZhbHVlc1xuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvS2V5Ym9hcmRFdmVudCNLZXlfbmFtZXNcbiAqL1xudmFyIG5vcm1hbGl6ZUtleSA9IHtcbiAgJ0VzYyc6ICdFc2NhcGUnLFxuICAnU3BhY2ViYXInOiAnICcsXG4gICdMZWZ0JzogJ0Fycm93TGVmdCcsXG4gICdVcCc6ICdBcnJvd1VwJyxcbiAgJ1JpZ2h0JzogJ0Fycm93UmlnaHQnLFxuICAnRG93bic6ICdBcnJvd0Rvd24nLFxuICAnRGVsJzogJ0RlbGV0ZScsXG4gICdXaW4nOiAnT1MnLFxuICAnTWVudSc6ICdDb250ZXh0TWVudScsXG4gICdBcHBzJzogJ0NvbnRleHRNZW51JyxcbiAgJ1Njcm9sbCc6ICdTY3JvbGxMb2NrJyxcbiAgJ01velByaW50YWJsZUtleSc6ICdVbmlkZW50aWZpZWQnXG59O1xuXG4vKipcbiAqIFRyYW5zbGF0aW9uIGZyb20gbGVnYWN5IGBrZXlDb2RlYCB0byBIVE1MNSBga2V5YFxuICogT25seSBzcGVjaWFsIGtleXMgc3VwcG9ydGVkLCBhbGwgb3RoZXJzIGRlcGVuZCBvbiBrZXlib2FyZCBsYXlvdXQgb3IgYnJvd3NlclxuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvS2V5Ym9hcmRFdmVudCNLZXlfbmFtZXNcbiAqL1xudmFyIHRyYW5zbGF0ZVRvS2V5ID0ge1xuICA4OiAnQmFja3NwYWNlJyxcbiAgOTogJ1RhYicsXG4gIDEyOiAnQ2xlYXInLFxuICAxMzogJ0VudGVyJyxcbiAgMTY6ICdTaGlmdCcsXG4gIDE3OiAnQ29udHJvbCcsXG4gIDE4OiAnQWx0JyxcbiAgMTk6ICdQYXVzZScsXG4gIDIwOiAnQ2Fwc0xvY2snLFxuICAyNzogJ0VzY2FwZScsXG4gIDMyOiAnICcsXG4gIDMzOiAnUGFnZVVwJyxcbiAgMzQ6ICdQYWdlRG93bicsXG4gIDM1OiAnRW5kJyxcbiAgMzY6ICdIb21lJyxcbiAgMzc6ICdBcnJvd0xlZnQnLFxuICAzODogJ0Fycm93VXAnLFxuICAzOTogJ0Fycm93UmlnaHQnLFxuICA0MDogJ0Fycm93RG93bicsXG4gIDQ1OiAnSW5zZXJ0JyxcbiAgNDY6ICdEZWxldGUnLFxuICAxMTI6ICdGMScsIDExMzogJ0YyJywgMTE0OiAnRjMnLCAxMTU6ICdGNCcsIDExNjogJ0Y1JywgMTE3OiAnRjYnLFxuICAxMTg6ICdGNycsIDExOTogJ0Y4JywgMTIwOiAnRjknLCAxMjE6ICdGMTAnLCAxMjI6ICdGMTEnLCAxMjM6ICdGMTInLFxuICAxNDQ6ICdOdW1Mb2NrJyxcbiAgMTQ1OiAnU2Nyb2xsTG9jaycsXG4gIDIyNDogJ01ldGEnXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge3N0cmluZ30gTm9ybWFsaXplZCBga2V5YCBwcm9wZXJ0eS5cbiAqL1xuZnVuY3Rpb24gZ2V0RXZlbnRLZXkobmF0aXZlRXZlbnQpIHtcbiAgaWYgKG5hdGl2ZUV2ZW50LmtleSkge1xuICAgIC8vIE5vcm1hbGl6ZSBpbmNvbnNpc3RlbnQgdmFsdWVzIHJlcG9ydGVkIGJ5IGJyb3dzZXJzIGR1ZSB0b1xuICAgIC8vIGltcGxlbWVudGF0aW9ucyBvZiBhIHdvcmtpbmcgZHJhZnQgc3BlY2lmaWNhdGlvbi5cblxuICAgIC8vIEZpcmVGb3ggaW1wbGVtZW50cyBga2V5YCBidXQgcmV0dXJucyBgTW96UHJpbnRhYmxlS2V5YCBmb3IgYWxsXG4gICAgLy8gcHJpbnRhYmxlIGNoYXJhY3RlcnMgKG5vcm1hbGl6ZWQgdG8gYFVuaWRlbnRpZmllZGApLCBpZ25vcmUgaXQuXG4gICAgdmFyIGtleSA9IG5vcm1hbGl6ZUtleVtuYXRpdmVFdmVudC5rZXldIHx8IG5hdGl2ZUV2ZW50LmtleTtcbiAgICBpZiAoa2V5ICE9PSAnVW5pZGVudGlmaWVkJykge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cblxuICAvLyBCcm93c2VyIGRvZXMgbm90IGltcGxlbWVudCBga2V5YCwgcG9seWZpbGwgYXMgbXVjaCBvZiBpdCBhcyB3ZSBjYW4uXG4gIGlmIChuYXRpdmVFdmVudC50eXBlID09PSAna2V5cHJlc3MnKSB7XG4gICAgdmFyIGNoYXJDb2RlID0gZ2V0RXZlbnRDaGFyQ29kZShuYXRpdmVFdmVudCk7XG5cbiAgICAvLyBUaGUgZW50ZXIta2V5IGlzIHRlY2huaWNhbGx5IGJvdGggcHJpbnRhYmxlIGFuZCBub24tcHJpbnRhYmxlIGFuZCBjYW5cbiAgICAvLyB0aHVzIGJlIGNhcHR1cmVkIGJ5IGBrZXlwcmVzc2AsIG5vIG90aGVyIG5vbi1wcmludGFibGUga2V5IHNob3VsZC5cbiAgICByZXR1cm4gY2hhckNvZGUgPT09IDEzID8gJ0VudGVyJyA6IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICB9XG4gIGlmIChuYXRpdmVFdmVudC50eXBlID09PSAna2V5ZG93bicgfHwgbmF0aXZlRXZlbnQudHlwZSA9PT0gJ2tleXVwJykge1xuICAgIC8vIFdoaWxlIHVzZXIga2V5Ym9hcmQgbGF5b3V0IGRldGVybWluZXMgdGhlIGFjdHVhbCBtZWFuaW5nIG9mIGVhY2hcbiAgICAvLyBga2V5Q29kZWAgdmFsdWUsIGFsbW9zdCBhbGwgZnVuY3Rpb24ga2V5cyBoYXZlIGEgdW5pdmVyc2FsIHZhbHVlLlxuICAgIHJldHVybiB0cmFuc2xhdGVUb0tleVtuYXRpdmVFdmVudC5rZXlDb2RlXSB8fCAnVW5pZGVudGlmaWVkJztcbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0RXZlbnRLZXk7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50TW9kaWZpZXJTdGF0ZVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVHJhbnNsYXRpb24gZnJvbSBtb2RpZmllciBrZXkgdG8gdGhlIGFzc29jaWF0ZWQgcHJvcGVydHkgaW4gdGhlIGV2ZW50LlxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2tleXMtTW9kaWZpZXJzXG4gKi9cblxudmFyIG1vZGlmaWVyS2V5VG9Qcm9wID0ge1xuICAnQWx0JzogJ2FsdEtleScsXG4gICdDb250cm9sJzogJ2N0cmxLZXknLFxuICAnTWV0YSc6ICdtZXRhS2V5JyxcbiAgJ1NoaWZ0JzogJ3NoaWZ0S2V5J1xufTtcblxuLy8gSUU4IGRvZXMgbm90IGltcGxlbWVudCBnZXRNb2RpZmllclN0YXRlIHNvIHdlIHNpbXBseSBtYXAgaXQgdG8gdGhlIG9ubHlcbi8vIG1vZGlmaWVyIGtleXMgZXhwb3NlZCBieSB0aGUgZXZlbnQgaXRzZWxmLCBkb2VzIG5vdCBzdXBwb3J0IExvY2sta2V5cy5cbi8vIEN1cnJlbnRseSwgYWxsIG1ham9yIGJyb3dzZXJzIGV4Y2VwdCBDaHJvbWUgc2VlbXMgdG8gc3VwcG9ydCBMb2NrLWtleXMuXG5mdW5jdGlvbiBtb2RpZmllclN0YXRlR2V0dGVyKGtleUFyZykge1xuICB2YXIgc3ludGhldGljRXZlbnQgPSB0aGlzO1xuICB2YXIgbmF0aXZlRXZlbnQgPSBzeW50aGV0aWNFdmVudC5uYXRpdmVFdmVudDtcbiAgaWYgKG5hdGl2ZUV2ZW50LmdldE1vZGlmaWVyU3RhdGUpIHtcbiAgICByZXR1cm4gbmF0aXZlRXZlbnQuZ2V0TW9kaWZpZXJTdGF0ZShrZXlBcmcpO1xuICB9XG4gIHZhciBrZXlQcm9wID0gbW9kaWZpZXJLZXlUb1Byb3Bba2V5QXJnXTtcbiAgcmV0dXJuIGtleVByb3AgPyAhIW5hdGl2ZUV2ZW50W2tleVByb3BdIDogZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50TW9kaWZpZXJTdGF0ZShuYXRpdmVFdmVudCkge1xuICByZXR1cm4gbW9kaWZpZXJTdGF0ZUdldHRlcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRFdmVudE1vZGlmaWVyU3RhdGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50VGFyZ2V0XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBHZXRzIHRoZSB0YXJnZXQgbm9kZSBmcm9tIGEgbmF0aXZlIGJyb3dzZXIgZXZlbnQgYnkgYWNjb3VudGluZyBmb3JcbiAqIGluY29uc2lzdGVuY2llcyBpbiBicm93c2VyIERPTSBBUElzLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge0RPTUV2ZW50VGFyZ2V0fSBUYXJnZXQgbm9kZS5cbiAqL1xuZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXQobmF0aXZlRXZlbnQpIHtcbiAgdmFyIHRhcmdldCA9IG5hdGl2ZUV2ZW50LnRhcmdldCB8fCBuYXRpdmVFdmVudC5zcmNFbGVtZW50IHx8IHdpbmRvdztcbiAgLy8gU2FmYXJpIG1heSBmaXJlIGV2ZW50cyBvbiB0ZXh0IG5vZGVzIChOb2RlLlRFWFRfTk9ERSBpcyAzKS5cbiAgLy8gQHNlZSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2pzL2V2ZW50c19wcm9wZXJ0aWVzLmh0bWxcbiAgcmV0dXJuIHRhcmdldC5ub2RlVHlwZSA9PT0gMyA/IHRhcmdldC5wYXJlbnROb2RlIDogdGFyZ2V0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldEV2ZW50VGFyZ2V0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRJdGVyYXRvckZuXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyogZ2xvYmFsIFN5bWJvbCAqL1xudmFyIElURVJBVE9SX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLml0ZXJhdG9yO1xudmFyIEZBVVhfSVRFUkFUT1JfU1lNQk9MID0gJ0BAaXRlcmF0b3InOyAvLyBCZWZvcmUgU3ltYm9sIHNwZWMuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgaXRlcmF0b3IgbWV0aG9kIGZ1bmN0aW9uIGNvbnRhaW5lZCBvbiB0aGUgaXRlcmFibGUgb2JqZWN0LlxuICpcbiAqIEJlIHN1cmUgdG8gaW52b2tlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBpdGVyYWJsZSBhcyBjb250ZXh0OlxuICpcbiAqICAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4obXlJdGVyYWJsZSk7XG4gKiAgICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAqICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChteUl0ZXJhYmxlKTtcbiAqICAgICAgIC4uLlxuICogICAgIH1cbiAqXG4gKiBAcGFyYW0gez9vYmplY3R9IG1heWJlSXRlcmFibGVcbiAqIEByZXR1cm4gez9mdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gZ2V0SXRlcmF0b3JGbihtYXliZUl0ZXJhYmxlKSB7XG4gIHZhciBpdGVyYXRvckZuID0gbWF5YmVJdGVyYWJsZSAmJiAoSVRFUkFUT1JfU1lNQk9MICYmIG1heWJlSXRlcmFibGVbSVRFUkFUT1JfU1lNQk9MXSB8fCBtYXliZUl0ZXJhYmxlW0ZBVVhfSVRFUkFUT1JfU1lNQk9MXSk7XG4gIGlmICh0eXBlb2YgaXRlcmF0b3JGbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBpdGVyYXRvckZuO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0SXRlcmF0b3JGbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBHaXZlbiBhbnkgbm9kZSByZXR1cm4gdGhlIGZpcnN0IGxlYWYgbm9kZSB3aXRob3V0IGNoaWxkcmVuLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gbm9kZVxuICogQHJldHVybiB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX1cbiAqL1xuZnVuY3Rpb24gZ2V0TGVhZk5vZGUobm9kZSkge1xuICB3aGlsZSAobm9kZSAmJiBub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICBub2RlID0gbm9kZS5maXJzdENoaWxkO1xuICB9XG4gIHJldHVybiBub2RlO1xufVxuXG4vKipcbiAqIEdldCB0aGUgbmV4dCBzaWJsaW5nIHdpdGhpbiBhIGNvbnRhaW5lci4gVGhpcyB3aWxsIHdhbGsgdXAgdGhlXG4gKiBET00gaWYgYSBub2RlJ3Mgc2libGluZ3MgaGF2ZSBiZWVuIGV4aGF1c3RlZC5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9IG5vZGVcbiAqIEByZXR1cm4gez9ET01FbGVtZW50fERPTVRleHROb2RlfVxuICovXG5mdW5jdGlvbiBnZXRTaWJsaW5nTm9kZShub2RlKSB7XG4gIHdoaWxlIChub2RlKSB7XG4gICAgaWYgKG5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICB9XG59XG5cbi8qKlxuICogR2V0IG9iamVjdCBkZXNjcmliaW5nIHRoZSBub2RlcyB3aGljaCBjb250YWluIGNoYXJhY3RlcnMgYXQgb2Zmc2V0LlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gcm9vdFxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFxuICogQHJldHVybiB7P29iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldChyb290LCBvZmZzZXQpIHtcbiAgdmFyIG5vZGUgPSBnZXRMZWFmTm9kZShyb290KTtcbiAgdmFyIG5vZGVTdGFydCA9IDA7XG4gIHZhciBub2RlRW5kID0gMDtcblxuICB3aGlsZSAobm9kZSkge1xuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAzKSB7XG4gICAgICBub2RlRW5kID0gbm9kZVN0YXJ0ICsgbm9kZS50ZXh0Q29udGVudC5sZW5ndGg7XG5cbiAgICAgIGlmIChub2RlU3RhcnQgPD0gb2Zmc2V0ICYmIG5vZGVFbmQgPj0gb2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgICBvZmZzZXQ6IG9mZnNldCAtIG5vZGVTdGFydFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBub2RlU3RhcnQgPSBub2RlRW5kO1xuICAgIH1cblxuICAgIG5vZGUgPSBnZXRMZWFmTm9kZShnZXRTaWJsaW5nTm9kZShub2RlKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRUZXh0Q29udGVudEFjY2Vzc29yXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgY29udGVudEtleSA9IG51bGw7XG5cbi8qKlxuICogR2V0cyB0aGUga2V5IHVzZWQgdG8gYWNjZXNzIHRleHQgY29udGVudCBvbiBhIERPTSBub2RlLlxuICpcbiAqIEByZXR1cm4gez9zdHJpbmd9IEtleSB1c2VkIHRvIGFjY2VzcyB0ZXh0IGNvbnRlbnQuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2V0VGV4dENvbnRlbnRBY2Nlc3NvcigpIHtcbiAgaWYgKCFjb250ZW50S2V5ICYmIEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICAgIC8vIFByZWZlciB0ZXh0Q29udGVudCB0byBpbm5lclRleHQgYmVjYXVzZSBtYW55IGJyb3dzZXJzIHN1cHBvcnQgYm90aCBidXRcbiAgICAvLyBTVkcgPHRleHQ+IGVsZW1lbnRzIGRvbid0IHN1cHBvcnQgaW5uZXJUZXh0IGV2ZW4gd2hlbiA8ZGl2PiBkb2VzLlxuICAgIGNvbnRlbnRLZXkgPSAndGV4dENvbnRlbnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA/ICd0ZXh0Q29udGVudCcgOiAnaW5uZXJUZXh0JztcbiAgfVxuICByZXR1cm4gY29udGVudEtleTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRUZXh0Q29udGVudEFjY2Vzc29yOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpO1xudmFyIFJlYWN0RW1wdHlDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0RW1wdHlDb21wb25lbnQnKTtcbnZhciBSZWFjdE5hdGl2ZUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3ROYXRpdmVDb21wb25lbnQnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8vIFRvIGF2b2lkIGEgY3ljbGljIGRlcGVuZGVuY3ksIHdlIGNyZWF0ZSB0aGUgZmluYWwgY2xhc3MgaW4gdGhpcyBtb2R1bGVcbnZhciBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7fTtcbmFzc2lnbihSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFdyYXBwZXIucHJvdG90eXBlLCBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudC5NaXhpbiwge1xuICBfaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudDogaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudFxufSk7XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikge1xuICBpZiAob3duZXIpIHtcbiAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSB0eXBlIHJlZmVyZW5jZSBpcyBhIGtub3duIGludGVybmFsIHR5cGUuIEkuZS4gbm90IGEgdXNlclxuICogcHJvdmlkZWQgY29tcG9zaXRlIHR5cGUuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHlwZVxuICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoaXMgaXMgYSB2YWxpZCBpbnRlcm5hbCB0eXBlLlxuICovXG5mdW5jdGlvbiBpc0ludGVybmFsQ29tcG9uZW50VHlwZSh0eXBlKSB7XG4gIHJldHVybiB0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdHlwZS5wcm90b3R5cGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB0eXBlLnByb3RvdHlwZS5tb3VudENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdHlwZS5wcm90b3R5cGUucmVjZWl2ZUNvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuLyoqXG4gKiBHaXZlbiBhIFJlYWN0Tm9kZSwgY3JlYXRlIGFuIGluc3RhbmNlIHRoYXQgd2lsbCBhY3R1YWxseSBiZSBtb3VudGVkLlxuICpcbiAqIEBwYXJhbSB7UmVhY3ROb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtvYmplY3R9IEEgbmV3IGluc3RhbmNlIG9mIHRoZSBlbGVtZW50J3MgY29uc3RydWN0b3IuXG4gKiBAcHJvdGVjdGVkXG4gKi9cbmZ1bmN0aW9uIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQobm9kZSkge1xuICB2YXIgaW5zdGFuY2U7XG5cbiAgaWYgKG5vZGUgPT09IG51bGwgfHwgbm9kZSA9PT0gZmFsc2UpIHtcbiAgICBpbnN0YW5jZSA9IG5ldyBSZWFjdEVtcHR5Q29tcG9uZW50KGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBub2RlID09PSAnb2JqZWN0Jykge1xuICAgIHZhciBlbGVtZW50ID0gbm9kZTtcbiAgICAhKGVsZW1lbnQgJiYgKHR5cGVvZiBlbGVtZW50LnR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gJ3N0cmluZycpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFbGVtZW50IHR5cGUgaXMgaW52YWxpZDogZXhwZWN0ZWQgYSBzdHJpbmcgKGZvciBidWlsdC1pbiBjb21wb25lbnRzKSAnICsgJ29yIGEgY2xhc3MvZnVuY3Rpb24gKGZvciBjb21wb3NpdGUgY29tcG9uZW50cykgYnV0IGdvdDogJXMuJXMnLCBlbGVtZW50LnR5cGUgPT0gbnVsbCA/IGVsZW1lbnQudHlwZSA6IHR5cGVvZiBlbGVtZW50LnR5cGUsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShlbGVtZW50Ll9vd25lcikpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIFNwZWNpYWwgY2FzZSBzdHJpbmcgdmFsdWVzXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50LnR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpbnN0YW5jZSA9IFJlYWN0TmF0aXZlQ29tcG9uZW50LmNyZWF0ZUludGVybmFsQ29tcG9uZW50KGVsZW1lbnQpO1xuICAgIH0gZWxzZSBpZiAoaXNJbnRlcm5hbENvbXBvbmVudFR5cGUoZWxlbWVudC50eXBlKSkge1xuICAgICAgLy8gVGhpcyBpcyB0ZW1wb3JhcmlseSBhdmFpbGFibGUgZm9yIGN1c3RvbSBjb21wb25lbnRzIHRoYXQgYXJlIG5vdCBzdHJpbmdcbiAgICAgIC8vIHJlcHJlc2VudGF0aW9ucy4gSS5lLiBBUlQuIE9uY2UgdGhvc2UgYXJlIHVwZGF0ZWQgdG8gdXNlIHRoZSBzdHJpbmdcbiAgICAgIC8vIHJlcHJlc2VudGF0aW9uLCB3ZSBjYW4gZHJvcCB0aGlzIGNvZGUgcGF0aC5cbiAgICAgIGluc3RhbmNlID0gbmV3IGVsZW1lbnQudHlwZShlbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zdGFuY2UgPSBuZXcgUmVhY3RDb21wb3NpdGVDb21wb25lbnRXcmFwcGVyKCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBub2RlID09PSAnc3RyaW5nJyB8fCB0eXBlb2Ygbm9kZSA9PT0gJ251bWJlcicpIHtcbiAgICBpbnN0YW5jZSA9IFJlYWN0TmF0aXZlQ29tcG9uZW50LmNyZWF0ZUluc3RhbmNlRm9yVGV4dChub2RlKTtcbiAgfSBlbHNlIHtcbiAgICAhZmFsc2UgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRW5jb3VudGVyZWQgaW52YWxpZCBSZWFjdCBub2RlIG9mIHR5cGUgJXMnLCB0eXBlb2Ygbm9kZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgaW5zdGFuY2UuY29uc3RydWN0ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBpbnN0YW5jZS5tb3VudENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgaW5zdGFuY2UucmVjZWl2ZUNvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgaW5zdGFuY2UudW5tb3VudENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJywgJ09ubHkgUmVhY3QgQ29tcG9uZW50cyBjYW4gYmUgbW91bnRlZC4nKSA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8vIFNldHMgdXAgdGhlIGluc3RhbmNlLiBUaGlzIGNhbiBwcm9iYWJseSBqdXN0IG1vdmUgaW50byB0aGUgY29uc3RydWN0b3Igbm93LlxuICBpbnN0YW5jZS5jb25zdHJ1Y3Qobm9kZSk7XG5cbiAgLy8gVGhlc2UgdHdvIGZpZWxkcyBhcmUgdXNlZCBieSB0aGUgRE9NIGFuZCBBUlQgZGlmZmluZyBhbGdvcml0aG1zXG4gIC8vIHJlc3BlY3RpdmVseS4gSW5zdGVhZCBvZiB1c2luZyBleHBhbmRvcyBvbiBjb21wb25lbnRzLCB3ZSBzaG91bGQgYmVcbiAgLy8gc3RvcmluZyB0aGUgc3RhdGUgbmVlZGVkIGJ5IHRoZSBkaWZmaW5nIGFsZ29yaXRobXMgZWxzZXdoZXJlLlxuICBpbnN0YW5jZS5fbW91bnRJbmRleCA9IDA7XG4gIGluc3RhbmNlLl9tb3VudEltYWdlID0gbnVsbDtcblxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGluc3RhbmNlLl9pc093bmVyTmVjZXNzYXJ5ID0gZmFsc2U7XG4gICAgaW5zdGFuY2UuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyID0gZmFsc2U7XG4gIH1cblxuICAvLyBJbnRlcm5hbCBpbnN0YW5jZXMgc2hvdWxkIGZ1bGx5IGNvbnN0cnVjdGVkIGF0IHRoaXMgcG9pbnQsIHNvIHRoZXkgc2hvdWxkXG4gIC8vIG5vdCBnZXQgYW55IG5ldyBmaWVsZHMgYWRkZWQgdG8gdGhlbSBhdCB0aGlzIHBvaW50LlxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChPYmplY3QucHJldmVudEV4dGVuc2lvbnMpIHtcbiAgICAgIE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyhpbnN0YW5jZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGlzRXZlbnRTdXBwb3J0ZWRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciB1c2VIYXNGZWF0dXJlO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICB1c2VIYXNGZWF0dXJlID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24gJiYgZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSAmJlxuICAvLyBhbHdheXMgcmV0dXJucyB0cnVlIGluIG5ld2VyIGJyb3dzZXJzIGFzIHBlciB0aGUgc3RhbmRhcmQuXG4gIC8vIEBzZWUgaHR0cDovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1kb21pbXBsZW1lbnRhdGlvbi1oYXNmZWF0dXJlXG4gIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoJycsICcnKSAhPT0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYW4gZXZlbnQgaXMgc3VwcG9ydGVkIGluIHRoZSBjdXJyZW50IGV4ZWN1dGlvbiBlbnZpcm9ubWVudC5cbiAqXG4gKiBOT1RFOiBUaGlzIHdpbGwgbm90IHdvcmsgY29ycmVjdGx5IGZvciBub24tZ2VuZXJpYyBldmVudHMgc3VjaCBhcyBgY2hhbmdlYCxcbiAqIGByZXNldGAsIGBsb2FkYCwgYGVycm9yYCwgYW5kIGBzZWxlY3RgLlxuICpcbiAqIEJvcnJvd3MgZnJvbSBNb2Rlcm5penIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVN1ZmZpeCBFdmVudCBuYW1lLCBlLmcuIFwiY2xpY2tcIi5cbiAqIEBwYXJhbSB7P2Jvb2xlYW59IGNhcHR1cmUgQ2hlY2sgaWYgdGhlIGNhcHR1cmUgcGhhc2UgaXMgc3VwcG9ydGVkLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgc3VwcG9ydGVkLlxuICogQGludGVybmFsXG4gKiBAbGljZW5zZSBNb2Rlcm5penIgMy4wLjBwcmUgKEN1c3RvbSBCdWlsZCkgfCBNSVRcbiAqL1xuZnVuY3Rpb24gaXNFdmVudFN1cHBvcnRlZChldmVudE5hbWVTdWZmaXgsIGNhcHR1cmUpIHtcbiAgaWYgKCFFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gfHwgY2FwdHVyZSAmJiAhKCdhZGRFdmVudExpc3RlbmVyJyBpbiBkb2N1bWVudCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgZXZlbnROYW1lID0gJ29uJyArIGV2ZW50TmFtZVN1ZmZpeDtcbiAgdmFyIGlzU3VwcG9ydGVkID0gKGV2ZW50TmFtZSBpbiBkb2N1bWVudCk7XG5cbiAgaWYgKCFpc1N1cHBvcnRlZCkge1xuICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoZXZlbnROYW1lLCAncmV0dXJuOycpO1xuICAgIGlzU3VwcG9ydGVkID0gdHlwZW9mIGVsZW1lbnRbZXZlbnROYW1lXSA9PT0gJ2Z1bmN0aW9uJztcbiAgfVxuXG4gIGlmICghaXNTdXBwb3J0ZWQgJiYgdXNlSGFzRmVhdHVyZSAmJiBldmVudE5hbWVTdWZmaXggPT09ICd3aGVlbCcpIHtcbiAgICAvLyBUaGlzIGlzIHRoZSBvbmx5IHdheSB0byB0ZXN0IHN1cHBvcnQgZm9yIHRoZSBgd2hlZWxgIGV2ZW50IGluIElFOSsuXG4gICAgaXNTdXBwb3J0ZWQgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCdFdmVudHMud2hlZWwnLCAnMy4wJyk7XG4gIH1cblxuICByZXR1cm4gaXNTdXBwb3J0ZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNFdmVudFN1cHBvcnRlZDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaXNUZXh0SW5wdXRFbGVtZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBzZWUgaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvdGhlLWlucHV0LWVsZW1lbnQuaHRtbCNpbnB1dC10eXBlLWF0dHItc3VtbWFyeVxuICovXG52YXIgc3VwcG9ydGVkSW5wdXRUeXBlcyA9IHtcbiAgJ2NvbG9yJzogdHJ1ZSxcbiAgJ2RhdGUnOiB0cnVlLFxuICAnZGF0ZXRpbWUnOiB0cnVlLFxuICAnZGF0ZXRpbWUtbG9jYWwnOiB0cnVlLFxuICAnZW1haWwnOiB0cnVlLFxuICAnbW9udGgnOiB0cnVlLFxuICAnbnVtYmVyJzogdHJ1ZSxcbiAgJ3Bhc3N3b3JkJzogdHJ1ZSxcbiAgJ3JhbmdlJzogdHJ1ZSxcbiAgJ3NlYXJjaCc6IHRydWUsXG4gICd0ZWwnOiB0cnVlLFxuICAndGV4dCc6IHRydWUsXG4gICd0aW1lJzogdHJ1ZSxcbiAgJ3VybCc6IHRydWUsXG4gICd3ZWVrJzogdHJ1ZVxufTtcblxuZnVuY3Rpb24gaXNUZXh0SW5wdXRFbGVtZW50KGVsZW0pIHtcbiAgdmFyIG5vZGVOYW1lID0gZWxlbSAmJiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIG5vZGVOYW1lICYmIChub2RlTmFtZSA9PT0gJ2lucHV0JyAmJiBzdXBwb3J0ZWRJbnB1dFR5cGVzW2VsZW0udHlwZV0gfHwgbm9kZU5hbWUgPT09ICd0ZXh0YXJlYScpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzVGV4dElucHV0RWxlbWVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgb25seUNoaWxkXG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBmaXJzdCBjaGlsZCBpbiBhIGNvbGxlY3Rpb24gb2YgY2hpbGRyZW4gYW5kIHZlcmlmaWVzIHRoYXQgdGhlcmVcbiAqIGlzIG9ubHkgb25lIGNoaWxkIGluIHRoZSBjb2xsZWN0aW9uLiBUaGUgY3VycmVudCBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzXG4gKiBmdW5jdGlvbiBhc3N1bWVzIHRoYXQgYSBzaW5nbGUgY2hpbGQgZ2V0cyBwYXNzZWQgd2l0aG91dCBhIHdyYXBwZXIsIGJ1dCB0aGVcbiAqIHB1cnBvc2Ugb2YgdGhpcyBoZWxwZXIgZnVuY3Rpb24gaXMgdG8gYWJzdHJhY3QgYXdheSB0aGUgcGFydGljdWxhciBzdHJ1Y3R1cmVcbiAqIG9mIGNoaWxkcmVuLlxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gY2hpbGRyZW4gQ2hpbGQgY29sbGVjdGlvbiBzdHJ1Y3R1cmUuXG4gKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gVGhlIGZpcnN0IGFuZCBvbmx5IGBSZWFjdENvbXBvbmVudGAgY29udGFpbmVkIGluIHRoZVxuICogc3RydWN0dXJlLlxuICovXG5mdW5jdGlvbiBvbmx5Q2hpbGQoY2hpbGRyZW4pIHtcbiAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZHJlbikgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnb25seUNoaWxkIG11c3QgYmUgcGFzc2VkIGEgY2hpbGRyZW4gd2l0aCBleGFjdGx5IG9uZSBjaGlsZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHJldHVybiBjaGlsZHJlbjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvbmx5Q2hpbGQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyID0gcmVxdWlyZSgnLi9lc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXInKTtcblxuLyoqXG4gKiBFc2NhcGVzIGF0dHJpYnV0ZSB2YWx1ZSB0byBwcmV2ZW50IHNjcmlwdGluZyBhdHRhY2tzLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gZXNjYXBlLlxuICogQHJldHVybiB7c3RyaW5nfSBBbiBlc2NhcGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpIHtcbiAgcmV0dXJuICdcIicgKyBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIodmFsdWUpICsgJ1wiJztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3NlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4qIEBwcm92aWRlc01vZHVsZSByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lclxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0TW91bnQucmVuZGVyU3VidHJlZUludG9Db250YWluZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHNldElubmVySFRNTFxuICovXG5cbi8qIGdsb2JhbHMgTVNBcHAgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgV0hJVEVTUEFDRV9URVNUID0gL15bIFxcclxcblxcdFxcZl0vO1xudmFyIE5PTlZJU0lCTEVfVEVTVCA9IC88KCEtLXxsaW5rfG5vc2NyaXB0fG1ldGF8c2NyaXB0fHN0eWxlKVsgXFxyXFxuXFx0XFxmXFwvPl0vO1xuXG4vKipcbiAqIFNldCB0aGUgaW5uZXJIVE1MIHByb3BlcnR5IG9mIGEgbm9kZSwgZW5zdXJpbmcgdGhhdCB3aGl0ZXNwYWNlIGlzIHByZXNlcnZlZFxuICogZXZlbiBpbiBJRTguXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gKiBAcGFyYW0ge3N0cmluZ30gaHRtbFxuICogQGludGVybmFsXG4gKi9cbnZhciBzZXRJbm5lckhUTUwgPSBmdW5jdGlvbiAobm9kZSwgaHRtbCkge1xuICBub2RlLmlubmVySFRNTCA9IGh0bWw7XG59O1xuXG4vLyBXaW44IGFwcHM6IEFsbG93IGFsbCBodG1sIHRvIGJlIGluc2VydGVkXG5pZiAodHlwZW9mIE1TQXBwICE9PSAndW5kZWZpbmVkJyAmJiBNU0FwcC5leGVjVW5zYWZlTG9jYWxGdW5jdGlvbikge1xuICBzZXRJbm5lckhUTUwgPSBmdW5jdGlvbiAobm9kZSwgaHRtbCkge1xuICAgIE1TQXBwLmV4ZWNVbnNhZmVMb2NhbEZ1bmN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIG5vZGUuaW5uZXJIVE1MID0gaHRtbDtcbiAgICB9KTtcbiAgfTtcbn1cblxuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICAvLyBJRTg6IFdoZW4gdXBkYXRpbmcgYSBqdXN0IGNyZWF0ZWQgbm9kZSB3aXRoIGlubmVySFRNTCBvbmx5IGxlYWRpbmdcbiAgLy8gd2hpdGVzcGFjZSBpcyByZW1vdmVkLiBXaGVuIHVwZGF0aW5nIGFuIGV4aXN0aW5nIG5vZGUgd2l0aCBpbm5lckhUTUxcbiAgLy8gd2hpdGVzcGFjZSBpbiByb290IFRleHROb2RlcyBpcyBhbHNvIGNvbGxhcHNlZC5cbiAgLy8gQHNlZSBxdWlya3Ntb2RlLm9yZy9idWdyZXBvcnRzL2FyY2hpdmVzLzIwMDQvMTEvaW5uZXJodG1sX2FuZF90Lmh0bWxcblxuICAvLyBGZWF0dXJlIGRldGVjdGlvbjsgb25seSBJRTggaXMga25vd24gdG8gYmVoYXZlIGltcHJvcGVybHkgbGlrZSB0aGlzLlxuICB2YXIgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdGVzdEVsZW1lbnQuaW5uZXJIVE1MID0gJyAnO1xuICBpZiAodGVzdEVsZW1lbnQuaW5uZXJIVE1MID09PSAnJykge1xuICAgIHNldElubmVySFRNTCA9IGZ1bmN0aW9uIChub2RlLCBodG1sKSB7XG4gICAgICAvLyBNYWdpYyB0aGVvcnk6IElFOCBzdXBwb3NlZGx5IGRpZmZlcmVudGlhdGVzIGJldHdlZW4gYWRkZWQgYW5kIHVwZGF0ZWRcbiAgICAgIC8vIG5vZGVzIHdoZW4gcHJvY2Vzc2luZyBpbm5lckhUTUwsIGlubmVySFRNTCBvbiB1cGRhdGVkIG5vZGVzIHN1ZmZlcnNcbiAgICAgIC8vIGZyb20gd29yc2Ugd2hpdGVzcGFjZSBiZWhhdmlvci4gUmUtYWRkaW5nIGEgbm9kZSBsaWtlIHRoaXMgdHJpZ2dlcnNcbiAgICAgIC8vIHRoZSBpbml0aWFsIGFuZCBtb3JlIGZhdm9yYWJsZSB3aGl0ZXNwYWNlIGJlaGF2aW9yLlxuICAgICAgLy8gVE9ETzogV2hhdCB0byBkbyBvbiBhIGRldGFjaGVkIG5vZGU/XG4gICAgICBpZiAobm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobm9kZSwgbm9kZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdlIGFsc28gaW1wbGVtZW50IGEgd29ya2Fyb3VuZCBmb3Igbm9uLXZpc2libGUgdGFncyBkaXNhcHBlYXJpbmcgaW50b1xuICAgICAgLy8gdGhpbiBhaXIgb24gSUU4LCB0aGlzIG9ubHkgaGFwcGVucyBpZiB0aGVyZSBpcyBubyB2aXNpYmxlIHRleHRcbiAgICAgIC8vIGluLWZyb250IG9mIHRoZSBub24tdmlzaWJsZSB0YWdzLiBQaWdneWJhY2sgb24gdGhlIHdoaXRlc3BhY2UgZml4XG4gICAgICAvLyBhbmQgc2ltcGx5IGNoZWNrIGlmIGFueSBub24tdmlzaWJsZSB0YWdzIGFwcGVhciBpbiB0aGUgc291cmNlLlxuICAgICAgaWYgKFdISVRFU1BBQ0VfVEVTVC50ZXN0KGh0bWwpIHx8IGh0bWxbMF0gPT09ICc8JyAmJiBOT05WSVNJQkxFX1RFU1QudGVzdChodG1sKSkge1xuICAgICAgICAvLyBSZWNvdmVyIGxlYWRpbmcgd2hpdGVzcGFjZSBieSB0ZW1wb3JhcmlseSBwcmVwZW5kaW5nIGFueSBjaGFyYWN0ZXIuXG4gICAgICAgIC8vIFxcdUZFRkYgaGFzIHRoZSBwb3RlbnRpYWwgYWR2YW50YWdlIG9mIGJlaW5nIHplcm8td2lkdGgvaW52aXNpYmxlLlxuICAgICAgICAvLyBVZ2xpZnlKUyBkcm9wcyBVK0ZFRkYgY2hhcnMgd2hlbiBwYXJzaW5nLCBzbyB1c2UgU3RyaW5nLmZyb21DaGFyQ29kZVxuICAgICAgICAvLyBpbiBob3BlcyB0aGF0IHRoaXMgaXMgcHJlc2VydmVkIGV2ZW4gaWYgXCJcXHVGRUZGXCIgaXMgdHJhbnNmb3JtZWQgdG9cbiAgICAgICAgLy8gdGhlIGFjdHVhbCBVbmljb2RlIGNoYXJhY3RlciAoYnkgQmFiZWwsIGZvciBleGFtcGxlKS5cbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21pc2hvby9VZ2xpZnlKUzIvYmxvYi92Mi40LjIwL2xpYi9wYXJzZS5qcyNMMjE2XG4gICAgICAgIG5vZGUuaW5uZXJIVE1MID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEZFRkYpICsgaHRtbDtcblxuICAgICAgICAvLyBkZWxldGVEYXRhIGxlYXZlcyBhbiBlbXB0eSBgVGV4dE5vZGVgIHdoaWNoIG9mZnNldHMgdGhlIGluZGV4IG9mIGFsbFxuICAgICAgICAvLyBjaGlsZHJlbi4gRGVmaW5pdGVseSB3YW50IHRvIGF2b2lkIHRoaXMuXG4gICAgICAgIHZhciB0ZXh0Tm9kZSA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgICAgICAgaWYgKHRleHROb2RlLmRhdGEubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZCh0ZXh0Tm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGV4dE5vZGUuZGVsZXRlRGF0YSgwLCAxKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRJbm5lckhUTUw7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHNldFRleHRDb250ZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xudmFyIGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlciA9IHJlcXVpcmUoJy4vZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyJyk7XG52YXIgc2V0SW5uZXJIVE1MID0gcmVxdWlyZSgnLi9zZXRJbm5lckhUTUwnKTtcblxuLyoqXG4gKiBTZXQgdGhlIHRleHRDb250ZW50IHByb3BlcnR5IG9mIGEgbm9kZSwgZW5zdXJpbmcgdGhhdCB3aGl0ZXNwYWNlIGlzIHByZXNlcnZlZFxuICogZXZlbiBpbiBJRTguIGlubmVyVGV4dCBpcyBhIHBvb3Igc3Vic3RpdHV0ZSBmb3IgdGV4dENvbnRlbnQgYW5kLCBhbW9uZyBtYW55XG4gKiBpc3N1ZXMsIGluc2VydHMgPGJyPiBpbnN0ZWFkIG9mIHRoZSBsaXRlcmFsIG5ld2xpbmUgY2hhcnMuIGlubmVySFRNTCBiZWhhdmVzXG4gKiBhcyBpdCBzaG91bGQuXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICogQGludGVybmFsXG4gKi9cbnZhciBzZXRUZXh0Q29udGVudCA9IGZ1bmN0aW9uIChub2RlLCB0ZXh0KSB7XG4gIG5vZGUudGV4dENvbnRlbnQgPSB0ZXh0O1xufTtcblxuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICBpZiAoISgndGV4dENvbnRlbnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkpIHtcbiAgICBzZXRUZXh0Q29udGVudCA9IGZ1bmN0aW9uIChub2RlLCB0ZXh0KSB7XG4gICAgICBzZXRJbm5lckhUTUwobm9kZSwgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKHRleHQpKTtcbiAgICB9O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0VGV4dENvbnRlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBHaXZlbiBhIGBwcmV2RWxlbWVudGAgYW5kIGBuZXh0RWxlbWVudGAsIGRldGVybWluZXMgaWYgdGhlIGV4aXN0aW5nXG4gKiBpbnN0YW5jZSBzaG91bGQgYmUgdXBkYXRlZCBhcyBvcHBvc2VkIHRvIGJlaW5nIGRlc3Ryb3llZCBvciByZXBsYWNlZCBieSBhIG5ld1xuICogaW5zdGFuY2UuIEJvdGggYXJndW1lbnRzIGFyZSBlbGVtZW50cy4gVGhpcyBlbnN1cmVzIHRoYXQgdGhpcyBsb2dpYyBjYW5cbiAqIG9wZXJhdGUgb24gc3RhdGVsZXNzIHRyZWVzIHdpdGhvdXQgYW55IGJhY2tpbmcgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2RWxlbWVudFxuICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0RWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXhpc3RpbmcgaW5zdGFuY2Ugc2hvdWxkIGJlIHVwZGF0ZWQuXG4gKiBAcHJvdGVjdGVkXG4gKi9cbmZ1bmN0aW9uIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50KHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCkge1xuICB2YXIgcHJldkVtcHR5ID0gcHJldkVsZW1lbnQgPT09IG51bGwgfHwgcHJldkVsZW1lbnQgPT09IGZhbHNlO1xuICB2YXIgbmV4dEVtcHR5ID0gbmV4dEVsZW1lbnQgPT09IG51bGwgfHwgbmV4dEVsZW1lbnQgPT09IGZhbHNlO1xuICBpZiAocHJldkVtcHR5IHx8IG5leHRFbXB0eSkge1xuICAgIHJldHVybiBwcmV2RW1wdHkgPT09IG5leHRFbXB0eTtcbiAgfVxuXG4gIHZhciBwcmV2VHlwZSA9IHR5cGVvZiBwcmV2RWxlbWVudDtcbiAgdmFyIG5leHRUeXBlID0gdHlwZW9mIG5leHRFbGVtZW50O1xuICBpZiAocHJldlR5cGUgPT09ICdzdHJpbmcnIHx8IHByZXZUeXBlID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBuZXh0VHlwZSA9PT0gJ3N0cmluZycgfHwgbmV4dFR5cGUgPT09ICdudW1iZXInO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXh0VHlwZSA9PT0gJ29iamVjdCcgJiYgcHJldkVsZW1lbnQudHlwZSA9PT0gbmV4dEVsZW1lbnQudHlwZSAmJiBwcmV2RWxlbWVudC5rZXkgPT09IG5leHRFbGVtZW50LmtleTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHRyYXZlcnNlQWxsQ2hpbGRyZW5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlSGFuZGxlcycpO1xuXG52YXIgZ2V0SXRlcmF0b3JGbiA9IHJlcXVpcmUoJy4vZ2V0SXRlcmF0b3JGbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBTRVBBUkFUT1IgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5TRVBBUkFUT1I7XG52YXIgU1VCU0VQQVJBVE9SID0gJzonO1xuXG4vKipcbiAqIFRPRE86IFRlc3QgdGhhdCBhIHNpbmdsZSBjaGlsZCBhbmQgYW4gYXJyYXkgd2l0aCBvbmUgaXRlbSBoYXZlIHRoZSBzYW1lIGtleVxuICogcGF0dGVybi5cbiAqL1xuXG52YXIgdXNlclByb3ZpZGVkS2V5RXNjYXBlckxvb2t1cCA9IHtcbiAgJz0nOiAnPTAnLFxuICAnLic6ICc9MScsXG4gICc6JzogJz0yJ1xufTtcblxudmFyIHVzZXJQcm92aWRlZEtleUVzY2FwZVJlZ2V4ID0gL1s9LjpdL2c7XG5cbnZhciBkaWRXYXJuQWJvdXRNYXBzID0gZmFsc2U7XG5cbmZ1bmN0aW9uIHVzZXJQcm92aWRlZEtleUVzY2FwZXIobWF0Y2gpIHtcbiAgcmV0dXJuIHVzZXJQcm92aWRlZEtleUVzY2FwZXJMb29rdXBbbWF0Y2hdO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEga2V5IHN0cmluZyB0aGF0IGlkZW50aWZpZXMgYSBjb21wb25lbnQgd2l0aGluIGEgc2V0LlxuICpcbiAqIEBwYXJhbSB7Kn0gY29tcG9uZW50IEEgY29tcG9uZW50IHRoYXQgY291bGQgY29udGFpbiBhIG1hbnVhbCBrZXkuXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggdGhhdCBpcyB1c2VkIGlmIGEgbWFudWFsIGtleSBpcyBub3QgcHJvdmlkZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldENvbXBvbmVudEtleShjb21wb25lbnQsIGluZGV4KSB7XG4gIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50LmtleSAhPSBudWxsKSB7XG4gICAgLy8gRXhwbGljaXQga2V5XG4gICAgcmV0dXJuIHdyYXBVc2VyUHJvdmlkZWRLZXkoY29tcG9uZW50LmtleSk7XG4gIH1cbiAgLy8gSW1wbGljaXQga2V5IGRldGVybWluZWQgYnkgdGhlIGluZGV4IGluIHRoZSBzZXRcbiAgcmV0dXJuIGluZGV4LnRvU3RyaW5nKDM2KTtcbn1cblxuLyoqXG4gKiBFc2NhcGUgYSBjb21wb25lbnQga2V5IHNvIHRoYXQgaXQgaXMgc2FmZSB0byB1c2UgaW4gYSByZWFjdGlkLlxuICpcbiAqIEBwYXJhbSB7Kn0gdGV4dCBDb21wb25lbnQga2V5IHRvIGJlIGVzY2FwZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEFuIGVzY2FwZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBlc2NhcGVVc2VyUHJvdmlkZWRLZXkodGV4dCkge1xuICByZXR1cm4gKCcnICsgdGV4dCkucmVwbGFjZSh1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCwgdXNlclByb3ZpZGVkS2V5RXNjYXBlcik7XG59XG5cbi8qKlxuICogV3JhcCBhIGBrZXlgIHZhbHVlIGV4cGxpY2l0bHkgcHJvdmlkZWQgYnkgdGhlIHVzZXIgdG8gZGlzdGluZ3Vpc2ggaXQgZnJvbVxuICogaW1wbGljaXRseS1nZW5lcmF0ZWQga2V5cyBnZW5lcmF0ZWQgYnkgYSBjb21wb25lbnQncyBpbmRleCBpbiBpdHMgcGFyZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVmFsdWUgb2YgYSB1c2VyLXByb3ZpZGVkIGBrZXlgIGF0dHJpYnV0ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiB3cmFwVXNlclByb3ZpZGVkS2V5KGtleSkge1xuICByZXR1cm4gJyQnICsgZXNjYXBlVXNlclByb3ZpZGVkS2V5KGtleSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcGFyYW0geyFzdHJpbmd9IG5hbWVTb0ZhciBOYW1lIG9mIHRoZSBrZXkgcGF0aCBzbyBmYXIuXG4gKiBAcGFyYW0geyFmdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2sgdG8gaW52b2tlIHdpdGggZWFjaCBjaGlsZCBmb3VuZC5cbiAqIEBwYXJhbSB7Pyp9IHRyYXZlcnNlQ29udGV4dCBVc2VkIHRvIHBhc3MgaW5mb3JtYXRpb24gdGhyb3VnaG91dCB0aGUgdHJhdmVyc2FsXG4gKiBwcm9jZXNzLlxuICogQHJldHVybiB7IW51bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbiBpbiB0aGlzIHN1YnRyZWUuXG4gKi9cbmZ1bmN0aW9uIHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkcmVuLCBuYW1lU29GYXIsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgY2hpbGRyZW47XG5cbiAgaWYgKHR5cGUgPT09ICd1bmRlZmluZWQnIHx8IHR5cGUgPT09ICdib29sZWFuJykge1xuICAgIC8vIEFsbCBvZiB0aGUgYWJvdmUgYXJlIHBlcmNlaXZlZCBhcyBudWxsLlxuICAgIGNoaWxkcmVuID0gbnVsbDtcbiAgfVxuXG4gIGlmIChjaGlsZHJlbiA9PT0gbnVsbCB8fCB0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBlID09PSAnbnVtYmVyJyB8fCBSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoY2hpbGRyZW4pKSB7XG4gICAgY2FsbGJhY2sodHJhdmVyc2VDb250ZXh0LCBjaGlsZHJlbixcbiAgICAvLyBJZiBpdCdzIHRoZSBvbmx5IGNoaWxkLCB0cmVhdCB0aGUgbmFtZSBhcyBpZiBpdCB3YXMgd3JhcHBlZCBpbiBhbiBhcnJheVxuICAgIC8vIHNvIHRoYXQgaXQncyBjb25zaXN0ZW50IGlmIHRoZSBudW1iZXIgb2YgY2hpbGRyZW4gZ3Jvd3MuXG4gICAgbmFtZVNvRmFyID09PSAnJyA/IFNFUEFSQVRPUiArIGdldENvbXBvbmVudEtleShjaGlsZHJlbiwgMCkgOiBuYW1lU29GYXIpO1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgdmFyIGNoaWxkO1xuICB2YXIgbmV4dE5hbWU7XG4gIHZhciBzdWJ0cmVlQ291bnQgPSAwOyAvLyBDb3VudCBvZiBjaGlsZHJlbiBmb3VuZCBpbiB0aGUgY3VycmVudCBzdWJ0cmVlLlxuICB2YXIgbmV4dE5hbWVQcmVmaXggPSBuYW1lU29GYXIgPT09ICcnID8gU0VQQVJBVE9SIDogbmFtZVNvRmFyICsgU1VCU0VQQVJBVE9SO1xuXG4gIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICBuZXh0TmFtZSA9IG5leHROYW1lUHJlZml4ICsgZ2V0Q29tcG9uZW50S2V5KGNoaWxkLCBpKTtcbiAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4oY2hpbGRyZW4pO1xuICAgIGlmIChpdGVyYXRvckZuKSB7XG4gICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvckZuLmNhbGwoY2hpbGRyZW4pO1xuICAgICAgdmFyIHN0ZXA7XG4gICAgICBpZiAoaXRlcmF0b3JGbiAhPT0gY2hpbGRyZW4uZW50cmllcykge1xuICAgICAgICB2YXIgaWkgPSAwO1xuICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgY2hpbGQgPSBzdGVwLnZhbHVlO1xuICAgICAgICAgIG5leHROYW1lID0gbmV4dE5hbWVQcmVmaXggKyBnZXRDb21wb25lbnRLZXkoY2hpbGQsIGlpKyspO1xuICAgICAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGRpZFdhcm5BYm91dE1hcHMsICdVc2luZyBNYXBzIGFzIGNoaWxkcmVuIGlzIG5vdCB5ZXQgZnVsbHkgc3VwcG9ydGVkLiBJdCBpcyBhbiAnICsgJ2V4cGVyaW1lbnRhbCBmZWF0dXJlIHRoYXQgbWlnaHQgYmUgcmVtb3ZlZC4gQ29udmVydCBpdCB0byBhICcgKyAnc2VxdWVuY2UgLyBpdGVyYWJsZSBvZiBrZXllZCBSZWFjdEVsZW1lbnRzIGluc3RlYWQuJykgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgZGlkV2FybkFib3V0TWFwcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSXRlcmF0b3Igd2lsbCBwcm92aWRlIGVudHJ5IFtrLHZdIHR1cGxlcyByYXRoZXIgdGhhbiB2YWx1ZXMuXG4gICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICB2YXIgZW50cnkgPSBzdGVwLnZhbHVlO1xuICAgICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgICAgY2hpbGQgPSBlbnRyeVsxXTtcbiAgICAgICAgICAgIG5leHROYW1lID0gbmV4dE5hbWVQcmVmaXggKyB3cmFwVXNlclByb3ZpZGVkS2V5KGVudHJ5WzBdKSArIFNVQlNFUEFSQVRPUiArIGdldENvbXBvbmVudEtleShjaGlsZCwgMCk7XG4gICAgICAgICAgICBzdWJ0cmVlQ291bnQgKz0gdHJhdmVyc2VBbGxDaGlsZHJlbkltcGwoY2hpbGQsIG5leHROYW1lLCBjYWxsYmFjaywgdHJhdmVyc2VDb250ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICB2YXIgYWRkZW5kdW0gPSAnJztcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGFkZGVuZHVtID0gJyBJZiB5b3UgbWVhbnQgdG8gcmVuZGVyIGEgY29sbGVjdGlvbiBvZiBjaGlsZHJlbiwgdXNlIGFuIGFycmF5ICcgKyAnaW5zdGVhZCBvciB3cmFwIHRoZSBvYmplY3QgdXNpbmcgY3JlYXRlRnJhZ21lbnQob2JqZWN0KSBmcm9tIHRoZSAnICsgJ1JlYWN0IGFkZC1vbnMuJztcbiAgICAgICAgaWYgKGNoaWxkcmVuLl9pc1JlYWN0RWxlbWVudCkge1xuICAgICAgICAgIGFkZGVuZHVtID0gJyBJdCBsb29rcyBsaWtlIHlvdVxcJ3JlIHVzaW5nIGFuIGVsZW1lbnQgY3JlYXRlZCBieSBhIGRpZmZlcmVudCAnICsgJ3ZlcnNpb24gb2YgUmVhY3QuIE1ha2Ugc3VyZSB0byB1c2Ugb25seSBvbmUgY29weSBvZiBSZWFjdC4nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG4gICAgICAgICAgdmFyIG5hbWUgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKTtcbiAgICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgICAgYWRkZW5kdW0gKz0gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIGNoaWxkcmVuU3RyaW5nID0gU3RyaW5nKGNoaWxkcmVuKTtcbiAgICAgICFmYWxzZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdPYmplY3RzIGFyZSBub3QgdmFsaWQgYXMgYSBSZWFjdCBjaGlsZCAoZm91bmQ6ICVzKS4lcycsIGNoaWxkcmVuU3RyaW5nID09PSAnW29iamVjdCBPYmplY3RdJyA/ICdvYmplY3Qgd2l0aCBrZXlzIHsnICsgT2JqZWN0LmtleXMoY2hpbGRyZW4pLmpvaW4oJywgJykgKyAnfScgOiBjaGlsZHJlblN0cmluZywgYWRkZW5kdW0pIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3VidHJlZUNvdW50O1xufVxuXG4vKipcbiAqIFRyYXZlcnNlcyBjaGlsZHJlbiB0aGF0IGFyZSB0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmAsIGJ1dFxuICogbWlnaHQgYWxzbyBiZSBzcGVjaWZpZWQgdGhyb3VnaCBhdHRyaWJ1dGVzOlxuICpcbiAqIC0gYHRyYXZlcnNlQWxsQ2hpbGRyZW4odGhpcy5wcm9wcy5jaGlsZHJlbiwgLi4uKWBcbiAqIC0gYHRyYXZlcnNlQWxsQ2hpbGRyZW4odGhpcy5wcm9wcy5sZWZ0UGFuZWxDaGlsZHJlbiwgLi4uKWBcbiAqXG4gKiBUaGUgYHRyYXZlcnNlQ29udGV4dGAgaXMgYW4gb3B0aW9uYWwgYXJndW1lbnQgdGhhdCBpcyBwYXNzZWQgdGhyb3VnaCB0aGVcbiAqIGVudGlyZSB0cmF2ZXJzYWwuIEl0IGNhbiBiZSB1c2VkIHRvIHN0b3JlIGFjY3VtdWxhdGlvbnMgb3IgYW55dGhpbmcgZWxzZSB0aGF0XG4gKiB0aGUgY2FsbGJhY2sgbWlnaHQgZmluZCByZWxldmFudC5cbiAqXG4gKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIG9iamVjdC5cbiAqIEBwYXJhbSB7IWZ1bmN0aW9ufSBjYWxsYmFjayBUbyBpbnZva2UgdXBvbiB0cmF2ZXJzaW5nIGVhY2ggY2hpbGQuXG4gKiBAcGFyYW0gez8qfSB0cmF2ZXJzZUNvbnRleHQgQ29udGV4dCBmb3IgdHJhdmVyc2FsLlxuICogQHJldHVybiB7IW51bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbiBpbiB0aGlzIHN1YnRyZWUuXG4gKi9cbmZ1bmN0aW9uIHRyYXZlcnNlQWxsQ2hpbGRyZW4oY2hpbGRyZW4sIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpIHtcbiAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHJldHVybiB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZHJlbiwgJycsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRyYXZlcnNlQWxsQ2hpbGRyZW47IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSB2YWxpZGF0ZURPTU5lc3RpbmdcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciB2YWxpZGF0ZURPTU5lc3RpbmcgPSBlbXB0eUZ1bmN0aW9uO1xuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAvLyBUaGlzIHZhbGlkYXRpb24gY29kZSB3YXMgd3JpdHRlbiBiYXNlZCBvbiB0aGUgSFRNTDUgcGFyc2luZyBzcGVjOlxuICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNoYXMtYW4tZWxlbWVudC1pbi1zY29wZVxuICAvL1xuICAvLyBOb3RlOiB0aGlzIGRvZXMgbm90IGNhdGNoIGFsbCBpbnZhbGlkIG5lc3RpbmcsIG5vciBkb2VzIGl0IHRyeSB0byAoYXMgaXQnc1xuICAvLyBub3QgY2xlYXIgd2hhdCBwcmFjdGljYWwgYmVuZWZpdCBkb2luZyBzbyBwcm92aWRlcyk7IGluc3RlYWQsIHdlIHdhcm4gb25seVxuICAvLyBmb3IgY2FzZXMgd2hlcmUgdGhlIHBhcnNlciB3aWxsIGdpdmUgYSBwYXJzZSB0cmVlIGRpZmZlcmluZyBmcm9tIHdoYXQgUmVhY3RcbiAgLy8gaW50ZW5kZWQuIEZvciBleGFtcGxlLCA8Yj48ZGl2PjwvZGl2PjwvYj4gaXMgaW52YWxpZCBidXQgd2UgZG9uJ3Qgd2FyblxuICAvLyBiZWNhdXNlIGl0IHN0aWxsIHBhcnNlcyBjb3JyZWN0bHk7IHdlIGRvIHdhcm4gZm9yIG90aGVyIGNhc2VzIGxpa2UgbmVzdGVkXG4gIC8vIDxwPiB0YWdzIHdoZXJlIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHNlY29uZCBlbGVtZW50IGltcGxpY2l0bHkgY2xvc2VzIHRoZVxuICAvLyBmaXJzdCwgY2F1c2luZyBhIGNvbmZ1c2luZyBtZXNzLlxuXG4gIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3NwZWNpYWxcbiAgdmFyIHNwZWNpYWxUYWdzID0gWydhZGRyZXNzJywgJ2FwcGxldCcsICdhcmVhJywgJ2FydGljbGUnLCAnYXNpZGUnLCAnYmFzZScsICdiYXNlZm9udCcsICdiZ3NvdW5kJywgJ2Jsb2NrcXVvdGUnLCAnYm9keScsICdicicsICdidXR0b24nLCAnY2FwdGlvbicsICdjZW50ZXInLCAnY29sJywgJ2NvbGdyb3VwJywgJ2RkJywgJ2RldGFpbHMnLCAnZGlyJywgJ2RpdicsICdkbCcsICdkdCcsICdlbWJlZCcsICdmaWVsZHNldCcsICdmaWdjYXB0aW9uJywgJ2ZpZ3VyZScsICdmb290ZXInLCAnZm9ybScsICdmcmFtZScsICdmcmFtZXNldCcsICdoMScsICdoMicsICdoMycsICdoNCcsICdoNScsICdoNicsICdoZWFkJywgJ2hlYWRlcicsICdoZ3JvdXAnLCAnaHInLCAnaHRtbCcsICdpZnJhbWUnLCAnaW1nJywgJ2lucHV0JywgJ2lzaW5kZXgnLCAnbGknLCAnbGluaycsICdsaXN0aW5nJywgJ21haW4nLCAnbWFycXVlZScsICdtZW51JywgJ21lbnVpdGVtJywgJ21ldGEnLCAnbmF2JywgJ25vZW1iZWQnLCAnbm9mcmFtZXMnLCAnbm9zY3JpcHQnLCAnb2JqZWN0JywgJ29sJywgJ3AnLCAncGFyYW0nLCAncGxhaW50ZXh0JywgJ3ByZScsICdzY3JpcHQnLCAnc2VjdGlvbicsICdzZWxlY3QnLCAnc291cmNlJywgJ3N0eWxlJywgJ3N1bW1hcnknLCAndGFibGUnLCAndGJvZHknLCAndGQnLCAndGVtcGxhdGUnLCAndGV4dGFyZWEnLCAndGZvb3QnLCAndGgnLCAndGhlYWQnLCAndGl0bGUnLCAndHInLCAndHJhY2snLCAndWwnLCAnd2JyJywgJ3htcCddO1xuXG4gIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI2hhcy1hbi1lbGVtZW50LWluLXNjb3BlXG4gIHZhciBpblNjb3BlVGFncyA9IFsnYXBwbGV0JywgJ2NhcHRpb24nLCAnaHRtbCcsICd0YWJsZScsICd0ZCcsICd0aCcsICdtYXJxdWVlJywgJ29iamVjdCcsICd0ZW1wbGF0ZScsXG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjaHRtbC1pbnRlZ3JhdGlvbi1wb2ludFxuICAvLyBUT0RPOiBEaXN0aW5ndWlzaCBieSBuYW1lc3BhY2UgaGVyZSAtLSBmb3IgPHRpdGxlPiwgaW5jbHVkaW5nIGl0IGhlcmVcbiAgLy8gZXJycyBvbiB0aGUgc2lkZSBvZiBmZXdlciB3YXJuaW5nc1xuICAnZm9yZWlnbk9iamVjdCcsICdkZXNjJywgJ3RpdGxlJ107XG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjaGFzLWFuLWVsZW1lbnQtaW4tYnV0dG9uLXNjb3BlXG4gIHZhciBidXR0b25TY29wZVRhZ3MgPSBpblNjb3BlVGFncy5jb25jYXQoWydidXR0b24nXSk7XG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjZ2VuZXJhdGUtaW1wbGllZC1lbmQtdGFnc1xuICB2YXIgaW1wbGllZEVuZFRhZ3MgPSBbJ2RkJywgJ2R0JywgJ2xpJywgJ29wdGlvbicsICdvcHRncm91cCcsICdwJywgJ3JwJywgJ3J0J107XG5cbiAgdmFyIGVtcHR5QW5jZXN0b3JJbmZvID0ge1xuICAgIHBhcmVudFRhZzogbnVsbCxcblxuICAgIGZvcm1UYWc6IG51bGwsXG4gICAgYVRhZ0luU2NvcGU6IG51bGwsXG4gICAgYnV0dG9uVGFnSW5TY29wZTogbnVsbCxcbiAgICBub2JyVGFnSW5TY29wZTogbnVsbCxcbiAgICBwVGFnSW5CdXR0b25TY29wZTogbnVsbCxcblxuICAgIGxpc3RJdGVtVGFnQXV0b2Nsb3Npbmc6IG51bGwsXG4gICAgZGxJdGVtVGFnQXV0b2Nsb3Npbmc6IG51bGxcbiAgfTtcblxuICB2YXIgdXBkYXRlZEFuY2VzdG9ySW5mbyA9IGZ1bmN0aW9uIChvbGRJbmZvLCB0YWcsIGluc3RhbmNlKSB7XG4gICAgdmFyIGFuY2VzdG9ySW5mbyA9IGFzc2lnbih7fSwgb2xkSW5mbyB8fCBlbXB0eUFuY2VzdG9ySW5mbyk7XG4gICAgdmFyIGluZm8gPSB7IHRhZzogdGFnLCBpbnN0YW5jZTogaW5zdGFuY2UgfTtcblxuICAgIGlmIChpblNjb3BlVGFncy5pbmRleE9mKHRhZykgIT09IC0xKSB7XG4gICAgICBhbmNlc3RvckluZm8uYVRhZ0luU2NvcGUgPSBudWxsO1xuICAgICAgYW5jZXN0b3JJbmZvLmJ1dHRvblRhZ0luU2NvcGUgPSBudWxsO1xuICAgICAgYW5jZXN0b3JJbmZvLm5vYnJUYWdJblNjb3BlID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGJ1dHRvblNjb3BlVGFncy5pbmRleE9mKHRhZykgIT09IC0xKSB7XG4gICAgICBhbmNlc3RvckluZm8ucFRhZ0luQnV0dG9uU2NvcGUgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNlZSBydWxlcyBmb3IgJ2xpJywgJ2RkJywgJ2R0JyBzdGFydCB0YWdzIGluXG4gICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWluYm9keVxuICAgIGlmIChzcGVjaWFsVGFncy5pbmRleE9mKHRhZykgIT09IC0xICYmIHRhZyAhPT0gJ2FkZHJlc3MnICYmIHRhZyAhPT0gJ2RpdicgJiYgdGFnICE9PSAncCcpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5saXN0SXRlbVRhZ0F1dG9jbG9zaW5nID0gbnVsbDtcbiAgICAgIGFuY2VzdG9ySW5mby5kbEl0ZW1UYWdBdXRvY2xvc2luZyA9IG51bGw7XG4gICAgfVxuXG4gICAgYW5jZXN0b3JJbmZvLnBhcmVudFRhZyA9IGluZm87XG5cbiAgICBpZiAodGFnID09PSAnZm9ybScpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5mb3JtVGFnID0gaW5mbztcbiAgICB9XG4gICAgaWYgKHRhZyA9PT0gJ2EnKSB7XG4gICAgICBhbmNlc3RvckluZm8uYVRhZ0luU2NvcGUgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnYnV0dG9uJykge1xuICAgICAgYW5jZXN0b3JJbmZvLmJ1dHRvblRhZ0luU2NvcGUgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnbm9icicpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5ub2JyVGFnSW5TY29wZSA9IGluZm87XG4gICAgfVxuICAgIGlmICh0YWcgPT09ICdwJykge1xuICAgICAgYW5jZXN0b3JJbmZvLnBUYWdJbkJ1dHRvblNjb3BlID0gaW5mbztcbiAgICB9XG4gICAgaWYgKHRhZyA9PT0gJ2xpJykge1xuICAgICAgYW5jZXN0b3JJbmZvLmxpc3RJdGVtVGFnQXV0b2Nsb3NpbmcgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnZGQnIHx8IHRhZyA9PT0gJ2R0Jykge1xuICAgICAgYW5jZXN0b3JJbmZvLmRsSXRlbVRhZ0F1dG9jbG9zaW5nID0gaW5mbztcbiAgICB9XG5cbiAgICByZXR1cm4gYW5jZXN0b3JJbmZvO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXJcbiAgICovXG4gIHZhciBpc1RhZ1ZhbGlkV2l0aFBhcmVudCA9IGZ1bmN0aW9uICh0YWcsIHBhcmVudFRhZykge1xuICAgIC8vIEZpcnN0LCBsZXQncyBjaGVjayBpZiB3ZSdyZSBpbiBhbiB1bnVzdWFsIHBhcnNpbmcgbW9kZS4uLlxuICAgIHN3aXRjaCAocGFyZW50VGFnKSB7XG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5zZWxlY3RcbiAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdvcHRpb24nIHx8IHRhZyA9PT0gJ29wdGdyb3VwJyB8fCB0YWcgPT09ICcjdGV4dCc7XG4gICAgICBjYXNlICdvcHRncm91cCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdvcHRpb24nIHx8IHRhZyA9PT0gJyN0ZXh0JztcbiAgICAgIC8vIFN0cmljdGx5IHNwZWFraW5nLCBzZWVpbmcgYW4gPG9wdGlvbj4gZG9lc24ndCBtZWFuIHdlJ3JlIGluIGEgPHNlbGVjdD5cbiAgICAgIC8vIGJ1dFxuICAgICAgY2FzZSAnb3B0aW9uJzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJyN0ZXh0JztcblxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWludGRcbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmNhcHRpb25cbiAgICAgIC8vIE5vIHNwZWNpYWwgYmVoYXZpb3Igc2luY2UgdGhlc2UgcnVsZXMgZmFsbCBiYWNrIHRvIFwiaW4gYm9keVwiIG1vZGUgZm9yXG4gICAgICAvLyBhbGwgZXhjZXB0IHNwZWNpYWwgdGFibGUgbm9kZXMgd2hpY2ggY2F1c2UgYmFkIHBhcnNpbmcgYmVoYXZpb3IgYW55d2F5LlxuXG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW50clxuICAgICAgY2FzZSAndHInOlxuICAgICAgICByZXR1cm4gdGFnID09PSAndGgnIHx8IHRhZyA9PT0gJ3RkJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnRib2R5XG4gICAgICBjYXNlICd0Ym9keSc6XG4gICAgICBjYXNlICd0aGVhZCc6XG4gICAgICBjYXNlICd0Zm9vdCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICd0cicgfHwgdGFnID09PSAnc3R5bGUnIHx8IHRhZyA9PT0gJ3NjcmlwdCcgfHwgdGFnID09PSAndGVtcGxhdGUnO1xuXG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5jb2xncm91cFxuICAgICAgY2FzZSAnY29sZ3JvdXAnOlxuICAgICAgICByZXR1cm4gdGFnID09PSAnY29sJyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnRhYmxlXG4gICAgICBjYXNlICd0YWJsZSc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdjYXB0aW9uJyB8fCB0YWcgPT09ICdjb2xncm91cCcgfHwgdGFnID09PSAndGJvZHknIHx8IHRhZyA9PT0gJ3Rmb290JyB8fCB0YWcgPT09ICd0aGVhZCcgfHwgdGFnID09PSAnc3R5bGUnIHx8IHRhZyA9PT0gJ3NjcmlwdCcgfHwgdGFnID09PSAndGVtcGxhdGUnO1xuXG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5oZWFkXG4gICAgICBjYXNlICdoZWFkJzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ2Jhc2UnIHx8IHRhZyA9PT0gJ2Jhc2Vmb250JyB8fCB0YWcgPT09ICdiZ3NvdW5kJyB8fCB0YWcgPT09ICdsaW5rJyB8fCB0YWcgPT09ICdtZXRhJyB8fCB0YWcgPT09ICd0aXRsZScgfHwgdGFnID09PSAnbm9zY3JpcHQnIHx8IHRhZyA9PT0gJ25vZnJhbWVzJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3NlbWFudGljcy5odG1sI3RoZS1odG1sLWVsZW1lbnRcbiAgICAgIGNhc2UgJ2h0bWwnOlxuICAgICAgICByZXR1cm4gdGFnID09PSAnaGVhZCcgfHwgdGFnID09PSAnYm9keSc7XG4gICAgfVxuXG4gICAgLy8gUHJvYmFibHkgaW4gdGhlIFwiaW4gYm9keVwiIHBhcnNpbmcgbW9kZSwgc28gd2Ugb3V0bGF3IG9ubHkgdGFnIGNvbWJvc1xuICAgIC8vIHdoZXJlIHRoZSBwYXJzaW5nIHJ1bGVzIGNhdXNlIGltcGxpY2l0IG9wZW5zIG9yIGNsb3NlcyB0byBiZSBhZGRlZC5cbiAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5ib2R5XG4gICAgc3dpdGNoICh0YWcpIHtcbiAgICAgIGNhc2UgJ2gxJzpcbiAgICAgIGNhc2UgJ2gyJzpcbiAgICAgIGNhc2UgJ2gzJzpcbiAgICAgIGNhc2UgJ2g0JzpcbiAgICAgIGNhc2UgJ2g1JzpcbiAgICAgIGNhc2UgJ2g2JzpcbiAgICAgICAgcmV0dXJuIHBhcmVudFRhZyAhPT0gJ2gxJyAmJiBwYXJlbnRUYWcgIT09ICdoMicgJiYgcGFyZW50VGFnICE9PSAnaDMnICYmIHBhcmVudFRhZyAhPT0gJ2g0JyAmJiBwYXJlbnRUYWcgIT09ICdoNScgJiYgcGFyZW50VGFnICE9PSAnaDYnO1xuXG4gICAgICBjYXNlICdycCc6XG4gICAgICBjYXNlICdydCc6XG4gICAgICAgIHJldHVybiBpbXBsaWVkRW5kVGFncy5pbmRleE9mKHBhcmVudFRhZykgPT09IC0xO1xuXG4gICAgICBjYXNlICdjYXB0aW9uJzpcbiAgICAgIGNhc2UgJ2NvbCc6XG4gICAgICBjYXNlICdjb2xncm91cCc6XG4gICAgICBjYXNlICdmcmFtZSc6XG4gICAgICBjYXNlICdoZWFkJzpcbiAgICAgIGNhc2UgJ3Rib2R5JzpcbiAgICAgIGNhc2UgJ3RkJzpcbiAgICAgIGNhc2UgJ3Rmb290JzpcbiAgICAgIGNhc2UgJ3RoJzpcbiAgICAgIGNhc2UgJ3RoZWFkJzpcbiAgICAgIGNhc2UgJ3RyJzpcbiAgICAgICAgLy8gVGhlc2UgdGFncyBhcmUgb25seSB2YWxpZCB3aXRoIGEgZmV3IHBhcmVudHMgdGhhdCBoYXZlIHNwZWNpYWwgY2hpbGRcbiAgICAgICAgLy8gcGFyc2luZyBydWxlcyAtLSBpZiB3ZSdyZSBkb3duIGhlcmUsIHRoZW4gbm9uZSBvZiB0aG9zZSBtYXRjaGVkIGFuZFxuICAgICAgICAvLyBzbyB3ZSBhbGxvdyBpdCBvbmx5IGlmIHdlIGRvbid0IGtub3cgd2hhdCB0aGUgcGFyZW50IGlzLCBhcyBhbGwgb3RoZXJcbiAgICAgICAgLy8gY2FzZXMgYXJlIGludmFsaWQuXG4gICAgICAgIHJldHVybiBwYXJlbnRUYWcgPT0gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyXG4gICAqL1xuICB2YXIgZmluZEludmFsaWRBbmNlc3RvckZvclRhZyA9IGZ1bmN0aW9uICh0YWcsIGFuY2VzdG9ySW5mbykge1xuICAgIHN3aXRjaCAodGFnKSB7XG4gICAgICBjYXNlICdhZGRyZXNzJzpcbiAgICAgIGNhc2UgJ2FydGljbGUnOlxuICAgICAgY2FzZSAnYXNpZGUnOlxuICAgICAgY2FzZSAnYmxvY2txdW90ZSc6XG4gICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgY2FzZSAnZGV0YWlscyc6XG4gICAgICBjYXNlICdkaWFsb2cnOlxuICAgICAgY2FzZSAnZGlyJzpcbiAgICAgIGNhc2UgJ2Rpdic6XG4gICAgICBjYXNlICdkbCc6XG4gICAgICBjYXNlICdmaWVsZHNldCc6XG4gICAgICBjYXNlICdmaWdjYXB0aW9uJzpcbiAgICAgIGNhc2UgJ2ZpZ3VyZSc6XG4gICAgICBjYXNlICdmb290ZXInOlxuICAgICAgY2FzZSAnaGVhZGVyJzpcbiAgICAgIGNhc2UgJ2hncm91cCc6XG4gICAgICBjYXNlICdtYWluJzpcbiAgICAgIGNhc2UgJ21lbnUnOlxuICAgICAgY2FzZSAnbmF2JzpcbiAgICAgIGNhc2UgJ29sJzpcbiAgICAgIGNhc2UgJ3AnOlxuICAgICAgY2FzZSAnc2VjdGlvbic6XG4gICAgICBjYXNlICdzdW1tYXJ5JzpcbiAgICAgIGNhc2UgJ3VsJzpcblxuICAgICAgY2FzZSAncHJlJzpcbiAgICAgIGNhc2UgJ2xpc3RpbmcnOlxuXG4gICAgICBjYXNlICd0YWJsZSc6XG5cbiAgICAgIGNhc2UgJ2hyJzpcblxuICAgICAgY2FzZSAneG1wJzpcblxuICAgICAgY2FzZSAnaDEnOlxuICAgICAgY2FzZSAnaDInOlxuICAgICAgY2FzZSAnaDMnOlxuICAgICAgY2FzZSAnaDQnOlxuICAgICAgY2FzZSAnaDUnOlxuICAgICAgY2FzZSAnaDYnOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLnBUYWdJbkJ1dHRvblNjb3BlO1xuXG4gICAgICBjYXNlICdmb3JtJzpcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5mb3JtVGFnIHx8IGFuY2VzdG9ySW5mby5wVGFnSW5CdXR0b25TY29wZTtcblxuICAgICAgY2FzZSAnbGknOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmxpc3RJdGVtVGFnQXV0b2Nsb3Npbmc7XG5cbiAgICAgIGNhc2UgJ2RkJzpcbiAgICAgIGNhc2UgJ2R0JzpcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5kbEl0ZW1UYWdBdXRvY2xvc2luZztcblxuICAgICAgY2FzZSAnYnV0dG9uJzpcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5idXR0b25UYWdJblNjb3BlO1xuXG4gICAgICBjYXNlICdhJzpcbiAgICAgICAgLy8gU3BlYyBzYXlzIHNvbWV0aGluZyBhYm91dCBzdG9yaW5nIGEgbGlzdCBvZiBtYXJrZXJzLCBidXQgaXQgc291bmRzXG4gICAgICAgIC8vIGVxdWl2YWxlbnQgdG8gdGhpcyBjaGVjay5cbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZTtcblxuICAgICAgY2FzZSAnbm9icic6XG4gICAgICAgIHJldHVybiBhbmNlc3RvckluZm8ubm9iclRhZ0luU2NvcGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgUmVhY3RDb21wb3NpdGVDb21wb25lbnQgaW5zdGFuY2UsIHJldHVybiBhIGxpc3Qgb2YgaXRzIHJlY3Vyc2l2ZVxuICAgKiBvd25lcnMsIHN0YXJ0aW5nIGF0IHRoZSByb290IGFuZCBlbmRpbmcgd2l0aCB0aGUgaW5zdGFuY2UgaXRzZWxmLlxuICAgKi9cbiAgdmFyIGZpbmRPd25lclN0YWNrID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgaWYgKCFpbnN0YW5jZSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHZhciBzdGFjayA9IFtdO1xuICAgIC8qZXNsaW50LWRpc2FibGUgc3BhY2UtYWZ0ZXIta2V5d29yZHMgKi9cbiAgICBkbyB7XG4gICAgICAvKmVzbGludC1lbmFibGUgc3BhY2UtYWZ0ZXIta2V5d29yZHMgKi9cbiAgICAgIHN0YWNrLnB1c2goaW5zdGFuY2UpO1xuICAgIH0gd2hpbGUgKGluc3RhbmNlID0gaW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50Ll9vd25lcik7XG4gICAgc3RhY2sucmV2ZXJzZSgpO1xuICAgIHJldHVybiBzdGFjaztcbiAgfTtcblxuICB2YXIgZGlkV2FybiA9IHt9O1xuXG4gIHZhbGlkYXRlRE9NTmVzdGluZyA9IGZ1bmN0aW9uIChjaGlsZFRhZywgY2hpbGRJbnN0YW5jZSwgYW5jZXN0b3JJbmZvKSB7XG4gICAgYW5jZXN0b3JJbmZvID0gYW5jZXN0b3JJbmZvIHx8IGVtcHR5QW5jZXN0b3JJbmZvO1xuICAgIHZhciBwYXJlbnRJbmZvID0gYW5jZXN0b3JJbmZvLnBhcmVudFRhZztcbiAgICB2YXIgcGFyZW50VGFnID0gcGFyZW50SW5mbyAmJiBwYXJlbnRJbmZvLnRhZztcblxuICAgIHZhciBpbnZhbGlkUGFyZW50ID0gaXNUYWdWYWxpZFdpdGhQYXJlbnQoY2hpbGRUYWcsIHBhcmVudFRhZykgPyBudWxsIDogcGFyZW50SW5mbztcbiAgICB2YXIgaW52YWxpZEFuY2VzdG9yID0gaW52YWxpZFBhcmVudCA/IG51bGwgOiBmaW5kSW52YWxpZEFuY2VzdG9yRm9yVGFnKGNoaWxkVGFnLCBhbmNlc3RvckluZm8pO1xuICAgIHZhciBwcm9ibGVtYXRpYyA9IGludmFsaWRQYXJlbnQgfHwgaW52YWxpZEFuY2VzdG9yO1xuXG4gICAgaWYgKHByb2JsZW1hdGljKSB7XG4gICAgICB2YXIgYW5jZXN0b3JUYWcgPSBwcm9ibGVtYXRpYy50YWc7XG4gICAgICB2YXIgYW5jZXN0b3JJbnN0YW5jZSA9IHByb2JsZW1hdGljLmluc3RhbmNlO1xuXG4gICAgICB2YXIgY2hpbGRPd25lciA9IGNoaWxkSW5zdGFuY2UgJiYgY2hpbGRJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuICAgICAgdmFyIGFuY2VzdG9yT3duZXIgPSBhbmNlc3Rvckluc3RhbmNlICYmIGFuY2VzdG9ySW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcblxuICAgICAgdmFyIGNoaWxkT3duZXJzID0gZmluZE93bmVyU3RhY2soY2hpbGRPd25lcik7XG4gICAgICB2YXIgYW5jZXN0b3JPd25lcnMgPSBmaW5kT3duZXJTdGFjayhhbmNlc3Rvck93bmVyKTtcblxuICAgICAgdmFyIG1pblN0YWNrTGVuID0gTWF0aC5taW4oY2hpbGRPd25lcnMubGVuZ3RoLCBhbmNlc3Rvck93bmVycy5sZW5ndGgpO1xuICAgICAgdmFyIGk7XG5cbiAgICAgIHZhciBkZWVwZXN0Q29tbW9uID0gLTE7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbWluU3RhY2tMZW47IGkrKykge1xuICAgICAgICBpZiAoY2hpbGRPd25lcnNbaV0gPT09IGFuY2VzdG9yT3duZXJzW2ldKSB7XG4gICAgICAgICAgZGVlcGVzdENvbW1vbiA9IGk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIFVOS05PV04gPSAnKHVua25vd24pJztcbiAgICAgIHZhciBjaGlsZE93bmVyTmFtZXMgPSBjaGlsZE93bmVycy5zbGljZShkZWVwZXN0Q29tbW9uICsgMSkubWFwKGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgICAgIHJldHVybiBpbnN0LmdldE5hbWUoKSB8fCBVTktOT1dOO1xuICAgICAgfSk7XG4gICAgICB2YXIgYW5jZXN0b3JPd25lck5hbWVzID0gYW5jZXN0b3JPd25lcnMuc2xpY2UoZGVlcGVzdENvbW1vbiArIDEpLm1hcChmdW5jdGlvbiAoaW5zdCkge1xuICAgICAgICByZXR1cm4gaW5zdC5nZXROYW1lKCkgfHwgVU5LTk9XTjtcbiAgICAgIH0pO1xuICAgICAgdmFyIG93bmVySW5mbyA9IFtdLmNvbmNhdChcbiAgICAgIC8vIElmIHRoZSBwYXJlbnQgYW5kIGNoaWxkIGluc3RhbmNlcyBoYXZlIGEgY29tbW9uIG93bmVyIGFuY2VzdG9yLCBzdGFydFxuICAgICAgLy8gd2l0aCB0aGF0IC0tIG90aGVyd2lzZSB3ZSBqdXN0IHN0YXJ0IHdpdGggdGhlIHBhcmVudCdzIG93bmVycy5cbiAgICAgIGRlZXBlc3RDb21tb24gIT09IC0xID8gY2hpbGRPd25lcnNbZGVlcGVzdENvbW1vbl0uZ2V0TmFtZSgpIHx8IFVOS05PV04gOiBbXSwgYW5jZXN0b3JPd25lck5hbWVzLCBhbmNlc3RvclRhZyxcbiAgICAgIC8vIElmIHdlJ3JlIHdhcm5pbmcgYWJvdXQgYW4gaW52YWxpZCAobm9uLXBhcmVudCkgYW5jZXN0cnksIGFkZCAnLi4uJ1xuICAgICAgaW52YWxpZEFuY2VzdG9yID8gWycuLi4nXSA6IFtdLCBjaGlsZE93bmVyTmFtZXMsIGNoaWxkVGFnKS5qb2luKCcgPiAnKTtcblxuICAgICAgdmFyIHdhcm5LZXkgPSAhIWludmFsaWRQYXJlbnQgKyAnfCcgKyBjaGlsZFRhZyArICd8JyArIGFuY2VzdG9yVGFnICsgJ3wnICsgb3duZXJJbmZvO1xuICAgICAgaWYgKGRpZFdhcm5bd2FybktleV0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZGlkV2Fyblt3YXJuS2V5XSA9IHRydWU7XG5cbiAgICAgIGlmIChpbnZhbGlkUGFyZW50KSB7XG4gICAgICAgIHZhciBpbmZvID0gJyc7XG4gICAgICAgIGlmIChhbmNlc3RvclRhZyA9PT0gJ3RhYmxlJyAmJiBjaGlsZFRhZyA9PT0gJ3RyJykge1xuICAgICAgICAgIGluZm8gKz0gJyBBZGQgYSA8dGJvZHk+IHRvIHlvdXIgY29kZSB0byBtYXRjaCB0aGUgRE9NIHRyZWUgZ2VuZXJhdGVkIGJ5ICcgKyAndGhlIGJyb3dzZXIuJztcbiAgICAgICAgfVxuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ3ZhbGlkYXRlRE9NTmVzdGluZyguLi4pOiA8JXM+IGNhbm5vdCBhcHBlYXIgYXMgYSBjaGlsZCBvZiA8JXM+LiAnICsgJ1NlZSAlcy4lcycsIGNoaWxkVGFnLCBhbmNlc3RvclRhZywgb3duZXJJbmZvLCBpbmZvKSA6IHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAndmFsaWRhdGVET01OZXN0aW5nKC4uLik6IDwlcz4gY2Fubm90IGFwcGVhciBhcyBhIGRlc2NlbmRhbnQgb2YgJyArICc8JXM+LiBTZWUgJXMuJywgY2hpbGRUYWcsIGFuY2VzdG9yVGFnLCBvd25lckluZm8pIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleSA9ICdfX3ZhbGlkYXRlRE9NTmVzdGluZ19hbmNlc3RvckluZm8kJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO1xuXG4gIHZhbGlkYXRlRE9NTmVzdGluZy51cGRhdGVkQW5jZXN0b3JJbmZvID0gdXBkYXRlZEFuY2VzdG9ySW5mbztcblxuICAvLyBGb3IgdGVzdGluZ1xuICB2YWxpZGF0ZURPTU5lc3RpbmcuaXNUYWdWYWxpZEluQ29udGV4dCA9IGZ1bmN0aW9uICh0YWcsIGFuY2VzdG9ySW5mbykge1xuICAgIGFuY2VzdG9ySW5mbyA9IGFuY2VzdG9ySW5mbyB8fCBlbXB0eUFuY2VzdG9ySW5mbztcbiAgICB2YXIgcGFyZW50SW5mbyA9IGFuY2VzdG9ySW5mby5wYXJlbnRUYWc7XG4gICAgdmFyIHBhcmVudFRhZyA9IHBhcmVudEluZm8gJiYgcGFyZW50SW5mby50YWc7XG4gICAgcmV0dXJuIGlzVGFnVmFsaWRXaXRoUGFyZW50KHRhZywgcGFyZW50VGFnKSAmJiAhZmluZEludmFsaWRBbmNlc3RvckZvclRhZyh0YWcsIGFuY2VzdG9ySW5mbyk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdmFsaWRhdGVET01OZXN0aW5nOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRMaXN0ZW5lclxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9lbXB0eUZ1bmN0aW9uJyk7XG5cbi8qKlxuICogVXBzdHJlYW0gdmVyc2lvbiBvZiBldmVudCBsaXN0ZW5lci4gRG9lcyBub3QgdGFrZSBpbnRvIGFjY291bnQgc3BlY2lmaWNcbiAqIG5hdHVyZSBvZiBwbGF0Zm9ybS5cbiAqL1xudmFyIEV2ZW50TGlzdGVuZXIgPSB7XG4gIC8qKlxuICAgKiBMaXN0ZW4gdG8gRE9NIGV2ZW50cyBkdXJpbmcgdGhlIGJ1YmJsZSBwaGFzZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdGFyZ2V0IERPTSBlbGVtZW50IHRvIHJlZ2lzdGVyIGxpc3RlbmVyIG9uLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlIEV2ZW50IHR5cGUsIGUuZy4gJ2NsaWNrJyBvciAnbW91c2VvdmVyJy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2sgZnVuY3Rpb24uXG4gICAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IHdpdGggYSBgcmVtb3ZlYCBtZXRob2QuXG4gICAqL1xuICBsaXN0ZW46IGZ1bmN0aW9uICh0YXJnZXQsIGV2ZW50VHlwZSwgY2FsbGJhY2spIHtcbiAgICBpZiAodGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2FsbGJhY2ssIGZhbHNlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2FsbGJhY2ssIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHRhcmdldC5hdHRhY2hFdmVudCkge1xuICAgICAgdGFyZ2V0LmF0dGFjaEV2ZW50KCdvbicgKyBldmVudFR5cGUsIGNhbGxiYWNrKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRhcmdldC5kZXRhY2hFdmVudCgnb24nICsgZXZlbnRUeXBlLCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBMaXN0ZW4gdG8gRE9NIGV2ZW50cyBkdXJpbmcgdGhlIGNhcHR1cmUgcGhhc2UuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRhcmdldCBET00gZWxlbWVudCB0byByZWdpc3RlciBsaXN0ZW5lciBvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZSBFdmVudCB0eXBlLCBlLmcuICdjbGljaycgb3IgJ21vdXNlb3ZlcicuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrIGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IE9iamVjdCB3aXRoIGEgYHJlbW92ZWAgbWV0aG9kLlxuICAgKi9cbiAgY2FwdHVyZTogZnVuY3Rpb24gKHRhcmdldCwgZXZlbnRUeXBlLCBjYWxsYmFjaykge1xuICAgIGlmICh0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQXR0ZW1wdGVkIHRvIGxpc3RlbiB0byBldmVudHMgZHVyaW5nIHRoZSBjYXB0dXJlIHBoYXNlIG9uIGEgJyArICdicm93c2VyIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCB0aGUgY2FwdHVyZSBwaGFzZS4gWW91ciBhcHBsaWNhdGlvbiAnICsgJ3dpbGwgbm90IHJlY2VpdmUgc29tZSBldmVudHMuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmU6IGVtcHR5RnVuY3Rpb25cbiAgICAgIH07XG4gICAgfVxuICB9LFxuXG4gIHJlZ2lzdGVyRGVmYXVsdDogZnVuY3Rpb24gKCkge31cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRMaXN0ZW5lcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXhlY3V0aW9uRW52aXJvbm1lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBjYW5Vc2VET00gPSAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQgJiYgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xuXG4vKipcbiAqIFNpbXBsZSwgbGlnaHR3ZWlnaHQgbW9kdWxlIGFzc2lzdGluZyB3aXRoIHRoZSBkZXRlY3Rpb24gYW5kIGNvbnRleHQgb2ZcbiAqIFdvcmtlci4gSGVscHMgYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jaWVzIGFuZCBhbGxvd3MgY29kZSB0byByZWFzb24gYWJvdXRcbiAqIHdoZXRoZXIgb3Igbm90IHRoZXkgYXJlIGluIGEgV29ya2VyLCBldmVuIGlmIHRoZXkgbmV2ZXIgaW5jbHVkZSB0aGUgbWFpblxuICogYFJlYWN0V29ya2VyYCBkZXBlbmRlbmN5LlxuICovXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSB7XG5cbiAgY2FuVXNlRE9NOiBjYW5Vc2VET00sXG5cbiAgY2FuVXNlV29ya2VyczogdHlwZW9mIFdvcmtlciAhPT0gJ3VuZGVmaW5lZCcsXG5cbiAgY2FuVXNlRXZlbnRMaXN0ZW5lcnM6IGNhblVzZURPTSAmJiAhISh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciB8fCB3aW5kb3cuYXR0YWNoRXZlbnQpLFxuXG4gIGNhblVzZVZpZXdwb3J0OiBjYW5Vc2VET00gJiYgISF3aW5kb3cuc2NyZWVuLFxuXG4gIGlzSW5Xb3JrZXI6ICFjYW5Vc2VET00gLy8gRm9yIG5vdywgdGhpcyBpcyB0cnVlIC0gbWlnaHQgY2hhbmdlIGluIHRoZSBmdXR1cmUuXG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXhlY3V0aW9uRW52aXJvbm1lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGNhbWVsaXplXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgX2h5cGhlblBhdHRlcm4gPSAvLSguKS9nO1xuXG4vKipcbiAqIENhbWVsY2FzZXMgYSBoeXBoZW5hdGVkIHN0cmluZywgZm9yIGV4YW1wbGU6XG4gKlxuICogICA+IGNhbWVsaXplKCdiYWNrZ3JvdW5kLWNvbG9yJylcbiAqICAgPCBcImJhY2tncm91bmRDb2xvclwiXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBjYW1lbGl6ZShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKF9oeXBoZW5QYXR0ZXJuLCBmdW5jdGlvbiAoXywgY2hhcmFjdGVyKSB7XG4gICAgcmV0dXJuIGNoYXJhY3Rlci50b1VwcGVyQ2FzZSgpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjYW1lbGl6ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgY2FtZWxpemVTdHlsZU5hbWVcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FtZWxpemUgPSByZXF1aXJlKCcuL2NhbWVsaXplJyk7XG5cbnZhciBtc1BhdHRlcm4gPSAvXi1tcy0vO1xuXG4vKipcbiAqIENhbWVsY2FzZXMgYSBoeXBoZW5hdGVkIENTUyBwcm9wZXJ0eSBuYW1lLCBmb3IgZXhhbXBsZTpcbiAqXG4gKiAgID4gY2FtZWxpemVTdHlsZU5hbWUoJ2JhY2tncm91bmQtY29sb3InKVxuICogICA8IFwiYmFja2dyb3VuZENvbG9yXCJcbiAqICAgPiBjYW1lbGl6ZVN0eWxlTmFtZSgnLW1vei10cmFuc2l0aW9uJylcbiAqICAgPCBcIk1velRyYW5zaXRpb25cIlxuICogICA+IGNhbWVsaXplU3R5bGVOYW1lKCctbXMtdHJhbnNpdGlvbicpXG4gKiAgIDwgXCJtc1RyYW5zaXRpb25cIlxuICpcbiAqIEFzIEFuZGkgU21pdGggc3VnZ2VzdHNcbiAqIChodHRwOi8vd3d3LmFuZGlzbWl0aC5jb20vYmxvZy8yMDEyLzAyL21vZGVybml6ci1wcmVmaXhlZC8pLCBhbiBgLW1zYCBwcmVmaXhcbiAqIGlzIGNvbnZlcnRlZCB0byBsb3dlcmNhc2UgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGNhbWVsaXplU3R5bGVOYW1lKHN0cmluZykge1xuICByZXR1cm4gY2FtZWxpemUoc3RyaW5nLnJlcGxhY2UobXNQYXR0ZXJuLCAnbXMtJykpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNhbWVsaXplU3R5bGVOYW1lOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBjb250YWluc05vZGVcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNUZXh0Tm9kZSA9IHJlcXVpcmUoJy4vaXNUZXh0Tm9kZScpO1xuXG4vKmVzbGludC1kaXNhYmxlIG5vLWJpdHdpc2UgKi9cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBnaXZlbiBET00gbm9kZSBjb250YWlucyBvciBpcyBhbm90aGVyIERPTSBub2RlLlxuICpcbiAqIEBwYXJhbSB7P0RPTU5vZGV9IG91dGVyTm9kZSBPdXRlciBET00gbm9kZS5cbiAqIEBwYXJhbSB7P0RPTU5vZGV9IGlubmVyTm9kZSBJbm5lciBET00gbm9kZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYG91dGVyTm9kZWAgY29udGFpbnMgb3IgaXMgYGlubmVyTm9kZWAuXG4gKi9cbmZ1bmN0aW9uIGNvbnRhaW5zTm9kZShfeCwgX3gyKSB7XG4gIHZhciBfYWdhaW4gPSB0cnVlO1xuXG4gIF9mdW5jdGlvbjogd2hpbGUgKF9hZ2Fpbikge1xuICAgIHZhciBvdXRlck5vZGUgPSBfeCxcbiAgICAgICAgaW5uZXJOb2RlID0gX3gyO1xuICAgIF9hZ2FpbiA9IGZhbHNlO1xuXG4gICAgaWYgKCFvdXRlck5vZGUgfHwgIWlubmVyTm9kZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAob3V0ZXJOb2RlID09PSBpbm5lck5vZGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoaXNUZXh0Tm9kZShvdXRlck5vZGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChpc1RleHROb2RlKGlubmVyTm9kZSkpIHtcbiAgICAgIF94ID0gb3V0ZXJOb2RlO1xuICAgICAgX3gyID0gaW5uZXJOb2RlLnBhcmVudE5vZGU7XG4gICAgICBfYWdhaW4gPSB0cnVlO1xuICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuICAgIH0gZWxzZSBpZiAob3V0ZXJOb2RlLmNvbnRhaW5zKSB7XG4gICAgICByZXR1cm4gb3V0ZXJOb2RlLmNvbnRhaW5zKGlubmVyTm9kZSk7XG4gICAgfSBlbHNlIGlmIChvdXRlck5vZGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24pIHtcbiAgICAgIHJldHVybiAhIShvdXRlck5vZGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oaW5uZXJOb2RlKSAmIDE2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRhaW5zTm9kZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgY3JlYXRlQXJyYXlGcm9tTWl4ZWRcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdG9BcnJheSA9IHJlcXVpcmUoJy4vdG9BcnJheScpO1xuXG4vKipcbiAqIFBlcmZvcm0gYSBoZXVyaXN0aWMgdGVzdCB0byBkZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGlzIFwiYXJyYXktbGlrZVwiLlxuICpcbiAqICAgQSBtb25rIGFza2VkIEpvc2h1LCBhIFplbiBtYXN0ZXIsIFwiSGFzIGEgZG9nIEJ1ZGRoYSBuYXR1cmU/XCJcbiAqICAgSm9zaHUgcmVwbGllZDogXCJNdS5cIlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZGV0ZXJtaW5lcyBpZiBpdHMgYXJndW1lbnQgaGFzIFwiYXJyYXkgbmF0dXJlXCI6IGl0IHJldHVybnNcbiAqIHRydWUgaWYgdGhlIGFyZ3VtZW50IGlzIGFuIGFjdHVhbCBhcnJheSwgYW4gYGFyZ3VtZW50cycgb2JqZWN0LCBvciBhblxuICogSFRNTENvbGxlY3Rpb24gKGUuZy4gbm9kZS5jaGlsZE5vZGVzIG9yIG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoKSkuXG4gKlxuICogSXQgd2lsbCByZXR1cm4gZmFsc2UgZm9yIG90aGVyIGFycmF5LWxpa2Ugb2JqZWN0cyBsaWtlIEZpbGVsaXN0LlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBoYXNBcnJheU5hdHVyZShvYmopIHtcbiAgcmV0dXJuKFxuICAgIC8vIG5vdCBudWxsL2ZhbHNlXG4gICAgISFvYmogJiYgKFxuICAgIC8vIGFycmF5cyBhcmUgb2JqZWN0cywgTm9kZUxpc3RzIGFyZSBmdW5jdGlvbnMgaW4gU2FmYXJpXG4gICAgdHlwZW9mIG9iaiA9PSAnb2JqZWN0JyB8fCB0eXBlb2Ygb2JqID09ICdmdW5jdGlvbicpICYmXG4gICAgLy8gcXVhY2tzIGxpa2UgYW4gYXJyYXlcbiAgICAnbGVuZ3RoJyBpbiBvYmogJiZcbiAgICAvLyBub3Qgd2luZG93XG4gICAgISgnc2V0SW50ZXJ2YWwnIGluIG9iaikgJiZcbiAgICAvLyBubyBET00gbm9kZSBzaG91bGQgYmUgY29uc2lkZXJlZCBhbiBhcnJheS1saWtlXG4gICAgLy8gYSAnc2VsZWN0JyBlbGVtZW50IGhhcyAnbGVuZ3RoJyBhbmQgJ2l0ZW0nIHByb3BlcnRpZXMgb24gSUU4XG4gICAgdHlwZW9mIG9iai5ub2RlVHlwZSAhPSAnbnVtYmVyJyAmJiAoXG4gICAgLy8gYSByZWFsIGFycmF5XG4gICAgQXJyYXkuaXNBcnJheShvYmopIHx8XG4gICAgLy8gYXJndW1lbnRzXG4gICAgJ2NhbGxlZScgaW4gb2JqIHx8XG4gICAgLy8gSFRNTENvbGxlY3Rpb24vTm9kZUxpc3RcbiAgICAnaXRlbScgaW4gb2JqKVxuICApO1xufVxuXG4vKipcbiAqIEVuc3VyZSB0aGF0IHRoZSBhcmd1bWVudCBpcyBhbiBhcnJheSBieSB3cmFwcGluZyBpdCBpbiBhbiBhcnJheSBpZiBpdCBpcyBub3QuXG4gKiBDcmVhdGVzIGEgY29weSBvZiB0aGUgYXJndW1lbnQgaWYgaXQgaXMgYWxyZWFkeSBhbiBhcnJheS5cbiAqXG4gKiBUaGlzIGlzIG1vc3RseSB1c2VmdWwgaWRpb21hdGljYWxseTpcbiAqXG4gKiAgIHZhciBjcmVhdGVBcnJheUZyb21NaXhlZCA9IHJlcXVpcmUoJ2NyZWF0ZUFycmF5RnJvbU1peGVkJyk7XG4gKlxuICogICBmdW5jdGlvbiB0YWtlc09uZU9yTW9yZVRoaW5ncyh0aGluZ3MpIHtcbiAqICAgICB0aGluZ3MgPSBjcmVhdGVBcnJheUZyb21NaXhlZCh0aGluZ3MpO1xuICogICAgIC4uLlxuICogICB9XG4gKlxuICogVGhpcyBhbGxvd3MgeW91IHRvIHRyZWF0IGB0aGluZ3MnIGFzIGFuIGFycmF5LCBidXQgYWNjZXB0IHNjYWxhcnMgaW4gdGhlIEFQSS5cbiAqXG4gKiBJZiB5b3UgbmVlZCB0byBjb252ZXJ0IGFuIGFycmF5LWxpa2Ugb2JqZWN0LCBsaWtlIGBhcmd1bWVudHNgLCBpbnRvIGFuIGFycmF5XG4gKiB1c2UgdG9BcnJheSBpbnN0ZWFkLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHthcnJheX1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQXJyYXlGcm9tTWl4ZWQob2JqKSB7XG4gIGlmICghaGFzQXJyYXlOYXR1cmUob2JqKSkge1xuICAgIHJldHVybiBbb2JqXTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICByZXR1cm4gb2JqLnNsaWNlKCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRvQXJyYXkob2JqKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUFycmF5RnJvbU1peGVkOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBjcmVhdGVOb2Rlc0Zyb21NYXJrdXBcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuLyplc2xpbnQtZGlzYWJsZSBmYi13d3cvdW5zYWZlLWh0bWwqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIGNyZWF0ZUFycmF5RnJvbU1peGVkID0gcmVxdWlyZSgnLi9jcmVhdGVBcnJheUZyb21NaXhlZCcpO1xudmFyIGdldE1hcmt1cFdyYXAgPSByZXF1aXJlKCcuL2dldE1hcmt1cFdyYXAnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCcuL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIER1bW15IGNvbnRhaW5lciB1c2VkIHRvIHJlbmRlciBhbGwgbWFya3VwLlxuICovXG52YXIgZHVtbXlOb2RlID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgOiBudWxsO1xuXG4vKipcbiAqIFBhdHRlcm4gdXNlZCBieSBgZ2V0Tm9kZU5hbWVgLlxuICovXG52YXIgbm9kZU5hbWVQYXR0ZXJuID0gL15cXHMqPChcXHcrKS87XG5cbi8qKlxuICogRXh0cmFjdHMgdGhlIGBub2RlTmFtZWAgb2YgdGhlIGZpcnN0IGVsZW1lbnQgaW4gYSBzdHJpbmcgb2YgbWFya3VwLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgU3RyaW5nIG9mIG1hcmt1cC5cbiAqIEByZXR1cm4gez9zdHJpbmd9IE5vZGUgbmFtZSBvZiB0aGUgc3VwcGxpZWQgbWFya3VwLlxuICovXG5mdW5jdGlvbiBnZXROb2RlTmFtZShtYXJrdXApIHtcbiAgdmFyIG5vZGVOYW1lTWF0Y2ggPSBtYXJrdXAubWF0Y2gobm9kZU5hbWVQYXR0ZXJuKTtcbiAgcmV0dXJuIG5vZGVOYW1lTWF0Y2ggJiYgbm9kZU5hbWVNYXRjaFsxXS50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgY29udGFpbmluZyB0aGUgbm9kZXMgcmVuZGVyZWQgZnJvbSB0aGUgc3VwcGxpZWQgbWFya3VwLiBUaGVcbiAqIG9wdGlvbmFsbHkgc3VwcGxpZWQgYGhhbmRsZVNjcmlwdGAgZnVuY3Rpb24gd2lsbCBiZSBpbnZva2VkIG9uY2UgZm9yIGVhY2hcbiAqIDxzY3JpcHQ+IGVsZW1lbnQgdGhhdCBpcyByZW5kZXJlZC4gSWYgbm8gYGhhbmRsZVNjcmlwdGAgZnVuY3Rpb24gaXMgc3VwcGxpZWQsXG4gKiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIGFueSA8c2NyaXB0PiBlbGVtZW50cyBhcmUgcmVuZGVyZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBBIHN0cmluZyBvZiB2YWxpZCBIVE1MIG1hcmt1cC5cbiAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBoYW5kbGVTY3JpcHQgSW52b2tlZCBvbmNlIGZvciBlYWNoIHJlbmRlcmVkIDxzY3JpcHQ+LlxuICogQHJldHVybiB7YXJyYXk8RE9NRWxlbWVudHxET01UZXh0Tm9kZT59IEFuIGFycmF5IG9mIHJlbmRlcmVkIG5vZGVzLlxuICovXG5mdW5jdGlvbiBjcmVhdGVOb2Rlc0Zyb21NYXJrdXAobWFya3VwLCBoYW5kbGVTY3JpcHQpIHtcbiAgdmFyIG5vZGUgPSBkdW1teU5vZGU7XG4gICEhIWR1bW15Tm9kZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdjcmVhdGVOb2Rlc0Zyb21NYXJrdXAgZHVtbXkgbm90IGluaXRpYWxpemVkJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB2YXIgbm9kZU5hbWUgPSBnZXROb2RlTmFtZShtYXJrdXApO1xuXG4gIHZhciB3cmFwID0gbm9kZU5hbWUgJiYgZ2V0TWFya3VwV3JhcChub2RlTmFtZSk7XG4gIGlmICh3cmFwKSB7XG4gICAgbm9kZS5pbm5lckhUTUwgPSB3cmFwWzFdICsgbWFya3VwICsgd3JhcFsyXTtcblxuICAgIHZhciB3cmFwRGVwdGggPSB3cmFwWzBdO1xuICAgIHdoaWxlICh3cmFwRGVwdGgtLSkge1xuICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBub2RlLmlubmVySFRNTCA9IG1hcmt1cDtcbiAgfVxuXG4gIHZhciBzY3JpcHRzID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XG4gIGlmIChzY3JpcHRzLmxlbmd0aCkge1xuICAgICFoYW5kbGVTY3JpcHQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnY3JlYXRlTm9kZXNGcm9tTWFya3VwKC4uLik6IFVuZXhwZWN0ZWQgPHNjcmlwdD4gZWxlbWVudCByZW5kZXJlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgY3JlYXRlQXJyYXlGcm9tTWl4ZWQoc2NyaXB0cykuZm9yRWFjaChoYW5kbGVTY3JpcHQpO1xuICB9XG5cbiAgdmFyIG5vZGVzID0gY3JlYXRlQXJyYXlGcm9tTWl4ZWQobm9kZS5jaGlsZE5vZGVzKTtcbiAgd2hpbGUgKG5vZGUubGFzdENoaWxkKSB7XG4gICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmxhc3RDaGlsZCk7XG4gIH1cbiAgcmV0dXJuIG5vZGVzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZU5vZGVzRnJvbU1hcmt1cDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZW1wdHlGdW5jdGlvblxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBtYWtlRW1wdHlGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYXJnO1xuICB9O1xufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gYWNjZXB0cyBhbmQgZGlzY2FyZHMgaW5wdXRzOyBpdCBoYXMgbm8gc2lkZSBlZmZlY3RzLiBUaGlzIGlzXG4gKiBwcmltYXJpbHkgdXNlZnVsIGlkaW9tYXRpY2FsbHkgZm9yIG92ZXJyaWRhYmxlIGZ1bmN0aW9uIGVuZHBvaW50cyB3aGljaFxuICogYWx3YXlzIG5lZWQgdG8gYmUgY2FsbGFibGUsIHNpbmNlIEpTIGxhY2tzIGEgbnVsbC1jYWxsIGlkaW9tIGFsYSBDb2NvYS5cbiAqL1xuZnVuY3Rpb24gZW1wdHlGdW5jdGlvbigpIHt9XG5cbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnMgPSBtYWtlRW1wdHlGdW5jdGlvbjtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNGYWxzZSA9IG1ha2VFbXB0eUZ1bmN0aW9uKGZhbHNlKTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlID0gbWFrZUVtcHR5RnVuY3Rpb24odHJ1ZSk7XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zTnVsbCA9IG1ha2VFbXB0eUZ1bmN0aW9uKG51bGwpO1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RoaXMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzO1xufTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNBcmd1bWVudCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgcmV0dXJuIGFyZztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZW1wdHlGdW5jdGlvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZW1wdHlPYmplY3RcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlbXB0eU9iamVjdCA9IHt9O1xuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICBPYmplY3QuZnJlZXplKGVtcHR5T2JqZWN0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlbXB0eU9iamVjdDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZm9jdXNOb2RlXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZSBpbnB1dC90ZXh0YXJlYSB0byBmb2N1c1xuICovXG5mdW5jdGlvbiBmb2N1c05vZGUobm9kZSkge1xuICAvLyBJRTggY2FuIHRocm93IFwiQ2FuJ3QgbW92ZSBmb2N1cyB0byB0aGUgY29udHJvbCBiZWNhdXNlIGl0IGlzIGludmlzaWJsZSxcbiAgLy8gbm90IGVuYWJsZWQsIG9yIG9mIGEgdHlwZSB0aGF0IGRvZXMgbm90IGFjY2VwdCB0aGUgZm9jdXMuXCIgZm9yIGFsbCBraW5kcyBvZlxuICAvLyByZWFzb25zIHRoYXQgYXJlIHRvbyBleHBlbnNpdmUgYW5kIGZyYWdpbGUgdG8gdGVzdC5cbiAgdHJ5IHtcbiAgICBub2RlLmZvY3VzKCk7XG4gIH0gY2F0Y2ggKGUpIHt9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZm9jdXNOb2RlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRBY3RpdmVFbGVtZW50XG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbi8qIGVzbGludC1kaXNhYmxlIGZiLXd3dy90eXBlb2YtdW5kZWZpbmVkICovXG5cbi8qKlxuICogU2FtZSBhcyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGJ1dCB3cmFwcyBpbiBhIHRyeS1jYXRjaCBibG9jay4gSW4gSUUgaXQgaXNcbiAqIG5vdCBzYWZlIHRvIGNhbGwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBpZiB0aGVyZSBpcyBub3RoaW5nIGZvY3VzZWQuXG4gKlxuICogVGhlIGFjdGl2ZUVsZW1lbnQgd2lsbCBiZSBudWxsIG9ubHkgaWYgdGhlIGRvY3VtZW50IG9yIGRvY3VtZW50IGJvZHkgaXMgbm90XG4gKiB5ZXQgZGVmaW5lZC5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBnZXRBY3RpdmVFbGVtZW50KCkgLyo/RE9NRWxlbWVudCove1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5ib2R5O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0QWN0aXZlRWxlbWVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0TWFya3VwV3JhcFxuICovXG5cbi8qZXNsaW50LWRpc2FibGUgZmItd3d3L3Vuc2FmZS1odG1sICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnLi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBEdW1teSBjb250YWluZXIgdXNlZCB0byBkZXRlY3Qgd2hpY2ggd3JhcHMgYXJlIG5lY2Vzc2FyeS5cbiAqL1xudmFyIGR1bW15Tm9kZSA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpIDogbnVsbDtcblxuLyoqXG4gKiBTb21lIGJyb3dzZXJzIGNhbm5vdCB1c2UgYGlubmVySFRNTGAgdG8gcmVuZGVyIGNlcnRhaW4gZWxlbWVudHMgc3RhbmRhbG9uZSxcbiAqIHNvIHdlIHdyYXAgdGhlbSwgcmVuZGVyIHRoZSB3cmFwcGVkIG5vZGVzLCB0aGVuIGV4dHJhY3QgdGhlIGRlc2lyZWQgbm9kZS5cbiAqXG4gKiBJbiBJRTgsIGNlcnRhaW4gZWxlbWVudHMgY2Fubm90IHJlbmRlciBhbG9uZSwgc28gd3JhcCBhbGwgZWxlbWVudHMgKCcqJykuXG4gKi9cblxudmFyIHNob3VsZFdyYXAgPSB7fTtcblxudmFyIHNlbGVjdFdyYXAgPSBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJ0cnVlXCI+JywgJzwvc2VsZWN0PiddO1xudmFyIHRhYmxlV3JhcCA9IFsxLCAnPHRhYmxlPicsICc8L3RhYmxlPiddO1xudmFyIHRyV3JhcCA9IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddO1xuXG52YXIgc3ZnV3JhcCA9IFsxLCAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+JywgJzwvc3ZnPiddO1xuXG52YXIgbWFya3VwV3JhcCA9IHtcbiAgJyonOiBbMSwgJz88ZGl2PicsICc8L2Rpdj4nXSxcblxuICAnYXJlYSc6IFsxLCAnPG1hcD4nLCAnPC9tYXA+J10sXG4gICdjb2wnOiBbMiwgJzx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXSxcbiAgJ2xlZ2VuZCc6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuICAncGFyYW0nOiBbMSwgJzxvYmplY3Q+JywgJzwvb2JqZWN0PiddLFxuICAndHInOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcblxuICAnb3B0Z3JvdXAnOiBzZWxlY3RXcmFwLFxuICAnb3B0aW9uJzogc2VsZWN0V3JhcCxcblxuICAnY2FwdGlvbic6IHRhYmxlV3JhcCxcbiAgJ2NvbGdyb3VwJzogdGFibGVXcmFwLFxuICAndGJvZHknOiB0YWJsZVdyYXAsXG4gICd0Zm9vdCc6IHRhYmxlV3JhcCxcbiAgJ3RoZWFkJzogdGFibGVXcmFwLFxuXG4gICd0ZCc6IHRyV3JhcCxcbiAgJ3RoJzogdHJXcmFwXG59O1xuXG4vLyBJbml0aWFsaXplIHRoZSBTVkcgZWxlbWVudHMgc2luY2Ugd2Uga25vdyB0aGV5J2xsIGFsd2F5cyBuZWVkIHRvIGJlIHdyYXBwZWRcbi8vIGNvbnNpc3RlbnRseS4gSWYgdGhleSBhcmUgY3JlYXRlZCBpbnNpZGUgYSA8ZGl2PiB0aGV5IHdpbGwgYmUgaW5pdGlhbGl6ZWQgaW5cbi8vIHRoZSB3cm9uZyBuYW1lc3BhY2UgKGFuZCB3aWxsIG5vdCBkaXNwbGF5KS5cbnZhciBzdmdFbGVtZW50cyA9IFsnY2lyY2xlJywgJ2NsaXBQYXRoJywgJ2RlZnMnLCAnZWxsaXBzZScsICdnJywgJ2ltYWdlJywgJ2xpbmUnLCAnbGluZWFyR3JhZGllbnQnLCAnbWFzaycsICdwYXRoJywgJ3BhdHRlcm4nLCAncG9seWdvbicsICdwb2x5bGluZScsICdyYWRpYWxHcmFkaWVudCcsICdyZWN0JywgJ3N0b3AnLCAndGV4dCcsICd0c3BhbiddO1xuc3ZnRWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAobm9kZU5hbWUpIHtcbiAgbWFya3VwV3JhcFtub2RlTmFtZV0gPSBzdmdXcmFwO1xuICBzaG91bGRXcmFwW25vZGVOYW1lXSA9IHRydWU7XG59KTtcblxuLyoqXG4gKiBHZXRzIHRoZSBtYXJrdXAgd3JhcCBjb25maWd1cmF0aW9uIGZvciB0aGUgc3VwcGxpZWQgYG5vZGVOYW1lYC5cbiAqXG4gKiBOT1RFOiBUaGlzIGxhemlseSBkZXRlY3RzIHdoaWNoIHdyYXBzIGFyZSBuZWNlc3NhcnkgZm9yIHRoZSBjdXJyZW50IGJyb3dzZXIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5vZGVOYW1lIExvd2VyY2FzZSBgbm9kZU5hbWVgLlxuICogQHJldHVybiB7P2FycmF5fSBNYXJrdXAgd3JhcCBjb25maWd1cmF0aW9uLCBpZiBhcHBsaWNhYmxlLlxuICovXG5mdW5jdGlvbiBnZXRNYXJrdXBXcmFwKG5vZGVOYW1lKSB7XG4gICEhIWR1bW15Tm9kZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdNYXJrdXAgd3JhcHBpbmcgbm9kZSBub3QgaW5pdGlhbGl6ZWQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGlmICghbWFya3VwV3JhcC5oYXNPd25Qcm9wZXJ0eShub2RlTmFtZSkpIHtcbiAgICBub2RlTmFtZSA9ICcqJztcbiAgfVxuICBpZiAoIXNob3VsZFdyYXAuaGFzT3duUHJvcGVydHkobm9kZU5hbWUpKSB7XG4gICAgaWYgKG5vZGVOYW1lID09PSAnKicpIHtcbiAgICAgIGR1bW15Tm9kZS5pbm5lckhUTUwgPSAnPGxpbmsgLz4nO1xuICAgIH0gZWxzZSB7XG4gICAgICBkdW1teU5vZGUuaW5uZXJIVE1MID0gJzwnICsgbm9kZU5hbWUgKyAnPjwvJyArIG5vZGVOYW1lICsgJz4nO1xuICAgIH1cbiAgICBzaG91bGRXcmFwW25vZGVOYW1lXSA9ICFkdW1teU5vZGUuZmlyc3RDaGlsZDtcbiAgfVxuICByZXR1cm4gc2hvdWxkV3JhcFtub2RlTmFtZV0gPyBtYXJrdXBXcmFwW25vZGVOYW1lXSA6IG51bGw7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0TWFya3VwV3JhcDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb25cbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEdldHMgdGhlIHNjcm9sbCBwb3NpdGlvbiBvZiB0aGUgc3VwcGxpZWQgZWxlbWVudCBvciB3aW5kb3cuXG4gKlxuICogVGhlIHJldHVybiB2YWx1ZXMgYXJlIHVuYm91bmRlZCwgdW5saWtlIGBnZXRTY3JvbGxQb3NpdGlvbmAuIFRoaXMgbWVhbnMgdGhleVxuICogbWF5IGJlIG5lZ2F0aXZlIG9yIGV4Y2VlZCB0aGUgZWxlbWVudCBib3VuZGFyaWVzICh3aGljaCBpcyBwb3NzaWJsZSB1c2luZ1xuICogaW5lcnRpYWwgc2Nyb2xsaW5nKS5cbiAqXG4gKiBAcGFyYW0ge0RPTVdpbmRvd3xET01FbGVtZW50fSBzY3JvbGxhYmxlXG4gKiBAcmV0dXJuIHtvYmplY3R9IE1hcCB3aXRoIGB4YCBhbmQgYHlgIGtleXMuXG4gKi9cbmZ1bmN0aW9uIGdldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uKHNjcm9sbGFibGUpIHtcbiAgaWYgKHNjcm9sbGFibGUgPT09IHdpbmRvdykge1xuICAgIHJldHVybiB7XG4gICAgICB4OiB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQsXG4gICAgICB5OiB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB4OiBzY3JvbGxhYmxlLnNjcm9sbExlZnQsXG4gICAgeTogc2Nyb2xsYWJsZS5zY3JvbGxUb3BcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaHlwaGVuYXRlXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF91cHBlcmNhc2VQYXR0ZXJuID0gLyhbQS1aXSkvZztcblxuLyoqXG4gKiBIeXBoZW5hdGVzIGEgY2FtZWxjYXNlZCBzdHJpbmcsIGZvciBleGFtcGxlOlxuICpcbiAqICAgPiBoeXBoZW5hdGUoJ2JhY2tncm91bmRDb2xvcicpXG4gKiAgIDwgXCJiYWNrZ3JvdW5kLWNvbG9yXCJcbiAqXG4gKiBGb3IgQ1NTIHN0eWxlIG5hbWVzLCB1c2UgYGh5cGhlbmF0ZVN0eWxlTmFtZWAgaW5zdGVhZCB3aGljaCB3b3JrcyBwcm9wZXJseVxuICogd2l0aCBhbGwgdmVuZG9yIHByZWZpeGVzLCBpbmNsdWRpbmcgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGh5cGhlbmF0ZShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKF91cHBlcmNhc2VQYXR0ZXJuLCAnLSQxJykudG9Mb3dlckNhc2UoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoeXBoZW5hdGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGh5cGhlbmF0ZVN0eWxlTmFtZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBoeXBoZW5hdGUgPSByZXF1aXJlKCcuL2h5cGhlbmF0ZScpO1xuXG52YXIgbXNQYXR0ZXJuID0gL15tcy0vO1xuXG4vKipcbiAqIEh5cGhlbmF0ZXMgYSBjYW1lbGNhc2VkIENTUyBwcm9wZXJ0eSBuYW1lLCBmb3IgZXhhbXBsZTpcbiAqXG4gKiAgID4gaHlwaGVuYXRlU3R5bGVOYW1lKCdiYWNrZ3JvdW5kQ29sb3InKVxuICogICA8IFwiYmFja2dyb3VuZC1jb2xvclwiXG4gKiAgID4gaHlwaGVuYXRlU3R5bGVOYW1lKCdNb3pUcmFuc2l0aW9uJylcbiAqICAgPCBcIi1tb3otdHJhbnNpdGlvblwiXG4gKiAgID4gaHlwaGVuYXRlU3R5bGVOYW1lKCdtc1RyYW5zaXRpb24nKVxuICogICA8IFwiLW1zLXRyYW5zaXRpb25cIlxuICpcbiAqIEFzIE1vZGVybml6ciBzdWdnZXN0cyAoaHR0cDovL21vZGVybml6ci5jb20vZG9jcy8jcHJlZml4ZWQpLCBhbiBgbXNgIHByZWZpeFxuICogaXMgY29udmVydGVkIHRvIGAtbXMtYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGh5cGhlbmF0ZVN0eWxlTmFtZShzdHJpbmcpIHtcbiAgcmV0dXJuIGh5cGhlbmF0ZShzdHJpbmcpLnJlcGxhY2UobXNQYXR0ZXJuLCAnLW1zLScpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGh5cGhlbmF0ZVN0eWxlTmFtZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaW52YXJpYW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cbiAqXG4gKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG4gKiBleHBlY3RpbmcuXG4gKlxuICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcbiAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cbiAqL1xuXG5mdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YXJpYW50IHJlcXVpcmVzIGFuIGVycm9yIG1lc3NhZ2UgYXJndW1lbnQnKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHZhciBlcnJvcjtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKCdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICsgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhcmdzID0gW2EsIGIsIGMsIGQsIGUsIGZdO1xuICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdO1xuICAgICAgfSkpO1xuICAgICAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcbiAgICB9XG5cbiAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGlzTm9kZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7Kn0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIG9yIG5vdCB0aGUgb2JqZWN0IGlzIGEgRE9NIG5vZGUuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gaXNOb2RlKG9iamVjdCkge1xuICByZXR1cm4gISEob2JqZWN0ICYmICh0eXBlb2YgTm9kZSA9PT0gJ2Z1bmN0aW9uJyA/IG9iamVjdCBpbnN0YW5jZW9mIE5vZGUgOiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb2JqZWN0Lm5vZGVUeXBlID09PSAnbnVtYmVyJyAmJiB0eXBlb2Ygb2JqZWN0Lm5vZGVOYW1lID09PSAnc3RyaW5nJykpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzTm9kZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaXNUZXh0Tm9kZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc05vZGUgPSByZXF1aXJlKCcuL2lzTm9kZScpO1xuXG4vKipcbiAqIEBwYXJhbSB7Kn0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIG9yIG5vdCB0aGUgb2JqZWN0IGlzIGEgRE9NIHRleHQgbm9kZS5cbiAqL1xuZnVuY3Rpb24gaXNUZXh0Tm9kZShvYmplY3QpIHtcbiAgcmV0dXJuIGlzTm9kZShvYmplY3QpICYmIG9iamVjdC5ub2RlVHlwZSA9PSAzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzVGV4dE5vZGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGtleU1pcnJvclxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCcuL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYW4gZW51bWVyYXRpb24gd2l0aCBrZXlzIGVxdWFsIHRvIHRoZWlyIHZhbHVlLlxuICpcbiAqIEZvciBleGFtcGxlOlxuICpcbiAqICAgdmFyIENPTE9SUyA9IGtleU1pcnJvcih7Ymx1ZTogbnVsbCwgcmVkOiBudWxsfSk7XG4gKiAgIHZhciBteUNvbG9yID0gQ09MT1JTLmJsdWU7XG4gKiAgIHZhciBpc0NvbG9yVmFsaWQgPSAhIUNPTE9SU1tteUNvbG9yXTtcbiAqXG4gKiBUaGUgbGFzdCBsaW5lIGNvdWxkIG5vdCBiZSBwZXJmb3JtZWQgaWYgdGhlIHZhbHVlcyBvZiB0aGUgZ2VuZXJhdGVkIGVudW0gd2VyZVxuICogbm90IGVxdWFsIHRvIHRoZWlyIGtleXMuXG4gKlxuICogICBJbnB1dDogIHtrZXkxOiB2YWwxLCBrZXkyOiB2YWwyfVxuICogICBPdXRwdXQ6IHtrZXkxOiBrZXkxLCBrZXkyOiBrZXkyfVxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xudmFyIGtleU1pcnJvciA9IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIHJldCA9IHt9O1xuICB2YXIga2V5O1xuICAhKG9iaiBpbnN0YW5jZW9mIE9iamVjdCAmJiAhQXJyYXkuaXNBcnJheShvYmopKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdrZXlNaXJyb3IoLi4uKTogQXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcmV0W2tleV0gPSBrZXk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ga2V5TWlycm9yOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBrZXlPZlxuICovXG5cbi8qKlxuICogQWxsb3dzIGV4dHJhY3Rpb24gb2YgYSBtaW5pZmllZCBrZXkuIExldCdzIHRoZSBidWlsZCBzeXN0ZW0gbWluaWZ5IGtleXNcbiAqIHdpdGhvdXQgbG9zaW5nIHRoZSBhYmlsaXR5IHRvIGR5bmFtaWNhbGx5IHVzZSBrZXkgc3RyaW5ncyBhcyB2YWx1ZXNcbiAqIHRoZW1zZWx2ZXMuIFBhc3MgaW4gYW4gb2JqZWN0IHdpdGggYSBzaW5nbGUga2V5L3ZhbCBwYWlyIGFuZCBpdCB3aWxsIHJldHVyblxuICogeW91IHRoZSBzdHJpbmcga2V5IG9mIHRoYXQgc2luZ2xlIHJlY29yZC4gU3VwcG9zZSB5b3Ugd2FudCB0byBncmFiIHRoZVxuICogdmFsdWUgZm9yIGEga2V5ICdjbGFzc05hbWUnIGluc2lkZSBvZiBhbiBvYmplY3QuIEtleS92YWwgbWluaWZpY2F0aW9uIG1heVxuICogaGF2ZSBhbGlhc2VkIHRoYXQga2V5IHRvIGJlICd4YTEyJy4ga2V5T2Yoe2NsYXNzTmFtZTogbnVsbH0pIHdpbGwgcmV0dXJuXG4gKiAneGExMicgaW4gdGhhdCBjYXNlLiBSZXNvbHZlIGtleXMgeW91IHdhbnQgdG8gdXNlIG9uY2UgYXQgc3RhcnR1cCB0aW1lLCB0aGVuXG4gKiByZXVzZSB0aG9zZSByZXNvbHV0aW9ucy5cbiAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBrZXlPZiA9IGZ1bmN0aW9uIChvbmVLZXlPYmopIHtcbiAgdmFyIGtleTtcbiAgZm9yIChrZXkgaW4gb25lS2V5T2JqKSB7XG4gICAgaWYgKCFvbmVLZXlPYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHJldHVybiBrZXk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGtleU9mOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBtYXBPYmplY3RcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHByb3ZpZGVkIGBjYWxsYmFja2Agb25jZSBmb3IgZWFjaCBlbnVtZXJhYmxlIG93biBwcm9wZXJ0eSBpbiB0aGVcbiAqIG9iamVjdCBhbmQgY29uc3RydWN0cyBhIG5ldyBvYmplY3QgZnJvbSB0aGUgcmVzdWx0cy4gVGhlIGBjYWxsYmFja2AgaXNcbiAqIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG4gKlxuICogIC0gdGhlIHByb3BlcnR5IHZhbHVlXG4gKiAgLSB0aGUgcHJvcGVydHkgbmFtZVxuICogIC0gdGhlIG9iamVjdCBiZWluZyB0cmF2ZXJzZWRcbiAqXG4gKiBQcm9wZXJ0aWVzIHRoYXQgYXJlIGFkZGVkIGFmdGVyIHRoZSBjYWxsIHRvIGBtYXBPYmplY3RgIHdpbGwgbm90IGJlIHZpc2l0ZWRcbiAqIGJ5IGBjYWxsYmFja2AuIElmIHRoZSB2YWx1ZXMgb2YgZXhpc3RpbmcgcHJvcGVydGllcyBhcmUgY2hhbmdlZCwgdGhlIHZhbHVlXG4gKiBwYXNzZWQgdG8gYGNhbGxiYWNrYCB3aWxsIGJlIHRoZSB2YWx1ZSBhdCB0aGUgdGltZSBgbWFwT2JqZWN0YCB2aXNpdHMgdGhlbS5cbiAqIFByb3BlcnRpZXMgdGhhdCBhcmUgZGVsZXRlZCBiZWZvcmUgYmVpbmcgdmlzaXRlZCBhcmUgbm90IHZpc2l0ZWQuXG4gKlxuICogQGdyZXAgZnVuY3Rpb24gb2JqZWN0TWFwKClcbiAqIEBncmVwIGZ1bmN0aW9uIG9iak1hcCgpXG4gKlxuICogQHBhcmFtIHs/b2JqZWN0fSBvYmplY3RcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcGFyYW0geyp9IGNvbnRleHRcbiAqIEByZXR1cm4gez9vYmplY3R9XG4gKi9cbmZ1bmN0aW9uIG1hcE9iamVjdChvYmplY3QsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gIGlmICghb2JqZWN0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmb3IgKHZhciBuYW1lIGluIG9iamVjdCkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgbmFtZSkpIHtcbiAgICAgIHJlc3VsdFtuYW1lXSA9IGNhbGxiYWNrLmNhbGwoY29udGV4dCwgb2JqZWN0W25hbWVdLCBuYW1lLCBvYmplY3QpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hcE9iamVjdDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgbWVtb2l6ZVN0cmluZ09ubHlcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIE1lbW9pemVzIHRoZSByZXR1cm4gdmFsdWUgb2YgYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgb25lIHN0cmluZyBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybiB7ZnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIG1lbW9pemVTdHJpbmdPbmx5KGNhbGxiYWNrKSB7XG4gIHZhciBjYWNoZSA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gKHN0cmluZykge1xuICAgIGlmICghY2FjaGUuaGFzT3duUHJvcGVydHkoc3RyaW5nKSkge1xuICAgICAgY2FjaGVbc3RyaW5nXSA9IGNhbGxiYWNrLmNhbGwodGhpcywgc3RyaW5nKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlW3N0cmluZ107XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWVtb2l6ZVN0cmluZ09ubHk7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHNoYWxsb3dFcXVhbFxuICogQHR5cGVjaGVja3NcbiAqIFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBQZXJmb3JtcyBlcXVhbGl0eSBieSBpdGVyYXRpbmcgdGhyb3VnaCBrZXlzIG9uIGFuIG9iamVjdCBhbmQgcmV0dXJuaW5nIGZhbHNlXG4gKiB3aGVuIGFueSBrZXkgaGFzIHZhbHVlcyB3aGljaCBhcmUgbm90IHN0cmljdGx5IGVxdWFsIGJldHdlZW4gdGhlIGFyZ3VtZW50cy5cbiAqIFJldHVybnMgdHJ1ZSB3aGVuIHRoZSB2YWx1ZXMgb2YgYWxsIGtleXMgYXJlIHN0cmljdGx5IGVxdWFsLlxuICovXG5mdW5jdGlvbiBzaGFsbG93RXF1YWwob2JqQSwgb2JqQikge1xuICBpZiAob2JqQSA9PT0gb2JqQikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvYmpBICE9PSAnb2JqZWN0JyB8fCBvYmpBID09PSBudWxsIHx8IHR5cGVvZiBvYmpCICE9PSAnb2JqZWN0JyB8fCBvYmpCID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMob2JqQSk7XG4gIHZhciBrZXlzQiA9IE9iamVjdC5rZXlzKG9iakIpO1xuXG4gIGlmIChrZXlzQS5sZW5ndGggIT09IGtleXNCLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFRlc3QgZm9yIEEncyBrZXlzIGRpZmZlcmVudCBmcm9tIEIuXG4gIHZhciBiSGFzT3duUHJvcGVydHkgPSBoYXNPd25Qcm9wZXJ0eS5iaW5kKG9iakIpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXNBLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCFiSGFzT3duUHJvcGVydHkoa2V5c0FbaV0pIHx8IG9iakFba2V5c0FbaV1dICE9PSBvYmpCW2tleXNBW2ldXSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNoYWxsb3dFcXVhbDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgdG9BcnJheVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCcuL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIENvbnZlcnQgYXJyYXktbGlrZSBvYmplY3RzIHRvIGFycmF5cy5cbiAqXG4gKiBUaGlzIEFQSSBhc3N1bWVzIHRoZSBjYWxsZXIga25vd3MgdGhlIGNvbnRlbnRzIG9mIHRoZSBkYXRhIHR5cGUuIEZvciBsZXNzXG4gKiB3ZWxsIGRlZmluZWQgaW5wdXRzIHVzZSBjcmVhdGVBcnJheUZyb21NaXhlZC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdHxmdW5jdGlvbnxmaWxlbGlzdH0gb2JqXG4gKiBAcmV0dXJuIHthcnJheX1cbiAqL1xuZnVuY3Rpb24gdG9BcnJheShvYmopIHtcbiAgdmFyIGxlbmd0aCA9IG9iai5sZW5ndGg7XG5cbiAgLy8gU29tZSBicm93c2UgYnVpbHRpbiBvYmplY3RzIGNhbiByZXBvcnQgdHlwZW9mICdmdW5jdGlvbicgKGUuZy4gTm9kZUxpc3QgaW5cbiAgLy8gb2xkIHZlcnNpb25zIG9mIFNhZmFyaSkuXG4gICEoIUFycmF5LmlzQXJyYXkob2JqKSAmJiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJykpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RvQXJyYXk6IEFycmF5LWxpa2Ugb2JqZWN0IGV4cGVjdGVkJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICEodHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RvQXJyYXk6IE9iamVjdCBuZWVkcyBhIGxlbmd0aCBwcm9wZXJ0eScpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAhKGxlbmd0aCA9PT0gMCB8fCBsZW5ndGggLSAxIGluIG9iaikgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndG9BcnJheTogT2JqZWN0IHNob3VsZCBoYXZlIGtleXMgZm9yIGluZGljZXMnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgLy8gT2xkIElFIGRvZXNuJ3QgZ2l2ZSBjb2xsZWN0aW9ucyBhY2Nlc3MgdG8gaGFzT3duUHJvcGVydHkuIEFzc3VtZSBpbnB1dHNcbiAgLy8gd2l0aG91dCBtZXRob2Qgd2lsbCB0aHJvdyBkdXJpbmcgdGhlIHNsaWNlIGNhbGwgYW5kIHNraXAgc3RyYWlnaHQgdG8gdGhlXG4gIC8vIGZhbGxiYWNrLlxuICBpZiAob2JqLmhhc093blByb3BlcnR5KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvYmopO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIElFIDwgOSBkb2VzIG5vdCBzdXBwb3J0IEFycmF5I3NsaWNlIG9uIGNvbGxlY3Rpb25zIG9iamVjdHNcbiAgICB9XG4gIH1cblxuICAvLyBGYWxsIGJhY2sgdG8gY29weWluZyBrZXkgYnkga2V5LiBUaGlzIGFzc3VtZXMgYWxsIGtleXMgaGF2ZSBhIHZhbHVlLFxuICAvLyBzbyB3aWxsIG5vdCBwcmVzZXJ2ZSBzcGFyc2VseSBwb3B1bGF0ZWQgaW5wdXRzLlxuICB2YXIgcmV0ID0gQXJyYXkobGVuZ3RoKTtcbiAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGxlbmd0aDsgaWkrKykge1xuICAgIHJldFtpaV0gPSBvYmpbaWldO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9BcnJheTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgd2FybmluZ1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCcuL2VtcHR5RnVuY3Rpb24nKTtcblxuLyoqXG4gKiBTaW1pbGFyIHRvIGludmFyaWFudCBidXQgb25seSBsb2dzIGEgd2FybmluZyBpZiB0aGUgY29uZGl0aW9uIGlzIG5vdCBtZXQuXG4gKiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvZyBpc3N1ZXMgaW4gZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnRzIGluIGNyaXRpY2FsXG4gKiBwYXRocy4gUmVtb3ZpbmcgdGhlIGxvZ2dpbmcgY29kZSBmb3IgcHJvZHVjdGlvbiBlbnZpcm9ubWVudHMgd2lsbCBrZWVwIHRoZVxuICogc2FtZSBsb2dpYyBhbmQgZm9sbG93IHRoZSBzYW1lIGNvZGUgcGF0aHMuXG4gKi9cblxudmFyIHdhcm5pbmcgPSBlbXB0eUZ1bmN0aW9uO1xuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICB3YXJuaW5nID0gZnVuY3Rpb24gKGNvbmRpdGlvbiwgZm9ybWF0KSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMiA/IF9sZW4gLSAyIDogMCksIF9rZXkgPSAyOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXkgLSAyXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYHdhcm5pbmcoY29uZGl0aW9uLCBmb3JtYXQsIC4uLmFyZ3MpYCByZXF1aXJlcyBhIHdhcm5pbmcgJyArICdtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuXG4gICAgaWYgKGZvcm1hdC5pbmRleE9mKCdGYWlsZWQgQ29tcG9zaXRlIHByb3BUeXBlOiAnKSA9PT0gMCkge1xuICAgICAgcmV0dXJuOyAvLyBJZ25vcmUgQ29tcG9zaXRlQ29tcG9uZW50IHByb3B0eXBlIGNoZWNrLlxuICAgIH1cblxuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgdmFyIG1lc3NhZ2UgPSAnV2FybmluZzogJyArIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdO1xuICAgICAgfSk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICAvLyAtLS0gV2VsY29tZSB0byBkZWJ1Z2dpbmcgUmVhY3QgLS0tXG4gICAgICAgIC8vIFRoaXMgZXJyb3Igd2FzIHRocm93biBhcyBhIGNvbnZlbmllbmNlIHNvIHRoYXQgeW91IGNhbiB1c2UgdGhpcyBzdGFja1xuICAgICAgICAvLyB0byBmaW5kIHRoZSBjYWxsc2l0ZSB0aGF0IGNhdXNlZCB0aGlzIHdhcm5pbmcgdG8gZmlyZS5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgfSBjYXRjaCAoeCkge31cbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gd2FybmluZzsiLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvUmVhY3QnKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gc2hhbGxvd1xuXG5mdW5jdGlvbiBzaGFsbG93KGEsIGIsIGNvbXBhcmUpIHtcbiAgdmFyIGFJc0FycmF5ID0gQXJyYXkuaXNBcnJheShhKVxuICB2YXIgYklzQXJyYXkgPSBBcnJheS5pc0FycmF5KGIpXG5cbiAgaWYgKGFJc0FycmF5ICE9PSBiSXNBcnJheSkgcmV0dXJuIGZhbHNlXG5cbiAgdmFyIGFUeXBlb2YgPSB0eXBlb2YgYVxuICB2YXIgYlR5cGVvZiA9IHR5cGVvZiBiXG5cbiAgaWYgKGFUeXBlb2YgIT09IGJUeXBlb2YpIHJldHVybiBmYWxzZVxuICBpZiAoZmxhdChhVHlwZW9mKSkgcmV0dXJuIGNvbXBhcmVcbiAgICA/IGNvbXBhcmUoYSwgYilcbiAgICA6IGEgPT09IGJcblxuICByZXR1cm4gYUlzQXJyYXlcbiAgICA/IHNoYWxsb3dBcnJheShhLCBiLCBjb21wYXJlKVxuICAgIDogc2hhbGxvd09iamVjdChhLCBiLCBjb21wYXJlKVxufVxuXG5mdW5jdGlvbiBzaGFsbG93QXJyYXkoYSwgYiwgY29tcGFyZSkge1xuICB2YXIgbCA9IGEubGVuZ3RoXG4gIGlmIChsICE9PSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlXG5cbiAgaWYgKGNvbXBhcmUpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKylcbiAgICAgIGlmICghY29tcGFyZShhW2ldLCBiW2ldKSkgcmV0dXJuIGZhbHNlXG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIGlmIChhW2ldICE9PSBiW2ldKSByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiBzaGFsbG93T2JqZWN0KGEsIGIsIGNvbXBhcmUpIHtcbiAgdmFyIGthID0gMFxuICB2YXIga2IgPSAwXG5cbiAgaWYgKGNvbXBhcmUpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gYSkge1xuICAgICAgaWYgKFxuICAgICAgICBhLmhhc093blByb3BlcnR5KGtleSkgJiZcbiAgICAgICAgIWNvbXBhcmUoYVtrZXldLCBiW2tleV0pXG4gICAgICApIHJldHVybiBmYWxzZVxuXG4gICAgICBrYSsrXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGtleSBpbiBhKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGEuaGFzT3duUHJvcGVydHkoa2V5KSAmJlxuICAgICAgICBhW2tleV0gIT09IGJba2V5XVxuICAgICAgKSByZXR1cm4gZmFsc2VcblxuICAgICAga2ErK1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGtleSBpbiBiKSB7XG4gICAgaWYgKGIuaGFzT3duUHJvcGVydHkoa2V5KSkga2IrK1xuICB9XG5cbiAgcmV0dXJuIGthID09PSBrYlxufVxuXG5mdW5jdGlvbiBmbGF0KHR5cGUpIHtcbiAgcmV0dXJuIChcbiAgICB0eXBlICE9PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZSAhPT0gJ29iamVjdCdcbiAgKVxufVxuIiwiLy8gICAgIFVuZGVyc2NvcmUuanMgMS44LjNcbi8vICAgICBodHRwOi8vdW5kZXJzY29yZWpzLm9yZ1xuLy8gICAgIChjKSAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbi8vICAgICBVbmRlcnNjb3JlIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG4oZnVuY3Rpb24oKSB7XG5cbiAgLy8gQmFzZWxpbmUgc2V0dXBcbiAgLy8gLS0tLS0tLS0tLS0tLS1cblxuICAvLyBFc3RhYmxpc2ggdGhlIHJvb3Qgb2JqZWN0LCBgd2luZG93YCBpbiB0aGUgYnJvd3Nlciwgb3IgYGV4cG9ydHNgIG9uIHRoZSBzZXJ2ZXIuXG4gIHZhciByb290ID0gdGhpcztcblxuICAvLyBTYXZlIHRoZSBwcmV2aW91cyB2YWx1ZSBvZiB0aGUgYF9gIHZhcmlhYmxlLlxuICB2YXIgcHJldmlvdXNVbmRlcnNjb3JlID0gcm9vdC5fO1xuXG4gIC8vIFNhdmUgYnl0ZXMgaW4gdGhlIG1pbmlmaWVkIChidXQgbm90IGd6aXBwZWQpIHZlcnNpb246XG4gIHZhciBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLCBPYmpQcm90byA9IE9iamVjdC5wcm90b3R5cGUsIEZ1bmNQcm90byA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcblxuICAvLyBDcmVhdGUgcXVpY2sgcmVmZXJlbmNlIHZhcmlhYmxlcyBmb3Igc3BlZWQgYWNjZXNzIHRvIGNvcmUgcHJvdG90eXBlcy5cbiAgdmFyXG4gICAgcHVzaCAgICAgICAgICAgICA9IEFycmF5UHJvdG8ucHVzaCxcbiAgICBzbGljZSAgICAgICAgICAgID0gQXJyYXlQcm90by5zbGljZSxcbiAgICB0b1N0cmluZyAgICAgICAgID0gT2JqUHJvdG8udG9TdHJpbmcsXG4gICAgaGFzT3duUHJvcGVydHkgICA9IE9ialByb3RvLmhhc093blByb3BlcnR5O1xuXG4gIC8vIEFsbCAqKkVDTUFTY3JpcHQgNSoqIG5hdGl2ZSBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbnMgdGhhdCB3ZSBob3BlIHRvIHVzZVxuICAvLyBhcmUgZGVjbGFyZWQgaGVyZS5cbiAgdmFyXG4gICAgbmF0aXZlSXNBcnJheSAgICAgID0gQXJyYXkuaXNBcnJheSxcbiAgICBuYXRpdmVLZXlzICAgICAgICAgPSBPYmplY3Qua2V5cyxcbiAgICBuYXRpdmVCaW5kICAgICAgICAgPSBGdW5jUHJvdG8uYmluZCxcbiAgICBuYXRpdmVDcmVhdGUgICAgICAgPSBPYmplY3QuY3JlYXRlO1xuXG4gIC8vIE5ha2VkIGZ1bmN0aW9uIHJlZmVyZW5jZSBmb3Igc3Vycm9nYXRlLXByb3RvdHlwZS1zd2FwcGluZy5cbiAgdmFyIEN0b3IgPSBmdW5jdGlvbigpe307XG5cbiAgLy8gQ3JlYXRlIGEgc2FmZSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciB1c2UgYmVsb3cuXG4gIHZhciBfID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiBpbnN0YW5jZW9mIF8pIHJldHVybiBvYmo7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIF8pKSByZXR1cm4gbmV3IF8ob2JqKTtcbiAgICB0aGlzLl93cmFwcGVkID0gb2JqO1xuICB9O1xuXG4gIC8vIEV4cG9ydCB0aGUgVW5kZXJzY29yZSBvYmplY3QgZm9yICoqTm9kZS5qcyoqLCB3aXRoXG4gIC8vIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGZvciB0aGUgb2xkIGByZXF1aXJlKClgIEFQSS4gSWYgd2UncmUgaW5cbiAgLy8gdGhlIGJyb3dzZXIsIGFkZCBgX2AgYXMgYSBnbG9iYWwgb2JqZWN0LlxuICBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfO1xuICAgIH1cbiAgICBleHBvcnRzLl8gPSBfO1xuICB9IGVsc2Uge1xuICAgIHJvb3QuXyA9IF87XG4gIH1cblxuICAvLyBDdXJyZW50IHZlcnNpb24uXG4gIF8uVkVSU0lPTiA9ICcxLjguMyc7XG5cbiAgLy8gSW50ZXJuYWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGVmZmljaWVudCAoZm9yIGN1cnJlbnQgZW5naW5lcykgdmVyc2lvblxuICAvLyBvZiB0aGUgcGFzc2VkLWluIGNhbGxiYWNrLCB0byBiZSByZXBlYXRlZGx5IGFwcGxpZWQgaW4gb3RoZXIgVW5kZXJzY29yZVxuICAvLyBmdW5jdGlvbnMuXG4gIHZhciBvcHRpbWl6ZUNiID0gZnVuY3Rpb24oZnVuYywgY29udGV4dCwgYXJnQ291bnQpIHtcbiAgICBpZiAoY29udGV4dCA9PT0gdm9pZCAwKSByZXR1cm4gZnVuYztcbiAgICBzd2l0Y2ggKGFyZ0NvdW50ID09IG51bGwgPyAzIDogYXJnQ291bnQpIHtcbiAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUpO1xuICAgICAgfTtcbiAgICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBvdGhlcikge1xuICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlLCBvdGhlcik7XG4gICAgICB9O1xuICAgICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH07XG4gICAgICBjYXNlIDQ6IHJldHVybiBmdW5jdGlvbihhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZnVuYy5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gQSBtb3N0bHktaW50ZXJuYWwgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgY2FsbGJhY2tzIHRoYXQgY2FuIGJlIGFwcGxpZWRcbiAgLy8gdG8gZWFjaCBlbGVtZW50IGluIGEgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRoZSBkZXNpcmVkIHJlc3VsdCDigJQgZWl0aGVyXG4gIC8vIGlkZW50aXR5LCBhbiBhcmJpdHJhcnkgY2FsbGJhY2ssIGEgcHJvcGVydHkgbWF0Y2hlciwgb3IgYSBwcm9wZXJ0eSBhY2Nlc3Nvci5cbiAgdmFyIGNiID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQsIGFyZ0NvdW50KSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiBfLmlkZW50aXR5O1xuICAgIGlmIChfLmlzRnVuY3Rpb24odmFsdWUpKSByZXR1cm4gb3B0aW1pemVDYih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpO1xuICAgIGlmIChfLmlzT2JqZWN0KHZhbHVlKSkgcmV0dXJuIF8ubWF0Y2hlcih2YWx1ZSk7XG4gICAgcmV0dXJuIF8ucHJvcGVydHkodmFsdWUpO1xuICB9O1xuICBfLml0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gY2IodmFsdWUsIGNvbnRleHQsIEluZmluaXR5KTtcbiAgfTtcblxuICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYXNzaWduZXIgZnVuY3Rpb25zLlxuICB2YXIgY3JlYXRlQXNzaWduZXIgPSBmdW5jdGlvbihrZXlzRnVuYywgdW5kZWZpbmVkT25seSkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCA8IDIgfHwgb2JqID09IG51bGwpIHJldHVybiBvYmo7XG4gICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdLFxuICAgICAgICAgICAga2V5cyA9IGtleXNGdW5jKHNvdXJjZSksXG4gICAgICAgICAgICBsID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKCF1bmRlZmluZWRPbmx5IHx8IG9ialtrZXldID09PSB2b2lkIDApIG9ialtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgfTtcblxuICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYSBuZXcgb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSBhbm90aGVyLlxuICB2YXIgYmFzZUNyZWF0ZSA9IGZ1bmN0aW9uKHByb3RvdHlwZSkge1xuICAgIGlmICghXy5pc09iamVjdChwcm90b3R5cGUpKSByZXR1cm4ge307XG4gICAgaWYgKG5hdGl2ZUNyZWF0ZSkgcmV0dXJuIG5hdGl2ZUNyZWF0ZShwcm90b3R5cGUpO1xuICAgIEN0b3IucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICAgIHZhciByZXN1bHQgPSBuZXcgQ3RvcjtcbiAgICBDdG9yLnByb3RvdHlwZSA9IG51bGw7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICB2YXIgcHJvcGVydHkgPSBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gb2JqID09IG51bGwgPyB2b2lkIDAgOiBvYmpba2V5XTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEhlbHBlciBmb3IgY29sbGVjdGlvbiBtZXRob2RzIHRvIGRldGVybWluZSB3aGV0aGVyIGEgY29sbGVjdGlvblxuICAvLyBzaG91bGQgYmUgaXRlcmF0ZWQgYXMgYW4gYXJyYXkgb3IgYXMgYW4gb2JqZWN0XG4gIC8vIFJlbGF0ZWQ6IGh0dHA6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoXG4gIC8vIEF2b2lkcyBhIHZlcnkgbmFzdHkgaU9TIDggSklUIGJ1ZyBvbiBBUk0tNjQuICMyMDk0XG4gIHZhciBNQVhfQVJSQVlfSU5ERVggPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuICB2YXIgZ2V0TGVuZ3RoID0gcHJvcGVydHkoJ2xlbmd0aCcpO1xuICB2YXIgaXNBcnJheUxpa2UgPSBmdW5jdGlvbihjb2xsZWN0aW9uKSB7XG4gICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChjb2xsZWN0aW9uKTtcbiAgICByZXR1cm4gdHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyAmJiBsZW5ndGggPj0gMCAmJiBsZW5ndGggPD0gTUFYX0FSUkFZX0lOREVYO1xuICB9O1xuXG4gIC8vIENvbGxlY3Rpb24gRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gVGhlIGNvcm5lcnN0b25lLCBhbiBgZWFjaGAgaW1wbGVtZW50YXRpb24sIGFrYSBgZm9yRWFjaGAuXG4gIC8vIEhhbmRsZXMgcmF3IG9iamVjdHMgaW4gYWRkaXRpb24gdG8gYXJyYXktbGlrZXMuIFRyZWF0cyBhbGxcbiAgLy8gc3BhcnNlIGFycmF5LWxpa2VzIGFzIGlmIHRoZXkgd2VyZSBkZW5zZS5cbiAgXy5lYWNoID0gXy5mb3JFYWNoID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIGksIGxlbmd0aDtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkge1xuICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGl0ZXJhdGVlKG9ialtpXSwgaSwgb2JqKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaXRlcmF0ZWUob2JqW2tleXNbaV1dLCBrZXlzW2ldLCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0ZWUgdG8gZWFjaCBlbGVtZW50LlxuICBfLm1hcCA9IF8uY29sbGVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aCxcbiAgICAgICAgcmVzdWx0cyA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcbiAgICAgIHJlc3VsdHNbaW5kZXhdID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBDcmVhdGUgYSByZWR1Y2luZyBmdW5jdGlvbiBpdGVyYXRpbmcgbGVmdCBvciByaWdodC5cbiAgZnVuY3Rpb24gY3JlYXRlUmVkdWNlKGRpcikge1xuICAgIC8vIE9wdGltaXplZCBpdGVyYXRvciBmdW5jdGlvbiBhcyB1c2luZyBhcmd1bWVudHMubGVuZ3RoXG4gICAgLy8gaW4gdGhlIG1haW4gZnVuY3Rpb24gd2lsbCBkZW9wdGltaXplIHRoZSwgc2VlICMxOTkxLlxuICAgIGZ1bmN0aW9uIGl0ZXJhdG9yKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGtleXMsIGluZGV4LCBsZW5ndGgpIHtcbiAgICAgIGZvciAoOyBpbmRleCA+PSAwICYmIGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSBkaXIpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcbiAgICAgICAgbWVtbyA9IGl0ZXJhdGVlKG1lbW8sIG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBtZW1vLCBjb250ZXh0KSB7XG4gICAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQsIDQpO1xuICAgICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aCxcbiAgICAgICAgICBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgIC8vIERldGVybWluZSB0aGUgaW5pdGlhbCB2YWx1ZSBpZiBub25lIGlzIHByb3ZpZGVkLlxuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAzKSB7XG4gICAgICAgIG1lbW8gPSBvYmpba2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXhdO1xuICAgICAgICBpbmRleCArPSBkaXI7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlcmF0b3Iob2JqLCBpdGVyYXRlZSwgbWVtbywga2V5cywgaW5kZXgsIGxlbmd0aCk7XG4gICAgfTtcbiAgfVxuXG4gIC8vICoqUmVkdWNlKiogYnVpbGRzIHVwIGEgc2luZ2xlIHJlc3VsdCBmcm9tIGEgbGlzdCBvZiB2YWx1ZXMsIGFrYSBgaW5qZWN0YCxcbiAgLy8gb3IgYGZvbGRsYC5cbiAgXy5yZWR1Y2UgPSBfLmZvbGRsID0gXy5pbmplY3QgPSBjcmVhdGVSZWR1Y2UoMSk7XG5cbiAgLy8gVGhlIHJpZ2h0LWFzc29jaWF0aXZlIHZlcnNpb24gb2YgcmVkdWNlLCBhbHNvIGtub3duIGFzIGBmb2xkcmAuXG4gIF8ucmVkdWNlUmlnaHQgPSBfLmZvbGRyID0gY3JlYXRlUmVkdWNlKC0xKTtcblxuICAvLyBSZXR1cm4gdGhlIGZpcnN0IHZhbHVlIHdoaWNoIHBhc3NlcyBhIHRydXRoIHRlc3QuIEFsaWFzZWQgYXMgYGRldGVjdGAuXG4gIF8uZmluZCA9IF8uZGV0ZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIga2V5O1xuICAgIGlmIChpc0FycmF5TGlrZShvYmopKSB7XG4gICAgICBrZXkgPSBfLmZpbmRJbmRleChvYmosIHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSA9IF8uZmluZEtleShvYmosIHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGlmIChrZXkgIT09IHZvaWQgMCAmJiBrZXkgIT09IC0xKSByZXR1cm4gb2JqW2tleV07XG4gIH07XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgdGhhdCBwYXNzIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgc2VsZWN0YC5cbiAgXy5maWx0ZXIgPSBfLnNlbGVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGxpc3QpKSByZXN1bHRzLnB1c2godmFsdWUpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIGZvciB3aGljaCBhIHRydXRoIHRlc3QgZmFpbHMuXG4gIF8ucmVqZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gXy5maWx0ZXIob2JqLCBfLm5lZ2F0ZShjYihwcmVkaWNhdGUpKSwgY29udGV4dCk7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgYWxsIG9mIHRoZSBlbGVtZW50cyBtYXRjaCBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYGFsbGAuXG4gIF8uZXZlcnkgPSBfLmFsbCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgaWYgKCFwcmVkaWNhdGUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8vIERldGVybWluZSBpZiBhdCBsZWFzdCBvbmUgZWxlbWVudCBpbiB0aGUgb2JqZWN0IG1hdGNoZXMgYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBhbnlgLlxuICBfLnNvbWUgPSBfLmFueSA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgaWYgKHByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaikpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBhcnJheSBvciBvYmplY3QgY29udGFpbnMgYSBnaXZlbiBpdGVtICh1c2luZyBgPT09YCkuXG4gIC8vIEFsaWFzZWQgYXMgYGluY2x1ZGVzYCBhbmQgYGluY2x1ZGVgLlxuICBfLmNvbnRhaW5zID0gXy5pbmNsdWRlcyA9IF8uaW5jbHVkZSA9IGZ1bmN0aW9uKG9iaiwgaXRlbSwgZnJvbUluZGV4LCBndWFyZCkge1xuICAgIGlmICghaXNBcnJheUxpa2Uob2JqKSkgb2JqID0gXy52YWx1ZXMob2JqKTtcbiAgICBpZiAodHlwZW9mIGZyb21JbmRleCAhPSAnbnVtYmVyJyB8fCBndWFyZCkgZnJvbUluZGV4ID0gMDtcbiAgICByZXR1cm4gXy5pbmRleE9mKG9iaiwgaXRlbSwgZnJvbUluZGV4KSA+PSAwO1xuICB9O1xuXG4gIC8vIEludm9rZSBhIG1ldGhvZCAod2l0aCBhcmd1bWVudHMpIG9uIGV2ZXJ5IGl0ZW0gaW4gYSBjb2xsZWN0aW9uLlxuICBfLmludm9rZSA9IGZ1bmN0aW9uKG9iaiwgbWV0aG9kKSB7XG4gICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgdmFyIGlzRnVuYyA9IF8uaXNGdW5jdGlvbihtZXRob2QpO1xuICAgIHJldHVybiBfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgZnVuYyA9IGlzRnVuYyA/IG1ldGhvZCA6IHZhbHVlW21ldGhvZF07XG4gICAgICByZXR1cm4gZnVuYyA9PSBudWxsID8gZnVuYyA6IGZ1bmMuYXBwbHkodmFsdWUsIGFyZ3MpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYG1hcGA6IGZldGNoaW5nIGEgcHJvcGVydHkuXG4gIF8ucGx1Y2sgPSBmdW5jdGlvbihvYmosIGtleSkge1xuICAgIHJldHVybiBfLm1hcChvYmosIF8ucHJvcGVydHkoa2V5KSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmlsdGVyYDogc2VsZWN0aW5nIG9ubHkgb2JqZWN0c1xuICAvLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLndoZXJlID0gZnVuY3Rpb24ob2JqLCBhdHRycykge1xuICAgIHJldHVybiBfLmZpbHRlcihvYmosIF8ubWF0Y2hlcihhdHRycykpO1xuICB9O1xuXG4gIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYGZpbmRgOiBnZXR0aW5nIHRoZSBmaXJzdCBvYmplY3RcbiAgLy8gY29udGFpbmluZyBzcGVjaWZpYyBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5maW5kV2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7XG4gICAgcmV0dXJuIF8uZmluZChvYmosIF8ubWF0Y2hlcihhdHRycykpO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbWF4aW11bSBlbGVtZW50IChvciBlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS5cbiAgXy5tYXggPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdCA9IC1JbmZpbml0eSwgbGFzdENvbXB1dGVkID0gLUluZmluaXR5LFxuICAgICAgICB2YWx1ZSwgY29tcHV0ZWQ7XG4gICAgaWYgKGl0ZXJhdGVlID09IG51bGwgJiYgb2JqICE9IG51bGwpIHtcbiAgICAgIG9iaiA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSA9IG9ialtpXTtcbiAgICAgICAgaWYgKHZhbHVlID4gcmVzdWx0KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGxpc3QpO1xuICAgICAgICBpZiAoY29tcHV0ZWQgPiBsYXN0Q29tcHV0ZWQgfHwgY29tcHV0ZWQgPT09IC1JbmZpbml0eSAmJiByZXN1bHQgPT09IC1JbmZpbml0eSkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIGxhc3RDb21wdXRlZCA9IGNvbXB1dGVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIG1pbmltdW0gZWxlbWVudCAob3IgZWxlbWVudC1iYXNlZCBjb21wdXRhdGlvbikuXG4gIF8ubWluID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHQgPSBJbmZpbml0eSwgbGFzdENvbXB1dGVkID0gSW5maW5pdHksXG4gICAgICAgIHZhbHVlLCBjb21wdXRlZDtcbiAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCAmJiBvYmogIT0gbnVsbCkge1xuICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2ldO1xuICAgICAgICBpZiAodmFsdWUgPCByZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdCk7XG4gICAgICAgIGlmIChjb21wdXRlZCA8IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gSW5maW5pdHkgJiYgcmVzdWx0ID09PSBJbmZpbml0eSkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIGxhc3RDb21wdXRlZCA9IGNvbXB1dGVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBTaHVmZmxlIGEgY29sbGVjdGlvbiwgdXNpbmcgdGhlIG1vZGVybiB2ZXJzaW9uIG9mIHRoZVxuICAvLyBbRmlzaGVyLVlhdGVzIHNodWZmbGVdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmlzaGVy4oCTWWF0ZXNfc2h1ZmZsZSkuXG4gIF8uc2h1ZmZsZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBzZXQgPSBpc0FycmF5TGlrZShvYmopID8gb2JqIDogXy52YWx1ZXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0gc2V0Lmxlbmd0aDtcbiAgICB2YXIgc2h1ZmZsZWQgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGluZGV4ID0gMCwgcmFuZDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHJhbmQgPSBfLnJhbmRvbSgwLCBpbmRleCk7XG4gICAgICBpZiAocmFuZCAhPT0gaW5kZXgpIHNodWZmbGVkW2luZGV4XSA9IHNodWZmbGVkW3JhbmRdO1xuICAgICAgc2h1ZmZsZWRbcmFuZF0gPSBzZXRbaW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gc2h1ZmZsZWQ7XG4gIH07XG5cbiAgLy8gU2FtcGxlICoqbioqIHJhbmRvbSB2YWx1ZXMgZnJvbSBhIGNvbGxlY3Rpb24uXG4gIC8vIElmICoqbioqIGlzIG5vdCBzcGVjaWZpZWQsIHJldHVybnMgYSBzaW5nbGUgcmFuZG9tIGVsZW1lbnQuXG4gIC8vIFRoZSBpbnRlcm5hbCBgZ3VhcmRgIGFyZ3VtZW50IGFsbG93cyBpdCB0byB3b3JrIHdpdGggYG1hcGAuXG4gIF8uc2FtcGxlID0gZnVuY3Rpb24ob2JqLCBuLCBndWFyZCkge1xuICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHtcbiAgICAgIGlmICghaXNBcnJheUxpa2Uob2JqKSkgb2JqID0gXy52YWx1ZXMob2JqKTtcbiAgICAgIHJldHVybiBvYmpbXy5yYW5kb20ob2JqLmxlbmd0aCAtIDEpXTtcbiAgICB9XG4gICAgcmV0dXJuIF8uc2h1ZmZsZShvYmopLnNsaWNlKDAsIE1hdGgubWF4KDAsIG4pKTtcbiAgfTtcblxuICAvLyBTb3J0IHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24gcHJvZHVjZWQgYnkgYW4gaXRlcmF0ZWUuXG4gIF8uc29ydEJ5ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHJldHVybiBfLnBsdWNrKF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgY3JpdGVyaWE6IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdClcbiAgICAgIH07XG4gICAgfSkuc29ydChmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgICAgdmFyIGEgPSBsZWZ0LmNyaXRlcmlhO1xuICAgICAgdmFyIGIgPSByaWdodC5jcml0ZXJpYTtcbiAgICAgIGlmIChhICE9PSBiKSB7XG4gICAgICAgIGlmIChhID4gYiB8fCBhID09PSB2b2lkIDApIHJldHVybiAxO1xuICAgICAgICBpZiAoYSA8IGIgfHwgYiA9PT0gdm9pZCAwKSByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gbGVmdC5pbmRleCAtIHJpZ2h0LmluZGV4O1xuICAgIH0pLCAndmFsdWUnKTtcbiAgfTtcblxuICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiB1c2VkIGZvciBhZ2dyZWdhdGUgXCJncm91cCBieVwiIG9wZXJhdGlvbnMuXG4gIHZhciBncm91cCA9IGZ1bmN0aW9uKGJlaGF2aW9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHZhciBrZXkgPSBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIG9iaik7XG4gICAgICAgIGJlaGF2aW9yKHJlc3VsdCwgdmFsdWUsIGtleSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBHcm91cHMgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbi4gUGFzcyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlXG4gIC8vIHRvIGdyb3VwIGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgY3JpdGVyaW9uLlxuICBfLmdyb3VwQnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoXy5oYXMocmVzdWx0LCBrZXkpKSByZXN1bHRba2V5XS5wdXNoKHZhbHVlKTsgZWxzZSByZXN1bHRba2V5XSA9IFt2YWx1ZV07XG4gIH0pO1xuXG4gIC8vIEluZGV4ZXMgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiwgc2ltaWxhciB0byBgZ3JvdXBCeWAsIGJ1dCBmb3JcbiAgLy8gd2hlbiB5b3Uga25vdyB0aGF0IHlvdXIgaW5kZXggdmFsdWVzIHdpbGwgYmUgdW5pcXVlLlxuICBfLmluZGV4QnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICB9KTtcblxuICAvLyBDb3VudHMgaW5zdGFuY2VzIG9mIGFuIG9iamVjdCB0aGF0IGdyb3VwIGJ5IGEgY2VydGFpbiBjcml0ZXJpb24uIFBhc3NcbiAgLy8gZWl0aGVyIGEgc3RyaW5nIGF0dHJpYnV0ZSB0byBjb3VudCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG4gIC8vIGNyaXRlcmlvbi5cbiAgXy5jb3VudEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgaWYgKF8uaGFzKHJlc3VsdCwga2V5KSkgcmVzdWx0W2tleV0rKzsgZWxzZSByZXN1bHRba2V5XSA9IDE7XG4gIH0pO1xuXG4gIC8vIFNhZmVseSBjcmVhdGUgYSByZWFsLCBsaXZlIGFycmF5IGZyb20gYW55dGhpbmcgaXRlcmFibGUuXG4gIF8udG9BcnJheSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghb2JqKSByZXR1cm4gW107XG4gICAgaWYgKF8uaXNBcnJheShvYmopKSByZXR1cm4gc2xpY2UuY2FsbChvYmopO1xuICAgIGlmIChpc0FycmF5TGlrZShvYmopKSByZXR1cm4gXy5tYXAob2JqLCBfLmlkZW50aXR5KTtcbiAgICByZXR1cm4gXy52YWx1ZXMob2JqKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBvYmplY3QuXG4gIF8uc2l6ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIDA7XG4gICAgcmV0dXJuIGlzQXJyYXlMaWtlKG9iaikgPyBvYmoubGVuZ3RoIDogXy5rZXlzKG9iaikubGVuZ3RoO1xuICB9O1xuXG4gIC8vIFNwbGl0IGEgY29sbGVjdGlvbiBpbnRvIHR3byBhcnJheXM6IG9uZSB3aG9zZSBlbGVtZW50cyBhbGwgc2F0aXNmeSB0aGUgZ2l2ZW5cbiAgLy8gcHJlZGljYXRlLCBhbmQgb25lIHdob3NlIGVsZW1lbnRzIGFsbCBkbyBub3Qgc2F0aXNmeSB0aGUgcHJlZGljYXRlLlxuICBfLnBhcnRpdGlvbiA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIgcGFzcyA9IFtdLCBmYWlsID0gW107XG4gICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqKSB7XG4gICAgICAocHJlZGljYXRlKHZhbHVlLCBrZXksIG9iaikgPyBwYXNzIDogZmFpbCkucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtwYXNzLCBmYWlsXTtcbiAgfTtcblxuICAvLyBBcnJheSBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gR2V0IHRoZSBmaXJzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBmaXJzdCBOXG4gIC8vIHZhbHVlcyBpbiB0aGUgYXJyYXkuIEFsaWFzZWQgYXMgYGhlYWRgIGFuZCBgdGFrZWAuIFRoZSAqKmd1YXJkKiogY2hlY2tcbiAgLy8gYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgXy5tYXBgLlxuICBfLmZpcnN0ID0gXy5oZWFkID0gXy50YWtlID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgaWYgKGFycmF5ID09IG51bGwpIHJldHVybiB2b2lkIDA7XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkgcmV0dXJuIGFycmF5WzBdO1xuICAgIHJldHVybiBfLmluaXRpYWwoYXJyYXksIGFycmF5Lmxlbmd0aCAtIG4pO1xuICB9O1xuXG4gIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGxhc3QgZW50cnkgb2YgdGhlIGFycmF5LiBFc3BlY2lhbGx5IHVzZWZ1bCBvblxuICAvLyB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiBhbGwgdGhlIHZhbHVlcyBpblxuICAvLyB0aGUgYXJyYXksIGV4Y2x1ZGluZyB0aGUgbGFzdCBOLlxuICBfLmluaXRpYWwgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgMCwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gKG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKSkpO1xuICB9O1xuXG4gIC8vIEdldCB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBsYXN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS5cbiAgXy5sYXN0ID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgaWYgKGFycmF5ID09IG51bGwpIHJldHVybiB2b2lkIDA7XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkgcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiBfLnJlc3QoYXJyYXksIE1hdGgubWF4KDAsIGFycmF5Lmxlbmd0aCAtIG4pKTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBmaXJzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEFsaWFzZWQgYXMgYHRhaWxgIGFuZCBgZHJvcGAuXG4gIC8vIEVzcGVjaWFsbHkgdXNlZnVsIG9uIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nIGFuICoqbioqIHdpbGwgcmV0dXJuXG4gIC8vIHRoZSByZXN0IE4gdmFsdWVzIGluIHRoZSBhcnJheS5cbiAgXy5yZXN0ID0gXy50YWlsID0gXy5kcm9wID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKTtcbiAgfTtcblxuICAvLyBUcmltIG91dCBhbGwgZmFsc3kgdmFsdWVzIGZyb20gYW4gYXJyYXkuXG4gIF8uY29tcGFjdCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKGFycmF5LCBfLmlkZW50aXR5KTtcbiAgfTtcblxuICAvLyBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiBhIHJlY3Vyc2l2ZSBgZmxhdHRlbmAgZnVuY3Rpb24uXG4gIHZhciBmbGF0dGVuID0gZnVuY3Rpb24oaW5wdXQsIHNoYWxsb3csIHN0cmljdCwgc3RhcnRJbmRleCkge1xuICAgIHZhciBvdXRwdXQgPSBbXSwgaWR4ID0gMDtcbiAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleCB8fCAwLCBsZW5ndGggPSBnZXRMZW5ndGgoaW5wdXQpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2YWx1ZSA9IGlucHV0W2ldO1xuICAgICAgaWYgKGlzQXJyYXlMaWtlKHZhbHVlKSAmJiAoXy5pc0FycmF5KHZhbHVlKSB8fCBfLmlzQXJndW1lbnRzKHZhbHVlKSkpIHtcbiAgICAgICAgLy9mbGF0dGVuIGN1cnJlbnQgbGV2ZWwgb2YgYXJyYXkgb3IgYXJndW1lbnRzIG9iamVjdFxuICAgICAgICBpZiAoIXNoYWxsb3cpIHZhbHVlID0gZmxhdHRlbih2YWx1ZSwgc2hhbGxvdywgc3RyaWN0KTtcbiAgICAgICAgdmFyIGogPSAwLCBsZW4gPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgIG91dHB1dC5sZW5ndGggKz0gbGVuO1xuICAgICAgICB3aGlsZSAoaiA8IGxlbikge1xuICAgICAgICAgIG91dHB1dFtpZHgrK10gPSB2YWx1ZVtqKytdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFzdHJpY3QpIHtcbiAgICAgICAgb3V0cHV0W2lkeCsrXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9O1xuXG4gIC8vIEZsYXR0ZW4gb3V0IGFuIGFycmF5LCBlaXRoZXIgcmVjdXJzaXZlbHkgKGJ5IGRlZmF1bHQpLCBvciBqdXN0IG9uZSBsZXZlbC5cbiAgXy5mbGF0dGVuID0gZnVuY3Rpb24oYXJyYXksIHNoYWxsb3cpIHtcbiAgICByZXR1cm4gZmxhdHRlbihhcnJheSwgc2hhbGxvdywgZmFsc2UpO1xuICB9O1xuXG4gIC8vIFJldHVybiBhIHZlcnNpb24gb2YgdGhlIGFycmF5IHRoYXQgZG9lcyBub3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIHZhbHVlKHMpLlxuICBfLndpdGhvdXQgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHJldHVybiBfLmRpZmZlcmVuY2UoYXJyYXksIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhIGR1cGxpY2F0ZS1mcmVlIHZlcnNpb24gb2YgdGhlIGFycmF5LiBJZiB0aGUgYXJyYXkgaGFzIGFscmVhZHlcbiAgLy8gYmVlbiBzb3J0ZWQsIHlvdSBoYXZlIHRoZSBvcHRpb24gb2YgdXNpbmcgYSBmYXN0ZXIgYWxnb3JpdGhtLlxuICAvLyBBbGlhc2VkIGFzIGB1bmlxdWVgLlxuICBfLnVuaXEgPSBfLnVuaXF1ZSA9IGZ1bmN0aW9uKGFycmF5LCBpc1NvcnRlZCwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpZiAoIV8uaXNCb29sZWFuKGlzU29ydGVkKSkge1xuICAgICAgY29udGV4dCA9IGl0ZXJhdGVlO1xuICAgICAgaXRlcmF0ZWUgPSBpc1NvcnRlZDtcbiAgICAgIGlzU29ydGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpdGVyYXRlZSAhPSBudWxsKSBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIHNlZW4gPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFsdWUgPSBhcnJheVtpXSxcbiAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlID8gaXRlcmF0ZWUodmFsdWUsIGksIGFycmF5KSA6IHZhbHVlO1xuICAgICAgaWYgKGlzU29ydGVkKSB7XG4gICAgICAgIGlmICghaSB8fCBzZWVuICE9PSBjb21wdXRlZCkgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICBzZWVuID0gY29tcHV0ZWQ7XG4gICAgICB9IGVsc2UgaWYgKGl0ZXJhdGVlKSB7XG4gICAgICAgIGlmICghXy5jb250YWlucyhzZWVuLCBjb21wdXRlZCkpIHtcbiAgICAgICAgICBzZWVuLnB1c2goY29tcHV0ZWQpO1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghXy5jb250YWlucyhyZXN1bHQsIHZhbHVlKSkge1xuICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIHRoZSB1bmlvbjogZWFjaCBkaXN0aW5jdCBlbGVtZW50IGZyb20gYWxsIG9mXG4gIC8vIHRoZSBwYXNzZWQtaW4gYXJyYXlzLlxuICBfLnVuaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIF8udW5pcShmbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgdHJ1ZSkpO1xuICB9O1xuXG4gIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyBldmVyeSBpdGVtIHNoYXJlZCBiZXR3ZWVuIGFsbCB0aGVcbiAgLy8gcGFzc2VkLWluIGFycmF5cy5cbiAgXy5pbnRlcnNlY3Rpb24gPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgYXJnc0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBhcnJheVtpXTtcbiAgICAgIGlmIChfLmNvbnRhaW5zKHJlc3VsdCwgaXRlbSkpIGNvbnRpbnVlO1xuICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCBhcmdzTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKCFfLmNvbnRhaW5zKGFyZ3VtZW50c1tqXSwgaXRlbSkpIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGogPT09IGFyZ3NMZW5ndGgpIHJlc3VsdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFRha2UgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBvbmUgYXJyYXkgYW5kIGEgbnVtYmVyIG9mIG90aGVyIGFycmF5cy5cbiAgLy8gT25seSB0aGUgZWxlbWVudHMgcHJlc2VudCBpbiBqdXN0IHRoZSBmaXJzdCBhcnJheSB3aWxsIHJlbWFpbi5cbiAgXy5kaWZmZXJlbmNlID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgcmVzdCA9IGZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCB0cnVlLCAxKTtcbiAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgIHJldHVybiAhXy5jb250YWlucyhyZXN0LCB2YWx1ZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gWmlwIHRvZ2V0aGVyIG11bHRpcGxlIGxpc3RzIGludG8gYSBzaW5nbGUgYXJyYXkgLS0gZWxlbWVudHMgdGhhdCBzaGFyZVxuICAvLyBhbiBpbmRleCBnbyB0b2dldGhlci5cbiAgXy56aXAgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXy51bnppcChhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIENvbXBsZW1lbnQgb2YgXy56aXAuIFVuemlwIGFjY2VwdHMgYW4gYXJyYXkgb2YgYXJyYXlzIGFuZCBncm91cHNcbiAgLy8gZWFjaCBhcnJheSdzIGVsZW1lbnRzIG9uIHNoYXJlZCBpbmRpY2VzXG4gIF8udW56aXAgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciBsZW5ndGggPSBhcnJheSAmJiBfLm1heChhcnJheSwgZ2V0TGVuZ3RoKS5sZW5ndGggfHwgMDtcbiAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHJlc3VsdFtpbmRleF0gPSBfLnBsdWNrKGFycmF5LCBpbmRleCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gQ29udmVydHMgbGlzdHMgaW50byBvYmplY3RzLiBQYXNzIGVpdGhlciBhIHNpbmdsZSBhcnJheSBvZiBgW2tleSwgdmFsdWVdYFxuICAvLyBwYWlycywgb3IgdHdvIHBhcmFsbGVsIGFycmF5cyBvZiB0aGUgc2FtZSBsZW5ndGggLS0gb25lIG9mIGtleXMsIGFuZCBvbmUgb2ZcbiAgLy8gdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVzLlxuICBfLm9iamVjdCA9IGZ1bmN0aW9uKGxpc3QsIHZhbHVlcykge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGxpc3QpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh2YWx1ZXMpIHtcbiAgICAgICAgcmVzdWx0W2xpc3RbaV1dID0gdmFsdWVzW2ldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0W2xpc3RbaV1bMF1dID0gbGlzdFtpXVsxXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBmaW5kSW5kZXggYW5kIGZpbmRMYXN0SW5kZXggZnVuY3Rpb25zXG4gIGZ1bmN0aW9uIGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKGRpcikge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgICB2YXIgaW5kZXggPSBkaXIgPiAwID8gMCA6IGxlbmd0aCAtIDE7XG4gICAgICBmb3IgKDsgaW5kZXggPj0gMCAmJiBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gZGlyKSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfTtcbiAgfVxuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGluZGV4IG9uIGFuIGFycmF5LWxpa2UgdGhhdCBwYXNzZXMgYSBwcmVkaWNhdGUgdGVzdFxuICBfLmZpbmRJbmRleCA9IGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKDEpO1xuICBfLmZpbmRMYXN0SW5kZXggPSBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlcigtMSk7XG5cbiAgLy8gVXNlIGEgY29tcGFyYXRvciBmdW5jdGlvbiB0byBmaWd1cmUgb3V0IHRoZSBzbWFsbGVzdCBpbmRleCBhdCB3aGljaFxuICAvLyBhbiBvYmplY3Qgc2hvdWxkIGJlIGluc2VydGVkIHNvIGFzIHRvIG1haW50YWluIG9yZGVyLiBVc2VzIGJpbmFyeSBzZWFyY2guXG4gIF8uc29ydGVkSW5kZXggPSBmdW5jdGlvbihhcnJheSwgb2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQsIDEpO1xuICAgIHZhciB2YWx1ZSA9IGl0ZXJhdGVlKG9iaik7XG4gICAgdmFyIGxvdyA9IDAsIGhpZ2ggPSBnZXRMZW5ndGgoYXJyYXkpO1xuICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICB2YXIgbWlkID0gTWF0aC5mbG9vcigobG93ICsgaGlnaCkgLyAyKTtcbiAgICAgIGlmIChpdGVyYXRlZShhcnJheVttaWRdKSA8IHZhbHVlKSBsb3cgPSBtaWQgKyAxOyBlbHNlIGhpZ2ggPSBtaWQ7XG4gICAgfVxuICAgIHJldHVybiBsb3c7XG4gIH07XG5cbiAgLy8gR2VuZXJhdG9yIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgaW5kZXhPZiBhbmQgbGFzdEluZGV4T2YgZnVuY3Rpb25zXG4gIGZ1bmN0aW9uIGNyZWF0ZUluZGV4RmluZGVyKGRpciwgcHJlZGljYXRlRmluZCwgc29ydGVkSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGlkeCkge1xuICAgICAgdmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpO1xuICAgICAgaWYgKHR5cGVvZiBpZHggPT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKGRpciA+IDApIHtcbiAgICAgICAgICAgIGkgPSBpZHggPj0gMCA/IGlkeCA6IE1hdGgubWF4KGlkeCArIGxlbmd0aCwgaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZW5ndGggPSBpZHggPj0gMCA/IE1hdGgubWluKGlkeCArIDEsIGxlbmd0aCkgOiBpZHggKyBsZW5ndGggKyAxO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNvcnRlZEluZGV4ICYmIGlkeCAmJiBsZW5ndGgpIHtcbiAgICAgICAgaWR4ID0gc29ydGVkSW5kZXgoYXJyYXksIGl0ZW0pO1xuICAgICAgICByZXR1cm4gYXJyYXlbaWR4XSA9PT0gaXRlbSA/IGlkeCA6IC0xO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW0gIT09IGl0ZW0pIHtcbiAgICAgICAgaWR4ID0gcHJlZGljYXRlRmluZChzbGljZS5jYWxsKGFycmF5LCBpLCBsZW5ndGgpLCBfLmlzTmFOKTtcbiAgICAgICAgcmV0dXJuIGlkeCA+PSAwID8gaWR4ICsgaSA6IC0xO1xuICAgICAgfVxuICAgICAgZm9yIChpZHggPSBkaXIgPiAwID8gaSA6IGxlbmd0aCAtIDE7IGlkeCA+PSAwICYmIGlkeCA8IGxlbmd0aDsgaWR4ICs9IGRpcikge1xuICAgICAgICBpZiAoYXJyYXlbaWR4XSA9PT0gaXRlbSkgcmV0dXJuIGlkeDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuICB9XG5cbiAgLy8gUmV0dXJuIHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBpdGVtIGluIGFuIGFycmF5LFxuICAvLyBvciAtMSBpZiB0aGUgaXRlbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGFycmF5LlxuICAvLyBJZiB0aGUgYXJyYXkgaXMgbGFyZ2UgYW5kIGFscmVhZHkgaW4gc29ydCBvcmRlciwgcGFzcyBgdHJ1ZWBcbiAgLy8gZm9yICoqaXNTb3J0ZWQqKiB0byB1c2UgYmluYXJ5IHNlYXJjaC5cbiAgXy5pbmRleE9mID0gY3JlYXRlSW5kZXhGaW5kZXIoMSwgXy5maW5kSW5kZXgsIF8uc29ydGVkSW5kZXgpO1xuICBfLmxhc3RJbmRleE9mID0gY3JlYXRlSW5kZXhGaW5kZXIoLTEsIF8uZmluZExhc3RJbmRleCk7XG5cbiAgLy8gR2VuZXJhdGUgYW4gaW50ZWdlciBBcnJheSBjb250YWluaW5nIGFuIGFyaXRobWV0aWMgcHJvZ3Jlc3Npb24uIEEgcG9ydCBvZlxuICAvLyB0aGUgbmF0aXZlIFB5dGhvbiBgcmFuZ2UoKWAgZnVuY3Rpb24uIFNlZVxuICAvLyBbdGhlIFB5dGhvbiBkb2N1bWVudGF0aW9uXShodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvZnVuY3Rpb25zLmh0bWwjcmFuZ2UpLlxuICBfLnJhbmdlID0gZnVuY3Rpb24oc3RhcnQsIHN0b3AsIHN0ZXApIHtcbiAgICBpZiAoc3RvcCA9PSBudWxsKSB7XG4gICAgICBzdG9wID0gc3RhcnQgfHwgMDtcbiAgICAgIHN0YXJ0ID0gMDtcbiAgICB9XG4gICAgc3RlcCA9IHN0ZXAgfHwgMTtcblxuICAgIHZhciBsZW5ndGggPSBNYXRoLm1heChNYXRoLmNlaWwoKHN0b3AgLSBzdGFydCkgLyBzdGVwKSwgMCk7XG4gICAgdmFyIHJhbmdlID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyssIHN0YXJ0ICs9IHN0ZXApIHtcbiAgICAgIHJhbmdlW2lkeF0gPSBzdGFydDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2U7XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gKGFoZW0pIEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgdG8gZXhlY3V0ZSBhIGZ1bmN0aW9uIGFzIGEgY29uc3RydWN0b3JcbiAgLy8gb3IgYSBub3JtYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJvdmlkZWQgYXJndW1lbnRzXG4gIHZhciBleGVjdXRlQm91bmQgPSBmdW5jdGlvbihzb3VyY2VGdW5jLCBib3VuZEZ1bmMsIGNvbnRleHQsIGNhbGxpbmdDb250ZXh0LCBhcmdzKSB7XG4gICAgaWYgKCEoY2FsbGluZ0NvbnRleHQgaW5zdGFuY2VvZiBib3VuZEZ1bmMpKSByZXR1cm4gc291cmNlRnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB2YXIgc2VsZiA9IGJhc2VDcmVhdGUoc291cmNlRnVuYy5wcm90b3R5cGUpO1xuICAgIHZhciByZXN1bHQgPSBzb3VyY2VGdW5jLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgIGlmIChfLmlzT2JqZWN0KHJlc3VsdCkpIHJldHVybiByZXN1bHQ7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgZnVuY3Rpb24gYm91bmQgdG8gYSBnaXZlbiBvYmplY3QgKGFzc2lnbmluZyBgdGhpc2AsIGFuZCBhcmd1bWVudHMsXG4gIC8vIG9wdGlvbmFsbHkpLiBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgRnVuY3Rpb24uYmluZGAgaWZcbiAgLy8gYXZhaWxhYmxlLlxuICBfLmJpbmQgPSBmdW5jdGlvbihmdW5jLCBjb250ZXh0KSB7XG4gICAgaWYgKG5hdGl2ZUJpbmQgJiYgZnVuYy5iaW5kID09PSBuYXRpdmVCaW5kKSByZXR1cm4gbmF0aXZlQmluZC5hcHBseShmdW5jLCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIGlmICghXy5pc0Z1bmN0aW9uKGZ1bmMpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdCaW5kIG11c3QgYmUgY2FsbGVkIG9uIGEgZnVuY3Rpb24nKTtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICB2YXIgYm91bmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIGNvbnRleHQsIHRoaXMsIGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgIH07XG4gICAgcmV0dXJuIGJvdW5kO1xuICB9O1xuXG4gIC8vIFBhcnRpYWxseSBhcHBseSBhIGZ1bmN0aW9uIGJ5IGNyZWF0aW5nIGEgdmVyc2lvbiB0aGF0IGhhcyBoYWQgc29tZSBvZiBpdHNcbiAgLy8gYXJndW1lbnRzIHByZS1maWxsZWQsIHdpdGhvdXQgY2hhbmdpbmcgaXRzIGR5bmFtaWMgYHRoaXNgIGNvbnRleHQuIF8gYWN0c1xuICAvLyBhcyBhIHBsYWNlaG9sZGVyLCBhbGxvd2luZyBhbnkgY29tYmluYXRpb24gb2YgYXJndW1lbnRzIHRvIGJlIHByZS1maWxsZWQuXG4gIF8ucGFydGlhbCA9IGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICB2YXIgYm91bmRBcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBvc2l0aW9uID0gMCwgbGVuZ3RoID0gYm91bmRBcmdzLmxlbmd0aDtcbiAgICAgIHZhciBhcmdzID0gQXJyYXkobGVuZ3RoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJnc1tpXSA9IGJvdW5kQXJnc1tpXSA9PT0gXyA/IGFyZ3VtZW50c1twb3NpdGlvbisrXSA6IGJvdW5kQXJnc1tpXTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChwb3NpdGlvbiA8IGFyZ3VtZW50cy5sZW5ndGgpIGFyZ3MucHVzaChhcmd1bWVudHNbcG9zaXRpb24rK10pO1xuICAgICAgcmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLCBib3VuZCwgdGhpcywgdGhpcywgYXJncyk7XG4gICAgfTtcbiAgICByZXR1cm4gYm91bmQ7XG4gIH07XG5cbiAgLy8gQmluZCBhIG51bWJlciBvZiBhbiBvYmplY3QncyBtZXRob2RzIHRvIHRoYXQgb2JqZWN0LiBSZW1haW5pbmcgYXJndW1lbnRzXG4gIC8vIGFyZSB0aGUgbWV0aG9kIG5hbWVzIHRvIGJlIGJvdW5kLiBVc2VmdWwgZm9yIGVuc3VyaW5nIHRoYXQgYWxsIGNhbGxiYWNrc1xuICAvLyBkZWZpbmVkIG9uIGFuIG9iamVjdCBiZWxvbmcgdG8gaXQuXG4gIF8uYmluZEFsbCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBpLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLCBrZXk7XG4gICAgaWYgKGxlbmd0aCA8PSAxKSB0aHJvdyBuZXcgRXJyb3IoJ2JpbmRBbGwgbXVzdCBiZSBwYXNzZWQgZnVuY3Rpb24gbmFtZXMnKTtcbiAgICBmb3IgKGkgPSAxOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIG9ialtrZXldID0gXy5iaW5kKG9ialtrZXldLCBvYmopO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIE1lbW9pemUgYW4gZXhwZW5zaXZlIGZ1bmN0aW9uIGJ5IHN0b3JpbmcgaXRzIHJlc3VsdHMuXG4gIF8ubWVtb2l6ZSA9IGZ1bmN0aW9uKGZ1bmMsIGhhc2hlcikge1xuICAgIHZhciBtZW1vaXplID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICB2YXIgY2FjaGUgPSBtZW1vaXplLmNhY2hlO1xuICAgICAgdmFyIGFkZHJlc3MgPSAnJyArIChoYXNoZXIgPyBoYXNoZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IGtleSk7XG4gICAgICBpZiAoIV8uaGFzKGNhY2hlLCBhZGRyZXNzKSkgY2FjaGVbYWRkcmVzc10gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gY2FjaGVbYWRkcmVzc107XG4gICAgfTtcbiAgICBtZW1vaXplLmNhY2hlID0ge307XG4gICAgcmV0dXJuIG1lbW9pemU7XG4gIH07XG5cbiAgLy8gRGVsYXlzIGEgZnVuY3Rpb24gZm9yIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCBhbmQgdGhlbiBjYWxsc1xuICAvLyBpdCB3aXRoIHRoZSBhcmd1bWVudHMgc3VwcGxpZWQuXG4gIF8uZGVsYXkgPSBmdW5jdGlvbihmdW5jLCB3YWl0KSB7XG4gICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH0sIHdhaXQpO1xuICB9O1xuXG4gIC8vIERlZmVycyBhIGZ1bmN0aW9uLCBzY2hlZHVsaW5nIGl0IHRvIHJ1biBhZnRlciB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhc1xuICAvLyBjbGVhcmVkLlxuICBfLmRlZmVyID0gXy5wYXJ0aWFsKF8uZGVsYXksIF8sIDEpO1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIG9ubHkgYmUgdHJpZ2dlcmVkIGF0IG1vc3Qgb25jZVxuICAvLyBkdXJpbmcgYSBnaXZlbiB3aW5kb3cgb2YgdGltZS4gTm9ybWFsbHksIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gd2lsbCBydW5cbiAgLy8gYXMgbXVjaCBhcyBpdCBjYW4sIHdpdGhvdXQgZXZlciBnb2luZyBtb3JlIHRoYW4gb25jZSBwZXIgYHdhaXRgIGR1cmF0aW9uO1xuICAvLyBidXQgaWYgeW91J2QgbGlrZSB0byBkaXNhYmxlIHRoZSBleGVjdXRpb24gb24gdGhlIGxlYWRpbmcgZWRnZSwgcGFzc1xuICAvLyBge2xlYWRpbmc6IGZhbHNlfWAuIFRvIGRpc2FibGUgZXhlY3V0aW9uIG9uIHRoZSB0cmFpbGluZyBlZGdlLCBkaXR0by5cbiAgXy50aHJvdHRsZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICB2YXIgY29udGV4dCwgYXJncywgcmVzdWx0O1xuICAgIHZhciB0aW1lb3V0ID0gbnVsbDtcbiAgICB2YXIgcHJldmlvdXMgPSAwO1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcHJldmlvdXMgPSBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlID8gMCA6IF8ubm93KCk7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBub3cgPSBfLm5vdygpO1xuICAgICAgaWYgKCFwcmV2aW91cyAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlKSBwcmV2aW91cyA9IG5vdztcbiAgICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcbiAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIGlmIChyZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiB3YWl0KSB7XG4gICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHByZXZpb3VzID0gbm93O1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQgJiYgb3B0aW9ucy50cmFpbGluZyAhPT0gZmFsc2UpIHtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuICAvLyBiZSB0cmlnZ2VyZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBpdCBzdG9wcyBiZWluZyBjYWxsZWQgZm9yXG4gIC8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuICAvLyBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLlxuICBfLmRlYm91bmNlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG4gICAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuXG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbGFzdCA9IF8ubm93KCkgLSB0aW1lc3RhbXA7XG5cbiAgICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID49IDApIHtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICBpZiAoIWltbWVkaWF0ZSkge1xuICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgY29udGV4dCA9IHRoaXM7XG4gICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdGltZXN0YW1wID0gXy5ub3coKTtcbiAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgICAgaWYgKCF0aW1lb3V0KSB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgICBpZiAoY2FsbE5vdykge1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBmdW5jdGlvbiBwYXNzZWQgYXMgYW4gYXJndW1lbnQgdG8gdGhlIHNlY29uZCxcbiAgLy8gYWxsb3dpbmcgeW91IHRvIGFkanVzdCBhcmd1bWVudHMsIHJ1biBjb2RlIGJlZm9yZSBhbmQgYWZ0ZXIsIGFuZFxuICAvLyBjb25kaXRpb25hbGx5IGV4ZWN1dGUgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLlxuICBfLndyYXAgPSBmdW5jdGlvbihmdW5jLCB3cmFwcGVyKSB7XG4gICAgcmV0dXJuIF8ucGFydGlhbCh3cmFwcGVyLCBmdW5jKTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgbmVnYXRlZCB2ZXJzaW9uIG9mIHRoZSBwYXNzZWQtaW4gcHJlZGljYXRlLlxuICBfLm5lZ2F0ZSA9IGZ1bmN0aW9uKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhcHJlZGljYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBpcyB0aGUgY29tcG9zaXRpb24gb2YgYSBsaXN0IG9mIGZ1bmN0aW9ucywgZWFjaFxuICAvLyBjb25zdW1pbmcgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZnVuY3Rpb24gdGhhdCBmb2xsb3dzLlxuICBfLmNvbXBvc2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICB2YXIgc3RhcnQgPSBhcmdzLmxlbmd0aCAtIDE7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGkgPSBzdGFydDtcbiAgICAgIHZhciByZXN1bHQgPSBhcmdzW3N0YXJ0XS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgd2hpbGUgKGktLSkgcmVzdWx0ID0gYXJnc1tpXS5jYWxsKHRoaXMsIHJlc3VsdCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIG9uIGFuZCBhZnRlciB0aGUgTnRoIGNhbGwuXG4gIF8uYWZ0ZXIgPSBmdW5jdGlvbih0aW1lcywgZnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgtLXRpbWVzIDwgMSkge1xuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIHVwIHRvIChidXQgbm90IGluY2x1ZGluZykgdGhlIE50aCBjYWxsLlxuICBfLmJlZm9yZSA9IGZ1bmN0aW9uKHRpbWVzLCBmdW5jKSB7XG4gICAgdmFyIG1lbW87XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC0tdGltZXMgPiAwKSB7XG4gICAgICAgIG1lbW8gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgICBpZiAodGltZXMgPD0gMSkgZnVuYyA9IG51bGw7XG4gICAgICByZXR1cm4gbWVtbztcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgYXQgbW9zdCBvbmUgdGltZSwgbm8gbWF0dGVyIGhvd1xuICAvLyBvZnRlbiB5b3UgY2FsbCBpdC4gVXNlZnVsIGZvciBsYXp5IGluaXRpYWxpemF0aW9uLlxuICBfLm9uY2UgPSBfLnBhcnRpYWwoXy5iZWZvcmUsIDIpO1xuXG4gIC8vIE9iamVjdCBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEtleXMgaW4gSUUgPCA5IHRoYXQgd29uJ3QgYmUgaXRlcmF0ZWQgYnkgYGZvciBrZXkgaW4gLi4uYCBhbmQgdGh1cyBtaXNzZWQuXG4gIHZhciBoYXNFbnVtQnVnID0gIXt0b1N0cmluZzogbnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyk7XG4gIHZhciBub25FbnVtZXJhYmxlUHJvcHMgPSBbJ3ZhbHVlT2YnLCAnaXNQcm90b3R5cGVPZicsICd0b1N0cmluZycsXG4gICAgICAgICAgICAgICAgICAgICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJywgJ2hhc093blByb3BlcnR5JywgJ3RvTG9jYWxlU3RyaW5nJ107XG5cbiAgZnVuY3Rpb24gY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpIHtcbiAgICB2YXIgbm9uRW51bUlkeCA9IG5vbkVudW1lcmFibGVQcm9wcy5sZW5ndGg7XG4gICAgdmFyIGNvbnN0cnVjdG9yID0gb2JqLmNvbnN0cnVjdG9yO1xuICAgIHZhciBwcm90byA9IChfLmlzRnVuY3Rpb24oY29uc3RydWN0b3IpICYmIGNvbnN0cnVjdG9yLnByb3RvdHlwZSkgfHwgT2JqUHJvdG87XG5cbiAgICAvLyBDb25zdHJ1Y3RvciBpcyBhIHNwZWNpYWwgY2FzZS5cbiAgICB2YXIgcHJvcCA9ICdjb25zdHJ1Y3Rvcic7XG4gICAgaWYgKF8uaGFzKG9iaiwgcHJvcCkgJiYgIV8uY29udGFpbnMoa2V5cywgcHJvcCkpIGtleXMucHVzaChwcm9wKTtcblxuICAgIHdoaWxlIChub25FbnVtSWR4LS0pIHtcbiAgICAgIHByb3AgPSBub25FbnVtZXJhYmxlUHJvcHNbbm9uRW51bUlkeF07XG4gICAgICBpZiAocHJvcCBpbiBvYmogJiYgb2JqW3Byb3BdICE9PSBwcm90b1twcm9wXSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkge1xuICAgICAgICBrZXlzLnB1c2gocHJvcCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gUmV0cmlldmUgdGhlIG5hbWVzIG9mIGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzLlxuICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgT2JqZWN0LmtleXNgXG4gIF8ua2V5cyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gW107XG4gICAgaWYgKG5hdGl2ZUtleXMpIHJldHVybiBuYXRpdmVLZXlzKG9iaik7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSBpZiAoXy5oYXMob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTtcbiAgICAvLyBBaGVtLCBJRSA8IDkuXG4gICAgaWYgKGhhc0VudW1CdWcpIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKTtcbiAgICByZXR1cm4ga2V5cztcbiAgfTtcblxuICAvLyBSZXRyaWV2ZSBhbGwgdGhlIHByb3BlcnR5IG5hbWVzIG9mIGFuIG9iamVjdC5cbiAgXy5hbGxLZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGtleXMucHVzaChrZXkpO1xuICAgIC8vIEFoZW0sIElFIDwgOS5cbiAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpO1xuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG4gIC8vIFJldHJpZXZlIHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0J3MgcHJvcGVydGllcy5cbiAgXy52YWx1ZXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgdmFsdWVzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YWx1ZXNbaV0gPSBvYmpba2V5c1tpXV07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0ZWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBvYmplY3RcbiAgLy8gSW4gY29udHJhc3QgdG8gXy5tYXAgaXQgcmV0dXJucyBhbiBvYmplY3RcbiAgXy5tYXBPYmplY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAgXy5rZXlzKG9iaiksXG4gICAgICAgICAgbGVuZ3RoID0ga2V5cy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0cyA9IHt9LFxuICAgICAgICAgIGN1cnJlbnRLZXk7XG4gICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGN1cnJlbnRLZXkgPSBrZXlzW2luZGV4XTtcbiAgICAgICAgcmVzdWx0c1tjdXJyZW50S2V5XSA9IGl0ZXJhdGVlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIENvbnZlcnQgYW4gb2JqZWN0IGludG8gYSBsaXN0IG9mIGBba2V5LCB2YWx1ZV1gIHBhaXJzLlxuICBfLnBhaXJzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgdmFyIHBhaXJzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBwYWlyc1tpXSA9IFtrZXlzW2ldLCBvYmpba2V5c1tpXV1dO1xuICAgIH1cbiAgICByZXR1cm4gcGFpcnM7XG4gIH07XG5cbiAgLy8gSW52ZXJ0IHRoZSBrZXlzIGFuZCB2YWx1ZXMgb2YgYW4gb2JqZWN0LiBUaGUgdmFsdWVzIG11c3QgYmUgc2VyaWFsaXphYmxlLlxuICBfLmludmVydCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICByZXN1bHRbb2JqW2tleXNbaV1dXSA9IGtleXNbaV07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgc29ydGVkIGxpc3Qgb2YgdGhlIGZ1bmN0aW9uIG5hbWVzIGF2YWlsYWJsZSBvbiB0aGUgb2JqZWN0LlxuICAvLyBBbGlhc2VkIGFzIGBtZXRob2RzYFxuICBfLmZ1bmN0aW9ucyA9IF8ubWV0aG9kcyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBuYW1lcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24ob2JqW2tleV0pKSBuYW1lcy5wdXNoKGtleSk7XG4gICAgfVxuICAgIHJldHVybiBuYW1lcy5zb3J0KCk7XG4gIH07XG5cbiAgLy8gRXh0ZW5kIGEgZ2l2ZW4gb2JqZWN0IHdpdGggYWxsIHRoZSBwcm9wZXJ0aWVzIGluIHBhc3NlZC1pbiBvYmplY3QocykuXG4gIF8uZXh0ZW5kID0gY3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzKTtcblxuICAvLyBBc3NpZ25zIGEgZ2l2ZW4gb2JqZWN0IHdpdGggYWxsIHRoZSBvd24gcHJvcGVydGllcyBpbiB0aGUgcGFzc2VkLWluIG9iamVjdChzKVxuICAvLyAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnbilcbiAgXy5leHRlbmRPd24gPSBfLmFzc2lnbiA9IGNyZWF0ZUFzc2lnbmVyKF8ua2V5cyk7XG5cbiAgLy8gUmV0dXJucyB0aGUgZmlyc3Qga2V5IG9uIGFuIG9iamVjdCB0aGF0IHBhc3NlcyBhIHByZWRpY2F0ZSB0ZXN0XG4gIF8uZmluZEtleSA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopLCBrZXk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtrZXldLCBrZXksIG9iaikpIHJldHVybiBrZXk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbmx5IGNvbnRhaW5pbmcgdGhlIHdoaXRlbGlzdGVkIHByb3BlcnRpZXMuXG4gIF8ucGljayA9IGZ1bmN0aW9uKG9iamVjdCwgb2l0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9LCBvYmogPSBvYmplY3QsIGl0ZXJhdGVlLCBrZXlzO1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdDtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKG9pdGVyYXRlZSkpIHtcbiAgICAgIGtleXMgPSBfLmFsbEtleXMob2JqKTtcbiAgICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihvaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBrZXlzID0gZmxhdHRlbihhcmd1bWVudHMsIGZhbHNlLCBmYWxzZSwgMSk7XG4gICAgICBpdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iaikgeyByZXR1cm4ga2V5IGluIG9iajsgfTtcbiAgICAgIG9iaiA9IE9iamVjdChvYmopO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICB2YXIgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgIGlmIChpdGVyYXRlZSh2YWx1ZSwga2V5LCBvYmopKSByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgd2l0aG91dCB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydGllcy5cbiAgXy5vbWl0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGlmIChfLmlzRnVuY3Rpb24oaXRlcmF0ZWUpKSB7XG4gICAgICBpdGVyYXRlZSA9IF8ubmVnYXRlKGl0ZXJhdGVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGtleXMgPSBfLm1hcChmbGF0dGVuKGFyZ3VtZW50cywgZmFsc2UsIGZhbHNlLCAxKSwgU3RyaW5nKTtcbiAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICByZXR1cm4gIV8uY29udGFpbnMoa2V5cywga2V5KTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBfLnBpY2sob2JqLCBpdGVyYXRlZSwgY29udGV4dCk7XG4gIH07XG5cbiAgLy8gRmlsbCBpbiBhIGdpdmVuIG9iamVjdCB3aXRoIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgXy5kZWZhdWx0cyA9IGNyZWF0ZUFzc2lnbmVyKF8uYWxsS2V5cywgdHJ1ZSk7XG5cbiAgLy8gQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIHRoZSBnaXZlbiBwcm90b3R5cGUgb2JqZWN0LlxuICAvLyBJZiBhZGRpdGlvbmFsIHByb3BlcnRpZXMgYXJlIHByb3ZpZGVkIHRoZW4gdGhleSB3aWxsIGJlIGFkZGVkIHRvIHRoZVxuICAvLyBjcmVhdGVkIG9iamVjdC5cbiAgXy5jcmVhdGUgPSBmdW5jdGlvbihwcm90b3R5cGUsIHByb3BzKSB7XG4gICAgdmFyIHJlc3VsdCA9IGJhc2VDcmVhdGUocHJvdG90eXBlKTtcbiAgICBpZiAocHJvcHMpIF8uZXh0ZW5kT3duKHJlc3VsdCwgcHJvcHMpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgKHNoYWxsb3ctY2xvbmVkKSBkdXBsaWNhdGUgb2YgYW4gb2JqZWN0LlxuICBfLmNsb25lID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBvYmo7XG4gICAgcmV0dXJuIF8uaXNBcnJheShvYmopID8gb2JqLnNsaWNlKCkgOiBfLmV4dGVuZCh7fSwgb2JqKTtcbiAgfTtcblxuICAvLyBJbnZva2VzIGludGVyY2VwdG9yIHdpdGggdGhlIG9iaiwgYW5kIHRoZW4gcmV0dXJucyBvYmouXG4gIC8vIFRoZSBwcmltYXJ5IHB1cnBvc2Ugb2YgdGhpcyBtZXRob2QgaXMgdG8gXCJ0YXAgaW50b1wiIGEgbWV0aG9kIGNoYWluLCBpblxuICAvLyBvcmRlciB0byBwZXJmb3JtIG9wZXJhdGlvbnMgb24gaW50ZXJtZWRpYXRlIHJlc3VsdHMgd2l0aGluIHRoZSBjaGFpbi5cbiAgXy50YXAgPSBmdW5jdGlvbihvYmosIGludGVyY2VwdG9yKSB7XG4gICAgaW50ZXJjZXB0b3Iob2JqKTtcbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIFJldHVybnMgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLmlzTWF0Y2ggPSBmdW5jdGlvbihvYmplY3QsIGF0dHJzKSB7XG4gICAgdmFyIGtleXMgPSBfLmtleXMoYXR0cnMpLCBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICBpZiAob2JqZWN0ID09IG51bGwpIHJldHVybiAhbGVuZ3RoO1xuICAgIHZhciBvYmogPSBPYmplY3Qob2JqZWN0KTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmIChhdHRyc1trZXldICE9PSBvYmpba2V5XSB8fCAhKGtleSBpbiBvYmopKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG5cbiAgLy8gSW50ZXJuYWwgcmVjdXJzaXZlIGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIGBpc0VxdWFsYC5cbiAgdmFyIGVxID0gZnVuY3Rpb24oYSwgYiwgYVN0YWNrLCBiU3RhY2spIHtcbiAgICAvLyBJZGVudGljYWwgb2JqZWN0cyBhcmUgZXF1YWwuIGAwID09PSAtMGAsIGJ1dCB0aGV5IGFyZW4ndCBpZGVudGljYWwuXG4gICAgLy8gU2VlIHRoZSBbSGFybW9ueSBgZWdhbGAgcHJvcG9zYWxdKGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWhhcm1vbnk6ZWdhbCkuXG4gICAgaWYgKGEgPT09IGIpIHJldHVybiBhICE9PSAwIHx8IDEgLyBhID09PSAxIC8gYjtcbiAgICAvLyBBIHN0cmljdCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIGBudWxsID09IHVuZGVmaW5lZGAuXG4gICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBhID09PSBiO1xuICAgIC8vIFVud3JhcCBhbnkgd3JhcHBlZCBvYmplY3RzLlxuICAgIGlmIChhIGluc3RhbmNlb2YgXykgYSA9IGEuX3dyYXBwZWQ7XG4gICAgaWYgKGIgaW5zdGFuY2VvZiBfKSBiID0gYi5fd3JhcHBlZDtcbiAgICAvLyBDb21wYXJlIGBbW0NsYXNzXV1gIG5hbWVzLlxuICAgIHZhciBjbGFzc05hbWUgPSB0b1N0cmluZy5jYWxsKGEpO1xuICAgIGlmIChjbGFzc05hbWUgIT09IHRvU3RyaW5nLmNhbGwoYikpIHJldHVybiBmYWxzZTtcbiAgICBzd2l0Y2ggKGNsYXNzTmFtZSkge1xuICAgICAgLy8gU3RyaW5ncywgbnVtYmVycywgcmVndWxhciBleHByZXNzaW9ucywgZGF0ZXMsIGFuZCBib29sZWFucyBhcmUgY29tcGFyZWQgYnkgdmFsdWUuXG4gICAgICBjYXNlICdbb2JqZWN0IFJlZ0V4cF0nOlxuICAgICAgLy8gUmVnRXhwcyBhcmUgY29lcmNlZCB0byBzdHJpbmdzIGZvciBjb21wYXJpc29uIChOb3RlOiAnJyArIC9hL2kgPT09ICcvYS9pJylcbiAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XG4gICAgICAgIC8vIFByaW1pdGl2ZXMgYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgb2JqZWN0IHdyYXBwZXJzIGFyZSBlcXVpdmFsZW50OyB0aHVzLCBgXCI1XCJgIGlzXG4gICAgICAgIC8vIGVxdWl2YWxlbnQgdG8gYG5ldyBTdHJpbmcoXCI1XCIpYC5cbiAgICAgICAgcmV0dXJuICcnICsgYSA9PT0gJycgKyBiO1xuICAgICAgY2FzZSAnW29iamVjdCBOdW1iZXJdJzpcbiAgICAgICAgLy8gYE5hTmBzIGFyZSBlcXVpdmFsZW50LCBidXQgbm9uLXJlZmxleGl2ZS5cbiAgICAgICAgLy8gT2JqZWN0KE5hTikgaXMgZXF1aXZhbGVudCB0byBOYU5cbiAgICAgICAgaWYgKCthICE9PSArYSkgcmV0dXJuICtiICE9PSArYjtcbiAgICAgICAgLy8gQW4gYGVnYWxgIGNvbXBhcmlzb24gaXMgcGVyZm9ybWVkIGZvciBvdGhlciBudW1lcmljIHZhbHVlcy5cbiAgICAgICAgcmV0dXJuICthID09PSAwID8gMSAvICthID09PSAxIC8gYiA6ICthID09PSArYjtcbiAgICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBCb29sZWFuXSc6XG4gICAgICAgIC8vIENvZXJjZSBkYXRlcyBhbmQgYm9vbGVhbnMgdG8gbnVtZXJpYyBwcmltaXRpdmUgdmFsdWVzLiBEYXRlcyBhcmUgY29tcGFyZWQgYnkgdGhlaXJcbiAgICAgICAgLy8gbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zLiBOb3RlIHRoYXQgaW52YWxpZCBkYXRlcyB3aXRoIG1pbGxpc2Vjb25kIHJlcHJlc2VudGF0aW9uc1xuICAgICAgICAvLyBvZiBgTmFOYCBhcmUgbm90IGVxdWl2YWxlbnQuXG4gICAgICAgIHJldHVybiArYSA9PT0gK2I7XG4gICAgfVxuXG4gICAgdmFyIGFyZUFycmF5cyA9IGNsYXNzTmFtZSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICBpZiAoIWFyZUFycmF5cykge1xuICAgICAgaWYgKHR5cGVvZiBhICE9ICdvYmplY3QnIHx8IHR5cGVvZiBiICE9ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIC8vIE9iamVjdHMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1aXZhbGVudCwgYnV0IGBPYmplY3RgcyBvciBgQXJyYXlgc1xuICAgICAgLy8gZnJvbSBkaWZmZXJlbnQgZnJhbWVzIGFyZS5cbiAgICAgIHZhciBhQ3RvciA9IGEuY29uc3RydWN0b3IsIGJDdG9yID0gYi5jb25zdHJ1Y3RvcjtcbiAgICAgIGlmIChhQ3RvciAhPT0gYkN0b3IgJiYgIShfLmlzRnVuY3Rpb24oYUN0b3IpICYmIGFDdG9yIGluc3RhbmNlb2YgYUN0b3IgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmlzRnVuY3Rpb24oYkN0b3IpICYmIGJDdG9yIGluc3RhbmNlb2YgYkN0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICYmICgnY29uc3RydWN0b3InIGluIGEgJiYgJ2NvbnN0cnVjdG9yJyBpbiBiKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEFzc3VtZSBlcXVhbGl0eSBmb3IgY3ljbGljIHN0cnVjdHVyZXMuIFRoZSBhbGdvcml0aG0gZm9yIGRldGVjdGluZyBjeWNsaWNcbiAgICAvLyBzdHJ1Y3R1cmVzIGlzIGFkYXB0ZWQgZnJvbSBFUyA1LjEgc2VjdGlvbiAxNS4xMi4zLCBhYnN0cmFjdCBvcGVyYXRpb24gYEpPYC5cblxuICAgIC8vIEluaXRpYWxpemluZyBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgICAvLyBJdCdzIGRvbmUgaGVyZSBzaW5jZSB3ZSBvbmx5IG5lZWQgdGhlbSBmb3Igb2JqZWN0cyBhbmQgYXJyYXlzIGNvbXBhcmlzb24uXG4gICAgYVN0YWNrID0gYVN0YWNrIHx8IFtdO1xuICAgIGJTdGFjayA9IGJTdGFjayB8fCBbXTtcbiAgICB2YXIgbGVuZ3RoID0gYVN0YWNrLmxlbmd0aDtcbiAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgIC8vIExpbmVhciBzZWFyY2guIFBlcmZvcm1hbmNlIGlzIGludmVyc2VseSBwcm9wb3J0aW9uYWwgdG8gdGhlIG51bWJlciBvZlxuICAgICAgLy8gdW5pcXVlIG5lc3RlZCBzdHJ1Y3R1cmVzLlxuICAgICAgaWYgKGFTdGFja1tsZW5ndGhdID09PSBhKSByZXR1cm4gYlN0YWNrW2xlbmd0aF0gPT09IGI7XG4gICAgfVxuXG4gICAgLy8gQWRkIHRoZSBmaXJzdCBvYmplY3QgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIGFTdGFjay5wdXNoKGEpO1xuICAgIGJTdGFjay5wdXNoKGIpO1xuXG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIGFuZCBhcnJheXMuXG4gICAgaWYgKGFyZUFycmF5cykge1xuICAgICAgLy8gQ29tcGFyZSBhcnJheSBsZW5ndGhzIHRvIGRldGVybWluZSBpZiBhIGRlZXAgY29tcGFyaXNvbiBpcyBuZWNlc3NhcnkuXG4gICAgICBsZW5ndGggPSBhLmxlbmd0aDtcbiAgICAgIGlmIChsZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICAvLyBEZWVwIGNvbXBhcmUgdGhlIGNvbnRlbnRzLCBpZ25vcmluZyBub24tbnVtZXJpYyBwcm9wZXJ0aWVzLlxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGlmICghZXEoYVtsZW5ndGhdLCBiW2xlbmd0aF0sIGFTdGFjaywgYlN0YWNrKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEZWVwIGNvbXBhcmUgb2JqZWN0cy5cbiAgICAgIHZhciBrZXlzID0gXy5rZXlzKGEpLCBrZXk7XG4gICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICAgIC8vIEVuc3VyZSB0aGF0IGJvdGggb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIG51bWJlciBvZiBwcm9wZXJ0aWVzIGJlZm9yZSBjb21wYXJpbmcgZGVlcCBlcXVhbGl0eS5cbiAgICAgIGlmIChfLmtleXMoYikubGVuZ3RoICE9PSBsZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICAvLyBEZWVwIGNvbXBhcmUgZWFjaCBtZW1iZXJcbiAgICAgICAga2V5ID0ga2V5c1tsZW5ndGhdO1xuICAgICAgICBpZiAoIShfLmhhcyhiLCBrZXkpICYmIGVxKGFba2V5XSwgYltrZXldLCBhU3RhY2ssIGJTdGFjaykpKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFJlbW92ZSB0aGUgZmlyc3Qgb2JqZWN0IGZyb20gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIGFTdGFjay5wb3AoKTtcbiAgICBiU3RhY2sucG9wKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gUGVyZm9ybSBhIGRlZXAgY29tcGFyaXNvbiB0byBjaGVjayBpZiB0d28gb2JqZWN0cyBhcmUgZXF1YWwuXG4gIF8uaXNFcXVhbCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gZXEoYSwgYik7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiBhcnJheSwgc3RyaW5nLCBvciBvYmplY3QgZW1wdHk/XG4gIC8vIEFuIFwiZW1wdHlcIiBvYmplY3QgaGFzIG5vIGVudW1lcmFibGUgb3duLXByb3BlcnRpZXMuXG4gIF8uaXNFbXB0eSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikgJiYgKF8uaXNBcnJheShvYmopIHx8IF8uaXNTdHJpbmcob2JqKSB8fCBfLmlzQXJndW1lbnRzKG9iaikpKSByZXR1cm4gb2JqLmxlbmd0aCA9PT0gMDtcbiAgICByZXR1cm4gXy5rZXlzKG9iaikubGVuZ3RoID09PSAwO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBET00gZWxlbWVudD9cbiAgXy5pc0VsZW1lbnQgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PT0gMSk7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhbiBhcnJheT9cbiAgLy8gRGVsZWdhdGVzIHRvIEVDTUE1J3MgbmF0aXZlIEFycmF5LmlzQXJyYXlcbiAgXy5pc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgYW4gb2JqZWN0P1xuICBfLmlzT2JqZWN0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2Ygb2JqO1xuICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhb2JqO1xuICB9O1xuXG4gIC8vIEFkZCBzb21lIGlzVHlwZSBtZXRob2RzOiBpc0FyZ3VtZW50cywgaXNGdW5jdGlvbiwgaXNTdHJpbmcsIGlzTnVtYmVyLCBpc0RhdGUsIGlzUmVnRXhwLCBpc0Vycm9yLlxuICBfLmVhY2goWydBcmd1bWVudHMnLCAnRnVuY3Rpb24nLCAnU3RyaW5nJywgJ051bWJlcicsICdEYXRlJywgJ1JlZ0V4cCcsICdFcnJvciddLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgX1snaXMnICsgbmFtZV0gPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0ICcgKyBuYW1lICsgJ10nO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIERlZmluZSBhIGZhbGxiYWNrIHZlcnNpb24gb2YgdGhlIG1ldGhvZCBpbiBicm93c2VycyAoYWhlbSwgSUUgPCA5KSwgd2hlcmVcbiAgLy8gdGhlcmUgaXNuJ3QgYW55IGluc3BlY3RhYmxlIFwiQXJndW1lbnRzXCIgdHlwZS5cbiAgaWYgKCFfLmlzQXJndW1lbnRzKGFyZ3VtZW50cykpIHtcbiAgICBfLmlzQXJndW1lbnRzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gXy5oYXMob2JqLCAnY2FsbGVlJyk7XG4gICAgfTtcbiAgfVxuXG4gIC8vIE9wdGltaXplIGBpc0Z1bmN0aW9uYCBpZiBhcHByb3ByaWF0ZS4gV29yayBhcm91bmQgc29tZSB0eXBlb2YgYnVncyBpbiBvbGQgdjgsXG4gIC8vIElFIDExICgjMTYyMSksIGFuZCBpbiBTYWZhcmkgOCAoIzE5MjkpLlxuICBpZiAodHlwZW9mIC8uLyAhPSAnZnVuY3Rpb24nICYmIHR5cGVvZiBJbnQ4QXJyYXkgIT0gJ29iamVjdCcpIHtcbiAgICBfLmlzRnVuY3Rpb24gPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09ICdmdW5jdGlvbicgfHwgZmFsc2U7XG4gICAgfTtcbiAgfVxuXG4gIC8vIElzIGEgZ2l2ZW4gb2JqZWN0IGEgZmluaXRlIG51bWJlcj9cbiAgXy5pc0Zpbml0ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBpc0Zpbml0ZShvYmopICYmICFpc05hTihwYXJzZUZsb2F0KG9iaikpO1xuICB9O1xuXG4gIC8vIElzIHRoZSBnaXZlbiB2YWx1ZSBgTmFOYD8gKE5hTiBpcyB0aGUgb25seSBudW1iZXIgd2hpY2ggZG9lcyBub3QgZXF1YWwgaXRzZWxmKS5cbiAgXy5pc05hTiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBfLmlzTnVtYmVyKG9iaikgJiYgb2JqICE9PSArb2JqO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBib29sZWFuP1xuICBfLmlzQm9vbGVhbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IHRydWUgfHwgb2JqID09PSBmYWxzZSB8fCB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEJvb2xlYW5dJztcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGVxdWFsIHRvIG51bGw/XG4gIF8uaXNOdWxsID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gbnVsbDtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhcmlhYmxlIHVuZGVmaW5lZD9cbiAgXy5pc1VuZGVmaW5lZCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IHZvaWQgMDtcbiAgfTtcblxuICAvLyBTaG9ydGN1dCBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHByb3BlcnR5IGRpcmVjdGx5XG4gIC8vIG9uIGl0c2VsZiAoaW4gb3RoZXIgd29yZHMsIG5vdCBvbiBhIHByb3RvdHlwZSkuXG4gIF8uaGFzID0gZnVuY3Rpb24ob2JqLCBrZXkpIHtcbiAgICByZXR1cm4gb2JqICE9IG51bGwgJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG4gIH07XG5cbiAgLy8gVXRpbGl0eSBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBSdW4gVW5kZXJzY29yZS5qcyBpbiAqbm9Db25mbGljdCogbW9kZSwgcmV0dXJuaW5nIHRoZSBgX2AgdmFyaWFibGUgdG8gaXRzXG4gIC8vIHByZXZpb3VzIG93bmVyLiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdC5cbiAgXy5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcm9vdC5fID0gcHJldmlvdXNVbmRlcnNjb3JlO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIEtlZXAgdGhlIGlkZW50aXR5IGZ1bmN0aW9uIGFyb3VuZCBmb3IgZGVmYXVsdCBpdGVyYXRlZXMuXG4gIF8uaWRlbnRpdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICAvLyBQcmVkaWNhdGUtZ2VuZXJhdGluZyBmdW5jdGlvbnMuIE9mdGVuIHVzZWZ1bCBvdXRzaWRlIG9mIFVuZGVyc2NvcmUuXG4gIF8uY29uc3RhbnQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICB9O1xuXG4gIF8ubm9vcCA9IGZ1bmN0aW9uKCl7fTtcblxuICBfLnByb3BlcnR5ID0gcHJvcGVydHk7XG5cbiAgLy8gR2VuZXJhdGVzIGEgZnVuY3Rpb24gZm9yIGEgZ2l2ZW4gb2JqZWN0IHRoYXQgcmV0dXJucyBhIGdpdmVuIHByb3BlcnR5LlxuICBfLnByb3BlcnR5T2YgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09IG51bGwgPyBmdW5jdGlvbigpe30gOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBvYmpba2V5XTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBwcmVkaWNhdGUgZm9yIGNoZWNraW5nIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZlxuICAvLyBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5tYXRjaGVyID0gXy5tYXRjaGVzID0gZnVuY3Rpb24oYXR0cnMpIHtcbiAgICBhdHRycyA9IF8uZXh0ZW5kT3duKHt9LCBhdHRycyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIF8uaXNNYXRjaChvYmosIGF0dHJzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJ1biBhIGZ1bmN0aW9uICoqbioqIHRpbWVzLlxuICBfLnRpbWVzID0gZnVuY3Rpb24obiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgYWNjdW0gPSBBcnJheShNYXRoLm1heCgwLCBuKSk7XG4gICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgYWNjdW1baV0gPSBpdGVyYXRlZShpKTtcbiAgICByZXR1cm4gYWNjdW07XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAoaW5jbHVzaXZlKS5cbiAgXy5yYW5kb20gPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIGlmIChtYXggPT0gbnVsbCkge1xuICAgICAgbWF4ID0gbWluO1xuICAgICAgbWluID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG1pbiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSk7XG4gIH07XG5cbiAgLy8gQSAocG9zc2libHkgZmFzdGVyKSB3YXkgdG8gZ2V0IHRoZSBjdXJyZW50IHRpbWVzdGFtcCBhcyBhbiBpbnRlZ2VyLlxuICBfLm5vdyA9IERhdGUubm93IHx8IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgfTtcblxuICAgLy8gTGlzdCBvZiBIVE1MIGVudGl0aWVzIGZvciBlc2NhcGluZy5cbiAgdmFyIGVzY2FwZU1hcCA9IHtcbiAgICAnJic6ICcmYW1wOycsXG4gICAgJzwnOiAnJmx0OycsXG4gICAgJz4nOiAnJmd0OycsXG4gICAgJ1wiJzogJyZxdW90OycsXG4gICAgXCInXCI6ICcmI3gyNzsnLFxuICAgICdgJzogJyYjeDYwOydcbiAgfTtcbiAgdmFyIHVuZXNjYXBlTWFwID0gXy5pbnZlcnQoZXNjYXBlTWFwKTtcblxuICAvLyBGdW5jdGlvbnMgZm9yIGVzY2FwaW5nIGFuZCB1bmVzY2FwaW5nIHN0cmluZ3MgdG8vZnJvbSBIVE1MIGludGVycG9sYXRpb24uXG4gIHZhciBjcmVhdGVFc2NhcGVyID0gZnVuY3Rpb24obWFwKSB7XG4gICAgdmFyIGVzY2FwZXIgPSBmdW5jdGlvbihtYXRjaCkge1xuICAgICAgcmV0dXJuIG1hcFttYXRjaF07XG4gICAgfTtcbiAgICAvLyBSZWdleGVzIGZvciBpZGVudGlmeWluZyBhIGtleSB0aGF0IG5lZWRzIHRvIGJlIGVzY2FwZWRcbiAgICB2YXIgc291cmNlID0gJyg/OicgKyBfLmtleXMobWFwKS5qb2luKCd8JykgKyAnKSc7XG4gICAgdmFyIHRlc3RSZWdleHAgPSBSZWdFeHAoc291cmNlKTtcbiAgICB2YXIgcmVwbGFjZVJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UsICdnJyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgc3RyaW5nID0gc3RyaW5nID09IG51bGwgPyAnJyA6ICcnICsgc3RyaW5nO1xuICAgICAgcmV0dXJuIHRlc3RSZWdleHAudGVzdChzdHJpbmcpID8gc3RyaW5nLnJlcGxhY2UocmVwbGFjZVJlZ2V4cCwgZXNjYXBlcikgOiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbiAgXy5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKGVzY2FwZU1hcCk7XG4gIF8udW5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKHVuZXNjYXBlTWFwKTtcblxuICAvLyBJZiB0aGUgdmFsdWUgb2YgdGhlIG5hbWVkIGBwcm9wZXJ0eWAgaXMgYSBmdW5jdGlvbiB0aGVuIGludm9rZSBpdCB3aXRoIHRoZVxuICAvLyBgb2JqZWN0YCBhcyBjb250ZXh0OyBvdGhlcndpc2UsIHJldHVybiBpdC5cbiAgXy5yZXN1bHQgPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5LCBmYWxsYmFjaykge1xuICAgIHZhciB2YWx1ZSA9IG9iamVjdCA9PSBudWxsID8gdm9pZCAwIDogb2JqZWN0W3Byb3BlcnR5XTtcbiAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgdmFsdWUgPSBmYWxsYmFjaztcbiAgICB9XG4gICAgcmV0dXJuIF8uaXNGdW5jdGlvbih2YWx1ZSkgPyB2YWx1ZS5jYWxsKG9iamVjdCkgOiB2YWx1ZTtcbiAgfTtcblxuICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBpbnRlZ2VyIGlkICh1bmlxdWUgd2l0aGluIHRoZSBlbnRpcmUgY2xpZW50IHNlc3Npb24pLlxuICAvLyBVc2VmdWwgZm9yIHRlbXBvcmFyeSBET00gaWRzLlxuICB2YXIgaWRDb3VudGVyID0gMDtcbiAgXy51bmlxdWVJZCA9IGZ1bmN0aW9uKHByZWZpeCkge1xuICAgIHZhciBpZCA9ICsraWRDb3VudGVyICsgJyc7XG4gICAgcmV0dXJuIHByZWZpeCA/IHByZWZpeCArIGlkIDogaWQ7XG4gIH07XG5cbiAgLy8gQnkgZGVmYXVsdCwgVW5kZXJzY29yZSB1c2VzIEVSQi1zdHlsZSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLCBjaGFuZ2UgdGhlXG4gIC8vIGZvbGxvd2luZyB0ZW1wbGF0ZSBzZXR0aW5ncyB0byB1c2UgYWx0ZXJuYXRpdmUgZGVsaW1pdGVycy5cbiAgXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xuICAgIGV2YWx1YXRlICAgIDogLzwlKFtcXHNcXFNdKz8pJT4vZyxcbiAgICBpbnRlcnBvbGF0ZSA6IC88JT0oW1xcc1xcU10rPyklPi9nLFxuICAgIGVzY2FwZSAgICAgIDogLzwlLShbXFxzXFxTXSs/KSU+L2dcbiAgfTtcblxuICAvLyBXaGVuIGN1c3RvbWl6aW5nIGB0ZW1wbGF0ZVNldHRpbmdzYCwgaWYgeW91IGRvbid0IHdhbnQgdG8gZGVmaW5lIGFuXG4gIC8vIGludGVycG9sYXRpb24sIGV2YWx1YXRpb24gb3IgZXNjYXBpbmcgcmVnZXgsIHdlIG5lZWQgb25lIHRoYXQgaXNcbiAgLy8gZ3VhcmFudGVlZCBub3QgdG8gbWF0Y2guXG4gIHZhciBub01hdGNoID0gLyguKV4vO1xuXG4gIC8vIENlcnRhaW4gY2hhcmFjdGVycyBuZWVkIHRvIGJlIGVzY2FwZWQgc28gdGhhdCB0aGV5IGNhbiBiZSBwdXQgaW50byBhXG4gIC8vIHN0cmluZyBsaXRlcmFsLlxuICB2YXIgZXNjYXBlcyA9IHtcbiAgICBcIidcIjogICAgICBcIidcIixcbiAgICAnXFxcXCc6ICAgICAnXFxcXCcsXG4gICAgJ1xccic6ICAgICAncicsXG4gICAgJ1xcbic6ICAgICAnbicsXG4gICAgJ1xcdTIwMjgnOiAndTIwMjgnLFxuICAgICdcXHUyMDI5JzogJ3UyMDI5J1xuICB9O1xuXG4gIHZhciBlc2NhcGVyID0gL1xcXFx8J3xcXHJ8XFxufFxcdTIwMjh8XFx1MjAyOS9nO1xuXG4gIHZhciBlc2NhcGVDaGFyID0gZnVuY3Rpb24obWF0Y2gpIHtcbiAgICByZXR1cm4gJ1xcXFwnICsgZXNjYXBlc1ttYXRjaF07XG4gIH07XG5cbiAgLy8gSmF2YVNjcmlwdCBtaWNyby10ZW1wbGF0aW5nLCBzaW1pbGFyIHRvIEpvaG4gUmVzaWcncyBpbXBsZW1lbnRhdGlvbi5cbiAgLy8gVW5kZXJzY29yZSB0ZW1wbGF0aW5nIGhhbmRsZXMgYXJiaXRyYXJ5IGRlbGltaXRlcnMsIHByZXNlcnZlcyB3aGl0ZXNwYWNlLFxuICAvLyBhbmQgY29ycmVjdGx5IGVzY2FwZXMgcXVvdGVzIHdpdGhpbiBpbnRlcnBvbGF0ZWQgY29kZS5cbiAgLy8gTkI6IGBvbGRTZXR0aW5nc2Agb25seSBleGlzdHMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICBfLnRlbXBsYXRlID0gZnVuY3Rpb24odGV4dCwgc2V0dGluZ3MsIG9sZFNldHRpbmdzKSB7XG4gICAgaWYgKCFzZXR0aW5ncyAmJiBvbGRTZXR0aW5ncykgc2V0dGluZ3MgPSBvbGRTZXR0aW5ncztcbiAgICBzZXR0aW5ncyA9IF8uZGVmYXVsdHMoe30sIHNldHRpbmdzLCBfLnRlbXBsYXRlU2V0dGluZ3MpO1xuXG4gICAgLy8gQ29tYmluZSBkZWxpbWl0ZXJzIGludG8gb25lIHJlZ3VsYXIgZXhwcmVzc2lvbiB2aWEgYWx0ZXJuYXRpb24uXG4gICAgdmFyIG1hdGNoZXIgPSBSZWdFeHAoW1xuICAgICAgKHNldHRpbmdzLmVzY2FwZSB8fCBub01hdGNoKS5zb3VyY2UsXG4gICAgICAoc2V0dGluZ3MuaW50ZXJwb2xhdGUgfHwgbm9NYXRjaCkuc291cmNlLFxuICAgICAgKHNldHRpbmdzLmV2YWx1YXRlIHx8IG5vTWF0Y2gpLnNvdXJjZVxuICAgIF0uam9pbignfCcpICsgJ3wkJywgJ2cnKTtcblxuICAgIC8vIENvbXBpbGUgdGhlIHRlbXBsYXRlIHNvdXJjZSwgZXNjYXBpbmcgc3RyaW5nIGxpdGVyYWxzIGFwcHJvcHJpYXRlbHkuXG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgc291cmNlID0gXCJfX3ArPSdcIjtcbiAgICB0ZXh0LnJlcGxhY2UobWF0Y2hlciwgZnVuY3Rpb24obWF0Y2gsIGVzY2FwZSwgaW50ZXJwb2xhdGUsIGV2YWx1YXRlLCBvZmZzZXQpIHtcbiAgICAgIHNvdXJjZSArPSB0ZXh0LnNsaWNlKGluZGV4LCBvZmZzZXQpLnJlcGxhY2UoZXNjYXBlciwgZXNjYXBlQ2hhcik7XG4gICAgICBpbmRleCA9IG9mZnNldCArIG1hdGNoLmxlbmd0aDtcblxuICAgICAgaWYgKGVzY2FwZSkge1xuICAgICAgICBzb3VyY2UgKz0gXCInK1xcbigoX190PShcIiArIGVzY2FwZSArIFwiKSk9PW51bGw/Jyc6Xy5lc2NhcGUoX190KSkrXFxuJ1wiO1xuICAgICAgfSBlbHNlIGlmIChpbnRlcnBvbGF0ZSkge1xuICAgICAgICBzb3VyY2UgKz0gXCInK1xcbigoX190PShcIiArIGludGVycG9sYXRlICsgXCIpKT09bnVsbD8nJzpfX3QpK1xcbidcIjtcbiAgICAgIH0gZWxzZSBpZiAoZXZhbHVhdGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJztcXG5cIiArIGV2YWx1YXRlICsgXCJcXG5fX3ArPSdcIjtcbiAgICAgIH1cblxuICAgICAgLy8gQWRvYmUgVk1zIG5lZWQgdGhlIG1hdGNoIHJldHVybmVkIHRvIHByb2R1Y2UgdGhlIGNvcnJlY3Qgb2ZmZXN0LlxuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH0pO1xuICAgIHNvdXJjZSArPSBcIic7XFxuXCI7XG5cbiAgICAvLyBJZiBhIHZhcmlhYmxlIGlzIG5vdCBzcGVjaWZpZWQsIHBsYWNlIGRhdGEgdmFsdWVzIGluIGxvY2FsIHNjb3BlLlxuICAgIGlmICghc2V0dGluZ3MudmFyaWFibGUpIHNvdXJjZSA9ICd3aXRoKG9ianx8e30pe1xcbicgKyBzb3VyY2UgKyAnfVxcbic7XG5cbiAgICBzb3VyY2UgPSBcInZhciBfX3QsX19wPScnLF9faj1BcnJheS5wcm90b3R5cGUuam9pbixcIiArXG4gICAgICBcInByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XFxuXCIgK1xuICAgICAgc291cmNlICsgJ3JldHVybiBfX3A7XFxuJztcblxuICAgIHRyeSB7XG4gICAgICB2YXIgcmVuZGVyID0gbmV3IEZ1bmN0aW9uKHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonLCAnXycsIHNvdXJjZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgZS5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cblxuICAgIHZhciB0ZW1wbGF0ZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHJldHVybiByZW5kZXIuY2FsbCh0aGlzLCBkYXRhLCBfKTtcbiAgICB9O1xuXG4gICAgLy8gUHJvdmlkZSB0aGUgY29tcGlsZWQgc291cmNlIGFzIGEgY29udmVuaWVuY2UgZm9yIHByZWNvbXBpbGF0aW9uLlxuICAgIHZhciBhcmd1bWVudCA9IHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonO1xuICAgIHRlbXBsYXRlLnNvdXJjZSA9ICdmdW5jdGlvbignICsgYXJndW1lbnQgKyAnKXtcXG4nICsgc291cmNlICsgJ30nO1xuXG4gICAgcmV0dXJuIHRlbXBsYXRlO1xuICB9O1xuXG4gIC8vIEFkZCBhIFwiY2hhaW5cIiBmdW5jdGlvbi4gU3RhcnQgY2hhaW5pbmcgYSB3cmFwcGVkIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLmNoYWluID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGluc3RhbmNlID0gXyhvYmopO1xuICAgIGluc3RhbmNlLl9jaGFpbiA9IHRydWU7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9O1xuXG4gIC8vIE9PUFxuICAvLyAtLS0tLS0tLS0tLS0tLS1cbiAgLy8gSWYgVW5kZXJzY29yZSBpcyBjYWxsZWQgYXMgYSBmdW5jdGlvbiwgaXQgcmV0dXJucyBhIHdyYXBwZWQgb2JqZWN0IHRoYXRcbiAgLy8gY2FuIGJlIHVzZWQgT08tc3R5bGUuIFRoaXMgd3JhcHBlciBob2xkcyBhbHRlcmVkIHZlcnNpb25zIG9mIGFsbCB0aGVcbiAgLy8gdW5kZXJzY29yZSBmdW5jdGlvbnMuIFdyYXBwZWQgb2JqZWN0cyBtYXkgYmUgY2hhaW5lZC5cblxuICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udGludWUgY2hhaW5pbmcgaW50ZXJtZWRpYXRlIHJlc3VsdHMuXG4gIHZhciByZXN1bHQgPSBmdW5jdGlvbihpbnN0YW5jZSwgb2JqKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlLl9jaGFpbiA/IF8ob2JqKS5jaGFpbigpIDogb2JqO1xuICB9O1xuXG4gIC8vIEFkZCB5b3VyIG93biBjdXN0b20gZnVuY3Rpb25zIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdC5cbiAgXy5taXhpbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIF8uZWFjaChfLmZ1bmN0aW9ucyhvYmopLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgZnVuYyA9IF9bbmFtZV0gPSBvYmpbbmFtZV07XG4gICAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IFt0aGlzLl93cmFwcGVkXTtcbiAgICAgICAgcHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIGZ1bmMuYXBwbHkoXywgYXJncykpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBBZGQgYWxsIG9mIHRoZSBVbmRlcnNjb3JlIGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlciBvYmplY3QuXG4gIF8ubWl4aW4oXyk7XG5cbiAgLy8gQWRkIGFsbCBtdXRhdG9yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci5cbiAgXy5lYWNoKFsncG9wJywgJ3B1c2gnLCAncmV2ZXJzZScsICdzaGlmdCcsICdzb3J0JywgJ3NwbGljZScsICd1bnNoaWZ0J10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9iaiA9IHRoaXMuX3dyYXBwZWQ7XG4gICAgICBtZXRob2QuYXBwbHkob2JqLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKChuYW1lID09PSAnc2hpZnQnIHx8IG5hbWUgPT09ICdzcGxpY2UnKSAmJiBvYmoubGVuZ3RoID09PSAwKSBkZWxldGUgb2JqWzBdO1xuICAgICAgcmV0dXJuIHJlc3VsdCh0aGlzLCBvYmopO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEFkZCBhbGwgYWNjZXNzb3IgQXJyYXkgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyLlxuICBfLmVhY2goWydjb25jYXQnLCAnam9pbicsICdzbGljZSddLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIG1ldGhvZCA9IEFycmF5UHJvdG9bbmFtZV07XG4gICAgXy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiByZXN1bHQodGhpcywgbWV0aG9kLmFwcGx5KHRoaXMuX3dyYXBwZWQsIGFyZ3VtZW50cykpO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEV4dHJhY3RzIHRoZSByZXN1bHQgZnJvbSBhIHdyYXBwZWQgYW5kIGNoYWluZWQgb2JqZWN0LlxuICBfLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl93cmFwcGVkO1xuICB9O1xuXG4gIC8vIFByb3ZpZGUgdW53cmFwcGluZyBwcm94eSBmb3Igc29tZSBtZXRob2RzIHVzZWQgaW4gZW5naW5lIG9wZXJhdGlvbnNcbiAgLy8gc3VjaCBhcyBhcml0aG1ldGljIGFuZCBKU09OIHN0cmluZ2lmaWNhdGlvbi5cbiAgXy5wcm90b3R5cGUudmFsdWVPZiA9IF8ucHJvdG90eXBlLnRvSlNPTiA9IF8ucHJvdG90eXBlLnZhbHVlO1xuXG4gIF8ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICcnICsgdGhpcy5fd3JhcHBlZDtcbiAgfTtcblxuICAvLyBBTUQgcmVnaXN0cmF0aW9uIGhhcHBlbnMgYXQgdGhlIGVuZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIEFNRCBsb2FkZXJzXG4gIC8vIHRoYXQgbWF5IG5vdCBlbmZvcmNlIG5leHQtdHVybiBzZW1hbnRpY3Mgb24gbW9kdWxlcy4gRXZlbiB0aG91Z2ggZ2VuZXJhbFxuICAvLyBwcmFjdGljZSBmb3IgQU1EIHJlZ2lzdHJhdGlvbiBpcyB0byBiZSBhbm9ueW1vdXMsIHVuZGVyc2NvcmUgcmVnaXN0ZXJzXG4gIC8vIGFzIGEgbmFtZWQgbW9kdWxlIGJlY2F1c2UsIGxpa2UgalF1ZXJ5LCBpdCBpcyBhIGJhc2UgbGlicmFyeSB0aGF0IGlzXG4gIC8vIHBvcHVsYXIgZW5vdWdoIHRvIGJlIGJ1bmRsZWQgaW4gYSB0aGlyZCBwYXJ0eSBsaWIsIGJ1dCBub3QgYmUgcGFydCBvZlxuICAvLyBhbiBBTUQgbG9hZCByZXF1ZXN0LiBUaG9zZSBjYXNlcyBjb3VsZCBnZW5lcmF0ZSBhbiBlcnJvciB3aGVuIGFuXG4gIC8vIGFub255bW91cyBkZWZpbmUoKSBpcyBjYWxsZWQgb3V0c2lkZSBvZiBhIGxvYWRlciByZXF1ZXN0LlxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKCd1bmRlcnNjb3JlJywgW10sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF87XG4gICAgfSk7XG4gIH1cbn0uY2FsbCh0aGlzKSk7XG4iLCIhZnVuY3Rpb24oKXtcbiAgdmFyIGQzID0ge3ZlcnNpb246IFwiMy41LjE3XCJ9OyAvLyBzZW12ZXJcbnZhciBkM19kb2N1bWVudCA9IHRoaXMuZG9jdW1lbnQ7XG5cbmZ1bmN0aW9uIGQzX2RvY3VtZW50RWxlbWVudChub2RlKSB7XG4gIHJldHVybiBub2RlXG4gICAgICAmJiAobm9kZS5vd25lckRvY3VtZW50IC8vIG5vZGUgaXMgYSBOb2RlXG4gICAgICB8fCBub2RlLmRvY3VtZW50IC8vIG5vZGUgaXMgYSBXaW5kb3dcbiAgICAgIHx8IG5vZGUpLmRvY3VtZW50RWxlbWVudDsgLy8gbm9kZSBpcyBhIERvY3VtZW50XG59XG5cbmZ1bmN0aW9uIGQzX3dpbmRvdyhub2RlKSB7XG4gIHJldHVybiBub2RlXG4gICAgICAmJiAoKG5vZGUub3duZXJEb2N1bWVudCAmJiBub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpIC8vIG5vZGUgaXMgYSBOb2RlXG4gICAgICAgIHx8IChub2RlLmRvY3VtZW50ICYmIG5vZGUpIC8vIG5vZGUgaXMgYSBXaW5kb3dcbiAgICAgICAgfHwgbm9kZS5kZWZhdWx0Vmlldyk7IC8vIG5vZGUgaXMgYSBEb2N1bWVudFxufVxuZnVuY3Rpb24gZDNfaWRlbnRpdHkoZCkge1xuICByZXR1cm4gZDtcbn1cbi8vIENvcGllcyBhIHZhcmlhYmxlIG51bWJlciBvZiBtZXRob2RzIGZyb20gc291cmNlIHRvIHRhcmdldC5cbmQzLnJlYmluZCA9IGZ1bmN0aW9uKHRhcmdldCwgc291cmNlKSB7XG4gIHZhciBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1ldGhvZDtcbiAgd2hpbGUgKCsraSA8IG4pIHRhcmdldFttZXRob2QgPSBhcmd1bWVudHNbaV1dID0gZDNfcmViaW5kKHRhcmdldCwgc291cmNlLCBzb3VyY2VbbWV0aG9kXSk7XG4gIHJldHVybiB0YXJnZXQ7XG59O1xuXG4vLyBNZXRob2QgaXMgYXNzdW1lZCB0byBiZSBhIHN0YW5kYXJkIEQzIGdldHRlci1zZXR0ZXI6XG4vLyBJZiBwYXNzZWQgd2l0aCBubyBhcmd1bWVudHMsIGdldHMgdGhlIHZhbHVlLlxuLy8gSWYgcGFzc2VkIHdpdGggYXJndW1lbnRzLCBzZXRzIHRoZSB2YWx1ZSBhbmQgcmV0dXJucyB0aGUgdGFyZ2V0LlxuZnVuY3Rpb24gZDNfcmViaW5kKHRhcmdldCwgc291cmNlLCBtZXRob2QpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWx1ZSA9IG1ldGhvZC5hcHBseShzb3VyY2UsIGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHZhbHVlID09PSBzb3VyY2UgPyB0YXJnZXQgOiB2YWx1ZTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGQzX3ZlbmRvclN5bWJvbChvYmplY3QsIG5hbWUpIHtcbiAgaWYgKG5hbWUgaW4gb2JqZWN0KSByZXR1cm4gbmFtZTtcbiAgbmFtZSA9IG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpO1xuICBmb3IgKHZhciBpID0gMCwgbiA9IGQzX3ZlbmRvclByZWZpeGVzLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgIHZhciBwcmVmaXhOYW1lID0gZDNfdmVuZG9yUHJlZml4ZXNbaV0gKyBuYW1lO1xuICAgIGlmIChwcmVmaXhOYW1lIGluIG9iamVjdCkgcmV0dXJuIHByZWZpeE5hbWU7XG4gIH1cbn1cblxudmFyIGQzX3ZlbmRvclByZWZpeGVzID0gW1wid2Via2l0XCIsIFwibXNcIiwgXCJtb3pcIiwgXCJNb3pcIiwgXCJvXCIsIFwiT1wiXTtcbmZ1bmN0aW9uIGQzX2NsYXNzKGN0b3IsIHByb3BlcnRpZXMpIHtcbiAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3Rvci5wcm90b3R5cGUsIGtleSwge1xuICAgICAgdmFsdWU6IHByb3BlcnRpZXNba2V5XSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgfSk7XG4gIH1cbn1cblxuZDMubWFwID0gZnVuY3Rpb24ob2JqZWN0LCBmKSB7XG4gIHZhciBtYXAgPSBuZXcgZDNfTWFwO1xuICBpZiAob2JqZWN0IGluc3RhbmNlb2YgZDNfTWFwKSB7XG4gICAgb2JqZWN0LmZvckVhY2goZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBtYXAuc2V0KGtleSwgdmFsdWUpOyB9KTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkpIHtcbiAgICB2YXIgaSA9IC0xLFxuICAgICAgICBuID0gb2JqZWN0Lmxlbmd0aCxcbiAgICAgICAgbztcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgd2hpbGUgKCsraSA8IG4pIG1hcC5zZXQoaSwgb2JqZWN0W2ldKTtcbiAgICBlbHNlIHdoaWxlICgrK2kgPCBuKSBtYXAuc2V0KGYuY2FsbChvYmplY3QsIG8gPSBvYmplY3RbaV0sIGkpLCBvKTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSBtYXAuc2V0KGtleSwgb2JqZWN0W2tleV0pO1xuICB9XG4gIHJldHVybiBtYXA7XG59O1xuXG5mdW5jdGlvbiBkM19NYXAoKSB7XG4gIHRoaXMuXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5cbnZhciBkM19tYXBfcHJvdG8gPSBcIl9fcHJvdG9fX1wiLFxuICAgIGQzX21hcF96ZXJvID0gXCJcXDBcIjtcblxuZDNfY2xhc3MoZDNfTWFwLCB7XG4gIGhhczogZDNfbWFwX2hhcyxcbiAgZ2V0OiBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5fW2QzX21hcF9lc2NhcGUoa2V5KV07XG4gIH0sXG4gIHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLl9bZDNfbWFwX2VzY2FwZShrZXkpXSA9IHZhbHVlO1xuICB9LFxuICByZW1vdmU6IGQzX21hcF9yZW1vdmUsXG4gIGtleXM6IGQzX21hcF9rZXlzLFxuICB2YWx1ZXM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSB2YWx1ZXMucHVzaCh0aGlzLl9ba2V5XSk7XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfSxcbiAgZW50cmllczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVudHJpZXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSBlbnRyaWVzLnB1c2goe2tleTogZDNfbWFwX3VuZXNjYXBlKGtleSksIHZhbHVlOiB0aGlzLl9ba2V5XX0pO1xuICAgIHJldHVybiBlbnRyaWVzO1xuICB9LFxuICBzaXplOiBkM19tYXBfc2l6ZSxcbiAgZW1wdHk6IGQzX21hcF9lbXB0eSxcbiAgZm9yRWFjaDogZnVuY3Rpb24oZikge1xuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIGYuY2FsbCh0aGlzLCBkM19tYXBfdW5lc2NhcGUoa2V5KSwgdGhpcy5fW2tleV0pO1xuICB9XG59KTtcblxuZnVuY3Rpb24gZDNfbWFwX2VzY2FwZShrZXkpIHtcbiAgcmV0dXJuIChrZXkgKz0gXCJcIikgPT09IGQzX21hcF9wcm90byB8fCBrZXlbMF0gPT09IGQzX21hcF96ZXJvID8gZDNfbWFwX3plcm8gKyBrZXkgOiBrZXk7XG59XG5cbmZ1bmN0aW9uIGQzX21hcF91bmVzY2FwZShrZXkpIHtcbiAgcmV0dXJuIChrZXkgKz0gXCJcIilbMF0gPT09IGQzX21hcF96ZXJvID8ga2V5LnNsaWNlKDEpIDoga2V5O1xufVxuXG5mdW5jdGlvbiBkM19tYXBfaGFzKGtleSkge1xuICByZXR1cm4gZDNfbWFwX2VzY2FwZShrZXkpIGluIHRoaXMuXztcbn1cblxuZnVuY3Rpb24gZDNfbWFwX3JlbW92ZShrZXkpIHtcbiAgcmV0dXJuIChrZXkgPSBkM19tYXBfZXNjYXBlKGtleSkpIGluIHRoaXMuXyAmJiBkZWxldGUgdGhpcy5fW2tleV07XG59XG5cbmZ1bmN0aW9uIGQzX21hcF9rZXlzKCkge1xuICB2YXIga2V5cyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSBrZXlzLnB1c2goZDNfbWFwX3VuZXNjYXBlKGtleSkpO1xuICByZXR1cm4ga2V5cztcbn1cblxuZnVuY3Rpb24gZDNfbWFwX3NpemUoKSB7XG4gIHZhciBzaXplID0gMDtcbiAgZm9yICh2YXIga2V5IGluIHRoaXMuXykgKytzaXplO1xuICByZXR1cm4gc2l6ZTtcbn1cblxuZnVuY3Rpb24gZDNfbWFwX2VtcHR5KCkge1xuICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxudmFyIGQzX2FycmF5U2xpY2UgPSBbXS5zbGljZSxcbiAgICBkM19hcnJheSA9IGZ1bmN0aW9uKGxpc3QpIHsgcmV0dXJuIGQzX2FycmF5U2xpY2UuY2FsbChsaXN0KTsgfTsgLy8gY29udmVyc2lvbiBmb3IgTm9kZUxpc3RzXG5mdW5jdGlvbiBkM19ub29wKCkge31cblxuZDMuZGlzcGF0Y2ggPSBmdW5jdGlvbigpIHtcbiAgdmFyIGRpc3BhdGNoID0gbmV3IGQzX2Rpc3BhdGNoLFxuICAgICAgaSA9IC0xLFxuICAgICAgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIHdoaWxlICgrK2kgPCBuKSBkaXNwYXRjaFthcmd1bWVudHNbaV1dID0gZDNfZGlzcGF0Y2hfZXZlbnQoZGlzcGF0Y2gpO1xuICByZXR1cm4gZGlzcGF0Y2g7XG59O1xuXG5mdW5jdGlvbiBkM19kaXNwYXRjaCgpIHt9XG5cbmQzX2Rpc3BhdGNoLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBpID0gdHlwZS5pbmRleE9mKFwiLlwiKSxcbiAgICAgIG5hbWUgPSBcIlwiO1xuXG4gIC8vIEV4dHJhY3Qgb3B0aW9uYWwgbmFtZXNwYWNlLCBlLmcuLCBcImNsaWNrLmZvb1wiXG4gIGlmIChpID49IDApIHtcbiAgICBuYW1lID0gdHlwZS5zbGljZShpICsgMSk7XG4gICAgdHlwZSA9IHR5cGUuc2xpY2UoMCwgaSk7XG4gIH1cblxuICBpZiAodHlwZSkgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPCAyXG4gICAgICA/IHRoaXNbdHlwZV0ub24obmFtZSlcbiAgICAgIDogdGhpc1t0eXBlXS5vbihuYW1lLCBsaXN0ZW5lcik7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICBpZiAobGlzdGVuZXIgPT0gbnVsbCkgZm9yICh0eXBlIGluIHRoaXMpIHtcbiAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KHR5cGUpKSB0aGlzW3R5cGVdLm9uKG5hbWUsIG51bGwpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufTtcblxuZnVuY3Rpb24gZDNfZGlzcGF0Y2hfZXZlbnQoZGlzcGF0Y2gpIHtcbiAgdmFyIGxpc3RlbmVycyA9IFtdLFxuICAgICAgbGlzdGVuZXJCeU5hbWUgPSBuZXcgZDNfTWFwO1xuXG4gIGZ1bmN0aW9uIGV2ZW50KCkge1xuICAgIHZhciB6ID0gbGlzdGVuZXJzLCAvLyBkZWZlbnNpdmUgcmVmZXJlbmNlXG4gICAgICAgIGkgPSAtMSxcbiAgICAgICAgbiA9IHoubGVuZ3RoLFxuICAgICAgICBsO1xuICAgIHdoaWxlICgrK2kgPCBuKSBpZiAobCA9IHpbaV0ub24pIGwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICByZXR1cm4gZGlzcGF0Y2g7XG4gIH1cblxuICBldmVudC5vbiA9IGZ1bmN0aW9uKG5hbWUsIGxpc3RlbmVyKSB7XG4gICAgdmFyIGwgPSBsaXN0ZW5lckJ5TmFtZS5nZXQobmFtZSksXG4gICAgICAgIGk7XG5cbiAgICAvLyByZXR1cm4gdGhlIGN1cnJlbnQgbGlzdGVuZXIsIGlmIGFueVxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgcmV0dXJuIGwgJiYgbC5vbjtcblxuICAgIC8vIHJlbW92ZSB0aGUgb2xkIGxpc3RlbmVyLCBpZiBhbnkgKHdpdGggY29weS1vbi13cml0ZSlcbiAgICBpZiAobCkge1xuICAgICAgbC5vbiA9IG51bGw7XG4gICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuc2xpY2UoMCwgaSA9IGxpc3RlbmVycy5pbmRleE9mKGwpKS5jb25jYXQobGlzdGVuZXJzLnNsaWNlKGkgKyAxKSk7XG4gICAgICBsaXN0ZW5lckJ5TmFtZS5yZW1vdmUobmFtZSk7XG4gICAgfVxuXG4gICAgLy8gYWRkIHRoZSBuZXcgbGlzdGVuZXIsIGlmIGFueVxuICAgIGlmIChsaXN0ZW5lcikgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXJCeU5hbWUuc2V0KG5hbWUsIHtvbjogbGlzdGVuZXJ9KSk7XG5cbiAgICByZXR1cm4gZGlzcGF0Y2g7XG4gIH07XG5cbiAgcmV0dXJuIGV2ZW50O1xufVxuXG5kMy5ldmVudCA9IG51bGw7XG5cbmZ1bmN0aW9uIGQzX2V2ZW50UHJldmVudERlZmF1bHQoKSB7XG4gIGQzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG59XG5cbmZ1bmN0aW9uIGQzX2V2ZW50U291cmNlKCkge1xuICB2YXIgZSA9IGQzLmV2ZW50LCBzO1xuICB3aGlsZSAocyA9IGUuc291cmNlRXZlbnQpIGUgPSBzO1xuICByZXR1cm4gZTtcbn1cblxuLy8gTGlrZSBkMy5kaXNwYXRjaCwgYnV0IGZvciBjdXN0b20gZXZlbnRzIGFic3RyYWN0aW5nIG5hdGl2ZSBVSSBldmVudHMuIFRoZXNlXG4vLyBldmVudHMgaGF2ZSBhIHRhcmdldCBjb21wb25lbnQgKHN1Y2ggYXMgYSBicnVzaCksIGEgdGFyZ2V0IGVsZW1lbnQgKHN1Y2ggYXNcbi8vIHRoZSBzdmc6ZyBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIGJydXNoKSBhbmQgdGhlIHN0YW5kYXJkIGFyZ3VtZW50cyBgZGAgKHRoZVxuLy8gdGFyZ2V0IGVsZW1lbnQncyBkYXRhKSBhbmQgYGlgICh0aGUgc2VsZWN0aW9uIGluZGV4IG9mIHRoZSB0YXJnZXQgZWxlbWVudCkuXG5mdW5jdGlvbiBkM19ldmVudERpc3BhdGNoKHRhcmdldCkge1xuICB2YXIgZGlzcGF0Y2ggPSBuZXcgZDNfZGlzcGF0Y2gsXG4gICAgICBpID0gMCxcbiAgICAgIG4gPSBhcmd1bWVudHMubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2kgPCBuKSBkaXNwYXRjaFthcmd1bWVudHNbaV1dID0gZDNfZGlzcGF0Y2hfZXZlbnQoZGlzcGF0Y2gpO1xuXG4gIC8vIENyZWF0ZXMgYSBkaXNwYXRjaCBjb250ZXh0IGZvciB0aGUgc3BlY2lmaWVkIGB0aGl6YCAodHlwaWNhbGx5LCB0aGUgdGFyZ2V0XG4gIC8vIERPTSBlbGVtZW50IHRoYXQgcmVjZWl2ZWQgdGhlIHNvdXJjZSBldmVudCkgYW5kIGBhcmd1bWVudHpgICh0eXBpY2FsbHksIHRoZVxuICAvLyBkYXRhIGBkYCBhbmQgaW5kZXggYGlgIG9mIHRoZSB0YXJnZXQgZWxlbWVudCkuIFRoZSByZXR1cm5lZCBmdW5jdGlvbiBjYW4gYmVcbiAgLy8gdXNlZCB0byBkaXNwYXRjaCBhbiBldmVudCB0byBhbnkgcmVnaXN0ZXJlZCBsaXN0ZW5lcnM7IHRoZSBmdW5jdGlvbiB0YWtlcyBhXG4gIC8vIHNpbmdsZSBhcmd1bWVudCBhcyBpbnB1dCwgYmVpbmcgdGhlIGV2ZW50IHRvIGRpc3BhdGNoLiBUaGUgZXZlbnQgbXVzdCBoYXZlXG4gIC8vIGEgXCJ0eXBlXCIgYXR0cmlidXRlIHdoaWNoIGNvcnJlc3BvbmRzIHRvIGEgdHlwZSByZWdpc3RlcmVkIGluIHRoZVxuICAvLyBjb25zdHJ1Y3Rvci4gVGhpcyBjb250ZXh0IHdpbGwgYXV0b21hdGljYWxseSBwb3B1bGF0ZSB0aGUgXCJzb3VyY2VFdmVudFwiIGFuZFxuICAvLyBcInRhcmdldFwiIGF0dHJpYnV0ZXMgb2YgdGhlIGV2ZW50LCBhcyB3ZWxsIGFzIHNldHRpbmcgdGhlIGBkMy5ldmVudGAgZ2xvYmFsXG4gIC8vIGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIG5vdGlmaWNhdGlvbi5cbiAgZGlzcGF0Y2gub2YgPSBmdW5jdGlvbih0aGl6LCBhcmd1bWVudHopIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZTEpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBlMCA9XG4gICAgICAgIGUxLnNvdXJjZUV2ZW50ID0gZDMuZXZlbnQ7XG4gICAgICAgIGUxLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgZDMuZXZlbnQgPSBlMTtcbiAgICAgICAgZGlzcGF0Y2hbZTEudHlwZV0uYXBwbHkodGhpeiwgYXJndW1lbnR6KTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGQzLmV2ZW50ID0gZTA7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gZGlzcGF0Y2g7XG59XG5kMy5yZXF1b3RlID0gZnVuY3Rpb24ocykge1xuICByZXR1cm4gcy5yZXBsYWNlKGQzX3JlcXVvdGVfcmUsIFwiXFxcXCQmXCIpO1xufTtcblxudmFyIGQzX3JlcXVvdGVfcmUgPSAvW1xcXFxcXF5cXCRcXCpcXCtcXD9cXHxcXFtcXF1cXChcXClcXC5cXHtcXH1dL2c7XG52YXIgZDNfc3ViY2xhc3MgPSB7fS5fX3Byb3RvX18/XG5cbi8vIFVudGlsIEVDTUFTY3JpcHQgc3VwcG9ydHMgYXJyYXkgc3ViY2xhc3NpbmcsIHByb3RvdHlwZSBpbmplY3Rpb24gd29ya3Mgd2VsbC5cbmZ1bmN0aW9uKG9iamVjdCwgcHJvdG90eXBlKSB7XG4gIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG59OlxuXG4vLyBBbmQgaWYgeW91ciBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBfX3Byb3RvX18sIHdlJ2xsIHVzZSBkaXJlY3QgZXh0ZW5zaW9uLlxuZnVuY3Rpb24ob2JqZWN0LCBwcm90b3R5cGUpIHtcbiAgZm9yICh2YXIgcHJvcGVydHkgaW4gcHJvdG90eXBlKSBvYmplY3RbcHJvcGVydHldID0gcHJvdG90eXBlW3Byb3BlcnR5XTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbihncm91cHMpIHtcbiAgZDNfc3ViY2xhc3MoZ3JvdXBzLCBkM19zZWxlY3Rpb25Qcm90b3R5cGUpO1xuICByZXR1cm4gZ3JvdXBzO1xufVxuXG52YXIgZDNfc2VsZWN0ID0gZnVuY3Rpb24ocywgbikgeyByZXR1cm4gbi5xdWVyeVNlbGVjdG9yKHMpOyB9LFxuICAgIGQzX3NlbGVjdEFsbCA9IGZ1bmN0aW9uKHMsIG4pIHsgcmV0dXJuIG4ucXVlcnlTZWxlY3RvckFsbChzKTsgfSxcbiAgICBkM19zZWxlY3RNYXRjaGVzID0gZnVuY3Rpb24obiwgcykge1xuICAgICAgdmFyIGQzX3NlbGVjdE1hdGNoZXIgPSBuLm1hdGNoZXMgfHwgbltkM192ZW5kb3JTeW1ib2wobiwgXCJtYXRjaGVzU2VsZWN0b3JcIildO1xuICAgICAgZDNfc2VsZWN0TWF0Y2hlcyA9IGZ1bmN0aW9uKG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIGQzX3NlbGVjdE1hdGNoZXIuY2FsbChuLCBzKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gZDNfc2VsZWN0TWF0Y2hlcyhuLCBzKTtcbiAgICB9O1xuXG4vLyBQcmVmZXIgU2l6emxlLCBpZiBhdmFpbGFibGUuXG5pZiAodHlwZW9mIFNpenpsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gIGQzX3NlbGVjdCA9IGZ1bmN0aW9uKHMsIG4pIHsgcmV0dXJuIFNpenpsZShzLCBuKVswXSB8fCBudWxsOyB9O1xuICBkM19zZWxlY3RBbGwgPSBTaXp6bGU7XG4gIGQzX3NlbGVjdE1hdGNoZXMgPSBTaXp6bGUubWF0Y2hlc1NlbGVjdG9yO1xufVxuXG5kMy5zZWxlY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGQzLnNlbGVjdChkM19kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpO1xufTtcblxudmFyIGQzX3NlbGVjdGlvblByb3RvdHlwZSA9IGQzLnNlbGVjdGlvbi5wcm90b3R5cGUgPSBbXTtcblxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgdmFyIHN1Ymdyb3VwcyA9IFtdLFxuICAgICAgc3ViZ3JvdXAsXG4gICAgICBzdWJub2RlLFxuICAgICAgZ3JvdXAsXG4gICAgICBub2RlO1xuXG4gIHNlbGVjdG9yID0gZDNfc2VsZWN0aW9uX3NlbGVjdG9yKHNlbGVjdG9yKTtcblxuICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTspIHtcbiAgICBzdWJncm91cHMucHVzaChzdWJncm91cCA9IFtdKTtcbiAgICBzdWJncm91cC5wYXJlbnROb2RlID0gKGdyb3VwID0gdGhpc1tqXSkucGFyZW50Tm9kZTtcbiAgICBmb3IgKHZhciBpID0gLTEsIG4gPSBncm91cC5sZW5ndGg7ICsraSA8IG47KSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2goc3Vibm9kZSA9IHNlbGVjdG9yLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaikpO1xuICAgICAgICBpZiAoc3Vibm9kZSAmJiBcIl9fZGF0YV9fXCIgaW4gbm9kZSkgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJncm91cC5wdXNoKG51bGwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkM19zZWxlY3Rpb24oc3ViZ3JvdXBzKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9zZWxlY3RvcihzZWxlY3Rvcikge1xuICByZXR1cm4gdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgPyBzZWxlY3RvciA6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19zZWxlY3Qoc2VsZWN0b3IsIHRoaXMpO1xuICB9O1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuc2VsZWN0QWxsID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgdmFyIHN1Ymdyb3VwcyA9IFtdLFxuICAgICAgc3ViZ3JvdXAsXG4gICAgICBub2RlO1xuXG4gIHNlbGVjdG9yID0gZDNfc2VsZWN0aW9uX3NlbGVjdG9yQWxsKHNlbGVjdG9yKTtcblxuICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTspIHtcbiAgICBmb3IgKHZhciBncm91cCA9IHRoaXNbal0sIGkgPSAtMSwgbiA9IGdyb3VwLmxlbmd0aDsgKytpIDwgbjspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc3ViZ3JvdXBzLnB1c2goc3ViZ3JvdXAgPSBkM19hcnJheShzZWxlY3Rvci5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGopKSk7XG4gICAgICAgIHN1Ymdyb3VwLnBhcmVudE5vZGUgPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkM19zZWxlY3Rpb24oc3ViZ3JvdXBzKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9zZWxlY3RvckFsbChzZWxlY3Rvcikge1xuICByZXR1cm4gdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgPyBzZWxlY3RvciA6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19zZWxlY3RBbGwoc2VsZWN0b3IsIHRoaXMpO1xuICB9O1xufVxudmFyIGQzX25zWGh0bWwgPSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIjtcblxudmFyIGQzX25zUHJlZml4ID0ge1xuICBzdmc6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcbiAgeGh0bWw6IGQzX25zWGh0bWwsXG4gIHhsaW5rOiBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIixcbiAgeG1sOiBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiLFxuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiXG59O1xuXG5kMy5ucyA9IHtcbiAgcHJlZml4OiBkM19uc1ByZWZpeCxcbiAgcXVhbGlmeTogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gbmFtZS5pbmRleE9mKFwiOlwiKSwgcHJlZml4ID0gbmFtZTtcbiAgICBpZiAoaSA+PSAwICYmIChwcmVmaXggPSBuYW1lLnNsaWNlKDAsIGkpKSAhPT0gXCJ4bWxuc1wiKSBuYW1lID0gbmFtZS5zbGljZShpICsgMSk7XG4gICAgcmV0dXJuIGQzX25zUHJlZml4Lmhhc093blByb3BlcnR5KHByZWZpeCkgPyB7c3BhY2U6IGQzX25zUHJlZml4W3ByZWZpeF0sIGxvY2FsOiBuYW1lfSA6IG5hbWU7XG4gIH1cbn07XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5hdHRyID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG5cbiAgICAvLyBGb3IgYXR0cihzdHJpbmcpLCByZXR1cm4gdGhlIGF0dHJpYnV0ZSB2YWx1ZSBmb3IgdGhlIGZpcnN0IG5vZGUuXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZSgpO1xuICAgICAgbmFtZSA9IGQzLm5zLnF1YWxpZnkobmFtZSk7XG4gICAgICByZXR1cm4gbmFtZS5sb2NhbFxuICAgICAgICAgID8gbm9kZS5nZXRBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKVxuICAgICAgICAgIDogbm9kZS5nZXRBdHRyaWJ1dGUobmFtZSk7XG4gICAgfVxuXG4gICAgLy8gRm9yIGF0dHIob2JqZWN0KSwgdGhlIG9iamVjdCBzcGVjaWZpZXMgdGhlIG5hbWVzIGFuZCB2YWx1ZXMgb2YgdGhlXG4gICAgLy8gYXR0cmlidXRlcyB0byBzZXQgb3IgcmVtb3ZlLiBUaGUgdmFsdWVzIG1heSBiZSBmdW5jdGlvbnMgdGhhdCBhcmVcbiAgICAvLyBldmFsdWF0ZWQgZm9yIGVhY2ggZWxlbWVudC5cbiAgICBmb3IgKHZhbHVlIGluIG5hbWUpIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fYXR0cih2YWx1ZSwgbmFtZVt2YWx1ZV0pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX2F0dHIobmFtZSwgdmFsdWUpKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9hdHRyKG5hbWUsIHZhbHVlKSB7XG4gIG5hbWUgPSBkMy5ucy5xdWFsaWZ5KG5hbWUpO1xuXG4gIC8vIEZvciBhdHRyKHN0cmluZywgbnVsbCksIHJlbW92ZSB0aGUgYXR0cmlidXRlIHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLlxuICBmdW5jdGlvbiBhdHRyTnVsbCgpIHtcbiAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgfVxuICBmdW5jdGlvbiBhdHRyTnVsbE5TKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMobmFtZS5zcGFjZSwgbmFtZS5sb2NhbCk7XG4gIH1cblxuICAvLyBGb3IgYXR0cihzdHJpbmcsIHN0cmluZyksIHNldCB0aGUgYXR0cmlidXRlIHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLlxuICBmdW5jdGlvbiBhdHRyQ29uc3RhbnQoKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICB9XG4gIGZ1bmN0aW9uIGF0dHJDb25zdGFudE5TKCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlTlMobmFtZS5zcGFjZSwgbmFtZS5sb2NhbCwgdmFsdWUpO1xuICB9XG5cbiAgLy8gRm9yIGF0dHIoc3RyaW5nLCBmdW5jdGlvbiksIGV2YWx1YXRlIHRoZSBmdW5jdGlvbiBmb3IgZWFjaCBlbGVtZW50LCBhbmQgc2V0XG4gIC8vIG9yIHJlbW92ZSB0aGUgYXR0cmlidXRlIGFzIGFwcHJvcHJpYXRlLlxuICBmdW5jdGlvbiBhdHRyRnVuY3Rpb24oKSB7XG4gICAgdmFyIHggPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh4ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgeCk7XG4gIH1cbiAgZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoKSB7XG4gICAgdmFyIHggPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh4ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMobmFtZS5zcGFjZSwgbmFtZS5sb2NhbCk7XG4gICAgZWxzZSB0aGlzLnNldEF0dHJpYnV0ZU5TKG5hbWUuc3BhY2UsIG5hbWUubG9jYWwsIHgpO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlID09IG51bGxcbiAgICAgID8gKG5hbWUubG9jYWwgPyBhdHRyTnVsbE5TIDogYXR0ck51bGwpIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IChuYW1lLmxvY2FsID8gYXR0ckZ1bmN0aW9uTlMgOiBhdHRyRnVuY3Rpb24pXG4gICAgICA6IChuYW1lLmxvY2FsID8gYXR0ckNvbnN0YW50TlMgOiBhdHRyQ29uc3RhbnQpKTtcbn1cbmZ1bmN0aW9uIGQzX2NvbGxhcHNlKHMpIHtcbiAgcmV0dXJuIHMudHJpbSgpLnJlcGxhY2UoL1xccysvZywgXCIgXCIpO1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuY2xhc3NlZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuXG4gICAgLy8gRm9yIGNsYXNzZWQoc3RyaW5nKSwgcmV0dXJuIHRydWUgb25seSBpZiB0aGUgZmlyc3Qgbm9kZSBoYXMgdGhlIHNwZWNpZmllZFxuICAgIC8vIGNsYXNzIG9yIGNsYXNzZXMuIE5vdGUgdGhhdCBldmVuIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIERPTVRva2VuTGlzdCwgaXRcbiAgICAvLyBwcm9iYWJseSBkb2Vzbid0IHN1cHBvcnQgaXQgb24gU1ZHIGVsZW1lbnRzICh3aGljaCBjYW4gYmUgYW5pbWF0ZWQpLlxuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdmFyIG5vZGUgPSB0aGlzLm5vZGUoKSxcbiAgICAgICAgICBuID0gKG5hbWUgPSBkM19zZWxlY3Rpb25fY2xhc3NlcyhuYW1lKSkubGVuZ3RoLFxuICAgICAgICAgIGkgPSAtMTtcbiAgICAgIGlmICh2YWx1ZSA9IG5vZGUuY2xhc3NMaXN0KSB7XG4gICAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoIXZhbHVlLmNvbnRhaW5zKG5hbWVbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7XG4gICAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoIWQzX3NlbGVjdGlvbl9jbGFzc2VkUmUobmFtZVtpXSkudGVzdCh2YWx1ZSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIEZvciBjbGFzc2VkKG9iamVjdCksIHRoZSBvYmplY3Qgc3BlY2lmaWVzIHRoZSBuYW1lcyBvZiBjbGFzc2VzIHRvIGFkZCBvclxuICAgIC8vIHJlbW92ZS4gVGhlIHZhbHVlcyBtYXkgYmUgZnVuY3Rpb25zIHRoYXQgYXJlIGV2YWx1YXRlZCBmb3IgZWFjaCBlbGVtZW50LlxuICAgIGZvciAodmFsdWUgaW4gbmFtZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9jbGFzc2VkKHZhbHVlLCBuYW1lW3ZhbHVlXSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gT3RoZXJ3aXNlLCBib3RoIGEgbmFtZSBhbmQgYSB2YWx1ZSBhcmUgc3BlY2lmaWVkLCBhbmQgYXJlIGhhbmRsZWQgYXMgYmVsb3cuXG4gIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX2NsYXNzZWQobmFtZSwgdmFsdWUpKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9jbGFzc2VkUmUobmFtZSkge1xuICByZXR1cm4gbmV3IFJlZ0V4cChcIig/Ol58XFxcXHMrKVwiICsgZDMucmVxdW90ZShuYW1lKSArIFwiKD86XFxcXHMrfCQpXCIsIFwiZ1wiKTtcbn1cblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZXMobmFtZSkge1xuICByZXR1cm4gKG5hbWUgKyBcIlwiKS50cmltKCkuc3BsaXQoL158XFxzKy8pO1xufVxuXG4vLyBNdWx0aXBsZSBjbGFzcyBuYW1lcyBhcmUgYWxsb3dlZCAoZS5nLiwgXCJmb28gYmFyXCIpLlxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZWQobmFtZSwgdmFsdWUpIHtcbiAgbmFtZSA9IGQzX3NlbGVjdGlvbl9jbGFzc2VzKG5hbWUpLm1hcChkM19zZWxlY3Rpb25fY2xhc3NlZE5hbWUpO1xuICB2YXIgbiA9IG5hbWUubGVuZ3RoO1xuXG4gIGZ1bmN0aW9uIGNsYXNzZWRDb25zdGFudCgpIHtcbiAgICB2YXIgaSA9IC0xO1xuICAgIHdoaWxlICgrK2kgPCBuKSBuYW1lW2ldKHRoaXMsIHZhbHVlKTtcbiAgfVxuXG4gIC8vIFdoZW4gdGhlIHZhbHVlIGlzIGEgZnVuY3Rpb24sIHRoZSBmdW5jdGlvbiBpcyBzdGlsbCBldmFsdWF0ZWQgb25seSBvbmNlIHBlclxuICAvLyBlbGVtZW50IGV2ZW4gaWYgdGhlcmUgYXJlIG11bHRpcGxlIGNsYXNzIG5hbWVzLlxuICBmdW5jdGlvbiBjbGFzc2VkRnVuY3Rpb24oKSB7XG4gICAgdmFyIGkgPSAtMSwgeCA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgd2hpbGUgKCsraSA8IG4pIG5hbWVbaV0odGhpcywgeCk7XG4gIH1cblxuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gY2xhc3NlZEZ1bmN0aW9uXG4gICAgICA6IGNsYXNzZWRDb25zdGFudDtcbn1cblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZWROYW1lKG5hbWUpIHtcbiAgdmFyIHJlID0gZDNfc2VsZWN0aW9uX2NsYXNzZWRSZShuYW1lKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUsIHZhbHVlKSB7XG4gICAgaWYgKGMgPSBub2RlLmNsYXNzTGlzdCkgcmV0dXJuIHZhbHVlID8gYy5hZGQobmFtZSkgOiBjLnJlbW92ZShuYW1lKTtcbiAgICB2YXIgYyA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIjtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHJlLmxhc3RJbmRleCA9IDA7XG4gICAgICBpZiAoIXJlLnRlc3QoYykpIG5vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgZDNfY29sbGFwc2UoYyArIFwiIFwiICsgbmFtZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIGQzX2NvbGxhcHNlKGMucmVwbGFjZShyZSwgXCIgXCIpKSk7XG4gICAgfVxuICB9O1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuc3R5bGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgdmFyIG4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAobiA8IDMpIHtcblxuICAgIC8vIEZvciBzdHlsZShvYmplY3QpIG9yIHN0eWxlKG9iamVjdCwgc3RyaW5nKSwgdGhlIG9iamVjdCBzcGVjaWZpZXMgdGhlXG4gICAgLy8gbmFtZXMgYW5kIHZhbHVlcyBvZiB0aGUgYXR0cmlidXRlcyB0byBzZXQgb3IgcmVtb3ZlLiBUaGUgdmFsdWVzIG1heSBiZVxuICAgIC8vIGZ1bmN0aW9ucyB0aGF0IGFyZSBldmFsdWF0ZWQgZm9yIGVhY2ggZWxlbWVudC4gVGhlIG9wdGlvbmFsIHN0cmluZ1xuICAgIC8vIHNwZWNpZmllcyB0aGUgcHJpb3JpdHkuXG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICBpZiAobiA8IDIpIHZhbHVlID0gXCJcIjtcbiAgICAgIGZvciAocHJpb3JpdHkgaW4gbmFtZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9zdHlsZShwcmlvcml0eSwgbmFtZVtwcmlvcml0eV0sIHZhbHVlKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBGb3Igc3R5bGUoc3RyaW5nKSwgcmV0dXJuIHRoZSBjb21wdXRlZCBzdHlsZSB2YWx1ZSBmb3IgdGhlIGZpcnN0IG5vZGUuXG4gICAgaWYgKG4gPCAyKSB7XG4gICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZSgpO1xuICAgICAgcmV0dXJuIGQzX3dpbmRvdyhub2RlKS5nZXRDb21wdXRlZFN0eWxlKG5vZGUsIG51bGwpLmdldFByb3BlcnR5VmFsdWUobmFtZSk7XG4gICAgfVxuXG4gICAgLy8gRm9yIHN0eWxlKHN0cmluZywgc3RyaW5nKSBvciBzdHlsZShzdHJpbmcsIGZ1bmN0aW9uKSwgdXNlIHRoZSBkZWZhdWx0XG4gICAgLy8gcHJpb3JpdHkuIFRoZSBwcmlvcml0eSBpcyBpZ25vcmVkIGZvciBzdHlsZShzdHJpbmcsIG51bGwpLlxuICAgIHByaW9yaXR5ID0gXCJcIjtcbiAgfVxuXG4gIC8vIE90aGVyd2lzZSwgYSBuYW1lLCB2YWx1ZSBhbmQgcHJpb3JpdHkgYXJlIHNwZWNpZmllZCwgYW5kIGhhbmRsZWQgYXMgYmVsb3cuXG4gIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX3N0eWxlKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3N0eWxlKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuXG4gIC8vIEZvciBzdHlsZShuYW1lLCBudWxsKSBvciBzdHlsZShuYW1lLCBudWxsLCBwcmlvcml0eSksIHJlbW92ZSB0aGUgc3R5bGVcbiAgLy8gcHJvcGVydHkgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuIFRoZSBwcmlvcml0eSBpcyBpZ25vcmVkLlxuICBmdW5jdGlvbiBzdHlsZU51bGwoKSB7XG4gICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgfVxuXG4gIC8vIEZvciBzdHlsZShuYW1lLCBzdHJpbmcpIG9yIHN0eWxlKG5hbWUsIHN0cmluZywgcHJpb3JpdHkpLCBzZXQgdGhlIHN0eWxlXG4gIC8vIHByb3BlcnR5IHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLCB1c2luZyB0aGUgc3BlY2lmaWVkIHByaW9yaXR5LlxuICBmdW5jdGlvbiBzdHlsZUNvbnN0YW50KCkge1xuICAgIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUsIHByaW9yaXR5KTtcbiAgfVxuXG4gIC8vIEZvciBzdHlsZShuYW1lLCBmdW5jdGlvbikgb3Igc3R5bGUobmFtZSwgZnVuY3Rpb24sIHByaW9yaXR5KSwgZXZhbHVhdGUgdGhlXG4gIC8vIGZ1bmN0aW9uIGZvciBlYWNoIGVsZW1lbnQsIGFuZCBzZXQgb3IgcmVtb3ZlIHRoZSBzdHlsZSBwcm9wZXJ0eSBhc1xuICAvLyBhcHByb3ByaWF0ZS4gV2hlbiBzZXR0aW5nLCB1c2UgdGhlIHNwZWNpZmllZCBwcmlvcml0eS5cbiAgZnVuY3Rpb24gc3R5bGVGdW5jdGlvbigpIHtcbiAgICB2YXIgeCA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHggPT0gbnVsbCkgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgICBlbHNlIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgeCwgcHJpb3JpdHkpO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlID09IG51bGxcbiAgICAgID8gc3R5bGVOdWxsIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IHN0eWxlRnVuY3Rpb24gOiBzdHlsZUNvbnN0YW50KTtcbn1cblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLnByb3BlcnR5ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG5cbiAgICAvLyBGb3IgcHJvcGVydHkoc3RyaW5nKSwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBmb3IgdGhlIGZpcnN0IG5vZGUuXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSByZXR1cm4gdGhpcy5ub2RlKClbbmFtZV07XG5cbiAgICAvLyBGb3IgcHJvcGVydHkob2JqZWN0KSwgdGhlIG9iamVjdCBzcGVjaWZpZXMgdGhlIG5hbWVzIGFuZCB2YWx1ZXMgb2YgdGhlXG4gICAgLy8gcHJvcGVydGllcyB0byBzZXQgb3IgcmVtb3ZlLiBUaGUgdmFsdWVzIG1heSBiZSBmdW5jdGlvbnMgdGhhdCBhcmVcbiAgICAvLyBldmFsdWF0ZWQgZm9yIGVhY2ggZWxlbWVudC5cbiAgICBmb3IgKHZhbHVlIGluIG5hbWUpIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fcHJvcGVydHkodmFsdWUsIG5hbWVbdmFsdWVdKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBPdGhlcndpc2UsIGJvdGggYSBuYW1lIGFuZCBhIHZhbHVlIGFyZSBzcGVjaWZpZWQsIGFuZCBhcmUgaGFuZGxlZCBhcyBiZWxvdy5cbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fcHJvcGVydHkobmFtZSwgdmFsdWUpKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9wcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuXG4gIC8vIEZvciBwcm9wZXJ0eShuYW1lLCBudWxsKSwgcmVtb3ZlIHRoZSBwcm9wZXJ0eSB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZS5cbiAgZnVuY3Rpb24gcHJvcGVydHlOdWxsKCkge1xuICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICB9XG5cbiAgLy8gRm9yIHByb3BlcnR5KG5hbWUsIHN0cmluZyksIHNldCB0aGUgcHJvcGVydHkgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gIGZ1bmN0aW9uIHByb3BlcnR5Q29uc3RhbnQoKSB7XG4gICAgdGhpc1tuYW1lXSA9IHZhbHVlO1xuICB9XG5cbiAgLy8gRm9yIHByb3BlcnR5KG5hbWUsIGZ1bmN0aW9uKSwgZXZhbHVhdGUgdGhlIGZ1bmN0aW9uIGZvciBlYWNoIGVsZW1lbnQsIGFuZFxuICAvLyBzZXQgb3IgcmVtb3ZlIHRoZSBwcm9wZXJ0eSBhcyBhcHByb3ByaWF0ZS5cbiAgZnVuY3Rpb24gcHJvcGVydHlGdW5jdGlvbigpIHtcbiAgICB2YXIgeCA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHggPT0gbnVsbCkgZGVsZXRlIHRoaXNbbmFtZV07XG4gICAgZWxzZSB0aGlzW25hbWVdID0geDtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZSA9PSBudWxsXG4gICAgICA/IHByb3BlcnR5TnVsbCA6ICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBwcm9wZXJ0eUZ1bmN0aW9uIDogcHJvcGVydHlDb25zdGFudCk7XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS50ZXh0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IGZ1bmN0aW9uKCkgeyB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IHRoaXMudGV4dENvbnRlbnQgPSB2ID09IG51bGwgPyBcIlwiIDogdjsgfSA6IHZhbHVlID09IG51bGxcbiAgICAgID8gZnVuY3Rpb24oKSB7IHRoaXMudGV4dENvbnRlbnQgPSBcIlwiOyB9XG4gICAgICA6IGZ1bmN0aW9uKCkgeyB0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7IH0pXG4gICAgICA6IHRoaXMubm9kZSgpLnRleHRDb250ZW50O1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmh0bWwgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2godHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gZnVuY3Rpb24oKSB7IHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgdGhpcy5pbm5lckhUTUwgPSB2ID09IG51bGwgPyBcIlwiIDogdjsgfSA6IHZhbHVlID09IG51bGxcbiAgICAgID8gZnVuY3Rpb24oKSB7IHRoaXMuaW5uZXJIVE1MID0gXCJcIjsgfVxuICAgICAgOiBmdW5jdGlvbigpIHsgdGhpcy5pbm5lckhUTUwgPSB2YWx1ZTsgfSlcbiAgICAgIDogdGhpcy5ub2RlKCkuaW5uZXJIVE1MO1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgbmFtZSA9IGQzX3NlbGVjdGlvbl9jcmVhdG9yKG5hbWUpO1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQobmFtZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fY3JlYXRvcihuYW1lKSB7XG5cbiAgZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgIHZhciBkb2N1bWVudCA9IHRoaXMub3duZXJEb2N1bWVudCxcbiAgICAgICAgbmFtZXNwYWNlID0gdGhpcy5uYW1lc3BhY2VVUkk7XG4gICAgcmV0dXJuIG5hbWVzcGFjZSA9PT0gZDNfbnNYaHRtbCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJID09PSBkM19uc1hodG1sXG4gICAgICAgID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKVxuICAgICAgICA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lc3BhY2UsIG5hbWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlTlMoKSB7XG4gICAgcmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZS5zcGFjZSwgbmFtZS5sb2NhbCk7XG4gIH1cblxuICByZXR1cm4gdHlwZW9mIG5hbWUgPT09IFwiZnVuY3Rpb25cIiA/IG5hbWVcbiAgICAgIDogKG5hbWUgPSBkMy5ucy5xdWFsaWZ5KG5hbWUpKS5sb2NhbCA/IGNyZWF0ZU5TXG4gICAgICA6IGNyZWF0ZTtcbn1cblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uKG5hbWUsIGJlZm9yZSkge1xuICBuYW1lID0gZDNfc2VsZWN0aW9uX2NyZWF0b3IobmFtZSk7XG4gIGJlZm9yZSA9IGQzX3NlbGVjdGlvbl9zZWxlY3RvcihiZWZvcmUpO1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zZXJ0QmVmb3JlKG5hbWUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgYmVmb3JlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgbnVsbCk7XG4gIH0pO1xufTtcblxuLy8gVE9ETyByZW1vdmUoc2VsZWN0b3IpP1xuLy8gVE9ETyByZW1vdmUobm9kZSk/XG4vLyBUT0RPIHJlbW92ZShmdW5jdGlvbik/XG5kM19zZWxlY3Rpb25Qcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uUmVtb3ZlKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvblJlbW92ZSgpIHtcbiAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xufVxuXG5kMy5zZXQgPSBmdW5jdGlvbihhcnJheSkge1xuICB2YXIgc2V0ID0gbmV3IGQzX1NldDtcbiAgaWYgKGFycmF5KSBmb3IgKHZhciBpID0gMCwgbiA9IGFycmF5Lmxlbmd0aDsgaSA8IG47ICsraSkgc2V0LmFkZChhcnJheVtpXSk7XG4gIHJldHVybiBzZXQ7XG59O1xuXG5mdW5jdGlvbiBkM19TZXQoKSB7XG4gIHRoaXMuXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5cbmQzX2NsYXNzKGQzX1NldCwge1xuICBoYXM6IGQzX21hcF9oYXMsXG4gIGFkZDogZnVuY3Rpb24oa2V5KSB7XG4gICAgdGhpcy5fW2QzX21hcF9lc2NhcGUoa2V5ICs9IFwiXCIpXSA9IHRydWU7XG4gICAgcmV0dXJuIGtleTtcbiAgfSxcbiAgcmVtb3ZlOiBkM19tYXBfcmVtb3ZlLFxuICB2YWx1ZXM6IGQzX21hcF9rZXlzLFxuICBzaXplOiBkM19tYXBfc2l6ZSxcbiAgZW1wdHk6IGQzX21hcF9lbXB0eSxcbiAgZm9yRWFjaDogZnVuY3Rpb24oZikge1xuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIGYuY2FsbCh0aGlzLCBkM19tYXBfdW5lc2NhcGUoa2V5KSk7XG4gIH1cbn0pO1xuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuZGF0YSA9IGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgdmFyIGkgPSAtMSxcbiAgICAgIG4gPSB0aGlzLmxlbmd0aCxcbiAgICAgIGdyb3VwLFxuICAgICAgbm9kZTtcblxuICAvLyBJZiBubyB2YWx1ZSBpcyBzcGVjaWZpZWQsIHJldHVybiB0aGUgZmlyc3QgdmFsdWUuXG4gIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIHZhbHVlID0gbmV3IEFycmF5KG4gPSAoZ3JvdXAgPSB0aGlzWzBdKS5sZW5ndGgpO1xuICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHZhbHVlW2ldID0gbm9kZS5fX2RhdGFfXztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gYmluZChncm91cCwgZ3JvdXBEYXRhKSB7XG4gICAgdmFyIGksXG4gICAgICAgIG4gPSBncm91cC5sZW5ndGgsXG4gICAgICAgIG0gPSBncm91cERhdGEubGVuZ3RoLFxuICAgICAgICBuMCA9IE1hdGgubWluKG4sIG0pLFxuICAgICAgICB1cGRhdGVOb2RlcyA9IG5ldyBBcnJheShtKSxcbiAgICAgICAgZW50ZXJOb2RlcyA9IG5ldyBBcnJheShtKSxcbiAgICAgICAgZXhpdE5vZGVzID0gbmV3IEFycmF5KG4pLFxuICAgICAgICBub2RlLFxuICAgICAgICBub2RlRGF0YTtcblxuICAgIGlmIChrZXkpIHtcbiAgICAgIHZhciBub2RlQnlLZXlWYWx1ZSA9IG5ldyBkM19NYXAsXG4gICAgICAgICAga2V5VmFsdWVzID0gbmV3IEFycmF5KG4pLFxuICAgICAgICAgIGtleVZhbHVlO1xuXG4gICAgICBmb3IgKGkgPSAtMTsgKytpIDwgbjspIHtcbiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICAgIGlmIChub2RlQnlLZXlWYWx1ZS5oYXMoa2V5VmFsdWUgPSBrZXkuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpKSkpIHtcbiAgICAgICAgICAgIGV4aXROb2Rlc1tpXSA9IG5vZGU7IC8vIGR1cGxpY2F0ZSBzZWxlY3Rpb24ga2V5XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vZGVCeUtleVZhbHVlLnNldChrZXlWYWx1ZSwgbm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGtleVZhbHVlc1tpXSA9IGtleVZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAoaSA9IC0xOyArK2kgPCBtOykge1xuICAgICAgICBpZiAoIShub2RlID0gbm9kZUJ5S2V5VmFsdWUuZ2V0KGtleVZhbHVlID0ga2V5LmNhbGwoZ3JvdXBEYXRhLCBub2RlRGF0YSA9IGdyb3VwRGF0YVtpXSwgaSkpKSkge1xuICAgICAgICAgIGVudGVyTm9kZXNbaV0gPSBkM19zZWxlY3Rpb25fZGF0YU5vZGUobm9kZURhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKG5vZGUgIT09IHRydWUpIHsgLy8gbm8gZHVwbGljYXRlIGRhdGEga2V5XG4gICAgICAgICAgdXBkYXRlTm9kZXNbaV0gPSBub2RlO1xuICAgICAgICAgIG5vZGUuX19kYXRhX18gPSBub2RlRGF0YTtcbiAgICAgICAgfVxuICAgICAgICBub2RlQnlLZXlWYWx1ZS5zZXQoa2V5VmFsdWUsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGkgPSAtMTsgKytpIDwgbjspIHtcbiAgICAgICAgaWYgKGkgaW4ga2V5VmFsdWVzICYmIG5vZGVCeUtleVZhbHVlLmdldChrZXlWYWx1ZXNbaV0pICE9PSB0cnVlKSB7XG4gICAgICAgICAgZXhpdE5vZGVzW2ldID0gZ3JvdXBbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChpID0gLTE7ICsraSA8IG4wOykge1xuICAgICAgICBub2RlID0gZ3JvdXBbaV07XG4gICAgICAgIG5vZGVEYXRhID0gZ3JvdXBEYXRhW2ldO1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuX19kYXRhX18gPSBub2RlRGF0YTtcbiAgICAgICAgICB1cGRhdGVOb2Rlc1tpXSA9IG5vZGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZW50ZXJOb2Rlc1tpXSA9IGQzX3NlbGVjdGlvbl9kYXRhTm9kZShub2RlRGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoOyBpIDwgbTsgKytpKSB7XG4gICAgICAgIGVudGVyTm9kZXNbaV0gPSBkM19zZWxlY3Rpb25fZGF0YU5vZGUoZ3JvdXBEYXRhW2ldKTtcbiAgICAgIH1cbiAgICAgIGZvciAoOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGV4aXROb2Rlc1tpXSA9IGdyb3VwW2ldO1xuICAgICAgfVxuICAgIH1cblxuICAgIGVudGVyTm9kZXMudXBkYXRlXG4gICAgICAgID0gdXBkYXRlTm9kZXM7XG5cbiAgICBlbnRlck5vZGVzLnBhcmVudE5vZGVcbiAgICAgICAgPSB1cGRhdGVOb2Rlcy5wYXJlbnROb2RlXG4gICAgICAgID0gZXhpdE5vZGVzLnBhcmVudE5vZGVcbiAgICAgICAgPSBncm91cC5wYXJlbnROb2RlO1xuXG4gICAgZW50ZXIucHVzaChlbnRlck5vZGVzKTtcbiAgICB1cGRhdGUucHVzaCh1cGRhdGVOb2Rlcyk7XG4gICAgZXhpdC5wdXNoKGV4aXROb2Rlcyk7XG4gIH1cblxuICB2YXIgZW50ZXIgPSBkM19zZWxlY3Rpb25fZW50ZXIoW10pLFxuICAgICAgdXBkYXRlID0gZDNfc2VsZWN0aW9uKFtdKSxcbiAgICAgIGV4aXQgPSBkM19zZWxlY3Rpb24oW10pO1xuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICBiaW5kKGdyb3VwID0gdGhpc1tpXSwgdmFsdWUuY2FsbChncm91cCwgZ3JvdXAucGFyZW50Tm9kZS5fX2RhdGFfXywgaSkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgYmluZChncm91cCA9IHRoaXNbaV0sIHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGUuZW50ZXIgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGVudGVyOyB9O1xuICB1cGRhdGUuZXhpdCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gZXhpdDsgfTtcbiAgcmV0dXJuIHVwZGF0ZTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9kYXRhTm9kZShkYXRhKSB7XG4gIHJldHVybiB7X19kYXRhX186IGRhdGF9O1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuZGF0dW0gPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLnByb3BlcnR5KFwiX19kYXRhX19cIiwgdmFsdWUpXG4gICAgICA6IHRoaXMucHJvcGVydHkoXCJfX2RhdGFfX1wiKTtcbn07XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbihmaWx0ZXIpIHtcbiAgdmFyIHN1Ymdyb3VwcyA9IFtdLFxuICAgICAgc3ViZ3JvdXAsXG4gICAgICBncm91cCxcbiAgICAgIG5vZGU7XG5cbiAgaWYgKHR5cGVvZiBmaWx0ZXIgIT09IFwiZnVuY3Rpb25cIikgZmlsdGVyID0gZDNfc2VsZWN0aW9uX2ZpbHRlcihmaWx0ZXIpO1xuXG4gIGZvciAodmFyIGogPSAwLCBtID0gdGhpcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICBzdWJncm91cHMucHVzaChzdWJncm91cCA9IFtdKTtcbiAgICBzdWJncm91cC5wYXJlbnROb2RlID0gKGdyb3VwID0gdGhpc1tqXSkucGFyZW50Tm9kZTtcbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIGZpbHRlci5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGopKSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGQzX3NlbGVjdGlvbihzdWJncm91cHMpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2ZpbHRlcihzZWxlY3Rvcikge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX3NlbGVjdE1hdGNoZXModGhpcywgc2VsZWN0b3IpO1xuICB9O1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUub3JkZXIgPSBmdW5jdGlvbigpIHtcbiAgZm9yICh2YXIgaiA9IC0xLCBtID0gdGhpcy5sZW5ndGg7ICsraiA8IG07KSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSB0aGlzW2pdLCBpID0gZ3JvdXAubGVuZ3RoIC0gMSwgbmV4dCA9IGdyb3VwW2ldLCBub2RlOyAtLWkgPj0gMDspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgaWYgKG5leHQgJiYgbmV4dCAhPT0gbm9kZS5uZXh0U2libGluZykgbmV4dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBuZXh0KTtcbiAgICAgICAgbmV4dCA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0aGlzO1xufTtcbmQzLmFzY2VuZGluZyA9IGQzX2FzY2VuZGluZztcblxuZnVuY3Rpb24gZDNfYXNjZW5kaW5nKGEsIGIpIHtcbiAgcmV0dXJuIGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiBhID49IGIgPyAwIDogTmFOO1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uKGNvbXBhcmF0b3IpIHtcbiAgY29tcGFyYXRvciA9IGQzX3NlbGVjdGlvbl9zb3J0Q29tcGFyYXRvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTspIHRoaXNbal0uc29ydChjb21wYXJhdG9yKTtcbiAgcmV0dXJuIHRoaXMub3JkZXIoKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9zb3J0Q29tcGFyYXRvcihjb21wYXJhdG9yKSB7XG4gIGlmICghYXJndW1lbnRzLmxlbmd0aCkgY29tcGFyYXRvciA9IGQzX2FzY2VuZGluZztcbiAgcmV0dXJuIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gYSAmJiBiID8gY29tcGFyYXRvcihhLl9fZGF0YV9fLCBiLl9fZGF0YV9fKSA6ICFhIC0gIWI7XG4gIH07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgcmV0dXJuIGQzX3NlbGVjdGlvbl9lYWNoKHRoaXMsIGZ1bmN0aW9uKG5vZGUsIGksIGopIHtcbiAgICBjYWxsYmFjay5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGopO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9lYWNoKGdyb3VwcywgY2FsbGJhY2spIHtcbiAgZm9yICh2YXIgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgaisrKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSBjYWxsYmFjayhub2RlLCBpLCBqKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGdyb3Vwcztcbn1cblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgYXJncyA9IGQzX2FycmF5KGFyZ3VtZW50cyk7XG4gIGNhbGxiYWNrLmFwcGx5KGFyZ3NbMF0gPSB0aGlzLCBhcmdzKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuZW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICF0aGlzLm5vZGUoKTtcbn07XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5ub2RlID0gZnVuY3Rpb24oKSB7XG4gIGZvciAodmFyIGogPSAwLCBtID0gdGhpcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICBmb3IgKHZhciBncm91cCA9IHRoaXNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICB2YXIgbm9kZSA9IGdyb3VwW2ldO1xuICAgICAgaWYgKG5vZGUpIHJldHVybiBub2RlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zaXplID0gZnVuY3Rpb24oKSB7XG4gIHZhciBuID0gMDtcbiAgZDNfc2VsZWN0aW9uX2VhY2godGhpcywgZnVuY3Rpb24oKSB7ICsrbjsgfSk7XG4gIHJldHVybiBuO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2VudGVyKHNlbGVjdGlvbikge1xuICBkM19zdWJjbGFzcyhzZWxlY3Rpb24sIGQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZSk7XG4gIHJldHVybiBzZWxlY3Rpb247XG59XG5cbnZhciBkM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUgPSBbXTtcblxuZDMuc2VsZWN0aW9uLmVudGVyID0gZDNfc2VsZWN0aW9uX2VudGVyO1xuZDMuc2VsZWN0aW9uLmVudGVyLnByb3RvdHlwZSA9IGQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZTtcblxuZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLmFwcGVuZCA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5hcHBlbmQ7XG5kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuZW1wdHkgPSBkM19zZWxlY3Rpb25Qcm90b3R5cGUuZW1wdHk7XG5kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUubm9kZSA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5ub2RlO1xuZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLmNhbGwgPSBkM19zZWxlY3Rpb25Qcm90b3R5cGUuY2FsbDtcbmQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZS5zaXplID0gZDNfc2VsZWN0aW9uUHJvdG90eXBlLnNpemU7XG5cblxuZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHZhciBzdWJncm91cHMgPSBbXSxcbiAgICAgIHN1Ymdyb3VwLFxuICAgICAgc3Vibm9kZSxcbiAgICAgIHVwZ3JvdXAsXG4gICAgICBncm91cCxcbiAgICAgIG5vZGU7XG5cbiAgZm9yICh2YXIgaiA9IC0xLCBtID0gdGhpcy5sZW5ndGg7ICsraiA8IG07KSB7XG4gICAgdXBncm91cCA9IChncm91cCA9IHRoaXNbal0pLnVwZGF0ZTtcbiAgICBzdWJncm91cHMucHVzaChzdWJncm91cCA9IFtdKTtcbiAgICBzdWJncm91cC5wYXJlbnROb2RlID0gZ3JvdXAucGFyZW50Tm9kZTtcbiAgICBmb3IgKHZhciBpID0gLTEsIG4gPSBncm91cC5sZW5ndGg7ICsraSA8IG47KSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2godXBncm91cFtpXSA9IHN1Ym5vZGUgPSBzZWxlY3Rvci5jYWxsKGdyb3VwLnBhcmVudE5vZGUsIG5vZGUuX19kYXRhX18sIGksIGopKTtcbiAgICAgICAgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJncm91cC5wdXNoKG51bGwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkM19zZWxlY3Rpb24oc3ViZ3JvdXBzKTtcbn07XG5cbmQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbihuYW1lLCBiZWZvcmUpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSBiZWZvcmUgPSBkM19zZWxlY3Rpb25fZW50ZXJJbnNlcnRCZWZvcmUodGhpcyk7XG4gIHJldHVybiBkM19zZWxlY3Rpb25Qcm90b3R5cGUuaW5zZXJ0LmNhbGwodGhpcywgbmFtZSwgYmVmb3JlKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9lbnRlckluc2VydEJlZm9yZShlbnRlcikge1xuICB2YXIgaTAsIGowO1xuICByZXR1cm4gZnVuY3Rpb24oZCwgaSwgaikge1xuICAgIHZhciBncm91cCA9IGVudGVyW2pdLnVwZGF0ZSxcbiAgICAgICAgbiA9IGdyb3VwLmxlbmd0aCxcbiAgICAgICAgbm9kZTtcbiAgICBpZiAoaiAhPSBqMCkgajAgPSBqLCBpMCA9IDA7XG4gICAgaWYgKGkgPj0gaTApIGkwID0gaSArIDE7XG4gICAgd2hpbGUgKCEobm9kZSA9IGdyb3VwW2kwXSkgJiYgKytpMCA8IG4pO1xuICAgIHJldHVybiBub2RlO1xuICB9O1xufVxuXG4vLyBUT0RPIGZhc3Qgc2luZ2xldG9uIGltcGxlbWVudGF0aW9uP1xuZDMuc2VsZWN0ID0gZnVuY3Rpb24obm9kZSkge1xuICB2YXIgZ3JvdXA7XG4gIGlmICh0eXBlb2Ygbm9kZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGdyb3VwID0gW2QzX3NlbGVjdChub2RlLCBkM19kb2N1bWVudCldO1xuICAgIGdyb3VwLnBhcmVudE5vZGUgPSBkM19kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIH0gZWxzZSB7XG4gICAgZ3JvdXAgPSBbbm9kZV07XG4gICAgZ3JvdXAucGFyZW50Tm9kZSA9IGQzX2RvY3VtZW50RWxlbWVudChub2RlKTtcbiAgfVxuICByZXR1cm4gZDNfc2VsZWN0aW9uKFtncm91cF0pO1xufTtcblxuZDMuc2VsZWN0QWxsID0gZnVuY3Rpb24obm9kZXMpIHtcbiAgdmFyIGdyb3VwO1xuICBpZiAodHlwZW9mIG5vZGVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgZ3JvdXAgPSBkM19hcnJheShkM19zZWxlY3RBbGwobm9kZXMsIGQzX2RvY3VtZW50KSk7XG4gICAgZ3JvdXAucGFyZW50Tm9kZSA9IGQzX2RvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgfSBlbHNlIHtcbiAgICBncm91cCA9IGQzX2FycmF5KG5vZGVzKTtcbiAgICBncm91cC5wYXJlbnROb2RlID0gbnVsbDtcbiAgfVxuICByZXR1cm4gZDNfc2VsZWN0aW9uKFtncm91cF0pO1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIsIGNhcHR1cmUpIHtcbiAgdmFyIG4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAobiA8IDMpIHtcblxuICAgIC8vIEZvciBvbihvYmplY3QpIG9yIG9uKG9iamVjdCwgYm9vbGVhbiksIHRoZSBvYmplY3Qgc3BlY2lmaWVzIHRoZSBldmVudFxuICAgIC8vIHR5cGVzIGFuZCBsaXN0ZW5lcnMgdG8gYWRkIG9yIHJlbW92ZS4gVGhlIG9wdGlvbmFsIGJvb2xlYW4gc3BlY2lmaWVzXG4gICAgLy8gd2hldGhlciB0aGUgbGlzdGVuZXIgY2FwdHVyZXMgZXZlbnRzLlxuICAgIGlmICh0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgaWYgKG4gPCAyKSBsaXN0ZW5lciA9IGZhbHNlO1xuICAgICAgZm9yIChjYXB0dXJlIGluIHR5cGUpIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fb24oY2FwdHVyZSwgdHlwZVtjYXB0dXJlXSwgbGlzdGVuZXIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIEZvciBvbihzdHJpbmcpLCByZXR1cm4gdGhlIGxpc3RlbmVyIGZvciB0aGUgZmlyc3Qgbm9kZS5cbiAgICBpZiAobiA8IDIpIHJldHVybiAobiA9IHRoaXMubm9kZSgpW1wiX19vblwiICsgdHlwZV0pICYmIG4uXztcblxuICAgIC8vIEZvciBvbihzdHJpbmcsIGZ1bmN0aW9uKSwgdXNlIHRoZSBkZWZhdWx0IGNhcHR1cmUuXG4gICAgY2FwdHVyZSA9IGZhbHNlO1xuICB9XG5cbiAgLy8gT3RoZXJ3aXNlLCBhIHR5cGUsIGxpc3RlbmVyIGFuZCBjYXB0dXJlIGFyZSBzcGVjaWZpZWQsIGFuZCBoYW5kbGVkIGFzIGJlbG93LlxuICByZXR1cm4gdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9vbih0eXBlLCBsaXN0ZW5lciwgY2FwdHVyZSkpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX29uKHR5cGUsIGxpc3RlbmVyLCBjYXB0dXJlKSB7XG4gIHZhciBuYW1lID0gXCJfX29uXCIgKyB0eXBlLFxuICAgICAgaSA9IHR5cGUuaW5kZXhPZihcIi5cIiksXG4gICAgICB3cmFwID0gZDNfc2VsZWN0aW9uX29uTGlzdGVuZXI7XG5cbiAgaWYgKGkgPiAwKSB0eXBlID0gdHlwZS5zbGljZSgwLCBpKTtcbiAgdmFyIGZpbHRlciA9IGQzX3NlbGVjdGlvbl9vbkZpbHRlcnMuZ2V0KHR5cGUpO1xuICBpZiAoZmlsdGVyKSB0eXBlID0gZmlsdGVyLCB3cmFwID0gZDNfc2VsZWN0aW9uX29uRmlsdGVyO1xuXG4gIGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xuICAgIHZhciBsID0gdGhpc1tuYW1lXTtcbiAgICBpZiAobCkge1xuICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGwsIGwuJCk7XG4gICAgICBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkFkZCgpIHtcbiAgICB2YXIgbCA9IHdyYXAobGlzdGVuZXIsIGQzX2FycmF5KGFyZ3VtZW50cykpO1xuICAgIG9uUmVtb3ZlLmNhbGwodGhpcyk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHR5cGUsIHRoaXNbbmFtZV0gPSBsLCBsLiQgPSBjYXB0dXJlKTtcbiAgICBsLl8gPSBsaXN0ZW5lcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUFsbCgpIHtcbiAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKFwiXl9fb24oW14uXSspXCIgKyBkMy5yZXF1b3RlKHR5cGUpICsgXCIkXCIpLFxuICAgICAgICBtYXRjaDtcbiAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgIGlmIChtYXRjaCA9IG5hbWUubWF0Y2gocmUpKSB7XG4gICAgICAgIHZhciBsID0gdGhpc1tuYW1lXTtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKG1hdGNoWzFdLCBsLCBsLiQpO1xuICAgICAgICBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gaVxuICAgICAgPyBsaXN0ZW5lciA/IG9uQWRkIDogb25SZW1vdmVcbiAgICAgIDogbGlzdGVuZXIgPyBkM19ub29wIDogcmVtb3ZlQWxsO1xufVxuXG52YXIgZDNfc2VsZWN0aW9uX29uRmlsdGVycyA9IGQzLm1hcCh7XG4gIG1vdXNlZW50ZXI6IFwibW91c2VvdmVyXCIsXG4gIG1vdXNlbGVhdmU6IFwibW91c2VvdXRcIlxufSk7XG5cbmlmIChkM19kb2N1bWVudCkge1xuICBkM19zZWxlY3Rpb25fb25GaWx0ZXJzLmZvckVhY2goZnVuY3Rpb24oaykge1xuICAgIGlmIChcIm9uXCIgKyBrIGluIGQzX2RvY3VtZW50KSBkM19zZWxlY3Rpb25fb25GaWx0ZXJzLnJlbW92ZShrKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9vbkxpc3RlbmVyKGxpc3RlbmVyLCBhcmd1bWVudHopIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgbyA9IGQzLmV2ZW50OyAvLyBFdmVudHMgY2FuIGJlIHJlZW50cmFudCAoZS5nLiwgZm9jdXMpLlxuICAgIGQzLmV2ZW50ID0gZTtcbiAgICBhcmd1bWVudHpbMF0gPSB0aGlzLl9fZGF0YV9fO1xuICAgIHRyeSB7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHopO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBkMy5ldmVudCA9IG87XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fb25GaWx0ZXIobGlzdGVuZXIsIGFyZ3VtZW50eikge1xuICB2YXIgbCA9IGQzX3NlbGVjdGlvbl9vbkxpc3RlbmVyKGxpc3RlbmVyLCBhcmd1bWVudHopO1xuICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgIHZhciB0YXJnZXQgPSB0aGlzLCByZWxhdGVkID0gZS5yZWxhdGVkVGFyZ2V0O1xuICAgIGlmICghcmVsYXRlZCB8fCAocmVsYXRlZCAhPT0gdGFyZ2V0ICYmICEocmVsYXRlZC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0YXJnZXQpICYgOCkpKSB7XG4gICAgICBsLmNhbGwodGFyZ2V0LCBlKTtcbiAgICB9XG4gIH07XG59XG5cbnZhciBkM19ldmVudF9kcmFnU2VsZWN0LFxuICAgIGQzX2V2ZW50X2RyYWdJZCA9IDA7XG5cbmZ1bmN0aW9uIGQzX2V2ZW50X2RyYWdTdXBwcmVzcyhub2RlKSB7XG4gIHZhciBuYW1lID0gXCIuZHJhZ3N1cHByZXNzLVwiICsgKytkM19ldmVudF9kcmFnSWQsXG4gICAgICBjbGljayA9IFwiY2xpY2tcIiArIG5hbWUsXG4gICAgICB3ID0gZDMuc2VsZWN0KGQzX3dpbmRvdyhub2RlKSlcbiAgICAgICAgICAub24oXCJ0b3VjaG1vdmVcIiArIG5hbWUsIGQzX2V2ZW50UHJldmVudERlZmF1bHQpXG4gICAgICAgICAgLm9uKFwiZHJhZ3N0YXJ0XCIgKyBuYW1lLCBkM19ldmVudFByZXZlbnREZWZhdWx0KVxuICAgICAgICAgIC5vbihcInNlbGVjdHN0YXJ0XCIgKyBuYW1lLCBkM19ldmVudFByZXZlbnREZWZhdWx0KTtcblxuICBpZiAoZDNfZXZlbnRfZHJhZ1NlbGVjdCA9PSBudWxsKSB7XG4gICAgZDNfZXZlbnRfZHJhZ1NlbGVjdCA9IFwib25zZWxlY3RzdGFydFwiIGluIG5vZGUgPyBmYWxzZVxuICAgICAgICA6IGQzX3ZlbmRvclN5bWJvbChub2RlLnN0eWxlLCBcInVzZXJTZWxlY3RcIik7XG4gIH1cblxuICBpZiAoZDNfZXZlbnRfZHJhZ1NlbGVjdCkge1xuICAgIHZhciBzdHlsZSA9IGQzX2RvY3VtZW50RWxlbWVudChub2RlKS5zdHlsZSxcbiAgICAgICAgc2VsZWN0ID0gc3R5bGVbZDNfZXZlbnRfZHJhZ1NlbGVjdF07XG4gICAgc3R5bGVbZDNfZXZlbnRfZHJhZ1NlbGVjdF0gPSBcIm5vbmVcIjtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbihzdXBwcmVzc0NsaWNrKSB7XG4gICAgdy5vbihuYW1lLCBudWxsKTtcbiAgICBpZiAoZDNfZXZlbnRfZHJhZ1NlbGVjdCkgc3R5bGVbZDNfZXZlbnRfZHJhZ1NlbGVjdF0gPSBzZWxlY3Q7XG4gICAgaWYgKHN1cHByZXNzQ2xpY2spIHsgLy8gc3VwcHJlc3MgdGhlIG5leHQgY2xpY2ssIGJ1dCBvbmx5IGlmIGl04oCZcyBpbW1lZGlhdGVcbiAgICAgIHZhciBvZmYgPSBmdW5jdGlvbigpIHsgdy5vbihjbGljaywgbnVsbCk7IH07XG4gICAgICB3Lm9uKGNsaWNrLCBmdW5jdGlvbigpIHsgZDNfZXZlbnRQcmV2ZW50RGVmYXVsdCgpOyBvZmYoKTsgfSwgdHJ1ZSk7XG4gICAgICBzZXRUaW1lb3V0KG9mZiwgMCk7XG4gICAgfVxuICB9O1xufVxuXG5kMy5tb3VzZSA9IGZ1bmN0aW9uKGNvbnRhaW5lcikge1xuICByZXR1cm4gZDNfbW91c2VQb2ludChjb250YWluZXIsIGQzX2V2ZW50U291cmNlKCkpO1xufTtcblxuLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTQ0MDgzXG52YXIgZDNfbW91c2VfYnVnNDQwODMgPSB0aGlzLm5hdmlnYXRvciAmJiAvV2ViS2l0Ly50ZXN0KHRoaXMubmF2aWdhdG9yLnVzZXJBZ2VudCkgPyAtMSA6IDA7XG5cbmZ1bmN0aW9uIGQzX21vdXNlUG9pbnQoY29udGFpbmVyLCBlKSB7XG4gIGlmIChlLmNoYW5nZWRUb3VjaGVzKSBlID0gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgdmFyIHN2ZyA9IGNvbnRhaW5lci5vd25lclNWR0VsZW1lbnQgfHwgY29udGFpbmVyO1xuICBpZiAoc3ZnLmNyZWF0ZVNWR1BvaW50KSB7XG4gICAgdmFyIHBvaW50ID0gc3ZnLmNyZWF0ZVNWR1BvaW50KCk7XG4gICAgaWYgKGQzX21vdXNlX2J1ZzQ0MDgzIDwgMCkge1xuICAgICAgdmFyIHdpbmRvdyA9IGQzX3dpbmRvdyhjb250YWluZXIpO1xuICAgICAgaWYgKHdpbmRvdy5zY3JvbGxYIHx8IHdpbmRvdy5zY3JvbGxZKSB7XG4gICAgICAgIHN2ZyA9IGQzLnNlbGVjdChcImJvZHlcIikuYXBwZW5kKFwic3ZnXCIpLnN0eWxlKHtcbiAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgIG1hcmdpbjogMCxcbiAgICAgICAgICBwYWRkaW5nOiAwLFxuICAgICAgICAgIGJvcmRlcjogXCJub25lXCJcbiAgICAgICAgfSwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgIHZhciBjdG0gPSBzdmdbMF1bMF0uZ2V0U2NyZWVuQ1RNKCk7XG4gICAgICAgIGQzX21vdXNlX2J1ZzQ0MDgzID0gIShjdG0uZiB8fCBjdG0uZSk7XG4gICAgICAgIHN2Zy5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGQzX21vdXNlX2J1ZzQ0MDgzKSBwb2ludC54ID0gZS5wYWdlWCwgcG9pbnQueSA9IGUucGFnZVk7XG4gICAgZWxzZSBwb2ludC54ID0gZS5jbGllbnRYLCBwb2ludC55ID0gZS5jbGllbnRZO1xuICAgIHBvaW50ID0gcG9pbnQubWF0cml4VHJhbnNmb3JtKGNvbnRhaW5lci5nZXRTY3JlZW5DVE0oKS5pbnZlcnNlKCkpO1xuICAgIHJldHVybiBbcG9pbnQueCwgcG9pbnQueV07XG4gIH1cbiAgdmFyIHJlY3QgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiBbZS5jbGllbnRYIC0gcmVjdC5sZWZ0IC0gY29udGFpbmVyLmNsaWVudExlZnQsIGUuY2xpZW50WSAtIHJlY3QudG9wIC0gY29udGFpbmVyLmNsaWVudFRvcF07XG59O1xuXG5kMy50b3VjaCA9IGZ1bmN0aW9uKGNvbnRhaW5lciwgdG91Y2hlcywgaWRlbnRpZmllcikge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIGlkZW50aWZpZXIgPSB0b3VjaGVzLCB0b3VjaGVzID0gZDNfZXZlbnRTb3VyY2UoKS5jaGFuZ2VkVG91Y2hlcztcbiAgaWYgKHRvdWNoZXMpIGZvciAodmFyIGkgPSAwLCBuID0gdG91Y2hlcy5sZW5ndGgsIHRvdWNoOyBpIDwgbjsgKytpKSB7XG4gICAgaWYgKCh0b3VjaCA9IHRvdWNoZXNbaV0pLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJldHVybiBkM19tb3VzZVBvaW50KGNvbnRhaW5lciwgdG91Y2gpO1xuICAgIH1cbiAgfVxufTtcbmQzLmJlaGF2aW9yID0ge307XG5cbmQzLmJlaGF2aW9yLmRyYWcgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGV2ZW50ID0gZDNfZXZlbnREaXNwYXRjaChkcmFnLCBcImRyYWdcIiwgXCJkcmFnc3RhcnRcIiwgXCJkcmFnZW5kXCIpLFxuICAgICAgb3JpZ2luID0gbnVsbCxcbiAgICAgIG1vdXNlZG93biA9IGRyYWdzdGFydChkM19ub29wLCBkMy5tb3VzZSwgZDNfd2luZG93LCBcIm1vdXNlbW92ZVwiLCBcIm1vdXNldXBcIiksXG4gICAgICB0b3VjaHN0YXJ0ID0gZHJhZ3N0YXJ0KGQzX2JlaGF2aW9yX2RyYWdUb3VjaElkLCBkMy50b3VjaCwgZDNfaWRlbnRpdHksIFwidG91Y2htb3ZlXCIsIFwidG91Y2hlbmRcIik7XG5cbiAgZnVuY3Rpb24gZHJhZygpIHtcbiAgICB0aGlzLm9uKFwibW91c2Vkb3duLmRyYWdcIiwgbW91c2Vkb3duKVxuICAgICAgICAub24oXCJ0b3VjaHN0YXJ0LmRyYWdcIiwgdG91Y2hzdGFydCk7XG4gIH1cblxuICBmdW5jdGlvbiBkcmFnc3RhcnQoaWQsIHBvc2l0aW9uLCBzdWJqZWN0LCBtb3ZlLCBlbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgdGFyZ2V0ID0gZDMuZXZlbnQudGFyZ2V0LmNvcnJlc3BvbmRpbmdFbGVtZW50IHx8IGQzLmV2ZW50LnRhcmdldCxcbiAgICAgICAgICBwYXJlbnQgPSB0aGF0LnBhcmVudE5vZGUsXG4gICAgICAgICAgZGlzcGF0Y2ggPSBldmVudC5vZih0aGF0LCBhcmd1bWVudHMpLFxuICAgICAgICAgIGRyYWdnZWQgPSAwLFxuICAgICAgICAgIGRyYWdJZCA9IGlkKCksXG4gICAgICAgICAgZHJhZ05hbWUgPSBcIi5kcmFnXCIgKyAoZHJhZ0lkID09IG51bGwgPyBcIlwiIDogXCItXCIgKyBkcmFnSWQpLFxuICAgICAgICAgIGRyYWdPZmZzZXQsXG4gICAgICAgICAgZHJhZ1N1YmplY3QgPSBkMy5zZWxlY3Qoc3ViamVjdCh0YXJnZXQpKS5vbihtb3ZlICsgZHJhZ05hbWUsIG1vdmVkKS5vbihlbmQgKyBkcmFnTmFtZSwgZW5kZWQpLFxuICAgICAgICAgIGRyYWdSZXN0b3JlID0gZDNfZXZlbnRfZHJhZ1N1cHByZXNzKHRhcmdldCksXG4gICAgICAgICAgcG9zaXRpb24wID0gcG9zaXRpb24ocGFyZW50LCBkcmFnSWQpO1xuXG4gICAgICBpZiAob3JpZ2luKSB7XG4gICAgICAgIGRyYWdPZmZzZXQgPSBvcmlnaW4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgICAgICAgZHJhZ09mZnNldCA9IFtkcmFnT2Zmc2V0LnggLSBwb3NpdGlvbjBbMF0sIGRyYWdPZmZzZXQueSAtIHBvc2l0aW9uMFsxXV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkcmFnT2Zmc2V0ID0gWzAsIDBdO1xuICAgICAgfVxuXG4gICAgICBkaXNwYXRjaCh7dHlwZTogXCJkcmFnc3RhcnRcIn0pO1xuXG4gICAgICBmdW5jdGlvbiBtb3ZlZCgpIHtcbiAgICAgICAgdmFyIHBvc2l0aW9uMSA9IHBvc2l0aW9uKHBhcmVudCwgZHJhZ0lkKSwgZHgsIGR5O1xuICAgICAgICBpZiAoIXBvc2l0aW9uMSkgcmV0dXJuOyAvLyB0aGlzIHRvdWNoIGRpZG7igJl0IG1vdmVcblxuICAgICAgICBkeCA9IHBvc2l0aW9uMVswXSAtIHBvc2l0aW9uMFswXTtcbiAgICAgICAgZHkgPSBwb3NpdGlvbjFbMV0gLSBwb3NpdGlvbjBbMV07XG4gICAgICAgIGRyYWdnZWQgfD0gZHggfCBkeTtcbiAgICAgICAgcG9zaXRpb24wID0gcG9zaXRpb24xO1xuXG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBcImRyYWdcIixcbiAgICAgICAgICB4OiBwb3NpdGlvbjFbMF0gKyBkcmFnT2Zmc2V0WzBdLFxuICAgICAgICAgIHk6IHBvc2l0aW9uMVsxXSArIGRyYWdPZmZzZXRbMV0sXG4gICAgICAgICAgZHg6IGR4LFxuICAgICAgICAgIGR5OiBkeVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZW5kZWQoKSB7XG4gICAgICAgIGlmICghcG9zaXRpb24ocGFyZW50LCBkcmFnSWQpKSByZXR1cm47IC8vIHRoaXMgdG91Y2ggZGlkbuKAmXQgZW5kXG4gICAgICAgIGRyYWdTdWJqZWN0Lm9uKG1vdmUgKyBkcmFnTmFtZSwgbnVsbCkub24oZW5kICsgZHJhZ05hbWUsIG51bGwpO1xuICAgICAgICBkcmFnUmVzdG9yZShkcmFnZ2VkKTtcbiAgICAgICAgZGlzcGF0Y2goe3R5cGU6IFwiZHJhZ2VuZFwifSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGRyYWcub3JpZ2luID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIG9yaWdpbjtcbiAgICBvcmlnaW4gPSB4O1xuICAgIHJldHVybiBkcmFnO1xuICB9O1xuXG4gIHJldHVybiBkMy5yZWJpbmQoZHJhZywgZXZlbnQsIFwib25cIik7XG59O1xuXG4vLyBXaGlsZSBpdCBpcyBwb3NzaWJsZSB0byByZWNlaXZlIGEgdG91Y2hzdGFydCBldmVudCB3aXRoIG1vcmUgdGhhbiBvbmUgY2hhbmdlZFxuLy8gdG91Y2gsIHRoZSBldmVudCBpcyBvbmx5IHNoYXJlZCBieSB0b3VjaGVzIG9uIHRoZSBzYW1lIHRhcmdldDsgZm9yIG5ld1xuLy8gdG91Y2hlcyB0YXJnZXR0aW5nIGRpZmZlcmVudCBlbGVtZW50cywgbXVsdGlwbGUgdG91Y2hzdGFydCBldmVudHMgYXJlXG4vLyByZWNlaXZlZCBldmVuIHdoZW4gdGhlIHRvdWNoZXMgc3RhcnQgc2ltdWx0YW5lb3VzbHkuIFNpbmNlIG11bHRpcGxlIHRvdWNoZXNcbi8vIGNhbm5vdCBtb3ZlIHRoZSBzYW1lIHRhcmdldCB0byBkaWZmZXJlbnQgbG9jYXRpb25zIGNvbmN1cnJlbnRseSB3aXRob3V0XG4vLyB0ZWFyaW5nIHRoZSBmYWJyaWMgb2Ygc3BhY2V0aW1lLCB3ZSBhbGxvdyB0aGUgZmlyc3QgdG91Y2ggdG8gd2luLlxuZnVuY3Rpb24gZDNfYmVoYXZpb3JfZHJhZ1RvdWNoSWQoKSB7XG4gIHJldHVybiBkMy5ldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5pZGVudGlmaWVyO1xufVxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHRoaXMuZDMgPSBkMywgZGVmaW5lKGQzKTtcbiAgZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiBtb2R1bGUuZXhwb3J0cykgbW9kdWxlLmV4cG9ydHMgPSBkMztcbiAgZWxzZSB0aGlzLmQzID0gZDM7XG59KCk7XG4iLCIvKipcbiAqIEFic3RyYWN0RmlsZSBpcyBhbiBhYnN0cmFjdCByZXByZXNlbnRhdGlvbiBvZiBhIGZpbGUuIFRoZXJlIGFyZSB0d28gaW1wbGVtZW50YXRpb246XG4gKiAxLiBSZW1vdGVGaWxlICAtIHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZSBvbiBhIHJlbW90ZSBzZXJ2ZXIgd2hpY2ggY2FuIGJlXG4gKiBmZXRjaGVkIGluIGNodW5rcywgZS5nLiB1c2luZyBhIFJhbmdlIHJlcXVlc3QuXG4gKiAyLiBMb2NhbFN0cmluZ0ZpbGUgaXMgYSByZXByZXNlbnRhdGlvbiBvZiBhIGZpbGUgdGhhdCB3YXMgY3JlYXRlZCBmcm9tIGlucHV0IHN0cmluZy4gXG4gKiBVc2VkIGZvciB0ZXN0aW5nIGFuZCBzbWFsbCBpbnB1dCBmaWxlcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy9pbXBvcnQgUSBmcm9tICdxJztcblxuY2xhc3MgQWJzdHJhY3RGaWxlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy9ob3cgdG8gcHJldmVudCBpbnN0YW50YXRpb24gb2YgdGhpcyBjbGFzcz8/P1xuICAgIC8vdGhpcyBjb2RlIGRvZXNuJ3QgcGFzcyBucG0gcnVuIGZsb3dcbi8vICAgIGlmIChuZXcudGFyZ2V0ID09PSBBYnN0cmFjdEZpbGUpIHsgXG4vLyAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29uc3RydWN0IEFic3RyYWN0RmlsZSBpbnN0YW5jZXMgZGlyZWN0bHlcIik7XG4vLyAgICB9XG4gIH1cblxuICBnZXRCeXRlcyhzdGFydDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6T2JqZWN0IHsvLzogUS5Qcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk1ldGhvZCBnZXRCeXRlcyBpcyBub3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cblxuICAvLyBSZWFkIHRoZSBlbnRpcmUgZmlsZSAtLSBub3QgcmVjb21tZW5kZWQgZm9yIGxhcmdlIGZpbGVzIVxuICBnZXRBbGwoKTpPYmplY3Qgey8vOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTWV0aG9kIGdldEFsbCBpcyBub3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cblxuICAvLyBSZWFkcyB0aGUgZW50aXJlIGZpbGUgYXMgYSBzdHJpbmcgKG5vdCBhbiBBcnJheUJ1ZmZlcikuXG4gIC8vIFRoaXMgZG9lcyBub3QgdXNlIHRoZSBjYWNoZS5cbiAgZ2V0QWxsU3RyaW5nKCk6T2JqZWN0IHsvLzogUS5Qcm9taXNlPHN0cmluZz4ge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNZXRob2QgZ2V0QWxsU3RyaW5nIGlzIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgbnVtYmVyIG9mIGJ5dGVzIGluIHRoZSByZW1vdGUgZmlsZS5cbiAgZ2V0U2l6ZSgpOk9iamVjdCB7Ly86IFEuUHJvbWlzZTxudW1iZXI+IHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTWV0aG9kIGdldFNpemUgaXMgbm90IGltcGxlbWVudGVkXCIpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQWJzdHJhY3RGaWxlO1xuIiwiLyoqXG4gKiBJbnRlcmZhY2UgZm9yIGFsaWdubWVudHMsIHNoYXJlZCBiZXR3ZWVuIEJBTSBhbmQgR0E0R0ggYmFja2VuZHMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG4gXG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2V9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHR5cGUgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi9Db250aWdJbnRlcnZhbCc7XG5cbi8vIFwiQ0lHQVJcIiBvcGVyYXRpb25zIGV4cHJlc3MgaG93IGEgc2VxdWVuY2UgYWxpZ25zIHRvIHRoZSByZWZlcmVuY2U6IGRvZXMgaXRcbi8vIGhhdmUgaW5zZXJ0aW9ucz8gZGVsZXRpb25zPyBGb3IgbW9yZSBiYWNrZ3JvdW5kLCBzZWUgdGhlIFNBTS9CQU0gcGFwZXIuXG5leHBvcnQgdHlwZSBDaWdhclN5bWJvbCA9ICdNJ3wnSSd8J0QnfCdOJ3wnUyd8J0gnfCdQJ3wnPSd8J1gnO1xuZXhwb3J0IHR5cGUgQ2lnYXJPcCA9IHtcbiAgb3A6IENpZ2FyU3ltYm9sO1xuICBsZW5ndGg6IG51bWJlclxufVxuXG4vLyBjb252ZXJ0cyBhIHN0cmluZyBpbnRvIGEgU3RyYW5kIGVsZW1lbnQuIE11c3QgYmUgJysnIG9yICctJy4gQW55IG90aGVyXG4vLyBzdHJpbmdzIHdpbGwgYmUgY29udmVydGVkIHRvICcuJy5cbmZ1bmN0aW9uIHN0clRvU3RyYW5kKHN0cjogc3RyaW5nKTogU3RyYW5kIHtcbiAgcmV0dXJuIHN0ciAmJiBzdHIgPT0gJysnID8gJysnIDogKHN0ciAmJiBzdHIgPT0gJy0nID8gJy0nIDogJy4nKTsgLy8gZWl0aGVyICssIC0gb3IgLlxufVxuXG5leHBvcnQgdHlwZSBTdHJhbmQgPSAnLScgfCAnKycgfCAnLic7XG5cbmV4cG9ydCB0eXBlIE1hdGVQcm9wZXJ0aWVzID0ge1xuICByZWY6ID9zdHJpbmc7XG4gIHBvczogbnVtYmVyO1xuICBzdHJhbmQ6IFN0cmFuZDtcbn1cblxuZXhwb3J0IHR5cGUgQWxpZ25tZW50ID0ge1xuICBwb3M6IG51bWJlcjtcbiAgcmVmOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgY2lnYXJPcHM6IENpZ2FyT3BbXTtcblxuICBnZXRLZXkoKTogc3RyaW5nO1xuICBnZXRTdHJhbmQoKTogU3RyYW5kO1xuICBnZXRRdWFsaXR5U2NvcmVzKCk6IG51bWJlcltdO1xuICBnZXRTZXF1ZW5jZSgpOiBzdHJpbmc7XG4gIGdldEludGVydmFsKCk6IENvbnRpZ0ludGVydmFsPHN0cmluZz47XG4gIGludGVyc2VjdHMoaW50ZXJ2YWw6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBib29sZWFuO1xuICBnZXRSZWZlcmVuY2VMZW5ndGgoKTogbnVtYmVyO1xuICBnZXRNYXRlUHJvcGVydGllcygpOiA/TWF0ZVByb3BlcnRpZXM7XG4gIGdldEluZmVycmVkSW5zZXJ0U2l6ZSgpOiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBBbGlnbm1lbnREYXRhU291cmNlID0ge1xuICByYW5nZUNoYW5nZWQ6IChuZXdSYW5nZTogR2Vub21lUmFuZ2UpID0+IHZvaWQ7XG4gIGdldEFsaWdubWVudHNJblJhbmdlOiAocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pID0+IEFsaWdubWVudFtdO1xuICBvbjogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkOyAgLy8gcmVhbGx5ID0+IEFsaWdubWVudERhdGFTb3VyY2VcbiAgb25jZTogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nKSA9PiB2b2lkO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHN0clRvU3RyYW5kXG59O1xuIiwiLyogQGZsb3cgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0dlbm9tZVJhbmdlfSBmcm9tICcuL3R5cGVzJztcblxuaW1wb3J0IEludGVydmFsIGZyb20gJy4vSW50ZXJ2YWwnO1xuaW1wb3J0IHtmbGF0TWFwfSBmcm9tICcuL3V0aWxzJztcblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBjbG9zZWQgaW50ZXJ2YWwgb24gdGhlIGdlbm9tZTogY29udGlnOnN0YXJ0LXN0b3AuXG4gKlxuICogVGhlIGNvbnRpZyBtYXkgYmUgZWl0aGVyIGEgc3RyaW5nIChcImNocjIyXCIpIG9yIGEgbnVtYmVyIChpbiBjYXNlIHRoZSBjb250aWdzXG4gKiBhcmUgaW5kZXhlZCwgZm9yIGV4YW1wbGUpLlxuICovXG5jbGFzcyBDb250aWdJbnRlcnZhbDxUOiAobnVtYmVyfHN0cmluZyk+IHtcbiAgY29udGlnOiBUO1xuICBpbnRlcnZhbDogSW50ZXJ2YWw7XG5cbiAgY29uc3RydWN0b3IoY29udGlnOiBULCBzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpIHtcbiAgICB0aGlzLmNvbnRpZyA9IGNvbnRpZztcbiAgICB0aGlzLmludGVydmFsID0gbmV3IEludGVydmFsKHN0YXJ0LCBzdG9wKTtcbiAgfVxuXG4gIC8vIFRPRE86IG1ha2UgdGhlc2UgZ2V0dGVyIG1ldGhvZHMgJiBzd2l0Y2ggdG8gQmFiZWwuXG4gIHN0YXJ0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJ2YWwuc3RhcnQ7XG4gIH1cbiAgc3RvcCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmludGVydmFsLnN0b3A7XG4gIH1cbiAgbGVuZ3RoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJ2YWwubGVuZ3RoKCk7XG4gIH1cblxuICAvLyBJbnRlcnNlY3RzIGZ1bmN0aW9uLCBhbGxvd2luZyBmb3IgJ2NocjE3JyB2cy4gJzE3Jy1zdHlsZSBtaXNtYXRjaGVzLlxuICBpbnRlcnNlY3RzKG90aGVyOiBDb250aWdJbnRlcnZhbDxUPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5jaHJPbkNvbnRpZyhvdGhlci5jb250aWcpICYmXG4gICAgICAgICAgICB0aGlzLmludGVydmFsLmludGVyc2VjdHMob3RoZXIuaW50ZXJ2YWwpKTtcbiAgfVxuXG4gIGNvbnRhaW5zSW50ZXJ2YWwob3RoZXI6IENvbnRpZ0ludGVydmFsPFQ+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNock9uQ29udGlnKG90aGVyLmNvbnRpZykgJiZcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwuY29udGFpbnNJbnRlcnZhbChvdGhlci5pbnRlcnZhbCkpO1xuICB9XG5cbiAgaXNBZGphY2VudFRvKG90aGVyOiBDb250aWdJbnRlcnZhbDxUPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5jaHJPbkNvbnRpZyhvdGhlci5jb250aWcpICYmXG4gICAgICAgICAgICAodGhpcy5zdGFydCgpID09IDEgKyBvdGhlci5zdG9wKCkgfHxcbiAgICAgICAgICAgICB0aGlzLnN0b3AoKSArIDEgPT0gb3RoZXIuc3RhcnQoKSkpO1xuICB9XG5cbiAgaXNDb3ZlcmVkQnkoaW50ZXJ2YWxzOiBDb250aWdJbnRlcnZhbDxUPltdKTogYm9vbGVhbiB7XG4gICAgdmFyIGl2cyA9IGludGVydmFscy5maWx0ZXIoaXYgPT4gdGhpcy5jaHJPbkNvbnRpZyhpdi5jb250aWcpKVxuICAgICAgICAgICAgICAgICAgICAgICAubWFwKGl2ID0+IGl2LmludGVydmFsKTtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnZhbC5pc0NvdmVyZWRCeShpdnMpO1xuICB9XG5cbiAgY29udGFpbnNMb2N1cyhjb250aWc6IFQsIHBvc2l0aW9uOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jaHJPbkNvbnRpZyhjb250aWcpICYmXG4gICAgICAgICAgIHRoaXMuaW50ZXJ2YWwuY29udGFpbnMocG9zaXRpb24pO1xuICB9XG5cbiAgLy8gSXMgdGhpcyByZWFkIG9uIHRoZSBnaXZlbiBjb250aWc/IChhbGxvd2luZyBmb3IgY2hyMTcgdnMgMTctc3R5bGUgbWlzbWF0Y2hlcylcbiAgY2hyT25Db250aWcoY29udGlnOiBUKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNvbnRpZyA9PT0gY29udGlnIHx8XG4gICAgICAgICAgICB0aGlzLmNvbnRpZyA9PT0gJ2NocicgKyBjb250aWcgfHxcbiAgICAgICAgICAgICdjaHInICsgdGhpcy5jb250aWcgPT09IGNvbnRpZyk7XG4gIH1cblxuICBjbG9uZSgpOiBDb250aWdJbnRlcnZhbDxUPiB7XG4gICAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbCh0aGlzLmNvbnRpZywgdGhpcy5pbnRlcnZhbC5zdGFydCwgdGhpcy5pbnRlcnZhbC5zdG9wKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaW1pbGFyIHRvIEludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMsIGJ1dCBvbmx5IGNvbnNpZGVycyB0aG9zZSBpbnRlcnZhbHNcbiAgICogb24gdGhlIHNhbWUgY29udGlnIGFzIHRoaXMgb25lLlxuICAgKi9cbiAgY29tcGxlbWVudEludGVydmFscyhpbnRlcnZhbHM6IENvbnRpZ0ludGVydmFsPFQ+W10pOiBDb250aWdJbnRlcnZhbDxUPltdIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnZhbC5jb21wbGVtZW50SW50ZXJ2YWxzKFxuICAgICAgICBmbGF0TWFwKGludGVydmFscywgY2kgPT4gdGhpcy5jaHJPbkNvbnRpZyhjaS5jb250aWcpID8gW2NpLmludGVydmFsXSA6IFtdKSlcbiAgICAgICAgLm1hcChpdiA9PiBuZXcgQ29udGlnSW50ZXJ2YWwodGhpcy5jb250aWcsIGl2LnN0YXJ0LCBpdi5zdG9wKSk7XG4gIH1cblxuICAvKlxuICBUaGlzIG1ldGhvZCBkb2Vzbid0IHR5cGVjaGVjay4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9mbG93L2lzc3Vlcy8zODhcbiAgaXNBZnRlckludGVydmFsKG90aGVyOiBDb250aWdJbnRlcnZhbCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5jb250aWcgPiBvdGhlci5jb250aWcgfHxcbiAgICAgICAgICAgICh0aGlzLmNvbnRpZyA9PT0gb3RoZXIuY29udGlnICYmIHRoaXMuc3RhcnQoKSA+IG90aGVyLnN0YXJ0KCkpKTtcbiAgfVxuICAqL1xuXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuY29udGlnfToke3RoaXMuc3RhcnQoKX0tJHt0aGlzLnN0b3AoKX1gO1xuICB9XG5cbiAgdG9HZW5vbWVSYW5nZSgpOiBHZW5vbWVSYW5nZSB7XG4gICAgaWYgKCEodHlwZW9mIHRoaXMuY29udGlnID09PSAnc3RyaW5nJyB8fCB0aGlzLmNvbnRpZyBpbnN0YW5jZW9mIFN0cmluZykpIHtcbiAgICAgIHRocm93ICdDYW5ub3QgY29udmVydCBudW1lcmljIENvbnRpZ0ludGVydmFsIHRvIEdlbm9tZVJhbmdlJztcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRpZzogdGhpcy5jb250aWcsXG4gICAgICBzdGFydDogdGhpcy5zdGFydCgpLFxuICAgICAgc3RvcDogdGhpcy5zdG9wKClcbiAgICB9O1xuICB9XG5cbiAgcm91bmQoc2l6ZTogbnVtYmVyLCB6ZXJvQmFzZWQ6IGJvb2xlYW4pOiBDb250aWdJbnRlcnZhbDxUPiB7XG4gICAgdmFyIG5ld0ludGVydmFsID0gdGhpcy5pbnRlcnZhbC5yb3VuZChzaXplLCB6ZXJvQmFzZWQpO1xuICAgIHJldHVybiBuZXcgQ29udGlnSW50ZXJ2YWwodGhpcy5jb250aWcsIG5ld0ludGVydmFsLnN0YXJ0LCBuZXdJbnRlcnZhbC5zdG9wKTtcbiAgfVxuXG4gIC8vIENvbXBhcmF0b3IgZm9yIHVzZSB3aXRoIEFycmF5LnByb3RvdHlwZS5zb3J0XG4gIHN0YXRpYyBjb21wYXJlPFQ6IChzdHJpbmd8bnVtYmVyKT4oYTogQ29udGlnSW50ZXJ2YWw8VD4sIGI6IENvbnRpZ0ludGVydmFsPFQ+KTogbnVtYmVyIHtcbiAgICBpZiAoYS5jb250aWcudG9TdHJpbmcoKSA+IGIuY29udGlnLnRvU3RyaW5nKCkpIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9IGVsc2UgaWYgKGEuY29udGlnLnRvU3RyaW5nKCkgPCBiLmNvbnRpZy50b1N0cmluZygpKSB7XG4gICAgICByZXR1cm4gKzE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhLnN0YXJ0KCkgLSBiLnN0YXJ0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gU29ydCBhbiBhcnJheSBvZiBpbnRlcnZhbHMgJiBjb2FsZXNjZSBhZGphY2VudC9vdmVybGFwcGluZyByYW5nZXMuXG4gIC8vIE5COiB0aGlzIG1heSByZS1vcmRlciB0aGUgaW50ZXJ2YWxzIHBhcmFtZXRlclxuICBzdGF0aWMgY29hbGVzY2U8VDogKHN0cmluZ3xudW1iZXIpPihpbnRlcnZhbHM6IENvbnRpZ0ludGVydmFsPFQ+W10pOiBDb250aWdJbnRlcnZhbDxUPltdIHtcbiAgICBpbnRlcnZhbHMuc29ydChDb250aWdJbnRlcnZhbC5jb21wYXJlKTtcblxuICAgIHZhciBycyA9IFtdO1xuICAgIGludGVydmFscy5mb3JFYWNoKHIgPT4ge1xuICAgICAgaWYgKHJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBycy5wdXNoKHIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBsYXN0UiA9IHJzW3JzLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKHIuaW50ZXJzZWN0cyhsYXN0UikgfHwgci5pc0FkamFjZW50VG8obGFzdFIpKSB7XG4gICAgICAgIGxhc3RSID0gcnNbcnMubGVuZ3RoIC0gMV0gPSBsYXN0Ui5jbG9uZSgpO1xuICAgICAgICBsYXN0Ui5pbnRlcnZhbC5zdG9wID0gTWF0aC5tYXgoci5pbnRlcnZhbC5zdG9wLCBsYXN0Ui5pbnRlcnZhbC5zdG9wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJzLnB1c2gocik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBzdGF0aWMgZnJvbUdlbm9tZVJhbmdlKHJhbmdlOiBHZW5vbWVSYW5nZSk6IENvbnRpZ0ludGVydmFsPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLnRvU3RyaW5nKCksIHJhbmdlLnN0YXJ0LCByYW5nZS5zdG9wKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRpZ0ludGVydmFsO1xuIiwiLyoqXG4gKiBDb250cm9scyBmb3Igem9vbWluZyB0byBwYXJ0aWN1bGFyIHJhbmdlcyBvZiB0aGUgZ2Vub21lLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2UsIFBhcnRpYWxHZW5vbWVSYW5nZX0gZnJvbSAnLi90eXBlcyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEludGVydmFsIGZyb20gJy4vSW50ZXJ2YWwnO1xuXG50eXBlIFByb3BzID0ge1xuICByYW5nZTogP0dlbm9tZVJhbmdlO1xuICBjb250aWdMaXN0OiBzdHJpbmdbXTtcbiAgb25DaGFuZ2U6IChuZXdSYW5nZTogR2Vub21lUmFuZ2UpPT52b2lkO1xufTtcblxuY2xhc3MgQ29udHJvbHMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcbiAgcHJvcHM6IFByb3BzO1xuICBzdGF0ZTogdm9pZDsgIC8vIG5vIHN0YXRlXG5cbiAgY29uc3RydWN0b3IocHJvcHM6IE9iamVjdCkge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgfVxuXG4gIG1ha2VSYW5nZSgpOiBHZW5vbWVSYW5nZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRpZzogdGhpcy5yZWZzLmNvbnRpZy52YWx1ZSxcbiAgICAgIHN0YXJ0OiBOdW1iZXIodGhpcy5yZWZzLnN0YXJ0LnZhbHVlKSxcbiAgICAgIHN0b3A6IE51bWJlcih0aGlzLnJlZnMuc3RvcC52YWx1ZSlcbiAgICB9O1xuICB9XG5cbiAgY29tcGxldGVSYW5nZShyYW5nZTogP1BhcnRpYWxHZW5vbWVSYW5nZSk6IEdlbm9tZVJhbmdlIHtcbiAgICByYW5nZSA9IHJhbmdlIHx8IHt9O1xuICAgIGlmIChyYW5nZS5zdGFydCAmJiByYW5nZS5zdG9wID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIENvbnN0cnVjdCBhIHJhbmdlIGNlbnRlcmVkIGFyb3VuZCBhIHZhbHVlLiBUaGlzIG1hdGNoZXMgSUdWLlxuICAgICAgcmFuZ2Uuc3RvcCA9IHJhbmdlLnN0YXJ0ICsgMjA7XG4gICAgICByYW5nZS5zdGFydCAtPSAyMDtcbiAgICB9XG5cbiAgICBpZiAocmFuZ2UuY29udGlnKSB7XG4gICAgICAvLyBUaGVyZSBhcmUgbWFqb3IgcGVyZm9ybWFuY2UgaXNzdWVzIHdpdGggaGF2aW5nIGEgJ2NocicgbWlzbWF0Y2ggaW4gdGhlXG4gICAgICAvLyBnbG9iYWwgbG9jYXRpb24gb2JqZWN0LlxuICAgICAgY29uc3QgY29udGlnID0gcmFuZ2UuY29udGlnO1xuICAgICAgdmFyIGFsdENvbnRpZyA9IF8uZmluZCh0aGlzLnByb3BzLmNvbnRpZ0xpc3QsIHJlZiA9PiB1dGlscy5pc0Nock1hdGNoKGNvbnRpZywgcmVmKSk7XG4gICAgICBpZiAoYWx0Q29udGlnKSByYW5nZS5jb250aWcgPSBhbHRDb250aWc7XG4gICAgfVxuXG4gICAgcmV0dXJuIChfLmV4dGVuZChfLmNsb25lKHRoaXMucHJvcHMucmFuZ2UpLCByYW5nZSkgOiBhbnkpO1xuICB9XG5cbiAgaGFuZGxlQ29udGlnQ2hhbmdlKGU6IFN5bnRoZXRpY0V2ZW50PD4pIHtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMuY29tcGxldGVSYW5nZSh7Y29udGlnOiB0aGlzLnJlZnMuY29udGlnLnZhbHVlfSkpO1xuICB9XG5cbiAgaGFuZGxlRm9ybVN1Ym1pdChlOiBTeW50aGV0aWNFdmVudDw+KSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciByYW5nZSA9IHRoaXMuY29tcGxldGVSYW5nZSh1dGlscy5wYXJzZVJhbmdlKHRoaXMucmVmcy5wb3NpdGlvbi52YWx1ZSkpO1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2UocmFuZ2UpO1xuICB9XG5cbiAgLy8gU2V0cyB0aGUgdmFsdWVzIG9mIHRoZSBpbnB1dCBlbGVtZW50cyB0byBtYXRjaCBgcHJvcHMucmFuZ2VgLlxuICB1cGRhdGVSYW5nZVVJKCkge1xuICAgIGNvbnN0IHIgPSB0aGlzLnByb3BzLnJhbmdlO1xuICAgIGlmICghcikgcmV0dXJuO1xuXG4gICAgdGhpcy5yZWZzLnBvc2l0aW9uLnZhbHVlID0gdXRpbHMuZm9ybWF0SW50ZXJ2YWwobmV3IEludGVydmFsKHIuc3RhcnQsIHIuc3RvcCkpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuY29udGlnTGlzdCkge1xuICAgICAgdmFyIGNvbnRpZ0lkeCA9IHRoaXMucHJvcHMuY29udGlnTGlzdC5pbmRleE9mKHIuY29udGlnKTtcbiAgICAgIHRoaXMucmVmcy5jb250aWcuc2VsZWN0ZWRJbmRleCA9IGNvbnRpZ0lkeDtcbiAgICB9XG4gIH1cblxuICB6b29tSW4oZTogYW55KSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuem9vbUJ5RmFjdG9yKDAuNSk7XG4gIH1cblxuICB6b29tT3V0KGU6IGFueSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnpvb21CeUZhY3RvcigyLjApO1xuICB9XG5cbiAgem9vbUJ5RmFjdG9yKGZhY3RvcjogbnVtYmVyKSB7XG4gICAgdmFyIHIgPSB0aGlzLnByb3BzLnJhbmdlO1xuICAgIGlmICghcikgcmV0dXJuO1xuXG4gICAgdmFyIGl2ID0gdXRpbHMuc2NhbGVSYW5nZShuZXcgSW50ZXJ2YWwoci5zdGFydCwgci5zdG9wKSwgZmFjdG9yKTtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHtcbiAgICAgIGNvbnRpZzogci5jb250aWcsXG4gICAgICBzdGFydDogaXYuc3RhcnQsXG4gICAgICBzdG9wOiBpdi5zdG9wXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICB2YXIgY29udGlnT3B0aW9ucyA9IHRoaXMucHJvcHMuY29udGlnTGlzdFxuICAgICAgICA/IHRoaXMucHJvcHMuY29udGlnTGlzdC5tYXAoKGNvbnRpZywgaSkgPT4gPG9wdGlvbiBrZXk9e2l9Pntjb250aWd9PC9vcHRpb24+KVxuICAgICAgICA6IG51bGw7XG5cbiAgICAvLyBOb3RlOiBpbnB1dCB2YWx1ZXMgYXJlIHNldCBpbiBjb21wb25lbnREaWRVcGRhdGUuXG4gICAgcmV0dXJuIChcbiAgICAgIDxmb3JtIGNsYXNzTmFtZT0nY29udHJvbHMnIG9uU3VibWl0PXt0aGlzLmhhbmRsZUZvcm1TdWJtaXQuYmluZCh0aGlzKX0+XG4gICAgICAgIDxzZWxlY3QgcmVmPSdjb250aWcnIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNvbnRpZ0NoYW5nZS5iaW5kKHRoaXMpfT5cbiAgICAgICAgICB7Y29udGlnT3B0aW9uc31cbiAgICAgICAgPC9zZWxlY3Q+eycgJ31cbiAgICAgICAgPGlucHV0IHJlZj0ncG9zaXRpb24nIHR5cGU9J3RleHQnIC8+eycgJ31cbiAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9J2J0bi1zdWJtaXQnIG9uQ2xpY2s9e3RoaXMuaGFuZGxlRm9ybVN1Ym1pdC5iaW5kKHRoaXMpfT5HbzwvYnV0dG9uPnsnICd9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSd6b29tLWNvbnRyb2xzJz5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT0nYnRuLXpvb20tb3V0JyBvbkNsaWNrPXt0aGlzLnpvb21PdXQuYmluZCh0aGlzKX0+PC9idXR0b24+eycgJ31cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT0nYnRuLXpvb20taW4nIG9uQ2xpY2s9e3RoaXMuem9vbUluLmJpbmQodGhpcyl9PjwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZm9ybT5cbiAgICApO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogT2JqZWN0KSB7XG4gICAgaWYgKCFfLmlzRXF1YWwocHJldlByb3BzLnJhbmdlLCB0aGlzLnByb3BzLnJhbmdlKSkge1xuICAgICAgdGhpcy51cGRhdGVSYW5nZVVJKCk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy51cGRhdGVSYW5nZVVJKCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDb250cm9scztcbiIsIi8qKlxuICogVGhpcyBzZXJ2ZXMgYXMgYSBicmlkZ2UgYmV0d2VlbiBvcmcuZ2E0Z2guR0FSZWFkQWxpZ25tZW50IGFuZCB0aGVcbiAqIHBpbGV1cC5qcyBBbGlnbm1lbnQgdHlwZS5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0NpZ2FyT3AsIE1hdGVQcm9wZXJ0aWVzLCBTdHJhbmR9IGZyb20gJy4vQWxpZ25tZW50JztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IFNhbVJlYWQgZnJvbSAnLi9kYXRhL1NhbVJlYWQnO1xuXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2dhNGdoL2dhNGdoLXNjaGVtYXMvYmxvYi9tYXN0ZXIvc3JjL21haW4vcHJvdG8vZ2E0Z2gvcmVhZHMucHJvdG9cbi8vIERhdGEgY2FuIGJlIHF1ZXJpZWQgYXQgaHR0cDovLzFrZy5nYTRnaC5vcmcvcmVhZHMvc2VhcmNoXG52YXIgT1BfTUFQID0ge1xuICBBTElHTk1FTlRfTUFUQ0g6ICdNJyxcbiAgSU5TRVJUOiAnSScsXG4gIERFTEVURTogJ0QnLFxuICBTS0lQOiAnTicsXG4gIENMSVBfU09GVDogJ1MnLFxuICBDTElQX0hBUkQ6ICdIJyxcbiAgUEFEOiAnUCcsXG4gIFNFUVVFTkNFX01BVENIOiAnPScsXG4gIFNFUVVFTkNFX01JU01BVENIOiAnWCdcbn07XG5cbi8qKlxuICogVGhpcyBjbGFzcyBhY3RzIGFzIGEgYnJpZGdlIGJldHdlZW4gb3JnLmdhNGdoLkdBUmVhZEFsaWdubWVudCBhbmQgdGhlXG4gKiBwaWxldXAuanMgQWxpZ25tZW50IHR5cGUuXG4gKi9cbmNsYXNzIEdBNEdIQWxpZ25tZW50IC8qIGltcGxlbWVudHMgQWxpZ25tZW50ICovIHtcbiAgcG9zOiBudW1iZXI7XG4gIHJlZjogc3RyaW5nO1xuICBhbGlnbm1lbnQ6IE9iamVjdDtcbiAgbmFtZTogc3RyaW5nO1xuICBjaWdhck9wczogQ2lnYXJPcFtdO1xuICBfaW50ZXJ2YWw6IENvbnRpZ0ludGVydmFsPHN0cmluZz47XG5cbiAgLy8gYWxpZ25tZW50IGZvbGxvd3Mgb3JnLmdhNGdoLkdBUmVhZEFsaWdubWVudFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ2E0Z2gvZ2E0Z2gtc2NoZW1hcy9ibG9iL21hc3Rlci9zcmMvbWFpbi9wcm90by9nYTRnaC9yZWFkcy5wcm90b1xuICBjb25zdHJ1Y3RvcihhbGlnbm1lbnQ6IE9iamVjdCkge1xuICAgIHRoaXMuYWxpZ25tZW50ID0gYWxpZ25tZW50O1xuICAgIHRoaXMucG9zID0gcGFyc2VJbnQoYWxpZ25tZW50LmFsaWdubWVudC5wb3NpdGlvbi5wb3NpdGlvbik7XG4gICAgdGhpcy5yZWYgPSBhbGlnbm1lbnQuYWxpZ25tZW50LnBvc2l0aW9uLnJlZmVyZW5jZU5hbWU7XG4gICAgdGhpcy5uYW1lID0gYWxpZ25tZW50LmZyYWdtZW50TmFtZTtcblxuICAgIHRoaXMuY2lnYXJPcHMgPSBhbGlnbm1lbnQuYWxpZ25tZW50LmNpZ2FyLm1hcChcbiAgICAgICAgKHtvcGVyYXRpb24sIG9wZXJhdGlvbkxlbmd0aDogbGVuZ3RofSkgPT4gKHsgb3A6IE9QX01BUFtvcGVyYXRpb25dLCBsZW5ndGg6IHBhcnNlSW50KGxlbmd0aCl9KVxuICAgICk7XG4gICAgdGhpcy5faW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwodGhpcy5yZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MgKyB0aGlzLmdldFJlZmVyZW5jZUxlbmd0aCgpIC0gMSk7XG4gIH1cblxuICBnZXRLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gR0E0R0hBbGlnbm1lbnQua2V5RnJvbUdBNEdIUmVzcG9uc2UodGhpcy5hbGlnbm1lbnQpO1xuICB9XG5cbiAgZ2V0U3RyYW5kKCk6IFN0cmFuZCB7XG4gICAgcmV0dXJuIHRoaXMuYWxpZ25tZW50LmFsaWdubWVudC5wb3NpdGlvbi5zdHJhbmQgPT0gJ05FR19TVFJBTkQnID8gJy0nIDogJysnO1xuICB9XG5cbiAgZ2V0UXVhbGl0eVNjb3JlcygpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuYWxpZ25tZW50LmFsaWduZWRRdWFsaXR5O1xuICB9XG5cbiAgZ2V0U2VxdWVuY2UoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5hbGlnbm1lbnQuYWxpZ25lZFNlcXVlbmNlO1xuICB9XG5cbiAgZ2V0SW50ZXJ2YWwoKTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVydmFsO1xuICB9XG5cbiAgaW50ZXJzZWN0cyhpbnRlcnZhbDogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpbnRlcnZhbC5pbnRlcnNlY3RzKHRoaXMuZ2V0SW50ZXJ2YWwoKSk7XG4gIH1cblxuICBnZXRSZWZlcmVuY2VMZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gU2FtUmVhZC5yZWZlcmVuY2VMZW5ndGhGcm9tT3BzKHRoaXMuY2lnYXJPcHMpO1xuICB9XG5cbiAgZ2V0TWF0ZVByb3BlcnRpZXMoKTogP01hdGVQcm9wZXJ0aWVzIHtcbiAgICB2YXIgbmV4dCA9IHRoaXMuYWxpZ25tZW50Lm5leHRNYXRlUG9zaXRpb247XG4gICAgcmV0dXJuIG5leHQgJiYge1xuICAgICAgcmVmOiBuZXh0LnJlZmVyZW5jZU5hbWUsXG4gICAgICBwb3M6IHBhcnNlSW50KG5leHQucG9zaXRpb24pLFxuICAgICAgc3RyYW5kOiBuZXh0LnN0cmFuZCA9PSAnTkVHX1NUUkFORCcgPyAnLScgOiAnKydcbiAgICB9O1xuICB9XG5cbiAgZ2V0SW5mZXJyZWRJbnNlcnRTaXplKCk6IG51bWJlciB7XG4gICAgLy8gVE9ETzogU0FNL0JBTSB3cml0ZXMgdGhpcyBleHBsaWNpdGx5LiBEb2VzIEdBNEdIIHJlYWxseSBub3Q/XG4gICAgdmFyIG0gPSB0aGlzLmdldE1hdGVQcm9wZXJ0aWVzKCk7XG4gICAgaWYgKG0gJiYgbS5yZWYgPT0gdGhpcy5yZWYpIHtcbiAgICAgIHZhciBzdGFydDEgPSB0aGlzLl9pbnRlcnZhbC5zdGFydCgpLFxuICAgICAgICAgIHN0b3AxID0gdGhpcy5faW50ZXJ2YWwuc3RvcCgpLFxuICAgICAgICAgIHN0YXJ0MiA9IG0ucG9zLFxuICAgICAgICAgIHN0b3AyID0gc3RhcnQyICsgdGhpcy5nZXRTZXF1ZW5jZSgpLmxlbmd0aDtcbiAgICAgIHJldHVybiBNYXRoLm1heChzdG9wMSwgc3RvcDIpIC0gTWF0aC5taW4oc3RhcnQxLCBzdGFydDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cblxuICAvLyBUaGlzIGlzIGV4cG9zZWQgYXMgYSBzdGF0aWMgbWV0aG9kIHRvIGZhY2lsaXRhdGUgYW4gb3B0aW1pemF0aW9uIGluIEdBNEdIQWxpZ25tZW50U291cmNlLlxuICBzdGF0aWMga2V5RnJvbUdBNEdIUmVzcG9uc2UoYWxpZ25tZW50OiBPYmplY3QpOiBzdHJpbmcge1xuICAgIC8vIHRoaXMuYWxpZ25tZW50LmlkIHdvdWxkIGJlIGFwcGVhbGluZyBoZXJlLCBidXQgaXQncyBub3QgYWN0dWFsbHkgdW5pcXVlIVxuICAgIHJldHVybiBhbGlnbm1lbnQuZnJhZ21lbnROYW1lICsgJzonICsgYWxpZ25tZW50LnJlYWROdW1iZXI7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBHQTRHSEFsaWdubWVudDtcbiIsIi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgY2xvc2VkIG51bWVyaWMgaW50ZXJ2YWwsIFtzdGFydCwgc3RvcF0uXG4gKlxuICogQGZsb3dcbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuY2xhc3MgSW50ZXJ2YWwge1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG5cbiAgLy8gUmVwcmVzZW50cyBbc3RhcnQsIHN0b3BdIC0tIGJvdGggZW5kcyBhcmUgaW5jbHVzaXZlLlxuICAvLyBJZiBzdG9wIDwgc3RhcnQsIHRoZW4gdGhpcyBpcyBhbiBlbXB0eSBpbnRlcnZhbC5cbiAgY29uc3RydWN0b3Ioc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKSB7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuc3RvcCA9IHN0b3A7XG4gIH1cblxuICAvLyBUT0RPOiBtYWtlIHRoaXMgYSBnZXR0ZXIgbWV0aG9kICYgc3dpdGNoIHRvIEJhYmVsLlxuICBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgdGhpcy5zdG9wIC0gdGhpcy5zdGFydCArIDEpO1xuICB9XG5cbiAgaW50ZXJzZWN0KG90aGVyOiBJbnRlcnZhbCk6IEludGVydmFsIHtcbiAgICByZXR1cm4gbmV3IEludGVydmFsKE1hdGgubWF4KHRoaXMuc3RhcnQsIG90aGVyLnN0YXJ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKHRoaXMuc3RvcCwgb3RoZXIuc3RvcCkpO1xuICB9XG5cbiAgaW50ZXJzZWN0cyhvdGhlcjogSW50ZXJ2YWwpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdGFydCA8PSBvdGhlci5zdG9wICYmIG90aGVyLnN0YXJ0IDw9IHRoaXMuc3RvcDtcbiAgfVxuXG4gIGNvbnRhaW5zKHZhbHVlOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdmFsdWUgPj0gdGhpcy5zdGFydCAmJiB2YWx1ZSA8PSB0aGlzLnN0b3A7XG4gIH1cblxuICBjb250YWluc0ludGVydmFsKG90aGVyOiBJbnRlcnZhbCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5zKG90aGVyLnN0YXJ0KSAmJiB0aGlzLmNvbnRhaW5zKG90aGVyLnN0b3ApO1xuICB9XG5cbiAgLy8gUm91bmRzIHRoZSBpbnRlcnZhbCB0byB0aGUgbmVhcmVzdCBtdWx0aXBsZXMgb2Ygc2l6ZS5cbiAgLy8gT3B0aW9uYWwgbWluaW11bSBwYXJhbWV0ZXIgZGV0ZXJtaW5lcyB0aGUgbG93ZXN0XG4gIC8vIHBvc3NpYmxlIHZhbHVlIGZvciB0aGUgc3RhcnQgb2YgdGhlIHJlc3VsdGluZyBJbnRlcnZhbC5cbiAgcm91bmQoc2l6ZTogbnVtYmVyLCB6ZXJvQmFzZWQ6IGJvb2xlYW4pOiBJbnRlcnZhbCB7XG4gICAgdmFyIG1pbmltdW0gPSB6ZXJvQmFzZWQgPyAwIDogMTtcbiAgICB2YXIgcm91bmREb3duID0geCA9PiB4IC0geCAlIHNpemU7XG4gICAgdmFyIG5ld1N0YXJ0ID0gTWF0aC5tYXgobWluaW11bSwgcm91bmREb3duKHRoaXMuc3RhcnQpKSxcbiAgICAgICAgbmV3U3RvcCA9IHJvdW5kRG93bih0aGlzLnN0b3AgKyBzaXplIC0gMSk7XG5cbiAgICByZXR1cm4gbmV3IEludGVydmFsKG5ld1N0YXJ0LCBuZXdTdG9wKTtcbiAgfVxuXG4gIGNsb25lKCk6IEludGVydmFsIHtcbiAgICByZXR1cm4gbmV3IEludGVydmFsKHRoaXMuc3RhcnQsIHRoaXMuc3RvcCk7XG4gIH1cblxuICAvKipcbiAgICogSXMgdGhpcyBJbnRlcnZhbCBlbnRpcmVseSBjb3ZlcmVkIGJ5IHRoZSB1bmlvbiBvZiB0aGUgcmFuZ2VzP1xuICAgKiBUaGUgcmFuZ2VzIHBhcmFtZXRlciBtdXN0IGJlIHNvcnRlZCBieSByYW5nZS5zdGFydFxuICAgKi9cbiAgaXNDb3ZlcmVkQnkocmFuZ2VzOiBJbnRlcnZhbFtdKTogYm9vbGVhbiB7XG4gICAgdmFyIHJlbWFpbmluZyA9IHRoaXMuY2xvbmUoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHIgPSByYW5nZXNbaV07XG4gICAgICBpZiAoaSAmJiByLnN0YXJ0IDwgcmFuZ2VzW2kgLSAxXS5zdGFydCkge1xuICAgICAgICB0aHJvdyAnaXNDb3ZlcmVkQnkgbXVzdCBiZSBjYWxsZWQgd2l0aCBzb3J0ZWQgcmFuZ2VzJztcbiAgICAgIH1cbiAgICAgIGlmIChyLnN0YXJ0ID4gcmVtYWluaW5nLnN0YXJ0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTsgIC8vIEEgcG9zaXRpb24gaGFzIGJlZW4gbWlzc2VkIGFuZCB0aGVyZSdzIG5vIGdvaW5nIGJhY2suXG4gICAgICB9XG4gICAgICByZW1haW5pbmcuc3RhcnQgPSBNYXRoLm1heChyZW1haW5pbmcuc3RhcnQsIHIuc3RvcCArIDEpO1xuICAgICAgaWYgKHJlbWFpbmluZy5sZW5ndGgoKSA8PSAwKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRmluZCB0aGUgc3ViaW50ZXJ2YWxzIHdoaWNoIGFyZSBub3QgaW4gYG90aGVyYC5cbiAgICogVGhpcyBjYW4geWllbGQgZWl0aGVyIHplcm8sIG9uZSBvciB0d28gSW50ZXJ2YWxzLlxuICAgKi9cbiAgc3VidHJhY3Qob3RoZXI6IEludGVydmFsKTogSW50ZXJ2YWxbXSB7XG4gICAgaWYgKCF0aGlzLmludGVyc2VjdHMob3RoZXIpKSB7XG4gICAgICByZXR1cm4gW3RoaXNdOyAgLy8gdW5hZmZlY3RlZCBieSB0aGlzIHJhbmdlXG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbnRhaW5zSW50ZXJ2YWwob3RoZXIpKSB7XG4gICAgICAvLyByZXR1cm4gdGhlIGJpdCBiZWZvcmUgYW5kIHRoZSBiaXQgYWZ0ZXJcbiAgICAgIHJldHVybiBbbmV3IEludGVydmFsKHRoaXMuc3RhcnQsIG90aGVyLnN0YXJ0IC0gMSksXG4gICAgICAgICAgICAgIG5ldyBJbnRlcnZhbChvdGhlci5zdG9wICsgMSwgdGhpcy5zdG9wKV0uZmlsdGVyKHggPT4geC5sZW5ndGgoKSA+IDApO1xuICAgIH0gZWxzZSBpZiAob3RoZXIuY29udGFpbnNJbnRlcnZhbCh0aGlzKSkge1xuICAgICAgcmV0dXJuIFtdOyAgLy8gaXQncyBiZWVuIGNvbXBsZXRlbHkgb2JsaXRlcmF0ZWRcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaXQgb3ZlcmxhcHMgb25lIGVuZFxuICAgICAgaWYgKG90aGVyLnN0YXJ0IDwgdGhpcy5zdGFydCkge1xuICAgICAgICByZXR1cm4gW25ldyBJbnRlcnZhbChvdGhlci5zdG9wICsgMSwgdGhpcy5zdG9wKV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW25ldyBJbnRlcnZhbCh0aGlzLnN0YXJ0LCBvdGhlci5zdGFydCAtIDEpXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmluZCB0aGUgZGlzam9pbnQgc3ViaW50ZXJ2YWxzIG5vdCBjb3ZlcmVkIGJ5IGFueSBpbnRlcnZhbCBpbiB0aGUgbGlzdC5cbiAgICpcbiAgICogSWYgY29tcCA9IGludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMocmFuZ2VzKSwgdGhlbiB0aGlzIGd1YXJhbnRlZXMgdGhhdDpcbiAgICogLSBjb21wIHVuaW9uIHJhbmdlcyA9IGludGVydmFsXG4gICAqIC0gYSBpbnQgYiA9IDAgZm9yYWxsIGEgXFxpbiBjb21wLCBiIGluIHJhbmdlc1xuICAgKlxuICAgKiAoVGhlIGlucHV0IHJhbmdlcyBuZWVkIG5vdCBiZSBkaXNqb2ludC4pXG4gICAqL1xuICBjb21wbGVtZW50SW50ZXJ2YWxzKHJhbmdlczogSW50ZXJ2YWxbXSk6IEludGVydmFsW10ge1xuICAgIHZhciBjb21wcyA9IFt0aGlzXTtcbiAgICByYW5nZXMuZm9yRWFjaChyYW5nZSA9PiB7XG4gICAgICB2YXIgbmV3Q29tcHMgPSBbXTtcbiAgICAgIGNvbXBzLmZvckVhY2goaXYgPT4ge1xuICAgICAgICBuZXdDb21wcyA9IG5ld0NvbXBzLmNvbmNhdChpdi5zdWJ0cmFjdChyYW5nZSkpO1xuICAgICAgfSk7XG4gICAgICBjb21wcyA9IG5ld0NvbXBzO1xuICAgIH0pO1xuICAgIHJldHVybiBjb21wcztcbiAgfVxuXG4gIHN0YXRpYyBpbnRlcnNlY3RBbGwoaW50ZXJ2YWxzOiBBcnJheTxJbnRlcnZhbD4pOiBJbnRlcnZhbCB7XG4gICAgaWYgKCFpbnRlcnZhbHMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyaWVkIHRvIGludGVyc2VjdCB6ZXJvIGludGVydmFscycpO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gaW50ZXJ2YWxzWzBdLmNsb25lKCk7XG4gICAgaW50ZXJ2YWxzLnNsaWNlKDEpLmZvckVhY2goZnVuY3Rpb24oe3N0YXJ0LCBzdG9wfSkge1xuICAgICAgcmVzdWx0LnN0YXJ0ID0gTWF0aC5tYXgoc3RhcnQsIHJlc3VsdC5zdGFydCk7XG4gICAgICByZXN1bHQuc3RvcCA9IE1hdGgubWluKHN0b3AsIHJlc3VsdC5zdG9wKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gUmV0dXJucyBhbiBpbnRlcnZhbCB3aGljaCBjb250YWlucyBhbGwgdGhlIGdpdmVuIGludGVydmFscy5cbiAgc3RhdGljIGJvdW5kaW5nSW50ZXJ2YWwoaW50ZXJ2YWxzOiBBcnJheTxJbnRlcnZhbD4pOiBJbnRlcnZhbCB7XG4gICAgaWYgKCFpbnRlcnZhbHMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyaWVkIHRvIGJvdW5kIHplcm8gaW50ZXJ2YWxzJyk7XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBpbnRlcnZhbHNbMF0uY2xvbmUoKTtcbiAgICBpbnRlcnZhbHMuc2xpY2UoMSkuZm9yRWFjaChmdW5jdGlvbih7c3RhcnQsIHN0b3B9KSB7XG4gICAgICByZXN1bHQuc3RhcnQgPSBNYXRoLm1pbihzdGFydCwgcmVzdWx0LnN0YXJ0KTtcbiAgICAgIHJlc3VsdC5zdG9wID0gTWF0aC5tYXgoc3RvcCwgcmVzdWx0LnN0b3ApO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7dGhpcy5zdGFydH0sICR7dGhpcy5zdG9wfV1gO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJ2YWw7XG4iLCIvKipcbiAqIExvY2FsU3RyaW5nRmlsZSBpcyBhIHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZSB0aGF0IHdhcyBjcmVhdGVkIGZyb20gaW5wdXQgc3RyaW5nLiBVc2VkIGZvciB0ZXN0aW5nIGFuZCBzbWFsbCBpbnB1dCBmaWxlcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgQWJzdHJhY3RGaWxlIGZyb20gJy4vQWJzdHJhY3RGaWxlJztcblxuY2xhc3MgTG9jYWxTdHJpbmdGaWxlIGV4dGVuZHMgQWJzdHJhY3RGaWxlIHtcbiAgZmlsZUxlbmd0aDogbnVtYmVyO1xuICBjb250ZW50OiBzdHJpbmc7ICAvL2NvbnRlbnQgb2YgdGhpcyBcIkZpbGVcIlxuICBidWZmZXI6IEFycmF5QnVmZmVyO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5maWxlTGVuZ3RoID0gY29udGVudC5sZW5ndGg7ICBcbiAgICB0aGlzLmJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihjb250ZW50Lmxlbmd0aCk7IC8vIDIgYnl0ZXMgZm9yIGVhY2ggY2hhclxuICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG5cbiAgICB2YXIgYnVmVmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyKTtcbiAgICBmb3IgKHZhciBpPTA7IGkgPCB0aGlzLmZpbGVMZW5ndGg7IGkrKykge1xuICAgICAgYnVmVmlld1tpXSA9IGNvbnRlbnQuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gIH1cblxuICBnZXRCeXRlcyhzdGFydDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IFEuUHJvbWlzZTw/QXJyYXlCdWZmZXI+IHtcbiAgICBpZiAobGVuZ3RoIDwgMCkge1xuICAgICAgcmV0dXJuIFEucmVqZWN0KGBSZXF1ZXN0ZWQgPDAgYnl0ZXMgKCR7bGVuZ3RofSlgKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgcmVtb3RlIGZpbGUgbGVuZ3RoIGlzIGtub3duLCBjbGFtcCB0aGUgcmVxdWVzdCB0byBmaXQgd2l0aGluIGl0LlxuICAgIHZhciBzdG9wID0gc3RhcnQgKyBsZW5ndGggLSAxO1xuICAgIGlmICh0aGlzLmZpbGVMZW5ndGggIT0gLTEpIHtcbiAgICAgIHN0b3AgPSBNYXRoLm1pbih0aGlzLmZpbGVMZW5ndGggLSAxLCBzdG9wKTtcbiAgICB9XG5cbiAgICAvLyBGaXJzdCBjaGVjayB0aGUgY2FjaGUuXG4gICAgdmFyIGJ1ZiA9IHRoaXMuZ2V0RnJvbUNhY2hlKHN0YXJ0LCBzdG9wKTtcbiAgICByZXR1cm4gUS53aGVuKGJ1Zik7XG4gIH1cblxuICAvLyBSZWFkIHRoZSBlbnRpcmUgZmlsZSAtLSBub3QgcmVjb21tZW5kZWQgZm9yIGxhcmdlIGZpbGVzIVxuICBnZXRBbGwoKTogUS5Qcm9taXNlPD9BcnJheUJ1ZmZlcj4ge1xuICAgdmFyIGJ1ZiA9IHRoaXMuZ2V0RnJvbUNhY2hlKDAsIHRoaXMuZmlsZUxlbmd0aCAtIDEpO1xuICAgcmV0dXJuIFEud2hlbihidWYpO1xuICB9XG5cbiAgLy8gUmVhZHMgdGhlIGVudGlyZSBmaWxlIGFzIGEgc3RyaW5nIChub3QgYW4gQXJyYXlCdWZmZXIpLlxuICAvLyBUaGlzIGRvZXMgbm90IHVzZSB0aGUgY2FjaGUuXG4gIGdldEFsbFN0cmluZygpOiBRLlByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIFEud2hlbih0aGlzLmNvbnRlbnQpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBudW1iZXIgb2YgYnl0ZXMgaW4gdGhlIHJlbW90ZSBmaWxlLlxuICBnZXRTaXplKCk6IFEuUHJvbWlzZTxudW1iZXI+IHtcbiAgICByZXR1cm4gUS53aGVuKHRoaXMuZmlsZUxlbmd0aCk7XG4gIH1cblxuICBnZXRGcm9tQ2FjaGUoc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogP0FycmF5QnVmZmVyIHtcbiAgICByZXR1cm4gdGhpcy5idWZmZXIuc2xpY2Uoc3RhcnQsIHN0b3AgKyAxKTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gTG9jYWxTdHJpbmdGaWxlO1xuIiwiLyoqXG4gKiBBIGdlbmVyaWMgbWVudSwgaW50ZW5kZWQgdG8gYmUgdXNlZCBmb3IgYm90aCB0b2dnbGluZyBvcHRpb25zIGFuZCBpbnZva2luZyBjb21tYW5kcy5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiB2YXIgaXRlbXMgPSBbXG4gKiAgIHtrZXk6ICdhJywgbGFiZWw6ICdJdGVtIEEnLCBjaGVja2VkOiB0cnVlfSxcbiAqICAge2tleTogJ2InLCBsYWJlbDogJ0l0ZW0gQid9LFxuICogICAnLScsXG4gKiAgIHtrZXk6ICdyYW5kb20nLCBsYWJlbDogJ1BpY2sgUmFuZG9tJ31cbiAqIF07XG4gKiA8TWVudSBoZWFkZXI9XCJIZWFkZXJcIiBpdGVtcz17aXRlbXN9IG9uU2VsZWN0PXtzZWxlY3RIYW5kbGVyfSAvPlxuICpcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG50eXBlIE1lbnVJdGVtID0ge1xuICBrZXk6IHN0cmluZztcbiAgbGFiZWw6IHN0cmluZztcbiAgY2hlY2tlZD86IGJvb2xlYW47XG59O1xuXG50eXBlIFByb3BzID0ge1xuICBoZWFkZXI6IHN0cmluZztcbiAgaXRlbXM6IEFycmF5PE1lbnVJdGVtfCctJz47XG4gIG9uU2VsZWN0OiAoa2V5OiBzdHJpbmcpID0+IHZvaWQ7XG59O1xuXG5jbGFzcyBNZW51IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XG4gIHByb3BzOiBQcm9wcztcblxuICBjbGlja0hhbmRsZXIoaWR4OiBudW1iZXIsIGU6IFN5bnRoZXRpY01vdXNlRXZlbnQ8Pikge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgaXRlbSA9IHRoaXMucHJvcHMuaXRlbXNbaWR4XTtcbiAgICBpZiAodHlwZW9mKGl0ZW0pID09ICdzdHJpbmcnKSByZXR1cm47ICAvLyBmb3IgZmxvd1xuICAgIHRoaXMucHJvcHMub25TZWxlY3QoaXRlbS5rZXkpO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgdmFyIG1ha2VIYW5kbGVyID0gaSA9PiB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMsIGkpO1xuICAgIHZhciBlbHMgPSBbXTtcbiAgICBpZiAodGhpcy5wcm9wcy5oZWFkZXIpIHtcbiAgICAgIGVscy5wdXNoKDxkaXYga2V5PSdoZWFkZXInIGNsYXNzTmFtZT0nbWVudS1oZWFkZXInPnt0aGlzLnByb3BzLmhlYWRlcn08L2Rpdj4pO1xuICAgIH1cbiAgICBlbHMgPSBlbHMuY29uY2F0KHRoaXMucHJvcHMuaXRlbXMubWFwKChpdGVtLCBpKSA9PiB7XG4gICAgICBpZiAodHlwZW9mKGl0ZW0pID09PSAnc3RyaW5nJykgeyAgLy8gd291bGQgcHJlZmVyIFwiPT0gJy0nXCIsIHNlZSBmbG93IzEwNjZcbiAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9J21lbnUtc2VwYXJhdG9yJyAvPjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjaGVja0NsYXNzID0gJ2NoZWNrJyArIChpdGVtLmNoZWNrZWQgPyAnIGNoZWNrZWQnIDogJycpO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9J21lbnUtaXRlbScgb25DbGljaz17bWFrZUhhbmRsZXIoaSl9PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtjaGVja0NsYXNzfT48L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21lbnUtaXRlbS1sYWJlbCc+e2l0ZW0ubGFiZWx9PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVudSc+XG4gICAgICAgIHtlbHN9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTWVudTtcbiIsIi8qKlxuICogUmVtb3RlRmlsZSBpcyBhIHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZSBvbiBhIHJlbW90ZSBzZXJ2ZXIgd2hpY2ggY2FuIGJlXG4gKiBmZXRjaGVkIGluIGNodW5rcywgZS5nLiB1c2luZyBhIFJhbmdlIHJlcXVlc3QuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBRIGZyb20gJ3EnO1xuaW1wb3J0IEFic3RyYWN0RmlsZSBmcm9tICcuL0Fic3RyYWN0RmlsZSc7XG5cbnR5cGUgQ2h1bmsgPSB7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjtcbiAgYnVmZmVyOiBBcnJheUJ1ZmZlcjtcbiAgLy8gVE9ETyhkYW52ayk6IHByaW9yaXR5OiBudW1iZXI7XG59XG5cblxuY2xhc3MgUmVtb3RlRmlsZSBleHRlbmRzIEFic3RyYWN0RmlsZXtcbiAgdXJsOiBzdHJpbmc7XG4gIGZpbGVMZW5ndGg6IG51bWJlcjtcbiAgY2h1bmtzOiBBcnJheTxDaHVuaz47ICAvLyByZWdpb25zIG9mIGZpbGUgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBsb2FkZWQuXG4gIG51bU5ldHdvcmtSZXF1ZXN0czogbnVtYmVyOyAgLy8gdHJhY2sgdGhpcyBmb3IgZGVidWdnaW5nL3Rlc3RpbmdcblxuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5maWxlTGVuZ3RoID0gLTE7ICAvLyB1bmtub3duXG4gICAgdGhpcy5jaHVua3MgPSBbXTtcbiAgICB0aGlzLm51bU5ldHdvcmtSZXF1ZXN0cyA9IDA7XG4gIH1cblxuICBnZXRCeXRlcyhzdGFydDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IFEuUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgIGlmIChsZW5ndGggPCAwKSB7XG4gICAgICByZXR1cm4gUS5yZWplY3QoYFJlcXVlc3RlZCA8MCBieXRlcyAoJHtsZW5ndGh9KSBmcm9tICR7dGhpcy51cmx9YCk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHJlbW90ZSBmaWxlIGxlbmd0aCBpcyBrbm93biwgY2xhbXAgdGhlIHJlcXVlc3QgdG8gZml0IHdpdGhpbiBpdC5cbiAgICB2YXIgc3RvcCA9IHN0YXJ0ICsgbGVuZ3RoIC0gMTtcbiAgICBpZiAodGhpcy5maWxlTGVuZ3RoICE9IC0xKSB7XG4gICAgICBzdG9wID0gTWF0aC5taW4odGhpcy5maWxlTGVuZ3RoIC0gMSwgc3RvcCk7XG4gICAgfVxuXG4gICAgLy8gRmlyc3QgY2hlY2sgdGhlIGNhY2hlLlxuICAgIHZhciBidWYgPSB0aGlzLmdldEZyb21DYWNoZShzdGFydCwgc3RvcCk7XG4gICAgaWYgKGJ1Zikge1xuICAgICAgcmV0dXJuIFEud2hlbihidWYpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IGhhbmRsZSBwYXJ0aWFsIG92ZXJsYXAgb2YgcmVxdWVzdCB3LyBjYWNoZS5cblxuICAgIC8vIE5lZWQgdG8gZmV0Y2ggZnJvbSB0aGUgbmV0d29yay5cbiAgICByZXR1cm4gdGhpcy5nZXRGcm9tTmV0d29yayhzdGFydCwgc3RvcCk7XG4gIH1cblxuICAvLyBSZWFkIHRoZSBlbnRpcmUgZmlsZSAtLSBub3QgcmVjb21tZW5kZWQgZm9yIGxhcmdlIGZpbGVzIVxuICBnZXRBbGwoKTogUS5Qcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgLy8gQ2hlY2sgY2FjaGUgaWYgZmlsZSBsZW5ndGggaXMgYXZhaWxhYmxlLlxuICAgIGlmICh0aGlzLmZpbGVMZW5ndGggIT0gLTEpIHtcbiAgICAgIHZhciBidWYgPSB0aGlzLmdldEZyb21DYWNoZSgwLCB0aGlzLmZpbGVMZW5ndGggLSAxKTtcbiAgICAgIGlmIChidWYpIHtcbiAgICAgICAgcmV0dXJuIFEud2hlbihidWYpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdGhpcy51cmwpO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKChbYnVmZmVyXSkgPT4ge1xuICAgICAgdGhpcy5maWxlTGVuZ3RoID0gYnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgICB0aGlzLmNodW5rcyA9IFt7c3RhcnQ6IDAsIHN0b3A6IHRoaXMuZmlsZUxlbmd0aCAtIDEsIGJ1ZmZlcn1dO1xuICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJlYWRzIHRoZSBlbnRpcmUgZmlsZSBhcyBhIHN0cmluZyAobm90IGFuIEFycmF5QnVmZmVyKS5cbiAgLy8gVGhpcyBkb2VzIG5vdCB1c2UgdGhlIGNhY2hlLlxuICBnZXRBbGxTdHJpbmcoKTogUS5Qcm9taXNlPHN0cmluZz4ge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdGhpcy51cmwpO1xuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKChbc3RyaW5nXSkgPT4ge1xuICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgbnVtYmVyIG9mIGJ5dGVzIGluIHRoZSByZW1vdGUgZmlsZS5cbiAgZ2V0U2l6ZSgpOiBRLlByb21pc2U8bnVtYmVyPiB7XG4gICAgaWYgKHRoaXMuZmlsZUxlbmd0aCAhPSAtMSkge1xuICAgICAgcmV0dXJuIFEud2hlbih0aGlzLmZpbGVMZW5ndGgpO1xuICAgIH1cblxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignSEVBRCcsIHRoaXMudXJsKTtcblxuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKCgpID0+IHtcbiAgICAgIC8vIGV2ZW50LnRvdGFsIHdvdWxkIGJlIGJldHRlciwgc2VlIGZhY2Vib29rL2Zsb3cjMzU3XG4gICAgICB2YXIgbGVuID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdDb250ZW50LUxlbmd0aCcpO1xuICAgICAgaWYgKGxlbiAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKGxlbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyAnUmVtb3RlIHJlc291cmNlIGhhcyB1bmtub3duIGxlbmd0aCc7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXRGcm9tQ2FjaGUoc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogP0FycmF5QnVmZmVyIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2h1bmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY2h1bmsgPSB0aGlzLmNodW5rc1tpXTtcbiAgICAgIGlmIChjaHVuay5zdGFydCA8PSBzdGFydCAmJiBjaHVuay5zdG9wID49IHN0b3ApIHtcbiAgICAgICAgcmV0dXJuIGNodW5rLmJ1ZmZlci5zbGljZShzdGFydCAtIGNodW5rLnN0YXJ0LCBzdG9wIC0gY2h1bmsuc3RhcnQgKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBnZXRGcm9tTmV0d29yayhzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICB2YXIgbGVuZ3RoID0gc3RvcCAtIHN0YXJ0ICsgMTtcbiAgICBpZiAobGVuZ3RoID4gNTAwMDAwMDApIHtcbiAgICAgIHRocm93IGBNb25zdGVyIHJlcXVlc3Q6IFdvbid0IGZldGNoICR7bGVuZ3RofSBieXRlcyBmcm9tICR7dGhpcy51cmx9YDtcbiAgICB9XG5cbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHRoaXMudXJsKTtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignUmFuZ2UnLCBgYnl0ZXM9JHtzdGFydH0tJHtzdG9wfWApO1xuXG4gICAgcmV0dXJuIHRoaXMucHJvbWlzZVhIUih4aHIpLnRoZW4oKFtidWZmZXJdKSA9PiB7XG4gICAgICAvLyBUaGUgYWN0dWFsIGxlbmd0aCBvZiB0aGUgcmVzcG9uc2UgbWF5IGJlIGxlc3MgdGhhbiByZXF1ZXN0ZWQgaWYgaXQnc1xuICAgICAgLy8gdG9vIHNob3J0LCBlLmcuIGlmIHdlIHJlcXVlc3QgYnl0ZXMgMC0xMDAwIG9mIGEgNTAwLWJ5dGUgZmlsZS5cbiAgICAgIHZhciBuZXdDaHVuayA9IHsgc3RhcnQsIHN0b3A6IHN0YXJ0ICsgYnVmZmVyLmJ5dGVMZW5ndGggLSAxLCBidWZmZXIgfTtcbiAgICAgIHRoaXMuY2h1bmtzLnB1c2gobmV3Q2h1bmspO1xuXG4gICAgICAvLyBSZWNvcmQgdGhlIGZ1bGwgZmlsZSBsZW5ndGggaWYgaXQncyBhdmFpbGFibGUuXG4gICAgICB2YXIgc2l6ZSA9IHRoaXMuX2dldExlbmd0aEZyb21Db250ZW50UmFuZ2UoeGhyKTtcbiAgICAgIGlmIChzaXplICE9PSBudWxsICYmIHNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodGhpcy5maWxlTGVuZ3RoICE9IC0xICYmIHRoaXMuZmlsZUxlbmd0aCAhPSBzaXplKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBTaXplIG9mIHJlbW90ZSBmaWxlICR7dGhpcy51cmx9IGNoYW5nZWQgZnJvbSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5maWxlTGVuZ3RofSB0byAke3NpemV9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5maWxlTGVuZ3RoID0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gV3JhcHBlciB0byBjb252ZXJ0IFhIUnMgdG8gUHJvbWlzZXMuXG4gIC8vIFRoZSBwcm9taXNlZCB2YWx1ZXMgYXJlIHRoZSByZXNwb25zZSAoZS5nLiBhbiBBcnJheUJ1ZmZlcikgYW5kIHRoZSBFdmVudC5cbiAgcHJvbWlzZVhIUih4aHI6IFhNTEh0dHBSZXF1ZXN0KTogUS5Qcm9taXNlPFthbnksIEV2ZW50XT4ge1xuICAgIHZhciB1cmwgPSB0aGlzLnVybDtcbiAgICB2YXIgZGVmZXJyZWQgPSBRLmRlZmVyKCk7XG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KGBSZXF1ZXN0IGZvciAke3VybH0gZmFpbGVkIHdpdGggc3RhdHVzOiAke3RoaXMuc3RhdHVzfSAke3RoaXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoW3RoaXMucmVzcG9uc2UsIGVdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICAgIGRlZmVycmVkLnJlamVjdChgUmVxdWVzdCBmb3IgJHt1cmx9IGZhaWxlZCB3aXRoIHN0YXR1czogJHt0aGlzLnN0YXR1c30gJHt0aGlzLnN0YXR1c1RleHR9YCk7XG4gICAgfSk7XG4gICAgdGhpcy5udW1OZXR3b3JrUmVxdWVzdHMrKztcbiAgICB4aHIuc2VuZCgpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9XG5cbiAgLy8gQXR0ZW1wdGluZyB0byBhY2Nlc3MgQ29udGVudC1SYW5nZSBkaXJlY3RseSBtYXkgcmFpc2Ugc2VjdXJpdHkgZXJyb3JzLlxuICAvLyBUaGlzIGVuc3VyZXMgdGhlIGFjY2VzcyBpcyBzYWZlIGJlZm9yZSBtYWtpbmcgaXQuXG4gIF9nZXRMZW5ndGhGcm9tQ29udGVudFJhbmdlKHhocjogWE1MSHR0cFJlcXVlc3QpOiA/bnVtYmVyIHtcbiAgICBpZiAoIS9Db250ZW50LVJhbmdlL2kuZXhlYyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgY29udGVudFJhbmdlID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdDb250ZW50LVJhbmdlJyk7XG4gICAgdmFyIG0gPSAvXFwvKFxcZCspJC8uZXhlYyhjb250ZW50UmFuZ2UpO1xuICAgIGlmIChtKSB7XG4gICAgICByZXR1cm4gTnVtYmVyKG1bMV0pO1xuICAgIH1cbiAgICBjb25zb2xlLndhcm4oYFJlY2VpdmVkIGltcHJvcGVyIENvbnRlbnQtUmFuZ2UgdmFsdWUgZm9yIGAgK1xuICAgICAgICAgICAgICAgICBgJHt0aGlzLnVybH06ICR7Y29udGVudFJhbmdlfWApO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY2xlYXJDYWNoZSgpIHtcbiAgICB0aGlzLmNodW5rcyA9IFtdO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVtb3RlRmlsZTtcbiIsIi8qKlxuICogUmVtb3RlUmVxdWVzdCBpcyBhIGdlbmVyaWMgZW5kcG9pbnQgZm9yIHNlcnZpbmcgaHR0cCByZXF1ZXN0cy4gUmVtb3RlUmVxdWVzdFxuICogaGFuZGxlcyBqc29uIGRhdGEsIHdoaWNoIGlzIHNwZWNpZmllZCBieSBnZW5vbWljIHJhbmdlIChjb250aWcsIHN0YXJ0LCBzdG9wKVxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi9Db250aWdJbnRlcnZhbCc7XG5cbnZhciBNT05TVEVSX1JFUVVFU1QgPSA1MDAwMDAwO1xuXG5jbGFzcyBSZW1vdGVSZXF1ZXN0IHtcbiAgdXJsOiBzdHJpbmc7XG4gIGNhY2hlOiBPYmplY3Q7XG4gIG51bU5ldHdvcmtSZXF1ZXN0czogbnVtYmVyOyAgLy8gdHJhY2sgdGhpcyBmb3IgZGVidWdnaW5nL3Rlc3RpbmdcblxuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgIHRoaXMuY2FjaGUgPSByZXF1aXJlKCdtZW1vcnktY2FjaGUnKTtcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLm51bU5ldHdvcmtSZXF1ZXN0cyA9IDA7XG4gIH1cblxuICBnZXQoY29udGlnOiBzdHJpbmcsIHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlcik6IFEuUHJvbWlzZTxPYmplY3Q+IHtcbiAgICB2YXIgbGVuZ3RoID0gc3RvcCAtIHN0YXJ0O1xuICAgIGlmIChsZW5ndGggPD0gMCkge1xuICAgICAgcmV0dXJuIFEucmVqZWN0KGBSZXF1ZXN0ZWQgPDAgaW50ZXJ2YWwgKCR7bGVuZ3RofSkgZnJvbSAke3RoaXMudXJsfWApO1xuICAgIH1cblxuICAgIC8vIEZpcnN0IGNoZWNrIHRoZSBjYWNoZS5cbiAgICB2YXIgY29udGlnSW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwoY29udGlnLCBzdGFydCwgc3RvcCk7XG4gICAgdmFyIGJ1ZiA9IHRoaXMuY2FjaGUuZ2V0KGNvbnRpZ0ludGVydmFsKTtcbiAgICBpZiAoYnVmKSB7XG4gICAgICByZXR1cm4gUS53aGVuKGJ1Zik7XG4gICAgfVxuXG4gICAgLy8gTmVlZCB0byBmZXRjaCBmcm9tIHRoZSBuZXR3b3JrLlxuICAgIHJldHVybiB0aGlzLmdldEZyb21OZXR3b3JrKGNvbnRpZywgc3RhcnQsIHN0b3ApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgbXVzdCBiZSBvZiBmb3JtIFwidXJsL2NvbnRpZz9zdGFydD1zdGFydCZlbmQ9c3RvcFwiXG4gICovXG4gIGdldEZyb21OZXR3b3JrKGNvbnRpZzogc3RyaW5nLCBzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8T2JqZWN0PiB7XG4gICAgdmFyIGxlbmd0aCA9IHN0b3AgLSBzdGFydDtcbiAgICBpZiAobGVuZ3RoID4gNTAwMDAwMCkge1xuICAgICAgdGhyb3cgYE1vbnN0ZXIgcmVxdWVzdDogV29uJ3QgZmV0Y2ggJHtsZW5ndGh9IHNpemVkIHJhbmdlcyBmcm9tICR7dGhpcy51cmx9YDtcbiAgICB9XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHZhciBlbmRwb2ludCA9IHRoaXMuZ2V0RW5kcG9pbnRGcm9tQ29udGlnKGNvbnRpZywgc3RhcnQsIHN0b3ApO1xuICAgIHhoci5vcGVuKCdHRVQnLCBlbmRwb2ludCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblxuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKGpzb24gPT4ge1xuICAgICAgLy8gZXh0cmFjdCByZXNwb25zZSBmcm9tIHByb21pc2VcbiAgICAgIHZhciBidWZmZXIgPSBqc29uWzBdO1xuICAgICAgdmFyIGNvbnRpZ0ludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKGNvbnRpZywgc3RhcnQsIHN0b3ApO1xuICAgICAgdGhpcy5jYWNoZS5wdXQoY29udGlnSW50ZXJ2YWwsIGJ1ZmZlcik7XG4gICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0RW5kcG9pbnRGcm9tQ29udGlnKGNvbnRpZzogc3RyaW5nLCBzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLnVybH0vJHtjb250aWd9P3N0YXJ0PSR7c3RhcnR9JmVuZD0ke3N0b3B9YDtcbiAgfVxuXG4gIC8vIFdyYXBwZXIgdG8gY29udmVydCBYSFJzIHRvIFByb21pc2VzLlxuICAvLyBUaGUgcHJvbWlzZWQgdmFsdWVzIGFyZSB0aGUgcmVzcG9uc2UgKGUuZy4gYW4gQXJyYXlCdWZmZXIpIGFuZCB0aGUgRXZlbnQuXG4gIHByb21pc2VYSFIoeGhyOiBYTUxIdHRwUmVxdWVzdCk6IFEuUHJvbWlzZTxbYW55LCBFdmVudF0+IHtcbiAgICB2YXIgdXJsID0gdGhpcy51cmw7XG4gICAgdmFyIGRlZmVycmVkID0gUS5kZWZlcigpO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oZTogYW55KSB7XG4gICAgICBpZiAodGhpcy5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICAgIGRlZmVycmVkLnJlamVjdChgUmVxdWVzdCBmb3IgJHt1cmx9IGZhaWxlZCB3aXRoIHN0YXR1czogJHt0aGlzLnN0YXR1c30gJHt0aGlzLnN0YXR1c1RleHR9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKFt0aGlzLnJlc3BvbnNlLCBlXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24oZTogYW55KSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3QoYFJlcXVlc3QgZm9yICR7dXJsfSBmYWlsZWQgd2l0aCBzdGF0dXM6ICR7dGhpcy5zdGF0dXN9ICR7dGhpcy5zdGF0dXNUZXh0fWApO1xuICAgIH0pO1xuICAgIHRoaXMubnVtTmV0d29ya1JlcXVlc3RzKys7XG4gICAgeGhyLnNlbmQoKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgUmVtb3RlUmVxdWVzdCxcbiAgTU9OU1RFUl9SRVFVRVNUOiBNT05TVEVSX1JFUVVFU1Rcbn07XG4iLCIvKipcbiAqIFJvb3Qgb2YgdGhlIFJlYWN0IGNvbXBvbmVudCB0cmVlLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2V9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHR5cGUge1R3b0JpdFNvdXJjZX0gZnJvbSAnLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge1Zpc3VhbGl6ZWRUcmFjaywgVml6V2l0aE9wdGlvbnN9IGZyb20gJy4vdHlwZXMnO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IENvbnRyb2xzIGZyb20gJy4vQ29udHJvbHMnO1xuaW1wb3J0IE1lbnUgZnJvbSAnLi9NZW51JztcbmltcG9ydCBWaXN1YWxpemF0aW9uV3JhcHBlciBmcm9tICcuL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcblxudHlwZSBQcm9wcyA9IHtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG4gIHRyYWNrczogVmlzdWFsaXplZFRyYWNrW107XG4gIGluaXRpYWxSYW5nZTogR2Vub21lUmFuZ2U7XG59O1xuXG50eXBlIFN0YXRlID0ge1xuICBjb250aWdMaXN0OiBzdHJpbmdbXTtcbiAgcmFuZ2U6ID9HZW5vbWVSYW5nZTtcbiAgc2V0dGluZ3NNZW51S2V5OiA/c3RyaW5nO1xuICB1cGRhdGVTaXplOiBib29sZWFuO1xufTtcblxuY2xhc3MgUm9vdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgcHJvcHM6IFByb3BzO1xuICBzdGF0ZTogU3RhdGU7XG4gIHRyYWNrUmVhY3RFbGVtZW50czogQXJyYXk8T2JqZWN0PjsgLy9pdCdzIGFuIGFycmF5IG9mIHJlYWN0ZWxlbWVudCB0aGF0IGFyZSBjcmVhdGVkIGZvciB0cmFja3NcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBjb250aWdMaXN0OiB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5jb250aWdMaXN0KCksXG4gICAgICByYW5nZTogbnVsbCxcbiAgICAgIHVwZGF0ZVNpemU6IGZhbHNlLFxuICAgICAgc2V0dGluZ3NNZW51S2V5OiBudWxsXG4gICAgfTtcbiAgICB0aGlzLnRyYWNrUmVhY3RFbGVtZW50cyA9IFtdO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2Uub24oJ2NvbnRpZ3MnLCAoKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY29udGlnTGlzdDogdGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2UuY29udGlnTGlzdCgpLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUucmFuZ2UpIHtcbiAgICAgIHRoaXMuaGFuZGxlUmFuZ2VDaGFuZ2UodGhpcy5wcm9wcy5pbml0aWFsUmFuZ2UpO1xuICAgIH1cbiAgICAvLyBpbiBjYXNlIHRoZSBjb250aWdzIGNhbWUgaW4gYmV0d2VlbiBnZXRJbml0aWFsU3RhdGUoKSBhbmQgaGVyZS5cbiAgICB0aGlzLnNldFN0YXRlKHtjb250aWdMaXN0OiB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5jb250aWdMaXN0KCl9KTtcbiAgfVxuXG4gIGhhbmRsZVJhbmdlQ2hhbmdlKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgIC8vIERvIG5vdCBwcm9wYWdhdGUgbmVnYXRpdmUgcmFuZ2VzXG4gICAgaWYgKG5ld1JhbmdlLnN0YXJ0IDwgMCkge1xuICAgICAgbmV3UmFuZ2Uuc3RhcnQgPSAwO1xuICAgIH1cbiAgICB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5ub3JtYWxpemVSYW5nZShuZXdSYW5nZSkudGhlbihyYW5nZSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtyYW5nZTogcmFuZ2V9KTtcblxuICAgICAgLy8gSW5mb3JtIGFsbCB0aGUgc291cmNlcyBvZiB0aGUgcmFuZ2UgY2hhbmdlIChpbmNsdWRpbmcgcmVmZXJlbmNlU291cmNlKS5cbiAgICAgIHRoaXMucHJvcHMudHJhY2tzLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgICB0cmFjay5zb3VyY2UucmFuZ2VDaGFuZ2VkKHJhbmdlKTtcbiAgICAgIH0pO1xuICAgIH0pLmRvbmUoKTtcbiAgfVxuXG4gIHRvZ2dsZVNldHRpbmdzTWVudShrZXk6IHN0cmluZywgZTogU3ludGhldGljRXZlbnQ8Pikge1xuICAgIGlmICh0aGlzLnN0YXRlLnNldHRpbmdzTWVudUtleSA9PSBrZXkpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3NldHRpbmdzTWVudUtleTogbnVsbH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtzZXR0aW5nc01lbnVLZXk6IGtleX0pO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVNlbGVjdE9wdGlvbih0cmFja0tleTogc3RyaW5nLCBvcHRpb25LZXk6IHN0cmluZykge1xuICAgIHRoaXMuc2V0U3RhdGUoe3NldHRpbmdzTWVudUtleTogbnVsbH0pO1xuICAgIHZhciB2aXogPSB0aGlzLnByb3BzLnRyYWNrc1tOdW1iZXIodHJhY2tLZXkpXS52aXN1YWxpemF0aW9uO1xuICAgIHZhciBvbGRPcHRzID0gdml6Lm9wdGlvbnM7XG4gICAgLy8gJEZsb3dJZ25vcmU6IFRPRE8gcmVtb3ZlIGZsb3cgc3VwcHJlc3Npb25cbiAgICB2YXIgbmV3T3B0cyA9IHZpei5jb21wb25lbnQuaGFuZGxlU2VsZWN0T3B0aW9uKG9wdGlvbktleSwgb2xkT3B0cyk7XG4gICAgdml6Lm9wdGlvbnMgPSBuZXdPcHRzO1xuICAgIGlmIChuZXdPcHRzICE9IG9sZE9wdHMpIHtcbiAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBtYWtlRGl2Rm9yVHJhY2soa2V5OiBzdHJpbmcsIHRyYWNrOiBWaXN1YWxpemVkVHJhY2spOiBSZWFjdCRFbGVtZW50PCdkaXYnPiB7XG4gICAgLy90aGlzIHNob3VsZCBiZSBpbXByb3ZlZCwgYnV0IEkgaGF2ZSBubyBpZGVhIGhvdyAod2hlbiB0cnlpbmcgdG9cbiAgICAvL2FjY2VzcyB0aGlzLnRyYWNrUmVhY3RFbGVtZW50cyB3aXRoIHN0cmluZyBrZXksIGZsb3cgY29tcGxhaW5zKVxuICAgIHZhciBpbnRLZXkgPSBwYXJzZUludChrZXkpOyBcbiAgICB2YXIgdHJhY2tFbCA9IChcbiAgICAgICAgPFZpc3VhbGl6YXRpb25XcmFwcGVyIHZpc3VhbGl6YXRpb249e3RyYWNrLnZpc3VhbGl6YXRpb259XG4gICAgICAgICAgICByYW5nZT17dGhpcy5zdGF0ZS5yYW5nZX1cbiAgICAgICAgICAgIG9uUmFuZ2VDaGFuZ2U9e3RoaXMuaGFuZGxlUmFuZ2VDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgICAgIHNvdXJjZT17dHJhY2suc291cmNlfVxuICAgICAgICAgICAgb3B0aW9ucz17dHJhY2sudHJhY2sub3B0aW9uc31cbiAgICAgICAgICAgIHJlZmVyZW5jZVNvdXJjZT17dGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2V9XG4gICAgICAgICAgICByZWYgPSB7KGM6IFJlYWN0JEVsZW1lbnRSZWY8T2JqZWN0PikgPT4ge3RoaXMudHJhY2tSZWFjdEVsZW1lbnRzW2ludEtleV09Y319XG4gICAgICAgICAgLz4pO1xuXG4gICAgdmFyIHRyYWNrTmFtZSA9IHRyYWNrLnRyYWNrLm5hbWUgfHwgJyh0cmFjayBuYW1lKSc7XG5cbiAgICB2YXIgZ2Vhckljb24gPSBudWxsLFxuICAgICAgICBzZXR0aW5nc01lbnUgPSBudWxsO1xuICAgIC8vICRGbG93SWdub3JlOiBUT0RPIHJlbW92ZSBmbG93IHN1cHByZXNzaW9uXG4gICAgaWYgKHRyYWNrLnZpc3VhbGl6YXRpb24uY29tcG9uZW50LmdldE9wdGlvbnNNZW51KSB7XG4gICAgICBnZWFySWNvbiA9IChcbiAgICAgICAgICA8c3BhbiByZWY9eydnZWFyLScgKyBrZXl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdnZWFyJ1xuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlU2V0dGluZ3NNZW51LmJpbmQodGhpcywga2V5KX0+XG4gICAgICAgICAgICDimplcbiAgICAgICAgICA8L3NwYW4+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXRlLnNldHRpbmdzTWVudUtleSA9PSBrZXkpIHtcbiAgICAgIHZhciBnZWFyID0gdGhpcy5yZWZzWydnZWFyLScgKyBrZXldLFxuICAgICAgICAgIGdlYXJYID0gZ2Vhci5vZmZzZXRMZWZ0LFxuICAgICAgICAgIGdlYXJXID0gZ2Vhci5vZmZzZXRXaWR0aCxcbiAgICAgICAgICBnZWFyWSA9IGdlYXIub2Zmc2V0VG9wO1xuXG4gICAgICB2YXIgbWVudVN0eWxlID0ge1xuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgbGVmdDogKGdlYXJYICsgZ2VhclcpICsgJ3B4JyxcbiAgICAgICAgdG9wOiBnZWFyWSArICdweCdcbiAgICAgIH07XG4gICAgICAvLyAkRmxvd0lnbm9yZTogVE9ETyByZW1vdmUgZmxvdyBzdXBwcmVzc2lvblxuICAgICAgdmFyIGl0ZW1zID0gdHJhY2sudmlzdWFsaXphdGlvbi5jb21wb25lbnQuZ2V0T3B0aW9uc01lbnUodHJhY2sudmlzdWFsaXphdGlvbi5vcHRpb25zKTtcbiAgICAgIHNldHRpbmdzTWVudSA9IChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J21lbnUtY29udGFpbmVyJyBzdHlsZT17bWVudVN0eWxlfT5cbiAgICAgICAgICA8TWVudSBoZWFkZXI9e3RyYWNrTmFtZX0gaXRlbXM9e2l0ZW1zfSBvblNlbGVjdD17dGhpcy5oYW5kbGVTZWxlY3RPcHRpb24uYmluZCh0aGlzLCBrZXkpfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgdmFyIGNsYXNzTmFtZSA9IFsndHJhY2snLCB0cmFjay52aXN1YWxpemF0aW9uLmNvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCAnJywgdHJhY2sudHJhY2suY3NzQ2xhc3MgfHwgJyddLmpvaW4oJyAnKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGtleT17a2V5fSBjbGFzc05hbWU9e2NsYXNzTmFtZX0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmFjay1sYWJlbCc+XG4gICAgICAgICAgPHNwYW4+e3RyYWNrTmFtZX08L3NwYW4+XG4gICAgICAgICAgPGJyLz5cbiAgICAgICAgICB7Z2Vhckljb259XG4gICAgICAgICAge3NldHRpbmdzTWVudX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmFjay1jb250ZW50Jz5cbiAgICAgICAgICB7dHJhY2tFbH1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgLy8gVE9ETzogdXNlIGEgYmV0dGVyIGtleSB0aGFuIGluZGV4LlxuICAgIHZhciB0cmFja0VscyA9IHRoaXMucHJvcHMudHJhY2tzLm1hcCgodCwgaSkgPT4gdGhpcy5tYWtlRGl2Rm9yVHJhY2soJycraSwgdCkpO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncGlsZXVwLXJvb3QnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndHJhY2sgY29udHJvbHMnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmFjay1sYWJlbCc+XG4gICAgICAgICAgICAmbmJzcDtcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndHJhY2stY29udGVudCc+XG4gICAgICAgICAgICA8Q29udHJvbHMgY29udGlnTGlzdD17dGhpcy5zdGF0ZS5jb250aWdMaXN0fVxuICAgICAgICAgICAgICAgICAgICAgIHJhbmdlPXt0aGlzLnN0YXRlLnJhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVJhbmdlQ2hhbmdlLmJpbmQodGhpcyl9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7dHJhY2tFbHN9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUHJvcHMsIHByZXZTdGF0ZTogT2JqZWN0KSB7XG4gICAgaWYgKHRoaXMuc3RhdGUudXBkYXRlU2l6ZSkge1xuICAgICAgZm9yICh2YXIgaT0wO2k8dGhpcy5wcm9wcy50cmFja3MubGVuZ3RoO2krKykge1xuICAgICAgICB0aGlzLnRyYWNrUmVhY3RFbGVtZW50c1tpXS5zZXRTdGF0ZSh7dXBkYXRlU2l6ZTp0aGlzLnN0YXRlLnVwZGF0ZVNpemV9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdGUudXBkYXRlU2l6ZT1mYWxzZTtcbiAgICB9XG4gIH1cblxufVxuUm9vdC5kaXNwbGF5TmFtZSA9ICdSb290JztcblxubW9kdWxlLmV4cG9ydHMgPSBSb290O1xuIiwiLyoqXG4gKiBBIHN0b3JlIGZvciBzZXF1ZW5jZXMuXG4gKlxuICogVGhpcyBpcyB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSByZWZlcmVuY2UgZGF0YS5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIEludGVydmFsIGZyb20gJy4vSW50ZXJ2YWwnO1xuaW1wb3J0IHR5cGUgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi9Db250aWdJbnRlcnZhbCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5pbXBvcnQge2FsdENvbnRpZ05hbWV9IGZyb20gJy4vdXRpbHMnO1xuXG4vLyBTdG9yZSBzZXF1ZW5jZXMgb2YgdGhpcyBtYW55IGJhc2UgcGFpcnMgdG9nZXRoZXIgaW4gYSBzaW5nbGUgc3RyaW5nLlxuY29uc3QgQ0hVTktfU0laRSA9IDEwMDA7XG5cbnR5cGUgU2VxTWFwID0ge1trZXk6IG51bWJlcl06IHN0cmluZ307XG50eXBlIENodW5rV2l0aE9mZnNldCA9IHtcbiAgY2h1bmtTdGFydDogbnVtYmVyO1xuICBvZmZzZXQ6IG51bWJlcjtcbiAgbGVuZ3RoOiBudW1iZXI7XG59O1xuXG4vLyBUaGlzIGNsYXNzIHN0b3JlcyBzZXF1ZW5jZXMgZWZmaWNpZW50bHkuXG5jbGFzcyBTZXF1ZW5jZVN0b3JlIHtcbiAgLy8gY29udGlnIC0tPiBzdGFydCBvZiBjaHVuayAtLT4gc2VxdWVuY2Ugb2YgY2h1bmtcbiAgY29udGlnTWFwOiB7W2tleTogc3RyaW5nXTogU2VxTWFwfTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbnRpZ01hcCA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhIHJhbmdlIG9mIHRoZSBnZW5vbWUgdG8gdGhlIHBhcnRpY3VsYXIgc2VxdWVuY2UuXG4gICAqIFRoaXMgb3ZlcndyaXRlcyBhbnkgZXhpc3RpbmcgZGF0YS5cbiAgICovXG4gIHNldFJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LCBzZXF1ZW5jZTogc3RyaW5nKSB7XG4gICAgaWYgKHJhbmdlLmxlbmd0aCgpID09PSAwKSByZXR1cm47XG4gICAgaWYgKHJhbmdlLmxlbmd0aCgpICE9IHNlcXVlbmNlLmxlbmd0aCkge1xuICAgICAgdGhyb3cgJ3NldFJhbmdlIGxlbmd0aCBtaXNtYXRjaCc7XG4gICAgfVxuXG4gICAgdmFyIHNlcXMgPSB0aGlzLl9nZXRTZXF1ZW5jZXMocmFuZ2UuY29udGlnKTtcbiAgICBpZiAoIXNlcXMpIHtcbiAgICAgIHNlcXMgPSB0aGlzLmNvbnRpZ01hcFtyYW5nZS5jb250aWddID0ge307XG4gICAgfVxuXG4gICAgZm9yICh2YXIgY2h1bmsgb2YgdGhpcy5fY2h1bmtGb3JJbnRlcnZhbChyYW5nZS5pbnRlcnZhbCkpIHtcbiAgICAgIHZhciBwb3MgPSBjaHVuay5jaHVua1N0YXJ0ICsgY2h1bmsub2Zmc2V0IC0gcmFuZ2Uuc3RhcnQoKTtcbiAgICAgIHRoaXMuX3NldENodW5rKHNlcXMsIGNodW5rLCBzZXF1ZW5jZS5zbGljZShwb3MsIHBvcyArIGNodW5rLmxlbmd0aCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBhIHJhbmdlIG9mIHNlcXVlbmNlIGRhdGEuXG4gICAqIElmIGFueSBwb3J0aW9ucyBhcmUgdW5rbm93biwgdGhleSB3aWxsIGJlIHNldCB0byAnLicuXG4gICAqL1xuICBnZXRBc1N0cmluZyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IHN0cmluZyB7XG4gICAgY29uc3Qgc2VxcyA9IHRoaXMuX2dldFNlcXVlbmNlcyhyYW5nZS5jb250aWcpO1xuICAgIGlmICghc2Vxcykge1xuICAgICAgcmV0dXJuICcuJy5yZXBlYXQocmFuZ2UubGVuZ3RoKCkpO1xuICAgIH1cblxuICAgIHZhciBjaHVua3MgPSB0aGlzLl9jaHVua0ZvckludGVydmFsKHJhbmdlLmludGVydmFsKTtcbiAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgZm9yICh2YXIgY2h1bmsgb2YgY2h1bmtzKSB7XG4gICAgICB2YXIgc2VxID0gc2Vxc1tjaHVuay5jaHVua1N0YXJ0XTtcbiAgICAgIGlmICghc2VxKSB7XG4gICAgICAgIHJlc3VsdCArPSAnLicucmVwZWF0KGNodW5rLmxlbmd0aCk7XG4gICAgICB9IGVsc2UgaWYgKGNodW5rLm9mZnNldCA9PT0gMCAmJiBjaHVuay5sZW5ndGggPT0gc2VxLmxlbmd0aCkge1xuICAgICAgICByZXN1bHQgKz0gc2VxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ICs9IHNlcS5zbGljZShjaHVuay5vZmZzZXQsIGNodW5rLm9mZnNldCArIGNodW5rLmxlbmd0aCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogTGlrZSBnZXRBc1N0cmluZygpLCBidXQgcmV0dXJucyBhIGxlc3MgZWZmaWNpZW50IG9iamVjdCByZXByZXNlbnRhdGlvbjpcbiAgICogeydjaHIxOjEwJzogJ0EnLCAnY2hyMToxMSc6ICdDJywgLi4ufVxuICAgKi9cbiAgZ2V0QXNPYmplY3RzKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KToge1trZXk6c3RyaW5nXTogP3N0cmluZ30ge1xuICAgIHJldHVybiBfLm9iamVjdChfLm1hcCh0aGlzLmdldEFzU3RyaW5nKHJhbmdlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKGJhc2UsIGkpID0+IFtyYW5nZS5jb250aWcgKyAnOicgKyAocmFuZ2Uuc3RhcnQoKSArIGkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2UgPT0gJy4nID8gbnVsbCA6IGJhc2VdKSk7XG4gIH1cblxuICAvLyBSZXRyaWV2ZSBhIGNodW5rIGZyb20gdGhlIHNlcXVlbmNlIG1hcC5cbiAgX2dldENodW5rKHNlcXM6IFNlcU1hcCwgc3RhcnQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIHNlcXNbc3RhcnRdIHx8ICcuJy5yZXBlYXQoQ0hVTktfU0laRSk7XG4gIH1cblxuICAvLyBTcGxpdCBhbiBpbnRlcnZhbCBpbnRvIGNodW5rcyB3aGljaCBhbGlnbiB3aXRoIHRoZSBzdG9yZS5cbiAgX2NodW5rRm9ySW50ZXJ2YWwocmFuZ2U6IEludGVydmFsKTogQ2h1bmtXaXRoT2Zmc2V0W10ge1xuICAgIHZhciBvZmZzZXQgPSByYW5nZS5zdGFydCAlIENIVU5LX1NJWkUsXG4gICAgICAgIGNodW5rU3RhcnQgPSByYW5nZS5zdGFydCAtIG9mZnNldDtcbiAgICB2YXIgY2h1bmtzID0gW3tcbiAgICAgIGNodW5rU3RhcnQsXG4gICAgICBvZmZzZXQsXG4gICAgICBsZW5ndGg6IE1hdGgubWluKENIVU5LX1NJWkUgLSBvZmZzZXQsIHJhbmdlLmxlbmd0aCgpKVxuICAgIH1dO1xuICAgIGNodW5rU3RhcnQgKz0gQ0hVTktfU0laRTtcbiAgICBmb3IgKDsgY2h1bmtTdGFydCA8PSByYW5nZS5zdG9wOyBjaHVua1N0YXJ0ICs9IENIVU5LX1NJWkUpIHtcbiAgICAgIGNodW5rcy5wdXNoKHtcbiAgICAgICAgY2h1bmtTdGFydCxcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICBsZW5ndGg6IE1hdGgubWluKENIVU5LX1NJWkUsIHJhbmdlLnN0b3AgLSBjaHVua1N0YXJ0ICsgMSlcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY2h1bmtzO1xuICB9XG5cbiAgLy8gU2V0IGEgKHN1YnNldCBvZiBhKSBjaHVuayB0byB0aGUgZ2l2ZW4gc2VxdWVuY2UuXG4gIF9zZXRDaHVuayhzZXFzOiBTZXFNYXAsIGNodW5rOiBDaHVua1dpdGhPZmZzZXQsIHNlcXVlbmNlOiBzdHJpbmcpIHtcbiAgICAvLyBGaXJzdDogdGhlIGVhc3kgY2FzZS4gVG90YWwgcmVwbGFjZW1lbnQuXG4gICAgaWYgKGNodW5rLm9mZnNldCA9PT0gMCAmJiBzZXF1ZW5jZS5sZW5ndGggPT0gQ0hVTktfU0laRSkge1xuICAgICAgc2Vxc1tjaHVuay5jaHVua1N0YXJ0XSA9IHNlcXVlbmNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFdlIG5lZWQgdG8gbWVyZ2UgdGhlIG5ldyBzZXF1ZW5jZSB3aXRoIHRoZSBvbGQuXG4gICAgdmFyIG9sZENodW5rID0gdGhpcy5fZ2V0Q2h1bmsoc2VxcywgY2h1bmsuY2h1bmtTdGFydCk7XG4gICAgc2Vxc1tjaHVuay5jaHVua1N0YXJ0XSA9IG9sZENodW5rLnNsaWNlKDAsIGNodW5rLm9mZnNldCkgK1xuICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZSArXG4gICAgICAgICAgICAgICAgICAgICAgIG9sZENodW5rLnNsaWNlKGNodW5rLm9mZnNldCArIHNlcXVlbmNlLmxlbmd0aCk7XG4gIH1cblxuICAvLyBHZXQgdGhlIHNlcXVlbmNlcyBmb3IgYSBjb250aWcsIGFsbG93aW5nIGNoci0gbWlzbWF0Y2hlcy5cbiAgX2dldFNlcXVlbmNlcyhjb250aWc6IHN0cmluZyk6ID9TZXFNYXAge1xuICAgIHJldHVybiB0aGlzLmNvbnRpZ01hcFtjb250aWddIHx8XG4gICAgICAgICAgIHRoaXMuY29udGlnTWFwW2FsdENvbnRpZ05hbWUoY29udGlnKV0gfHxcbiAgICAgICAgICAgbnVsbDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNlcXVlbmNlU3RvcmU7XG4iLCIvKipcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuXG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2UsIFZpeldpdGhPcHRpb25zfSBmcm9tICcuL3R5cGVzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi92aXovZDN1dGlscyc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBkMyBmcm9tICcuLi9saWIvbWluaWQzJztcblxuZXhwb3J0IHR5cGUgVml6UHJvcHM8VDogYW55PiA9IHtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG4gIHJhbmdlOiBHZW5vbWVSYW5nZTtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG4gIHNvdXJjZTogVDtcbiAgb3B0aW9uczogYW55O1xufTtcblxudHlwZSBQcm9wcyA9IHtcbiAgcmFuZ2U6ID9HZW5vbWVSYW5nZTtcbiAgdmlzdWFsaXphdGlvbjogVml6V2l0aE9wdGlvbnM7XG4gIG9uUmFuZ2VDaGFuZ2U6IChuZXdSYW5nZTogR2Vub21lUmFuZ2UpID0+IHZvaWQ7XG4gIHJlZmVyZW5jZVNvdXJjZTogVHdvQml0U291cmNlO1xuICBzb3VyY2U6IGFueTtcbiAgb3B0aW9uczogP09iamVjdDtcbn07XG5cbnR5cGUgU3RhdGUgPSB7XG4gIHdpZHRoOiBudW1iZXI7IFxuICBoZWlnaHQ6IG51bWJlcjsgXG4gIHVwZGF0ZVNpemU6IGJvb2xlYW47XG59O1xuXG5jbGFzcyBWaXN1YWxpemF0aW9uV3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgcHJvcHM6IFByb3BzO1xuICBzdGF0ZTogU3RhdGU7XG4gIGhhc0RyYWdCZWVuSW5pdGlhbGl6ZWQ6IGJvb2xlYW47XG4gIG9uUmVzaXplTGlzdGVuZXI6IE9iamVjdDsgIC8vbGlzdGVuZXIgdGhhdCBoYW5kbGVzIHdpbmRvdy5vbnJlc2l6ZSBldmVudFxuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBPYmplY3QpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5oYXNEcmFnQmVlbkluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHVwZGF0ZVNpemU6IGZhbHNlLFxuICAgICAgd2lkdGg6IDAsXG4gICAgICBoZWlnaHQ6IDBcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlU2l6ZSgpOiBhbnkge1xuICAgIHZhciB0aGlzTm9kZSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpXG4gICAgaWYgKHRoaXNOb2RlICYmIHRoaXNOb2RlIGluc3RhbmNlb2YgRWxlbWVudCkgeyAvLyBjaGVjayBmb3IgZ2V0Q29udGV4dFxuICAgICAgdmFyIHBhcmVudERpdiA9IHRoaXNOb2RlLnBhcmVudE5vZGU7ICBcbiAgICAgIGlmIChwYXJlbnREaXYgJiYgcGFyZW50RGl2IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHsgLy8gY2hlY2sgZm9yIGdldENvbnRleHRcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgdXBkYXRlU2l6ZTogZmFsc2UsXG4gICAgICAgICAgd2lkdGg6IHBhcmVudERpdi5vZmZzZXRXaWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IHBhcmVudERpdi5vZmZzZXRIZWlnaHRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKTogYW55IHtcbiAgICAvL2xvY2FsIGNvcHkgb2YgdGhlIGxpc3RlbmVyLCBzbyB3ZSBjYW4gcmVtb3ZlIGl0XG4gICAgLy93aGVuIHBpbGV1cCBpcyBkZXN0cm95ZWRcbiAgICB0aGlzLm9uUmVzaXplTGlzdGVuZXIgPSAoKSA9PiB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vblJlc2l6ZUxpc3RlbmVyKTtcbiAgICB0aGlzLnVwZGF0ZVNpemUoKTtcblxuICAgIGlmICh0aGlzLnByb3BzLnJhbmdlICYmICF0aGlzLmhhc0RyYWdCZWVuSW5pdGlhbGl6ZWQpIHRoaXMuYWRkRHJhZ0ludGVyZmFjZSgpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCk6IGFueSB7XG4gICAgaWYgKHRoaXMucHJvcHMucmFuZ2UgJiYgIXRoaXMuaGFzRHJhZ0JlZW5Jbml0aWFsaXplZCkgdGhpcy5hZGREcmFnSW50ZXJmYWNlKCk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpOiBhbnkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uUmVzaXplTGlzdGVuZXIpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogKG51bTogbnVtYmVyKT0+bnVtYmVyIHtcbiAgICBpZiAoIXRoaXMucHJvcHMucmFuZ2UpIHJldHVybiB4ID0+IHg7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnN0YXRlLndpZHRoKTtcbiAgfVxuXG4gIGFkZERyYWdJbnRlcmZhY2UoKTogYW55IHtcbiAgICB0aGlzLmhhc0RyYWdCZWVuSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIHZhciBkaXYgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICB2YXIgb3JpZ2luYWxSYW5nZSwgb3JpZ2luYWxTY2FsZSwgZHg9MDtcbiAgICB2YXIgZHJhZ3N0YXJ0ZWQgPSAoKSA9PiB7XG4gICAgICBkMy5ldmVudC5zb3VyY2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGR4ID0gMDtcbiAgICAgIG9yaWdpbmFsUmFuZ2UgPSBfLmNsb25lKHRoaXMucHJvcHMucmFuZ2UpO1xuICAgICAgb3JpZ2luYWxTY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKTtcbiAgICB9O1xuICAgIHZhciB1cGRhdGVSYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmICghb3JpZ2luYWxTY2FsZSkgcmV0dXJuOyAgLy8gY2FuIG5ldmVyIGhhcHBlbiwgYnV0IEZsb3cgZG9uJ3Qga25vdy5cbiAgICAgIGlmICghb3JpZ2luYWxSYW5nZSkgcmV0dXJuOyAgLy8gY2FuIG5ldmVyIGhhcHBlbiwgYnV0IEZsb3cgZG9uJ3Qga25vdy5cbiAgICAgIHZhciBuZXdTdGFydCA9IG9yaWdpbmFsU2NhbGUuaW52ZXJ0KC1keCksXG4gICAgICAgICAgaW50U3RhcnQgPSBNYXRoLnJvdW5kKG5ld1N0YXJ0KSxcbiAgICAgICAgICBvZmZzZXRQeCA9IG9yaWdpbmFsU2NhbGUobmV3U3RhcnQpIC0gb3JpZ2luYWxTY2FsZShpbnRTdGFydCk7XG5cbiAgICAgIHZhciBuZXdSYW5nZSA9IHtcbiAgICAgICAgY29udGlnOiBvcmlnaW5hbFJhbmdlLmNvbnRpZyxcbiAgICAgICAgc3RhcnQ6IGludFN0YXJ0LFxuICAgICAgICBzdG9wOiBpbnRTdGFydCArIChvcmlnaW5hbFJhbmdlLnN0b3AgLSBvcmlnaW5hbFJhbmdlLnN0YXJ0KSxcbiAgICAgICAgb2Zmc2V0UHg6IG9mZnNldFB4XG4gICAgICB9O1xuICAgICAgdGhpcy5wcm9wcy5vblJhbmdlQ2hhbmdlKG5ld1JhbmdlKTtcbiAgICB9O1xuICAgIHZhciBkcmFnbW92ZSA9ICgpID0+IHtcbiAgICAgIGR4ICs9IGQzLmV2ZW50LmR4OyAgLy8gdGhlc2UgYXJlIGludGVnZXJzLCBzbyBubyByb3VuZG9mZiBpc3N1ZXMuXG4gICAgICB1cGRhdGVSYW5nZSgpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gZHJhZ2VuZGVkKCkge1xuICAgICAgdXBkYXRlUmFuZ2UoKTtcbiAgICB9XG5cbiAgICB2YXIgZHJhZyA9IGQzLmJlaGF2aW9yLmRyYWcoKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGRyYWdzdGFydGVkKVxuICAgICAgICAub24oJ2RyYWcnLCBkcmFnbW92ZSlcbiAgICAgICAgLm9uKCdkcmFnZW5kJywgZHJhZ2VuZGVkKTtcblxuICAgIGQzLnNlbGVjdChkaXYpLmNhbGwoZHJhZykub24oJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKCk6IGFueSB7XG4gICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVcGRhdGUobmV4dFByb3BzOlByb3BzLCBuZXh0U3RhdGU6IE9iamVjdCkge1xuICAgIGlmIChuZXh0U3RhdGUudXBkYXRlU2l6ZSkge1xuICAgICAgdGhpcy51cGRhdGVTaXplKCk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlO1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMucHJvcHMudmlzdWFsaXphdGlvbi5jb21wb25lbnQ7XG4gICAgaWYgKCFyYW5nZSkge1xuICAgICAgaWYgKGNvbXBvbmVudC5kaXNwbGF5TmFtZSAhPSBudWxsKVxuICAgICAgICByZXR1cm4gPEVtcHR5VHJhY2sgY2xhc3NOYW1lPXtjb21wb25lbnQuZGlzcGxheU5hbWV9IC8+O1xuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gPEVtcHR5VHJhY2sgY2xhc3NOYW1lPSdFbXB0eVRyYWNrJyAvPjtcbiAgICB9XG5cbiAgICB2YXIgb3B0aW9ucyA9IF8uZXh0ZW5kKF8uY2xvbmUodGhpcy5wcm9wcy52aXN1YWxpemF0aW9uLm9wdGlvbnMpLHRoaXMucHJvcHMub3B0aW9ucyk7XG5cbiAgICB2YXIgZWwgPSBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudCwgKHtcbiAgICAgIHJhbmdlOiByYW5nZSxcbiAgICAgIHNvdXJjZTogdGhpcy5wcm9wcy5zb3VyY2UsXG4gICAgICByZWZlcmVuY2VTb3VyY2U6IHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLFxuICAgICAgd2lkdGg6IHRoaXMuc3RhdGUud2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMuc3RhdGUuaGVpZ2h0LFxuICAgICAgb3B0aW9uczogb3B0aW9uc1xuICAgIH0gOiBWaXpQcm9wczxhbnk+KSk7XG5cbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9J2RyYWctd3JhcHBlcic+e2VsfTwvZGl2PjtcbiAgfVxufVxuVmlzdWFsaXphdGlvbldyYXBwZXIuZGlzcGxheU5hbWUgPSAnVmlzdWFsaXphdGlvbldyYXBwZXInO1xuXG5cbnR5cGUgRW1wdHlUcmFja1Byb3BzID0ge2NsYXNzTmFtZTogc3RyaW5nfTtcbmNsYXNzIEVtcHR5VHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8RW1wdHlUcmFja1Byb3BzPiB7XG4gIHJlbmRlcigpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5wcm9wcy5jbGFzc05hbWUgKyAnIGVtcHR5JztcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZX0+PC9kaXY+O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVmlzdWFsaXphdGlvbldyYXBwZXI7XG4iLCIvKipcbiAqIFBhcnNlciBmb3IgYmlnQmVkIGZvcm1hdC5cbiAqIEJhc2VkIG9uIFVDU0MncyBzcmMvaW5jL2JiaUZpbGUuaFxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5pbXBvcnQgcGFrbyBmcm9tICdwYWtvL2xpYi9pbmZsYXRlJzsgIC8vIGZvciBnemlwIGluZmxhdGlvblxuXG5pbXBvcnQgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBiYmkgZnJvbSAnLi9mb3JtYXRzL2JiaSc7XG5cblxuZnVuY3Rpb24gcGFyc2VIZWFkZXIoYnVmZmVyKSB7XG4gIC8vIFRPRE86IGNoZWNrIEVuZGlhbm5lc3MgdXNpbmcgbWFnaWMuIFBvc3NpYmx5IHVzZSBqRGF0YVZpZXcubGl0dGxlRW5kaWFuXG4gIC8vIHRvIGZsaXAgdGhlIGVuZGlhbm5lc3MgZm9yIGpCaW5hcnkgY29uc3VtcHRpb24uXG4gIC8vIE5COiBkYWxsaWFuY2UgZG9lc24ndCBzdXBwb3J0IGJpZyBlbmRpYW4gZm9ybWF0cy5cbiAgcmV0dXJuIG5ldyBqQmluYXJ5KGJ1ZmZlciwgYmJpLlRZUEVfU0VUKS5yZWFkKCdIZWFkZXInKTtcbn1cblxuLy8gVGhlIFwiQ0lSXCIgdHJlZSBjb250YWlucyBhIG1hcHBpbmcgZnJvbSBzZXF1ZW5jZSAtPiBibG9jayBvZmZzZXRzLlxuLy8gSXQgc3RhbmRzIGZvciBcIkNocm9tb3NvbWUgSW5kZXggUiB0cmVlXCJcbmZ1bmN0aW9uIHBhcnNlQ2lyVHJlZShidWZmZXIpIHtcbiAgcmV0dXJuIG5ldyBqQmluYXJ5KGJ1ZmZlciwgYmJpLlRZUEVfU0VUKS5yZWFkKCdDaXJUcmVlJyk7XG59XG5cbi8vIEV4dHJhY3QgYSBtYXAgZnJvbSBjb250aWcgbmFtZSAtLT4gY29udGlnIElEIGZyb20gdGhlIGJpZ0JlZCBoZWFkZXIuXG5mdW5jdGlvbiBnZW5lcmF0ZUNvbnRpZ01hcChoZWFkZXIpOiB7W2tleTpzdHJpbmddOiBudW1iZXJ9IHtcbiAgLy8gSnVzdCBhc3N1bWUgaXQncyBhIGZsYXQgXCJ0cmVlXCIgZm9yIG5vdy5cbiAgdmFyIG5vZGVzID0gaGVhZGVyLmNocm9tb3NvbWVUcmVlLm5vZGVzLmNvbnRlbnRzO1xuICBpZiAoIW5vZGVzKSB7XG4gICAgdGhyb3cgJ0ludmFsaWQgY2hyb21vc29tZSB0cmVlJztcbiAgfVxuICByZXR1cm4gXy5vYmplY3Qobm9kZXMubWFwKGZ1bmN0aW9uKHtpZCwga2V5fSkge1xuICAgIC8vIHJlbW92ZSB0cmFpbGluZyBudWxscyBmcm9tIHRoZSBrZXkgc3RyaW5nXG4gICAgcmV0dXJuIFtrZXkucmVwbGFjZSgvXFwwLiovLCAnJyksIGlkXTtcbiAgfSkpO1xufVxuXG4vLyBHZW5lcmF0ZSB0aGUgcmV2ZXJzZSBtYXAgZnJvbSBjb250aWcgSUQgLS0+IGNvbnRpZyBuYW1lLlxuZnVuY3Rpb24gcmV2ZXJzZUNvbnRpZ01hcChjb250aWdNYXA6IHtba2V5OnN0cmluZ106IG51bWJlcn0pOiBBcnJheTxzdHJpbmc+IHtcbiAgdmFyIGFyeSA9IFtdO1xuICBfLmVhY2goY29udGlnTWFwLCAoaW5kZXgsIG5hbWUpID0+IHtcbiAgICBhcnlbaW5kZXhdID0gbmFtZTtcbiAgfSk7XG4gIHJldHVybiBhcnk7XG59XG5cblxuZnVuY3Rpb24gZXh0cmFjdEZlYXR1cmVzRnJvbUJsb2NrKGJ1ZmZlcjogQXJyYXlCdWZmZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVJhbmdlOiBJbnRlcnZhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jazogTGVhZkRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDb21wcmVzc2VkOiBib29sZWFuKTogQ2hySWRCZWRSb3dbXSB7XG4gIHZhciBibG9ja09mZnNldCA9IGJsb2NrLm9mZnNldCAtIGRhdGFSYW5nZS5zdGFydCxcbiAgICAgIGJsb2NrTGltaXQgPSBibG9ja09mZnNldCArIGJsb2NrLnNpemUsXG5cbiAgICAgIGJsb2NrQnVmZmVyID1cbiAgICAgICAgLy8gTk9URTogXCIrIDJcIiBza2lwcyBvdmVyIHR3byBieXRlcyBvZiBnemlwIGhlYWRlciAoMHg4YjFmKSwgd2hpY2ggcGFrby5pbmZsYXRlUmF3IHdpbGwgbm90IGhhbmRsZS5cbiAgICAgICAgYnVmZmVyLnNsaWNlKFxuICAgICAgICAgIGJsb2NrT2Zmc2V0ICsgKGlzQ29tcHJlc3NlZCA/IDIgOiAwKSxcbiAgICAgICAgICBibG9ja0xpbWl0XG4gICAgICAgICk7XG5cbiAgdmFyIGluZmxhdGVkQnVmZmVyID1cbiAgICBpc0NvbXByZXNzZWQgP1xuICAgICAgcGFrby5pbmZsYXRlUmF3KG5ldyBVaW50OEFycmF5KGJsb2NrQnVmZmVyKSkgOlxuICAgICAgYmxvY2tCdWZmZXI7XG5cbiAgdmFyIGpiID0gbmV3IGpCaW5hcnkoaW5mbGF0ZWRCdWZmZXIsIGJiaS5UWVBFX1NFVCk7XG4gIC8vIFRPRE86IHBhcnNlIG9ubHkgb25lIEJlZEVudHJ5IGF0IGEgdGltZSAmIHVzZSBhbiBpdGVyYXRvci5cbiAgcmV0dXJuIGpiLnJlYWQoJ0JlZEJsb2NrJyk7XG59XG5cblxudHlwZSBCZWRSb3cgPSB7XG4gIC8vIEhhbGYtb3BlbiBpbnRlcnZhbCBmb3IgdGhlIEJFRCByb3cuXG4gIGNvbnRpZzogc3RyaW5nO1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG4gIC8vIFJlbWFpbmluZyBmaWVsZHMgaW4gdGhlIEJFRCByb3cgKHR5cGljYWxseSB0YWItZGVsaW1pdGVkKVxuICByZXN0OiBzdHJpbmc7XG59XG5cbnR5cGUgQ2hySWRCZWRSb3cgPSB7XG4gIGNocklkOiBudW1iZXI7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjsgIC8vIG5vdGU6IG5vdCBpbmNsdXNpdmVcbiAgcmVzdDogc3RyaW5nO1xufVxuXG4vLyBBbGwgZmVhdHVyZXMgZm91bmQgaW4gcmFuZ2UuXG50eXBlIEJlZEJsb2NrID0ge1xuICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPjtcbiAgcm93czogQmVkUm93W107XG59XG5cbnR5cGUgQ2hySWRCZWRCbG9jayA9IHtcbiAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj47XG4gIHJvd3M6IENocklkQmVkUm93W107XG59XG5cbi8vIEEgY29weSBvZiBMZWFmRGF0YSBmcm9tIGJiaS5qcy5cbnR5cGUgTGVhZkRhdGEgPSB7XG4gIHN0YXJ0Q2hyb21JeDogbnVtYmVyO1xuICBzdGFydEJhc2U6IG51bWJlcjtcbiAgZW5kQ2hyb21JeDogbnVtYmVyO1xuICBlbmRCYXNlOiBudW1iZXI7XG4gIG9mZnNldDogbnVtYmVyO1xuICBzaXplOiBudW1iZXI7XG59XG5cbi8vIFRoaXMgKGludGVybmFsKSB2ZXJzaW9uIG9mIHRoZSBCaWdCZWQgY2xhc3MgaGFzIG5vIHByb21pc2VzIGZvciBoZWFkZXJzLFxuLy8gb25seSBpbW1lZGlhdGUgZGF0YS4gVGhpcyBncmVhdGx5IHNpbXBsaWZpZXMgd3JpdGluZyBtZXRob2RzIG9uIGl0LlxuY2xhc3MgSW1tZWRpYXRlQmlnQmVkIHtcbiAgcmVtb3RlRmlsZTogUmVtb3RlRmlsZTtcbiAgaGVhZGVyOiBPYmplY3Q7XG4gIGNpclRyZWU6IE9iamVjdDtcbiAgY29udGlnTWFwOiB7W2tleTpzdHJpbmddOiBudW1iZXJ9O1xuICBjaHJJZFRvQ29udGlnOiBzdHJpbmdbXTtcblxuICBjb25zdHJ1Y3RvcihyZW1vdGVGaWxlLCBoZWFkZXIsIGNpclRyZWUsIGNvbnRpZ01hcDoge1trZXk6c3RyaW5nXTogbnVtYmVyfSkge1xuICAgIHRoaXMucmVtb3RlRmlsZSA9IHJlbW90ZUZpbGU7XG4gICAgdGhpcy5oZWFkZXIgPSBoZWFkZXI7XG4gICAgdGhpcy5jaXJUcmVlID0gY2lyVHJlZTtcbiAgICB0aGlzLmNvbnRpZ01hcCA9IGNvbnRpZ01hcDtcbiAgICB0aGlzLmNocklkVG9Db250aWcgPSByZXZlcnNlQ29udGlnTWFwKGNvbnRpZ01hcCk7XG4gIH1cblxuICAvLyBNYXAgY29udGlnIG5hbWUgdG8gY29udGlnIElELiBMZWFkaW5nIFwiY2hyXCIgaXMgb3B0aW9uYWwuIFRocm93cyBvbiBmYWlsdXJlLlxuICBnZXRDb250aWdJZChjb250aWc6IHN0cmluZyk6IG51bWJlciB7XG4gICAgaWYgKGNvbnRpZyBpbiB0aGlzLmNvbnRpZ01hcCkgcmV0dXJuIHRoaXMuY29udGlnTWFwW2NvbnRpZ107XG4gICAgdmFyIGNociA9ICdjaHInICsgY29udGlnO1xuICAgIGlmIChjaHIgaW4gdGhpcy5jb250aWdNYXApIHJldHVybiB0aGlzLmNvbnRpZ01hcFtjaHJdO1xuICAgIHRocm93IGBJbnZhbGlkIGNvbnRpZyAke2NvbnRpZ31gO1xuICB9XG5cbiAgZ2V0Q2hySWRJbnRlcnZhbChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IENvbnRpZ0ludGVydmFsPG51bWJlcj4ge1xuICAgIHJldHVybiBuZXcgQ29udGlnSW50ZXJ2YWwoXG4gICAgICAgIHRoaXMuZ2V0Q29udGlnSWQocmFuZ2UuY29udGlnKSwgcmFuZ2Uuc3RhcnQoKSwgcmFuZ2Uuc3RvcCgpKTtcbiAgfVxuXG4gIGdldENvbnRpZ0ludGVydmFsKHJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+KTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbChcbiAgICAgICAgdGhpcy5jaHJJZFRvQ29udGlnW3JhbmdlLmNvbnRpZ10sIHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSk7XG4gIH1cblxuICAvLyBCZWQgZW50cmllcyBoYXZlIGEgY2hyb21vc29tZSBJRC4gVGhpcyBjb252ZXJ0cyB0aGF0IHRvIGEgY29udGlnIHN0cmluZy5cbiAgYXR0YWNoQ29udGlnVG9CZWRSb3dzKGJlZHM6IENocklkQmVkUm93W10pOiBCZWRSb3dbXSB7XG4gICAgcmV0dXJuIGJlZHMubWFwKGJlZCA9PiAoe1xuICAgICAgY29udGlnOiB0aGlzLmNocklkVG9Db250aWdbYmVkLmNocklkXSxcbiAgICAgIHN0YXJ0OiBiZWQuc3RhcnQsXG4gICAgICBzdG9wOiBiZWQuc3RvcCxcbiAgICAgIHJlc3Q6IGJlZC5yZXN0XG4gICAgfSkpO1xuICB9XG5cbiAgLy8gRmluZCBhbGwgYmxvY2tzIGNvbnRhaW5pbmcgZmVhdHVyZXMgd2hpY2ggaW50ZXJzZWN0IHdpdGggY29udGlnUmFuZ2UuXG4gIGZpbmRPdmVybGFwcGluZ0Jsb2NrcyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPik6IEFycmF5PExlYWZEYXRhPiB7XG4gICAgLy8gRG8gYSByZWN1cnNpdmUgc2VhcmNoIHRocm91Z2ggdGhlIGluZGV4IHRyZWVcbiAgICB2YXIgbWF0Y2hpbmdCbG9ja3MgPSBbXTtcbiAgICB2YXIgdHVwbGVSYW5nZSA9IFtbcmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCgpXSxcbiAgICAgICAgICAgICAgICAgICAgICBbcmFuZ2UuY29udGlnLCByYW5nZS5zdG9wKCldXTtcbiAgICB2YXIgZmluZCA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIGlmIChub2RlLmNvbnRlbnRzKSB7XG4gICAgICAgIG5vZGUuY29udGVudHMuZm9yRWFjaChmaW5kKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBub2RlUmFuZ2UgPVxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFtub2RlLnN0YXJ0Q2hyb21JeCwgbm9kZS5zdGFydEJhc2VdLFxuICAgICAgICAgICAgW25vZGUuZW5kQ2hyb21JeCwgbm9kZS5lbmRCYXNlXVxuICAgICAgICAgIF07XG5cbiAgICAgICAgaWYgKHV0aWxzLnR1cGxlUmFuZ2VPdmVybGFwcyhub2RlUmFuZ2UsIHR1cGxlUmFuZ2UpKSB7XG4gICAgICAgICAgbWF0Y2hpbmdCbG9ja3MucHVzaChub2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgZmluZCh0aGlzLmNpclRyZWUuYmxvY2tzKTtcblxuICAgIHJldHVybiBtYXRjaGluZ0Jsb2NrcztcbiAgfVxuXG4gIC8vIEludGVybmFsIGZ1bmN0aW9uIGZvciBmZXRjaGluZyBmZWF0dXJlcyBieSBibG9jay5cbiAgZmV0Y2hGZWF0dXJlc0J5QmxvY2socmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBRLlByb21pc2U8Q2hySWRCZWRCbG9ja1tdPiB7XG4gICAgdmFyIGJsb2NrcyA9IHRoaXMuZmluZE92ZXJsYXBwaW5nQmxvY2tzKHJhbmdlKTtcbiAgICBpZiAoYmxvY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFEud2hlbihbXSk7XG4gICAgfVxuXG4gICAgLy8gRmluZCB0aGUgcmFuZ2UgaW4gdGhlIGZpbGUgd2hpY2ggY29udGFpbnMgYWxsIHJlbGV2YW50IGJsb2Nrcy5cbiAgICAvLyBJbiB0aGVvcnkgdGhlcmUgY291bGQgYmUgZ2FwcyBiZXR3ZWVuIGJsb2NrcywgYnV0IGl0J3MgaGFyZCB0byBzZWUgaG93LlxuICAgIHZhciBieXRlUmFuZ2UgPSBJbnRlcnZhbC5ib3VuZGluZ0ludGVydmFsKFxuICAgICAgICBibG9ja3MubWFwKG4gPT4gbmV3IEludGVydmFsKCtuLm9mZnNldCwgbi5vZmZzZXQrbi5zaXplKSkpO1xuXG4gICAgdmFyIGlzQ29tcHJlc3NlZCA9ICh0aGlzLmhlYWRlci51bmNvbXByZXNzQnVmU2l6ZSA+IDApO1xuICAgIHJldHVybiB0aGlzLnJlbW90ZUZpbGUuZ2V0Qnl0ZXMoYnl0ZVJhbmdlLnN0YXJ0LCBieXRlUmFuZ2UubGVuZ3RoKCkpXG4gICAgICAgIC50aGVuKGJ1ZmZlciA9PiB7XG4gICAgICAgICAgcmV0dXJuIGJsb2Nrcy5tYXAoYmxvY2sgPT4ge1xuICAgICAgICAgICAgdmFyIGJlZHMgPSBleHRyYWN0RmVhdHVyZXNGcm9tQmxvY2soYnVmZmVyLCBieXRlUmFuZ2UsIGJsb2NrLCBpc0NvbXByZXNzZWQpO1xuICAgICAgICAgICAgaWYgKGJsb2NrLnN0YXJ0Q2hyb21JeCAhPSBibG9jay5lbmRDaHJvbUl4KSB7XG4gICAgICAgICAgICAgIHRocm93IGBDYW4ndCBoYW5kbGUgYmxvY2tzIHdoaWNoIHNwYW4gY2hyb21vc29tZXMhYDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgcmFuZ2U6IG5ldyBDb250aWdJbnRlcnZhbChibG9jay5zdGFydENocm9tSXgsIGJsb2NrLnN0YXJ0QmFzZSwgYmxvY2suZW5kQmFzZSksXG4gICAgICAgICAgICAgIHJvd3M6IGJlZHNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICB9XG5cbiAgLy8gVE9ETzogbWVyZ2UgdGhpcyBpbnRvIGdldEZlYXR1cmVzSW5SYW5nZVxuICAvLyBGZXRjaCB0aGUgcmVsZXZhbnQgYmxvY2tzIGZyb20gdGhlIGJpZ0JlZCBmaWxlIGFuZCBleHRyYWN0IHRoZSBmZWF0dXJlc1xuICAvLyB3aGljaCBvdmVybGFwIHRoZSBnaXZlbiByYW5nZS5cbiAgZmV0Y2hGZWF0dXJlcyhjb250aWdSYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPik6IFEuUHJvbWlzZTxCZWRSb3dbXT4ge1xuICAgIHJldHVybiB0aGlzLmZldGNoRmVhdHVyZXNCeUJsb2NrKGNvbnRpZ1JhbmdlKVxuICAgICAgICAudGhlbihiZWRzQnlCbG9jayA9PiB7XG4gICAgICAgICAgdmFyIGJlZHMgPSBfLmZsYXR0ZW4oYmVkc0J5QmxvY2subWFwKGIgPT4gYi5yb3dzKSk7XG5cbiAgICAgICAgICBiZWRzID0gYmVkcy5maWx0ZXIoZnVuY3Rpb24oYmVkKSB7XG4gICAgICAgICAgICAvLyBOb3RlOiBCRUQgaW50ZXJ2YWxzIGFyZSBleHBsaWNpdGx5IGhhbGYtb3Blbi5cbiAgICAgICAgICAgIC8vIFRoZSBcIi0gMVwiIGNvbnZlcnRzIHRoZW0gdG8gY2xvc2VkIGludGVydmFscyBmb3IgQ29udGlnSW50ZXJ2YWwuXG4gICAgICAgICAgICB2YXIgYmVkSW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwoYmVkLmNocklkLCBiZWQuc3RhcnQsIGJlZC5zdG9wIC0gMSk7XG4gICAgICAgICAgICByZXR1cm4gY29udGlnUmFuZ2UuaW50ZXJzZWN0cyhiZWRJbnRlcnZhbCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gdGhpcy5hdHRhY2hDb250aWdUb0JlZFJvd3MoYmVkcyk7XG4gICAgICAgIH0pO1xuICB9XG5cbiAgZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogUS5Qcm9taXNlPEJlZFJvd1tdPiB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hGZWF0dXJlcyh0aGlzLmdldENocklkSW50ZXJ2YWwocmFuZ2UpKTtcbiAgfVxuXG4gIGdldEZlYXR1cmVCbG9ja3NPdmVybGFwcGluZyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IFEuUHJvbWlzZTxCZWRCbG9ja1tdPiB7XG4gICAgdmFyIGluZGV4UmFuZ2UgPSB0aGlzLmdldENocklkSW50ZXJ2YWwocmFuZ2UpO1xuICAgIHJldHVybiB0aGlzLmZldGNoRmVhdHVyZXNCeUJsb2NrKGluZGV4UmFuZ2UpXG4gICAgICAgIC50aGVuKGZlYXR1cmVCbG9ja3MgPT4ge1xuICAgICAgICAgIC8vIENvbnZlcnQgY2hySWRzIHRvIGNvbnRpZyBzdHJpbmdzLlxuICAgICAgICAgIHJldHVybiBmZWF0dXJlQmxvY2tzLm1hcChmYiA9PiAoe1xuICAgICAgICAgICAgcmFuZ2U6IHRoaXMuZ2V0Q29udGlnSW50ZXJ2YWwoZmIucmFuZ2UpLFxuICAgICAgICAgICAgcm93czogdGhpcy5hdHRhY2hDb250aWdUb0JlZFJvd3MoZmIucm93cylcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICB9XG5cbn1cblxuXG5jbGFzcyBCaWdCZWQge1xuICByZW1vdGVGaWxlOiBSZW1vdGVGaWxlO1xuICBoZWFkZXI6IFEuUHJvbWlzZTxhbnk+O1xuICBjaXJUcmVlOiBRLlByb21pc2U8YW55PjtcbiAgY29udGlnTWFwOiBRLlByb21pc2U8e1trZXk6c3RyaW5nXTogbnVtYmVyfT47XG4gIGltbWVkaWF0ZTogUS5Qcm9taXNlPEltbWVkaWF0ZUJpZ0JlZD47XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgdG8gcmVxdWVzdCBmZWF0dXJlcyBmcm9tIGEgcmVtb3RlIGJpZ0JlZCBmaWxlLlxuICAgKiBUaGUgcmVtb3RlIHNvdXJjZSBtdXN0IHN1cHBvcnQgSFRUUCBSYW5nZSBoZWFkZXJzLlxuICAgKiBUaGlzIHdpbGwga2ljayBvZmYgc2V2ZXJhbCBhc3luYyByZXF1ZXN0cyBmb3IgcG9ydGlvbnMgb2YgdGhlIGZpbGUuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgIHRoaXMucmVtb3RlRmlsZSA9IG5ldyBSZW1vdGVGaWxlKHVybCk7XG4gICAgdGhpcy5oZWFkZXIgPSB0aGlzLnJlbW90ZUZpbGUuZ2V0Qnl0ZXMoMCwgNjQqMTAyNCkudGhlbihwYXJzZUhlYWRlcik7XG4gICAgdGhpcy5jb250aWdNYXAgPSB0aGlzLmhlYWRlci50aGVuKGdlbmVyYXRlQ29udGlnTWFwKTtcblxuICAgIC8vIE5leHQ6IGZldGNoIHRoZSBibG9jayBpbmRleCBhbmQgcGFyc2Ugb3V0IHRoZSBcIkNJUlwiIHRyZWUuXG4gICAgdGhpcy5jaXJUcmVlID0gdGhpcy5oZWFkZXIudGhlbihoZWFkZXIgPT4ge1xuICAgICAgLy8gem9vbUhlYWRlcnNbMF0uZGF0YU9mZnNldCBpcyB0aGUgbmV4dCBlbnRyeSBpbiB0aGUgZmlsZS5cbiAgICAgIC8vIFdlIGFzc3VtZSB0aGUgXCJjaXJUcmVlXCIgc2VjdGlvbiBnb2VzIGFsbCB0aGUgd2F5IHRvIHRoYXQgcG9pbnQuXG4gICAgICAvLyBMYWNraW5nIHpvb20gaGVhZGVycywgYXNzdW1lIGl0J3MgNGsuXG4gICAgICAvLyBUT0RPOiBmZXRjaCBtb3JlIHRoYW4gNGsgaWYgbmVjZXNzYXJ5XG4gICAgICB2YXIgc3RhcnQgPSBoZWFkZXIudW56b29tZWRJbmRleE9mZnNldCxcbiAgICAgICAgICB6b29tSGVhZGVyID0gaGVhZGVyLnpvb21IZWFkZXJzWzBdLFxuICAgICAgICAgIGxlbmd0aCA9IHpvb21IZWFkZXIgPyB6b29tSGVhZGVyLmRhdGFPZmZzZXQgLSBzdGFydCA6IDQwOTY7XG4gICAgICByZXR1cm4gdGhpcy5yZW1vdGVGaWxlLmdldEJ5dGVzKHN0YXJ0LCBsZW5ndGgpLnRoZW4ocGFyc2VDaXJUcmVlKTtcbiAgICB9KTtcblxuICAgIHRoaXMuaW1tZWRpYXRlID0gUS5hbGwoW3RoaXMuaGVhZGVyLCB0aGlzLmNpclRyZWUsIHRoaXMuY29udGlnTWFwXSlcbiAgICAgICAgLnRoZW4oKFtoZWFkZXIsIGNpclRyZWUsIGNvbnRpZ01hcF0pID0+IHtcbiAgICAgICAgICB2YXIgY206IHtba2V5OnN0cmluZ106IG51bWJlcn0gPSBjb250aWdNYXA7XG4gICAgICAgICAgcmV0dXJuIG5ldyBJbW1lZGlhdGVCaWdCZWQodGhpcy5yZW1vdGVGaWxlLCBoZWFkZXIsIGNpclRyZWUsIGNtKTtcbiAgICAgICAgfSk7XG5cbiAgICAvLyBCdWJibGUgdXAgZXJyb3JzXG4gICAgdGhpcy5pbW1lZGlhdGUuZG9uZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIEJFRCBlbnRyaWVzIHdoaWNoIG92ZXJsYXAgdGhlIHJhbmdlLlxuICAgKiBOb3RlOiB3aGlsZSB0aGUgcmVxdWVzdGVkIHJhbmdlIGlzIGluY2x1c2l2ZSBvbiBib3RoIGVuZHMsIHJhbmdlcyBpblxuICAgKiBiaWdCZWQgZm9ybWF0IGZpbGVzIGFyZSBoYWxmLW9wZW4gKGluY2x1c2l2ZSBhdCB0aGUgc3RhcnQsIGV4Y2x1c2l2ZSBhdFxuICAgKiB0aGUgZW5kKS5cbiAgICovXG4gIGdldEZlYXR1cmVzSW5SYW5nZShjb250aWc6IHN0cmluZywgc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogUS5Qcm9taXNlPEFycmF5PEJlZFJvdz4+IHtcbiAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoY29udGlnLCBzdGFydCwgc3RvcCk7XG4gICAgcmV0dXJuIHRoaXMuaW1tZWRpYXRlLnRoZW4oaW0gPT4gaW0uZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgZmVhdHVyZXMgaW4gYmxvY2tzIG92ZXJsYXBwaW5nIHRoZSBnaXZlbiByYW5nZS5cbiAgICogQmVjYXVzZSB0aGVzZSBmZWF0dXJlcyBtdXN0IGFsbCBiZSBmZXRjaGVkLCBkZWNvbXByZXNzZWQgYW5kIHBhcnNlZFxuICAgKiBhbnl3YXksIHRoaXMgY2FuIGJlIGhlbHBmdWwgZm9yIHVwc3RyZWFtIGNhY2hpbmcuXG4gICAqL1xuICBnZXRGZWF0dXJlQmxvY2tzT3ZlcmxhcHBpbmcocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBRLlByb21pc2U8QXJyYXk8QmVkQmxvY2s+PiB7XG4gICAgcmV0dXJuIHRoaXMuaW1tZWRpYXRlLnRoZW4oaW0gPT4gaW0uZ2V0RmVhdHVyZUJsb2Nrc092ZXJsYXBwaW5nKHJhbmdlKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBCaWdCZWQ7XG4iLCIvKipcbiAqIFRoaXMgY2xhc3MgcGFyc2VzIGFuZCByZXByZXNlbnRzIGEgc2luZ2xlIHJlYWQgaW4gYSBTQU0vQkFNIGZpbGUuXG4gKlxuICogVGhpcyBpcyB1c2VkIGluc3RlYWQgb2YgcGFyc2luZyBkaXJlY3RseSB2aWEgakJpbmFyeSBpbiBvcmRlciB0bzpcbiAqIC0gTWFrZSB0aGUgcGFyc2luZyBsYXp5IChmb3Igc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2Ugd2lucylcbiAqIC0gTWFrZSB0aGUgcmVzdWx0aW5nIG9iamVjdCBtb3JlIHByZWNpc2VseSB0eXBlZC5cbiAqXG4gKiBQYXJzaW5nIHJlYWRzIHVzaW5nIFNhbVJlYWQgaXMgfjItM3ggZmFzdGVyIHRoYW4gdXNpbmcgakJpbmFyeSBhbmRcbiAqIFRoaW5BbGlnbm1lbnQgZGlyZWN0bHkuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4vVmlydHVhbE9mZnNldCc7XG5pbXBvcnQgdHlwZSB7U3RyYW5kLCBDaWdhck9wLCBNYXRlUHJvcGVydGllc30gZnJvbSAnLi4vQWxpZ25tZW50JztcblxuaW1wb3J0IGpEYXRhVmlldyBmcm9tICdqZGF0YXZpZXcnO1xuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBiYW1UeXBlcyBmcm9tICcuL2Zvcm1hdHMvYmFtVHlwZXMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcblxuLy8gVE9ETzogTWFrZSBtb3JlIGV4dGVuc2l2ZSB1c2Ugb2YgdGhlIGpCaW5hcnkgc3BlY3MuXG5cblxudmFyIENJR0FSX09QUyA9IFsnTScsICdJJywgJ0QnLCAnTicsICdTJywgJ0gnLCAnUCcsICc9JywgJ1gnXTtcblxudmFyIFNFUVVFTkNFX1ZBTFVFUyA9IFsnPScsICdBJywgJ0MnLCAnTScsICdHJywgJ1InLCAnUycsICdWJyxcbiAgICAgICAgICAgICAgICAgICAgICAgJ1QnLCAnVycsICdZJywgJ0gnLCAnSycsICdEJywgJ0InLCAnTiddO1xuXG5cbmZ1bmN0aW9uIHN0cmFuZEZsYWdUb1N0cmluZyhyZXZlcnNlU3RyYW5kOiBudW1iZXIpOiBTdHJhbmQge1xuICByZXR1cm4gcmV2ZXJzZVN0cmFuZCA/ICctJyA6ICcrJztcbn1cblxuXG5jbGFzcyBTYW1SZWFkIC8qIGltcGxlbWVudHMgQWxpZ25tZW50ICovIHtcbiAgYnVmZmVyOiBBcnJheUJ1ZmZlcjtcbiAgb2Zmc2V0OiBWaXJ0dWFsT2Zmc2V0O1xuXG4gIHBvczogbnVtYmVyO1xuICByZWZJRDogbnVtYmVyO1xuICByZWY6IHN0cmluZztcbiAgbF9zZXE6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xuICBjaWdhck9wczogQ2lnYXJPcFtdO1xuXG4gIC8vIGNhY2hlZCB2YWx1ZXNcbiAgX2Z1bGw6ID9PYmplY3Q7XG4gIF9zZXE6ID9zdHJpbmc7XG4gIF9pbnRlcnZhbDogP0NvbnRpZ0ludGVydmFsPHN0cmluZz47XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBidWZmZXIgY29udGFpbnMgdGhlIHJhdyBieXRlcyBvZiB0aGUgc2VyaWFsaXplZCBCQU0gcmVhZC4gSXQgbXVzdFxuICAgKiAgICAgY29udGFpbiBhdCBsZWFzdCBvbmUgZnVsbCByZWFkIChidXQgbWF5IGNvbnRhaW4gbW9yZSkuXG4gICAqIEBwYXJhbSBvZmZzZXQgcmVjb3JkcyB3aGVyZSB0aGlzIGFsaWdubWVudCBpcyBsb2NhdGVkIGluIHRoZSBCQU0gZmlsZS4gSXQnc1xuICAgKiAgICAgdXNlZnVsIGFzIGEgdW5pcXVlIElEIGZvciBhbGlnbm1lbnRzLlxuICAgKiBAcGFyYW0gcmVmIGlzIHRoZSBodW1hbi1yZWFkYWJsZSBuYW1lIG9mIHRoZSByZWZlcmVuY2UvY29udGlnICh0aGUgYmluYXJ5XG4gICAqICAgICBlbmNvZGluZyBvbmx5IGNvbnRhaW5zIGFuIElEKS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIG9mZnNldDogVmlydHVhbE9mZnNldCwgcmVmOiBzdHJpbmcpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcblxuICAgIC8vIEdvIGFoZWFkIGFuZCBwYXJzZSBhIGZldyBmaWVsZHMgaW1tZWRpYXRlbHkuXG4gICAgdmFyIGp2ID0gdGhpcy5fZ2V0SkRhdGFWaWV3KCk7XG4gICAgdGhpcy5yZWZJRCA9IGp2LmdldEludDMyKDApO1xuICAgIHRoaXMucmVmID0gcmVmO1xuICAgIHRoaXMucG9zID0ganYuZ2V0SW50MzIoNCk7XG4gICAgdGhpcy5sX3NlcSA9IGp2LmdldEludDMyKDE2KTtcbiAgICB0aGlzLmNpZ2FyT3BzID0gdGhpcy5fZ2V0Q2lnYXJPcHMoKTtcbiAgICB0aGlzLm5hbWUgPSB0aGlzLl9nZXROYW1lKCk7XG4gIH1cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHZhciBzdG9wID0gdGhpcy5wb3MgKyB0aGlzLmxfc2VxO1xuICAgIHJldHVybiBgJHt0aGlzLnJlZn06JHsxK3RoaXMucG9zfS0ke3N0b3B9YDtcbiAgfVxuXG4gIF9nZXRKRGF0YVZpZXcoKTogakRhdGFWaWV3IHtcbiAgICB2YXIgYiA9IHRoaXMuYnVmZmVyO1xuICAgIHJldHVybiBuZXcgakRhdGFWaWV3KGIsIDAsIGIuYnl0ZUxlbmd0aCwgdHJ1ZSAvKiBsaXR0bGUgZW5kaWFuICovKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGlkZW50aWZpZXIgd2hpY2ggaXMgdW5pcXVlIHdpdGhpbiB0aGUgQkFNIGZpbGUuXG4gICAqL1xuICBnZXRLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5vZmZzZXQudG9TdHJpbmcoKTtcbiAgfVxuXG4gIF9nZXROYW1lKCk6IHN0cmluZyB7XG4gICAgdmFyIGp2ID0gdGhpcy5fZ2V0SkRhdGFWaWV3KCk7XG4gICAgdmFyIGxfcmVhZF9uYW1lID0ganYuZ2V0VWludDgoOCk7XG4gICAganYuc2VlaygzMik7ICAvLyB0aGUgcmVhZC1uYW1lIHN0YXJ0cyBhdCBieXRlIDMyXG4gICAgcmV0dXJuIGp2LmdldFN0cmluZyhsX3JlYWRfbmFtZSAtIDEpOyAgLy8gaWdub3JlIG51bGwtdGVybWluYXRvclxuICB9XG5cbiAgZ2V0RmxhZygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nZXRKRGF0YVZpZXcoKS5nZXRVaW50MTYoMTQpO1xuICB9XG5cbiAgZ2V0SW5mZXJyZWRJbnNlcnRTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2dldEpEYXRhVmlldygpLmdldFVpbnQxNigyOCk7XG4gIH1cblxuICBnZXRTdHJhbmQoKTogU3RyYW5kIHtcbiAgICByZXR1cm4gc3RyYW5kRmxhZ1RvU3RyaW5nKHRoaXMuZ2V0RmxhZygpICYgYmFtVHlwZXMuRmxhZ3MuUkVBRF9TVFJBTkQpO1xuICB9XG5cbiAgLy8gVE9ETzogZ2V0IHJpZCBvZiB0aGlzOyBtb3ZlIGFsbCBtZXRob2RzIGludG8gU2FtUmVhZC5cbiAgZ2V0RnVsbCgpOiBPYmplY3Qge1xuICAgIGlmICh0aGlzLl9mdWxsKSByZXR1cm4gdGhpcy5fZnVsbDtcbiAgICB2YXIgamIgPSBuZXcgakJpbmFyeSh0aGlzLmJ1ZmZlciwgYmFtVHlwZXMuVFlQRV9TRVQpO1xuICAgIHZhciBmdWxsID0gamIucmVhZChiYW1UeXBlcy5UaGlja0FsaWdubWVudCwgMCk7XG4gICAgdGhpcy5fZnVsbCA9IGZ1bGw7XG4gICAgcmV0dXJuIGZ1bGw7XG4gIH1cblxuICBnZXRJbnRlcnZhbCgpOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+IHtcbiAgICBpZiAodGhpcy5faW50ZXJ2YWwpIHJldHVybiB0aGlzLl9pbnRlcnZhbDsgIC8vIHVzZSB0aGUgY2FjaGVcbiAgICB2YXIgaW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwodGhpcy5yZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcyArIHRoaXMuZ2V0UmVmZXJlbmNlTGVuZ3RoKCkgLSAxKTtcbiAgICByZXR1cm4gaW50ZXJ2YWw7XG4gIH1cblxuICBpbnRlcnNlY3RzKGludGVydmFsOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGludGVydmFsLmludGVyc2VjdHModGhpcy5nZXRJbnRlcnZhbCgpKTtcbiAgfVxuXG4gIF9nZXRDaWdhck9wcygpOiBDaWdhck9wW10ge1xuICAgIHZhciBqdiA9IHRoaXMuX2dldEpEYXRhVmlldygpLFxuICAgICAgICBsX3JlYWRfbmFtZSA9IGp2LmdldFVpbnQ4KDgpLFxuICAgICAgICBuX2NpZ2FyX29wID0ganYuZ2V0VWludDE2KDEyKSxcbiAgICAgICAgcG9zID0gMzIgKyBsX3JlYWRfbmFtZSxcbiAgICAgICAgY2lnYXJfb3BzID0gbmV3IEFycmF5KG5fY2lnYXJfb3ApO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbl9jaWdhcl9vcDsgaSsrKSB7XG4gICAgICB2YXIgdiA9IGp2LmdldFVpbnQzMihwb3MgKyA0ICogaSk7XG4gICAgICBjaWdhcl9vcHNbaV0gPSB7XG4gICAgICAgIG9wOiBDSUdBUl9PUFNbdiAmIDB4Zl0sXG4gICAgICAgIGxlbmd0aDogdiA+PiA0XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gY2lnYXJfb3BzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgcGVyLWJhc2UgcXVhbGl0eSBzY29yZXMgZnJvbSAwLTI1NS5cbiAgICovXG4gIGdldFF1YWxpdHlTY29yZXMoKTogbnVtYmVyW10ge1xuICAgIHZhciBqdiA9IHRoaXMuX2dldEpEYXRhVmlldygpLFxuICAgICAgICBsX3JlYWRfbmFtZSA9IGp2LmdldFVpbnQ4KDgpLFxuICAgICAgICBuX2NpZ2FyX29wID0ganYuZ2V0VWludDE2KDEyKSxcbiAgICAgICAgbF9zZXEgPSBqdi5nZXRJbnQzMigxNiksXG4gICAgICAgIHBvcyA9IDMyICsgbF9yZWFkX25hbWUgKyA0ICogbl9jaWdhcl9vcCArIE1hdGguY2VpbChsX3NlcSAvIDIpO1xuICAgIHJldHVybiBqdi5nZXRCeXRlcyhsX3NlcSwgcG9zLCB0cnVlIC8qIGxpdHRsZSBlbmRpYW4gKi8sIHRydWUgLyogdG9BcnJheSAqLyk7XG4gIH1cblxuICBnZXRDaWdhclN0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBtYWtlQ2lnYXJTdHJpbmcodGhpcy5nZXRGdWxsKCkuY2lnYXIpO1xuICB9XG5cbiAgZ2V0UXVhbFBocmVkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG1ha2VBc2NpaVBocmVkKHRoaXMuZ2V0UXVhbGl0eVNjb3JlcygpKTtcbiAgfVxuXG4gIGdldFNlcXVlbmNlKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuX3NlcSkgcmV0dXJuIHRoaXMuX3NlcTtcbiAgICB2YXIganYgPSB0aGlzLl9nZXRKRGF0YVZpZXcoKSxcbiAgICAgICAgbF9yZWFkX25hbWUgPSBqdi5nZXRVaW50OCg4KSxcbiAgICAgICAgbl9jaWdhcl9vcCA9IGp2LmdldFVpbnQxNigxMiksXG4gICAgICAgIGxfc2VxID0ganYuZ2V0SW50MzIoMTYpLFxuICAgICAgICBwb3MgPSAzMiArIGxfcmVhZF9uYW1lICsgNCAqIG5fY2lnYXJfb3AsXG4gICAgICAgIGJhc2VQYWlycyA9IG5ldyBBcnJheShsX3NlcSksXG4gICAgICAgIG51bUJ5dGVzID0gTWF0aC5jZWlsKGxfc2VxIC8gMik7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUJ5dGVzOyBpKyspIHtcbiAgICAgIHZhciBiID0ganYuZ2V0VWludDgocG9zICsgaSk7XG4gICAgICBiYXNlUGFpcnNbMiAqIGldID0gU0VRVUVOQ0VfVkFMVUVTW2IgPj4gNF07XG4gICAgICBpZiAoMiAqIGkgKyAxIDwgbF9zZXEpIHtcbiAgICAgICAgYmFzZVBhaXJzWzIgKiBpICsgMV0gPSBTRVFVRU5DRV9WQUxVRVNbYiAmIDB4Zl07XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNlcSA9IGJhc2VQYWlycy5qb2luKCcnKTtcbiAgICB0aGlzLl9zZXEgPSBzZXE7XG4gICAgcmV0dXJuIHNlcTtcbiAgfVxuXG4gIC8vIFJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgYWxpZ25tZW50IGZyb20gZmlyc3QgYWxpZ25lZCByZWFkIHRvIGxhc3QgYWxpZ25lZCByZWFkLlxuICBnZXRSZWZlcmVuY2VMZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gU2FtUmVhZC5yZWZlcmVuY2VMZW5ndGhGcm9tT3BzKHRoaXMuY2lnYXJPcHMpO1xuICB9XG5cbiAgZ2V0TWF0ZVByb3BlcnRpZXMoKTogP01hdGVQcm9wZXJ0aWVzIHtcbiAgICB2YXIganYgPSB0aGlzLl9nZXRKRGF0YVZpZXcoKSxcbiAgICAgICAgZmxhZyA9IGp2LmdldFVpbnQxNigxNCk7XG4gICAgaWYgKCEoZmxhZyAmIGJhbVR5cGVzLkZsYWdzLlJFQURfUEFJUkVEKSkgcmV0dXJuIG51bGw7XG5cbiAgICB2YXIgbmV4dFJlZklkID0ganYuZ2V0SW50MzIoMjApLFxuICAgICAgICBuZXh0UG9zID0ganYuZ2V0SW50MzIoMjQpLFxuICAgICAgICBuZXh0U3RyYW5kID0gc3RyYW5kRmxhZ1RvU3RyaW5nKGZsYWcgJiBiYW1UeXBlcy5GbGFncy5NQVRFX1NUUkFORCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLy8gSWYgdGhlIG1hdGUgaXMgb24gYW5vdGhlciBjb250aWcsIHRoZXJlJ3Mgbm8gZWFzeSB3YXkgdG8gZ2V0IGl0cyBzdHJpbmcgbmFtZS5cbiAgICAgIHJlZjogbmV4dFJlZklkID09IHRoaXMucmVmSUQgPyB0aGlzLnJlZiA6IG51bGwsXG4gICAgICBwb3M6IG5leHRQb3MsXG4gICAgICBzdHJhbmQ6IG5leHRTdHJhbmRcbiAgICB9O1xuICB9XG5cbiAgZGVidWdTdHJpbmcoKTogc3RyaW5nIHtcbiAgICB2YXIgZiA9IHRoaXMuZ2V0RnVsbCgpO1xuXG4gICAgcmV0dXJuIGBOYW1lOiAke3RoaXMubmFtZX1cbkZMQUc6ICR7dGhpcy5nZXRGbGFnKCl9XG5Qb3NpdGlvbjogJHt0aGlzLmdldEludGVydmFsKCkudG9TdHJpbmcoKX1cbkNJR0FSOiAke3RoaXMuZ2V0Q2lnYXJTdHJpbmcoKX1cblNlcXVlbmNlOiAke2Yuc2VxfVxuUXVhbGl0eTogICR7dGhpcy5nZXRRdWFsUGhyZWQoKX1cblRhZ3M6ICR7SlNPTi5zdHJpbmdpZnkoZi5hdXhpbGlhcnksIG51bGwsICcgICcpfVxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgcmVmZXJlbmNlTGVuZ3RoRnJvbU9wcyhvcHM6IENpZ2FyT3BbXSk6IG51bWJlciB7XG4gICAgdmFyIHJlZkxlbmd0aCA9IDA7XG4gICAgb3BzLmZvckVhY2goKHtvcCwgbGVuZ3RofSkgPT4ge1xuICAgICAgc3dpdGNoIChvcCkge1xuICAgICAgICBjYXNlICdNJzpcbiAgICAgICAgY2FzZSAnRCc6XG4gICAgICAgIGNhc2UgJ04nOlxuICAgICAgICBjYXNlICc9JzpcbiAgICAgICAgY2FzZSAnWCc6XG4gICAgICAgICAgcmVmTGVuZ3RoICs9IGxlbmd0aDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVmTGVuZ3RoO1xuICB9XG59XG5cbi8vIENvbnZlcnQgYSBzdHJ1Y3R1cmVkIENpZ2FyIG9iamVjdCBpbnRvIHRoZSBzdHJpbmcgZm9ybWF0IHdlIGFsbCBsb3ZlLlxuZnVuY3Rpb24gbWFrZUNpZ2FyU3RyaW5nKGNpZ2FyT3BzOiBBcnJheTx7b3A6c3RyaW5nOyBsZW5ndGg6bnVtYmVyfT4pIHtcbiAgcmV0dXJuIGNpZ2FyT3BzLm1hcCgoe29wLCBsZW5ndGh9KSA9PiBsZW5ndGggKyBvcCkuam9pbignJyk7XG59XG5cbi8vIENvbnZlcnQgYW4gYXJyYXkgb2YgUGhyZWQgc2NvcmVzIHRvIGEgcHJpbnRhYmxlIHN0cmluZy5cbmZ1bmN0aW9uIG1ha2VBc2NpaVBocmVkKHF1YWxpdGllczogbnVtYmVyW10pOiBzdHJpbmcge1xuICBpZiAocXVhbGl0aWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xuICBpZiAoXy5ldmVyeShxdWFsaXRpZXMsIHggPT4geCA9PSAyNTUpKSByZXR1cm4gJyonO1xuICByZXR1cm4gcXVhbGl0aWVzLm1hcChxID0+IFN0cmluZy5mcm9tQ2hhckNvZGUoMzMgKyBxKSkuam9pbignJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gU2FtUmVhZDtcbiIsIi8qKlxuICogVGhpcyBtb2R1bGUgZGVmaW5lcyBhIHBhcnNlciBmb3IgdGhlIDJiaXQgZmlsZSBmb3JtYXQuXG4gKiBTZWUgaHR0cDovL2dlbm9tZS51Y3NjLmVkdS9GQVEvRkFRZm9ybWF0Lmh0bWwjZm9ybWF0N1xuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSBSZW1vdGVGaWxlIGZyb20gJy4uL1JlbW90ZUZpbGUnO1xuXG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5cbmltcG9ydCB0d29CaXRUeXBlcyBmcm9tICcuL2Zvcm1hdHMvdHdvQml0VHlwZXMnO1xuXG52YXIgQkFTRV9QQUlSUyA9IFtcbiAgJ1QnLCAgLy8gMD0wMFxuICAnQycsICAvLyAxPTAxXG4gICdBJywgIC8vIDI9MTBcbiAgJ0cnICAgLy8gMz0xMVxuXTtcblxuLyoqXG4gIFRoZSBmb2xsb3dpbmcgY2h1bmsgc2l6ZXMgYXJlIG9wdGltaXplZCBhZ2FpbnN0XG4gIHRoZSBodW1hbiByZWZlcmVuY2UgZ2Vub21lIChoZzE5LjJiaXQpLiBBc3N1bWluZyB0aGF0XG4gIHBpbGV1cC5qcyBpcyBtb3N0bHkgYmVpbmcgdXNlZCBmb3IgaHVtYW4gZ2Vub21lLFxuICBpbmNyZWFzaW5nIHRoZSBmb2xsb3dpbmcgbnVtYmVycyBtaWdodCBjYXVzZSBub25uZWNlc3NhcnlcbiAgbmV0d29yayB0cmFmZmljIGFuZCBtaWdodCBhbHNvIGJyZWFrIG91ciB1bml0IHRlc3RzXG4gIHRoYXQgbWFrZSB1c2Ugb2YgbWFwcGVkIDJiaXQgZmlsZXMuXG4qL1xudmFyIEZJUlNUX0hFQURFUl9DSFVOS1NJWkUgPSAxNiAqIDEwMjQsICAvLyAxNiBLQlxuICAgIEZJUlNUX1NFUVVFTkNFX0NIVU5LU0laRSA9ICg0ICogMTAyNCkgLSAxLCAgLy8gfiA0S0JcbiAgICBNQVhfQ0hVTktTSVpFID0gMTAyNCAqIDEwMjQ7ICAvLyAxIE1CXG5cbnR5cGUgRmlsZUluZGV4RW50cnkgPSB7XG4gIG5hbWU6IHN0cmluZztcbiAgb2Zmc2V0OiBudW1iZXI7XG59O1xuXG50eXBlIFNlcXVlbmNlUmVjb3JkID0ge1xuICBudW1CYXNlczogbnVtYmVyO1xuICB1bmtub3duQmxvY2tTdGFydHM6IEFycmF5PG51bWJlcj47ICAvLyBuYiB0aGVzZSBudW1iZXJzIGFyZSAwLWJhc2VkXG4gIHVua25vd25CbG9ja0xlbmd0aHM6IEFycmF5PG51bWJlcj47ICAvLyBUT0RPKGRhbnZrKTogYWRkIGFuIGludGVydmFsIHR5cGU/XG4gIG51bU1hc2tCbG9ja3M6IG51bWJlcjtcbiAgbWFza0Jsb2NrU3RhcnRzOiBBcnJheTxudW1iZXI+O1xuICBtYXNrQmxvY2tMZW5ndGhzOiBBcnJheTxudW1iZXI+O1xuICBkbmFPZmZzZXRGcm9tSGVhZGVyOiBudW1iZXI7ICAvLyAjIG9mIGJ5dGVzIGZyb20gc2VxdWVuY2UgaGVhZGVyIHRvIHBhY2tlZCBETkFcbiAgb2Zmc2V0OiBudW1iZXI7ICAvLyBieXRlcyBmcm9tIHRoZSBzdGFydCBvZiB0aGUgZmlsZSBhdCB3aGljaCB0aGlzIGRhdGEgbGl2ZXMuXG59XG5cbnR5cGUgVHdvQml0SGVhZGVyID0ge1xuICBzZXF1ZW5jZUNvdW50OiBudW1iZXI7XG4gIHNlcXVlbmNlczogQXJyYXk8RmlsZUluZGV4RW50cnk+O1xufVxuXG5cbi8qKlxuICogUGFyc2VzIGEgc2luZ2xlIFNlcXVlbmNlUmVjb3JkIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBBcnJheUJ1ZmZlci5cbiAqIGZpbGVPZmZzZXQgaXMgdGhlIHBvc2l0aW9uIG9mIHRoaXMgc2VxdWVuY2Ugd2l0aGluIHRoZSAyYml0IGZpbGUuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2VxdWVuY2VSZWNvcmQoYnVmZmVyOiBBcnJheUJ1ZmZlciwgZmlsZU9mZnNldDogbnVtYmVyKTogU2VxdWVuY2VSZWNvcmQge1xuICB2YXIgamIgPSBuZXcgakJpbmFyeShidWZmZXIsIHR3b0JpdFR5cGVzLlRZUEVfU0VUKTtcbiAgdmFyIGhlYWRlciA9IGpiLnJlYWQoJ1NlcXVlbmNlUmVjb3JkJyk7XG5cbiAgdmFyIGRuYU9mZnNldCA9IGpiLnRlbGwoKSArIDggKiBoZWFkZXIubWFza0Jsb2NrQ291bnQgKyA0O1xuXG4gIHJldHVybiB7XG4gICAgbnVtQmFzZXM6IGhlYWRlci5kbmFTaXplLFxuICAgIHVua25vd25CbG9ja1N0YXJ0czogaGVhZGVyLm5CbG9ja1N0YXJ0cyxcbiAgICB1bmtub3duQmxvY2tMZW5ndGhzOiBoZWFkZXIubkJsb2NrU2l6ZXMsXG4gICAgbnVtTWFza0Jsb2NrczogaGVhZGVyLm1hc2tCbG9ja0NvdW50LFxuICAgIG1hc2tCbG9ja1N0YXJ0czogW10sXG4gICAgbWFza0Jsb2NrTGVuZ3RoczogW10sXG4gICAgZG5hT2Zmc2V0RnJvbUhlYWRlcjogZG5hT2Zmc2V0LFxuICAgIG9mZnNldDogZmlsZU9mZnNldFxuICB9O1xufVxuXG5cbmZ1bmN0aW9uIHBhcnNlSGVhZGVyKGJ1ZmZlcjogQXJyYXlCdWZmZXIpOiBUd29CaXRIZWFkZXIge1xuICB2YXIgamIgPSBuZXcgakJpbmFyeShidWZmZXIsIHR3b0JpdFR5cGVzLlRZUEVfU0VUKTtcbiAgdmFyIGhlYWRlciA9IGpiLnJlYWQoJ0hlYWRlcicpO1xuXG4gIHJldHVybiB7XG4gICAgc2VxdWVuY2VDb3VudDogaGVhZGVyLnNlcXVlbmNlQ291bnQsXG4gICAgc2VxdWVuY2VzOiBoZWFkZXIuc2VxdWVuY2VzXG4gIH07XG59XG5cblxuLyoqXG4gKiBSZWFkIDItYml0IGVuY29kZWQgYmFzZSBwYWlycyBmcm9tIGEgRGF0YVZpZXcgaW50byBhbiBhcnJheSBvZiAnQScsICdUJyxcbiAqICdDJywgJ0cnIHN0cmluZ3MuXG4gKiBUaGVzZSBhcmUgcmV0dXJuZWQgYXMgYW4gYXJyYXkgKHJhdGhlciB0aGFuIGEgc3RyaW5nKSB0byBmYWNpbGl0YXRlIGZ1cnRoZXJcbiAqIG1vZGlmaWNhdGlvbi5cbiAqL1xuZnVuY3Rpb24gdW5wYWNrRE5BKGRhdGFWaWV3OiBEYXRhVmlldywgc3RhcnRCYXNlUGFpcjogbnVtYmVyLCBudW1CYXNlUGFpcnM6IG51bWJlcik6IEFycmF5PHN0cmluZz4ge1xuICAvLyBUT0RPOiB1c2UgakJpbmFyeSBiaXRmaWVsZCBmb3IgdGhpc1xuICB2YXIgYmFzZVBhaXJzOiBBcnJheTxzdHJpbmc+ID0gW107XG4gIGJhc2VQYWlycy5sZW5ndGggPSBkYXRhVmlldy5ieXRlTGVuZ3RoICogNDsgIC8vIHByZS1hbGxvY2F0ZVxuICB2YXIgYmFzZVBhaXJJZHggPSAtc3RhcnRCYXNlUGFpcjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhVmlldy5ieXRlTGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcGFja2VkID0gZGF0YVZpZXcuZ2V0VWludDgoaSk7XG4gICAgZm9yICh2YXIgc2hpZnQgPSA2OyBzaGlmdCA+PSAwOyBzaGlmdCAtPSAyKSB7XG4gICAgICB2YXIgYnAgPSBCQVNFX1BBSVJTWyhwYWNrZWQgPj4gc2hpZnQpICYgM107XG4gICAgICBpZiAoc3RhcnRCYXNlUGFpciA+PSAwKSB7XG4gICAgICAgIGJhc2VQYWlyc1tiYXNlUGFpcklkeF0gPSBicDtcbiAgICAgIH1cbiAgICAgIGJhc2VQYWlySWR4Kys7XG4gICAgfVxuICB9XG4gIC8vIFJlbW92ZSBiYXNlIHBhaXJzIGZyb20gdGhlIGVuZCBpZiB0aGUgc2VxdWVuY2UgdGVybWluYXRlZCBtaWQtYnl0ZS5cbiAgYmFzZVBhaXJzLmxlbmd0aCA9IG51bUJhc2VQYWlycztcbiAgcmV0dXJuIGJhc2VQYWlycztcbn1cblxuLyoqXG4gKiBDaGFuZ2UgYmFzZSBwYWlycyB0byAnTicgd2hlcmUgdGhlIFNlcXVlbmNlUmVjb3JkIGRpY3RhdGVzLlxuICogVGhpcyBtb2RpZmllcyB0aGUgYmFzZVBhaXJzIGFycmF5IGluLXBsYWNlLlxuICovXG5mdW5jdGlvbiBtYXJrVW5rbm93bkROQShiYXNlUGFpcnM6IEFycmF5PHN0cmluZz4sIGRuYVN0YXJ0SW5kZXg6IG51bWJlciwgc2VxdWVuY2U6IFNlcXVlbmNlUmVjb3JkKTogQXJyYXk8c3RyaW5nPiB7XG4gIHZhciBkbmFTdG9wID0gZG5hU3RhcnRJbmRleCArIGJhc2VQYWlycy5sZW5ndGggLSAxO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHNlcXVlbmNlLnVua25vd25CbG9ja1N0YXJ0cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBuU3RhcnQgPSBzZXF1ZW5jZS51bmtub3duQmxvY2tTdGFydHNbaV0sXG4gICAgICAgIG5MZW5ndGggPSBzZXF1ZW5jZS51bmtub3duQmxvY2tMZW5ndGhzW2ldLFxuICAgICAgICBuU3RvcCA9IG5TdGFydCArIG5MZW5ndGggLSAxLFxuICAgICAgICBpbnRTdGFydCA9IE1hdGgubWF4KG5TdGFydCwgZG5hU3RhcnRJbmRleCksXG4gICAgICAgIGludFN0b3AgPSBNYXRoLm1pbihuU3RvcCwgZG5hU3RvcCk7XG4gICAgaWYgKGludFN0b3AgPCBpbnRTdGFydCkgY29udGludWU7ICAvLyBubyBvdmVybGFwXG5cbiAgICBmb3IgKHZhciBqID0gaW50U3RhcnQ7IGogPD0gaW50U3RvcDsgaisrKSB7XG4gICAgICBiYXNlUGFpcnNbaiAtIGRuYVN0YXJ0SW5kZXhdID0gJ04nO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBiYXNlUGFpcnM7XG59XG5cblxuLyoqXG4gKiBBbiB1bWJyZWxsYSBlcnJvciB0eXBlIHRvIGRlc2NyaWJlIGlzc3VlcyB3aXRoIHBhcnNpbmcgYW5cbiAqIGluY29tcGxldGUgY2h1bmsgb2YgZGF0YSB3aXRoIEpCaW5hcnkncyByZWFkLiBJZiB0aGlzIGlzIGJlaW5nXG4gKiByYWlzZWQsIHdlIGVpdGhlciBuZWVkIHRvIGFzayBmb3IgbW9yZSBkYXRhIChhIGJpZ2dlciBjaHVuaykgb3JcbiAqIHJlcG9ydCB0byB0aGUgdXNlciB0aGF0IHRoZXJlIG1pZ2h0IGJlIGEgcHJvYmxlbSB3aXRoIHRoZSAyYml0XG4gKiBmaWxlLCBzcGVjaWZpY2FsbHkgd2l0aCBpdHMgaGVhZGVyLlxuICovXG5mdW5jdGlvbiBJbmNvbXBsZXRlQ2h1bmtFcnJvcihtZXNzYWdlKSB7XG4gICAgdGhpcy5uYW1lID0gXCJJbmNvbXBsZXRlQ2h1bmtFcnJvclwiO1xuICAgIHRoaXMubWVzc2FnZSA9IChtZXNzYWdlIHx8IFwiXCIpO1xufVxuSW5jb21wbGV0ZUNodW5rRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogSW5jb21wbGV0ZUNodW5rRXJyb3IsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG59KTtcblxuLyoqXG4gKiBXcmFwcyBhIHBhcnNpbmcgYXR0ZW1wdCwgY2FwdHVyZXMgZXJyb3JzIHJlbGF0ZWQgdG9cbiAqIGluY29tcGxldGUgZGF0YSBhbmQgcmUtdGhyb3dzIGEgc3BlY2lhbGl6ZWQgZXJyb3I6XG4gKiBJbmNvbXBsZXRlQ2h1bmtFcnJvci4gT3RoZXJ3aXNlLCB3aGF0ZXZlciBvdGhlciBlcnJvclxuICogaXMgYmVpbmcgcmFpc2VkIGdldHMgZXNjYWxhdGVkLlxuICovXG5mdW5jdGlvbiBwYXJzZVdpdGhFeGNlcHRpb24ocGFyc2VGdW5jOiBGdW5jdGlvbikge1xuICB0cnkge1xuICAgIHJldHVybiBwYXJzZUZ1bmMoKTtcbiAgfSBjYXRjaChlcnJvcikge1xuICAgIC8vIENocm9tZS1saWtlIGJyb3dzZXJzOiBSYW5nZUVycm9yOyBwaGFudG9tanM6IERPTUV4Y2VwdGlvblxuICAgIGlmIChlcnJvci5uYW1lID09IFwiUmFuZ2VFcnJvclwiIHx8IGVycm9yLm5hbWUgPT0gXCJJTkRFWF9TSVpFX0VSUlwiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBuYW1lOiAke2Vycm9yLm5hbWV9YCk7XG4gICAgICAgIHRocm93IG5ldyBJbmNvbXBsZXRlQ2h1bmtFcnJvcihlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRyeSBnZXR0aW5nIGEgYmlnZ2VyIGNodW5rIG9mIHRoZSByZW1vdGUgZmlsZVxuICogdW50aWwgdGhlIEluY29tcGxldGUgQ2h1bmsgRXJyb3IgaXMgcmVzb2x2ZWQuIFRoaXMgaXMgdXNlZnVsIHdoZW4gd2UgbmVlZCB0b1xuICogcGFyc2UgdGhlIGhlYWRlciwgYnV0IHdoZW4gd2UgZG9uJ3Qga25vdyB0aGUgc2l6ZSBvZiB0aGUgaGVhZGVyIHVwIGZyb250LlxuICogSWYgdGhlIGludGlhbCByZXF1ZXN0IHJldHVybnMgYW4gaW5jb21wbGV0ZSBoZWFkZXIgYW5kIGhlbmNlIHRoZVxuICogcGFyc2luZyBmYWlscywgd2UgbmV4dCB0cnkgZG91YmxpbmcgdGhlIHJlcXVlc3RlZCBzaXplLlxuICogVGhlIHNpemUgb2YgdGhlIHJlcXVlc3QgaXMgY2FwcGVkIHdpdGggYHVudGlsU2l6ZWAgc28gdGhhdFxuICogd2UgZG9uJ3Qgc3RhcnQgYXNraW5nIGZvciBNQnMgb2YgZGF0YSBmb3Igbm8gdXNlLlxuICogSW5zdGVhZCB3ZSB3ZSB0aHJvdyBhbiBlcnJvciBpZiB3ZSByZWFjaCB0aGUgY2FwLFxuICogcG90ZW50aWFsbHkgbWVhbmluZyBhIGNvcnJ1cHRlZCAyYml0IGZpbGUuXG4qL1xuZnVuY3Rpb24gcmV0cnlSZW1vdGVHZXQocmVtb3RlRmlsZTogUmVtb3RlRmlsZSwgc3RhcnQ6IG51bWJlciwgc2l6ZTogbnVtYmVyLCB1bnRpbFNpemU6IG51bWJlciwgcHJvbWlzZWRGdW5jOiBGdW5jdGlvbikge1xuICByZXR1cm4gcmVtb3RlRmlsZS5nZXRCeXRlcyhzdGFydCwgc2l6ZSkudGhlbihwcm9taXNlZEZ1bmMpLmNhdGNoKGVycm9yID0+IHtcbiAgICBpZihlcnJvci5uYW1lID09IFwiSW5jb21wbGV0ZUNodW5rRXJyb3JcIikge1xuICAgICAgLy8gRG8gbm90IGF0dGVtcHQgdG8gZG93bmxvYWQgbW9yZSB0aGFuIGB1bnRpbFNpemVgXG4gICAgICBpZihzaXplID4gdW50aWxTaXplKSB7XG4gICAgICAgIHRocm93IGBDb3VsZG4ndCBwYXJzZSB0aGUgaGVhZGVyIGAgK1xuICAgICAgICAgICAgICBgZnJvbSB0aGUgZmlyc3QgJHtzaXplfSBieXRlcyBvZiB0aGUgZmlsZS4gYCArXG4gICAgICAgICAgICAgIGBDb3JydXB0ZWQgMmJpdCBmaWxlP2A7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0cnlSZW1vdGVHZXQocmVtb3RlRmlsZSwgc3RhcnQsIHNpemUqMiwgdW50aWxTaXplLCBwcm9taXNlZEZ1bmMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0pO1xufVxuXG5jbGFzcyBUd29CaXQge1xuICByZW1vdGVGaWxlOiBSZW1vdGVGaWxlO1xuICBoZWFkZXI6IFEuUHJvbWlzZTxUd29CaXRIZWFkZXI+O1xuXG4gIGNvbnN0cnVjdG9yKHJlbW90ZUZpbGU6IFJlbW90ZUZpbGUpIHtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuICAgIHZhciBkZWZlcnJlZEhlYWRlciA9IFEuZGVmZXIoKTtcbiAgICB0aGlzLmhlYWRlciA9IGRlZmVycmVkSGVhZGVyLnByb21pc2U7XG4gICAgcmV0cnlSZW1vdGVHZXQoXG4gICAgICB0aGlzLnJlbW90ZUZpbGUsXG4gICAgICAwLCAgLy8gQmVnaW5uaW5nIG9mIHRoZSBmaWxlXG4gICAgICBGSVJTVF9IRUFERVJfQ0hVTktTSVpFLFxuICAgICAgTUFYX0NIVU5LU0laRSxcbiAgICAgIGJ1ZmZlciA9PiB7XG4gICAgICAgIHZhciBoZWFkZXIgPSBwYXJzZVdpdGhFeGNlcHRpb24oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBwYXJzZUhlYWRlcihidWZmZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgZGVmZXJyZWRIZWFkZXIucmVzb2x2ZShoZWFkZXIpO1xuICAgICAgfSkuZG9uZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGJhc2UgcGFpcnMgZm9yIGNvbnRpZzpzdGFydC1zdG9wLlxuICAgKiBUaGUgcmFuZ2UgaXMgaW5jbHVzaXZlIGFuZCB6ZXJvLWJhc2VkLlxuICAgKiBSZXR1cm5zIGVtcHR5IHN0cmluZyBpZiBubyBkYXRhIGlzIGF2YWlsYWJsZSBvbiB0aGlzIHJhbmdlLlxuICAgKi9cbiAgZ2V0RmVhdHVyZXNJblJhbmdlKGNvbnRpZzogc3RyaW5nLCBzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8c3RyaW5nPiB7XG4gICAgaWYgKHN0YXJ0ID4gc3RvcCkge1xuICAgICAgdGhyb3cgYFJlcXVlc3RlZCBhIDJiaXQgcmFuZ2Ugd2l0aCBzdGFydCA+IHN0b3AgKCR7c3RhcnR9LCAke3N0b3B9KWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2dldFNlcXVlbmNlSGVhZGVyKGNvbnRpZykudGhlbihoZWFkZXIgPT4ge1xuICAgICAgdmFyIGRuYU9mZnNldCA9IGhlYWRlci5vZmZzZXQgKyBoZWFkZXIuZG5hT2Zmc2V0RnJvbUhlYWRlcjtcbiAgICAgIHZhciBvZmZzZXQgPSBNYXRoLmZsb29yKGRuYU9mZnNldCArIHN0YXJ0LzQpO1xuICAgICAgdmFyIGJ5dGVMZW5ndGggPSBNYXRoLmNlaWwoKHN0b3AgLSBzdGFydCArIDEpIC8gNCkgKyAxO1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRmlsZS5nZXRCeXRlcyhvZmZzZXQsIGJ5dGVMZW5ndGgpLnRoZW4oYnVmZmVyID0+IHtcbiAgICAgICAgdmFyIGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgICAgIHJldHVybiBtYXJrVW5rbm93bkROQShcbiAgICAgICAgICAgIHVucGFja0ROQShkYXRhVmlldywgc3RhcnQgJSA0LCBzdG9wIC0gc3RhcnQgKyAxKSwgc3RhcnQsIGhlYWRlcilcbiAgICAgICAgICAgIC5qb2luKCcnKTtcbiAgICAgIH0pO1xuICAgIH0pLnRoZW4ocCA9PiB7XG4gICAgICByZXR1cm4gcDtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBsaXN0IG9mIGNvbnRpZyBuYW1lcy5cbiAgZ2V0Q29udGlnTGlzdCgpOiBRLlByb21pc2U8c3RyaW5nW10+IHtcbiAgICByZXR1cm4gdGhpcy5oZWFkZXIudGhlbihoZWFkZXIgPT4gaGVhZGVyLnNlcXVlbmNlcy5tYXAoc2VxID0+IHNlcS5uYW1lKSk7XG4gIH1cblxuICBfZ2V0U2VxdWVuY2VIZWFkZXIoY29udGlnOiBzdHJpbmcpOiBRLlByb21pc2U8U2VxdWVuY2VSZWNvcmQ+IHtcbiAgICByZXR1cm4gdGhpcy5oZWFkZXIudGhlbihoZWFkZXIgPT4ge1xuICAgICAgdmFyIG1heWJlU2VxID0gXy5maW5kV2hlcmUoaGVhZGVyLnNlcXVlbmNlcywge25hbWU6IGNvbnRpZ30pIHx8XG4gICAgICAgICAgICAgICAgICAgICBfLmZpbmRXaGVyZShoZWFkZXIuc2VxdWVuY2VzLCB7bmFtZTogJ2NocicgKyBjb250aWd9KTtcbiAgICAgIGlmIChtYXliZVNlcSA9PT0gbnVsbCB8fCBtYXliZVNlcSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93ICdJbnZhbGlkIGNvbnRpZzogJyArIGNvbnRpZztcbiAgICAgIH1cbiAgICAgIHZhciBzZXEgPSBtYXliZVNlcTsgIC8vIGZvciBmbG93LCBzZWUgZmFjZWJvb2svZmxvdyMyNjZcblxuICAgICAgcmV0dXJuIHJldHJ5UmVtb3RlR2V0KFxuICAgICAgICB0aGlzLnJlbW90ZUZpbGUsXG4gICAgICAgIHNlcS5vZmZzZXQsXG4gICAgICAgIEZJUlNUX1NFUVVFTkNFX0NIVU5LU0laRSxcbiAgICAgICAgTUFYX0NIVU5LU0laRSxcbiAgICAgICAgYnVmZmVyID0+IHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VXaXRoRXhjZXB0aW9uKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVNlcXVlbmNlUmVjb3JkKGJ1ZmZlciwgc2VxLm9mZnNldCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSkudGhlbihwID0+IHtcbiAgICAgIHJldHVybiBwO1xuICAgIH0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVHdvQml0O1xuIiwiLyoqXG4gKiBBIHZpcnR1YWwgb2Zmc2V0IGludG8gYSBCQU0gZmlsZS5cbiAqIFRoaXMgY29tYmluZXMgdGhlIG9mZnNldCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjb21wcmVzc2lvbiBibG9jayB3aXRoIGFuXG4gKiBvZmZzZXQgaW50byB0aGUgaW5mbGF0ZWQgZGF0YS5cbiAqIFRoZXNlIGFyZSB1c3VhbGx5IHJlcHJlc2VudGVkIGFzIHVpbnQ2NHMsIHdoaWNoIGFyZSBhd2t3YXJkIHRvIHdvcmsgd2l0aCBpblxuICogSmF2YVNjcmlwdC5cbiAqIEBmbG93XG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmNsYXNzIFZpcnR1YWxPZmZzZXQge1xuICBjb2Zmc2V0OiBudW1iZXI7XG4gIHVvZmZzZXQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcihjb2Zmc2V0OiBudW1iZXIsIHVvZmZzZXQ6IG51bWJlcikge1xuICAgIHRoaXMuY29mZnNldCA9IGNvZmZzZXQ7XG4gICAgdGhpcy51b2Zmc2V0ID0gdW9mZnNldDtcbiAgfVxuXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuY29mZnNldH06JHt0aGlzLnVvZmZzZXR9YDtcbiAgfVxuXG4gIGlzTGVzc1RoYW4ob3RoZXI6IFZpcnR1YWxPZmZzZXQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb2Zmc2V0IDwgb3RoZXIuY29mZnNldCB8fFxuICAgICAgICAgICAodGhpcy5jb2Zmc2V0ID09IG90aGVyLmNvZmZzZXQgJiZcbiAgICAgICAgICAgIHRoaXMudW9mZnNldCA8IG90aGVyLnVvZmZzZXQpO1xuICB9XG5cbiAgaXNMZXNzVGhhbk9yRXF1YWwob3RoZXI6IFZpcnR1YWxPZmZzZXQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb2Zmc2V0IDw9IG90aGVyLmNvZmZzZXQgfHxcbiAgICAgICAgICAgKHRoaXMuY29mZnNldCA9PSBvdGhlci5jb2Zmc2V0ICYmXG4gICAgICAgICAgICB0aGlzLnVvZmZzZXQgPD0gb3RoZXIudW9mZnNldCk7XG4gIH1cblxuICBpc0VxdWFsKG90aGVyOiBWaXJ0dWFsT2Zmc2V0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29mZnNldCA9PSBvdGhlci5jb2Zmc2V0ICYmXG4gICAgICAgICAgIHRoaXMudW9mZnNldCA9PSBvdGhlci51b2Zmc2V0O1xuICB9XG5cbiAgLy8gUmV0dXJucyA8MCBpZiB0aGlzIDwgb3RoZXIsIDAgaWYgdGhpcyA9PSBvdGhlciwgPjAgaWYgdGhpcyA+IG90aGVyLlxuICAvLyBVc2VmdWwgZm9yIHNvcnRpbmcuXG4gIGNvbXBhcmVUbyhvdGhlcjogVmlydHVhbE9mZnNldCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29mZnNldCAtIG90aGVyLmNvZmZzZXQgfHwgdGhpcy51b2Zmc2V0IC0gb3RoZXIudW9mZnNldDtcbiAgfVxuXG4gIGNsb25lKCk6IFZpcnR1YWxPZmZzZXQge1xuICAgIHJldHVybiBuZXcgVmlydHVhbE9mZnNldCh0aGlzLmNvZmZzZXQsIHRoaXMudW9mZnNldCk7XG4gIH1cblxuICAvLyBUaGlzIGlzIGEgZmFzdGVyIHN0YW5kLWluIGZvciBqQmluYXJ5LnJlYWQoJ1ZpcnR1YWxPZmZzZXQnKVxuICBzdGF0aWMgZnJvbUJsb2IodTg6IFVpbnQ4QXJyYXksIG9mZnNldD86IG51bWJlcik6IFZpcnR1YWxPZmZzZXQge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuICAgIHZhciB1b2Zmc2V0ID0gdThbb2Zmc2V0ICAgIF0gK1xuICAgICAgICAgICAgICAgICAgdThbb2Zmc2V0ICsgMV0gKiAyNTYsXG4gICAgICAgIGNvZmZzZXQgPSB1OFtvZmZzZXQgKyAyXSArXG4gICAgICAgICAgICAgICAgICB1OFtvZmZzZXQgKyAzXSAqIDI1NiArXG4gICAgICAgICAgICAgICAgICB1OFtvZmZzZXQgKyA0XSAqIDY1NTM2ICtcbiAgICAgICAgICAgICAgICAgIHU4W29mZnNldCArIDVdICogMTY3NzcyMTYgK1xuICAgICAgICAgICAgICAgICAgdThbb2Zmc2V0ICsgNl0gKiA0Mjk0OTY3Mjk2ICtcbiAgICAgICAgICAgICAgICAgIHU4W29mZnNldCArIDddICogMTA5OTUxMTYyNzc3NjtcbiAgICByZXR1cm4gbmV3IFZpcnR1YWxPZmZzZXQoY29mZnNldCwgdW9mZnNldCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBWaXJ0dWFsT2Zmc2V0O1xuIiwiLyoqXG4gKiBUb29scyBmb3Igd29ya2luZyB3aXRoIGluZGV4ZWQgQkFNIChCQUkpIGZpbGVzLlxuICogVGhlc2UgaGF2ZSBub3RoaW5nIHRvIHNheSBhYm91dCBwYXJzaW5nIHRoZSBCQU0gZmlsZSBpdHNlbGYuIEZvciB0aGF0LCBzZWVcbiAqIGJhbS5qcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcbmltcG9ydCB0eXBlIENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIHtDaHVua30gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcbmltcG9ydCBqRGF0YVZpZXcgZnJvbSAnamRhdGF2aWV3JztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgYmFtVHlwZXMgZnJvbSAnLi9mb3JtYXRzL2JhbVR5cGVzJztcbmltcG9ydCBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4vVmlydHVhbE9mZnNldCc7XG5cblxuLy8gSW4gdGhlIGV2ZW50IHRoYXQgaW5kZXggY2h1bmtzIGFyZW4ndCBhdmFpbGFibGUgZnJvbSBhbiBleHRlcm5hbCBzb3VyY2UsIGl0XG4vLyB3aW5kcyB1cCBzYXZpbmcgdGltZSB0byBkbyBhIGZhc3QgcGFzcyBvdmVyIHRoZSBkYXRhIHRvIGNvbXB1dGUgdGhlbS4gVGhpc1xuLy8gYWxsb3dzIHVzIHRvIHBhcnNlIGEgc2luZ2xlIGNvbnRpZyBhdCBhIHRpbWUgdXNpbmcgakJpbmFyeS5cbmZ1bmN0aW9uIGNvbXB1dGVJbmRleENodW5rcyhidWZmZXIpIHtcbiAgdmFyIEJMT0NLX1NJWkUgPSA2NTUzNjtcbiAgdmFyIHZpZXcgPSBuZXcgakRhdGFWaWV3KGJ1ZmZlciwgMCwgYnVmZmVyLmJ5dGVMZW5ndGgsIHRydWUgLyogbGl0dGxlIGVuZGlhbiAqLyk7XG5cbiAgdmFyIG1pbkJsb2NrSW5kZXggPSBJbmZpbml0eTtcbiAgdmFyIGNvbnRpZ1N0YXJ0T2Zmc2V0cyA9IFtdO1xuICB2aWV3LmdldEludDMyKCk7ICAvLyBtYWdpY1xuICB2YXIgbl9yZWYgPSB2aWV3LmdldEludDMyKCk7XG4gIGZvciAodmFyIGogPSAwOyBqIDwgbl9yZWY7IGorKykge1xuICAgIGNvbnRpZ1N0YXJ0T2Zmc2V0cy5wdXNoKHZpZXcudGVsbCgpKTtcbiAgICB2YXIgbl9iaW4gPSB2aWV3LmdldEludDMyKCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuX2JpbjsgaSsrKSB7XG4gICAgICB2aWV3LmdldFVpbnQzMigpOyAgLy8gYmluIElEXG4gICAgICB2YXIgbl9jaHVuayA9IHZpZXcuZ2V0SW50MzIoKTtcbiAgICAgIHZpZXcuc2tpcChuX2NodW5rICogMTYpO1xuICAgIH1cbiAgICB2YXIgbl9pbnR2ID0gdmlldy5nZXRJbnQzMigpO1xuICAgIGlmIChuX2ludHYpIHtcbiAgICAgIHZhciBvZmZzZXQgPSBWaXJ0dWFsT2Zmc2V0LmZyb21CbG9iKHZpZXcuZ2V0Qnl0ZXMoOCksIDApLFxuICAgICAgICAgIGNvZmZzZXQgPSBvZmZzZXQuY29mZnNldCArIChvZmZzZXQudW9mZnNldCA/IEJMT0NLX1NJWkUgOiAwKTtcbiAgICAgIG1pbkJsb2NrSW5kZXggPSBjb2Zmc2V0ID8gTWF0aC5taW4oY29mZnNldCwgbWluQmxvY2tJbmRleCkgOiBCTE9DS19TSVpFO1xuICAgICAgdmlldy5za2lwKChuX2ludHYgLSAxKSAqIDgpO1xuICAgIH1cbiAgfVxuICBjb250aWdTdGFydE9mZnNldHMucHVzaCh2aWV3LnRlbGwoKSk7XG5cbiAgLy8gQXQgdGhpcyBwb2ludCwgYG1pbkJsb2NrSW5kZXhgIHNob3VsZCBiZSBub24tSW5maW5pdHkgKHNlZSAjNDA1ICYgIzQwNilcbiAgcmV0dXJuIHtcbiAgICBjaHVua3M6IF8uemlwKF8uaW5pdGlhbChjb250aWdTdGFydE9mZnNldHMpLCBfLnJlc3QoY29udGlnU3RhcnRPZmZzZXRzKSksXG4gICAgbWluQmxvY2tJbmRleFxuICB9O1xufVxuXG5cbmZ1bmN0aW9uIHJlYWRDaHVua3MoYnVmKSB7XG4gIHJldHVybiBuZXcgakJpbmFyeShidWYsIGJhbVR5cGVzLlRZUEVfU0VUKS5yZWFkKCdDaHVua3NBcnJheScpO1xufVxuXG5mdW5jdGlvbiByZWFkSW50ZXJ2YWxzKGJsb2I6IFVpbnQ4QXJyYXkpIHtcbiAgdmFyIGludGVydmFscyA9IG5ldyBBcnJheShNYXRoLmZsb29yKGJsb2IubGVuZ3RoIC8gOCkpO1xuICBmb3IgKHZhciBwb3MgPSAwOyBwb3MgPCBibG9iLmxlbmd0aCAtIDc7IHBvcyArPSA4KSB7XG4gICAgaW50ZXJ2YWxzW3BvcyA+PiAzXSA9IFZpcnR1YWxPZmZzZXQuZnJvbUJsb2IoYmxvYiwgcG9zKTtcbiAgfVxuICByZXR1cm4gaW50ZXJ2YWxzO1xufVxuXG5mdW5jdGlvbiBkb0NodW5rc092ZXJsYXAoYTogQ2h1bmssIGI6IENodW5rKSB7XG4gIHJldHVybiBhLmNodW5rX2JlZy5pc0xlc3NUaGFuT3JFcXVhbChiLmNodW5rX2VuZCkgJiZcbiAgICAgICAgIGIuY2h1bmtfYmVnLmlzTGVzc1RoYW5PckVxdWFsKGEuY2h1bmtfZW5kKTtcbn1cblxuZnVuY3Rpb24gYXJlQ2h1bmtzQWRqYWNlbnQoYTogQ2h1bmssIGI6IENodW5rKSB7XG4gIHJldHVybiBhLmNodW5rX2JlZy5pc0VxdWFsKGIuY2h1bmtfZW5kKSB8fCBhLmNodW5rX2VuZC5pc0VxdWFsKGIuY2h1bmtfYmVnKTtcbn1cblxuLy8gVGhpcyBjb2FsZXNjZXMgYWRqYWNlbnQgJiBvdmVybGFwcGluZyBjaHVua3MgdG8gbWluaW1pemUgZmV0Y2hlcy5cbi8vIEl0IGFsc28gYXBwbGllcyB0aGUgXCJsaW5lYXIgb3B0aW1pemF0aW9uXCIsIHdoaWNoIGNhbiBncmVhdGx5IHJlZHVjZSB0aGVcbi8vIG51bWJlciBvZiBuZXR3b3JrIGZldGNoZXMgbmVlZGVkIHRvIGZ1bGZpbGwgYSByZXF1ZXN0LlxuZnVuY3Rpb24gb3B0aW1pemVDaHVua0xpc3QoY2h1bmtMaXN0OiBDaHVua1tdLCBtaW5pbXVtT2Zmc2V0OiBWaXJ0dWFsT2Zmc2V0KTogQ2h1bmtbXSB7XG4gIGNodW5rTGlzdC5zb3J0KChhLCBiKSA9PiB7XG4gICAgdmFyIHJlc3VsdCA9IGEuY2h1bmtfYmVnLmNvbXBhcmVUbyhiLmNodW5rX2JlZyk7XG4gICAgaWYgKHJlc3VsdCA9PT0gMCkge1xuICAgICAgcmVzdWx0ID0gYS5jaHVua19lbmQuY29tcGFyZVRvKGIuY2h1bmtfZW5kKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSk7XG5cbiAgdmFyIG5ld0NodW5rcyA9IFtdO1xuICBjaHVua0xpc3QuZm9yRWFjaChjaHVuayA9PiB7XG4gICAgaWYgKGNodW5rLmNodW5rX2VuZC5pc0xlc3NUaGFuKG1pbmltdW1PZmZzZXQpKSB7XG4gICAgICByZXR1cm47ICAvLyBsaW5lYXIgaW5kZXggb3B0aW1pemF0aW9uXG4gICAgfVxuXG4gICAgaWYgKG5ld0NodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICAgIG5ld0NodW5rcy5wdXNoKGNodW5rKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbGFzdENodW5rID0gbmV3Q2h1bmtzW25ld0NodW5rcy5sZW5ndGggLSAxXTtcbiAgICBpZiAoIWRvQ2h1bmtzT3ZlcmxhcChsYXN0Q2h1bmssIGNodW5rKSAmJlxuICAgICAgICAhYXJlQ2h1bmtzQWRqYWNlbnQobGFzdENodW5rLCBjaHVuaykpIHtcbiAgICAgIG5ld0NodW5rcy5wdXNoKGNodW5rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGxhc3RDaHVuay5jaHVua19lbmQuaXNMZXNzVGhhbihjaHVuay5jaHVua19lbmQpKSB7XG4gICAgICAgIGxhc3RDaHVuay5jaHVua19lbmQgPSBjaHVuay5jaHVua19lbmQ7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gbmV3Q2h1bmtzO1xufVxuXG4vLyBUaGlzIHZlcnNpb24gb2YgQmFpRmlsZSBpcyBub3QgY29tcGxldGVseSBpbW1lZGlhdGUsIGJ1dCBpdCBkb2VzIGd1YXJhbnRlZVxuLy8gdGhhdCB0aGUgaW5kZXggY2h1bmtzIGFyZSBhdmFpbGFibGUuXG5jbGFzcyBJbW1lZGlhdGVCYWlGaWxlIHtcbiAgYnVmZmVyOiA/QXJyYXlCdWZmZXI7XG4gIHJlbW90ZUZpbGU6IFJlbW90ZUZpbGU7XG4gIGluZGV4Q2h1bmtzOiBPYmplY3Q7XG4gIGluZGV4Q2FjaGU6IFEuUHJvbWlzZTxPYmplY3Q+W107ICAvLyByZWYgSUQgLT4gcGFyc2VkIEJhaUluZGV4XG4gIGludGVydmFsc0NhY2hlOiBBcnJheTw/VmlydHVhbE9mZnNldFtdPjsgIC8vIHJlZiBJRCAtPiBsaW5lYXIgaW5kZXhcblxuICBjb25zdHJ1Y3RvcihidWZmZXI6ID9BcnJheUJ1ZmZlciwgcmVtb3RlRmlsZTogUmVtb3RlRmlsZSwgaW5kZXhDaHVua3M/OiBPYmplY3QpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuICAgIGlmIChidWZmZXIpIHtcbiAgICAgIHRoaXMuaW5kZXhDaHVua3MgPSBjb21wdXRlSW5kZXhDaHVua3MoYnVmZmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGluZGV4Q2h1bmtzKSB7XG4gICAgICAgIHRoaXMuaW5kZXhDaHVua3MgPSBpbmRleENodW5rcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93ICdXaXRob3V0IGluZGV4IGNodW5rcywgdGhlIGVudGlyZSBCQUkgYnVmZmVyIG11c3QgYmUgbG9hZGVkJztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pbmRleENhY2hlID0gbmV3IEFycmF5KHRoaXMuaW5kZXhDaHVua3MuY2h1bmtzLmxlbmd0aCk7XG4gICAgdGhpcy5pbnRlcnZhbHNDYWNoZSA9IG5ldyBBcnJheSh0aGlzLmluZGV4Q2h1bmtzLmNodW5rcy5sZW5ndGgpO1xuICB9XG5cbiAgZ2V0Q2h1bmtzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBRLlByb21pc2U8Q2h1bmtbXT4ge1xuICAgIGlmIChyYW5nZS5jb250aWcgPCAwIHx8IHJhbmdlLmNvbnRpZyA+IHRoaXMuaW5kZXhDaHVua3MuY2h1bmtzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFEucmVqZWN0KGBJbnZhbGlkIGNvbnRpZyAke3JhbmdlLmNvbnRpZ31gKTtcbiAgICB9XG5cbiAgICB2YXIgYmlucyA9IHJlZzJiaW5zKHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSArIDEpO1xuXG4gICAgcmV0dXJuIHRoaXMuaW5kZXhGb3JDb250aWcocmFuZ2UuY29udGlnKS50aGVuKGNvbnRpZ0luZGV4ID0+IHtcbiAgICAgIHZhciBjaHVua3MgPSBfLmNoYWluKGNvbnRpZ0luZGV4LmJpbnMpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYiA9PiBiaW5zLmluZGV4T2YoYi5iaW4pID49IDApXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYiA9PiByZWFkQ2h1bmtzKGIuY2h1bmtzKSlcbiAgICAgICAgICAgICAgICAgICAgLmZsYXR0ZW4oKVxuICAgICAgICAgICAgICAgICAgICAudmFsdWUoKTtcblxuICAgICAgdmFyIGxpbmVhckluZGV4ID0gdGhpcy5nZXRJbnRlcnZhbHMoY29udGlnSW5kZXguaW50ZXJ2YWxzLCByYW5nZS5jb250aWcpO1xuICAgICAgdmFyIHN0YXJ0SWR4ID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihyYW5nZS5zdGFydCgpIC8gMTYzODQpKTtcbiAgICAgIHZhciBtaW5pbXVtT2Zmc2V0ID0gbGluZWFySW5kZXhbc3RhcnRJZHhdO1xuXG4gICAgICBjaHVua3MgPSBvcHRpbWl6ZUNodW5rTGlzdChjaHVua3MsIG1pbmltdW1PZmZzZXQpO1xuXG4gICAgICByZXR1cm4gY2h1bmtzO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gUmV0cmlldmUgYW5kIHBhcnNlIHRoZSBpbmRleCBmb3IgYSBwYXJ0aWN1bGFyIGNvbnRpZy5cbiAgaW5kZXhGb3JDb250aWcoY29udGlnOiBudW1iZXIpOiBRLlByb21pc2U8T2JqZWN0PiB7XG4gICAgdmFyIHYgPSB0aGlzLmluZGV4Q2FjaGVbY29udGlnXTtcbiAgICBpZiAodikge1xuICAgICAgcmV0dXJuIHY7XG4gICAgfVxuXG4gICAgdmFyIFtzdGFydCwgc3RvcF0gPSB0aGlzLmluZGV4Q2h1bmtzLmNodW5rc1tjb250aWddO1xuICAgIHRoaXMuaW5kZXhDYWNoZVtjb250aWddID0gdGhpcy5nZXRTbGljZShzdGFydCwgc3RvcCkudGhlbihidWZmZXIgPT4ge1xuICAgICAgdmFyIGpiID0gbmV3IGpCaW5hcnkoYnVmZmVyLCBiYW1UeXBlcy5UWVBFX1NFVCk7XG4gICAgICByZXR1cm4gamIucmVhZCgnQmFpSW5kZXgnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5pbmRleENhY2hlW2NvbnRpZ107XG4gIH1cblxuICBnZXRTbGljZShzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICBpZiAodGhpcy5idWZmZXIpIHtcbiAgICAgIHJldHVybiBRLndoZW4odGhpcy5idWZmZXIuc2xpY2Uoc3RhcnQsIHN0b3ApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRmlsZS5nZXRCeXRlcyhzdGFydCwgc3RvcCAtIHN0YXJ0ICsgMSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2FjaGVkIHdyYXBwZXIgYXJvdW5kIHJlYWRJbnRlcnZhbHMoKVxuICBnZXRJbnRlcnZhbHMoYmxvYjogVWludDhBcnJheSwgcmVmSWQ6IG51bWJlcik6IFZpcnR1YWxPZmZzZXRbXSB7XG4gICAgdmFyIGxpbmVhckluZGV4ID0gdGhpcy5pbnRlcnZhbHNDYWNoZVtyZWZJZF07XG4gICAgaWYgKGxpbmVhckluZGV4KSB7XG4gICAgICByZXR1cm4gbGluZWFySW5kZXg7XG4gICAgfVxuICAgIGxpbmVhckluZGV4ID0gcmVhZEludGVydmFscyhibG9iKTtcbiAgICB0aGlzLmludGVydmFsc0NhY2hlW3JlZklkXSA9IGxpbmVhckluZGV4O1xuICAgIHJldHVybiBsaW5lYXJJbmRleDtcbiAgfVxufVxuXG5cbmNsYXNzIEJhaUZpbGUge1xuICByZW1vdGVGaWxlOiBSZW1vdGVGaWxlO1xuICBpbW1lZGlhdGU6IFEuUHJvbWlzZTxJbW1lZGlhdGVCYWlGaWxlPjtcblxuICBjb25zdHJ1Y3RvcihyZW1vdGVGaWxlOiBSZW1vdGVGaWxlLCBpbmRleENodW5rcz86IE9iamVjdCkge1xuICAgIHRoaXMucmVtb3RlRmlsZSA9IHJlbW90ZUZpbGU7XG4gICAgaWYgKGluZGV4Q2h1bmtzKSB7XG4gICAgICB0aGlzLmltbWVkaWF0ZSA9IFEud2hlbihuZXcgSW1tZWRpYXRlQmFpRmlsZShudWxsLCByZW1vdGVGaWxlLCBpbmRleENodW5rcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmltbWVkaWF0ZSA9IHJlbW90ZUZpbGUuZ2V0QWxsKCkudGhlbihidWYgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IEltbWVkaWF0ZUJhaUZpbGUoYnVmLCByZW1vdGVGaWxlLCBpbmRleENodW5rcyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5pbW1lZGlhdGUuZG9uZSgpO1xuICB9XG5cbiAgZ2V0Q2h1bmtzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBRLlByb21pc2U8Q2h1bmtbXT4ge1xuICAgIHJldHVybiB0aGlzLmltbWVkaWF0ZS50aGVuKGltbWVkaWF0ZSA9PiB7XG4gICAgICByZXR1cm4gaW1tZWRpYXRlLmdldENodW5rc0ZvckludGVydmFsKHJhbmdlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEhlYWRlclNpemUoKTogUS5Qcm9taXNlPG51bWJlcj4ge1xuICAgIHJldHVybiB0aGlzLmltbWVkaWF0ZS50aGVuKGltbWVkaWF0ZSA9PiB7XG4gICAgICByZXR1cm4gaW1tZWRpYXRlLmluZGV4Q2h1bmtzLm1pbkJsb2NrSW5kZXg7XG4gICAgfSk7XG4gIH1cbn1cblxuXG4vLyBUaGVzZSBmdW5jdGlvbnMgY29tZSBkaXJlY3RseSBmcm9tIHRoZSBTQU0gcGFwZXJcbi8vIFNlZSBodHRwczovL3NhbXRvb2xzLmdpdGh1Yi5pby9odHMtc3BlY3MvU0FNdjEucGRmIHNlY3Rpb24gNS4zXG5cbi8vIGNhbGN1bGF0ZSB0aGUgbGlzdCBvZiBiaW5zIHRoYXQgbWF5IG92ZXJsYXAgd2l0aCByZWdpb24gW2JlZyxlbmQpICh6ZXJvLWJhc2VkKVxuZnVuY3Rpb24gcmVnMmJpbnMoYmVnLCBlbmQpIHtcbiAgdmFyIGssIGxpc3QgPSBbXTtcbiAgLS1lbmQ7XG4gIGxpc3QucHVzaCgwKTtcbiAgZm9yIChrID0gICAgMSArIChiZWc+PjI2KTsgayA8PSAgICAxICsgKGVuZD4+MjYpOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gICAgOSArIChiZWc+PjIzKTsgayA8PSAgICA5ICsgKGVuZD4+MjMpOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gICA3MyArIChiZWc+PjIwKTsgayA8PSAgIDczICsgKGVuZD4+MjApOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gIDU4NSArIChiZWc+PjE3KTsgayA8PSAgNTg1ICsgKGVuZD4+MTcpOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gNDY4MSArIChiZWc+PjE0KTsgayA8PSA0NjgxICsgKGVuZD4+MTQpOyArK2spIGxpc3QucHVzaChrKTtcbiAgcmV0dXJuIGxpc3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmFpRmlsZTtcbiIsIi8qKlxuICogVG9vbHMgZm9yIHBhcnNpbmcgQkFNIGZpbGVzLlxuICogU2VlIGh0dHBzOi8vc2FtdG9vbHMuZ2l0aHViLmlvL2h0cy1zcGVjcy9TQU12MS5wZGZcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcbmltcG9ydCB0eXBlIHtDaHVuaywgSW5mbGF0ZWRCbG9ja30gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcbmltcG9ydCBqRGF0YVZpZXcgZnJvbSAnamRhdGF2aWV3JztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5cbmltcG9ydCBiYW1UeXBlcyBmcm9tICcuL2Zvcm1hdHMvYmFtVHlwZXMnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBCYWlGaWxlIGZyb20gJy4vYmFpJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgVmlydHVhbE9mZnNldCBmcm9tICcuL1ZpcnR1YWxPZmZzZXQnO1xuaW1wb3J0IFNhbVJlYWQgZnJvbSAnLi9TYW1SZWFkJztcblxuXG4vKipcbiAqIFRoZSAnY29udGFpbmVkJyBwYXJhbWV0ZXIgY29udHJvbHMgd2hldGhlciB0aGUgYWxpZ25tZW50cyBtdXN0IGJlIGZ1bGx5XG4gKiBjb250YWluZWQgd2l0aGluIHRoZSByYW5nZSwgb3IgbmVlZCBvbmx5IG92ZXJsYXAgaXQuXG4gKi9cbmZ1bmN0aW9uIGlzQWxpZ25tZW50SW5SYW5nZShyZWFkOiBTYW1SZWFkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeFJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lZDogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAvLyBUT0RPOiBVc2UgY2lnYXIuZ2V0UmVmZXJlbmNlTGVuZ3RoKCkgaW5zdGVhZCBvZiBsX3NlcSwgbGlrZSBodHNqZGsuIFxuICB2YXIgcmVhZFJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHJlYWQucmVmSUQsIHJlYWQucG9zLCByZWFkLnBvcyArIHJlYWQubF9zZXEgLSAxKTtcbiAgaWYgKGNvbnRhaW5lZCkge1xuICAgIHJldHVybiBpZHhSYW5nZS5jb250YWluc0ludGVydmFsKHJlYWRSYW5nZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJlYWRSYW5nZS5pbnRlcnNlY3RzKGlkeFJhbmdlKTtcbiAgfVxufVxuXG5cbnZhciBrTWF4RmV0Y2ggPSA2NTUzNiAqIDI7XG5cbi8vIFJlYWQgYSBzaW5nbGUgYWxpZ25tZW50XG5mdW5jdGlvbiByZWFkQWxpZ25tZW50KHZpZXc6IGpEYXRhVmlldywgcG9zOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogVmlydHVhbE9mZnNldCwgcmVmTmFtZTogc3RyaW5nKToge3JlYWQ6IFNhbVJlYWQsIHJlYWRMZW5ndGg6IG51bWJlciB9IHtcbiAgdmFyIHJlYWRMZW5ndGggPSB2aWV3LmdldEludDMyKHBvcyk7XG4gIHBvcyArPSA0O1xuXG4gIGlmIChwb3MgKyByZWFkTGVuZ3RoID4gdmlldy5ieXRlTGVuZ3RoKSB7XG4gICAgLy8gV2UgY2Fubm90IHJlcGxhY2Ugd2l0aCBhbiBlcnJvciBoZXJlLCBiZWNhdXNlIHByb21pc2UgZGVwZW5kcyBvbiByZXNwb25zZS5cbiAgICAvLyAkRmxvd0lnbm9yZTogVE9ETyByZW1vdmUgZmxvdyBzdXBwcmVzc2lvbi4gXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgcmVhZFNsaWNlID0gdmlldy5idWZmZXIuc2xpY2UocG9zLCBwb3MgKyByZWFkTGVuZ3RoKTtcblxuICB2YXIgcmVhZCA9IG5ldyBTYW1SZWFkKHJlYWRTbGljZSwgb2Zmc2V0LmNsb25lKCksIHJlZk5hbWUpO1xuICByZXR1cm4ge1xuICAgIHJlYWQsXG4gICAgcmVhZExlbmd0aDogNCArIHJlYWRMZW5ndGhcbiAgfTtcbn1cblxuLy8gVGhpcyB0cmFja3MgaG93IG1hbnkgYnl0ZXMgd2VyZSByZWFkLlxuZnVuY3Rpb24gcmVhZEFsaWdubWVudHNUb0VuZChidWZmZXI6IEFycmF5QnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZOYW1lOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeFJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZWQ6IGJvb2xlYW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogVmlydHVhbE9mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzOiBJbmZsYXRlZEJsb2NrW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudHM6IFNhbVJlYWRbXSkge1xuICAvLyBXZSB1c2UgakRhdGFWaWV3IGFuZCBBcnJheUJ1ZmZlciBkaXJlY3RseSBmb3IgYSBzcGVlZHVwIG92ZXIgakJpbmFyeS5cbiAgLy8gVGhpcyBwYXJzZXMgcmVhZHMgfjItM3ggZmFzdGVyIHRoYW4gdXNpbmcgVGhpbkFsaWdubWVudCBkaXJlY3RseS5cbiAgdmFyIGp2ID0gbmV3IGpEYXRhVmlldyhidWZmZXIsIDAsIGJ1ZmZlci5ieXRlTGVuZ3RoLCB0cnVlIC8qIGxpdHRsZSBlbmRpYW4gKi8pO1xuICB2YXIgc2hvdWxkQWJvcnQgPSBmYWxzZTtcbiAgdmFyIHBvcyA9IDA7XG4gIG9mZnNldCA9IG9mZnNldC5jbG9uZSgpO1xuICB2YXIgYmxvY2tJbmRleCA9IDA7XG4gIHRyeSB7XG4gICAgd2hpbGUgKHBvcyA8IGJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgICB2YXIgcmVhZERhdGEgPSByZWFkQWxpZ25tZW50KGp2LCBwb3MsIG9mZnNldCwgcmVmTmFtZSk7XG4gICAgICBpZiAoIXJlYWREYXRhKSBicmVhaztcblxuICAgICAgdmFyIHtyZWFkLCByZWFkTGVuZ3RofSA9IHJlYWREYXRhO1xuICAgICAgcG9zICs9IHJlYWRMZW5ndGg7XG4gICAgICBpZiAoaXNBbGlnbm1lbnRJblJhbmdlKHJlYWQsIGlkeFJhbmdlLCBjb250YWluZWQpKSB7XG4gICAgICAgIGFsaWdubWVudHMucHVzaChyZWFkKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWR2YW5jZSB0aGUgVmlydHVhbE9mZnNldCB0byByZWZsZWN0IHRoZSBuZXcgcG9zaXRpb25cbiAgICAgIG9mZnNldC51b2Zmc2V0ICs9IHJlYWRMZW5ndGg7XG4gICAgICB2YXIgYnVmTGVuID0gYmxvY2tzW2Jsb2NrSW5kZXhdLmJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgICAgaWYgKG9mZnNldC51b2Zmc2V0ID49IGJ1Zkxlbikge1xuICAgICAgICBvZmZzZXQudW9mZnNldCAtPSBidWZMZW47XG4gICAgICAgIG9mZnNldC5jb2Zmc2V0ICs9IGJsb2Nrc1tibG9ja0luZGV4XS5jb21wcmVzc2VkTGVuZ3RoO1xuICAgICAgICBibG9ja0luZGV4Kys7XG4gICAgICB9XG5cbiAgICAgIC8vIE9wdGltaXphdGlvbjogaWYgdGhlIGxhc3QgYWxpZ25tZW50IHN0YXJ0ZWQgYWZ0ZXIgdGhlIHJlcXVlc3RlZCByYW5nZSxcbiAgICAgIC8vIHRoZW4gbm8gb3RoZXIgY2h1bmtzIGNhbiBwb3NzaWJseSBjb250YWluIG1hdGNoaW5nIGFsaWdubWVudHMuXG4gICAgICAvLyBUT0RPOiB1c2UgY29udGlnSW50ZXJ2YWwuaXNBZnRlckludGVydmFsIHdoZW4gdGhhdCdzIHBvc3NpYmxlLlxuICAgICAgdmFyIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHJlYWQucmVmSUQsIHJlYWQucG9zLCByZWFkLnBvcyArIDEpO1xuICAgICAgaWYgKHJhbmdlLmNvbnRpZyA+IGlkeFJhbmdlLmNvbnRpZyB8fFxuICAgICAgICAgIChyYW5nZS5jb250aWcgPT0gaWR4UmFuZ2UuY29udGlnICYmIHJhbmdlLnN0YXJ0KCkgPiBpZHhSYW5nZS5zdG9wKCkpKSB7XG4gICAgICAgIHNob3VsZEFib3J0ID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIENvZGUgZ2V0cyBoZXJlIGlmIHRoZSBjb21wcmVzc2lvbiBibG9jayBlbmRlZCBleGFjdGx5IGF0IHRoZSBlbmQgb2ZcbiAgICAvLyBhbiBBbGlnbm1lbnQuXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBQYXJ0aWFsIHJlY29yZFxuICAgIGlmICghKGUgaW5zdGFuY2VvZiBSYW5nZUVycm9yKSkge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNob3VsZEFib3J0LFxuICAgIG5leHRPZmZzZXQ6IG9mZnNldFxuICB9O1xufVxuXG4vLyBGZXRjaCBhbGlnbm1lbnRzIGZyb20gdGhlIHJlbW90ZSBzb3VyY2UgYXQgdGhlIGxvY2F0aW9ucyBzcGVjaWZpZWQgYnkgQ2h1bmtzLlxuLy8gVGhpcyBjYW4gcG90ZW50aWFsbHkgcmVzdWx0IGluIG1hbnkgbmV0d29yayByZXF1ZXN0cy5cbi8vIFRoZSByZXR1cm5lZCBwcm9taXNlIGlzIGZ1bGZpbGxlZCBvbmNlIGl0IGNhbiBiZSBwcm92ZWQgdGhhdCBubyBtb3JlXG4vLyBhbGlnbm1lbnRzIG5lZWQgdG8gYmUgZmV0Y2hlZC5cbmZ1bmN0aW9uIGZldGNoQWxpZ25tZW50cyhyZW1vdGVGaWxlOiBSZW1vdGVGaWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHJlZk5hbWU6IHN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICBpZHhSYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPixcbiAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZWQ6IGJvb2xlYW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzOiBDaHVua1tdKTogUS5Qcm9taXNlPFNhbVJlYWRbXT4ge1xuXG4gIHZhciBudW1SZXF1ZXN0cyA9IDAsXG4gICAgICBhbGlnbm1lbnRzID0gW10sXG4gICAgICBkZWZlcnJlZCA9IFEuZGVmZXIoKTtcblxuICBmdW5jdGlvbiBmZXRjaChjaHVua3M6IENodW5rW10pIHtcbiAgICBpZiAoY2h1bmtzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZShhbGlnbm1lbnRzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBOZXZlciBmZXRjaCBtb3JlIHRoYW4gMTI4ayBhdCBhIHRpbWUgLS0gdGhpcyByZWR1Y2VzIGNvbnRlbnRpb24gb24gdGhlXG4gICAgLy8gbWFpbiB0aHJlYWQgYW5kIGNhbiBhdm9pZCBzZW5kaW5nIHVubmVjZXNzYXJ5IGJ5dGVzIG92ZXIgdGhlIG5ldHdvcmsuXG4gICAgdmFyIGNodW5rID0gY2h1bmtzWzBdLFxuICAgICAgICBjaHVua19iZWcgPSBjaHVuay5jaHVua19iZWcuY29mZnNldCxcbiAgICAgICAgY2h1bmtfZW5kID0gY2h1bmsuY2h1bmtfZW5kLmNvZmZzZXQ7XG4gICAgdmFyIGJ5dGVzVG9GZXRjaCA9IE1hdGgubWluKGtNYXhGZXRjaCwgKGNodW5rX2VuZCArIDY1NTM2KSAtIGNodW5rX2JlZyk7XG4gICAgcmVtb3RlRmlsZS5nZXRCeXRlcyhjaHVua19iZWcsIGJ5dGVzVG9GZXRjaCkudGhlbihidWZmZXIgPT4ge1xuICAgICAgbnVtUmVxdWVzdHMrKztcbiAgICAgIGRlZmVycmVkLm5vdGlmeSh7bnVtUmVxdWVzdHN9KTtcbiAgICAgIHZhciBjYWNoZUtleSA9IHtcbiAgICAgICAgZmlsZW5hbWU6IHJlbW90ZUZpbGUudXJsLFxuICAgICAgICBpbml0aWFsT2Zmc2V0OiBjaHVua19iZWdcbiAgICAgIH07XG4gICAgICB2YXIgYmxvY2tzID0gdXRpbHMuaW5mbGF0ZUNvbmNhdGVuYXRlZEd6aXAoYnVmZmVyLCBjaHVua19lbmQgLSBjaHVua19iZWcsIGNhY2hlS2V5KTtcblxuICAgICAgLy8gSWYgdGhlIGNodW5rIGhhc24ndCBiZWVuIGV4aGF1c3RlZCwgcmVzdW1lIGl0IGF0IGFuIGFwcHJvcHJpYXRlIHBsYWNlLlxuICAgICAgLy8gVGhlIGxhc3QgYmxvY2sgbmVlZHMgdG8gYmUgcmUtcmVhZCwgc2luY2UgaXQgbWF5IG5vdCBoYXZlIGJlZW4gZXhoYXVzdGVkLlxuICAgICAgdmFyIGxhc3RCbG9jayA9IGJsb2Nrc1tibG9ja3MubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgbGFzdEJ5dGUgPSBjaHVua19iZWcgKyBsYXN0QmxvY2sub2Zmc2V0IC0gMSxcbiAgICAgICAgICBuZXdDaHVuayA9IG51bGw7XG4gICAgICBpZiAoYmxvY2tzLmxlbmd0aCA+IDEgJiYgbGFzdEJ5dGUgPCBjaHVua19lbmQpIHtcbiAgICAgICAgbmV3Q2h1bmsgPSB7XG4gICAgICAgICAgY2h1bmtfYmVnOiBuZXcgVmlydHVhbE9mZnNldChsYXN0Qnl0ZSArIDEsIDApLFxuICAgICAgICAgIGNodW5rX2VuZDogY2h1bmsuY2h1bmtfZW5kXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHZhciBidWZmZXJzID0gYmxvY2tzLm1hcCh4ID0+IHguYnVmZmVyKTtcbiAgICAgIGJ1ZmZlcnNbMF0gPSBidWZmZXJzWzBdLnNsaWNlKGNodW5rLmNodW5rX2JlZy51b2Zmc2V0KTtcbiAgICAgIHZhciBkZWNvbXAgPSB1dGlscy5jb25jYXRBcnJheUJ1ZmZlcnMoYnVmZmVycyk7XG4gICAgICBpZiAoZGVjb21wLmJ5dGVMZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciB7c2hvdWxkQWJvcnQsIG5leHRPZmZzZXR9ID1cbiAgICAgICAgICAgIHJlYWRBbGlnbm1lbnRzVG9FbmQoZGVjb21wLCByZWZOYW1lLCBpZHhSYW5nZSwgY29udGFpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5jaHVua19iZWcsIGJsb2NrcywgYWxpZ25tZW50cyk7XG4gICAgICAgIGlmIChzaG91bGRBYm9ydCkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoYWxpZ25tZW50cyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdDaHVuaykge1xuICAgICAgICAgIG5ld0NodW5rLmNodW5rX2JlZyA9IG5leHRPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld0NodW5rID0gbnVsbDsgIC8vIFRoaXMgaXMgbW9zdCBsaWtlbHkgRU9GXG4gICAgICB9XG4gICAgICBmZXRjaCgobmV3Q2h1bmsgIT09IG51bGwgPyBbbmV3Q2h1bmtdIDogW10pLmNvbmNhdChfLnJlc3QoY2h1bmtzKSkpO1xuICAgIH0pO1xuICB9XG5cbiAgZmV0Y2goY2h1bmtzKTtcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbiBcbmNsYXNzIEJhbSB7XG4gIGluZGV4OiA/QmFpRmlsZTtcbiAgaGVhZGVyOiBRLlByb21pc2U8T2JqZWN0PjtcbiAgcmVtb3RlRmlsZTogUmVtb3RlRmlsZTtcbiAgaGFzSW5kZXhDaHVua3M6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IocmVtb3RlRmlsZTogUmVtb3RlRmlsZSxcbiAgICAgICAgICAgICAgcmVtb3RlSW5kZXhGaWxlPzogUmVtb3RlRmlsZSxcbiAgICAgICAgICAgICAgaW5kZXhDaHVua3M/OiBPYmplY3QpIHtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuICAgIHRoaXMuaW5kZXggPSByZW1vdGVJbmRleEZpbGUgPyBuZXcgQmFpRmlsZShyZW1vdGVJbmRleEZpbGUsIGluZGV4Q2h1bmtzKSA6IG51bGw7XG4gICAgdGhpcy5oYXNJbmRleENodW5rcyA9ICEhaW5kZXhDaHVua3M7XG5cbiAgICB2YXIgc2l6ZVByb21pc2UgPSB0aGlzLmluZGV4ID8gdGhpcy5pbmRleC5nZXRIZWFkZXJTaXplKCkgOiBRLndoZW4oMiAqIDY1NTM1KTtcbiAgICB0aGlzLmhlYWRlciA9IHNpemVQcm9taXNlLnRoZW4oc2l6ZSA9PiB7XG4gICAgICB2YXIgZGVmID0gUS5kZWZlcigpO1xuICAgICAgLy8gVGhpcyBoYXBwZW5zIGluIHRoZSBuZXh0IGV2ZW50IGxvb3AgdG8gZ2l2ZSBsaXN0ZW5lcnMgYSBjaGFuY2UgdG8gcmVnaXN0ZXIuXG4gICAgICBRLndoZW4oKS50aGVuKCgpID0+IHsgZGVmLm5vdGlmeSh7c3RhdHVzOiAnRmV0Y2hpbmcgQkFNIGhlYWRlcid9KTsgfSk7XG4gICAgICB1dGlscy5waXBlUHJvbWlzZShcbiAgICAgICAgICBkZWYsXG4gICAgICAgICAgdGhpcy5yZW1vdGVGaWxlLmdldEJ5dGVzKDAsIHNpemUpLnRoZW4oYnVmID0+IHtcbiAgICAgICAgICAgIHZhciBkZWNvbXAgPSB1dGlscy5pbmZsYXRlR3ppcChidWYpO1xuICAgICAgICAgICAgdmFyIGpiID0gbmV3IGpCaW5hcnkoZGVjb21wLCBiYW1UeXBlcy5UWVBFX1NFVCk7XG4gICAgICAgICAgICByZXR1cm4gamIucmVhZCgnQmFtSGVhZGVyJyk7XG4gICAgICAgICAgfSkpO1xuICAgICAgcmV0dXJuIGRlZi5wcm9taXNlO1xuICAgIH0pO1xuICAgIHRoaXMuaGVhZGVyLmRvbmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgZW50aXJlIEJBTSBmaWxlIGZyb20gdGhlIHJlbW90ZSBzb3VyY2UgYW5kIHBhcnNlcyBpdC5cbiAgICogU2luY2UgQkFNIGZpbGVzIGNhbiBiZSBlbm9ybW91cyAoaHVuZHJlZHMgb2YgR0IpLCB0aGlzIGlzIG9ubHkgcmVjb21tZW5kZWRcbiAgICogZm9yIHNtYWxsIHRlc3QgaW5wdXRzLlxuICAgKi9cbiAgcmVhZEFsbCgpOiBRLlByb21pc2U8T2JqZWN0PiB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3RlRmlsZS5nZXRBbGwoKS50aGVuKGJ1ZiA9PiB7XG4gICAgICB2YXIgZGVjb21wID0gdXRpbHMuaW5mbGF0ZUd6aXAoYnVmKTtcbiAgICAgIHZhciBqYiA9IG5ldyBqQmluYXJ5KGRlY29tcCwgYmFtVHlwZXMuVFlQRV9TRVQpO1xuICAgICAgdmFyIG8gPSBqYi5yZWFkKCdCYW1GaWxlJyk7XG4gICAgICAvLyBEbyBzb21lIG1pbGQgcmUtc2hhcGluZy5cbiAgICAgIHZhciB2byA9IG5ldyBWaXJ0dWFsT2Zmc2V0KDAsIDApO1xuICAgICAgdmFyIHNsaWNlID0gZnVuY3Rpb24odTg6IFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHU4LmJ1ZmZlci5zbGljZSh1OC5ieXRlT2Zmc2V0LCB1OC5ieXRlT2Zmc2V0ICsgdTguYnl0ZUxlbmd0aCAtIDEpO1xuICAgICAgfTtcbiAgICAgIG8uYWxpZ25tZW50cyA9IG8uYWxpZ25tZW50cy5tYXAoeCA9PiB7XG4gICAgICAgIHZhciByID0gbmV3IFNhbVJlYWQoc2xpY2UoeC5jb250ZW50cyksIHZvLCAnJyk7XG4gICAgICAgIGlmIChyLnJlZklEICE9IC0xKSB7XG4gICAgICAgICAgci5yZWYgPSBvLmhlYWRlci5yZWZlcmVuY2VzW3IucmVmSURdLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHI7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBvO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGEgc2luZ2xlIHJlYWQgYXQgdGhlIGdpdmVuIFZpcnR1YWxPZmZzZXQuXG4gICAqIFRoaXMgaXMgaW5zYW5lbHkgaW5lZmZpY2llbnQgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBvdXRzaWRlIG9mIHRlc3RpbmcuXG4gICAqL1xuICByZWFkQXRPZmZzZXQob2Zmc2V0OiBWaXJ0dWFsT2Zmc2V0KTogUS5Qcm9taXNlPFNhbVJlYWQ+IHtcbiAgICB2YXIgcmVhZFByb21pc2U6IFEuUHJvbWlzZTxTYW1SZWFkPiA9IHRoaXMucmVtb3RlRmlsZS5nZXRCeXRlcyhvZmZzZXQuY29mZnNldCwga01heEZldGNoKS50aGVuKGd6aXAgPT4ge1xuICAgICAgdmFyIGJ1ZjogQXJyYXlCdWZmZXIgPSB1dGlscy5pbmZsYXRlR3ppcChnemlwKTtcbiAgICAgIHZhciBqdiA9IG5ldyBqRGF0YVZpZXcoYnVmLCAwLCBidWYuYnl0ZUxlbmd0aCwgdHJ1ZSAvKiBsaXR0bGUgZW5kaWFuICovKTtcbiAgICAgIHZhciByZWFkRGF0YSA9IHJlYWRBbGlnbm1lbnQoanYsIG9mZnNldC51b2Zmc2V0LCBvZmZzZXQsICcnKTtcblxuICAgICAgLy8gQXR0YWNoIHRoZSBodW1hbi1yZWFkYWJsZSByZWYgbmFtZVxuICAgICAgdmFyIHJlYWQ6IFNhbVJlYWQgPSByZWFkRGF0YS5yZWFkO1xuICAgICAgcmV0dXJuIHJlYWQ7XG4gICAgfSk7XG5cblxuICAgIHJldHVybiBRLmFsbChbcmVhZFByb21pc2UsIHRoaXMuaGVhZGVyXSlcbiAgICAudGhlbigoW3JlYWQsIGhlYWRlcl0pID0+IHtcbiAgICAgIHJlYWQucmVmID0gaGVhZGVyLnJlZmVyZW5jZXNbcmVhZC5yZWZJRF0ubmFtZTtcbiAgICAgIHJldHVybiByZWFkO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcCBhIGNvbnRpZyBuYW1lIHRvIGEgY29udGlnIGluZGV4IGFuZCBjYW5vbmljYWwgbmFtZS5cbiAgICovXG4gIGdldENvbnRpZ0luZGV4KGNvbnRpZ05hbWU6IHN0cmluZyk6IFEuUHJvbWlzZTx7aWR4OiBudW1iZXI7IG5hbWU6IHN0cmluZ30+IHtcbiAgICByZXR1cm4gdGhpcy5oZWFkZXIudGhlbihoZWFkZXIgPT4ge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkZXIucmVmZXJlbmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbmFtZSA9IGhlYWRlci5yZWZlcmVuY2VzW2ldLm5hbWU7XG4gICAgICAgIGlmIChuYW1lID09IGNvbnRpZ05hbWUgfHxcbiAgICAgICAgICAgIG5hbWUgPT0gJ2NocicgKyBjb250aWdOYW1lIHx8XG4gICAgICAgICAgICAnY2hyJyArIG5hbWUgPT0gY29udGlnTmFtZSkge1xuICAgICAgICAgIHJldHVybiB7aWR4OiBpLCBuYW1lOiBuYW1lfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhyb3cgYEludmFsaWQgY29udGlnIG5hbWU6ICR7Y29udGlnTmFtZX1gO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGFsbCB0aGUgYWxpZ25tZW50cyB3aGljaCBvdmVybGFwIGEgcmFuZ2UuXG4gICAqIFRoZSAnY29udGFpbmVkJyBwYXJhbWV0ZXIgY29udHJvbHMgd2hldGhlciB0aGUgYWxpZ25tZW50cyBtdXN0IGJlIGZ1bGx5XG4gICAqIGNvbnRhaW5lZCB3aXRoaW4gdGhlIHJhbmdlLCBvciBuZWVkIG9ubHkgb3ZlcmxhcCBpdC5cbiAgICovXG4gIGdldEFsaWdubWVudHNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LCBvcHRfY29udGFpbmVkPzogYm9vbGVhbik6IFEuUHJvbWlzZTxTYW1SZWFkW10+IHtcbiAgICB2YXIgY29udGFpbmVkID0gb3B0X2NvbnRhaW5lZCB8fCBmYWxzZTtcbiAgICBpZiAoIXRoaXMuaW5kZXgpIHtcbiAgICAgIHRocm93ICdSYW5nZSBzZWFyY2hlcyBhcmUgb25seSBzdXBwb3J0ZWQgb24gQkFNcyB3aXRoIEJBSSBpbmRpY2VzLic7XG4gICAgfVxuICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXg7XG5cbiAgICByZXR1cm4gdGhpcy5nZXRDb250aWdJbmRleChyYW5nZS5jb250aWcpLnRoZW4oKHtpZHgsIG5hbWV9KSA9PiB7XG4gICAgICB2YXIgZGVmOiBRLkRlZmVycmVkPFNhbVJlYWRbXT4gPSBRLmRlZmVyKCk7XG4gICAgICAvLyBUaGlzIGhhcHBlbnMgaW4gdGhlIG5leHQgZXZlbnQgbG9vcCB0byBnaXZlIGxpc3RlbmVycyBhIGNoYW5jZSB0byByZWdpc3Rlci5cbiAgICAgIFEud2hlbigpLnRoZW4oKCkgPT4geyBkZWYubm90aWZ5KHtzdGF0dXM6ICdGZXRjaGluZyBCQU0gaW5kZXgnfSk7IH0pO1xuXG4gICAgICB2YXIgaWR4UmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoaWR4LCByYW5nZS5zdGFydCgpLCByYW5nZS5zdG9wKCkpO1xuXG4gICAgICB2YXIgcHJvbWlzZTogUS5Qcm9taXNlPFNhbVJlYWRbXT4gPSBpbmRleC5nZXRDaHVua3NGb3JJbnRlcnZhbChpZHhSYW5nZSkudGhlbihjaHVua3MgPT4ge1xuICAgICAgICAgIHJldHVybiBmZXRjaEFsaWdubWVudHModGhpcy5yZW1vdGVGaWxlLCBuYW1lLCBpZHhSYW5nZSwgY29udGFpbmVkLCBjaHVua3MpO1xuICAgICAgICB9KS50aGVuKHNhbVJlYWRzID0+IHtcbiAgICAgICAgICByZXR1cm4gc2FtUmVhZHM7XG4gICAgICAgIH0pO1xuXG4gICAgICB1dGlscy5waXBlUHJvbWlzZShkZWYsIHByb21pc2UpO1xuICAgICAgICBcbiAgICAgIHJldHVybiBkZWYucHJvbWlzZTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmFtO1xuIiwiLyogQGZsb3cgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuXG5jbGFzcyBDb2RpbmdJbnRlcnZhbCBleHRlbmRzIEludGVydmFsIHtcbiAgaXNDb2Rpbmc6IGJvb2xlYW47XG4gIGNvbnN0cnVjdG9yKHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlciwgaXNDb2Rpbmc6IGJvb2xlYW4pIHtcbiAgICBzdXBlcihzdGFydCwgc3RvcCk7XG4gICAgdGhpcy5pc0NvZGluZyA9IGlzQ29kaW5nO1xuICB9XG59XG5cbi8qKlxuICogU3BsaXQgZXhvbnMgd2hpY2ggY3Jvc3MgdGhlIGNvZGluZy9ub24tY29kaW5nIGJvdW5kYXJ5IGludG8gcHVyZWx5IGNvZGluZyAmXG4gKiBub24tY29kaW5nIHBhcnRzLlxuICovXG5mdW5jdGlvbiBzcGxpdENvZGluZ0V4b25zKGV4b25zOiBJbnRlcnZhbFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RpbmdSZWdpb246IEludGVydmFsKTogQ29kaW5nSW50ZXJ2YWxbXSB7XG4gIHJldHVybiBfLmZsYXR0ZW4oZXhvbnMubWFwKGV4b24gPT4ge1xuICAgIC8vIFNwZWNpYWwgY2FzZTogdGhlIGNvZGluZyByZWdpb24gaXMgZW50aXJlbHkgY29udGFpbmVkIGJ5IHRoaXMgZXhvbi5cbiAgICBpZiAoZXhvbi5jb250YWluc0ludGVydmFsKGNvZGluZ1JlZ2lvbikpIHtcbiAgICAgIC8vIHNwbGl0IGludG8gdGhyZWUgcGFydHMuXG4gICAgICByZXR1cm4gW1xuICAgICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChleG9uLnN0YXJ0LCBjb2RpbmdSZWdpb24uc3RhcnQgLSAxLCBmYWxzZSksXG4gICAgICAgICAgbmV3IENvZGluZ0ludGVydmFsKGNvZGluZ1JlZ2lvbi5zdGFydCwgY29kaW5nUmVnaW9uLnN0b3AsIHRydWUpLFxuICAgICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChjb2RpbmdSZWdpb24uc3RvcCArIDEsIGV4b24uc3RvcCwgZmFsc2UpXG4gICAgICBdLmZpbHRlcihpbnRlcnZhbCA9PiBpbnRlcnZhbC5zdGFydCA8PSBpbnRlcnZhbC5zdG9wKTtcbiAgICB9XG5cbiAgICB2YXIgc3RhcnRJc0NvZGluZyA9IGNvZGluZ1JlZ2lvbi5jb250YWlucyhleG9uLnN0YXJ0KSxcbiAgICAgICAgc3RvcElzQ29kaW5nID0gY29kaW5nUmVnaW9uLmNvbnRhaW5zKGV4b24uc3RvcCk7XG4gICAgaWYgKHN0YXJ0SXNDb2RpbmcgPT0gc3RvcElzQ29kaW5nKSB7XG4gICAgICByZXR1cm4gW25ldyBDb2RpbmdJbnRlcnZhbChleG9uLnN0YXJ0LCBleG9uLnN0b3AsIHN0YXJ0SXNDb2RpbmcpXTtcbiAgICB9IGVsc2UgaWYgKHN0YXJ0SXNDb2RpbmcpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChleG9uLnN0YXJ0LCBjb2RpbmdSZWdpb24uc3RvcCwgdHJ1ZSksXG4gICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChjb2RpbmdSZWdpb24uc3RvcCArIDEsIGV4b24uc3RvcCwgZmFsc2UpXG4gICAgICBdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICBuZXcgQ29kaW5nSW50ZXJ2YWwoZXhvbi5zdGFydCwgY29kaW5nUmVnaW9uLnN0YXJ0IC0gMSwgZmFsc2UpLFxuICAgICAgICBuZXcgQ29kaW5nSW50ZXJ2YWwoY29kaW5nUmVnaW9uLnN0YXJ0LCBleG9uLnN0b3AsIHRydWUpXG4gICAgICBdO1xuICAgIH1cbiAgfSkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtzcGxpdENvZGluZ0V4b25zLCBDb2RpbmdJbnRlcnZhbH07XG4iLCIvKipcbiAqIENsYXNzIGZvciBwYXJzaW5nIGZlYXR1cmVzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuXG5jbGFzcyBGZWF0dXJlIHtcbiAgaWQ6IHN0cmluZztcbiAgZmVhdHVyZVR5cGU6IHN0cmluZztcbiAgcG9zaXRpb246IENvbnRpZ0ludGVydmFsPHN0cmluZz47XG4gIHNjb3JlOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoZmVhdHVyZTogT2JqZWN0KSB7XG4gICAgdGhpcy5pZCA9IGZlYXR1cmUuaWQ7XG4gICAgdGhpcy5mZWF0dXJlVHlwZSA9IGZlYXR1cmUuZmVhdHVyZVR5cGU7XG4gICAgdGhpcy5wb3NpdGlvbiA9IGZlYXR1cmUucG9zaXRpb247XG4gICAgdGhpcy5zY29yZSA9IGZlYXR1cmUuc2NvcmU7XG4gIH1cblxuICBzdGF0aWMgZnJvbUdBNEdIKGdhNGdoRmVhdHVyZTogT2JqZWN0KTogRmVhdHVyZSB7XG4gICAgdmFyIHBvc2l0aW9uID0gbmV3IENvbnRpZ0ludGVydmFsKGdhNGdoRmVhdHVyZS5yZWZlcmVuY2VOYW1lLCBwYXJzZUludChnYTRnaEZlYXR1cmUuc3RhcnQpLCBwYXJzZUludChnYTRnaEZlYXR1cmUuZW5kKSk7XG4gICAgcmV0dXJuIG5ldyBGZWF0dXJlKFxuICAgIHtcbiAgICAgIGlkOiBnYTRnaEZlYXR1cmUuaWQsXG4gICAgICBmZWF0dXJlVHlwZTogZ2E0Z2hGZWF0dXJlLmZlYXR1cmVUeXBlLFxuICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgc2NvcmU6IDEwMDBcbiAgICB9KTtcbiAgfVxuXG4gIGludGVyc2VjdHMocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gcmFuZ2UuaW50ZXJzZWN0cyh0aGlzLnBvc2l0aW9uKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZlYXR1cmU7XG4iLCIvKipcbiAqIEJpbmFyeSBmb3JtYXRzIGZvciBCQU0gZmlsZXMuXG4gKiBTZWUgaHR0cHM6Ly9zYW10b29scy5naXRodWIuaW8vaHRzLXNwZWNzL1NBTXYxLnBkZlxuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBqQmluYXJ5IGZyb20gJ2piaW5hcnknO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmltcG9ydCBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4uL1ZpcnR1YWxPZmZzZXQnO1xuaW1wb3J0IHtudWxsU3RyaW5nLCB1aW50NjRuYXRpdmV9IGZyb20gJy4vaGVscGVycyc7XG5cbnZhciBTRVFVRU5DRV9WQUxVRVMgPSBbJz0nLCAnQScsICdDJywgJ00nLCAnRycsICdSJywgJ1MnLCAnVicsICdUJywgJ1cnLCAnWScsICdIJywgJ0snLCAnRCcsICdCJywgJ04nXTtcbnZhciBDSUdBUl9PUFMgPSBbJ00nLCAnSScsICdEJywgJ04nLCAnUycsICdIJywgJ1AnLCAnPScsICdYJ107XG5cblxuLy8gQ29yZSBhbGlnbm1lbnQgZmllbGRzIHNoYXJlZCBiZXR3ZWVuIEJhbUFsaWdubWVudCBhbmQgVGhpbkJhbUFsaWdubWVudC5cbi8vIFRPRE86IGZpZ3VyZSBvdXQgd2h5IGpCaW5hcnkncyAnZXh0ZW5kJyB0eXBlIGRvZXNuJ3Qgd29yayB3aXRoIHRoaXMgaW4gVFlQRV9TRVQuXG52YXIgVGhpbkFsaWdubWVudCA9IHtcbiAgcmVmSUQ6ICdpbnQzMicsICAgICAgICAvLyAwXG4gIHBvczogJ2ludDMyJywgICAgICAgICAgLy8gNFxuICBsX3JlYWRfbmFtZTogJ3VpbnQ4JywgIC8vIDhcbiAgTUFQUTogJ3VpbnQ4JywgICAgICAgICAvLyA5XG4gIGJpbjogJ3VpbnQxNicsICAgICAgICAgLy8gMTBcbiAgbl9jaWdhcl9vcDogJ3VpbnQxNicsICAvLyAxMlxuICBGTEFHOiAndWludDE2JywgICAgICAgIC8vIDE0XG4gIGxfc2VxOiAnaW50MzInLCAgICAgICAgLy8gMTZcbiAgbmV4dF9yZWZJRDogJ2ludDMyJywgICAvLyAyMFxuICBuZXh0X3BvczogJ2ludDMyJywgICAgIC8vIDI0XG4gIHRsZW46ICdpbnQzMicgICAgICAgICAgLy8gMjhcbiAgLy8gbGVuZ3RoIG9mIGZpeGVkLXNpemUgaGVhZGVyID0gMzIgYnl0ZXNcbn07XG5cbnZhciBGbGFncyA9IHtcbiAgUkVBRF9QQUlSRUQ6IDB4MSxcbiAgUFJPUEVSX1BBSVI6IDB4MixcbiAgUkVBRF9VTk1BUFBFRDogMHg0LFxuICBNQVRFX1VOTUFQUEVEOiAweDgsXG4gIFJFQURfU1RSQU5EOiAweDEwLFxuICBNQVRFX1NUUkFORDogMHgyMCxcbiAgRklSU1RfT0ZfUEFJUjogMHg0MCxcbiAgU0VDT05EX09GX1BBSVI6IDB4ODAsXG4gIE5PVF9QUklNQVJZX0FMSUdOTUVOVDogMHgxMDAsXG4gIFJFQURfRkFJTFNfVkVORE9SX1FVQUxJVFlfQ0hFQ0s6IDB4MjAwLFxuICBEVVBMSUNBVEVfUkVBRDogMHg0MDAsXG4gIFNVUFBMRU1FTlRBUllfQUxJR05NRU5UOiAweDgwMFxufTtcblxudmFyIFRoaWNrQWxpZ25tZW50ID0gXy5leHRlbmQoXy5jbG9uZShUaGluQWxpZ25tZW50KSwge1xuICByZWFkX25hbWU6IFtudWxsU3RyaW5nLCAnbF9yZWFkX25hbWUnXSxcbiAgY2lnYXI6IFsnYXJyYXknLCAnQ2lnYXJPcCcsICduX2NpZ2FyX29wJ10sXG4gIHNlcTogWydGb3VyQml0U2VxdWVuY2UnLCAnbF9zZXEnXSxcbiAgcXVhbDogWydhcnJheScsICd1aW50OCcsICdsX3NlcSddLCAgLy8gMjU1ID0gdW5rbm93blxuICBhdXhpbGlhcnk6IFsnYXJyYXknLCB7XG4gICAgdGFnOiBbJ3N0cmluZycsIDJdLFxuICAgIHZhbF90eXBlOiAnY2hhcicsXG4gICAgdmFsdWU6IFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdCJywge1xuICAgICAgICAgICAgIHZhbF90eXBlOiAnY2hhcicsXG4gICAgICAgICAgICAgbnVtX3ZhbHVlczogJ2ludDMyJyxcbiAgICAgICAgICAgICB2YWx1ZXM6IFsnYXJyYXknLCAnQXV4aWxpYXJ5VmFsdWUnLCAnbnVtX3ZhbHVlcyddXG4gICAgICAgICAgICB9LCAnQXV4aWxpYXJ5VmFsdWUnXVxuICB9XSAgLy8gZ29lcyB1bnRpbCB0aGUgZW5kIG9mIHRoZSBibG9ja1xufSk7XG5cbnZhciBUWVBFX1NFVDogYW55ID0ge1xuICAnakJpbmFyeS5saXR0bGVFbmRpYW4nOiB0cnVlLFxuXG4gICdCYW1IZWFkZXInOiB7XG4gICAgX21hZ2ljOiBbJ2NvbnN0JywgWydzdHJpbmcnLCA0XSwgJ0JBTVxcdTAwMDEnLCB0cnVlXSxcbiAgICBsX3RleHQ6ICdpbnQzMicsXG4gICAgdGV4dDogWydzdHJpbmcnLCAnbF90ZXh0J10sXG4gICAgbl9yZWY6ICdpbnQzMicsXG4gICAgcmVmZXJlbmNlczogWydhcnJheScsIHtcbiAgICAgIGxfbmFtZTogJ2ludDMyJyxcbiAgICAgIG5hbWU6IFtudWxsU3RyaW5nLCAnbF9uYW1lJ10sXG4gICAgICBsX3JlZjogJ2ludDMyJ1xuICAgIH0sICduX3JlZiddXG4gIH0sXG5cbiAgJ0JhbUFsaWdubWVudCc6IHtcbiAgICBibG9ja19zaXplOiAnaW50MzInLFxuICAgIGNvbnRlbnRzOiBbJ2Jsb2InLCAnYmxvY2tfc2l6ZSddXG4gIH0sXG5cbiAgLy8gVE9ETzogbWFrZSBhIFwiY2FzZVwiIGNvbnN0cnVjdCBmb3IgakJpbmFyeSAmIGltcGxlbWVudCB0aGUgcmVzdCBvZiB0aGVzZS5cbiAgJ0F1eGlsaWFyeVZhbHVlJzpcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnQScsICdjaGFyJyxcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnYycsICdpbnQ4JyxcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnQycsICd1aW50OCcsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ3MnLCAnaW50MTYnLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdTJywgJ3VpbnQxNicsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ2knLCAnaW50MzInLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdJJywgJ3VpbnQzMicsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ2YnLCAnZmxvYXQzMicsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ1onLCAnc3RyaW5nMCcsXG4gICAgLy8gVE9ETzogJ0gnID0gYnl0ZSBhcnJheSBpbiBoZXggZm9ybWF0XG4gICAgWydza2lwJywgMF1dXV1dXV1dXSxcbiAgXSxcblxuICAvLyBcIkNJR0FSOiBvcCBsZW48PDR8b3AuIOKAmE1JRE5TSFA9WOKAmeKGkuKAmDAxMjM0NTY3OOKAmVwiXG4gIC8vIFRPRE86IGl0IG1heSBiZSBwb3NzaWJsZSB0byByZWFkIHRoaXMgZGVjbGFyYXRpdmVseSB3aXRoIGEgYml0ZmllbGQgdHlwZS5cbiAgJ0NpZ2FyT3AnOiBqQmluYXJ5LlRlbXBsYXRlKHtcbiAgICBiYXNlVHlwZTogJ3VpbnQzMicsXG4gICAgcmVhZChjb250ZXh0KSB7XG4gICAgICB2YXIgdiA9IHRoaXMuYmFzZVJlYWQoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxlbmd0aDogdiA+PiA0LFxuICAgICAgICBvcDogQ0lHQVJfT1BTW3YgJiAweGZdXG4gICAgICB9O1xuICAgIH1cbiAgfSksXG5cbiAgLy8gXCI0LWJpdCBlbmNvZGVkIHJlYWQ6IOKAmD1BQ01HUlNWVFdZSEtEQk7igJnihpIgWzAsIDE1XTsgb3RoZXIgY2hhcmFjdGVycyBtYXBwZWRcbiAgLy8gdG8g4oCYTuKAmTsgaGlnaCBueWJibGUgZmlyc3QgKDFzdCBiYXNlIGluIHRoZSBoaWdoZXN0IDQtYml0IG9mIHRoZSAxc3QgYnl0ZSlcIlxuICAnRm91ckJpdFNlcXVlbmNlJzogakJpbmFyeS5UZW1wbGF0ZSh7XG4gICAgc2V0UGFyYW1zKGxlbmd0aEZpZWxkKSB7XG4gICAgICB0aGlzLmxlbmd0aEZpZWxkID0gbGVuZ3RoRmllbGQ7XG4gICAgICB2YXIgbnVtQnl0ZXMgPSBjdHggPT4gTWF0aC5mbG9vcigoK2N0eFtsZW5ndGhGaWVsZF0gKyAxKSAvIDIpO1xuICAgICAgdGhpcy5iYXNlVHlwZSA9IFsnYXJyYXknLCAndWludDgnLCBudW1CeXRlc107XG4gICAgfSxcbiAgICByZWFkKGN0eCkge1xuICAgICAgdmFyIG51bUJhc2VzID0gK2N0eFt0aGlzLmxlbmd0aEZpZWxkXTtcbiAgICAgIHZhciB2YWxzID0gdGhpcy5iYXNlUmVhZCgpO1xuICAgICAgcmV0dXJuIHZhbHMubWFwKChiLCBpKSA9PiB7XG4gICAgICAgIHJldHVybiBTRVFVRU5DRV9WQUxVRVNbYiA+PiA0XSArXG4gICAgICAgICAgICAgICAoMiAqIGkgKyAxIDwgbnVtQmFzZXMgPyBTRVFVRU5DRV9WQUxVRVNbYiAmIDB4Zl0gOiAnJyk7XG4gICAgICB9KS5qb2luKCcnKTtcbiAgICB9XG4gIH0pLFxuXG4gICdCYW1GaWxlJzoge1xuICAgIGhlYWRlcjogJ0JhbUhlYWRlcicsXG4gICAgYWxpZ25tZW50czogWydhcnJheScsICdCYW1BbGlnbm1lbnQnXVxuICB9LFxuXG4gIC8vIEJBSSBpbmRleCBmb3JtYXRzXG4gIC8vIFNlZSBodHRwczovL3NhbXRvb2xzLmdpdGh1Yi5pby9odHMtc3BlY3MvU0FNdjEucGRmXG4gICdWaXJ0dWFsT2Zmc2V0JzogakJpbmFyeS5UZW1wbGF0ZSh7XG4gICAgYmFzZVR5cGU6ICd1aW50NjQnLFxuICAgIHJlYWQoKSB7XG4gICAgICAvLyBRdW90aCBIZW5nIExpOiB1NjQgPSBjb2Zmc2V0PDwxNnx1b2Zmc2V0XG4gICAgICB2YXIgdTY0ID0gdGhpcy5iYXNlUmVhZCgpO1xuICAgICAgcmV0dXJuIG5ldyBWaXJ0dWFsT2Zmc2V0KFxuICAgICAgICAvLyBvZmZzZXQgb2YgYmVnaW5uaW5nIG9mIGd6aXAgYmxvY2sgaW4gdGhlIGNvbXByZXNzZWQgZmlsZS5cbiAgICAgICAgdTY0LmhpICogNjU1MzYgKyAodTY0LmxvID4+PiAxNiksXG4gICAgICAgIC8vIG9mZnNldCBvZiBkYXRhIHdpdGhpbiB0aGUgZGVjb21wcmVzc2VkIGJsb2NrXG4gICAgICAgIHU2NC5sbyAmIDB4ZmZmZlxuICAgICAgKTtcbiAgICB9XG4gIH0pLFxuXG4gICdDaHVua3NBcnJheSc6IFsnYXJyYXknLCB7XG4gICAgY2h1bmtfYmVnOiAnVmlydHVhbE9mZnNldCcsXG4gICAgY2h1bmtfZW5kOiAnVmlydHVhbE9mZnNldCdcbiAgfV0sXG5cbiAgJ0ludGVydmFsc0FycmF5JzogWydhcnJheScsICdWaXJ0dWFsT2Zmc2V0J10sXG5cbiAgJ0JhaUluZGV4Jzoge1xuICAgIG5fYmluOiAnaW50MzInLFxuICAgIGJpbnM6IFsnYXJyYXknLCB7XG4gICAgICBiaW46ICd1aW50MzInLFxuICAgICAgbl9jaHVuazogJ2ludDMyJyxcbiAgICAgIGNodW5rczogWydibG9iJywgY3R4ID0+IDE2ICogY3R4Lm5fY2h1bmtdLFxuICAgICAgLy8gUGFyc2luZyBpcyBkZWZlcnJlZCBhcyBhIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbi4gVGhlIHR5cGUgaXMgcmVhbGx5OlxuICAgICAgLy8gY2h1bmtzOiBbJ2FycmF5Jywge1xuICAgICAgLy8gICBjaHVua19iZWc6ICdWaXJ0dWFsT2Zmc2V0JyxcbiAgICAgIC8vICAgY2h1bmtfZW5kOiAnVmlydHVhbE9mZnNldCdcbiAgICAgIC8vIH0sICduX2NodW5rJ11cbiAgICB9LCAnbl9iaW4nXSxcbiAgICBuX2ludHY6ICdpbnQzMicsXG4gICAgaW50ZXJ2YWxzOiBbJ2Jsb2InLCBjdHggPT4gOCAqIGN0eC5uX2ludHZdXG4gICAgLy8gUGFyc2luZyBpcyBkZWZlcnJlZCBhcyBhIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbi4gVGhlIHR5cGUgaXMgcmVhbGx5OlxuICAgIC8vIGludGVydmFsczogWydhcnJheScsICdWaXJ0dWFsT2Zmc2V0JywgJ25faW50diddXG4gIH0sXG5cbiAgJ0JhaUZpbGUnOiB7XG4gICAgbWFnaWM6IFsnY29uc3QnLCBbJ3N0cmluZycsIDRdLCAnQkFJXFx1MDAwMSddLFxuICAgIG5fcmVmOiAnaW50MzInLFxuICAgIGluZGljZXM6IFsnYXJyYXknLCAnQmFpSW5kZXgnLCAnbl9yZWYnXSxcbiAgICBuX25vX2Nvb3I6IHVpbnQ2NG5hdGl2ZSAgLy8gc3BlYyBzYXlzIG9wdGlvbmFsLCBidXQgaXQncyBhbHdheXMgdGhlcmUuXG4gIH1cbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7VFlQRV9TRVQsIFRoaW5BbGlnbm1lbnQsIFRoaWNrQWxpZ25tZW50LCBGbGFnc307XG4iLCIvKipcbiAqIEJCSSBpcyB0aGUgc2hhcmVkIHN0cnVjdHVyZSBiZXR3ZWVuIGJpZ0JlZCBhbmQgYmlnV2lnLlxuICogVGhlc2Ugc3RydWN0dXJlcyBhcmUgYmFzZWQgb24gVUNTQydzIHNyYy9pbmMvYmJpRmlsZS5oXG4gKiBAZmxvd1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHt0eXBlQXRPZmZzZXR9IGZyb20gJy4vaGVscGVycyc7XG5cbnZhciBUWVBFX1NFVCA9IHtcbiAgJ2pCaW5hcnkubGl0dGxlRW5kaWFuJzogdHJ1ZSxcblxuICAnSGVhZGVyJzoge1xuICAgIF9tYWdpYzogWydjb25zdCcsICd1aW50MzInLCAweDg3ODlGMkVCLCB0cnVlXSxcbiAgICB2ZXJzaW9uOiAndWludDE2JyxcbiAgICB6b29tTGV2ZWxzOiAndWludDE2JyxcbiAgICBjaHJvbW9zb21lVHJlZU9mZnNldDogJ3VpbnQ2NCcsXG4gICAgdW56b29tZWREYXRhT2Zmc2V0OiAndWludDY0JyxcbiAgICB1bnpvb21lZEluZGV4T2Zmc2V0OiAndWludDY0JyxcbiAgICBmaWVsZENvdW50OiAndWludDE2JyxcbiAgICBkZWZpbmVkRmllbGRDb3VudDogJ3VpbnQxNicsXG4gICAgLy8gMCBpZiBubyBhdXRvU3FsIGluZm9ybWF0aW9uXG4gICAgYXV0b1NxbE9mZnNldDogJ3VpbnQ2NCcsXG4gICAgdG90YWxTdW1tYXJ5T2Zmc2V0OiAndWludDY0JyxcbiAgICAvLyBTaXplIG9mIHVuY29tcHJlc3Npb24gYnVmZmVyLiAgMCBpZiB1bmNvbXByZXNzZWQuXG4gICAgdW5jb21wcmVzc0J1ZlNpemU6ICd1aW50MzInLFxuICAgIC8vIE9mZnNldCB0byBoZWFkZXIgZXh0ZW5zaW9uIDAgaWYgbm8gc3VjaCBleHRlbnNpb25cbiAgICAvLyBUT0RPOiBzdXBwb3J0IGV4dGVuZGVkIGhlYWRlcnMgKG5vdCB1c2VkIGluIGVuc0dlbmUuYmIpXG4gICAgZXh0ZW5zaW9uT2Zmc2V0OiAndWludDY0JyxcbiAgICB6b29tSGVhZGVyczogWydhcnJheScsICdab29tSGVhZGVyJywgJ3pvb21MZXZlbHMnXSxcblxuICAgIHRvdGFsU3VtbWFyeTogdHlwZUF0T2Zmc2V0KCdUb3RhbFN1bW1hcnknLCAndG90YWxTdW1tYXJ5T2Zmc2V0JyksXG4gICAgY2hyb21vc29tZVRyZWU6IHR5cGVBdE9mZnNldCgnQlBsdXNUcmVlJywgJ2Nocm9tb3NvbWVUcmVlT2Zmc2V0JylcbiAgfSxcblxuICAnVG90YWxTdW1tYXJ5Jzoge1xuICAgIGJhc2VzQ292ZXJlZDogJ3VpbnQ2NCcsXG4gICAgbWluVmFsOiAnZmxvYXQ2NCcsICAgICAvLyBmb3IgYmlnQmVkIG1pbmltdW0gZGVwdGggb2YgY292ZXJhZ2VcbiAgICBtYXhWYWw6ICdmbG9hdDY0JywgICAgIC8vIGZvciBiaWdCZWQgbWF4aW11bSBkZXB0aCBvZiBjb3ZlcmFnZVxuICAgIHN1bURhdGE6ICdmbG9hdDY0JywgICAgLy8gZm9yIGJpZ0JlZCBzdW0gb2YgY292ZXJhZ2VcbiAgICBzdW1TcXVhcmVkOiAnZmxvYXQ2NCcgIC8vIGZvciBiaWdCZWQgc3VtIG9mIGNvdmVyYWdlIHNxdWFyZWRcbiAgfSxcblxuICAnWm9vbUhlYWRlcic6IHtcbiAgICByZWR1Y3Rpb25MZXZlbDogJ3VpbnQzMicsXG4gICAgX3Jlc2VydmVkOiAndWludDMyJyxcbiAgICBkYXRhT2Zmc2V0OiAndWludDY0JyxcbiAgICBpbmRleE9mZnNldDogJ3VpbnQ2NCdcbiAgfSxcblxuICAnQlBsdXNUcmVlJzoge1xuICAgIG1hZ2ljOiBbJ2NvbnN0JywgJ3VpbnQzMicsIDB4NzhDQThDOTEsIHRydWVdLFxuICAgIC8vIE51bWJlciBvZiBjaGlsZHJlbiBwZXIgYmxvY2sgKG5vdCBieXRlIHNpemUgb2YgYmxvY2spXG4gICAgYmxvY2tTaXplOiAndWludDMyJyxcbiAgICAvLyBOdW1iZXIgb2Ygc2lnbmlmaWNhbnQgYnl0ZXMgaW4ga2V5XG4gICAga2V5U2l6ZTogJ3VpbnQzMicsXG4gICAgLy8gTnVtYmVyIG9mIGJ5dGVzIGluIHZhbHVlXG4gICAgdmFsU2l6ZTogJ3VpbnQzMicsXG4gICAgLy8gTnVtYmVyIG9mIGl0ZW1zIGluIGluZGV4XG4gICAgaXRlbUNvdW50OiAndWludDY0JyxcbiAgICBfcmVzZXJ2ZWQyOiBbJ3NraXAnLCA0XSxcbiAgICBfcmVzZXJ2ZWQzOiBbJ3NraXAnLCA0XSxcbiAgICBub2RlczogJ0JQbHVzVHJlZU5vZGUnICAvLyBbJ2FycmF5JywgJ0JQbHVzVHJlZU5vZGUnLCAnaXRlbUNvdW50J11cbiAgfSxcbiAgXG4gICdCUGx1c1RyZWVOb2RlJzoge1xuICAgIGlzTGVhZjogJ3VpbnQ4JywgIC8vIDEgPSB5ZXMsIDAgPSBub1xuICAgIF9yZXNlcnZlZDogJ3VpbnQ4JyxcbiAgICBjb3VudDogJ3VpbnQxNicsXG4gICAgY29udGVudHM6IFsnYXJyYXknLCBbJ2lmJywgJ2lzTGVhZicsIHtcbiAgICAgIGtleTogWydzdHJpbmcnLCAna2V5U2l6ZSddLFxuICAgICAgLy8gTm90ZTogYmlnQmVkIGFsbG93cyBtb3JlIGdlbmVyYWwgdmFsdWVzOyB0aGlzIGlzIHdoYXQgRW5zZW1ibCB1c2VzLlxuICAgICAgLy8gdmFsdWU6IFsnc3RyaW5nJywgJ3ZhbFNpemUnXVxuICAgICAgaWQ6ICd1aW50MzInLFxuICAgICAgc2l6ZTogJ3VpbnQzMidcbiAgICB9LCB7XG4gICAgICBrZXk6IFsnc3RyaW5nJywgJ2tleVNpemUnXSxcbiAgICAgIG9mZnNldDogJ3VpbnQ2NCdcbiAgICB9XSwgJ2NvdW50J11cbiAgfSxcblxuICAnQ2lyVHJlZSc6IHtcbiAgICBfbWFnaWM6IFsnY29uc3QnLCAndWludDMyJywgMHgyNDY4QUNFMCwgdHJ1ZV0sXG4gICAgYmxvY2tTaXplOiAndWludDMyJyxcbiAgICBpdGVtQ291bnQ6ICd1aW50NjQnLFxuICAgIHN0YXJ0Q2hyb21JeDogJ3VpbnQzMicsXG4gICAgc3RhcnRCYXNlOiAndWludDMyJyxcbiAgICBlbmRDaHJvbUl4OiAndWludDMyJyxcbiAgICBlbmRCYXNlOiAndWludDMyJyxcbiAgICBmaWxlU2l6ZTogJ3VpbnQ2NCcsXG4gICAgaXRlbXNQZXJTbG90OiAndWludDMyJyxcbiAgICBfcmVzZXJ2ZWQ6IFsnc2tpcCcsIDRdLFxuICAgIGJsb2NrczogJ0Npck5vZGUnXG4gIH0sXG5cbiAgJ0Npck5vZGUnOiB7XG4gICAgaXNMZWFmOiAndWludDgnLCAgLy8gMSA9IHllcywgMCA9IG5vXG4gICAgX3Jlc2VydmVkOiAndWludDgnLFxuICAgIGNvdW50OiAndWludDE2JyxcbiAgICBjb250ZW50czogW1xuICAgICAgJ2FycmF5JywgW1xuICAgICAgICAnaWYnLCAnaXNMZWFmJywgJ0xlYWZEYXRhJywgJ05vbkxlYWZEYXRhJ1xuICAgICAgXSxcbiAgICAgICdjb3VudCdcbiAgICBdXG4gIH0sXG5cbiAgJ0xlYWZEYXRhJzoge1xuICAgIHN0YXJ0Q2hyb21JeDogJ3VpbnQzMicsXG4gICAgc3RhcnRCYXNlOiAndWludDMyJyxcbiAgICBlbmRDaHJvbUl4OiAndWludDMyJyxcbiAgICBlbmRCYXNlOiAndWludDMyJyxcbiAgICBvZmZzZXQ6ICd1aW50NjQnLFxuICAgIHNpemU6ICd1aW50NjQnXG4gIH0sXG5cbiAgJ05vbkxlYWZEYXRhJzoge1xuICAgIHN0YXJ0Q2hyb21JeDogJ3VpbnQzMicsXG4gICAgc3RhcnRCYXNlOiAndWludDMyJyxcbiAgICBlbmRDaHJvbUl4OiAndWludDMyJyxcbiAgICBlbmRCYXNlOiAndWludDMyJyxcbiAgICBvZmZzZXQ6ICd1aW50NjQnLFxuICB9LFxuXG4gICdCZWRFbnRyeSc6IHtcbiAgICAnY2hySWQnOiAndWludDMyJyxcbiAgICAnc3RhcnQnOiAndWludDMyJyxcbiAgICAnc3RvcCc6ICd1aW50MzInLFxuICAgICdyZXN0JzogJ3N0cmluZzAnXG4gIH0sXG5cbiAgJ0JlZEJsb2NrJzogWydhcnJheScsICdCZWRFbnRyeSddLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7VFlQRV9TRVR9O1xuIiwiLyoqXG4gKiBIZWxwZXJzIGZvciBzcGVjaWZ5aW5nIGZpbGUgZm9ybWF0cyB1c2luZyBqQmluYXJ5LlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcblxuLy8gUmVhZCBhIGpCaW5hcnkgdHlwZSBhdCBhbiBvZmZzZXQgaW4gdGhlIGJ1ZmZlciBzcGVjaWZpZWQgYnkgYW5vdGhlciBmaWVsZC5cbmZ1bmN0aW9uIHR5cGVBdE9mZnNldChiYXNlVHlwZTogYW55LCBvZmZzZXRGaWVsZE5hbWU6IHN0cmluZyk6IGFueSB7XG4gIHJldHVybiBqQmluYXJ5LlRlbXBsYXRlKHtcbiAgICAgIGJhc2VUeXBlOiBiYXNlVHlwZSxcbiAgICAgIHJlYWQ6IGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgICAgICAgaWYgKCtjb250ZXh0W29mZnNldEZpZWxkTmFtZV0gPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5iaW5hcnkucmVhZCh0aGlzLmJhc2VUeXBlLCArY29udGV4dFtvZmZzZXRGaWVsZE5hbWVdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xufVxuXG4vLyBBIGJsb2NrIG9mIGZpeGVkIGxlbmd0aCBjb250YWluaW5nIHNvbWUgb3RoZXIgdHlwZS5cbi8vIFRPRE86IHdyaXRlIHRoaXMgdXNpbmcgJ2JpbmFyeScgdHlwZSAobGlrZSBudWxsU3RyaW5nKS5cbnZhciBzaXplZEJsb2NrID0gakJpbmFyeS5UeXBlKHtcbiAgcGFyYW1zOiBbJ2l0ZW1UeXBlJywgJ2xlbmd0aEZpZWxkJ10sXG4gIHJlc29sdmU6IGZ1bmN0aW9uKGdldFR5cGUpIHtcbiAgICB0aGlzLml0ZW1UeXBlID0gZ2V0VHlwZSh0aGlzLml0ZW1UeXBlKTtcbiAgfSxcbiAgcmVhZDogZnVuY3Rpb24oY29udGV4dCkge1xuICAgIHZhciBwb3MgPSB0aGlzLmJpbmFyeS50ZWxsKCk7XG4gICAgdmFyIGxlbiA9ICtjb250ZXh0W3RoaXMubGVuZ3RoRmllbGRdO1xuICAgIHRoaXMuYmluYXJ5LnNraXAobGVuKTtcbiAgICByZXR1cm4gdGhpcy5iaW5hcnkuc2xpY2UocG9zLCBwb3MgKyBsZW4pLnJlYWQodGhpcy5pdGVtVHlwZSk7XG4gIH1cbn0pO1xuXG4vLyBBIGZpeGVkLWxlbmd0aCBzdHJpbmcgZmllbGQgd2hpY2ggaXMgYWxzbyBudWxsLXRlcm1pbmF0ZWQuXG4vLyBUT0RPOiBzaG91bGQgYmUgW3NpemVkQmxvY2ssICdzdHJpbmcwJywgbGVuZ3RoRmllbGRdXG4vLyBUT0RPOiBmaWxlIGEgYnVnIHVwc3RyZWFtIG9uICdzdHJpbmcwJywgd2hpY2ggc2hvdWxkIGRvIHdoYXQgdGhpcyBkb2VzLlxudmFyIG51bGxTdHJpbmcgPSBqQmluYXJ5LlRlbXBsYXRlKHtcbiAgc2V0UGFyYW1zKGxlbmd0aEZpZWxkKSB7XG4gICAgdGhpcy5iYXNlVHlwZSA9IFsnYmluYXJ5JywgbGVuZ3RoRmllbGRdO1xuICB9LFxuICByZWFkKCkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZWFkKCkucmVhZCgnc3RyaW5nMCcpO1xuICB9XG59KTtcblxuXG4vLyBMaWtlICd1aW50NjQnLCBidXQgYXNzZXJ0cyB0aGF0IHRoZSBudW1iZXIgaXMgPDJeNTMgKGkuZS4gZml0cyBwcmVjaXNlbHkgaW5cbi8vIGEgZmxvYXQpIGFuZCByZWFkcyBpdCBhcyBhIHBsYWluLW9sZC1udW1iZXIuIFRoaXMgaXMgYSBwZXJmb3JtYW5jZSBhbmRcbi8vIGRlYnVnZ2luZyB3aW4sIHNpbmNlIHBsYWluIG51bWJlcnMgc2hvdyB1cCBtb3JlIG5pY2VseSBpbiB0aGUgY29uc29sZS5cbnZhciB1aW50NjRuYXRpdmUgPSBqQmluYXJ5LlRlbXBsYXRlKHtcbiAgYmFzZVR5cGU6ICd1aW50NjQnLFxuICByZWFkKCkge1xuICAgIHZhciBudW0gPSB0aGlzLmJhc2VSZWFkKCksXG4gICAgICAgIHYgPSArbnVtO1xuICAgIC8vIFRlc3QgZm9yIHdyYXBhcm91bmQgJiByb3VuZG9mZlxuICAgIGlmICh2IDwgMCB8fCAxICsgdiA9PSB2KSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgTnVtYmVyIG91dCBvZiBwcmVjaXNlIGZsb2F0aW5nIHBvaW50IHJhbmdlOiAke251bX1gKTtcbiAgICB9XG4gICAgcmV0dXJuICtudW07XG4gIH1cbn0pO1xuXG5cbi8vIFR5cGUgcmV0dXJuZWQgYnkgbGF6eUFycmF5IGhlbHBlciwgYmVsb3cuXG4vLyBIYXMgYSAubGVuZ3RoIHByb3BlcnR5LCBhIC5nZXQoKSBtZXRob2QgYW5kIGEgLmdldEFsbCgpIG1ldGhvZC5cbmNsYXNzIExhenlBcnJheSB7XG4gIGJ5dGVzUGVySXRlbTogbnVtYmVyO1xuICBqYjogT2JqZWN0O1xuICBpdGVtVHlwZTogT2JqZWN0O1xuICBsZW5ndGg6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihqYiwgYnl0ZXNQZXJJdGVtOiBudW1iZXIsIGl0ZW1UeXBlKSB7XG4gICAgdGhpcy5ieXRlc1Blckl0ZW0gPSBieXRlc1Blckl0ZW07XG4gICAgdGhpcy5qYiA9IGpiO1xuICAgIHRoaXMuaXRlbVR5cGUgPSBpdGVtVHlwZTtcbiAgICB0aGlzLmxlbmd0aCA9IHRoaXMuamIudmlldy5ieXRlTGVuZ3RoIC8gdGhpcy5ieXRlc1Blckl0ZW07XG4gIH1cblxuICBnZXQoaSkge1xuICAgIHRoaXMuamIuc2VlayhpICogdGhpcy5ieXRlc1Blckl0ZW0pO1xuICAgIHJldHVybiB0aGlzLmpiLnJlYWQodGhpcy5pdGVtVHlwZSk7XG4gIH1cblxuICBnZXRBbGwoKSB7XG4gICAgdGhpcy5qYi5zZWVrKDApO1xuICAgIHJldHVybiB0aGlzLmpiLnJlYWQoWydhcnJheScsIHRoaXMuaXRlbVR5cGUsIHRoaXMubGVuZ3RoXSk7XG4gIH1cbn1cblxuXG4vLyBMaWtlIGpCaW5hcnkncyAnYXJyYXknLCBidXQgZGVmZXJzIHBhcnNpbmcgb2YgaXRlbXMgdW50aWwgdGhleSBhcmUgYWNjZXNzZWQuXG4vLyBUaGlzIGNhbiByZXN1bHQgaW4gYSBodWdlIHNwZWVkdXAgZm9yIGxhcmdlIGFycmF5cy4gU2VlIExhenlBcnJheSBmb3IgdGhlXG4vLyByZXN1bHRpbmcgdHlwZS5cbnZhciBsYXp5QXJyYXkgPSBqQmluYXJ5LlR5cGUoe1xuICBwYXJhbXM6IFsnaXRlbVR5cGUnLCAnYnl0ZXNQZXJJdGVtJywgJ251bUl0ZW1zJ10sXG4gIHJlYWQoKSB7XG4gICAgdmFyIG51bUl0ZW1zID0gdGhpcy50b1ZhbHVlKHRoaXMubnVtSXRlbXMpO1xuICAgIHZhciBieXRlc1Blckl0ZW0gPSB0aGlzLnRvVmFsdWUodGhpcy5ieXRlc1Blckl0ZW0pO1xuICAgIGlmIChudW1JdGVtcyA9PT0gdW5kZWZpbmVkIHx8IGJ5dGVzUGVySXRlbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyAnYnl0ZXNQZXJJdGVtIGFuZCBudW1JdGVtcyBtdXN0IGJlIHNldCBmb3IgbGF6eUFycmF5JztcbiAgICB9XG4gICAgdmFyIHBvcyA9IHRoaXMuYmluYXJ5LnRlbGwoKTtcbiAgICB2YXIgbGVuID0gbnVtSXRlbXMgKiBieXRlc1Blckl0ZW07XG4gICAgdmFyIGJ1ZmZlciA9IHRoaXMuYmluYXJ5LnNsaWNlKHBvcywgcG9zICsgbGVuKTtcbiAgICB0aGlzLmJpbmFyeS5za2lwKGxlbik7XG4gICAgcmV0dXJuIG5ldyBMYXp5QXJyYXkoYnVmZmVyLCBieXRlc1Blckl0ZW0sIHRoaXMuaXRlbVR5cGUpO1xuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSB7dHlwZUF0T2Zmc2V0LCBzaXplZEJsb2NrLCBudWxsU3RyaW5nLCB1aW50NjRuYXRpdmUsIGxhenlBcnJheX07XG4iLCIvKipcbiAqIFR3b0JpdCBpcyBhIHBhY2tlZCBnZW5vbWUgZm9ybWF0LlxuICogU2VlIGh0dHA6Ly9nZW5vbWUudWNzYy5lZHUvRkFRL0ZBUWZvcm1hdC5odG1sI2Zvcm1hdDdcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgVFlQRV9TRVQgPSB7XG4gICdqQmluYXJ5LmxpdHRsZUVuZGlhbic6IHRydWUsXG5cbiAgJ0hlYWRlcic6IHtcbiAgICBtYWdpYzogWydjb25zdCcsICd1aW50MzInLCAweDFBNDEyNzQzLCB0cnVlXSxcbiAgICB2ZXJzaW9uOiBbJ2NvbnN0JywgJ3VpbnQzMicsIDAsIHRydWVdLFxuICAgIHNlcXVlbmNlQ291bnQ6ICd1aW50MzInLFxuICAgIHJlc2VydmVkOiAndWludDMyJyxcblxuICAgIHNlcXVlbmNlczogWydhcnJheScsICdTZXF1ZW5jZUhlYWRlcicsICdzZXF1ZW5jZUNvdW50J11cbiAgfSxcblxuICAnU2VxdWVuY2VIZWFkZXInOiB7XG4gICAgbmFtZVNpemU6ICd1aW50OCcsXG4gICAgbmFtZTogWydzdHJpbmcnLCAnbmFtZVNpemUnXSxcbiAgICBvZmZzZXQ6ICd1aW50MzInXG4gIH0sXG5cbiAgJ1NlcXVlbmNlUmVjb3JkJzoge1xuICAgIGRuYVNpemU6ICd1aW50MzInLFxuICAgIG5CbG9ja0NvdW50OiAndWludDMyJyxcbiAgICBuQmxvY2tTdGFydHM6IFsnYXJyYXknLCAndWludDMyJywgJ25CbG9ja0NvdW50J10sXG4gICAgbkJsb2NrU2l6ZXM6IFsnYXJyYXknLCAndWludDMyJywgJ25CbG9ja0NvdW50J10sXG4gICAgLy8gVGhlIG1hc2tzIGNhbiBiZSBxdWl0ZSBsYXJnZSAofjJNQiBmb3IgY2hyMSkgYW5kIHdlIG1vc3RseSBkb24ndCBjYXJlXG4gICAgLy8gYWJvdXQgdGhlbS4gIFNvIHdlIGlnbm9yZSB0aGVtLCBidXQgd2UgZG8gbmVlZCB0byBrbm93IHRoZWlyIGxlbmd0aC5cbiAgICBtYXNrQmxvY2tDb3VudDogJ3VpbnQzMicsXG4gICAgLy8gbWFza0Jsb2NrU3RhcnRzOiBbJ2FycmF5JywgJ3VpbnQzMicsICdtYXNrQmxvY2tDb3VudCddXG4gICAgLy8gbWFza0Jsb2NrU2l6ZXM6IFsnYXJyYXknLCAndWludDMyJywgJ21hc2tCbG9ja0NvdW50J11cbiAgICAvLyByZXNlcnZlZDogJ3VpbnQzMidcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7VFlQRV9TRVR9O1xuIiwiLyoqXG4gKiBHZW5lcmljIG9iamVjdCB0aGF0IGNhbiBiZSBkaXNwbGF5ZWQuIFRoaXMgY2FuIGJlIGEgZ2VuZSwgZmVhdHVyZSBvciB2YXJpYW50LCBldGMuXG4gKiBTZWUgLi4vdml6L0dlbmVyaWNGZWF0dXJlQ2FjaGUuanNcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLypqc2hpbnQgdW51c2VkOmZhbHNlICovXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuXG5cbmNsYXNzIEdlbmVyaWNGZWF0dXJlIHtcbiAgaWQ6IHN0cmluZztcbiAgcG9zaXRpb246IENvbnRpZ0ludGVydmFsPHN0cmluZz47XG4gIGdGZWF0dXJlOiBPYmplY3Q7XG5cbiAgY29uc3RydWN0b3IoaWQ6IHN0cmluZywgcG9zaXRpb246IENvbnRpZ0ludGVydmFsPHN0cmluZz4sIGdlbmVyaWNGZWF0dXJlOiBPYmplY3QpIHtcbiAgICB0aGlzLmlkID0gZ2VuZXJpY0ZlYXR1cmUuaWQ7XG4gICAgdGhpcy5wb3NpdGlvbiA9IGdlbmVyaWNGZWF0dXJlLnBvc2l0aW9uO1xuICAgIHRoaXMuZ0ZlYXR1cmUgPSBnZW5lcmljRmVhdHVyZTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEdlbmVyaWNGZWF0dXJlO1xuIiwiLyoqXG4gKiBDbGFzcyBmb3IgcGFyc2luZyB2YXJpYW50cy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcblxuY2xhc3MgVmFyaWFudCB7XG4gIGNvbnRpZzogc3RyaW5nO1xuICBwb3NpdGlvbjogbnVtYmVyO1xuICByZWY6IHN0cmluZztcbiAgYWx0OiBzdHJpbmc7XG4gIGlkOiBzdHJpbmc7XG4gIC8vdGhpcyBpcyB0aGUgYmlnZ2VzdCBhbGxlbGUgZnJlcXVlbmN5IGZvciBzaW5nbGUgdmNmIGVudHJ5XG4gIC8vc2luZ2xlIHZjZiBlbnRyeSBtaWdodCBjb250YWluIG1vcmUgdGhhbiBvbmUgdmFyaWFudCBsaWtlIHRoZSBleGFtcGxlIGJlbG93XG4gIC8vMjAgMTExMDY5NiByczYwNDAzNTUgQSBHLFQgNjcgUEFTUyBOUz0yO0RQPTEwO0FGPTAuMzMzLDAuNjY3O0FBPVQ7REJcbiAgbWFqb3JGcmVxdWVuY3k6ID9udW1iZXI7XG4gIC8vdGhpcyBpcyB0aGUgc21hbGxlc3QgYWxsZWwgZnJlcXVlbmN5IGZvciBzaW5nbGUgdmNmIGVudHJ5XG4gIG1pbm9yRnJlcXVlbmN5OiA/bnVtYmVyO1xuICB2Y2ZMaW5lOiBzdHJpbmc7XG5cblxuICBjb25zdHJ1Y3Rvcih2YXJpYW50OiBPYmplY3QpIHtcbiAgIHRoaXMuY29udGlnID0gdmFyaWFudC5jb250aWc7XG4gICB0aGlzLnBvc2l0aW9uID0gcGFyc2VJbnQodmFyaWFudC5wb3NpdGlvbik7XG4gICB0aGlzLnJlZiA9IHZhcmlhbnQucmVmO1xuICAgdGhpcy5hbHQgPSB2YXJpYW50LmFsdDtcbiAgIHRoaXMuaWQgPSB2YXJpYW50LmlkO1xuICAgdGhpcy5tYWpvckZyZXF1ZW5jeSA9IHZhcmlhbnQubWFqb3JGcmVxdWVuY3k7XG4gICB0aGlzLm1pbm9yRnJlcXVlbmN5ID0gdmFyaWFudC5taW5vckZyZXF1ZW5jeTtcbiAgIHRoaXMudmNmTGluZSA9IHZhcmlhbnQudmNmTGluZTtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tR0E0R0goZ2E0Z2hWYXJpYW50OiBPYmplY3QpOiBWYXJpYW50IHtcbiAgIHJldHVybiBuZXcgVmFyaWFudChcbiAgICB7XG4gICAgIGNvbnRpZzogZ2E0Z2hWYXJpYW50LnJlZmVyZW5jZU5hbWUsXG4gICAgIHBvc2l0aW9uOiBwYXJzZUludChnYTRnaFZhcmlhbnQuc3RhcnQpLFxuICAgICBpZDogZ2E0Z2hWYXJpYW50LmlkLFxuICAgICByZWY6IGdhNGdoVmFyaWFudC5yZWZlcmVuY2VCYXNlcyxcbiAgICAgYWx0OiBnYTRnaFZhcmlhbnQuYWx0ZXJuYXRlQmFzZXMsXG4gICAgIG1ham9yRnJlcXVlbmN5OiAwLFxuICAgICBtaW5vckZyZXF1ZW5jeTogMCwgLy8gVE9ETyBleHRyYWN0IHRoZXNlXG4gICAgIHZjZkxpbmU6IFwiXCIgLy8gVE9ET1xuICAgfSk7XG4gIH1cblxuICBpbnRlcnNlY3RzKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGludGVyc2VjdHModGhpcywgcmFuZ2UpO1xuICB9XG5cbn1cblxuZnVuY3Rpb24gaW50ZXJzZWN0cyh2YXJpYW50OiBWYXJpYW50LCByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW4ge1xuICByZXR1cm4gcmFuZ2UuaW50ZXJzZWN0cyhuZXcgQ29udGlnSW50ZXJ2YWwodmFyaWFudC5jb250aWcsIHZhcmlhbnQucG9zaXRpb24sIHZhcmlhbnQucG9zaXRpb24gKyAxKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBWYXJpYW50LFxuICBpbnRlcnNlY3RzXG59O1xuIiwiLyoqXG4gKiBGZXRjaGVyL3BhcnNlciBmb3IgVkNGIGZpbGVzLlxuICogVGhpcyBtYWtlcyB2ZXJ5IGxpdHRsZSBlZmZvcnQgdG8gcGFyc2Ugb3V0IGRldGFpbHMgZnJvbSBWQ0YgZW50cmllcy4gSXQganVzdFxuICogZXh0cmFjdHMgQ09OVElHLCBQT1NJVElPTiwgUkVGIGFuZCBBTFQuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSBBYnN0cmFjdEZpbGUgZnJvbSAnLi4vQWJzdHJhY3RGaWxlJztcbmltcG9ydCB0eXBlIFEgZnJvbSAncSc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuXG4vLyBUaGlzIGlzIGEgbWluaW1hbGx5LXBhcnNlZCBsaW5lIGZvciBmYWNpbGl0YXRpbmcgYmluYXJ5IHNlYXJjaC5cbnR5cGUgTG9jdXNMaW5lID0ge1xuICBjb250aWc6IHN0cmluZztcbiAgcG9zaXRpb246IG51bWJlcjtcbiAgbGluZTogc3RyaW5nO1xufVxuXG5cbmZ1bmN0aW9uIGV4dHJhY3RMb2N1c0xpbmUodmNmTGluZTogc3RyaW5nKTogTG9jdXNMaW5lIHtcbiAgdmFyIHRhYjEgPSB2Y2ZMaW5lLmluZGV4T2YoJ1xcdCcpLFxuICAgICAgdGFiMiA9IHZjZkxpbmUuaW5kZXhPZignXFx0JywgdGFiMSArIDEpO1xuXG4gIHJldHVybiB7XG4gICAgY29udGlnOiB2Y2ZMaW5lLnNsaWNlKDAsIHRhYjEpLFxuICAgIHBvc2l0aW9uOiBOdW1iZXIodmNmTGluZS5zbGljZSh0YWIxICsgMSwgdGFiMikpLFxuICAgIGxpbmU6IHZjZkxpbmVcbiAgfTtcbn1cblxuXG5mdW5jdGlvbiBleHRyYWN0VmFyaWFudCh2Y2ZMaW5lOiBzdHJpbmcpOiBWYXJpYW50IHtcbiAgdmFyIHBhcnRzID0gdmNmTGluZS5zcGxpdCgnXFx0Jyk7XG4gIHZhciBtYXhGcmVxdWVuY3kgPSBudWxsO1xuICB2YXIgbWluRnJlcXVlbmN5ID0gbnVsbDtcbiAgaWYgKHBhcnRzLmxlbmd0aD49Nyl7XG4gICAgdmFyIHBhcmFtcyA9IHBhcnRzWzddLnNwbGl0KCc7Jyk7XG4gICAgZm9yICh2YXIgaT0wO2k8cGFyYW1zLmxlbmd0aDtpKyspIHtcbiAgICAgIHZhciBwYXJhbSA9IHBhcmFtc1tpXTtcbiAgICAgIGlmIChwYXJhbS5zdGFydHNXaXRoKFwiQUY9XCIpKSB7XG4gICAgICAgIG1heEZyZXF1ZW5jeSA9IDAuMDtcbiAgICAgICAgbWluRnJlcXVlbmN5ID0gMS4wO1xuICAgICAgICB2YXIgZnJlcXVlbmNpZXNTdHJpbmdzID0gcGFyYW0uc3Vic3RyKDMpLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgZm9yICh2YXIgaj0wO2o8ZnJlcXVlbmNpZXNTdHJpbmdzLmxlbmd0aDtqKyspIHtcbiAgICAgICAgICB2YXIgY3VycmVudEZyZXF1ZW5jeSA9IHBhcnNlRmxvYXQoZnJlcXVlbmNpZXNTdHJpbmdzW2pdKTtcbiAgICAgICAgICBtYXhGcmVxdWVuY3kgPSBNYXRoLm1heChtYXhGcmVxdWVuY3ksIGN1cnJlbnRGcmVxdWVuY3kpO1xuICAgICAgICAgIG1pbkZyZXF1ZW5jeSA9IE1hdGgubWluKG1pbkZyZXF1ZW5jeSwgY3VycmVudEZyZXF1ZW5jeSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgdmFyIGNvbnRpZyA9IHBhcnRzWzBdO1xuICB2YXIgcG9zaXRpb24gPSBOdW1iZXIocGFydHNbMV0pO1xuXG4gIHJldHVybiBuZXcgVmFyaWFudCh7XG4gICAgY29udGlnOiBjb250aWcsXG4gICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgIGlkOiBwYXJ0c1syXSxcbiAgICByZWY6IHBhcnRzWzNdLFxuICAgIGFsdDogcGFydHNbNF0sXG4gICAgbWFqb3JGcmVxdWVuY3k6IG1heEZyZXF1ZW5jeSxcbiAgICBtaW5vckZyZXF1ZW5jeTogbWluRnJlcXVlbmN5LFxuICAgIHZjZkxpbmUsXG4gIH0pO1xufVxuXG5cbmZ1bmN0aW9uIGNvbXBhcmVMb2N1c0xpbmUoYTogTG9jdXNMaW5lLCBiOiBMb2N1c0xpbmUpOiBudW1iZXIge1xuICAvLyBTb3J0IGxleGljb2dyYXBoaWNhbGx5IGJ5IGNvbnRpZywgdGhlbiBudW1lcmljYWxseSBieSBwb3NpdGlvbi5cbiAgaWYgKGEuY29udGlnIDwgYi5jb250aWcpIHtcbiAgICByZXR1cm4gLTE7XG4gIH0gZWxzZSBpZiAoYS5jb250aWcgPiBiLmNvbnRpZykge1xuICAgIHJldHVybiArMTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYS5wb3NpdGlvbiAtIGIucG9zaXRpb247XG4gIH1cbn1cblxuXG4vLyAoYmFzZWQgb24gdW5kZXJzY29yZSBzb3VyY2UpXG5mdW5jdGlvbiBsb3dlc3RJbmRleDxUPihoYXlzdGFjazogVFtdLCBuZWVkbGU6IFQsIGNvbXBhcmU6IChhOiBULCBiOiBUKT0+bnVtYmVyKTogbnVtYmVyIHtcbiAgdmFyIGxvdyA9IDAsXG4gICAgICBoaWdoID0gaGF5c3RhY2subGVuZ3RoO1xuICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgIHZhciBtaWQgPSBNYXRoLmZsb29yKChsb3cgKyBoaWdoKSAvIDIpLFxuICAgICAgICBjID0gY29tcGFyZShoYXlzdGFja1ttaWRdLCBuZWVkbGUpO1xuICAgIGlmIChjIDwgMCkge1xuICAgICAgbG93ID0gbWlkICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGlnaCA9IG1pZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGxvdztcbn1cblxuXG5jbGFzcyBJbW1lZGlhdGVWY2ZGaWxlIHtcbiAgbGluZXM6IExvY3VzTGluZVtdO1xuICBjb250aWdNYXA6IHtba2V5OnN0cmluZ106c3RyaW5nfTsgIC8vIGNhbm9uaWNhbCBtYXBcblxuICBjb25zdHJ1Y3RvcihsaW5lczogTG9jdXNMaW5lW10pIHtcbiAgICB0aGlzLmxpbmVzID0gbGluZXM7XG4gICAgdGhpcy5jb250aWdNYXAgPSB0aGlzLmV4dHJhY3RDb250aWdzKCk7XG4gIH1cblxuICBleHRyYWN0Q29udGlncygpOiB7W2tleTpzdHJpbmddOnN0cmluZ30ge1xuICAgIHZhciBjb250aWdzID0gW10sXG4gICAgICAgIGxhc3RDb250aWcgPSAnJztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBsaW5lID0gdGhpcy5saW5lc1tpXTtcbiAgICAgIGlmIChsaW5lLmNvbnRpZyAhPSBsYXN0Q29udGlnKSB7XG4gICAgICAgIGNvbnRpZ3MucHVzaChsaW5lLmNvbnRpZyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGNvbnRpZ01hcCA9IHt9O1xuICAgIGNvbnRpZ3MuZm9yRWFjaChjb250aWcgPT4ge1xuICAgICAgaWYgKGNvbnRpZy5zbGljZSgwLCAzKSA9PSAnY2hyJykge1xuICAgICAgICBjb250aWdNYXBbY29udGlnLnNsaWNlKDQpXSA9IGNvbnRpZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRpZ01hcFsnY2hyJyArIGNvbnRpZ10gPSBjb250aWc7XG4gICAgICB9XG4gICAgICBjb250aWdNYXBbY29udGlnXSA9IGNvbnRpZztcbiAgICB9KTtcbiAgICByZXR1cm4gY29udGlnTWFwO1xuICB9XG5cbiAgZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmFyaWFudFtdIHtcbiAgICB2YXIgbGluZXMgPSB0aGlzLmxpbmVzO1xuICAgIHZhciBjb250aWcgPSB0aGlzLmNvbnRpZ01hcFtyYW5nZS5jb250aWddO1xuICAgIGlmICghY29udGlnKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgdmFyIHN0YXJ0TG9jdXMgPSB7XG4gICAgICAgIGNvbnRpZzogY29udGlnLFxuICAgICAgICBwb3NpdGlvbjogcmFuZ2Uuc3RhcnQoKSxcbiAgICAgICAgbGluZTogJydcbiAgICAgIH0sXG4gICAgICBlbmRMb2N1cyA9IHtcbiAgICAgICAgY29udGlnOiBjb250aWcsXG4gICAgICAgIHBvc2l0aW9uOiByYW5nZS5zdG9wKCksXG4gICAgICAgIGxpbmU6ICcnXG4gICAgICB9O1xuICAgIHZhciBzdGFydEluZGV4ID0gbG93ZXN0SW5kZXgobGluZXMsIHN0YXJ0TG9jdXMsIGNvbXBhcmVMb2N1c0xpbmUpO1xuXG4gICAgdmFyIHJlc3VsdDogTG9jdXNMaW5lW10gPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChjb21wYXJlTG9jdXNMaW5lKGxpbmVzW2ldLCBlbmRMb2N1cykgPiAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVzdWx0LnB1c2gobGluZXNbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQubWFwKGxpbmUgPT4gZXh0cmFjdFZhcmlhbnQobGluZS5saW5lKSk7XG4gIH1cbn1cblxuXG5jbGFzcyBWY2ZGaWxlIHtcbiAgcmVtb3RlRmlsZTogQWJzdHJhY3RGaWxlO1xuICBpbW1lZGlhdGU6IFEuUHJvbWlzZTxJbW1lZGlhdGVWY2ZGaWxlPjtcblxuICBjb25zdHJ1Y3RvcihyZW1vdGVGaWxlOiBBYnN0cmFjdEZpbGUpIHtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuXG4gICAgdGhpcy5pbW1lZGlhdGUgPSB0aGlzLnJlbW90ZUZpbGUuZ2V0QWxsU3RyaW5nKCkudGhlbih0eHQgPT4ge1xuICAgICAgLy8gUnVubmluZyB0aGlzIG9uIGEgMTJNQiBzdHJpbmcgdGFrZXMgfjgwbXMgb24gbXkgMjAxNCBNYWNib29rIFByb1xuICAgICAgdmFyIGxpbmVzID0gdHh0LnNwbGl0KCdcXG4nKVxuICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihsaW5lID0+IChsaW5lLmxlbmd0aCAmJiBsaW5lWzBdICE9ICcjJykpXG4gICAgICAgICAgICAgICAgICAgICAubWFwKGV4dHJhY3RMb2N1c0xpbmUpO1xuICAgICAgcmV0dXJuIGxpbmVzO1xuICAgIH0pLnRoZW4obGluZXMgPT4ge1xuICAgICAgLy8gU29ydGluZyB0aGlzIHN0cnVjdHVyZSBmcm9tIHRoZSAxMk1CIFZDRiBmaWxlIHRha2VzIH42MG1zXG4gICAgICBsaW5lcy5zb3J0KGNvbXBhcmVMb2N1c0xpbmUpO1xuICAgICAgcmV0dXJuIG5ldyBJbW1lZGlhdGVWY2ZGaWxlKGxpbmVzKTtcbiAgICB9KTtcbiAgICB0aGlzLmltbWVkaWF0ZS5kb25lKCk7XG4gIH1cblxuICBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBRLlByb21pc2U8VmFyaWFudFtdPiB7XG4gICAgcmV0dXJuIHRoaXMuaW1tZWRpYXRlLnRoZW4oaW1tZWRpYXRlID0+IHtcbiAgICAgIHJldHVybiBpbW1lZGlhdGUuZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlKTtcbiAgICB9KTtcbiAgfVxufVxuXG5jbGFzcyBWYXJpYW50IHtcbiAgY29udGlnOiBzdHJpbmc7XG4gIHBvc2l0aW9uOiBudW1iZXI7XG4gIHJlZjogc3RyaW5nO1xuICBhbHQ6IHN0cmluZztcbiAgaWQ6IHN0cmluZztcbiAgLy90aGlzIGlzIHRoZSBiaWdlc3QgYWxsZWwgZnJlcXVlbmN5IGZvciBzaW5nbGUgdmNmIGVudHJ5XG4gIC8vc2luZ2xlIHZjZiBlbnRyeSBtaWdodCBjb250YWluIG1vcmUgdGhhbiBvbmUgdmFyaWFudCBsaWtlIHRoZSBleGFtcGxlIGJlbG93XG4gIC8vMjAgMTExMDY5NiByczYwNDAzNTUgQSBHLFQgNjcgUEFTUyBOUz0yO0RQPTEwO0FGPTAuMzMzLDAuNjY3O0FBPVQ7REJcbiAgbWFqb3JGcmVxdWVuY3k6ID9udW1iZXI7XG4gIC8vdGhpcyBpcyB0aGUgc21hbGxlc3QgYWxsZWwgZnJlcXVlbmN5IGZvciBzaW5nbGUgdmNmIGVudHJ5XG4gIG1pbm9yRnJlcXVlbmN5OiA/bnVtYmVyO1xuICB2Y2ZMaW5lOiBzdHJpbmc7XG5cblxuICBjb25zdHJ1Y3Rvcih2YXJpYW50OiBPYmplY3QpIHtcbiAgIHRoaXMuY29udGlnID0gdmFyaWFudC5jb250aWc7XG4gICB0aGlzLnBvc2l0aW9uID0gdmFyaWFudC5wb3NpdGlvbjtcbiAgIHRoaXMucmVmID0gdmFyaWFudC5yZWY7XG4gICB0aGlzLmFsdCA9IHZhcmlhbnQuYWx0O1xuICAgdGhpcy5pZCA9IHZhcmlhbnQuaWQ7XG4gICB0aGlzLm1ham9yRnJlcXVlbmN5ID0gdmFyaWFudC5tYWpvckZyZXF1ZW5jeTtcbiAgIHRoaXMubWlub3JGcmVxdWVuY3kgPSB2YXJpYW50Lm1pbm9yRnJlcXVlbmN5O1xuICAgdGhpcy52Y2ZMaW5lID0gdmFyaWFudC52Y2ZMaW5lO1xuICB9XG5cbiAgc3RhdGljIGZyb21HQTRHSChnYTRnaFZhcmlhbnQ6IE9iamVjdCk6IFZhcmlhbnQge1xuICAgcmV0dXJuIG5ldyBWYXJpYW50KFxuICAgIHtcbiAgICAgY29udGlnOiBnYTRnaFZhcmlhbnQucmVmZXJlbmNlTmFtZSxcbiAgICAgcG9zaXRpb246IGdhNGdoVmFyaWFudC5zdGFydCxcbiAgICAgaWQ6IGdhNGdoVmFyaWFudC5pZCxcbiAgICAgcmVmOiBnYTRnaFZhcmlhbnQucmVmZXJlbmNlQmFzZXMsXG4gICAgIGFsdDogZ2E0Z2hWYXJpYW50LmFsdGVybmF0ZUJhc2VzLFxuICAgICBtYWpvckZyZXF1ZW5jeTogMCxcbiAgICAgbWlub3JGcmVxdWVuY3k6IDAsIC8vIFRPRE8gZXh0cmFjdCB0aGVzZVxuICAgICB2Y2ZMaW5lOiBcIlwiIC8vIFRPRE9cbiAgIH0pO1xuICB9XG5cbiAgaW50ZXJzZWN0cyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpbnRlcnNlY3RzKHRoaXMsIHJhbmdlKTtcbiAgfVxuXG59XG5cbmZ1bmN0aW9uIGludGVyc2VjdHModmFyaWFudDogVmFyaWFudCwgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBib29sZWFuIHtcbiAgcmV0dXJuIHJhbmdlLmludGVyc2VjdHMobmV3IENvbnRpZ0ludGVydmFsKHZhcmlhbnQuY29udGlnLCB2YXJpYW50LnBvc2l0aW9uLCB2YXJpYW50LnBvc2l0aW9uICsgMSkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgVmNmRmlsZSxcbiAgVmFyaWFudFxufTtcbiIsIi8qKlxuICogQSBkYXRhIHNvdXJjZSB3aGljaCBpbXBsZW1lbnRzIGdlbmVyaWMgSlNPTiBwcm90b2NvbC5cbiAqIEN1cnJlbnRseSBvbmx5IHVzZWQgdG8gbG9hZCBhbGlnbm1lbnRzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7QWxpZ25tZW50LCBBbGlnbm1lbnREYXRhU291cmNlfSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuaW1wb3J0IHR5cGUge0dlbm9tZVJhbmdlfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBHQTRHSEFsaWdubWVudCBmcm9tICcuLi9HQTRHSEFsaWdubWVudCc7XG5cbmZ1bmN0aW9uIGNyZWF0ZShqc29uOiBzdHJpbmcpOiBBbGlnbm1lbnREYXRhU291cmNlIHtcblxuICAvLyBwYXJzZSBqc29uXG4gIHZhciBwYXJzZWRKc29uID0gSlNPTi5wYXJzZShqc29uKTtcbiAgdmFyIHJlYWRzOiBBbGlnbm1lbnRbXSA9IFtdO1xuXG4gIC8vIGZpbGwgcmVhZHMgd2l0aCBqc29uXG4gIGlmICghXy5pc0VtcHR5KHBhcnNlZEpzb24pKSB7XG4gICAgICByZWFkcyA9IF8udmFsdWVzKHBhcnNlZEpzb24uYWxpZ25tZW50cykubWFwKGFsaWdubWVudCA9PiBuZXcgR0E0R0hBbGlnbm1lbnQoYWxpZ25tZW50KSk7XG4gIH1cblxuICBmdW5jdGlvbiByYW5nZUNoYW5nZWQobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgLy8gRGF0YSBpcyBhbHJlYWR5IHBhcnNlZCwgc28gaW1tZWRpYXRlbHkgcmV0dXJuXG4gICAgdmFyIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKG5ld1JhbmdlLmNvbnRpZywgbmV3UmFuZ2Uuc3RhcnQsIG5ld1JhbmdlLnN0b3ApO1xuICAgIG8udHJpZ2dlcignbmV3ZGF0YScsIHJhbmdlKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0QWxpZ25tZW50c0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBBbGlnbm1lbnRbXSB7XG4gICAgaWYgKCFyYW5nZSkgcmV0dXJuIFtdO1xuICAgIHZhciByID0gXy5maWx0ZXIocmVhZHMsIHJlYWQgPT4gcmVhZC5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gICAgcmV0dXJuIHI7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQsXG4gICAgZ2V0QWxpZ25tZW50c0luUmFuZ2UsXG5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb25jZTogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RyaW5nLCBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7XG4gIHJldHVybiBvO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlXG59O1xuIiwiLyoqXG4gKiBBIGRhdGEgc291cmNlIHdoaWNoIGltcGxlbWVudHMgZ2VuZXJpYyBKU09OIHByb3RvY29sLlxuICogQ3VycmVudGx5IG9ubHkgdXNlZCB0byBsb2FkIGFsaWdubWVudHMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtGZWF0dXJlRGF0YVNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9CaWdCZWREYXRhU291cmNlJztcbmltcG9ydCBGZWF0dXJlIGZyb20gJy4uL2RhdGEvZmVhdHVyZSc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuXG5mdW5jdGlvbiBjcmVhdGUoanNvbjogc3RyaW5nKTogRmVhdHVyZURhdGFTb3VyY2Uge1xuXG4gIC8vIHBhcnNlIGpzb25cbiAgdmFyIHBhcnNlZEpzb24gPSBKU09OLnBhcnNlKGpzb24pO1xuICB2YXIgZmVhdHVyZXM6IEZlYXR1cmVbXSA9IFtdO1xuXG4gIC8vIGZpbGwgZmVhdHVyZXMgd2l0aCBqc29uXG4gIGlmICghXy5pc0VtcHR5KHBhcnNlZEpzb24pKSB7XG4gICAgICBmZWF0dXJlcyA9IF8udmFsdWVzKHBhcnNlZEpzb24uZmVhdHVyZXMpLm1hcChmZWF0dXJlID0+IEZlYXR1cmUuZnJvbUdBNEdIKGZlYXR1cmUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJhbmdlQ2hhbmdlZChuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAvLyBEYXRhIGlzIGFscmVhZHkgcGFyc2VkLCBzbyBpbW1lZGlhdGVseSByZXR1cm5cbiAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwobmV3UmFuZ2UuY29udGlnLCBuZXdSYW5nZS5zdGFydCwgbmV3UmFuZ2Uuc3RvcCk7XG4gICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpO1xuICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBGZWF0dXJlW10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcbiAgICB2YXIgciA9IF8uZmlsdGVyKGZlYXR1cmVzLCBmZWF0dXJlID0+IGZlYXR1cmUuaW50ZXJzZWN0cyhyYW5nZSkpO1xuICAgIHJldHVybiByO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkLFxuICAgIGdldEZlYXR1cmVzSW5SYW5nZSxcblxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvbmNlOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6IChzdHJpbmcsIGFueSkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTtcbiAgcmV0dXJuIG87XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGVcbn07XG4iLCIvKipcbiAqIEEgZGF0YSBzb3VyY2Ugd2hpY2ggaW1wbGVtZW50cyBnZW5lcmljIEpTT04gcHJvdG9jb2wuXG4gKiBDdXJyZW50bHkgb25seSB1c2VkIHRvIGxvYWQgYWxpZ25tZW50cy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZjZkRhdGFTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvVmNmRGF0YVNvdXJjZSc7XG5pbXBvcnQge1ZhcmlhbnR9IGZyb20gJy4uL2RhdGEvdmFyaWFudCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuXG5mdW5jdGlvbiBjcmVhdGUoanNvbjogc3RyaW5nKTogVmNmRGF0YVNvdXJjZSB7XG5cbiAgLy8gcGFyc2UganNvblxuICB2YXIgcGFyc2VkSnNvbiA9IEpTT04ucGFyc2UoanNvbik7XG4gIHZhciB2YXJpYW50czogVmFyaWFudFtdID0gW107XG5cbiAgLy8gZmlsbCB2YXJpYW50cyB3aXRoIGpzb25cbiAgaWYgKCFfLmlzRW1wdHkocGFyc2VkSnNvbikpIHtcbiAgICAgIHZhcmlhbnRzID0gXy52YWx1ZXMocGFyc2VkSnNvbi52YXJpYW50cykubWFwKHZhcmlhbnQgPT4gVmFyaWFudC5mcm9tR0E0R0godmFyaWFudCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmFuZ2VDaGFuZ2VkKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgIC8vIERhdGEgaXMgYWxyZWFkeSBwYXJzZWQsIHNvIGltbWVkaWF0ZWx5IHJldHVyblxuICAgIHZhciByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChuZXdSYW5nZS5jb250aWcsIG5ld1JhbmdlLnN0YXJ0LCBuZXdSYW5nZS5zdG9wKTtcbiAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCByYW5nZSk7XG4gICAgby50cmlnZ2VyKCduZXR3b3JrZG9uZScpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZlYXR1cmVzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IFZhcmlhbnRbXSB7XG4gICAgaWYgKCFyYW5nZSkgcmV0dXJuIFtdO1xuICAgIHZhciByID0gXy5maWx0ZXIodmFyaWFudHMsIHZhcmlhbnQgPT4gdmFyaWFudC5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gICAgcmV0dXJuIHI7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQsXG4gICAgZ2V0RmVhdHVyZXNJblJhbmdlLFxuXG4gICAgb246ICgpID0+IHt9LFxuICAgIG9uY2U6ICgpID0+IHt9LFxuICAgIG9mZjogKCkgPT4ge30sXG4gICAgdHJpZ2dlcjogKHN0cmluZywgYW55KSA9PiB7fVxuICB9O1xuICBfLmV4dGVuZChvLCBFdmVudHMpO1xuICByZXR1cm4gbztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZVxufTtcbiIsIi8qKlxuICogVGhpcyBleHBvc2VzIHRoZSBtYWluIGVudHJ5IHBvaW50IGludG8gcGlsZXVwLmpzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7VHJhY2ssIFZpc3VhbGl6ZWRUcmFjaywgVml6V2l0aE9wdGlvbnN9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtBbGxlbEZyZXF1ZW5jeVN0cmF0ZWd5fSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB0eXBlIHtTdGF0ZX0gZnJvbSAnLi90eXBlcyc7XG5cbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcblxuLy8gRGF0YSBzb3VyY2VzXG5pbXBvcnQgVHdvQml0RGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZSc7XG5pbXBvcnQgQmlnQmVkRGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvQmlnQmVkRGF0YVNvdXJjZSc7XG5pbXBvcnQgVmNmRGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvVmNmRGF0YVNvdXJjZSc7XG5pbXBvcnQgQmFtRGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvQmFtRGF0YVNvdXJjZSc7XG5pbXBvcnQgRW1wdHlTb3VyY2UgZnJvbSAnLi9zb3VyY2VzL0VtcHR5U291cmNlJztcblxuLy8gRGF0YSBzb3VyY2VzIGZyb20ganNvblxuaW1wb3J0IEdBNEdIQWxpZ25tZW50SnNvbiBmcm9tICcuL2pzb24vR0E0R0hBbGlnbm1lbnRKc29uJztcbmltcG9ydCBHQTRHSFZhcmlhbnRKc29uIGZyb20gJy4vanNvbi9HQTRHSFZhcmlhbnRKc29uJztcbmltcG9ydCBHQTRHSEZlYXR1cmVKc29uIGZyb20gJy4vanNvbi9HQTRHSEZlYXR1cmVKc29uJztcblxuLy8gR0E0R0ggc291cmNlc1xuaW1wb3J0IEdBNEdIQWxpZ25tZW50U291cmNlIGZyb20gJy4vc291cmNlcy9HQTRHSEFsaWdubWVudFNvdXJjZSc7XG5pbXBvcnQgR0E0R0hWYXJpYW50U291cmNlIGZyb20gJy4vc291cmNlcy9HQTRHSFZhcmlhbnRTb3VyY2UnO1xuaW1wb3J0IEdBNEdIRmVhdHVyZVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvR0E0R0hGZWF0dXJlU291cmNlJztcblxuLy8gVmlzdWFsaXphdGlvbnNcbmltcG9ydCBDb3ZlcmFnZVRyYWNrIGZyb20gJy4vdml6L0NvdmVyYWdlVHJhY2snO1xuaW1wb3J0IEdlbm9tZVRyYWNrIGZyb20gJy4vdml6L0dlbm9tZVRyYWNrJztcbmltcG9ydCBHZW5lVHJhY2sgZnJvbSAnLi92aXovR2VuZVRyYWNrJztcbmltcG9ydCBGZWF0dXJlVHJhY2sgZnJvbSAnLi92aXovRmVhdHVyZVRyYWNrJztcbmltcG9ydCBMb2NhdGlvblRyYWNrIGZyb20gJy4vdml6L0xvY2F0aW9uVHJhY2snO1xuaW1wb3J0IFBpbGV1cFRyYWNrIGZyb20gJy4vdml6L1BpbGV1cFRyYWNrJztcbmltcG9ydCBTY2FsZVRyYWNrIGZyb20gJy4vdml6L1NjYWxlVHJhY2snO1xuaW1wb3J0IFZhcmlhbnRUcmFjayBmcm9tICcuL3Zpei9WYXJpYW50VHJhY2snO1xuaW1wb3J0IFJvb3QgZnJvbSAnLi9Sb290JztcblxudHlwZSBHZW5vbWVSYW5nZSA9IHtcbiAgY29udGlnOiBzdHJpbmc7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjtcbn1cblxudHlwZSBQaWxldXAgPSB7XG4gIHNldFJhbmdlKHJhbmdlOiBHZW5vbWVSYW5nZSk6IHZvaWQ7XG4gIGdldFJhbmdlKCk6IEdlbm9tZVJhbmdlO1xuICBkZXN0cm95KCk6IHZvaWQ7XG59XG5cbnR5cGUgUGlsZXVwUGFyYW1zID0ge1xuICByYW5nZToge1xuICAgIGNvbnRpZzogc3RyaW5nLFxuICAgIHN0YXJ0OiBudW1iZXIsXG4gICAgc3RvcDogbnVtYmVyXG4gIH07XG4gIHRyYWNrczogVHJhY2tbXTtcbn1cblxuZnVuY3Rpb24gZmluZFJlZmVyZW5jZSh0cmFja3M6IFZpc3VhbGl6ZWRUcmFja1tdKTogP1Zpc3VhbGl6ZWRUcmFjayB7XG4gIHJldHVybiBfLmZpbmQodHJhY2tzLCB0ID0+ICEhdC50cmFjay5pc1JlZmVyZW5jZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZShlbE9ySWQ6IHN0cmluZ3xFbGVtZW50LCBwYXJhbXM6IFBpbGV1cFBhcmFtcyk6IFBpbGV1cCB7XG4gIHZhciBlbCA9IHR5cGVvZihlbE9ySWQpID09ICdzdHJpbmcnID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxPcklkKSA6IGVsT3JJZDtcbiAgaWYgKCFlbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGNyZWF0ZSBwaWxldXAgd2l0aCBub24tZXhpc3RlbnQgZWxlbWVudCAke2VsT3JJZC50b1N0cmluZygpfWApO1xuICB9XG5cbiAgdmFyIHZpelRyYWNrcyA9IHBhcmFtcy50cmFja3MubWFwKGZ1bmN0aW9uKHRyYWNrOiBUcmFjayk6IFZpc3VhbGl6ZWRUcmFjayB7XG4gICAgdmFyIHNvdXJjZSA9IHRyYWNrLmRhdGEgPyB0cmFjay5kYXRhIDogdHJhY2sudml6LmNvbXBvbmVudC5kZWZhdWx0U291cmNlO1xuICAgIGlmKCFzb3VyY2UpIHtcbiAgICAgIHZhciBkaXNwbGF5TmFtZSA9IHRyYWNrLnZpei5jb21wb25lbnQuZGlzcGxheU5hbWUgIT0gbnVsbCA/IHRyYWNrLnZpei5jb21wb25lbnQuZGlzcGxheU5hbWUgOiAndHJhY2snO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgVHJhY2sgJyR7ZGlzcGxheU5hbWV9JyBkb2Vzbid0IGhhdmUgYSBkZWZhdWx0IGAgK1xuICAgICAgICBgZGF0YSBzb3VyY2U7IHlvdSBtdXN0IHNwZWNpZnkgb25lIHdoZW4gaW5pdGlhbGl6aW5nIGl0LmBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHt2aXN1YWxpemF0aW9uOiB0cmFjay52aXosIHNvdXJjZSwgdHJhY2t9O1xuICB9KTtcblxuICB2YXIgcmVmZXJlbmNlVHJhY2sgPSBmaW5kUmVmZXJlbmNlKHZpelRyYWNrcyk7XG4gIGlmICghcmVmZXJlbmNlVHJhY2spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtdXN0IGluY2x1ZGUgYXQgbGVhc3Qgb25lIHRyYWNrIHdpdGggdHlwZT1yZWZlcmVuY2UnKTtcbiAgfVxuXG4gIHZhciByZWFjdEVsZW1lbnQgPVxuICAgICAgUmVhY3RET00ucmVuZGVyKDxSb290IHJlZmVyZW5jZVNvdXJjZT17cmVmZXJlbmNlVHJhY2suc291cmNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrcz17dml6VHJhY2tzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxSYW5nZT17cGFyYW1zLnJhbmdlfSAvPiwgZWwpO1xuXG4gIC8vaWYgdGhlIGVsZW1lbnQgZG9lc24ndCBiZWxvbmcgdG8gZG9jdW1lbnQgRE9NIG9ic2VydmUgRE9NIHRvIGRldGVjdFxuICAvL3doZW4gaXQncyBhdHRhY2hlZFxuICB2YXIgb2JzZXJ2ZXIgPSBudWxsO1xuICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gIGlmICghYm9keSkgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIG1hdGNoOiBkb2N1bWVudC5ib2R5XCIpO1xuXG4gIGlmICghYm9keS5jb250YWlucyhlbCkpIHtcbiAgICBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG11dGF0aW9ucykge1xuICAgICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24obXV0YXRpb24pIHtcbiAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnKSB7XG4gICAgICAgICAgdmFyIGFkZGVkPSBmYWxzZTtcbiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8bXV0YXRpb24uYWRkZWROb2Rlcy5sZW5ndGg7aSsrKSB7XG4gICAgICAgICAgICAvL3doZW4gYWRkZWQgZWxlbWVudCBpcyBlbGVtZW50IHdoZXJlIHdlIHZpc3VhbGl6ZSBwaWxldXBcbiAgICAgICAgICAgIC8vb3IgaXQgY29udGFpbnMgZWxlbWVudCB3aGVyZSB3ZSB2aXN1YWxpemUgcGlsZXVwXG4gICAgICAgICAgICAvL3RoZW4gd2Ugd2lsbCBoYXZlIHRvIHVwZGF0ZSBjb21wb25lbnRcbiAgICAgICAgICAgIGlmIChtdXRhdGlvbi5hZGRlZE5vZGVzW2ldPT09ZWwgfHwgbXV0YXRpb24uYWRkZWROb2Rlc1tpXS5jb250YWlucyhlbCkpIHtcbiAgICAgICAgICAgICAgYWRkZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYWRkZWQpIHtcbiAgICAgICAgICAgIGlmIChyZWFjdEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgcmVhY3RFbGVtZW50LnNldFN0YXRlKHt1cGRhdGVTaXplOnRydWV9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRocm93ICdSZWFjdEVsZW1lbnQgd2FzIG5vdCBpbml0aWFsaXplZCBwcm9wZXJseSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICAvLyBjb25maWd1cmF0aW9uIG9mIHRoZSBvYnNlcnZlcjpcbiAgICB2YXIgY29uZmlnID0ge2F0dHJpYnV0ZXM6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSwgY2hhcmFjdGVyRGF0YTogdHJ1ZSwgc3VidHJlZTogdHJ1ZX07XG5cbiAgICAvLyBzdGFydCBvYnNlcnZpbmcgZG9jdW1lbnRcbiAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LCBjb25maWcpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzZXRSYW5nZShyYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAgIGlmIChyZWFjdEVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgJ0Nhbm5vdCBjYWxsIHNldFJhbmdlIG9uIGEgZGVzdHJveWVkIHBpbGV1cCc7XG4gICAgICB9XG4gICAgICByZWFjdEVsZW1lbnQuaGFuZGxlUmFuZ2VDaGFuZ2UocmFuZ2UpO1xuICAgIH0sXG4gICAgZ2V0UmFuZ2UoKTogR2Vub21lUmFuZ2Uge1xuICAgICAgaWYgKHJlYWN0RWxlbWVudCA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyAnQ2Fubm90IGNhbGwgZ2V0UmFuZ2Ugb24gYSBkZXN0cm95ZWQgcGlsZXVwJztcbiAgICAgIH1cbiAgICAgIGlmIChyZWFjdEVsZW1lbnQuc3RhdGUucmFuZ2UgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gXy5jbG9uZShyZWFjdEVsZW1lbnQuc3RhdGUucmFuZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgJ0Nhbm5vdCBjYWxsIHNldFJhbmdlIG9uIG5vbi1leGlzdGVudCByYW5nZSc7XG4gICAgICB9XG4gICAgICBcbiAgICB9LFxuICAgIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgICBpZiAoIXZpelRyYWNrcykge1xuICAgICAgICB0aHJvdyAnQ2Fubm90IGNhbGwgZGVzdHJveSgpIHR3aWNlIG9uIHRoZSBzYW1lIHBpbGV1cCc7XG4gICAgICB9XG4gICAgICB2aXpUcmFja3MuZm9yRWFjaCgoe3NvdXJjZX0pID0+IHtcbiAgICAgICAgc291cmNlLm9mZigpO1xuICAgICAgfSk7XG4gICAgICBSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlKGVsKTtcbiAgICAgIHJlYWN0RWxlbWVudCA9IG51bGw7XG4gICAgICByZWZlcmVuY2VUcmFjayA9IG51bGw7XG4gICAgICB2aXpUcmFja3MgPSBudWxsO1xuXG4gICAgICAvLyBkaXNjb25uZWN0IG9ic2VydmVyIGlmIGl0IHdhcyBjcmVhdGVkXG4gICAgICBpZiAob2JzZXJ2ZXIgIT09IG51bGwgJiYgb2JzZXJ2ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG50eXBlIFZpek9iamVjdCA9ICgob3B0aW9uczogP09iamVjdCkgPT4gVml6V2l0aE9wdGlvbnMpO1xuXG5mdW5jdGlvbiBtYWtlVml6T2JqZWN0KGNvbXBvbmVudDogQ2xhc3M8UmVhY3QuQ29tcG9uZW50PFZpelByb3BzPGFueT4sIFN0YXRlPj4pOiBWaXpPYmplY3Qge1xuICByZXR1cm4gb3B0aW9ucyA9PiB7XG4gICAgLy8gJEZsb3dJZ25vcmU6IFRPRE8gcmVtb3ZlIGZsb3cgc3VwcHJlc3Npb25cbiAgICBvcHRpb25zID0gXy5leHRlbmQoe30sIGNvbXBvbmVudC5kZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHtjb21wb25lbnQsIG9wdGlvbnN9O1xuICB9O1xufVxuXG52YXIgcGlsZXVwID0ge1xuICBjcmVhdGU6IGNyZWF0ZSxcbiAgZm9ybWF0czoge1xuICAgIGJhbTogQmFtRGF0YVNvdXJjZS5jcmVhdGUsXG4gICAgYWxpZ25tZW50SnNvbjogR0E0R0hBbGlnbm1lbnRKc29uLmNyZWF0ZSxcbiAgICB2YXJpYW50SnNvbjogR0E0R0hWYXJpYW50SnNvbi5jcmVhdGUsXG4gICAgZmVhdHVyZUpzb246IEdBNEdIRmVhdHVyZUpzb24uY3JlYXRlLFxuICAgIHZjZjogVmNmRGF0YVNvdXJjZS5jcmVhdGUsXG4gICAgdHdvQml0OiBUd29CaXREYXRhU291cmNlLmNyZWF0ZSxcbiAgICBiaWdCZWQ6IEJpZ0JlZERhdGFTb3VyY2UuY3JlYXRlLFxuICAgIEdBUmVhZEFsaWdubWVudDogR0E0R0hBbGlnbm1lbnRTb3VyY2UuY3JlYXRlLFxuICAgIEdBVmFyaWFudDogR0E0R0hWYXJpYW50U291cmNlLmNyZWF0ZSxcbiAgICBHQUZlYXR1cmU6IEdBNEdIRmVhdHVyZVNvdXJjZS5jcmVhdGUsXG4gICAgZW1wdHk6IEVtcHR5U291cmNlLmNyZWF0ZVxuICB9LFxuICB2aXo6IHtcbiAgICBjb3ZlcmFnZTogbWFrZVZpek9iamVjdChDb3ZlcmFnZVRyYWNrKSxcbiAgICBnZW5vbWU6ICAgbWFrZVZpek9iamVjdChHZW5vbWVUcmFjayksXG4gICAgZ2VuZXM6ICAgIG1ha2VWaXpPYmplY3QoR2VuZVRyYWNrKSxcbiAgICBmZWF0dXJlczogbWFrZVZpek9iamVjdChGZWF0dXJlVHJhY2spLFxuICAgIGxvY2F0aW9uOiBtYWtlVml6T2JqZWN0KExvY2F0aW9uVHJhY2spLFxuICAgIHNjYWxlOiAgICBtYWtlVml6T2JqZWN0KFNjYWxlVHJhY2spLFxuICAgIHZhcmlhbnRzOiBtYWtlVml6T2JqZWN0KFZhcmlhbnRUcmFjayksXG4gICAgcGlsZXVwOiAgIG1ha2VWaXpPYmplY3QoUGlsZXVwVHJhY2spXG4gIH0sXG4gIGVudW06IHtcbiAgICB2YXJpYW50czoge1xuICAgICAgYWxsZWxGcmVxdWVuY3lTdHJhdGVneTogQWxsZWxGcmVxdWVuY3lTdHJhdGVneSxcbiAgICB9LFxuICB9LFxuICB2ZXJzaW9uOiAnMC42LjEwJ1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBwaWxldXA7XG5cbi8vIEV4cG9ydCBhIGdsb2JhbCB1bnRpbCB0aGUgZGlzdHJpYnV0ZWQgcGFja2FnZSB3b3JrcyB3aXRoIENvbW1vbkpTXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2hhbW1lcmxhYi9waWxldXAuanMvaXNzdWVzLzEzNlxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHdpbmRvdy5waWxldXAgPSBwaWxldXA7XG59XG4iLCIvKipcbiAqIExpZ2h0d2VpZ2h0IHJlcGxhY2VtZW50IGZvciBkMy5zY2FsZS5saW5lYXIoKS5cbiAqIFRoaXMgb25seSBzdXBwb3J0cyBudW1lcmljIHNjYWxlcywgZS5nLiBzY2FsZS5yYW5nZShbJ3JlZCcsICdibHVlJ10pIGlzIGludmFsaWQuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGxpbmVhcigpOiBhbnkge1xuICB2YXIgY2xhbXBlZCA9IGZhbHNlLFxuICAgICAgZG9tYWluID0gWzAsIDFdLFxuICAgICAgcmFuZ2UgPSBbMCwgMV07XG5cbiAgdmFyIG1lID0gZnVuY3Rpb24oeCkge1xuICAgIGlmIChjbGFtcGVkKSB7XG4gICAgICB4ID0gTWF0aC5tYXgoTWF0aC5taW4oeCwgZG9tYWluWzFdKSwgZG9tYWluWzBdKTtcbiAgICB9XG4gICAgLy8gVE9ETzogY29tcHV0ZSBjb2VmZmljaWVudHMgb25jZS5cbiAgICByZXR1cm4gKHggLSBkb21haW5bMF0pIC8gKGRvbWFpblsxXSAtIGRvbWFpblswXSkgKiAocmFuZ2VbMV0gLSByYW5nZVswXSkgKyByYW5nZVswXTtcbiAgfTtcblxuICBtZS5jbGFtcCA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gY2xhbXBlZDtcbiAgICBjbGFtcGVkID0geDtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgbWUuZG9tYWluID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09PSB1bmRlZmluZWQpIHJldHVybiBkb21haW47XG4gICAgZG9tYWluID0geDtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgbWUucmFuZ2UgPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKHggPT09IHVuZGVmaW5lZCkgcmV0dXJuIHJhbmdlO1xuICAgIHJhbmdlID0geDtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgbWUuaW52ZXJ0ID0gZnVuY3Rpb24oeCkge1xuICAgIGlmIChjbGFtcGVkKSB7XG4gICAgICB0aHJvdyBgQ2FuJ3QgaW52ZXJ0IGEgY2xhbXBlZCBsaW5lYXIgc2NhbGUuYDtcbiAgICB9XG4gICAgcmV0dXJuICh4IC0gcmFuZ2VbMF0pIC8gKHJhbmdlWzFdIC0gcmFuZ2VbMF0pICogKGRvbWFpblsxXSAtIGRvbWFpblswXSkgKyBkb21haW5bMF07XG4gIH07XG4gIG1lLm5pY2UgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBUaGlzIG1ldGhvZCBpcyBhZGFwdGVkIGRpcmVjdGx5IGZyb20gZDMncyBsaW5lYXIgc2NhbGUgbmljZSBtZXRob2QuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tYm9zdG9jay9kMy9ibG9iLzViOTgxYTE4ZC9zcmMvc2NhbGUvbGluZWFyLmpzI0w5NC1MMTEyXG4gICAgdmFyIG0gPSAxMDtcbiAgICB2YXIgZXh0ZW50ID0gZG9tYWluLFxuICAgICAgICBzcGFuID0gTWF0aC5hYnMoZXh0ZW50WzFdIC0gZXh0ZW50WzBdKSxcbiAgICAgICAgc3RlcCA9IE1hdGgucG93KDEwLCBNYXRoLmZsb29yKE1hdGgubG9nKHNwYW4gLyBtKSAvIE1hdGguTE4xMCkpLFxuICAgICAgICBlcnIgPSBtIC8gc3BhbiAqIHN0ZXA7XG5cbiAgICAvLyBGaWx0ZXIgdGlja3MgdG8gZ2V0IGNsb3NlciB0byB0aGUgZGVzaXJlZCBjb3VudC5cbiAgICBpZiAoZXJyIDw9IDAuMTUpIHN0ZXAgKj0gMTA7XG4gICAgZWxzZSBpZiAoZXJyIDw9IDAuMzUpIHN0ZXAgKj0gNTtcbiAgICBlbHNlIGlmIChlcnIgPD0gMC43NSkgc3RlcCAqPSAyO1xuXG4gICAgdmFyIG5pY2UgPSB7XG4gICAgICBmbG9vcjogZnVuY3Rpb24oeCkgeyByZXR1cm4gTWF0aC5mbG9vcih4IC8gc3RlcCkgKiBzdGVwOyB9LFxuICAgICAgY2VpbDogZnVuY3Rpb24oeCkgeyByZXR1cm4gTWF0aC5jZWlsKHggLyBzdGVwKSAqIHN0ZXA7IH1cbiAgICB9O1xuXG4gICAgdmFyIGkwID0gMCxcbiAgICAgICAgaTEgPSAxLFxuICAgICAgICB4MCA9IGRvbWFpbltpMF0sXG4gICAgICAgIHgxID0gZG9tYWluW2kxXSxcbiAgICAgICAgZHg7XG5cbiAgICBpZiAoeDEgPCB4MCkge1xuICAgICAgZHggPSBpMDsgaTAgPSBpMTsgaTEgPSBkeDtcbiAgICAgIGR4ID0geDA7IHgwID0geDE7IHgxID0gZHg7XG4gICAgfVxuXG4gICAgZG9tYWluW2kwXSA9IG5pY2UuZmxvb3IoeDApO1xuICAgIGRvbWFpbltpMV0gPSBuaWNlLmNlaWwoeDEpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHJldHVybiBtZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7IGxpbmVhciB9O1xuIiwiLyogQGZsb3cgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgQmFtRmlsZSBmcm9tICcuLi9kYXRhL2JhbSc7XG5pbXBvcnQgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcblxuaW1wb3J0IHR5cGUge0dlbm9tZVJhbmdlfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgdHlwZSB7QWxpZ25tZW50LCBBbGlnbm1lbnREYXRhU291cmNlfSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuXG4vLyBHZW5vbWUgcmFuZ2VzIGFyZSByb3VuZGVkIHRvIG11bHRpcGxlcyBvZiB0aGlzIGZvciBmZXRjaGluZy5cbi8vIFRoaXMgcmVkdWNlcyBuZXR3b3JrIGFjdGl2aXR5IHdoaWxlIGZldGNoaW5nLlxuLy8gVE9ETzogdHVuZSB0aGlzIHZhbHVlXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDA7XG52YXIgWkVST19CQVNFRCA9IGZhbHNlO1xuXG5cbmZ1bmN0aW9uIGNyZWF0ZUZyb21CYW1GaWxlKHJlbW90ZVNvdXJjZTogQmFtRmlsZSk6IEFsaWdubWVudERhdGFTb3VyY2Uge1xuICB2YXIgcmVhZHM6IHtba2V5OnN0cmluZ106IEFsaWdubWVudH0gPSB7fTtcblxuICAvLyBNYXBwaW5nIGZyb20gY29udGlnIG5hbWUgdG8gY2Fub25pY2FsIGNvbnRpZyBuYW1lLlxuICB2YXIgY29udGlnTmFtZXM6IHtba2V5OnN0cmluZ106IHN0cmluZ30gPSB7fTtcblxuICAvLyBSYW5nZXMgZm9yIHdoaWNoIHdlIGhhdmUgY29tcGxldGUgaW5mb3JtYXRpb24gLS0gbm8gbmVlZCB0byBoaXQgbmV0d29yay5cbiAgdmFyIGNvdmVyZWRSYW5nZXM6IENvbnRpZ0ludGVydmFsPHN0cmluZz5bXSA9IFtdO1xuXG4gIGZ1bmN0aW9uIGFkZFJlYWQocmVhZDogQWxpZ25tZW50KSB7XG4gICAgdmFyIGtleSA9IHJlYWQuZ2V0S2V5KCk7XG4gICAgaWYgKCFyZWFkc1trZXldKSB7XG4gICAgICByZWFkc1trZXldID0gcmVhZDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzYXZlQ29udGlnTWFwcGluZyhoZWFkZXI6IE9iamVjdCkge1xuICAgIGhlYWRlci5yZWZlcmVuY2VzLmZvckVhY2gocmVmID0+IHtcbiAgICAgIHZhciBuYW1lID0gcmVmLm5hbWU7XG4gICAgICBjb250aWdOYW1lc1tuYW1lXSA9IG5hbWU7XG4gICAgICBjb250aWdOYW1lc1snY2hyJyArIG5hbWVdID0gbmFtZTtcbiAgICAgIGlmIChuYW1lLnNsaWNlKDAsIDMpID09ICdjaHInKSB7XG4gICAgICAgIGNvbnRpZ05hbWVzW25hbWUuc2xpY2UoMyldID0gbmFtZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZldGNoKHJhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgIHZhciByZWZzUHJvbWlzZSA9ICFfLmlzRW1wdHkoY29udGlnTmFtZXMpID8gUS53aGVuKCkgOlxuICAgICAgICByZW1vdGVTb3VyY2UuaGVhZGVyLnRoZW4oc2F2ZUNvbnRpZ01hcHBpbmcpO1xuXG4gICAgLy8gRm9yIEJBTXMgd2l0aG91dCBpbmRleCBjaHVua3MsIHdlIG5lZWQgdG8gZmV0Y2ggdGhlIGVudGlyZSBCQUkgZmlsZVxuICAgIC8vIGJlZm9yZSB3ZSBjYW4ga25vdyBob3cgbGFyZ2UgdGhlIEJBTSBoZWFkZXIgaXMuIElmIHRoZSBoZWFkZXIgaXNcbiAgICAvLyBwZW5kaW5nLCBpdCdzIGFsbW9zdCBjZXJ0YWlubHkgYmVjYXVzZSB0aGUgQkFJIGZpbGUgaXMgaW4gZmxpZ2h0LlxuICAgIFEud2hlbigpLnRoZW4oKCkgPT4ge1xuICAgICAgaWYgKHJlZnNQcm9taXNlLmlzUGVuZGluZygpICYmICFyZW1vdGVTb3VyY2UuaGFzSW5kZXhDaHVua3MpIHtcbiAgICAgICAgby50cmlnZ2VyKCduZXR3b3JrcHJvZ3Jlc3MnLCB7XG4gICAgICAgICAgc3RhdHVzOiAnRmV0Y2hpbmcgQkFNIGluZGV4IC0tIHVzZSBpbmRleCBjaHVua3MgdG8gc3BlZWQgdGhpcyB1cCdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSkuZG9uZSgpO1xuXG4gICAgcmV0dXJuIHJlZnNQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgdmFyIGNvbnRpZ05hbWUgPSBjb250aWdOYW1lc1tyYW5nZS5jb250aWddO1xuICAgICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKGNvbnRpZ05hbWUsIHJhbmdlLnN0YXJ0LCByYW5nZS5zdG9wKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpbnRlcnZhbCBpcyBhbHJlYWR5IGluIHRoZSBjYWNoZS5cbiAgICAgIC8vIElmIG5vdCwgaW1tZWRpYXRlbHkgXCJjb3ZlclwiIGl0IHRvIHByZXZlbnQgZHVwbGljYXRlIHJlcXVlc3RzLlxuICAgICAgaWYgKGludGVydmFsLmlzQ292ZXJlZEJ5KGNvdmVyZWRSYW5nZXMpKSB7XG4gICAgICAgIHJldHVybiBRLndoZW4oKTtcbiAgICAgIH1cblxuICAgICAgaW50ZXJ2YWwgPSBpbnRlcnZhbC5yb3VuZChCQVNFX1BBSVJTX1BFUl9GRVRDSCwgWkVST19CQVNFRCk7XG4gICAgICB2YXIgbmV3UmFuZ2VzID0gaW50ZXJ2YWwuY29tcGxlbWVudEludGVydmFscyhjb3ZlcmVkUmFuZ2VzKTtcbiAgICAgIGNvdmVyZWRSYW5nZXMucHVzaChpbnRlcnZhbCk7XG4gICAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG5cbiAgICAgIHJldHVybiBRLmFsbChuZXdSYW5nZXMubWFwKHJhbmdlID0+XG4gICAgICAgICAgcmVtb3RlU291cmNlLmdldEFsaWdubWVudHNJblJhbmdlKHJhbmdlKVxuICAgICAgICAgICAgLnByb2dyZXNzKHByb2dyZXNzRXZlbnQgPT4ge1xuICAgICAgICAgICAgICBvLnRyaWdnZXIoJ25ldHdvcmtwcm9ncmVzcycsIHByb2dyZXNzRXZlbnQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlYWRzID0+IHtcbiAgICAgICAgICAgICAgcmVhZHMuZm9yRWFjaChyZWFkID0+IGFkZFJlYWQocmVhZCkpO1xuICAgICAgICAgICAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgICAgICAgICAgIG8udHJpZ2dlcignbmV3ZGF0YScsIHJhbmdlKTtcbiAgICAgICAgICAgIH0pKSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRBbGlnbm1lbnRzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IEFsaWdubWVudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG4gICAgaWYgKF8uaXNFbXB0eShjb250aWdOYW1lcykpIHJldHVybiBbXTtcblxuICAgIHZhciBjYW5vbmljYWxSYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChjb250aWdOYW1lc1tyYW5nZS5jb250aWddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5zdGFydCgpLCByYW5nZS5zdG9wKCkpO1xuXG4gICAgcmV0dXJuIF8uZmlsdGVyKHJlYWRzLCByZWFkID0+IHJlYWQuaW50ZXJzZWN0cyhjYW5vbmljYWxSYW5nZSkpO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkOiBmdW5jdGlvbihuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAgIGZldGNoKG5ld1JhbmdlKS5kb25lKCk7XG4gICAgfSxcbiAgICBnZXRBbGlnbm1lbnRzSW5SYW5nZSxcblxuICAgIC8vIFRoZXNlIGFyZSBoZXJlIHRvIG1ha2UgRmxvdyBoYXBweS5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb25jZTogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RhdHVzOiBzdHJpbmcsIHBhcmFtOiBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufVxuXG50eXBlIEJhbVNwZWMgPSB7XG4gIHVybDogc3RyaW5nO1xuICBpbmRleFVybDogc3RyaW5nO1xuICBpbmRleENodW5rcz86IE9iamVjdDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlKHNwZWM6IEJhbVNwZWMpOiBBbGlnbm1lbnREYXRhU291cmNlIHtcbiAgdmFyIHVybCA9IHNwZWMudXJsO1xuICBpZiAoIXVybCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBVUkwgZnJvbSB0cmFjayBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHNwZWMpfWApO1xuICB9XG4gIHZhciBpbmRleFVybCA9IHNwZWMuaW5kZXhVcmw7XG4gIGlmICghaW5kZXhVcmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgaW5kZXhVUkwgZnJvbSB0cmFjayBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHNwZWMpfWApO1xuICB9XG5cbiAgLy8gVE9ETzogdGhpcyBpcyBvdmVybHkgcmVwZXRpdGl2ZSwgc2VlIGZsb3cgaXNzdWUgZmFjZWJvb2svZmxvdyM0MzdcbiAgdmFyIGJhbUZpbGUgPSBzcGVjLmluZGV4Q2h1bmtzID9cbiAgICAgIG5ldyBCYW1GaWxlKG5ldyBSZW1vdGVGaWxlKHVybCksIG5ldyBSZW1vdGVGaWxlKGluZGV4VXJsKSwgc3BlYy5pbmRleENodW5rcykgOlxuICAgICAgbmV3IEJhbUZpbGUobmV3IFJlbW90ZUZpbGUodXJsKSwgbmV3IFJlbW90ZUZpbGUoaW5kZXhVcmwpKTtcbiAgcmV0dXJuIGNyZWF0ZUZyb21CYW1GaWxlKGJhbUZpbGUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tQmFtRmlsZVxufTtcbiIsIi8qIEBmbG93ICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHR5cGUge1N0cmFuZH0gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCB7c3RyVG9TdHJhbmR9IGZyb20gJy4uL0FsaWdubWVudCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQge0V2ZW50c30gZnJvbSAnYmFja2JvbmUnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IEludGVydmFsIGZyb20gJy4uL0ludGVydmFsJztcbmltcG9ydCBCaWdCZWQgZnJvbSAnLi4vZGF0YS9CaWdCZWQnO1xuLy8gcmVxdWlyZW1lbnQgZm9yIGpzaGludCB0byBwYXNzXG4vKiBleHBvcnRlZCBGZWF0dXJlICovXG5pbXBvcnQgRmVhdHVyZSBmcm9tICcuLi9kYXRhL2ZlYXR1cmUnO1xuXG5cbmV4cG9ydCB0eXBlIEdlbmUgPSB7XG4gIHBvc2l0aW9uOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+O1xuICBpZDogc3RyaW5nOyAgLy8gdHJhbnNjcmlwdCBJRCwgZS5nLiBcIkVOU1QwMDAwMDI2OTMwNVwiXG4gIHNjb3JlOiBudW1iZXI7XG4gIHN0cmFuZDogU3RyYW5kO1xuICBjb2RpbmdSZWdpb246IEludGVydmFsOyAgLy8gbG9jdXMgb2YgY29kaW5nIHN0YXJ0XG4gIGV4b25zOiBBcnJheTxJbnRlcnZhbD47XG4gIGdlbmVJZDogc3RyaW5nOyAgLy8gZW5zZW1ibCBnZW5lIElEXG4gIG5hbWU6IHN0cmluZzsgIC8vIGh1bWFuLXJlYWRhYmxlIG5hbWUsIGUuZy4gXCJUUDUzXCJcbn1cblxuLy8gRmxvdyB0eXBlIGZvciBleHBvcnQuXG5leHBvcnQgdHlwZSBGZWF0dXJlRGF0YVNvdXJjZSA9IHtcbiAgcmFuZ2VDaGFuZ2VkOiAobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiB2b2lkO1xuICBnZXRGZWF0dXJlc0luUmFuZ2U6IChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiwgcmVzb2x1dGlvbjogP251bWJlcikgPT4gRmVhdHVyZVtdO1xuICBvbjogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nKSA9PiB2b2lkO1xuICB0cmlnZ2VyOiAoZXZlbnQ6IHN0cmluZywgLi4uYXJnczphbnkpID0+IHZvaWQ7XG59XG5cbi8vIEZsb3cgdHlwZSBmb3IgZXhwb3J0LlxuZXhwb3J0IHR5cGUgQmlnQmVkU291cmNlID0ge1xuICByYW5nZUNoYW5nZWQ6IChuZXdSYW5nZTogR2Vub21lUmFuZ2UpID0+IHZvaWQ7XG4gIGdldEZlYXR1cmVzSW5SYW5nZTogKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSA9PiBHZW5lW107XG4gIG9uOiAoZXZlbnQ6IHN0cmluZywgaGFuZGxlcjogRnVuY3Rpb24pID0+IHZvaWQ7XG4gIG9mZjogKGV2ZW50OiBzdHJpbmcpID0+IHZvaWQ7XG4gIHRyaWdnZXI6IChldmVudDogc3RyaW5nLCAuLi5hcmdzOmFueSkgPT4gdm9pZDtcbn1cblxuLy8gVGhlIGZpZWxkcyBhcmUgZGVzY3JpYmVkIGF0IGh0dHA6Ly9nZW5vbWUudWNzYy5lZHUvRkFRL0ZBUWZvcm1hdCNmb3JtYXQxXG4vLyBGaWVsZHMgNC0xMiBhcmUgb3B0aW9uYWxcbmZ1bmN0aW9uIHBhcnNlQmVkRmVhdHVyZShmKTogR2VuZSB7XG4gIHZhciBwb3NpdGlvbiA9IG5ldyBDb250aWdJbnRlcnZhbChmLmNvbnRpZywgZi5zdGFydCwgZi5zdG9wKSxcbiAgICAgIHggPSBmLnJlc3Quc3BsaXQoJ1xcdCcpO1xuXG4gIC8vIGlmIG5vIGlkLCBnZW5lcmF0ZSByYW5kb21seSBmb3IgdW5pcXVlIHN0b3JhZ2VcbiAgdmFyIGlkID0geFswXSA/IHhbMF0gOiBwb3NpdGlvbi50b1N0cmluZygpOyAvLyBlLmcuIEVOU1QwMDAwMDM1OTU5N1xuICB2YXIgc2NvcmUgPSB4WzFdID8gcGFyc2VJbnQoeFsxXSkgOiAxMDAwOyAvLyBudW1iZXIgZnJvbSAwLTEwMDBcbiAgdmFyIHN0cmFuZCA9ICBzdHJUb1N0cmFuZCh4WzJdKTsgLy8gZWl0aGVyICssIC0gb3IgLlxuICB2YXIgY29kaW5nUmVnaW9uID0gKHhbM10gJiYgeFs0XSkgPyBuZXcgSW50ZXJ2YWwoTnVtYmVyKHhbM10pLCBOdW1iZXIoeFs0XSkpIDpuZXcgSW50ZXJ2YWwoZi5zdGFydCwgZi5zdG9wKTtcbiAgdmFyIGdlbmVJZCA9ICB4WzldID8geFs5XSA6IGlkO1xuICB2YXIgbmFtZSA9ICB4WzEwXSA/IHhbMTBdIDogXCJcIjtcblxuICAvLyBwYXJzZSBleG9uc1xuICB2YXIgZXhvbnMgPSBbXTtcbiAgaWYgKHhbN10gJiYgeFs4XSkge1xuICAgIC8vIGV4b25zIGFycmF5cyBzb21ldGltZXMgaGF2ZSB0cmFpbGluZyBjb21tYXNcbiAgICB2YXIgZXhvbkxlbmd0aHMgPSB4WzddLnJlcGxhY2UoLywqJC8sICcnKS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpLFxuICAgICAgZXhvblN0YXJ0cyA9IHhbOF0ucmVwbGFjZSgvLCokLywgJycpLnNwbGl0KCcsJykubWFwKE51bWJlcik7XG5cbiAgICBleG9ucyA9IF8uemlwKGV4b25TdGFydHMsIGV4b25MZW5ndGhzKVxuICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oW3N0YXJ0LCBsZW5ndGhdKSB7XG4gICAgICAgICAgICAgICByZXR1cm4gbmV3IEludGVydmFsKGYuc3RhcnQgKyBzdGFydCwgZi5zdGFydCArIHN0YXJ0ICsgbGVuZ3RoKTtcbiAgICAgICAgICAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcG9zaXRpb24sXG4gICAgaWQ6IGlkLFxuICAgIHNjb3JlOiBzY29yZSxcbiAgICBzdHJhbmQ6IHN0cmFuZCxcbiAgICBjb2RpbmdSZWdpb246IGNvZGluZ1JlZ2lvbixcbiAgICBnZW5lSWQ6IGdlbmVJZCxcbiAgICBuYW1lOiBuYW1lLFxuICAgIGV4b25zXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyb21CaWdCZWRGaWxlKHJlbW90ZVNvdXJjZTogQmlnQmVkKTogQmlnQmVkU291cmNlIHtcbiAgLy8gQ29sbGVjdGlvbiBvZiBnZW5lcyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGxvYWRlZC5cbiAgdmFyIGdlbmVzOiB7W2tleTpzdHJpbmddOiBHZW5lfSA9IHt9O1xuXG4gIC8vIFJhbmdlcyBmb3Igd2hpY2ggd2UgaGF2ZSBjb21wbGV0ZSBpbmZvcm1hdGlvbiAtLSBubyBuZWVkIHRvIGhpdCBuZXR3b3JrLlxuICB2YXIgY292ZXJlZFJhbmdlczogQXJyYXk8Q29udGlnSW50ZXJ2YWw8c3RyaW5nPj4gPSBbXTtcblxuICBmdW5jdGlvbiBhZGRHZW5lKG5ld0dlbmUpIHtcbiAgICBpZiAoIWdlbmVzW25ld0dlbmUuaWRdKSB7XG4gICAgICBnZW5lc1tuZXdHZW5lLmlkXSA9IG5ld0dlbmU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogR2VuZVtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICBfLmVhY2goZ2VuZXMsIGdlbmUgPT4ge1xuICAgICAgaWYgKHJhbmdlLmludGVyc2VjdHMoZ2VuZS5wb3NpdGlvbikpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGdlbmUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2gocmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3ApO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpbnRlcnZhbCBpcyBhbHJlYWR5IGluIHRoZSBjYWNoZS5cbiAgICBpZiAoaW50ZXJ2YWwuaXNDb3ZlcmVkQnkoY292ZXJlZFJhbmdlcykpIHtcbiAgICAgIHJldHVybiBRLndoZW4oKTtcbiAgICB9XG5cbiAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgIGNvdmVyZWRSYW5nZXMgPSBDb250aWdJbnRlcnZhbC5jb2FsZXNjZShjb3ZlcmVkUmFuZ2VzKTtcblxuICAgIHJldHVybiByZW1vdGVTb3VyY2UuZ2V0RmVhdHVyZUJsb2Nrc092ZXJsYXBwaW5nKGludGVydmFsKS50aGVuKGZlYXR1cmVCbG9ja3MgPT4ge1xuICAgICAgZmVhdHVyZUJsb2Nrcy5mb3JFYWNoKGZiID0+IHtcbiAgICAgICAgY292ZXJlZFJhbmdlcy5wdXNoKGZiLnJhbmdlKTtcbiAgICAgICAgY292ZXJlZFJhbmdlcyA9IENvbnRpZ0ludGVydmFsLmNvYWxlc2NlKGNvdmVyZWRSYW5nZXMpO1xuICAgICAgICB2YXIgZ2VuZXMgPSBmYi5yb3dzLm1hcChwYXJzZUJlZEZlYXR1cmUpO1xuICAgICAgICBnZW5lcy5mb3JFYWNoKGdlbmUgPT4gYWRkR2VuZShnZW5lKSk7XG4gICAgICAgIC8vd2UgaGF2ZSBuZXcgZGF0YSBmcm9tIG91ciBpbnRlcm5hbCBibG9jayByYW5nZVxuICAgICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCBmYi5yYW5nZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBvID0ge1xuICAgIHJhbmdlQ2hhbmdlZDogZnVuY3Rpb24obmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgICBmZXRjaChuZXdSYW5nZSkuZG9uZSgpO1xuICAgIH0sXG4gICAgZ2V0RmVhdHVyZXNJblJhbmdlLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6IChzdGF0dXM6IHN0cmluZywgcGFyYW06IGFueSkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTsgIC8vIE1ha2UgdGhpcyBhbiBldmVudCBlbWl0dGVyXG5cbiAgcmV0dXJuIG87XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZShkYXRhOiB7dXJsOnN0cmluZ30pOiBCaWdCZWRTb3VyY2Uge1xuICB2YXIgdXJsID0gZGF0YS51cmw7XG4gIGlmICghdXJsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIFVSTCBmcm9tIHRyYWNrOiAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xuICB9XG5cbiAgcmV0dXJuIGNyZWF0ZUZyb21CaWdCZWRGaWxlKG5ldyBCaWdCZWQodXJsKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGUsXG4gIGNyZWF0ZUZyb21CaWdCZWRGaWxlXG59O1xuIiwiLypcbiAqIFRoaXMgaXMgYSBkdW1teSBkYXRhIHNvdXJjZSB0byBiZSB1c2VkIGJ5IHRyYWNrcyB0aGF0IGRvIG5vdCBkZXBlbmQgb24gZGF0YS5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0dlbm9tZVJhbmdlfSBmcm9tICcuLi90eXBlcyc7XG5cbnR5cGUgRW1wdHlTb3VyY2UgPSB7XG4gIHJhbmdlQ2hhbmdlZDogKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkgPT4gdm9pZDtcbiAgb246IChldmVudDogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgb2ZmOiAoZXZlbnQ6IHN0cmluZykgPT4gdm9pZDtcbiAgdHJpZ2dlcjogKGV2ZW50OiBzdHJpbmcsIC4uLmFyZ3M6YW55KSA9PiB2b2lkO1xufVxuXG52YXIgY3JlYXRlID0gKCk6IEVtcHR5U291cmNlID0+ICh7XG4gIHJhbmdlQ2hhbmdlZDogKCkgPT4ge30sXG4gIG9uOiAoKSA9PiB7fSxcbiAgb2ZmOiAoKSA9PiB7fSxcbiAgdHJpZ2dlcjogKCkgPT4ge31cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlXG59O1xuIiwiLyoqXG4gKiBBIGRhdGEgc291cmNlIHdoaWNoIGltcGxlbWVudHMgdGhlIEdBNEdIIHByb3RvY29sLlxuICogQ3VycmVudGx5IG9ubHkgdXNlZCB0byBsb2FkIGFsaWdubWVudHMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHR5cGUge0FsaWdubWVudCwgQWxpZ25tZW50RGF0YVNvdXJjZX0gZnJvbSAnLi4vQWxpZ25tZW50JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQge0V2ZW50c30gZnJvbSAnYmFja2JvbmUnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IEdBNEdIQWxpZ25tZW50IGZyb20gJy4uL0dBNEdIQWxpZ25tZW50JztcblxudmFyIEFMSUdOTUVOVFNfUEVSX1JFUVVFU1QgPSAyMDA7ICAvLyBUT0RPOiBleHBsYWluIHRoaXMgY2hvaWNlLlxudmFyIFpFUk9fQkFTRUQgPSBmYWxzZTtcblxuXG4vLyBHZW5vbWUgcmFuZ2VzIGFyZSByb3VuZGVkIHRvIG11bHRpcGxlcyBvZiB0aGlzIGZvciBmZXRjaGluZy5cbi8vIFRoaXMgcmVkdWNlcyBuZXR3b3JrIGFjdGl2aXR5IHdoaWxlIGZldGNoaW5nLlxuLy8gVE9ETzogdHVuZSB0aGlzIHZhbHVlIC0tIHNldHRpbmcgaXQgY2xvc2UgdG8gdGhlIHJlYWQgbGVuZ3RoIHdpbGwgcmVzdWx0IGluXG4vLyBsb3RzIG9mIHJlYWRzIGJlaW5nIGZldGNoZWQgdHdpY2UsIGJ1dCBzZXR0aW5nIGl0IHRvbyBsYXJnZSB3aWxsIHJlc3VsdCBpblxuLy8gYnVsa2llciByZXF1ZXN0cy5cbnZhciBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IDEwMDtcblxudHlwZSBHQTRHSFNwZWMgPSB7XG4gIGVuZHBvaW50OiBzdHJpbmc7XG4gIHJlYWRHcm91cElkOiBzdHJpbmc7XG4gIC8vIEhBQ0sgZm9yIGRlbW8uIElmIHNldCwgd2lsbCBhbHdheXMgdXNlIHRoaXMgcmVmZXJlbmNlIGlkLlxuICAvLyBUaGlzIGlzIGZvciBmZXRjaGluZyByZWZlcmVuY2VJZHMgc3BlY2lmaWVkIGluIEdBNEdIIHJlZmVyZW5jZVxuICAvLyBzZXJ2ZXJcbiAgZm9yY2VkUmVmZXJlbmNlSWQ6ID9zdHJpbmc7XG59O1xuXG5mdW5jdGlvbiBjcmVhdGUoc3BlYzogR0E0R0hTcGVjKTogQWxpZ25tZW50RGF0YVNvdXJjZSB7XG4gIHZhciB1cmwgPSBzcGVjLmVuZHBvaW50ICsgJy9yZWFkcy9zZWFyY2gnO1xuXG4gIHZhciByZWFkczoge1trZXk6c3RyaW5nXTogQWxpZ25tZW50fSA9IHt9O1xuXG4gIC8vIFJhbmdlcyBmb3Igd2hpY2ggd2UgaGF2ZSBjb21wbGV0ZSBpbmZvcm1hdGlvbiAtLSBubyBuZWVkIHRvIGhpdCBuZXR3b3JrLlxuICB2YXIgY292ZXJlZFJhbmdlczogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPltdID0gW107XG5cbiAgZnVuY3Rpb24gYWRkUmVhZHNGcm9tUmVzcG9uc2UocmVzcG9uc2U6IE9iamVjdCkge1xuICAgIGlmIChyZXNwb25zZS5hbGlnbm1lbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVzcG9uc2UuYWxpZ25tZW50cy5mb3JFYWNoKGFsaWdubWVudCA9PiB7XG4gICAgICAvLyBvcHRpbWl6YXRpb246IGRvbid0IGJvdGhlciBjb25zdHJ1Y3RpbmcgYSBHQTRHSEFsaWdubWVudCB1bmxlc3MgaXQncyBuZXcuXG4gICAgICB2YXIga2V5ID0gR0E0R0hBbGlnbm1lbnQua2V5RnJvbUdBNEdIUmVzcG9uc2UoYWxpZ25tZW50KTtcbiAgICAgIGlmIChrZXkgaW4gcmVhZHMpIHJldHVybjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBnYTRnaEFsaWdubWVudCA9IG5ldyBHQTRHSEFsaWdubWVudChhbGlnbm1lbnQpO1xuICAgICAgICByZWFkc1trZXldID0gZ2E0Z2hBbGlnbm1lbnQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIHNvbWV0aW1lcywgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIgZG9lcyBub3QgaGF2ZSBhbiBhbGlnbm1lbnQuXG4gICAgICAgIC8vIHRoaXMgd2lsbCBjYXRjaCBhbiBleGNlcHRpb24gaW4gdGhlIEdBNEdIQWxpZ25tZW50IGNvbnN0cnVjdG9yXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByYW5nZUNoYW5nZWQobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKG5ld1JhbmdlLmNvbnRpZywgbmV3UmFuZ2Uuc3RhcnQsIG5ld1JhbmdlLnN0b3ApO1xuICAgIGlmIChpbnRlcnZhbC5pc0NvdmVyZWRCeShjb3ZlcmVkUmFuZ2VzKSkgcmV0dXJuO1xuXG4gICAgaW50ZXJ2YWwgPSBpbnRlcnZhbC5yb3VuZChCQVNFX1BBSVJTX1BFUl9GRVRDSCwgWkVST19CQVNFRCk7XG5cbiAgICAvLyBzZWxlY3Qgb25seSBpbnRlcnZhbHMgbm90IHlldCBsb2FkZWQgaW50byBjb3ZlcmVkUmFuZ2Vzw59cbiAgICB2YXIgaW50ZXJ2YWxzID0gaW50ZXJ2YWwuY29tcGxlbWVudEludGVydmFscyhjb3ZlcmVkUmFuZ2VzKTtcblxuICAgIC8vIFdlIFwiY292ZXJcIiB0aGUgaW50ZXJ2YWwgaW1tZWRpYXRlbHkgKGJlZm9yZSB0aGUgcmVhZHMgaGF2ZSBhcnJpdmVkKSB0b1xuICAgIC8vIHByZXZlbnQgZHVwbGljYXRlIG5ldHdvcmsgcmVxdWVzdHMuXG4gICAgY292ZXJlZFJhbmdlcy5wdXNoKGludGVydmFsKTtcbiAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG5cbiAgICBpbnRlcnZhbHMuZm9yRWFjaChpID0+IHtcbiAgICAgIGZldGNoQWxpZ25tZW50c0ZvckludGVydmFsKGksIG51bGwsIDEgLyogZmlyc3QgcmVxdWVzdCAqLyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBub3RpZnlGYWlsdXJlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIG8udHJpZ2dlcignbmV0d29ya2ZhaWx1cmUnLCBtZXNzYWdlKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2hBbGlnbm1lbnRzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUb2tlbjogP3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtUmVxdWVzdHM6IG51bWJlcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignUE9TVCcsIHVybCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oZTogYW55KSB7XG4gICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlO1xuICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDQwMCkge1xuICAgICAgICBub3RpZnlGYWlsdXJlKHRoaXMuc3RhdHVzICsgJyAnICsgdGhpcy5zdGF0dXNUZXh0ICsgJyAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUpIHtcbiAgICAgICAgICBub3RpZnlGYWlsdXJlKCdFcnJvciBmcm9tIEdBNEdIIGVuZHBvaW50OiAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGRSZWFkc0Zyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpOyAgLy8gZGlzcGxheSBkYXRhIGFzIGl0IGNvbWVzIGluLlxuICAgICAgICAgIGlmIChyZXNwb25zZS5uZXh0UGFnZVRva2VuKSB7XG4gICAgICAgICAgICBmZXRjaEFsaWdubWVudHNGb3JJbnRlcnZhbChyYW5nZSwgcmVzcG9uc2UubmV4dFBhZ2VUb2tlbiwgbnVtUmVxdWVzdHMgKyAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgby50cmlnZ2VyKCduZXR3b3JrZG9uZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGU6IGFueSkge1xuICAgICAgbm90aWZ5RmFpbHVyZSgnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXM6ICcgKyB0aGlzLnN0YXR1cyk7XG4gICAgfSk7XG5cbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtwcm9ncmVzcycsIHtudW1SZXF1ZXN0c30pO1xuICAgIC8vIGhhY2sgZm9yIERFTU8uIGZvcmNlIEdBNEdIIHJlZmVyZW5jZSBJRFxuICAgIHZhciBjb250aWcgPSByYW5nZS5jb250aWc7XG4gICAgaWYgKHNwZWMuZm9yY2VkUmVmZXJlbmNlSWQgIT09IHVuZGVmaW5lZClcbiAgICB7XG4gICAgICBjb250aWcgPSBzcGVjLmZvcmNlZFJlZmVyZW5jZUlkO1xuICAgIH1cbiAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICBwYWdlVG9rZW46IHBhZ2VUb2tlbixcbiAgICAgIHBhZ2VTaXplOiBBTElHTk1FTlRTX1BFUl9SRVFVRVNULFxuICAgICAgcmVhZEdyb3VwSWRzOiBbc3BlYy5yZWFkR3JvdXBJZF0sXG4gICAgICByZWZlcmVuY2VJZDogY29udGlnLFxuICAgICAgc3RhcnQ6IHJhbmdlLnN0YXJ0KCksXG4gICAgICBlbmQ6IHJhbmdlLnN0b3AoKVxuICAgIH0pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEFsaWdubWVudHNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogQWxpZ25tZW50W10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcblxuICAgIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQoKSwgcmFuZ2Uuc3RvcCgpKTtcblxuICAgIHJldHVybiBfLmZpbHRlcihyZWFkcywgcmVhZCA9PiByZWFkLmludGVyc2VjdHMocmFuZ2UpKTtcbiAgfVxuXG4gIHZhciBvID0ge1xuICAgIHJhbmdlQ2hhbmdlZCxcbiAgICBnZXRBbGlnbm1lbnRzSW5SYW5nZSxcblxuICAgIC8vIFRoZXNlIGFyZSBoZXJlIHRvIG1ha2UgRmxvdyBoYXBweS5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb25jZTogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RhdHVzOiBzdHJpbmcsIHBhcmFtOiBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuICByZXR1cm4gbztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZVxufTtcbiIsIi8qKlxuICogQSBkYXRhIHNvdXJjZSB3aGljaCBpbXBsZW1lbnRzIHRoZSBHQTRHSCBGZWF0dXJlIHByb3RvY29sLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2V9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5cbmltcG9ydCB0eXBlIHtGZWF0dXJlRGF0YVNvdXJjZX0gZnJvbSAnLi9CaWdCZWREYXRhU291cmNlJztcbmltcG9ydCBGZWF0dXJlIGZyb20gJy4uL2RhdGEvZmVhdHVyZSc7XG5cbnZhciBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IDEwMDtcbnZhciBGRUFUVVJFU19QRVJfUkVRVUVTVCA9IDQwMDtcbnZhciBaRVJPX0JBU0VEID0gZmFsc2U7XG5cbnR5cGUgR0E0R0hGZWF0dXJlU3BlYyA9IHtcbiAgZW5kcG9pbnQ6IHN0cmluZztcbiAgZmVhdHVyZVNldElkOiBzdHJpbmc7XG59O1xuXG5mdW5jdGlvbiBjcmVhdGUoc3BlYzogR0E0R0hGZWF0dXJlU3BlYyk6IEZlYXR1cmVEYXRhU291cmNlIHtcbiAgdmFyIHVybCA9IHNwZWMuZW5kcG9pbnQgKyAnL2ZlYXR1cmVzL3NlYXJjaCc7XG5cbiAgdmFyIGZlYXR1cmVzOiB7W2tleTpzdHJpbmddOiBGZWF0dXJlfSA9IHt9O1xuXG4gIC8vIFJhbmdlcyBmb3Igd2hpY2ggd2UgaGF2ZSBjb21wbGV0ZSBpbmZvcm1hdGlvbiAtLSBubyBuZWVkIHRvIGhpdCBuZXR3b3JrLlxuICB2YXIgY292ZXJlZFJhbmdlczogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPltdID0gW107XG5cbiAgZnVuY3Rpb24gYWRkRmVhdHVyZXNGcm9tUmVzcG9uc2UocmVzcG9uc2U6IE9iamVjdCkge1xuICAgIGlmIChyZXNwb25zZS5mZWF0dXJlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmVzcG9uc2UuZmVhdHVyZXMuZm9yRWFjaChnYTRnaEZlYXR1cmUgPT4ge1xuICAgICAgdmFyIGNvbnRpZ0ludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKGdhNGdoRmVhdHVyZS5yZWZlcmVuY2VOYW1lLCBnYTRnaEZlYXR1cmUuc3RhcnQsIGdhNGdoRmVhdHVyZS5lbmQpO1xuXG4gICAgICB2YXIga2V5ID0gZ2E0Z2hGZWF0dXJlLmlkICsgY29udGlnSW50ZXJ2YWwudG9TdHJpbmcoKTtcbiAgICAgIGlmIChrZXkgaW4gZmVhdHVyZXMpIHJldHVybjtcbiAgICAgIHZhciBmZWF0dXJlID0gRmVhdHVyZS5mcm9tR0E0R0goZ2E0Z2hGZWF0dXJlKTtcbiAgICAgIGZlYXR1cmVzW2tleV0gPSBmZWF0dXJlO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmFuZ2VDaGFuZ2VkKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgIHZhciBpbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChuZXdSYW5nZS5jb250aWcsIG5ld1JhbmdlLnN0YXJ0LCBuZXdSYW5nZS5zdG9wKTtcbiAgICBpZiAoaW50ZXJ2YWwuaXNDb3ZlcmVkQnkoY292ZXJlZFJhbmdlcykpIHJldHVybjtcblxuICAgIGludGVydmFsID0gaW50ZXJ2YWwucm91bmQoQkFTRV9QQUlSU19QRVJfRkVUQ0gsIFpFUk9fQkFTRUQpO1xuXG4gICAgLy8gc2VsZWN0IG9ubHkgaW50ZXJ2YWxzIG5vdCB5ZXQgbG9hZGVkIGludG8gY292ZXJlZFJhbmdlc8OfXG4gICAgdmFyIGludGVydmFscyA9IGludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMoY292ZXJlZFJhbmdlcyk7XG5cbiAgICAvLyBXZSBcImNvdmVyXCIgdGhlIGludGVydmFsIGltbWVkaWF0ZWx5IChiZWZvcmUgdGhlIHJlYWRzIGhhdmUgYXJyaXZlZCkgdG9cbiAgICAvLyBwcmV2ZW50IGR1cGxpY2F0ZSBuZXR3b3JrIHJlcXVlc3RzLlxuICAgIGNvdmVyZWRSYW5nZXMucHVzaChpbnRlcnZhbCk7XG4gICAgY292ZXJlZFJhbmdlcyA9IENvbnRpZ0ludGVydmFsLmNvYWxlc2NlKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgaW50ZXJ2YWxzLmZvckVhY2goaSA9PiB7XG4gICAgICBmZXRjaEZlYXR1cmVzRm9ySW50ZXJ2YWwoaSwgbnVsbCwgMSAvKiBmaXJzdCByZXF1ZXN0ICovKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdGlmeUZhaWx1cmUobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgby50cmlnZ2VyKCduZXR3b3JrZmFpbHVyZScsIG1lc3NhZ2UpO1xuICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaEZlYXR1cmVzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUb2tlbjogP3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtUmVxdWVzdHM6IG51bWJlcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignUE9TVCcsIHVybCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oZTogYW55KSB7XG4gICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlO1xuICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDQwMCkge1xuICAgICAgICBub3RpZnlGYWlsdXJlKHRoaXMuc3RhdHVzICsgJyAnICsgdGhpcy5zdGF0dXNUZXh0ICsgJyAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUpIHtcbiAgICAgICAgICBub3RpZnlGYWlsdXJlKCdFcnJvciBmcm9tIEdBNEdIIEZlYXR1cmUgZW5kcG9pbnQ6ICcgKyBKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFkZEZlYXR1cmVzRnJvbVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCByYW5nZSk7ICAvLyBkaXNwbGF5IGRhdGEgYXMgaXQgY29tZXMgaW4uXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLm5leHRQYWdlVG9rZW4pIHtcbiAgICAgICAgICAgIGZldGNoRmVhdHVyZXNGb3JJbnRlcnZhbChyYW5nZSwgcmVzcG9uc2UubmV4dFBhZ2VUb2tlbiwgbnVtUmVxdWVzdHMgKyAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgby50cmlnZ2VyKCduZXR3b3JrZG9uZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGU6IGFueSkge1xuICAgICAgbm90aWZ5RmFpbHVyZSgnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXM6ICcgKyB0aGlzLnN0YXR1cyk7XG4gICAgfSk7XG5cbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtwcm9ncmVzcycsIHtudW1SZXF1ZXN0c30pO1xuICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGZlYXR1cmVTZXRJZDogc3BlYy5mZWF0dXJlU2V0SWQsXG4gICAgICBwYWdlVG9rZW46IHBhZ2VUb2tlbixcbiAgICAgIHBhZ2VTaXplOiBGRUFUVVJFU19QRVJfUkVRVUVTVCxcbiAgICAgIHJlZmVyZW5jZU5hbWU6IHJhbmdlLmNvbnRpZyxcbiAgICAgIHN0YXJ0OiByYW5nZS5zdGFydCgpLFxuICAgICAgZW5kOiByYW5nZS5zdG9wKClcbiAgICB9KSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBGZWF0dXJlW10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcbiAgICByZXR1cm4gXy5maWx0ZXIoZmVhdHVyZXMsIGZlYXR1cmUgPT4gZmVhdHVyZS5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQsXG4gICAgZ2V0RmVhdHVyZXNJblJhbmdlLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvbmNlOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6IChzdGF0dXM6IHN0cmluZywgcGFyYW06IGFueSkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTsgIC8vIE1ha2UgdGhpcyBhbiBldmVudCBlbWl0dGVyXG4gIHJldHVybiBvO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlXG59O1xuIiwiLyoqXG4gKiBBIGRhdGEgc291cmNlIHdoaWNoIGltcGxlbWVudHMgdGhlIEdBNEdIIFZhcmlhbnQgcHJvdG9jb2wuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcblxuaW1wb3J0IHR5cGUge1ZjZkRhdGFTb3VyY2V9IGZyb20gJy4vVmNmRGF0YVNvdXJjZSc7XG5pbXBvcnQge1ZhcmlhbnR9IGZyb20gJy4uL2RhdGEvdmFyaWFudCc7XG5cbnZhciBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IDEwMDtcbnZhciBWQVJJQU5UU19QRVJfUkVRVUVTVCA9IDQwMDtcbnZhciBaRVJPX0JBU0VEID0gZmFsc2U7XG5cbnR5cGUgR0E0R0hWYXJpYW50U3BlYyA9IHtcbiAgZW5kcG9pbnQ6IHN0cmluZztcbiAgdmFyaWFudFNldElkOiBzdHJpbmc7XG4gIGNhbGxTZXRJZHM6IHN0cmluZ1tdO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlKHNwZWM6IEdBNEdIVmFyaWFudFNwZWMpOiBWY2ZEYXRhU291cmNlIHtcbiAgdmFyIHVybCA9IHNwZWMuZW5kcG9pbnQgKyAnL3ZhcmlhbnRzL3NlYXJjaCc7XG5cbiAgdmFyIHZhcmlhbnRzOiB7W2tleTpzdHJpbmddOiBWYXJpYW50fSA9IHt9O1xuXG4gIC8vIFJhbmdlcyBmb3Igd2hpY2ggd2UgaGF2ZSBjb21wbGV0ZSBpbmZvcm1hdGlvbiAtLSBubyBuZWVkIHRvIGhpdCBuZXR3b3JrLlxuICB2YXIgY292ZXJlZFJhbmdlczogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPltdID0gW107XG5cbiAgZnVuY3Rpb24gYWRkVmFyaWFudHNGcm9tUmVzcG9uc2UocmVzcG9uc2U6IE9iamVjdCkge1xuICAgIGlmIChyZXNwb25zZS52YXJpYW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmVzcG9uc2UudmFyaWFudHMuZm9yRWFjaChnYTRnaFZhcmlhbnQgPT4ge1xuICAgICAgdmFyIGtleSA9IGdhNGdoVmFyaWFudC5pZDtcbiAgICAgIGlmIChrZXkgaW4gdmFyaWFudHMpIHJldHVybjtcblxuICAgICAgdmFyIHZhcmlhbnQgPSBWYXJpYW50LmZyb21HQTRHSChnYTRnaFZhcmlhbnQpO1xuICAgICAgdmFyaWFudHNba2V5XSA9IHZhcmlhbnQ7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByYW5nZUNoYW5nZWQobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKG5ld1JhbmdlLmNvbnRpZywgbmV3UmFuZ2Uuc3RhcnQsIG5ld1JhbmdlLnN0b3ApO1xuXG4gICAgaWYgKGludGVydmFsLmlzQ292ZXJlZEJ5KGNvdmVyZWRSYW5nZXMpKSByZXR1cm47XG5cbiAgICBpbnRlcnZhbCA9IGludGVydmFsLnJvdW5kKEJBU0VfUEFJUlNfUEVSX0ZFVENILCBaRVJPX0JBU0VEKTtcblxuICAgIC8vIHNlbGVjdCBvbmx5IGludGVydmFscyBub3QgeWV0IGxvYWRlZCBpbnRvIGNvdmVyZWRSYW5nZXPDn1xuICAgIHZhciBpbnRlcnZhbHMgPSBpbnRlcnZhbC5jb21wbGVtZW50SW50ZXJ2YWxzKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgLy8gV2UgXCJjb3ZlclwiIHRoZSBpbnRlcnZhbCBpbW1lZGlhdGVseSAoYmVmb3JlIHRoZSByZWFkcyBoYXZlIGFycml2ZWQpIHRvXG4gICAgLy8gcHJldmVudCBkdXBsaWNhdGUgbmV0d29yayByZXF1ZXN0cy5cbiAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgIGNvdmVyZWRSYW5nZXMgPSBDb250aWdJbnRlcnZhbC5jb2FsZXNjZShjb3ZlcmVkUmFuZ2VzKTtcblxuICAgIGludGVydmFscy5mb3JFYWNoKGkgPT4ge1xuICAgICAgZmV0Y2hWYXJpYW50c0ZvckludGVydmFsKGksIG51bGwsIDEgLyogZmlyc3QgcmVxdWVzdCAqLyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBub3RpZnlGYWlsdXJlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIG8udHJpZ2dlcignbmV0d29ya2ZhaWx1cmUnLCBtZXNzYWdlKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2hWYXJpYW50c0ZvckludGVydmFsKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlVG9rZW46ID9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bVJlcXVlc3RzOiBudW1iZXIpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwpO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKGU6IGFueSkge1xuICAgICAgdmFyIHJlc3BvbnNlID0gdGhpcy5yZXNwb25zZTtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgbm90aWZ5RmFpbHVyZSh0aGlzLnN0YXR1cyArICcgJyArIHRoaXMuc3RhdHVzVGV4dCArICcgJyArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlKSB7XG4gICAgICAgICAgbm90aWZ5RmFpbHVyZSgnRXJyb3IgZnJvbSBHQTRHSCBWYXJpYW50IGVuZHBvaW50OiAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGRWYXJpYW50c0Zyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpOyAgLy8gZGlzcGxheSBkYXRhIGFzIGl0IGNvbWVzIGluLlxuICAgICAgICAgIGlmIChyZXNwb25zZS5uZXh0UGFnZVRva2VuKSB7XG4gICAgICAgICAgICBmZXRjaFZhcmlhbnRzRm9ySW50ZXJ2YWwocmFuZ2UsIHJlc3BvbnNlLm5leHRQYWdlVG9rZW4sIG51bVJlcXVlc3RzICsgMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICAgIG5vdGlmeUZhaWx1cmUoJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzOiAnICsgdGhpcy5zdGF0dXMpO1xuICAgIH0pO1xuXG4gICAgby50cmlnZ2VyKCduZXR3b3JrcHJvZ3Jlc3MnLCB7bnVtUmVxdWVzdHN9KTtcbiAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICB2YXJpYW50U2V0SWQ6IHNwZWMudmFyaWFudFNldElkLFxuICAgICAgcGFnZVRva2VuOiBwYWdlVG9rZW4sXG4gICAgICBwYWdlU2l6ZTogVkFSSUFOVFNfUEVSX1JFUVVFU1QsXG4gICAgICByZWZlcmVuY2VOYW1lOiByYW5nZS5jb250aWcsXG4gICAgICBjYWxsU2V0SWRzOiBzcGVjLmNhbGxTZXRJZHMsXG4gICAgICBzdGFydDogcmFuZ2Uuc3RhcnQoKSxcbiAgICAgIGVuZDogcmFuZ2Uuc3RvcCgpXG4gICAgfSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmFyaWFudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG5cbiAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSk7XG5cbiAgICByZXR1cm4gXy5maWx0ZXIodmFyaWFudHMsIHZhcmlhbnQgPT4gaW50ZXJzZWN0cyh2YXJpYW50LCByYW5nZSkpO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkLFxuICAgIGdldEZlYXR1cmVzSW5SYW5nZSxcblxuICAgIC8vIFRoZXNlIGFyZSBoZXJlIHRvIG1ha2UgRmxvdyBoYXBweS5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb25jZTogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RhdHVzOiBzdHJpbmcsIHBhcmFtOiBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuICByZXR1cm4gbztcbn1cblxuZnVuY3Rpb24gaW50ZXJzZWN0cyh2YXJpYW50OiBWYXJpYW50LCByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW4ge1xuICB2YXIgdGhpc1JhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHZhcmlhbnQuY29udGlnLCB2YXJpYW50LnBvc2l0aW9uLCB2YXJpYW50LnBvc2l0aW9uICsgMSk7XG4gIHJldHVybiByYW5nZS5pbnRlcnNlY3RzKHRoaXNSYW5nZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGUsXG4gIGludGVyc2VjdHNcbn07XG4iLCIvKipcbiAqIFRoZSBcImdsdWVcIiBiZXR3ZWVuIFR3b0JpdC5qcyBhbmQgR2Vub21lVHJhY2suanMuXG4gKlxuICogR2Vub21lVHJhY2sgaXMgcHVyZSB2aWV3IGNvZGUgLS0gaXQgcmVuZGVycyBkYXRhIHdoaWNoIGlzIGFscmVhZHkgaW4tbWVtb3J5XG4gKiBpbiB0aGUgYnJvd3Nlci5cbiAqXG4gKiBUd29CaXQgaXMgcHVyZWx5IGZvciBkYXRhIHBhcnNpbmcgYW5kIGZldGNoaW5nLiBJdCBvbmx5IGtub3dzIGhvdyB0byByZXR1cm5cbiAqIHByb21pc2VzIGZvciB2YXJpb3VzIGdlbm9tZSBmZWF0dXJlcy5cbiAqXG4gKiBUaGlzIGNvZGUgYWN0cyBhcyBhIGJyaWRnZSBiZXR3ZWVuIHRoZSB0d28uIEl0IG1haW50YWlucyBhIGxvY2FsIHZlcnNpb24gb2ZcbiAqIHRoZSBkYXRhLCBmZXRjaGluZyByZW1vdGUgZGF0YSBhbmQgaW5mb3JtaW5nIHRoZSB2aWV3IHdoZW4gaXQgYmVjb21lc1xuICogYXZhaWxhYmxlLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5cbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBUd29CaXQgZnJvbSAnLi4vZGF0YS9Ud29CaXQnO1xuaW1wb3J0IFJlbW90ZUZpbGUgZnJvbSAnLi4vUmVtb3RlRmlsZSc7XG5pbXBvcnQgU2VxdWVuY2VTdG9yZSBmcm9tICcuLi9TZXF1ZW5jZVN0b3JlJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5cblxuLy8gUmVxdWVzdHMgZm9yIDJiaXQgcmFuZ2VzIGFyZSBleHBhbmRlZCB0byBiZWdpbiAmIGVuZCBhdCBtdWx0aXBsZXMgb2YgdGhpc1xuLy8gY29uc3RhbnQuIERvaW5nIHRoaXMgbWVhbnMgdGhhdCBwYW5uaW5nIHR5cGljYWxseSB3b24ndCByZXF1aXJlXG4vLyBhZGRpdGlvbmFsIG5ldHdvcmsgcmVxdWVzdHMuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDAwMDtcblxudmFyIE1BWF9CQVNFX1BBSVJTX1RPX0ZFVENIID0gMTAwMDAwO1xudmFyIFpFUk9fQkFTRUQgPSB0cnVlO1xuXG5cblxuLy8gRmxvdyB0eXBlIGZvciBleHBvcnQuXG5leHBvcnQgdHlwZSBUd29CaXRTb3VyY2UgPSB7XG4gIHJhbmdlQ2hhbmdlZDogKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkgPT4gdm9pZDtcbiAgZ2V0UmFuZ2U6IChyYW5nZTogR2Vub21lUmFuZ2UpID0+IHtba2V5OnN0cmluZ106ID9zdHJpbmd9O1xuICBnZXRSYW5nZUFzU3RyaW5nOiAocmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiBzdHJpbmc7XG4gIGNvbnRpZ0xpc3Q6ICgpID0+IHN0cmluZ1tdO1xuICBub3JtYWxpemVSYW5nZTogKHJhbmdlOiBHZW5vbWVSYW5nZSkgPT4gUS5Qcm9taXNlPEdlbm9tZVJhbmdlPjtcbiAgb246IChldmVudDogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgb25jZTogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nKSA9PiB2b2lkO1xuICB0cmlnZ2VyOiAoZXZlbnQ6IHN0cmluZywgLi4uYXJnczphbnkpID0+IHZvaWQ7XG59XG5cblxudmFyIGNyZWF0ZUZyb21Ud29CaXRGaWxlID0gZnVuY3Rpb24ocmVtb3RlU291cmNlOiBUd29CaXQpOiBUd29CaXRTb3VyY2Uge1xuICAvLyBMb2NhbCBjYWNoZSBvZiBnZW5vbWljIGRhdGEuXG4gIHZhciBjb250aWdMaXN0ID0gW107XG4gIHZhciBzdG9yZSA9IG5ldyBTZXF1ZW5jZVN0b3JlKCk7XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzID0gKFtdOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10pO1xuXG4gIGZ1bmN0aW9uIGZldGNoKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgdmFyIHNwYW4gPSByYW5nZS5sZW5ndGgoKTtcbiAgICBpZiAoc3BhbiA+IE1BWF9CQVNFX1BBSVJTX1RPX0ZFVENIKSB7XG4gICAgICAvL2luZm9ybSB0aGF0IHdlIHdvbid0IGZldGNoIHRoZSBkYXRhXG4gICAgICBvLnRyaWdnZXIoJ25ld2RhdGFyZWZ1c2VkJywgcmFuZ2UpO1xuICAgICAgcmV0dXJuIFEud2hlbigpOyAgLy8gZW1wdHkgcHJvbWlzZVxuICAgIH1cbiAgICAvL25vdyB3ZSBjYW4gYWRkIHJlZ2lvbiB0byBjb3ZlcmVkIHJlZ2lvbnNcbiAgICAvL2RvaW5nIGl0IGVhcmxpZXIgd291bGQgcHJvdmlkZSBpbmNvbnNpc3RlbmN5XG4gICAgY292ZXJlZFJhbmdlcy5wdXNoKHJhbmdlKTtcbiAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG5cbiAgICByZW1vdGVTb3VyY2UuZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQoKSwgcmFuZ2Uuc3RvcCgpKVxuICAgICAgLnRoZW4obGV0dGVycyA9PiB7XG4gICAgICAgIGlmICghbGV0dGVycykgcmV0dXJuO1xuICAgICAgICBpZiAobGV0dGVycy5sZW5ndGggPCByYW5nZS5sZW5ndGgoKSkge1xuICAgICAgICAgIC8vIFByb2JhYmx5IGF0IEVPRlxuICAgICAgICAgIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5zdGFydCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLnN0YXJ0KCkgKyBsZXR0ZXJzLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHN0b3JlLnNldFJhbmdlKHJhbmdlLCBsZXR0ZXJzKTtcbiAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCByYW5nZSk7XG4gICAgICB9KS5kb25lKCk7XG4gIH1cblxuICAvLyBUaGlzIGVpdGhlciBhZGRzIG9yIHJlbW92ZXMgYSAnY2hyJyBhcyBuZWVkZWQuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVJhbmdlU3luYyhyYW5nZTogR2Vub21lUmFuZ2UpOiBHZW5vbWVSYW5nZSB7XG4gICAgaWYgKGNvbnRpZ0xpc3QuaW5kZXhPZihyYW5nZS5jb250aWcpID49IDApIHtcbiAgICAgIHJldHVybiByYW5nZTtcbiAgICB9XG4gICAgdmFyIGFsdENvbnRpZyA9IHV0aWxzLmFsdENvbnRpZ05hbWUocmFuZ2UuY29udGlnKTtcbiAgICBpZiAoY29udGlnTGlzdC5pbmRleE9mKGFsdENvbnRpZykgPj0gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29udGlnOiBhbHRDb250aWcsXG4gICAgICAgIHN0YXJ0OiByYW5nZS5zdGFydCxcbiAgICAgICAgc3RvcDogcmFuZ2Uuc3RvcFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlOyAgLy8gbGV0IGl0IGZhaWwgd2l0aCB0aGUgb3JpZ2luYWwgY29udGlnXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVSYW5nZShyYW5nZTogR2Vub21lUmFuZ2UpOiBRLlByb21pc2U8R2Vub21lUmFuZ2U+IHtcbiAgICByZXR1cm4gY29udGlnUHJvbWlzZS50aGVuKCgpID0+IG5vcm1hbGl6ZVJhbmdlU3luYyhyYW5nZSkpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHtcImNocjEyOjEyM1wiIC0+IFwiW0FUQ0ddXCJ9IG1hcHBpbmcgZm9yIHRoZSByYW5nZS5cbiAgZnVuY3Rpb24gZ2V0UmFuZ2UocmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgcmV0dXJuIHN0b3JlLmdldEFzT2JqZWN0cyhDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UocmFuZ2UpKTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBzdHJpbmcgb2YgYmFzZSBwYWlycyBmb3IgdGhpcyByYW5nZS5cbiAgZnVuY3Rpb24gZ2V0UmFuZ2VBc1N0cmluZyhyYW5nZTogR2Vub21lUmFuZ2UpOiBzdHJpbmcge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiAnJztcbiAgICByZXR1cm4gc3RvcmUuZ2V0QXNTdHJpbmcoQ29udGlnSW50ZXJ2YWwuZnJvbUdlbm9tZVJhbmdlKHJhbmdlKSk7XG4gIH1cblxuICAvLyBGZXRjaCB0aGUgY29udGlnIGxpc3QgaW1tZWRpYXRlbHkuXG4gIHZhciBjb250aWdQcm9taXNlID0gcmVtb3RlU291cmNlLmdldENvbnRpZ0xpc3QoKS50aGVuKGMgPT4ge1xuICAgIGNvbnRpZ0xpc3QgPSBjO1xuICAgIG8udHJpZ2dlcignY29udGlncycsIGNvbnRpZ0xpc3QpO1xuICAgIHJldHVybiBjO1xuICB9KTtcbiAgY29udGlnUHJvbWlzZS5kb25lKCk7XG5cbiAgdmFyIG8gPSB7XG4gICAgLy8gVGhlIHJhbmdlIGhlcmUgaXMgMC1iYXNlZCwgaW5jbHVzaXZlXG4gICAgcmFuZ2VDaGFuZ2VkOiBmdW5jdGlvbihuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAgIG5vcm1hbGl6ZVJhbmdlKG5ld1JhbmdlKS50aGVuKHIgPT4ge1xuICAgICAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoci5jb250aWcsIHIuc3RhcnQsIHIuc3RvcCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpbnRlcnZhbCBpcyBhbHJlYWR5IGluIHRoZSBjYWNoZS5cbiAgICAgICAgaWYgKHJhbmdlLmlzQ292ZXJlZEJ5KGNvdmVyZWRSYW5nZXMpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmFuZ2UgPSByYW5nZS5yb3VuZChCQVNFX1BBSVJTX1BFUl9GRVRDSCwgWkVST19CQVNFRCk7XG4gICAgICAgIHZhciBuZXdSYW5nZXMgPSByYW5nZS5jb21wbGVtZW50SW50ZXJ2YWxzKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgICAgIGZvciAodmFyIG5ld1JhbmdlIG9mIG5ld1Jhbmdlcykge1xuICAgICAgICAgIGZldGNoKG5ld1JhbmdlKTtcbiAgICAgICAgfVxuICAgICAgfSkuZG9uZSgpO1xuICAgIH0sXG4gICAgLy8gVGhlIHJhbmdlcyBwYXNzZWQgdG8gdGhlc2UgbWV0aG9kcyBhcmUgMC1iYXNlZFxuICAgIGdldFJhbmdlLFxuICAgIGdldFJhbmdlQXNTdHJpbmcsXG4gICAgY29udGlnTGlzdDogKCkgPT4gY29udGlnTGlzdCxcbiAgICBub3JtYWxpemVSYW5nZSxcblxuICAgIC8vIFRoZXNlIGFyZSBoZXJlIHRvIG1ha2UgRmxvdyBoYXBweS5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb25jZTogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RhdHVzOiBzdHJpbmcsIHBhcmFtOiBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlKGRhdGE6IHt1cmw6c3RyaW5nfSk6IFR3b0JpdFNvdXJjZSB7XG4gIHZhciB1cmwgPSBkYXRhLnVybDtcbiAgaWYgKCF1cmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgVVJMIGZyb20gdHJhY2s6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG4gIH1cblxuICByZXR1cm4gY3JlYXRlRnJvbVR3b0JpdEZpbGUobmV3IFR3b0JpdChuZXcgUmVtb3RlRmlsZSh1cmwpKSk7XG59XG5cbi8vIEdldHRlci9zZXR0ZXIgZm9yIGJhc2UgcGFpcnMgcGVyIGZldGNoLlxuLy8gVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGZvciB0ZXN0aW5nLlxuZnVuY3Rpb24gdGVzdEJhc2VQYWlyc1RvRmV0Y2gobnVtPzogbnVtYmVyKTogYW55IHtcbiAgaWYgKG51bSkge1xuICAgIEJBU0VfUEFJUlNfUEVSX0ZFVENIID0gbnVtO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBCQVNFX1BBSVJTX1BFUl9GRVRDSDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tVHdvQml0RmlsZSxcbiAgdGVzdEJhc2VQYWlyc1RvRmV0Y2hcbn07XG4iLCIvKipcbiAqIENhY2hpbmcgJiBwcmVmZXRjaGluZyBmb3IgVkNGIHNvdXJjZXMuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5cbmltcG9ydCBFdmVudHMgZnJvbSAnYmFja2JvbmUnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBSZW1vdGVGaWxlIGZyb20gJy4uL1JlbW90ZUZpbGUnO1xuaW1wb3J0IExvY2FsU3RyaW5nRmlsZSBmcm9tICcuLi9Mb2NhbFN0cmluZ0ZpbGUnO1xuLy8gcmVxdWlyZW1lbnQgZm9yIGpzaGludCB0byBwYXNzXG4vKiBleHBvcnRlZCBWYXJpYW50ICovXG5pbXBvcnQge1ZhcmlhbnR9IGZyb20gJy4uL2RhdGEvdmFyaWFudCc7XG5pbXBvcnQge1ZjZkZpbGV9IGZyb20gJy4uL2RhdGEvdmNmJztcblxuZXhwb3J0IHR5cGUgVmNmRGF0YVNvdXJjZSA9IHtcbiAgcmFuZ2VDaGFuZ2VkOiAobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiB2b2lkO1xuICBnZXRGZWF0dXJlc0luUmFuZ2U6IChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikgPT4gVmFyaWFudFtdO1xuICBvbjogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nKSA9PiB2b2lkO1xuICB0cmlnZ2VyOiAoZXZlbnQ6IHN0cmluZywgLi4uYXJnczphbnkpID0+IHZvaWQ7XG59O1xuXG5cbnZhciBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IDEwMDtcbnZhciBaRVJPX0JBU0VEID0gZmFsc2U7XG5cbmZ1bmN0aW9uIHZhcmlhbnRLZXkodjogVmFyaWFudCk6IHN0cmluZyB7XG4gIHJldHVybiBgJHt2LmNvbnRpZ306JHt2LnBvc2l0aW9ufWA7XG59XG5cblxuZnVuY3Rpb24gY3JlYXRlRnJvbVZjZkZpbGUocmVtb3RlU291cmNlOiBWY2ZGaWxlKTogVmNmRGF0YVNvdXJjZSB7XG4gIHZhciB2YXJpYW50czoge1trZXk6IHN0cmluZ106IFZhcmlhbnR9ID0ge307XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10gPSBbXTtcblxuICBmdW5jdGlvbiBhZGRWYXJpYW50KHY6IFZhcmlhbnQpIHtcbiAgICB2YXIga2V5ID0gdmFyaWFudEtleSh2KTtcbiAgICBpZiAoIXZhcmlhbnRzW2tleV0pIHtcbiAgICAgIHZhcmlhbnRzW2tleV0gPSB2O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZldGNoKHJhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgIHZhciBpbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0LCByYW5nZS5zdG9wKTtcblxuICAgIC8vIENoZWNrIGlmIHRoaXMgaW50ZXJ2YWwgaXMgYWxyZWFkeSBpbiB0aGUgY2FjaGUuXG4gICAgaWYgKGludGVydmFsLmlzQ292ZXJlZEJ5KGNvdmVyZWRSYW5nZXMpKSB7XG4gICAgICByZXR1cm4gUS53aGVuKCk7XG4gICAgfVxuXG4gICAgaW50ZXJ2YWwgPSBpbnRlcnZhbC5yb3VuZChCQVNFX1BBSVJTX1BFUl9GRVRDSCwgWkVST19CQVNFRCk7XG5cbiAgICAvLyBcIkNvdmVyXCIgdGhlIHJhbmdlIGltbWVkaWF0ZWx5IHRvIHByZXZlbnQgZHVwbGljYXRlIGZldGNoZXMuXG4gICAgY292ZXJlZFJhbmdlcy5wdXNoKGludGVydmFsKTtcbiAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG4gICAgcmV0dXJuIHJlbW90ZVNvdXJjZS5nZXRGZWF0dXJlc0luUmFuZ2UoaW50ZXJ2YWwpLnRoZW4odmFyaWFudHMgPT4ge1xuICAgICAgdmFyaWFudHMuZm9yRWFjaCh2YXJpYW50ID0+IGFkZFZhcmlhbnQodmFyaWFudCkpO1xuICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgaW50ZXJ2YWwpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmFyaWFudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107ICAvLyBYWFggd2h5IHdvdWxkIHRoaXMgaGFwcGVuP1xuICAgIHJldHVybiBfLmZpbHRlcih2YXJpYW50cywgdiA9PiByYW5nZS5jb250YWluc0xvY3VzKHYuY29udGlnLCB2LnBvc2l0aW9uKSk7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQ6IGZ1bmN0aW9uKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgICAgZmV0Y2gobmV3UmFuZ2UpLmRvbmUoKTtcbiAgICB9LFxuICAgIGdldEZlYXR1cmVzSW5SYW5nZSxcblxuICAgIC8vIFRoZXNlIGFyZSBoZXJlIHRvIG1ha2UgRmxvdyBoYXBweS5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RhdHVzOiBzdHJpbmcsIHBhcmFtOiBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBjcmVhdGUoZGF0YToge3VybD86IHN0cmluZywgY29udGVudD86IHN0cmluZ30pOiBWY2ZEYXRhU291cmNlIHtcbiAgdmFyIHt1cmwsIGNvbnRlbnR9ID0gZGF0YTtcbiAgaWYgKHVybCkge1xuICAgIHJldHVybiBjcmVhdGVGcm9tVmNmRmlsZShuZXcgVmNmRmlsZShuZXcgUmVtb3RlRmlsZSh1cmwpKSk7XG4gIH0gZWxzZSBpZiAoY29udGVudCkge1xuICAgIHJldHVybiBjcmVhdGVGcm9tVmNmRmlsZShuZXcgVmNmRmlsZShuZXcgTG9jYWxTdHJpbmdGaWxlKGNvbnRlbnQpKSk7XG4gIH1cbiAgLy8gSWYgbm8gVVJMIG9yIGNvbnRlbnQgaXMgcGFzc2VkLCBmYWlsXG4gIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBVUkwgb3IgY29udGVudCBmcm9tIHRyYWNrOiAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tVmNmRmlsZVxufTtcbiIsIi8qKlxuICogQ2VudHJhbCBjb2xsZWN0aW9uIG9mIHN0eWxpbmcgc2V0dGluZ3MuXG4gKiBVbnRpbCB3ZSBmaWd1cmUgb3V0IGEgYmV0dGVyIHN0b3J5IGFyb3VuZCBjYW52YXMgJiBDU1MsIHRoZXkgbGl2ZSBoZXJlLlxuICpcbiAqIEBmbG93XG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvLyBDb2xvcnMgZm9yIGluZGl2aWR1YWwgYmFzZSBwYWlyc1xuICBCQVNFX0NPTE9SUzoge1xuICAgICdBJzogJyMxODg3MTInLFxuICAgICdHJzogJyNDNDVDMTYnLFxuICAgICdDJzogJyMwNjAwRjknLFxuICAgICdUJzogJyNGNzAwMTYnLFxuICAgICdVJzogJyNGNzAwMTYnLFxuICAgICdOJzogJ2JsYWNrJ1xuICB9LFxuXG4gIC8vIFN0eWxlcyBmb3IgYmFzZSBwYWlycyB3aGljaCBhcmUgcmVuZGVyZWQgYXMgbGV0dGVyc1xuICBMT09TRV9URVhUX1NUWUxFOiBgMjRweCAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYCxcbiAgVElHSFRfVEVYVF9TVFlMRTogYGJvbGQgMTJweCAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYCxcblxuICAvLyBHZW5lIHRyYWNrXG4gIEdFTkVfQVJST1dfU0laRTogNCxcbiAgR0VORV9DT0xPUjogJ2JsdWUnLCAgLy8gY29sb3Igb2YgdGhlIGdlbmUgbGluZSwgZXhvbnMsIHRleHQsIGV0Yy5cbiAgR0VORV9DT01QTEVNRU5UX0NPTE9SOiAnd2hpdGUnLCAgLy8gYSBjb2xvciB2aXNpYmxlIG9uIHRvcCBvZiBHRU5FX0NPTE9SXG4gIEdFTkVfRk9OVDogYCdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWZgLFxuICBHRU5FX0ZPTlRfU0laRTogMTYsXG4gIEdFTkVfVEVYVF9QQURESU5HOiA1LCAgLy8gc3BhY2UgYmV0d2VlbiBib3R0b20gb2YgY29kaW5nIGV4b24gJiB0b3Agb2YgZ2VuZSBuYW1lXG5cbiAgLy8gUGlsZXVwIHRyYWNrXG4gIEFMSUdOTUVOVF9DT0xPUjogJyNjOGM4YzgnLFxuICBBTElHTk1FTlRfTUlOVVNfU1RSQU5EX0NPTE9SOiAncmdiKDE3NiwgMTc2LCAyMzYpJyxcbiAgQUxJR05NRU5UX1BMVVNfU1RSQU5EX0NPTE9SOiAncmdiKDIzNiwgMTc2LCAxNzYpJyxcbiAgREVMRVRFX0NPTE9SOiAnYmxhY2snLFxuICBJTlNFUlRfQ09MT1I6ICdyZ2IoOTcsIDAsIDIxNiknLFxuICBSRUFEX1NQQUNJTkc6IDIsIC8vIHZlcnRpY2FsIHNwYWNpbmcgYmV0d2VlbiByZWFkc1xuICBSRUFEX0hFSUdIVDogMTMsIC8vIEhlaWdodCBvZiByZWFkXG5cblxuICAvLyBDb3ZlcmFnZSB0cmFja1xuICBDT1ZFUkFHRV9GT05UX1NUWUxFOiBgYm9sZCA5cHggJ0hlbHZldGljYSBOZXVlJywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZmAsXG4gIENPVkVSQUdFX0ZPTlRfQ09MT1I6ICdibGFjaycsXG4gIENPVkVSQUdFX1RJQ0tfTEVOR1RIOiA1LFxuICBDT1ZFUkFHRV9URVhUX1BBRERJTkc6IDMsICAvLyBzcGFjZSBiZXR3ZWVuIGF4aXMgdGlja3MgYW5kIHRleHRcbiAgQ09WRVJBR0VfVEVYVF9ZX09GRlNFVDogMywgIC8vIHNvIHRoYXQgdGlja3MgYW5kIHRleHRzIGFsaWduIGJldHRlclxuICBDT1ZFUkFHRV9CSU5fQ09MT1I6ICcjYTBhMGEwJyxcbiAgQ09WRVJBR0VfTUlOX0JBUl9XSURUSF9GT1JfR0FQOiA4LCAgLy8gc2hvdyBhIDFweCBnYXAgYmV0d2VlbiBiYXJzIGF0IHRoaXMgcmVzb2x1dGlvblxuXG4gIC8vIFNjYWxlIFRyYWNrXG4gIFNDQUxFX0xJTkVfUEFERElORzogNDAsICAvLyBzcGFjZSBiZXR3ZWVuIG1pZCBwb2ludCBhbmQgbGVmdC9yaWdodCBsaW5lc1xuICBTQ0FMRV9GT05UX1NUWUxFOiBgYm9sZCAxMnB4ICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWZgLFxuICBTQ0FMRV9URVhUX1lfT0ZGU0VUOiA1LCAgLy8gc28gdGhhdCBsaW5lcyBhbmQgdGhlIHRleHQgYWxpZ24gYmV0dGVyXG4gIFNDQUxFX0ZPTlRfQ09MT1I6ICdibGFjaycsXG4gIFNDQUxFX0FSUk9XX1NJWkU6IDQsXG5cbiAgLy8gTG9jYXRpb24gdHJhY2tcbiAgTE9DX1RFWFRfUEFERElORzogNSwgIC8vIHNwYWNlIGJldHdlZW4gbWlkLXBvaW50IGxhYmVsIGFuZCB0aWNrXG4gIExPQ19USUNLX0xFTkdUSDogMTAsXG4gIExPQ19URVhUX1lfT0ZGU0VUOiA1LCAgLy8gc28gdGhhdCB0aGUgbGluZSBhbmQgdGhlIHRleHQgYWxpZ24gYmV0dGVyXG4gIExPQ19GT05UX1NUWUxFOiBgMTNweCAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYCxcbiAgTE9DX0ZPTlRfQ09MT1I6ICdibGFjaycsXG5cbiAgLy8gVmFyaWFudCBUcmFja1xuICBWQVJJQU5UX1NUUk9LRTogJ2JsdWUnLFxuICBWQVJJQU5UX0ZJTEw6ICcjZGRkJyxcbiAgVkFSSUFOVF9IRUlHSFQ6IDE0LFxuXG59O1xuIiwiLyoqXG4gKiBDb21tb24gdHlwZXMgdXNlZCBpbiBtYW55IG1vZHVsZXMuXG4gKlxuICogRmxvdyBtYWtlcyBpdCBkaWZmaWN1bHQgZm9yIGEgbW9kdWxlIHRvIGV4cG9ydCBib3RoIHN5bWJvbHMgYW5kIHR5cGVzLiBUaGlzXG4gKiBtb2R1bGUgc2VydmVzIGFzIGEgZHVtcGluZyBncm91bmQgZm9yIHR5cGVzIHdoaWNoIHdlJ2QgcmVhbGx5IGxpa2UgdG8gZXhwb3J0XG4gKiBmcm9tIG90aGVyIG1vZHVsZXMuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyBQdWJsaWMgQVBJXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCBjb25zdCBBbGxlbEZyZXF1ZW5jeVN0cmF0ZWd5ID0ge1xuICBNaW5vciA6IHtuYW1lOiBcIk1pbm9yXCJ9LFxuICBNYWpvciA6IHtuYW1lOiBcIk1ham9yXCJ9LFxufTtcblxuXG5leHBvcnQgdHlwZSBOZXR3b3JrU3RhdHVzID0ge251bVJlcXVlc3RzPzogbnVtYmVyLCBzdGF0dXM/OiBzdHJpbmd9O1xuXG5leHBvcnQgdHlwZSBTdGF0ZSA9IHtcbiAgbmV0d29ya1N0YXR1czogP05ldHdvcmtTdGF0dXM7XG59O1xuXG5leHBvcnQgdHlwZSBWaXpXaXRoT3B0aW9ucyA9IHtcbiAgY29tcG9uZW50OiBDbGFzczxSZWFjdC5Db21wb25lbnQ8YW55LCBhbnk+PjtcbiAgb3B0aW9uczogP09iamVjdDtcbn1cblxuZXhwb3J0IHR5cGUgVHJhY2sgPSB7XG4gIHZpejogVml6V2l0aE9wdGlvbnM7XG4gIGRhdGE6IE9iamVjdDsgIC8vIFRoaXMgaXMgYSBEYXRhU291cmNlIG9iamVjdFxuICBuYW1lPzogc3RyaW5nO1xuICBjc3NDbGFzcz86IHN0cmluZztcbiAgaXNSZWZlcmVuY2U/OiBib29sZWFuO1xuICBvcHRpb25zPzogT2JqZWN0XG59XG5cbmV4cG9ydCB0eXBlIFZpc3VhbGl6ZWRUcmFjayA9IHtcbiAgdmlzdWFsaXphdGlvbjogVml6V2l0aE9wdGlvbnM7XG4gIHNvdXJjZTogT2JqZWN0OyAgLy8gZGF0YSBzb3VyY2VcbiAgdHJhY2s6IFRyYWNrOyAgLy8gZm9yIGNzcyBjbGFzcyBhbmQgb3B0aW9uc1xufVxuXG5leHBvcnQgdHlwZSBHZW5vbWVSYW5nZSA9IHtcbiAgY29udGlnOiBzdHJpbmc7XG4gIHN0YXJ0OiBudW1iZXI7ICAvLyBpbmNsdXNpdmVcbiAgc3RvcDogbnVtYmVyOyAgLy8gaW5jbHVzaXZlXG59XG5cbmV4cG9ydCB0eXBlIFBhcnRpYWxHZW5vbWVSYW5nZSA9IHtcbiAgY29udGlnPzogc3RyaW5nO1xuICBzdGFydD86IG51bWJlcjtcbiAgc3RvcD86IG51bWJlcjtcbn1cblxuLy8gQkFNL0JBSSBwYXJzaW5nXG5cbmltcG9ydCB0eXBlIFZpcnR1YWxPZmZzZXQgZnJvbSAnLi9kYXRhL1ZpcnR1YWxPZmZzZXQnO1xuXG5leHBvcnQgdHlwZSBDaHVuayA9IHtcbiAgY2h1bmtfYmVnOiBWaXJ0dWFsT2Zmc2V0O1xuICBjaHVua19lbmQ6IFZpcnR1YWxPZmZzZXQ7XG59XG5cbi8vIHNyYy91dGlscy5qc1xuZXhwb3J0IHR5cGUgSW5mbGF0ZWRCbG9jayA9IHtcbiAgb2Zmc2V0OiBudW1iZXI7XG4gIGNvbXByZXNzZWRMZW5ndGg6IG51bWJlcjtcbiAgYnVmZmVyOiBBcnJheUJ1ZmZlcjtcbn1cbiIsIi8qKlxuICogR3JhYi1iYWcgb2YgdXRpbGl0eSBmdW5jdGlvbnMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtJbmZsYXRlZEJsb2NrLCBQYXJ0aWFsR2Vub21lUmFuZ2V9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHR5cGUgUSBmcm9tICdxJztcblxuaW1wb3J0IHBha28gZnJvbSAncGFrby9saWIvaW5mbGF0ZSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuaW1wb3J0IEludGVydmFsIGZyb20gJy4vSW50ZXJ2YWwnO1xuXG4vLyBDb21wYXJlIHR3byB0dXBsZXMgb2YgZXF1YWwgbGVuZ3RoLiBJcyB0MSA8PSB0Mj9cbi8vIFRPRE86IG1ha2UgdGhpcyB0dXBsZUxlc3NPckVxdWFsPFQ+IC0tIGl0IHdvcmtzIHdpdGggc3RyaW5ncyBvciBib29sZWFucywgdG9vLlxuZnVuY3Rpb24gdHVwbGVMZXNzT3JFcXVhbCh0MTogQXJyYXk8bnVtYmVyPiwgdDI6IEFycmF5PG51bWJlcj4pOiBib29sZWFuIHtcbiAgaWYgKHQxLmxlbmd0aCAhPSB0Mi5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignQ29tcGFyaW5nIG5vbi1lcXVhbCBsZW5ndGggdHVwbGVzJyk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdDEubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodDFbaV0gPiB0MltpXSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAodDFbaV0gPCB0MltpXSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBEbyB0d28gcmFuZ2VzIG9mIHR1cGxlcyBvdmVybGFwP1xuLy8gVE9ETzogbWFrZSB0aGlzIHR1cGxlUmFuZ2VPdmVybGFwczxUPiAtLSBpdCB3b3JrcyB3aXRoIHN0cmluZ3Mgb3IgYm9vbGVhbnMsIHRvby5cbmZ1bmN0aW9uIHR1cGxlUmFuZ2VPdmVybGFwcyh0dXBsZVJhbmdlMTogQXJyYXk8QXJyYXk8bnVtYmVyPj4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGVSYW5nZTI6IEFycmF5PEFycmF5PG51bWJlcj4+KTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgIC8vIEFyZSB0aGUgcmFuZ2VzIG92ZXJsYXBwaW5nP1xuICAgICB0dXBsZUxlc3NPckVxdWFsKHR1cGxlUmFuZ2UxWzBdLCB0dXBsZVJhbmdlMlsxXSkgJiZcbiAgICAgdHVwbGVMZXNzT3JFcXVhbCh0dXBsZVJhbmdlMlswXSwgdHVwbGVSYW5nZTFbMV0pICYmXG4gICAgIC8vIC4uLiBhbmQgbm9uLWVtcHR5P1xuICAgICB0dXBsZUxlc3NPckVxdWFsKHR1cGxlUmFuZ2UxWzBdLCB0dXBsZVJhbmdlMVsxXSkgJiZcbiAgICAgdHVwbGVMZXNzT3JFcXVhbCh0dXBsZVJhbmdlMlswXSwgdHVwbGVSYW5nZTJbMV0pKTtcbn1cblxuLy8gUmV0dXJuIGEgbmV3IEFycmF5QnVmZmVyIGJ5IGNvbmNhdGVuYXRpbmcgYW4gYXJyYXkgb2YgQXJyYXlCdWZmZXJzLlxuZnVuY3Rpb24gY29uY2F0QXJyYXlCdWZmZXJzKGJ1ZmZlcnM6IEFycmF5QnVmZmVyW10pOiBBcnJheUJ1ZmZlciB7XG4gIHZhciB0b3RhbEJ5dGVzID0gYnVmZmVycy5tYXAoYiA9PiBiLmJ5dGVMZW5ndGgpLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xuICB2YXIgb3V0cHV0ID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7XG4gIHZhciBwb3NpdGlvbiA9IDA7XG4gIGJ1ZmZlcnMuZm9yRWFjaChidWYgPT4ge1xuICAgIG91dHB1dC5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmKSwgcG9zaXRpb24pO1xuICAgIHBvc2l0aW9uICs9IGJ1Zi5ieXRlTGVuZ3RoO1xuICB9KTtcbiAgcmV0dXJuIG91dHB1dC5idWZmZXI7XG59XG5cbnR5cGUgSW5mbGF0ZUNhY2hlS2V5ID0ge1xuICBmaWxlbmFtZTogc3RyaW5nO1xuICBpbml0aWFsT2Zmc2V0OiBudW1iZXI7XG59XG5cbnR5cGUgUGFrb1Jlc3VsdCA9IHtcbiAgZXJyOiBudW1iZXI7XG4gIG1zZzogc3RyaW5nO1xuICBidWZmZXI6ID9BcnJheUJ1ZmZlcjtcbiAgdG90YWxfaW46IG51bWJlcjtcbn1cbnZhciBpbmZsYXRpb25DYWNoZToge1trZXk6IHN0cmluZ106IFBha29SZXN1bHR9ID0ge307XG5cbi8vIGV4dHJhY3RlZCBmb3IgY2FjaGluZ1xuZnVuY3Rpb24gX2luZmxhdGVPbmUoYnVmZmVyLCBwb3NpdGlvbik6IFBha29SZXN1bHQge1xuICB2YXIgaW5mbGF0b3IgPSBuZXcgcGFrby5JbmZsYXRlKCk7XG4gIGluZmxhdG9yLnB1c2goYnVmZmVyLnNsaWNlKHBvc2l0aW9uKSk7XG4gIHJldHVybiB7XG4gICAgZXJyOiBpbmZsYXRvci5lcnIsXG4gICAgbXNnOiBpbmZsYXRvci5tc2csXG4gICAgYnVmZmVyOiBpbmZsYXRvci5yZXN1bHQgPyBpbmZsYXRvci5yZXN1bHQuYnVmZmVyIDogbnVsbCxcbiAgICB0b3RhbF9pbjogaW5mbGF0b3Iuc3RybS50b3RhbF9pblxuICB9O1xufVxuXG5mdW5jdGlvbiBjYWNoZWRJbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24sIGNhY2hlPzogSW5mbGF0ZUNhY2hlS2V5KSB7XG4gIGlmICghY2FjaGUpIHtcbiAgICByZXR1cm4gX2luZmxhdGVPbmUoYnVmZmVyLCBwb3NpdGlvbik7XG4gIH1cbiAgdmFyIGNhY2hlS2V5ID0gY2FjaGUuZmlsZW5hbWUgKyAnOicgKyAoY2FjaGUuaW5pdGlhbE9mZnNldCArIHBvc2l0aW9uKTtcbiAgdmFyIHYgPSBpbmZsYXRpb25DYWNoZVtjYWNoZUtleV07XG4gIGlmICh2ICYmIChwb3NpdGlvbiArIHYudG90YWxfaW4gPiBidWZmZXIuYnl0ZUxlbmd0aCkpIHtcbiAgICAvLyBJdCBzaG91bGQgZmFpbC5cbiAgICByZXR1cm4gX2luZmxhdGVPbmUoYnVmZmVyLCBwb3NpdGlvbik7XG4gIH1cblxuICBpZiAoIXYpIHtcbiAgICB2ID0gX2luZmxhdGVPbmUoYnVmZmVyLCBwb3NpdGlvbik7XG4gIH1cbiAgaWYgKCF2LmVyciAmJiB2LmJ1ZmZlcikge1xuICAgIGluZmxhdGlvbkNhY2hlW2NhY2hlS2V5XSA9IHY7XG4gIH1cbiAgcmV0dXJuIHY7XG59XG5cbi8qKlxuICogQkFNIGZpbGVzIGFyZSB3cml0dGVuIGluIFwiQkdaRlwiIGZvcm1hdCwgd2hpY2ggY29uc2lzdHMgb2YgbWFueSBjb25jYXRlbmF0ZWRcbiAqIGd6aXAgYmxvY2tzLiBndW56aXAgY29uY2F0ZW5hdGVzIGFsbCB0aGUgaW5mbGF0ZWQgYmxvY2tzLCBidXQgcGFrbyBvbmx5XG4gKiBpbmZsYXRlcyBvbmUgYmxvY2sgYXQgYSB0aW1lLiBUaGlzIHdyYXBwZXIgbWFrZXMgcGFrbyBiZWhhdmUgbGlrZSBndW56aXAuXG4gKiBJZiBzcGVjaWZpZWQsIGxhc3RCbG9ja1N0YXJ0IHdpbGwgc3RvcCBpbmZsYXRpb24gYmVmb3JlIGFsbCB0aGUgYmxvY2tzXG4gKiBoYXZlIGJlZW4gcHJvY2Vzc2VkLlxuICovXG5mdW5jdGlvbiBpbmZsYXRlQ29uY2F0ZW5hdGVkR3ppcChidWZmZXI6IEFycmF5QnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEJsb2NrU3RhcnQ/OiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZT86IEluZmxhdGVDYWNoZUtleSk6IEluZmxhdGVkQmxvY2tbXSB7XG4gIHZhciBwb3NpdGlvbiA9IDAsXG4gICAgICBibG9ja3MgPSBbXTtcbiAgaWYgKGxhc3RCbG9ja1N0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBsYXN0QmxvY2tTdGFydCA9IGJ1ZmZlci5ieXRlTGVuZ3RoO1xuICB9XG4gIGRvIHtcbiAgICB2YXIgcmVzdWx0ID0gY2FjaGVkSW5mbGF0ZU9uZShidWZmZXIsIHBvc2l0aW9uLCBjYWNoZSk7XG5cbiAgICBpZiAocmVzdWx0LmVycikge1xuICAgICAgdGhyb3cgJ0d6aXAgZXJyb3I6ICcgKyByZXN1bHQubXNnO1xuICAgIH1cbiAgICBpZiAocmVzdWx0LmJ1ZmZlcikge1xuICAgICAgYmxvY2tzLnB1c2goe1xuICAgICAgICBvZmZzZXQ6IHBvc2l0aW9uLFxuICAgICAgICBjb21wcmVzc2VkTGVuZ3RoOiByZXN1bHQudG90YWxfaW4sXG4gICAgICAgIGJ1ZmZlcjogcmVzdWx0LmJ1ZmZlclxuICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aW9uICs9IHJlc3VsdC50b3RhbF9pbjtcbiAgfSB3aGlsZSAocG9zaXRpb24gPD0gbGFzdEJsb2NrU3RhcnQgJiYgcG9zaXRpb24gPCBidWZmZXIuYnl0ZUxlbmd0aCk7XG4gIHJldHVybiBibG9ja3M7XG59XG5cbi8qKlxuICogSW5mbGF0ZSBvbmUgb3IgbW9yZSBnemlwIGJsb2NrcyBpbiB0aGUgYnVmZmVyLlxuICogUmV0dXJucyB0aGUgY29uY2F0ZW5hdGlvbiBvZiBhbGwgaW5mbGF0ZWQgYmxvY2tzLlxuICogVGhpcyBtaXJyb3JzIHRoZSBiZWhhdmlvciBvZiBnemlwKDEpLlxuICovXG5mdW5jdGlvbiBpbmZsYXRlR3ppcChidWZmZXI6IEFycmF5QnVmZmVyKTogQXJyYXlCdWZmZXIge1xuICByZXR1cm4gY29uY2F0QXJyYXlCdWZmZXJzKGluZmxhdGVDb25jYXRlbmF0ZWRHemlwKGJ1ZmZlcikubWFwKHggPT4geC5idWZmZXIpKTtcbn1cblxuLy8gR2l2ZW4gJ2NocjknLCByZXR1cm4gJzknLiBHaXZlbiAnOScsIHJldHVybiAnY2hyOScuXG5mdW5jdGlvbiBhbHRDb250aWdOYW1lKGNvbnRpZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKGNvbnRpZy5zbGljZSgwLCAzKSA9PSAnY2hyJykge1xuICAgIHJldHVybiBjb250aWcuc2xpY2UoMyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICdjaHInICsgY29udGlnO1xuICB9XG59XG5cbi8vIEFyZSB0d28gc3RyaW5ncyBlcXVhbCBtb2R1bGUgYSAnY2hyJyBwcmVmaXg/XG4vLyBlLmcuIGlzQ2hyTWF0Y2goJzE3JywgJ2NocjE3JykgPT0gdHJ1ZVxuZnVuY3Rpb24gaXNDaHJNYXRjaChhOiBzdHJpbmcsIGI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gYSA9PSBiIHx8ICdjaHInICsgYSA9PSBiIHx8IGEgPT0gJ2NocicgKyBiO1xufVxuXG4vKipcbiAqIFBpcGUgYWxsIHByb21pc2UgZXZlbnRzIHRocm91Z2ggYSBkZWZlcnJlZCBvYmplY3QuXG4gKiBUaGlzIGlzIHNpbWlsYXIgdG8gZGVmZXJyZWQucmVzb2x2ZShwcm9taXNlKSwgZXhjZXB0IHRoYXQgaXQgYWxsb3dzIHByb2dyZXNzXG4gKiBub3RpZmljYXRpb25zIGZyb20gdGhlIHByb21pc2UgdG8gYnViYmxlIHRocm91Z2guXG4gKi9cbmZ1bmN0aW9uIHBpcGVQcm9taXNlPFQ+KGRlZmVycmVkOiBRLkRlZmVycmVkPFQ+LCBwcm9taXNlOiBRLlByb21pc2U8VD4pIHtcbiAgcHJvbWlzZS50aGVuKGRlZmVycmVkLnJlc29sdmUsIGRlZmVycmVkLnJlamVjdCwgZGVmZXJyZWQubm90aWZ5KTtcbn1cblxuLyoqXG4gKiBTY2FsZSB0aGUgcmFuZ2UgYnkgYGZhY3RvcmAgYWJvdXQgaXRzIGNlbnRlci5cbiAqIGZhY3RvciAyLjAgd2lsbCBwcm9kdWNlIGEgcmFuZ2Ugd2l0aCB0d2ljZSB0aGUgc3BhbiwgMC41IHdpdGggaGFsZi5cbiAqIEFuIGludmFyaWFudCBpcyB0aGF0IHRoZSBjZW50ZXIgdmFsdWUgd2lsbCBiZSBpZGVudGljYWwgYmVmb3JlIGFuZCBhZnRlci5cbiAqL1xuZnVuY3Rpb24gc2NhbGVSYW5nZShyYW5nZTogSW50ZXJ2YWwsIGZhY3RvcjogbnVtYmVyKTogSW50ZXJ2YWwge1xuICB2YXIgc3BhbiA9IHJhbmdlLnN0b3AgLSByYW5nZS5zdGFydCxcbiAgICAgIGNlbnRlciA9IE1hdGguZmxvb3IoKHJhbmdlLnN0YXJ0ICsgcmFuZ2Uuc3RvcCkgLyAyKSxcbiAgICAgIG5ld1NwYW4gPSBNYXRoLnJvdW5kKGZhY3RvciAqIHNwYW4gLyAyKSAqIDIsXG4gICAgICBzdGFydCA9IGNlbnRlciAtIG5ld1NwYW4gLyAyLFxuICAgICAgc3RvcCA9IGNlbnRlciArIG5ld1NwYW4gLyAyOyAgLy8gVE9ETzogY2xhbXBcblxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgLy8gU2hpZnQgdG8gdGhlIHJpZ2h0IHNvIHRoYXQgdGhlIHJhbmdlIHN0YXJ0cyBhdCB6ZXJvLlxuICAgIHN0b3AgLT0gc3RhcnQ7XG4gICAgc3RhcnQgPSAwO1xuICB9XG4gIHJldHVybiBuZXcgSW50ZXJ2YWwoc3RhcnQsIHN0b3ApO1xufVxuXG4vKipcbiAqIFBhcnNlIGEgdXNlci1zcGVjaWZpZWQgcmFuZ2UgaW50byBhIHJhbmdlLlxuICogT25seSB0aGUgc3BlY2lmaWVkIHBvcnRpb25zIG9mIHRoZSByYW5nZSB3aWxsIGJlIGZpbGxlZCBvdXQgaW4gdGhlIHJldHVybmVkIG9iamVjdC5cbiAqIEZvciBleGFtcGxlOlxuICogJ2NocjE3JyAtLT4ge2NvbnRpZzonY2hyMTcnfVxuICogJzEwLTIwJyAtLT4ge3N0YXJ0OiAxMCwgc3RvcDogMjB9XG4gKiAnMTc6MTAtMjAnIC0tPiB7Y29udGlnOiAnMTcnLCBzdGFydDogMTAsIHN0b3A6IDIwfVxuICogUmV0dXJucyBudWxsIGlmIHRoZSByYW5nZSBjYW4ndCBiZSBwYXJzZWQuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlUmFuZ2UocmFuZ2U6IHN0cmluZyk6ID9QYXJ0aWFsR2Vub21lUmFuZ2Uge1xuICAvLyBGaXJzdCB0cnkgJ2NvbnRpZzpzdGFydC1zdG9wJ1xuICB2YXIgbSA9IC9eKFteIDpdKyk6KFswLTksXSspLShbMC05LF0rKSQvLmV4ZWMocmFuZ2UpO1xuICBpZiAobSkge1xuICAgIHJldHVybiB7XG4gICAgICBjb250aWc6IG1bMV0sXG4gICAgICBzdGFydDogcGFyc2VOdW1iZXJXaXRoQ29tbWFzKG1bMl0pLFxuICAgICAgc3RvcDogcGFyc2VOdW1iZXJXaXRoQ29tbWFzKG1bM10pXG4gICAgfTtcbiAgfVxuXG4gIC8vIFRoZW4gY29udGlnOm51bWJlclxuICBtID0gL14oW14gOl0rKTooWzAtOSxdKykkLy5leGVjKHJhbmdlKTtcbiAgaWYgKG0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGlnOiBtWzFdLFxuICAgICAgc3RhcnQ6IHBhcnNlTnVtYmVyV2l0aENvbW1hcyhtWzJdKSxcbiAgICB9O1xuICB9XG5cbiAgLy8gVGhlbiAnc3RhcnQ6c3RvcCdcbiAgbSA9IC9eKFswLTksXSspLShbMC05LF0rKSQvLmV4ZWMocmFuZ2UpO1xuICBpZiAobSkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogcGFyc2VOdW1iZXJXaXRoQ29tbWFzKG1bMV0pLFxuICAgICAgc3RvcDogcGFyc2VOdW1iZXJXaXRoQ29tbWFzKG1bMl0pXG4gICAgfTtcbiAgfVxuXG4gIC8vIFRoZW4gJ2NvbnRpZzonIG9yIG5vbi1udW1lcmljICdjb250aWcnXG4gIG0gPSAvXihbXiA6XSspOiQvLmV4ZWMocmFuZ2UpIHx8IC9eKFteMC05XVteIDpdKykkLy5leGVjKHJhbmdlKTtcbiAgaWYgKG0pIHtcbiAgICByZXR1cm4geyBjb250aWc6IG1bMV0gfTtcbiAgfVxuXG4gIC8vIFRoZW4gcGxhaW4tb2xkIG51bWJlcnMuXG4gIG0gPSAvXihbMC05LF0rKSQvLmV4ZWMocmFuZ2UpO1xuICBpZiAobSkge1xuICAgIHJldHVybiB7IHN0YXJ0OiBwYXJzZU51bWJlcldpdGhDb21tYXMobVsxXSkgfTtcbiAgfVxuXG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEludGVydmFsKGl2OiBJbnRlcnZhbCk6IHN0cmluZyB7XG4gIHJldHVybiBudW1iZXJXaXRoQ29tbWFzKGl2LnN0YXJ0KSArICctJyArIG51bWJlcldpdGhDb21tYXMoaXYuc3RvcCk7XG59XG5cbi8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yOTAxMjk4LzM4ODk1MVxuZnVuY3Rpb24gbnVtYmVyV2l0aENvbW1hcyh4OiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4geC50b1N0cmluZygpLnJlcGxhY2UoL1xcQig/PShcXGR7M30pKyg/IVxcZCkpL2csIFwiLFwiKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VOdW1iZXJXaXRoQ29tbWFzKHg6IHN0cmluZyk6IG51bWJlciB7XG4gIHJldHVybiBwYXJzZUludCh4LnJlcGxhY2UoLywvZywgJycpLCAxMCk7XG59XG5cbmZ1bmN0aW9uIGZsYXRNYXA8VCwgUj4oYXJyYXk6IFRbXSwgZm46ICh0OiBUKT0+UltdKTogUltdIHtcbiAgcmV0dXJuIF8uZmxhdHRlbihhcnJheS5tYXAoZm4pLCB0cnVlIC8qIHNoYWxsb3cgKi8pO1xufVxuXG4vKipcbiAqIERldGVybWluZSB0aGUgcGVyY2VudGlsZS10aCBlbGVtZW50IG9mIHhzLlxuICogcGVyY2VudGlsZSBzaG91bGQgYmUgYW4gaW50ZWdlciBmcm9tIDEgdG8gOTkuXG4gKiBUaGlzIHdpbGwgc29ydCB0aGUgeHMuXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVQZXJjZW50aWxlKHhzOiBudW1iZXJbXSwgcGVyY2VudGlsZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgaWYgKHhzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7ICAvLyBwbGFjZWhvbGRlciB2YWx1ZVxuXG4gIHhzLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgdmFyIGlkeCA9ICh4cy5sZW5ndGggLSAxKSAqIHBlcmNlbnRpbGUgLyAxMDAsXG4gICAgICBsbyA9IE1hdGguZmxvb3IoaWR4KSxcbiAgICAgIGhpID0gTWF0aC5jZWlsKGlkeCk7XG5cbiAgaWYgKGxvID09IGhpKSB7XG4gICAgcmV0dXJuIHhzW2xvXTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geHNbbG9dICogKGlkeCAtIGxvKSArIHhzW2hpXSAqIChoaSAtIGlkeCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHR1cGxlTGVzc09yRXF1YWwsXG4gIHR1cGxlUmFuZ2VPdmVybGFwcyxcbiAgY29uY2F0QXJyYXlCdWZmZXJzLFxuICBpbmZsYXRlQ29uY2F0ZW5hdGVkR3ppcCxcbiAgaW5mbGF0ZUd6aXAsXG4gIGFsdENvbnRpZ05hbWUsXG4gIHBpcGVQcm9taXNlLFxuICBzY2FsZVJhbmdlLFxuICBwYXJzZVJhbmdlLFxuICBmb3JtYXRJbnRlcnZhbCxcbiAgaXNDaHJNYXRjaCxcbiAgZmxhdE1hcCxcbiAgY29tcHV0ZVBlcmNlbnRpbGVcbn07XG4iLCIvKipcbiAqIEFic3RyYWN0Q2FjaGVcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG4vKmpzaGludCB1bnVzZWQ6ZmFsc2UgKi9cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xuXG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuXG5pbXBvcnQgdHlwZSB7VmlzdWFsQWxpZ25tZW50fSBmcm9tICcuL1BpbGV1cENhY2hlJztcbmltcG9ydCBHZW5lcmljRmVhdHVyZSBmcm9tICcuLi9kYXRhL2dlbmVyaWNGZWF0dXJlLmpzJztcblxuXG5leHBvcnQgdHlwZSBWaXN1YWxHcm91cDxUOiAoVmlzdWFsQWxpZ25tZW50IHwgR2VuZXJpY0ZlYXR1cmUpPiA9IHtcbiAga2V5OiBzdHJpbmc7XG4gIHJvdzogbnVtYmVyOyAgLy8gcGlsZXVwIHJvdy5cbiAgc3BhbjogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPjsgIC8vIHRpcC10by10aXAgc3BhbiBmb3IgdGhlIHJlYWQgZ3JvdXBcbiAgaW5zZXJ0OiA/SW50ZXJ2YWw7ICAvLyBpbnRlcnZhbCBmb3IgdGhlIGNvbm5lY3RvciwgaWYgYXBwbGljYWJsZS5cbiAgaXRlbXM6IFRbXTtcbn07XG5cbmNsYXNzIEFic3RyYWN0Q2FjaGU8VDogKFZpc3VhbEFsaWdubWVudCB8IEdlbmVyaWNGZWF0dXJlKT4ge1xuICAvLyBtYXBzIGdyb3VwS2V5IHRvIFZpc3VhbEdyb3VwXG4gIGdyb3Vwczoge1trZXk6IHN0cmluZ106IFZpc3VhbEdyb3VwPFQ+fTsgXG4gIHJlZlRvUGlsZXVwOiB7W2tleTogc3RyaW5nXTogQXJyYXk8SW50ZXJ2YWxbXT59O1xuICByZWZlcmVuY2VTb3VyY2U6IFR3b0JpdFNvdXJjZTtcblxuICBjb25zdHJ1Y3RvcihyZWZlcmVuY2VTb3VyY2U6IFR3b0JpdFNvdXJjZSkge1xuICAgIHRoaXMuZ3JvdXBzID0ge307XG4gICAgdGhpcy5yZWZUb1BpbGV1cCA9IHt9O1xuICAgIHRoaXMucmVmZXJlbmNlU291cmNlID0gcmVmZXJlbmNlU291cmNlO1xuICB9XG5cbiAgcGlsZXVwRm9yUmVmKHJlZjogc3RyaW5nKTogQXJyYXk8SW50ZXJ2YWxbXT4ge1xuICAgIGlmIChyZWYgaW4gdGhpcy5yZWZUb1BpbGV1cCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVmVG9QaWxldXBbcmVmXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFsdCA9IHV0aWxzLmFsdENvbnRpZ05hbWUocmVmKTtcbiAgICAgIGlmIChhbHQgaW4gdGhpcy5yZWZUb1BpbGV1cCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZUb1BpbGV1cFthbHRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEhvdyBtYW55IHJvd3MgdGFsbCBpcyB0aGUgcGlsZXVwIGZvciBhIGdpdmVuIHJlZj8gVGhpcyBpcyByZWxhdGVkIHRvIHRoZVxuICAvLyBtYXhpbXVtIHJlYWQgZGVwdGguIFRoaXMgaXMgJ2NocictYWdub3N0aWMuXG4gIHBpbGV1cEhlaWdodEZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgdmFyIHBpbGV1cCA9IHRoaXMucGlsZXVwRm9yUmVmKHJlZik7XG4gICAgcmV0dXJuIHBpbGV1cCA/IHBpbGV1cC5sZW5ndGggOiAwO1xuICB9XG5cbiAgLy8gRmluZCBncm91cHMgb3ZlcmxhcHBpbmcgdGhlIHJhbmdlLiBUaGlzIGlzICdjaHInLWFnbm9zdGljLlxuICBnZXRHcm91cHNPdmVybGFwcGluZyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IFZpc3VhbEdyb3VwPFQ+W10ge1xuICAgIC8vIFRPRE86IHNwZWVkIHRoaXMgdXAgdXNpbmcgYW4gaW50ZXJ2YWwgdHJlZVxuICAgIHJldHVybiBfLmZpbHRlcih0aGlzLmdyb3VwcywgZ3JvdXAgPT4gZ3JvdXAuc3Bhbi5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gIH1cblxuICAvLyBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBncm91cHMgYXQgYSBsb2N1cy5cbiAgLy8gTGlrZSBnZXRHcm91cHNPdmVybGFwcGluZyhyYW5nZSkubGVuZ3RoID4gMCwgYnV0IG1vcmUgZWZmaWNpZW50LlxuICBhbnlHcm91cHNPdmVybGFwcGluZyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIGZvciAodmFyIGsgaW4gdGhpcy5ncm91cHMpIHtcbiAgICAgIHZhciBncm91cCA9IHRoaXMuZ3JvdXBzW2tdO1xuICAgICAgaWYgKGdyb3VwLnNwYW4uaW50ZXJzZWN0cyhyYW5nZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEFic3RyYWN0Q2FjaGU7XG4iLCIvKipcbiAqIERhdGEgbWFuYWdlbWVudCBmb3IgQ292ZXJhZ2VUcmFjay5cbiAqXG4gKiBUaGlzIGNsYXNzIHRyYWNrcyBjb3VudHMgYW5kIG1pc21hdGNoZXMgYXQgZWFjaCBsb2N1cy5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtBbGlnbm1lbnR9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge09wSW5mb30gZnJvbSAnLi9waWxldXB1dGlscyc7XG5pbXBvcnQgdHlwZSBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5cbmltcG9ydCB7Z2V0T3BJbmZvfSBmcm9tICcuL3BpbGV1cHV0aWxzJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCB0eXBlIEJpblN1bW1hcnkgPSB7XG4gIGNvdW50OiBudW1iZXI7XG4gIC8vIFRoZXNlIHByb3BlcnRpZXMgd2lsbCBvbmx5IGJlIHByZXNlbnQgd2hlbiB0aGVyZSBhcmUgbWlzbWF0Y2hlcy5cbiAgbWlzbWF0Y2hlcz86IHtba2V5OiBzdHJpbmddOiBudW1iZXJ9O1xuICByZWY/OiBzdHJpbmc7ICAvLyB3aGF0IGRvZXMgdGhlIHJlZmVyZW5jZSBoYXZlIGhlcmU/XG59O1xuXG4vLyBUaGlzIGNsYXNzIHByb3ZpZGVzIGRhdGEgbWFuYWdlbWVudCBmb3IgdGhlIHZpc3VhbGl6YXRpb24sIGdyb3VwaW5nIHBhaXJlZFxuLy8gcmVhZHMgYW5kIG1hbmFnaW5nIHRoZSBwaWxldXAuXG5jbGFzcyBDb3ZlcmFnZUNhY2hlIHtcbiAgLy8gbWFwcyBncm91cEtleSB0byBWaXN1YWxHcm91cFxuICByZWFkczoge1trZXk6IHN0cmluZ106IEFsaWdubWVudH07XG4gIC8vIHJlZiAtLT4gcG9zaXRpb24gLS0+IEJpblN1bW1hcnlcbiAgcmVmVG9Db3VudHM6IHtba2V5OiBzdHJpbmddOiB7W2tleTogbnVtYmVyXTogQmluU3VtbWFyeX19O1xuICByZWZUb01heENvdmVyYWdlOiB7W2tleTogc3RyaW5nXTogbnVtYmVyfTtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG5cbiAgY29uc3RydWN0b3IocmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2UpIHtcbiAgICB0aGlzLnJlYWRzID0ge307XG4gICAgdGhpcy5yZWZUb0NvdW50cyA9IHt9O1xuICAgIHRoaXMucmVmVG9NYXhDb3ZlcmFnZSA9IHt9O1xuICAgIHRoaXMucmVmZXJlbmNlU291cmNlID0gcmVmZXJlbmNlU291cmNlO1xuICB9XG5cbiAgLy8gTG9hZCBhIG5ldyByZWFkIGludG8gdGhlIHZpc3VhbGl6YXRpb24gY2FjaGUuXG4gIC8vIENhbGxpbmcgdGhpcyBtdWx0aXBsZSB0aW1lcyB3aXRoIHRoZSBzYW1lIHJlYWQgaXMgYSBuby1vcC5cbiAgYWRkQWxpZ25tZW50KHJlYWQ6IEFsaWdubWVudCkge1xuICAgIHZhciBrZXkgPSByZWFkLmdldEtleSgpO1xuICAgIGlmIChrZXkgaW4gdGhpcy5yZWFkcykgcmV0dXJuOyAgLy8gd2UndmUgYWxyZWFkeSBzZWVuIHRoaXMgb25lLlxuICAgIHRoaXMucmVhZHNba2V5XSA9IHJlYWQ7XG5cbiAgICB2YXIgb3BJbmZvID0gZ2V0T3BJbmZvKHJlYWQsIHRoaXMucmVmZXJlbmNlU291cmNlKTtcblxuICAgIHRoaXMuYWRkUmVhZFRvQ292ZXJhZ2UocmVhZCwgb3BJbmZvKTtcbiAgfVxuXG4gIC8vIFVwZGF0ZXMgcmVmZXJlbmNlIG1pc21hdGNoIGluZm9ybWF0aW9uIGZvciBwcmV2aW91c2x5LWxvYWRlZCByZWFkcy5cbiAgdXBkYXRlTWlzbWF0Y2hlcyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikge1xuICAgIHZhciByZWYgPSB0aGlzLl9jYW5vbmljYWxSZWYocmFuZ2UuY29udGlnKTtcbiAgICB0aGlzLnJlZlRvQ291bnRzW3JlZl0gPSB7fTsgIC8vIFRPRE86IGNvdWxkIGJlIG1vcmUgZWZmaWNpZW50XG4gICAgdGhpcy5yZWZUb01heENvdmVyYWdlW3JlZl0gPSAwO1xuICAgIGZvciAodmFyIGsgaW4gdGhpcy5yZWFkcykge1xuICAgICAgdmFyIHJlYWQgPSB0aGlzLnJlYWRzW2tdO1xuICAgICAgaWYgKHJlYWQuZ2V0SW50ZXJ2YWwoKS5jaHJPbkNvbnRpZyhyYW5nZS5jb250aWcpKSB7XG4gICAgICAgIHZhciBvcEluZm8gPSBnZXRPcEluZm8ocmVhZCwgdGhpcy5yZWZlcmVuY2VTb3VyY2UpO1xuICAgICAgICB0aGlzLmFkZFJlYWRUb0NvdmVyYWdlKHJlYWQsIG9wSW5mbyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYWRkUmVhZFRvQ292ZXJhZ2UocmVhZDogQWxpZ25tZW50LCBvcEluZm86IE9wSW5mbykge1xuICAgIC8vIEFkZCBjb3ZlcmFnZS9taXNtYXRjaCBpbmZvcm1hdGlvblxuICAgIHZhciByZWYgPSB0aGlzLl9jYW5vbmljYWxSZWYocmVhZC5yZWYpO1xuICAgIGlmICghKHJlZiBpbiB0aGlzLnJlZlRvQ291bnRzKSkge1xuICAgICAgdGhpcy5yZWZUb0NvdW50c1tyZWZdID0ge307XG4gICAgICB0aGlzLnJlZlRvTWF4Q292ZXJhZ2VbcmVmXSA9IDA7XG4gICAgfVxuICAgIHZhciBjb3VudHMgPSB0aGlzLnJlZlRvQ291bnRzW3JlZl0sXG4gICAgICAgIG1heCA9IHRoaXMucmVmVG9NYXhDb3ZlcmFnZVtyZWZdLFxuICAgICAgICByYW5nZSA9IHJlYWQuZ2V0SW50ZXJ2YWwoKSxcbiAgICAgICAgc3RhcnQgPSByYW5nZS5zdGFydCgpLFxuICAgICAgICBzdG9wID0gcmFuZ2Uuc3RvcCgpO1xuICAgIGZvciAodmFyIHBvcyA9IHN0YXJ0OyBwb3MgPD0gc3RvcDsgcG9zKyspIHtcbiAgICAgIGxldCBjID0gY291bnRzW3Bvc107XG4gICAgICBpZiAoIWMpIHtcbiAgICAgICAgY291bnRzW3Bvc10gPSBjID0ge2NvdW50OiAwfTtcbiAgICAgIH1cbiAgICAgIGMuY291bnQgKz0gMTtcbiAgICAgIGlmIChjLmNvdW50ID4gbWF4KSBtYXggPSBjLmNvdW50O1xuICAgIH1cbiAgICBmb3IgKHZhciBtbSBvZiBvcEluZm8ubWlzbWF0Y2hlcykge1xuICAgICAgdmFyIGJpbiA9IGNvdW50c1ttbS5wb3NdO1xuICAgICAgdmFyIG1pc21hdGNoZXM7XG4gICAgICBpZiAoYmluLm1pc21hdGNoZXMpIHtcbiAgICAgICAgbWlzbWF0Y2hlcyA9IGJpbi5taXNtYXRjaGVzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWlzbWF0Y2hlcyA9IGJpbi5taXNtYXRjaGVzID0ge307XG4gICAgICAgIGJpbi5yZWYgPSB0aGlzLnJlZmVyZW5jZVNvdXJjZS5nZXRSYW5nZUFzU3RyaW5nKHtcbiAgICAgICAgICBjb250aWc6IHJlZiwgc3RhcnQ6IG1tLnBvcywgc3RvcDogbW0ucG9zfSk7XG4gICAgICB9XG4gICAgICBsZXQgYyA9IG1pc21hdGNoZXNbbW0uYmFzZVBhaXJdIHx8IDA7XG4gICAgICBtaXNtYXRjaGVzW21tLmJhc2VQYWlyXSA9IDEgKyBjO1xuICAgIH1cblxuICAgIHRoaXMucmVmVG9NYXhDb3ZlcmFnZVtyZWZdID0gbWF4O1xuICB9XG5cbiAgbWF4Q292ZXJhZ2VGb3JSZWYocmVmOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnJlZlRvTWF4Q292ZXJhZ2VbcmVmXSB8fFxuICAgICAgICB0aGlzLnJlZlRvTWF4Q292ZXJhZ2VbdXRpbHMuYWx0Q29udGlnTmFtZShyZWYpXSB8fFxuICAgICAgICAwO1xuICB9XG5cbiAgYmluc0ZvclJlZihyZWY6IHN0cmluZyk6IHtba2V5OiBudW1iZXJdOiBCaW5TdW1tYXJ5fSB7XG4gICAgcmV0dXJuIHRoaXMucmVmVG9Db3VudHNbcmVmXSB8fFxuICAgICAgICB0aGlzLnJlZlRvQ291bnRzW3V0aWxzLmFsdENvbnRpZ05hbWUocmVmKV0gfHxcbiAgICAgICAge307XG4gIH1cblxuICAvLyBSZXR1cm5zIHdoaWNoZXZlciBmb3JtIG9mIHRoZSByZWYgKFwiY2hyMTdcIiwgXCIxN1wiKSBoYXMgYmVlbiBzZWVuLlxuICBfY2Fub25pY2FsUmVmKHJlZjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5yZWZUb0NvdW50c1tyZWZdKSByZXR1cm4gcmVmO1xuICAgIHZhciBhbHQgPSB1dGlscy5hbHRDb250aWdOYW1lKHJlZik7XG4gICAgaWYgKHRoaXMucmVmVG9Db3VudHNbYWx0XSkgcmV0dXJuIGFsdDtcbiAgICByZXR1cm4gcmVmO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ292ZXJhZ2VDYWNoZTtcbiIsIi8qKlxuICogQ292ZXJhZ2UgdmlzdWFsaXphdGlvbiBvZiBBbGlnbm1lbnQgc291cmNlcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0FsaWdubWVudERhdGFTb3VyY2V9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgdHlwZSB7RGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHR5cGUge0JpblN1bW1hcnl9IGZyb20gJy4vQ292ZXJhZ2VDYWNoZSc7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQgdHlwZSB7U3RhdGV9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHNjYWxlIGZyb20gJy4uL3NjYWxlJztcbmltcG9ydCBzaGFsbG93RXF1YWxzIGZyb20gJ3NoYWxsb3ctZXF1YWxzJztcbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgQ292ZXJhZ2VDYWNoZSBmcm9tICcuL0NvdmVyYWdlQ2FjaGUnO1xuaW1wb3J0IFRpbGVkQ2FudmFzIGZyb20gJy4vVGlsZWRDYW52YXMnO1xuaW1wb3J0IHN0eWxlIGZyb20gJy4uL3N0eWxlJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5cbi8vIEJhc2ljIHNldHVwIChUT0RPOiBtYWtlIHRoaXMgY29uZmlndXJhYmxlIGJ5IHRoZSB1c2VyKVxuY29uc3QgU0hPV19NSVNNQVRDSEVTID0gdHJ1ZTtcblxuLy8gT25seSBzaG93IG1pc21hdGNoIGluZm9ybWF0aW9uIHdoZW4gdGhlcmUgYXJlIG1vcmUgdGhhbiB0aGlzIG1hbnlcbi8vIHJlYWRzIHN1cHBvcnRpbmcgdGhhdCBtaXNtYXRjaC5cbmNvbnN0IE1JU01BVENIX1RIUkVTSE9MRCA9IDE7XG5cblxuY2xhc3MgQ292ZXJhZ2VUaWxlZENhbnZhcyBleHRlbmRzIFRpbGVkQ2FudmFzIHtcbiAgaGVpZ2h0OiBudW1iZXI7XG4gIG9wdGlvbnM6IE9iamVjdDtcbiAgY2FjaGU6IENvdmVyYWdlQ2FjaGU7XG5cbiAgY29uc3RydWN0b3IoY2FjaGU6IENvdmVyYWdlQ2FjaGUsIGhlaWdodDogbnVtYmVyLCBvcHRpb25zOiBPYmplY3QpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xuICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgoMSwgaGVpZ2h0KTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgaGVpZ2h0Rm9yUmVmKHJlZjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5oZWlnaHQ7XG4gIH1cblxuICB1cGRhdGUoaGVpZ2h0OiBudW1iZXIsIG9wdGlvbnM6IE9iamVjdCkge1xuICAgIC8vIHdvcmthcm91bmQgZm9yIGFuIGlzc3VlIGluIFBoYW50b21KUyB3aGVyZSBoZWlnaHQgYWx3YXlzIGNvbWVzIG91dCB0byB6ZXJvLlxuICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgoMSwgaGVpZ2h0KTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgeVNjYWxlRm9yUmVmKHJlZjogc3RyaW5nLCBib3R0b21QYWRkaW5nOiBudW1iZXIsIHRvcFBhZGRpbmc6bnVtYmVyKTogKHk6IG51bWJlcikgPT4gbnVtYmVyIHtcbiAgICB2YXIgbWF4Q292ZXJhZ2UgPSB0aGlzLmNhY2hlLm1heENvdmVyYWdlRm9yUmVmKHJlZik7XG4gICAgcmV0dXJuIHNjYWxlLmxpbmVhcigpXG4gICAgICAuZG9tYWluKFttYXhDb3ZlcmFnZSwgMF0pXG4gICAgICAucmFuZ2UoW2JvdHRvbVBhZGRpbmcsIHRoaXMuaGVpZ2h0IC0gdG9wUGFkZGluZ10pXG4gICAgICAubmljZSgpO1xuICB9XG5cbiAgcmVuZGVyKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgIHhTY2FsZTogKHg6IG51bWJlcik9Pm51bWJlcixcbiAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgdmFyIGJpbnMgPSB0aGlzLmNhY2hlLmJpbnNGb3JSZWYocmFuZ2UuY29udGlnKTtcbiAgICB2YXIgeVNjYWxlID0gdGhpcy55U2NhbGVGb3JSZWYocmFuZ2UuY29udGlnLCAwLCAzMCk7XG4gICAgdmFyIHJlbGF4ZWRSYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChcbiAgICAgICAgcmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCgpIC0gMSwgcmFuZ2Uuc3RvcCgpICsgMSk7XG4gICAgcmVuZGVyQmFycyhjdHgsIHhTY2FsZSwgeVNjYWxlLCByZWxheGVkUmFuZ2UsIGJpbnMsIHRoaXMub3B0aW9ucyk7XG4gIH1cbn1cblxuXG4vLyBEcmF3IGNvdmVyYWdlIGJpbnMgJiBtaXNtYXRjaGVzXG5mdW5jdGlvbiByZW5kZXJCYXJzKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgeFNjYWxlOiAobnVtOiBudW1iZXIpID0+IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgeVNjYWxlOiAobnVtOiBudW1iZXIpID0+IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgIGJpbnM6IHtba2V5OiBudW1iZXJdOiBCaW5TdW1tYXJ5fSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogT2JqZWN0KSB7XG4gIGlmIChfLmlzRW1wdHkoYmlucykpIHJldHVybjtcblxuICB2YXIgYmFyV2lkdGggPSB4U2NhbGUoMSkgLSB4U2NhbGUoMCk7XG4gIHZhciBzaG93UGFkZGluZyA9IChiYXJXaWR0aCA+IHN0eWxlLkNPVkVSQUdFX01JTl9CQVJfV0lEVEhfRk9SX0dBUCk7XG4gIHZhciBwYWRkaW5nID0gc2hvd1BhZGRpbmcgPyAxIDogMDtcblxuICB2YXIgYmluUG9zID0gZnVuY3Rpb24ocG9zOiBudW1iZXIsIGNvdW50OiBudW1iZXIpIHtcbiAgICAvLyBSb3VuZCB0byBpbnRlZ2VyIGNvb3JkaW5hdGVzIGZvciBjcmlzcCBsaW5lcywgd2l0aG91dCBhbGlhc2luZy5cbiAgICB2YXIgYmFyWDEgPSBNYXRoLnJvdW5kKHhTY2FsZSgxICsgcG9zKSksXG4gICAgICAgIGJhclgyID0gTWF0aC5yb3VuZCh4U2NhbGUoMiArIHBvcykpIC0gcGFkZGluZyxcbiAgICAgICAgYmFyWSA9IE1hdGgucm91bmQoeVNjYWxlKGNvdW50KSk7XG4gICAgcmV0dXJuIHtiYXJYMSwgYmFyWDIsIGJhcll9O1xuICB9O1xuXG4gIHZhciBtaXNtYXRjaEJpbnMgPSAoe30gOiB7W2tleTpudW1iZXJdOiBCaW5TdW1tYXJ5fSk7ICAvLyBrZWVwIHRyYWNrIG9mIHdoaWNoIG9uZXMgaGF2ZSBtaXNtYXRjaGVzXG4gIHZhciB2QmFzZVBvc1kgPSB5U2NhbGUoMCk7ICAvLyB0aGUgdmVyeSBib3R0b20gb2YgdGhlIGNhbnZhc1xuICB2YXIgc3RhcnQgPSByYW5nZS5zdGFydCgpLFxuICAgICAgc3RvcCA9IHJhbmdlLnN0b3AoKTtcbiAgbGV0IHtiYXJYMX0gPSBiaW5Qb3Moc3RhcnQsIChzdGFydCBpbiBiaW5zKSA/IGJpbnNbc3RhcnRdLmNvdW50IDogMCk7XG4gIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5DT1ZFUkFHRV9CSU5fQ09MT1I7XG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4Lm1vdmVUbyhiYXJYMSwgdkJhc2VQb3NZKTtcbiAgZm9yICh2YXIgcG9zID0gc3RhcnQ7IHBvcyA8IHN0b3A7IHBvcysrKSB7XG4gICAgdmFyIGJpbiA9IGJpbnNbcG9zXTtcbiAgICBpZiAoIWJpbikgY29udGludWU7XG4gICAgY3R4LnB1c2hPYmplY3QoYmluKTtcbiAgICBsZXQge2JhclgxLCBiYXJYMiwgYmFyWX0gPSBiaW5Qb3MocG9zLCBiaW4uY291bnQpO1xuICAgIGN0eC5saW5lVG8oYmFyWDEsIGJhclkpO1xuICAgIGN0eC5saW5lVG8oYmFyWDIsIGJhclkpO1xuICAgIGlmIChzaG93UGFkZGluZykge1xuICAgICAgY3R4LmxpbmVUbyhiYXJYMiwgdkJhc2VQb3NZKTtcbiAgICAgIGN0eC5saW5lVG8oYmFyWDIgKyAxLCB2QmFzZVBvc1kpO1xuICAgIH1cblxuICAgIGlmIChTSE9XX01JU01BVENIRVMgJiYgIV8uaXNFbXB0eShiaW4ubWlzbWF0Y2hlcykpIHtcbiAgICAgIG1pc21hdGNoQmluc1twb3NdID0gYmluO1xuICAgIH1cblxuICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgfVxuICBsZXQge2JhclgyfSA9IGJpblBvcyhzdG9wLCAoc3RvcCBpbiBiaW5zKSA/IGJpbnNbc3RvcF0uY291bnQgOiAwKTtcbiAgY3R4LmxpbmVUbyhiYXJYMiwgdkJhc2VQb3NZKTsgIC8vIHJpZ2h0IGVkZ2Ugb2YgdGhlIHJpZ2h0IGJhci5cbiAgY3R4LmNsb3NlUGF0aCgpO1xuICBjdHguZmlsbCgpO1xuXG4gIC8vIE5vdyByZW5kZXIgdGhlIG1pc21hdGNoZXNcbiAgXy5lYWNoKG1pc21hdGNoQmlucywgKGJpbiwgcG9zKSA9PiB7XG4gICAgaWYgKCFiaW4ubWlzbWF0Y2hlcykgcmV0dXJuOyAgLy8gdGhpcyBpcyBoZXJlIGZvciBGbG93OyBpdCBjYW4ndCByZWFsbHkgaGFwcGVuLlxuICAgIGNvbnN0IG1pc21hdGNoZXMgPSBfLmNsb25lKGJpbi5taXNtYXRjaGVzKTtcbiAgICBwb3MgPSBOdW1iZXIocG9zKTsgIC8vIG9iamVjdCBrZXlzIGFyZSBzdHJpbmdzLCBub3QgbnVtYmVycy5cblxuICAgIC8vIElmIHRoaXMgaXMgYSBoaWdoLWZyZXF1ZW5jeSB2YXJpYW50LCBhZGQgaW4gdGhlIHJlZmVyZW5jZS5cbiAgICB2YXIgbWlzbWF0Y2hDb3VudCA9IF8ucmVkdWNlKG1pc21hdGNoZXMsICh4LCB5KSA9PiB4ICsgeSk7XG4gICAgdmFyIG1vc3RGcmVxdWVudE1pc21hdGNoID0gXy5tYXgobWlzbWF0Y2hlcyk7XG4gICAgaWYgKG1vc3RGcmVxdWVudE1pc21hdGNoID4gTUlTTUFUQ0hfVEhSRVNIT0xEICYmXG4gICAgICAgIG1pc21hdGNoQ291bnQgPiBvcHRpb25zLnZhZkNvbG9yVGhyZXNob2xkICogYmluLmNvdW50ICYmXG4gICAgICAgIG1pc21hdGNoQ291bnQgPCBiaW4uY291bnQpIHtcbiAgICAgIGlmIChiaW4ucmVmKSB7ICAvLyBoZXJlIGZvciBmbG93OyBjYW4ndCByZWFseSBoYXBwZW5cbiAgICAgICAgbWlzbWF0Y2hlc1tiaW4ucmVmXSA9IGJpbi5jb3VudCAtIG1pc21hdGNoQ291bnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHtiYXJYMSwgYmFyWDJ9ID0gYmluUG9zKHBvcywgYmluLmNvdW50KTtcbiAgICBjdHgucHVzaE9iamVjdChiaW4pO1xuICAgIHZhciBjb3VudFNvRmFyID0gMDtcbiAgICBfLmNoYWluKG1pc21hdGNoZXMpXG4gICAgICAubWFwKChjb3VudCwgYmFzZSkgPT4gKHtjb3VudCwgYmFzZX0pKSAgLy8gcHVsbCBiYXNlIGludG8gdGhlIG9iamVjdFxuICAgICAgLmZpbHRlcigoe2NvdW50fSkgPT4gY291bnQgPiBNSVNNQVRDSF9USFJFU0hPTEQpXG4gICAgICAuc29ydEJ5KCh7Y291bnR9KSA9PiAtY291bnQpICAvLyB0aGUgbW9zdCBjb21tb24gbWlzbWF0Y2ggYXQgdGhlIGJvdHRvbVxuICAgICAgLmVhY2goKHtjb3VudCwgYmFzZX0pID0+IHtcbiAgICAgICAgdmFyIG1pc01hdGNoT2JqID0ge3Bvc2l0aW9uOiAxICsgcG9zLCBjb3VudCwgYmFzZX07XG4gICAgICAgIGN0eC5wdXNoT2JqZWN0KG1pc01hdGNoT2JqKTsgIC8vIGZvciBkZWJ1Z2dpbmcgYW5kIGNsaWNrLXRyYWNraW5nXG5cbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLkJBU0VfQ09MT1JTW2Jhc2VdO1xuICAgICAgICB2YXIgeSA9IHlTY2FsZShjb3VudFNvRmFyKTtcbiAgICAgICAgY3R4LmZpbGxSZWN0KGJhclgxLFxuICAgICAgICAgICAgICAgICAgICAgeSxcbiAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KDEsIGJhclgyIC0gYmFyWDEpLCAgLy8gbWluIHdpZHRoIG9mIDFweFxuICAgICAgICAgICAgICAgICAgICAgeVNjYWxlKGNvdW50U29GYXIgKyBjb3VudCkgLSB5KTtcbiAgICAgICAgY291bnRTb0ZhciArPSBjb3VudDtcblxuICAgICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgICB9KTtcbiAgICBjdHgucG9wT2JqZWN0KCk7XG4gIH0pO1xufVxuXG5jbGFzcyBDb3ZlcmFnZVRyYWNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFZpelByb3BzPEFsaWdubWVudERhdGFTb3VyY2U+LCBTdGF0ZT4ge1xuICBwcm9wczogVml6UHJvcHM8QWxpZ25tZW50RGF0YVNvdXJjZT47XG4gIHN0YXRlOiBTdGF0ZTsgLy8gbm8gc3RhdGUsIHVzZWQgdG8gbWFrZSBmbG93IGhhcHB5XG4gIGNhY2hlOiBDb3ZlcmFnZUNhY2hlO1xuICB0aWxlczogQ292ZXJhZ2VUaWxlZENhbnZhcztcbiAgc3RhdGljIGRlZmF1bHRPcHRpb25zOiBPYmplY3Q7XG4gIFxuICBjb25zdHJ1Y3Rvcihwcm9wczogVml6UHJvcHM8QWxpZ25tZW50RGF0YVNvdXJjZT4pIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICByZXR1cm4gPGNhbnZhcyByZWY9J2NhbnZhcycgb25DbGljaz17dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpfSAvPjtcbiAgfVxuXG4gIGdldFNjYWxlKCk6IFNjYWxlIHtcbiAgICByZXR1cm4gZDN1dGlscy5nZXRUcmFja1NjYWxlKHRoaXMucHJvcHMucmFuZ2UsIHRoaXMucHJvcHMud2lkdGgpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5jYWNoZSA9IG5ldyBDb3ZlcmFnZUNhY2hlKHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlKTtcbiAgICB0aGlzLnRpbGVzID0gbmV3IENvdmVyYWdlVGlsZWRDYW52YXModGhpcy5jYWNoZSwgdGhpcy5wcm9wcy5oZWlnaHQsIHRoaXMucHJvcHMub3B0aW9ucyk7XG5cbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV3ZGF0YScsIHJhbmdlID0+IHtcbiAgICAgIHZhciBvbGRNYXggPSB0aGlzLmNhY2hlLm1heENvdmVyYWdlRm9yUmVmKHJhbmdlLmNvbnRpZyk7XG4gICAgICB0aGlzLnByb3BzLnNvdXJjZS5nZXRBbGlnbm1lbnRzSW5SYW5nZShyYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2gocmVhZCA9PiB0aGlzLmNhY2hlLmFkZEFsaWdubWVudChyZWFkKSk7XG4gICAgICB2YXIgbmV3TWF4ID0gdGhpcy5jYWNoZS5tYXhDb3ZlcmFnZUZvclJlZihyYW5nZS5jb250aWcpO1xuXG4gICAgICBpZiAob2xkTWF4ICE9IG5ld01heCkge1xuICAgICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZVJhbmdlKHJhbmdlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudmlzdWFsaXplQ292ZXJhZ2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLm9uKCduZXdkYXRhJywgcmFuZ2UgPT4ge1xuICAgICAgdGhpcy5jYWNoZS51cGRhdGVNaXNtYXRjaGVzKHJhbmdlKTtcbiAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZVJhbmdlKHJhbmdlKTtcbiAgICAgIHRoaXMudmlzdWFsaXplQ292ZXJhZ2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICBpZiAoIXNoYWxsb3dFcXVhbHModGhpcy5wcm9wcywgcHJldlByb3BzKSB8fFxuICAgICAgICAhc2hhbGxvd0VxdWFscyh0aGlzLnN0YXRlLCBwcmV2U3RhdGUpKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5oZWlnaHQgIT0gcHJldlByb3BzLmhlaWdodCB8fFxuICAgICAgICAgIHRoaXMucHJvcHMub3B0aW9ucyAhPSBwcmV2UHJvcHMub3B0aW9ucykge1xuICAgICAgICB0aGlzLnRpbGVzLnVwZGF0ZSh0aGlzLnByb3BzLmhlaWdodCwgdGhpcy5wcm9wcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlQWxsKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnZpc3VhbGl6ZUNvdmVyYWdlKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q29udGV4dCgpOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KTtcbiAgICAvLyBUaGUgdHlwZWNhc3QgdGhyb3VnaCBgYW55YCBpcyBiZWNhdXNlIGdldENvbnRleHQgY291bGQgcmV0dXJuIGEgV2ViR0wgY29udGV4dC5cbiAgICB2YXIgY3R4ID0gKChjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSA6IGFueSkgOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpO1xuICAgIHJldHVybiBjdHg7XG4gIH1cblxuICAvLyBEcmF3IHRocmVlIHRpY2tzIG9uIHRoZSBsZWZ0IHRvIHNldCB0aGUgc2NhbGUgZm9yIHRoZSB1c2VyXG4gIHJlbmRlclRpY2tzKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgeVNjYWxlOiAobnVtOiBudW1iZXIpPT5udW1iZXIpIHtcbiAgICB2YXIgYXhpc01heCA9IHlTY2FsZS5kb21haW4oKVswXTtcbiAgICBbMCwgTWF0aC5yb3VuZChheGlzTWF4IC8gMiksIGF4aXNNYXhdLmZvckVhY2godGljayA9PiB7XG4gICAgICAvLyBEcmF3IGEgbGluZSBpbmRpY2F0aW5nIHRoZSB0aWNrXG4gICAgICBjdHgucHVzaE9iamVjdCh7dmFsdWU6IHRpY2ssIHR5cGU6ICd0aWNrJ30pO1xuICAgICAgdmFyIHRpY2tQb3NZID0gTWF0aC5yb3VuZCh5U2NhbGUodGljaykpO1xuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gc3R5bGUuQ09WRVJBR0VfRk9OVF9DT0xPUjtcbiAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgMCwgdGlja1Bvc1ksIHN0eWxlLkNPVkVSQUdFX1RJQ0tfTEVOR1RILCB0aWNrUG9zWSk7XG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG5cbiAgICAgIHZhciB0aWNrTGFiZWwgPSB0aWNrICsgJ1gnO1xuICAgICAgY3R4LnB1c2hPYmplY3Qoe3ZhbHVlOiB0aWNrLCBsYWJlbDogdGlja0xhYmVsLCB0eXBlOiAnbGFiZWwnfSk7XG4gICAgICAvLyBOb3cgcHJpbnQgdGhlIGNvdmVyYWdlIGluZm9ybWF0aW9uXG4gICAgICBjdHguZm9udCA9IHN0eWxlLkNPVkVSQUdFX0ZPTlRfU1RZTEU7XG4gICAgICB2YXIgdGV4dFBvc1ggPSBzdHlsZS5DT1ZFUkFHRV9USUNLX0xFTkdUSCArIHN0eWxlLkNPVkVSQUdFX1RFWFRfUEFERElORyxcbiAgICAgICAgICB0ZXh0UG9zWSA9IHRpY2tQb3NZICsgc3R5bGUuQ09WRVJBR0VfVEVYVF9ZX09GRlNFVDtcbiAgICAgIC8vIFRoZSBzdHJva2UgY3JlYXRlcyBhIGJvcmRlciBhcm91bmQgdGhlIHRleHQgdG8gbWFrZSBpdCBsZWdpYmxlIG92ZXIgdGhlIGJhcnMuXG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IDI7XG4gICAgICBjdHguc3Ryb2tlVGV4dCh0aWNrTGFiZWwsIHRleHRQb3NYLCB0ZXh0UG9zWSk7XG4gICAgICBjdHgubGluZVdpZHRoID0gMTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5DT1ZFUkFHRV9GT05UX0NPTE9SO1xuICAgICAgY3R4LmZpbGxUZXh0KHRpY2tMYWJlbCwgdGV4dFBvc1gsIHRleHRQb3NZKTtcbiAgICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHZpc3VhbGl6ZUNvdmVyYWdlKCkge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KSxcbiAgICAgICAgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgICBoZWlnaHQgPSB0aGlzLnByb3BzLmhlaWdodCxcbiAgICAgICAgcmFuZ2UgPSBDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UodGhpcy5wcm9wcy5yYW5nZSk7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwKSByZXR1cm47XG4gICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG5cbiAgICB2YXIgY3R4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dCh0aGlzLmdldENvbnRleHQoKSk7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHgucmVzZXQoKTtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcblxuICAgIHZhciB5U2NhbGUgPSB0aGlzLnRpbGVzLnlTY2FsZUZvclJlZihyYW5nZS5jb250aWcsIDEwLCAxMCk7XG5cbiAgICB0aGlzLnRpbGVzLnJlbmRlclRvU2NyZWVuKGN0eCwgcmFuZ2UsIHRoaXMuZ2V0U2NhbGUoKSk7XG4gICAgdGhpcy5yZW5kZXJUaWNrcyhjdHgsIHlTY2FsZSk7XG5cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2socmVhY3RFdmVudDogYW55KSB7XG4gICAgdmFyIGV2ID0gcmVhY3RFdmVudC5uYXRpdmVFdmVudCxcbiAgICAgICAgeCA9IGV2Lm9mZnNldFg7XG5cbiAgICAvLyBJdCdzIHNpbXBsZSB0byBmaWd1cmUgb3V0IHdoaWNoIHBvc2l0aW9uIHdhcyBjbGlja2VkIHVzaW5nIHRoZSB4LXNjYWxlLlxuICAgIC8vIE5vIG5lZWQgdG8gcmVuZGVyIHRoZSBzY2VuZSB0byBkZXRlcm1pbmUgd2hhdCB3YXMgY2xpY2tlZC5cbiAgICB2YXIgcmFuZ2UgPSBDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UodGhpcy5wcm9wcy5yYW5nZSksXG4gICAgICAgIHhTY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKSxcbiAgICAgICAgYmlucyA9IHRoaXMuY2FjaGUuYmluc0ZvclJlZihyYW5nZS5jb250aWcpLFxuICAgICAgICBwb3MgPSBNYXRoLmZsb29yKHhTY2FsZS5pbnZlcnQoeCkpIC0gMSxcbiAgICAgICAgYmluID0gYmluc1twb3NdO1xuXG4gICAgdmFyIGFsZXJ0ID0gd2luZG93LmFsZXJ0IHx8IGNvbnNvbGUubG9nO1xuICAgIGlmIChiaW4pIHtcbiAgICAgIHZhciBtbUNvdW50ID0gYmluLm1pc21hdGNoZXMgPyBfLnJlZHVjZShiaW4ubWlzbWF0Y2hlcywgKGEsIGIpID0+IGEgKyBiKSA6IDA7XG4gICAgICB2YXIgcmVmID0gYmluLnJlZiB8fCB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5nZXRSYW5nZUFzU3RyaW5nKFxuICAgICAgICAgIHtjb250aWc6IHJhbmdlLmNvbnRpZywgc3RhcnQ6IHBvcywgc3RvcDogcG9zfSk7XG5cbiAgICAgIC8vIENvbnN0cnVjdCBhIEpTT04gb2JqZWN0IHRvIHNob3cgdGhlIHVzZXIuXG4gICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IF8uZXh0ZW5kKFxuICAgICAgICB7XG4gICAgICAgICAgJ3Bvc2l0aW9uJzogcmFuZ2UuY29udGlnICsgJzonICsgKDEgKyBwb3MpLFxuICAgICAgICAgICdyZWFkIGRlcHRoJzogYmluLmNvdW50XG4gICAgICAgIH0sXG4gICAgICAgIGJpbi5taXNtYXRjaGVzKTtcbiAgICAgIG1lc3NhZ2VPYmplY3RbcmVmXSA9IGJpbi5jb3VudCAtIG1tQ291bnQ7XG4gICAgICBhbGVydChKU09OLnN0cmluZ2lmeShtZXNzYWdlT2JqZWN0LCBudWxsLCAnICAnKSk7XG4gICAgfVxuICB9XG59XG5cbkNvdmVyYWdlVHJhY2suZGlzcGxheU5hbWUgPSAnY292ZXJhZ2UnO1xuQ292ZXJhZ2VUcmFjay5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgLy8gQ29sb3IgdGhlIHJlZmVyZW5jZSBiYXNlIGluIHRoZSBiYXIgY2hhcnQgd2hlbiB0aGUgVmFyaWFudCBBbGxlbGUgRnJhY3Rpb25cbiAgLy8gZXhjZWVkcyB0aGlzIGFtb3VudC4gV2hlbiB0aGVyZSBhcmUgPj0yIGFncmVlaW5nIG1pc21hdGNoZXMsIHRoZXkgYXJlXG4gIC8vIGFsd2F5cyByZW5kZXJlZC4gQnV0IGZvciBtaXNtYXRjaGVzIGJlbG93IHRoaXMgdGhyZXNob2xkLCB0aGUgcmVmZXJlbmNlIGlzXG4gIC8vIG5vdCBjb2xvcmVkIGluIHRoZSBiYXIgY2hhcnQuIFRoaXMgZHJhd3MgYXR0ZW50aW9uIHRvIGhpZ2gtVkFGIG1pc21hdGNoZXMuXG4gIHZhZkNvbG9yVGhyZXNob2xkOiAwLjJcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ292ZXJhZ2VUcmFjaztcbiIsIi8qKlxuICogSW5kaXZpZHVhbCBiYXNlIHBhaXJzIGFyZSByZW5kZXJlZCBkaWZmZXJlbnRseSBkZXBlbmRpbmcgb24gdGhlIHNjYWxlLlxuICogVGhpcyBlbnVtICYgYXNzb2NpYXRlZCBmdW5jdGlvbnMgaGVscCB0cmFjayB0aGVzZSB0cmFuc2l0aW9ucy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIERpc3BsYXlNb2RlID0ge1xuICBMT09TRTogMSwgICAvLyBMb3RzIG9mIHNwYWNlIC0tIGEgYmlnIGZvbnQgaXMgT0suXG4gIFRJR0hUOiAyLCAgIC8vIExldHRlcnMgbmVlZCB0byBiZSBzaHJ1bmsgdG8gZml0LlxuICBCTE9DS1M6IDMsICAvLyBDaGFuZ2UgZnJvbSBsZXR0ZXJzIHRvIGJsb2NrcyBvZiBjb2xvclxuICBISURERU46IDQsXG5cbiAgZ2V0RGlzcGxheU1vZGUocHhQZXJMZXR0ZXI6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHB4UGVyTGV0dGVyID49IDI1KSB7XG4gICAgICByZXR1cm4gRGlzcGxheU1vZGUuTE9PU0U7XG4gICAgfSBlbHNlIGlmIChweFBlckxldHRlciA+PSAxMCkge1xuICAgICAgcmV0dXJuIERpc3BsYXlNb2RlLlRJR0hUO1xuICAgIH0gZWxzZSBpZiAocHhQZXJMZXR0ZXIgPj0gMSkge1xuICAgICAgcmV0dXJuIERpc3BsYXlNb2RlLkJMT0NLUztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIERpc3BsYXlNb2RlLkhJRERFTjtcbiAgICB9XG4gIH0sXG5cbiAgaXNUZXh0KG1vZGU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAobW9kZSA9PSBEaXNwbGF5TW9kZS5MT09TRSB8fCBtb2RlID09IERpc3BsYXlNb2RlLlRJR0hUKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEaXNwbGF5TW9kZTtcbiIsIi8qKlxuICogVmlzdWFsaXphdGlvbiBvZiBmZWF0dXJlcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0ZlYXR1cmVEYXRhU291cmNlfSBmcm9tICcuLi9zb3VyY2VzL0JpZ0JlZERhdGFTb3VyY2UnO1xuaW1wb3J0IEdlbmVyaWNGZWF0dXJlIGZyb20gJy4uL2RhdGEvZ2VuZXJpY0ZlYXR1cmUnO1xuaW1wb3J0IHtHZW5lcmljRmVhdHVyZUNhY2hlfSBmcm9tICcuL0dlbmVyaWNGZWF0dXJlQ2FjaGUnO1xuaW1wb3J0IHR5cGUge1Zpc3VhbEdyb3VwfSBmcm9tICcuL0Fic3RyYWN0Q2FjaGUnO1xuaW1wb3J0IHR5cGUge0RhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGZyb20gJ2RhdGEtY2FudmFzJztcblxuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc2hhbGxvd0VxdWFscyBmcm9tICdzaGFsbG93LWVxdWFscyc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCBSZW1vdGVSZXF1ZXN0IGZyb20gJy4uL1JlbW90ZVJlcXVlc3QnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgVGlsZWRDYW52YXMgZnJvbSAnLi9UaWxlZENhbnZhcyc7XG5pbXBvcnQgZGF0YUNhbnZhcyBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuaW1wb3J0IHR5cGUge1N0YXRlfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQge3lGb3JSb3d9IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuXG5cbmNsYXNzIEZlYXR1cmVUaWxlZENhbnZhcyBleHRlbmRzIFRpbGVkQ2FudmFzIHtcbiAgb3B0aW9uczogT2JqZWN0O1xuICBzb3VyY2U6IEZlYXR1cmVEYXRhU291cmNlO1xuICBjYWNoZTogR2VuZXJpY0ZlYXR1cmVDYWNoZTtcblxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6IEZlYXR1cmVEYXRhU291cmNlLCBjYWNoZTogR2VuZXJpY0ZlYXR1cmVDYWNoZSwgb3B0aW9uczogT2JqZWN0KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIHVwZGF0ZShuZXdPcHRpb25zOiBPYmplY3QpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBuZXdPcHRpb25zO1xuICB9XG5cbiAgaGVpZ2h0Rm9yUmVmKHJlZjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5waWxldXBIZWlnaHRGb3JSZWYocmVmKSAqXG4gICAgICAgICAgICAgICAgICAgIChzdHlsZS5SRUFEX0hFSUdIVCArIHN0eWxlLlJFQURfU1BBQ0lORyk7XG4gIH1cblxuICByZW5kZXIoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgc2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgIG9yaWdpbmFsUmFuZ2U6ID9Db250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgcmVzb2x1dGlvbjogP251bWJlcikge1xuICAgIHZhciByZWxheGVkUmFuZ2UgPVxuICAgICAgICBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCgpIC0gMSwgcmFuZ2Uuc3RvcCgpICsgMSk7XG4gICAgLy8gZ2V0IGZlYXR1cmVzIGFuZCBwdXQgaW4gY2FjaGVcbiAgICB2YXIgZmVhdHVyZXMgPSB0aGlzLnNvdXJjZS5nZXRGZWF0dXJlc0luUmFuZ2UocmVsYXhlZFJhbmdlLCByZXNvbHV0aW9uKTtcbiAgICBmZWF0dXJlcy5mb3JFYWNoKGYgPT4gdGhpcy5jYWNoZS5hZGRGZWF0dXJlKG5ldyBHZW5lcmljRmVhdHVyZShmLmlkLCBmLnBvc2l0aW9uLCBmKSkpO1xuICAgIFxuICAgIC8vIGdldCB2aXN1YWwgZmVhdHVyZXMgd2l0aCBhc3NpZ25lZCByb3dzICAgIFxuICAgIHZhciB2RmVhdHVyZXMgPSB0aGlzLmNhY2hlLmdldEdyb3Vwc092ZXJsYXBwaW5nKHJlbGF4ZWRSYW5nZSk7XG4gICAgcmVuZGVyRmVhdHVyZXMoY3R4LCBzY2FsZSwgcmVsYXhlZFJhbmdlLCB2RmVhdHVyZXMpO1xuICB9XG59XG5cbi8vIERyYXcgZmVhdHVyZXNcbmZ1bmN0aW9uIHJlbmRlckZlYXR1cmVzKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IChudW06IG51bWJlcikgPT4gbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgICAgICAgICAgICAgdkZlYXR1cmVzOiBWaXN1YWxHcm91cDxHZW5lcmljRmVhdHVyZT5bXSkge1xuXG4gICAgY3R4LmZvbnQgPSBgJHtzdHlsZS5HRU5FX0ZPTlRfU0laRX1weCAke3N0eWxlLkdFTkVfRk9OVH1gO1xuICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcblxuICAgIHZGZWF0dXJlcy5mb3JFYWNoKHZGZWF0dXJlID0+IHtcbiAgICAgIHZhciBmZWF0dXJlID0gdkZlYXR1cmUuaXRlbXNbMF0uZ0ZlYXR1cmU7XG4gICAgICBpZiAoIXZGZWF0dXJlLnNwYW4uaW50ZXJzZWN0cyhyYW5nZSkpIHJldHVybjtcbiAgICAgIGN0eC5wdXNoT2JqZWN0KGZlYXR1cmUpO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XG5cbiAgICAgIC8vIENyZWF0ZSB0cmFuc3BhcmVuY3kgdmFsdWUgYmFzZWQgb24gc2NvcmUuIFNjb3JlIG9mIDw9IDIwMCBpcyB0aGUgc2FtZSB0cmFuc3BhcmVuY3kuXG4gICAgICB2YXIgYWxwaGFTY29yZSA9IE1hdGgubWF4KGZlYXR1cmUuc2NvcmUgLyAxMDAwLjAsIDAuMik7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMCwgMCwgJyArIGFscGhhU2NvcmUgKyAnKSc7XG5cbiAgICAgIHZhciB4ID0gTWF0aC5yb3VuZChzY2FsZSh2RmVhdHVyZS5zcGFuLnN0YXJ0KCkpKTtcbiAgICAgIHZhciB3aWR0aCA9IE1hdGguY2VpbChzY2FsZSh2RmVhdHVyZS5zcGFuLnN0b3AoKSkgLSBzY2FsZSh2RmVhdHVyZS5zcGFuLnN0YXJ0KCkpKTtcbiAgICAgIHZhciB5ID0geUZvclJvdyh2RmVhdHVyZS5yb3cpO1xuICAgICAgY3R4LmZpbGxSZWN0KHggLSAwLjUsIHksIHdpZHRoLCBzdHlsZS5SRUFEX0hFSUdIVCk7XG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgfSk7XG59XG5cbmNsYXNzIEZlYXR1cmVUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxWaXpQcm9wczxGZWF0dXJlRGF0YVNvdXJjZT4sIFN0YXRlPiB7XG4gIHByb3BzOiBWaXpQcm9wczxGZWF0dXJlRGF0YVNvdXJjZT47XG4gIHN0YXRlOiBTdGF0ZTtcbiAgdGlsZXM6IEZlYXR1cmVUaWxlZENhbnZhcztcbiAgY2FjaGU6IEdlbmVyaWNGZWF0dXJlQ2FjaGU7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFZpelByb3BzPEZlYXR1cmVEYXRhU291cmNlPikge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgbmV0d29ya1N0YXR1czogbnVsbFxuICAgIH07XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICAvLyBUaGVzZSBzdHlsZXMgYWxsb3cgdmVydGljYWwgc2Nyb2xsaW5nIHRvIHNlZSB0aGUgZnVsbCBwaWxldXAuXG4gICAgLy8gQWRkaW5nIGEgdmVydGljYWwgc2Nyb2xsYmFyIHNocmlua3MgdGhlIHZpc2libGUgYXJlYSwgYnV0IHdlIGhhdmUgdG8gYWN0XG4gICAgLy8gYXMgdGhvdWdoIGl0IGRvZXNuJ3QsIHNpbmNlIGFkanVzdGluZyB0aGUgc2NhbGUgd291bGQgcHV0IGl0IG91dCBvZiBzeW5jXG4gICAgLy8gd2l0aCBvdGhlciB0cmFja3MuXG4gICAgdmFyIGNvbnRhaW5lclN0eWxlcyA9IHtcbiAgICAgICdoZWlnaHQnOiAnMTAwJSdcbiAgICB9O1xuXG4gICAgdmFyIHN0YXR1c0VsID0gbnVsbCxcbiAgICAgICAgbmV0d29ya1N0YXR1cyA9IHRoaXMuc3RhdGUubmV0d29ya1N0YXR1cztcbiAgICBpZiAobmV0d29ya1N0YXR1cykge1xuICAgICAgc3RhdHVzRWwgPSAoXG4gICAgICAgIDxkaXYgcmVmPSdzdGF0dXMnIGNsYXNzTmFtZT0nbmV0d29yay1zdGF0dXMtc21hbGwnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSduZXR3b3JrLXN0YXR1cy1tZXNzYWdlLXNtYWxsJz5cbiAgICAgICAgICAgIExvYWRpbmcgZmVhdHVyZXPigKZcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgICB2YXIgcmFuZ2VMZW5ndGggPSB0aGlzLnByb3BzLnJhbmdlLnN0b3AgLSB0aGlzLnByb3BzLnJhbmdlLnN0YXJ0O1xuICAgIC8vIElmIHJhbmdlIGlzIHRvbyBsYXJnZSwgZG8gbm90IHJlbmRlciAnY2FudmFzJ1xuICAgIGlmIChyYW5nZUxlbmd0aCA+IFJlbW90ZVJlcXVlc3QuTU9OU1RFUl9SRVFVRVNUKSB7XG4gICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjZW50ZXInPlxuICAgICAgICAgICAgICBab29tIGluIHRvIHNlZSBmZWF0dXJlc1xuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8Y2FudmFzIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKX0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIHtzdGF0dXNFbH1cbiAgICAgICAgICA8ZGl2IHJlZj0nY29udGFpbmVyJyBzdHlsZT17Y29udGFpbmVyU3R5bGVzfT5cbiAgICAgICAgICAgIDxjYW52YXMgcmVmPSdjYW52YXMnIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKX0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuY2FjaGUgPSBuZXcgR2VuZXJpY0ZlYXR1cmVDYWNoZSh0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZSk7XG4gICAgdGhpcy50aWxlcyA9IG5ldyBGZWF0dXJlVGlsZWRDYW52YXModGhpcy5wcm9wcy5zb3VyY2UsIHRoaXMuY2FjaGUsIHRoaXMucHJvcHMub3B0aW9ucyk7XG5cbiAgICAvLyBWaXN1YWxpemUgbmV3IHJlZmVyZW5jZSBkYXRhIGFzIGl0IGNvbWVzIGluIGZyb20gdGhlIG5ldHdvcmsuXG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ld2RhdGEnLCAocmFuZ2UpID0+IHtcbiAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZVJhbmdlKHJhbmdlKTtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLm9uKCduZXdkYXRhJywgcmFuZ2UgPT4ge1xuICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlUmFuZ2UocmFuZ2UpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ldHdvcmtwcm9ncmVzcycsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogZX0pO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrZG9uZScsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogbnVsbH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICBpZiAoIXNoYWxsb3dFcXVhbHModGhpcy5wcm9wcywgcHJldlByb3BzKSB8fFxuICAgICAgICAhc2hhbGxvd0VxdWFscyh0aGlzLnN0YXRlLCBwcmV2U3RhdGUpKSB7XG4gICAgICAgIHRoaXMudGlsZXMudXBkYXRlKHRoaXMucHJvcHMub3B0aW9ucyk7XG4gICAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KSxcbiAgICAgICAgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgICBnZW5vbWVSYW5nZSA9IHRoaXMucHJvcHMucmFuZ2U7XG5cbiAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoZ2Vub21lUmFuZ2UuY29udGlnLCBnZW5vbWVSYW5nZS5zdGFydCwgZ2Vub21lUmFuZ2Uuc3RvcCk7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwIHx8IHR5cGVvZiBjYW52YXMgPT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcblxuICAgIHZhciBjdHggPSBkYXRhQ2FudmFzLmdldERhdGFDb250ZXh0KGNhbnZhc1V0aWxzLmdldENvbnRleHQoY2FudmFzKSk7XG5cblxuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgLy8gZ2V0IHBhcmVudCBvZiBjYW52YXNcbiAgICAvLyBUaGUgdHlwZWNhc3RzIHRocm91Z2ggYGFueWAgYXJlIHRvIGZvb2wgZmxvdy5cbiAgICB2YXIgcGFyZW50ID0gKChkM3V0aWxzLmZpbmRQYXJlbnQoY2FudmFzLCBcImZlYXR1cmVzXCIpIDogYW55KSA6IEhUTUxDYW52YXNFbGVtZW50KTtcbiAgICBcbiAgICAvLyBIZWlnaHQgY2FuIG9ubHkgYmUgY29tcHV0ZWQgYWZ0ZXIgdGhlIHBpbGV1cCBoYXMgYmVlbiB1cGRhdGVkLlxuICAgIHZhciBoZWlnaHQgPSB5Rm9yUm93KHRoaXMuY2FjaGUucGlsZXVwSGVpZ2h0Rm9yUmVmKHRoaXMucHJvcHMucmFuZ2UuY29udGlnKSk7XG5cbiAgICAvLyByZXNpemUgaGVpZ2h0IGZvciBkZXZpY2VcbiAgICBoZWlnaHQgPSBkM3V0aWxzLmhlaWdodEZvckNhbnZhcyhjYW52YXMsIGhlaWdodCk7XG5cbiAgICAvLyBzZXQgaGVpZ2h0IGZvciBwYXJlbnQgZGl2IHRvIGluY2x1ZGUgYWxsIGZlYXR1cmVzXG4gICAgaWYgKHBhcmVudCkgcGFyZW50LnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG5cbiAgICBkM3V0aWxzLnNpemVDYW52YXMoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTsgIFxuXG4gICAgdGhpcy50aWxlcy5yZW5kZXJUb1NjcmVlbihjdHgsIHJhbmdlLCB0aGlzLmdldFNjYWxlKCkpO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2socmVhY3RFdmVudDogYW55KSB7XG4gICAgdmFyIHJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgdmFyIGV2ID0gcmVhY3RFdmVudC5uYXRpdmVFdmVudCxcbiAgICAgICAgeCA9IGV2Lm9mZnNldFgsIC8vIHJlc2l6ZSBvZmZzZXQgdG8gY2FudmFzIHNpemVcbiAgICAgICAgeSA9IGV2Lm9mZnNldFkvcmF0aW87XG5cbiAgICB2YXIgY3R4ID0gY2FudmFzVXRpbHMuZ2V0Q29udGV4dCh0aGlzLnJlZnMuY2FudmFzKTtcbiAgICB2YXIgdHJhY2tpbmdDdHggPSBuZXcgZGF0YUNhbnZhcy5DbGlja1RyYWNraW5nQ29udGV4dChjdHgsIHgsIHkpO1xuXG4gICAgdmFyIGdlbm9tZVJhbmdlID0gdGhpcy5wcm9wcy5yYW5nZSxcbiAgICAgICAgLy8gYWxsb3cgc29tZSBidWZmZXJpbmcgc28gY2xpY2sgaXNuJ3Qgc28gc2Vuc2l0aXZlXG4gICAgICAgIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKGdlbm9tZVJhbmdlLmNvbnRpZywgZ2Vub21lUmFuZ2Uuc3RhcnQtMSwgZ2Vub21lUmFuZ2Uuc3RvcCsxKSxcbiAgICAgICAgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCksXG4gICAgICAgIHZGZWF0dXJlcyA9IHRoaXMuY2FjaGUuZ2V0R3JvdXBzT3ZlcmxhcHBpbmcocmFuZ2UpO1xuXG4gICAgcmVuZGVyRmVhdHVyZXModHJhY2tpbmdDdHgsIHNjYWxlLCByYW5nZSwgdkZlYXR1cmVzKTtcbiAgICB2YXIgZmVhdHVyZSA9IF8uZmluZCh0cmFja2luZ0N0eC5oaXRzWzBdLCBoaXQgPT4gaGl0KTtcblxuICAgIGlmIChmZWF0dXJlKSB7XG4gICAgICAvL3VzZXIgcHJvdmlkZWQgZnVuY3Rpb24gZm9yIGRpc3BsYXlpbmcgcG9wdXBcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5vcHRpb25zLm9uRmVhdHVyZUNsaWNrZWQgID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLm9uRmVhdHVyZUNsaWNrZWQoZmVhdHVyZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYWxlcnQgPSB3aW5kb3cuYWxlcnQgfHwgY29uc29sZS5sb2c7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhIEpTT04gb2JqZWN0IHRvIHNob3cgdGhlIHVzZXIuXG4gICAgICAgIHZhciBtZXNzYWdlT2JqZWN0ID0gXy5leHRlbmQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgJ2lkJzogICAgIGZlYXR1cmUuaWQsXG4gICAgICAgICAgICAncmFuZ2UnOiAgYCR7ZmVhdHVyZS5wb3NpdGlvbi5jb250aWd9OiR7ZmVhdHVyZS5wb3NpdGlvbi5zdGFydCgpfS0ke2ZlYXR1cmUucG9zaXRpb24uc3RvcCgpfWAsXG4gICAgICAgICAgICAnc2NvcmUnOiAgZmVhdHVyZS5zY29yZVxuICAgICAgICAgIH0pO1xuICAgICAgICBhbGVydChKU09OLnN0cmluZ2lmeShtZXNzYWdlT2JqZWN0LCBudWxsLCAnICAnKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkZlYXR1cmVUcmFjay5kaXNwbGF5TmFtZSA9ICdmZWF0dXJlcyc7XG5cbm1vZHVsZS5leHBvcnRzID0gRmVhdHVyZVRyYWNrO1xuIiwiLyoqXG4gKiBWaXN1YWxpemF0aW9uIG9mIGdlbmVzLCBpbmNsdWRpbmcgZXhvbnMgYW5kIGNvZGluZyByZWdpb25zLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7U3RyYW5kfSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuaW1wb3J0IHR5cGUge0dlbmUsIEJpZ0JlZFNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9CaWdCZWREYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuaW1wb3J0IHR5cGUge1NjYWxlfSBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHR5cGUge1N0YXRlfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCBHZW5lcmljRmVhdHVyZSBmcm9tICcuLi9kYXRhL2dlbmVyaWNGZWF0dXJlJztcbmltcG9ydCB7R2VuZXJpY0ZlYXR1cmVDYWNoZX0gZnJvbSAnLi9HZW5lcmljRmVhdHVyZUNhY2hlJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgc2hhbGxvd0VxdWFscyBmcm9tICdzaGFsbG93LWVxdWFscyc7XG5cbmltcG9ydCBiZWR0b29scyBmcm9tICcuLi9kYXRhL2JlZHRvb2xzJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHNjYWxlIGZyb20gJy4uL3NjYWxlJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHN0eWxlIGZyb20gJy4uL3N0eWxlJztcblxuXG4vLyBEcmF3IGFuIGFycm93IGluIHRoZSBtaWRkbGUgb2YgdGhlIHZpc2libGUgcG9ydGlvbiBvZiByYW5nZS5cbmZ1bmN0aW9uIGRyYXdBcnJvdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICBjbGFtcGVkU2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICAgICAgICAgICAgcmFuZ2U6IEludGVydmFsLFxuICAgICAgICAgICAgICAgICAgIHRpcFk6IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICBzdHJhbmQ6IFN0cmFuZCkge1xuICB2YXIgeDEgPSBjbGFtcGVkU2NhbGUoMSArIHJhbmdlLnN0YXJ0KSxcbiAgICAgIHgyID0gY2xhbXBlZFNjYWxlKDEgKyByYW5nZS5zdG9wKTtcblxuICAvLyBpdCdzIG9mZi1zY3JlZW4gb3IgdGhlcmUncyBub3QgZW5vdWdoIHJvb20gdG8gZHJhdyBpdCBsZWdpYmx5LlxuICBpZiAoeDIgLSB4MSA8PSAyICogc3R5bGUuR0VORV9BUlJPV19TSVpFKSByZXR1cm47XG5cbiAgdmFyIGN4ID0gKHgxICsgeDIpIC8gMjtcbiAgY3R4LmJlZ2luUGF0aCgpO1xuICBpZiAoc3RyYW5kID09ICctJykge1xuICAgIGN0eC5tb3ZlVG8oY3ggKyBzdHlsZS5HRU5FX0FSUk9XX1NJWkUsIHRpcFkgLSBzdHlsZS5HRU5FX0FSUk9XX1NJWkUpO1xuICAgIGN0eC5saW5lVG8oY3gsIHRpcFkpO1xuICAgIGN0eC5saW5lVG8oY3ggKyBzdHlsZS5HRU5FX0FSUk9XX1NJWkUsIHRpcFkgKyBzdHlsZS5HRU5FX0FSUk9XX1NJWkUpO1xuICB9IGVsc2Uge1xuICAgIGN0eC5tb3ZlVG8oY3ggLSBzdHlsZS5HRU5FX0FSUk9XX1NJWkUsIHRpcFkgLSBzdHlsZS5HRU5FX0FSUk9XX1NJWkUpO1xuICAgIGN0eC5saW5lVG8oY3gsIHRpcFkpO1xuICAgIGN0eC5saW5lVG8oY3ggLSBzdHlsZS5HRU5FX0FSUk9XX1NJWkUsIHRpcFkgKyBzdHlsZS5HRU5FX0FSUk9XX1NJWkUpO1xuICB9XG4gIGN0eC5zdHJva2UoKTtcbn1cblxuZnVuY3Rpb24gZHJhd0dlbmVOYW1lKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgICAgICAgICAgICAgIGNsYW1wZWRTY2FsZTogKHg6IG51bWJlcik9Pm51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICBnZW5lTGluZVk6IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICBnZW5lOiBHZW5lLFxuICAgICAgICAgICAgICAgICAgICAgIHRleHRJbnRlcnZhbHM6IEludGVydmFsW10pIHtcbiAgdmFyIHAgPSBnZW5lLnBvc2l0aW9uLFxuICAgICAgY2VudGVyWCA9IDAuNSAqIChjbGFtcGVkU2NhbGUoMSArIHAuc3RhcnQoKSkgKyBjbGFtcGVkU2NhbGUoMSArIHAuc3RvcCgpKSk7XG4gIHZhciBuYW1lID0gZ2VuZS5uYW1lIHx8IGdlbmUuaWQ7XG4gIHZhciB0ZXh0V2lkdGggPSBjdHgubWVhc3VyZVRleHQobmFtZSkud2lkdGg7XG4gIHZhciB0ZXh0SW50ZXJ2YWwgPSBuZXcgSW50ZXJ2YWwoY2VudGVyWCAtIDAuNSAqIHRleHRXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJYICsgMC41ICogdGV4dFdpZHRoKTtcbiAgaWYgKCFfLmFueSh0ZXh0SW50ZXJ2YWxzLCBpdiA9PiB0ZXh0SW50ZXJ2YWwuaW50ZXJzZWN0cyhpdikpKSB7XG4gICAgdGV4dEludGVydmFscy5wdXNoKHRleHRJbnRlcnZhbCk7XG4gICAgdmFyIGJhc2VsaW5lWSA9IGdlbmVMaW5lWSArIHN0eWxlLkdFTkVfRk9OVF9TSVpFICsgc3R5bGUuR0VORV9URVhUX1BBRERJTkc7XG4gICAgY3R4LmZpbGxUZXh0KG5hbWUsIGNlbnRlclgsIGJhc2VsaW5lWSk7XG4gIH1cbn1cblxuY2xhc3MgR2VuZVRyYWNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFZpelByb3BzPEJpZ0JlZFNvdXJjZT4sIFN0YXRlPiB7XG4gIHByb3BzOiBWaXpQcm9wczxCaWdCZWRTb3VyY2U+O1xuICBzdGF0ZTogU3RhdGU7XG4gIGNhY2hlOiBHZW5lcmljRmVhdHVyZUNhY2hlO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBWaXpQcm9wczxCaWdCZWRTb3VyY2U+KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgcmV0dXJuIDxjYW52YXMgLz47XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmNhY2hlID0gbmV3IEdlbmVyaWNGZWF0dXJlQ2FjaGUodGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2UpO1xuICAgICAgLy8gVmlzdWFsaXplIG5ldyByZWZlcmVuY2UgZGF0YSBhcyBpdCBjb21lcyBpbiBmcm9tIHRoZSBuZXR3b3JrLlxuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXdkYXRhJywgKHJhbmdlKSA9PiB7XG4gICAgICAvLyBhZGQgZ2VuZXMgdG8gZ2VuZXJpYyBjYWNoZVxuICAgICAgdmFyIGdlbmVzID0gdGhpcy5wcm9wcy5zb3VyY2UuZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlKTtcbiAgICAgIGdlbmVzLmZvckVhY2goZiA9PiB0aGlzLmNhY2hlLmFkZEZlYXR1cmUobmV3IEdlbmVyaWNGZWF0dXJlKGYuaWQsIGYucG9zaXRpb24sIGYpKSk7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5vbignbmV3ZGF0YScsIHJhbmdlID0+IHtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrcHJvZ3Jlc3MnLCBlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe25ldHdvcmtTdGF0dXM6IGV9KTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV0d29ya2RvbmUnLCBlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe25ldHdvcmtTdGF0dXM6IG51bGx9KTtcbiAgICB9KTtcblxuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHRoaXMucHJvcHMsIHByZXZQcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHModGhpcy5zdGF0ZSwgcHJldlN0YXRlKSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKSxcbiAgICAgICAge3dpZHRoLCBoZWlnaHR9ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgZ2Vub21lUmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlO1xuXG4gICAgdmFyIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKGdlbm9tZVJhbmdlLmNvbnRpZywgZ2Vub21lUmFuZ2Uuc3RhcnQsIGdlbm9tZVJhbmdlLnN0b3ApO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgaGVpZ2h0ICYgd2lkdGggYXJlIGtub3duLlxuICAgIGlmICh3aWR0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgdmFyIHNjID0gdGhpcy5nZXRTY2FsZSgpLFxuICAgICAgICAvLyBXZSBjYW4ndCBjbGFtcCBzY2FsZSBkaXJlY3RseSBiZWNhdXNlIG9mIG9mZnNldFB4LlxuICAgICAgICBjbGFtcGVkU2NhbGUgPSBzY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgLmRvbWFpbihbc2MuaW52ZXJ0KDApLCBzYy5pbnZlcnQod2lkdGgpXSlcbiAgICAgICAgICAgIC5yYW5nZShbMCwgd2lkdGhdKVxuICAgICAgICAgICAgLmNsYW1wKHRydWUpO1xuXG5cblxuICAgIGlmIChjYW52YXMgJiYgY2FudmFzIGluc3RhbmNlb2YgRWxlbWVudCkgeyAvLyBjaGVjayBmb3IgZ2V0Q29udGV4dFxuICAgICAgaWYgKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7IC8vIGNoZWNrIGZvciBzaXplQ2FudmFzXG4gICAgICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgfVxuICAgICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpKTtcblxuICAgICAgY3R4LnJlc2V0KCk7XG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcblxuICAgICAgdmFyIGdlbmVMaW5lWSA9IE1hdGgucm91bmQoaGVpZ2h0IC8gNCk7XG4gICAgICB2YXIgdGV4dEludGVydmFscyA9IFtdOyAgLy8geC1pbnRlcnZhbHMgd2l0aCByZW5kZXJlZCBnZW5lIG5hbWVzLCB0byBhdm9pZCBvdmVyLWRyYXdpbmcuXG4gICAgICBjdHguZm9udCA9IGAke3N0eWxlLkdFTkVfRk9OVF9TSVpFfXB4ICR7c3R5bGUuR0VORV9GT05UfWA7XG4gICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICB2YXIgdkZlYXR1cmVzID0gXy5mbGF0dGVuKF8ubWFwKHRoaXMuY2FjaGUuZ2V0R3JvdXBzT3ZlcmxhcHBpbmcocmFuZ2UpLFxuICAgICAgICAgICAgICAgICAgICBnID0+IGcuaXRlbXMpKTtcblxuICAgICAgdkZlYXR1cmVzLmZvckVhY2godkZlYXR1cmUgPT4ge1xuICAgICAgICB2YXIgZ2VuZSA9IHZGZWF0dXJlLmdGZWF0dXJlO1xuICAgICAgICBpZiAoIWdlbmUucG9zaXRpb24uaW50ZXJzZWN0cyhyYW5nZSkpIHJldHVybjtcbiAgICAgICAgY3R4LnB1c2hPYmplY3QoZ2VuZSk7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSAxO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHlsZS5HRU5FX0NPTE9SO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuR0VORV9DT0xPUjtcblxuICAgICAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIGNsYW1wZWRTY2FsZSgxICsgZ2VuZS5wb3NpdGlvbi5zdGFydCgpKSwgZ2VuZUxpbmVZICsgMC41LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYW1wZWRTY2FsZSgxICsgZ2VuZS5wb3NpdGlvbi5zdG9wKCkpLCBnZW5lTGluZVkgKyAwLjUpO1xuXG4gICAgICAgIC8vIFRPRE86IG9ubHkgY29tcHV0ZSBhbGwgdGhlc2UgaW50ZXJ2YWxzIHdoZW4gZGF0YSBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICAgICAgdmFyIGV4b25zID0gYmVkdG9vbHMuc3BsaXRDb2RpbmdFeG9ucyhnZW5lLmV4b25zLCBnZW5lLmNvZGluZ1JlZ2lvbik7XG4gICAgICAgIGV4b25zLmZvckVhY2goZXhvbiA9PiB7XG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHNjKDEgKyBleG9uLnN0YXJ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgZ2VuZUxpbmVZIC0gMyAqIChleG9uLmlzQ29kaW5nID8gMiA6IDEpLFxuICAgICAgICAgICAgICAgICAgICAgICBzYyhleG9uLnN0b3AgKyAyKSAtIHNjKDEgKyBleG9uLnN0YXJ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgNiAqIChleG9uLmlzQ29kaW5nID8gMiA6IDEpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGludHJvbnMgPSBnZW5lLnBvc2l0aW9uLmludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMoZ2VuZS5leG9ucyk7XG4gICAgICAgIGludHJvbnMuZm9yRWFjaChyYW5nZSA9PiB7XG4gICAgICAgICAgZHJhd0Fycm93KGN0eCwgY2xhbXBlZFNjYWxlLCByYW5nZSwgZ2VuZUxpbmVZICsgMC41LCBnZW5lLnN0cmFuZCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHlsZS5HRU5FX0NPTVBMRU1FTlRfQ09MT1I7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgICBnZW5lLmV4b25zLmZvckVhY2gocmFuZ2UgPT4ge1xuICAgICAgICAgIGRyYXdBcnJvdyhjdHgsIGNsYW1wZWRTY2FsZSwgcmFuZ2UsIGdlbmVMaW5lWSArIDAuNSwgZ2VuZS5zdHJhbmQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkcmF3R2VuZU5hbWUoY3R4LCBjbGFtcGVkU2NhbGUsIGdlbmVMaW5lWSwgZ2VuZSwgdGV4dEludGVydmFscyk7XG5cbiAgICAgICAgY3R4LnBvcE9iamVjdCgpO1xuICAgICAgfSk7XG4gICAgfSAvLyBlbmQgdHlwZWNoZWNrIGZvciBjYW52YXPDn1xuICB9XG59XG5cbkdlbmVUcmFjay5kaXNwbGF5TmFtZSA9ICdnZW5lcyc7XG5cbm1vZHVsZS5leHBvcnRzID0gR2VuZVRyYWNrO1xuIiwiLyoqXG4gKiBEYXRhIG1hbmFnZW1lbnQgZm9yIEZlYXR1cmVUcmFjay5cbiAqXG4gKiBUaGlzIGNsYXNzIGdyb3VwcyBmZWF0dXJlcyBhbmQgcGlsZXMgdGhlbSB1cC5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG4vKmpzaGludCB1bnVzZWQ6ZmFsc2UgKi9cbmltcG9ydCBHZW5lcmljRmVhdHVyZSBmcm9tICcuLi9kYXRhL2dlbmVyaWNGZWF0dXJlLmpzJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5cbmltcG9ydCB7YWRkVG9QaWxldXB9IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuaW1wb3J0IHR5cGUge1R3b0JpdFNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9Ud29CaXREYXRhU291cmNlJztcbmltcG9ydCBBYnN0cmFjdENhY2hlIGZyb20gJy4vQWJzdHJhY3RDYWNoZSc7XG5pbXBvcnQgdHlwZSB7VmlzdWFsR3JvdXB9IGZyb20gJy4vQWJzdHJhY3RDYWNoZSc7XG5cbi8vIFRoaXMgY2xhc3MgcHJvdmlkZXMgZGF0YSBtYW5hZ2VtZW50IGZvciB0aGUgdmlzdWFsaXphdGlvblxuY2xhc3MgR2VuZXJpY0ZlYXR1cmVDYWNoZSBleHRlbmRzIEFic3RyYWN0Q2FjaGU8R2VuZXJpY0ZlYXR1cmU+IHtcbiAgLy8gbWFwcyBncm91cEtleSB0byBWaXN1YWxHcm91cFxuICBncm91cHM6IHtba2V5OiBzdHJpbmddOiBWaXN1YWxHcm91cDxHZW5lcmljRmVhdHVyZT59O1xuICByZWZUb1BpbGV1cDoge1trZXk6IHN0cmluZ106IEFycmF5PEludGVydmFsW10+fTtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG5cbiAgY29uc3RydWN0b3IocmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2UpIHtcbiAgICBzdXBlcihyZWZlcmVuY2VTb3VyY2UpO1xuICB9XG5cbiAgLy8gbmFtZSB3b3VsZCBtYWtlIGEgZ29vZCBrZXksIGJ1dCBmZWF0dXJlcyBmcm9tIGRpZmZlcmVudCBjb250aWdzXG4gIC8vIHNob3VsZG4ndCBiZSBncm91cGVkIHZpc3VhbGx5LiBIZW5jZSB3ZSB1c2UgZmVhdHVyZSBuYW1lICsgY29udGlnLlxuICBncm91cEtleShmOiBHZW5lcmljRmVhdHVyZSk6IHN0cmluZyB7XG4gICAgICByZXR1cm4gZi5pZCB8fCBmLnBvc2l0aW9uLnRvU3RyaW5nKCk7XG4gIH1cblxuICAvLyBMb2FkIGEgbmV3IGZlYXR1cmUgaW50byB0aGUgdmlzdWFsaXphdGlvbiBjYWNoZS5cbiAgLy8gQ2FsbGluZyB0aGlzIG11bHRpcGxlIHRpbWVzIHdpdGggdGhlIHNhbWUgZmVhdHVyZSBpcyBhIG5vLW9wLlxuICBhZGRGZWF0dXJlKGZlYXR1cmU6IEdlbmVyaWNGZWF0dXJlKSB7XG4gICAgdmFyIGtleSA9IHRoaXMuZ3JvdXBLZXkoZmVhdHVyZSk7XG5cbiAgICBpZiAoIShrZXkgaW4gdGhpcy5ncm91cHMpKSB7XG4gICAgICB0aGlzLmdyb3Vwc1trZXldID0ge1xuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgc3BhbjogZmVhdHVyZS5wb3NpdGlvbixcbiAgICAgICAgcm93OiAtMSwgIC8vIFRCRFxuICAgICAgICBpbnNlcnQ6IG51bGwsXG4gICAgICAgIGl0ZW1zOiBbXVxuICAgICAgfTtcbiAgICB9XG4gICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cHNba2V5XTtcblxuICAgIGlmIChfLmZpbmQoZ3JvdXAuaXRlbXMsIGYgPT4gZi5nRmVhdHVyZSA9PSBmZWF0dXJlLmdGZWF0dXJlKSkge1xuICAgICAgcmV0dXJuOyAgLy8gd2UndmUgYWxyZWFkeSBnb3QgaXQuXG4gICAgfVxuXG4gICAgZ3JvdXAuaXRlbXMucHVzaChmZWF0dXJlKTtcblxuICAgIGlmICghKGZlYXR1cmUucG9zaXRpb24uY29udGlnIGluIHRoaXMucmVmVG9QaWxldXApKSB7XG4gICAgICB0aGlzLnJlZlRvUGlsZXVwW2ZlYXR1cmUucG9zaXRpb24uY29udGlnXSA9IFtdO1xuICAgIH1cbiAgICB2YXIgcGlsZXVwID0gdGhpcy5yZWZUb1BpbGV1cFtmZWF0dXJlLnBvc2l0aW9uLmNvbnRpZ107XG4gICAgZ3JvdXAucm93ID0gYWRkVG9QaWxldXAoZ3JvdXAuc3Bhbi5pbnRlcnZhbCwgcGlsZXVwKTtcbiAgIFxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBHZW5lcmljRmVhdHVyZUNhY2hlXG59O1xuIiwiLyoqXG4gKiBBIHRyYWNrIHdoaWNoIGRpc3BsYXlzIGEgcmVmZXJlbmNlIGdlbm9tZS5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge0RhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IHR5cGUge1N0YXRlfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCBEaXNwbGF5TW9kZSBmcm9tICcuL0Rpc3BsYXlNb2RlJztcbmltcG9ydCBUaWxlZENhbnZhcyBmcm9tICcuL1RpbGVkQ2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5cblxuZnVuY3Rpb24gcmVuZGVyR2Vub21lKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgICAgYmFzZVBhaXJzOiBzdHJpbmcpIHtcbiAgdmFyIHB4UGVyTGV0dGVyID0gc2NhbGUoMSkgLSBzY2FsZSgwKTtcbiAgdmFyIG1vZGUgPSBEaXNwbGF5TW9kZS5nZXREaXNwbGF5TW9kZShweFBlckxldHRlcik7XG4gIHZhciBzaG93VGV4dCA9IERpc3BsYXlNb2RlLmlzVGV4dChtb2RlKTtcblxuICBpZiAobW9kZSAhPSBEaXNwbGF5TW9kZS5ISURERU4pIHtcbiAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgaWYgKG1vZGUgPT0gRGlzcGxheU1vZGUuTE9PU0UpIHtcbiAgICAgIGN0eC5mb250ID0gc3R5bGUuTE9PU0VfVEVYVF9TVFlMRTtcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT0gRGlzcGxheU1vZGUuVElHSFQpIHtcbiAgICAgIGN0eC5mb250ID0gc3R5bGUuVElHSFRfVEVYVF9TVFlMRTtcbiAgICB9XG5cbiAgICB2YXIgcHJldmlvdXNCYXNlID0gbnVsbDtcbiAgICB2YXIgc3RhcnQgPSByYW5nZS5zdGFydCgpLFxuICAgICAgICBzdG9wID0gcmFuZ2Uuc3RvcCgpO1xuICAgIGZvciAodmFyIHBvcyA9IHN0YXJ0OyBwb3MgPD0gc3RvcDsgcG9zKyspIHtcbiAgICAgIHZhciBsZXR0ZXIgPSBiYXNlUGFpcnNbcG9zIC0gc3RhcnRdO1xuICAgICAgaWYgKGxldHRlciA9PSAnLicpIGNvbnRpbnVlOyAgLy8gbm90IHlldCBrbm93blxuXG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LnB1c2hPYmplY3Qoe3BvcywgbGV0dGVyfSk7XG4gICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQkFTRV9DT0xPUlNbbGV0dGVyXTtcbiAgICAgIGlmIChzaG93VGV4dCkge1xuICAgICAgICAvLyBXZSBvbmx5IHB1c2ggb2JqZWN0cyBpbiB0aGUgdGV4dCBjYXNlIGFzIGl0IGludm9sdmVzIGNyZWF0aW5nIGFcbiAgICAgICAgLy8gbmV3IG9iamVjdCAmIGNhbiBiZWNvbWUgYSBwZXJmb3JtYW5jZSBpc3N1ZS5cbiAgICAgICAgLy8gMC41ID0gY2VudGVyZWRcbiAgICAgICAgY3R4LmZpbGxUZXh0KGxldHRlciwgc2NhbGUoMSArIDAuNSArIHBvcyksIGhlaWdodCAtIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHB4UGVyTGV0dGVyID49IHN0eWxlLkNPVkVSQUdFX01JTl9CQVJfV0lEVEhfRk9SX0dBUCkge1xuICAgICAgICAgIC8vIFdlIHdhbnQgYSB3aGl0ZSBzcGFjZSBiZXR3ZWVuIGJsb2NrcyBhdCB0aGlzIHNpemUsIHNvIHdlIGNhbiBzZWVcbiAgICAgICAgICAvLyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIGJhc2VzLlxuICAgICAgICAgIGN0eC5maWxsUmVjdChzY2FsZSgxICsgcG9zKSArIDAuNSwgMCwgIHB4UGVyTGV0dGVyIC0gMS41LCBoZWlnaHQpO1xuICAgICAgICB9IGVsc2UgaWYgKHByZXZpb3VzQmFzZSA9PT0gbGV0dGVyKSB7XG4gICAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB3YW50IHJ1bnMgb2YgY29sb3JzIHRvIGJlIGNvbXBsZXRlbHkgc29saWQgLi4uXG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHNjYWxlKDEgKyBwb3MpIC0gMS41LCAwLCBweFBlckxldHRlciArIDEuNSwgaGVpZ2h0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyAuLi4gYW5kIG1pbmltaXplIHRoZSBhbW91bnQgb2Ygc211ZGdpbmcgYW5kIHdoaXRlc3BhY2UgYmV0d2VlblxuICAgICAgICAgIC8vIGJhc2VzLlxuICAgICAgICAgIGN0eC5maWxsUmVjdChzY2FsZSgxICsgcG9zKSAtIDAuNSwgMCwgIHB4UGVyTGV0dGVyICsgMS41LCBoZWlnaHQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICBwcmV2aW91c0Jhc2UgPSBsZXR0ZXI7XG4gICAgfVxuICB9XG59XG5cblxuY2xhc3MgR2Vub21lVGlsZWRDYW52YXMgZXh0ZW5kcyBUaWxlZENhbnZhcyB7XG4gIHNvdXJjZTogVHdvQml0U291cmNlO1xuICBoZWlnaHQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6IFR3b0JpdFNvdXJjZSwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIC8vIHdvcmthcm91bmQgZm9yIGFuIGlzc3VlIGluIFBoYW50b21KUyB3aGVyZSBoZWlnaHQgYWx3YXlzIGNvbWVzIG91dCB0byB6ZXJvLlxuICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgoMSwgaGVpZ2h0KTtcbiAgfVxuXG4gIHJlbmRlcihjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICBzY2FsZTogKHg6IG51bWJlcik9Pm51bWJlcixcbiAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgLy8gVGhlICsvLTEgZW5zdXJlcyB0aGF0IHBhcnRpYWxseS12aXNpYmxlIGJhc2VzIG9uIHRoZSBlZGdlIGFyZSByZW5kZXJlZC5cbiAgICB2YXIgZ2Vub21lUmFuZ2UgPSB7XG4gICAgICBjb250aWc6IHJhbmdlLmNvbnRpZyxcbiAgICAgIHN0YXJ0OiBNYXRoLm1heCgwLCByYW5nZS5zdGFydCgpIC0gMSksXG4gICAgICBzdG9wOiByYW5nZS5zdG9wKCkgKyAxXG4gICAgfTtcbiAgICB2YXIgYmFzZVBhaXJzID0gdGhpcy5zb3VyY2UuZ2V0UmFuZ2VBc1N0cmluZyhnZW5vbWVSYW5nZSk7XG4gICAgcmVuZGVyR2Vub21lKGN0eCwgc2NhbGUsIHRoaXMuaGVpZ2h0LCBDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UoZ2Vub21lUmFuZ2UpLCBiYXNlUGFpcnMpO1xuICB9XG5cbiAgaGVpZ2h0Rm9yUmVmKHJlZjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5oZWlnaHQ7XG4gIH1cblxuICB1cGRhdGVIZWlnaHQoaGVpZ2h0OiBudW1iZXIpIHtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgfVxufVxuXG5jbGFzcyBHZW5vbWVUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxWaXpQcm9wczxUd29CaXRTb3VyY2U+LCBTdGF0ZT4ge1xuICBwcm9wczogVml6UHJvcHM8VHdvQml0U291cmNlPjtcbiAgc3RhdGU6IFN0YXRlOyAgLy8gbm8gc3RhdGUsIHVzZWQgdG8gbWFrZSBmbG93IGhhcHB5XG4gIHRpbGVzOiBHZW5vbWVUaWxlZENhbnZhcztcblxuICByZW5kZXIoKTogYW55IHtcbiAgICByZXR1cm4gPGNhbnZhcyAvPjtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMudGlsZXMgPSBuZXcgR2Vub21lVGlsZWRDYW52YXModGhpcy5wcm9wcy5zb3VyY2UsIHRoaXMucHJvcHMuaGVpZ2h0KTtcblxuICAgIC8vIFZpc3VhbGl6ZSBuZXcgcmVmZXJlbmNlIGRhdGEgYXMgaXQgY29tZXMgaW4gZnJvbSB0aGUgbmV0d29yay5cbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV3ZGF0YScsIHJhbmdlID0+IHtcbiAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZVJhbmdlKHJhbmdlKTtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICBpZiAoIXNoYWxsb3dFcXVhbHMocHJldlByb3BzLCB0aGlzLnByb3BzKSB8fFxuICAgICAgICAhc2hhbGxvd0VxdWFscyhwcmV2U3RhdGUsIHRoaXMuc3RhdGUpKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5oZWlnaHQgIT0gcHJldlByb3BzLmhlaWdodCkge1xuICAgICAgICB0aGlzLnRpbGVzLnVwZGF0ZUhlaWdodCh0aGlzLnByb3BzLmhlaWdodCk7XG4gICAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyksXG4gICAgICAgIHt3aWR0aCwgaGVpZ2h0LCByYW5nZX0gPSB0aGlzLnByb3BzO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgaGVpZ2h0ICYgd2lkdGggYXJlIGtub3duLlxuICAgIGlmICh3aWR0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgaWYgKGNhbnZhcyAmJiBjYW52YXMgaW5zdGFuY2VvZiBFbGVtZW50KSB7IC8vIGNoZWNrIGZvciBnZXRDb250ZXh0XG4gICAgICBpZiAoY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHsgLy8gY2hlY2sgZm9yIHNpemVDYW52YXNcbiAgICAgICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICB9XG4gICAgICB2YXIgY3R4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjYW52YXNVdGlscy5nZXRDb250ZXh0KGNhbnZhcykpO1xuXG4gICAgICBjdHgucmVzZXQoKTtcbiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuICAgICAgdGhpcy50aWxlcy5yZW5kZXJUb1NjcmVlbihjdHgsIENvbnRpZ0ludGVydmFsLmZyb21HZW5vbWVSYW5nZShyYW5nZSksIHRoaXMuZ2V0U2NhbGUoKSk7XG4gICAgfSAvLyBlbmQgdHlwZWNoZWNrIGZvciBjYW52YXNcbiAgfVxufVxuXG5HZW5vbWVUcmFjay5kaXNwbGF5TmFtZSA9ICdyZWZlcmVuY2UnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdlbm9tZVRyYWNrO1xuIiwiLyoqXG4gKiBBIHRyYWNrIHdoaWNoIHNob3dzIHRoZSBsb2NhdGlvbiBvZiB0aGUgYmFzZSBpbiB0aGUgbWlkZGxlIG9mIHRoZSB2aWV3LlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7Vml6UHJvcHN9IGZyb20gJy4uL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCB0eXBlIHtTdGF0ZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IEVtcHR5U291cmNlIGZyb20gJy4uL3NvdXJjZXMvRW1wdHlTb3VyY2UnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuXG5jbGFzcyBMb2NhdGlvblRyYWNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFZpelByb3BzPHZvaWQ+LCBTdGF0ZT4ge1xuICBwcm9wczogVml6UHJvcHM8dm9pZD47XG4gIHN0YXRlOiBTdGF0ZTsgIC8vIHN0YXRlIG5vdCB1c2VkLCBoZXJlIHRvIG1ha2UgZmxvdyBoYXBweVxuICBzdGF0aWMgZGVmYXVsdFNvdXJjZTogT2JqZWN0O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBWaXpQcm9wczx2b2lkPikge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgfVxuXG4gIGdldFNjYWxlKCk6IFNjYWxlIHtcbiAgICByZXR1cm4gZDN1dGlscy5nZXRUcmFja1NjYWxlKHRoaXMucHJvcHMucmFuZ2UsIHRoaXMucHJvcHMud2lkdGgpO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgcmV0dXJuIDxjYW52YXMgLz47XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgfVxuXG4gIHVwZGF0ZVZpc3VhbGl6YXRpb24oKSB7XG4gICAgdmFyIGNhbnZhcyA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLFxuICAgICAgICB7cmFuZ2UsIHdpZHRoLCBoZWlnaHR9ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCk7XG5cbiAgICBpZiAoY2FudmFzICYmIGNhbnZhcyBpbnN0YW5jZW9mIEVsZW1lbnQpIHsgLy8gY2hlY2sgZm9yIGdldENvbnRleHRcbiAgICAgIGlmIChjYW52YXMgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkgeyAvLyBjaGVjayBmb3Igc2l6ZUNhbnZhc1xuICAgICAgICBkM3V0aWxzLnNpemVDYW52YXMoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIH1cbiAgICAgIHZhciBjdHggPSBkYXRhQ2FudmFzLmdldERhdGFDb250ZXh0KGNhbnZhc1V0aWxzLmdldENvbnRleHQoY2FudmFzKSk7XG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LnJlc2V0KCk7XG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcblxuICAgICAgdmFyIG1pZFBvaW50ID0gTWF0aC5mbG9vcigocmFuZ2Uuc3RvcCArIHJhbmdlLnN0YXJ0KSAvIDIpLFxuICAgICAgICAgIHJpZ2h0TGluZVggPSBNYXRoLnJvdW5kKHNjYWxlKG1pZFBvaW50ICsgMSkpLFxuICAgICAgICAgIGxlZnRMaW5lWCA9IE1hdGgucm91bmQoc2NhbGUobWlkUG9pbnQpKTtcblxuICAgICAgLy8gTGVmdCBsaW5lXG4gICAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIGxlZnRMaW5lWCAtIDAuNSwgMCwgbGVmdExpbmVYIC0gMC41LCBoZWlnaHQpO1xuXG4gICAgICAvLyBSaWdodCBsaW5lXG4gICAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIHJpZ2h0TGluZVggLSAwLjUsIDAsIHJpZ2h0TGluZVggLSAwLjUsIGhlaWdodCk7XG5cbiAgICAgIC8vIE1pZCBsYWJlbFxuICAgICAgdmFyIG1pZFkgPSBoZWlnaHQgLyAyO1xuXG4gICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuTE9DX0ZPTlRfQ09MT1I7XG4gICAgICBjdHguZm9udCA9IHN0eWxlLkxPQ19GT05UX1NUWUxFO1xuICAgICAgY3R4LmZpbGxUZXh0KG1pZFBvaW50LnRvTG9jYWxlU3RyaW5nKCkgKyAnIGJwJyxcbiAgICAgICAgICAgICAgICAgICByaWdodExpbmVYICsgc3R5bGUuTE9DX1RJQ0tfTEVOR1RIICsgc3R5bGUuTE9DX1RFWFRfUEFERElORyxcbiAgICAgICAgICAgICAgICAgICBtaWRZICsgc3R5bGUuTE9DX1RFWFRfWV9PRkZTRVQpO1xuXG4gICAgICAvLyBDb25uZWN0IGxhYmVsIHdpdGggdGhlIHJpZ2h0IGxpbmVcbiAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgcmlnaHRMaW5lWCAtIDAuNSwgbWlkWSAtIDAuNSwgcmlnaHRMaW5lWCArIHN0eWxlLkxPQ19USUNLX0xFTkdUSCAtIDAuNSwgbWlkWSAtIDAuNSk7XG5cbiAgICAgIC8vIGNsZWFuIHVwXG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH0gLy8gZW5kIHR5cGVjaGVjayBmb3IgY2FudmFzXG4gIH1cbn1cblxuTG9jYXRpb25UcmFjay5kaXNwbGF5TmFtZSA9ICdsb2NhdGlvbic7XG5Mb2NhdGlvblRyYWNrLmRlZmF1bHRTb3VyY2UgPSBFbXB0eVNvdXJjZS5jcmVhdGUoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBMb2NhdGlvblRyYWNrO1xuIiwiLyoqXG4gKiBEYXRhIG1hbmFnZW1lbnQgZm9yIFBpbGV1cFRyYWNrLlxuICpcbiAqIFRoaXMgY2xhc3MgZ3JvdXBzIHBhaXJlZCByZWFkcyBhbmQgcGlsZXMgdGhlbSB1cC5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtTdHJhbmQsIEFsaWdubWVudH0gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCB0eXBlIHtUd29CaXRTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7QmFzZVBhaXJ9IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuaW1wb3J0IEFic3RyYWN0Q2FjaGUgZnJvbSAnLi9BYnN0cmFjdENhY2hlJztcbmltcG9ydCB0eXBlIHtWaXN1YWxHcm91cH0gZnJvbSAnLi9BYnN0cmFjdENhY2hlJztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IEludGVydmFsIGZyb20gJy4uL0ludGVydmFsJztcbmltcG9ydCB7YWRkVG9QaWxldXAsIGdldE9wSW5mb30gZnJvbSAnLi9waWxldXB1dGlscyc7XG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xuXG4vLyBUaGlzIGJ1bmRsZXMgZXZlcnl0aGluZyBpbnRyaW5zaWMgdG8gdGhlIGFsaWdubWVudCB0aGF0IHdlIG5lZWQgdG8gZGlzcGxheVxuLy8gaXQsIGkuZS4gZXZlcnl0aGluZyBub3QgZGVwZW5kZW5kIG9uIHNjYWxlL3ZpZXdwb3J0LlxuZXhwb3J0IHR5cGUgVmlzdWFsQWxpZ25tZW50ID0ge1xuICByZWFkOiBBbGlnbm1lbnQ7XG4gIHN0cmFuZDogU3RyYW5kO1xuICByZWZMZW5ndGg6IG51bWJlcjsgIC8vIHNwYW4gb24gdGhlIHJlZmVyZW5jZSAoYWNjb3VudGluZyBmb3IgaW5kZWxzKVxuICBtaXNtYXRjaGVzOiBBcnJheTxCYXNlUGFpcj47XG4gIG9wczogT2JqZWN0W107XG59O1xuXG4vLyBJbnNlcnQgc2l6ZXMgd2l0aGluIHRoaXMgcGVyY2VudGlsZSByYW5nZSB3aWxsIGJlIGNvbnNpZGVyZWQgXCJub3JtYWxcIi5cbmNvbnN0IE1JTl9PVVRMSUVSX1BFUkNFTlRJTEUgPSAwLjU7XG5jb25zdCBNQVhfT1VUTElFUl9QRVJDRU5USUxFID0gOTkuNTtcbmNvbnN0IE1BWF9JTlNFUlRfU0laRSA9IDMwMDAwOyAgLy8gaWdub3JlIGluc2VydHMgbGFyZ2VyIHRoYW4gdGhpcyBpbiBjYWxjdWxhdGlvbnNcbmNvbnN0IE1JTl9SRUFEU19GT1JfT1VUTElFUlMgPSA1MDA7ICAvLyBtaW5pbXVtIHJlYWRzIGZvciByZWxpYWJsZSBzdGF0c1xuXG5leHBvcnQgdHlwZSBJbnNlcnRTdGF0cyA9IHtcbiAgbWluT3V0bGllclNpemU6IG51bWJlcjtcbiAgbWF4T3V0bGllclNpemU6IG51bWJlcjtcbn07XG5cbi8vIFRoaXMgY2xhc3MgcHJvdmlkZXMgZGF0YSBtYW5hZ2VtZW50IGZvciB0aGUgdmlzdWFsaXphdGlvbiwgZ3JvdXBpbmcgcGFpcmVkXG4vLyByZWFkcyBhbmQgbWFuYWdpbmcgdGhlIHBpbGV1cC5cbmNsYXNzIFBpbGV1cENhY2hlIGV4dGVuZHMgQWJzdHJhY3RDYWNoZTxWaXN1YWxBbGlnbm1lbnQ+IHtcbiAgLy8gbWFwcyBncm91cEtleSB0byBWaXN1YWxHcm91cFxuICBncm91cHM6IHtba2V5OiBzdHJpbmddOiBWaXN1YWxHcm91cDxWaXN1YWxBbGlnbm1lbnQ+fTtcbiAgcmVmVG9QaWxldXA6IHtba2V5OiBzdHJpbmddOiBBcnJheTxJbnRlcnZhbFtdPn07XG4gIHJlZmVyZW5jZVNvdXJjZTogVHdvQml0U291cmNlO1xuICB2aWV3QXNQYWlyczogYm9vbGVhbjtcbiAgX2luc2VydFN0YXRzOiA/SW5zZXJ0U3RhdHM7XG5cbiAgY29uc3RydWN0b3IocmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2UsIHZpZXdBc1BhaXJzOiBib29sZWFuKSB7XG4gICAgc3VwZXIocmVmZXJlbmNlU291cmNlKTtcbiAgICB0aGlzLnZpZXdBc1BhaXJzID0gdmlld0FzUGFpcnM7XG4gICAgdGhpcy5faW5zZXJ0U3RhdHMgPSBudWxsO1xuICB9XG5cbiAgLy8gcmVhZCBuYW1lIHdvdWxkIG1ha2UgYSBnb29kIGtleSwgYnV0IHBhaXJlZCByZWFkcyBmcm9tIGRpZmZlcmVudCBjb250aWdzXG4gIC8vIHNob3VsZG4ndCBiZSBncm91cGVkIHZpc3VhbGx5LiBIZW5jZSB3ZSB1c2UgcmVhZCBuYW1lICsgY29udGlnLlxuICBncm91cEtleShyZWFkOiBBbGlnbm1lbnQpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnZpZXdBc1BhaXJzKSB7XG4gICAgICByZXR1cm4gYCR7cmVhZC5uYW1lfToke3JlYWQucmVmfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZWFkLmdldEtleSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIExvYWQgYSBuZXcgcmVhZCBpbnRvIHRoZSB2aXN1YWxpemF0aW9uIGNhY2hlLlxuICAvLyBDYWxsaW5nIHRoaXMgbXVsdGlwbGUgdGltZXMgd2l0aCB0aGUgc2FtZSByZWFkIGlzIGEgbm8tb3AuXG4gIGFkZEFsaWdubWVudChyZWFkOiBBbGlnbm1lbnQpIHtcbiAgICB0aGlzLl9pbnNlcnRTdGF0cyA9IG51bGw7ICAvLyBpbnZhbGlkYXRlXG4gICAgdmFyIGtleSA9IHRoaXMuZ3JvdXBLZXkocmVhZCksXG4gICAgICAgIHJhbmdlID0gcmVhZC5nZXRJbnRlcnZhbCgpO1xuXG4gICAgaWYgKCEoa2V5IGluIHRoaXMuZ3JvdXBzKSkge1xuICAgICAgdGhpcy5ncm91cHNba2V5XSA9IHtcbiAgICAgICAga2V5OiBrZXksXG4gICAgICAgIHJvdzogLTEsICAvLyBUQkRcbiAgICAgICAgaW5zZXJ0OiBudWxsLCAgLy8gVEJEXG4gICAgICAgIHNwYW46IHJhbmdlLFxuICAgICAgICBpdGVtczogW11cbiAgICAgIH07XG4gICAgfVxuICAgIHZhciBncm91cCA9IHRoaXMuZ3JvdXBzW2tleV07XG5cbiAgICBpZiAoXy5maW5kKGdyb3VwLml0ZW1zLCBhID0+IGEucmVhZCA9PSByZWFkKSkge1xuICAgICAgcmV0dXJuOyAgLy8gd2UndmUgYWxyZWFkeSBnb3QgaXQuXG4gICAgfVxuXG4gICAgdmFyIG9wSW5mbyA9IGdldE9wSW5mbyhyZWFkLCB0aGlzLnJlZmVyZW5jZVNvdXJjZSk7XG4gICAgdmFyIHZpc3VhbEFsaWdubWVudCA9IHtcbiAgICAgIHJlYWQsXG4gICAgICBzdHJhbmQ6IHJlYWQuZ2V0U3RyYW5kKCksXG4gICAgICByZWZMZW5ndGg6IHJhbmdlLmxlbmd0aCgpLFxuICAgICAgb3BzOiBvcEluZm8ub3BzLFxuICAgICAgbWlzbWF0Y2hlczogb3BJbmZvLm1pc21hdGNoZXNcbiAgICB9O1xuICAgIGdyb3VwLml0ZW1zLnB1c2godmlzdWFsQWxpZ25tZW50KTtcblxuICAgIHZhciBtYXRlSW50ZXJ2YWwgPSBudWxsO1xuICAgIGlmIChncm91cC5pdGVtcy5sZW5ndGggPT0gMSkge1xuICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3QgcmVhZCBpbiB0aGUgZ3JvdXAuIEluZmVyIGl0cyBzcGFuIGZyb20gaXRzIG1hdGUgcHJvcGVydGllcy5cbiAgICAgIC8vIFRPRE86IGlmIHRoZSBtYXRlIEFsaWdubWVudCBpcyBhbHNvIGF2YWlsYWJsZSwgaXQgd291bGQgYmUgYmV0dGVyIHRvIHVzZSB0aGF0LlxuICAgICAgaWYgKHRoaXMudmlld0FzUGFpcnMpIHtcbiAgICAgICAgdmFyIG1hdGVQcm9wcyA9IHJlYWQuZ2V0TWF0ZVByb3BlcnRpZXMoKTtcbiAgICAgICAgdmFyIGludGVydmFscyA9IFtyYW5nZV07XG4gICAgICAgIGlmIChtYXRlUHJvcHMgJiYgbWF0ZVByb3BzLnJlZiAmJiBtYXRlUHJvcHMucmVmID09IHJlYWQucmVmKSB7XG4gICAgICAgICAgbWF0ZUludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKG1hdGVQcm9wcy5yZWYsIG1hdGVQcm9wcy5wb3MsIG1hdGVQcm9wcy5wb3MgKyByYW5nZS5sZW5ndGgoKSk7XG4gICAgICAgICAgaW50ZXJ2YWxzLnB1c2gobWF0ZUludGVydmFsKTtcbiAgICAgICAgfVxuICAgICAgICBncm91cCA9IF8uZXh0ZW5kKGdyb3VwLCBzcGFuQW5kSW5zZXJ0KGludGVydmFscykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ3JvdXAuc3BhbiA9IHJhbmdlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIShyZWFkLnJlZiBpbiB0aGlzLnJlZlRvUGlsZXVwKSkge1xuICAgICAgICB0aGlzLnJlZlRvUGlsZXVwW3JlYWQucmVmXSA9IFtdO1xuICAgICAgfVxuICAgICAgdmFyIHBpbGV1cCA9IHRoaXMucmVmVG9QaWxldXBbcmVhZC5yZWZdO1xuICAgICAgZ3JvdXAucm93ID0gYWRkVG9QaWxldXAoZ3JvdXAuc3Bhbi5pbnRlcnZhbCwgcGlsZXVwKTtcbiAgICB9IGVsc2UgaWYgKGdyb3VwLml0ZW1zLmxlbmd0aCA9PSAyKSB7XG4gICAgICAvLyBSZWZpbmUgdGhlIGNvbm5lY3RvclxuICAgICAgbWF0ZUludGVydmFsID0gZ3JvdXAuaXRlbXNbMF0ucmVhZC5nZXRJbnRlcnZhbCgpO1xuICAgICAgdmFyIHtzcGFuLCBpbnNlcnR9ID0gc3BhbkFuZEluc2VydChbcmFuZ2UsIG1hdGVJbnRlcnZhbF0pO1xuICAgICAgZ3JvdXAuaW5zZXJ0ID0gaW5zZXJ0O1xuICAgICAgaWYgKGluc2VydCkge1xuICAgICAgICBncm91cC5zcGFuID0gc3BhbjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdGhpcyBtdXN0IGJlIGEgY2hpbWVyaWMgcmVhZC5cbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGVzIHJlZmVyZW5jZSBtaXNtYXRjaCBpbmZvcm1hdGlvbiBmb3IgcHJldmlvdXNseS1sb2FkZWQgcmVhZHMuXG4gIHVwZGF0ZU1pc21hdGNoZXMocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgICBmb3IgKHZhciBrIGluIHRoaXMuZ3JvdXBzKSB7XG4gICAgICB2YXIgcmVhZHMgPSB0aGlzLmdyb3Vwc1trXS5pdGVtcztcbiAgICAgIGZvciAodmFyIHZSZWFkIG9mIHJlYWRzKSB7XG4gICAgICAgIHZhciByZWFkID0gdlJlYWQucmVhZDtcbiAgICAgICAgaWYgKHJlYWQuZ2V0SW50ZXJ2YWwoKS5pbnRlcnNlY3RzKHJhbmdlKSkge1xuICAgICAgICAgIHZhciBvcEluZm8gPSBnZXRPcEluZm8ocmVhZCwgdGhpcy5yZWZlcmVuY2VTb3VyY2UpO1xuICAgICAgICAgIHZSZWFkLm1pc21hdGNoZXMgPSBvcEluZm8ubWlzbWF0Y2hlcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFJlLXNvcnQgdGhlIHBpbGV1cCBzbyB0aGF0IHJlYWRzIG92ZXJsYXBwaW5nIHRoZSBsb2N1cyBhcmUgb24gdG9wLlxuICBzb3J0UmVhZHNBdChjb250aWc6IHN0cmluZywgcG9zaXRpb246IG51bWJlcikge1xuICAgIC8vIFN0cmF0ZWd5OiBGb3IgZWFjaCBwaWxldXAgcm93LCBkZXRlcm1pbmUgd2hldGhlciBpdCBvdmVybGFwcyB0aGUgbG9jdXMuXG4gICAgLy8gVGhlbiBzb3J0IHRoZSBhcnJheSBpbmRpY2VzIHRvIGdldCBhIHBlcm11dGF0aW9uLlxuICAgIC8vIEJ1aWxkIGEgbmV3IHBpbGV1cCBieSBwZXJtdXRpbmcgdGhlIG9sZCBwaWxldXBcbiAgICAvLyBVcGRhdGUgYWxsIHRoZSBgcm93YCBwcm9wZXJ0aWVzIG9mIHRoZSByZWxldmFudCB2aXN1YWwgZ3JvdXBzXG5cbiAgICBjb25zdCBwaWxldXAgPSB0aGlzLnBpbGV1cEZvclJlZihjb250aWcpO1xuXG4gICAgLy8gRmluZCB0aGUgZ3JvdXBzIGZvciB3aGljaCBhbiBhbGlnbm1lbnQgb3ZlcmxhcHMgdGhlIGxvY3VzLlxuICAgIHZhciBncm91cHMgPSBfLmZpbHRlcih0aGlzLmdyb3VwcyxcbiAgICAgICAgICBncm91cCA9PiBfLmFueShncm91cC5pdGVtcyxcbiAgICAgICAgICAgICAgYSA9PiBhLnJlYWQuZ2V0SW50ZXJ2YWwoKS5jb250YWluc0xvY3VzKGNvbnRpZywgcG9zaXRpb24pKSk7XG5cbiAgICAvLyBGb3IgZWFjaCByb3csIGZpbmQgdGhlIGxlZnQtbW9zdCBwb2ludCAoZm9yIHNvcnRpbmcpLlxuICAgIHZhciByb3dzT3ZlcmxhcHBpbmcgPVxuICAgICAgICBfLm1hcE9iamVjdChfLmdyb3VwQnkoZ3JvdXBzLCBnID0+IGcucm93KSxcbiAgICAgICAgICAgICAgICAgICAgZ3MgPT4gXy5taW4oZ3MsIGc9Pmcuc3Bhbi5zdGFydCgpKS5zcGFuLnN0YXJ0KCkpO1xuXG4gICAgLy8gU29ydCBncm91cHMgYnkgd2hldGhlciB0aGV5IG92ZXJsYXAsIHRoZW4gYnkgdGhlaXIgc3RhcnQuXG4gICAgLy8gVE9ETzogaXMgdGhlcmUgYW4gZWFzaWVyIHdheSB0byBjb25zdHJ1Y3QgdGhlIGZvcndhcmQgbWFwIGRpcmVjdGx5P1xuICAgIHZhciBwZXJtdXRhdGlvbiA9IF8uc29ydEJ5KF8ucmFuZ2UoMCwgcGlsZXVwLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ID0+IHJvd3NPdmVybGFwcGluZ1tpZHhdIHx8IEluZmluaXR5KTtcbiAgICB2YXIgb2xkVG9OZXcgPSAoW106IG51bWJlcltdKTtcbiAgICBwZXJtdXRhdGlvbi5mb3JFYWNoKChvbGRJbmRleCwgbmV3SW5kZXgpID0+IHsgb2xkVG9OZXdbb2xkSW5kZXhdID0gbmV3SW5kZXg7IH0pO1xuICAgIHZhciBuZXdQaWxldXAgPSBfLnJhbmdlKDAsIHBpbGV1cC5sZW5ndGgpLm1hcChpID0+IHBpbGV1cFtvbGRUb05ld1tpXV0pO1xuXG4gICAgdmFyIG5vcm1SZWYgPSBjb250aWcgaW4gdGhpcy5yZWZUb1BpbGV1cCA/IGNvbnRpZyA6IHV0aWxzLmFsdENvbnRpZ05hbWUoY29udGlnKTtcbiAgICB0aGlzLnJlZlRvUGlsZXVwW25vcm1SZWZdID0gbmV3UGlsZXVwO1xuXG4gICAgXy5lYWNoKHRoaXMuZ3JvdXBzLCBnID0+IHtcbiAgICAgIGlmIChnLnNwYW4uY2hyT25Db250aWcoY29udGlnKSkge1xuICAgICAgICBnLnJvdyA9IG9sZFRvTmV3W2cucm93XTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGdldEluc2VydFN0YXRzKCk6IEluc2VydFN0YXRzIHtcbiAgICBpZiAodGhpcy5faW5zZXJ0U3RhdHMpIHJldHVybiB0aGlzLl9pbnNlcnRTdGF0cztcbiAgICB2YXIgaW5zZXJ0cyA9IF8ubWFwKHRoaXMuZ3JvdXBzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZyA9PiBnLml0ZW1zWzBdLnJlYWQuZ2V0SW5mZXJyZWRJbnNlcnRTaXplKCkpXG4gICAgICAgICAgICAgICAgICAgLmZpbHRlcih4ID0+IHggPCBNQVhfSU5TRVJUX1NJWkUpO1xuICAgIGNvbnN0IGluc2VydFN0YXRzID0gaW5zZXJ0cy5sZW5ndGggPj0gTUlOX1JFQURTX0ZPUl9PVVRMSUVSUyA/IHtcbiAgICAgIG1pbk91dGxpZXJTaXplOiB1dGlscy5jb21wdXRlUGVyY2VudGlsZShpbnNlcnRzLCBNSU5fT1VUTElFUl9QRVJDRU5USUxFKSxcbiAgICAgIG1heE91dGxpZXJTaXplOiB1dGlscy5jb21wdXRlUGVyY2VudGlsZShpbnNlcnRzLCBNQVhfT1VUTElFUl9QRVJDRU5USUxFKVxuICAgIH0gOiB7XG4gICAgICBtaW5PdXRsaWVyU2l6ZTogMCxcbiAgICAgIG1heE91dGxpZXJTaXplOiBJbmZpbml0eVxuICAgIH07XG5cbiAgICB0aGlzLl9pbnNlcnRTdGF0cyA9IGluc2VydFN0YXRzO1xuICAgIHJldHVybiBpbnNlcnRTdGF0cztcbiAgfVxufVxuXG4vLyBIZWxwZXIgbWV0aG9kIGZvciBhZGRSZWFkLlxuLy8gR2l2ZW4gMS0yIGludGVydmFscywgY29tcHV0ZSB0aGVpciBzcGFuIGFuZCBpbnNlcnQgKGludGVydmFsIGJldHdlZW4gdGhlbSkuXG4vLyBGb3Igb25lIGludGVydmFsLCB0aGVzZSBhcmUgYm90aCB0cml2aWFsLlxuLy8gVE9ETzogd2hhdCB0aGlzIGNhbGxzIGFuIFwiaW5zZXJ0XCIgaXMgbm90IHdoYXQgbW9zdCBwZW9wbGUgbWVhbiBieSB0aGF0LlxuZnVuY3Rpb24gc3BhbkFuZEluc2VydChpbnRlcnZhbHM6IENvbnRpZ0ludGVydmFsPHN0cmluZz5bXSkge1xuICBpZiAoaW50ZXJ2YWxzLmxlbmd0aCA9PSAxKSB7XG4gICAgcmV0dXJuIHtpbnNlcnQ6IG51bGwsIHNwYW46IGludGVydmFsc1swXX07XG4gIH0gZWxzZSBpZiAoaW50ZXJ2YWxzLmxlbmd0aCAhPTIpIHtcbiAgICB0aHJvdyBgQ2FsbGVkIHNwYW5BbmRJbnNlcnQgd2l0aCAke2ludGVydmFscy5sZW5ndGh9IFxcbm90aW4gWzEsIDJdYDtcbiAgfVxuXG4gIGlmICghaW50ZXJ2YWxzWzBdLmNock9uQ29udGlnKGludGVydmFsc1sxXS5jb250aWcpKSB7XG4gICAgcmV0dXJuIHNwYW5BbmRJbnNlcnQoW2ludGVydmFsc1swXV0pO1xuICB9XG4gIHZhciBpdjEgPSBpbnRlcnZhbHNbMF0uaW50ZXJ2YWwsXG4gICAgICBpdjIgPSBpbnRlcnZhbHNbMV0uaW50ZXJ2YWwsXG4gICAgICBpbnNlcnQgPSBpdjEuc3RhcnQgPCBpdjIuc3RhcnQgP1xuICAgICAgICAgIG5ldyBJbnRlcnZhbChpdjEuc3RvcCwgaXYyLnN0YXJ0KSA6XG4gICAgICAgICAgbmV3IEludGVydmFsKGl2Mi5zdG9wLCBpdjEuc3RhcnQpO1xuXG4gIHZhciBzcGFuID0gSW50ZXJ2YWwuYm91bmRpbmdJbnRlcnZhbChbaXYxLCBpdjJdKTtcbiAgcmV0dXJuIHtcbiAgICBpbnNlcnQsXG4gICAgc3BhbjogbmV3IENvbnRpZ0ludGVydmFsKGludGVydmFsc1swXS5jb250aWcsIHNwYW4uc3RhcnQsIHNwYW4uc3RvcClcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQaWxldXBDYWNoZTtcbiIsIi8qKlxuICogUGlsZXVwIHZpc3VhbGl6YXRpb24gb2YgQkFNIHNvdXJjZXMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtBbGlnbm1lbnREYXRhU291cmNlfSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuaW1wb3J0IHR5cGUge0Jhc2VQYWlyfSBmcm9tICcuL3BpbGV1cHV0aWxzJztcbmltcG9ydCB0eXBlIHtWaXN1YWxBbGlnbm1lbnQsIEluc2VydFN0YXRzfSBmcm9tICcuL1BpbGV1cENhY2hlJztcbmltcG9ydCB0eXBlIHtWaXN1YWxHcm91cH0gZnJvbSAnLi9BYnN0cmFjdENhY2hlJztcbmltcG9ydCB0eXBlIHtEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgdHlwZSB7Vml6UHJvcHN9IGZyb20gJy4uL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCB0eXBlIHtTdGF0ZSwgTmV0d29ya1N0YXR1c30gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmltcG9ydCBzY2FsZSBmcm9tICcuLi9zY2FsZSc7XG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHtDaWdhck9wLCB5Rm9yUm93fSBmcm9tICcuL3BpbGV1cHV0aWxzJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgRGlzcGxheU1vZGUgZnJvbSAnLi9EaXNwbGF5TW9kZSc7XG5pbXBvcnQgUGlsZXVwQ2FjaGUgZnJvbSAnLi9QaWxldXBDYWNoZSc7XG5pbXBvcnQgVGlsZWRDYW52YXMgZnJvbSAnLi9UaWxlZENhbnZhcyc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHN0eWxlIGZyb20gJy4uL3N0eWxlJztcblxuXG52YXIgUkVBRF9TVFJBTkRfQVJST1dfV0lEVEggPSA1O1xuXG4vLyBQaGFudG9tSlMgZG9lcyBub3Qgc3VwcG9ydCBzZXRMaW5lRGFzaC5cbi8vIE5vZGUgZG9lc24ndCBldmVuIGtub3cgYWJvdXQgdGhlIHN5bWJvbC5cbnZhciBTVVBQT1JUU19EQVNIRVMgPSB0eXBlb2YoQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAhIUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUuc2V0TGluZURhc2g7XG5cbmNsYXNzIFBpbGV1cFRpbGVkQ2FudmFzIGV4dGVuZHMgVGlsZWRDYW52YXMge1xuICBjYWNoZTogUGlsZXVwQ2FjaGU7XG4gIG9wdGlvbnM6IE9iamVjdDtcblxuICBjb25zdHJ1Y3RvcihjYWNoZTogUGlsZXVwQ2FjaGUsIG9wdGlvbnM6IE9iamVjdCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICB1cGRhdGUobmV3T3B0aW9uczogT2JqZWN0KSB7XG4gICAgdGhpcy5vcHRpb25zID0gbmV3T3B0aW9ucztcbiAgfVxuXG4gIGhlaWdodEZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUucGlsZXVwSGVpZ2h0Rm9yUmVmKHJlZikgKlxuICAgICAgICAgICAgICAgICAgICAoc3R5bGUuUkVBRF9IRUlHSFQgKyBzdHlsZS5SRUFEX1NQQUNJTkcpO1xuICB9XG5cbiAgcmVuZGVyKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgIHNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgICB2YXIgcmVsYXhlZFJhbmdlID1cbiAgICAgICAgbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQoKSAtIDEsIHJhbmdlLnN0b3AoKSArIDEpO1xuICAgIHZhciB2R3JvdXBzID0gdGhpcy5jYWNoZS5nZXRHcm91cHNPdmVybGFwcGluZyhyZWxheGVkUmFuZ2UpO1xuICAgIHZhciBpbnNlcnRTdGF0cyA9IHRoaXMub3B0aW9ucy5jb2xvckJ5SW5zZXJ0ID8gdGhpcy5jYWNoZS5nZXRJbnNlcnRTdGF0cygpIDogbnVsbDtcbiAgICByZW5kZXJQaWxldXAoY3R4LCBzY2FsZSwgcmVsYXhlZFJhbmdlLCBpbnNlcnRTdGF0cywgdGhpcy5vcHRpb25zLmNvbG9yQnlTdHJhbmQsIHZHcm91cHMpO1xuICB9XG59XG5cblxuLy8gU2hvdWxkIHRoZSBDaWdhciBvcCBiZSByZW5kZXJlZCB0byB0aGUgc2NyZWVuP1xuZnVuY3Rpb24gaXNSZW5kZXJlZChvcCkge1xuICByZXR1cm4gKG9wLm9wID09IENpZ2FyT3AuTUFUQ0ggfHxcbiAgICAgICAgICBvcC5vcCA9PSBDaWdhck9wLkRFTEVURSB8fFxuICAgICAgICAgIG9wLm9wID09IENpZ2FyT3AuSU5TRVJUKTtcbn1cblxuLy8gUmVuZGVyIGEgcG9ydGlvbiBvZiB0aGUgcGlsZXVwIGludG8gdGhlIGNhbnZhcy5cbmZ1bmN0aW9uIHJlbmRlclBpbGV1cChjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IChudW06IG51bWJlcikgPT4gbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICAgIGluc2VydFN0YXRzOiA/SW5zZXJ0U3RhdHMsXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3JCeVN0cmFuZDogYm9vbGVhbixcbiAgICAgICAgICAgICAgICAgICAgICB2R3JvdXBzOiBWaXN1YWxHcm91cDxWaXN1YWxBbGlnbm1lbnQ+W10pIHtcbiAgLy8gU2hvdWxkIG1pc21hdGNoZWQgYmFzZSBwYWlycyBiZSBzaG93biBhcyBibG9ja3Mgb2YgY29sb3Igb3IgYXMgbGV0dGVycz9cbiAgdmFyIHB4UGVyTGV0dGVyID0gc2NhbGUoMSkgLSBzY2FsZSgwKSxcbiAgICAgIG1vZGUgPSBEaXNwbGF5TW9kZS5nZXREaXNwbGF5TW9kZShweFBlckxldHRlciksXG4gICAgICBzaG93VGV4dCA9IERpc3BsYXlNb2RlLmlzVGV4dChtb2RlKTtcblxuICBmdW5jdGlvbiBkcmF3QXJyb3cocG9zOiBudW1iZXIsIHJlZkxlbmd0aDogbnVtYmVyLCB0b3A6IG51bWJlciwgZGlyZWN0aW9uOiAnTCcgfCAnUicpIHtcbiAgICB2YXIgbGVmdCA9IHNjYWxlKHBvcyArIDEpLFxuICAgICAgICByaWdodCA9IHNjYWxlKHBvcyArIHJlZkxlbmd0aCArIDEpLFxuICAgICAgICBib3R0b20gPSB0b3AgKyBzdHlsZS5SRUFEX0hFSUdIVCxcbiAgICAgICAgLy8gQXJyb3doZWFkcyBiZWNvbWUgYSBkaXN0cmFjdGlvbiBhcyB5b3Ugem9vbSBvdXQgYW5kIHRoZSByZWFkcyBnZXRcbiAgICAgICAgLy8gc2hvcnRlci4gVGhleSBzaG91bGQgbmV2ZXIgYmUgbW9yZSB0aGFuIDEvNiB0aGUgcmVhZCBsZW5ndGguXG4gICAgICAgIGFycm93U2l6ZSA9IE1hdGgubWluKFJFQURfU1RSQU5EX0FSUk9XX1dJRFRILCAocmlnaHQgLSBsZWZ0KSAvIDYpO1xuXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGlmIChkaXJlY3Rpb24gPT0gJ1InKSB7XG4gICAgICBjdHgubW92ZVRvKGxlZnQsIHRvcCk7XG4gICAgICBjdHgubGluZVRvKHJpZ2h0IC0gYXJyb3dTaXplLCB0b3ApO1xuICAgICAgY3R4LmxpbmVUbyhyaWdodCwgKHRvcCArIGJvdHRvbSkgLyAyKTtcbiAgICAgIGN0eC5saW5lVG8ocmlnaHQgLSBhcnJvd1NpemUsIGJvdHRvbSk7XG4gICAgICBjdHgubGluZVRvKGxlZnQsIGJvdHRvbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0eC5tb3ZlVG8ocmlnaHQsIHRvcCk7XG4gICAgICBjdHgubGluZVRvKGxlZnQgKyBhcnJvd1NpemUsIHRvcCk7XG4gICAgICBjdHgubGluZVRvKGxlZnQsICh0b3AgKyBib3R0b20pIC8gMik7XG4gICAgICBjdHgubGluZVRvKGxlZnQgKyBhcnJvd1NpemUsIGJvdHRvbSk7XG4gICAgICBjdHgubGluZVRvKHJpZ2h0LCBib3R0b20pO1xuICAgIH1cbiAgICBjdHguZmlsbCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZHJhd1NlZ21lbnQob3AsIHksIHZSZWFkKSB7XG4gICAgc3dpdGNoIChvcC5vcCkge1xuICAgICAgY2FzZSBDaWdhck9wLk1BVENIOlxuICAgICAgICBpZiAob3AuYXJyb3cpIHtcbiAgICAgICAgICBkcmF3QXJyb3cob3AucG9zLCBvcC5sZW5ndGgsIHksIG9wLmFycm93KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgeCA9IHNjYWxlKG9wLnBvcyArIDEpO1xuICAgICAgICAgIGN0eC5maWxsUmVjdCh4LCB5LCBzY2FsZShvcC5wb3MgKyBvcC5sZW5ndGggKyAxKSAtIHgsIHN0eWxlLlJFQURfSEVJR0hUKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBDaWdhck9wLkRFTEVURTpcbiAgICAgICAgdmFyIHgxID0gc2NhbGUob3AucG9zICsgMSksXG4gICAgICAgICAgICB4MiA9IHNjYWxlKG9wLnBvcyArIDEgKyBvcC5sZW5ndGgpLFxuICAgICAgICAgICAgeXAgPSB5ICsgc3R5bGUuUkVBRF9IRUlHSFQgLyAyIC0gMC41O1xuICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuREVMRVRFX0NPTE9SO1xuICAgICAgICBjdHguZmlsbFJlY3QoeDEsIHlwLCB4MiAtIHgxLCAxKTtcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ2lnYXJPcC5JTlNFUlQ6XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5JTlNFUlRfQ09MT1I7XG4gICAgICAgIHZhciB4MCA9IHNjYWxlKG9wLnBvcyArIDEpIC0gMiwgIC8vIHRvIGNvdmVyIGEgYml0IG9mIHRoZSBwcmV2aW91cyBzZWdtZW50XG4gICAgICAgICAgICB5MSA9IHkgLSAxLFxuICAgICAgICAgICAgeTIgPSB5ICsgc3R5bGUuUkVBRF9IRUlHSFQgKyAyO1xuICAgICAgICBjdHguZmlsbFJlY3QoeDAsIHkxLCAxLCB5MiAtIHkxKTtcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZHJhd0FsaWdubWVudCh2UmVhZDogVmlzdWFsQWxpZ25tZW50LCB5OiBudW1iZXIpIHtcbiAgICBjdHgucHVzaE9iamVjdCh2UmVhZCk7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBpZiAoY29sb3JCeVN0cmFuZCkge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IHZSZWFkLnN0cmFuZCA9PSAnKycgP1xuICAgICAgICAgIHN0eWxlLkFMSUdOTUVOVF9QTFVTX1NUUkFORF9DT0xPUiA6XG4gICAgICAgICAgc3R5bGUuQUxJR05NRU5UX01JTlVTX1NUUkFORF9DT0xPUjtcbiAgICB9XG4gICAgdlJlYWQub3BzLmZvckVhY2gob3AgPT4ge1xuICAgICAgaWYgKGlzUmVuZGVyZWQob3ApKSB7XG4gICAgICAgIGRyYXdTZWdtZW50KG9wLCB5LCB2UmVhZCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdlJlYWQubWlzbWF0Y2hlcy5mb3JFYWNoKGJwID0+IHJlbmRlck1pc21hdGNoKGJwLCB5KSk7XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgICBjdHgucG9wT2JqZWN0KCk7XG4gIH1cblxuICBmdW5jdGlvbiBkcmF3R3JvdXAodkdyb3VwOiBWaXN1YWxHcm91cDxWaXN1YWxBbGlnbm1lbnQ+KSB7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBpZiAoaW5zZXJ0U3RhdHMgJiYgdkdyb3VwLmluc2VydCkge1xuICAgICAgdmFyIGxlbiA9IHZHcm91cC5zcGFuLmxlbmd0aCgpO1xuICAgICAgaWYgKGxlbiA8IGluc2VydFN0YXRzLm1pbk91dGxpZXJTaXplKSB7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnYmx1ZSc7XG4gICAgICB9IGVsc2UgaWYgKGxlbiA+IGluc2VydFN0YXRzLm1heE91dGxpZXJTaXplKSB7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmVkJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5BTElHTk1FTlRfQ09MT1I7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5BTElHTk1FTlRfQ09MT1I7XG4gICAgfVxuICAgIHZhciB5ID0geUZvclJvdyh2R3JvdXAucm93KTtcbiAgICBjdHgucHVzaE9iamVjdCh2R3JvdXApO1xuICAgIGlmICh2R3JvdXAuaW5zZXJ0KSB7XG4gICAgICB2YXIgc3BhbiA9IHZHcm91cC5pbnNlcnQsXG4gICAgICAgICAgeDEgPSBzY2FsZShzcGFuLnN0YXJ0ICsgMSksXG4gICAgICAgICAgeDIgPSBzY2FsZShzcGFuLnN0b3AgKyAxKTtcbiAgICAgIGN0eC5maWxsUmVjdCh4MSwgeSArIHN0eWxlLlJFQURfSEVJR0hUIC8gMiAtIDAuNSwgeDIgLSB4MSwgMSk7XG4gICAgfVxuICAgIHZHcm91cC5pdGVtcy5mb3JFYWNoKHZSZWFkID0+IGRyYXdBbGlnbm1lbnQodlJlYWQsIHkpKTtcbiAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck1pc21hdGNoKGJwOiBCYXNlUGFpciwgeTogbnVtYmVyKSB7XG4gICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBtaXNtYXRjaCBpcyBpbiBhIGRpZmZlcmVudCB0aWxlLCBmb3IgZXhhbXBsZS5cbiAgICBpZiAoIXJhbmdlLmludGVydmFsLmNvbnRhaW5zKGJwLnBvcykpIHJldHVybjtcblxuICAgIGN0eC5wdXNoT2JqZWN0KGJwKTtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5CQVNFX0NPTE9SU1ticC5iYXNlUGFpcl07XG4gICAgY3R4Lmdsb2JhbEFscGhhID0gb3BhY2l0eUZvclF1YWxpdHkoYnAucXVhbGl0eSk7XG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIGlmIChzaG93VGV4dCkge1xuICAgICAgLy8gMC41ID0gY2VudGVyZWRcbiAgICAgIGN0eC5maWxsVGV4dChicC5iYXNlUGFpciwgc2NhbGUoMSArIDAuNSArIGJwLnBvcyksIHkgKyBzdHlsZS5SRUFEX0hFSUdIVCAtIDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHguZmlsbFJlY3Qoc2NhbGUoMSArIGJwLnBvcyksIHksICBweFBlckxldHRlciAtIDEsIHN0eWxlLlJFQURfSEVJR0hUKTtcbiAgICB9XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgICBjdHgucG9wT2JqZWN0KCk7XG4gIH1cblxuICBjdHguZm9udCA9IHN0eWxlLlRJR0hUX1RFWFRfU1RZTEU7XG4gIHZHcm91cHMuZm9yRWFjaCh2R3JvdXAgPT4gZHJhd0dyb3VwKHZHcm91cCkpO1xufVxuXG4vLyBUaGlzIGlzIGFkYXB0ZWQgZnJvbSBJR1YuXG52YXIgTUlOX1EgPSA1LCAgLy8gdGhlc2UgYXJlIFBocmVkLXNjYWxlZCBzY29yZXNcbiAgICBNQVhfUSA9IDIwLFxuICAgIFFfU0NBTEUgPSBzY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgICAgICAgIC5kb21haW4oW01JTl9RLCBNQVhfUV0pXG4gICAgICAgICAgICAgICAgICAgLnJhbmdlKFswLjEsIDAuOV0pXG4gICAgICAgICAgICAgICAgICAgLmNsYW1wKHRydWUpOyAgLy8gY2xhbXAgb3V0cHV0IHRvIFswLjEsIDAuOV1cbmZ1bmN0aW9uIG9wYWNpdHlGb3JRdWFsaXR5KHF1YWxpdHk6IG51bWJlcik6IG51bWJlciB7XG4gIHZhciBhbHBoYSA9IFFfU0NBTEUocXVhbGl0eSk7XG5cbiAgLy8gUm91bmQgYWxwaGEgdG8gbmVhcmVzdCAwLjFcbiAgYWxwaGEgPSBNYXRoLnJvdW5kKGFscGhhICogMTAgKyAwLjUpIC8gMTAuMDtcbiAgcmV0dXJuIE1hdGgubWluKDEuMCwgYWxwaGEpO1xufVxuXG5jbGFzcyBQaWxldXBUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxWaXpQcm9wczxBbGlnbm1lbnREYXRhU291cmNlPiwgU3RhdGU+IHtcbiAgcHJvcHM6IFZpelByb3BzPEFsaWdubWVudERhdGFTb3VyY2U+O1xuICBzdGF0ZTogU3RhdGU7XG4gIGNhY2hlOiBQaWxldXBDYWNoZTtcbiAgdGlsZXM6IFBpbGV1cFRpbGVkQ2FudmFzO1xuICBzdGF0aWMgZGVmYXVsdE9wdGlvbnM6IHsgdmlld0FzUGFpcnM6IGJvb2xlYW4gfTtcbiAgc3RhdGljIGdldE9wdGlvbnNNZW51OiAob3B0aW9uczogT2JqZWN0KSA9PiBhbnk7XG4gIHN0YXRpYyBoYW5kbGVTZWxlY3RPcHRpb246IChrZXk6IHN0cmluZywgb2xkT3B0aW9uczogT2JqZWN0KSA9PiBPYmplY3Q7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFZpelByb3BzPEFsaWdubWVudERhdGFTb3VyY2U+KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBuZXR3b3JrU3RhdHVzOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIC8vIFRoZXNlIHN0eWxlcyBhbGxvdyB2ZXJ0aWNhbCBzY3JvbGxpbmcgdG8gc2VlIHRoZSBmdWxsIHBpbGV1cC5cbiAgICAvLyBBZGRpbmcgYSB2ZXJ0aWNhbCBzY3JvbGxiYXIgc2hyaW5rcyB0aGUgdmlzaWJsZSBhcmVhLCBidXQgd2UgaGF2ZSB0byBhY3RcbiAgICAvLyBhcyB0aG91Z2ggaXQgZG9lc24ndCwgc2luY2UgYWRqdXN0aW5nIHRoZSBzY2FsZSB3b3VsZCBwdXQgaXQgb3V0IG9mIHN5bmNcbiAgICAvLyB3aXRoIG90aGVyIHRyYWNrcy5cbiAgICB2YXIgY29udGFpbmVyU3R5bGVzID0ge1xuICAgICAgJ2hlaWdodCc6ICcxMDAlJ1xuICAgIH07XG5cbiAgICB2YXIgc3RhdHVzRWwgPSBudWxsLFxuICAgICAgICBuZXR3b3JrU3RhdHVzID0gdGhpcy5zdGF0ZS5uZXR3b3JrU3RhdHVzO1xuICAgIGlmIChuZXR3b3JrU3RhdHVzKSB7XG4gICAgICB2YXIgbWVzc2FnZSA9IHRoaXMuZm9ybWF0U3RhdHVzKG5ldHdvcmtTdGF0dXMpO1xuICAgICAgc3RhdHVzRWwgPSAoXG4gICAgICAgIDxkaXYgcmVmPSdzdGF0dXMnIGNsYXNzTmFtZT0nbmV0d29yay1zdGF0dXMnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSduZXR3b3JrLXN0YXR1cy1tZXNzYWdlJz5cbiAgICAgICAgICAgIExvYWRpbmcgYWxpZ25tZW50c+KApiAoe21lc3NhZ2V9KVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIHtzdGF0dXNFbH1cbiAgICAgICAgPGRpdiByZWY9J2NvbnRhaW5lcicgc3R5bGU9e2NvbnRhaW5lclN0eWxlc30+XG4gICAgICAgICAgPGNhbnZhcyByZWY9J2NhbnZhcycgb25DbGljaz17dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBmb3JtYXRTdGF0dXMoc3RhdHVzOiBOZXR3b3JrU3RhdHVzKTogc3RyaW5nIHtcbiAgICBpZiAoc3RhdHVzLm51bVJlcXVlc3RzKSB7XG4gICAgICB2YXIgcGx1cmFsUyA9IHN0YXR1cy5udW1SZXF1ZXN0cyA+IDEgPyAncycgOiAnJztcbiAgICAgIHJldHVybiBgaXNzdWVkICR7c3RhdHVzLm51bVJlcXVlc3RzfSByZXF1ZXN0JHtwbHVyYWxTfWA7XG4gICAgfSBlbHNlIGlmIChzdGF0dXMuc3RhdHVzKSB7XG4gICAgICByZXR1cm4gc3RhdHVzLnN0YXR1cztcbiAgICB9XG4gICAgdGhyb3cgJ2ludmFsaWQnO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5jYWNoZSA9IG5ldyBQaWxldXBDYWNoZSh0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZSwgdGhpcy5wcm9wcy5vcHRpb25zLnZpZXdBc1BhaXJzKTtcbiAgICB0aGlzLnRpbGVzID0gbmV3IFBpbGV1cFRpbGVkQ2FudmFzKHRoaXMuY2FjaGUsIHRoaXMucHJvcHMub3B0aW9ucyk7XG5cbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV3ZGF0YScsIHJhbmdlID0+IHtcbiAgICAgIHRoaXMudXBkYXRlUmVhZHMocmFuZ2UpO1xuICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlUmFuZ2UocmFuZ2UpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2Uub24oJ25ld2RhdGEnLCByYW5nZSA9PiB7XG4gICAgICB0aGlzLmNhY2hlLnVwZGF0ZU1pc21hdGNoZXMocmFuZ2UpO1xuICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlUmFuZ2UocmFuZ2UpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ldHdvcmtwcm9ncmVzcycsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogZX0pO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrZG9uZScsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogbnVsbH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICB2YXIgc2hvdWxkVXBkYXRlID0gZmFsc2U7XG4gICAgaWYgKHRoaXMucHJvcHMub3B0aW9ucyAhPSBwcmV2UHJvcHMub3B0aW9ucykge1xuICAgICAgdGhpcy5oYW5kbGVPcHRpb25zQ2hhbmdlKHByZXZQcm9wcy5vcHRpb25zKTtcbiAgICAgIHNob3VsZFVwZGF0ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHRoaXMucHJvcHMsIHByZXZQcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHModGhpcy5zdGF0ZSwgcHJldlN0YXRlKSB8fFxuICAgICAgICBzaG91bGRVcGRhdGUpIHtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZU9wdGlvbnNDaGFuZ2Uob2xkT3B0czogT2JqZWN0KSB7XG4gICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlQWxsKCk7XG5cbiAgICBpZiAob2xkT3B0cy52aWV3QXNQYWlycyAhPSB0aGlzLnByb3BzLm9wdGlvbnMudmlld0FzUGFpcnMpIHtcbiAgICAgIHRoaXMuY2FjaGUgPSBuZXcgUGlsZXVwQ2FjaGUodGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2UsIHRoaXMucHJvcHMub3B0aW9ucy52aWV3QXNQYWlycyk7XG4gICAgICB0aGlzLnRpbGVzID0gbmV3IFBpbGV1cFRpbGVkQ2FudmFzKHRoaXMuY2FjaGUsIHRoaXMucHJvcHMub3B0aW9ucyk7XG4gICAgICB0aGlzLnVwZGF0ZVJlYWRzKENvbnRpZ0ludGVydmFsLmZyb21HZW5vbWVSYW5nZSh0aGlzLnByb3BzLnJhbmdlKSk7XG4gICAgfSBlbHNlIGlmIChvbGRPcHRzLmNvbG9yQnlJbnNlcnQgIT0gdGhpcy5wcm9wcy5vcHRpb25zLmNvbG9yQnlJbnNlcnQpIHtcbiAgICAgIHRoaXMudGlsZXMudXBkYXRlKHRoaXMucHJvcHMub3B0aW9ucyk7XG4gICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH0gZWxzZSBpZiAob2xkT3B0cy5oaWRlQWxpZ25tZW50cyAhPSB0aGlzLnByb3BzLm9wdGlvbnMuaGlkZUFsaWdubWVudHMpIHtcbiAgICAgIHRoaXMudGlsZXMudXBkYXRlKHRoaXMucHJvcHMub3B0aW9ucyk7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9XG5cbiAgICBpZiAob2xkT3B0cy5zb3J0ICE9IHRoaXMucHJvcHMub3B0aW9ucy5zb3J0KSB7XG4gICAgICB0aGlzLmhhbmRsZVNvcnQoKTtcbiAgICB9XG4gIH1cblxuICAvLyBMb2FkIG5ldyByZWFkcyBpbnRvIHRoZSB2aXN1YWxpemF0aW9uIGNhY2hlLlxuICB1cGRhdGVSZWFkcyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikge1xuICAgIHZhciBhbnlCZWZvcmUgPSB0aGlzLmNhY2hlLmFueUdyb3Vwc092ZXJsYXBwaW5nKHJhbmdlKTtcbiAgICB0aGlzLnByb3BzLnNvdXJjZS5nZXRBbGlnbm1lbnRzSW5SYW5nZShyYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKHJlYWQgPT4gdGhpcy5jYWNoZS5hZGRBbGlnbm1lbnQocmVhZCkpO1xuXG4gICAgaWYgKCFhbnlCZWZvcmUgJiYgdGhpcy5jYWNoZS5hbnlHcm91cHNPdmVybGFwcGluZyhyYW5nZSkpIHtcbiAgICAgIC8vIElmIHRoZXNlIGFyZSB0aGUgZmlyc3QgcmVhZHMgdG8gYmUgc2hvd24gaW4gdGhlIHZpc2libGUgcmFuZ2UsXG4gICAgICAvLyB0aGVuIHNvcnQgdGhlbSB0byBoaWdobGlnaHQgcmVhZHMgaW4gdGhlIGNlbnRlci5cbiAgICAgIHRoaXMuaGFuZGxlU29ydCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSB0aGUgdmlzdWFsaXphdGlvbiB0byByZWZsZWN0IHRoZSBjYWNoZWQgcmVhZHMgJlxuICAvLyBjdXJyZW50bHktdmlzaWJsZSByYW5nZS5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gdGhpcy5yZWZzLmNhbnZhcyxcbiAgICAgICAgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgaGVpZ2h0ICYgd2lkdGggYXJlIGtub3duLlxuICAgIGlmICh3aWR0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgdmFyIGN0eCA9IGNhbnZhc1V0aWxzLmdldENvbnRleHQoY2FudmFzKTtcbiAgICB2YXIgZHR4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjdHgpO1xuXG4gICAgdGhpcy5yZW5kZXJTY2VuZShkdHgpO1xuXG4gIH1cblxuICByZW5kZXJTY2VuZShjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICB2YXIgZ2Vub21lUmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlLFxuICAgICAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChnZW5vbWVSYW5nZS5jb250aWcsIGdlbm9tZVJhbmdlLnN0YXJ0LCBnZW5vbWVSYW5nZS5zdG9wKSxcbiAgICAgICAgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCksXG4gICAgICAgIGNhbnZhcyA9IHRoaXMucmVmcy5jYW52YXMsXG4gICAgICAgIHdpZHRoID0gdGhpcy5wcm9wcy53aWR0aDtcblxuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgLy8gZ2V0IHBhcmVudCBvZiBjYW52YXNcbiAgICAvLyBUaGUgdHlwZWNhc3RzIHRocm91Z2ggYGFueWAgYXJlIHRvIGZvb2wgZmxvdy5cbiAgICB2YXIgcGFyZW50ID0gKChkM3V0aWxzLmZpbmRQYXJlbnQoY2FudmFzLCBcInBpbGV1cFwiKSA6IGFueSkgOiBIVE1MQ2FudmFzRWxlbWVudCk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLmhpZGVBbGlnbm1lbnRzKSB7XG4gICAgICBkM3V0aWxzLnNpemVDYW52YXMoY2FudmFzLCB3aWR0aCwgMCk7XG4gICAgICAvLyBpZiBhbGlnbm1lbnRzIGFyZSBoaWRkZW4sIHNldCBwYXJlbnQgZGl2IHRvIDBweFxuICAgICAgaWYgKHBhcmVudCkgcGFyZW50LnN0eWxlLm1pbkhlaWdodCA9IFwiMHB4XCI7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdW5zZXQgbWluaW11bSBoaWdodCBmb3Igdmlld2luZyBhbGlnbm1lbnRzXG4gICAgaWYgKHBhcmVudCkgcGFyZW50LnN0eWxlLm1pbkhlaWdodCA9IFwiXCI7XG5cbiAgICAvLyBIZWlnaHQgY2FuIG9ubHkgYmUgY29tcHV0ZWQgYWZ0ZXIgdGhlIHBpbGV1cCBoYXMgYmVlbiB1cGRhdGVkLlxuICAgIHZhciBoZWlnaHQgPSB5Rm9yUm93KHRoaXMuY2FjaGUucGlsZXVwSGVpZ2h0Rm9yUmVmKHRoaXMucHJvcHMucmFuZ2UuY29udGlnKSk7XG5cbiAgICBkM3V0aWxzLnNpemVDYW52YXMoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIHRoaXMudGlsZXMucmVuZGVyVG9TY3JlZW4oY3R4LCByYW5nZSwgc2NhbGUpO1xuXG4gICAgLy8gVE9ETzogdGhlIGNlbnRlciBsaW5lIHNob3VsZCBnbyBhYm92ZSBhbGlnbm1lbnRzLCBidXQgYmVsb3cgbWlzbWF0Y2hlc1xuICAgIHRoaXMucmVuZGVyQ2VudGVyTGluZShjdHgsIHJhbmdlLCBzY2FsZSk7XG5cbiAgICAvLyBUaGlzIGlzIGEgaGFjayB0byBtaXRpZ2F0ZSAjMzUwXG4gICAgdmFyIGVsID0gZDN1dGlscy5maW5kUGFyZW50KHRoaXMucmVmcy5jYW52YXMsICd0cmFjay1jb250ZW50Jyk7XG4gICAgaWYgKGVsKSBlbC5zY3JvbGxMZWZ0ID0gMDtcbiAgfVxuXG4gIC8vIERyYXcgdGhlIGNlbnRlciBsaW5lKHMpLCB3aGljaCBvcmllbnQgdGhlIHVzZXJcbiAgcmVuZGVyQ2VudGVyTGluZShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgICAgICAgICAgICBzY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIpIHtcbiAgICB2YXIgbWlkUG9pbnQgPSBNYXRoLmZsb29yKChyYW5nZS5zdG9wKCkgKyByYW5nZS5zdGFydCgpKSAvIDIpLFxuICAgICAgICByaWdodExpbmVYID0gTWF0aC5jZWlsKHNjYWxlKG1pZFBvaW50ICsgMSkpLFxuICAgICAgICBsZWZ0TGluZVggPSBNYXRoLmZsb29yKHNjYWxlKG1pZFBvaW50KSksXG4gICAgICAgIGhlaWdodCA9IGN0eC5jYW52YXMuaGVpZ2h0O1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgaWYgKFNVUFBPUlRTX0RBU0hFUykge1xuICAgICAgY3R4LnNldExpbmVEYXNoKFs1LCA1XSk7XG4gICAgfVxuICAgIGlmIChyaWdodExpbmVYIC0gbGVmdExpbmVYIDwgMykge1xuICAgICAgLy8gSWYgdGhlIGxpbmVzIGFyZSB2ZXJ5IGNsb3NlLCB0aGVuIGp1c3QgZHJhdyBhIGNlbnRlciBsaW5lLlxuICAgICAgdmFyIG1pZFggPSBNYXRoLnJvdW5kKChsZWZ0TGluZVggKyByaWdodExpbmVYKSAvIDIpO1xuICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCBtaWRYIC0gMC41LCAwLCBtaWRYIC0gMC41LCBoZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIGxlZnRMaW5lWCAtIDAuNSwgMCwgbGVmdExpbmVYIC0gMC41LCBoZWlnaHQpO1xuICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCByaWdodExpbmVYIC0gMC41LCAwLCByaWdodExpbmVYIC0gMC41LCBoZWlnaHQpO1xuICAgIH1cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgaGFuZGxlU29ydCgpIHtcbiAgICB2YXIge3N0YXJ0LCBzdG9wfSA9IHRoaXMucHJvcHMucmFuZ2UsXG4gICAgICAgIG1pZGRsZSA9IChzdGFydCArIHN0b3ApIC8gMjtcbiAgICB0aGlzLmNhY2hlLnNvcnRSZWFkc0F0KHRoaXMucHJvcHMucmFuZ2UuY29udGlnLCBtaWRkbGUpO1xuICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2socmVhY3RFdmVudDogYW55KSB7XG4gICAgdmFyIGV2ID0gcmVhY3RFdmVudC5uYXRpdmVFdmVudCxcbiAgICAgICAgeCA9IGV2Lm9mZnNldFgsXG4gICAgICAgIHkgPSBldi5vZmZzZXRZO1xuICAgIHZhciBjdHggPSBjYW52YXNVdGlscy5nZXRDb250ZXh0KHRoaXMucmVmcy5jYW52YXMpO1xuICAgIHZhciB0cmFja2luZ0N0eCA9IG5ldyBkYXRhQ2FudmFzLkNsaWNrVHJhY2tpbmdDb250ZXh0KGN0eCwgeCwgeSk7XG5cbiAgICB2YXIgZ2Vub21lUmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlLFxuICAgICAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChnZW5vbWVSYW5nZS5jb250aWcsIGdlbm9tZVJhbmdlLnN0YXJ0LCBnZW5vbWVSYW5nZS5zdG9wKSxcbiAgICAgICAgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCksXG4gICAgICAgIC8vIElmIGNsaWNrLXRyYWNraW5nIGdldHMgc2xvdywgdGhpcyByYW5nZSBjb3VsZCBiZSBuYXJyb3dlZCB0byBvbmVcbiAgICAgICAgLy8gY2xvc2VyIHRvIHRoZSBjbGljayBjb29yZGluYXRlLCByYXRoZXIgdGhhbiB0aGUgd2hvbGUgdmlzaWJsZSByYW5nZS5cbiAgICAgICAgdkdyb3VwcyA9IHRoaXMuY2FjaGUuZ2V0R3JvdXBzT3ZlcmxhcHBpbmcocmFuZ2UpO1xuXG4gICAgcmVuZGVyUGlsZXVwKHRyYWNraW5nQ3R4LCBzY2FsZSwgcmFuZ2UsIG51bGwsIGZhbHNlLCB2R3JvdXBzKTtcbiAgICB2YXIgdlJlYWQgPSBfLmZpbmQodHJhY2tpbmdDdHguaGl0c1swXSwgaGl0ID0+IGhpdC5yZWFkKTtcbiAgICB2YXIgYWxlcnQgPSB3aW5kb3cuYWxlcnQgfHwgY29uc29sZS5sb2c7XG4gICAgaWYgKHZSZWFkKSB7XG4gICAgICBhbGVydCh2UmVhZC5yZWFkLmRlYnVnU3RyaW5nKCkpO1xuICAgIH1cbiAgfVxufVxuXG5QaWxldXBUcmFjay5kaXNwbGF5TmFtZSA9ICdwaWxldXAnO1xuUGlsZXVwVHJhY2suZGVmYXVsdE9wdGlvbnMgPSB7XG4gIHZpZXdBc1BhaXJzOiBmYWxzZSxcbiAgY29sb3JCeUluc2VydDogdHJ1ZSxcbiAgY29sb3JCeVN0cmFuZDogZmFsc2UsXG4gIGhpZGVBbGlnbm1lbnRzOiBmYWxzZVxufTtcblxuUGlsZXVwVHJhY2suZ2V0T3B0aW9uc01lbnUgPSBmdW5jdGlvbihvcHRpb25zOiBPYmplY3QpOiBhbnkge1xuICByZXR1cm4gW1xuICAgIHtrZXk6ICd2aWV3LXBhaXJzJywgbGFiZWw6ICdWaWV3IGFzIHBhaXJzJywgY2hlY2tlZDogb3B0aW9ucy52aWV3QXNQYWlyc30sXG4gICAgJy0nLFxuICAgIHtrZXk6ICdjb2xvci1pbnNlcnQnLCBsYWJlbDogJ0NvbG9yIGJ5IGluc2VydCBzaXplJywgY2hlY2tlZDogb3B0aW9ucy5jb2xvckJ5SW5zZXJ0fSxcbiAgICB7a2V5OiAnY29sb3Itc3RyYW5kJywgbGFiZWw6ICdDb2xvciBieSBzdHJhbmQnLCBjaGVja2VkOiBvcHRpb25zLmNvbG9yQnlTdHJhbmR9LFxuICAgIHtrZXk6ICdoaWRlLWFsaWdubWVudHMnLCBsYWJlbDogJ0hpZGUgYWxpZ25tZW50cycsIGNoZWNrZWQ6IG9wdGlvbnMuaGlkZUFsaWdubWVudHN9LFxuICAgICctJyxcbiAgICB7a2V5OiAnc29ydCcsIGxhYmVsOiAnU29ydCBhbGlnbm1lbnRzJ31cbiAgXTtcbn07XG5cbnZhciBtZXNzYWdlSWQgPSAxO1xuXG5QaWxldXBUcmFjay5oYW5kbGVTZWxlY3RPcHRpb24gPSBmdW5jdGlvbihrZXk6IHN0cmluZywgb2xkT3B0aW9uczogT2JqZWN0KTogT2JqZWN0IHtcbiAgdmFyIG9wdHMgPSBfLmNsb25lKG9sZE9wdGlvbnMpO1xuICBpZiAoa2V5ID09ICd2aWV3LXBhaXJzJykge1xuICAgIG9wdHMudmlld0FzUGFpcnMgPSAhb3B0cy52aWV3QXNQYWlycztcbiAgICByZXR1cm4gb3B0cztcbiAgfSBlbHNlIGlmIChrZXkgPT0gJ2NvbG9yLWluc2VydCcpIHtcbiAgICBvcHRzLmNvbG9yQnlJbnNlcnQgPSAhb3B0cy5jb2xvckJ5SW5zZXJ0O1xuICAgIGlmIChvcHRzLmNvbG9yQnlJbnNlcnQpIG9wdHMuY29sb3JCeVN0cmFuZCA9IGZhbHNlO1xuICAgIHJldHVybiBvcHRzO1xuICB9IGVsc2UgaWYgKGtleSA9PSAnY29sb3Itc3RyYW5kJykge1xuICAgIG9wdHMuY29sb3JCeVN0cmFuZCA9ICFvcHRzLmNvbG9yQnlTdHJhbmQ7XG4gICAgaWYgKG9wdHMuY29sb3JCeVN0cmFuZCkgb3B0cy5jb2xvckJ5SW5zZXJ0ID0gZmFsc2U7XG4gICAgcmV0dXJuIG9wdHM7XG4gIH0gZWxzZSBpZiAoa2V5ID09ICdoaWRlLWFsaWdubWVudHMnKSB7XG4gICAgb3B0cy5oaWRlQWxpZ25tZW50cyA9ICFvcHRzLmhpZGVBbGlnbm1lbnRzO1xuICAgIHJldHVybiBvcHRzO1xuICB9IGVsc2UgaWYgKGtleSA9PSAnc29ydCcpIHtcbiAgICBvcHRzLnNvcnQgPSAobWVzc2FnZUlkKyspO1xuICAgIHJldHVybiBvcHRzO1xuICB9XG4gIHJldHVybiBvbGRPcHRpb25zOyAgLy8gbm8gY2hhbmdlXG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gUGlsZXVwVHJhY2s7XG4iLCIvKipcbiAqIEEgdHJhY2sgd2hpY2ggc2hvd3MgYSBzY2FsZSBwcm9wb3J0aW9uYWwgdG8gc2xpY2Ugb2YgdGhlIGdlbm9tZSBiZWluZ1xuICogc2hvd24gYnkgdGhlIHJlZmVyZW5jZSB0cmFjay4gVGhpcyB0cmFjayB0cmllcyB0byBzaG93IGEgc2NhbGUgaW4ga2JwLFxuICogbWJwIG9yIGdicCBkZXBlbmRpbmcgb24gdGhlIHNpemUgb2YgdGhlIHZpZXcgYW5kIGFsc28gdHJpZXMgdG8gcm91bmQgdGhlXG4gKiBzY2FsZSBzaXplIChlLmcuIHByZWZlcnMgXCIxLDAwMCBicFwiLCBcIjEsMDAwIGticFwiIG92ZXIgXCIxIGticFwiIGFuZCBcIjEgbWJwXCIpXG4gKlxuICogICAgICAgICAgIDwtLS0tLS0tLS0tIDMwIGJwIC0tLS0tLS0tLS0+XG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7Vml6UHJvcHN9IGZyb20gJy4uL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCB0eXBlIHtTdGF0ZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IEVtcHR5U291cmNlIGZyb20gJy4uL3NvdXJjZXMvRW1wdHlTb3VyY2UnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuXG5jbGFzcyBTY2FsZVRyYWNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFZpelByb3BzPHZvaWQ+LCBTdGF0ZT4ge1xuICBwcm9wczogVml6UHJvcHM8dm9pZD47XG4gIHN0YXRlOiBTdGF0ZTsgIC8vIG5vIHN0YXRlLCB1c2VkIHRvIG1ha2UgZmxvdyBoYXBweVxuICBzdGF0aWMgZGVmYXVsdFNvdXJjZTogT2JqZWN0O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBWaXpQcm9wczx2b2lkPikge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgfVxuXG4gIGdldFNjYWxlKCk6IFNjYWxlIHtcbiAgICByZXR1cm4gZDN1dGlscy5nZXRUcmFja1NjYWxlKHRoaXMucHJvcHMucmFuZ2UsIHRoaXMucHJvcHMud2lkdGgpO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgcmV0dXJuIDxjYW52YXMgcmVmPSdjYW52YXMnIC8+O1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBnZXRET01Ob2RlKCk6IGFueSB7XG4gICAgcmV0dXJuIFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpO1xuICB9XG5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gdGhpcy5nZXRET01Ob2RlKCksXG4gICAgICAgIHtyYW5nZSwgd2lkdGgsIGhlaWdodH0gPSB0aGlzLnByb3BzO1xuXG4gICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG5cbiAgICB2YXIgY3R4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjYW52YXNVdGlscy5nZXRDb250ZXh0KGNhbnZhcykpO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnJlc2V0KCk7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG5cbiAgICB2YXIgdmlld1NpemUgPSByYW5nZS5zdG9wIC0gcmFuZ2Uuc3RhcnQgKyAxLFxuICAgICAgICBtaWRYID0gTWF0aC5yb3VuZCh3aWR0aCAvIDIpLFxuICAgICAgICBtaWRZID0gTWF0aC5yb3VuZChoZWlnaHQgLyAyKTtcblxuICAgIC8vIE1pZCBsYWJlbFxuICAgIHZhciB7cHJlZml4LCB1bml0fSA9IGQzdXRpbHMuZm9ybWF0UmFuZ2Uodmlld1NpemUpO1xuICAgIGN0eC5saW5lV2lkdGggPSAxO1xuICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5TQ0FMRV9GT05UX0NPTE9SO1xuICAgIGN0eC5mb250ID0gc3R5bGUuU0NBTEVfRk9OVF9TVFlMRTtcbiAgICBjdHgudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICBjdHguZmlsbFRleHQocHJlZml4ICsgXCIgXCIgKyB1bml0LFxuICAgICAgICAgICAgICAgICBtaWRYLFxuICAgICAgICAgICAgICAgICBtaWRZICsgc3R5bGUuU0NBTEVfVEVYVF9ZX09GRlNFVCk7XG5cbiAgICAvLyBMZWZ0IGxpbmVcbiAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIDAuNSwgbWlkWSAtIDAuNSwgbWlkWCAtIHN0eWxlLlNDQUxFX0xJTkVfUEFERElORyAtIDAuNSwgbWlkWSAtIDAuNSk7XG4gICAgLy8gTGVmdCBhcnJvd1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHgubW92ZVRvKDAuNSArIHN0eWxlLlNDQUxFX0FSUk9XX1NJWkUsIG1pZFkgLSBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFIC0gMC41KTtcbiAgICBjdHgubGluZVRvKDAuNSwgbWlkWSAtIDAuNSk7XG4gICAgY3R4LmxpbmVUbygwLjUgKyBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFLCBtaWRZICsgc3R5bGUuU0NBTEVfQVJST1dfU0laRSAtIDAuNSk7XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIGN0eC5maWxsKCk7XG4gICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgLy8gUmlnaHQgbGluZVxuICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgbWlkWCArIHN0eWxlLlNDQUxFX0xJTkVfUEFERElORyAtIDAuNSwgbWlkWSAtIDAuNSwgd2lkdGggLSAwLjUsIG1pZFkgLSAwLjUpO1xuICAgIC8vIFJpZ2h0IGFycm93XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5tb3ZlVG8od2lkdGggLSBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFIC0gMC41LCBtaWRZIC0gc3R5bGUuU0NBTEVfQVJST1dfU0laRSAtIDAuNSk7XG4gICAgY3R4LmxpbmVUbyh3aWR0aCAtIDAuNSwgbWlkWSAtIDAuNSk7XG4gICAgY3R4LmxpbmVUbyh3aWR0aCAtIHN0eWxlLlNDQUxFX0FSUk9XX1NJWkUgLSAwLjUsIG1pZFkgKyBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFIC0gMC41KTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LmZpbGwoKTtcbiAgICBjdHguc3Ryb2tlKCk7XG5cbiAgICAvLyBDbGVhbiB1cCBhZnRlcndhcmRzXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxufVxuXG5TY2FsZVRyYWNrLmRpc3BsYXlOYW1lID0gJ3NjYWxlJztcblNjYWxlVHJhY2suZGVmYXVsdFNvdXJjZSA9IEVtcHR5U291cmNlLmNyZWF0ZSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNjYWxlVHJhY2s7XG4iLCIvKipcbiAqIEEgY2FudmFzIHdoaWNoIG1haW50YWlucyBhIGNhY2hlIG9mIHByZXZpb3VzbHktcmVuZGVyZWQgdGlsZXMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBmcm9tICdkYXRhLWNhbnZhcyc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5pbXBvcnQgc2NhbGUgZnJvbSAnLi4vc2NhbGUnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5cbnR5cGUgVGlsZSA9IHtcbiAgcGl4ZWxzUGVyQmFzZTogbnVtYmVyO1xuICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPjtcbiAgYnVmZmVyOiBIVE1MQ2FudmFzRWxlbWVudDtcbn07XG5cbmNvbnN0IEVQU0lMT04gPSAxZS02O1xuY29uc3QgTUlOX1BYX1BFUl9CVUZGRVIgPSA1MDA7XG5cbmNvbnN0IERFQlVHX1JFTkRFUl9USUxFX0VER0VTID0gZmFsc2U7XG5cbmNsYXNzIFRpbGVkQ2FudmFzIHtcbiAgdGlsZUNhY2hlOiBUaWxlW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50aWxlQ2FjaGUgPSBbXTtcbiAgfVxuXG4gIHJlbmRlclRpbGUodGlsZTogVGlsZSkge1xuICAgIHZhciByYW5nZSA9IHRpbGUucmFuZ2UsXG4gICAgICAgIGhlaWdodCA9IHRoaXMuaGVpZ2h0Rm9yUmVmKHJhbmdlLmNvbnRpZyksXG4gICAgICAgIHdpZHRoID0gTWF0aC5yb3VuZCh0aWxlLnBpeGVsc1BlckJhc2UgKiByYW5nZS5sZW5ndGgoKSk7XG4gICAgLy8gVE9ETzogZG9lcyBpdCBtYWtlIHNlbnNlIHRvIHJlLXVzZSBjYW52YXNlcz9cbiAgICB0aWxlLmJ1ZmZlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyh0aWxlLmJ1ZmZlciwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICAvLyBUaGUgZmFyIHJpZ2h0IGVkZ2Ugb2YgdGhlIHRpbGUgaXMgdGhlIHN0YXJ0IG9mIHRoZSBfbmV4dF8gcmFuZ2UncyBiYXNlXG4gICAgLy8gcGFpciwgbm90IHRoZSBzdGFydCBvZiB0aGUgbGFzdCBvbmUgaW4gdGhpcyB0aWxlLlxuICAgIHZhciBzYyA9IHNjYWxlLmxpbmVhcigpLmRvbWFpbihbcmFuZ2Uuc3RhcnQoKSwgcmFuZ2Uuc3RvcCgpICsgMV0pLnJhbmdlKFswLCB3aWR0aF0pO1xuICAgIHZhciBjdHggPSBjYW52YXNVdGlscy5nZXRDb250ZXh0KHRpbGUuYnVmZmVyKTtcbiAgICB2YXIgZHR4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjdHgpO1xuICAgIHRoaXMucmVuZGVyKGR0eCwgc2MsIHJhbmdlKTtcbiAgfVxuXG4gIC8vIENyZWF0ZSAoYW5kIHJlbmRlcikgbmV3IHRpbGVzIHRvIGZpbGwgdGhlIGdhcHMuXG4gIG1ha2VOZXdUaWxlcyhleGlzdGluZ1RpbGVzOiBJbnRlcnZhbFtdLFxuICAgICAgICAgICAgICAgcGl4ZWxzUGVyQmFzZTogbnVtYmVyLFxuICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBUaWxlW10ge1xuICAgIHZhciBuZXdJbnRlcnZhbHMgPSBUaWxlZENhbnZhcy5nZXROZXdUaWxlUmFuZ2VzKFxuICAgICAgICAgIGV4aXN0aW5nVGlsZXMsIHJhbmdlLmludGVydmFsLCBwaXhlbHNQZXJCYXNlKTtcblxuICAgIHZhciBuZXdUaWxlcyA9IG5ld0ludGVydmFscy5tYXAoaXYgPT4gKHtcbiAgICAgIHBpeGVsc1BlckJhc2UsXG4gICAgICByYW5nZTogbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgaXYuc3RhcnQsIGl2LnN0b3ApLFxuICAgICAgYnVmZmVyOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxuICAgIH0pKTtcblxuICAgIC8vIFRPRE86IGl0IHdvdWxkIGJlIGJldHRlciB0byB3cmFwIHRoZXNlIGNhbGxzIGluIHJlcXVlc3RBbmltYXRpb25GcmFtZSxcbiAgICAvLyBzbyB0aGF0IHJlbmRlcmluZyBpcyBkb25lIG9mZiB0aGUgbWFpbiBldmVudCBsb29wLlxuICAgIG5ld1RpbGVzLmZvckVhY2godGlsZSA9PiB0aGlzLnJlbmRlclRpbGUodGlsZSkpO1xuICAgIHRoaXMudGlsZUNhY2hlID0gdGhpcy50aWxlQ2FjaGUuY29uY2F0KG5ld1RpbGVzKTtcbiAgICB0aGlzLnRpbGVDYWNoZS5zb3J0KChhLCBiKSA9PiBDb250aWdJbnRlcnZhbC5jb21wYXJlKGEucmFuZ2UsIGIucmFuZ2UpKTtcbiAgICByZXR1cm4gbmV3VGlsZXM7XG4gIH1cblxuICByZW5kZXJUb1NjcmVlbihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgIHNjYWxlOiAobnVtOiBudW1iZXIpID0+IG51bWJlcikge1xuICAgIHZhciBwaXhlbHNQZXJCYXNlID0gc2NhbGUoMSkgLSBzY2FsZSgwKTtcbiAgICB2YXIgdGlsZXNBdFJlcyA9IHRoaXMudGlsZUNhY2hlLmZpbHRlcih0aWxlID0+IE1hdGguYWJzKHRpbGUucGl4ZWxzUGVyQmFzZSAtIHBpeGVsc1BlckJhc2UpIDwgRVBTSUxPTiAmJiByYW5nZS5jaHJPbkNvbnRpZyh0aWxlLnJhbmdlLmNvbnRpZykpO1xuICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodEZvclJlZihyYW5nZS5jb250aWcpO1xuXG4gICAgdmFyIGV4aXN0aW5nSW50ZXJ2YWxzID0gdGlsZXNBdFJlcy5tYXAodGlsZSA9PiB0aWxlLnJhbmdlLmludGVydmFsKTtcbiAgICBpZiAoIXJhbmdlLmludGVydmFsLmlzQ292ZXJlZEJ5KGV4aXN0aW5nSW50ZXJ2YWxzKSkge1xuICAgICAgdGlsZXNBdFJlcyA9IHRpbGVzQXRSZXMuY29uY2F0KHRoaXMubWFrZU5ld1RpbGVzKGV4aXN0aW5nSW50ZXJ2YWxzLCBwaXhlbHNQZXJCYXNlLCByYW5nZSkpO1xuICAgIH1cblxuICAgIHZhciB0aWxlcyA9IHRpbGVzQXRSZXMuZmlsdGVyKHRpbGUgPT4gcmFuZ2UuaW50ZXJzZWN0cyh0aWxlLnJhbmdlKSk7XG5cbiAgICB0aWxlcy5mb3JFYWNoKHRpbGUgPT4ge1xuICAgICAgdmFyIGxlZnQgPSBNYXRoLnJvdW5kKHNjYWxlKHRpbGUucmFuZ2Uuc3RhcnQoKSkpLFxuICAgICAgICAgIG5leHRMZWZ0ID0gTWF0aC5yb3VuZChzY2FsZSh0aWxlLnJhbmdlLnN0b3AoKSArIDEpKSxcbiAgICAgICAgICB3aWR0aCA9IG5leHRMZWZ0IC0gbGVmdDtcbiAgICAgIC8vIERyYXdpbmcgYSAwcHggdGFsbCBjYW52YXMgdGhyb3dzIGluIEZpcmVmb3ggYW5kIFBoYW50b21KUy5cbiAgICAgIGlmICh0aWxlLmJ1ZmZlci5oZWlnaHQgPT09IDApIHJldHVybjtcbiAgICAgIC8vIFdlIGNhbid0IGp1c3QgdGhyb3cgdGhlIGltYWdlcyBvbiB0aGUgc2NyZWVuIHdpdGhvdXQgc2NhbGluZyBkdWUgdG9cbiAgICAgIC8vIHJvdW5kaW5nIGlzc3Vlcywgd2hpY2ggY2FuIHJlc3VsdCBpbiAxcHggZ2FwcyBvciBvdmVyZHJhd2luZy5cbiAgICAgIC8vIFdlIGFsd2F5cyBoYXZlOlxuICAgICAgLy8gICB3aWR0aCAtIHRpbGUuYnVmZmVyLndpZHRoIFxcaW4gey0xLCAwLCArMX1cbiAgICAgIGN0eC5kcmF3SW1hZ2UodGlsZS5idWZmZXIsIFxuICAgICAgICAgICAgICAgICAgICAwLCAwLCB0aWxlLmJ1ZmZlci53aWR0aCwgdGlsZS5idWZmZXIuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBsZWZ0LCAwLCB3aWR0aCwgdGlsZS5idWZmZXIuaGVpZ2h0KTtcblxuICAgICAgaWYgKERFQlVHX1JFTkRFUl9USUxFX0VER0VTKSB7XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgbGVmdCAtIDAuNSwgMCwgbGVmdCAtIDAuNSwgaGVpZ2h0KTtcbiAgICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCBuZXh0TGVmdCAtIDAuNSwgMCwgbmV4dExlZnQgLSAwLjUsIGhlaWdodCk7XG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpbnZhbGlkYXRlQWxsKCkge1xuICAgIHRoaXMudGlsZUNhY2hlID0gW107XG4gIH1cblxuICBpbnZhbGlkYXRlUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgICB0aGlzLnRpbGVDYWNoZSA9IHRoaXMudGlsZUNhY2hlLmZpbHRlcih0aWxlID0+ICF0aWxlLnJhbmdlLmludGVyc2VjdHMocmFuZ2UpKTtcbiAgfVxuXG4gIGhlaWdodEZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgdGhyb3cgJ05vdCBpbXBsZW1lbnRlZCc7XG4gIH1cblxuICByZW5kZXIoZHR4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgc2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IHZvaWQge1xuICAgIHRocm93ICdOb3QgaW1wbGVtZW50ZWQnO1xuICB9XG5cbiAgLy8gcmVxdWlyZXMgdGhhdCBleGlzdGluZ0ludGVydmFscyBiZSBzb3J0ZWQuXG4gIHN0YXRpYyBnZXROZXdUaWxlUmFuZ2VzKGV4aXN0aW5nSW50ZXJ2YWxzOiBJbnRlcnZhbFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZTogSW50ZXJ2YWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBpeGVsc1BlckJhc2U6IG51bWJlcik6IEludGVydmFsW10ge1xuICAgIHZhciBpdldpZHRoID0gTWF0aC5jZWlsKE1JTl9QWF9QRVJfQlVGRkVSIC8gcGl4ZWxzUGVyQmFzZSk7XG4gICAgdmFyIGZpcnN0U3RhcnQgPSBNYXRoLmZsb29yKHJhbmdlLnN0YXJ0IC8gaXZXaWR0aCkgKiBpdldpZHRoO1xuICAgIHZhciBpdnMgPSBfLnJhbmdlKGZpcnN0U3RhcnQsIHJhbmdlLnN0b3AsIGl2V2lkdGgpXG4gICAgICAgICAgICAgICAubWFwKHN0YXJ0ID0+IG5ldyBJbnRlcnZhbChzdGFydCwgc3RhcnQgKyBpdldpZHRoIC0gMSkpXG4gICAgICAgICAgICAgICAuZmlsdGVyKGl2ID0+ICFpdi5pc0NvdmVyZWRCeShleGlzdGluZ0ludGVydmFscykpO1xuXG4gICAgcmV0dXJuIHV0aWxzLmZsYXRNYXAoaXZzLCBpdiA9PiBpdi5jb21wbGVtZW50SW50ZXJ2YWxzKGV4aXN0aW5nSW50ZXJ2YWxzKSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGl2ID0+IGl2LmludGVyc2VjdHMocmFuZ2UpKTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gVGlsZWRDYW52YXM7XG4iLCIvKipcbiAqIFZpc3VhbGl6YXRpb24gb2YgdmFyaWFudHNcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcbmltcG9ydCB7QWxsZWxGcmVxdWVuY3lTdHJhdGVneX0gZnJvbSAnLi4vdHlwZXMnO1xuXG5cbmltcG9ydCB0eXBlIHtWY2ZEYXRhU291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1ZjZkRhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge0RhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuaW1wb3J0IHR5cGUge1NjYWxlfSBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHR5cGUge1N0YXRlfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5cbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQgc2hhbGxvd0VxdWFscyBmcm9tICdzaGFsbG93LWVxdWFscyc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5cbmNsYXNzIFZhcmlhbnRUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxWaXpQcm9wczxWY2ZEYXRhU291cmNlPiwgU3RhdGU+IHtcbiAgcHJvcHM6IFZpelByb3BzPFZjZkRhdGFTb3VyY2U+O1xuXG4gIHN0YXRlOiBTdGF0ZTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVml6UHJvcHM8VmNmRGF0YVNvdXJjZT4pIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICByZXR1cm4gPGNhbnZhcyBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyl9IC8+O1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG5cbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV3ZGF0YScsICgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHByZXZQcm9wcywgdGhpcy5wcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHMocHJldlN0YXRlLCB0aGlzLnN0YXRlKSkge1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyksXG4gICAgICAgIHt3aWR0aCwgaGVpZ2h0fSA9IHRoaXMucHJvcHM7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwKSByZXR1cm47XG4gICAgXG4gICAgaWYgKGNhbnZhcyAmJiBjYW52YXMgaW5zdGFuY2VvZiBFbGVtZW50KSB7IC8vIGNoZWNrIGZvciBnZXRDb250ZXh0XG4gICAgICBpZiAoY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHsgLy8gY2hlY2sgZm9yIHNpemVDYW52YXNcbiAgICAgICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICB9XG4gICAgICB2YXIgY3R4ID0gY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpO1xuICAgICAgdmFyIGR0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY3R4KTtcbiAgICAgIHRoaXMucmVuZGVyU2NlbmUoZHR4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbnZhcyBpcyBub3QgYW4gRWxlbWVudFwiKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJTY2VuZShjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICB2YXIgcmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlLFxuICAgICAgICBpbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0LCByYW5nZS5zdG9wKSxcbiAgICAgICAgdmFyaWFudHMgPSB0aGlzLnByb3BzLnNvdXJjZS5nZXRGZWF0dXJlc0luUmFuZ2UoaW50ZXJ2YWwpLFxuICAgICAgICBzY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKSxcbiAgICAgICAgaGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQsXG4gICAgICAgIHkgPSBoZWlnaHQgLSBzdHlsZS5WQVJJQU5UX0hFSUdIVCAtIDE7XG5cbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICBjdHgucmVzZXQoKTtcbiAgICBjdHguc2F2ZSgpO1xuXG4gICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLlZBUklBTlRfRklMTDtcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHlsZS5WQVJJQU5UX1NUUk9LRTtcbiAgICB2YXJpYW50cy5mb3JFYWNoKHZhcmlhbnQgPT4ge1xuICAgICAgdmFyIHZhcmlhbnRIZWlnaHRSYXRpbyA9IDEuMDtcbiAgICAgIGlmICh0aGlzLnByb3BzLm9wdGlvbnMudmFyaWFudEhlaWdodEJ5RnJlcXVlbmN5KSB7XG4gICAgICAgIHZhciBmcmVxdWVuY3kgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLmFsbGVsRnJlcXVlbmN5U3RyYXRlZ3kgPT09IHVuZGVmaW5lZCkgeyAvL2RlZmF1bHQgc3RhcnRlZ3lcbiAgICAgICAgICBmcmVxdWVuY3kgPSB2YXJpYW50Lm1ham9yRnJlcXVlbmN5O1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMub3B0aW9ucy5hbGxlbEZyZXF1ZW5jeVN0cmF0ZWd5ID09PSBBbGxlbEZyZXF1ZW5jeVN0cmF0ZWd5Lk1ham9yKSB7XG4gICAgICAgICAgZnJlcXVlbmN5ID0gdmFyaWFudC5tYWpvckZyZXF1ZW5jeTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLm9wdGlvbnMuYWxsZWxGcmVxdWVuY3lTdHJhdGVneSA9PT0gQWxsZWxGcmVxdWVuY3lTdHJhdGVneS5NaW5vcikge1xuICAgICAgICAgIGZyZXF1ZW5jeSA9IHZhcmlhbnQubWlub3JGcmVxdWVuY3k7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJVbmtub3duIEFsbGVsRnJlcXVlbmN5U3RyYXRlZ3k6IFwiLHRoaXMucHJvcHMub3B0aW9ucy5hbGxlbEZyZXF1ZW5jeVN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZnJlcXVlbmN5ICE9PSBudWxsICYmIGZyZXF1ZW5jeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFyaWFudEhlaWdodFJhdGlvID0gZnJlcXVlbmN5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgaGVpZ2h0ID0gc3R5bGUuVkFSSUFOVF9IRUlHSFQqdmFyaWFudEhlaWdodFJhdGlvO1xuICAgICAgdmFyIHZhcmlhbnRZID0geSAtIDAuNSArIHN0eWxlLlZBUklBTlRfSEVJR0hUIC0gaGVpZ2h0O1xuICAgICAgdmFyIHZhcmlhbnRYID0gTWF0aC5yb3VuZChzY2FsZSh2YXJpYW50LnBvc2l0aW9uKSkgLSAwLjU7XG4gICAgICB2YXIgd2lkdGggPSBNYXRoLm1heCgxLCBNYXRoLnJvdW5kKHNjYWxlKHZhcmlhbnQucG9zaXRpb24gKyAxKSAtIHNjYWxlKHZhcmlhbnQucG9zaXRpb24pKSk7XG4gICAgICBjdHgucHVzaE9iamVjdCh2YXJpYW50KTtcblxuICAgICAgY3R4LmZpbGxSZWN0KHZhcmlhbnRYLCB2YXJpYW50WSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICBjdHguc3Ryb2tlUmVjdCh2YXJpYW50WCwgdmFyaWFudFksIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgY3R4LnBvcE9iamVjdCgpO1xuICAgIH0pO1xuXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKHJlYWN0RXZlbnQ6IGFueSkge1xuICAgIHZhciBldiA9IHJlYWN0RXZlbnQubmF0aXZlRXZlbnQsXG4gICAgICAgIHggPSBldi5vZmZzZXRYLFxuICAgICAgICB5ID0gZXYub2Zmc2V0WSxcbiAgICAgICAgY2FudmFzOiAobnVsbCB8IEVsZW1lbnQgfCBUZXh0KSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpO1xuXG4gICAgaWYgKGNhbnZhcyA9PSBudWxsICkgcmV0dXJuO1xuXG4gICAgaWYgKGNhbnZhcyAmJiBjYW52YXMgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICB2YXIgY3R4ID0gY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpLFxuICAgICAgICAgIHRyYWNraW5nQ3R4ID0gbmV3IGRhdGFDYW52YXMuQ2xpY2tUcmFja2luZ0NvbnRleHQoY3R4LCB4LCB5KTtcbiAgICAgIHRoaXMucmVuZGVyU2NlbmUodHJhY2tpbmdDdHgpO1xuXG4gICAgICB2YXIgdmFyaWFudHMgPSB0cmFja2luZ0N0eC5oaXQ7XG4gICAgICBpZiAodmFyaWFudHMgJiYgdmFyaWFudHMubGVuZ3RoPjApIHtcbiAgICAgICAgdmFyIGRhdGEgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaT0wO2k8dmFyaWFudHMubGVuZ3RoO2krKykge1xuICAgICAgICAgIGRhdGEucHVzaCh7XG4gICAgICAgICAgICBpZDogICAgICAgdmFyaWFudHNbaV0uaWQsXG4gICAgICAgICAgICB2Y2ZMaW5lOiAgdmFyaWFudHNbaV0udmNmTGluZSxcbiAgICAgICAgICAgIHJlZjogICAgICB2YXJpYW50c1tpXS5yZWYsXG4gICAgICAgICAgICBhbHQ6ICAgICAgdmFyaWFudHNbaV0uYWx0fSk7XG4gICAgICAgIH1cbiAgICAgICAgLy91c2VyIHByb3ZpZGVkIGZ1bmN0aW9uIGZvciBkaXNwbGF5aW5nIHBvcHVwXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5vcHRpb25zLm9uVmFyaWFudENsaWNrZWQgID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLm9wdGlvbnMub25WYXJpYW50Q2xpY2tlZChkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlZhcmlhbnRzIGNsaWNrZWQ6IFwiLCBkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2FudmFzIGlzIG5vdCBhbiBFbGVtZW50XCIpO1xuICAgIH1cbiAgfVxufVxuXG5WYXJpYW50VHJhY2suZGlzcGxheU5hbWUgPSAndmFyaWFudHMnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZhcmlhbnRUcmFjaztcbiIsIi8qKlxuICogVXRpbGl0eSBjb2RlIGZvciB3b3JraW5nIHdpdGggdGhlIEhUTUwgY2FudmFzIGVsZW1lbnQuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyBSZXR1cm4gdGhlIDJEIGNvbnRleHQgZm9yIGEgY2FudmFzLiBUaGlzIGlzIGhlbHBmdWwgZm9yIHR5cGUgc2FmZXR5LlxuZnVuY3Rpb24gZ2V0Q29udGV4dChlbDogRWxlbWVudCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XG4gIC8vIFRoZSB0eXBlY2FzdHMgdGhyb3VnaCBgYW55YCBhcmUgdG8gZm9vbCBmbG93LlxuICB2YXIgY2FudmFzID0gKChlbCA6IGFueSkgOiBIVE1MQ2FudmFzRWxlbWVudCk7XG4gIHZhciBjdHggPSAoKGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpIDogYW55KSA6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk7XG4gIHJldHVybiBjdHg7XG59XG5cbi8vIFN0cm9rZSBhIGxpbmUgYmV0d2VlbiB0d28gcG9pbnRzXG5mdW5jdGlvbiBkcmF3TGluZShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcikge1xuICBjdHguYmVnaW5QYXRoKCk7XG4gIGN0eC5tb3ZlVG8oeDEsIHkxKTtcbiAgY3R4LmxpbmVUbyh4MiwgeTIpO1xuICBjdHguc3Ryb2tlKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRDb250ZXh0LFxuICBkcmF3TGluZVxufTtcbiIsIi8qKlxuICogRDMvRE9NLXJlbGF0ZWQgdXRpbGl0eSBmdW5jdGlvbnMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBzY2FsZSBmcm9tICcuLi9zY2FsZSc7XG5cbi8vIFN1YnR5cGUgb2YgR2Vub21lUmFuZ2VcbnR5cGUgUmFuZ2UgPSB7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIFNjYWxlID0gKG51bTogbnVtYmVyKSA9PiBudW1iZXI7XG5cbi8qKlxuICogU2hhcmVkIHgtYXhpcyBzY2FsaW5nIGxvZ2ljIGZvciB0cmFja3NcbiAqL1xuZnVuY3Rpb24gZ2V0VHJhY2tTY2FsZShyYW5nZTogUmFuZ2UsIHdpZHRoOiBudW1iZXIpOiBhbnkge1xuICBpZiAoIXJhbmdlKSByZXR1cm4gc2NhbGUubGluZWFyKCk7XG4gIHJldHVybiBzY2FsZS5saW5lYXIoKVxuICAgICAgICAgIC5kb21haW4oW3JhbmdlLnN0YXJ0LCByYW5nZS5zdG9wICsgMV0pICAvLyAxIGJwIHdpZGVcbiAgICAgICAgICAucmFuZ2UoWzAsIHdpZHRoXSk7XG59XG5cbnZhciBmb3JtYXRQcmVmaXhlcyA9IFtcIlwiLFwia1wiLFwiTVwiLFwiR1wiLFwiVFwiLFwiUFwiLFwiRVwiLFwiWlwiLFwiWVwiXTtcblxuLy8gUmV0dXJucyB0aGUgU0ktcHJlZml4IGZvciBudW0sIGFsYSBkMy5mb3JtYXRQcmVmaXguXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21ib3N0b2NrL2QzL2Jsb2IvNWI5ODFhMTgvc3JjL2Zvcm1hdC9mb3JtYXRQcmVmaXguanNcbmZ1bmN0aW9uIGZvcm1hdFByZWZpeCh2YWx1ZTogbnVtYmVyKSB7XG4gIHZhciBpID0gMDtcbiAgaWYgKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgKj0gLTE7XG4gICAgaSA9IDEgKyBNYXRoLmZsb29yKDFlLTEyICsgTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjEwKTtcbiAgICBpID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjQsIE1hdGguZmxvb3IoKGkgLSAxKSAvIDMpICogMykpO1xuICB9XG4gIHZhciBrID0gTWF0aC5wb3coMTAsIGkpO1xuICByZXR1cm4ge1xuICAgIHN5bWJvbDogZm9ybWF0UHJlZml4ZXNbaSAvIDNdLFxuICAgIHNjYWxlOiBkID0+IGQgLyBrXG4gIH07XG59XG5cbi8qKlxuICogRm9ybWF0cyB0aGUgc2l6ZSBvZiBhIHZpZXcgYW5kIGluZmVycyB3aGF0IHByZWZpeC91bml0IHRvIHNob3cuXG4gKiBUaGlzIGZvcm1hdHRpbmcgZm9sbG93cyBJR1YncyBjb252ZW50aW9ucyByZWdhcmRpbmcgcmFuZ2UgZGlzcGxheTpcbiAqICBcIjEgYnBcIiwgXCIxMDEgYnBcIiwgXCIxLDAwMSBicFwiLCBcIjEsMDAxIGticFwiLCAuLi5cbiAqL1xuZnVuY3Rpb24gZm9ybWF0UmFuZ2Uodmlld1NpemU6IG51bWJlcik6IHtwcmVmaXg6IHN0cmluZywgdW5pdDogc3RyaW5nfSB7XG4gIHZhciB0bXBWaWV3U2l6ZSA9IHZpZXdTaXplIC8gMTAwMCxcbiAgICAgIGZwcmVmaXggPSBmb3JtYXRQcmVmaXgoTWF0aC5tYXgoMSwgdG1wVmlld1NpemUpKSxcbiAgICAgIHVuaXQgPSBmcHJlZml4LnN5bWJvbCArIFwiYnBcIiwgIC8vIGJwLCBrYnAsIE1icCwgR2JwXG4gICAgICBwcmVmaXggPSBNYXRoLnJvdW5kKGZwcmVmaXguc2NhbGUodmlld1NpemUpKS50b0xvY2FsZVN0cmluZygpO1xuICByZXR1cm4ge3ByZWZpeCwgdW5pdH07XG59XG5cbmZ1bmN0aW9uIGhlaWdodEZvckNhbnZhcyhlbDogSFRNTENhbnZhc0VsZW1lbnQsIGhlaWdodDogbnVtYmVyKTogbnVtYmVyIHtcbiAgdmFyIHJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gIHJldHVybiAoaGVpZ2h0ICogcmF0aW8pO1xufVxuXG4vKipcbiAqIFNpemVzIGEgY2FudmFzIGFwcHJvcHJpYXRlbHkgZm9yIHRoaXMgZGV2aWNlLlxuICovXG5mdW5jdGlvbiBzaXplQ2FudmFzKGVsOiBIVE1MQ2FudmFzRWxlbWVudCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgdmFyIHJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gIGVsLndpZHRoID0gd2lkdGggKiByYXRpbztcbiAgZWwuaGVpZ2h0ID0gaGVpZ2h0ICogcmF0aW87XG4gIGVsLnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnO1xuICBlbC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xuICB2YXIgY3R4ID0gZWwuZ2V0Q29udGV4dCgnMmQnKTtcbiAgaWYgKGN0eCAhPT0gbnVsbCAmJiBjdHggaW5zdGFuY2VvZiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICBjdHguc2NhbGUocmF0aW8sIHJhdGlvKTtcbiAgfVxufVxuXG4vKipcbiAqIEZpbmQgdGhlIGNsb3Nlc3QgcGFyZW50IHdpdGggYSBnaXZlbiBjbGFzcyBuYW1lLlxuICovXG5mdW5jdGlvbiBmaW5kUGFyZW50KGluRWw6IEVsZW1lbnQsIGNsYXNzTmFtZTogc3RyaW5nKTogP0VsZW1lbnQge1xuICB2YXIgZWwgPSBpbkVsOyAgLy8gdGhpcyBpcyBmb3IgRmxvdy5cbiAgZG8ge1xuICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkgcmV0dXJuIGVsO1xuICAgIGVsID0gZWwucGFyZW50RWxlbWVudDtcbiAgfSB3aGlsZSAoZWwpO1xuICByZXR1cm4gbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGhlaWdodEZvckNhbnZhcyxcbiAgZm9ybWF0UmFuZ2UsXG4gIGdldFRyYWNrU2NhbGUsXG4gIHNpemVDYW52YXMsXG4gIGZpbmRQYXJlbnRcbn07XG4iLCIvKiogQGZsb3cgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0FsaWdubWVudCwgQ2lnYXJTeW1ib2x9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgdHlwZSBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuXG4vKipcbiAqIENhbGN1bGF0ZSByb3cgaGVpZ2h0IGZvciBwaWxldXBcbiAqIHJvdzogcm93IG51bWJlclxuICogaGVpZ2h0OiBoZWlnaHQgb2YgZWxlbWVudHMgdG8gZHJhd1xuICogc3BhY2luZzogc3BhY2luZyBiZXR3ZWVuIGVsZW1lbnRzIHRvIGRyYXdcbiAqIFJldHVybnMgeSBsb2NhdGlvbiBmb3IgdGhpcyByb3dcbiAqL1xuZnVuY3Rpb24geUZvclJvdyhyb3c6IG51bWJlciwgaGVpZ2h0OiBudW1iZXI9c3R5bGUuUkVBRF9IRUlHSFQsIHNwYWNpbmc6IG51bWJlcj1zdHlsZS5SRUFEX1NQQUNJTkcpOiBudW1iZXIge1xuICByZXR1cm4gKHJvdyAqIChoZWlnaHQgKyBzcGFjaW5nKSk7XG59XG5cbi8qKlxuICogR2l2ZW4gYSBsaXN0IG9mIEludGVydmFscywgcmV0dXJuIGEgcGFyYWxsZWwgbGlzdCBvZiByb3cgbnVtYmVycyBmb3IgZWFjaC5cbiAqIEFzc3VtaW5nIHJvd3MgPSBwaWxldXAocmVhZHMpLCB0aGVuIHlvdXIgZ3VhcmFudGVlIGlzIHRoYXRcbiAqIHJvd3NbaV0gPT0gcm93c1tqXSA9PiAhcmVhZHNbaV0uaW50ZXJzZWN0cyhyZWFkc1tqXSlcbiAqL1xuZnVuY3Rpb24gcGlsZXVwKHJlYWRzOiBJbnRlcnZhbFtdKTogbnVtYmVyW10ge1xuICB2YXIgcm93cyA9IG5ldyBBcnJheShyZWFkcy5sZW5ndGgpLFxuICAgICAgbGFzdFJlYWRzID0gW107ICAvLyByb3cgbnVtYmVyIC0tPiBsYXN0IEludGVydmFsIGluIHRoYXQgcm93XG5cbiAgLy8gRm9yIGVhY2ggcmVhZCwgZmluZCB0aGUgZmlyc3Qgcm93IHRoYXQgaXQgd2lsbCBmaXQgaW4uXG4gIC8vIFRoaXMgaXMgcG90ZW50aWFsbHkgTyhuXjIpIGluIHRoZSBudW1iZXIgb2YgcmVhZHM7IHRoZXJlJ3MgcHJvYmFibHkgYVxuICAvLyBiZXR0ZXIgd2F5LlxuICBmb3IgKHZhciBpID0gMDsgaSA8IHJlYWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHIgPSByZWFkc1tpXTtcbiAgICB2YXIgcm93TnVtID0gbGFzdFJlYWRzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxhc3RSZWFkcy5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKCFyLmludGVyc2VjdHMobGFzdFJlYWRzW2pdKSkge1xuICAgICAgICByb3dOdW0gPSBqO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcm93c1tpXSA9IHJvd051bTtcbiAgICBsYXN0UmVhZHNbcm93TnVtXSA9IHI7XG4gIH1cblxuICByZXR1cm4gcm93cztcbn1cblxuLyoqXG4gKiBBZGQgYSByZWFkIHRvIGFuIGV4aXN0aW5nIHBpbGV1cC5cbiAqIHBpbGV1cCBtYXBzIHtyb3cgLS0+IHJlYWRzIGluIHRoYXQgcm93fVxuICogVGhpcyBtb2RpZmllcyBwaWxldXAgYnkgaW5zZXJ0aW5nIHRoZSByZWFkIGluIHRoZSBhcHByb3ByaWF0ZSByb3cuXG4gKiBSZXR1cm5zIHRoZSBjaG9zZW4gcm93IG51bWJlci5cbiAqL1xuZnVuY3Rpb24gYWRkVG9QaWxldXAocmVhZDogSW50ZXJ2YWwsIHBpbGV1cDogQXJyYXk8SW50ZXJ2YWxbXT4pOiBudW1iZXIge1xuICB2YXIgY2hvc2VuUm93ID0gLTE7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGlsZXVwLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHJlYWRzID0gcGlsZXVwW2ldO1xuICAgIHZhciBvayA9IHRydWU7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCByZWFkcy5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKHJlYWRzW2pdLmludGVyc2VjdHMocmVhZCkpIHtcbiAgICAgICAgb2sgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9rKSB7XG4gICAgICBjaG9zZW5Sb3cgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKGNob3NlblJvdyA9PSAtMSkge1xuICAgIGNob3NlblJvdyA9IHBpbGV1cC5sZW5ndGg7XG4gICAgcGlsZXVwW2Nob3NlblJvd10gPSBbXTsgIC8vIGdvIGRlZXBlclxuICB9XG5cbiAgcGlsZXVwW2Nob3NlblJvd10ucHVzaChyZWFkKTtcbiAgcmV0dXJuIGNob3NlblJvdztcbn1cblxuZXhwb3J0IHR5cGUgQmFzZVBhaXIgPSB7XG4gIHBvczogbnVtYmVyO1xuICBiYXNlUGFpcjogc3RyaW5nO1xuICBxdWFsaXR5OiBudW1iZXI7XG59XG5cbmZ1bmN0aW9uIGZpbmRNaXNtYXRjaGVzKHJlZmVyZW5jZTogc3RyaW5nLCBzZXE6IHN0cmluZywgcmVmUG9zOiBudW1iZXIsIHNjb3JlczogbnVtYmVyW10pOiBCYXNlUGFpcltdIHtcbiAgdmFyIG91dCA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHNlcS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwb3MgPSByZWZQb3MgKyBpLFxuICAgICAgICByZWYgPSByZWZlcmVuY2UuY2hhckF0KGkpLFxuICAgICAgICBiYXNlUGFpciA9IHNlcS5jaGFyQXQoaSk7XG4gICAgaWYgKHJlZiAhPSBiYXNlUGFpciAmJiByZWYgIT0gJy4nKSB7XG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHBvcyxcbiAgICAgICAgYmFzZVBhaXIsXG4gICAgICAgIHF1YWxpdHk6IHNjb3Jlc1tpXVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXQ7XG59XG5cbi8vIERldGVybWluZSB3aGljaCBhbGlnbm1lbnQgc2VnbWVudCB0byByZW5kZXIgYXMgYW4gYXJyb3cuXG4vLyBUaGlzIGlzIGVpdGhlciB0aGUgZmlyc3Qgb3IgbGFzdCAnTScgc2VjdGlvbiwgZXhjbHVkaW5nIHNvZnQgY2xpcHBpbmcuXG5mdW5jdGlvbiBnZXRBcnJvd0luZGV4KHJlYWQ6IEFsaWdubWVudCk6IG51bWJlciB7XG4gIHZhciBpLCBvcCwgb3BzID0gcmVhZC5jaWdhck9wcztcbiAgaWYgKHJlYWQuZ2V0U3RyYW5kKCkgPT0gJy0nKSB7XG4gICAgZm9yIChpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgb3AgPSBvcHNbaV07XG4gICAgICBpZiAob3Aub3AgPT0gJ1MnKSBjb250aW51ZTtcbiAgICAgIGlmIChvcC5vcCA9PSAnTScpIHJldHVybiBpO1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKGkgPSBvcHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIG9wID0gb3BzW2ldO1xuICAgICAgaWYgKG9wLm9wID09ICdTJykgY29udGludWU7XG4gICAgICBpZiAob3Aub3AgPT0gJ00nKSByZXR1cm4gaTtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG4vLyBUaGUgY29tbWVudHMgYmVsb3cgY29tZSBmcm9tIHRoZSBTQU0gc3BlY1xudmFyIENpZ2FyT3AgPSB7XG4gIE1BVENIOiAnTScsICAvLyBhbGlnbm1lbnQgbWF0Y2ggKGNhbiBiZSBhIHNlcXVlbmNlIG1hdGNoIG9yIG1pc21hdGNoKVxuICBJTlNFUlQ6ICdJJywgIC8vIGluc2VydGlvbiB0byB0aGUgcmVmZXJlbmNlXG4gIERFTEVURTogJ0QnLCAgLy8gZGVsZXRpb24gZnJvbSB0aGUgcmVmZXJlbmNlXG4gIFNLSVA6ICdOJywgIC8vIHNraXBwZWQgcmVnaW9uIGZyb20gdGhlIHJlZmVyZW5jZVxuICBTT0ZUQ0xJUDogJ1MnLCAgLy8gc29mdCBjbGlwcGluZyAoY2xpcHBlZCBzZXF1ZW5jZXMgcHJlc2VudCBpbiBTRVEpXG4gIEhBUkRDTElQOiAnSCcsICAvLyBoYXJkIGNsaXBwaW5nIChjbGlwcGVkIHNlcXVlbmNlcyBOT1QgcHJlc2VudCBpbiBTRVEpXG4gIFBBRERJTkc6ICdQJywgIC8vIHBhZGRpbmcgKHNpbGVudCBkZWxldGlvbiBmcm9tIHBhZGRlZCByZWZlcmVuY2UpXG4gIFNFUU1BVENIOiAnPScsICAvLyBzZXF1ZW5jZSBtYXRjaFxuICBTRVFNSVNNQVRDSDogJ1gnICAvLyBzZXF1ZW5jZSBtaXNtYXRjaFxufTtcblxudHlwZSBPcCA9IHtcbiAgb3A6IENpZ2FyU3ltYm9sO1xuICBsZW5ndGg6IG51bWJlcjtcbiAgcG9zOiBudW1iZXI7XG4gIGFycm93OiA/KCdMJ3wnUicpO1xufVxuXG5leHBvcnQgdHlwZSBPcEluZm8gPSB7XG4gIG9wczogT3BbXSxcbiAgbWlzbWF0Y2hlczogQmFzZVBhaXJbXVxufVxuXG4vLyBCcmVha3MgdGhlIHJlYWQgZG93biBpbnRvIENpZ2FyIE9wcyBzdWl0YWJsZSBmb3IgZGlzcGxheVxuZnVuY3Rpb24gZ2V0T3BJbmZvKHJlYWQ6IEFsaWdubWVudCwgcmVmZXJlbmNlU291cmNlOiBPYmplY3QpOiBPcEluZm8ge1xuICB2YXIgb3BzID0gcmVhZC5jaWdhck9wcztcblxuICB2YXIgcmFuZ2UgPSByZWFkLmdldEludGVydmFsKCksXG4gICAgICBzdGFydCA9IHJhbmdlLnN0YXJ0KCksXG4gICAgICBzZXEgPSByZWFkLmdldFNlcXVlbmNlKCksXG4gICAgICBzY29yZXMgPSByZWFkLmdldFF1YWxpdHlTY29yZXMoKSxcbiAgICAgIHNlcVBvcyA9IDAsXG4gICAgICByZWZQb3MgPSBzdGFydCxcbiAgICAgIGFycm93SW5kZXggPSBnZXRBcnJvd0luZGV4KHJlYWQpO1xuXG4gIHZhciByZXN1bHQ6IE9wW10gPSBbXTtcbiAgdmFyIG1pc21hdGNoZXMgPSAoW106IEJhc2VQYWlyW10pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBvcCA9IG9wc1tpXTtcbiAgICBpZiAob3Aub3AgPT0gJ00nKSB7XG4gICAgICB2YXIgcmVmID0gcmVmZXJlbmNlU291cmNlLmdldFJhbmdlQXNTdHJpbmcoe1xuICAgICAgICBjb250aWc6IHJhbmdlLmNvbnRpZyxcbiAgICAgICAgc3RhcnQ6IHJlZlBvcyxcbiAgICAgICAgc3RvcDogcmVmUG9zICsgb3AubGVuZ3RoIC0gMVxuICAgICAgfSk7XG4gICAgICB2YXIgbVNlcSA9IHNlcS5zbGljZShzZXFQb3MsIHNlcVBvcyArIG9wLmxlbmd0aCk7XG4gICAgICBtaXNtYXRjaGVzID0gbWlzbWF0Y2hlcy5jb25jYXQoZmluZE1pc21hdGNoZXMocmVmLCBtU2VxLCByZWZQb3MsIHNjb3JlcykpO1xuICAgIH1cblxuICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgIG9wOiBvcC5vcCxcbiAgICAgIGxlbmd0aDogb3AubGVuZ3RoLFxuICAgICAgcG9zOiByZWZQb3MsXG4gICAgICBhcnJvdzogbnVsbCAvLyBkaXJlY3Rpb24gd2lsbCBiZSBzZXQgYmVsb3dcbiAgICB9KTtcblxuICAgIC8vIFRoZXNlIGFyZSB0aGUgY2lnYXIgb3BlcmF0aW9ucyB3aGljaCBhZHZhbmNlIHBvc2l0aW9uIGluIHRoZSByZWZlcmVuY2VcbiAgICBzd2l0Y2ggKG9wLm9wKSB7XG4gICAgICBjYXNlIENpZ2FyT3AuTUFUQ0g6XG4gICAgICBjYXNlIENpZ2FyT3AuREVMRVRFOlxuICAgICAgY2FzZSBDaWdhck9wLlNLSVA6XG4gICAgICBjYXNlIENpZ2FyT3AuU0VRTUFUQ0g6XG4gICAgICBjYXNlIENpZ2FyT3AuU0VRTUlTTUFUQ0g6XG4gICAgICAgIHJlZlBvcyArPSBvcC5sZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gVGhlc2UgYXJlIHRoZSBjaWdhciBvcGVyYXRpb25zIHdoaWNoIGFkdmFuY2UgdGhlIHBlci1hbGlnbm1lbnQgc2VxdWVuY2UuXG4gICAgc3dpdGNoIChvcC5vcCkge1xuICAgICAgY2FzZSBDaWdhck9wLk1BVENIOlxuICAgICAgY2FzZSBDaWdhck9wLklOU0VSVDpcbiAgICAgIGNhc2UgQ2lnYXJPcC5TT0ZUQ0xJUDpcbiAgICAgIGNhc2UgQ2lnYXJPcC5TRVFNQVRDSDpcbiAgICAgIGNhc2UgQ2lnYXJPcC5TRVFNSVNNQVRDSDpcbiAgICAgICAgc2VxUG9zICs9IG9wLmxlbmd0aDtcbiAgICB9XG5cbiAgfVxuXG4gIGlmIChhcnJvd0luZGV4ID49IDApIHtcbiAgICByZXN1bHRbYXJyb3dJbmRleF0uYXJyb3cgPSByZWFkLmdldFN0cmFuZCgpID09ICctJyA/ICdMJyA6ICdSJztcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgb3BzOiByZXN1bHQsXG4gICAgbWlzbWF0Y2hlc1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgeUZvclJvdyxcbiAgcGlsZXVwLFxuICBhZGRUb1BpbGV1cCxcbiAgZ2V0T3BJbmZvLFxuICBDaWdhck9wXG59O1xuIl19
