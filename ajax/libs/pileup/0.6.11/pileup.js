(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.pileup = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){t.Backbone=e(t,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){var s=t.Backbone,r=[],a=r.slice;e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,i){return c(this,"on",t,[e,i])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:i,ctx:i||this}),this):this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var s=this,r=i.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var s,r,a,o,h,u,l,d;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(o=t?[t]:i.keys(this._events),h=0,u=o.length;h<u;h++)if(t=o[h],a=this._events[t]){if(this._events[t]=s=[],e||n)for(l=0,d=a.length;l<d;l++)r=a[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&u(i,e),n&&u(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var a in s)t=s[a],t.off(e,n,this),(r||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},h=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(h.test(i)){for(var r=i.split(h),a=0,o=r.length;a<o;a++)t[e].apply(t,[r[a]].concat(n));return!1}return!0},u=function(t,e){var i,n=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},l={listenTo:"on",listenToOnce:"once"};i.each(l,function(t,e){o[e]=function(e,n,s){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=i.uniqueId("l"))]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),o.bind=o.on,o.unbind=o.off,i.extend(e,o);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,r,a,o,h,c,u,l;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;a=n.unset,h=n.silent,o=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),l=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],i.isEqual(l[s],e)||o.push(s),i.isEqual(u[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete l[s]:l[s]=e;if(!h){o.length&&(this._pending=n);for(var d=0,f=o.length;d<f;d++)this.trigger("change:"+o[d],this,l[o[d]],n)}if(c)return this;if(!h)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(s[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){if(!e.set(e.parse(i,t),t))return!1;n&&n(e,i,t),e.trigger("sync",e,i,t)},U(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,r,a,o=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},o,s)),void 0===n.parse&&(n.parse=!0);var h=this,c=n.success;return n.success=function(t){h.attributes=o;var e=h.parse(t,n);if(n.wait&&(e=i.extend(s||{},e)),i.isObject(e)&&!h.set(e,n))return!1;c&&c(h,t,n),h.trigger("sync",h,t,n)},U(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=s),a=this.sync(r,this,n),s&&n.wait&&(this.attributes=o),a},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;U(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||j();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});var f=["keys","values","pairs","invert","pick","omit"];i.each(f,function(t){d.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};i.extend(p.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,v))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var s,r,a,o;for(s=0,r=t.length;s<r;s++)(o=t[s]=this.get(t[s]))&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var s,r,a,o,h,c,u,l=e.at,f=this.model,p=this.comparator&&null==l&&!1!==e.sort,v=i.isString(this.comparator)?this.comparator:null,m=[],y=[],_={},b=e.add,w=e.merge,x=e.remove,E=!(p||!b||!x)&&[];for(s=0,r=t.length;s<r;s++){if(h=t[s]||{},a=h instanceof d?o=h:h[f.prototype.idAttribute||"id"],c=this.get(a))x&&(_[c.cid]=!0),w&&(h=h===o?o.attributes:h,e.parse&&(h=c.parse(h,e)),c.set(h,e),p&&!u&&c.hasChanged(v)&&(u=!0)),t[s]=c;else if(b){if(!(o=t[s]=this._prepareModel(h,e)))continue;m.push(o),this._addReference(o,e)}o=c||o,!E||!o.isNew()&&_[o.id]||E.push(o),_[o.id]=!0}if(x){for(s=0,r=this.length;s<r;++s)_[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,e)}if(m.length||E&&E.length)if(p&&(u=!0),this.length+=m.length,null!=l)for(s=0,r=m.length;s<r;s++)this.models.splice(l+s,0,m[s]);else{E&&(this.models.length=0);var k=E||m;for(s=0,r=k.length;s<r;s++)this.models.push(k[s])}if(u&&this.sort({silent:!0}),!e.silent){for(s=0,r=m.length;s<r;s++)(o=m[s]).trigger("add",o,this,e);(u||E&&E.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;n<s;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(m,function(t){p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){p.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)}});var _=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(_.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==i&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(b),r=s[1],a=s[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n):this.$el.on(r,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,s){var r=E[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||j()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",r),o)return o.apply(this,arguments)}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&x&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,h,s),h};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),E={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,S=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(k.prototype,o,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var a=r._extractParameters(t,i);r.execute(s,a),r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),e.history.trigger("route",r,n,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(H,"\\$&").replace(T,"(?:$1)?").replace($,function(t,e){return e?t:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var A=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,R=/msie [\w.]+/,O=/\/$/,P=/#.*$/;A.started=!1,i.extend(A.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(O,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(I,"")},start:function(t){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,r=R.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);if(this.root=("/"+this.root+"/").replace(N,"/"),r&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!A.started)return!1;e&&!0!==e||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(P,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new A;var C=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};d.extend=p.extend=k.extend=_.extend=A.extend=C;var j=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e});

},{"underscore":178}],2:[function(require,module,exports){
var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h||r===u?62:r===c||r===f?63:r<o?-1:r<o+10?r-o+26+26:r<i+26?r-i:r<A+26?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;n<c;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}var e,n,a,h=t.length%3,c="";for(e=0,a=t.length-h;e<a;e+=3)n=(t[e]<<16)+(t[e+1]<<8)+t[e+2],c+=function(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}(n);switch(h){case 1:n=t[t.length-1],c+=r(n>>2),c+=r(n<<4&63),c+="==";break;case 2:n=(t[t.length-2]<<8)+t[t.length-1],c+=r(n>>10),c+=r(n>>4&63),c+=r(n<<2&63),c+="="}return c}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0),u="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);

},{}],3:[function(require,module,exports){
(function (global){
"use strict";function typedArraySupport(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(t){return this instanceof Buffer?(Buffer.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?fromNumber(this,t):"string"==typeof t?fromString(this,t,arguments.length>1?arguments[1]:"utf8"):fromObject(this,t)):arguments.length>1?new Buffer(t,arguments[1]):new Buffer(t)}function fromNumber(t,e){if(t=allocate(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;r++)t[r]=0;return t}function fromString(t,e,r){return"string"==typeof r&&""!==r||(r="utf8"),t=allocate(t,0|byteLength(e,r)),t.write(e,r),t}function fromObject(t,e){if(Buffer.isBuffer(e))return fromBuffer(t,e);if(isArray(e))return fromArray(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return fromTypedArray(t,e);if(e instanceof ArrayBuffer)return fromArrayBuffer(t,e)}return e.length?fromArrayLike(t,e):fromJsonObject(t,e)}function fromBuffer(t,e){var r=0|checked(e.length);return t=allocate(t,r),e.copy(t,0,0,r),t}function fromArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromTypedArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e){return Buffer.TYPED_ARRAY_SUPPORT?(e.byteLength,t=Buffer._augment(new Uint8Array(e))):t=fromTypedArray(t,new Uint8Array(e)),t}function fromArrayLike(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromJsonObject(t,e){var r,n=0;"Buffer"===e.type&&isArray(e.data)&&(r=e.data,n=0|checked(r.length)),t=allocate(t,n);for(var f=0;f<n;f+=1)t[f]=255&r[f];return t}function allocate(t,e){return Buffer.TYPED_ARRAY_SUPPORT?(t=Buffer._augment(new Uint8Array(e)),t.__proto__=Buffer.prototype):(t.length=e,t._isBuffer=!0),0!==e&&e<=Buffer.poolSize>>>1&&(t.parent=rootParent),t}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t,e){if(!(this instanceof SlowBuffer))return new SlowBuffer(t,e);var r=new Buffer(t,e);return delete r.parent,r}function byteLength(t,e){"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if(e|=0,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),e<0&&(e=0),r>this.length&&(r=this.length),r<=e)return"";for(;;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"binary":return binarySlice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function hexWrite(t,e,r,n){r=Number(r)||0;var f=t.length-r;n?(n=Number(n))>f&&(n=f):n=f;var i=e.length;if(i%2!=0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;o++){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function binaryWrite(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],f=e;f<r;){var i=t[f],o=null,u=i>239?4:i>223?3:i>191?2:1;if(f+u<=r){var s,a,h,c;switch(u){case 1:i<128&&(o=i);break;case 2:s=t[f+1],128==(192&s)&&(c=(31&i)<<6|63&s)>127&&(o=c);break;case 3:s=t[f+1],a=t[f+2],128==(192&s)&&128==(192&a)&&(c=(15&i)<<12|(63&s)<<6|63&a)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:s=t[f+1],a=t[f+2],h=t[f+3],128==(192&s)&&128==(192&a)&&128==(192&h)&&(c=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&h)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),f+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;f++)n+=String.fromCharCode(127&t[f]);return n}function binarySlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;f++)n+=String.fromCharCode(t[f]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=e;i<r;i++)f+=toHex(t[i]);return f}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,f,i){if(!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>f||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var f=0,i=Math.min(t.length-r,2);f<i;f++)t[r+f]=(e&255<<8*(n?f:1-f))>>>8*(n?f:1-f)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var f=0,i=Math.min(t.length-r,4);f<i;f++)t[r+f]=e>>>8*(n?f:3-f)&255}function checkIEEE754(t,e,r,n,f,i){if(e>f||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(r<0)throw new RangeError("index out of range")}function writeFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,f){return f||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,f=null,i=[],o=0;o<n;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!f){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),f=r;continue}r=65536+(f-55296<<10|r-56320)}else f&&(e-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,f,i=[],o=0;o<t.length&&!((e-=2)<0);o++)r=t.charCodeAt(o),n=r>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var f=0;f<n&&!(f+r>=e.length||f>=t.length);f++)e[f+r]=t[f];return f}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("isarray");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT?(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array):(Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0),Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,f=0,i=Math.min(r,n);f<i&&t[f]===e[f];)++f;return f!==i&&(r=t[f],n=e[f]),r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new Buffer(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new Buffer(e),f=0;for(r=0;r<t.length;r++){var i=t[r];i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:Buffer.compare(this,t)},Buffer.prototype.indexOf=function(t,e){function r(t,e,r){for(var n=-1,f=0;r+f<t.length;f++)if(t[r+f]===e[-1===n?0:f-n]){if(-1===n&&(n=f),f-n+1===e.length)return r+n}else n=-1;return-1}if(e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(e<0&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(Buffer.isBuffer(t))return r(this,t,e);if("number"==typeof t)return Buffer.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);throw new TypeError("val must be string, number or Buffer")},Buffer.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},Buffer.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var f=n;n=e,e=0|r,r=f}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"binary":return binaryWrite(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=Buffer._augment(this.subarray(t,e));else{var f=e-t;n=new Buffer(f,void 0);for(var i=0;i<f;i++)n[i]=this[i+t]}return n.length&&(n.parent=this.parent||this),n},Buffer.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return n},Buffer.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t+--e],f=1;e>0&&(f*=256);)n+=this[t+--e]*f;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return f*=128,n>=f&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=e,f=1,i=this[t+--n];n>0&&(f*=256);)i+=this[t+--n]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=1,i=0;for(this[e]=255&t;++i<r&&(f*=256);)this[e+i]=t/f&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=r-1,i=1;for(this[e+f]=255&t;--f>=0&&(i*=256);)this[e+f]=t/i&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=0,o=1,u=t<0?1:0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=r-1,o=1,u=t<0?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f,i=n-r;if(this===t&&r<e&&e<n)for(f=i-1;f>=0;f--)t[f+e]=this[f+r];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;f<i;f++)t[f+e]=this[f+r];else t._set(this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),r<e)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(e<0||e>=this.length)throw new RangeError("start out of bounds");if(r<0||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;n<r;n++)this[n]=t;else{var f=utf8ToBytes(t.toString()),i=f.length;for(n=e;n<r;n++)this[n]=f[n%i]}return this}},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;e<r;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(t){return t.constructor=Buffer,t._isBuffer=!0,t._set=t.set,t.get=BP.get,t.set=BP.set,t.write=BP.write,t.toString=BP.toString,t.toLocaleString=BP.toString,t.toJSON=BP.toJSON,t.equals=BP.equals,t.compare=BP.compare,t.indexOf=BP.indexOf,t.copy=BP.copy,t.slice=BP.slice,t.readUIntLE=BP.readUIntLE,t.readUIntBE=BP.readUIntBE,t.readUInt8=BP.readUInt8,t.readUInt16LE=BP.readUInt16LE,t.readUInt16BE=BP.readUInt16BE,t.readUInt32LE=BP.readUInt32LE,t.readUInt32BE=BP.readUInt32BE,t.readIntLE=BP.readIntLE,t.readIntBE=BP.readIntBE,t.readInt8=BP.readInt8,t.readInt16LE=BP.readInt16LE,t.readInt16BE=BP.readInt16BE,t.readInt32LE=BP.readInt32LE,t.readInt32BE=BP.readInt32BE,t.readFloatLE=BP.readFloatLE,t.readFloatBE=BP.readFloatBE,t.readDoubleLE=BP.readDoubleLE,t.readDoubleBE=BP.readDoubleBE,t.writeUInt8=BP.writeUInt8,t.writeUIntLE=BP.writeUIntLE,t.writeUIntBE=BP.writeUIntBE,t.writeUInt16LE=BP.writeUInt16LE,t.writeUInt16BE=BP.writeUInt16BE,t.writeUInt32LE=BP.writeUInt32LE,t.writeUInt32BE=BP.writeUInt32BE,t.writeIntLE=BP.writeIntLE,t.writeIntBE=BP.writeIntBE,t.writeInt8=BP.writeInt8,t.writeInt16LE=BP.writeInt16LE,t.writeInt16BE=BP.writeInt16BE,t.writeInt32LE=BP.writeInt32LE,t.writeInt32BE=BP.writeInt32BE,t.writeFloatLE=BP.writeFloatLE,t.writeFloatBE=BP.writeFloatBE,t.writeDoubleLE=BP.writeDoubleLE,t.writeDoubleBE=BP.writeDoubleBE,t.fill=BP.fill,t.inspect=BP.inspect,t.toArrayBuffer=BP.toArrayBuffer,t};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"base64-js":2,"ieee754":30,"isarray":31}],4:[function(require,module,exports){
!function(){"use strict";function t(t,e,n){n=n||!1;for(var r in e)!function(r){"function"==typeof e[r]?n||(t[r]=e[r].bind(e)):Object.defineProperty(t,r,{get:function(){return e[r]},set:function(t){e[r]=t}})}(r)}function e(e){t(this,e),this.pushObject=this.popObject=this.reset=function(){}}function n(t){if(t instanceof HTMLCanvasElement)return n(t.getContext("2d"));var r=t;if(u)return u(r);for(var o=0;o<n.cache.length;o++){var i=n.cache[o];if(i[0]==r)return i[1]}var c=new e(r);return n.cache.push([r,c]),c}function r(e){t(this,e,!0);var n=[];this.calls=n;for(var i in e)(function(t){"function"==typeof e[t]&&(this[t]=function(){var r=Array.prototype.slice.call(arguments);return n.push([t].concat(r)),e[t].apply(e,arguments)})}).bind(this)(i);this.pushObject=function(t){n.push(["pushObject",t])},this.popObject=function(){n.push(["popObject"])},this.reset=function(){this.calls=n=[]};var c=this.drawImage;this.drawImage=function(t){var i=r.recorderForCanvas(t);i?(e.drawImage.apply(e,arguments),n=n.concat(o(i.calls,arguments)),this.calls=n):c.apply(e,arguments)}}function o(t,e){var n,r,o=e[0],a=0,s=0,u=o.width,h=o.height,d=o.width,p=o.height;3==e.length?(n=e[1],r=e[2]):5==e.length?(n=e[1],r=e[2],d=e[3],p=e[4]):9==e.length&&(a=e[1],s=e[2],u=e[3],h=e[4],n=e[5],r=e[6],d=e[7],p=e[8]);var v=i(a,a+u,n,n+d),g=c(a,a+u,n,n+d),b=i(s,s+h,r,r+p),C=c(s,s+h,r,r+p),w=function(t){var e=t.slice(),n=e[0];if(n in l){var r=l[n];"number"==typeof r&&(r=[r]),r.forEach(function(t){e[1+t]=g(e[1+t]),e[2+t]=C(e[2+t])})}if(n in f){var o=f[n];"number"==typeof o&&(o=[o]),o.forEach(function(t){e[1+t]*=v,e[2+t]*=b})}return e};return t.map(w)}function i(t,e,n,r){return(r-n)/(e-t)}function c(t,e,n,r){var o=i(t,e,n,r);return function(e){return n+o*(e-t)}}function a(t,e){if(t)return r.recorderForSelector(t,e);if(r.recorders){if(0==r.recorders.length)throw"Called a RecordingContext method, but no canvases are being recorded.";if(r.recorders.length>1)throw"Called a RecordingContext method while multiple canvases were being recorded. Specify one using a div and selector.";return r.recorders[0][1]}throw"You must call RecordingContext.recordAll() before using other RecordingContext static methods"}function s(e,n,r){function o(){c.hits.unshift(Array.prototype.slice.call(i)),c.hit=c.hits[0]}t(this,e);var i=[];this.hits=[],this.hit=null;var c=this;this.pushObject=function(t){i.unshift(t)},this.popObject=function(){i.shift()},this.reset=function(){this.hits=[],this.hit=null},this.clearRect=function(t,e,n,r){},this.fillRect=function(t,e,i,c){n>=t&&n<=t+i&&r>=e&&r<=e+c&&o()},this.strokeRect=function(t,e,n,r){},this.fill=function(t){e.isPointInPath(n,r)&&o()},this.stroke=function(){e.isPointInStroke(n,r)&&o()},this.fillText=function(t,e,n,r){},this.strokeText=function(t,e,n,r){}}var u=null;n.cache=[];var l={clearRect:0,fillRect:0,strokeRect:0,fillText:1,strokeText:1,moveTo:0,lineTo:0,bezierCurveTo:[0,2,4],quadraticCurveTo:[0,2],rect:0},f={clearRect:2,fillRect:2,strokeRect:2,rect:2};r.prototype.drawnObjectsWith=function(t){return t||(t=function(){return!0}),this.callsOf("pushObject").filter(function(e){return t(e[1])}).map(function(t){return t[1]})},r.prototype.drawnObjects=r.prototype.drawnObjectsWith,r.prototype.callsOf=function(t){return this.calls.filter(function(e){return e[0]==t})},r.recordAll=function(){if(null!=u)throw"You forgot to call RecordingContext.reset()";r.recorders=[],u=function(t){var e=r.recorderForCanvas(t.canvas);return e||(e=new r(t),r.recorders.push([t.canvas,e]),e)}},r.reset=function(){if(!u)throw"Called RecordingContext.reset() before RecordingContext.recordAll()";u=null,r.recorders=null},r.recorderForCanvas=function(t){var e=r.recorders;if(null==e)throw"You must call RecordingContext.recordAll() before using other RecordingContext static methods";for(var n=0;n<e.length;n++){var o=e[n];if(o[0]==t)return o[1]}return null},r.recorderForSelector=function(t,e){var n=t.querySelector(e+" canvas")||t.querySelector(e);if(!n)throw"Unable to find a canvas matching "+e;if(!(n instanceof HTMLCanvasElement))throw"Selector "+e+" neither matches nor contains a canvas";return r.recorderForCanvas(n)},r.drawnObjectsWith=function(t,e,n){"function"!=typeof t&&0!=arguments.length||(n=t,t=null);var r=a(t,e);return n=n||function(){return!0},r?r.drawnObjectsWith(n):[]},r.drawnObjects=r.drawnObjectsWith,r.callsOf=function(t,e,n){"string"==typeof t&&(n=t,t=null);var r=a(t,e);return r?r.callsOf(n):[]};var h={DataContext:e,RecordingContext:r,ClickTrackingContext:s,getDataContext:n};"undefined"!=typeof module?module.exports=h:window.dataCanvas=h}();

},{}],5:[function(require,module,exports){
"use strict";var emptyFunction=require("./emptyFunction"),EventListener={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:emptyFunction}},registerDefault:function(){}};module.exports=EventListener;

},{"./emptyFunction":12}],6:[function(require,module,exports){
"use strict";var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:canUseDOM&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:canUseDOM&&!!window.screen,isInWorker:!canUseDOM};module.exports=ExecutionEnvironment;

},{}],7:[function(require,module,exports){
"use strict";function camelize(e){return e.replace(_hyphenPattern,function(e,t){return t.toUpperCase()})}var _hyphenPattern=/-(.)/g;module.exports=camelize;

},{}],8:[function(require,module,exports){
"use strict";function camelizeStyleName(e){return camelize(e.replace(msPattern,"ms-"))}var camelize=require("./camelize"),msPattern=/^-ms-/;module.exports=camelizeStyleName;

},{"./camelize":7}],9:[function(require,module,exports){
"use strict";function containsNode(e,o){var t=!0;e:for(;t;){var n=e,i=o;if(t=!1,n&&i){if(n===i)return!0;if(isTextNode(n))return!1;if(isTextNode(i)){e=n,o=i.parentNode,t=!0;continue e}return n.contains?n.contains(i):!!n.compareDocumentPosition&&!!(16&n.compareDocumentPosition(i))}return!1}}var isTextNode=require("./isTextNode");module.exports=containsNode;

},{"./isTextNode":22}],10:[function(require,module,exports){
"use strict";function hasArrayNature(r){return!!r&&("object"==typeof r||"function"==typeof r)&&"length"in r&&!("setInterval"in r)&&"number"!=typeof r.nodeType&&(Array.isArray(r)||"callee"in r||"item"in r)}function createArrayFromMixed(r){return hasArrayNature(r)?Array.isArray(r)?r.slice():toArray(r):[r]}var toArray=require("./toArray");module.exports=createArrayFromMixed;

},{"./toArray":28}],11:[function(require,module,exports){
"use strict";function getNodeName(e){var r=e.match(nodeNamePattern);return r&&r[1].toLowerCase()}function createNodesFromMarkup(e,r){var a=dummyNode;dummyNode||invariant(!1);var t=getNodeName(e),n=t&&getMarkupWrap(t);if(n){a.innerHTML=n[1]+e+n[2];for(var i=n[0];i--;)a=a.lastChild}else a.innerHTML=e;var o=a.getElementsByTagName("script");o.length&&(r||invariant(!1),createArrayFromMixed(o).forEach(r));for(var m=createArrayFromMixed(a.childNodes);a.lastChild;)a.removeChild(a.lastChild);return m}var ExecutionEnvironment=require("./ExecutionEnvironment"),createArrayFromMixed=require("./createArrayFromMixed"),getMarkupWrap=require("./getMarkupWrap"),invariant=require("./invariant"),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,nodeNamePattern=/^\s*<(\w+)/;module.exports=createNodesFromMarkup;

},{"./ExecutionEnvironment":6,"./createArrayFromMixed":10,"./getMarkupWrap":16,"./invariant":20}],12:[function(require,module,exports){
"use strict";function makeEmptyFunction(t){return function(){return t}}function emptyFunction(){}emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(t){return t},module.exports=emptyFunction;

},{}],13:[function(require,module,exports){
"use strict";var emptyObject={};module.exports=emptyObject;

},{}],14:[function(require,module,exports){
"use strict";function focusNode(o){try{o.focus()}catch(o){}}module.exports=focusNode;

},{}],15:[function(require,module,exports){
"use strict";function getActiveElement(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}module.exports=getActiveElement;

},{}],16:[function(require,module,exports){
"use strict";function getMarkupWrap(t){return dummyNode||invariant(!1),markupWrap.hasOwnProperty(t)||(t="*"),shouldWrap.hasOwnProperty(t)||(dummyNode.innerHTML="*"===t?"<link />":"<"+t+"></"+t+">",shouldWrap[t]=!dummyNode.firstChild),shouldWrap[t]?markupWrap[t]:null}var ExecutionEnvironment=require("./ExecutionEnvironment"),invariant=require("./invariant"),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,shouldWrap={},selectWrap=[1,'<select multiple="true">',"</select>"],tableWrap=[1,"<table>","</table>"],trWrap=[3,"<table><tbody><tr>","</tr></tbody></table>"],svgWrap=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],markupWrap={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:selectWrap,option:selectWrap,caption:tableWrap,colgroup:tableWrap,tbody:tableWrap,tfoot:tableWrap,thead:tableWrap,td:trWrap,th:trWrap},svgElements=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];svgElements.forEach(function(t){markupWrap[t]=svgWrap,shouldWrap[t]=!0}),module.exports=getMarkupWrap;

},{"./ExecutionEnvironment":6,"./invariant":20}],17:[function(require,module,exports){
"use strict";function getUnboundedScrollPosition(o){return o===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:o.scrollLeft,y:o.scrollTop}}module.exports=getUnboundedScrollPosition;

},{}],18:[function(require,module,exports){
"use strict";function hyphenate(e){return e.replace(_uppercasePattern,"-$1").toLowerCase()}var _uppercasePattern=/([A-Z])/g;module.exports=hyphenate;

},{}],19:[function(require,module,exports){
"use strict";function hyphenateStyleName(e){return hyphenate(e).replace(msPattern,"-ms-")}var hyphenate=require("./hyphenate"),msPattern=/^ms-/;module.exports=hyphenateStyleName;

},{"./hyphenate":18}],20:[function(require,module,exports){
"use strict";function invariant(e,n,r,i,o,a,t,f){if(!e){var s;if(void 0===n)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,i,o,a,t,f],l=0;s=new Error(n.replace(/%s/g,function(){return d[l++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}module.exports=invariant;

},{}],21:[function(require,module,exports){
"use strict";function isNode(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}module.exports=isNode;

},{}],22:[function(require,module,exports){
"use strict";function isTextNode(e){return isNode(e)&&3==e.nodeType}var isNode=require("./isNode");module.exports=isTextNode;

},{"./isNode":21}],23:[function(require,module,exports){
"use strict";var invariant=require("./invariant"),keyMirror=function(r){var i,n={};r instanceof Object&&!Array.isArray(r)||invariant(!1);for(i in r)r.hasOwnProperty(i)&&(n[i]=i);return n};module.exports=keyMirror;

},{"./invariant":20}],24:[function(require,module,exports){
"use strict";var keyOf=function(r){var e;for(e in r)if(r.hasOwnProperty(e))return e;return null};module.exports=keyOf;

},{}],25:[function(require,module,exports){
"use strict";function mapObject(r,t,e){if(!r)return null;var a={};for(var n in r)hasOwnProperty.call(r,n)&&(a[n]=t.call(e,r[n],n,r));return a}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=mapObject;

},{}],26:[function(require,module,exports){
"use strict";function memoizeStringOnly(n){var r={};return function(t){return r.hasOwnProperty(t)||(r[t]=n.call(this,t)),r[t]}}module.exports=memoizeStringOnly;

},{}],27:[function(require,module,exports){
"use strict";function shallowEqual(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=hasOwnProperty.bind(t),l=0;l<r.length;l++)if(!o(r[l])||e[r[l]]!==t[r[l]])return!1;return!0}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=shallowEqual;

},{}],28:[function(require,module,exports){
"use strict";function toArray(r){var t=r.length;if((Array.isArray(r)||"object"!=typeof r&&"function"!=typeof r)&&invariant(!1),"number"!=typeof t&&invariant(!1),0===t||t-1 in r||invariant(!1),r.hasOwnProperty)try{return Array.prototype.slice.call(r)}catch(r){}for(var a=Array(t),n=0;n<t;n++)a[n]=r[n];return a}var invariant=require("./invariant");module.exports=toArray;

},{"./invariant":20}],29:[function(require,module,exports){
"use strict";var emptyFunction=require("./emptyFunction"),warning=emptyFunction;module.exports=warning;

},{"./emptyFunction":12}],30:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};

},{}],31:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};

},{}],32:[function(require,module,exports){
!function(t){var e=this;"object"==typeof exports?module.exports=t(e,require("jdataview")):"function"==typeof define&&define.amd?define(["jdataview"],function(i){return t(e,i)}):e.jBinary=t(e,e.jDataView)}(function(t,e){"use strict";function i(t,e){return e&&t instanceof e}function n(t){for(var e=1,i=arguments.length;i>e;++e){var n=arguments[e];for(var r in n)void 0!==n[r]&&(t[r]=n[r])}return t}function r(t){return arguments[0]=l(t),n.apply(null,arguments)}function a(t,e,n){return i(n,Function)?n.call(t,e.contexts[0]):n}function s(t){return function(){var e=arguments,n=e.length-1,r=t.length-1,a=e[n];if(e.length=r+1,!i(a,Function)){var s=this;return new f(function(i,n){e[r]=function(t,e){return t?n(t):i(e)},t.apply(s,e)})}e[n]=void 0,e[r]=a,t.apply(this,e)}}function o(t,n){return i(t,o)?t.as(n):(i(t,e)||(t=new e(t,void 0,void 0,n?n["jBinary.littleEndian"]:void 0)),i(this,o)?(this.view=t,this.view.seek(0),this.contexts=[],this.as(n,!0)):new o(t,n))}function h(t){return r(h.prototype,t)}function u(t){return r(u.prototype,t,{createProperty:function(){var e=(t.createProperty||u.prototype.createProperty).apply(this,arguments);return e.getBaseType&&(e.baseType=e.binary.getType(e.getBaseType(e.binary.contexts[0]))),e}})}var c=t.document;"atob"in t&&"btoa"in t||function(){function e(t){var e,i,r,a,s,o;for(r=t.length,i=0,e="";r>i;){if(a=255&t.charCodeAt(i++),i==r){e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4),e+="==";break}if(s=t.charCodeAt(i++),i==r){e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4|(240&s)>>4),e+=n.charAt((15&s)<<2),e+="=";break}o=t.charCodeAt(i++),e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4|(240&s)>>4),e+=n.charAt((15&s)<<2|(192&o)>>6),e+=n.charAt(63&o)}return e}function i(t){var e,i,n,a,s,o,h;for(o=t.length,s=0,h="";o>s;){do{e=r[255&t.charCodeAt(s++)]}while(o>s&&-1==e);if(-1==e)break;do{i=r[255&t.charCodeAt(s++)]}while(o>s&&-1==i);if(-1==i)break;h+=String.fromCharCode(e<<2|(48&i)>>4);do{if(61==(n=255&t.charCodeAt(s++)))return h;n=r[n]}while(o>s&&-1==n);if(-1==n)break;h+=String.fromCharCode((15&i)<<4|(60&n)>>2);do{if(61==(a=255&t.charCodeAt(s++)))return h;a=r[a]}while(o>s&&-1==a);if(-1==a)break;h+=String.fromCharCode((3&n)<<6|a)}return h}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];t.btoa||(t.btoa=e),t.atob||(t.atob=i)}();var f=t.Promise||function(t){this.then=t},l=Object.create;l||(l=function(t){var e=function(){};return e.prototype=t,new e});var p=o.prototype,y=p.typeSet={};p.toValue=function(t){return a(this,this,t)},p._named=function(t,e,i){return t.displayName=e+" @ "+(void 0!==i?i:this.view.tell()),t};var d=Object.defineProperty;if(d)try{d({},"x",{})}catch(t){d=void 0}else d=function(t,e,i,n){n&&(t[e]=i.value)};var v="jBinary.Cache",b=0;if(p._getCached=function(t,e,i){if(t.hasOwnProperty(this.cacheKey))return t[this.cacheKey];var n=e.call(this,t);return d(t,this.cacheKey,{value:n},i),n},p.getContext=function(t){switch(typeof t){case"undefined":t=0;case"number":return this.contexts[t];case"string":return this.getContext(function(e){return t in e});case"function":for(var e=0,i=this.contexts.length;i>e;e++){var n=this.contexts[e];if(t.call(this,n))return n}}},p.inContext=function(t,e){this.contexts.unshift(t);var i=e.call(this);return this.contexts.shift(),i},h.prototype={inherit:function(t,e){function i(t,e){var i=a[t];i&&(n||(n=r(a)),e.call(n,i),n[t]=null)}var n,a=this;return i("params",function(e){for(var i=0,n=e.length;n>i;i++)this[e[i]]=t[i]}),i("setParams",function(e){e.apply(this,t)}),i("typeParams",function(t){for(var i=0,n=t.length;n>i;i++){var r=t[i],a=this[r];a&&(this[r]=e(a))}}),i("resolve",function(t){t.call(this,e)}),n||a},createProperty:function(t){return r(this,{binary:t,view:t.view})},toValue:function(t,e){return!1!==e&&"string"==typeof t?this.binary.getContext(t)[t]:a(this,this.binary,t)}},o.Type=h,u.prototype=r(h.prototype,{setParams:function(){this.baseType&&(this.typeParams=["baseType"].concat(this.typeParams||[]))},baseRead:function(){return this.binary.read(this.baseType)},baseWrite:function(t){return this.binary.write(this.baseType,t)}}),n(u.prototype,{read:u.prototype.baseRead,write:u.prototype.baseWrite}),o.Template=u,p.as=function(t,e){var i=e?this:r(this);return t=t||y,i.typeSet=t===y||y.isPrototypeOf(t)?t:r(y,t),i.cacheKey=v,i.cacheKey=i._getCached(t,function(){return v+"."+ ++b},!0),i},p.seek=function(t,e){if(t=this.toValue(t),void 0!==e){var i=this.view.tell();this.view.seek(t);var n=e.call(this);return this.view.seek(i),n}return this.view.seek(t)},p.tell=function(){return this.view.tell()},p.skip=function(t,e){return this.seek(this.tell()+this.toValue(t),e)},p.slice=function(t,e,i){return new o(this.view.slice(t,e,i),this.typeSet)},p._getType=function(t,e){switch(typeof t){case"string":if(!(t in this.typeSet))throw new ReferenceError("Unknown type: "+t);return this._getType(this.typeSet[t],e);case"number":return this._getType(y.bitfield,[t]);case"object":if(i(t,h)){var n=this;return t.inherit(e||[],function(t){return n.getType(t)})}return i(t,Array)?this._getCached(t,function(t){return this.getType(t[0],t.slice(1))},!0):this._getCached(t,function(t){return this.getType(y.object,[t])},!1)}},p.getType=function(t,e){var n=this._getType(t,e);return n&&!i(t,h)&&(n.name="object"==typeof t?i(t,Array)?t[0]+"("+t.slice(1).join(", ")+")":"object":String(t)),n},p._action=function(t,e,i){if(void 0!==t){t=this.getType(t);var n=this._named(function(){return i.call(this,t.createProperty(this),this.contexts[0])},"["+t.name+"]",e);return void 0!==e?this.seek(e,n):n.call(this)}},p.read=function(t,e){return this._action(t,e,function(t,e){return t.read(e)})},p.readAll=function(){return this.read("jBinary.all",0)},p.write=function(t,e,i){return this._action(t,i,function(t,i){var n=this.tell();return t.write(e,i),this.tell()-n})},p.writeAll=function(t){return this.write("jBinary.all",t,0)},function(t,e){for(var i=0,n=e.length;n>i;i++){var a=e[i];y[a.toLowerCase()]=r(t,{dataType:a})}}(h({params:["littleEndian"],read:function(){return this.view["get"+this.dataType](void 0,this.littleEndian)},write:function(t){this.view["write"+this.dataType](t,this.littleEndian)}}),["Uint8","Uint16","Uint32","Uint64","Int8","Int16","Int32","Int64","Float32","Float64","Char"]),n(y,{byte:y.uint8,float:y.float32,double:y.float64}),y.array=u({params:["baseType","length"],read:function(){var t=this.toValue(this.length);if(this.baseType===y.uint8)return this.view.getBytes(t,void 0,!0,!0);var e;if(void 0!==t){e=new Array(t);for(var i=0;t>i;i++)e[i]=this.baseRead()}else{var n=this.view.byteLength;for(e=[];this.binary.tell()<n;)e.push(this.baseRead())}return e},write:function(t){if(this.baseType===y.uint8)return this.view.writeBytes(t);for(var e=0,i=t.length;i>e;e++)this.baseWrite(t[e])}}),y.binary=u({params:["length","typeSet"],read:function(){var t=this.binary.tell(),e=this.binary.skip(this.toValue(this.length));return new o(this.view.slice(t,e),this.typeSet)},write:function(t){this.binary.write("blob",t.read("blob",0))}}),y.bitfield=h({params:["bitSize"],read:function(){return this.view.getUnsigned(this.bitSize)},write:function(t){this.view.writeUnsigned(t,this.bitSize)}}),y.blob=h({params:["length"],read:function(){return this.view.getBytes(this.toValue(this.length))},write:function(t){this.view.writeBytes(t,!0)}}),y.const=u({params:["baseType","value","strict"],read:function(){var t=this.baseRead();if(this.strict&&t!==this.value){if(i(this.strict,Function))return this.strict(t);throw new TypeError("Unexpected value ("+t+" !== "+this.value+").")}return t},write:function(t){this.baseWrite(this.strict||void 0===t?this.value:t)}}),y.enum=u({params:["baseType","matches"],setParams:function(t,e){this.backMatches={};for(var i in e)this.backMatches[e[i]]=i},read:function(){var t=this.baseRead();return t in this.matches?this.matches[t]:t},write:function(t){this.baseWrite(t in this.backMatches?this.backMatches[t]:t)}}),y.extend=h({setParams:function(){this.parts=arguments},resolve:function(t){for(var e=this.parts,i=e.length,n=new Array(i),r=0;i>r;r++)n[r]=t(e[r]);this.parts=n},read:function(){var t=this.parts,e=this.binary.read(t[0]);return this.binary.inContext(e,function(){for(var i=1,r=t.length;r>i;i++)n(e,this.read(t[i]))}),e},write:function(t){var e=this.parts;this.binary.inContext(t,function(){for(var i=0,n=e.length;n>i;i++)this.write(e[i],t)})}}),y.if=u({params:["condition","trueType","falseType"],typeParams:["trueType","falseType"],getBaseType:function(){return this.toValue(this.condition)?this.trueType:this.falseType}}),y.if_not=y.ifNot=u({setParams:function(t,e,i){this.baseType=["if",t,i,e]}}),y.lazy=u({marker:"jBinary.Lazy",params:["innerType","length"],getBaseType:function(){return["binary",this.length,this.binary.typeSet]},read:function(){var t=function(e){return 0===arguments.length?"value"in t?t.value:t.value=t.binary.read(t.innerType):n(t,{wasChanged:!0,value:e}).value};return t[this.marker]=!0,n(t,{binary:n(this.baseRead(),{contexts:this.binary.contexts.slice()}),innerType:this.innerType})},write:function(t){t.wasChanged||!t[this.marker]?this.binary.write(this.innerType,t()):this.baseWrite(t.binary)}}),y.object=h({params:["structure","proto"],resolve:function(t){var e={};for(var n in this.structure)e[n]=i(this.structure[n],Function)?this.structure[n]:t(this.structure[n]);this.structure=e},read:function(){var t=this,e=this.structure,n=this.proto?r(this.proto):{};return this.binary.inContext(n,function(){for(var r in e)this._named(function(){var a=i(e[r],Function)?e[r].call(t,n):this.read(e[r]);void 0!==a&&(n[r]=a)},r).call(this)}),n},write:function(t){var e=this,n=this.structure;this.binary.inContext(t,function(){for(var r in n)this._named(function(){i(n[r],Function)?t[r]=n[r].call(e,t):this.write(n[r],t[r])},r).call(this)})}}),y.skip=h({params:["length"],read:function(){this.view.skip(this.toValue(this.length))},write:function(){this.read()}}),y.string=u({params:["length","encoding"],read:function(){return this.view.getString(this.toValue(this.length),void 0,this.encoding)},write:function(t){this.view.writeString(t,this.encoding)}}),y.string0=h({params:["length","encoding"],read:function(){var t=this.view,e=this.length;if(void 0===e){var i=t.tell(),n=0;for(e=t.byteLength-i;e>n&&t.getUint8();)n++;var r=t.getString(n,i,this.encoding);return e>n&&t.skip(1),r}return t.getString(e,void 0,this.encoding).replace(/\0.*$/,"")},write:function(t){var e=this.view,i=void 0===this.length?1:this.length-t.length;e.writeString(t,void 0,this.encoding),i>0&&(e.writeUint8(0),e.skip(i-1))}}),o.loadData=s(function(e,n){var r;if(i(e,t.Blob)){var a;if("FileReader"in t)a=new FileReader,a.onload=a.onerror=function(){n(this.error,this.result)},a.readAsArrayBuffer(e);else{a=new FileReaderSync;var s,o;try{o=a.readAsArrayBuffer(e)}catch(t){s=t}finally{n(s,o)}}}else if("string"!=typeof e)n(new TypeError("Unsupported source type."));else if(r=e.match(/^data:(.+?)(;base64)?,(.*)$/))try{var h=r[2],u=r[3];n(null,(h?atob:decodeURIComponent)(u))}catch(t){n(t)}else if("XMLHttpRequest"in t){var c=new XMLHttpRequest;c.open("GET",e,!0),"responseType"in c?c.responseType="arraybuffer":"overrideMimeType"in c?c.overrideMimeType("text/plain; charset=x-user-defined"):c.setRequestHeader("Accept-Charset","x-user-defined"),"onload"in c||(c.onreadystatechange=function(){4===this.readyState&&this.onload()});var f=function(t){n(new Error(t))};c.onload=function(){return 0!==this.status&&200!==this.status?f("HTTP Error #"+this.status+": "+this.statusText):("response"in this||(this.response=new VBArray(this.responseBody).toArray()),void n(null,this.response))},c.onerror=function(){f("Network error.")},c.send(null)}else n(new TypeError("Unsupported source type."))}),o.load=s(function(t,e,i){var n=o.loadData(t);o.load.getTypeSet(t,e,function(t){n.then(function(e){i(null,new o(e,t))},i)})}),o.load.getTypeSet=function(t,e,i){i(e)},p._toURI="URL"in t&&"createObjectURL"in URL?function(t){var e=this.seek(0,function(){return this.view.getBytes()});return URL.createObjectURL(new Blob([e],{type:t}))}:function(t){var e=this.seek(0,function(){return this.view.getString(void 0,void 0,"binary")});return"data:"+t+";base64,"+btoa(e)},p._mimeType=function(t){return t||this.typeSet["jBinary.mimeType"]||"application/octet-stream"},p.toURI=function(t){return this._toURI(this._mimeType(t))},c){var g=o.downloader=c.createElement("a");g.style.display="none"}return p.saveAs=s(function(t,e,i){"string"==typeof t?("msSaveBlob"in navigator?navigator.msSaveBlob(new Blob([this.read("blob",0)],{type:this._mimeType(e)}),t):c?(g.parentNode||c.body.appendChild(g),g.href=this.toURI(e),g.download=t,g.click(),g.href=g.download=""):i(new TypeError("Saving from Web Worker is not supported.")),i()):i(new TypeError("Unsupported storage type."))}),o});

},{"jdataview":33}],33:[function(require,module,exports){
(function (Buffer){
!function(t){var e=this;module.exports=function(t){"use strict";function e(t,e){return"object"==typeof t&&null!==t&&(t.constructor===e||Object.prototype.toString.call(t)==="[object "+e.name+"]")}function i(t,i){return!i&&e(t,Array)?t:Array.prototype.slice.call(t)}function n(t,e){return void 0!==t?t:e}function r(t,i,f,s){if(r.is(t)){var o=t.slice(i,i+f);return o._littleEndian=n(s,o._littleEndian),o}if(!r.is(this))return new r(t,i,f,s);if(this.buffer=t=r.wrapBuffer(t),this._isArrayBuffer=h.ArrayBuffer&&e(t,ArrayBuffer),this._isPixelData=!1,this._isDataView=h.DataView&&this._isArrayBuffer,this._isNodeBuffer=h.NodeBuffer&&e(t,Buffer),!this._isNodeBuffer&&!this._isArrayBuffer&&!e(t,Array))throw new TypeError("jDataView buffer has an incompatible type");this._littleEndian=!!s;var u="byteLength"in t?t.byteLength:t.length;this.byteOffset=i=n(i,0),this.byteLength=f=n(f,u-i),this._offset=this._bitOffset=0,this._isDataView?this._view=new DataView(t,i,f):this._checkBounds(i,f,u),this._engineAction=this._isDataView?this._dataViewAction:this._isNodeBuffer?this._nodeBufferAction:this._isArrayBuffer?this._arrayBufferAction:this._arrayAction}function f(t){if(h.NodeBuffer)return new Buffer(t,"binary");for(var e=h.ArrayBuffer?Uint8Array:Array,i=new e(t.length),n=0,r=t.length;r>n;n++)i[n]=255&t.charCodeAt(n);return i}function s(t){return t>=0&&31>t?1<<t:s[t]||(s[t]=Math.pow(2,t))}function o(t,e){this.lo=t,this.hi=e}function u(){o.apply(this,arguments)}var h={NodeBuffer:"Buffer"in t,DataView:"DataView"in t,ArrayBuffer:"ArrayBuffer"in t,PixelData:!1},a=t.TextEncoder,_=t.TextDecoder;h.NodeBuffer&&function(t){try{t.writeFloatLE(1/0,0)}catch(t){h.NodeBuffer=!1}}(new Buffer(4));var c={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};r.wrapBuffer=function(t){switch(typeof t){case"number":if(h.NodeBuffer)t=new Buffer(t),t.fill(0);else if(h.ArrayBuffer)t=new Uint8Array(t).buffer;else{t=new Array(t);for(var n=0;n<t.length;n++)t[n]=0}return t;case"string":t=f(t);default:return"length"in t&&!(h.NodeBuffer&&e(t,Buffer)||h.ArrayBuffer&&e(t,ArrayBuffer))&&(h.NodeBuffer?t=new Buffer(t):h.ArrayBuffer?e(t,ArrayBuffer)||(t=new Uint8Array(t).buffer,e(t,ArrayBuffer)||(t=new Uint8Array(i(t,!0)).buffer)):t=i(t)),t}},r.is=function(t){return t&&t.jDataView},r.from=function(){return new r(arguments)},r.Uint64=o,o.prototype={valueOf:function(){return this.lo+s(32)*this.hi},toString:function(){return Number.prototype.toString.apply(this.valueOf(),arguments)}},o.fromNumber=function(t){var e=Math.floor(t/s(32));return new o(t-e*s(32),e)},r.Int64=u,u.prototype="create"in Object?Object.create(o.prototype):new o,u.prototype.valueOf=function(){return this.hi<s(31)?o.prototype.valueOf.apply(this,arguments):-(s(32)-this.lo+s(32)*(s(32)-1-this.hi))},u.fromNumber=function(t){var e,i;if(t>=0){var n=o.fromNumber(t);e=n.lo,i=n.hi}else i=Math.floor(t/s(32)),e=t-i*s(32),i+=s(32);return new u(e,i)};var y=r.prototype={compatibility:h,jDataView:!0,_checkBounds:function(t,e,i){if("number"!=typeof t)throw new TypeError("Offset is not a number.");if("number"!=typeof e)throw new TypeError("Size is not a number.");if(0>e)throw new RangeError("Length is negative.");if(0>t||t+e>n(i,this.byteLength))throw new RangeError("Offsets are out of bounds.")},_action:function(t,e,i,r,f){return this._engineAction(t,e,n(i,this._offset),n(r,this._littleEndian),f)},_dataViewAction:function(t,e,i,n,r){return this._offset=i+c[t],e?this._view["get"+t](i,n):this._view["set"+t](i,r,n)},_arrayBufferAction:function(e,i,r,f,s){var o,u=c[e],h=t[e+"Array"];if(f=n(f,this._littleEndian),1===u||(this.byteOffset+r)%u==0&&f)return o=new h(this.buffer,this.byteOffset+r,1),this._offset=r+u,i?o[0]:o[0]=s;var a=new Uint8Array(i?this.getBytes(u,r,f,!0):u);return o=new h(a.buffer,0,1),i?o[0]:(o[0]=s,void this._setBytes(r,a,f))},_arrayAction:function(t,e,i,n,r){return e?this["_get"+t](i,n):this["_set"+t](i,r,n)},_getBytes:function(t,e,r){r=n(r,this._littleEndian),e=n(e,this._offset),t=n(t,this.byteLength-e),this._checkBounds(e,t),e+=this.byteOffset,this._offset=e-this.byteOffset+t;var f=this._isArrayBuffer?new Uint8Array(this.buffer,e,t):(this.buffer.slice||Array.prototype.slice).call(this.buffer,e,e+t);return r||1>=t?f:i(f).reverse()},getBytes:function(t,e,r,f){var s=this._getBytes(t,e,n(r,!0));return f?i(s):s},_setBytes:function(t,e,r){var f=e.length;if(0!==f){if(r=n(r,this._littleEndian),t=n(t,this._offset),this._checkBounds(t,f),!r&&f>1&&(e=i(e,!0).reverse()),t+=this.byteOffset,this._isArrayBuffer)new Uint8Array(this.buffer,t,f).set(e);else if(this._isNodeBuffer)new Buffer(e).copy(this.buffer,t);else for(var s=0;f>s;s++)this.buffer[t+s]=e[s];this._offset=t-this.byteOffset+f}},setBytes:function(t,e,i){this._setBytes(t,e,n(i,!0))},getString:function(t,e,i){if(this._isNodeBuffer)return e=n(e,this._offset),t=n(t,this.byteLength-e),this._checkBounds(e,t),this._offset=e+t,this.buffer.toString(i||"binary",this.byteOffset+e,this.byteOffset+this._offset);var r=this._getBytes(t,e,!0);if(i="utf8"===i?"utf-8":i||"binary",_&&"binary"!==i)return new _(i).decode(this._isArrayBuffer?r:new Uint8Array(r));var f="";t=r.length;for(var s=0;t>s;s++)f+=String.fromCharCode(r[s]);return"utf-8"===i&&(f=decodeURIComponent(escape(f))),f},setString:function(t,e,i){if(this._isNodeBuffer)return t=n(t,this._offset),this._checkBounds(t,e.length),void(this._offset=t+this.buffer.write(e,this.byteOffset+t,i||"binary"));i="utf8"===i?"utf-8":i||"binary";var r;a&&"binary"!==i?r=new a(i).encode(e):("utf-8"===i&&(e=unescape(encodeURIComponent(e))),r=f(e)),this._setBytes(t,r,!0)},getChar:function(t){return this.getString(1,t)},setChar:function(t,e){this.setString(t,e)},tell:function(){return this._offset},seek:function(t){return this._checkBounds(t,0),this._offset=t},skip:function(t){return this.seek(this._offset+t)},slice:function(t,e,i){function f(t,e){return 0>t?t+e:t}return t=f(t,this.byteLength),e=f(n(e,this.byteLength),this.byteLength),i?new r(this.getBytes(e-t,t,!0,!0),void 0,void 0,this._littleEndian):new r(this.buffer,this.byteOffset+t,e-t,this._littleEndian)},alignBy:function(t){return this._bitOffset=0,1!==n(t,1)?this.skip(t-(this._offset%t||t)):this._offset},_getFloat64:function(t,e){var i=this._getBytes(8,t,e),n=1-2*(i[7]>>7),r=((i[7]<<1&255)<<3|i[6]>>4)-1023,f=(15&i[6])*s(48)+i[5]*s(40)+i[4]*s(32)+i[3]*s(24)+i[2]*s(16)+i[1]*s(8)+i[0];return 1024===r?0!==f?NaN:1/0*n:-1023===r?n*f*s(-1074):n*(1+f*s(-52))*s(r)},_getFloat32:function(t,e){var i=this._getBytes(4,t,e),n=1-2*(i[3]>>7),r=(i[3]<<1&255|i[2]>>7)-127,f=(127&i[2])<<16|i[1]<<8|i[0];return 128===r?0!==f?NaN:1/0*n:-127===r?n*f*s(-149):n*(1+f*s(-23))*s(r)},_get64:function(t,e,i){i=n(i,this._littleEndian),e=n(e,this._offset);for(var r=i?[0,4]:[4,0],f=0;2>f;f++)r[f]=this.getUint32(e+r[f],i);return this._offset=e+8,new t(r[0],r[1])},getInt64:function(t,e){return this._get64(u,t,e)},getUint64:function(t,e){return this._get64(o,t,e)},_getInt32:function(t,e){var i=this._getBytes(4,t,e);return i[3]<<24|i[2]<<16|i[1]<<8|i[0]},_getUint32:function(t,e){return this._getInt32(t,e)>>>0},_getInt16:function(t,e){return this._getUint16(t,e)<<16>>16},_getUint16:function(t,e){var i=this._getBytes(2,t,e);return i[1]<<8|i[0]},_getInt8:function(t){return this._getUint8(t)<<24>>24},_getUint8:function(t){return this._getBytes(1,t)[0]},_getBitRangeData:function(t,e){var i=(n(e,this._offset)<<3)+this._bitOffset,r=i+t,f=i>>>3,s=r+7>>>3,o=this._getBytes(s-f,f,!0),u=0;(this._bitOffset=7&r)&&(this._bitOffset-=8);for(var h=0,a=o.length;a>h;h++)u=u<<8|o[h];return{start:f,bytes:o,wideValue:u}},getSigned:function(t,e){var i=32-t;return this.getUnsigned(t,e)<<i>>i},getUnsigned:function(t,e){var i=this._getBitRangeData(t,e).wideValue>>>-this._bitOffset;return 32>t?i&~(-1<<t):i},_setBinaryFloat:function(t,e,i,n,r){var f,o,u=0>e?1:0,h=~(-1<<n-1),a=1-h;0>e&&(e=-e),0===e?(f=0,o=0):isNaN(e)?(f=2*h+1,o=1):1/0===e?(f=2*h+1,o=0):(f=Math.floor(Math.log(e)/Math.LN2),f>=a&&h>=f?(o=Math.floor((e*s(-f)-1)*s(i)),f+=h):(o=Math.floor(e/s(a-i)),f=0));for(var _=[];i>=8;)_.push(o%256),o=Math.floor(o/256),i-=8;for(f=f<<i|o,n+=i;n>=8;)_.push(255&f),f>>>=8,n-=8;_.push(u<<n|f),this._setBytes(t,_,r)},_setFloat32:function(t,e,i){this._setBinaryFloat(t,e,23,8,i)},_setFloat64:function(t,e,i){this._setBinaryFloat(t,e,52,11,i)},_set64:function(t,e,i,r){"object"!=typeof i&&(i=t.fromNumber(i)),r=n(r,this._littleEndian),e=n(e,this._offset);var f=r?{lo:0,hi:4}:{lo:4,hi:0};for(var s in f)this.setUint32(e+f[s],i[s],r);this._offset=e+8},setInt64:function(t,e,i){this._set64(u,t,e,i)},setUint64:function(t,e,i){this._set64(o,t,e,i)},_setUint32:function(t,e,i){this._setBytes(t,[255&e,e>>>8&255,e>>>16&255,e>>>24],i)},_setUint16:function(t,e,i){this._setBytes(t,[255&e,e>>>8&255],i)},_setUint8:function(t,e){this._setBytes(t,[255&e])},setUnsigned:function(t,e,i){var n=this._getBitRangeData(i,t),r=n.wideValue,f=n.bytes;r&=~(~(-1<<i)<<-this._bitOffset),r|=(32>i?e&~(-1<<i):e)<<-this._bitOffset;for(var s=f.length-1;s>=0;s--)f[s]=255&r,r>>>=8;this._setBytes(n.start,f,!0)}},l={Int8:"Int8",Int16:"Int16",Int32:"Int32",Uint8:"UInt8",Uint16:"UInt16",Uint32:"UInt32",Float32:"Float",Float64:"Double"};y._nodeBufferAction=function(t,e,i,n,r){this._offset=i+c[t];var f=l[t]+("Int8"===t||"Uint8"===t?"":n?"LE":"BE");return i+=this.byteOffset,e?this.buffer["read"+f](i):this.buffer["write"+f](r,i)};for(var g in c)!function(t){y["get"+t]=function(e,i){return this._action(t,!0,e,i)},y["set"+t]=function(e,i,n){this._action(t,!1,e,n,i)}}(g);y._setInt32=y._setUint32,y._setInt16=y._setUint16,y._setInt8=y._setUint8,y.setSigned=y.setUnsigned;for(var B in y)"set"===B.slice(0,3)&&function(t){y["write"+t]=function(){Array.prototype.unshift.call(arguments,void 0),this["set"+t].apply(this,arguments)}}(B.slice(3));return r}(e)}();

}).call(this,require("buffer").Buffer)

},{"buffer":3}],34:[function(require,module,exports){
"use strict";function _del(e){size--,delete cache[e]}var cache=Object.create(null),debug=!1,hitCount=0,missCount=0,size=0;exports.put=function(e,t,i,o){if(debug&&console.log("caching: %s = %j (@%s)",e,t,i),void 0!==i&&("number"!=typeof i||isNaN(i)||i<=0))throw new Error("Cache timeout must be a positive number");if(void 0!==o&&"function"!=typeof o)throw new Error("Cache timeout callback must be a function");var u=cache[e];u?clearTimeout(u.timeout):size++;var n={value:t,expire:i+Date.now()};return isNaN(n.expire)||(n.timeout=setTimeout(function(){_del(e),o&&o(e,t)},i)),cache[e]=n,t},exports.del=function(e){var t=!0,i=cache[e];return i?(clearTimeout(i.timeout),!isNaN(i.expire)&&i.expire<Date.now()&&(t=!1)):t=!1,t&&_del(e),t},exports.clear=function(){for(var e in cache)clearTimeout(cache[e].timeout);size=0,cache=Object.create(null),debug&&(hitCount=0,missCount=0)},exports.get=function(e){var t=cache[e];if(void 0!==t){if(isNaN(t.expire)||t.expire>=Date.now())return debug&&hitCount++,t.value;debug&&missCount++,size--,delete cache[e]}else debug&&missCount++;return null},exports.size=function(){return size},exports.memsize=function(){var e,t=0;for(e in cache)t++;return t},exports.debug=function(e){debug=e},exports.hits=function(){return hitCount},exports.misses=function(){return missCount},exports.keys=function(){return Object.keys(cache)};

},{}],35:[function(require,module,exports){
"use strict";function Inflate(t){if(!(this instanceof Inflate))return new Inflate(t);this.options=utils.assign({chunkSize:16384,windowBits:0,to:""},t||{});var i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,0===i.windowBits&&(i.windowBits=-15)),!(i.windowBits>=0&&i.windowBits<16)||t&&t.windowBits||(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&0==(15&i.windowBits)&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var n=zlib_inflate.inflateInit2(this.strm,i.windowBits);if(n!==c.Z_OK)throw new Error(msg[n]);this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header)}function inflate(t,i){var n=new Inflate(i);if(n.push(t,!0),n.err)throw n.msg;return n.result}function inflateRaw(t,i){return i=i||{},i.raw=!0,inflate(t,i)}var zlib_inflate=require("./zlib/inflate"),utils=require("./utils/common"),strings=require("./utils/strings"),c=require("./zlib/constants"),msg=require("./zlib/messages"),ZStream=require("./zlib/zstream"),GZheader=require("./zlib/gzheader"),toString=Object.prototype.toString;Inflate.prototype.push=function(t,i){var n,s,e,r,o,a,u=this.strm,l=this.options.chunkSize,h=this.options.dictionary,_=!1;if(this.ended)return!1;s=i===~~i?i:!0===i?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof t?u.input=strings.binstring2buf(t):"[object ArrayBuffer]"===toString.call(t)?u.input=new Uint8Array(t):u.input=t,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new utils.Buf8(l),u.next_out=0,u.avail_out=l),n=zlib_inflate.inflate(u,c.Z_NO_FLUSH),n===c.Z_NEED_DICT&&h&&(a="string"==typeof h?strings.string2buf(h):"[object ArrayBuffer]"===toString.call(h)?new Uint8Array(h):h,n=zlib_inflate.inflateSetDictionary(this.strm,a)),n===c.Z_BUF_ERROR&&!0===_&&(n=c.Z_OK,_=!1),n!==c.Z_STREAM_END&&n!==c.Z_OK)return this.onEnd(n),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&n!==c.Z_STREAM_END&&(0!==u.avail_in||s!==c.Z_FINISH&&s!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(e=strings.utf8border(u.output,u.next_out),r=u.next_out-e,o=strings.buf2string(u.output,e),u.next_out=r,u.avail_out=l-r,r&&utils.arraySet(u.output,u.output,e,r,0),this.onData(o)):this.onData(utils.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(_=!0)}while((u.avail_in>0||0===u.avail_out)&&n!==c.Z_STREAM_END);return n===c.Z_STREAM_END&&(s=c.Z_FINISH),s===c.Z_FINISH?(n=zlib_inflate.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c.Z_OK):s!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),u.avail_out=0,!0)},Inflate.prototype.onData=function(t){this.chunks.push(t)},Inflate.prototype.onEnd=function(t){t===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},exports.Inflate=Inflate,exports.inflate=inflate,exports.inflateRaw=inflateRaw,exports.ungzip=inflate;

},{"./utils/common":36,"./utils/strings":37,"./zlib/constants":39,"./zlib/gzheader":41,"./zlib/inflate":43,"./zlib/messages":45,"./zlib/zstream":46}],36:[function(require,module,exports){
"use strict";var TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;exports.assign=function(r){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n])}}return r},exports.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var fnTyped={arraySet:function(r,t,e,n,a){if(t.subarray&&r.subarray)return void r.set(t.subarray(e,e+n),a);for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){var t,e,n,a,o,s;for(n=0,t=0,e=r.length;t<e;t++)n+=r[t].length;for(s=new Uint8Array(n),a=0,t=0,e=r.length;t<e;t++)o=r[t],s.set(o,a),a+=o.length;return s}},fnUntyped={arraySet:function(r,t,e,n,a){for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){return[].concat.apply([],r)}};exports.setTyped=function(r){r?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK);

},{}],37:[function(require,module,exports){
"use strict";function buf2binstring(r,t){if(t<65537&&(r.subarray&&STR_APPLY_UIA_OK||!r.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils.shrinkBuf(r,t));for(var n="",e=0;e<t;e++)n+=String.fromCharCode(r[e]);return n}var utils=require("./common"),STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(r){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){STR_APPLY_UIA_OK=!1}for(var _utf8len=new utils.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1,exports.string2buf=function(r){var t,n,e,u,f,o=r.length,i=0;for(u=0;u<o;u++)n=r.charCodeAt(u),55296==(64512&n)&&u+1<o&&56320==(64512&(e=r.charCodeAt(u+1)))&&(n=65536+(n-55296<<10)+(e-56320),u++),i+=n<128?1:n<2048?2:n<65536?3:4;for(t=new utils.Buf8(i),f=0,u=0;f<i;u++)n=r.charCodeAt(u),55296==(64512&n)&&u+1<o&&56320==(64512&(e=r.charCodeAt(u+1)))&&(n=65536+(n-55296<<10)+(e-56320),u++),n<128?t[f++]=n:n<2048?(t[f++]=192|n>>>6,t[f++]=128|63&n):n<65536?(t[f++]=224|n>>>12,t[f++]=128|n>>>6&63,t[f++]=128|63&n):(t[f++]=240|n>>>18,t[f++]=128|n>>>12&63,t[f++]=128|n>>>6&63,t[f++]=128|63&n);return t},exports.buf2binstring=function(r){return buf2binstring(r,r.length)},exports.binstring2buf=function(r){for(var t=new utils.Buf8(r.length),n=0,e=t.length;n<e;n++)t[n]=r.charCodeAt(n);return t},exports.buf2string=function(r,t){var n,e,u,f,o=t||r.length,i=new Array(2*o);for(e=0,n=0;n<o;)if((u=r[n++])<128)i[e++]=u;else if((f=_utf8len[u])>4)i[e++]=65533,n+=f-1;else{for(u&=2===f?31:3===f?15:7;f>1&&n<o;)u=u<<6|63&r[n++],f--;f>1?i[e++]=65533:u<65536?i[e++]=u:(u-=65536,i[e++]=55296|u>>10&1023,i[e++]=56320|1023&u)}return buf2binstring(i,e)},exports.utf8border=function(r,t){var n;for(t=t||r.length,t>r.length&&(t=r.length),n=t-1;n>=0&&128==(192&r[n]);)n--;return n<0?t:0===n?t:n+_utf8len[r[n]]>t?n:t};

},{"./common":36}],38:[function(require,module,exports){
"use strict";function adler32(e,r,o,t){for(var d=65535&e|0,l=e>>>16&65535|0,u=0;0!==o;){u=o>2e3?2e3:o,o-=u;do{d=d+r[t++]|0,l=l+d|0}while(--u);d%=65521,l%=65521}return d|l<<16|0}module.exports=adler32;

},{}],39:[function(require,module,exports){
"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};

},{}],40:[function(require,module,exports){
"use strict";function makeTable(){for(var r,a=[],c=0;c<256;c++){r=c;for(var e=0;e<8;e++)r=1&r?3988292384^r>>>1:r>>>1;a[c]=r}return a}function crc32(r,a,c,e){var o=crcTable,t=e+c;r^=-1;for(var n=e;n<t;n++)r=r>>>8^o[255&(r^a[n])];return-1^r}var crcTable=makeTable();module.exports=crc32;

},{}],41:[function(require,module,exports){
"use strict";function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}module.exports=GZheader;

},{}],42:[function(require,module,exports){
"use strict";var BAD=30,TYPE=12;module.exports=function(i,e){var o,a,t,d,n,l,s,f,r,b,c,u,v,m,w,h,k,_,x,g,A,B,D,p,E;o=i.state,a=i.next_in,p=i.input,t=a+(i.avail_in-5),d=i.next_out,E=i.output,n=d-(e-i.avail_out),l=d+(i.avail_out-257),s=o.dmax,f=o.wsize,r=o.whave,b=o.wnext,c=o.window,u=o.hold,v=o.bits,m=o.lencode,w=o.distcode,h=(1<<o.lenbits)-1,k=(1<<o.distbits)-1;i:do{v<15&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=m[u&h];e:for(;;){if(x=_>>>24,u>>>=x,v-=x,0===(x=_>>>16&255))E[d++]=65535&_;else{if(!(16&x)){if(0==(64&x)){_=m[(65535&_)+(u&(1<<x)-1)];continue e}if(32&x){o.mode=TYPE;break i}i.msg="invalid literal/length code",o.mode=BAD;break i}g=65535&_,x&=15,x&&(v<x&&(u+=p[a++]<<v,v+=8),g+=u&(1<<x)-1,u>>>=x,v-=x),v<15&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=w[u&k];o:for(;;){if(x=_>>>24,u>>>=x,v-=x,!(16&(x=_>>>16&255))){if(0==(64&x)){_=w[(65535&_)+(u&(1<<x)-1)];continue o}i.msg="invalid distance code",o.mode=BAD;break i}if(A=65535&_,x&=15,v<x&&(u+=p[a++]<<v,(v+=8)<x&&(u+=p[a++]<<v,v+=8)),(A+=u&(1<<x)-1)>s){i.msg="invalid distance too far back",o.mode=BAD;break i}if(u>>>=x,v-=x,x=d-n,A>x){if((x=A-x)>r&&o.sane){i.msg="invalid distance too far back",o.mode=BAD;break i}if(B=0,D=c,0===b){if(B+=f-x,x<g){g-=x;do{E[d++]=c[B++]}while(--x);B=d-A,D=E}}else if(b<x){if(B+=f+b-x,(x-=b)<g){g-=x;do{E[d++]=c[B++]}while(--x);if(B=0,b<g){x=b,g-=x;do{E[d++]=c[B++]}while(--x);B=d-A,D=E}}}else if(B+=b-x,x<g){g-=x;do{E[d++]=c[B++]}while(--x);B=d-A,D=E}for(;g>2;)E[d++]=D[B++],E[d++]=D[B++],E[d++]=D[B++],g-=3;g&&(E[d++]=D[B++],g>1&&(E[d++]=D[B++]))}else{B=d-A;do{E[d++]=E[B++],E[d++]=E[B++],E[d++]=E[B++],g-=3}while(g>2);g&&(E[d++]=E[B++],g>1&&(E[d++]=E[B++]))}break}}break}}while(a<t&&d<l);g=v>>3,a-=g,v-=g<<3,u&=(1<<v)-1,i.next_in=a,i.next_out=d,i.avail_in=a<t?t-a+5:5-(a-t),i.avail_out=d<l?l-d+257:257-(d-l),o.hold=u,o.bits=v};

},{}],43:[function(require,module,exports){
"use strict";function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new utils.Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new utils.Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):Z_STREAM_ERROR}function inflateReset2(e,t){var a,i;return e&&e.state?(i=e.state,t<0?(a=0,t=-t):(a=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=a,i.wbits=t,inflateReset(e))):Z_STREAM_ERROR}function inflateInit2(e,t){var a,i;return e?(i=new InflateState,e.state=i,i.window=null,a=inflateReset2(e,t),a!==Z_OK&&(e.state=null),a):Z_STREAM_ERROR}function inflateInit(e){return inflateInit2(e,DEF_WBITS)}function fixedtables(e){if(virgin){var t;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,a,i){var n,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new utils.Buf8(s.wsize)),i>=s.wsize?(utils.arraySet(s.window,t,a-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),utils.arraySet(s.window,t,a-i,n,s.wnext),i-=n,i?(utils.arraySet(s.window,t,a-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}function inflate(e,t){var a,i,n,s,l,r,o,d,f,c,h,E,b,_,k,m,w,u,R,T,D,g,S,x,A=0,v=new utils.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR;a=e.state,a.mode===TYPE&&(a.mode=TYPEDO),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,c=r,h=o,g=Z_OK;e:for(;;)switch(a.mode){case HEAD:if(0===a.wrap){a.mode=TYPEDO;break}for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(2&a.wrap&&35615===d){a.check=0,v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0),d=0,f=0,a.mode=FLAGS;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",a.mode=BAD;break}if((15&d)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(d>>>=4,f-=4,D=8+(15&d),0===a.wbits)a.wbits=D;else if(D>a.wbits){e.msg="invalid window size",a.mode=BAD;break}a.dmax=1<<D,e.adler=a.check=1,a.mode=512&d?DICTID:TYPE,d=0,f=0;break;case FLAGS:for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.flags=d,(255&a.flags)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=BAD;break}a.head&&(a.head.text=d>>8&1),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=TIME;case TIME:for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.time=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,v[2]=d>>>16&255,v[3]=d>>>24&255,a.check=crc32(a.check,v,4,0)),d=0,f=0,a.mode=OS;case OS:for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.xflags=255&d,a.head.os=d>>8),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=EXLEN;case EXLEN:if(1024&a.flags){for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length=d,a.head&&(a.head.extra_len=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0}else a.head&&(a.head.extra=null);a.mode=EXTRA;case EXTRA:if(1024&a.flags&&(E=a.length,E>r&&(E=r),E&&(a.head&&(D=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),utils.arraySet(a.head.extra,i,s,E,D)),512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,a.length-=E),a.length))break e;a.length=0,a.mode=NAME;case NAME:if(2048&a.flags){if(0===r)break e;E=0;do{D=i[s+E++],a.head&&D&&a.length<65536&&(a.head.name+=String.fromCharCode(D))}while(D&&E<r);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,D)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=COMMENT;case COMMENT:if(4096&a.flags){if(0===r)break e;E=0;do{D=i[s+E++],a.head&&D&&a.length<65536&&(a.head.comment+=String.fromCharCode(D))}while(D&&E<r);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,D)break e}else a.head&&(a.head.comment=null);a.mode=HCRC;case HCRC:if(512&a.flags){for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(65535&a.check)){e.msg="header crc mismatch",a.mode=BAD;break}d=0,f=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=TYPE;break;case DICTID:for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}e.adler=a.check=zswap32(d),d=0,f=0,a.mode=DICT;case DICT:if(0===a.havedict)return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,Z_NEED_DICT;e.adler=a.check=1,a.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(a.last){d>>>=7&f,f-=7&f,a.mode=CHECK;break}for(;f<3;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}switch(a.last=1&d,d>>>=1,f-=1,3&d){case 0:a.mode=STORED;break;case 1:if(fixedtables(a),a.mode=LEN_,t===Z_TREES){d>>>=2,f-=2;break e}break;case 2:a.mode=TABLE;break;case 3:e.msg="invalid block type",a.mode=BAD}d>>>=2,f-=2;break;case STORED:for(d>>>=7&f,f-=7&f;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",a.mode=BAD;break}if(a.length=65535&d,d=0,f=0,a.mode=COPY_,t===Z_TREES)break e;case COPY_:a.mode=COPY;case COPY:if(E=a.length){if(E>r&&(E=r),E>o&&(E=o),0===E)break e;utils.arraySet(n,i,s,E,l),r-=E,s+=E,o-=E,l+=E,a.length-=E;break}a.mode=TYPE;break;case TABLE:for(;f<14;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.nlen=257+(31&d),d>>>=5,f-=5,a.ndist=1+(31&d),d>>>=5,f-=5,a.ncode=4+(15&d),d>>>=4,f-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=BAD;break}a.have=0,a.mode=LENLENS;case LENLENS:for(;a.have<a.ncode;){for(;f<3;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.lens[O[a.have++]]=7&d,d>>>=3,f-=3}for(;a.have<19;)a.lens[O[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,S={bits:a.lenbits},g=inflate_table(CODES,a.lens,0,19,a.lencode,0,a.work,S),a.lenbits=S.bits,g){e.msg="invalid code lengths set",a.mode=BAD;break}a.have=0,a.mode=CODELENS;case CODELENS:for(;a.have<a.nlen+a.ndist;){for(;A=a.lencode[d&(1<<a.lenbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(w<16)d>>>=k,f-=k,a.lens[a.have++]=w;else{if(16===w){for(x=k+2;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d>>>=k,f-=k,0===a.have){e.msg="invalid bit length repeat",a.mode=BAD;break}D=a.lens[a.have-1],E=3+(3&d),d>>>=2,f-=2}else if(17===w){for(x=k+3;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=k,f-=k,D=0,E=3+(7&d),d>>>=3,f-=3}else{for(x=k+7;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=k,f-=k,D=0,E=11+(127&d),d>>>=7,f-=7}if(a.have+E>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=BAD;break}for(;E--;)a.lens[a.have++]=D}}if(a.mode===BAD)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=BAD;break}if(a.lenbits=9,S={bits:a.lenbits},g=inflate_table(LENS,a.lens,0,a.nlen,a.lencode,0,a.work,S),a.lenbits=S.bits,g){e.msg="invalid literal/lengths set",a.mode=BAD;break}if(a.distbits=6,a.distcode=a.distdyn,S={bits:a.distbits},g=inflate_table(DISTS,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,S),a.distbits=S.bits,g){e.msg="invalid distances set",a.mode=BAD;break}if(a.mode=LEN_,t===Z_TREES)break e;case LEN_:a.mode=LEN;case LEN:if(r>=6&&o>=258){e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,inflate_fast(e,h),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,a.mode===TYPE&&(a.back=-1);break}for(a.back=0;A=a.lencode[d&(1<<a.lenbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(m&&0==(240&m)){for(u=k,R=m,T=w;A=a.lencode[T+((d&(1<<u+R)-1)>>u)],k=A>>>24,m=A>>>16&255,w=65535&A,!(u+k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=u,f-=u,a.back+=u}if(d>>>=k,f-=k,a.back+=k,a.length=w,0===m){a.mode=LIT;break}if(32&m){a.back=-1,a.mode=TYPE;break}if(64&m){e.msg="invalid literal/length code",a.mode=BAD;break}a.extra=15&m,a.mode=LENEXT;case LENEXT:if(a.extra){for(x=a.extra;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=DIST;case DIST:for(;A=a.distcode[d&(1<<a.distbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(0==(240&m)){for(u=k,R=m,T=w;A=a.distcode[T+((d&(1<<u+R)-1)>>u)],k=A>>>24,m=A>>>16&255,w=65535&A,!(u+k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=u,f-=u,a.back+=u}if(d>>>=k,f-=k,a.back+=k,64&m){e.msg="invalid distance code",a.mode=BAD;break}a.offset=w,a.extra=15&m,a.mode=DISTEXT;case DISTEXT:if(a.extra){for(x=a.extra;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.offset+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=BAD;break}a.mode=MATCH;case MATCH:if(0===o)break e;if(E=h-o,a.offset>E){if((E=a.offset-E)>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=BAD;break}E>a.wnext?(E-=a.wnext,b=a.wsize-E):b=a.wnext-E,E>a.length&&(E=a.length),_=a.window}else _=n,b=l-a.offset,E=a.length;E>o&&(E=o),o-=E,a.length-=E;do{n[l++]=_[b++]}while(--E);0===a.length&&(a.mode=LEN);break;case LIT:if(0===o)break e;n[l++]=a.length,o--,a.mode=LEN;break;case CHECK:if(a.wrap){for(;f<32;){if(0===r)break e;r--,d|=i[s++]<<f,f+=8}if(h-=o,e.total_out+=h,a.total+=h,h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,l-h):adler32(a.check,n,h,l-h)),h=o,(a.flags?d:zswap32(d))!==a.check){e.msg="incorrect data check",a.mode=BAD;break}d=0,f=0}a.mode=LENGTH;case LENGTH:if(a.wrap&&a.flags){for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=BAD;break}d=0,f=0}a.mode=DONE;case DONE:g=Z_STREAM_END;break e;case BAD:g=Z_DATA_ERROR;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,(a.wsize||h!==e.avail_out&&a.mode<BAD&&(a.mode<CHECK||t!==Z_FINISH))&&updatewindow(e,e.output,e.next_out,h-e.avail_out)?(a.mode=MEM,Z_MEM_ERROR):(c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,a.total+=h,a.wrap&&h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,e.next_out-h):adler32(a.check,n,h,e.next_out-h)),e.data_type=a.bits+(a.last?64:0)+(a.mode===TYPE?128:0)+(a.mode===LEN_||a.mode===COPY_?256:0),(0===c&&0===h||t===Z_FINISH)&&g===Z_OK&&(g=Z_BUF_ERROR),g)}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK}function inflateGetHeader(e,t){var a;return e&&e.state?(a=e.state,0==(2&a.wrap)?Z_STREAM_ERROR:(a.head=t,t.done=!1,Z_OK)):Z_STREAM_ERROR}function inflateSetDictionary(e,t){var a,i,n=t.length;return e&&e.state?(a=e.state,0!==a.wrap&&a.mode!==DICT?Z_STREAM_ERROR:a.mode===DICT&&(i=1,(i=adler32(i,t,n,0))!==a.check)?Z_DATA_ERROR:updatewindow(e,t,n,n)?(a.mode=MEM,Z_MEM_ERROR):(a.havedict=1,Z_OK)):Z_STREAM_ERROR}var utils=require("../utils/common"),adler32=require("./adler32"),crc32=require("./crc32"),inflate_fast=require("./inffast"),inflate_table=require("./inftrees"),CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,virgin=!0,lenfix,distfix;exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=inflateInit,exports.inflateInit2=inflateInit2,exports.inflate=inflate,exports.inflateEnd=inflateEnd,exports.inflateGetHeader=inflateGetHeader,exports.inflateSetDictionary=inflateSetDictionary,exports.inflateInfo="pako inflate (from Nodeca project)";

},{"../utils/common":36,"./adler32":38,"./crc32":40,"./inffast":42,"./inftrees":44}],44:[function(require,module,exports){
"use strict";var utils=require("../utils/common"),MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(r,S,e,f,t,i,u,o){var E,l,s,n,I,N,T,B,D,O=o.bits,a=0,b=0,A=0,L=0,M=0,X=0,d=0,G=0,H=0,U=0,_=null,x=0,c=new utils.Buf16(MAXBITS+1),m=new utils.Buf16(MAXBITS+1),v=null,w=0;for(a=0;a<=MAXBITS;a++)c[a]=0;for(b=0;b<f;b++)c[S[e+b]]++;for(M=O,L=MAXBITS;L>=1&&0===c[L];L--);if(M>L&&(M=L),0===L)return t[i++]=20971520,t[i++]=20971520,o.bits=1,0;for(A=1;A<L&&0===c[A];A++);for(M<A&&(M=A),G=1,a=1;a<=MAXBITS;a++)if(G<<=1,(G-=c[a])<0)return-1;if(G>0&&(r===CODES||1!==L))return-1;for(m[1]=0,a=1;a<MAXBITS;a++)m[a+1]=m[a]+c[a];for(b=0;b<f;b++)0!==S[e+b]&&(u[m[S[e+b]]++]=b);if(r===CODES?(_=v=u,N=19):r===LENS?(_=lbase,x-=257,v=lext,w-=257,N=256):(_=dbase,v=dext,N=-1),U=0,b=0,a=A,I=i,X=M,d=0,s=-1,H=1<<M,n=H-1,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;for(var C=0;;){C++,T=a-d,u[b]<N?(B=0,D=u[b]):u[b]>N?(B=v[w+u[b]],D=_[x+u[b]]):(B=96,D=0),E=1<<a-d,l=1<<X,A=l;do{l-=E,t[I+(U>>d)+l]=T<<24|B<<16|D|0}while(0!==l);for(E=1<<a-1;U&E;)E>>=1;if(0!==E?(U&=E-1,U+=E):U=0,b++,0==--c[a]){if(a===L)break;a=S[e+u[b]]}if(a>M&&(U&n)!==s){for(0===d&&(d=M),I+=A,X=a-d,G=1<<X;X+d<L&&!((G-=c[X+d])<=0);)X++,G<<=1;if(H+=1<<X,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;s=U&n,t[s]=M<<24|X<<16|I-i|0}}return 0!==U&&(t[I+U]=a-d<<24|64<<16|0),o.bits=M,0};

},{"../utils/common":36}],45:[function(require,module,exports){
"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};

},{}],46:[function(require,module,exports){
"use strict";function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=ZStream;

},{}],47:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],48:[function(require,module,exports){
(function (process){
!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var n="undefined"!=typeof window?window:self,e=n.Q;n.Q=t(),n.Q.noConflict=function(){return n.Q=e,this}}}(function(){"use strict";function t(t){return function(){return q.apply(t,arguments)}}function n(t){return t===Object(t)}function e(t){return"[object StopIteration]"===nt(t)||t instanceof V}function r(t,n){if(B&&n.stack&&"object"==typeof t&&null!==t&&t.stack){for(var e=[],r=n;r;r=r.source)r.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>r.stackCounter)&&(Y(t,"__minimumStackCounter__",{value:r.stackCounter,configurable:!0}),e.unshift(r.stack));e.unshift(t.stack);var i=e.join("\n"+et+"\n"),u=o(i);Y(t,"stack",{value:u,configurable:!0})}}function o(t){for(var n=t.split("\n"),e=[],r=0;r<n.length;++r){var o=n[r];c(o)||i(o)||!o||e.push(o)}return e.join("\n")}function i(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function u(t){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(n)return[n[1],Number(n[2])];var e=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(e)return[e[1],Number(e[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function c(t){var n=u(t);if(!n)return!1;var e=n[0],r=n[1];return e===$&&r>=G&&r<=ft}function f(){if(B)try{throw new Error}catch(r){var t=r.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],e=u(n);if(!e)return;return $=e[0],e[1]}}function s(t){return t instanceof d?t:m(t)?S(t):R(t)}function p(){function t(t){n=t,s.longStackSupport&&B&&(i.source=t),J(e,function(n,e){s.nextTick(function(){t.promiseDispatch.apply(t,e)})},void 0),e=void 0,r=void 0}var n,e=[],r=[],o=X(p.prototype),i=X(d.prototype);if(i.promiseDispatch=function(t,o,i){var u=z(arguments);e?(e.push(u),"when"===o&&i[1]&&r.push(i[1])):s.nextTick(function(){n.promiseDispatch.apply(n,u)})},i.valueOf=function(){if(e)return i;var t=y(n);return v(t)&&(n=t),t},i.inspect=function(){return n?n.inspect():{state:"pending"}},s.longStackSupport&&B)try{throw new Error}catch(t){i.stack=t.stack.substring(t.stack.indexOf("\n")+1),i.stackCounter=rt++}return o.promise=i,o.resolve=function(e){n||t(s(e))},o.fulfill=function(e){n||t(R(e))},o.reject=function(e){n||t(T(e))},o.notify=function(t){n||J(r,function(n,e){s.nextTick(function(){e(t)})},void 0)},o}function a(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var n=p();try{t(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}return n.promise}function l(t){return a(function(n,e){for(var r=0,o=t.length;r<o;r++)s(t[r]).then(n,e)})}function d(t,n,e){void 0===n&&(n=function(t){return T(new Error("Promise does not support operation: "+t))}),void 0===e&&(e=function(){return{state:"unknown"}});var r=X(d.prototype);if(r.promiseDispatch=function(e,o,i){var u;try{u=t[o]?t[o].apply(r,i):n.call(r,o,i)}catch(t){u=T(t)}e&&e(u)},r.inspect=e,e){var o=e();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var t=e();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function h(t,n,e,r){return s(t).then(n,e,r)}function y(t){if(v(t)){var n=t.inspect();if("fulfilled"===n.state)return n.value}return t}function v(t){return t instanceof d}function m(t){return n(t)&&"function"==typeof t.then}function k(t){return v(t)&&"pending"===t.inspect().state}function w(t){return!v(t)||"fulfilled"===t.inspect().state}function j(t){return v(t)&&"rejected"===t.inspect().state}function g(){ot.length=0,it.length=0,ct||(ct=!0)}function b(t,n){ct&&("object"==typeof process&&"function"==typeof process.emit&&s.nextTick.runAfter(function(){-1!==K(it,t)&&(process.emit("unhandledRejection",n,t),ut.push(t))}),it.push(t),n&&void 0!==n.stack?ot.push(n.stack):ot.push("(no stack) "+n))}function x(t){if(ct){var n=K(it,t);-1!==n&&("object"==typeof process&&"function"==typeof process.emit&&s.nextTick.runAfter(function(){var e=K(ut,t);-1!==e&&(process.emit("rejectionHandled",ot[n],t),ut.splice(e,1))}),it.splice(n,1),ot.splice(n,1))}}function T(t){var n=d({when:function(n){return n&&x(this),n?n(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return b(n,t),n}function R(t){return d({when:function(){return t},get:function(n){return t[n]},set:function(n,e){t[n]=e},delete:function(n){delete t[n]},post:function(n,e){return null===n||void 0===n?t.apply(void 0,e):t[n].apply(t,e)},apply:function(n,e){return t.apply(n,e)},keys:function(){return tt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function S(t){var n=p();return s.nextTick(function(){try{t.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}}),n.promise}function E(t){return d({isDef:function(){}},function(n,e){return P(t,n,e)},function(){return s(t).inspect()})}function O(t,n,e){return s(t).spread(n,e)}function C(t){return function(){function n(t,n){var u;if("undefined"==typeof StopIteration){try{u=r[t](n)}catch(t){return T(t)}return u.done?s(u.value):h(u.value,o,i)}try{u=r[t](n)}catch(t){return e(t)?s(t.value):T(t)}return h(u,o,i)}var r=t.apply(this,arguments),o=n.bind(n,"next"),i=n.bind(n,"throw");return o()}}function Q(t){s.done(s.async(t)())}function _(t){throw new V(t)}function N(t){return function(){return O([this,D(arguments)],function(n,e){return t.apply(n,e)})}}function P(t,n,e){return s(t).dispatch(n,e)}function D(t){return h(t,function(t){var n=0,e=p();return J(t,function(r,o,i){var u;v(o)&&"fulfilled"===(u=o.inspect()).state?t[i]=u.value:(++n,h(o,function(r){t[i]=r,0==--n&&e.resolve(t)},e.reject,function(t){e.notify({index:i,value:t})}))},void 0),0===n&&e.resolve(t),e.promise})}function A(t){if(0===t.length)return s.resolve();var n=s.defer(),e=0;return J(t,function(r,o,i){function u(t){n.resolve(t)}function c(t){if(0===--e){var r=t||new Error(""+t);r.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+r.message,n.reject(r)}}function f(t){n.notify({index:i,value:t})}var s=t[i];e++,h(s,u,c,f)},void 0),n.promise}function I(t){return h(t,function(t){return t=W(t,s),h(D(W(t,function(t){return h(t,H,H)})),function(){return t})})}function U(t){return s(t).allSettled()}function F(t,n){return s(t).then(void 0,void 0,n)}function M(t,n){return s(t).nodeify(n)}var B=!1;try{throw new Error}catch(t){B=!!t.stack}var $,V,G=f(),H=function(){},L=function(){function t(){for(var t,r;e.next;)e=e.next,t=e.task,e.task=void 0,r=e.domain,r&&(e.domain=void 0,r.enter()),n(t,r);for(;c.length;)t=c.pop(),n(t);o=!1}function n(n,e){try{n()}catch(n){if(u)throw e&&e.exit(),setTimeout(t,0),e&&e.enter(),n;setTimeout(function(){throw n},0)}e&&e.exit()}var e={task:void 0,next:null},r=e,o=!1,i=void 0,u=!1,c=[];if(L=function(t){r=r.next={task:t,domain:u&&process.domain,next:null},o||(o=!0,i())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)u=!0,i=function(){process.nextTick(t)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var f=new MessageChannel;f.port1.onmessage=function(){i=s,f.port1.onmessage=t,t()};var s=function(){f.port2.postMessage(0)};i=function(){setTimeout(t,0),s()}}else i=function(){setTimeout(t,0)};return L.runAfter=function(t){c.push(t),o||(o=!0,i())},L}(),q=Function.call,z=t(Array.prototype.slice),J=t(Array.prototype.reduce||function(t,n){var e=0,r=this.length;if(1===arguments.length)for(;;){if(e in this){n=this[e++];break}if(++e>=r)throw new TypeError}for(;e<r;e++)e in this&&(n=t(n,this[e],e));return n}),K=t(Array.prototype.indexOf||function(t){for(var n=0;n<this.length;n++)if(this[n]===t)return n;return-1}),W=t(Array.prototype.map||function(t,n){var e=this,r=[];return J(e,function(o,i,u){r.push(t.call(n,i,u,e))},void 0),r}),X=Object.create||function(t){function n(){}return n.prototype=t,new n},Y=Object.defineProperty||function(t,n,e){return t[n]=e.value,t},Z=t(Object.prototype.hasOwnProperty),tt=Object.keys||function(t){var n=[];for(var e in t)Z(t,e)&&n.push(e);return n},nt=t(Object.prototype.toString);V="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var et="From previous event:";s.resolve=s,s.nextTick=L,s.longStackSupport=!1;var rt=1;"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(s.longStackSupport=!0),s.defer=p,p.prototype.makeNodeResolver=function(){var t=this;return function(n,e){n?t.reject(n):arguments.length>2?t.resolve(z(arguments,1)):t.resolve(e)}},s.Promise=a,s.promise=a,a.race=l,a.all=D,a.reject=T,a.resolve=s,s.passByCopy=function(t){return t},d.prototype.passByCopy=function(){return this},s.join=function(t,n){return s(t).join(n)},d.prototype.join=function(t){return s([this,t]).spread(function(t,n){if(t===n)return t;throw new Error("Q can't join: not the same: "+t+" "+n)})},s.race=l,d.prototype.race=function(){return this.then(s.race)},s.makePromise=d,d.prototype.toString=function(){return"[object Promise]"},d.prototype.then=function(t,n,e){function o(n){try{return"function"==typeof t?t(n):n}catch(t){return T(t)}}function i(t){if("function"==typeof n){r(t,c);try{return n(t)}catch(t){return T(t)}}return T(t)}function u(t){return"function"==typeof e?e(t):t}var c=this,f=p(),a=!1;return s.nextTick(function(){c.promiseDispatch(function(t){a||(a=!0,f.resolve(o(t)))},"when",[function(t){a||(a=!0,f.resolve(i(t)))}])}),c.promiseDispatch(void 0,"when",[void 0,function(t){var n,e=!1;try{n=u(t)}catch(t){if(e=!0,!s.onerror)throw t;s.onerror(t)}e||f.notify(n)}]),f.promise},s.tap=function(t,n){return s(t).tap(n)},d.prototype.tap=function(t){return t=s(t),this.then(function(n){return t.fcall(n).thenResolve(n)})},s.when=h,d.prototype.thenResolve=function(t){return this.then(function(){return t})},s.thenResolve=function(t,n){return s(t).thenResolve(n)},d.prototype.thenReject=function(t){return this.then(function(){throw t})},s.thenReject=function(t,n){return s(t).thenReject(n)},s.nearer=y,s.isPromise=v,s.isPromiseAlike=m,s.isPending=k,d.prototype.isPending=function(){return"pending"===this.inspect().state},s.isFulfilled=w,d.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},s.isRejected=j,d.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ot=[],it=[],ut=[],ct=!0;s.resetUnhandledRejections=g,s.getUnhandledReasons=function(){return ot.slice()},s.stopUnhandledRejectionTracking=function(){g(),ct=!1},g(),s.reject=T,s.fulfill=R,s.master=E,s.spread=O,d.prototype.spread=function(t,n){return this.all().then(function(n){return t.apply(void 0,n)},n)},s.async=C,s.spawn=Q,s.return=_,s.promised=N,s.dispatch=P,d.prototype.dispatch=function(t,n){var e=this,r=p();return s.nextTick(function(){e.promiseDispatch(r.resolve,t,n)}),r.promise},s.get=function(t,n){return s(t).dispatch("get",[n])},d.prototype.get=function(t){return this.dispatch("get",[t])},s.set=function(t,n,e){return s(t).dispatch("set",[n,e])},d.prototype.set=function(t,n){return this.dispatch("set",[t,n])},s.del=s.delete=function(t,n){return s(t).dispatch("delete",[n])},d.prototype.del=d.prototype.delete=function(t){return this.dispatch("delete",[t])},s.mapply=s.post=function(t,n,e){return s(t).dispatch("post",[n,e])},d.prototype.mapply=d.prototype.post=function(t,n){return this.dispatch("post",[t,n])},s.send=s.mcall=s.invoke=function(t,n){return s(t).dispatch("post",[n,z(arguments,2)])},d.prototype.send=d.prototype.mcall=d.prototype.invoke=function(t){return this.dispatch("post",[t,z(arguments,1)])},s.fapply=function(t,n){return s(t).dispatch("apply",[void 0,n])},d.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},s.try=s.fcall=function(t){return s(t).dispatch("apply",[void 0,z(arguments,1)])},d.prototype.fcall=function(){return this.dispatch("apply",[void 0,z(arguments)])},s.fbind=function(t){var n=s(t),e=z(arguments,1);return function(){return n.dispatch("apply",[this,e.concat(z(arguments))])}},d.prototype.fbind=function(){var t=this,n=z(arguments);return function(){return t.dispatch("apply",[this,n.concat(z(arguments))])}},s.keys=function(t){return s(t).dispatch("keys",[])},d.prototype.keys=function(){return this.dispatch("keys",[])},s.all=D,d.prototype.all=function(){return D(this)},s.any=A,d.prototype.any=function(){return A(this)},s.allResolved=function(t,n,e){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(n+" is deprecated, use "+e+" instead.",new Error("").stack),t.apply(t,arguments)}}(I,"allResolved","allSettled"),d.prototype.allResolved=function(){return I(this)},s.allSettled=U,d.prototype.allSettled=function(){return this.then(function(t){return D(W(t,function(t){function n(){return t.inspect()}return t=s(t),t.then(n,n)}))})},s.fail=s.catch=function(t,n){return s(t).then(void 0,n)},d.prototype.fail=d.prototype.catch=function(t){return this.then(void 0,t)},s.progress=F,d.prototype.progress=function(t){return this.then(void 0,void 0,t)},s.fin=s.finally=function(t,n){return s(t).finally(n)},d.prototype.fin=d.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=s(t),this.then(function(n){return t.fcall().then(function(){return n})},function(n){return t.fcall().then(function(){throw n})})},s.done=function(t,n,e,r){return s(t).done(n,e,r)},d.prototype.done=function(t,n,e){var o=function(t){s.nextTick(function(){if(r(t,i),!s.onerror)throw t;s.onerror(t)})},i=t||n||e?this.then(t,n,e):this;"object"==typeof process&&process&&process.domain&&(o=process.domain.bind(o)),i.then(void 0,o)},s.timeout=function(t,n,e){return s(t).timeout(n,e)},d.prototype.timeout=function(t,n){var e=p(),r=setTimeout(function(){n&&"string"!=typeof n||(n=new Error(n||"Timed out after "+t+" ms"),n.code="ETIMEDOUT"),e.reject(n)},t);return this.then(function(t){clearTimeout(r),e.resolve(t)},function(t){clearTimeout(r),e.reject(t)},e.notify),e.promise},s.delay=function(t,n){return void 0===n&&(n=t,t=void 0),s(t).delay(n)},d.prototype.delay=function(t){return this.then(function(n){var e=p();return setTimeout(function(){e.resolve(n)},t),e.promise})},s.nfapply=function(t,n){return s(t).nfapply(n)},d.prototype.nfapply=function(t){var n=p(),e=z(t);return e.push(n.makeNodeResolver()),this.fapply(e).fail(n.reject),n.promise},s.nfcall=function(t){var n=z(arguments,1);return s(t).nfapply(n)},d.prototype.nfcall=function(){var t=z(arguments),n=p();return t.push(n.makeNodeResolver()),this.fapply(t).fail(n.reject),n.promise},s.nfbind=s.denodeify=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var n=z(arguments,1);return function(){var e=n.concat(z(arguments)),r=p();return e.push(r.makeNodeResolver()),s(t).fapply(e).fail(r.reject),r.promise}},d.prototype.nfbind=d.prototype.denodeify=function(){var t=z(arguments);return t.unshift(this),s.denodeify.apply(void 0,t)},s.nbind=function(t,n){var e=z(arguments,2);return function(){function r(){return t.apply(n,arguments)}var o=e.concat(z(arguments)),i=p();return o.push(i.makeNodeResolver()),s(r).fapply(o).fail(i.reject),i.promise}},d.prototype.nbind=function(){var t=z(arguments,0);return t.unshift(this),s.nbind.apply(void 0,t)},s.nmapply=s.npost=function(t,n,e){return s(t).npost(n,e)},d.prototype.nmapply=d.prototype.npost=function(t,n){var e=z(n||[]),r=p();return e.push(r.makeNodeResolver()),this.dispatch("post",[t,e]).fail(r.reject),r.promise},s.nsend=s.nmcall=s.ninvoke=function(t,n){var e=z(arguments,2),r=p();return e.push(r.makeNodeResolver()),s(t).dispatch("post",[n,e]).fail(r.reject),r.promise},d.prototype.nsend=d.prototype.nmcall=d.prototype.ninvoke=function(t){var n=z(arguments,1),e=p();return n.push(e.makeNodeResolver()),this.dispatch("post",[t,n]).fail(e.reject),e.promise},s.nodeify=M,d.prototype.nodeify=function(t){if(!t)return this;this.then(function(n){s.nextTick(function(){t(null,n)})},function(n){s.nextTick(function(){t(n)})})},s.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ft=f();return s});

}).call(this,require('_process'))

},{"_process":47}],49:[function(require,module,exports){
"use strict";module.exports=require("react/lib/ReactDOM");

},{"react/lib/ReactDOM":84}],50:[function(require,module,exports){
"use strict";var ReactMount=require("./ReactMount"),findDOMNode=require("./findDOMNode"),focusNode=require("fbjs/lib/focusNode"),Mixin={componentDidMount:function(){this.props.autoFocus&&focusNode(findDOMNode(this))}},AutoFocusUtils={Mixin:Mixin,focusDOMComponent:function(){focusNode(ReactMount.getNode(this._rootNodeID))}};module.exports=AutoFocusUtils;

},{"./ReactMount":112,"./findDOMNode":155,"fbjs/lib/focusNode":14}],51:[function(require,module,exports){
"use strict";function isPresto(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function isKeypressCommand(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function getCompositionEventType(e){switch(e){case topLevelTypes.topCompositionStart:return eventTypes.compositionStart;case topLevelTypes.topCompositionEnd:return eventTypes.compositionEnd;case topLevelTypes.topCompositionUpdate:return eventTypes.compositionUpdate}}function isFallbackCompositionStart(e,t){return e===topLevelTypes.topKeyDown&&t.keyCode===START_KEYCODE}function isFallbackCompositionEnd(e,t){switch(e){case topLevelTypes.topKeyUp:return-1!==END_KEYCODES.indexOf(t.keyCode);case topLevelTypes.topKeyDown:return t.keyCode!==START_KEYCODE;case topLevelTypes.topKeyPress:case topLevelTypes.topMouseDown:case topLevelTypes.topBlur:return!0;default:return!1}}function getDataFromCustomEvent(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function extractCompositionEvent(e,t,o,n,p){var s,i;if(canUseCompositionEvent?s=getCompositionEventType(e):currentComposition?isFallbackCompositionEnd(e,n)&&(s=eventTypes.compositionEnd):isFallbackCompositionStart(e,n)&&(s=eventTypes.compositionStart),!s)return null;useFallbackCompositionData&&(currentComposition||s!==eventTypes.compositionStart?s===eventTypes.compositionEnd&&currentComposition&&(i=currentComposition.getData()):currentComposition=FallbackCompositionState.getPooled(t));var r=SyntheticCompositionEvent.getPooled(s,o,n,p);if(i)r.data=i;else{var a=getDataFromCustomEvent(n);null!==a&&(r.data=a)}return EventPropagators.accumulateTwoPhaseDispatches(r),r}function getNativeBeforeInputChars(e,t){switch(e){case topLevelTypes.topCompositionEnd:return getDataFromCustomEvent(t);case topLevelTypes.topKeyPress:return t.which!==SPACEBAR_CODE?null:(hasSpaceKeypress=!0,SPACEBAR_CHAR);case topLevelTypes.topTextInput:var o=t.data;return o===SPACEBAR_CHAR&&hasSpaceKeypress?null:o;default:return null}}function getFallbackBeforeInputChars(e,t){if(currentComposition){if(e===topLevelTypes.topCompositionEnd||isFallbackCompositionEnd(e,t)){var o=currentComposition.getData();return FallbackCompositionState.release(currentComposition),currentComposition=null,o}return null}switch(e){case topLevelTypes.topPaste:return null;case topLevelTypes.topKeyPress:return t.which&&!isKeypressCommand(t)?String.fromCharCode(t.which):null;case topLevelTypes.topCompositionEnd:return useFallbackCompositionData?null:t.data;default:return null}}function extractBeforeInputEvent(e,t,o,n,p){var s;if(!(s=canUseTextInputEvent?getNativeBeforeInputChars(e,n):getFallbackBeforeInputChars(e,n)))return null;var i=SyntheticInputEvent.getPooled(eventTypes.beforeInput,o,n,p);return i.data=s,EventPropagators.accumulateTwoPhaseDispatches(i),i}var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),FallbackCompositionState=require("./FallbackCompositionState"),SyntheticCompositionEvent=require("./SyntheticCompositionEvent"),SyntheticInputEvent=require("./SyntheticInputEvent"),keyOf=require("fbjs/lib/keyOf"),END_KEYCODES=[9,13,27,32],START_KEYCODE=229,canUseCompositionEvent=ExecutionEnvironment.canUseDOM&&"CompositionEvent"in window,documentMode=null;ExecutionEnvironment.canUseDOM&&"documentMode"in document&&(documentMode=document.documentMode);var canUseTextInputEvent=ExecutionEnvironment.canUseDOM&&"TextEvent"in window&&!documentMode&&!isPresto(),useFallbackCompositionData=ExecutionEnvironment.canUseDOM&&(!canUseCompositionEvent||documentMode&&documentMode>8&&documentMode<=11),SPACEBAR_CODE=32,SPACEBAR_CHAR=String.fromCharCode(SPACEBAR_CODE),topLevelTypes=EventConstants.topLevelTypes,eventTypes={beforeInput:{phasedRegistrationNames:{bubbled:keyOf({onBeforeInput:null}),captured:keyOf({onBeforeInputCapture:null})},dependencies:[topLevelTypes.topCompositionEnd,topLevelTypes.topKeyPress,topLevelTypes.topTextInput,topLevelTypes.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:keyOf({onCompositionEnd:null}),captured:keyOf({onCompositionEndCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionEnd,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:keyOf({onCompositionStart:null}),captured:keyOf({onCompositionStartCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionStart,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:keyOf({onCompositionUpdate:null}),captured:keyOf({onCompositionUpdateCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionUpdate,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]}},hasSpaceKeypress=!1,currentComposition=null,BeforeInputEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,o,n,p){return[extractCompositionEvent(e,t,o,n,p),extractBeforeInputEvent(e,t,o,n,p)]}};module.exports=BeforeInputEventPlugin;

},{"./EventConstants":63,"./EventPropagators":67,"./FallbackCompositionState":68,"./SyntheticCompositionEvent":137,"./SyntheticInputEvent":141,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/keyOf":24}],52:[function(require,module,exports){
"use strict";function prefixKey(o,r){return o+r.charAt(0).toUpperCase()+r.substring(1)}var isUnitlessNumber={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},prefixes=["Webkit","ms","Moz","O"];Object.keys(isUnitlessNumber).forEach(function(o){prefixes.forEach(function(r){isUnitlessNumber[prefixKey(r,o)]=isUnitlessNumber[o]})});var shorthandPropertyExpansions={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},CSSProperty={isUnitlessNumber:isUnitlessNumber,shorthandPropertyExpansions:shorthandPropertyExpansions};module.exports=CSSProperty;

},{}],53:[function(require,module,exports){
"use strict";var CSSProperty=require("./CSSProperty"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactPerf=require("./ReactPerf"),camelizeStyleName=require("fbjs/lib/camelizeStyleName"),dangerousStyleValue=require("./dangerousStyleValue"),hyphenateStyleName=require("fbjs/lib/hyphenateStyleName"),memoizeStringOnly=require("fbjs/lib/memoizeStringOnly"),warning=require("fbjs/lib/warning"),processStyleName=memoizeStringOnly(function(e){return hyphenateStyleName(e)}),hasShorthandPropertyBug=!1,styleFloatAccessor="cssFloat";if(ExecutionEnvironment.canUseDOM){var tempStyle=document.createElement("div").style;try{tempStyle.font=""}catch(e){hasShorthandPropertyBug=!0}void 0===document.documentElement.style.cssFloat&&(styleFloatAccessor="styleFloat")}var badVendoredStyleNamePattern,badStyleValueWithSemicolonPattern,warnedStyleNames,warnedStyleValues,warnHyphenatedStyleName,warnBadVendoredStyleName,warnStyleValueWithSemicolon,warnValidStyle,CSSPropertyOperations={createMarkupForStyles:function(e){var r="";for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];null!=a&&(r+=processStyleName(t)+":",r+=dangerousStyleValue(t,a)+";")}return r||null},setValueForStyles:function(e,r){var t=e.style;for(var a in r)if(r.hasOwnProperty(a)){var n=dangerousStyleValue(a,r[a]);if("float"===a&&(a=styleFloatAccessor),n)t[a]=n;else{var l=hasShorthandPropertyBug&&CSSProperty.shorthandPropertyExpansions[a];if(l)for(var o in l)t[o]="";else t[a]=""}}}};ReactPerf.measureMethods(CSSPropertyOperations,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),module.exports=CSSPropertyOperations;

},{"./CSSProperty":52,"./ReactPerf":118,"./dangerousStyleValue":152,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/camelizeStyleName":8,"fbjs/lib/hyphenateStyleName":19,"fbjs/lib/memoizeStringOnly":26,"fbjs/lib/warning":29}],54:[function(require,module,exports){
"use strict";function CallbackQueue(){this._callbacks=null,this._contexts=null}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant");assign(CallbackQueue.prototype,{enqueue:function(t,l){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(l)},notifyAll:function(){var t=this._callbacks,l=this._contexts;if(t){t.length!==l.length&&invariant(!1),this._callbacks=null,this._contexts=null;for(var s=0;s<t.length;s++)t[s].call(l[s]);t.length=0,l.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),PooledClass.addPoolingTo(CallbackQueue),module.exports=CallbackQueue;

},{"./Object.assign":71,"./PooledClass":72,"fbjs/lib/invariant":20}],55:[function(require,module,exports){
"use strict";function shouldUseChangeEvent(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function manualDispatchChangeEvent(e){var t=SyntheticEvent.getPooled(eventTypes.change,activeElementID,e,getEventTarget(e));EventPropagators.accumulateTwoPhaseDispatches(t),ReactUpdates.batchedUpdates(runEventInBatch,t)}function runEventInBatch(e){EventPluginHub.enqueueEvents(e),EventPluginHub.processEventQueue(!1)}function startWatchingForChangeEventIE8(e,t){activeElement=e,activeElementID=t,activeElement.attachEvent("onchange",manualDispatchChangeEvent)}function stopWatchingForChangeEventIE8(){activeElement&&(activeElement.detachEvent("onchange",manualDispatchChangeEvent),activeElement=null,activeElementID=null)}function getTargetIDForChangeEvent(e,t,n){if(e===topLevelTypes.topChange)return n}function handleEventsForChangeEventIE8(e,t,n){e===topLevelTypes.topFocus?(stopWatchingForChangeEventIE8(),startWatchingForChangeEventIE8(t,n)):e===topLevelTypes.topBlur&&stopWatchingForChangeEventIE8()}function startWatchingForValueChange(e,t){activeElement=e,activeElementID=t,activeElementValue=e.value,activeElementValueProp=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(activeElement,"value",newValueProp),activeElement.attachEvent("onpropertychange",handlePropertyChange)}function stopWatchingForValueChange(){activeElement&&(delete activeElement.value,activeElement.detachEvent("onpropertychange",handlePropertyChange),activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null)}function handlePropertyChange(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==activeElementValue&&(activeElementValue=t,manualDispatchChangeEvent(e))}}function getTargetIDForInputEvent(e,t,n){if(e===topLevelTypes.topInput)return n}function handleEventsForInputEventIE(e,t,n){e===topLevelTypes.topFocus?(stopWatchingForValueChange(),startWatchingForValueChange(t,n)):e===topLevelTypes.topBlur&&stopWatchingForValueChange()}function getTargetIDForInputEventIE(e,t,n){if((e===topLevelTypes.topSelectionChange||e===topLevelTypes.topKeyUp||e===topLevelTypes.topKeyDown)&&activeElement&&activeElement.value!==activeElementValue)return activeElementValue=activeElement.value,activeElementID}function shouldUseClickEvent(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function getTargetIDForClickEvent(e,t,n){if(e===topLevelTypes.topClick)return n}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactUpdates=require("./ReactUpdates"),SyntheticEvent=require("./SyntheticEvent"),getEventTarget=require("./getEventTarget"),isEventSupported=require("./isEventSupported"),isTextInputElement=require("./isTextInputElement"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,eventTypes={change:{phasedRegistrationNames:{bubbled:keyOf({onChange:null}),captured:keyOf({onChangeCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topChange,topLevelTypes.topClick,topLevelTypes.topFocus,topLevelTypes.topInput,topLevelTypes.topKeyDown,topLevelTypes.topKeyUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null,doesChangeEventBubble=!1;ExecutionEnvironment.canUseDOM&&(doesChangeEventBubble=isEventSupported("change")&&(!("documentMode"in document)||document.documentMode>8));var isInputEventSupported=!1;ExecutionEnvironment.canUseDOM&&(isInputEventSupported=isEventSupported("input")&&(!("documentMode"in document)||document.documentMode>9));var newValueProp={get:function(){return activeElementValueProp.get.call(this)},set:function(e){activeElementValue=""+e,activeElementValueProp.set.call(this,e)}},ChangeEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,a,o){var l,u;if(shouldUseChangeEvent(t)?doesChangeEventBubble?l=getTargetIDForChangeEvent:u=handleEventsForChangeEventIE8:isTextInputElement(t)?isInputEventSupported?l=getTargetIDForInputEvent:(l=getTargetIDForInputEventIE,u=handleEventsForInputEventIE):shouldUseClickEvent(t)&&(l=getTargetIDForClickEvent),l){var v=l(e,t,n);if(v){var p=SyntheticEvent.getPooled(eventTypes.change,v,a,o);return p.type="change",EventPropagators.accumulateTwoPhaseDispatches(p),p}}u&&u(e,t,n)}};module.exports=ChangeEventPlugin;

},{"./EventConstants":63,"./EventPluginHub":64,"./EventPropagators":67,"./ReactUpdates":130,"./SyntheticEvent":139,"./getEventTarget":161,"./isEventSupported":166,"./isTextInputElement":167,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/keyOf":24}],56:[function(require,module,exports){
"use strict";var nextReactRootIndex=0,ClientReactRootIndex={createReactRootIndex:function(){return nextReactRootIndex++}};module.exports=ClientReactRootIndex;

},{}],57:[function(require,module,exports){
"use strict";function insertChildAt(e,t,n){var r=n>=e.childNodes.length?null:e.childNodes.item(n);e.insertBefore(t,r)}var Danger=require("./Danger"),ReactMultiChildUpdateTypes=require("./ReactMultiChildUpdateTypes"),ReactPerf=require("./ReactPerf"),setInnerHTML=require("./setInnerHTML"),setTextContent=require("./setTextContent"),invariant=require("fbjs/lib/invariant"),DOMChildrenOperations={dangerouslyReplaceNodeWithMarkup:Danger.dangerouslyReplaceNodeWithMarkup,updateTextContent:setTextContent,processUpdates:function(e,t){for(var n,r=null,a=null,i=0;i<e.length;i++)if(n=e[i],n.type===ReactMultiChildUpdateTypes.MOVE_EXISTING||n.type===ReactMultiChildUpdateTypes.REMOVE_NODE){var d=n.fromIndex,l=n.parentNode.childNodes[d],p=n.parentID;l||invariant(!1),r=r||{},r[p]=r[p]||[],r[p][d]=l,a=a||[],a.push(l)}var s;if(s=t.length&&"string"==typeof t[0]?Danger.dangerouslyRenderMarkup(t):t,a)for(var o=0;o<a.length;o++)a[o].parentNode.removeChild(a[o]);for(var u=0;u<e.length;u++)switch(n=e[u],n.type){case ReactMultiChildUpdateTypes.INSERT_MARKUP:insertChildAt(n.parentNode,s[n.markupIndex],n.toIndex);break;case ReactMultiChildUpdateTypes.MOVE_EXISTING:insertChildAt(n.parentNode,r[n.parentID][n.fromIndex],n.toIndex);break;case ReactMultiChildUpdateTypes.SET_MARKUP:setInnerHTML(n.parentNode,n.content);break;case ReactMultiChildUpdateTypes.TEXT_CONTENT:setTextContent(n.parentNode,n.content);break;case ReactMultiChildUpdateTypes.REMOVE_NODE:}}};ReactPerf.measureMethods(DOMChildrenOperations,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),module.exports=DOMChildrenOperations;

},{"./Danger":60,"./ReactMultiChildUpdateTypes":114,"./ReactPerf":118,"./setInnerHTML":171,"./setTextContent":172,"fbjs/lib/invariant":20}],58:[function(require,module,exports){
"use strict";function checkMask(t,e){return(t&e)===e}var invariant=require("fbjs/lib/invariant"),DOMPropertyInjection={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(t){var e=DOMPropertyInjection,r=t.Properties||{},a=t.DOMAttributeNamespaces||{},o=t.DOMAttributeNames||{},i=t.DOMPropertyNames||{},s=t.DOMMutationMethods||{};t.isCustomAttribute&&DOMProperty._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var u in r){DOMProperty.properties.hasOwnProperty(u)&&invariant(!1);var n=u.toLowerCase(),c=r[u],E={attributeName:n,attributeNamespace:null,propertyName:u,mutationMethod:null,mustUseAttribute:checkMask(c,e.MUST_USE_ATTRIBUTE),mustUseProperty:checkMask(c,e.MUST_USE_PROPERTY),hasSideEffects:checkMask(c,e.HAS_SIDE_EFFECTS),hasBooleanValue:checkMask(c,e.HAS_BOOLEAN_VALUE),hasNumericValue:checkMask(c,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:checkMask(c,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:checkMask(c,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(E.mustUseAttribute&&E.mustUseProperty&&invariant(!1),!E.mustUseProperty&&E.hasSideEffects&&invariant(!1),E.hasBooleanValue+E.hasNumericValue+E.hasOverloadedBooleanValue<=1||invariant(!1),o.hasOwnProperty(u)){var A=o[u];E.attributeName=A}a.hasOwnProperty(u)&&(E.attributeNamespace=a[u]),i.hasOwnProperty(u)&&(E.propertyName=i[u]),s.hasOwnProperty(u)&&(E.mutationMethod=s[u]),DOMProperty.properties[u]=E}}},defaultValueCache={},DOMProperty={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<DOMProperty._isCustomAttributeFunctions.length;e++){if((0,DOMProperty._isCustomAttributeFunctions[e])(t))return!0}return!1},getDefaultValueForProperty:function(t,e){var r,a=defaultValueCache[t];return a||(defaultValueCache[t]=a={}),e in a||(r=document.createElement(t),a[e]=r[e]),a[e]},injection:DOMPropertyInjection};module.exports=DOMProperty;

},{"fbjs/lib/invariant":20}],59:[function(require,module,exports){
"use strict";function isAttributeNameSafe(e){return!!validatedAttributeNameCache.hasOwnProperty(e)||!illegalAttributeNameCache.hasOwnProperty(e)&&(VALID_ATTRIBUTE_NAME_REGEX.test(e)?(validatedAttributeNameCache[e]=!0,!0):(illegalAttributeNameCache[e]=!0,!1))}function shouldIgnoreValue(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&!1===t}var DOMProperty=require("./DOMProperty"),ReactPerf=require("./ReactPerf"),quoteAttributeValueForBrowser=require("./quoteAttributeValueForBrowser"),warning=require("fbjs/lib/warning"),VALID_ATTRIBUTE_NAME_REGEX=/^[a-zA-Z_][\w\.\-]*$/,illegalAttributeNameCache={},validatedAttributeNameCache={},reactProps,warnedProperties,warnUnknownProperty,DOMPropertyOperations={createMarkupForID:function(e){return DOMProperty.ID_ATTRIBUTE_NAME+"="+quoteAttributeValueForBrowser(e)},setAttributeForID:function(e,t){e.setAttribute(DOMProperty.ID_ATTRIBUTE_NAME,t)},createMarkupForProperty:function(e,t){var r=DOMProperty.properties.hasOwnProperty(e)?DOMProperty.properties[e]:null;if(r){if(shouldIgnoreValue(r,t))return"";var o=r.attributeName;return r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===t?o+'=""':o+"="+quoteAttributeValueForBrowser(t)}return DOMProperty.isCustomAttribute(e)?null==t?"":e+"="+quoteAttributeValueForBrowser(t):null},createMarkupForCustomAttribute:function(e,t){return isAttributeNameSafe(e)&&null!=t?e+"="+quoteAttributeValueForBrowser(t):""},setValueForProperty:function(e,t,r){var o=DOMProperty.properties.hasOwnProperty(t)?DOMProperty.properties[t]:null;if(o){var a=o.mutationMethod;if(a)a(e,r);else if(shouldIgnoreValue(o,r))this.deleteValueForProperty(e,t);else if(o.mustUseAttribute){var u=o.attributeName,i=o.attributeNamespace;i?e.setAttributeNS(i,u,""+r):o.hasBooleanValue||o.hasOverloadedBooleanValue&&!0===r?e.setAttribute(u,""):e.setAttribute(u,""+r)}else{var s=o.propertyName;o.hasSideEffects&&""+e[s]==""+r||(e[s]=r)}}else DOMProperty.isCustomAttribute(t)&&DOMPropertyOperations.setValueForAttribute(e,t,r)},setValueForAttribute:function(e,t,r){isAttributeNameSafe(t)&&(null==r?e.removeAttribute(t):e.setAttribute(t,""+r))},deleteValueForProperty:function(e,t){var r=DOMProperty.properties.hasOwnProperty(t)?DOMProperty.properties[t]:null;if(r){var o=r.mutationMethod;if(o)o(e,void 0);else if(r.mustUseAttribute)e.removeAttribute(r.attributeName);else{var a=r.propertyName,u=DOMProperty.getDefaultValueForProperty(e.nodeName,a);r.hasSideEffects&&""+e[a]===u||(e[a]=u)}}else DOMProperty.isCustomAttribute(t)&&e.removeAttribute(t)}};ReactPerf.measureMethods(DOMPropertyOperations,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),module.exports=DOMPropertyOperations;

},{"./DOMProperty":58,"./ReactPerf":118,"./quoteAttributeValueForBrowser":169,"fbjs/lib/warning":29}],60:[function(require,module,exports){
"use strict";function getNodeName(e){return e.substring(1,e.indexOf(" "))}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),createNodesFromMarkup=require("fbjs/lib/createNodesFromMarkup"),emptyFunction=require("fbjs/lib/emptyFunction"),getMarkupWrap=require("fbjs/lib/getMarkupWrap"),invariant=require("fbjs/lib/invariant"),OPEN_TAG_NAME_EXP=/^(<[^ \/>]+)/,RESULT_INDEX_ATTR="data-danger-index",Danger={dangerouslyRenderMarkup:function(e){ExecutionEnvironment.canUseDOM||invariant(!1);for(var r,n={},t=0;t<e.length;t++)e[t]||invariant(!1),r=getNodeName(e[t]),r=getMarkupWrap(r)?r:"*",n[r]=n[r]||[],n[r][t]=e[t];var a=[],i=0;for(r in n)if(n.hasOwnProperty(r)){var o,u=n[r];for(o in u)if(u.hasOwnProperty(o)){var p=u[o];u[o]=p.replace(OPEN_TAG_NAME_EXP,"$1 "+RESULT_INDEX_ATTR+'="'+o+'" ')}for(var s=createNodesFromMarkup(u.join(""),emptyFunction),E=0;E<s.length;++E){var v=s[E];v.hasAttribute&&v.hasAttribute(RESULT_INDEX_ATTR)&&(o=+v.getAttribute(RESULT_INDEX_ATTR),v.removeAttribute(RESULT_INDEX_ATTR),a.hasOwnProperty(o)&&invariant(!1),a[o]=v,i+=1)}}return i!==a.length&&invariant(!1),a.length!==e.length&&invariant(!1),a},dangerouslyReplaceNodeWithMarkup:function(e,r){ExecutionEnvironment.canUseDOM||invariant(!1),r||invariant(!1),"html"===e.tagName.toLowerCase()&&invariant(!1);var n;n="string"==typeof r?createNodesFromMarkup(r,emptyFunction)[0]:r,e.parentNode.replaceChild(n,e)}};module.exports=Danger;

},{"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/createNodesFromMarkup":11,"fbjs/lib/emptyFunction":12,"fbjs/lib/getMarkupWrap":16,"fbjs/lib/invariant":20}],61:[function(require,module,exports){
"use strict";var keyOf=require("fbjs/lib/keyOf"),DefaultEventPluginOrder=[keyOf({ResponderEventPlugin:null}),keyOf({SimpleEventPlugin:null}),keyOf({TapEventPlugin:null}),keyOf({EnterLeaveEventPlugin:null}),keyOf({ChangeEventPlugin:null}),keyOf({SelectEventPlugin:null}),keyOf({BeforeInputEventPlugin:null})];module.exports=DefaultEventPluginOrder;

},{"fbjs/lib/keyOf":24}],62:[function(require,module,exports){
"use strict";var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),SyntheticMouseEvent=require("./SyntheticMouseEvent"),ReactMount=require("./ReactMount"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,getFirstReactDOM=ReactMount.getFirstReactDOM,eventTypes={mouseEnter:{registrationName:keyOf({onMouseEnter:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]},mouseLeave:{registrationName:keyOf({onMouseLeave:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]}},extractedEvents=[null,null],EnterLeaveEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,o,r){if(e===topLevelTypes.topMouseOver&&(o.relatedTarget||o.fromElement))return null;if(e!==topLevelTypes.topMouseOut&&e!==topLevelTypes.topMouseOver)return null;var s;if(t.window===t)s=t;else{var a=t.ownerDocument;s=a?a.defaultView||a.parentWindow:window}var u,v,p="",l="";if(e===topLevelTypes.topMouseOut?(u=t,p=n,v=getFirstReactDOM(o.relatedTarget||o.toElement),v?l=ReactMount.getID(v):v=s,v=v||s):(u=s,v=t,l=n),u===v)return null;var i=SyntheticMouseEvent.getPooled(eventTypes.mouseLeave,p,o,r);i.type="mouseleave",i.target=u,i.relatedTarget=v;var y=SyntheticMouseEvent.getPooled(eventTypes.mouseEnter,l,o,r);return y.type="mouseenter",y.target=v,y.relatedTarget=u,EventPropagators.accumulateEnterLeaveDispatches(i,y,p,l),extractedEvents[0]=i,extractedEvents[1]=y,extractedEvents}};module.exports=EnterLeaveEventPlugin;

},{"./EventConstants":63,"./EventPropagators":67,"./ReactMount":112,"./SyntheticMouseEvent":143,"fbjs/lib/keyOf":24}],63:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),PropagationPhases=keyMirror({bubbled:null,captured:null}),topLevelTypes=keyMirror({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),EventConstants={topLevelTypes:topLevelTypes,PropagationPhases:PropagationPhases};module.exports=EventConstants;

},{"fbjs/lib/keyMirror":23}],64:[function(require,module,exports){
"use strict";function validateInstanceHandle(){InstanceHandle&&InstanceHandle.traverseTwoPhase&&InstanceHandle.traverseEnterLeave}var EventPluginRegistry=require("./EventPluginRegistry"),EventPluginUtils=require("./EventPluginUtils"),ReactErrorUtils=require("./ReactErrorUtils"),accumulateInto=require("./accumulateInto"),forEachAccumulated=require("./forEachAccumulated"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),listenerBank={},eventQueue=null,executeDispatchesAndRelease=function(e,n){e&&(EventPluginUtils.executeDispatchesInOrder(e,n),e.isPersistent()||e.constructor.release(e))},executeDispatchesAndReleaseSimulated=function(e){return executeDispatchesAndRelease(e,!0)},executeDispatchesAndReleaseTopLevel=function(e){return executeDispatchesAndRelease(e,!1)},InstanceHandle=null,EventPluginHub={injection:{injectMount:EventPluginUtils.injection.injectMount,injectInstanceHandle:function(e){InstanceHandle=e},getInstanceHandle:function(){return InstanceHandle},injectEventPluginOrder:EventPluginRegistry.injectEventPluginOrder,injectEventPluginsByName:EventPluginRegistry.injectEventPluginsByName},eventNameDispatchConfigs:EventPluginRegistry.eventNameDispatchConfigs,registrationNameModules:EventPluginRegistry.registrationNameModules,putListener:function(e,n,t){"function"!=typeof t&&invariant(!1),(listenerBank[n]||(listenerBank[n]={}))[e]=t;var i=EventPluginRegistry.registrationNameModules[n];i&&i.didPutListener&&i.didPutListener(e,n,t)},getListener:function(e,n){var t=listenerBank[n];return t&&t[e]},deleteListener:function(e,n){var t=EventPluginRegistry.registrationNameModules[n];t&&t.willDeleteListener&&t.willDeleteListener(e,n);var i=listenerBank[n];i&&delete i[e]},deleteAllListeners:function(e){for(var n in listenerBank)if(listenerBank[n][e]){var t=EventPluginRegistry.registrationNameModules[n];t&&t.willDeleteListener&&t.willDeleteListener(e,n),delete listenerBank[n][e]}},extractEvents:function(e,n,t,i,r){for(var a,u=EventPluginRegistry.plugins,s=0;s<u.length;s++){var l=u[s];if(l){var c=l.extractEvents(e,n,t,i,r);c&&(a=accumulateInto(a,c))}}return a},enqueueEvents:function(e){e&&(eventQueue=accumulateInto(eventQueue,e))},processEventQueue:function(e){var n=eventQueue;eventQueue=null,e?forEachAccumulated(n,executeDispatchesAndReleaseSimulated):forEachAccumulated(n,executeDispatchesAndReleaseTopLevel),eventQueue&&invariant(!1),ReactErrorUtils.rethrowCaughtError()},__purge:function(){listenerBank={}},__getListenerBank:function(){return listenerBank}};module.exports=EventPluginHub;

},{"./EventPluginRegistry":65,"./EventPluginUtils":66,"./ReactErrorUtils":103,"./accumulateInto":149,"./forEachAccumulated":157,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],65:[function(require,module,exports){
"use strict";function recomputePluginOrdering(){if(EventPluginOrder)for(var e in namesToPlugins){var n=namesToPlugins[e],i=EventPluginOrder.indexOf(e);if(i>-1||invariant(!1),!EventPluginRegistry.plugins[i]){n.extractEvents||invariant(!1),EventPluginRegistry.plugins[i]=n;var r=n.eventTypes;for(var t in r)publishEventForPlugin(r[t],n,t)||invariant(!1)}}}function publishEventForPlugin(e,n,i){EventPluginRegistry.eventNameDispatchConfigs.hasOwnProperty(i)&&invariant(!1),EventPluginRegistry.eventNameDispatchConfigs[i]=e;var r=e.phasedRegistrationNames;if(r){for(var t in r)if(r.hasOwnProperty(t)){var a=r[t];publishRegistrationName(a,n,i)}return!0}return!!e.registrationName&&(publishRegistrationName(e.registrationName,n,i),!0)}function publishRegistrationName(e,n,i){EventPluginRegistry.registrationNameModules[e]&&invariant(!1),EventPluginRegistry.registrationNameModules[e]=n,EventPluginRegistry.registrationNameDependencies[e]=n.eventTypes[i].dependencies}var invariant=require("fbjs/lib/invariant"),EventPluginOrder=null,namesToPlugins={},EventPluginRegistry={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){EventPluginOrder&&invariant(!1),EventPluginOrder=Array.prototype.slice.call(e),recomputePluginOrdering()},injectEventPluginsByName:function(e){var n=!1;for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];namesToPlugins.hasOwnProperty(i)&&namesToPlugins[i]===r||(namesToPlugins[i]&&invariant(!1),namesToPlugins[i]=r,n=!0)}n&&recomputePluginOrdering()},getPluginModuleForEvent:function(e){var n=e.dispatchConfig;if(n.registrationName)return EventPluginRegistry.registrationNameModules[n.registrationName]||null;for(var i in n.phasedRegistrationNames)if(n.phasedRegistrationNames.hasOwnProperty(i)){var r=EventPluginRegistry.registrationNameModules[n.phasedRegistrationNames[i]];if(r)return r}return null},_resetEventPlugins:function(){EventPluginOrder=null;for(var e in namesToPlugins)namesToPlugins.hasOwnProperty(e)&&delete namesToPlugins[e];EventPluginRegistry.plugins.length=0;var n=EventPluginRegistry.eventNameDispatchConfigs;for(var i in n)n.hasOwnProperty(i)&&delete n[i];var r=EventPluginRegistry.registrationNameModules;for(var t in r)r.hasOwnProperty(t)&&delete r[t]}};module.exports=EventPluginRegistry;

},{"fbjs/lib/invariant":20}],66:[function(require,module,exports){
"use strict";function isEndish(e){return e===topLevelTypes.topMouseUp||e===topLevelTypes.topTouchEnd||e===topLevelTypes.topTouchCancel}function isMoveish(e){return e===topLevelTypes.topMouseMove||e===topLevelTypes.topTouchMove}function isStartish(e){return e===topLevelTypes.topMouseDown||e===topLevelTypes.topTouchStart}function executeDispatch(e,t,i,n){var s=e.type||"unknown-event";e.currentTarget=injection.Mount.getNode(n),t?ReactErrorUtils.invokeGuardedCallbackWithCatch(s,i,e,n):ReactErrorUtils.invokeGuardedCallback(s,i,e,n),e.currentTarget=null}function executeDispatchesInOrder(e,t){var i=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(i))for(var s=0;s<i.length&&!e.isPropagationStopped();s++)executeDispatch(e,t,i[s],n[s]);else i&&executeDispatch(e,t,i,n);e._dispatchListeners=null,e._dispatchIDs=null}function executeDispatchesInOrderStopAtTrueImpl(e){var t=e._dispatchListeners,i=e._dispatchIDs;if(Array.isArray(t)){for(var n=0;n<t.length&&!e.isPropagationStopped();n++)if(t[n](e,i[n]))return i[n]}else if(t&&t(e,i))return i;return null}function executeDispatchesInOrderStopAtTrue(e){var t=executeDispatchesInOrderStopAtTrueImpl(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function executeDirectDispatch(e){var t=e._dispatchListeners,i=e._dispatchIDs;Array.isArray(t)&&invariant(!1);var n=t?t(e,i):null;return e._dispatchListeners=null,e._dispatchIDs=null,n}function hasDispatches(e){return!!e._dispatchListeners}var EventConstants=require("./EventConstants"),ReactErrorUtils=require("./ReactErrorUtils"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),injection={Mount:null,injectMount:function(e){injection.Mount=e}},topLevelTypes=EventConstants.topLevelTypes,validateEventDispatches,EventPluginUtils={isEndish:isEndish,isMoveish:isMoveish,isStartish:isStartish,executeDirectDispatch:executeDirectDispatch,executeDispatchesInOrder:executeDispatchesInOrder,executeDispatchesInOrderStopAtTrue:executeDispatchesInOrderStopAtTrue,hasDispatches:hasDispatches,getNode:function(e){return injection.Mount.getNode(e)},getID:function(e){return injection.Mount.getID(e)},injection:injection};module.exports=EventPluginUtils;

},{"./EventConstants":63,"./ReactErrorUtils":103,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],67:[function(require,module,exports){
"use strict";function listenerAtPhase(e,a,t){var c=a.dispatchConfig.phasedRegistrationNames[t];return getListener(e,c)}function accumulateDirectionalDispatches(e,a,t){var c=a?PropagationPhases.bubbled:PropagationPhases.captured,s=listenerAtPhase(e,t,c);s&&(t._dispatchListeners=accumulateInto(t._dispatchListeners,s),t._dispatchIDs=accumulateInto(t._dispatchIDs,e))}function accumulateTwoPhaseDispatchesSingle(e){e&&e.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,accumulateDirectionalDispatches,e)}function accumulateTwoPhaseDispatchesSingleSkipTarget(e){e&&e.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(e.dispatchMarker,accumulateDirectionalDispatches,e)}function accumulateDispatches(e,a,t){if(t&&t.dispatchConfig.registrationName){var c=t.dispatchConfig.registrationName,s=getListener(e,c);s&&(t._dispatchListeners=accumulateInto(t._dispatchListeners,s),t._dispatchIDs=accumulateInto(t._dispatchIDs,e))}}function accumulateDirectDispatchesSingle(e){e&&e.dispatchConfig.registrationName&&accumulateDispatches(e.dispatchMarker,null,e)}function accumulateTwoPhaseDispatches(e){forEachAccumulated(e,accumulateTwoPhaseDispatchesSingle)}function accumulateTwoPhaseDispatchesSkipTarget(e){forEachAccumulated(e,accumulateTwoPhaseDispatchesSingleSkipTarget)}function accumulateEnterLeaveDispatches(e,a,t,c){EventPluginHub.injection.getInstanceHandle().traverseEnterLeave(t,c,accumulateDispatches,e,a)}function accumulateDirectDispatches(e){forEachAccumulated(e,accumulateDirectDispatchesSingle)}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),warning=require("fbjs/lib/warning"),accumulateInto=require("./accumulateInto"),forEachAccumulated=require("./forEachAccumulated"),PropagationPhases=EventConstants.PropagationPhases,getListener=EventPluginHub.getListener,EventPropagators={accumulateTwoPhaseDispatches:accumulateTwoPhaseDispatches,accumulateTwoPhaseDispatchesSkipTarget:accumulateTwoPhaseDispatchesSkipTarget,accumulateDirectDispatches:accumulateDirectDispatches,accumulateEnterLeaveDispatches:accumulateEnterLeaveDispatches};module.exports=EventPropagators;

},{"./EventConstants":63,"./EventPluginHub":64,"./accumulateInto":149,"./forEachAccumulated":157,"fbjs/lib/warning":29}],68:[function(require,module,exports){
"use strict";function FallbackCompositionState(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),getTextContentAccessor=require("./getTextContentAccessor");assign(FallbackCompositionState.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[getTextContentAccessor()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,o=this._startText,s=o.length,a=this.getText(),l=a.length;for(t=0;t<s&&o[t]===a[t];t++);var i=s-t;for(e=1;e<=i&&o[s-e]===a[l-e];e++);var r=e>1?1-e:void 0;return this._fallbackText=a.slice(t,r),this._fallbackText}}),PooledClass.addPoolingTo(FallbackCompositionState),module.exports=FallbackCompositionState;

},{"./Object.assign":71,"./PooledClass":72,"./getTextContentAccessor":164}],69:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,MUST_USE_PROPERTY=DOMProperty.injection.MUST_USE_PROPERTY,HAS_BOOLEAN_VALUE=DOMProperty.injection.HAS_BOOLEAN_VALUE,HAS_SIDE_EFFECTS=DOMProperty.injection.HAS_SIDE_EFFECTS,HAS_NUMERIC_VALUE=DOMProperty.injection.HAS_NUMERIC_VALUE,HAS_POSITIVE_NUMERIC_VALUE=DOMProperty.injection.HAS_POSITIVE_NUMERIC_VALUE,HAS_OVERLOADED_BOOLEAN_VALUE=DOMProperty.injection.HAS_OVERLOADED_BOOLEAN_VALUE,hasSVG;if(ExecutionEnvironment.canUseDOM){var implementation=document.implementation;hasSVG=implementation&&implementation.hasFeature&&implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var HTMLDOMPropertyConfig={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,allowTransparency:MUST_USE_ATTRIBUTE,alt:null,async:HAS_BOOLEAN_VALUE,autoComplete:null,autoPlay:HAS_BOOLEAN_VALUE,capture:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,cellPadding:null,cellSpacing:null,charSet:MUST_USE_ATTRIBUTE,challenge:MUST_USE_ATTRIBUTE,checked:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,classID:MUST_USE_ATTRIBUTE,className:hasSVG?MUST_USE_ATTRIBUTE:MUST_USE_PROPERTY,cols:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,colSpan:null,content:null,contentEditable:null,contextMenu:MUST_USE_ATTRIBUTE,controls:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,coords:null,crossOrigin:null,data:null,dateTime:MUST_USE_ATTRIBUTE,default:HAS_BOOLEAN_VALUE,defer:HAS_BOOLEAN_VALUE,dir:null,disabled:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,download:HAS_OVERLOADED_BOOLEAN_VALUE,draggable:null,encType:null,form:MUST_USE_ATTRIBUTE,formAction:MUST_USE_ATTRIBUTE,formEncType:MUST_USE_ATTRIBUTE,formMethod:MUST_USE_ATTRIBUTE,formNoValidate:HAS_BOOLEAN_VALUE,formTarget:MUST_USE_ATTRIBUTE,frameBorder:MUST_USE_ATTRIBUTE,headers:null,height:MUST_USE_ATTRIBUTE,hidden:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:MUST_USE_PROPERTY,inputMode:MUST_USE_ATTRIBUTE,integrity:null,is:MUST_USE_ATTRIBUTE,keyParams:MUST_USE_ATTRIBUTE,keyType:MUST_USE_ATTRIBUTE,kind:null,label:null,lang:null,list:MUST_USE_ATTRIBUTE,loop:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,low:null,manifest:MUST_USE_ATTRIBUTE,marginHeight:null,marginWidth:null,max:null,maxLength:MUST_USE_ATTRIBUTE,media:MUST_USE_ATTRIBUTE,mediaGroup:null,method:null,min:null,minLength:MUST_USE_ATTRIBUTE,multiple:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,muted:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,name:null,nonce:MUST_USE_ATTRIBUTE,noValidate:HAS_BOOLEAN_VALUE,open:HAS_BOOLEAN_VALUE,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,rel:null,required:HAS_BOOLEAN_VALUE,reversed:HAS_BOOLEAN_VALUE,role:MUST_USE_ATTRIBUTE,rows:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,rowSpan:null,sandbox:null,scope:null,scoped:HAS_BOOLEAN_VALUE,scrolling:null,seamless:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,selected:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,shape:null,size:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,sizes:MUST_USE_ATTRIBUTE,span:HAS_POSITIVE_NUMERIC_VALUE,spellCheck:null,src:null,srcDoc:MUST_USE_PROPERTY,srcLang:null,srcSet:MUST_USE_ATTRIBUTE,start:HAS_NUMERIC_VALUE,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:MUST_USE_PROPERTY|HAS_SIDE_EFFECTS,width:MUST_USE_ATTRIBUTE,wmode:MUST_USE_ATTRIBUTE,wrap:null,about:MUST_USE_ATTRIBUTE,datatype:MUST_USE_ATTRIBUTE,inlist:MUST_USE_ATTRIBUTE,prefix:MUST_USE_ATTRIBUTE,property:MUST_USE_ATTRIBUTE,resource:MUST_USE_ATTRIBUTE,typeof:MUST_USE_ATTRIBUTE,vocab:MUST_USE_ATTRIBUTE,autoCapitalize:MUST_USE_ATTRIBUTE,autoCorrect:MUST_USE_ATTRIBUTE,autoSave:null,color:null,itemProp:MUST_USE_ATTRIBUTE,itemScope:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,itemType:MUST_USE_ATTRIBUTE,itemID:MUST_USE_ATTRIBUTE,itemRef:MUST_USE_ATTRIBUTE,results:null,security:MUST_USE_ATTRIBUTE,unselectable:MUST_USE_ATTRIBUTE},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoComplete:"autocomplete",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};module.exports=HTMLDOMPropertyConfig;

},{"./DOMProperty":58,"fbjs/lib/ExecutionEnvironment":6}],70:[function(require,module,exports){
"use strict";function _assertSingleLink(e){null!=e.checkedLink&&null!=e.valueLink&&invariant(!1)}function _assertValueLink(e){_assertSingleLink(e),(null!=e.value||null!=e.onChange)&&invariant(!1)}function _assertCheckedLink(e){_assertSingleLink(e),(null!=e.checked||null!=e.onChange)&&invariant(!1)}function getDeclarationErrorAddendum(e){if(e){var n=e.getName();if(n)return" Check the render method of `"+n+"`."}return""}var ReactPropTypes=require("./ReactPropTypes"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),hasReadOnlyValue={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},propTypes={value:function(e,n,a){return!e[n]||hasReadOnlyValue[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,n,a){return!e[n]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:ReactPropTypes.func},loggedTypeFailures={},LinkedValueUtils={checkPropTypes:function(e,n,a){for(var r in propTypes){if(propTypes.hasOwnProperty(r))var i=propTypes[r](n,r,e,ReactPropTypeLocations.prop,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(i instanceof Error&&!(i.message in loggedTypeFailures)){loggedTypeFailures[i.message]=!0;getDeclarationErrorAddendum(a)}}},getValue:function(e){return e.valueLink?(_assertValueLink(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(_assertCheckedLink(e),e.checkedLink.value):e.checked},executeOnChange:function(e,n){return e.valueLink?(_assertValueLink(e),e.valueLink.requestChange(n.target.value)):e.checkedLink?(_assertCheckedLink(e),e.checkedLink.requestChange(n.target.checked)):e.onChange?e.onChange.call(void 0,n):void 0}};module.exports=LinkedValueUtils;

},{"./ReactPropTypeLocations":120,"./ReactPropTypes":121,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],71:[function(require,module,exports){
"use strict";function assign(r,e){if(null==r)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(r),t=Object.prototype.hasOwnProperty,o=1;o<arguments.length;o++){var a=arguments[o];if(null!=a){var l=Object(a);for(var s in l)t.call(l,s)&&(n[s]=l[s])}}return n}module.exports=assign;

},{}],72:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),oneArgumentPooler=function(o){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,o),n}return new e(o)},twoArgumentPooler=function(o,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,o,e),r}return new n(o,e)},threeArgumentPooler=function(o,e,n){var r=this;if(r.instancePool.length){var t=r.instancePool.pop();return r.call(t,o,e,n),t}return new r(o,e,n)},fourArgumentPooler=function(o,e,n,r){var t=this;if(t.instancePool.length){var l=t.instancePool.pop();return t.call(l,o,e,n,r),l}return new t(o,e,n,r)},fiveArgumentPooler=function(o,e,n,r,t){var l=this;if(l.instancePool.length){var a=l.instancePool.pop();return l.call(a,o,e,n,r,t),a}return new l(o,e,n,r,t)},standardReleaser=function(o){var e=this;o instanceof e||invariant(!1),o.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(o)},DEFAULT_POOL_SIZE=10,DEFAULT_POOLER=oneArgumentPooler,addPoolingTo=function(o,e){var n=o;return n.instancePool=[],n.getPooled=e||DEFAULT_POOLER,n.poolSize||(n.poolSize=DEFAULT_POOL_SIZE),n.release=standardReleaser,n},PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fourArgumentPooler:fourArgumentPooler,fiveArgumentPooler:fiveArgumentPooler};module.exports=PooledClass;

},{"fbjs/lib/invariant":20}],73:[function(require,module,exports){
"use strict";var ReactDOM=require("./ReactDOM"),ReactDOMServer=require("./ReactDOMServer"),ReactIsomorphic=require("./ReactIsomorphic"),assign=require("./Object.assign"),deprecated=require("./deprecated"),React={};assign(React,ReactIsomorphic),assign(React,{findDOMNode:deprecated("findDOMNode","ReactDOM","react-dom",ReactDOM,ReactDOM.findDOMNode),render:deprecated("render","ReactDOM","react-dom",ReactDOM,ReactDOM.render),unmountComponentAtNode:deprecated("unmountComponentAtNode","ReactDOM","react-dom",ReactDOM,ReactDOM.unmountComponentAtNode),renderToString:deprecated("renderToString","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToString),renderToStaticMarkup:deprecated("renderToStaticMarkup","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToStaticMarkup)}),React.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOM,React.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOMServer,module.exports=React;

},{"./Object.assign":71,"./ReactDOM":84,"./ReactDOMServer":94,"./ReactIsomorphic":110,"./deprecated":153}],74:[function(require,module,exports){
"use strict";var ReactInstanceMap=require("./ReactInstanceMap"),findDOMNode=require("./findDOMNode"),warning=require("fbjs/lib/warning"),didWarnKey="_getDOMNodeDidWarn",ReactBrowserComponentMixin={getDOMNode:function(){return this.constructor[didWarnKey]=!0,findDOMNode(this)}};module.exports=ReactBrowserComponentMixin;

},{"./ReactInstanceMap":109,"./findDOMNode":155,"fbjs/lib/warning":29}],75:[function(require,module,exports){
"use strict";function getListeningForDocument(e){return Object.prototype.hasOwnProperty.call(e,topListenersIDKey)||(e[topListenersIDKey]=reactTopListenersCounter++,alreadyListeningTo[e[topListenersIDKey]]={}),alreadyListeningTo[e[topListenersIDKey]]}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),EventPluginRegistry=require("./EventPluginRegistry"),ReactEventEmitterMixin=require("./ReactEventEmitterMixin"),ReactPerf=require("./ReactPerf"),ViewportMetrics=require("./ViewportMetrics"),assign=require("./Object.assign"),isEventSupported=require("./isEventSupported"),alreadyListeningTo={},isMonitoringScrollValue=!1,reactTopListenersCounter=0,topEventMapping={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},topListenersIDKey="_reactListenersID"+String(Math.random()).slice(2),ReactBrowserEventEmitter=assign({},ReactEventEmitterMixin,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(ReactBrowserEventEmitter.handleTopLevel),ReactBrowserEventEmitter.ReactEventListener=e}},setEnabled:function(e){ReactBrowserEventEmitter.ReactEventListener&&ReactBrowserEventEmitter.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!ReactBrowserEventEmitter.ReactEventListener||!ReactBrowserEventEmitter.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var r=t,n=getListeningForDocument(r),o=EventPluginRegistry.registrationNameDependencies[e],i=EventConstants.topLevelTypes,a=0;a<o.length;a++){var s=o[a];n.hasOwnProperty(s)&&n[s]||(s===i.topWheel?isEventSupported("wheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"wheel",r):isEventSupported("mousewheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"mousewheel",r):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"DOMMouseScroll",r):s===i.topScroll?isEventSupported("scroll",!0)?ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topScroll,"scroll",r):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topScroll,"scroll",ReactBrowserEventEmitter.ReactEventListener.WINDOW_HANDLE):s===i.topFocus||s===i.topBlur?(isEventSupported("focus",!0)?(ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topFocus,"focus",r),ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topBlur,"blur",r)):isEventSupported("focusin")&&(ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topFocus,"focusin",r),ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topBlur,"focusout",r)),n[i.topBlur]=!0,n[i.topFocus]=!0):topEventMapping.hasOwnProperty(s)&&ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(s,topEventMapping[s],r),n[s]=!0)}},trapBubbledEvent:function(e,t,r){return ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(e,t,r)},trapCapturedEvent:function(e,t,r){return ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(e,t,r)},ensureScrollValueMonitoring:function(){if(!isMonitoringScrollValue){var e=ViewportMetrics.refreshScrollValues;ReactBrowserEventEmitter.ReactEventListener.monitorScrollValue(e),isMonitoringScrollValue=!0}},eventNameDispatchConfigs:EventPluginHub.eventNameDispatchConfigs,registrationNameModules:EventPluginHub.registrationNameModules,putListener:EventPluginHub.putListener,getListener:EventPluginHub.getListener,deleteListener:EventPluginHub.deleteListener,deleteAllListeners:EventPluginHub.deleteAllListeners});ReactPerf.measureMethods(ReactBrowserEventEmitter,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),module.exports=ReactBrowserEventEmitter;

},{"./EventConstants":63,"./EventPluginHub":64,"./EventPluginRegistry":65,"./Object.assign":71,"./ReactEventEmitterMixin":104,"./ReactPerf":118,"./ViewportMetrics":148,"./isEventSupported":166}],76:[function(require,module,exports){
"use strict";function instantiateChild(e,n,t){var r=void 0===e[t];null!=n&&r&&(e[t]=instantiateReactComponent(n,null))}var ReactReconciler=require("./ReactReconciler"),instantiateReactComponent=require("./instantiateReactComponent"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),traverseAllChildren=require("./traverseAllChildren"),warning=require("fbjs/lib/warning"),ReactChildReconciler={instantiateChildren:function(e,n,t){if(null==e)return null;var r={};return traverseAllChildren(e,instantiateChild,r),r},updateChildren:function(e,n,t,r){if(!n&&!e)return null;var i;for(i in n)if(n.hasOwnProperty(i)){var o=e&&e[i],a=o&&o._currentElement,l=n[i];if(null!=o&&shouldUpdateReactComponent(a,l))ReactReconciler.receiveComponent(o,l,t,r),n[i]=o;else{o&&ReactReconciler.unmountComponent(o,i);var c=instantiateReactComponent(l,null);n[i]=c}}for(i in e)!e.hasOwnProperty(i)||n&&n.hasOwnProperty(i)||ReactReconciler.unmountComponent(e[i]);return n},unmountChildren:function(e){for(var n in e)if(e.hasOwnProperty(n)){var t=e[n];ReactReconciler.unmountComponent(t)}}};module.exports=ReactChildReconciler;

},{"./ReactReconciler":123,"./instantiateReactComponent":165,"./shouldUpdateReactComponent":173,"./traverseAllChildren":174,"fbjs/lib/warning":29}],77:[function(require,module,exports){
"use strict";function escapeUserProvidedKey(e){return(""+e).replace(userProvidedKeyEscapeRegex,"//")}function ForEachBookKeeping(e,n){this.func=e,this.context=n,this.count=0}function forEachSingleChild(e,n,t){var r=e.func,o=e.context;r.call(o,n,e.count++)}function forEachChildren(e,n,t){if(null==e)return e;var r=ForEachBookKeeping.getPooled(n,t);traverseAllChildren(e,forEachSingleChild,r),ForEachBookKeeping.release(r)}function MapBookKeeping(e,n,t,r){this.result=e,this.keyPrefix=n,this.func=t,this.context=r,this.count=0}function mapSingleChildIntoContext(e,n,t){var r=e.result,o=e.keyPrefix,l=e.func,i=e.context,u=l.call(i,n,e.count++);Array.isArray(u)?mapIntoWithKeyPrefixInternal(u,r,t,emptyFunction.thatReturnsArgument):null!=u&&(ReactElement.isValidElement(u)&&(u=ReactElement.cloneAndReplaceKey(u,o+(u!==n?escapeUserProvidedKey(u.key||"")+"/":"")+t)),r.push(u))}function mapIntoWithKeyPrefixInternal(e,n,t,r,o){var l="";null!=t&&(l=escapeUserProvidedKey(t)+"/");var i=MapBookKeeping.getPooled(n,l,r,o);traverseAllChildren(e,mapSingleChildIntoContext,i),MapBookKeeping.release(i)}function mapChildren(e,n,t){if(null==e)return e;var r=[];return mapIntoWithKeyPrefixInternal(e,r,null,n,t),r}function forEachSingleChildDummy(e,n,t){return null}function countChildren(e,n){return traverseAllChildren(e,forEachSingleChildDummy,null)}function toArray(e){var n=[];return mapIntoWithKeyPrefixInternal(e,n,null,emptyFunction.thatReturnsArgument),n}var PooledClass=require("./PooledClass"),ReactElement=require("./ReactElement"),emptyFunction=require("fbjs/lib/emptyFunction"),traverseAllChildren=require("./traverseAllChildren"),twoArgumentPooler=PooledClass.twoArgumentPooler,fourArgumentPooler=PooledClass.fourArgumentPooler,userProvidedKeyEscapeRegex=/\/(?!\/)/g;ForEachBookKeeping.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler),MapBookKeeping.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(MapBookKeeping,fourArgumentPooler);var ReactChildren={forEach:forEachChildren,map:mapChildren,mapIntoWithKeyPrefixInternal:mapIntoWithKeyPrefixInternal,count:countChildren,toArray:toArray};module.exports=ReactChildren;

},{"./PooledClass":72,"./ReactElement":99,"./traverseAllChildren":174,"fbjs/lib/emptyFunction":12}],78:[function(require,module,exports){
"use strict";function warnSetProps(){warnedSetProps||(warnedSetProps=!0)}function validateTypeDef(e,t,n){for(var i in t)t.hasOwnProperty(i)}function validateMethodOverride(e,t){var n=ReactClassInterface.hasOwnProperty(t)?ReactClassInterface[t]:null;ReactClassMixin.hasOwnProperty(t)&&n!==SpecPolicy.OVERRIDE_BASE&&invariant(!1),e.hasOwnProperty(t)&&n!==SpecPolicy.DEFINE_MANY&&n!==SpecPolicy.DEFINE_MANY_MERGED&&invariant(!1)}function mixSpecIntoComponent(e,t){if(t){"function"==typeof t&&invariant(!1),ReactElement.isValidElement(t)&&invariant(!1);var n=e.prototype;t.hasOwnProperty(MIXINS_KEY)&&RESERVED_SPEC_KEYS.mixins(e,t.mixins);for(var i in t)if(t.hasOwnProperty(i)&&i!==MIXINS_KEY){var o=t[i];if(validateMethodOverride(n,i),RESERVED_SPEC_KEYS.hasOwnProperty(i))RESERVED_SPEC_KEYS[i](e,o);else{var a=ReactClassInterface.hasOwnProperty(i),r=n.hasOwnProperty(i),c="function"==typeof o,p=c&&!a&&!r&&!1!==t.autobind;if(p)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[i]=o,n[i]=o;else if(r){var s=ReactClassInterface[i];(!a||s!==SpecPolicy.DEFINE_MANY_MERGED&&s!==SpecPolicy.DEFINE_MANY)&&invariant(!1),s===SpecPolicy.DEFINE_MANY_MERGED?n[i]=createMergedResultFunction(n[i],o):s===SpecPolicy.DEFINE_MANY&&(n[i]=createChainedFunction(n[i],o))}else n[i]=o}}}}function mixStaticSpecIntoComponent(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var o=n in RESERVED_SPEC_KEYS;o&&invariant(!1);var a=n in e;a&&invariant(!1),e[n]=i}}}function mergeIntoWithNoDuplicateKeys(e,t){e&&t&&"object"==typeof e&&"object"==typeof t||invariant(!1);for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]&&invariant(!1),e[n]=t[n]);return e}function createMergedResultFunction(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);if(null==n)return i;if(null==i)return n;var o={};return mergeIntoWithNoDuplicateKeys(o,n),mergeIntoWithNoDuplicateKeys(o,i),o}}function createChainedFunction(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function bindAutoBindMethod(e,t){var n=t.bind(e);return n}function bindAutoBindMethods(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=bindAutoBindMethod(e,n)}}var ReactComponent=require("./ReactComponent"),ReactElement=require("./ReactElement"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),keyMirror=require("fbjs/lib/keyMirror"),keyOf=require("fbjs/lib/keyOf"),warning=require("fbjs/lib/warning"),MIXINS_KEY=keyOf({mixins:null}),SpecPolicy=keyMirror({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),injectedMixins=[],warnedSetProps=!1,ReactClassInterface={mixins:SpecPolicy.DEFINE_MANY,statics:SpecPolicy.DEFINE_MANY,propTypes:SpecPolicy.DEFINE_MANY,contextTypes:SpecPolicy.DEFINE_MANY,childContextTypes:SpecPolicy.DEFINE_MANY,getDefaultProps:SpecPolicy.DEFINE_MANY_MERGED,getInitialState:SpecPolicy.DEFINE_MANY_MERGED,getChildContext:SpecPolicy.DEFINE_MANY_MERGED,render:SpecPolicy.DEFINE_ONCE,componentWillMount:SpecPolicy.DEFINE_MANY,componentDidMount:SpecPolicy.DEFINE_MANY,componentWillReceiveProps:SpecPolicy.DEFINE_MANY,shouldComponentUpdate:SpecPolicy.DEFINE_ONCE,componentWillUpdate:SpecPolicy.DEFINE_MANY,componentDidUpdate:SpecPolicy.DEFINE_MANY,componentWillUnmount:SpecPolicy.DEFINE_MANY,updateComponent:SpecPolicy.OVERRIDE_BASE},RESERVED_SPEC_KEYS={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)mixSpecIntoComponent(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=assign({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=assign({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=createMergedResultFunction(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=assign({},e.propTypes,t)},statics:function(e,t){mixStaticSpecIntoComponent(e,t)},autobind:function(){}},ReactClassMixin={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(e,t){this.updater.enqueueSetProps(this,e),t&&this.updater.enqueueCallback(this,t)},replaceProps:function(e,t){this.updater.enqueueReplaceProps(this,e),t&&this.updater.enqueueCallback(this,t)}},ReactClassComponent=function(){};assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin);var ReactClass={createClass:function(e){var t=function(e,t,n){this.__reactAutoBindMap&&bindAutoBindMethods(this),this.props=e,this.context=t,this.refs=emptyObject,this.updater=n||ReactNoopUpdateQueue,this.state=null;var i=this.getInitialState?this.getInitialState():null;("object"!=typeof i||Array.isArray(i))&&invariant(!1),this.state=i};t.prototype=new ReactClassComponent,t.prototype.constructor=t,injectedMixins.forEach(mixSpecIntoComponent.bind(null,t)),mixSpecIntoComponent(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render||invariant(!1);for(var n in ReactClassInterface)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){injectedMixins.push(e)}}};module.exports=ReactClass;

},{"./Object.assign":71,"./ReactComponent":79,"./ReactElement":99,"./ReactNoopUpdateQueue":116,"./ReactPropTypeLocationNames":119,"./ReactPropTypeLocations":120,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20,"fbjs/lib/keyMirror":23,"fbjs/lib/keyOf":24,"fbjs/lib/warning":29}],79:[function(require,module,exports){
"use strict";function ReactComponent(e,t,n){this.props=e,this.context=t,this.refs=emptyObject,this.updater=n||ReactNoopUpdateQueue}var ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue"),canDefineProperty=require("./canDefineProperty"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning");ReactComponent.prototype.isReactComponent={},ReactComponent.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&invariant(!1),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t)},ReactComponent.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e)};var deprecatedAPIs,defineDeprecationWarning,fnName;module.exports=ReactComponent;

},{"./ReactNoopUpdateQueue":116,"./canDefineProperty":151,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],80:[function(require,module,exports){
"use strict";var ReactDOMIDOperations=require("./ReactDOMIDOperations"),ReactMount=require("./ReactMount"),ReactComponentBrowserEnvironment={processChildrenUpdates:ReactDOMIDOperations.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:ReactDOMIDOperations.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){ReactMount.purgeID(e)}};module.exports=ReactComponentBrowserEnvironment;

},{"./ReactDOMIDOperations":89,"./ReactMount":112}],81:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),injected=!1,ReactComponentEnvironment={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(n){injected&&invariant(!1),ReactComponentEnvironment.unmountIDFromEnvironment=n.unmountIDFromEnvironment,ReactComponentEnvironment.replaceNodeWithMarkupByID=n.replaceNodeWithMarkupByID,ReactComponentEnvironment.processChildrenUpdates=n.processChildrenUpdates,injected=!0}}};module.exports=ReactComponentEnvironment;

},{"fbjs/lib/invariant":20}],82:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}function StatelessComponent(e){}var ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceMap=require("./ReactInstanceMap"),ReactPerf=require("./ReactPerf"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactReconciler=require("./ReactReconciler"),ReactUpdateQueue=require("./ReactUpdateQueue"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),warning=require("fbjs/lib/warning");StatelessComponent.prototype.render=function(){return(0,ReactInstanceMap.get(this)._currentElement.type)(this.props,this.context,this.updater)};var nextMountID=1,ReactCompositeComponentMixin={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=nextMountID++,this._rootNodeID=e;var o,i,r=this._processProps(this._currentElement.props),a=this._processContext(n),s=this._currentElement.type,c="prototype"in s;c&&(o=new s(r,a,ReactUpdateQueue)),c&&null!==o&&!1!==o&&!ReactElement.isValidElement(o)||(i=o,o=new StatelessComponent(s)),o.props=r,o.context=a,o.refs=emptyObject,o.updater=ReactUpdateQueue,this._instance=o,ReactInstanceMap.set(o,this);var p=o.state;void 0===p&&(o.state=p=null),("object"!=typeof p||Array.isArray(p))&&invariant(!1),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===i&&(i=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(i);var u=ReactReconciler.mountComponent(this._renderedComponent,e,t,this._processChildContext(n));return o.componentDidMount&&t.getReactMountReady().enqueue(o.componentDidMount,o),u},unmountComponent:function(){var e=this._instance;e.componentWillUnmount&&e.componentWillUnmount(),ReactReconciler.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,ReactInstanceMap.remove(e)},_maskContext:function(e){var t=null,n=this._currentElement.type,o=n.contextTypes;if(!o)return emptyObject;t={};for(var i in o)t[i]=e[i];return t},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t=this._currentElement.type,n=this._instance,o=n.getChildContext&&n.getChildContext();if(o){"object"!=typeof t.childContextTypes&&invariant(!1);for(var i in o)i in t.childContextTypes||invariant(!1);return assign({},e,o)}return e},_processProps:function(e){return e},_checkPropTypes:function(e,t,n){var o=this.getName();for(var i in e)if(e.hasOwnProperty(i)){var r;try{"function"!=typeof e[i]&&invariant(!1),r=e[i](t,i,o,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){r=e}if(r instanceof Error){getDeclarationErrorAddendum(this);ReactPropTypeLocations.prop}}},receiveComponent:function(e,t,n){var o=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,o,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&ReactReconciler.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(e,t,n,o,i){var r,a=this._instance,s=this._context===i?a.context:this._processContext(i);t===n?r=n.props:(r=this._processProps(n.props),a.componentWillReceiveProps&&a.componentWillReceiveProps(r,s));var c=this._processPendingState(r,s),p=this._pendingForceUpdate||!a.shouldComponentUpdate||a.shouldComponentUpdate(r,c,s);p?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,r,c,s,e,i)):(this._currentElement=n,this._context=i,a.props=r,a.state=c,a.context=s)},_processPendingState:function(e,t){var n=this._instance,o=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!o)return n.state;if(i&&1===o.length)return o[0];for(var r=assign({},i?o[0]:n.state),a=i?1:0;a<o.length;a++){var s=o[a];assign(r,"function"==typeof s?s.call(n,r,e,t):s)}return r},_performComponentUpdate:function(e,t,n,o,i,r){var a,s,c,p=this._instance,u=Boolean(p.componentDidUpdate);u&&(a=p.props,s=p.state,c=p.context),p.componentWillUpdate&&p.componentWillUpdate(t,n,o),this._currentElement=e,this._context=r,p.props=t,p.state=n,p.context=o,this._updateRenderedComponent(i,r),u&&i.getReactMountReady().enqueue(p.componentDidUpdate.bind(p,a,s,c),p)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,o=n._currentElement,i=this._renderValidatedComponent();if(shouldUpdateReactComponent(o,i))ReactReconciler.receiveComponent(n,i,e,this._processChildContext(t));else{var r=this._rootNodeID,a=n._rootNodeID;ReactReconciler.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(i);var s=ReactReconciler.mountComponent(this._renderedComponent,r,e,this._processChildContext(t));this._replaceNodeWithMarkupByID(a,s)}},_replaceNodeWithMarkupByID:function(e,t){ReactComponentEnvironment.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(){var e;ReactCurrentOwner.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{ReactCurrentOwner.current=null}return null===e||!1===e||ReactElement.isValidElement(e)||invariant(!1),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n&&invariant(!1);var o=t.getPublicInstance();(n.refs===emptyObject?n.refs={}:n.refs)[e]=o},detachRef:function(e){delete this.getPublicInstance().refs[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return e instanceof StatelessComponent?null:e},_instantiateReactComponent:null};ReactPerf.measureMethods(ReactCompositeComponentMixin,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var ReactCompositeComponent={Mixin:ReactCompositeComponentMixin};module.exports=ReactCompositeComponent;

},{"./Object.assign":71,"./ReactComponentEnvironment":81,"./ReactCurrentOwner":83,"./ReactElement":99,"./ReactInstanceMap":109,"./ReactPerf":118,"./ReactPropTypeLocationNames":119,"./ReactPropTypeLocations":120,"./ReactReconciler":123,"./ReactUpdateQueue":129,"./shouldUpdateReactComponent":173,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],83:[function(require,module,exports){
"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner;

},{}],84:[function(require,module,exports){
"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactDOMTextComponent=require("./ReactDOMTextComponent"),ReactDefaultInjection=require("./ReactDefaultInjection"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),ReactUpdates=require("./ReactUpdates"),ReactVersion=require("./ReactVersion"),findDOMNode=require("./findDOMNode"),renderSubtreeIntoContainer=require("./renderSubtreeIntoContainer"),warning=require("fbjs/lib/warning");ReactDefaultInjection.inject();var render=ReactPerf.measure("React","render",ReactMount.render),React={findDOMNode:findDOMNode,render:render,unmountComponentAtNode:ReactMount.unmountComponentAtNode,version:ReactVersion,unstable_batchedUpdates:ReactUpdates.batchedUpdates,unstable_renderSubtreeIntoContainer:renderSubtreeIntoContainer};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:ReactCurrentOwner,InstanceHandles:ReactInstanceHandles,Mount:ReactMount,Reconciler:ReactReconciler,TextComponent:ReactDOMTextComponent});var ExecutionEnvironment,ieCompatibilityMode,expectedFeatures,i;module.exports=React;

},{"./ReactCurrentOwner":83,"./ReactDOMTextComponent":95,"./ReactDefaultInjection":98,"./ReactInstanceHandles":108,"./ReactMount":112,"./ReactPerf":118,"./ReactReconciler":123,"./ReactUpdates":130,"./ReactVersion":131,"./findDOMNode":155,"./renderSubtreeIntoContainer":170,"fbjs/lib/warning":29}],85:[function(require,module,exports){
"use strict";var mouseListenerNames={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},ReactDOMButton={getNativeProps:function(e,o,n){if(!o.disabled)return o;var t={};for(var u in o)o.hasOwnProperty(u)&&!mouseListenerNames[u]&&(t[u]=o[u]);return t}};module.exports=ReactDOMButton;

},{}],86:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){if(e){var t=e._currentElement._owner||null;if(t){var r=t.getName();if(r)return" This DOM node was rendered by `"+r+"`."}}return""}function legacyGetDOMNode(){return this}function legacyIsMounted(){var e=this._reactInternalComponent;return!!e}function legacySetStateEtc(){}function legacySetProps(e,t){var r=this._reactInternalComponent;r&&(ReactUpdateQueue.enqueueSetPropsInternal(r,e),t&&ReactUpdateQueue.enqueueCallbackInternal(r,t))}function legacyReplaceProps(e,t){var r=this._reactInternalComponent;r&&(ReactUpdateQueue.enqueueReplacePropsInternal(r,e),t&&ReactUpdateQueue.enqueueCallbackInternal(r,t))}function friendlyStringify(e){if("object"==typeof e){if(Array.isArray(e))return"["+e.map(friendlyStringify).join(", ")+"]";var t=[];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=/^[a-z$_][\w$_]*$/i.test(r)?r:JSON.stringify(r);t.push(n+": "+friendlyStringify(e[r]))}return"{"+t.join(", ")+"}"}return"string"==typeof e?JSON.stringify(e):"function"==typeof e?"[function object]":String(e)}function checkAndWarnForMutatedStyle(e,t,r){if(null!=e&&null!=t&&!shallowEqual(e,t)){var n,a=r._tag,o=r._currentElement._owner;o&&(n=o.getName());var i=n+"|"+a;styleMutationWarning.hasOwnProperty(i)||(styleMutationWarning[i]=!0)}}function assertValidProps(e,t){t&&(null!=t.dangerouslySetInnerHTML&&(null!=t.children&&invariant(!1),"object"==typeof t.dangerouslySetInnerHTML&&HTML in t.dangerouslySetInnerHTML||invariant(!1)),null!=t.style&&"object"!=typeof t.style&&invariant(!1))}function enqueuePutListener(e,t,r,n){var a=ReactMount.findReactContainerForID(e);if(a){var o=a.nodeType===ELEMENT_NODE_TYPE?a.ownerDocument:a;listenTo(t,o)}n.getReactMountReady().enqueue(putListener,{id:e,registrationName:t,listener:r})}function putListener(){var e=this;ReactBrowserEventEmitter.putListener(e.id,e.registrationName,e.listener)}function trapBubbledEventsLocal(){var e=this;e._rootNodeID||invariant(!1);var t=ReactMount.getNode(e._rootNodeID);switch(t||invariant(!1),e._tag){case"iframe":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var r in mediaEvents)mediaEvents.hasOwnProperty(r)&&e._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes[r],mediaEvents[r],t));break;case"img":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topError,"error",t),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topReset,"reset",t),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topSubmit,"submit",t)]}}function mountReadyInputWrapper(){ReactDOMInput.mountReadyWrapper(this)}function postUpdateSelectWrapper(){ReactDOMSelect.postUpdateWrapper(this)}function validateDangerousTag(e){hasOwnProperty.call(validatedTagCache,e)||(VALID_TAG_REGEX.test(e)||invariant(!1),validatedTagCache[e]=!0)}function processChildContextDev(e,t){e=assign({},e);var r=e[validateDOMNesting.ancestorInfoContextKey];return e[validateDOMNesting.ancestorInfoContextKey]=validateDOMNesting.updatedAncestorInfo(r,t._tag,t),e}function isCustomComponent(e,t){return e.indexOf("-")>=0||null!=t.is}function ReactDOMComponent(e){validateDangerousTag(e),this._tag=e.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null}var AutoFocusUtils=require("./AutoFocusUtils"),CSSPropertyOperations=require("./CSSPropertyOperations"),DOMProperty=require("./DOMProperty"),DOMPropertyOperations=require("./DOMPropertyOperations"),EventConstants=require("./EventConstants"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactDOMButton=require("./ReactDOMButton"),ReactDOMInput=require("./ReactDOMInput"),ReactDOMOption=require("./ReactDOMOption"),ReactDOMSelect=require("./ReactDOMSelect"),ReactDOMTextarea=require("./ReactDOMTextarea"),ReactMount=require("./ReactMount"),ReactMultiChild=require("./ReactMultiChild"),ReactPerf=require("./ReactPerf"),ReactUpdateQueue=require("./ReactUpdateQueue"),assign=require("./Object.assign"),canDefineProperty=require("./canDefineProperty"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),invariant=require("fbjs/lib/invariant"),isEventSupported=require("./isEventSupported"),keyOf=require("fbjs/lib/keyOf"),setInnerHTML=require("./setInnerHTML"),setTextContent=require("./setTextContent"),shallowEqual=require("fbjs/lib/shallowEqual"),validateDOMNesting=require("./validateDOMNesting"),warning=require("fbjs/lib/warning"),deleteListener=ReactBrowserEventEmitter.deleteListener,listenTo=ReactBrowserEventEmitter.listenTo,registrationNameModules=ReactBrowserEventEmitter.registrationNameModules,CONTENT_TYPES={string:!0,number:!0},CHILDREN=keyOf({children:null}),STYLE=keyOf({style:null}),HTML=keyOf({__html:null}),ELEMENT_NODE_TYPE=1,legacyPropsDescriptor,styleMutationWarning={},mediaEvents={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},omittedCloseTags={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},newlineEatingTags={listing:!0,pre:!0,textarea:!0},voidElementTags=assign({menuitem:!0},omittedCloseTags),VALID_TAG_REGEX=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,validatedTagCache={},hasOwnProperty={}.hasOwnProperty;ReactDOMComponent.displayName="ReactDOMComponent",ReactDOMComponent.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,r){this._rootNodeID=e;var n=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"button":n=ReactDOMButton.getNativeProps(this,n,r);break;case"input":ReactDOMInput.mountWrapper(this,n,r),n=ReactDOMInput.getNativeProps(this,n,r);break;case"option":ReactDOMOption.mountWrapper(this,n,r),n=ReactDOMOption.getNativeProps(this,n,r);break;case"select":ReactDOMSelect.mountWrapper(this,n,r),n=ReactDOMSelect.getNativeProps(this,n,r),r=ReactDOMSelect.processChildContext(this,n,r);break;case"textarea":ReactDOMTextarea.mountWrapper(this,n,r),n=ReactDOMTextarea.getNativeProps(this,n,r)}assertValidProps(this,n);var a;if(t.useCreateElement){var o=r[ReactMount.ownerDocumentContextKey],i=o.createElement(this._currentElement.type);DOMPropertyOperations.setAttributeForID(i,this._rootNodeID),ReactMount.getID(i),this._updateDOMProperties({},n,t,i),this._createInitialChildren(t,n,r,i),a=i}else{var s=this._createOpenTagMarkupAndPutListeners(t,n),p=this._createContentMarkup(t,n,r);a=!p&&omittedCloseTags[this._tag]?s+"/>":s+">"+p+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(mountReadyInputWrapper,this);case"button":case"select":case"textarea":n.autoFocus&&t.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}return a},_createOpenTagMarkupAndPutListeners:function(e,t){var r="<"+this._currentElement.type;for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];if(null!=a)if(registrationNameModules.hasOwnProperty(n))a&&enqueuePutListener(this._rootNodeID,n,a,e);else{n===STYLE&&(a&&(a=this._previousStyleCopy=assign({},t.style)),a=CSSPropertyOperations.createMarkupForStyles(a));var o=null;null!=this._tag&&isCustomComponent(this._tag,t)?n!==CHILDREN&&(o=DOMPropertyOperations.createMarkupForCustomAttribute(n,a)):o=DOMPropertyOperations.createMarkupForProperty(n,a),o&&(r+=" "+o)}}return e.renderToStaticMarkup?r:r+" "+DOMPropertyOperations.createMarkupForID(this._rootNodeID)},_createContentMarkup:function(e,t,r){var n="",a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&(n=a.__html);else{var o=CONTENT_TYPES[typeof t.children]?t.children:null,i=null!=o?null:t.children;if(null!=o)n=escapeTextContentForBrowser(o);else if(null!=i){var s=this.mountChildren(i,e,r);n=s.join("")}}return newlineEatingTags[this._tag]&&"\n"===n.charAt(0)?"\n"+n:n},_createInitialChildren:function(e,t,r,n){var a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&setInnerHTML(n,a.__html);else{var o=CONTENT_TYPES[typeof t.children]?t.children:null,i=null!=o?null:t.children;if(null!=o)setTextContent(n,o);else if(null!=i)for(var s=this.mountChildren(i,e,r),p=0;p<s.length;p++)n.appendChild(s[p])}},receiveComponent:function(e,t,r){var n=this._currentElement;this._currentElement=e,this.updateComponent(t,n,e,r)},updateComponent:function(e,t,r,n){var a=t.props,o=this._currentElement.props;switch(this._tag){case"button":a=ReactDOMButton.getNativeProps(this,a),o=ReactDOMButton.getNativeProps(this,o);break;case"input":ReactDOMInput.updateWrapper(this),a=ReactDOMInput.getNativeProps(this,a),o=ReactDOMInput.getNativeProps(this,o);break;case"option":a=ReactDOMOption.getNativeProps(this,a),o=ReactDOMOption.getNativeProps(this,o);break;case"select":a=ReactDOMSelect.getNativeProps(this,a),o=ReactDOMSelect.getNativeProps(this,o);break;case"textarea":ReactDOMTextarea.updateWrapper(this),a=ReactDOMTextarea.getNativeProps(this,a),o=ReactDOMTextarea.getNativeProps(this,o)}assertValidProps(this,o),this._updateDOMProperties(a,o,e,null),this._updateDOMChildren(a,o,e,n),!canDefineProperty&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=o),"select"===this._tag&&e.getReactMountReady().enqueue(postUpdateSelectWrapper,this)},_updateDOMProperties:function(e,t,r,n){var a,o,i;for(a in e)if(!t.hasOwnProperty(a)&&e.hasOwnProperty(a))if(a===STYLE){var s=this._previousStyleCopy;for(o in s)s.hasOwnProperty(o)&&(i=i||{},i[o]="");this._previousStyleCopy=null}else registrationNameModules.hasOwnProperty(a)?e[a]&&deleteListener(this._rootNodeID,a):(DOMProperty.properties[a]||DOMProperty.isCustomAttribute(a))&&(n||(n=ReactMount.getNode(this._rootNodeID)),DOMPropertyOperations.deleteValueForProperty(n,a));for(a in t){var p=t[a],l=a===STYLE?this._previousStyleCopy:e[a];if(t.hasOwnProperty(a)&&p!==l)if(a===STYLE)if(p?p=this._previousStyleCopy=assign({},p):this._previousStyleCopy=null,l){for(o in l)!l.hasOwnProperty(o)||p&&p.hasOwnProperty(o)||(i=i||{},i[o]="");for(o in p)p.hasOwnProperty(o)&&l[o]!==p[o]&&(i=i||{},i[o]=p[o])}else i=p;else registrationNameModules.hasOwnProperty(a)?p?enqueuePutListener(this._rootNodeID,a,p,r):l&&deleteListener(this._rootNodeID,a):isCustomComponent(this._tag,t)?(n||(n=ReactMount.getNode(this._rootNodeID)),a===CHILDREN&&(p=null),DOMPropertyOperations.setValueForAttribute(n,a,p)):(DOMProperty.properties[a]||DOMProperty.isCustomAttribute(a))&&(n||(n=ReactMount.getNode(this._rootNodeID)),null!=p?DOMPropertyOperations.setValueForProperty(n,a,p):DOMPropertyOperations.deleteValueForProperty(n,a))}i&&(n||(n=ReactMount.getNode(this._rootNodeID)),CSSPropertyOperations.setValueForStyles(n,i))},_updateDOMChildren:function(e,t,r,n){var a=CONTENT_TYPES[typeof e.children]?e.children:null,o=CONTENT_TYPES[typeof t.children]?t.children:null,i=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,p=null!=a?null:e.children,l=null!=o?null:t.children,u=null!=a||null!=i,c=null!=o||null!=s;null!=p&&null==l?this.updateChildren(null,r,n):u&&!c&&this.updateTextContent(""),null!=o?a!==o&&this.updateTextContent(""+o):null!=s?i!==s&&this.updateMarkup(""+s):null!=l&&this.updateChildren(l,r,n)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var e=this._wrapperState.listeners;if(e)for(var t=0;t<e.length;t++)e[t].remove();break;case"input":ReactDOMInput.unmountWrapper(this);break;case"html":case"head":case"body":invariant(!1)}if(this.unmountChildren(),ReactBrowserEventEmitter.deleteAllListeners(this._rootNodeID),ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){this._nodeWithLegacyProperties._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var e=ReactMount.getNode(this._rootNodeID);e._reactInternalComponent=this,e.getDOMNode=legacyGetDOMNode,e.isMounted=legacyIsMounted,e.setState=legacySetStateEtc,e.replaceState=legacySetStateEtc,e.forceUpdate=legacySetStateEtc,e.setProps=legacySetProps,e.replaceProps=legacyReplaceProps,e.props=this._currentElement.props,this._nodeWithLegacyProperties=e}return this._nodeWithLegacyProperties}},ReactPerf.measureMethods(ReactDOMComponent,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),assign(ReactDOMComponent.prototype,ReactDOMComponent.Mixin,ReactMultiChild.Mixin),module.exports=ReactDOMComponent;

},{"./AutoFocusUtils":50,"./CSSPropertyOperations":53,"./DOMProperty":58,"./DOMPropertyOperations":59,"./EventConstants":63,"./Object.assign":71,"./ReactBrowserEventEmitter":75,"./ReactComponentBrowserEnvironment":80,"./ReactDOMButton":85,"./ReactDOMInput":90,"./ReactDOMOption":91,"./ReactDOMSelect":92,"./ReactDOMTextarea":96,"./ReactMount":112,"./ReactMultiChild":113,"./ReactPerf":118,"./ReactUpdateQueue":129,"./canDefineProperty":151,"./escapeTextContentForBrowser":154,"./isEventSupported":166,"./setInnerHTML":171,"./setTextContent":172,"./validateDOMNesting":175,"fbjs/lib/invariant":20,"fbjs/lib/keyOf":24,"fbjs/lib/shallowEqual":27,"fbjs/lib/warning":29}],87:[function(require,module,exports){
"use strict";function createDOMFactory(e){return ReactElement.createFactory(e)}var ReactElement=require("./ReactElement"),ReactElementValidator=require("./ReactElementValidator"),mapObject=require("fbjs/lib/mapObject"),ReactDOMFactories=mapObject({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul",var:"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},createDOMFactory);module.exports=ReactDOMFactories;

},{"./ReactElement":99,"./ReactElementValidator":100,"fbjs/lib/mapObject":25}],88:[function(require,module,exports){
"use strict";var ReactDOMFeatureFlags={useCreateElement:!1};module.exports=ReactDOMFeatureFlags;

},{}],89:[function(require,module,exports){
"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations"),DOMPropertyOperations=require("./DOMPropertyOperations"),ReactMount=require("./ReactMount"),ReactPerf=require("./ReactPerf"),invariant=require("fbjs/lib/invariant"),INVALID_PROPERTY_ERRORS={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},ReactDOMIDOperations={updatePropertyByID:function(e,r,t){var a=ReactMount.getNode(e);INVALID_PROPERTY_ERRORS.hasOwnProperty(r)&&invariant(!1),null!=t?DOMPropertyOperations.setValueForProperty(a,r,t):DOMPropertyOperations.deleteValueForProperty(a,r)},dangerouslyReplaceNodeWithMarkupByID:function(e,r){var t=ReactMount.getNode(e);DOMChildrenOperations.dangerouslyReplaceNodeWithMarkup(t,r)},dangerouslyProcessChildrenUpdates:function(e,r){for(var t=0;t<e.length;t++)e[t].parentNode=ReactMount.getNode(e[t].parentID);DOMChildrenOperations.processUpdates(e,r)}};ReactPerf.measureMethods(ReactDOMIDOperations,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),module.exports=ReactDOMIDOperations;

},{"./DOMChildrenOperations":57,"./DOMPropertyOperations":59,"./ReactMount":112,"./ReactPerf":118,"fbjs/lib/invariant":20}],90:[function(require,module,exports){
"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMInput.updateWrapper(this)}function _handleChange(e){var t=this._currentElement.props,a=LinkedValueUtils.executeOnChange(t,e);ReactUpdates.asap(forceUpdateIfMounted,this);var n=t.name;if("radio"===t.type&&null!=n){for(var r=ReactMount.getNode(this._rootNodeID),i=r;i.parentNode;)i=i.parentNode;for(var u=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),o=0;o<u.length;o++){var l=u[o];if(l!==r&&l.form===r.form){var d=ReactMount.getID(l);d||invariant(!1);var p=instancesByReactID[d];p||invariant(!1),ReactUpdates.asap(forceUpdateIfMounted,p)}}}return a}var ReactDOMIDOperations=require("./ReactDOMIDOperations"),LinkedValueUtils=require("./LinkedValueUtils"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),instancesByReactID={},ReactDOMInput={getNativeProps:function(e,t,a){var n=LinkedValueUtils.getValue(t),r=LinkedValueUtils.getChecked(t);return assign({},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var a=t.defaultValue;e._wrapperState={initialChecked:t.defaultChecked||!1,initialValue:null!=a?a:null,onChange:_handleChange.bind(e)}},mountReadyWrapper:function(e){instancesByReactID[e._rootNodeID]=e},unmountWrapper:function(e){delete instancesByReactID[e._rootNodeID]},updateWrapper:function(e){var t=e._currentElement.props,a=t.checked;null!=a&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"checked",a||!1);var n=LinkedValueUtils.getValue(t);null!=n&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"value",""+n)}};module.exports=ReactDOMInput;

},{"./LinkedValueUtils":70,"./Object.assign":71,"./ReactDOMIDOperations":89,"./ReactMount":112,"./ReactUpdates":130,"fbjs/lib/invariant":20}],91:[function(require,module,exports){
"use strict";var ReactChildren=require("./ReactChildren"),ReactDOMSelect=require("./ReactDOMSelect"),assign=require("./Object.assign"),warning=require("fbjs/lib/warning"),valueContextKey=ReactDOMSelect.valueContextKey,ReactDOMOption={mountWrapper:function(e,t,r){var a=r[valueContextKey],n=null;if(null!=a)if(n=!1,Array.isArray(a)){for(var l=0;l<a.length;l++)if(""+a[l]==""+t.value){n=!0;break}}else n=""+a==""+t.value;e._wrapperState={selected:n}},getNativeProps:function(e,t,r){var a=assign({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(a.selected=e._wrapperState.selected);var n="";return ReactChildren.forEach(t.children,function(e){null!=e&&("string"!=typeof e&&"number"!=typeof e||(n+=e))}),n&&(a.children=n),a}};module.exports=ReactDOMOption;

},{"./Object.assign":71,"./ReactChildren":77,"./ReactDOMSelect":92,"fbjs/lib/warning":29}],92:[function(require,module,exports){
"use strict";function updateOptionsIfPendingUpdateAndMounted(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=LinkedValueUtils.getValue(e);null!=t&&updateOptions(this,Boolean(e.multiple),t)}}function getDeclarationErrorAddendum(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function checkSelectPropTypes(e,t){var a=e._currentElement._owner;LinkedValueUtils.checkPropTypes("select",t,a);for(var n=0;n<valuePropNames.length;n++){var l=valuePropNames[n];null!=t[l]&&t.multiple}}function updateOptions(e,t,a){var n,l,r=ReactMount.getNode(e._rootNodeID).options;if(t){for(n={},l=0;l<a.length;l++)n[""+a[l]]=!0;for(l=0;l<r.length;l++){var i=n.hasOwnProperty(r[l].value);r[l].selected!==i&&(r[l].selected=i)}}else{for(n=""+a,l=0;l<r.length;l++)if(r[l].value===n)return void(r[l].selected=!0);r.length&&(r[0].selected=!0)}}function _handleChange(e){var t=this._currentElement.props,a=LinkedValueUtils.executeOnChange(t,e);return this._wrapperState.pendingUpdate=!0,ReactUpdates.asap(updateOptionsIfPendingUpdateAndMounted,this),a}var LinkedValueUtils=require("./LinkedValueUtils"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),warning=require("fbjs/lib/warning"),valueContextKey="__ReactDOMSelect_value$"+Math.random().toString(36).slice(2),valuePropNames=["value","defaultValue"],ReactDOMSelect={valueContextKey:valueContextKey,getNativeProps:function(e,t,a){return assign({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var a=LinkedValueUtils.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=a?a:t.defaultValue,onChange:_handleChange.bind(e),wasMultiple:Boolean(t.multiple)}},processChildContext:function(e,t,a){var n=assign({},a);return n[valueContextKey]=e._wrapperState.initialValue,n},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var a=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var n=LinkedValueUtils.getValue(t);null!=n?(e._wrapperState.pendingUpdate=!1,updateOptions(e,Boolean(t.multiple),n)):a!==Boolean(t.multiple)&&(null!=t.defaultValue?updateOptions(e,Boolean(t.multiple),t.defaultValue):updateOptions(e,Boolean(t.multiple),t.multiple?[]:""))}};module.exports=ReactDOMSelect;

},{"./LinkedValueUtils":70,"./Object.assign":71,"./ReactMount":112,"./ReactUpdates":130,"fbjs/lib/warning":29}],93:[function(require,module,exports){
"use strict";function isCollapsed(e,t,n,o){return e===n&&t===o}function getIEOffsets(e){var t=document.selection,n=t.createRange(),o=n.text.length,s=n.duplicate();s.moveToElementText(e),s.setEndPoint("EndToStart",n);var r=s.text.length;return{start:r,end:r+o}}function getModernOffsets(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,o=t.anchorOffset,s=t.focusNode,r=t.focusOffset,a=t.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(e){return null}var f=isCollapsed(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),d=f?0:a.toString().length,c=a.cloneRange();c.selectNodeContents(e),c.setEnd(a.startContainer,a.startOffset);var i=isCollapsed(c.startContainer,c.startOffset,c.endContainer,c.endOffset),l=i?0:c.toString().length,g=l+d,u=document.createRange();u.setStart(n,o),u.setEnd(s,r);var O=u.collapsed;return{start:O?g:l,end:O?l:g}}function setIEOffsets(e,t){var n,o,s=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,o=n):t.start>t.end?(n=t.end,o=t.start):(n=t.start,o=t.end),s.moveToElementText(e),s.moveStart("character",n),s.setEndPoint("EndToStart",s),s.moveEnd("character",o-n),s.select()}function setModernOffsets(e,t){if(window.getSelection){var n=window.getSelection(),o=e[getTextContentAccessor()].length,s=Math.min(t.start,o),r=void 0===t.end?s:Math.min(t.end,o);if(!n.extend&&s>r){var a=r;r=s,s=a}var f=getNodeForCharacterOffset(e,s),d=getNodeForCharacterOffset(e,r);if(f&&d){var c=document.createRange();c.setStart(f.node,f.offset),n.removeAllRanges(),s>r?(n.addRange(c),n.extend(d.node,d.offset)):(c.setEnd(d.node,d.offset),n.addRange(c))}}}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),getNodeForCharacterOffset=require("./getNodeForCharacterOffset"),getTextContentAccessor=require("./getTextContentAccessor"),useIEOffsets=ExecutionEnvironment.canUseDOM&&"selection"in document&&!("getSelection"in window),ReactDOMSelection={getOffsets:useIEOffsets?getIEOffsets:getModernOffsets,setOffsets:useIEOffsets?setIEOffsets:setModernOffsets};module.exports=ReactDOMSelection;

},{"./getNodeForCharacterOffset":163,"./getTextContentAccessor":164,"fbjs/lib/ExecutionEnvironment":6}],94:[function(require,module,exports){
"use strict";var ReactDefaultInjection=require("./ReactDefaultInjection"),ReactServerRendering=require("./ReactServerRendering"),ReactVersion=require("./ReactVersion");ReactDefaultInjection.inject();var ReactDOMServer={renderToString:ReactServerRendering.renderToString,renderToStaticMarkup:ReactServerRendering.renderToStaticMarkup,version:ReactVersion};module.exports=ReactDOMServer;

},{"./ReactDefaultInjection":98,"./ReactServerRendering":127,"./ReactVersion":131}],95:[function(require,module,exports){
"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations"),DOMPropertyOperations=require("./DOMPropertyOperations"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactMount=require("./ReactMount"),assign=require("./Object.assign"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),setTextContent=require("./setTextContent"),validateDOMNesting=require("./validateDOMNesting"),ReactDOMTextComponent=function(e){};assign(ReactDOMTextComponent.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){if(this._rootNodeID=e,t.useCreateElement){var r=n[ReactMount.ownerDocumentContextKey],o=r.createElement("span");return DOMPropertyOperations.setAttributeForID(o,e),ReactMount.getID(o),setTextContent(o,this._stringText),o}var i=escapeTextContentForBrowser(this._stringText);return t.renderToStaticMarkup?i:"<span "+DOMPropertyOperations.createMarkupForID(e)+">"+i+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=ReactMount.getNode(this._rootNodeID);DOMChildrenOperations.updateTextContent(r,n)}}},unmountComponent:function(){ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID)}}),module.exports=ReactDOMTextComponent;

},{"./DOMChildrenOperations":57,"./DOMPropertyOperations":59,"./Object.assign":71,"./ReactComponentBrowserEnvironment":80,"./ReactMount":112,"./escapeTextContentForBrowser":154,"./setTextContent":172,"./validateDOMNesting":175}],96:[function(require,module,exports){
"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMTextarea.updateWrapper(this)}function _handleChange(e){var a=this._currentElement.props,t=LinkedValueUtils.executeOnChange(a,e);return ReactUpdates.asap(forceUpdateIfMounted,this),t}var LinkedValueUtils=require("./LinkedValueUtils"),ReactDOMIDOperations=require("./ReactDOMIDOperations"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactDOMTextarea={getNativeProps:function(e,a,t){return null!=a.dangerouslySetInnerHTML&&invariant(!1),assign({},a,{defaultValue:void 0,value:void 0,children:e._wrapperState.initialValue,onChange:e._wrapperState.onChange})},mountWrapper:function(e,a){var t=a.defaultValue,n=a.children;null!=n&&(null!=t&&invariant(!1),Array.isArray(n)&&(n.length<=1||invariant(!1),n=n[0]),t=""+n),null==t&&(t="");var r=LinkedValueUtils.getValue(a);e._wrapperState={initialValue:""+(null!=r?r:t),onChange:_handleChange.bind(e)}},updateWrapper:function(e){var a=e._currentElement.props,t=LinkedValueUtils.getValue(a);null!=t&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"value",""+t)}};module.exports=ReactDOMTextarea;

},{"./LinkedValueUtils":70,"./Object.assign":71,"./ReactDOMIDOperations":89,"./ReactUpdates":130,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],97:[function(require,module,exports){
"use strict";function ReactDefaultBatchingStrategyTransaction(){this.reinitializeTransaction()}var ReactUpdates=require("./ReactUpdates"),Transaction=require("./Transaction"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),RESET_BATCHED_UPDATES={initialize:emptyFunction,close:function(){ReactDefaultBatchingStrategy.isBatchingUpdates=!1}},FLUSH_BATCHED_UPDATES={initialize:emptyFunction,close:ReactUpdates.flushBatchedUpdates.bind(ReactUpdates)},TRANSACTION_WRAPPERS=[FLUSH_BATCHED_UPDATES,RESET_BATCHED_UPDATES];assign(ReactDefaultBatchingStrategyTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS}});var transaction=new ReactDefaultBatchingStrategyTransaction,ReactDefaultBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(t,a,e,i,n,c){var r=ReactDefaultBatchingStrategy.isBatchingUpdates;ReactDefaultBatchingStrategy.isBatchingUpdates=!0,r?t(a,e,i,n,c):transaction.perform(t,null,a,e,i,n,c)}};module.exports=ReactDefaultBatchingStrategy;

},{"./Object.assign":71,"./ReactUpdates":130,"./Transaction":147,"fbjs/lib/emptyFunction":12}],98:[function(require,module,exports){
"use strict";function inject(){if(!alreadyInjected){alreadyInjected=!0,ReactInjection.EventEmitter.injectReactEventListener(ReactEventListener),ReactInjection.EventPluginHub.injectEventPluginOrder(DefaultEventPluginOrder),ReactInjection.EventPluginHub.injectInstanceHandle(ReactInstanceHandles),ReactInjection.EventPluginHub.injectMount(ReactMount),ReactInjection.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:SimpleEventPlugin,EnterLeaveEventPlugin:EnterLeaveEventPlugin,ChangeEventPlugin:ChangeEventPlugin,SelectEventPlugin:SelectEventPlugin,BeforeInputEventPlugin:BeforeInputEventPlugin}),ReactInjection.NativeComponent.injectGenericComponentClass(ReactDOMComponent),ReactInjection.NativeComponent.injectTextComponentClass(ReactDOMTextComponent),ReactInjection.Class.injectMixin(ReactBrowserComponentMixin),ReactInjection.DOMProperty.injectDOMPropertyConfig(HTMLDOMPropertyConfig),ReactInjection.DOMProperty.injectDOMPropertyConfig(SVGDOMPropertyConfig),ReactInjection.EmptyComponent.injectEmptyComponent("noscript"),ReactInjection.Updates.injectReconcileTransaction(ReactReconcileTransaction),ReactInjection.Updates.injectBatchingStrategy(ReactDefaultBatchingStrategy),ReactInjection.RootIndex.injectCreateReactRootIndex(ExecutionEnvironment.canUseDOM?ClientReactRootIndex.createReactRootIndex:ServerReactRootIndex.createReactRootIndex),ReactInjection.Component.injectEnvironment(ReactComponentBrowserEnvironment)}}var BeforeInputEventPlugin=require("./BeforeInputEventPlugin"),ChangeEventPlugin=require("./ChangeEventPlugin"),ClientReactRootIndex=require("./ClientReactRootIndex"),DefaultEventPluginOrder=require("./DefaultEventPluginOrder"),EnterLeaveEventPlugin=require("./EnterLeaveEventPlugin"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),HTMLDOMPropertyConfig=require("./HTMLDOMPropertyConfig"),ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy"),ReactDOMComponent=require("./ReactDOMComponent"),ReactDOMTextComponent=require("./ReactDOMTextComponent"),ReactEventListener=require("./ReactEventListener"),ReactInjection=require("./ReactInjection"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactReconcileTransaction=require("./ReactReconcileTransaction"),SelectEventPlugin=require("./SelectEventPlugin"),ServerReactRootIndex=require("./ServerReactRootIndex"),SimpleEventPlugin=require("./SimpleEventPlugin"),SVGDOMPropertyConfig=require("./SVGDOMPropertyConfig"),alreadyInjected=!1;module.exports={inject:inject};

},{"./BeforeInputEventPlugin":51,"./ChangeEventPlugin":55,"./ClientReactRootIndex":56,"./DefaultEventPluginOrder":61,"./EnterLeaveEventPlugin":62,"./HTMLDOMPropertyConfig":69,"./ReactBrowserComponentMixin":74,"./ReactComponentBrowserEnvironment":80,"./ReactDOMComponent":86,"./ReactDOMTextComponent":95,"./ReactDefaultBatchingStrategy":97,"./ReactEventListener":105,"./ReactInjection":106,"./ReactInstanceHandles":108,"./ReactMount":112,"./ReactReconcileTransaction":122,"./SVGDOMPropertyConfig":132,"./SelectEventPlugin":133,"./ServerReactRootIndex":134,"./SimpleEventPlugin":135,"fbjs/lib/ExecutionEnvironment":6}],99:[function(require,module,exports){
"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner"),assign=require("./Object.assign"),canDefineProperty=require("./canDefineProperty"),REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,RESERVED_PROPS={key:!0,ref:!0,__self:!0,__source:!0},ReactElement=function(e,r,n,t,l,o,c){var a={$$typeof:REACT_ELEMENT_TYPE,type:e,key:r,ref:n,props:c,_owner:o};return a};ReactElement.createElement=function(e,r,n){var t,l={},o=null,c=null,a=null,u=null;if(null!=r){c=void 0===r.ref?null:r.ref,o=void 0===r.key?null:""+r.key,a=void 0===r.__self?null:r.__self,u=void 0===r.__source?null:r.__source;for(t in r)r.hasOwnProperty(t)&&!RESERVED_PROPS.hasOwnProperty(t)&&(l[t]=r[t])}var f=arguments.length-2;if(1===f)l.children=n;else if(f>1){for(var i=Array(f),E=0;E<f;E++)i[E]=arguments[E+2];l.children=i}if(e&&e.defaultProps){var s=e.defaultProps;for(t in s)void 0===l[t]&&(l[t]=s[t])}return ReactElement(e,o,c,a,u,ReactCurrentOwner.current,l)},ReactElement.createFactory=function(e){var r=ReactElement.createElement.bind(null,e);return r.type=e,r},ReactElement.cloneAndReplaceKey=function(e,r){return ReactElement(e.type,r,e.ref,e._self,e._source,e._owner,e.props)},ReactElement.cloneAndReplaceProps=function(e,r){var n=ReactElement(e.type,e.key,e.ref,e._self,e._source,e._owner,r);return n},ReactElement.cloneElement=function(e,r,n){var t,l=assign({},e.props),o=e.key,c=e.ref,a=e._self,u=e._source,f=e._owner;if(null!=r){void 0!==r.ref&&(c=r.ref,f=ReactCurrentOwner.current),void 0!==r.key&&(o=""+r.key);for(t in r)r.hasOwnProperty(t)&&!RESERVED_PROPS.hasOwnProperty(t)&&(l[t]=r[t])}var i=arguments.length-2;if(1===i)l.children=n;else if(i>1){for(var E=Array(i),s=0;s<i;s++)E[s]=arguments[s+2];l.children=E}return ReactElement(e.type,o,c,a,u,f,l)},ReactElement.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===REACT_ELEMENT_TYPE},module.exports=ReactElement;

},{"./Object.assign":71,"./ReactCurrentOwner":83,"./canDefineProperty":151}],100:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(){if(ReactCurrentOwner.current){var e=ReactCurrentOwner.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function validateExplicitKey(e,r){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;getAddendaForKeyUse("uniqueKey",e,r)}}function getAddendaForKeyUse(e,r,t){var a=getDeclarationErrorAddendum();if(!a){var n="string"==typeof t?t:t.displayName||t.name;n&&(a=" Check the top-level render call using <"+n+">.")}var i=ownerHasKeyUseWarning[e]||(ownerHasKeyUseWarning[e]={});if(i[a])return null;i[a]=!0;var o={parentOrOwner:a,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return r&&r._owner&&r._owner!==ReactCurrentOwner.current&&(o.childOwner=" It was passed a child from "+r._owner.getName()+"."),o}function validateChildKeys(e,r){if("object"==typeof e)if(Array.isArray(e))for(var t=0;t<e.length;t++){var a=e[t];ReactElement.isValidElement(a)&&validateExplicitKey(a,r)}else if(ReactElement.isValidElement(e))e._store&&(e._store.validated=!0);else if(e){var n=getIteratorFn(e);if(n&&n!==e.entries)for(var i,o=n.call(e);!(i=o.next()).done;)ReactElement.isValidElement(i.value)&&validateExplicitKey(i.value,r)}}function checkPropTypes(e,r,t,a){for(var n in r)if(r.hasOwnProperty(n)){var i;try{"function"!=typeof r[n]&&invariant(!1),i=r[n](t,n,e,a,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){i=e}if(i instanceof Error&&!(i.message in loggedTypeFailures)){loggedTypeFailures[i.message]=!0;getDeclarationErrorAddendum()}}}function validatePropTypes(e){var r=e.type;if("function"==typeof r){var t=r.displayName||r.name;r.propTypes&&checkPropTypes(t,r.propTypes,e.props,ReactPropTypeLocations.prop),r.getDefaultProps}}var ReactElement=require("./ReactElement"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactCurrentOwner=require("./ReactCurrentOwner"),canDefineProperty=require("./canDefineProperty"),getIteratorFn=require("./getIteratorFn"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ownerHasKeyUseWarning={},loggedTypeFailures={},ReactElementValidator={createElement:function(e,r,t){var a="string"==typeof e||"function"==typeof e,n=ReactElement.createElement.apply(this,arguments);if(null==n)return n;if(a)for(var i=2;i<arguments.length;i++)validateChildKeys(arguments[i],e);return validatePropTypes(n),n},createFactory:function(e){var r=ReactElementValidator.createElement.bind(null,e);return r.type=e,r},cloneElement:function(e,r,t){for(var a=ReactElement.cloneElement.apply(this,arguments),n=2;n<arguments.length;n++)validateChildKeys(arguments[n],a.type);return validatePropTypes(a),a}};module.exports=ReactElementValidator;

},{"./ReactCurrentOwner":83,"./ReactElement":99,"./ReactPropTypeLocationNames":119,"./ReactPropTypeLocations":120,"./canDefineProperty":151,"./getIteratorFn":162,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],101:[function(require,module,exports){
"use strict";function registerNullComponentID(){ReactEmptyComponentRegistry.registerNullComponentID(this._rootNodeID)}var ReactElement=require("./ReactElement"),ReactEmptyComponentRegistry=require("./ReactEmptyComponentRegistry"),ReactReconciler=require("./ReactReconciler"),assign=require("./Object.assign"),placeholderElement,ReactEmptyComponentInjection={injectEmptyComponent:function(e){placeholderElement=ReactElement.createElement(e)}},ReactEmptyComponent=function(e){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=e(placeholderElement)};assign(ReactEmptyComponent.prototype,{construct:function(e){},mountComponent:function(e,t,n){return t.getReactMountReady().enqueue(registerNullComponentID,this),this._rootNodeID=e,ReactReconciler.mountComponent(this._renderedComponent,e,t,n)},receiveComponent:function(){},unmountComponent:function(e,t,n){ReactReconciler.unmountComponent(this._renderedComponent),ReactEmptyComponentRegistry.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),ReactEmptyComponent.injection=ReactEmptyComponentInjection,module.exports=ReactEmptyComponent;

},{"./Object.assign":71,"./ReactElement":99,"./ReactEmptyComponentRegistry":102,"./ReactReconciler":123}],102:[function(require,module,exports){
"use strict";function isNullComponentID(e){return!!nullComponentIDsRegistry[e]}function registerNullComponentID(e){nullComponentIDsRegistry[e]=!0}function deregisterNullComponentID(e){delete nullComponentIDsRegistry[e]}var nullComponentIDsRegistry={},ReactEmptyComponentRegistry={isNullComponentID:isNullComponentID,registerNullComponentID:registerNullComponentID,deregisterNullComponentID:deregisterNullComponentID};module.exports=ReactEmptyComponentRegistry;

},{}],103:[function(require,module,exports){
"use strict";function invokeGuardedCallback(r,a,t,o){try{return a(t,o)}catch(r){return void(null===caughtError&&(caughtError=r))}}var caughtError=null,ReactErrorUtils={invokeGuardedCallback:invokeGuardedCallback,invokeGuardedCallbackWithCatch:invokeGuardedCallback,rethrowCaughtError:function(){if(caughtError){var r=caughtError;throw caughtError=null,r}}},fakeNode;module.exports=ReactErrorUtils;

},{}],104:[function(require,module,exports){
"use strict";function runEventQueueInBatch(e){EventPluginHub.enqueueEvents(e),EventPluginHub.processEventQueue(!1)}var EventPluginHub=require("./EventPluginHub"),ReactEventEmitterMixin={handleTopLevel:function(e,n,t,u,i){runEventQueueInBatch(EventPluginHub.extractEvents(e,n,t,u,i))}};module.exports=ReactEventEmitterMixin;

},{"./EventPluginHub":64}],105:[function(require,module,exports){
"use strict";function findParent(e){var t=ReactMount.getID(e),n=ReactInstanceHandles.getReactRootIDFromNodeID(t),a=ReactMount.findReactContainerForID(n);return ReactMount.getFirstReactDOM(a)}function TopLevelCallbackBookKeeping(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function handleTopLevelImpl(e){handleTopLevelWithoutPath(e)}function handleTopLevelWithoutPath(e){for(var t=ReactMount.getFirstReactDOM(getEventTarget(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=findParent(n);for(var a=0;a<e.ancestors.length;a++){t=e.ancestors[a];var o=ReactMount.getID(t)||"";ReactEventListener._handleTopLevel(e.topLevelType,t,o,e.nativeEvent,getEventTarget(e.nativeEvent))}}function handleTopLevelWithPath(e){for(var t=e.nativeEvent.path,n=t[0],a=0,o=0;o<t.length;o++){var l=t[o];l.nodeType===DOCUMENT_FRAGMENT_NODE_TYPE&&(n=t[o+1]);if(ReactMount.getFirstReactDOM(l)===l){var i=ReactMount.getID(l),r=ReactInstanceHandles.getReactRootIDFromNodeID(i);e.ancestors.push(l);var s=ReactMount.getID(l)||"";for(a++,ReactEventListener._handleTopLevel(e.topLevelType,l,s,e.nativeEvent,n);i!==r;)o++,l=t[o],i=ReactMount.getID(l)}}0===a&&ReactEventListener._handleTopLevel(e.topLevelType,window,"",e.nativeEvent,getEventTarget(e.nativeEvent))}function scrollValueMonitor(e){e(getUnboundedScrollPosition(window))}var EventListener=require("fbjs/lib/EventListener"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),PooledClass=require("./PooledClass"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),getEventTarget=require("./getEventTarget"),getUnboundedScrollPosition=require("fbjs/lib/getUnboundedScrollPosition"),DOCUMENT_FRAGMENT_NODE_TYPE=11;assign(TopLevelCallbackBookKeeping.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),PooledClass.addPoolingTo(TopLevelCallbackBookKeeping,PooledClass.twoArgumentPooler);var ReactEventListener={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:ExecutionEnvironment.canUseDOM?window:null,setHandleTopLevel:function(e){ReactEventListener._handleTopLevel=e},setEnabled:function(e){ReactEventListener._enabled=!!e},isEnabled:function(){return ReactEventListener._enabled},trapBubbledEvent:function(e,t,n){var a=n;return a?EventListener.listen(a,t,ReactEventListener.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var a=n;return a?EventListener.capture(a,t,ReactEventListener.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=scrollValueMonitor.bind(null,e);EventListener.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(ReactEventListener._enabled){var n=TopLevelCallbackBookKeeping.getPooled(e,t);try{ReactUpdates.batchedUpdates(handleTopLevelImpl,n)}finally{TopLevelCallbackBookKeeping.release(n)}}}};module.exports=ReactEventListener;

},{"./Object.assign":71,"./PooledClass":72,"./ReactInstanceHandles":108,"./ReactMount":112,"./ReactUpdates":130,"./getEventTarget":161,"fbjs/lib/EventListener":5,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/getUnboundedScrollPosition":17}],106:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),EventPluginHub=require("./EventPluginHub"),ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactClass=require("./ReactClass"),ReactEmptyComponent=require("./ReactEmptyComponent"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactNativeComponent=require("./ReactNativeComponent"),ReactPerf=require("./ReactPerf"),ReactRootIndex=require("./ReactRootIndex"),ReactUpdates=require("./ReactUpdates"),ReactInjection={Component:ReactComponentEnvironment.injection,Class:ReactClass.injection,DOMProperty:DOMProperty.injection,EmptyComponent:ReactEmptyComponent.injection,EventPluginHub:EventPluginHub.injection,EventEmitter:ReactBrowserEventEmitter.injection,NativeComponent:ReactNativeComponent.injection,Perf:ReactPerf.injection,RootIndex:ReactRootIndex.injection,Updates:ReactUpdates.injection};module.exports=ReactInjection;

},{"./DOMProperty":58,"./EventPluginHub":64,"./ReactBrowserEventEmitter":75,"./ReactClass":78,"./ReactComponentEnvironment":81,"./ReactEmptyComponent":101,"./ReactNativeComponent":115,"./ReactPerf":118,"./ReactRootIndex":125,"./ReactUpdates":130}],107:[function(require,module,exports){
"use strict";function isInDocument(e){return containsNode(document.documentElement,e)}var ReactDOMSelection=require("./ReactDOMSelection"),containsNode=require("fbjs/lib/containsNode"),focusNode=require("fbjs/lib/focusNode"),getActiveElement=require("fbjs/lib/getActiveElement"),ReactInputSelection={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=getActiveElement();return{focusedElem:e,selectionRange:ReactInputSelection.hasSelectionCapabilities(e)?ReactInputSelection.getSelection(e):null}},restoreSelection:function(e){var t=getActiveElement(),n=e.focusedElem,o=e.selectionRange;t!==n&&isInDocument(n)&&(ReactInputSelection.hasSelectionCapabilities(n)&&ReactInputSelection.setSelection(n,o),focusNode(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=ReactDOMSelection.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,o=t.end;if(void 0===o&&(o=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(o,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var c=e.createTextRange();c.collapse(!0),c.moveStart("character",n),c.moveEnd("character",o-n),c.select()}else ReactDOMSelection.setOffsets(e,t)}};module.exports=ReactInputSelection;

},{"./ReactDOMSelection":93,"fbjs/lib/containsNode":9,"fbjs/lib/focusNode":14,"fbjs/lib/getActiveElement":15}],108:[function(require,module,exports){
"use strict";function getReactRootIDString(t){return SEPARATOR+t.toString(36)}function isBoundary(t,e){return t.charAt(e)===SEPARATOR||e===t.length}function isValidID(t){return""===t||t.charAt(0)===SEPARATOR&&t.charAt(t.length-1)!==SEPARATOR}function isAncestorIDOf(t,e){return 0===e.indexOf(t)&&isBoundary(e,t.length)}function getParentID(t){return t?t.substr(0,t.lastIndexOf(SEPARATOR)):""}function getNextDescendantID(t,e){if(isValidID(t)&&isValidID(e)||invariant(!1),isAncestorIDOf(t,e)||invariant(!1),t===e)return t;var r,n=t.length+SEPARATOR_LENGTH;for(r=n;r<e.length&&!isBoundary(e,r);r++);return e.substr(0,r)}function getFirstCommonAncestorID(t,e){var r=Math.min(t.length,e.length);if(0===r)return"";for(var n=0,a=0;a<=r;a++)if(isBoundary(t,a)&&isBoundary(e,a))n=a;else if(t.charAt(a)!==e.charAt(a))break;var i=t.substr(0,n);return isValidID(i)||invariant(!1),i}function traverseParentPath(t,e,r,n,a,i){t=t||"",e=e||"",t===e&&invariant(!1);var s=isAncestorIDOf(e,t);s||isAncestorIDOf(t,e)||invariant(!1);for(var o=0,c=s?getParentID:getNextDescendantID,R=t;;R=c(R,e)){var A;if(a&&R===t||i&&R===e||(A=r(R,s,n)),!1===A||R===e)break;o++<MAX_TREE_DEPTH||invariant(!1)}}var ReactRootIndex=require("./ReactRootIndex"),invariant=require("fbjs/lib/invariant"),SEPARATOR=".",SEPARATOR_LENGTH=SEPARATOR.length,MAX_TREE_DEPTH=1e4,ReactInstanceHandles={createReactRootID:function(){return getReactRootIDString(ReactRootIndex.createReactRootIndex())},createReactID:function(t,e){return t+e},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===SEPARATOR&&t.length>1){var e=t.indexOf(SEPARATOR,1);return e>-1?t.substr(0,e):t}return null},traverseEnterLeave:function(t,e,r,n,a){var i=getFirstCommonAncestorID(t,e);i!==t&&traverseParentPath(t,i,r,n,!1,!0),i!==e&&traverseParentPath(i,e,r,a,!0,!1)},traverseTwoPhase:function(t,e,r){t&&(traverseParentPath("",t,e,r,!0,!1),traverseParentPath(t,"",e,r,!1,!0))},traverseTwoPhaseSkipTarget:function(t,e,r){t&&(traverseParentPath("",t,e,r,!0,!0),traverseParentPath(t,"",e,r,!0,!0))},traverseAncestors:function(t,e,r){traverseParentPath("",t,e,r,!0,!1)},getFirstCommonAncestorID:getFirstCommonAncestorID,_getNextDescendantID:getNextDescendantID,isAncestorIDOf:isAncestorIDOf,SEPARATOR:SEPARATOR};module.exports=ReactInstanceHandles;

},{"./ReactRootIndex":125,"fbjs/lib/invariant":20}],109:[function(require,module,exports){
"use strict";var ReactInstanceMap={remove:function(n){n._reactInternalInstance=void 0},get:function(n){return n._reactInternalInstance},has:function(n){return void 0!==n._reactInternalInstance},set:function(n,t){n._reactInternalInstance=t}};module.exports=ReactInstanceMap;

},{}],110:[function(require,module,exports){
"use strict";var ReactChildren=require("./ReactChildren"),ReactComponent=require("./ReactComponent"),ReactClass=require("./ReactClass"),ReactDOMFactories=require("./ReactDOMFactories"),ReactElement=require("./ReactElement"),ReactElementValidator=require("./ReactElementValidator"),ReactPropTypes=require("./ReactPropTypes"),ReactVersion=require("./ReactVersion"),assign=require("./Object.assign"),onlyChild=require("./onlyChild"),createElement=ReactElement.createElement,createFactory=ReactElement.createFactory,cloneElement=ReactElement.cloneElement,React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,toArray:ReactChildren.toArray,only:onlyChild},Component:ReactComponent,createElement:createElement,cloneElement:cloneElement,isValidElement:ReactElement.isValidElement,PropTypes:ReactPropTypes,createClass:ReactClass.createClass,createFactory:createFactory,createMixin:function(e){return e},DOM:ReactDOMFactories,version:ReactVersion,__spread:assign};module.exports=React;

},{"./Object.assign":71,"./ReactChildren":77,"./ReactClass":78,"./ReactComponent":79,"./ReactDOMFactories":87,"./ReactElement":99,"./ReactElementValidator":100,"./ReactPropTypes":121,"./ReactVersion":131,"./onlyChild":168}],111:[function(require,module,exports){
"use strict";var adler32=require("./adler32"),TAG_END=/\/?>/,ReactMarkupChecksum={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var r=adler32(e);return e.replace(TAG_END," "+ReactMarkupChecksum.CHECKSUM_ATTR_NAME+'="'+r+'"$&')},canReuseMarkup:function(e,r){var a=r.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);return a=a&&parseInt(a,10),adler32(e)===a}};module.exports=ReactMarkupChecksum;

},{"./adler32":150}],112:[function(require,module,exports){
"use strict";function firstDifferenceIndex(e,t){for(var n=Math.min(e.length,t.length),o=0;o<n;o++)if(e.charAt(o)!==t.charAt(o))return o;return e.length===t.length?-1:n}function getReactRootElementInContainer(e){return e?e.nodeType===DOC_NODE_TYPE?e.documentElement:e.firstChild:null}function getReactRootID(e){var t=getReactRootElementInContainer(e);return t&&ReactMount.getID(t)}function getID(e){var t=internalGetID(e);if(t)if(nodeCache.hasOwnProperty(t)){var n=nodeCache[t];n!==e&&(isValid(n,t)&&invariant(!1),nodeCache[t]=e)}else nodeCache[t]=e;return t}function internalGetID(e){return e&&e.getAttribute&&e.getAttribute(ATTR_NAME)||""}function setID(e,t){var n=internalGetID(e);n!==t&&delete nodeCache[n],e.setAttribute(ATTR_NAME,t),nodeCache[t]=e}function getNode(e){return nodeCache.hasOwnProperty(e)&&isValid(nodeCache[e],e)||(nodeCache[e]=ReactMount.findReactNodeByID(e)),nodeCache[e]}function getNodeFromInstance(e){var t=ReactInstanceMap.get(e)._rootNodeID;return ReactEmptyComponentRegistry.isNullComponentID(t)?null:(nodeCache.hasOwnProperty(t)&&isValid(nodeCache[t],t)||(nodeCache[t]=ReactMount.findReactNodeByID(t)),nodeCache[t])}function isValid(e,t){if(e){internalGetID(e)!==t&&invariant(!1);var n=ReactMount.findReactContainerForID(t);if(n&&containsNode(n,e))return!0}return!1}function purgeID(e){delete nodeCache[e]}function findDeepestCachedAncestorImpl(e){var t=nodeCache[e];if(!t||!isValid(t,e))return!1;deepestNodeSoFar=t}function findDeepestCachedAncestor(e){deepestNodeSoFar=null,ReactInstanceHandles.traverseAncestors(e,findDeepestCachedAncestorImpl);var t=deepestNodeSoFar;return deepestNodeSoFar=null,t}function mountComponentIntoNode(e,t,n,o,r,a){ReactDOMFeatureFlags.useCreateElement&&(a=assign({},a),n.nodeType===DOC_NODE_TYPE?a[ownerDocumentContextKey]=n:a[ownerDocumentContextKey]=n.ownerDocument);var c=ReactReconciler.mountComponent(e,t,o,a);e._renderedComponent._topLevelWrapper=e,ReactMount._mountImageIntoNode(c,n,r,o)}function batchedMountComponentIntoNode(e,t,n,o,r){var a=ReactUpdates.ReactReconcileTransaction.getPooled(o);a.perform(mountComponentIntoNode,null,e,t,n,a,o,r),ReactUpdates.ReactReconcileTransaction.release(a)}function unmountComponentFromNode(e,t){for(ReactReconciler.unmountComponent(e),t.nodeType===DOC_NODE_TYPE&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function hasNonRootReactChild(e){var t=getReactRootID(e);return!!t&&t!==ReactInstanceHandles.getReactRootIDFromNodeID(t)}function findFirstReactDOMImpl(e){for(;e&&e.parentNode!==e;e=e.parentNode)if(1===e.nodeType){var t=internalGetID(e);if(t){var n,o=ReactInstanceHandles.getReactRootIDFromNodeID(t),r=e;do{if(n=internalGetID(r),null==(r=r.parentNode))return null}while(n!==o);if(r===containersByReactRootID[o])return e}}return null}var DOMProperty=require("./DOMProperty"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactDOMFeatureFlags=require("./ReactDOMFeatureFlags"),ReactElement=require("./ReactElement"),ReactEmptyComponentRegistry=require("./ReactEmptyComponentRegistry"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactInstanceMap=require("./ReactInstanceMap"),ReactMarkupChecksum=require("./ReactMarkupChecksum"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),ReactUpdateQueue=require("./ReactUpdateQueue"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),containsNode=require("fbjs/lib/containsNode"),instantiateReactComponent=require("./instantiateReactComponent"),invariant=require("fbjs/lib/invariant"),setInnerHTML=require("./setInnerHTML"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),validateDOMNesting=require("./validateDOMNesting"),warning=require("fbjs/lib/warning"),ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME,nodeCache={},ELEMENT_NODE_TYPE=1,DOC_NODE_TYPE=9,DOCUMENT_FRAGMENT_NODE_TYPE=11,ownerDocumentContextKey="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),instancesByReactRootID={},containersByReactRootID={},rootElementsByReactRootID,findComponentRootReusableArray=[],deepestNodeSoFar=null,TopLevelWrapper=function(){};TopLevelWrapper.prototype.isReactComponent={},TopLevelWrapper.prototype.render=function(){return this.props};var ReactMount={TopLevelWrapper:TopLevelWrapper,_instancesByReactRootID:instancesByReactRootID,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,o){return ReactMount.scrollMonitor(n,function(){ReactUpdateQueue.enqueueElementInternal(e,t),o&&ReactUpdateQueue.enqueueCallbackInternal(e,o)}),e},_registerComponent:function(e,t){(!t||t.nodeType!==ELEMENT_NODE_TYPE&&t.nodeType!==DOC_NODE_TYPE&&t.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE)&&invariant(!1),ReactBrowserEventEmitter.ensureScrollValueMonitoring();var n=ReactMount.registerContainer(t);return instancesByReactRootID[n]=e,n},_renderNewRootComponent:function(e,t,n,o){var r=instantiateReactComponent(e,null),a=ReactMount._registerComponent(r,t);return ReactUpdates.batchedUpdates(batchedMountComponentIntoNode,r,a,t,n,o),r},renderSubtreeIntoContainer:function(e,t,n,o){return(null==e||null==e._reactInternalInstance)&&invariant(!1),ReactMount._renderSubtreeIntoContainer(e,t,n,o)},_renderSubtreeIntoContainer:function(e,t,n,o){ReactElement.isValidElement(t)||invariant(!1);var r=new ReactElement(TopLevelWrapper,null,null,null,null,null,t),a=instancesByReactRootID[getReactRootID(n)];if(a){var c=a._currentElement,i=c.props;if(shouldUpdateReactComponent(i,t)){var u=a._renderedComponent.getPublicInstance(),R=o&&function(){o.call(u)};return ReactMount._updateRootComponent(a,r,n,R),u}ReactMount.unmountComponentAtNode(n)}var d=getReactRootElementInContainer(n),s=d&&!!internalGetID(d),l=hasNonRootReactChild(n),p=s&&!a&&!l,C=ReactMount._renderNewRootComponent(r,n,p,null!=e?e._reactInternalInstance._processChildContext(e._reactInternalInstance._context):emptyObject)._renderedComponent.getPublicInstance();return o&&o.call(C),C},render:function(e,t,n){return ReactMount._renderSubtreeIntoContainer(null,e,t,n)},registerContainer:function(e){var t=getReactRootID(e);return t&&(t=ReactInstanceHandles.getReactRootIDFromNodeID(t)),t||(t=ReactInstanceHandles.createReactRootID()),containersByReactRootID[t]=e,t},unmountComponentAtNode:function(e){(!e||e.nodeType!==ELEMENT_NODE_TYPE&&e.nodeType!==DOC_NODE_TYPE&&e.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE)&&invariant(!1);var t=getReactRootID(e),n=instancesByReactRootID[t];if(!n){var o=(hasNonRootReactChild(e),internalGetID(e));o&&ReactInstanceHandles.getReactRootIDFromNodeID(o);return!1}return ReactUpdates.batchedUpdates(unmountComponentFromNode,n,e),delete instancesByReactRootID[t],delete containersByReactRootID[t],!0},findReactContainerForID:function(e){var t=ReactInstanceHandles.getReactRootIDFromNodeID(e),n=containersByReactRootID[t];return n},findReactNodeByID:function(e){var t=ReactMount.findReactContainerForID(e);return ReactMount.findComponentRoot(t,e)},getFirstReactDOM:function(e){return findFirstReactDOMImpl(e)},findComponentRoot:function(e,t){var n=findComponentRootReusableArray,o=0,r=findDeepestCachedAncestor(t)||e;for(n[0]=r.firstChild,n.length=1;o<n.length;){for(var a,c=n[o++];c;){var i=ReactMount.getID(c);i?t===i?a=c:ReactInstanceHandles.isAncestorIDOf(i,t)&&(n.length=o=0,n.push(c.firstChild)):n.push(c.firstChild),c=c.nextSibling}if(a)return n.length=0,a}n.length=0,invariant(!1)},_mountImageIntoNode:function(e,t,n,o){if((!t||t.nodeType!==ELEMENT_NODE_TYPE&&t.nodeType!==DOC_NODE_TYPE&&t.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE)&&invariant(!1),n){var r=getReactRootElementInContainer(t);if(ReactMarkupChecksum.canReuseMarkup(e,r))return;var a=r.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);r.removeAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);var c=r.outerHTML;r.setAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME,a);var i=e,u=firstDifferenceIndex(i,c);i.substring(u-20,u+20),c.substring(u-20,u+20);t.nodeType===DOC_NODE_TYPE&&invariant(!1)}if(t.nodeType===DOC_NODE_TYPE&&invariant(!1),o.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);t.appendChild(e)}else setInnerHTML(t,e)},ownerDocumentContextKey:ownerDocumentContextKey,getReactRootID:getReactRootID,getID:getID,setID:setID,getNode:getNode,getNodeFromInstance:getNodeFromInstance,isValid:isValid,purgeID:purgeID};ReactPerf.measureMethods(ReactMount,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),module.exports=ReactMount;

},{"./DOMProperty":58,"./Object.assign":71,"./ReactBrowserEventEmitter":75,"./ReactCurrentOwner":83,"./ReactDOMFeatureFlags":88,"./ReactElement":99,"./ReactEmptyComponentRegistry":102,"./ReactInstanceHandles":108,"./ReactInstanceMap":109,"./ReactMarkupChecksum":111,"./ReactPerf":118,"./ReactReconciler":123,"./ReactUpdateQueue":129,"./ReactUpdates":130,"./instantiateReactComponent":165,"./setInnerHTML":171,"./shouldUpdateReactComponent":173,"./validateDOMNesting":175,"fbjs/lib/containsNode":9,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],113:[function(require,module,exports){
"use strict";function enqueueInsertMarkup(e,n,t){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.INSERT_MARKUP,markupIndex:markupQueue.push(n)-1,content:null,fromIndex:null,toIndex:t})}function enqueueMove(e,n,t){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:n,toIndex:t})}function enqueueRemove(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.REMOVE_NODE,markupIndex:null,content:null,fromIndex:n,toIndex:null})}function enqueueSetMarkup(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.SET_MARKUP,markupIndex:null,content:n,fromIndex:null,toIndex:null})}function enqueueTextContent(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.TEXT_CONTENT,markupIndex:null,content:n,fromIndex:null,toIndex:null})}function processQueue(){updateQueue.length&&(ReactComponentEnvironment.processChildrenUpdates(updateQueue,markupQueue),clearQueue())}function clearQueue(){updateQueue.length=0,markupQueue.length=0}var ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactMultiChildUpdateTypes=require("./ReactMultiChildUpdateTypes"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactReconciler=require("./ReactReconciler"),ReactChildReconciler=require("./ReactChildReconciler"),flattenChildren=require("./flattenChildren"),updateDepth=0,updateQueue=[],markupQueue=[],ReactMultiChild={Mixin:{_reconcilerInstantiateChildren:function(e,n,t){return ReactChildReconciler.instantiateChildren(e,n,t)},_reconcilerUpdateChildren:function(e,n,t,u){var r;return r=flattenChildren(n),ReactChildReconciler.updateChildren(e,r,t,u)},mountChildren:function(e,n,t){var u=this._reconcilerInstantiateChildren(e,n,t);this._renderedChildren=u;var r=[],i=0;for(var o in u)if(u.hasOwnProperty(o)){var d=u[o],a=this._rootNodeID+o,l=ReactReconciler.mountComponent(d,a,n,t);d._mountIndex=i++,r.push(l)}return r},updateTextContent:function(e){updateDepth++;var n=!0;try{var t=this._renderedChildren;ReactChildReconciler.unmountChildren(t);for(var u in t)t.hasOwnProperty(u)&&this._unmountChild(t[u]);this.setTextContent(e),n=!1}finally{updateDepth--,updateDepth||(n?clearQueue():processQueue())}},updateMarkup:function(e){updateDepth++;var n=!0;try{var t=this._renderedChildren;ReactChildReconciler.unmountChildren(t);for(var u in t)t.hasOwnProperty(u)&&this._unmountChildByName(t[u],u);this.setMarkup(e),n=!1}finally{updateDepth--,updateDepth||(n?clearQueue():processQueue())}},updateChildren:function(e,n,t){updateDepth++;var u=!0;try{this._updateChildren(e,n,t),u=!1}finally{updateDepth--,updateDepth||(u?clearQueue():processQueue())}},_updateChildren:function(e,n,t){var u=this._renderedChildren,r=this._reconcilerUpdateChildren(u,e,n,t);if(this._renderedChildren=r,r||u){var i,o=0,d=0;for(i in r)if(r.hasOwnProperty(i)){var a=u&&u[i],l=r[i];a===l?(this.moveChild(a,d,o),o=Math.max(a._mountIndex,o),a._mountIndex=d):(a&&(o=Math.max(a._mountIndex,o),this._unmountChild(a)),this._mountChildByNameAtIndex(l,i,d,n,t)),d++}for(i in u)!u.hasOwnProperty(i)||r&&r.hasOwnProperty(i)||this._unmountChild(u[i])}},unmountChildren:function(){var e=this._renderedChildren;ReactChildReconciler.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,n,t){e._mountIndex<t&&enqueueMove(this._rootNodeID,e._mountIndex,n)},createChild:function(e,n){enqueueInsertMarkup(this._rootNodeID,n,e._mountIndex)},removeChild:function(e){enqueueRemove(this._rootNodeID,e._mountIndex)},setTextContent:function(e){enqueueTextContent(this._rootNodeID,e)},setMarkup:function(e){enqueueSetMarkup(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,n,t,u,r){var i=this._rootNodeID+n,o=ReactReconciler.mountComponent(e,i,u,r);e._mountIndex=t,this.createChild(e,o)},_unmountChild:function(e){this.removeChild(e),e._mountIndex=null}}};module.exports=ReactMultiChild;

},{"./ReactChildReconciler":76,"./ReactComponentEnvironment":81,"./ReactCurrentOwner":83,"./ReactMultiChildUpdateTypes":114,"./ReactReconciler":123,"./flattenChildren":156}],114:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),ReactMultiChildUpdateTypes=keyMirror({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});module.exports=ReactMultiChildUpdateTypes;

},{"fbjs/lib/keyMirror":23}],115:[function(require,module,exports){
"use strict";function getComponentClassForElement(n){if("function"==typeof n.type)return n.type;var e=n.type,t=tagToComponentClass[e];return null==t&&(tagToComponentClass[e]=t=autoGenerateWrapperClass(e)),t}function createInternalComponent(n){return genericComponentClass||invariant(!1),new genericComponentClass(n.type,n.props)}function createInstanceForText(n){return new textComponentClass(n)}function isTextComponent(n){return n instanceof textComponentClass}var assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),autoGenerateWrapperClass=null,genericComponentClass=null,tagToComponentClass={},textComponentClass=null,ReactNativeComponentInjection={injectGenericComponentClass:function(n){genericComponentClass=n},injectTextComponentClass:function(n){textComponentClass=n},injectComponentClasses:function(n){assign(tagToComponentClass,n)}},ReactNativeComponent={getComponentClassForElement:getComponentClassForElement,createInternalComponent:createInternalComponent,createInstanceForText:createInstanceForText,isTextComponent:isTextComponent,injection:ReactNativeComponentInjection};module.exports=ReactNativeComponent;

},{"./Object.assign":71,"fbjs/lib/invariant":20}],116:[function(require,module,exports){
"use strict";function warnTDZ(e,n){}var warning=require("fbjs/lib/warning"),ReactNoopUpdateQueue={isMounted:function(e){return!1},enqueueCallback:function(e,n){},enqueueForceUpdate:function(e){warnTDZ(e,"forceUpdate")},enqueueReplaceState:function(e,n){warnTDZ(e,"replaceState")},enqueueSetState:function(e,n){warnTDZ(e,"setState")},enqueueSetProps:function(e,n){warnTDZ(e,"setProps")},enqueueReplaceProps:function(e,n){warnTDZ(e,"replaceProps")}};module.exports=ReactNoopUpdateQueue;

},{"fbjs/lib/warning":29}],117:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),ReactOwner={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,n,t){ReactOwner.isValidOwner(t)||invariant(!1),t.attachRef(n,e)},removeComponentAsRefFrom:function(e,n,t){ReactOwner.isValidOwner(t)||invariant(!1),t.getPublicInstance().refs[n]===e.getPublicInstance()&&t.detachRef(n)}};module.exports=ReactOwner;

},{"fbjs/lib/invariant":20}],118:[function(require,module,exports){
"use strict";function _noMeasure(e,r,t){return t}var ReactPerf={enableMeasure:!1,storedMeasure:_noMeasure,measureMethods:function(e,r,t){},measure:function(e,r,t){return t},injection:{injectMeasure:function(e){ReactPerf.storedMeasure=e}}};module.exports=ReactPerf;

},{}],119:[function(require,module,exports){
"use strict";var ReactPropTypeLocationNames={};module.exports=ReactPropTypeLocationNames;

},{}],120:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),ReactPropTypeLocations=keyMirror({prop:null,context:null,childContext:null});module.exports=ReactPropTypeLocations;

},{"fbjs/lib/keyMirror":23}],121:[function(require,module,exports){
"use strict";function createChainableTypeChecker(e){function r(r,n,t,a,c,o){if(a=a||ANONYMOUS,o=o||t,null==n[t]){var i=ReactPropTypeLocationNames[c];return r?new Error("Required "+i+" `"+o+"` was not specified in `"+a+"`."):null}return e(n,t,a,c,o)}var n=r.bind(null,!1);return n.isRequired=r.bind(null,!0),n}function createPrimitiveTypeChecker(e){function r(r,n,t,a,c){var o=r[n];if(getPropType(o)!==e){var i=ReactPropTypeLocationNames[a],u=getPreciseType(o);return new Error("Invalid "+i+" `"+c+"` of type `"+u+"` supplied to `"+t+"`, expected `"+e+"`.")}return null}return createChainableTypeChecker(r)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturns(null))}function createArrayOfTypeChecker(e){function r(r,n,t,a,c){var o=r[n];if(!Array.isArray(o)){var i=ReactPropTypeLocationNames[a],u=getPropType(o);return new Error("Invalid "+i+" `"+c+"` of type `"+u+"` supplied to `"+t+"`, expected an array.")}for(var p=0;p<o.length;p++){var l=e(o,p,t,a,c+"["+p+"]","SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(l instanceof Error)return l}return null}return createChainableTypeChecker(r)}function createElementTypeChecker(){function e(e,r,n,t,a){if(!ReactElement.isValidElement(e[r])){var c=ReactPropTypeLocationNames[t];return new Error("Invalid "+c+" `"+a+"` supplied to `"+n+"`, expected a single ReactElement.")}return null}return createChainableTypeChecker(e)}function createInstanceTypeChecker(e){function r(r,n,t,a,c){if(!(r[n]instanceof e)){var o=ReactPropTypeLocationNames[a],i=e.name||ANONYMOUS,u=getClassName(r[n]);return new Error("Invalid "+o+" `"+c+"` of type `"+u+"` supplied to `"+t+"`, expected instance of `"+i+"`.")}return null}return createChainableTypeChecker(r)}function createEnumTypeChecker(e){function r(r,n,t,a,c){for(var o=r[n],i=0;i<e.length;i++)if(o===e[i])return null;var u=ReactPropTypeLocationNames[a],p=JSON.stringify(e);return new Error("Invalid "+u+" `"+c+"` of value `"+o+"` supplied to `"+t+"`, expected one of "+p+".")}return createChainableTypeChecker(Array.isArray(e)?r:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function createObjectOfTypeChecker(e){function r(r,n,t,a,c){var o=r[n],i=getPropType(o);if("object"!==i){var u=ReactPropTypeLocationNames[a];return new Error("Invalid "+u+" `"+c+"` of type `"+i+"` supplied to `"+t+"`, expected an object.")}for(var p in o)if(o.hasOwnProperty(p)){var l=e(o,p,t,a,c+"."+p,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(l instanceof Error)return l}return null}return createChainableTypeChecker(r)}function createUnionTypeChecker(e){function r(r,n,t,a,c){for(var o=0;o<e.length;o++){if(null==(0,e[o])(r,n,t,a,c,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return null}var i=ReactPropTypeLocationNames[a];return new Error("Invalid "+i+" `"+c+"` supplied to `"+t+"`.")}return createChainableTypeChecker(Array.isArray(e)?r:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function createNodeChecker(){function e(e,r,n,t,a){if(!isNode(e[r])){var c=ReactPropTypeLocationNames[t];return new Error("Invalid "+c+" `"+a+"` supplied to `"+n+"`, expected a ReactNode.")}return null}return createChainableTypeChecker(e)}function createShapeTypeChecker(e){function r(r,n,t,a,c){var o=r[n],i=getPropType(o);if("object"!==i){var u=ReactPropTypeLocationNames[a];return new Error("Invalid "+u+" `"+c+"` of type `"+i+"` supplied to `"+t+"`, expected `object`.")}for(var p in e){var l=e[p];if(l){var y=l(o,p,t,a,c+"."+p,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(y)return y}}return null}return createChainableTypeChecker(r)}function isNode(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(isNode);if(null===e||ReactElement.isValidElement(e))return!0;var r=getIteratorFn(e);if(!r)return!1;var n,t=r.call(e);if(r!==e.entries){for(;!(n=t.next()).done;)if(!isNode(n.value))return!1}else for(;!(n=t.next()).done;){var a=n.value;if(a&&!isNode(a[1]))return!1}return!0;default:return!1}}function getPropType(e){var r=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":r}function getPreciseType(e){var r=getPropType(e);if("object"===r){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return r}function getClassName(e){return e.constructor&&e.constructor.name?e.constructor.name:"<<anonymous>>"}var ReactElement=require("./ReactElement"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),emptyFunction=require("fbjs/lib/emptyFunction"),getIteratorFn=require("./getIteratorFn"),ANONYMOUS="<<anonymous>>",ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};module.exports=ReactPropTypes;

},{"./ReactElement":99,"./ReactPropTypeLocationNames":119,"./getIteratorFn":162,"fbjs/lib/emptyFunction":12}],122:[function(require,module,exports){
"use strict";function ReactReconcileTransaction(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!e&&ReactDOMFeatureFlags.useCreateElement}var CallbackQueue=require("./CallbackQueue"),PooledClass=require("./PooledClass"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactDOMFeatureFlags=require("./ReactDOMFeatureFlags"),ReactInputSelection=require("./ReactInputSelection"),Transaction=require("./Transaction"),assign=require("./Object.assign"),SELECTION_RESTORATION={initialize:ReactInputSelection.getSelectionInformation,close:ReactInputSelection.restoreSelection},EVENT_SUPPRESSION={initialize:function(){var e=ReactBrowserEventEmitter.isEnabled();return ReactBrowserEventEmitter.setEnabled(!1),e},close:function(e){ReactBrowserEventEmitter.setEnabled(e)}},ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},TRANSACTION_WRAPPERS=[SELECTION_RESTORATION,EVENT_SUPPRESSION,ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactReconcileTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactReconcileTransaction),module.exports=ReactReconcileTransaction;

},{"./CallbackQueue":54,"./Object.assign":71,"./PooledClass":72,"./ReactBrowserEventEmitter":75,"./ReactDOMFeatureFlags":88,"./ReactInputSelection":107,"./Transaction":147}],123:[function(require,module,exports){
"use strict";function attachRefs(){ReactRef.attachRefs(this,this._currentElement)}var ReactRef=require("./ReactRef"),ReactReconciler={mountComponent:function(e,t,n,c){var r=e.mountComponent(t,n,c);return e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(attachRefs,e),r},unmountComponent:function(e){ReactRef.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,c){var r=e._currentElement;if(t!==r||c!==e._context){var a=ReactRef.shouldUpdateRefs(r,t);a&&ReactRef.detachRefs(e,r),e.receiveComponent(t,n,c),a&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(attachRefs,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}};module.exports=ReactReconciler;

},{"./ReactRef":124}],124:[function(require,module,exports){
"use strict";function attachRef(e,n,t){"function"==typeof e?e(n.getPublicInstance()):ReactOwner.addComponentAsRefTo(n,e,t)}function detachRef(e,n,t){"function"==typeof e?e(null):ReactOwner.removeComponentAsRefFrom(n,e,t)}var ReactOwner=require("./ReactOwner"),ReactRef={};ReactRef.attachRefs=function(e,n){if(null!==n&&!1!==n){var t=n.ref;null!=t&&attachRef(t,e,n._owner)}},ReactRef.shouldUpdateRefs=function(e,n){var t=null===e||!1===e,f=null===n||!1===n;return t||f||n._owner!==e._owner||n.ref!==e.ref},ReactRef.detachRefs=function(e,n){if(null!==n&&!1!==n){var t=n.ref;null!=t&&detachRef(t,e,n._owner)}},module.exports=ReactRef;

},{"./ReactOwner":117}],125:[function(require,module,exports){
"use strict";var ReactRootIndexInjection={injectCreateReactRootIndex:function(e){ReactRootIndex.createReactRootIndex=e}},ReactRootIndex={createReactRootIndex:null,injection:ReactRootIndexInjection};module.exports=ReactRootIndex;

},{}],126:[function(require,module,exports){
"use strict";var ReactServerBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(t){}};module.exports=ReactServerBatchingStrategy;

},{}],127:[function(require,module,exports){
"use strict";function renderToString(e){ReactElement.isValidElement(e)||invariant(!1);var t;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var a=ReactInstanceHandles.createReactRootID();return t=ReactServerRenderingTransaction.getPooled(!1),t.perform(function(){var n=instantiateReactComponent(e,null),r=n.mountComponent(a,t,emptyObject);return ReactMarkupChecksum.addChecksumToMarkup(r)},null)}finally{ReactServerRenderingTransaction.release(t),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}function renderToStaticMarkup(e){ReactElement.isValidElement(e)||invariant(!1);var t;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var a=ReactInstanceHandles.createReactRootID();return t=ReactServerRenderingTransaction.getPooled(!0),t.perform(function(){return instantiateReactComponent(e,null).mountComponent(a,t,emptyObject)},null)}finally{ReactServerRenderingTransaction.release(t),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}var ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy"),ReactElement=require("./ReactElement"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMarkupChecksum=require("./ReactMarkupChecksum"),ReactServerBatchingStrategy=require("./ReactServerBatchingStrategy"),ReactServerRenderingTransaction=require("./ReactServerRenderingTransaction"),ReactUpdates=require("./ReactUpdates"),emptyObject=require("fbjs/lib/emptyObject"),instantiateReactComponent=require("./instantiateReactComponent"),invariant=require("fbjs/lib/invariant");module.exports={renderToString:renderToString,renderToStaticMarkup:renderToStaticMarkup};

},{"./ReactDefaultBatchingStrategy":97,"./ReactElement":99,"./ReactInstanceHandles":108,"./ReactMarkupChecksum":111,"./ReactServerBatchingStrategy":126,"./ReactServerRenderingTransaction":128,"./ReactUpdates":130,"./instantiateReactComponent":165,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20}],128:[function(require,module,exports){
"use strict";function ReactServerRenderingTransaction(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!1}var PooledClass=require("./PooledClass"),CallbackQueue=require("./CallbackQueue"),Transaction=require("./Transaction"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:emptyFunction},TRANSACTION_WRAPPERS=[ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactServerRenderingTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactServerRenderingTransaction),module.exports=ReactServerRenderingTransaction;

},{"./CallbackQueue":54,"./Object.assign":71,"./PooledClass":72,"./Transaction":147,"fbjs/lib/emptyFunction":12}],129:[function(require,module,exports){
"use strict";function enqueueUpdate(e){ReactUpdates.enqueueUpdate(e)}function getInternalInstanceReadyForUpdate(e,n){var t=ReactInstanceMap.get(e);return t||null}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceMap=require("./ReactInstanceMap"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactUpdateQueue={isMounted:function(e){var n=ReactInstanceMap.get(e);return!!n&&!!n._renderedComponent},enqueueCallback:function(e,n){"function"!=typeof n&&invariant(!1);var t=getInternalInstanceReadyForUpdate(e);if(!t)return null;t._pendingCallbacks?t._pendingCallbacks.push(n):t._pendingCallbacks=[n],enqueueUpdate(t)},enqueueCallbackInternal:function(e,n){"function"!=typeof n&&invariant(!1),e._pendingCallbacks?e._pendingCallbacks.push(n):e._pendingCallbacks=[n],enqueueUpdate(e)},enqueueForceUpdate:function(e){var n=getInternalInstanceReadyForUpdate(e,"forceUpdate");n&&(n._pendingForceUpdate=!0,enqueueUpdate(n))},enqueueReplaceState:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"replaceState");t&&(t._pendingStateQueue=[n],t._pendingReplaceState=!0,enqueueUpdate(t))},enqueueSetState:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"setState");if(t){(t._pendingStateQueue||(t._pendingStateQueue=[])).push(n),enqueueUpdate(t)}},enqueueSetProps:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"setProps");t&&ReactUpdateQueue.enqueueSetPropsInternal(t,n)},enqueueSetPropsInternal:function(e,n){var t=e._topLevelWrapper;t||invariant(!1);var a=t._pendingElement||t._currentElement,r=a.props,u=assign({},r.props,n);t._pendingElement=ReactElement.cloneAndReplaceProps(a,ReactElement.cloneAndReplaceProps(r,u)),enqueueUpdate(t)},enqueueReplaceProps:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"replaceProps");t&&ReactUpdateQueue.enqueueReplacePropsInternal(t,n)},enqueueReplacePropsInternal:function(e,n){var t=e._topLevelWrapper;t||invariant(!1);var a=t._pendingElement||t._currentElement,r=a.props;t._pendingElement=ReactElement.cloneAndReplaceProps(a,ReactElement.cloneAndReplaceProps(r,n)),enqueueUpdate(t)},enqueueElementInternal:function(e,n){e._pendingElement=n,enqueueUpdate(e)}};module.exports=ReactUpdateQueue;

},{"./Object.assign":71,"./ReactCurrentOwner":83,"./ReactElement":99,"./ReactInstanceMap":109,"./ReactUpdates":130,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],130:[function(require,module,exports){
"use strict";function ensureInjected(){ReactUpdates.ReactReconcileTransaction&&batchingStrategy||invariant(!1)}function ReactUpdatesFlushTransaction(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=CallbackQueue.getPooled(),this.reconcileTransaction=ReactUpdates.ReactReconcileTransaction.getPooled(!1)}function batchedUpdates(e,t,a,n,i,c){ensureInjected(),batchingStrategy.batchedUpdates(e,t,a,n,i,c)}function mountOrderComparator(e,t){return e._mountOrder-t._mountOrder}function runBatchedUpdates(e){var t=e.dirtyComponentsLength;t!==dirtyComponents.length&&invariant(!1),dirtyComponents.sort(mountOrderComparator);for(var a=0;a<t;a++){var n=dirtyComponents[a],i=n._pendingCallbacks;if(n._pendingCallbacks=null,ReactReconciler.performUpdateIfNecessary(n,e.reconcileTransaction),i)for(var c=0;c<i.length;c++)e.callbackQueue.enqueue(i[c],n.getPublicInstance())}}function enqueueUpdate(e){if(ensureInjected(),!batchingStrategy.isBatchingUpdates)return void batchingStrategy.batchedUpdates(enqueueUpdate,e);dirtyComponents.push(e)}function asap(e,t){batchingStrategy.isBatchingUpdates||invariant(!1),asapCallbackQueue.enqueue(e,t),asapEnqueued=!0}var CallbackQueue=require("./CallbackQueue"),PooledClass=require("./PooledClass"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),Transaction=require("./Transaction"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),dirtyComponents=[],asapCallbackQueue=CallbackQueue.getPooled(),asapEnqueued=!1,batchingStrategy=null,NESTED_UPDATES={initialize:function(){this.dirtyComponentsLength=dirtyComponents.length},close:function(){this.dirtyComponentsLength!==dirtyComponents.length?(dirtyComponents.splice(0,this.dirtyComponentsLength),flushBatchedUpdates()):dirtyComponents.length=0}},UPDATE_QUEUEING={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},TRANSACTION_WRAPPERS=[NESTED_UPDATES,UPDATE_QUEUEING];assign(ReactUpdatesFlushTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},destructor:function(){this.dirtyComponentsLength=null,CallbackQueue.release(this.callbackQueue),this.callbackQueue=null,ReactUpdates.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,a){return Transaction.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,a)}}),PooledClass.addPoolingTo(ReactUpdatesFlushTransaction);var flushBatchedUpdates=function(){for(;dirtyComponents.length||asapEnqueued;){if(dirtyComponents.length){var e=ReactUpdatesFlushTransaction.getPooled();e.perform(runBatchedUpdates,null,e),ReactUpdatesFlushTransaction.release(e)}if(asapEnqueued){asapEnqueued=!1;var t=asapCallbackQueue;asapCallbackQueue=CallbackQueue.getPooled(),t.notifyAll(),CallbackQueue.release(t)}}};flushBatchedUpdates=ReactPerf.measure("ReactUpdates","flushBatchedUpdates",flushBatchedUpdates);var ReactUpdatesInjection={injectReconcileTransaction:function(e){e||invariant(!1),ReactUpdates.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e||invariant(!1),"function"!=typeof e.batchedUpdates&&invariant(!1),"boolean"!=typeof e.isBatchingUpdates&&invariant(!1),batchingStrategy=e}},ReactUpdates={ReactReconcileTransaction:null,batchedUpdates:batchedUpdates,enqueueUpdate:enqueueUpdate,flushBatchedUpdates:flushBatchedUpdates,injection:ReactUpdatesInjection,asap:asap};module.exports=ReactUpdates;

},{"./CallbackQueue":54,"./Object.assign":71,"./PooledClass":72,"./ReactPerf":118,"./ReactReconciler":123,"./Transaction":147,"fbjs/lib/invariant":20}],131:[function(require,module,exports){
"use strict";module.exports="0.14.9";

},{}],132:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,NS={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},SVGDOMPropertyConfig={Properties:{clipPath:MUST_USE_ATTRIBUTE,cx:MUST_USE_ATTRIBUTE,cy:MUST_USE_ATTRIBUTE,d:MUST_USE_ATTRIBUTE,dx:MUST_USE_ATTRIBUTE,dy:MUST_USE_ATTRIBUTE,fill:MUST_USE_ATTRIBUTE,fillOpacity:MUST_USE_ATTRIBUTE,fontFamily:MUST_USE_ATTRIBUTE,fontSize:MUST_USE_ATTRIBUTE,fx:MUST_USE_ATTRIBUTE,fy:MUST_USE_ATTRIBUTE,gradientTransform:MUST_USE_ATTRIBUTE,gradientUnits:MUST_USE_ATTRIBUTE,markerEnd:MUST_USE_ATTRIBUTE,markerMid:MUST_USE_ATTRIBUTE,markerStart:MUST_USE_ATTRIBUTE,offset:MUST_USE_ATTRIBUTE,opacity:MUST_USE_ATTRIBUTE,patternContentUnits:MUST_USE_ATTRIBUTE,patternUnits:MUST_USE_ATTRIBUTE,points:MUST_USE_ATTRIBUTE,preserveAspectRatio:MUST_USE_ATTRIBUTE,r:MUST_USE_ATTRIBUTE,rx:MUST_USE_ATTRIBUTE,ry:MUST_USE_ATTRIBUTE,spreadMethod:MUST_USE_ATTRIBUTE,stopColor:MUST_USE_ATTRIBUTE,stopOpacity:MUST_USE_ATTRIBUTE,stroke:MUST_USE_ATTRIBUTE,strokeDasharray:MUST_USE_ATTRIBUTE,strokeLinecap:MUST_USE_ATTRIBUTE,strokeOpacity:MUST_USE_ATTRIBUTE,strokeWidth:MUST_USE_ATTRIBUTE,textAnchor:MUST_USE_ATTRIBUTE,transform:MUST_USE_ATTRIBUTE,version:MUST_USE_ATTRIBUTE,viewBox:MUST_USE_ATTRIBUTE,x1:MUST_USE_ATTRIBUTE,x2:MUST_USE_ATTRIBUTE,x:MUST_USE_ATTRIBUTE,xlinkActuate:MUST_USE_ATTRIBUTE,xlinkArcrole:MUST_USE_ATTRIBUTE,xlinkHref:MUST_USE_ATTRIBUTE,xlinkRole:MUST_USE_ATTRIBUTE,xlinkShow:MUST_USE_ATTRIBUTE,xlinkTitle:MUST_USE_ATTRIBUTE,xlinkType:MUST_USE_ATTRIBUTE,xmlBase:MUST_USE_ATTRIBUTE,xmlLang:MUST_USE_ATTRIBUTE,xmlSpace:MUST_USE_ATTRIBUTE,y1:MUST_USE_ATTRIBUTE,y2:MUST_USE_ATTRIBUTE,y:MUST_USE_ATTRIBUTE},DOMAttributeNamespaces:{xlinkActuate:NS.xlink,xlinkArcrole:NS.xlink,xlinkHref:NS.xlink,xlinkRole:NS.xlink,xlinkShow:NS.xlink,xlinkTitle:NS.xlink,xlinkType:NS.xlink,xmlBase:NS.xml,xmlLang:NS.xml,xmlSpace:NS.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};module.exports=SVGDOMPropertyConfig;

},{"./DOMProperty":58}],133:[function(require,module,exports){
"use strict";function getSelection(e){if("selectionStart"in e&&ReactInputSelection.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function constructSelectEvent(e,t){if(mouseDown||null==activeElement||activeElement!==getActiveElement())return null;var n=getSelection(activeElement);if(!lastSelection||!shallowEqual(lastSelection,n)){lastSelection=n;var o=SyntheticEvent.getPooled(eventTypes.select,activeElementID,e,t);return o.type="select",o.target=activeElement,EventPropagators.accumulateTwoPhaseDispatches(o),o}return null}var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactInputSelection=require("./ReactInputSelection"),SyntheticEvent=require("./SyntheticEvent"),getActiveElement=require("fbjs/lib/getActiveElement"),isTextInputElement=require("./isTextInputElement"),keyOf=require("fbjs/lib/keyOf"),shallowEqual=require("fbjs/lib/shallowEqual"),topLevelTypes=EventConstants.topLevelTypes,skipSelectionChangeEvent=ExecutionEnvironment.canUseDOM&&"documentMode"in document&&document.documentMode<=11,eventTypes={select:{phasedRegistrationNames:{bubbled:keyOf({onSelect:null}),captured:keyOf({onSelectCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topContextMenu,topLevelTypes.topFocus,topLevelTypes.topKeyDown,topLevelTypes.topMouseDown,topLevelTypes.topMouseUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,lastSelection=null,mouseDown=!1,hasListener=!1,ON_SELECT_KEY=keyOf({onSelect:null}),SelectEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,o,l){if(!hasListener)return null;switch(e){case topLevelTypes.topFocus:(isTextInputElement(t)||"true"===t.contentEditable)&&(activeElement=t,activeElementID=n,lastSelection=null);break;case topLevelTypes.topBlur:activeElement=null,activeElementID=null,lastSelection=null;break;case topLevelTypes.topMouseDown:mouseDown=!0;break;case topLevelTypes.topContextMenu:case topLevelTypes.topMouseUp:return mouseDown=!1,constructSelectEvent(o,l);case topLevelTypes.topSelectionChange:if(skipSelectionChangeEvent)break;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:return constructSelectEvent(o,l)}return null},didPutListener:function(e,t,n){t===ON_SELECT_KEY&&(hasListener=!0)}};module.exports=SelectEventPlugin;

},{"./EventConstants":63,"./EventPropagators":67,"./ReactInputSelection":107,"./SyntheticEvent":139,"./isTextInputElement":167,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/getActiveElement":15,"fbjs/lib/keyOf":24,"fbjs/lib/shallowEqual":27}],134:[function(require,module,exports){
"use strict";var GLOBAL_MOUNT_POINT_MAX=Math.pow(2,53),ServerReactRootIndex={createReactRootIndex:function(){return Math.ceil(Math.random()*GLOBAL_MOUNT_POINT_MAX)}};module.exports=ServerReactRootIndex;

},{}],135:[function(require,module,exports){
"use strict";var EventConstants=require("./EventConstants"),EventListener=require("fbjs/lib/EventListener"),EventPropagators=require("./EventPropagators"),ReactMount=require("./ReactMount"),SyntheticClipboardEvent=require("./SyntheticClipboardEvent"),SyntheticEvent=require("./SyntheticEvent"),SyntheticFocusEvent=require("./SyntheticFocusEvent"),SyntheticKeyboardEvent=require("./SyntheticKeyboardEvent"),SyntheticMouseEvent=require("./SyntheticMouseEvent"),SyntheticDragEvent=require("./SyntheticDragEvent"),SyntheticTouchEvent=require("./SyntheticTouchEvent"),SyntheticUIEvent=require("./SyntheticUIEvent"),SyntheticWheelEvent=require("./SyntheticWheelEvent"),emptyFunction=require("fbjs/lib/emptyFunction"),getEventCharCode=require("./getEventCharCode"),invariant=require("fbjs/lib/invariant"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,eventTypes={abort:{phasedRegistrationNames:{bubbled:keyOf({onAbort:!0}),captured:keyOf({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:keyOf({onBlur:!0}),captured:keyOf({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:keyOf({onCanPlay:!0}),captured:keyOf({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:keyOf({onCanPlayThrough:!0}),captured:keyOf({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:keyOf({onClick:!0}),captured:keyOf({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:keyOf({onContextMenu:!0}),captured:keyOf({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:keyOf({onCopy:!0}),captured:keyOf({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:keyOf({onCut:!0}),captured:keyOf({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:keyOf({onDoubleClick:!0}),captured:keyOf({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:keyOf({onDrag:!0}),captured:keyOf({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:keyOf({onDragEnd:!0}),captured:keyOf({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:keyOf({onDragEnter:!0}),captured:keyOf({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:keyOf({onDragExit:!0}),captured:keyOf({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:keyOf({onDragLeave:!0}),captured:keyOf({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:keyOf({onDragOver:!0}),captured:keyOf({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:keyOf({onDragStart:!0}),captured:keyOf({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:keyOf({onDrop:!0}),captured:keyOf({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:keyOf({onDurationChange:!0}),captured:keyOf({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:keyOf({onEmptied:!0}),captured:keyOf({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:keyOf({onEncrypted:!0}),captured:keyOf({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:keyOf({onEnded:!0}),captured:keyOf({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:keyOf({onError:!0}),captured:keyOf({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:keyOf({onFocus:!0}),captured:keyOf({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:keyOf({onInput:!0}),captured:keyOf({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:keyOf({onKeyDown:!0}),captured:keyOf({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:keyOf({onKeyPress:!0}),captured:keyOf({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:keyOf({onKeyUp:!0}),captured:keyOf({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:keyOf({onLoad:!0}),captured:keyOf({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:keyOf({onLoadedData:!0}),captured:keyOf({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:keyOf({onLoadedMetadata:!0}),captured:keyOf({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:keyOf({onLoadStart:!0}),captured:keyOf({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:keyOf({onMouseDown:!0}),captured:keyOf({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:keyOf({onMouseMove:!0}),captured:keyOf({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:keyOf({onMouseOut:!0}),captured:keyOf({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:keyOf({onMouseOver:!0}),captured:keyOf({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:keyOf({onMouseUp:!0}),captured:keyOf({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:keyOf({onPaste:!0}),captured:keyOf({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:keyOf({onPause:!0}),captured:keyOf({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:keyOf({onPlay:!0}),captured:keyOf({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:keyOf({onPlaying:!0}),captured:keyOf({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:keyOf({onProgress:!0}),captured:keyOf({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:keyOf({onRateChange:!0}),captured:keyOf({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:keyOf({onReset:!0}),captured:keyOf({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:keyOf({onScroll:!0}),captured:keyOf({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:keyOf({onSeeked:!0}),captured:keyOf({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:keyOf({onSeeking:!0}),captured:keyOf({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:keyOf({onStalled:!0}),captured:keyOf({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:keyOf({onSubmit:!0}),captured:keyOf({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:keyOf({onSuspend:!0}),captured:keyOf({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:keyOf({onTimeUpdate:!0}),captured:keyOf({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:keyOf({onTouchCancel:!0}),captured:keyOf({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:keyOf({onTouchEnd:!0}),captured:keyOf({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:keyOf({onTouchMove:!0}),captured:keyOf({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:keyOf({onTouchStart:!0}),captured:keyOf({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:keyOf({onVolumeChange:!0}),captured:keyOf({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:keyOf({onWaiting:!0}),captured:keyOf({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:keyOf({onWheel:!0}),captured:keyOf({onWheelCapture:!0})}}},topLevelEventsToDispatchConfig={topAbort:eventTypes.abort,topBlur:eventTypes.blur,topCanPlay:eventTypes.canPlay,topCanPlayThrough:eventTypes.canPlayThrough,topClick:eventTypes.click,topContextMenu:eventTypes.contextMenu,topCopy:eventTypes.copy,topCut:eventTypes.cut,topDoubleClick:eventTypes.doubleClick,topDrag:eventTypes.drag,topDragEnd:eventTypes.dragEnd,topDragEnter:eventTypes.dragEnter,topDragExit:eventTypes.dragExit,topDragLeave:eventTypes.dragLeave,topDragOver:eventTypes.dragOver,topDragStart:eventTypes.dragStart,topDrop:eventTypes.drop,topDurationChange:eventTypes.durationChange,topEmptied:eventTypes.emptied,topEncrypted:eventTypes.encrypted,topEnded:eventTypes.ended,topError:eventTypes.error,topFocus:eventTypes.focus,topInput:eventTypes.input,topKeyDown:eventTypes.keyDown,topKeyPress:eventTypes.keyPress,topKeyUp:eventTypes.keyUp,topLoad:eventTypes.load,topLoadedData:eventTypes.loadedData,topLoadedMetadata:eventTypes.loadedMetadata,topLoadStart:eventTypes.loadStart,topMouseDown:eventTypes.mouseDown,topMouseMove:eventTypes.mouseMove,topMouseOut:eventTypes.mouseOut,topMouseOver:eventTypes.mouseOver,topMouseUp:eventTypes.mouseUp,topPaste:eventTypes.paste,topPause:eventTypes.pause,topPlay:eventTypes.play,topPlaying:eventTypes.playing,topProgress:eventTypes.progress,topRateChange:eventTypes.rateChange,topReset:eventTypes.reset,topScroll:eventTypes.scroll,topSeeked:eventTypes.seeked,topSeeking:eventTypes.seeking,topStalled:eventTypes.stalled,topSubmit:eventTypes.submit,topSuspend:eventTypes.suspend,topTimeUpdate:eventTypes.timeUpdate,topTouchCancel:eventTypes.touchCancel,topTouchEnd:eventTypes.touchEnd,topTouchMove:eventTypes.touchMove,topTouchStart:eventTypes.touchStart,topVolumeChange:eventTypes.volumeChange,topWaiting:eventTypes.waiting,topWheel:eventTypes.wheel};for(var type in topLevelEventsToDispatchConfig)topLevelEventsToDispatchConfig[type].dependencies=[type];var ON_CLICK_KEY=keyOf({onClick:null}),onClickListeners={},SimpleEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,a,o,p){var s=topLevelEventsToDispatchConfig[e];if(!s)return null;var n;switch(e){case topLevelTypes.topAbort:case topLevelTypes.topCanPlay:case topLevelTypes.topCanPlayThrough:case topLevelTypes.topDurationChange:case topLevelTypes.topEmptied:case topLevelTypes.topEncrypted:case topLevelTypes.topEnded:case topLevelTypes.topError:case topLevelTypes.topInput:case topLevelTypes.topLoad:case topLevelTypes.topLoadedData:case topLevelTypes.topLoadedMetadata:case topLevelTypes.topLoadStart:case topLevelTypes.topPause:case topLevelTypes.topPlay:case topLevelTypes.topPlaying:case topLevelTypes.topProgress:case topLevelTypes.topRateChange:case topLevelTypes.topReset:case topLevelTypes.topSeeked:case topLevelTypes.topSeeking:case topLevelTypes.topStalled:case topLevelTypes.topSubmit:case topLevelTypes.topSuspend:case topLevelTypes.topTimeUpdate:case topLevelTypes.topVolumeChange:case topLevelTypes.topWaiting:n=SyntheticEvent;break;case topLevelTypes.topKeyPress:if(0===getEventCharCode(o))return null;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:n=SyntheticKeyboardEvent;break;case topLevelTypes.topBlur:case topLevelTypes.topFocus:n=SyntheticFocusEvent;break;case topLevelTypes.topClick:if(2===o.button)return null;case topLevelTypes.topContextMenu:case topLevelTypes.topDoubleClick:case topLevelTypes.topMouseDown:case topLevelTypes.topMouseMove:case topLevelTypes.topMouseOut:case topLevelTypes.topMouseOver:case topLevelTypes.topMouseUp:n=SyntheticMouseEvent;break;case topLevelTypes.topDrag:case topLevelTypes.topDragEnd:case topLevelTypes.topDragEnter:case topLevelTypes.topDragExit:case topLevelTypes.topDragLeave:case topLevelTypes.topDragOver:case topLevelTypes.topDragStart:case topLevelTypes.topDrop:n=SyntheticDragEvent;break;case topLevelTypes.topTouchCancel:case topLevelTypes.topTouchEnd:case topLevelTypes.topTouchMove:case topLevelTypes.topTouchStart:n=SyntheticTouchEvent;break;case topLevelTypes.topScroll:n=SyntheticUIEvent;break;case topLevelTypes.topWheel:n=SyntheticWheelEvent;break;case topLevelTypes.topCopy:case topLevelTypes.topCut:case topLevelTypes.topPaste:n=SyntheticClipboardEvent}n||invariant(!1);var r=n.getPooled(s,a,o,p);return EventPropagators.accumulateTwoPhaseDispatches(r),r},didPutListener:function(e,t,a){if(t===ON_CLICK_KEY){var o=ReactMount.getNode(e);onClickListeners[e]||(onClickListeners[e]=EventListener.listen(o,"click",emptyFunction))}},willDeleteListener:function(e,t){t===ON_CLICK_KEY&&(onClickListeners[e].remove(),delete onClickListeners[e])}};module.exports=SimpleEventPlugin;

},{"./EventConstants":63,"./EventPropagators":67,"./ReactMount":112,"./SyntheticClipboardEvent":136,"./SyntheticDragEvent":138,"./SyntheticEvent":139,"./SyntheticFocusEvent":140,"./SyntheticKeyboardEvent":142,"./SyntheticMouseEvent":143,"./SyntheticTouchEvent":144,"./SyntheticUIEvent":145,"./SyntheticWheelEvent":146,"./getEventCharCode":158,"fbjs/lib/EventListener":5,"fbjs/lib/emptyFunction":12,"fbjs/lib/invariant":20,"fbjs/lib/keyOf":24}],136:[function(require,module,exports){
"use strict";function SyntheticClipboardEvent(t,e,n,a){SyntheticEvent.call(this,t,e,n,a)}var SyntheticEvent=require("./SyntheticEvent"),ClipboardEventInterface={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};SyntheticEvent.augmentClass(SyntheticClipboardEvent,ClipboardEventInterface),module.exports=SyntheticClipboardEvent;

},{"./SyntheticEvent":139}],137:[function(require,module,exports){
"use strict";function SyntheticCompositionEvent(t,n,e,i){SyntheticEvent.call(this,t,n,e,i)}var SyntheticEvent=require("./SyntheticEvent"),CompositionEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticCompositionEvent,CompositionEventInterface),module.exports=SyntheticCompositionEvent;

},{"./SyntheticEvent":139}],138:[function(require,module,exports){
"use strict";function SyntheticDragEvent(t,e,n,a){SyntheticMouseEvent.call(this,t,e,n,a)}var SyntheticMouseEvent=require("./SyntheticMouseEvent"),DragEventInterface={dataTransfer:null};SyntheticMouseEvent.augmentClass(SyntheticDragEvent,DragEventInterface),module.exports=SyntheticDragEvent;

},{"./SyntheticMouseEvent":143}],139:[function(require,module,exports){
"use strict";function SyntheticEvent(t,e,n,r){this.dispatchConfig=t,this.dispatchMarker=e,this.nativeEvent=n;var a=this.constructor.Interface;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i?this[s]=i(n):"target"===s?this.target=r:this[s]=n[s]}var o=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;this.isDefaultPrevented=o?emptyFunction.thatReturnsTrue:emptyFunction.thatReturnsFalse,this.isPropagationStopped=emptyFunction.thatReturnsFalse}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),warning=require("fbjs/lib/warning"),EventInterface={type:null,target:null,currentTarget:emptyFunction.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};assign(SyntheticEvent.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=emptyFunction.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=emptyFunction.thatReturnsTrue)},persist:function(){this.isPersistent=emptyFunction.thatReturnsTrue},isPersistent:emptyFunction.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),SyntheticEvent.Interface=EventInterface,SyntheticEvent.augmentClass=function(t,e){var n=this,r=Object.create(n.prototype);assign(r,t.prototype),t.prototype=r,t.prototype.constructor=t,t.Interface=assign({},n.Interface,e),t.augmentClass=n.augmentClass,PooledClass.addPoolingTo(t,PooledClass.fourArgumentPooler)},PooledClass.addPoolingTo(SyntheticEvent,PooledClass.fourArgumentPooler),module.exports=SyntheticEvent;

},{"./Object.assign":71,"./PooledClass":72,"fbjs/lib/emptyFunction":12,"fbjs/lib/warning":29}],140:[function(require,module,exports){
"use strict";function SyntheticFocusEvent(t,e,n,c){SyntheticUIEvent.call(this,t,e,n,c)}var SyntheticUIEvent=require("./SyntheticUIEvent"),FocusEventInterface={relatedTarget:null};SyntheticUIEvent.augmentClass(SyntheticFocusEvent,FocusEventInterface),module.exports=SyntheticFocusEvent;

},{"./SyntheticUIEvent":145}],141:[function(require,module,exports){
"use strict";function SyntheticInputEvent(t,n,e,c){SyntheticEvent.call(this,t,n,e,c)}var SyntheticEvent=require("./SyntheticEvent"),InputEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticInputEvent,InputEventInterface),module.exports=SyntheticInputEvent;

},{"./SyntheticEvent":139}],142:[function(require,module,exports){
"use strict";function SyntheticKeyboardEvent(e,t,n,r){SyntheticUIEvent.call(this,e,t,n,r)}var SyntheticUIEvent=require("./SyntheticUIEvent"),getEventCharCode=require("./getEventCharCode"),getEventKey=require("./getEventKey"),getEventModifierState=require("./getEventModifierState"),KeyboardEventInterface={key:getEventKey,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:getEventModifierState,charCode:function(e){return"keypress"===e.type?getEventCharCode(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?getEventCharCode(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};SyntheticUIEvent.augmentClass(SyntheticKeyboardEvent,KeyboardEventInterface),module.exports=SyntheticKeyboardEvent;

},{"./SyntheticUIEvent":145,"./getEventCharCode":158,"./getEventKey":159,"./getEventModifierState":160}],143:[function(require,module,exports){
"use strict";function SyntheticMouseEvent(e,t,n,r){SyntheticUIEvent.call(this,e,t,n,r)}var SyntheticUIEvent=require("./SyntheticUIEvent"),ViewportMetrics=require("./ViewportMetrics"),getEventModifierState=require("./getEventModifierState"),MouseEventInterface={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:getEventModifierState,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+ViewportMetrics.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+ViewportMetrics.currentScrollTop}};SyntheticUIEvent.augmentClass(SyntheticMouseEvent,MouseEventInterface),module.exports=SyntheticMouseEvent;

},{"./SyntheticUIEvent":145,"./ViewportMetrics":148,"./getEventModifierState":160}],144:[function(require,module,exports){
"use strict";function SyntheticTouchEvent(e,t,n,c){SyntheticUIEvent.call(this,e,t,n,c)}var SyntheticUIEvent=require("./SyntheticUIEvent"),getEventModifierState=require("./getEventModifierState"),TouchEventInterface={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:getEventModifierState};SyntheticUIEvent.augmentClass(SyntheticTouchEvent,TouchEventInterface),module.exports=SyntheticTouchEvent;

},{"./SyntheticUIEvent":145,"./getEventModifierState":160}],145:[function(require,module,exports){
"use strict";function SyntheticUIEvent(e,t,n,i){SyntheticEvent.call(this,e,t,n,i)}var SyntheticEvent=require("./SyntheticEvent"),getEventTarget=require("./getEventTarget"),UIEventInterface={view:function(e){if(e.view)return e.view;var t=getEventTarget(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};SyntheticEvent.augmentClass(SyntheticUIEvent,UIEventInterface),module.exports=SyntheticUIEvent;

},{"./SyntheticEvent":139,"./getEventTarget":161}],146:[function(require,module,exports){
"use strict";function SyntheticWheelEvent(e,t,n,l){SyntheticMouseEvent.call(this,e,t,n,l)}var SyntheticMouseEvent=require("./SyntheticMouseEvent"),WheelEventInterface={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};SyntheticMouseEvent.augmentClass(SyntheticWheelEvent,WheelEventInterface),module.exports=SyntheticWheelEvent;

},{"./SyntheticMouseEvent":143}],147:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),Mixin={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(i,t,a,n,r,s,l,e){this.isInTransaction()&&invariant(!1);var c,o;try{this._isInTransaction=!0,c=!0,this.initializeAll(0),o=i.call(t,a,n,r,s,l,e),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(i){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return o},initializeAll:function(i){for(var t=this.transactionWrappers,a=i;a<t.length;a++){var n=t[a];try{this.wrapperInitData[a]=Transaction.OBSERVED_ERROR,this.wrapperInitData[a]=n.initialize?n.initialize.call(this):null}finally{if(this.wrapperInitData[a]===Transaction.OBSERVED_ERROR)try{this.initializeAll(a+1)}catch(i){}}}},closeAll:function(i){this.isInTransaction()||invariant(!1);for(var t=this.transactionWrappers,a=i;a<t.length;a++){var n,r=t[a],s=this.wrapperInitData[a];try{n=!0,s!==Transaction.OBSERVED_ERROR&&r.close&&r.close.call(this,s),n=!1}finally{if(n)try{this.closeAll(a+1)}catch(i){}}}this.wrapperInitData.length=0}},Transaction={Mixin:Mixin,OBSERVED_ERROR:{}};module.exports=Transaction;

},{"fbjs/lib/invariant":20}],148:[function(require,module,exports){
"use strict";var ViewportMetrics={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(r){ViewportMetrics.currentScrollLeft=r.x,ViewportMetrics.currentScrollTop=r.y}};module.exports=ViewportMetrics;

},{}],149:[function(require,module,exports){
"use strict";function accumulateInto(r,a){if(null==a&&invariant(!1),null==r)return a;var n=Array.isArray(r),t=Array.isArray(a);return n&&t?(r.push.apply(r,a),r):n?(r.push(a),r):t?[r].concat(a):[r,a]}var invariant=require("fbjs/lib/invariant");module.exports=accumulateInto;

},{"fbjs/lib/invariant":20}],150:[function(require,module,exports){
"use strict";function adler32(r){for(var e=1,t=0,o=0,a=r.length,d=-4&a;o<d;){for(;o<Math.min(o+4096,d);o+=4)t+=(e+=r.charCodeAt(o))+(e+=r.charCodeAt(o+1))+(e+=r.charCodeAt(o+2))+(e+=r.charCodeAt(o+3));e%=MOD,t%=MOD}for(;o<a;o++)t+=e+=r.charCodeAt(o);return e%=MOD,t%=MOD,e|t<<16}var MOD=65521;module.exports=adler32;

},{}],151:[function(require,module,exports){
"use strict";var canDefineProperty=!1;module.exports=canDefineProperty;

},{}],152:[function(require,module,exports){
"use strict";function dangerousStyleValue(e,r){return null==r||"boolean"==typeof r||""===r?"":isNaN(r)||0===r||isUnitlessNumber.hasOwnProperty(e)&&isUnitlessNumber[e]?""+r:("string"==typeof r&&(r=r.trim()),r+"px")}var CSSProperty=require("./CSSProperty"),isUnitlessNumber=CSSProperty.isUnitlessNumber;module.exports=dangerousStyleValue;

},{"./CSSProperty":52}],153:[function(require,module,exports){
"use strict";function deprecated(e,r,i,n,s){return s}var assign=require("./Object.assign"),warning=require("fbjs/lib/warning");module.exports=deprecated;

},{"./Object.assign":71,"fbjs/lib/warning":29}],154:[function(require,module,exports){
"use strict";function escaper(e){return ESCAPE_LOOKUP[e]}function escapeTextContentForBrowser(e){return(""+e).replace(ESCAPE_REGEX,escaper)}var ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;module.exports=escapeTextContentForBrowser;

},{}],155:[function(require,module,exports){
"use strict";function findDOMNode(e){return null==e?null:1===e.nodeType?e:ReactInstanceMap.has(e)?ReactMount.getNodeFromInstance(e):(null!=e.render&&"function"==typeof e.render&&invariant(!1),void invariant(!1))}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactInstanceMap=require("./ReactInstanceMap"),ReactMount=require("./ReactMount"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning");module.exports=findDOMNode;

},{"./ReactCurrentOwner":83,"./ReactInstanceMap":109,"./ReactMount":112,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],156:[function(require,module,exports){
"use strict";function flattenSingleChildIntoContext(e,n,r){var l=e,t=void 0===l[r];t&&null!=n&&(l[r]=n)}function flattenChildren(e){if(null==e)return e;var n={};return traverseAllChildren(e,flattenSingleChildIntoContext,n),n}var traverseAllChildren=require("./traverseAllChildren"),warning=require("fbjs/lib/warning");module.exports=flattenChildren;

},{"./traverseAllChildren":174,"fbjs/lib/warning":29}],157:[function(require,module,exports){
"use strict";var forEachAccumulated=function(c,r,a){Array.isArray(c)?c.forEach(r,a):c&&r.call(a,c)};module.exports=forEachAccumulated;

},{}],158:[function(require,module,exports){
"use strict";function getEventCharCode(e){var r,t=e.keyCode;return"charCode"in e?0===(r=e.charCode)&&13===t&&(r=13):r=t,r>=32||13===r?r:0}module.exports=getEventCharCode;

},{}],159:[function(require,module,exports){
"use strict";function getEventKey(e){if(e.key){var r=normalizeKey[e.key]||e.key;if("Unidentified"!==r)return r}if("keypress"===e.type){var t=getEventCharCode(e);return 13===t?"Enter":String.fromCharCode(t)}return"keydown"===e.type||"keyup"===e.type?translateToKey[e.keyCode]||"Unidentified":""}var getEventCharCode=require("./getEventCharCode"),normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};module.exports=getEventKey;

},{"./getEventCharCode":158}],160:[function(require,module,exports){
"use strict";function modifierStateGetter(t){var e=this,r=e.nativeEvent;if(r.getModifierState)return r.getModifierState(t);var i=modifierKeyToProp[t];return!!i&&!!r[i]}function getEventModifierState(t){return modifierStateGetter}var modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};module.exports=getEventModifierState;

},{}],161:[function(require,module,exports){
"use strict";function getEventTarget(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}module.exports=getEventTarget;

},{}],162:[function(require,module,exports){
"use strict";function getIteratorFn(t){var r=t&&(ITERATOR_SYMBOL&&t[ITERATOR_SYMBOL]||t[FAUX_ITERATOR_SYMBOL]);if("function"==typeof r)return r}var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator";module.exports=getIteratorFn;

},{}],163:[function(require,module,exports){
"use strict";function getLeafNode(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function getSiblingNode(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function getNodeForCharacterOffset(e,t){for(var o=getLeafNode(e),n=0,r=0;o;){if(3===o.nodeType){if(r=n+o.textContent.length,n<=t&&r>=t)return{node:o,offset:t-n};n=r}o=getLeafNode(getSiblingNode(o))}}module.exports=getNodeForCharacterOffset;

},{}],164:[function(require,module,exports){
"use strict";function getTextContentAccessor(){return!contentKey&&ExecutionEnvironment.canUseDOM&&(contentKey="textContent"in document.documentElement?"textContent":"innerText"),contentKey}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),contentKey=null;module.exports=getTextContentAccessor;

},{"fbjs/lib/ExecutionEnvironment":6}],165:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function isInternalComponentType(e){return"function"==typeof e&&void 0!==e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function instantiateReactComponent(e){var t;if(null===e||!1===e)t=new ReactEmptyComponent(instantiateReactComponent);else if("object"==typeof e){var n=e;(!n||"function"!=typeof n.type&&"string"!=typeof n.type)&&invariant(!1),t="string"==typeof n.type?ReactNativeComponent.createInternalComponent(n):isInternalComponentType(n.type)?new n.type(n):new ReactCompositeComponentWrapper}else"string"==typeof e||"number"==typeof e?t=ReactNativeComponent.createInstanceForText(e):invariant(!1);return t.construct(e),t._mountIndex=0,t._mountImage=null,t}var ReactCompositeComponent=require("./ReactCompositeComponent"),ReactEmptyComponent=require("./ReactEmptyComponent"),ReactNativeComponent=require("./ReactNativeComponent"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactCompositeComponentWrapper=function(){};assign(ReactCompositeComponentWrapper.prototype,ReactCompositeComponent.Mixin,{_instantiateReactComponent:instantiateReactComponent}),module.exports=instantiateReactComponent;

},{"./Object.assign":71,"./ReactCompositeComponent":82,"./ReactEmptyComponent":101,"./ReactNativeComponent":115,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],166:[function(require,module,exports){
"use strict";function isEventSupported(e,t){if(!ExecutionEnvironment.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,u=n in document;if(!u){var i=document.createElement("div");i.setAttribute(n,"return;"),u="function"==typeof i[n]}return!u&&useHasFeature&&"wheel"===e&&(u=document.implementation.hasFeature("Events.wheel","3.0")),u}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),useHasFeature;ExecutionEnvironment.canUseDOM&&(useHasFeature=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),module.exports=isEventSupported;

},{"fbjs/lib/ExecutionEnvironment":6}],167:[function(require,module,exports){
"use strict";function isTextInputElement(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&supportedInputTypes[e.type]||"textarea"===t)}var supportedInputTypes={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};module.exports=isTextInputElement;

},{}],168:[function(require,module,exports){
"use strict";function onlyChild(e){return ReactElement.isValidElement(e)||invariant(!1),e}var ReactElement=require("./ReactElement"),invariant=require("fbjs/lib/invariant");module.exports=onlyChild;

},{"./ReactElement":99,"fbjs/lib/invariant":20}],169:[function(require,module,exports){
"use strict";function quoteAttributeValueForBrowser(e){return'"'+escapeTextContentForBrowser(e)+'"'}var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");module.exports=quoteAttributeValueForBrowser;

},{"./escapeTextContentForBrowser":154}],170:[function(require,module,exports){
"use strict";var ReactMount=require("./ReactMount");module.exports=ReactMount.renderSubtreeIntoContainer;

},{"./ReactMount":112}],171:[function(require,module,exports){
"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),WHITESPACE_TEST=/^[ \r\n\t\f]/,NONVISIBLE_TEST=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,setInnerHTML=function(e,n){e.innerHTML=n};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(setInnerHTML=function(e,n){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=n})}),ExecutionEnvironment.canUseDOM){var testElement=document.createElement("div");testElement.innerHTML=" ",""===testElement.innerHTML&&(setInnerHTML=function(e,n){if(e.parentNode&&e.parentNode.replaceChild(e,e),WHITESPACE_TEST.test(n)||"<"===n[0]&&NONVISIBLE_TEST.test(n)){e.innerHTML=String.fromCharCode(65279)+n;var t=e.firstChild;1===t.data.length?e.removeChild(t):t.deleteData(0,1)}else e.innerHTML=n})}module.exports=setInnerHTML;

},{"fbjs/lib/ExecutionEnvironment":6}],172:[function(require,module,exports){
"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),setInnerHTML=require("./setInnerHTML"),setTextContent=function(e,t){e.textContent=t};ExecutionEnvironment.canUseDOM&&("textContent"in document.documentElement||(setTextContent=function(e,t){setInnerHTML(e,escapeTextContentForBrowser(t))})),module.exports=setTextContent;

},{"./escapeTextContentForBrowser":154,"./setInnerHTML":171,"fbjs/lib/ExecutionEnvironment":6}],173:[function(require,module,exports){
"use strict";function shouldUpdateReactComponent(e,t){var n=null===e||!1===e,o=null===t||!1===t;if(n||o)return n===o;var r=typeof e,u=typeof t;return"string"===r||"number"===r?"string"===u||"number"===u:"object"===u&&e.type===t.type&&e.key===t.key}module.exports=shouldUpdateReactComponent;

},{}],174:[function(require,module,exports){
"use strict";function userProvidedKeyEscaper(e){return userProvidedKeyEscaperLookup[e]}function getComponentKey(e,r){return e&&null!=e.key?wrapUserProvidedKey(e.key):r.toString(36)}function escapeUserProvidedKey(e){return(""+e).replace(userProvidedKeyEscapeRegex,userProvidedKeyEscaper)}function wrapUserProvidedKey(e){return"$"+escapeUserProvidedKey(e)}function traverseAllChildrenImpl(e,r,n,t){var a=typeof e;if("undefined"!==a&&"boolean"!==a||(e=null),null===e||"string"===a||"number"===a||ReactElement.isValidElement(e))return n(t,e,""===r?SEPARATOR+getComponentKey(e,0):r),1;var i,l,o=0,s=""===r?SEPARATOR:r+SUBSEPARATOR;if(Array.isArray(e))for(var d=0;d<e.length;d++)i=e[d],l=s+getComponentKey(i,d),o+=traverseAllChildrenImpl(i,l,n,t);else{var u=getIteratorFn(e);if(u){var v,c=u.call(e);if(u!==e.entries)for(var p=0;!(v=c.next()).done;)i=v.value,l=s+getComponentKey(i,p++),o+=traverseAllChildrenImpl(i,l,n,t);else for(;!(v=c.next()).done;){var A=v.value;A&&(i=A[1],l=s+wrapUserProvidedKey(A[0])+SUBSEPARATOR+getComponentKey(i,0),o+=traverseAllChildrenImpl(i,l,n,t))}}else if("object"===a){String(e);invariant(!1)}}return o}function traverseAllChildren(e,r,n){return null==e?0:traverseAllChildrenImpl(e,"",r,n)}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceHandles=require("./ReactInstanceHandles"),getIteratorFn=require("./getIteratorFn"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),SEPARATOR=ReactInstanceHandles.SEPARATOR,SUBSEPARATOR=":",userProvidedKeyEscaperLookup={"=":"=0",".":"=1",":":"=2"},userProvidedKeyEscapeRegex=/[=.:]/g,didWarnAboutMaps=!1;module.exports=traverseAllChildren;

},{"./ReactCurrentOwner":83,"./ReactElement":99,"./ReactInstanceHandles":108,"./getIteratorFn":162,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],175:[function(require,module,exports){
"use strict";var assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),warning=require("fbjs/lib/warning"),validateDOMNesting=emptyFunction,specialTags,inScopeTags,buttonScopeTags,impliedEndTags,emptyAncestorInfo,updatedAncestorInfo,isTagValidWithParent,findInvalidAncestorForTag,findOwnerStack,didWarn;module.exports=validateDOMNesting;

},{"./Object.assign":71,"fbjs/lib/emptyFunction":12,"fbjs/lib/warning":29}],176:[function(require,module,exports){
"use strict";module.exports=require("./lib/React");

},{"./lib/React":73}],177:[function(require,module,exports){
function shallow(r,n,t){var a=Array.isArray(r);if(a!==Array.isArray(n))return!1;var e=typeof r;return e===typeof n&&(flat(e)?t?t(r,n):r===n:a?shallowArray(r,n,t):shallowObject(r,n,t))}function shallowArray(r,n,t){var a=r.length;if(a!==n.length)return!1;if(t){for(var e=0;e<a;e++)if(!t(r[e],n[e]))return!1}else for(var e=0;e<a;e++)if(r[e]!==n[e])return!1;return!0}function shallowObject(r,n,t){var a=0,e=0;if(t)for(var o in r){if(r.hasOwnProperty(o)&&!t(r[o],n[o]))return!1;a++}else for(var o in r){if(r.hasOwnProperty(o)&&r[o]!==n[o])return!1;a++}for(var o in n)n.hasOwnProperty(o)&&e++;return a===e}function flat(r){return"function"!==r&&"object"!==r}module.exports=shallow;

},{}],178:[function(require,module,exports){
(function (global){
!function(){var n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},r=n._,t=Array.prototype,e=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,i=t.push,o=t.slice,a=e.toString,c=e.hasOwnProperty,l=Array.isArray,f=Object.keys,s=Object.create,p=function(){},v=function(n){return n instanceof v?n:this instanceof v?void(this._wrapped=n):new v(n)};"undefined"==typeof exports||exports.nodeType?n._=v:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=v),exports._=v),v.VERSION="1.9.1";var h,y=function(n,r,t){if(void 0===r)return n;switch(null==t?3:t){case 1:return function(t){return n.call(r,t)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,i){return n.call(r,t,e,u,i)}}return function(){return n.apply(r,arguments)}},d=function(n,r,t){return v.iteratee!==h?v.iteratee(n,r):null==n?v.identity:v.isFunction(n)?y(n,r,t):v.isObject(n)&&!v.isArray(n)?v.matcher(n):v.property(n)};v.iteratee=h=function(n,r){return d(n,r,1/0)};var g=function(n,r){return r=null==r?n.length-1:+r,function(){for(var t=Math.max(arguments.length-r,0),e=Array(t),u=0;u<t;u++)e[u]=arguments[u+r];switch(r){case 0:return n.call(this,e);case 1:return n.call(this,arguments[0],e);case 2:return n.call(this,arguments[0],arguments[1],e)}var i=Array(r+1);for(u=0;u<r;u++)i[u]=arguments[u];return i[r]=e,n.apply(this,i)}},m=function(n){if(!v.isObject(n))return{};if(s)return s(n);p.prototype=n;var r=new p;return p.prototype=null,r},b=function(n){return function(r){return null==r?void 0:r[n]}},j=function(n,r){return null!=n&&c.call(n,r)},x=function(n,r){for(var t=r.length,e=0;e<t;e++){if(null==n)return;n=n[r[e]]}return t?n:void 0},_=Math.pow(2,53)-1,A=b("length"),w=function(n){var r=A(n);return"number"==typeof r&&r>=0&&r<=_};v.each=v.forEach=function(n,r,t){r=y(r,t);var e,u;if(w(n))for(e=0,u=n.length;e<u;e++)r(n[e],e,n);else{var i=v.keys(n);for(e=0,u=i.length;e<u;e++)r(n[i[e]],i[e],n)}return n},v.map=v.collect=function(n,r,t){r=d(r,t);for(var e=!w(n)&&v.keys(n),u=(e||n).length,i=Array(u),o=0;o<u;o++){var a=e?e[o]:o;i[o]=r(n[a],a,n)}return i};var O=function(n){var r=function(r,t,e,u){var i=!w(r)&&v.keys(r),o=(i||r).length,a=n>0?0:o-1;for(u||(e=r[i?i[a]:a],a+=n);a>=0&&a<o;a+=n){var c=i?i[a]:a;e=t(e,r[c],c,r)}return e};return function(n,t,e,u){var i=arguments.length>=3;return r(n,y(t,u,4),e,i)}};v.reduce=v.foldl=v.inject=O(1),v.reduceRight=v.foldr=O(-1),v.find=v.detect=function(n,r,t){var e=w(n)?v.findIndex:v.findKey,u=e(n,r,t);if(void 0!==u&&-1!==u)return n[u]},v.filter=v.select=function(n,r,t){var e=[];return r=d(r,t),v.each(n,function(n,t,u){r(n,t,u)&&e.push(n)}),e},v.reject=function(n,r,t){return v.filter(n,v.negate(d(r)),t)},v.every=v.all=function(n,r,t){r=d(r,t);for(var e=!w(n)&&v.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(!r(n[o],o,n))return!1}return!0},v.some=v.any=function(n,r,t){r=d(r,t);for(var e=!w(n)&&v.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(r(n[o],o,n))return!0}return!1},v.contains=v.includes=v.include=function(n,r,t,e){return w(n)||(n=v.values(n)),("number"!=typeof t||e)&&(t=0),v.indexOf(n,r,t)>=0},v.invoke=g(function(n,r,t){var e,u;return v.isFunction(r)?u=r:v.isArray(r)&&(e=r.slice(0,-1),r=r[r.length-1]),v.map(n,function(n){var i=u;if(!i){if(e&&e.length&&(n=x(n,e)),null==n)return;i=n[r]}return null==i?i:i.apply(n,t)})}),v.pluck=function(n,r){return v.map(n,v.property(r))},v.where=function(n,r){return v.filter(n,v.matcher(r))},v.findWhere=function(n,r){return v.find(n,v.matcher(r))},v.max=function(n,r,t){var e,u,i=-1/0,o=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof n[0]&&null!=n){n=w(n)?n:v.values(n);for(var a=0,c=n.length;a<c;a++)null!=(e=n[a])&&e>i&&(i=e)}else r=d(r,t),v.each(n,function(n,t,e){((u=r(n,t,e))>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},v.min=function(n,r,t){var e,u,i=1/0,o=1/0;if(null==r||"number"==typeof r&&"object"!=typeof n[0]&&null!=n){n=w(n)?n:v.values(n);for(var a=0,c=n.length;a<c;a++)null!=(e=n[a])&&e<i&&(i=e)}else r=d(r,t),v.each(n,function(n,t,e){((u=r(n,t,e))<o||u===1/0&&i===1/0)&&(i=n,o=u)});return i},v.shuffle=function(n){return v.sample(n,1/0)},v.sample=function(n,r,t){if(null==r||t)return w(n)||(n=v.values(n)),n[v.random(n.length-1)];var e=w(n)?v.clone(n):v.values(n),u=A(e);r=Math.max(Math.min(r,u),0);for(var i=u-1,o=0;o<r;o++){var a=v.random(o,i),c=e[o];e[o]=e[a],e[a]=c}return e.slice(0,r)},v.sortBy=function(n,r,t){var e=0;return r=d(r,t),v.pluck(v.map(n,function(n,t,u){return{value:n,index:e++,criteria:r(n,t,u)}}).sort(function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(t>e||void 0===t)return 1;if(t<e||void 0===e)return-1}return n.index-r.index}),"value")};var k=function(n,r){return function(t,e,u){var i=r?[[],[]]:{};return e=d(e,u),v.each(t,function(r,u){var o=e(r,u,t);n(i,r,o)}),i}};v.groupBy=k(function(n,r,t){j(n,t)?n[t].push(r):n[t]=[r]}),v.indexBy=k(function(n,r,t){n[t]=r}),v.countBy=k(function(n,r,t){j(n,t)?n[t]++:n[t]=1});var S=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;v.toArray=function(n){return n?v.isArray(n)?o.call(n):v.isString(n)?n.match(S):w(n)?v.map(n,v.identity):v.values(n):[]},v.size=function(n){return null==n?0:w(n)?n.length:v.keys(n).length},v.partition=k(function(n,r,t){n[t?0:1].push(r)},!0),v.first=v.head=v.take=function(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[0]:v.initial(n,n.length-r)},v.initial=function(n,r,t){return o.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))},v.last=function(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[n.length-1]:v.rest(n,Math.max(0,n.length-r))},v.rest=v.tail=v.drop=function(n,r,t){return o.call(n,null==r||t?1:r)},v.compact=function(n){return v.filter(n,Boolean)};var M=function(n,r,t,e){e=e||[];for(var u=e.length,i=0,o=A(n);i<o;i++){var a=n[i];if(w(a)&&(v.isArray(a)||v.isArguments(a)))if(r)for(var c=0,l=a.length;c<l;)e[u++]=a[c++];else M(a,r,t,e),u=e.length;else t||(e[u++]=a)}return e};v.flatten=function(n,r){return M(n,r,!1)},v.without=g(function(n,r){return v.difference(n,r)}),v.uniq=v.unique=function(n,r,t,e){v.isBoolean(r)||(e=t,t=r,r=!1),null!=t&&(t=d(t,e));for(var u=[],i=[],o=0,a=A(n);o<a;o++){var c=n[o],l=t?t(c,o,n):c;r&&!t?(o&&i===l||u.push(c),i=l):t?v.contains(i,l)||(i.push(l),u.push(c)):v.contains(u,c)||u.push(c)}return u},v.union=g(function(n){return v.uniq(M(n,!0,!0))}),v.intersection=function(n){for(var r=[],t=arguments.length,e=0,u=A(n);e<u;e++){var i=n[e];if(!v.contains(r,i)){var o;for(o=1;o<t&&v.contains(arguments[o],i);o++);o===t&&r.push(i)}}return r},v.difference=g(function(n,r){return r=M(r,!0,!0),v.filter(n,function(n){return!v.contains(r,n)})}),v.unzip=function(n){for(var r=n&&v.max(n,A).length||0,t=Array(r),e=0;e<r;e++)t[e]=v.pluck(n,e);return t},v.zip=g(v.unzip),v.object=function(n,r){for(var t={},e=0,u=A(n);e<u;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t};var F=function(n){return function(r,t,e){t=d(t,e);for(var u=A(r),i=n>0?0:u-1;i>=0&&i<u;i+=n)if(t(r[i],i,r))return i;return-1}};v.findIndex=F(1),v.findLastIndex=F(-1),v.sortedIndex=function(n,r,t,e){t=d(t,e,1);for(var u=t(r),i=0,o=A(n);i<o;){var a=Math.floor((i+o)/2);t(n[a])<u?i=a+1:o=a}return i};var E=function(n,r,t){return function(e,u,i){var a=0,c=A(e);if("number"==typeof i)n>0?a=i>=0?i:Math.max(i+c,a):c=i>=0?Math.min(i+1,c):i+c+1;else if(t&&i&&c)return i=t(e,u),e[i]===u?i:-1;if(u!==u)return i=r(o.call(e,a,c),v.isNaN),i>=0?i+a:-1;for(i=n>0?a:c-1;i>=0&&i<c;i+=n)if(e[i]===u)return i;return-1}};v.indexOf=E(1,v.findIndex,v.sortedIndex),v.lastIndexOf=E(-1,v.findLastIndex),v.range=function(n,r,t){null==r&&(r=n||0,n=0),t||(t=r<n?-1:1);for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),i=0;i<e;i++,n+=t)u[i]=n;return u},v.chunk=function(n,r){if(null==r||r<1)return[];for(var t=[],e=0,u=n.length;e<u;)t.push(o.call(n,e,e+=r));return t};var N=function(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var i=m(n.prototype),o=n.apply(i,u);return v.isObject(o)?o:i};v.bind=g(function(n,r,t){if(!v.isFunction(n))throw new TypeError("Bind must be called on a function");var e=g(function(u){return N(n,e,r,this,t.concat(u))});return e}),v.partial=g(function(n,r){var t=v.partial.placeholder,e=function(){for(var u=0,i=r.length,o=Array(i),a=0;a<i;a++)o[a]=r[a]===t?arguments[u++]:r[a];for(;u<arguments.length;)o.push(arguments[u++]);return N(n,e,this,this,o)};return e}),v.partial.placeholder=v,v.bindAll=g(function(n,r){r=M(r,!1,!1);var t=r.length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var e=r[t];n[e]=v.bind(n[e],n)}}),v.memoize=function(n,r){var t=function(e){var u=t.cache,i=""+(r?r.apply(this,arguments):e);return j(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return t.cache={},t},v.delay=g(function(n,r,t){return setTimeout(function(){return n.apply(null,t)},r)}),v.defer=v.partial(v.delay,v,1),v.throttle=function(n,r,t){var e,u,i,o,a=0;t||(t={});var c=function(){a=!1===t.leading?0:v.now(),e=null,o=n.apply(u,i),e||(u=i=null)},l=function(){var l=v.now();a||!1!==t.leading||(a=l);var f=r-(l-a);return u=this,i=arguments,f<=0||f>r?(e&&(clearTimeout(e),e=null),a=l,o=n.apply(u,i),e||(u=i=null)):e||!1===t.trailing||(e=setTimeout(c,f)),o};return l.cancel=function(){clearTimeout(e),a=0,e=u=i=null},l},v.debounce=function(n,r,t){var e,u,i=function(r,t){e=null,t&&(u=n.apply(r,t))},o=g(function(o){if(e&&clearTimeout(e),t){var a=!e;e=setTimeout(i,r),a&&(u=n.apply(this,o))}else e=v.delay(i,r,this,o);return u});return o.cancel=function(){clearTimeout(e),e=null},o},v.wrap=function(n,r){return v.partial(r,n)},v.negate=function(n){return function(){return!n.apply(this,arguments)}},v.compose=function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},v.after=function(n,r){return function(){if(--n<1)return r.apply(this,arguments)}},v.before=function(n,r){var t;return function(){return--n>0&&(t=r.apply(this,arguments)),n<=1&&(r=null),t}},v.once=v.partial(v.before,2),v.restArguments=g;var I=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],B=function(n,r){var t=T.length,u=n.constructor,i=v.isFunction(u)&&u.prototype||e,o="constructor";for(j(n,o)&&!v.contains(r,o)&&r.push(o);t--;)(o=T[t])in n&&n[o]!==i[o]&&!v.contains(r,o)&&r.push(o)};v.keys=function(n){if(!v.isObject(n))return[];if(f)return f(n);var r=[];for(var t in n)j(n,t)&&r.push(t);return I&&B(n,r),r},v.allKeys=function(n){if(!v.isObject(n))return[];var r=[];for(var t in n)r.push(t);return I&&B(n,r),r},v.values=function(n){for(var r=v.keys(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=n[r[u]];return e},v.mapObject=function(n,r,t){r=d(r,t);for(var e=v.keys(n),u=e.length,i={},o=0;o<u;o++){var a=e[o];i[a]=r(n[a],a,n)}return i},v.pairs=function(n){for(var r=v.keys(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=[r[u],n[r[u]]];return e},v.invert=function(n){for(var r={},t=v.keys(n),e=0,u=t.length;e<u;e++)r[n[t[e]]]=t[e];return r},v.functions=v.methods=function(n){var r=[];for(var t in n)v.isFunction(n[t])&&r.push(t);return r.sort()};var R=function(n,r){return function(t){var e=arguments.length;if(r&&(t=Object(t)),e<2||null==t)return t;for(var u=1;u<e;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;c<a;c++){var l=o[c];r&&void 0!==t[l]||(t[l]=i[l])}return t}};v.extend=R(v.allKeys),v.extendOwn=v.assign=R(v.keys),v.findKey=function(n,r,t){r=d(r,t);for(var e,u=v.keys(n),i=0,o=u.length;i<o;i++)if(e=u[i],r(n[e],e,n))return e};var q=function(n,r,t){return r in t};v.pick=g(function(n,r){var t={},e=r[0];if(null==n)return t;v.isFunction(e)?(r.length>1&&(e=y(e,r[1])),r=v.allKeys(n)):(e=q,r=M(r,!1,!1),n=Object(n));for(var u=0,i=r.length;u<i;u++){var o=r[u],a=n[o];e(a,o,n)&&(t[o]=a)}return t}),v.omit=g(function(n,r){var t,e=r[0];return v.isFunction(e)?(e=v.negate(e),r.length>1&&(t=r[1])):(r=v.map(M(r,!1,!1),String),e=function(n,t){return!v.contains(r,t)}),v.pick(n,e,t)}),v.defaults=R(v.allKeys,!0),v.create=function(n,r){var t=m(n);return r&&v.extendOwn(t,r),t},v.clone=function(n){return v.isObject(n)?v.isArray(n)?n.slice():v.extend({},n):n},v.tap=function(n,r){return r(n),n},v.isMatch=function(n,r){var t=v.keys(r),e=t.length;if(null==n)return!e;for(var u=Object(n),i=0;i<e;i++){var o=t[i];if(r[o]!==u[o]||!(o in u))return!1}return!0};var K,z;K=function(n,r,t,e){if(n===r)return 0!==n||1/n==1/r;if(null==n||null==r)return!1;if(n!==n)return r!==r;var u=typeof n;return("function"===u||"object"===u||"object"==typeof r)&&z(n,r,t,e)},z=function(n,r,t,e){n instanceof v&&(n=n._wrapped),r instanceof v&&(r=r._wrapped);var i=a.call(n);if(i!==a.call(r))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+r;case"[object Number]":return+n!=+n?+r!=+r:0==+n?1/+n==1/r:+n==+r;case"[object Date]":case"[object Boolean]":return+n==+r;case"[object Symbol]":return u.valueOf.call(n)===u.valueOf.call(r)}var o="[object Array]"===i;if(!o){if("object"!=typeof n||"object"!=typeof r)return!1;var c=n.constructor,l=r.constructor;if(c!==l&&!(v.isFunction(c)&&c instanceof c&&v.isFunction(l)&&l instanceof l)&&"constructor"in n&&"constructor"in r)return!1}t=t||[],e=e||[];for(var f=t.length;f--;)if(t[f]===n)return e[f]===r;if(t.push(n),e.push(r),o){if((f=n.length)!==r.length)return!1;for(;f--;)if(!K(n[f],r[f],t,e))return!1}else{var s,p=v.keys(n);if(f=p.length,v.keys(r).length!==f)return!1;for(;f--;)if(s=p[f],!j(r,s)||!K(n[s],r[s],t,e))return!1}return t.pop(),e.pop(),!0},v.isEqual=function(n,r){return K(n,r)},v.isEmpty=function(n){return null==n||(w(n)&&(v.isArray(n)||v.isString(n)||v.isArguments(n))?0===n.length:0===v.keys(n).length)},v.isElement=function(n){return!(!n||1!==n.nodeType)},v.isArray=l||function(n){return"[object Array]"===a.call(n)},v.isObject=function(n){var r=typeof n;return"function"===r||"object"===r&&!!n},v.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(n){v["is"+n]=function(r){return a.call(r)==="[object "+n+"]"}}),v.isArguments(arguments)||(v.isArguments=function(n){return j(n,"callee")});var D=n.document&&n.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof D&&(v.isFunction=function(n){return"function"==typeof n||!1}),v.isFinite=function(n){return!v.isSymbol(n)&&isFinite(n)&&!isNaN(parseFloat(n))},v.isNaN=function(n){return v.isNumber(n)&&isNaN(n)},v.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===a.call(n)},v.isNull=function(n){return null===n},v.isUndefined=function(n){return void 0===n},v.has=function(n,r){if(!v.isArray(r))return j(n,r);for(var t=r.length,e=0;e<t;e++){var u=r[e];if(null==n||!c.call(n,u))return!1;n=n[u]}return!!t},v.noConflict=function(){return n._=r,this},v.identity=function(n){return n},v.constant=function(n){return function(){return n}},v.noop=function(){},v.property=function(n){return v.isArray(n)?function(r){return x(r,n)}:b(n)},v.propertyOf=function(n){return null==n?function(){}:function(r){return v.isArray(r)?x(n,r):n[r]}},v.matcher=v.matches=function(n){return n=v.extendOwn({},n),function(r){return v.isMatch(r,n)}},v.times=function(n,r,t){var e=Array(Math.max(0,n));r=y(r,t,1);for(var u=0;u<n;u++)e[u]=r(u);return e},v.random=function(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))},v.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=v.invert(L),W=function(n){var r=function(r){return n[r]},t="(?:"+v.keys(n).join("|")+")",e=RegExp(t),u=RegExp(t,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,r):n}};v.escape=W(L),v.unescape=W(P),v.result=function(n,r,t){v.isArray(r)||(r=[r]);var e=r.length;if(!e)return v.isFunction(t)?t.call(n):t;for(var u=0;u<e;u++){var i=null==n?void 0:n[r[u]];void 0===i&&(i=t,u=e),n=v.isFunction(i)?i.call(n):i}return n};var C=0;v.uniqueId=function(n){var r=++C+"";return n?n+r:r},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,$=function(n){return"\\"+U[n]};v.template=function(n,r,t){!r&&t&&(r=t),r=v.defaults({},r,v.templateSettings);var e=RegExp([(r.escape||J).source,(r.interpolate||J).source,(r.evaluate||J).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(r,t,e,o,a){return i+=n.slice(u,a).replace(V,$),u=a+r.length,t?i+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),r}),i+="';\n",r.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";var o;try{o=new Function(r.variable||"obj","_",i)}catch(n){throw n.source=i,n}var a=function(n){return o.call(this,n,v)};return a.source="function("+(r.variable||"obj")+"){\n"+i+"}",a},v.chain=function(n){var r=v(n);return r._chain=!0,r};var G=function(n,r){return n._chain?v(r).chain():r};v.mixin=function(n){return v.each(v.functions(n),function(r){var t=v[r]=n[r];v.prototype[r]=function(){var n=[this._wrapped];return i.apply(n,arguments),G(this,t.apply(v,n))}}),v},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var r=t[n];v.prototype[n]=function(){var t=this._wrapped;return r.apply(t,arguments),"shift"!==n&&"splice"!==n||0!==t.length||delete t[0],G(this,t)}}),v.each(["concat","join","slice"],function(n){var r=t[n];v.prototype[n]=function(){return G(this,r.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}();

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],179:[function(require,module,exports){
!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function n(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function e(t){return t}function r(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function i(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=W.length;e<r;++e){var i=W[e]+n;if(i in t)return i}}function o(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function u(){this._=Object.create(null)}function a(t){return(t+="")===F||t[0]===J?J+t:t}function s(t){return(t+="")[0]===J?t.slice(1):t}function c(t){return a(t)in this._}function l(t){return(t=a(t))in this._&&delete this._[t]}function f(){var t=[];for(var n in this._)t.push(s(n));return t}function h(){var t=0;for(var n in this._)++t;return t}function p(){for(var t in this._)return!1;return!0}function v(){}function d(){}function _(t){function n(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}var e=[],r=new u;return n.on=function(n,i){var o,u=r.get(n);return arguments.length<2?u&&u.on:(u&&(u.on=null,e=e.slice(0,o=e.indexOf(u)).concat(e.slice(o+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function g(){U.event.preventDefault()}function y(){for(var t,n=U.event;t=n.sourceEvent;)n=t;return n}function m(t){for(var n=new d,e=0,r=arguments.length;++e<r;)n[arguments[e]]=_(n);return n.of=function(e,r){return function(i){try{var o=i.sourceEvent=U.event;i.target=t,U.event=i,n[i.type].apply(e,r)}finally{U.event=o}}},n}function w(t){return nt(t,ot),t}function x(t){return"function"==typeof t?t:function(){return et(t,this)}}function b(t){return"function"==typeof t?t:function(){return rt(t,this)}}function N(t,n){function e(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function u(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function a(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=U.ns.qualify(t),null==n?t.local?r:e:"function"==typeof n?t.local?a:u:t.local?o:i}function A(t){return t.trim().replace(/\s+/g," ")}function S(t){return new RegExp("(?:^|\\s+)"+U.requote(t)+"(?:\\s+|$)","g")}function E(t){return(t+"").trim().split(/^|\s+/)}function z(t,n){function e(){for(var e=-1;++e<i;)t[e](this,n)}function r(){for(var e=-1,r=n.apply(this,arguments);++e<i;)t[e](this,r)}t=E(t).map(T);var i=t.length;return"function"==typeof n?r:e}function T(t){var n=S(t);return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);var i=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(i)||e.setAttribute("class",A(i+" "+t))):e.setAttribute("class",A(i.replace(n," ")))}}function C(t,n,e){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,e)}function o(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}return null==n?r:"function"==typeof n?o:i}function L(t,n){function e(){delete this[t]}function r(){this[t]=n}function i(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return null==n?e:"function"==typeof n?i:r}function P(t){function n(){var n=this.ownerDocument,e=this.namespaceURI;return e===ut&&n.documentElement.namespaceURI===ut?n.createElement(t):n.createElementNS(e,t)}function e(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=U.ns.qualify(t)).local?e:n}function O(){var t=this.parentNode;t&&t.removeChild(this)}function q(){this._=Object.create(null)}function M(t){return{__data__:t}}function D(t){return function(){return it(this,t)}}function $(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function k(t){return arguments.length||(t=$),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function V(t,n){for(var e=0,r=t.length;e<r;e++)for(var i,o=t[e],u=0,a=o.length;u<a;u++)(i=o[u])&&n(i,u,e);return t}function R(t){return nt(t,st),t}function X(t){var n,e;return function(r,i,o){var u,a=t[o].update,s=a.length;for(o!=e&&(e=o,n=0),i>=n&&(n=i+1);!(u=a[n])&&++n<s;);return u}}function j(t,n,e){function r(){var n=this[u];n&&(this.removeEventListener(t,n,n.$),delete this[u])}function i(){var i=s(n,Z(arguments));r.call(this),this.addEventListener(t,this[u]=i,i.$=e),i._=n}function o(){var n,e=new RegExp("^__on([^.]+)"+U.requote(t)+"$");for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i.$),delete this[r]}}var u="__on"+t,a=t.indexOf("."),s=H;a>0&&(t=t.slice(0,a));var c=ct.get(t);return c&&(t=c,s=Y),a?n?i:r:n?v:o}function H(t,n){return function(e){var r=U.event;U.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{U.event=r}}}function Y(t,n){var e=H(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function B(e){var r=".dragsuppress-"+ ++ft,o="click"+r,u=U.select(n(e)).on("touchmove"+r,g).on("dragstart"+r,g).on("selectstart"+r,g);if(null==lt&&(lt=!("onselectstart"in e)&&i(e.style,"userSelect")),lt){var a=t(e).style,s=a[lt];a[lt]="none"}return function(t){if(u.on(r,null),lt&&(a[lt]=s),t){var n=function(){u.on(o,null)};u.on(o,function(){g(),n()},!0),setTimeout(n,0)}}}function G(t,e){e.changedTouches&&(e=e.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(ht<0){var o=n(t);if(o.scrollX||o.scrollY){r=U.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var u=r[0][0].getScreenCTM();ht=!(u.f||u.e),r.remove()}}return ht?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function I(){return U.event.changedTouches[0].identifier}var U={version:"3.5.17"},K=this.document;U.rebind=function(t,n){for(var e,i=1,o=arguments.length;++i<o;)t[e=arguments[i]]=r(t,n,n[e]);return t};var W=["webkit","ms","moz","Moz","o","O"];U.map=function(t,n){var e=new u;if(t instanceof u)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n.call(t,r=t[i],i),r)}else for(var a in t)e.set(a,t[a]);return e};var F="__proto__",J="\0";o(u,{has:c,get:function(t){return this._[a(t)]},set:function(t,n){return this._[a(t)]=n},remove:l,keys:f,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:s(n),value:this._[n]});return t},size:h,empty:p,forEach:function(t){for(var n in this._)t.call(this,s(n),this._[n])}});var Q=[].slice,Z=function(t){return Q.call(t)};U.dispatch=function(){for(var t=new d,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=_(t);return t},d.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},U.event=null,U.requote=function(t){return t.replace(tt,"\\$&")};var tt=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,nt={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},et=function(t,n){return n.querySelector(t)},rt=function(t,n){return n.querySelectorAll(t)},it=function(t,n){var e=t.matches||t[i(t,"matchesSelector")];return(it=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(et=function(t,n){return Sizzle(t,n)[0]||null},rt=Sizzle,it=Sizzle.matchesSelector),U.selection=function(){return U.select(K.documentElement)};var ot=U.selection.prototype=[];ot.select=function(t){var n,e,r,i,o=[];t=x(t);for(var u=-1,a=this.length;++u<a;){o.push(n=[]),n.parentNode=(r=this[u]).parentNode;for(var s=-1,c=r.length;++s<c;)(i=r[s])?(n.push(e=t.call(i,i.__data__,s,u)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return w(o)},ot.selectAll=function(t){var n,e,r=[];t=b(t);for(var i=-1,o=this.length;++i<o;)for(var u=this[i],a=-1,s=u.length;++a<s;)(e=u[a])&&(r.push(n=Z(t.call(e,e.__data__,a,i))),n.parentNode=e);return w(r)};var ut="http://www.w3.org/1999/xhtml",at={svg:"http://www.w3.org/2000/svg",xhtml:ut,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};U.ns={prefix:at,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),at.hasOwnProperty(e)?{space:at[e],local:t}:t}},ot.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return t=U.ns.qualify(t),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(N(n,t[n]));return this}return this.each(N(t,n))},ot.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=E(t)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!S(t[i]).test(n))return!1;return!0}for(n in t)this.each(z(n,t[n]));return this}return this.each(z(t,n))},ot.style=function(t,e,r){var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(e="");for(r in t)this.each(C(r,t[r],e));return this}if(i<2){var o=this.node();return n(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(C(t,e,r))},ot.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(L(n,t[n]));return this}return this.each(L(t,n))},ot.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},ot.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},ot.append=function(t){return t=P(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ot.insert=function(t,n){return t=P(t),n=x(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},ot.remove=function(){return this.each(O)},U.set=function(t){var n=new q;if(t)for(var e=0,r=t.length;e<r;++e)n.add(t[e]);return n},o(q,{has:c,add:function(t){return this._[a(t+="")]=!0,t},remove:l,values:f,size:h,empty:p,forEach:function(t){for(var n in this._)t.call(this,s(n))}}),ot.data=function(t,n){function e(t,e){var r,i,o,a=t.length,f=e.length,h=Math.min(a,f),p=new Array(f),v=new Array(f),d=new Array(a);if(n){var _,g=new u,y=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(g.has(_=n.call(i,i.__data__,r))?d[r]=i:g.set(_,i),y[r]=_);for(r=-1;++r<f;)(i=g.get(_=n.call(e,o=e[r],r)))?!0!==i&&(p[r]=i,i.__data__=o):v[r]=M(o),g.set(_,!0);for(r=-1;++r<a;)r in y&&!0!==g.get(y[r])&&(d[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],o=e[r],i?(i.__data__=o,p[r]=i):v[r]=M(o);for(;r<f;++r)v[r]=M(e[r]);for(;r<a;++r)d[r]=t[r]}v.update=p,v.parentNode=p.parentNode=d.parentNode=t.parentNode,s.push(v),c.push(p),l.push(d)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var s=R([]),c=w([]),l=w([]);if("function"==typeof t)for(;++o<a;)e(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)e(r=this[o],t);return c.enter=function(){return s},c.exit=function(){return l},c},ot.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ot.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=D(t));for(var o=0,u=this.length;o<u;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var a=0,s=e.length;a<s;a++)(r=e[a])&&t.call(r,r.__data__,a,o)&&n.push(r)}return w(i)},ot.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];--i>=0;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},U.ascending=$,ot.sort=function(t){t=k.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},ot.each=function(t){return V(this,function(n,e,r){t.call(n,n.__data__,e,r)})},ot.call=function(t){var n=Z(arguments);return t.apply(n[0]=this,n),this},ot.empty=function(){return!this.node()},ot.node=function(){for(var t=0,n=this.length;t<n;t++)for(var e=this[t],r=0,i=e.length;r<i;r++){var o=e[r];if(o)return o}return null},ot.size=function(){var t=0;return V(this,function(){++t}),t};var st=[];U.selection.enter=R,U.selection.enter.prototype=st,st.append=ot.append,st.empty=ot.empty,st.node=ot.node,st.call=ot.call,st.size=ot.size,st.select=function(t){for(var n,e,r,i,o,u=[],a=-1,s=this.length;++a<s;){r=(i=this[a]).update,u.push(n=[]),n.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(o=i[c])?(n.push(r[c]=e=t.call(i.parentNode,o.__data__,c,a)),e.__data__=o.__data__):n.push(null)}return w(u)},st.insert=function(t,n){return arguments.length<2&&(n=X(this)),ot.insert.call(this,t,n)},U.select=function(n){var e;return"string"==typeof n?(e=[et(n,K)],e.parentNode=K.documentElement):(e=[n],e.parentNode=t(n)),w([e])},U.selectAll=function(t){var n;return"string"==typeof t?(n=Z(rt(t,K)),n.parentNode=K.documentElement):(n=Z(t),n.parentNode=null),w([n])},ot.on=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(n=!1);for(e in t)this.each(j(e,t[e],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(j(t,n,e))};var ct=U.map({mouseenter:"mouseover",mouseleave:"mouseout"});K&&ct.forEach(function(t){"on"+t in K&&ct.remove(t)});var lt,ft=0;U.mouse=function(t){return G(t,y())};var ht=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;U.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=y().changedTouches),n)for(var r,i=0,o=n.length;i<o;++i)if((r=n[i]).identifier===e)return G(t,r)},U.behavior={},U.behavior.drag=function(){function t(){this.on("mousedown.drag",u).on("touchstart.drag",a)}function r(t,n,e,r,u){return function(){function a(){var t,e,r=n(h,d);r&&(t=r[0]-m[0],e=r[1]-m[1],v|=t|e,m=r,p({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:t,dy:e}))}function s(){n(h,d)&&(g.on(r+_,null).on(u+_,null),y(v),p({type:"dragend"}))}var c,l=this,f=U.event.target.correspondingElement||U.event.target,h=l.parentNode,p=i.of(l,arguments),v=0,d=t(),_=".drag"+(null==d?"":"-"+d),g=U.select(e(f)).on(r+_,a).on(u+_,s),y=B(f),m=n(h,d);o?(c=o.apply(l,arguments),c=[c.x-m[0],c.y-m[1]]):c=[0,0],p({type:"dragstart"})}}var i=m(t,"drag","dragstart","dragend"),o=null,u=r(v,U.mouse,n,"mousemove","mouseup"),a=r(I,U.touch,e,"touchmove","touchend");return t.origin=function(n){return arguments.length?(o=n,t):o},U.rebind(t,i,"on")},"function"==typeof define&&define.amd?(this.d3=U,define(U)):"object"==typeof module&&module.exports?module.exports=U:this.d3=U}();

},{}],180:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),AbstractFile=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getBytes",value:function(e,t){throw new TypeError("Method getBytes is not implemented")}},{key:"getAll",value:function(){throw new TypeError("Method getAll is not implemented")}},{key:"getAllString",value:function(){throw new TypeError("Method getAllString is not implemented")}},{key:"getSize",value:function(){throw new TypeError("Method getSize is not implemented")}}]),e}();module.exports=AbstractFile;

},{}],181:[function(require,module,exports){
"use strict";function strToStrand(t){return t&&"+"==t?"+":t&&"-"==t?"-":"."}function ga4ghStrandToStrand(t){return t&&"POS_STRAND"==t?"+":t&&"NEG_STRAND"==t?"-":"."}Object.defineProperty(exports,"__esModule",{value:!0}),module.exports={strToStrand:strToStrand,ga4ghStrandToStrand:ga4ghStrandToStrand};

},{}],182:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),_utils=require("./utils"),ContigInterval=function(){function t(n,e,r){_classCallCheck(this,t),this.contig=n,this.interval=new _Interval2.default(e,r)}return _createClass(t,[{key:"start",value:function(){return this.interval.start}},{key:"stop",value:function(){return this.interval.stop}},{key:"length",value:function(){return this.interval.length()}},{key:"intersects",value:function(t){return this.chrOnContig(t.contig)&&this.interval.intersects(t.interval)}},{key:"containsInterval",value:function(t){return this.chrOnContig(t.contig)&&this.interval.containsInterval(t.interval)}},{key:"isAdjacentTo",value:function(t){return this.chrOnContig(t.contig)&&(this.start()==1+t.stop()||this.stop()+1==t.start())}},{key:"isCoveredBy",value:function(t){var n=this,e=t.filter(function(t){return n.chrOnContig(t.contig)}).map(function(t){return t.interval});return this.interval.isCoveredBy(e)}},{key:"containsLocus",value:function(t,n){return this.chrOnContig(t)&&this.interval.contains(n)}},{key:"chrOnContig",value:function(t){return this.contig===t||this.contig==="chr"+t||"chr"+this.contig===t}},{key:"clone",value:function(){return new t(this.contig,this.interval.start,this.interval.stop)}},{key:"complementIntervals",value:function(n){var e=this;return this.interval.complementIntervals((0,_utils.flatMap)(n,function(t){return e.chrOnContig(t.contig)?[t.interval]:[]})).map(function(n){return new t(e.contig,n.start,n.stop)})}},{key:"toString",value:function(){return this.contig+":"+this.start()+"-"+this.stop()}},{key:"toGenomeRange",value:function(){if(!("string"==typeof this.contig||this.contig instanceof String))throw"Cannot convert numeric ContigInterval to GenomeRange";return{contig:this.contig,start:this.start(),stop:this.stop()}}},{key:"round",value:function(n,e){var r=this.interval.round(n,e);return new t(this.contig,r.start,r.stop)}}],[{key:"compare",value:function(t,n){return t.contig.toString()>n.contig.toString()?-1:t.contig.toString()<n.contig.toString()?1:t.start()-n.start()}},{key:"coalesce",value:function(n){n.sort(t.compare);var e=[];return n.forEach(function(t){if(0===e.length)return void e.push(t);var n=e[e.length-1];t.intersects(n)||t.isAdjacentTo(n)?(n=e[e.length-1]=n.clone(),n.interval.stop=Math.max(t.interval.stop,n.interval.stop)):e.push(t)}),e}},{key:"fromGenomeRange",value:function(n){return new t(n.contig.toString(),n.start,n.stop)}}]),t}();module.exports=ContigInterval;

},{"./Interval":185,"./utils":225}],183:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_get=function(t,e,n){for(var r=!0;r;){var o=t,a=e,i=n;r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,a);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(i)}var l=Object.getPrototypeOf(o);if(null===l)return;t=l,e=a,n=i,r=!0,u=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_utils=require("./utils"),_utils2=_interopRequireDefault(_utils),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),Controls=function(t){function e(t){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return _inherits(e,t),_createClass(e,[{key:"makeRange",value:function(){return{contig:this.refs.contig.value,start:Number(this.refs.start.value),stop:Number(this.refs.stop.value)}}},{key:"completeRange",value:function(t){var e=this;if(t=t||{},t.start&&void 0===t.stop&&(t.stop=t.start+20,t.start-=20),t.contig){var n;!function(){var r=t.contig;(n=_underscore2.default.find(e.props.contigList,function(t){return _utils2.default.isChrMatch(r,t)}))&&(t.contig=n)}()}return _underscore2.default.extend(_underscore2.default.clone(this.props.range),t)}},{key:"handleContigChange",value:function(t){this.props.onChange(this.completeRange({contig:this.refs.contig.value}))}},{key:"handleFormSubmit",value:function(t){t.preventDefault();var e=this.completeRange(_utils2.default.parseRange(this.refs.position.value));this.props.onChange(e)}},{key:"updateRangeUI",value:function(){var t=this.props.range;if(t&&(this.refs.position.value=_utils2.default.formatInterval(new _Interval2.default(t.start,t.stop)),this.props.contigList)){var e=this.props.contigList.indexOf(t.contig);this.refs.contig.selectedIndex=e}}},{key:"zoomIn",value:function(t){t.preventDefault(),this.zoomByFactor(.5)}},{key:"zoomOut",value:function(t){t.preventDefault(),this.zoomByFactor(2)}},{key:"zoomByFactor",value:function(t){var e=this.props.range;if(e){var n=_utils2.default.scaleRange(new _Interval2.default(e.start,e.stop),t);this.props.onChange({contig:e.contig,start:n.start,stop:n.stop})}}},{key:"render",value:function(){var t=this.props.contigList?this.props.contigList.map(function(t,e){return _react2.default.createElement("option",{key:e},t)}):null;return _react2.default.createElement("form",{className:"controls",onSubmit:this.handleFormSubmit.bind(this)},_react2.default.createElement("select",{ref:"contig",onChange:this.handleContigChange.bind(this)},t)," ",_react2.default.createElement("input",{ref:"position",type:"text"})," ",_react2.default.createElement("button",{className:"btn-submit",onClick:this.handleFormSubmit.bind(this)},"Go")," ",_react2.default.createElement("div",{className:"zoom-controls"},_react2.default.createElement("button",{className:"btn-zoom-out",onClick:this.zoomOut.bind(this)})," ",_react2.default.createElement("button",{className:"btn-zoom-in",onClick:this.zoomIn.bind(this)})))}},{key:"componentDidUpdate",value:function(t){_underscore2.default.isEqual(t.range,this.props.range)||this.updateRangeUI()}},{key:"componentDidMount",value:function(){this.updateRangeUI()}}]),e}(_react2.default.Component);module.exports=Controls;

},{"./Interval":185,"./utils":225,"react":176,"underscore":178}],184:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_vizPileuputils=require("./viz/pileuputils"),_ContigInterval=require("./ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataSamRead=require("./data/SamRead"),_dataSamRead2=_interopRequireDefault(_dataSamRead),OP_MAP={ALIGNMENT_MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",CLIP_SOFT:"S",CLIP_HARD:"H",PAD:"P",SEQUENCE_MATCH:"=",SEQUENCE_MISMATCH:"X"},GA4GHAlignment=function(){function e(t){_classCallCheck(this,e),this.alignment=t,this.pos=parseInt(t.alignment.position.position),this.ref=t.alignment.position.referenceName,this.name=t.fragmentName,this.cigarOps=t.alignment.cigar.map(function(e){var t=e.operation,n=e.operationLength;return{op:OP_MAP[t],length:parseInt(n)}}),this._interval=new _ContigInterval2.default(this.ref,this.pos,this.pos+this.getReferenceLength()-1)}return _createClass(e,[{key:"getKey",value:function(){return e.keyFromGA4GHResponse(this.alignment)}},{key:"getStrand",value:function(){return"NEG_STRAND"==this.alignment.alignment.position.strand?"-":"+"}},{key:"getQualityScores",value:function(){return this.alignment.alignedQuality}},{key:"getSequence",value:function(){return this.alignment.alignedSequence}},{key:"getInterval",value:function(){return this._interval}},{key:"intersects",value:function(e){return e.intersects(this.getInterval())}},{key:"getReferenceLength",value:function(){return _dataSamRead2.default.referenceLengthFromOps(this.cigarOps)}},{key:"getMateProperties",value:function(){var e=this.alignment.nextMatePosition;return e&&{ref:e.referenceName,pos:parseInt(e.position),strand:"NEG_STRAND"==e.strand?"-":"+"}}},{key:"getInferredInsertSize",value:function(){var e=this.getMateProperties();if(e&&e.ref==this.ref){var t=this._interval.start(),n=this._interval.stop(),r=e.pos,a=r+this.getSequence().length;return Math.max(n,a)-Math.min(t,r)}return 0}},{key:"getCoverage",value:function(e){return{range:this.getInterval(),opInfo:(0,_vizPileuputils.getOpInfo)(this,e)}}}],[{key:"keyFromGA4GHResponse",value:function(e){return e.fragmentName+":"+e.readNumber}}]),e}();module.exports=GA4GHAlignment;

},{"./ContigInterval":182,"./data/SamRead":194,"./viz/pileuputils":243}],185:[function(require,module,exports){
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}(),Interval=function(){function t(n,r){_classCallCheck(this,t),this.start=n,this.stop=r}return _createClass(t,[{key:"length",value:function(){return Math.max(0,this.stop-this.start+1)}},{key:"intersect",value:function(n){return new t(Math.max(this.start,n.start),Math.min(this.stop,n.stop))}},{key:"intersects",value:function(t){return this.start<=t.stop&&t.start<=this.stop}},{key:"contains",value:function(t){return t>=this.start&&t<=this.stop}},{key:"containsInterval",value:function(t){return this.contains(t.start)&&this.contains(t.stop)}},{key:"round",value:function(n,r){var e=r?0:1,s=function(t){return t-t%n};return new t(Math.max(e,s(this.start)),s(this.stop+n-1))}},{key:"clone",value:function(){return new t(this.start,this.stop)}},{key:"isCoveredBy",value:function(t){for(var n=this.clone(),r=0;r<t.length;r++){var e=t[r];if(r&&e.start<t[r-1].start)throw"isCoveredBy must be called with sorted ranges";if(e.start>n.start)return!1;if(n.start=Math.max(n.start,e.stop+1),n.length()<=0)return!0}return!1}},{key:"subtract",value:function(n){return this.intersects(n)?this.containsInterval(n)?[new t(this.start,n.start-1),new t(n.stop+1,this.stop)].filter(function(t){return t.length()>0}):n.containsInterval(this)?[]:n.start<this.start?[new t(n.stop+1,this.stop)]:[new t(this.start,n.start-1)]:[this]}},{key:"complementIntervals",value:function(t){var n=[this];return t.forEach(function(t){var r=[];n.forEach(function(n){r=r.concat(n.subtract(t))}),n=r}),n}},{key:"toString",value:function(){return"["+this.start+", "+this.stop+"]"}}],[{key:"intersectAll",value:function(t){if(!t.length)throw new Error("Tried to intersect zero intervals");var n=t[0].clone();return t.slice(1).forEach(function(t){var r=t.start,e=t.stop;n.start=Math.max(r,n.start),n.stop=Math.min(e,n.stop)}),n}},{key:"boundingInterval",value:function(t){if(!t.length)throw new Error("Tried to bound zero intervals");var n=t[0].clone();return t.slice(1).forEach(function(t){var r=t.start,e=t.stop;n.start=Math.min(r,n.start),n.stop=Math.max(e,n.stop)}),n}}]),t}();module.exports=Interval;

},{}],186:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var i=e,o=t,u=r;n=!1,null===i&&(i=Function.prototype);var l=Object.getOwnPropertyDescriptor(i,o);if(void 0!==l){if("value"in l)return l.value;var a=l.get;if(void 0===a)return;return a.call(u)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=o,r=u,n=!0,l=f=void 0}},_q=require("q"),_q2=_interopRequireDefault(_q),_AbstractFile2=require("./AbstractFile"),_AbstractFile3=_interopRequireDefault(_AbstractFile2),LocalStringFile=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.fileLength=e.length,this.buffer=new ArrayBuffer(e.length),this.content=e;for(var r=new Uint8Array(this.buffer),n=0;n<this.fileLength;n++)r[n]=e.charCodeAt(n)}return _inherits(t,e),_createClass(t,[{key:"getBytes",value:function(e,t){if(t<0)return _q2.default.reject("Requested <0 bytes ("+t+")");var r=e+t-1;-1!=this.fileLength&&(r=Math.min(this.fileLength-1,r));var n=this.getFromCache(e,r);return _q2.default.when(n)}},{key:"getAll",value:function(){var e=this.getFromCache(0,this.fileLength-1);return _q2.default.when(e)}},{key:"getAllString",value:function(){return _q2.default.when(this.content)}},{key:"getSize",value:function(){return _q2.default.when(this.fileLength)}},{key:"getFromCache",value:function(e,t){return this.buffer.slice(e,t+1)}}]),t}(_AbstractFile3.default);module.exports=LocalStringFile;

},{"./AbstractFile":180,"q":48}],187:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var a=e,c=t,o=r;n=!1,null===a&&(a=Function.prototype);var u=Object.getOwnPropertyDescriptor(a,c);if(void 0!==u){if("value"in u)return u.value;var i=u.get;if(void 0===i)return;return i.call(o)}var l=Object.getPrototypeOf(a);if(null===l)return;e=l,t=c,r=o,n=!0,u=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),Menu=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"clickHandler",value:function(e,t){t.preventDefault();var r=this.props.items[e];"string"!=typeof r&&this.props.onSelect(r.key)}},{key:"render",value:function(){var e=this,t=function(t){return e.clickHandler.bind(e,t)},r=[];return this.props.header&&r.push(_react2.default.createElement("div",{key:"header",className:"menu-header"},this.props.header)),r=r.concat(this.props.items.map(function(e,r){if("string"==typeof e)return _react2.default.createElement("div",{key:r,className:"menu-separator"});var n="check"+(e.checked?" checked":"");return _react2.default.createElement("div",{key:r,className:"menu-item",onClick:t(r)},_react2.default.createElement("span",{className:n}),_react2.default.createElement("span",{className:"menu-item-label"},e.label))})),_react2.default.createElement("div",{className:"menu"},r)}}]),t}(_react2.default.Component);module.exports=Menu;

},{"react":176}],188:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var u,s=e[Symbol.iterator]();!(n=(u=s.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var i=e,o=t,u=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var a=s.get;if(void 0===a)return;return a.call(u)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,r=u,n=!0,s=l=void 0}},_q=require("q"),_q2=_interopRequireDefault(_q),_AbstractFile2=require("./AbstractFile"),_AbstractFile3=_interopRequireDefault(_AbstractFile2),RemoteFile=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e,this.fileLength=-1,this.chunks=[],this.numNetworkRequests=0}return _inherits(t,e),_createClass(t,[{key:"getBytes",value:function(e,t){if(t<0)return _q2.default.reject("Requested <0 bytes ("+t+") from "+this.url);var r=e+t-1;-1!=this.fileLength&&(r=Math.min(this.fileLength-1,r));var n=this.getFromCache(e,r);return n?_q2.default.when(n):this.getFromNetwork(e,r)}},{key:"getAll",value:function(){var e=this;if(-1!=this.fileLength){var t=this.getFromCache(0,this.fileLength-1);if(t)return _q2.default.when(t)}var r=new XMLHttpRequest;return r.open("GET",this.url),r.responseType="arraybuffer",this.promiseXHR(r).then(function(t){var r=_slicedToArray(t,1),n=r[0];return e.fileLength=n.byteLength,e.chunks=[{start:0,stop:e.fileLength-1,buffer:n}],n})}},{key:"getAllString",value:function(){var e=new XMLHttpRequest;return e.open("GET",this.url),this.promiseXHR(e).then(function(e){return _slicedToArray(e,1)[0]})}},{key:"getSize",value:function(){if(-1!=this.fileLength)return _q2.default.when(this.fileLength);var e=new XMLHttpRequest;return e.open("HEAD",this.url),this.promiseXHR(e).then(function(){var t=e.getResponseHeader("Content-Length");if(null!==t)return Number(t);throw"Remote resource has unknown length"})}},{key:"getFromCache",value:function(e,t){for(var r=0;r<this.chunks.length;r++){var n=this.chunks[r];if(n.start<=e&&n.stop>=t)return n.buffer.slice(e-n.start,t-n.start+1)}return null}},{key:"getFromNetwork",value:function(e,t){var r=this,n=t-e+1;if(n>5e7)throw"Monster request: Won't fetch "+n+" bytes from "+this.url;var i=new XMLHttpRequest;return i.open("GET",this.url),i.responseType="arraybuffer",i.setRequestHeader("Range","bytes="+e+"-"+t),this.promiseXHR(i).then(function(t){var n=_slicedToArray(t,1),o=n[0],u={start:e,stop:e+o.byteLength-1,buffer:o};r.chunks.push(u);var s=r._getLengthFromContentRange(i);return null!==s&&void 0!==s&&(-1!=r.fileLength&&r.fileLength!=s?console.warn("Size of remote file "+r.url+" changed from "+r.fileLength+" to "+s):r.fileLength=s),o})}},{key:"promiseXHR",value:function(e){var t=this.url,r=_q2.default.defer();return e.addEventListener("load",function(e){this.status>=400?r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText):r.resolve([this.response,e])}),e.addEventListener("error",function(e){r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText)}),this.numNetworkRequests++,e.send(),r.promise}},{key:"_getLengthFromContentRange",value:function(e){if(!/Content-Range/i.exec(e.getAllResponseHeaders()))return null;var t=e.getResponseHeader("Content-Range"),r=/\/(\d+)$/.exec(t);return r?Number(r[1]):(console.warn("Received improper Content-Range value for "+this.url+": "+t),null)}},{key:"clearCache",value:function(){this.chunks=[]}}]),t}(_AbstractFile3.default);module.exports=RemoteFile;

},{"./AbstractFile":180,"q":48}],189:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_ContigInterval=require("./ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),MONSTER_REQUEST=5e6,RemoteRequest=function(){function e(t){_classCallCheck(this,e),this.cache=require("memory-cache"),this.url=t,this.numNetworkRequests=0}return _createClass(e,[{key:"get",value:function(e,t,r){var n=r-t;if(n<=0)return _q2.default.reject("Requested <0 interval ("+n+") from "+this.url);var s=new _ContigInterval2.default(e,t,r),u=this.cache.get(s);return u?_q2.default.when(u):this.getFromNetwork(e,t,r)}},{key:"getFromNetwork",value:function(e,t,r){var n=this,s=r-t;if(s>5e6)throw"Monster request: Won't fetch "+s+" sized ranges from "+this.url;var u=new XMLHttpRequest,i=this.getEndpointFromContig(e,t,r);return u.open("GET",i),u.responseType="json",u.setRequestHeader("Content-Type","application/json"),this.promiseXHR(u).then(function(s){var u=s[0],i=new _ContigInterval2.default(e,t,r);return n.cache.put(i,u),u})}},{key:"getEndpointFromContig",value:function(e,t,r){return this.url+"/"+e+"?start="+t+"&end="+r}},{key:"promiseXHR",value:function(e){var t=this.url,r=_q2.default.defer();return e.addEventListener("load",function(e){this.status>=400?r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText):r.resolve([this.response,e])}),e.addEventListener("error",function(e){r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText)}),this.numNetworkRequests++,e.send(),r.promise}}]),e}();module.exports={RemoteRequest:RemoteRequest,MONSTER_REQUEST:MONSTER_REQUEST};

},{"./ContigInterval":182,"memory-cache":34,"q":48}],190:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_get=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;if(void 0===c)return;return c.call(o)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,a=o,n=!0,s=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_Controls=require("./Controls"),_Controls2=_interopRequireDefault(_Controls),_Menu=require("./Menu"),_Menu2=_interopRequireDefault(_Menu),_VisualizationWrapper=require("./VisualizationWrapper"),_VisualizationWrapper2=_interopRequireDefault(_VisualizationWrapper),Root=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={contigList:this.props.referenceSource.contigList(),range:null,updateSize:!1,settingsMenuKey:null},this.trackReactElements=[]}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=this;this.props.referenceSource.on("contigs",function(){e.setState({contigList:e.props.referenceSource.contigList()})}),this.state.range||this.handleRangeChange(this.props.initialRange),this.setState({contigList:this.props.referenceSource.contigList()})}},{key:"handleRangeChange",value:function(e){var t=this;e.start<0&&(e.start=0),this.props.referenceSource.normalizeRange(e).then(function(e){t.setState({range:e}),t.props.tracks.forEach(function(t){t.source.rangeChanged(e)})}).done()}},{key:"toggleSettingsMenu",value:function(e,t){this.state.settingsMenuKey==e?this.setState({settingsMenuKey:null}):this.setState({settingsMenuKey:e})}},{key:"handleSelectOption",value:function(e,t){this.setState({settingsMenuKey:null});var a=this.props.tracks[Number(e)].visualization,n=a.options,r=a.component.handleSelectOption(t,n);a.options=r,r!=n&&this.forceUpdate()}},{key:"makeDivForTrack",value:function(e,t){var a=this,n=parseInt(e),r=_react2.default.createElement(_VisualizationWrapper2.default,{visualization:t.visualization,range:this.state.range,onRangeChange:this.handleRangeChange.bind(this),source:t.source,options:t.track.options,referenceSource:this.props.referenceSource,ref:function(e){a.trackReactElements[n]=e}}),i=t.track.name||"(track name)",o=null,s=null;if(t.visualization.component.getOptionsMenu&&(o=_react2.default.createElement("span",{ref:"gear-"+e,className:"gear",onClick:this.toggleSettingsMenu.bind(this,e)},"")),this.state.settingsMenuKey==e){var c=this.refs["gear-"+e],l=c.offsetLeft,u=c.offsetWidth,p=c.offsetTop,f={position:"absolute",left:l+u+"px",top:p+"px"},h=t.visualization.component.getOptionsMenu(t.visualization.options);s=_react2.default.createElement("div",{className:"menu-container",style:f},_react2.default.createElement(_Menu2.default,{header:i,items:h,onSelect:this.handleSelectOption.bind(this,e)}))}var d=["track",t.visualization.component.displayName||"",t.track.cssClass||""].join(" ");return _react2.default.createElement("div",{key:e,className:d},_react2.default.createElement("div",{className:"track-label"},_react2.default.createElement("span",null,i),_react2.default.createElement("br",null),o,s),_react2.default.createElement("div",{className:"track-content"},r))}},{key:"render",value:function(){var e=this,t=this.props.tracks.map(function(t,a){return e.makeDivForTrack(""+a,t)});return _react2.default.createElement("div",{className:"pileup-root"},_react2.default.createElement("div",{className:"track controls"},_react2.default.createElement("div",{className:"track-label"},""),_react2.default.createElement("div",{className:"track-content"},_react2.default.createElement(_Controls2.default,{contigList:this.state.contigList,range:this.state.range,onChange:this.handleRangeChange.bind(this)}))),t)}},{key:"componentDidUpdate",value:function(e,t){if(this.state.updateSize){for(var a=0;a<this.props.tracks.length;a++)this.trackReactElements[a].setState({updateSize:this.state.updateSize});this.state.updateSize=!1}}}]),t}(_react2.default.Component);Root.displayName="Root",module.exports=Root;

},{"./Controls":183,"./Menu":187,"./VisualizationWrapper":192,"react":176}],191:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_utils=require("./utils"),CHUNK_SIZE=1e3,SequenceStore=function(){function t(){_classCallCheck(this,t),this.contigMap={}}return _createClass(t,[{key:"setRange",value:function(t,e){if(0!==t.length()){if(t.length()!=e.length)throw"setRange length mismatch";var n=this._getSequences(t.contig);n||(n=this.contigMap[t.contig]={});var r=!0,u=!1,a=void 0;try{for(var i,o=this._chunkForInterval(t.interval)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value,s=l.chunkStart+l.offset-t.start();this._setChunk(n,l,e.slice(s,s+l.length))}}catch(t){u=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(u)throw a}}}}},{key:"getAsString",value:function(t){var e=this._getSequences(t.contig);if(!e)return".".repeat(t.length());var n=this._chunkForInterval(t.interval),r="",u=!0,a=!1,i=void 0;try{for(var o,l=n[Symbol.iterator]();!(u=(o=l.next()).done);u=!0){var s=o.value,c=e[s.chunkStart];c?0===s.offset&&s.length==c.length?r+=c:r+=c.slice(s.offset,s.offset+s.length):r+=".".repeat(s.length)}}catch(t){a=!0,i=t}finally{try{!u&&l.return&&l.return()}finally{if(a)throw i}}return r}},{key:"getAsObjects",value:function(t){return _underscore2.default.object(_underscore2.default.map(this.getAsString(t),function(e,n){return[t.contig+":"+(t.start()+n),"."==e?null:e]}))}},{key:"_getChunk",value:function(t,e){return t[e]||".".repeat(CHUNK_SIZE)}},{key:"_chunkForInterval",value:function(t){var e=t.start%CHUNK_SIZE,n=t.start-e,r=[{chunkStart:n,offset:e,length:Math.min(CHUNK_SIZE-e,t.length())}];for(n+=CHUNK_SIZE;n<=t.stop;n+=CHUNK_SIZE)r.push({chunkStart:n,offset:0,length:Math.min(CHUNK_SIZE,t.stop-n+1)});return r}},{key:"_setChunk",value:function(t,e,n){if(0===e.offset&&n.length==CHUNK_SIZE)return void(t[e.chunkStart]=n);var r=this._getChunk(t,e.chunkStart);t[e.chunkStart]=r.slice(0,e.offset)+n+r.slice(e.offset+n.length)}},{key:"_getSequences",value:function(t){return this.contigMap[t]||this.contigMap[(0,_utils.altContigName)(t)]||null}}]),t}();module.exports=SequenceStore;

},{"./utils":225,"underscore":178}],192:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),_get=function(e,t,i){for(var r=!0;r;){var n=e,a=t,o=i;r=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=a,i=o,r=!0,s=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_vizD3utils=require("./viz/d3utils"),_vizD3utils2=_interopRequireDefault(_vizD3utils),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_libMinid3=require("../lib/minid3"),_libMinid32=_interopRequireDefault(_libMinid3),VisualizationWrapper=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.hasDragBeenInitialized=!1,this.state={updateSize:!1,width:0,height:0}}return _inherits(t,e),_createClass(t,[{key:"updateSize",value:function(){var e=_reactDom2.default.findDOMNode(this);if(e&&e instanceof Element){var t=e.parentNode;t&&t instanceof HTMLElement&&this.setState({updateSize:!1,width:t.offsetWidth,height:t.offsetHeight})}}},{key:"componentDidMount",value:function(){var e=this;this.onResizeListener=function(){return e.updateSize()},window.addEventListener("resize",this.onResizeListener),this.updateSize(),this.props.range&&!this.hasDragBeenInitialized&&this.addDragInterface()}},{key:"componentDidUpdate",value:function(){this.props.range&&!this.hasDragBeenInitialized&&this.addDragInterface()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResizeListener)}},{key:"getScale",value:function(){return this.props.range?_vizD3utils2.default.getTrackScale(this.props.range,this.state.width):function(e){return e}}},{key:"addDragInterface",value:function(){function e(){s()}var t=this;this.hasDragBeenInitialized=!0;var i,r,n=_reactDom2.default.findDOMNode(this),a=0,o=function(){_libMinid32.default.event.sourceEvent.stopPropagation(),a=0,i=_underscore2.default.clone(t.props.range),r=t.getScale()},s=function(){if(r&&i){var e=r.invert(-a),n=Math.round(e),o=r(e)-r(n),s={contig:i.contig,start:n,stop:n+(i.stop-i.start),offsetPx:o};t.props.onRangeChange(s)}},u=function(){a+=_libMinid32.default.event.dx,s()},l=_libMinid32.default.behavior.drag().on("dragstart",o).on("drag",u).on("dragend",e);_libMinid32.default.select(n).call(l).on("click",this.handleClick.bind(this))}},{key:"handleClick",value:function(){_libMinid32.default.event.defaultPrevented&&_libMinid32.default.event.stopPropagation()}},{key:"componentWillUpdate",value:function(e,t){t.updateSize&&this.updateSize()}},{key:"render",value:function(){var e=this.props.range,t=this.props.visualization.component;if(!e)return null!=t.displayName?_react2.default.createElement(EmptyTrack,{className:t.displayName}):_react2.default.createElement(EmptyTrack,{className:"EmptyTrack"});var i=_underscore2.default.extend(_underscore2.default.clone(this.props.visualization.options),this.props.options),r=_react2.default.createElement(t,{range:e,source:this.props.source,referenceSource:this.props.referenceSource,width:this.state.width,height:this.state.height,options:i});return _react2.default.createElement("div",{className:"drag-wrapper"},r)}}]),t}(_react2.default.Component);VisualizationWrapper.displayName="VisualizationWrapper";var EmptyTrack=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props.className+" empty";return _react2.default.createElement("div",{className:e})}}]),t}(_react2.default.Component);module.exports=VisualizationWrapper;

},{"../lib/minid3":179,"./viz/d3utils":242,"react":176,"react-dom":49,"underscore":178}],193:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function parseHeader(e){return new _jbinary2.default(e,_formatsBbi2.default.TYPE_SET).read("Header")}function parseCirTree(e){return new _jbinary2.default(e,_formatsBbi2.default.TYPE_SET).read("CirTree")}function generateContigMap(e){var t=e.chromosomeTree.nodes.contents;if(!t)throw"Invalid chromosome tree";return _underscore2.default.object(t.map(function(e){var t=e.id;return[e.key.replace(/\0.*/,""),t]}))}function reverseContigMap(e){var t=[];return _underscore2.default.each(e,function(e,r){t[e]=r}),t}function extractFeaturesFromBlock(e,t,r,n){var a=r.offset-t.start,i=a+r.size,o=e.slice(a+(n?2:0),i),u=n?_pakoLibInflate2.default.inflateRaw(new Uint8Array(o)):o;return new _jbinary2.default(u,_formatsBbi2.default.TYPE_SET).read("BedBlock")}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_pakoLibInflate=require("pako/lib/inflate"),_pakoLibInflate2=_interopRequireDefault(_pakoLibInflate),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_formatsBbi=require("./formats/bbi"),_formatsBbi2=_interopRequireDefault(_formatsBbi),ImmediateBigBed=function(){function e(t,r,n,a){_classCallCheck(this,e),this.remoteFile=t,this.header=r,this.cirTree=n,this.contigMap=a,this.chrIdToContig=reverseContigMap(a)}return _createClass(e,[{key:"getContigId",value:function(e){if(e in this.contigMap)return this.contigMap[e];var t="chr"+e;if(t in this.contigMap)return this.contigMap[t];throw"Invalid contig "+e}},{key:"getChrIdInterval",value:function(e){return new _ContigInterval2.default(this.getContigId(e.contig),e.start(),e.stop())}},{key:"getContigInterval",value:function(e){return new _ContigInterval2.default(this.chrIdToContig[e.contig],e.start(),e.stop())}},{key:"attachContigToBedRows",value:function(e){var t=this;return e.map(function(e){return{contig:t.chrIdToContig[e.chrId],start:e.start,stop:e.stop,rest:e.rest}})}},{key:"findOverlappingBlocks",value:function(e){var t=[],r=[[e.contig,e.start()],[e.contig,e.stop()]];return function e(n){if(n.contents)n.contents.forEach(e);else{var a=[[n.startChromIx,n.startBase],[n.endChromIx,n.endBase]];_utils2.default.tupleRangeOverlaps(a,r)&&t.push(n)}}(this.cirTree.blocks),t}},{key:"fetchFeaturesByBlock",value:function(e){var t=this.findOverlappingBlocks(e);if(0===t.length)return _q2.default.when([]);var r=_Interval2.default.boundingInterval(t.map(function(e){return new _Interval2.default(+e.offset,e.offset+e.size)})),n=this.header.uncompressBufSize>0;return this.remoteFile.getBytes(r.start,r.length()).then(function(e){return t.map(function(t){var a=extractFeaturesFromBlock(e,r,t,n);if(t.startChromIx!=t.endChromIx)throw"Can't handle blocks which span chromosomes!";return{range:new _ContigInterval2.default(t.startChromIx,t.startBase,t.endBase),rows:a}})})}},{key:"fetchFeatures",value:function(e){var t=this;return this.fetchFeaturesByBlock(e).then(function(r){var n=_underscore2.default.flatten(r.map(function(e){return e.rows}));return n=n.filter(function(t){var r=new _ContigInterval2.default(t.chrId,t.start,t.stop-1);return e.intersects(r)}),t.attachContigToBedRows(n)})}},{key:"getFeaturesInRange",value:function(e){return this.fetchFeatures(this.getChrIdInterval(e))}},{key:"getFeatureBlocksOverlapping",value:function(e){var t=this,r=this.getChrIdInterval(e);return this.fetchFeaturesByBlock(r).then(function(e){return e.map(function(e){return{range:t.getContigInterval(e.range),rows:t.attachContigToBedRows(e.rows)}})})}}]),e}(),BigBed=function(){function e(t){var r=this;_classCallCheck(this,e),this.remoteFile=new _RemoteFile2.default(t),this.header=this.remoteFile.getBytes(0,65536).then(parseHeader),this.contigMap=this.header.then(generateContigMap),this.cirTree=this.header.then(function(e){var t=e.unzoomedIndexOffset,n=e.zoomHeaders[0],a=n?n.dataOffset-t:4096;return r.remoteFile.getBytes(t,a).then(parseCirTree)}),this.immediate=_q2.default.all([this.header,this.cirTree,this.contigMap]).then(function(e){var t=_slicedToArray(e,3),n=t[0],a=t[1],i=t[2],o=i;return new ImmediateBigBed(r.remoteFile,n,a,o)}),this.immediate.done()}return _createClass(e,[{key:"getFeaturesInRange",value:function(e,t,r){var n=new _ContigInterval2.default(e,t,r);return this.immediate.then(function(e){return e.getFeaturesInRange(n)})}},{key:"getFeatureBlocksOverlapping",value:function(e){return this.immediate.then(function(t){return t.getFeatureBlocksOverlapping(e)})}}]),e}();module.exports=BigBed;

},{"../ContigInterval":182,"../Interval":185,"../RemoteFile":188,"../utils":225,"./formats/bbi":202,"jbinary":32,"pako/lib/inflate":35,"q":48,"underscore":178}],194:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function strandFlagToString(e){return e?"-":"+"}function makeCigarString(e){return e.map(function(e){var t=e.op;return e.length+t}).join("")}function makeAsciiPhred(e){return 0===e.length?"":_underscore2.default.every(e,function(e){return 255==e})?"*":e.map(function(e){return String.fromCharCode(33+e)}).join("")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_vizPileuputils=require("../viz/pileuputils"),CIGAR_OPS=["M","I","D","N","S","H","P","=","X"],SEQUENCE_VALUES=["=","A","C","M","G","R","S","V","T","W","Y","H","K","D","B","N"],SamRead=function(){function e(t,r,n){_classCallCheck(this,e),this.buffer=t,this.offset=r;var i=this._getJDataView();this.refID=i.getInt32(0),this.ref=n,this.pos=i.getInt32(4),this.l_seq=i.getInt32(16),this.cigarOps=this._getCigarOps(),this.name=this._getName()}return _createClass(e,[{key:"toString",value:function(){var e=this.pos+this.l_seq;return this.ref+":"+(1+this.pos)+"-"+e}},{key:"_getJDataView",value:function(){var e=this.buffer;return new _jdataview2.default(e,0,e.byteLength,!0)}},{key:"getKey",value:function(){return this.offset.toString()}},{key:"_getName",value:function(){var e=this._getJDataView(),t=e.getUint8(8);return e.seek(32),e.getString(t-1)}},{key:"getFlag",value:function(){return this._getJDataView().getUint16(14)}},{key:"getInferredInsertSize",value:function(){return this._getJDataView().getUint16(28)}},{key:"getStrand",value:function(){return strandFlagToString(this.getFlag()&_formatsBamTypes2.default.Flags.READ_STRAND)}},{key:"getFull",value:function(){if(this._full)return this._full;var e=new _jbinary2.default(this.buffer,_formatsBamTypes2.default.TYPE_SET),t=e.read(_formatsBamTypes2.default.ThickAlignment,0);return this._full=t,t}},{key:"getInterval",value:function(){return this._interval?this._interval:new _ContigInterval2.default(this.ref,this.pos,this.pos+this.getReferenceLength()-1)}},{key:"intersects",value:function(e){return e.intersects(this.getInterval())}},{key:"_getCigarOps",value:function(){for(var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=32+t,i=new Array(r),a=0;a<r;a++){var u=e.getUint32(n+4*a);i[a]={op:CIGAR_OPS[15&u],length:u>>4}}return i}},{key:"getQualityScores",value:function(){var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=e.getInt32(16),i=32+t+4*r+Math.ceil(n/2);return e.getBytes(n,i,!0,!0)}},{key:"getCigarString",value:function(){return makeCigarString(this.getFull().cigar)}},{key:"getQualPhred",value:function(){return makeAsciiPhred(this.getQualityScores())}},{key:"getSequence",value:function(){if(this._seq)return this._seq;for(var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=e.getInt32(16),i=32+t+4*r,a=new Array(n),u=Math.ceil(n/2),s=0;s<u;s++){var l=e.getUint8(i+s);a[2*s]=SEQUENCE_VALUES[l>>4],2*s+1<n&&(a[2*s+1]=SEQUENCE_VALUES[15&l])}var g=a.join("");return this._seq=g,g}},{key:"getReferenceLength",value:function(){return e.referenceLengthFromOps(this.cigarOps)}},{key:"getCoverage",value:function(e){return{range:this.getInterval(),opInfo:(0,_vizPileuputils.getOpInfo)(this,e)}}},{key:"getMateProperties",value:function(){var e=this._getJDataView(),t=e.getUint16(14);if(!(t&_formatsBamTypes2.default.Flags.READ_PAIRED))return null;var r=e.getInt32(20),n=e.getInt32(24),i=strandFlagToString(t&_formatsBamTypes2.default.Flags.MATE_STRAND);return{ref:r==this.refID?this.ref:null,pos:n,strand:i}}},{key:"debugString",value:function(){var e=this.getFull();return"Name: "+this.name+"\nFLAG: "+this.getFlag()+"\nPosition: "+this.getInterval().toString()+"\nCIGAR: "+this.getCigarString()+"\nSequence: "+e.seq+"\nQuality:  "+this.getQualPhred()+"\nTags: "+JSON.stringify(e.auxiliary,null,"  ")+"\n    "}}],[{key:"referenceLengthFromOps",value:function(e){var t=0;return e.forEach(function(e){var r=e.op,n=e.length;switch(r){case"M":case"D":case"N":case"=":case"X":t+=n}}),t}}]),e}();module.exports=SamRead;

},{"../ContigInterval":182,"../viz/pileuputils":243,"./formats/bamTypes":201,"jbinary":32,"jdataview":33,"underscore":178}],195:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function parseSequenceRecord(e,r){var t=new _jbinary2.default(e,_formatsTwoBitTypes2.default.TYPE_SET),n=t.read("SequenceRecord"),o=t.tell()+8*n.maskBlockCount+4;return{numBases:n.dnaSize,unknownBlockStarts:n.nBlockStarts,unknownBlockLengths:n.nBlockSizes,numMaskBlocks:n.maskBlockCount,maskBlockStarts:[],maskBlockLengths:[],dnaOffsetFromHeader:o,offset:r}}function parseHeader(e){var r=new _jbinary2.default(e,_formatsTwoBitTypes2.default.TYPE_SET),t=r.read("Header");return{sequenceCount:t.sequenceCount,sequences:t.sequences}}function unpackDNA(e,r,t){var n=[];n.length=4*e.byteLength;for(var o=-r,a=0;a<e.byteLength;a++)for(var u=e.getUint8(a),i=6;i>=0;i-=2){var s=BASE_PAIRS[u>>i&3];r>=0&&(n[o]=s),o++}return n.length=t,n}function markUnknownDNA(e,r,t){for(var n=r+e.length-1,o=0;o<t.unknownBlockStarts.length;o++){var a=t.unknownBlockStarts[o],u=t.unknownBlockLengths[o],i=a+u-1,s=Math.max(a,r),c=Math.min(i,n);if(!(c<s))for(var f=s;f<=c;f++)e[f-r]="N"}return e}function IncompleteChunkError(e){this.name="IncompleteChunkError",this.message=e||""}function parseWithException(e){try{return e()}catch(e){throw"RangeError"==e.name||"INDEX_SIZE_ERR"==e.name?(console.log("Error name: "+e.name),new IncompleteChunkError(e)):e}}function retryRemoteGet(e,r,t,n,o){return e.getBytes(r,t).then(o).catch(function(a){if("IncompleteChunkError"==a.name){if(t>n)throw"Couldn't parse the header from the first "+t+" bytes of the file. Corrupted 2bit file?";return retryRemoteGet(e,r,2*t,n,o)}throw a})}var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_formatsTwoBitTypes=require("./formats/twoBitTypes"),_formatsTwoBitTypes2=_interopRequireDefault(_formatsTwoBitTypes),BASE_PAIRS=["T","C","A","G"],FIRST_HEADER_CHUNKSIZE=16384,FIRST_SEQUENCE_CHUNKSIZE=4095,MAX_CHUNKSIZE=1048576;IncompleteChunkError.prototype=Object.create(Error.prototype,{constructor:{value:IncompleteChunkError,writable:!0,configurable:!0}});var TwoBit=function(){function e(r){_classCallCheck(this,e),this.remoteFile=r;var t=_q2.default.defer();this.header=t.promise,retryRemoteGet(this.remoteFile,0,FIRST_HEADER_CHUNKSIZE,MAX_CHUNKSIZE,function(e){var r=parseWithException(function(){return parseHeader(e)});t.resolve(r)}).done()}return _createClass(e,[{key:"getFeaturesInRange",value:function(e,r,t){var n=this;if(r>t)throw"Requested a 2bit range with start > stop ("+r+", "+t+")";return this._getSequenceHeader(e).then(function(e){var o=e.offset+e.dnaOffsetFromHeader,a=Math.floor(o+r/4),u=Math.ceil((t-r+1)/4)+1;return n.remoteFile.getBytes(a,u).then(function(n){return markUnknownDNA(unpackDNA(new DataView(n),r%4,t-r+1),r,e).join("")})}).then(function(e){return e})}},{key:"getContigList",value:function(){return this.header.then(function(e){return e.sequences.map(function(e){return e.name})})}},{key:"_getSequenceHeader",value:function(e){var r=this;return this.header.then(function(t){var n=_underscore2.default.findWhere(t.sequences,{name:e})||_underscore2.default.findWhere(t.sequences,{name:"chr"+e});if(null===n||void 0===n)throw"Invalid contig: "+e;var o=n;return retryRemoteGet(r.remoteFile,o.offset,FIRST_SEQUENCE_CHUNKSIZE,MAX_CHUNKSIZE,function(e){return parseWithException(function(){return parseSequenceRecord(e,o.offset)})})}).then(function(e){return e})}}]),e}();module.exports=TwoBit;

},{"./formats/twoBitTypes":204,"jbinary":32,"q":48,"underscore":178}],196:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var f=0;f<e.length;f++){var s=e[f];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,f,s){return f&&t(e.prototype,f),s&&t(e,s),e}}(),VirtualOffset=function(){function t(e,f){_classCallCheck(this,t),this.coffset=e,this.uoffset=f}return _createClass(t,[{key:"toString",value:function(){return this.coffset+":"+this.uoffset}},{key:"isLessThan",value:function(t){return this.coffset<t.coffset||this.coffset==t.coffset&&this.uoffset<t.uoffset}},{key:"isLessThanOrEqual",value:function(t){return this.coffset<=t.coffset||this.coffset==t.coffset&&this.uoffset<=t.uoffset}},{key:"isEqual",value:function(t){return this.coffset==t.coffset&&this.uoffset==t.uoffset}},{key:"compareTo",value:function(t){return this.coffset-t.coffset||this.uoffset-t.uoffset}},{key:"clone",value:function(){return new t(this.coffset,this.uoffset)}}],[{key:"fromBlob",value:function(e,f){f=f||0;var s=e[f]+256*e[f+1];return new t(e[f+2]+256*e[f+3]+65536*e[f+4]+16777216*e[f+5]+4294967296*e[f+6]+1099511627776*e[f+7],s)}}]),t}();module.exports=VirtualOffset;

},{}],197:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function computeIndexChunks(e){var n=new _jdataview2.default(e,0,e.byteLength,!0),t=1/0,r=[];n.getInt32();for(var i=n.getInt32(),u=0;u<i;u++){r.push(n.tell());for(var a=n.getInt32(),s=0;s<a;s++){n.getUint32();var o=n.getInt32();n.skip(16*o)}var h=n.getInt32();if(h){var l=_VirtualOffset2.default.fromBlob(n.getBytes(8),0),f=l.coffset+(l.uoffset?65536:0);t=f?Math.min(f,t):65536,n.skip(8*(h-1))}}return r.push(n.tell()),{chunks:_underscore2.default.zip(_underscore2.default.initial(r),_underscore2.default.rest(r)),minBlockIndex:t}}function readChunks(e){return new _jbinary2.default(e,_formatsBamTypes2.default.TYPE_SET).read("ChunksArray")}function readIntervals(e){for(var n=new Array(Math.floor(e.length/8)),t=0;t<e.length-7;t+=8)n[t>>3]=_VirtualOffset2.default.fromBlob(e,t);return n}function doChunksOverlap(e,n){return e.chunk_beg.isLessThanOrEqual(n.chunk_end)&&n.chunk_beg.isLessThanOrEqual(e.chunk_end)}function areChunksAdjacent(e,n){return e.chunk_beg.isEqual(n.chunk_end)||e.chunk_end.isEqual(n.chunk_beg)}function optimizeChunkList(e,n){e.sort(function(e,n){var t=e.chunk_beg.compareTo(n.chunk_beg);return 0===t&&(t=e.chunk_end.compareTo(n.chunk_end)),t});var t=[];return e.forEach(function(e){if(!e.chunk_end.isLessThan(n)){if(0===t.length)return void t.push(e);var r=t[t.length-1];doChunksOverlap(r,e)||areChunksAdjacent(r,e)?r.chunk_end.isLessThan(e.chunk_end)&&(r.chunk_end=e.chunk_end):t.push(e)}}),t}function reg2bins(e,n){var t,r=[];for(--n,r.push(0),t=1+(e>>26);t<=1+(n>>26);++t)r.push(t);for(t=9+(e>>23);t<=9+(n>>23);++t)r.push(t);for(t=73+(e>>20);t<=73+(n>>20);++t)r.push(t);for(t=585+(e>>17);t<=585+(n>>17);++t)r.push(t);for(t=4681+(e>>14);t<=4681+(n>>14);++t)r.push(t);return r}var _slicedToArray=function(){function e(e,n){var t=[],r=!0,i=!1,u=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){i=!0,u=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw u}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_VirtualOffset=require("./VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),ImmediateBaiFile=function(){function e(n,t,r){if(_classCallCheck(this,e),this.buffer=n,this.remoteFile=t,n)this.indexChunks=computeIndexChunks(n);else{if(!r)throw"Without index chunks, the entire BAI buffer must be loaded";this.indexChunks=r}this.indexCache=new Array(this.indexChunks.chunks.length),this.intervalsCache=new Array(this.indexChunks.chunks.length)}return _createClass(e,[{key:"getChunksForInterval",value:function(e){var n=this;if(e.contig<0||e.contig>this.indexChunks.chunks.length)return _q2.default.reject("Invalid contig "+e.contig);var t=reg2bins(e.start(),e.stop()+1);return this.indexForContig(e.contig).then(function(r){var i=_underscore2.default.chain(r.bins).filter(function(e){return t.indexOf(e.bin)>=0}).map(function(e){return readChunks(e.chunks)}).flatten().value();return i=optimizeChunkList(i,n.getIntervals(r.intervals,e.contig)[Math.max(0,Math.floor(e.start()/16384))])})}},{key:"indexForContig",value:function(e){var n=this.indexCache[e];if(n)return n;var t=_slicedToArray(this.indexChunks.chunks[e],2),r=t[0],i=t[1];return this.indexCache[e]=this.getSlice(r,i).then(function(e){return new _jbinary2.default(e,_formatsBamTypes2.default.TYPE_SET).read("BaiIndex")}),this.indexCache[e]}},{key:"getSlice",value:function(e,n){return this.buffer?_q2.default.when(this.buffer.slice(e,n)):this.remoteFile.getBytes(e,n-e+1)}},{key:"getIntervals",value:function(e,n){var t=this.intervalsCache[n];return t||(t=readIntervals(e),this.intervalsCache[n]=t,t)}}]),e}(),BaiFile=function(){function e(n,t){_classCallCheck(this,e),this.remoteFile=n,this.immediate=t?_q2.default.when(new ImmediateBaiFile(null,n,t)):n.getAll().then(function(e){return new ImmediateBaiFile(e,n,t)}),this.immediate.done()}return _createClass(e,[{key:"getChunksForInterval",value:function(e){return this.immediate.then(function(n){return n.getChunksForInterval(e)})}},{key:"getHeaderSize",value:function(){return this.immediate.then(function(e){return e.indexChunks.minBlockIndex})}}]),e}();module.exports=BaiFile;

},{"./VirtualOffset":196,"./formats/bamTypes":201,"jbinary":32,"jdataview":33,"q":48,"underscore":178}],198:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function isAlignmentInRange(e,t,n){var r=new _ContigInterval2.default(e.refID,e.pos,e.pos+e.l_seq-1);return n?t.containsInterval(r):r.intersects(t)}function readAlignment(e,t,n,r){var a=e.getInt32(t);if((t+=4)+a>e.byteLength)return null;var i=e.buffer.slice(t,t+a);return{read:new _SamRead2.default(i,n.clone(),r),readLength:4+a}}function readAlignmentsToEnd(e,t,n,r,a,i,u){var f=new _jdataview2.default(e,0,e.byteLength,!0),l=!1,o=0;a=a.clone();var s=0;try{for(;o<e.byteLength;){var c=readAlignment(f,o,a,t);if(!c)break;var d=c.read,h=c.readLength;o+=h,isAlignmentInRange(d,n,r)&&u.push(d),a.uoffset+=h;var _=i[s].buffer.byteLength;a.uoffset>=_&&(a.uoffset-=_,a.coffset+=i[s].compressedLength,s++);var g=new _ContigInterval2.default(d.refID,d.pos,d.pos+1);if(g.contig>n.contig||g.contig==n.contig&&g.start()>n.stop()){l=!0;break}}}catch(e){if(!(e instanceof RangeError))throw e}return{shouldAbort:l,nextOffset:a}}function fetchAlignments(e,t,n,r,a){function i(a){if(0===a.length)return void l.resolve(f);var o=a[0],s=o.chunk_beg.coffset,c=o.chunk_end.coffset,d=Math.min(kMaxFetch,c+65536-s);e.getBytes(s,d).then(function(d){u++,l.notify({numRequests:u});var h={filename:e.url,initialOffset:s},_=_utils2.default.inflateConcatenatedGzip(d,c-s,h),g=_[_.length-1],v=s+g.offset-1,m=null;_.length>1&&v<c&&(m={chunk_beg:new _VirtualOffset2.default(v+1,0),chunk_end:o.chunk_end});var y=_.map(function(e){return e.buffer});y[0]=y[0].slice(o.chunk_beg.uoffset);var p=_utils2.default.concatArrayBuffers(y);if(p.byteLength>0){var b=readAlignmentsToEnd(p,t,n,r,o.chunk_beg,_,f),q=b.shouldAbort,w=b.nextOffset;if(q)return void l.resolve(f);m&&(m.chunk_beg=w)}else m=null;i((null!==m?[m]:[]).concat(_underscore2.default.rest(a)))})}var u=0,f=[],l=_q2.default.defer();return i(a),l.promise}var _slicedToArray=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var u,f=e[Symbol.iterator]();!(r=(u=f.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&f.return&&f.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_bai=require("./bai"),_bai2=_interopRequireDefault(_bai),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_VirtualOffset=require("./VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),_SamRead=require("./SamRead"),_SamRead2=_interopRequireDefault(_SamRead),kMaxFetch=131072,Bam=function(){function e(t,n,r){var a=this;_classCallCheck(this,e),this.remoteFile=t,this.index=n?new _bai2.default(n,r):null,this.hasIndexChunks=!!r;var i=this.index?this.index.getHeaderSize():_q2.default.when(131070);this.header=i.then(function(e){var t=_q2.default.defer();return _q2.default.when().then(function(){t.notify({status:"Fetching BAM header"})}),_utils2.default.pipePromise(t,a.remoteFile.getBytes(0,e).then(function(e){var t=_utils2.default.inflateGzip(e);return new _jbinary2.default(t,_formatsBamTypes2.default.TYPE_SET).read("BamHeader")})),t.promise}),this.header.done()}return _createClass(e,[{key:"readAll",value:function(){return this.remoteFile.getAll().then(function(e){var t=_utils2.default.inflateGzip(e),n=new _jbinary2.default(t,_formatsBamTypes2.default.TYPE_SET),r=n.read("BamFile"),a=new _VirtualOffset2.default(0,0),i=function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength-1)};return r.alignments=r.alignments.map(function(e){var t=new _SamRead2.default(i(e.contents),a,"");return-1!=t.refID&&(t.ref=r.header.references[t.refID].name),t}),r})}},{key:"readAtOffset",value:function(e){var t=this.remoteFile.getBytes(e.coffset,kMaxFetch).then(function(t){var n=_utils2.default.inflateGzip(t);return readAlignment(new _jdataview2.default(n,0,n.byteLength,!0),e.uoffset,e,"").read});return _q2.default.all([t,this.header]).then(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return n.ref=r.references[n.refID].name,n})}},{key:"getContigIndex",value:function(e){return this.header.then(function(t){for(var n=0;n<t.references.length;n++){var r=t.references[n].name;if(r==e||r=="chr"+e||"chr"+r==e)return{idx:n,name:r}}throw"Invalid contig name: "+e})}},{key:"getFeaturesInRange",value:function(e,t){var n=this,r=t||!1;if(!this.index)throw"Range searches are only supported on BAMs with BAI indices.";var a=this.index;return this.getContigIndex(e.contig).then(function(t){var i=t.idx,u=t.name,f=_q2.default.defer();_q2.default.when().then(function(){f.notify({status:"Fetching BAM index"})});var l=new _ContigInterval2.default(i,e.start(),e.stop()),o=a.getChunksForInterval(l).then(function(e){return fetchAlignments(n.remoteFile,u,l,r,e)}).then(function(e){return e});return _utils2.default.pipePromise(f,o),f.promise})}}]),e}();module.exports=Bam;

},{"../ContigInterval":182,"../utils":225,"./SamRead":194,"./VirtualOffset":196,"./bai":197,"./formats/bamTypes":201,"jbinary":32,"jdataview":33,"q":48,"underscore":178}],199:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function splitCodingExons(t,e){return _underscore2.default.flatten(t.map(function(t){if(t.containsInterval(e))return[new CodingInterval(t.start,e.start-1,!1),new CodingInterval(e.start,e.stop,!0),new CodingInterval(e.stop+1,t.stop,!1)].filter(function(t){return t.start<=t.stop});var n=e.contains(t.start);return n==e.contains(t.stop)?[new CodingInterval(t.start,t.stop,n)]:n?[new CodingInterval(t.start,e.stop,!0),new CodingInterval(e.stop+1,t.stop,!1)]:[new CodingInterval(t.start,e.start-1,!1),new CodingInterval(e.start,t.stop,!0)]}))}var _get=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=i,n=a,r=!0,s=u=void 0}},_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_Interval2=require("../Interval"),_Interval3=_interopRequireDefault(_Interval2),CodingInterval=function(t){function e(t,n,r){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n),this.isCoding=r}return _inherits(e,t),e}(_Interval3.default);module.exports={splitCodingExons:splitCodingExons,CodingInterval:CodingInterval};

},{"../Interval":185,"underscore":178}],200:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),Feature=function(){function e(t){_classCallCheck(this,e),this.id=t.id,this.featureType=t.featureType,this.position=t.position,this.score=t.score}return _createClass(e,[{key:"getKey",value:function(){return this.id}},{key:"getInterval",value:function(){return this.position}},{key:"getCoverage",value:function(e){return{range:this.getInterval(),opInfo:null}}},{key:"intersects",value:function(e){return e.intersects(this.position)}}],[{key:"fromGA4GH",value:function(t){var n=new _ContigInterval2.default(t.referenceName,parseInt(t.start),parseInt(t.end));return new e({id:t.id,featureType:t.featureType,position:n,score:1e3})}}]),e}();module.exports=Feature;

},{"../ContigInterval":182}],201:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_VirtualOffset=require("../VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),_helpers=require("./helpers"),SEQUENCE_VALUES=["=","A","C","M","G","R","S","V","T","W","Y","H","K","D","B","N"],CIGAR_OPS=["M","I","D","N","S","H","P","=","X"],ThinAlignment={refID:"int32",pos:"int32",l_read_name:"uint8",MAPQ:"uint8",bin:"uint16",n_cigar_op:"uint16",FLAG:"uint16",l_seq:"int32",next_refID:"int32",next_pos:"int32",tlen:"int32"},Flags={READ_PAIRED:1,PROPER_PAIR:2,READ_UNMAPPED:4,MATE_UNMAPPED:8,READ_STRAND:16,MATE_STRAND:32,FIRST_OF_PAIR:64,SECOND_OF_PAIR:128,NOT_PRIMARY_ALIGNMENT:256,READ_FAILS_VENDOR_QUALITY_CHECK:512,DUPLICATE_READ:1024,SUPPLEMENTARY_ALIGNMENT:2048},ThickAlignment=_underscore2.default.extend(_underscore2.default.clone(ThinAlignment),{read_name:[_helpers.nullString,"l_read_name"],cigar:["array","CigarOp","n_cigar_op"],seq:["FourBitSequence","l_seq"],qual:["array","uint8","l_seq"],auxiliary:["array",{tag:["string",2],val_type:"char",value:["if",function(e){return"B"==e.val_type},{val_type:"char",num_values:"int32",values:["array","AuxiliaryValue","num_values"]},"AuxiliaryValue"]}]}),TYPE_SET={"jBinary.littleEndian":!0,BamHeader:{_magic:["const",["string",4],"BAM",!0],l_text:"int32",text:["string","l_text"],n_ref:"int32",references:["array",{l_name:"int32",name:[_helpers.nullString,"l_name"],l_ref:"int32"},"n_ref"]},BamAlignment:{block_size:"int32",contents:["blob","block_size"]},AuxiliaryValue:["if",function(e){return"A"==e.val_type},"char",["if",function(e){return"c"==e.val_type},"int8",["if",function(e){return"C"==e.val_type},"uint8",["if",function(e){return"s"==e.val_type},"int16",["if",function(e){return"S"==e.val_type},"uint16",["if",function(e){return"i"==e.val_type},"int32",["if",function(e){return"I"==e.val_type},"uint32",["if",function(e){return"f"==e.val_type},"float32",["if",function(e){return"Z"==e.val_type},"string0",["skip",0]]]]]]]]]],CigarOp:_jbinary2.default.Template({baseType:"uint32",read:function(e){var n=this.baseRead();return{length:n>>4,op:CIGAR_OPS[15&n]}}}),FourBitSequence:_jbinary2.default.Template({setParams:function(e){this.lengthField=e;var n=function(n){return Math.floor((+n[e]+1)/2)};this.baseType=["array","uint8",n]},read:function(e){var n=+e[this.lengthField];return this.baseRead().map(function(e,t){return SEQUENCE_VALUES[e>>4]+(2*t+1<n?SEQUENCE_VALUES[15&e]:"")}).join("")}}),BamFile:{header:"BamHeader",alignments:["array","BamAlignment"]},VirtualOffset:_jbinary2.default.Template({baseType:"uint64",read:function(){var e=this.baseRead();return new _VirtualOffset2.default(65536*e.hi+(e.lo>>>16),65535&e.lo)}}),ChunksArray:["array",{chunk_beg:"VirtualOffset",chunk_end:"VirtualOffset"}],IntervalsArray:["array","VirtualOffset"],BaiIndex:{n_bin:"int32",bins:["array",{bin:"uint32",n_chunk:"int32",chunks:["blob",function(e){return 16*e.n_chunk}]},"n_bin"],n_intv:"int32",intervals:["blob",function(e){return 8*e.n_intv}]},BaiFile:{magic:["const",["string",4],"BAI"],n_ref:"int32",indices:["array","BaiIndex","n_ref"],n_no_coor:_helpers.uint64native}};module.exports={TYPE_SET:TYPE_SET,ThinAlignment:ThinAlignment,ThickAlignment:ThickAlignment,Flags:Flags};

},{"../VirtualOffset":196,"./helpers":203,"jbinary":32,"underscore":178}],202:[function(require,module,exports){
"use strict";var _helpers=require("./helpers"),TYPE_SET={"jBinary.littleEndian":!0,Header:{_magic:["const","uint32",2273964779,!0],version:"uint16",zoomLevels:"uint16",chromosomeTreeOffset:"uint64",unzoomedDataOffset:"uint64",unzoomedIndexOffset:"uint64",fieldCount:"uint16",definedFieldCount:"uint16",autoSqlOffset:"uint64",totalSummaryOffset:"uint64",uncompressBufSize:"uint32",extensionOffset:"uint64",zoomHeaders:["array","ZoomHeader","zoomLevels"],totalSummary:(0,_helpers.typeAtOffset)("TotalSummary","totalSummaryOffset"),chromosomeTree:(0,_helpers.typeAtOffset)("BPlusTree","chromosomeTreeOffset")},TotalSummary:{basesCovered:"uint64",minVal:"float64",maxVal:"float64",sumData:"float64",sumSquared:"float64"},ZoomHeader:{reductionLevel:"uint32",_reserved:"uint32",dataOffset:"uint64",indexOffset:"uint64"},BPlusTree:{magic:["const","uint32",2026540177,!0],blockSize:"uint32",keySize:"uint32",valSize:"uint32",itemCount:"uint64",_reserved2:["skip",4],_reserved3:["skip",4],nodes:"BPlusTreeNode"},BPlusTreeNode:{isLeaf:"uint8",_reserved:"uint8",count:"uint16",contents:["array",["if","isLeaf",{key:["string","keySize"],id:"uint32",size:"uint32"},{key:["string","keySize"],offset:"uint64"}],"count"]},CirTree:{_magic:["const","uint32",610839776,!0],blockSize:"uint32",itemCount:"uint64",startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",fileSize:"uint64",itemsPerSlot:"uint32",_reserved:["skip",4],blocks:"CirNode"},CirNode:{isLeaf:"uint8",_reserved:"uint8",count:"uint16",contents:["array",["if","isLeaf","LeafData","NonLeafData"],"count"]},LeafData:{startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",offset:"uint64",size:"uint64"},NonLeafData:{startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",offset:"uint64"},BedEntry:{chrId:"uint32",start:"uint32",stop:"uint32",rest:"string0"},BedBlock:["array","BedEntry"]};module.exports={TYPE_SET:TYPE_SET};

},{"./helpers":203}],203:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function typeAtOffset(e,t){return _jbinary2.default.Template({baseType:e,read:function(e){return 0==+e[t]?null:this.binary.read(this.baseType,+e[t])}})}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),sizedBlock=_jbinary2.default.Type({params:["itemType","lengthField"],resolve:function(e){this.itemType=e(this.itemType)},read:function(e){var t=this.binary.tell(),i=+e[this.lengthField];return this.binary.skip(i),this.binary.slice(t,t+i).read(this.itemType)}}),nullString=_jbinary2.default.Template({setParams:function(e){this.baseType=["binary",e]},read:function(){return this.baseRead().read("string0")}}),uint64native=_jbinary2.default.Template({baseType:"uint64",read:function(){var e=this.baseRead(),t=+e;if(t<0||1+t==t)throw new RangeError("Number out of precise floating point range: "+e);return+e}}),LazyArray=function(){function e(t,i,r){_classCallCheck(this,e),this.bytesPerItem=i,this.jb=t,this.itemType=r,this.length=this.jb.view.byteLength/this.bytesPerItem}return _createClass(e,[{key:"get",value:function(e){return this.jb.seek(e*this.bytesPerItem),this.jb.read(this.itemType)}},{key:"getAll",value:function(){return this.jb.seek(0),this.jb.read(["array",this.itemType,this.length])}}]),e}(),lazyArray=_jbinary2.default.Type({params:["itemType","bytesPerItem","numItems"],read:function(){var e=this.toValue(this.numItems),t=this.toValue(this.bytesPerItem);if(void 0===e||void 0===t)throw"bytesPerItem and numItems must be set for lazyArray";var i=this.binary.tell(),r=e*t,n=this.binary.slice(i,i+r);return this.binary.skip(r),new LazyArray(n,t,this.itemType)}});module.exports={typeAtOffset:typeAtOffset,sizedBlock:sizedBlock,nullString:nullString,uint64native:uint64native,lazyArray:lazyArray};

},{"jbinary":32}],204:[function(require,module,exports){
"use strict";var TYPE_SET={"jBinary.littleEndian":!0,Header:{magic:["const","uint32",440477507,!0],version:["const","uint32",0,!0],sequenceCount:"uint32",reserved:"uint32",sequences:["array","SequenceHeader","sequenceCount"]},SequenceHeader:{nameSize:"uint8",name:["string","nameSize"],offset:"uint32"},SequenceRecord:{dnaSize:"uint32",nBlockCount:"uint32",nBlockStarts:["array","uint32","nBlockCount"],nBlockSizes:["array","uint32","nBlockCount"],maskBlockCount:"uint32"}};module.exports={TYPE_SET:TYPE_SET};

},{}],205:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(r=(u=o.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_Alignment=require("../Alignment"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),Gene=function(){function e(t){_classCallCheck(this,e),this.position=t.position,this.id=t.id,this.score=t.score,this.strand=t.strand,this.codingRegion=t.codingRegion,this.exons=t.exons,this.geneId=t.geneId,this.name=t.name}return _createClass(e,[{key:"getKey",value:function(){return this.id}},{key:"getInterval",value:function(){return this.position}},{key:"intersects",value:function(e){return e.intersects(this.position)}}],[{key:"fromGA4GH",value:function(t){var n=new _ContigInterval2.default(t.referenceName,parseInt(t.start),parseInt(t.end)),r=(0,_Alignment.ga4ghStrandToStrand)(t.strand),a=t.id&&""!=t.id?t.id:t.geneSymbol&&""!=t.geneSymbol?t.geneSymbol:t.name,i=t.attributes.attr.blockStarts,u=t.attributes.attr.blockSizes,o=[];if(i&&u&&i.values&&u.values){var s=_underscore2.default.map(i.values[0].stringValue.split(","),function(e){return parseInt(e)}),l=_underscore2.default.map(u.values[0].stringValue.split(","),function(e){return parseInt(e)});o=_underscore2.default.zip(s,l).map(function(e){var t=_slicedToArray(e,2),r=t[0],a=t[1];return new _Interval2.default(n.start()+r,n.start()+r+a)})}var c=t.attributes.attr.thickStart,d=t.attributes.attr.thickEnd,f=null;return f=c.values&&d.values?new _Interval2.default(parseInt(c.values[0].stringValue),parseInt(d.values[0].stringValue)):new _Interval2.default(n.start(),n.end()),new e({position:n,id:a,score:1e3,strand:r,codingRegion:f,exons:o,geneId:t.geneSymbol,name:t.name})}}]),e}();module.exports=Gene;

},{"../Alignment":181,"../ContigInterval":182,"../Interval":185,"underscore":178}],206:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),GenericFeature=function e(t,i,n){_classCallCheck(this,e),this.id=n.id,this.position=n.position,this.gFeature=n};module.exports=GenericFeature;

},{"../ContigInterval":182}],207:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),Variant=function(){function t(e){_classCallCheck(this,t),this.contig=e.contig,this.position=parseInt(e.position),this.ref=e.ref,this.alt=e.alt,this.id=e.id,this.majorFrequency=e.majorFrequency,this.minorFrequency=e.minorFrequency,this.vcfLine=e.vcfLine}return _createClass(t,[{key:"intersects",value:function(t){return t.intersects(new _ContigInterval2.default(this.contig,this.position,this.position+1))}}],[{key:"fromGA4GH",value:function(e){return new t({contig:e.referenceName,position:parseInt(e.start),id:e.id,ref:e.referenceBases,alt:e.alternateBases,majorFrequency:0,minorFrequency:0,vcfLine:""})}}]),t}(),Call=function t(e,n,i,r){_classCallCheck(this,t),this.callSetName=e,this.genotype=n,this.callSetId=i,this.phaseset=r},VariantContext=function(){function t(e,n){_classCallCheck(this,t),this.variant=e,this.calls=n}return _createClass(t,[{key:"intersects",value:function(t){var e=new _ContigInterval2.default(this.variant.contig,this.variant.position,this.variant.position+1);return t.intersects(e)}}]),t}();module.exports={Call:Call,Variant:Variant,VariantContext:VariantContext};

},{"../ContigInterval":182}],208:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function extractSamples(t){return _underscore2.default.filter(t,function(t){return t.startsWith("#CHROM")})[0].split("\t").splice(9)}function extractLocusLine(t){var e=t.indexOf("\t"),n=t.indexOf("\t",e+1);return{contig:t.slice(0,e),position:Number(t.slice(e+1,n)),line:t}}function extractVariantContext(t,e){var n=e.split("\t"),r=null,i=null,a=[];if(n.length>=7){for(var o=n[7].split(";"),s=0;s<o.length;s++){var u=o[s];if(u.startsWith("AF=")){r=0,i=1;for(var c=u.substr(3).split(","),l=0;l<c.length;l++){var f=parseFloat(c[l]);r=Math.max(r,f),i=Math.min(i,f)}}}if(n.length>9){var h=0;for(s=9;s<n.length;s++){var p=n[s].split(":")[0].split("/").map(function(t){return parseInt(t)});if(2==p.length&&(1==parseInt(p[0])||1==parseInt(p[1]))){var g=new _variant.Call(t[h],p,t[h],"True");a=a.concat(g)}h++}}}var v=n[0],m=Number(n[1]);return new _variant.VariantContext(new _variant.Variant({contig:v,position:m,id:n[2],ref:n[3],alt:n[4],majorFrequency:r,minorFrequency:i,vcfLine:e}),a)}function compareLocusLine(t,e){return t.contig<e.contig?-1:t.contig>e.contig?1:t.position-e.position}function lowestIndex(t,e,n){for(var r=0,i=t.length;r<i;){var a=Math.floor((r+i)/2);n(t[a],e)<0?r=a+1:i=a}return r}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_variant=require("./variant"),ImmediateVcfFile=function(){function t(e,n){_classCallCheck(this,t),this.samples=e,this.lines=n,this.contigMap=this.extractContigs()}return _createClass(t,[{key:"extractContigs",value:function(){for(var t=[],e=0;e<this.lines.length;e++){var n=this.lines[e];""!=n.contig&&t.push(n.contig)}var r={};return t.forEach(function(t){"chr"==t.slice(0,3)?r[t.slice(4)]=t:r["chr"+t]=t,r[t]=t}),r}},{key:"getFeaturesInRange",value:function(t){var e=this,n=this.lines,r=this.contigMap[t.contig];if(!r)return[];for(var i={contig:r,position:t.start(),line:""},a={contig:r,position:t.stop(),line:""},o=lowestIndex(n,i,compareLocusLine),s=[],u=o;u<n.length&&!(compareLocusLine(n[u],a)>0);u++)s.push(n[u]);return s.map(function(t){return extractVariantContext(e.samples,t.line)})}}]),t}(),VcfFile=function(){function t(e){_classCallCheck(this,t),this.remoteFile=e,this.immediate=this.remoteFile.getAllString().then(function(t){var e=t.split("\n"),n=e.filter(function(t){return t.length&&"#"!=t[0]}).map(extractLocusLine);return[extractSamples(e.filter(function(t){return t.length&&"#"==t[0]})),n]}).then(function(t){var e=t[0],n=t[1];return n.sort(compareLocusLine),new ImmediateVcfFile(e,n)}),this.immediate.done()}return _createClass(t,[{key:"getCallNames",value:function(){return this.immediate.then(function(t){return t.samples})}},{key:"getFeaturesInRange",value:function(t){return this.immediate.then(function(e){return e.getFeaturesInRange(t)})}}]),t}();module.exports={VcfFile:VcfFile};

},{"../ContigInterval":182,"./variant":207,"underscore":178}],209:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function n(e){var n=new _ContigInterval2.default(e.contig,e.start,e.stop);i.trigger("newdata",n),i.trigger("networkdone")}function r(e){return e?_underscore2.default.filter(u,function(n){return n.intersects(e)}):[]}var t=JSON.parse(e),u=[];_underscore2.default.isEmpty(t)||(u=_underscore2.default.values(t.alignments).map(function(e){return new _GA4GHAlignment2.default(e)}));var i={rangeChanged:n,getFeaturesInRange:r,on:function(){},once:function(){},off:function(){},trigger:function(e,n){}};return _underscore2.default.extend(i,_backbone.Events),i}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_GA4GHAlignment=require("../GA4GHAlignment"),_GA4GHAlignment2=_interopRequireDefault(_GA4GHAlignment);module.exports={create:create};

},{"../ContigInterval":182,"../GA4GHAlignment":184,"backbone":1,"underscore":178}],210:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function r(e){var r=new _ContigInterval2.default(e.contig,e.start,e.stop);a.trigger("newdata",r),a.trigger("networkdone")}function t(e){return e?_underscore2.default.filter(u,function(r){return r.intersects(e)}):[]}var n=JSON.parse(e),u=[];_underscore2.default.isEmpty(n)||(u=_underscore2.default.values(n.features).map(function(e){return _dataFeature2.default.fromGA4GH(e)}));var a={rangeChanged:r,getFeaturesInRange:t,on:function(){},once:function(){},off:function(){},trigger:function(e,r){}};return _underscore2.default.extend(a,_backbone.Events),a}var _dataFeature=require("../data/feature"),_dataFeature2=_interopRequireDefault(_dataFeature),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval);module.exports={create:create};

},{"../ContigInterval":182,"../data/feature":200,"backbone":1,"underscore":178}],211:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function r(e){var r=new _ContigInterval2.default(e.contig,e.start,e.stop);c.trigger("newdata",r),c.trigger("networkdone")}function n(e){if(!e)return[];var r=_underscore2.default.filter(i,function(r){return r.intersects(e)});return _underscore2.default.map(r,function(e){return e.variant})}function t(e){return e?_underscore2.default.filter(i,function(r){return r.intersects(e)}):[]}function a(){return _q2.default.resolve(o)}var u=JSON.parse(e),i=[],o=[];_underscore2.default.isEmpty(u)||(i=_underscore2.default.values(u.variants).map(function(e){return new _dataVariant.VariantContext(_dataVariant.Variant.fromGA4GH(e),e.calls)}),o=_underscore2.default.map(i[0].calls,function(e){return e.callSetName}));var c={rangeChanged:r,getVariantsInRange:n,getGenotypesInRange:t,getCallNames:a,on:function(){},once:function(){},off:function(){},trigger:function(e,r){}};return _underscore2.default.extend(c,_backbone.Events),c}var _dataVariant=require("../data/variant"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_q=require("q"),_q2=_interopRequireDefault(_q),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval);module.exports={create:create};

},{"../ContigInterval":182,"../data/variant":207,"backbone":1,"q":48,"underscore":178}],212:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function findReference(e){return _underscore2.default.find(e,function(e){return!!e.track.isReference})}function create(e,r){var t="string"==typeof e?document.getElementById(e):e;if(!t)throw new Error("Attempted to create pileup with non-existent element "+e.toString());var a=r.tracks.map(function(e){var r=e.data?e.data:e.viz.component.defaultSource;if(!r){var t=null!=e.viz.component.displayName?e.viz.component.displayName:"track";throw new Error("Track '"+t+"' doesn't have a default data source; you must specify one when initializing it.")}return{visualization:e.viz,source:r,track:e}}),o=findReference(a);if(!o)throw new Error("You must include at least one track with type=reference");var u=_reactDom2.default.render(_react2.default.createElement(_Root2.default,{referenceSource:o.source,tracks:a,initialRange:r.range}),t),n=null,i=document.body;if(!i)throw new Error("Failed to match: document.body");if(!i.contains(t)){n=new MutationObserver(function(e){e.forEach(function(e){if("childList"===e.type){for(var r=!1,a=0;a<e.addedNodes.length;a++)(e.addedNodes[a]===t||e.addedNodes[a].contains(t))&&(r=!0);if(r){if(!u)throw"ReactElement was not initialized properly";u.setState({updateSize:!0})}}})});var c={attributes:!0,childList:!0,characterData:!0,subtree:!0};n.observe(document,c)}return{setRange:function(e){if(null===u)throw"Cannot call setRange on a destroyed pileup";u.handleRangeChange(e)},getRange:function(){if(null===u)throw"Cannot call getRange on a destroyed pileup";if(null!=u.state.range)return _underscore2.default.clone(u.state.range);throw"Cannot call setRange on non-existent range"},destroy:function(){if(!a)throw"Cannot call destroy() twice on the same pileup";a.forEach(function(e){e.source.off()}),_reactDom2.default.unmountComponentAtNode(t),u=null,o=null,a=null,null!==n&&void 0!==n&&n.disconnect()}}}function makeVizObject(e){return function(r){return r=_underscore2.default.extend({},e.defaultOptions,r),{component:e,options:r}}}var _types=require("./types"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_sourcesTwoBitDataSource=require("./sources/TwoBitDataSource"),_sourcesTwoBitDataSource2=_interopRequireDefault(_sourcesTwoBitDataSource),_sourcesBigBedDataSource=require("./sources/BigBedDataSource"),_sourcesBigBedDataSource2=_interopRequireDefault(_sourcesBigBedDataSource),_sourcesVcfDataSource=require("./sources/VcfDataSource"),_sourcesVcfDataSource2=_interopRequireDefault(_sourcesVcfDataSource),_sourcesBamDataSource=require("./sources/BamDataSource"),_sourcesBamDataSource2=_interopRequireDefault(_sourcesBamDataSource),_sourcesEmptySource=require("./sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_jsonGA4GHAlignmentJson=require("./json/GA4GHAlignmentJson"),_jsonGA4GHAlignmentJson2=_interopRequireDefault(_jsonGA4GHAlignmentJson),_jsonGA4GHVariantJson=require("./json/GA4GHVariantJson"),_jsonGA4GHVariantJson2=_interopRequireDefault(_jsonGA4GHVariantJson),_jsonGA4GHFeatureJson=require("./json/GA4GHFeatureJson"),_jsonGA4GHFeatureJson2=_interopRequireDefault(_jsonGA4GHFeatureJson),_sourcesGA4GHAlignmentSource=require("./sources/GA4GHAlignmentSource"),_sourcesGA4GHAlignmentSource2=_interopRequireDefault(_sourcesGA4GHAlignmentSource),_sourcesGA4GHVariantSource=require("./sources/GA4GHVariantSource"),_sourcesGA4GHVariantSource2=_interopRequireDefault(_sourcesGA4GHVariantSource),_sourcesGA4GHFeatureSource=require("./sources/GA4GHFeatureSource"),_sourcesGA4GHFeatureSource2=_interopRequireDefault(_sourcesGA4GHFeatureSource),_sourcesGA4GHGeneSource=require("./sources/GA4GHGeneSource"),_sourcesGA4GHGeneSource2=_interopRequireDefault(_sourcesGA4GHGeneSource),_vizCoverageTrack=require("./viz/CoverageTrack"),_vizCoverageTrack2=_interopRequireDefault(_vizCoverageTrack),_vizGenomeTrack=require("./viz/GenomeTrack"),_vizGenomeTrack2=_interopRequireDefault(_vizGenomeTrack),_vizGeneTrack=require("./viz/GeneTrack"),_vizGeneTrack2=_interopRequireDefault(_vizGeneTrack),_vizFeatureTrack=require("./viz/FeatureTrack"),_vizFeatureTrack2=_interopRequireDefault(_vizFeatureTrack),_vizLocationTrack=require("./viz/LocationTrack"),_vizLocationTrack2=_interopRequireDefault(_vizLocationTrack),_vizPileupTrack=require("./viz/PileupTrack"),_vizPileupTrack2=_interopRequireDefault(_vizPileupTrack),_vizScaleTrack=require("./viz/ScaleTrack"),_vizScaleTrack2=_interopRequireDefault(_vizScaleTrack),_vizVariantTrack=require("./viz/VariantTrack"),_vizVariantTrack2=_interopRequireDefault(_vizVariantTrack),_vizGenotypeTrack=require("./viz/GenotypeTrack"),_vizGenotypeTrack2=_interopRequireDefault(_vizGenotypeTrack),_Root=require("./Root"),_Root2=_interopRequireDefault(_Root),pileup={create:create,formats:{bam:_sourcesBamDataSource2.default.create,alignmentJson:_jsonGA4GHAlignmentJson2.default.create,variantJson:_jsonGA4GHVariantJson2.default.create,featureJson:_jsonGA4GHFeatureJson2.default.create,vcf:_sourcesVcfDataSource2.default.create,twoBit:_sourcesTwoBitDataSource2.default.create,bigBed:_sourcesBigBedDataSource2.default.create,GAReadAlignment:_sourcesGA4GHAlignmentSource2.default.create,GAVariant:_sourcesGA4GHVariantSource2.default.create,GAFeature:_sourcesGA4GHFeatureSource2.default.create,GAGene:_sourcesGA4GHGeneSource2.default.create,empty:_sourcesEmptySource2.default.create},viz:{coverage:makeVizObject(_vizCoverageTrack2.default),genome:makeVizObject(_vizGenomeTrack2.default),genes:makeVizObject(_vizGeneTrack2.default),features:makeVizObject(_vizFeatureTrack2.default),location:makeVizObject(_vizLocationTrack2.default),scale:makeVizObject(_vizScaleTrack2.default),variants:makeVizObject(_vizVariantTrack2.default),genotypes:makeVizObject(_vizGenotypeTrack2.default),pileup:makeVizObject(_vizPileupTrack2.default)},enum:{variants:{allelFrequencyStrategy:_types.AllelFrequencyStrategy}},version:"0.6.11"};module.exports=pileup,"undefined"!=typeof window&&(window.pileup=pileup);

},{"./Root":190,"./json/GA4GHAlignmentJson":209,"./json/GA4GHFeatureJson":210,"./json/GA4GHVariantJson":211,"./sources/BamDataSource":214,"./sources/BigBedDataSource":215,"./sources/EmptySource":216,"./sources/GA4GHAlignmentSource":217,"./sources/GA4GHFeatureSource":218,"./sources/GA4GHGeneSource":219,"./sources/GA4GHVariantSource":220,"./sources/TwoBitDataSource":221,"./sources/VcfDataSource":222,"./types":224,"./viz/CoverageTrack":228,"./viz/FeatureTrack":230,"./viz/GeneTrack":231,"./viz/GenomeTrack":233,"./viz/GenotypeTrack":234,"./viz/LocationTrack":235,"./viz/PileupTrack":237,"./viz/ScaleTrack":238,"./viz/VariantTrack":240,"react":176,"react-dom":49,"underscore":178}],213:[function(require,module,exports){
"use strict";function linear(){var n=!1,t=[0,1],r=[0,1],i=function(i){return n&&(i=Math.max(Math.min(i,t[1]),t[0])),(i-t[0])/(t[1]-t[0])*(r[1]-r[0])+r[0]};return i.clamp=function(t){return void 0===t?n:(n=t,this)},i.domain=function(n){return void 0===n?t:(t=n,this)},i.range=function(n){return void 0===n?r:(r=n,this)},i.invert=function(i){if(n)throw"Can't invert a clamped linear scale.";return(i-r[0])/(r[1]-r[0])*(t[1]-t[0])+t[0]},i.nice=function(){var n=t,r=Math.abs(n[1]-n[0]),i=Math.pow(10,Math.floor(Math.log(r/10)/Math.LN10)),o=10/r*i;o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2);var a,e={floor:function(n){return Math.floor(n/i)*i},ceil:function(n){return Math.ceil(n/i)*i}},u=0,c=1,l=t[u],f=t[c];return f<l&&(a=u,u=c,c=a,a=l,l=f,f=a),t[u]=e.floor(l),t[c]=e.ceil(f),this},i}module.exports={linear:linear};

},{}],214:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function createFromBamFile(e){function t(e){var t=e.getKey();i[t]||(i[t]=e)}function r(e){e.references.forEach(function(e){var t=e.name;u[t]=t,u["chr"+t]=t,"chr"==t.slice(0,3)&&(u[t.slice(3)]=t)})}function n(n){var a=_underscore2.default.isEmpty(u)?e.header.then(r):_q2.default.when();return _q2.default.when().then(function(){a.isPending()&&!e.hasIndexChunks&&f.trigger("networkprogress",{status:"Fetching BAM index -- use index chunks to speed this up"})}).done(),a.then(function(){var r=u[n.contig],a=new _ContigInterval2.default(r,n.start,n.stop);if(a.isCoveredBy(o))return _q2.default.when();a=a.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var i=a.complementIntervals(o);return o.push(a),o=_ContigInterval2.default.coalesce(o),_q2.default.all(i.map(function(r){return e.getFeaturesInRange(r).progress(function(e){f.trigger("networkprogress",e)}).then(function(e){e.forEach(function(e){return t(e)}),f.trigger("networkdone"),f.trigger("newdata",r)})}))})}function a(e){if(!e)return[];if(_underscore2.default.isEmpty(u))return[];var t=new _ContigInterval2.default(u[e.contig],e.start(),e.stop());return _underscore2.default.filter(i,function(e){return e.intersects(t)})}var i={},u={},o=[],f={rangeChanged:function(e){n(e).done()},getFeaturesInRange:a,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(f,_backbone.Events),f}function create(e){var t=e.url;if(!t)throw new Error("Missing URL from track data: "+JSON.stringify(e));var r=e.indexUrl;if(!r)throw new Error("Missing indexURL from track data: "+JSON.stringify(e));return createFromBamFile(e.indexChunks?new _dataBam2.default(new _RemoteFile2.default(t),new _RemoteFile2.default(r),e.indexChunks):new _dataBam2.default(new _RemoteFile2.default(t),new _RemoteFile2.default(r)))}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataBam=require("../data/bam"),_dataBam2=_interopRequireDefault(_dataBam),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),BASE_PAIRS_PER_FETCH=100,ZERO_BASED=!1;module.exports={create:create,createFromBamFile:createFromBamFile};

},{"../ContigInterval":182,"../RemoteFile":188,"../data/bam":198,"backbone":1,"q":48,"underscore":178}],215:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function parseBedFeature(e){var r=new _ContigInterval2.default(e.contig,e.start,e.stop),t=e.rest.split("\t"),n=t[0]?t[0]:r.toString(),a=t[1]?parseInt(t[1]):1e3,i=(0,_Alignment.strToStrand)(t[2]),o=t[3]&&t[4]?new _Interval2.default(Number(t[3]),Number(t[4])):new _Interval2.default(e.start,e.stop),u=t[9]?t[9]:n,l=t[10]?t[10]:"",d=[];if(t[7]&&t[8]){var c=t[7].replace(/,*$/,"").split(",").map(Number),f=t[8].replace(/,*$/,"").split(",").map(Number);d=_underscore2.default.zip(f,c).map(function(r){var t=_slicedToArray(r,2),n=t[0],a=t[1];return new _Interval2.default(e.start+n,e.start+n+a)})}return new _dataGene2.default({position:r,id:n,score:a,strand:i,codingRegion:o,geneId:u,name:l,exons:d})}function createFromBigBedFile(e){function r(e){a[e.id]||(a[e.id]=e)}function t(e){if(!e)return[];var r=[];return _underscore2.default.each(a,function(t){e.intersects(t.position)&&r.push(t)}),r}function n(t){var n=new _ContigInterval2.default(t.contig,t.start,t.stop);return n.isCoveredBy(i)?_q2.default.when():(i.push(n),i=_ContigInterval2.default.coalesce(i),e.getFeatureBlocksOverlapping(n).then(function(e){e.forEach(function(e){i.push(e.range),i=_ContigInterval2.default.coalesce(i),e.rows.map(parseBedFeature).forEach(function(e){return r(e)})}),o.trigger("newdata",n),o.trigger("networkdone")}))}var a={},i=[],o={rangeChanged:function(e){n(e).done()},getFeaturesInRange:t,on:function(){},once:function(){},off:function(){},trigger:function(e,r){}};return _underscore2.default.extend(o,_backbone.Events),o}function create(e){var r=e.url;if(!r)throw new Error("Missing URL from track: "+JSON.stringify(e));return createFromBigBedFile(new _dataBigBed2.default(r))}var _slicedToArray=function(){function e(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_Alignment=require("../Alignment"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_dataBigBed=require("../data/BigBed"),_dataBigBed2=_interopRequireDefault(_dataBigBed),_dataGene=require("../data/gene"),_dataGene2=_interopRequireDefault(_dataGene);module.exports={create:create,createFromBigBedFile:createFromBigBedFile};

},{"../Alignment":181,"../ContigInterval":182,"../Interval":185,"../data/BigBed":193,"../data/gene":205,"backbone":1,"q":48,"underscore":178}],216:[function(require,module,exports){
"use strict";var create=function(){return{rangeChanged:function(){},on:function(){},off:function(){},trigger:function(){}}};module.exports={create:create};

},{}],217:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function n(e){void 0!==e.alignments&&e.alignments.forEach(function(e){var n=_GA4GHAlignment2.default.keyFromGA4GHResponse(e);if(!(n in s))try{var t=new _GA4GHAlignment2.default(e);s[n]=t}catch(e){}})}function t(e){var n=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!n.isCoveredBy(u)){n=n.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var t=n.complementIntervals(u);u.push(n),u=_ContigInterval2.default.coalesce(u),t.forEach(function(e){o(e,null,1)})}}function r(e){c.trigger("networkfailure",e),c.trigger("networkdone"),console.warn(e)}function o(t,i,s){var u=new XMLHttpRequest;u.open("POST",a),u.responseType="json",u.setRequestHeader("Content-Type","application/json"),u.addEventListener("load",function(e){var i=this.response;this.status>=400?r(this.status+" "+this.statusText+" "+JSON.stringify(i)):i.errorCode?r("Error from GA4GH endpoint: "+JSON.stringify(i)):(n(i),c.trigger("newdata",t),i.nextPageToken?o(t,i.nextPageToken,s+1):c.trigger("networkdone"))}),u.addEventListener("error",function(e){r("Request failed with status: "+this.status)}),c.trigger("networkprogress",{numRequests:s});var d=t.contig;void 0!==e.forcedReferenceId&&(d=e.forcedReferenceId),u.send(JSON.stringify({pageToken:i,pageSize:ALIGNMENTS_PER_REQUEST,readGroupIds:[e.readGroupId],referenceId:d,start:t.start(),end:t.stop()}))}function i(e){return e?(e=new _ContigInterval2.default(e.contig,e.start(),e.stop()),_underscore2.default.filter(s,function(n){return n.intersects(e)})):[]}var a=e.endpoint+"/reads/search",s={},u=[],c={rangeChanged:t,getFeaturesInRange:i,on:function(){},once:function(){},off:function(){},trigger:function(e,n){}};return _underscore2.default.extend(c,_backbone.Events),c}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_GA4GHAlignment=require("../GA4GHAlignment"),_GA4GHAlignment2=_interopRequireDefault(_GA4GHAlignment),ALIGNMENTS_PER_REQUEST=200,ZERO_BASED=!1,BASE_PAIRS_PER_FETCH=100;module.exports={create:create};

},{"../ContigInterval":182,"../GA4GHAlignment":184,"backbone":1,"underscore":178}],218:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function t(e){void 0!==e.features&&e.features.forEach(function(e){var t=new _ContigInterval2.default(e.referenceName,e.start,e.end),r=e.id+t.toString();if(!(r in i)){var n=_dataFeature2.default.fromGA4GH(e);i[r]=n}})}function r(e){var t=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!t.isCoveredBy(s)){t=t.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var r=t.complementIntervals(s);s.push(t),s=_ContigInterval2.default.coalesce(s),r.forEach(function(e){a(e,null,1)})}}function n(e){f.trigger("networkfailure",e),f.trigger("networkdone"),console.warn(e)}function a(r,o,i){var s=new XMLHttpRequest;s.open("POST",u),s.responseType="json",s.setRequestHeader("Content-Type","application/json"),s.addEventListener("load",function(e){var o=this.response;this.status>=400?n(this.status+" "+this.statusText+" "+JSON.stringify(o)):o.errorCode?n("Error from GA4GH Feature endpoint: "+JSON.stringify(o)):(t(o),f.trigger("newdata",r),o.nextPageToken?a(r,o.nextPageToken,i+1):f.trigger("networkdone"))}),s.addEventListener("error",function(e){n("Request failed with status: "+this.status)}),f.trigger("networkprogress",{numRequests:i}),s.send(JSON.stringify({featureSetId:e.featureSetId,pageToken:o,pageSize:FEATURES_PER_REQUEST,referenceName:r.contig,start:r.start(),end:r.stop()}))}function o(e){return e?_underscore2.default.filter(i,function(t){return t.intersects(e)}):[]}var u=e.endpoint+"/features/search",i={},s=[],f={rangeChanged:r,getFeaturesInRange:o,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(f,_backbone.Events),f}Object.defineProperty(exports,"__esModule",{value:!0});var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataFeature=require("../data/feature"),_dataFeature2=_interopRequireDefault(_dataFeature),BASE_PAIRS_PER_FETCH=100,FEATURES_PER_REQUEST=400,ZERO_BASED=!1;module.exports={create:create};

},{"../ContigInterval":182,"../data/feature":200,"backbone":1,"underscore":178}],219:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function t(e){void 0!==e.features&&e.features.forEach(function(e){var t=new _ContigInterval2.default(e.referenceName,e.start,e.end),n=e.id+t.toString();if(!(n in u)){var r=_dataGene2.default.fromGA4GH(e);u[n]=r}})}function n(e){var t=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!t.isCoveredBy(s)){t=t.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var n=t.complementIntervals(s);s.push(t),s=_ContigInterval2.default.coalesce(s),n.forEach(function(e){a(e,null,1)})}}function r(e){f.trigger("networkfailure",e),f.trigger("networkdone"),console.warn(e)}function a(n,o,u){var s=new XMLHttpRequest;s.open("POST",i),s.responseType="json",s.setRequestHeader("Content-Type","application/json"),s.addEventListener("load",function(e){var o=this.response;this.status>=400?r(this.status+" "+this.statusText+" "+JSON.stringify(o)):o.errorCode?r("Error from GA4GH Feature endpoint: "+JSON.stringify(o)):(t(o),f.trigger("newdata",n),o.nextPageToken?a(n,o.nextPageToken,u+1):f.trigger("networkdone"))}),s.addEventListener("error",function(e){r("Request failed with status: "+this.status)}),f.trigger("networkprogress",{numRequests:u}),s.send(JSON.stringify({featureSetId:e.featureSetId,pageToken:o,pageSize:GENES_PER_REQUEST,referenceName:n.contig,start:n.start(),end:n.stop()}))}function o(e){return e?_underscore2.default.filter(u,function(t){return t.intersects(e)}):[]}var i=e.endpoint+"/features/search",u={},s=[],f={rangeChanged:n,getFeaturesInRange:o,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(f,_backbone.Events),f}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataGene=require("../data/gene"),_dataGene2=_interopRequireDefault(_dataGene),BASE_PAIRS_PER_FETCH=100,GENES_PER_REQUEST=400,ZERO_BASED=!1;module.exports={create:create};

},{"../ContigInterval":182,"../data/gene":205,"backbone":1,"underscore":178}],220:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function t(e){void 0!==e.variants&&e.variants.forEach(function(e){var t=e.id;if(!(t in c)){var n=new _dataVariant.VariantContext(_dataVariant.Variant.fromGA4GH(e),e.calls);c[t]=n}})}function n(e){var t=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!t.isCoveredBy(f)){t=t.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var n=t.complementIntervals(f);f.push(t),f=_ContigInterval2.default.coalesce(f),n.forEach(function(e){a(e,null,1)})}}function r(e){d.trigger("networkfailure",e),d.trigger("networkdone"),console.warn(e)}function a(n,i,o){var s=new XMLHttpRequest;s.open("POST",u),s.responseType="json",s.setRequestHeader("Content-Type","application/json"),s.addEventListener("load",function(e){var i=this.response;this.status>=400?r(this.status+" "+this.statusText+" "+JSON.stringify(i)):i.errorCode?r("Error from GA4GH Variant endpoint: "+JSON.stringify(i)):(t(i),d.trigger("newdata",n),i.nextPageToken?a(n,i.nextPageToken,o+1):d.trigger("networkdone"))}),s.addEventListener("error",function(e){r("Request failed with status: "+this.status)}),d.trigger("networkprogress",{numRequests:o}),s.send(JSON.stringify({variantSetId:e.variantSetId,pageToken:i,pageSize:VARIANTS_PER_REQUEST,referenceName:n.contig,callSetIds:e.callSetIds,start:n.start(),end:n.stop()}))}function i(e){if(!e)return[];var t=_underscore2.default.filter(c,function(t){return t.intersects(e)});return _underscore2.default.map(t,function(e){return e.variant})}function o(e){return e?_underscore2.default.filter(c,function(t){return t.intersects(e)}):[]}function s(){return e.callSetNames?_q2.default.resolve(e.callSetNames):_q2.default.resolve(e.callSetIds)}var u=e.endpoint+"/variants/search",c={},f=[],d={rangeChanged:n,getVariantsInRange:i,getGenotypesInRange:o,getCallNames:s,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(d,_backbone.Events),d}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataVariant=require("../data/variant"),BASE_PAIRS_PER_FETCH=100,VARIANTS_PER_REQUEST=400,ZERO_BASED=!1;module.exports={create:create};

},{"../ContigInterval":182,"../data/variant":207,"backbone":1,"q":48,"underscore":178}],221:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){var t=e.url;if(!t)throw new Error("Missing URL from track: "+JSON.stringify(e));return createFromTwoBitFile(new _dataTwoBit2.default(new _RemoteFile2.default(t)))}function testBasePairsToFetch(e){if(!e)return BASE_PAIRS_PER_FETCH;BASE_PAIRS_PER_FETCH=e}Object.defineProperty(exports,"__esModule",{value:!0});var _q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataTwoBit=require("../data/TwoBit"),_dataTwoBit2=_interopRequireDefault(_dataTwoBit),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_SequenceStore=require("../SequenceStore"),_SequenceStore2=_interopRequireDefault(_SequenceStore),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),BASE_PAIRS_PER_FETCH=1e4,MAX_BASE_PAIRS_TO_FETCH=1e5,ZERO_BASED=!0,createFromTwoBitFile=function(e){function t(t){if(t.length()>MAX_BASE_PAIRS_TO_FETCH)return l.trigger("newdatarefused",t),_q2.default.when();_.push(t),_=_ContigInterval2.default.coalesce(_),e.getFeaturesInRange(t.contig,t.start(),t.stop()).then(function(e){e&&(e.length<t.length()&&(t=new _ContigInterval2.default(t.contig,t.start(),t.start()+e.length-1)),a.setRange(t,e))}).then(function(){l.trigger("newdata",t)}).done()}function n(e){if(u.indexOf(e.contig)>=0)return e;var t=_utils2.default.altContigName(e.contig);return u.indexOf(t)>=0?{contig:t,start:e.start,stop:e.stop}:e}function r(e){return c.then(function(){return n(e)})}function i(e){return a.getAsObjects(_ContigInterval2.default.fromGenomeRange(e))}function o(e){return e?a.getAsString(_ContigInterval2.default.fromGenomeRange(e)):""}var u=[],a=new _SequenceStore2.default,_=[],c=e.getContigList().then(function(e){return u=e,l.trigger("contigs",u),e});c.done();var l={rangeChanged:function(e){r(e).then(function(e){var n=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!n.isCoveredBy(_)){n=n.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var r=n.complementIntervals(_),i=!0,o=!1,u=void 0;try{for(var a,c=r[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){t(a.value)}}catch(e){o=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}}}).done()},getRange:i,getRangeAsString:o,contigList:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return u}),normalizeRange:r,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(l,_backbone.Events),l};module.exports={create:create,createFromTwoBitFile:createFromTwoBitFile,testBasePairsToFetch:testBasePairsToFetch};

},{"../ContigInterval":182,"../RemoteFile":188,"../SequenceStore":191,"../data/TwoBit":195,"../utils":225,"backbone":1,"q":48,"underscore":178}],222:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function variantContextKey(e){return e.variant.contig+":"+e.variant.position}function createFromVcfFile(e){function t(e){var t=variantContextKey(e);o[t]||(o[t]=e)}function n(n){var r=new _ContigInterval2.default(n.contig,n.start,n.stop);return r.isCoveredBy(u)?_q2.default.when():(r=r.round(BASE_PAIRS_PER_FETCH,ZERO_BASED),u.push(r),u=_ContigInterval2.default.coalesce(u),e.getFeaturesInRange(r).then(function(e){e.forEach(function(e){return t(e)}),c.trigger("newdata",r)}))}function r(e){if(!e)return[];var t=_underscore2.default.filter(o,function(t){return e.containsLocus(t.variant.contig,t.variant.position)});return _underscore2.default.map(t,function(e){return e.variant})}function i(e){return _underscore2.default.filter(o,function(t){return e.containsLocus(t.variant.contig,t.variant.position)})}function a(){return e.getCallNames().then(function(e){return e})}var o={},u=[],c={rangeChanged:function(e){n(e).done()},getVariantsInRange:r,getGenotypesInRange:i,getCallNames:a,on:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(c,_backbone2.default),c}function create(e){var t=e.url,n=e.content;if(t)return createFromVcfFile(new _dataVcf.VcfFile(new _RemoteFile2.default(t)));if(n)return createFromVcfFile(new _dataVcf.VcfFile(new _LocalStringFile2.default(n)));throw new Error("Missing URL or content from track: "+JSON.stringify(e))}Object.defineProperty(exports,"__esModule",{value:!0});var _backbone=require("backbone"),_backbone2=_interopRequireDefault(_backbone),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_LocalStringFile=require("../LocalStringFile"),_LocalStringFile2=_interopRequireDefault(_LocalStringFile),_dataVariant=require("../data/variant"),_dataVcf=require("../data/vcf"),BASE_PAIRS_PER_FETCH=100,ZERO_BASED=!1;module.exports={create:create,createFromVcfFile:createFromVcfFile};

},{"../ContigInterval":182,"../LocalStringFile":186,"../RemoteFile":188,"../data/variant":207,"../data/vcf":208,"backbone":1,"q":48,"underscore":178}],223:[function(require,module,exports){
"use strict";function _interopRequireDefault(_){return _&&_.__esModule?_:{default:_}}function TEXT_STYLE(_,E){return _==_vizDisplayMode2.default.LOOSE?E+"px 'Helvetica Neue', Helvetica, Arial, sans-serif":_==_vizDisplayMode2.default.TIGHT?"bold "+E+"px 'Helvetica Neue', Helvetica, Arial, sans-serif":E+"px"}var _vizDisplayMode=require("./viz/DisplayMode"),_vizDisplayMode2=_interopRequireDefault(_vizDisplayMode);module.exports={TEXT_STYLE:TEXT_STYLE,BASE_COLORS:{A:"#188712",G:"#C45C16",C:"#0600F9",T:"#F70016",U:"#F70016",N:"black"},GENE_ARROW_SIZE:4,GENE_COLOR:"blue",GENE_COMPLEMENT_COLOR:"white",GENE_FONT:"'Helvetica Neue', Helvetica, Arial, sans-serif",GENE_FONT_SIZE:16,GENE_TEXT_PADDING:5,ALIGNMENT_COLOR:"#c8c8c8",ALIGNMENT_MINUS_STRAND_COLOR:"rgb(176, 176, 236)",ALIGNMENT_PLUS_STRAND_COLOR:"rgb(236, 176, 176)",DELETE_COLOR:"black",INSERT_COLOR:"rgb(97, 0, 216)",READ_SPACING:2,READ_HEIGHT:13,COVERAGE_FONT_STYLE:"bold 9px 'Helvetica Neue', Helvetica, Arial, sans-serif",COVERAGE_FONT_COLOR:"black",COVERAGE_TICK_LENGTH:5,COVERAGE_TEXT_PADDING:3,COVERAGE_TEXT_Y_OFFSET:3,COVERAGE_BIN_COLOR:"#a0a0a0",COVERAGE_MIN_BAR_WIDTH_FOR_GAP:8,SCALE_LINE_PADDING:40,SCALE_FONT_STYLE:"bold 12px 'Helvetica Neue', Helvetica, Arial, sans-serif",SCALE_TEXT_Y_OFFSET:5,SCALE_FONT_COLOR:"black",SCALE_ARROW_SIZE:4,LOC_TEXT_PADDING:5,LOC_TICK_LENGTH:10,LOC_TEXT_Y_OFFSET:5,LOC_FONT_STYLE:"13px 'Helvetica Neue', Helvetica, Arial, sans-serif",LOC_FONT_COLOR:"black",VARIANT_STROKE:"blue",VARIANT_FILL:"#ddd",VARIANT_HEIGHT:14,GENOTYPE_SPACING:1,GENOTYPE_HEIGHT:10,GENOTYPE_FILL_HET:"#0015ff",GENOTYPE_FILL_HOM:"#00f1f9",BACKGROUND_FILL:"#f2f2f2"};

},{"./viz/DisplayMode":229}],224:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=require("react"),_react2=_interopRequireDefault(_react),AllelFrequencyStrategy={Minor:{name:"Minor"},Major:{name:"Major"}};exports.AllelFrequencyStrategy=AllelFrequencyStrategy;

},{"react":176}],225:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function tupleLessOrEqual(e,t){if(e.length!=t.length)throw new Error("Comparing non-equal length tuples");for(var r=0;r<e.length;r++){if(e[r]>t[r])return!1;if(e[r]<t[r])return!0}return!0}function tupleRangeOverlaps(e,t){return tupleLessOrEqual(e[0],t[1])&&tupleLessOrEqual(t[0],e[1])&&tupleLessOrEqual(e[0],e[1])&&tupleLessOrEqual(t[0],t[1])}function concatArrayBuffers(e){var t=e.map(function(e){return e.byteLength}).reduce(function(e,t){return e+t},0),r=new Uint8Array(t),n=0;return e.forEach(function(e){r.set(new Uint8Array(e),n),n+=e.byteLength}),r.buffer}function _inflateOne(e,t){var r=new _pakoLibInflate2.default.Inflate;return r.push(e.slice(t)),{err:r.err,msg:r.msg,buffer:r.result?r.result.buffer:null,total_in:r.strm.total_in}}function cachedInflateOne(e,t,r){if(!r)return _inflateOne(e,t);var n=r.filename+":"+(r.initialOffset+t),a=inflationCache[n];return a&&t+a.total_in>e.byteLength?_inflateOne(e,t):(a||(a=_inflateOne(e,t)),!a.err&&a.buffer&&(inflationCache[n]=a),a)}function inflateConcatenatedGzip(e,t,r){var n=0,a=[];void 0===t&&(t=e.byteLength);do{var i=cachedInflateOne(e,n,r);if(i.err)throw"Gzip error: "+i.msg;i.buffer&&a.push({offset:n,compressedLength:i.total_in,buffer:i.buffer}),n+=i.total_in}while(n<=t&&n<e.byteLength);return a}function inflateGzip(e){return concatArrayBuffers(inflateConcatenatedGzip(e).map(function(e){return e.buffer}))}function altContigName(e){return"chr"==e.slice(0,3)?e.slice(3):"chr"+e}function isChrMatch(e,t){return e==t||"chr"+e==t||e=="chr"+t}function pipePromise(e,t){t.then(e.resolve,e.reject,e.notify)}function scaleRange(e,t){var r=e.stop-e.start,n=Math.floor((e.start+e.stop)/2),a=2*Math.round(t*r/2),i=n-a/2,u=n+a/2;return i<0&&(u-=i,i=0),new _Interval2.default(i,u)}function parseRange(e){var t=/^([^ :]+):([0-9,]+)-([0-9,]+)$/.exec(e);return t?{contig:t[1],start:parseNumberWithCommas(t[2]),stop:parseNumberWithCommas(t[3])}:(t=/^([^ :]+):([0-9,]+)$/.exec(e))?{contig:t[1],start:parseNumberWithCommas(t[2])}:(t=/^([0-9,]+)-([0-9,]+)$/.exec(e))?{start:parseNumberWithCommas(t[1]),stop:parseNumberWithCommas(t[2])}:(t=/^([^ :]+):$/.exec(e)||/^([^0-9][^ :]+)$/.exec(e))?{contig:t[1]}:(t=/^([0-9,]+)$/.exec(e),t?{start:parseNumberWithCommas(t[1])}:null)}function formatInterval(e){return numberWithCommas(e.start)+"-"+numberWithCommas(e.stop)}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function parseNumberWithCommas(e){return parseInt(e.replace(/,/g,""),10)}function flatMap(e,t){return _underscore2.default.flatten(e.map(t),!0)}function computePercentile(e,t){if(0===e.length)return 0;e.sort(function(e,t){return e-t});var r=(e.length-1)*t/100,n=Math.floor(r),a=Math.ceil(r);return n==a?e[n]:e[n]*(r-n)+e[a]*(a-r)}function stringToLiteral(e){var t={NaN:NaN,null:null,undefined:void 0,Infinity:1/0,"-Infinity":-1/0};return e in t?t[e]:e}var _pakoLibInflate=require("pako/lib/inflate"),_pakoLibInflate2=_interopRequireDefault(_pakoLibInflate),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),inflationCache={};module.exports={tupleLessOrEqual:tupleLessOrEqual,tupleRangeOverlaps:tupleRangeOverlaps,concatArrayBuffers:concatArrayBuffers,inflateConcatenatedGzip:inflateConcatenatedGzip,inflateGzip:inflateGzip,altContigName:altContigName,pipePromise:pipePromise,scaleRange:scaleRange,parseRange:parseRange,formatInterval:formatInterval,isChrMatch:isChrMatch,flatMap:flatMap,computePercentile:computePercentile,stringToLiteral:stringToLiteral};

},{"./Interval":185,"pako/lib/inflate":35,"underscore":178}],226:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_dataGenericFeatureJs=require("../data/genericFeature.js"),_dataGenericFeatureJs2=_interopRequireDefault(_dataGenericFeatureJs),AbstractCache=function(){function e(r){_classCallCheck(this,e),this.groups={},this.refToPileup={},this.referenceSource=r}return _createClass(e,[{key:"pileupForRef",value:function(e){if(e in this.refToPileup)return this.refToPileup[e];var r=_utils2.default.altContigName(e);return r in this.refToPileup?this.refToPileup[r]:[]}},{key:"pileupHeightForRef",value:function(e){var r=this.pileupForRef(e);return r?r.length:0}},{key:"getGroupsOverlapping",value:function(e){return _underscore2.default.filter(this.groups,function(r){return r.span.intersects(e)})}},{key:"anyGroupsOverlapping",value:function(e){for(var r in this.groups){if(this.groups[r].span.intersects(e))return!0}return!1}}]),e}();module.exports=AbstractCache;

},{"../ContigInterval":182,"../Interval":185,"../data/genericFeature.js":206,"../utils":225,"underscore":178}],227:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_dataFeature=require("../data/feature"),_dataFeature2=_interopRequireDefault(_dataFeature),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),CoverageCache=function(){function e(t){_classCallCheck(this,e),this.items={},this.refToCounts={},this.refToMaxCoverage={},this.referenceSource=t}return _createClass(e,[{key:"addItem",value:function(e){var t=e.getKey();if(!(t in this.items)){this.items[t]=e;var r=e.getCoverage(this.referenceSource);this.addToCoverage(r)}}},{key:"updateMismatches",value:function(e){var t=this._canonicalRef(e.contig);this.refToCounts[t]={},this.refToMaxCoverage[t]=0;for(var r in this.items){var a=this.items[r];if(a.getInterval().chrOnContig(e.contig)){var o=a.getCoverage(this.referenceSource);this.addToCoverage(o)}}}},{key:"addToCoverage",value:function(e){var t=this._canonicalRef(e.range.contig);t in this.refToCounts||(this.refToCounts[t]={},this.refToMaxCoverage[t]=0);for(var r=this.refToCounts[t],a=this.refToMaxCoverage[t],o=e.range,i=o.start(),n=o.stop(),s=i;s<=n;s++){var u=r[s];u||(r[s]=u={count:0}),u.count+=1,u.count>a&&(a=u.count)}if(e.opInfo){var f=!0,c=!1,l=void 0;try{for(var h,v=e.opInfo.mismatches[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var C,g=h.value,d=r[g.pos];d.mismatches?C=d.mismatches:(C=d.mismatches={},d.ref=this.referenceSource.getRangeAsString({contig:t,start:g.pos,stop:g.pos}));var u=C[g.basePair]||0;C[g.basePair]=1+u}}catch(e){c=!0,l=e}finally{try{!f&&v.return&&v.return()}finally{if(c)throw l}}}this.refToMaxCoverage[t]=a}},{key:"maxCoverageForRef",value:function(e){return this.refToMaxCoverage[e]||this.refToMaxCoverage[_utils2.default.altContigName(e)]||0}},{key:"binsForRef",value:function(e){return this.refToCounts[e]||this.refToCounts[_utils2.default.altContigName(e)]||{}}},{key:"_canonicalRef",value:function(e){if(this.refToCounts[e])return e;var t=_utils2.default.altContigName(e);return this.refToCounts[t]?t:e}}]),e}();module.exports=CoverageCache;

},{"../data/feature":200,"../utils":225}],228:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderBars(e,t,a,r,n,i){if(!_underscore2.default.isEmpty(n)){for(var o=t(1)-t(0),s=o>_style2.default.COVERAGE_MIN_BAR_WIDTH_FOR_GAP,l=s?1:0,u=function(e,r){return{barX1:Math.round(t(1+e)),barX2:Math.round(t(2+e))-l,barY:Math.round(a(r))}},c={},f=a(0),h=r.start(),_=r.stop(),d=null,p=h;p<_;p++){var v=n[p];if(v){if(!d){var g=u(p,v.count),C=g.barX1;e.fillStyle=_style2.default.COVERAGE_BIN_COLOR,e.beginPath(),e.moveTo(C,f)}e.pushObject(v);var y=u(p,v.count),O=y.barX1,T=y.barX2,R=y.barY;e.lineTo(O,R),e.lineTo(T,R),s&&(e.lineTo(T,f),e.lineTo(T+1,f)),SHOW_MISMATCHES&&!_underscore2.default.isEmpty(v.mismatches)&&(c[p]=v),d=p,e.popObject()}}if(d){var b=u(d,0),T=b.barX2;e.lineTo(T,f),e.closePath(),e.fill()}_underscore2.default.each(c,function(t,r){if(t.mismatches){var n=_underscore2.default.clone(t.mismatches);r=Number(r);var o=_underscore2.default.reduce(n,function(e,t){return e+t});_underscore2.default.max(n)>MISMATCH_THRESHOLD&&o>i.vafColorThreshold*t.count&&o<t.count&&t.ref&&(n[t.ref]=t.count-o);var s=u(r,t.count),l=s.barX1,c=s.barX2;e.pushObject(t);var f=0;_underscore2.default.chain(n).map(function(e,t){return{count:e,base:t}}).filter(function(e){return e.count>MISMATCH_THRESHOLD}).sortBy(function(e){return-e.count}).each(function(t){var n=t.count,i=t.base,o={position:1+r,count:n,base:i};e.pushObject(o),e.fillStyle=_style2.default.BASE_COLORS[i];var s=a(f);e.fillRect(l,s,Math.max(1,c-l),a(f+n)-s),f+=n,e.popObject()}),e.popObject()}})}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,i=t,o=a;r=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=i,a=o,r=!0,s=u=void 0}},_dataFeature=require("../data/feature"),_dataFeature2=_interopRequireDefault(_dataFeature),_react=require("react"),_react2=_interopRequireDefault(_react),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_CoverageCache=require("./CoverageCache"),_CoverageCache2=_interopRequireDefault(_CoverageCache),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_style=require("../style"),_style2=_interopRequireDefault(_style),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),SHOW_MISMATCHES=!0,MISMATCH_THRESHOLD=1,CoverageTiledCanvas=function(e){function t(e,a,r){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.cache=e,this.height=Math.max(1,a),this.options=r}return _inherits(t,e),_createClass(t,[{key:"heightForRef",value:function(e){return this.height}},{key:"update",value:function(e,t){this.height=Math.max(1,e),this.options=t}},{key:"yScaleForRef",value:function(e,t,a){var r=this.cache.maxCoverageForRef(e);return _scale2.default.linear().domain([r,0]).range([t,this.height-a]).nice()}},{key:"render",value:function(e,t,a){var r=this.cache.binsForRef(a.contig);renderBars(e,t,this.yScaleForRef(a.contig,10,10),new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1),r,this.options)}}]),t}(_TiledCanvas3.default),CoverageTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _CoverageCache2.default(this.props.referenceSource),this.tiles=new CoverageTiledCanvas(this.cache,this.props.height,this.props.options),this.props.source.on("newdata",function(t){var a=e.cache.maxCoverageForRef(t.contig);e.props.source.getFeaturesInRange(t).forEach(function(t){return e.cache.addItem(t)}),a!=e.cache.maxCoverageForRef(t.contig)?e.tiles.invalidateAll():e.tiles.invalidateRange(t),e.visualizeCoverage()}),this.props.referenceSource.on("newdata",function(t){e.cache.updateMismatches(t),e.tiles.invalidateRange(t),e.visualizeCoverage()})}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)||(this.props.height==e.height&&this.props.options==e.options||(this.tiles.update(this.props.height,this.props.options),this.tiles.invalidateAll()),this.visualizeCoverage())}},{key:"getContext",value:function(){return this.refs.canvas.getContext("2d")}},{key:"renderTicks",value:function(e,t){var a=t.domain()[0];[0,Math.round(a/2),a].forEach(function(a){e.pushObject({value:a,type:"tick"});var r=Math.round(t(a));e.strokeStyle=_style2.default.COVERAGE_FONT_COLOR,_canvasUtils2.default.drawLine(e,0,r,_style2.default.COVERAGE_TICK_LENGTH,r),e.popObject();var n=a+"X";e.pushObject({value:a,label:n,type:"label"}),e.font=_style2.default.COVERAGE_FONT_STYLE;var i=_style2.default.COVERAGE_TICK_LENGTH+_style2.default.COVERAGE_TEXT_PADDING,o=r+_style2.default.COVERAGE_TEXT_Y_OFFSET;e.strokeStyle="white",e.lineWidth=2,e.strokeText(n,i,o),e.lineWidth=1,e.fillStyle=_style2.default.COVERAGE_FONT_COLOR,e.fillText(n,i,o),e.popObject()})}},{key:"visualizeCoverage",value:function(){var e=this.refs.canvas,t=this.props.width,a=this.props.height,r=_ContigInterval2.default.fromGenomeRange(this.props.range);if(0!==t){_d3utils2.default.sizeCanvas(e,t,a);var n=_dataCanvas2.default.getDataContext(this.getContext());n.save(),n.reset(),n.clearRect(0,0,n.canvas.width,n.canvas.height);var i=this.tiles.yScaleForRef(r.contig,10,10);this.tiles.renderToScreen(n,r,this.getScale()),this.renderTicks(n,i),n.restore()}}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,r=_ContigInterval2.default.fromGenomeRange(this.props.range),n=this.getScale(),i=this.cache.binsForRef(r.contig),o=Math.floor(n.invert(a))-1,s=i[o],l=window.alert||console.log;if(s){var u=s.mismatches?_underscore2.default.reduce(s.mismatches,function(e,t){return e+t}):0,c=s.ref||this.props.referenceSource.getRangeAsString({contig:r.contig,start:o,stop:o}),f=_underscore2.default.extend({position:r.contig+":"+(1+o),"read depth":s.count},s.mismatches);f[c]=s.count-u,l(JSON.stringify(f,null,"  "))}}}]),t}(_react2.default.Component);CoverageTrack.displayName="coverage",CoverageTrack.defaultOptions={vafColorThreshold:.2},module.exports=CoverageTrack;

},{"../ContigInterval":182,"../data/feature":200,"../scale":213,"../style":223,"./CoverageCache":227,"./TiledCanvas":239,"./canvas-utils":241,"./d3utils":242,"data-canvas":4,"react":176,"shallow-equals":177,"underscore":178}],229:[function(require,module,exports){
"use strict";var DisplayMode={LOOSE:1,TIGHT:2,BLOCKS:3,HIDDEN:4,getDisplayMode:function(e){return e>=25?DisplayMode.LOOSE:e>=10?DisplayMode.TIGHT:e>=1?DisplayMode.BLOCKS:DisplayMode.HIDDEN},isText:function(e){return e==DisplayMode.LOOSE||e==DisplayMode.TIGHT}};module.exports=DisplayMode;

},{}],230:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderFeatures(e,t,a,r){e.font=_style2.default.GENE_FONT_SIZE+"px "+_style2.default.GENE_FONT,e.textAlign="center",r.forEach(function(r){var i=r.items[0].gFeature;if(r.span.intersects(a)){e.pushObject(i),e.lineWidth=1;var n=Math.max(i.score/1e3,.2);e.fillStyle="rgba(0, 0, 0, "+n+")";var s=Math.round(t(r.span.start())),u=Math.ceil(t(r.span.stop())-t(r.span.start())),o=(0,_pileuputils.yForRow)(r.row);e.fillRect(s-.5,o,u,_style2.default.READ_HEIGHT),e.popObject()}})}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var i=e,n=t,s=a;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,n);if(void 0!==u){if("value"in u)return u.value;var o=u.get;if(void 0===o)return;return o.call(s)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=n,a=s,r=!0,u=l=void 0}},_dataFeature=require("../data/feature"),_dataFeature2=_interopRequireDefault(_dataFeature),_dataGenericFeature=require("../data/genericFeature"),_dataGenericFeature2=_interopRequireDefault(_dataGenericFeature),_GenericFeatureCache=require("./GenericFeatureCache"),_react=require("react"),_react2=_interopRequireDefault(_react),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_RemoteRequest=require("../RemoteRequest"),_RemoteRequest2=_interopRequireDefault(_RemoteRequest),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_pileuputils=require("./pileuputils"),FeatureTiledCanvas=function(e){function t(e,a,r){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.cache=a,this.options=r}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.options=e}},{key:"heightForRef",value:function(e){return this.cache.pileupHeightForRef(e)*(_style2.default.READ_HEIGHT+_style2.default.READ_SPACING)}},{key:"render",value:function(e,t,a,r,i){var n=this,s=new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1);this.source.getFeaturesInRange(s,i).forEach(function(e){return n.cache.addFeature(new _dataGenericFeature2.default(e.id,e.position,e))}),renderFeatures(e,t,s,this.cache.getGroupsOverlapping(s))}}]),t}(_TiledCanvas3.default),FeatureTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e={height:"100%"},t=null;return this.state.networkStatus&&(t=_react2.default.createElement("div",{ref:"status",className:"network-status-small"},_react2.default.createElement("div",{className:"network-status-message-small"},"Loading features"))),this.props.range.stop-this.props.range.start>_RemoteRequest2.default.MONSTER_REQUEST?_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"center"},"Zoom in to see features"),_react2.default.createElement("canvas",{onClick:this.handleClick.bind(this)})):_react2.default.createElement("div",null,t,_react2.default.createElement("div",{ref:"container",style:e},_react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})))}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _GenericFeatureCache.GenericFeatureCache(this.props.referenceSource),this.tiles=new FeatureTiledCanvas(this.props.source,this.cache,this.props.options),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.referenceSource.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)||(this.tiles.update(this.props.options),this.tiles.invalidateAll(),this.updateVisualization())}},{key:"updateVisualization",value:function(){var e=this.refs.canvas,t=this.props.width,a=this.props.range,r=new _ContigInterval2.default(a.contig,a.start,a.stop);if(0!==t&&void 0!==e){var i=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));i.reset(),i.clearRect(0,0,i.canvas.width,i.canvas.height);var n=_d3utils2.default.findParent(e,"features"),s=(0,_pileuputils.yForRow)(this.cache.pileupHeightForRef(this.props.range.contig));s=_d3utils2.default.heightForCanvas(e,s),n&&(n.style.height=s+"px"),_d3utils2.default.sizeCanvas(e,t,s),this.tiles.renderToScreen(i,r,this.getScale())}}},{key:"handleClick",value:function(e){var t=window.devicePixelRatio,a=e.nativeEvent,r=a.offsetX,i=a.offsetY/t,n=_canvasUtils2.default.getContext(this.refs.canvas),s=new _dataCanvas2.default.ClickTrackingContext(n,r,i),u=this.props.range,o=new _ContigInterval2.default(u.contig,u.start-1,u.stop+1);renderFeatures(s,this.getScale(),o,this.cache.getGroupsOverlapping(o));var l=_underscore2.default.find(s.hits[0],function(e){return e});if(l)if("function"==typeof this.props.options.onFeatureClicked)this.props.options.onFeatureClicked(l);else{var c=window.alert||console.log,p=_underscore2.default.extend({id:l.id,range:l.position.contig+":"+l.position.start()+"-"+l.position.stop(),score:l.score});c(JSON.stringify(p,null,"  "))}}}]),t}(_react2.default.Component);FeatureTrack.displayName="features",module.exports=FeatureTrack;

},{"../ContigInterval":182,"../RemoteRequest":189,"../data/feature":200,"../data/genericFeature":206,"../style":223,"./GenericFeatureCache":232,"./TiledCanvas":239,"./canvas-utils":241,"./d3utils":242,"./pileuputils":243,"data-canvas":4,"react":176,"shallow-equals":177,"underscore":178}],231:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function drawArrow(e,t,a,r,n){var i=t(1+a.start),o=t(1+a.stop);if(!(o-i<=2*_style2.default.GENE_ARROW_SIZE)){var u=(i+o)/2;e.beginPath(),"-"==n?(e.moveTo(u+_style2.default.GENE_ARROW_SIZE,r-_style2.default.GENE_ARROW_SIZE),e.lineTo(u,r),e.lineTo(u+_style2.default.GENE_ARROW_SIZE,r+_style2.default.GENE_ARROW_SIZE)):(e.moveTo(u-_style2.default.GENE_ARROW_SIZE,r-_style2.default.GENE_ARROW_SIZE),e.lineTo(u,r),e.lineTo(u-_style2.default.GENE_ARROW_SIZE,r+_style2.default.GENE_ARROW_SIZE)),e.stroke()}}function drawGeneName(e,t,a,r,n){var i=r.position,o=.5*(t(1+i.start())+t(1+i.stop())),u=_underscore2.default.isEmpty(_utils2.default.stringToLiteral(r.name))?r.id:r.name,l=e.measureText(u).width,s=new _Interval2.default(o-.5*l,o+.5*l);if(!_underscore2.default.any(n,function(e){return s.intersects(e)})){n.push(s);var c=a+_style2.default.GENE_FONT_SIZE+_style2.default.GENE_TEXT_PADDING;e.fillText(u,o,c)}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,i=t,o=a;r=!1,null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(o)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=i,a=o,r=!0,u=s=void 0}},_dataGene=require("../data/gene"),_dataGene2=_interopRequireDefault(_dataGene),_dataGenericFeature=require("../data/genericFeature"),_dataGenericFeature2=_interopRequireDefault(_dataGenericFeature),_GenericFeatureCache=require("./GenericFeatureCache"),_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_dataBedtools=require("../data/bedtools"),_dataBedtools2=_interopRequireDefault(_dataBedtools),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),GeneTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",null)}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _GenericFeatureCache.GenericFeatureCache(this.props.referenceSource),this.props.source.on("newdata",function(t){e.props.source.getFeaturesInRange(t).forEach(function(t){return e.cache.addFeature(new _dataGenericFeature2.default(t.id,t.position,t))}),e.updateVisualization()}),this.props.referenceSource.on("newdata",function(t){e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)||this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.width,r=t.height,n=this.props.range,i=new _ContigInterval2.default(n.contig,n.start,n.stop);if(0!==a){var o=this.getScale(),u=_scale2.default.linear().domain([o.invert(0),o.invert(a)]).range([0,a]).clamp(!0);if(e&&e instanceof Element){e instanceof HTMLCanvasElement&&_d3utils2.default.sizeCanvas(e,a,r);var l=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));l.reset(),l.clearRect(0,0,l.canvas.width,l.canvas.height);var s=Math.round(r/4),c=[];l.font=_style2.default.GENE_FONT_SIZE+"px "+_style2.default.GENE_FONT,l.textAlign="center";_underscore2.default.flatten(_underscore2.default.map(this.cache.getGroupsOverlapping(i),function(e){return e.items})).forEach(function(e){var t=e.gFeature;if(t.position.intersects(i)){l.pushObject(t),l.lineWidth=1,l.strokeStyle=_style2.default.GENE_COLOR,l.fillStyle=_style2.default.GENE_COLOR,_canvasUtils2.default.drawLine(l,u(1+t.position.start()),s+.5,u(1+t.position.stop()),s+.5);_dataBedtools2.default.splitCodingExons(t.exons,t.codingRegion).forEach(function(e){l.fillRect(o(1+e.start),s-3*(e.isCoding?2:1),o(e.stop+2)-o(1+e.start),6*(e.isCoding?2:1))});t.position.interval.complementIntervals(t.exons).forEach(function(e){drawArrow(l,u,e,s+.5,t.strand)}),l.strokeStyle=_style2.default.GENE_COMPLEMENT_COLOR,l.lineWidth=2,t.exons.forEach(function(e){drawArrow(l,u,e,s+.5,t.strand)}),drawGeneName(l,u,s,t,c),l.popObject()}})}}}}]),t}(_react2.default.Component);GeneTrack.displayName="genes",module.exports=GeneTrack;

},{"../ContigInterval":182,"../Interval":185,"../data/bedtools":199,"../data/gene":205,"../data/genericFeature":206,"../scale":213,"../style":223,"../utils":225,"./GenericFeatureCache":232,"./canvas-utils":241,"./d3utils":242,"data-canvas":4,"react":176,"react-dom":49,"shallow-equals":177,"underscore":178}],232:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_get=function(e,t,r){for(var i=!0;i;){var n=e,o=t,u=r;i=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,o);if(void 0!==a){if("value"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(u)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=o,r=u,i=!0,a=s=void 0}},_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_dataGenericFeatureJs=require("../data/genericFeature.js"),_dataGenericFeatureJs2=_interopRequireDefault(_dataGenericFeatureJs),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_pileuputils=require("./pileuputils"),_AbstractCache2=require("./AbstractCache"),_AbstractCache3=_interopRequireDefault(_AbstractCache2),GenericFeatureCache=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"groupKey",value:function(e){return e.id||e.position.toString()}},{key:"addFeature",value:function(e){var t=this.groupKey(e);t in this.groups||(this.groups[t]={key:t,span:e.position,row:-1,insert:null,items:[]});var r=this.groups[t];if(!_underscore2.default.find(r.items,function(t){return t.gFeature==e.gFeature})){r.items.push(e),e.position.contig in this.refToPileup||(this.refToPileup[e.position.contig]=[]);var i=this.refToPileup[e.position.contig];r.row=(0,_pileuputils.addToPileup)(r.span.interval,i)}}}]),t}(_AbstractCache3.default);module.exports={GenericFeatureCache:GenericFeatureCache};

},{"../Interval":185,"../data/genericFeature.js":206,"./AbstractCache":226,"./pileuputils":243,"underscore":178}],233:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderGenome(e,t,a,i,r){var n=t(1)-t(0),l=_DisplayMode2.default.getDisplayMode(n),o=_DisplayMode2.default.isText(l),s=a/window.devicePixelRatio;if(l!=_DisplayMode2.default.HIDDEN){e.textAlign="center",e.font=_style2.default.TEXT_STYLE(l,s);for(var u=null,c=i.start(),f=i.stop(),p=c;p<=f;p++){var _=r[p-c];"."!=_&&(e.save(),e.pushObject({pos:p,letter:_}),e.fillStyle=_style2.default.BASE_COLORS[_],o?e.fillText(_,t(1.5+p),s):n>=_style2.default.COVERAGE_MIN_BAR_WIDTH_FOR_GAP?e.fillRect(t(1+p)+.5,0,n-1.5,s):u===_?e.fillRect(t(1+p)-1.5,0,n+1.5,s):e.fillRect(t(1+p)-.5,0,n+1.5,s),e.popObject(),e.restore(),u=_)}}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),_get=function(e,t,a){for(var i=!0;i;){var r=e,n=t,l=a;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,n);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=n,a=l,i=!0,o=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_DisplayMode=require("./DisplayMode"),_DisplayMode2=_interopRequireDefault(_DisplayMode),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_style=require("../style"),_style2=_interopRequireDefault(_style),GenomeTiledCanvas=function(e){function t(e,a){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.height=Math.max(1,a)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(e,t,a){var i={contig:a.contig,start:Math.max(0,a.start()-1),stop:a.stop()+1},r=this.source.getRangeAsString(i);renderGenome(e,t,this.height,_ContigInterval2.default.fromGenomeRange(i),r)}},{key:"heightForRef",value:function(e){return this.height}},{key:"updateHeight",value:function(e){this.height=e}}]),t}(_TiledCanvas3.default),GenomeTrack=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",null)}},{key:"componentDidMount",value:function(){var e=this;this.tiles=new GenomeTiledCanvas(this.props.source,this.props.height),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||(this.props.height!=e.height&&(this.tiles.updateHeight(this.props.height),this.tiles.invalidateAll()),this.updateVisualization())}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.width,i=t.height,r=t.range;if(0!==a&&e&&e instanceof Element){e instanceof HTMLCanvasElement&&_d3utils2.default.sizeCanvas(e,a,i);var n=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));n.reset(),n.clearRect(0,0,n.canvas.width,n.canvas.height),this.tiles.renderToScreen(n,_ContigInterval2.default.fromGenomeRange(r),this.getScale())}}}]),t}(_react2.default.Component);GenomeTrack.displayName="reference",module.exports=GenomeTrack;

},{"../ContigInterval":182,"../style":223,"./DisplayMode":229,"./TiledCanvas":239,"./canvas-utils":241,"./d3utils":242,"data-canvas":4,"react":176,"react-dom":49,"shallow-equals":177}],234:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderGenotypes(e,t,a,n,l){n.forEach(function(a){var n=a.variant;e.pushObject(n);var r=Math.round(t(n.position)),s=Math.max(1,Math.round(t(n.position+1)-t(n.position)));a.calls.forEach(function(t){var a=yForRow(l.indexOf(t.callSetName));e.fillStyle=1==t.genotype.reduce(function(e,t){return e+t},0)?_style2.default.GENOTYPE_FILL_HET:_style2.default.GENOTYPE_FILL_HOM,e.strokeStyle=e.fillStyle,e.fillRect(r-.2,a,s,_style2.default.GENOTYPE_HEIGHT),e.strokeRect(r-.2,a,s,_style2.default.GENOTYPE_HEIGHT)}),e.popObject()})}function yForRow(e){return e*(_style2.default.GENOTYPE_HEIGHT+_style2.default.GENOTYPE_SPACING)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_get=function(e,t,a){for(var n=!0;n;){var l=e,r=t,s=a;n=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var o=i.get;if(void 0===o)return;return o.call(s)}var u=Object.getPrototypeOf(l);if(null===u)return;e=u,t=r,a=s,n=!0,i=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),MONSTER_REQUEST=1e4,LABEL_WIDTH=100,GenotypeTiledCanvas=function(e){function t(e,a,n){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.options=n,this.callSetNames=a}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.options=e}},{key:"heightForRef",value:function(e){return yForRow(this.callSetNames.length)}},{key:"render",value:function(e,t,a,n){var l=new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1);renderGenotypes(e,t,l,this.source.getGenotypesInRange(l),this.callSetNames)}}]),t}(_TiledCanvas3.default),GenotypeTrack=function(e){function t(e){var a=this;_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.callSetNames=[],this.state={networkStatus:null},e.source.getCallNames().then(function(e){a.callSetNames=e,a.tiles.callSetNames=e,a.tiles.invalidateAll(),a.updateVisualization()})}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e={height:"100%"},t={float:"left",overflow:"hidden","width:":LABEL_WIDTH+"px"},a={overflow:"hidden"},n=null;return this.state.networkStatus&&(n=_react2.default.createElement("div",{ref:"status",className:"network-status-small"},_react2.default.createElement("div",{className:"network-status-message-small"},"Loading Genotypes"))),this.props.range.stop-this.props.range.start>=MONSTER_REQUEST?_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"center"},"Zoom in to see genotypes"),_react2.default.createElement("canvas",{onClick:this.handleClick.bind(this)})):_react2.default.createElement("div",null,n,_react2.default.createElement("div",{ref:"container",style:e},_react2.default.createElement("div",{className:"genotypeLabels",style:t},_react2.default.createElement("canvas",{ref:"labelCanvas"})),_react2.default.createElement("div",{className:"genotypeRows",style:a},_react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)}))))}},{key:"componentDidMount",value:function(){var e=this;this.tiles=new GenotypeTiledCanvas(this.props.source,this.callSetNames,this.props.options),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width-LABEL_WIDTH)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||(this.tiles.update(this.props.options),this.tiles.invalidateAll(),this.updateVisualization())}},{key:"drawLines",value:function(e){var t=this,a=this.props.width;null!==this.callSetNames&&(e.font="9px Arial",this.callSetNames.forEach(function(n){e.pushObject(n);var l=yForRow(t.callSetNames.indexOf(n));e.fillStyle=_style2.default.BACKGROUND_FILL,e.fillRect(0,l,a,_style2.default.GENOTYPE_HEIGHT),e.popObject()}))}},{key:"drawLabels",value:function(){var e=this,t=this.refs.labelCanvas;if(0!==this.props.width&&void 0!==t){var a=yForRow(this.callSetNames.length);if(t.clientHeight!=a){var n=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(t));_d3utils2.default.sizeCanvas(t,LABEL_WIDTH,a),null!==this.callSetNames&&(n.font="9px Arial",this.callSetNames.forEach(function(t){n.pushObject(t);var a=yForRow(e.callSetNames.indexOf(t));n.fillStyle="black",n.fillText(t,0,a+_style2.default.GENOTYPE_HEIGHT),n.popObject()}))}}}},{key:"updateVisualization",value:function(){var e=this.refs.canvas,t=this.props.width;if(0!==t&&void 0!==e){var a=yForRow(this.callSetNames.length);_d3utils2.default.sizeCanvas(e,t-LABEL_WIDTH,a);var n=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));this.drawLabels(),this.renderScene(n)}}},{key:"renderScene",value:function(e){var t=this.props.range,a=new _ContigInterval2.default(t.contig,t.start,t.stop),n=this.getScale();e.reset(),e.clearRect(0,0,e.canvas.width,e.canvas.height),this.drawLines(e),this.tiles.renderToScreen(e,a,n),e.restore()}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,n=this.props.range,l=new _ContigInterval2.default(n.contig,n.start-1,n.stop+1),r=this.getScale(),s=Math.floor(r.invert(a))-2,i=s+2,o=this.props.source.getGenotypesInRange(l),u=_underscore2.default.find(o,function(e){return _utils2.default.tupleRangeOverlaps([[e.variant.position],[e.variant.position+1]],[[s],[i]])}),c=window.alert||console.log;if(u){var f="variant: "+JSON.stringify(u.variant),p=u.calls.map(function(e){return e.callSetName});c(f+"\n"+("samples with variant: "+JSON.stringify(p)))}}}]),t}(_react2.default.Component);GenotypeTrack.displayName="genotypes",module.exports=GenotypeTrack;

},{"../ContigInterval":182,"../style":223,"../utils":225,"./TiledCanvas":239,"./canvas-utils":241,"./d3utils":242,"data-canvas":4,"react":176,"shallow-equals":177,"underscore":178}],235:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,o=t,i=a;r=!1,null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,o);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(i)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=o,a=i,r=!0,u=s=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_sourcesEmptySource=require("../sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),LocationTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"render",value:function(){return _react2.default.createElement("canvas",null)}},{key:"componentDidMount",value:function(){this.updateVisualization()}},{key:"componentDidUpdate",value:function(e,t){this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.range,r=t.width,n=t.height,o=this.getScale();if(e&&e instanceof Element){e instanceof HTMLCanvasElement&&_d3utils2.default.sizeCanvas(e,r,n);var i=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));i.save(),i.reset(),i.clearRect(0,0,i.canvas.width,i.canvas.height);var u=Math.floor((a.stop+a.start)/2),l=Math.round(o(u+1)),s=Math.round(o(u));_canvasUtils2.default.drawLine(i,s-.5,0,s-.5,n),_canvasUtils2.default.drawLine(i,l-.5,0,l-.5,n);var c=n/2;i.fillStyle=_style2.default.LOC_FONT_COLOR,i.font=_style2.default.LOC_FONT_STYLE,i.fillText(u.toLocaleString()+" bp",l+_style2.default.LOC_TICK_LENGTH+_style2.default.LOC_TEXT_PADDING,c+_style2.default.LOC_TEXT_Y_OFFSET),_canvasUtils2.default.drawLine(i,l-.5,c-.5,l+_style2.default.LOC_TICK_LENGTH-.5,c-.5),i.restore()}}}]),t}(_react2.default.Component);LocationTrack.displayName="location",LocationTrack.defaultSource=_sourcesEmptySource2.default.create(),module.exports=LocationTrack;

},{"../sources/EmptySource":216,"../style":223,"./canvas-utils":241,"./d3utils":242,"data-canvas":4,"react":176,"react-dom":49}],236:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function spanAndInsert(e){for(var t=!0;t;){var r=e;if(t=!1,1==r.length)return{insert:null,span:r[0]};if(2!=r.length)throw"Called spanAndInsert with "+r.length+" \notin [1, 2]";if(r[0].chrOnContig(r[1].contig)){var n=r[0].interval,i=r[1].interval,u=n.start<i.start?new _Interval2.default(n.stop,i.start):new _Interval2.default(i.stop,n.start),a=_Interval2.default.boundingInterval([n,i]);return{insert:u,span:new _ContigInterval2.default(r[0].contig,a.start,a.stop)}}e=[r[0]],t=!0}}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var i=e,u=t,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,u);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=u,r=a,n=!0,s=l=void 0}},_AbstractCache2=require("./AbstractCache"),_AbstractCache3=_interopRequireDefault(_AbstractCache2),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_pileuputils=require("./pileuputils"),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),MIN_OUTLIER_PERCENTILE=.5,MAX_OUTLIER_PERCENTILE=99.5,MAX_INSERT_SIZE=3e4,MIN_READS_FOR_OUTLIERS=500,PileupCache=function(e){function t(e,r){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.viewAsPairs=r,this._insertStats=null}return _inherits(t,e),_createClass(t,[{key:"groupKey",value:function(e){return this.viewAsPairs?e.name+":"+e.ref:e.getKey()}},{key:"addAlignment",value:function(e){this._insertStats=null;var t=this.groupKey(e),r=e.getInterval();t in this.groups||(this.groups[t]={key:t,row:-1,insert:null,span:r,items:[]});var n=this.groups[t];if(!_underscore2.default.find(n.items,function(t){return t.read==e})){var i=(0,_pileuputils.getOpInfo)(e,this.referenceSource),u={read:e,strand:e.getStrand(),refLength:r.length(),ops:i.ops,mismatches:i.mismatches};n.items.push(u);var a=null;if(1==n.items.length){if(this.viewAsPairs){var s=e.getMateProperties(),o=[r];s&&s.ref&&s.ref==e.ref&&(a=new _ContigInterval2.default(s.ref,s.pos,s.pos+r.length()),o.push(a)),n=_underscore2.default.extend(n,spanAndInsert(o))}else n.span=r;e.ref in this.refToPileup||(this.refToPileup[e.ref]=[]);var l=this.refToPileup[e.ref];n.row=(0,_pileuputils.addToPileup)(n.span.interval,l)}else if(2==n.items.length){a=n.items[0].read.getInterval();var f=spanAndInsert([r,a]),c=f.span,p=f.insert;n.insert=p,p&&(n.span=c)}}}},{key:"updateMismatches",value:function(e){for(var t in this.groups){var r=this.groups[t].items,n=!0,i=!1,u=void 0;try{for(var a,s=r[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l=o.read;if(l.getInterval().intersects(e)){var f=(0,_pileuputils.getOpInfo)(l,this.referenceSource);o.mismatches=f.mismatches}}}catch(e){i=!0,u=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw u}}}}},{key:"sortReadsAt",value:function(e,t){var r=this.pileupForRef(e),n=_underscore2.default.filter(this.groups,function(r){return _underscore2.default.any(r.items,function(r){return r.read.getInterval().containsLocus(e,t)})}),i=_underscore2.default.mapObject(_underscore2.default.groupBy(n,function(e){return e.row}),function(e){return _underscore2.default.min(e,function(e){return e.span.start()}).span.start()}),u=_underscore2.default.sortBy(_underscore2.default.range(0,r.length),function(e){return i[e]||1/0}),a=[];u.forEach(function(e,t){a[e]=t});var s=_underscore2.default.range(0,r.length).map(function(e){return r[a[e]]}),o=e in this.refToPileup?e:_utils2.default.altContigName(e);this.refToPileup[o]=s,_underscore2.default.each(this.groups,function(t){t.span.chrOnContig(e)&&(t.row=a[t.row])})}},{key:"getInsertStats",value:function(){if(this._insertStats)return this._insertStats;var e=_underscore2.default.map(this.groups,function(e){return e.items[0].read.getInferredInsertSize()}).filter(function(e){return e<MAX_INSERT_SIZE}),t=e.length>=MIN_READS_FOR_OUTLIERS?{minOutlierSize:_utils2.default.computePercentile(e,MIN_OUTLIER_PERCENTILE),maxOutlierSize:_utils2.default.computePercentile(e,MAX_OUTLIER_PERCENTILE)}:{minOutlierSize:0,maxOutlierSize:1/0};return this._insertStats=t,t}}]),t}(_AbstractCache3.default);module.exports=PileupCache;

},{"../ContigInterval":182,"../Interval":185,"../utils":225,"./AbstractCache":226,"./pileuputils":243,"underscore":178}],237:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function isRendered(e){return e.op==_pileuputils.CigarOp.MATCH||e.op==_pileuputils.CigarOp.DELETE||e.op==_pileuputils.CigarOp.INSERT}function renderPileup(e,t,a,i,s,r){function n(a,i,s,r){var n=t(a+1),l=t(a+i+1),o=s+_style2.default.READ_HEIGHT,u=Math.min(READ_STRAND_ARROW_WIDTH,(l-n)/6);e.beginPath(),"R"==r?(e.moveTo(n,s),e.lineTo(l-u,s),e.lineTo(l,(s+o)/2),e.lineTo(l-u,o),e.lineTo(n,o)):(e.moveTo(l,s),e.lineTo(n+u,s),e.lineTo(n,(s+o)/2),e.lineTo(n+u,o),e.lineTo(l,o)),e.fill()}function l(a,i,s){switch(a.op){case _pileuputils.CigarOp.MATCH:if(a.arrow)n(a.pos,a.length,i,a.arrow);else{var r=t(a.pos+1);e.fillRect(r,i,t(a.pos+a.length+1)-r,_style2.default.READ_HEIGHT)}break;case _pileuputils.CigarOp.DELETE:var l=t(a.pos+1),o=t(a.pos+1+a.length),u=i+_style2.default.READ_HEIGHT/2-.5;e.save(),e.fillStyle=_style2.default.DELETE_COLOR,e.fillRect(l,u,o-l,1),e.restore();break;case _pileuputils.CigarOp.INSERT:e.save(),e.fillStyle=_style2.default.INSERT_COLOR;var c=t(a.pos+1)-2,p=i-1,d=i+_style2.default.READ_HEIGHT+2;e.fillRect(c,p,1,d-p),e.restore()}}function o(t,a){e.pushObject(t),e.save(),s&&(e.fillStyle="+"==t.strand?_style2.default.ALIGNMENT_PLUS_STRAND_COLOR:_style2.default.ALIGNMENT_MINUS_STRAND_COLOR),t.ops.forEach(function(e){isRendered(e)&&l(e,a,t)}),t.mismatches.forEach(function(e){return c(e,a)}),e.restore(),e.popObject()}function u(a){if(e.save(),i&&a.insert){var s=a.span.length();s<i.minOutlierSize?e.fillStyle="blue":s>i.maxOutlierSize?e.fillStyle="red":e.fillStyle=_style2.default.ALIGNMENT_COLOR}else e.fillStyle=_style2.default.ALIGNMENT_COLOR;var r=(0,_pileuputils.yForRow)(a.row);if(e.pushObject(a),a.insert){var n=a.insert,l=t(n.start+1),u=t(n.stop+1);e.fillRect(l,r+_style2.default.READ_HEIGHT/2-.5,u-l,1)}a.items.forEach(function(e){return o(e,r)}),e.popObject(),e.restore()}function c(i,s){a.interval.contains(i.pos)&&(e.pushObject(i),e.save(),e.fillStyle=_style2.default.BASE_COLORS[i.basePair],e.globalAlpha=opacityForQuality(i.quality),e.textAlign="center",f?e.fillText(i.basePair,t(1.5+i.pos),s+_style2.default.READ_HEIGHT-2):e.fillRect(t(1+i.pos),s,p-1,_style2.default.READ_HEIGHT),e.restore(),e.popObject())}var p=t(1)-t(0),d=_DisplayMode2.default.getDisplayMode(p),f=_DisplayMode2.default.isText(d);e.font=_style2.default.TEXT_STYLE(_DisplayMode2.default.TIGHT,_style2.default.READ_HEIGHT-1),r.forEach(function(e){return u(e)})}function opacityForQuality(e){var t=Q_SCALE(e);return t=Math.round(10*t+.5)/10,Math.min(1,t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),_get=function(e,t,a){for(var i=!0;i;){var s=e,r=t,n=a;i=!1,null===s&&(s=Function.prototype);var l=Object.getOwnPropertyDescriptor(s,r);if(void 0!==l){if("value"in l)return l.value;var o=l.get;if(void 0===o)return;return o.call(n)}var u=Object.getPrototypeOf(s);if(null===u)return;e=u,t=r,a=n,i=!0,l=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_pileuputils=require("./pileuputils"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_DisplayMode=require("./DisplayMode"),_DisplayMode2=_interopRequireDefault(_DisplayMode),_PileupCache=require("./PileupCache"),_PileupCache2=_interopRequireDefault(_PileupCache),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),READ_STRAND_ARROW_WIDTH=5,SUPPORTS_DASHES="undefined"!=typeof CanvasRenderingContext2D&&!!CanvasRenderingContext2D.prototype.setLineDash,PileupTiledCanvas=function(e){function t(e,a){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.cache=e,this.options=a}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.options=e}},{key:"heightForRef",value:function(e){return this.cache.pileupHeightForRef(e)*(_style2.default.READ_HEIGHT+_style2.default.READ_SPACING)}},{key:"render",value:function(e,t,a){var i=new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1),s=this.cache.getGroupsOverlapping(i);renderPileup(e,t,i,this.options.colorByInsert?this.cache.getInsertStats():null,this.options.colorByStrand,s)}}]),t}(_TiledCanvas3.default),MIN_Q=5,MAX_Q=20,Q_SCALE=_scale2.default.linear().domain([MIN_Q,MAX_Q]).range([.1,.9]).clamp(!0),PileupTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e={height:"100%"},t=null,a=this.state.networkStatus;if(a){var i=this.formatStatus(a);t=_react2.default.createElement("div",{ref:"status",className:"network-status"},_react2.default.createElement("div",{className:"network-status-message"},"Loading alignments (",i,")"))}return _react2.default.createElement("div",null,t,_react2.default.createElement("div",{ref:"container",style:e},_react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})))}},{key:"formatStatus",value:function(e){if(e.numRequests){var t=e.numRequests>1?"s":"";return"issued "+e.numRequests+" request"+t}if(e.status)return e.status;throw"invalid"}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _PileupCache2.default(this.props.referenceSource,this.props.options.viewAsPairs),this.tiles=new PileupTiledCanvas(this.cache,this.props.options),this.props.source.on("newdata",function(t){e.updateReads(t),e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.referenceSource.on("newdata",function(t){e.cache.updateMismatches(t),e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){var a=!1;this.props.options!=e.options&&(this.handleOptionsChange(e.options),a=!0),(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)&&!a||this.updateVisualization()}},{key:"handleOptionsChange",value:function(e){this.tiles.invalidateAll(),e.viewAsPairs!=this.props.options.viewAsPairs?(this.cache=new _PileupCache2.default(this.props.referenceSource,this.props.options.viewAsPairs),this.tiles=new PileupTiledCanvas(this.cache,this.props.options),this.updateReads(_ContigInterval2.default.fromGenomeRange(this.props.range))):e.colorByInsert!=this.props.options.colorByInsert?(this.tiles.update(this.props.options),this.tiles.invalidateAll(),this.updateVisualization()):e.hideAlignments!=this.props.options.hideAlignments&&(this.tiles.update(this.props.options),this.updateVisualization()),e.sort!=this.props.options.sort&&this.handleSort()}},{key:"updateReads",value:function(e){var t=this,a=this.cache.anyGroupsOverlapping(e);this.props.source.getFeaturesInRange(e).forEach(function(e){return t.cache.addAlignment(e)}),!a&&this.cache.anyGroupsOverlapping(e)&&this.handleSort()}},{key:"updateVisualization",value:function(){var e=this.refs.canvas;if(0!==this.props.width){var t=_canvasUtils2.default.getContext(e),a=_dataCanvas2.default.getDataContext(t);this.renderScene(a)}}},{key:"renderScene",value:function(e){var t=this.props.range,a=new _ContigInterval2.default(t.contig,t.start,t.stop),i=this.getScale(),s=this.refs.canvas,r=this.props.width;e.reset(),e.clearRect(0,0,e.canvas.width,e.canvas.height);var n=_d3utils2.default.findParent(s,"pileup");if(this.props.options.hideAlignments)return _d3utils2.default.sizeCanvas(s,r,0),void(n&&(n.style.minHeight="0px"));n&&(n.style.minHeight="");var l=(0,_pileuputils.yForRow)(this.cache.pileupHeightForRef(this.props.range.contig));_d3utils2.default.sizeCanvas(s,r,l),this.tiles.renderToScreen(e,a,i),this.renderCenterLine(e,a,i);var o=_d3utils2.default.findParent(this.refs.canvas,"track-content");o&&(o.scrollLeft=0)}},{key:"renderCenterLine",value:function(e,t,a){var i=Math.floor((t.stop()+t.start())/2),s=Math.ceil(a(i+1)),r=Math.floor(a(i)),n=e.canvas.height;if(e.save(),e.lineWidth=1,SUPPORTS_DASHES&&e.setLineDash([5,5]),s-r<3){var l=Math.round((r+s)/2);_canvasUtils2.default.drawLine(e,l-.5,0,l-.5,n)}else _canvasUtils2.default.drawLine(e,r-.5,0,r-.5,n),_canvasUtils2.default.drawLine(e,s-.5,0,s-.5,n);e.restore()}},{key:"handleSort",value:function(){var e=this.props.range,t=e.start,a=e.stop,i=(t+a)/2;this.cache.sortReadsAt(this.props.range.contig,i),this.tiles.invalidateAll(),this.updateVisualization()}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,i=t.offsetY,s=_canvasUtils2.default.getContext(this.refs.canvas),r=new _dataCanvas2.default.ClickTrackingContext(s,a,i),n=this.props.range,l=new _ContigInterval2.default(n.contig,n.start,n.stop);renderPileup(r,this.getScale(),l,null,!1,this.cache.getGroupsOverlapping(l));var o=_underscore2.default.find(r.hits[0],function(e){return e.read}),u=window.alert||console.log;o&&u(o.read.debugString())}}]),t}(_react2.default.Component);PileupTrack.displayName="pileup",PileupTrack.defaultOptions={viewAsPairs:!1,colorByInsert:!0,colorByStrand:!1,hideAlignments:!1},PileupTrack.getOptionsMenu=function(e){return[{key:"view-pairs",label:"View as pairs",checked:e.viewAsPairs},"-",{key:"color-insert",label:"Color by insert size",checked:e.colorByInsert},{key:"color-strand",label:"Color by strand",checked:e.colorByStrand},{key:"hide-alignments",label:"Hide alignments",checked:e.hideAlignments},"-",{key:"sort",label:"Sort alignments"}]};var messageId=1;PileupTrack.handleSelectOption=function(e,t){var a=_underscore2.default.clone(t);return"view-pairs"==e?(a.viewAsPairs=!a.viewAsPairs,a):"color-insert"==e?(a.colorByInsert=!a.colorByInsert,a.colorByInsert&&(a.colorByStrand=!1),a):"color-strand"==e?(a.colorByStrand=!a.colorByStrand,a.colorByStrand&&(a.colorByInsert=!1),a):"hide-alignments"==e?(a.hideAlignments=!a.hideAlignments,a):"sort"==e?(a.sort=messageId++,a):t},module.exports=PileupTrack;

},{"../ContigInterval":182,"../scale":213,"../style":223,"./DisplayMode":229,"./PileupCache":236,"./TiledCanvas":239,"./canvas-utils":241,"./d3utils":242,"./pileuputils":243,"data-canvas":4,"react":176,"shallow-equals":177,"underscore":178}],238:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var l=e,u=t,n=a;r=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,u);if(void 0!==i){if("value"in i)return i.value;var o=i.get;if(void 0===o)return;return o.call(n)}var s=Object.getPrototypeOf(l);if(null===s)return;e=s,t=u,a=n,r=!0,i=s=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_sourcesEmptySource=require("../sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),ScaleTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"render",value:function(){return _react2.default.createElement("canvas",{ref:"canvas"})}},{key:"componentDidMount",value:function(){this.updateVisualization()}},{key:"componentDidUpdate",value:function(e,t){this.updateVisualization()}},{key:"getDOMNode",value:function(){return _reactDom2.default.findDOMNode(this)}},{key:"updateVisualization",value:function(){var e=this.getDOMNode(),t=this.props,a=t.range,r=t.width,l=t.height;_d3utils2.default.sizeCanvas(e,r,l);var u=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));u.save(),u.reset(),u.clearRect(0,0,u.canvas.width,u.canvas.height);var n=a.stop-a.start+1,i=Math.round(r/2),o=Math.round(l/2),s=_d3utils2.default.formatRange(n),c=s.prefix,_=s.unit;u.lineWidth=1,u.fillStyle=_style2.default.SCALE_FONT_COLOR,u.font=_style2.default.SCALE_FONT_STYLE,u.textAlign="center",u.fillText(c+" "+_,i,o+_style2.default.SCALE_TEXT_Y_OFFSET),_canvasUtils2.default.drawLine(u,.5,o-.5,i-_style2.default.SCALE_LINE_PADDING-.5,o-.5),u.beginPath(),u.moveTo(.5+_style2.default.SCALE_ARROW_SIZE,o-_style2.default.SCALE_ARROW_SIZE-.5),u.lineTo(.5,o-.5),u.lineTo(.5+_style2.default.SCALE_ARROW_SIZE,o+_style2.default.SCALE_ARROW_SIZE-.5),u.closePath(),u.fill(),u.stroke(),_canvasUtils2.default.drawLine(u,i+_style2.default.SCALE_LINE_PADDING-.5,o-.5,r-.5,o-.5),u.beginPath(),u.moveTo(r-_style2.default.SCALE_ARROW_SIZE-.5,o-_style2.default.SCALE_ARROW_SIZE-.5),u.lineTo(r-.5,o-.5),u.lineTo(r-_style2.default.SCALE_ARROW_SIZE-.5,o+_style2.default.SCALE_ARROW_SIZE-.5),u.closePath(),u.fill(),u.stroke(),u.restore()}}]),t}(_react2.default.Component);ScaleTrack.displayName="scale",ScaleTrack.defaultSource=_sourcesEmptySource2.default.create(),module.exports=ScaleTrack;

},{"../sources/EmptySource":216,"../style":223,"./canvas-utils":241,"./d3utils":242,"data-canvas":4,"react":176,"react-dom":49}],239:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),EPSILON=1e-6,MIN_PX_PER_BUFFER=500,DEBUG_RENDER_TILE_EDGES=!1,TiledCanvas=function(){function e(){_classCallCheck(this,e),this.tileCache=[]}return _createClass(e,[{key:"renderTile",value:function(e){var t=e.range,r=this.heightForRef(t.contig),n=Math.round(e.pixelsPerBase*t.length());e.buffer=document.createElement("canvas"),_d3utils2.default.sizeCanvas(e.buffer,n,r);var a=_scale2.default.linear().domain([t.start(),t.stop()+1]).range([0,n]),i=_canvasUtils2.default.getContext(e.buffer),u=_dataCanvas2.default.getDataContext(i);this.render(u,a,t)}},{key:"makeNewTiles",value:function(t,r,n){var a=this,i=e.getNewTileRanges(t,n.interval,r),u=i.map(function(e){return{pixelsPerBase:r,range:new _ContigInterval2.default(n.contig,e.start,e.stop),buffer:document.createElement("canvas")}});return u.forEach(function(e){return a.renderTile(e)}),this.tileCache=this.tileCache.concat(u),this.tileCache.sort(function(e,t){return _ContigInterval2.default.compare(e.range,t.range)}),u}},{key:"renderToScreen",value:function(e,t,r){var n=r(1)-r(0),a=this.tileCache.filter(function(e){return Math.abs(e.pixelsPerBase-n)<EPSILON&&t.chrOnContig(e.range.contig)}),i=this.heightForRef(t.contig),u=a.map(function(e){return e.range.interval});t.interval.isCoveredBy(u)||(a=a.concat(this.makeNewTiles(u,n,t))),a.filter(function(e){return t.intersects(e.range)}).forEach(function(t){var n=Math.round(r(t.range.start())),a=Math.round(r(t.range.stop()+1)),u=a-n;0!==t.buffer.height&&(e.drawImage(t.buffer,0,0,t.buffer.width,t.buffer.height,n,0,u,t.buffer.height),DEBUG_RENDER_TILE_EDGES&&(e.save(),e.strokeStyle="black",_canvasUtils2.default.drawLine(e,n-.5,0,n-.5,i),_canvasUtils2.default.drawLine(e,a-.5,0,a-.5,i),e.restore()))})}},{key:"invalidateAll",value:function(){this.tileCache=[]}},{key:"invalidateRange",value:function(e){this.tileCache=this.tileCache.filter(function(t){return!t.range.intersects(e)})}},{key:"heightForRef",value:function(e){throw"Not implemented"}},{key:"render",value:function(e,t,r){throw"Not implemented"}}],[{key:"getNewTileRanges",value:function(e,t,r){var n=Math.ceil(MIN_PX_PER_BUFFER/r),a=Math.floor(t.start/n)*n,i=_underscore2.default.range(a,t.stop,n).map(function(e){return new _Interval2.default(e,e+n-1)}).filter(function(t){return!t.isCoveredBy(e)});return _utils2.default.flatMap(i,function(t){return t.complementIntervals(e)}).filter(function(e){return e.intersects(t)})}}]),e}();module.exports=TiledCanvas;

},{"../ContigInterval":182,"../Interval":185,"../scale":213,"../utils":225,"./canvas-utils":241,"./d3utils":242,"data-canvas":4,"underscore":178}],240:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_get=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=i,a=o,n=!0,l=u=void 0}},_types=require("../types"),_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),VariantTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",{onClick:this.handleClick.bind(this)})}},{key:"componentDidMount",value:function(){var e=this;this.updateVisualization(),this.props.source.on("newdata",function(){e.updateVisualization()})}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.width,n=t.height;if(0!==a){if(!(e&&e instanceof Element))throw new TypeError("canvas is not an Element");e instanceof HTMLCanvasElement&&_d3utils2.default.sizeCanvas(e,a,n);var r=_canvasUtils2.default.getContext(e),i=_dataCanvas2.default.getDataContext(r);this.renderScene(i)}}},{key:"renderScene",value:function(e){var t=this,a=this.props.range,n=new _ContigInterval2.default(a.contig,a.start,a.stop),r=this.props.source.getVariantsInRange(n),i=this.getScale(),o=this.props.height,l=o-_style2.default.VARIANT_HEIGHT-1;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.reset(),e.save(),e.fillStyle=_style2.default.VARIANT_FILL,e.strokeStyle=_style2.default.VARIANT_STROKE,r.forEach(function(a){var n=1;if(t.props.options.variantHeightByFrequency){var r=null;void 0===t.props.options.allelFrequencyStrategy?r=a.majorFrequency:t.props.options.allelFrequencyStrategy===_types.AllelFrequencyStrategy.Major?r=a.majorFrequency:t.props.options.allelFrequencyStrategy===_types.AllelFrequencyStrategy.Minor?r=a.minorFrequency:console.log("Unknown AllelFrequencyStrategy: ",t.props.options.allelFrequencyStrategy),null!==r&&void 0!==r&&(n=r)}var o=_style2.default.VARIANT_HEIGHT*n,s=l-.5+_style2.default.VARIANT_HEIGHT-o,u=Math.round(i(a.position))-.5,c=Math.max(1,Math.round(i(a.position+1)-i(a.position)));e.pushObject(a),e.fillRect(u,s,c,o),e.strokeRect(u,s,c,o),e.popObject()}),e.restore()}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,n=t.offsetY,r=_reactDom2.default.findDOMNode(this);if(null!=r){if(!(r&&r instanceof Element))throw new TypeError("canvas is not an Element");var i=_canvasUtils2.default.getContext(r),o=new _dataCanvas2.default.ClickTrackingContext(i,a,n);this.renderScene(o);var l=o.hit;if(l&&l.length>0){for(var s=[],u=0;u<l.length;u++)s.push({id:l[u].id,vcfLine:l[u].vcfLine,ref:l[u].ref,alt:l[u].alt});"function"==typeof this.props.options.onVariantClicked?this.props.options.onVariantClicked(s):console.log("Variants clicked: ",s)}}}}]),t}(_react2.default.Component);VariantTrack.displayName="variants",module.exports=VariantTrack;

},{"../ContigInterval":182,"../style":223,"../types":224,"./canvas-utils":241,"./d3utils":242,"data-canvas":4,"react":176,"react-dom":49,"shallow-equals":177}],241:[function(require,module,exports){
"use strict";function getContext(t){return t.getContext("2d")}function drawLine(t,e,n,o,i){t.beginPath(),t.moveTo(e,n),t.lineTo(o,i),t.stroke()}module.exports={getContext:getContext,drawLine:drawLine};

},{}],242:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getTrackScale(e,a){return e?_scale2.default.linear().domain([e.start,e.stop+1]).range([0,a]):_scale2.default.linear()}function formatPrefix(e){var a=0;e&&(e<0&&(e*=-1),a=1+Math.floor(1e-12+Math.log(e)/Math.LN10),a=Math.max(0,Math.min(24,3*Math.floor((a-1)/3))));var t=Math.pow(10,a);return{symbol:formatPrefixes[a/3],scale:function(e){return e/t}}}function formatRange(e){var a=e/1e3,t=formatPrefix(Math.max(1,a)),n=t.symbol+"bp";return{prefix:Math.round(t.scale(e)).toLocaleString(),unit:n}}function heightForCanvas(e,a){return a*window.devicePixelRatio}function sizeCanvas(e,a,t){var n=window.devicePixelRatio;e.width=a*n,e.height=t*n,e.style.width=a+"px",e.style.height=t+"px";var r=e.getContext("2d");null!==r&&r instanceof CanvasRenderingContext2D&&r.scale(n,n)}function findParent(e,a){var t=e;do{if(t.classList.contains(a))return t;t=t.parentElement}while(t);return null}Object.defineProperty(exports,"__esModule",{value:!0});var _scale=require("../scale"),_scale2=_interopRequireDefault(_scale),formatPrefixes=["","k","M","G","T","P","E","Z","Y"];module.exports={heightForCanvas:heightForCanvas,formatRange:formatRange,getTrackScale:getTrackScale,sizeCanvas:sizeCanvas,findParent:findParent};

},{"../scale":213}],243:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function yForRow(e){return e*((arguments.length<=1||void 0===arguments[1]?_style2.default.READ_HEIGHT:arguments[1])+(arguments.length<=2||void 0===arguments[2]?_style2.default.READ_SPACING:arguments[2]))}function pileup(e){for(var t=new Array(e.length),r=[],n=0;n<e.length;n++){for(var a=e[n],i=r.length,o=0;o<r.length;o++)if(!a.intersects(r[o])){i=o;break}t[n]=i,r[i]=a}return t}function addToPileup(e,t){for(var r=-1,n=0;n<t.length;n++){for(var a=t[n],i=!0,o=0;o<a.length;o++)if(a[o].intersects(e)){i=!1;break}if(i){r=n;break}}return-1==r&&(r=t.length,t[r]=[]),t[r].push(e),r}function findMismatches(e,t,r,n){for(var a=[],i=0;i<t.length;i++){var o=r+i,g=e.charAt(i),l=t.charAt(i);g!=l&&"."!=g&&a.push({pos:o,basePair:l,quality:n[i]})}return a}function getArrowIndex(e){var t,r,n=e.cigarOps;if("-"==e.getStrand()){for(t=0;t<n.length;t++)if(r=n[t],"S"!=r.op)return"M"==r.op?t:-1}else for(t=n.length-1;t>=0;t--)if(r=n[t],"S"!=r.op)return"M"==r.op?t:-1;return-1}function getOpInfo(e,t){for(var r=e.cigarOps,n=e.getInterval(),a=n.start(),i=e.getSequence(),o=e.getQualityScores(),g=0,l=a,s=getArrowIndex(e),p=[],u=[],c=0;c<r.length;c++){var f=r[c];if("M"==f.op){var C=t.getRangeAsString({contig:n.contig,start:l,stop:l+f.length-1}),h=i.slice(g,g+f.length);u=u.concat(findMismatches(C,h,l,o))}switch(p.push({op:f.op,length:f.length,pos:l,arrow:null}),f.op){case CigarOp.MATCH:case CigarOp.DELETE:case CigarOp.SKIP:case CigarOp.SEQMATCH:case CigarOp.SEQMISMATCH:l+=f.length}switch(f.op){case CigarOp.MATCH:case CigarOp.INSERT:case CigarOp.SOFTCLIP:case CigarOp.SEQMATCH:case CigarOp.SEQMISMATCH:g+=f.length}}return s>=0&&(p[s].arrow="-"==e.getStrand()?"L":"R"),{ops:p,mismatches:u}}Object.defineProperty(exports,"__esModule",{value:!0});var _style=require("../style"),_style2=_interopRequireDefault(_style),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),CigarOp={MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",SOFTCLIP:"S",HARDCLIP:"H",PADDING:"P",SEQMATCH:"=",SEQMISMATCH:"X"};module.exports={yForRow:yForRow,pileup:pileup,addToPileup:addToPileup,getOpInfo:getOpInfo,CigarOp:CigarOp};

},{"../ContigInterval":182,"../style":223}]},{},[212])(212)
});

//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFja2JvbmUvYmFja2JvbmUuanMiLCJub2RlX21vZHVsZXMvYmFzZTY0LWpzL2xpYi9iNjQuanMiLCJub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2RhdGEtY2FudmFzL3NyYy9kYXRhLWNhbnZhcy5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9FdmVudExpc3RlbmVyLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50LmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2NhbWVsaXplLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2NhbWVsaXplU3R5bGVOYW1lLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2NvbnRhaW5zTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9jcmVhdGVBcnJheUZyb21NaXhlZC5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9jcmVhdGVOb2Rlc0Zyb21NYXJrdXAuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvZW1wdHlGdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9lbXB0eU9iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9mb2N1c05vZGUuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvZ2V0QWN0aXZlRWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9nZXRNYXJrdXBXcmFwLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2dldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2h5cGhlbmF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9oeXBoZW5hdGVTdHlsZU5hbWUuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvaW52YXJpYW50LmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2lzTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9pc1RleHROb2RlLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2tleU1pcnJvci5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9rZXlPZi5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9tYXBPYmplY3QuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvbWVtb2l6ZVN0cmluZ09ubHkuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvc2hhbGxvd0VxdWFsLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL3RvQXJyYXkuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvd2FybmluZy5qcyIsIm5vZGVfbW9kdWxlcy9pZWVlNzU0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2lzYXJyYXkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvamJpbmFyeS9kaXN0L2Jyb3dzZXIvamJpbmFyeS5qcyIsIm5vZGVfbW9kdWxlcy9qZGF0YXZpZXcvZGlzdC9ub2RlL2pkYXRhdmlldy5qcyIsIm5vZGVfbW9kdWxlcy9tZW1vcnktY2FjaGUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvaW5mbGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi91dGlscy9jb21tb24uanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvdXRpbHMvc3RyaW5ncy5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2FkbGVyMzIuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvemxpYi9jb25zdGFudHMuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvemxpYi9jcmMzMi5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2d6aGVhZGVyLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvaW5mZmFzdC5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2luZmxhdGUuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvemxpYi9pbmZ0cmVlcy5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL21lc3NhZ2VzLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvenN0cmVhbS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvcS9xLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRvbS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQXV0b0ZvY3VzVXRpbHMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0JlZm9yZUlucHV0RXZlbnRQbHVnaW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0NTU1Byb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9DU1NQcm9wZXJ0eU9wZXJhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0NhbGxiYWNrUXVldWUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0NoYW5nZUV2ZW50UGx1Z2luLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9DbGllbnRSZWFjdFJvb3RJbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRE9NQ2hpbGRyZW5PcGVyYXRpb25zLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9ET01Qcm9wZXJ0eS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRE9NUHJvcGVydHlPcGVyYXRpb25zLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9EYW5nZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0RlZmF1bHRFdmVudFBsdWdpbk9yZGVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9FbnRlckxlYXZlRXZlbnRQbHVnaW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0V2ZW50Q29uc3RhbnRzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9FdmVudFBsdWdpbkh1Yi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRXZlbnRQbHVnaW5SZWdpc3RyeS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRXZlbnRQbHVnaW5VdGlscy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRXZlbnRQcm9wYWdhdG9ycy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9IVE1MRE9NUHJvcGVydHlDb25maWcuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0xpbmtlZFZhbHVlVXRpbHMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL09iamVjdC5hc3NpZ24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1Bvb2xlZENsYXNzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDaGlsZFJlY29uY2lsZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0Q2hpbGRyZW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0Q2xhc3MuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0Q29tcG9uZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDb21wb3NpdGVDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0Q3VycmVudE93bmVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01CdXR0b24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NQ29tcG9uZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTUZhY3Rvcmllcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01GZWF0dXJlRmxhZ3MuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NSURPcGVyYXRpb25zLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTUlucHV0LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTU9wdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01TZWxlY3QuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NU2VsZWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTVNlcnZlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01UZXh0Q29tcG9uZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTVRleHRhcmVhLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERlZmF1bHRJbmplY3Rpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RFbGVtZW50VmFsaWRhdG9yLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEVtcHR5Q29tcG9uZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RXJyb3JVdGlscy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RFdmVudEVtaXR0ZXJNaXhpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RFdmVudExpc3RlbmVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEluamVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RJbnB1dFNlbGVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RJbnN0YW5jZUhhbmRsZXMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0SW5zdGFuY2VNYXAuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0SXNvbW9ycGhpYy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RNYXJrdXBDaGVja3N1bS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RNb3VudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RNdWx0aUNoaWxkLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3ROYXRpdmVDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0Tm9vcFVwZGF0ZVF1ZXVlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE93bmVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFBlcmYuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFByb3BUeXBlTG9jYXRpb25zLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFByb3BUeXBlcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RSZWNvbmNpbGVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFJlZi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RSb290SW5kZXguanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RTZXJ2ZXJSZW5kZXJpbmcuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0VXBkYXRlUXVldWUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0VXBkYXRlcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RWZXJzaW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9TVkdET01Qcm9wZXJ0eUNvbmZpZy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU2VsZWN0RXZlbnRQbHVnaW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1NlcnZlclJlYWN0Um9vdEluZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9TaW1wbGVFdmVudFBsdWdpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljQ2xpcGJvYXJkRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY0RyYWdFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY0ZvY3VzRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY0lucHV0RXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY0tleWJvYXJkRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY01vdXNlRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY1RvdWNoRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY1VJRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY1doZWVsRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1RyYW5zYWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9WaWV3cG9ydE1ldHJpY3MuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2FjY3VtdWxhdGVJbnRvLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9hZGxlcjMyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9jYW5EZWZpbmVQcm9wZXJ0eS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZGFuZ2Vyb3VzU3R5bGVWYWx1ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZGVwcmVjYXRlZC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9maW5kRE9NTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZmxhdHRlbkNoaWxkcmVuLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9mb3JFYWNoQWNjdW11bGF0ZWQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldEV2ZW50Q2hhckNvZGUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldEV2ZW50S2V5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9nZXRFdmVudE1vZGlmaWVyU3RhdGUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldEV2ZW50VGFyZ2V0LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9nZXRJdGVyYXRvckZuLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9nZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9nZXRUZXh0Q29udGVudEFjY2Vzc29yLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9pc0V2ZW50U3VwcG9ydGVkLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9pc1RleHRJbnB1dEVsZW1lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL29ubHlDaGlsZC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9zZXRJbm5lckhUTUwuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL3NldFRleHRDb250ZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9zaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvdHJhdmVyc2VBbGxDaGlsZHJlbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvdmFsaWRhdGVET01OZXN0aW5nLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzIiwibm9kZV9tb2R1bGVzL3NoYWxsb3ctZXF1YWxzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUvdW5kZXJzY29yZS5qcyIsInNyYy9saWIvbWluaWQzLmpzIiwic3JjL21haW4vQWJzdHJhY3RGaWxlLmpzIiwic3JjL21haW4vQWxpZ25tZW50LmpzIiwic3JjL21haW4vQ29udGlnSW50ZXJ2YWwuanMiLCJzcmMvbWFpbi9Db250cm9scy5qcyIsInNyYy9tYWluL0dBNEdIQWxpZ25tZW50LmpzIiwic3JjL21haW4vSW50ZXJ2YWwuanMiLCJzcmMvbWFpbi9Mb2NhbFN0cmluZ0ZpbGUuanMiLCJzcmMvbWFpbi9NZW51LmpzIiwic3JjL21haW4vUmVtb3RlRmlsZS5qcyIsInNyYy9tYWluL1JlbW90ZVJlcXVlc3QuanMiLCJzcmMvbWFpbi9Sb290LmpzIiwic3JjL21haW4vU2VxdWVuY2VTdG9yZS5qcyIsInNyYy9tYWluL1Zpc3VhbGl6YXRpb25XcmFwcGVyLmpzIiwic3JjL21haW4vZGF0YS9CaWdCZWQuanMiLCJzcmMvbWFpbi9kYXRhL1NhbVJlYWQuanMiLCJzcmMvbWFpbi9kYXRhL1R3b0JpdC5qcyIsInNyYy9tYWluL2RhdGEvVmlydHVhbE9mZnNldC5qcyIsInNyYy9tYWluL2RhdGEvYmFpLmpzIiwic3JjL21haW4vZGF0YS9iYW0uanMiLCJzcmMvbWFpbi9kYXRhL2JlZHRvb2xzLmpzIiwic3JjL21haW4vZGF0YS9mZWF0dXJlLmpzIiwic3JjL21haW4vZGF0YS9mb3JtYXRzL2JhbVR5cGVzLmpzIiwic3JjL21haW4vZGF0YS9mb3JtYXRzL2JiaS5qcyIsInNyYy9tYWluL2RhdGEvZm9ybWF0cy9oZWxwZXJzLmpzIiwic3JjL21haW4vZGF0YS9mb3JtYXRzL3R3b0JpdFR5cGVzLmpzIiwic3JjL21haW4vZGF0YS9nZW5lLmpzIiwic3JjL21haW4vZGF0YS9nZW5lcmljRmVhdHVyZS5qcyIsInNyYy9tYWluL2RhdGEvdmFyaWFudC5qcyIsInNyYy9tYWluL2RhdGEvdmNmLmpzIiwic3JjL21haW4vanNvbi9HQTRHSEFsaWdubWVudEpzb24uanMiLCJzcmMvbWFpbi9qc29uL0dBNEdIRmVhdHVyZUpzb24uanMiLCJzcmMvbWFpbi9qc29uL0dBNEdIVmFyaWFudEpzb24uanMiLCJzcmMvbWFpbi9waWxldXAuanMiLCJzcmMvbWFpbi9zY2FsZS5qcyIsInNyYy9tYWluL3NvdXJjZXMvQmFtRGF0YVNvdXJjZS5qcyIsInNyYy9tYWluL3NvdXJjZXMvQmlnQmVkRGF0YVNvdXJjZS5qcyIsInNyYy9tYWluL3NvdXJjZXMvRW1wdHlTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0dBNEdIQWxpZ25tZW50U291cmNlLmpzIiwic3JjL21haW4vc291cmNlcy9HQTRHSEZlYXR1cmVTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0dBNEdIR2VuZVNvdXJjZS5qcyIsInNyYy9tYWluL3NvdXJjZXMvR0E0R0hWYXJpYW50U291cmNlLmpzIiwic3JjL21haW4vc291cmNlcy9Ud29CaXREYXRhU291cmNlLmpzIiwic3JjL21haW4vc291cmNlcy9WY2ZEYXRhU291cmNlLmpzIiwic3JjL21haW4vc3R5bGUuanMiLCJzcmMvbWFpbi90eXBlcy5qcyIsInNyYy9tYWluL3V0aWxzLmpzIiwic3JjL21haW4vdml6L0Fic3RyYWN0Q2FjaGUuanMiLCJzcmMvbWFpbi92aXovQ292ZXJhZ2VDYWNoZS5qcyIsInNyYy9tYWluL3Zpei9Db3ZlcmFnZVRyYWNrLmpzIiwic3JjL21haW4vdml6L0Rpc3BsYXlNb2RlLmpzIiwic3JjL21haW4vdml6L0ZlYXR1cmVUcmFjay5qcyIsInNyYy9tYWluL3Zpei9HZW5lVHJhY2suanMiLCJzcmMvbWFpbi92aXovR2VuZXJpY0ZlYXR1cmVDYWNoZS5qcyIsInNyYy9tYWluL3Zpei9HZW5vbWVUcmFjay5qcyIsInNyYy9tYWluL3Zpei9HZW5vdHlwZVRyYWNrLmpzIiwic3JjL21haW4vdml6L0xvY2F0aW9uVHJhY2suanMiLCJzcmMvbWFpbi92aXovUGlsZXVwQ2FjaGUuanMiLCJzcmMvbWFpbi92aXovUGlsZXVwVHJhY2suanMiLCJzcmMvbWFpbi92aXovU2NhbGVUcmFjay5qcyIsInNyYy9tYWluL3Zpei9UaWxlZENhbnZhcy5qcyIsInNyYy9tYWluL3Zpei9WYXJpYW50VHJhY2suanMiLCJzcmMvbWFpbi92aXovY2FudmFzLXV0aWxzLmpzIiwic3JjL21haW4vdml6L2QzdXRpbHMuanMiLCJzcmMvbWFpbi92aXovcGls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U0FBUyxJQUFJLEVBQUUsUUFBUyxHQUFFLEdBQUcsTUFBTyxZQUFXLEdBQUksR0FBRSxVQUFVLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsRUFBRyxJQUFHLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxFQUFFLFVBQVUsQ0FBQyxHQUFJLEdBQUUsSUFBSyxPQUFPLElBQUksR0FBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLEdBQUcsU0FBUyxFQUFFLEdBQUcsTUFBTyxHQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLE9BQUcsR0FBTyxFQUFFLEdBQUcsRUFBRSxFQUFFLE1BQU0sS0FBSyxJQUFJLFFBQVMsR0FBRSxFQUFFLEdBQUcsTUFBTyxHQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUksR0FBRSxNQUFFLE9BQU8sR0FBTyxFQUFFLEVBQUUsNEJBQXdCLEtBQVMsRUFBRSxLQUFLLElBQUksS0FBSyxLQUFLLEVBQUUsS0FBSyxLQUFLLEtBQUssR0FBRyxLQUFLLFlBQVksS0FBSyxHQUFHLEdBQUUsSUFBSyxHQUFJLEdBQUUsRUFBRSxJQUFJLFFBQVMsR0FBRSxHQUFHLE1BQU8sR0FBRSxFQUFFLFVBQVUsR0FBRyxRQUFTLEdBQUUsR0FBRyxNQUFPLEdBQUUsRUFBRSxVQUFVLEdBQUcsZUFBZSxXQUFXLEdBQUksSUFBRyxFQUFFLGdCQUFnQixFQUFFLFVBQVUsZ0JBQWdCLE1BQU0sS0FBSyxVQUFXLE9BQU8sR0FBRSxjQUFjLEVBQUUsU0FBUyxFQUFFLE9BQU8sUUFBUSxFQUFFLFlBQVksRUFBRSxPQUFPLFNBQVMsTUFBTSxLQUFLLEdBQUksR0FBRSxFQUFFLFFBQVMsU0FBUyxJQUFHLFFBQVMsSUFBSSxXQUFXLFFBQVMsR0FBRSxHQUFHLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUUsS0FBSSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsV0FBVyxLQUFLLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxPQUFPLEdBQUcsR0FBRyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksR0FBRyxHQUFHLElBQUssT0FBTSxHQUFHLEVBQUUsRUFBRSxXQUFXLEtBQUssR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLE9BQU8sR0FBRyxHQUFHLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxHQUFHLElBQUksSUFBSSxHQUFHLEdBQUcsRUFBRSxRQUFRLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBSSxPQUFNLEVBQUUsRUFBRSxXQUFXLEtBQUssR0FBRyxFQUFFLE9BQU8sR0FBRyxHQUFHLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxHQUFHLElBQUksSUFBSSxHQUFHLEdBQUcsRUFBRSxRQUFRLEdBQUcsSUFBSSxHQUFHLElBQUksSUFBSSxHQUFHLEdBQUcsRUFBRSxPQUFPLEdBQUcsR0FBRyxNQUFPLEdBQUUsUUFBUyxHQUFFLEdBQUcsR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFFLEtBQUksRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsRUFBRSxJQUFJLEVBQUUsV0FBVyxZQUFZLEVBQUUsSUFBSSxHQUFHLEVBQUcsS0FBSSxHQUFHLEVBQUUsS0FBTSxJQUFHLEVBQUUsRUFBRSxJQUFJLEVBQUUsV0FBVyxZQUFZLEVBQUUsSUFBSSxHQUFHLEVBQUcsS0FBSSxHQUFHLEVBQUUsS0FBTSxJQUFHLE9BQU8sYUFBYSxHQUFHLEdBQUcsR0FBRyxJQUFJLEVBQUcsR0FBRSxDQUFDLEdBQTJCLEtBQXhCLEVBQUUsSUFBSSxFQUFFLFdBQVcsTUFBVyxNQUFPLEVBQUUsR0FBRSxFQUFFLFNBQVMsRUFBRSxJQUFJLEdBQUcsRUFBRyxLQUFJLEdBQUcsRUFBRSxLQUFNLElBQUcsT0FBTyxjQUFjLEdBQUcsSUFBSSxHQUFHLEdBQUcsSUFBSSxFQUFHLEdBQUUsQ0FBQyxHQUEyQixLQUF4QixFQUFFLElBQUksRUFBRSxXQUFXLE1BQVcsTUFBTyxFQUFFLEdBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxHQUFHLEVBQUcsS0FBSSxHQUFHLEVBQUUsS0FBTSxJQUFHLE9BQU8sY0FBYyxFQUFFLElBQUksRUFBRSxHQUFHLE1BQU8sR0FBRSxHQUFJLEdBQUUsbUVBQW1FLElBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsRUFBRSxJQUFJLEdBQUcsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxFQUFHLEdBQUUsT0FBTyxFQUFFLEtBQUssR0FBRyxFQUFFLE9BQU8sRUFBRSxLQUFLLEtBQU0sSUFBSSxHQUFFLEVBQUUsU0FBUyxTQUFTLEdBQUcsS0FBSyxLQUFLLEdBQUcsRUFBRSxPQUFPLE1BQU8sS0FBSSxFQUFFLFNBQVMsR0FBRyxHQUFJLEdBQUUsWUFBYSxPQUFPLEdBQUUsVUFBVSxFQUFFLEdBQUksSUFBSSxJQUFJLEdBQUUsRUFBRSxVQUFVLEVBQUUsRUFBRSxVQUFXLEdBQUUsUUFBUSxTQUFTLEdBQUcsTUFBTyxHQUFFLEtBQUssS0FBSyxJQUFJLEVBQUUsT0FBTyxTQUFTLEVBQUUsRUFBRSxHQUFHLE1BQU8sR0FBRSxZQUFZLEVBQUUsV0FBTyxLQUFTLEVBQUUsRUFBRSxLQUFLLEtBQUssUUFBUSxFQUFHLElBQUksR0FBRSxPQUFPLGNBQWUsSUFBRyxFQUFFLElBQUksS0FBSyxRQUFRLE1BQU0sR0FBRyxNQUFFLE9BQVksR0FBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLEdBQUcsSUFBSSxFQUFFLEdBQUcsRUFBRSxPQUFRLElBQUksR0FBRSxnQkFBZ0IsRUFBRSxDQUErMlMsSUFBNzJTLEVBQUUsV0FBVyxTQUFTLEVBQUUsRUFBRSxHQUFHLEdBQUcsRUFBRSxlQUFlLEtBQUssVUFBVSxNQUFPLEdBQUUsS0FBSyxTQUFVLElBQUksR0FBRSxFQUFFLEtBQUssS0FBSyxFQUFHLE9BQU8sR0FBRSxFQUFFLEtBQUssVUFBVSxNQUFNLEdBQUcsR0FBRyxHQUFHLEVBQUUsV0FBVyxTQUFTLEdBQUcsYUFBYyxJQUFHLElBQUksWUFBWSxFQUFFLENBQUUsS0FBSSxTQUFTLE1BQU8sTUFBSyxTQUFTLEVBQUcsS0FBSSxTQUFTLE1BQU8sTUFBSyxXQUFXLFNBQVMsR0FBRyxNQUFPLEtBQUssSUFBSSxLQUFJLFdBQVcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEtBQUssU0FBUyxPQUFPLEVBQUUsRUFBRSxJQUFJLENBQUMsR0FBSSxHQUFFLEtBQUssU0FBUyxFQUFHLElBQUcsRUFBRSxLQUFLLEtBQUssR0FBRyxNQUFPLE1BQUssRUFBRSxVQUFVLFNBQVMsRUFBRSxHQUFHLEtBQUssU0FBUyxRQUFRLEVBQUcsSUFBSSxHQUFFLEVBQUUsS0FBSyxLQUFNLE9BQU8sTUFBSyxTQUFTLFFBQVEsR0FBRyxFQUFFLFdBQVcsUUFBUSxTQUFTLEVBQUUsR0FBRyxRQUFTLEdBQUUsRUFBRSxHQUFHLEdBQUksR0FBRSxFQUFFLEVBQUcsS0FBSSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLE1BQU0sR0FBSSxHQUFFLEVBQUUsSUFBSyxPQUFPLEdBQUUsU0FBUyxTQUFTLEdBQUcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxZQUFZLFNBQVMsR0FBRyxFQUFFLE1BQU0sS0FBSyxLQUFLLEVBQUUsYUFBYSxTQUFTLEdBQUcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUksR0FBRSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUcsS0FBSSxLQUFLLEdBQUcsRUFBRSxPQUFPLEVBQUUsVUFBVSxTQUFTLEdBQUcsRUFBRSxLQUFLLEtBQUssS0FBSyxHQUFHLEdBQUcsZUFBZSxTQUFTLEdBQUcsTUFBTyxHQUFFLE1BQU0sT0FBTyxFQUFFLEtBQUssRUFBRSxRQUFRLFFBQVEsU0FBUyxFQUFFLEdBQUcsT0FBVyxJQUFKLEdBQVEsZ0JBQWlCLEdBQUUsS0FBSyxPQUFPLFdBQVcsR0FBRyxHQUFHLEVBQUUsS0FBSyxLQUFLLE9BQU8sS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFLFVBQVUsRUFBRSxFQUFFLFdBQVcsVUFBVSxXQUFXLEtBQUssV0FBVyxLQUFLLFlBQVksWUFBWSxPQUFPLEtBQUssa0JBQWtCLFNBQVMsV0FBVyxNQUFPLE1BQUssT0FBTyxLQUFLLEtBQUssV0FBVyxVQUFVLFNBQVMsR0FBRyxNQUFPLE1BQUssT0FBTyxNQUFNLEtBQUssU0FBUyxNQUFNLEVBQUUsRUFBRSxXQUFXLEtBQUssRUFBRSxVQUFVLFNBQVMsTUFBTSxFQUFFLFVBQVUsWUFBWSxFQUFFLFNBQVMsRUFBRSxFQUFFLEdBQUcsU0FBUyxFQUFFLEdBQUcsR0FBSSxHQUFFLEVBQUUsS0FBSyxFQUFFLEtBQU0sT0FBTyxHQUFFLEdBQUcsRUFBRSxFQUFFLFFBQVEsSUFBSSxHQUFHLEVBQUUsY0FBYyxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLFdBQVcsTUFBTyxHQUFFLE9BQU8sSUFBRyxHQUFJLEdBQUcsRUFBRSxLQUFLLFNBQVMsRUFBRSxHQUFHLEdBQUcsRUFBRSxLQUFLLFFBQVEsT0FBRyxLQUFTLEVBQUUsQ0FBQyxHQUFJLEdBQUUsS0FBSyxLQUFLLE1BQU8sTUFBSyxLQUFLLEtBQUssRUFBRyxJQUFJLEdBQUUsRUFBRSxLQUFLLEtBQU0sT0FBTyxNQUFLLEtBQUssS0FBSyxHQUFHLEVBQUUsTUFBTyxNQUFLLEtBQUssS0FBSyxJQUFJLEVBQUUsS0FBSyxXQUFXLE1BQU8sTUFBSyxLQUFLLFFBQVEsRUFBRSxLQUFLLFNBQVMsRUFBRSxHQUFHLE1BQU8sTUFBSyxLQUFLLEtBQUssT0FBTyxLQUFLLFFBQVEsR0FBRyxJQUFJLEVBQUUsTUFBTSxTQUFTLEVBQUUsRUFBRSxHQUFHLE1BQU8sSUFBSSxHQUFFLEtBQUssS0FBSyxNQUFNLEVBQUUsRUFBRSxHQUFHLEtBQUssVUFBVSxFQUFFLFNBQVMsU0FBUyxFQUFFLEdBQUcsYUFBYyxJQUFHLElBQUksU0FBUyxLQUFLLElBQUssTUFBSyxTQUFTLEtBQU0sSUFBSSxnQkFBZSxpQkFBaUIsRUFBRyxPQUFPLE1BQUssU0FBUyxLQUFLLFFBQVEsR0FBRyxFQUFHLEtBQUksU0FBUyxNQUFPLE1BQUssU0FBUyxFQUFFLFVBQVUsR0FBSSxLQUFJLFNBQVMsR0FBRyxFQUFFLEVBQUUsR0FBRyxDQUFDLEdBQUksR0FBRSxJQUFLLE9BQU8sR0FBRSxRQUFRLE1BQU0sU0FBUyxHQUFHLE1BQU8sR0FBRSxRQUFRLEtBQUssTUFBTyxHQUFFLEVBQUUsT0FBTyxLQUFLLFdBQVcsRUFBRSxTQUFTLEdBQUcsTUFBTyxNQUFLLFFBQVEsRUFBRSxHQUFHLEVBQUUsTUFBTSxNQUFLLEdBQUksS0FBSyxXQUFXLEVBQUUsU0FBUyxHQUFHLE1BQU8sTUFBSyxRQUFRLEVBQUUsUUFBUSxNQUFLLEtBQU0sRUFBRSxRQUFRLFNBQVMsRUFBRSxHQUFHLEdBQUksR0FBRSxLQUFLLFNBQVMsRUFBRSxFQUFHLE9BQU8sS0FBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssZ0JBQWlCLEdBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxHQUFHLElBQUksRUFBRSxNQUFNLEdBQUcsS0FBSyxNQUFNLElBQUksU0FBUyxPQUFPLElBQUksR0FBRyxFQUFFLFFBQVEsU0FBUyxFQUFFLEVBQUUsR0FBRyxPQUFHLEtBQVMsRUFBRSxDQUFDLEVBQUUsS0FBSyxRQUFRLEVBQUcsSUFBSSxHQUFFLEtBQUssT0FBTyxXQUFXLE1BQU8sR0FBRSxLQUFLLEtBQUssRUFBRSxlQUFlLE1BQU0sS0FBSyxTQUFTLEtBQUssSUFBSSxFQUFFLEtBQUssSUFBSSxFQUFHLFlBQU8sS0FBUyxFQUFFLEtBQUssS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLFFBQVEsRUFBRSxLQUFLLFNBQVMsRUFBRSxHQUFHLE1BQU8sTUFBSyxRQUFRLEVBQUUsRUFBRSxTQUFTLEVBQUUsR0FBRyxNQUFPLEdBQUUsS0FBSyxNQUFNLEVBQUUsUUFBUSxXQUFXLE1BQU8sTUFBSyxLQUFLLGNBQWMsSUFBSSxFQUFFLE1BQU0sU0FBUyxFQUFFLEVBQUUsR0FBRyxNQUFPLE1BQUssUUFBUSxFQUFFLEVBQUUsU0FBUyxFQUFFLEdBQUcsR0FBSSxHQUFFLEtBQUssTUFBTyxPQUFPLEdBQUUsTUFBTSxFQUFFLEdBQUcsS0FBSyxPQUFPLEtBQUssRUFBRSxTQUFTLFNBQVMsR0FBRyxNQUFPLE1BQUssTUFBTSxjQUFjLEVBQUUsSUFBSSxTQUFTLEVBQUUsR0FBRyxJQUFJLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxJQUFJLENBQUMsR0FBSSxHQUFFLEVBQUUsRUFBRyxHQUFFLEVBQUUsZUFBZSxFQUFFLEdBQUcsU0FBUyxNQUFNLEdBQUcsUUFBUSxnQkFBZ0IsS0FBSyxXQUFXLE1BQU8sTUFBSyxLQUFLLE1BQU0sS0FBSyxjQUFVLEdBQU8sS0FBSyxlQUFlLE1BQU0sU0FBUyxHQUFHLEtBQUssS0FBSyxRQUFRLEtBQUssVUFBVSxFQUFFLEtBQUssa0JBQWtCLFFBQVEsU0FBUyxTQUFTLFNBQVMsT0FBTyxRQUFRLFFBQVEsUUFBUSxVQUFVLFVBQVUsU0FBUyxFQUFFLEdBQUcsS0FBTyxFQUFFLE1BQU0sTUFBUSxFQUFFLFFBQVEsT0FBUyxFQUFFLFVBQVUsRUFBRSxNQUFNLEdBQUcsUUFBUSxXQUFXLFVBQVUsS0FBSyxXQUFXLEdBQUksR0FBRSxLQUFLLFFBQVEsS0FBSyxPQUFRLElBQUcsS0FBSyxXQUFXLEVBQUUsTUFBTSxNQUFPLE1BQUssS0FBSyxTQUFTLE1BQUUsSUFBTyxHQUFHLEVBQUksSUFBSSxFQUFFLFFBQUcsS0FBUyxFQUFFLENBQUMsRUFBRSxHQUFJLE9BQU0sRUFBRyxLQUFJLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRyxLQUFLLGVBQWUsQ0FBQyxHQUFJLEdBQUUsS0FBSyxLQUFLLFVBQVcsS0FBSSxLQUFLLEtBQUssT0FBTyxPQUFPLEdBQUcsRUFBRSxLQUFLLEtBQUssWUFBWSxNQUFPLElBQUcsTUFBTSxTQUFTLEdBQUcsR0FBRyxLQUFLLFdBQVcsRUFBRSxNQUFNLE1BQU8sTUFBSyxLQUFLLFdBQVcsRUFBRyxLQUFJLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxJQUFJLEtBQUssVUFBVSxFQUFFLE9BQU8sRUFBRSxPQUFPLEdBQUcsUUFBUSxTQUFTLFdBQVcsS0FBSyxXQUFXLEdBQUksR0FBRSxLQUFLLE9BQU8sT0FBTyxFQUFFLEtBQUssT0FBTyxLQUFLLEtBQUssUUFBUSxLQUFLLFFBQWdDLE9BQU8sSUFBSSxHQUFoQyxLQUFLLEtBQUssTUFBTSxFQUFFLEdBQWtCLEtBQUssVUFBVSxNQUFNLFNBQVMsR0FBRyxLQUFLLE9BQU8sTUFBTSxPQUFPLEVBQUUsS0FBSyxPQUFPLE9BQU8sRUFBRSxTQUFTLEdBQUcsUUFBUSxXQUFXLEtBQUssV0FBVyxNQUFPLE1BQUssS0FBSyxZQUFZLEtBQUssVUFBVSxNQUFNLFNBQVMsR0FBRyxLQUFLLEtBQUssY0FBYyxFQUFFLEtBQUssWUFBWSxFQUFFLEtBQUssR0FBRyxRQUFRLFVBQVUsS0FBSyxXQUFXLE1BQU8sTUFBSyxLQUFLLFNBQVMsS0FBSyxRQUFRLEtBQUssVUFBVSxNQUFNLFNBQVMsR0FBRyxLQUFLLEtBQUssV0FBVyxHQUFFLE1BQU8sRUFBUyxNQUFFLEdBQUcsUUFBUSxXQUFXLFFBQVEsVUFBVSxLQUFLLFdBQVcsR0FBSSxHQUFFLEtBQUssVUFBVyxJQUFHLEtBQUssUUFBUSxJQUFJLEtBQUssTUFBTSxDQUFDLEdBQUcsRUFBRSxLQUFLLE9BQU8sVUFBVSxNQUFPLE1BQUssT0FBTyxFQUFHLE1BQU0sSUFBSSxXQUFVLHFCQUFxQixFQUFFLFFBQVEsS0FBSyxNQUFNLE1BQU0sTUFBTyxJQUFHLE1BQU0sU0FBUyxHQUFHLEtBQUssVUFBVSxLQUFLLFlBQVEsS0FBUyxFQUFFLEtBQUssTUFBTSxNQUFNLEVBQVEsS0FBRSxHQUFHLFFBQVEsV0FBVyxXQUFXLFVBQVUsU0FBUyxFQUFFLEdBQUcsS0FBSyxjQUFlLEtBQUksR0FBSSxLQUFLLEdBQUUsS0FBSyxZQUFZLEVBQUUsSUFBSSxHQUFHLEtBQUssV0FBVyxHQUFJLEdBQUUsS0FBSyxVQUFXLE9BQU8sS0FBSyxNQUFLLFFBQVEsS0FBSyxRQUFRLEdBQUcsR0FBRyxNQUFNLFNBQVMsR0FBRyxLQUFLLFVBQVUsSUFBSyxNQUFLLFlBQVksS0FBSyxZQUFZLEdBQUcsTUFBTSxFQUFFLE9BQU8sR0FBRyxVQUFVLFdBQVcsS0FBSyxNQUFNLFdBQVcsUUFBUSxTQUFTLEdBQUcsSUFBSSxHQUFJLEdBQUUsS0FBSyxNQUFNLEVBQUUsRUFBRSxPQUFPLEVBQUUsR0FBSSxPQUFNLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsR0FBSSxNQUFLLE1BQU0sR0FBRyxLQUFLLFdBQVcsR0FBSSxHQUFFLEtBQUssTUFBTSxFQUFFLEtBQUssT0FBTyxLQUFLLEVBQUUsR0FBSSxPQUFPLE1BQUssT0FBTyxVQUFVLEVBQUUsV0FBVyxJQUFJLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxLQUFLLEtBQUssRUFBRSxPQUFPLEdBQUcsTUFBTSxTQUFTLEdBQUcsR0FBSSxHQUFFLEtBQUssS0FBTSxNQUFLLE9BQU8sVUFBVSxFQUFFLFdBQVcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxLQUFLLE1BQU0sRUFBRSxHQUFHLFFBQVEsRUFBTSxHQUFFLEdBQUcsUUFBUSxZQUFZLFdBQVcsYUFBYSxZQUFZLFdBQVcsYUFBYSxZQUFZLFdBQVcsTUFBTyxNQUFLLFFBQVEsS0FBSyxXQUFXLEtBQUssU0FBUyxLQUFLLGFBQWEsRUFBRSxPQUFPLEVBQUUsTUFBTSxHQUFHLFVBQVUsU0FBUyxFQUFFLEVBQUUsR0FBRyxLQUFLLFVBQVUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssR0FBRyxPQUFPLGVBQWUsUUFBUSxZQUFZLFVBQVUsWUFBWSxXQUFXLE9BQU8sU0FBUyxLQUFLLE9BQU8sS0FBSyxPQUFPLFVBQVUsS0FBSyxXQUFXLEdBQUksR0FBRSxTQUFTLEdBQUcsTUFBTyxLQUFJLFVBQVUsT0FBTyxTQUFVLEdBQUUsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sS0FBSyxFQUFFLFdBQVcsRUFBRSxHQUFHLFlBQVcsRUFBRyxNQUFNLElBQUksTUFBTyxPQUFPLEdBQUUsS0FBSyxTQUFRLEVBQUcsRUFBRSxHQUFHLE9BQU8sRUFBRSxLQUFLLFlBQVksU0FBUyxLQUFLLE9BQU8sU0FBUyxVQUFVLFVBQVUsS0FBSyxhQUFhLE1BQU0sU0FBUyxHQUFHLEVBQUUsYUFBYSxFQUFFLEtBQUssUUFBUSxLQUFLLE9BQU8sTUFBTSxLQUFLLFVBQVUsS0FBSyxLQUFLLFVBQVUsRUFBRSxXQUFXLEVBQUUsT0FBTyxHQUFHLFFBQVEsWUFBWSxTQUFTLFFBQVEsU0FBUyxHQUFHLEdBQUksS0FBSyxLQUFJLEdBQUksS0FBSyxNQUFLLFVBQVUsRUFBRSxHQUFHLEVBQUUsS0FBSyxVQUFVLEdBQUcsVUFBVSxLQUFLLFVBQVUsR0FBRyxFQUFFLEtBQUssVUFBVSxHQUFJLE1BQUssVUFBVSxHQUFHLEtBQUssV0FBVyxHQUFJLEdBQUUsS0FBSyxFQUFFLEtBQUssVUFBVSxFQUFFLEtBQUssTUFBTSxFQUFFLEtBQUssU0FBVSxPQUFPLE1BQUssT0FBTyxVQUFVLEVBQUUsV0FBVyxJQUFJLEdBQUksS0FBSyxHQUFFLEtBQUssT0FBTyxXQUFXLEdBQUksR0FBRSxFQUFFLEVBQUUsR0FBRyxVQUFVLEVBQUUsR0FBRyxLQUFLLEVBQUUsR0FBRyxLQUFLLEtBQUssRUFBRSxRQUFJLEtBQVMsSUFBSSxFQUFFLEdBQUcsSUFBSSxHQUFHLEtBQUssUUFBUSxHQUFHLE1BQU0sU0FBUyxHQUFHLEdBQUksR0FBRSxLQUFLLEVBQUUsS0FBSyxTQUFVLE1BQUssT0FBTyxVQUFVLEVBQUUsV0FBVyxJQUFJLEdBQUksS0FBSyxHQUFFLEtBQUssT0FBTyxXQUFXLEVBQUUsRUFBRSxHQUFHLFVBQVUsRUFBRSxHQUFHLEVBQUUsR0FBRyxLQUFLLEVBQUUsR0FBRyxLQUFLLE1BQU0sRUFBRSxHQUFHLEVBQUUsS0FBSyxHQUFHLEtBQUssV0FBVyxFQUFFLEtBQUssR0FBRyxRQUFRLFVBQVUsS0FBSyxXQUFXLEtBQUssS0FBSyxLQUFLLEtBQUssUUFBUSxLQUFLLFVBQVUsTUFBTSxXQUFXLEtBQUssVUFBVSxFQUFFLE9BQU8sR0FBRyxRQUFRLFNBQVMsWUFBWSxLQUFLLFdBQVcsTUFBTyxNQUFLLEtBQUssVUFBVSxLQUFLLFFBQVEsS0FBSyxZQUFRLEdBQU8sS0FBSyxXQUFXLE1BQU0sU0FBUyxHQUFH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QUFRLEVBRVIsT0FDRixFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUNyRCxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLEVBQUcsR0FHM0QsTUFDRixHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUM1RCxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksSUFHdEQsT0FDRixFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksSUFBSyxJQUN0RCxJQUFLLElBQUssSUFBSyxJQUFLLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUNsRCxLQUFNLE1BQU8sTUFBTyxNQUFPLEVBQUcsR0FHNUIsTUFDRixHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUM1RCxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUNwQyxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FHdEIsUUFBTyxRQUFVLFNBQXVCLEVBQU0sRUFBTSxFQUFZLEVBQU8sRUFBTyxFQUFhLEVBQU0sR0FFL0YsR0FZSSxHQUNBLEVBQ0EsRUFDQSxFQUNBLEVBSUEsRUFNQSxFQUFXLEVBQVMsRUExQnBCLEVBQU8sRUFBSyxLQUdaLEVBQU0sRUFDTixFQUFNLEVBQ04sRUFBTSxFQUFHLEVBQU0sRUFDZixFQUFPLEVBQ1AsRUFBTyxFQUNQLEVBQU8sRUFDUCxFQUFPLEVBQ1AsRUFBTyxFQUNQLEVBQU8sRUFNUCxFQUFPLEtB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QUFTLElBRXpCLEVBQU8sRUFBSSxNQUFNLEVBQVEsRUFBUyxFQUFHLE9BQ3pDLEdBQWEsRUFBVyxPQUFPLGVBQWUsRUFBSyxFQUFNLEVBQVEsSUFXbkUsT0FSQSxFQUFPLE1BQ0wsR0FBSSxFQUFHLEdBQ1AsT0FBUSxFQUFHLE9BQ1gsSUFBSyxFQUNMLE1BQU8sT0FJRCxFQUFHLElBQ1QsSUFBSyxTQUFRLE1BQ2IsSUFBSyxTQUFRLE9BQ2IsSUFBSyxTQUFRLEtBQ2IsSUFBSyxTQUFRLFNBQ2IsSUFBSyxTQUFRLFlBQ1gsR0FBVSxFQUFHLE9BSWpCLE9BQVEsRUFBRyxJQUNULElBQUssU0FBUSxNQUNiLElBQUssU0FBUSxPQUNiLElBQUssU0FBUSxTQUNiLElBQUssU0FBUSxTQUNiLElBQUssU0FBUSxZQUNYLEdBQVUsRUFBRyxRQVNuQixNQUpJLElBQWMsSUFDaEIsRUFBTyxHQUFZLE1BQTRCLEtBQXBCLEVBQUssWUFBcUIsSUFBTSxNQUkzRCxJQUFLLEVBQ0wsV0FBQSw2RUFuTmMsMkVBQ1MsOEVBd0h2QixTQUNGLE1BQU8sSUFDUCxPQUFRLElBQ1IsT0FBUSxJQUNSLEtBQU0sSUFDTixTQUFVLElBQ1YsU0FBVSxJQUNWLFFBQVMsSUFDVCxTQUFVLElBQ1YsWUFBYSxJQXFGZixRQUFPLFNBQ0wsUUFBQSxRQUNBLE9BQUEsT0FDQSxZQUFBLFlBQ0EsVUFBQSxVQUNBLFFBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLy8gICAgIEJhY2tib25lLmpzIDEuMS4yXG5cbi8vICAgICAoYykgMjAxMC0yMDE0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4vLyAgICAgQmFja2JvbmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyAgICAgRm9yIGFsbCBkZXRhaWxzIGFuZCBkb2N1bWVudGF0aW9uOlxuLy8gICAgIGh0dHA6Ly9iYWNrYm9uZWpzLm9yZ1xuXG4oZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuXG4gIC8vIFNldCB1cCBCYWNrYm9uZSBhcHByb3ByaWF0ZWx5IGZvciB0aGUgZW52aXJvbm1lbnQuIFN0YXJ0IHdpdGggQU1ELlxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFsndW5kZXJzY29yZScsICdqcXVlcnknLCAnZXhwb3J0cyddLCBmdW5jdGlvbihfLCAkLCBleHBvcnRzKSB7XG4gICAgICAvLyBFeHBvcnQgZ2xvYmFsIGV2ZW4gaW4gQU1EIGNhc2UgaW4gY2FzZSB0aGlzIHNjcmlwdCBpcyBsb2FkZWQgd2l0aFxuICAgICAgLy8gb3RoZXJzIHRoYXQgbWF5IHN0aWxsIGV4cGVjdCBhIGdsb2JhbCBCYWNrYm9uZS5cbiAgICAgIHJvb3QuQmFja2JvbmUgPSBmYWN0b3J5KHJvb3QsIGV4cG9ydHMsIF8sICQpO1xuICAgIH0pO1xuXG4gIC8vIE5leHQgZm9yIE5vZGUuanMgb3IgQ29tbW9uSlMuIGpRdWVyeSBtYXkgbm90IGJlIG5lZWRlZCBhcyBhIG1vZHVsZS5cbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgXyA9IHJlcXVpcmUoJ3VuZGVyc2NvcmUnKTtcbiAgICBmYWN0b3J5KHJvb3QsIGV4cG9ydHMsIF8pO1xuXG4gIC8vIEZpbmFsbHksIGFzIGEgYnJvd3NlciBnbG9iYWwuXG4gIH0gZWxzZSB7XG4gICAgcm9vdC5CYWNrYm9uZSA9IGZhY3Rvcnkocm9vdCwge30sIHJvb3QuXywgKHJvb3QualF1ZXJ5IHx8IHJvb3QuWmVwdG8gfHwgcm9vdC5lbmRlciB8fCByb290LiQpKTtcbiAgfVxuXG59KHRoaXMsIGZ1bmN0aW9uKHJvb3QsIEJhY2tib25lLCBfLCAkKSB7XG5cbiAgLy8gSW5pdGlhbCBTZXR1cFxuICAvLyAtLS0tLS0tLS0tLS0tXG5cbiAgLy8gU2F2ZSB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGBCYWNrYm9uZWAgdmFyaWFibGUsIHNvIHRoYXQgaXQgY2FuIGJlXG4gIC8vIHJlc3RvcmVkIGxhdGVyIG9uLCBpZiBgbm9Db25mbGljdGAgaXMgdXNlZC5cbiAgdmFyIHByZXZpb3VzQmFja2JvbmUgPSByb290LkJhY2tib25lO1xuXG4gIC8vIENyZWF0ZSBsb2NhbCByZWZlcmVuY2VzIHRvIGFycmF5IG1ldGhvZHMgd2UnbGwgd2FudCB0byB1c2UgbGF0ZXIuXG4gIHZhciBhcnJheSA9IFtdO1xuICB2YXIgcHVzaCA9IGFycmF5LnB1c2g7XG4gIHZhciBzbGljZSA9IGFycmF5LnNsaWNlO1xuICB2YXIgc3BsaWNlID0gYXJyYXkuc3BsaWNlO1xuXG4gIC8vIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGUgbGlicmFyeS4gS2VlcCBpbiBzeW5jIHdpdGggYHBhY2thZ2UuanNvbmAuXG4gIEJhY2tib25lLlZFUlNJT04gPSAnMS4xLjInO1xuXG4gIC8vIEZvciBCYWNrYm9uZSdzIHB1cnBvc2VzLCBqUXVlcnksIFplcHRvLCBFbmRlciwgb3IgTXkgTGlicmFyeSAoa2lkZGluZykgb3duc1xuICAvLyB0aGUgYCRgIHZhcmlhYmxlLlxuICBCYWNrYm9uZS4kID0gJDtcblxuICAvLyBSdW5zIEJhY2tib25lLmpzIGluICpub0NvbmZsaWN0KiBtb2RlLCByZXR1cm5pbmcgdGhlIGBCYWNrYm9uZWAgdmFyaWFibGVcbiAgLy8gdG8gaXRzIHByZXZpb3VzIG93bmVyLiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoaXMgQmFja2JvbmUgb2JqZWN0LlxuICBCYWNrYm9uZS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcm9vdC5CYWNrYm9uZSA9IHByZXZpb3VzQmFja2JvbmU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gVHVybiBvbiBgZW11bGF0ZUhUVFBgIHRvIHN1cHBvcnQgbGVnYWN5IEhUVFAgc2VydmVycy4gU2V0dGluZyB0aGlzIG9wdGlvblxuICAvLyB3aWxsIGZha2UgYFwiUEFUQ0hcImAsIGBcIlBVVFwiYCBhbmQgYFwiREVMRVRFXCJgIHJlcXVlc3RzIHZpYSB0aGUgYF9tZXRob2RgIHBhcmFtZXRlciBhbmRcbiAgLy8gc2V0IGEgYFgtSHR0cC1NZXRob2QtT3ZlcnJpZGVgIGhlYWRlci5cbiAgQmFja2JvbmUuZW11bGF0ZUhUVFAgPSBmYWxzZTtcblxuICAvLyBUdXJuIG9uIGBlbXVsYXRlSlNPTmAgdG8gc3VwcG9ydCBsZWdhY3kgc2VydmVycyB0aGF0IGNhbid0IGRlYWwgd2l0aCBkaXJlY3RcbiAgLy8gYGFwcGxpY2F0aW9uL2pzb25gIHJlcXVlc3RzIC4uLiB3aWxsIGVuY29kZSB0aGUgYm9keSBhc1xuICAvLyBgYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkYCBpbnN0ZWFkIGFuZCB3aWxsIHNlbmQgdGhlIG1vZGVsIGluIGFcbiAgLy8gZm9ybSBwYXJhbSBuYW1lZCBgbW9kZWxgLlxuICBCYWNrYm9uZS5lbXVsYXRlSlNPTiA9IGZhbHNlO1xuXG4gIC8vIEJhY2tib25lLkV2ZW50c1xuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBBIG1vZHVsZSB0aGF0IGNhbiBiZSBtaXhlZCBpbiB0byAqYW55IG9iamVjdCogaW4gb3JkZXIgdG8gcHJvdmlkZSBpdCB3aXRoXG4gIC8vIGN1c3RvbSBldmVudHMuIFlvdSBtYXkgYmluZCB3aXRoIGBvbmAgb3IgcmVtb3ZlIHdpdGggYG9mZmAgY2FsbGJhY2tcbiAgLy8gZnVuY3Rpb25zIHRvIGFuIGV2ZW50OyBgdHJpZ2dlcmAtaW5nIGFuIGV2ZW50IGZpcmVzIGFsbCBjYWxsYmFja3MgaW5cbiAgLy8gc3VjY2Vzc2lvbi5cbiAgLy9cbiAgLy8gICAgIHZhciBvYmplY3QgPSB7fTtcbiAgLy8gICAgIF8uZXh0ZW5kKG9iamVjdCwgQmFja2JvbmUuRXZlbnRzKTtcbiAgLy8gICAgIG9iamVjdC5vbignZXhwYW5kJywgZnVuY3Rpb24oKXsgYWxlcnQoJ2V4cGFuZGVkJyk7IH0pO1xuICAvLyAgICAgb2JqZWN0LnRyaWdnZXIoJ2V4cGFuZCcpO1xuICAvL1xuICB2YXIgRXZlbnRzID0gQmFja2JvbmUuRXZlbnRzID0ge1xuXG4gICAgLy8gQmluZCBhbiBldmVudCB0byBhIGBjYWxsYmFja2AgZnVuY3Rpb24uIFBhc3NpbmcgYFwiYWxsXCJgIHdpbGwgYmluZFxuICAgIC8vIHRoZSBjYWxsYmFjayB0byBhbGwgZXZlbnRzIGZpcmVkLlxuICAgIG9uOiBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgICAgaWYgKCFldmVudHNBcGkodGhpcywgJ29uJywgbmFtZSwgW2NhbGxiYWNrLCBjb250ZXh0XSkgfHwgIWNhbGxiYWNrKSByZXR1cm4gdGhpcztcbiAgICAgIHRoaXMuX2V2ZW50cyB8fCAodGhpcy5fZXZlbnRzID0ge30pO1xuICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50c1tuYW1lXSB8fCAodGhpcy5fZXZlbnRzW25hbWVdID0gW10pO1xuICAgICAgZXZlbnRzLnB1c2goe2NhbGxiYWNrOiBjYWxsYmFjaywgY29udGV4dDogY29udGV4dCwgY3R4OiBjb250ZXh0IHx8IHRoaXN9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBCaW5kIGFuIGV2ZW50IHRvIG9ubHkgYmUgdHJpZ2dlcmVkIGEgc2luZ2xlIHRpbWUuIEFmdGVyIHRoZSBmaXJzdCB0aW1lXG4gICAgLy8gdGhlIGNhbGxiYWNrIGlzIGludm9rZWQsIGl0IHdpbGwgYmUgcmVtb3ZlZC5cbiAgICBvbmNlOiBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgICAgaWYgKCFldmVudHNBcGkodGhpcywgJ29uY2UnLCBuYW1lLCBbY2FsbGJhY2ssIGNvbnRleHRdKSB8fCAhY2FsbGJhY2spIHJldHVybiB0aGlzO1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIG9uY2UgPSBfLm9uY2UoZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGYub2ZmKG5hbWUsIG9uY2UpO1xuICAgICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSk7XG4gICAgICBvbmNlLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgcmV0dXJuIHRoaXMub24obmFtZSwgb25jZSwgY29udGV4dCk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBvbmUgb3IgbWFueSBjYWxsYmFja3MuIElmIGBjb250ZXh0YCBpcyBudWxsLCByZW1vdmVzIGFsbFxuICAgIC8vIGNhbGxiYWNrcyB3aXRoIHRoYXQgZnVuY3Rpb24uIElmIGBjYWxsYmFja2AgaXMgbnVsbCwgcmVtb3ZlcyBhbGxcbiAgICAvLyBjYWxsYmFja3MgZm9yIHRoZSBldmVudC4gSWYgYG5hbWVgIGlzIG51bGwsIHJlbW92ZXMgYWxsIGJvdW5kXG4gICAgLy8gY2FsbGJhY2tzIGZvciBhbGwgZXZlbnRzLlxuICAgIG9mZjogZnVuY3Rpb24obmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICAgIHZhciByZXRhaW4sIGV2LCBldmVudHMsIG5hbWVzLCBpLCBsLCBqLCBrO1xuICAgICAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIWV2ZW50c0FwaSh0aGlzLCAnb2ZmJywgbmFtZSwgW2NhbGxiYWNrLCBjb250ZXh0XSkpIHJldHVybiB0aGlzO1xuICAgICAgaWYgKCFuYW1lICYmICFjYWxsYmFjayAmJiAhY29udGV4dCkge1xuICAgICAgICB0aGlzLl9ldmVudHMgPSB2b2lkIDA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgbmFtZXMgPSBuYW1lID8gW25hbWVdIDogXy5rZXlzKHRoaXMuX2V2ZW50cyk7XG4gICAgICBmb3IgKGkgPSAwLCBsID0gbmFtZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lc1tpXTtcbiAgICAgICAgaWYgKGV2ZW50cyA9IHRoaXMuX2V2ZW50c1tuYW1lXSkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50c1tuYW1lXSA9IHJldGFpbiA9IFtdO1xuICAgICAgICAgIGlmIChjYWxsYmFjayB8fCBjb250ZXh0KSB7XG4gICAgICAgICAgICBmb3IgKGogPSAwLCBrID0gZXZlbnRzLmxlbmd0aDsgaiA8IGs7IGorKykge1xuICAgICAgICAgICAgICBldiA9IGV2ZW50c1tqXTtcbiAgICAgICAgICAgICAgaWYgKChjYWxsYmFjayAmJiBjYWxsYmFjayAhPT0gZXYuY2FsbGJhY2sgJiYgY2FsbGJhY2sgIT09IGV2LmNhbGxiYWNrLl9jYWxsYmFjaykgfHxcbiAgICAgICAgICAgICAgICAgIChjb250ZXh0ICYmIGNvbnRleHQgIT09IGV2LmNvbnRleHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0YWluLnB1c2goZXYpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghcmV0YWluLmxlbmd0aCkgZGVsZXRlIHRoaXMuX2V2ZW50c1tuYW1lXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gVHJpZ2dlciBvbmUgb3IgbWFueSBldmVudHMsIGZpcmluZyBhbGwgYm91bmQgY2FsbGJhY2tzLiBDYWxsYmFja3MgYXJlXG4gICAgLy8gcGFzc2VkIHRoZSBzYW1lIGFyZ3VtZW50cyBhcyBgdHJpZ2dlcmAgaXMsIGFwYXJ0IGZyb20gdGhlIGV2ZW50IG5hbWVcbiAgICAvLyAodW5sZXNzIHlvdSdyZSBsaXN0ZW5pbmcgb24gYFwiYWxsXCJgLCB3aGljaCB3aWxsIGNhdXNlIHlvdXIgY2FsbGJhY2sgdG9cbiAgICAvLyByZWNlaXZlIHRoZSB0cnVlIG5hbWUgb2YgdGhlIGV2ZW50IGFzIHRoZSBmaXJzdCBhcmd1bWVudCkuXG4gICAgdHJpZ2dlcjogZnVuY3Rpb24obmFtZSkge1xuICAgICAgaWYgKCF0aGlzLl9ldmVudHMpIHJldHVybiB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICBpZiAoIWV2ZW50c0FwaSh0aGlzLCAndHJpZ2dlcicsIG5hbWUsIGFyZ3MpKSByZXR1cm4gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHNbbmFtZV07XG4gICAgICB2YXIgYWxsRXZlbnRzID0gdGhpcy5fZXZlbnRzLmFsbDtcbiAgICAgIGlmIChldmVudHMpIHRyaWdnZXJFdmVudHMoZXZlbnRzLCBhcmdzKTtcbiAgICAgIGlmIChhbGxFdmVudHMpIHRyaWdnZXJFdmVudHMoYWxsRXZlbnRzLCBhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFRlbGwgdGhpcyBvYmplY3QgdG8gc3RvcCBsaXN0ZW5pbmcgdG8gZWl0aGVyIHNwZWNpZmljIGV2ZW50cyAuLi4gb3JcbiAgICAvLyB0byBldmVyeSBvYmplY3QgaXQncyBjdXJyZW50bHkgbGlzdGVuaW5nIHRvLlxuICAgIHN0b3BMaXN0ZW5pbmc6IGZ1bmN0aW9uKG9iaiwgbmFtZSwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBsaXN0ZW5pbmdUbyA9IHRoaXMuX2xpc3RlbmluZ1RvO1xuICAgICAgaWYgKCFsaXN0ZW5pbmdUbykgcmV0dXJuIHRoaXM7XG4gICAgICB2YXIgcmVtb3ZlID0gIW5hbWUgJiYgIWNhbGxiYWNrO1xuICAgICAgaWYgKCFjYWxsYmFjayAmJiB0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIGNhbGxiYWNrID0gdGhpcztcbiAgICAgIGlmIChvYmopIChsaXN0ZW5pbmdUbyA9IHt9KVtvYmouX2xpc3RlbklkXSA9IG9iajtcbiAgICAgIGZvciAodmFyIGlkIGluIGxpc3RlbmluZ1RvKSB7XG4gICAgICAgIG9iaiA9IGxpc3RlbmluZ1RvW2lkXTtcbiAgICAgICAgb2JqLm9mZihuYW1lLCBjYWxsYmFjaywgdGhpcyk7XG4gICAgICAgIGlmIChyZW1vdmUgfHwgXy5pc0VtcHR5KG9iai5fZXZlbnRzKSkgZGVsZXRlIHRoaXMuX2xpc3RlbmluZ1RvW2lkXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICB9O1xuXG4gIC8vIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIHNwbGl0IGV2ZW50IHN0cmluZ3MuXG4gIHZhciBldmVudFNwbGl0dGVyID0gL1xccysvO1xuXG4gIC8vIEltcGxlbWVudCBmYW5jeSBmZWF0dXJlcyBvZiB0aGUgRXZlbnRzIEFQSSBzdWNoIGFzIG11bHRpcGxlIGV2ZW50XG4gIC8vIG5hbWVzIGBcImNoYW5nZSBibHVyXCJgIGFuZCBqUXVlcnktc3R5bGUgZXZlbnQgbWFwcyBge2NoYW5nZTogYWN0aW9ufWBcbiAgLy8gaW4gdGVybXMgb2YgdGhlIGV4aXN0aW5nIEFQSS5cbiAgdmFyIGV2ZW50c0FwaSA9IGZ1bmN0aW9uKG9iaiwgYWN0aW9uLCBuYW1lLCByZXN0KSB7XG4gICAgaWYgKCFuYW1lKSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIEhhbmRsZSBldmVudCBtYXBzLlxuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBuYW1lKSB7XG4gICAgICAgIG9ialthY3Rpb25dLmFwcGx5KG9iaiwgW2tleSwgbmFtZVtrZXldXS5jb25jYXQocmVzdCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBzcGFjZSBzZXBhcmF0ZWQgZXZlbnQgbmFtZXMuXG4gICAgaWYgKGV2ZW50U3BsaXR0ZXIudGVzdChuYW1lKSkge1xuICAgICAgdmFyIG5hbWVzID0gbmFtZS5zcGxpdChldmVudFNwbGl0dGVyKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbmFtZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIG9ialthY3Rpb25dLmFwcGx5KG9iaiwgW25hbWVzW2ldXS5jb25jYXQocmVzdCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8vIEEgZGlmZmljdWx0LXRvLWJlbGlldmUsIGJ1dCBvcHRpbWl6ZWQgaW50ZXJuYWwgZGlzcGF0Y2ggZnVuY3Rpb24gZm9yXG4gIC8vIHRyaWdnZXJpbmcgZXZlbnRzLiBUcmllcyB0byBrZWVwIHRoZSB1c3VhbCBjYXNlcyBzcGVlZHkgKG1vc3QgaW50ZXJuYWxcbiAgLy8gQmFja2JvbmUgZXZlbnRzIGhhdmUgMyBhcmd1bWVudHMpLlxuICB2YXIgdHJpZ2dlckV2ZW50cyA9IGZ1bmN0aW9uKGV2ZW50cywgYXJncykge1xuICAgIHZhciBldiwgaSA9IC0xLCBsID0gZXZlbnRzLmxlbmd0aCwgYTEgPSBhcmdzWzBdLCBhMiA9IGFyZ3NbMV0sIGEzID0gYXJnc1syXTtcbiAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmNhbGwoZXYuY3R4KTsgcmV0dXJuO1xuICAgICAgY2FzZSAxOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCwgYTEpOyByZXR1cm47XG4gICAgICBjYXNlIDI6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmNhbGwoZXYuY3R4LCBhMSwgYTIpOyByZXR1cm47XG4gICAgICBjYXNlIDM6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmNhbGwoZXYuY3R4LCBhMSwgYTIsIGEzKTsgcmV0dXJuO1xuICAgICAgZGVmYXVsdDogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suYXBwbHkoZXYuY3R4LCBhcmdzKTsgcmV0dXJuO1xuICAgIH1cbiAgfTtcblxuICB2YXIgbGlzdGVuTWV0aG9kcyA9IHtsaXN0ZW5UbzogJ29uJywgbGlzdGVuVG9PbmNlOiAnb25jZSd9O1xuXG4gIC8vIEludmVyc2lvbi1vZi1jb250cm9sIHZlcnNpb25zIG9mIGBvbmAgYW5kIGBvbmNlYC4gVGVsbCAqdGhpcyogb2JqZWN0IHRvXG4gIC8vIGxpc3RlbiB0byBhbiBldmVudCBpbiBhbm90aGVyIG9iamVjdCAuLi4ga2VlcGluZyB0cmFjayBvZiB3aGF0IGl0J3NcbiAgLy8gbGlzdGVuaW5nIHRvLlxuICBfLmVhY2gobGlzdGVuTWV0aG9kcywgZnVuY3Rpb24oaW1wbGVtZW50YXRpb24sIG1ldGhvZCkge1xuICAgIEV2ZW50c1ttZXRob2RdID0gZnVuY3Rpb24ob2JqLCBuYW1lLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGxpc3RlbmluZ1RvID0gdGhpcy5fbGlzdGVuaW5nVG8gfHwgKHRoaXMuX2xpc3RlbmluZ1RvID0ge30pO1xuICAgICAgdmFyIGlkID0gb2JqLl9saXN0ZW5JZCB8fCAob2JqLl9saXN0ZW5JZCA9IF8udW5pcXVlSWQoJ2wnKSk7XG4gICAgICBsaXN0ZW5pbmdUb1tpZF0gPSBvYmo7XG4gICAgICBpZiAoIWNhbGxiYWNrICYmIHR5cGVvZiBuYW1lID09PSAnb2JqZWN0JykgY2FsbGJhY2sgPSB0aGlzO1xuICAgICAgb2JqW2ltcGxlbWVudGF0aW9uXShuYW1lLCBjYWxsYmFjaywgdGhpcyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICB9KTtcblxuICAvLyBBbGlhc2VzIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgRXZlbnRzLmJpbmQgICA9IEV2ZW50cy5vbjtcbiAgRXZlbnRzLnVuYmluZCA9IEV2ZW50cy5vZmY7XG5cbiAgLy8gQWxsb3cgdGhlIGBCYWNrYm9uZWAgb2JqZWN0IHRvIHNlcnZlIGFzIGEgZ2xvYmFsIGV2ZW50IGJ1cywgZm9yIGZvbGtzIHdob1xuICAvLyB3YW50IGdsb2JhbCBcInB1YnN1YlwiIGluIGEgY29udmVuaWVudCBwbGFjZS5cbiAgXy5leHRlbmQoQmFja2JvbmUsIEV2ZW50cyk7XG5cbiAgLy8gQmFja2JvbmUuTW9kZWxcbiAgLy8gLS0tLS0tLS0tLS0tLS1cblxuICAvLyBCYWNrYm9uZSAqKk1vZGVscyoqIGFyZSB0aGUgYmFzaWMgZGF0YSBvYmplY3QgaW4gdGhlIGZyYW1ld29yayAtLVxuICAvLyBmcmVxdWVudGx5IHJlcHJlc2VudGluZyBhIHJvdyBpbiBhIHRhYmxlIGluIGEgZGF0YWJhc2Ugb24geW91ciBzZXJ2ZXIuXG4gIC8vIEEgZGlzY3JldGUgY2h1bmsgb2YgZGF0YSBhbmQgYSBidW5jaCBvZiB1c2VmdWwsIHJlbGF0ZWQgbWV0aG9kcyBmb3JcbiAgLy8gcGVyZm9ybWluZyBjb21wdXRhdGlvbnMgYW5kIHRyYW5zZm9ybWF0aW9ucyBvbiB0aGF0IGRhdGEuXG5cbiAgLy8gQ3JlYXRlIGEgbmV3IG1vZGVsIHdpdGggdGhlIHNwZWNpZmllZCBhdHRyaWJ1dGVzLiBBIGNsaWVudCBpZCAoYGNpZGApXG4gIC8vIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGFuZCBhc3NpZ25lZCBmb3IgeW91LlxuICB2YXIgTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbCA9IGZ1bmN0aW9uKGF0dHJpYnV0ZXMsIG9wdGlvbnMpIHtcbiAgICB2YXIgYXR0cnMgPSBhdHRyaWJ1dGVzIHx8IHt9O1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgdGhpcy5jaWQgPSBfLnVuaXF1ZUlkKCdjJyk7XG4gICAgdGhpcy5hdHRyaWJ1dGVzID0ge307XG4gICAgaWYgKG9wdGlvbnMuY29sbGVjdGlvbikgdGhpcy5jb2xsZWN0aW9uID0gb3B0aW9ucy5jb2xsZWN0aW9uO1xuICAgIGlmIChvcHRpb25zLnBhcnNlKSBhdHRycyA9IHRoaXMucGFyc2UoYXR0cnMsIG9wdGlvbnMpIHx8IHt9O1xuICAgIGF0dHJzID0gXy5kZWZhdWx0cyh7fSwgYXR0cnMsIF8ucmVzdWx0KHRoaXMsICdkZWZhdWx0cycpKTtcbiAgICB0aGlzLnNldChhdHRycywgb3B0aW9ucyk7XG4gICAgdGhpcy5jaGFuZ2VkID0ge307XG4gICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQXR0YWNoIGFsbCBpbmhlcml0YWJsZSBtZXRob2RzIHRvIHRoZSBNb2RlbCBwcm90b3R5cGUuXG4gIF8uZXh0ZW5kKE1vZGVsLnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBBIGhhc2ggb2YgYXR0cmlidXRlcyB3aG9zZSBjdXJyZW50IGFuZCBwcmV2aW91cyB2YWx1ZSBkaWZmZXIuXG4gICAgY2hhbmdlZDogbnVsbCxcblxuICAgIC8vIFRoZSB2YWx1ZSByZXR1cm5lZCBkdXJpbmcgdGhlIGxhc3QgZmFpbGVkIHZhbGlkYXRpb24uXG4gICAgdmFsaWRhdGlvbkVycm9yOiBudWxsLFxuXG4gICAgLy8gVGhlIGRlZmF1bHQgbmFtZSBmb3IgdGhlIEpTT04gYGlkYCBhdHRyaWJ1dGUgaXMgYFwiaWRcImAuIE1vbmdvREIgYW5kXG4gICAgLy8gQ291Y2hEQiB1c2VycyBtYXkgd2FudCB0byBzZXQgdGhpcyB0byBgXCJfaWRcImAuXG4gICAgaWRBdHRyaWJ1dGU6ICdpZCcsXG5cbiAgICAvLyBJbml0aWFsaXplIGlzIGFuIGVtcHR5IGZ1bmN0aW9uIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGl0IHdpdGggeW91ciBvd25cbiAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpe30sXG5cbiAgICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBtb2RlbCdzIGBhdHRyaWJ1dGVzYCBvYmplY3QuXG4gICAgdG9KU09OOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gXy5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpO1xuICAgIH0sXG5cbiAgICAvLyBQcm94eSBgQmFja2JvbmUuc3luY2AgYnkgZGVmYXVsdCAtLSBidXQgb3ZlcnJpZGUgdGhpcyBpZiB5b3UgbmVlZFxuICAgIC8vIGN1c3RvbSBzeW5jaW5nIHNlbWFudGljcyBmb3IgKnRoaXMqIHBhcnRpY3VsYXIgbW9kZWwuXG4gICAgc3luYzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQmFja2JvbmUuc3luYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZS5cbiAgICBnZXQ6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbYXR0cl07XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgSFRNTC1lc2NhcGVkIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZS5cbiAgICBlc2NhcGU6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIHJldHVybiBfLmVzY2FwZSh0aGlzLmdldChhdHRyKSk7XG4gICAgfSxcblxuICAgIC8vIFJldHVybnMgYHRydWVgIGlmIHRoZSBhdHRyaWJ1dGUgY29udGFpbnMgYSB2YWx1ZSB0aGF0IGlzIG5vdCBudWxsXG4gICAgLy8gb3IgdW5kZWZpbmVkLlxuICAgIGhhczogZnVuY3Rpb24oYXR0cikge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0KGF0dHIpICE9IG51bGw7XG4gICAgfSxcblxuICAgIC8vIFNldCBhIGhhc2ggb2YgbW9kZWwgYXR0cmlidXRlcyBvbiB0aGUgb2JqZWN0LCBmaXJpbmcgYFwiY2hhbmdlXCJgLiBUaGlzIGlzXG4gICAgLy8gdGhlIGNvcmUgcHJpbWl0aXZlIG9wZXJhdGlvbiBvZiBhIG1vZGVsLCB1cGRhdGluZyB0aGUgZGF0YSBhbmQgbm90aWZ5aW5nXG4gICAgLy8gYW55b25lIHdobyBuZWVkcyB0byBrbm93IGFib3V0IHRoZSBjaGFuZ2UgaW4gc3RhdGUuIFRoZSBoZWFydCBvZiB0aGUgYmVhc3QuXG4gICAgc2V0OiBmdW5jdGlvbihrZXksIHZhbCwgb3B0aW9ucykge1xuICAgICAgdmFyIGF0dHIsIGF0dHJzLCB1bnNldCwgY2hhbmdlcywgc2lsZW50LCBjaGFuZ2luZywgcHJldiwgY3VycmVudDtcbiAgICAgIGlmIChrZXkgPT0gbnVsbCkgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIEhhbmRsZSBib3RoIGBcImtleVwiLCB2YWx1ZWAgYW5kIGB7a2V5OiB2YWx1ZX1gIC1zdHlsZSBhcmd1bWVudHMuXG4gICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgYXR0cnMgPSBrZXk7XG4gICAgICAgIG9wdGlvbnMgPSB2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAoYXR0cnMgPSB7fSlba2V5XSA9IHZhbDtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcblxuICAgICAgLy8gUnVuIHZhbGlkYXRpb24uXG4gICAgICBpZiAoIXRoaXMuX3ZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAvLyBFeHRyYWN0IGF0dHJpYnV0ZXMgYW5kIG9wdGlvbnMuXG4gICAgICB1bnNldCAgICAgICAgICAgPSBvcHRpb25zLnVuc2V0O1xuICAgICAgc2lsZW50ICAgICAgICAgID0gb3B0aW9ucy5zaWxlbnQ7XG4gICAgICBjaGFuZ2VzICAgICAgICAgPSBbXTtcbiAgICAgIGNoYW5naW5nICAgICAgICA9IHRoaXMuX2NoYW5naW5nO1xuICAgICAgdGhpcy5fY2hhbmdpbmcgID0gdHJ1ZTtcblxuICAgICAgaWYgKCFjaGFuZ2luZykge1xuICAgICAgICB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMgPSBfLmNsb25lKHRoaXMuYXR0cmlidXRlcyk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCA9IHt9O1xuICAgICAgfVxuICAgICAgY3VycmVudCA9IHRoaXMuYXR0cmlidXRlcywgcHJldiA9IHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcztcblxuICAgICAgLy8gQ2hlY2sgZm9yIGNoYW5nZXMgb2YgYGlkYC5cbiAgICAgIGlmICh0aGlzLmlkQXR0cmlidXRlIGluIGF0dHJzKSB0aGlzLmlkID0gYXR0cnNbdGhpcy5pZEF0dHJpYnV0ZV07XG5cbiAgICAgIC8vIEZvciBlYWNoIGBzZXRgIGF0dHJpYnV0ZSwgdXBkYXRlIG9yIGRlbGV0ZSB0aGUgY3VycmVudCB2YWx1ZS5cbiAgICAgIGZvciAoYXR0ciBpbiBhdHRycykge1xuICAgICAgICB2YWwgPSBhdHRyc1thdHRyXTtcbiAgICAgICAgaWYgKCFfLmlzRXF1YWwoY3VycmVudFthdHRyXSwgdmFsKSkgY2hhbmdlcy5wdXNoKGF0dHIpO1xuICAgICAgICBpZiAoIV8uaXNFcXVhbChwcmV2W2F0dHJdLCB2YWwpKSB7XG4gICAgICAgICAgdGhpcy5jaGFuZ2VkW2F0dHJdID0gdmFsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoYW5nZWRbYXR0cl07XG4gICAgICAgIH1cbiAgICAgICAgdW5zZXQgPyBkZWxldGUgY3VycmVudFthdHRyXSA6IGN1cnJlbnRbYXR0cl0gPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIC8vIFRyaWdnZXIgYWxsIHJlbGV2YW50IGF0dHJpYnV0ZSBjaGFuZ2VzLlxuICAgICAgaWYgKCFzaWxlbnQpIHtcbiAgICAgICAgaWYgKGNoYW5nZXMubGVuZ3RoKSB0aGlzLl9wZW5kaW5nID0gb3B0aW9ucztcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGFuZ2VzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlOicgKyBjaGFuZ2VzW2ldLCB0aGlzLCBjdXJyZW50W2NoYW5nZXNbaV1dLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBZb3UgbWlnaHQgYmUgd29uZGVyaW5nIHdoeSB0aGVyZSdzIGEgYHdoaWxlYCBsb29wIGhlcmUuIENoYW5nZXMgY2FuXG4gICAgICAvLyBiZSByZWN1cnNpdmVseSBuZXN0ZWQgd2l0aGluIGBcImNoYW5nZVwiYCBldmVudHMuXG4gICAgICBpZiAoY2hhbmdpbmcpIHJldHVybiB0aGlzO1xuICAgICAgaWYgKCFzaWxlbnQpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuX3BlbmRpbmcpIHtcbiAgICAgICAgICBvcHRpb25zID0gdGhpcy5fcGVuZGluZztcbiAgICAgICAgICB0aGlzLl9wZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2UnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fcGVuZGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5fY2hhbmdpbmcgPSBmYWxzZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gdGhlIG1vZGVsLCBmaXJpbmcgYFwiY2hhbmdlXCJgLiBgdW5zZXRgIGlzIGEgbm9vcFxuICAgIC8vIGlmIHRoZSBhdHRyaWJ1dGUgZG9lc24ndCBleGlzdC5cbiAgICB1bnNldDogZnVuY3Rpb24oYXR0ciwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KGF0dHIsIHZvaWQgMCwgXy5leHRlbmQoe30sIG9wdGlvbnMsIHt1bnNldDogdHJ1ZX0pKTtcbiAgICB9LFxuXG4gICAgLy8gQ2xlYXIgYWxsIGF0dHJpYnV0ZXMgb24gdGhlIG1vZGVsLCBmaXJpbmcgYFwiY2hhbmdlXCJgLlxuICAgIGNsZWFyOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgYXR0cnMgPSB7fTtcbiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmF0dHJpYnV0ZXMpIGF0dHJzW2tleV0gPSB2b2lkIDA7XG4gICAgICByZXR1cm4gdGhpcy5zZXQoYXR0cnMsIF8uZXh0ZW5kKHt9LCBvcHRpb25zLCB7dW5zZXQ6IHRydWV9KSk7XG4gICAgfSxcblxuICAgIC8vIERldGVybWluZSBpZiB0aGUgbW9kZWwgaGFzIGNoYW5nZWQgc2luY2UgdGhlIGxhc3QgYFwiY2hhbmdlXCJgIGV2ZW50LlxuICAgIC8vIElmIHlvdSBzcGVjaWZ5IGFuIGF0dHJpYnV0ZSBuYW1lLCBkZXRlcm1pbmUgaWYgdGhhdCBhdHRyaWJ1dGUgaGFzIGNoYW5nZWQuXG4gICAgaGFzQ2hhbmdlZDogZnVuY3Rpb24oYXR0cikge1xuICAgICAgaWYgKGF0dHIgPT0gbnVsbCkgcmV0dXJuICFfLmlzRW1wdHkodGhpcy5jaGFuZ2VkKTtcbiAgICAgIHJldHVybiBfLmhhcyh0aGlzLmNoYW5nZWQsIGF0dHIpO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm4gYW4gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIHRoZSBhdHRyaWJ1dGVzIHRoYXQgaGF2ZSBjaGFuZ2VkLCBvclxuICAgIC8vIGZhbHNlIGlmIHRoZXJlIGFyZSBubyBjaGFuZ2VkIGF0dHJpYnV0ZXMuIFVzZWZ1bCBmb3IgZGV0ZXJtaW5pbmcgd2hhdFxuICAgIC8vIHBhcnRzIG9mIGEgdmlldyBuZWVkIHRvIGJlIHVwZGF0ZWQgYW5kL29yIHdoYXQgYXR0cmlidXRlcyBuZWVkIHRvIGJlXG4gICAgLy8gcGVyc2lzdGVkIHRvIHRoZSBzZXJ2ZXIuIFVuc2V0IGF0dHJpYnV0ZXMgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLlxuICAgIC8vIFlvdSBjYW4gYWxzbyBwYXNzIGFuIGF0dHJpYnV0ZXMgb2JqZWN0IHRvIGRpZmYgYWdhaW5zdCB0aGUgbW9kZWwsXG4gICAgLy8gZGV0ZXJtaW5pbmcgaWYgdGhlcmUgKndvdWxkIGJlKiBhIGNoYW5nZS5cbiAgICBjaGFuZ2VkQXR0cmlidXRlczogZnVuY3Rpb24oZGlmZikge1xuICAgICAgaWYgKCFkaWZmKSByZXR1cm4gdGhpcy5oYXNDaGFuZ2VkKCkgPyBfLmNsb25lKHRoaXMuY2hhbmdlZCkgOiBmYWxzZTtcbiAgICAgIHZhciB2YWwsIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgIHZhciBvbGQgPSB0aGlzLl9jaGFuZ2luZyA/IHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyA6IHRoaXMuYXR0cmlidXRlcztcbiAgICAgIGZvciAodmFyIGF0dHIgaW4gZGlmZikge1xuICAgICAgICBpZiAoXy5pc0VxdWFsKG9sZFthdHRyXSwgKHZhbCA9IGRpZmZbYXR0cl0pKSkgY29udGludWU7XG4gICAgICAgIChjaGFuZ2VkIHx8IChjaGFuZ2VkID0ge30pKVthdHRyXSA9IHZhbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGFuZ2VkO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIHByZXZpb3VzIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZSwgcmVjb3JkZWQgYXQgdGhlIHRpbWUgdGhlIGxhc3RcbiAgICAvLyBgXCJjaGFuZ2VcImAgZXZlbnQgd2FzIGZpcmVkLlxuICAgIHByZXZpb3VzOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICBpZiAoYXR0ciA9PSBudWxsIHx8ICF0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlc1thdHRyXTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IGFsbCBvZiB0aGUgYXR0cmlidXRlcyBvZiB0aGUgbW9kZWwgYXQgdGhlIHRpbWUgb2YgdGhlIHByZXZpb3VzXG4gICAgLy8gYFwiY2hhbmdlXCJgIGV2ZW50LlxuICAgIHByZXZpb3VzQXR0cmlidXRlczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXy5jbG9uZSh0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMpO1xuICAgIH0sXG5cbiAgICAvLyBGZXRjaCB0aGUgbW9kZWwgZnJvbSB0aGUgc2VydmVyLiBJZiB0aGUgc2VydmVyJ3MgcmVwcmVzZW50YXRpb24gb2YgdGhlXG4gICAgLy8gbW9kZWwgZGlmZmVycyBmcm9tIGl0cyBjdXJyZW50IGF0dHJpYnV0ZXMsIHRoZXkgd2lsbCBiZSBvdmVycmlkZGVuLFxuICAgIC8vIHRyaWdnZXJpbmcgYSBgXCJjaGFuZ2VcImAgZXZlbnQuXG4gICAgZmV0Y2g6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgaWYgKG9wdGlvbnMucGFyc2UgPT09IHZvaWQgMCkgb3B0aW9ucy5wYXJzZSA9IHRydWU7XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIGlmICghbW9kZWwuc2V0KG1vZGVsLnBhcnNlKHJlc3AsIG9wdGlvbnMpLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcyhtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIG1vZGVsLnRyaWdnZXIoJ3N5bmMnLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgICAgd3JhcEVycm9yKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXMuc3luYygncmVhZCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgIH0sXG5cbiAgICAvLyBTZXQgYSBoYXNoIG9mIG1vZGVsIGF0dHJpYnV0ZXMsIGFuZCBzeW5jIHRoZSBtb2RlbCB0byB0aGUgc2VydmVyLlxuICAgIC8vIElmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBhdHRyaWJ1dGVzIGhhc2ggdGhhdCBkaWZmZXJzLCB0aGUgbW9kZWwnc1xuICAgIC8vIHN0YXRlIHdpbGwgYmUgYHNldGAgYWdhaW4uXG4gICAgc2F2ZTogZnVuY3Rpb24oa2V5LCB2YWwsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBhdHRycywgbWV0aG9kLCB4aHIsIGF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXM7XG5cbiAgICAgIC8vIEhhbmRsZSBib3RoIGBcImtleVwiLCB2YWx1ZWAgYW5kIGB7a2V5OiB2YWx1ZX1gIC1zdHlsZSBhcmd1bWVudHMuXG4gICAgICBpZiAoa2V5ID09IG51bGwgfHwgdHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgYXR0cnMgPSBrZXk7XG4gICAgICAgIG9wdGlvbnMgPSB2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAoYXR0cnMgPSB7fSlba2V5XSA9IHZhbDtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHt2YWxpZGF0ZTogdHJ1ZX0sIG9wdGlvbnMpO1xuXG4gICAgICAvLyBJZiB3ZSdyZSBub3Qgd2FpdGluZyBhbmQgYXR0cmlidXRlcyBleGlzdCwgc2F2ZSBhY3RzIGFzXG4gICAgICAvLyBgc2V0KGF0dHIpLnNhdmUobnVsbCwgb3B0cylgIHdpdGggdmFsaWRhdGlvbi4gT3RoZXJ3aXNlLCBjaGVjayBpZlxuICAgICAgLy8gdGhlIG1vZGVsIHdpbGwgYmUgdmFsaWQgd2hlbiB0aGUgYXR0cmlidXRlcywgaWYgYW55LCBhcmUgc2V0LlxuICAgICAgaWYgKGF0dHJzICYmICFvcHRpb25zLndhaXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNldChhdHRycywgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhpcy5fdmFsaWRhdGUoYXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCB0ZW1wb3JhcnkgYXR0cmlidXRlcyBpZiBge3dhaXQ6IHRydWV9YC5cbiAgICAgIGlmIChhdHRycyAmJiBvcHRpb25zLndhaXQpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gXy5leHRlbmQoe30sIGF0dHJpYnV0ZXMsIGF0dHJzKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWZ0ZXIgYSBzdWNjZXNzZnVsIHNlcnZlci1zaWRlIHNhdmUsIHRoZSBjbGllbnQgaXMgKG9wdGlvbmFsbHkpXG4gICAgICAvLyB1cGRhdGVkIHdpdGggdGhlIHNlcnZlci1zaWRlIHN0YXRlLlxuICAgICAgaWYgKG9wdGlvbnMucGFyc2UgPT09IHZvaWQgMCkgb3B0aW9ucy5wYXJzZSA9IHRydWU7XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIC8vIEVuc3VyZSBhdHRyaWJ1dGVzIGFyZSByZXN0b3JlZCBkdXJpbmcgc3luY2hyb25vdXMgc2F2ZXMuXG4gICAgICAgIG1vZGVsLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgICAgICB2YXIgc2VydmVyQXR0cnMgPSBtb2RlbC5wYXJzZShyZXNwLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKG9wdGlvbnMud2FpdCkgc2VydmVyQXR0cnMgPSBfLmV4dGVuZChhdHRycyB8fCB7fSwgc2VydmVyQXR0cnMpO1xuICAgICAgICBpZiAoXy5pc09iamVjdChzZXJ2ZXJBdHRycykgJiYgIW1vZGVsLnNldChzZXJ2ZXJBdHRycywgb3B0aW9ucykpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MobW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBtb2RlbC50cmlnZ2VyKCdzeW5jJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcblxuICAgICAgbWV0aG9kID0gdGhpcy5pc05ldygpID8gJ2NyZWF0ZScgOiAob3B0aW9ucy5wYXRjaCA/ICdwYXRjaCcgOiAndXBkYXRlJyk7XG4gICAgICBpZiAobWV0aG9kID09PSAncGF0Y2gnKSBvcHRpb25zLmF0dHJzID0gYXR0cnM7XG4gICAgICB4aHIgPSB0aGlzLnN5bmMobWV0aG9kLCB0aGlzLCBvcHRpb25zKTtcblxuICAgICAgLy8gUmVzdG9yZSBhdHRyaWJ1dGVzLlxuICAgICAgaWYgKGF0dHJzICYmIG9wdGlvbnMud2FpdCkgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcblxuICAgICAgcmV0dXJuIHhocjtcbiAgICB9LFxuXG4gICAgLy8gRGVzdHJveSB0aGlzIG1vZGVsIG9uIHRoZSBzZXJ2ZXIgaWYgaXQgd2FzIGFscmVhZHkgcGVyc2lzdGVkLlxuICAgIC8vIE9wdGltaXN0aWNhbGx5IHJlbW92ZXMgdGhlIG1vZGVsIGZyb20gaXRzIGNvbGxlY3Rpb24sIGlmIGl0IGhhcyBvbmUuXG4gICAgLy8gSWYgYHdhaXQ6IHRydWVgIGlzIHBhc3NlZCwgd2FpdHMgZm9yIHRoZSBzZXJ2ZXIgdG8gcmVzcG9uZCBiZWZvcmUgcmVtb3ZhbC5cbiAgICBkZXN0cm95OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXM7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcblxuICAgICAgdmFyIGRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgbW9kZWwudHJpZ2dlcignZGVzdHJveScsIG1vZGVsLCBtb2RlbC5jb2xsZWN0aW9uLCBvcHRpb25zKTtcbiAgICAgIH07XG5cbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgaWYgKG9wdGlvbnMud2FpdCB8fCBtb2RlbC5pc05ldygpKSBkZXN0cm95KCk7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzKG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKCFtb2RlbC5pc05ldygpKSBtb2RlbC50cmlnZ2VyKCdzeW5jJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMuaXNOZXcoKSkge1xuICAgICAgICBvcHRpb25zLnN1Y2Nlc3MoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgd3JhcEVycm9yKHRoaXMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgeGhyID0gdGhpcy5zeW5jKCdkZWxldGUnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIGlmICghb3B0aW9ucy53YWl0KSBkZXN0cm95KCk7XG4gICAgICByZXR1cm4geGhyO1xuICAgIH0sXG5cbiAgICAvLyBEZWZhdWx0IFVSTCBmb3IgdGhlIG1vZGVsJ3MgcmVwcmVzZW50YXRpb24gb24gdGhlIHNlcnZlciAtLSBpZiB5b3UncmVcbiAgICAvLyB1c2luZyBCYWNrYm9uZSdzIHJlc3RmdWwgbWV0aG9kcywgb3ZlcnJpZGUgdGhpcyB0byBjaGFuZ2UgdGhlIGVuZHBvaW50XG4gICAgLy8gdGhhdCB3aWxsIGJlIGNhbGxlZC5cbiAgICB1cmw6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJhc2UgPVxuICAgICAgICBfLnJlc3VsdCh0aGlzLCAndXJsUm9vdCcpIHx8XG4gICAgICAgIF8ucmVzdWx0KHRoaXMuY29sbGVjdGlvbiwgJ3VybCcpIHx8XG4gICAgICAgIHVybEVycm9yKCk7XG4gICAgICBpZiAodGhpcy5pc05ldygpKSByZXR1cm4gYmFzZTtcbiAgICAgIHJldHVybiBiYXNlLnJlcGxhY2UoLyhbXlxcL10pJC8sICckMS8nKSArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmlkKTtcbiAgICB9LFxuXG4gICAgLy8gKipwYXJzZSoqIGNvbnZlcnRzIGEgcmVzcG9uc2UgaW50byB0aGUgaGFzaCBvZiBhdHRyaWJ1dGVzIHRvIGJlIGBzZXRgIG9uXG4gICAgLy8gdGhlIG1vZGVsLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBpcyBqdXN0IHRvIHBhc3MgdGhlIHJlc3BvbnNlIGFsb25nLlxuICAgIHBhcnNlOiBmdW5jdGlvbihyZXNwLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gcmVzcDtcbiAgICB9LFxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IG1vZGVsIHdpdGggaWRlbnRpY2FsIGF0dHJpYnV0ZXMgdG8gdGhpcyBvbmUuXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuYXR0cmlidXRlcyk7XG4gICAgfSxcblxuICAgIC8vIEEgbW9kZWwgaXMgbmV3IGlmIGl0IGhhcyBuZXZlciBiZWVuIHNhdmVkIHRvIHRoZSBzZXJ2ZXIsIGFuZCBsYWNrcyBhbiBpZC5cbiAgICBpc05ldzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuaGFzKHRoaXMuaWRBdHRyaWJ1dGUpO1xuICAgIH0sXG5cbiAgICAvLyBDaGVjayBpZiB0aGUgbW9kZWwgaXMgY3VycmVudGx5IGluIGEgdmFsaWQgc3RhdGUuXG4gICAgaXNWYWxpZDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuX3ZhbGlkYXRlKHt9LCBfLmV4dGVuZChvcHRpb25zIHx8IHt9LCB7IHZhbGlkYXRlOiB0cnVlIH0pKTtcbiAgICB9LFxuXG4gICAgLy8gUnVuIHZhbGlkYXRpb24gYWdhaW5zdCB0aGUgbmV4dCBjb21wbGV0ZSBzZXQgb2YgbW9kZWwgYXR0cmlidXRlcyxcbiAgICAvLyByZXR1cm5pbmcgYHRydWVgIGlmIGFsbCBpcyB3ZWxsLiBPdGhlcndpc2UsIGZpcmUgYW4gYFwiaW52YWxpZFwiYCBldmVudC5cbiAgICBfdmFsaWRhdGU6IGZ1bmN0aW9uKGF0dHJzLCBvcHRpb25zKSB7XG4gICAgICBpZiAoIW9wdGlvbnMudmFsaWRhdGUgfHwgIXRoaXMudmFsaWRhdGUpIHJldHVybiB0cnVlO1xuICAgICAgYXR0cnMgPSBfLmV4dGVuZCh7fSwgdGhpcy5hdHRyaWJ1dGVzLCBhdHRycyk7XG4gICAgICB2YXIgZXJyb3IgPSB0aGlzLnZhbGlkYXRpb25FcnJvciA9IHRoaXMudmFsaWRhdGUoYXR0cnMsIG9wdGlvbnMpIHx8IG51bGw7XG4gICAgICBpZiAoIWVycm9yKSByZXR1cm4gdHJ1ZTtcbiAgICAgIHRoaXMudHJpZ2dlcignaW52YWxpZCcsIHRoaXMsIGVycm9yLCBfLmV4dGVuZChvcHRpb25zLCB7dmFsaWRhdGlvbkVycm9yOiBlcnJvcn0pKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgLy8gVW5kZXJzY29yZSBtZXRob2RzIHRoYXQgd2Ugd2FudCB0byBpbXBsZW1lbnQgb24gdGhlIE1vZGVsLlxuICB2YXIgbW9kZWxNZXRob2RzID0gWydrZXlzJywgJ3ZhbHVlcycsICdwYWlycycsICdpbnZlcnQnLCAncGljaycsICdvbWl0J107XG5cbiAgLy8gTWl4IGluIGVhY2ggVW5kZXJzY29yZSBtZXRob2QgYXMgYSBwcm94eSB0byBgTW9kZWwjYXR0cmlidXRlc2AuXG4gIF8uZWFjaChtb2RlbE1ldGhvZHMsIGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgIE1vZGVsLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgIGFyZ3MudW5zaGlmdCh0aGlzLmF0dHJpYnV0ZXMpO1xuICAgICAgcmV0dXJuIF9bbWV0aG9kXS5hcHBseShfLCBhcmdzKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBCYWNrYm9uZS5Db2xsZWN0aW9uXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBJZiBtb2RlbHMgdGVuZCB0byByZXByZXNlbnQgYSBzaW5nbGUgcm93IG9mIGRhdGEsIGEgQmFja2JvbmUgQ29sbGVjdGlvbiBpc1xuICAvLyBtb3JlIGFuYWxhZ291cyB0byBhIHRhYmxlIGZ1bGwgb2YgZGF0YSAuLi4gb3IgYSBzbWFsbCBzbGljZSBvciBwYWdlIG9mIHRoYXRcbiAgLy8gdGFibGUsIG9yIGEgY29sbGVjdGlvbiBvZiByb3dzIHRoYXQgYmVsb25nIHRvZ2V0aGVyIGZvciBhIHBhcnRpY3VsYXIgcmVhc29uXG4gIC8vIC0tIGFsbCBvZiB0aGUgbWVzc2FnZXMgaW4gdGhpcyBwYXJ0aWN1bGFyIGZvbGRlciwgYWxsIG9mIHRoZSBkb2N1bWVudHNcbiAgLy8gYmVsb25naW5nIHRvIHRoaXMgcGFydGljdWxhciBhdXRob3IsIGFuZCBzbyBvbi4gQ29sbGVjdGlvbnMgbWFpbnRhaW5cbiAgLy8gaW5kZXhlcyBvZiB0aGVpciBtb2RlbHMsIGJvdGggaW4gb3JkZXIsIGFuZCBmb3IgbG9va3VwIGJ5IGBpZGAuXG5cbiAgLy8gQ3JlYXRlIGEgbmV3ICoqQ29sbGVjdGlvbioqLCBwZXJoYXBzIHRvIGNvbnRhaW4gYSBzcGVjaWZpYyB0eXBlIG9mIGBtb2RlbGAuXG4gIC8vIElmIGEgYGNvbXBhcmF0b3JgIGlzIHNwZWNpZmllZCwgdGhlIENvbGxlY3Rpb24gd2lsbCBtYWludGFpblxuICAvLyBpdHMgbW9kZWxzIGluIHNvcnQgb3JkZXIsIGFzIHRoZXkncmUgYWRkZWQgYW5kIHJlbW92ZWQuXG4gIHZhciBDb2xsZWN0aW9uID0gQmFja2JvbmUuQ29sbGVjdGlvbiA9IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgaWYgKG9wdGlvbnMubW9kZWwpIHRoaXMubW9kZWwgPSBvcHRpb25zLm1vZGVsO1xuICAgIGlmIChvcHRpb25zLmNvbXBhcmF0b3IgIT09IHZvaWQgMCkgdGhpcy5jb21wYXJhdG9yID0gb3B0aW9ucy5jb21wYXJhdG9yO1xuICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKG1vZGVscykgdGhpcy5yZXNldChtb2RlbHMsIF8uZXh0ZW5kKHtzaWxlbnQ6IHRydWV9LCBvcHRpb25zKSk7XG4gIH07XG5cbiAgLy8gRGVmYXVsdCBvcHRpb25zIGZvciBgQ29sbGVjdGlvbiNzZXRgLlxuICB2YXIgc2V0T3B0aW9ucyA9IHthZGQ6IHRydWUsIHJlbW92ZTogdHJ1ZSwgbWVyZ2U6IHRydWV9O1xuICB2YXIgYWRkT3B0aW9ucyA9IHthZGQ6IHRydWUsIHJlbW92ZTogZmFsc2V9O1xuXG4gIC8vIERlZmluZSB0aGUgQ29sbGVjdGlvbidzIGluaGVyaXRhYmxlIG1ldGhvZHMuXG4gIF8uZXh0ZW5kKENvbGxlY3Rpb24ucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIFRoZSBkZWZhdWx0IG1vZGVsIGZvciBhIGNvbGxlY3Rpb24gaXMganVzdCBhICoqQmFja2JvbmUuTW9kZWwqKi5cbiAgICAvLyBUaGlzIHNob3VsZCBiZSBvdmVycmlkZGVuIGluIG1vc3QgY2FzZXMuXG4gICAgbW9kZWw6IE1vZGVsLFxuXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXG4gICAgLy8gVGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYSBDb2xsZWN0aW9uIGlzIGFuIGFycmF5IG9mIHRoZVxuICAgIC8vIG1vZGVscycgYXR0cmlidXRlcy5cbiAgICB0b0pTT046IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbihtb2RlbCl7IHJldHVybiBtb2RlbC50b0pTT04ob3B0aW9ucyk7IH0pO1xuICAgIH0sXG5cbiAgICAvLyBQcm94eSBgQmFja2JvbmUuc3luY2AgYnkgZGVmYXVsdC5cbiAgICBzeW5jOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCYWNrYm9uZS5zeW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIG1vZGVsLCBvciBsaXN0IG9mIG1vZGVscyB0byB0aGUgc2V0LlxuICAgIGFkZDogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXQobW9kZWxzLCBfLmV4dGVuZCh7bWVyZ2U6IGZhbHNlfSwgb3B0aW9ucywgYWRkT3B0aW9ucykpO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgYSBtb2RlbCwgb3IgYSBsaXN0IG9mIG1vZGVscyBmcm9tIHRoZSBzZXQuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBzaW5ndWxhciA9ICFfLmlzQXJyYXkobW9kZWxzKTtcbiAgICAgIG1vZGVscyA9IHNpbmd1bGFyID8gW21vZGVsc10gOiBfLmNsb25lKG1vZGVscyk7XG4gICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgICAgdmFyIGksIGwsIGluZGV4LCBtb2RlbDtcbiAgICAgIGZvciAoaSA9IDAsIGwgPSBtb2RlbHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIG1vZGVsID0gbW9kZWxzW2ldID0gdGhpcy5nZXQobW9kZWxzW2ldKTtcbiAgICAgICAgaWYgKCFtb2RlbCkgY29udGludWU7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9ieUlkW21vZGVsLmlkXTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2J5SWRbbW9kZWwuY2lkXTtcbiAgICAgICAgaW5kZXggPSB0aGlzLmluZGV4T2YobW9kZWwpO1xuICAgICAgICB0aGlzLm1vZGVscy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLmxlbmd0aC0tO1xuICAgICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB7XG4gICAgICAgICAgb3B0aW9ucy5pbmRleCA9IGluZGV4O1xuICAgICAgICAgIG1vZGVsLnRyaWdnZXIoJ3JlbW92ZScsIG1vZGVsLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZW1vdmVSZWZlcmVuY2UobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNpbmd1bGFyID8gbW9kZWxzWzBdIDogbW9kZWxzO1xuICAgIH0sXG5cbiAgICAvLyBVcGRhdGUgYSBjb2xsZWN0aW9uIGJ5IGBzZXRgLWluZyBhIG5ldyBsaXN0IG9mIG1vZGVscywgYWRkaW5nIG5ldyBvbmVzLFxuICAgIC8vIHJlbW92aW5nIG1vZGVscyB0aGF0IGFyZSBubyBsb25nZXIgcHJlc2VudCwgYW5kIG1lcmdpbmcgbW9kZWxzIHRoYXRcbiAgICAvLyBhbHJlYWR5IGV4aXN0IGluIHRoZSBjb2xsZWN0aW9uLCBhcyBuZWNlc3NhcnkuIFNpbWlsYXIgdG8gKipNb2RlbCNzZXQqKixcbiAgICAvLyB0aGUgY29yZSBvcGVyYXRpb24gZm9yIHVwZGF0aW5nIHRoZSBkYXRhIGNvbnRhaW5lZCBieSB0aGUgY29sbGVjdGlvbi5cbiAgICBzZXQ6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IF8uZGVmYXVsdHMoe30sIG9wdGlvbnMsIHNldE9wdGlvbnMpO1xuICAgICAgaWYgKG9wdGlvbnMucGFyc2UpIG1vZGVscyA9IHRoaXMucGFyc2UobW9kZWxzLCBvcHRpb25zKTtcbiAgICAgIHZhciBzaW5ndWxhciA9ICFfLmlzQXJyYXkobW9kZWxzKTtcbiAgICAgIG1vZGVscyA9IHNpbmd1bGFyID8gKG1vZGVscyA/IFttb2RlbHNdIDogW10pIDogXy5jbG9uZShtb2RlbHMpO1xuICAgICAgdmFyIGksIGwsIGlkLCBtb2RlbCwgYXR0cnMsIGV4aXN0aW5nLCBzb3J0O1xuICAgICAgdmFyIGF0ID0gb3B0aW9ucy5hdDtcbiAgICAgIHZhciB0YXJnZXRNb2RlbCA9IHRoaXMubW9kZWw7XG4gICAgICB2YXIgc29ydGFibGUgPSB0aGlzLmNvbXBhcmF0b3IgJiYgKGF0ID09IG51bGwpICYmIG9wdGlvbnMuc29ydCAhPT0gZmFsc2U7XG4gICAgICB2YXIgc29ydEF0dHIgPSBfLmlzU3RyaW5nKHRoaXMuY29tcGFyYXRvcikgPyB0aGlzLmNvbXBhcmF0b3IgOiBudWxsO1xuICAgICAgdmFyIHRvQWRkID0gW10sIHRvUmVtb3ZlID0gW10sIG1vZGVsTWFwID0ge307XG4gICAgICB2YXIgYWRkID0gb3B0aW9ucy5hZGQsIG1lcmdlID0gb3B0aW9ucy5tZXJnZSwgcmVtb3ZlID0gb3B0aW9ucy5yZW1vdmU7XG4gICAgICB2YXIgb3JkZXIgPSAhc29ydGFibGUgJiYgYWRkICYmIHJlbW92ZSA/IFtdIDogZmFsc2U7XG5cbiAgICAgIC8vIFR1cm4gYmFyZSBvYmplY3RzIGludG8gbW9kZWwgcmVmZXJlbmNlcywgYW5kIHByZXZlbnQgaW52YWxpZCBtb2RlbHNcbiAgICAgIC8vIGZyb20gYmVpbmcgYWRkZWQuXG4gICAgICBmb3IgKGkgPSAwLCBsID0gbW9kZWxzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBhdHRycyA9IG1vZGVsc1tpXSB8fCB7fTtcbiAgICAgICAgaWYgKGF0dHJzIGluc3RhbmNlb2YgTW9kZWwpIHtcbiAgICAgICAgICBpZCA9IG1vZGVsID0gYXR0cnM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWQgPSBhdHRyc1t0YXJnZXRNb2RlbC5wcm90b3R5cGUuaWRBdHRyaWJ1dGUgfHwgJ2lkJ107XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBhIGR1cGxpY2F0ZSBpcyBmb3VuZCwgcHJldmVudCBpdCBmcm9tIGJlaW5nIGFkZGVkIGFuZFxuICAgICAgICAvLyBvcHRpb25hbGx5IG1lcmdlIGl0IGludG8gdGhlIGV4aXN0aW5nIG1vZGVsLlxuICAgICAgICBpZiAoZXhpc3RpbmcgPSB0aGlzLmdldChpZCkpIHtcbiAgICAgICAgICBpZiAocmVtb3ZlKSBtb2RlbE1hcFtleGlzdGluZy5jaWRdID0gdHJ1ZTtcbiAgICAgICAgICBpZiAobWVyZ2UpIHtcbiAgICAgICAgICAgIGF0dHJzID0gYXR0cnMgPT09IG1vZGVsID8gbW9kZWwuYXR0cmlidXRlcyA6IGF0dHJzO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGFyc2UpIGF0dHJzID0gZXhpc3RpbmcucGFyc2UoYXR0cnMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgZXhpc3Rpbmcuc2V0KGF0dHJzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChzb3J0YWJsZSAmJiAhc29ydCAmJiBleGlzdGluZy5oYXNDaGFuZ2VkKHNvcnRBdHRyKSkgc29ydCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1vZGVsc1tpXSA9IGV4aXN0aW5nO1xuXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYSBuZXcsIHZhbGlkIG1vZGVsLCBwdXNoIGl0IHRvIHRoZSBgdG9BZGRgIGxpc3QuXG4gICAgICAgIH0gZWxzZSBpZiAoYWRkKSB7XG4gICAgICAgICAgbW9kZWwgPSBtb2RlbHNbaV0gPSB0aGlzLl9wcmVwYXJlTW9kZWwoYXR0cnMsIG9wdGlvbnMpO1xuICAgICAgICAgIGlmICghbW9kZWwpIGNvbnRpbnVlO1xuICAgICAgICAgIHRvQWRkLnB1c2gobW9kZWwpO1xuICAgICAgICAgIHRoaXMuX2FkZFJlZmVyZW5jZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEbyBub3QgYWRkIG11bHRpcGxlIG1vZGVscyB3aXRoIHRoZSBzYW1lIGBpZGAuXG4gICAgICAgIG1vZGVsID0gZXhpc3RpbmcgfHwgbW9kZWw7XG4gICAgICAgIGlmIChvcmRlciAmJiAobW9kZWwuaXNOZXcoKSB8fCAhbW9kZWxNYXBbbW9kZWwuaWRdKSkgb3JkZXIucHVzaChtb2RlbCk7XG4gICAgICAgIG1vZGVsTWFwW21vZGVsLmlkXSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSBub25leGlzdGVudCBtb2RlbHMgaWYgYXBwcm9wcmlhdGUuXG4gICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgIGlmICghbW9kZWxNYXBbKG1vZGVsID0gdGhpcy5tb2RlbHNbaV0pLmNpZF0pIHRvUmVtb3ZlLnB1c2gobW9kZWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b1JlbW92ZS5sZW5ndGgpIHRoaXMucmVtb3ZlKHRvUmVtb3ZlLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2VlIGlmIHNvcnRpbmcgaXMgbmVlZGVkLCB1cGRhdGUgYGxlbmd0aGAgYW5kIHNwbGljZSBpbiBuZXcgbW9kZWxzLlxuICAgICAgaWYgKHRvQWRkLmxlbmd0aCB8fCAob3JkZXIgJiYgb3JkZXIubGVuZ3RoKSkge1xuICAgICAgICBpZiAoc29ydGFibGUpIHNvcnQgPSB0cnVlO1xuICAgICAgICB0aGlzLmxlbmd0aCArPSB0b0FkZC5sZW5ndGg7XG4gICAgICAgIGlmIChhdCAhPSBudWxsKSB7XG4gICAgICAgICAgZm9yIChpID0gMCwgbCA9IHRvQWRkLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5tb2RlbHMuc3BsaWNlKGF0ICsgaSwgMCwgdG9BZGRbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAob3JkZXIpIHRoaXMubW9kZWxzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgdmFyIG9yZGVyZWRNb2RlbHMgPSBvcmRlciB8fCB0b0FkZDtcbiAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gb3JkZXJlZE1vZGVscy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWxzLnB1c2gob3JkZXJlZE1vZGVsc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFNpbGVudGx5IHNvcnQgdGhlIGNvbGxlY3Rpb24gaWYgYXBwcm9wcmlhdGUuXG4gICAgICBpZiAoc29ydCkgdGhpcy5zb3J0KHtzaWxlbnQ6IHRydWV9KTtcblxuICAgICAgLy8gVW5sZXNzIHNpbGVuY2VkLCBpdCdzIHRpbWUgdG8gZmlyZSBhbGwgYXBwcm9wcmlhdGUgYWRkL3NvcnQgZXZlbnRzLlxuICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCkge1xuICAgICAgICBmb3IgKGkgPSAwLCBsID0gdG9BZGQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgKG1vZGVsID0gdG9BZGRbaV0pLnRyaWdnZXIoJ2FkZCcsIG1vZGVsLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc29ydCB8fCAob3JkZXIgJiYgb3JkZXIubGVuZ3RoKSkgdGhpcy50cmlnZ2VyKCdzb3J0JywgdGhpcywgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJldHVybiB0aGUgYWRkZWQgKG9yIG1lcmdlZCkgbW9kZWwgKG9yIG1vZGVscykuXG4gICAgICByZXR1cm4gc2luZ3VsYXIgPyBtb2RlbHNbMF0gOiBtb2RlbHM7XG4gICAgfSxcblxuICAgIC8vIFdoZW4geW91IGhhdmUgbW9yZSBpdGVtcyB0aGFuIHlvdSB3YW50IHRvIGFkZCBvciByZW1vdmUgaW5kaXZpZHVhbGx5LFxuICAgIC8vIHlvdSBjYW4gcmVzZXQgdGhlIGVudGlyZSBzZXQgd2l0aCBhIG5ldyBsaXN0IG9mIG1vZGVscywgd2l0aG91dCBmaXJpbmdcbiAgICAvLyBhbnkgZ3JhbnVsYXIgYGFkZGAgb3IgYHJlbW92ZWAgZXZlbnRzLiBGaXJlcyBgcmVzZXRgIHdoZW4gZmluaXNoZWQuXG4gICAgLy8gVXNlZnVsIGZvciBidWxrIG9wZXJhdGlvbnMgYW5kIG9wdGltaXphdGlvbnMuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5tb2RlbHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZVJlZmVyZW5jZSh0aGlzLm1vZGVsc1tpXSwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBvcHRpb25zLnByZXZpb3VzTW9kZWxzID0gdGhpcy5tb2RlbHM7XG4gICAgICB0aGlzLl9yZXNldCgpO1xuICAgICAgbW9kZWxzID0gdGhpcy5hZGQobW9kZWxzLCBfLmV4dGVuZCh7c2lsZW50OiB0cnVlfSwgb3B0aW9ucykpO1xuICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCkgdGhpcy50cmlnZ2VyKCdyZXNldCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIG1vZGVscztcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgbW9kZWwgdG8gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICBwdXNoOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuYWRkKG1vZGVsLCBfLmV4dGVuZCh7YXQ6IHRoaXMubGVuZ3RofSwgb3B0aW9ucykpO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgYSBtb2RlbCBmcm9tIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgcG9wOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzLmF0KHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgICB0aGlzLnJlbW92ZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gbW9kZWw7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIG1vZGVsIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgdW5zaGlmdDogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLmFkZChtb2RlbCwgXy5leHRlbmQoe2F0OiAwfSwgb3B0aW9ucykpO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgYSBtb2RlbCBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgc2hpZnQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuYXQoMCk7XG4gICAgICB0aGlzLnJlbW92ZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gbW9kZWw7XG4gICAgfSxcblxuICAgIC8vIFNsaWNlIG91dCBhIHN1Yi1hcnJheSBvZiBtb2RlbHMgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICBzbGljZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gc2xpY2UuYXBwbHkodGhpcy5tb2RlbHMsIGFyZ3VtZW50cyk7XG4gICAgfSxcblxuICAgIC8vIEdldCBhIG1vZGVsIGZyb20gdGhlIHNldCBieSBpZC5cbiAgICBnZXQ6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gdm9pZCAwO1xuICAgICAgcmV0dXJuIHRoaXMuX2J5SWRbb2JqXSB8fCB0aGlzLl9ieUlkW29iai5pZF0gfHwgdGhpcy5fYnlJZFtvYmouY2lkXTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBtb2RlbCBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgYXQ6IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICByZXR1cm4gdGhpcy5tb2RlbHNbaW5kZXhdO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm4gbW9kZWxzIHdpdGggbWF0Y2hpbmcgYXR0cmlidXRlcy4gVXNlZnVsIGZvciBzaW1wbGUgY2FzZXMgb2ZcbiAgICAvLyBgZmlsdGVyYC5cbiAgICB3aGVyZTogZnVuY3Rpb24oYXR0cnMsIGZpcnN0KSB7XG4gICAgICBpZiAoXy5pc0VtcHR5KGF0dHJzKSkgcmV0dXJuIGZpcnN0ID8gdm9pZCAwIDogW107XG4gICAgICByZXR1cm4gdGhpc1tmaXJzdCA/ICdmaW5kJyA6ICdmaWx0ZXInXShmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgICBpZiAoYXR0cnNba2V5XSAhPT0gbW9kZWwuZ2V0KGtleSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm4gdGhlIGZpcnN0IG1vZGVsIHdpdGggbWF0Y2hpbmcgYXR0cmlidXRlcy4gVXNlZnVsIGZvciBzaW1wbGUgY2FzZXNcbiAgICAvLyBvZiBgZmluZGAuXG4gICAgZmluZFdoZXJlOiBmdW5jdGlvbihhdHRycykge1xuICAgICAgcmV0dXJuIHRoaXMud2hlcmUoYXR0cnMsIHRydWUpO1xuICAgIH0sXG5cbiAgICAvLyBGb3JjZSB0aGUgY29sbGVjdGlvbiB0byByZS1zb3J0IGl0c2VsZi4gWW91IGRvbid0IG5lZWQgdG8gY2FsbCB0aGlzIHVuZGVyXG4gICAgLy8gbm9ybWFsIGNpcmN1bXN0YW5jZXMsIGFzIHRoZSBzZXQgd2lsbCBtYWludGFpbiBzb3J0IG9yZGVyIGFzIGVhY2ggaXRlbVxuICAgIC8vIGlzIGFkZGVkLlxuICAgIHNvcnQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGlmICghdGhpcy5jb21wYXJhdG9yKSB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzb3J0IGEgc2V0IHdpdGhvdXQgYSBjb21wYXJhdG9yJyk7XG4gICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXG4gICAgICAvLyBSdW4gc29ydCBiYXNlZCBvbiB0eXBlIG9mIGBjb21wYXJhdG9yYC5cbiAgICAgIGlmIChfLmlzU3RyaW5nKHRoaXMuY29tcGFyYXRvcikgfHwgdGhpcy5jb21wYXJhdG9yLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB0aGlzLm1vZGVscyA9IHRoaXMuc29ydEJ5KHRoaXMuY29tcGFyYXRvciwgdGhpcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1vZGVscy5zb3J0KF8uYmluZCh0aGlzLmNvbXBhcmF0b3IsIHRoaXMpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCkgdGhpcy50cmlnZ2VyKCdzb3J0JywgdGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gUGx1Y2sgYW4gYXR0cmlidXRlIGZyb20gZWFjaCBtb2RlbCBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICBwbHVjazogZnVuY3Rpb24oYXR0cikge1xuICAgICAgcmV0dXJuIF8uaW52b2tlKHRoaXMubW9kZWxzLCAnZ2V0JywgYXR0cik7XG4gICAgfSxcblxuICAgIC8vIEZldGNoIHRoZSBkZWZhdWx0IHNldCBvZiBtb2RlbHMgZm9yIHRoaXMgY29sbGVjdGlvbiwgcmVzZXR0aW5nIHRoZVxuICAgIC8vIGNvbGxlY3Rpb24gd2hlbiB0aGV5IGFycml2ZS4gSWYgYHJlc2V0OiB0cnVlYCBpcyBwYXNzZWQsIHRoZSByZXNwb25zZVxuICAgIC8vIGRhdGEgd2lsbCBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgYHJlc2V0YCBtZXRob2QgaW5zdGVhZCBvZiBgc2V0YC5cbiAgICBmZXRjaDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICBpZiAob3B0aW9ucy5wYXJzZSA9PT0gdm9pZCAwKSBvcHRpb25zLnBhcnNlID0gdHJ1ZTtcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICB2YXIgbWV0aG9kID0gb3B0aW9ucy5yZXNldCA/ICdyZXNldCcgOiAnc2V0JztcbiAgICAgICAgY29sbGVjdGlvblttZXRob2RdKHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcyhjb2xsZWN0aW9uLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgY29sbGVjdGlvbi50cmlnZ2VyKCdzeW5jJywgY29sbGVjdGlvbiwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgICAgd3JhcEVycm9yKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXMuc3luYygncmVhZCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgIH0sXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgYSBtb2RlbCBpbiB0aGlzIGNvbGxlY3Rpb24uIEFkZCB0aGUgbW9kZWwgdG8gdGhlXG4gICAgLy8gY29sbGVjdGlvbiBpbW1lZGlhdGVseSwgdW5sZXNzIGB3YWl0OiB0cnVlYCBpcyBwYXNzZWQsIGluIHdoaWNoIGNhc2Ugd2VcbiAgICAvLyB3YWl0IGZvciB0aGUgc2VydmVyIHRvIGFncmVlLlxuICAgIGNyZWF0ZTogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgaWYgKCEobW9kZWwgPSB0aGlzLl9wcmVwYXJlTW9kZWwobW9kZWwsIG9wdGlvbnMpKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKCFvcHRpb25zLndhaXQpIHRoaXMuYWRkKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24obW9kZWwsIHJlc3ApIHtcbiAgICAgICAgaWYgKG9wdGlvbnMud2FpdCkgY29sbGVjdGlvbi5hZGQobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcyhtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgICAgbW9kZWwuc2F2ZShudWxsLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBtb2RlbDtcbiAgICB9LFxuXG4gICAgLy8gKipwYXJzZSoqIGNvbnZlcnRzIGEgcmVzcG9uc2UgaW50byBhIGxpc3Qgb2YgbW9kZWxzIHRvIGJlIGFkZGVkIHRvIHRoZVxuICAgIC8vIGNvbGxlY3Rpb24uIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGlzIGp1c3QgdG8gcGFzcyBpdCB0aHJvdWdoLlxuICAgIHBhcnNlOiBmdW5jdGlvbihyZXNwLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gcmVzcDtcbiAgICB9LFxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IGNvbGxlY3Rpb24gd2l0aCBhbiBpZGVudGljYWwgbGlzdCBvZiBtb2RlbHMgYXMgdGhpcyBvbmUuXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMubW9kZWxzKTtcbiAgICB9LFxuXG4gICAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gcmVzZXQgYWxsIGludGVybmFsIHN0YXRlLiBDYWxsZWQgd2hlbiB0aGUgY29sbGVjdGlvblxuICAgIC8vIGlzIGZpcnN0IGluaXRpYWxpemVkIG9yIHJlc2V0LlxuICAgIF9yZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICB0aGlzLm1vZGVscyA9IFtdO1xuICAgICAgdGhpcy5fYnlJZCAgPSB7fTtcbiAgICB9LFxuXG4gICAgLy8gUHJlcGFyZSBhIGhhc2ggb2YgYXR0cmlidXRlcyAob3Igb3RoZXIgbW9kZWwpIHRvIGJlIGFkZGVkIHRvIHRoaXNcbiAgICAvLyBjb2xsZWN0aW9uLlxuICAgIF9wcmVwYXJlTW9kZWw6IGZ1bmN0aW9uKGF0dHJzLCBvcHRpb25zKSB7XG4gICAgICBpZiAoYXR0cnMgaW5zdGFuY2VvZiBNb2RlbCkgcmV0dXJuIGF0dHJzO1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICBvcHRpb25zLmNvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgdmFyIG1vZGVsID0gbmV3IHRoaXMubW9kZWwoYXR0cnMsIG9wdGlvbnMpO1xuICAgICAgaWYgKCFtb2RlbC52YWxpZGF0aW9uRXJyb3IpIHJldHVybiBtb2RlbDtcbiAgICAgIHRoaXMudHJpZ2dlcignaW52YWxpZCcsIHRoaXMsIG1vZGVsLnZhbGlkYXRpb25FcnJvciwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8vIEludGVybmFsIG1ldGhvZCB0byBjcmVhdGUgYSBtb2RlbCdzIHRpZXMgdG8gYSBjb2xsZWN0aW9uLlxuICAgIF9hZGRSZWZlcmVuY2U6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICB0aGlzLl9ieUlkW21vZGVsLmNpZF0gPSBtb2RlbDtcbiAgICAgIGlmIChtb2RlbC5pZCAhPSBudWxsKSB0aGlzLl9ieUlkW21vZGVsLmlkXSA9IG1vZGVsO1xuICAgICAgaWYgKCFtb2RlbC5jb2xsZWN0aW9uKSBtb2RlbC5jb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIG1vZGVsLm9uKCdhbGwnLCB0aGlzLl9vbk1vZGVsRXZlbnQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gc2V2ZXIgYSBtb2RlbCdzIHRpZXMgdG8gYSBjb2xsZWN0aW9uLlxuICAgIF9yZW1vdmVSZWZlcmVuY2U6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICBpZiAodGhpcyA9PT0gbW9kZWwuY29sbGVjdGlvbikgZGVsZXRlIG1vZGVsLmNvbGxlY3Rpb247XG4gICAgICBtb2RlbC5vZmYoJ2FsbCcsIHRoaXMuX29uTW9kZWxFdmVudCwgdGhpcyk7XG4gICAgfSxcblxuICAgIC8vIEludGVybmFsIG1ldGhvZCBjYWxsZWQgZXZlcnkgdGltZSBhIG1vZGVsIGluIHRoZSBzZXQgZmlyZXMgYW4gZXZlbnQuXG4gICAgLy8gU2V0cyBuZWVkIHRvIHVwZGF0ZSB0aGVpciBpbmRleGVzIHdoZW4gbW9kZWxzIGNoYW5nZSBpZHMuIEFsbCBvdGhlclxuICAgIC8vIGV2ZW50cyBzaW1wbHkgcHJveHkgdGhyb3VnaC4gXCJhZGRcIiBhbmQgXCJyZW1vdmVcIiBldmVudHMgdGhhdCBvcmlnaW5hdGVcbiAgICAvLyBpbiBvdGhlciBjb2xsZWN0aW9ucyBhcmUgaWdub3JlZC5cbiAgICBfb25Nb2RlbEV2ZW50OiBmdW5jdGlvbihldmVudCwgbW9kZWwsIGNvbGxlY3Rpb24sIG9wdGlvbnMpIHtcbiAgICAgIGlmICgoZXZlbnQgPT09ICdhZGQnIHx8IGV2ZW50ID09PSAncmVtb3ZlJykgJiYgY29sbGVjdGlvbiAhPT0gdGhpcykgcmV0dXJuO1xuICAgICAgaWYgKGV2ZW50ID09PSAnZGVzdHJveScpIHRoaXMucmVtb3ZlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIGlmIChtb2RlbCAmJiBldmVudCA9PT0gJ2NoYW5nZTonICsgbW9kZWwuaWRBdHRyaWJ1dGUpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2J5SWRbbW9kZWwucHJldmlvdXMobW9kZWwuaWRBdHRyaWJ1dGUpXTtcbiAgICAgICAgaWYgKG1vZGVsLmlkICE9IG51bGwpIHRoaXMuX2J5SWRbbW9kZWwuaWRdID0gbW9kZWw7XG4gICAgICB9XG4gICAgICB0aGlzLnRyaWdnZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgLy8gVW5kZXJzY29yZSBtZXRob2RzIHRoYXQgd2Ugd2FudCB0byBpbXBsZW1lbnQgb24gdGhlIENvbGxlY3Rpb24uXG4gIC8vIDkwJSBvZiB0aGUgY29yZSB1c2VmdWxuZXNzIG9mIEJhY2tib25lIENvbGxlY3Rpb25zIGlzIGFjdHVhbGx5IGltcGxlbWVudGVkXG4gIC8vIHJpZ2h0IGhlcmU6XG4gIHZhciBtZXRob2RzID0gWydmb3JFYWNoJywgJ2VhY2gnLCAnbWFwJywgJ2NvbGxlY3QnLCAncmVkdWNlJywgJ2ZvbGRsJyxcbiAgICAnaW5qZWN0JywgJ3JlZHVjZVJpZ2h0JywgJ2ZvbGRyJywgJ2ZpbmQnLCAnZGV0ZWN0JywgJ2ZpbHRlcicsICdzZWxlY3QnLFxuICAgICdyZWplY3QnLCAnZXZlcnknLCAnYWxsJywgJ3NvbWUnLCAnYW55JywgJ2luY2x1ZGUnLCAnY29udGFpbnMnLCAnaW52b2tlJyxcbiAgICAnbWF4JywgJ21pbicsICd0b0FycmF5JywgJ3NpemUnLCAnZmlyc3QnLCAnaGVhZCcsICd0YWtlJywgJ2luaXRpYWwnLCAncmVzdCcsXG4gICAgJ3RhaWwnLCAnZHJvcCcsICdsYXN0JywgJ3dpdGhvdXQnLCAnZGlmZmVyZW5jZScsICdpbmRleE9mJywgJ3NodWZmbGUnLFxuICAgICdsYXN0SW5kZXhPZicsICdpc0VtcHR5JywgJ2NoYWluJywgJ3NhbXBsZSddO1xuXG4gIC8vIE1peCBpbiBlYWNoIFVuZGVyc2NvcmUgbWV0aG9kIGFzIGEgcHJveHkgdG8gYENvbGxlY3Rpb24jbW9kZWxzYC5cbiAgXy5lYWNoKG1ldGhvZHMsIGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgYXJncy51bnNoaWZ0KHRoaXMubW9kZWxzKTtcbiAgICAgIHJldHVybiBfW21ldGhvZF0uYXBwbHkoXywgYXJncyk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gVW5kZXJzY29yZSBtZXRob2RzIHRoYXQgdGFrZSBhIHByb3BlcnR5IG5hbWUgYXMgYW4gYXJndW1lbnQuXG4gIHZhciBhdHRyaWJ1dGVNZXRob2RzID0gWydncm91cEJ5JywgJ2NvdW50QnknLCAnc29ydEJ5JywgJ2luZGV4QnknXTtcblxuICAvLyBVc2UgYXR0cmlidXRlcyBpbnN0ZWFkIG9mIHByb3BlcnRpZXMuXG4gIF8uZWFjaChhdHRyaWJ1dGVNZXRob2RzLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQpIHtcbiAgICAgIHZhciBpdGVyYXRvciA9IF8uaXNGdW5jdGlvbih2YWx1ZSkgPyB2YWx1ZSA6IGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICAgIHJldHVybiBtb2RlbC5nZXQodmFsdWUpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBfW21ldGhvZF0odGhpcy5tb2RlbHMsIGl0ZXJhdG9yLCBjb250ZXh0KTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBCYWNrYm9uZS5WaWV3XG4gIC8vIC0tLS0tLS0tLS0tLS1cblxuICAvLyBCYWNrYm9uZSBWaWV3cyBhcmUgYWxtb3N0IG1vcmUgY29udmVudGlvbiB0aGFuIHRoZXkgYXJlIGFjdHVhbCBjb2RlLiBBIFZpZXdcbiAgLy8gaXMgc2ltcGx5IGEgSmF2YVNjcmlwdCBvYmplY3QgdGhhdCByZXByZXNlbnRzIGEgbG9naWNhbCBjaHVuayBvZiBVSSBpbiB0aGVcbiAgLy8gRE9NLiBUaGlzIG1pZ2h0IGJlIGEgc2luZ2xlIGl0ZW0sIGFuIGVudGlyZSBsaXN0LCBhIHNpZGViYXIgb3IgcGFuZWwsIG9yXG4gIC8vIGV2ZW4gdGhlIHN1cnJvdW5kaW5nIGZyYW1lIHdoaWNoIHdyYXBzIHlvdXIgd2hvbGUgYXBwLiBEZWZpbmluZyBhIGNodW5rIG9mXG4gIC8vIFVJIGFzIGEgKipWaWV3KiogYWxsb3dzIHlvdSB0byBkZWZpbmUgeW91ciBET00gZXZlbnRzIGRlY2xhcmF0aXZlbHksIHdpdGhvdXRcbiAgLy8gaGF2aW5nIHRvIHdvcnJ5IGFib3V0IHJlbmRlciBvcmRlciAuLi4gYW5kIG1ha2VzIGl0IGVhc3kgZm9yIHRoZSB2aWV3IHRvXG4gIC8vIHJlYWN0IHRvIHNwZWNpZmljIGNoYW5nZXMgaW4gdGhlIHN0YXRlIG9mIHlvdXIgbW9kZWxzLlxuXG4gIC8vIENyZWF0aW5nIGEgQmFja2JvbmUuVmlldyBjcmVhdGVzIGl0cyBpbml0aWFsIGVsZW1lbnQgb3V0c2lkZSBvZiB0aGUgRE9NLFxuICAvLyBpZiBhbiBleGlzdGluZyBlbGVtZW50IGlzIG5vdCBwcm92aWRlZC4uLlxuICB2YXIgVmlldyA9IEJhY2tib25lLlZpZXcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgdGhpcy5jaWQgPSBfLnVuaXF1ZUlkKCd2aWV3Jyk7XG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICBfLmV4dGVuZCh0aGlzLCBfLnBpY2sob3B0aW9ucywgdmlld09wdGlvbnMpKTtcbiAgICB0aGlzLl9lbnN1cmVFbGVtZW50KCk7XG4gICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5kZWxlZ2F0ZUV2ZW50cygpO1xuICB9O1xuXG4gIC8vIENhY2hlZCByZWdleCB0byBzcGxpdCBrZXlzIGZvciBgZGVsZWdhdGVgLlxuICB2YXIgZGVsZWdhdGVFdmVudFNwbGl0dGVyID0gL14oXFxTKylcXHMqKC4qKSQvO1xuXG4gIC8vIExpc3Qgb2YgdmlldyBvcHRpb25zIHRvIGJlIG1lcmdlZCBhcyBwcm9wZXJ0aWVzLlxuICB2YXIgdmlld09wdGlvbnMgPSBbJ21vZGVsJywgJ2NvbGxlY3Rpb24nLCAnZWwnLCAnaWQnLCAnYXR0cmlidXRlcycsICdjbGFzc05hbWUnLCAndGFnTmFtZScsICdldmVudHMnXTtcblxuICAvLyBTZXQgdXAgYWxsIGluaGVyaXRhYmxlICoqQmFja2JvbmUuVmlldyoqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG4gIF8uZXh0ZW5kKFZpZXcucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIFRoZSBkZWZhdWx0IGB0YWdOYW1lYCBvZiBhIFZpZXcncyBlbGVtZW50IGlzIGBcImRpdlwiYC5cbiAgICB0YWdOYW1lOiAnZGl2JyxcblxuICAgIC8vIGpRdWVyeSBkZWxlZ2F0ZSBmb3IgZWxlbWVudCBsb29rdXAsIHNjb3BlZCB0byBET00gZWxlbWVudHMgd2l0aGluIHRoZVxuICAgIC8vIGN1cnJlbnQgdmlldy4gVGhpcyBzaG91bGQgYmUgcHJlZmVycmVkIHRvIGdsb2JhbCBsb29rdXBzIHdoZXJlIHBvc3NpYmxlLlxuICAgICQ6IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gdGhpcy4kZWwuZmluZChzZWxlY3Rvcik7XG4gICAgfSxcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vICoqcmVuZGVyKiogaXMgdGhlIGNvcmUgZnVuY3Rpb24gdGhhdCB5b3VyIHZpZXcgc2hvdWxkIG92ZXJyaWRlLCBpbiBvcmRlclxuICAgIC8vIHRvIHBvcHVsYXRlIGl0cyBlbGVtZW50IChgdGhpcy5lbGApLCB3aXRoIHRoZSBhcHByb3ByaWF0ZSBIVE1MLiBUaGVcbiAgICAvLyBjb252ZW50aW9uIGlzIGZvciAqKnJlbmRlcioqIHRvIGFsd2F5cyByZXR1cm4gYHRoaXNgLlxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIHRoaXMgdmlldyBieSB0YWtpbmcgdGhlIGVsZW1lbnQgb3V0IG9mIHRoZSBET00sIGFuZCByZW1vdmluZyBhbnlcbiAgICAvLyBhcHBsaWNhYmxlIEJhY2tib25lLkV2ZW50cyBsaXN0ZW5lcnMuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuJGVsLnJlbW92ZSgpO1xuICAgICAgdGhpcy5zdG9wTGlzdGVuaW5nKCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3J3MgZWxlbWVudCAoYHRoaXMuZWxgIHByb3BlcnR5KSwgaW5jbHVkaW5nIGV2ZW50XG4gICAgLy8gcmUtZGVsZWdhdGlvbi5cbiAgICBzZXRFbGVtZW50OiBmdW5jdGlvbihlbGVtZW50LCBkZWxlZ2F0ZSkge1xuICAgICAgaWYgKHRoaXMuJGVsKSB0aGlzLnVuZGVsZWdhdGVFdmVudHMoKTtcbiAgICAgIHRoaXMuJGVsID0gZWxlbWVudCBpbnN0YW5jZW9mIEJhY2tib25lLiQgPyBlbGVtZW50IDogQmFja2JvbmUuJChlbGVtZW50KTtcbiAgICAgIHRoaXMuZWwgPSB0aGlzLiRlbFswXTtcbiAgICAgIGlmIChkZWxlZ2F0ZSAhPT0gZmFsc2UpIHRoaXMuZGVsZWdhdGVFdmVudHMoKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBTZXQgY2FsbGJhY2tzLCB3aGVyZSBgdGhpcy5ldmVudHNgIGlzIGEgaGFzaCBvZlxuICAgIC8vXG4gICAgLy8gKntcImV2ZW50IHNlbGVjdG9yXCI6IFwiY2FsbGJhY2tcIn0qXG4gICAgLy9cbiAgICAvLyAgICAge1xuICAgIC8vICAgICAgICdtb3VzZWRvd24gLnRpdGxlJzogICdlZGl0JyxcbiAgICAvLyAgICAgICAnY2xpY2sgLmJ1dHRvbic6ICAgICAnc2F2ZScsXG4gICAgLy8gICAgICAgJ2NsaWNrIC5vcGVuJzogICAgICAgZnVuY3Rpb24oZSkgeyAuLi4gfVxuICAgIC8vICAgICB9XG4gICAgLy9cbiAgICAvLyBwYWlycy4gQ2FsbGJhY2tzIHdpbGwgYmUgYm91bmQgdG8gdGhlIHZpZXcsIHdpdGggYHRoaXNgIHNldCBwcm9wZXJseS5cbiAgICAvLyBVc2VzIGV2ZW50IGRlbGVnYXRpb24gZm9yIGVmZmljaWVuY3kuXG4gICAgLy8gT21pdHRpbmcgdGhlIHNlbGVjdG9yIGJpbmRzIHRoZSBldmVudCB0byBgdGhpcy5lbGAuXG4gICAgLy8gVGhpcyBvbmx5IHdvcmtzIGZvciBkZWxlZ2F0ZS1hYmxlIGV2ZW50czogbm90IGBmb2N1c2AsIGBibHVyYCwgYW5kXG4gICAgLy8gbm90IGBjaGFuZ2VgLCBgc3VibWl0YCwgYW5kIGByZXNldGAgaW4gSW50ZXJuZXQgRXhwbG9yZXIuXG4gICAgZGVsZWdhdGVFdmVudHM6IGZ1bmN0aW9uKGV2ZW50cykge1xuICAgICAgaWYgKCEoZXZlbnRzIHx8IChldmVudHMgPSBfLnJlc3VsdCh0aGlzLCAnZXZlbnRzJykpKSkgcmV0dXJuIHRoaXM7XG4gICAgICB0aGlzLnVuZGVsZWdhdGVFdmVudHMoKTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBldmVudHMpIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9IGV2ZW50c1trZXldO1xuICAgICAgICBpZiAoIV8uaXNGdW5jdGlvbihtZXRob2QpKSBtZXRob2QgPSB0aGlzW2V2ZW50c1trZXldXTtcbiAgICAgICAgaWYgKCFtZXRob2QpIGNvbnRpbnVlO1xuXG4gICAgICAgIHZhciBtYXRjaCA9IGtleS5tYXRjaChkZWxlZ2F0ZUV2ZW50U3BsaXR0ZXIpO1xuICAgICAgICB2YXIgZXZlbnROYW1lID0gbWF0Y2hbMV0sIHNlbGVjdG9yID0gbWF0Y2hbMl07XG4gICAgICAgIG1ldGhvZCA9IF8uYmluZChtZXRob2QsIHRoaXMpO1xuICAgICAgICBldmVudE5hbWUgKz0gJy5kZWxlZ2F0ZUV2ZW50cycgKyB0aGlzLmNpZDtcbiAgICAgICAgaWYgKHNlbGVjdG9yID09PSAnJykge1xuICAgICAgICAgIHRoaXMuJGVsLm9uKGV2ZW50TmFtZSwgbWV0aG9kKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLiRlbC5vbihldmVudE5hbWUsIHNlbGVjdG9yLCBtZXRob2QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQ2xlYXJzIGFsbCBjYWxsYmFja3MgcHJldmlvdXNseSBib3VuZCB0byB0aGUgdmlldyB3aXRoIGBkZWxlZ2F0ZUV2ZW50c2AuXG4gICAgLy8gWW91IHVzdWFsbHkgZG9uJ3QgbmVlZCB0byB1c2UgdGhpcywgYnV0IG1heSB3aXNoIHRvIGlmIHlvdSBoYXZlIG11bHRpcGxlXG4gICAgLy8gQmFja2JvbmUgdmlld3MgYXR0YWNoZWQgdG8gdGhlIHNhbWUgRE9NIGVsZW1lbnQuXG4gICAgdW5kZWxlZ2F0ZUV2ZW50czogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLiRlbC5vZmYoJy5kZWxlZ2F0ZUV2ZW50cycgKyB0aGlzLmNpZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlIFZpZXcgaGFzIGEgRE9NIGVsZW1lbnQgdG8gcmVuZGVyIGludG8uXG4gICAgLy8gSWYgYHRoaXMuZWxgIGlzIGEgc3RyaW5nLCBwYXNzIGl0IHRocm91Z2ggYCQoKWAsIHRha2UgdGhlIGZpcnN0XG4gICAgLy8gbWF0Y2hpbmcgZWxlbWVudCwgYW5kIHJlLWFzc2lnbiBpdCB0byBgZWxgLiBPdGhlcndpc2UsIGNyZWF0ZVxuICAgIC8vIGFuIGVsZW1lbnQgZnJvbSB0aGUgYGlkYCwgYGNsYXNzTmFtZWAgYW5kIGB0YWdOYW1lYCBwcm9wZXJ0aWVzLlxuICAgIF9lbnN1cmVFbGVtZW50OiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5lbCkge1xuICAgICAgICB2YXIgYXR0cnMgPSBfLmV4dGVuZCh7fSwgXy5yZXN1bHQodGhpcywgJ2F0dHJpYnV0ZXMnKSk7XG4gICAgICAgIGlmICh0aGlzLmlkKSBhdHRycy5pZCA9IF8ucmVzdWx0KHRoaXMsICdpZCcpO1xuICAgICAgICBpZiAodGhpcy5jbGFzc05hbWUpIGF0dHJzWydjbGFzcyddID0gXy5yZXN1bHQodGhpcywgJ2NsYXNzTmFtZScpO1xuICAgICAgICB2YXIgJGVsID0gQmFja2JvbmUuJCgnPCcgKyBfLnJlc3VsdCh0aGlzLCAndGFnTmFtZScpICsgJz4nKS5hdHRyKGF0dHJzKTtcbiAgICAgICAgdGhpcy5zZXRFbGVtZW50KCRlbCwgZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRFbGVtZW50KF8ucmVzdWx0KHRoaXMsICdlbCcpLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIEJhY2tib25lLnN5bmNcbiAgLy8gLS0tLS0tLS0tLS0tLVxuXG4gIC8vIE92ZXJyaWRlIHRoaXMgZnVuY3Rpb24gdG8gY2hhbmdlIHRoZSBtYW5uZXIgaW4gd2hpY2ggQmFja2JvbmUgcGVyc2lzdHNcbiAgLy8gbW9kZWxzIHRvIHRoZSBzZXJ2ZXIuIFlvdSB3aWxsIGJlIHBhc3NlZCB0aGUgdHlwZSBvZiByZXF1ZXN0LCBhbmQgdGhlXG4gIC8vIG1vZGVsIGluIHF1ZXN0aW9uLiBCeSBkZWZhdWx0LCBtYWtlcyBhIFJFU1RmdWwgQWpheCByZXF1ZXN0XG4gIC8vIHRvIHRoZSBtb2RlbCdzIGB1cmwoKWAuIFNvbWUgcG9zc2libGUgY3VzdG9taXphdGlvbnMgY291bGQgYmU6XG4gIC8vXG4gIC8vICogVXNlIGBzZXRUaW1lb3V0YCB0byBiYXRjaCByYXBpZC1maXJlIHVwZGF0ZXMgaW50byBhIHNpbmdsZSByZXF1ZXN0LlxuICAvLyAqIFNlbmQgdXAgdGhlIG1vZGVscyBhcyBYTUwgaW5zdGVhZCBvZiBKU09OLlxuICAvLyAqIFBlcnNpc3QgbW9kZWxzIHZpYSBXZWJTb2NrZXRzIGluc3RlYWQgb2YgQWpheC5cbiAgLy9cbiAgLy8gVHVybiBvbiBgQmFja2JvbmUuZW11bGF0ZUhUVFBgIGluIG9yZGVyIHRvIHNlbmQgYFBVVGAgYW5kIGBERUxFVEVgIHJlcXVlc3RzXG4gIC8vIGFzIGBQT1NUYCwgd2l0aCBhIGBfbWV0aG9kYCBwYXJhbWV0ZXIgY29udGFpbmluZyB0aGUgdHJ1ZSBIVFRQIG1ldGhvZCxcbiAgLy8gYXMgd2VsbCBhcyBhbGwgcmVxdWVzdHMgd2l0aCB0aGUgYm9keSBhcyBgYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkYFxuICAvLyBpbnN0ZWFkIG9mIGBhcHBsaWNhdGlvbi9qc29uYCB3aXRoIHRoZSBtb2RlbCBpbiBhIHBhcmFtIG5hbWVkIGBtb2RlbGAuXG4gIC8vIFVzZWZ1bCB3aGVuIGludGVyZmFjaW5nIHdpdGggc2VydmVyLXNpZGUgbGFuZ3VhZ2VzIGxpa2UgKipQSFAqKiB0aGF0IG1ha2VcbiAgLy8gaXQgZGlmZmljdWx0IHRvIHJlYWQgdGhlIGJvZHkgb2YgYFBVVGAgcmVxdWVzdHMuXG4gIEJhY2tib25lLnN5bmMgPSBmdW5jdGlvbihtZXRob2QsIG1vZGVsLCBvcHRpb25zKSB7XG4gICAgdmFyIHR5cGUgPSBtZXRob2RNYXBbbWV0aG9kXTtcblxuICAgIC8vIERlZmF1bHQgb3B0aW9ucywgdW5sZXNzIHNwZWNpZmllZC5cbiAgICBfLmRlZmF1bHRzKG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSksIHtcbiAgICAgIGVtdWxhdGVIVFRQOiBCYWNrYm9uZS5lbXVsYXRlSFRUUCxcbiAgICAgIGVtdWxhdGVKU09OOiBCYWNrYm9uZS5lbXVsYXRlSlNPTlxuICAgIH0pO1xuXG4gICAgLy8gRGVmYXVsdCBKU09OLXJlcXVlc3Qgb3B0aW9ucy5cbiAgICB2YXIgcGFyYW1zID0ge3R5cGU6IHR5cGUsIGRhdGFUeXBlOiAnanNvbid9O1xuXG4gICAgLy8gRW5zdXJlIHRoYXQgd2UgaGF2ZSBhIFVSTC5cbiAgICBpZiAoIW9wdGlvbnMudXJsKSB7XG4gICAgICBwYXJhbXMudXJsID0gXy5yZXN1bHQobW9kZWwsICd1cmwnKSB8fCB1cmxFcnJvcigpO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSB0aGF0IHdlIGhhdmUgdGhlIGFwcHJvcHJpYXRlIHJlcXVlc3QgZGF0YS5cbiAgICBpZiAob3B0aW9ucy5kYXRhID09IG51bGwgJiYgbW9kZWwgJiYgKG1ldGhvZCA9PT0gJ2NyZWF0ZScgfHwgbWV0aG9kID09PSAndXBkYXRlJyB8fCBtZXRob2QgPT09ICdwYXRjaCcpKSB7XG4gICAgICBwYXJhbXMuY29udGVudFR5cGUgPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICBwYXJhbXMuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuYXR0cnMgfHwgbW9kZWwudG9KU09OKG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICAvLyBGb3Igb2xkZXIgc2VydmVycywgZW11bGF0ZSBKU09OIGJ5IGVuY29kaW5nIHRoZSByZXF1ZXN0IGludG8gYW4gSFRNTC1mb3JtLlxuICAgIGlmIChvcHRpb25zLmVtdWxhdGVKU09OKSB7XG4gICAgICBwYXJhbXMuY29udGVudFR5cGUgPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJztcbiAgICAgIHBhcmFtcy5kYXRhID0gcGFyYW1zLmRhdGEgPyB7bW9kZWw6IHBhcmFtcy5kYXRhfSA6IHt9O1xuICAgIH1cblxuICAgIC8vIEZvciBvbGRlciBzZXJ2ZXJzLCBlbXVsYXRlIEhUVFAgYnkgbWltaWNraW5nIHRoZSBIVFRQIG1ldGhvZCB3aXRoIGBfbWV0aG9kYFxuICAgIC8vIEFuZCBhbiBgWC1IVFRQLU1ldGhvZC1PdmVycmlkZWAgaGVhZGVyLlxuICAgIGlmIChvcHRpb25zLmVtdWxhdGVIVFRQICYmICh0eXBlID09PSAnUFVUJyB8fCB0eXBlID09PSAnREVMRVRFJyB8fCB0eXBlID09PSAnUEFUQ0gnKSkge1xuICAgICAgcGFyYW1zLnR5cGUgPSAnUE9TVCc7XG4gICAgICBpZiAob3B0aW9ucy5lbXVsYXRlSlNPTikgcGFyYW1zLmRhdGEuX21ldGhvZCA9IHR5cGU7XG4gICAgICB2YXIgYmVmb3JlU2VuZCA9IG9wdGlvbnMuYmVmb3JlU2VuZDtcbiAgICAgIG9wdGlvbnMuYmVmb3JlU2VuZCA9IGZ1bmN0aW9uKHhocikge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1IVFRQLU1ldGhvZC1PdmVycmlkZScsIHR5cGUpO1xuICAgICAgICBpZiAoYmVmb3JlU2VuZCkgcmV0dXJuIGJlZm9yZVNlbmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgcHJvY2VzcyBkYXRhIG9uIGEgbm9uLUdFVCByZXF1ZXN0LlxuICAgIGlmIChwYXJhbXMudHlwZSAhPT0gJ0dFVCcgJiYgIW9wdGlvbnMuZW11bGF0ZUpTT04pIHtcbiAgICAgIHBhcmFtcy5wcm9jZXNzRGF0YSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIElmIHdlJ3JlIHNlbmRpbmcgYSBgUEFUQ0hgIHJlcXVlc3QsIGFuZCB3ZSdyZSBpbiBhbiBvbGQgSW50ZXJuZXQgRXhwbG9yZXJcbiAgICAvLyB0aGF0IHN0aWxsIGhhcyBBY3RpdmVYIGVuYWJsZWQgYnkgZGVmYXVsdCwgb3ZlcnJpZGUgalF1ZXJ5IHRvIHVzZSB0aGF0XG4gICAgLy8gZm9yIFhIUiBpbnN0ZWFkLiBSZW1vdmUgdGhpcyBsaW5lIHdoZW4galF1ZXJ5IHN1cHBvcnRzIGBQQVRDSGAgb24gSUU4LlxuICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ1BBVENIJyAmJiBub1hoclBhdGNoKSB7XG4gICAgICBwYXJhbXMueGhyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBNYWtlIHRoZSByZXF1ZXN0LCBhbGxvd2luZyB0aGUgdXNlciB0byBvdmVycmlkZSBhbnkgQWpheCBvcHRpb25zLlxuICAgIHZhciB4aHIgPSBvcHRpb25zLnhociA9IEJhY2tib25lLmFqYXgoXy5leHRlbmQocGFyYW1zLCBvcHRpb25zKSk7XG4gICAgbW9kZWwudHJpZ2dlcigncmVxdWVzdCcsIG1vZGVsLCB4aHIsIG9wdGlvbnMpO1xuICAgIHJldHVybiB4aHI7XG4gIH07XG5cbiAgdmFyIG5vWGhyUGF0Y2ggPVxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICEhd2luZG93LkFjdGl2ZVhPYmplY3QgJiZcbiAgICAgICEod2luZG93LlhNTEh0dHBSZXF1ZXN0ICYmIChuZXcgWE1MSHR0cFJlcXVlc3QpLmRpc3BhdGNoRXZlbnQpO1xuXG4gIC8vIE1hcCBmcm9tIENSVUQgdG8gSFRUUCBmb3Igb3VyIGRlZmF1bHQgYEJhY2tib25lLnN5bmNgIGltcGxlbWVudGF0aW9uLlxuICB2YXIgbWV0aG9kTWFwID0ge1xuICAgICdjcmVhdGUnOiAnUE9TVCcsXG4gICAgJ3VwZGF0ZSc6ICdQVVQnLFxuICAgICdwYXRjaCc6ICAnUEFUQ0gnLFxuICAgICdkZWxldGUnOiAnREVMRVRFJyxcbiAgICAncmVhZCc6ICAgJ0dFVCdcbiAgfTtcblxuICAvLyBTZXQgdGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgYEJhY2tib25lLmFqYXhgIHRvIHByb3h5IHRocm91Z2ggdG8gYCRgLlxuICAvLyBPdmVycmlkZSB0aGlzIGlmIHlvdSdkIGxpa2UgdG8gdXNlIGEgZGlmZmVyZW50IGxpYnJhcnkuXG4gIEJhY2tib25lLmFqYXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuJC5hamF4LmFwcGx5KEJhY2tib25lLiQsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQmFja2JvbmUuUm91dGVyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFJvdXRlcnMgbWFwIGZhdXgtVVJMcyB0byBhY3Rpb25zLCBhbmQgZmlyZSBldmVudHMgd2hlbiByb3V0ZXMgYXJlXG4gIC8vIG1hdGNoZWQuIENyZWF0aW5nIGEgbmV3IG9uZSBzZXRzIGl0cyBgcm91dGVzYCBoYXNoLCBpZiBub3Qgc2V0IHN0YXRpY2FsbHkuXG4gIHZhciBSb3V0ZXIgPSBCYWNrYm9uZS5Sb3V0ZXIgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICBpZiAob3B0aW9ucy5yb3V0ZXMpIHRoaXMucm91dGVzID0gb3B0aW9ucy5yb3V0ZXM7XG4gICAgdGhpcy5fYmluZFJvdXRlcygpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIENhY2hlZCByZWd1bGFyIGV4cHJlc3Npb25zIGZvciBtYXRjaGluZyBuYW1lZCBwYXJhbSBwYXJ0cyBhbmQgc3BsYXR0ZWRcbiAgLy8gcGFydHMgb2Ygcm91dGUgc3RyaW5ncy5cbiAgdmFyIG9wdGlvbmFsUGFyYW0gPSAvXFwoKC4qPylcXCkvZztcbiAgdmFyIG5hbWVkUGFyYW0gICAgPSAvKFxcKFxcPyk/OlxcdysvZztcbiAgdmFyIHNwbGF0UGFyYW0gICAgPSAvXFwqXFx3Ky9nO1xuICB2YXIgZXNjYXBlUmVnRXhwICA9IC9bXFwte31cXFtcXF0rPy4sXFxcXFxcXiR8I1xcc10vZztcblxuICAvLyBTZXQgdXAgYWxsIGluaGVyaXRhYmxlICoqQmFja2JvbmUuUm91dGVyKiogcHJvcGVydGllcyBhbmQgbWV0aG9kcy5cbiAgXy5leHRlbmQoUm91dGVyLnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBJbml0aWFsaXplIGlzIGFuIGVtcHR5IGZ1bmN0aW9uIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGl0IHdpdGggeW91ciBvd25cbiAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpe30sXG5cbiAgICAvLyBNYW51YWxseSBiaW5kIGEgc2luZ2xlIG5hbWVkIHJvdXRlIHRvIGEgY2FsbGJhY2suIEZvciBleGFtcGxlOlxuICAgIC8vXG4gICAgLy8gICAgIHRoaXMucm91dGUoJ3NlYXJjaC86cXVlcnkvcDpudW0nLCAnc2VhcmNoJywgZnVuY3Rpb24ocXVlcnksIG51bSkge1xuICAgIC8vICAgICAgIC4uLlxuICAgIC8vICAgICB9KTtcbiAgICAvL1xuICAgIHJvdXRlOiBmdW5jdGlvbihyb3V0ZSwgbmFtZSwgY2FsbGJhY2spIHtcbiAgICAgIGlmICghXy5pc1JlZ0V4cChyb3V0ZSkpIHJvdXRlID0gdGhpcy5fcm91dGVUb1JlZ0V4cChyb3V0ZSk7XG4gICAgICBpZiAoXy5pc0Z1bmN0aW9uKG5hbWUpKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmFtZTtcbiAgICAgICAgbmFtZSA9ICcnO1xuICAgICAgfVxuICAgICAgaWYgKCFjYWxsYmFjaykgY2FsbGJhY2sgPSB0aGlzW25hbWVdO1xuICAgICAgdmFyIHJvdXRlciA9IHRoaXM7XG4gICAgICBCYWNrYm9uZS5oaXN0b3J5LnJvdXRlKHJvdXRlLCBmdW5jdGlvbihmcmFnbWVudCkge1xuICAgICAgICB2YXIgYXJncyA9IHJvdXRlci5fZXh0cmFjdFBhcmFtZXRlcnMocm91dGUsIGZyYWdtZW50KTtcbiAgICAgICAgcm91dGVyLmV4ZWN1dGUoY2FsbGJhY2ssIGFyZ3MpO1xuICAgICAgICByb3V0ZXIudHJpZ2dlci5hcHBseShyb3V0ZXIsIFsncm91dGU6JyArIG5hbWVdLmNvbmNhdChhcmdzKSk7XG4gICAgICAgIHJvdXRlci50cmlnZ2VyKCdyb3V0ZScsIG5hbWUsIGFyZ3MpO1xuICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LnRyaWdnZXIoJ3JvdXRlJywgcm91dGVyLCBuYW1lLCBhcmdzKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEV4ZWN1dGUgYSByb3V0ZSBoYW5kbGVyIHdpdGggdGhlIHByb3ZpZGVkIHBhcmFtZXRlcnMuICBUaGlzIGlzIGFuXG4gICAgLy8gZXhjZWxsZW50IHBsYWNlIHRvIGRvIHByZS1yb3V0ZSBzZXR1cCBvciBwb3N0LXJvdXRlIGNsZWFudXAuXG4gICAgZXhlY3V0ZTogZnVuY3Rpb24oY2FsbGJhY2ssIGFyZ3MpIHtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7XG4gICAgfSxcblxuICAgIC8vIFNpbXBsZSBwcm94eSB0byBgQmFja2JvbmUuaGlzdG9yeWAgdG8gc2F2ZSBhIGZyYWdtZW50IGludG8gdGhlIGhpc3RvcnkuXG4gICAgbmF2aWdhdGU6IGZ1bmN0aW9uKGZyYWdtZW50LCBvcHRpb25zKSB7XG4gICAgICBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKGZyYWdtZW50LCBvcHRpb25zKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBCaW5kIGFsbCBkZWZpbmVkIHJvdXRlcyB0byBgQmFja2JvbmUuaGlzdG9yeWAuIFdlIGhhdmUgdG8gcmV2ZXJzZSB0aGVcbiAgICAvLyBvcmRlciBvZiB0aGUgcm91dGVzIGhlcmUgdG8gc3VwcG9ydCBiZWhhdmlvciB3aGVyZSB0aGUgbW9zdCBnZW5lcmFsXG4gICAgLy8gcm91dGVzIGNhbiBiZSBkZWZpbmVkIGF0IHRoZSBib3R0b20gb2YgdGhlIHJvdXRlIG1hcC5cbiAgICBfYmluZFJvdXRlczogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMucm91dGVzKSByZXR1cm47XG4gICAgICB0aGlzLnJvdXRlcyA9IF8ucmVzdWx0KHRoaXMsICdyb3V0ZXMnKTtcbiAgICAgIHZhciByb3V0ZSwgcm91dGVzID0gXy5rZXlzKHRoaXMucm91dGVzKTtcbiAgICAgIHdoaWxlICgocm91dGUgPSByb3V0ZXMucG9wKCkpICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5yb3V0ZShyb3V0ZSwgdGhpcy5yb3V0ZXNbcm91dGVdKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gQ29udmVydCBhIHJvdXRlIHN0cmluZyBpbnRvIGEgcmVndWxhciBleHByZXNzaW9uLCBzdWl0YWJsZSBmb3IgbWF0Y2hpbmdcbiAgICAvLyBhZ2FpbnN0IHRoZSBjdXJyZW50IGxvY2F0aW9uIGhhc2guXG4gICAgX3JvdXRlVG9SZWdFeHA6IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgICByb3V0ZSA9IHJvdXRlLnJlcGxhY2UoZXNjYXBlUmVnRXhwLCAnXFxcXCQmJylcbiAgICAgICAgICAgICAgICAgICAucmVwbGFjZShvcHRpb25hbFBhcmFtLCAnKD86JDEpPycpXG4gICAgICAgICAgICAgICAgICAgLnJlcGxhY2UobmFtZWRQYXJhbSwgZnVuY3Rpb24obWF0Y2gsIG9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9uYWwgPyBtYXRjaCA6ICcoW14vP10rKSc7XG4gICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAucmVwbGFjZShzcGxhdFBhcmFtLCAnKFteP10qPyknKTtcbiAgICAgIHJldHVybiBuZXcgUmVnRXhwKCdeJyArIHJvdXRlICsgJyg/OlxcXFw/KFtcXFxcc1xcXFxTXSopKT8kJyk7XG4gICAgfSxcblxuICAgIC8vIEdpdmVuIGEgcm91dGUsIGFuZCBhIFVSTCBmcmFnbWVudCB0aGF0IGl0IG1hdGNoZXMsIHJldHVybiB0aGUgYXJyYXkgb2ZcbiAgICAvLyBleHRyYWN0ZWQgZGVjb2RlZCBwYXJhbWV0ZXJzLiBFbXB0eSBvciB1bm1hdGNoZWQgcGFyYW1ldGVycyB3aWxsIGJlXG4gICAgLy8gdHJlYXRlZCBhcyBgbnVsbGAgdG8gbm9ybWFsaXplIGNyb3NzLWJyb3dzZXIgYmVoYXZpb3IuXG4gICAgX2V4dHJhY3RQYXJhbWV0ZXJzOiBmdW5jdGlvbihyb3V0ZSwgZnJhZ21lbnQpIHtcbiAgICAgIHZhciBwYXJhbXMgPSByb3V0ZS5leGVjKGZyYWdtZW50KS5zbGljZSgxKTtcbiAgICAgIHJldHVybiBfLm1hcChwYXJhbXMsIGZ1bmN0aW9uKHBhcmFtLCBpKSB7XG4gICAgICAgIC8vIERvbid0IGRlY29kZSB0aGUgc2VhcmNoIHBhcmFtcy5cbiAgICAgICAgaWYgKGkgPT09IHBhcmFtcy5sZW5ndGggLSAxKSByZXR1cm4gcGFyYW0gfHwgbnVsbDtcbiAgICAgICAgcmV0dXJuIHBhcmFtID8gZGVjb2RlVVJJQ29tcG9uZW50KHBhcmFtKSA6IG51bGw7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgLy8gQmFja2JvbmUuSGlzdG9yeVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gSGFuZGxlcyBjcm9zcy1icm93c2VyIGhpc3RvcnkgbWFuYWdlbWVudCwgYmFzZWQgb24gZWl0aGVyXG4gIC8vIFtwdXNoU3RhdGVdKGh0dHA6Ly9kaXZlaW50b2h0bWw1LmluZm8vaGlzdG9yeS5odG1sKSBhbmQgcmVhbCBVUkxzLCBvclxuICAvLyBbb25oYXNoY2hhbmdlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS93aW5kb3cub25oYXNoY2hhbmdlKVxuICAvLyBhbmQgVVJMIGZyYWdtZW50cy4gSWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgbmVpdGhlciAob2xkIElFLCBuYXRjaCksXG4gIC8vIGZhbGxzIGJhY2sgdG8gcG9sbGluZy5cbiAgdmFyIEhpc3RvcnkgPSBCYWNrYm9uZS5IaXN0b3J5ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5oYW5kbGVycyA9IFtdO1xuICAgIF8uYmluZEFsbCh0aGlzLCAnY2hlY2tVcmwnKTtcblxuICAgIC8vIEVuc3VyZSB0aGF0IGBIaXN0b3J5YCBjYW4gYmUgdXNlZCBvdXRzaWRlIG9mIHRoZSBicm93c2VyLlxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcbiAgICAgIHRoaXMuaGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xuICAgIH1cbiAgfTtcblxuICAvLyBDYWNoZWQgcmVnZXggZm9yIHN0cmlwcGluZyBhIGxlYWRpbmcgaGFzaC9zbGFzaCBhbmQgdHJhaWxpbmcgc3BhY2UuXG4gIHZhciByb3V0ZVN0cmlwcGVyID0gL15bI1xcL118XFxzKyQvZztcblxuICAvLyBDYWNoZWQgcmVnZXggZm9yIHN0cmlwcGluZyBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzLlxuICB2YXIgcm9vdFN0cmlwcGVyID0gL15cXC8rfFxcLyskL2c7XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciBkZXRlY3RpbmcgTVNJRS5cbiAgdmFyIGlzRXhwbG9yZXIgPSAvbXNpZSBbXFx3Ll0rLztcblxuICAvLyBDYWNoZWQgcmVnZXggZm9yIHJlbW92aW5nIGEgdHJhaWxpbmcgc2xhc2guXG4gIHZhciB0cmFpbGluZ1NsYXNoID0gL1xcLyQvO1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3Igc3RyaXBwaW5nIHVybHMgb2YgaGFzaC5cbiAgdmFyIHBhdGhTdHJpcHBlciA9IC8jLiokLztcblxuICAvLyBIYXMgdGhlIGhpc3RvcnkgaGFuZGxpbmcgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQ/XG4gIEhpc3Rvcnkuc3RhcnRlZCA9IGZhbHNlO1xuXG4gIC8vIFNldCB1cCBhbGwgaW5oZXJpdGFibGUgKipCYWNrYm9uZS5IaXN0b3J5KiogcHJvcGVydGllcyBhbmQgbWV0aG9kcy5cbiAgXy5leHRlbmQoSGlzdG9yeS5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gVGhlIGRlZmF1bHQgaW50ZXJ2YWwgdG8gcG9sbCBmb3IgaGFzaCBjaGFuZ2VzLCBpZiBuZWNlc3NhcnksIGlzXG4gICAgLy8gdHdlbnR5IHRpbWVzIGEgc2Vjb25kLlxuICAgIGludGVydmFsOiA1MCxcblxuICAgIC8vIEFyZSB3ZSBhdCB0aGUgYXBwIHJvb3Q/XG4gICAgYXRSb290OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1teXFwvXSQvLCAnJCYvJykgPT09IHRoaXMucm9vdDtcbiAgICB9LFxuXG4gICAgLy8gR2V0cyB0aGUgdHJ1ZSBoYXNoIHZhbHVlLiBDYW5ub3QgdXNlIGxvY2F0aW9uLmhhc2ggZGlyZWN0bHkgZHVlIHRvIGJ1Z1xuICAgIC8vIGluIEZpcmVmb3ggd2hlcmUgbG9jYXRpb24uaGFzaCB3aWxsIGFsd2F5cyBiZSBkZWNvZGVkLlxuICAgIGdldEhhc2g6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgICAgdmFyIG1hdGNoID0gKHdpbmRvdyB8fCB0aGlzKS5sb2NhdGlvbi5ocmVmLm1hdGNoKC8jKC4qKSQvKTtcbiAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogJyc7XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgY3Jvc3MtYnJvd3NlciBub3JtYWxpemVkIFVSTCBmcmFnbWVudCwgZWl0aGVyIGZyb20gdGhlIFVSTCxcbiAgICAvLyB0aGUgaGFzaCwgb3IgdGhlIG92ZXJyaWRlLlxuICAgIGdldEZyYWdtZW50OiBmdW5jdGlvbihmcmFnbWVudCwgZm9yY2VQdXNoU3RhdGUpIHtcbiAgICAgIGlmIChmcmFnbWVudCA9PSBudWxsKSB7XG4gICAgICAgIGlmICh0aGlzLl9oYXNQdXNoU3RhdGUgfHwgIXRoaXMuX3dhbnRzSGFzaENoYW5nZSB8fCBmb3JjZVB1c2hTdGF0ZSkge1xuICAgICAgICAgIGZyYWdtZW50ID0gZGVjb2RlVVJJKHRoaXMubG9jYXRpb24ucGF0aG5hbWUgKyB0aGlzLmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgICAgICAgdmFyIHJvb3QgPSB0aGlzLnJvb3QucmVwbGFjZSh0cmFpbGluZ1NsYXNoLCAnJyk7XG4gICAgICAgICAgaWYgKCFmcmFnbWVudC5pbmRleE9mKHJvb3QpKSBmcmFnbWVudCA9IGZyYWdtZW50LnNsaWNlKHJvb3QubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmcmFnbWVudCA9IHRoaXMuZ2V0SGFzaCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZnJhZ21lbnQucmVwbGFjZShyb3V0ZVN0cmlwcGVyLCAnJyk7XG4gICAgfSxcblxuICAgIC8vIFN0YXJ0IHRoZSBoYXNoIGNoYW5nZSBoYW5kbGluZywgcmV0dXJuaW5nIGB0cnVlYCBpZiB0aGUgY3VycmVudCBVUkwgbWF0Y2hlc1xuICAgIC8vIGFuIGV4aXN0aW5nIHJvdXRlLCBhbmQgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgc3RhcnQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGlmIChIaXN0b3J5LnN0YXJ0ZWQpIHRocm93IG5ldyBFcnJvcihcIkJhY2tib25lLmhpc3RvcnkgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkXCIpO1xuICAgICAgSGlzdG9yeS5zdGFydGVkID0gdHJ1ZTtcblxuICAgICAgLy8gRmlndXJlIG91dCB0aGUgaW5pdGlhbCBjb25maWd1cmF0aW9uLiBEbyB3ZSBuZWVkIGFuIGlmcmFtZT9cbiAgICAgIC8vIElzIHB1c2hTdGF0ZSBkZXNpcmVkIC4uLiBpcyBpdCBhdmFpbGFibGU/XG4gICAgICB0aGlzLm9wdGlvbnMgICAgICAgICAgPSBfLmV4dGVuZCh7cm9vdDogJy8nfSwgdGhpcy5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgIHRoaXMucm9vdCAgICAgICAgICAgICA9IHRoaXMub3B0aW9ucy5yb290O1xuICAgICAgdGhpcy5fd2FudHNIYXNoQ2hhbmdlID0gdGhpcy5vcHRpb25zLmhhc2hDaGFuZ2UgIT09IGZhbHNlO1xuICAgICAgdGhpcy5fd2FudHNQdXNoU3RhdGUgID0gISF0aGlzLm9wdGlvbnMucHVzaFN0YXRlO1xuICAgICAgdGhpcy5faGFzUHVzaFN0YXRlICAgID0gISEodGhpcy5vcHRpb25zLnB1c2hTdGF0ZSAmJiB0aGlzLmhpc3RvcnkgJiYgdGhpcy5oaXN0b3J5LnB1c2hTdGF0ZSk7XG4gICAgICB2YXIgZnJhZ21lbnQgICAgICAgICAgPSB0aGlzLmdldEZyYWdtZW50KCk7XG4gICAgICB2YXIgZG9jTW9kZSAgICAgICAgICAgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XG4gICAgICB2YXIgb2xkSUUgICAgICAgICAgICAgPSAoaXNFeHBsb3Jlci5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSkgJiYgKCFkb2NNb2RlIHx8IGRvY01vZGUgPD0gNykpO1xuXG4gICAgICAvLyBOb3JtYWxpemUgcm9vdCB0byBhbHdheXMgaW5jbHVkZSBhIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoLlxuICAgICAgdGhpcy5yb290ID0gKCcvJyArIHRoaXMucm9vdCArICcvJykucmVwbGFjZShyb290U3RyaXBwZXIsICcvJyk7XG5cbiAgICAgIGlmIChvbGRJRSAmJiB0aGlzLl93YW50c0hhc2hDaGFuZ2UpIHtcbiAgICAgICAgdmFyIGZyYW1lID0gQmFja2JvbmUuJCgnPGlmcmFtZSBzcmM9XCJqYXZhc2NyaXB0OjBcIiB0YWJpbmRleD1cIi0xXCI+Jyk7XG4gICAgICAgIHRoaXMuaWZyYW1lID0gZnJhbWUuaGlkZSgpLmFwcGVuZFRvKCdib2R5JylbMF0uY29udGVudFdpbmRvdztcbiAgICAgICAgdGhpcy5uYXZpZ2F0ZShmcmFnbWVudCk7XG4gICAgICB9XG5cbiAgICAgIC8vIERlcGVuZGluZyBvbiB3aGV0aGVyIHdlJ3JlIHVzaW5nIHB1c2hTdGF0ZSBvciBoYXNoZXMsIGFuZCB3aGV0aGVyXG4gICAgICAvLyAnb25oYXNoY2hhbmdlJyBpcyBzdXBwb3J0ZWQsIGRldGVybWluZSBob3cgd2UgY2hlY2sgdGhlIFVSTCBzdGF0ZS5cbiAgICAgIGlmICh0aGlzLl9oYXNQdXNoU3RhdGUpIHtcbiAgICAgICAgQmFja2JvbmUuJCh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIHRoaXMuY2hlY2tVcmwpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgKCdvbmhhc2hjaGFuZ2UnIGluIHdpbmRvdykgJiYgIW9sZElFKSB7XG4gICAgICAgIEJhY2tib25lLiQod2luZG93KS5vbignaGFzaGNoYW5nZScsIHRoaXMuY2hlY2tVcmwpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl93YW50c0hhc2hDaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tVcmxJbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMuY2hlY2tVcmwsIHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXRlcm1pbmUgaWYgd2UgbmVlZCB0byBjaGFuZ2UgdGhlIGJhc2UgdXJsLCBmb3IgYSBwdXNoU3RhdGUgbGlua1xuICAgICAgLy8gb3BlbmVkIGJ5IGEgbm9uLXB1c2hTdGF0ZSBicm93c2VyLlxuICAgICAgdGhpcy5mcmFnbWVudCA9IGZyYWdtZW50O1xuICAgICAgdmFyIGxvYyA9IHRoaXMubG9jYXRpb247XG5cbiAgICAgIC8vIFRyYW5zaXRpb24gZnJvbSBoYXNoQ2hhbmdlIHRvIHB1c2hTdGF0ZSBvciB2aWNlIHZlcnNhIGlmIGJvdGggYXJlXG4gICAgICAvLyByZXF1ZXN0ZWQuXG4gICAgICBpZiAodGhpcy5fd2FudHNIYXNoQ2hhbmdlICYmIHRoaXMuX3dhbnRzUHVzaFN0YXRlKSB7XG5cbiAgICAgICAgLy8gSWYgd2UndmUgc3RhcnRlZCBvZmYgd2l0aCBhIHJvdXRlIGZyb20gYSBgcHVzaFN0YXRlYC1lbmFibGVkXG4gICAgICAgIC8vIGJyb3dzZXIsIGJ1dCB3ZSdyZSBjdXJyZW50bHkgaW4gYSBicm93c2VyIHRoYXQgZG9lc24ndCBzdXBwb3J0IGl0Li4uXG4gICAgICAgIGlmICghdGhpcy5faGFzUHVzaFN0YXRlICYmICF0aGlzLmF0Um9vdCgpKSB7XG4gICAgICAgICAgdGhpcy5mcmFnbWVudCA9IHRoaXMuZ2V0RnJhZ21lbnQobnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgdGhpcy5sb2NhdGlvbi5yZXBsYWNlKHRoaXMucm9vdCArICcjJyArIHRoaXMuZnJhZ21lbnQpO1xuICAgICAgICAgIC8vIFJldHVybiBpbW1lZGlhdGVseSBhcyBicm93c2VyIHdpbGwgZG8gcmVkaXJlY3QgdG8gbmV3IHVybFxuICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgIC8vIE9yIGlmIHdlJ3ZlIHN0YXJ0ZWQgb3V0IHdpdGggYSBoYXNoLWJhc2VkIHJvdXRlLCBidXQgd2UncmUgY3VycmVudGx5XG4gICAgICAgIC8vIGluIGEgYnJvd3NlciB3aGVyZSBpdCBjb3VsZCBiZSBgcHVzaFN0YXRlYC1iYXNlZCBpbnN0ZWFkLi4uXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5faGFzUHVzaFN0YXRlICYmIHRoaXMuYXRSb290KCkgJiYgbG9jLmhhc2gpIHtcbiAgICAgICAgICB0aGlzLmZyYWdtZW50ID0gdGhpcy5nZXRIYXNoKCkucmVwbGFjZShyb3V0ZVN0cmlwcGVyLCAnJyk7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgZG9jdW1lbnQudGl0bGUsIHRoaXMucm9vdCArIHRoaXMuZnJhZ21lbnQpO1xuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuc2lsZW50KSByZXR1cm4gdGhpcy5sb2FkVXJsKCk7XG4gICAgfSxcblxuICAgIC8vIERpc2FibGUgQmFja2JvbmUuaGlzdG9yeSwgcGVyaGFwcyB0ZW1wb3JhcmlseS4gTm90IHVzZWZ1bCBpbiBhIHJlYWwgYXBwLFxuICAgIC8vIGJ1dCBwb3NzaWJseSB1c2VmdWwgZm9yIHVuaXQgdGVzdGluZyBSb3V0ZXJzLlxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgQmFja2JvbmUuJCh3aW5kb3cpLm9mZigncG9wc3RhdGUnLCB0aGlzLmNoZWNrVXJsKS5vZmYoJ2hhc2hjaGFuZ2UnLCB0aGlzLmNoZWNrVXJsKTtcbiAgICAgIGlmICh0aGlzLl9jaGVja1VybEludGVydmFsKSBjbGVhckludGVydmFsKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpO1xuICAgICAgSGlzdG9yeS5zdGFydGVkID0gZmFsc2U7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIHJvdXRlIHRvIGJlIHRlc3RlZCB3aGVuIHRoZSBmcmFnbWVudCBjaGFuZ2VzLiBSb3V0ZXMgYWRkZWQgbGF0ZXJcbiAgICAvLyBtYXkgb3ZlcnJpZGUgcHJldmlvdXMgcm91dGVzLlxuICAgIHJvdXRlOiBmdW5jdGlvbihyb3V0ZSwgY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuaGFuZGxlcnMudW5zaGlmdCh7cm91dGU6IHJvdXRlLCBjYWxsYmFjazogY2FsbGJhY2t9KTtcbiAgICB9LFxuXG4gICAgLy8gQ2hlY2tzIHRoZSBjdXJyZW50IFVSTCB0byBzZWUgaWYgaXQgaGFzIGNoYW5nZWQsIGFuZCBpZiBpdCBoYXMsXG4gICAgLy8gY2FsbHMgYGxvYWRVcmxgLCBub3JtYWxpemluZyBhY3Jvc3MgdGhlIGhpZGRlbiBpZnJhbWUuXG4gICAgY2hlY2tVcmw6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5nZXRGcmFnbWVudCgpO1xuICAgICAgaWYgKGN1cnJlbnQgPT09IHRoaXMuZnJhZ21lbnQgJiYgdGhpcy5pZnJhbWUpIHtcbiAgICAgICAgY3VycmVudCA9IHRoaXMuZ2V0RnJhZ21lbnQodGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lKSk7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudCA9PT0gdGhpcy5mcmFnbWVudCkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKHRoaXMuaWZyYW1lKSB0aGlzLm5hdmlnYXRlKGN1cnJlbnQpO1xuICAgICAgdGhpcy5sb2FkVXJsKCk7XG4gICAgfSxcblxuICAgIC8vIEF0dGVtcHQgdG8gbG9hZCB0aGUgY3VycmVudCBVUkwgZnJhZ21lbnQuIElmIGEgcm91dGUgc3VjY2VlZHMgd2l0aCBhXG4gICAgLy8gbWF0Y2gsIHJldHVybnMgYHRydWVgLiBJZiBubyBkZWZpbmVkIHJvdXRlcyBtYXRjaGVzIHRoZSBmcmFnbWVudCxcbiAgICAvLyByZXR1cm5zIGBmYWxzZWAuXG4gICAgbG9hZFVybDogZnVuY3Rpb24oZnJhZ21lbnQpIHtcbiAgICAgIGZyYWdtZW50ID0gdGhpcy5mcmFnbWVudCA9IHRoaXMuZ2V0RnJhZ21lbnQoZnJhZ21lbnQpO1xuICAgICAgcmV0dXJuIF8uYW55KHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKGhhbmRsZXIucm91dGUudGVzdChmcmFnbWVudCkpIHtcbiAgICAgICAgICBoYW5kbGVyLmNhbGxiYWNrKGZyYWdtZW50KTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vIFNhdmUgYSBmcmFnbWVudCBpbnRvIHRoZSBoYXNoIGhpc3RvcnksIG9yIHJlcGxhY2UgdGhlIFVSTCBzdGF0ZSBpZiB0aGVcbiAgICAvLyAncmVwbGFjZScgb3B0aW9uIGlzIHBhc3NlZC4gWW91IGFyZSByZXNwb25zaWJsZSBmb3IgcHJvcGVybHkgVVJMLWVuY29kaW5nXG4gICAgLy8gdGhlIGZyYWdtZW50IGluIGFkdmFuY2UuXG4gICAgLy9cbiAgICAvLyBUaGUgb3B0aW9ucyBvYmplY3QgY2FuIGNvbnRhaW4gYHRyaWdnZXI6IHRydWVgIGlmIHlvdSB3aXNoIHRvIGhhdmUgdGhlXG4gICAgLy8gcm91dGUgY2FsbGJhY2sgYmUgZmlyZWQgKG5vdCB1c3VhbGx5IGRlc2lyYWJsZSksIG9yIGByZXBsYWNlOiB0cnVlYCwgaWZcbiAgICAvLyB5b3Ugd2lzaCB0byBtb2RpZnkgdGhlIGN1cnJlbnQgVVJMIHdpdGhvdXQgYWRkaW5nIGFuIGVudHJ5IHRvIHRoZSBoaXN0b3J5LlxuICAgIG5hdmlnYXRlOiBmdW5jdGlvbihmcmFnbWVudCwgb3B0aW9ucykge1xuICAgICAgaWYgKCFIaXN0b3J5LnN0YXJ0ZWQpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmICghb3B0aW9ucyB8fCBvcHRpb25zID09PSB0cnVlKSBvcHRpb25zID0ge3RyaWdnZXI6ICEhb3B0aW9uc307XG5cbiAgICAgIHZhciB1cmwgPSB0aGlzLnJvb3QgKyAoZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KGZyYWdtZW50IHx8ICcnKSk7XG5cbiAgICAgIC8vIFN0cmlwIHRoZSBoYXNoIGZvciBtYXRjaGluZy5cbiAgICAgIGZyYWdtZW50ID0gZnJhZ21lbnQucmVwbGFjZShwYXRoU3RyaXBwZXIsICcnKTtcblxuICAgICAgaWYgKHRoaXMuZnJhZ21lbnQgPT09IGZyYWdtZW50KSByZXR1cm47XG4gICAgICB0aGlzLmZyYWdtZW50ID0gZnJhZ21lbnQ7XG5cbiAgICAgIC8vIERvbid0IGluY2x1ZGUgYSB0cmFpbGluZyBzbGFzaCBvbiB0aGUgcm9vdC5cbiAgICAgIGlmIChmcmFnbWVudCA9PT0gJycgJiYgdXJsICE9PSAnLycpIHVybCA9IHVybC5zbGljZSgwLCAtMSk7XG5cbiAgICAgIC8vIElmIHB1c2hTdGF0ZSBpcyBhdmFpbGFibGUsIHdlIHVzZSBpdCB0byBzZXQgdGhlIGZyYWdtZW50IGFzIGEgcmVhbCBVUkwuXG4gICAgICBpZiAodGhpcy5faGFzUHVzaFN0YXRlKSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeVtvcHRpb25zLnJlcGxhY2UgPyAncmVwbGFjZVN0YXRlJyA6ICdwdXNoU3RhdGUnXSh7fSwgZG9jdW1lbnQudGl0bGUsIHVybCk7XG5cbiAgICAgIC8vIElmIGhhc2ggY2hhbmdlcyBoYXZlbid0IGJlZW4gZXhwbGljaXRseSBkaXNhYmxlZCwgdXBkYXRlIHRoZSBoYXNoXG4gICAgICAvLyBmcmFnbWVudCB0byBzdG9yZSBoaXN0b3J5LlxuICAgICAgfSBlbHNlIGlmICh0aGlzLl93YW50c0hhc2hDaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlSGFzaCh0aGlzLmxvY2F0aW9uLCBmcmFnbWVudCwgb3B0aW9ucy5yZXBsYWNlKTtcbiAgICAgICAgaWYgKHRoaXMuaWZyYW1lICYmIChmcmFnbWVudCAhPT0gdGhpcy5nZXRGcmFnbWVudCh0aGlzLmdldEhhc2godGhpcy5pZnJhbWUpKSkpIHtcbiAgICAgICAgICAvLyBPcGVuaW5nIGFuZCBjbG9zaW5nIHRoZSBpZnJhbWUgdHJpY2tzIElFNyBhbmQgZWFybGllciB0byBwdXNoIGFcbiAgICAgICAgICAvLyBoaXN0b3J5IGVudHJ5IG9uIGhhc2gtdGFnIGNoYW5nZS4gIFdoZW4gcmVwbGFjZSBpcyB0cnVlLCB3ZSBkb24ndFxuICAgICAgICAgIC8vIHdhbnQgdGhpcy5cbiAgICAgICAgICBpZighb3B0aW9ucy5yZXBsYWNlKSB0aGlzLmlmcmFtZS5kb2N1bWVudC5vcGVuKCkuY2xvc2UoKTtcbiAgICAgICAgICB0aGlzLl91cGRhdGVIYXNoKHRoaXMuaWZyYW1lLmxvY2F0aW9uLCBmcmFnbWVudCwgb3B0aW9ucy5yZXBsYWNlKTtcbiAgICAgICAgfVxuXG4gICAgICAvLyBJZiB5b3UndmUgdG9sZCB1cyB0aGF0IHlvdSBleHBsaWNpdGx5IGRvbid0IHdhbnQgZmFsbGJhY2sgaGFzaGNoYW5nZS1cbiAgICAgIC8vIGJhc2VkIGhpc3RvcnksIHRoZW4gYG5hdmlnYXRlYCBiZWNvbWVzIGEgcGFnZSByZWZyZXNoLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb24uYXNzaWduKHVybCk7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy50cmlnZ2VyKSByZXR1cm4gdGhpcy5sb2FkVXJsKGZyYWdtZW50KTtcbiAgICB9LFxuXG4gICAgLy8gVXBkYXRlIHRoZSBoYXNoIGxvY2F0aW9uLCBlaXRoZXIgcmVwbGFjaW5nIHRoZSBjdXJyZW50IGVudHJ5LCBvciBhZGRpbmdcbiAgICAvLyBhIG5ldyBvbmUgdG8gdGhlIGJyb3dzZXIgaGlzdG9yeS5cbiAgICBfdXBkYXRlSGFzaDogZnVuY3Rpb24obG9jYXRpb24sIGZyYWdtZW50LCByZXBsYWNlKSB7XG4gICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICB2YXIgaHJlZiA9IGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvKGphdmFzY3JpcHQ6fCMpLiokLywgJycpO1xuICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKGhyZWYgKyAnIycgKyBmcmFnbWVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTb21lIGJyb3dzZXJzIHJlcXVpcmUgdGhhdCBgaGFzaGAgY29udGFpbnMgYSBsZWFkaW5nICMuXG4gICAgICAgIGxvY2F0aW9uLmhhc2ggPSAnIycgKyBmcmFnbWVudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgfSk7XG5cbiAgLy8gQ3JlYXRlIHRoZSBkZWZhdWx0IEJhY2tib25lLmhpc3RvcnkuXG4gIEJhY2tib25lLmhpc3RvcnkgPSBuZXcgSGlzdG9yeTtcblxuICAvLyBIZWxwZXJzXG4gIC8vIC0tLS0tLS1cblxuICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29ycmVjdGx5IHNldCB1cCB0aGUgcHJvdG90eXBlIGNoYWluLCBmb3Igc3ViY2xhc3Nlcy5cbiAgLy8gU2ltaWxhciB0byBgZ29vZy5pbmhlcml0c2AsIGJ1dCB1c2VzIGEgaGFzaCBvZiBwcm90b3R5cGUgcHJvcGVydGllcyBhbmRcbiAgLy8gY2xhc3MgcHJvcGVydGllcyB0byBiZSBleHRlbmRlZC5cbiAgdmFyIGV4dGVuZCA9IGZ1bmN0aW9uKHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgdmFyIHBhcmVudCA9IHRoaXM7XG4gICAgdmFyIGNoaWxkO1xuXG4gICAgLy8gVGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGZvciB0aGUgbmV3IHN1YmNsYXNzIGlzIGVpdGhlciBkZWZpbmVkIGJ5IHlvdVxuICAgIC8vICh0aGUgXCJjb25zdHJ1Y3RvclwiIHByb3BlcnR5IGluIHlvdXIgYGV4dGVuZGAgZGVmaW5pdGlvbiksIG9yIGRlZmF1bHRlZFxuICAgIC8vIGJ5IHVzIHRvIHNpbXBseSBjYWxsIHRoZSBwYXJlbnQncyBjb25zdHJ1Y3Rvci5cbiAgICBpZiAocHJvdG9Qcm9wcyAmJiBfLmhhcyhwcm90b1Byb3BzLCAnY29uc3RydWN0b3InKSkge1xuICAgICAgY2hpbGQgPSBwcm90b1Byb3BzLmNvbnN0cnVjdG9yO1xuICAgIH0gZWxzZSB7XG4gICAgICBjaGlsZCA9IGZ1bmN0aW9uKCl7IHJldHVybiBwYXJlbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfTtcbiAgICB9XG5cbiAgICAvLyBBZGQgc3RhdGljIHByb3BlcnRpZXMgdG8gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLCBpZiBzdXBwbGllZC5cbiAgICBfLmV4dGVuZChjaGlsZCwgcGFyZW50LCBzdGF0aWNQcm9wcyk7XG5cbiAgICAvLyBTZXQgdGhlIHByb3RvdHlwZSBjaGFpbiB0byBpbmhlcml0IGZyb20gYHBhcmVudGAsIHdpdGhvdXQgY2FsbGluZ1xuICAgIC8vIGBwYXJlbnRgJ3MgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gICAgdmFyIFN1cnJvZ2F0ZSA9IGZ1bmN0aW9uKCl7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfTtcbiAgICBTdXJyb2dhdGUucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTtcbiAgICBjaGlsZC5wcm90b3R5cGUgPSBuZXcgU3Vycm9nYXRlO1xuXG4gICAgLy8gQWRkIHByb3RvdHlwZSBwcm9wZXJ0aWVzIChpbnN0YW5jZSBwcm9wZXJ0aWVzKSB0byB0aGUgc3ViY2xhc3MsXG4gICAgLy8gaWYgc3VwcGxpZWQuXG4gICAgaWYgKHByb3RvUHJvcHMpIF8uZXh0ZW5kKGNoaWxkLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG5cbiAgICAvLyBTZXQgYSBjb252ZW5pZW5jZSBwcm9wZXJ0eSBpbiBjYXNlIHRoZSBwYXJlbnQncyBwcm90b3R5cGUgaXMgbmVlZGVkXG4gICAgLy8gbGF0ZXIuXG4gICAgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTtcblxuICAgIHJldHVybiBjaGlsZDtcbiAgfTtcblxuICAvLyBTZXQgdXAgaW5oZXJpdGFuY2UgZm9yIHRoZSBtb2RlbCwgY29sbGVjdGlvbiwgcm91dGVyLCB2aWV3IGFuZCBoaXN0b3J5LlxuICBNb2RlbC5leHRlbmQgPSBDb2xsZWN0aW9uLmV4dGVuZCA9IFJvdXRlci5leHRlbmQgPSBWaWV3LmV4dGVuZCA9IEhpc3RvcnkuZXh0ZW5kID0gZXh0ZW5kO1xuXG4gIC8vIFRocm93IGFuIGVycm9yIHdoZW4gYSBVUkwgaXMgbmVlZGVkLCBhbmQgbm9uZSBpcyBzdXBwbGllZC5cbiAgdmFyIHVybEVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdBIFwidXJsXCIgcHJvcGVydHkgb3IgZnVuY3Rpb24gbXVzdCBiZSBzcGVjaWZpZWQnKTtcbiAgfTtcblxuICAvLyBXcmFwIGFuIG9wdGlvbmFsIGVycm9yIGNhbGxiYWNrIHdpdGggYSBmYWxsYmFjayBlcnJvciBldmVudC5cbiAgdmFyIHdyYXBFcnJvciA9IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgdmFyIGVycm9yID0gb3B0aW9ucy5lcnJvcjtcbiAgICBvcHRpb25zLmVycm9yID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgaWYgKGVycm9yKSBlcnJvcihtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICBtb2RlbC50cmlnZ2VyKCdlcnJvcicsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiBCYWNrYm9uZTtcblxufSkpO1xuIiwidmFyIGxvb2t1cCA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJztcblxuOyhmdW5jdGlvbiAoZXhwb3J0cykge1xuXHQndXNlIHN0cmljdCc7XG5cbiAgdmFyIEFyciA9ICh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgPyBVaW50OEFycmF5XG4gICAgOiBBcnJheVxuXG5cdHZhciBQTFVTICAgPSAnKycuY2hhckNvZGVBdCgwKVxuXHR2YXIgU0xBU0ggID0gJy8nLmNoYXJDb2RlQXQoMClcblx0dmFyIE5VTUJFUiA9ICcwJy5jaGFyQ29kZUF0KDApXG5cdHZhciBMT1dFUiAgPSAnYScuY2hhckNvZGVBdCgwKVxuXHR2YXIgVVBQRVIgID0gJ0EnLmNoYXJDb2RlQXQoMClcblx0dmFyIFBMVVNfVVJMX1NBRkUgPSAnLScuY2hhckNvZGVBdCgwKVxuXHR2YXIgU0xBU0hfVVJMX1NBRkUgPSAnXycuY2hhckNvZGVBdCgwKVxuXG5cdGZ1bmN0aW9uIGRlY29kZSAoZWx0KSB7XG5cdFx0dmFyIGNvZGUgPSBlbHQuY2hhckNvZGVBdCgwKVxuXHRcdGlmIChjb2RlID09PSBQTFVTIHx8XG5cdFx0ICAgIGNvZGUgPT09IFBMVVNfVVJMX1NBRkUpXG5cdFx0XHRyZXR1cm4gNjIgLy8gJysnXG5cdFx0aWYgKGNvZGUgPT09IFNMQVNIIHx8XG5cdFx0ICAgIGNvZGUgPT09IFNMQVNIX1VSTF9TQUZFKVxuXHRcdFx0cmV0dXJuIDYzIC8vICcvJ1xuXHRcdGlmIChjb2RlIDwgTlVNQkVSKVxuXHRcdFx0cmV0dXJuIC0xIC8vbm8gbWF0Y2hcblx0XHRpZiAoY29kZSA8IE5VTUJFUiArIDEwKVxuXHRcdFx0cmV0dXJuIGNvZGUgLSBOVU1CRVIgKyAyNiArIDI2XG5cdFx0aWYgKGNvZGUgPCBVUFBFUiArIDI2KVxuXHRcdFx0cmV0dXJuIGNvZGUgLSBVUFBFUlxuXHRcdGlmIChjb2RlIDwgTE9XRVIgKyAyNilcblx0XHRcdHJldHVybiBjb2RlIC0gTE9XRVIgKyAyNlxuXHR9XG5cblx0ZnVuY3Rpb24gYjY0VG9CeXRlQXJyYXkgKGI2NCkge1xuXHRcdHZhciBpLCBqLCBsLCB0bXAsIHBsYWNlSG9sZGVycywgYXJyXG5cblx0XHRpZiAoYjY0Lmxlbmd0aCAlIDQgPiAwKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKVxuXHRcdH1cblxuXHRcdC8vIHRoZSBudW1iZXIgb2YgZXF1YWwgc2lnbnMgKHBsYWNlIGhvbGRlcnMpXG5cdFx0Ly8gaWYgdGhlcmUgYXJlIHR3byBwbGFjZWhvbGRlcnMsIHRoYW4gdGhlIHR3byBjaGFyYWN0ZXJzIGJlZm9yZSBpdFxuXHRcdC8vIHJlcHJlc2VudCBvbmUgYnl0ZVxuXHRcdC8vIGlmIHRoZXJlIGlzIG9ubHkgb25lLCB0aGVuIHRoZSB0aHJlZSBjaGFyYWN0ZXJzIGJlZm9yZSBpdCByZXByZXNlbnQgMiBieXRlc1xuXHRcdC8vIHRoaXMgaXMganVzdCBhIGNoZWFwIGhhY2sgdG8gbm90IGRvIGluZGV4T2YgdHdpY2Vcblx0XHR2YXIgbGVuID0gYjY0Lmxlbmd0aFxuXHRcdHBsYWNlSG9sZGVycyA9ICc9JyA9PT0gYjY0LmNoYXJBdChsZW4gLSAyKSA/IDIgOiAnPScgPT09IGI2NC5jaGFyQXQobGVuIC0gMSkgPyAxIDogMFxuXG5cdFx0Ly8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG5cdFx0YXJyID0gbmV3IEFycihiNjQubGVuZ3RoICogMyAvIDQgLSBwbGFjZUhvbGRlcnMpXG5cblx0XHQvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG5cdFx0bCA9IHBsYWNlSG9sZGVycyA+IDAgPyBiNjQubGVuZ3RoIC0gNCA6IGI2NC5sZW5ndGhcblxuXHRcdHZhciBMID0gMFxuXG5cdFx0ZnVuY3Rpb24gcHVzaCAodikge1xuXHRcdFx0YXJyW0wrK10gPSB2XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykge1xuXHRcdFx0dG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAxOCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDEpKSA8PCAxMikgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDIpKSA8PCA2KSB8IGRlY29kZShiNjQuY2hhckF0KGkgKyAzKSlcblx0XHRcdHB1c2goKHRtcCAmIDB4RkYwMDAwKSA+PiAxNilcblx0XHRcdHB1c2goKHRtcCAmIDB4RkYwMCkgPj4gOClcblx0XHRcdHB1c2godG1wICYgMHhGRilcblx0XHR9XG5cblx0XHRpZiAocGxhY2VIb2xkZXJzID09PSAyKSB7XG5cdFx0XHR0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDIpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPj4gNClcblx0XHRcdHB1c2godG1wICYgMHhGRilcblx0XHR9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkge1xuXHRcdFx0dG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAxMCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDEpKSA8PCA0KSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMikpID4+IDIpXG5cdFx0XHRwdXNoKCh0bXAgPj4gOCkgJiAweEZGKVxuXHRcdFx0cHVzaCh0bXAgJiAweEZGKVxuXHRcdH1cblxuXHRcdHJldHVybiBhcnJcblx0fVxuXG5cdGZ1bmN0aW9uIHVpbnQ4VG9CYXNlNjQgKHVpbnQ4KSB7XG5cdFx0dmFyIGksXG5cdFx0XHRleHRyYUJ5dGVzID0gdWludDgubGVuZ3RoICUgMywgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcblx0XHRcdG91dHB1dCA9IFwiXCIsXG5cdFx0XHR0ZW1wLCBsZW5ndGhcblxuXHRcdGZ1bmN0aW9uIGVuY29kZSAobnVtKSB7XG5cdFx0XHRyZXR1cm4gbG9va3VwLmNoYXJBdChudW0pXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHtcblx0XHRcdHJldHVybiBlbmNvZGUobnVtID4+IDE4ICYgMHgzRikgKyBlbmNvZGUobnVtID4+IDEyICYgMHgzRikgKyBlbmNvZGUobnVtID4+IDYgJiAweDNGKSArIGVuY29kZShudW0gJiAweDNGKVxuXHRcdH1cblxuXHRcdC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXJcblx0XHRmb3IgKGkgPSAwLCBsZW5ndGggPSB1aW50OC5sZW5ndGggLSBleHRyYUJ5dGVzOyBpIDwgbGVuZ3RoOyBpICs9IDMpIHtcblx0XHRcdHRlbXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pXG5cdFx0XHRvdXRwdXQgKz0gdHJpcGxldFRvQmFzZTY0KHRlbXApXG5cdFx0fVxuXG5cdFx0Ly8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuXHRcdHN3aXRjaCAoZXh0cmFCeXRlcykge1xuXHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHR0ZW1wID0gdWludDhbdWludDgubGVuZ3RoIC0gMV1cblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSh0ZW1wID4+IDIpXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUoKHRlbXAgPDwgNCkgJiAweDNGKVxuXHRcdFx0XHRvdXRwdXQgKz0gJz09J1xuXHRcdFx0XHRicmVha1xuXHRcdFx0Y2FzZSAyOlxuXHRcdFx0XHR0ZW1wID0gKHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDJdIDw8IDgpICsgKHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDFdKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKHRlbXAgPj4gMTApXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUoKHRlbXAgPj4gNCkgJiAweDNGKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wIDw8IDIpICYgMHgzRilcblx0XHRcdFx0b3V0cHV0ICs9ICc9J1xuXHRcdFx0XHRicmVha1xuXHRcdH1cblxuXHRcdHJldHVybiBvdXRwdXRcblx0fVxuXG5cdGV4cG9ydHMudG9CeXRlQXJyYXkgPSBiNjRUb0J5dGVBcnJheVxuXHRleHBvcnRzLmZyb21CeXRlQXJyYXkgPSB1aW50OFRvQmFzZTY0XG59KHR5cGVvZiBleHBvcnRzID09PSAndW5kZWZpbmVkJyA/ICh0aGlzLmJhc2U2NGpzID0ge30pIDogZXhwb3J0cykpXG4iLCIvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXG4ndXNlIHN0cmljdCdcblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpXG52YXIgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKVxudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5JylcblxuZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXJcbmV4cG9ydHMuU2xvd0J1ZmZlciA9IFNsb3dCdWZmZXJcbmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MFxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbnZhciByb290UGFyZW50ID0ge31cblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlblxuICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuICpcbiAqICAgLSBTYWZhcmkgNS03IGxhY2tzIHN1cHBvcnQgZm9yIGNoYW5naW5nIHRoZSBgT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3RvcmAgcHJvcGVydHlcbiAqICAgICBvbiBvYmplY3RzLlxuICpcbiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuICpcbiAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cbiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5XG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkXG4gID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgOiB0eXBlZEFycmF5U3VwcG9ydCgpXG5cbmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcbiAgZnVuY3Rpb24gQmFyICgpIHt9XG4gIHRyeSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG4gICAgYXJyLmZvbyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH1cbiAgICBhcnIuY29uc3RydWN0b3IgPSBCYXJcbiAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MiAmJiAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZFxuICAgICAgICBhcnIuY29uc3RydWN0b3IgPT09IEJhciAmJiAvLyBjb25zdHJ1Y3RvciBjYW4gYmUgc2V0XG4gICAgICAgIHR5cGVvZiBhcnIuc3ViYXJyYXkgPT09ICdmdW5jdGlvbicgJiYgLy8gY2hyb21lIDktMTAgbGFjayBgc3ViYXJyYXlgXG4gICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHtcbiAgcmV0dXJuIEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gICAgPyAweDdmZmZmZmZmXG4gICAgOiAweDNmZmZmZmZmXG59XG5cbi8qKlxuICogQ2xhc3M6IEJ1ZmZlclxuICogPT09PT09PT09PT09PVxuICpcbiAqIFRoZSBCdWZmZXIgY29uc3RydWN0b3IgcmV0dXJucyBpbnN0YW5jZXMgb2YgYFVpbnQ4QXJyYXlgIHRoYXQgYXJlIGF1Z21lbnRlZFxuICogd2l0aCBmdW5jdGlvbiBwcm9wZXJ0aWVzIGZvciBhbGwgdGhlIG5vZGUgYEJ1ZmZlcmAgQVBJIGZ1bmN0aW9ucy4gV2UgdXNlXG4gKiBgVWludDhBcnJheWAgc28gdGhhdCBzcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdCByZXR1cm5zXG4gKiBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBCeSBhdWdtZW50aW5nIHRoZSBpbnN0YW5jZXMsIHdlIGNhbiBhdm9pZCBtb2RpZnlpbmcgdGhlIGBVaW50OEFycmF5YFxuICogcHJvdG90eXBlLlxuICovXG5mdW5jdGlvbiBCdWZmZXIgKGFyZykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQnVmZmVyKSkge1xuICAgIC8vIEF2b2lkIGdvaW5nIHRocm91Z2ggYW4gQXJndW1lbnRzQWRhcHRvclRyYW1wb2xpbmUgaW4gdGhlIGNvbW1vbiBjYXNlLlxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgcmV0dXJuIG5ldyBCdWZmZXIoYXJnLCBhcmd1bWVudHNbMV0pXG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoYXJnKVxuICB9XG5cbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXMubGVuZ3RoID0gMFxuICAgIHRoaXMucGFyZW50ID0gdW5kZWZpbmVkXG4gIH1cblxuICAvLyBDb21tb24gY2FzZS5cbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIGZyb21OdW1iZXIodGhpcywgYXJnKVxuICB9XG5cbiAgLy8gU2xpZ2h0bHkgbGVzcyBjb21tb24gY2FzZS5cbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZyb21TdHJpbmcodGhpcywgYXJnLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6ICd1dGY4JylcbiAgfVxuXG4gIC8vIFVudXN1YWwuXG4gIHJldHVybiBmcm9tT2JqZWN0KHRoaXMsIGFyZylcbn1cblxuZnVuY3Rpb24gZnJvbU51bWJlciAodGhhdCwgbGVuZ3RoKSB7XG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGggPCAwID8gMCA6IGNoZWNrZWQobGVuZ3RoKSB8IDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGF0W2ldID0gMFxuICAgIH1cbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykgZW5jb2RpbmcgPSAndXRmOCdcblxuICAvLyBBc3N1bXB0aW9uOiBieXRlTGVuZ3RoKCkgcmV0dXJuIHZhbHVlIGlzIGFsd2F5cyA8IGtNYXhMZW5ndGguXG4gIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuXG4gIHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZylcbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbU9iamVjdCAodGhhdCwgb2JqZWN0KSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqZWN0KSkgcmV0dXJuIGZyb21CdWZmZXIodGhhdCwgb2JqZWN0KVxuXG4gIGlmIChpc0FycmF5KG9iamVjdCkpIHJldHVybiBmcm9tQXJyYXkodGhhdCwgb2JqZWN0KVxuXG4gIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ211c3Qgc3RhcnQgd2l0aCBudW1iZXIsIGJ1ZmZlciwgYXJyYXkgb3Igc3RyaW5nJylcbiAgfVxuXG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKG9iamVjdC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgcmV0dXJuIGZyb21UeXBlZEFycmF5KHRoYXQsIG9iamVjdClcbiAgICB9XG4gICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHRoYXQsIG9iamVjdClcbiAgICB9XG4gIH1cblxuICBpZiAob2JqZWN0Lmxlbmd0aCkgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqZWN0KVxuXG4gIHJldHVybiBmcm9tSnNvbk9iamVjdCh0aGF0LCBvYmplY3QpXG59XG5cbmZ1bmN0aW9uIGZyb21CdWZmZXIgKHRoYXQsIGJ1ZmZlcikge1xuICB2YXIgbGVuZ3RoID0gY2hlY2tlZChidWZmZXIubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgYnVmZmVyLmNvcHkodGhhdCwgMCwgMCwgbGVuZ3RoKVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXkgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG4vLyBEdXBsaWNhdGUgb2YgZnJvbUFycmF5KCkgdG8ga2VlcCBmcm9tQXJyYXkoKSBtb25vbW9ycGhpYy5cbmZ1bmN0aW9uIGZyb21UeXBlZEFycmF5ICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICAvLyBUcnVuY2F0aW5nIHRoZSBlbGVtZW50cyBpcyBwcm9iYWJseSBub3Qgd2hhdCBwZW9wbGUgZXhwZWN0IGZyb20gdHlwZWRcbiAgLy8gYXJyYXlzIHdpdGggQllURVNfUEVSX0VMRU1FTlQgPiAxIGJ1dCBpdCdzIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3JcbiAgLy8gb2YgdGhlIG9sZCBCdWZmZXIgY29uc3RydWN0b3IuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKHRoYXQsIGFycmF5KSB7XG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIGFycmF5LmJ5dGVMZW5ndGhcbiAgICB0aGF0ID0gQnVmZmVyLl9hdWdtZW50KG5ldyBVaW50OEFycmF5KGFycmF5KSlcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgdGhhdCA9IGZyb21UeXBlZEFycmF5KHRoYXQsIG5ldyBVaW50OEFycmF5KGFycmF5KSlcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLy8gRGVzZXJpYWxpemUgeyB0eXBlOiAnQnVmZmVyJywgZGF0YTogWzEsMiwzLC4uLl0gfSBpbnRvIGEgQnVmZmVyIG9iamVjdC5cbi8vIFJldHVybnMgYSB6ZXJvLWxlbmd0aCBidWZmZXIgZm9yIGlucHV0cyB0aGF0IGRvbid0IGNvbmZvcm0gdG8gdGhlIHNwZWMuXG5mdW5jdGlvbiBmcm9tSnNvbk9iamVjdCAodGhhdCwgb2JqZWN0KSB7XG4gIHZhciBhcnJheVxuICB2YXIgbGVuZ3RoID0gMFxuXG4gIGlmIChvYmplY3QudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmplY3QuZGF0YSkpIHtcbiAgICBhcnJheSA9IG9iamVjdC5kYXRhXG4gICAgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB9XG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICBCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlXG4gIEJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5XG59IGVsc2Uge1xuICAvLyBwcmUtc2V0IGZvciB2YWx1ZXMgdGhhdCBtYXkgZXhpc3QgaW4gdGhlIGZ1dHVyZVxuICBCdWZmZXIucHJvdG90eXBlLmxlbmd0aCA9IHVuZGVmaW5lZFxuICBCdWZmZXIucHJvdG90eXBlLnBhcmVudCA9IHVuZGVmaW5lZFxufVxuXG5mdW5jdGlvbiBhbGxvY2F0ZSAodGhhdCwgbGVuZ3RoKSB7XG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoYXQgPSBCdWZmZXIuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkobGVuZ3RoKSlcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcbiAgICB0aGF0Ll9pc0J1ZmZlciA9IHRydWVcbiAgfVxuXG4gIHZhciBmcm9tUG9vbCA9IGxlbmd0aCAhPT0gMCAmJiBsZW5ndGggPD0gQnVmZmVyLnBvb2xTaXplID4+PiAxXG4gIGlmIChmcm9tUG9vbCkgdGhhdC5wYXJlbnQgPSByb290UGFyZW50XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7XG4gIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGhgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cbiAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pXG4gIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgoKS50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcbiAgfVxuICByZXR1cm4gbGVuZ3RoIHwgMFxufVxuXG5mdW5jdGlvbiBTbG93QnVmZmVyIChzdWJqZWN0LCBlbmNvZGluZykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU2xvd0J1ZmZlcikpIHJldHVybiBuZXcgU2xvd0J1ZmZlcihzdWJqZWN0LCBlbmNvZGluZylcblxuICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihzdWJqZWN0LCBlbmNvZGluZylcbiAgZGVsZXRlIGJ1Zi5wYXJlbnRcbiAgcmV0dXJuIGJ1ZlxufVxuXG5CdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKVxufVxuXG5CdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cbiAgdmFyIHggPSBhLmxlbmd0aFxuICB2YXIgeSA9IGIubGVuZ3RoXG5cbiAgdmFyIGkgPSAwXG4gIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KVxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSBicmVha1xuXG4gICAgKytpXG4gIH1cblxuICBpZiAoaSAhPT0gbGVuKSB7XG4gICAgeCA9IGFbaV1cbiAgICB5ID0gYltpXVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICBjYXNlICdyYXcnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcbiAgaWYgKCFpc0FycmF5KGxpc3QpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdsaXN0IGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycy4nKVxuXG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBuZXcgQnVmZmVyKDApXG4gIH1cblxuICB2YXIgaVxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBsZW5ndGggPSAwXG4gICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuICAgIH1cbiAgfVxuXG4gIHZhciBidWYgPSBuZXcgQnVmZmVyKGxlbmd0aClcbiAgdmFyIHBvcyA9IDBcbiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV1cbiAgICBpdGVtLmNvcHkoYnVmLCBwb3MpXG4gICAgcG9zICs9IGl0ZW0ubGVuZ3RoXG4gIH1cbiAgcmV0dXJuIGJ1ZlxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykgc3RyaW5nID0gJycgKyBzdHJpbmdcblxuICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgIC8vIERlcHJlY2F0ZWRcbiAgICAgIGNhc2UgJ3Jhdyc6XG4gICAgICBjYXNlICdyYXdzJzpcbiAgICAgICAgcmV0dXJuIGxlblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIGxlbiAqIDJcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBsZW4gPj4+IDFcbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cbmZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcblxuICBzdGFydCA9IHN0YXJ0IHwgMFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPT09IEluZmluaXR5ID8gdGhpcy5sZW5ndGggOiBlbmQgfCAwXG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcbiAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKGVuZCA8PSBzdGFydCkgcmV0dXJuICcnXG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gYmluYXJ5U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCB8IDBcbiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzIChiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlXG4gIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMFxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHtcbiAgdmFyIHN0ciA9ICcnXG4gIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTXG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKVxuICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICdcbiAgfVxuICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+J1xufVxuXG5CdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgaWYgKHRoaXMgPT09IGIpIHJldHVybiAwXG4gIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQpIHtcbiAgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxuICBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuICBieXRlT2Zmc2V0ID4+PSAwXG5cbiAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gLTFcbiAgaWYgKGJ5dGVPZmZzZXQgPj0gdGhpcy5sZW5ndGgpIHJldHVybiAtMVxuXG4gIC8vIE5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXJcbiAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gTWF0aC5tYXgodGhpcy5sZW5ndGggKyBieXRlT2Zmc2V0LCAwKVxuXG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSByZXR1cm4gLTEgLy8gc3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcgYWx3YXlzIGZhaWxzXG4gICAgcmV0dXJuIFN0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsIHZhbCwgYnl0ZU9mZnNldClcbiAgfVxuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbCkpIHtcbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldClcbiAgfVxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YodGhpcywgWyB2YWwgXSwgYnl0ZU9mZnNldClcbiAgfVxuXG4gIGZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQpIHtcbiAgICB2YXIgZm91bmRJbmRleCA9IC0xXG4gICAgZm9yICh2YXIgaSA9IDA7IGJ5dGVPZmZzZXQgKyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoYXJyW2J5dGVPZmZzZXQgKyBpXSA9PT0gdmFsW2ZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4XSkge1xuICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpIGZvdW5kSW5kZXggPSBpXG4gICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbC5sZW5ndGgpIHJldHVybiBieXRlT2Zmc2V0ICsgZm91bmRJbmRleFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm91bmRJbmRleCA9IC0xXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJylcbn1cblxuLy8gYGdldGAgaXMgZGVwcmVjYXRlZFxuQnVmZmVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKG9mZnNldCkge1xuICBjb25zb2xlLmxvZygnLmdldCgpIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB1c2luZyBhcnJheSBpbmRleGVzIGluc3RlYWQuJylcbiAgcmV0dXJuIHRoaXMucmVhZFVJbnQ4KG9mZnNldClcbn1cblxuLy8gYHNldGAgaXMgZGVwcmVjYXRlZFxuQnVmZmVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiBzZXQgKHYsIG9mZnNldCkge1xuICBjb25zb2xlLmxvZygnLnNldCgpIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB1c2luZyBhcnJheSBpbmRleGVzIGluc3RlYWQuJylcbiAgcmV0dXJuIHRoaXMud3JpdGVVSW50OCh2LCBvZmZzZXQpXG59XG5cbmZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG5cbiAgLy8gbXVzdCBiZSBhbiBldmVuIG51bWJlciBvZiBkaWdpdHNcbiAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcblxuICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xuICAgIGxlbmd0aCA9IHN0ckxlbiAvIDJcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNilcbiAgICBpZiAoaXNOYU4ocGFyc2VkKSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmluYXJ5V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7XG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG4gIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcbiAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICBsZW5ndGggPSBsZW5ndGggfCAwXG4gICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCdcbiAgICB9IGVsc2Uge1xuICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcbiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgLy8gbGVnYWN5IHdyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldCwgbGVuZ3RoKSAtIHJlbW92ZSBpbiB2MC4xM1xuICB9IGVsc2Uge1xuICAgIHZhciBzd2FwID0gZW5jb2RpbmdcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIG9mZnNldCA9IGxlbmd0aCB8IDBcbiAgICBsZW5ndGggPSBzd2FwXG4gIH1cblxuICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nXG5cbiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignYXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGJpbmFyeVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlXG4gICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0J1ZmZlcicsXG4gICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApXG4gIH1cbn1cblxuZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1ZilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuICB9XG59XG5cbmZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcbiAgdmFyIHJlcyA9IFtdXG5cbiAgdmFyIGkgPSBzdGFydFxuICB3aGlsZSAoaSA8IGVuZCkge1xuICAgIHZhciBmaXJzdEJ5dGUgPSBidWZbaV1cbiAgICB2YXIgY29kZVBvaW50ID0gbnVsbFxuICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNFxuICAgICAgOiAoZmlyc3RCeXRlID4gMHhERikgPyAzXG4gICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKSA/IDJcbiAgICAgIDogMVxuXG4gICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlIDw9IGVuZCkge1xuICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludFxuXG4gICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7XG4gICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGVcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwICYmIChmb3VydGhCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvZGVQb2ludCA9PT0gbnVsbCkge1xuICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYVxuICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZVxuICAgICAgY29kZVBvaW50ID0gMHhGRkZEXG4gICAgICBieXRlc1BlclNlcXVlbmNlID0gMVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKVxuICAgICAgY29kZVBvaW50IC09IDB4MTAwMDBcbiAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcbiAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGXG4gICAgfVxuXG4gICAgcmVzLnB1c2goY29kZVBvaW50KVxuICAgIGkgKz0gYnl0ZXNQZXJTZXF1ZW5jZVxuICB9XG5cbiAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpXG59XG5cbi8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aFxuLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLlxuLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eVxudmFyIE1BWF9BUkdVTUVOVFNfTEVOR1RIID0gMHgxMDAwXG5cbmZ1bmN0aW9uIGRlY29kZUNvZGVQb2ludHNBcnJheSAoY29kZVBvaW50cykge1xuICB2YXIgbGVuID0gY29kZVBvaW50cy5sZW5ndGhcbiAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVBvaW50cykgLy8gYXZvaWQgZXh0cmEgc2xpY2UoKVxuICB9XG5cbiAgLy8gRGVjb2RlIGluIGNodW5rcyB0byBhdm9pZCBcImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZFwiLlxuICB2YXIgcmVzID0gJydcbiAgdmFyIGkgPSAwXG4gIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoXG4gICAgICBTdHJpbmcsXG4gICAgICBjb2RlUG9pbnRzLnNsaWNlKGksIGkgKz0gTUFYX0FSR1VNRU5UU19MRU5HVEgpXG4gICAgKVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gYmluYXJ5U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gYnVmLmxlbmd0aFxuXG4gIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlblxuXG4gIHZhciBvdXQgPSAnJ1xuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIG91dCArPSB0b0hleChidWZbaV0pXG4gIH1cbiAgcmV0dXJuIG91dFxufVxuXG5mdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZClcbiAgdmFyIHJlcyA9ICcnXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSArIGJ5dGVzW2kgKyAxXSAqIDI1NilcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgc3RhcnQgPSB+fnN0YXJ0XG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmRcblxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgKz0gbGVuXG4gICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHtcbiAgICBzdGFydCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IDApIHtcbiAgICBlbmQgKz0gbGVuXG4gICAgaWYgKGVuZCA8IDApIGVuZCA9IDBcbiAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHtcbiAgICBlbmQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICB2YXIgbmV3QnVmXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIG5ld0J1ZiA9IEJ1ZmZlci5fYXVnbWVudCh0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpKVxuICB9IGVsc2Uge1xuICAgIHZhciBzbGljZUxlbiA9IGVuZCAtIHN0YXJ0XG4gICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2VMZW47IGkrKykge1xuICAgICAgbmV3QnVmW2ldID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9XG5cbiAgaWYgKG5ld0J1Zi5sZW5ndGgpIG5ld0J1Zi5wYXJlbnQgPSB0aGlzLnBhcmVudCB8fCB0aGlzXG5cbiAgcmV0dXJuIG5ld0J1ZlxufVxuXG4vKlxuICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuXG4gKi9cbmZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7XG4gIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFID0gZnVuY3Rpb24gcmVhZFVJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcbiAgfVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF1cbiAgdmFyIG11bCA9IDFcbiAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKCh0aGlzW29mZnNldF0pIHxcbiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgK1xuICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gKiAweDEwMDAwMDApXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkJFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICtcbiAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgdGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50QkUgPSBmdW5jdGlvbiByZWFkSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgaSA9IGJ5dGVMZW5ndGhcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXVxuICB3aGlsZSAoaSA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcbiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0pIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSA8PCAyNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgMjQpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdExFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRCRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdEJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkUgPSBmdW5jdGlvbiByZWFkRG91YmxlQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCA1MiwgOClcbn1cblxuZnVuY3Rpb24gY2hlY2tJbnQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdidWZmZXIgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpXG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3ZhbHVlIGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpLCAwKVxuXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpLCAwKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCAyKTsgaSA8IGo7IGkrKykge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+XG4gICAgICAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSAqIDhcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyBpKyspIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmXG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiB3cml0ZUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gMFxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gdmFsdWUgPCAwID8gMSA6IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludEJFID0gZnVuY3Rpb24gd3JpdGVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZiArIHZhbHVlICsgMVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5mdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCd2YWx1ZSBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOClcbiAgcmV0dXJuIG9mZnNldCArIDhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG4vLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7XG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGhcbiAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwXG4gIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcbiAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cbiAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xuICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICB9XG4gIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpXG5cbiAgLy8gQXJlIHdlIG9vYj9cbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcbiAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydFxuICB9XG5cbiAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0XG4gIHZhciBpXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG4gICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kXG4gICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2UgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gYXNjZW5kaW5nIGNvcHkgZnJvbSBzdGFydFxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0Ll9zZXQodGhpcy5zdWJhcnJheShzdGFydCwgc3RhcnQgKyBsZW4pLCB0YXJnZXRTdGFydClcbiAgfVxuXG4gIHJldHVybiBsZW5cbn1cblxuLy8gZmlsbCh2YWx1ZSwgc3RhcnQ9MCwgZW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWx1ZSwgc3RhcnQsIGVuZCkge1xuICBpZiAoIXZhbHVlKSB2YWx1ZSA9IDBcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kKSBlbmQgPSB0aGlzLmxlbmd0aFxuXG4gIGlmIChlbmQgPCBzdGFydCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2VuZCA8IHN0YXJ0JylcblxuICAvLyBGaWxsIDAgYnl0ZXM7IHdlJ3JlIGRvbmVcbiAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVyblxuICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVyblxuXG4gIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzdGFydCBvdXQgb2YgYm91bmRzJylcbiAgaWYgKGVuZCA8IDAgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdlbmQgb3V0IG9mIGJvdW5kcycpXG5cbiAgdmFyIGlcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICB0aGlzW2ldID0gdmFsdWVcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGJ5dGVzID0gdXRmOFRvQnl0ZXModmFsdWUudG9TdHJpbmcoKSlcbiAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoXG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgdGhpc1tpXSA9IGJ5dGVzW2kgJSBsZW5dXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBBcnJheUJ1ZmZlcmAgd2l0aCB0aGUgKmNvcGllZCogbWVtb3J5IG9mIHRoZSBidWZmZXIgaW5zdGFuY2UuXG4gKiBBZGRlZCBpbiBOb2RlIDAuMTIuIE9ubHkgYXZhaWxhYmxlIGluIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBBcnJheUJ1ZmZlci5cbiAqL1xuQnVmZmVyLnByb3RvdHlwZS50b0FycmF5QnVmZmVyID0gZnVuY3Rpb24gdG9BcnJheUJ1ZmZlciAoKSB7XG4gIGlmICh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAgIHJldHVybiAobmV3IEJ1ZmZlcih0aGlzKSkuYnVmZmVyXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBidWYgPSBuZXcgVWludDhBcnJheSh0aGlzLmxlbmd0aClcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBidWYubGVuZ3RoOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgICAgYnVmW2ldID0gdGhpc1tpXVxuICAgICAgfVxuICAgICAgcmV0dXJuIGJ1Zi5idWZmZXJcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQnVmZmVyLnRvQXJyYXlCdWZmZXIgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXInKVxuICB9XG59XG5cbi8vIEhFTFBFUiBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT1cblxudmFyIEJQID0gQnVmZmVyLnByb3RvdHlwZVxuXG4vKipcbiAqIEF1Z21lbnQgYSBVaW50OEFycmF5ICppbnN0YW5jZSogKG5vdCB0aGUgVWludDhBcnJheSBjbGFzcyEpIHdpdGggQnVmZmVyIG1ldGhvZHNcbiAqL1xuQnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gX2F1Z21lbnQgKGFycikge1xuICBhcnIuY29uc3RydWN0b3IgPSBCdWZmZXJcbiAgYXJyLl9pc0J1ZmZlciA9IHRydWVcblxuICAvLyBzYXZlIHJlZmVyZW5jZSB0byBvcmlnaW5hbCBVaW50OEFycmF5IHNldCBtZXRob2QgYmVmb3JlIG92ZXJ3cml0aW5nXG4gIGFyci5fc2V0ID0gYXJyLnNldFxuXG4gIC8vIGRlcHJlY2F0ZWRcbiAgYXJyLmdldCA9IEJQLmdldFxuICBhcnIuc2V0ID0gQlAuc2V0XG5cbiAgYXJyLndyaXRlID0gQlAud3JpdGVcbiAgYXJyLnRvU3RyaW5nID0gQlAudG9TdHJpbmdcbiAgYXJyLnRvTG9jYWxlU3RyaW5nID0gQlAudG9TdHJpbmdcbiAgYXJyLnRvSlNPTiA9IEJQLnRvSlNPTlxuICBhcnIuZXF1YWxzID0gQlAuZXF1YWxzXG4gIGFyci5jb21wYXJlID0gQlAuY29tcGFyZVxuICBhcnIuaW5kZXhPZiA9IEJQLmluZGV4T2ZcbiAgYXJyLmNvcHkgPSBCUC5jb3B5XG4gIGFyci5zbGljZSA9IEJQLnNsaWNlXG4gIGFyci5yZWFkVUludExFID0gQlAucmVhZFVJbnRMRVxuICBhcnIucmVhZFVJbnRCRSA9IEJQLnJlYWRVSW50QkVcbiAgYXJyLnJlYWRVSW50OCA9IEJQLnJlYWRVSW50OFxuICBhcnIucmVhZFVJbnQxNkxFID0gQlAucmVhZFVJbnQxNkxFXG4gIGFyci5yZWFkVUludDE2QkUgPSBCUC5yZWFkVUludDE2QkVcbiAgYXJyLnJlYWRVSW50MzJMRSA9IEJQLnJlYWRVSW50MzJMRVxuICBhcnIucmVhZFVJbnQzMkJFID0gQlAucmVhZFVJbnQzMkJFXG4gIGFyci5yZWFkSW50TEUgPSBCUC5yZWFkSW50TEVcbiAgYXJyLnJlYWRJbnRCRSA9IEJQLnJlYWRJbnRCRVxuICBhcnIucmVhZEludDggPSBCUC5yZWFkSW50OFxuICBhcnIucmVhZEludDE2TEUgPSBCUC5yZWFkSW50MTZMRVxuICBhcnIucmVhZEludDE2QkUgPSBCUC5yZWFkSW50MTZCRVxuICBhcnIucmVhZEludDMyTEUgPSBCUC5yZWFkSW50MzJMRVxuICBhcnIucmVhZEludDMyQkUgPSBCUC5yZWFkSW50MzJCRVxuICBhcnIucmVhZEZsb2F0TEUgPSBCUC5yZWFkRmxvYXRMRVxuICBhcnIucmVhZEZsb2F0QkUgPSBCUC5yZWFkRmxvYXRCRVxuICBhcnIucmVhZERvdWJsZUxFID0gQlAucmVhZERvdWJsZUxFXG4gIGFyci5yZWFkRG91YmxlQkUgPSBCUC5yZWFkRG91YmxlQkVcbiAgYXJyLndyaXRlVUludDggPSBCUC53cml0ZVVJbnQ4XG4gIGFyci53cml0ZVVJbnRMRSA9IEJQLndyaXRlVUludExFXG4gIGFyci53cml0ZVVJbnRCRSA9IEJQLndyaXRlVUludEJFXG4gIGFyci53cml0ZVVJbnQxNkxFID0gQlAud3JpdGVVSW50MTZMRVxuICBhcnIud3JpdGVVSW50MTZCRSA9IEJQLndyaXRlVUludDE2QkVcbiAgYXJyLndyaXRlVUludDMyTEUgPSBCUC53cml0ZVVJbnQzMkxFXG4gIGFyci53cml0ZVVJbnQzMkJFID0gQlAud3JpdGVVSW50MzJCRVxuICBhcnIud3JpdGVJbnRMRSA9IEJQLndyaXRlSW50TEVcbiAgYXJyLndyaXRlSW50QkUgPSBCUC53cml0ZUludEJFXG4gIGFyci53cml0ZUludDggPSBCUC53cml0ZUludDhcbiAgYXJyLndyaXRlSW50MTZMRSA9IEJQLndyaXRlSW50MTZMRVxuICBhcnIud3JpdGVJbnQxNkJFID0gQlAud3JpdGVJbnQxNkJFXG4gIGFyci53cml0ZUludDMyTEUgPSBCUC53cml0ZUludDMyTEVcbiAgYXJyLndyaXRlSW50MzJCRSA9IEJQLndyaXRlSW50MzJCRVxuICBhcnIud3JpdGVGbG9hdExFID0gQlAud3JpdGVGbG9hdExFXG4gIGFyci53cml0ZUZsb2F0QkUgPSBCUC53cml0ZUZsb2F0QkVcbiAgYXJyLndyaXRlRG91YmxlTEUgPSBCUC53cml0ZURvdWJsZUxFXG4gIGFyci53cml0ZURvdWJsZUJFID0gQlAud3JpdGVEb3VibGVCRVxuICBhcnIuZmlsbCA9IEJQLmZpbGxcbiAgYXJyLmluc3BlY3QgPSBCUC5pbnNwZWN0XG4gIGFyci50b0FycmF5QnVmZmVyID0gQlAudG9BcnJheUJ1ZmZlclxuXG4gIHJldHVybiBhcnJcbn1cblxudmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1xcLzAtOUEtWmEtei1fXS9nXG5cbmZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHtcbiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcbiAgLy8gTm9kZSBjb252ZXJ0cyBzdHJpbmdzIHdpdGggbGVuZ3RoIDwgMiB0byAnJ1xuICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJ1xuICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7XG4gICAgc3RyID0gc3RyICsgJz0nXG4gIH1cbiAgcmV0dXJuIHN0clxufVxuXG5mdW5jdGlvbiBzdHJpbmd0cmltIChzdHIpIHtcbiAgaWYgKHN0ci50cmltKSByZXR1cm4gc3RyLnRyaW0oKVxuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxufVxuXG5mdW5jdGlvbiB0b0hleCAobikge1xuICBpZiAobiA8IDE2KSByZXR1cm4gJzAnICsgbi50b1N0cmluZygxNilcbiAgcmV0dXJuIG4udG9TdHJpbmcoMTYpXG59XG5cbmZ1bmN0aW9uIHV0ZjhUb0J5dGVzIChzdHJpbmcsIHVuaXRzKSB7XG4gIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcbiAgdmFyIGNvZGVQb2ludFxuICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aFxuICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcbiAgdmFyIGJ5dGVzID0gW11cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSlcblxuICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcbiAgICBpZiAoY29kZVBvaW50ID4gMHhEN0ZGICYmIGNvZGVQb2ludCA8IDB4RTAwMCkge1xuICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgICAvLyBubyBsZWFkIHlldFxuICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7XG4gICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWRcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFsaWQgbGVhZFxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkge1xuICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyB2YWxpZCBzdXJyb2dhdGUgcGFpclxuICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMFxuICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgfVxuXG4gICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblxuICAgIC8vIGVuY29kZSB1dGY4XG4gICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnl0ZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlUb0J5dGVzIChzdHIpIHtcbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gTm9kZSdzIGNvZGUgc2VlbXMgdG8gYmUgZG9pbmcgdGhpcyBhbmQgbm90ICYgMHg3Ri4uXG4gICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKVxuICB9XG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVRvQnl0ZXMgKHN0ciwgdW5pdHMpIHtcbiAgdmFyIGMsIGhpLCBsb1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcblxuICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKVxuICAgIGhpID0gYyA+PiA4XG4gICAgbG8gPSBjICUgMjU2XG4gICAgYnl0ZUFycmF5LnB1c2gobG8pXG4gICAgYnl0ZUFycmF5LnB1c2goaGkpXG4gIH1cblxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikge1xuICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpXG59XG5cbmZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVha1xuICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuICB9XG4gIHJldHVybiBpXG59XG4iLCIvKipcbiAqIFdyYXBwZXJzIGFyb3VuZCBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgdG8gZmFjaWxpdGF0ZSB0ZXN0aW5nIGFuZCBjbGljay10cmFja2luZy5cbiAqXG4gKiBUaGlzIGFkZHMgdGhlIGNvbmNlcHQgb2YgYSBcImRhdGEgc3RhY2tcIiB0byB0aGUgY2FudmFzLiBXaGVuIHNoYXBlcyBhcmVcbiAqIGRyYXduLCB0aGV5IHJlcHJlc2VudCB0aGUgb2JqZWN0cyBjdXJyZW50bHkgb24gdGhlIHN0YWNrLiBUaGlzIHN0YWNrIGNhbiBiZVxuICogbWFuaXB1bGF0ZWQgdXNpbmcgY29udGV4dC5wdXNoT2JqZWN0KCkgYW5kIGNvbnRleHQucG9wT2JqZWN0KCkuXG4gKlxuICogU2VlIHRlc3QgZmlsZSBmb3Igc2FtcGxlIHVzYWdlLlxuICovXG5cbihmdW5jdGlvbigpIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG4vLyBUdXJuIG9iaiBpbnRvIGEgcHJveHkgZm9yIHRhcmdldC4gVGhpcyBmb3J3YXJkcyBib3RoIGZ1bmN0aW9uIGNhbGxzIGFuZFxuLy8gcHJvcGVydHkgc2V0dGVycy9nZXR0ZXJzLlxuZnVuY3Rpb24gZm9yd2FyZChvYmosIHRhcmdldCwgb25seUFjY2Vzc29ycykge1xuICBvbmx5QWNjZXNzb3JzID0gb25seUFjY2Vzc29ycyB8fCBmYWxzZTtcbiAgZm9yICh2YXIgayBpbiB0YXJnZXQpIHtcbiAgICAoZnVuY3Rpb24oaykge1xuICAgICAgaWYgKHR5cGVvZih0YXJnZXRba10pID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKCFvbmx5QWNjZXNzb3JzKSB7XG4gICAgICAgICAgb2JqW2tdID0gIHRhcmdldFtrXS5iaW5kKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGssIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGFyZ2V0W2tdOyB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24oeCkgeyB0YXJnZXRba10gPSB4OyB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pKGspO1xuICB9XG59XG5cbi8vIFRoZSBtb3N0IGJhc2ljIGRhdGEtYXdhcmUgY2FudmFzLiBUaGlzIHRocm93cyBhd2F5IGFsbCBkYXRhIGluZm9ybWF0aW9uLlxuLy8gVXNlIHRoaXMgZm9yIGJhc2ljIGRyYXdpbmdcbmZ1bmN0aW9uIERhdGFDb250ZXh0KGN0eCkge1xuICBmb3J3YXJkKHRoaXMsIGN0eCk7XG4gIHRoaXMucHVzaE9iamVjdCA9IHRoaXMucG9wT2JqZWN0ID0gdGhpcy5yZXNldCA9IGZ1bmN0aW9uKCkge307XG59XG5cbnZhciBzdHViR2V0RGF0YUNvbnRleHQgPSBudWxsO1xuXG4vKipcbiAqIEdldCBhIERhdGFDb250ZXh0IGZvciB0aGUgYnVpbHQtaW4gQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELlxuICpcbiAqIFRoaXMgY2FjaGVzIERhdGFDb250ZXh0cyBhbmQgZmFjaWxpdGF0ZXMgc3R1YmJpbmcgaW4gdGVzdHMuXG4gKlxuICogQXMgYSBjb252ZW5pZW5jZSwgeW91IG1heSBwYXNzIGluIGEgQ2FudmFzIGVsZW1lbnQgaW5zdGVhZCBvZiBhXG4gKiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuIGRhdGEtY2FudmFzIHdpbGwgY2FsbCBnZXRDb250ZXh0KCcyZCcpIGZvciB5b3UuXG4gKi9cbmZ1bmN0aW9uIGdldERhdGFDb250ZXh0KGN0eE9yQ2FudmFzKSB7XG4gIGlmIChjdHhPckNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgcmV0dXJuIGdldERhdGFDb250ZXh0KGN0eE9yQ2FudmFzLmdldENvbnRleHQoJzJkJykpO1xuICB9XG5cbiAgdmFyIGN0eCA9IGN0eE9yQ2FudmFzO1xuICBpZiAoc3R1YkdldERhdGFDb250ZXh0KSB7XG4gICAgcmV0dXJuIHN0dWJHZXREYXRhQ29udGV4dChjdHgpO1xuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2V0RGF0YUNvbnRleHQuY2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwYWlyID0gZ2V0RGF0YUNvbnRleHQuY2FjaGVbaV07XG4gICAgICBpZiAocGFpclswXSA9PSBjdHgpIHJldHVybiBwYWlyWzFdO1xuICAgIH1cbiAgICB2YXIgZHR4ID0gbmV3IERhdGFDb250ZXh0KGN0eCk7XG4gICAgZ2V0RGF0YUNvbnRleHQuY2FjaGUucHVzaChbY3R4LCBkdHhdKTtcbiAgICByZXR1cm4gZHR4O1xuICB9XG59XG5nZXREYXRhQ29udGV4dC5jYWNoZSA9IFtdOyAgLy8gKENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgRGF0YUNvbnRleHQpIHBhaXJzXG5cblxuLyoqXG4gKiBBIGNvbnRleHQgd2hpY2ggcmVjb3JkcyB3aGF0IGl0IGRvZXMgKGZvciB0ZXN0aW5nKS5cbiAqXG4gKiBUaGlzIHByb3hpZXMgYWxsIGNhbGxzIHRvIHRoZSB1bmRlcmx5aW5nIGNhbnZhcywgc28gdGhleSBkbyBwcm9kdWNlIHZpc2libGVcbiAqIGRyYXdpbmcuIFVzZSBgZHJhd25PYmplY3RzV2l0aGAgb3IgYGNhbGxzYCB0byB0ZXN0IHdoYXQgd2FzIGRyYXduLlxuICovXG5mdW5jdGlvbiBSZWNvcmRpbmdDb250ZXh0KGN0eCkge1xuICBmb3J3YXJkKHRoaXMsIGN0eCwgdHJ1ZSAvKiBvbmx5IGZvd2FyZCBhY2Nlc3NvcnMgKi8pO1xuXG4gIHZhciBjYWxscyA9IFtdO1xuICB0aGlzLmNhbGxzID0gY2FsbHM7XG5cbiAgZm9yICh2YXIgayBpbiBjdHgpIHtcbiAgICAoZnVuY3Rpb24oaykge1xuICAgICAgaWYgKHR5cGVvZihjdHhba10pICE9ICdmdW5jdGlvbicpIHJldHVybjtcbiAgICAgIHRoaXNba10gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gVE9ETzogcmVjb3JkIGN1cnJlbnQgZHJhd2luZyBzdHlsZVxuICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICAgIGNhbGxzLnB1c2goW2tdLmNvbmNhdChhcmdzKSk7XG4gICAgICAgIHJldHVybiBjdHhba10uYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KS5iaW5kKHRoaXMpKGspO1xuICB9XG5cbiAgdGhpcy5wdXNoT2JqZWN0ID0gZnVuY3Rpb24obykge1xuICAgIGNhbGxzLnB1c2goWydwdXNoT2JqZWN0Jywgb10pO1xuICB9O1xuICBcbiAgdGhpcy5wb3BPYmplY3QgPSBmdW5jdGlvbigpIHtcbiAgICBjYWxscy5wdXNoKFsncG9wT2JqZWN0J10pO1xuICB9O1xuXG4gIHRoaXMucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNhbGxzID0gY2FsbHMgPSBbXTtcbiAgfTtcblxuICB2YXIgcmVjb3JkaW5nRHJhd0ltYWdlID0gdGhpcy5kcmF3SW1hZ2U7ICAvLyBwbGFpbiByZWNvcmRpbmcgZHJhd0ltYWdlKClcbiAgdGhpcy5kcmF3SW1hZ2UgPSBmdW5jdGlvbihpbWFnZSkge1xuICAgIC8vIElmIHRoZSBkcmF3biBpbWFnZSBoYXMgcmVjb3JkZWQgY2FsbHMsIHRoZW4gdGhleSBuZWVkIHRvIGJlIHRyYW5zZmVycmVkIG92ZXIuXG4gICAgdmFyIHJlY29yZGVyID0gUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlckZvckNhbnZhcyhpbWFnZSk7XG4gICAgaWYgKCFyZWNvcmRlcikge1xuICAgICAgcmVjb3JkaW5nRHJhd0ltYWdlLmFwcGx5KGN0eCwgYXJndW1lbnRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LmRyYXdJbWFnZS5hcHBseShjdHgsIGFyZ3VtZW50cyk7XG4gICAgICBjYWxscyA9IGNhbGxzLmNvbmNhdCh0cmFuc2Zvcm1lZENhbGxzKHJlY29yZGVyLmNhbGxzLCBhcmd1bWVudHMpKTtcbiAgICAgIHRoaXMuY2FsbHMgPSBjYWxscztcbiAgICB9XG4gIH1cbn1cblxuLy8gVHJhbnNmb3JtIHRoZSBjYWxscyB0byBhIG5ldyBjb29yZGluYXRlIHN5c3RlbS5cbi8vIFRoZSBhcmd1bWVudHMgYXJlIHRob3NlIHRvIGRyYXdJbWFnZSgpLlxuZnVuY3Rpb24gdHJhbnNmb3JtZWRDYWxscyhjYWxscywgYXJncykge1xuICB2YXIgaW1hZ2UgPSBhcmdzWzBdLFxuICAgICAgc3ggPSAwLFxuICAgICAgc3kgPSAwLFxuICAgICAgc1dpZHRoID0gaW1hZ2Uud2lkdGgsXG4gICAgICBzSGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0LFxuICAgICAgZHgsXG4gICAgICBkeSxcbiAgICAgIGRXaWR0aCA9IGltYWdlLndpZHRoLFxuICAgICAgZEhlaWdodCA9IGltYWdlLmhlaWdodDtcblxuICBpZiAoYXJncy5sZW5ndGggPT0gMykge1xuICAgIC8vIHZvaWQgY3R4LmRyYXdJbWFnZShpbWFnZSwgZHgsIGR5KTtcbiAgICBkeCA9IGFyZ3NbMV07XG4gICAgZHkgPSBhcmdzWzJdO1xuICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09IDUpIHtcbiAgICAvLyB2b2lkIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIGR4LCBkeSwgZFdpZHRoLCBkSGVpZ2h0KTtcbiAgICBkeCA9IGFyZ3NbMV07XG4gICAgZHkgPSBhcmdzWzJdO1xuICAgIGRXaWR0aCA9IGFyZ3NbM107XG4gICAgZEhlaWdodCA9IGFyZ3NbNF07XG4gIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT0gOSkge1xuICAgIC8vIHZvaWQgY3R4LmRyYXdJbWFnZShpbWFnZSwgc3gsIHN5LCBzV2lkdGgsIHNIZWlnaHQsIGR4LCBkeSwgZFdpZHRoLCBkSGVpZ2h0KTtcbiAgICBzeCA9IGFyZ3NbMV07XG4gICAgc3kgPSBhcmdzWzJdO1xuICAgIHNXaWR0aCA9IGFyZ3NbM107XG4gICAgc0hlaWdodCA9IGFyZ3NbNF07XG4gICAgZHggPSBhcmdzWzVdO1xuICAgIGR5ID0gYXJnc1s2XTtcbiAgICBkV2lkdGggPSBhcmdzWzddO1xuICAgIGRIZWlnaHQgPSBhcmdzWzhdO1xuICB9XG4gIC8vIE90aGVyIGFyaXRpZXMgd2lsbCBtYWtlIHRoZSBicm93c2VyIHRocm93IGFuIGVycm9yIG9uIGN0eC5kcmF3SW1hZ2UuYXBwbHlcblxuICB2YXIgeFNjYWxpbmcgPSBnZXRTY2FsZUZhY3RvcihzeCwgc3ggKyBzV2lkdGgsIGR4LCBkeCArIGRXaWR0aCksXG4gICAgICB4U2NhbGUgICA9IG1ha2VTY2FsZSggc3gsIHN4ICsgc1dpZHRoLCBkeCwgZHggKyBkV2lkdGgpLFxuICAgICAgeVNjYWxpbmcgPSBnZXRTY2FsZUZhY3RvcihzeSwgc3kgKyBzSGVpZ2h0LCBkeSwgZHkgKyBkSGVpZ2h0KSxcbiAgICAgIHlTY2FsZSAgID0gbWFrZVNjYWxlKCBzeSwgc3kgKyBzSGVpZ2h0LCBkeSwgZHkgKyBkSGVpZ2h0KTtcblxuICAvLyBUaGVzZSBjYWxscyBhcmUgbW9yZSBjb21wbGV4OlxuICAvLyBhcmNcbiAgLy8gYXJjVG9cbiAgLy8gZWxsaXBzZVxuXG4gIC8vIFRPRE86IGNsaXAgY2FsbHMgb3V0c2lkZSBvZiB0aGUgc291cmNlIHJlY3RhbmdsZS5cbiAgdmFyIHRyYW5zZm9ybUNhbGwgPSBmdW5jdGlvbihvcmlnaW5hbENhbGwpIHtcbiAgICB2YXIgY2FsbCA9IG9yaWdpbmFsQ2FsbC5zbGljZSgpLCAgLy8gbWFrZSBhIGNvcHlcbiAgICAgICAgdHlwZSA9IGNhbGxbMF07XG4gICAgaWYgKHR5cGUgaW4gQ0FMTFNfWFkpIHtcbiAgICAgIHZhciB4eXMgPSBDQUxMU19YWVt0eXBlXTtcbiAgICAgIGlmICh0eXBlb2YoeHlzKSA9PSAnbnVtYmVyJykgeHlzID0gW3h5c107XG4gICAgICB4eXMuZm9yRWFjaChmdW5jdGlvbihwb3MpIHtcbiAgICAgICAgY2FsbFsxICsgcG9zXSA9IHhTY2FsZShjYWxsWzEgKyBwb3NdKTtcbiAgICAgICAgY2FsbFsyICsgcG9zXSA9IHlTY2FsZShjYWxsWzIgKyBwb3NdKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodHlwZSBpbiBDQUxMU19XSCkge1xuICAgICAgdmFyIHdocyA9IENBTExTX1dIW3R5cGVdO1xuICAgICAgaWYgKHR5cGVvZih3aHMpID09ICdudW1iZXInKSB3aHMgPSBbd2hzXTtcbiAgICAgIHdocy5mb3JFYWNoKGZ1bmN0aW9uKHBvcykge1xuICAgICAgICBjYWxsWzEgKyBwb3NdICo9IHhTY2FsaW5nO1xuICAgICAgICBjYWxsWzIgKyBwb3NdICo9IHlTY2FsaW5nO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBjYWxsO1xuICB9O1xuXG4gIHJldHVybiBjYWxscy5tYXAodHJhbnNmb3JtQ2FsbCk7XG59XG5cbi8vIEhlbHBlcnMgZm9yIHRyYW5zZm9ybWVkQ2FsbHNcblxuLy8gTWFwICh4MSwgeDIpIC0tPiAoeTEsIHkyKVxuZnVuY3Rpb24gZ2V0U2NhbGVGYWN0b3IoeDEsIHgyLCB5MSwgeTIpIHtcbiAgcmV0dXJuICh5MiAtIHkxKSAvICh4MiAtIHgxKTtcbn07XG5mdW5jdGlvbiBtYWtlU2NhbGUoeDEsIHgyLCB5MSwgeTIpIHtcbiAgdmFyIHNjYWxlID0gZ2V0U2NhbGVGYWN0b3IoeDEsIHgyLCB5MSwgeTIpO1xuICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB5MSArIHNjYWxlICogKHggLSB4MSk7XG4gIH07XG59O1xuXG4vLyBUaGVzZSBjYWxscyBhbGwgaGF2ZSAoeCwgeSkgYXMgYXJncyBhdCB0aGUgc3BlY2lmaWVkIHBvc2l0aW9ucy5cbnZhciBDQUxMU19YWSA9IHtcbiAgY2xlYXJSZWN0OiAwLFxuICBmaWxsUmVjdDogMCxcbiAgc3Ryb2tlUmVjdDogMCxcbiAgZmlsbFRleHQ6IDEsXG4gIHN0cm9rZVRleHQ6IDEsXG4gIG1vdmVUbzogMCxcbiAgbGluZVRvOiAwLFxuICBiZXppZXJDdXJ2ZVRvOiBbMCwgMiwgNF0sXG4gIHF1YWRyYXRpY0N1cnZlVG86IFswLCAyXSxcbiAgcmVjdDogMFxufTtcbi8vIFRoZXNlIGNhbGxzIGhhdmUgKHdpZHRoLCBoZWlnaHQpIGFzIGFyZ3MgYXQgdGhlIHNwZWNpZmllZCBwb3NpdGlvbnMuXG52YXIgQ0FMTFNfV0ggPSB7XG4gIGNsZWFyUmVjdDogMixcbiAgZmlsbFJlY3Q6IDIsXG4gIHN0cm9rZVJlY3Q6IDIsXG4gIC8vIGZpbGxUZXh0IGhhcyBhbiBvcHRpb25hbCBgbWF4X3dpZHRoYCBwYXJhbVxuICByZWN0OiAyLFxufTtcblxuLyoqXG4gKiBHZXQgYSBsaXN0IG9mIG9iamVjdHMgd2hpY2ggaGF2ZSBiZWVuIHB1c2hlZCB0byB0aGUgZGF0YSBjYW52YXMgdGhhdCBtYXRjaFxuICogdGhlIHBhcnRpY3VsYXIgcHJlZGljYXRlLlxuICogSWYgbm8gcHJlZGljYXRlIGlzIHNwZWNpZmllZCwgYWxsIG9iamVjdHMgYXJlIHJldHVybmVkLlxuICovXG5SZWNvcmRpbmdDb250ZXh0LnByb3RvdHlwZS5kcmF3bk9iamVjdHNXaXRoID0gZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gIGlmICghcHJlZGljYXRlKSBwcmVkaWNhdGUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH07XG4gIHJldHVybiB0aGlzLmNhbGxzT2YoJ3B1c2hPYmplY3QnKVxuICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oeCkgeyByZXR1cm4gcHJlZGljYXRlKHhbMV0pIH0pXG4gICAgICAgICAgICAgLm1hcChmdW5jdGlvbih4KSB7IHJldHVybiB4WzFdOyB9KTtcbn07XG4vLyBUaGlzIHZlcnNpb24gcmVhZHMgYmV0dGVyIGlmIHRoZXJlJ3Mgbm8gcHJlZGljYXRlLlxuUmVjb3JkaW5nQ29udGV4dC5wcm90b3R5cGUuZHJhd25PYmplY3RzID0gUmVjb3JkaW5nQ29udGV4dC5wcm90b3R5cGUuZHJhd25PYmplY3RzV2l0aDtcblxuLyoqXG4gKiBGaW5kIGNhbGxzIG9mIGEgcGFydGljdWxhciB0eXBlLCBlLmcuIGBmaWxsVGV4dGAgb3IgYHB1c2hPYmplY3RgLlxuICpcbiAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIGNhbGxzIGFuZCB0aGVpciBwYXJhbWV0ZXJzLCBlLmcuXG4gKiBbIFsnZmlsbFRleHQnLCAnSGVsbG8hJywgMjAsIDEwXSBdXG4gKi9cblJlY29yZGluZ0NvbnRleHQucHJvdG90eXBlLmNhbGxzT2YgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHJldHVybiB0aGlzLmNhbGxzLmZpbHRlcihmdW5jdGlvbihjYWxsKSB7IHJldHVybiBjYWxsWzBdID09IHR5cGUgfSk7XG59O1xuXG4vKipcbiAqIFN0YXRpYyBtZXRob2QgdG8gYmVnaW4gc3dhcHBpbmcgaW4gUmVjb3JkaW5nQ29udGV4dCBpbiBwbGFjZSBvZiBEYXRhQ29udGV4dC5cbiAqIERvbid0IGZvcmdldCB0byBjYWxsIFJlY29yZGluZ0NvbnRleHQucmVzZXQoKSBhZnRlciB0aGUgdGVzdCBjb21wbGV0ZXMhXG4gKi9cblJlY29yZGluZ0NvbnRleHQucmVjb3JkQWxsID0gZnVuY3Rpb24oKSB7XG4gIGlmIChzdHViR2V0RGF0YUNvbnRleHQgIT0gbnVsbCkge1xuICAgIHRocm93ICdZb3UgZm9yZ290IHRvIGNhbGwgUmVjb3JkaW5nQ29udGV4dC5yZXNldCgpJztcbiAgfVxuICBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycyA9IFtdO1xuICBzdHViR2V0RGF0YUNvbnRleHQgPSBmdW5jdGlvbihjdHgpIHtcbiAgICB2YXIgcmVjb3JkZXIgPSBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVyRm9yQ2FudmFzKGN0eC5jYW52YXMpO1xuICAgIGlmIChyZWNvcmRlcikgcmV0dXJuIHJlY29yZGVyO1xuXG4gICAgcmVjb3JkZXIgPSBuZXcgUmVjb3JkaW5nQ29udGV4dChjdHgpO1xuICAgIFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzLnB1c2goW2N0eC5jYW52YXMsIHJlY29yZGVyXSk7XG4gICAgcmV0dXJuIHJlY29yZGVyO1xuICB9O1xufTtcblxuLyoqXG4gKiBSZXZlcnQgdGhlIHN0dWJiaW5nIHBlcmZvcm1lZCBieSBSZWNvcmRpbmdDb250ZXh0LnJlY29yZEFsbC5cbiAqL1xuUmVjb3JkaW5nQ29udGV4dC5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIXN0dWJHZXREYXRhQ29udGV4dCkge1xuICAgIHRocm93ICdDYWxsZWQgUmVjb3JkaW5nQ29udGV4dC5yZXNldCgpIGJlZm9yZSBSZWNvcmRpbmdDb250ZXh0LnJlY29yZEFsbCgpJztcbiAgfVxuICBzdHViR2V0RGF0YUNvbnRleHQgPSBudWxsO1xuICBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycyA9IG51bGw7XG59O1xuXG4vLyBHZXQgdGhlIHJlY29yZGluZyBjb250ZXh0IGZvciBhIGNhbnZhcy5cblJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJGb3JDYW52YXMgPSBmdW5jdGlvbihjYW52YXMpIHtcbiAgdmFyIHJlY29yZGVycyA9IFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzO1xuICBpZiAocmVjb3JkZXJzID09IG51bGwpIHtcbiAgICB0aHJvdyAnWW91IG11c3QgY2FsbCBSZWNvcmRpbmdDb250ZXh0LnJlY29yZEFsbCgpIGJlZm9yZSB1c2luZyBvdGhlciBSZWNvcmRpbmdDb250ZXh0IHN0YXRpYyBtZXRob2RzJztcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY29yZGVycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciByID0gcmVjb3JkZXJzW2ldO1xuICAgIGlmIChyWzBdID09IGNhbnZhcykgcmV0dXJuIHJbMV07XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgcmVjb3JkaW5nIGNvbnRleHQgZm9yIGEgY2FudmFzIGluc2lkZSBvZiBkaXYucXVlcnlTZWxlY3RvcihzZWxlY3RvcikuXG4gKlxuICogVGhpcyBpcyB1c2VmdWwgd2hlbiB5b3UgaGF2ZSBhIHRlc3QgZGl2IGFuZCBzZXZlcmFsIGNhbnZhc2VzLlxuICovXG5SZWNvcmRpbmdDb250ZXh0LnJlY29yZGVyRm9yU2VsZWN0b3IgPSBmdW5jdGlvbihkaXYsIHNlbGVjdG9yKSB7XG4gIHZhciBjYW52YXMgPSBkaXYucXVlcnlTZWxlY3RvcihzZWxlY3RvciArICcgY2FudmFzJykgfHwgZGl2LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICBpZiAoIWNhbnZhcykge1xuICAgIHRocm93ICdVbmFibGUgdG8gZmluZCBhIGNhbnZhcyBtYXRjaGluZyAnICsgc2VsZWN0b3I7XG4gIH0gZWxzZSBpZiAoIShjYW52YXMgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkpIHtcbiAgICB0aHJvdyAnU2VsZWN0b3IgJyArIHNlbGVjdG9yICsgJyBuZWl0aGVyIG1hdGNoZXMgbm9yIGNvbnRhaW5zIGEgY2FudmFzJztcbiAgfVxuICByZXR1cm4gUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlckZvckNhbnZhcyhjYW52YXMpO1xufTtcblxuLy8gUmVzb2x2ZXMgYXJndW1lbnRzIGZvciBSZWNvcmRpbmdDb250ZXh0IGhlbHBlcnMuXG4vLyBZb3UgY2FuIGVpdGhlciBzcGVjaWZ5IGEgZGl2ICYgc2VsZWN0b3IgdG8gZmluZCB0aGUgY2FudmFzLCBvciBvbWl0IHRoaXMgaWZcbi8vIHRoZXJlJ3Mgb25seSBvbmUgY2FudmFzIGJlaW5nIHJlY29yZGVkLlxuZnVuY3Rpb24gZmluZFJlY29yZGVyKGRpdiwgc2VsZWN0b3IpIHtcbiAgaWYgKCFkaXYpIHtcbiAgICBpZiAoIVJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzKSB7XG4gICAgICB0aHJvdyAnWW91IG11c3QgY2FsbCBSZWNvcmRpbmdDb250ZXh0LnJlY29yZEFsbCgpIGJlZm9yZSB1c2luZyBvdGhlciBSZWNvcmRpbmdDb250ZXh0IHN0YXRpYyBtZXRob2RzJztcbiAgICB9IGVsc2UgaWYgKFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzLmxlbmd0aCA9PSAwKSB7XG4gICAgICB0aHJvdyAnQ2FsbGVkIGEgUmVjb3JkaW5nQ29udGV4dCBtZXRob2QsIGJ1dCBubyBjYW52YXNlcyBhcmUgYmVpbmcgcmVjb3JkZWQuJztcbiAgICB9IGVsc2UgaWYgKFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHRocm93ICdDYWxsZWQgYSBSZWNvcmRpbmdDb250ZXh0IG1ldGhvZCB3aGlsZSBtdWx0aXBsZSBjYW52YXNlcyB3ZXJlIGJlaW5nIHJlY29yZGVkLiBTcGVjaWZ5IG9uZSB1c2luZyBhIGRpdiBhbmQgc2VsZWN0b3IuJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzWzBdWzFdO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlckZvclNlbGVjdG9yKGRpdiwgc2VsZWN0b3IpO1xuICB9XG59XG5cbi8vIEZpbmQgb2JqZWN0cyBwdXNoZWQgb250byBhIHBhcnRpY3VsYXIgcmVjb3JkZWQgY2FudmFzLlxuUmVjb3JkaW5nQ29udGV4dC5kcmF3bk9iamVjdHNXaXRoID0gZnVuY3Rpb24oZGl2LCBzZWxlY3RvciwgcHJlZGljYXRlKSB7XG4gIC8vIENoZWNrIGZvciB0aGUgemVyby1hcmd1bWVudCBvciBvbmUtYXJndW1lbnQgdmVyc2lvbi5cbiAgaWYgKHR5cGVvZihkaXYpID09ICdmdW5jdGlvbicgfHwgYXJndW1lbnRzLmxlbmd0aCA9PSAwKSB7XG4gICAgcHJlZGljYXRlID0gZGl2O1xuICAgIGRpdiA9IG51bGw7XG4gIH1cbiAgdmFyIHJlY29yZGVyID0gZmluZFJlY29yZGVyKGRpdiwgc2VsZWN0b3IpO1xuICBwcmVkaWNhdGUgPSBwcmVkaWNhdGUgfHwgZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9O1xuICByZXR1cm4gcmVjb3JkZXIgPyByZWNvcmRlci5kcmF3bk9iamVjdHNXaXRoKHByZWRpY2F0ZSkgOiBbXTtcbn07XG5cbi8vIFRoaXMgdmVyc2lvbiByZWFkcyBiZXR0ZXIgaWYgdGhlcmUncyBubyBwcmVkaWNhdGUuXG5SZWNvcmRpbmdDb250ZXh0LmRyYXduT2JqZWN0cyA9IFJlY29yZGluZ0NvbnRleHQuZHJhd25PYmplY3RzV2l0aDtcblxuLy8gRmluZCBjYWxscyBvZiBwYXJ0aWN1bGFyIGRyYXdpbmcgZnVuY3Rpb25zIChlLmcuIGZpbGxUZXh0KVxuUmVjb3JkaW5nQ29udGV4dC5jYWxsc09mID0gZnVuY3Rpb24gKGRpdiwgc2VsZWN0b3IsIHR5cGUpIHtcbiAgLy8gQ2hlY2sgZm9yIHRoZSBvbmUtYXJndW1lbnQgdmVyc2lvbi5cbiAgaWYgKHR5cGVvZihkaXYpID09ICdzdHJpbmcnKSB7XG4gICAgdHlwZSA9IGRpdjtcbiAgICBkaXYgPSBudWxsO1xuICB9XG4gIHZhciByZWNvcmRlciA9IGZpbmRSZWNvcmRlcihkaXYsIHNlbGVjdG9yKTtcbiAgcmV0dXJuIHJlY29yZGVyID8gcmVjb3JkZXIuY2FsbHNPZih0eXBlKSA6IFtdO1xufTtcblxuXG4vKipcbiAqIEEgY29udGV4dCB3aGljaCBkZXRlcm1pbmVzIHRoZSBkYXRhIGF0IGEgcGFydGljdWxhciBsb2NhdGlvbi5cbiAqXG4gKiBXaGVuIGRyYXdpbmcgbWV0aG9kcyBhcmUgY2FsbGVkIG9uIHRoaXMgY2xhc3MsIG5vdGhpbmcgaXMgcmVuZGVyZWQuIEluc3RlYWQsXG4gKiBlYWNoIHNoYXBlIGlzIGNoZWNrZWQgdG8gc2VlIGlmIGl0IGluY2x1ZGVzIHRoZSBwb2ludCBvZiBpbnRlcmVzdC4gSWYgaXRcbiAqIGRvZXMsIHRoZSBjdXJyZW50IGRhdGEgc3RhY2sgaXMgc2F2ZWQgYXMgYSBcImhpdFwiLlxuICpcbiAqIFRoZSBgaGl0c2AgcHJvcGVydHkgcmVjb3JkcyBhbGwgc3VjaCBoaXRzLlxuICogVGhlIGBoaXRgIHByb3BlcnR5IHJlY29yZHMgb25seSB0aGUgbGFzdCAodG9wKSBoaXQuXG4gKi9cbmZ1bmN0aW9uIENsaWNrVHJhY2tpbmdDb250ZXh0KGN0eCwgcHgsIHB5KSB7XG4gIGZvcndhcmQodGhpcywgY3R4KTtcblxuICB2YXIgc3RhY2sgPSBbXTtcbiAgdGhpcy5oaXRzID0gW107XG4gIHRoaXMuaGl0ID0gbnVsbDtcbiAgXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgZnVuY3Rpb24gcmVjb3JkSGl0KCkge1xuICAgIHRoYXQuaGl0cy51bnNoaWZ0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHN0YWNrKSk7XG4gICAgdGhhdC5oaXQgPSB0aGF0LmhpdHNbMF07XG4gIH1cblxuICB0aGlzLnB1c2hPYmplY3QgPSBmdW5jdGlvbihvKSB7XG4gICAgc3RhY2sudW5zaGlmdChvKTtcbiAgfTtcbiAgXG4gIHRoaXMucG9wT2JqZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgc3RhY2suc2hpZnQoKTtcbiAgfTtcblxuICB0aGlzLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5oaXRzID0gW107XG4gICAgdGhpcy5oaXQgPSBudWxsO1xuICB9O1xuXG4gIC8vIFRoZXNlIGFyZSAobW9zdCBvZikgdGhlIGNhbnZhcyBtZXRob2RzIHdoaWNoIGRyYXcgc29tZXRoaW5nLlxuICAvLyBUT0RPOiB3b3VsZCBpdCBtYWtlIHNlbnNlIHRvIHB1cmdlIGV4aXN0aW5nIGhpdHMgY292ZXJlZCBieSB0aGlzP1xuICB0aGlzLmNsZWFyUmVjdCA9IGZ1bmN0aW9uKHgsIHksIHcsIGgpIHsgfTtcblxuICB0aGlzLmZpbGxSZWN0ID0gZnVuY3Rpb24oeCwgeSwgdywgaCkge1xuICAgIGlmIChweCA+PSB4ICYmIHB4IDw9IHggKyB3ICYmIHB5ID49IHkgJiYgcHkgPD0geSArIGgpIHJlY29yZEhpdCgpO1xuICB9O1xuXG4gIHRoaXMuc3Ryb2tlUmVjdCA9IGZ1bmN0aW9uKHgsIHksIHcsIGgpIHtcbiAgICAvLyAuLi5cbiAgfTtcblxuICB0aGlzLmZpbGwgPSBmdW5jdGlvbihmaWxsUnVsZSkge1xuICAgIC8vIFRPRE86IGltcGxlbWVudCBmaWxsUnVsZVxuICAgIGlmIChjdHguaXNQb2ludEluUGF0aChweCwgcHkpKSByZWNvcmRIaXQoKTtcbiAgfTtcblxuICB0aGlzLnN0cm9rZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChjdHguaXNQb2ludEluU3Ryb2tlKHB4LCBweSkpIHJlY29yZEhpdCgpO1xuICB9O1xuXG4gIHRoaXMuZmlsbFRleHQgPSBmdW5jdGlvbih0ZXh0LCB4LCB5LCBtYXhXaWR0aCkge1xuICAgIC8vIC4uLlxuICB9O1xuXG4gIHRoaXMuc3Ryb2tlVGV4dCA9IGZ1bmN0aW9uKHRleHQsIHgsIHksIG1heFdpZHRoKSB7XG4gICAgLy8gLi4uXG4gIH07XG59XG5cbnZhciBleHBvcnRzID0ge1xuICBEYXRhQ29udGV4dDogRGF0YUNvbnRleHQsXG4gIFJlY29yZGluZ0NvbnRleHQ6IFJlY29yZGluZ0NvbnRleHQsXG4gIENsaWNrVHJhY2tpbmdDb250ZXh0OiBDbGlja1RyYWNraW5nQ29udGV4dCxcbiAgZ2V0RGF0YUNvbnRleHQ6IGdldERhdGFDb250ZXh0XG59O1xuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbn0gZWxzZSB7XG4gIHdpbmRvdy5kYXRhQ2FudmFzID0gZXhwb3J0cztcbn1cblxufSkoKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRMaXN0ZW5lclxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9lbXB0eUZ1bmN0aW9uJyk7XG5cbi8qKlxuICogVXBzdHJlYW0gdmVyc2lvbiBvZiBldmVudCBsaXN0ZW5lci4gRG9lcyBub3QgdGFrZSBpbnRvIGFjY291bnQgc3BlY2lmaWNcbiAqIG5hdHVyZSBvZiBwbGF0Zm9ybS5cbiAqL1xudmFyIEV2ZW50TGlzdGVuZXIgPSB7XG4gIC8qKlxuICAgKiBMaXN0ZW4gdG8gRE9NIGV2ZW50cyBkdXJpbmcgdGhlIGJ1YmJsZSBwaGFzZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdGFyZ2V0IERPTSBlbGVtZW50IHRvIHJlZ2lzdGVyIGxpc3RlbmVyIG9uLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlIEV2ZW50IHR5cGUsIGUuZy4gJ2NsaWNrJyBvciAnbW91c2VvdmVyJy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2sgZnVuY3Rpb24uXG4gICAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IHdpdGggYSBgcmVtb3ZlYCBtZXRob2QuXG4gICAqL1xuICBsaXN0ZW46IGZ1bmN0aW9uICh0YXJnZXQsIGV2ZW50VHlwZSwgY2FsbGJhY2spIHtcbiAgICBpZiAodGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2FsbGJhY2ssIGZhbHNlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2FsbGJhY2ssIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHRhcmdldC5hdHRhY2hFdmVudCkge1xuICAgICAgdGFyZ2V0LmF0dGFjaEV2ZW50KCdvbicgKyBldmVudFR5cGUsIGNhbGxiYWNrKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRhcmdldC5kZXRhY2hFdmVudCgnb24nICsgZXZlbnRUeXBlLCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBMaXN0ZW4gdG8gRE9NIGV2ZW50cyBkdXJpbmcgdGhlIGNhcHR1cmUgcGhhc2UuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRhcmdldCBET00gZWxlbWVudCB0byByZWdpc3RlciBsaXN0ZW5lciBvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZSBFdmVudCB0eXBlLCBlLmcuICdjbGljaycgb3IgJ21vdXNlb3ZlcicuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrIGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IE9iamVjdCB3aXRoIGEgYHJlbW92ZWAgbWV0aG9kLlxuICAgKi9cbiAgY2FwdHVyZTogZnVuY3Rpb24gKHRhcmdldCwgZXZlbnRUeXBlLCBjYWxsYmFjaykge1xuICAgIGlmICh0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQXR0ZW1wdGVkIHRvIGxpc3RlbiB0byBldmVudHMgZHVyaW5nIHRoZSBjYXB0dXJlIHBoYXNlIG9uIGEgJyArICdicm93c2VyIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCB0aGUgY2FwdHVyZSBwaGFzZS4gWW91ciBhcHBsaWNhdGlvbiAnICsgJ3dpbGwgbm90IHJlY2VpdmUgc29tZSBldmVudHMuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmU6IGVtcHR5RnVuY3Rpb25cbiAgICAgIH07XG4gICAgfVxuICB9LFxuXG4gIHJlZ2lzdGVyRGVmYXVsdDogZnVuY3Rpb24gKCkge31cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRMaXN0ZW5lcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXhlY3V0aW9uRW52aXJvbm1lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBjYW5Vc2VET00gPSAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQgJiYgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xuXG4vKipcbiAqIFNpbXBsZSwgbGlnaHR3ZWlnaHQgbW9kdWxlIGFzc2lzdGluZyB3aXRoIHRoZSBkZXRlY3Rpb24gYW5kIGNvbnRleHQgb2ZcbiAqIFdvcmtlci4gSGVscHMgYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jaWVzIGFuZCBhbGxvd3MgY29kZSB0byByZWFzb24gYWJvdXRcbiAqIHdoZXRoZXIgb3Igbm90IHRoZXkgYXJlIGluIGEgV29ya2VyLCBldmVuIGlmIHRoZXkgbmV2ZXIgaW5jbHVkZSB0aGUgbWFpblxuICogYFJlYWN0V29ya2VyYCBkZXBlbmRlbmN5LlxuICovXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSB7XG5cbiAgY2FuVXNlRE9NOiBjYW5Vc2VET00sXG5cbiAgY2FuVXNlV29ya2VyczogdHlwZW9mIFdvcmtlciAhPT0gJ3VuZGVmaW5lZCcsXG5cbiAgY2FuVXNlRXZlbnRMaXN0ZW5lcnM6IGNhblVzZURPTSAmJiAhISh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciB8fCB3aW5kb3cuYXR0YWNoRXZlbnQpLFxuXG4gIGNhblVzZVZpZXdwb3J0OiBjYW5Vc2VET00gJiYgISF3aW5kb3cuc2NyZWVuLFxuXG4gIGlzSW5Xb3JrZXI6ICFjYW5Vc2VET00gLy8gRm9yIG5vdywgdGhpcyBpcyB0cnVlIC0gbWlnaHQgY2hhbmdlIGluIHRoZSBmdXR1cmUuXG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXhlY3V0aW9uRW52aXJvbm1lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGNhbWVsaXplXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgX2h5cGhlblBhdHRlcm4gPSAvLSguKS9nO1xuXG4vKipcbiAqIENhbWVsY2FzZXMgYSBoeXBoZW5hdGVkIHN0cmluZywgZm9yIGV4YW1wbGU6XG4gKlxuICogICA+IGNhbWVsaXplKCdiYWNrZ3JvdW5kLWNvbG9yJylcbiAqICAgPCBcImJhY2tncm91bmRDb2xvclwiXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBjYW1lbGl6ZShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKF9oeXBoZW5QYXR0ZXJuLCBmdW5jdGlvbiAoXywgY2hhcmFjdGVyKSB7XG4gICAgcmV0dXJuIGNoYXJhY3Rlci50b1VwcGVyQ2FzZSgpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjYW1lbGl6ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgY2FtZWxpemVTdHlsZU5hbWVcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FtZWxpemUgPSByZXF1aXJlKCcuL2NhbWVsaXplJyk7XG5cbnZhciBtc1BhdHRlcm4gPSAvXi1tcy0vO1xuXG4vKipcbiAqIENhbWVsY2FzZXMgYSBoeXBoZW5hdGVkIENTUyBwcm9wZXJ0eSBuYW1lLCBmb3IgZXhhbXBsZTpcbiAqXG4gKiAgID4gY2FtZWxpemVTdHlsZU5hbWUoJ2JhY2tncm91bmQtY29sb3InKVxuICogICA8IFwiYmFja2dyb3VuZENvbG9yXCJcbiAqICAgPiBjYW1lbGl6ZVN0eWxlTmFtZSgnLW1vei10cmFuc2l0aW9uJylcbiAqICAgPCBcIk1velRyYW5zaXRpb25cIlxuICogICA+IGNhbWVsaXplU3R5bGVOYW1lKCctbXMtdHJhbnNpdGlvbicpXG4gKiAgIDwgXCJtc1RyYW5zaXRpb25cIlxuICpcbiAqIEFzIEFuZGkgU21pdGggc3VnZ2VzdHNcbiAqIChodHRwOi8vd3d3LmFuZGlzbWl0aC5jb20vYmxvZy8yMDEyLzAyL21vZGVybml6ci1wcmVmaXhlZC8pLCBhbiBgLW1zYCBwcmVmaXhcbiAqIGlzIGNvbnZlcnRlZCB0byBsb3dlcmNhc2UgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGNhbWVsaXplU3R5bGVOYW1lKHN0cmluZykge1xuICByZXR1cm4gY2FtZWxpemUoc3RyaW5nLnJlcGxhY2UobXNQYXR0ZXJuLCAnbXMtJykpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNhbWVsaXplU3R5bGVOYW1lOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBjb250YWluc05vZGVcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNUZXh0Tm9kZSA9IHJlcXVpcmUoJy4vaXNUZXh0Tm9kZScpO1xuXG4vKmVzbGludC1kaXNhYmxlIG5vLWJpdHdpc2UgKi9cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBnaXZlbiBET00gbm9kZSBjb250YWlucyBvciBpcyBhbm90aGVyIERPTSBub2RlLlxuICpcbiAqIEBwYXJhbSB7P0RPTU5vZGV9IG91dGVyTm9kZSBPdXRlciBET00gbm9kZS5cbiAqIEBwYXJhbSB7P0RPTU5vZGV9IGlubmVyTm9kZSBJbm5lciBET00gbm9kZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYG91dGVyTm9kZWAgY29udGFpbnMgb3IgaXMgYGlubmVyTm9kZWAuXG4gKi9cbmZ1bmN0aW9uIGNvbnRhaW5zTm9kZShfeCwgX3gyKSB7XG4gIHZhciBfYWdhaW4gPSB0cnVlO1xuXG4gIF9mdW5jdGlvbjogd2hpbGUgKF9hZ2Fpbikge1xuICAgIHZhciBvdXRlck5vZGUgPSBfeCxcbiAgICAgICAgaW5uZXJOb2RlID0gX3gyO1xuICAgIF9hZ2FpbiA9IGZhbHNlO1xuXG4gICAgaWYgKCFvdXRlck5vZGUgfHwgIWlubmVyTm9kZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAob3V0ZXJOb2RlID09PSBpbm5lck5vZGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoaXNUZXh0Tm9kZShvdXRlck5vZGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChpc1RleHROb2RlKGlubmVyTm9kZSkpIHtcbiAgICAgIF94ID0gb3V0ZXJOb2RlO1xuICAgICAgX3gyID0gaW5uZXJOb2RlLnBhcmVudE5vZGU7XG4gICAgICBfYWdhaW4gPSB0cnVlO1xuICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuICAgIH0gZWxzZSBpZiAob3V0ZXJOb2RlLmNvbnRhaW5zKSB7XG4gICAgICByZXR1cm4gb3V0ZXJOb2RlLmNvbnRhaW5zKGlubmVyTm9kZSk7XG4gICAgfSBlbHNlIGlmIChvdXRlck5vZGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24pIHtcbiAgICAgIHJldHVybiAhIShvdXRlck5vZGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oaW5uZXJOb2RlKSAmIDE2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRhaW5zTm9kZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgY3JlYXRlQXJyYXlGcm9tTWl4ZWRcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdG9BcnJheSA9IHJlcXVpcmUoJy4vdG9BcnJheScpO1xuXG4vKipcbiAqIFBlcmZvcm0gYSBoZXVyaXN0aWMgdGVzdCB0byBkZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGlzIFwiYXJyYXktbGlrZVwiLlxuICpcbiAqICAgQSBtb25rIGFza2VkIEpvc2h1LCBhIFplbiBtYXN0ZXIsIFwiSGFzIGEgZG9nIEJ1ZGRoYSBuYXR1cmU/XCJcbiAqICAgSm9zaHUgcmVwbGllZDogXCJNdS5cIlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZGV0ZXJtaW5lcyBpZiBpdHMgYXJndW1lbnQgaGFzIFwiYXJyYXkgbmF0dXJlXCI6IGl0IHJldHVybnNcbiAqIHRydWUgaWYgdGhlIGFyZ3VtZW50IGlzIGFuIGFjdHVhbCBhcnJheSwgYW4gYGFyZ3VtZW50cycgb2JqZWN0LCBvciBhblxuICogSFRNTENvbGxlY3Rpb24gKGUuZy4gbm9kZS5jaGlsZE5vZGVzIG9yIG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoKSkuXG4gKlxuICogSXQgd2lsbCByZXR1cm4gZmFsc2UgZm9yIG90aGVyIGFycmF5LWxpa2Ugb2JqZWN0cyBsaWtlIEZpbGVsaXN0LlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBoYXNBcnJheU5hdHVyZShvYmopIHtcbiAgcmV0dXJuKFxuICAgIC8vIG5vdCBudWxsL2ZhbHNlXG4gICAgISFvYmogJiYgKFxuICAgIC8vIGFycmF5cyBhcmUgb2JqZWN0cywgTm9kZUxpc3RzIGFyZSBmdW5jdGlvbnMgaW4gU2FmYXJpXG4gICAgdHlwZW9mIG9iaiA9PSAnb2JqZWN0JyB8fCB0eXBlb2Ygb2JqID09ICdmdW5jdGlvbicpICYmXG4gICAgLy8gcXVhY2tzIGxpa2UgYW4gYXJyYXlcbiAgICAnbGVuZ3RoJyBpbiBvYmogJiZcbiAgICAvLyBub3Qgd2luZG93XG4gICAgISgnc2V0SW50ZXJ2YWwnIGluIG9iaikgJiZcbiAgICAvLyBubyBET00gbm9kZSBzaG91bGQgYmUgY29uc2lkZXJlZCBhbiBhcnJheS1saWtlXG4gICAgLy8gYSAnc2VsZWN0JyBlbGVtZW50IGhhcyAnbGVuZ3RoJyBhbmQgJ2l0ZW0nIHByb3BlcnRpZXMgb24gSUU4XG4gICAgdHlwZW9mIG9iai5ub2RlVHlwZSAhPSAnbnVtYmVyJyAmJiAoXG4gICAgLy8gYSByZWFsIGFycmF5XG4gICAgQXJyYXkuaXNBcnJheShvYmopIHx8XG4gICAgLy8gYXJndW1lbnRzXG4gICAgJ2NhbGxlZScgaW4gb2JqIHx8XG4gICAgLy8gSFRNTENvbGxlY3Rpb24vTm9kZUxpc3RcbiAgICAnaXRlbScgaW4gb2JqKVxuICApO1xufVxuXG4vKipcbiAqIEVuc3VyZSB0aGF0IHRoZSBhcmd1bWVudCBpcyBhbiBhcnJheSBieSB3cmFwcGluZyBpdCBpbiBhbiBhcnJheSBpZiBpdCBpcyBub3QuXG4gKiBDcmVhdGVzIGEgY29weSBvZiB0aGUgYXJndW1lbnQgaWYgaXQgaXMgYWxyZWFkeSBhbiBhcnJheS5cbiAqXG4gKiBUaGlzIGlzIG1vc3RseSB1c2VmdWwgaWRpb21hdGljYWxseTpcbiAqXG4gKiAgIHZhciBjcmVhdGVBcnJheUZyb21NaXhlZCA9IHJlcXVpcmUoJ2NyZWF0ZUFycmF5RnJvbU1peGVkJyk7XG4gKlxuICogICBmdW5jdGlvbiB0YWtlc09uZU9yTW9yZVRoaW5ncyh0aGluZ3MpIHtcbiAqICAgICB0aGluZ3MgPSBjcmVhdGVBcnJheUZyb21NaXhlZCh0aGluZ3MpO1xuICogICAgIC4uLlxuICogICB9XG4gKlxuICogVGhpcyBhbGxvd3MgeW91IHRvIHRyZWF0IGB0aGluZ3MnIGFzIGFuIGFycmF5LCBidXQgYWNjZXB0IHNjYWxhcnMgaW4gdGhlIEFQSS5cbiAqXG4gKiBJZiB5b3UgbmVlZCB0byBjb252ZXJ0IGFuIGFycmF5LWxpa2Ugb2JqZWN0LCBsaWtlIGBhcmd1bWVudHNgLCBpbnRvIGFuIGFycmF5XG4gKiB1c2UgdG9BcnJheSBpbnN0ZWFkLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHthcnJheX1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQXJyYXlGcm9tTWl4ZWQob2JqKSB7XG4gIGlmICghaGFzQXJyYXlOYXR1cmUob2JqKSkge1xuICAgIHJldHVybiBbb2JqXTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICByZXR1cm4gb2JqLnNsaWNlKCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRvQXJyYXkob2JqKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUFycmF5RnJvbU1peGVkOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBjcmVhdGVOb2Rlc0Zyb21NYXJrdXBcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuLyplc2xpbnQtZGlzYWJsZSBmYi13d3cvdW5zYWZlLWh0bWwqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIGNyZWF0ZUFycmF5RnJvbU1peGVkID0gcmVxdWlyZSgnLi9jcmVhdGVBcnJheUZyb21NaXhlZCcpO1xudmFyIGdldE1hcmt1cFdyYXAgPSByZXF1aXJlKCcuL2dldE1hcmt1cFdyYXAnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCcuL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIER1bW15IGNvbnRhaW5lciB1c2VkIHRvIHJlbmRlciBhbGwgbWFya3VwLlxuICovXG52YXIgZHVtbXlOb2RlID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgOiBudWxsO1xuXG4vKipcbiAqIFBhdHRlcm4gdXNlZCBieSBgZ2V0Tm9kZU5hbWVgLlxuICovXG52YXIgbm9kZU5hbWVQYXR0ZXJuID0gL15cXHMqPChcXHcrKS87XG5cbi8qKlxuICogRXh0cmFjdHMgdGhlIGBub2RlTmFtZWAgb2YgdGhlIGZpcnN0IGVsZW1lbnQgaW4gYSBzdHJpbmcgb2YgbWFya3VwLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgU3RyaW5nIG9mIG1hcmt1cC5cbiAqIEByZXR1cm4gez9zdHJpbmd9IE5vZGUgbmFtZSBvZiB0aGUgc3VwcGxpZWQgbWFya3VwLlxuICovXG5mdW5jdGlvbiBnZXROb2RlTmFtZShtYXJrdXApIHtcbiAgdmFyIG5vZGVOYW1lTWF0Y2ggPSBtYXJrdXAubWF0Y2gobm9kZU5hbWVQYXR0ZXJuKTtcbiAgcmV0dXJuIG5vZGVOYW1lTWF0Y2ggJiYgbm9kZU5hbWVNYXRjaFsxXS50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgY29udGFpbmluZyB0aGUgbm9kZXMgcmVuZGVyZWQgZnJvbSB0aGUgc3VwcGxpZWQgbWFya3VwLiBUaGVcbiAqIG9wdGlvbmFsbHkgc3VwcGxpZWQgYGhhbmRsZVNjcmlwdGAgZnVuY3Rpb24gd2lsbCBiZSBpbnZva2VkIG9uY2UgZm9yIGVhY2hcbiAqIDxzY3JpcHQ+IGVsZW1lbnQgdGhhdCBpcyByZW5kZXJlZC4gSWYgbm8gYGhhbmRsZVNjcmlwdGAgZnVuY3Rpb24gaXMgc3VwcGxpZWQsXG4gKiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIGFueSA8c2NyaXB0PiBlbGVtZW50cyBhcmUgcmVuZGVyZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBBIHN0cmluZyBvZiB2YWxpZCBIVE1MIG1hcmt1cC5cbiAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBoYW5kbGVTY3JpcHQgSW52b2tlZCBvbmNlIGZvciBlYWNoIHJlbmRlcmVkIDxzY3JpcHQ+LlxuICogQHJldHVybiB7YXJyYXk8RE9NRWxlbWVudHxET01UZXh0Tm9kZT59IEFuIGFycmF5IG9mIHJlbmRlcmVkIG5vZGVzLlxuICovXG5mdW5jdGlvbiBjcmVhdGVOb2Rlc0Zyb21NYXJrdXAobWFya3VwLCBoYW5kbGVTY3JpcHQpIHtcbiAgdmFyIG5vZGUgPSBkdW1teU5vZGU7XG4gICEhIWR1bW15Tm9kZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdjcmVhdGVOb2Rlc0Zyb21NYXJrdXAgZHVtbXkgbm90IGluaXRpYWxpemVkJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB2YXIgbm9kZU5hbWUgPSBnZXROb2RlTmFtZShtYXJrdXApO1xuXG4gIHZhciB3cmFwID0gbm9kZU5hbWUgJiYgZ2V0TWFya3VwV3JhcChub2RlTmFtZSk7XG4gIGlmICh3cmFwKSB7XG4gICAgbm9kZS5pbm5lckhUTUwgPSB3cmFwWzFdICsgbWFya3VwICsgd3JhcFsyXTtcblxuICAgIHZhciB3cmFwRGVwdGggPSB3cmFwWzBdO1xuICAgIHdoaWxlICh3cmFwRGVwdGgtLSkge1xuICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBub2RlLmlubmVySFRNTCA9IG1hcmt1cDtcbiAgfVxuXG4gIHZhciBzY3JpcHRzID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XG4gIGlmIChzY3JpcHRzLmxlbmd0aCkge1xuICAgICFoYW5kbGVTY3JpcHQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnY3JlYXRlTm9kZXNGcm9tTWFya3VwKC4uLik6IFVuZXhwZWN0ZWQgPHNjcmlwdD4gZWxlbWVudCByZW5kZXJlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgY3JlYXRlQXJyYXlGcm9tTWl4ZWQoc2NyaXB0cykuZm9yRWFjaChoYW5kbGVTY3JpcHQpO1xuICB9XG5cbiAgdmFyIG5vZGVzID0gY3JlYXRlQXJyYXlGcm9tTWl4ZWQobm9kZS5jaGlsZE5vZGVzKTtcbiAgd2hpbGUgKG5vZGUubGFzdENoaWxkKSB7XG4gICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmxhc3RDaGlsZCk7XG4gIH1cbiAgcmV0dXJuIG5vZGVzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZU5vZGVzRnJvbU1hcmt1cDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZW1wdHlGdW5jdGlvblxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBtYWtlRW1wdHlGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYXJnO1xuICB9O1xufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gYWNjZXB0cyBhbmQgZGlzY2FyZHMgaW5wdXRzOyBpdCBoYXMgbm8gc2lkZSBlZmZlY3RzLiBUaGlzIGlzXG4gKiBwcmltYXJpbHkgdXNlZnVsIGlkaW9tYXRpY2FsbHkgZm9yIG92ZXJyaWRhYmxlIGZ1bmN0aW9uIGVuZHBvaW50cyB3aGljaFxuICogYWx3YXlzIG5lZWQgdG8gYmUgY2FsbGFibGUsIHNpbmNlIEpTIGxhY2tzIGEgbnVsbC1jYWxsIGlkaW9tIGFsYSBDb2NvYS5cbiAqL1xuZnVuY3Rpb24gZW1wdHlGdW5jdGlvbigpIHt9XG5cbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnMgPSBtYWtlRW1wdHlGdW5jdGlvbjtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNGYWxzZSA9IG1ha2VFbXB0eUZ1bmN0aW9uKGZhbHNlKTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlID0gbWFrZUVtcHR5RnVuY3Rpb24odHJ1ZSk7XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zTnVsbCA9IG1ha2VFbXB0eUZ1bmN0aW9uKG51bGwpO1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RoaXMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzO1xufTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNBcmd1bWVudCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgcmV0dXJuIGFyZztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZW1wdHlGdW5jdGlvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZW1wdHlPYmplY3RcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlbXB0eU9iamVjdCA9IHt9O1xuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICBPYmplY3QuZnJlZXplKGVtcHR5T2JqZWN0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlbXB0eU9iamVjdDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZm9jdXNOb2RlXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZSBpbnB1dC90ZXh0YXJlYSB0byBmb2N1c1xuICovXG5mdW5jdGlvbiBmb2N1c05vZGUobm9kZSkge1xuICAvLyBJRTggY2FuIHRocm93IFwiQ2FuJ3QgbW92ZSBmb2N1cyB0byB0aGUgY29udHJvbCBiZWNhdXNlIGl0IGlzIGludmlzaWJsZSxcbiAgLy8gbm90IGVuYWJsZWQsIG9yIG9mIGEgdHlwZSB0aGF0IGRvZXMgbm90IGFjY2VwdCB0aGUgZm9jdXMuXCIgZm9yIGFsbCBraW5kcyBvZlxuICAvLyByZWFzb25zIHRoYXQgYXJlIHRvbyBleHBlbnNpdmUgYW5kIGZyYWdpbGUgdG8gdGVzdC5cbiAgdHJ5IHtcbiAgICBub2RlLmZvY3VzKCk7XG4gIH0gY2F0Y2ggKGUpIHt9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZm9jdXNOb2RlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRBY3RpdmVFbGVtZW50XG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbi8qIGVzbGludC1kaXNhYmxlIGZiLXd3dy90eXBlb2YtdW5kZWZpbmVkICovXG5cbi8qKlxuICogU2FtZSBhcyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGJ1dCB3cmFwcyBpbiBhIHRyeS1jYXRjaCBibG9jay4gSW4gSUUgaXQgaXNcbiAqIG5vdCBzYWZlIHRvIGNhbGwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBpZiB0aGVyZSBpcyBub3RoaW5nIGZvY3VzZWQuXG4gKlxuICogVGhlIGFjdGl2ZUVsZW1lbnQgd2lsbCBiZSBudWxsIG9ubHkgaWYgdGhlIGRvY3VtZW50IG9yIGRvY3VtZW50IGJvZHkgaXMgbm90XG4gKiB5ZXQgZGVmaW5lZC5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBnZXRBY3RpdmVFbGVtZW50KCkgLyo/RE9NRWxlbWVudCove1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5ib2R5O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0QWN0aXZlRWxlbWVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0TWFya3VwV3JhcFxuICovXG5cbi8qZXNsaW50LWRpc2FibGUgZmItd3d3L3Vuc2FmZS1odG1sICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnLi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBEdW1teSBjb250YWluZXIgdXNlZCB0byBkZXRlY3Qgd2hpY2ggd3JhcHMgYXJlIG5lY2Vzc2FyeS5cbiAqL1xudmFyIGR1bW15Tm9kZSA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpIDogbnVsbDtcblxuLyoqXG4gKiBTb21lIGJyb3dzZXJzIGNhbm5vdCB1c2UgYGlubmVySFRNTGAgdG8gcmVuZGVyIGNlcnRhaW4gZWxlbWVudHMgc3RhbmRhbG9uZSxcbiAqIHNvIHdlIHdyYXAgdGhlbSwgcmVuZGVyIHRoZSB3cmFwcGVkIG5vZGVzLCB0aGVuIGV4dHJhY3QgdGhlIGRlc2lyZWQgbm9kZS5cbiAqXG4gKiBJbiBJRTgsIGNlcnRhaW4gZWxlbWVudHMgY2Fubm90IHJlbmRlciBhbG9uZSwgc28gd3JhcCBhbGwgZWxlbWVudHMgKCcqJykuXG4gKi9cblxudmFyIHNob3VsZFdyYXAgPSB7fTtcblxudmFyIHNlbGVjdFdyYXAgPSBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJ0cnVlXCI+JywgJzwvc2VsZWN0PiddO1xudmFyIHRhYmxlV3JhcCA9IFsxLCAnPHRhYmxlPicsICc8L3RhYmxlPiddO1xudmFyIHRyV3JhcCA9IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddO1xuXG52YXIgc3ZnV3JhcCA9IFsxLCAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+JywgJzwvc3ZnPiddO1xuXG52YXIgbWFya3VwV3JhcCA9IHtcbiAgJyonOiBbMSwgJz88ZGl2PicsICc8L2Rpdj4nXSxcblxuICAnYXJlYSc6IFsxLCAnPG1hcD4nLCAnPC9tYXA+J10sXG4gICdjb2wnOiBbMiwgJzx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXSxcbiAgJ2xlZ2VuZCc6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuICAncGFyYW0nOiBbMSwgJzxvYmplY3Q+JywgJzwvb2JqZWN0PiddLFxuICAndHInOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcblxuICAnb3B0Z3JvdXAnOiBzZWxlY3RXcmFwLFxuICAnb3B0aW9uJzogc2VsZWN0V3JhcCxcblxuICAnY2FwdGlvbic6IHRhYmxlV3JhcCxcbiAgJ2NvbGdyb3VwJzogdGFibGVXcmFwLFxuICAndGJvZHknOiB0YWJsZVdyYXAsXG4gICd0Zm9vdCc6IHRhYmxlV3JhcCxcbiAgJ3RoZWFkJzogdGFibGVXcmFwLFxuXG4gICd0ZCc6IHRyV3JhcCxcbiAgJ3RoJzogdHJXcmFwXG59O1xuXG4vLyBJbml0aWFsaXplIHRoZSBTVkcgZWxlbWVudHMgc2luY2Ugd2Uga25vdyB0aGV5J2xsIGFsd2F5cyBuZWVkIHRvIGJlIHdyYXBwZWRcbi8vIGNvbnNpc3RlbnRseS4gSWYgdGhleSBhcmUgY3JlYXRlZCBpbnNpZGUgYSA8ZGl2PiB0aGV5IHdpbGwgYmUgaW5pdGlhbGl6ZWQgaW5cbi8vIHRoZSB3cm9uZyBuYW1lc3BhY2UgKGFuZCB3aWxsIG5vdCBkaXNwbGF5KS5cbnZhciBzdmdFbGVtZW50cyA9IFsnY2lyY2xlJywgJ2NsaXBQYXRoJywgJ2RlZnMnLCAnZWxsaXBzZScsICdnJywgJ2ltYWdlJywgJ2xpbmUnLCAnbGluZWFyR3JhZGllbnQnLCAnbWFzaycsICdwYXRoJywgJ3BhdHRlcm4nLCAncG9seWdvbicsICdwb2x5bGluZScsICdyYWRpYWxHcmFkaWVudCcsICdyZWN0JywgJ3N0b3AnLCAndGV4dCcsICd0c3BhbiddO1xuc3ZnRWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAobm9kZU5hbWUpIHtcbiAgbWFya3VwV3JhcFtub2RlTmFtZV0gPSBzdmdXcmFwO1xuICBzaG91bGRXcmFwW25vZGVOYW1lXSA9IHRydWU7XG59KTtcblxuLyoqXG4gKiBHZXRzIHRoZSBtYXJrdXAgd3JhcCBjb25maWd1cmF0aW9uIGZvciB0aGUgc3VwcGxpZWQgYG5vZGVOYW1lYC5cbiAqXG4gKiBOT1RFOiBUaGlzIGxhemlseSBkZXRlY3RzIHdoaWNoIHdyYXBzIGFyZSBuZWNlc3NhcnkgZm9yIHRoZSBjdXJyZW50IGJyb3dzZXIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5vZGVOYW1lIExvd2VyY2FzZSBgbm9kZU5hbWVgLlxuICogQHJldHVybiB7P2FycmF5fSBNYXJrdXAgd3JhcCBjb25maWd1cmF0aW9uLCBpZiBhcHBsaWNhYmxlLlxuICovXG5mdW5jdGlvbiBnZXRNYXJrdXBXcmFwKG5vZGVOYW1lKSB7XG4gICEhIWR1bW15Tm9kZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdNYXJrdXAgd3JhcHBpbmcgbm9kZSBub3QgaW5pdGlhbGl6ZWQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGlmICghbWFya3VwV3JhcC5oYXNPd25Qcm9wZXJ0eShub2RlTmFtZSkpIHtcbiAgICBub2RlTmFtZSA9ICcqJztcbiAgfVxuICBpZiAoIXNob3VsZFdyYXAuaGFzT3duUHJvcGVydHkobm9kZU5hbWUpKSB7XG4gICAgaWYgKG5vZGVOYW1lID09PSAnKicpIHtcbiAgICAgIGR1bW15Tm9kZS5pbm5lckhUTUwgPSAnPGxpbmsgLz4nO1xuICAgIH0gZWxzZSB7XG4gICAgICBkdW1teU5vZGUuaW5uZXJIVE1MID0gJzwnICsgbm9kZU5hbWUgKyAnPjwvJyArIG5vZGVOYW1lICsgJz4nO1xuICAgIH1cbiAgICBzaG91bGRXcmFwW25vZGVOYW1lXSA9ICFkdW1teU5vZGUuZmlyc3RDaGlsZDtcbiAgfVxuICByZXR1cm4gc2hvdWxkV3JhcFtub2RlTmFtZV0gPyBtYXJrdXBXcmFwW25vZGVOYW1lXSA6IG51bGw7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0TWFya3VwV3JhcDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb25cbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEdldHMgdGhlIHNjcm9sbCBwb3NpdGlvbiBvZiB0aGUgc3VwcGxpZWQgZWxlbWVudCBvciB3aW5kb3cuXG4gKlxuICogVGhlIHJldHVybiB2YWx1ZXMgYXJlIHVuYm91bmRlZCwgdW5saWtlIGBnZXRTY3JvbGxQb3NpdGlvbmAuIFRoaXMgbWVhbnMgdGhleVxuICogbWF5IGJlIG5lZ2F0aXZlIG9yIGV4Y2VlZCB0aGUgZWxlbWVudCBib3VuZGFyaWVzICh3aGljaCBpcyBwb3NzaWJsZSB1c2luZ1xuICogaW5lcnRpYWwgc2Nyb2xsaW5nKS5cbiAqXG4gKiBAcGFyYW0ge0RPTVdpbmRvd3xET01FbGVtZW50fSBzY3JvbGxhYmxlXG4gKiBAcmV0dXJuIHtvYmplY3R9IE1hcCB3aXRoIGB4YCBhbmQgYHlgIGtleXMuXG4gKi9cbmZ1bmN0aW9uIGdldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uKHNjcm9sbGFibGUpIHtcbiAgaWYgKHNjcm9sbGFibGUgPT09IHdpbmRvdykge1xuICAgIHJldHVybiB7XG4gICAgICB4OiB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQsXG4gICAgICB5OiB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB4OiBzY3JvbGxhYmxlLnNjcm9sbExlZnQsXG4gICAgeTogc2Nyb2xsYWJsZS5zY3JvbGxUb3BcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaHlwaGVuYXRlXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF91cHBlcmNhc2VQYXR0ZXJuID0gLyhbQS1aXSkvZztcblxuLyoqXG4gKiBIeXBoZW5hdGVzIGEgY2FtZWxjYXNlZCBzdHJpbmcsIGZvciBleGFtcGxlOlxuICpcbiAqICAgPiBoeXBoZW5hdGUoJ2JhY2tncm91bmRDb2xvcicpXG4gKiAgIDwgXCJiYWNrZ3JvdW5kLWNvbG9yXCJcbiAqXG4gKiBGb3IgQ1NTIHN0eWxlIG5hbWVzLCB1c2UgYGh5cGhlbmF0ZVN0eWxlTmFtZWAgaW5zdGVhZCB3aGljaCB3b3JrcyBwcm9wZXJseVxuICogd2l0aCBhbGwgdmVuZG9yIHByZWZpeGVzLCBpbmNsdWRpbmcgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGh5cGhlbmF0ZShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKF91cHBlcmNhc2VQYXR0ZXJuLCAnLSQxJykudG9Mb3dlckNhc2UoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoeXBoZW5hdGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGh5cGhlbmF0ZVN0eWxlTmFtZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBoeXBoZW5hdGUgPSByZXF1aXJlKCcuL2h5cGhlbmF0ZScpO1xuXG52YXIgbXNQYXR0ZXJuID0gL15tcy0vO1xuXG4vKipcbiAqIEh5cGhlbmF0ZXMgYSBjYW1lbGNhc2VkIENTUyBwcm9wZXJ0eSBuYW1lLCBmb3IgZXhhbXBsZTpcbiAqXG4gKiAgID4gaHlwaGVuYXRlU3R5bGVOYW1lKCdiYWNrZ3JvdW5kQ29sb3InKVxuICogICA8IFwiYmFja2dyb3VuZC1jb2xvclwiXG4gKiAgID4gaHlwaGVuYXRlU3R5bGVOYW1lKCdNb3pUcmFuc2l0aW9uJylcbiAqICAgPCBcIi1tb3otdHJhbnNpdGlvblwiXG4gKiAgID4gaHlwaGVuYXRlU3R5bGVOYW1lKCdtc1RyYW5zaXRpb24nKVxuICogICA8IFwiLW1zLXRyYW5zaXRpb25cIlxuICpcbiAqIEFzIE1vZGVybml6ciBzdWdnZXN0cyAoaHR0cDovL21vZGVybml6ci5jb20vZG9jcy8jcHJlZml4ZWQpLCBhbiBgbXNgIHByZWZpeFxuICogaXMgY29udmVydGVkIHRvIGAtbXMtYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGh5cGhlbmF0ZVN0eWxlTmFtZShzdHJpbmcpIHtcbiAgcmV0dXJuIGh5cGhlbmF0ZShzdHJpbmcpLnJlcGxhY2UobXNQYXR0ZXJuLCAnLW1zLScpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGh5cGhlbmF0ZVN0eWxlTmFtZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaW52YXJpYW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cbiAqXG4gKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG4gKiBleHBlY3RpbmcuXG4gKlxuICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcbiAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cbiAqL1xuXG5mdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YXJpYW50IHJlcXVpcmVzIGFuIGVycm9yIG1lc3NhZ2UgYXJndW1lbnQnKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHZhciBlcnJvcjtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKCdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICsgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhcmdzID0gW2EsIGIsIGMsIGQsIGUsIGZdO1xuICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdO1xuICAgICAgfSkpO1xuICAgICAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcbiAgICB9XG5cbiAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGlzTm9kZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7Kn0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIG9yIG5vdCB0aGUgb2JqZWN0IGlzIGEgRE9NIG5vZGUuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gaXNOb2RlKG9iamVjdCkge1xuICByZXR1cm4gISEob2JqZWN0ICYmICh0eXBlb2YgTm9kZSA9PT0gJ2Z1bmN0aW9uJyA/IG9iamVjdCBpbnN0YW5jZW9mIE5vZGUgOiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb2JqZWN0Lm5vZGVUeXBlID09PSAnbnVtYmVyJyAmJiB0eXBlb2Ygb2JqZWN0Lm5vZGVOYW1lID09PSAnc3RyaW5nJykpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzTm9kZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaXNUZXh0Tm9kZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc05vZGUgPSByZXF1aXJlKCcuL2lzTm9kZScpO1xuXG4vKipcbiAqIEBwYXJhbSB7Kn0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIG9yIG5vdCB0aGUgb2JqZWN0IGlzIGEgRE9NIHRleHQgbm9kZS5cbiAqL1xuZnVuY3Rpb24gaXNUZXh0Tm9kZShvYmplY3QpIHtcbiAgcmV0dXJuIGlzTm9kZShvYmplY3QpICYmIG9iamVjdC5ub2RlVHlwZSA9PSAzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzVGV4dE5vZGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGtleU1pcnJvclxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCcuL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYW4gZW51bWVyYXRpb24gd2l0aCBrZXlzIGVxdWFsIHRvIHRoZWlyIHZhbHVlLlxuICpcbiAqIEZvciBleGFtcGxlOlxuICpcbiAqICAgdmFyIENPTE9SUyA9IGtleU1pcnJvcih7Ymx1ZTogbnVsbCwgcmVkOiBudWxsfSk7XG4gKiAgIHZhciBteUNvbG9yID0gQ09MT1JTLmJsdWU7XG4gKiAgIHZhciBpc0NvbG9yVmFsaWQgPSAhIUNPTE9SU1tteUNvbG9yXTtcbiAqXG4gKiBUaGUgbGFzdCBsaW5lIGNvdWxkIG5vdCBiZSBwZXJmb3JtZWQgaWYgdGhlIHZhbHVlcyBvZiB0aGUgZ2VuZXJhdGVkIGVudW0gd2VyZVxuICogbm90IGVxdWFsIHRvIHRoZWlyIGtleXMuXG4gKlxuICogICBJbnB1dDogIHtrZXkxOiB2YWwxLCBrZXkyOiB2YWwyfVxuICogICBPdXRwdXQ6IHtrZXkxOiBrZXkxLCBrZXkyOiBrZXkyfVxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xudmFyIGtleU1pcnJvciA9IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIHJldCA9IHt9O1xuICB2YXIga2V5O1xuICAhKG9iaiBpbnN0YW5jZW9mIE9iamVjdCAmJiAhQXJyYXkuaXNBcnJheShvYmopKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdrZXlNaXJyb3IoLi4uKTogQXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcmV0W2tleV0gPSBrZXk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ga2V5TWlycm9yOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBrZXlPZlxuICovXG5cbi8qKlxuICogQWxsb3dzIGV4dHJhY3Rpb24gb2YgYSBtaW5pZmllZCBrZXkuIExldCdzIHRoZSBidWlsZCBzeXN0ZW0gbWluaWZ5IGtleXNcbiAqIHdpdGhvdXQgbG9zaW5nIHRoZSBhYmlsaXR5IHRvIGR5bmFtaWNhbGx5IHVzZSBrZXkgc3RyaW5ncyBhcyB2YWx1ZXNcbiAqIHRoZW1zZWx2ZXMuIFBhc3MgaW4gYW4gb2JqZWN0IHdpdGggYSBzaW5nbGUga2V5L3ZhbCBwYWlyIGFuZCBpdCB3aWxsIHJldHVyblxuICogeW91IHRoZSBzdHJpbmcga2V5IG9mIHRoYXQgc2luZ2xlIHJlY29yZC4gU3VwcG9zZSB5b3Ugd2FudCB0byBncmFiIHRoZVxuICogdmFsdWUgZm9yIGEga2V5ICdjbGFzc05hbWUnIGluc2lkZSBvZiBhbiBvYmplY3QuIEtleS92YWwgbWluaWZpY2F0aW9uIG1heVxuICogaGF2ZSBhbGlhc2VkIHRoYXQga2V5IHRvIGJlICd4YTEyJy4ga2V5T2Yoe2NsYXNzTmFtZTogbnVsbH0pIHdpbGwgcmV0dXJuXG4gKiAneGExMicgaW4gdGhhdCBjYXNlLiBSZXNvbHZlIGtleXMgeW91IHdhbnQgdG8gdXNlIG9uY2UgYXQgc3RhcnR1cCB0aW1lLCB0aGVuXG4gKiByZXVzZSB0aG9zZSByZXNvbHV0aW9ucy5cbiAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBrZXlPZiA9IGZ1bmN0aW9uIChvbmVLZXlPYmopIHtcbiAgdmFyIGtleTtcbiAgZm9yIChrZXkgaW4gb25lS2V5T2JqKSB7XG4gICAgaWYgKCFvbmVLZXlPYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHJldHVybiBrZXk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGtleU9mOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBtYXBPYmplY3RcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHByb3ZpZGVkIGBjYWxsYmFja2Agb25jZSBmb3IgZWFjaCBlbnVtZXJhYmxlIG93biBwcm9wZXJ0eSBpbiB0aGVcbiAqIG9iamVjdCBhbmQgY29uc3RydWN0cyBhIG5ldyBvYmplY3QgZnJvbSB0aGUgcmVzdWx0cy4gVGhlIGBjYWxsYmFja2AgaXNcbiAqIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG4gKlxuICogIC0gdGhlIHByb3BlcnR5IHZhbHVlXG4gKiAgLSB0aGUgcHJvcGVydHkgbmFtZVxuICogIC0gdGhlIG9iamVjdCBiZWluZyB0cmF2ZXJzZWRcbiAqXG4gKiBQcm9wZXJ0aWVzIHRoYXQgYXJlIGFkZGVkIGFmdGVyIHRoZSBjYWxsIHRvIGBtYXBPYmplY3RgIHdpbGwgbm90IGJlIHZpc2l0ZWRcbiAqIGJ5IGBjYWxsYmFja2AuIElmIHRoZSB2YWx1ZXMgb2YgZXhpc3RpbmcgcHJvcGVydGllcyBhcmUgY2hhbmdlZCwgdGhlIHZhbHVlXG4gKiBwYXNzZWQgdG8gYGNhbGxiYWNrYCB3aWxsIGJlIHRoZSB2YWx1ZSBhdCB0aGUgdGltZSBgbWFwT2JqZWN0YCB2aXNpdHMgdGhlbS5cbiAqIFByb3BlcnRpZXMgdGhhdCBhcmUgZGVsZXRlZCBiZWZvcmUgYmVpbmcgdmlzaXRlZCBhcmUgbm90IHZpc2l0ZWQuXG4gKlxuICogQGdyZXAgZnVuY3Rpb24gb2JqZWN0TWFwKClcbiAqIEBncmVwIGZ1bmN0aW9uIG9iak1hcCgpXG4gKlxuICogQHBhcmFtIHs/b2JqZWN0fSBvYmplY3RcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcGFyYW0geyp9IGNvbnRleHRcbiAqIEByZXR1cm4gez9vYmplY3R9XG4gKi9cbmZ1bmN0aW9uIG1hcE9iamVjdChvYmplY3QsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gIGlmICghb2JqZWN0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmb3IgKHZhciBuYW1lIGluIG9iamVjdCkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgbmFtZSkpIHtcbiAgICAgIHJlc3VsdFtuYW1lXSA9IGNhbGxiYWNrLmNhbGwoY29udGV4dCwgb2JqZWN0W25hbWVdLCBuYW1lLCBvYmplY3QpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hcE9iamVjdDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgbWVtb2l6ZVN0cmluZ09ubHlcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIE1lbW9pemVzIHRoZSByZXR1cm4gdmFsdWUgb2YgYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgb25lIHN0cmluZyBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybiB7ZnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIG1lbW9pemVTdHJpbmdPbmx5KGNhbGxiYWNrKSB7XG4gIHZhciBjYWNoZSA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gKHN0cmluZykge1xuICAgIGlmICghY2FjaGUuaGFzT3duUHJvcGVydHkoc3RyaW5nKSkge1xuICAgICAgY2FjaGVbc3RyaW5nXSA9IGNhbGxiYWNrLmNhbGwodGhpcywgc3RyaW5nKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlW3N0cmluZ107XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWVtb2l6ZVN0cmluZ09ubHk7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHNoYWxsb3dFcXVhbFxuICogQHR5cGVjaGVja3NcbiAqIFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBQZXJmb3JtcyBlcXVhbGl0eSBieSBpdGVyYXRpbmcgdGhyb3VnaCBrZXlzIG9uIGFuIG9iamVjdCBhbmQgcmV0dXJuaW5nIGZhbHNlXG4gKiB3aGVuIGFueSBrZXkgaGFzIHZhbHVlcyB3aGljaCBhcmUgbm90IHN0cmljdGx5IGVxdWFsIGJldHdlZW4gdGhlIGFyZ3VtZW50cy5cbiAqIFJldHVybnMgdHJ1ZSB3aGVuIHRoZSB2YWx1ZXMgb2YgYWxsIGtleXMgYXJlIHN0cmljdGx5IGVxdWFsLlxuICovXG5mdW5jdGlvbiBzaGFsbG93RXF1YWwob2JqQSwgb2JqQikge1xuICBpZiAob2JqQSA9PT0gb2JqQikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvYmpBICE9PSAnb2JqZWN0JyB8fCBvYmpBID09PSBudWxsIHx8IHR5cGVvZiBvYmpCICE9PSAnb2JqZWN0JyB8fCBvYmpCID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMob2JqQSk7XG4gIHZhciBrZXlzQiA9IE9iamVjdC5rZXlzKG9iakIpO1xuXG4gIGlmIChrZXlzQS5sZW5ndGggIT09IGtleXNCLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFRlc3QgZm9yIEEncyBrZXlzIGRpZmZlcmVudCBmcm9tIEIuXG4gIHZhciBiSGFzT3duUHJvcGVydHkgPSBoYXNPd25Qcm9wZXJ0eS5iaW5kKG9iakIpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXNBLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCFiSGFzT3duUHJvcGVydHkoa2V5c0FbaV0pIHx8IG9iakFba2V5c0FbaV1dICE9PSBvYmpCW2tleXNBW2ldXSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNoYWxsb3dFcXVhbDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgdG9BcnJheVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCcuL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIENvbnZlcnQgYXJyYXktbGlrZSBvYmplY3RzIHRvIGFycmF5cy5cbiAqXG4gKiBUaGlzIEFQSSBhc3N1bWVzIHRoZSBjYWxsZXIga25vd3MgdGhlIGNvbnRlbnRzIG9mIHRoZSBkYXRhIHR5cGUuIEZvciBsZXNzXG4gKiB3ZWxsIGRlZmluZWQgaW5wdXRzIHVzZSBjcmVhdGVBcnJheUZyb21NaXhlZC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdHxmdW5jdGlvbnxmaWxlbGlzdH0gb2JqXG4gKiBAcmV0dXJuIHthcnJheX1cbiAqL1xuZnVuY3Rpb24gdG9BcnJheShvYmopIHtcbiAgdmFyIGxlbmd0aCA9IG9iai5sZW5ndGg7XG5cbiAgLy8gU29tZSBicm93c2UgYnVpbHRpbiBvYmplY3RzIGNhbiByZXBvcnQgdHlwZW9mICdmdW5jdGlvbicgKGUuZy4gTm9kZUxpc3QgaW5cbiAgLy8gb2xkIHZlcnNpb25zIG9mIFNhZmFyaSkuXG4gICEoIUFycmF5LmlzQXJyYXkob2JqKSAmJiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJykpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RvQXJyYXk6IEFycmF5LWxpa2Ugb2JqZWN0IGV4cGVjdGVkJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICEodHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RvQXJyYXk6IE9iamVjdCBuZWVkcyBhIGxlbmd0aCBwcm9wZXJ0eScpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAhKGxlbmd0aCA9PT0gMCB8fCBsZW5ndGggLSAxIGluIG9iaikgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndG9BcnJheTogT2JqZWN0IHNob3VsZCBoYXZlIGtleXMgZm9yIGluZGljZXMnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgLy8gT2xkIElFIGRvZXNuJ3QgZ2l2ZSBjb2xsZWN0aW9ucyBhY2Nlc3MgdG8gaGFzT3duUHJvcGVydHkuIEFzc3VtZSBpbnB1dHNcbiAgLy8gd2l0aG91dCBtZXRob2Qgd2lsbCB0aHJvdyBkdXJpbmcgdGhlIHNsaWNlIGNhbGwgYW5kIHNraXAgc3RyYWlnaHQgdG8gdGhlXG4gIC8vIGZhbGxiYWNrLlxuICBpZiAob2JqLmhhc093blByb3BlcnR5KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvYmopO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIElFIDwgOSBkb2VzIG5vdCBzdXBwb3J0IEFycmF5I3NsaWNlIG9uIGNvbGxlY3Rpb25zIG9iamVjdHNcbiAgICB9XG4gIH1cblxuICAvLyBGYWxsIGJhY2sgdG8gY29weWluZyBrZXkgYnkga2V5LiBUaGlzIGFzc3VtZXMgYWxsIGtleXMgaGF2ZSBhIHZhbHVlLFxuICAvLyBzbyB3aWxsIG5vdCBwcmVzZXJ2ZSBzcGFyc2VseSBwb3B1bGF0ZWQgaW5wdXRzLlxuICB2YXIgcmV0ID0gQXJyYXkobGVuZ3RoKTtcbiAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGxlbmd0aDsgaWkrKykge1xuICAgIHJldFtpaV0gPSBvYmpbaWldO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9BcnJheTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgd2FybmluZ1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCcuL2VtcHR5RnVuY3Rpb24nKTtcblxuLyoqXG4gKiBTaW1pbGFyIHRvIGludmFyaWFudCBidXQgb25seSBsb2dzIGEgd2FybmluZyBpZiB0aGUgY29uZGl0aW9uIGlzIG5vdCBtZXQuXG4gKiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvZyBpc3N1ZXMgaW4gZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnRzIGluIGNyaXRpY2FsXG4gKiBwYXRocy4gUmVtb3ZpbmcgdGhlIGxvZ2dpbmcgY29kZSBmb3IgcHJvZHVjdGlvbiBlbnZpcm9ubWVudHMgd2lsbCBrZWVwIHRoZVxuICogc2FtZSBsb2dpYyBhbmQgZm9sbG93IHRoZSBzYW1lIGNvZGUgcGF0aHMuXG4gKi9cblxudmFyIHdhcm5pbmcgPSBlbXB0eUZ1bmN0aW9uO1xuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICB3YXJuaW5nID0gZnVuY3Rpb24gKGNvbmRpdGlvbiwgZm9ybWF0KSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMiA/IF9sZW4gLSAyIDogMCksIF9rZXkgPSAyOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXkgLSAyXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYHdhcm5pbmcoY29uZGl0aW9uLCBmb3JtYXQsIC4uLmFyZ3MpYCByZXF1aXJlcyBhIHdhcm5pbmcgJyArICdtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuXG4gICAgaWYgKGZvcm1hdC5pbmRleE9mKCdGYWlsZWQgQ29tcG9zaXRlIHByb3BUeXBlOiAnKSA9PT0gMCkge1xuICAgICAgcmV0dXJuOyAvLyBJZ25vcmUgQ29tcG9zaXRlQ29tcG9uZW50IHByb3B0eXBlIGNoZWNrLlxuICAgIH1cblxuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgdmFyIG1lc3NhZ2UgPSAnV2FybmluZzogJyArIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdO1xuICAgICAgfSk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICAvLyAtLS0gV2VsY29tZSB0byBkZWJ1Z2dpbmcgUmVhY3QgLS0tXG4gICAgICAgIC8vIFRoaXMgZXJyb3Igd2FzIHRocm93biBhcyBhIGNvbnZlbmllbmNlIHNvIHRoYXQgeW91IGNhbiB1c2UgdGhpcyBzdGFja1xuICAgICAgICAvLyB0byBmaW5kIHRoZSBjYWxsc2l0ZSB0aGF0IGNhdXNlZCB0aGlzIHdhcm5pbmcgdG8gZmlyZS5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgfSBjYXRjaCAoeCkge31cbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gd2FybmluZzsiLCJleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbVxuICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgbkJpdHMgPSAtN1xuICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG4gIHZhciBkID0gaXNMRSA/IC0xIDogMVxuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IChlICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIGUgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IG1MZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IChtICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIGlmIChlID09PSAwKSB7XG4gICAgZSA9IDEgLSBlQmlhc1xuICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSlcbiAgfSBlbHNlIHtcbiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pXG4gICAgZSA9IGUgLSBlQmlhc1xuICB9XG4gIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pXG59XG5cbmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG0sIGNcbiAgdmFyIGVMZW4gPSAobkJ5dGVzICogOCkgLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG4gIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cbiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcbiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcbiAgICBlID0gZU1heFxuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcbiAgICAgIGUtLVxuICAgICAgYyAqPSAyXG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrK1xuICAgICAgYyAvPSAyXG4gICAgfVxuXG4gICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG4gICAgICBtID0gMFxuICAgICAgZSA9IGVNYXhcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKCh2YWx1ZSAqIGMpIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IGUgKyBlQmlhc1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSAwXG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtXG4gIGVMZW4gKz0gbUxlblxuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG59XG4iLCJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xufTtcbiIsIiFmdW5jdGlvbihhKXt2YXIgYj10aGlzO1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWEoYixyZXF1aXJlKFwiamRhdGF2aWV3XCIpKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpkYXRhdmlld1wiXSxmdW5jdGlvbihjKXtyZXR1cm4gYShiLGMpfSk6Yi5qQmluYXJ5PWEoYixiLmpEYXRhVmlldyl9KGZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBiJiZhIGluc3RhbmNlb2YgYn1mdW5jdGlvbiBkKGEpe2Zvcih2YXIgYj0xLGM9YXJndW1lbnRzLmxlbmd0aDtjPmI7KytiKXt2YXIgZD1hcmd1bWVudHNbYl07Zm9yKHZhciBlIGluIGQpdm9pZCAwIT09ZFtlXSYmKGFbZV09ZFtlXSl9cmV0dXJuIGF9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYXJndW1lbnRzWzBdPW0oYSksZC5hcHBseShudWxsLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZihhLGIsZCl7cmV0dXJuIGMoZCxGdW5jdGlvbik/ZC5jYWxsKGEsYi5jb250ZXh0c1swXSk6ZH1mdW5jdGlvbiBnKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPWFyZ3VtZW50cyxkPWIubGVuZ3RoLTEsZT1hLmxlbmd0aC0xLGY9YltkXTtpZihiLmxlbmd0aD1lKzEsIWMoZixGdW5jdGlvbikpe3ZhciBnPXRoaXM7cmV0dXJuIG5ldyBsKGZ1bmN0aW9uKGMsZCl7YltlXT1mdW5jdGlvbihhLGIpe3JldHVybiBhP2QoYSk6YyhiKX0sYS5hcHBseShnLGIpfSl9YltkXT12b2lkIDAsYltlXT1mLGEuYXBwbHkodGhpcyxiKX19ZnVuY3Rpb24gaChhLGQpe3JldHVybiBjKGEsaCk/YS5hcyhkKTooYyhhLGIpfHwoYT1uZXcgYihhLHZvaWQgMCx2b2lkIDAsZD9kW1wiakJpbmFyeS5saXR0bGVFbmRpYW5cIl06dm9pZCAwKSksYyh0aGlzLGgpPyh0aGlzLnZpZXc9YSx0aGlzLnZpZXcuc2VlaygwKSx0aGlzLmNvbnRleHRzPVtdLHRoaXMuYXMoZCwhMCkpOm5ldyBoKGEsZCkpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGUoaS5wcm90b3R5cGUsYSl9ZnVuY3Rpb24gaihhKXtyZXR1cm4gZShqLnByb3RvdHlwZSxhLHtjcmVhdGVQcm9wZXJ0eTpmdW5jdGlvbigpe3ZhciBiPShhLmNyZWF0ZVByb3BlcnR5fHxqLnByb3RvdHlwZS5jcmVhdGVQcm9wZXJ0eSkuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBiLmdldEJhc2VUeXBlJiYoYi5iYXNlVHlwZT1iLmJpbmFyeS5nZXRUeXBlKGIuZ2V0QmFzZVR5cGUoYi5iaW5hcnkuY29udGV4dHNbMF0pKSksYn19KX12YXIgaz1hLmRvY3VtZW50O1wiYXRvYlwiaW4gYSYmXCJidG9hXCJpbiBhfHwhZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGEpe3ZhciBiLGMsZSxmLGcsaDtmb3IoZT1hLmxlbmd0aCxjPTAsYj1cIlwiO2U+Yzspe2lmKGY9MjU1JmEuY2hhckNvZGVBdChjKyspLGM9PWUpe2IrPWQuY2hhckF0KGY+PjIpLGIrPWQuY2hhckF0KCgzJmYpPDw0KSxiKz1cIj09XCI7YnJlYWt9aWYoZz1hLmNoYXJDb2RlQXQoYysrKSxjPT1lKXtiKz1kLmNoYXJBdChmPj4yKSxiKz1kLmNoYXJBdCgoMyZmKTw8NHwoMjQwJmcpPj40KSxiKz1kLmNoYXJBdCgoMTUmZyk8PDIpLGIrPVwiPVwiO2JyZWFrfWg9YS5jaGFyQ29kZUF0KGMrKyksYis9ZC5jaGFyQXQoZj4+MiksYis9ZC5jaGFyQXQoKDMmZik8PDR8KDI0MCZnKT4+NCksYis9ZC5jaGFyQXQoKDE1JmcpPDwyfCgxOTImaCk+PjYpLGIrPWQuY2hhckF0KDYzJmgpfXJldHVybiBifWZ1bmN0aW9uIGMoYSl7dmFyIGIsYyxkLGYsZyxoLGk7Zm9yKGg9YS5sZW5ndGgsZz0wLGk9XCJcIjtoPmc7KXtkbyBiPWVbMjU1JmEuY2hhckNvZGVBdChnKyspXTt3aGlsZShoPmcmJi0xPT1iKTtpZigtMT09YilicmVhaztkbyBjPWVbMjU1JmEuY2hhckNvZGVBdChnKyspXTt3aGlsZShoPmcmJi0xPT1jKTtpZigtMT09YylicmVhaztpKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGI8PDJ8KDQ4JmMpPj40KTtkb3tpZihkPTI1NSZhLmNoYXJDb2RlQXQoZysrKSw2MT09ZClyZXR1cm4gaTtkPWVbZF19d2hpbGUoaD5nJiYtMT09ZCk7aWYoLTE9PWQpYnJlYWs7aSs9U3RyaW5nLmZyb21DaGFyQ29kZSgoMTUmYyk8PDR8KDYwJmQpPj4yKTtkb3tpZihmPTI1NSZhLmNoYXJDb2RlQXQoZysrKSw2MT09ZilyZXR1cm4gaTtmPWVbZl19d2hpbGUoaD5nJiYtMT09Zik7aWYoLTE9PWYpYnJlYWs7aSs9U3RyaW5nLmZyb21DaGFyQ29kZSgoMyZkKTw8NnxmKX1yZXR1cm4gaX12YXIgZD1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIixlPVstMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSw2MiwtMSwtMSwtMSw2Myw1Miw1Myw1NCw1NSw1Niw1Nyw1OCw1OSw2MCw2MSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwwLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LC0xLC0xLC0xLC0xLC0xLC0xLDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM0LDM1LDM2LDM3LDM4LDM5LDQwLDQxLDQyLDQzLDQ0LDQ1LDQ2LDQ3LDQ4LDQ5LDUwLDUxLC0xLC0xLC0xLC0xLC0xXTthLmJ0b2F8fChhLmJ0b2E9YiksYS5hdG9ifHwoYS5hdG9iPWMpfSgpO3ZhciBsPWEuUHJvbWlzZXx8ZnVuY3Rpb24oYSl7dGhpcy50aGVuPWF9LG09T2JqZWN0LmNyZWF0ZTttfHwobT1mdW5jdGlvbihhKXt2YXIgYj1mdW5jdGlvbigpe307cmV0dXJuIGIucHJvdG90eXBlPWEsbmV3IGJ9KTt2YXIgbj1oLnByb3RvdHlwZSxvPW4udHlwZVNldD17fTtuLnRvVmFsdWU9ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcyx0aGlzLGEpfSxuLl9uYW1lZD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEuZGlzcGxheU5hbWU9YitcIiBAIFwiKyh2b2lkIDAhPT1jP2M6dGhpcy52aWV3LnRlbGwoKSksYX07dmFyIHA9T2JqZWN0LmRlZmluZVByb3BlcnR5O2lmKHApdHJ5e3Aoe30sXCJ4XCIse30pfWNhdGNoKHEpe3A9dm9pZCAwfWVsc2UgcD1mdW5jdGlvbihhLGIsYyxkKXtkJiYoYVtiXT1jLnZhbHVlKX07dmFyIHI9XCJqQmluYXJ5LkNhY2hlXCIscz0wO24uX2dldENhY2hlZD1mdW5jdGlvbihhLGIsYyl7aWYoYS5oYXNPd25Qcm9wZXJ0eSh0aGlzLmNhY2hlS2V5KSlyZXR1cm4gYVt0aGlzLmNhY2hlS2V5XTt2YXIgZD1iLmNhbGwodGhpcyxhKTtyZXR1cm4gcChhLHRoaXMuY2FjaGVLZXkse3ZhbHVlOmR9LGMpLGR9LG4uZ2V0Q29udGV4dD1mdW5jdGlvbihhKXtzd2l0Y2godHlwZW9mIGEpe2Nhc2VcInVuZGVmaW5lZFwiOmE9MDtjYXNlXCJudW1iZXJcIjpyZXR1cm4gdGhpcy5jb250ZXh0c1thXTtjYXNlXCJzdHJpbmdcIjpyZXR1cm4gdGhpcy5nZXRDb250ZXh0KGZ1bmN0aW9uKGIpe3JldHVybiBhIGluIGJ9KTtjYXNlXCJmdW5jdGlvblwiOmZvcih2YXIgYj0wLGM9dGhpcy5jb250ZXh0cy5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9dGhpcy5jb250ZXh0c1tiXTtpZihhLmNhbGwodGhpcyxkKSlyZXR1cm4gZH19fSxuLmluQ29udGV4dD1mdW5jdGlvbihhLGIpe3RoaXMuY29udGV4dHMudW5zaGlmdChhKTt2YXIgYz1iLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMuY29udGV4dHMuc2hpZnQoKSxjfSxpLnByb3RvdHlwZT17aW5oZXJpdDpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiKXt2YXIgYz1mW2FdO2MmJihkfHwoZD1lKGYpKSxiLmNhbGwoZCxjKSxkW2FdPW51bGwpfXZhciBkLGY9dGhpcztyZXR1cm4gYyhcInBhcmFtc1wiLGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl0aGlzW2JbY11dPWFbY119KSxjKFwic2V0UGFyYW1zXCIsZnVuY3Rpb24oYil7Yi5hcHBseSh0aGlzLGEpfSksYyhcInR5cGVQYXJhbXNcIixmdW5jdGlvbihhKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspe3ZhciBlPWFbY10sZj10aGlzW2VdO2YmJih0aGlzW2VdPWIoZikpfX0pLGMoXCJyZXNvbHZlXCIsZnVuY3Rpb24oYSl7YS5jYWxsKHRoaXMsYil9KSxkfHxmfSxjcmVhdGVQcm9wZXJ0eTpmdW5jdGlvbihhKXtyZXR1cm4gZSh0aGlzLHtiaW5hcnk6YSx2aWV3OmEudmlld30pfSx0b1ZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIhPT0hMSYmXCJzdHJpbmdcIj09dHlwZW9mIGE/dGhpcy5iaW5hcnkuZ2V0Q29udGV4dChhKVthXTpmKHRoaXMsdGhpcy5iaW5hcnksYSl9fSxoLlR5cGU9aSxqLnByb3RvdHlwZT1lKGkucHJvdG90eXBlLHtzZXRQYXJhbXM6ZnVuY3Rpb24oKXt0aGlzLmJhc2VUeXBlJiYodGhpcy50eXBlUGFyYW1zPVtcImJhc2VUeXBlXCJdLmNvbmNhdCh0aGlzLnR5cGVQYXJhbXN8fFtdKSl9LGJhc2VSZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmluYXJ5LnJlYWQodGhpcy5iYXNlVHlwZSl9LGJhc2VXcml0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5iaW5hcnkud3JpdGUodGhpcy5iYXNlVHlwZSxhKX19KSxkKGoucHJvdG90eXBlLHtyZWFkOmoucHJvdG90eXBlLmJhc2VSZWFkLHdyaXRlOmoucHJvdG90eXBlLmJhc2VXcml0ZX0pLGguVGVtcGxhdGU9aixuLmFzPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yj90aGlzOmUodGhpcyk7cmV0dXJuIGE9YXx8byxjLnR5cGVTZXQ9YT09PW98fG8uaXNQcm90b3R5cGVPZihhKT9hOmUobyxhKSxjLmNhY2hlS2V5PXIsYy5jYWNoZUtleT1jLl9nZXRDYWNoZWQoYSxmdW5jdGlvbigpe3JldHVybiByK1wiLlwiKyArK3N9LCEwKSxjfSxuLnNlZWs9ZnVuY3Rpb24oYSxiKXtpZihhPXRoaXMudG9WYWx1ZShhKSx2b2lkIDAhPT1iKXt2YXIgYz10aGlzLnZpZXcudGVsbCgpO3RoaXMudmlldy5zZWVrKGEpO3ZhciBkPWIuY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy52aWV3LnNlZWsoYyksZH1yZXR1cm4gdGhpcy52aWV3LnNlZWsoYSl9LG4udGVsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcudGVsbCgpfSxuLnNraXA9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5zZWVrKHRoaXMudGVsbCgpK3RoaXMudG9WYWx1ZShhKSxiKX0sbi5zbGljZT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIG5ldyBoKHRoaXMudmlldy5zbGljZShhLGIsYyksdGhpcy50eXBlU2V0KX0sbi5fZ2V0VHlwZT1mdW5jdGlvbihhLGIpe3N3aXRjaCh0eXBlb2YgYSl7Y2FzZVwic3RyaW5nXCI6aWYoIShhIGluIHRoaXMudHlwZVNldCkpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwiVW5rbm93biB0eXBlOiBcIithKTtyZXR1cm4gdGhpcy5fZ2V0VHlwZSh0aGlzLnR5cGVTZXRbYV0sYik7Y2FzZVwibnVtYmVyXCI6cmV0dXJuIHRoaXMuX2dldFR5cGUoby5iaXRmaWVsZCxbYV0pO2Nhc2VcIm9iamVjdFwiOmlmKGMoYSxpKSl7dmFyIGQ9dGhpcztyZXR1cm4gYS5pbmhlcml0KGJ8fFtdLGZ1bmN0aW9uKGEpe3JldHVybiBkLmdldFR5cGUoYSl9KX1yZXR1cm4gYyhhLEFycmF5KT90aGlzLl9nZXRDYWNoZWQoYSxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRUeXBlKGFbMF0sYS5zbGljZSgxKSl9LCEwKTp0aGlzLl9nZXRDYWNoZWQoYSxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRUeXBlKG8ub2JqZWN0LFthXSl9LCExKX19LG4uZ2V0VHlwZT1mdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMuX2dldFR5cGUoYSxiKTtyZXR1cm4gZCYmIWMoYSxpKSYmKGQubmFtZT1cIm9iamVjdFwiPT10eXBlb2YgYT9jKGEsQXJyYXkpP2FbMF0rXCIoXCIrYS5zbGljZSgxKS5qb2luKFwiLCBcIikrXCIpXCI6XCJvYmplY3RcIjpTdHJpbmcoYSkpLGR9LG4uX2FjdGlvbj1mdW5jdGlvbihhLGIsYyl7aWYodm9pZCAwIT09YSl7YT10aGlzLmdldFR5cGUoYSk7dmFyIGQ9dGhpcy5fbmFtZWQoZnVuY3Rpb24oKXtyZXR1cm4gYy5jYWxsKHRoaXMsYS5jcmVhdGVQcm9wZXJ0eSh0aGlzKSx0aGlzLmNvbnRleHRzWzBdKX0sXCJbXCIrYS5uYW1lK1wiXVwiLGIpO3JldHVybiB2b2lkIDAhPT1iP3RoaXMuc2VlayhiLGQpOmQuY2FsbCh0aGlzKX19LG4ucmVhZD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLl9hY3Rpb24oYSxiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEucmVhZChiKX0pfSxuLnJlYWRBbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkKFwiakJpbmFyeS5hbGxcIiwwKX0sbi53cml0ZT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMuX2FjdGlvbihhLGMsZnVuY3Rpb24oYSxjKXt2YXIgZD10aGlzLnRlbGwoKTtyZXR1cm4gYS53cml0ZShiLGMpLHRoaXMudGVsbCgpLWR9KX0sbi53cml0ZUFsbD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53cml0ZShcImpCaW5hcnkuYWxsXCIsYSwwKX0sZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2Q+YztjKyspe3ZhciBmPWJbY107b1tmLnRvTG93ZXJDYXNlKCldPWUoYSx7ZGF0YVR5cGU6Zn0pfX0oaSh7cGFyYW1zOltcImxpdHRsZUVuZGlhblwiXSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlld1tcImdldFwiK3RoaXMuZGF0YVR5cGVdKHZvaWQgMCx0aGlzLmxpdHRsZUVuZGlhbil9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMudmlld1tcIndyaXRlXCIrdGhpcy5kYXRhVHlwZV0oYSx0aGlzLmxpdHRsZUVuZGlhbil9fSksW1wiVWludDhcIixcIlVpbnQxNlwiLFwiVWludDMyXCIsXCJVaW50NjRcIixcIkludDhcIixcIkludDE2XCIsXCJJbnQzMlwiLFwiSW50NjRcIixcIkZsb2F0MzJcIixcIkZsb2F0NjRcIixcIkNoYXJcIl0pLGQobyx7XCJieXRlXCI6by51aW50OCxcImZsb2F0XCI6by5mbG9hdDMyLFwiZG91YmxlXCI6by5mbG9hdDY0fSksby5hcnJheT1qKHtwYXJhbXM6W1wiYmFzZVR5cGVcIixcImxlbmd0aFwiXSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50b1ZhbHVlKHRoaXMubGVuZ3RoKTtpZih0aGlzLmJhc2VUeXBlPT09by51aW50OClyZXR1cm4gdGhpcy52aWV3LmdldEJ5dGVzKGEsdm9pZCAwLCEwLCEwKTt2YXIgYjtpZih2b2lkIDAhPT1hKXtiPW5ldyBBcnJheShhKTtmb3IodmFyIGM9MDthPmM7YysrKWJbY109dGhpcy5iYXNlUmVhZCgpfWVsc2V7dmFyIGQ9dGhpcy52aWV3LmJ5dGVMZW5ndGg7Zm9yKGI9W107dGhpcy5iaW5hcnkudGVsbCgpPGQ7KWIucHVzaCh0aGlzLmJhc2VSZWFkKCkpfXJldHVybiBifSx3cml0ZTpmdW5jdGlvbihhKXtpZih0aGlzLmJhc2VUeXBlPT09by51aW50OClyZXR1cm4gdGhpcy52aWV3LndyaXRlQnl0ZXMoYSk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtjPmI7YisrKXRoaXMuYmFzZVdyaXRlKGFbYl0pfX0pLG8uYmluYXJ5PWooe3BhcmFtczpbXCJsZW5ndGhcIixcInR5cGVTZXRcIl0scmVhZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYmluYXJ5LnRlbGwoKSxiPXRoaXMuYmluYXJ5LnNraXAodGhpcy50b1ZhbHVlKHRoaXMubGVuZ3RoKSksYz10aGlzLnZpZXcuc2xpY2UoYSxiKTtyZXR1cm4gbmV3IGgoYyx0aGlzLnR5cGVTZXQpfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLmJpbmFyeS53cml0ZShcImJsb2JcIixhLnJlYWQoXCJibG9iXCIsMCkpfX0pLG8uYml0ZmllbGQ9aSh7cGFyYW1zOltcImJpdFNpemVcIl0scmVhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcuZ2V0VW5zaWduZWQodGhpcy5iaXRTaXplKX0sd3JpdGU6ZnVuY3Rpb24oYSl7dGhpcy52aWV3LndyaXRlVW5zaWduZWQoYSx0aGlzLmJpdFNpemUpfX0pLG8uYmxvYj1pKHtwYXJhbXM6W1wibGVuZ3RoXCJdLHJlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3LmdldEJ5dGVzKHRoaXMudG9WYWx1ZSh0aGlzLmxlbmd0aCkpfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLnZpZXcud3JpdGVCeXRlcyhhLCEwKX19KSxvW1wiY29uc3RcIl09aih7cGFyYW1zOltcImJhc2VUeXBlXCIsXCJ2YWx1ZVwiLFwic3RyaWN0XCJdLHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJhc2VSZWFkKCk7aWYodGhpcy5zdHJpY3QmJmEhPT10aGlzLnZhbHVlKXtpZihjKHRoaXMuc3RyaWN0LEZ1bmN0aW9uKSlyZXR1cm4gdGhpcy5zdHJpY3QoYSk7dGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuZXhwZWN0ZWQgdmFsdWUgKFwiK2ErXCIgIT09IFwiK3RoaXMudmFsdWUrXCIpLlwiKX1yZXR1cm4gYX0sd3JpdGU6ZnVuY3Rpb24oYSl7dGhpcy5iYXNlV3JpdGUodGhpcy5zdHJpY3R8fHZvaWQgMD09PWE/dGhpcy52YWx1ZTphKX19KSxvW1wiZW51bVwiXT1qKHtwYXJhbXM6W1wiYmFzZVR5cGVcIixcIm1hdGNoZXNcIl0sc2V0UGFyYW1zOmZ1bmN0aW9uKGEsYil7dGhpcy5iYWNrTWF0Y2hlcz17fTtmb3IodmFyIGMgaW4gYil0aGlzLmJhY2tNYXRjaGVzW2JbY11dPWN9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJhc2VSZWFkKCk7cmV0dXJuIGEgaW4gdGhpcy5tYXRjaGVzP3RoaXMubWF0Y2hlc1thXTphfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLmJhc2VXcml0ZShhIGluIHRoaXMuYmFja01hdGNoZXM/dGhpcy5iYWNrTWF0Y2hlc1thXTphKX19KSxvLmV4dGVuZD1pKHtzZXRQYXJhbXM6ZnVuY3Rpb24oKXt0aGlzLnBhcnRzPWFyZ3VtZW50c30scmVzb2x2ZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5wYXJ0cyxjPWIubGVuZ3RoLGQ9bmV3IEFycmF5KGMpLGU9MDtjPmU7ZSsrKWRbZV09YShiW2VdKTt0aGlzLnBhcnRzPWR9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhcnRzLGI9dGhpcy5iaW5hcnkucmVhZChhWzBdKTtyZXR1cm4gdGhpcy5iaW5hcnkuaW5Db250ZXh0KGIsZnVuY3Rpb24oKXtmb3IodmFyIGM9MSxlPWEubGVuZ3RoO2U+YztjKyspZChiLHRoaXMucmVhZChhW2NdKSl9KSxifSx3cml0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBhcnRzO3RoaXMuYmluYXJ5LmluQ29udGV4dChhLGZ1bmN0aW9uKCl7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aDtkPmM7YysrKXRoaXMud3JpdGUoYltjXSxhKX0pfX0pLG9bXCJpZlwiXT1qKHtwYXJhbXM6W1wiY29uZGl0aW9uXCIsXCJ0cnVlVHlwZVwiLFwiZmFsc2VUeXBlXCJdLHR5cGVQYXJhbXM6W1widHJ1ZVR5cGVcIixcImZhbHNlVHlwZVwiXSxnZXRCYXNlVHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvVmFsdWUodGhpcy5jb25kaXRpb24pP3RoaXMudHJ1ZVR5cGU6dGhpcy5mYWxzZVR5cGV9fSksby5pZl9ub3Q9by5pZk5vdD1qKHtzZXRQYXJhbXM6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYmFzZVR5cGU9W1wiaWZcIixhLGMsYl19fSksby5sYXp5PWooe21hcmtlcjpcImpCaW5hcnkuTGF6eVwiLHBhcmFtczpbXCJpbm5lclR5cGVcIixcImxlbmd0aFwiXSxnZXRCYXNlVHlwZTpmdW5jdGlvbigpe3JldHVybltcImJpbmFyeVwiLHRoaXMubGVuZ3RoLHRoaXMuYmluYXJ5LnR5cGVTZXRdfSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYil7cmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP1widmFsdWVcImluIGE/YS52YWx1ZTphLnZhbHVlPWEuYmluYXJ5LnJlYWQoYS5pbm5lclR5cGUpOmQoYSx7d2FzQ2hhbmdlZDohMCx2YWx1ZTpifSkudmFsdWV9O3JldHVybiBhW3RoaXMubWFya2VyXT0hMCxkKGEse2JpbmFyeTpkKHRoaXMuYmFzZVJlYWQoKSx7Y29udGV4dHM6dGhpcy5iaW5hcnkuY29udGV4dHMuc2xpY2UoKX0pLGlubmVyVHlwZTp0aGlzLmlubmVyVHlwZX0pfSx3cml0ZTpmdW5jdGlvbihhKXthLndhc0NoYW5nZWR8fCFhW3RoaXMubWFya2VyXT90aGlzLmJpbmFyeS53cml0ZSh0aGlzLmlubmVyVHlwZSxhKCkpOnRoaXMuYmFzZVdyaXRlKGEuYmluYXJ5KX19KSxvLm9iamVjdD1pKHtwYXJhbXM6W1wic3RydWN0dXJlXCIsXCJwcm90b1wiXSxyZXNvbHZlOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2Zvcih2YXIgZCBpbiB0aGlzLnN0cnVjdHVyZSliW2RdPWModGhpcy5zdHJ1Y3R1cmVbZF0sRnVuY3Rpb24pP3RoaXMuc3RydWN0dXJlW2RdOmEodGhpcy5zdHJ1Y3R1cmVbZF0pO3RoaXMuc3RydWN0dXJlPWJ9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9dGhpcy5zdHJ1Y3R1cmUsZD10aGlzLnByb3RvP2UodGhpcy5wcm90byk6e307cmV0dXJuIHRoaXMuYmluYXJ5LmluQ29udGV4dChkLGZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIGIpdGhpcy5fbmFtZWQoZnVuY3Rpb24oKXt2YXIgZj1jKGJbZV0sRnVuY3Rpb24pP2JbZV0uY2FsbChhLGQpOnRoaXMucmVhZChiW2VdKTt2b2lkIDAhPT1mJiYoZFtlXT1mKX0sZSkuY2FsbCh0aGlzKX0pLGR9LHdyaXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsZD10aGlzLnN0cnVjdHVyZTt0aGlzLmJpbmFyeS5pbkNvbnRleHQoYSxmdW5jdGlvbigpe2Zvcih2YXIgZSBpbiBkKXRoaXMuX25hbWVkKGZ1bmN0aW9uKCl7YyhkW2VdLEZ1bmN0aW9uKT9hW2VdPWRbZV0uY2FsbChiLGEpOnRoaXMud3JpdGUoZFtlXSxhW2VdKX0sZSkuY2FsbCh0aGlzKX0pfX0pLG8uc2tpcD1pKHtwYXJhbXM6W1wibGVuZ3RoXCJdLHJlYWQ6ZnVuY3Rpb24oKXt0aGlzLnZpZXcuc2tpcCh0aGlzLnRvVmFsdWUodGhpcy5sZW5ndGgpKX0sd3JpdGU6ZnVuY3Rpb24oKXt0aGlzLnJlYWQoKX19KSxvLnN0cmluZz1qKHtwYXJhbXM6W1wibGVuZ3RoXCIsXCJlbmNvZGluZ1wiXSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlldy5nZXRTdHJpbmcodGhpcy50b1ZhbHVlKHRoaXMubGVuZ3RoKSx2b2lkIDAsdGhpcy5lbmNvZGluZyl9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMudmlldy53cml0ZVN0cmluZyhhLHRoaXMuZW5jb2RpbmcpfX0pLG8uc3RyaW5nMD1pKHtwYXJhbXM6W1wibGVuZ3RoXCIsXCJlbmNvZGluZ1wiXSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy52aWV3LGI9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09Yil7dmFyIGMsZD1hLnRlbGwoKSxlPTA7Zm9yKGI9YS5ieXRlTGVuZ3RoLWQ7Yj5lJiYoYz1hLmdldFVpbnQ4KCkpOyllKys7dmFyIGY9YS5nZXRTdHJpbmcoZSxkLHRoaXMuZW5jb2RpbmcpO3JldHVybiBiPmUmJmEuc2tpcCgxKSxmfXJldHVybiBhLmdldFN0cmluZyhiLHZvaWQgMCx0aGlzLmVuY29kaW5nKS5yZXBsYWNlKC9cXDAuKiQvLFwiXCIpfSx3cml0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnZpZXcsYz12b2lkIDA9PT10aGlzLmxlbmd0aD8xOnRoaXMubGVuZ3RoLWEubGVuZ3RoO2Iud3JpdGVTdHJpbmcoYSx2b2lkIDAsdGhpcy5lbmNvZGluZyksYz4wJiYoYi53cml0ZVVpbnQ4KDApLGIuc2tpcChjLTEpKX19KTtoLmxvYWREYXRhPWcoZnVuY3Rpb24oYixkKXt2YXIgZTtpZihjKGIsYS5CbG9iKSl7dmFyIGY7aWYoXCJGaWxlUmVhZGVyXCJpbiBhKWY9bmV3IEZpbGVSZWFkZXIsZi5vbmxvYWQ9Zi5vbmVycm9yPWZ1bmN0aW9uKCl7ZCh0aGlzLmVycm9yLHRoaXMucmVzdWx0KX0sZi5yZWFkQXNBcnJheUJ1ZmZlcihiKTtlbHNle2Y9bmV3IEZpbGVSZWFkZXJTeW5jO3ZhciBnLGg7dHJ5e2g9Zi5yZWFkQXNBcnJheUJ1ZmZlcihiKX1jYXRjaChpKXtnPWl9ZmluYWxseXtkKGcsaCl9fX1lbHNle2lmKFwic3RyaW5nXCIhPXR5cGVvZiBiKWQobmV3IFR5cGVFcnJvcihcIlVuc3VwcG9ydGVkIHNvdXJjZSB0eXBlLlwiKSk7ZWxzZSBpZihlPWIubWF0Y2goL15kYXRhOiguKz8pKDtiYXNlNjQpPywoLiopJC8pKXRyeXt2YXIgaj1lWzJdLGs9ZVszXTtkKG51bGwsKGo/YXRvYjpkZWNvZGVVUklDb21wb25lbnQpKGspKX1jYXRjaChpKXtkKGkpfWVsc2UgaWYoXCJYTUxIdHRwUmVxdWVzdFwiaW4gYSl7dmFyIGw9bmV3IFhNTEh0dHBSZXF1ZXN0O2wub3BlbihcIkdFVFwiLGIsITApLFwicmVzcG9uc2VUeXBlXCJpbiBsP2wucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIjpcIm92ZXJyaWRlTWltZVR5cGVcImluIGw/bC5vdmVycmlkZU1pbWVUeXBlKFwidGV4dC9wbGFpbjsgY2hhcnNldD14LXVzZXItZGVmaW5lZFwiKTpsLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHQtQ2hhcnNldFwiLFwieC11c2VyLWRlZmluZWRcIiksXCJvbmxvYWRcImluIGx8fChsLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT10aGlzLnJlYWR5U3RhdGUmJnRoaXMub25sb2FkKCl9KTt2YXIgbT1mdW5jdGlvbihhKXtkKG5ldyBFcnJvcihhKSl9O2wub25sb2FkPWZ1bmN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLnN0YXR1cyYmMjAwIT09dGhpcy5zdGF0dXM/bShcIkhUVFAgRXJyb3IgI1wiK3RoaXMuc3RhdHVzK1wiOiBcIit0aGlzLnN0YXR1c1RleHQpOihcInJlc3BvbnNlXCJpbiB0aGlzfHwodGhpcy5yZXNwb25zZT1uZXcgVkJBcnJheSh0aGlzLnJlc3BvbnNlQm9keSkudG9BcnJheSgpKSx2b2lkIGQobnVsbCx0aGlzLnJlc3BvbnNlKSl9LGwub25lcnJvcj1mdW5jdGlvbigpe20oXCJOZXR3b3JrIGVycm9yLlwiKX0sbC5zZW5kKG51bGwpfWVsc2UgZChuZXcgVHlwZUVycm9yKFwiVW5zdXBwb3J0ZWQgc291cmNlIHR5cGUuXCIpKX19KSxoLmxvYWQ9ZyhmdW5jdGlvbihhLGIsYyl7dmFyIGQ9aC5sb2FkRGF0YShhKTtoLmxvYWQuZ2V0VHlwZVNldChhLGIsZnVuY3Rpb24oYSl7ZC50aGVuKGZ1bmN0aW9uKGIpe2MobnVsbCxuZXcgaChiLGEpKX0sYyl9KX0pLGgubG9hZC5nZXRUeXBlU2V0PWZ1bmN0aW9uKGEsYixjKXtjKGIpfSxuLl90b1VSST1cIlVSTFwiaW4gYSYmXCJjcmVhdGVPYmplY3RVUkxcImluIFVSTD9mdW5jdGlvbihhKXt2YXIgYj10aGlzLnNlZWsoMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcuZ2V0Qnl0ZXMoKX0pO3JldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtiXSx7dHlwZTphfSkpfTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNlZWsoMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcuZ2V0U3RyaW5nKHZvaWQgMCx2b2lkIDAsXCJiaW5hcnlcIil9KTtyZXR1cm5cImRhdGE6XCIrYStcIjtiYXNlNjQsXCIrYnRvYShiKX0sbi5fbWltZVR5cGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGF8fHRoaXMudHlwZVNldFtcImpCaW5hcnkubWltZVR5cGVcIl18fFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCJ9LG4udG9VUkk9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3RvVVJJKHRoaXMuX21pbWVUeXBlKGEpKX07aWYoayl7dmFyIHQ9aC5kb3dubG9hZGVyPWsuY3JlYXRlRWxlbWVudChcImFcIik7dC5zdHlsZS5kaXNwbGF5PVwibm9uZVwifXJldHVybiBuLnNhdmVBcz1nKGZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYSl7XCJtc1NhdmVCbG9iXCJpbiBuYXZpZ2F0b3I/bmF2aWdhdG9yLm1zU2F2ZUJsb2IobmV3IEJsb2IoW3RoaXMucmVhZChcImJsb2JcIiwwKV0se3R5cGU6dGhpcy5fbWltZVR5cGUoYil9KSxhKTprPyh0LnBhcmVudE5vZGV8fGsuYm9keS5hcHBlbmRDaGlsZCh0KSx0LmhyZWY9dGhpcy50b1VSSShiKSx0LmRvd25sb2FkPWEsdC5jbGljaygpLHQuaHJlZj10LmRvd25sb2FkPVwiXCIpOmMobmV3IFR5cGVFcnJvcihcIlNhdmluZyBmcm9tIFdlYiBXb3JrZXIgaXMgbm90IHN1cHBvcnRlZC5cIikpLGMoKX1lbHNlIGMobmV3IFR5cGVFcnJvcihcIlVuc3VwcG9ydGVkIHN0b3JhZ2UgdHlwZS5cIikpfSksaH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9amJpbmFyeS5qcy5tYXAiLCIhZnVuY3Rpb24oZmFjdG9yeSkge1xuICAgIHZhciBnbG9iYWwgPSB0aGlzO1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShnbG9iYWwpO1xufShmdW5jdGlvbihnbG9iYWwpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBpcyhvYmosIEN0b3IpIHtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgIT0gdHlwZW9mIG9iaiB8fCBudWxsID09PSBvYmogPyAhMSA6IG9iai5jb25zdHJ1Y3RvciA9PT0gQ3RvciB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gXCJbb2JqZWN0IFwiICsgQ3Rvci5uYW1lICsgXCJdXCI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFycmF5RnJvbShhcnJheUxpa2UsIGZvcmNlQ29weSkge1xuICAgICAgICByZXR1cm4gIWZvcmNlQ29weSAmJiBpcyhhcnJheUxpa2UsIEFycmF5KSA/IGFycmF5TGlrZSA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycmF5TGlrZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlZmluZWQodmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB2YWx1ZSA/IHZhbHVlIDogZGVmYXVsdFZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBqRGF0YVZpZXcoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgaWYgKGpEYXRhVmlldy5pcyhidWZmZXIpKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gYnVmZmVyLnNsaWNlKGJ5dGVPZmZzZXQsIGJ5dGVPZmZzZXQgKyBieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuX2xpdHRsZUVuZGlhbiA9IGRlZmluZWQobGl0dGxlRW5kaWFuLCByZXN1bHQuX2xpdHRsZUVuZGlhbiksIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWpEYXRhVmlldy5pcyh0aGlzKSkgcmV0dXJuIG5ldyBqRGF0YVZpZXcoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICBpZiAodGhpcy5idWZmZXIgPSBidWZmZXIgPSBqRGF0YVZpZXcud3JhcEJ1ZmZlcihidWZmZXIpLCB0aGlzLl9pc0FycmF5QnVmZmVyID0gY29tcGF0aWJpbGl0eS5BcnJheUJ1ZmZlciAmJiBpcyhidWZmZXIsIEFycmF5QnVmZmVyKSwgXG4gICAgICAgIHRoaXMuX2lzUGl4ZWxEYXRhID0gITEsIHRoaXMuX2lzRGF0YVZpZXcgPSBjb21wYXRpYmlsaXR5LkRhdGFWaWV3ICYmIHRoaXMuX2lzQXJyYXlCdWZmZXIsIFxuICAgICAgICB0aGlzLl9pc05vZGVCdWZmZXIgPSAhMCAmJiBjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgJiYgaXMoYnVmZmVyLCBCdWZmZXIpLCAhdGhpcy5faXNOb2RlQnVmZmVyICYmICF0aGlzLl9pc0FycmF5QnVmZmVyICYmICFpcyhidWZmZXIsIEFycmF5KSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcImpEYXRhVmlldyBidWZmZXIgaGFzIGFuIGluY29tcGF0aWJsZSB0eXBlXCIpO1xuICAgICAgICB0aGlzLl9saXR0bGVFbmRpYW4gPSAhIWxpdHRsZUVuZGlhbjtcbiAgICAgICAgdmFyIGJ1ZmZlckxlbmd0aCA9IFwiYnl0ZUxlbmd0aFwiIGluIGJ1ZmZlciA/IGJ1ZmZlci5ieXRlTGVuZ3RoIDogYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5ieXRlT2Zmc2V0ID0gYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgMCksIHRoaXMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPSBkZWZpbmVkKGJ5dGVMZW5ndGgsIGJ1ZmZlckxlbmd0aCAtIGJ5dGVPZmZzZXQpLCBcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gdGhpcy5fYml0T2Zmc2V0ID0gMCwgdGhpcy5faXNEYXRhVmlldyA/IHRoaXMuX3ZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSA6IHRoaXMuX2NoZWNrQm91bmRzKGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgsIGJ1ZmZlckxlbmd0aCksIFxuICAgICAgICB0aGlzLl9lbmdpbmVBY3Rpb24gPSB0aGlzLl9pc0RhdGFWaWV3ID8gdGhpcy5fZGF0YVZpZXdBY3Rpb24gOiB0aGlzLl9pc05vZGVCdWZmZXIgPyB0aGlzLl9ub2RlQnVmZmVyQWN0aW9uIDogdGhpcy5faXNBcnJheUJ1ZmZlciA/IHRoaXMuX2FycmF5QnVmZmVyQWN0aW9uIDogdGhpcy5fYXJyYXlBY3Rpb247XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldENoYXJDb2RlcyhzdHJpbmcpIHtcbiAgICAgICAgaWYgKGNvbXBhdGliaWxpdHkuTm9kZUJ1ZmZlcikgcmV0dXJuIG5ldyBCdWZmZXIoc3RyaW5nLCBcImJpbmFyeVwiKTtcbiAgICAgICAgZm9yICh2YXIgVHlwZSA9IGNvbXBhdGliaWxpdHkuQXJyYXlCdWZmZXIgPyBVaW50OEFycmF5IDogQXJyYXksIGNvZGVzID0gbmV3IFR5cGUoc3RyaW5nLmxlbmd0aCksIGkgPSAwLCBsZW5ndGggPSBzdHJpbmcubGVuZ3RoOyBsZW5ndGggPiBpOyBpKyspIGNvZGVzW2ldID0gMjU1ICYgc3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIHJldHVybiBjb2RlcztcbiAgICB9XG4gICAgZnVuY3Rpb24gcG93MihuKSB7XG4gICAgICAgIHJldHVybiBuID49IDAgJiYgMzEgPiBuID8gMSA8PCBuIDogcG93MltuXSB8fCAocG93MltuXSA9IE1hdGgucG93KDIsIG4pKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gVWludDY0KGxvLCBoaSkge1xuICAgICAgICB0aGlzLmxvID0gbG8sIHRoaXMuaGkgPSBoaTtcbiAgICB9XG4gICAgZnVuY3Rpb24gSW50NjQoKSB7XG4gICAgICAgIFVpbnQ2NC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICB2YXIgY29tcGF0aWJpbGl0eSA9IHtcbiAgICAgICAgTm9kZUJ1ZmZlcjogITAgJiYgXCJCdWZmZXJcIiBpbiBnbG9iYWwsXG4gICAgICAgIERhdGFWaWV3OiBcIkRhdGFWaWV3XCIgaW4gZ2xvYmFsLFxuICAgICAgICBBcnJheUJ1ZmZlcjogXCJBcnJheUJ1ZmZlclwiIGluIGdsb2JhbCxcbiAgICAgICAgUGl4ZWxEYXRhOiAhMVxuICAgIH0sIFRleHRFbmNvZGVyID0gZ2xvYmFsLlRleHRFbmNvZGVyLCBUZXh0RGVjb2RlciA9IGdsb2JhbC5UZXh0RGVjb2RlcjtcbiAgICBjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgJiYgIWZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYnVmZmVyLndyaXRlRmxvYXRMRSgxLzAsIDApO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgPSAhMTtcbiAgICAgICAgfVxuICAgIH0obmV3IEJ1ZmZlcig0KSk7XG4gICAgdmFyIGRhdGFUeXBlcyA9IHtcbiAgICAgICAgSW50ODogMSxcbiAgICAgICAgSW50MTY6IDIsXG4gICAgICAgIEludDMyOiA0LFxuICAgICAgICBVaW50ODogMSxcbiAgICAgICAgVWludDE2OiAyLFxuICAgICAgICBVaW50MzI6IDQsXG4gICAgICAgIEZsb2F0MzI6IDQsXG4gICAgICAgIEZsb2F0NjQ6IDhcbiAgICB9O1xuICAgIGpEYXRhVmlldy53cmFwQnVmZmVyID0gZnVuY3Rpb24oYnVmZmVyKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIGJ1ZmZlcikge1xuICAgICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIGlmIChjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIpIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYnVmZmVyKSwgYnVmZmVyLmZpbGwoMCk7IGVsc2UgaWYgKGNvbXBhdGliaWxpdHkuQXJyYXlCdWZmZXIpIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcikuYnVmZmVyOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBuZXcgQXJyYXkoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykgYnVmZmVyW2ldID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBidWZmZXI7XG5cbiAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICBidWZmZXIgPSBnZXRDaGFyQ29kZXMoYnVmZmVyKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJsZW5ndGhcIiBpbiBidWZmZXIgJiYgIShjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgJiYgaXMoYnVmZmVyLCBCdWZmZXIpIHx8IGNvbXBhdGliaWxpdHkuQXJyYXlCdWZmZXIgJiYgaXMoYnVmZmVyLCBBcnJheUJ1ZmZlcikpICYmIChjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgPyBidWZmZXIgPSBuZXcgQnVmZmVyKGJ1ZmZlcikgOiBjb21wYXRpYmlsaXR5LkFycmF5QnVmZmVyID8gaXMoYnVmZmVyLCBBcnJheUJ1ZmZlcikgfHwgKGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcikuYnVmZmVyLCBcbiAgICAgICAgICAgIGlzKGJ1ZmZlciwgQXJyYXlCdWZmZXIpIHx8IChidWZmZXIgPSBuZXcgVWludDhBcnJheShhcnJheUZyb20oYnVmZmVyLCAhMCkpLmJ1ZmZlcikpIDogYnVmZmVyID0gYXJyYXlGcm9tKGJ1ZmZlcikpLCBcbiAgICAgICAgICAgIGJ1ZmZlcjtcbiAgICAgICAgfVxuICAgIH0sIGpEYXRhVmlldy5pcyA9IGZ1bmN0aW9uKHZpZXcpIHtcbiAgICAgICAgcmV0dXJuIHZpZXcgJiYgdmlldy5qRGF0YVZpZXc7XG4gICAgfSwgakRhdGFWaWV3LmZyb20gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBqRGF0YVZpZXcoYXJndW1lbnRzKTtcbiAgICB9LCBqRGF0YVZpZXcuVWludDY0ID0gVWludDY0LCBVaW50NjQucHJvdG90eXBlID0ge1xuICAgICAgICB2YWx1ZU9mOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvICsgcG93MigzMikgKiB0aGlzLmhpO1xuICAgICAgICB9LFxuICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLnByb3RvdHlwZS50b1N0cmluZy5hcHBseSh0aGlzLnZhbHVlT2YoKSwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH0sIFVpbnQ2NC5mcm9tTnVtYmVyID0gZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgIHZhciBoaSA9IE1hdGguZmxvb3IobnVtYmVyIC8gcG93MigzMikpLCBsbyA9IG51bWJlciAtIGhpICogcG93MigzMik7XG4gICAgICAgIHJldHVybiBuZXcgVWludDY0KGxvLCBoaSk7XG4gICAgfSwgakRhdGFWaWV3LkludDY0ID0gSW50NjQsIEludDY0LnByb3RvdHlwZSA9IFwiY3JlYXRlXCIgaW4gT2JqZWN0ID8gT2JqZWN0LmNyZWF0ZShVaW50NjQucHJvdG90eXBlKSA6IG5ldyBVaW50NjQoKSwgXG4gICAgSW50NjQucHJvdG90eXBlLnZhbHVlT2YgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGkgPCBwb3cyKDMxKSA/IFVpbnQ2NC5wcm90b3R5cGUudmFsdWVPZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogLShwb3cyKDMyKSAtIHRoaXMubG8gKyBwb3cyKDMyKSAqIChwb3cyKDMyKSAtIDEgLSB0aGlzLmhpKSk7XG4gICAgfSwgSW50NjQuZnJvbU51bWJlciA9IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICB2YXIgbG8sIGhpO1xuICAgICAgICBpZiAobnVtYmVyID49IDApIHtcbiAgICAgICAgICAgIHZhciB1bnNpZ25lZCA9IFVpbnQ2NC5mcm9tTnVtYmVyKG51bWJlcik7XG4gICAgICAgICAgICBsbyA9IHVuc2lnbmVkLmxvLCBoaSA9IHVuc2lnbmVkLmhpO1xuICAgICAgICB9IGVsc2UgaGkgPSBNYXRoLmZsb29yKG51bWJlciAvIHBvdzIoMzIpKSwgbG8gPSBudW1iZXIgLSBoaSAqIHBvdzIoMzIpLCBoaSArPSBwb3cyKDMyKTtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnQ2NChsbywgaGkpO1xuICAgIH07XG4gICAgdmFyIHByb3RvID0gakRhdGFWaWV3LnByb3RvdHlwZSA9IHtcbiAgICAgICAgY29tcGF0aWJpbGl0eTogY29tcGF0aWJpbGl0eSxcbiAgICAgICAgakRhdGFWaWV3OiAhMCxcbiAgICAgICAgX2NoZWNrQm91bmRzOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhMZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChcIm51bWJlclwiICE9IHR5cGVvZiBieXRlT2Zmc2V0KSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2Zmc2V0IGlzIG5vdCBhIG51bWJlci5cIik7XG4gICAgICAgICAgICBpZiAoXCJudW1iZXJcIiAhPSB0eXBlb2YgYnl0ZUxlbmd0aCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlNpemUgaXMgbm90IGEgbnVtYmVyLlwiKTtcbiAgICAgICAgICAgIGlmICgwID4gYnl0ZUxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJMZW5ndGggaXMgbmVnYXRpdmUuXCIpO1xuICAgICAgICAgICAgaWYgKDAgPiBieXRlT2Zmc2V0IHx8IGJ5dGVPZmZzZXQgKyBieXRlTGVuZ3RoID4gZGVmaW5lZChtYXhMZW5ndGgsIHRoaXMuYnl0ZUxlbmd0aCkpIHRocm93IG5ldyBSYW5nZUVycm9yKFwiT2Zmc2V0cyBhcmUgb3V0IG9mIGJvdW5kcy5cIik7XG4gICAgICAgIH0sXG4gICAgICAgIF9hY3Rpb246IGZ1bmN0aW9uKHR5cGUsIGlzUmVhZEFjdGlvbiwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuLCB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZUFjdGlvbih0eXBlLCBpc1JlYWRBY3Rpb24sIGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSwgZGVmaW5lZChsaXR0bGVFbmRpYW4sIHRoaXMuX2xpdHRsZUVuZGlhbiksIHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgX2RhdGFWaWV3QWN0aW9uOiBmdW5jdGlvbih0eXBlLCBpc1JlYWRBY3Rpb24sIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0ICsgZGF0YVR5cGVzW3R5cGVdLCBpc1JlYWRBY3Rpb24gPyB0aGlzLl92aWV3W1wiZ2V0XCIgKyB0eXBlXShieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIDogdGhpcy5fdmlld1tcInNldFwiICsgdHlwZV0oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9hcnJheUJ1ZmZlckFjdGlvbjogZnVuY3Rpb24odHlwZSwgaXNSZWFkQWN0aW9uLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4sIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdHlwZWRBcnJheSwgc2l6ZSA9IGRhdGFUeXBlc1t0eXBlXSwgVHlwZWRBcnJheSA9IGdsb2JhbFt0eXBlICsgXCJBcnJheVwiXTtcbiAgICAgICAgICAgIGlmIChsaXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgMSA9PT0gc2l6ZSB8fCAodGhpcy5ieXRlT2Zmc2V0ICsgYnl0ZU9mZnNldCkgJSBzaXplID09PSAwICYmIGxpdHRsZUVuZGlhbikgcmV0dXJuIHR5cGVkQXJyYXkgPSBuZXcgVHlwZWRBcnJheSh0aGlzLmJ1ZmZlciwgdGhpcy5ieXRlT2Zmc2V0ICsgYnl0ZU9mZnNldCwgMSksIFxuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIHNpemUsIGlzUmVhZEFjdGlvbiA/IHR5cGVkQXJyYXlbMF0gOiB0eXBlZEFycmF5WzBdID0gdmFsdWU7XG4gICAgICAgICAgICB2YXIgYnl0ZXMgPSBuZXcgVWludDhBcnJheShpc1JlYWRBY3Rpb24gPyB0aGlzLmdldEJ5dGVzKHNpemUsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgITApIDogc2l6ZSk7XG4gICAgICAgICAgICByZXR1cm4gdHlwZWRBcnJheSA9IG5ldyBUeXBlZEFycmF5KGJ5dGVzLmJ1ZmZlciwgMCwgMSksIGlzUmVhZEFjdGlvbiA/IHR5cGVkQXJyYXlbMF0gOiAodHlwZWRBcnJheVswXSA9IHZhbHVlLCBcbiAgICAgICAgICAgIHZvaWQgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgYnl0ZXMsIGxpdHRsZUVuZGlhbikpO1xuICAgICAgICB9LFxuICAgICAgICBfYXJyYXlBY3Rpb246IGZ1bmN0aW9uKHR5cGUsIGlzUmVhZEFjdGlvbiwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuLCB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGlzUmVhZEFjdGlvbiA/IHRoaXNbXCJfZ2V0XCIgKyB0eXBlXShieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIDogdGhpc1tcIl9zZXRcIiArIHR5cGVdKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0Qnl0ZXM6IGZ1bmN0aW9uKGxlbmd0aCwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICBsaXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSwgXG4gICAgICAgICAgICBsZW5ndGggPSBkZWZpbmVkKGxlbmd0aCwgdGhpcy5ieXRlTGVuZ3RoIC0gYnl0ZU9mZnNldCksIHRoaXMuX2NoZWNrQm91bmRzKGJ5dGVPZmZzZXQsIGxlbmd0aCksIFxuICAgICAgICAgICAgYnl0ZU9mZnNldCArPSB0aGlzLmJ5dGVPZmZzZXQsIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgLSB0aGlzLmJ5dGVPZmZzZXQgKyBsZW5ndGg7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5faXNBcnJheUJ1ZmZlciA/IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyLCBieXRlT2Zmc2V0LCBsZW5ndGgpIDogKHRoaXMuYnVmZmVyLnNsaWNlIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZSkuY2FsbCh0aGlzLmJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZU9mZnNldCArIGxlbmd0aCk7XG4gICAgICAgICAgICByZXR1cm4gbGl0dGxlRW5kaWFuIHx8IDEgPj0gbGVuZ3RoID8gcmVzdWx0IDogYXJyYXlGcm9tKHJlc3VsdCkucmV2ZXJzZSgpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRCeXRlczogZnVuY3Rpb24obGVuZ3RoLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4sIHRvQXJyYXkpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLl9nZXRCeXRlcyhsZW5ndGgsIGJ5dGVPZmZzZXQsIGRlZmluZWQobGl0dGxlRW5kaWFuLCAhMCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRvQXJyYXkgPyBhcnJheUZyb20ocmVzdWx0KSA6IHJlc3VsdDtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldEJ5dGVzOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBieXRlcywgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKDAgIT09IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChsaXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tCb3VuZHMoYnl0ZU9mZnNldCwgbGVuZ3RoKSwgIWxpdHRsZUVuZGlhbiAmJiBsZW5ndGggPiAxICYmIChieXRlcyA9IGFycmF5RnJvbShieXRlcywgITApLnJldmVyc2UoKSksIFxuICAgICAgICAgICAgICAgIGJ5dGVPZmZzZXQgKz0gdGhpcy5ieXRlT2Zmc2V0LCB0aGlzLl9pc0FycmF5QnVmZmVyKSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlciwgYnl0ZU9mZnNldCwgbGVuZ3RoKS5zZXQoYnl0ZXMpOyBlbHNlIGlmICh0aGlzLl9pc05vZGVCdWZmZXIpIG5ldyBCdWZmZXIoYnl0ZXMpLmNvcHkodGhpcy5idWZmZXIsIGJ5dGVPZmZzZXQpOyBlbHNlIGZvciAodmFyIGkgPSAwOyBsZW5ndGggPiBpOyBpKyspIHRoaXMuYnVmZmVyW2J5dGVPZmZzZXQgKyBpXSA9IGJ5dGVzW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgLSB0aGlzLmJ5dGVPZmZzZXQgKyBsZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNldEJ5dGVzOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBieXRlcywgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRCeXRlcyhieXRlT2Zmc2V0LCBieXRlcywgZGVmaW5lZChsaXR0bGVFbmRpYW4sICEwKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFN0cmluZzogZnVuY3Rpb24oYnl0ZUxlbmd0aCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc05vZGVCdWZmZXIpIHJldHVybiBieXRlT2Zmc2V0ID0gZGVmaW5lZChieXRlT2Zmc2V0LCB0aGlzLl9vZmZzZXQpLCBieXRlTGVuZ3RoID0gZGVmaW5lZChieXRlTGVuZ3RoLCB0aGlzLmJ5dGVMZW5ndGggLSBieXRlT2Zmc2V0KSwgXG4gICAgICAgICAgICB0aGlzLl9jaGVja0JvdW5kcyhieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSwgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIGJ5dGVMZW5ndGgsIFxuICAgICAgICAgICAgdGhpcy5idWZmZXIudG9TdHJpbmcoZW5jb2RpbmcgfHwgXCJiaW5hcnlcIiwgdGhpcy5ieXRlT2Zmc2V0ICsgYnl0ZU9mZnNldCwgdGhpcy5ieXRlT2Zmc2V0ICsgdGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHZhciBieXRlcyA9IHRoaXMuX2dldEJ5dGVzKGJ5dGVMZW5ndGgsIGJ5dGVPZmZzZXQsICEwKTtcbiAgICAgICAgICAgIGlmIChlbmNvZGluZyA9IFwidXRmOFwiID09PSBlbmNvZGluZyA/IFwidXRmLThcIiA6IGVuY29kaW5nIHx8IFwiYmluYXJ5XCIsIFRleHREZWNvZGVyICYmIFwiYmluYXJ5XCIgIT09IGVuY29kaW5nKSByZXR1cm4gbmV3IFRleHREZWNvZGVyKGVuY29kaW5nKS5kZWNvZGUodGhpcy5faXNBcnJheUJ1ZmZlciA/IGJ5dGVzIDogbmV3IFVpbnQ4QXJyYXkoYnl0ZXMpKTtcbiAgICAgICAgICAgIHZhciBzdHJpbmcgPSBcIlwiO1xuICAgICAgICAgICAgYnl0ZUxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBieXRlTGVuZ3RoID4gaTsgaSsrKSBzdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSk7XG4gICAgICAgICAgICByZXR1cm4gXCJ1dGYtOFwiID09PSBlbmNvZGluZyAmJiAoc3RyaW5nID0gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShzdHJpbmcpKSksIHN0cmluZztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0U3RyaW5nOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBzdWJTdHJpbmcsIGVuY29kaW5nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faXNOb2RlQnVmZmVyKSByZXR1cm4gYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSwgdGhpcy5fY2hlY2tCb3VuZHMoYnl0ZU9mZnNldCwgc3ViU3RyaW5nLmxlbmd0aCksIFxuICAgICAgICAgICAgdm9pZCAodGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIHRoaXMuYnVmZmVyLndyaXRlKHN1YlN0cmluZywgdGhpcy5ieXRlT2Zmc2V0ICsgYnl0ZU9mZnNldCwgZW5jb2RpbmcgfHwgXCJiaW5hcnlcIikpO1xuICAgICAgICAgICAgZW5jb2RpbmcgPSBcInV0ZjhcIiA9PT0gZW5jb2RpbmcgPyBcInV0Zi04XCIgOiBlbmNvZGluZyB8fCBcImJpbmFyeVwiO1xuICAgICAgICAgICAgdmFyIGJ5dGVzO1xuICAgICAgICAgICAgVGV4dEVuY29kZXIgJiYgXCJiaW5hcnlcIiAhPT0gZW5jb2RpbmcgPyBieXRlcyA9IG5ldyBUZXh0RW5jb2RlcihlbmNvZGluZykuZW5jb2RlKHN1YlN0cmluZykgOiAoXCJ1dGYtOFwiID09PSBlbmNvZGluZyAmJiAoc3ViU3RyaW5nID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN1YlN0cmluZykpKSwgXG4gICAgICAgICAgICBieXRlcyA9IGdldENoYXJDb2RlcyhzdWJTdHJpbmcpKSwgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgYnl0ZXMsICEwKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q2hhcjogZnVuY3Rpb24oYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RyaW5nKDEsIGJ5dGVPZmZzZXQpO1xuICAgICAgICB9LFxuICAgICAgICBzZXRDaGFyOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBjaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RyaW5nKGJ5dGVPZmZzZXQsIGNoYXJhY3Rlcik7XG4gICAgICAgIH0sXG4gICAgICAgIHRlbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29mZnNldDtcbiAgICAgICAgfSxcbiAgICAgICAgc2VlazogZnVuY3Rpb24oYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrQm91bmRzKGJ5dGVPZmZzZXQsIDApLCB0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0O1xuICAgICAgICB9LFxuICAgICAgICBza2lwOiBmdW5jdGlvbihieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWVrKHRoaXMuX29mZnNldCArIGJ5dGVMZW5ndGgpO1xuICAgICAgICB9LFxuICAgICAgICBzbGljZTogZnVuY3Rpb24oc3RhcnQsIGVuZCwgZm9yY2VDb3B5KSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBub3JtYWxpemVPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDAgPiBvZmZzZXQgPyBvZmZzZXQgKyBieXRlTGVuZ3RoIDogb2Zmc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0YXJ0ID0gbm9ybWFsaXplT2Zmc2V0KHN0YXJ0LCB0aGlzLmJ5dGVMZW5ndGgpLCBlbmQgPSBub3JtYWxpemVPZmZzZXQoZGVmaW5lZChlbmQsIHRoaXMuYnl0ZUxlbmd0aCksIHRoaXMuYnl0ZUxlbmd0aCksIFxuICAgICAgICAgICAgZm9yY2VDb3B5ID8gbmV3IGpEYXRhVmlldyh0aGlzLmdldEJ5dGVzKGVuZCAtIHN0YXJ0LCBzdGFydCwgITAsICEwKSwgdm9pZCAwLCB2b2lkIDAsIHRoaXMuX2xpdHRsZUVuZGlhbikgOiBuZXcgakRhdGFWaWV3KHRoaXMuYnVmZmVyLCB0aGlzLmJ5dGVPZmZzZXQgKyBzdGFydCwgZW5kIC0gc3RhcnQsIHRoaXMuX2xpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIGFsaWduQnk6IGZ1bmN0aW9uKGJ5dGVDb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2JpdE9mZnNldCA9IDAsIDEgIT09IGRlZmluZWQoYnl0ZUNvdW50LCAxKSA/IHRoaXMuc2tpcChieXRlQ291bnQgLSAodGhpcy5fb2Zmc2V0ICUgYnl0ZUNvdW50IHx8IGJ5dGVDb3VudCkpIDogdGhpcy5fb2Zmc2V0O1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0RmxvYXQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuX2dldEJ5dGVzKDgsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiksIHNpZ24gPSAxIC0gMiAqIChiWzddID4+IDcpLCBleHBvbmVudCA9ICgoYls3XSA8PCAxICYgMjU1KSA8PCAzIHwgYls2XSA+PiA0KSAtIDEwMjMsIG1hbnRpc3NhID0gKDE1ICYgYls2XSkgKiBwb3cyKDQ4KSArIGJbNV0gKiBwb3cyKDQwKSArIGJbNF0gKiBwb3cyKDMyKSArIGJbM10gKiBwb3cyKDI0KSArIGJbMl0gKiBwb3cyKDE2KSArIGJbMV0gKiBwb3cyKDgpICsgYlswXTtcbiAgICAgICAgICAgIHJldHVybiAxMDI0ID09PSBleHBvbmVudCA/IDAgIT09IG1hbnRpc3NhID8gMC8wIDogMS8wICogc2lnbiA6IC0xMDIzID09PSBleHBvbmVudCA/IHNpZ24gKiBtYW50aXNzYSAqIHBvdzIoLTEwNzQpIDogc2lnbiAqICgxICsgbWFudGlzc2EgKiBwb3cyKC01MikpICogcG93MihleHBvbmVudCk7XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRGbG9hdDMyOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5fZ2V0Qnl0ZXMoNCwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSwgc2lnbiA9IDEgLSAyICogKGJbM10gPj4gNyksIGV4cG9uZW50ID0gKGJbM10gPDwgMSAmIDI1NSB8IGJbMl0gPj4gNykgLSAxMjcsIG1hbnRpc3NhID0gKDEyNyAmIGJbMl0pIDw8IDE2IHwgYlsxXSA8PCA4IHwgYlswXTtcbiAgICAgICAgICAgIHJldHVybiAxMjggPT09IGV4cG9uZW50ID8gMCAhPT0gbWFudGlzc2EgPyAwLzAgOiAxLzAgKiBzaWduIDogLTEyNyA9PT0gZXhwb25lbnQgPyBzaWduICogbWFudGlzc2EgKiBwb3cyKC0xNDkpIDogc2lnbiAqICgxICsgbWFudGlzc2EgKiBwb3cyKC0yMykpICogcG93MihleHBvbmVudCk7XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXQ2NDogZnVuY3Rpb24oVHlwZSwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICBsaXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIGZvciAodmFyIHBhcnRzID0gbGl0dGxlRW5kaWFuID8gWyAwLCA0IF0gOiBbIDQsIDAgXSwgaSA9IDA7IDIgPiBpOyBpKyspIHBhcnRzW2ldID0gdGhpcy5nZXRVaW50MzIoYnl0ZU9mZnNldCArIHBhcnRzW2ldLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgKyA4LCBuZXcgVHlwZShwYXJ0c1swXSwgcGFydHNbMV0pO1xuICAgICAgICB9LFxuICAgICAgICBnZXRJbnQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0NjQoSW50NjQsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFVpbnQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0NjQoVWludDY0LCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0SW50MzI6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLl9nZXRCeXRlcyg0LCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgcmV0dXJuIGJbM10gPDwgMjQgfCBiWzJdIDw8IDE2IHwgYlsxXSA8PCA4IHwgYlswXTtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldFVpbnQzMjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW50MzIoYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSA+Pj4gMDtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldEludDE2OiBmdW5jdGlvbihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRVaW50MTYoYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSA8PCAxNiA+PiAxNjtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldFVpbnQxNjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuX2dldEJ5dGVzKDIsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgICAgICByZXR1cm4gYlsxXSA8PCA4IHwgYlswXTtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldEludDg6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRVaW50OChieXRlT2Zmc2V0KSA8PCAyNCA+PiAyNDtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldFVpbnQ4OiBmdW5jdGlvbihieXRlT2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Qnl0ZXMoMSwgYnl0ZU9mZnNldClbMF07XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRCaXRSYW5nZURhdGE6IGZ1bmN0aW9uKGJpdExlbmd0aCwgYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0Qml0ID0gKGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSA8PCAzKSArIHRoaXMuX2JpdE9mZnNldCwgZW5kQml0ID0gc3RhcnRCaXQgKyBiaXRMZW5ndGgsIHN0YXJ0ID0gc3RhcnRCaXQgPj4+IDMsIGVuZCA9IGVuZEJpdCArIDcgPj4+IDMsIGIgPSB0aGlzLl9nZXRCeXRlcyhlbmQgLSBzdGFydCwgc3RhcnQsICEwKSwgd2lkZVZhbHVlID0gMDtcbiAgICAgICAgICAgICh0aGlzLl9iaXRPZmZzZXQgPSA3ICYgZW5kQml0KSAmJiAodGhpcy5fYml0T2Zmc2V0IC09IDgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGIubGVuZ3RoOyBsZW5ndGggPiBpOyBpKyspIHdpZGVWYWx1ZSA9IHdpZGVWYWx1ZSA8PCA4IHwgYltpXTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICAgICAgICAgIGJ5dGVzOiBiLFxuICAgICAgICAgICAgICAgIHdpZGVWYWx1ZTogd2lkZVZhbHVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBnZXRTaWduZWQ6IGZ1bmN0aW9uKGJpdExlbmd0aCwgYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgdmFyIHNoaWZ0ID0gMzIgLSBiaXRMZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRVbnNpZ25lZChiaXRMZW5ndGgsIGJ5dGVPZmZzZXQpIDw8IHNoaWZ0ID4+IHNoaWZ0O1xuICAgICAgICB9LFxuICAgICAgICBnZXRVbnNpZ25lZDogZnVuY3Rpb24oYml0TGVuZ3RoLCBieXRlT2Zmc2V0KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9nZXRCaXRSYW5nZURhdGEoYml0TGVuZ3RoLCBieXRlT2Zmc2V0KS53aWRlVmFsdWUgPj4+IC10aGlzLl9iaXRPZmZzZXQ7XG4gICAgICAgICAgICByZXR1cm4gMzIgPiBiaXRMZW5ndGggPyB2YWx1ZSAmIH4oLTEgPDwgYml0TGVuZ3RoKSA6IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBfc2V0QmluYXJ5RmxvYXQ6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBtYW50U2l6ZSwgZXhwU2l6ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgZXhwb25lbnQsIG1hbnRpc3NhLCBzaWduQml0ID0gMCA+IHZhbHVlID8gMSA6IDAsIGVNYXggPSB+KC0xIDw8IGV4cFNpemUgLSAxKSwgZU1pbiA9IDEgLSBlTWF4O1xuICAgICAgICAgICAgMCA+IHZhbHVlICYmICh2YWx1ZSA9IC12YWx1ZSksIDAgPT09IHZhbHVlID8gKGV4cG9uZW50ID0gMCwgbWFudGlzc2EgPSAwKSA6IGlzTmFOKHZhbHVlKSA/IChleHBvbmVudCA9IDIgKiBlTWF4ICsgMSwgXG4gICAgICAgICAgICBtYW50aXNzYSA9IDEpIDogMS8wID09PSB2YWx1ZSA/IChleHBvbmVudCA9IDIgKiBlTWF4ICsgMSwgbWFudGlzc2EgPSAwKSA6IChleHBvbmVudCA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpLCBcbiAgICAgICAgICAgIGV4cG9uZW50ID49IGVNaW4gJiYgZU1heCA+PSBleHBvbmVudCA/IChtYW50aXNzYSA9IE1hdGguZmxvb3IoKHZhbHVlICogcG93MigtZXhwb25lbnQpIC0gMSkgKiBwb3cyKG1hbnRTaXplKSksIFxuICAgICAgICAgICAgZXhwb25lbnQgKz0gZU1heCkgOiAobWFudGlzc2EgPSBNYXRoLmZsb29yKHZhbHVlIC8gcG93MihlTWluIC0gbWFudFNpemUpKSwgZXhwb25lbnQgPSAwKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBiID0gW107IG1hbnRTaXplID49IDg7ICkgYi5wdXNoKG1hbnRpc3NhICUgMjU2KSwgbWFudGlzc2EgPSBNYXRoLmZsb29yKG1hbnRpc3NhIC8gMjU2KSwgXG4gICAgICAgICAgICBtYW50U2l6ZSAtPSA4O1xuICAgICAgICAgICAgZm9yIChleHBvbmVudCA9IGV4cG9uZW50IDw8IG1hbnRTaXplIHwgbWFudGlzc2EsIGV4cFNpemUgKz0gbWFudFNpemU7IGV4cFNpemUgPj0gODsgKSBiLnB1c2goMjU1ICYgZXhwb25lbnQpLCBcbiAgICAgICAgICAgIGV4cG9uZW50ID4+Pj0gOCwgZXhwU2l6ZSAtPSA4O1xuICAgICAgICAgICAgYi5wdXNoKHNpZ25CaXQgPDwgZXhwU2l6ZSB8IGV4cG9uZW50KSwgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgYiwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldEZsb2F0MzI6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJpbmFyeUZsb2F0KGJ5dGVPZmZzZXQsIHZhbHVlLCAyMywgOCwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldEZsb2F0NjQ6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJpbmFyeUZsb2F0KGJ5dGVPZmZzZXQsIHZhbHVlLCA1MiwgMTEsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXQ2NDogZnVuY3Rpb24oVHlwZSwgYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgXCJvYmplY3RcIiAhPSB0eXBlb2YgdmFsdWUgJiYgKHZhbHVlID0gVHlwZS5mcm9tTnVtYmVyKHZhbHVlKSksIGxpdHRsZUVuZGlhbiA9IGRlZmluZWQobGl0dGxlRW5kaWFuLCB0aGlzLl9saXR0bGVFbmRpYW4pLCBcbiAgICAgICAgICAgIGJ5dGVPZmZzZXQgPSBkZWZpbmVkKGJ5dGVPZmZzZXQsIHRoaXMuX29mZnNldCk7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBsaXR0bGVFbmRpYW4gPyB7XG4gICAgICAgICAgICAgICAgbG86IDAsXG4gICAgICAgICAgICAgICAgaGk6IDRcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgbG86IDQsXG4gICAgICAgICAgICAgICAgaGk6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHZhciBwYXJ0TmFtZSBpbiBwYXJ0cykgdGhpcy5zZXRVaW50MzIoYnl0ZU9mZnNldCArIHBhcnRzW3BhcnROYW1lXSwgdmFsdWVbcGFydE5hbWVdLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIDg7XG4gICAgICAgIH0sXG4gICAgICAgIHNldEludDY0OiBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXQ2NChJbnQ2NCwgYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFVpbnQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdGhpcy5fc2V0NjQoVWludDY0LCBieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldFVpbnQzMjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgWyAyNTUgJiB2YWx1ZSwgdmFsdWUgPj4+IDggJiAyNTUsIHZhbHVlID4+PiAxNiAmIDI1NSwgdmFsdWUgPj4+IDI0IF0sIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRVaW50MTY6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJ5dGVzKGJ5dGVPZmZzZXQsIFsgMjU1ICYgdmFsdWUsIHZhbHVlID4+PiA4ICYgMjU1IF0sIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRVaW50ODogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJ5dGVzKGJ5dGVPZmZzZXQsIFsgMjU1ICYgdmFsdWUgXSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFVuc2lnbmVkOiBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgYml0TGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuX2dldEJpdFJhbmdlRGF0YShiaXRMZW5ndGgsIGJ5dGVPZmZzZXQpLCB3aWRlVmFsdWUgPSBkYXRhLndpZGVWYWx1ZSwgYiA9IGRhdGEuYnl0ZXM7XG4gICAgICAgICAgICB3aWRlVmFsdWUgJj0gfih+KC0xIDw8IGJpdExlbmd0aCkgPDwgLXRoaXMuX2JpdE9mZnNldCksIHdpZGVWYWx1ZSB8PSAoMzIgPiBiaXRMZW5ndGggPyB2YWx1ZSAmIH4oLTEgPDwgYml0TGVuZ3RoKSA6IHZhbHVlKSA8PCAtdGhpcy5fYml0T2Zmc2V0O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGJbaV0gPSAyNTUgJiB3aWRlVmFsdWUsIHdpZGVWYWx1ZSA+Pj49IDg7XG4gICAgICAgICAgICB0aGlzLl9zZXRCeXRlcyhkYXRhLnN0YXJ0LCBiLCAhMCk7XG4gICAgICAgIH1cbiAgICB9LCBub2RlTmFtaW5nID0ge1xuICAgICAgICBJbnQ4OiBcIkludDhcIixcbiAgICAgICAgSW50MTY6IFwiSW50MTZcIixcbiAgICAgICAgSW50MzI6IFwiSW50MzJcIixcbiAgICAgICAgVWludDg6IFwiVUludDhcIixcbiAgICAgICAgVWludDE2OiBcIlVJbnQxNlwiLFxuICAgICAgICBVaW50MzI6IFwiVUludDMyXCIsXG4gICAgICAgIEZsb2F0MzI6IFwiRmxvYXRcIixcbiAgICAgICAgRmxvYXQ2NDogXCJEb3VibGVcIlxuICAgIH07XG4gICAgcHJvdG8uX25vZGVCdWZmZXJBY3Rpb24gPSBmdW5jdGlvbih0eXBlLCBpc1JlYWRBY3Rpb24sIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIGRhdGFUeXBlc1t0eXBlXTtcbiAgICAgICAgdmFyIG5vZGVOYW1lID0gbm9kZU5hbWluZ1t0eXBlXSArIChcIkludDhcIiA9PT0gdHlwZSB8fCBcIlVpbnQ4XCIgPT09IHR5cGUgPyBcIlwiIDogbGl0dGxlRW5kaWFuID8gXCJMRVwiIDogXCJCRVwiKTtcbiAgICAgICAgcmV0dXJuIGJ5dGVPZmZzZXQgKz0gdGhpcy5ieXRlT2Zmc2V0LCBpc1JlYWRBY3Rpb24gPyB0aGlzLmJ1ZmZlcltcInJlYWRcIiArIG5vZGVOYW1lXShieXRlT2Zmc2V0KSA6IHRoaXMuYnVmZmVyW1wid3JpdGVcIiArIG5vZGVOYW1lXSh2YWx1ZSwgYnl0ZU9mZnNldCk7XG4gICAgfTtcbiAgICBmb3IgKHZhciB0eXBlIGluIGRhdGFUeXBlcykgIWZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgcHJvdG9bXCJnZXRcIiArIHR5cGVdID0gZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uKHR5cGUsICEwLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LCBwcm90b1tcInNldFwiICsgdHlwZV0gPSBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9hY3Rpb24odHlwZSwgITEsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgdmFsdWUpO1xuICAgICAgICB9O1xuICAgIH0odHlwZSk7XG4gICAgcHJvdG8uX3NldEludDMyID0gcHJvdG8uX3NldFVpbnQzMiwgcHJvdG8uX3NldEludDE2ID0gcHJvdG8uX3NldFVpbnQxNiwgcHJvdG8uX3NldEludDggPSBwcm90by5fc2V0VWludDgsIFxuICAgIHByb3RvLnNldFNpZ25lZCA9IHByb3RvLnNldFVuc2lnbmVkO1xuICAgIGZvciAodmFyIG1ldGhvZCBpbiBwcm90bykgXCJzZXRcIiA9PT0gbWV0aG9kLnNsaWNlKDAsIDMpICYmICFmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIHByb3RvW1wid3JpdGVcIiArIHR5cGVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGFyZ3VtZW50cywgdm9pZCAwKSwgdGhpc1tcInNldFwiICsgdHlwZV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9KG1ldGhvZC5zbGljZSgzKSk7XG4gICAgcmV0dXJuIGpEYXRhVmlldztcbn0pOyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbnZhciBkZWJ1ZyA9IGZhbHNlO1xudmFyIGhpdENvdW50ID0gMDtcbnZhciBtaXNzQ291bnQgPSAwO1xudmFyIHNpemUgPSAwO1xuXG5leHBvcnRzLnB1dCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUsIHRpbWUsIHRpbWVvdXRDYWxsYmFjaykge1xuICBpZiAoZGVidWcpIHtcbiAgICBjb25zb2xlLmxvZygnY2FjaGluZzogJXMgPSAlaiAoQCVzKScsIGtleSwgdmFsdWUsIHRpbWUpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0aW1lICE9PSAndW5kZWZpbmVkJyAmJiAodHlwZW9mIHRpbWUgIT09ICdudW1iZXInIHx8IGlzTmFOKHRpbWUpIHx8IHRpbWUgPD0gMCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhY2hlIHRpbWVvdXQgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB0aW1lb3V0Q2FsbGJhY2sgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB0aW1lb3V0Q2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhY2hlIHRpbWVvdXQgY2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICB2YXIgb2xkUmVjb3JkID0gY2FjaGVba2V5XTtcbiAgaWYgKG9sZFJlY29yZCkge1xuICAgIGNsZWFyVGltZW91dChvbGRSZWNvcmQudGltZW91dCk7XG4gIH0gZWxzZSB7XG4gICAgc2l6ZSsrO1xuICB9XG5cbiAgdmFyIHJlY29yZCA9IHtcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgZXhwaXJlOiB0aW1lICsgRGF0ZS5ub3coKVxuICB9O1xuXG4gIGlmICghaXNOYU4ocmVjb3JkLmV4cGlyZSkpIHtcbiAgICByZWNvcmQudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBfZGVsKGtleSk7XG4gICAgICBpZiAodGltZW91dENhbGxiYWNrKSB7XG4gICAgICAgIHRpbWVvdXRDYWxsYmFjayhrZXksIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCB0aW1lKTtcbiAgfVxuXG4gIGNhY2hlW2tleV0gPSByZWNvcmQ7XG5cbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuZXhwb3J0cy5kZWwgPSBmdW5jdGlvbihrZXkpIHtcbiAgdmFyIGNhbkRlbGV0ZSA9IHRydWU7XG5cbiAgdmFyIG9sZFJlY29yZCA9IGNhY2hlW2tleV07XG4gIGlmIChvbGRSZWNvcmQpIHtcbiAgICBjbGVhclRpbWVvdXQob2xkUmVjb3JkLnRpbWVvdXQpO1xuICAgIGlmICghaXNOYU4ob2xkUmVjb3JkLmV4cGlyZSkgJiYgb2xkUmVjb3JkLmV4cGlyZSA8IERhdGUubm93KCkpIHtcbiAgICAgIGNhbkRlbGV0ZSA9IGZhbHNlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjYW5EZWxldGUgPSBmYWxzZTtcbiAgfVxuXG4gIGlmIChjYW5EZWxldGUpIHtcbiAgICBfZGVsKGtleSk7XG4gIH1cblxuICByZXR1cm4gY2FuRGVsZXRlO1xufTtcblxuZnVuY3Rpb24gX2RlbChrZXkpe1xuICBzaXplLS07XG4gIGRlbGV0ZSBjYWNoZVtrZXldO1xufVxuXG5leHBvcnRzLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gIGZvciAodmFyIGtleSBpbiBjYWNoZSkge1xuICAgIGNsZWFyVGltZW91dChjYWNoZVtrZXldLnRpbWVvdXQpO1xuICB9XG4gIHNpemUgPSAwO1xuICBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGlmIChkZWJ1Zykge1xuICAgIGhpdENvdW50ID0gMDtcbiAgICBtaXNzQ291bnQgPSAwO1xuICB9XG59O1xuXG5leHBvcnRzLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICB2YXIgZGF0YSA9IGNhY2hlW2tleV07XG4gIGlmICh0eXBlb2YgZGF0YSAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgaWYgKGlzTmFOKGRhdGEuZXhwaXJlKSB8fCBkYXRhLmV4cGlyZSA+PSBEYXRlLm5vdygpKSB7XG4gICAgICBpZiAoZGVidWcpIGhpdENvdW50Kys7XG4gICAgICByZXR1cm4gZGF0YS52YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZnJlZSBzb21lIHNwYWNlXG4gICAgICBpZiAoZGVidWcpIG1pc3NDb3VudCsrO1xuICAgICAgc2l6ZS0tO1xuICAgICAgZGVsZXRlIGNhY2hlW2tleV07XG4gICAgfVxuICB9IGVsc2UgaWYgKGRlYnVnKSB7XG4gICAgbWlzc0NvdW50Kys7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5leHBvcnRzLnNpemUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHNpemU7XG59O1xuXG5leHBvcnRzLm1lbXNpemUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHNpemUgPSAwLFxuICAgIGtleTtcbiAgZm9yIChrZXkgaW4gY2FjaGUpIHtcbiAgICBzaXplKys7XG4gIH1cbiAgcmV0dXJuIHNpemU7XG59O1xuXG5leHBvcnRzLmRlYnVnID0gZnVuY3Rpb24oYm9vbCkge1xuICBkZWJ1ZyA9IGJvb2w7XG59O1xuXG5leHBvcnRzLmhpdHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGhpdENvdW50O1xufTtcblxuZXhwb3J0cy5taXNzZXMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG1pc3NDb3VudDtcbn07XG5cbmV4cG9ydHMua2V5cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gT2JqZWN0LmtleXMoY2FjaGUpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuXG52YXIgemxpYl9pbmZsYXRlID0gcmVxdWlyZSgnLi96bGliL2luZmxhdGUnKTtcbnZhciB1dGlscyAgICAgICAgPSByZXF1aXJlKCcuL3V0aWxzL2NvbW1vbicpO1xudmFyIHN0cmluZ3MgICAgICA9IHJlcXVpcmUoJy4vdXRpbHMvc3RyaW5ncycpO1xudmFyIGMgICAgICAgICAgICA9IHJlcXVpcmUoJy4vemxpYi9jb25zdGFudHMnKTtcbnZhciBtc2cgICAgICAgICAgPSByZXF1aXJlKCcuL3psaWIvbWVzc2FnZXMnKTtcbnZhciBaU3RyZWFtICAgICAgPSByZXF1aXJlKCcuL3psaWIvenN0cmVhbScpO1xudmFyIEdaaGVhZGVyICAgICA9IHJlcXVpcmUoJy4vemxpYi9nemhlYWRlcicpO1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIGNsYXNzIEluZmxhdGVcbiAqXG4gKiBHZW5lcmljIEpTLXN0eWxlIHdyYXBwZXIgZm9yIHpsaWIgY2FsbHMuIElmIHlvdSBkb24ndCBuZWVkXG4gKiBzdHJlYW1pbmcgYmVoYXZpb3VyIC0gdXNlIG1vcmUgc2ltcGxlIGZ1bmN0aW9uczogW1tpbmZsYXRlXV1cbiAqIGFuZCBbW2luZmxhdGVSYXddXS5cbiAqKi9cblxuLyogaW50ZXJuYWxcbiAqIGluZmxhdGUuY2h1bmtzIC0+IEFycmF5XG4gKlxuICogQ2h1bmtzIG9mIG91dHB1dCBkYXRhLCBpZiBbW0luZmxhdGUjb25EYXRhXV0gbm90IG92ZXJyaWRlbi5cbiAqKi9cblxuLyoqXG4gKiBJbmZsYXRlLnJlc3VsdCAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZ1xuICpcbiAqIFVuY29tcHJlc3NlZCByZXN1bHQsIGdlbmVyYXRlZCBieSBkZWZhdWx0IFtbSW5mbGF0ZSNvbkRhdGFdXVxuICogYW5kIFtbSW5mbGF0ZSNvbkVuZF1dIGhhbmRsZXJzLiBGaWxsZWQgYWZ0ZXIgeW91IHB1c2ggbGFzdCBjaHVua1xuICogKGNhbGwgW1tJbmZsYXRlI3B1c2hdXSB3aXRoIGBaX0ZJTklTSGAgLyBgdHJ1ZWAgcGFyYW0pIG9yIGlmIHlvdVxuICogcHVzaCBhIGNodW5rIHdpdGggZXhwbGljaXQgZmx1c2ggKGNhbGwgW1tJbmZsYXRlI3B1c2hdXSB3aXRoXG4gKiBgWl9TWU5DX0ZMVVNIYCBwYXJhbSkuXG4gKiovXG5cbi8qKlxuICogSW5mbGF0ZS5lcnIgLT4gTnVtYmVyXG4gKlxuICogRXJyb3IgY29kZSBhZnRlciBpbmZsYXRlIGZpbmlzaGVkLiAwIChaX09LKSBvbiBzdWNjZXNzLlxuICogU2hvdWxkIGJlIGNoZWNrZWQgaWYgYnJva2VuIGRhdGEgcG9zc2libGUuXG4gKiovXG5cbi8qKlxuICogSW5mbGF0ZS5tc2cgLT4gU3RyaW5nXG4gKlxuICogRXJyb3IgbWVzc2FnZSwgaWYgW1tJbmZsYXRlLmVycl1dICE9IDBcbiAqKi9cblxuXG4vKipcbiAqIG5ldyBJbmZsYXRlKG9wdGlvbnMpXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgaW5mbGF0ZSBvcHRpb25zLlxuICpcbiAqIENyZWF0ZXMgbmV3IGluZmxhdG9yIGluc3RhbmNlIHdpdGggc3BlY2lmaWVkIHBhcmFtcy4gVGhyb3dzIGV4Y2VwdGlvblxuICogb24gYmFkIHBhcmFtcy4gU3VwcG9ydGVkIG9wdGlvbnM6XG4gKlxuICogLSBgd2luZG93Qml0c2BcbiAqIC0gYGRpY3Rpb25hcnlgXG4gKlxuICogW2h0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZF0oaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkKVxuICogZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlc2UuXG4gKlxuICogQWRkaXRpb25hbCBvcHRpb25zLCBmb3IgaW50ZXJuYWwgbmVlZHM6XG4gKlxuICogLSBgY2h1bmtTaXplYCAtIHNpemUgb2YgZ2VuZXJhdGVkIGRhdGEgY2h1bmtzICgxNksgYnkgZGVmYXVsdClcbiAqIC0gYHJhd2AgKEJvb2xlYW4pIC0gZG8gcmF3IGluZmxhdGVcbiAqIC0gYHRvYCAoU3RyaW5nKSAtIGlmIGVxdWFsIHRvICdzdHJpbmcnLCB0aGVuIHJlc3VsdCB3aWxsIGJlIGNvbnZlcnRlZFxuICogICBmcm9tIHV0ZjggdG8gdXRmMTYgKGphdmFzY3JpcHQpIHN0cmluZy4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCxcbiAqICAgY2h1bmsgbGVuZ3RoIGNhbiBkaWZmZXIgZnJvbSBgY2h1bmtTaXplYCwgZGVwZW5kaW5nIG9uIGNvbnRlbnQuXG4gKlxuICogQnkgZGVmYXVsdCwgd2hlbiBubyBvcHRpb25zIHNldCwgYXV0b2RldGVjdCBkZWZsYXRlL2d6aXAgZGF0YSBmb3JtYXQgdmlhXG4gKiB3cmFwcGVyIGhlYWRlci5cbiAqXG4gKiAjIyMjIyBFeGFtcGxlOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIHZhciBwYWtvID0gcmVxdWlyZSgncGFrbycpXG4gKiAgICwgY2h1bmsxID0gVWludDhBcnJheShbMSwyLDMsNCw1LDYsNyw4LDldKVxuICogICAsIGNodW5rMiA9IFVpbnQ4QXJyYXkoWzEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5XSk7XG4gKlxuICogdmFyIGluZmxhdGUgPSBuZXcgcGFrby5JbmZsYXRlKHsgbGV2ZWw6IDN9KTtcbiAqXG4gKiBpbmZsYXRlLnB1c2goY2h1bmsxLCBmYWxzZSk7XG4gKiBpbmZsYXRlLnB1c2goY2h1bmsyLCB0cnVlKTsgIC8vIHRydWUgLT4gbGFzdCBjaHVua1xuICpcbiAqIGlmIChpbmZsYXRlLmVycikgeyB0aHJvdyBuZXcgRXJyb3IoaW5mbGF0ZS5lcnIpOyB9XG4gKlxuICogY29uc29sZS5sb2coaW5mbGF0ZS5yZXN1bHQpO1xuICogYGBgXG4gKiovXG5mdW5jdGlvbiBJbmZsYXRlKG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEluZmxhdGUpKSByZXR1cm4gbmV3IEluZmxhdGUob3B0aW9ucyk7XG5cbiAgdGhpcy5vcHRpb25zID0gdXRpbHMuYXNzaWduKHtcbiAgICBjaHVua1NpemU6IDE2Mzg0LFxuICAgIHdpbmRvd0JpdHM6IDAsXG4gICAgdG86ICcnXG4gIH0sIG9wdGlvbnMgfHwge30pO1xuXG4gIHZhciBvcHQgPSB0aGlzLm9wdGlvbnM7XG5cbiAgLy8gRm9yY2Ugd2luZG93IHNpemUgZm9yIGByYXdgIGRhdGEsIGlmIG5vdCBzZXQgZGlyZWN0bHksXG4gIC8vIGJlY2F1c2Ugd2UgaGF2ZSBubyBoZWFkZXIgZm9yIGF1dG9kZXRlY3QuXG4gIGlmIChvcHQucmF3ICYmIChvcHQud2luZG93Qml0cyA+PSAwKSAmJiAob3B0LndpbmRvd0JpdHMgPCAxNikpIHtcbiAgICBvcHQud2luZG93Qml0cyA9IC1vcHQud2luZG93Qml0cztcbiAgICBpZiAob3B0LndpbmRvd0JpdHMgPT09IDApIHsgb3B0LndpbmRvd0JpdHMgPSAtMTU7IH1cbiAgfVxuXG4gIC8vIElmIGB3aW5kb3dCaXRzYCBub3QgZGVmaW5lZCAoYW5kIG1vZGUgbm90IHJhdykgLSBzZXQgYXV0b2RldGVjdCBmbGFnIGZvciBnemlwL2RlZmxhdGVcbiAgaWYgKChvcHQud2luZG93Qml0cyA+PSAwKSAmJiAob3B0LndpbmRvd0JpdHMgPCAxNikgJiZcbiAgICAgICEob3B0aW9ucyAmJiBvcHRpb25zLndpbmRvd0JpdHMpKSB7XG4gICAgb3B0LndpbmRvd0JpdHMgKz0gMzI7XG4gIH1cblxuICAvLyBHemlwIGhlYWRlciBoYXMgbm8gaW5mbyBhYm91dCB3aW5kb3dzIHNpemUsIHdlIGNhbiBkbyBhdXRvZGV0ZWN0IG9ubHlcbiAgLy8gZm9yIGRlZmxhdGUuIFNvLCBpZiB3aW5kb3cgc2l6ZSBub3Qgc2V0LCBmb3JjZSBpdCB0byBtYXggd2hlbiBnemlwIHBvc3NpYmxlXG4gIGlmICgob3B0LndpbmRvd0JpdHMgPiAxNSkgJiYgKG9wdC53aW5kb3dCaXRzIDwgNDgpKSB7XG4gICAgLy8gYml0IDMgKDE2KSAtPiBnemlwcGVkIGRhdGFcbiAgICAvLyBiaXQgNCAoMzIpIC0+IGF1dG9kZXRlY3QgZ3ppcC9kZWZsYXRlXG4gICAgaWYgKChvcHQud2luZG93Qml0cyAmIDE1KSA9PT0gMCkge1xuICAgICAgb3B0LndpbmRvd0JpdHMgfD0gMTU7XG4gICAgfVxuICB9XG5cbiAgdGhpcy5lcnIgICAgPSAwOyAgICAgIC8vIGVycm9yIGNvZGUsIGlmIGhhcHBlbnMgKDAgPSBaX09LKVxuICB0aGlzLm1zZyAgICA9ICcnOyAgICAgLy8gZXJyb3IgbWVzc2FnZVxuICB0aGlzLmVuZGVkICA9IGZhbHNlOyAgLy8gdXNlZCB0byBhdm9pZCBtdWx0aXBsZSBvbkVuZCgpIGNhbGxzXG4gIHRoaXMuY2h1bmtzID0gW107ICAgICAvLyBjaHVua3Mgb2YgY29tcHJlc3NlZCBkYXRhXG5cbiAgdGhpcy5zdHJtICAgPSBuZXcgWlN0cmVhbSgpO1xuICB0aGlzLnN0cm0uYXZhaWxfb3V0ID0gMDtcblxuICB2YXIgc3RhdHVzICA9IHpsaWJfaW5mbGF0ZS5pbmZsYXRlSW5pdDIoXG4gICAgdGhpcy5zdHJtLFxuICAgIG9wdC53aW5kb3dCaXRzXG4gICk7XG5cbiAgaWYgKHN0YXR1cyAhPT0gYy5aX09LKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1zZ1tzdGF0dXNdKTtcbiAgfVxuXG4gIHRoaXMuaGVhZGVyID0gbmV3IEdaaGVhZGVyKCk7XG5cbiAgemxpYl9pbmZsYXRlLmluZmxhdGVHZXRIZWFkZXIodGhpcy5zdHJtLCB0aGlzLmhlYWRlcik7XG59XG5cbi8qKlxuICogSW5mbGF0ZSNwdXNoKGRhdGFbLCBtb2RlXSkgLT4gQm9vbGVhblxuICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fEFycmF5QnVmZmVyfFN0cmluZyk6IGlucHV0IGRhdGFcbiAqIC0gbW9kZSAoTnVtYmVyfEJvb2xlYW4pOiAwLi42IGZvciBjb3JyZXNwb25kaW5nIFpfTk9fRkxVU0guLlpfVFJFRSBtb2Rlcy5cbiAqICAgU2VlIGNvbnN0YW50cy4gU2tpcHBlZCBvciBgZmFsc2VgIG1lYW5zIFpfTk9fRkxVU0gsIGB0cnVlYCBtZWFuc2ggWl9GSU5JU0guXG4gKlxuICogU2VuZHMgaW5wdXQgZGF0YSB0byBpbmZsYXRlIHBpcGUsIGdlbmVyYXRpbmcgW1tJbmZsYXRlI29uRGF0YV1dIGNhbGxzIHdpdGhcbiAqIG5ldyBvdXRwdXQgY2h1bmtzLiBSZXR1cm5zIGB0cnVlYCBvbiBzdWNjZXNzLiBUaGUgbGFzdCBkYXRhIGJsb2NrIG11c3QgaGF2ZVxuICogbW9kZSBaX0ZJTklTSCAob3IgYHRydWVgKS4gVGhhdCB3aWxsIGZsdXNoIGludGVybmFsIHBlbmRpbmcgYnVmZmVycyBhbmQgY2FsbFxuICogW1tJbmZsYXRlI29uRW5kXV0uIEZvciBpbnRlcmltIGV4cGxpY2l0IGZsdXNoZXMgKHdpdGhvdXQgZW5kaW5nIHRoZSBzdHJlYW0pIHlvdVxuICogY2FuIHVzZSBtb2RlIFpfU1lOQ19GTFVTSCwga2VlcGluZyB0aGUgZGVjb21wcmVzc2lvbiBjb250ZXh0LlxuICpcbiAqIE9uIGZhaWwgY2FsbCBbW0luZmxhdGUjb25FbmRdXSB3aXRoIGVycm9yIGNvZGUgYW5kIHJldHVybiBmYWxzZS5cbiAqXG4gKiBXZSBzdHJvbmdseSByZWNvbW1lbmQgdG8gdXNlIGBVaW50OEFycmF5YCBvbiBpbnB1dCBmb3IgYmVzdCBzcGVlZCAob3V0cHV0XG4gKiBmb3JtYXQgaXMgZGV0ZWN0ZWQgYXV0b21hdGljYWxseSkuIEFsc28sIGRvbid0IHNraXAgbGFzdCBwYXJhbSBhbmQgYWx3YXlzXG4gKiB1c2UgdGhlIHNhbWUgdHlwZSBpbiB5b3VyIGNvZGUgKGJvb2xlYW4gb3IgbnVtYmVyKS4gVGhhdCB3aWxsIGltcHJvdmUgSlMgc3BlZWQuXG4gKlxuICogRm9yIHJlZ3VsYXIgYEFycmF5YC1zIG1ha2Ugc3VyZSBhbGwgZWxlbWVudHMgYXJlIFswLi4yNTVdLlxuICpcbiAqICMjIyMjIEV4YW1wbGVcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBwdXNoKGNodW5rLCBmYWxzZSk7IC8vIHB1c2ggb25lIG9mIGRhdGEgY2h1bmtzXG4gKiAuLi5cbiAqIHB1c2goY2h1bmssIHRydWUpOyAgLy8gcHVzaCBsYXN0IGNodW5rXG4gKiBgYGBcbiAqKi9cbkluZmxhdGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoZGF0YSwgbW9kZSkge1xuICB2YXIgc3RybSA9IHRoaXMuc3RybTtcbiAgdmFyIGNodW5rU2l6ZSA9IHRoaXMub3B0aW9ucy5jaHVua1NpemU7XG4gIHZhciBkaWN0aW9uYXJ5ID0gdGhpcy5vcHRpb25zLmRpY3Rpb25hcnk7XG4gIHZhciBzdGF0dXMsIF9tb2RlO1xuICB2YXIgbmV4dF9vdXRfdXRmOCwgdGFpbCwgdXRmOHN0cjtcbiAgdmFyIGRpY3Q7XG5cbiAgLy8gRmxhZyB0byBwcm9wZXJseSBwcm9jZXNzIFpfQlVGX0VSUk9SIG9uIHRlc3RpbmcgaW5mbGF0ZSBjYWxsXG4gIC8vIHdoZW4gd2UgY2hlY2sgdGhhdCBhbGwgb3V0cHV0IGRhdGEgd2FzIGZsdXNoZWQuXG4gIHZhciBhbGxvd0J1ZkVycm9yID0gZmFsc2U7XG5cbiAgaWYgKHRoaXMuZW5kZWQpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIF9tb2RlID0gKG1vZGUgPT09IH5+bW9kZSkgPyBtb2RlIDogKChtb2RlID09PSB0cnVlKSA/IGMuWl9GSU5JU0ggOiBjLlpfTk9fRkxVU0gpO1xuXG4gIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWRcbiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgIC8vIE9ubHkgYmluYXJ5IHN0cmluZ3MgY2FuIGJlIGRlY29tcHJlc3NlZCBvbiBwcmFjdGljZVxuICAgIHN0cm0uaW5wdXQgPSBzdHJpbmdzLmJpbnN0cmluZzJidWYoZGF0YSk7XG4gIH0gZWxzZSBpZiAodG9TdHJpbmcuY2FsbChkYXRhKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJykge1xuICAgIHN0cm0uaW5wdXQgPSBuZXcgVWludDhBcnJheShkYXRhKTtcbiAgfSBlbHNlIHtcbiAgICBzdHJtLmlucHV0ID0gZGF0YTtcbiAgfVxuXG4gIHN0cm0ubmV4dF9pbiA9IDA7XG4gIHN0cm0uYXZhaWxfaW4gPSBzdHJtLmlucHV0Lmxlbmd0aDtcblxuICBkbyB7XG4gICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICBzdHJtLm91dHB1dCA9IG5ldyB1dGlscy5CdWY4KGNodW5rU2l6ZSk7XG4gICAgICBzdHJtLm5leHRfb3V0ID0gMDtcbiAgICAgIHN0cm0uYXZhaWxfb3V0ID0gY2h1bmtTaXplO1xuICAgIH1cblxuICAgIHN0YXR1cyA9IHpsaWJfaW5mbGF0ZS5pbmZsYXRlKHN0cm0sIGMuWl9OT19GTFVTSCk7ICAgIC8qIG5vIGJhZCByZXR1cm4gdmFsdWUgKi9cblxuICAgIGlmIChzdGF0dXMgPT09IGMuWl9ORUVEX0RJQ1QgJiYgZGljdGlvbmFyeSkge1xuICAgICAgLy8gQ29udmVydCBkYXRhIGlmIG5lZWRlZFxuICAgICAgaWYgKHR5cGVvZiBkaWN0aW9uYXJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICBkaWN0ID0gc3RyaW5ncy5zdHJpbmcyYnVmKGRpY3Rpb25hcnkpO1xuICAgICAgfSBlbHNlIGlmICh0b1N0cmluZy5jYWxsKGRpY3Rpb25hcnkpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nKSB7XG4gICAgICAgIGRpY3QgPSBuZXcgVWludDhBcnJheShkaWN0aW9uYXJ5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpY3QgPSBkaWN0aW9uYXJ5O1xuICAgICAgfVxuXG4gICAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLCBkaWN0KTtcblxuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IGMuWl9CVUZfRVJST1IgJiYgYWxsb3dCdWZFcnJvciA9PT0gdHJ1ZSkge1xuICAgICAgc3RhdHVzID0gYy5aX09LO1xuICAgICAgYWxsb3dCdWZFcnJvciA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgIT09IGMuWl9TVFJFQU1fRU5EICYmIHN0YXR1cyAhPT0gYy5aX09LKSB7XG4gICAgICB0aGlzLm9uRW5kKHN0YXR1cyk7XG4gICAgICB0aGlzLmVuZGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoc3RybS5uZXh0X291dCkge1xuICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwIHx8IHN0YXR1cyA9PT0gYy5aX1NUUkVBTV9FTkQgfHwgKHN0cm0uYXZhaWxfaW4gPT09IDAgJiYgKF9tb2RlID09PSBjLlpfRklOSVNIIHx8IF9tb2RlID09PSBjLlpfU1lOQ19GTFVTSCkpKSB7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50byA9PT0gJ3N0cmluZycpIHtcblxuICAgICAgICAgIG5leHRfb3V0X3V0ZjggPSBzdHJpbmdzLnV0Zjhib3JkZXIoc3RybS5vdXRwdXQsIHN0cm0ubmV4dF9vdXQpO1xuXG4gICAgICAgICAgdGFpbCA9IHN0cm0ubmV4dF9vdXQgLSBuZXh0X291dF91dGY4O1xuICAgICAgICAgIHV0ZjhzdHIgPSBzdHJpbmdzLmJ1ZjJzdHJpbmcoc3RybS5vdXRwdXQsIG5leHRfb3V0X3V0ZjgpO1xuXG4gICAgICAgICAgLy8gbW92ZSB0YWlsXG4gICAgICAgICAgc3RybS5uZXh0X291dCA9IHRhaWw7XG4gICAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBjaHVua1NpemUgLSB0YWlsO1xuICAgICAgICAgIGlmICh0YWlsKSB7IHV0aWxzLmFycmF5U2V0KHN0cm0ub3V0cHV0LCBzdHJtLm91dHB1dCwgbmV4dF9vdXRfdXRmOCwgdGFpbCwgMCk7IH1cblxuICAgICAgICAgIHRoaXMub25EYXRhKHV0ZjhzdHIpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5vbkRhdGEodXRpbHMuc2hyaW5rQnVmKHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0KSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXaGVuIG5vIG1vcmUgaW5wdXQgZGF0YSwgd2Ugc2hvdWxkIGNoZWNrIHRoYXQgaW50ZXJuYWwgaW5mbGF0ZSBidWZmZXJzXG4gICAgLy8gYXJlIGZsdXNoZWQuIFRoZSBvbmx5IHdheSB0byBkbyBpdCB3aGVuIGF2YWlsX291dCA9IDAgLSBydW4gb25lIG1vcmVcbiAgICAvLyBpbmZsYXRlIHBhc3MuIEJ1dCBpZiBvdXRwdXQgZGF0YSBub3QgZXhpc3RzLCBpbmZsYXRlIHJldHVybiBaX0JVRl9FUlJPUi5cbiAgICAvLyBIZXJlIHdlIHNldCBmbGFnIHRvIHByb2Nlc3MgdGhpcyBlcnJvciBwcm9wZXJseS5cbiAgICAvL1xuICAgIC8vIE5PVEUuIERlZmxhdGUgZG9lcyBub3QgcmV0dXJuIGVycm9yIGluIHRoaXMgY2FzZSBhbmQgZG9lcyBub3QgbmVlZHMgc3VjaFxuICAgIC8vIGxvZ2ljLlxuICAgIGlmIChzdHJtLmF2YWlsX2luID09PSAwICYmIHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICBhbGxvd0J1ZkVycm9yID0gdHJ1ZTtcbiAgICB9XG5cbiAgfSB3aGlsZSAoKHN0cm0uYXZhaWxfaW4gPiAwIHx8IHN0cm0uYXZhaWxfb3V0ID09PSAwKSAmJiBzdGF0dXMgIT09IGMuWl9TVFJFQU1fRU5EKTtcblxuICBpZiAoc3RhdHVzID09PSBjLlpfU1RSRUFNX0VORCkge1xuICAgIF9tb2RlID0gYy5aX0ZJTklTSDtcbiAgfVxuXG4gIC8vIEZpbmFsaXplIG9uIHRoZSBsYXN0IGNodW5rLlxuICBpZiAoX21vZGUgPT09IGMuWl9GSU5JU0gpIHtcbiAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZUVuZCh0aGlzLnN0cm0pO1xuICAgIHRoaXMub25FbmQoc3RhdHVzKTtcbiAgICB0aGlzLmVuZGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gc3RhdHVzID09PSBjLlpfT0s7XG4gIH1cblxuICAvLyBjYWxsYmFjayBpbnRlcmltIHJlc3VsdHMgaWYgWl9TWU5DX0ZMVVNILlxuICBpZiAoX21vZGUgPT09IGMuWl9TWU5DX0ZMVVNIKSB7XG4gICAgdGhpcy5vbkVuZChjLlpfT0spO1xuICAgIHN0cm0uYXZhaWxfb3V0ID0gMDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuXG4vKipcbiAqIEluZmxhdGUjb25EYXRhKGNodW5rKSAtPiBWb2lkXG4gKiAtIGNodW5rIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IG91cHV0IGRhdGEuIFR5cGUgb2YgYXJyYXkgZGVwZW5kc1xuICogICBvbiBqcyBlbmdpbmUgc3VwcG9ydC4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCwgZWFjaCBjaHVua1xuICogICB3aWxsIGJlIHN0cmluZy5cbiAqXG4gKiBCeSBkZWZhdWx0LCBzdG9yZXMgZGF0YSBibG9ja3MgaW4gYGNodW5rc1tdYCBwcm9wZXJ0eSBhbmQgZ2x1ZVxuICogdGhvc2UgaW4gYG9uRW5kYC4gT3ZlcnJpZGUgdGhpcyBoYW5kbGVyLCBpZiB5b3UgbmVlZCBhbm90aGVyIGJlaGF2aW91ci5cbiAqKi9cbkluZmxhdGUucHJvdG90eXBlLm9uRGF0YSA9IGZ1bmN0aW9uIChjaHVuaykge1xuICB0aGlzLmNodW5rcy5wdXNoKGNodW5rKTtcbn07XG5cblxuLyoqXG4gKiBJbmZsYXRlI29uRW5kKHN0YXR1cykgLT4gVm9pZFxuICogLSBzdGF0dXMgKE51bWJlcik6IGluZmxhdGUgc3RhdHVzLiAwIChaX09LKSBvbiBzdWNjZXNzLFxuICogICBvdGhlciBpZiBub3QuXG4gKlxuICogQ2FsbGVkIGVpdGhlciBhZnRlciB5b3UgdGVsbCBpbmZsYXRlIHRoYXQgdGhlIGlucHV0IHN0cmVhbSBpc1xuICogY29tcGxldGUgKFpfRklOSVNIKSBvciBzaG91bGQgYmUgZmx1c2hlZCAoWl9TWU5DX0ZMVVNIKVxuICogb3IgaWYgYW4gZXJyb3IgaGFwcGVuZWQuIEJ5IGRlZmF1bHQgLSBqb2luIGNvbGxlY3RlZCBjaHVua3MsXG4gKiBmcmVlIG1lbW9yeSBhbmQgZmlsbCBgcmVzdWx0c2AgLyBgZXJyYCBwcm9wZXJ0aWVzLlxuICoqL1xuSW5mbGF0ZS5wcm90b3R5cGUub25FbmQgPSBmdW5jdGlvbiAoc3RhdHVzKSB7XG4gIC8vIE9uIHN1Y2Nlc3MgLSBqb2luXG4gIGlmIChzdGF0dXMgPT09IGMuWl9PSykge1xuICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBHbHVlICYgY29udmVydCBoZXJlLCB1bnRpbCB3ZSB0ZWFjaCBwYWtvIHRvIHNlbmRcbiAgICAgIC8vIHV0ZjggYWxsaWduZWQgc3RyaW5ncyB0byBvbkRhdGFcbiAgICAgIHRoaXMucmVzdWx0ID0gdGhpcy5jaHVua3Muam9pbignJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzdWx0ID0gdXRpbHMuZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcyk7XG4gICAgfVxuICB9XG4gIHRoaXMuY2h1bmtzID0gW107XG4gIHRoaXMuZXJyID0gc3RhdHVzO1xuICB0aGlzLm1zZyA9IHRoaXMuc3RybS5tc2c7XG59O1xuXG5cbi8qKlxuICogaW5mbGF0ZShkYXRhWywgb3B0aW9uc10pIC0+IFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nXG4gKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nKTogaW5wdXQgZGF0YSB0byBkZWNvbXByZXNzLlxuICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy5cbiAqXG4gKiBEZWNvbXByZXNzIGBkYXRhYCB3aXRoIGluZmxhdGUvdW5nemlwIGFuZCBgb3B0aW9uc2AuIEF1dG9kZXRlY3RcbiAqIGZvcm1hdCB2aWEgd3JhcHBlciBoZWFkZXIgYnkgZGVmYXVsdC4gVGhhdCdzIHdoeSB3ZSBkb24ndCBwcm92aWRlXG4gKiBzZXBhcmF0ZSBgdW5nemlwYCBtZXRob2QuXG4gKlxuICogU3VwcG9ydGVkIG9wdGlvbnMgYXJlOlxuICpcbiAqIC0gd2luZG93Qml0c1xuICpcbiAqIFtodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWRdKGh0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZClcbiAqIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIFN1Z2FyIChvcHRpb25zKTpcbiAqXG4gKiAtIGByYXdgIChCb29sZWFuKSAtIHNheSB0aGF0IHdlIHdvcmsgd2l0aCByYXcgc3RyZWFtLCBpZiB5b3UgZG9uJ3Qgd2lzaCB0byBzcGVjaWZ5XG4gKiAgIG5lZ2F0aXZlIHdpbmRvd0JpdHMgaW1wbGljaXRseS5cbiAqIC0gYHRvYCAoU3RyaW5nKSAtIGlmIGVxdWFsIHRvICdzdHJpbmcnLCB0aGVuIHJlc3VsdCB3aWxsIGJlIGNvbnZlcnRlZFxuICogICBmcm9tIHV0ZjggdG8gdXRmMTYgKGphdmFzY3JpcHQpIHN0cmluZy4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCxcbiAqICAgY2h1bmsgbGVuZ3RoIGNhbiBkaWZmZXIgZnJvbSBgY2h1bmtTaXplYCwgZGVwZW5kaW5nIG9uIGNvbnRlbnQuXG4gKlxuICpcbiAqICMjIyMjIEV4YW1wbGU6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogdmFyIHBha28gPSByZXF1aXJlKCdwYWtvJylcbiAqICAgLCBpbnB1dCA9IHBha28uZGVmbGF0ZShbMSwyLDMsNCw1LDYsNyw4LDldKVxuICogICAsIG91dHB1dDtcbiAqXG4gKiB0cnkge1xuICogICBvdXRwdXQgPSBwYWtvLmluZmxhdGUoaW5wdXQpO1xuICogfSBjYXRjaCAoZXJyKVxuICogICBjb25zb2xlLmxvZyhlcnIpO1xuICogfVxuICogYGBgXG4gKiovXG5mdW5jdGlvbiBpbmZsYXRlKGlucHV0LCBvcHRpb25zKSB7XG4gIHZhciBpbmZsYXRvciA9IG5ldyBJbmZsYXRlKG9wdGlvbnMpO1xuXG4gIGluZmxhdG9yLnB1c2goaW5wdXQsIHRydWUpO1xuXG4gIC8vIFRoYXQgd2lsbCBuZXZlciBoYXBwZW5zLCBpZiB5b3UgZG9uJ3QgY2hlYXQgd2l0aCBvcHRpb25zIDopXG4gIGlmIChpbmZsYXRvci5lcnIpIHsgdGhyb3cgaW5mbGF0b3IubXNnOyB9XG5cbiAgcmV0dXJuIGluZmxhdG9yLnJlc3VsdDtcbn1cblxuXG4vKipcbiAqIGluZmxhdGVSYXcoZGF0YVssIG9wdGlvbnNdKSAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZ1xuICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IGlucHV0IGRhdGEgdG8gZGVjb21wcmVzcy5cbiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBpbmZsYXRlIG9wdGlvbnMuXG4gKlxuICogVGhlIHNhbWUgYXMgW1tpbmZsYXRlXV0sIGJ1dCBjcmVhdGVzIHJhdyBkYXRhLCB3aXRob3V0IHdyYXBwZXJcbiAqIChoZWFkZXIgYW5kIGFkbGVyMzIgY3JjKS5cbiAqKi9cbmZ1bmN0aW9uIGluZmxhdGVSYXcoaW5wdXQsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIG9wdGlvbnMucmF3ID0gdHJ1ZTtcbiAgcmV0dXJuIGluZmxhdGUoaW5wdXQsIG9wdGlvbnMpO1xufVxuXG5cbi8qKlxuICogdW5nemlwKGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmdcbiAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheXxTdHJpbmcpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgaW5mbGF0ZSBvcHRpb25zLlxuICpcbiAqIEp1c3Qgc2hvcnRjdXQgdG8gW1tpbmZsYXRlXV0sIGJlY2F1c2UgaXQgYXV0b2RldGVjdHMgZm9ybWF0XG4gKiBieSBoZWFkZXIuY29udGVudC4gRG9uZSBmb3IgY29udmVuaWVuY2UuXG4gKiovXG5cblxuZXhwb3J0cy5JbmZsYXRlID0gSW5mbGF0ZTtcbmV4cG9ydHMuaW5mbGF0ZSA9IGluZmxhdGU7XG5leHBvcnRzLmluZmxhdGVSYXcgPSBpbmZsYXRlUmF3O1xuZXhwb3J0cy51bmd6aXAgID0gaW5mbGF0ZTtcbiIsIid1c2Ugc3RyaWN0JztcblxuXG52YXIgVFlQRURfT0sgPSAgKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJykgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIFVpbnQxNkFycmF5ICE9PSAndW5kZWZpbmVkJykgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIEludDMyQXJyYXkgIT09ICd1bmRlZmluZWQnKTtcblxuXG5leHBvcnRzLmFzc2lnbiA9IGZ1bmN0aW9uIChvYmogLypmcm9tMSwgZnJvbTIsIGZyb20zLCAuLi4qLykge1xuICB2YXIgc291cmNlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIHdoaWxlIChzb3VyY2VzLmxlbmd0aCkge1xuICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzLnNoaWZ0KCk7XG4gICAgaWYgKCFzb3VyY2UpIHsgY29udGludWU7IH1cblxuICAgIGlmICh0eXBlb2Ygc291cmNlICE9PSAnb2JqZWN0Jykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzb3VyY2UgKyAnbXVzdCBiZSBub24tb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgcCBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkocCkpIHtcbiAgICAgICAgb2JqW3BdID0gc291cmNlW3BdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59O1xuXG5cbi8vIHJlZHVjZSBidWZmZXIgc2l6ZSwgYXZvaWRpbmcgbWVtIGNvcHlcbmV4cG9ydHMuc2hyaW5rQnVmID0gZnVuY3Rpb24gKGJ1Ziwgc2l6ZSkge1xuICBpZiAoYnVmLmxlbmd0aCA9PT0gc2l6ZSkgeyByZXR1cm4gYnVmOyB9XG4gIGlmIChidWYuc3ViYXJyYXkpIHsgcmV0dXJuIGJ1Zi5zdWJhcnJheSgwLCBzaXplKTsgfVxuICBidWYubGVuZ3RoID0gc2l6ZTtcbiAgcmV0dXJuIGJ1Zjtcbn07XG5cblxudmFyIGZuVHlwZWQgPSB7XG4gIGFycmF5U2V0OiBmdW5jdGlvbiAoZGVzdCwgc3JjLCBzcmNfb2ZmcywgbGVuLCBkZXN0X29mZnMpIHtcbiAgICBpZiAoc3JjLnN1YmFycmF5ICYmIGRlc3Quc3ViYXJyYXkpIHtcbiAgICAgIGRlc3Quc2V0KHNyYy5zdWJhcnJheShzcmNfb2Zmcywgc3JjX29mZnMgKyBsZW4pLCBkZXN0X29mZnMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBGYWxsYmFjayB0byBvcmRpbmFyeSBhcnJheVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGRlc3RbZGVzdF9vZmZzICsgaV0gPSBzcmNbc3JjX29mZnMgKyBpXTtcbiAgICB9XG4gIH0sXG4gIC8vIEpvaW4gYXJyYXkgb2YgY2h1bmtzIHRvIHNpbmdsZSBhcnJheS5cbiAgZmxhdHRlbkNodW5rczogZnVuY3Rpb24gKGNodW5rcykge1xuICAgIHZhciBpLCBsLCBsZW4sIHBvcywgY2h1bmssIHJlc3VsdDtcblxuICAgIC8vIGNhbGN1bGF0ZSBkYXRhIGxlbmd0aFxuICAgIGxlbiA9IDA7XG4gICAgZm9yIChpID0gMCwgbCA9IGNodW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGxlbiArPSBjaHVua3NbaV0ubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIGpvaW4gY2h1bmtzXG4gICAgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbiAgICBwb3MgPSAwO1xuICAgIGZvciAoaSA9IDAsIGwgPSBjaHVua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBjaHVuayA9IGNodW5rc1tpXTtcbiAgICAgIHJlc3VsdC5zZXQoY2h1bmssIHBvcyk7XG4gICAgICBwb3MgKz0gY2h1bmsubGVuZ3RoO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn07XG5cbnZhciBmblVudHlwZWQgPSB7XG4gIGFycmF5U2V0OiBmdW5jdGlvbiAoZGVzdCwgc3JjLCBzcmNfb2ZmcywgbGVuLCBkZXN0X29mZnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBkZXN0W2Rlc3Rfb2ZmcyArIGldID0gc3JjW3NyY19vZmZzICsgaV07XG4gICAgfVxuICB9LFxuICAvLyBKb2luIGFycmF5IG9mIGNodW5rcyB0byBzaW5nbGUgYXJyYXkuXG4gIGZsYXR0ZW5DaHVua3M6IGZ1bmN0aW9uIChjaHVua3MpIHtcbiAgICByZXR1cm4gW10uY29uY2F0LmFwcGx5KFtdLCBjaHVua3MpO1xuICB9XG59O1xuXG5cbi8vIEVuYWJsZS9EaXNhYmxlIHR5cGVkIGFycmF5cyB1c2UsIGZvciB0ZXN0aW5nXG4vL1xuZXhwb3J0cy5zZXRUeXBlZCA9IGZ1bmN0aW9uIChvbikge1xuICBpZiAob24pIHtcbiAgICBleHBvcnRzLkJ1ZjggID0gVWludDhBcnJheTtcbiAgICBleHBvcnRzLkJ1ZjE2ID0gVWludDE2QXJyYXk7XG4gICAgZXhwb3J0cy5CdWYzMiA9IEludDMyQXJyYXk7XG4gICAgZXhwb3J0cy5hc3NpZ24oZXhwb3J0cywgZm5UeXBlZCk7XG4gIH0gZWxzZSB7XG4gICAgZXhwb3J0cy5CdWY4ICA9IEFycmF5O1xuICAgIGV4cG9ydHMuQnVmMTYgPSBBcnJheTtcbiAgICBleHBvcnRzLkJ1ZjMyID0gQXJyYXk7XG4gICAgZXhwb3J0cy5hc3NpZ24oZXhwb3J0cywgZm5VbnR5cGVkKTtcbiAgfVxufTtcblxuZXhwb3J0cy5zZXRUeXBlZChUWVBFRF9PSyk7XG4iLCIvLyBTdHJpbmcgZW5jb2RlL2RlY29kZSBoZWxwZXJzXG4ndXNlIHN0cmljdCc7XG5cblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi9jb21tb24nKTtcblxuXG4vLyBRdWljayBjaGVjayBpZiB3ZSBjYW4gdXNlIGZhc3QgYXJyYXkgdG8gYmluIHN0cmluZyBjb252ZXJzaW9uXG4vL1xuLy8gLSBhcHBseShBcnJheSkgY2FuIGZhaWwgb24gQW5kcm9pZCAyLjJcbi8vIC0gYXBwbHkoVWludDhBcnJheSkgY2FuIGZhaWwgb24gaU9TIDUuMSBTYWZhcnlcbi8vXG52YXIgU1RSX0FQUExZX09LID0gdHJ1ZTtcbnZhciBTVFJfQVBQTFlfVUlBX09LID0gdHJ1ZTtcblxudHJ5IHsgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBbIDAgXSk7IH0gY2F0Y2ggKF9fKSB7IFNUUl9BUFBMWV9PSyA9IGZhbHNlOyB9XG50cnkgeyBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KDEpKTsgfSBjYXRjaCAoX18pIHsgU1RSX0FQUExZX1VJQV9PSyA9IGZhbHNlOyB9XG5cblxuLy8gVGFibGUgd2l0aCB1dGY4IGxlbmd0aHMgKGNhbGN1bGF0ZWQgYnkgZmlyc3QgYnl0ZSBvZiBzZXF1ZW5jZSlcbi8vIE5vdGUsIHRoYXQgNSAmIDYtYnl0ZSB2YWx1ZXMgYW5kIHNvbWUgNC1ieXRlIHZhbHVlcyBjYW4gbm90IGJlIHJlcHJlc2VudGVkIGluIEpTLFxuLy8gYmVjYXVzZSBtYXggcG9zc2libGUgY29kZXBvaW50IGlzIDB4MTBmZmZmXG52YXIgX3V0ZjhsZW4gPSBuZXcgdXRpbHMuQnVmOCgyNTYpO1xuZm9yICh2YXIgcSA9IDA7IHEgPCAyNTY7IHErKykge1xuICBfdXRmOGxlbltxXSA9IChxID49IDI1MiA/IDYgOiBxID49IDI0OCA/IDUgOiBxID49IDI0MCA/IDQgOiBxID49IDIyNCA/IDMgOiBxID49IDE5MiA/IDIgOiAxKTtcbn1cbl91dGY4bGVuWzI1NF0gPSBfdXRmOGxlblsyNTRdID0gMTsgLy8gSW52YWxpZCBzZXF1ZW5jZSBzdGFydFxuXG5cbi8vIGNvbnZlcnQgc3RyaW5nIHRvIGFycmF5ICh0eXBlZCwgd2hlbiBwb3NzaWJsZSlcbmV4cG9ydHMuc3RyaW5nMmJ1ZiA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIGJ1ZiwgYywgYzIsIG1fcG9zLCBpLCBzdHJfbGVuID0gc3RyLmxlbmd0aCwgYnVmX2xlbiA9IDA7XG5cbiAgLy8gY291bnQgYmluYXJ5IHNpemVcbiAgZm9yIChtX3BvcyA9IDA7IG1fcG9zIDwgc3RyX2xlbjsgbV9wb3MrKykge1xuICAgIGMgPSBzdHIuY2hhckNvZGVBdChtX3Bvcyk7XG4gICAgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmIChtX3BvcyArIDEgPCBzdHJfbGVuKSkge1xuICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3BvcyArIDEpO1xuICAgICAgaWYgKChjMiAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xuICAgICAgICBjID0gMHgxMDAwMCArICgoYyAtIDB4ZDgwMCkgPDwgMTApICsgKGMyIC0gMHhkYzAwKTtcbiAgICAgICAgbV9wb3MrKztcbiAgICAgIH1cbiAgICB9XG4gICAgYnVmX2xlbiArPSBjIDwgMHg4MCA/IDEgOiBjIDwgMHg4MDAgPyAyIDogYyA8IDB4MTAwMDAgPyAzIDogNDtcbiAgfVxuXG4gIC8vIGFsbG9jYXRlIGJ1ZmZlclxuICBidWYgPSBuZXcgdXRpbHMuQnVmOChidWZfbGVuKTtcblxuICAvLyBjb252ZXJ0XG4gIGZvciAoaSA9IDAsIG1fcG9zID0gMDsgaSA8IGJ1Zl9sZW47IG1fcG9zKyspIHtcbiAgICBjID0gc3RyLmNoYXJDb2RlQXQobV9wb3MpO1xuICAgIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJiAobV9wb3MgKyAxIDwgc3RyX2xlbikpIHtcbiAgICAgIGMyID0gc3RyLmNoYXJDb2RlQXQobV9wb3MgKyAxKTtcbiAgICAgIGlmICgoYzIgJiAweGZjMDApID09PSAweGRjMDApIHtcbiAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgLSAweGQ4MDApIDw8IDEwKSArIChjMiAtIDB4ZGMwMCk7XG4gICAgICAgIG1fcG9zKys7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjIDwgMHg4MCkge1xuICAgICAgLyogb25lIGJ5dGUgKi9cbiAgICAgIGJ1ZltpKytdID0gYztcbiAgICB9IGVsc2UgaWYgKGMgPCAweDgwMCkge1xuICAgICAgLyogdHdvIGJ5dGVzICovXG4gICAgICBidWZbaSsrXSA9IDB4QzAgfCAoYyA+Pj4gNik7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyAmIDB4M2YpO1xuICAgIH0gZWxzZSBpZiAoYyA8IDB4MTAwMDApIHtcbiAgICAgIC8qIHRocmVlIGJ5dGVzICovXG4gICAgICBidWZbaSsrXSA9IDB4RTAgfCAoYyA+Pj4gMTIpO1xuICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgPj4+IDYgJiAweDNmKTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjICYgMHgzZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qIGZvdXIgYnl0ZXMgKi9cbiAgICAgIGJ1ZltpKytdID0gMHhmMCB8IChjID4+PiAxOCk7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gMTIgJiAweDNmKTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjID4+PiA2ICYgMHgzZik7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyAmIDB4M2YpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWY7XG59O1xuXG4vLyBIZWxwZXIgKHVzZWQgaW4gMiBwbGFjZXMpXG5mdW5jdGlvbiBidWYyYmluc3RyaW5nKGJ1ZiwgbGVuKSB7XG4gIC8vIHVzZSBmYWxsYmFjayBmb3IgYmlnIGFycmF5cyB0byBhdm9pZCBzdGFjayBvdmVyZmxvd1xuICBpZiAobGVuIDwgNjU1MzcpIHtcbiAgICBpZiAoKGJ1Zi5zdWJhcnJheSAmJiBTVFJfQVBQTFlfVUlBX09LKSB8fCAoIWJ1Zi5zdWJhcnJheSAmJiBTVFJfQVBQTFlfT0spKSB7XG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCB1dGlscy5zaHJpbmtCdWYoYnVmLCBsZW4pKTtcbiAgICB9XG4gIH1cblxuICB2YXIgcmVzdWx0ID0gJyc7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cblxuLy8gQ29udmVydCBieXRlIGFycmF5IHRvIGJpbmFyeSBzdHJpbmdcbmV4cG9ydHMuYnVmMmJpbnN0cmluZyA9IGZ1bmN0aW9uIChidWYpIHtcbiAgcmV0dXJuIGJ1ZjJiaW5zdHJpbmcoYnVmLCBidWYubGVuZ3RoKTtcbn07XG5cblxuLy8gQ29udmVydCBiaW5hcnkgc3RyaW5nICh0eXBlZCwgd2hlbiBwb3NzaWJsZSlcbmV4cG9ydHMuYmluc3RyaW5nMmJ1ZiA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIGJ1ZiA9IG5ldyB1dGlscy5CdWY4KHN0ci5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMCwgbGVuID0gYnVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgYnVmW2ldID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gIH1cbiAgcmV0dXJuIGJ1Zjtcbn07XG5cblxuLy8gY29udmVydCBhcnJheSB0byBzdHJpbmdcbmV4cG9ydHMuYnVmMnN0cmluZyA9IGZ1bmN0aW9uIChidWYsIG1heCkge1xuICB2YXIgaSwgb3V0LCBjLCBjX2xlbjtcbiAgdmFyIGxlbiA9IG1heCB8fCBidWYubGVuZ3RoO1xuXG4gIC8vIFJlc2VydmUgbWF4IHBvc3NpYmxlIGxlbmd0aCAoMiB3b3JkcyBwZXIgY2hhcilcbiAgLy8gTkI6IGJ5IHVua25vd24gcmVhc29ucywgQXJyYXkgaXMgc2lnbmlmaWNhbnRseSBmYXN0ZXIgZm9yXG4gIC8vICAgICBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5IHRoYW4gVWludDE2QXJyYXkuXG4gIHZhciB1dGYxNmJ1ZiA9IG5ldyBBcnJheShsZW4gKiAyKTtcblxuICBmb3IgKG91dCA9IDAsIGkgPSAwOyBpIDwgbGVuOykge1xuICAgIGMgPSBidWZbaSsrXTtcbiAgICAvLyBxdWljayBwcm9jZXNzIGFzY2lpXG4gICAgaWYgKGMgPCAweDgwKSB7IHV0ZjE2YnVmW291dCsrXSA9IGM7IGNvbnRpbnVlOyB9XG5cbiAgICBjX2xlbiA9IF91dGY4bGVuW2NdO1xuICAgIC8vIHNraXAgNSAmIDYgYnl0ZSBjb2Rlc1xuICAgIGlmIChjX2xlbiA+IDQpIHsgdXRmMTZidWZbb3V0KytdID0gMHhmZmZkOyBpICs9IGNfbGVuIC0gMTsgY29udGludWU7IH1cblxuICAgIC8vIGFwcGx5IG1hc2sgb24gZmlyc3QgYnl0ZVxuICAgIGMgJj0gY19sZW4gPT09IDIgPyAweDFmIDogY19sZW4gPT09IDMgPyAweDBmIDogMHgwNztcbiAgICAvLyBqb2luIHRoZSByZXN0XG4gICAgd2hpbGUgKGNfbGVuID4gMSAmJiBpIDwgbGVuKSB7XG4gICAgICBjID0gKGMgPDwgNikgfCAoYnVmW2krK10gJiAweDNmKTtcbiAgICAgIGNfbGVuLS07XG4gICAgfVxuXG4gICAgLy8gdGVybWluYXRlZCBieSBlbmQgb2Ygc3RyaW5nP1xuICAgIGlmIChjX2xlbiA+IDEpIHsgdXRmMTZidWZbb3V0KytdID0gMHhmZmZkOyBjb250aW51ZTsgfVxuXG4gICAgaWYgKGMgPCAweDEwMDAwKSB7XG4gICAgICB1dGYxNmJ1ZltvdXQrK10gPSBjO1xuICAgIH0gZWxzZSB7XG4gICAgICBjIC09IDB4MTAwMDA7XG4gICAgICB1dGYxNmJ1ZltvdXQrK10gPSAweGQ4MDAgfCAoKGMgPj4gMTApICYgMHgzZmYpO1xuICAgICAgdXRmMTZidWZbb3V0KytdID0gMHhkYzAwIHwgKGMgJiAweDNmZik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1ZjJiaW5zdHJpbmcodXRmMTZidWYsIG91dCk7XG59O1xuXG5cbi8vIENhbGN1bGF0ZSBtYXggcG9zc2libGUgcG9zaXRpb24gaW4gdXRmOCBidWZmZXIsXG4vLyB0aGF0IHdpbGwgbm90IGJyZWFrIHNlcXVlbmNlLiBJZiB0aGF0J3Mgbm90IHBvc3NpYmxlXG4vLyAtICh2ZXJ5IHNtYWxsIGxpbWl0cykgcmV0dXJuIG1heCBzaXplIGFzIGlzLlxuLy9cbi8vIGJ1ZltdIC0gdXRmOCBieXRlcyBhcnJheVxuLy8gbWF4ICAgLSBsZW5ndGggbGltaXQgKG1hbmRhdG9yeSk7XG5leHBvcnRzLnV0Zjhib3JkZXIgPSBmdW5jdGlvbiAoYnVmLCBtYXgpIHtcbiAgdmFyIHBvcztcblxuICBtYXggPSBtYXggfHwgYnVmLmxlbmd0aDtcbiAgaWYgKG1heCA+IGJ1Zi5sZW5ndGgpIHsgbWF4ID0gYnVmLmxlbmd0aDsgfVxuXG4gIC8vIGdvIGJhY2sgZnJvbSBsYXN0IHBvc2l0aW9uLCB1bnRpbCBzdGFydCBvZiBzZXF1ZW5jZSBmb3VuZFxuICBwb3MgPSBtYXggLSAxO1xuICB3aGlsZSAocG9zID49IDAgJiYgKGJ1Zltwb3NdICYgMHhDMCkgPT09IDB4ODApIHsgcG9zLS07IH1cblxuICAvLyBGdWNrdXAgLSB2ZXJ5IHNtYWxsIGFuZCBicm9rZW4gc2VxdWVuY2UsXG4gIC8vIHJldHVybiBtYXgsIGJlY2F1c2Ugd2Ugc2hvdWxkIHJldHVybiBzb21ldGhpbmcgYW55d2F5LlxuICBpZiAocG9zIDwgMCkgeyByZXR1cm4gbWF4OyB9XG5cbiAgLy8gSWYgd2UgY2FtZSB0byBzdGFydCBvZiBidWZmZXIgLSB0aGF0IG1lYW5zIHZ1ZmZlciBpcyB0b28gc21hbGwsXG4gIC8vIHJldHVybiBtYXggdG9vLlxuICBpZiAocG9zID09PSAwKSB7IHJldHVybiBtYXg7IH1cblxuICByZXR1cm4gKHBvcyArIF91dGY4bGVuW2J1Zltwb3NdXSA+IG1heCkgPyBwb3MgOiBtYXg7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBOb3RlOiBhZGxlcjMyIHRha2VzIDEyJSBmb3IgbGV2ZWwgMCBhbmQgMiUgZm9yIGxldmVsIDYuXG4vLyBJdCBkb2Vzbid0IHdvcnRoIHRvIG1ha2UgYWRkaXRpb25hbCBvcHRpbWl6YXRpb25hIGFzIGluIG9yaWdpbmFsLlxuLy8gU21hbGwgc2l6ZSBpcyBwcmVmZXJhYmxlLlxuXG5mdW5jdGlvbiBhZGxlcjMyKGFkbGVyLCBidWYsIGxlbiwgcG9zKSB7XG4gIHZhciBzMSA9IChhZGxlciAmIDB4ZmZmZikgfDAsXG4gICAgICBzMiA9ICgoYWRsZXIgPj4+IDE2KSAmIDB4ZmZmZikgfDAsXG4gICAgICBuID0gMDtcblxuICB3aGlsZSAobGVuICE9PSAwKSB7XG4gICAgLy8gU2V0IGxpbWl0IH4gdHdpY2UgbGVzcyB0aGFuIDU1NTIsIHRvIGtlZXBcbiAgICAvLyBzMiBpbiAzMS1iaXRzLCBiZWNhdXNlIHdlIGZvcmNlIHNpZ25lZCBpbnRzLlxuICAgIC8vIGluIG90aGVyIGNhc2UgJT0gd2lsbCBmYWlsLlxuICAgIG4gPSBsZW4gPiAyMDAwID8gMjAwMCA6IGxlbjtcbiAgICBsZW4gLT0gbjtcblxuICAgIGRvIHtcbiAgICAgIHMxID0gKHMxICsgYnVmW3BvcysrXSkgfDA7XG4gICAgICBzMiA9IChzMiArIHMxKSB8MDtcbiAgICB9IHdoaWxlICgtLW4pO1xuXG4gICAgczEgJT0gNjU1MjE7XG4gICAgczIgJT0gNjU1MjE7XG4gIH1cblxuICByZXR1cm4gKHMxIHwgKHMyIDw8IDE2KSkgfDA7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBhZGxlcjMyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIC8qIEFsbG93ZWQgZmx1c2ggdmFsdWVzOyBzZWUgZGVmbGF0ZSgpIGFuZCBpbmZsYXRlKCkgYmVsb3cgZm9yIGRldGFpbHMgKi9cbiAgWl9OT19GTFVTSDogICAgICAgICAwLFxuICBaX1BBUlRJQUxfRkxVU0g6ICAgIDEsXG4gIFpfU1lOQ19GTFVTSDogICAgICAgMixcbiAgWl9GVUxMX0ZMVVNIOiAgICAgICAzLFxuICBaX0ZJTklTSDogICAgICAgICAgIDQsXG4gIFpfQkxPQ0s6ICAgICAgICAgICAgNSxcbiAgWl9UUkVFUzogICAgICAgICAgICA2LFxuXG4gIC8qIFJldHVybiBjb2RlcyBmb3IgdGhlIGNvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gZnVuY3Rpb25zLiBOZWdhdGl2ZSB2YWx1ZXNcbiAgKiBhcmUgZXJyb3JzLCBwb3NpdGl2ZSB2YWx1ZXMgYXJlIHVzZWQgZm9yIHNwZWNpYWwgYnV0IG5vcm1hbCBldmVudHMuXG4gICovXG4gIFpfT0s6ICAgICAgICAgICAgICAgMCxcbiAgWl9TVFJFQU1fRU5EOiAgICAgICAxLFxuICBaX05FRURfRElDVDogICAgICAgIDIsXG4gIFpfRVJSTk86ICAgICAgICAgICAtMSxcbiAgWl9TVFJFQU1fRVJST1I6ICAgIC0yLFxuICBaX0RBVEFfRVJST1I6ICAgICAgLTMsXG4gIC8vWl9NRU1fRVJST1I6ICAgICAtNCxcbiAgWl9CVUZfRVJST1I6ICAgICAgIC01LFxuICAvL1pfVkVSU0lPTl9FUlJPUjogLTYsXG5cbiAgLyogY29tcHJlc3Npb24gbGV2ZWxzICovXG4gIFpfTk9fQ09NUFJFU1NJT046ICAgICAgICAgMCxcbiAgWl9CRVNUX1NQRUVEOiAgICAgICAgICAgICAxLFxuICBaX0JFU1RfQ09NUFJFU1NJT046ICAgICAgIDksXG4gIFpfREVGQVVMVF9DT01QUkVTU0lPTjogICAtMSxcblxuXG4gIFpfRklMVEVSRUQ6ICAgICAgICAgICAgICAgMSxcbiAgWl9IVUZGTUFOX09OTFk6ICAgICAgICAgICAyLFxuICBaX1JMRTogICAgICAgICAgICAgICAgICAgIDMsXG4gIFpfRklYRUQ6ICAgICAgICAgICAgICAgICAgNCxcbiAgWl9ERUZBVUxUX1NUUkFURUdZOiAgICAgICAwLFxuXG4gIC8qIFBvc3NpYmxlIHZhbHVlcyBvZiB0aGUgZGF0YV90eXBlIGZpZWxkICh0aG91Z2ggc2VlIGluZmxhdGUoKSkgKi9cbiAgWl9CSU5BUlk6ICAgICAgICAgICAgICAgICAwLFxuICBaX1RFWFQ6ICAgICAgICAgICAgICAgICAgIDEsXG4gIC8vWl9BU0NJSTogICAgICAgICAgICAgICAgMSwgLy8gPSBaX1RFWFQgKGRlcHJlY2F0ZWQpXG4gIFpfVU5LTk9XTjogICAgICAgICAgICAgICAgMixcblxuICAvKiBUaGUgZGVmbGF0ZSBjb21wcmVzc2lvbiBtZXRob2QgKi9cbiAgWl9ERUZMQVRFRDogICAgICAgICAgICAgICA4XG4gIC8vWl9OVUxMOiAgICAgICAgICAgICAgICAgbnVsbCAvLyBVc2UgLTEgb3IgbnVsbCBpbmxpbmUsIGRlcGVuZGluZyBvbiB2YXIgdHlwZVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gTm90ZTogd2UgY2FuJ3QgZ2V0IHNpZ25pZmljYW50IHNwZWVkIGJvb3N0IGhlcmUuXG4vLyBTbyB3cml0ZSBjb2RlIHRvIG1pbmltaXplIHNpemUgLSBubyBwcmVnZW5lcmF0ZWQgdGFibGVzXG4vLyBhbmQgYXJyYXkgdG9vbHMgZGVwZW5kZW5jaWVzLlxuXG5cbi8vIFVzZSBvcmRpbmFyeSBhcnJheSwgc2luY2UgdW50eXBlZCBtYWtlcyBubyBib29zdCBoZXJlXG5mdW5jdGlvbiBtYWtlVGFibGUoKSB7XG4gIHZhciBjLCB0YWJsZSA9IFtdO1xuXG4gIGZvciAodmFyIG4gPSAwOyBuIDwgMjU2OyBuKyspIHtcbiAgICBjID0gbjtcbiAgICBmb3IgKHZhciBrID0gMDsgayA8IDg7IGsrKykge1xuICAgICAgYyA9ICgoYyAmIDEpID8gKDB4RURCODgzMjAgXiAoYyA+Pj4gMSkpIDogKGMgPj4+IDEpKTtcbiAgICB9XG4gICAgdGFibGVbbl0gPSBjO1xuICB9XG5cbiAgcmV0dXJuIHRhYmxlO1xufVxuXG4vLyBDcmVhdGUgdGFibGUgb24gbG9hZC4gSnVzdCAyNTUgc2lnbmVkIGxvbmdzLiBOb3QgYSBwcm9ibGVtLlxudmFyIGNyY1RhYmxlID0gbWFrZVRhYmxlKCk7XG5cblxuZnVuY3Rpb24gY3JjMzIoY3JjLCBidWYsIGxlbiwgcG9zKSB7XG4gIHZhciB0ID0gY3JjVGFibGUsXG4gICAgICBlbmQgPSBwb3MgKyBsZW47XG5cbiAgY3JjIF49IC0xO1xuXG4gIGZvciAodmFyIGkgPSBwb3M7IGkgPCBlbmQ7IGkrKykge1xuICAgIGNyYyA9IChjcmMgPj4+IDgpIF4gdFsoY3JjIF4gYnVmW2ldKSAmIDB4RkZdO1xuICB9XG5cbiAgcmV0dXJuIChjcmMgXiAoLTEpKTsgLy8gPj4+IDA7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBjcmMzMjtcbiIsIid1c2Ugc3RyaWN0JztcblxuXG5mdW5jdGlvbiBHWmhlYWRlcigpIHtcbiAgLyogdHJ1ZSBpZiBjb21wcmVzc2VkIGRhdGEgYmVsaWV2ZWQgdG8gYmUgdGV4dCAqL1xuICB0aGlzLnRleHQgICAgICAgPSAwO1xuICAvKiBtb2RpZmljYXRpb24gdGltZSAqL1xuICB0aGlzLnRpbWUgICAgICAgPSAwO1xuICAvKiBleHRyYSBmbGFncyAobm90IHVzZWQgd2hlbiB3cml0aW5nIGEgZ3ppcCBmaWxlKSAqL1xuICB0aGlzLnhmbGFncyAgICAgPSAwO1xuICAvKiBvcGVyYXRpbmcgc3lzdGVtICovXG4gIHRoaXMub3MgICAgICAgICA9IDA7XG4gIC8qIHBvaW50ZXIgdG8gZXh0cmEgZmllbGQgb3IgWl9OVUxMIGlmIG5vbmUgKi9cbiAgdGhpcy5leHRyYSAgICAgID0gbnVsbDtcbiAgLyogZXh0cmEgZmllbGQgbGVuZ3RoICh2YWxpZCBpZiBleHRyYSAhPSBaX05VTEwpICovXG4gIHRoaXMuZXh0cmFfbGVuICA9IDA7IC8vIEFjdHVhbGx5LCB3ZSBkb24ndCBuZWVkIGl0IGluIEpTLFxuICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgbGVhdmUgZm9yIGZldyBjb2RlIG1vZGlmaWNhdGlvbnNcblxuICAvL1xuICAvLyBTZXR1cCBsaW1pdHMgaXMgbm90IG5lY2Vzc2FyeSBiZWNhdXNlIGluIGpzIHdlIHNob3VsZCBub3QgcHJlYWxsb2NhdGUgbWVtb3J5XG4gIC8vIGZvciBpbmZsYXRlIHVzZSBjb25zdGFudCBsaW1pdCBpbiA2NTUzNiBieXRlc1xuICAvL1xuXG4gIC8qIHNwYWNlIGF0IGV4dHJhIChvbmx5IHdoZW4gcmVhZGluZyBoZWFkZXIpICovXG4gIC8vIHRoaXMuZXh0cmFfbWF4ICA9IDA7XG4gIC8qIHBvaW50ZXIgdG8gemVyby10ZXJtaW5hdGVkIGZpbGUgbmFtZSBvciBaX05VTEwgKi9cbiAgdGhpcy5uYW1lICAgICAgID0gJyc7XG4gIC8qIHNwYWNlIGF0IG5hbWUgKG9ubHkgd2hlbiByZWFkaW5nIGhlYWRlcikgKi9cbiAgLy8gdGhpcy5uYW1lX21heCAgID0gMDtcbiAgLyogcG9pbnRlciB0byB6ZXJvLXRlcm1pbmF0ZWQgY29tbWVudCBvciBaX05VTEwgKi9cbiAgdGhpcy5jb21tZW50ICAgID0gJyc7XG4gIC8qIHNwYWNlIGF0IGNvbW1lbnQgKG9ubHkgd2hlbiByZWFkaW5nIGhlYWRlcikgKi9cbiAgLy8gdGhpcy5jb21tX21heCAgID0gMDtcbiAgLyogdHJ1ZSBpZiB0aGVyZSB3YXMgb3Igd2lsbCBiZSBhIGhlYWRlciBjcmMgKi9cbiAgdGhpcy5oY3JjICAgICAgID0gMDtcbiAgLyogdHJ1ZSB3aGVuIGRvbmUgcmVhZGluZyBnemlwIGhlYWRlciAobm90IHVzZWQgd2hlbiB3cml0aW5nIGEgZ3ppcCBmaWxlKSAqL1xuICB0aGlzLmRvbmUgICAgICAgPSBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBHWmhlYWRlcjtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gU2VlIHN0YXRlIGRlZnMgZnJvbSBpbmZsYXRlLmpzXG52YXIgQkFEID0gMzA7ICAgICAgIC8qIGdvdCBhIGRhdGEgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciBUWVBFID0gMTI7ICAgICAgLyogaTogd2FpdGluZyBmb3IgdHlwZSBiaXRzLCBpbmNsdWRpbmcgbGFzdC1mbGFnIGJpdCAqL1xuXG4vKlxuICAgRGVjb2RlIGxpdGVyYWwsIGxlbmd0aCwgYW5kIGRpc3RhbmNlIGNvZGVzIGFuZCB3cml0ZSBvdXQgdGhlIHJlc3VsdGluZ1xuICAgbGl0ZXJhbCBhbmQgbWF0Y2ggYnl0ZXMgdW50aWwgZWl0aGVyIG5vdCBlbm91Z2ggaW5wdXQgb3Igb3V0cHV0IGlzXG4gICBhdmFpbGFibGUsIGFuIGVuZC1vZi1ibG9jayBpcyBlbmNvdW50ZXJlZCwgb3IgYSBkYXRhIGVycm9yIGlzIGVuY291bnRlcmVkLlxuICAgV2hlbiBsYXJnZSBlbm91Z2ggaW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIGFyZSBzdXBwbGllZCB0byBpbmZsYXRlKCksIGZvclxuICAgZXhhbXBsZSwgYSAxNksgaW5wdXQgYnVmZmVyIGFuZCBhIDY0SyBvdXRwdXQgYnVmZmVyLCBtb3JlIHRoYW4gOTUlIG9mIHRoZVxuICAgaW5mbGF0ZSBleGVjdXRpb24gdGltZSBpcyBzcGVudCBpbiB0aGlzIHJvdXRpbmUuXG5cbiAgIEVudHJ5IGFzc3VtcHRpb25zOlxuXG4gICAgICAgIHN0YXRlLm1vZGUgPT09IExFTlxuICAgICAgICBzdHJtLmF2YWlsX2luID49IDZcbiAgICAgICAgc3RybS5hdmFpbF9vdXQgPj0gMjU4XG4gICAgICAgIHN0YXJ0ID49IHN0cm0uYXZhaWxfb3V0XG4gICAgICAgIHN0YXRlLmJpdHMgPCA4XG5cbiAgIE9uIHJldHVybiwgc3RhdGUubW9kZSBpcyBvbmUgb2Y6XG5cbiAgICAgICAgTEVOIC0tIHJhbiBvdXQgb2YgZW5vdWdoIG91dHB1dCBzcGFjZSBvciBlbm91Z2ggYXZhaWxhYmxlIGlucHV0XG4gICAgICAgIFRZUEUgLS0gcmVhY2hlZCBlbmQgb2YgYmxvY2sgY29kZSwgaW5mbGF0ZSgpIHRvIGludGVycHJldCBuZXh0IGJsb2NrXG4gICAgICAgIEJBRCAtLSBlcnJvciBpbiBibG9jayBkYXRhXG5cbiAgIE5vdGVzOlxuXG4gICAgLSBUaGUgbWF4aW11bSBpbnB1dCBiaXRzIHVzZWQgYnkgYSBsZW5ndGgvZGlzdGFuY2UgcGFpciBpcyAxNSBiaXRzIGZvciB0aGVcbiAgICAgIGxlbmd0aCBjb2RlLCA1IGJpdHMgZm9yIHRoZSBsZW5ndGggZXh0cmEsIDE1IGJpdHMgZm9yIHRoZSBkaXN0YW5jZSBjb2RlLFxuICAgICAgYW5kIDEzIGJpdHMgZm9yIHRoZSBkaXN0YW5jZSBleHRyYS4gIFRoaXMgdG90YWxzIDQ4IGJpdHMsIG9yIHNpeCBieXRlcy5cbiAgICAgIFRoZXJlZm9yZSBpZiBzdHJtLmF2YWlsX2luID49IDYsIHRoZW4gdGhlcmUgaXMgZW5vdWdoIGlucHV0IHRvIGF2b2lkXG4gICAgICBjaGVja2luZyBmb3IgYXZhaWxhYmxlIGlucHV0IHdoaWxlIGRlY29kaW5nLlxuXG4gICAgLSBUaGUgbWF4aW11bSBieXRlcyB0aGF0IGEgc2luZ2xlIGxlbmd0aC9kaXN0YW5jZSBwYWlyIGNhbiBvdXRwdXQgaXMgMjU4XG4gICAgICBieXRlcywgd2hpY2ggaXMgdGhlIG1heGltdW0gbGVuZ3RoIHRoYXQgY2FuIGJlIGNvZGVkLiAgaW5mbGF0ZV9mYXN0KClcbiAgICAgIHJlcXVpcmVzIHN0cm0uYXZhaWxfb3V0ID49IDI1OCBmb3IgZWFjaCBsb29wIHRvIGF2b2lkIGNoZWNraW5nIGZvclxuICAgICAgb3V0cHV0IHNwYWNlLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluZmxhdGVfZmFzdChzdHJtLCBzdGFydCkge1xuICB2YXIgc3RhdGU7XG4gIHZhciBfaW47ICAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmlucHV0ICovXG4gIHZhciBsYXN0OyAgICAgICAgICAgICAgICAgICAvKiBoYXZlIGVub3VnaCBpbnB1dCB3aGlsZSBpbiA8IGxhc3QgKi9cbiAgdmFyIF9vdXQ7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0ub3V0cHV0ICovXG4gIHZhciBiZWc7ICAgICAgICAgICAgICAgICAgICAvKiBpbmZsYXRlKCkncyBpbml0aWFsIHN0cm0ub3V0cHV0ICovXG4gIHZhciBlbmQ7ICAgICAgICAgICAgICAgICAgICAvKiB3aGlsZSBvdXQgPCBlbmQsIGVub3VnaCBzcGFjZSBhdmFpbGFibGUgKi9cbi8vI2lmZGVmIElORkxBVEVfU1RSSUNUXG4gIHZhciBkbWF4OyAgICAgICAgICAgICAgICAgICAvKiBtYXhpbXVtIGRpc3RhbmNlIGZyb20gemxpYiBoZWFkZXIgKi9cbi8vI2VuZGlmXG4gIHZhciB3c2l6ZTsgICAgICAgICAgICAgICAgICAvKiB3aW5kb3cgc2l6ZSBvciB6ZXJvIGlmIG5vdCB1c2luZyB3aW5kb3cgKi9cbiAgdmFyIHdoYXZlOyAgICAgICAgICAgICAgICAgIC8qIHZhbGlkIGJ5dGVzIGluIHRoZSB3aW5kb3cgKi9cbiAgdmFyIHduZXh0OyAgICAgICAgICAgICAgICAgIC8qIHdpbmRvdyB3cml0ZSBpbmRleCAqL1xuICAvLyBVc2UgYHNfd2luZG93YCBpbnN0ZWFkIGB3aW5kb3dgLCBhdm9pZCBjb25mbGljdCB3aXRoIGluc3RydW1lbnRhdGlvbiB0b29sc1xuICB2YXIgc193aW5kb3c7ICAgICAgICAgICAgICAgLyogYWxsb2NhdGVkIHNsaWRpbmcgd2luZG93LCBpZiB3c2l6ZSAhPSAwICovXG4gIHZhciBob2xkOyAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmhvbGQgKi9cbiAgdmFyIGJpdHM7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uYml0cyAqL1xuICB2YXIgbGNvZGU7ICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5sZW5jb2RlICovXG4gIHZhciBkY29kZTsgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmRpc3Rjb2RlICovXG4gIHZhciBsbWFzazsgICAgICAgICAgICAgICAgICAvKiBtYXNrIGZvciBmaXJzdCBsZXZlbCBvZiBsZW5ndGggY29kZXMgKi9cbiAgdmFyIGRtYXNrOyAgICAgICAgICAgICAgICAgIC8qIG1hc2sgZm9yIGZpcnN0IGxldmVsIG9mIGRpc3RhbmNlIGNvZGVzICovXG4gIHZhciBoZXJlOyAgICAgICAgICAgICAgICAgICAvKiByZXRyaWV2ZWQgdGFibGUgZW50cnkgKi9cbiAgdmFyIG9wOyAgICAgICAgICAgICAgICAgICAgIC8qIGNvZGUgYml0cywgb3BlcmF0aW9uLCBleHRyYSBiaXRzLCBvciAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIHdpbmRvdyBwb3NpdGlvbiwgd2luZG93IGJ5dGVzIHRvIGNvcHkgKi9cbiAgdmFyIGxlbjsgICAgICAgICAgICAgICAgICAgIC8qIG1hdGNoIGxlbmd0aCwgdW51c2VkIGJ5dGVzICovXG4gIHZhciBkaXN0OyAgICAgICAgICAgICAgICAgICAvKiBtYXRjaCBkaXN0YW5jZSAqL1xuICB2YXIgZnJvbTsgICAgICAgICAgICAgICAgICAgLyogd2hlcmUgdG8gY29weSBtYXRjaCBmcm9tICovXG4gIHZhciBmcm9tX3NvdXJjZTtcblxuXG4gIHZhciBpbnB1dCwgb3V0cHV0OyAvLyBKUyBzcGVjaWZpYywgYmVjYXVzZSB3ZSBoYXZlIG5vIHBvaW50ZXJzXG5cbiAgLyogY29weSBzdGF0ZSB0byBsb2NhbCB2YXJpYWJsZXMgKi9cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICAvL2hlcmUgPSBzdGF0ZS5oZXJlO1xuICBfaW4gPSBzdHJtLm5leHRfaW47XG4gIGlucHV0ID0gc3RybS5pbnB1dDtcbiAgbGFzdCA9IF9pbiArIChzdHJtLmF2YWlsX2luIC0gNSk7XG4gIF9vdXQgPSBzdHJtLm5leHRfb3V0O1xuICBvdXRwdXQgPSBzdHJtLm91dHB1dDtcbiAgYmVnID0gX291dCAtIChzdGFydCAtIHN0cm0uYXZhaWxfb3V0KTtcbiAgZW5kID0gX291dCArIChzdHJtLmF2YWlsX291dCAtIDI1Nyk7XG4vLyNpZmRlZiBJTkZMQVRFX1NUUklDVFxuICBkbWF4ID0gc3RhdGUuZG1heDtcbi8vI2VuZGlmXG4gIHdzaXplID0gc3RhdGUud3NpemU7XG4gIHdoYXZlID0gc3RhdGUud2hhdmU7XG4gIHduZXh0ID0gc3RhdGUud25leHQ7XG4gIHNfd2luZG93ID0gc3RhdGUud2luZG93O1xuICBob2xkID0gc3RhdGUuaG9sZDtcbiAgYml0cyA9IHN0YXRlLmJpdHM7XG4gIGxjb2RlID0gc3RhdGUubGVuY29kZTtcbiAgZGNvZGUgPSBzdGF0ZS5kaXN0Y29kZTtcbiAgbG1hc2sgPSAoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDE7XG4gIGRtYXNrID0gKDEgPDwgc3RhdGUuZGlzdGJpdHMpIC0gMTtcblxuXG4gIC8qIGRlY29kZSBsaXRlcmFscyBhbmQgbGVuZ3RoL2Rpc3RhbmNlcyB1bnRpbCBlbmQtb2YtYmxvY2sgb3Igbm90IGVub3VnaFxuICAgICBpbnB1dCBkYXRhIG9yIG91dHB1dCBzcGFjZSAqL1xuXG4gIHRvcDpcbiAgZG8ge1xuICAgIGlmIChiaXRzIDwgMTUpIHtcbiAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICBiaXRzICs9IDg7XG4gICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgYml0cyArPSA4O1xuICAgIH1cblxuICAgIGhlcmUgPSBsY29kZVtob2xkICYgbG1hc2tdO1xuXG4gICAgZG9sZW46XG4gICAgZm9yICg7OykgeyAvLyBHb3RvIGVtdWxhdGlvblxuICAgICAgb3AgPSBoZXJlID4+PiAyNC8qaGVyZS5iaXRzKi87XG4gICAgICBob2xkID4+Pj0gb3A7XG4gICAgICBiaXRzIC09IG9wO1xuICAgICAgb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZi8qaGVyZS5vcCovO1xuICAgICAgaWYgKG9wID09PSAwKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBsaXRlcmFsICovXG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBoZXJlLnZhbCA+PSAweDIwICYmIGhlcmUudmFsIDwgMHg3ZiA/XG4gICAgICAgIC8vICAgICAgICBcImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAnJWMnXFxuXCIgOlxuICAgICAgICAvLyAgICAgICAgXCJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgMHglMDJ4XFxuXCIsIGhlcmUudmFsKSk7XG4gICAgICAgIG91dHB1dFtfb3V0KytdID0gaGVyZSAmIDB4ZmZmZi8qaGVyZS52YWwqLztcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG9wICYgMTYpIHsgICAgICAgICAgICAgICAgICAgICAvKiBsZW5ndGggYmFzZSAqL1xuICAgICAgICBsZW4gPSBoZXJlICYgMHhmZmZmLypoZXJlLnZhbCovO1xuICAgICAgICBvcCAmPSAxNTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZXh0cmEgYml0cyAqL1xuICAgICAgICBpZiAob3ApIHtcbiAgICAgICAgICBpZiAoYml0cyA8IG9wKSB7XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZW4gKz0gaG9sZCAmICgoMSA8PCBvcCkgLSAxKTtcbiAgICAgICAgICBob2xkID4+Pj0gb3A7XG4gICAgICAgICAgYml0cyAtPSBvcDtcbiAgICAgICAgfVxuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGxlbmd0aCAldVxcblwiLCBsZW4pKTtcbiAgICAgICAgaWYgKGJpdHMgPCAxNSkge1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIGhlcmUgPSBkY29kZVtob2xkICYgZG1hc2tdO1xuXG4gICAgICAgIGRvZGlzdDpcbiAgICAgICAgZm9yICg7OykgeyAvLyBnb3RvIGVtdWxhdGlvblxuICAgICAgICAgIG9wID0gaGVyZSA+Pj4gMjQvKmhlcmUuYml0cyovO1xuICAgICAgICAgIGhvbGQgPj4+PSBvcDtcbiAgICAgICAgICBiaXRzIC09IG9wO1xuICAgICAgICAgIG9wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmYvKmhlcmUub3AqLztcblxuICAgICAgICAgIGlmIChvcCAmIDE2KSB7ICAgICAgICAgICAgICAgICAgICAgIC8qIGRpc3RhbmNlIGJhc2UgKi9cbiAgICAgICAgICAgIGRpc3QgPSBoZXJlICYgMHhmZmZmLypoZXJlLnZhbCovO1xuICAgICAgICAgICAgb3AgJj0gMTU7ICAgICAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZXh0cmEgYml0cyAqL1xuICAgICAgICAgICAgaWYgKGJpdHMgPCBvcCkge1xuICAgICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICAgIGlmIChiaXRzIDwgb3ApIHtcbiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlzdCArPSBob2xkICYgKCgxIDw8IG9wKSAtIDEpO1xuLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1RcbiAgICAgICAgICAgIGlmIChkaXN0ID4gZG1heCkge1xuICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7XG4gICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICAgIGJyZWFrIHRvcDtcbiAgICAgICAgICAgIH1cbi8vI2VuZGlmXG4gICAgICAgICAgICBob2xkID4+Pj0gb3A7XG4gICAgICAgICAgICBiaXRzIC09IG9wO1xuICAgICAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBkaXN0YW5jZSAldVxcblwiLCBkaXN0KSk7XG4gICAgICAgICAgICBvcCA9IF9vdXQgLSBiZWc7ICAgICAgICAgICAgICAgIC8qIG1heCBkaXN0YW5jZSBpbiBvdXRwdXQgKi9cbiAgICAgICAgICAgIGlmIChkaXN0ID4gb3ApIHsgICAgICAgICAgICAgICAgLyogc2VlIGlmIGNvcHkgZnJvbSB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgb3AgPSBkaXN0IC0gb3A7ICAgICAgICAgICAgICAgLyogZGlzdGFuY2UgYmFjayBpbiB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgaWYgKG9wID4gd2hhdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuc2FuZSkge1xuICAgICAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2snO1xuICAgICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgICAgICAgIGJyZWFrIHRvcDtcbiAgICAgICAgICAgICAgICB9XG5cbi8vICghKSBUaGlzIGJsb2NrIGlzIGRpc2FibGVkIGluIHpsaWIgZGVmYWlsdHMsXG4vLyBkb24ndCBlbmFibGUgaXQgZm9yIGJpbmFyeSBjb21wYXRpYmlsaXR5XG4vLyNpZmRlZiBJTkZMQVRFX0FMTE9XX0lOVkFMSURfRElTVEFOQ0VfVE9PRkFSX0FSUlJcbi8vICAgICAgICAgICAgICAgIGlmIChsZW4gPD0gb3AgLSB3aGF2ZSkge1xuLy8gICAgICAgICAgICAgICAgICBkbyB7XG4vLyAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSAwO1xuLy8gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLWxlbik7XG4vLyAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIHRvcDtcbi8vICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgICAgIGxlbiAtPSBvcCAtIHdoYXZlO1xuLy8gICAgICAgICAgICAgICAgZG8ge1xuLy8gICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IDA7XG4vLyAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wID4gd2hhdmUpO1xuLy8gICAgICAgICAgICAgICAgaWYgKG9wID09PSAwKSB7XG4vLyAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDtcbi8vICAgICAgICAgICAgICAgICAgZG8ge1xuLy8gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4vLyAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tbGVuKTtcbi8vICAgICAgICAgICAgICAgICAgY29udGludWUgdG9wO1xuLy8gICAgICAgICAgICAgICAgfVxuLy8jZW5kaWZcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBmcm9tID0gMDsgLy8gd2luZG93IGluZGV4XG4gICAgICAgICAgICAgIGZyb21fc291cmNlID0gc193aW5kb3c7XG4gICAgICAgICAgICAgIGlmICh3bmV4dCA9PT0gMCkgeyAgICAgICAgICAgLyogdmVyeSBjb21tb24gY2FzZSAqL1xuICAgICAgICAgICAgICAgIGZyb20gKz0gd3NpemUgLSBvcDtcbiAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gd2luZG93ICovXG4gICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7XG4gICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApO1xuICAgICAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0OyAgLyogcmVzdCBmcm9tIG91dHB1dCAqL1xuICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYgKHduZXh0IDwgb3ApIHsgICAgICAvKiB3cmFwIGFyb3VuZCB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICBmcm9tICs9IHdzaXplICsgd25leHQgLSBvcDtcbiAgICAgICAgICAgICAgICBvcCAtPSB3bmV4dDtcbiAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gZW5kIG9mIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgICAgbGVuIC09IG9wO1xuICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107XG4gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTtcbiAgICAgICAgICAgICAgICAgIGZyb20gPSAwO1xuICAgICAgICAgICAgICAgICAgaWYgKHduZXh0IDwgbGVuKSB7ICAvKiBzb21lIGZyb20gc3RhcnQgb2Ygd2luZG93ICovXG4gICAgICAgICAgICAgICAgICAgIG9wID0gd25leHQ7XG4gICAgICAgICAgICAgICAgICAgIGxlbiAtPSBvcDtcbiAgICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7XG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgICAgICAvKiByZXN0IGZyb20gb3V0cHV0ICovXG4gICAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgLyogY29udGlndW91cyBpbiB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICBmcm9tICs9IHduZXh0IC0gb3A7XG4gICAgICAgICAgICAgICAgaWYgKG9wIDwgbGVuKSB7ICAgICAgICAgLyogc29tZSBmcm9tIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgICAgbGVuIC09IG9wO1xuICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107XG4gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTtcbiAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgIC8qIHJlc3QgZnJvbSBvdXRwdXQgKi9cbiAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB3aGlsZSAobGVuID4gMikge1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgICAgICAgICAgIGxlbiAtPSAzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChsZW4pIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAgICAgICAgIC8qIGNvcHkgZGlyZWN0IGZyb20gb3V0cHV0ICovXG4gICAgICAgICAgICAgIGRvIHsgICAgICAgICAgICAgICAgICAgICAgICAvKiBtaW5pbXVtIGxlbmd0aCBpcyB0aHJlZSAqL1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuICAgICAgICAgICAgICAgIGxlbiAtPSAzO1xuICAgICAgICAgICAgICB9IHdoaWxlIChsZW4gPiAyKTtcbiAgICAgICAgICAgICAgaWYgKGxlbikge1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKChvcCAmIDY0KSA9PT0gMCkgeyAgICAgICAgICAvKiAybmQgbGV2ZWwgZGlzdGFuY2UgY29kZSAqL1xuICAgICAgICAgICAgaGVyZSA9IGRjb2RlWyhoZXJlICYgMHhmZmZmKS8qaGVyZS52YWwqLyArIChob2xkICYgKCgxIDw8IG9wKSAtIDEpKV07XG4gICAgICAgICAgICBjb250aW51ZSBkb2Rpc3Q7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSBjb2RlJztcbiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICBicmVhayB0b3A7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7IC8vIG5lZWQgdG8gZW11bGF0ZSBnb3RvIHZpYSBcImNvbnRpbnVlXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoKG9wICYgNjQpID09PSAwKSB7ICAgICAgICAgICAgICAvKiAybmQgbGV2ZWwgbGVuZ3RoIGNvZGUgKi9cbiAgICAgICAgaGVyZSA9IGxjb2RlWyhoZXJlICYgMHhmZmZmKS8qaGVyZS52YWwqLyArIChob2xkICYgKCgxIDw8IG9wKSAtIDEpKV07XG4gICAgICAgIGNvbnRpbnVlIGRvbGVuO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAob3AgJiAzMikgeyAgICAgICAgICAgICAgICAgICAgIC8qIGVuZC1vZi1ibG9jayAqL1xuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGVuZCBvZiBibG9ja1xcblwiKSk7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgICBicmVhayB0b3A7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWsgdG9wO1xuICAgICAgfVxuXG4gICAgICBicmVhazsgLy8gbmVlZCB0byBlbXVsYXRlIGdvdG8gdmlhIFwiY29udGludWVcIlxuICAgIH1cbiAgfSB3aGlsZSAoX2luIDwgbGFzdCAmJiBfb3V0IDwgZW5kKTtcblxuICAvKiByZXR1cm4gdW51c2VkIGJ5dGVzIChvbiBlbnRyeSwgYml0cyA8IDgsIHNvIGluIHdvbid0IGdvIHRvbyBmYXIgYmFjaykgKi9cbiAgbGVuID0gYml0cyA+PiAzO1xuICBfaW4gLT0gbGVuO1xuICBiaXRzIC09IGxlbiA8PCAzO1xuICBob2xkICY9ICgxIDw8IGJpdHMpIC0gMTtcblxuICAvKiB1cGRhdGUgc3RhdGUgYW5kIHJldHVybiAqL1xuICBzdHJtLm5leHRfaW4gPSBfaW47XG4gIHN0cm0ubmV4dF9vdXQgPSBfb3V0O1xuICBzdHJtLmF2YWlsX2luID0gKF9pbiA8IGxhc3QgPyA1ICsgKGxhc3QgLSBfaW4pIDogNSAtIChfaW4gLSBsYXN0KSk7XG4gIHN0cm0uYXZhaWxfb3V0ID0gKF9vdXQgPCBlbmQgPyAyNTcgKyAoZW5kIC0gX291dCkgOiAyNTcgLSAoX291dCAtIGVuZCkpO1xuICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgc3RhdGUuYml0cyA9IGJpdHM7XG4gIHJldHVybjtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cblxudmFyIHV0aWxzICAgICAgICAgPSByZXF1aXJlKCcuLi91dGlscy9jb21tb24nKTtcbnZhciBhZGxlcjMyICAgICAgID0gcmVxdWlyZSgnLi9hZGxlcjMyJyk7XG52YXIgY3JjMzIgICAgICAgICA9IHJlcXVpcmUoJy4vY3JjMzInKTtcbnZhciBpbmZsYXRlX2Zhc3QgID0gcmVxdWlyZSgnLi9pbmZmYXN0Jyk7XG52YXIgaW5mbGF0ZV90YWJsZSA9IHJlcXVpcmUoJy4vaW5mdHJlZXMnKTtcblxudmFyIENPREVTID0gMDtcbnZhciBMRU5TID0gMTtcbnZhciBESVNUUyA9IDI7XG5cbi8qIFB1YmxpYyBjb25zdGFudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cbi8qIEFsbG93ZWQgZmx1c2ggdmFsdWVzOyBzZWUgZGVmbGF0ZSgpIGFuZCBpbmZsYXRlKCkgYmVsb3cgZm9yIGRldGFpbHMgKi9cbi8vdmFyIFpfTk9fRkxVU0ggICAgICA9IDA7XG4vL3ZhciBaX1BBUlRJQUxfRkxVU0ggPSAxO1xuLy92YXIgWl9TWU5DX0ZMVVNIICAgID0gMjtcbi8vdmFyIFpfRlVMTF9GTFVTSCAgICA9IDM7XG52YXIgWl9GSU5JU0ggICAgICAgID0gNDtcbnZhciBaX0JMT0NLICAgICAgICAgPSA1O1xudmFyIFpfVFJFRVMgICAgICAgICA9IDY7XG5cblxuLyogUmV0dXJuIGNvZGVzIGZvciB0aGUgY29tcHJlc3Npb24vZGVjb21wcmVzc2lvbiBmdW5jdGlvbnMuIE5lZ2F0aXZlIHZhbHVlc1xuICogYXJlIGVycm9ycywgcG9zaXRpdmUgdmFsdWVzIGFyZSB1c2VkIGZvciBzcGVjaWFsIGJ1dCBub3JtYWwgZXZlbnRzLlxuICovXG52YXIgWl9PSyAgICAgICAgICAgID0gMDtcbnZhciBaX1NUUkVBTV9FTkQgICAgPSAxO1xudmFyIFpfTkVFRF9ESUNUICAgICA9IDI7XG4vL3ZhciBaX0VSUk5PICAgICAgICAgPSAtMTtcbnZhciBaX1NUUkVBTV9FUlJPUiAgPSAtMjtcbnZhciBaX0RBVEFfRVJST1IgICAgPSAtMztcbnZhciBaX01FTV9FUlJPUiAgICAgPSAtNDtcbnZhciBaX0JVRl9FUlJPUiAgICAgPSAtNTtcbi8vdmFyIFpfVkVSU0lPTl9FUlJPUiA9IC02O1xuXG4vKiBUaGUgZGVmbGF0ZSBjb21wcmVzc2lvbiBtZXRob2QgKi9cbnZhciBaX0RFRkxBVEVEICA9IDg7XG5cblxuLyogU1RBVEVTID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxudmFyICAgIEhFQUQgPSAxOyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBtYWdpYyBoZWFkZXIgKi9cbnZhciAgICBGTEFHUyA9IDI7ICAgICAgLyogaTogd2FpdGluZyBmb3IgbWV0aG9kIGFuZCBmbGFncyAoZ3ppcCkgKi9cbnZhciAgICBUSU1FID0gMzsgICAgICAgLyogaTogd2FpdGluZyBmb3IgbW9kaWZpY2F0aW9uIHRpbWUgKGd6aXApICovXG52YXIgICAgT1MgPSA0OyAgICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGV4dHJhIGZsYWdzIGFuZCBvcGVyYXRpbmcgc3lzdGVtIChnemlwKSAqL1xudmFyICAgIEVYTEVOID0gNTsgICAgICAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBsZW5ndGggKGd6aXApICovXG52YXIgICAgRVhUUkEgPSA2OyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGV4dHJhIGJ5dGVzIChnemlwKSAqL1xudmFyICAgIE5BTUUgPSA3OyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBlbmQgb2YgZmlsZSBuYW1lIChnemlwKSAqL1xudmFyICAgIENPTU1FTlQgPSA4OyAgICAvKiBpOiB3YWl0aW5nIGZvciBlbmQgb2YgY29tbWVudCAoZ3ppcCkgKi9cbnZhciAgICBIQ1JDID0gOTsgICAgICAgLyogaTogd2FpdGluZyBmb3IgaGVhZGVyIGNyYyAoZ3ppcCkgKi9cbnZhciAgICBESUNUSUQgPSAxMDsgICAgLyogaTogd2FpdGluZyBmb3IgZGljdGlvbmFyeSBjaGVjayB2YWx1ZSAqL1xudmFyICAgIERJQ1QgPSAxMTsgICAgICAvKiB3YWl0aW5nIGZvciBpbmZsYXRlU2V0RGljdGlvbmFyeSgpIGNhbGwgKi9cbnZhciAgICAgICAgVFlQRSA9IDEyOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIHR5cGUgYml0cywgaW5jbHVkaW5nIGxhc3QtZmxhZyBiaXQgKi9cbnZhciAgICAgICAgVFlQRURPID0gMTM7ICAgIC8qIGk6IHNhbWUsIGJ1dCBza2lwIGNoZWNrIHRvIGV4aXQgaW5mbGF0ZSBvbiBuZXcgYmxvY2sgKi9cbnZhciAgICAgICAgU1RPUkVEID0gMTQ7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIHN0b3JlZCBzaXplIChsZW5ndGggYW5kIGNvbXBsZW1lbnQpICovXG52YXIgICAgICAgIENPUFlfID0gMTU7ICAgICAvKiBpL286IHNhbWUgYXMgQ09QWSBiZWxvdywgYnV0IG9ubHkgZmlyc3QgdGltZSBpbiAqL1xudmFyICAgICAgICBDT1BZID0gMTY7ICAgICAgLyogaS9vOiB3YWl0aW5nIGZvciBpbnB1dCBvciBvdXRwdXQgdG8gY29weSBzdG9yZWQgYmxvY2sgKi9cbnZhciAgICAgICAgVEFCTEUgPSAxNzsgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGR5bmFtaWMgYmxvY2sgdGFibGUgbGVuZ3RocyAqL1xudmFyICAgICAgICBMRU5MRU5TID0gMTg7ICAgLyogaTogd2FpdGluZyBmb3IgY29kZSBsZW5ndGggY29kZSBsZW5ndGhzICovXG52YXIgICAgICAgIENPREVMRU5TID0gMTk7ICAvKiBpOiB3YWl0aW5nIGZvciBsZW5ndGgvbGl0IGFuZCBkaXN0YW5jZSBjb2RlIGxlbmd0aHMgKi9cbnZhciAgICAgICAgICAgIExFTl8gPSAyMDsgICAgICAvKiBpOiBzYW1lIGFzIExFTiBiZWxvdywgYnV0IG9ubHkgZmlyc3QgdGltZSBpbiAqL1xudmFyICAgICAgICAgICAgTEVOID0gMjE7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGxlbmd0aC9saXQvZW9iIGNvZGUgKi9cbnZhciAgICAgICAgICAgIExFTkVYVCA9IDIyOyAgICAvKiBpOiB3YWl0aW5nIGZvciBsZW5ndGggZXh0cmEgYml0cyAqL1xudmFyICAgICAgICAgICAgRElTVCA9IDIzOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGRpc3RhbmNlIGNvZGUgKi9cbnZhciAgICAgICAgICAgIERJU1RFWFQgPSAyNDsgICAvKiBpOiB3YWl0aW5nIGZvciBkaXN0YW5jZSBleHRyYSBiaXRzICovXG52YXIgICAgICAgICAgICBNQVRDSCA9IDI1OyAgICAgLyogbzogd2FpdGluZyBmb3Igb3V0cHV0IHNwYWNlIHRvIGNvcHkgc3RyaW5nICovXG52YXIgICAgICAgICAgICBMSVQgPSAyNjsgICAgICAgLyogbzogd2FpdGluZyBmb3Igb3V0cHV0IHNwYWNlIHRvIHdyaXRlIGxpdGVyYWwgKi9cbnZhciAgICBDSEVDSyA9IDI3OyAgICAgLyogaTogd2FpdGluZyBmb3IgMzItYml0IGNoZWNrIHZhbHVlICovXG52YXIgICAgTEVOR1RIID0gMjg7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIDMyLWJpdCBsZW5ndGggKGd6aXApICovXG52YXIgICAgRE9ORSA9IDI5OyAgICAgIC8qIGZpbmlzaGVkIGNoZWNrLCBkb25lIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovXG52YXIgICAgQkFEID0gMzA7ICAgICAgIC8qIGdvdCBhIGRhdGEgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciAgICBNRU0gPSAzMTsgICAgICAgLyogZ290IGFuIGluZmxhdGUoKSBtZW1vcnkgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciAgICBTWU5DID0gMzI7ICAgICAgLyogbG9va2luZyBmb3Igc3luY2hyb25pemF0aW9uIGJ5dGVzIHRvIHJlc3RhcnQgaW5mbGF0ZSgpICovXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxuXG52YXIgRU5PVUdIX0xFTlMgPSA4NTI7XG52YXIgRU5PVUdIX0RJU1RTID0gNTkyO1xuLy92YXIgRU5PVUdIID0gIChFTk9VR0hfTEVOUytFTk9VR0hfRElTVFMpO1xuXG52YXIgTUFYX1dCSVRTID0gMTU7XG4vKiAzMksgTFo3NyB3aW5kb3cgKi9cbnZhciBERUZfV0JJVFMgPSBNQVhfV0JJVFM7XG5cblxuZnVuY3Rpb24genN3YXAzMihxKSB7XG4gIHJldHVybiAgKCgocSA+Pj4gMjQpICYgMHhmZikgK1xuICAgICAgICAgICgocSA+Pj4gOCkgJiAweGZmMDApICtcbiAgICAgICAgICAoKHEgJiAweGZmMDApIDw8IDgpICtcbiAgICAgICAgICAoKHEgJiAweGZmKSA8PCAyNCkpO1xufVxuXG5cbmZ1bmN0aW9uIEluZmxhdGVTdGF0ZSgpIHtcbiAgdGhpcy5tb2RlID0gMDsgICAgICAgICAgICAgLyogY3VycmVudCBpbmZsYXRlIG1vZGUgKi9cbiAgdGhpcy5sYXN0ID0gZmFsc2U7ICAgICAgICAgIC8qIHRydWUgaWYgcHJvY2Vzc2luZyBsYXN0IGJsb2NrICovXG4gIHRoaXMud3JhcCA9IDA7ICAgICAgICAgICAgICAvKiBiaXQgMCB0cnVlIGZvciB6bGliLCBiaXQgMSB0cnVlIGZvciBnemlwICovXG4gIHRoaXMuaGF2ZWRpY3QgPSBmYWxzZTsgICAgICAvKiB0cnVlIGlmIGRpY3Rpb25hcnkgcHJvdmlkZWQgKi9cbiAgdGhpcy5mbGFncyA9IDA7ICAgICAgICAgICAgIC8qIGd6aXAgaGVhZGVyIG1ldGhvZCBhbmQgZmxhZ3MgKDAgaWYgemxpYikgKi9cbiAgdGhpcy5kbWF4ID0gMDsgICAgICAgICAgICAgIC8qIHpsaWIgaGVhZGVyIG1heCBkaXN0YW5jZSAoSU5GTEFURV9TVFJJQ1QpICovXG4gIHRoaXMuY2hlY2sgPSAwOyAgICAgICAgICAgICAvKiBwcm90ZWN0ZWQgY29weSBvZiBjaGVjayB2YWx1ZSAqL1xuICB0aGlzLnRvdGFsID0gMDsgICAgICAgICAgICAgLyogcHJvdGVjdGVkIGNvcHkgb2Ygb3V0cHV0IGNvdW50ICovXG4gIC8vIFRPRE86IG1heSBiZSB7fVxuICB0aGlzLmhlYWQgPSBudWxsOyAgICAgICAgICAgLyogd2hlcmUgdG8gc2F2ZSBnemlwIGhlYWRlciBpbmZvcm1hdGlvbiAqL1xuXG4gIC8qIHNsaWRpbmcgd2luZG93ICovXG4gIHRoaXMud2JpdHMgPSAwOyAgICAgICAgICAgICAvKiBsb2cgYmFzZSAyIG9mIHJlcXVlc3RlZCB3aW5kb3cgc2l6ZSAqL1xuICB0aGlzLndzaXplID0gMDsgICAgICAgICAgICAgLyogd2luZG93IHNpemUgb3IgemVybyBpZiBub3QgdXNpbmcgd2luZG93ICovXG4gIHRoaXMud2hhdmUgPSAwOyAgICAgICAgICAgICAvKiB2YWxpZCBieXRlcyBpbiB0aGUgd2luZG93ICovXG4gIHRoaXMud25leHQgPSAwOyAgICAgICAgICAgICAvKiB3aW5kb3cgd3JpdGUgaW5kZXggKi9cbiAgdGhpcy53aW5kb3cgPSBudWxsOyAgICAgICAgIC8qIGFsbG9jYXRlZCBzbGlkaW5nIHdpbmRvdywgaWYgbmVlZGVkICovXG5cbiAgLyogYml0IGFjY3VtdWxhdG9yICovXG4gIHRoaXMuaG9sZCA9IDA7ICAgICAgICAgICAgICAvKiBpbnB1dCBiaXQgYWNjdW11bGF0b3IgKi9cbiAgdGhpcy5iaXRzID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBiaXRzIGluIFwiaW5cIiAqL1xuXG4gIC8qIGZvciBzdHJpbmcgYW5kIHN0b3JlZCBibG9jayBjb3B5aW5nICovXG4gIHRoaXMubGVuZ3RoID0gMDsgICAgICAgICAgICAvKiBsaXRlcmFsIG9yIGxlbmd0aCBvZiBkYXRhIHRvIGNvcHkgKi9cbiAgdGhpcy5vZmZzZXQgPSAwOyAgICAgICAgICAgIC8qIGRpc3RhbmNlIGJhY2sgdG8gY29weSBzdHJpbmcgZnJvbSAqL1xuXG4gIC8qIGZvciB0YWJsZSBhbmQgY29kZSBkZWNvZGluZyAqL1xuICB0aGlzLmV4dHJhID0gMDsgICAgICAgICAgICAgLyogZXh0cmEgYml0cyBuZWVkZWQgKi9cblxuICAvKiBmaXhlZCBhbmQgZHluYW1pYyBjb2RlIHRhYmxlcyAqL1xuICB0aGlzLmxlbmNvZGUgPSBudWxsOyAgICAgICAgICAvKiBzdGFydGluZyB0YWJsZSBmb3IgbGVuZ3RoL2xpdGVyYWwgY29kZXMgKi9cbiAgdGhpcy5kaXN0Y29kZSA9IG51bGw7ICAgICAgICAgLyogc3RhcnRpbmcgdGFibGUgZm9yIGRpc3RhbmNlIGNvZGVzICovXG4gIHRoaXMubGVuYml0cyA9IDA7ICAgICAgICAgICAvKiBpbmRleCBiaXRzIGZvciBsZW5jb2RlICovXG4gIHRoaXMuZGlzdGJpdHMgPSAwOyAgICAgICAgICAvKiBpbmRleCBiaXRzIGZvciBkaXN0Y29kZSAqL1xuXG4gIC8qIGR5bmFtaWMgdGFibGUgYnVpbGRpbmcgKi9cbiAgdGhpcy5uY29kZSA9IDA7ICAgICAgICAgICAgIC8qIG51bWJlciBvZiBjb2RlIGxlbmd0aCBjb2RlIGxlbmd0aHMgKi9cbiAgdGhpcy5ubGVuID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBsZW5ndGggY29kZSBsZW5ndGhzICovXG4gIHRoaXMubmRpc3QgPSAwOyAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZGlzdGFuY2UgY29kZSBsZW5ndGhzICovXG4gIHRoaXMuaGF2ZSA9IDA7ICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgY29kZSBsZW5ndGhzIGluIGxlbnNbXSAqL1xuICB0aGlzLm5leHQgPSBudWxsOyAgICAgICAgICAgICAgLyogbmV4dCBhdmFpbGFibGUgc3BhY2UgaW4gY29kZXNbXSAqL1xuXG4gIHRoaXMubGVucyA9IG5ldyB1dGlscy5CdWYxNigzMjApOyAvKiB0ZW1wb3Jhcnkgc3RvcmFnZSBmb3IgY29kZSBsZW5ndGhzICovXG4gIHRoaXMud29yayA9IG5ldyB1dGlscy5CdWYxNigyODgpOyAvKiB3b3JrIGFyZWEgZm9yIGNvZGUgdGFibGUgYnVpbGRpbmcgKi9cblxuICAvKlxuICAgYmVjYXVzZSB3ZSBkb24ndCBoYXZlIHBvaW50ZXJzIGluIGpzLCB3ZSB1c2UgbGVuY29kZSBhbmQgZGlzdGNvZGUgZGlyZWN0bHlcbiAgIGFzIGJ1ZmZlcnMgc28gd2UgZG9uJ3QgbmVlZCBjb2Rlc1xuICAqL1xuICAvL3RoaXMuY29kZXMgPSBuZXcgdXRpbHMuQnVmMzIoRU5PVUdIKTsgICAgICAgLyogc3BhY2UgZm9yIGNvZGUgdGFibGVzICovXG4gIHRoaXMubGVuZHluID0gbnVsbDsgICAgICAgICAgICAgIC8qIGR5bmFtaWMgdGFibGUgZm9yIGxlbmd0aC9saXRlcmFsIGNvZGVzIChKUyBzcGVjaWZpYykgKi9cbiAgdGhpcy5kaXN0ZHluID0gbnVsbDsgICAgICAgICAgICAgLyogZHluYW1pYyB0YWJsZSBmb3IgZGlzdGFuY2UgY29kZXMgKEpTIHNwZWNpZmljKSAqL1xuICB0aGlzLnNhbmUgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBpZiBmYWxzZSwgYWxsb3cgaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyICovXG4gIHRoaXMuYmFjayA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIGJpdHMgYmFjayBvZiBsYXN0IHVucHJvY2Vzc2VkIGxlbmd0aC9saXQgKi9cbiAgdGhpcy53YXMgPSAwOyAgICAgICAgICAgICAgICAgICAgLyogaW5pdGlhbCBsZW5ndGggb2YgbWF0Y2ggKi9cbn1cblxuZnVuY3Rpb24gaW5mbGF0ZVJlc2V0S2VlcChzdHJtKSB7XG4gIHZhciBzdGF0ZTtcblxuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9XG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgc3RybS50b3RhbF9pbiA9IHN0cm0udG90YWxfb3V0ID0gc3RhdGUudG90YWwgPSAwO1xuICBzdHJtLm1zZyA9ICcnOyAvKlpfTlVMTCovXG4gIGlmIChzdGF0ZS53cmFwKSB7ICAgICAgIC8qIHRvIHN1cHBvcnQgaWxsLWNvbmNlaXZlZCBKYXZhIHRlc3Qgc3VpdGUgKi9cbiAgICBzdHJtLmFkbGVyID0gc3RhdGUud3JhcCAmIDE7XG4gIH1cbiAgc3RhdGUubW9kZSA9IEhFQUQ7XG4gIHN0YXRlLmxhc3QgPSAwO1xuICBzdGF0ZS5oYXZlZGljdCA9IDA7XG4gIHN0YXRlLmRtYXggPSAzMjc2ODtcbiAgc3RhdGUuaGVhZCA9IG51bGwvKlpfTlVMTCovO1xuICBzdGF0ZS5ob2xkID0gMDtcbiAgc3RhdGUuYml0cyA9IDA7XG4gIC8vc3RhdGUubGVuY29kZSA9IHN0YXRlLmRpc3Rjb2RlID0gc3RhdGUubmV4dCA9IHN0YXRlLmNvZGVzO1xuICBzdGF0ZS5sZW5jb2RlID0gc3RhdGUubGVuZHluID0gbmV3IHV0aWxzLkJ1ZjMyKEVOT1VHSF9MRU5TKTtcbiAgc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5kaXN0ZHluID0gbmV3IHV0aWxzLkJ1ZjMyKEVOT1VHSF9ESVNUUyk7XG5cbiAgc3RhdGUuc2FuZSA9IDE7XG4gIHN0YXRlLmJhY2sgPSAtMTtcbiAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiByZXNldFxcblwiKSk7XG4gIHJldHVybiBaX09LO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlUmVzZXQoc3RybSkge1xuICB2YXIgc3RhdGU7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIHN0YXRlLndzaXplID0gMDtcbiAgc3RhdGUud2hhdmUgPSAwO1xuICBzdGF0ZS53bmV4dCA9IDA7XG4gIHJldHVybiBpbmZsYXRlUmVzZXRLZWVwKHN0cm0pO1xuXG59XG5cbmZ1bmN0aW9uIGluZmxhdGVSZXNldDIoc3RybSwgd2luZG93Qml0cykge1xuICB2YXIgd3JhcDtcbiAgdmFyIHN0YXRlO1xuXG4gIC8qIGdldCB0aGUgc3RhdGUgKi9cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG5cbiAgLyogZXh0cmFjdCB3cmFwIHJlcXVlc3QgZnJvbSB3aW5kb3dCaXRzIHBhcmFtZXRlciAqL1xuICBpZiAod2luZG93Qml0cyA8IDApIHtcbiAgICB3cmFwID0gMDtcbiAgICB3aW5kb3dCaXRzID0gLXdpbmRvd0JpdHM7XG4gIH1cbiAgZWxzZSB7XG4gICAgd3JhcCA9ICh3aW5kb3dCaXRzID4+IDQpICsgMTtcbiAgICBpZiAod2luZG93Qml0cyA8IDQ4KSB7XG4gICAgICB3aW5kb3dCaXRzICY9IDE1O1xuICAgIH1cbiAgfVxuXG4gIC8qIHNldCBudW1iZXIgb2Ygd2luZG93IGJpdHMsIGZyZWUgd2luZG93IGlmIGRpZmZlcmVudCAqL1xuICBpZiAod2luZG93Qml0cyAmJiAod2luZG93Qml0cyA8IDggfHwgd2luZG93Qml0cyA+IDE1KSkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuICBpZiAoc3RhdGUud2luZG93ICE9PSBudWxsICYmIHN0YXRlLndiaXRzICE9PSB3aW5kb3dCaXRzKSB7XG4gICAgc3RhdGUud2luZG93ID0gbnVsbDtcbiAgfVxuXG4gIC8qIHVwZGF0ZSBzdGF0ZSBhbmQgcmVzZXQgdGhlIHJlc3Qgb2YgaXQgKi9cbiAgc3RhdGUud3JhcCA9IHdyYXA7XG4gIHN0YXRlLndiaXRzID0gd2luZG93Qml0cztcbiAgcmV0dXJuIGluZmxhdGVSZXNldChzdHJtKTtcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZUluaXQyKHN0cm0sIHdpbmRvd0JpdHMpIHtcbiAgdmFyIHJldDtcbiAgdmFyIHN0YXRlO1xuXG4gIGlmICghc3RybSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgLy9zdHJtLm1zZyA9IFpfTlVMTDsgICAgICAgICAgICAgICAgIC8qIGluIGNhc2Ugd2UgcmV0dXJuIGFuIGVycm9yICovXG5cbiAgc3RhdGUgPSBuZXcgSW5mbGF0ZVN0YXRlKCk7XG5cbiAgLy9pZiAoc3RhdGUgPT09IFpfTlVMTCkgcmV0dXJuIFpfTUVNX0VSUk9SO1xuICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6IGFsbG9jYXRlZFxcblwiKSk7XG4gIHN0cm0uc3RhdGUgPSBzdGF0ZTtcbiAgc3RhdGUud2luZG93ID0gbnVsbC8qWl9OVUxMKi87XG4gIHJldCA9IGluZmxhdGVSZXNldDIoc3RybSwgd2luZG93Qml0cyk7XG4gIGlmIChyZXQgIT09IFpfT0spIHtcbiAgICBzdHJtLnN0YXRlID0gbnVsbC8qWl9OVUxMKi87XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZUluaXQoc3RybSkge1xuICByZXR1cm4gaW5mbGF0ZUluaXQyKHN0cm0sIERFRl9XQklUUyk7XG59XG5cblxuLypcbiBSZXR1cm4gc3RhdGUgd2l0aCBsZW5ndGggYW5kIGRpc3RhbmNlIGRlY29kaW5nIHRhYmxlcyBhbmQgaW5kZXggc2l6ZXMgc2V0IHRvXG4gZml4ZWQgY29kZSBkZWNvZGluZy4gIE5vcm1hbGx5IHRoaXMgcmV0dXJucyBmaXhlZCB0YWJsZXMgZnJvbSBpbmZmaXhlZC5oLlxuIElmIEJVSUxERklYRUQgaXMgZGVmaW5lZCwgdGhlbiBpbnN0ZWFkIHRoaXMgcm91dGluZSBidWlsZHMgdGhlIHRhYmxlcyB0aGVcbiBmaXJzdCB0aW1lIGl0J3MgY2FsbGVkLCBhbmQgcmV0dXJucyB0aG9zZSB0YWJsZXMgdGhlIGZpcnN0IHRpbWUgYW5kXG4gdGhlcmVhZnRlci4gIFRoaXMgcmVkdWNlcyB0aGUgc2l6ZSBvZiB0aGUgY29kZSBieSBhYm91dCAySyBieXRlcywgaW5cbiBleGNoYW5nZSBmb3IgYSBsaXR0bGUgZXhlY3V0aW9uIHRpbWUuICBIb3dldmVyLCBCVUlMREZJWEVEIHNob3VsZCBub3QgYmVcbiB1c2VkIGZvciB0aHJlYWRlZCBhcHBsaWNhdGlvbnMsIHNpbmNlIHRoZSByZXdyaXRpbmcgb2YgdGhlIHRhYmxlcyBhbmQgdmlyZ2luXG4gbWF5IG5vdCBiZSB0aHJlYWQtc2FmZS5cbiAqL1xudmFyIHZpcmdpbiA9IHRydWU7XG5cbnZhciBsZW5maXgsIGRpc3RmaXg7IC8vIFdlIGhhdmUgbm8gcG9pbnRlcnMgaW4gSlMsIHNvIGtlZXAgdGFibGVzIHNlcGFyYXRlXG5cbmZ1bmN0aW9uIGZpeGVkdGFibGVzKHN0YXRlKSB7XG4gIC8qIGJ1aWxkIGZpeGVkIGh1ZmZtYW4gdGFibGVzIGlmIGZpcnN0IGNhbGwgKG1heSBub3QgYmUgdGhyZWFkIHNhZmUpICovXG4gIGlmICh2aXJnaW4pIHtcbiAgICB2YXIgc3ltO1xuXG4gICAgbGVuZml4ID0gbmV3IHV0aWxzLkJ1ZjMyKDUxMik7XG4gICAgZGlzdGZpeCA9IG5ldyB1dGlscy5CdWYzMigzMik7XG5cbiAgICAvKiBsaXRlcmFsL2xlbmd0aCB0YWJsZSAqL1xuICAgIHN5bSA9IDA7XG4gICAgd2hpbGUgKHN5bSA8IDE0NCkgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDg7IH1cbiAgICB3aGlsZSAoc3ltIDwgMjU2KSB7IHN0YXRlLmxlbnNbc3ltKytdID0gOTsgfVxuICAgIHdoaWxlIChzeW0gPCAyODApIHsgc3RhdGUubGVuc1tzeW0rK10gPSA3OyB9XG4gICAgd2hpbGUgKHN5bSA8IDI4OCkgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDg7IH1cblxuICAgIGluZmxhdGVfdGFibGUoTEVOUywgIHN0YXRlLmxlbnMsIDAsIDI4OCwgbGVuZml4LCAgIDAsIHN0YXRlLndvcmssIHsgYml0czogOSB9KTtcblxuICAgIC8qIGRpc3RhbmNlIHRhYmxlICovXG4gICAgc3ltID0gMDtcbiAgICB3aGlsZSAoc3ltIDwgMzIpIHsgc3RhdGUubGVuc1tzeW0rK10gPSA1OyB9XG5cbiAgICBpbmZsYXRlX3RhYmxlKERJU1RTLCBzdGF0ZS5sZW5zLCAwLCAzMiwgICBkaXN0Zml4LCAwLCBzdGF0ZS53b3JrLCB7IGJpdHM6IDUgfSk7XG5cbiAgICAvKiBkbyB0aGlzIGp1c3Qgb25jZSAqL1xuICAgIHZpcmdpbiA9IGZhbHNlO1xuICB9XG5cbiAgc3RhdGUubGVuY29kZSA9IGxlbmZpeDtcbiAgc3RhdGUubGVuYml0cyA9IDk7XG4gIHN0YXRlLmRpc3Rjb2RlID0gZGlzdGZpeDtcbiAgc3RhdGUuZGlzdGJpdHMgPSA1O1xufVxuXG5cbi8qXG4gVXBkYXRlIHRoZSB3aW5kb3cgd2l0aCB0aGUgbGFzdCB3c2l6ZSAobm9ybWFsbHkgMzJLKSBieXRlcyB3cml0dGVuIGJlZm9yZVxuIHJldHVybmluZy4gIElmIHdpbmRvdyBkb2VzIG5vdCBleGlzdCB5ZXQsIGNyZWF0ZSBpdC4gIFRoaXMgaXMgb25seSBjYWxsZWRcbiB3aGVuIGEgd2luZG93IGlzIGFscmVhZHkgaW4gdXNlLCBvciB3aGVuIG91dHB1dCBoYXMgYmVlbiB3cml0dGVuIGR1cmluZyB0aGlzXG4gaW5mbGF0ZSBjYWxsLCBidXQgdGhlIGVuZCBvZiB0aGUgZGVmbGF0ZSBzdHJlYW0gaGFzIG5vdCBiZWVuIHJlYWNoZWQgeWV0LlxuIEl0IGlzIGFsc28gY2FsbGVkIHRvIGNyZWF0ZSBhIHdpbmRvdyBmb3IgZGljdGlvbmFyeSBkYXRhIHdoZW4gYSBkaWN0aW9uYXJ5XG4gaXMgbG9hZGVkLlxuXG4gUHJvdmlkaW5nIG91dHB1dCBidWZmZXJzIGxhcmdlciB0aGFuIDMySyB0byBpbmZsYXRlKCkgc2hvdWxkIHByb3ZpZGUgYSBzcGVlZFxuIGFkdmFudGFnZSwgc2luY2Ugb25seSB0aGUgbGFzdCAzMksgb2Ygb3V0cHV0IGlzIGNvcGllZCB0byB0aGUgc2xpZGluZyB3aW5kb3dcbiB1cG9uIHJldHVybiBmcm9tIGluZmxhdGUoKSwgYW5kIHNpbmNlIGFsbCBkaXN0YW5jZXMgYWZ0ZXIgdGhlIGZpcnN0IDMySyBvZlxuIG91dHB1dCB3aWxsIGZhbGwgaW4gdGhlIG91dHB1dCBkYXRhLCBtYWtpbmcgbWF0Y2ggY29waWVzIHNpbXBsZXIgYW5kIGZhc3Rlci5cbiBUaGUgYWR2YW50YWdlIG1heSBiZSBkZXBlbmRlbnQgb24gdGhlIHNpemUgb2YgdGhlIHByb2Nlc3NvcidzIGRhdGEgY2FjaGVzLlxuICovXG5mdW5jdGlvbiB1cGRhdGV3aW5kb3coc3RybSwgc3JjLCBlbmQsIGNvcHkpIHtcbiAgdmFyIGRpc3Q7XG4gIHZhciBzdGF0ZSA9IHN0cm0uc3RhdGU7XG5cbiAgLyogaWYgaXQgaGFzbid0IGJlZW4gZG9uZSBhbHJlYWR5LCBhbGxvY2F0ZSBzcGFjZSBmb3IgdGhlIHdpbmRvdyAqL1xuICBpZiAoc3RhdGUud2luZG93ID09PSBudWxsKSB7XG4gICAgc3RhdGUud3NpemUgPSAxIDw8IHN0YXRlLndiaXRzO1xuICAgIHN0YXRlLnduZXh0ID0gMDtcbiAgICBzdGF0ZS53aGF2ZSA9IDA7XG5cbiAgICBzdGF0ZS53aW5kb3cgPSBuZXcgdXRpbHMuQnVmOChzdGF0ZS53c2l6ZSk7XG4gIH1cblxuICAvKiBjb3B5IHN0YXRlLT53c2l6ZSBvciBsZXNzIG91dHB1dCBieXRlcyBpbnRvIHRoZSBjaXJjdWxhciB3aW5kb3cgKi9cbiAgaWYgKGNvcHkgPj0gc3RhdGUud3NpemUpIHtcbiAgICB1dGlscy5hcnJheVNldChzdGF0ZS53aW5kb3csIHNyYywgZW5kIC0gc3RhdGUud3NpemUsIHN0YXRlLndzaXplLCAwKTtcbiAgICBzdGF0ZS53bmV4dCA9IDA7XG4gICAgc3RhdGUud2hhdmUgPSBzdGF0ZS53c2l6ZTtcbiAgfVxuICBlbHNlIHtcbiAgICBkaXN0ID0gc3RhdGUud3NpemUgLSBzdGF0ZS53bmV4dDtcbiAgICBpZiAoZGlzdCA+IGNvcHkpIHtcbiAgICAgIGRpc3QgPSBjb3B5O1xuICAgIH1cbiAgICAvL3ptZW1jcHkoc3RhdGUtPndpbmRvdyArIHN0YXRlLT53bmV4dCwgZW5kIC0gY29weSwgZGlzdCk7XG4gICAgdXRpbHMuYXJyYXlTZXQoc3RhdGUud2luZG93LCBzcmMsIGVuZCAtIGNvcHksIGRpc3QsIHN0YXRlLnduZXh0KTtcbiAgICBjb3B5IC09IGRpc3Q7XG4gICAgaWYgKGNvcHkpIHtcbiAgICAgIC8vem1lbWNweShzdGF0ZS0+d2luZG93LCBlbmQgLSBjb3B5LCBjb3B5KTtcbiAgICAgIHV0aWxzLmFycmF5U2V0KHN0YXRlLndpbmRvdywgc3JjLCBlbmQgLSBjb3B5LCBjb3B5LCAwKTtcbiAgICAgIHN0YXRlLnduZXh0ID0gY29weTtcbiAgICAgIHN0YXRlLndoYXZlID0gc3RhdGUud3NpemU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc3RhdGUud25leHQgKz0gZGlzdDtcbiAgICAgIGlmIChzdGF0ZS53bmV4dCA9PT0gc3RhdGUud3NpemUpIHsgc3RhdGUud25leHQgPSAwOyB9XG4gICAgICBpZiAoc3RhdGUud2hhdmUgPCBzdGF0ZS53c2l6ZSkgeyBzdGF0ZS53aGF2ZSArPSBkaXN0OyB9XG4gICAgfVxuICB9XG4gIHJldHVybiAwO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlKHN0cm0sIGZsdXNoKSB7XG4gIHZhciBzdGF0ZTtcbiAgdmFyIGlucHV0LCBvdXRwdXQ7ICAgICAgICAgIC8vIGlucHV0L291dHB1dCBidWZmZXJzXG4gIHZhciBuZXh0OyAgICAgICAgICAgICAgICAgICAvKiBuZXh0IGlucHV0IElOREVYICovXG4gIHZhciBwdXQ7ICAgICAgICAgICAgICAgICAgICAvKiBuZXh0IG91dHB1dCBJTkRFWCAqL1xuICB2YXIgaGF2ZSwgbGVmdDsgICAgICAgICAgICAgLyogYXZhaWxhYmxlIGlucHV0IGFuZCBvdXRwdXQgKi9cbiAgdmFyIGhvbGQ7ICAgICAgICAgICAgICAgICAgIC8qIGJpdCBidWZmZXIgKi9cbiAgdmFyIGJpdHM7ICAgICAgICAgICAgICAgICAgIC8qIGJpdHMgaW4gYml0IGJ1ZmZlciAqL1xuICB2YXIgX2luLCBfb3V0OyAgICAgICAgICAgICAgLyogc2F2ZSBzdGFydGluZyBhdmFpbGFibGUgaW5wdXQgYW5kIG91dHB1dCAqL1xuICB2YXIgY29weTsgICAgICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIHN0b3JlZCBvciBtYXRjaCBieXRlcyB0byBjb3B5ICovXG4gIHZhciBmcm9tOyAgICAgICAgICAgICAgICAgICAvKiB3aGVyZSB0byBjb3B5IG1hdGNoIGJ5dGVzIGZyb20gKi9cbiAgdmFyIGZyb21fc291cmNlO1xuICB2YXIgaGVyZSA9IDA7ICAgICAgICAgICAgICAgLyogY3VycmVudCBkZWNvZGluZyB0YWJsZSBlbnRyeSAqL1xuICB2YXIgaGVyZV9iaXRzLCBoZXJlX29wLCBoZXJlX3ZhbDsgLy8gcGFrZWQgXCJoZXJlXCIgZGVub3JtYWxpemVkIChKUyBzcGVjaWZpYylcbiAgLy92YXIgbGFzdDsgICAgICAgICAgICAgICAgICAgLyogcGFyZW50IHRhYmxlIGVudHJ5ICovXG4gIHZhciBsYXN0X2JpdHMsIGxhc3Rfb3AsIGxhc3RfdmFsOyAvLyBwYWtlZCBcImxhc3RcIiBkZW5vcm1hbGl6ZWQgKEpTIHNwZWNpZmljKVxuICB2YXIgbGVuOyAgICAgICAgICAgICAgICAgICAgLyogbGVuZ3RoIHRvIGNvcHkgZm9yIHJlcGVhdHMsIGJpdHMgdG8gZHJvcCAqL1xuICB2YXIgcmV0OyAgICAgICAgICAgICAgICAgICAgLyogcmV0dXJuIGNvZGUgKi9cbiAgdmFyIGhidWYgPSBuZXcgdXRpbHMuQnVmOCg0KTsgICAgLyogYnVmZmVyIGZvciBnemlwIGhlYWRlciBjcmMgY2FsY3VsYXRpb24gKi9cbiAgdmFyIG9wdHM7XG5cbiAgdmFyIG47IC8vIHRlbXBvcmFyeSB2YXIgZm9yIE5FRURfQklUU1xuXG4gIHZhciBvcmRlciA9IC8qIHBlcm11dGF0aW9uIG9mIGNvZGUgbGVuZ3RocyAqL1xuICAgIFsgMTYsIDE3LCAxOCwgMCwgOCwgNywgOSwgNiwgMTAsIDUsIDExLCA0LCAxMiwgMywgMTMsIDIsIDE0LCAxLCAxNSBdO1xuXG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlIHx8ICFzdHJtLm91dHB1dCB8fFxuICAgICAgKCFzdHJtLmlucHV0ICYmIHN0cm0uYXZhaWxfaW4gIT09IDApKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG5cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBpZiAoc3RhdGUubW9kZSA9PT0gVFlQRSkgeyBzdGF0ZS5tb2RlID0gVFlQRURPOyB9ICAgIC8qIHNraXAgY2hlY2sgKi9cblxuXG4gIC8vLS0tIExPQUQoKSAtLS1cbiAgcHV0ID0gc3RybS5uZXh0X291dDtcbiAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7XG4gIGxlZnQgPSBzdHJtLmF2YWlsX291dDtcbiAgbmV4dCA9IHN0cm0ubmV4dF9pbjtcbiAgaW5wdXQgPSBzdHJtLmlucHV0O1xuICBoYXZlID0gc3RybS5hdmFpbF9pbjtcbiAgaG9sZCA9IHN0YXRlLmhvbGQ7XG4gIGJpdHMgPSBzdGF0ZS5iaXRzO1xuICAvLy0tLVxuXG4gIF9pbiA9IGhhdmU7XG4gIF9vdXQgPSBsZWZ0O1xuICByZXQgPSBaX09LO1xuXG4gIGluZl9sZWF2ZTogLy8gZ290byBlbXVsYXRpb25cbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoc3RhdGUubW9kZSkge1xuICAgIGNhc2UgSEVBRDpcbiAgICAgIGlmIChzdGF0ZS53cmFwID09PSAwKSB7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFRE87XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy89PT0gTkVFREJJVFMoMTYpO1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKChzdGF0ZS53cmFwICYgMikgJiYgaG9sZCA9PT0gMHg4YjFmKSB7ICAvKiBnemlwIGhlYWRlciAqL1xuICAgICAgICBzdGF0ZS5jaGVjayA9IDAvKmNyYzMyKDBMLCBaX05VTEwsIDApKi87XG4gICAgICAgIC8vPT09IENSQzIoc3RhdGUuY2hlY2ssIGhvbGQpO1xuICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTtcbiAgICAgICAgLy89PT0vL1xuXG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5tb2RlID0gRkxBR1M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUuZmxhZ3MgPSAwOyAgICAgICAgICAgLyogZXhwZWN0IHpsaWIgaGVhZGVyICovXG4gICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLmRvbmUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICghKHN0YXRlLndyYXAgJiAxKSB8fCAgIC8qIGNoZWNrIGlmIHpsaWIgaGVhZGVyIGFsbG93ZWQgKi9cbiAgICAgICAgKCgoaG9sZCAmIDB4ZmYpLypCSVRTKDgpKi8gPDwgOCkgKyAoaG9sZCA+PiA4KSkgJSAzMSkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbmNvcnJlY3QgaGVhZGVyIGNoZWNrJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICE9PSBaX0RFRkxBVEVEKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ3Vua25vd24gY29tcHJlc3Npb24gbWV0aG9kJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLy0tLSBEUk9QQklUUyg0KSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IDQ7XG4gICAgICBiaXRzIC09IDQ7XG4gICAgICAvLy0tLS8vXG4gICAgICBsZW4gPSAoaG9sZCAmIDB4MGYpLypCSVRTKDQpKi8gKyA4O1xuICAgICAgaWYgKHN0YXRlLndiaXRzID09PSAwKSB7XG4gICAgICAgIHN0YXRlLndiaXRzID0gbGVuO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAobGVuID4gc3RhdGUud2JpdHMpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCB3aW5kb3cgc2l6ZSc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUuZG1heCA9IDEgPDwgbGVuO1xuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgIHpsaWIgaGVhZGVyIG9rXFxuXCIpKTtcbiAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IDEvKmFkbGVyMzIoMEwsIFpfTlVMTCwgMCkqLztcbiAgICAgIHN0YXRlLm1vZGUgPSBob2xkICYgMHgyMDAgPyBESUNUSUQgOiBUWVBFO1xuICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgIGhvbGQgPSAwO1xuICAgICAgYml0cyA9IDA7XG4gICAgICAvLz09PS8vXG4gICAgICBicmVhaztcbiAgICBjYXNlIEZMQUdTOlxuICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUuZmxhZ3MgPSBob2xkO1xuICAgICAgaWYgKChzdGF0ZS5mbGFncyAmIDB4ZmYpICE9PSBaX0RFRkxBVEVEKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ3Vua25vd24gY29tcHJlc3Npb24gbWV0aG9kJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweGUwMDApIHtcbiAgICAgICAgc3RybS5tc2cgPSAndW5rbm93biBoZWFkZXIgZmxhZ3Mgc2V0JztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLnRleHQgPSAoKGhvbGQgPj4gOCkgJiAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmO1xuICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjtcbiAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgIH1cbiAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICBob2xkID0gMDtcbiAgICAgIGJpdHMgPSAwO1xuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubW9kZSA9IFRJTUU7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBUSU1FOlxuICAgICAgLy89PT0gTkVFREJJVFMoMzIpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC50aW1lID0gaG9sZDtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAvLz09PSBDUkM0KHN0YXRlLmNoZWNrLCBob2xkKVxuICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICBoYnVmWzJdID0gKGhvbGQgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgIGhidWZbM10gPSAoaG9sZCA+Pj4gMjQpICYgMHhmZjtcbiAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgNCwgMCk7XG4gICAgICAgIC8vPT09XG4gICAgICB9XG4gICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgaG9sZCA9IDA7XG4gICAgICBiaXRzID0gMDtcbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLm1vZGUgPSBPUztcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIE9TOlxuICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC54ZmxhZ3MgPSAoaG9sZCAmIDB4ZmYpO1xuICAgICAgICBzdGF0ZS5oZWFkLm9zID0gKGhvbGQgPj4gOCk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7XG4gICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjtcbiAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApO1xuICAgICAgICAvLz09PS8vXG4gICAgICB9XG4gICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgaG9sZCA9IDA7XG4gICAgICBiaXRzID0gMDtcbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLm1vZGUgPSBFWExFTjtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIEVYTEVOOlxuICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwNDAwKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDE2KTsgKi9cbiAgICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5sZW5ndGggPSBob2xkO1xuICAgICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmFfbGVuID0gaG9sZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhID0gbnVsbC8qWl9OVUxMKi87XG4gICAgICB9XG4gICAgICBzdGF0ZS5tb2RlID0gRVhUUkE7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBFWFRSQTpcbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDQwMCkge1xuICAgICAgICBjb3B5ID0gc3RhdGUubGVuZ3RoO1xuICAgICAgICBpZiAoY29weSA+IGhhdmUpIHsgY29weSA9IGhhdmU7IH1cbiAgICAgICAgaWYgKGNvcHkpIHtcbiAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICAgICAgbGVuID0gc3RhdGUuaGVhZC5leHRyYV9sZW4gLSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIXN0YXRlLmhlYWQuZXh0cmEpIHtcbiAgICAgICAgICAgICAgLy8gVXNlIHVudHlwZWQgYXJyYXkgZm9yIG1vcmUgY29udmVuaWVuZCBwcm9jZXNzaW5nIGxhdGVyXG4gICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEgPSBuZXcgQXJyYXkoc3RhdGUuaGVhZC5leHRyYV9sZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXRpbHMuYXJyYXlTZXQoXG4gICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEsXG4gICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICBuZXh0LFxuICAgICAgICAgICAgICAvLyBleHRyYSBmaWVsZCBpcyBsaW1pdGVkIHRvIDY1NTM2IGJ5dGVzXG4gICAgICAgICAgICAgIC8vIC0gbm8gbmVlZCBmb3IgYWRkaXRpb25hbCBzaXplIGNoZWNrXG4gICAgICAgICAgICAgIGNvcHksXG4gICAgICAgICAgICAgIC8qbGVuICsgY29weSA+IHN0YXRlLmhlYWQuZXh0cmFfbWF4IC0gbGVuID8gc3RhdGUuaGVhZC5leHRyYV9tYXggOiBjb3B5LCovXG4gICAgICAgICAgICAgIGxlblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vem1lbWNweShzdGF0ZS5oZWFkLmV4dHJhICsgbGVuLCBuZXh0LFxuICAgICAgICAgICAgLy8gICAgICAgIGxlbiArIGNvcHkgPiBzdGF0ZS5oZWFkLmV4dHJhX21heCA/XG4gICAgICAgICAgICAvLyAgICAgICAgc3RhdGUuaGVhZC5leHRyYV9tYXggLSBsZW4gOiBjb3B5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGhhdmUgLT0gY29weTtcbiAgICAgICAgICBuZXh0ICs9IGNvcHk7XG4gICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLmxlbmd0aCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIH1cbiAgICAgIHN0YXRlLmxlbmd0aCA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gTkFNRTtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIE5BTUU6XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDA4MDApIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGNvcHkgPSAwO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgLy8gVE9ETzogMiBvciAxIGJ5dGVzP1xuICAgICAgICAgIGxlbiA9IGlucHV0W25leHQgKyBjb3B5KytdO1xuICAgICAgICAgIC8qIHVzZSBjb25zdGFudCBsaW1pdCBiZWNhdXNlIGluIGpzIHdlIHNob3VsZCBub3QgcHJlYWxsb2NhdGUgbWVtb3J5ICovXG4gICAgICAgICAgaWYgKHN0YXRlLmhlYWQgJiYgbGVuICYmXG4gICAgICAgICAgICAgIChzdGF0ZS5sZW5ndGggPCA2NTUzNiAvKnN0YXRlLmhlYWQubmFtZV9tYXgqLykpIHtcbiAgICAgICAgICAgIHN0YXRlLmhlYWQubmFtZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGxlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChsZW4gJiYgY29weSA8IGhhdmUpO1xuXG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgaWYgKGxlbikgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5uYW1lID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHN0YXRlLmxlbmd0aCA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gQ09NTUVOVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIENPTU1FTlQ6XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDEwMDApIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGNvcHkgPSAwO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgbGVuID0gaW5wdXRbbmV4dCArIGNvcHkrK107XG4gICAgICAgICAgLyogdXNlIGNvbnN0YW50IGxpbWl0IGJlY2F1c2UgaW4ganMgd2Ugc2hvdWxkIG5vdCBwcmVhbGxvY2F0ZSBtZW1vcnkgKi9cbiAgICAgICAgICBpZiAoc3RhdGUuaGVhZCAmJiBsZW4gJiZcbiAgICAgICAgICAgICAgKHN0YXRlLmxlbmd0aCA8IDY1NTM2IC8qc3RhdGUuaGVhZC5jb21tX21heCovKSkge1xuICAgICAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUobGVuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKGxlbiAmJiBjb3B5IDwgaGF2ZSk7XG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgaWYgKGxlbikgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHN0YXRlLm1vZGUgPSBIQ1JDO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgSENSQzpcbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovXG4gICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgaWYgKGhvbGQgIT09IChzdGF0ZS5jaGVjayAmIDB4ZmZmZikpIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdoZWFkZXIgY3JjIG1pc21hdGNoJztcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5oY3JjID0gKChzdGF0ZS5mbGFncyA+PiA5KSAmIDEpO1xuICAgICAgICBzdGF0ZS5oZWFkLmRvbmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMDtcbiAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBESUNUSUQ6XG4gICAgICAvLz09PSBORUVEQklUUygzMik7ICovXG4gICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICB9XG4gICAgICAvLz09PS8vXG4gICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSB6c3dhcDMyKGhvbGQpO1xuICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgIGhvbGQgPSAwO1xuICAgICAgYml0cyA9IDA7XG4gICAgICAvLz09PS8vXG4gICAgICBzdGF0ZS5tb2RlID0gRElDVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIERJQ1Q6XG4gICAgICBpZiAoc3RhdGUuaGF2ZWRpY3QgPT09IDApIHtcbiAgICAgICAgLy8tLS0gUkVTVE9SRSgpIC0tLVxuICAgICAgICBzdHJtLm5leHRfb3V0ID0gcHV0O1xuICAgICAgICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7XG4gICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7XG4gICAgICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlO1xuICAgICAgICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7XG4gICAgICAgIC8vLS0tXG4gICAgICAgIHJldHVybiBaX05FRURfRElDVDtcbiAgICAgIH1cbiAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IDEvKmFkbGVyMzIoMEwsIFpfTlVMTCwgMCkqLztcbiAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgVFlQRTpcbiAgICAgIGlmIChmbHVzaCA9PT0gWl9CTE9DSyB8fCBmbHVzaCA9PT0gWl9UUkVFUykgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIFRZUEVETzpcbiAgICAgIGlmIChzdGF0ZS5sYXN0KSB7XG4gICAgICAgIC8vLS0tIEJZVEVCSVRTKCkgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IGJpdHMgJiA3O1xuICAgICAgICBiaXRzIC09IGJpdHMgJiA3O1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIHN0YXRlLm1vZGUgPSBDSEVDSztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLz09PSBORUVEQklUUygzKTsgKi9cbiAgICAgIHdoaWxlIChiaXRzIDwgMykge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubGFzdCA9IChob2xkICYgMHgwMSkvKkJJVFMoMSkqLztcbiAgICAgIC8vLS0tIERST1BCSVRTKDEpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gMTtcbiAgICAgIGJpdHMgLT0gMTtcbiAgICAgIC8vLS0tLy9cblxuICAgICAgc3dpdGNoICgoaG9sZCAmIDB4MDMpLypCSVRTKDIpKi8pIHtcbiAgICAgIGNhc2UgMDogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHN0b3JlZCBibG9jayAqL1xuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICBzdG9yZWQgYmxvY2slc1xcblwiLFxuICAgICAgICAvLyAgICAgICAgc3RhdGUubGFzdCA/IFwiIChsYXN0KVwiIDogXCJcIikpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gU1RPUkVEO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGZpeGVkIGJsb2NrICovXG4gICAgICAgIGZpeGVkdGFibGVzKHN0YXRlKTtcbiAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgZml4ZWQgY29kZXMgYmxvY2slc1xcblwiLFxuICAgICAgICAvLyAgICAgICAgc3RhdGUubGFzdCA/IFwiIChsYXN0KVwiIDogXCJcIikpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gTEVOXzsgICAgICAgICAgICAgLyogZGVjb2RlIGNvZGVzICovXG4gICAgICAgIGlmIChmbHVzaCA9PT0gWl9UUkVFUykge1xuICAgICAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vXG4gICAgICAgICAgaG9sZCA+Pj49IDI7XG4gICAgICAgICAgYml0cyAtPSAyO1xuICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBkeW5hbWljIGJsb2NrICovXG4gICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgIGR5bmFtaWMgY29kZXMgYmxvY2slc1xcblwiLFxuICAgICAgICAvLyAgICAgICAgc3RhdGUubGFzdCA/IFwiIChsYXN0KVwiIDogXCJcIikpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gVEFCTEU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGJsb2NrIHR5cGUnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgfVxuICAgICAgLy8tLS0gRFJPUEJJVFMoMikgLS0tLy9cbiAgICAgIGhvbGQgPj4+PSAyO1xuICAgICAgYml0cyAtPSAyO1xuICAgICAgLy8tLS0vL1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBTVE9SRUQ6XG4gICAgICAvLy0tLSBCWVRFQklUUygpIC0tLS8vIC8qIGdvIHRvIGJ5dGUgYm91bmRhcnkgKi9cbiAgICAgIGhvbGQgPj4+PSBiaXRzICYgNztcbiAgICAgIGJpdHMgLT0gYml0cyAmIDc7XG4gICAgICAvLy0tLS8vXG4gICAgICAvLz09PSBORUVEQklUUygzMik7ICovXG4gICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICB9XG4gICAgICAvLz09PS8vXG4gICAgICBpZiAoKGhvbGQgJiAweGZmZmYpICE9PSAoKGhvbGQgPj4+IDE2KSBeIDB4ZmZmZikpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBzdG9yZWQgYmxvY2sgbGVuZ3Rocyc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUubGVuZ3RoID0gaG9sZCAmIDB4ZmZmZjtcbiAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgc3RvcmVkIGxlbmd0aCAldVxcblwiLFxuICAgICAgLy8gICAgICAgIHN0YXRlLmxlbmd0aCkpO1xuICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgIGhvbGQgPSAwO1xuICAgICAgYml0cyA9IDA7XG4gICAgICAvLz09PS8vXG4gICAgICBzdGF0ZS5tb2RlID0gQ09QWV87XG4gICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBDT1BZXzpcbiAgICAgIHN0YXRlLm1vZGUgPSBDT1BZO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgQ09QWTpcbiAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICBpZiAoY29weSkge1xuICAgICAgICBpZiAoY29weSA+IGhhdmUpIHsgY29weSA9IGhhdmU7IH1cbiAgICAgICAgaWYgKGNvcHkgPiBsZWZ0KSB7IGNvcHkgPSBsZWZ0OyB9XG4gICAgICAgIGlmIChjb3B5ID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAvLy0tLSB6bWVtY3B5KHB1dCwgbmV4dCwgY29weSk7IC0tLVxuICAgICAgICB1dGlscy5hcnJheVNldChvdXRwdXQsIGlucHV0LCBuZXh0LCBjb3B5LCBwdXQpO1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIGhhdmUgLT0gY29weTtcbiAgICAgICAgbmV4dCArPSBjb3B5O1xuICAgICAgICBsZWZ0IC09IGNvcHk7XG4gICAgICAgIHB1dCArPSBjb3B5O1xuICAgICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIHN0b3JlZCBlbmRcXG5cIikpO1xuICAgICAgc3RhdGUubW9kZSA9IFRZUEU7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFRBQkxFOlxuICAgICAgLy89PT0gTkVFREJJVFMoMTQpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNCkge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubmxlbiA9IChob2xkICYgMHgxZikvKkJJVFMoNSkqLyArIDI1NztcbiAgICAgIC8vLS0tIERST1BCSVRTKDUpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gNTtcbiAgICAgIGJpdHMgLT0gNTtcbiAgICAgIC8vLS0tLy9cbiAgICAgIHN0YXRlLm5kaXN0ID0gKGhvbGQgJiAweDFmKS8qQklUUyg1KSovICsgMTtcbiAgICAgIC8vLS0tIERST1BCSVRTKDUpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gNTtcbiAgICAgIGJpdHMgLT0gNTtcbiAgICAgIC8vLS0tLy9cbiAgICAgIHN0YXRlLm5jb2RlID0gKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICsgNDtcbiAgICAgIC8vLS0tIERST1BCSVRTKDQpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gNDtcbiAgICAgIGJpdHMgLT0gNDtcbiAgICAgIC8vLS0tLy9cbi8vI2lmbmRlZiBQS1pJUF9CVUdfV09SS0FST1VORFxuICAgICAgaWYgKHN0YXRlLm5sZW4gPiAyODYgfHwgc3RhdGUubmRpc3QgPiAzMCkge1xuICAgICAgICBzdHJtLm1zZyA9ICd0b28gbWFueSBsZW5ndGggb3IgZGlzdGFuY2Ugc3ltYm9scyc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuLy8jZW5kaWZcbiAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgdGFibGUgc2l6ZXMgb2tcXG5cIikpO1xuICAgICAgc3RhdGUuaGF2ZSA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gTEVOTEVOUztcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIExFTkxFTlM6XG4gICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IHN0YXRlLm5jb2RlKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDMpO1xuICAgICAgICB3aGlsZSAoYml0cyA8IDMpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubGVuc1tvcmRlcltzdGF0ZS5oYXZlKytdXSA9IChob2xkICYgMHgwNyk7Ly9CSVRTKDMpO1xuICAgICAgICAvLy0tLSBEUk9QQklUUygzKSAtLS0vL1xuICAgICAgICBob2xkID4+Pj0gMztcbiAgICAgICAgYml0cyAtPSAzO1xuICAgICAgICAvLy0tLS8vXG4gICAgICB9XG4gICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IDE5KSB7XG4gICAgICAgIHN0YXRlLmxlbnNbb3JkZXJbc3RhdGUuaGF2ZSsrXV0gPSAwO1xuICAgICAgfVxuICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC5cbiAgICAgIC8vc3RhdGUubmV4dCA9IHN0YXRlLmNvZGVzO1xuICAgICAgLy9zdGF0ZS5sZW5jb2RlID0gc3RhdGUubmV4dDtcbiAgICAgIC8vIFN3aXRjaCB0byB1c2UgZHluYW1pYyB0YWJsZVxuICAgICAgc3RhdGUubGVuY29kZSA9IHN0YXRlLmxlbmR5bjtcbiAgICAgIHN0YXRlLmxlbmJpdHMgPSA3O1xuXG4gICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5sZW5iaXRzIH07XG4gICAgICByZXQgPSBpbmZsYXRlX3RhYmxlKENPREVTLCBzdGF0ZS5sZW5zLCAwLCAxOSwgc3RhdGUubGVuY29kZSwgMCwgc3RhdGUud29yaywgb3B0cyk7XG4gICAgICBzdGF0ZS5sZW5iaXRzID0gb3B0cy5iaXRzO1xuXG4gICAgICBpZiAocmV0KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgY29kZSBsZW5ndGhzIHNldCc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICBjb2RlIGxlbmd0aHMgb2tcXG5cIikpO1xuICAgICAgc3RhdGUuaGF2ZSA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gQ09ERUxFTlM7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBDT0RFTEVOUzpcbiAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgc3RhdGUubmxlbiArIHN0YXRlLm5kaXN0KSB7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICBoZXJlID0gc3RhdGUubGVuY29kZVtob2xkICYgKCgxIDw8IHN0YXRlLmxlbmJpdHMpIC0gMSldOy8qQklUUyhzdGF0ZS5sZW5iaXRzKSovXG4gICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7XG4gICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICAgIGlmICgoaGVyZV9iaXRzKSA8PSBiaXRzKSB7IGJyZWFrOyB9XG4gICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICB9XG4gICAgICAgIGlmIChoZXJlX3ZhbCA8IDE2KSB7XG4gICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSsrXSA9IGhlcmVfdmFsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGlmIChoZXJlX3ZhbCA9PT0gMTYpIHtcbiAgICAgICAgICAgIC8vPT09IE5FRURCSVRTKGhlcmUuYml0cyArIDIpO1xuICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDI7XG4gICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHtcbiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICAgIGlmIChzdGF0ZS5oYXZlID09PSAwKSB7XG4gICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgYml0IGxlbmd0aCByZXBlYXQnO1xuICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxlbiA9IHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSAtIDFdO1xuICAgICAgICAgICAgY29weSA9IDMgKyAoaG9sZCAmIDB4MDMpOy8vQklUUygyKTtcbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gMjtcbiAgICAgICAgICAgIGJpdHMgLT0gMjtcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoaGVyZV92YWwgPT09IDE3KSB7XG4gICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyAzKTtcbiAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyAzO1xuICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLz09PS8vXG4gICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICBsZW4gPSAwO1xuICAgICAgICAgICAgY29weSA9IDMgKyAoaG9sZCAmIDB4MDcpOy8vQklUUygzKTtcbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDMpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gMztcbiAgICAgICAgICAgIGJpdHMgLT0gMztcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyA3KTtcbiAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyA3O1xuICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLz09PS8vXG4gICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICBsZW4gPSAwO1xuICAgICAgICAgICAgY29weSA9IDExICsgKGhvbGQgJiAweDdmKTsvL0JJVFMoNyk7XG4gICAgICAgICAgICAvLy0tLSBEUk9QQklUUyg3KSAtLS0vL1xuICAgICAgICAgICAgaG9sZCA+Pj49IDc7XG4gICAgICAgICAgICBiaXRzIC09IDc7XG4gICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdGF0ZS5oYXZlICsgY29weSA+IHN0YXRlLm5sZW4gKyBzdGF0ZS5uZGlzdCkge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCc7XG4gICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHdoaWxlIChjb3B5LS0pIHtcbiAgICAgICAgICAgIHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSsrXSA9IGxlbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyogaGFuZGxlIGVycm9yIGJyZWFrcyBpbiB3aGlsZSAqL1xuICAgICAgaWYgKHN0YXRlLm1vZGUgPT09IEJBRCkgeyBicmVhazsgfVxuXG4gICAgICAvKiBjaGVjayBmb3IgZW5kLW9mLWJsb2NrIGNvZGUgKGJldHRlciBoYXZlIG9uZSkgKi9cbiAgICAgIGlmIChzdGF0ZS5sZW5zWzI1Nl0gPT09IDApIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBjb2RlIC0tIG1pc3NpbmcgZW5kLW9mLWJsb2NrJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8qIGJ1aWxkIGNvZGUgdGFibGVzIC0tIG5vdGU6IGRvIG5vdCBjaGFuZ2UgdGhlIGxlbmJpdHMgb3IgZGlzdGJpdHNcbiAgICAgICAgIHZhbHVlcyBoZXJlICg5IGFuZCA2KSB3aXRob3V0IHJlYWRpbmcgdGhlIGNvbW1lbnRzIGluIGluZnRyZWVzLmhcbiAgICAgICAgIGNvbmNlcm5pbmcgdGhlIEVOT1VHSCBjb25zdGFudHMsIHdoaWNoIGRlcGVuZCBvbiB0aG9zZSB2YWx1ZXMgKi9cbiAgICAgIHN0YXRlLmxlbmJpdHMgPSA5O1xuXG4gICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5sZW5iaXRzIH07XG4gICAgICByZXQgPSBpbmZsYXRlX3RhYmxlKExFTlMsIHN0YXRlLmxlbnMsIDAsIHN0YXRlLm5sZW4sIHN0YXRlLmxlbmNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpO1xuICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC5cbiAgICAgIC8vIHN0YXRlLm5leHRfaW5kZXggPSBvcHRzLnRhYmxlX2luZGV4O1xuICAgICAgc3RhdGUubGVuYml0cyA9IG9wdHMuYml0cztcbiAgICAgIC8vIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5uZXh0O1xuXG4gICAgICBpZiAocmV0KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgbGl0ZXJhbC9sZW5ndGhzIHNldCc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZS5kaXN0Yml0cyA9IDY7XG4gICAgICAvL3N0YXRlLmRpc3Rjb2RlLmNvcHkoc3RhdGUuY29kZXMpO1xuICAgICAgLy8gU3dpdGNoIHRvIHVzZSBkeW5hbWljIHRhYmxlXG4gICAgICBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLmRpc3RkeW47XG4gICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5kaXN0Yml0cyB9O1xuICAgICAgcmV0ID0gaW5mbGF0ZV90YWJsZShESVNUUywgc3RhdGUubGVucywgc3RhdGUubmxlbiwgc3RhdGUubmRpc3QsIHN0YXRlLmRpc3Rjb2RlLCAwLCBzdGF0ZS53b3JrLCBvcHRzKTtcbiAgICAgIC8vIFdlIGhhdmUgc2VwYXJhdGUgdGFibGVzICYgbm8gcG9pbnRlcnMuIDIgY29tbWVudGVkIGxpbmVzIGJlbG93IG5vdCBuZWVkZWQuXG4gICAgICAvLyBzdGF0ZS5uZXh0X2luZGV4ID0gb3B0cy50YWJsZV9pbmRleDtcbiAgICAgIHN0YXRlLmRpc3RiaXRzID0gb3B0cy5iaXRzO1xuICAgICAgLy8gc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5uZXh0O1xuXG4gICAgICBpZiAocmV0KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2VzIHNldCc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgJ2luZmxhdGU6ICAgICAgIGNvZGVzIG9rXFxuJykpO1xuICAgICAgc3RhdGUubW9kZSA9IExFTl87XG4gICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBMRU5fOlxuICAgICAgc3RhdGUubW9kZSA9IExFTjtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIExFTjpcbiAgICAgIGlmIChoYXZlID49IDYgJiYgbGVmdCA+PSAyNTgpIHtcbiAgICAgICAgLy8tLS0gUkVTVE9SRSgpIC0tLVxuICAgICAgICBzdHJtLm5leHRfb3V0ID0gcHV0O1xuICAgICAgICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7XG4gICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7XG4gICAgICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlO1xuICAgICAgICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7XG4gICAgICAgIC8vLS0tXG4gICAgICAgIGluZmxhdGVfZmFzdChzdHJtLCBfb3V0KTtcbiAgICAgICAgLy8tLS0gTE9BRCgpIC0tLVxuICAgICAgICBwdXQgPSBzdHJtLm5leHRfb3V0O1xuICAgICAgICBvdXRwdXQgPSBzdHJtLm91dHB1dDtcbiAgICAgICAgbGVmdCA9IHN0cm0uYXZhaWxfb3V0O1xuICAgICAgICBuZXh0ID0gc3RybS5uZXh0X2luO1xuICAgICAgICBpbnB1dCA9IHN0cm0uaW5wdXQ7XG4gICAgICAgIGhhdmUgPSBzdHJtLmF2YWlsX2luO1xuICAgICAgICBob2xkID0gc3RhdGUuaG9sZDtcbiAgICAgICAgYml0cyA9IHN0YXRlLmJpdHM7XG4gICAgICAgIC8vLS0tXG5cbiAgICAgICAgaWYgKHN0YXRlLm1vZGUgPT09IFRZUEUpIHtcbiAgICAgICAgICBzdGF0ZS5iYWNrID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzdGF0ZS5iYWNrID0gMDtcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbaG9sZCAmICgoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDEpXTsgIC8qQklUUyhzdGF0ZS5sZW5iaXRzKSovXG4gICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICBpZiAoaGVyZV9iaXRzIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAvLy0tLS8vXG4gICAgICB9XG4gICAgICBpZiAoaGVyZV9vcCAmJiAoaGVyZV9vcCAmIDB4ZjApID09PSAwKSB7XG4gICAgICAgIGxhc3RfYml0cyA9IGhlcmVfYml0cztcbiAgICAgICAgbGFzdF9vcCA9IGhlcmVfb3A7XG4gICAgICAgIGxhc3RfdmFsID0gaGVyZV92YWw7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICBoZXJlID0gc3RhdGUubGVuY29kZVtsYXN0X3ZhbCArXG4gICAgICAgICAgICAgICAgICAoKGhvbGQgJiAoKDEgPDwgKGxhc3RfYml0cyArIGxhc3Rfb3ApKSAtIDEpKS8qQklUUyhsYXN0LmJpdHMgKyBsYXN0Lm9wKSovID4+IGxhc3RfYml0cyldO1xuICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7XG5cbiAgICAgICAgICBpZiAoKGxhc3RfYml0cyArIGhlcmVfYml0cykgPD0gYml0cykgeyBicmVhazsgfVxuICAgICAgICAgIC8vLS0tIFBVTExCWVRFKCkgLS0tLy9cbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgfVxuICAgICAgICAvLy0tLSBEUk9QQklUUyhsYXN0LmJpdHMpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSBsYXN0X2JpdHM7XG4gICAgICAgIGJpdHMgLT0gbGFzdF9iaXRzO1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIHN0YXRlLmJhY2sgKz0gbGFzdF9iaXRzO1xuICAgICAgfVxuICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgLy8tLS0vL1xuICAgICAgc3RhdGUuYmFjayArPSBoZXJlX2JpdHM7XG4gICAgICBzdGF0ZS5sZW5ndGggPSBoZXJlX3ZhbDtcbiAgICAgIGlmIChoZXJlX29wID09PSAwKSB7XG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBoZXJlLnZhbCA+PSAweDIwICYmIGhlcmUudmFsIDwgMHg3ZiA/XG4gICAgICAgIC8vICAgICAgICBcImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAnJWMnXFxuXCIgOlxuICAgICAgICAvLyAgICAgICAgXCJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgMHglMDJ4XFxuXCIsIGhlcmUudmFsKSk7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBMSVQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGhlcmVfb3AgJiAzMikge1xuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGVuZCBvZiBibG9ja1xcblwiKSk7XG4gICAgICAgIHN0YXRlLmJhY2sgPSAtMTtcbiAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGhlcmVfb3AgJiA2NCkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHN0YXRlLmV4dHJhID0gaGVyZV9vcCAmIDE1O1xuICAgICAgc3RhdGUubW9kZSA9IExFTkVYVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIExFTkVYVDpcbiAgICAgIGlmIChzdGF0ZS5leHRyYSkge1xuICAgICAgICAvLz09PSBORUVEQklUUyhzdGF0ZS5leHRyYSk7XG4gICAgICAgIG4gPSBzdGF0ZS5leHRyYTtcbiAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLmxlbmd0aCArPSBob2xkICYgKCgxIDw8IHN0YXRlLmV4dHJhKSAtIDEpLypCSVRTKHN0YXRlLmV4dHJhKSovO1xuICAgICAgICAvLy0tLSBEUk9QQklUUyhzdGF0ZS5leHRyYSkgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IHN0YXRlLmV4dHJhO1xuICAgICAgICBiaXRzIC09IHN0YXRlLmV4dHJhO1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIHN0YXRlLmJhY2sgKz0gc3RhdGUuZXh0cmE7XG4gICAgICB9XG4gICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGxlbmd0aCAldVxcblwiLCBzdGF0ZS5sZW5ndGgpKTtcbiAgICAgIHN0YXRlLndhcyA9IHN0YXRlLmxlbmd0aDtcbiAgICAgIHN0YXRlLm1vZGUgPSBESVNUO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgRElTVDpcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgaGVyZSA9IHN0YXRlLmRpc3Rjb2RlW2hvbGQgJiAoKDEgPDwgc3RhdGUuZGlzdGJpdHMpIC0gMSldOy8qQklUUyhzdGF0ZS5kaXN0Yml0cykqL1xuICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7XG5cbiAgICAgICAgaWYgKChoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAvLy0tLS8vXG4gICAgICB9XG4gICAgICBpZiAoKGhlcmVfb3AgJiAweGYwKSA9PT0gMCkge1xuICAgICAgICBsYXN0X2JpdHMgPSBoZXJlX2JpdHM7XG4gICAgICAgIGxhc3Rfb3AgPSBoZXJlX29wO1xuICAgICAgICBsYXN0X3ZhbCA9IGhlcmVfdmFsO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgaGVyZSA9IHN0YXRlLmRpc3Rjb2RlW2xhc3RfdmFsICtcbiAgICAgICAgICAgICAgICAgICgoaG9sZCAmICgoMSA8PCAobGFzdF9iaXRzICsgbGFzdF9vcCkpIC0gMSkpLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07XG4gICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7XG4gICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICAgIGlmICgobGFzdF9iaXRzICsgaGVyZV9iaXRzKSA8PSBiaXRzKSB7IGJyZWFrOyB9XG4gICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICB9XG4gICAgICAgIC8vLS0tIERST1BCSVRTKGxhc3QuYml0cykgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IGxhc3RfYml0cztcbiAgICAgICAgYml0cyAtPSBsYXN0X2JpdHM7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUuYmFjayArPSBsYXN0X2JpdHM7XG4gICAgICB9XG4gICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAvLy0tLS8vXG4gICAgICBzdGF0ZS5iYWNrICs9IGhlcmVfYml0cztcbiAgICAgIGlmIChoZXJlX29wICYgNjQpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSBjb2RlJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzdGF0ZS5vZmZzZXQgPSBoZXJlX3ZhbDtcbiAgICAgIHN0YXRlLmV4dHJhID0gKGhlcmVfb3ApICYgMTU7XG4gICAgICBzdGF0ZS5tb2RlID0gRElTVEVYVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIERJU1RFWFQ6XG4gICAgICBpZiAoc3RhdGUuZXh0cmEpIHtcbiAgICAgICAgLy89PT0gTkVFREJJVFMoc3RhdGUuZXh0cmEpO1xuICAgICAgICBuID0gc3RhdGUuZXh0cmE7XG4gICAgICAgIHdoaWxlIChiaXRzIDwgbikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5vZmZzZXQgKz0gaG9sZCAmICgoMSA8PCBzdGF0ZS5leHRyYSkgLSAxKS8qQklUUyhzdGF0ZS5leHRyYSkqLztcbiAgICAgICAgLy8tLS0gRFJPUEJJVFMoc3RhdGUuZXh0cmEpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSBzdGF0ZS5leHRyYTtcbiAgICAgICAgYml0cyAtPSBzdGF0ZS5leHRyYTtcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBzdGF0ZS5iYWNrICs9IHN0YXRlLmV4dHJhO1xuICAgICAgfVxuLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1RcbiAgICAgIGlmIChzdGF0ZS5vZmZzZXQgPiBzdGF0ZS5kbWF4KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4vLyNlbmRpZlxuICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBkaXN0YW5jZSAldVxcblwiLCBzdGF0ZS5vZmZzZXQpKTtcbiAgICAgIHN0YXRlLm1vZGUgPSBNQVRDSDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIE1BVENIOlxuICAgICAgaWYgKGxlZnQgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICBjb3B5ID0gX291dCAtIGxlZnQ7XG4gICAgICBpZiAoc3RhdGUub2Zmc2V0ID4gY29weSkgeyAgICAgICAgIC8qIGNvcHkgZnJvbSB3aW5kb3cgKi9cbiAgICAgICAgY29weSA9IHN0YXRlLm9mZnNldCAtIGNvcHk7XG4gICAgICAgIGlmIChjb3B5ID4gc3RhdGUud2hhdmUpIHtcbiAgICAgICAgICBpZiAoc3RhdGUuc2FuZSkge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2snO1xuICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbi8vICghKSBUaGlzIGJsb2NrIGlzIGRpc2FibGVkIGluIHpsaWIgZGVmYWlsdHMsXG4vLyBkb24ndCBlbmFibGUgaXQgZm9yIGJpbmFyeSBjb21wYXRpYmlsaXR5XG4vLyNpZmRlZiBJTkZMQVRFX0FMTE9XX0lOVkFMSURfRElTVEFOQ0VfVE9PRkFSX0FSUlJcbi8vICAgICAgICAgIFRyYWNlKChzdGRlcnIsIFwiaW5mbGF0ZS5jIHRvbyBmYXJcXG5cIikpO1xuLy8gICAgICAgICAgY29weSAtPSBzdGF0ZS53aGF2ZTtcbi8vICAgICAgICAgIGlmIChjb3B5ID4gc3RhdGUubGVuZ3RoKSB7IGNvcHkgPSBzdGF0ZS5sZW5ndGg7IH1cbi8vICAgICAgICAgIGlmIChjb3B5ID4gbGVmdCkgeyBjb3B5ID0gbGVmdDsgfVxuLy8gICAgICAgICAgbGVmdCAtPSBjb3B5O1xuLy8gICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4vLyAgICAgICAgICBkbyB7XG4vLyAgICAgICAgICAgIG91dHB1dFtwdXQrK10gPSAwO1xuLy8gICAgICAgICAgfSB3aGlsZSAoLS1jb3B5KTtcbi8vICAgICAgICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHsgc3RhdGUubW9kZSA9IExFTjsgfVxuLy8gICAgICAgICAgYnJlYWs7XG4vLyNlbmRpZlxuICAgICAgICB9XG4gICAgICAgIGlmIChjb3B5ID4gc3RhdGUud25leHQpIHtcbiAgICAgICAgICBjb3B5IC09IHN0YXRlLnduZXh0O1xuICAgICAgICAgIGZyb20gPSBzdGF0ZS53c2l6ZSAtIGNvcHk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZnJvbSA9IHN0YXRlLnduZXh0IC0gY29weTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29weSA+IHN0YXRlLmxlbmd0aCkgeyBjb3B5ID0gc3RhdGUubGVuZ3RoOyB9XG4gICAgICAgIGZyb21fc291cmNlID0gc3RhdGUud2luZG93O1xuICAgICAgfVxuICAgICAgZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogY29weSBmcm9tIG91dHB1dCAqL1xuICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDtcbiAgICAgICAgZnJvbSA9IHB1dCAtIHN0YXRlLm9mZnNldDtcbiAgICAgICAgY29weSA9IHN0YXRlLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGlmIChjb3B5ID4gbGVmdCkgeyBjb3B5ID0gbGVmdDsgfVxuICAgICAgbGVmdCAtPSBjb3B5O1xuICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4gICAgICBkbyB7XG4gICAgICAgIG91dHB1dFtwdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgfSB3aGlsZSAoLS1jb3B5KTtcbiAgICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHsgc3RhdGUubW9kZSA9IExFTjsgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBMSVQ6XG4gICAgICBpZiAobGVmdCA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIG91dHB1dFtwdXQrK10gPSBzdGF0ZS5sZW5ndGg7XG4gICAgICBsZWZ0LS07XG4gICAgICBzdGF0ZS5tb2RlID0gTEVOO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBDSEVDSzpcbiAgICAgIGlmIChzdGF0ZS53cmFwKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDMyKTtcbiAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAvLyBVc2UgJ3wnIGluc2RlYWQgb2YgJysnIHRvIG1ha2Ugc3VyZSB0aGF0IHJlc3VsdCBpcyBzaWduZWRcbiAgICAgICAgICBob2xkIHw9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBfb3V0IC09IGxlZnQ7XG4gICAgICAgIHN0cm0udG90YWxfb3V0ICs9IF9vdXQ7XG4gICAgICAgIHN0YXRlLnRvdGFsICs9IF9vdXQ7XG4gICAgICAgIGlmIChfb3V0KSB7XG4gICAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID1cbiAgICAgICAgICAgICAgLypVUERBVEUoc3RhdGUuY2hlY2ssIHB1dCAtIF9vdXQsIF9vdXQpOyovXG4gICAgICAgICAgICAgIChzdGF0ZS5mbGFncyA/IGNyYzMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHB1dCAtIF9vdXQpIDogYWRsZXIzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBwdXQgLSBfb3V0KSk7XG5cbiAgICAgICAgfVxuICAgICAgICBfb3V0ID0gbGVmdDtcbiAgICAgICAgLy8gTkI6IGNyYzMyIHN0b3JlZCBhcyBzaWduZWQgMzItYml0IGludCwgenN3YXAzMiByZXR1cm5zIHNpZ25lZCB0b29cbiAgICAgICAgaWYgKChzdGF0ZS5mbGFncyA/IGhvbGQgOiB6c3dhcDMyKGhvbGQpKSAhPT0gc3RhdGUuY2hlY2spIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdpbmNvcnJlY3QgZGF0YSBjaGVjayc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICBob2xkID0gMDtcbiAgICAgICAgYml0cyA9IDA7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgIGNoZWNrIG1hdGNoZXMgdHJhaWxlclxcblwiKSk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5tb2RlID0gTEVOR1RIO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgTEVOR1RIOlxuICAgICAgaWYgKHN0YXRlLndyYXAgJiYgc3RhdGUuZmxhZ3MpIHtcbiAgICAgICAgLy89PT0gTkVFREJJVFMoMzIpO1xuICAgICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIGlmIChob2xkICE9PSAoc3RhdGUudG90YWwgJiAweGZmZmZmZmZmKSkge1xuICAgICAgICAgIHN0cm0ubXNnID0gJ2luY29ycmVjdCBsZW5ndGggY2hlY2snO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAvLz09PS8vXG4gICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICBsZW5ndGggbWF0Y2hlcyB0cmFpbGVyXFxuXCIpKTtcbiAgICAgIH1cbiAgICAgIHN0YXRlLm1vZGUgPSBET05FO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgRE9ORTpcbiAgICAgIHJldCA9IFpfU1RSRUFNX0VORDtcbiAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICBjYXNlIEJBRDpcbiAgICAgIHJldCA9IFpfREFUQV9FUlJPUjtcbiAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICBjYXNlIE1FTTpcbiAgICAgIHJldHVybiBaX01FTV9FUlJPUjtcbiAgICBjYXNlIFNZTkM6XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgICB9XG4gIH1cblxuICAvLyBpbmZfbGVhdmUgPC0gaGVyZSBpcyByZWFsIHBsYWNlIGZvciBcImdvdG8gaW5mX2xlYXZlXCIsIGVtdWxhdGVkIHZpYSBcImJyZWFrIGluZl9sZWF2ZVwiXG5cbiAgLypcbiAgICAgUmV0dXJuIGZyb20gaW5mbGF0ZSgpLCB1cGRhdGluZyB0aGUgdG90YWwgY291bnRzIGFuZCB0aGUgY2hlY2sgdmFsdWUuXG4gICAgIElmIHRoZXJlIHdhcyBubyBwcm9ncmVzcyBkdXJpbmcgdGhlIGluZmxhdGUoKSBjYWxsLCByZXR1cm4gYSBidWZmZXJcbiAgICAgZXJyb3IuICBDYWxsIHVwZGF0ZXdpbmRvdygpIHRvIGNyZWF0ZSBhbmQvb3IgdXBkYXRlIHRoZSB3aW5kb3cgc3RhdGUuXG4gICAgIE5vdGU6IGEgbWVtb3J5IGVycm9yIGZyb20gaW5mbGF0ZSgpIGlzIG5vbi1yZWNvdmVyYWJsZS5cbiAgICovXG5cbiAgLy8tLS0gUkVTVE9SRSgpIC0tLVxuICBzdHJtLm5leHRfb3V0ID0gcHV0O1xuICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7XG4gIHN0cm0ubmV4dF9pbiA9IG5leHQ7XG4gIHN0cm0uYXZhaWxfaW4gPSBoYXZlO1xuICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgc3RhdGUuYml0cyA9IGJpdHM7XG4gIC8vLS0tXG5cbiAgaWYgKHN0YXRlLndzaXplIHx8IChfb3V0ICE9PSBzdHJtLmF2YWlsX291dCAmJiBzdGF0ZS5tb2RlIDwgQkFEICYmXG4gICAgICAgICAgICAgICAgICAgICAgKHN0YXRlLm1vZGUgPCBDSEVDSyB8fCBmbHVzaCAhPT0gWl9GSU5JU0gpKSkge1xuICAgIGlmICh1cGRhdGV3aW5kb3coc3RybSwgc3RybS5vdXRwdXQsIHN0cm0ubmV4dF9vdXQsIF9vdXQgLSBzdHJtLmF2YWlsX291dCkpIHtcbiAgICAgIHN0YXRlLm1vZGUgPSBNRU07XG4gICAgICByZXR1cm4gWl9NRU1fRVJST1I7XG4gICAgfVxuICB9XG4gIF9pbiAtPSBzdHJtLmF2YWlsX2luO1xuICBfb3V0IC09IHN0cm0uYXZhaWxfb3V0O1xuICBzdHJtLnRvdGFsX2luICs9IF9pbjtcbiAgc3RybS50b3RhbF9vdXQgKz0gX291dDtcbiAgc3RhdGUudG90YWwgKz0gX291dDtcbiAgaWYgKHN0YXRlLndyYXAgJiYgX291dCkge1xuICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IC8qVVBEQVRFKHN0YXRlLmNoZWNrLCBzdHJtLm5leHRfb3V0IC0gX291dCwgX291dCk7Ki9cbiAgICAgIChzdGF0ZS5mbGFncyA/IGNyYzMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHN0cm0ubmV4dF9vdXQgLSBfb3V0KSA6IGFkbGVyMzIoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgc3RybS5uZXh0X291dCAtIF9vdXQpKTtcbiAgfVxuICBzdHJtLmRhdGFfdHlwZSA9IHN0YXRlLmJpdHMgKyAoc3RhdGUubGFzdCA/IDY0IDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAoc3RhdGUubW9kZSA9PT0gVFlQRSA/IDEyOCA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgKHN0YXRlLm1vZGUgPT09IExFTl8gfHwgc3RhdGUubW9kZSA9PT0gQ09QWV8gPyAyNTYgOiAwKTtcbiAgaWYgKCgoX2luID09PSAwICYmIF9vdXQgPT09IDApIHx8IGZsdXNoID09PSBaX0ZJTklTSCkgJiYgcmV0ID09PSBaX09LKSB7XG4gICAgcmV0ID0gWl9CVUZfRVJST1I7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZUVuZChzdHJtKSB7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlIC8qfHwgc3RybS0+emZyZWUgPT0gKGZyZWVfZnVuYykwKi8pIHtcbiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gIH1cblxuICB2YXIgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBpZiAoc3RhdGUud2luZG93KSB7XG4gICAgc3RhdGUud2luZG93ID0gbnVsbDtcbiAgfVxuICBzdHJtLnN0YXRlID0gbnVsbDtcbiAgcmV0dXJuIFpfT0s7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGVHZXRIZWFkZXIoc3RybSwgaGVhZCkge1xuICB2YXIgc3RhdGU7XG5cbiAgLyogY2hlY2sgc3RhdGUgKi9cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIGlmICgoc3RhdGUud3JhcCAmIDIpID09PSAwKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuXG4gIC8qIHNhdmUgaGVhZGVyIHN0cnVjdHVyZSAqL1xuICBzdGF0ZS5oZWFkID0gaGVhZDtcbiAgaGVhZC5kb25lID0gZmFsc2U7XG4gIHJldHVybiBaX09LO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlU2V0RGljdGlvbmFyeShzdHJtLCBkaWN0aW9uYXJ5KSB7XG4gIHZhciBkaWN0TGVuZ3RoID0gZGljdGlvbmFyeS5sZW5ndGg7XG5cbiAgdmFyIHN0YXRlO1xuICB2YXIgZGljdGlkO1xuICB2YXIgcmV0O1xuXG4gIC8qIGNoZWNrIHN0YXRlICovXG4gIGlmICghc3RybSAvKiA9PSBaX05VTEwgKi8gfHwgIXN0cm0uc3RhdGUgLyogPT0gWl9OVUxMICovKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG5cbiAgaWYgKHN0YXRlLndyYXAgIT09IDAgJiYgc3RhdGUubW9kZSAhPT0gRElDVCkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuXG4gIC8qIGNoZWNrIGZvciBjb3JyZWN0IGRpY3Rpb25hcnkgaWRlbnRpZmllciAqL1xuICBpZiAoc3RhdGUubW9kZSA9PT0gRElDVCkge1xuICAgIGRpY3RpZCA9IDE7IC8qIGFkbGVyMzIoMCwgbnVsbCwgMCkqL1xuICAgIC8qIGRpY3RpZCA9IGFkbGVyMzIoZGljdGlkLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoKTsgKi9cbiAgICBkaWN0aWQgPSBhZGxlcjMyKGRpY3RpZCwgZGljdGlvbmFyeSwgZGljdExlbmd0aCwgMCk7XG4gICAgaWYgKGRpY3RpZCAhPT0gc3RhdGUuY2hlY2spIHtcbiAgICAgIHJldHVybiBaX0RBVEFfRVJST1I7XG4gICAgfVxuICB9XG4gIC8qIGNvcHkgZGljdGlvbmFyeSB0byB3aW5kb3cgdXNpbmcgdXBkYXRld2luZG93KCksIHdoaWNoIHdpbGwgYW1lbmQgdGhlXG4gICBleGlzdGluZyBkaWN0aW9uYXJ5IGlmIGFwcHJvcHJpYXRlICovXG4gIHJldCA9IHVwZGF0ZXdpbmRvdyhzdHJtLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoLCBkaWN0TGVuZ3RoKTtcbiAgaWYgKHJldCkge1xuICAgIHN0YXRlLm1vZGUgPSBNRU07XG4gICAgcmV0dXJuIFpfTUVNX0VSUk9SO1xuICB9XG4gIHN0YXRlLmhhdmVkaWN0ID0gMTtcbiAgLy8gVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICBkaWN0aW9uYXJ5IHNldFxcblwiKSk7XG4gIHJldHVybiBaX09LO1xufVxuXG5leHBvcnRzLmluZmxhdGVSZXNldCA9IGluZmxhdGVSZXNldDtcbmV4cG9ydHMuaW5mbGF0ZVJlc2V0MiA9IGluZmxhdGVSZXNldDI7XG5leHBvcnRzLmluZmxhdGVSZXNldEtlZXAgPSBpbmZsYXRlUmVzZXRLZWVwO1xuZXhwb3J0cy5pbmZsYXRlSW5pdCA9IGluZmxhdGVJbml0O1xuZXhwb3J0cy5pbmZsYXRlSW5pdDIgPSBpbmZsYXRlSW5pdDI7XG5leHBvcnRzLmluZmxhdGUgPSBpbmZsYXRlO1xuZXhwb3J0cy5pbmZsYXRlRW5kID0gaW5mbGF0ZUVuZDtcbmV4cG9ydHMuaW5mbGF0ZUdldEhlYWRlciA9IGluZmxhdGVHZXRIZWFkZXI7XG5leHBvcnRzLmluZmxhdGVTZXREaWN0aW9uYXJ5ID0gaW5mbGF0ZVNldERpY3Rpb25hcnk7XG5leHBvcnRzLmluZmxhdGVJbmZvID0gJ3Bha28gaW5mbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdCknO1xuXG4vKiBOb3QgaW1wbGVtZW50ZWRcbmV4cG9ydHMuaW5mbGF0ZUNvcHkgPSBpbmZsYXRlQ29weTtcbmV4cG9ydHMuaW5mbGF0ZUdldERpY3Rpb25hcnkgPSBpbmZsYXRlR2V0RGljdGlvbmFyeTtcbmV4cG9ydHMuaW5mbGF0ZU1hcmsgPSBpbmZsYXRlTWFyaztcbmV4cG9ydHMuaW5mbGF0ZVByaW1lID0gaW5mbGF0ZVByaW1lO1xuZXhwb3J0cy5pbmZsYXRlU3luYyA9IGluZmxhdGVTeW5jO1xuZXhwb3J0cy5pbmZsYXRlU3luY1BvaW50ID0gaW5mbGF0ZVN5bmNQb2ludDtcbmV4cG9ydHMuaW5mbGF0ZVVuZGVybWluZSA9IGluZmxhdGVVbmRlcm1pbmU7XG4qL1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL2NvbW1vbicpO1xuXG52YXIgTUFYQklUUyA9IDE1O1xudmFyIEVOT1VHSF9MRU5TID0gODUyO1xudmFyIEVOT1VHSF9ESVNUUyA9IDU5Mjtcbi8vdmFyIEVOT1VHSCA9IChFTk9VR0hfTEVOUytFTk9VR0hfRElTVFMpO1xuXG52YXIgQ09ERVMgPSAwO1xudmFyIExFTlMgPSAxO1xudmFyIERJU1RTID0gMjtcblxudmFyIGxiYXNlID0gWyAvKiBMZW5ndGggY29kZXMgMjU3Li4yODUgYmFzZSAqL1xuICAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIDEzLCAxNSwgMTcsIDE5LCAyMywgMjcsIDMxLFxuICAzNSwgNDMsIDUxLCA1OSwgNjcsIDgzLCA5OSwgMTE1LCAxMzEsIDE2MywgMTk1LCAyMjcsIDI1OCwgMCwgMFxuXTtcblxudmFyIGxleHQgPSBbIC8qIExlbmd0aCBjb2RlcyAyNTcuLjI4NSBleHRyYSAqL1xuICAxNiwgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTYsIDE3LCAxNywgMTcsIDE3LCAxOCwgMTgsIDE4LCAxOCxcbiAgMTksIDE5LCAxOSwgMTksIDIwLCAyMCwgMjAsIDIwLCAyMSwgMjEsIDIxLCAyMSwgMTYsIDcyLCA3OFxuXTtcblxudmFyIGRiYXNlID0gWyAvKiBEaXN0YW5jZSBjb2RlcyAwLi4yOSBiYXNlICovXG4gIDEsIDIsIDMsIDQsIDUsIDcsIDksIDEzLCAxNywgMjUsIDMzLCA0OSwgNjUsIDk3LCAxMjksIDE5MyxcbiAgMjU3LCAzODUsIDUxMywgNzY5LCAxMDI1LCAxNTM3LCAyMDQ5LCAzMDczLCA0MDk3LCA2MTQ1LFxuICA4MTkzLCAxMjI4OSwgMTYzODUsIDI0NTc3LCAwLCAwXG5dO1xuXG52YXIgZGV4dCA9IFsgLyogRGlzdGFuY2UgY29kZXMgMC4uMjkgZXh0cmEgKi9cbiAgMTYsIDE2LCAxNiwgMTYsIDE3LCAxNywgMTgsIDE4LCAxOSwgMTksIDIwLCAyMCwgMjEsIDIxLCAyMiwgMjIsXG4gIDIzLCAyMywgMjQsIDI0LCAyNSwgMjUsIDI2LCAyNiwgMjcsIDI3LFxuICAyOCwgMjgsIDI5LCAyOSwgNjQsIDY0XG5dO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluZmxhdGVfdGFibGUodHlwZSwgbGVucywgbGVuc19pbmRleCwgY29kZXMsIHRhYmxlLCB0YWJsZV9pbmRleCwgd29yaywgb3B0cylcbntcbiAgdmFyIGJpdHMgPSBvcHRzLmJpdHM7XG4gICAgICAvL2hlcmUgPSBvcHRzLmhlcmU7IC8qIHRhYmxlIGVudHJ5IGZvciBkdXBsaWNhdGlvbiAqL1xuXG4gIHZhciBsZW4gPSAwOyAgICAgICAgICAgICAgIC8qIGEgY29kZSdzIGxlbmd0aCBpbiBiaXRzICovXG4gIHZhciBzeW0gPSAwOyAgICAgICAgICAgICAgIC8qIGluZGV4IG9mIGNvZGUgc3ltYm9scyAqL1xuICB2YXIgbWluID0gMCwgbWF4ID0gMDsgICAgICAgICAgLyogbWluaW11bSBhbmQgbWF4aW11bSBjb2RlIGxlbmd0aHMgKi9cbiAgdmFyIHJvb3QgPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGluZGV4IGJpdHMgZm9yIHJvb3QgdGFibGUgKi9cbiAgdmFyIGN1cnIgPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGluZGV4IGJpdHMgZm9yIGN1cnJlbnQgdGFibGUgKi9cbiAgdmFyIGRyb3AgPSAwOyAgICAgICAgICAgICAgLyogY29kZSBiaXRzIHRvIGRyb3AgZm9yIHN1Yi10YWJsZSAqL1xuICB2YXIgbGVmdCA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBwcmVmaXggY29kZXMgYXZhaWxhYmxlICovXG4gIHZhciB1c2VkID0gMDsgICAgICAgICAgICAgIC8qIGNvZGUgZW50cmllcyBpbiB0YWJsZSB1c2VkICovXG4gIHZhciBodWZmID0gMDsgICAgICAgICAgICAgIC8qIEh1ZmZtYW4gY29kZSAqL1xuICB2YXIgaW5jcjsgICAgICAgICAgICAgIC8qIGZvciBpbmNyZW1lbnRpbmcgY29kZSwgaW5kZXggKi9cbiAgdmFyIGZpbGw7ICAgICAgICAgICAgICAvKiBpbmRleCBmb3IgcmVwbGljYXRpbmcgZW50cmllcyAqL1xuICB2YXIgbG93OyAgICAgICAgICAgICAgIC8qIGxvdyBiaXRzIGZvciBjdXJyZW50IHJvb3QgZW50cnkgKi9cbiAgdmFyIG1hc2s7ICAgICAgICAgICAgICAvKiBtYXNrIGZvciBsb3cgcm9vdCBiaXRzICovXG4gIHZhciBuZXh0OyAgICAgICAgICAgICAvKiBuZXh0IGF2YWlsYWJsZSBzcGFjZSBpbiB0YWJsZSAqL1xuICB2YXIgYmFzZSA9IG51bGw7ICAgICAvKiBiYXNlIHZhbHVlIHRhYmxlIHRvIHVzZSAqL1xuICB2YXIgYmFzZV9pbmRleCA9IDA7XG4vLyAgdmFyIHNob2V4dHJhOyAgICAvKiBleHRyYSBiaXRzIHRhYmxlIHRvIHVzZSAqL1xuICB2YXIgZW5kOyAgICAgICAgICAgICAgICAgICAgLyogdXNlIGJhc2UgYW5kIGV4dHJhIGZvciBzeW1ib2wgPiBlbmQgKi9cbiAgdmFyIGNvdW50ID0gbmV3IHV0aWxzLkJ1ZjE2KE1BWEJJVFMgKyAxKTsgLy9bTUFYQklUUysxXTsgICAgLyogbnVtYmVyIG9mIGNvZGVzIG9mIGVhY2ggbGVuZ3RoICovXG4gIHZhciBvZmZzID0gbmV3IHV0aWxzLkJ1ZjE2KE1BWEJJVFMgKyAxKTsgLy9bTUFYQklUUysxXTsgICAgIC8qIG9mZnNldHMgaW4gdGFibGUgZm9yIGVhY2ggbGVuZ3RoICovXG4gIHZhciBleHRyYSA9IG51bGw7XG4gIHZhciBleHRyYV9pbmRleCA9IDA7XG5cbiAgdmFyIGhlcmVfYml0cywgaGVyZV9vcCwgaGVyZV92YWw7XG5cbiAgLypcbiAgIFByb2Nlc3MgYSBzZXQgb2YgY29kZSBsZW5ndGhzIHRvIGNyZWF0ZSBhIGNhbm9uaWNhbCBIdWZmbWFuIGNvZGUuICBUaGVcbiAgIGNvZGUgbGVuZ3RocyBhcmUgbGVuc1swLi5jb2Rlcy0xXS4gIEVhY2ggbGVuZ3RoIGNvcnJlc3BvbmRzIHRvIHRoZVxuICAgc3ltYm9scyAwLi5jb2Rlcy0xLiAgVGhlIEh1ZmZtYW4gY29kZSBpcyBnZW5lcmF0ZWQgYnkgZmlyc3Qgc29ydGluZyB0aGVcbiAgIHN5bWJvbHMgYnkgbGVuZ3RoIGZyb20gc2hvcnQgdG8gbG9uZywgYW5kIHJldGFpbmluZyB0aGUgc3ltYm9sIG9yZGVyXG4gICBmb3IgY29kZXMgd2l0aCBlcXVhbCBsZW5ndGhzLiAgVGhlbiB0aGUgY29kZSBzdGFydHMgd2l0aCBhbGwgemVybyBiaXRzXG4gICBmb3IgdGhlIGZpcnN0IGNvZGUgb2YgdGhlIHNob3J0ZXN0IGxlbmd0aCwgYW5kIHRoZSBjb2RlcyBhcmUgaW50ZWdlclxuICAgaW5jcmVtZW50cyBmb3IgdGhlIHNhbWUgbGVuZ3RoLCBhbmQgemVyb3MgYXJlIGFwcGVuZGVkIGFzIHRoZSBsZW5ndGhcbiAgIGluY3JlYXNlcy4gIEZvciB0aGUgZGVmbGF0ZSBmb3JtYXQsIHRoZXNlIGJpdHMgYXJlIHN0b3JlZCBiYWNrd2FyZHNcbiAgIGZyb20gdGhlaXIgbW9yZSBuYXR1cmFsIGludGVnZXIgaW5jcmVtZW50IG9yZGVyaW5nLCBhbmQgc28gd2hlbiB0aGVcbiAgIGRlY29kaW5nIHRhYmxlcyBhcmUgYnVpbHQgaW4gdGhlIGxhcmdlIGxvb3AgYmVsb3csIHRoZSBpbnRlZ2VyIGNvZGVzXG4gICBhcmUgaW5jcmVtZW50ZWQgYmFja3dhcmRzLlxuXG4gICBUaGlzIHJvdXRpbmUgYXNzdW1lcywgYnV0IGRvZXMgbm90IGNoZWNrLCB0aGF0IGFsbCBvZiB0aGUgZW50cmllcyBpblxuICAgbGVuc1tdIGFyZSBpbiB0aGUgcmFuZ2UgMC4uTUFYQklUUy4gIFRoZSBjYWxsZXIgbXVzdCBhc3N1cmUgdGhpcy5cbiAgIDEuLk1BWEJJVFMgaXMgaW50ZXJwcmV0ZWQgYXMgdGhhdCBjb2RlIGxlbmd0aC4gIHplcm8gbWVhbnMgdGhhdCB0aGF0XG4gICBzeW1ib2wgZG9lcyBub3Qgb2NjdXIgaW4gdGhpcyBjb2RlLlxuXG4gICBUaGUgY29kZXMgYXJlIHNvcnRlZCBieSBjb21wdXRpbmcgYSBjb3VudCBvZiBjb2RlcyBmb3IgZWFjaCBsZW5ndGgsXG4gICBjcmVhdGluZyBmcm9tIHRoYXQgYSB0YWJsZSBvZiBzdGFydGluZyBpbmRpY2VzIGZvciBlYWNoIGxlbmd0aCBpbiB0aGVcbiAgIHNvcnRlZCB0YWJsZSwgYW5kIHRoZW4gZW50ZXJpbmcgdGhlIHN5bWJvbHMgaW4gb3JkZXIgaW4gdGhlIHNvcnRlZFxuICAgdGFibGUuICBUaGUgc29ydGVkIHRhYmxlIGlzIHdvcmtbXSwgd2l0aCB0aGF0IHNwYWNlIGJlaW5nIHByb3ZpZGVkIGJ5XG4gICB0aGUgY2FsbGVyLlxuXG4gICBUaGUgbGVuZ3RoIGNvdW50cyBhcmUgdXNlZCBmb3Igb3RoZXIgcHVycG9zZXMgYXMgd2VsbCwgaS5lLiBmaW5kaW5nXG4gICB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBsZW5ndGggY29kZXMsIGRldGVybWluaW5nIGlmIHRoZXJlIGFyZSBhbnlcbiAgIGNvZGVzIGF0IGFsbCwgY2hlY2tpbmcgZm9yIGEgdmFsaWQgc2V0IG9mIGxlbmd0aHMsIGFuZCBsb29raW5nIGFoZWFkXG4gICBhdCBsZW5ndGggY291bnRzIHRvIGRldGVybWluZSBzdWItdGFibGUgc2l6ZXMgd2hlbiBidWlsZGluZyB0aGVcbiAgIGRlY29kaW5nIHRhYmxlcy5cbiAgICovXG5cbiAgLyogYWNjdW11bGF0ZSBsZW5ndGhzIGZvciBjb2RlcyAoYXNzdW1lcyBsZW5zW10gYWxsIGluIDAuLk1BWEJJVFMpICovXG4gIGZvciAobGVuID0gMDsgbGVuIDw9IE1BWEJJVFM7IGxlbisrKSB7XG4gICAgY291bnRbbGVuXSA9IDA7XG4gIH1cbiAgZm9yIChzeW0gPSAwOyBzeW0gPCBjb2Rlczsgc3ltKyspIHtcbiAgICBjb3VudFtsZW5zW2xlbnNfaW5kZXggKyBzeW1dXSsrO1xuICB9XG5cbiAgLyogYm91bmQgY29kZSBsZW5ndGhzLCBmb3JjZSByb290IHRvIGJlIHdpdGhpbiBjb2RlIGxlbmd0aHMgKi9cbiAgcm9vdCA9IGJpdHM7XG4gIGZvciAobWF4ID0gTUFYQklUUzsgbWF4ID49IDE7IG1heC0tKSB7XG4gICAgaWYgKGNvdW50W21heF0gIT09IDApIHsgYnJlYWs7IH1cbiAgfVxuICBpZiAocm9vdCA+IG1heCkge1xuICAgIHJvb3QgPSBtYXg7XG4gIH1cbiAgaWYgKG1heCA9PT0gMCkgeyAgICAgICAgICAgICAgICAgICAgIC8qIG5vIHN5bWJvbHMgdG8gY29kZSBhdCBhbGwgKi9cbiAgICAvL3RhYmxlLm9wW29wdHMudGFibGVfaW5kZXhdID0gNjQ7ICAvL2hlcmUub3AgPSAodmFyIGNoYXIpNjQ7ICAgIC8qIGludmFsaWQgY29kZSBtYXJrZXIgKi9cbiAgICAvL3RhYmxlLmJpdHNbb3B0cy50YWJsZV9pbmRleF0gPSAxOyAgIC8vaGVyZS5iaXRzID0gKHZhciBjaGFyKTE7XG4gICAgLy90YWJsZS52YWxbb3B0cy50YWJsZV9pbmRleCsrXSA9IDA7ICAgLy9oZXJlLnZhbCA9ICh2YXIgc2hvcnQpMDtcbiAgICB0YWJsZVt0YWJsZV9pbmRleCsrXSA9ICgxIDw8IDI0KSB8ICg2NCA8PCAxNikgfCAwO1xuXG5cbiAgICAvL3RhYmxlLm9wW29wdHMudGFibGVfaW5kZXhdID0gNjQ7XG4gICAgLy90YWJsZS5iaXRzW29wdHMudGFibGVfaW5kZXhdID0gMTtcbiAgICAvL3RhYmxlLnZhbFtvcHRzLnRhYmxlX2luZGV4KytdID0gMDtcbiAgICB0YWJsZVt0YWJsZV9pbmRleCsrXSA9ICgxIDw8IDI0KSB8ICg2NCA8PCAxNikgfCAwO1xuXG4gICAgb3B0cy5iaXRzID0gMTtcbiAgICByZXR1cm4gMDsgICAgIC8qIG5vIHN5bWJvbHMsIGJ1dCB3YWl0IGZvciBkZWNvZGluZyB0byByZXBvcnQgZXJyb3IgKi9cbiAgfVxuICBmb3IgKG1pbiA9IDE7IG1pbiA8IG1heDsgbWluKyspIHtcbiAgICBpZiAoY291bnRbbWluXSAhPT0gMCkgeyBicmVhazsgfVxuICB9XG4gIGlmIChyb290IDwgbWluKSB7XG4gICAgcm9vdCA9IG1pbjtcbiAgfVxuXG4gIC8qIGNoZWNrIGZvciBhbiBvdmVyLXN1YnNjcmliZWQgb3IgaW5jb21wbGV0ZSBzZXQgb2YgbGVuZ3RocyAqL1xuICBsZWZ0ID0gMTtcbiAgZm9yIChsZW4gPSAxOyBsZW4gPD0gTUFYQklUUzsgbGVuKyspIHtcbiAgICBsZWZ0IDw8PSAxO1xuICAgIGxlZnQgLT0gY291bnRbbGVuXTtcbiAgICBpZiAobGVmdCA8IDApIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9ICAgICAgICAvKiBvdmVyLXN1YnNjcmliZWQgKi9cbiAgfVxuICBpZiAobGVmdCA+IDAgJiYgKHR5cGUgPT09IENPREVTIHx8IG1heCAhPT0gMSkpIHtcbiAgICByZXR1cm4gLTE7ICAgICAgICAgICAgICAgICAgICAgIC8qIGluY29tcGxldGUgc2V0ICovXG4gIH1cblxuICAvKiBnZW5lcmF0ZSBvZmZzZXRzIGludG8gc3ltYm9sIHRhYmxlIGZvciBlYWNoIGxlbmd0aCBmb3Igc29ydGluZyAqL1xuICBvZmZzWzFdID0gMDtcbiAgZm9yIChsZW4gPSAxOyBsZW4gPCBNQVhCSVRTOyBsZW4rKykge1xuICAgIG9mZnNbbGVuICsgMV0gPSBvZmZzW2xlbl0gKyBjb3VudFtsZW5dO1xuICB9XG5cbiAgLyogc29ydCBzeW1ib2xzIGJ5IGxlbmd0aCwgYnkgc3ltYm9sIG9yZGVyIHdpdGhpbiBlYWNoIGxlbmd0aCAqL1xuICBmb3IgKHN5bSA9IDA7IHN5bSA8IGNvZGVzOyBzeW0rKykge1xuICAgIGlmIChsZW5zW2xlbnNfaW5kZXggKyBzeW1dICE9PSAwKSB7XG4gICAgICB3b3JrW29mZnNbbGVuc1tsZW5zX2luZGV4ICsgc3ltXV0rK10gPSBzeW07XG4gICAgfVxuICB9XG5cbiAgLypcbiAgIENyZWF0ZSBhbmQgZmlsbCBpbiBkZWNvZGluZyB0YWJsZXMuICBJbiB0aGlzIGxvb3AsIHRoZSB0YWJsZSBiZWluZ1xuICAgZmlsbGVkIGlzIGF0IG5leHQgYW5kIGhhcyBjdXJyIGluZGV4IGJpdHMuICBUaGUgY29kZSBiZWluZyB1c2VkIGlzIGh1ZmZcbiAgIHdpdGggbGVuZ3RoIGxlbi4gIFRoYXQgY29kZSBpcyBjb252ZXJ0ZWQgdG8gYW4gaW5kZXggYnkgZHJvcHBpbmcgZHJvcFxuICAgYml0cyBvZmYgb2YgdGhlIGJvdHRvbS4gIEZvciBjb2RlcyB3aGVyZSBsZW4gaXMgbGVzcyB0aGFuIGRyb3AgKyBjdXJyLFxuICAgdGhvc2UgdG9wIGRyb3AgKyBjdXJyIC0gbGVuIGJpdHMgYXJlIGluY3JlbWVudGVkIHRocm91Z2ggYWxsIHZhbHVlcyB0b1xuICAgZmlsbCB0aGUgdGFibGUgd2l0aCByZXBsaWNhdGVkIGVudHJpZXMuXG5cbiAgIHJvb3QgaXMgdGhlIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciB0aGUgcm9vdCB0YWJsZS4gIFdoZW4gbGVuIGV4Y2VlZHNcbiAgIHJvb3QsIHN1Yi10YWJsZXMgYXJlIGNyZWF0ZWQgcG9pbnRlZCB0byBieSB0aGUgcm9vdCBlbnRyeSB3aXRoIGFuIGluZGV4XG4gICBvZiB0aGUgbG93IHJvb3QgYml0cyBvZiBodWZmLiAgVGhpcyBpcyBzYXZlZCBpbiBsb3cgdG8gY2hlY2sgZm9yIHdoZW4gYVxuICAgbmV3IHN1Yi10YWJsZSBzaG91bGQgYmUgc3RhcnRlZC4gIGRyb3AgaXMgemVybyB3aGVuIHRoZSByb290IHRhYmxlIGlzXG4gICBiZWluZyBmaWxsZWQsIGFuZCBkcm9wIGlzIHJvb3Qgd2hlbiBzdWItdGFibGVzIGFyZSBiZWluZyBmaWxsZWQuXG5cbiAgIFdoZW4gYSBuZXcgc3ViLXRhYmxlIGlzIG5lZWRlZCwgaXQgaXMgbmVjZXNzYXJ5IHRvIGxvb2sgYWhlYWQgaW4gdGhlXG4gICBjb2RlIGxlbmd0aHMgdG8gZGV0ZXJtaW5lIHdoYXQgc2l6ZSBzdWItdGFibGUgaXMgbmVlZGVkLiAgVGhlIGxlbmd0aFxuICAgY291bnRzIGFyZSB1c2VkIGZvciB0aGlzLCBhbmQgc28gY291bnRbXSBpcyBkZWNyZW1lbnRlZCBhcyBjb2RlcyBhcmVcbiAgIGVudGVyZWQgaW4gdGhlIHRhYmxlcy5cblxuICAgdXNlZCBrZWVwcyB0cmFjayBvZiBob3cgbWFueSB0YWJsZSBlbnRyaWVzIGhhdmUgYmVlbiBhbGxvY2F0ZWQgZnJvbSB0aGVcbiAgIHByb3ZpZGVkICp0YWJsZSBzcGFjZS4gIEl0IGlzIGNoZWNrZWQgZm9yIExFTlMgYW5kIERJU1QgdGFibGVzIGFnYWluc3RcbiAgIHRoZSBjb25zdGFudHMgRU5PVUdIX0xFTlMgYW5kIEVOT1VHSF9ESVNUUyB0byBndWFyZCBhZ2FpbnN0IGNoYW5nZXMgaW5cbiAgIHRoZSBpbml0aWFsIHJvb3QgdGFibGUgc2l6ZSBjb25zdGFudHMuICBTZWUgdGhlIGNvbW1lbnRzIGluIGluZnRyZWVzLmhcbiAgIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICBzeW0gaW5jcmVtZW50cyB0aHJvdWdoIGFsbCBzeW1ib2xzLCBhbmQgdGhlIGxvb3AgdGVybWluYXRlcyB3aGVuXG4gICBhbGwgY29kZXMgb2YgbGVuZ3RoIG1heCwgaS5lLiBhbGwgY29kZXMsIGhhdmUgYmVlbiBwcm9jZXNzZWQuICBUaGlzXG4gICByb3V0aW5lIHBlcm1pdHMgaW5jb21wbGV0ZSBjb2Rlcywgc28gYW5vdGhlciBsb29wIGFmdGVyIHRoaXMgb25lIGZpbGxzXG4gICBpbiB0aGUgcmVzdCBvZiB0aGUgZGVjb2RpbmcgdGFibGVzIHdpdGggaW52YWxpZCBjb2RlIG1hcmtlcnMuXG4gICAqL1xuXG4gIC8qIHNldCB1cCBmb3IgY29kZSB0eXBlICovXG4gIC8vIHBvb3IgbWFuIG9wdGltaXphdGlvbiAtIHVzZSBpZi1lbHNlIGluc3RlYWQgb2Ygc3dpdGNoLFxuICAvLyB0byBhdm9pZCBkZW9wdHMgaW4gb2xkIHY4XG4gIGlmICh0eXBlID09PSBDT0RFUykge1xuICAgIGJhc2UgPSBleHRyYSA9IHdvcms7ICAgIC8qIGR1bW15IHZhbHVlLS1ub3QgdXNlZCAqL1xuICAgIGVuZCA9IDE5O1xuXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gTEVOUykge1xuICAgIGJhc2UgPSBsYmFzZTtcbiAgICBiYXNlX2luZGV4IC09IDI1NztcbiAgICBleHRyYSA9IGxleHQ7XG4gICAgZXh0cmFfaW5kZXggLT0gMjU3O1xuICAgIGVuZCA9IDI1NjtcblxuICB9IGVsc2UgeyAgICAgICAgICAgICAgICAgICAgLyogRElTVFMgKi9cbiAgICBiYXNlID0gZGJhc2U7XG4gICAgZXh0cmEgPSBkZXh0O1xuICAgIGVuZCA9IC0xO1xuICB9XG5cbiAgLyogaW5pdGlhbGl6ZSBvcHRzIGZvciBsb29wICovXG4gIGh1ZmYgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBzdGFydGluZyBjb2RlICovXG4gIHN5bSA9IDA7ICAgICAgICAgICAgICAgICAgICAvKiBzdGFydGluZyBjb2RlIHN5bWJvbCAqL1xuICBsZW4gPSBtaW47ICAgICAgICAgICAgICAgICAgLyogc3RhcnRpbmcgY29kZSBsZW5ndGggKi9cbiAgbmV4dCA9IHRhYmxlX2luZGV4OyAgICAgICAgICAgICAgLyogY3VycmVudCB0YWJsZSB0byBmaWxsIGluICovXG4gIGN1cnIgPSByb290OyAgICAgICAgICAgICAgICAvKiBjdXJyZW50IHRhYmxlIGluZGV4IGJpdHMgKi9cbiAgZHJvcCA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIGN1cnJlbnQgYml0cyB0byBkcm9wIGZyb20gY29kZSBmb3IgaW5kZXggKi9cbiAgbG93ID0gLTE7ICAgICAgICAgICAgICAgICAgIC8qIHRyaWdnZXIgbmV3IHN1Yi10YWJsZSB3aGVuIGxlbiA+IHJvb3QgKi9cbiAgdXNlZCA9IDEgPDwgcm9vdDsgICAgICAgICAgLyogdXNlIHJvb3QgdGFibGUgZW50cmllcyAqL1xuICBtYXNrID0gdXNlZCAtIDE7ICAgICAgICAgICAgLyogbWFzayBmb3IgY29tcGFyaW5nIGxvdyAqL1xuXG4gIC8qIGNoZWNrIGF2YWlsYWJsZSB0YWJsZSBzcGFjZSAqL1xuICBpZiAoKHR5cGUgPT09IExFTlMgJiYgdXNlZCA+IEVOT1VHSF9MRU5TKSB8fFxuICAgICh0eXBlID09PSBESVNUUyAmJiB1c2VkID4gRU5PVUdIX0RJU1RTKSkge1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgdmFyIGkgPSAwO1xuICAvKiBwcm9jZXNzIGFsbCBjb2RlcyBhbmQgbWFrZSB0YWJsZSBlbnRyaWVzICovXG4gIGZvciAoOzspIHtcbiAgICBpKys7XG4gICAgLyogY3JlYXRlIHRhYmxlIGVudHJ5ICovXG4gICAgaGVyZV9iaXRzID0gbGVuIC0gZHJvcDtcbiAgICBpZiAod29ya1tzeW1dIDwgZW5kKSB7XG4gICAgICBoZXJlX29wID0gMDtcbiAgICAgIGhlcmVfdmFsID0gd29ya1tzeW1dO1xuICAgIH1cbiAgICBlbHNlIGlmICh3b3JrW3N5bV0gPiBlbmQpIHtcbiAgICAgIGhlcmVfb3AgPSBleHRyYVtleHRyYV9pbmRleCArIHdvcmtbc3ltXV07XG4gICAgICBoZXJlX3ZhbCA9IGJhc2VbYmFzZV9pbmRleCArIHdvcmtbc3ltXV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaGVyZV9vcCA9IDMyICsgNjQ7ICAgICAgICAgLyogZW5kIG9mIGJsb2NrICovXG4gICAgICBoZXJlX3ZhbCA9IDA7XG4gICAgfVxuXG4gICAgLyogcmVwbGljYXRlIGZvciB0aG9zZSBpbmRpY2VzIHdpdGggbG93IGxlbiBiaXRzIGVxdWFsIHRvIGh1ZmYgKi9cbiAgICBpbmNyID0gMSA8PCAobGVuIC0gZHJvcCk7XG4gICAgZmlsbCA9IDEgPDwgY3VycjtcbiAgICBtaW4gPSBmaWxsOyAgICAgICAgICAgICAgICAgLyogc2F2ZSBvZmZzZXQgdG8gbmV4dCB0YWJsZSAqL1xuICAgIGRvIHtcbiAgICAgIGZpbGwgLT0gaW5jcjtcbiAgICAgIHRhYmxlW25leHQgKyAoaHVmZiA+PiBkcm9wKSArIGZpbGxdID0gKGhlcmVfYml0cyA8PCAyNCkgfCAoaGVyZV9vcCA8PCAxNikgfCBoZXJlX3ZhbCB8MDtcbiAgICB9IHdoaWxlIChmaWxsICE9PSAwKTtcblxuICAgIC8qIGJhY2t3YXJkcyBpbmNyZW1lbnQgdGhlIGxlbi1iaXQgY29kZSBodWZmICovXG4gICAgaW5jciA9IDEgPDwgKGxlbiAtIDEpO1xuICAgIHdoaWxlIChodWZmICYgaW5jcikge1xuICAgICAgaW5jciA+Pj0gMTtcbiAgICB9XG4gICAgaWYgKGluY3IgIT09IDApIHtcbiAgICAgIGh1ZmYgJj0gaW5jciAtIDE7XG4gICAgICBodWZmICs9IGluY3I7XG4gICAgfSBlbHNlIHtcbiAgICAgIGh1ZmYgPSAwO1xuICAgIH1cblxuICAgIC8qIGdvIHRvIG5leHQgc3ltYm9sLCB1cGRhdGUgY291bnQsIGxlbiAqL1xuICAgIHN5bSsrO1xuICAgIGlmICgtLWNvdW50W2xlbl0gPT09IDApIHtcbiAgICAgIGlmIChsZW4gPT09IG1heCkgeyBicmVhazsgfVxuICAgICAgbGVuID0gbGVuc1tsZW5zX2luZGV4ICsgd29ya1tzeW1dXTtcbiAgICB9XG5cbiAgICAvKiBjcmVhdGUgbmV3IHN1Yi10YWJsZSBpZiBuZWVkZWQgKi9cbiAgICBpZiAobGVuID4gcm9vdCAmJiAoaHVmZiAmIG1hc2spICE9PSBsb3cpIHtcbiAgICAgIC8qIGlmIGZpcnN0IHRpbWUsIHRyYW5zaXRpb24gdG8gc3ViLXRhYmxlcyAqL1xuICAgICAgaWYgKGRyb3AgPT09IDApIHtcbiAgICAgICAgZHJvcCA9IHJvb3Q7XG4gICAgICB9XG5cbiAgICAgIC8qIGluY3JlbWVudCBwYXN0IGxhc3QgdGFibGUgKi9cbiAgICAgIG5leHQgKz0gbWluOyAgICAgICAgICAgIC8qIGhlcmUgbWluIGlzIDEgPDwgY3VyciAqL1xuXG4gICAgICAvKiBkZXRlcm1pbmUgbGVuZ3RoIG9mIG5leHQgdGFibGUgKi9cbiAgICAgIGN1cnIgPSBsZW4gLSBkcm9wO1xuICAgICAgbGVmdCA9IDEgPDwgY3VycjtcbiAgICAgIHdoaWxlIChjdXJyICsgZHJvcCA8IG1heCkge1xuICAgICAgICBsZWZ0IC09IGNvdW50W2N1cnIgKyBkcm9wXTtcbiAgICAgICAgaWYgKGxlZnQgPD0gMCkgeyBicmVhazsgfVxuICAgICAgICBjdXJyKys7XG4gICAgICAgIGxlZnQgPDw9IDE7XG4gICAgICB9XG5cbiAgICAgIC8qIGNoZWNrIGZvciBlbm91Z2ggc3BhY2UgKi9cbiAgICAgIHVzZWQgKz0gMSA8PCBjdXJyO1xuICAgICAgaWYgKCh0eXBlID09PSBMRU5TICYmIHVzZWQgPiBFTk9VR0hfTEVOUykgfHxcbiAgICAgICAgKHR5cGUgPT09IERJU1RTICYmIHVzZWQgPiBFTk9VR0hfRElTVFMpKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuXG4gICAgICAvKiBwb2ludCBlbnRyeSBpbiByb290IHRhYmxlIHRvIHN1Yi10YWJsZSAqL1xuICAgICAgbG93ID0gaHVmZiAmIG1hc2s7XG4gICAgICAvKnRhYmxlLm9wW2xvd10gPSBjdXJyO1xuICAgICAgdGFibGUuYml0c1tsb3ddID0gcm9vdDtcbiAgICAgIHRhYmxlLnZhbFtsb3ddID0gbmV4dCAtIG9wdHMudGFibGVfaW5kZXg7Ki9cbiAgICAgIHRhYmxlW2xvd10gPSAocm9vdCA8PCAyNCkgfCAoY3VyciA8PCAxNikgfCAobmV4dCAtIHRhYmxlX2luZGV4KSB8MDtcbiAgICB9XG4gIH1cblxuICAvKiBmaWxsIGluIHJlbWFpbmluZyB0YWJsZSBlbnRyeSBpZiBjb2RlIGlzIGluY29tcGxldGUgKGd1YXJhbnRlZWQgdG8gaGF2ZVxuICAgYXQgbW9zdCBvbmUgcmVtYWluaW5nIGVudHJ5LCBzaW5jZSBpZiB0aGUgY29kZSBpcyBpbmNvbXBsZXRlLCB0aGVcbiAgIG1heGltdW0gY29kZSBsZW5ndGggdGhhdCB3YXMgYWxsb3dlZCB0byBnZXQgdGhpcyBmYXIgaXMgb25lIGJpdCkgKi9cbiAgaWYgKGh1ZmYgIT09IDApIHtcbiAgICAvL3RhYmxlLm9wW25leHQgKyBodWZmXSA9IDY0OyAgICAgICAgICAgIC8qIGludmFsaWQgY29kZSBtYXJrZXIgKi9cbiAgICAvL3RhYmxlLmJpdHNbbmV4dCArIGh1ZmZdID0gbGVuIC0gZHJvcDtcbiAgICAvL3RhYmxlLnZhbFtuZXh0ICsgaHVmZl0gPSAwO1xuICAgIHRhYmxlW25leHQgKyBodWZmXSA9ICgobGVuIC0gZHJvcCkgPDwgMjQpIHwgKDY0IDw8IDE2KSB8MDtcbiAgfVxuXG4gIC8qIHNldCByZXR1cm4gcGFyYW1ldGVycyAqL1xuICAvL29wdHMudGFibGVfaW5kZXggKz0gdXNlZDtcbiAgb3B0cy5iaXRzID0gcm9vdDtcbiAgcmV0dXJuIDA7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgMjogICAgICAnbmVlZCBkaWN0aW9uYXJ5JywgICAgIC8qIFpfTkVFRF9ESUNUICAgICAgIDIgICovXG4gIDE6ICAgICAgJ3N0cmVhbSBlbmQnLCAgICAgICAgICAvKiBaX1NUUkVBTV9FTkQgICAgICAxICAqL1xuICAwOiAgICAgICcnLCAgICAgICAgICAgICAgICAgICAgLyogWl9PSyAgICAgICAgICAgICAgMCAgKi9cbiAgJy0xJzogICAnZmlsZSBlcnJvcicsICAgICAgICAgIC8qIFpfRVJSTk8gICAgICAgICAoLTEpICovXG4gICctMic6ICAgJ3N0cmVhbSBlcnJvcicsICAgICAgICAvKiBaX1NUUkVBTV9FUlJPUiAgKC0yKSAqL1xuICAnLTMnOiAgICdkYXRhIGVycm9yJywgICAgICAgICAgLyogWl9EQVRBX0VSUk9SICAgICgtMykgKi9cbiAgJy00JzogICAnaW5zdWZmaWNpZW50IG1lbW9yeScsIC8qIFpfTUVNX0VSUk9SICAgICAoLTQpICovXG4gICctNSc6ICAgJ2J1ZmZlciBlcnJvcicsICAgICAgICAvKiBaX0JVRl9FUlJPUiAgICAgKC01KSAqL1xuICAnLTYnOiAgICdpbmNvbXBhdGlibGUgdmVyc2lvbicgLyogWl9WRVJTSU9OX0VSUk9SICgtNikgKi9cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cblxuZnVuY3Rpb24gWlN0cmVhbSgpIHtcbiAgLyogbmV4dCBpbnB1dCBieXRlICovXG4gIHRoaXMuaW5wdXQgPSBudWxsOyAvLyBKUyBzcGVjaWZpYywgYmVjYXVzZSB3ZSBoYXZlIG5vIHBvaW50ZXJzXG4gIHRoaXMubmV4dF9pbiA9IDA7XG4gIC8qIG51bWJlciBvZiBieXRlcyBhdmFpbGFibGUgYXQgaW5wdXQgKi9cbiAgdGhpcy5hdmFpbF9pbiA9IDA7XG4gIC8qIHRvdGFsIG51bWJlciBvZiBpbnB1dCBieXRlcyByZWFkIHNvIGZhciAqL1xuICB0aGlzLnRvdGFsX2luID0gMDtcbiAgLyogbmV4dCBvdXRwdXQgYnl0ZSBzaG91bGQgYmUgcHV0IHRoZXJlICovXG4gIHRoaXMub3V0cHV0ID0gbnVsbDsgLy8gSlMgc3BlY2lmaWMsIGJlY2F1c2Ugd2UgaGF2ZSBubyBwb2ludGVyc1xuICB0aGlzLm5leHRfb3V0ID0gMDtcbiAgLyogcmVtYWluaW5nIGZyZWUgc3BhY2UgYXQgb3V0cHV0ICovXG4gIHRoaXMuYXZhaWxfb3V0ID0gMDtcbiAgLyogdG90YWwgbnVtYmVyIG9mIGJ5dGVzIG91dHB1dCBzbyBmYXIgKi9cbiAgdGhpcy50b3RhbF9vdXQgPSAwO1xuICAvKiBsYXN0IGVycm9yIG1lc3NhZ2UsIE5VTEwgaWYgbm8gZXJyb3IgKi9cbiAgdGhpcy5tc2cgPSAnJy8qWl9OVUxMKi87XG4gIC8qIG5vdCB2aXNpYmxlIGJ5IGFwcGxpY2F0aW9ucyAqL1xuICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgLyogYmVzdCBndWVzcyBhYm91dCB0aGUgZGF0YSB0eXBlOiBiaW5hcnkgb3IgdGV4dCAqL1xuICB0aGlzLmRhdGFfdHlwZSA9IDIvKlpfVU5LTk9XTiovO1xuICAvKiBhZGxlcjMyIHZhbHVlIG9mIHRoZSB1bmNvbXByZXNzZWQgZGF0YSAqL1xuICB0aGlzLmFkbGVyID0gMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBaU3RyZWFtO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIi8vIHZpbTp0cz00OnN0cz00OnN3PTQ6XG4vKiFcbiAqXG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE3IEtyaXMgS293YWwgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBNSVRcbiAqIGxpY2Vuc2UgZm91bmQgYXQgaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC9xL2Jsb2IvdjEvTElDRU5TRVxuICpcbiAqIFdpdGggcGFydHMgYnkgVHlsZXIgQ2xvc2VcbiAqIENvcHlyaWdodCAyMDA3LTIwMDkgVHlsZXIgQ2xvc2UgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBNSVQgWCBsaWNlbnNlIGZvdW5kXG4gKiBhdCBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLmh0bWxcbiAqIEZvcmtlZCBhdCByZWZfc2VuZC5qcyB2ZXJzaW9uOiAyMDA5LTA1LTExXG4gKlxuICogV2l0aCBwYXJ0cyBieSBNYXJrIE1pbGxlclxuICogQ29weXJpZ2h0IChDKSAyMDExIEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKlxuICovXG5cbihmdW5jdGlvbiAoZGVmaW5pdGlvbikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLy8gVGhpcyBmaWxlIHdpbGwgZnVuY3Rpb24gcHJvcGVybHkgYXMgYSA8c2NyaXB0PiB0YWcsIG9yIGEgbW9kdWxlXG4gICAgLy8gdXNpbmcgQ29tbW9uSlMgYW5kIE5vZGVKUyBvciBSZXF1aXJlSlMgbW9kdWxlIGZvcm1hdHMuICBJblxuICAgIC8vIENvbW1vbi9Ob2RlL1JlcXVpcmVKUywgdGhlIG1vZHVsZSBleHBvcnRzIHRoZSBRIEFQSSBhbmQgd2hlblxuICAgIC8vIGV4ZWN1dGVkIGFzIGEgc2ltcGxlIDxzY3JpcHQ+LCBpdCBjcmVhdGVzIGEgUSBnbG9iYWwgaW5zdGVhZC5cblxuICAgIC8vIE1vbnRhZ2UgUmVxdWlyZVxuICAgIGlmICh0eXBlb2YgYm9vdHN0cmFwID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgYm9vdHN0cmFwKFwicHJvbWlzZVwiLCBkZWZpbml0aW9uKTtcblxuICAgIC8vIENvbW1vbkpTXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZGVmaW5pdGlvbigpO1xuXG4gICAgLy8gUmVxdWlyZUpTXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoZGVmaW5pdGlvbik7XG5cbiAgICAvLyBTRVMgKFNlY3VyZSBFY21hU2NyaXB0KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlcyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBpZiAoIXNlcy5vaygpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXMubWFrZVEgPSBkZWZpbml0aW9uO1xuICAgICAgICB9XG5cbiAgICAvLyA8c2NyaXB0PlxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAvLyBQcmVmZXIgd2luZG93IG92ZXIgc2VsZiBmb3IgYWRkLW9uIHNjcmlwdHMuIFVzZSBzZWxmIGZvclxuICAgICAgICAvLyBub24td2luZG93ZWQgY29udGV4dHMuXG4gICAgICAgIHZhciBnbG9iYWwgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogc2VsZjtcblxuICAgICAgICAvLyBHZXQgdGhlIGB3aW5kb3dgIG9iamVjdCwgc2F2ZSB0aGUgcHJldmlvdXMgUSBnbG9iYWxcbiAgICAgICAgLy8gYW5kIGluaXRpYWxpemUgUSBhcyBhIGdsb2JhbC5cbiAgICAgICAgdmFyIHByZXZpb3VzUSA9IGdsb2JhbC5RO1xuICAgICAgICBnbG9iYWwuUSA9IGRlZmluaXRpb24oKTtcblxuICAgICAgICAvLyBBZGQgYSBub0NvbmZsaWN0IGZ1bmN0aW9uIHNvIFEgY2FuIGJlIHJlbW92ZWQgZnJvbSB0aGVcbiAgICAgICAgLy8gZ2xvYmFsIG5hbWVzcGFjZS5cbiAgICAgICAgZ2xvYmFsLlEubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGdsb2JhbC5RID0gcHJldmlvdXNRO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIGVudmlyb25tZW50IHdhcyBub3QgYW50aWNpcGF0ZWQgYnkgUS4gUGxlYXNlIGZpbGUgYSBidWcuXCIpO1xuICAgIH1cblxufSkoZnVuY3Rpb24gKCkge1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBoYXNTdGFja3MgPSBmYWxzZTtcbnRyeSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCk7XG59IGNhdGNoIChlKSB7XG4gICAgaGFzU3RhY2tzID0gISFlLnN0YWNrO1xufVxuXG4vLyBBbGwgY29kZSBhZnRlciB0aGlzIHBvaW50IHdpbGwgYmUgZmlsdGVyZWQgZnJvbSBzdGFjayB0cmFjZXMgcmVwb3J0ZWRcbi8vIGJ5IFEuXG52YXIgcVN0YXJ0aW5nTGluZSA9IGNhcHR1cmVMaW5lKCk7XG52YXIgcUZpbGVOYW1lO1xuXG4vLyBzaGltc1xuXG4vLyB1c2VkIGZvciBmYWxsYmFjayBpbiBcImFsbFJlc29sdmVkXCJcbnZhciBub29wID0gZnVuY3Rpb24gKCkge307XG5cbi8vIFVzZSB0aGUgZmFzdGVzdCBwb3NzaWJsZSBtZWFucyB0byBleGVjdXRlIGEgdGFzayBpbiBhIGZ1dHVyZSB0dXJuXG4vLyBvZiB0aGUgZXZlbnQgbG9vcC5cbnZhciBuZXh0VGljayA9KGZ1bmN0aW9uICgpIHtcbiAgICAvLyBsaW5rZWQgbGlzdCBvZiB0YXNrcyAoc2luZ2xlLCB3aXRoIGhlYWQgbm9kZSlcbiAgICB2YXIgaGVhZCA9IHt0YXNrOiB2b2lkIDAsIG5leHQ6IG51bGx9O1xuICAgIHZhciB0YWlsID0gaGVhZDtcbiAgICB2YXIgZmx1c2hpbmcgPSBmYWxzZTtcbiAgICB2YXIgcmVxdWVzdFRpY2sgPSB2b2lkIDA7XG4gICAgdmFyIGlzTm9kZUpTID0gZmFsc2U7XG4gICAgLy8gcXVldWUgZm9yIGxhdGUgdGFza3MsIHVzZWQgYnkgdW5oYW5kbGVkIHJlamVjdGlvbiB0cmFja2luZ1xuICAgIHZhciBsYXRlclF1ZXVlID0gW107XG5cbiAgICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgICAgLyoganNoaW50IGxvb3BmdW5jOiB0cnVlICovXG4gICAgICAgIHZhciB0YXNrLCBkb21haW47XG5cbiAgICAgICAgd2hpbGUgKGhlYWQubmV4dCkge1xuICAgICAgICAgICAgaGVhZCA9IGhlYWQubmV4dDtcbiAgICAgICAgICAgIHRhc2sgPSBoZWFkLnRhc2s7XG4gICAgICAgICAgICBoZWFkLnRhc2sgPSB2b2lkIDA7XG4gICAgICAgICAgICBkb21haW4gPSBoZWFkLmRvbWFpbjtcblxuICAgICAgICAgICAgaWYgKGRvbWFpbikge1xuICAgICAgICAgICAgICAgIGhlYWQuZG9tYWluID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGRvbWFpbi5lbnRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuU2luZ2xlKHRhc2ssIGRvbWFpbik7XG5cbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAobGF0ZXJRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRhc2sgPSBsYXRlclF1ZXVlLnBvcCgpO1xuICAgICAgICAgICAgcnVuU2luZ2xlKHRhc2spO1xuICAgICAgICB9XG4gICAgICAgIGZsdXNoaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIHJ1bnMgYSBzaW5nbGUgZnVuY3Rpb24gaW4gdGhlIGFzeW5jIHF1ZXVlXG4gICAgZnVuY3Rpb24gcnVuU2luZ2xlKHRhc2ssIGRvbWFpbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGFzaygpO1xuXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChpc05vZGVKUykge1xuICAgICAgICAgICAgICAgIC8vIEluIG5vZGUsIHVuY2F1Z2h0IGV4Y2VwdGlvbnMgYXJlIGNvbnNpZGVyZWQgZmF0YWwgZXJyb3JzLlxuICAgICAgICAgICAgICAgIC8vIFJlLXRocm93IHRoZW0gc3luY2hyb25vdXNseSB0byBpbnRlcnJ1cHQgZmx1c2hpbmchXG5cbiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgY29udGludWF0aW9uIGlmIHRoZSB1bmNhdWdodCBleGNlcHRpb24gaXMgc3VwcHJlc3NlZFxuICAgICAgICAgICAgICAgIC8vIGxpc3RlbmluZyBcInVuY2F1Z2h0RXhjZXB0aW9uXCIgZXZlbnRzIChhcyBkb21haW5zIGRvZXMpLlxuICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIGluIG5leHQgZXZlbnQgdG8gYXZvaWQgdGljayByZWN1cnNpb24uXG4gICAgICAgICAgICAgICAgaWYgKGRvbWFpbikge1xuICAgICAgICAgICAgICAgICAgICBkb21haW4uZXhpdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZsdXNoLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbWFpbi5lbnRlcigpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRocm93IGU7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSW4gYnJvd3NlcnMsIHVuY2F1Z2h0IGV4Y2VwdGlvbnMgYXJlIG5vdCBmYXRhbC5cbiAgICAgICAgICAgICAgICAvLyBSZS10aHJvdyB0aGVtIGFzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHNsb3ctZG93bnMuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgICAgICBkb21haW4uZXhpdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmV4dFRpY2sgPSBmdW5jdGlvbiAodGFzaykge1xuICAgICAgICB0YWlsID0gdGFpbC5uZXh0ID0ge1xuICAgICAgICAgICAgdGFzazogdGFzayxcbiAgICAgICAgICAgIGRvbWFpbjogaXNOb2RlSlMgJiYgcHJvY2Vzcy5kb21haW4sXG4gICAgICAgICAgICBuZXh0OiBudWxsXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCFmbHVzaGluZykge1xuICAgICAgICAgICAgZmx1c2hpbmcgPSB0cnVlO1xuICAgICAgICAgICAgcmVxdWVzdFRpY2soKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgcHJvY2Vzcy50b1N0cmluZygpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIiAmJiBwcm9jZXNzLm5leHRUaWNrKSB7XG4gICAgICAgIC8vIEVuc3VyZSBRIGlzIGluIGEgcmVhbCBOb2RlIGVudmlyb25tZW50LCB3aXRoIGEgYHByb2Nlc3MubmV4dFRpY2tgLlxuICAgICAgICAvLyBUbyBzZWUgdGhyb3VnaCBmYWtlIE5vZGUgZW52aXJvbm1lbnRzOlxuICAgICAgICAvLyAqIE1vY2hhIHRlc3QgcnVubmVyIC0gZXhwb3NlcyBhIGBwcm9jZXNzYCBnbG9iYWwgd2l0aG91dCBhIGBuZXh0VGlja2BcbiAgICAgICAgLy8gKiBCcm93c2VyaWZ5IC0gZXhwb3NlcyBhIGBwcm9jZXNzLm5leFRpY2tgIGZ1bmN0aW9uIHRoYXQgdXNlc1xuICAgICAgICAvLyAgIGBzZXRUaW1lb3V0YC4gSW4gdGhpcyBjYXNlIGBzZXRJbW1lZGlhdGVgIGlzIHByZWZlcnJlZCBiZWNhdXNlXG4gICAgICAgIC8vICAgIGl0IGlzIGZhc3Rlci4gQnJvd3NlcmlmeSdzIGBwcm9jZXNzLnRvU3RyaW5nKClgIHlpZWxkc1xuICAgICAgICAvLyAgIFwiW29iamVjdCBPYmplY3RdXCIsIHdoaWxlIGluIGEgcmVhbCBOb2RlIGVudmlyb25tZW50XG4gICAgICAgIC8vICAgYHByb2Nlc3MudG9TdHJpbmcoKWAgeWllbGRzIFwiW29iamVjdCBwcm9jZXNzXVwiLlxuICAgICAgICBpc05vZGVKUyA9IHRydWU7XG5cbiAgICAgICAgcmVxdWVzdFRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcbiAgICAgICAgfTtcblxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIC8vIEluIElFMTAsIE5vZGUuanMgMC45Kywgb3IgaHR0cHM6Ly9naXRodWIuY29tL05vYmxlSlMvc2V0SW1tZWRpYXRlXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXF1ZXN0VGljayA9IHNldEltbWVkaWF0ZS5iaW5kKHdpbmRvdywgZmx1c2gpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVxdWVzdFRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2V0SW1tZWRpYXRlKGZsdXNoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAodHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIC8vIG1vZGVybiBicm93c2Vyc1xuICAgICAgICAvLyBodHRwOi8vd3d3Lm5vbmJsb2NraW5nLmlvLzIwMTEvMDYvd2luZG93bmV4dHRpY2suaHRtbFxuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICAvLyBBdCBsZWFzdCBTYWZhcmkgVmVyc2lvbiA2LjAuNSAoODUzNi4zMC4xKSBpbnRlcm1pdHRlbnRseSBjYW5ub3QgY3JlYXRlXG4gICAgICAgIC8vIHdvcmtpbmcgbWVzc2FnZSBwb3J0cyB0aGUgZmlyc3QgdGltZSBhIHBhZ2UgbG9hZHMuXG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVxdWVzdFRpY2sgPSByZXF1ZXN0UG9ydFRpY2s7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoO1xuICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHJlcXVlc3RQb3J0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIE9wZXJhIHJlcXVpcmVzIHVzIHRvIHByb3ZpZGUgYSBtZXNzYWdlIHBheWxvYWQsIHJlZ2FyZGxlc3Mgb2ZcbiAgICAgICAgICAgIC8vIHdoZXRoZXIgd2UgdXNlIGl0LlxuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdFRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZsdXNoLCAwKTtcbiAgICAgICAgICAgIHJlcXVlc3RQb3J0VGljaygpO1xuICAgICAgICB9O1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gb2xkIGJyb3dzZXJzXG4gICAgICAgIHJlcXVlc3RUaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmbHVzaCwgMCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIHJ1bnMgYSB0YXNrIGFmdGVyIGFsbCBvdGhlciB0YXNrcyBoYXZlIGJlZW4gcnVuXG4gICAgLy8gdGhpcyBpcyB1c2VmdWwgZm9yIHVuaGFuZGxlZCByZWplY3Rpb24gdHJhY2tpbmcgdGhhdCBuZWVkcyB0byBoYXBwZW5cbiAgICAvLyBhZnRlciBhbGwgYHRoZW5gZCB0YXNrcyBoYXZlIGJlZW4gcnVuLlxuICAgIG5leHRUaWNrLnJ1bkFmdGVyID0gZnVuY3Rpb24gKHRhc2spIHtcbiAgICAgICAgbGF0ZXJRdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgICBpZiAoIWZsdXNoaW5nKSB7XG4gICAgICAgICAgICBmbHVzaGluZyA9IHRydWU7XG4gICAgICAgICAgICByZXF1ZXN0VGljaygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gbmV4dFRpY2s7XG59KSgpO1xuXG4vLyBBdHRlbXB0IHRvIG1ha2UgZ2VuZXJpY3Mgc2FmZSBpbiB0aGUgZmFjZSBvZiBkb3duc3RyZWFtXG4vLyBtb2RpZmljYXRpb25zLlxuLy8gVGhlcmUgaXMgbm8gc2l0dWF0aW9uIHdoZXJlIHRoaXMgaXMgbmVjZXNzYXJ5LlxuLy8gSWYgeW91IG5lZWQgYSBzZWN1cml0eSBndWFyYW50ZWUsIHRoZXNlIHByaW1vcmRpYWxzIG5lZWQgdG8gYmVcbi8vIGRlZXBseSBmcm96ZW4gYW55d2F5LCBhbmQgaWYgeW91IGRvbuKAmXQgbmVlZCBhIHNlY3VyaXR5IGd1YXJhbnRlZSxcbi8vIHRoaXMgaXMganVzdCBwbGFpbiBwYXJhbm9pZC5cbi8vIEhvd2V2ZXIsIHRoaXMgKiptaWdodCoqIGhhdmUgdGhlIG5pY2Ugc2lkZS1lZmZlY3Qgb2YgcmVkdWNpbmcgdGhlIHNpemUgb2Zcbi8vIHRoZSBtaW5pZmllZCBjb2RlIGJ5IHJlZHVjaW5nIHguY2FsbCgpIHRvIG1lcmVseSB4KClcbi8vIFNlZSBNYXJrIE1pbGxlcuKAmXMgZXhwbGFuYXRpb24gb2Ygd2hhdCB0aGlzIGRvZXMuXG4vLyBodHRwOi8vd2lraS5lY21hc2NyaXB0Lm9yZy9kb2t1LnBocD9pZD1jb252ZW50aW9uczpzYWZlX21ldGFfcHJvZ3JhbW1pbmdcbnZhciBjYWxsID0gRnVuY3Rpb24uY2FsbDtcbmZ1bmN0aW9uIHVuY3VycnlUaGlzKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2FsbC5hcHBseShmLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG4vLyBUaGlzIGlzIGVxdWl2YWxlbnQsIGJ1dCBzbG93ZXI6XG4vLyB1bmN1cnJ5VGhpcyA9IEZ1bmN0aW9uX2JpbmQuYmluZChGdW5jdGlvbl9iaW5kLmNhbGwpO1xuLy8gaHR0cDovL2pzcGVyZi5jb20vdW5jdXJyeXRoaXNcblxudmFyIGFycmF5X3NsaWNlID0gdW5jdXJyeVRoaXMoQXJyYXkucHJvdG90eXBlLnNsaWNlKTtcblxudmFyIGFycmF5X3JlZHVjZSA9IHVuY3VycnlUaGlzKFxuICAgIEFycmF5LnByb3RvdHlwZS5yZWR1Y2UgfHwgZnVuY3Rpb24gKGNhbGxiYWNrLCBiYXNpcykge1xuICAgICAgICB2YXIgaW5kZXggPSAwLFxuICAgICAgICAgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIC8vIGNvbmNlcm5pbmcgdGhlIGluaXRpYWwgdmFsdWUsIGlmIG9uZSBpcyBub3QgcHJvdmlkZWRcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIC8vIHNlZWsgdG8gdGhlIGZpcnN0IHZhbHVlIGluIHRoZSBhcnJheSwgYWNjb3VudGluZ1xuICAgICAgICAgICAgLy8gZm9yIHRoZSBwb3NzaWJpbGl0eSB0aGF0IGlzIGlzIGEgc3BhcnNlIGFycmF5XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IGluIHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzaXMgPSB0aGlzW2luZGV4KytdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCsraW5kZXggPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICgxKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWR1Y2VcbiAgICAgICAgZm9yICg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAvLyBhY2NvdW50IGZvciB0aGUgcG9zc2liaWxpdHkgdGhhdCB0aGUgYXJyYXkgaXMgc3BhcnNlXG4gICAgICAgICAgICBpZiAoaW5kZXggaW4gdGhpcykge1xuICAgICAgICAgICAgICAgIGJhc2lzID0gY2FsbGJhY2soYmFzaXMsIHRoaXNbaW5kZXhdLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhc2lzO1xuICAgIH1cbik7XG5cbnZhciBhcnJheV9pbmRleE9mID0gdW5jdXJyeVRoaXMoXG4gICAgQXJyYXkucHJvdG90eXBlLmluZGV4T2YgfHwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIC8vIG5vdCBhIHZlcnkgZ29vZCBzaGltLCBidXQgZ29vZCBlbm91Z2ggZm9yIG91ciBvbmUgdXNlIG9mIGl0XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXNbaV0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbik7XG5cbnZhciBhcnJheV9tYXAgPSB1bmN1cnJ5VGhpcyhcbiAgICBBcnJheS5wcm90b3R5cGUubWFwIHx8IGZ1bmN0aW9uIChjYWxsYmFjaywgdGhpc3ApIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgY29sbGVjdCA9IFtdO1xuICAgICAgICBhcnJheV9yZWR1Y2Uoc2VsZiwgZnVuY3Rpb24gKHVuZGVmaW5lZCwgdmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICBjb2xsZWN0LnB1c2goY2FsbGJhY2suY2FsbCh0aGlzcCwgdmFsdWUsIGluZGV4LCBzZWxmKSk7XG4gICAgICAgIH0sIHZvaWQgMCk7XG4gICAgICAgIHJldHVybiBjb2xsZWN0O1xuICAgIH1cbik7XG5cbnZhciBvYmplY3RfY3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiAocHJvdG90eXBlKSB7XG4gICAgZnVuY3Rpb24gVHlwZSgpIHsgfVxuICAgIFR5cGUucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICAgIHJldHVybiBuZXcgVHlwZSgpO1xufTtcblxudmFyIG9iamVjdF9kZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB8fCBmdW5jdGlvbiAob2JqLCBwcm9wLCBkZXNjcmlwdG9yKSB7XG4gICAgb2JqW3Byb3BdID0gZGVzY3JpcHRvci52YWx1ZTtcbiAgICByZXR1cm4gb2JqO1xufTtcblxudmFyIG9iamVjdF9oYXNPd25Qcm9wZXJ0eSA9IHVuY3VycnlUaGlzKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkpO1xuXG52YXIgb2JqZWN0X2tleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgIGlmIChvYmplY3RfaGFzT3duUHJvcGVydHkob2JqZWN0LCBrZXkpKSB7XG4gICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5cztcbn07XG5cbnZhciBvYmplY3RfdG9TdHJpbmcgPSB1bmN1cnJ5VGhpcyhPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKTtcblxuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IE9iamVjdCh2YWx1ZSk7XG59XG5cbi8vIGdlbmVyYXRvciByZWxhdGVkIHNoaW1zXG5cbi8vIEZJWE1FOiBSZW1vdmUgdGhpcyBmdW5jdGlvbiBvbmNlIEVTNiBnZW5lcmF0b3JzIGFyZSBpbiBTcGlkZXJNb25rZXkuXG5mdW5jdGlvbiBpc1N0b3BJdGVyYXRpb24oZXhjZXB0aW9uKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgb2JqZWN0X3RvU3RyaW5nKGV4Y2VwdGlvbikgPT09IFwiW29iamVjdCBTdG9wSXRlcmF0aW9uXVwiIHx8XG4gICAgICAgIGV4Y2VwdGlvbiBpbnN0YW5jZW9mIFFSZXR1cm5WYWx1ZVxuICAgICk7XG59XG5cbi8vIEZJWE1FOiBSZW1vdmUgdGhpcyBoZWxwZXIgYW5kIFEucmV0dXJuIG9uY2UgRVM2IGdlbmVyYXRvcnMgYXJlIGluXG4vLyBTcGlkZXJNb25rZXkuXG52YXIgUVJldHVyblZhbHVlO1xuaWYgKHR5cGVvZiBSZXR1cm5WYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIFFSZXR1cm5WYWx1ZSA9IFJldHVyblZhbHVlO1xufSBlbHNlIHtcbiAgICBRUmV0dXJuVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH07XG59XG5cbi8vIGxvbmcgc3RhY2sgdHJhY2VzXG5cbnZhciBTVEFDS19KVU1QX1NFUEFSQVRPUiA9IFwiRnJvbSBwcmV2aW91cyBldmVudDpcIjtcblxuZnVuY3Rpb24gbWFrZVN0YWNrVHJhY2VMb25nKGVycm9yLCBwcm9taXNlKSB7XG4gICAgLy8gSWYgcG9zc2libGUsIHRyYW5zZm9ybSB0aGUgZXJyb3Igc3RhY2sgdHJhY2UgYnkgcmVtb3ZpbmcgTm9kZSBhbmQgUVxuICAgIC8vIGNydWZ0LCB0aGVuIGNvbmNhdGVuYXRpbmcgd2l0aCB0aGUgc3RhY2sgdHJhY2Ugb2YgYHByb21pc2VgLiBTZWUgIzU3LlxuICAgIGlmIChoYXNTdGFja3MgJiZcbiAgICAgICAgcHJvbWlzZS5zdGFjayAmJlxuICAgICAgICB0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgZXJyb3IgIT09IG51bGwgJiZcbiAgICAgICAgZXJyb3Iuc3RhY2tcbiAgICApIHtcbiAgICAgICAgdmFyIHN0YWNrcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBwID0gcHJvbWlzZTsgISFwOyBwID0gcC5zb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChwLnN0YWNrICYmICghZXJyb3IuX19taW5pbXVtU3RhY2tDb3VudGVyX18gfHwgZXJyb3IuX19taW5pbXVtU3RhY2tDb3VudGVyX18gPiBwLnN0YWNrQ291bnRlcikpIHtcbiAgICAgICAgICAgICAgICBvYmplY3RfZGVmaW5lUHJvcGVydHkoZXJyb3IsIFwiX19taW5pbXVtU3RhY2tDb3VudGVyX19cIiwge3ZhbHVlOiBwLnN0YWNrQ291bnRlciwgY29uZmlndXJhYmxlOiB0cnVlfSk7XG4gICAgICAgICAgICAgICAgc3RhY2tzLnVuc2hpZnQocC5zdGFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhY2tzLnVuc2hpZnQoZXJyb3Iuc3RhY2spO1xuXG4gICAgICAgIHZhciBjb25jYXRlZFN0YWNrcyA9IHN0YWNrcy5qb2luKFwiXFxuXCIgKyBTVEFDS19KVU1QX1NFUEFSQVRPUiArIFwiXFxuXCIpO1xuICAgICAgICB2YXIgc3RhY2sgPSBmaWx0ZXJTdGFja1N0cmluZyhjb25jYXRlZFN0YWNrcyk7XG4gICAgICAgIG9iamVjdF9kZWZpbmVQcm9wZXJ0eShlcnJvciwgXCJzdGFja1wiLCB7dmFsdWU6IHN0YWNrLCBjb25maWd1cmFibGU6IHRydWV9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZpbHRlclN0YWNrU3RyaW5nKHN0YWNrU3RyaW5nKSB7XG4gICAgdmFyIGxpbmVzID0gc3RhY2tTdHJpbmcuc3BsaXQoXCJcXG5cIik7XG4gICAgdmFyIGRlc2lyZWRMaW5lcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBsaW5lc1tpXTtcblxuICAgICAgICBpZiAoIWlzSW50ZXJuYWxGcmFtZShsaW5lKSAmJiAhaXNOb2RlRnJhbWUobGluZSkgJiYgbGluZSkge1xuICAgICAgICAgICAgZGVzaXJlZExpbmVzLnB1c2gobGluZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlc2lyZWRMaW5lcy5qb2luKFwiXFxuXCIpO1xufVxuXG5mdW5jdGlvbiBpc05vZGVGcmFtZShzdGFja0xpbmUpIHtcbiAgICByZXR1cm4gc3RhY2tMaW5lLmluZGV4T2YoXCIobW9kdWxlLmpzOlwiKSAhPT0gLTEgfHxcbiAgICAgICAgICAgc3RhY2tMaW5lLmluZGV4T2YoXCIobm9kZS5qczpcIikgIT09IC0xO1xufVxuXG5mdW5jdGlvbiBnZXRGaWxlTmFtZUFuZExpbmVOdW1iZXIoc3RhY2tMaW5lKSB7XG4gICAgLy8gTmFtZWQgZnVuY3Rpb25zOiBcImF0IGZ1bmN0aW9uTmFtZSAoZmlsZW5hbWU6bGluZU51bWJlcjpjb2x1bW5OdW1iZXIpXCJcbiAgICAvLyBJbiBJRTEwIGZ1bmN0aW9uIG5hbWUgY2FuIGhhdmUgc3BhY2VzIChcIkFub255bW91cyBmdW5jdGlvblwiKSBPX29cbiAgICB2YXIgYXR0ZW1wdDEgPSAvYXQgLisgXFwoKC4rKTooXFxkKyk6KD86XFxkKylcXCkkLy5leGVjKHN0YWNrTGluZSk7XG4gICAgaWYgKGF0dGVtcHQxKSB7XG4gICAgICAgIHJldHVybiBbYXR0ZW1wdDFbMV0sIE51bWJlcihhdHRlbXB0MVsyXSldO1xuICAgIH1cblxuICAgIC8vIEFub255bW91cyBmdW5jdGlvbnM6IFwiYXQgZmlsZW5hbWU6bGluZU51bWJlcjpjb2x1bW5OdW1iZXJcIlxuICAgIHZhciBhdHRlbXB0MiA9IC9hdCAoW14gXSspOihcXGQrKTooPzpcXGQrKSQvLmV4ZWMoc3RhY2tMaW5lKTtcbiAgICBpZiAoYXR0ZW1wdDIpIHtcbiAgICAgICAgcmV0dXJuIFthdHRlbXB0MlsxXSwgTnVtYmVyKGF0dGVtcHQyWzJdKV07XG4gICAgfVxuXG4gICAgLy8gRmlyZWZveCBzdHlsZTogXCJmdW5jdGlvbkBmaWxlbmFtZTpsaW5lTnVtYmVyIG9yIEBmaWxlbmFtZTpsaW5lTnVtYmVyXCJcbiAgICB2YXIgYXR0ZW1wdDMgPSAvLipAKC4rKTooXFxkKykkLy5leGVjKHN0YWNrTGluZSk7XG4gICAgaWYgKGF0dGVtcHQzKSB7XG4gICAgICAgIHJldHVybiBbYXR0ZW1wdDNbMV0sIE51bWJlcihhdHRlbXB0M1syXSldO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNJbnRlcm5hbEZyYW1lKHN0YWNrTGluZSkge1xuICAgIHZhciBmaWxlTmFtZUFuZExpbmVOdW1iZXIgPSBnZXRGaWxlTmFtZUFuZExpbmVOdW1iZXIoc3RhY2tMaW5lKTtcblxuICAgIGlmICghZmlsZU5hbWVBbmRMaW5lTnVtYmVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgZmlsZU5hbWUgPSBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMF07XG4gICAgdmFyIGxpbmVOdW1iZXIgPSBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMV07XG5cbiAgICByZXR1cm4gZmlsZU5hbWUgPT09IHFGaWxlTmFtZSAmJlxuICAgICAgICBsaW5lTnVtYmVyID49IHFTdGFydGluZ0xpbmUgJiZcbiAgICAgICAgbGluZU51bWJlciA8PSBxRW5kaW5nTGluZTtcbn1cblxuLy8gZGlzY292ZXIgb3duIGZpbGUgbmFtZSBhbmQgbGluZSBudW1iZXIgcmFuZ2UgZm9yIGZpbHRlcmluZyBzdGFja1xuLy8gdHJhY2VzXG5mdW5jdGlvbiBjYXB0dXJlTGluZSgpIHtcbiAgICBpZiAoIWhhc1N0YWNrcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB2YXIgbGluZXMgPSBlLnN0YWNrLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICB2YXIgZmlyc3RMaW5lID0gbGluZXNbMF0uaW5kZXhPZihcIkBcIikgPiAwID8gbGluZXNbMV0gOiBsaW5lc1syXTtcbiAgICAgICAgdmFyIGZpbGVOYW1lQW5kTGluZU51bWJlciA9IGdldEZpbGVOYW1lQW5kTGluZU51bWJlcihmaXJzdExpbmUpO1xuICAgICAgICBpZiAoIWZpbGVOYW1lQW5kTGluZU51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcUZpbGVOYW1lID0gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzBdO1xuICAgICAgICByZXR1cm4gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzFdO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVwcmVjYXRlKGNhbGxiYWNrLCBuYW1lLCBhbHRlcm5hdGl2ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUud2FybiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4obmFtZSArIFwiIGlzIGRlcHJlY2F0ZWQsIHVzZSBcIiArIGFsdGVybmF0aXZlICtcbiAgICAgICAgICAgICAgICAgICAgICAgICBcIiBpbnN0ZWFkLlwiLCBuZXcgRXJyb3IoXCJcIikuc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseShjYWxsYmFjaywgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuXG4vLyBlbmQgb2Ygc2hpbXNcbi8vIGJlZ2lubmluZyBvZiByZWFsIHdvcmtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgcHJvbWlzZSBmb3IgYW4gaW1tZWRpYXRlIHJlZmVyZW5jZSwgcGFzc2VzIHByb21pc2VzIHRocm91Z2gsIG9yXG4gKiBjb2VyY2VzIHByb21pc2VzIGZyb20gZGlmZmVyZW50IHN5c3RlbXMuXG4gKiBAcGFyYW0gdmFsdWUgaW1tZWRpYXRlIHJlZmVyZW5jZSBvciBwcm9taXNlXG4gKi9cbmZ1bmN0aW9uIFEodmFsdWUpIHtcbiAgICAvLyBJZiB0aGUgb2JqZWN0IGlzIGFscmVhZHkgYSBQcm9taXNlLCByZXR1cm4gaXQgZGlyZWN0bHkuICBUaGlzIGVuYWJsZXNcbiAgICAvLyB0aGUgcmVzb2x2ZSBmdW5jdGlvbiB0byBib3RoIGJlIHVzZWQgdG8gY3JlYXRlZCByZWZlcmVuY2VzIGZyb20gb2JqZWN0cyxcbiAgICAvLyBidXQgdG8gdG9sZXJhYmx5IGNvZXJjZSBub24tcHJvbWlzZXMgdG8gcHJvbWlzZXMuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgLy8gYXNzaW1pbGF0ZSB0aGVuYWJsZXNcbiAgICBpZiAoaXNQcm9taXNlQWxpa2UodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBjb2VyY2UodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmdWxmaWxsKHZhbHVlKTtcbiAgICB9XG59XG5RLnJlc29sdmUgPSBRO1xuXG4vKipcbiAqIFBlcmZvcm1zIGEgdGFzayBpbiBhIGZ1dHVyZSB0dXJuIG9mIHRoZSBldmVudCBsb29wLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gdGFza1xuICovXG5RLm5leHRUaWNrID0gbmV4dFRpY2s7XG5cbi8qKlxuICogQ29udHJvbHMgd2hldGhlciBvciBub3QgbG9uZyBzdGFjayB0cmFjZXMgd2lsbCBiZSBvblxuICovXG5RLmxvbmdTdGFja1N1cHBvcnQgPSBmYWxzZTtcblxuLyoqXG4gKiBUaGUgY291bnRlciBpcyB1c2VkIHRvIGRldGVybWluZSB0aGUgc3RvcHBpbmcgcG9pbnQgZm9yIGJ1aWxkaW5nXG4gKiBsb25nIHN0YWNrIHRyYWNlcy4gSW4gbWFrZVN0YWNrVHJhY2VMb25nIHdlIHdhbGsgYmFja3dhcmRzIHRocm91Z2hcbiAqIHRoZSBsaW5rZWQgbGlzdCBvZiBwcm9taXNlcywgb25seSBzdGFja3Mgd2hpY2ggd2VyZSBjcmVhdGVkIGJlZm9yZVxuICogdGhlIHJlamVjdGlvbiBhcmUgY29uY2F0ZW5hdGVkLlxuICovXG52YXIgbG9uZ1N0YWNrQ291bnRlciA9IDE7XG5cbi8vIGVuYWJsZSBsb25nIHN0YWNrcyBpZiBRX0RFQlVHIGlzIHNldFxuaWYgKHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmIHByb2Nlc3MgJiYgcHJvY2Vzcy5lbnYgJiYgcHJvY2Vzcy5lbnYuUV9ERUJVRykge1xuICAgIFEubG9uZ1N0YWNrU3VwcG9ydCA9IHRydWU7XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIHtwcm9taXNlLCByZXNvbHZlLCByZWplY3R9IG9iamVjdC5cbiAqXG4gKiBgcmVzb2x2ZWAgaXMgYSBjYWxsYmFjayB0byBpbnZva2Ugd2l0aCBhIG1vcmUgcmVzb2x2ZWQgdmFsdWUgZm9yIHRoZVxuICogcHJvbWlzZS4gVG8gZnVsZmlsbCB0aGUgcHJvbWlzZSwgaW52b2tlIGByZXNvbHZlYCB3aXRoIGFueSB2YWx1ZSB0aGF0IGlzXG4gKiBub3QgYSB0aGVuYWJsZS4gVG8gcmVqZWN0IHRoZSBwcm9taXNlLCBpbnZva2UgYHJlc29sdmVgIHdpdGggYSByZWplY3RlZFxuICogdGhlbmFibGUsIG9yIGludm9rZSBgcmVqZWN0YCB3aXRoIHRoZSByZWFzb24gZGlyZWN0bHkuIFRvIHJlc29sdmUgdGhlXG4gKiBwcm9taXNlIHRvIGFub3RoZXIgdGhlbmFibGUsIHRodXMgcHV0dGluZyBpdCBpbiB0aGUgc2FtZSBzdGF0ZSwgaW52b2tlXG4gKiBgcmVzb2x2ZWAgd2l0aCB0aGF0IG90aGVyIHRoZW5hYmxlLlxuICovXG5RLmRlZmVyID0gZGVmZXI7XG5mdW5jdGlvbiBkZWZlcigpIHtcbiAgICAvLyBpZiBcIm1lc3NhZ2VzXCIgaXMgYW4gXCJBcnJheVwiLCB0aGF0IGluZGljYXRlcyB0aGF0IHRoZSBwcm9taXNlIGhhcyBub3QgeWV0XG4gICAgLy8gYmVlbiByZXNvbHZlZC4gIElmIGl0IGlzIFwidW5kZWZpbmVkXCIsIGl0IGhhcyBiZWVuIHJlc29sdmVkLiAgRWFjaFxuICAgIC8vIGVsZW1lbnQgb2YgdGhlIG1lc3NhZ2VzIGFycmF5IGlzIGl0c2VsZiBhbiBhcnJheSBvZiBjb21wbGV0ZSBhcmd1bWVudHMgdG9cbiAgICAvLyBmb3J3YXJkIHRvIHRoZSByZXNvbHZlZCBwcm9taXNlLiAgV2UgY29lcmNlIHRoZSByZXNvbHV0aW9uIHZhbHVlIHRvIGFcbiAgICAvLyBwcm9taXNlIHVzaW5nIHRoZSBgcmVzb2x2ZWAgZnVuY3Rpb24gYmVjYXVzZSBpdCBoYW5kbGVzIGJvdGggZnVsbHlcbiAgICAvLyBub24tdGhlbmFibGUgdmFsdWVzIGFuZCBvdGhlciB0aGVuYWJsZXMgZ3JhY2VmdWxseS5cbiAgICB2YXIgbWVzc2FnZXMgPSBbXSwgcHJvZ3Jlc3NMaXN0ZW5lcnMgPSBbXSwgcmVzb2x2ZWRQcm9taXNlO1xuXG4gICAgdmFyIGRlZmVycmVkID0gb2JqZWN0X2NyZWF0ZShkZWZlci5wcm90b3R5cGUpO1xuICAgIHZhciBwcm9taXNlID0gb2JqZWN0X2NyZWF0ZShQcm9taXNlLnByb3RvdHlwZSk7XG5cbiAgICBwcm9taXNlLnByb21pc2VEaXNwYXRjaCA9IGZ1bmN0aW9uIChyZXNvbHZlLCBvcCwgb3BlcmFuZHMpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMpO1xuICAgICAgICBpZiAobWVzc2FnZXMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goYXJncyk7XG4gICAgICAgICAgICBpZiAob3AgPT09IFwid2hlblwiICYmIG9wZXJhbmRzWzFdKSB7IC8vIHByb2dyZXNzIG9wZXJhbmRcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0xpc3RlbmVycy5wdXNoKG9wZXJhbmRzWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmVkUHJvbWlzZS5wcm9taXNlRGlzcGF0Y2guYXBwbHkocmVzb2x2ZWRQcm9taXNlLCBhcmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIFhYWCBkZXByZWNhdGVkXG4gICAgcHJvbWlzZS52YWx1ZU9mID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAobWVzc2FnZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZWFyZXJWYWx1ZSA9IG5lYXJlcihyZXNvbHZlZFByb21pc2UpO1xuICAgICAgICBpZiAoaXNQcm9taXNlKG5lYXJlclZhbHVlKSkge1xuICAgICAgICAgICAgcmVzb2x2ZWRQcm9taXNlID0gbmVhcmVyVmFsdWU7IC8vIHNob3J0ZW4gY2hhaW5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmVhcmVyVmFsdWU7XG4gICAgfTtcblxuICAgIHByb21pc2UuaW5zcGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFyZXNvbHZlZFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHN0YXRlOiBcInBlbmRpbmdcIiB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvbHZlZFByb21pc2UuaW5zcGVjdCgpO1xuICAgIH07XG5cbiAgICBpZiAoUS5sb25nU3RhY2tTdXBwb3J0ICYmIGhhc1N0YWNrcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IGRvbid0IHRyeSB0byB1c2UgYEVycm9yLmNhcHR1cmVTdGFja1RyYWNlYCBvciB0cmFuc2ZlciB0aGVcbiAgICAgICAgICAgIC8vIGFjY2Vzc29yIGFyb3VuZDsgdGhhdCBjYXVzZXMgbWVtb3J5IGxlYWtzIGFzIHBlciBHSC0xMTEuIEp1c3RcbiAgICAgICAgICAgIC8vIHJlaWZ5IHRoZSBzdGFjayB0cmFjZSBhcyBhIHN0cmluZyBBU0FQLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEF0IHRoZSBzYW1lIHRpbWUsIGN1dCBvZmYgdGhlIGZpcnN0IGxpbmU7IGl0J3MgYWx3YXlzIGp1c3RcbiAgICAgICAgICAgIC8vIFwiW29iamVjdCBQcm9taXNlXVxcblwiLCBhcyBwZXIgdGhlIGB0b1N0cmluZ2AuXG4gICAgICAgICAgICBwcm9taXNlLnN0YWNrID0gZS5zdGFjay5zdWJzdHJpbmcoZS5zdGFjay5pbmRleE9mKFwiXFxuXCIpICsgMSk7XG4gICAgICAgICAgICBwcm9taXNlLnN0YWNrQ291bnRlciA9IGxvbmdTdGFja0NvdW50ZXIrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5PVEU6IHdlIGRvIHRoZSBjaGVja3MgZm9yIGByZXNvbHZlZFByb21pc2VgIGluIGVhY2ggbWV0aG9kLCBpbnN0ZWFkIG9mXG4gICAgLy8gY29uc29saWRhdGluZyB0aGVtIGludG8gYGJlY29tZWAsIHNpbmNlIG90aGVyd2lzZSB3ZSdkIGNyZWF0ZSBuZXdcbiAgICAvLyBwcm9taXNlcyB3aXRoIHRoZSBsaW5lcyBgYmVjb21lKHdoYXRldmVyKHZhbHVlKSlgLiBTZWUgZS5nLiBHSC0yNTIuXG5cbiAgICBmdW5jdGlvbiBiZWNvbWUobmV3UHJvbWlzZSkge1xuICAgICAgICByZXNvbHZlZFByb21pc2UgPSBuZXdQcm9taXNlO1xuXG4gICAgICAgIGlmIChRLmxvbmdTdGFja1N1cHBvcnQgJiYgaGFzU3RhY2tzKSB7XG4gICAgICAgICAgICAvLyBPbmx5IGhvbGQgYSByZWZlcmVuY2UgdG8gdGhlIG5ldyBwcm9taXNlIGlmIGxvbmcgc3RhY2tzXG4gICAgICAgICAgICAvLyBhcmUgZW5hYmxlZCB0byByZWR1Y2UgbWVtb3J5IHVzYWdlXG4gICAgICAgICAgICBwcm9taXNlLnNvdXJjZSA9IG5ld1Byb21pc2U7XG4gICAgICAgIH1cblxuICAgICAgICBhcnJheV9yZWR1Y2UobWVzc2FnZXMsIGZ1bmN0aW9uICh1bmRlZmluZWQsIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG5ld1Byb21pc2UucHJvbWlzZURpc3BhdGNoLmFwcGx5KG5ld1Byb21pc2UsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIHZvaWQgMCk7XG5cbiAgICAgICAgbWVzc2FnZXMgPSB2b2lkIDA7XG4gICAgICAgIHByb2dyZXNzTGlzdGVuZXJzID0gdm9pZCAwO1xuICAgIH1cblxuICAgIGRlZmVycmVkLnByb21pc2UgPSBwcm9taXNlO1xuICAgIGRlZmVycmVkLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHJlc29sdmVkUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYmVjb21lKFEodmFsdWUpKTtcbiAgICB9O1xuXG4gICAgZGVmZXJyZWQuZnVsZmlsbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAocmVzb2x2ZWRQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBiZWNvbWUoZnVsZmlsbCh2YWx1ZSkpO1xuICAgIH07XG4gICAgZGVmZXJyZWQucmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICBpZiAocmVzb2x2ZWRQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBiZWNvbWUocmVqZWN0KHJlYXNvbikpO1xuICAgIH07XG4gICAgZGVmZXJyZWQubm90aWZ5ID0gZnVuY3Rpb24gKHByb2dyZXNzKSB7XG4gICAgICAgIGlmIChyZXNvbHZlZFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGFycmF5X3JlZHVjZShwcm9ncmVzc0xpc3RlbmVycywgZnVuY3Rpb24gKHVuZGVmaW5lZCwgcHJvZ3Jlc3NMaXN0ZW5lcikge1xuICAgICAgICAgICAgUS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NMaXN0ZW5lcihwcm9ncmVzcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgdm9pZCAwKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRlZmVycmVkO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBOb2RlLXN0eWxlIGNhbGxiYWNrIHRoYXQgd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgZGVmZXJyZWRcbiAqIHByb21pc2UuXG4gKiBAcmV0dXJucyBhIG5vZGViYWNrXG4gKi9cbmRlZmVyLnByb3RvdHlwZS5tYWtlTm9kZVJlc29sdmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gZnVuY3Rpb24gKGVycm9yLCB2YWx1ZSkge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNlbGYucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgc2VsZi5yZXNvbHZlKGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5yZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuXG4vKipcbiAqIEBwYXJhbSByZXNvbHZlciB7RnVuY3Rpb259IGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIG5vdGhpbmcgYW5kIGFjY2VwdHNcbiAqIHRoZSByZXNvbHZlLCByZWplY3QsIGFuZCBub3RpZnkgZnVuY3Rpb25zIGZvciBhIGRlZmVycmVkLlxuICogQHJldHVybnMgYSBwcm9taXNlIHRoYXQgbWF5IGJlIHJlc29sdmVkIHdpdGggdGhlIGdpdmVuIHJlc29sdmUgYW5kIHJlamVjdFxuICogZnVuY3Rpb25zLCBvciByZWplY3RlZCBieSBhIHRocm93biBleGNlcHRpb24gaW4gcmVzb2x2ZXJcbiAqL1xuUS5Qcm9taXNlID0gcHJvbWlzZTsgLy8gRVM2XG5RLnByb21pc2UgPSBwcm9taXNlO1xuZnVuY3Rpb24gcHJvbWlzZShyZXNvbHZlcikge1xuICAgIGlmICh0eXBlb2YgcmVzb2x2ZXIgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwicmVzb2x2ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uLlwiKTtcbiAgICB9XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICB0cnkge1xuICAgICAgICByZXNvbHZlcihkZWZlcnJlZC5yZXNvbHZlLCBkZWZlcnJlZC5yZWplY3QsIGRlZmVycmVkLm5vdGlmeSk7XG4gICAgfSBjYXRjaCAocmVhc29uKSB7XG4gICAgICAgIGRlZmVycmVkLnJlamVjdChyZWFzb24pO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn1cblxucHJvbWlzZS5yYWNlID0gcmFjZTsgLy8gRVM2XG5wcm9taXNlLmFsbCA9IGFsbDsgLy8gRVM2XG5wcm9taXNlLnJlamVjdCA9IHJlamVjdDsgLy8gRVM2XG5wcm9taXNlLnJlc29sdmUgPSBROyAvLyBFUzZcblxuLy8gWFhYIGV4cGVyaW1lbnRhbC4gIFRoaXMgbWV0aG9kIGlzIGEgd2F5IHRvIGRlbm90ZSB0aGF0IGEgbG9jYWwgdmFsdWUgaXNcbi8vIHNlcmlhbGl6YWJsZSBhbmQgc2hvdWxkIGJlIGltbWVkaWF0ZWx5IGRpc3BhdGNoZWQgdG8gYSByZW1vdGUgdXBvbiByZXF1ZXN0LFxuLy8gaW5zdGVhZCBvZiBwYXNzaW5nIGEgcmVmZXJlbmNlLlxuUS5wYXNzQnlDb3B5ID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgIC8vZnJlZXplKG9iamVjdCk7XG4gICAgLy9wYXNzQnlDb3BpZXMuc2V0KG9iamVjdCwgdHJ1ZSk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnBhc3NCeUNvcHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy9mcmVlemUob2JqZWN0KTtcbiAgICAvL3Bhc3NCeUNvcGllcy5zZXQob2JqZWN0LCB0cnVlKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogSWYgdHdvIHByb21pc2VzIGV2ZW50dWFsbHkgZnVsZmlsbCB0byB0aGUgc2FtZSB2YWx1ZSwgcHJvbWlzZXMgdGhhdCB2YWx1ZSxcbiAqIGJ1dCBvdGhlcndpc2UgcmVqZWN0cy5cbiAqIEBwYXJhbSB4IHtBbnkqfVxuICogQHBhcmFtIHkge0FueSp9XG4gKiBAcmV0dXJucyB7QW55Kn0gYSBwcm9taXNlIGZvciB4IGFuZCB5IGlmIHRoZXkgYXJlIHRoZSBzYW1lLCBidXQgYSByZWplY3Rpb25cbiAqIG90aGVyd2lzZS5cbiAqXG4gKi9cblEuam9pbiA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgcmV0dXJuIFEoeCkuam9pbih5KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmpvaW4gPSBmdW5jdGlvbiAodGhhdCkge1xuICAgIHJldHVybiBRKFt0aGlzLCB0aGF0XSkuc3ByZWFkKGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIGlmICh4ID09PSB5KSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBcIj09PVwiIHNob3VsZCBiZSBPYmplY3QuaXMgb3IgZXF1aXZcbiAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUSBjYW4ndCBqb2luOiBub3QgdGhlIHNhbWU6IFwiICsgeCArIFwiIFwiICsgeSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBmaXJzdCBvZiBhbiBhcnJheSBvZiBwcm9taXNlcyB0byBiZWNvbWUgc2V0dGxlZC5cbiAqIEBwYXJhbSBhbnN3ZXJzIHtBcnJheVtBbnkqXX0gcHJvbWlzZXMgdG8gcmFjZVxuICogQHJldHVybnMge0FueSp9IHRoZSBmaXJzdCBwcm9taXNlIHRvIGJlIHNldHRsZWRcbiAqL1xuUS5yYWNlID0gcmFjZTtcbmZ1bmN0aW9uIHJhY2UoYW5zd2VyUHMpIHtcbiAgICByZXR1cm4gcHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIFN3aXRjaCB0byB0aGlzIG9uY2Ugd2UgY2FuIGFzc3VtZSBhdCBsZWFzdCBFUzVcbiAgICAgICAgLy8gYW5zd2VyUHMuZm9yRWFjaChmdW5jdGlvbiAoYW5zd2VyUCkge1xuICAgICAgICAvLyAgICAgUShhbnN3ZXJQKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvLyBVc2UgdGhpcyBpbiB0aGUgbWVhbnRpbWVcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFuc3dlclBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBRKGFuc3dlclBzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUucmFjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKFEucmFjZSk7XG59O1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBQcm9taXNlIHdpdGggYSBwcm9taXNlIGRlc2NyaXB0b3Igb2JqZWN0IGFuZCBvcHRpb25hbCBmYWxsYmFja1xuICogZnVuY3Rpb24uICBUaGUgZGVzY3JpcHRvciBjb250YWlucyBtZXRob2RzIGxpa2Ugd2hlbihyZWplY3RlZCksIGdldChuYW1lKSxcbiAqIHNldChuYW1lLCB2YWx1ZSksIHBvc3QobmFtZSwgYXJncyksIGFuZCBkZWxldGUobmFtZSksIHdoaWNoIGFsbFxuICogcmV0dXJuIGVpdGhlciBhIHZhbHVlLCBhIHByb21pc2UgZm9yIGEgdmFsdWUsIG9yIGEgcmVqZWN0aW9uLiAgVGhlIGZhbGxiYWNrXG4gKiBhY2NlcHRzIHRoZSBvcGVyYXRpb24gbmFtZSwgYSByZXNvbHZlciwgYW5kIGFueSBmdXJ0aGVyIGFyZ3VtZW50cyB0aGF0IHdvdWxkXG4gKiBoYXZlIGJlZW4gZm9yd2FyZGVkIHRvIHRoZSBhcHByb3ByaWF0ZSBtZXRob2QgYWJvdmUgaGFkIGEgbWV0aG9kIGJlZW5cbiAqIHByb3ZpZGVkIHdpdGggdGhlIHByb3BlciBuYW1lLiAgVGhlIEFQSSBtYWtlcyBubyBndWFyYW50ZWVzIGFib3V0IHRoZSBuYXR1cmVcbiAqIG9mIHRoZSByZXR1cm5lZCBvYmplY3QsIGFwYXJ0IGZyb20gdGhhdCBpdCBpcyB1c2FibGUgd2hlcmVldmVyIHByb21pc2VzIGFyZVxuICogYm91Z2h0IGFuZCBzb2xkLlxuICovXG5RLm1ha2VQcm9taXNlID0gUHJvbWlzZTtcbmZ1bmN0aW9uIFByb21pc2UoZGVzY3JpcHRvciwgZmFsbGJhY2ssIGluc3BlY3QpIHtcbiAgICBpZiAoZmFsbGJhY2sgPT09IHZvaWQgMCkge1xuICAgICAgICBmYWxsYmFjayA9IGZ1bmN0aW9uIChvcCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgXCJQcm9taXNlIGRvZXMgbm90IHN1cHBvcnQgb3BlcmF0aW9uOiBcIiArIG9wXG4gICAgICAgICAgICApKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGluc3BlY3QgPT09IHZvaWQgMCkge1xuICAgICAgICBpbnNwZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtzdGF0ZTogXCJ1bmtub3duXCJ9O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlID0gb2JqZWN0X2NyZWF0ZShQcm9taXNlLnByb3RvdHlwZSk7XG5cbiAgICBwcm9taXNlLnByb21pc2VEaXNwYXRjaCA9IGZ1bmN0aW9uIChyZXNvbHZlLCBvcCwgYXJncykge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGRlc2NyaXB0b3Jbb3BdKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZGVzY3JpcHRvcltvcF0uYXBwbHkocHJvbWlzZSwgYXJncyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbGxiYWNrLmNhbGwocHJvbWlzZSwgb3AsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlamVjdChleGNlcHRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNvbHZlKSB7XG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcHJvbWlzZS5pbnNwZWN0ID0gaW5zcGVjdDtcblxuICAgIC8vIFhYWCBkZXByZWNhdGVkIGB2YWx1ZU9mYCBhbmQgYGV4Y2VwdGlvbmAgc3VwcG9ydFxuICAgIGlmIChpbnNwZWN0KSB7XG4gICAgICAgIHZhciBpbnNwZWN0ZWQgPSBpbnNwZWN0KCk7XG4gICAgICAgIGlmIChpbnNwZWN0ZWQuc3RhdGUgPT09IFwicmVqZWN0ZWRcIikge1xuICAgICAgICAgICAgcHJvbWlzZS5leGNlcHRpb24gPSBpbnNwZWN0ZWQucmVhc29uO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvbWlzZS52YWx1ZU9mID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluc3BlY3RlZCA9IGluc3BlY3QoKTtcbiAgICAgICAgICAgIGlmIChpbnNwZWN0ZWQuc3RhdGUgPT09IFwicGVuZGluZ1wiIHx8XG4gICAgICAgICAgICAgICAgaW5zcGVjdGVkLnN0YXRlID09PSBcInJlamVjdGVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbnNwZWN0ZWQudmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cblByb21pc2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgUHJvbWlzZV1cIjtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiAoZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3NlZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIHZhciBkb25lID0gZmFsc2U7ICAgLy8gZW5zdXJlIHRoZSB1bnRydXN0ZWQgcHJvbWlzZSBtYWtlcyBhdCBtb3N0IGFcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNpbmdsZSBjYWxsIHRvIG9uZSBvZiB0aGUgY2FsbGJhY2tzXG5cbiAgICBmdW5jdGlvbiBfZnVsZmlsbGVkKHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGZ1bGZpbGxlZCA9PT0gXCJmdW5jdGlvblwiID8gZnVsZmlsbGVkKHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoZXhjZXB0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9yZWplY3RlZChleGNlcHRpb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZWplY3RlZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBtYWtlU3RhY2tUcmFjZUxvbmcoZXhjZXB0aW9uLCBzZWxmKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGVkKGV4Y2VwdGlvbik7XG4gICAgICAgICAgICB9IGNhdGNoIChuZXdFeGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ld0V4Y2VwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlamVjdChleGNlcHRpb24pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9wcm9ncmVzc2VkKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgcHJvZ3Jlc3NlZCA9PT0gXCJmdW5jdGlvblwiID8gcHJvZ3Jlc3NlZCh2YWx1ZSkgOiB2YWx1ZTtcbiAgICB9XG5cbiAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5wcm9taXNlRGlzcGF0Y2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKF9mdWxmaWxsZWQodmFsdWUpKTtcbiAgICAgICAgfSwgXCJ3aGVuXCIsIFtmdW5jdGlvbiAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKF9yZWplY3RlZChleGNlcHRpb24pKTtcbiAgICAgICAgfV0pO1xuICAgIH0pO1xuXG4gICAgLy8gUHJvZ3Jlc3MgcHJvcGFnYXRvciBuZWVkIHRvIGJlIGF0dGFjaGVkIGluIHRoZSBjdXJyZW50IHRpY2suXG4gICAgc2VsZi5wcm9taXNlRGlzcGF0Y2godm9pZCAwLCBcIndoZW5cIiwgW3ZvaWQgMCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBuZXdWYWx1ZTtcbiAgICAgICAgdmFyIHRocmV3ID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IF9wcm9ncmVzc2VkKHZhbHVlKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyZXcgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKFEub25lcnJvcikge1xuICAgICAgICAgICAgICAgIFEub25lcnJvcihlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhyZXcpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLm5vdGlmeShuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn07XG5cblEudGFwID0gZnVuY3Rpb24gKHByb21pc2UsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFEocHJvbWlzZSkudGFwKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogV29ya3MgYWxtb3N0IGxpa2UgXCJmaW5hbGx5XCIsIGJ1dCBub3QgY2FsbGVkIGZvciByZWplY3Rpb25zLlxuICogT3JpZ2luYWwgcmVzb2x1dGlvbiB2YWx1ZSBpcyBwYXNzZWQgdGhyb3VnaCBjYWxsYmFjayB1bmFmZmVjdGVkLlxuICogQ2FsbGJhY2sgbWF5IHJldHVybiBhIHByb21pc2UgdGhhdCB3aWxsIGJlIGF3YWl0ZWQgZm9yLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm5zIHtRLlByb21pc2V9XG4gKiBAZXhhbXBsZVxuICogZG9Tb21ldGhpbmcoKVxuICogICAudGhlbiguLi4pXG4gKiAgIC50YXAoY29uc29sZS5sb2cpXG4gKiAgIC50aGVuKC4uLik7XG4gKi9cblByb21pc2UucHJvdG90eXBlLnRhcCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIGNhbGxiYWNrID0gUShjYWxsYmFjayk7XG5cbiAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2suZmNhbGwodmFsdWUpLnRoZW5SZXNvbHZlKHZhbHVlKTtcbiAgICB9KTtcbn07XG5cbi8qKlxuICogUmVnaXN0ZXJzIGFuIG9ic2VydmVyIG9uIGEgcHJvbWlzZS5cbiAqXG4gKiBHdWFyYW50ZWVzOlxuICpcbiAqIDEuIHRoYXQgZnVsZmlsbGVkIGFuZCByZWplY3RlZCB3aWxsIGJlIGNhbGxlZCBvbmx5IG9uY2UuXG4gKiAyLiB0aGF0IGVpdGhlciB0aGUgZnVsZmlsbGVkIGNhbGxiYWNrIG9yIHRoZSByZWplY3RlZCBjYWxsYmFjayB3aWxsIGJlXG4gKiAgICBjYWxsZWQsIGJ1dCBub3QgYm90aC5cbiAqIDMuIHRoYXQgZnVsZmlsbGVkIGFuZCByZWplY3RlZCB3aWxsIG5vdCBiZSBjYWxsZWQgaW4gdGhpcyB0dXJuLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSAgICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSB0byBvYnNlcnZlXG4gKiBAcGFyYW0gZnVsZmlsbGVkICBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2l0aCB0aGUgZnVsZmlsbGVkIHZhbHVlXG4gKiBAcGFyYW0gcmVqZWN0ZWQgICBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2l0aCB0aGUgcmVqZWN0aW9uIGV4Y2VwdGlvblxuICogQHBhcmFtIHByb2dyZXNzZWQgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGFueSBwcm9ncmVzcyBub3RpZmljYXRpb25zXG4gKiBAcmV0dXJuIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWUgZnJvbSB0aGUgaW52b2tlZCBjYWxsYmFja1xuICovXG5RLndoZW4gPSB3aGVuO1xuZnVuY3Rpb24gd2hlbih2YWx1ZSwgZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3NlZCkge1xuICAgIHJldHVybiBRKHZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIHByb2dyZXNzZWQpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuUmVzb2x2ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdmFsdWU7IH0pO1xufTtcblxuUS50aGVuUmVzb2x2ZSA9IGZ1bmN0aW9uIChwcm9taXNlLCB2YWx1ZSkge1xuICAgIHJldHVybiBRKHByb21pc2UpLnRoZW5SZXNvbHZlKHZhbHVlKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnRoZW5SZWplY3QgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAoKSB7IHRocm93IHJlYXNvbjsgfSk7XG59O1xuXG5RLnRoZW5SZWplY3QgPSBmdW5jdGlvbiAocHJvbWlzZSwgcmVhc29uKSB7XG4gICAgcmV0dXJuIFEocHJvbWlzZSkudGhlblJlamVjdChyZWFzb24pO1xufTtcblxuLyoqXG4gKiBJZiBhbiBvYmplY3QgaXMgbm90IGEgcHJvbWlzZSwgaXQgaXMgYXMgXCJuZWFyXCIgYXMgcG9zc2libGUuXG4gKiBJZiBhIHByb21pc2UgaXMgcmVqZWN0ZWQsIGl0IGlzIGFzIFwibmVhclwiIGFzIHBvc3NpYmxlIHRvby5cbiAqIElmIGl04oCZcyBhIGZ1bGZpbGxlZCBwcm9taXNlLCB0aGUgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmVhcmVyLlxuICogSWYgaXTigJlzIGEgZGVmZXJyZWQgcHJvbWlzZSBhbmQgdGhlIGRlZmVycmVkIGhhcyBiZWVuIHJlc29sdmVkLCB0aGVcbiAqIHJlc29sdXRpb24gaXMgXCJuZWFyZXJcIi5cbiAqIEBwYXJhbSBvYmplY3RcbiAqIEByZXR1cm5zIG1vc3QgcmVzb2x2ZWQgKG5lYXJlc3QpIGZvcm0gb2YgdGhlIG9iamVjdFxuICovXG5cbi8vIFhYWCBzaG91bGQgd2UgcmUtZG8gdGhpcz9cblEubmVhcmVyID0gbmVhcmVyO1xuZnVuY3Rpb24gbmVhcmVyKHZhbHVlKSB7XG4gICAgaWYgKGlzUHJvbWlzZSh2YWx1ZSkpIHtcbiAgICAgICAgdmFyIGluc3BlY3RlZCA9IHZhbHVlLmluc3BlY3QoKTtcbiAgICAgICAgaWYgKGluc3BlY3RlZC5zdGF0ZSA9PT0gXCJmdWxmaWxsZWRcIikge1xuICAgICAgICAgICAgcmV0dXJuIGluc3BlY3RlZC52YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5cbi8qKlxuICogQHJldHVybnMgd2hldGhlciB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGEgcHJvbWlzZS5cbiAqIE90aGVyd2lzZSBpdCBpcyBhIGZ1bGZpbGxlZCB2YWx1ZS5cbiAqL1xuUS5pc1Byb21pc2UgPSBpc1Byb21pc2U7XG5mdW5jdGlvbiBpc1Byb21pc2Uob2JqZWN0KSB7XG4gICAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIFByb21pc2U7XG59XG5cblEuaXNQcm9taXNlQWxpa2UgPSBpc1Byb21pc2VBbGlrZTtcbmZ1bmN0aW9uIGlzUHJvbWlzZUFsaWtlKG9iamVjdCkge1xuICAgIHJldHVybiBpc09iamVjdChvYmplY3QpICYmIHR5cGVvZiBvYmplY3QudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG4vKipcbiAqIEByZXR1cm5zIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhIHBlbmRpbmcgcHJvbWlzZSwgbWVhbmluZyBub3RcbiAqIGZ1bGZpbGxlZCBvciByZWplY3RlZC5cbiAqL1xuUS5pc1BlbmRpbmcgPSBpc1BlbmRpbmc7XG5mdW5jdGlvbiBpc1BlbmRpbmcob2JqZWN0KSB7XG4gICAgcmV0dXJuIGlzUHJvbWlzZShvYmplY3QpICYmIG9iamVjdC5pbnNwZWN0KCkuc3RhdGUgPT09IFwicGVuZGluZ1wiO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5pc1BlbmRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zcGVjdCgpLnN0YXRlID09PSBcInBlbmRpbmdcIjtcbn07XG5cbi8qKlxuICogQHJldHVybnMgd2hldGhlciB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGEgdmFsdWUgb3IgZnVsZmlsbGVkXG4gKiBwcm9taXNlLlxuICovXG5RLmlzRnVsZmlsbGVkID0gaXNGdWxmaWxsZWQ7XG5mdW5jdGlvbiBpc0Z1bGZpbGxlZChvYmplY3QpIHtcbiAgICByZXR1cm4gIWlzUHJvbWlzZShvYmplY3QpIHx8IG9iamVjdC5pbnNwZWN0KCkuc3RhdGUgPT09IFwiZnVsZmlsbGVkXCI7XG59XG5cblByb21pc2UucHJvdG90eXBlLmlzRnVsZmlsbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmluc3BlY3QoKS5zdGF0ZSA9PT0gXCJmdWxmaWxsZWRcIjtcbn07XG5cbi8qKlxuICogQHJldHVybnMgd2hldGhlciB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGEgcmVqZWN0ZWQgcHJvbWlzZS5cbiAqL1xuUS5pc1JlamVjdGVkID0gaXNSZWplY3RlZDtcbmZ1bmN0aW9uIGlzUmVqZWN0ZWQob2JqZWN0KSB7XG4gICAgcmV0dXJuIGlzUHJvbWlzZShvYmplY3QpICYmIG9iamVjdC5pbnNwZWN0KCkuc3RhdGUgPT09IFwicmVqZWN0ZWRcIjtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuaXNSZWplY3RlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNwZWN0KCkuc3RhdGUgPT09IFwicmVqZWN0ZWRcIjtcbn07XG5cbi8vLy8gQkVHSU4gVU5IQU5ETEVEIFJFSkVDVElPTiBUUkFDS0lOR1xuXG4vLyBUaGlzIHByb21pc2UgbGlicmFyeSBjb25zdW1lcyBleGNlcHRpb25zIHRocm93biBpbiBoYW5kbGVycyBzbyB0aGV5IGNhbiBiZVxuLy8gaGFuZGxlZCBieSBhIHN1YnNlcXVlbnQgcHJvbWlzZS4gIFRoZSBleGNlcHRpb25zIGdldCBhZGRlZCB0byB0aGlzIGFycmF5IHdoZW5cbi8vIHRoZXkgYXJlIGNyZWF0ZWQsIGFuZCByZW1vdmVkIHdoZW4gdGhleSBhcmUgaGFuZGxlZC4gIE5vdGUgdGhhdCBpbiBFUzYgb3Jcbi8vIHNoaW1tZWQgZW52aXJvbm1lbnRzLCB0aGlzIHdvdWxkIG5hdHVyYWxseSBiZSBhIGBTZXRgLlxudmFyIHVuaGFuZGxlZFJlYXNvbnMgPSBbXTtcbnZhciB1bmhhbmRsZWRSZWplY3Rpb25zID0gW107XG52YXIgcmVwb3J0ZWRVbmhhbmRsZWRSZWplY3Rpb25zID0gW107XG52YXIgdHJhY2tVbmhhbmRsZWRSZWplY3Rpb25zID0gdHJ1ZTtcblxuZnVuY3Rpb24gcmVzZXRVbmhhbmRsZWRSZWplY3Rpb25zKCkge1xuICAgIHVuaGFuZGxlZFJlYXNvbnMubGVuZ3RoID0gMDtcbiAgICB1bmhhbmRsZWRSZWplY3Rpb25zLmxlbmd0aCA9IDA7XG5cbiAgICBpZiAoIXRyYWNrVW5oYW5kbGVkUmVqZWN0aW9ucykge1xuICAgICAgICB0cmFja1VuaGFuZGxlZFJlamVjdGlvbnMgPSB0cnVlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdHJhY2tSZWplY3Rpb24ocHJvbWlzZSwgcmVhc29uKSB7XG4gICAgaWYgKCF0cmFja1VuaGFuZGxlZFJlamVjdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHByb2Nlc3MuZW1pdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIFEubmV4dFRpY2sucnVuQWZ0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGFycmF5X2luZGV4T2YodW5oYW5kbGVkUmVqZWN0aW9ucywgcHJvbWlzZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbWl0KFwidW5oYW5kbGVkUmVqZWN0aW9uXCIsIHJlYXNvbiwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgcmVwb3J0ZWRVbmhhbmRsZWRSZWplY3Rpb25zLnB1c2gocHJvbWlzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHVuaGFuZGxlZFJlamVjdGlvbnMucHVzaChwcm9taXNlKTtcbiAgICBpZiAocmVhc29uICYmIHR5cGVvZiByZWFzb24uc3RhY2sgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgdW5oYW5kbGVkUmVhc29ucy5wdXNoKHJlYXNvbi5zdGFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdW5oYW5kbGVkUmVhc29ucy5wdXNoKFwiKG5vIHN0YWNrKSBcIiArIHJlYXNvbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1bnRyYWNrUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgICBpZiAoIXRyYWNrVW5oYW5kbGVkUmVqZWN0aW9ucykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGF0ID0gYXJyYXlfaW5kZXhPZih1bmhhbmRsZWRSZWplY3Rpb25zLCBwcm9taXNlKTtcbiAgICBpZiAoYXQgIT09IC0xKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcHJvY2Vzcy5lbWl0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIFEubmV4dFRpY2sucnVuQWZ0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhdFJlcG9ydCA9IGFycmF5X2luZGV4T2YocmVwb3J0ZWRVbmhhbmRsZWRSZWplY3Rpb25zLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICBpZiAoYXRSZXBvcnQgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW1pdChcInJlamVjdGlvbkhhbmRsZWRcIiwgdW5oYW5kbGVkUmVhc29uc1thdF0sIHByb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICByZXBvcnRlZFVuaGFuZGxlZFJlamVjdGlvbnMuc3BsaWNlKGF0UmVwb3J0LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB1bmhhbmRsZWRSZWplY3Rpb25zLnNwbGljZShhdCwgMSk7XG4gICAgICAgIHVuaGFuZGxlZFJlYXNvbnMuc3BsaWNlKGF0LCAxKTtcbiAgICB9XG59XG5cblEucmVzZXRVbmhhbmRsZWRSZWplY3Rpb25zID0gcmVzZXRVbmhhbmRsZWRSZWplY3Rpb25zO1xuXG5RLmdldFVuaGFuZGxlZFJlYXNvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gTWFrZSBhIGNvcHkgc28gdGhhdCBjb25zdW1lcnMgY2FuJ3QgaW50ZXJmZXJlIHdpdGggb3VyIGludGVybmFsIHN0YXRlLlxuICAgIHJldHVybiB1bmhhbmRsZWRSZWFzb25zLnNsaWNlKCk7XG59O1xuXG5RLnN0b3BVbmhhbmRsZWRSZWplY3Rpb25UcmFja2luZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXNldFVuaGFuZGxlZFJlamVjdGlvbnMoKTtcbiAgICB0cmFja1VuaGFuZGxlZFJlamVjdGlvbnMgPSBmYWxzZTtcbn07XG5cbnJlc2V0VW5oYW5kbGVkUmVqZWN0aW9ucygpO1xuXG4vLy8vIEVORCBVTkhBTkRMRUQgUkVKRUNUSU9OIFRSQUNLSU5HXG5cbi8qKlxuICogQ29uc3RydWN0cyBhIHJlamVjdGVkIHByb21pc2UuXG4gKiBAcGFyYW0gcmVhc29uIHZhbHVlIGRlc2NyaWJpbmcgdGhlIGZhaWx1cmVcbiAqL1xuUS5yZWplY3QgPSByZWplY3Q7XG5mdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gICAgdmFyIHJlamVjdGlvbiA9IFByb21pc2Uoe1xuICAgICAgICBcIndoZW5cIjogZnVuY3Rpb24gKHJlamVjdGVkKSB7XG4gICAgICAgICAgICAvLyBub3RlIHRoYXQgdGhlIGVycm9yIGhhcyBiZWVuIGhhbmRsZWRcbiAgICAgICAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICAgICAgICAgIHVudHJhY2tSZWplY3Rpb24odGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0ZWQgPyByZWplY3RlZChyZWFzb24pIDogdGhpcztcbiAgICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIGZhbGxiYWNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LCBmdW5jdGlvbiBpbnNwZWN0KCkge1xuICAgICAgICByZXR1cm4geyBzdGF0ZTogXCJyZWplY3RlZFwiLCByZWFzb246IHJlYXNvbiB9O1xuICAgIH0pO1xuXG4gICAgLy8gTm90ZSB0aGF0IHRoZSByZWFzb24gaGFzIG5vdCBiZWVuIGhhbmRsZWQuXG4gICAgdHJhY2tSZWplY3Rpb24ocmVqZWN0aW9uLCByZWFzb24pO1xuXG4gICAgcmV0dXJuIHJlamVjdGlvbjtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgZnVsZmlsbGVkIHByb21pc2UgZm9yIGFuIGltbWVkaWF0ZSByZWZlcmVuY2UuXG4gKiBAcGFyYW0gdmFsdWUgaW1tZWRpYXRlIHJlZmVyZW5jZVxuICovXG5RLmZ1bGZpbGwgPSBmdWxmaWxsO1xuZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkge1xuICAgIHJldHVybiBQcm9taXNlKHtcbiAgICAgICAgXCJ3aGVuXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZVtuYW1lXTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKG5hbWUsIHJocykge1xuICAgICAgICAgICAgdmFsdWVbbmFtZV0gPSByaHM7XG4gICAgICAgIH0sXG4gICAgICAgIFwiZGVsZXRlXCI6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBkZWxldGUgdmFsdWVbbmFtZV07XG4gICAgICAgIH0sXG4gICAgICAgIFwicG9zdFwiOiBmdW5jdGlvbiAobmFtZSwgYXJncykge1xuICAgICAgICAgICAgLy8gTWFyayBNaWxsZXIgcHJvcG9zZXMgdGhhdCBwb3N0IHdpdGggbm8gbmFtZSBzaG91bGQgYXBwbHkgYVxuICAgICAgICAgICAgLy8gcHJvbWlzZWQgZnVuY3Rpb24uXG4gICAgICAgICAgICBpZiAobmFtZSA9PT0gbnVsbCB8fCBuYW1lID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlW25hbWVdLmFwcGx5KHZhbHVlLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJhcHBseVwiOiBmdW5jdGlvbiAodGhpc3AsIGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5hcHBseSh0aGlzcCwgYXJncyk7XG4gICAgICAgIH0sXG4gICAgICAgIFwia2V5c1wiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0X2tleXModmFsdWUpO1xuICAgICAgICB9XG4gICAgfSwgdm9pZCAwLCBmdW5jdGlvbiBpbnNwZWN0KCkge1xuICAgICAgICByZXR1cm4geyBzdGF0ZTogXCJmdWxmaWxsZWRcIiwgdmFsdWU6IHZhbHVlIH07XG4gICAgfSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhlbmFibGVzIHRvIFEgcHJvbWlzZXMuXG4gKiBAcGFyYW0gcHJvbWlzZSB0aGVuYWJsZSBwcm9taXNlXG4gKiBAcmV0dXJucyBhIFEgcHJvbWlzZVxuICovXG5mdW5jdGlvbiBjb2VyY2UocHJvbWlzZSkge1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgUS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwcm9taXNlLnRoZW4oZGVmZXJyZWQucmVzb2x2ZSwgZGVmZXJyZWQucmVqZWN0LCBkZWZlcnJlZC5ub3RpZnkpO1xuICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChleGNlcHRpb24pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbi8qKlxuICogQW5ub3RhdGVzIGFuIG9iamVjdCBzdWNoIHRoYXQgaXQgd2lsbCBuZXZlciBiZVxuICogdHJhbnNmZXJyZWQgYXdheSBmcm9tIHRoaXMgcHJvY2VzcyBvdmVyIGFueSBwcm9taXNlXG4gKiBjb21tdW5pY2F0aW9uIGNoYW5uZWwuXG4gKiBAcGFyYW0gb2JqZWN0XG4gKiBAcmV0dXJucyBwcm9taXNlIGEgd3JhcHBpbmcgb2YgdGhhdCBvYmplY3QgdGhhdFxuICogYWRkaXRpb25hbGx5IHJlc3BvbmRzIHRvIHRoZSBcImlzRGVmXCIgbWVzc2FnZVxuICogd2l0aG91dCBhIHJlamVjdGlvbi5cbiAqL1xuUS5tYXN0ZXIgPSBtYXN0ZXI7XG5mdW5jdGlvbiBtYXN0ZXIob2JqZWN0KSB7XG4gICAgcmV0dXJuIFByb21pc2Uoe1xuICAgICAgICBcImlzRGVmXCI6IGZ1bmN0aW9uICgpIHt9XG4gICAgfSwgZnVuY3Rpb24gZmFsbGJhY2sob3AsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIGRpc3BhdGNoKG9iamVjdCwgb3AsIGFyZ3MpO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFEob2JqZWN0KS5pbnNwZWN0KCk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogU3ByZWFkcyB0aGUgdmFsdWVzIG9mIGEgcHJvbWlzZWQgYXJyYXkgb2YgYXJndW1lbnRzIGludG8gdGhlXG4gKiBmdWxmaWxsbWVudCBjYWxsYmFjay5cbiAqIEBwYXJhbSBmdWxmaWxsZWQgY2FsbGJhY2sgdGhhdCByZWNlaXZlcyB2YXJpYWRpYyBhcmd1bWVudHMgZnJvbSB0aGVcbiAqIHByb21pc2VkIGFycmF5XG4gKiBAcGFyYW0gcmVqZWN0ZWQgY2FsbGJhY2sgdGhhdCByZWNlaXZlcyB0aGUgZXhjZXB0aW9uIGlmIHRoZSBwcm9taXNlXG4gKiBpcyByZWplY3RlZC5cbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHJldHVybiB2YWx1ZSBvciB0aHJvd24gZXhjZXB0aW9uIG9mXG4gKiBlaXRoZXIgY2FsbGJhY2suXG4gKi9cblEuc3ByZWFkID0gc3ByZWFkO1xuZnVuY3Rpb24gc3ByZWFkKHZhbHVlLCBmdWxmaWxsZWQsIHJlamVjdGVkKSB7XG4gICAgcmV0dXJuIFEodmFsdWUpLnNwcmVhZChmdWxmaWxsZWQsIHJlamVjdGVkKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuc3ByZWFkID0gZnVuY3Rpb24gKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gdGhpcy5hbGwoKS50aGVuKGZ1bmN0aW9uIChhcnJheSkge1xuICAgICAgICByZXR1cm4gZnVsZmlsbGVkLmFwcGx5KHZvaWQgMCwgYXJyYXkpO1xuICAgIH0sIHJlamVjdGVkKTtcbn07XG5cbi8qKlxuICogVGhlIGFzeW5jIGZ1bmN0aW9uIGlzIGEgZGVjb3JhdG9yIGZvciBnZW5lcmF0b3IgZnVuY3Rpb25zLCB0dXJuaW5nXG4gKiB0aGVtIGludG8gYXN5bmNocm9ub3VzIGdlbmVyYXRvcnMuICBBbHRob3VnaCBnZW5lcmF0b3JzIGFyZSBvbmx5IHBhcnRcbiAqIG9mIHRoZSBuZXdlc3QgRUNNQVNjcmlwdCA2IGRyYWZ0cywgdGhpcyBjb2RlIGRvZXMgbm90IGNhdXNlIHN5bnRheFxuICogZXJyb3JzIGluIG9sZGVyIGVuZ2luZXMuICBUaGlzIGNvZGUgc2hvdWxkIGNvbnRpbnVlIHRvIHdvcmsgYW5kIHdpbGxcbiAqIGluIGZhY3QgaW1wcm92ZSBvdmVyIHRpbWUgYXMgdGhlIGxhbmd1YWdlIGltcHJvdmVzLlxuICpcbiAqIEVTNiBnZW5lcmF0b3JzIGFyZSBjdXJyZW50bHkgcGFydCBvZiBWOCB2ZXJzaW9uIDMuMTkgd2l0aCB0aGVcbiAqIC0taGFybW9ueS1nZW5lcmF0b3JzIHJ1bnRpbWUgZmxhZyBlbmFibGVkLiAgU3BpZGVyTW9ua2V5IGhhcyBoYWQgdGhlbVxuICogZm9yIGxvbmdlciwgYnV0IHVuZGVyIGFuIG9sZGVyIFB5dGhvbi1pbnNwaXJlZCBmb3JtLiAgVGhpcyBmdW5jdGlvblxuICogd29ya3Mgb24gYm90aCBraW5kcyBvZiBnZW5lcmF0b3JzLlxuICpcbiAqIERlY29yYXRlcyBhIGdlbmVyYXRvciBmdW5jdGlvbiBzdWNoIHRoYXQ6XG4gKiAgLSBpdCBtYXkgeWllbGQgcHJvbWlzZXNcbiAqICAtIGV4ZWN1dGlvbiB3aWxsIGNvbnRpbnVlIHdoZW4gdGhhdCBwcm9taXNlIGlzIGZ1bGZpbGxlZFxuICogIC0gdGhlIHZhbHVlIG9mIHRoZSB5aWVsZCBleHByZXNzaW9uIHdpbGwgYmUgdGhlIGZ1bGZpbGxlZCB2YWx1ZVxuICogIC0gaXQgcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWUgKHdoZW4gdGhlIGdlbmVyYXRvclxuICogICAgc3RvcHMgaXRlcmF0aW5nKVxuICogIC0gdGhlIGRlY29yYXRlZCBmdW5jdGlvbiByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHJldHVybiB2YWx1ZVxuICogICAgb2YgdGhlIGdlbmVyYXRvciBvciB0aGUgZmlyc3QgcmVqZWN0ZWQgcHJvbWlzZSBhbW9uZyB0aG9zZVxuICogICAgeWllbGRlZC5cbiAqICAtIGlmIGFuIGVycm9yIGlzIHRocm93biBpbiB0aGUgZ2VuZXJhdG9yLCBpdCBwcm9wYWdhdGVzIHRocm91Z2hcbiAqICAgIGV2ZXJ5IGZvbGxvd2luZyB5aWVsZCB1bnRpbCBpdCBpcyBjYXVnaHQsIG9yIHVudGlsIGl0IGVzY2FwZXNcbiAqICAgIHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24gYWx0b2dldGhlciwgYW5kIGlzIHRyYW5zbGF0ZWQgaW50byBhXG4gKiAgICByZWplY3Rpb24gZm9yIHRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoZSBkZWNvcmF0ZWQgZ2VuZXJhdG9yLlxuICovXG5RLmFzeW5jID0gYXN5bmM7XG5mdW5jdGlvbiBhc3luYyhtYWtlR2VuZXJhdG9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gd2hlbiB2ZXJiIGlzIFwic2VuZFwiLCBhcmcgaXMgYSB2YWx1ZVxuICAgICAgICAvLyB3aGVuIHZlcmIgaXMgXCJ0aHJvd1wiLCBhcmcgaXMgYW4gZXhjZXB0aW9uXG4gICAgICAgIGZ1bmN0aW9uIGNvbnRpbnVlcih2ZXJiLCBhcmcpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG5cbiAgICAgICAgICAgIC8vIFVudGlsIFY4IDMuMTkgLyBDaHJvbWl1bSAyOSBpcyByZWxlYXNlZCwgU3BpZGVyTW9ua2V5IGlzIHRoZSBvbmx5XG4gICAgICAgICAgICAvLyBlbmdpbmUgdGhhdCBoYXMgYSBkZXBsb3llZCBiYXNlIG9mIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBnZW5lcmF0b3JzLlxuICAgICAgICAgICAgLy8gSG93ZXZlciwgU00ncyBnZW5lcmF0b3JzIHVzZSB0aGUgUHl0aG9uLWluc3BpcmVkIHNlbWFudGljcyBvZlxuICAgICAgICAgICAgLy8gb3V0ZGF0ZWQgRVM2IGRyYWZ0cy4gIFdlIHdvdWxkIGxpa2UgdG8gc3VwcG9ydCBFUzYsIGJ1dCB3ZSdkIGFsc29cbiAgICAgICAgICAgIC8vIGxpa2UgdG8gbWFrZSBpdCBwb3NzaWJsZSB0byB1c2UgZ2VuZXJhdG9ycyBpbiBkZXBsb3llZCBicm93c2Vycywgc29cbiAgICAgICAgICAgIC8vIHdlIGFsc28gc3VwcG9ydCBQeXRob24tc3R5bGUgZ2VuZXJhdG9ycy4gIEF0IHNvbWUgcG9pbnQgd2UgY2FuIHJlbW92ZVxuICAgICAgICAgICAgLy8gdGhpcyBibG9jay5cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTdG9wSXRlcmF0aW9uID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgLy8gRVM2IEdlbmVyYXRvcnNcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBnZW5lcmF0b3JbdmVyYl0oYXJnKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChleGNlcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFEocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2hlbihyZXN1bHQudmFsdWUsIGNhbGxiYWNrLCBlcnJiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFNwaWRlck1vbmtleSBHZW5lcmF0b3JzXG4gICAgICAgICAgICAgICAgLy8gRklYTUU6IFJlbW92ZSB0aGlzIGNhc2Ugd2hlbiBTTSBkb2VzIEVTNiBnZW5lcmF0b3JzLlxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGdlbmVyYXRvclt2ZXJiXShhcmcpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdG9wSXRlcmF0aW9uKGV4Y2VwdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRKGV4Y2VwdGlvbi52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdoZW4ocmVzdWx0LCBjYWxsYmFjaywgZXJyYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGdlbmVyYXRvciA9IG1ha2VHZW5lcmF0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gY29udGludWVyLmJpbmQoY29udGludWVyLCBcIm5leHRcIik7XG4gICAgICAgIHZhciBlcnJiYWNrID0gY29udGludWVyLmJpbmQoY29udGludWVyLCBcInRocm93XCIpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIFRoZSBzcGF3biBmdW5jdGlvbiBpcyBhIHNtYWxsIHdyYXBwZXIgYXJvdW5kIGFzeW5jIHRoYXQgaW1tZWRpYXRlbHlcbiAqIGNhbGxzIHRoZSBnZW5lcmF0b3IgYW5kIGFsc28gZW5kcyB0aGUgcHJvbWlzZSBjaGFpbiwgc28gdGhhdCBhbnlcbiAqIHVuaGFuZGxlZCBlcnJvcnMgYXJlIHRocm93biBpbnN0ZWFkIG9mIGZvcndhcmRlZCB0byB0aGUgZXJyb3JcbiAqIGhhbmRsZXIuIFRoaXMgaXMgdXNlZnVsIGJlY2F1c2UgaXQncyBleHRyZW1lbHkgY29tbW9uIHRvIHJ1blxuICogZ2VuZXJhdG9ycyBhdCB0aGUgdG9wLWxldmVsIHRvIHdvcmsgd2l0aCBsaWJyYXJpZXMuXG4gKi9cblEuc3Bhd24gPSBzcGF3bjtcbmZ1bmN0aW9uIHNwYXduKG1ha2VHZW5lcmF0b3IpIHtcbiAgICBRLmRvbmUoUS5hc3luYyhtYWtlR2VuZXJhdG9yKSgpKTtcbn1cblxuLy8gRklYTUU6IFJlbW92ZSB0aGlzIGludGVyZmFjZSBvbmNlIEVTNiBnZW5lcmF0b3JzIGFyZSBpbiBTcGlkZXJNb25rZXkuXG4vKipcbiAqIFRocm93cyBhIFJldHVyblZhbHVlIGV4Y2VwdGlvbiB0byBzdG9wIGFuIGFzeW5jaHJvbm91cyBnZW5lcmF0b3IuXG4gKlxuICogVGhpcyBpbnRlcmZhY2UgaXMgYSBzdG9wLWdhcCBtZWFzdXJlIHRvIHN1cHBvcnQgZ2VuZXJhdG9yIHJldHVyblxuICogdmFsdWVzIGluIG9sZGVyIEZpcmVmb3gvU3BpZGVyTW9ua2V5LiAgSW4gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IEVTNlxuICogZ2VuZXJhdG9ycyBsaWtlIENocm9taXVtIDI5LCBqdXN0IHVzZSBcInJldHVyblwiIGluIHlvdXIgZ2VuZXJhdG9yXG4gKiBmdW5jdGlvbnMuXG4gKlxuICogQHBhcmFtIHZhbHVlIHRoZSByZXR1cm4gdmFsdWUgZm9yIHRoZSBzdXJyb3VuZGluZyBnZW5lcmF0b3JcbiAqIEB0aHJvd3MgUmV0dXJuVmFsdWUgZXhjZXB0aW9uIHdpdGggdGhlIHZhbHVlLlxuICogQGV4YW1wbGVcbiAqIC8vIEVTNiBzdHlsZVxuICogUS5hc3luYyhmdW5jdGlvbiogKCkge1xuICogICAgICB2YXIgZm9vID0geWllbGQgZ2V0Rm9vUHJvbWlzZSgpO1xuICogICAgICB2YXIgYmFyID0geWllbGQgZ2V0QmFyUHJvbWlzZSgpO1xuICogICAgICByZXR1cm4gZm9vICsgYmFyO1xuICogfSlcbiAqIC8vIE9sZGVyIFNwaWRlck1vbmtleSBzdHlsZVxuICogUS5hc3luYyhmdW5jdGlvbiAoKSB7XG4gKiAgICAgIHZhciBmb28gPSB5aWVsZCBnZXRGb29Qcm9taXNlKCk7XG4gKiAgICAgIHZhciBiYXIgPSB5aWVsZCBnZXRCYXJQcm9taXNlKCk7XG4gKiAgICAgIFEucmV0dXJuKGZvbyArIGJhcik7XG4gKiB9KVxuICovXG5RW1wicmV0dXJuXCJdID0gX3JldHVybjtcbmZ1bmN0aW9uIF9yZXR1cm4odmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgUVJldHVyblZhbHVlKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBUaGUgcHJvbWlzZWQgZnVuY3Rpb24gZGVjb3JhdG9yIGVuc3VyZXMgdGhhdCBhbnkgcHJvbWlzZSBhcmd1bWVudHNcbiAqIGFyZSBzZXR0bGVkIGFuZCBwYXNzZWQgYXMgdmFsdWVzIChgdGhpc2AgaXMgYWxzbyBzZXR0bGVkIGFuZCBwYXNzZWRcbiAqIGFzIGEgdmFsdWUpLiAgSXQgd2lsbCBhbHNvIGVuc3VyZSB0aGF0IHRoZSByZXN1bHQgb2YgYSBmdW5jdGlvbiBpc1xuICogYWx3YXlzIGEgcHJvbWlzZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIGFkZCA9IFEucHJvbWlzZWQoZnVuY3Rpb24gKGEsIGIpIHtcbiAqICAgICByZXR1cm4gYSArIGI7XG4gKiB9KTtcbiAqIGFkZChRKGEpLCBRKEIpKTtcbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gZGVjb3JhdGVcbiAqIEByZXR1cm5zIHtmdW5jdGlvbn0gYSBmdW5jdGlvbiB0aGF0IGhhcyBiZWVuIGRlY29yYXRlZC5cbiAqL1xuUS5wcm9taXNlZCA9IHByb21pc2VkO1xuZnVuY3Rpb24gcHJvbWlzZWQoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc3ByZWFkKFt0aGlzLCBhbGwoYXJndW1lbnRzKV0sIGZ1bmN0aW9uIChzZWxmLCBhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG5cbi8qKlxuICogc2VuZHMgYSBtZXNzYWdlIHRvIGEgdmFsdWUgaW4gYSBmdXR1cmUgdHVyblxuICogQHBhcmFtIG9iamVjdCogdGhlIHJlY2lwaWVudFxuICogQHBhcmFtIG9wIHRoZSBuYW1lIG9mIHRoZSBtZXNzYWdlIG9wZXJhdGlvbiwgZS5nLiwgXCJ3aGVuXCIsXG4gKiBAcGFyYW0gYXJncyBmdXJ0aGVyIGFyZ3VtZW50cyB0byBiZSBmb3J3YXJkZWQgdG8gdGhlIG9wZXJhdGlvblxuICogQHJldHVybnMgcmVzdWx0IHtQcm9taXNlfSBhIHByb21pc2UgZm9yIHRoZSByZXN1bHQgb2YgdGhlIG9wZXJhdGlvblxuICovXG5RLmRpc3BhdGNoID0gZGlzcGF0Y2g7XG5mdW5jdGlvbiBkaXNwYXRjaChvYmplY3QsIG9wLCBhcmdzKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChvcCwgYXJncyk7XG59XG5cblByb21pc2UucHJvdG90eXBlLmRpc3BhdGNoID0gZnVuY3Rpb24gKG9wLCBhcmdzKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgUS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYucHJvbWlzZURpc3BhdGNoKGRlZmVycmVkLnJlc29sdmUsIG9wLCBhcmdzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgdmFsdWUgb2YgYSBwcm9wZXJ0eSBpbiBhIGZ1dHVyZSB0dXJuLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIHRhcmdldCBvYmplY3RcbiAqIEBwYXJhbSBuYW1lICAgICAgbmFtZSBvZiBwcm9wZXJ0eSB0byBnZXRcbiAqIEByZXR1cm4gcHJvbWlzZSBmb3IgdGhlIHByb3BlcnR5IHZhbHVlXG4gKi9cblEuZ2V0ID0gZnVuY3Rpb24gKG9iamVjdCwga2V5KSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcImdldFwiLCBba2V5XSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJnZXRcIiwgW2tleV0pO1xufTtcblxuLyoqXG4gKiBTZXRzIHRoZSB2YWx1ZSBvZiBhIHByb3BlcnR5IGluIGEgZnV0dXJlIHR1cm4uXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3Igb2JqZWN0IG9iamVjdFxuICogQHBhcmFtIG5hbWUgICAgICBuYW1lIG9mIHByb3BlcnR5IHRvIHNldFxuICogQHBhcmFtIHZhbHVlICAgICBuZXcgdmFsdWUgb2YgcHJvcGVydHlcbiAqIEByZXR1cm4gcHJvbWlzZSBmb3IgdGhlIHJldHVybiB2YWx1ZVxuICovXG5RLnNldCA9IGZ1bmN0aW9uIChvYmplY3QsIGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKFwic2V0XCIsIFtrZXksIHZhbHVlXSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKFwic2V0XCIsIFtrZXksIHZhbHVlXSk7XG59O1xuXG4vKipcbiAqIERlbGV0ZXMgYSBwcm9wZXJ0eSBpbiBhIGZ1dHVyZSB0dXJuLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIHRhcmdldCBvYmplY3RcbiAqIEBwYXJhbSBuYW1lICAgICAgbmFtZSBvZiBwcm9wZXJ0eSB0byBkZWxldGVcbiAqIEByZXR1cm4gcHJvbWlzZSBmb3IgdGhlIHJldHVybiB2YWx1ZVxuICovXG5RLmRlbCA9IC8vIFhYWCBsZWdhY3lcblFbXCJkZWxldGVcIl0gPSBmdW5jdGlvbiAob2JqZWN0LCBrZXkpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKFwiZGVsZXRlXCIsIFtrZXldKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRlbCA9IC8vIFhYWCBsZWdhY3lcblByb21pc2UucHJvdG90eXBlW1wiZGVsZXRlXCJdID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKFwiZGVsZXRlXCIsIFtrZXldKTtcbn07XG5cbi8qKlxuICogSW52b2tlcyBhIG1ldGhvZCBpbiBhIGZ1dHVyZSB0dXJuLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIHRhcmdldCBvYmplY3RcbiAqIEBwYXJhbSBuYW1lICAgICAgbmFtZSBvZiBtZXRob2QgdG8gaW52b2tlXG4gKiBAcGFyYW0gdmFsdWUgICAgIGEgdmFsdWUgdG8gcG9zdCwgdHlwaWNhbGx5IGFuIGFycmF5IG9mXG4gKiAgICAgICAgICAgICAgICAgIGludm9jYXRpb24gYXJndW1lbnRzIGZvciBwcm9taXNlcyB0aGF0XG4gKiAgICAgICAgICAgICAgICAgIGFyZSB1bHRpbWF0ZWx5IGJhY2tlZCB3aXRoIGByZXNvbHZlYCB2YWx1ZXMsXG4gKiAgICAgICAgICAgICAgICAgIGFzIG9wcG9zZWQgdG8gdGhvc2UgYmFja2VkIHdpdGggVVJMc1xuICogICAgICAgICAgICAgICAgICB3aGVyZWluIHRoZSBwb3N0ZWQgdmFsdWUgY2FuIGJlIGFueVxuICogICAgICAgICAgICAgICAgICBKU09OIHNlcmlhbGl6YWJsZSBvYmplY3QuXG4gKiBAcmV0dXJuIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWVcbiAqL1xuLy8gYm91bmQgbG9jYWxseSBiZWNhdXNlIGl0IGlzIHVzZWQgYnkgb3RoZXIgbWV0aG9kc1xuUS5tYXBwbHkgPSAvLyBYWFggQXMgcHJvcG9zZWQgYnkgXCJSZWRzYW5kcm9cIlxuUS5wb3N0ID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZSwgYXJncykge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2goXCJwb3N0XCIsIFtuYW1lLCBhcmdzXSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5tYXBwbHkgPSAvLyBYWFggQXMgcHJvcG9zZWQgYnkgXCJSZWRzYW5kcm9cIlxuUHJvbWlzZS5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uIChuYW1lLCBhcmdzKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJwb3N0XCIsIFtuYW1lLCBhcmdzXSk7XG59O1xuXG4vKipcbiAqIEludm9rZXMgYSBtZXRob2QgaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciB0YXJnZXQgb2JqZWN0XG4gKiBAcGFyYW0gbmFtZSAgICAgIG5hbWUgb2YgbWV0aG9kIHRvIGludm9rZVxuICogQHBhcmFtIC4uLmFyZ3MgICBhcnJheSBvZiBpbnZvY2F0aW9uIGFyZ3VtZW50c1xuICogQHJldHVybiBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlXG4gKi9cblEuc2VuZCA9IC8vIFhYWCBNYXJrIE1pbGxlcidzIHByb3Bvc2VkIHBhcmxhbmNlXG5RLm1jYWxsID0gLy8gWFhYIEFzIHByb3Bvc2VkIGJ5IFwiUmVkc2FuZHJvXCJcblEuaW52b2tlID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZSAvKi4uLmFyZ3MqLykge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2goXCJwb3N0XCIsIFtuYW1lLCBhcnJheV9zbGljZShhcmd1bWVudHMsIDIpXSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5zZW5kID0gLy8gWFhYIE1hcmsgTWlsbGVyJ3MgcHJvcG9zZWQgcGFybGFuY2VcblByb21pc2UucHJvdG90eXBlLm1jYWxsID0gLy8gWFhYIEFzIHByb3Bvc2VkIGJ5IFwiUmVkc2FuZHJvXCJcblByb21pc2UucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uIChuYW1lIC8qLi4uYXJncyovKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJwb3N0XCIsIFtuYW1lLCBhcnJheV9zbGljZShhcmd1bWVudHMsIDEpXSk7XG59O1xuXG4vKipcbiAqIEFwcGxpZXMgdGhlIHByb21pc2VkIGZ1bmN0aW9uIGluIGEgZnV0dXJlIHR1cm4uXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IGZ1bmN0aW9uXG4gKiBAcGFyYW0gYXJncyAgICAgIGFycmF5IG9mIGFwcGxpY2F0aW9uIGFyZ3VtZW50c1xuICovXG5RLmZhcHBseSA9IGZ1bmN0aW9uIChvYmplY3QsIGFyZ3MpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKFwiYXBwbHlcIiwgW3ZvaWQgMCwgYXJnc10pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZmFwcGx5ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcImFwcGx5XCIsIFt2b2lkIDAsIGFyZ3NdKTtcbn07XG5cbi8qKlxuICogQ2FsbHMgdGhlIHByb21pc2VkIGZ1bmN0aW9uIGluIGEgZnV0dXJlIHR1cm4uXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IGZ1bmN0aW9uXG4gKiBAcGFyYW0gLi4uYXJncyAgIGFycmF5IG9mIGFwcGxpY2F0aW9uIGFyZ3VtZW50c1xuICovXG5RW1widHJ5XCJdID1cblEuZmNhbGwgPSBmdW5jdGlvbiAob2JqZWN0IC8qIC4uLmFyZ3MqLykge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2goXCJhcHBseVwiLCBbdm9pZCAwLCBhcnJheV9zbGljZShhcmd1bWVudHMsIDEpXSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5mY2FsbCA9IGZ1bmN0aW9uICgvKi4uLmFyZ3MqLykge1xuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKFwiYXBwbHlcIiwgW3ZvaWQgMCwgYXJyYXlfc2xpY2UoYXJndW1lbnRzKV0pO1xufTtcblxuLyoqXG4gKiBCaW5kcyB0aGUgcHJvbWlzZWQgZnVuY3Rpb24sIHRyYW5zZm9ybWluZyByZXR1cm4gdmFsdWVzIGludG8gYSBmdWxmaWxsZWRcbiAqIHByb21pc2UgYW5kIHRocm93biBlcnJvcnMgaW50byBhIHJlamVjdGVkIG9uZS5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciB0YXJnZXQgZnVuY3Rpb25cbiAqIEBwYXJhbSAuLi5hcmdzICAgYXJyYXkgb2YgYXBwbGljYXRpb24gYXJndW1lbnRzXG4gKi9cblEuZmJpbmQgPSBmdW5jdGlvbiAob2JqZWN0IC8qLi4uYXJncyovKSB7XG4gICAgdmFyIHByb21pc2UgPSBRKG9iamVjdCk7XG4gICAgdmFyIGFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDEpO1xuICAgIHJldHVybiBmdW5jdGlvbiBmYm91bmQoKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlLmRpc3BhdGNoKFwiYXBwbHlcIiwgW1xuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIGFyZ3MuY29uY2F0KGFycmF5X3NsaWNlKGFyZ3VtZW50cykpXG4gICAgICAgIF0pO1xuICAgIH07XG59O1xuUHJvbWlzZS5wcm90b3R5cGUuZmJpbmQgPSBmdW5jdGlvbiAoLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdmFyIGFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMpO1xuICAgIHJldHVybiBmdW5jdGlvbiBmYm91bmQoKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlLmRpc3BhdGNoKFwiYXBwbHlcIiwgW1xuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIGFyZ3MuY29uY2F0KGFycmF5X3NsaWNlKGFyZ3VtZW50cykpXG4gICAgICAgIF0pO1xuICAgIH07XG59O1xuXG4vKipcbiAqIFJlcXVlc3RzIHRoZSBuYW1lcyBvZiB0aGUgb3duZWQgcHJvcGVydGllcyBvZiBhIHByb21pc2VkXG4gKiBvYmplY3QgaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciB0YXJnZXQgb2JqZWN0XG4gKiBAcmV0dXJuIHByb21pc2UgZm9yIHRoZSBrZXlzIG9mIHRoZSBldmVudHVhbGx5IHNldHRsZWQgb2JqZWN0XG4gKi9cblEua2V5cyA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKFwia2V5c1wiLCBbXSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKFwia2V5c1wiLCBbXSk7XG59O1xuXG4vKipcbiAqIFR1cm5zIGFuIGFycmF5IG9mIHByb21pc2VzIGludG8gYSBwcm9taXNlIGZvciBhbiBhcnJheS4gIElmIGFueSBvZlxuICogdGhlIHByb21pc2VzIGdldHMgcmVqZWN0ZWQsIHRoZSB3aG9sZSBhcnJheSBpcyByZWplY3RlZCBpbW1lZGlhdGVseS5cbiAqIEBwYXJhbSB7QXJyYXkqfSBhbiBhcnJheSAob3IgcHJvbWlzZSBmb3IgYW4gYXJyYXkpIG9mIHZhbHVlcyAob3JcbiAqIHByb21pc2VzIGZvciB2YWx1ZXMpXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIGFuIGFycmF5IG9mIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlc1xuICovXG4vLyBCeSBNYXJrIE1pbGxlclxuLy8gaHR0cDovL3dpa2kuZWNtYXNjcmlwdC5vcmcvZG9rdS5waHA/aWQ9c3RyYXdtYW46Y29uY3VycmVuY3kmcmV2PTEzMDg3NzY1MjEjYWxsZnVsZmlsbGVkXG5RLmFsbCA9IGFsbDtcbmZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xuICAgIHJldHVybiB3aGVuKHByb21pc2VzLCBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICAgICAgdmFyIHBlbmRpbmdDb3VudCA9IDA7XG4gICAgICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgICAgIGFycmF5X3JlZHVjZShwcm9taXNlcywgZnVuY3Rpb24gKHVuZGVmaW5lZCwgcHJvbWlzZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBzbmFwc2hvdDtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBpc1Byb21pc2UocHJvbWlzZSkgJiZcbiAgICAgICAgICAgICAgICAoc25hcHNob3QgPSBwcm9taXNlLmluc3BlY3QoKSkuc3RhdGUgPT09IFwiZnVsZmlsbGVkXCJcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHByb21pc2VzW2luZGV4XSA9IHNuYXBzaG90LnZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICArK3BlbmRpbmdDb3VudDtcbiAgICAgICAgICAgICAgICB3aGVuKFxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC0tcGVuZGluZ0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShwcm9taXNlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5ub3RpZnkoeyBpbmRleDogaW5kZXgsIHZhbHVlOiBwcm9ncmVzcyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHZvaWQgMCk7XG4gICAgICAgIGlmIChwZW5kaW5nQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocHJvbWlzZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH0pO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5hbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFsbCh0aGlzKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZmlyc3QgcmVzb2x2ZWQgcHJvbWlzZSBvZiBhbiBhcnJheS4gUHJpb3IgcmVqZWN0ZWQgcHJvbWlzZXMgYXJlXG4gKiBpZ25vcmVkLiAgUmVqZWN0cyBvbmx5IGlmIGFsbCBwcm9taXNlcyBhcmUgcmVqZWN0ZWQuXG4gKiBAcGFyYW0ge0FycmF5Kn0gYW4gYXJyYXkgY29udGFpbmluZyB2YWx1ZXMgb3IgcHJvbWlzZXMgZm9yIHZhbHVlc1xuICogQHJldHVybnMgYSBwcm9taXNlIGZ1bGZpbGxlZCB3aXRoIHRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgcmVzb2x2ZWQgcHJvbWlzZSxcbiAqIG9yIGEgcmVqZWN0ZWQgcHJvbWlzZSBpZiBhbGwgcHJvbWlzZXMgYXJlIHJlamVjdGVkLlxuICovXG5RLmFueSA9IGFueTtcblxuZnVuY3Rpb24gYW55KHByb21pc2VzKSB7XG4gICAgaWYgKHByb21pc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gUS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgdmFyIGRlZmVycmVkID0gUS5kZWZlcigpO1xuICAgIHZhciBwZW5kaW5nQ291bnQgPSAwO1xuICAgIGFycmF5X3JlZHVjZShwcm9taXNlcywgZnVuY3Rpb24gKHByZXYsIGN1cnJlbnQsIGluZGV4KSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gcHJvbWlzZXNbaW5kZXhdO1xuXG4gICAgICAgIHBlbmRpbmdDb3VudCsrO1xuXG4gICAgICAgIHdoZW4ocHJvbWlzZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIG9uUHJvZ3Jlc3MpO1xuICAgICAgICBmdW5jdGlvbiBvbkZ1bGZpbGxlZChyZXN1bHQpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBvblJlamVjdGVkKGVycikge1xuICAgICAgICAgICAgcGVuZGluZ0NvdW50LS07XG4gICAgICAgICAgICBpZiAocGVuZGluZ0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlamVjdGlvbiA9IGVyciB8fCBuZXcgRXJyb3IoXCJcIiArIGVycik7XG5cbiAgICAgICAgICAgICAgICByZWplY3Rpb24ubWVzc2FnZSA9IChcIlEgY2FuJ3QgZ2V0IGZ1bGZpbGxtZW50IHZhbHVlIGZyb20gYW55IHByb21pc2UsIGFsbCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwicHJvbWlzZXMgd2VyZSByZWplY3RlZC4gTGFzdCBlcnJvciBtZXNzYWdlOiBcIiArIHJlamVjdGlvbi5tZXNzYWdlKTtcblxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZWplY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG9uUHJvZ3Jlc3MocHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9ncmVzc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB1bmRlZmluZWQpO1xuXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cblByb21pc2UucHJvdG90eXBlLmFueSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYW55KHRoaXMpO1xufTtcblxuLyoqXG4gKiBXYWl0cyBmb3IgYWxsIHByb21pc2VzIHRvIGJlIHNldHRsZWQsIGVpdGhlciBmdWxmaWxsZWQgb3JcbiAqIHJlamVjdGVkLiAgVGhpcyBpcyBkaXN0aW5jdCBmcm9tIGBhbGxgIHNpbmNlIHRoYXQgd291bGQgc3RvcFxuICogd2FpdGluZyBhdCB0aGUgZmlyc3QgcmVqZWN0aW9uLiAgVGhlIHByb21pc2UgcmV0dXJuZWQgYnlcbiAqIGBhbGxSZXNvbHZlZGAgd2lsbCBuZXZlciBiZSByZWplY3RlZC5cbiAqIEBwYXJhbSBwcm9taXNlcyBhIHByb21pc2UgZm9yIGFuIGFycmF5IChvciBhbiBhcnJheSkgb2YgcHJvbWlzZXNcbiAqIChvciB2YWx1ZXMpXG4gKiBAcmV0dXJuIGEgcHJvbWlzZSBmb3IgYW4gYXJyYXkgb2YgcHJvbWlzZXNcbiAqL1xuUS5hbGxSZXNvbHZlZCA9IGRlcHJlY2F0ZShhbGxSZXNvbHZlZCwgXCJhbGxSZXNvbHZlZFwiLCBcImFsbFNldHRsZWRcIik7XG5mdW5jdGlvbiBhbGxSZXNvbHZlZChwcm9taXNlcykge1xuICAgIHJldHVybiB3aGVuKHByb21pc2VzLCBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICAgICAgcHJvbWlzZXMgPSBhcnJheV9tYXAocHJvbWlzZXMsIFEpO1xuICAgICAgICByZXR1cm4gd2hlbihhbGwoYXJyYXlfbWFwKHByb21pc2VzLCBmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHdoZW4ocHJvbWlzZSwgbm9vcCwgbm9vcCk7XG4gICAgICAgIH0pKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2VzO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuYWxsUmVzb2x2ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFsbFJlc29sdmVkKHRoaXMpO1xufTtcblxuLyoqXG4gKiBAc2VlIFByb21pc2UjYWxsU2V0dGxlZFxuICovXG5RLmFsbFNldHRsZWQgPSBhbGxTZXR0bGVkO1xuZnVuY3Rpb24gYWxsU2V0dGxlZChwcm9taXNlcykge1xuICAgIHJldHVybiBRKHByb21pc2VzKS5hbGxTZXR0bGVkKCk7XG59XG5cbi8qKlxuICogVHVybnMgYW4gYXJyYXkgb2YgcHJvbWlzZXMgaW50byBhIHByb21pc2UgZm9yIGFuIGFycmF5IG9mIHRoZWlyIHN0YXRlcyAoYXNcbiAqIHJldHVybmVkIGJ5IGBpbnNwZWN0YCkgd2hlbiB0aGV5IGhhdmUgYWxsIHNldHRsZWQuXG4gKiBAcGFyYW0ge0FycmF5W0FueSpdfSB2YWx1ZXMgYW4gYXJyYXkgKG9yIHByb21pc2UgZm9yIGFuIGFycmF5KSBvZiB2YWx1ZXMgKG9yXG4gKiBwcm9taXNlcyBmb3IgdmFsdWVzKVxuICogQHJldHVybnMge0FycmF5W1N0YXRlXX0gYW4gYXJyYXkgb2Ygc3RhdGVzIGZvciB0aGUgcmVzcGVjdGl2ZSB2YWx1ZXMuXG4gKi9cblByb21pc2UucHJvdG90eXBlLmFsbFNldHRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICAgICAgcmV0dXJuIGFsbChhcnJheV9tYXAocHJvbWlzZXMsIGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgICAgICAgICBwcm9taXNlID0gUShwcm9taXNlKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlZ2FyZGxlc3MoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuaW5zcGVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihyZWdhcmRsZXNzLCByZWdhcmRsZXNzKTtcbiAgICAgICAgfSkpO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBDYXB0dXJlcyB0aGUgZmFpbHVyZSBvZiBhIHByb21pc2UsIGdpdmluZyBhbiBvcG9ydHVuaXR5IHRvIHJlY292ZXJcbiAqIHdpdGggYSBjYWxsYmFjay4gIElmIHRoZSBnaXZlbiBwcm9taXNlIGlzIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkXG4gKiBwcm9taXNlIGlzIGZ1bGZpbGxlZC5cbiAqIEBwYXJhbSB7QW55Kn0gcHJvbWlzZSBmb3Igc29tZXRoaW5nXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayB0byBmdWxmaWxsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlmIHRoZVxuICogZ2l2ZW4gcHJvbWlzZSBpcyByZWplY3RlZFxuICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBjYWxsYmFja1xuICovXG5RLmZhaWwgPSAvLyBYWFggbGVnYWN5XG5RW1wiY2F0Y2hcIl0gPSBmdW5jdGlvbiAob2JqZWN0LCByZWplY3RlZCkge1xuICAgIHJldHVybiBRKG9iamVjdCkudGhlbih2b2lkIDAsIHJlamVjdGVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmZhaWwgPSAvLyBYWFggbGVnYWN5XG5Qcm9taXNlLnByb3RvdHlwZVtcImNhdGNoXCJdID0gZnVuY3Rpb24gKHJlamVjdGVkKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbih2b2lkIDAsIHJlamVjdGVkKTtcbn07XG5cbi8qKlxuICogQXR0YWNoZXMgYSBsaXN0ZW5lciB0aGF0IGNhbiByZXNwb25kIHRvIHByb2dyZXNzIG5vdGlmaWNhdGlvbnMgZnJvbSBhXG4gKiBwcm9taXNlJ3Mgb3JpZ2luYXRpbmcgZGVmZXJyZWQuIFRoaXMgbGlzdGVuZXIgcmVjZWl2ZXMgdGhlIGV4YWN0IGFyZ3VtZW50c1xuICogcGFzc2VkIHRvIGBgZGVmZXJyZWQubm90aWZ5YGAuXG4gKiBAcGFyYW0ge0FueSp9IHByb21pc2UgZm9yIHNvbWV0aGluZ1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgdG8gcmVjZWl2ZSBhbnkgcHJvZ3Jlc3Mgbm90aWZpY2F0aW9uc1xuICogQHJldHVybnMgdGhlIGdpdmVuIHByb21pc2UsIHVuY2hhbmdlZFxuICovXG5RLnByb2dyZXNzID0gcHJvZ3Jlc3M7XG5mdW5jdGlvbiBwcm9ncmVzcyhvYmplY3QsIHByb2dyZXNzZWQpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLnRoZW4odm9pZCAwLCB2b2lkIDAsIHByb2dyZXNzZWQpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5wcm9ncmVzcyA9IGZ1bmN0aW9uIChwcm9ncmVzc2VkKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbih2b2lkIDAsIHZvaWQgMCwgcHJvZ3Jlc3NlZCk7XG59O1xuXG4vKipcbiAqIFByb3ZpZGVzIGFuIG9wcG9ydHVuaXR5IHRvIG9ic2VydmUgdGhlIHNldHRsaW5nIG9mIGEgcHJvbWlzZSxcbiAqIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGUgcHJvbWlzZSBpcyBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuICBGb3J3YXJkc1xuICogdGhlIHJlc29sdXRpb24gdG8gdGhlIHJldHVybmVkIHByb21pc2Ugd2hlbiB0aGUgY2FsbGJhY2sgaXMgZG9uZS5cbiAqIFRoZSBjYWxsYmFjayBjYW4gcmV0dXJuIGEgcHJvbWlzZSB0byBkZWZlciBjb21wbGV0aW9uLlxuICogQHBhcmFtIHtBbnkqfSBwcm9taXNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayB0byBvYnNlcnZlIHRoZSByZXNvbHV0aW9uIG9mIHRoZSBnaXZlblxuICogcHJvbWlzZSwgdGFrZXMgbm8gYXJndW1lbnRzLlxuICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmVzb2x1dGlvbiBvZiB0aGUgZ2l2ZW4gcHJvbWlzZSB3aGVuXG4gKiBgYGZpbmBgIGlzIGRvbmUuXG4gKi9cblEuZmluID0gLy8gWFhYIGxlZ2FjeVxuUVtcImZpbmFsbHlcIl0gPSBmdW5jdGlvbiAob2JqZWN0LCBjYWxsYmFjaykge1xuICAgIHJldHVybiBRKG9iamVjdClbXCJmaW5hbGx5XCJdKGNhbGxiYWNrKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmZpbiA9IC8vIFhYWCBsZWdhY3lcblByb21pc2UucHJvdG90eXBlW1wiZmluYWxseVwiXSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrLmFwcGx5ICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUSBjYW4ndCBhcHBseSBmaW5hbGx5IGNhbGxiYWNrXCIpO1xuICAgIH1cbiAgICBjYWxsYmFjayA9IFEoY2FsbGJhY2spO1xuICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5mY2FsbCgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIC8vIFRPRE8gYXR0ZW1wdCB0byByZWN5Y2xlIHRoZSByZWplY3Rpb24gd2l0aCBcInRoaXNcIi5cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmZjYWxsKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBUZXJtaW5hdGVzIGEgY2hhaW4gb2YgcHJvbWlzZXMsIGZvcmNpbmcgcmVqZWN0aW9ucyB0byBiZVxuICogdGhyb3duIGFzIGV4Y2VwdGlvbnMuXG4gKiBAcGFyYW0ge0FueSp9IHByb21pc2UgYXQgdGhlIGVuZCBvZiBhIGNoYWluIG9mIHByb21pc2VzXG4gKiBAcmV0dXJucyBub3RoaW5nXG4gKi9cblEuZG9uZSA9IGZ1bmN0aW9uIChvYmplY3QsIGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIHByb2dyZXNzKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kb25lKGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIHByb2dyZXNzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRvbmUgPSBmdW5jdGlvbiAoZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3MpIHtcbiAgICB2YXIgb25VbmhhbmRsZWRFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAvLyBmb3J3YXJkIHRvIGEgZnV0dXJlIHR1cm4gc28gdGhhdCBgYHdoZW5gYFxuICAgICAgICAvLyBkb2VzIG5vdCBjYXRjaCBpdCBhbmQgdHVybiBpdCBpbnRvIGEgcmVqZWN0aW9uLlxuICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG1ha2VTdGFja1RyYWNlTG9uZyhlcnJvciwgcHJvbWlzZSk7XG4gICAgICAgICAgICBpZiAoUS5vbmVycm9yKSB7XG4gICAgICAgICAgICAgICAgUS5vbmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBBdm9pZCB1bm5lY2Vzc2FyeSBgbmV4dFRpY2tgaW5nIHZpYSBhbiB1bm5lY2Vzc2FyeSBgd2hlbmAuXG4gICAgdmFyIHByb21pc2UgPSBmdWxmaWxsZWQgfHwgcmVqZWN0ZWQgfHwgcHJvZ3Jlc3MgP1xuICAgICAgICB0aGlzLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3MpIDpcbiAgICAgICAgdGhpcztcblxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJiBwcm9jZXNzICYmIHByb2Nlc3MuZG9tYWluKSB7XG4gICAgICAgIG9uVW5oYW5kbGVkRXJyb3IgPSBwcm9jZXNzLmRvbWFpbi5iaW5kKG9uVW5oYW5kbGVkRXJyb3IpO1xuICAgIH1cblxuICAgIHByb21pc2UudGhlbih2b2lkIDAsIG9uVW5oYW5kbGVkRXJyb3IpO1xufTtcblxuLyoqXG4gKiBDYXVzZXMgYSBwcm9taXNlIHRvIGJlIHJlamVjdGVkIGlmIGl0IGRvZXMgbm90IGdldCBmdWxmaWxsZWQgYmVmb3JlXG4gKiBzb21lIG1pbGxpc2Vjb25kcyB0aW1lIG91dC5cbiAqIEBwYXJhbSB7QW55Kn0gcHJvbWlzZVxuICogQHBhcmFtIHtOdW1iZXJ9IG1pbGxpc2Vjb25kcyB0aW1lb3V0XG4gKiBAcGFyYW0ge0FueSp9IGN1c3RvbSBlcnJvciBtZXNzYWdlIG9yIEVycm9yIG9iamVjdCAob3B0aW9uYWwpXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSByZXNvbHV0aW9uIG9mIHRoZSBnaXZlbiBwcm9taXNlIGlmIGl0IGlzXG4gKiBmdWxmaWxsZWQgYmVmb3JlIHRoZSB0aW1lb3V0LCBvdGhlcndpc2UgcmVqZWN0ZWQuXG4gKi9cblEudGltZW91dCA9IGZ1bmN0aW9uIChvYmplY3QsIG1zLCBlcnJvcikge1xuICAgIHJldHVybiBRKG9iamVjdCkudGltZW91dChtcywgZXJyb3IpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGltZW91dCA9IGZ1bmN0aW9uIChtcywgZXJyb3IpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIHZhciB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFlcnJvciB8fCBcInN0cmluZ1wiID09PSB0eXBlb2YgZXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9yID0gbmV3IEVycm9yKGVycm9yIHx8IFwiVGltZWQgb3V0IGFmdGVyIFwiICsgbXMgKyBcIiBtc1wiKTtcbiAgICAgICAgICAgIGVycm9yLmNvZGUgPSBcIkVUSU1FRE9VVFwiO1xuICAgICAgICB9XG4gICAgICAgIGRlZmVycmVkLnJlamVjdChlcnJvcik7XG4gICAgfSwgbXMpO1xuXG4gICAgdGhpcy50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKGV4Y2VwdGlvbikge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgfSwgZGVmZXJyZWQubm90aWZ5KTtcblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIGdpdmVuIHZhbHVlIChvciBwcm9taXNlZCB2YWx1ZSksIHNvbWVcbiAqIG1pbGxpc2Vjb25kcyBhZnRlciBpdCByZXNvbHZlZC4gUGFzc2VzIHJlamVjdGlvbnMgaW1tZWRpYXRlbHkuXG4gKiBAcGFyYW0ge0FueSp9IHByb21pc2VcbiAqIEBwYXJhbSB7TnVtYmVyfSBtaWxsaXNlY29uZHNcbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHJlc29sdXRpb24gb2YgdGhlIGdpdmVuIHByb21pc2UgYWZ0ZXIgbWlsbGlzZWNvbmRzXG4gKiB0aW1lIGhhcyBlbGFwc2VkIHNpbmNlIHRoZSByZXNvbHV0aW9uIG9mIHRoZSBnaXZlbiBwcm9taXNlLlxuICogSWYgdGhlIGdpdmVuIHByb21pc2UgcmVqZWN0cywgdGhhdCBpcyBwYXNzZWQgaW1tZWRpYXRlbHkuXG4gKi9cblEuZGVsYXkgPSBmdW5jdGlvbiAob2JqZWN0LCB0aW1lb3V0KSB7XG4gICAgaWYgKHRpbWVvdXQgPT09IHZvaWQgMCkge1xuICAgICAgICB0aW1lb3V0ID0gb2JqZWN0O1xuICAgICAgICBvYmplY3QgPSB2b2lkIDA7XG4gICAgfVxuICAgIHJldHVybiBRKG9iamVjdCkuZGVsYXkodGltZW91dCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5kZWxheSA9IGZ1bmN0aW9uICh0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBQYXNzZXMgYSBjb250aW51YXRpb24gdG8gYSBOb2RlIGZ1bmN0aW9uLCB3aGljaCBpcyBjYWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAqIGFyZ3VtZW50cyBwcm92aWRlZCBhcyBhbiBhcnJheSwgYW5kIHJldHVybnMgYSBwcm9taXNlLlxuICpcbiAqICAgICAgUS5uZmFwcGx5KEZTLnJlYWRGaWxlLCBbX19maWxlbmFtZV0pXG4gKiAgICAgIC50aGVuKGZ1bmN0aW9uIChjb250ZW50KSB7XG4gKiAgICAgIH0pXG4gKlxuICovXG5RLm5mYXBwbHkgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFyZ3MpIHtcbiAgICByZXR1cm4gUShjYWxsYmFjaykubmZhcHBseShhcmdzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm5mYXBwbHkgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgdmFyIG5vZGVBcmdzID0gYXJyYXlfc2xpY2UoYXJncyk7XG4gICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgIHRoaXMuZmFwcGx5KG5vZGVBcmdzKS5mYWlsKGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG4vKipcbiAqIFBhc3NlcyBhIGNvbnRpbnVhdGlvbiB0byBhIE5vZGUgZnVuY3Rpb24sIHdoaWNoIGlzIGNhbGxlZCB3aXRoIHRoZSBnaXZlblxuICogYXJndW1lbnRzIHByb3ZpZGVkIGluZGl2aWR1YWxseSwgYW5kIHJldHVybnMgYSBwcm9taXNlLlxuICogQGV4YW1wbGVcbiAqIFEubmZjYWxsKEZTLnJlYWRGaWxlLCBfX2ZpbGVuYW1lKVxuICogLnRoZW4oZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAqIH0pXG4gKlxuICovXG5RLm5mY2FsbCA9IGZ1bmN0aW9uIChjYWxsYmFjayAvKi4uLmFyZ3MqLykge1xuICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAxKTtcbiAgICByZXR1cm4gUShjYWxsYmFjaykubmZhcHBseShhcmdzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm5mY2FsbCA9IGZ1bmN0aW9uICgvKi4uLmFyZ3MqLykge1xuICAgIHZhciBub2RlQXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cyk7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgdGhpcy5mYXBwbHkobm9kZUFyZ3MpLmZhaWwoZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn07XG5cbi8qKlxuICogV3JhcHMgYSBOb2RlSlMgY29udGludWF0aW9uIHBhc3NpbmcgZnVuY3Rpb24gYW5kIHJldHVybnMgYW4gZXF1aXZhbGVudFxuICogdmVyc2lvbiB0aGF0IHJldHVybnMgYSBwcm9taXNlLlxuICogQGV4YW1wbGVcbiAqIFEubmZiaW5kKEZTLnJlYWRGaWxlLCBfX2ZpbGVuYW1lKShcInV0Zi04XCIpXG4gKiAudGhlbihjb25zb2xlLmxvZylcbiAqIC5kb25lKClcbiAqL1xuUS5uZmJpbmQgPVxuUS5kZW5vZGVpZnkgPSBmdW5jdGlvbiAoY2FsbGJhY2sgLyouLi5hcmdzKi8pIHtcbiAgICBpZiAoY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJRIGNhbid0IHdyYXAgYW4gdW5kZWZpbmVkIGZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgICB2YXIgYmFzZUFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDEpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBub2RlQXJncyA9IGJhc2VBcmdzLmNvbmNhdChhcnJheV9zbGljZShhcmd1bWVudHMpKTtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICAgICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgICAgICBRKGNhbGxiYWNrKS5mYXBwbHkobm9kZUFyZ3MpLmZhaWwoZGVmZXJyZWQucmVqZWN0KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm5mYmluZCA9XG5Qcm9taXNlLnByb3RvdHlwZS5kZW5vZGVpZnkgPSBmdW5jdGlvbiAoLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgYXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cyk7XG4gICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgIHJldHVybiBRLmRlbm9kZWlmeS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufTtcblxuUS5uYmluZCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdGhpc3AgLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgYmFzZUFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDIpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBub2RlQXJncyA9IGJhc2VBcmdzLmNvbmNhdChhcnJheV9zbGljZShhcmd1bWVudHMpKTtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICAgICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgICAgICBmdW5jdGlvbiBib3VuZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzcCwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBRKGJvdW5kKS5mYXBwbHkobm9kZUFyZ3MpLmZhaWwoZGVmZXJyZWQucmVqZWN0KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm5iaW5kID0gZnVuY3Rpb24gKC8qdGhpc3AsIC4uLmFyZ3MqLykge1xuICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAwKTtcbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgcmV0dXJuIFEubmJpbmQuYXBwbHkodm9pZCAwLCBhcmdzKTtcbn07XG5cbi8qKlxuICogQ2FsbHMgYSBtZXRob2Qgb2YgYSBOb2RlLXN0eWxlIG9iamVjdCB0aGF0IGFjY2VwdHMgYSBOb2RlLXN0eWxlXG4gKiBjYWxsYmFjayB3aXRoIGEgZ2l2ZW4gYXJyYXkgb2YgYXJndW1lbnRzLCBwbHVzIGEgcHJvdmlkZWQgY2FsbGJhY2suXG4gKiBAcGFyYW0gb2JqZWN0IGFuIG9iamVjdCB0aGF0IGhhcyB0aGUgbmFtZWQgbWV0aG9kXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBtZXRob2Qgb2Ygb2JqZWN0XG4gKiBAcGFyYW0ge0FycmF5fSBhcmdzIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBtZXRob2Q7IHRoZSBjYWxsYmFja1xuICogd2lsbCBiZSBwcm92aWRlZCBieSBRIGFuZCBhcHBlbmRlZCB0byB0aGVzZSBhcmd1bWVudHMuXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSB2YWx1ZSBvciBlcnJvclxuICovXG5RLm5tYXBwbHkgPSAvLyBYWFggQXMgcHJvcG9zZWQgYnkgXCJSZWRzYW5kcm9cIlxuUS5ucG9zdCA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWUsIGFyZ3MpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLm5wb3N0KG5hbWUsIGFyZ3MpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubm1hcHBseSA9IC8vIFhYWCBBcyBwcm9wb3NlZCBieSBcIlJlZHNhbmRyb1wiXG5Qcm9taXNlLnByb3RvdHlwZS5ucG9zdCA9IGZ1bmN0aW9uIChuYW1lLCBhcmdzKSB7XG4gICAgdmFyIG5vZGVBcmdzID0gYXJyYXlfc2xpY2UoYXJncyB8fCBbXSk7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgdGhpcy5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIG5vZGVBcmdzXSkuZmFpbChkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuLyoqXG4gKiBDYWxscyBhIG1ldGhvZCBvZiBhIE5vZGUtc3R5bGUgb2JqZWN0IHRoYXQgYWNjZXB0cyBhIE5vZGUtc3R5bGVcbiAqIGNhbGxiYWNrLCBmb3J3YXJkaW5nIHRoZSBnaXZlbiB2YXJpYWRpYyBhcmd1bWVudHMsIHBsdXMgYSBwcm92aWRlZFxuICogY2FsbGJhY2sgYXJndW1lbnQuXG4gKiBAcGFyYW0gb2JqZWN0IGFuIG9iamVjdCB0aGF0IGhhcyB0aGUgbmFtZWQgbWV0aG9kXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBtZXRob2Qgb2Ygb2JqZWN0XG4gKiBAcGFyYW0gLi4uYXJncyBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgbWV0aG9kOyB0aGUgY2FsbGJhY2sgd2lsbFxuICogYmUgcHJvdmlkZWQgYnkgUSBhbmQgYXBwZW5kZWQgdG8gdGhlc2UgYXJndW1lbnRzLlxuICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgdmFsdWUgb3IgZXJyb3JcbiAqL1xuUS5uc2VuZCA9IC8vIFhYWCBCYXNlZCBvbiBNYXJrIE1pbGxlcidzIHByb3Bvc2VkIFwic2VuZFwiXG5RLm5tY2FsbCA9IC8vIFhYWCBCYXNlZCBvbiBcIlJlZHNhbmRybydzXCIgcHJvcG9zYWxcblEubmludm9rZSA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWUgLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgbm9kZUFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDIpO1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgIFEob2JqZWN0KS5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIG5vZGVBcmdzXSkuZmFpbChkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubnNlbmQgPSAvLyBYWFggQmFzZWQgb24gTWFyayBNaWxsZXIncyBwcm9wb3NlZCBcInNlbmRcIlxuUHJvbWlzZS5wcm90b3R5cGUubm1jYWxsID0gLy8gWFhYIEJhc2VkIG9uIFwiUmVkc2FuZHJvJ3NcIiBwcm9wb3NhbFxuUHJvbWlzZS5wcm90b3R5cGUubmludm9rZSA9IGZ1bmN0aW9uIChuYW1lIC8qLi4uYXJncyovKSB7XG4gICAgdmFyIG5vZGVBcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAxKTtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIG5vZGVBcmdzLnB1c2goZGVmZXJyZWQubWFrZU5vZGVSZXNvbHZlcigpKTtcbiAgICB0aGlzLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgbm9kZUFyZ3NdKS5mYWlsKGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG4vKipcbiAqIElmIGEgZnVuY3Rpb24gd291bGQgbGlrZSB0byBzdXBwb3J0IGJvdGggTm9kZSBjb250aW51YXRpb24tcGFzc2luZy1zdHlsZSBhbmRcbiAqIHByb21pc2UtcmV0dXJuaW5nLXN0eWxlLCBpdCBjYW4gZW5kIGl0cyBpbnRlcm5hbCBwcm9taXNlIGNoYWluIHdpdGhcbiAqIGBub2RlaWZ5KG5vZGViYWNrKWAsIGZvcndhcmRpbmcgdGhlIG9wdGlvbmFsIG5vZGViYWNrIGFyZ3VtZW50LiAgSWYgdGhlIHVzZXJcbiAqIGVsZWN0cyB0byB1c2UgYSBub2RlYmFjaywgdGhlIHJlc3VsdCB3aWxsIGJlIHNlbnQgdGhlcmUuICBJZiB0aGV5IGRvIG5vdFxuICogcGFzcyBhIG5vZGViYWNrLCB0aGV5IHdpbGwgcmVjZWl2ZSB0aGUgcmVzdWx0IHByb21pc2UuXG4gKiBAcGFyYW0gb2JqZWN0IGEgcmVzdWx0IChvciBhIHByb21pc2UgZm9yIGEgcmVzdWx0KVxuICogQHBhcmFtIHtGdW5jdGlvbn0gbm9kZWJhY2sgYSBOb2RlLmpzLXN0eWxlIGNhbGxiYWNrXG4gKiBAcmV0dXJucyBlaXRoZXIgdGhlIHByb21pc2Ugb3Igbm90aGluZ1xuICovXG5RLm5vZGVpZnkgPSBub2RlaWZ5O1xuZnVuY3Rpb24gbm9kZWlmeShvYmplY3QsIG5vZGViYWNrKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5ub2RlaWZ5KG5vZGViYWNrKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUubm9kZWlmeSA9IGZ1bmN0aW9uIChub2RlYmFjaykge1xuICAgIGlmIChub2RlYmFjaykge1xuICAgICAgICB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBub2RlYmFjayhudWxsLCB2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBub2RlYmFjayhlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufTtcblxuUS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUS5ub0NvbmZsaWN0IG9ubHkgd29ya3Mgd2hlbiBRIGlzIHVzZWQgYXMgYSBnbG9iYWxcIik7XG59O1xuXG4vLyBBbGwgY29kZSBiZWZvcmUgdGhpcyBwb2ludCB3aWxsIGJlIGZpbHRlcmVkIGZyb20gc3RhY2sgdHJhY2VzLlxudmFyIHFFbmRpbmdMaW5lID0gY2FwdHVyZUxpbmUoKTtcblxucmV0dXJuIFE7XG5cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ3JlYWN0L2xpYi9SZWFjdERPTScpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEF1dG9Gb2N1c1V0aWxzXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcblxudmFyIGZpbmRET01Ob2RlID0gcmVxdWlyZSgnLi9maW5kRE9NTm9kZScpO1xudmFyIGZvY3VzTm9kZSA9IHJlcXVpcmUoJ2ZianMvbGliL2ZvY3VzTm9kZScpO1xuXG52YXIgTWl4aW4gPSB7XG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuYXV0b0ZvY3VzKSB7XG4gICAgICBmb2N1c05vZGUoZmluZERPTU5vZGUodGhpcykpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIEF1dG9Gb2N1c1V0aWxzID0ge1xuICBNaXhpbjogTWl4aW4sXG5cbiAgZm9jdXNET01Db21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICBmb2N1c05vZGUoUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBBdXRvRm9jdXNVdGlsczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UHJvcGFnYXRvcnMgPSByZXF1aXJlKCcuL0V2ZW50UHJvcGFnYXRvcnMnKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlID0gcmVxdWlyZSgnLi9GYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUnKTtcbnZhciBTeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50Jyk7XG52YXIgU3ludGhldGljSW5wdXRFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljSW5wdXRFdmVudCcpO1xuXG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG52YXIgRU5EX0tFWUNPREVTID0gWzksIDEzLCAyNywgMzJdOyAvLyBUYWIsIFJldHVybiwgRXNjLCBTcGFjZVxudmFyIFNUQVJUX0tFWUNPREUgPSAyMjk7XG5cbnZhciBjYW5Vc2VDb21wb3NpdGlvbkV2ZW50ID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmICdDb21wb3NpdGlvbkV2ZW50JyBpbiB3aW5kb3c7XG5cbnZhciBkb2N1bWVudE1vZGUgPSBudWxsO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiAnZG9jdW1lbnRNb2RlJyBpbiBkb2N1bWVudCkge1xuICBkb2N1bWVudE1vZGUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XG59XG5cbi8vIFdlYmtpdCBvZmZlcnMgYSB2ZXJ5IHVzZWZ1bCBgdGV4dElucHV0YCBldmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvXG4vLyBkaXJlY3RseSByZXByZXNlbnQgYGJlZm9yZUlucHV0YC4gVGhlIElFIGB0ZXh0aW5wdXRgIGV2ZW50IGlzIG5vdCBhc1xuLy8gdXNlZnVsLCBzbyB3ZSBkb24ndCB1c2UgaXQuXG52YXIgY2FuVXNlVGV4dElucHV0RXZlbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ1RleHRFdmVudCcgaW4gd2luZG93ICYmICFkb2N1bWVudE1vZGUgJiYgIWlzUHJlc3RvKCk7XG5cbi8vIEluIElFOSssIHdlIGhhdmUgYWNjZXNzIHRvIGNvbXBvc2l0aW9uIGV2ZW50cywgYnV0IHRoZSBkYXRhIHN1cHBsaWVkXG4vLyBieSB0aGUgbmF0aXZlIGNvbXBvc2l0aW9uZW5kIGV2ZW50IG1heSBiZSBpbmNvcnJlY3QuIEphcGFuZXNlIGlkZW9ncmFwaGljXG4vLyBzcGFjZXMsIGZvciBpbnN0YW5jZSAoXFx1MzAwMCkgYXJlIG5vdCByZWNvcmRlZCBjb3JyZWN0bHkuXG52YXIgdXNlRmFsbGJhY2tDb21wb3NpdGlvbkRhdGEgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgKCFjYW5Vc2VDb21wb3NpdGlvbkV2ZW50IHx8IGRvY3VtZW50TW9kZSAmJiBkb2N1bWVudE1vZGUgPiA4ICYmIGRvY3VtZW50TW9kZSA8PSAxMSk7XG5cbi8qKlxuICogT3BlcmEgPD0gMTIgaW5jbHVkZXMgVGV4dEV2ZW50IGluIHdpbmRvdywgYnV0IGRvZXMgbm90IGZpcmVcbiAqIHRleHQgaW5wdXQgZXZlbnRzLiBSZWx5IG9uIGtleXByZXNzIGluc3RlYWQuXG4gKi9cbmZ1bmN0aW9uIGlzUHJlc3RvKCkge1xuICB2YXIgb3BlcmEgPSB3aW5kb3cub3BlcmE7XG4gIHJldHVybiB0eXBlb2Ygb3BlcmEgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvcGVyYS52ZXJzaW9uID09PSAnZnVuY3Rpb24nICYmIHBhcnNlSW50KG9wZXJhLnZlcnNpb24oKSwgMTApIDw9IDEyO1xufVxuXG52YXIgU1BBQ0VCQVJfQ09ERSA9IDMyO1xudmFyIFNQQUNFQkFSX0NIQVIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFNQQUNFQkFSX0NPREUpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbi8vIEV2ZW50cyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0eSBuYW1lcy5cbnZhciBldmVudFR5cGVzID0ge1xuICBiZWZvcmVJbnB1dDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQmVmb3JlSW5wdXQ6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkJlZm9yZUlucHV0Q2FwdHVyZTogbnVsbCB9KVxuICAgIH0sXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvbkVuZCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlQcmVzcywgdG9wTGV2ZWxUeXBlcy50b3BUZXh0SW5wdXQsIHRvcExldmVsVHlwZXMudG9wUGFzdGVdXG4gIH0sXG4gIGNvbXBvc2l0aW9uRW5kOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db21wb3NpdGlvbkVuZDogbnVsbCB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25FbmRDYXB0dXJlOiBudWxsIH0pXG4gICAgfSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcEJsdXIsIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQsIHRvcExldmVsVHlwZXMudG9wS2V5RG93biwgdG9wTGV2ZWxUeXBlcy50b3BLZXlQcmVzcywgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcCwgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZURvd25dXG4gIH0sXG4gIGNvbXBvc2l0aW9uU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uU3RhcnQ6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uU3RhcnRDYXB0dXJlOiBudWxsIH0pXG4gICAgfSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcEJsdXIsIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25TdGFydCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bl1cbiAgfSxcbiAgY29tcG9zaXRpb25VcGRhdGU6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uVXBkYXRlOiBudWxsIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Db21wb3NpdGlvblVwZGF0ZUNhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvblVwZGF0ZSwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bl1cbiAgfVxufTtcblxuLy8gVHJhY2sgd2hldGhlciB3ZSd2ZSBldmVyIGhhbmRsZWQgYSBrZXlwcmVzcyBvbiB0aGUgc3BhY2Uga2V5LlxudmFyIGhhc1NwYWNlS2V5cHJlc3MgPSBmYWxzZTtcblxuLyoqXG4gKiBSZXR1cm4gd2hldGhlciBhIG5hdGl2ZSBrZXlwcmVzcyBldmVudCBpcyBhc3N1bWVkIHRvIGJlIGEgY29tbWFuZC5cbiAqIFRoaXMgaXMgcmVxdWlyZWQgYmVjYXVzZSBGaXJlZm94IGZpcmVzIGBrZXlwcmVzc2AgZXZlbnRzIGZvciBrZXkgY29tbWFuZHNcbiAqIChjdXQsIGNvcHksIHNlbGVjdC1hbGwsIGV0Yy4pIGV2ZW4gdGhvdWdoIG5vIGNoYXJhY3RlciBpcyBpbnNlcnRlZC5cbiAqL1xuZnVuY3Rpb24gaXNLZXlwcmVzc0NvbW1hbmQobmF0aXZlRXZlbnQpIHtcbiAgcmV0dXJuIChuYXRpdmVFdmVudC5jdHJsS2V5IHx8IG5hdGl2ZUV2ZW50LmFsdEtleSB8fCBuYXRpdmVFdmVudC5tZXRhS2V5KSAmJlxuICAvLyBjdHJsS2V5ICYmIGFsdEtleSBpcyBlcXVpdmFsZW50IHRvIEFsdEdyLCBhbmQgaXMgbm90IGEgY29tbWFuZC5cbiAgIShuYXRpdmVFdmVudC5jdHJsS2V5ICYmIG5hdGl2ZUV2ZW50LmFsdEtleSk7XG59XG5cbi8qKlxuICogVHJhbnNsYXRlIG5hdGl2ZSB0b3AgbGV2ZWwgZXZlbnRzIGludG8gZXZlbnQgdHlwZXMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZVxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRDb21wb3NpdGlvbkV2ZW50VHlwZSh0b3BMZXZlbFR5cGUpIHtcbiAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25TdGFydDpcbiAgICAgIHJldHVybiBldmVudFR5cGVzLmNvbXBvc2l0aW9uU3RhcnQ7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kOlxuICAgICAgcmV0dXJuIGV2ZW50VHlwZXMuY29tcG9zaXRpb25FbmQ7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uVXBkYXRlOlxuICAgICAgcmV0dXJuIGV2ZW50VHlwZXMuY29tcG9zaXRpb25VcGRhdGU7XG4gIH1cbn1cblxuLyoqXG4gKiBEb2VzIG91ciBmYWxsYmFjayBiZXN0LWd1ZXNzIG1vZGVsIHRoaW5rIHRoaXMgZXZlbnQgc2lnbmlmaWVzIHRoYXRcbiAqIGNvbXBvc2l0aW9uIGhhcyBiZWd1bj9cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRmFsbGJhY2tDb21wb3NpdGlvblN0YXJ0KHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duICYmIG5hdGl2ZUV2ZW50LmtleUNvZGUgPT09IFNUQVJUX0tFWUNPREU7XG59XG5cbi8qKlxuICogRG9lcyBvdXIgZmFsbGJhY2sgbW9kZSB0aGluayB0aGF0IHRoaXMgZXZlbnQgaXMgdGhlIGVuZCBvZiBjb21wb3NpdGlvbj9cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSB7XG4gIHN3aXRjaCAodG9wTGV2ZWxUeXBlKSB7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVVwOlxuICAgICAgLy8gQ29tbWFuZCBrZXlzIGluc2VydCBvciBjbGVhciBJTUUgaW5wdXQuXG4gICAgICByZXR1cm4gRU5EX0tFWUNPREVTLmluZGV4T2YobmF0aXZlRXZlbnQua2V5Q29kZSkgIT09IC0xO1xuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duOlxuICAgICAgLy8gRXhwZWN0IElNRSBrZXlDb2RlIG9uIGVhY2gga2V5ZG93bi4gSWYgd2UgZ2V0IGFueSBvdGhlclxuICAgICAgLy8gY29kZSB3ZSBtdXN0IGhhdmUgZXhpdGVkIGVhcmxpZXIuXG4gICAgICByZXR1cm4gbmF0aXZlRXZlbnQua2V5Q29kZSAhPT0gU1RBUlRfS0VZQ09ERTtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3M6XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bjpcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQmx1cjpcbiAgICAgIC8vIEV2ZW50cyBhcmUgbm90IHBvc3NpYmxlIHdpdGhvdXQgY2FuY2VsbGluZyBJTUUuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogR29vZ2xlIElucHV0IFRvb2xzIHByb3ZpZGVzIGNvbXBvc2l0aW9uIGRhdGEgdmlhIGEgQ3VzdG9tRXZlbnQsXG4gKiB3aXRoIHRoZSBgZGF0YWAgcHJvcGVydHkgcG9wdWxhdGVkIGluIHRoZSBgZGV0YWlsYCBvYmplY3QuIElmIHRoaXNcbiAqIGlzIGF2YWlsYWJsZSBvbiB0aGUgZXZlbnQgb2JqZWN0LCB1c2UgaXQuIElmIG5vdCwgdGhpcyBpcyBhIHBsYWluXG4gKiBjb21wb3NpdGlvbiBldmVudCBhbmQgd2UgaGF2ZSBub3RoaW5nIHNwZWNpYWwgdG8gZXh0cmFjdC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldERhdGFGcm9tQ3VzdG9tRXZlbnQobmF0aXZlRXZlbnQpIHtcbiAgdmFyIGRldGFpbCA9IG5hdGl2ZUV2ZW50LmRldGFpbDtcbiAgaWYgKHR5cGVvZiBkZXRhaWwgPT09ICdvYmplY3QnICYmICdkYXRhJyBpbiBkZXRhaWwpIHtcbiAgICByZXR1cm4gZGV0YWlsLmRhdGE7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8vIFRyYWNrIHRoZSBjdXJyZW50IElNRSBjb21wb3NpdGlvbiBmYWxsYmFjayBvYmplY3QsIGlmIGFueS5cbnZhciBjdXJyZW50Q29tcG9zaXRpb24gPSBudWxsO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/b2JqZWN0fSBBIFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RDb21wb3NpdGlvbkV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICB2YXIgZXZlbnRUeXBlO1xuICB2YXIgZmFsbGJhY2tEYXRhO1xuXG4gIGlmIChjYW5Vc2VDb21wb3NpdGlvbkV2ZW50KSB7XG4gICAgZXZlbnRUeXBlID0gZ2V0Q29tcG9zaXRpb25FdmVudFR5cGUodG9wTGV2ZWxUeXBlKTtcbiAgfSBlbHNlIGlmICghY3VycmVudENvbXBvc2l0aW9uKSB7XG4gICAgaWYgKGlzRmFsbGJhY2tDb21wb3NpdGlvblN0YXJ0KHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpKSB7XG4gICAgICBldmVudFR5cGUgPSBldmVudFR5cGVzLmNvbXBvc2l0aW9uU3RhcnQ7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSkge1xuICAgIGV2ZW50VHlwZSA9IGV2ZW50VHlwZXMuY29tcG9zaXRpb25FbmQ7XG4gIH1cblxuICBpZiAoIWV2ZW50VHlwZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKHVzZUZhbGxiYWNrQ29tcG9zaXRpb25EYXRhKSB7XG4gICAgLy8gVGhlIGN1cnJlbnQgY29tcG9zaXRpb24gaXMgc3RvcmVkIHN0YXRpY2FsbHkgYW5kIG11c3Qgbm90IGJlXG4gICAgLy8gb3ZlcndyaXR0ZW4gd2hpbGUgY29tcG9zaXRpb24gY29udGludWVzLlxuICAgIGlmICghY3VycmVudENvbXBvc2l0aW9uICYmIGV2ZW50VHlwZSA9PT0gZXZlbnRUeXBlcy5jb21wb3NpdGlvblN0YXJ0KSB7XG4gICAgICBjdXJyZW50Q29tcG9zaXRpb24gPSBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUuZ2V0UG9vbGVkKHRvcExldmVsVGFyZ2V0KTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gZXZlbnRUeXBlcy5jb21wb3NpdGlvbkVuZCkge1xuICAgICAgaWYgKGN1cnJlbnRDb21wb3NpdGlvbikge1xuICAgICAgICBmYWxsYmFja0RhdGEgPSBjdXJyZW50Q29tcG9zaXRpb24uZ2V0RGF0YSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBldmVudCA9IFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZSwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICBpZiAoZmFsbGJhY2tEYXRhKSB7XG4gICAgLy8gSW5qZWN0IGRhdGEgZ2VuZXJhdGVkIGZyb20gZmFsbGJhY2sgcGF0aCBpbnRvIHRoZSBzeW50aGV0aWMgZXZlbnQuXG4gICAgLy8gVGhpcyBtYXRjaGVzIHRoZSBwcm9wZXJ0eSBvZiBuYXRpdmUgQ29tcG9zaXRpb25FdmVudEludGVyZmFjZS5cbiAgICBldmVudC5kYXRhID0gZmFsbGJhY2tEYXRhO1xuICB9IGVsc2Uge1xuICAgIHZhciBjdXN0b21EYXRhID0gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCk7XG4gICAgaWYgKGN1c3RvbURhdGEgIT09IG51bGwpIHtcbiAgICAgIGV2ZW50LmRhdGEgPSBjdXN0b21EYXRhO1xuICAgIH1cbiAgfVxuXG4gIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudCk7XG4gIHJldHVybiBldmVudDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBUaGUgc3RyaW5nIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBgYmVmb3JlSW5wdXRgIGV2ZW50LlxuICovXG5mdW5jdGlvbiBnZXROYXRpdmVCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQ6XG4gICAgICByZXR1cm4gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCk7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzOlxuICAgICAgLyoqXG4gICAgICAgKiBJZiBuYXRpdmUgYHRleHRJbnB1dGAgZXZlbnRzIGFyZSBhdmFpbGFibGUsIG91ciBnb2FsIGlzIHRvIG1ha2VcbiAgICAgICAqIHVzZSBvZiB0aGVtLiBIb3dldmVyLCB0aGVyZSBpcyBhIHNwZWNpYWwgY2FzZTogdGhlIHNwYWNlYmFyIGtleS5cbiAgICAgICAqIEluIFdlYmtpdCwgcHJldmVudGluZyBkZWZhdWx0IG9uIGEgc3BhY2ViYXIgYHRleHRJbnB1dGAgZXZlbnRcbiAgICAgICAqIGNhbmNlbHMgY2hhcmFjdGVyIGluc2VydGlvbiwgYnV0IGl0ICphbHNvKiBjYXVzZXMgdGhlIGJyb3dzZXJcbiAgICAgICAqIHRvIGZhbGwgYmFjayB0byBpdHMgZGVmYXVsdCBzcGFjZWJhciBiZWhhdmlvciBvZiBzY3JvbGxpbmcgdGhlXG4gICAgICAgKiBwYWdlLlxuICAgICAgICpcbiAgICAgICAqIFRyYWNraW5nIGF0OlxuICAgICAgICogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM1NTEwM1xuICAgICAgICpcbiAgICAgICAqIFRvIGF2b2lkIHRoaXMgaXNzdWUsIHVzZSB0aGUga2V5cHJlc3MgZXZlbnQgYXMgaWYgbm8gYHRleHRJbnB1dGBcbiAgICAgICAqIGV2ZW50IGlzIGF2YWlsYWJsZS5cbiAgICAgICAqL1xuICAgICAgdmFyIHdoaWNoID0gbmF0aXZlRXZlbnQud2hpY2g7XG4gICAgICBpZiAod2hpY2ggIT09IFNQQUNFQkFSX0NPREUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGhhc1NwYWNlS2V5cHJlc3MgPSB0cnVlO1xuICAgICAgcmV0dXJuIFNQQUNFQkFSX0NIQVI7XG5cbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVGV4dElucHV0OlxuICAgICAgLy8gUmVjb3JkIHRoZSBjaGFyYWN0ZXJzIHRvIGJlIGFkZGVkIHRvIHRoZSBET00uXG4gICAgICB2YXIgY2hhcnMgPSBuYXRpdmVFdmVudC5kYXRhO1xuXG4gICAgICAvLyBJZiBpdCdzIGEgc3BhY2ViYXIgY2hhcmFjdGVyLCBhc3N1bWUgdGhhdCB3ZSBoYXZlIGFscmVhZHkgaGFuZGxlZFxuICAgICAgLy8gaXQgYXQgdGhlIGtleXByZXNzIGxldmVsIGFuZCBiYWlsIGltbWVkaWF0ZWx5LiBBbmRyb2lkIENocm9tZVxuICAgICAgLy8gZG9lc24ndCBnaXZlIHVzIGtleWNvZGVzLCBzbyB3ZSBuZWVkIHRvIGJsYWNrbGlzdCBpdC5cbiAgICAgIGlmIChjaGFycyA9PT0gU1BBQ0VCQVJfQ0hBUiAmJiBoYXNTcGFjZUtleXByZXNzKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2hhcnM7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgLy8gRm9yIG90aGVyIG5hdGl2ZSBldmVudCB0eXBlcywgZG8gbm90aGluZy5cbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogRm9yIGJyb3dzZXJzIHRoYXQgZG8gbm90IHByb3ZpZGUgdGhlIGB0ZXh0SW5wdXRgIGV2ZW50LCBleHRyYWN0IHRoZVxuICogYXBwcm9wcmlhdGUgc3RyaW5nIHRvIHVzZSBmb3IgU3ludGhldGljSW5wdXRFdmVudC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBUaGUgZmFsbGJhY2sgc3RyaW5nIGZvciB0aGlzIGBiZWZvcmVJbnB1dGAgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGdldEZhbGxiYWNrQmVmb3JlSW5wdXRDaGFycyh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSB7XG4gIC8vIElmIHdlIGFyZSBjdXJyZW50bHkgY29tcG9zaW5nIChJTUUpIGFuZCB1c2luZyBhIGZhbGxiYWNrIHRvIGRvIHNvLFxuICAvLyB0cnkgdG8gZXh0cmFjdCB0aGUgY29tcG9zZWQgY2hhcmFjdGVycyBmcm9tIHRoZSBmYWxsYmFjayBvYmplY3QuXG4gIGlmIChjdXJyZW50Q29tcG9zaXRpb24pIHtcbiAgICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kIHx8IGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSkge1xuICAgICAgdmFyIGNoYXJzID0gY3VycmVudENvbXBvc2l0aW9uLmdldERhdGEoKTtcbiAgICAgIEZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZS5yZWxlYXNlKGN1cnJlbnRDb21wb3NpdGlvbik7XG4gICAgICBjdXJyZW50Q29tcG9zaXRpb24gPSBudWxsO1xuICAgICAgcmV0dXJuIGNoYXJzO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHN3aXRjaCAodG9wTGV2ZWxUeXBlKSB7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBhc3RlOlxuICAgICAgLy8gSWYgYSBwYXN0ZSBldmVudCBvY2N1cnMgYWZ0ZXIgYSBrZXlwcmVzcywgdGhyb3cgb3V0IHRoZSBpbnB1dFxuICAgICAgLy8gY2hhcnMuIFBhc3RlIGV2ZW50cyBzaG91bGQgbm90IGxlYWQgdG8gQmVmb3JlSW5wdXQgZXZlbnRzLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzOlxuICAgICAgLyoqXG4gICAgICAgKiBBcyBvZiB2MjcsIEZpcmVmb3ggbWF5IGZpcmUga2V5cHJlc3MgZXZlbnRzIGV2ZW4gd2hlbiBubyBjaGFyYWN0ZXJcbiAgICAgICAqIHdpbGwgYmUgaW5zZXJ0ZWQuIEEgZmV3IHBvc3NpYmlsaXRpZXM6XG4gICAgICAgKlxuICAgICAgICogLSBgd2hpY2hgIGlzIGAwYC4gQXJyb3cga2V5cywgRXNjIGtleSwgZXRjLlxuICAgICAgICpcbiAgICAgICAqIC0gYHdoaWNoYCBpcyB0aGUgcHJlc3NlZCBrZXkgY29kZSwgYnV0IG5vIGNoYXIgaXMgYXZhaWxhYmxlLlxuICAgICAgICogICBFeDogJ0FsdEdyICsgZGAgaW4gUG9saXNoLiBUaGVyZSBpcyBubyBtb2RpZmllZCBjaGFyYWN0ZXIgZm9yXG4gICAgICAgKiAgIHRoaXMga2V5IGNvbWJpbmF0aW9uIGFuZCBubyBjaGFyYWN0ZXIgaXMgaW5zZXJ0ZWQgaW50byB0aGVcbiAgICAgICAqICAgZG9jdW1lbnQsIGJ1dCBGRiBmaXJlcyB0aGUga2V5cHJlc3MgZm9yIGNoYXIgY29kZSBgMTAwYCBhbnl3YXkuXG4gICAgICAgKiAgIE5vIGBpbnB1dGAgZXZlbnQgd2lsbCBvY2N1ci5cbiAgICAgICAqXG4gICAgICAgKiAtIGB3aGljaGAgaXMgdGhlIHByZXNzZWQga2V5IGNvZGUsIGJ1dCBhIGNvbW1hbmQgY29tYmluYXRpb24gaXNcbiAgICAgICAqICAgYmVpbmcgdXNlZC4gRXg6IGBDbWQrQ2AuIE5vIGNoYXJhY3RlciBpcyBpbnNlcnRlZCwgYW5kIG5vXG4gICAgICAgKiAgIGBpbnB1dGAgZXZlbnQgd2lsbCBvY2N1ci5cbiAgICAgICAqL1xuICAgICAgaWYgKG5hdGl2ZUV2ZW50LndoaWNoICYmICFpc0tleXByZXNzQ29tbWFuZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUobmF0aXZlRXZlbnQud2hpY2gpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kOlxuICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrQ29tcG9zaXRpb25EYXRhID8gbnVsbCA6IG5hdGl2ZUV2ZW50LmRhdGE7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogRXh0cmFjdCBhIFN5bnRoZXRpY0lucHV0RXZlbnQgZm9yIGBiZWZvcmVJbnB1dGAsIGJhc2VkIG9uIGVpdGhlciBuYXRpdmVcbiAqIGB0ZXh0SW5wdXRgIG9yIGZhbGxiYWNrIGJlaGF2aW9yLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/b2JqZWN0fSBBIFN5bnRoZXRpY0lucHV0RXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RCZWZvcmVJbnB1dEV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICB2YXIgY2hhcnM7XG5cbiAgaWYgKGNhblVzZVRleHRJbnB1dEV2ZW50KSB7XG4gICAgY2hhcnMgPSBnZXROYXRpdmVCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpO1xuICB9IGVsc2Uge1xuICAgIGNoYXJzID0gZ2V0RmFsbGJhY2tCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpO1xuICB9XG5cbiAgLy8gSWYgbm8gY2hhcmFjdGVycyBhcmUgYmVpbmcgaW5zZXJ0ZWQsIG5vIEJlZm9yZUlucHV0IGV2ZW50IHNob3VsZFxuICAvLyBiZSBmaXJlZC5cbiAgaWYgKCFjaGFycykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGV2ZW50ID0gU3ludGhldGljSW5wdXRFdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlcy5iZWZvcmVJbnB1dCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICBldmVudC5kYXRhID0gY2hhcnM7XG4gIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudCk7XG4gIHJldHVybiBldmVudDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gYG9uQmVmb3JlSW5wdXRgIGV2ZW50IHRvIG1hdGNoXG4gKiBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDEzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDEzMTEwNS8jZXZlbnRzLWlucHV0ZXZlbnRzLlxuICpcbiAqIFRoaXMgZXZlbnQgcGx1Z2luIGlzIGJhc2VkIG9uIHRoZSBuYXRpdmUgYHRleHRJbnB1dGAgZXZlbnRcbiAqIGF2YWlsYWJsZSBpbiBDaHJvbWUsIFNhZmFyaSwgT3BlcmEsIGFuZCBJRS4gVGhpcyBldmVudCBmaXJlcyBhZnRlclxuICogYG9uS2V5UHJlc3NgIGFuZCBgb25Db21wb3NpdGlvbkVuZGAsIGJ1dCBiZWZvcmUgYG9uSW5wdXRgLlxuICpcbiAqIGBiZWZvcmVJbnB1dGAgaXMgc3BlYydkIGJ1dCBub3QgaW1wbGVtZW50ZWQgaW4gYW55IGJyb3dzZXJzLCBhbmRcbiAqIHRoZSBgaW5wdXRgIGV2ZW50IGRvZXMgbm90IHByb3ZpZGUgYW55IHVzZWZ1bCBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGhhc1xuICogYWN0dWFsbHkgYmVlbiBhZGRlZCwgY29udHJhcnkgdG8gdGhlIHNwZWMuIFRodXMsIGB0ZXh0SW5wdXRgIGlzIHRoZSBiZXN0XG4gKiBhdmFpbGFibGUgZXZlbnQgdG8gaWRlbnRpZnkgdGhlIGNoYXJhY3RlcnMgdGhhdCBoYXZlIGFjdHVhbGx5IGJlZW4gaW5zZXJ0ZWRcbiAqIGludG8gdGhlIHRhcmdldCBub2RlLlxuICpcbiAqIFRoaXMgcGx1Z2luIGlzIGFsc28gcmVzcG9uc2libGUgZm9yIGVtaXR0aW5nIGBjb21wb3NpdGlvbmAgZXZlbnRzLCB0aHVzXG4gKiBhbGxvd2luZyB1cyB0byBzaGFyZSBjb21wb3NpdGlvbiBmYWxsYmFjayBjb2RlIGZvciBib3RoIGBiZWZvcmVJbnB1dGAgYW5kXG4gKiBgY29tcG9zaXRpb25gIGV2ZW50IHR5cGVzLlxuICovXG52YXIgQmVmb3JlSW5wdXRFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50c31cbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICByZXR1cm4gW2V4dHJhY3RDb21wb3NpdGlvbkV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCksIGV4dHJhY3RCZWZvcmVJbnB1dEV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCldO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJlZm9yZUlucHV0RXZlbnRQbHVnaW47IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIENTU1Byb3BlcnR5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENTUyBwcm9wZXJ0aWVzIHdoaWNoIGFjY2VwdCBudW1iZXJzIGJ1dCBhcmUgbm90IGluIHVuaXRzIG9mIFwicHhcIi5cbiAqL1xudmFyIGlzVW5pdGxlc3NOdW1iZXIgPSB7XG4gIGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiB0cnVlLFxuICBib3hGbGV4OiB0cnVlLFxuICBib3hGbGV4R3JvdXA6IHRydWUsXG4gIGJveE9yZGluYWxHcm91cDogdHJ1ZSxcbiAgY29sdW1uQ291bnQ6IHRydWUsXG4gIGZsZXg6IHRydWUsXG4gIGZsZXhHcm93OiB0cnVlLFxuICBmbGV4UG9zaXRpdmU6IHRydWUsXG4gIGZsZXhTaHJpbms6IHRydWUsXG4gIGZsZXhOZWdhdGl2ZTogdHJ1ZSxcbiAgZmxleE9yZGVyOiB0cnVlLFxuICBmb250V2VpZ2h0OiB0cnVlLFxuICBsaW5lQ2xhbXA6IHRydWUsXG4gIGxpbmVIZWlnaHQ6IHRydWUsXG4gIG9wYWNpdHk6IHRydWUsXG4gIG9yZGVyOiB0cnVlLFxuICBvcnBoYW5zOiB0cnVlLFxuICB0YWJTaXplOiB0cnVlLFxuICB3aWRvd3M6IHRydWUsXG4gIHpJbmRleDogdHJ1ZSxcbiAgem9vbTogdHJ1ZSxcblxuICAvLyBTVkctcmVsYXRlZCBwcm9wZXJ0aWVzXG4gIGZpbGxPcGFjaXR5OiB0cnVlLFxuICBzdG9wT3BhY2l0eTogdHJ1ZSxcbiAgc3Ryb2tlRGFzaG9mZnNldDogdHJ1ZSxcbiAgc3Ryb2tlT3BhY2l0eTogdHJ1ZSxcbiAgc3Ryb2tlV2lkdGg6IHRydWVcbn07XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHByZWZpeCB2ZW5kb3Itc3BlY2lmaWMgcHJlZml4LCBlZzogV2Via2l0XG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IHN0eWxlIG5hbWUsIGVnOiB0cmFuc2l0aW9uRHVyYXRpb25cbiAqIEByZXR1cm4ge3N0cmluZ30gc3R5bGUgbmFtZSBwcmVmaXhlZCB3aXRoIGBwcmVmaXhgLCBwcm9wZXJseSBjYW1lbENhc2VkLCBlZzpcbiAqIFdlYmtpdFRyYW5zaXRpb25EdXJhdGlvblxuICovXG5mdW5jdGlvbiBwcmVmaXhLZXkocHJlZml4LCBrZXkpIHtcbiAgcmV0dXJuIHByZWZpeCArIGtleS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleS5zdWJzdHJpbmcoMSk7XG59XG5cbi8qKlxuICogU3VwcG9ydCBzdHlsZSBuYW1lcyB0aGF0IG1heSBjb21lIHBhc3NlZCBpbiBwcmVmaXhlZCBieSBhZGRpbmcgcGVybXV0YXRpb25zXG4gKiBvZiB2ZW5kb3IgcHJlZml4ZXMuXG4gKi9cbnZhciBwcmVmaXhlcyA9IFsnV2Via2l0JywgJ21zJywgJ01veicsICdPJ107XG5cbi8vIFVzaW5nIE9iamVjdC5rZXlzIGhlcmUsIG9yIGVsc2UgdGhlIHZhbmlsbGEgZm9yLWluIGxvb3AgbWFrZXMgSUU4IGdvIGludG8gYW5cbi8vIGluZmluaXRlIGxvb3AsIGJlY2F1c2UgaXQgaXRlcmF0ZXMgb3ZlciB0aGUgbmV3bHkgYWRkZWQgcHJvcHMgdG9vLlxuT2JqZWN0LmtleXMoaXNVbml0bGVzc051bWJlcikuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICBwcmVmaXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChwcmVmaXgpIHtcbiAgICBpc1VuaXRsZXNzTnVtYmVyW3ByZWZpeEtleShwcmVmaXgsIHByb3ApXSA9IGlzVW5pdGxlc3NOdW1iZXJbcHJvcF07XG4gIH0pO1xufSk7XG5cbi8qKlxuICogTW9zdCBzdHlsZSBwcm9wZXJ0aWVzIGNhbiBiZSB1bnNldCBieSBkb2luZyAuc3R5bGVbcHJvcF0gPSAnJyBidXQgSUU4XG4gKiBkb2Vzbid0IGxpa2UgZG9pbmcgdGhhdCB3aXRoIHNob3J0aGFuZCBwcm9wZXJ0aWVzIHNvIGZvciB0aGUgcHJvcGVydGllcyB0aGF0XG4gKiBJRTggYnJlYWtzIG9uLCB3aGljaCBhcmUgbGlzdGVkIGhlcmUsIHdlIGluc3RlYWQgdW5zZXQgZWFjaCBvZiB0aGVcbiAqIGluZGl2aWR1YWwgcHJvcGVydGllcy4gU2VlIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEyMzg1LlxuICogVGhlIDQtdmFsdWUgJ2Nsb2NrJyBwcm9wZXJ0aWVzIGxpa2UgbWFyZ2luLCBwYWRkaW5nLCBib3JkZXItd2lkdGggc2VlbSB0b1xuICogYmVoYXZlIHdpdGhvdXQgYW55IHByb2JsZW1zLiBDdXJpb3VzbHksIGxpc3Qtc3R5bGUgd29ya3MgdG9vIHdpdGhvdXQgYW55XG4gKiBzcGVjaWFsIHByb2RkaW5nLlxuICovXG52YXIgc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zID0ge1xuICBiYWNrZ3JvdW5kOiB7XG4gICAgYmFja2dyb3VuZEF0dGFjaG1lbnQ6IHRydWUsXG4gICAgYmFja2dyb3VuZENvbG9yOiB0cnVlLFxuICAgIGJhY2tncm91bmRJbWFnZTogdHJ1ZSxcbiAgICBiYWNrZ3JvdW5kUG9zaXRpb25YOiB0cnVlLFxuICAgIGJhY2tncm91bmRQb3NpdGlvblk6IHRydWUsXG4gICAgYmFja2dyb3VuZFJlcGVhdDogdHJ1ZVxuICB9LFxuICBiYWNrZ3JvdW5kUG9zaXRpb246IHtcbiAgICBiYWNrZ3JvdW5kUG9zaXRpb25YOiB0cnVlLFxuICAgIGJhY2tncm91bmRQb3NpdGlvblk6IHRydWVcbiAgfSxcbiAgYm9yZGVyOiB7XG4gICAgYm9yZGVyV2lkdGg6IHRydWUsXG4gICAgYm9yZGVyU3R5bGU6IHRydWUsXG4gICAgYm9yZGVyQ29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyQm90dG9tOiB7XG4gICAgYm9yZGVyQm90dG9tV2lkdGg6IHRydWUsXG4gICAgYm9yZGVyQm90dG9tU3R5bGU6IHRydWUsXG4gICAgYm9yZGVyQm90dG9tQ29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyTGVmdDoge1xuICAgIGJvcmRlckxlZnRXaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJMZWZ0U3R5bGU6IHRydWUsXG4gICAgYm9yZGVyTGVmdENvbG9yOiB0cnVlXG4gIH0sXG4gIGJvcmRlclJpZ2h0OiB7XG4gICAgYm9yZGVyUmlnaHRXaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJSaWdodFN0eWxlOiB0cnVlLFxuICAgIGJvcmRlclJpZ2h0Q29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyVG9wOiB7XG4gICAgYm9yZGVyVG9wV2lkdGg6IHRydWUsXG4gICAgYm9yZGVyVG9wU3R5bGU6IHRydWUsXG4gICAgYm9yZGVyVG9wQ29sb3I6IHRydWVcbiAgfSxcbiAgZm9udDoge1xuICAgIGZvbnRTdHlsZTogdHJ1ZSxcbiAgICBmb250VmFyaWFudDogdHJ1ZSxcbiAgICBmb250V2VpZ2h0OiB0cnVlLFxuICAgIGZvbnRTaXplOiB0cnVlLFxuICAgIGxpbmVIZWlnaHQ6IHRydWUsXG4gICAgZm9udEZhbWlseTogdHJ1ZVxuICB9LFxuICBvdXRsaW5lOiB7XG4gICAgb3V0bGluZVdpZHRoOiB0cnVlLFxuICAgIG91dGxpbmVTdHlsZTogdHJ1ZSxcbiAgICBvdXRsaW5lQ29sb3I6IHRydWVcbiAgfVxufTtcblxudmFyIENTU1Byb3BlcnR5ID0ge1xuICBpc1VuaXRsZXNzTnVtYmVyOiBpc1VuaXRsZXNzTnVtYmVyLFxuICBzaG9ydGhhbmRQcm9wZXJ0eUV4cGFuc2lvbnM6IHNob3J0aGFuZFByb3BlcnR5RXhwYW5zaW9uc1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDU1NQcm9wZXJ0eTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQ1NTUHJvcGVydHlPcGVyYXRpb25zXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENTU1Byb3BlcnR5ID0gcmVxdWlyZSgnLi9DU1NQcm9wZXJ0eScpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xuXG52YXIgY2FtZWxpemVTdHlsZU5hbWUgPSByZXF1aXJlKCdmYmpzL2xpYi9jYW1lbGl6ZVN0eWxlTmFtZScpO1xudmFyIGRhbmdlcm91c1N0eWxlVmFsdWUgPSByZXF1aXJlKCcuL2Rhbmdlcm91c1N0eWxlVmFsdWUnKTtcbnZhciBoeXBoZW5hdGVTdHlsZU5hbWUgPSByZXF1aXJlKCdmYmpzL2xpYi9oeXBoZW5hdGVTdHlsZU5hbWUnKTtcbnZhciBtZW1vaXplU3RyaW5nT25seSA9IHJlcXVpcmUoJ2ZianMvbGliL21lbW9pemVTdHJpbmdPbmx5Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIHByb2Nlc3NTdHlsZU5hbWUgPSBtZW1vaXplU3RyaW5nT25seShmdW5jdGlvbiAoc3R5bGVOYW1lKSB7XG4gIHJldHVybiBoeXBoZW5hdGVTdHlsZU5hbWUoc3R5bGVOYW1lKTtcbn0pO1xuXG52YXIgaGFzU2hvcnRoYW5kUHJvcGVydHlCdWcgPSBmYWxzZTtcbnZhciBzdHlsZUZsb2F0QWNjZXNzb3IgPSAnY3NzRmxvYXQnO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICB2YXIgdGVtcFN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGU7XG4gIHRyeSB7XG4gICAgLy8gSUU4IHRocm93cyBcIkludmFsaWQgYXJndW1lbnQuXCIgaWYgcmVzZXR0aW5nIHNob3J0aGFuZCBzdHlsZSBwcm9wZXJ0aWVzLlxuICAgIHRlbXBTdHlsZS5mb250ID0gJyc7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBoYXNTaG9ydGhhbmRQcm9wZXJ0eUJ1ZyA9IHRydWU7XG4gIH1cbiAgLy8gSUU4IG9ubHkgc3VwcG9ydHMgYWNjZXNzaW5nIGNzc0Zsb2F0IChzdGFuZGFyZCkgYXMgc3R5bGVGbG9hdFxuICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmNzc0Zsb2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdHlsZUZsb2F0QWNjZXNzb3IgPSAnc3R5bGVGbG9hdCc7XG4gIH1cbn1cblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgLy8gJ21zVHJhbnNmb3JtJyBpcyBjb3JyZWN0LCBidXQgdGhlIG90aGVyIHByZWZpeGVzIHNob3VsZCBiZSBjYXBpdGFsaXplZFxuICB2YXIgYmFkVmVuZG9yZWRTdHlsZU5hbWVQYXR0ZXJuID0gL14oPzp3ZWJraXR8bW96fG8pW0EtWl0vO1xuXG4gIC8vIHN0eWxlIHZhbHVlcyBzaG91bGRuJ3QgY29udGFpbiBhIHNlbWljb2xvblxuICB2YXIgYmFkU3R5bGVWYWx1ZVdpdGhTZW1pY29sb25QYXR0ZXJuID0gLztcXHMqJC87XG5cbiAgdmFyIHdhcm5lZFN0eWxlTmFtZXMgPSB7fTtcbiAgdmFyIHdhcm5lZFN0eWxlVmFsdWVzID0ge307XG5cbiAgdmFyIHdhcm5IeXBoZW5hdGVkU3R5bGVOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAod2FybmVkU3R5bGVOYW1lcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiB3YXJuZWRTdHlsZU5hbWVzW25hbWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2FybmVkU3R5bGVOYW1lc1tuYW1lXSA9IHRydWU7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdVbnN1cHBvcnRlZCBzdHlsZSBwcm9wZXJ0eSAlcy4gRGlkIHlvdSBtZWFuICVzPycsIG5hbWUsIGNhbWVsaXplU3R5bGVOYW1lKG5hbWUpKSA6IHVuZGVmaW5lZDtcbiAgfTtcblxuICB2YXIgd2FybkJhZFZlbmRvcmVkU3R5bGVOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAod2FybmVkU3R5bGVOYW1lcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiB3YXJuZWRTdHlsZU5hbWVzW25hbWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2FybmVkU3R5bGVOYW1lc1tuYW1lXSA9IHRydWU7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdVbnN1cHBvcnRlZCB2ZW5kb3ItcHJlZml4ZWQgc3R5bGUgcHJvcGVydHkgJXMuIERpZCB5b3UgbWVhbiAlcz8nLCBuYW1lLCBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKSkgOiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgdmFyIHdhcm5TdHlsZVZhbHVlV2l0aFNlbWljb2xvbiA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmICh3YXJuZWRTdHlsZVZhbHVlcy5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkgJiYgd2FybmVkU3R5bGVWYWx1ZXNbdmFsdWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2FybmVkU3R5bGVWYWx1ZXNbdmFsdWVdID0gdHJ1ZTtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1N0eWxlIHByb3BlcnR5IHZhbHVlcyBzaG91bGRuXFwndCBjb250YWluIGEgc2VtaWNvbG9uLiAnICsgJ1RyeSBcIiVzOiAlc1wiIGluc3RlYWQuJywgbmFtZSwgdmFsdWUucmVwbGFjZShiYWRTdHlsZVZhbHVlV2l0aFNlbWljb2xvblBhdHRlcm4sICcnKSkgOiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICovXG4gIHZhciB3YXJuVmFsaWRTdHlsZSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmIChuYW1lLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICB3YXJuSHlwaGVuYXRlZFN0eWxlTmFtZShuYW1lKTtcbiAgICB9IGVsc2UgaWYgKGJhZFZlbmRvcmVkU3R5bGVOYW1lUGF0dGVybi50ZXN0KG5hbWUpKSB7XG4gICAgICB3YXJuQmFkVmVuZG9yZWRTdHlsZU5hbWUobmFtZSk7XG4gICAgfSBlbHNlIGlmIChiYWRTdHlsZVZhbHVlV2l0aFNlbWljb2xvblBhdHRlcm4udGVzdCh2YWx1ZSkpIHtcbiAgICAgIHdhcm5TdHlsZVZhbHVlV2l0aFNlbWljb2xvbihuYW1lLCB2YWx1ZSk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIE9wZXJhdGlvbnMgZm9yIGRlYWxpbmcgd2l0aCBDU1MgcHJvcGVydGllcy5cbiAqL1xudmFyIENTU1Byb3BlcnR5T3BlcmF0aW9ucyA9IHtcblxuICAvKipcbiAgICogU2VyaWFsaXplcyBhIG1hcHBpbmcgb2Ygc3R5bGUgcHJvcGVydGllcyBmb3IgdXNlIGFzIGlubGluZSBzdHlsZXM6XG4gICAqXG4gICAqICAgPiBjcmVhdGVNYXJrdXBGb3JTdHlsZXMoe3dpZHRoOiAnMjAwcHgnLCBoZWlnaHQ6IDB9KVxuICAgKiAgIFwid2lkdGg6MjAwcHg7aGVpZ2h0OjA7XCJcbiAgICpcbiAgICogVW5kZWZpbmVkIHZhbHVlcyBhcmUgaWdub3JlZCBzbyB0aGF0IGRlY2xhcmF0aXZlIHByb2dyYW1taW5nIGlzIGVhc2llci5cbiAgICogVGhlIHJlc3VsdCBzaG91bGQgYmUgSFRNTC1lc2NhcGVkIGJlZm9yZSBpbnNlcnRpb24gaW50byB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gc3R5bGVzXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JTdHlsZXM6IGZ1bmN0aW9uIChzdHlsZXMpIHtcbiAgICB2YXIgc2VyaWFsaXplZCA9ICcnO1xuICAgIGZvciAodmFyIHN0eWxlTmFtZSBpbiBzdHlsZXMpIHtcbiAgICAgIGlmICghc3R5bGVzLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgc3R5bGVWYWx1ZSA9IHN0eWxlc1tzdHlsZU5hbWVdO1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FyblZhbGlkU3R5bGUoc3R5bGVOYW1lLCBzdHlsZVZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHlsZVZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgc2VyaWFsaXplZCArPSBwcm9jZXNzU3R5bGVOYW1lKHN0eWxlTmFtZSkgKyAnOic7XG4gICAgICAgIHNlcmlhbGl6ZWQgKz0gZGFuZ2Vyb3VzU3R5bGVWYWx1ZShzdHlsZU5hbWUsIHN0eWxlVmFsdWUpICsgJzsnO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VyaWFsaXplZCB8fCBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBmb3IgbXVsdGlwbGUgc3R5bGVzIG9uIGEgbm9kZS4gIElmIGEgdmFsdWUgaXMgc3BlY2lmaWVkIGFzXG4gICAqICcnIChlbXB0eSBzdHJpbmcpLCB0aGUgY29ycmVzcG9uZGluZyBzdHlsZSBwcm9wZXJ0eSB3aWxsIGJlIHVuc2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAgICogQHBhcmFtIHtvYmplY3R9IHN0eWxlc1xuICAgKi9cbiAgc2V0VmFsdWVGb3JTdHlsZXM6IGZ1bmN0aW9uIChub2RlLCBzdHlsZXMpIHtcbiAgICB2YXIgc3R5bGUgPSBub2RlLnN0eWxlO1xuICAgIGZvciAodmFyIHN0eWxlTmFtZSBpbiBzdHlsZXMpIHtcbiAgICAgIGlmICghc3R5bGVzLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuVmFsaWRTdHlsZShzdHlsZU5hbWUsIHN0eWxlc1tzdHlsZU5hbWVdKTtcbiAgICAgIH1cbiAgICAgIHZhciBzdHlsZVZhbHVlID0gZGFuZ2Vyb3VzU3R5bGVWYWx1ZShzdHlsZU5hbWUsIHN0eWxlc1tzdHlsZU5hbWVdKTtcbiAgICAgIGlmIChzdHlsZU5hbWUgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgc3R5bGVOYW1lID0gc3R5bGVGbG9hdEFjY2Vzc29yO1xuICAgICAgfVxuICAgICAgaWYgKHN0eWxlVmFsdWUpIHtcbiAgICAgICAgc3R5bGVbc3R5bGVOYW1lXSA9IHN0eWxlVmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZXhwYW5zaW9uID0gaGFzU2hvcnRoYW5kUHJvcGVydHlCdWcgJiYgQ1NTUHJvcGVydHkuc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zW3N0eWxlTmFtZV07XG4gICAgICAgIGlmIChleHBhbnNpb24pIHtcbiAgICAgICAgICAvLyBTaG9ydGhhbmQgcHJvcGVydHkgdGhhdCBJRTggd29uJ3QgbGlrZSB1bnNldHRpbmcsIHNvIHVuc2V0IGVhY2hcbiAgICAgICAgICAvLyBjb21wb25lbnQgdG8gcGxhY2F0ZSBpdFxuICAgICAgICAgIGZvciAodmFyIGluZGl2aWR1YWxTdHlsZU5hbWUgaW4gZXhwYW5zaW9uKSB7XG4gICAgICAgICAgICBzdHlsZVtpbmRpdmlkdWFsU3R5bGVOYW1lXSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHlsZVtzdHlsZU5hbWVdID0gJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKENTU1Byb3BlcnR5T3BlcmF0aW9ucywgJ0NTU1Byb3BlcnR5T3BlcmF0aW9ucycsIHtcbiAgc2V0VmFsdWVGb3JTdHlsZXM6ICdzZXRWYWx1ZUZvclN0eWxlcydcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENTU1Byb3BlcnR5T3BlcmF0aW9uczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQ2FsbGJhY2tRdWV1ZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCBwc2V1ZG8tZXZlbnQgbW9kdWxlIHRvIGhlbHAga2VlcCB0cmFjayBvZiBjb21wb25lbnRzIHdhaXRpbmcgdG9cbiAqIGJlIG5vdGlmaWVkIHdoZW4gdGhlaXIgRE9NIHJlcHJlc2VudGF0aW9ucyBhcmUgYXZhaWxhYmxlIGZvciB1c2UuXG4gKlxuICogVGhpcyBpbXBsZW1lbnRzIGBQb29sZWRDbGFzc2AsIHNvIHlvdSBzaG91bGQgbmV2ZXIgbmVlZCB0byBpbnN0YW50aWF0ZSB0aGlzLlxuICogSW5zdGVhZCwgdXNlIGBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpYC5cbiAqXG4gKiBAY2xhc3MgUmVhY3RNb3VudFJlYWR5XG4gKiBAaW1wbGVtZW50cyBQb29sZWRDbGFzc1xuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIENhbGxiYWNrUXVldWUoKSB7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IG51bGw7XG4gIHRoaXMuX2NvbnRleHRzID0gbnVsbDtcbn1cblxuYXNzaWduKENhbGxiYWNrUXVldWUucHJvdG90eXBlLCB7XG5cbiAgLyoqXG4gICAqIEVucXVldWVzIGEgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIGBub3RpZnlBbGxgIGlzIGludm9rZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIEludm9rZWQgd2hlbiBgbm90aWZ5QWxsYCBpcyBpbnZva2VkLlxuICAgKiBAcGFyYW0gez9vYmplY3R9IGNvbnRleHQgQ29udGV4dCB0byBjYWxsIGBjYWxsYmFja2Agd2l0aC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlOiBmdW5jdGlvbiAoY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwgW107XG4gICAgdGhpcy5fY29udGV4dHMgPSB0aGlzLl9jb250ZXh0cyB8fCBbXTtcbiAgICB0aGlzLl9jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgdGhpcy5fY29udGV4dHMucHVzaChjb250ZXh0KTtcbiAgfSxcblxuICAvKipcbiAgICogSW52b2tlcyBhbGwgZW5xdWV1ZWQgY2FsbGJhY2tzIGFuZCBjbGVhcnMgdGhlIHF1ZXVlLiBUaGlzIGlzIGludm9rZWQgYWZ0ZXJcbiAgICogdGhlIERPTSByZXByZXNlbnRhdGlvbiBvZiBhIGNvbXBvbmVudCBoYXMgYmVlbiBjcmVhdGVkIG9yIHVwZGF0ZWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbm90aWZ5QWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcztcbiAgICB2YXIgY29udGV4dHMgPSB0aGlzLl9jb250ZXh0cztcbiAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICAhKGNhbGxiYWNrcy5sZW5ndGggPT09IGNvbnRleHRzLmxlbmd0aCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnTWlzbWF0Y2hlZCBsaXN0IG9mIGNvbnRleHRzIGluIGNhbGxiYWNrIHF1ZXVlJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgdGhpcy5fY2FsbGJhY2tzID0gbnVsbDtcbiAgICAgIHRoaXMuX2NvbnRleHRzID0gbnVsbDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNhbGxiYWNrc1tpXS5jYWxsKGNvbnRleHRzW2ldKTtcbiAgICAgIH1cbiAgICAgIGNhbGxiYWNrcy5sZW5ndGggPSAwO1xuICAgICAgY29udGV4dHMubGVuZ3RoID0gMDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0aGUgaW50ZXJuYWwgcXVldWUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9jYWxsYmFja3MgPSBudWxsO1xuICAgIHRoaXMuX2NvbnRleHRzID0gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogYFBvb2xlZENsYXNzYCBsb29rcyBmb3IgdGhpcy5cbiAgICovXG4gIGRlc3RydWN0b3I6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxufSk7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhDYWxsYmFja1F1ZXVlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYWxsYmFja1F1ZXVlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBDaGFuZ2VFdmVudFBsdWdpblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xudmFyIEV2ZW50UHJvcGFnYXRvcnMgPSByZXF1aXJlKCcuL0V2ZW50UHJvcGFnYXRvcnMnKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxudmFyIGdldEV2ZW50VGFyZ2V0ID0gcmVxdWlyZSgnLi9nZXRFdmVudFRhcmdldCcpO1xudmFyIGlzRXZlbnRTdXBwb3J0ZWQgPSByZXF1aXJlKCcuL2lzRXZlbnRTdXBwb3J0ZWQnKTtcbnZhciBpc1RleHRJbnB1dEVsZW1lbnQgPSByZXF1aXJlKCcuL2lzVGV4dElucHV0RWxlbWVudCcpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcblxudmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xuXG52YXIgZXZlbnRUeXBlcyA9IHtcbiAgY2hhbmdlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25DaGFuZ2U6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNoYW5nZUNhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDaGFuZ2UsIHRvcExldmVsVHlwZXMudG9wQ2xpY2ssIHRvcExldmVsVHlwZXMudG9wRm9jdXMsIHRvcExldmVsVHlwZXMudG9wSW5wdXQsIHRvcExldmVsVHlwZXMudG9wS2V5RG93biwgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcCwgdG9wTGV2ZWxUeXBlcy50b3BTZWxlY3Rpb25DaGFuZ2VdXG4gIH1cbn07XG5cbi8qKlxuICogRm9yIElFIHNoaW1zXG4gKi9cbnZhciBhY3RpdmVFbGVtZW50ID0gbnVsbDtcbnZhciBhY3RpdmVFbGVtZW50SUQgPSBudWxsO1xudmFyIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IG51bGw7XG52YXIgYWN0aXZlRWxlbWVudFZhbHVlUHJvcCA9IG51bGw7XG5cbi8qKlxuICogU0VDVElPTjogaGFuZGxlIGBjaGFuZ2VgIGV2ZW50XG4gKi9cbmZ1bmN0aW9uIHNob3VsZFVzZUNoYW5nZUV2ZW50KGVsZW0pIHtcbiAgdmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBub2RlTmFtZSA9PT0gJ3NlbGVjdCcgfHwgbm9kZU5hbWUgPT09ICdpbnB1dCcgJiYgZWxlbS50eXBlID09PSAnZmlsZSc7XG59XG5cbnZhciBkb2VzQ2hhbmdlRXZlbnRCdWJibGUgPSBmYWxzZTtcbmlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcbiAgLy8gU2VlIGBoYW5kbGVDaGFuZ2VgIGNvbW1lbnQgYmVsb3dcbiAgZG9lc0NoYW5nZUV2ZW50QnViYmxlID0gaXNFdmVudFN1cHBvcnRlZCgnY2hhbmdlJykgJiYgKCEoJ2RvY3VtZW50TW9kZScgaW4gZG9jdW1lbnQpIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDgpO1xufVxuXG5mdW5jdGlvbiBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KG5hdGl2ZUV2ZW50KSB7XG4gIHZhciBldmVudCA9IFN5bnRoZXRpY0V2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLmNoYW5nZSwgYWN0aXZlRWxlbWVudElELCBuYXRpdmVFdmVudCwgZ2V0RXZlbnRUYXJnZXQobmF0aXZlRXZlbnQpKTtcbiAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcblxuICAvLyBJZiBjaGFuZ2UgYW5kIHByb3BlcnR5Y2hhbmdlIGJ1YmJsZWQsIHdlJ2QganVzdCBiaW5kIHRvIGl0IGxpa2UgYWxsIHRoZVxuICAvLyBvdGhlciBldmVudHMgYW5kIGhhdmUgaXQgZ28gdGhyb3VnaCBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuIFNpbmNlIGl0XG4gIC8vIGRvZXNuJ3QsIHdlIG1hbnVhbGx5IGxpc3RlbiBmb3IgdGhlIGV2ZW50cyBhbmQgc28gd2UgaGF2ZSB0byBlbnF1ZXVlIGFuZFxuICAvLyBwcm9jZXNzIHRoZSBhYnN0cmFjdCBldmVudCBtYW51YWxseS5cbiAgLy9cbiAgLy8gQmF0Y2hpbmcgaXMgbmVjZXNzYXJ5IGhlcmUgaW4gb3JkZXIgdG8gZW5zdXJlIHRoYXQgYWxsIGV2ZW50IGhhbmRsZXJzIHJ1blxuICAvLyBiZWZvcmUgdGhlIG5leHQgcmVyZW5kZXIgKGluY2x1ZGluZyBldmVudCBoYW5kbGVycyBhdHRhY2hlZCB0byBhbmNlc3RvclxuICAvLyBlbGVtZW50cyBpbnN0ZWFkIG9mIGRpcmVjdGx5IG9uIHRoZSBpbnB1dCkuIFdpdGhvdXQgdGhpcywgY29udHJvbGxlZFxuICAvLyBjb21wb25lbnRzIGRvbid0IHdvcmsgcHJvcGVybHkgaW4gY29uanVuY3Rpb24gd2l0aCBldmVudCBidWJibGluZyBiZWNhdXNlXG4gIC8vIHRoZSBjb21wb25lbnQgaXMgcmVyZW5kZXJlZCBhbmQgdGhlIHZhbHVlIHJldmVydGVkIGJlZm9yZSBhbGwgdGhlIGV2ZW50XG4gIC8vIGhhbmRsZXJzIGNhbiBydW4uIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzcwOC5cbiAgUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzKHJ1bkV2ZW50SW5CYXRjaCwgZXZlbnQpO1xufVxuXG5mdW5jdGlvbiBydW5FdmVudEluQmF0Y2goZXZlbnQpIHtcbiAgRXZlbnRQbHVnaW5IdWIuZW5xdWV1ZUV2ZW50cyhldmVudCk7XG4gIEV2ZW50UGx1Z2luSHViLnByb2Nlc3NFdmVudFF1ZXVlKGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gc3RhcnRXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KHRhcmdldCwgdGFyZ2V0SUQpIHtcbiAgYWN0aXZlRWxlbWVudCA9IHRhcmdldDtcbiAgYWN0aXZlRWxlbWVudElEID0gdGFyZ2V0SUQ7XG4gIGFjdGl2ZUVsZW1lbnQuYXR0YWNoRXZlbnQoJ29uY2hhbmdlJywgbWFudWFsRGlzcGF0Y2hDaGFuZ2VFdmVudCk7XG59XG5cbmZ1bmN0aW9uIHN0b3BXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KCkge1xuICBpZiAoIWFjdGl2ZUVsZW1lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYWN0aXZlRWxlbWVudC5kZXRhY2hFdmVudCgnb25jaGFuZ2UnLCBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KTtcbiAgYWN0aXZlRWxlbWVudCA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG59XG5cbmZ1bmN0aW9uIGdldFRhcmdldElERm9yQ2hhbmdlRXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcENoYW5nZSkge1xuICAgIHJldHVybiB0b3BMZXZlbFRhcmdldElEO1xuICB9XG59XG5mdW5jdGlvbiBoYW5kbGVFdmVudHNGb3JDaGFuZ2VFdmVudElFOCh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKSB7XG4gIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wRm9jdXMpIHtcbiAgICAvLyBzdG9wV2F0Y2hpbmcoKSBzaG91bGQgYmUgYSBub29wIGhlcmUgYnV0IHdlIGNhbGwgaXQganVzdCBpbiBjYXNlIHdlXG4gICAgLy8gbWlzc2VkIGEgYmx1ciBldmVudCBzb21laG93LlxuICAgIHN0b3BXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KCk7XG4gICAgc3RhcnRXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcbiAgfSBlbHNlIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQmx1cikge1xuICAgIHN0b3BXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KCk7XG4gIH1cbn1cblxuLyoqXG4gKiBTRUNUSU9OOiBoYW5kbGUgYGlucHV0YCBldmVudFxuICovXG52YXIgaXNJbnB1dEV2ZW50U3VwcG9ydGVkID0gZmFsc2U7XG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIC8vIElFOSBjbGFpbXMgdG8gc3VwcG9ydCB0aGUgaW5wdXQgZXZlbnQgYnV0IGZhaWxzIHRvIHRyaWdnZXIgaXQgd2hlblxuICAvLyBkZWxldGluZyB0ZXh0LCBzbyB3ZSBpZ25vcmUgaXRzIGlucHV0IGV2ZW50c1xuICBpc0lucHV0RXZlbnRTdXBwb3J0ZWQgPSBpc0V2ZW50U3VwcG9ydGVkKCdpbnB1dCcpICYmICghKCdkb2N1bWVudE1vZGUnIGluIGRvY3VtZW50KSB8fCBkb2N1bWVudC5kb2N1bWVudE1vZGUgPiA5KTtcbn1cblxuLyoqXG4gKiAoRm9yIG9sZCBJRS4pIFJlcGxhY2VtZW50IGdldHRlci9zZXR0ZXIgZm9yIHRoZSBgdmFsdWVgIHByb3BlcnR5IHRoYXQgZ2V0c1xuICogc2V0IG9uIHRoZSBhY3RpdmUgZWxlbWVudC5cbiAqL1xudmFyIG5ld1ZhbHVlUHJvcCA9IHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3AuZ2V0LmNhbGwodGhpcyk7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgIC8vIENhc3QgdG8gYSBzdHJpbmcgc28gd2UgY2FuIGRvIGVxdWFsaXR5IGNoZWNrcy5cbiAgICBhY3RpdmVFbGVtZW50VmFsdWUgPSAnJyArIHZhbDtcbiAgICBhY3RpdmVFbGVtZW50VmFsdWVQcm9wLnNldC5jYWxsKHRoaXMsIHZhbCk7XG4gIH1cbn07XG5cbi8qKlxuICogKEZvciBvbGQgSUUuKSBTdGFydHMgdHJhY2tpbmcgcHJvcGVydHljaGFuZ2UgZXZlbnRzIG9uIHRoZSBwYXNzZWQtaW4gZWxlbWVudFxuICogYW5kIG92ZXJyaWRlIHRoZSB2YWx1ZSBwcm9wZXJ0eSBzbyB0aGF0IHdlIGNhbiBkaXN0aW5ndWlzaCB1c2VyIGV2ZW50cyBmcm9tXG4gKiB2YWx1ZSBjaGFuZ2VzIGluIEpTLlxuICovXG5mdW5jdGlvbiBzdGFydFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UodGFyZ2V0LCB0YXJnZXRJRCkge1xuICBhY3RpdmVFbGVtZW50ID0gdGFyZ2V0O1xuICBhY3RpdmVFbGVtZW50SUQgPSB0YXJnZXRJRDtcbiAgYWN0aXZlRWxlbWVudFZhbHVlID0gdGFyZ2V0LnZhbHVlO1xuICBhY3RpdmVFbGVtZW50VmFsdWVQcm9wID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQuY29uc3RydWN0b3IucHJvdG90eXBlLCAndmFsdWUnKTtcblxuICAvLyBOb3QgZ3VhcmRlZCBpbiBhIGNhbkRlZmluZVByb3BlcnR5IGNoZWNrOiBJRTggc3VwcG9ydHMgZGVmaW5lUHJvcGVydHkgb25seVxuICAvLyBvbiBET00gZWxlbWVudHNcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFjdGl2ZUVsZW1lbnQsICd2YWx1ZScsIG5ld1ZhbHVlUHJvcCk7XG4gIGFjdGl2ZUVsZW1lbnQuYXR0YWNoRXZlbnQoJ29ucHJvcGVydHljaGFuZ2UnLCBoYW5kbGVQcm9wZXJ0eUNoYW5nZSk7XG59XG5cbi8qKlxuICogKEZvciBvbGQgSUUuKSBSZW1vdmVzIHRoZSBldmVudCBsaXN0ZW5lcnMgZnJvbSB0aGUgY3VycmVudGx5LXRyYWNrZWQgZWxlbWVudCxcbiAqIGlmIGFueSBleGlzdHMuXG4gKi9cbmZ1bmN0aW9uIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCkge1xuICBpZiAoIWFjdGl2ZUVsZW1lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBkZWxldGUgcmVzdG9yZXMgdGhlIG9yaWdpbmFsIHByb3BlcnR5IGRlZmluaXRpb25cbiAgZGVsZXRlIGFjdGl2ZUVsZW1lbnQudmFsdWU7XG4gIGFjdGl2ZUVsZW1lbnQuZGV0YWNoRXZlbnQoJ29ucHJvcGVydHljaGFuZ2UnLCBoYW5kbGVQcm9wZXJ0eUNoYW5nZSk7XG5cbiAgYWN0aXZlRWxlbWVudCA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3AgPSBudWxsO1xufVxuXG4vKipcbiAqIChGb3Igb2xkIElFLikgSGFuZGxlcyBhIHByb3BlcnR5Y2hhbmdlIGV2ZW50LCBzZW5kaW5nIGEgYGNoYW5nZWAgZXZlbnQgaWZcbiAqIHRoZSB2YWx1ZSBvZiB0aGUgYWN0aXZlIGVsZW1lbnQgaGFzIGNoYW5nZWQuXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZVByb3BlcnR5Q2hhbmdlKG5hdGl2ZUV2ZW50KSB7XG4gIGlmIChuYXRpdmVFdmVudC5wcm9wZXJ0eU5hbWUgIT09ICd2YWx1ZScpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHZhbHVlID0gbmF0aXZlRXZlbnQuc3JjRWxlbWVudC52YWx1ZTtcbiAgaWYgKHZhbHVlID09PSBhY3RpdmVFbGVtZW50VmFsdWUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYWN0aXZlRWxlbWVudFZhbHVlID0gdmFsdWU7XG5cbiAgbWFudWFsRGlzcGF0Y2hDaGFuZ2VFdmVudChuYXRpdmVFdmVudCk7XG59XG5cbi8qKlxuICogSWYgYSBgY2hhbmdlYCBldmVudCBzaG91bGQgYmUgZmlyZWQsIHJldHVybnMgdGhlIHRhcmdldCdzIElELlxuICovXG5mdW5jdGlvbiBnZXRUYXJnZXRJREZvcklucHV0RXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcElucHV0KSB7XG4gICAgLy8gSW4gbW9kZXJuIGJyb3dzZXJzIChpLmUuLCBub3QgSUU4IG9yIElFOSksIHRoZSBpbnB1dCBldmVudCBpcyBleGFjdGx5XG4gICAgLy8gd2hhdCB3ZSB3YW50IHNvIGZhbGwgdGhyb3VnaCBoZXJlIGFuZCB0cmlnZ2VyIGFuIGFic3RyYWN0IGV2ZW50XG4gICAgcmV0dXJuIHRvcExldmVsVGFyZ2V0SUQ7XG4gIH1cbn1cblxuLy8gRm9yIElFOCBhbmQgSUU5LlxuZnVuY3Rpb24gaGFuZGxlRXZlbnRzRm9ySW5wdXRFdmVudElFKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcbiAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BGb2N1cykge1xuICAgIC8vIEluIElFOCwgd2UgY2FuIGNhcHR1cmUgYWxtb3N0IGFsbCAudmFsdWUgY2hhbmdlcyBieSBhZGRpbmcgYVxuICAgIC8vIHByb3BlcnR5Y2hhbmdlIGhhbmRsZXIgYW5kIGxvb2tpbmcgZm9yIGV2ZW50cyB3aXRoIHByb3BlcnR5TmFtZVxuICAgIC8vIGVxdWFsIHRvICd2YWx1ZSdcbiAgICAvLyBJbiBJRTksIHByb3BlcnR5Y2hhbmdlIGZpcmVzIGZvciBtb3N0IGlucHV0IGV2ZW50cyBidXQgaXMgYnVnZ3kgYW5kXG4gICAgLy8gZG9lc24ndCBmaXJlIHdoZW4gdGV4dCBpcyBkZWxldGVkLCBidXQgY29udmVuaWVudGx5LCBzZWxlY3Rpb25jaGFuZ2VcbiAgICAvLyBhcHBlYXJzIHRvIGZpcmUgaW4gYWxsIG9mIHRoZSByZW1haW5pbmcgY2FzZXMgc28gd2UgY2F0Y2ggdGhvc2UgYW5kXG4gICAgLy8gZm9yd2FyZCB0aGUgZXZlbnQgaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkXG4gICAgLy8gSW4gZWl0aGVyIGNhc2UsIHdlIGRvbid0IHdhbnQgdG8gY2FsbCB0aGUgZXZlbnQgaGFuZGxlciBpZiB0aGUgdmFsdWVcbiAgICAvLyBpcyBjaGFuZ2VkIGZyb20gSlMgc28gd2UgcmVkZWZpbmUgYSBzZXR0ZXIgZm9yIGAudmFsdWVgIHRoYXQgdXBkYXRlc1xuICAgIC8vIG91ciBhY3RpdmVFbGVtZW50VmFsdWUgdmFyaWFibGUsIGFsbG93aW5nIHVzIHRvIGlnbm9yZSB0aG9zZSBjaGFuZ2VzXG4gICAgLy9cbiAgICAvLyBzdG9wV2F0Y2hpbmcoKSBzaG91bGQgYmUgYSBub29wIGhlcmUgYnV0IHdlIGNhbGwgaXQganVzdCBpbiBjYXNlIHdlXG4gICAgLy8gbWlzc2VkIGEgYmx1ciBldmVudCBzb21laG93LlxuICAgIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCk7XG4gICAgc3RhcnRXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcbiAgfSBlbHNlIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQmx1cikge1xuICAgIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCk7XG4gIH1cbn1cblxuLy8gRm9yIElFOCBhbmQgSUU5LlxuZnVuY3Rpb24gZ2V0VGFyZ2V0SURGb3JJbnB1dEV2ZW50SUUodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZSB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wS2V5VXAgfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24pIHtcbiAgICAvLyBPbiB0aGUgc2VsZWN0aW9uY2hhbmdlIGV2ZW50LCB0aGUgdGFyZ2V0IGlzIGp1c3QgZG9jdW1lbnQgd2hpY2ggaXNuJ3RcbiAgICAvLyBoZWxwZnVsIGZvciB1cyBzbyBqdXN0IGNoZWNrIGFjdGl2ZUVsZW1lbnQgaW5zdGVhZC5cbiAgICAvL1xuICAgIC8vIDk5JSBvZiB0aGUgdGltZSwga2V5ZG93biBhbmQga2V5dXAgYXJlbid0IG5lY2Vzc2FyeS4gSUU4IGZhaWxzIHRvIGZpcmVcbiAgICAvLyBwcm9wZXJ0eWNoYW5nZSBvbiB0aGUgZmlyc3QgaW5wdXQgZXZlbnQgYWZ0ZXIgc2V0dGluZyBgdmFsdWVgIGZyb20gYVxuICAgIC8vIHNjcmlwdCBhbmQgZmlyZXMgb25seSBrZXlkb3duLCBrZXlwcmVzcywga2V5dXAuIENhdGNoaW5nIGtleXVwIHVzdWFsbHlcbiAgICAvLyBnZXRzIGl0IGFuZCBjYXRjaGluZyBrZXlkb3duIGxldHMgdXMgZmlyZSBhbiBldmVudCBmb3IgdGhlIGZpcnN0XG4gICAgLy8ga2V5c3Ryb2tlIGlmIHVzZXIgZG9lcyBhIGtleSByZXBlYXQgKGl0J2xsIGJlIGEgbGl0dGxlIGRlbGF5ZWQ6IHJpZ2h0XG4gICAgLy8gYmVmb3JlIHRoZSBzZWNvbmQga2V5c3Ryb2tlKS4gT3RoZXIgaW5wdXQgbWV0aG9kcyAoZS5nLiwgcGFzdGUpIHNlZW0gdG9cbiAgICAvLyBmaXJlIHNlbGVjdGlvbmNoYW5nZSBub3JtYWxseS5cbiAgICBpZiAoYWN0aXZlRWxlbWVudCAmJiBhY3RpdmVFbGVtZW50LnZhbHVlICE9PSBhY3RpdmVFbGVtZW50VmFsdWUpIHtcbiAgICAgIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IGFjdGl2ZUVsZW1lbnQudmFsdWU7XG4gICAgICByZXR1cm4gYWN0aXZlRWxlbWVudElEO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFNFQ1RJT046IGhhbmRsZSBgY2xpY2tgIGV2ZW50XG4gKi9cbmZ1bmN0aW9uIHNob3VsZFVzZUNsaWNrRXZlbnQoZWxlbSkge1xuICAvLyBVc2UgdGhlIGBjbGlja2AgZXZlbnQgdG8gZGV0ZWN0IGNoYW5nZXMgdG8gY2hlY2tib3ggYW5kIHJhZGlvIGlucHV0cy5cbiAgLy8gVGhpcyBhcHByb2FjaCB3b3JrcyBhY3Jvc3MgYWxsIGJyb3dzZXJzLCB3aGVyZWFzIGBjaGFuZ2VgIGRvZXMgbm90IGZpcmVcbiAgLy8gdW50aWwgYGJsdXJgIGluIElFOC5cbiAgcmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnICYmIChlbGVtLnR5cGUgPT09ICdjaGVja2JveCcgfHwgZWxlbS50eXBlID09PSAncmFkaW8nKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGFyZ2V0SURGb3JDbGlja0V2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcbiAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BDbGljaykge1xuICAgIHJldHVybiB0b3BMZXZlbFRhcmdldElEO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBwbHVnaW4gY3JlYXRlcyBhbiBgb25DaGFuZ2VgIGV2ZW50IHRoYXQgbm9ybWFsaXplcyBjaGFuZ2UgZXZlbnRzXG4gKiBhY3Jvc3MgZm9ybSBlbGVtZW50cy4gVGhpcyBldmVudCBmaXJlcyBhdCBhIHRpbWUgd2hlbiBpdCdzIHBvc3NpYmxlIHRvXG4gKiBjaGFuZ2UgdGhlIGVsZW1lbnQncyB2YWx1ZSB3aXRob3V0IHNlZWluZyBhIGZsaWNrZXIuXG4gKlxuICogU3VwcG9ydGVkIGVsZW1lbnRzIGFyZTpcbiAqIC0gaW5wdXQgKHNlZSBgaXNUZXh0SW5wdXRFbGVtZW50YClcbiAqIC0gdGV4dGFyZWFcbiAqIC0gc2VsZWN0XG4gKi9cbnZhciBDaGFuZ2VFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50c31cbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcblxuICAgIHZhciBnZXRUYXJnZXRJREZ1bmMsIGhhbmRsZUV2ZW50RnVuYztcbiAgICBpZiAoc2hvdWxkVXNlQ2hhbmdlRXZlbnQodG9wTGV2ZWxUYXJnZXQpKSB7XG4gICAgICBpZiAoZG9lc0NoYW5nZUV2ZW50QnViYmxlKSB7XG4gICAgICAgIGdldFRhcmdldElERnVuYyA9IGdldFRhcmdldElERm9yQ2hhbmdlRXZlbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoYW5kbGVFdmVudEZ1bmMgPSBoYW5kbGVFdmVudHNGb3JDaGFuZ2VFdmVudElFODtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVGV4dElucHV0RWxlbWVudCh0b3BMZXZlbFRhcmdldCkpIHtcbiAgICAgIGlmIChpc0lucHV0RXZlbnRTdXBwb3J0ZWQpIHtcbiAgICAgICAgZ2V0VGFyZ2V0SURGdW5jID0gZ2V0VGFyZ2V0SURGb3JJbnB1dEV2ZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2V0VGFyZ2V0SURGdW5jID0gZ2V0VGFyZ2V0SURGb3JJbnB1dEV2ZW50SUU7XG4gICAgICAgIGhhbmRsZUV2ZW50RnVuYyA9IGhhbmRsZUV2ZW50c0ZvcklucHV0RXZlbnRJRTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNob3VsZFVzZUNsaWNrRXZlbnQodG9wTGV2ZWxUYXJnZXQpKSB7XG4gICAgICBnZXRUYXJnZXRJREZ1bmMgPSBnZXRUYXJnZXRJREZvckNsaWNrRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGdldFRhcmdldElERnVuYykge1xuICAgICAgdmFyIHRhcmdldElEID0gZ2V0VGFyZ2V0SURGdW5jKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpO1xuICAgICAgaWYgKHRhcmdldElEKSB7XG4gICAgICAgIHZhciBldmVudCA9IFN5bnRoZXRpY0V2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLmNoYW5nZSwgdGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgICAgIGV2ZW50LnR5cGUgPSAnY2hhbmdlJztcbiAgICAgICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcbiAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChoYW5kbGVFdmVudEZ1bmMpIHtcbiAgICAgIGhhbmRsZUV2ZW50RnVuYyh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDaGFuZ2VFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQ2xpZW50UmVhY3RSb290SW5kZXhcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgbmV4dFJlYWN0Um9vdEluZGV4ID0gMDtcblxudmFyIENsaWVudFJlYWN0Um9vdEluZGV4ID0ge1xuICBjcmVhdGVSZWFjdFJvb3RJbmRleDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXh0UmVhY3RSb290SW5kZXgrKztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDbGllbnRSZWFjdFJvb3RJbmRleDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRE9NQ2hpbGRyZW5PcGVyYXRpb25zXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERhbmdlciA9IHJlcXVpcmUoJy4vRGFuZ2VyJyk7XG52YXIgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMgPSByZXF1aXJlKCcuL1JlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzJyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcblxudmFyIHNldElubmVySFRNTCA9IHJlcXVpcmUoJy4vc2V0SW5uZXJIVE1MJyk7XG52YXIgc2V0VGV4dENvbnRlbnQgPSByZXF1aXJlKCcuL3NldFRleHRDb250ZW50Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogSW5zZXJ0cyBgY2hpbGROb2RlYCBhcyBhIGNoaWxkIG9mIGBwYXJlbnROb2RlYCBhdCB0aGUgYGluZGV4YC5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHBhcmVudE5vZGUgUGFyZW50IG5vZGUgaW4gd2hpY2ggdG8gaW5zZXJ0LlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjaGlsZE5vZGUgQ2hpbGQgbm9kZSB0byBpbnNlcnQuXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggYXQgd2hpY2ggdG8gaW5zZXJ0IHRoZSBjaGlsZC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBpbnNlcnRDaGlsZEF0KHBhcmVudE5vZGUsIGNoaWxkTm9kZSwgaW5kZXgpIHtcbiAgLy8gQnkgZXhwbG9pdGluZyBhcnJheXMgcmV0dXJuaW5nIGB1bmRlZmluZWRgIGZvciBhbiB1bmRlZmluZWQgaW5kZXgsIHdlIGNhblxuICAvLyByZWx5IGV4Y2x1c2l2ZWx5IG9uIGBpbnNlcnRCZWZvcmUobm9kZSwgbnVsbClgIGluc3RlYWQgb2YgYWxzbyB1c2luZ1xuICAvLyBgYXBwZW5kQ2hpbGQobm9kZSlgLiBIb3dldmVyLCB1c2luZyBgdW5kZWZpbmVkYCBpcyBub3QgYWxsb3dlZCBieSBhbGxcbiAgLy8gYnJvd3NlcnMgc28gd2UgbXVzdCByZXBsYWNlIGl0IHdpdGggYG51bGxgLlxuXG4gIC8vIGZpeCByZW5kZXIgb3JkZXIgZXJyb3IgaW4gc2FmYXJpXG4gIC8vIElFOCB3aWxsIHRocm93IGVycm9yIHdoZW4gaW5kZXggb3V0IG9mIGxpc3Qgc2l6ZS5cbiAgdmFyIGJlZm9yZUNoaWxkID0gaW5kZXggPj0gcGFyZW50Tm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA/IG51bGwgOiBwYXJlbnROb2RlLmNoaWxkTm9kZXMuaXRlbShpbmRleCk7XG5cbiAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2hpbGROb2RlLCBiZWZvcmVDaGlsZCk7XG59XG5cbi8qKlxuICogT3BlcmF0aW9ucyBmb3IgdXBkYXRpbmcgd2l0aCBET00gY2hpbGRyZW4uXG4gKi9cbnZhciBET01DaGlsZHJlbk9wZXJhdGlvbnMgPSB7XG5cbiAgZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXA6IERhbmdlci5kYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cCxcblxuICB1cGRhdGVUZXh0Q29udGVudDogc2V0VGV4dENvbnRlbnQsXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSBjb21wb25lbnQncyBjaGlsZHJlbiBieSBwcm9jZXNzaW5nIGEgc2VyaWVzIG9mIHVwZGF0ZXMuIFRoZVxuICAgKiB1cGRhdGUgY29uZmlndXJhdGlvbnMgYXJlIGVhY2ggZXhwZWN0ZWQgdG8gaGF2ZSBhIGBwYXJlbnROb2RlYCBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheTxvYmplY3Q+fSB1cGRhdGVzIExpc3Qgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb25zLlxuICAgKiBAcGFyYW0ge2FycmF5PHN0cmluZz59IG1hcmt1cExpc3QgTGlzdCBvZiBtYXJrdXAgc3RyaW5ncy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcm9jZXNzVXBkYXRlczogZnVuY3Rpb24gKHVwZGF0ZXMsIG1hcmt1cExpc3QpIHtcbiAgICB2YXIgdXBkYXRlO1xuICAgIC8vIE1hcHBpbmcgZnJvbSBwYXJlbnQgSURzIHRvIGluaXRpYWwgY2hpbGQgb3JkZXJpbmdzLlxuICAgIHZhciBpbml0aWFsQ2hpbGRyZW4gPSBudWxsO1xuICAgIC8vIExpc3Qgb2YgY2hpbGRyZW4gdGhhdCB3aWxsIGJlIG1vdmVkIG9yIHJlbW92ZWQuXG4gICAgdmFyIHVwZGF0ZWRDaGlsZHJlbiA9IG51bGw7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVwZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHVwZGF0ZSA9IHVwZGF0ZXNbaV07XG4gICAgICBpZiAodXBkYXRlLnR5cGUgPT09IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLk1PVkVfRVhJU1RJTkcgfHwgdXBkYXRlLnR5cGUgPT09IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlJFTU9WRV9OT0RFKSB7XG4gICAgICAgIHZhciB1cGRhdGVkSW5kZXggPSB1cGRhdGUuZnJvbUluZGV4O1xuICAgICAgICB2YXIgdXBkYXRlZENoaWxkID0gdXBkYXRlLnBhcmVudE5vZGUuY2hpbGROb2Rlc1t1cGRhdGVkSW5kZXhdO1xuICAgICAgICB2YXIgcGFyZW50SUQgPSB1cGRhdGUucGFyZW50SUQ7XG5cbiAgICAgICAgIXVwZGF0ZWRDaGlsZCA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwcm9jZXNzVXBkYXRlcygpOiBVbmFibGUgdG8gZmluZCBjaGlsZCAlcyBvZiBlbGVtZW50LiBUaGlzICcgKyAncHJvYmFibHkgbWVhbnMgdGhlIERPTSB3YXMgdW5leHBlY3RlZGx5IG11dGF0ZWQgKGUuZy4sIGJ5IHRoZSAnICsgJ2Jyb3dzZXIpLCB1c3VhbGx5IGR1ZSB0byBmb3JnZXR0aW5nIGEgPHRib2R5PiB3aGVuIHVzaW5nIHRhYmxlcywgJyArICduZXN0aW5nIHRhZ3MgbGlrZSA8Zm9ybT4sIDxwPiwgb3IgPGE+LCBvciB1c2luZyBub24tU1ZHIGVsZW1lbnRzICcgKyAnaW4gYW4gPHN2Zz4gcGFyZW50LiBUcnkgaW5zcGVjdGluZyB0aGUgY2hpbGQgbm9kZXMgb2YgdGhlIGVsZW1lbnQgJyArICd3aXRoIFJlYWN0IElEIGAlc2AuJywgdXBkYXRlZEluZGV4LCBwYXJlbnRJRCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIGluaXRpYWxDaGlsZHJlbiA9IGluaXRpYWxDaGlsZHJlbiB8fCB7fTtcbiAgICAgICAgaW5pdGlhbENoaWxkcmVuW3BhcmVudElEXSA9IGluaXRpYWxDaGlsZHJlbltwYXJlbnRJRF0gfHwgW107XG4gICAgICAgIGluaXRpYWxDaGlsZHJlbltwYXJlbnRJRF1bdXBkYXRlZEluZGV4XSA9IHVwZGF0ZWRDaGlsZDtcblxuICAgICAgICB1cGRhdGVkQ2hpbGRyZW4gPSB1cGRhdGVkQ2hpbGRyZW4gfHwgW107XG4gICAgICAgIHVwZGF0ZWRDaGlsZHJlbi5wdXNoKHVwZGF0ZWRDaGlsZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJlbmRlcmVkTWFya3VwO1xuICAgIC8vIG1hcmt1cExpc3QgaXMgZWl0aGVyIGEgbGlzdCBvZiBtYXJrdXAgb3IganVzdCBhIGxpc3Qgb2YgZWxlbWVudHNcbiAgICBpZiAobWFya3VwTGlzdC5sZW5ndGggJiYgdHlwZW9mIG1hcmt1cExpc3RbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICByZW5kZXJlZE1hcmt1cCA9IERhbmdlci5kYW5nZXJvdXNseVJlbmRlck1hcmt1cChtYXJrdXBMaXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVuZGVyZWRNYXJrdXAgPSBtYXJrdXBMaXN0O1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSB1cGRhdGVkIGNoaWxkcmVuIGZpcnN0IHNvIHRoYXQgYHRvSW5kZXhgIGlzIGNvbnNpc3RlbnQuXG4gICAgaWYgKHVwZGF0ZWRDaGlsZHJlbikge1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB1cGRhdGVkQ2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdXBkYXRlZENoaWxkcmVuW2pdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodXBkYXRlZENoaWxkcmVuW2pdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBrID0gMDsgayA8IHVwZGF0ZXMubGVuZ3RoOyBrKyspIHtcbiAgICAgIHVwZGF0ZSA9IHVwZGF0ZXNba107XG4gICAgICBzd2l0Y2ggKHVwZGF0ZS50eXBlKSB7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuSU5TRVJUX01BUktVUDpcbiAgICAgICAgICBpbnNlcnRDaGlsZEF0KHVwZGF0ZS5wYXJlbnROb2RlLCByZW5kZXJlZE1hcmt1cFt1cGRhdGUubWFya3VwSW5kZXhdLCB1cGRhdGUudG9JbmRleCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuTU9WRV9FWElTVElORzpcbiAgICAgICAgICBpbnNlcnRDaGlsZEF0KHVwZGF0ZS5wYXJlbnROb2RlLCBpbml0aWFsQ2hpbGRyZW5bdXBkYXRlLnBhcmVudElEXVt1cGRhdGUuZnJvbUluZGV4XSwgdXBkYXRlLnRvSW5kZXgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlNFVF9NQVJLVVA6XG4gICAgICAgICAgc2V0SW5uZXJIVE1MKHVwZGF0ZS5wYXJlbnROb2RlLCB1cGRhdGUuY29udGVudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuVEVYVF9DT05URU5UOlxuICAgICAgICAgIHNldFRleHRDb250ZW50KHVwZGF0ZS5wYXJlbnROb2RlLCB1cGRhdGUuY29udGVudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuUkVNT1ZFX05PREU6XG4gICAgICAgICAgLy8gQWxyZWFkeSByZW1vdmVkIGJ5IHRoZSBmb3ItbG9vcCBhYm92ZS5cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKERPTUNoaWxkcmVuT3BlcmF0aW9ucywgJ0RPTUNoaWxkcmVuT3BlcmF0aW9ucycsIHtcbiAgdXBkYXRlVGV4dENvbnRlbnQ6ICd1cGRhdGVUZXh0Q29udGVudCdcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERPTUNoaWxkcmVuT3BlcmF0aW9uczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRE9NUHJvcGVydHlcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbmZ1bmN0aW9uIGNoZWNrTWFzayh2YWx1ZSwgYml0bWFzaykge1xuICByZXR1cm4gKHZhbHVlICYgYml0bWFzaykgPT09IGJpdG1hc2s7XG59XG5cbnZhciBET01Qcm9wZXJ0eUluamVjdGlvbiA9IHtcbiAgLyoqXG4gICAqIE1hcHBpbmcgZnJvbSBub3JtYWxpemVkLCBjYW1lbGNhc2VkIHByb3BlcnR5IG5hbWVzIHRvIGEgY29uZmlndXJhdGlvbiB0aGF0XG4gICAqIHNwZWNpZmllcyBob3cgdGhlIGFzc29jaWF0ZWQgRE9NIHByb3BlcnR5IHNob3VsZCBiZSBhY2Nlc3NlZCBvciByZW5kZXJlZC5cbiAgICovXG4gIE1VU1RfVVNFX0FUVFJJQlVURTogMHgxLFxuICBNVVNUX1VTRV9QUk9QRVJUWTogMHgyLFxuICBIQVNfU0lERV9FRkZFQ1RTOiAweDQsXG4gIEhBU19CT09MRUFOX1ZBTFVFOiAweDgsXG4gIEhBU19OVU1FUklDX1ZBTFVFOiAweDEwLFxuICBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRTogMHgyMCB8IDB4MTAsXG4gIEhBU19PVkVSTE9BREVEX0JPT0xFQU5fVkFMVUU6IDB4NDAsXG5cbiAgLyoqXG4gICAqIEluamVjdCBzb21lIHNwZWNpYWxpemVkIGtub3dsZWRnZSBhYm91dCB0aGUgRE9NLiBUaGlzIHRha2VzIGEgY29uZmlnIG9iamVjdFxuICAgKiB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICpcbiAgICogaXNDdXN0b21BdHRyaWJ1dGU6IGZ1bmN0aW9uIHRoYXQgZ2l2ZW4gYW4gYXR0cmlidXRlIG5hbWUgd2lsbCByZXR1cm4gdHJ1ZVxuICAgKiBpZiBpdCBjYW4gYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9NIHZlcmJhdGltLiBVc2VmdWwgZm9yIGRhdGEtKiBvciBhcmlhLSpcbiAgICogYXR0cmlidXRlcyB3aGVyZSBpdCdzIGltcG9zc2libGUgdG8gZW51bWVyYXRlIGFsbCBvZiB0aGUgcG9zc2libGVcbiAgICogYXR0cmlidXRlIG5hbWVzLFxuICAgKlxuICAgKiBQcm9wZXJ0aWVzOiBvYmplY3QgbWFwcGluZyBET00gcHJvcGVydHkgbmFtZSB0byBvbmUgb2YgdGhlXG4gICAqIERPTVByb3BlcnR5SW5qZWN0aW9uIGNvbnN0YW50cyBvciBudWxsLiBJZiB5b3VyIGF0dHJpYnV0ZSBpc24ndCBpbiBoZXJlLFxuICAgKiBpdCB3b24ndCBnZXQgd3JpdHRlbiB0byB0aGUgRE9NLlxuICAgKlxuICAgKiBET01BdHRyaWJ1dGVOYW1lczogb2JqZWN0IG1hcHBpbmcgUmVhY3QgYXR0cmlidXRlIG5hbWUgdG8gdGhlIERPTVxuICAgKiBhdHRyaWJ1dGUgbmFtZS4gQXR0cmlidXRlIG5hbWVzIG5vdCBzcGVjaWZpZWQgdXNlIHRoZSAqKmxvd2VyY2FzZSoqXG4gICAqIG5vcm1hbGl6ZWQgbmFtZS5cbiAgICpcbiAgICogRE9NQXR0cmlidXRlTmFtZXNwYWNlczogb2JqZWN0IG1hcHBpbmcgUmVhY3QgYXR0cmlidXRlIG5hbWUgdG8gdGhlIERPTVxuICAgKiBhdHRyaWJ1dGUgbmFtZXNwYWNlIFVSTC4gKEF0dHJpYnV0ZSBuYW1lcyBub3Qgc3BlY2lmaWVkIHVzZSBubyBuYW1lc3BhY2UuKVxuICAgKlxuICAgKiBET01Qcm9wZXJ0eU5hbWVzOiBzaW1pbGFyIHRvIERPTUF0dHJpYnV0ZU5hbWVzIGJ1dCBmb3IgRE9NIHByb3BlcnRpZXMuXG4gICAqIFByb3BlcnR5IG5hbWVzIG5vdCBzcGVjaWZpZWQgdXNlIHRoZSBub3JtYWxpemVkIG5hbWUuXG4gICAqXG4gICAqIERPTU11dGF0aW9uTWV0aG9kczogUHJvcGVydGllcyB0aGF0IHJlcXVpcmUgc3BlY2lhbCBtdXRhdGlvbiBtZXRob2RzLiBJZlxuICAgKiBgdmFsdWVgIGlzIHVuZGVmaW5lZCwgdGhlIG11dGF0aW9uIG1ldGhvZCBzaG91bGQgdW5zZXQgdGhlIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZG9tUHJvcGVydHlDb25maWcgdGhlIGNvbmZpZyBhcyBkZXNjcmliZWQgYWJvdmUuXG4gICAqL1xuICBpbmplY3RET01Qcm9wZXJ0eUNvbmZpZzogZnVuY3Rpb24gKGRvbVByb3BlcnR5Q29uZmlnKSB7XG4gICAgdmFyIEluamVjdGlvbiA9IERPTVByb3BlcnR5SW5qZWN0aW9uO1xuICAgIHZhciBQcm9wZXJ0aWVzID0gZG9tUHJvcGVydHlDb25maWcuUHJvcGVydGllcyB8fCB7fTtcbiAgICB2YXIgRE9NQXR0cmlidXRlTmFtZXNwYWNlcyA9IGRvbVByb3BlcnR5Q29uZmlnLkRPTUF0dHJpYnV0ZU5hbWVzcGFjZXMgfHwge307XG4gICAgdmFyIERPTUF0dHJpYnV0ZU5hbWVzID0gZG9tUHJvcGVydHlDb25maWcuRE9NQXR0cmlidXRlTmFtZXMgfHwge307XG4gICAgdmFyIERPTVByb3BlcnR5TmFtZXMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5ET01Qcm9wZXJ0eU5hbWVzIHx8IHt9O1xuICAgIHZhciBET01NdXRhdGlvbk1ldGhvZHMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5ET01NdXRhdGlvbk1ldGhvZHMgfHwge307XG5cbiAgICBpZiAoZG9tUHJvcGVydHlDb25maWcuaXNDdXN0b21BdHRyaWJ1dGUpIHtcbiAgICAgIERPTVByb3BlcnR5Ll9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9ucy5wdXNoKGRvbVByb3BlcnR5Q29uZmlnLmlzQ3VzdG9tQXR0cmlidXRlKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBQcm9wZXJ0aWVzKSB7XG4gICAgICAhIURPTVByb3BlcnR5LnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2luamVjdERPTVByb3BlcnR5Q29uZmlnKC4uLik6IFlvdVxcJ3JlIHRyeWluZyB0byBpbmplY3QgRE9NIHByb3BlcnR5ICcgKyAnXFwnJXNcXCcgd2hpY2ggaGFzIGFscmVhZHkgYmVlbiBpbmplY3RlZC4gWW91IG1heSBiZSBhY2NpZGVudGFsbHkgJyArICdpbmplY3RpbmcgdGhlIHNhbWUgRE9NIHByb3BlcnR5IGNvbmZpZyB0d2ljZSwgb3IgeW91IG1heSBiZSAnICsgJ2luamVjdGluZyB0d28gY29uZmlncyB0aGF0IGhhdmUgY29uZmxpY3RpbmcgcHJvcGVydHkgbmFtZXMuJywgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgdmFyIGxvd2VyQ2FzZWQgPSBwcm9wTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFyIHByb3BDb25maWcgPSBQcm9wZXJ0aWVzW3Byb3BOYW1lXTtcblxuICAgICAgdmFyIHByb3BlcnR5SW5mbyA9IHtcbiAgICAgICAgYXR0cmlidXRlTmFtZTogbG93ZXJDYXNlZCxcbiAgICAgICAgYXR0cmlidXRlTmFtZXNwYWNlOiBudWxsLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IHByb3BOYW1lLFxuICAgICAgICBtdXRhdGlvbk1ldGhvZDogbnVsbCxcblxuICAgICAgICBtdXN0VXNlQXR0cmlidXRlOiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLk1VU1RfVVNFX0FUVFJJQlVURSksXG4gICAgICAgIG11c3RVc2VQcm9wZXJ0eTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5NVVNUX1VTRV9QUk9QRVJUWSksXG4gICAgICAgIGhhc1NpZGVFZmZlY3RzOiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLkhBU19TSURFX0VGRkVDVFMpLFxuICAgICAgICBoYXNCb29sZWFuVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX0JPT0xFQU5fVkFMVUUpLFxuICAgICAgICBoYXNOdW1lcmljVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX05VTUVSSUNfVkFMVUUpLFxuICAgICAgICBoYXNQb3NpdGl2ZU51bWVyaWNWYWx1ZTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5IQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSksXG4gICAgICAgIGhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRSlcbiAgICAgIH07XG5cbiAgICAgICEoIXByb3BlcnR5SW5mby5tdXN0VXNlQXR0cmlidXRlIHx8ICFwcm9wZXJ0eUluZm8ubXVzdFVzZVByb3BlcnR5KSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdET01Qcm9wZXJ0eTogQ2Fubm90IHJlcXVpcmUgdXNpbmcgYm90aCBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5OiAlcycsIHByb3BOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAhKHByb3BlcnR5SW5mby5tdXN0VXNlUHJvcGVydHkgfHwgIXByb3BlcnR5SW5mby5oYXNTaWRlRWZmZWN0cykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRE9NUHJvcGVydHk6IFByb3BlcnRpZXMgdGhhdCBoYXZlIHNpZGUgZWZmZWN0cyBtdXN0IHVzZSBwcm9wZXJ0eTogJXMnLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgIShwcm9wZXJ0eUluZm8uaGFzQm9vbGVhblZhbHVlICsgcHJvcGVydHlJbmZvLmhhc051bWVyaWNWYWx1ZSArIHByb3BlcnR5SW5mby5oYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlIDw9IDEpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0RPTVByb3BlcnR5OiBWYWx1ZSBjYW4gYmUgb25lIG9mIGJvb2xlYW4sIG92ZXJsb2FkZWQgYm9vbGVhbiwgb3IgJyArICdudW1lcmljIHZhbHVlLCBidXQgbm90IGEgY29tYmluYXRpb246ICVzJywgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgRE9NUHJvcGVydHkuZ2V0UG9zc2libGVTdGFuZGFyZE5hbWVbbG93ZXJDYXNlZF0gPSBwcm9wTmFtZTtcbiAgICAgIH1cblxuICAgICAgaWYgKERPTUF0dHJpYnV0ZU5hbWVzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICB2YXIgYXR0cmlidXRlTmFtZSA9IERPTUF0dHJpYnV0ZU5hbWVzW3Byb3BOYW1lXTtcbiAgICAgICAgcHJvcGVydHlJbmZvLmF0dHJpYnV0ZU5hbWUgPSBhdHRyaWJ1dGVOYW1lO1xuICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lW2F0dHJpYnV0ZU5hbWVdID0gcHJvcE5hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKERPTUF0dHJpYnV0ZU5hbWVzcGFjZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lc3BhY2UgPSBET01BdHRyaWJ1dGVOYW1lc3BhY2VzW3Byb3BOYW1lXTtcbiAgICAgIH1cblxuICAgICAgaWYgKERPTVByb3BlcnR5TmFtZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BlcnR5SW5mby5wcm9wZXJ0eU5hbWUgPSBET01Qcm9wZXJ0eU5hbWVzW3Byb3BOYW1lXTtcbiAgICAgIH1cblxuICAgICAgaWYgKERPTU11dGF0aW9uTWV0aG9kcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgcHJvcGVydHlJbmZvLm11dGF0aW9uTWV0aG9kID0gRE9NTXV0YXRpb25NZXRob2RzW3Byb3BOYW1lXTtcbiAgICAgIH1cblxuICAgICAgRE9NUHJvcGVydHkucHJvcGVydGllc1twcm9wTmFtZV0gPSBwcm9wZXJ0eUluZm87XG4gICAgfVxuICB9XG59O1xudmFyIGRlZmF1bHRWYWx1ZUNhY2hlID0ge307XG5cbi8qKlxuICogRE9NUHJvcGVydHkgZXhwb3J0cyBsb29rdXAgb2JqZWN0cyB0aGF0IGNhbiBiZSB1c2VkIGxpa2UgZnVuY3Rpb25zOlxuICpcbiAqICAgPiBET01Qcm9wZXJ0eS5pc1ZhbGlkWydpZCddXG4gKiAgIHRydWVcbiAqICAgPiBET01Qcm9wZXJ0eS5pc1ZhbGlkWydmb29iYXInXVxuICogICB1bmRlZmluZWRcbiAqXG4gKiBBbHRob3VnaCB0aGlzIG1heSBiZSBjb25mdXNpbmcsIGl0IHBlcmZvcm1zIGJldHRlciBpbiBnZW5lcmFsLlxuICpcbiAqIEBzZWUgaHR0cDovL2pzcGVyZi5jb20va2V5LWV4aXN0c1xuICogQHNlZSBodHRwOi8vanNwZXJmLmNvbS9rZXktbWlzc2luZ1xuICovXG52YXIgRE9NUHJvcGVydHkgPSB7XG5cbiAgSURfQVRUUklCVVRFX05BTUU6ICdkYXRhLXJlYWN0aWQnLFxuXG4gIC8qKlxuICAgKiBNYXAgZnJvbSBwcm9wZXJ0eSBcInN0YW5kYXJkIG5hbWVcIiB0byBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IGhvdyB0byBzZXRcbiAgICogdGhlIHByb3BlcnR5IGluIHRoZSBET00uIEVhY2ggb2JqZWN0IGNvbnRhaW5zOlxuICAgKlxuICAgKiBhdHRyaWJ1dGVOYW1lOlxuICAgKiAgIFVzZWQgd2hlbiByZW5kZXJpbmcgbWFya3VwIG9yIHdpdGggYCpBdHRyaWJ1dGUoKWAuXG4gICAqIGF0dHJpYnV0ZU5hbWVzcGFjZVxuICAgKiBwcm9wZXJ0eU5hbWU6XG4gICAqICAgVXNlZCBvbiBET00gbm9kZSBpbnN0YW5jZXMuIChUaGlzIGluY2x1ZGVzIHByb3BlcnRpZXMgdGhhdCBtdXRhdGUgZHVlIHRvXG4gICAqICAgZXh0ZXJuYWwgZmFjdG9ycy4pXG4gICAqIG11dGF0aW9uTWV0aG9kOlxuICAgKiAgIElmIG5vbi1udWxsLCB1c2VkIGluc3RlYWQgb2YgdGhlIHByb3BlcnR5IG9yIGBzZXRBdHRyaWJ1dGUoKWAgYWZ0ZXJcbiAgICogICBpbml0aWFsIHJlbmRlci5cbiAgICogbXVzdFVzZUF0dHJpYnV0ZTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBtdXN0IGJlIGFjY2Vzc2VkIGFuZCBtdXRhdGVkIHVzaW5nIGAqQXR0cmlidXRlKClgLlxuICAgKiAgIChUaGlzIGluY2x1ZGVzIGFueXRoaW5nIHRoYXQgZmFpbHMgYDxwcm9wTmFtZT4gaW4gPGVsZW1lbnQ+YC4pXG4gICAqIG11c3RVc2VQcm9wZXJ0eTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBtdXN0IGJlIGFjY2Vzc2VkIGFuZCBtdXRhdGVkIGFzIGFuIG9iamVjdCBwcm9wZXJ0eS5cbiAgICogaGFzU2lkZUVmZmVjdHM6XG4gICAqICAgV2hldGhlciBvciBub3Qgc2V0dGluZyBhIHZhbHVlIGNhdXNlcyBzaWRlIGVmZmVjdHMgc3VjaCBhcyB0cmlnZ2VyaW5nXG4gICAqICAgcmVzb3VyY2VzIHRvIGJlIGxvYWRlZCBvciB0ZXh0IHNlbGVjdGlvbiBjaGFuZ2VzLiBJZiB0cnVlLCB3ZSByZWFkIGZyb21cbiAgICogICB0aGUgRE9NIGJlZm9yZSB1cGRhdGluZyB0byBlbnN1cmUgdGhhdCB0aGUgdmFsdWUgaXMgb25seSBzZXQgaWYgaXQgaGFzXG4gICAqICAgY2hhbmdlZC5cbiAgICogaGFzQm9vbGVhblZhbHVlOlxuICAgKiAgIFdoZXRoZXIgdGhlIHByb3BlcnR5IHNob3VsZCBiZSByZW1vdmVkIHdoZW4gc2V0IHRvIGEgZmFsc2V5IHZhbHVlLlxuICAgKiBoYXNOdW1lcmljVmFsdWU6XG4gICAqICAgV2hldGhlciB0aGUgcHJvcGVydHkgbXVzdCBiZSBudW1lcmljIG9yIHBhcnNlIGFzIGEgbnVtZXJpYyBhbmQgc2hvdWxkIGJlXG4gICAqICAgcmVtb3ZlZCB3aGVuIHNldCB0byBhIGZhbHNleSB2YWx1ZS5cbiAgICogaGFzUG9zaXRpdmVOdW1lcmljVmFsdWU6XG4gICAqICAgV2hldGhlciB0aGUgcHJvcGVydHkgbXVzdCBiZSBwb3NpdGl2ZSBudW1lcmljIG9yIHBhcnNlIGFzIGEgcG9zaXRpdmVcbiAgICogICBudW1lcmljIGFuZCBzaG91bGQgYmUgcmVtb3ZlZCB3aGVuIHNldCB0byBhIGZhbHNleSB2YWx1ZS5cbiAgICogaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBjYW4gYmUgdXNlZCBhcyBhIGZsYWcgYXMgd2VsbCBhcyB3aXRoIGEgdmFsdWUuXG4gICAqICAgUmVtb3ZlZCB3aGVuIHN0cmljdGx5IGVxdWFsIHRvIGZhbHNlOyBwcmVzZW50IHdpdGhvdXQgYSB2YWx1ZSB3aGVuXG4gICAqICAgc3RyaWN0bHkgZXF1YWwgdG8gdHJ1ZTsgcHJlc2VudCB3aXRoIGEgdmFsdWUgb3RoZXJ3aXNlLlxuICAgKi9cbiAgcHJvcGVydGllczoge30sXG5cbiAgLyoqXG4gICAqIE1hcHBpbmcgZnJvbSBsb3dlcmNhc2UgcHJvcGVydHkgbmFtZXMgdG8gdGhlIHByb3Blcmx5IGNhc2VkIHZlcnNpb24sIHVzZWRcbiAgICogdG8gd2FybiBpbiB0aGUgY2FzZSBvZiBtaXNzaW5nIHByb3BlcnRpZXMuIEF2YWlsYWJsZSBvbmx5IGluIF9fREVWX18uXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBnZXRQb3NzaWJsZVN0YW5kYXJkTmFtZTogXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHt9IDogbnVsbCxcblxuICAvKipcbiAgICogQWxsIG9mIHRoZSBpc0N1c3RvbUF0dHJpYnV0ZSgpIGZ1bmN0aW9ucyB0aGF0IGhhdmUgYmVlbiBpbmplY3RlZC5cbiAgICovXG4gIF9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9uczogW10sXG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIGEgcHJvcGVydHkgbmFtZSBpcyBhIGN1c3RvbSBhdHRyaWJ1dGUuXG4gICAqIEBtZXRob2RcbiAgICovXG4gIGlzQ3VzdG9tQXR0cmlidXRlOiBmdW5jdGlvbiAoYXR0cmlidXRlTmFtZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgRE9NUHJvcGVydHkuX2lzQ3VzdG9tQXR0cmlidXRlRnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXNDdXN0b21BdHRyaWJ1dGVGbiA9IERPTVByb3BlcnR5Ll9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9uc1tpXTtcbiAgICAgIGlmIChpc0N1c3RvbUF0dHJpYnV0ZUZuKGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGRlZmF1bHQgcHJvcGVydHkgdmFsdWUgZm9yIGEgRE9NIHByb3BlcnR5IChpLmUuLCBub3QgYW5cbiAgICogYXR0cmlidXRlKS4gTW9zdCBkZWZhdWx0IHZhbHVlcyBhcmUgJycgb3IgZmFsc2UsIGJ1dCBub3QgYWxsLiBXb3JzZSB5ZXQsXG4gICAqIHNvbWUgKGluIHBhcnRpY3VsYXIsIGB0eXBlYCkgdmFyeSBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2YgZWxlbWVudC5cbiAgICpcbiAgICogVE9ETzogSXMgaXQgYmV0dGVyIHRvIGdyYWIgYWxsIHRoZSBwb3NzaWJsZSBwcm9wZXJ0aWVzIHdoZW4gY3JlYXRpbmcgYW5cbiAgICogZWxlbWVudCB0byBhdm9pZCBoYXZpbmcgdG8gY3JlYXRlIHRoZSBzYW1lIGVsZW1lbnQgdHdpY2U/XG4gICAqL1xuICBnZXREZWZhdWx0VmFsdWVGb3JQcm9wZXJ0eTogZnVuY3Rpb24gKG5vZGVOYW1lLCBwcm9wKSB7XG4gICAgdmFyIG5vZGVEZWZhdWx0cyA9IGRlZmF1bHRWYWx1ZUNhY2hlW25vZGVOYW1lXTtcbiAgICB2YXIgdGVzdEVsZW1lbnQ7XG4gICAgaWYgKCFub2RlRGVmYXVsdHMpIHtcbiAgICAgIGRlZmF1bHRWYWx1ZUNhY2hlW25vZGVOYW1lXSA9IG5vZGVEZWZhdWx0cyA9IHt9O1xuICAgIH1cbiAgICBpZiAoIShwcm9wIGluIG5vZGVEZWZhdWx0cykpIHtcbiAgICAgIHRlc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSk7XG4gICAgICBub2RlRGVmYXVsdHNbcHJvcF0gPSB0ZXN0RWxlbWVudFtwcm9wXTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGVEZWZhdWx0c1twcm9wXTtcbiAgfSxcblxuICBpbmplY3Rpb246IERPTVByb3BlcnR5SW5qZWN0aW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IERPTVByb3BlcnR5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBET01Qcm9wZXJ0eU9wZXJhdGlvbnNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NUHJvcGVydHkgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5Jyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcblxudmFyIHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyID0gcmVxdWlyZSgnLi9xdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3NlcicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8vIFNpbXBsaWZpZWQgc3Vic2V0XG52YXIgVkFMSURfQVRUUklCVVRFX05BTUVfUkVHRVggPSAvXlthLXpBLVpfXVtcXHdcXC5cXC1dKiQvO1xudmFyIGlsbGVnYWxBdHRyaWJ1dGVOYW1lQ2FjaGUgPSB7fTtcbnZhciB2YWxpZGF0ZWRBdHRyaWJ1dGVOYW1lQ2FjaGUgPSB7fTtcblxuZnVuY3Rpb24gaXNBdHRyaWJ1dGVOYW1lU2FmZShhdHRyaWJ1dGVOYW1lKSB7XG4gIGlmICh2YWxpZGF0ZWRBdHRyaWJ1dGVOYW1lQ2FjaGUuaGFzT3duUHJvcGVydHkoYXR0cmlidXRlTmFtZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoaWxsZWdhbEF0dHJpYnV0ZU5hbWVDYWNoZS5oYXNPd25Qcm9wZXJ0eShhdHRyaWJ1dGVOYW1lKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoVkFMSURfQVRUUklCVVRFX05BTUVfUkVHRVgudGVzdChhdHRyaWJ1dGVOYW1lKSkge1xuICAgIHZhbGlkYXRlZEF0dHJpYnV0ZU5hbWVDYWNoZVthdHRyaWJ1dGVOYW1lXSA9IHRydWU7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWxsZWdhbEF0dHJpYnV0ZU5hbWVDYWNoZVthdHRyaWJ1dGVOYW1lXSA9IHRydWU7XG4gIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnSW52YWxpZCBhdHRyaWJ1dGUgbmFtZTogYCVzYCcsIGF0dHJpYnV0ZU5hbWUpIDogdW5kZWZpbmVkO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHNob3VsZElnbm9yZVZhbHVlKHByb3BlcnR5SW5mbywgdmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgfHwgcHJvcGVydHlJbmZvLmhhc0Jvb2xlYW5WYWx1ZSAmJiAhdmFsdWUgfHwgcHJvcGVydHlJbmZvLmhhc051bWVyaWNWYWx1ZSAmJiBpc05hTih2YWx1ZSkgfHwgcHJvcGVydHlJbmZvLmhhc1Bvc2l0aXZlTnVtZXJpY1ZhbHVlICYmIHZhbHVlIDwgMSB8fCBwcm9wZXJ0eUluZm8uaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZSAmJiB2YWx1ZSA9PT0gZmFsc2U7XG59XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciByZWFjdFByb3BzID0ge1xuICAgIGNoaWxkcmVuOiB0cnVlLFxuICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB0cnVlLFxuICAgIGtleTogdHJ1ZSxcbiAgICByZWY6IHRydWVcbiAgfTtcbiAgdmFyIHdhcm5lZFByb3BlcnRpZXMgPSB7fTtcblxuICB2YXIgd2FyblVua25vd25Qcm9wZXJ0eSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKHJlYWN0UHJvcHMuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgcmVhY3RQcm9wc1tuYW1lXSB8fCB3YXJuZWRQcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KG5hbWUpICYmIHdhcm5lZFByb3BlcnRpZXNbbmFtZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3YXJuZWRQcm9wZXJ0aWVzW25hbWVdID0gdHJ1ZTtcbiAgICB2YXIgbG93ZXJDYXNlZE5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBkYXRhLSogYXR0cmlidXRlcyBzaG91bGQgYmUgbG93ZXJjYXNlOyBzdWdnZXN0IHRoZSBsb3dlcmNhc2UgdmVyc2lvblxuICAgIHZhciBzdGFuZGFyZE5hbWUgPSBET01Qcm9wZXJ0eS5pc0N1c3RvbUF0dHJpYnV0ZShsb3dlckNhc2VkTmFtZSkgPyBsb3dlckNhc2VkTmFtZSA6IERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lLmhhc093blByb3BlcnR5KGxvd2VyQ2FzZWROYW1lKSA/IERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lW2xvd2VyQ2FzZWROYW1lXSA6IG51bGw7XG5cbiAgICAvLyBGb3Igbm93LCBvbmx5IHdhcm4gd2hlbiB3ZSBoYXZlIGEgc3VnZ2VzdGVkIGNvcnJlY3Rpb24uIFRoaXMgcHJldmVudHNcbiAgICAvLyBsb2dnaW5nIHRvbyBtdWNoIHdoZW4gdXNpbmcgdHJhbnNmZXJQcm9wc1RvLlxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHN0YW5kYXJkTmFtZSA9PSBudWxsLCAnVW5rbm93biBET00gcHJvcGVydHkgJXMuIERpZCB5b3UgbWVhbiAlcz8nLCBuYW1lLCBzdGFuZGFyZE5hbWUpIDogdW5kZWZpbmVkO1xuICB9O1xufVxuXG4vKipcbiAqIE9wZXJhdGlvbnMgZm9yIGRlYWxpbmcgd2l0aCBET00gcHJvcGVydGllcy5cbiAqL1xudmFyIERPTVByb3BlcnR5T3BlcmF0aW9ucyA9IHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIHRoZSBJRCBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIFVuZXNjYXBlZCBJRC5cbiAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgc3RyaW5nLlxuICAgKi9cbiAgY3JlYXRlTWFya3VwRm9ySUQ6IGZ1bmN0aW9uIChpZCkge1xuICAgIHJldHVybiBET01Qcm9wZXJ0eS5JRF9BVFRSSUJVVEVfTkFNRSArICc9JyArIHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyKGlkKTtcbiAgfSxcblxuICBzZXRBdHRyaWJ1dGVGb3JJRDogZnVuY3Rpb24gKG5vZGUsIGlkKSB7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoRE9NUHJvcGVydHkuSURfQVRUUklCVVRFX05BTUUsIGlkKTtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIGEgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHJldHVybiB7P3N0cmluZ30gTWFya3VwIHN0cmluZywgb3IgbnVsbCBpZiB0aGUgcHJvcGVydHkgd2FzIGludmFsaWQuXG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JQcm9wZXJ0eTogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIHByb3BlcnR5SW5mbyA9IERPTVByb3BlcnR5LnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW25hbWVdIDogbnVsbDtcbiAgICBpZiAocHJvcGVydHlJbmZvKSB7XG4gICAgICBpZiAoc2hvdWxkSWdub3JlVmFsdWUocHJvcGVydHlJbmZvLCB2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgICAgdmFyIGF0dHJpYnV0ZU5hbWUgPSBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZTtcbiAgICAgIGlmIChwcm9wZXJ0eUluZm8uaGFzQm9vbGVhblZhbHVlIHx8IHByb3BlcnR5SW5mby5oYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlICYmIHZhbHVlID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVOYW1lICsgJz1cIlwiJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdHRyaWJ1dGVOYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUobmFtZSkpIHtcbiAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FyblVua25vd25Qcm9wZXJ0eShuYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgbWFya3VwIGZvciBhIGN1c3RvbSBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBzdHJpbmcsIG9yIGVtcHR5IHN0cmluZyBpZiB0aGUgcHJvcGVydHkgd2FzIGludmFsaWQuXG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JDdXN0b21BdHRyaWJ1dGU6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghaXNBdHRyaWJ1dGVOYW1lU2FmZShuYW1lKSB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHJldHVybiBuYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBmb3IgYSBwcm9wZXJ0eSBvbiBhIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqL1xuICBzZXRWYWx1ZUZvclByb3BlcnR5OiBmdW5jdGlvbiAobm9kZSwgbmFtZSwgdmFsdWUpIHtcbiAgICB2YXIgcHJvcGVydHlJbmZvID0gRE9NUHJvcGVydHkucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IERPTVByb3BlcnR5LnByb3BlcnRpZXNbbmFtZV0gOiBudWxsO1xuICAgIGlmIChwcm9wZXJ0eUluZm8pIHtcbiAgICAgIHZhciBtdXRhdGlvbk1ldGhvZCA9IHByb3BlcnR5SW5mby5tdXRhdGlvbk1ldGhvZDtcbiAgICAgIGlmIChtdXRhdGlvbk1ldGhvZCkge1xuICAgICAgICBtdXRhdGlvbk1ldGhvZChub2RlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHNob3VsZElnbm9yZVZhbHVlKHByb3BlcnR5SW5mbywgdmFsdWUpKSB7XG4gICAgICAgIHRoaXMuZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eShub2RlLCBuYW1lKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlJbmZvLm11c3RVc2VBdHRyaWJ1dGUpIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZU5hbWUgPSBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZTtcbiAgICAgICAgdmFyIG5hbWVzcGFjZSA9IHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lc3BhY2U7XG4gICAgICAgIC8vIGBzZXRBdHRyaWJ1dGVgIHdpdGggb2JqZWN0cyBiZWNvbWVzIG9ubHkgYFtvYmplY3RdYCBpbiBJRTgvOSxcbiAgICAgICAgLy8gKCcnICsgdmFsdWUpIG1ha2VzIGl0IG91dHB1dCB0aGUgY29ycmVjdCB0b1N0cmluZygpLXZhbHVlLlxuICAgICAgICBpZiAobmFtZXNwYWNlKSB7XG4gICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGVOUyhuYW1lc3BhY2UsIGF0dHJpYnV0ZU5hbWUsICcnICsgdmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnR5SW5mby5oYXNCb29sZWFuVmFsdWUgfHwgcHJvcGVydHlJbmZvLmhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWUgJiYgdmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCAnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgJycgKyB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwcm9wTmFtZSA9IHByb3BlcnR5SW5mby5wcm9wZXJ0eU5hbWU7XG4gICAgICAgIC8vIE11c3QgZXhwbGljaXRseSBjYXN0IHZhbHVlcyBmb3IgSEFTX1NJREVfRUZGRUNUUy1wcm9wZXJ0aWVzIHRvIHRoZVxuICAgICAgICAvLyBwcm9wZXJ0eSB0eXBlIGJlZm9yZSBjb21wYXJpbmc7IG9ubHkgYHZhbHVlYCBkb2VzIGFuZCBpcyBzdHJpbmcuXG4gICAgICAgIGlmICghcHJvcGVydHlJbmZvLmhhc1NpZGVFZmZlY3RzIHx8ICcnICsgbm9kZVtwcm9wTmFtZV0gIT09ICcnICsgdmFsdWUpIHtcbiAgICAgICAgICAvLyBDb250cmFyeSB0byBgc2V0QXR0cmlidXRlYCwgb2JqZWN0IHByb3BlcnRpZXMgYXJlIHByb3Blcmx5XG4gICAgICAgICAgLy8gYHRvU3RyaW5nYGVkIGJ5IElFOC85LlxuICAgICAgICAgIG5vZGVbcHJvcE5hbWVdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKG5hbWUpKSB7XG4gICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JBdHRyaWJ1dGUobm9kZSwgbmFtZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FyblVua25vd25Qcm9wZXJ0eShuYW1lKTtcbiAgICB9XG4gIH0sXG5cbiAgc2V0VmFsdWVGb3JBdHRyaWJ1dGU6IGZ1bmN0aW9uIChub2RlLCBuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghaXNBdHRyaWJ1dGVOYW1lU2FmZShuYW1lKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsICcnICsgdmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGVsZXRlcyB0aGUgdmFsdWUgZm9yIGEgcHJvcGVydHkgb24gYSBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICovXG4gIGRlbGV0ZVZhbHVlRm9yUHJvcGVydHk6IGZ1bmN0aW9uIChub2RlLCBuYW1lKSB7XG4gICAgdmFyIHByb3BlcnR5SW5mbyA9IERPTVByb3BlcnR5LnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW25hbWVdIDogbnVsbDtcbiAgICBpZiAocHJvcGVydHlJbmZvKSB7XG4gICAgICB2YXIgbXV0YXRpb25NZXRob2QgPSBwcm9wZXJ0eUluZm8ubXV0YXRpb25NZXRob2Q7XG4gICAgICBpZiAobXV0YXRpb25NZXRob2QpIHtcbiAgICAgICAgbXV0YXRpb25NZXRob2Qobm9kZSwgdW5kZWZpbmVkKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlJbmZvLm11c3RVc2VBdHRyaWJ1dGUpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUocHJvcGVydHlJbmZvLmF0dHJpYnV0ZU5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHByb3BOYW1lID0gcHJvcGVydHlJbmZvLnByb3BlcnR5TmFtZTtcbiAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9IERPTVByb3BlcnR5LmdldERlZmF1bHRWYWx1ZUZvclByb3BlcnR5KG5vZGUubm9kZU5hbWUsIHByb3BOYW1lKTtcbiAgICAgICAgaWYgKCFwcm9wZXJ0eUluZm8uaGFzU2lkZUVmZmVjdHMgfHwgJycgKyBub2RlW3Byb3BOYW1lXSAhPT0gZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgbm9kZVtwcm9wTmFtZV0gPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKG5hbWUpKSB7XG4gICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICB9IGVsc2UgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm5Vbmtub3duUHJvcGVydHkobmFtZSk7XG4gICAgfVxuICB9XG5cbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhET01Qcm9wZXJ0eU9wZXJhdGlvbnMsICdET01Qcm9wZXJ0eU9wZXJhdGlvbnMnLCB7XG4gIHNldFZhbHVlRm9yUHJvcGVydHk6ICdzZXRWYWx1ZUZvclByb3BlcnR5JyxcbiAgc2V0VmFsdWVGb3JBdHRyaWJ1dGU6ICdzZXRWYWx1ZUZvckF0dHJpYnV0ZScsXG4gIGRlbGV0ZVZhbHVlRm9yUHJvcGVydHk6ICdkZWxldGVWYWx1ZUZvclByb3BlcnR5J1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRE9NUHJvcGVydHlPcGVyYXRpb25zOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBEYW5nZXJcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgY3JlYXRlTm9kZXNGcm9tTWFya3VwID0gcmVxdWlyZSgnZmJqcy9saWIvY3JlYXRlTm9kZXNGcm9tTWFya3VwJyk7XG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcbnZhciBnZXRNYXJrdXBXcmFwID0gcmVxdWlyZSgnZmJqcy9saWIvZ2V0TWFya3VwV3JhcCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgT1BFTl9UQUdfTkFNRV9FWFAgPSAvXig8W14gXFwvPl0rKS87XG52YXIgUkVTVUxUX0lOREVYX0FUVFIgPSAnZGF0YS1kYW5nZXItaW5kZXgnO1xuXG4vKipcbiAqIEV4dHJhY3RzIHRoZSBgbm9kZU5hbWVgIGZyb20gYSBzdHJpbmcgb2YgbWFya3VwLlxuICpcbiAqIE5PVEU6IEV4dHJhY3RpbmcgdGhlIGBub2RlTmFtZWAgZG9lcyBub3QgcmVxdWlyZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBtYXRjaFxuICogYmVjYXVzZSB3ZSBtYWtlIGFzc3VtcHRpb25zIGFib3V0IFJlYWN0LWdlbmVyYXRlZCBtYXJrdXAgKGkuZS4gdGhlcmUgYXJlIG5vXG4gKiBzcGFjZXMgc3Vycm91bmRpbmcgdGhlIG9wZW5pbmcgdGFnIGFuZCB0aGVyZSBpcyBhdCBsZWFzdCBvbmUgYXR0cmlidXRlKS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIFN0cmluZyBvZiBtYXJrdXAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IE5vZGUgbmFtZSBvZiB0aGUgc3VwcGxpZWQgbWFya3VwLlxuICogQHNlZSBodHRwOi8vanNwZXJmLmNvbS9leHRyYWN0LW5vZGVuYW1lXG4gKi9cbmZ1bmN0aW9uIGdldE5vZGVOYW1lKG1hcmt1cCkge1xuICByZXR1cm4gbWFya3VwLnN1YnN0cmluZygxLCBtYXJrdXAuaW5kZXhPZignICcpKTtcbn1cblxudmFyIERhbmdlciA9IHtcblxuICAvKipcbiAgICogUmVuZGVycyBtYXJrdXAgaW50byBhbiBhcnJheSBvZiBub2Rlcy4gVGhlIG1hcmt1cCBpcyBleHBlY3RlZCB0byByZW5kZXJcbiAgICogaW50byBhIGxpc3Qgb2Ygcm9vdCBub2Rlcy4gQWxzbywgdGhlIGxlbmd0aCBvZiBgcmVzdWx0TGlzdGAgYW5kXG4gICAqIGBtYXJrdXBMaXN0YCBzaG91bGQgYmUgdGhlIHNhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7YXJyYXk8c3RyaW5nPn0gbWFya3VwTGlzdCBMaXN0IG9mIG1hcmt1cCBzdHJpbmdzIHRvIHJlbmRlci5cbiAgICogQHJldHVybiB7YXJyYXk8RE9NRWxlbWVudD59IExpc3Qgb2YgcmVuZGVyZWQgbm9kZXMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZGFuZ2Vyb3VzbHlSZW5kZXJNYXJrdXA6IGZ1bmN0aW9uIChtYXJrdXBMaXN0KSB7XG4gICAgIUV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdkYW5nZXJvdXNseVJlbmRlck1hcmt1cCguLi4pOiBDYW5ub3QgcmVuZGVyIG1hcmt1cCBpbiBhIHdvcmtlciAnICsgJ3RocmVhZC4gTWFrZSBzdXJlIGB3aW5kb3dgIGFuZCBgZG9jdW1lbnRgIGFyZSBhdmFpbGFibGUgZ2xvYmFsbHkgJyArICdiZWZvcmUgcmVxdWlyaW5nIFJlYWN0IHdoZW4gdW5pdCB0ZXN0aW5nIG9yIHVzZSAnICsgJ1JlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RyaW5nIGZvciBzZXJ2ZXIgcmVuZGVyaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgbm9kZU5hbWU7XG4gICAgdmFyIG1hcmt1cEJ5Tm9kZU5hbWUgPSB7fTtcbiAgICAvLyBHcm91cCBtYXJrdXAgYnkgYG5vZGVOYW1lYCBpZiBhIHdyYXAgaXMgbmVjZXNzYXJ5LCBlbHNlIGJ5ICcqJy5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmt1cExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICFtYXJrdXBMaXN0W2ldID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVuZGVyTWFya3VwKC4uLik6IE1pc3NpbmcgbWFya3VwLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIG5vZGVOYW1lID0gZ2V0Tm9kZU5hbWUobWFya3VwTGlzdFtpXSk7XG4gICAgICBub2RlTmFtZSA9IGdldE1hcmt1cFdyYXAobm9kZU5hbWUpID8gbm9kZU5hbWUgOiAnKic7XG4gICAgICBtYXJrdXBCeU5vZGVOYW1lW25vZGVOYW1lXSA9IG1hcmt1cEJ5Tm9kZU5hbWVbbm9kZU5hbWVdIHx8IFtdO1xuICAgICAgbWFya3VwQnlOb2RlTmFtZVtub2RlTmFtZV1baV0gPSBtYXJrdXBMaXN0W2ldO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0TGlzdCA9IFtdO1xuICAgIHZhciByZXN1bHRMaXN0QXNzaWdubWVudENvdW50ID0gMDtcbiAgICBmb3IgKG5vZGVOYW1lIGluIG1hcmt1cEJ5Tm9kZU5hbWUpIHtcbiAgICAgIGlmICghbWFya3VwQnlOb2RlTmFtZS5oYXNPd25Qcm9wZXJ0eShub2RlTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgbWFya3VwTGlzdEJ5Tm9kZU5hbWUgPSBtYXJrdXBCeU5vZGVOYW1lW25vZGVOYW1lXTtcblxuICAgICAgLy8gVGhpcyBmb3ItaW4gbG9vcCBza2lwcyB0aGUgaG9sZXMgb2YgdGhlIHNwYXJzZSBhcnJheS4gVGhlIG9yZGVyIG9mXG4gICAgICAvLyBpdGVyYXRpb24gc2hvdWxkIGZvbGxvdyB0aGUgb3JkZXIgb2YgYXNzaWdubWVudCwgd2hpY2ggaGFwcGVucyB0byBtYXRjaFxuICAgICAgLy8gbnVtZXJpY2FsIGluZGV4IG9yZGVyLCBidXQgd2UgZG9uJ3QgcmVseSBvbiB0aGF0LlxuICAgICAgdmFyIHJlc3VsdEluZGV4O1xuICAgICAgZm9yIChyZXN1bHRJbmRleCBpbiBtYXJrdXBMaXN0QnlOb2RlTmFtZSkge1xuICAgICAgICBpZiAobWFya3VwTGlzdEJ5Tm9kZU5hbWUuaGFzT3duUHJvcGVydHkocmVzdWx0SW5kZXgpKSB7XG4gICAgICAgICAgdmFyIG1hcmt1cCA9IG1hcmt1cExpc3RCeU5vZGVOYW1lW3Jlc3VsdEluZGV4XTtcblxuICAgICAgICAgIC8vIFB1c2ggdGhlIHJlcXVlc3RlZCBtYXJrdXAgd2l0aCBhbiBhZGRpdGlvbmFsIFJFU1VMVF9JTkRFWF9BVFRSXG4gICAgICAgICAgLy8gYXR0cmlidXRlLiAgSWYgdGhlIG1hcmt1cCBkb2VzIG5vdCBzdGFydCB3aXRoIGEgPCBjaGFyYWN0ZXIsIGl0XG4gICAgICAgICAgLy8gd2lsbCBiZSBkaXNjYXJkZWQgYmVsb3cgKHdpdGggYW4gYXBwcm9wcmlhdGUgY29uc29sZS5lcnJvcikuXG4gICAgICAgICAgbWFya3VwTGlzdEJ5Tm9kZU5hbWVbcmVzdWx0SW5kZXhdID0gbWFya3VwLnJlcGxhY2UoT1BFTl9UQUdfTkFNRV9FWFAsXG4gICAgICAgICAgLy8gVGhpcyBpbmRleCB3aWxsIGJlIHBhcnNlZCBiYWNrIG91dCBiZWxvdy5cbiAgICAgICAgICAnJDEgJyArIFJFU1VMVF9JTkRFWF9BVFRSICsgJz1cIicgKyByZXN1bHRJbmRleCArICdcIiAnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZW5kZXIgZWFjaCBncm91cCBvZiBtYXJrdXAgd2l0aCBzaW1pbGFyIHdyYXBwaW5nIGBub2RlTmFtZWAuXG4gICAgICB2YXIgcmVuZGVyTm9kZXMgPSBjcmVhdGVOb2Rlc0Zyb21NYXJrdXAobWFya3VwTGlzdEJ5Tm9kZU5hbWUuam9pbignJyksIGVtcHR5RnVuY3Rpb24gLy8gRG8gbm90aGluZyBzcGVjaWFsIHdpdGggPHNjcmlwdD4gdGFncy5cbiAgICAgICk7XG5cbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVuZGVyTm9kZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIHJlbmRlck5vZGUgPSByZW5kZXJOb2Rlc1tqXTtcbiAgICAgICAgaWYgKHJlbmRlck5vZGUuaGFzQXR0cmlidXRlICYmIHJlbmRlck5vZGUuaGFzQXR0cmlidXRlKFJFU1VMVF9JTkRFWF9BVFRSKSkge1xuXG4gICAgICAgICAgcmVzdWx0SW5kZXggPSArcmVuZGVyTm9kZS5nZXRBdHRyaWJ1dGUoUkVTVUxUX0lOREVYX0FUVFIpO1xuICAgICAgICAgIHJlbmRlck5vZGUucmVtb3ZlQXR0cmlidXRlKFJFU1VMVF9JTkRFWF9BVFRSKTtcblxuICAgICAgICAgICEhcmVzdWx0TGlzdC5oYXNPd25Qcm9wZXJ0eShyZXN1bHRJbmRleCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGFuZ2VyOiBBc3NpZ25pbmcgdG8gYW4gYWxyZWFkeS1vY2N1cGllZCByZXN1bHQgaW5kZXguJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgcmVzdWx0TGlzdFtyZXN1bHRJbmRleF0gPSByZW5kZXJOb2RlO1xuXG4gICAgICAgICAgLy8gVGhpcyBzaG91bGQgbWF0Y2ggcmVzdWx0TGlzdC5sZW5ndGggYW5kIG1hcmt1cExpc3QubGVuZ3RoIHdoZW5cbiAgICAgICAgICAvLyB3ZSdyZSBkb25lLlxuICAgICAgICAgIHJlc3VsdExpc3RBc3NpZ25tZW50Q291bnQgKz0gMTtcbiAgICAgICAgfSBlbHNlIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRGFuZ2VyOiBEaXNjYXJkaW5nIHVuZXhwZWN0ZWQgbm9kZTonLCByZW5kZXJOb2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFsdGhvdWdoIHJlc3VsdExpc3Qgd2FzIHBvcHVsYXRlZCBvdXQgb2Ygb3JkZXIsIGl0IHNob3VsZCBub3cgYmUgYSBkZW5zZVxuICAgIC8vIGFycmF5LlxuICAgICEocmVzdWx0TGlzdEFzc2lnbm1lbnRDb3VudCA9PT0gcmVzdWx0TGlzdC5sZW5ndGgpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0RhbmdlcjogRGlkIG5vdCBhc3NpZ24gdG8gZXZlcnkgaW5kZXggb2YgcmVzdWx0TGlzdC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAhKHJlc3VsdExpc3QubGVuZ3RoID09PSBtYXJrdXBMaXN0Lmxlbmd0aCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGFuZ2VyOiBFeHBlY3RlZCBtYXJrdXAgdG8gcmVuZGVyICVzIG5vZGVzLCBidXQgcmVuZGVyZWQgJXMuJywgbWFya3VwTGlzdC5sZW5ndGgsIHJlc3VsdExpc3QubGVuZ3RoKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICByZXR1cm4gcmVzdWx0TGlzdDtcbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYSBub2RlIHdpdGggYSBzdHJpbmcgb2YgbWFya3VwIGF0IGl0cyBjdXJyZW50IHBvc2l0aW9uIHdpdGhpbiBpdHNcbiAgICogcGFyZW50LiBUaGUgbWFya3VwIG11c3QgcmVuZGVyIGludG8gYSBzaW5nbGUgcm9vdCBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG9sZENoaWxkIENoaWxkIG5vZGUgdG8gcmVwbGFjZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBNYXJrdXAgdG8gcmVuZGVyIGluIHBsYWNlIG9mIHRoZSBjaGlsZCBub2RlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwOiBmdW5jdGlvbiAob2xkQ2hpbGQsIG1hcmt1cCkge1xuICAgICFFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXAoLi4uKTogQ2Fubm90IHJlbmRlciBtYXJrdXAgaW4gYSAnICsgJ3dvcmtlciB0aHJlYWQuIE1ha2Ugc3VyZSBgd2luZG93YCBhbmQgYGRvY3VtZW50YCBhcmUgYXZhaWxhYmxlICcgKyAnZ2xvYmFsbHkgYmVmb3JlIHJlcXVpcmluZyBSZWFjdCB3aGVuIHVuaXQgdGVzdGluZyBvciB1c2UgJyArICdSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0cmluZygpIGZvciBzZXJ2ZXIgcmVuZGVyaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhbWFya3VwID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwKC4uLik6IE1pc3NpbmcgbWFya3VwLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhKG9sZENoaWxkLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ2h0bWwnKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cCguLi4pOiBDYW5ub3QgcmVwbGFjZSBtYXJrdXAgb2YgdGhlICcgKyAnPGh0bWw+IG5vZGUuIFRoaXMgaXMgYmVjYXVzZSBicm93c2VyIHF1aXJrcyBtYWtlIHRoaXMgdW5yZWxpYWJsZSAnICsgJ2FuZC9vciBzbG93LiBJZiB5b3Ugd2FudCB0byByZW5kZXIgdG8gdGhlIHJvb3QgeW91IG11c3QgdXNlICcgKyAnc2VydmVyIHJlbmRlcmluZy4gU2VlIFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RyaW5nKCkuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIG5ld0NoaWxkO1xuICAgIGlmICh0eXBlb2YgbWFya3VwID09PSAnc3RyaW5nJykge1xuICAgICAgbmV3Q2hpbGQgPSBjcmVhdGVOb2Rlc0Zyb21NYXJrdXAobWFya3VwLCBlbXB0eUZ1bmN0aW9uKVswXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3Q2hpbGQgPSBtYXJrdXA7XG4gICAgfVxuICAgIG9sZENoaWxkLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0NoaWxkLCBvbGRDaGlsZCk7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEYW5nZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIERlZmF1bHRFdmVudFBsdWdpbk9yZGVyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG4vKipcbiAqIE1vZHVsZSB0aGF0IGlzIGluamVjdGFibGUgaW50byBgRXZlbnRQbHVnaW5IdWJgLCB0aGF0IHNwZWNpZmllcyBhXG4gKiBkZXRlcm1pbmlzdGljIG9yZGVyaW5nIG9mIGBFdmVudFBsdWdpbmBzLiBBIGNvbnZlbmllbnQgd2F5IHRvIHJlYXNvbiBhYm91dFxuICogcGx1Z2lucywgd2l0aG91dCBoYXZpbmcgdG8gcGFja2FnZSBldmVyeSBvbmUgb2YgdGhlbS4gVGhpcyBpcyBiZXR0ZXIgdGhhblxuICogaGF2aW5nIHBsdWdpbnMgYmUgb3JkZXJlZCBpbiB0aGUgc2FtZSBvcmRlciB0aGF0IHRoZXkgYXJlIGluamVjdGVkIGJlY2F1c2VcbiAqIHRoYXQgb3JkZXJpbmcgd291bGQgYmUgaW5mbHVlbmNlZCBieSB0aGUgcGFja2FnaW5nIG9yZGVyLlxuICogYFJlc3BvbmRlckV2ZW50UGx1Z2luYCBtdXN0IG9jY3VyIGJlZm9yZSBgU2ltcGxlRXZlbnRQbHVnaW5gIHNvIHRoYXRcbiAqIHByZXZlbnRpbmcgZGVmYXVsdCBvbiBldmVudHMgaXMgY29udmVuaWVudCBpbiBgU2ltcGxlRXZlbnRQbHVnaW5gIGhhbmRsZXJzLlxuICovXG52YXIgRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIgPSBba2V5T2YoeyBSZXNwb25kZXJFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBTaW1wbGVFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBUYXBFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBFbnRlckxlYXZlRXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgQ2hhbmdlRXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgU2VsZWN0RXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgQmVmb3JlSW5wdXRFdmVudFBsdWdpbjogbnVsbCB9KV07XG5cbm1vZHVsZS5leHBvcnRzID0gRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEVudGVyTGVhdmVFdmVudFBsdWdpblxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudENvbnN0YW50cyA9IHJlcXVpcmUoJy4vRXZlbnRDb25zdGFudHMnKTtcbnZhciBFdmVudFByb3BhZ2F0b3JzID0gcmVxdWlyZSgnLi9FdmVudFByb3BhZ2F0b3JzJyk7XG52YXIgU3ludGhldGljTW91c2VFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljTW91c2VFdmVudCcpO1xuXG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcblxudmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xudmFyIGdldEZpcnN0UmVhY3RET00gPSBSZWFjdE1vdW50LmdldEZpcnN0UmVhY3RET007XG5cbnZhciBldmVudFR5cGVzID0ge1xuICBtb3VzZUVudGVyOiB7XG4gICAgcmVnaXN0cmF0aW9uTmFtZToga2V5T2YoeyBvbk1vdXNlRW50ZXI6IG51bGwgfSksXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU91dCwgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU92ZXJdXG4gIH0sXG4gIG1vdXNlTGVhdmU6IHtcbiAgICByZWdpc3RyYXRpb25OYW1lOiBrZXlPZih7IG9uTW91c2VMZWF2ZTogbnVsbCB9KSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3V0LCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3Zlcl1cbiAgfVxufTtcblxudmFyIGV4dHJhY3RlZEV2ZW50cyA9IFtudWxsLCBudWxsXTtcblxudmFyIEVudGVyTGVhdmVFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBGb3IgYWxtb3N0IGV2ZXJ5IGludGVyYWN0aW9uIHdlIGNhcmUgYWJvdXQsIHRoZXJlIHdpbGwgYmUgYm90aCBhIHRvcC1sZXZlbFxuICAgKiBgbW91c2VvdmVyYCBhbmQgYG1vdXNlb3V0YCBldmVudCB0aGF0IG9jY3Vycy4gT25seSB1c2UgYG1vdXNlb3V0YCBzbyB0aGF0XG4gICAqIHdlIGRvIG5vdCBleHRyYWN0IGR1cGxpY2F0ZSBldmVudHMuIEhvd2V2ZXIsIG1vdmluZyB0aGUgbW91c2UgaW50byB0aGVcbiAgICogYnJvd3NlciBmcm9tIG91dHNpZGUgd2lsbCBub3QgZmlyZSBhIGBtb3VzZW91dGAgZXZlbnQuIEluIHRoaXMgY2FzZSwgd2UgdXNlXG4gICAqIHRoZSBgbW91c2VvdmVyYCB0b3AtbGV2ZWwgZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyICYmIChuYXRpdmVFdmVudC5yZWxhdGVkVGFyZ2V0IHx8IG5hdGl2ZUV2ZW50LmZyb21FbGVtZW50KSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICh0b3BMZXZlbFR5cGUgIT09IHRvcExldmVsVHlwZXMudG9wTW91c2VPdXQgJiYgdG9wTGV2ZWxUeXBlICE9PSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3Zlcikge1xuICAgICAgLy8gTXVzdCBub3QgYmUgYSBtb3VzZSBpbiBvciBtb3VzZSBvdXQgLSBpZ25vcmluZy5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciB3aW47XG4gICAgaWYgKHRvcExldmVsVGFyZ2V0LndpbmRvdyA9PT0gdG9wTGV2ZWxUYXJnZXQpIHtcbiAgICAgIC8vIGB0b3BMZXZlbFRhcmdldGAgaXMgcHJvYmFibHkgYSB3aW5kb3cgb2JqZWN0LlxuICAgICAgd2luID0gdG9wTGV2ZWxUYXJnZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRPRE86IEZpZ3VyZSBvdXQgd2h5IGBvd25lckRvY3VtZW50YCBpcyBzb21ldGltZXMgdW5kZWZpbmVkIGluIElFOC5cbiAgICAgIHZhciBkb2MgPSB0b3BMZXZlbFRhcmdldC5vd25lckRvY3VtZW50O1xuICAgICAgaWYgKGRvYykge1xuICAgICAgICB3aW4gPSBkb2MuZGVmYXVsdFZpZXcgfHwgZG9jLnBhcmVudFdpbmRvdztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbiA9IHdpbmRvdztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZnJvbTtcbiAgICB2YXIgdG87XG4gICAgdmFyIGZyb21JRCA9ICcnO1xuICAgIHZhciB0b0lEID0gJyc7XG4gICAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU91dCkge1xuICAgICAgZnJvbSA9IHRvcExldmVsVGFyZ2V0O1xuICAgICAgZnJvbUlEID0gdG9wTGV2ZWxUYXJnZXRJRDtcbiAgICAgIHRvID0gZ2V0Rmlyc3RSZWFjdERPTShuYXRpdmVFdmVudC5yZWxhdGVkVGFyZ2V0IHx8IG5hdGl2ZUV2ZW50LnRvRWxlbWVudCk7XG4gICAgICBpZiAodG8pIHtcbiAgICAgICAgdG9JRCA9IFJlYWN0TW91bnQuZ2V0SUQodG8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG8gPSB3aW47XG4gICAgICB9XG4gICAgICB0byA9IHRvIHx8IHdpbjtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJvbSA9IHdpbjtcbiAgICAgIHRvID0gdG9wTGV2ZWxUYXJnZXQ7XG4gICAgICB0b0lEID0gdG9wTGV2ZWxUYXJnZXRJRDtcbiAgICB9XG5cbiAgICBpZiAoZnJvbSA9PT0gdG8pIHtcbiAgICAgIC8vIE5vdGhpbmcgcGVydGFpbnMgdG8gb3VyIG1hbmFnZWQgY29tcG9uZW50cy5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBsZWF2ZSA9IFN5bnRoZXRpY01vdXNlRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMubW91c2VMZWF2ZSwgZnJvbUlELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuICAgIGxlYXZlLnR5cGUgPSAnbW91c2VsZWF2ZSc7XG4gICAgbGVhdmUudGFyZ2V0ID0gZnJvbTtcbiAgICBsZWF2ZS5yZWxhdGVkVGFyZ2V0ID0gdG87XG5cbiAgICB2YXIgZW50ZXIgPSBTeW50aGV0aWNNb3VzZUV2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLm1vdXNlRW50ZXIsIHRvSUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgZW50ZXIudHlwZSA9ICdtb3VzZWVudGVyJztcbiAgICBlbnRlci50YXJnZXQgPSB0bztcbiAgICBlbnRlci5yZWxhdGVkVGFyZ2V0ID0gZnJvbTtcblxuICAgIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZUVudGVyTGVhdmVEaXNwYXRjaGVzKGxlYXZlLCBlbnRlciwgZnJvbUlELCB0b0lEKTtcblxuICAgIGV4dHJhY3RlZEV2ZW50c1swXSA9IGxlYXZlO1xuICAgIGV4dHJhY3RlZEV2ZW50c1sxXSA9IGVudGVyO1xuXG4gICAgcmV0dXJuIGV4dHJhY3RlZEV2ZW50cztcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEVudGVyTGVhdmVFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRDb25zdGFudHNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBrZXlNaXJyb3IgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlNaXJyb3InKTtcblxudmFyIFByb3BhZ2F0aW9uUGhhc2VzID0ga2V5TWlycm9yKHsgYnViYmxlZDogbnVsbCwgY2FwdHVyZWQ6IG51bGwgfSk7XG5cbi8qKlxuICogVHlwZXMgb2YgcmF3IHNpZ25hbHMgZnJvbSB0aGUgYnJvd3NlciBjYXVnaHQgYXQgdGhlIHRvcCBsZXZlbC5cbiAqL1xudmFyIHRvcExldmVsVHlwZXMgPSBrZXlNaXJyb3Ioe1xuICB0b3BBYm9ydDogbnVsbCxcbiAgdG9wQmx1cjogbnVsbCxcbiAgdG9wQ2FuUGxheTogbnVsbCxcbiAgdG9wQ2FuUGxheVRocm91Z2g6IG51bGwsXG4gIHRvcENoYW5nZTogbnVsbCxcbiAgdG9wQ2xpY2s6IG51bGwsXG4gIHRvcENvbXBvc2l0aW9uRW5kOiBudWxsLFxuICB0b3BDb21wb3NpdGlvblN0YXJ0OiBudWxsLFxuICB0b3BDb21wb3NpdGlvblVwZGF0ZTogbnVsbCxcbiAgdG9wQ29udGV4dE1lbnU6IG51bGwsXG4gIHRvcENvcHk6IG51bGwsXG4gIHRvcEN1dDogbnVsbCxcbiAgdG9wRG91YmxlQ2xpY2s6IG51bGwsXG4gIHRvcERyYWc6IG51bGwsXG4gIHRvcERyYWdFbmQ6IG51bGwsXG4gIHRvcERyYWdFbnRlcjogbnVsbCxcbiAgdG9wRHJhZ0V4aXQ6IG51bGwsXG4gIHRvcERyYWdMZWF2ZTogbnVsbCxcbiAgdG9wRHJhZ092ZXI6IG51bGwsXG4gIHRvcERyYWdTdGFydDogbnVsbCxcbiAgdG9wRHJvcDogbnVsbCxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6IG51bGwsXG4gIHRvcEVtcHRpZWQ6IG51bGwsXG4gIHRvcEVuY3J5cHRlZDogbnVsbCxcbiAgdG9wRW5kZWQ6IG51bGwsXG4gIHRvcEVycm9yOiBudWxsLFxuICB0b3BGb2N1czogbnVsbCxcbiAgdG9wSW5wdXQ6IG51bGwsXG4gIHRvcEtleURvd246IG51bGwsXG4gIHRvcEtleVByZXNzOiBudWxsLFxuICB0b3BLZXlVcDogbnVsbCxcbiAgdG9wTG9hZDogbnVsbCxcbiAgdG9wTG9hZGVkRGF0YTogbnVsbCxcbiAgdG9wTG9hZGVkTWV0YWRhdGE6IG51bGwsXG4gIHRvcExvYWRTdGFydDogbnVsbCxcbiAgdG9wTW91c2VEb3duOiBudWxsLFxuICB0b3BNb3VzZU1vdmU6IG51bGwsXG4gIHRvcE1vdXNlT3V0OiBudWxsLFxuICB0b3BNb3VzZU92ZXI6IG51bGwsXG4gIHRvcE1vdXNlVXA6IG51bGwsXG4gIHRvcFBhc3RlOiBudWxsLFxuICB0b3BQYXVzZTogbnVsbCxcbiAgdG9wUGxheTogbnVsbCxcbiAgdG9wUGxheWluZzogbnVsbCxcbiAgdG9wUHJvZ3Jlc3M6IG51bGwsXG4gIHRvcFJhdGVDaGFuZ2U6IG51bGwsXG4gIHRvcFJlc2V0OiBudWxsLFxuICB0b3BTY3JvbGw6IG51bGwsXG4gIHRvcFNlZWtlZDogbnVsbCxcbiAgdG9wU2Vla2luZzogbnVsbCxcbiAgdG9wU2VsZWN0aW9uQ2hhbmdlOiBudWxsLFxuICB0b3BTdGFsbGVkOiBudWxsLFxuICB0b3BTdWJtaXQ6IG51bGwsXG4gIHRvcFN1c3BlbmQ6IG51bGwsXG4gIHRvcFRleHRJbnB1dDogbnVsbCxcbiAgdG9wVGltZVVwZGF0ZTogbnVsbCxcbiAgdG9wVG91Y2hDYW5jZWw6IG51bGwsXG4gIHRvcFRvdWNoRW5kOiBudWxsLFxuICB0b3BUb3VjaE1vdmU6IG51bGwsXG4gIHRvcFRvdWNoU3RhcnQ6IG51bGwsXG4gIHRvcFZvbHVtZUNoYW5nZTogbnVsbCxcbiAgdG9wV2FpdGluZzogbnVsbCxcbiAgdG9wV2hlZWw6IG51bGxcbn0pO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSB7XG4gIHRvcExldmVsVHlwZXM6IHRvcExldmVsVHlwZXMsXG4gIFByb3BhZ2F0aW9uUGhhc2VzOiBQcm9wYWdhdGlvblBoYXNlc1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudENvbnN0YW50czsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQbHVnaW5IdWJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudFBsdWdpblJlZ2lzdHJ5ID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpblJlZ2lzdHJ5Jyk7XG52YXIgRXZlbnRQbHVnaW5VdGlscyA9IHJlcXVpcmUoJy4vRXZlbnRQbHVnaW5VdGlscycpO1xudmFyIFJlYWN0RXJyb3JVdGlscyA9IHJlcXVpcmUoJy4vUmVhY3RFcnJvclV0aWxzJyk7XG5cbnZhciBhY2N1bXVsYXRlSW50byA9IHJlcXVpcmUoJy4vYWNjdW11bGF0ZUludG8nKTtcbnZhciBmb3JFYWNoQWNjdW11bGF0ZWQgPSByZXF1aXJlKCcuL2ZvckVhY2hBY2N1bXVsYXRlZCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogSW50ZXJuYWwgc3RvcmUgZm9yIGV2ZW50IGxpc3RlbmVyc1xuICovXG52YXIgbGlzdGVuZXJCYW5rID0ge307XG5cbi8qKlxuICogSW50ZXJuYWwgcXVldWUgb2YgZXZlbnRzIHRoYXQgaGF2ZSBhY2N1bXVsYXRlZCB0aGVpciBkaXNwYXRjaGVzIGFuZCBhcmVcbiAqIHdhaXRpbmcgdG8gaGF2ZSB0aGVpciBkaXNwYXRjaGVzIGV4ZWN1dGVkLlxuICovXG52YXIgZXZlbnRRdWV1ZSA9IG51bGw7XG5cbi8qKlxuICogRGlzcGF0Y2hlcyBhbiBldmVudCBhbmQgcmVsZWFzZXMgaXQgYmFjayBpbnRvIHRoZSBwb29sLCB1bmxlc3MgcGVyc2lzdGVudC5cbiAqXG4gKiBAcGFyYW0gez9vYmplY3R9IGV2ZW50IFN5bnRoZXRpYyBldmVudCB0byBiZSBkaXNwYXRjaGVkLlxuICogQHBhcmFtIHtib29sZWFufSBzaW11bGF0ZWQgSWYgdGhlIGV2ZW50IGlzIHNpbXVsYXRlZCAoY2hhbmdlcyBleG4gYmVoYXZpb3IpXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlID0gZnVuY3Rpb24gKGV2ZW50LCBzaW11bGF0ZWQpIHtcbiAgaWYgKGV2ZW50KSB7XG4gICAgRXZlbnRQbHVnaW5VdGlscy5leGVjdXRlRGlzcGF0Y2hlc0luT3JkZXIoZXZlbnQsIHNpbXVsYXRlZCk7XG5cbiAgICBpZiAoIWV2ZW50LmlzUGVyc2lzdGVudCgpKSB7XG4gICAgICBldmVudC5jb25zdHJ1Y3Rvci5yZWxlYXNlKGV2ZW50KTtcbiAgICB9XG4gIH1cbn07XG52YXIgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlU2ltdWxhdGVkID0gZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuIGV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZShlLCB0cnVlKTtcbn07XG52YXIgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlVG9wTGV2ZWwgPSBmdW5jdGlvbiAoZSkge1xuICByZXR1cm4gZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlKGUsIGZhbHNlKTtcbn07XG5cbi8qKlxuICogLSBgSW5zdGFuY2VIYW5kbGVgOiBbcmVxdWlyZWRdIE1vZHVsZSB0aGF0IHBlcmZvcm1zIGxvZ2ljYWwgdHJhdmVyc2FscyBvZiBET01cbiAqICAgaGllcmFyY2h5IGdpdmVuIGlkcyBvZiB0aGUgbG9naWNhbCBET00gZWxlbWVudHMgaW52b2x2ZWQuXG4gKi9cbnZhciBJbnN0YW5jZUhhbmRsZSA9IG51bGw7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlSW5zdGFuY2VIYW5kbGUoKSB7XG4gIHZhciB2YWxpZCA9IEluc3RhbmNlSGFuZGxlICYmIEluc3RhbmNlSGFuZGxlLnRyYXZlcnNlVHdvUGhhc2UgJiYgSW5zdGFuY2VIYW5kbGUudHJhdmVyc2VFbnRlckxlYXZlO1xuICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh2YWxpZCwgJ0luc3RhbmNlSGFuZGxlIG5vdCBpbmplY3RlZCBiZWZvcmUgdXNlIScpIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSB1bmlmaWVkIGludGVyZmFjZSBmb3IgZXZlbnQgcGx1Z2lucyB0byBiZSBpbnN0YWxsZWQgYW5kIGNvbmZpZ3VyZWQuXG4gKlxuICogRXZlbnQgcGx1Z2lucyBjYW4gaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAgIGBleHRyYWN0RXZlbnRzYCB7ZnVuY3Rpb24oc3RyaW5nLCBET01FdmVudFRhcmdldCwgc3RyaW5nLCBvYmplY3QpOiAqfVxuICogICAgIFJlcXVpcmVkLiBXaGVuIGEgdG9wLWxldmVsIGV2ZW50IGlzIGZpcmVkLCB0aGlzIG1ldGhvZCBpcyBleHBlY3RlZCB0b1xuICogICAgIGV4dHJhY3Qgc3ludGhldGljIGV2ZW50cyB0aGF0IHdpbGwgaW4gdHVybiBiZSBxdWV1ZWQgYW5kIGRpc3BhdGNoZWQuXG4gKlxuICogICBgZXZlbnRUeXBlc2Age29iamVjdH1cbiAqICAgICBPcHRpb25hbCwgcGx1Z2lucyB0aGF0IGZpcmUgZXZlbnRzIG11c3QgcHVibGlzaCBhIG1hcHBpbmcgb2YgcmVnaXN0cmF0aW9uXG4gKiAgICAgbmFtZXMgdGhhdCBhcmUgdXNlZCB0byByZWdpc3RlciBsaXN0ZW5lcnMuIFZhbHVlcyBvZiB0aGlzIG1hcHBpbmcgbXVzdFxuICogICAgIGJlIG9iamVjdHMgdGhhdCBjb250YWluIGByZWdpc3RyYXRpb25OYW1lYCBvciBgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXNgLlxuICpcbiAqICAgYGV4ZWN1dGVEaXNwYXRjaGAge2Z1bmN0aW9uKG9iamVjdCwgZnVuY3Rpb24sIHN0cmluZyl9XG4gKiAgICAgT3B0aW9uYWwsIGFsbG93cyBwbHVnaW5zIHRvIG92ZXJyaWRlIGhvdyBhbiBldmVudCBnZXRzIGRpc3BhdGNoZWQuIEJ5XG4gKiAgICAgZGVmYXVsdCwgdGhlIGxpc3RlbmVyIGlzIHNpbXBseSBpbnZva2VkLlxuICpcbiAqIEVhY2ggcGx1Z2luIHRoYXQgaXMgaW5qZWN0ZWQgaW50byBgRXZlbnRzUGx1Z2luSHViYCBpcyBpbW1lZGlhdGVseSBvcGVyYWJsZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbnZhciBFdmVudFBsdWdpbkh1YiA9IHtcblxuICAvKipcbiAgICogTWV0aG9kcyBmb3IgaW5qZWN0aW5nIGRlcGVuZGVuY2llcy5cbiAgICovXG4gIGluamVjdGlvbjoge1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IEluamVjdGVkTW91bnRcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgaW5qZWN0TW91bnQ6IEV2ZW50UGx1Z2luVXRpbHMuaW5qZWN0aW9uLmluamVjdE1vdW50LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IEluamVjdGVkSW5zdGFuY2VIYW5kbGVcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgaW5qZWN0SW5zdGFuY2VIYW5kbGU6IGZ1bmN0aW9uIChJbmplY3RlZEluc3RhbmNlSGFuZGxlKSB7XG4gICAgICBJbnN0YW5jZUhhbmRsZSA9IEluamVjdGVkSW5zdGFuY2VIYW5kbGU7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YWxpZGF0ZUluc3RhbmNlSGFuZGxlKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGdldEluc3RhbmNlSGFuZGxlOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YWxpZGF0ZUluc3RhbmNlSGFuZGxlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gSW5zdGFuY2VIYW5kbGU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7YXJyYXl9IEluamVjdGVkRXZlbnRQbHVnaW5PcmRlclxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBpbmplY3RFdmVudFBsdWdpbk9yZGVyOiBFdmVudFBsdWdpblJlZ2lzdHJ5LmluamVjdEV2ZW50UGx1Z2luT3JkZXIsXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gaW5qZWN0ZWROYW1lc1RvUGx1Z2lucyBNYXAgZnJvbSBuYW1lcyB0byBwbHVnaW4gbW9kdWxlcy5cbiAgICAgKi9cbiAgICBpbmplY3RFdmVudFBsdWdpbnNCeU5hbWU6IEV2ZW50UGx1Z2luUmVnaXN0cnkuaW5qZWN0RXZlbnRQbHVnaW5zQnlOYW1lXG5cbiAgfSxcblxuICBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M6IEV2ZW50UGx1Z2luUmVnaXN0cnkuZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzLFxuXG4gIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzOiBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLFxuXG4gIC8qKlxuICAgKiBTdG9yZXMgYGxpc3RlbmVyYCBhdCBgbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdW2lkXWAuIElzIGlkZW1wb3RlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiB0aGUgRE9NIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWdpc3RyYXRpb25OYW1lIE5hbWUgb2YgbGlzdGVuZXIgKGUuZy4gYG9uQ2xpY2tgKS5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGxpc3RlbmVyIFRoZSBjYWxsYmFjayB0byBzdG9yZS5cbiAgICovXG4gIHB1dExpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUsIGxpc3RlbmVyKSB7XG4gICAgISh0eXBlb2YgbGlzdGVuZXIgPT09ICdmdW5jdGlvbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V4cGVjdGVkICVzIGxpc3RlbmVyIHRvIGJlIGEgZnVuY3Rpb24sIGluc3RlYWQgZ290IHR5cGUgJXMnLCByZWdpc3RyYXRpb25OYW1lLCB0eXBlb2YgbGlzdGVuZXIpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZSA9IGxpc3RlbmVyQmFua1tyZWdpc3RyYXRpb25OYW1lXSB8fCAobGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdID0ge30pO1xuICAgIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lW2lkXSA9IGxpc3RlbmVyO1xuXG4gICAgdmFyIFBsdWdpbk1vZHVsZSA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgaWYgKFBsdWdpbk1vZHVsZSAmJiBQbHVnaW5Nb2R1bGUuZGlkUHV0TGlzdGVuZXIpIHtcbiAgICAgIFBsdWdpbk1vZHVsZS5kaWRQdXRMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuICAgKiBAcmV0dXJuIHs/ZnVuY3Rpb259IFRoZSBzdG9yZWQgY2FsbGJhY2suXG4gICAqL1xuICBnZXRMaXN0ZW5lcjogZnVuY3Rpb24gKGlkLCByZWdpc3RyYXRpb25OYW1lKSB7XG4gICAgdmFyIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lID0gbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdO1xuICAgIHJldHVybiBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZSAmJiBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZVtpZF07XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYSBsaXN0ZW5lciBmcm9tIHRoZSByZWdpc3RyYXRpb24gYmFuay5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuICAgKi9cbiAgZGVsZXRlTGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIHZhciBQbHVnaW5Nb2R1bGUgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW3JlZ2lzdHJhdGlvbk5hbWVdO1xuICAgIGlmIChQbHVnaW5Nb2R1bGUgJiYgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcikge1xuICAgICAgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSk7XG4gICAgfVxuXG4gICAgdmFyIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lID0gbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdO1xuICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIG5ldmVyIGJlIG51bGwgLS0gd2hlbiBpcyBpdD9cbiAgICBpZiAoYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICAgIGRlbGV0ZSBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZVtpZF07XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFsbCBsaXN0ZW5lcnMgZm9yIHRoZSBET00gZWxlbWVudCB3aXRoIHRoZSBzdXBwbGllZCBJRC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICovXG4gIGRlbGV0ZUFsbExpc3RlbmVyczogZnVuY3Rpb24gKGlkKSB7XG4gICAgZm9yICh2YXIgcmVnaXN0cmF0aW9uTmFtZSBpbiBsaXN0ZW5lckJhbmspIHtcbiAgICAgIGlmICghbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdW2lkXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIFBsdWdpbk1vZHVsZSA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgICBpZiAoUGx1Z2luTW9kdWxlICYmIFBsdWdpbk1vZHVsZS53aWxsRGVsZXRlTGlzdGVuZXIpIHtcbiAgICAgICAgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV1baWRdO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQWxsb3dzIHJlZ2lzdGVyZWQgcGx1Z2lucyBhbiBvcHBvcnR1bml0eSB0byBleHRyYWN0IGV2ZW50cyBmcm9tIHRvcC1sZXZlbFxuICAgKiBuYXRpdmUgYnJvd3NlciBldmVudHMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICB2YXIgZXZlbnRzO1xuICAgIHZhciBwbHVnaW5zID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5wbHVnaW5zO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGx1Z2lucy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gTm90IGV2ZXJ5IHBsdWdpbiBpbiB0aGUgb3JkZXJpbmcgbWF5IGJlIGxvYWRlZCBhdCBydW50aW1lLlxuICAgICAgdmFyIHBvc3NpYmxlUGx1Z2luID0gcGx1Z2luc1tpXTtcbiAgICAgIGlmIChwb3NzaWJsZVBsdWdpbikge1xuICAgICAgICB2YXIgZXh0cmFjdGVkRXZlbnRzID0gcG9zc2libGVQbHVnaW4uZXh0cmFjdEV2ZW50cyh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuICAgICAgICBpZiAoZXh0cmFjdGVkRXZlbnRzKSB7XG4gICAgICAgICAgZXZlbnRzID0gYWNjdW11bGF0ZUludG8oZXZlbnRzLCBleHRyYWN0ZWRFdmVudHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBldmVudHM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVucXVldWVzIGEgc3ludGhldGljIGV2ZW50IHRoYXQgc2hvdWxkIGJlIGRpc3BhdGNoZWQgd2hlblxuICAgKiBgcHJvY2Vzc0V2ZW50UXVldWVgIGlzIGludm9rZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnRzIEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVFdmVudHM6IGZ1bmN0aW9uIChldmVudHMpIHtcbiAgICBpZiAoZXZlbnRzKSB7XG4gICAgICBldmVudFF1ZXVlID0gYWNjdW11bGF0ZUludG8oZXZlbnRRdWV1ZSwgZXZlbnRzKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYWxsIHN5bnRoZXRpYyBldmVudHMgb24gdGhlIGV2ZW50IHF1ZXVlLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHByb2Nlc3NFdmVudFF1ZXVlOiBmdW5jdGlvbiAoc2ltdWxhdGVkKSB7XG4gICAgLy8gU2V0IGBldmVudFF1ZXVlYCB0byBudWxsIGJlZm9yZSBwcm9jZXNzaW5nIGl0IHNvIHRoYXQgd2UgY2FuIHRlbGwgaWYgbW9yZVxuICAgIC8vIGV2ZW50cyBnZXQgZW5xdWV1ZWQgd2hpbGUgcHJvY2Vzc2luZy5cbiAgICB2YXIgcHJvY2Vzc2luZ0V2ZW50UXVldWUgPSBldmVudFF1ZXVlO1xuICAgIGV2ZW50UXVldWUgPSBudWxsO1xuICAgIGlmIChzaW11bGF0ZWQpIHtcbiAgICAgIGZvckVhY2hBY2N1bXVsYXRlZChwcm9jZXNzaW5nRXZlbnRRdWV1ZSwgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlU2ltdWxhdGVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yRWFjaEFjY3VtdWxhdGVkKHByb2Nlc3NpbmdFdmVudFF1ZXVlLCBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2VUb3BMZXZlbCk7XG4gICAgfVxuICAgICEhZXZlbnRRdWV1ZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwcm9jZXNzRXZlbnRRdWV1ZSgpOiBBZGRpdGlvbmFsIGV2ZW50cyB3ZXJlIGVucXVldWVkIHdoaWxlIHByb2Nlc3NpbmcgJyArICdhbiBldmVudCBxdWV1ZS4gU3VwcG9ydCBmb3IgdGhpcyBoYXMgbm90IHlldCBiZWVuIGltcGxlbWVudGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIGEgZ29vZCB0aW1lIHRvIHJldGhyb3cgaWYgYW55IG9mIHRoZSBldmVudCBoYW5kbGVycyB0aHJldy5cbiAgICBSZWFjdEVycm9yVXRpbHMucmV0aHJvd0NhdWdodEVycm9yKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZXNlIGFyZSBuZWVkZWQgZm9yIHRlc3RzIG9ubHkuIERvIG5vdCB1c2UhXG4gICAqL1xuICBfX3B1cmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgbGlzdGVuZXJCYW5rID0ge307XG4gIH0sXG5cbiAgX19nZXRMaXN0ZW5lckJhbms6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbGlzdGVuZXJCYW5rO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQbHVnaW5IdWI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEV2ZW50UGx1Z2luUmVnaXN0cnlcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogSW5qZWN0YWJsZSBvcmRlcmluZyBvZiBldmVudCBwbHVnaW5zLlxuICovXG52YXIgRXZlbnRQbHVnaW5PcmRlciA9IG51bGw7XG5cbi8qKlxuICogSW5qZWN0YWJsZSBtYXBwaW5nIGZyb20gbmFtZXMgdG8gZXZlbnQgcGx1Z2luIG1vZHVsZXMuXG4gKi9cbnZhciBuYW1lc1RvUGx1Z2lucyA9IHt9O1xuXG4vKipcbiAqIFJlY29tcHV0ZXMgdGhlIHBsdWdpbiBsaXN0IHVzaW5nIHRoZSBpbmplY3RlZCBwbHVnaW5zIGFuZCBwbHVnaW4gb3JkZXJpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVjb21wdXRlUGx1Z2luT3JkZXJpbmcoKSB7XG4gIGlmICghRXZlbnRQbHVnaW5PcmRlcikge1xuICAgIC8vIFdhaXQgdW50aWwgYW4gYEV2ZW50UGx1Z2luT3JkZXJgIGlzIGluamVjdGVkLlxuICAgIHJldHVybjtcbiAgfVxuICBmb3IgKHZhciBwbHVnaW5OYW1lIGluIG5hbWVzVG9QbHVnaW5zKSB7XG4gICAgdmFyIFBsdWdpbk1vZHVsZSA9IG5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdO1xuICAgIHZhciBwbHVnaW5JbmRleCA9IEV2ZW50UGx1Z2luT3JkZXIuaW5kZXhPZihwbHVnaW5OYW1lKTtcbiAgICAhKHBsdWdpbkluZGV4ID4gLTEpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IENhbm5vdCBpbmplY3QgZXZlbnQgcGx1Z2lucyB0aGF0IGRvIG5vdCBleGlzdCBpbiAnICsgJ3RoZSBwbHVnaW4gb3JkZXJpbmcsIGAlc2AuJywgcGx1Z2luTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIGlmIChFdmVudFBsdWdpblJlZ2lzdHJ5LnBsdWdpbnNbcGx1Z2luSW5kZXhdKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgIVBsdWdpbk1vZHVsZS5leHRyYWN0RXZlbnRzID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IEV2ZW50IHBsdWdpbnMgbXVzdCBpbXBsZW1lbnQgYW4gYGV4dHJhY3RFdmVudHNgICcgKyAnbWV0aG9kLCBidXQgYCVzYCBkb2VzIG5vdC4nLCBwbHVnaW5OYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgRXZlbnRQbHVnaW5SZWdpc3RyeS5wbHVnaW5zW3BsdWdpbkluZGV4XSA9IFBsdWdpbk1vZHVsZTtcbiAgICB2YXIgcHVibGlzaGVkRXZlbnRzID0gUGx1Z2luTW9kdWxlLmV2ZW50VHlwZXM7XG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIHB1Ymxpc2hlZEV2ZW50cykge1xuICAgICAgIXB1Ymxpc2hFdmVudEZvclBsdWdpbihwdWJsaXNoZWRFdmVudHNbZXZlbnROYW1lXSwgUGx1Z2luTW9kdWxlLCBldmVudE5hbWUpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IEZhaWxlZCB0byBwdWJsaXNoIGV2ZW50IGAlc2AgZm9yIHBsdWdpbiBgJXNgLicsIGV2ZW50TmFtZSwgcGx1Z2luTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFB1Ymxpc2hlcyBhbiBldmVudCBzbyB0aGF0IGl0IGNhbiBiZSBkaXNwYXRjaGVkIGJ5IHRoZSBzdXBwbGllZCBwbHVnaW4uXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIERpc3BhdGNoIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBldmVudC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBQbHVnaW5Nb2R1bGUgUGx1Z2luIHB1Ymxpc2hpbmcgdGhlIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgd2FzIHN1Y2Nlc3NmdWxseSBwdWJsaXNoZWQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwdWJsaXNoRXZlbnRGb3JQbHVnaW4oZGlzcGF0Y2hDb25maWcsIFBsdWdpbk1vZHVsZSwgZXZlbnROYW1lKSB7XG4gICEhRXZlbnRQbHVnaW5SZWdpc3RyeS5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3MuaGFzT3duUHJvcGVydHkoZXZlbnROYW1lKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFdmVudFBsdWdpbkh1YjogTW9yZSB0aGFuIG9uZSBwbHVnaW4gYXR0ZW1wdGVkIHRvIHB1Ymxpc2ggdGhlIHNhbWUgJyArICdldmVudCBuYW1lLCBgJXNgLicsIGV2ZW50TmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBFdmVudFBsdWdpblJlZ2lzdHJ5LmV2ZW50TmFtZURpc3BhdGNoQ29uZmlnc1tldmVudE5hbWVdID0gZGlzcGF0Y2hDb25maWc7XG5cbiAgdmFyIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzID0gZGlzcGF0Y2hDb25maWcucGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM7XG4gIGlmIChwaGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgIGZvciAodmFyIHBoYXNlTmFtZSBpbiBwaGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgICAgaWYgKHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzLmhhc093blByb3BlcnR5KHBoYXNlTmFtZSkpIHtcbiAgICAgICAgdmFyIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWUgPSBwaGFzZWRSZWdpc3RyYXRpb25OYW1lc1twaGFzZU5hbWVdO1xuICAgICAgICBwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZShwaGFzZWRSZWdpc3RyYXRpb25OYW1lLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKGRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICBwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZShkaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFB1Ymxpc2hlcyBhIHJlZ2lzdHJhdGlvbiBuYW1lIHRoYXQgaXMgdXNlZCB0byBpZGVudGlmeSBkaXNwYXRjaGVkIGV2ZW50cyBhbmRcbiAqIGNhbiBiZSB1c2VkIHdpdGggYEV2ZW50UGx1Z2luSHViLnB1dExpc3RlbmVyYCB0byByZWdpc3RlciBsaXN0ZW5lcnMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgUmVnaXN0cmF0aW9uIG5hbWUgdG8gYWRkLlxuICogQHBhcmFtIHtvYmplY3R9IFBsdWdpbk1vZHVsZSBQbHVnaW4gcHVibGlzaGluZyB0aGUgZXZlbnQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZShyZWdpc3RyYXRpb25OYW1lLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSkge1xuICAhIUV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV0gPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5IdWI6IE1vcmUgdGhhbiBvbmUgcGx1Z2luIGF0dGVtcHRlZCB0byBwdWJsaXNoIHRoZSBzYW1lICcgKyAncmVnaXN0cmF0aW9uIG5hbWUsIGAlc2AuJywgcmVnaXN0cmF0aW9uTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW3JlZ2lzdHJhdGlvbk5hbWVdID0gUGx1Z2luTW9kdWxlO1xuICBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVEZXBlbmRlbmNpZXNbcmVnaXN0cmF0aW9uTmFtZV0gPSBQbHVnaW5Nb2R1bGUuZXZlbnRUeXBlc1tldmVudE5hbWVdLmRlcGVuZGVuY2llcztcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgcGx1Z2lucyBzbyB0aGF0IHRoZXkgY2FuIGV4dHJhY3QgYW5kIGRpc3BhdGNoIGV2ZW50cy5cbiAqXG4gKiBAc2VlIHtFdmVudFBsdWdpbkh1Yn1cbiAqL1xudmFyIEV2ZW50UGx1Z2luUmVnaXN0cnkgPSB7XG5cbiAgLyoqXG4gICAqIE9yZGVyZWQgbGlzdCBvZiBpbmplY3RlZCBwbHVnaW5zLlxuICAgKi9cbiAgcGx1Z2luczogW10sXG5cbiAgLyoqXG4gICAqIE1hcHBpbmcgZnJvbSBldmVudCBuYW1lIHRvIGRpc3BhdGNoIGNvbmZpZ1xuICAgKi9cbiAgZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzOiB7fSxcblxuICAvKipcbiAgICogTWFwcGluZyBmcm9tIHJlZ2lzdHJhdGlvbiBuYW1lIHRvIHBsdWdpbiBtb2R1bGVcbiAgICovXG4gIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzOiB7fSxcblxuICAvKipcbiAgICogTWFwcGluZyBmcm9tIHJlZ2lzdHJhdGlvbiBuYW1lIHRvIGV2ZW50IG5hbWVcbiAgICovXG4gIHJlZ2lzdHJhdGlvbk5hbWVEZXBlbmRlbmNpZXM6IHt9LFxuXG4gIC8qKlxuICAgKiBJbmplY3RzIGFuIG9yZGVyaW5nIG9mIHBsdWdpbnMgKGJ5IHBsdWdpbiBuYW1lKS4gVGhpcyBhbGxvd3MgdGhlIG9yZGVyaW5nXG4gICAqIHRvIGJlIGRlY291cGxlZCBmcm9tIGluamVjdGlvbiBvZiB0aGUgYWN0dWFsIHBsdWdpbnMgc28gdGhhdCBvcmRlcmluZyBpc1xuICAgKiBhbHdheXMgZGV0ZXJtaW5pc3RpYyByZWdhcmRsZXNzIG9mIHBhY2thZ2luZywgb24tdGhlLWZseSBpbmplY3Rpb24sIGV0Yy5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheX0gSW5qZWN0ZWRFdmVudFBsdWdpbk9yZGVyXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5pbmplY3Rpb24uaW5qZWN0RXZlbnRQbHVnaW5PcmRlcn1cbiAgICovXG4gIGluamVjdEV2ZW50UGx1Z2luT3JkZXI6IGZ1bmN0aW9uIChJbmplY3RlZEV2ZW50UGx1Z2luT3JkZXIpIHtcbiAgICAhIUV2ZW50UGx1Z2luT3JkZXIgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5SZWdpc3RyeTogQ2Fubm90IGluamVjdCBldmVudCBwbHVnaW4gb3JkZXJpbmcgbW9yZSB0aGFuICcgKyAnb25jZS4gWW91IGFyZSBsaWtlbHkgdHJ5aW5nIHRvIGxvYWQgbW9yZSB0aGFuIG9uZSBjb3B5IG9mIFJlYWN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAvLyBDbG9uZSB0aGUgb3JkZXJpbmcgc28gaXQgY2Fubm90IGJlIGR5bmFtaWNhbGx5IG11dGF0ZWQuXG4gICAgRXZlbnRQbHVnaW5PcmRlciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKEluamVjdGVkRXZlbnRQbHVnaW5PcmRlcik7XG4gICAgcmVjb21wdXRlUGx1Z2luT3JkZXJpbmcoKTtcbiAgfSxcblxuICAvKipcbiAgICogSW5qZWN0cyBwbHVnaW5zIHRvIGJlIHVzZWQgYnkgYEV2ZW50UGx1Z2luSHViYC4gVGhlIHBsdWdpbiBuYW1lcyBtdXN0IGJlXG4gICAqIGluIHRoZSBvcmRlcmluZyBpbmplY3RlZCBieSBgaW5qZWN0RXZlbnRQbHVnaW5PcmRlcmAuXG4gICAqXG4gICAqIFBsdWdpbnMgY2FuIGJlIGluamVjdGVkIGFzIHBhcnQgb2YgcGFnZSBpbml0aWFsaXphdGlvbiBvciBvbi10aGUtZmx5LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaW5qZWN0ZWROYW1lc1RvUGx1Z2lucyBNYXAgZnJvbSBuYW1lcyB0byBwbHVnaW4gbW9kdWxlcy5cbiAgICogQGludGVybmFsXG4gICAqIEBzZWUge0V2ZW50UGx1Z2luSHViLmluamVjdGlvbi5pbmplY3RFdmVudFBsdWdpbnNCeU5hbWV9XG4gICAqL1xuICBpbmplY3RFdmVudFBsdWdpbnNCeU5hbWU6IGZ1bmN0aW9uIChpbmplY3RlZE5hbWVzVG9QbHVnaW5zKSB7XG4gICAgdmFyIGlzT3JkZXJpbmdEaXJ0eSA9IGZhbHNlO1xuICAgIGZvciAodmFyIHBsdWdpbk5hbWUgaW4gaW5qZWN0ZWROYW1lc1RvUGx1Z2lucykge1xuICAgICAgaWYgKCFpbmplY3RlZE5hbWVzVG9QbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIFBsdWdpbk1vZHVsZSA9IGluamVjdGVkTmFtZXNUb1BsdWdpbnNbcGx1Z2luTmFtZV07XG4gICAgICBpZiAoIW5hbWVzVG9QbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpIHx8IG5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdICE9PSBQbHVnaW5Nb2R1bGUpIHtcbiAgICAgICAgISFuYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFdmVudFBsdWdpblJlZ2lzdHJ5OiBDYW5ub3QgaW5qZWN0IHR3byBkaWZmZXJlbnQgZXZlbnQgcGx1Z2lucyAnICsgJ3VzaW5nIHRoZSBzYW1lIG5hbWUsIGAlc2AuJywgcGx1Z2luTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICBuYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXSA9IFBsdWdpbk1vZHVsZTtcbiAgICAgICAgaXNPcmRlcmluZ0RpcnR5ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzT3JkZXJpbmdEaXJ0eSkge1xuICAgICAgcmVjb21wdXRlUGx1Z2luT3JkZXJpbmcoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIExvb2tzIHVwIHRoZSBwbHVnaW4gZm9yIHRoZSBzdXBwbGllZCBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IEEgc3ludGhldGljIGV2ZW50LlxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBUaGUgcGx1Z2luIHRoYXQgY3JlYXRlZCB0aGUgc3VwcGxpZWQgZXZlbnQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0UGx1Z2luTW9kdWxlRm9yRXZlbnQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBkaXNwYXRjaENvbmZpZyA9IGV2ZW50LmRpc3BhdGNoQ29uZmlnO1xuICAgIGlmIChkaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lKSB7XG4gICAgICByZXR1cm4gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tkaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lXSB8fCBudWxsO1xuICAgIH1cbiAgICBmb3IgKHZhciBwaGFzZSBpbiBkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgICAgaWYgKCFkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcy5oYXNPd25Qcm9wZXJ0eShwaGFzZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgUGx1Z2luTW9kdWxlID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lc1twaGFzZV1dO1xuICAgICAgaWYgKFBsdWdpbk1vZHVsZSkge1xuICAgICAgICByZXR1cm4gUGx1Z2luTW9kdWxlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogRXhwb3NlZCBmb3IgdW5pdCB0ZXN0aW5nLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Jlc2V0RXZlbnRQbHVnaW5zOiBmdW5jdGlvbiAoKSB7XG4gICAgRXZlbnRQbHVnaW5PcmRlciA9IG51bGw7XG4gICAgZm9yICh2YXIgcGx1Z2luTmFtZSBpbiBuYW1lc1RvUGx1Z2lucykge1xuICAgICAgaWYgKG5hbWVzVG9QbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpKSB7XG4gICAgICAgIGRlbGV0ZSBuYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gICAgRXZlbnRQbHVnaW5SZWdpc3RyeS5wbHVnaW5zLmxlbmd0aCA9IDA7XG5cbiAgICB2YXIgZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M7XG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIGV2ZW50TmFtZURpc3BhdGNoQ29uZmlncykge1xuICAgICAgaWYgKGV2ZW50TmFtZURpc3BhdGNoQ29uZmlncy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKSB7XG4gICAgICAgIGRlbGV0ZSBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3NbZXZlbnROYW1lXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzO1xuICAgIGZvciAodmFyIHJlZ2lzdHJhdGlvbk5hbWUgaW4gcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMpIHtcbiAgICAgIGlmIChyZWdpc3RyYXRpb25OYW1lTW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShyZWdpc3RyYXRpb25OYW1lKSkge1xuICAgICAgICBkZWxldGUgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQbHVnaW5SZWdpc3RyeTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQbHVnaW5VdGlsc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIFJlYWN0RXJyb3JVdGlscyA9IHJlcXVpcmUoJy4vUmVhY3RFcnJvclV0aWxzJyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG4vKipcbiAqIEluamVjdGVkIGRlcGVuZGVuY2llczpcbiAqL1xuXG4vKipcbiAqIC0gYE1vdW50YDogW3JlcXVpcmVkXSBNb2R1bGUgdGhhdCBjYW4gY29udmVydCBiZXR3ZWVuIFJlYWN0IGRvbSBJRHMgYW5kXG4gKiAgIGFjdHVhbCBub2RlIHJlZmVyZW5jZXMuXG4gKi9cbnZhciBpbmplY3Rpb24gPSB7XG4gIE1vdW50OiBudWxsLFxuICBpbmplY3RNb3VudDogZnVuY3Rpb24gKEluamVjdGVkTW91bnQpIHtcbiAgICBpbmplY3Rpb24uTW91bnQgPSBJbmplY3RlZE1vdW50O1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhJbmplY3RlZE1vdW50ICYmIEluamVjdGVkTW91bnQuZ2V0Tm9kZSAmJiBJbmplY3RlZE1vdW50LmdldElELCAnRXZlbnRQbHVnaW5VdGlscy5pbmplY3Rpb24uaW5qZWN0TW91bnQoLi4uKTogSW5qZWN0ZWQgTW91bnQgJyArICdtb2R1bGUgaXMgbWlzc2luZyBnZXROb2RlIG9yIGdldElELicpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xuXG5mdW5jdGlvbiBpc0VuZGlzaCh0b3BMZXZlbFR5cGUpIHtcbiAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZVVwIHx8IHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BUb3VjaEVuZCB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wVG91Y2hDYW5jZWw7XG59XG5cbmZ1bmN0aW9uIGlzTW92ZWlzaCh0b3BMZXZlbFR5cGUpIHtcbiAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU1vdmUgfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoTW92ZTtcbn1cbmZ1bmN0aW9uIGlzU3RhcnRpc2godG9wTGV2ZWxUeXBlKSB7XG4gIHJldHVybiB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duIHx8IHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BUb3VjaFN0YXJ0O1xufVxuXG52YXIgdmFsaWRhdGVFdmVudERpc3BhdGNoZXM7XG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBkaXNwYXRjaExpc3RlbmVycyA9IGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycztcbiAgICB2YXIgZGlzcGF0Y2hJRHMgPSBldmVudC5fZGlzcGF0Y2hJRHM7XG5cbiAgICB2YXIgbGlzdGVuZXJzSXNBcnIgPSBBcnJheS5pc0FycmF5KGRpc3BhdGNoTGlzdGVuZXJzKTtcbiAgICB2YXIgaWRzSXNBcnIgPSBBcnJheS5pc0FycmF5KGRpc3BhdGNoSURzKTtcbiAgICB2YXIgSURzTGVuID0gaWRzSXNBcnIgPyBkaXNwYXRjaElEcy5sZW5ndGggOiBkaXNwYXRjaElEcyA/IDEgOiAwO1xuICAgIHZhciBsaXN0ZW5lcnNMZW4gPSBsaXN0ZW5lcnNJc0FyciA/IGRpc3BhdGNoTGlzdGVuZXJzLmxlbmd0aCA6IGRpc3BhdGNoTGlzdGVuZXJzID8gMSA6IDA7XG5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhpZHNJc0FyciA9PT0gbGlzdGVuZXJzSXNBcnIgJiYgSURzTGVuID09PSBsaXN0ZW5lcnNMZW4sICdFdmVudFBsdWdpblV0aWxzOiBJbnZhbGlkIGBldmVudGAuJykgOiB1bmRlZmluZWQ7XG4gIH07XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggdGhlIGV2ZW50IHRvIHRoZSBsaXN0ZW5lci5cbiAqIEBwYXJhbSB7U3ludGhldGljRXZlbnR9IGV2ZW50IFN5bnRoZXRpY0V2ZW50IHRvIGhhbmRsZVxuICogQHBhcmFtIHtib29sZWFufSBzaW11bGF0ZWQgSWYgdGhlIGV2ZW50IGlzIHNpbXVsYXRlZCAoY2hhbmdlcyBleG4gYmVoYXZpb3IpXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBsaXN0ZW5lciBBcHBsaWNhdGlvbi1sZXZlbCBjYWxsYmFja1xuICogQHBhcmFtIHtzdHJpbmd9IGRvbUlEIERPTSBpZCB0byBwYXNzIHRvIHRoZSBjYWxsYmFjay5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZURpc3BhdGNoKGV2ZW50LCBzaW11bGF0ZWQsIGxpc3RlbmVyLCBkb21JRCkge1xuICB2YXIgdHlwZSA9IGV2ZW50LnR5cGUgfHwgJ3Vua25vd24tZXZlbnQnO1xuICBldmVudC5jdXJyZW50VGFyZ2V0ID0gaW5qZWN0aW9uLk1vdW50LmdldE5vZGUoZG9tSUQpO1xuICBpZiAoc2ltdWxhdGVkKSB7XG4gICAgUmVhY3RFcnJvclV0aWxzLmludm9rZUd1YXJkZWRDYWxsYmFja1dpdGhDYXRjaCh0eXBlLCBsaXN0ZW5lciwgZXZlbnQsIGRvbUlEKTtcbiAgfSBlbHNlIHtcbiAgICBSZWFjdEVycm9yVXRpbHMuaW52b2tlR3VhcmRlZENhbGxiYWNrKHR5cGUsIGxpc3RlbmVyLCBldmVudCwgZG9tSUQpO1xuICB9XG4gIGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBudWxsO1xufVxuXG4vKipcbiAqIFN0YW5kYXJkL3NpbXBsZSBpdGVyYXRpb24gdGhyb3VnaCBhbiBldmVudCdzIGNvbGxlY3RlZCBkaXNwYXRjaGVzLlxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXIoZXZlbnQsIHNpbXVsYXRlZCkge1xuICB2YXIgZGlzcGF0Y2hMaXN0ZW5lcnMgPSBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnM7XG4gIHZhciBkaXNwYXRjaElEcyA9IGV2ZW50Ll9kaXNwYXRjaElEcztcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcyhldmVudCk7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcnMpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNwYXRjaExpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLyBMaXN0ZW5lcnMgYW5kIElEcyBhcmUgdHdvIHBhcmFsbGVsIGFycmF5cyB0aGF0IGFyZSBhbHdheXMgaW4gc3luYy5cbiAgICAgIGV4ZWN1dGVEaXNwYXRjaChldmVudCwgc2ltdWxhdGVkLCBkaXNwYXRjaExpc3RlbmVyc1tpXSwgZGlzcGF0Y2hJRHNbaV0pO1xuICAgIH1cbiAgfSBlbHNlIGlmIChkaXNwYXRjaExpc3RlbmVycykge1xuICAgIGV4ZWN1dGVEaXNwYXRjaChldmVudCwgc2ltdWxhdGVkLCBkaXNwYXRjaExpc3RlbmVycywgZGlzcGF0Y2hJRHMpO1xuICB9XG4gIGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycyA9IG51bGw7XG4gIGV2ZW50Ll9kaXNwYXRjaElEcyA9IG51bGw7XG59XG5cbi8qKlxuICogU3RhbmRhcmQvc2ltcGxlIGl0ZXJhdGlvbiB0aHJvdWdoIGFuIGV2ZW50J3MgY29sbGVjdGVkIGRpc3BhdGNoZXMsIGJ1dCBzdG9wc1xuICogYXQgdGhlIGZpcnN0IGRpc3BhdGNoIGV4ZWN1dGlvbiByZXR1cm5pbmcgdHJ1ZSwgYW5kIHJldHVybnMgdGhhdCBpZC5cbiAqXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBpZCBvZiB0aGUgZmlyc3QgZGlzcGF0Y2ggZXhlY3V0aW9uIHdobydzIGxpc3RlbmVyIHJldHVybnNcbiAqIHRydWUsIG9yIG51bGwgaWYgbm8gbGlzdGVuZXIgcmV0dXJuZWQgdHJ1ZS5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZURpc3BhdGNoZXNJbk9yZGVyU3RvcEF0VHJ1ZUltcGwoZXZlbnQpIHtcbiAgdmFyIGRpc3BhdGNoTGlzdGVuZXJzID0gZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzO1xuICB2YXIgZGlzcGF0Y2hJRHMgPSBldmVudC5fZGlzcGF0Y2hJRHM7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFsaWRhdGVFdmVudERpc3BhdGNoZXMoZXZlbnQpO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KGRpc3BhdGNoTGlzdGVuZXJzKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlzcGF0Y2hMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy8gTGlzdGVuZXJzIGFuZCBJRHMgYXJlIHR3byBwYXJhbGxlbCBhcnJheXMgdGhhdCBhcmUgYWx3YXlzIGluIHN5bmMuXG4gICAgICBpZiAoZGlzcGF0Y2hMaXN0ZW5lcnNbaV0oZXZlbnQsIGRpc3BhdGNoSURzW2ldKSkge1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2hJRHNbaV07XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGRpc3BhdGNoTGlzdGVuZXJzKSB7XG4gICAgaWYgKGRpc3BhdGNoTGlzdGVuZXJzKGV2ZW50LCBkaXNwYXRjaElEcykpIHtcbiAgICAgIHJldHVybiBkaXNwYXRjaElEcztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQHNlZSBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlSW1wbFxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlKGV2ZW50KSB7XG4gIHZhciByZXQgPSBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlSW1wbChldmVudCk7XG4gIGV2ZW50Ll9kaXNwYXRjaElEcyA9IG51bGw7XG4gIGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycyA9IG51bGw7XG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogRXhlY3V0aW9uIG9mIGEgXCJkaXJlY3RcIiBkaXNwYXRjaCAtIHRoZXJlIG11c3QgYmUgYXQgbW9zdCBvbmUgZGlzcGF0Y2hcbiAqIGFjY3VtdWxhdGVkIG9uIHRoZSBldmVudCBvciBpdCBpcyBjb25zaWRlcmVkIGFuIGVycm9yLiBJdCBkb2Vzbid0IHJlYWxseSBtYWtlXG4gKiBzZW5zZSBmb3IgYW4gZXZlbnQgd2l0aCBtdWx0aXBsZSBkaXNwYXRjaGVzIChidWJibGVkKSB0byBrZWVwIHRyYWNrIG9mIHRoZVxuICogcmV0dXJuIHZhbHVlcyBhdCBlYWNoIGRpc3BhdGNoIGV4ZWN1dGlvbiwgYnV0IGl0IGRvZXMgdGVuZCB0byBtYWtlIHNlbnNlIHdoZW5cbiAqIGRlYWxpbmcgd2l0aCBcImRpcmVjdFwiIGRpc3BhdGNoZXMuXG4gKlxuICogQHJldHVybiB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBleGVjdXRpbmcgdGhlIHNpbmdsZSBkaXNwYXRjaC5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZURpcmVjdERpc3BhdGNoKGV2ZW50KSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFsaWRhdGVFdmVudERpc3BhdGNoZXMoZXZlbnQpO1xuICB9XG4gIHZhciBkaXNwYXRjaExpc3RlbmVyID0gZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzO1xuICB2YXIgZGlzcGF0Y2hJRCA9IGV2ZW50Ll9kaXNwYXRjaElEcztcbiAgISFBcnJheS5pc0FycmF5KGRpc3BhdGNoTGlzdGVuZXIpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2V4ZWN1dGVEaXJlY3REaXNwYXRjaCguLi4pOiBJbnZhbGlkIGBldmVudGAuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB2YXIgcmVzID0gZGlzcGF0Y2hMaXN0ZW5lciA/IGRpc3BhdGNoTGlzdGVuZXIoZXZlbnQsIGRpc3BhdGNoSUQpIDogbnVsbDtcbiAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gbnVsbDtcbiAgZXZlbnQuX2Rpc3BhdGNoSURzID0gbnVsbDtcbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBldmVudFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZmYgbnVtYmVyIG9mIGRpc3BhdGNoZXMgYWNjdW11bGF0ZWQgaXMgZ3JlYXRlciB0aGFuIDAuXG4gKi9cbmZ1bmN0aW9uIGhhc0Rpc3BhdGNoZXMoZXZlbnQpIHtcbiAgcmV0dXJuICEhZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzO1xufVxuXG4vKipcbiAqIEdlbmVyYWwgdXRpbGl0aWVzIHRoYXQgYXJlIHVzZWZ1bCBpbiBjcmVhdGluZyBjdXN0b20gRXZlbnQgUGx1Z2lucy5cbiAqL1xudmFyIEV2ZW50UGx1Z2luVXRpbHMgPSB7XG4gIGlzRW5kaXNoOiBpc0VuZGlzaCxcbiAgaXNNb3ZlaXNoOiBpc01vdmVpc2gsXG4gIGlzU3RhcnRpc2g6IGlzU3RhcnRpc2gsXG5cbiAgZXhlY3V0ZURpcmVjdERpc3BhdGNoOiBleGVjdXRlRGlyZWN0RGlzcGF0Y2gsXG4gIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlcjogZXhlY3V0ZURpc3BhdGNoZXNJbk9yZGVyLFxuICBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlOiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlLFxuICBoYXNEaXNwYXRjaGVzOiBoYXNEaXNwYXRjaGVzLFxuXG4gIGdldE5vZGU6IGZ1bmN0aW9uIChpZCkge1xuICAgIHJldHVybiBpbmplY3Rpb24uTW91bnQuZ2V0Tm9kZShpZCk7XG4gIH0sXG4gIGdldElEOiBmdW5jdGlvbiAobm9kZSkge1xuICAgIHJldHVybiBpbmplY3Rpb24uTW91bnQuZ2V0SUQobm9kZSk7XG4gIH0sXG5cbiAgaW5qZWN0aW9uOiBpbmplY3Rpb25cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQbHVnaW5VdGlsczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQcm9wYWdhdG9yc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xuXG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIGFjY3VtdWxhdGVJbnRvID0gcmVxdWlyZSgnLi9hY2N1bXVsYXRlSW50bycpO1xudmFyIGZvckVhY2hBY2N1bXVsYXRlZCA9IHJlcXVpcmUoJy4vZm9yRWFjaEFjY3VtdWxhdGVkJyk7XG5cbnZhciBQcm9wYWdhdGlvblBoYXNlcyA9IEV2ZW50Q29uc3RhbnRzLlByb3BhZ2F0aW9uUGhhc2VzO1xudmFyIGdldExpc3RlbmVyID0gRXZlbnRQbHVnaW5IdWIuZ2V0TGlzdGVuZXI7XG5cbi8qKlxuICogU29tZSBldmVudCB0eXBlcyBoYXZlIGEgbm90aW9uIG9mIGRpZmZlcmVudCByZWdpc3RyYXRpb24gbmFtZXMgZm9yIGRpZmZlcmVudFxuICogXCJwaGFzZXNcIiBvZiBwcm9wYWdhdGlvbi4gVGhpcyBmaW5kcyBsaXN0ZW5lcnMgYnkgYSBnaXZlbiBwaGFzZS5cbiAqL1xuZnVuY3Rpb24gbGlzdGVuZXJBdFBoYXNlKGlkLCBldmVudCwgcHJvcGFnYXRpb25QaGFzZSkge1xuICB2YXIgcmVnaXN0cmF0aW9uTmFtZSA9IGV2ZW50LmRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzW3Byb3BhZ2F0aW9uUGhhc2VdO1xuICByZXR1cm4gZ2V0TGlzdGVuZXIoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpO1xufVxuXG4vKipcbiAqIFRhZ3MgYSBgU3ludGhldGljRXZlbnRgIHdpdGggZGlzcGF0Y2hlZCBsaXN0ZW5lcnMuIENyZWF0aW5nIHRoaXMgZnVuY3Rpb25cbiAqIGhlcmUsIGFsbG93cyB1cyB0byBub3QgaGF2ZSB0byBiaW5kIG9yIGNyZWF0ZSBmdW5jdGlvbnMgZm9yIGVhY2ggZXZlbnQuXG4gKiBNdXRhdGluZyB0aGUgZXZlbnQncyBtZW1iZXJzIGFsbG93cyB1cyB0byBub3QgaGF2ZSB0byBjcmVhdGUgYSB3cmFwcGluZ1xuICogXCJkaXNwYXRjaFwiIG9iamVjdCB0aGF0IHBhaXJzIHRoZSBldmVudCB3aXRoIHRoZSBsaXN0ZW5lci5cbiAqL1xuZnVuY3Rpb24gYWNjdW11bGF0ZURpcmVjdGlvbmFsRGlzcGF0Y2hlcyhkb21JRCwgdXB3YXJkcywgZXZlbnQpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhkb21JRCwgJ0Rpc3BhdGNoaW5nIGlkIG11c3Qgbm90IGJlIG51bGwnKSA6IHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgcGhhc2UgPSB1cHdhcmRzID8gUHJvcGFnYXRpb25QaGFzZXMuYnViYmxlZCA6IFByb3BhZ2F0aW9uUGhhc2VzLmNhcHR1cmVkO1xuICB2YXIgbGlzdGVuZXIgPSBsaXN0ZW5lckF0UGhhc2UoZG9tSUQsIGV2ZW50LCBwaGFzZSk7XG4gIGlmIChsaXN0ZW5lcikge1xuICAgIGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycyA9IGFjY3VtdWxhdGVJbnRvKGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycywgbGlzdGVuZXIpO1xuICAgIGV2ZW50Ll9kaXNwYXRjaElEcyA9IGFjY3VtdWxhdGVJbnRvKGV2ZW50Ll9kaXNwYXRjaElEcywgZG9tSUQpO1xuICB9XG59XG5cbi8qKlxuICogQ29sbGVjdCBkaXNwYXRjaGVzIChtdXN0IGJlIGVudGlyZWx5IGNvbGxlY3RlZCBiZWZvcmUgZGlzcGF0Y2hpbmcgLSBzZWUgdW5pdFxuICogdGVzdHMpLiBMYXppbHkgYWxsb2NhdGUgdGhlIGFycmF5IHRvIGNvbnNlcnZlIG1lbW9yeS4gIFdlIG11c3QgbG9vcCB0aHJvdWdoXG4gKiBlYWNoIGV2ZW50IGFuZCBwZXJmb3JtIHRoZSB0cmF2ZXJzYWwgZm9yIGVhY2ggb25lLiBXZSBjYW5ub3QgcGVyZm9ybSBhXG4gKiBzaW5nbGUgdHJhdmVyc2FsIGZvciB0aGUgZW50aXJlIGNvbGxlY3Rpb24gb2YgZXZlbnRzIGJlY2F1c2UgZWFjaCBldmVudCBtYXlcbiAqIGhhdmUgYSBkaWZmZXJlbnQgdGFyZ2V0LlxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlKGV2ZW50KSB7XG4gIGlmIChldmVudCAmJiBldmVudC5kaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgIEV2ZW50UGx1Z2luSHViLmluamVjdGlvbi5nZXRJbnN0YW5jZUhhbmRsZSgpLnRyYXZlcnNlVHdvUGhhc2UoZXZlbnQuZGlzcGF0Y2hNYXJrZXIsIGFjY3VtdWxhdGVEaXJlY3Rpb25hbERpc3BhdGNoZXMsIGV2ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIFNhbWUgYXMgYGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGVgLCBidXQgc2tpcHMgb3ZlciB0aGUgdGFyZ2V0SUQuXG4gKi9cbmZ1bmN0aW9uIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGVTa2lwVGFyZ2V0KGV2ZW50KSB7XG4gIGlmIChldmVudCAmJiBldmVudC5kaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgIEV2ZW50UGx1Z2luSHViLmluamVjdGlvbi5nZXRJbnN0YW5jZUhhbmRsZSgpLnRyYXZlcnNlVHdvUGhhc2VTa2lwVGFyZ2V0KGV2ZW50LmRpc3BhdGNoTWFya2VyLCBhY2N1bXVsYXRlRGlyZWN0aW9uYWxEaXNwYXRjaGVzLCBldmVudCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBY2N1bXVsYXRlcyB3aXRob3V0IHJlZ2FyZCB0byBkaXJlY3Rpb24sIGRvZXMgbm90IGxvb2sgZm9yIHBoYXNlZFxuICogcmVnaXN0cmF0aW9uIG5hbWVzLiBTYW1lIGFzIGBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlc1NpbmdsZWAgYnV0IHdpdGhvdXRcbiAqIHJlcXVpcmluZyB0aGF0IHRoZSBgZGlzcGF0Y2hNYXJrZXJgIGJlIHRoZSBzYW1lIGFzIHRoZSBkaXNwYXRjaGVkIElELlxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlRGlzcGF0Y2hlcyhpZCwgaWdub3JlZERpcmVjdGlvbiwgZXZlbnQpIHtcbiAgaWYgKGV2ZW50ICYmIGV2ZW50LmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICB2YXIgcmVnaXN0cmF0aW9uTmFtZSA9IGV2ZW50LmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWU7XG4gICAgdmFyIGxpc3RlbmVyID0gZ2V0TGlzdGVuZXIoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpO1xuICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gYWNjdW11bGF0ZUludG8oZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzLCBsaXN0ZW5lcik7XG4gICAgICBldmVudC5fZGlzcGF0Y2hJRHMgPSBhY2N1bXVsYXRlSW50byhldmVudC5fZGlzcGF0Y2hJRHMsIGlkKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBY2N1bXVsYXRlcyBkaXNwYXRjaGVzIG9uIGFuIGBTeW50aGV0aWNFdmVudGAsIGJ1dCBvbmx5IGZvciB0aGVcbiAqIGBkaXNwYXRjaE1hcmtlcmAuXG4gKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBldmVudFxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlc1NpbmdsZShldmVudCkge1xuICBpZiAoZXZlbnQgJiYgZXZlbnQuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIGFjY3VtdWxhdGVEaXNwYXRjaGVzKGV2ZW50LmRpc3BhdGNoTWFya2VyLCBudWxsLCBldmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudHMpIHtcbiAgZm9yRWFjaEFjY3VtdWxhdGVkKGV2ZW50cywgYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NpbmdsZSk7XG59XG5cbmZ1bmN0aW9uIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTa2lwVGFyZ2V0KGV2ZW50cykge1xuICBmb3JFYWNoQWNjdW11bGF0ZWQoZXZlbnRzLCBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlU2tpcFRhcmdldCk7XG59XG5cbmZ1bmN0aW9uIGFjY3VtdWxhdGVFbnRlckxlYXZlRGlzcGF0Y2hlcyhsZWF2ZSwgZW50ZXIsIGZyb21JRCwgdG9JRCkge1xuICBFdmVudFBsdWdpbkh1Yi5pbmplY3Rpb24uZ2V0SW5zdGFuY2VIYW5kbGUoKS50cmF2ZXJzZUVudGVyTGVhdmUoZnJvbUlELCB0b0lELCBhY2N1bXVsYXRlRGlzcGF0Y2hlcywgbGVhdmUsIGVudGVyKTtcbn1cblxuZnVuY3Rpb24gYWNjdW11bGF0ZURpcmVjdERpc3BhdGNoZXMoZXZlbnRzKSB7XG4gIGZvckVhY2hBY2N1bXVsYXRlZChldmVudHMsIGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzU2luZ2xlKTtcbn1cblxuLyoqXG4gKiBBIHNtYWxsIHNldCBvZiBwcm9wYWdhdGlvbiBwYXR0ZXJucywgZWFjaCBvZiB3aGljaCB3aWxsIGFjY2VwdCBhIHNtYWxsIGFtb3VudFxuICogb2YgaW5mb3JtYXRpb24sIGFuZCBnZW5lcmF0ZSBhIHNldCBvZiBcImRpc3BhdGNoIHJlYWR5IGV2ZW50IG9iamVjdHNcIiAtIHdoaWNoXG4gKiBhcmUgc2V0cyBvZiBldmVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBhbm5vdGF0ZWQgd2l0aCBhIHNldCBvZiBkaXNwYXRjaGVkXG4gKiBsaXN0ZW5lciBmdW5jdGlvbnMvaWRzLiBUaGUgQVBJIGlzIGRlc2lnbmVkIHRoaXMgd2F5IHRvIGRpc2NvdXJhZ2UgdGhlc2VcbiAqIHByb3BhZ2F0aW9uIHN0cmF0ZWdpZXMgZnJvbSBhY3R1YWxseSBleGVjdXRpbmcgdGhlIGRpc3BhdGNoZXMsIHNpbmNlIHdlXG4gKiBhbHdheXMgd2FudCB0byBjb2xsZWN0IHRoZSBlbnRpcmUgc2V0IG9mIGRpc3BhdGNoZXMgYmVmb3JlIGV4ZWN1dGluZyBldmVudCBhXG4gKiBzaW5nbGUgb25lLlxuICpcbiAqIEBjb25zdHJ1Y3RvciBFdmVudFByb3BhZ2F0b3JzXG4gKi9cbnZhciBFdmVudFByb3BhZ2F0b3JzID0ge1xuICBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzOiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzLFxuICBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2tpcFRhcmdldDogYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NraXBUYXJnZXQsXG4gIGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzOiBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlcyxcbiAgYWNjdW11bGF0ZUVudGVyTGVhdmVEaXNwYXRjaGVzOiBhY2N1bXVsYXRlRW50ZXJMZWF2ZURpc3BhdGNoZXNcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQcm9wYWdhdG9yczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZ2V0VGV4dENvbnRlbnRBY2Nlc3NvciA9IHJlcXVpcmUoJy4vZ2V0VGV4dENvbnRlbnRBY2Nlc3NvcicpO1xuXG4vKipcbiAqIFRoaXMgaGVscGVyIGNsYXNzIHN0b3JlcyBpbmZvcm1hdGlvbiBhYm91dCB0ZXh0IGNvbnRlbnQgb2YgYSB0YXJnZXQgbm9kZSxcbiAqIGFsbG93aW5nIGNvbXBhcmlzb24gb2YgY29udGVudCBiZWZvcmUgYW5kIGFmdGVyIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogSWRlbnRpZnkgdGhlIG5vZGUgd2hlcmUgc2VsZWN0aW9uIGN1cnJlbnRseSBiZWdpbnMsIHRoZW4gb2JzZXJ2ZVxuICogYm90aCBpdHMgdGV4dCBjb250ZW50IGFuZCBpdHMgY3VycmVudCBwb3NpdGlvbiBpbiB0aGUgRE9NLiBTaW5jZSB0aGVcbiAqIGJyb3dzZXIgbWF5IG5hdGl2ZWx5IHJlcGxhY2UgdGhlIHRhcmdldCBub2RlIGR1cmluZyBjb21wb3NpdGlvbiwgd2UgY2FuXG4gKiB1c2UgaXRzIHBvc2l0aW9uIHRvIGZpbmQgaXRzIHJlcGxhY2VtZW50LlxuICpcbiAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHJvb3RcbiAqL1xuZnVuY3Rpb24gRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlKHJvb3QpIHtcbiAgdGhpcy5fcm9vdCA9IHJvb3Q7XG4gIHRoaXMuX3N0YXJ0VGV4dCA9IHRoaXMuZ2V0VGV4dCgpO1xuICB0aGlzLl9mYWxsYmFja1RleHQgPSBudWxsO1xufVxuXG5hc3NpZ24oRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlLnByb3RvdHlwZSwge1xuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcm9vdCA9IG51bGw7XG4gICAgdGhpcy5fc3RhcnRUZXh0ID0gbnVsbDtcbiAgICB0aGlzLl9mYWxsYmFja1RleHQgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCB0ZXh0IG9mIGlucHV0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXRUZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCd2YWx1ZScgaW4gdGhpcy5fcm9vdCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Jvb3QudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9yb290W2dldFRleHRDb250ZW50QWNjZXNzb3IoKV07XG4gIH0sXG5cbiAgLyoqXG4gICAqIERldGVybWluZSB0aGUgZGlmZmVyaW5nIHN1YnN0cmluZyBiZXR3ZWVuIHRoZSBpbml0aWFsbHkgc3RvcmVkXG4gICAqIHRleHQgY29udGVudCBhbmQgdGhlIGN1cnJlbnQgY29udGVudC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0RGF0YTogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9mYWxsYmFja1RleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9mYWxsYmFja1RleHQ7XG4gICAgfVxuXG4gICAgdmFyIHN0YXJ0O1xuICAgIHZhciBzdGFydFZhbHVlID0gdGhpcy5fc3RhcnRUZXh0O1xuICAgIHZhciBzdGFydExlbmd0aCA9IHN0YXJ0VmFsdWUubGVuZ3RoO1xuICAgIHZhciBlbmQ7XG4gICAgdmFyIGVuZFZhbHVlID0gdGhpcy5nZXRUZXh0KCk7XG4gICAgdmFyIGVuZExlbmd0aCA9IGVuZFZhbHVlLmxlbmd0aDtcblxuICAgIGZvciAoc3RhcnQgPSAwOyBzdGFydCA8IHN0YXJ0TGVuZ3RoOyBzdGFydCsrKSB7XG4gICAgICBpZiAoc3RhcnRWYWx1ZVtzdGFydF0gIT09IGVuZFZhbHVlW3N0YXJ0XSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbWluRW5kID0gc3RhcnRMZW5ndGggLSBzdGFydDtcbiAgICBmb3IgKGVuZCA9IDE7IGVuZCA8PSBtaW5FbmQ7IGVuZCsrKSB7XG4gICAgICBpZiAoc3RhcnRWYWx1ZVtzdGFydExlbmd0aCAtIGVuZF0gIT09IGVuZFZhbHVlW2VuZExlbmd0aCAtIGVuZF0pIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNsaWNlVGFpbCA9IGVuZCA+IDEgPyAxIC0gZW5kIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuX2ZhbGxiYWNrVGV4dCA9IGVuZFZhbHVlLnNsaWNlKHN0YXJ0LCBzbGljZVRhaWwpO1xuICAgIHJldHVybiB0aGlzLl9mYWxsYmFja1RleHQ7XG4gIH1cbn0pO1xuXG5Qb29sZWRDbGFzcy5hZGRQb29saW5nVG8oRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEhUTUxET01Qcm9wZXJ0eUNvbmZpZ1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTVByb3BlcnR5ID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eScpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIE1VU1RfVVNFX0FUVFJJQlVURSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5NVVNUX1VTRV9BVFRSSUJVVEU7XG52YXIgTVVTVF9VU0VfUFJPUEVSVFkgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uTVVTVF9VU0VfUFJPUEVSVFk7XG52YXIgSEFTX0JPT0xFQU5fVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX0JPT0xFQU5fVkFMVUU7XG52YXIgSEFTX1NJREVfRUZGRUNUUyA9IERPTVByb3BlcnR5LmluamVjdGlvbi5IQVNfU0lERV9FRkZFQ1RTO1xudmFyIEhBU19OVU1FUklDX1ZBTFVFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLkhBU19OVU1FUklDX1ZBTFVFO1xudmFyIEhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLkhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFO1xudmFyIEhBU19PVkVSTE9BREVEX0JPT0xFQU5fVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRTtcblxudmFyIGhhc1NWRztcbmlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcbiAgdmFyIGltcGxlbWVudGF0aW9uID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb247XG4gIGhhc1NWRyA9IGltcGxlbWVudGF0aW9uICYmIGltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUgJiYgaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgnaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNCYXNpY1N0cnVjdHVyZScsICcxLjEnKTtcbn1cblxudmFyIEhUTUxET01Qcm9wZXJ0eUNvbmZpZyA9IHtcbiAgaXNDdXN0b21BdHRyaWJ1dGU6IFJlZ0V4cC5wcm90b3R5cGUudGVzdC5iaW5kKC9eKGRhdGF8YXJpYSktW2Etel9dW2EtelxcZF8uXFwtXSokLyksXG4gIFByb3BlcnRpZXM6IHtcbiAgICAvKipcbiAgICAgKiBTdGFuZGFyZCBQcm9wZXJ0aWVzXG4gICAgICovXG4gICAgYWNjZXB0OiBudWxsLFxuICAgIGFjY2VwdENoYXJzZXQ6IG51bGwsXG4gICAgYWNjZXNzS2V5OiBudWxsLFxuICAgIGFjdGlvbjogbnVsbCxcbiAgICBhbGxvd0Z1bGxTY3JlZW46IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGFsbG93VHJhbnNwYXJlbmN5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgYWx0OiBudWxsLFxuICAgIGFzeW5jOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBhdXRvQ29tcGxldGU6IG51bGwsXG4gICAgLy8gYXV0b0ZvY3VzIGlzIHBvbHlmaWxsZWQvbm9ybWFsaXplZCBieSBBdXRvRm9jdXNVdGlsc1xuICAgIC8vIGF1dG9Gb2N1czogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgYXV0b1BsYXk6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNhcHR1cmU6IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNlbGxQYWRkaW5nOiBudWxsLFxuICAgIGNlbGxTcGFjaW5nOiBudWxsLFxuICAgIGNoYXJTZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBjaGFsbGVuZ2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBjaGVja2VkOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNsYXNzSUQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAvLyBUbyBzZXQgY2xhc3NOYW1lIG9uIFNWRyBlbGVtZW50cywgaXQncyBuZWNlc3NhcnkgdG8gdXNlIC5zZXRBdHRyaWJ1dGU7XG4gICAgLy8gdGhpcyB3b3JrcyBvbiBIVE1MIGVsZW1lbnRzIHRvbyBpbiBhbGwgYnJvd3NlcnMgZXhjZXB0IElFOC4gQ29udmVuaWVudGx5LFxuICAgIC8vIElFOCBkb2Vzbid0IHN1cHBvcnQgU1ZHIGFuZCBzbyB3ZSBjYW4gc2ltcGx5IHVzZSB0aGUgYXR0cmlidXRlIGluXG4gICAgLy8gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IFNWRyBhbmQgdGhlIHByb3BlcnR5IGluIGJyb3dzZXJzIHRoYXQgZG9uJ3QsXG4gICAgLy8gcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIEhUTUwgb3IgU1ZHLlxuICAgIGNsYXNzTmFtZTogaGFzU1ZHID8gTVVTVF9VU0VfQVRUUklCVVRFIDogTVVTVF9VU0VfUFJPUEVSVFksXG4gICAgY29sczogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUsXG4gICAgY29sU3BhbjogbnVsbCxcbiAgICBjb250ZW50OiBudWxsLFxuICAgIGNvbnRlbnRFZGl0YWJsZTogbnVsbCxcbiAgICBjb250ZXh0TWVudTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGNvbnRyb2xzOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNvb3JkczogbnVsbCxcbiAgICBjcm9zc09yaWdpbjogbnVsbCxcbiAgICBkYXRhOiBudWxsLCAvLyBGb3IgYDxvYmplY3QgLz5gIGFjdHMgYXMgYHNyY2AuXG4gICAgZGF0ZVRpbWU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAnZGVmYXVsdCc6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGRlZmVyOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBkaXI6IG51bGwsXG4gICAgZGlzYWJsZWQ6IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGRvd25sb2FkOiBIQVNfT1ZFUkxPQURFRF9CT09MRUFOX1ZBTFVFLFxuICAgIGRyYWdnYWJsZTogbnVsbCxcbiAgICBlbmNUeXBlOiBudWxsLFxuICAgIGZvcm06IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb3JtQWN0aW9uOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZm9ybUVuY1R5cGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb3JtTWV0aG9kOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZm9ybU5vVmFsaWRhdGU6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGZvcm1UYXJnZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmcmFtZUJvcmRlcjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGhlYWRlcnM6IG51bGwsXG4gICAgaGVpZ2h0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaGlkZGVuOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBoaWdoOiBudWxsLFxuICAgIGhyZWY6IG51bGwsXG4gICAgaHJlZkxhbmc6IG51bGwsXG4gICAgaHRtbEZvcjogbnVsbCxcbiAgICBodHRwRXF1aXY6IG51bGwsXG4gICAgaWNvbjogbnVsbCxcbiAgICBpZDogTVVTVF9VU0VfUFJPUEVSVFksXG4gICAgaW5wdXRNb2RlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaW50ZWdyaXR5OiBudWxsLFxuICAgIGlzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAga2V5UGFyYW1zOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAga2V5VHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGtpbmQ6IG51bGwsXG4gICAgbGFiZWw6IG51bGwsXG4gICAgbGFuZzogbnVsbCxcbiAgICBsaXN0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbG9vcDogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBsb3c6IG51bGwsXG4gICAgbWFuaWZlc3Q6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtYXJnaW5IZWlnaHQ6IG51bGwsXG4gICAgbWFyZ2luV2lkdGg6IG51bGwsXG4gICAgbWF4OiBudWxsLFxuICAgIG1heExlbmd0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG1lZGlhOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWVkaWFHcm91cDogbnVsbCxcbiAgICBtZXRob2Q6IG51bGwsXG4gICAgbWluOiBudWxsLFxuICAgIG1pbkxlbmd0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG11bHRpcGxlOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIG11dGVkOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIG5hbWU6IG51bGwsXG4gICAgbm9uY2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBub1ZhbGlkYXRlOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBvcGVuOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBvcHRpbXVtOiBudWxsLFxuICAgIHBhdHRlcm46IG51bGwsXG4gICAgcGxhY2Vob2xkZXI6IG51bGwsXG4gICAgcG9zdGVyOiBudWxsLFxuICAgIHByZWxvYWQ6IG51bGwsXG4gICAgcmFkaW9Hcm91cDogbnVsbCxcbiAgICByZWFkT25seTogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICByZWw6IG51bGwsXG4gICAgcmVxdWlyZWQ6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIHJldmVyc2VkOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICByb2xlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcm93czogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUsXG4gICAgcm93U3BhbjogbnVsbCxcbiAgICBzYW5kYm94OiBudWxsLFxuICAgIHNjb3BlOiBudWxsLFxuICAgIHNjb3BlZDogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgc2Nyb2xsaW5nOiBudWxsLFxuICAgIHNlYW1sZXNzOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBzZWxlY3RlZDogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBzaGFwZTogbnVsbCxcbiAgICBzaXplOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSxcbiAgICBzaXplczogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHNwYW46IEhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFLFxuICAgIHNwZWxsQ2hlY2s6IG51bGwsXG4gICAgc3JjOiBudWxsLFxuICAgIHNyY0RvYzogTVVTVF9VU0VfUFJPUEVSVFksXG4gICAgc3JjTGFuZzogbnVsbCxcbiAgICBzcmNTZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdGFydDogSEFTX05VTUVSSUNfVkFMVUUsXG4gICAgc3RlcDogbnVsbCxcbiAgICBzdHlsZTogbnVsbCxcbiAgICBzdW1tYXJ5OiBudWxsLFxuICAgIHRhYkluZGV4OiBudWxsLFxuICAgIHRhcmdldDogbnVsbCxcbiAgICB0aXRsZTogbnVsbCxcbiAgICB0eXBlOiBudWxsLFxuICAgIHVzZU1hcDogbnVsbCxcbiAgICB2YWx1ZTogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfU0lERV9FRkZFQ1RTLFxuICAgIHdpZHRoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgd21vZGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB3cmFwOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogUkRGYSBQcm9wZXJ0aWVzXG4gICAgICovXG4gICAgYWJvdXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBkYXRhdHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGlubGlzdDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHByZWZpeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIHByb3BlcnR5IGlzIGFsc28gc3VwcG9ydGVkIGZvciBPcGVuR3JhcGggaW4gbWV0YSB0YWdzLlxuICAgIHByb3BlcnR5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcmVzb3VyY2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAndHlwZW9mJzogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHZvY2FiOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cbiAgICAvKipcbiAgICAgKiBOb24tc3RhbmRhcmQgUHJvcGVydGllc1xuICAgICAqL1xuICAgIC8vIGF1dG9DYXBpdGFsaXplIGFuZCBhdXRvQ29ycmVjdCBhcmUgc3VwcG9ydGVkIGluIE1vYmlsZSBTYWZhcmkgZm9yXG4gICAgLy8ga2V5Ym9hcmQgaGludHMuXG4gICAgYXV0b0NhcGl0YWxpemU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBhdXRvQ29ycmVjdDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIGF1dG9TYXZlIGFsbG93cyBXZWJLaXQvQmxpbmsgdG8gcGVyc2lzdCB2YWx1ZXMgb2YgaW5wdXQgZmllbGRzIG9uIHBhZ2UgcmVsb2Fkc1xuICAgIGF1dG9TYXZlOiBudWxsLFxuICAgIC8vIGNvbG9yIGlzIGZvciBTYWZhcmkgbWFzay1pY29uIGxpbmtcbiAgICBjb2xvcjogbnVsbCxcbiAgICAvLyBpdGVtUHJvcCwgaXRlbVNjb3BlLCBpdGVtVHlwZSBhcmUgZm9yXG4gICAgLy8gTWljcm9kYXRhIHN1cHBvcnQuIFNlZSBodHRwOi8vc2NoZW1hLm9yZy9kb2NzL2dzLmh0bWxcbiAgICBpdGVtUHJvcDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGl0ZW1TY29wZTogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgaXRlbVR5cGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAvLyBpdGVtSUQgYW5kIGl0ZW1SZWYgYXJlIGZvciBNaWNyb2RhdGEgc3VwcG9ydCBhcyB3ZWxsIGJ1dFxuICAgIC8vIG9ubHkgc3BlY2lmaWVkIGluIHRoZSB0aGUgV0hBVFdHIHNwZWMgZG9jdW1lbnQuIFNlZVxuICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL21pY3JvZGF0YS5odG1sI21pY3JvZGF0YS1kb20tYXBpXG4gICAgaXRlbUlEOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaXRlbVJlZjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIHJlc3VsdHMgc2hvdyBsb29raW5nIGdsYXNzIGljb24gYW5kIHJlY2VudCBzZWFyY2hlcyBvbiBpbnB1dFxuICAgIC8vIHNlYXJjaCBmaWVsZHMgaW4gV2ViS2l0L0JsaW5rXG4gICAgcmVzdWx0czogbnVsbCxcbiAgICAvLyBJRS1vbmx5IGF0dHJpYnV0ZSB0aGF0IHNwZWNpZmllcyBzZWN1cml0eSByZXN0cmljdGlvbnMgb24gYW4gaWZyYW1lXG4gICAgLy8gYXMgYW4gYWx0ZXJuYXRpdmUgdG8gdGhlIHNhbmRib3ggYXR0cmlidXRlIG9uIElFPDEwXG4gICAgc2VjdXJpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAvLyBJRS1vbmx5IGF0dHJpYnV0ZSB0aGF0IGNvbnRyb2xzIGZvY3VzIGJlaGF2aW9yXG4gICAgdW5zZWxlY3RhYmxlOiBNVVNUX1VTRV9BVFRSSUJVVEVcbiAgfSxcbiAgRE9NQXR0cmlidXRlTmFtZXM6IHtcbiAgICBhY2NlcHRDaGFyc2V0OiAnYWNjZXB0LWNoYXJzZXQnLFxuICAgIGNsYXNzTmFtZTogJ2NsYXNzJyxcbiAgICBodG1sRm9yOiAnZm9yJyxcbiAgICBodHRwRXF1aXY6ICdodHRwLWVxdWl2J1xuICB9LFxuICBET01Qcm9wZXJ0eU5hbWVzOiB7XG4gICAgYXV0b0NvbXBsZXRlOiAnYXV0b2NvbXBsZXRlJyxcbiAgICBhdXRvRm9jdXM6ICdhdXRvZm9jdXMnLFxuICAgIGF1dG9QbGF5OiAnYXV0b3BsYXknLFxuICAgIGF1dG9TYXZlOiAnYXV0b3NhdmUnLFxuICAgIC8vIGBlbmNvZGluZ2AgaXMgZXF1aXZhbGVudCB0byBgZW5jdHlwZWAsIElFOCBsYWNrcyBhbiBgZW5jdHlwZWAgc2V0dGVyLlxuICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L2Zvcm1zLmh0bWwjZG9tLWZzLWVuY29kaW5nXG4gICAgZW5jVHlwZTogJ2VuY29kaW5nJyxcbiAgICBocmVmTGFuZzogJ2hyZWZsYW5nJyxcbiAgICByYWRpb0dyb3VwOiAncmFkaW9ncm91cCcsXG4gICAgc3BlbGxDaGVjazogJ3NwZWxsY2hlY2snLFxuICAgIHNyY0RvYzogJ3NyY2RvYycsXG4gICAgc3JjU2V0OiAnc3Jjc2V0J1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEhUTUxET01Qcm9wZXJ0eUNvbmZpZzsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgTGlua2VkVmFsdWVVdGlsc1xuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFByb3BUeXBlcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZXMnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25zID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25zJyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgaGFzUmVhZE9ubHlWYWx1ZSA9IHtcbiAgJ2J1dHRvbic6IHRydWUsXG4gICdjaGVja2JveCc6IHRydWUsXG4gICdpbWFnZSc6IHRydWUsXG4gICdoaWRkZW4nOiB0cnVlLFxuICAncmFkaW8nOiB0cnVlLFxuICAncmVzZXQnOiB0cnVlLFxuICAnc3VibWl0JzogdHJ1ZVxufTtcblxuZnVuY3Rpb24gX2Fzc2VydFNpbmdsZUxpbmsoaW5wdXRQcm9wcykge1xuICAhKGlucHV0UHJvcHMuY2hlY2tlZExpbmsgPT0gbnVsbCB8fCBpbnB1dFByb3BzLnZhbHVlTGluayA9PSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDYW5ub3QgcHJvdmlkZSBhIGNoZWNrZWRMaW5rIGFuZCBhIHZhbHVlTGluay4gSWYgeW91IHdhbnQgdG8gdXNlICcgKyAnY2hlY2tlZExpbmssIHlvdSBwcm9iYWJseSBkb25cXCd0IHdhbnQgdG8gdXNlIHZhbHVlTGluayBhbmQgdmljZSB2ZXJzYS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfYXNzZXJ0VmFsdWVMaW5rKGlucHV0UHJvcHMpIHtcbiAgX2Fzc2VydFNpbmdsZUxpbmsoaW5wdXRQcm9wcyk7XG4gICEoaW5wdXRQcm9wcy52YWx1ZSA9PSBudWxsICYmIGlucHV0UHJvcHMub25DaGFuZ2UgPT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnQ2Fubm90IHByb3ZpZGUgYSB2YWx1ZUxpbmsgYW5kIGEgdmFsdWUgb3Igb25DaGFuZ2UgZXZlbnQuIElmIHlvdSB3YW50ICcgKyAndG8gdXNlIHZhbHVlIG9yIG9uQ2hhbmdlLCB5b3UgcHJvYmFibHkgZG9uXFwndCB3YW50IHRvIHVzZSB2YWx1ZUxpbmsuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBfYXNzZXJ0Q2hlY2tlZExpbmsoaW5wdXRQcm9wcykge1xuICBfYXNzZXJ0U2luZ2xlTGluayhpbnB1dFByb3BzKTtcbiAgIShpbnB1dFByb3BzLmNoZWNrZWQgPT0gbnVsbCAmJiBpbnB1dFByb3BzLm9uQ2hhbmdlID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Nhbm5vdCBwcm92aWRlIGEgY2hlY2tlZExpbmsgYW5kIGEgY2hlY2tlZCBwcm9wZXJ0eSBvciBvbkNoYW5nZSBldmVudC4gJyArICdJZiB5b3Ugd2FudCB0byB1c2UgY2hlY2tlZCBvciBvbkNoYW5nZSwgeW91IHByb2JhYmx5IGRvblxcJ3Qgd2FudCB0byAnICsgJ3VzZSBjaGVja2VkTGluaycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbn1cblxudmFyIHByb3BUeXBlcyA9IHtcbiAgdmFsdWU6IGZ1bmN0aW9uIChwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUpIHtcbiAgICBpZiAoIXByb3BzW3Byb3BOYW1lXSB8fCBoYXNSZWFkT25seVZhbHVlW3Byb3BzLnR5cGVdIHx8IHByb3BzLm9uQ2hhbmdlIHx8IHByb3BzLnJlYWRPbmx5IHx8IHByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBFcnJvcignWW91IHByb3ZpZGVkIGEgYHZhbHVlYCBwcm9wIHRvIGEgZm9ybSBmaWVsZCB3aXRob3V0IGFuICcgKyAnYG9uQ2hhbmdlYCBoYW5kbGVyLiBUaGlzIHdpbGwgcmVuZGVyIGEgcmVhZC1vbmx5IGZpZWxkLiBJZiAnICsgJ3RoZSBmaWVsZCBzaG91bGQgYmUgbXV0YWJsZSB1c2UgYGRlZmF1bHRWYWx1ZWAuIE90aGVyd2lzZSwgJyArICdzZXQgZWl0aGVyIGBvbkNoYW5nZWAgb3IgYHJlYWRPbmx5YC4nKTtcbiAgfSxcbiAgY2hlY2tlZDogZnVuY3Rpb24gKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSkge1xuICAgIGlmICghcHJvcHNbcHJvcE5hbWVdIHx8IHByb3BzLm9uQ2hhbmdlIHx8IHByb3BzLnJlYWRPbmx5IHx8IHByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBFcnJvcignWW91IHByb3ZpZGVkIGEgYGNoZWNrZWRgIHByb3AgdG8gYSBmb3JtIGZpZWxkIHdpdGhvdXQgYW4gJyArICdgb25DaGFuZ2VgIGhhbmRsZXIuIFRoaXMgd2lsbCByZW5kZXIgYSByZWFkLW9ubHkgZmllbGQuIElmICcgKyAndGhlIGZpZWxkIHNob3VsZCBiZSBtdXRhYmxlIHVzZSBgZGVmYXVsdENoZWNrZWRgLiBPdGhlcndpc2UsICcgKyAnc2V0IGVpdGhlciBgb25DaGFuZ2VgIG9yIGByZWFkT25seWAuJyk7XG4gIH0sXG4gIG9uQ2hhbmdlOiBSZWFjdFByb3BUeXBlcy5mdW5jXG59O1xuXG52YXIgbG9nZ2VkVHlwZUZhaWx1cmVzID0ge307XG5mdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpIHtcbiAgaWYgKG93bmVyKSB7XG4gICAgdmFyIG5hbWUgPSBvd25lci5nZXROYW1lKCk7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIHJldHVybiAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mIGAnICsgbmFtZSArICdgLic7XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBQcm92aWRlIGEgbGlua2VkIGB2YWx1ZWAgYXR0cmlidXRlIGZvciBjb250cm9sbGVkIGZvcm1zLiBZb3Ugc2hvdWxkIG5vdCB1c2VcbiAqIHRoaXMgb3V0c2lkZSBvZiB0aGUgUmVhY3RET00gY29udHJvbGxlZCBmb3JtIGNvbXBvbmVudHMuXG4gKi9cbnZhciBMaW5rZWRWYWx1ZVV0aWxzID0ge1xuICBjaGVja1Byb3BUeXBlczogZnVuY3Rpb24gKHRhZ05hbWUsIHByb3BzLCBvd25lcikge1xuICAgIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BUeXBlcykge1xuICAgICAgaWYgKHByb3BUeXBlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgdmFyIGVycm9yID0gcHJvcFR5cGVzW3Byb3BOYW1lXShwcm9wcywgcHJvcE5hbWUsIHRhZ05hbWUsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCwgbnVsbCwgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG4gICAgICB9XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAhKGVycm9yLm1lc3NhZ2UgaW4gbG9nZ2VkVHlwZUZhaWx1cmVzKSkge1xuICAgICAgICAvLyBPbmx5IG1vbml0b3IgdGhpcyBmYWlsdXJlIG9uY2UgYmVjYXVzZSB0aGVyZSB0ZW5kcyB0byBiZSBhIGxvdCBvZiB0aGVcbiAgICAgICAgLy8gc2FtZSBlcnJvci5cbiAgICAgICAgbG9nZ2VkVHlwZUZhaWx1cmVzW2Vycm9yLm1lc3NhZ2VdID0gdHJ1ZTtcblxuICAgICAgICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpO1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ0ZhaWxlZCBmb3JtIHByb3BUeXBlOiAlcyVzJywgZXJyb3IubWVzc2FnZSwgYWRkZW5kdW0pIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IGlucHV0UHJvcHMgUHJvcHMgZm9yIGZvcm0gY29tcG9uZW50XG4gICAqIEByZXR1cm4geyp9IGN1cnJlbnQgdmFsdWUgb2YgdGhlIGlucHV0IGVpdGhlciBmcm9tIHZhbHVlIHByb3Agb3IgbGluay5cbiAgICovXG4gIGdldFZhbHVlOiBmdW5jdGlvbiAoaW5wdXRQcm9wcykge1xuICAgIGlmIChpbnB1dFByb3BzLnZhbHVlTGluaykge1xuICAgICAgX2Fzc2VydFZhbHVlTGluayhpbnB1dFByb3BzKTtcbiAgICAgIHJldHVybiBpbnB1dFByb3BzLnZhbHVlTGluay52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGlucHV0UHJvcHMudmFsdWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dFByb3BzIFByb3BzIGZvciBmb3JtIGNvbXBvbmVudFxuICAgKiBAcmV0dXJuIHsqfSBjdXJyZW50IGNoZWNrZWQgc3RhdHVzIG9mIHRoZSBpbnB1dCBlaXRoZXIgZnJvbSBjaGVja2VkIHByb3BcbiAgICogICAgICAgICAgICAgb3IgbGluay5cbiAgICovXG4gIGdldENoZWNrZWQ6IGZ1bmN0aW9uIChpbnB1dFByb3BzKSB7XG4gICAgaWYgKGlucHV0UHJvcHMuY2hlY2tlZExpbmspIHtcbiAgICAgIF9hc3NlcnRDaGVja2VkTGluayhpbnB1dFByb3BzKTtcbiAgICAgIHJldHVybiBpbnB1dFByb3BzLmNoZWNrZWRMaW5rLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXRQcm9wcy5jaGVja2VkO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaW5wdXRQcm9wcyBQcm9wcyBmb3IgZm9ybSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtTeW50aGV0aWNFdmVudH0gZXZlbnQgY2hhbmdlIGV2ZW50IHRvIGhhbmRsZVxuICAgKi9cbiAgZXhlY3V0ZU9uQ2hhbmdlOiBmdW5jdGlvbiAoaW5wdXRQcm9wcywgZXZlbnQpIHtcbiAgICBpZiAoaW5wdXRQcm9wcy52YWx1ZUxpbmspIHtcbiAgICAgIF9hc3NlcnRWYWx1ZUxpbmsoaW5wdXRQcm9wcyk7XG4gICAgICByZXR1cm4gaW5wdXRQcm9wcy52YWx1ZUxpbmsucmVxdWVzdENoYW5nZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoaW5wdXRQcm9wcy5jaGVja2VkTGluaykge1xuICAgICAgX2Fzc2VydENoZWNrZWRMaW5rKGlucHV0UHJvcHMpO1xuICAgICAgcmV0dXJuIGlucHV0UHJvcHMuY2hlY2tlZExpbmsucmVxdWVzdENoYW5nZShldmVudC50YXJnZXQuY2hlY2tlZCk7XG4gICAgfSBlbHNlIGlmIChpbnB1dFByb3BzLm9uQ2hhbmdlKSB7XG4gICAgICByZXR1cm4gaW5wdXRQcm9wcy5vbkNoYW5nZS5jYWxsKHVuZGVmaW5lZCwgZXZlbnQpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBMaW5rZWRWYWx1ZVV0aWxzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBPYmplY3QuYXNzaWduXG4gKi9cblxuLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5hc3NpZ25cblxuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2VzKSB7XG4gIGlmICh0YXJnZXQgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5hc3NpZ24gdGFyZ2V0IGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCcpO1xuICB9XG5cbiAgdmFyIHRvID0gT2JqZWN0KHRhcmdldCk7XG4gIHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbiAgZm9yICh2YXIgbmV4dEluZGV4ID0gMTsgbmV4dEluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgbmV4dEluZGV4KyspIHtcbiAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tuZXh0SW5kZXhdO1xuICAgIGlmIChuZXh0U291cmNlID09IG51bGwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBmcm9tID0gT2JqZWN0KG5leHRTb3VyY2UpO1xuXG4gICAgLy8gV2UgZG9uJ3QgY3VycmVudGx5IHN1cHBvcnQgYWNjZXNzb3JzIG5vciBwcm94aWVzLiBUaGVyZWZvcmUgdGhpc1xuICAgIC8vIGNvcHkgY2Fubm90IHRocm93LiBJZiB3ZSBldmVyIHN1cHBvcnRlZCB0aGlzIHRoZW4gd2UgbXVzdCBoYW5kbGVcbiAgICAvLyBleGNlcHRpb25zIGFuZCBzaWRlLWVmZmVjdHMuIFdlIGRvbid0IHN1cHBvcnQgc3ltYm9scyBzbyB0aGV5IHdvbid0XG4gICAgLy8gYmUgdHJhbnNmZXJyZWQuXG5cbiAgICBmb3IgKHZhciBrZXkgaW4gZnJvbSkge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoZnJvbSwga2V5KSkge1xuICAgICAgICB0b1trZXldID0gZnJvbVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0bztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhc3NpZ247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFBvb2xlZENsYXNzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogU3RhdGljIHBvb2xlcnMuIFNldmVyYWwgY3VzdG9tIHZlcnNpb25zIGZvciBlYWNoIHBvdGVudGlhbCBudW1iZXIgb2ZcbiAqIGFyZ3VtZW50cy4gQSBjb21wbGV0ZWx5IGdlbmVyaWMgcG9vbGVyIGlzIGVhc3kgdG8gaW1wbGVtZW50LCBidXQgd291bGRcbiAqIHJlcXVpcmUgYWNjZXNzaW5nIHRoZSBgYXJndW1lbnRzYCBvYmplY3QuIEluIGVhY2ggb2YgdGhlc2UsIGB0aGlzYCByZWZlcnMgdG9cbiAqIHRoZSBDbGFzcyBpdHNlbGYsIG5vdCBhbiBpbnN0YW5jZS4gSWYgYW55IG90aGVycyBhcmUgbmVlZGVkLCBzaW1wbHkgYWRkIHRoZW1cbiAqIGhlcmUsIG9yIGluIHRoZWlyIG93biBmaWxlcy5cbiAqL1xudmFyIG9uZUFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGNvcHlGaWVsZHNGcm9tKSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGNvcHlGaWVsZHNGcm9tKTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhjb3B5RmllbGRzRnJvbSk7XG4gIH1cbn07XG5cbnZhciB0d29Bcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyKTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIpO1xuICB9XG59O1xuXG52YXIgdGhyZWVBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIsIGEzKSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMiwgYTMpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMpO1xuICB9XG59O1xuXG52YXIgZm91ckFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMiwgYTMsIGE0KSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMiwgYTMsIGE0KTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIsIGEzLCBhNCk7XG4gIH1cbn07XG5cbnZhciBmaXZlQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoYTEsIGEyLCBhMywgYTQsIGE1KSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMiwgYTMsIGE0LCBhNSk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyLCBhMywgYTQsIGE1KTtcbiAgfVxufTtcblxudmFyIHN0YW5kYXJkUmVsZWFzZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgIShpbnN0YW5jZSBpbnN0YW5jZW9mIEtsYXNzKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUcnlpbmcgdG8gcmVsZWFzZSBhbiBpbnN0YW5jZSBpbnRvIGEgcG9vbCBvZiBhIGRpZmZlcmVudCB0eXBlLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgaW5zdGFuY2UuZGVzdHJ1Y3RvcigpO1xuICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCA8IEtsYXNzLnBvb2xTaXplKSB7XG4gICAgS2xhc3MuaW5zdGFuY2VQb29sLnB1c2goaW5zdGFuY2UpO1xuICB9XG59O1xuXG52YXIgREVGQVVMVF9QT09MX1NJWkUgPSAxMDtcbnZhciBERUZBVUxUX1BPT0xFUiA9IG9uZUFyZ3VtZW50UG9vbGVyO1xuXG4vKipcbiAqIEF1Z21lbnRzIGBDb3B5Q29uc3RydWN0b3JgIHRvIGJlIGEgcG9vbGFibGUgY2xhc3MsIGF1Z21lbnRpbmcgb25seSB0aGUgY2xhc3NcbiAqIGl0c2VsZiAoc3RhdGljYWxseSkgbm90IGFkZGluZyBhbnkgcHJvdG90eXBpY2FsIGZpZWxkcy4gQW55IENvcHlDb25zdHJ1Y3RvclxuICogeW91IGdpdmUgdGhpcyBtYXkgaGF2ZSBhIGBwb29sU2l6ZWAgcHJvcGVydHksIGFuZCB3aWxsIGxvb2sgZm9yIGFcbiAqIHByb3RvdHlwaWNhbCBgZGVzdHJ1Y3RvcmAgb24gaW5zdGFuY2VzIChvcHRpb25hbCkuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gQ29weUNvbnN0cnVjdG9yIENvbnN0cnVjdG9yIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVzZXQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwb29sZXIgQ3VzdG9taXphYmxlIHBvb2xlci5cbiAqL1xudmFyIGFkZFBvb2xpbmdUbyA9IGZ1bmN0aW9uIChDb3B5Q29uc3RydWN0b3IsIHBvb2xlcikge1xuICB2YXIgTmV3S2xhc3MgPSBDb3B5Q29uc3RydWN0b3I7XG4gIE5ld0tsYXNzLmluc3RhbmNlUG9vbCA9IFtdO1xuICBOZXdLbGFzcy5nZXRQb29sZWQgPSBwb29sZXIgfHwgREVGQVVMVF9QT09MRVI7XG4gIGlmICghTmV3S2xhc3MucG9vbFNpemUpIHtcbiAgICBOZXdLbGFzcy5wb29sU2l6ZSA9IERFRkFVTFRfUE9PTF9TSVpFO1xuICB9XG4gIE5ld0tsYXNzLnJlbGVhc2UgPSBzdGFuZGFyZFJlbGVhc2VyO1xuICByZXR1cm4gTmV3S2xhc3M7XG59O1xuXG52YXIgUG9vbGVkQ2xhc3MgPSB7XG4gIGFkZFBvb2xpbmdUbzogYWRkUG9vbGluZ1RvLFxuICBvbmVBcmd1bWVudFBvb2xlcjogb25lQXJndW1lbnRQb29sZXIsXG4gIHR3b0FyZ3VtZW50UG9vbGVyOiB0d29Bcmd1bWVudFBvb2xlcixcbiAgdGhyZWVBcmd1bWVudFBvb2xlcjogdGhyZWVBcmd1bWVudFBvb2xlcixcbiAgZm91ckFyZ3VtZW50UG9vbGVyOiBmb3VyQXJndW1lbnRQb29sZXIsXG4gIGZpdmVBcmd1bWVudFBvb2xlcjogZml2ZUFyZ3VtZW50UG9vbGVyXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBvb2xlZENsYXNzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NID0gcmVxdWlyZSgnLi9SZWFjdERPTScpO1xudmFyIFJlYWN0RE9NU2VydmVyID0gcmVxdWlyZSgnLi9SZWFjdERPTVNlcnZlcicpO1xudmFyIFJlYWN0SXNvbW9ycGhpYyA9IHJlcXVpcmUoJy4vUmVhY3RJc29tb3JwaGljJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBkZXByZWNhdGVkID0gcmVxdWlyZSgnLi9kZXByZWNhdGVkJyk7XG5cbi8vIGB2ZXJzaW9uYCB3aWxsIGJlIGFkZGVkIGhlcmUgYnkgUmVhY3RJc29tb3JwaGljLlxudmFyIFJlYWN0ID0ge307XG5cbmFzc2lnbihSZWFjdCwgUmVhY3RJc29tb3JwaGljKTtcblxuYXNzaWduKFJlYWN0LCB7XG4gIC8vIFJlYWN0RE9NXG4gIGZpbmRET01Ob2RlOiBkZXByZWNhdGVkKCdmaW5kRE9NTm9kZScsICdSZWFjdERPTScsICdyZWFjdC1kb20nLCBSZWFjdERPTSwgUmVhY3RET00uZmluZERPTU5vZGUpLFxuICByZW5kZXI6IGRlcHJlY2F0ZWQoJ3JlbmRlcicsICdSZWFjdERPTScsICdyZWFjdC1kb20nLCBSZWFjdERPTSwgUmVhY3RET00ucmVuZGVyKSxcbiAgdW5tb3VudENvbXBvbmVudEF0Tm9kZTogZGVwcmVjYXRlZCgndW5tb3VudENvbXBvbmVudEF0Tm9kZScsICdSZWFjdERPTScsICdyZWFjdC1kb20nLCBSZWFjdERPTSwgUmVhY3RET00udW5tb3VudENvbXBvbmVudEF0Tm9kZSksXG5cbiAgLy8gUmVhY3RET01TZXJ2ZXJcbiAgcmVuZGVyVG9TdHJpbmc6IGRlcHJlY2F0ZWQoJ3JlbmRlclRvU3RyaW5nJywgJ1JlYWN0RE9NU2VydmVyJywgJ3JlYWN0LWRvbS9zZXJ2ZXInLCBSZWFjdERPTVNlcnZlciwgUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdHJpbmcpLFxuICByZW5kZXJUb1N0YXRpY01hcmt1cDogZGVwcmVjYXRlZCgncmVuZGVyVG9TdGF0aWNNYXJrdXAnLCAnUmVhY3RET01TZXJ2ZXInLCAncmVhY3QtZG9tL3NlcnZlcicsIFJlYWN0RE9NU2VydmVyLCBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cClcbn0pO1xuXG5SZWFjdC5fX1NFQ1JFVF9ET01fRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRCA9IFJlYWN0RE9NO1xuUmVhY3QuX19TRUNSRVRfRE9NX1NFUlZFUl9ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEID0gUmVhY3RET01TZXJ2ZXI7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZU1hcCcpO1xuXG52YXIgZmluZERPTU5vZGUgPSByZXF1aXJlKCcuL2ZpbmRET01Ob2RlJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIGRpZFdhcm5LZXkgPSAnX2dldERPTU5vZGVEaWRXYXJuJztcblxudmFyIFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluID0ge1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgRE9NIG5vZGUgcmVuZGVyZWQgYnkgdGhpcyBjb21wb25lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge0RPTUVsZW1lbnR9IFRoZSByb290IG5vZGUgb2YgdGhpcyBjb21wb25lbnQuXG4gICAqIEBmaW5hbFxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBnZXRET01Ob2RlOiBmdW5jdGlvbiAoKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodGhpcy5jb25zdHJ1Y3RvcltkaWRXYXJuS2V5XSwgJyVzLmdldERPTU5vZGUoLi4uKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICcgKyAnUmVhY3RET00uZmluZERPTU5vZGUoaW5zdGFuY2UpIGluc3RlYWQuJywgUmVhY3RJbnN0YW5jZU1hcC5nZXQodGhpcykuZ2V0TmFtZSgpIHx8IHRoaXMudGFnTmFtZSB8fCAnVW5rbm93bicpIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuY29uc3RydWN0b3JbZGlkV2FybktleV0gPSB0cnVlO1xuICAgIHJldHVybiBmaW5kRE9NTm9kZSh0aGlzKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEJyb3dzZXJDb21wb25lbnRNaXhpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xudmFyIEV2ZW50UGx1Z2luUmVnaXN0cnkgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luUmVnaXN0cnknKTtcbnZhciBSZWFjdEV2ZW50RW1pdHRlck1peGluID0gcmVxdWlyZSgnLi9SZWFjdEV2ZW50RW1pdHRlck1peGluJyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBWaWV3cG9ydE1ldHJpY3MgPSByZXF1aXJlKCcuL1ZpZXdwb3J0TWV0cmljcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaXNFdmVudFN1cHBvcnRlZCA9IHJlcXVpcmUoJy4vaXNFdmVudFN1cHBvcnRlZCcpO1xuXG4vKipcbiAqIFN1bW1hcnkgb2YgYFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcmAgZXZlbnQgaGFuZGxpbmc6XG4gKlxuICogIC0gVG9wLWxldmVsIGRlbGVnYXRpb24gaXMgdXNlZCB0byB0cmFwIG1vc3QgbmF0aXZlIGJyb3dzZXIgZXZlbnRzLiBUaGlzXG4gKiAgICBtYXkgb25seSBvY2N1ciBpbiB0aGUgbWFpbiB0aHJlYWQgYW5kIGlzIHRoZSByZXNwb25zaWJpbGl0eSBvZlxuICogICAgUmVhY3RFdmVudExpc3RlbmVyLCB3aGljaCBpcyBpbmplY3RlZCBhbmQgY2FuIHRoZXJlZm9yZSBzdXBwb3J0IHBsdWdnYWJsZVxuICogICAgZXZlbnQgc291cmNlcy4gVGhpcyBpcyB0aGUgb25seSB3b3JrIHRoYXQgb2NjdXJzIGluIHRoZSBtYWluIHRocmVhZC5cbiAqXG4gKiAgLSBXZSBub3JtYWxpemUgYW5kIGRlLWR1cGxpY2F0ZSBldmVudHMgdG8gYWNjb3VudCBmb3IgYnJvd3NlciBxdWlya3MuIFRoaXNcbiAqICAgIG1heSBiZSBkb25lIGluIHRoZSB3b3JrZXIgdGhyZWFkLlxuICpcbiAqICAtIEZvcndhcmQgdGhlc2UgbmF0aXZlIGV2ZW50cyAod2l0aCB0aGUgYXNzb2NpYXRlZCB0b3AtbGV2ZWwgdHlwZSB1c2VkIHRvXG4gKiAgICB0cmFwIGl0KSB0byBgRXZlbnRQbHVnaW5IdWJgLCB3aGljaCBpbiB0dXJuIHdpbGwgYXNrIHBsdWdpbnMgaWYgdGhleSB3YW50XG4gKiAgICB0byBleHRyYWN0IGFueSBzeW50aGV0aWMgZXZlbnRzLlxuICpcbiAqICAtIFRoZSBgRXZlbnRQbHVnaW5IdWJgIHdpbGwgdGhlbiBwcm9jZXNzIGVhY2ggZXZlbnQgYnkgYW5ub3RhdGluZyB0aGVtIHdpdGhcbiAqICAgIFwiZGlzcGF0Y2hlc1wiLCBhIHNlcXVlbmNlIG9mIGxpc3RlbmVycyBhbmQgSURzIHRoYXQgY2FyZSBhYm91dCB0aGF0IGV2ZW50LlxuICpcbiAqICAtIFRoZSBgRXZlbnRQbHVnaW5IdWJgIHRoZW4gZGlzcGF0Y2hlcyB0aGUgZXZlbnRzLlxuICpcbiAqIE92ZXJ2aWV3IG9mIFJlYWN0IGFuZCB0aGUgZXZlbnQgc3lzdGVtOlxuICpcbiAqICstLS0tLS0tLS0tLS0rICAgIC5cbiAqIHwgICAgRE9NICAgICB8ICAgIC5cbiAqICstLS0tLS0tLS0tLS0rICAgIC5cbiAqICAgICAgIHwgICAgICAgICAgIC5cbiAqICAgICAgIHYgICAgICAgICAgIC5cbiAqICstLS0tLS0tLS0tLS0rICAgIC5cbiAqIHwgUmVhY3RFdmVudCB8ICAgIC5cbiAqIHwgIExpc3RlbmVyICB8ICAgIC5cbiAqICstLS0tLS0tLS0tLS0rICAgIC4gICAgICAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tK1xuICogICAgICAgfCAgICAgICAgICAgLiAgICAgICAgICAgICAgICstLS0tLS0tLSt8U2ltcGxlRXZlbnR8XG4gKiAgICAgICB8ICAgICAgICAgICAuICAgICAgICAgICAgICAgfCAgICAgICAgIHxQbHVnaW4gICAgIHxcbiAqICstLS0tLXwtLS0tLS0rICAgIC4gICAgICAgICAgICAgICB2ICAgICAgICAgKy0tLS0tLS0tLS0tK1xuICogfCAgICAgfCAgICAgIHwgICAgLiAgICArLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tK1xuICogfCAgICAgKy0tLS0tLS0tLS0tLi0tLT58RXZlbnRQbHVnaW5IdWJ8ICAgICAgICAgICAgICAgICAgICB8ICAgIEV2ZW50ICAgfFxuICogfCAgICAgICAgICAgIHwgICAgLiAgICB8ICAgICAgICAgICAgICB8ICAgICArLS0tLS0tLS0tLS0rICB8IFByb3BhZ2F0b3JzfFxuICogfCBSZWFjdEV2ZW50IHwgICAgLiAgICB8ICAgICAgICAgICAgICB8ICAgICB8VGFwRXZlbnQgICB8ICB8LS0tLS0tLS0tLS0tfFxuICogfCAgRW1pdHRlciAgIHwgICAgLiAgICB8ICAgICAgICAgICAgICB8PC0tLSt8UGx1Z2luICAgICB8ICB8b3RoZXIgcGx1Z2lufFxuICogfCAgICAgICAgICAgIHwgICAgLiAgICB8ICAgICAgICAgICAgICB8ICAgICArLS0tLS0tLS0tLS0rICB8ICB1dGlsaXRpZXMgfFxuICogfCAgICAgKy0tLS0tLS0tLS0tLi0tLT58ICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tK1xuICogfCAgICAgfCAgICAgIHwgICAgLiAgICArLS0tLS0tLS0tLS0tLS0rXG4gKiArLS0tLS18LS0tLS0tKyAgICAuICAgICAgICAgICAgICAgIF4gICAgICAgICstLS0tLS0tLS0tLStcbiAqICAgICAgIHwgICAgICAgICAgIC4gICAgICAgICAgICAgICAgfCAgICAgICAgfEVudGVyL0xlYXZlfFxuICogICAgICAgKyAgICAgICAgICAgLiAgICAgICAgICAgICAgICArLS0tLS0tLSt8UGx1Z2luICAgICB8XG4gKiArLS0tLS0tLS0tLS0tLSsgICAuICAgICAgICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLStcbiAqIHwgYXBwbGljYXRpb24gfCAgIC5cbiAqIHwtLS0tLS0tLS0tLS0tfCAgIC5cbiAqIHwgICAgICAgICAgICAgfCAgIC5cbiAqIHwgICAgICAgICAgICAgfCAgIC5cbiAqICstLS0tLS0tLS0tLS0tKyAgIC5cbiAqICAgICAgICAgICAgICAgICAgIC5cbiAqICAgIFJlYWN0IENvcmUgICAgIC4gIEdlbmVyYWwgUHVycG9zZSBFdmVudCBQbHVnaW4gU3lzdGVtXG4gKi9cblxudmFyIGFscmVhZHlMaXN0ZW5pbmdUbyA9IHt9O1xudmFyIGlzTW9uaXRvcmluZ1Njcm9sbFZhbHVlID0gZmFsc2U7XG52YXIgcmVhY3RUb3BMaXN0ZW5lcnNDb3VudGVyID0gMDtcblxuLy8gRm9yIGV2ZW50cyBsaWtlICdzdWJtaXQnIHdoaWNoIGRvbid0IGNvbnNpc3RlbnRseSBidWJibGUgKHdoaWNoIHdlIHRyYXAgYXQgYVxuLy8gbG93ZXIgbm9kZSB0aGFuIGBkb2N1bWVudGApLCBiaW5kaW5nIGF0IGBkb2N1bWVudGAgd291bGQgY2F1c2UgZHVwbGljYXRlXG4vLyBldmVudHMgc28gd2UgZG9uJ3QgaW5jbHVkZSB0aGVtIGhlcmVcbnZhciB0b3BFdmVudE1hcHBpbmcgPSB7XG4gIHRvcEFib3J0OiAnYWJvcnQnLFxuICB0b3BCbHVyOiAnYmx1cicsXG4gIHRvcENhblBsYXk6ICdjYW5wbGF5JyxcbiAgdG9wQ2FuUGxheVRocm91Z2g6ICdjYW5wbGF5dGhyb3VnaCcsXG4gIHRvcENoYW5nZTogJ2NoYW5nZScsXG4gIHRvcENsaWNrOiAnY2xpY2snLFxuICB0b3BDb21wb3NpdGlvbkVuZDogJ2NvbXBvc2l0aW9uZW5kJyxcbiAgdG9wQ29tcG9zaXRpb25TdGFydDogJ2NvbXBvc2l0aW9uc3RhcnQnLFxuICB0b3BDb21wb3NpdGlvblVwZGF0ZTogJ2NvbXBvc2l0aW9udXBkYXRlJyxcbiAgdG9wQ29udGV4dE1lbnU6ICdjb250ZXh0bWVudScsXG4gIHRvcENvcHk6ICdjb3B5JyxcbiAgdG9wQ3V0OiAnY3V0JyxcbiAgdG9wRG91YmxlQ2xpY2s6ICdkYmxjbGljaycsXG4gIHRvcERyYWc6ICdkcmFnJyxcbiAgdG9wRHJhZ0VuZDogJ2RyYWdlbmQnLFxuICB0b3BEcmFnRW50ZXI6ICdkcmFnZW50ZXInLFxuICB0b3BEcmFnRXhpdDogJ2RyYWdleGl0JyxcbiAgdG9wRHJhZ0xlYXZlOiAnZHJhZ2xlYXZlJyxcbiAgdG9wRHJhZ092ZXI6ICdkcmFnb3ZlcicsXG4gIHRvcERyYWdTdGFydDogJ2RyYWdzdGFydCcsXG4gIHRvcERyb3A6ICdkcm9wJyxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6ICdkdXJhdGlvbmNoYW5nZScsXG4gIHRvcEVtcHRpZWQ6ICdlbXB0aWVkJyxcbiAgdG9wRW5jcnlwdGVkOiAnZW5jcnlwdGVkJyxcbiAgdG9wRW5kZWQ6ICdlbmRlZCcsXG4gIHRvcEVycm9yOiAnZXJyb3InLFxuICB0b3BGb2N1czogJ2ZvY3VzJyxcbiAgdG9wSW5wdXQ6ICdpbnB1dCcsXG4gIHRvcEtleURvd246ICdrZXlkb3duJyxcbiAgdG9wS2V5UHJlc3M6ICdrZXlwcmVzcycsXG4gIHRvcEtleVVwOiAna2V5dXAnLFxuICB0b3BMb2FkZWREYXRhOiAnbG9hZGVkZGF0YScsXG4gIHRvcExvYWRlZE1ldGFkYXRhOiAnbG9hZGVkbWV0YWRhdGEnLFxuICB0b3BMb2FkU3RhcnQ6ICdsb2Fkc3RhcnQnLFxuICB0b3BNb3VzZURvd246ICdtb3VzZWRvd24nLFxuICB0b3BNb3VzZU1vdmU6ICdtb3VzZW1vdmUnLFxuICB0b3BNb3VzZU91dDogJ21vdXNlb3V0JyxcbiAgdG9wTW91c2VPdmVyOiAnbW91c2VvdmVyJyxcbiAgdG9wTW91c2VVcDogJ21vdXNldXAnLFxuICB0b3BQYXN0ZTogJ3Bhc3RlJyxcbiAgdG9wUGF1c2U6ICdwYXVzZScsXG4gIHRvcFBsYXk6ICdwbGF5JyxcbiAgdG9wUGxheWluZzogJ3BsYXlpbmcnLFxuICB0b3BQcm9ncmVzczogJ3Byb2dyZXNzJyxcbiAgdG9wUmF0ZUNoYW5nZTogJ3JhdGVjaGFuZ2UnLFxuICB0b3BTY3JvbGw6ICdzY3JvbGwnLFxuICB0b3BTZWVrZWQ6ICdzZWVrZWQnLFxuICB0b3BTZWVraW5nOiAnc2Vla2luZycsXG4gIHRvcFNlbGVjdGlvbkNoYW5nZTogJ3NlbGVjdGlvbmNoYW5nZScsXG4gIHRvcFN0YWxsZWQ6ICdzdGFsbGVkJyxcbiAgdG9wU3VzcGVuZDogJ3N1c3BlbmQnLFxuICB0b3BUZXh0SW5wdXQ6ICd0ZXh0SW5wdXQnLFxuICB0b3BUaW1lVXBkYXRlOiAndGltZXVwZGF0ZScsXG4gIHRvcFRvdWNoQ2FuY2VsOiAndG91Y2hjYW5jZWwnLFxuICB0b3BUb3VjaEVuZDogJ3RvdWNoZW5kJyxcbiAgdG9wVG91Y2hNb3ZlOiAndG91Y2htb3ZlJyxcbiAgdG9wVG91Y2hTdGFydDogJ3RvdWNoc3RhcnQnLFxuICB0b3BWb2x1bWVDaGFuZ2U6ICd2b2x1bWVjaGFuZ2UnLFxuICB0b3BXYWl0aW5nOiAnd2FpdGluZycsXG4gIHRvcFdoZWVsOiAnd2hlZWwnXG59O1xuXG4vKipcbiAqIFRvIGVuc3VyZSBubyBjb25mbGljdHMgd2l0aCBvdGhlciBwb3RlbnRpYWwgUmVhY3QgaW5zdGFuY2VzIG9uIHRoZSBwYWdlXG4gKi9cbnZhciB0b3BMaXN0ZW5lcnNJREtleSA9ICdfcmVhY3RMaXN0ZW5lcnNJRCcgKyBTdHJpbmcoTWF0aC5yYW5kb20oKSkuc2xpY2UoMik7XG5cbmZ1bmN0aW9uIGdldExpc3RlbmluZ0ZvckRvY3VtZW50KG1vdW50QXQpIHtcbiAgLy8gSW4gSUU4LCBgbW91bnRBdGAgaXMgYSBob3N0IG9iamVjdCBhbmQgZG9lc24ndCBoYXZlIGBoYXNPd25Qcm9wZXJ0eWBcbiAgLy8gZGlyZWN0bHkuXG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vdW50QXQsIHRvcExpc3RlbmVyc0lES2V5KSkge1xuICAgIG1vdW50QXRbdG9wTGlzdGVuZXJzSURLZXldID0gcmVhY3RUb3BMaXN0ZW5lcnNDb3VudGVyKys7XG4gICAgYWxyZWFkeUxpc3RlbmluZ1RvW21vdW50QXRbdG9wTGlzdGVuZXJzSURLZXldXSA9IHt9O1xuICB9XG4gIHJldHVybiBhbHJlYWR5TGlzdGVuaW5nVG9bbW91bnRBdFt0b3BMaXN0ZW5lcnNJREtleV1dO1xufVxuXG4vKipcbiAqIGBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXJgIGlzIHVzZWQgdG8gYXR0YWNoIHRvcC1sZXZlbCBldmVudCBsaXN0ZW5lcnMuIEZvclxuICogZXhhbXBsZTpcbiAqXG4gKiAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5wdXRMaXN0ZW5lcignbXlJRCcsICdvbkNsaWNrJywgbXlGdW5jdGlvbik7XG4gKlxuICogVGhpcyB3b3VsZCBhbGxvY2F0ZSBhIFwicmVnaXN0cmF0aW9uXCIgb2YgYCgnb25DbGljaycsIG15RnVuY3Rpb24pYCBvbiAnbXlJRCcuXG4gKlxuICogQGludGVybmFsXG4gKi9cbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSBhc3NpZ24oe30sIFJlYWN0RXZlbnRFbWl0dGVyTWl4aW4sIHtcblxuICAvKipcbiAgICogSW5qZWN0YWJsZSBldmVudCBiYWNrZW5kXG4gICAqL1xuICBSZWFjdEV2ZW50TGlzdGVuZXI6IG51bGwsXG5cbiAgaW5qZWN0aW9uOiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFJlYWN0RXZlbnRMaXN0ZW5lclxuICAgICAqL1xuICAgIGluamVjdFJlYWN0RXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gKFJlYWN0RXZlbnRMaXN0ZW5lcikge1xuICAgICAgUmVhY3RFdmVudExpc3RlbmVyLnNldEhhbmRsZVRvcExldmVsKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5oYW5kbGVUb3BMZXZlbCk7XG4gICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyID0gUmVhY3RFdmVudExpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU2V0cyB3aGV0aGVyIG9yIG5vdCBhbnkgY3JlYXRlZCBjYWxsYmFja3Mgc2hvdWxkIGJlIGVuYWJsZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCBUcnVlIGlmIGNhbGxiYWNrcyBzaG91bGQgYmUgZW5hYmxlZC5cbiAgICovXG4gIHNldEVuYWJsZWQ6IGZ1bmN0aW9uIChlbmFibGVkKSB7XG4gICAgaWYgKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIuc2V0RW5hYmxlZChlbmFibGVkKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgY2FsbGJhY2tzIGFyZSBlbmFibGVkLlxuICAgKi9cbiAgaXNFbmFibGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICEhKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIgJiYgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci5pc0VuYWJsZWQoKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdlIGxpc3RlbiBmb3IgYnViYmxlZCB0b3VjaCBldmVudHMgb24gdGhlIGRvY3VtZW50IG9iamVjdC5cbiAgICpcbiAgICogRmlyZWZveCB2OC4wMSAoYW5kIHBvc3NpYmx5IG90aGVycykgZXhoaWJpdGVkIHN0cmFuZ2UgYmVoYXZpb3Igd2hlblxuICAgKiBtb3VudGluZyBgb25tb3VzZW1vdmVgIGV2ZW50cyBhdCBzb21lIG5vZGUgdGhhdCB3YXMgbm90IHRoZSBkb2N1bWVudFxuICAgKiBlbGVtZW50LiBUaGUgc3ltcHRvbXMgd2VyZSB0aGF0IGlmIHlvdXIgbW91c2UgaXMgbm90IG1vdmluZyBvdmVyIHNvbWV0aGluZ1xuICAgKiBjb250YWluZWQgd2l0aGluIHRoYXQgbW91bnQgcG9pbnQgKGZvciBleGFtcGxlIG9uIHRoZSBiYWNrZ3JvdW5kKSB0aGVcbiAgICogdG9wLWxldmVsIGxpc3RlbmVycyBmb3IgYG9ubW91c2Vtb3ZlYCB3b24ndCBiZSBjYWxsZWQuIEhvd2V2ZXIsIGlmIHlvdVxuICAgKiByZWdpc3RlciB0aGUgYG1vdXNlbW92ZWAgb24gdGhlIGRvY3VtZW50IG9iamVjdCwgdGhlbiBpdCB3aWxsIG9mIGNvdXJzZVxuICAgKiBjYXRjaCBhbGwgYG1vdXNlbW92ZWBzLiBUaGlzIGFsb25nIHdpdGggaU9TIHF1aXJrcywganVzdGlmaWVzIHJlc3RyaWN0aW5nXG4gICAqIHRvcC1sZXZlbCBsaXN0ZW5lcnMgdG8gdGhlIGRvY3VtZW50IG9iamVjdCBvbmx5LCBhdCBsZWFzdCBmb3IgdGhlc2VcbiAgICogbW92ZW1lbnQgdHlwZXMgb2YgZXZlbnRzIGFuZCBwb3NzaWJseSBhbGwgZXZlbnRzLlxuICAgKlxuICAgKiBAc2VlIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvYmxvZy9hcmNoaXZlcy8yMDEwLzA5L2NsaWNrX2V2ZW50X2RlbC5odG1sXG4gICAqXG4gICAqIEFsc28sIGBrZXl1cGAvYGtleXByZXNzYC9ga2V5ZG93bmAgZG8gbm90IGJ1YmJsZSB0byB0aGUgd2luZG93IG9uIElFLCBidXRcbiAgICogdGhleSBidWJibGUgdG8gZG9jdW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWdpc3RyYXRpb25OYW1lIE5hbWUgb2YgbGlzdGVuZXIgKGUuZy4gYG9uQ2xpY2tgKS5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRlbnREb2N1bWVudEhhbmRsZSBEb2N1bWVudCB3aGljaCBvd25zIHRoZSBjb250YWluZXJcbiAgICovXG4gIGxpc3RlblRvOiBmdW5jdGlvbiAocmVnaXN0cmF0aW9uTmFtZSwgY29udGVudERvY3VtZW50SGFuZGxlKSB7XG4gICAgdmFyIG1vdW50QXQgPSBjb250ZW50RG9jdW1lbnRIYW5kbGU7XG4gICAgdmFyIGlzTGlzdGVuaW5nID0gZ2V0TGlzdGVuaW5nRm9yRG9jdW1lbnQobW91bnRBdCk7XG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZURlcGVuZGVuY2llc1tyZWdpc3RyYXRpb25OYW1lXTtcblxuICAgIHZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlcGVuZGVuY3kgPSBkZXBlbmRlbmNpZXNbaV07XG4gICAgICBpZiAoIShpc0xpc3RlbmluZy5oYXNPd25Qcm9wZXJ0eShkZXBlbmRlbmN5KSAmJiBpc0xpc3RlbmluZ1tkZXBlbmRlbmN5XSkpIHtcbiAgICAgICAgaWYgKGRlcGVuZGVuY3kgPT09IHRvcExldmVsVHlwZXMudG9wV2hlZWwpIHtcbiAgICAgICAgICBpZiAoaXNFdmVudFN1cHBvcnRlZCgnd2hlZWwnKSkge1xuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wV2hlZWwsICd3aGVlbCcsIG1vdW50QXQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNFdmVudFN1cHBvcnRlZCgnbW91c2V3aGVlbCcpKSB7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BXaGVlbCwgJ21vdXNld2hlZWwnLCBtb3VudEF0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRmlyZWZveCBuZWVkcyB0byBjYXB0dXJlIGEgZGlmZmVyZW50IG1vdXNlIHNjcm9sbCBldmVudC5cbiAgICAgICAgICAgIC8vIEBzZWUgaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9kb20vZXZlbnRzL3Rlc3RzL3Njcm9sbC5odG1sXG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BXaGVlbCwgJ0RPTU1vdXNlU2Nyb2xsJywgbW91bnRBdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRlcGVuZGVuY3kgPT09IHRvcExldmVsVHlwZXMudG9wU2Nyb2xsKSB7XG5cbiAgICAgICAgICBpZiAoaXNFdmVudFN1cHBvcnRlZCgnc2Nyb2xsJywgdHJ1ZSkpIHtcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcENhcHR1cmVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BTY3JvbGwsICdzY3JvbGwnLCBtb3VudEF0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wU2Nyb2xsLCAnc2Nyb2xsJywgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci5XSU5ET1dfSEFORExFKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGVwZW5kZW5jeSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BGb2N1cyB8fCBkZXBlbmRlbmN5ID09PSB0b3BMZXZlbFR5cGVzLnRvcEJsdXIpIHtcblxuICAgICAgICAgIGlmIChpc0V2ZW50U3VwcG9ydGVkKCdmb2N1cycsIHRydWUpKSB7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBDYXB0dXJlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wRm9jdXMsICdmb2N1cycsIG1vdW50QXQpO1xuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQ2FwdHVyZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcEJsdXIsICdibHVyJywgbW91bnRBdCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0V2ZW50U3VwcG9ydGVkKCdmb2N1c2luJykpIHtcbiAgICAgICAgICAgIC8vIElFIGhhcyBgZm9jdXNpbmAgYW5kIGBmb2N1c291dGAgZXZlbnRzIHdoaWNoIGJ1YmJsZS5cbiAgICAgICAgICAgIC8vIEBzZWUgaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9ibG9nL2FyY2hpdmVzLzIwMDgvMDQvZGVsZWdhdGluZ190aGUuaHRtbFxuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wRm9jdXMsICdmb2N1c2luJywgbW91bnRBdCk7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BCbHVyLCAnZm9jdXNvdXQnLCBtb3VudEF0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgYmx1ciBhbmQgZm9jdXMgZXZlbnQgbGlzdGVuZXJzIGFyZSBvbmx5IGF0dGFjaGVkIG9uY2VcbiAgICAgICAgICBpc0xpc3RlbmluZ1t0b3BMZXZlbFR5cGVzLnRvcEJsdXJdID0gdHJ1ZTtcbiAgICAgICAgICBpc0xpc3RlbmluZ1t0b3BMZXZlbFR5cGVzLnRvcEZvY3VzXSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodG9wRXZlbnRNYXBwaW5nLmhhc093blByb3BlcnR5KGRlcGVuZGVuY3kpKSB7XG4gICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KGRlcGVuZGVuY3ksIHRvcEV2ZW50TWFwcGluZ1tkZXBlbmRlbmN5XSwgbW91bnRBdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpc0xpc3RlbmluZ1tkZXBlbmRlbmN5XSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHRyYXBCdWJibGVkRXZlbnQ6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKSB7XG4gICAgcmV0dXJuIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKTtcbiAgfSxcblxuICB0cmFwQ2FwdHVyZWRFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpIHtcbiAgICByZXR1cm4gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQ2FwdHVyZWRFdmVudCh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKTtcbiAgfSxcblxuICAvKipcbiAgICogTGlzdGVucyB0byB3aW5kb3cgc2Nyb2xsIGFuZCByZXNpemUgZXZlbnRzLiBXZSBjYWNoZSBzY3JvbGwgdmFsdWVzIHNvIHRoYXRcbiAgICogYXBwbGljYXRpb24gY29kZSBjYW4gYWNjZXNzIHRoZW0gd2l0aG91dCB0cmlnZ2VyaW5nIHJlZmxvd3MuXG4gICAqXG4gICAqIE5PVEU6IFNjcm9sbCBldmVudHMgZG8gbm90IGJ1YmJsZS5cbiAgICpcbiAgICogQHNlZSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2RvbS9ldmVudHMvc2Nyb2xsLmh0bWxcbiAgICovXG4gIGVuc3VyZVNjcm9sbFZhbHVlTW9uaXRvcmluZzogZnVuY3Rpb24gKCkge1xuICAgIGlmICghaXNNb25pdG9yaW5nU2Nyb2xsVmFsdWUpIHtcbiAgICAgIHZhciByZWZyZXNoID0gVmlld3BvcnRNZXRyaWNzLnJlZnJlc2hTY3JvbGxWYWx1ZXM7XG4gICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLm1vbml0b3JTY3JvbGxWYWx1ZShyZWZyZXNoKTtcbiAgICAgIGlzTW9uaXRvcmluZ1Njcm9sbFZhbHVlID0gdHJ1ZTtcbiAgICB9XG4gIH0sXG5cbiAgZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzOiBFdmVudFBsdWdpbkh1Yi5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3MsXG5cbiAgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXM6IEV2ZW50UGx1Z2luSHViLnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLFxuXG4gIHB1dExpc3RlbmVyOiBFdmVudFBsdWdpbkh1Yi5wdXRMaXN0ZW5lcixcblxuICBnZXRMaXN0ZW5lcjogRXZlbnRQbHVnaW5IdWIuZ2V0TGlzdGVuZXIsXG5cbiAgZGVsZXRlTGlzdGVuZXI6IEV2ZW50UGx1Z2luSHViLmRlbGV0ZUxpc3RlbmVyLFxuXG4gIGRlbGV0ZUFsbExpc3RlbmVyczogRXZlbnRQbHVnaW5IdWIuZGVsZXRlQWxsTGlzdGVuZXJzXG5cbn0pO1xuXG5SZWFjdFBlcmYubWVhc3VyZU1ldGhvZHMoUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLCAnUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJywge1xuICBwdXRMaXN0ZW5lcjogJ3B1dExpc3RlbmVyJyxcbiAgZGVsZXRlTGlzdGVuZXI6ICdkZWxldGVMaXN0ZW5lcidcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDaGlsZFJlY29uY2lsZXJcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcblxudmFyIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciB0cmF2ZXJzZUFsbENoaWxkcmVuID0gcmVxdWlyZSgnLi90cmF2ZXJzZUFsbENoaWxkcmVuJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuZnVuY3Rpb24gaW5zdGFudGlhdGVDaGlsZChjaGlsZEluc3RhbmNlcywgY2hpbGQsIG5hbWUpIHtcbiAgLy8gV2UgZm91bmQgYSBjb21wb25lbnQgaW5zdGFuY2UuXG4gIHZhciBrZXlVbmlxdWUgPSBjaGlsZEluc3RhbmNlc1tuYW1lXSA9PT0gdW5kZWZpbmVkO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGtleVVuaXF1ZSwgJ2ZsYXR0ZW5DaGlsZHJlbiguLi4pOiBFbmNvdW50ZXJlZCB0d28gY2hpbGRyZW4gd2l0aCB0aGUgc2FtZSBrZXksICcgKyAnYCVzYC4gQ2hpbGQga2V5cyBtdXN0IGJlIHVuaXF1ZTsgd2hlbiB0d28gY2hpbGRyZW4gc2hhcmUgYSBrZXksIG9ubHkgJyArICd0aGUgZmlyc3QgY2hpbGQgd2lsbCBiZSB1c2VkLicsIG5hbWUpIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmIChjaGlsZCAhPSBudWxsICYmIGtleVVuaXF1ZSkge1xuICAgIGNoaWxkSW5zdGFuY2VzW25hbWVdID0gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChjaGlsZCwgbnVsbCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZWFjdENoaWxkUmVjb25jaWxlciBwcm92aWRlcyBoZWxwZXJzIGZvciBpbml0aWFsaXppbmcgb3IgdXBkYXRpbmcgYSBzZXQgb2ZcbiAqIGNoaWxkcmVuLiBJdHMgb3V0cHV0IGlzIHN1aXRhYmxlIGZvciBwYXNzaW5nIGl0IG9udG8gUmVhY3RNdWx0aUNoaWxkIHdoaWNoXG4gKiBkb2VzIGRpZmZlZCByZW9yZGVyaW5nIGFuZCBpbnNlcnRpb24uXG4gKi9cbnZhciBSZWFjdENoaWxkUmVjb25jaWxlciA9IHtcbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIFwibW91bnQgaW1hZ2VcIiBmb3IgZWFjaCBvZiB0aGUgc3VwcGxpZWQgY2hpbGRyZW4uIEluIHRoZSBjYXNlXG4gICAqIG9mIGBSZWFjdERPTUNvbXBvbmVudGAsIGEgbW91bnQgaW1hZ2UgaXMgYSBzdHJpbmcgb2YgbWFya3VwLlxuICAgKlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5lc3RlZENoaWxkTm9kZXMgTmVzdGVkIGNoaWxkIG1hcHMuXG4gICAqIEByZXR1cm4gez9vYmplY3R9IEEgc2V0IG9mIGNoaWxkIGluc3RhbmNlcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBpbnN0YW50aWF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAobmVzdGVkQ2hpbGROb2RlcywgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICBpZiAobmVzdGVkQ2hpbGROb2RlcyA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIGNoaWxkSW5zdGFuY2VzID0ge307XG4gICAgdHJhdmVyc2VBbGxDaGlsZHJlbihuZXN0ZWRDaGlsZE5vZGVzLCBpbnN0YW50aWF0ZUNoaWxkLCBjaGlsZEluc3RhbmNlcyk7XG4gICAgcmV0dXJuIGNoaWxkSW5zdGFuY2VzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSByZW5kZXJlZCBjaGlsZHJlbiBhbmQgcmV0dXJucyBhIG5ldyBzZXQgb2YgY2hpbGRyZW4uXG4gICAqXG4gICAqIEBwYXJhbSB7P29iamVjdH0gcHJldkNoaWxkcmVuIFByZXZpb3VzbHkgaW5pdGlhbGl6ZWQgc2V0IG9mIGNoaWxkcmVuLlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDaGlsZHJlbiBGbGF0IGNoaWxkIGVsZW1lbnQgbWFwcy5cbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBBIG5ldyBzZXQgb2YgY2hpbGQgaW5zdGFuY2VzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHVwZGF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAocHJldkNoaWxkcmVuLCBuZXh0Q2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgLy8gV2UgY3VycmVudGx5IGRvbid0IGhhdmUgYSB3YXkgdG8gdHJhY2sgbW92ZXMgaGVyZSBidXQgaWYgd2UgdXNlIGl0ZXJhdG9yc1xuICAgIC8vIGluc3RlYWQgb2YgZm9yLi5pbiB3ZSBjYW4gemlwIHRoZSBpdGVyYXRvcnMgYW5kIGNoZWNrIGlmIGFuIGl0ZW0gaGFzXG4gICAgLy8gbW92ZWQuXG4gICAgLy8gVE9ETzogSWYgbm90aGluZyBoYXMgY2hhbmdlZCwgcmV0dXJuIHRoZSBwcmV2Q2hpbGRyZW4gb2JqZWN0IHNvIHRoYXQgd2VcbiAgICAvLyBjYW4gcXVpY2tseSBiYWlsb3V0IGlmIG5vdGhpbmcgaGFzIGNoYW5nZWQuXG4gICAgaWYgKCFuZXh0Q2hpbGRyZW4gJiYgIXByZXZDaGlsZHJlbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHZhciBuYW1lO1xuICAgIGZvciAobmFtZSBpbiBuZXh0Q2hpbGRyZW4pIHtcbiAgICAgIGlmICghbmV4dENoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIHByZXZDaGlsZCA9IHByZXZDaGlsZHJlbiAmJiBwcmV2Q2hpbGRyZW5bbmFtZV07XG4gICAgICB2YXIgcHJldkVsZW1lbnQgPSBwcmV2Q2hpbGQgJiYgcHJldkNoaWxkLl9jdXJyZW50RWxlbWVudDtcbiAgICAgIHZhciBuZXh0RWxlbWVudCA9IG5leHRDaGlsZHJlbltuYW1lXTtcbiAgICAgIGlmIChwcmV2Q2hpbGQgIT0gbnVsbCAmJiBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudChwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQpKSB7XG4gICAgICAgIFJlYWN0UmVjb25jaWxlci5yZWNlaXZlQ29tcG9uZW50KHByZXZDaGlsZCwgbmV4dEVsZW1lbnQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgbmV4dENoaWxkcmVuW25hbWVdID0gcHJldkNoaWxkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHByZXZDaGlsZCkge1xuICAgICAgICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHByZXZDaGlsZCwgbmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIGNoaWxkIG11c3QgYmUgaW5zdGFudGlhdGVkIGJlZm9yZSBpdCdzIG1vdW50ZWQuXG4gICAgICAgIHZhciBuZXh0Q2hpbGRJbnN0YW5jZSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQobmV4dEVsZW1lbnQsIG51bGwpO1xuICAgICAgICBuZXh0Q2hpbGRyZW5bbmFtZV0gPSBuZXh0Q2hpbGRJbnN0YW5jZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gVW5tb3VudCBjaGlsZHJlbiB0aGF0IGFyZSBubyBsb25nZXIgcHJlc2VudC5cbiAgICBmb3IgKG5hbWUgaW4gcHJldkNoaWxkcmVuKSB7XG4gICAgICBpZiAocHJldkNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpICYmICEobmV4dENoaWxkcmVuICYmIG5leHRDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkpIHtcbiAgICAgICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQocHJldkNoaWxkcmVuW25hbWVdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5leHRDaGlsZHJlbjtcbiAgfSxcblxuICAvKipcbiAgICogVW5tb3VudHMgYWxsIHJlbmRlcmVkIGNoaWxkcmVuLiBUaGlzIHNob3VsZCBiZSB1c2VkIHRvIGNsZWFuIHVwIGNoaWxkcmVuXG4gICAqIHdoZW4gdGhpcyBjb21wb25lbnQgaXMgdW5tb3VudGVkLlxuICAgKlxuICAgKiBAcGFyYW0gez9vYmplY3R9IHJlbmRlcmVkQ2hpbGRyZW4gUHJldmlvdXNseSBpbml0aWFsaXplZCBzZXQgb2YgY2hpbGRyZW4uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdW5tb3VudENoaWxkcmVuOiBmdW5jdGlvbiAocmVuZGVyZWRDaGlsZHJlbikge1xuICAgIGZvciAodmFyIG5hbWUgaW4gcmVuZGVyZWRDaGlsZHJlbikge1xuICAgICAgaWYgKHJlbmRlcmVkQ2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgdmFyIHJlbmRlcmVkQ2hpbGQgPSByZW5kZXJlZENoaWxkcmVuW25hbWVdO1xuICAgICAgICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudChyZW5kZXJlZENoaWxkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENoaWxkUmVjb25jaWxlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDaGlsZHJlblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIHRyYXZlcnNlQWxsQ2hpbGRyZW4gPSByZXF1aXJlKCcuL3RyYXZlcnNlQWxsQ2hpbGRyZW4nKTtcblxudmFyIHR3b0FyZ3VtZW50UG9vbGVyID0gUG9vbGVkQ2xhc3MudHdvQXJndW1lbnRQb29sZXI7XG52YXIgZm91ckFyZ3VtZW50UG9vbGVyID0gUG9vbGVkQ2xhc3MuZm91ckFyZ3VtZW50UG9vbGVyO1xuXG52YXIgdXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXggPSAvXFwvKD8hXFwvKS9nO1xuZnVuY3Rpb24gZXNjYXBlVXNlclByb3ZpZGVkS2V5KHRleHQpIHtcbiAgcmV0dXJuICgnJyArIHRleHQpLnJlcGxhY2UodXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXgsICcvLycpO1xufVxuXG4vKipcbiAqIFBvb2xlZENsYXNzIHJlcHJlc2VudGluZyB0aGUgYm9va2tlZXBpbmcgYXNzb2NpYXRlZCB3aXRoIHBlcmZvcm1pbmcgYSBjaGlsZFxuICogdHJhdmVyc2FsLiBBbGxvd3MgYXZvaWRpbmcgYmluZGluZyBjYWxsYmFja3MuXG4gKlxuICogQGNvbnN0cnVjdG9yIEZvckVhY2hCb29rS2VlcGluZ1xuICogQHBhcmFtIHshZnVuY3Rpb259IGZvckVhY2hGdW5jdGlvbiBGdW5jdGlvbiB0byBwZXJmb3JtIHRyYXZlcnNhbCB3aXRoLlxuICogQHBhcmFtIHs/Kn0gZm9yRWFjaENvbnRleHQgQ29udGV4dCB0byBwZXJmb3JtIGNvbnRleHQgd2l0aC5cbiAqL1xuZnVuY3Rpb24gRm9yRWFjaEJvb2tLZWVwaW5nKGZvckVhY2hGdW5jdGlvbiwgZm9yRWFjaENvbnRleHQpIHtcbiAgdGhpcy5mdW5jID0gZm9yRWFjaEZ1bmN0aW9uO1xuICB0aGlzLmNvbnRleHQgPSBmb3JFYWNoQ29udGV4dDtcbiAgdGhpcy5jb3VudCA9IDA7XG59XG5Gb3JFYWNoQm9va0tlZXBpbmcucHJvdG90eXBlLmRlc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZnVuYyA9IG51bGw7XG4gIHRoaXMuY29udGV4dCA9IG51bGw7XG4gIHRoaXMuY291bnQgPSAwO1xufTtcblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhGb3JFYWNoQm9va0tlZXBpbmcsIHR3b0FyZ3VtZW50UG9vbGVyKTtcblxuZnVuY3Rpb24gZm9yRWFjaFNpbmdsZUNoaWxkKGJvb2tLZWVwaW5nLCBjaGlsZCwgbmFtZSkge1xuICB2YXIgZnVuYyA9IGJvb2tLZWVwaW5nLmZ1bmM7XG4gIHZhciBjb250ZXh0ID0gYm9va0tlZXBpbmcuY29udGV4dDtcblxuICBmdW5jLmNhbGwoY29udGV4dCwgY2hpbGQsIGJvb2tLZWVwaW5nLmNvdW50KyspO1xufVxuXG4vKipcbiAqIEl0ZXJhdGVzIHRocm91Z2ggY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLlxuICpcbiAqIFRoZSBwcm92aWRlZCBmb3JFYWNoRnVuYyhjaGlsZCwgaW5kZXgpIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoXG4gKiBsZWFmIGNoaWxkLlxuICpcbiAqIEBwYXJhbSB7Pyp9IGNoaWxkcmVuIENoaWxkcmVuIHRyZWUgY29udGFpbmVyLlxuICogQHBhcmFtIHtmdW5jdGlvbigqLCBpbnQpfSBmb3JFYWNoRnVuY1xuICogQHBhcmFtIHsqfSBmb3JFYWNoQ29udGV4dCBDb250ZXh0IGZvciBmb3JFYWNoQ29udGV4dC5cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaENoaWxkcmVuKGNoaWxkcmVuLCBmb3JFYWNoRnVuYywgZm9yRWFjaENvbnRleHQpIHtcbiAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cbiAgdmFyIHRyYXZlcnNlQ29udGV4dCA9IEZvckVhY2hCb29rS2VlcGluZy5nZXRQb29sZWQoZm9yRWFjaEZ1bmMsIGZvckVhY2hDb250ZXh0KTtcbiAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgZm9yRWFjaFNpbmdsZUNoaWxkLCB0cmF2ZXJzZUNvbnRleHQpO1xuICBGb3JFYWNoQm9va0tlZXBpbmcucmVsZWFzZSh0cmF2ZXJzZUNvbnRleHQpO1xufVxuXG4vKipcbiAqIFBvb2xlZENsYXNzIHJlcHJlc2VudGluZyB0aGUgYm9va2tlZXBpbmcgYXNzb2NpYXRlZCB3aXRoIHBlcmZvcm1pbmcgYSBjaGlsZFxuICogbWFwcGluZy4gQWxsb3dzIGF2b2lkaW5nIGJpbmRpbmcgY2FsbGJhY2tzLlxuICpcbiAqIEBjb25zdHJ1Y3RvciBNYXBCb29rS2VlcGluZ1xuICogQHBhcmFtIHshKn0gbWFwUmVzdWx0IE9iamVjdCBjb250YWluaW5nIHRoZSBvcmRlcmVkIG1hcCBvZiByZXN1bHRzLlxuICogQHBhcmFtIHshZnVuY3Rpb259IG1hcEZ1bmN0aW9uIEZ1bmN0aW9uIHRvIHBlcmZvcm0gbWFwcGluZyB3aXRoLlxuICogQHBhcmFtIHs/Kn0gbWFwQ29udGV4dCBDb250ZXh0IHRvIHBlcmZvcm0gbWFwcGluZyB3aXRoLlxuICovXG5mdW5jdGlvbiBNYXBCb29rS2VlcGluZyhtYXBSZXN1bHQsIGtleVByZWZpeCwgbWFwRnVuY3Rpb24sIG1hcENvbnRleHQpIHtcbiAgdGhpcy5yZXN1bHQgPSBtYXBSZXN1bHQ7XG4gIHRoaXMua2V5UHJlZml4ID0ga2V5UHJlZml4O1xuICB0aGlzLmZ1bmMgPSBtYXBGdW5jdGlvbjtcbiAgdGhpcy5jb250ZXh0ID0gbWFwQ29udGV4dDtcbiAgdGhpcy5jb3VudCA9IDA7XG59XG5NYXBCb29rS2VlcGluZy5wcm90b3R5cGUuZGVzdHJ1Y3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5yZXN1bHQgPSBudWxsO1xuICB0aGlzLmtleVByZWZpeCA9IG51bGw7XG4gIHRoaXMuZnVuYyA9IG51bGw7XG4gIHRoaXMuY29udGV4dCA9IG51bGw7XG4gIHRoaXMuY291bnQgPSAwO1xufTtcblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhNYXBCb29rS2VlcGluZywgZm91ckFyZ3VtZW50UG9vbGVyKTtcblxuZnVuY3Rpb24gbWFwU2luZ2xlQ2hpbGRJbnRvQ29udGV4dChib29rS2VlcGluZywgY2hpbGQsIGNoaWxkS2V5KSB7XG4gIHZhciByZXN1bHQgPSBib29rS2VlcGluZy5yZXN1bHQ7XG4gIHZhciBrZXlQcmVmaXggPSBib29rS2VlcGluZy5rZXlQcmVmaXg7XG4gIHZhciBmdW5jID0gYm9va0tlZXBpbmcuZnVuYztcbiAgdmFyIGNvbnRleHQgPSBib29rS2VlcGluZy5jb250ZXh0O1xuXG4gIHZhciBtYXBwZWRDaGlsZCA9IGZ1bmMuY2FsbChjb250ZXh0LCBjaGlsZCwgYm9va0tlZXBpbmcuY291bnQrKyk7XG4gIGlmIChBcnJheS5pc0FycmF5KG1hcHBlZENoaWxkKSkge1xuICAgIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwobWFwcGVkQ2hpbGQsIHJlc3VsdCwgY2hpbGRLZXksIGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNBcmd1bWVudCk7XG4gIH0gZWxzZSBpZiAobWFwcGVkQ2hpbGQgIT0gbnVsbCkge1xuICAgIGlmIChSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQobWFwcGVkQ2hpbGQpKSB7XG4gICAgICBtYXBwZWRDaGlsZCA9IFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VLZXkobWFwcGVkQ2hpbGQsXG4gICAgICAvLyBLZWVwIGJvdGggdGhlIChtYXBwZWQpIGFuZCBvbGQga2V5cyBpZiB0aGV5IGRpZmZlciwganVzdCBhc1xuICAgICAgLy8gdHJhdmVyc2VBbGxDaGlsZHJlbiB1c2VkIHRvIGRvIGZvciBvYmplY3RzIGFzIGNoaWxkcmVuXG4gICAgICBrZXlQcmVmaXggKyAobWFwcGVkQ2hpbGQgIT09IGNoaWxkID8gZXNjYXBlVXNlclByb3ZpZGVkS2V5KG1hcHBlZENoaWxkLmtleSB8fCAnJykgKyAnLycgOiAnJykgKyBjaGlsZEtleSk7XG4gICAgfVxuICAgIHJlc3VsdC5wdXNoKG1hcHBlZENoaWxkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsKGNoaWxkcmVuLCBhcnJheSwgcHJlZml4LCBmdW5jLCBjb250ZXh0KSB7XG4gIHZhciBlc2NhcGVkUHJlZml4ID0gJyc7XG4gIGlmIChwcmVmaXggIT0gbnVsbCkge1xuICAgIGVzY2FwZWRQcmVmaXggPSBlc2NhcGVVc2VyUHJvdmlkZWRLZXkocHJlZml4KSArICcvJztcbiAgfVxuICB2YXIgdHJhdmVyc2VDb250ZXh0ID0gTWFwQm9va0tlZXBpbmcuZ2V0UG9vbGVkKGFycmF5LCBlc2NhcGVkUHJlZml4LCBmdW5jLCBjb250ZXh0KTtcbiAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgbWFwU2luZ2xlQ2hpbGRJbnRvQ29udGV4dCwgdHJhdmVyc2VDb250ZXh0KTtcbiAgTWFwQm9va0tlZXBpbmcucmVsZWFzZSh0cmF2ZXJzZUNvbnRleHQpO1xufVxuXG4vKipcbiAqIE1hcHMgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLlxuICpcbiAqIFRoZSBwcm92aWRlZCBtYXBGdW5jdGlvbihjaGlsZCwga2V5LCBpbmRleCkgd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2hcbiAqIGxlYWYgY2hpbGQuXG4gKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCosIGludCl9IGZ1bmMgVGhlIG1hcCBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBDb250ZXh0IGZvciBtYXBGdW5jdGlvbi5cbiAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIG9yZGVyZWQgbWFwIG9mIHJlc3VsdHMuXG4gKi9cbmZ1bmN0aW9uIG1hcENoaWxkcmVuKGNoaWxkcmVuLCBmdW5jLCBjb250ZXh0KSB7XG4gIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbChjaGlsZHJlbiwgcmVzdWx0LCBudWxsLCBmdW5jLCBjb250ZXh0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZm9yRWFjaFNpbmdsZUNoaWxkRHVtbXkodHJhdmVyc2VDb250ZXh0LCBjaGlsZCwgbmFtZSkge1xuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBDb3VudCB0aGUgbnVtYmVyIG9mIGNoaWxkcmVuIHRoYXQgYXJlIHR5cGljYWxseSBzcGVjaWZpZWQgYXNcbiAqIGBwcm9wcy5jaGlsZHJlbmAuXG4gKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgY2hpbGRyZW4uXG4gKi9cbmZ1bmN0aW9uIGNvdW50Q2hpbGRyZW4oY2hpbGRyZW4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIHRyYXZlcnNlQWxsQ2hpbGRyZW4oY2hpbGRyZW4sIGZvckVhY2hTaW5nbGVDaGlsZER1bW15LCBudWxsKTtcbn1cblxuLyoqXG4gKiBGbGF0dGVuIGEgY2hpbGRyZW4gb2JqZWN0ICh0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmApIGFuZFxuICogcmV0dXJuIGFuIGFycmF5IHdpdGggYXBwcm9wcmlhdGVseSByZS1rZXllZCBjaGlsZHJlbi5cbiAqL1xuZnVuY3Rpb24gdG9BcnJheShjaGlsZHJlbikge1xuICB2YXIgcmVzdWx0ID0gW107XG4gIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwoY2hpbGRyZW4sIHJlc3VsdCwgbnVsbCwgZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0FyZ3VtZW50KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIFJlYWN0Q2hpbGRyZW4gPSB7XG4gIGZvckVhY2g6IGZvckVhY2hDaGlsZHJlbixcbiAgbWFwOiBtYXBDaGlsZHJlbixcbiAgbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbDogbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbCxcbiAgY291bnQ6IGNvdW50Q2hpbGRyZW4sXG4gIHRvQXJyYXk6IHRvQXJyYXlcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDaGlsZHJlbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDbGFzc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvbmVudCcpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9ucycpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcycpO1xudmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdE5vb3BVcGRhdGVRdWV1ZScpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eU9iamVjdCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIGtleU1pcnJvciA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU1pcnJvcicpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgTUlYSU5TX0tFWSA9IGtleU9mKHsgbWl4aW5zOiBudWxsIH0pO1xuXG4vKipcbiAqIFBvbGljaWVzIHRoYXQgZGVzY3JpYmUgbWV0aG9kcyBpbiBgUmVhY3RDbGFzc0ludGVyZmFjZWAuXG4gKi9cbnZhciBTcGVjUG9saWN5ID0ga2V5TWlycm9yKHtcbiAgLyoqXG4gICAqIFRoZXNlIG1ldGhvZHMgbWF5IGJlIGRlZmluZWQgb25seSBvbmNlIGJ5IHRoZSBjbGFzcyBzcGVjaWZpY2F0aW9uIG9yIG1peGluLlxuICAgKi9cbiAgREVGSU5FX09OQ0U6IG51bGwsXG4gIC8qKlxuICAgKiBUaGVzZSBtZXRob2RzIG1heSBiZSBkZWZpbmVkIGJ5IGJvdGggdGhlIGNsYXNzIHNwZWNpZmljYXRpb24gYW5kIG1peGlucy5cbiAgICogU3Vic2VxdWVudCBkZWZpbml0aW9ucyB3aWxsIGJlIGNoYWluZWQuIFRoZXNlIG1ldGhvZHMgbXVzdCByZXR1cm4gdm9pZC5cbiAgICovXG4gIERFRklORV9NQU5ZOiBudWxsLFxuICAvKipcbiAgICogVGhlc2UgbWV0aG9kcyBhcmUgb3ZlcnJpZGluZyB0aGUgYmFzZSBjbGFzcy5cbiAgICovXG4gIE9WRVJSSURFX0JBU0U6IG51bGwsXG4gIC8qKlxuICAgKiBUaGVzZSBtZXRob2RzIGFyZSBzaW1pbGFyIHRvIERFRklORV9NQU5ZLCBleGNlcHQgd2UgYXNzdW1lIHRoZXkgcmV0dXJuXG4gICAqIG9iamVjdHMuIFdlIHRyeSB0byBtZXJnZSB0aGUga2V5cyBvZiB0aGUgcmV0dXJuIHZhbHVlcyBvZiBhbGwgdGhlIG1peGVkIGluXG4gICAqIGZ1bmN0aW9ucy4gSWYgdGhlcmUgaXMgYSBrZXkgY29uZmxpY3Qgd2UgdGhyb3cuXG4gICAqL1xuICBERUZJTkVfTUFOWV9NRVJHRUQ6IG51bGxcbn0pO1xuXG52YXIgaW5qZWN0ZWRNaXhpbnMgPSBbXTtcblxudmFyIHdhcm5lZFNldFByb3BzID0gZmFsc2U7XG5mdW5jdGlvbiB3YXJuU2V0UHJvcHMoKSB7XG4gIGlmICghd2FybmVkU2V0UHJvcHMpIHtcbiAgICB3YXJuZWRTZXRQcm9wcyA9IHRydWU7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdzZXRQcm9wcyguLi4pIGFuZCByZXBsYWNlUHJvcHMoLi4uKSBhcmUgZGVwcmVjYXRlZC4gJyArICdJbnN0ZWFkLCBjYWxsIHJlbmRlciBhZ2FpbiBhdCB0aGUgdG9wIGxldmVsLicpIDogdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogQ29tcG9zaXRlIGNvbXBvbmVudHMgYXJlIGhpZ2hlci1sZXZlbCBjb21wb25lbnRzIHRoYXQgY29tcG9zZSBvdGhlciBjb21wb3NpdGVcbiAqIG9yIG5hdGl2ZSBjb21wb25lbnRzLlxuICpcbiAqIFRvIGNyZWF0ZSBhIG5ldyB0eXBlIG9mIGBSZWFjdENsYXNzYCwgcGFzcyBhIHNwZWNpZmljYXRpb24gb2ZcbiAqIHlvdXIgbmV3IGNsYXNzIHRvIGBSZWFjdC5jcmVhdGVDbGFzc2AuIFRoZSBvbmx5IHJlcXVpcmVtZW50IG9mIHlvdXIgY2xhc3NcbiAqIHNwZWNpZmljYXRpb24gaXMgdGhhdCB5b3UgaW1wbGVtZW50IGEgYHJlbmRlcmAgbWV0aG9kLlxuICpcbiAqICAgdmFyIE15Q29tcG9uZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICByZXR1cm4gPGRpdj5IZWxsbyBXb3JsZDwvZGl2PjtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFRoZSBjbGFzcyBzcGVjaWZpY2F0aW9uIHN1cHBvcnRzIGEgc3BlY2lmaWMgcHJvdG9jb2wgb2YgbWV0aG9kcyB0aGF0IGhhdmVcbiAqIHNwZWNpYWwgbWVhbmluZyAoZS5nLiBgcmVuZGVyYCkuIFNlZSBgUmVhY3RDbGFzc0ludGVyZmFjZWAgZm9yXG4gKiBtb3JlIHRoZSBjb21wcmVoZW5zaXZlIHByb3RvY29sLiBBbnkgb3RoZXIgcHJvcGVydGllcyBhbmQgbWV0aG9kcyBpbiB0aGVcbiAqIGNsYXNzIHNwZWNpZmljYXRpb24gd2lsbCBiZSBhdmFpbGFibGUgb24gdGhlIHByb3RvdHlwZS5cbiAqXG4gKiBAaW50ZXJmYWNlIFJlYWN0Q2xhc3NJbnRlcmZhY2VcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RDbGFzc0ludGVyZmFjZSA9IHtcblxuICAvKipcbiAgICogQW4gYXJyYXkgb2YgTWl4aW4gb2JqZWN0cyB0byBpbmNsdWRlIHdoZW4gZGVmaW5pbmcgeW91ciBjb21wb25lbnQuXG4gICAqXG4gICAqIEB0eXBlIHthcnJheX1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBtaXhpbnM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBjb250YWluaW5nIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMgdGhhdCBzaG91bGQgYmUgZGVmaW5lZCBvblxuICAgKiB0aGUgY29tcG9uZW50J3MgY29uc3RydWN0b3IgaW5zdGVhZCBvZiBpdHMgcHJvdG90eXBlIChzdGF0aWMgbWV0aG9kcykuXG4gICAqXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgc3RhdGljczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogRGVmaW5pdGlvbiBvZiBwcm9wIHR5cGVzIGZvciB0aGlzIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHR5cGUge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBwcm9wVHlwZXM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIERlZmluaXRpb24gb2YgY29udGV4dCB0eXBlcyBmb3IgdGhpcyBjb21wb25lbnQuXG4gICAqXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY29udGV4dFR5cGVzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBEZWZpbml0aW9uIG9mIGNvbnRleHQgdHlwZXMgdGhpcyBjb21wb25lbnQgc2V0cyBmb3IgaXRzIGNoaWxkcmVuLlxuICAgKlxuICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNoaWxkQ29udGV4dFR5cGVzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8vID09PT0gRGVmaW5pdGlvbiBtZXRob2RzID09PT1cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZC4gVmFsdWVzIGluIHRoZSBtYXBwaW5nIHdpbGwgYmUgc2V0IG9uXG4gICAqIGB0aGlzLnByb3BzYCBpZiB0aGF0IHByb3AgaXMgbm90IHNwZWNpZmllZCAoaS5lLiB1c2luZyBhbiBgaW5gIGNoZWNrKS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgaW52b2tlZCBiZWZvcmUgYGdldEluaXRpYWxTdGF0ZWAgYW5kIHRoZXJlZm9yZSBjYW5ub3QgcmVseVxuICAgKiBvbiBgdGhpcy5zdGF0ZWAgb3IgdXNlIGB0aGlzLnNldFN0YXRlYC5cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGdldERlZmF1bHRQcm9wczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQsXG5cbiAgLyoqXG4gICAqIEludm9rZWQgb25jZSBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkLiBUaGUgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZFxuICAgKiBhcyB0aGUgaW5pdGlhbCB2YWx1ZSBvZiBgdGhpcy5zdGF0ZWAuXG4gICAqXG4gICAqICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICogICAgIHJldHVybiB7XG4gICAqICAgICAgIGlzT246IGZhbHNlLFxuICAgKiAgICAgICBmb29CYXo6IG5ldyBCYXpGb28oKVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGdldEluaXRpYWxTdGF0ZTogU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQsXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBnZXRDaGlsZENvbnRleHQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VELFxuXG4gIC8qKlxuICAgKiBVc2VzIHByb3BzIGZyb20gYHRoaXMucHJvcHNgIGFuZCBzdGF0ZSBmcm9tIGB0aGlzLnN0YXRlYCB0byByZW5kZXIgdGhlXG4gICAqIHN0cnVjdHVyZSBvZiB0aGUgY29tcG9uZW50LlxuICAgKlxuICAgKiBObyBndWFyYW50ZWVzIGFyZSBtYWRlIGFib3V0IHdoZW4gb3IgaG93IG9mdGVuIHRoaXMgbWV0aG9kIGlzIGludm9rZWQsIHNvXG4gICAqIGl0IG11c3Qgbm90IGhhdmUgc2lkZSBlZmZlY3RzLlxuICAgKlxuICAgKiAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAqICAgICB2YXIgbmFtZSA9IHRoaXMucHJvcHMubmFtZTtcbiAgICogICAgIHJldHVybiA8ZGl2PkhlbGxvLCB7bmFtZX0hPC9kaXY+O1xuICAgKiAgIH1cbiAgICpcbiAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9XG4gICAqIEBub3NpZGVlZmZlY3RzXG4gICAqIEByZXF1aXJlZFxuICAgKi9cbiAgcmVuZGVyOiBTcGVjUG9saWN5LkRFRklORV9PTkNFLFxuXG4gIC8vID09PT0gRGVsZWdhdGUgbWV0aG9kcyA9PT09XG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGluaXRpYWxseSBjcmVhdGVkIGFuZCBhYm91dCB0byBiZSBtb3VudGVkLlxuICAgKiBUaGlzIG1heSBoYXZlIHNpZGUgZWZmZWN0cywgYnV0IGFueSBleHRlcm5hbCBzdWJzY3JpcHRpb25zIG9yIGRhdGEgY3JlYXRlZFxuICAgKiBieSB0aGlzIG1ldGhvZCBtdXN0IGJlIGNsZWFuZWQgdXAgaW4gYGNvbXBvbmVudFdpbGxVbm1vdW50YC5cbiAgICpcbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnRXaWxsTW91bnQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGhhcyBiZWVuIG1vdW50ZWQgYW5kIGhhcyBhIERPTSByZXByZXNlbnRhdGlvbi5cbiAgICogSG93ZXZlciwgdGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgdGhlIERPTSBub2RlIGlzIGluIHRoZSBkb2N1bWVudC5cbiAgICpcbiAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gb3BlcmF0ZSBvbiB0aGUgRE9NIHdoZW4gdGhlIGNvbXBvbmVudCBoYXNcbiAgICogYmVlbiBtb3VudGVkIChpbml0aWFsaXplZCBhbmQgcmVuZGVyZWQpIGZvciB0aGUgZmlyc3QgdGltZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSByb290Tm9kZSBET00gZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIGNvbXBvbmVudC5cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnREaWRNb3VudDogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogSW52b2tlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCByZWNlaXZlcyBuZXcgcHJvcHMuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIHJlYWN0IHRvIGEgcHJvcCB0cmFuc2l0aW9uIGJ5IHVwZGF0aW5nIHRoZVxuICAgKiBzdGF0ZSB1c2luZyBgdGhpcy5zZXRTdGF0ZWAuIEN1cnJlbnQgcHJvcHMgYXJlIGFjY2Vzc2VkIHZpYSBgdGhpcy5wcm9wc2AuXG4gICAqXG4gICAqICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24obmV4dFByb3BzLCBuZXh0Q29udGV4dCkge1xuICAgKiAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAqICAgICAgIGxpa2VzSW5jcmVhc2luZzogbmV4dFByb3BzLmxpa2VDb3VudCA+IHRoaXMucHJvcHMubGlrZUNvdW50XG4gICAqICAgICB9KTtcbiAgICogICB9XG4gICAqXG4gICAqIE5PVEU6IFRoZXJlIGlzIG5vIGVxdWl2YWxlbnQgYGNvbXBvbmVudFdpbGxSZWNlaXZlU3RhdGVgLiBBbiBpbmNvbWluZyBwcm9wXG4gICAqIHRyYW5zaXRpb24gbWF5IGNhdXNlIGEgc3RhdGUgY2hhbmdlLCBidXQgdGhlIG9wcG9zaXRlIGlzIG5vdCB0cnVlLiBJZiB5b3VcbiAgICogbmVlZCBpdCwgeW91IGFyZSBwcm9iYWJseSBsb29raW5nIGZvciBgY29tcG9uZW50V2lsbFVwZGF0ZWAuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoaWxlIGRlY2lkaW5nIGlmIHRoZSBjb21wb25lbnQgc2hvdWxkIGJlIHVwZGF0ZWQgYXMgYSByZXN1bHQgb2ZcbiAgICogcmVjZWl2aW5nIG5ldyBwcm9wcywgc3RhdGUgYW5kL29yIGNvbnRleHQuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIGByZXR1cm4gZmFsc2VgIHdoZW4geW91J3JlIGNlcnRhaW4gdGhhdCB0aGVcbiAgICogdHJhbnNpdGlvbiB0byB0aGUgbmV3IHByb3BzL3N0YXRlL2NvbnRleHQgd2lsbCBub3QgcmVxdWlyZSBhIGNvbXBvbmVudFxuICAgKiB1cGRhdGUuXG4gICAqXG4gICAqICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBmdW5jdGlvbihuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpIHtcbiAgICogICAgIHJldHVybiAhZXF1YWwobmV4dFByb3BzLCB0aGlzLnByb3BzKSB8fFxuICAgKiAgICAgICAhZXF1YWwobmV4dFN0YXRlLCB0aGlzLnN0YXRlKSB8fFxuICAgKiAgICAgICAhZXF1YWwobmV4dENvbnRleHQsIHRoaXMuY29udGV4dCk7XG4gICAqICAgfVxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dFN0YXRlXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dENvbnRleHRcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY29tcG9uZW50IHNob3VsZCB1cGRhdGUuXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBTcGVjUG9saWN5LkRFRklORV9PTkNFLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhYm91dCB0byB1cGRhdGUgZHVlIHRvIGEgdHJhbnNpdGlvbiBmcm9tXG4gICAqIGB0aGlzLnByb3BzYCwgYHRoaXMuc3RhdGVgIGFuZCBgdGhpcy5jb250ZXh0YCB0byBgbmV4dFByb3BzYCwgYG5leHRTdGF0ZWBcbiAgICogYW5kIGBuZXh0Q29udGV4dGAuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIHBlcmZvcm0gcHJlcGFyYXRpb24gYmVmb3JlIGFuIHVwZGF0ZSBvY2N1cnMuXG4gICAqXG4gICAqIE5PVEU6IFlvdSAqKmNhbm5vdCoqIHVzZSBgdGhpcy5zZXRTdGF0ZSgpYCBpbiB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG5leHRQcm9wc1xuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRTdGF0ZVxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDb250ZXh0XG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnRXaWxsVXBkYXRlOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCdzIERPTSByZXByZXNlbnRhdGlvbiBoYXMgYmVlbiB1cGRhdGVkLlxuICAgKlxuICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBvcGVyYXRlIG9uIHRoZSBET00gd2hlbiB0aGUgY29tcG9uZW50IGhhc1xuICAgKiBiZWVuIHVwZGF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcmV2UHJvcHNcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2U3RhdGVcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2Q29udGV4dFxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHJvb3ROb2RlIERPTSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgY29tcG9uZW50LlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZCBmcm9tIGl0cyBwYXJlbnQgYW5kIGhhdmVcbiAgICogaXRzIERPTSByZXByZXNlbnRhdGlvbiBkZXN0cm95ZWQuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIGRlYWxsb2NhdGUgYW55IGV4dGVybmFsIHJlc291cmNlcy5cbiAgICpcbiAgICogTk9URTogVGhlcmUgaXMgbm8gYGNvbXBvbmVudERpZFVubW91bnRgIHNpbmNlIHlvdXIgY29tcG9uZW50IHdpbGwgaGF2ZSBiZWVuXG4gICAqIGRlc3Ryb3llZCBieSB0aGF0IHBvaW50LlxuICAgKlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8vID09PT0gQWR2YW5jZWQgbWV0aG9kcyA9PT09XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNvbXBvbmVudCdzIGN1cnJlbnRseSBtb3VudGVkIERPTSByZXByZXNlbnRhdGlvbi5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhpcyBpbXBsZW1lbnRzIFJlYWN0J3MgcmVuZGVyaW5nIGFuZCByZWNvbmNpbGlhdGlvbiBhbGdvcml0aG0uXG4gICAqIFNvcGhpc3RpY2F0ZWQgY2xpZW50cyBtYXkgd2lzaCB0byBvdmVycmlkZSB0aGlzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAb3ZlcnJpZGFibGVcbiAgICovXG4gIHVwZGF0ZUNvbXBvbmVudDogU3BlY1BvbGljeS5PVkVSUklERV9CQVNFXG5cbn07XG5cbi8qKlxuICogTWFwcGluZyBmcm9tIGNsYXNzIHNwZWNpZmljYXRpb24ga2V5cyB0byBzcGVjaWFsIHByb2Nlc3NpbmcgZnVuY3Rpb25zLlxuICpcbiAqIEFsdGhvdWdoIHRoZXNlIGFyZSBkZWNsYXJlZCBsaWtlIGluc3RhbmNlIHByb3BlcnRpZXMgaW4gdGhlIHNwZWNpZmljYXRpb25cbiAqIHdoZW4gZGVmaW5pbmcgY2xhc3NlcyB1c2luZyBgUmVhY3QuY3JlYXRlQ2xhc3NgLCB0aGV5IGFyZSBhY3R1YWxseSBzdGF0aWNcbiAqIGFuZCBhcmUgYWNjZXNzaWJsZSBvbiB0aGUgY29uc3RydWN0b3IgaW5zdGVhZCBvZiB0aGUgcHJvdG90eXBlLiBEZXNwaXRlXG4gKiBiZWluZyBzdGF0aWMsIHRoZXkgbXVzdCBiZSBkZWZpbmVkIG91dHNpZGUgb2YgdGhlIFwic3RhdGljc1wiIGtleSB1bmRlclxuICogd2hpY2ggYWxsIG90aGVyIHN0YXRpYyBtZXRob2RzIGFyZSBkZWZpbmVkLlxuICovXG52YXIgUkVTRVJWRURfU1BFQ19LRVlTID0ge1xuICBkaXNwbGF5TmFtZTogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBkaXNwbGF5TmFtZSkge1xuICAgIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7XG4gIH0sXG4gIG1peGluczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBtaXhpbnMpIHtcbiAgICBpZiAobWl4aW5zKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1peGlucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3RvciwgbWl4aW5zW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGNoaWxkQ29udGV4dFR5cGVzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGNoaWxkQ29udGV4dFR5cGVzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgY2hpbGRDb250ZXh0VHlwZXMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY2hpbGRDb250ZXh0KTtcbiAgICB9XG4gICAgQ29uc3RydWN0b3IuY2hpbGRDb250ZXh0VHlwZXMgPSBhc3NpZ24oe30sIENvbnN0cnVjdG9yLmNoaWxkQ29udGV4dFR5cGVzLCBjaGlsZENvbnRleHRUeXBlcyk7XG4gIH0sXG4gIGNvbnRleHRUeXBlczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBjb250ZXh0VHlwZXMpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCBjb250ZXh0VHlwZXMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY29udGV4dCk7XG4gICAgfVxuICAgIENvbnN0cnVjdG9yLmNvbnRleHRUeXBlcyA9IGFzc2lnbih7fSwgQ29uc3RydWN0b3IuY29udGV4dFR5cGVzLCBjb250ZXh0VHlwZXMpO1xuICB9LFxuICAvKipcbiAgICogU3BlY2lhbCBjYXNlIGdldERlZmF1bHRQcm9wcyB3aGljaCBzaG91bGQgbW92ZSBpbnRvIHN0YXRpY3MgYnV0IHJlcXVpcmVzXG4gICAqIGF1dG9tYXRpYyBtZXJnaW5nLlxuICAgKi9cbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGdldERlZmF1bHRQcm9wcykge1xuICAgIGlmIChDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMpIHtcbiAgICAgIENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcyA9IGNyZWF0ZU1lcmdlZFJlc3VsdEZ1bmN0aW9uKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcywgZ2V0RGVmYXVsdFByb3BzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzID0gZ2V0RGVmYXVsdFByb3BzO1xuICAgIH1cbiAgfSxcbiAgcHJvcFR5cGVzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3BUeXBlcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YWxpZGF0ZVR5cGVEZWYoQ29uc3RydWN0b3IsIHByb3BUeXBlcywgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5wcm9wKTtcbiAgICB9XG4gICAgQ29uc3RydWN0b3IucHJvcFR5cGVzID0gYXNzaWduKHt9LCBDb25zdHJ1Y3Rvci5wcm9wVHlwZXMsIHByb3BUeXBlcyk7XG4gIH0sXG4gIHN0YXRpY3M6IGZ1bmN0aW9uIChDb25zdHJ1Y3Rvciwgc3RhdGljcykge1xuICAgIG1peFN0YXRpY1NwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzdGF0aWNzKTtcbiAgfSxcbiAgYXV0b2JpbmQ6IGZ1bmN0aW9uICgpIHt9IH07XG5cbi8vIG5vb3BcbmZ1bmN0aW9uIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgdHlwZURlZiwgbG9jYXRpb24pIHtcbiAgZm9yICh2YXIgcHJvcE5hbWUgaW4gdHlwZURlZikge1xuICAgIGlmICh0eXBlRGVmLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgLy8gdXNlIGEgd2FybmluZyBpbnN0ZWFkIG9mIGFuIGludmFyaWFudCBzbyBjb21wb25lbnRzXG4gICAgICAvLyBkb24ndCBzaG93IHVwIGluIHByb2QgYnV0IG5vdCBpbiBfX0RFVl9fXG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgdHlwZURlZltwcm9wTmFtZV0gPT09ICdmdW5jdGlvbicsICclczogJXMgdHlwZSBgJXNgIGlzIGludmFsaWQ7IGl0IG11c3QgYmUgYSBmdW5jdGlvbiwgdXN1YWxseSBmcm9tICcgKyAnUmVhY3QuUHJvcFR5cGVzLicsIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8ICdSZWFjdENsYXNzJywgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dLCBwcm9wTmFtZSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUocHJvdG8sIG5hbWUpIHtcbiAgdmFyIHNwZWNQb2xpY3kgPSBSZWFjdENsYXNzSW50ZXJmYWNlLmhhc093blByb3BlcnR5KG5hbWUpID8gUmVhY3RDbGFzc0ludGVyZmFjZVtuYW1lXSA6IG51bGw7XG5cbiAgLy8gRGlzYWxsb3cgb3ZlcnJpZGluZyBvZiBiYXNlIGNsYXNzIG1ldGhvZHMgdW5sZXNzIGV4cGxpY2l0bHkgYWxsb3dlZC5cbiAgaWYgKFJlYWN0Q2xhc3NNaXhpbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICEoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5PVkVSUklERV9CQVNFKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzSW50ZXJmYWNlOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gb3ZlcnJpZGUgJyArICdgJXNgIGZyb20geW91ciBjbGFzcyBzcGVjaWZpY2F0aW9uLiBFbnN1cmUgdGhhdCB5b3VyIG1ldGhvZCBuYW1lcyAnICsgJ2RvIG5vdCBvdmVybGFwIHdpdGggUmVhY3QgbWV0aG9kcy4nLCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH1cblxuICAvLyBEaXNhbGxvdyBkZWZpbmluZyBtZXRob2RzIG1vcmUgdGhhbiBvbmNlIHVubGVzcyBleHBsaWNpdGx5IGFsbG93ZWQuXG4gIGlmIChwcm90by5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICEoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWSB8fCBzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzc0ludGVyZmFjZTogWW91IGFyZSBhdHRlbXB0aW5nIHRvIGRlZmluZSAnICsgJ2Alc2Agb24geW91ciBjb21wb25lbnQgbW9yZSB0aGFuIG9uY2UuIFRoaXMgY29uZmxpY3QgbWF5IGJlIGR1ZSAnICsgJ3RvIGEgbWl4aW4uJywgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogTWl4aW4gaGVscGVyIHdoaWNoIGhhbmRsZXMgcG9saWN5IHZhbGlkYXRpb24gYW5kIHJlc2VydmVkXG4gKiBzcGVjaWZpY2F0aW9uIGtleXMgd2hlbiBidWlsZGluZyBSZWFjdCBjbGFzc3Nlcy5cbiAqL1xuZnVuY3Rpb24gbWl4U3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIHNwZWMpIHtcbiAgaWYgKCFzcGVjKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgISh0eXBlb2Ygc3BlYyAhPT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91XFwncmUgYXR0ZW1wdGluZyB0byAnICsgJ3VzZSBhIGNvbXBvbmVudCBjbGFzcyBhcyBhIG1peGluLiBJbnN0ZWFkLCBqdXN0IHVzZSBhIHJlZ3VsYXIgb2JqZWN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgISFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoc3BlYykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91XFwncmUgYXR0ZW1wdGluZyB0byAnICsgJ3VzZSBhIGNvbXBvbmVudCBhcyBhIG1peGluLiBJbnN0ZWFkLCBqdXN0IHVzZSBhIHJlZ3VsYXIgb2JqZWN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICB2YXIgcHJvdG8gPSBDb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG5cbiAgLy8gQnkgaGFuZGxpbmcgbWl4aW5zIGJlZm9yZSBhbnkgb3RoZXIgcHJvcGVydGllcywgd2UgZW5zdXJlIHRoZSBzYW1lXG4gIC8vIGNoYWluaW5nIG9yZGVyIGlzIGFwcGxpZWQgdG8gbWV0aG9kcyB3aXRoIERFRklORV9NQU5ZIHBvbGljeSwgd2hldGhlclxuICAvLyBtaXhpbnMgYXJlIGxpc3RlZCBiZWZvcmUgb3IgYWZ0ZXIgdGhlc2UgbWV0aG9kcyBpbiB0aGUgc3BlYy5cbiAgaWYgKHNwZWMuaGFzT3duUHJvcGVydHkoTUlYSU5TX0tFWSkpIHtcbiAgICBSRVNFUlZFRF9TUEVDX0tFWVMubWl4aW5zKENvbnN0cnVjdG9yLCBzcGVjLm1peGlucyk7XG4gIH1cblxuICBmb3IgKHZhciBuYW1lIGluIHNwZWMpIHtcbiAgICBpZiAoIXNwZWMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChuYW1lID09PSBNSVhJTlNfS0VZKSB7XG4gICAgICAvLyBXZSBoYXZlIGFscmVhZHkgaGFuZGxlZCBtaXhpbnMgaW4gYSBzcGVjaWFsIGNhc2UgYWJvdmUuXG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICB2YXIgcHJvcGVydHkgPSBzcGVjW25hbWVdO1xuICAgIHZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUocHJvdG8sIG5hbWUpO1xuXG4gICAgaWYgKFJFU0VSVkVEX1NQRUNfS0VZUy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgUkVTRVJWRURfU1BFQ19LRVlTW25hbWVdKENvbnN0cnVjdG9yLCBwcm9wZXJ0eSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNldHVwIG1ldGhvZHMgb24gcHJvdG90eXBlOlxuICAgICAgLy8gVGhlIGZvbGxvd2luZyBtZW1iZXIgbWV0aG9kcyBzaG91bGQgbm90IGJlIGF1dG9tYXRpY2FsbHkgYm91bmQ6XG4gICAgICAvLyAxLiBFeHBlY3RlZCBSZWFjdENsYXNzIG1ldGhvZHMgKGluIHRoZSBcImludGVyZmFjZVwiKS5cbiAgICAgIC8vIDIuIE92ZXJyaWRkZW4gbWV0aG9kcyAodGhhdCB3ZXJlIG1peGVkIGluKS5cbiAgICAgIHZhciBpc1JlYWN0Q2xhc3NNZXRob2QgPSBSZWFjdENsYXNzSW50ZXJmYWNlLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgICAgdmFyIGlzQWxyZWFkeURlZmluZWQgPSBwcm90by5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcbiAgICAgIHZhciBpc0Z1bmN0aW9uID0gdHlwZW9mIHByb3BlcnR5ID09PSAnZnVuY3Rpb24nO1xuICAgICAgdmFyIHNob3VsZEF1dG9CaW5kID0gaXNGdW5jdGlvbiAmJiAhaXNSZWFjdENsYXNzTWV0aG9kICYmICFpc0FscmVhZHlEZWZpbmVkICYmIHNwZWMuYXV0b2JpbmQgIT09IGZhbHNlO1xuXG4gICAgICBpZiAoc2hvdWxkQXV0b0JpbmQpIHtcbiAgICAgICAgaWYgKCFwcm90by5fX3JlYWN0QXV0b0JpbmRNYXApIHtcbiAgICAgICAgICBwcm90by5fX3JlYWN0QXV0b0JpbmRNYXAgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBwcm90by5fX3JlYWN0QXV0b0JpbmRNYXBbbmFtZV0gPSBwcm9wZXJ0eTtcbiAgICAgICAgcHJvdG9bbmFtZV0gPSBwcm9wZXJ0eTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc0FscmVhZHlEZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIHNwZWNQb2xpY3kgPSBSZWFjdENsYXNzSW50ZXJmYWNlW25hbWVdO1xuXG4gICAgICAgICAgLy8gVGhlc2UgY2FzZXMgc2hvdWxkIGFscmVhZHkgYmUgY2F1Z2h0IGJ5IHZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUuXG4gICAgICAgICAgIShpc1JlYWN0Q2xhc3NNZXRob2QgJiYgKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VEIHx8IHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTlkpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBVbmV4cGVjdGVkIHNwZWMgcG9saWN5ICVzIGZvciBrZXkgJXMgJyArICd3aGVuIG1peGluZyBpbiBjb21wb25lbnQgc3BlY3MuJywgc3BlY1BvbGljeSwgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgLy8gRm9yIG1ldGhvZHMgd2hpY2ggYXJlIGRlZmluZWQgbW9yZSB0aGFuIG9uY2UsIGNhbGwgdGhlIGV4aXN0aW5nXG4gICAgICAgICAgLy8gbWV0aG9kcyBiZWZvcmUgY2FsbGluZyB0aGUgbmV3IHByb3BlcnR5LCBtZXJnaW5nIGlmIGFwcHJvcHJpYXRlLlxuICAgICAgICAgIGlmIChzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCkge1xuICAgICAgICAgICAgcHJvdG9bbmFtZV0gPSBjcmVhdGVNZXJnZWRSZXN1bHRGdW5jdGlvbihwcm90b1tuYW1lXSwgcHJvcGVydHkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWSkge1xuICAgICAgICAgICAgcHJvdG9bbmFtZV0gPSBjcmVhdGVDaGFpbmVkRnVuY3Rpb24ocHJvdG9bbmFtZV0sIHByb3BlcnR5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvdG9bbmFtZV0gPSBwcm9wZXJ0eTtcbiAgICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgLy8gQWRkIHZlcmJvc2UgZGlzcGxheU5hbWUgdG8gdGhlIGZ1bmN0aW9uLCB3aGljaCBoZWxwcyB3aGVuIGxvb2tpbmdcbiAgICAgICAgICAgIC8vIGF0IHByb2ZpbGluZyB0b29scy5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcGVydHkgPT09ICdmdW5jdGlvbicgJiYgc3BlYy5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgICAgICBwcm90b1tuYW1lXS5kaXNwbGF5TmFtZSA9IHNwZWMuZGlzcGxheU5hbWUgKyAnXycgKyBuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBtaXhTdGF0aWNTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3RhdGljcykge1xuICBpZiAoIXN0YXRpY3MpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZm9yICh2YXIgbmFtZSBpbiBzdGF0aWNzKSB7XG4gICAgdmFyIHByb3BlcnR5ID0gc3RhdGljc1tuYW1lXTtcbiAgICBpZiAoIXN0YXRpY3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBpc1Jlc2VydmVkID0gKG5hbWUgaW4gUkVTRVJWRURfU1BFQ19LRVlTKTtcbiAgICAhIWlzUmVzZXJ2ZWQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91IGFyZSBhdHRlbXB0aW5nIHRvIGRlZmluZSBhIHJlc2VydmVkICcgKyAncHJvcGVydHksIGAlc2AsIHRoYXQgc2hvdWxkblxcJ3QgYmUgb24gdGhlIFwic3RhdGljc1wiIGtleS4gRGVmaW5lIGl0ICcgKyAnYXMgYW4gaW5zdGFuY2UgcHJvcGVydHkgaW5zdGVhZDsgaXQgd2lsbCBzdGlsbCBiZSBhY2Nlc3NpYmxlIG9uIHRoZSAnICsgJ2NvbnN0cnVjdG9yLicsIG5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBpc0luaGVyaXRlZCA9IChuYW1lIGluIENvbnN0cnVjdG9yKTtcbiAgICAhIWlzSW5oZXJpdGVkID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBkZWZpbmUgJyArICdgJXNgIG9uIHlvdXIgY29tcG9uZW50IG1vcmUgdGhhbiBvbmNlLiBUaGlzIGNvbmZsaWN0IG1heSBiZSAnICsgJ2R1ZSB0byBhIG1peGluLicsIG5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBDb25zdHJ1Y3RvcltuYW1lXSA9IHByb3BlcnR5O1xuICB9XG59XG5cbi8qKlxuICogTWVyZ2UgdHdvIG9iamVjdHMsIGJ1dCB0aHJvdyBpZiBib3RoIGNvbnRhaW4gdGhlIHNhbWUga2V5LlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvbmUgVGhlIGZpcnN0IG9iamVjdCwgd2hpY2ggaXMgbXV0YXRlZC5cbiAqIEBwYXJhbSB7b2JqZWN0fSB0d28gVGhlIHNlY29uZCBvYmplY3RcbiAqIEByZXR1cm4ge29iamVjdH0gb25lIGFmdGVyIGl0IGhhcyBiZWVuIG11dGF0ZWQgdG8gY29udGFpbiBldmVyeXRoaW5nIGluIHR3by5cbiAqL1xuZnVuY3Rpb24gbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cyhvbmUsIHR3bykge1xuICAhKG9uZSAmJiB0d28gJiYgdHlwZW9mIG9uZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHR3byA9PT0gJ29iamVjdCcpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ21lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoKTogQ2Fubm90IG1lcmdlIG5vbi1vYmplY3RzLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICBmb3IgKHZhciBrZXkgaW4gdHdvKSB7XG4gICAgaWYgKHR3by5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAhKG9uZVtrZXldID09PSB1bmRlZmluZWQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ21lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoKTogJyArICdUcmllZCB0byBtZXJnZSB0d28gb2JqZWN0cyB3aXRoIHRoZSBzYW1lIGtleTogYCVzYC4gVGhpcyBjb25mbGljdCAnICsgJ21heSBiZSBkdWUgdG8gYSBtaXhpbjsgaW4gcGFydGljdWxhciwgdGhpcyBtYXkgYmUgY2F1c2VkIGJ5IHR3byAnICsgJ2dldEluaXRpYWxTdGF0ZSgpIG9yIGdldERlZmF1bHRQcm9wcygpIG1ldGhvZHMgcmV0dXJuaW5nIG9iamVjdHMgJyArICd3aXRoIGNsYXNoaW5nIGtleXMuJywga2V5KSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICBvbmVba2V5XSA9IHR3b1trZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb25lO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdHdvIGZ1bmN0aW9ucyBhbmQgbWVyZ2VzIHRoZWlyIHJldHVybiB2YWx1ZXMuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gb25lIEZ1bmN0aW9uIHRvIGludm9rZSBmaXJzdC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHR3byBGdW5jdGlvbiB0byBpbnZva2Ugc2Vjb25kLlxuICogQHJldHVybiB7ZnVuY3Rpb259IEZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0aGUgdHdvIGFyZ3VtZW50IGZ1bmN0aW9ucy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU1lcmdlZFJlc3VsdEZ1bmN0aW9uKG9uZSwgdHdvKSB7XG4gIHJldHVybiBmdW5jdGlvbiBtZXJnZWRSZXN1bHQoKSB7XG4gICAgdmFyIGEgPSBvbmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB2YXIgYiA9IHR3by5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChhID09IG51bGwpIHtcbiAgICAgIHJldHVybiBiO1xuICAgIH0gZWxzZSBpZiAoYiA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gYTtcbiAgICB9XG4gICAgdmFyIGMgPSB7fTtcbiAgICBtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKGMsIGEpO1xuICAgIG1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoYywgYik7XG4gICAgcmV0dXJuIGM7XG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0d28gZnVuY3Rpb25zIGFuZCBpZ25vcmVzIHRoZWlyIHJldHVybiB2YWxlcy5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbmUgRnVuY3Rpb24gdG8gaW52b2tlIGZpcnN0LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHdvIEZ1bmN0aW9uIHRvIGludm9rZSBzZWNvbmQuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gRnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSB0d28gYXJndW1lbnQgZnVuY3Rpb25zLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2hhaW5lZEZ1bmN0aW9uKG9uZSwgdHdvKSB7XG4gIHJldHVybiBmdW5jdGlvbiBjaGFpbmVkRnVuY3Rpb24oKSB7XG4gICAgb25lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdHdvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbi8qKlxuICogQmluZHMgYSBtZXRob2QgdG8gdGhlIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29tcG9uZW50IENvbXBvbmVudCB3aG9zZSBtZXRob2QgaXMgZ29pbmcgdG8gYmUgYm91bmQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBtZXRob2QgTWV0aG9kIHRvIGJlIGJvdW5kLlxuICogQHJldHVybiB7ZnVuY3Rpb259IFRoZSBib3VuZCBtZXRob2QuXG4gKi9cbmZ1bmN0aW9uIGJpbmRBdXRvQmluZE1ldGhvZChjb21wb25lbnQsIG1ldGhvZCkge1xuICB2YXIgYm91bmRNZXRob2QgPSBtZXRob2QuYmluZChjb21wb25lbnQpO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZENvbnRleHQgPSBjb21wb25lbnQ7XG4gICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kTWV0aG9kID0gbWV0aG9kO1xuICAgIGJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZEFyZ3VtZW50cyA9IG51bGw7XG4gICAgdmFyIGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQuY29uc3RydWN0b3IuZGlzcGxheU5hbWU7XG4gICAgdmFyIF9iaW5kID0gYm91bmRNZXRob2QuYmluZDtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBibG9jay1zY29wZWQtdmFyLCBuby11bmRlZiAqL1xuICAgIGJvdW5kTWV0aG9kLmJpbmQgPSBmdW5jdGlvbiAobmV3VGhpcykge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICAvLyBVc2VyIGlzIHRyeWluZyB0byBiaW5kKCkgYW4gYXV0b2JvdW5kIG1ldGhvZDsgd2UgZWZmZWN0aXZlbHkgd2lsbFxuICAgICAgLy8gaWdub3JlIHRoZSB2YWx1ZSBvZiBcInRoaXNcIiB0aGF0IHRoZSB1c2VyIGlzIHRyeWluZyB0byB1c2UsIHNvXG4gICAgICAvLyBsZXQncyB3YXJuLlxuICAgICAgaWYgKG5ld1RoaXMgIT09IGNvbXBvbmVudCAmJiBuZXdUaGlzICE9PSBudWxsKSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnYmluZCgpOiBSZWFjdCBjb21wb25lbnQgbWV0aG9kcyBtYXkgb25seSBiZSBib3VuZCB0byB0aGUgJyArICdjb21wb25lbnQgaW5zdGFuY2UuIFNlZSAlcycsIGNvbXBvbmVudE5hbWUpIDogdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIGlmICghYXJncy5sZW5ndGgpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdiaW5kKCk6IFlvdSBhcmUgYmluZGluZyBhIGNvbXBvbmVudCBtZXRob2QgdG8gdGhlIGNvbXBvbmVudC4gJyArICdSZWFjdCBkb2VzIHRoaXMgZm9yIHlvdSBhdXRvbWF0aWNhbGx5IGluIGEgaGlnaC1wZXJmb3JtYW5jZSAnICsgJ3dheSwgc28geW91IGNhbiBzYWZlbHkgcmVtb3ZlIHRoaXMgY2FsbC4gU2VlICVzJywgY29tcG9uZW50TmFtZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBib3VuZE1ldGhvZDtcbiAgICAgIH1cbiAgICAgIHZhciByZWJvdW5kTWV0aG9kID0gX2JpbmQuYXBwbHkoYm91bmRNZXRob2QsIGFyZ3VtZW50cyk7XG4gICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZENvbnRleHQgPSBjb21wb25lbnQ7XG4gICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZE1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIHJlYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQXJndW1lbnRzID0gYXJncztcbiAgICAgIHJldHVybiByZWJvdW5kTWV0aG9kO1xuICAgICAgLyogZXNsaW50LWVuYWJsZSAqL1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGJvdW5kTWV0aG9kO1xufVxuXG4vKipcbiAqIEJpbmRzIGFsbCBhdXRvLWJvdW5kIG1ldGhvZHMgaW4gYSBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGNvbXBvbmVudCBDb21wb25lbnQgd2hvc2UgbWV0aG9kIGlzIGdvaW5nIHRvIGJlIGJvdW5kLlxuICovXG5mdW5jdGlvbiBiaW5kQXV0b0JpbmRNZXRob2RzKGNvbXBvbmVudCkge1xuICBmb3IgKHZhciBhdXRvQmluZEtleSBpbiBjb21wb25lbnQuX19yZWFjdEF1dG9CaW5kTWFwKSB7XG4gICAgaWYgKGNvbXBvbmVudC5fX3JlYWN0QXV0b0JpbmRNYXAuaGFzT3duUHJvcGVydHkoYXV0b0JpbmRLZXkpKSB7XG4gICAgICB2YXIgbWV0aG9kID0gY29tcG9uZW50Ll9fcmVhY3RBdXRvQmluZE1hcFthdXRvQmluZEtleV07XG4gICAgICBjb21wb25lbnRbYXV0b0JpbmRLZXldID0gYmluZEF1dG9CaW5kTWV0aG9kKGNvbXBvbmVudCwgbWV0aG9kKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgbW9yZSB0byB0aGUgUmVhY3RDbGFzcyBiYXNlIGNsYXNzLiBUaGVzZSBhcmUgYWxsIGxlZ2FjeSBmZWF0dXJlcyBhbmRcbiAqIHRoZXJlZm9yZSBub3QgYWxyZWFkeSBwYXJ0IG9mIHRoZSBtb2Rlcm4gUmVhY3RDb21wb25lbnQuXG4gKi9cbnZhciBSZWFjdENsYXNzTWl4aW4gPSB7XG5cbiAgLyoqXG4gICAqIFRPRE86IFRoaXMgd2lsbCBiZSBkZXByZWNhdGVkIGJlY2F1c2Ugc3RhdGUgc2hvdWxkIGFsd2F5cyBrZWVwIGEgY29uc2lzdGVudFxuICAgKiB0eXBlIHNpZ25hdHVyZSBhbmQgdGhlIG9ubHkgdXNlIGNhc2UgZm9yIHRoaXMsIGlzIHRvIGF2b2lkIHRoYXQuXG4gICAqL1xuICByZXBsYWNlU3RhdGU6IGZ1bmN0aW9uIChuZXdTdGF0ZSwgY2FsbGJhY2spIHtcbiAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZVJlcGxhY2VTdGF0ZSh0aGlzLCBuZXdTdGF0ZSk7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGNvbXBvc2l0ZSBjb21wb25lbnQgaXMgbW91bnRlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBtb3VudGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQGZpbmFsXG4gICAqL1xuICBpc01vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVyLmlzTW91bnRlZCh0aGlzKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsUHJvcHMgU3Vic2V0IG9mIHRoZSBuZXh0IHByb3BzLlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHByb3BzIGFyZSB1cGRhdGVkLlxuICAgKiBAZmluYWxcbiAgICogQHB1YmxpY1xuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgc2V0UHJvcHM6IGZ1bmN0aW9uIChwYXJ0aWFsUHJvcHMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm5TZXRQcm9wcygpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZVNldFByb3BzKHRoaXMsIHBhcnRpYWxQcm9wcyk7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgYWxsIHRoZSBwcm9wcy5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG5ld1Byb3BzIFN1YnNldCBvZiB0aGUgbmV4dCBwcm9wcy5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxlZCBhZnRlciBwcm9wcyBhcmUgdXBkYXRlZC5cbiAgICogQGZpbmFsXG4gICAqIEBwdWJsaWNcbiAgICogQGRlcHJlY2F0ZWRcbiAgICovXG4gIHJlcGxhY2VQcm9wczogZnVuY3Rpb24gKG5ld1Byb3BzLCBjYWxsYmFjaykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuU2V0UHJvcHMoKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVyLmVucXVldWVSZXBsYWNlUHJvcHModGhpcywgbmV3UHJvcHMpO1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgdGhpcy51cGRhdGVyLmVucXVldWVDYWxsYmFjayh0aGlzLCBjYWxsYmFjayk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgUmVhY3RDbGFzc0NvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHt9O1xuYXNzaWduKFJlYWN0Q2xhc3NDb21wb25lbnQucHJvdG90eXBlLCBSZWFjdENvbXBvbmVudC5wcm90b3R5cGUsIFJlYWN0Q2xhc3NNaXhpbik7XG5cbi8qKlxuICogTW9kdWxlIGZvciBjcmVhdGluZyBjb21wb3NpdGUgY29tcG9uZW50cy5cbiAqXG4gKiBAY2xhc3MgUmVhY3RDbGFzc1xuICovXG52YXIgUmVhY3RDbGFzcyA9IHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvbXBvc2l0ZSBjb21wb25lbnQgY2xhc3MgZ2l2ZW4gYSBjbGFzcyBzcGVjaWZpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gc3BlYyBDbGFzcyBzcGVjaWZpY2F0aW9uICh3aGljaCBtdXN0IGRlZmluZSBgcmVuZGVyYCkuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9ufSBDb21wb25lbnQgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNyZWF0ZUNsYXNzOiBmdW5jdGlvbiAoc3BlYykge1xuICAgIHZhciBDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uIChwcm9wcywgY29udGV4dCwgdXBkYXRlcikge1xuICAgICAgLy8gVGhpcyBjb25zdHJ1Y3RvciBpcyBvdmVycmlkZGVuIGJ5IG1vY2tzLiBUaGUgYXJndW1lbnQgaXMgdXNlZFxuICAgICAgLy8gYnkgbW9ja3MgdG8gYXNzZXJ0IG9uIHdoYXQgZ2V0cyBtb3VudGVkLlxuXG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0aGlzIGluc3RhbmNlb2YgQ29uc3RydWN0b3IsICdTb21ldGhpbmcgaXMgY2FsbGluZyBhIFJlYWN0IGNvbXBvbmVudCBkaXJlY3RseS4gVXNlIGEgZmFjdG9yeSBvciAnICsgJ0pTWCBpbnN0ZWFkLiBTZWU6IGh0dHBzOi8vZmIubWUvcmVhY3QtbGVnYWN5ZmFjdG9yeScpIDogdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICAvLyBXaXJlIHVwIGF1dG8tYmluZGluZ1xuICAgICAgaWYgKHRoaXMuX19yZWFjdEF1dG9CaW5kTWFwKSB7XG4gICAgICAgIGJpbmRBdXRvQmluZE1ldGhvZHModGhpcyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICB0aGlzLnJlZnMgPSBlbXB0eU9iamVjdDtcbiAgICAgIHRoaXMudXBkYXRlciA9IHVwZGF0ZXIgfHwgUmVhY3ROb29wVXBkYXRlUXVldWU7XG5cbiAgICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuXG4gICAgICAvLyBSZWFjdENsYXNzZXMgZG9lc24ndCBoYXZlIGNvbnN0cnVjdG9ycy4gSW5zdGVhZCwgdGhleSB1c2UgdGhlXG4gICAgICAvLyBnZXRJbml0aWFsU3RhdGUgYW5kIGNvbXBvbmVudFdpbGxNb3VudCBtZXRob2RzIGZvciBpbml0aWFsaXphdGlvbi5cblxuICAgICAgdmFyIGluaXRpYWxTdGF0ZSA9IHRoaXMuZ2V0SW5pdGlhbFN0YXRlID8gdGhpcy5nZXRJbml0aWFsU3RhdGUoKSA6IG51bGw7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAvLyBXZSBhbGxvdyBhdXRvLW1vY2tzIHRvIHByb2NlZWQgYXMgaWYgdGhleSdyZSByZXR1cm5pbmcgbnVsbC5cbiAgICAgICAgaWYgKHR5cGVvZiBpbml0aWFsU3RhdGUgPT09ICd1bmRlZmluZWQnICYmIHRoaXMuZ2V0SW5pdGlhbFN0YXRlLl9pc01vY2tGdW5jdGlvbikge1xuICAgICAgICAgIC8vIFRoaXMgaXMgcHJvYmFibHkgYmFkIHByYWN0aWNlLiBDb25zaWRlciB3YXJuaW5nIGhlcmUgYW5kXG4gICAgICAgICAgLy8gZGVwcmVjYXRpbmcgdGhpcyBjb252ZW5pZW5jZS5cbiAgICAgICAgICBpbml0aWFsU3RhdGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAhKHR5cGVvZiBpbml0aWFsU3RhdGUgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGluaXRpYWxTdGF0ZSkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJyVzLmdldEluaXRpYWxTdGF0ZSgpOiBtdXN0IHJldHVybiBhbiBvYmplY3Qgb3IgbnVsbCcsIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy5zdGF0ZSA9IGluaXRpYWxTdGF0ZTtcbiAgICB9O1xuICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IG5ldyBSZWFjdENsYXNzQ29tcG9uZW50KCk7XG4gICAgQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG5cbiAgICBpbmplY3RlZE1peGlucy5mb3JFYWNoKG1peFNwZWNJbnRvQ29tcG9uZW50LmJpbmQobnVsbCwgQ29uc3RydWN0b3IpKTtcblxuICAgIG1peFNwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzcGVjKTtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIGRlZmF1bHRQcm9wcyBwcm9wZXJ0eSBhZnRlciBhbGwgbWl4aW5zIGhhdmUgYmVlbiBtZXJnZWQuXG4gICAgaWYgKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcykge1xuICAgICAgQ29uc3RydWN0b3IuZGVmYXVsdFByb3BzID0gQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKCk7XG4gICAgfVxuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFRoaXMgaXMgYSB0YWcgdG8gaW5kaWNhdGUgdGhhdCB0aGUgdXNlIG9mIHRoZXNlIG1ldGhvZCBuYW1lcyBpcyBvayxcbiAgICAgIC8vIHNpbmNlIGl0J3MgdXNlZCB3aXRoIGNyZWF0ZUNsYXNzLiBJZiBpdCdzIG5vdCwgdGhlbiBpdCdzIGxpa2VseSBhXG4gICAgICAvLyBtaXN0YWtlIHNvIHdlJ2xsIHdhcm4geW91IHRvIHVzZSB0aGUgc3RhdGljIHByb3BlcnR5LCBwcm9wZXJ0eVxuICAgICAgLy8gaW5pdGlhbGl6ZXIgb3IgY29uc3RydWN0b3IgcmVzcGVjdGl2ZWx5LlxuICAgICAgaWYgKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcykge1xuICAgICAgICBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMuaXNSZWFjdENsYXNzQXBwcm92ZWQgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0SW5pdGlhbFN0YXRlKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRJbml0aWFsU3RhdGUuaXNSZWFjdENsYXNzQXBwcm92ZWQgPSB7fTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAhQ29uc3RydWN0b3IucHJvdG90eXBlLnJlbmRlciA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdjcmVhdGVDbGFzcyguLi4pOiBDbGFzcyBzcGVjaWZpY2F0aW9uIG11c3QgaW1wbGVtZW50IGEgYHJlbmRlcmAgbWV0aG9kLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbXBvbmVudFNob3VsZFVwZGF0ZSwgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnRTaG91bGRVcGRhdGUoKS4gRGlkIHlvdSBtZWFuIHNob3VsZENvbXBvbmVudFVwZGF0ZSgpPyAnICsgJ1RoZSBuYW1lIGlzIHBocmFzZWQgYXMgYSBxdWVzdGlvbiBiZWNhdXNlIHRoZSBmdW5jdGlvbiBpcyAnICsgJ2V4cGVjdGVkIHRvIHJldHVybiBhIHZhbHVlLicsIHNwZWMuZGlzcGxheU5hbWUgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcygpLiBEaWQgeW91IG1lYW4gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygpPycsIHNwZWMuZGlzcGxheU5hbWUgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gUmVkdWNlIHRpbWUgc3BlbnQgZG9pbmcgbG9va3VwcyBieSBzZXR0aW5nIHRoZXNlIG9uIHRoZSBwcm90b3R5cGUuXG4gICAgZm9yICh2YXIgbWV0aG9kTmFtZSBpbiBSZWFjdENsYXNzSW50ZXJmYWNlKSB7XG4gICAgICBpZiAoIUNvbnN0cnVjdG9yLnByb3RvdHlwZVttZXRob2ROYW1lXSkge1xuICAgICAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfSxcblxuICBpbmplY3Rpb246IHtcbiAgICBpbmplY3RNaXhpbjogZnVuY3Rpb24gKG1peGluKSB7XG4gICAgICBpbmplY3RlZE1peGlucy5wdXNoKG1peGluKTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENsYXNzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvbmVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdE5vb3BVcGRhdGVRdWV1ZScpO1xuXG52YXIgY2FuRGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL2NhbkRlZmluZVByb3BlcnR5Jyk7XG52YXIgZW1wdHlPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eU9iamVjdCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogQmFzZSBjbGFzcyBoZWxwZXJzIGZvciB0aGUgdXBkYXRpbmcgc3RhdGUgb2YgYSBjb21wb25lbnQuXG4gKi9cbmZ1bmN0aW9uIFJlYWN0Q29tcG9uZW50KHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7XG4gIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7XG4gIC8vIFdlIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgdXBkYXRlciBidXQgdGhlIHJlYWwgb25lIGdldHMgaW5qZWN0ZWQgYnkgdGhlXG4gIC8vIHJlbmRlcmVyLlxuICB0aGlzLnVwZGF0ZXIgPSB1cGRhdGVyIHx8IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlO1xufVxuXG5SZWFjdENvbXBvbmVudC5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCA9IHt9O1xuXG4vKipcbiAqIFNldHMgYSBzdWJzZXQgb2YgdGhlIHN0YXRlLiBBbHdheXMgdXNlIHRoaXMgdG8gbXV0YXRlXG4gKiBzdGF0ZS4gWW91IHNob3VsZCB0cmVhdCBgdGhpcy5zdGF0ZWAgYXMgaW1tdXRhYmxlLlxuICpcbiAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGB0aGlzLnN0YXRlYCB3aWxsIGJlIGltbWVkaWF0ZWx5IHVwZGF0ZWQsIHNvXG4gKiBhY2Nlc3NpbmcgYHRoaXMuc3RhdGVgIGFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QgbWF5IHJldHVybiB0aGUgb2xkIHZhbHVlLlxuICpcbiAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGNhbGxzIHRvIGBzZXRTdGF0ZWAgd2lsbCBydW4gc3luY2hyb25vdXNseSxcbiAqIGFzIHRoZXkgbWF5IGV2ZW50dWFsbHkgYmUgYmF0Y2hlZCB0b2dldGhlci4gIFlvdSBjYW4gcHJvdmlkZSBhbiBvcHRpb25hbFxuICogY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGNhbGwgdG8gc2V0U3RhdGUgaXMgYWN0dWFsbHlcbiAqIGNvbXBsZXRlZC5cbiAqXG4gKiBXaGVuIGEgZnVuY3Rpb24gaXMgcHJvdmlkZWQgdG8gc2V0U3RhdGUsIGl0IHdpbGwgYmUgY2FsbGVkIGF0IHNvbWUgcG9pbnQgaW5cbiAqIHRoZSBmdXR1cmUgKG5vdCBzeW5jaHJvbm91c2x5KS4gSXQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgdXAgdG8gZGF0ZVxuICogY29tcG9uZW50IGFyZ3VtZW50cyAoc3RhdGUsIHByb3BzLCBjb250ZXh0KS4gVGhlc2UgdmFsdWVzIGNhbiBiZSBkaWZmZXJlbnRcbiAqIGZyb20gdGhpcy4qIGJlY2F1c2UgeW91ciBmdW5jdGlvbiBtYXkgYmUgY2FsbGVkIGFmdGVyIHJlY2VpdmVQcm9wcyBidXQgYmVmb3JlXG4gKiBzaG91bGRDb21wb25lbnRVcGRhdGUsIGFuZCB0aGlzIG5ldyBzdGF0ZSwgcHJvcHMsIGFuZCBjb250ZXh0IHdpbGwgbm90IHlldCBiZVxuICogYXNzaWduZWQgdG8gdGhpcy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdHxmdW5jdGlvbn0gcGFydGlhbFN0YXRlIE5leHQgcGFydGlhbCBzdGF0ZSBvciBmdW5jdGlvbiB0b1xuICogICAgICAgIHByb2R1Y2UgbmV4dCBwYXJ0aWFsIHN0YXRlIHRvIGJlIG1lcmdlZCB3aXRoIGN1cnJlbnQgc3RhdGUuXG4gKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHN0YXRlIGlzIHVwZGF0ZWQuXG4gKiBAZmluYWxcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuUmVhY3RDb21wb25lbnQucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHBhcnRpYWxTdGF0ZSwgY2FsbGJhY2spIHtcbiAgISh0eXBlb2YgcGFydGlhbFN0YXRlID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgcGFydGlhbFN0YXRlID09PSAnZnVuY3Rpb24nIHx8IHBhcnRpYWxTdGF0ZSA9PSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdzZXRTdGF0ZSguLi4pOiB0YWtlcyBhbiBvYmplY3Qgb2Ygc3RhdGUgdmFyaWFibGVzIHRvIHVwZGF0ZSBvciBhICcgKyAnZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhbiBvYmplY3Qgb2Ygc3RhdGUgdmFyaWFibGVzLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwYXJ0aWFsU3RhdGUgIT0gbnVsbCwgJ3NldFN0YXRlKC4uLik6IFlvdSBwYXNzZWQgYW4gdW5kZWZpbmVkIG9yIG51bGwgc3RhdGUgb2JqZWN0OyAnICsgJ2luc3RlYWQsIHVzZSBmb3JjZVVwZGF0ZSgpLicpIDogdW5kZWZpbmVkO1xuICB9XG4gIHRoaXMudXBkYXRlci5lbnF1ZXVlU2V0U3RhdGUodGhpcywgcGFydGlhbFN0YXRlKTtcbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgdGhpcy51cGRhdGVyLmVucXVldWVDYWxsYmFjayh0aGlzLCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbi8qKlxuICogRm9yY2VzIGFuIHVwZGF0ZS4gVGhpcyBzaG91bGQgb25seSBiZSBpbnZva2VkIHdoZW4gaXQgaXMga25vd24gd2l0aFxuICogY2VydGFpbnR5IHRoYXQgd2UgYXJlICoqbm90KiogaW4gYSBET00gdHJhbnNhY3Rpb24uXG4gKlxuICogWW91IG1heSB3YW50IHRvIGNhbGwgdGhpcyB3aGVuIHlvdSBrbm93IHRoYXQgc29tZSBkZWVwZXIgYXNwZWN0IG9mIHRoZVxuICogY29tcG9uZW50J3Mgc3RhdGUgaGFzIGNoYW5nZWQgYnV0IGBzZXRTdGF0ZWAgd2FzIG5vdCBjYWxsZWQuXG4gKlxuICogVGhpcyB3aWxsIG5vdCBpbnZva2UgYHNob3VsZENvbXBvbmVudFVwZGF0ZWAsIGJ1dCBpdCB3aWxsIGludm9rZVxuICogYGNvbXBvbmVudFdpbGxVcGRhdGVgIGFuZCBgY29tcG9uZW50RGlkVXBkYXRlYC5cbiAqXG4gKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHVwZGF0ZSBpcyBjb21wbGV0ZS5cbiAqIEBmaW5hbFxuICogQHByb3RlY3RlZFxuICovXG5SZWFjdENvbXBvbmVudC5wcm90b3R5cGUuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgdGhpcy51cGRhdGVyLmVucXVldWVGb3JjZVVwZGF0ZSh0aGlzKTtcbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgdGhpcy51cGRhdGVyLmVucXVldWVDYWxsYmFjayh0aGlzLCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbi8qKlxuICogRGVwcmVjYXRlZCBBUElzLiBUaGVzZSBBUElzIHVzZWQgdG8gZXhpc3Qgb24gY2xhc3NpYyBSZWFjdCBjbGFzc2VzIGJ1dCBzaW5jZVxuICogd2Ugd291bGQgbGlrZSB0byBkZXByZWNhdGUgdGhlbSwgd2UncmUgbm90IGdvaW5nIHRvIG1vdmUgdGhlbSBvdmVyIHRvIHRoaXNcbiAqIG1vZGVybiBiYXNlIGNsYXNzLiBJbnN0ZWFkLCB3ZSBkZWZpbmUgYSBnZXR0ZXIgdGhhdCB3YXJucyBpZiBpdCdzIGFjY2Vzc2VkLlxuICovXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICB2YXIgZGVwcmVjYXRlZEFQSXMgPSB7XG4gICAgZ2V0RE9NTm9kZTogWydnZXRET01Ob2RlJywgJ1VzZSBSZWFjdERPTS5maW5kRE9NTm9kZShjb21wb25lbnQpIGluc3RlYWQuJ10sXG4gICAgaXNNb3VudGVkOiBbJ2lzTW91bnRlZCcsICdJbnN0ZWFkLCBtYWtlIHN1cmUgdG8gY2xlYW4gdXAgc3Vic2NyaXB0aW9ucyBhbmQgcGVuZGluZyByZXF1ZXN0cyBpbiAnICsgJ2NvbXBvbmVudFdpbGxVbm1vdW50IHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzLiddLFxuICAgIHJlcGxhY2VQcm9wczogWydyZXBsYWNlUHJvcHMnLCAnSW5zdGVhZCwgY2FsbCByZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4nXSxcbiAgICByZXBsYWNlU3RhdGU6IFsncmVwbGFjZVN0YXRlJywgJ1JlZmFjdG9yIHlvdXIgY29kZSB0byB1c2Ugc2V0U3RhdGUgaW5zdGVhZCAoc2VlICcgKyAnaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8zMjM2KS4nXSxcbiAgICBzZXRQcm9wczogWydzZXRQcm9wcycsICdJbnN0ZWFkLCBjYWxsIHJlbmRlciBhZ2FpbiBhdCB0aGUgdG9wIGxldmVsLiddXG4gIH07XG4gIHZhciBkZWZpbmVEZXByZWNhdGlvbldhcm5pbmcgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgaW5mbykge1xuICAgIGlmIChjYW5EZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWN0Q29tcG9uZW50LnByb3RvdHlwZSwgbWV0aG9kTmFtZSwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJyVzKC4uLikgaXMgZGVwcmVjYXRlZCBpbiBwbGFpbiBKYXZhU2NyaXB0IFJlYWN0IGNsYXNzZXMuICVzJywgaW5mb1swXSwgaW5mb1sxXSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBmb3IgKHZhciBmbk5hbWUgaW4gZGVwcmVjYXRlZEFQSXMpIHtcbiAgICBpZiAoZGVwcmVjYXRlZEFQSXMuaGFzT3duUHJvcGVydHkoZm5OYW1lKSkge1xuICAgICAgZGVmaW5lRGVwcmVjYXRpb25XYXJuaW5nKGZuTmFtZSwgZGVwcmVjYXRlZEFQSXNbZm5OYW1lXSk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDb21wb25lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RET01JRE9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0RE9NSURPcGVyYXRpb25zJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xuXG4vKipcbiAqIEFic3RyYWN0cyBhd2F5IGFsbCBmdW5jdGlvbmFsaXR5IG9mIHRoZSByZWNvbmNpbGVyIHRoYXQgcmVxdWlyZXMga25vd2xlZGdlIG9mXG4gKiB0aGUgYnJvd3NlciBjb250ZXh0LiBUT0RPOiBUaGVzZSBjYWxsZXJzIHNob3VsZCBiZSByZWZhY3RvcmVkIHRvIGF2b2lkIHRoZVxuICogbmVlZCBmb3IgdGhpcyBpbmplY3Rpb24uXG4gKi9cbnZhciBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCA9IHtcblxuICBwcm9jZXNzQ2hpbGRyZW5VcGRhdGVzOiBSZWFjdERPTUlET3BlcmF0aW9ucy5kYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXMsXG5cbiAgcmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDogUmVhY3RET01JRE9wZXJhdGlvbnMuZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlELFxuXG4gIC8qKlxuICAgKiBJZiBhIHBhcnRpY3VsYXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgdGhhdCBzb21lIHJlc291cmNlcyBiZSBjbGVhbmVkIHVwLFxuICAgKiBzcGVjaWZ5IHRoaXMgaW4gdGhlIGluamVjdGVkIE1peGluLiBJbiB0aGUgRE9NLCB3ZSB3b3VsZCBsaWtlbHkgd2FudCB0b1xuICAgKiBwdXJnZSBhbnkgY2FjaGVkIG5vZGUgSUQgbG9va3Vwcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVubW91bnRJREZyb21FbnZpcm9ubWVudDogZnVuY3Rpb24gKHJvb3ROb2RlSUQpIHtcbiAgICBSZWFjdE1vdW50LnB1cmdlSUQocm9vdE5vZGVJRCk7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgaW5qZWN0ZWQgPSBmYWxzZTtcblxudmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSB7XG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsbHkgaW5qZWN0YWJsZSBlbnZpcm9ubWVudCBkZXBlbmRlbnQgY2xlYW51cCBob29rLiAoc2VydmVyIHZzLlxuICAgKiBicm93c2VyIGV0YykuIEV4YW1wbGU6IEEgYnJvd3NlciBzeXN0ZW0gY2FjaGVzIERPTSBub2RlcyBiYXNlZCBvbiBjb21wb25lbnRcbiAgICogSUQgYW5kIG11c3QgcmVtb3ZlIHRoYXQgY2FjaGUgZW50cnkgd2hlbiB0aGlzIGluc3RhbmNlIGlzIHVubW91bnRlZC5cbiAgICovXG4gIHVubW91bnRJREZyb21FbnZpcm9ubWVudDogbnVsbCxcblxuICAvKipcbiAgICogT3B0aW9uYWxseSBpbmplY3RhYmxlIGhvb2sgZm9yIHN3YXBwaW5nIG91dCBtb3VudCBpbWFnZXMgaW4gdGhlIG1pZGRsZSBvZlxuICAgKiB0aGUgdHJlZS5cbiAgICovXG4gIHJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQ6IG51bGwsXG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsbHkgaW5qZWN0YWJsZSBob29rIGZvciBwcm9jZXNzaW5nIGEgcXVldWUgb2YgY2hpbGQgdXBkYXRlcy4gV2lsbFxuICAgKiBsYXRlciBtb3ZlIGludG8gTXVsdGlDaGlsZENvbXBvbmVudHMuXG4gICAqL1xuICBwcm9jZXNzQ2hpbGRyZW5VcGRhdGVzOiBudWxsLFxuXG4gIGluamVjdGlvbjoge1xuICAgIGluamVjdEVudmlyb25tZW50OiBmdW5jdGlvbiAoZW52aXJvbm1lbnQpIHtcbiAgICAgICEhaW5qZWN0ZWQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQ6IGluamVjdEVudmlyb25tZW50KCkgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC51bm1vdW50SURGcm9tRW52aXJvbm1lbnQgPSBlbnZpcm9ubWVudC51bm1vdW50SURGcm9tRW52aXJvbm1lbnQ7XG4gICAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQgPSBlbnZpcm9ubWVudC5yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEO1xuICAgICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5wcm9jZXNzQ2hpbGRyZW5VcGRhdGVzID0gZW52aXJvbm1lbnQucHJvY2Vzc0NoaWxkcmVuVXBkYXRlcztcbiAgICAgIGluamVjdGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENvbXBvbmVudEVudmlyb25tZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0SW5zdGFuY2VNYXAgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VNYXAnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMnKTtcbnZhciBSZWFjdFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0UmVjb25jaWxlcicpO1xudmFyIFJlYWN0VXBkYXRlUXVldWUgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlUXVldWUnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5T2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlPYmplY3QnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSB7XG4gIHZhciBvd25lciA9IGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQuX293bmVyIHx8IG51bGw7XG4gIGlmIChvd25lcikge1xuICAgIHZhciBuYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuICAgIGlmIChuYW1lKSB7XG4gICAgICByZXR1cm4gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbmZ1bmN0aW9uIFN0YXRlbGVzc0NvbXBvbmVudChDb21wb25lbnQpIHt9XG5TdGF0ZWxlc3NDb21wb25lbnQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIENvbXBvbmVudCA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KHRoaXMpLl9jdXJyZW50RWxlbWVudC50eXBlO1xuICByZXR1cm4gQ29tcG9uZW50KHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCwgdGhpcy51cGRhdGVyKTtcbn07XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tIFRoZSBMaWZlLUN5Y2xlIG9mIGEgQ29tcG9zaXRlIENvbXBvbmVudCAtLS0tLS0tLS0tLS0tLS0tLS1cbiAqXG4gKiAtIGNvbnN0cnVjdG9yOiBJbml0aWFsaXphdGlvbiBvZiBzdGF0ZS4gVGhlIGluc3RhbmNlIGlzIG5vdyByZXRhaW5lZC5cbiAqICAgLSBjb21wb25lbnRXaWxsTW91bnRcbiAqICAgLSByZW5kZXJcbiAqICAgLSBbY2hpbGRyZW4ncyBjb25zdHJ1Y3RvcnNdXG4gKiAgICAgLSBbY2hpbGRyZW4ncyBjb21wb25lbnRXaWxsTW91bnQgYW5kIHJlbmRlcl1cbiAqICAgICAtIFtjaGlsZHJlbidzIGNvbXBvbmVudERpZE1vdW50XVxuICogICAgIC0gY29tcG9uZW50RGlkTW91bnRcbiAqXG4gKiAgICAgICBVcGRhdGUgUGhhc2VzOlxuICogICAgICAgLSBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIChvbmx5IGNhbGxlZCBpZiBwYXJlbnQgdXBkYXRlZClcbiAqICAgICAgIC0gc2hvdWxkQ29tcG9uZW50VXBkYXRlXG4gKiAgICAgICAgIC0gY29tcG9uZW50V2lsbFVwZGF0ZVxuICogICAgICAgICAgIC0gcmVuZGVyXG4gKiAgICAgICAgICAgLSBbY2hpbGRyZW4ncyBjb25zdHJ1Y3RvcnMgb3IgcmVjZWl2ZSBwcm9wcyBwaGFzZXNdXG4gKiAgICAgICAgIC0gY29tcG9uZW50RGlkVXBkYXRlXG4gKlxuICogICAgIC0gY29tcG9uZW50V2lsbFVubW91bnRcbiAqICAgICAtIFtjaGlsZHJlbidzIGNvbXBvbmVudFdpbGxVbm1vdW50XVxuICogICAtIFtjaGlsZHJlbiBkZXN0cm95ZWRdXG4gKiAtIChkZXN0cm95ZWQpOiBUaGUgaW5zdGFuY2UgaXMgbm93IGJsYW5rLCByZWxlYXNlZCBieSBSZWFjdCBhbmQgcmVhZHkgZm9yIEdDLlxuICpcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxuLyoqXG4gKiBBbiBpbmNyZW1lbnRpbmcgSUQgYXNzaWduZWQgdG8gZWFjaCBjb21wb25lbnQgd2hlbiBpdCBpcyBtb3VudGVkLiBUaGlzIGlzXG4gKiB1c2VkIHRvIGVuZm9yY2UgdGhlIG9yZGVyIGluIHdoaWNoIGBSZWFjdFVwZGF0ZXNgIHVwZGF0ZXMgZGlydHkgY29tcG9uZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgbmV4dE1vdW50SUQgPSAxO1xuXG4vKipcbiAqIEBsZW5kcyB7UmVhY3RDb21wb3NpdGVDb21wb25lbnQucHJvdG90eXBlfVxuICovXG52YXIgUmVhY3RDb21wb3NpdGVDb21wb25lbnRNaXhpbiA9IHtcblxuICAvKipcbiAgICogQmFzZSBjb25zdHJ1Y3RvciBmb3IgYWxsIGNvbXBvc2l0ZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50XG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IG51bGw7XG4gICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuXG4gICAgLy8gU2VlIFJlYWN0VXBkYXRlUXVldWVcbiAgICB0aGlzLl9wZW5kaW5nRWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy5fcGVuZGluZ1N0YXRlUXVldWUgPSBudWxsO1xuICAgIHRoaXMuX3BlbmRpbmdSZXBsYWNlU3RhdGUgPSBmYWxzZTtcbiAgICB0aGlzLl9wZW5kaW5nRm9yY2VVcGRhdGUgPSBmYWxzZTtcblxuICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcblxuICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xuICAgIHRoaXMuX21vdW50T3JkZXIgPSAwO1xuICAgIHRoaXMuX3RvcExldmVsV3JhcHBlciA9IG51bGw7XG5cbiAgICAvLyBTZWUgUmVhY3RVcGRhdGVzIGFuZCBSZWFjdFVwZGF0ZVF1ZXVlLlxuICAgIHRoaXMuX3BlbmRpbmdDYWxsYmFja3MgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgY29tcG9uZW50LCByZW5kZXJzIG1hcmt1cCwgYW5kIHJlZ2lzdGVycyBldmVudCBsaXN0ZW5lcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgRE9NIElEIG9mIHRoZSByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBSZW5kZXJlZCBtYXJrdXAgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9NLlxuICAgKiBAZmluYWxcbiAgICogQGludGVybmFsXG4gICAqL1xuICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gKHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB0aGlzLl9jb250ZXh0ID0gY29udGV4dDtcbiAgICB0aGlzLl9tb3VudE9yZGVyID0gbmV4dE1vdW50SUQrKztcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gcm9vdElEO1xuXG4gICAgdmFyIHB1YmxpY1Byb3BzID0gdGhpcy5fcHJvY2Vzc1Byb3BzKHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzKTtcbiAgICB2YXIgcHVibGljQ29udGV4dCA9IHRoaXMuX3Byb2Nlc3NDb250ZXh0KGNvbnRleHQpO1xuXG4gICAgdmFyIENvbXBvbmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBwdWJsaWMgY2xhc3NcbiAgICB2YXIgaW5zdDtcbiAgICB2YXIgcmVuZGVyZWRFbGVtZW50O1xuXG4gICAgLy8gVGhpcyBpcyBhIHdheSB0byBkZXRlY3QgaWYgQ29tcG9uZW50IGlzIGEgc3RhdGVsZXNzIGFycm93IGZ1bmN0aW9uXG4gICAgLy8gY29tcG9uZW50LCB3aGljaCBpcyBub3QgbmV3YWJsZS4gSXQgbWlnaHQgbm90IGJlIDEwMCUgcmVsaWFibGUgYnV0IGlzXG4gICAgLy8gc29tZXRoaW5nIHdlIGNhbiBkbyB1bnRpbCB3ZSBzdGFydCBkZXRlY3RpbmcgdGhhdCBDb21wb25lbnQgZXh0ZW5kc1xuICAgIC8vIFJlYWN0LkNvbXBvbmVudC4gV2UgYWxyZWFkeSBhc3N1bWUgdGhhdCB0eXBlb2YgQ29tcG9uZW50ID09PSAnZnVuY3Rpb24nLlxuICAgIHZhciBjYW5JbnN0YW50aWF0ZSA9ICgncHJvdG90eXBlJyBpbiBDb21wb25lbnQpO1xuXG4gICAgaWYgKGNhbkluc3RhbnRpYXRlKSB7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gdGhpcztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpbnN0ID0gbmV3IENvbXBvbmVudChwdWJsaWNQcm9wcywgcHVibGljQ29udGV4dCwgUmVhY3RVcGRhdGVRdWV1ZSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluc3QgPSBuZXcgQ29tcG9uZW50KHB1YmxpY1Byb3BzLCBwdWJsaWNDb250ZXh0LCBSZWFjdFVwZGF0ZVF1ZXVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNhbkluc3RhbnRpYXRlIHx8IGluc3QgPT09IG51bGwgfHwgaW5zdCA9PT0gZmFsc2UgfHwgUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGluc3QpKSB7XG4gICAgICByZW5kZXJlZEVsZW1lbnQgPSBpbnN0O1xuICAgICAgaW5zdCA9IG5ldyBTdGF0ZWxlc3NDb21wb25lbnQoQ29tcG9uZW50KTtcbiAgICB9XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGxhdGVyIGluIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQsIGJ1dCBhZGQgYW4gZWFybHlcbiAgICAgIC8vIHdhcm5pbmcgbm93IHRvIGhlbHAgZGVidWdnaW5nXG4gICAgICBpZiAoaW5zdC5yZW5kZXIgPT0gbnVsbCkge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJyVzKC4uLik6IE5vIGByZW5kZXJgIG1ldGhvZCBmb3VuZCBvbiB0aGUgcmV0dXJuZWQgY29tcG9uZW50ICcgKyAnaW5zdGFuY2U6IHlvdSBtYXkgaGF2ZSBmb3Jnb3R0ZW4gdG8gZGVmaW5lIGByZW5kZXJgLCByZXR1cm5lZCAnICsgJ251bGwvZmFsc2UgZnJvbSBhIHN0YXRlbGVzcyBjb21wb25lbnQsIG9yIHRyaWVkIHRvIHJlbmRlciBhbiAnICsgJ2VsZW1lbnQgd2hvc2UgdHlwZSBpcyBhIGZ1bmN0aW9uIHRoYXQgaXNuXFwndCBhIFJlYWN0IGNvbXBvbmVudC4nLCBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWUgfHwgJ0NvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gV2Ugc3VwcG9ydCBFUzYgaW5oZXJpdGluZyBmcm9tIFJlYWN0LkNvbXBvbmVudCwgdGhlIG1vZHVsZSBwYXR0ZXJuLFxuICAgICAgICAvLyBhbmQgc3RhdGVsZXNzIGNvbXBvbmVudHMsIGJ1dCBub3QgRVM2IGNsYXNzZXMgdGhhdCBkb24ndCBleHRlbmRcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoQ29tcG9uZW50LnByb3RvdHlwZSAmJiBDb21wb25lbnQucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQgfHwgIWNhbkluc3RhbnRpYXRlIHx8ICEoaW5zdCBpbnN0YW5jZW9mIENvbXBvbmVudCksICclcyguLi4pOiBSZWFjdCBjb21wb25lbnQgY2xhc3NlcyBtdXN0IGV4dGVuZCBSZWFjdC5Db21wb25lbnQuJywgQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIHx8ICdDb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUaGVzZSBzaG91bGQgYmUgc2V0IHVwIGluIHRoZSBjb25zdHJ1Y3RvciwgYnV0IGFzIGEgY29udmVuaWVuY2UgZm9yXG4gICAgLy8gc2ltcGxlciBjbGFzcyBhYnN0cmFjdGlvbnMsIHdlIHNldCB0aGVtIHVwIGFmdGVyIHRoZSBmYWN0LlxuICAgIGluc3QucHJvcHMgPSBwdWJsaWNQcm9wcztcbiAgICBpbnN0LmNvbnRleHQgPSBwdWJsaWNDb250ZXh0O1xuICAgIGluc3QucmVmcyA9IGVtcHR5T2JqZWN0O1xuICAgIGluc3QudXBkYXRlciA9IFJlYWN0VXBkYXRlUXVldWU7XG5cbiAgICB0aGlzLl9pbnN0YW5jZSA9IGluc3Q7XG5cbiAgICAvLyBTdG9yZSBhIHJlZmVyZW5jZSBmcm9tIHRoZSBpbnN0YW5jZSBiYWNrIHRvIHRoZSBpbnRlcm5hbCByZXByZXNlbnRhdGlvblxuICAgIFJlYWN0SW5zdGFuY2VNYXAuc2V0KGluc3QsIHRoaXMpO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFNpbmNlIHBsYWluIEpTIGNsYXNzZXMgYXJlIGRlZmluZWQgd2l0aG91dCBhbnkgc3BlY2lhbCBpbml0aWFsaXphdGlvblxuICAgICAgLy8gbG9naWMsIHdlIGNhbiBub3QgY2F0Y2ggY29tbW9uIGVycm9ycyBlYXJseS4gVGhlcmVmb3JlLCB3ZSBoYXZlIHRvXG4gICAgICAvLyBjYXRjaCB0aGVtIGhlcmUsIGF0IGluaXRpYWxpemF0aW9uIHRpbWUsIGluc3RlYWQuXG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaW5zdC5nZXRJbml0aWFsU3RhdGUgfHwgaW5zdC5nZXRJbml0aWFsU3RhdGUuaXNSZWFjdENsYXNzQXBwcm92ZWQsICdnZXRJbml0aWFsU3RhdGUgd2FzIGRlZmluZWQgb24gJXMsIGEgcGxhaW4gSmF2YVNjcmlwdCBjbGFzcy4gJyArICdUaGlzIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBjbGFzc2VzIGNyZWF0ZWQgdXNpbmcgUmVhY3QuY3JlYXRlQ2xhc3MuICcgKyAnRGlkIHlvdSBtZWFuIHRvIGRlZmluZSBhIHN0YXRlIHByb3BlcnR5IGluc3RlYWQ/JywgdGhpcy5nZXROYW1lKCkgfHwgJ2EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaW5zdC5nZXREZWZhdWx0UHJvcHMgfHwgaW5zdC5nZXREZWZhdWx0UHJvcHMuaXNSZWFjdENsYXNzQXBwcm92ZWQsICdnZXREZWZhdWx0UHJvcHMgd2FzIGRlZmluZWQgb24gJXMsIGEgcGxhaW4gSmF2YVNjcmlwdCBjbGFzcy4gJyArICdUaGlzIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBjbGFzc2VzIGNyZWF0ZWQgdXNpbmcgUmVhY3QuY3JlYXRlQ2xhc3MuICcgKyAnVXNlIGEgc3RhdGljIHByb3BlcnR5IHRvIGRlZmluZSBkZWZhdWx0UHJvcHMgaW5zdGVhZC4nLCB0aGlzLmdldE5hbWUoKSB8fCAnYSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFpbnN0LnByb3BUeXBlcywgJ3Byb3BUeXBlcyB3YXMgZGVmaW5lZCBhcyBhbiBpbnN0YW5jZSBwcm9wZXJ0eSBvbiAlcy4gVXNlIGEgc3RhdGljICcgKyAncHJvcGVydHkgdG8gZGVmaW5lIHByb3BUeXBlcyBpbnN0ZWFkLicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdhIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWluc3QuY29udGV4dFR5cGVzLCAnY29udGV4dFR5cGVzIHdhcyBkZWZpbmVkIGFzIGFuIGluc3RhbmNlIHByb3BlcnR5IG9uICVzLiBVc2UgYSAnICsgJ3N0YXRpYyBwcm9wZXJ0eSB0byBkZWZpbmUgY29udGV4dFR5cGVzIGluc3RlYWQuJywgdGhpcy5nZXROYW1lKCkgfHwgJ2EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgaW5zdC5jb21wb25lbnRTaG91bGRVcGRhdGUgIT09ICdmdW5jdGlvbicsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50U2hvdWxkVXBkYXRlKCkuIERpZCB5b3UgbWVhbiBzaG91bGRDb21wb25lbnRVcGRhdGUoKT8gJyArICdUaGUgbmFtZSBpcyBwaHJhc2VkIGFzIGEgcXVlc3Rpb24gYmVjYXVzZSB0aGUgZnVuY3Rpb24gaXMgJyArICdleHBlY3RlZCB0byByZXR1cm4gYSB2YWx1ZS4nLCB0aGlzLmdldE5hbWUoKSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiBpbnN0LmNvbXBvbmVudERpZFVubW91bnQgIT09ICdmdW5jdGlvbicsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50RGlkVW5tb3VudCgpLiBCdXQgdGhlcmUgaXMgbm8gc3VjaCBsaWZlY3ljbGUgbWV0aG9kLiAnICsgJ0RpZCB5b3UgbWVhbiBjb21wb25lbnRXaWxsVW5tb3VudCgpPycsIHRoaXMuZ2V0TmFtZSgpIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodHlwZW9mIGluc3QuY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcyAhPT0gJ2Z1bmN0aW9uJywgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzKCkuIERpZCB5b3UgbWVhbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKCk/JywgdGhpcy5nZXROYW1lKCkgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdmFyIGluaXRpYWxTdGF0ZSA9IGluc3Quc3RhdGU7XG4gICAgaWYgKGluaXRpYWxTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpbnN0LnN0YXRlID0gaW5pdGlhbFN0YXRlID0gbnVsbDtcbiAgICB9XG4gICAgISh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShpbml0aWFsU3RhdGUpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5zdGF0ZTogbXVzdCBiZSBzZXQgdG8gYW4gb2JqZWN0IG9yIG51bGwnLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSA9IG51bGw7XG4gICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdGb3JjZVVwZGF0ZSA9IGZhbHNlO1xuXG4gICAgaWYgKGluc3QuY29tcG9uZW50V2lsbE1vdW50KSB7XG4gICAgICBpbnN0LmNvbXBvbmVudFdpbGxNb3VudCgpO1xuICAgICAgLy8gV2hlbiBtb3VudGluZywgY2FsbHMgdG8gYHNldFN0YXRlYCBieSBgY29tcG9uZW50V2lsbE1vdW50YCB3aWxsIHNldFxuICAgICAgLy8gYHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlYCB3aXRob3V0IHRyaWdnZXJpbmcgYSByZS1yZW5kZXIuXG4gICAgICBpZiAodGhpcy5fcGVuZGluZ1N0YXRlUXVldWUpIHtcbiAgICAgICAgaW5zdC5zdGF0ZSA9IHRoaXMuX3Byb2Nlc3NQZW5kaW5nU3RhdGUoaW5zdC5wcm9wcywgaW5zdC5jb250ZXh0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBub3QgYSBzdGF0ZWxlc3MgY29tcG9uZW50LCB3ZSBub3cgcmVuZGVyXG4gICAgaWYgKHJlbmRlcmVkRWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZW5kZXJlZEVsZW1lbnQgPSB0aGlzLl9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZW5kZXJlZENvbXBvbmVudCA9IHRoaXMuX2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQocmVuZGVyZWRFbGVtZW50KTtcblxuICAgIHZhciBtYXJrdXAgPSBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIHRoaXMuX3Byb2Nlc3NDaGlsZENvbnRleHQoY29udGV4dCkpO1xuICAgIGlmIChpbnN0LmNvbXBvbmVudERpZE1vdW50KSB7XG4gICAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKGluc3QuY29tcG9uZW50RGlkTW91bnQsIGluc3QpO1xuICAgIH1cblxuICAgIHJldHVybiBtYXJrdXA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbGVhc2VzIGFueSByZXNvdXJjZXMgYWxsb2NhdGVkIGJ5IGBtb3VudENvbXBvbmVudGAuXG4gICAqXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuXG4gICAgaWYgKGluc3QuY29tcG9uZW50V2lsbFVubW91bnQpIHtcbiAgICAgIGluc3QuY29tcG9uZW50V2lsbFVubW91bnQoKTtcbiAgICB9XG5cbiAgICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudCh0aGlzLl9yZW5kZXJlZENvbXBvbmVudCk7XG4gICAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSBudWxsO1xuICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcblxuICAgIC8vIFJlc2V0IHBlbmRpbmcgZmllbGRzXG4gICAgLy8gRXZlbiBpZiB0aGlzIGNvbXBvbmVudCBpcyBzY2hlZHVsZWQgZm9yIGFub3RoZXIgdXBkYXRlIGluIFJlYWN0VXBkYXRlcyxcbiAgICAvLyBpdCB3b3VsZCBzdGlsbCBiZSBpZ25vcmVkIGJlY2F1c2UgdGhlc2UgZmllbGRzIGFyZSByZXNldC5cbiAgICB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSA9IG51bGw7XG4gICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdGb3JjZVVwZGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdDYWxsYmFja3MgPSBudWxsO1xuICAgIHRoaXMuX3BlbmRpbmdFbGVtZW50ID0gbnVsbDtcblxuICAgIC8vIFRoZXNlIGZpZWxkcyBkbyBub3QgcmVhbGx5IG5lZWQgdG8gYmUgcmVzZXQgc2luY2UgdGhpcyBvYmplY3QgaXMgbm9cbiAgICAvLyBsb25nZXIgYWNjZXNzaWJsZS5cbiAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgICB0aGlzLl90b3BMZXZlbFdyYXBwZXIgPSBudWxsO1xuXG4gICAgLy8gRGVsZXRlIHRoZSByZWZlcmVuY2UgZnJvbSB0aGUgaW5zdGFuY2UgdG8gdGhpcyBpbnRlcm5hbCByZXByZXNlbnRhdGlvblxuICAgIC8vIHdoaWNoIGFsbG93IHRoZSBpbnRlcm5hbHMgdG8gYmUgcHJvcGVybHkgY2xlYW5lZCB1cCBldmVuIGlmIHRoZSB1c2VyXG4gICAgLy8gbGVha3MgYSByZWZlcmVuY2UgdG8gdGhlIHB1YmxpYyBpbnN0YW5jZS5cbiAgICBSZWFjdEluc3RhbmNlTWFwLnJlbW92ZShpbnN0KTtcblxuICAgIC8vIFNvbWUgZXhpc3RpbmcgY29tcG9uZW50cyByZWx5IG9uIGluc3QucHJvcHMgZXZlbiBhZnRlciB0aGV5J3ZlIGJlZW5cbiAgICAvLyBkZXN0cm95ZWQgKGluIGV2ZW50IGhhbmRsZXJzKS5cbiAgICAvLyBUT0RPOiBpbnN0LnByb3BzID0gbnVsbDtcbiAgICAvLyBUT0RPOiBpbnN0LnN0YXRlID0gbnVsbDtcbiAgICAvLyBUT0RPOiBpbnN0LmNvbnRleHQgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGaWx0ZXJzIHRoZSBjb250ZXh0IG9iamVjdCB0byBvbmx5IGNvbnRhaW4ga2V5cyBzcGVjaWZpZWQgaW5cbiAgICogYGNvbnRleHRUeXBlc2BcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICogQHJldHVybiB7P29iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9tYXNrQ29udGV4dDogZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICB2YXIgbWFza2VkQ29udGV4dCA9IG51bGw7XG4gICAgdmFyIENvbXBvbmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG4gICAgdmFyIGNvbnRleHRUeXBlcyA9IENvbXBvbmVudC5jb250ZXh0VHlwZXM7XG4gICAgaWYgKCFjb250ZXh0VHlwZXMpIHtcbiAgICAgIHJldHVybiBlbXB0eU9iamVjdDtcbiAgICB9XG4gICAgbWFza2VkQ29udGV4dCA9IHt9O1xuICAgIGZvciAodmFyIGNvbnRleHROYW1lIGluIGNvbnRleHRUeXBlcykge1xuICAgICAgbWFza2VkQ29udGV4dFtjb250ZXh0TmFtZV0gPSBjb250ZXh0W2NvbnRleHROYW1lXTtcbiAgICB9XG4gICAgcmV0dXJuIG1hc2tlZENvbnRleHQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbHRlcnMgdGhlIGNvbnRleHQgb2JqZWN0IHRvIG9ubHkgY29udGFpbiBrZXlzIHNwZWNpZmllZCBpblxuICAgKiBgY29udGV4dFR5cGVzYCwgYW5kIGFzc2VydHMgdGhhdCB0aGV5IGFyZSB2YWxpZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICogQHJldHVybiB7P29iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9wcm9jZXNzQ29udGV4dDogZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICB2YXIgbWFza2VkQ29udGV4dCA9IHRoaXMuX21hc2tDb250ZXh0KGNvbnRleHQpO1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgQ29tcG9uZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcbiAgICAgIGlmIChDb21wb25lbnQuY29udGV4dFR5cGVzKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrUHJvcFR5cGVzKENvbXBvbmVudC5jb250ZXh0VHlwZXMsIG1hc2tlZENvbnRleHQsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY29udGV4dCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXNrZWRDb250ZXh0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY3VycmVudENvbnRleHRcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Byb2Nlc3NDaGlsZENvbnRleHQ6IGZ1bmN0aW9uIChjdXJyZW50Q29udGV4dCkge1xuICAgIHZhciBDb21wb25lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG4gICAgdmFyIGNoaWxkQ29udGV4dCA9IGluc3QuZ2V0Q2hpbGRDb250ZXh0ICYmIGluc3QuZ2V0Q2hpbGRDb250ZXh0KCk7XG4gICAgaWYgKGNoaWxkQ29udGV4dCkge1xuICAgICAgISh0eXBlb2YgQ29tcG9uZW50LmNoaWxkQ29udGV4dFR5cGVzID09PSAnb2JqZWN0JykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMuZ2V0Q2hpbGRDb250ZXh0KCk6IGNoaWxkQ29udGV4dFR5cGVzIG11c3QgYmUgZGVmaW5lZCBpbiBvcmRlciB0byAnICsgJ3VzZSBnZXRDaGlsZENvbnRleHQoKS4nLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB0aGlzLl9jaGVja1Byb3BUeXBlcyhDb21wb25lbnQuY2hpbGRDb250ZXh0VHlwZXMsIGNoaWxkQ29udGV4dCwgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5jaGlsZENvbnRleHQpO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgbmFtZSBpbiBjaGlsZENvbnRleHQpIHtcbiAgICAgICAgIShuYW1lIGluIENvbXBvbmVudC5jaGlsZENvbnRleHRUeXBlcykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMuZ2V0Q2hpbGRDb250ZXh0KCk6IGtleSBcIiVzXCIgaXMgbm90IGRlZmluZWQgaW4gY2hpbGRDb250ZXh0VHlwZXMuJywgdGhpcy5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JywgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFzc2lnbih7fSwgY3VycmVudENvbnRleHQsIGNoaWxkQ29udGV4dCk7XG4gICAgfVxuICAgIHJldHVybiBjdXJyZW50Q29udGV4dDtcbiAgfSxcblxuICAvKipcbiAgICogUHJvY2Vzc2VzIHByb3BzIGJ5IHNldHRpbmcgZGVmYXVsdCB2YWx1ZXMgZm9yIHVuc3BlY2lmaWVkIHByb3BzIGFuZFxuICAgKiBhc3NlcnRpbmcgdGhhdCB0aGUgcHJvcHMgYXJlIHZhbGlkLiBEb2VzIG5vdCBtdXRhdGUgaXRzIGFyZ3VtZW50OyByZXR1cm5zXG4gICAqIGEgbmV3IHByb3BzIG9iamVjdCB3aXRoIGRlZmF1bHRzIG1lcmdlZCBpbi5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG5ld1Byb3BzXG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9wcm9jZXNzUHJvcHM6IGZ1bmN0aW9uIChuZXdQcm9wcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgQ29tcG9uZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcbiAgICAgIGlmIChDb21wb25lbnQucHJvcFR5cGVzKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrUHJvcFR5cGVzKENvbXBvbmVudC5wcm9wVHlwZXMsIG5ld1Byb3BzLCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLnByb3ApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3UHJvcHM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFzc2VydCB0aGF0IHRoZSBwcm9wcyBhcmUgdmFsaWRcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHByb3BUeXBlcyBNYXAgb2YgcHJvcCBuYW1lIHRvIGEgUmVhY3RQcm9wVHlwZVxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uIGUuZy4gXCJwcm9wXCIsIFwiY29udGV4dFwiLCBcImNoaWxkIGNvbnRleHRcIlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NoZWNrUHJvcFR5cGVzOiBmdW5jdGlvbiAocHJvcFR5cGVzLCBwcm9wcywgbG9jYXRpb24pIHtcbiAgICAvLyBUT0RPOiBTdG9wIHZhbGlkYXRpbmcgcHJvcCB0eXBlcyBoZXJlIGFuZCBvbmx5IHVzZSB0aGUgZWxlbWVudFxuICAgIC8vIHZhbGlkYXRpb24uXG4gICAgdmFyIGNvbXBvbmVudE5hbWUgPSB0aGlzLmdldE5hbWUoKTtcbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBwcm9wVHlwZXMpIHtcbiAgICAgIGlmIChwcm9wVHlwZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHZhciBlcnJvcjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgYW4gaW52YXJpYW50IHRoYXQgZ2V0cyBjYXVnaHQuIEl0J3MgdGhlIHNhbWVcbiAgICAgICAgICAvLyBiZWhhdmlvciBhcyB3aXRob3V0IHRoaXMgc3RhdGVtZW50IGV4Y2VwdCB3aXRoIGEgYmV0dGVyIG1lc3NhZ2UuXG4gICAgICAgICAgISh0eXBlb2YgcHJvcFR5cGVzW3Byb3BOYW1lXSA9PT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXM6ICVzIHR5cGUgYCVzYCBpcyBpbnZhbGlkOyBpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgJyArICdmcm9tIFJlYWN0LlByb3BUeXBlcy4nLCBjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICBlcnJvciA9IHByb3BUeXBlc1twcm9wTmFtZV0ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgbnVsbCwgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgZXJyb3IgPSBleDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIC8vIFdlIG1heSB3YW50IHRvIGV4dGVuZCB0aGlzIGxvZ2ljIGZvciBzaW1pbGFyIGVycm9ycyBpblxuICAgICAgICAgIC8vIHRvcC1sZXZlbCByZW5kZXIgY2FsbHMsIHNvIEknbSBhYnN0cmFjdGluZyBpdCBhd2F5IGludG9cbiAgICAgICAgICAvLyBhIGZ1bmN0aW9uIHRvIG1pbmltaXplIHJlZmFjdG9yaW5nIGluIHRoZSBmdXR1cmVcbiAgICAgICAgICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0odGhpcyk7XG5cbiAgICAgICAgICBpZiAobG9jYXRpb24gPT09IFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCkge1xuICAgICAgICAgICAgLy8gUHJlZmFjZSBnaXZlcyB1cyBzb21ldGhpbmcgdG8gYmxhY2tsaXN0IGluIHdhcm5pbmcgbW9kdWxlXG4gICAgICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ0ZhaWxlZCBDb21wb3NpdGUgcHJvcFR5cGU6ICVzJXMnLCBlcnJvci5tZXNzYWdlLCBhZGRlbmR1bSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFpbGVkIENvbnRleHQgVHlwZXM6ICVzJXMnLCBlcnJvci5tZXNzYWdlLCBhZGRlbmR1bSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHJlY2VpdmVDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0RWxlbWVudCwgdHJhbnNhY3Rpb24sIG5leHRDb250ZXh0KSB7XG4gICAgdmFyIHByZXZFbGVtZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQ7XG4gICAgdmFyIHByZXZDb250ZXh0ID0gdGhpcy5fY29udGV4dDtcblxuICAgIHRoaXMuX3BlbmRpbmdFbGVtZW50ID0gbnVsbDtcblxuICAgIHRoaXMudXBkYXRlQ29tcG9uZW50KHRyYW5zYWN0aW9uLCBwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQsIHByZXZDb250ZXh0LCBuZXh0Q29udGV4dCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIElmIGFueSBvZiBgX3BlbmRpbmdFbGVtZW50YCwgYF9wZW5kaW5nU3RhdGVRdWV1ZWAsIG9yIGBfcGVuZGluZ0ZvcmNlVXBkYXRlYFxuICAgKiBpcyBzZXQsIHVwZGF0ZSB0aGUgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5OiBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcbiAgICBpZiAodGhpcy5fcGVuZGluZ0VsZW1lbnQgIT0gbnVsbCkge1xuICAgICAgUmVhY3RSZWNvbmNpbGVyLnJlY2VpdmVDb21wb25lbnQodGhpcywgdGhpcy5fcGVuZGluZ0VsZW1lbnQgfHwgdGhpcy5fY3VycmVudEVsZW1lbnQsIHRyYW5zYWN0aW9uLCB0aGlzLl9jb250ZXh0KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcGVuZGluZ1N0YXRlUXVldWUgIT09IG51bGwgfHwgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlKSB7XG4gICAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudCh0cmFuc2FjdGlvbiwgdGhpcy5fY3VycmVudEVsZW1lbnQsIHRoaXMuX2N1cnJlbnRFbGVtZW50LCB0aGlzLl9jb250ZXh0LCB0aGlzLl9jb250ZXh0KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYW4gdXBkYXRlIHRvIGEgbW91bnRlZCBjb21wb25lbnQuIFRoZSBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIGFuZFxuICAgKiBzaG91bGRDb21wb25lbnRVcGRhdGUgbWV0aG9kcyBhcmUgY2FsbGVkLCB0aGVuIChhc3N1bWluZyB0aGUgdXBkYXRlIGlzbid0XG4gICAqIHNraXBwZWQpIHRoZSByZW1haW5pbmcgdXBkYXRlIGxpZmVjeWNsZSBtZXRob2RzIGFyZSBjYWxsZWQgYW5kIHRoZSBET01cbiAgICogcmVwcmVzZW50YXRpb24gaXMgdXBkYXRlZC5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhpcyBpbXBsZW1lbnRzIFJlYWN0J3MgcmVuZGVyaW5nIGFuZCByZWNvbmNpbGlhdGlvbiBhbGdvcml0aG0uXG4gICAqIFNvcGhpc3RpY2F0ZWQgY2xpZW50cyBtYXkgd2lzaCB0byBvdmVycmlkZSB0aGlzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBwcmV2UGFyZW50RWxlbWVudFxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dFBhcmVudEVsZW1lbnRcbiAgICogQGludGVybmFsXG4gICAqIEBvdmVycmlkYWJsZVxuICAgKi9cbiAgdXBkYXRlQ29tcG9uZW50OiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHByZXZQYXJlbnRFbGVtZW50LCBuZXh0UGFyZW50RWxlbWVudCwgcHJldlVubWFza2VkQ29udGV4dCwgbmV4dFVubWFza2VkQ29udGV4dCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG5cbiAgICB2YXIgbmV4dENvbnRleHQgPSB0aGlzLl9jb250ZXh0ID09PSBuZXh0VW5tYXNrZWRDb250ZXh0ID8gaW5zdC5jb250ZXh0IDogdGhpcy5fcHJvY2Vzc0NvbnRleHQobmV4dFVubWFza2VkQ29udGV4dCk7XG4gICAgdmFyIG5leHRQcm9wcztcblxuICAgIC8vIERpc3Rpbmd1aXNoIGJldHdlZW4gYSBwcm9wcyB1cGRhdGUgdmVyc3VzIGEgc2ltcGxlIHN0YXRlIHVwZGF0ZVxuICAgIGlmIChwcmV2UGFyZW50RWxlbWVudCA9PT0gbmV4dFBhcmVudEVsZW1lbnQpIHtcbiAgICAgIC8vIFNraXAgY2hlY2tpbmcgcHJvcCB0eXBlcyBhZ2FpbiAtLSB3ZSBkb24ndCByZWFkIGluc3QucHJvcHMgdG8gYXZvaWRcbiAgICAgIC8vIHdhcm5pbmcgZm9yIERPTSBjb21wb25lbnQgcHJvcHMgaW4gdGhpcyB1cGdyYWRlXG4gICAgICBuZXh0UHJvcHMgPSBuZXh0UGFyZW50RWxlbWVudC5wcm9wcztcbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dFByb3BzID0gdGhpcy5fcHJvY2Vzc1Byb3BzKG5leHRQYXJlbnRFbGVtZW50LnByb3BzKTtcbiAgICAgIC8vIEFuIHVwZGF0ZSBoZXJlIHdpbGwgc2NoZWR1bGUgYW4gdXBkYXRlIGJ1dCBpbW1lZGlhdGVseSBzZXRcbiAgICAgIC8vIF9wZW5kaW5nU3RhdGVRdWV1ZSB3aGljaCB3aWxsIGVuc3VyZSB0aGF0IGFueSBzdGF0ZSB1cGRhdGVzIGdldHNcbiAgICAgIC8vIGltbWVkaWF0ZWx5IHJlY29uY2lsZWQgaW5zdGVhZCBvZiB3YWl0aW5nIGZvciB0aGUgbmV4dCBiYXRjaC5cblxuICAgICAgaWYgKGluc3QuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcykge1xuICAgICAgICBpbnN0LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzLCBuZXh0Q29udGV4dCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIG5leHRTdGF0ZSA9IHRoaXMuX3Byb2Nlc3NQZW5kaW5nU3RhdGUobmV4dFByb3BzLCBuZXh0Q29udGV4dCk7XG5cbiAgICB2YXIgc2hvdWxkVXBkYXRlID0gdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlIHx8ICFpbnN0LnNob3VsZENvbXBvbmVudFVwZGF0ZSB8fCBpbnN0LnNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiBzaG91bGRVcGRhdGUgIT09ICd1bmRlZmluZWQnLCAnJXMuc2hvdWxkQ29tcG9uZW50VXBkYXRlKCk6IFJldHVybmVkIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIGEgJyArICdib29sZWFuIHZhbHVlLiBNYWtlIHN1cmUgdG8gcmV0dXJuIHRydWUgb3IgZmFsc2UuJywgdGhpcy5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlID0gZmFsc2U7XG4gICAgICAvLyBXaWxsIHNldCBgdGhpcy5wcm9wc2AsIGB0aGlzLnN0YXRlYCBhbmQgYHRoaXMuY29udGV4dGAuXG4gICAgICB0aGlzLl9wZXJmb3JtQ29tcG9uZW50VXBkYXRlKG5leHRQYXJlbnRFbGVtZW50LCBuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQsIHRyYW5zYWN0aW9uLCBuZXh0VW5tYXNrZWRDb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgaXQncyBkZXRlcm1pbmVkIHRoYXQgYSBjb21wb25lbnQgc2hvdWxkIG5vdCB1cGRhdGUsIHdlIHN0aWxsIHdhbnRcbiAgICAgIC8vIHRvIHNldCBwcm9wcyBhbmQgc3RhdGUgYnV0IHdlIHNob3J0Y3V0IHRoZSByZXN0IG9mIHRoZSB1cGRhdGUuXG4gICAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG5leHRQYXJlbnRFbGVtZW50O1xuICAgICAgdGhpcy5fY29udGV4dCA9IG5leHRVbm1hc2tlZENvbnRleHQ7XG4gICAgICBpbnN0LnByb3BzID0gbmV4dFByb3BzO1xuICAgICAgaW5zdC5zdGF0ZSA9IG5leHRTdGF0ZTtcbiAgICAgIGluc3QuY29udGV4dCA9IG5leHRDb250ZXh0O1xuICAgIH1cbiAgfSxcblxuICBfcHJvY2Vzc1BlbmRpbmdTdGF0ZTogZnVuY3Rpb24gKHByb3BzLCBjb250ZXh0KSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcbiAgICB2YXIgcXVldWUgPSB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZTtcbiAgICB2YXIgcmVwbGFjZSA9IHRoaXMuX3BlbmRpbmdSZXBsYWNlU3RhdGU7XG4gICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlID0gbnVsbDtcblxuICAgIGlmICghcXVldWUpIHtcbiAgICAgIHJldHVybiBpbnN0LnN0YXRlO1xuICAgIH1cblxuICAgIGlmIChyZXBsYWNlICYmIHF1ZXVlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHF1ZXVlWzBdO1xuICAgIH1cblxuICAgIHZhciBuZXh0U3RhdGUgPSBhc3NpZ24oe30sIHJlcGxhY2UgPyBxdWV1ZVswXSA6IGluc3Quc3RhdGUpO1xuICAgIGZvciAodmFyIGkgPSByZXBsYWNlID8gMSA6IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHBhcnRpYWwgPSBxdWV1ZVtpXTtcbiAgICAgIGFzc2lnbihuZXh0U3RhdGUsIHR5cGVvZiBwYXJ0aWFsID09PSAnZnVuY3Rpb24nID8gcGFydGlhbC5jYWxsKGluc3QsIG5leHRTdGF0ZSwgcHJvcHMsIGNvbnRleHQpIDogcGFydGlhbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5leHRTdGF0ZTtcbiAgfSxcblxuICAvKipcbiAgICogTWVyZ2VzIG5ldyBwcm9wcyBhbmQgc3RhdGUsIG5vdGlmaWVzIGRlbGVnYXRlIG1ldGhvZHMgb2YgdXBkYXRlIGFuZFxuICAgKiBwZXJmb3JtcyB1cGRhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBOZXh0IGVsZW1lbnRcbiAgICogQHBhcmFtIHtvYmplY3R9IG5leHRQcm9wcyBOZXh0IHB1YmxpYyBvYmplY3QgdG8gc2V0IGFzIHByb3BlcnRpZXMuXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dFN0YXRlIE5leHQgb2JqZWN0IHRvIHNldCBhcyBzdGF0ZS5cbiAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0Q29udGV4dCBOZXh0IHB1YmxpYyBvYmplY3QgdG8gc2V0IGFzIGNvbnRleHQuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHs/b2JqZWN0fSB1bm1hc2tlZENvbnRleHRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9wZXJmb3JtQ29tcG9uZW50VXBkYXRlOiBmdW5jdGlvbiAobmV4dEVsZW1lbnQsIG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCwgdHJhbnNhY3Rpb24sIHVubWFza2VkQ29udGV4dCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG5cbiAgICB2YXIgaGFzQ29tcG9uZW50RGlkVXBkYXRlID0gQm9vbGVhbihpbnN0LmNvbXBvbmVudERpZFVwZGF0ZSk7XG4gICAgdmFyIHByZXZQcm9wcztcbiAgICB2YXIgcHJldlN0YXRlO1xuICAgIHZhciBwcmV2Q29udGV4dDtcbiAgICBpZiAoaGFzQ29tcG9uZW50RGlkVXBkYXRlKSB7XG4gICAgICBwcmV2UHJvcHMgPSBpbnN0LnByb3BzO1xuICAgICAgcHJldlN0YXRlID0gaW5zdC5zdGF0ZTtcbiAgICAgIHByZXZDb250ZXh0ID0gaW5zdC5jb250ZXh0O1xuICAgIH1cblxuICAgIGlmIChpbnN0LmNvbXBvbmVudFdpbGxVcGRhdGUpIHtcbiAgICAgIGluc3QuY29tcG9uZW50V2lsbFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpO1xuICAgIH1cblxuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbmV4dEVsZW1lbnQ7XG4gICAgdGhpcy5fY29udGV4dCA9IHVubWFza2VkQ29udGV4dDtcbiAgICBpbnN0LnByb3BzID0gbmV4dFByb3BzO1xuICAgIGluc3Quc3RhdGUgPSBuZXh0U3RhdGU7XG4gICAgaW5zdC5jb250ZXh0ID0gbmV4dENvbnRleHQ7XG5cbiAgICB0aGlzLl91cGRhdGVSZW5kZXJlZENvbXBvbmVudCh0cmFuc2FjdGlvbiwgdW5tYXNrZWRDb250ZXh0KTtcblxuICAgIGlmIChoYXNDb21wb25lbnREaWRVcGRhdGUpIHtcbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoaW5zdC5jb21wb25lbnREaWRVcGRhdGUuYmluZChpbnN0LCBwcmV2UHJvcHMsIHByZXZTdGF0ZSwgcHJldkNvbnRleHQpLCBpbnN0KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENhbGwgdGhlIGNvbXBvbmVudCdzIGByZW5kZXJgIG1ldGhvZCBhbmQgdXBkYXRlIHRoZSBET00gYWNjb3JkaW5nbHkuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQGludGVybmFsXG4gICAqL1xuICBfdXBkYXRlUmVuZGVyZWRDb21wb25lbnQ6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHZhciBwcmV2Q29tcG9uZW50SW5zdGFuY2UgPSB0aGlzLl9yZW5kZXJlZENvbXBvbmVudDtcbiAgICB2YXIgcHJldlJlbmRlcmVkRWxlbWVudCA9IHByZXZDb21wb25lbnRJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQ7XG4gICAgdmFyIG5leHRSZW5kZXJlZEVsZW1lbnQgPSB0aGlzLl9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQoKTtcbiAgICBpZiAoc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQocHJldlJlbmRlcmVkRWxlbWVudCwgbmV4dFJlbmRlcmVkRWxlbWVudCkpIHtcbiAgICAgIFJlYWN0UmVjb25jaWxlci5yZWNlaXZlQ29tcG9uZW50KHByZXZDb21wb25lbnRJbnN0YW5jZSwgbmV4dFJlbmRlcmVkRWxlbWVudCwgdHJhbnNhY3Rpb24sIHRoaXMuX3Byb2Nlc3NDaGlsZENvbnRleHQoY29udGV4dCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGVzZSB0d28gSURzIGFyZSBhY3R1YWxseSB0aGUgc2FtZSEgQnV0IG5vdGhpbmcgc2hvdWxkIHJlbHkgb24gdGhhdC5cbiAgICAgIHZhciB0aGlzSUQgPSB0aGlzLl9yb290Tm9kZUlEO1xuICAgICAgdmFyIHByZXZDb21wb25lbnRJRCA9IHByZXZDb21wb25lbnRJbnN0YW5jZS5fcm9vdE5vZGVJRDtcbiAgICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHByZXZDb21wb25lbnRJbnN0YW5jZSk7XG5cbiAgICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gdGhpcy5faW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChuZXh0UmVuZGVyZWRFbGVtZW50KTtcbiAgICAgIHZhciBuZXh0TWFya3VwID0gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50LCB0aGlzSUQsIHRyYW5zYWN0aW9uLCB0aGlzLl9wcm9jZXNzQ2hpbGRDb250ZXh0KGNvbnRleHQpKTtcbiAgICAgIHRoaXMuX3JlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQocHJldkNvbXBvbmVudElELCBuZXh0TWFya3VwKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEOiBmdW5jdGlvbiAocHJldkNvbXBvbmVudElELCBuZXh0TWFya3VwKSB7XG4gICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEKHByZXZDb21wb25lbnRJRCwgbmV4dE1hcmt1cCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnRXaXRob3V0T3duZXJPckNvbnRleHQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuICAgIHZhciByZW5kZXJlZENvbXBvbmVudCA9IGluc3QucmVuZGVyKCk7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFdlIGFsbG93IGF1dG8tbW9ja3MgdG8gcHJvY2VlZCBhcyBpZiB0aGV5J3JlIHJldHVybmluZyBudWxsLlxuICAgICAgaWYgKHR5cGVvZiByZW5kZXJlZENvbXBvbmVudCA9PT0gJ3VuZGVmaW5lZCcgJiYgaW5zdC5yZW5kZXIuX2lzTW9ja0Z1bmN0aW9uKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgcHJvYmFibHkgYmFkIHByYWN0aWNlLiBDb25zaWRlciB3YXJuaW5nIGhlcmUgYW5kXG4gICAgICAgIC8vIGRlcHJlY2F0aW5nIHRoaXMgY29udmVuaWVuY2UuXG4gICAgICAgIHJlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVuZGVyZWRDb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlbmRlcmVkQ29tcG9uZW50O1xuICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSB0aGlzO1xuICAgIHRyeSB7XG4gICAgICByZW5kZXJlZENvbXBvbmVudCA9IHRoaXMuX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudFdpdGhvdXRPd25lck9yQ29udGV4dCgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgIShcbiAgICAvLyBUT0RPOiBBbiBgaXNWYWxpZE5vZGVgIGZ1bmN0aW9uIHdvdWxkIHByb2JhYmx5IGJlIG1vcmUgYXBwcm9wcmlhdGVcbiAgICByZW5kZXJlZENvbXBvbmVudCA9PT0gbnVsbCB8fCByZW5kZXJlZENvbXBvbmVudCA9PT0gZmFsc2UgfHwgUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KHJlbmRlcmVkQ29tcG9uZW50KSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMucmVuZGVyKCk6IEEgdmFsaWQgUmVhY3RDb21wb25lbnQgbXVzdCBiZSByZXR1cm5lZC4gWW91IG1heSBoYXZlICcgKyAncmV0dXJuZWQgdW5kZWZpbmVkLCBhbiBhcnJheSBvciBzb21lIG90aGVyIGludmFsaWQgb2JqZWN0LicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVuZGVyZWRDb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIExhemlseSBhbGxvY2F0ZXMgdGhlIHJlZnMgb2JqZWN0IGFuZCBzdG9yZXMgYGNvbXBvbmVudGAgYXMgYHJlZmAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWYgUmVmZXJlbmNlIG5hbWUuXG4gICAqIEBwYXJhbSB7Y29tcG9uZW50fSBjb21wb25lbnQgQ29tcG9uZW50IHRvIHN0b3JlIGFzIGByZWZgLlxuICAgKiBAZmluYWxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGF0dGFjaFJlZjogZnVuY3Rpb24gKHJlZiwgY29tcG9uZW50KSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLmdldFB1YmxpY0luc3RhbmNlKCk7XG4gICAgIShpbnN0ICE9IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1N0YXRlbGVzcyBmdW5jdGlvbiBjb21wb25lbnRzIGNhbm5vdCBoYXZlIHJlZnMuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHZhciBwdWJsaWNDb21wb25lbnRJbnN0YW5jZSA9IGNvbXBvbmVudC5nZXRQdWJsaWNJbnN0YW5jZSgpO1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudCAmJiBjb21wb25lbnQuZ2V0TmFtZSA/IGNvbXBvbmVudC5nZXROYW1lKCkgOiAnYSBjb21wb25lbnQnO1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcocHVibGljQ29tcG9uZW50SW5zdGFuY2UgIT0gbnVsbCwgJ1N0YXRlbGVzcyBmdW5jdGlvbiBjb21wb25lbnRzIGNhbm5vdCBiZSBnaXZlbiByZWZzICcgKyAnKFNlZSByZWYgXCIlc1wiIGluICVzIGNyZWF0ZWQgYnkgJXMpLiAnICsgJ0F0dGVtcHRzIHRvIGFjY2VzcyB0aGlzIHJlZiB3aWxsIGZhaWwuJywgcmVmLCBjb21wb25lbnROYW1lLCB0aGlzLmdldE5hbWUoKSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHZhciByZWZzID0gaW5zdC5yZWZzID09PSBlbXB0eU9iamVjdCA/IGluc3QucmVmcyA9IHt9IDogaW5zdC5yZWZzO1xuICAgIHJlZnNbcmVmXSA9IHB1YmxpY0NvbXBvbmVudEluc3RhbmNlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEZXRhY2hlcyBhIHJlZmVyZW5jZSBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmIE5hbWUgdG8gZGVyZWZlcmVuY2UuXG4gICAqIEBmaW5hbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGV0YWNoUmVmOiBmdW5jdGlvbiAocmVmKSB7XG4gICAgdmFyIHJlZnMgPSB0aGlzLmdldFB1YmxpY0luc3RhbmNlKCkucmVmcztcbiAgICBkZWxldGUgcmVmc1tyZWZdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgYSB0ZXh0IGRlc2NyaXB0aW9uIG9mIHRoZSBjb21wb25lbnQgdGhhdCBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBpdFxuICAgKiBpbiBlcnJvciBtZXNzYWdlcy5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgbmFtZSBvciBudWxsLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldE5hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdHlwZSA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG4gICAgdmFyIGNvbnN0cnVjdG9yID0gdGhpcy5faW5zdGFuY2UgJiYgdGhpcy5faW5zdGFuY2UuY29uc3RydWN0b3I7XG4gICAgcmV0dXJuIHR5cGUuZGlzcGxheU5hbWUgfHwgY29uc3RydWN0b3IgJiYgY29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgdHlwZS5uYW1lIHx8IGNvbnN0cnVjdG9yICYmIGNvbnN0cnVjdG9yLm5hbWUgfHwgbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBwdWJsaWNseSBhY2Nlc3NpYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgY29tcG9uZW50IC0gaS5lLiB3aGF0XG4gICAqIGlzIGV4cG9zZWQgYnkgcmVmcyBhbmQgcmV0dXJuZWQgYnkgcmVuZGVyLiBDYW4gYmUgbnVsbCBmb3Igc3RhdGVsZXNzXG4gICAqIGNvbXBvbmVudHMuXG4gICAqXG4gICAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fSB0aGUgcHVibGljIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXRQdWJsaWNJbnN0YW5jZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG4gICAgaWYgKGluc3QgaW5zdGFuY2VvZiBTdGF0ZWxlc3NDb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gaW5zdDtcbiAgfSxcblxuICAvLyBTdHViXG4gIF9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50OiBudWxsXG5cbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdENvbXBvc2l0ZUNvbXBvbmVudE1peGluLCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnLCB7XG4gIG1vdW50Q29tcG9uZW50OiAnbW91bnRDb21wb25lbnQnLFxuICB1cGRhdGVDb21wb25lbnQ6ICd1cGRhdGVDb21wb25lbnQnLFxuICBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50OiAnX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCdcbn0pO1xuXG52YXIgUmVhY3RDb21wb3NpdGVDb21wb25lbnQgPSB7XG5cbiAgTWl4aW46IFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50TWl4aW5cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDdXJyZW50T3duZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogS2VlcHMgdHJhY2sgb2YgdGhlIGN1cnJlbnQgb3duZXIuXG4gKlxuICogVGhlIGN1cnJlbnQgb3duZXIgaXMgdGhlIGNvbXBvbmVudCB3aG8gc2hvdWxkIG93biBhbnkgY29tcG9uZW50cyB0aGF0IGFyZVxuICogY3VycmVudGx5IGJlaW5nIGNvbnN0cnVjdGVkLlxuICovXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSB7XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAdHlwZSB7UmVhY3RDb21wb25lbnR9XG4gICAqL1xuICBjdXJyZW50OiBudWxsXG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDdXJyZW50T3duZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NXG4gKi9cblxuLyogZ2xvYmFscyBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18qL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcbnZhciBSZWFjdERPTVRleHRDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0RE9NVGV4dENvbXBvbmVudCcpO1xudmFyIFJlYWN0RGVmYXVsdEluamVjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3REZWZhdWx0SW5qZWN0aW9uJyk7XG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VIYW5kbGVzJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xudmFyIFJlYWN0VmVyc2lvbiA9IHJlcXVpcmUoJy4vUmVhY3RWZXJzaW9uJyk7XG5cbnZhciBmaW5kRE9NTm9kZSA9IHJlcXVpcmUoJy4vZmluZERPTU5vZGUnKTtcbnZhciByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lciA9IHJlcXVpcmUoJy4vcmVuZGVyU3VidHJlZUludG9Db250YWluZXInKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5SZWFjdERlZmF1bHRJbmplY3Rpb24uaW5qZWN0KCk7XG5cbnZhciByZW5kZXIgPSBSZWFjdFBlcmYubWVhc3VyZSgnUmVhY3QnLCAncmVuZGVyJywgUmVhY3RNb3VudC5yZW5kZXIpO1xuXG52YXIgUmVhY3QgPSB7XG4gIGZpbmRET01Ob2RlOiBmaW5kRE9NTm9kZSxcbiAgcmVuZGVyOiByZW5kZXIsXG4gIHVubW91bnRDb21wb25lbnRBdE5vZGU6IFJlYWN0TW91bnQudW5tb3VudENvbXBvbmVudEF0Tm9kZSxcbiAgdmVyc2lvbjogUmVhY3RWZXJzaW9uLFxuXG4gIC8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuICB1bnN0YWJsZV9iYXRjaGVkVXBkYXRlczogUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzLFxuICB1bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcjogcmVuZGVyU3VidHJlZUludG9Db250YWluZXJcbn07XG5cbi8vIEluamVjdCB0aGUgcnVudGltZSBpbnRvIGEgZGV2dG9vbHMgZ2xvYmFsIGhvb2sgcmVnYXJkbGVzcyBvZiBicm93c2VyLlxuLy8gQWxsb3dzIGZvciBkZWJ1Z2dpbmcgd2hlbiB0aGUgaG9vayBpcyBpbmplY3RlZCBvbiB0aGUgcGFnZS5cbi8qIGVzbGludC1lbmFibGUgY2FtZWxjYXNlICovXG5pZiAodHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5pbmplY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLmluamVjdCh7XG4gICAgQ3VycmVudE93bmVyOiBSZWFjdEN1cnJlbnRPd25lcixcbiAgICBJbnN0YW5jZUhhbmRsZXM6IFJlYWN0SW5zdGFuY2VIYW5kbGVzLFxuICAgIE1vdW50OiBSZWFjdE1vdW50LFxuICAgIFJlY29uY2lsZXI6IFJlYWN0UmVjb25jaWxlcixcbiAgICBUZXh0Q29tcG9uZW50OiBSZWFjdERPTVRleHRDb21wb25lbnRcbiAgfSk7XG59XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG4gIGlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgd2luZG93LnRvcCA9PT0gd2luZG93LnNlbGYpIHtcblxuICAgIC8vIEZpcnN0IGNoZWNrIGlmIGRldnRvb2xzIGlzIG5vdCBpbnN0YWxsZWRcbiAgICBpZiAodHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIElmIHdlJ3JlIGluIENocm9tZSBvciBGaXJlZm94LCBwcm92aWRlIGEgZG93bmxvYWQgbGluayBpZiBub3QgaW5zdGFsbGVkLlxuICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPiAtMSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0VkZ2UnKSA9PT0gLTEgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgPiAtMSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCdEb3dubG9hZCB0aGUgUmVhY3QgRGV2VG9vbHMgZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6ICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC1kZXZ0b29scycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHdlJ3JlIGluIElFOCwgY2hlY2sgdG8gc2VlIGlmIHdlIGFyZSBpbiBjb21wYXRpYmlsaXR5IG1vZGUgYW5kIHByb3ZpZGVcbiAgICAvLyBpbmZvcm1hdGlvbiBvbiBwcmV2ZW50aW5nIGNvbXBhdGliaWxpdHkgbW9kZVxuICAgIHZhciBpZUNvbXBhdGliaWxpdHlNb2RlID0gZG9jdW1lbnQuZG9jdW1lbnRNb2RlICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSA8IDg7XG5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaWVDb21wYXRpYmlsaXR5TW9kZSwgJ0ludGVybmV0IEV4cGxvcmVyIGlzIHJ1bm5pbmcgaW4gY29tcGF0aWJpbGl0eSBtb2RlOyBwbGVhc2UgYWRkIHRoZSAnICsgJ2ZvbGxvd2luZyB0YWcgdG8geW91ciBIVE1MIHRvIHByZXZlbnQgdGhpcyBmcm9tIGhhcHBlbmluZzogJyArICc8bWV0YSBodHRwLWVxdWl2PVwiWC1VQS1Db21wYXRpYmxlXCIgY29udGVudD1cIklFPWVkZ2VcIiAvPicpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIGV4cGVjdGVkRmVhdHVyZXMgPSBbXG4gICAgLy8gc2hpbXNcbiAgICBBcnJheS5pc0FycmF5LCBBcnJheS5wcm90b3R5cGUuZXZlcnksIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLCBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiwgQXJyYXkucHJvdG90eXBlLm1hcCwgRGF0ZS5ub3csIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLCBPYmplY3Qua2V5cywgU3RyaW5nLnByb3RvdHlwZS5zcGxpdCwgU3RyaW5nLnByb3RvdHlwZS50cmltLFxuXG4gICAgLy8gc2hhbXNcbiAgICBPYmplY3QuY3JlYXRlLCBPYmplY3QuZnJlZXplXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwZWN0ZWRGZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFleHBlY3RlZEZlYXR1cmVzW2ldKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ09uZSBvciBtb3JlIEVTNSBzaGltL3NoYW1zIGV4cGVjdGVkIGJ5IFJlYWN0IGFyZSBub3QgYXZhaWxhYmxlOiAnICsgJ2h0dHBzOi8vZmIubWUvcmVhY3Qtd2FybmluZy1wb2x5ZmlsbHMnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NQnV0dG9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgbW91c2VMaXN0ZW5lck5hbWVzID0ge1xuICBvbkNsaWNrOiB0cnVlLFxuICBvbkRvdWJsZUNsaWNrOiB0cnVlLFxuICBvbk1vdXNlRG93bjogdHJ1ZSxcbiAgb25Nb3VzZU1vdmU6IHRydWUsXG4gIG9uTW91c2VVcDogdHJ1ZSxcblxuICBvbkNsaWNrQ2FwdHVyZTogdHJ1ZSxcbiAgb25Eb3VibGVDbGlja0NhcHR1cmU6IHRydWUsXG4gIG9uTW91c2VEb3duQ2FwdHVyZTogdHJ1ZSxcbiAgb25Nb3VzZU1vdmVDYXB0dXJlOiB0cnVlLFxuICBvbk1vdXNlVXBDYXB0dXJlOiB0cnVlXG59O1xuXG4vKipcbiAqIEltcGxlbWVudHMgYSA8YnV0dG9uPiBuYXRpdmUgY29tcG9uZW50IHRoYXQgZG9lcyBub3QgcmVjZWl2ZSBtb3VzZSBldmVudHNcbiAqIHdoZW4gYGRpc2FibGVkYCBpcyBzZXQuXG4gKi9cbnZhciBSZWFjdERPTUJ1dHRvbiA9IHtcbiAgZ2V0TmF0aXZlUHJvcHM6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIGlmICghcHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiBwcm9wcztcbiAgICB9XG5cbiAgICAvLyBDb3B5IHRoZSBwcm9wcywgZXhjZXB0IHRoZSBtb3VzZSBsaXN0ZW5lcnNcbiAgICB2YXIgbmF0aXZlUHJvcHMgPSB7fTtcbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHtcbiAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmICFtb3VzZUxpc3RlbmVyTmFtZXNba2V5XSkge1xuICAgICAgICBuYXRpdmVQcm9wc1trZXldID0gcHJvcHNba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmF0aXZlUHJvcHM7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01CdXR0b247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NQ29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbi8qIGdsb2JhbCBoYXNPd25Qcm9wZXJ0eTp0cnVlICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEF1dG9Gb2N1c1V0aWxzID0gcmVxdWlyZSgnLi9BdXRvRm9jdXNVdGlscycpO1xudmFyIENTU1Byb3BlcnR5T3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vQ1NTUHJvcGVydHlPcGVyYXRpb25zJyk7XG52YXIgRE9NUHJvcGVydHkgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5Jyk7XG52YXIgRE9NUHJvcGVydHlPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eU9wZXJhdGlvbnMnKTtcbnZhciBFdmVudENvbnN0YW50cyA9IHJlcXVpcmUoJy4vRXZlbnRDb25zdGFudHMnKTtcbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlcicpO1xudmFyIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0RE9NQnV0dG9uID0gcmVxdWlyZSgnLi9SZWFjdERPTUJ1dHRvbicpO1xudmFyIFJlYWN0RE9NSW5wdXQgPSByZXF1aXJlKCcuL1JlYWN0RE9NSW5wdXQnKTtcbnZhciBSZWFjdERPTU9wdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RET01PcHRpb24nKTtcbnZhciBSZWFjdERPTVNlbGVjdCA9IHJlcXVpcmUoJy4vUmVhY3RET01TZWxlY3QnKTtcbnZhciBSZWFjdERPTVRleHRhcmVhID0gcmVxdWlyZSgnLi9SZWFjdERPTVRleHRhcmVhJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFJlYWN0TXVsdGlDaGlsZCA9IHJlcXVpcmUoJy4vUmVhY3RNdWx0aUNoaWxkJyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBSZWFjdFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZVF1ZXVlJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vY2FuRGVmaW5lUHJvcGVydHknKTtcbnZhciBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIgPSByZXF1aXJlKCcuL2VzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlcicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIGlzRXZlbnRTdXBwb3J0ZWQgPSByZXF1aXJlKCcuL2lzRXZlbnRTdXBwb3J0ZWQnKTtcbnZhciBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG52YXIgc2V0SW5uZXJIVE1MID0gcmVxdWlyZSgnLi9zZXRJbm5lckhUTUwnKTtcbnZhciBzZXRUZXh0Q29udGVudCA9IHJlcXVpcmUoJy4vc2V0VGV4dENvbnRlbnQnKTtcbnZhciBzaGFsbG93RXF1YWwgPSByZXF1aXJlKCdmYmpzL2xpYi9zaGFsbG93RXF1YWwnKTtcbnZhciB2YWxpZGF0ZURPTU5lc3RpbmcgPSByZXF1aXJlKCcuL3ZhbGlkYXRlRE9NTmVzdGluZycpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBkZWxldGVMaXN0ZW5lciA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5kZWxldGVMaXN0ZW5lcjtcbnZhciBsaXN0ZW5UbyA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5saXN0ZW5UbztcbnZhciByZWdpc3RyYXRpb25OYW1lTW9kdWxlcyA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5yZWdpc3RyYXRpb25OYW1lTW9kdWxlcztcblxuLy8gRm9yIHF1aWNrbHkgbWF0Y2hpbmcgY2hpbGRyZW4gdHlwZSwgdG8gdGVzdCBpZiBjYW4gYmUgdHJlYXRlZCBhcyBjb250ZW50LlxudmFyIENPTlRFTlRfVFlQRVMgPSB7ICdzdHJpbmcnOiB0cnVlLCAnbnVtYmVyJzogdHJ1ZSB9O1xuXG52YXIgQ0hJTERSRU4gPSBrZXlPZih7IGNoaWxkcmVuOiBudWxsIH0pO1xudmFyIFNUWUxFID0ga2V5T2YoeyBzdHlsZTogbnVsbCB9KTtcbnZhciBIVE1MID0ga2V5T2YoeyBfX2h0bWw6IG51bGwgfSk7XG5cbnZhciBFTEVNRU5UX05PREVfVFlQRSA9IDE7XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShpbnRlcm5hbEluc3RhbmNlKSB7XG4gIGlmIChpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgdmFyIG93bmVyID0gaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyIHx8IG51bGw7XG4gICAgaWYgKG93bmVyKSB7XG4gICAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcbiAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgIHJldHVybiAnIFRoaXMgRE9NIG5vZGUgd2FzIHJlbmRlcmVkIGJ5IGAnICsgbmFtZSArICdgLic7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn1cblxudmFyIGxlZ2FjeVByb3BzRGVzY3JpcHRvcjtcbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGxlZ2FjeVByb3BzRGVzY3JpcHRvciA9IHtcbiAgICBwcm9wczoge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbXBvbmVudCA9IHRoaXMuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQ7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnByb3BzIG9mIGEgRE9NIG5vZGU7IGluc3RlYWQsICcgKyAncmVjcmVhdGUgdGhlIHByb3BzIGFzIGByZW5kZXJgIGRpZCBvcmlnaW5hbGx5IG9yIHJlYWQgdGhlIERPTSAnICsgJ3Byb3BlcnRpZXMvYXR0cmlidXRlcyBkaXJlY3RseSBmcm9tIHRoaXMgbm9kZSAoZS5nLiwgJyArICd0aGlzLnJlZnMuYm94LmNsYXNzTmFtZSkuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gbGVnYWN5R2V0RE9NTm9kZSgpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5nZXRET01Ob2RlKCkgb2YgYSBET00gbm9kZTsgJyArICdpbnN0ZWFkLCB1c2UgdGhlIG5vZGUgZGlyZWN0bHkuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIGxlZ2FjeUlzTW91bnRlZCgpIHtcbiAgdmFyIGNvbXBvbmVudCA9IHRoaXMuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQ7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdERPTUNvbXBvbmVudDogRG8gbm90IGFjY2VzcyAuaXNNb3VudGVkKCkgb2YgYSBET00gbm9kZS4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gISFjb21wb25lbnQ7XG59XG5cbmZ1bmN0aW9uIGxlZ2FjeVNldFN0YXRlRXRjKCkge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnNldFN0YXRlKCksIC5yZXBsYWNlU3RhdGUoKSwgb3IgJyArICcuZm9yY2VVcGRhdGUoKSBvZiBhIERPTSBub2RlLiBUaGlzIGlzIGEgbm8tb3AuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gbGVnYWN5U2V0UHJvcHMocGFydGlhbFByb3BzLCBjYWxsYmFjaykge1xuICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5zZXRQcm9wcygpIG9mIGEgRE9NIG5vZGUuICcgKyAnSW5zdGVhZCwgY2FsbCBSZWFjdERPTS5yZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoIWNvbXBvbmVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVTZXRQcm9wc0ludGVybmFsKGNvbXBvbmVudCwgcGFydGlhbFByb3BzKTtcbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlQ2FsbGJhY2tJbnRlcm5hbChjb21wb25lbnQsIGNhbGxiYWNrKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBsZWdhY3lSZXBsYWNlUHJvcHMocGFydGlhbFByb3BzLCBjYWxsYmFjaykge1xuICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5yZXBsYWNlUHJvcHMoKSBvZiBhIERPTSBub2RlLiAnICsgJ0luc3RlYWQsIGNhbGwgUmVhY3RET00ucmVuZGVyIGFnYWluIGF0IHRoZSB0b3AgbGV2ZWwuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFjb21wb25lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlUmVwbGFjZVByb3BzSW50ZXJuYWwoY29tcG9uZW50LCBwYXJ0aWFsUHJvcHMpO1xuICBpZiAoY2FsbGJhY2spIHtcbiAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVDYWxsYmFja0ludGVybmFsKGNvbXBvbmVudCwgY2FsbGJhY2spO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZyaWVuZGx5U3RyaW5naWZ5KG9iaikge1xuICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICByZXR1cm4gJ1snICsgb2JqLm1hcChmcmllbmRseVN0cmluZ2lmeSkuam9pbignLCAnKSArICddJztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHBhaXJzID0gW107XG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgdmFyIGtleUVzY2FwZWQgPSAvXlthLXokX11bXFx3JF9dKiQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpO1xuICAgICAgICAgIHBhaXJzLnB1c2goa2V5RXNjYXBlZCArICc6ICcgKyBmcmllbmRseVN0cmluZ2lmeShvYmpba2V5XSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gJ3snICsgcGFpcnMuam9pbignLCAnKSArICd9JztcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKTtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuICdbZnVuY3Rpb24gb2JqZWN0XSc7XG4gIH1cbiAgLy8gRGlmZmVycyBmcm9tIEpTT04uc3RyaW5naWZ5IGluIHRoYXQgdW5kZWZpbmVkIGJlY2F1c2VzIHVuZGVmaW5lZCBhbmQgdGhhdFxuICAvLyBpbmYgYW5kIG5hbiBkb24ndCBiZWNvbWUgbnVsbFxuICByZXR1cm4gU3RyaW5nKG9iaik7XG59XG5cbnZhciBzdHlsZU11dGF0aW9uV2FybmluZyA9IHt9O1xuXG5mdW5jdGlvbiBjaGVja0FuZFdhcm5Gb3JNdXRhdGVkU3R5bGUoc3R5bGUxLCBzdHlsZTIsIGNvbXBvbmVudCkge1xuICBpZiAoc3R5bGUxID09IG51bGwgfHwgc3R5bGUyID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNoYWxsb3dFcXVhbChzdHlsZTEsIHN0eWxlMikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5fdGFnO1xuICB2YXIgb3duZXIgPSBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcbiAgdmFyIG93bmVyTmFtZTtcbiAgaWYgKG93bmVyKSB7XG4gICAgb3duZXJOYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuICB9XG5cbiAgdmFyIGhhc2ggPSBvd25lck5hbWUgKyAnfCcgKyBjb21wb25lbnROYW1lO1xuXG4gIGlmIChzdHlsZU11dGF0aW9uV2FybmluZy5oYXNPd25Qcm9wZXJ0eShoYXNoKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN0eWxlTXV0YXRpb25XYXJuaW5nW2hhc2hdID0gdHJ1ZTtcblxuICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ2Alc2Agd2FzIHBhc3NlZCBhIHN0eWxlIG9iamVjdCB0aGF0IGhhcyBwcmV2aW91c2x5IGJlZW4gbXV0YXRlZC4gJyArICdNdXRhdGluZyBgc3R5bGVgIGlzIGRlcHJlY2F0ZWQuIENvbnNpZGVyIGNsb25pbmcgaXQgYmVmb3JlaGFuZC4gQ2hlY2sgJyArICd0aGUgYHJlbmRlcmAgJXMuIFByZXZpb3VzIHN0eWxlOiAlcy4gTXV0YXRlZCBzdHlsZTogJXMuJywgY29tcG9uZW50TmFtZSwgb3duZXIgPyAnb2YgYCcgKyBvd25lck5hbWUgKyAnYCcgOiAndXNpbmcgPCcgKyBjb21wb25lbnROYW1lICsgJz4nLCBmcmllbmRseVN0cmluZ2lmeShzdHlsZTEpLCBmcmllbmRseVN0cmluZ2lmeShzdHlsZTIpKSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gY29tcG9uZW50XG4gKiBAcGFyYW0gez9vYmplY3R9IHByb3BzXG4gKi9cbmZ1bmN0aW9uIGFzc2VydFZhbGlkUHJvcHMoY29tcG9uZW50LCBwcm9wcykge1xuICBpZiAoIXByb3BzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIE5vdGUgdGhlIHVzZSBvZiBgPT1gIHdoaWNoIGNoZWNrcyBmb3IgbnVsbCBvciB1bmRlZmluZWQuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKHZvaWRFbGVtZW50VGFnc1tjb21wb25lbnQuX3RhZ10pIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHByb3BzLmNoaWxkcmVuID09IG51bGwgJiYgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgPT0gbnVsbCwgJyVzIGlzIGEgdm9pZCBlbGVtZW50IHRhZyBhbmQgbXVzdCBub3QgaGF2ZSBgY2hpbGRyZW5gIG9yICcgKyAndXNlIGBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTGAuJXMnLCBjb21wb25lbnQuX3RhZywgY29tcG9uZW50Ll9jdXJyZW50RWxlbWVudC5fb3duZXIgPyAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mICcgKyBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50Ll9vd25lci5nZXROYW1lKCkgKyAnLicgOiAnJykgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG4gIGlmIChwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCAhPSBudWxsKSB7XG4gICAgIShwcm9wcy5jaGlsZHJlbiA9PSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDYW4gb25seSBzZXQgb25lIG9mIGBjaGlsZHJlbmAgb3IgYHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgISh0eXBlb2YgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgPT09ICdvYmplY3QnICYmIEhUTUwgaW4gcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Bwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTGAgbXVzdCBiZSBpbiB0aGUgZm9ybSBge19faHRtbDogLi4ufWAuICcgKyAnUGxlYXNlIHZpc2l0IGh0dHBzOi8vZmIubWUvcmVhY3QtaW52YXJpYW50LWRhbmdlcm91c2x5LXNldC1pbm5lci1odG1sICcgKyAnZm9yIG1vcmUgaW5mb3JtYXRpb24uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcocHJvcHMuaW5uZXJIVE1MID09IG51bGwsICdEaXJlY3RseSBzZXR0aW5nIHByb3BlcnR5IGBpbm5lckhUTUxgIGlzIG5vdCBwZXJtaXR0ZWQuICcgKyAnRm9yIG1vcmUgaW5mb3JtYXRpb24sIGxvb2t1cCBkb2N1bWVudGF0aW9uIG9uIGBkYW5nZXJvdXNseVNldElubmVySFRNTGAuJykgOiB1bmRlZmluZWQ7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIXByb3BzLmNvbnRlbnRFZGl0YWJsZSB8fCBwcm9wcy5jaGlsZHJlbiA9PSBudWxsLCAnQSBjb21wb25lbnQgaXMgYGNvbnRlbnRFZGl0YWJsZWAgYW5kIGNvbnRhaW5zIGBjaGlsZHJlbmAgbWFuYWdlZCBieSAnICsgJ1JlYWN0LiBJdCBpcyBub3cgeW91ciByZXNwb25zaWJpbGl0eSB0byBndWFyYW50ZWUgdGhhdCBub25lIG9mICcgKyAndGhvc2Ugbm9kZXMgYXJlIHVuZXhwZWN0ZWRseSBtb2RpZmllZCBvciBkdXBsaWNhdGVkLiBUaGlzIGlzICcgKyAncHJvYmFibHkgbm90IGludGVudGlvbmFsLicpIDogdW5kZWZpbmVkO1xuICB9XG4gICEocHJvcHMuc3R5bGUgPT0gbnVsbCB8fCB0eXBlb2YgcHJvcHMuc3R5bGUgPT09ICdvYmplY3QnKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUaGUgYHN0eWxlYCBwcm9wIGV4cGVjdHMgYSBtYXBwaW5nIGZyb20gc3R5bGUgcHJvcGVydGllcyB0byB2YWx1ZXMsICcgKyAnbm90IGEgc3RyaW5nLiBGb3IgZXhhbXBsZSwgc3R5bGU9e3ttYXJnaW5SaWdodDogc3BhY2luZyArIFxcJ2VtXFwnfX0gd2hlbiAnICsgJ3VzaW5nIEpTWC4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGVucXVldWVQdXRMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIsIHRyYW5zYWN0aW9uKSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgLy8gSUU4IGhhcyBubyBBUEkgZm9yIGV2ZW50IGNhcHR1cmluZyBhbmQgdGhlIGBvblNjcm9sbGAgZXZlbnQgZG9lc24ndFxuICAgIC8vIGJ1YmJsZS5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhyZWdpc3RyYXRpb25OYW1lICE9PSAnb25TY3JvbGwnIHx8IGlzRXZlbnRTdXBwb3J0ZWQoJ3Njcm9sbCcsIHRydWUpLCAnVGhpcyBicm93c2VyIGRvZXNuXFwndCBzdXBwb3J0IHRoZSBgb25TY3JvbGxgIGV2ZW50JykgOiB1bmRlZmluZWQ7XG4gIH1cbiAgdmFyIGNvbnRhaW5lciA9IFJlYWN0TW91bnQuZmluZFJlYWN0Q29udGFpbmVyRm9ySUQoaWQpO1xuICBpZiAoY29udGFpbmVyKSB7XG4gICAgdmFyIGRvYyA9IGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFX1RZUEUgPyBjb250YWluZXIub3duZXJEb2N1bWVudCA6IGNvbnRhaW5lcjtcbiAgICBsaXN0ZW5UbyhyZWdpc3RyYXRpb25OYW1lLCBkb2MpO1xuICB9XG4gIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUocHV0TGlzdGVuZXIsIHtcbiAgICBpZDogaWQsXG4gICAgcmVnaXN0cmF0aW9uTmFtZTogcmVnaXN0cmF0aW9uTmFtZSxcbiAgICBsaXN0ZW5lcjogbGlzdGVuZXJcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHB1dExpc3RlbmVyKCkge1xuICB2YXIgbGlzdGVuZXJUb1B1dCA9IHRoaXM7XG4gIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5wdXRMaXN0ZW5lcihsaXN0ZW5lclRvUHV0LmlkLCBsaXN0ZW5lclRvUHV0LnJlZ2lzdHJhdGlvbk5hbWUsIGxpc3RlbmVyVG9QdXQubGlzdGVuZXIpO1xufVxuXG4vLyBUaGVyZSBhcmUgc28gbWFueSBtZWRpYSBldmVudHMsIGl0IG1ha2VzIHNlbnNlIHRvIGp1c3Rcbi8vIG1haW50YWluIGEgbGlzdCByYXRoZXIgdGhhbiBjcmVhdGUgYSBgdHJhcEJ1YmJsZWRFdmVudGAgZm9yIGVhY2hcbnZhciBtZWRpYUV2ZW50cyA9IHtcbiAgdG9wQWJvcnQ6ICdhYm9ydCcsXG4gIHRvcENhblBsYXk6ICdjYW5wbGF5JyxcbiAgdG9wQ2FuUGxheVRocm91Z2g6ICdjYW5wbGF5dGhyb3VnaCcsXG4gIHRvcER1cmF0aW9uQ2hhbmdlOiAnZHVyYXRpb25jaGFuZ2UnLFxuICB0b3BFbXB0aWVkOiAnZW1wdGllZCcsXG4gIHRvcEVuY3J5cHRlZDogJ2VuY3J5cHRlZCcsXG4gIHRvcEVuZGVkOiAnZW5kZWQnLFxuICB0b3BFcnJvcjogJ2Vycm9yJyxcbiAgdG9wTG9hZGVkRGF0YTogJ2xvYWRlZGRhdGEnLFxuICB0b3BMb2FkZWRNZXRhZGF0YTogJ2xvYWRlZG1ldGFkYXRhJyxcbiAgdG9wTG9hZFN0YXJ0OiAnbG9hZHN0YXJ0JyxcbiAgdG9wUGF1c2U6ICdwYXVzZScsXG4gIHRvcFBsYXk6ICdwbGF5JyxcbiAgdG9wUGxheWluZzogJ3BsYXlpbmcnLFxuICB0b3BQcm9ncmVzczogJ3Byb2dyZXNzJyxcbiAgdG9wUmF0ZUNoYW5nZTogJ3JhdGVjaGFuZ2UnLFxuICB0b3BTZWVrZWQ6ICdzZWVrZWQnLFxuICB0b3BTZWVraW5nOiAnc2Vla2luZycsXG4gIHRvcFN0YWxsZWQ6ICdzdGFsbGVkJyxcbiAgdG9wU3VzcGVuZDogJ3N1c3BlbmQnLFxuICB0b3BUaW1lVXBkYXRlOiAndGltZXVwZGF0ZScsXG4gIHRvcFZvbHVtZUNoYW5nZTogJ3ZvbHVtZWNoYW5nZScsXG4gIHRvcFdhaXRpbmc6ICd3YWl0aW5nJ1xufTtcblxuZnVuY3Rpb24gdHJhcEJ1YmJsZWRFdmVudHNMb2NhbCgpIHtcbiAgdmFyIGluc3QgPSB0aGlzO1xuICAvLyBJZiBhIGNvbXBvbmVudCByZW5kZXJzIHRvIG51bGwgb3IgaWYgYW5vdGhlciBjb21wb25lbnQgZmF0YWxzIGFuZCBjYXVzZXNcbiAgLy8gdGhlIHN0YXRlIG9mIHRoZSB0cmVlIHRvIGJlIGNvcnJ1cHRlZCwgYG5vZGVgIGhlcmUgY2FuIGJlIG51bGwuXG4gICFpbnN0Ll9yb290Tm9kZUlEID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ011c3QgYmUgbW91bnRlZCB0byB0cmFwIGV2ZW50cycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUoaW5zdC5fcm9vdE5vZGVJRCk7XG4gICFub2RlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RyYXBCdWJibGVkRXZlbnQoLi4uKTogUmVxdWlyZXMgbm9kZSB0byBiZSByZW5kZXJlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgc3dpdGNoIChpbnN0Ll90YWcpIHtcbiAgICBjYXNlICdpZnJhbWUnOlxuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycyA9IFtSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcExvYWQsICdsb2FkJywgbm9kZSldO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndmlkZW8nOlxuICAgIGNhc2UgJ2F1ZGlvJzpcblxuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycyA9IFtdO1xuICAgICAgLy8gY3JlYXRlIGxpc3RlbmVyIGZvciBlYWNoIG1lZGlhIGV2ZW50XG4gICAgICBmb3IgKHZhciBldmVudCBpbiBtZWRpYUV2ZW50cykge1xuICAgICAgICBpZiAobWVkaWFFdmVudHMuaGFzT3duUHJvcGVydHkoZXZlbnQpKSB7XG4gICAgICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycy5wdXNoKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXNbZXZlbnRdLCBtZWRpYUV2ZW50c1tldmVudF0sIG5vZGUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVhaztcbiAgICBjYXNlICdpbWcnOlxuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycyA9IFtSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcEVycm9yLCAnZXJyb3InLCBub2RlKSwgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnRyYXBCdWJibGVkRXZlbnQoRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcy50b3BMb2FkLCAnbG9hZCcsIG5vZGUpXTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycyA9IFtSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcFJlc2V0LCAncmVzZXQnLCBub2RlKSwgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnRyYXBCdWJibGVkRXZlbnQoRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcy50b3BTdWJtaXQsICdzdWJtaXQnLCBub2RlKV07XG4gICAgICBicmVhaztcbiAgfVxufVxuXG5mdW5jdGlvbiBtb3VudFJlYWR5SW5wdXRXcmFwcGVyKCkge1xuICBSZWFjdERPTUlucHV0Lm1vdW50UmVhZHlXcmFwcGVyKHRoaXMpO1xufVxuXG5mdW5jdGlvbiBwb3N0VXBkYXRlU2VsZWN0V3JhcHBlcigpIHtcbiAgUmVhY3RET01TZWxlY3QucG9zdFVwZGF0ZVdyYXBwZXIodGhpcyk7XG59XG5cbi8vIEZvciBIVE1MLCBjZXJ0YWluIHRhZ3Mgc2hvdWxkIG9taXQgdGhlaXIgY2xvc2UgdGFnLiBXZSBrZWVwIGEgd2hpdGVsaXN0IGZvclxuLy8gdGhvc2Ugc3BlY2lhbCBjYXNlZCB0YWdzLlxuXG52YXIgb21pdHRlZENsb3NlVGFncyA9IHtcbiAgJ2FyZWEnOiB0cnVlLFxuICAnYmFzZSc6IHRydWUsXG4gICdicic6IHRydWUsXG4gICdjb2wnOiB0cnVlLFxuICAnZW1iZWQnOiB0cnVlLFxuICAnaHInOiB0cnVlLFxuICAnaW1nJzogdHJ1ZSxcbiAgJ2lucHV0JzogdHJ1ZSxcbiAgJ2tleWdlbic6IHRydWUsXG4gICdsaW5rJzogdHJ1ZSxcbiAgJ21ldGEnOiB0cnVlLFxuICAncGFyYW0nOiB0cnVlLFxuICAnc291cmNlJzogdHJ1ZSxcbiAgJ3RyYWNrJzogdHJ1ZSxcbiAgJ3dicic6IHRydWVcbn07XG5cbi8vIE5PVEU6IG1lbnVpdGVtJ3MgY2xvc2UgdGFnIHNob3VsZCBiZSBvbWl0dGVkLCBidXQgdGhhdCBjYXVzZXMgcHJvYmxlbXMuXG52YXIgbmV3bGluZUVhdGluZ1RhZ3MgPSB7XG4gICdsaXN0aW5nJzogdHJ1ZSxcbiAgJ3ByZSc6IHRydWUsXG4gICd0ZXh0YXJlYSc6IHRydWVcbn07XG5cbi8vIEZvciBIVE1MLCBjZXJ0YWluIHRhZ3MgY2Fubm90IGhhdmUgY2hpbGRyZW4uIFRoaXMgaGFzIHRoZSBzYW1lIHB1cnBvc2UgYXNcbi8vIGBvbWl0dGVkQ2xvc2VUYWdzYCBleGNlcHQgdGhhdCBgbWVudWl0ZW1gIHNob3VsZCBzdGlsbCBoYXZlIGl0cyBjbG9zaW5nIHRhZy5cblxudmFyIHZvaWRFbGVtZW50VGFncyA9IGFzc2lnbih7XG4gICdtZW51aXRlbSc6IHRydWVcbn0sIG9taXR0ZWRDbG9zZVRhZ3MpO1xuXG4vLyBXZSBhY2NlcHQgYW55IHRhZyB0byBiZSByZW5kZXJlZCBidXQgc2luY2UgdGhpcyBnZXRzIGluamVjdGVkIGludG8gYXJiaXRyYXJ5XG4vLyBIVE1MLCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB0aGF0IGl0J3MgYSBzYWZlIHRhZy5cbi8vIGh0dHA6Ly93d3cudzMub3JnL1RSL1JFQy14bWwvI05ULU5hbWVcblxudmFyIFZBTElEX1RBR19SRUdFWCA9IC9eW2EtekEtWl1bYS16QS1aOl9cXC5cXC1cXGRdKiQvOyAvLyBTaW1wbGlmaWVkIHN1YnNldFxudmFyIHZhbGlkYXRlZFRhZ0NhY2hlID0ge307XG52YXIgaGFzT3duUHJvcGVydHkgPSAoe30pLmhhc093blByb3BlcnR5O1xuXG5mdW5jdGlvbiB2YWxpZGF0ZURhbmdlcm91c1RhZyh0YWcpIHtcbiAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbGlkYXRlZFRhZ0NhY2hlLCB0YWcpKSB7XG4gICAgIVZBTElEX1RBR19SRUdFWC50ZXN0KHRhZykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnSW52YWxpZCB0YWc6ICVzJywgdGFnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFsaWRhdGVkVGFnQ2FjaGVbdGFnXSA9IHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0NoaWxkQ29udGV4dERldihjb250ZXh0LCBpbnN0KSB7XG4gIC8vIFBhc3MgZG93biBvdXIgdGFnIG5hbWUgdG8gY2hpbGQgY29tcG9uZW50cyBmb3IgdmFsaWRhdGlvbiBwdXJwb3Nlc1xuICBjb250ZXh0ID0gYXNzaWduKHt9LCBjb250ZXh0KTtcbiAgdmFyIGluZm8gPSBjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XTtcbiAgY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0gPSB2YWxpZGF0ZURPTU5lc3RpbmcudXBkYXRlZEFuY2VzdG9ySW5mbyhpbmZvLCBpbnN0Ll90YWcsIGluc3QpO1xuICByZXR1cm4gY29udGV4dDtcbn1cblxuZnVuY3Rpb24gaXNDdXN0b21Db21wb25lbnQodGFnTmFtZSwgcHJvcHMpIHtcbiAgcmV0dXJuIHRhZ05hbWUuaW5kZXhPZignLScpID49IDAgfHwgcHJvcHMuaXMgIT0gbnVsbDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFJlYWN0IGNsYXNzIHRoYXQgaXMgaWRlbXBvdGVudCBhbmQgY2FwYWJsZSBvZiBjb250YWluaW5nIG90aGVyXG4gKiBSZWFjdCBjb21wb25lbnRzLiBJdCBhY2NlcHRzIGV2ZW50IGxpc3RlbmVycyBhbmQgRE9NIHByb3BlcnRpZXMgdGhhdCBhcmVcbiAqIHZhbGlkIGFjY29yZGluZyB0byBgRE9NUHJvcGVydHlgLlxuICpcbiAqICAtIEV2ZW50IGxpc3RlbmVyczogYG9uQ2xpY2tgLCBgb25Nb3VzZURvd25gLCBldGMuXG4gKiAgLSBET00gcHJvcGVydGllczogYGNsYXNzTmFtZWAsIGBuYW1lYCwgYHRpdGxlYCwgZXRjLlxuICpcbiAqIFRoZSBgc3R5bGVgIHByb3BlcnR5IGZ1bmN0aW9ucyBkaWZmZXJlbnRseSBmcm9tIHRoZSBET00gQVBJLiBJdCBhY2NlcHRzIGFuXG4gKiBvYmplY3QgbWFwcGluZyBvZiBzdHlsZSBwcm9wZXJ0aWVzIHRvIHZhbHVlcy5cbiAqXG4gKiBAY29uc3RydWN0b3IgUmVhY3RET01Db21wb25lbnRcbiAqIEBleHRlbmRzIFJlYWN0TXVsdGlDaGlsZFxuICovXG5mdW5jdGlvbiBSZWFjdERPTUNvbXBvbmVudCh0YWcpIHtcbiAgdmFsaWRhdGVEYW5nZXJvdXNUYWcodGFnKTtcbiAgdGhpcy5fdGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7XG4gIHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW4gPSBudWxsO1xuICB0aGlzLl9wcmV2aW91c1N0eWxlID0gbnVsbDtcbiAgdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBudWxsO1xuICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgdGhpcy5fd3JhcHBlclN0YXRlID0gbnVsbDtcbiAgdGhpcy5fdG9wTGV2ZWxXcmFwcGVyID0gbnVsbDtcbiAgdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzID0gbnVsbDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB0aGlzLl91bnByb2Nlc3NlZENvbnRleHREZXYgPSBudWxsO1xuICAgIHRoaXMuX3Byb2Nlc3NlZENvbnRleHREZXYgPSBudWxsO1xuICB9XG59XG5cblJlYWN0RE9NQ29tcG9uZW50LmRpc3BsYXlOYW1lID0gJ1JlYWN0RE9NQ29tcG9uZW50JztcblxuUmVhY3RET01Db21wb25lbnQuTWl4aW4gPSB7XG5cbiAgY29uc3RydWN0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gZWxlbWVudDtcbiAgfSxcblxuICAvKipcbiAgICogR2VuZXJhdGVzIHJvb3QgdGFnIG1hcmt1cCB0aGVuIHJlY3Vyc2VzLiBUaGlzIG1ldGhvZCBoYXMgc2lkZSBlZmZlY3RzIGFuZFxuICAgKiBpcyBub3QgaWRlbXBvdGVudC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgVGhlIHJvb3QgRE9NIElEIGZvciB0aGlzIG5vZGUuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjb21wdXRlZCBtYXJrdXAuXG4gICAqL1xuICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gKHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gcm9vdElEO1xuXG4gICAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cbiAgICBzd2l0Y2ggKHRoaXMuX3RhZykge1xuICAgICAgY2FzZSAnaWZyYW1lJzpcbiAgICAgIGNhc2UgJ2ltZyc6XG4gICAgICBjYXNlICdmb3JtJzpcbiAgICAgIGNhc2UgJ3ZpZGVvJzpcbiAgICAgIGNhc2UgJ2F1ZGlvJzpcbiAgICAgICAgdGhpcy5fd3JhcHBlclN0YXRlID0ge1xuICAgICAgICAgIGxpc3RlbmVyczogbnVsbFxuICAgICAgICB9O1xuICAgICAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKHRyYXBCdWJibGVkRXZlbnRzTG9jYWwsIHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1dHRvbic6XG4gICAgICAgIHByb3BzID0gUmVhY3RET01CdXR0b24uZ2V0TmF0aXZlUHJvcHModGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgUmVhY3RET01JbnB1dC5tb3VudFdyYXBwZXIodGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBwcm9wcyA9IFJlYWN0RE9NSW5wdXQuZ2V0TmF0aXZlUHJvcHModGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ29wdGlvbic6XG4gICAgICAgIFJlYWN0RE9NT3B0aW9uLm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHByb3BzID0gUmVhY3RET01PcHRpb24uZ2V0TmF0aXZlUHJvcHModGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgIFJlYWN0RE9NU2VsZWN0Lm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHByb3BzID0gUmVhY3RET01TZWxlY3QuZ2V0TmF0aXZlUHJvcHModGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBjb250ZXh0ID0gUmVhY3RET01TZWxlY3QucHJvY2Vzc0NoaWxkQ29udGV4dCh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICBSZWFjdERPTVRleHRhcmVhLm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHByb3BzID0gUmVhY3RET01UZXh0YXJlYS5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGFzc2VydFZhbGlkUHJvcHModGhpcywgcHJvcHMpO1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pIHtcbiAgICAgICAgdmFsaWRhdGVET01OZXN0aW5nKHRoaXMuX3RhZywgdGhpcywgY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB0aGlzLl91bnByb2Nlc3NlZENvbnRleHREZXYgPSBjb250ZXh0O1xuICAgICAgdGhpcy5fcHJvY2Vzc2VkQ29udGV4dERldiA9IHByb2Nlc3NDaGlsZENvbnRleHREZXYoY29udGV4dCwgdGhpcyk7XG4gICAgICBjb250ZXh0ID0gdGhpcy5fcHJvY2Vzc2VkQ29udGV4dERldjtcbiAgICB9XG5cbiAgICB2YXIgbW91bnRJbWFnZTtcbiAgICBpZiAodHJhbnNhY3Rpb24udXNlQ3JlYXRlRWxlbWVudCkge1xuICAgICAgdmFyIG93bmVyRG9jdW1lbnQgPSBjb250ZXh0W1JlYWN0TW91bnQub3duZXJEb2N1bWVudENvbnRleHRLZXldO1xuICAgICAgdmFyIGVsID0gb3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGUpO1xuICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLnNldEF0dHJpYnV0ZUZvcklEKGVsLCB0aGlzLl9yb290Tm9kZUlEKTtcbiAgICAgIC8vIFBvcHVsYXRlIG5vZGUgY2FjaGVcbiAgICAgIFJlYWN0TW91bnQuZ2V0SUQoZWwpO1xuICAgICAgdGhpcy5fdXBkYXRlRE9NUHJvcGVydGllcyh7fSwgcHJvcHMsIHRyYW5zYWN0aW9uLCBlbCk7XG4gICAgICB0aGlzLl9jcmVhdGVJbml0aWFsQ2hpbGRyZW4odHJhbnNhY3Rpb24sIHByb3BzLCBjb250ZXh0LCBlbCk7XG4gICAgICBtb3VudEltYWdlID0gZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0YWdPcGVuID0gdGhpcy5fY3JlYXRlT3BlblRhZ01hcmt1cEFuZFB1dExpc3RlbmVycyh0cmFuc2FjdGlvbiwgcHJvcHMpO1xuICAgICAgdmFyIHRhZ0NvbnRlbnQgPSB0aGlzLl9jcmVhdGVDb250ZW50TWFya3VwKHRyYW5zYWN0aW9uLCBwcm9wcywgY29udGV4dCk7XG4gICAgICBpZiAoIXRhZ0NvbnRlbnQgJiYgb21pdHRlZENsb3NlVGFnc1t0aGlzLl90YWddKSB7XG4gICAgICAgIG1vdW50SW1hZ2UgPSB0YWdPcGVuICsgJy8+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vdW50SW1hZ2UgPSB0YWdPcGVuICsgJz4nICsgdGFnQ29udGVudCArICc8LycgKyB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlICsgJz4nO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG4gICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUobW91bnRSZWFkeUlucHV0V3JhcHBlciwgdGhpcyk7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlICdidXR0b24nOlxuICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICAgICAgaWYgKHByb3BzLmF1dG9Gb2N1cykge1xuICAgICAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoQXV0b0ZvY3VzVXRpbHMuZm9jdXNET01Db21wb25lbnQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiBtb3VudEltYWdlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG1hcmt1cCBmb3IgdGhlIG9wZW4gdGFnIGFuZCBhbGwgYXR0cmlidXRlcy5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaGFzIHNpZGUgZWZmZWN0cyBiZWNhdXNlIGV2ZW50cyBnZXQgcmVnaXN0ZXJlZC5cbiAgICpcbiAgICogSXRlcmF0aW5nIG92ZXIgb2JqZWN0IHByb3BlcnRpZXMgaXMgZmFzdGVyIHRoYW4gaXRlcmF0aW5nIG92ZXIgYXJyYXlzLlxuICAgKiBAc2VlIGh0dHA6Ly9qc3BlcmYuY29tL29iai12cy1hcnItaXRlcmF0aW9uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgb2Ygb3BlbmluZyB0YWcuXG4gICAqL1xuICBfY3JlYXRlT3BlblRhZ01hcmt1cEFuZFB1dExpc3RlbmVyczogZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBwcm9wcykge1xuICAgIHZhciByZXQgPSAnPCcgKyB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuXG4gICAgZm9yICh2YXIgcHJvcEtleSBpbiBwcm9wcykge1xuICAgICAgaWYgKCFwcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wS2V5XTtcbiAgICAgIGlmIChwcm9wVmFsdWUgPT0gbnVsbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChyZWdpc3RyYXRpb25OYW1lTW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSkge1xuICAgICAgICBpZiAocHJvcFZhbHVlKSB7XG4gICAgICAgICAgZW5xdWV1ZVB1dExpc3RlbmVyKHRoaXMuX3Jvb3ROb2RlSUQsIHByb3BLZXksIHByb3BWYWx1ZSwgdHJhbnNhY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJvcEtleSA9PT0gU1RZTEUpIHtcbiAgICAgICAgICBpZiAocHJvcFZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAvLyBTZWUgYF91cGRhdGVET01Qcm9wZXJ0aWVzYC4gc3R5bGUgYmxvY2tcbiAgICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNTdHlsZSA9IHByb3BWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb3BWYWx1ZSA9IHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5ID0gYXNzaWduKHt9LCBwcm9wcy5zdHlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHByb3BWYWx1ZSA9IENTU1Byb3BlcnR5T3BlcmF0aW9ucy5jcmVhdGVNYXJrdXBGb3JTdHlsZXMocHJvcFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFya3VwID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuX3RhZyAhPSBudWxsICYmIGlzQ3VzdG9tQ29tcG9uZW50KHRoaXMuX3RhZywgcHJvcHMpKSB7XG4gICAgICAgICAgaWYgKHByb3BLZXkgIT09IENISUxEUkVOKSB7XG4gICAgICAgICAgICBtYXJrdXAgPSBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuY3JlYXRlTWFya3VwRm9yQ3VzdG9tQXR0cmlidXRlKHByb3BLZXksIHByb3BWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hcmt1cCA9IERPTVByb3BlcnR5T3BlcmF0aW9ucy5jcmVhdGVNYXJrdXBGb3JQcm9wZXJ0eShwcm9wS2V5LCBwcm9wVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXJrdXApIHtcbiAgICAgICAgICByZXQgKz0gJyAnICsgbWFya3VwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRm9yIHN0YXRpYyBwYWdlcywgbm8gbmVlZCB0byBwdXQgUmVhY3QgSUQgYW5kIGNoZWNrc3VtLiBTYXZlcyBsb3RzIG9mXG4gICAgLy8gYnl0ZXMuXG4gICAgaWYgKHRyYW5zYWN0aW9uLnJlbmRlclRvU3RhdGljTWFya3VwKSB7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIHZhciBtYXJrdXBGb3JJRCA9IERPTVByb3BlcnR5T3BlcmF0aW9ucy5jcmVhdGVNYXJrdXBGb3JJRCh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICByZXR1cm4gcmV0ICsgJyAnICsgbWFya3VwRm9ySUQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgbWFya3VwIGZvciB0aGUgY29udGVudCBiZXR3ZWVuIHRoZSB0YWdzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtvYmplY3R9IHByb3BzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEByZXR1cm4ge3N0cmluZ30gQ29udGVudCBtYXJrdXAuXG4gICAqL1xuICBfY3JlYXRlQ29udGVudE1hcmt1cDogZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBwcm9wcywgY29udGV4dCkge1xuICAgIHZhciByZXQgPSAnJztcblxuICAgIC8vIEludGVudGlvbmFsIHVzZSBvZiAhPSB0byBhdm9pZCBjYXRjaGluZyB6ZXJvL2ZhbHNlLlxuICAgIHZhciBpbm5lckhUTUwgPSBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTDtcbiAgICBpZiAoaW5uZXJIVE1MICE9IG51bGwpIHtcbiAgICAgIGlmIChpbm5lckhUTUwuX19odG1sICE9IG51bGwpIHtcbiAgICAgICAgcmV0ID0gaW5uZXJIVE1MLl9faHRtbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGNvbnRlbnRUb1VzZSA9IENPTlRFTlRfVFlQRVNbdHlwZW9mIHByb3BzLmNoaWxkcmVuXSA/IHByb3BzLmNoaWxkcmVuIDogbnVsbDtcbiAgICAgIHZhciBjaGlsZHJlblRvVXNlID0gY29udGVudFRvVXNlICE9IG51bGwgPyBudWxsIDogcHJvcHMuY2hpbGRyZW47XG4gICAgICBpZiAoY29udGVudFRvVXNlICE9IG51bGwpIHtcbiAgICAgICAgLy8gVE9ETzogVmFsaWRhdGUgdGhhdCB0ZXh0IGlzIGFsbG93ZWQgYXMgYSBjaGlsZCBvZiB0aGlzIG5vZGVcbiAgICAgICAgcmV0ID0gZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKGNvbnRlbnRUb1VzZSk7XG4gICAgICB9IGVsc2UgaWYgKGNoaWxkcmVuVG9Vc2UgIT0gbnVsbCkge1xuICAgICAgICB2YXIgbW91bnRJbWFnZXMgPSB0aGlzLm1vdW50Q2hpbGRyZW4oY2hpbGRyZW5Ub1VzZSwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICByZXQgPSBtb3VudEltYWdlcy5qb2luKCcnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5ld2xpbmVFYXRpbmdUYWdzW3RoaXMuX3RhZ10gJiYgcmV0LmNoYXJBdCgwKSA9PT0gJ1xcbicpIHtcbiAgICAgIC8vIHRleHQvaHRtbCBpZ25vcmVzIHRoZSBmaXJzdCBjaGFyYWN0ZXIgaW4gdGhlc2UgdGFncyBpZiBpdCdzIGEgbmV3bGluZVxuICAgICAgLy8gUHJlZmVyIHRvIGJyZWFrIGFwcGxpY2F0aW9uL3htbCBvdmVyIHRleHQvaHRtbCAoZm9yIG5vdykgYnkgYWRkaW5nXG4gICAgICAvLyBhIG5ld2xpbmUgc3BlY2lmaWNhbGx5IHRvIGdldCBlYXRlbiBieSB0aGUgcGFyc2VyLiAoQWx0ZXJuYXRlbHkgZm9yXG4gICAgICAvLyB0ZXh0YXJlYXMsIHJlcGxhY2luZyBcIl5cXG5cIiB3aXRoIFwiXFxyXFxuXCIgZG9lc24ndCBnZXQgZWF0ZW4sIGFuZCB0aGUgZmlyc3RcbiAgICAgIC8vIFxcciBpcyBub3JtYWxpemVkIG91dCBieSBIVE1MVGV4dEFyZWFFbGVtZW50I3ZhbHVlLilcbiAgICAgIC8vIFNlZTogPGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWwtcG9seWdsb3QvI25ld2xpbmVzLWluLXRleHRhcmVhLWFuZC1wcmU+XG4gICAgICAvLyBTZWU6IDxodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9zeW50YXguaHRtbCNlbGVtZW50LXJlc3RyaWN0aW9ucz5cbiAgICAgIC8vIFNlZTogPGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L3N5bnRheC5odG1sI25ld2xpbmVzPlxuICAgICAgLy8gU2VlOiBQYXJzaW5nIG9mIFwidGV4dGFyZWFcIiBcImxpc3RpbmdcIiBhbmQgXCJwcmVcIiBlbGVtZW50c1xuICAgICAgLy8gIGZyb20gPGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmJvZHk+XG4gICAgICByZXR1cm4gJ1xcbicgKyByZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICB9LFxuXG4gIF9jcmVhdGVJbml0aWFsQ2hpbGRyZW46IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcHJvcHMsIGNvbnRleHQsIGVsKSB7XG4gICAgLy8gSW50ZW50aW9uYWwgdXNlIG9mICE9IHRvIGF2b2lkIGNhdGNoaW5nIHplcm8vZmFsc2UuXG4gICAgdmFyIGlubmVySFRNTCA9IHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MO1xuICAgIGlmIChpbm5lckhUTUwgIT0gbnVsbCkge1xuICAgICAgaWYgKGlubmVySFRNTC5fX2h0bWwgIT0gbnVsbCkge1xuICAgICAgICBzZXRJbm5lckhUTUwoZWwsIGlubmVySFRNTC5fX2h0bWwpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY29udGVudFRvVXNlID0gQ09OVEVOVF9UWVBFU1t0eXBlb2YgcHJvcHMuY2hpbGRyZW5dID8gcHJvcHMuY2hpbGRyZW4gOiBudWxsO1xuICAgICAgdmFyIGNoaWxkcmVuVG9Vc2UgPSBjb250ZW50VG9Vc2UgIT0gbnVsbCA/IG51bGwgOiBwcm9wcy5jaGlsZHJlbjtcbiAgICAgIGlmIChjb250ZW50VG9Vc2UgIT0gbnVsbCkge1xuICAgICAgICAvLyBUT0RPOiBWYWxpZGF0ZSB0aGF0IHRleHQgaXMgYWxsb3dlZCBhcyBhIGNoaWxkIG9mIHRoaXMgbm9kZVxuICAgICAgICBzZXRUZXh0Q29udGVudChlbCwgY29udGVudFRvVXNlKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hpbGRyZW5Ub1VzZSAhPSBudWxsKSB7XG4gICAgICAgIHZhciBtb3VudEltYWdlcyA9IHRoaXMubW91bnRDaGlsZHJlbihjaGlsZHJlblRvVXNlLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW91bnRJbWFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBlbC5hcHBlbmRDaGlsZChtb3VudEltYWdlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlY2VpdmVzIGEgbmV4dCBlbGVtZW50IGFuZCB1cGRhdGVzIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnRcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqL1xuICByZWNlaXZlQ29tcG9uZW50OiBmdW5jdGlvbiAobmV4dEVsZW1lbnQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdmFyIHByZXZFbGVtZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQ7XG4gICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBuZXh0RWxlbWVudDtcbiAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudCh0cmFuc2FjdGlvbiwgcHJldkVsZW1lbnQsIG5leHRFbGVtZW50LCBjb250ZXh0KTtcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlcyBhIG5hdGl2ZSBET00gY29tcG9uZW50IGFmdGVyIGl0IGhhcyBhbHJlYWR5IGJlZW4gYWxsb2NhdGVkIGFuZFxuICAgKiBhdHRhY2hlZCB0byB0aGUgRE9NLiBSZWNvbmNpbGVzIHRoZSByb290IERPTSBub2RlLCB0aGVuIHJlY3Vyc2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBwcmV2RWxlbWVudFxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnRcbiAgICogQGludGVybmFsXG4gICAqIEBvdmVycmlkYWJsZVxuICAgKi9cbiAgdXBkYXRlQ29tcG9uZW50OiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCwgY29udGV4dCkge1xuICAgIHZhciBsYXN0UHJvcHMgPSBwcmV2RWxlbWVudC5wcm9wcztcbiAgICB2YXIgbmV4dFByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cbiAgICBzd2l0Y2ggKHRoaXMuX3RhZykge1xuICAgICAgY2FzZSAnYnV0dG9uJzpcbiAgICAgICAgbGFzdFByb3BzID0gUmVhY3RET01CdXR0b24uZ2V0TmF0aXZlUHJvcHModGhpcywgbGFzdFByb3BzKTtcbiAgICAgICAgbmV4dFByb3BzID0gUmVhY3RET01CdXR0b24uZ2V0TmF0aXZlUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgIFJlYWN0RE9NSW5wdXQudXBkYXRlV3JhcHBlcih0aGlzKTtcbiAgICAgICAgbGFzdFByb3BzID0gUmVhY3RET01JbnB1dC5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTUlucHV0LmdldE5hdGl2ZVByb3BzKHRoaXMsIG5leHRQcm9wcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb3B0aW9uJzpcbiAgICAgICAgbGFzdFByb3BzID0gUmVhY3RET01PcHRpb24uZ2V0TmF0aXZlUHJvcHModGhpcywgbGFzdFByb3BzKTtcbiAgICAgICAgbmV4dFByb3BzID0gUmVhY3RET01PcHRpb24uZ2V0TmF0aXZlUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTVNlbGVjdC5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTVNlbGVjdC5nZXROYXRpdmVQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICAgICAgUmVhY3RET01UZXh0YXJlYS51cGRhdGVXcmFwcGVyKHRoaXMpO1xuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTVRleHRhcmVhLmdldE5hdGl2ZVByb3BzKHRoaXMsIGxhc3RQcm9wcyk7XG4gICAgICAgIG5leHRQcm9wcyA9IFJlYWN0RE9NVGV4dGFyZWEuZ2V0TmF0aXZlUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIElmIHRoZSBjb250ZXh0IGlzIHJlZmVyZW5jZS1lcXVhbCB0byB0aGUgb2xkIG9uZSwgcGFzcyBkb3duIHRoZSBzYW1lXG4gICAgICAvLyBwcm9jZXNzZWQgb2JqZWN0IHNvIHRoZSB1cGRhdGUgYmFpbG91dCBpbiBSZWFjdFJlY29uY2lsZXIgYmVoYXZlc1xuICAgICAgLy8gY29ycmVjdGx5IChhbmQgaWRlbnRpY2FsbHkgaW4gZGV2IGFuZCBwcm9kKS4gU2VlICM1MDA1LlxuICAgICAgaWYgKHRoaXMuX3VucHJvY2Vzc2VkQ29udGV4dERldiAhPT0gY29udGV4dCkge1xuICAgICAgICB0aGlzLl91bnByb2Nlc3NlZENvbnRleHREZXYgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2ID0gcHJvY2Vzc0NoaWxkQ29udGV4dERldihjb250ZXh0LCB0aGlzKTtcbiAgICAgIH1cbiAgICAgIGNvbnRleHQgPSB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2O1xuICAgIH1cblxuICAgIGFzc2VydFZhbGlkUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICB0aGlzLl91cGRhdGVET01Qcm9wZXJ0aWVzKGxhc3RQcm9wcywgbmV4dFByb3BzLCB0cmFuc2FjdGlvbiwgbnVsbCk7XG4gICAgdGhpcy5fdXBkYXRlRE9NQ2hpbGRyZW4obGFzdFByb3BzLCBuZXh0UHJvcHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcblxuICAgIGlmICghY2FuRGVmaW5lUHJvcGVydHkgJiYgdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzKSB7XG4gICAgICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMucHJvcHMgPSBuZXh0UHJvcHM7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3RhZyA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgIC8vIDxzZWxlY3Q+IHZhbHVlIHVwZGF0ZSBuZWVkcyB0byBvY2N1ciBhZnRlciA8b3B0aW9uPiBjaGlsZHJlblxuICAgICAgLy8gcmVjb25jaWxpYXRpb25cbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUocG9zdFVwZGF0ZVNlbGVjdFdyYXBwZXIsIHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVjb25jaWxlcyB0aGUgcHJvcGVydGllcyBieSBkZXRlY3RpbmcgZGlmZmVyZW5jZXMgaW4gcHJvcGVydHkgdmFsdWVzIGFuZFxuICAgKiB1cGRhdGluZyB0aGUgRE9NIGFzIG5lY2Vzc2FyeS4gVGhpcyBmdW5jdGlvbiBpcyBwcm9iYWJseSB0aGUgc2luZ2xlIG1vc3RcbiAgICogY3JpdGljYWwgcGF0aCBmb3IgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uLlxuICAgKlxuICAgKiBUT0RPOiBCZW5jaG1hcmsgd2hldGhlciBjaGVja2luZyBmb3IgY2hhbmdlZCB2YWx1ZXMgaW4gbWVtb3J5IGFjdHVhbGx5XG4gICAqICAgICAgIGltcHJvdmVzIHBlcmZvcm1hbmNlIChlc3BlY2lhbGx5IHN0YXRpY2FsbHkgcG9zaXRpb25lZCBlbGVtZW50cykuXG4gICAqIFRPRE86IEJlbmNobWFyayB0aGUgZWZmZWN0cyBvZiBwdXR0aW5nIHRoaXMgYXQgdGhlIHRvcCBzaW5jZSA5OSUgb2YgcHJvcHNcbiAgICogICAgICAgZG8gbm90IGNoYW5nZSBmb3IgYSBnaXZlbiByZWNvbmNpbGlhdGlvbi5cbiAgICogVE9ETzogQmVuY2htYXJrIGFyZWFzIHRoYXQgY2FuIGJlIGltcHJvdmVkIHdpdGggY2FjaGluZy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtvYmplY3R9IGxhc3RQcm9wc1xuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHs/RE9NRWxlbWVudH0gbm9kZVxuICAgKi9cbiAgX3VwZGF0ZURPTVByb3BlcnRpZXM6IGZ1bmN0aW9uIChsYXN0UHJvcHMsIG5leHRQcm9wcywgdHJhbnNhY3Rpb24sIG5vZGUpIHtcbiAgICB2YXIgcHJvcEtleTtcbiAgICB2YXIgc3R5bGVOYW1lO1xuICAgIHZhciBzdHlsZVVwZGF0ZXM7XG4gICAgZm9yIChwcm9wS2V5IGluIGxhc3RQcm9wcykge1xuICAgICAgaWYgKG5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSB8fCAhbGFzdFByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BLZXkgPT09IFNUWUxFKSB7XG4gICAgICAgIHZhciBsYXN0U3R5bGUgPSB0aGlzLl9wcmV2aW91c1N0eWxlQ29weTtcbiAgICAgICAgZm9yIChzdHlsZU5hbWUgaW4gbGFzdFN0eWxlKSB7XG4gICAgICAgICAgaWYgKGxhc3RTdHlsZS5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpKSB7XG4gICAgICAgICAgICBzdHlsZVVwZGF0ZXMgPSBzdHlsZVVwZGF0ZXMgfHwge307XG4gICAgICAgICAgICBzdHlsZVVwZGF0ZXNbc3R5bGVOYW1lXSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlQ29weSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGlmIChsYXN0UHJvcHNbcHJvcEtleV0pIHtcbiAgICAgICAgICAvLyBPbmx5IGNhbGwgZGVsZXRlTGlzdGVuZXIgaWYgdGhlcmUgd2FzIGEgbGlzdGVuZXIgcHJldmlvdXNseSBvclxuICAgICAgICAgIC8vIGVsc2Ugd2lsbERlbGV0ZUxpc3RlbmVyIGdldHMgY2FsbGVkIHdoZW4gdGhlcmUgd2Fzbid0IGFjdHVhbGx5IGFcbiAgICAgICAgICAvLyBsaXN0ZW5lciAoZS5nLiwgb25DbGljaz17bnVsbH0pXG4gICAgICAgICAgZGVsZXRlTGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoRE9NUHJvcGVydHkucHJvcGVydGllc1twcm9wS2V5XSB8fCBET01Qcm9wZXJ0eS5pc0N1c3RvbUF0dHJpYnV0ZShwcm9wS2V5KSkge1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgICAgICB9XG4gICAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5kZWxldGVWYWx1ZUZvclByb3BlcnR5KG5vZGUsIHByb3BLZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHByb3BLZXkgaW4gbmV4dFByb3BzKSB7XG4gICAgICB2YXIgbmV4dFByb3AgPSBuZXh0UHJvcHNbcHJvcEtleV07XG4gICAgICB2YXIgbGFzdFByb3AgPSBwcm9wS2V5ID09PSBTVFlMRSA/IHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5IDogbGFzdFByb3BzW3Byb3BLZXldO1xuICAgICAgaWYgKCFuZXh0UHJvcHMuaGFzT3duUHJvcGVydHkocHJvcEtleSkgfHwgbmV4dFByb3AgPT09IGxhc3RQcm9wKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BLZXkgPT09IFNUWUxFKSB7XG4gICAgICAgIGlmIChuZXh0UHJvcCkge1xuICAgICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBjaGVja0FuZFdhcm5Gb3JNdXRhdGVkU3R5bGUodGhpcy5fcHJldmlvdXNTdHlsZUNvcHksIHRoaXMuX3ByZXZpb3VzU3R5bGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNTdHlsZSA9IG5leHRQcm9wO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXh0UHJvcCA9IHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5ID0gYXNzaWduKHt9LCBuZXh0UHJvcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0UHJvcCkge1xuICAgICAgICAgIC8vIFVuc2V0IHN0eWxlcyBvbiBgbGFzdFByb3BgIGJ1dCBub3Qgb24gYG5leHRQcm9wYC5cbiAgICAgICAgICBmb3IgKHN0eWxlTmFtZSBpbiBsYXN0UHJvcCkge1xuICAgICAgICAgICAgaWYgKGxhc3RQcm9wLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkgJiYgKCFuZXh0UHJvcCB8fCAhbmV4dFByb3AuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSkpIHtcbiAgICAgICAgICAgICAgc3R5bGVVcGRhdGVzID0gc3R5bGVVcGRhdGVzIHx8IHt9O1xuICAgICAgICAgICAgICBzdHlsZVVwZGF0ZXNbc3R5bGVOYW1lXSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBVcGRhdGUgc3R5bGVzIHRoYXQgY2hhbmdlZCBzaW5jZSBgbGFzdFByb3BgLlxuICAgICAgICAgIGZvciAoc3R5bGVOYW1lIGluIG5leHRQcm9wKSB7XG4gICAgICAgICAgICBpZiAobmV4dFByb3AuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSAmJiBsYXN0UHJvcFtzdHlsZU5hbWVdICE9PSBuZXh0UHJvcFtzdHlsZU5hbWVdKSB7XG4gICAgICAgICAgICAgIHN0eWxlVXBkYXRlcyA9IHN0eWxlVXBkYXRlcyB8fCB7fTtcbiAgICAgICAgICAgICAgc3R5bGVVcGRhdGVzW3N0eWxlTmFtZV0gPSBuZXh0UHJvcFtzdHlsZU5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZWxpZXMgb24gYHVwZGF0ZVN0eWxlc0J5SURgIG5vdCBtdXRhdGluZyBgc3R5bGVVcGRhdGVzYC5cbiAgICAgICAgICBzdHlsZVVwZGF0ZXMgPSBuZXh0UHJvcDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZWdpc3RyYXRpb25OYW1lTW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSkge1xuICAgICAgICBpZiAobmV4dFByb3ApIHtcbiAgICAgICAgICBlbnF1ZXVlUHV0TGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSwgbmV4dFByb3AsIHRyYW5zYWN0aW9uKTtcbiAgICAgICAgfSBlbHNlIGlmIChsYXN0UHJvcCkge1xuICAgICAgICAgIGRlbGV0ZUxpc3RlbmVyKHRoaXMuX3Jvb3ROb2RlSUQsIHByb3BLZXkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzQ3VzdG9tQ29tcG9uZW50KHRoaXMuX3RhZywgbmV4dFByb3BzKSkge1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wS2V5ID09PSBDSElMRFJFTikge1xuICAgICAgICAgIG5leHRQcm9wID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JBdHRyaWJ1dGUobm9kZSwgcHJvcEtleSwgbmV4dFByb3ApO1xuICAgICAgfSBlbHNlIGlmIChET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW3Byb3BLZXldIHx8IERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKHByb3BLZXkpKSB7XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2UncmUgdXBkYXRpbmcgdG8gbnVsbCBvciB1bmRlZmluZWQsIHdlIHNob3VsZCByZW1vdmUgdGhlIHByb3BlcnR5XG4gICAgICAgIC8vIGZyb20gdGhlIERPTSBub2RlIGluc3RlYWQgb2YgaW5hZHZlcnRhbnRseSBzZXR0aW5nIHRvIGEgc3RyaW5nLiBUaGlzXG4gICAgICAgIC8vIGJyaW5ncyB1cyBpbiBsaW5lIHdpdGggdGhlIHNhbWUgYmVoYXZpb3Igd2UgaGF2ZSBvbiBpbml0aWFsIHJlbmRlci5cbiAgICAgICAgaWYgKG5leHRQcm9wICE9IG51bGwpIHtcbiAgICAgICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JQcm9wZXJ0eShub2RlLCBwcm9wS2V5LCBuZXh0UHJvcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLmRlbGV0ZVZhbHVlRm9yUHJvcGVydHkobm9kZSwgcHJvcEtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHN0eWxlVXBkYXRlcykge1xuICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICB9XG4gICAgICBDU1NQcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JTdHlsZXMobm9kZSwgc3R5bGVVcGRhdGVzKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlY29uY2lsZXMgdGhlIGNoaWxkcmVuIHdpdGggdGhlIHZhcmlvdXMgcHJvcGVydGllcyB0aGF0IGFmZmVjdCB0aGVcbiAgICogY2hpbGRyZW4gY29udGVudC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGxhc3RQcm9wc1xuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICovXG4gIF91cGRhdGVET01DaGlsZHJlbjogZnVuY3Rpb24gKGxhc3RQcm9wcywgbmV4dFByb3BzLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHZhciBsYXN0Q29udGVudCA9IENPTlRFTlRfVFlQRVNbdHlwZW9mIGxhc3RQcm9wcy5jaGlsZHJlbl0gPyBsYXN0UHJvcHMuY2hpbGRyZW4gOiBudWxsO1xuICAgIHZhciBuZXh0Q29udGVudCA9IENPTlRFTlRfVFlQRVNbdHlwZW9mIG5leHRQcm9wcy5jaGlsZHJlbl0gPyBuZXh0UHJvcHMuY2hpbGRyZW4gOiBudWxsO1xuXG4gICAgdmFyIGxhc3RIdG1sID0gbGFzdFByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MICYmIGxhc3RQcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTC5fX2h0bWw7XG4gICAgdmFyIG5leHRIdG1sID0gbmV4dFByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MICYmIG5leHRQcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTC5fX2h0bWw7XG5cbiAgICAvLyBOb3RlIHRoZSB1c2Ugb2YgYCE9YCB3aGljaCBjaGVja3MgZm9yIG51bGwgb3IgdW5kZWZpbmVkLlxuICAgIHZhciBsYXN0Q2hpbGRyZW4gPSBsYXN0Q29udGVudCAhPSBudWxsID8gbnVsbCA6IGxhc3RQcm9wcy5jaGlsZHJlbjtcbiAgICB2YXIgbmV4dENoaWxkcmVuID0gbmV4dENvbnRlbnQgIT0gbnVsbCA/IG51bGwgOiBuZXh0UHJvcHMuY2hpbGRyZW47XG5cbiAgICAvLyBJZiB3ZSdyZSBzd2l0Y2hpbmcgZnJvbSBjaGlsZHJlbiB0byBjb250ZW50L2h0bWwgb3IgdmljZSB2ZXJzYSwgcmVtb3ZlXG4gICAgLy8gdGhlIG9sZCBjb250ZW50XG4gICAgdmFyIGxhc3RIYXNDb250ZW50T3JIdG1sID0gbGFzdENvbnRlbnQgIT0gbnVsbCB8fCBsYXN0SHRtbCAhPSBudWxsO1xuICAgIHZhciBuZXh0SGFzQ29udGVudE9ySHRtbCA9IG5leHRDb250ZW50ICE9IG51bGwgfHwgbmV4dEh0bWwgIT0gbnVsbDtcbiAgICBpZiAobGFzdENoaWxkcmVuICE9IG51bGwgJiYgbmV4dENoaWxkcmVuID09IG51bGwpIHtcbiAgICAgIHRoaXMudXBkYXRlQ2hpbGRyZW4obnVsbCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgIH0gZWxzZSBpZiAobGFzdEhhc0NvbnRlbnRPckh0bWwgJiYgIW5leHRIYXNDb250ZW50T3JIdG1sKSB7XG4gICAgICB0aGlzLnVwZGF0ZVRleHRDb250ZW50KCcnKTtcbiAgICB9XG5cbiAgICBpZiAobmV4dENvbnRlbnQgIT0gbnVsbCkge1xuICAgICAgaWYgKGxhc3RDb250ZW50ICE9PSBuZXh0Q29udGVudCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRleHRDb250ZW50KCcnICsgbmV4dENvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobmV4dEh0bWwgIT0gbnVsbCkge1xuICAgICAgaWYgKGxhc3RIdG1sICE9PSBuZXh0SHRtbCkge1xuICAgICAgICB0aGlzLnVwZGF0ZU1hcmt1cCgnJyArIG5leHRIdG1sKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG5leHRDaGlsZHJlbiAhPSBudWxsKSB7XG4gICAgICB0aGlzLnVwZGF0ZUNoaWxkcmVuKG5leHRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGVzdHJveXMgYWxsIGV2ZW50IHJlZ2lzdHJhdGlvbnMgZm9yIHRoaXMgaW5zdGFuY2UuIERvZXMgbm90IHJlbW92ZSBmcm9tXG4gICAqIHRoZSBET00uIFRoYXQgbXVzdCBiZSBkb25lIGJ5IHRoZSBwYXJlbnQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdW5tb3VudENvbXBvbmVudDogZnVuY3Rpb24gKCkge1xuICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG4gICAgICBjYXNlICdpZnJhbWUnOlxuICAgICAgY2FzZSAnaW1nJzpcbiAgICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgY2FzZSAndmlkZW8nOlxuICAgICAgY2FzZSAnYXVkaW8nOlxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fd3JhcHBlclN0YXRlLmxpc3RlbmVycztcbiAgICAgICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNbaV0ucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICBSZWFjdERPTUlucHV0LnVubW91bnRXcmFwcGVyKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2h0bWwnOlxuICAgICAgY2FzZSAnaGVhZCc6XG4gICAgICBjYXNlICdib2R5JzpcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbXBvbmVudHMgbGlrZSA8aHRtbD4gPGhlYWQ+IGFuZCA8Ym9keT4gY2FuJ3QgYmUgcmVtb3ZlZCBvciBhZGRlZFxuICAgICAgICAgKiBlYXNpbHkgaW4gYSBjcm9zcy1icm93c2VyIHdheSwgaG93ZXZlciBpdCdzIHZhbHVhYmxlIHRvIGJlIGFibGUgdG9cbiAgICAgICAgICogdGFrZSBhZHZhbnRhZ2Ugb2YgUmVhY3QncyByZWNvbmNpbGlhdGlvbiBmb3Igc3R5bGluZyBhbmQgPHRpdGxlPlxuICAgICAgICAgKiBtYW5hZ2VtZW50LiBTbyB3ZSBqdXN0IGRvY3VtZW50IGl0IGFuZCB0aHJvdyBpbiBkYW5nZXJvdXMgY2FzZXMuXG4gICAgICAgICAqL1xuICAgICAgICAhZmFsc2UgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnPCVzPiB0cmllZCB0byB1bm1vdW50LiBCZWNhdXNlIG9mIGNyb3NzLWJyb3dzZXIgcXVpcmtzIGl0IGlzICcgKyAnaW1wb3NzaWJsZSB0byB1bm1vdW50IHNvbWUgdG9wLWxldmVsIGNvbXBvbmVudHMgKGVnIDxodG1sPiwgJyArICc8aGVhZD4sIGFuZCA8Ym9keT4pIHJlbGlhYmx5IGFuZCBlZmZpY2llbnRseS4gVG8gZml4IHRoaXMsIGhhdmUgYSAnICsgJ3NpbmdsZSB0b3AtbGV2ZWwgY29tcG9uZW50IHRoYXQgbmV2ZXIgdW5tb3VudHMgcmVuZGVyIHRoZXNlICcgKyAnZWxlbWVudHMuJywgdGhpcy5fdGFnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMudW5tb3VudENoaWxkcmVuKCk7XG4gICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmRlbGV0ZUFsbExpc3RlbmVycyh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudC51bm1vdW50SURGcm9tRW52aXJvbm1lbnQodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IG51bGw7XG4gICAgdGhpcy5fd3JhcHBlclN0YXRlID0gbnVsbDtcbiAgICBpZiAodGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzKSB7XG4gICAgICB2YXIgbm9kZSA9IHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcztcbiAgICAgIG5vZGUuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQgPSBudWxsO1xuICAgICAgdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzID0gbnVsbDtcbiAgICB9XG4gIH0sXG5cbiAgZ2V0UHVibGljSW5zdGFuY2U6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcykge1xuICAgICAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG5cbiAgICAgIG5vZGUuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQgPSB0aGlzO1xuICAgICAgbm9kZS5nZXRET01Ob2RlID0gbGVnYWN5R2V0RE9NTm9kZTtcbiAgICAgIG5vZGUuaXNNb3VudGVkID0gbGVnYWN5SXNNb3VudGVkO1xuICAgICAgbm9kZS5zZXRTdGF0ZSA9IGxlZ2FjeVNldFN0YXRlRXRjO1xuICAgICAgbm9kZS5yZXBsYWNlU3RhdGUgPSBsZWdhY3lTZXRTdGF0ZUV0YztcbiAgICAgIG5vZGUuZm9yY2VVcGRhdGUgPSBsZWdhY3lTZXRTdGF0ZUV0YztcbiAgICAgIG5vZGUuc2V0UHJvcHMgPSBsZWdhY3lTZXRQcm9wcztcbiAgICAgIG5vZGUucmVwbGFjZVByb3BzID0gbGVnYWN5UmVwbGFjZVByb3BzO1xuXG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhub2RlLCBsZWdhY3lQcm9wc0Rlc2NyaXB0b3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHVwZGF0ZUNvbXBvbmVudCB3aWxsIHVwZGF0ZSB0aGlzIHByb3BlcnR5IG9uIHN1YnNlcXVlbnQgcmVuZGVyc1xuICAgICAgICAgIG5vZGUucHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdXBkYXRlQ29tcG9uZW50IHdpbGwgdXBkYXRlIHRoaXMgcHJvcGVydHkgb24gc3Vic2VxdWVudCByZW5kZXJzXG4gICAgICAgIG5vZGUucHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICAgIH1cblxuICAgICAgdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzID0gbm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcztcbiAgfVxuXG59O1xuXG5SZWFjdFBlcmYubWVhc3VyZU1ldGhvZHMoUmVhY3RET01Db21wb25lbnQsICdSZWFjdERPTUNvbXBvbmVudCcsIHtcbiAgbW91bnRDb21wb25lbnQ6ICdtb3VudENvbXBvbmVudCcsXG4gIHVwZGF0ZUNvbXBvbmVudDogJ3VwZGF0ZUNvbXBvbmVudCdcbn0pO1xuXG5hc3NpZ24oUmVhY3RET01Db21wb25lbnQucHJvdG90eXBlLCBSZWFjdERPTUNvbXBvbmVudC5NaXhpbiwgUmVhY3RNdWx0aUNoaWxkLk1peGluKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUNvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01GYWN0b3JpZXNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEVsZW1lbnRWYWxpZGF0b3IgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudFZhbGlkYXRvcicpO1xuXG52YXIgbWFwT2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvbWFwT2JqZWN0Jyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgZmFjdG9yeSB0aGF0IGNyZWF0ZXMgSFRNTCB0YWcgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRhZyBUYWcgbmFtZSAoZS5nLiBgZGl2YCkuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVET01GYWN0b3J5KHRhZykge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHJldHVybiBSZWFjdEVsZW1lbnRWYWxpZGF0b3IuY3JlYXRlRmFjdG9yeSh0YWcpO1xuICB9XG4gIHJldHVybiBSZWFjdEVsZW1lbnQuY3JlYXRlRmFjdG9yeSh0YWcpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBtYXBwaW5nIGZyb20gc3VwcG9ydGVkIEhUTUwgdGFncyB0byBgUmVhY3RET01Db21wb25lbnRgIGNsYXNzZXMuXG4gKiBUaGlzIGlzIGFsc28gYWNjZXNzaWJsZSB2aWEgYFJlYWN0LkRPTWAuXG4gKlxuICogQHB1YmxpY1xuICovXG52YXIgUmVhY3RET01GYWN0b3JpZXMgPSBtYXBPYmplY3Qoe1xuICBhOiAnYScsXG4gIGFiYnI6ICdhYmJyJyxcbiAgYWRkcmVzczogJ2FkZHJlc3MnLFxuICBhcmVhOiAnYXJlYScsXG4gIGFydGljbGU6ICdhcnRpY2xlJyxcbiAgYXNpZGU6ICdhc2lkZScsXG4gIGF1ZGlvOiAnYXVkaW8nLFxuICBiOiAnYicsXG4gIGJhc2U6ICdiYXNlJyxcbiAgYmRpOiAnYmRpJyxcbiAgYmRvOiAnYmRvJyxcbiAgYmlnOiAnYmlnJyxcbiAgYmxvY2txdW90ZTogJ2Jsb2NrcXVvdGUnLFxuICBib2R5OiAnYm9keScsXG4gIGJyOiAnYnInLFxuICBidXR0b246ICdidXR0b24nLFxuICBjYW52YXM6ICdjYW52YXMnLFxuICBjYXB0aW9uOiAnY2FwdGlvbicsXG4gIGNpdGU6ICdjaXRlJyxcbiAgY29kZTogJ2NvZGUnLFxuICBjb2w6ICdjb2wnLFxuICBjb2xncm91cDogJ2NvbGdyb3VwJyxcbiAgZGF0YTogJ2RhdGEnLFxuICBkYXRhbGlzdDogJ2RhdGFsaXN0JyxcbiAgZGQ6ICdkZCcsXG4gIGRlbDogJ2RlbCcsXG4gIGRldGFpbHM6ICdkZXRhaWxzJyxcbiAgZGZuOiAnZGZuJyxcbiAgZGlhbG9nOiAnZGlhbG9nJyxcbiAgZGl2OiAnZGl2JyxcbiAgZGw6ICdkbCcsXG4gIGR0OiAnZHQnLFxuICBlbTogJ2VtJyxcbiAgZW1iZWQ6ICdlbWJlZCcsXG4gIGZpZWxkc2V0OiAnZmllbGRzZXQnLFxuICBmaWdjYXB0aW9uOiAnZmlnY2FwdGlvbicsXG4gIGZpZ3VyZTogJ2ZpZ3VyZScsXG4gIGZvb3RlcjogJ2Zvb3RlcicsXG4gIGZvcm06ICdmb3JtJyxcbiAgaDE6ICdoMScsXG4gIGgyOiAnaDInLFxuICBoMzogJ2gzJyxcbiAgaDQ6ICdoNCcsXG4gIGg1OiAnaDUnLFxuICBoNjogJ2g2JyxcbiAgaGVhZDogJ2hlYWQnLFxuICBoZWFkZXI6ICdoZWFkZXInLFxuICBoZ3JvdXA6ICdoZ3JvdXAnLFxuICBocjogJ2hyJyxcbiAgaHRtbDogJ2h0bWwnLFxuICBpOiAnaScsXG4gIGlmcmFtZTogJ2lmcmFtZScsXG4gIGltZzogJ2ltZycsXG4gIGlucHV0OiAnaW5wdXQnLFxuICBpbnM6ICdpbnMnLFxuICBrYmQ6ICdrYmQnLFxuICBrZXlnZW46ICdrZXlnZW4nLFxuICBsYWJlbDogJ2xhYmVsJyxcbiAgbGVnZW5kOiAnbGVnZW5kJyxcbiAgbGk6ICdsaScsXG4gIGxpbms6ICdsaW5rJyxcbiAgbWFpbjogJ21haW4nLFxuICBtYXA6ICdtYXAnLFxuICBtYXJrOiAnbWFyaycsXG4gIG1lbnU6ICdtZW51JyxcbiAgbWVudWl0ZW06ICdtZW51aXRlbScsXG4gIG1ldGE6ICdtZXRhJyxcbiAgbWV0ZXI6ICdtZXRlcicsXG4gIG5hdjogJ25hdicsXG4gIG5vc2NyaXB0OiAnbm9zY3JpcHQnLFxuICBvYmplY3Q6ICdvYmplY3QnLFxuICBvbDogJ29sJyxcbiAgb3B0Z3JvdXA6ICdvcHRncm91cCcsXG4gIG9wdGlvbjogJ29wdGlvbicsXG4gIG91dHB1dDogJ291dHB1dCcsXG4gIHA6ICdwJyxcbiAgcGFyYW06ICdwYXJhbScsXG4gIHBpY3R1cmU6ICdwaWN0dXJlJyxcbiAgcHJlOiAncHJlJyxcbiAgcHJvZ3Jlc3M6ICdwcm9ncmVzcycsXG4gIHE6ICdxJyxcbiAgcnA6ICdycCcsXG4gIHJ0OiAncnQnLFxuICBydWJ5OiAncnVieScsXG4gIHM6ICdzJyxcbiAgc2FtcDogJ3NhbXAnLFxuICBzY3JpcHQ6ICdzY3JpcHQnLFxuICBzZWN0aW9uOiAnc2VjdGlvbicsXG4gIHNlbGVjdDogJ3NlbGVjdCcsXG4gIHNtYWxsOiAnc21hbGwnLFxuICBzb3VyY2U6ICdzb3VyY2UnLFxuICBzcGFuOiAnc3BhbicsXG4gIHN0cm9uZzogJ3N0cm9uZycsXG4gIHN0eWxlOiAnc3R5bGUnLFxuICBzdWI6ICdzdWInLFxuICBzdW1tYXJ5OiAnc3VtbWFyeScsXG4gIHN1cDogJ3N1cCcsXG4gIHRhYmxlOiAndGFibGUnLFxuICB0Ym9keTogJ3Rib2R5JyxcbiAgdGQ6ICd0ZCcsXG4gIHRleHRhcmVhOiAndGV4dGFyZWEnLFxuICB0Zm9vdDogJ3Rmb290JyxcbiAgdGg6ICd0aCcsXG4gIHRoZWFkOiAndGhlYWQnLFxuICB0aW1lOiAndGltZScsXG4gIHRpdGxlOiAndGl0bGUnLFxuICB0cjogJ3RyJyxcbiAgdHJhY2s6ICd0cmFjaycsXG4gIHU6ICd1JyxcbiAgdWw6ICd1bCcsXG4gICd2YXInOiAndmFyJyxcbiAgdmlkZW86ICd2aWRlbycsXG4gIHdicjogJ3dicicsXG5cbiAgLy8gU1ZHXG4gIGNpcmNsZTogJ2NpcmNsZScsXG4gIGNsaXBQYXRoOiAnY2xpcFBhdGgnLFxuICBkZWZzOiAnZGVmcycsXG4gIGVsbGlwc2U6ICdlbGxpcHNlJyxcbiAgZzogJ2cnLFxuICBpbWFnZTogJ2ltYWdlJyxcbiAgbGluZTogJ2xpbmUnLFxuICBsaW5lYXJHcmFkaWVudDogJ2xpbmVhckdyYWRpZW50JyxcbiAgbWFzazogJ21hc2snLFxuICBwYXRoOiAncGF0aCcsXG4gIHBhdHRlcm46ICdwYXR0ZXJuJyxcbiAgcG9seWdvbjogJ3BvbHlnb24nLFxuICBwb2x5bGluZTogJ3BvbHlsaW5lJyxcbiAgcmFkaWFsR3JhZGllbnQ6ICdyYWRpYWxHcmFkaWVudCcsXG4gIHJlY3Q6ICdyZWN0JyxcbiAgc3RvcDogJ3N0b3AnLFxuICBzdmc6ICdzdmcnLFxuICB0ZXh0OiAndGV4dCcsXG4gIHRzcGFuOiAndHNwYW4nXG5cbn0sIGNyZWF0ZURPTUZhY3RvcnkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NRmFjdG9yaWVzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTUZlYXR1cmVGbGFnc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0ge1xuICB1c2VDcmVhdGVFbGVtZW50OiBmYWxzZVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUZlYXR1cmVGbGFnczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01JRE9wZXJhdGlvbnNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NQ2hpbGRyZW5PcGVyYXRpb25zID0gcmVxdWlyZSgnLi9ET01DaGlsZHJlbk9wZXJhdGlvbnMnKTtcbnZhciBET01Qcm9wZXJ0eU9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5T3BlcmF0aW9ucycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogRXJyb3JzIGZvciBwcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIG5vdCBiZSB1cGRhdGVkIHdpdGggYHVwZGF0ZVByb3BlcnR5QnlJRCgpYC5cbiAqXG4gKiBAdHlwZSB7b2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmFyIElOVkFMSURfUFJPUEVSVFlfRVJST1JTID0ge1xuICBkYW5nZXJvdXNseVNldElubmVySFRNTDogJ2BkYW5nZXJvdXNseVNldElubmVySFRNTGAgbXVzdCBiZSBzZXQgdXNpbmcgYHVwZGF0ZUlubmVySFRNTEJ5SUQoKWAuJyxcbiAgc3R5bGU6ICdgc3R5bGVgIG11c3QgYmUgc2V0IHVzaW5nIGB1cGRhdGVTdHlsZXNCeUlEKClgLidcbn07XG5cbi8qKlxuICogT3BlcmF0aW9ucyB1c2VkIHRvIHByb2Nlc3MgdXBkYXRlcyB0byBET00gbm9kZXMuXG4gKi9cbnZhciBSZWFjdERPTUlET3BlcmF0aW9ucyA9IHtcblxuICAvKipcbiAgICogVXBkYXRlcyBhIERPTSBub2RlIHdpdGggbmV3IHByb3BlcnR5IHZhbHVlcy4gVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIHRvXG4gICAqIHVwZGF0ZSBET00gcHJvcGVydGllcyBpbiBgRE9NUHJvcGVydHlgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgdGhlIG5vZGUgdG8gdXBkYXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBBIHZhbGlkIHByb3BlcnR5IG5hbWUsIHNlZSBgRE9NUHJvcGVydHlgLlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIE5ldyB2YWx1ZSBvZiB0aGUgcHJvcGVydHkuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdXBkYXRlUHJvcGVydHlCeUlEOiBmdW5jdGlvbiAoaWQsIG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUoaWQpO1xuICAgICEhSU5WQUxJRF9QUk9QRVJUWV9FUlJPUlMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndXBkYXRlUHJvcGVydHlCeUlEKC4uLik6ICVzJywgSU5WQUxJRF9QUk9QRVJUWV9FUlJPUlNbbmFtZV0pIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIElmIHdlJ3JlIHVwZGF0aW5nIHRvIG51bGwgb3IgdW5kZWZpbmVkLCB3ZSBzaG91bGQgcmVtb3ZlIHRoZSBwcm9wZXJ0eVxuICAgIC8vIGZyb20gdGhlIERPTSBub2RlIGluc3RlYWQgb2YgaW5hZHZlcnRhbnRseSBzZXR0aW5nIHRvIGEgc3RyaW5nLiBUaGlzXG4gICAgLy8gYnJpbmdzIHVzIGluIGxpbmUgd2l0aCB0aGUgc2FtZSBiZWhhdmlvciB3ZSBoYXZlIG9uIGluaXRpYWwgcmVuZGVyLlxuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JQcm9wZXJ0eShub2RlLCBuYW1lLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5kZWxldGVWYWx1ZUZvclByb3BlcnR5KG5vZGUsIG5hbWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYSBET00gbm9kZSB0aGF0IGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQgd2l0aCBtYXJrdXAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiBjaGlsZCB0byBiZSByZXBsYWNlZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBEYW5nZXJvdXMgbWFya3VwIHRvIGluamVjdCBpbiBwbGFjZSBvZiBjaGlsZC5cbiAgICogQGludGVybmFsXG4gICAqIEBzZWUge0Rhbmdlci5kYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cH1cbiAgICovXG4gIGRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDogZnVuY3Rpb24gKGlkLCBtYXJrdXApIHtcbiAgICB2YXIgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZShpZCk7XG4gICAgRE9NQ2hpbGRyZW5PcGVyYXRpb25zLmRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwKG5vZGUsIG1hcmt1cCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSBjb21wb25lbnQncyBjaGlsZHJlbiBieSBwcm9jZXNzaW5nIGEgc2VyaWVzIG9mIHVwZGF0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7YXJyYXk8b2JqZWN0Pn0gdXBkYXRlcyBMaXN0IG9mIHVwZGF0ZSBjb25maWd1cmF0aW9ucy5cbiAgICogQHBhcmFtIHthcnJheTxzdHJpbmc+fSBtYXJrdXAgTGlzdCBvZiBtYXJrdXAgc3RyaW5ncy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBkYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXM6IGZ1bmN0aW9uICh1cGRhdGVzLCBtYXJrdXApIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVwZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHVwZGF0ZXNbaV0ucGFyZW50Tm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh1cGRhdGVzW2ldLnBhcmVudElEKTtcbiAgICB9XG4gICAgRE9NQ2hpbGRyZW5PcGVyYXRpb25zLnByb2Nlc3NVcGRhdGVzKHVwZGF0ZXMsIG1hcmt1cCk7XG4gIH1cbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdERPTUlET3BlcmF0aW9ucywgJ1JlYWN0RE9NSURPcGVyYXRpb25zJywge1xuICBkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQ6ICdkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQnLFxuICBkYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXM6ICdkYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXMnXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUlET3BlcmF0aW9uczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01JbnB1dFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NSURPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9SZWFjdERPTUlET3BlcmF0aW9ucycpO1xudmFyIExpbmtlZFZhbHVlVXRpbHMgPSByZXF1aXJlKCcuL0xpbmtlZFZhbHVlVXRpbHMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgaW5zdGFuY2VzQnlSZWFjdElEID0ge307XG5cbmZ1bmN0aW9uIGZvcmNlVXBkYXRlSWZNb3VudGVkKCkge1xuICBpZiAodGhpcy5fcm9vdE5vZGVJRCkge1xuICAgIC8vIERPTSBjb21wb25lbnQgaXMgc3RpbGwgbW91bnRlZDsgdXBkYXRlXG4gICAgUmVhY3RET01JbnB1dC51cGRhdGVXcmFwcGVyKHRoaXMpO1xuICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyBhbiA8aW5wdXQ+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCBhbGxvd3Mgc2V0dGluZyB0aGVzZSBvcHRpb25hbFxuICogcHJvcHM6IGBjaGVja2VkYCwgYHZhbHVlYCwgYGRlZmF1bHRDaGVja2VkYCwgYW5kIGBkZWZhdWx0VmFsdWVgLlxuICpcbiAqIElmIGBjaGVja2VkYCBvciBgdmFsdWVgIGFyZSBub3Qgc3VwcGxpZWQgKG9yIG51bGwvdW5kZWZpbmVkKSwgdXNlciBhY3Rpb25zXG4gKiB0aGF0IGFmZmVjdCB0aGUgY2hlY2tlZCBzdGF0ZSBvciB2YWx1ZSB3aWxsIHRyaWdnZXIgdXBkYXRlcyB0byB0aGUgZWxlbWVudC5cbiAqXG4gKiBJZiB0aGV5IGFyZSBzdXBwbGllZCAoYW5kIG5vdCBudWxsL3VuZGVmaW5lZCksIHRoZSByZW5kZXJlZCBlbGVtZW50IHdpbGwgbm90XG4gKiB0cmlnZ2VyIHVwZGF0ZXMgdG8gdGhlIGVsZW1lbnQuIEluc3RlYWQsIHRoZSBwcm9wcyBtdXN0IGNoYW5nZSBpbiBvcmRlciBmb3JcbiAqIHRoZSByZW5kZXJlZCBlbGVtZW50IHRvIGJlIHVwZGF0ZWQuXG4gKlxuICogVGhlIHJlbmRlcmVkIGVsZW1lbnQgd2lsbCBiZSBpbml0aWFsaXplZCBhcyB1bmNoZWNrZWQgKG9yIGBkZWZhdWx0Q2hlY2tlZGApXG4gKiB3aXRoIGFuIGVtcHR5IHZhbHVlIChvciBgZGVmYXVsdFZhbHVlYCkuXG4gKlxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDEyL1dELWh0bWw1LTIwMTIxMDI1L3RoZS1pbnB1dC1lbGVtZW50Lmh0bWxcbiAqL1xudmFyIFJlYWN0RE9NSW5wdXQgPSB7XG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICB2YXIgY2hlY2tlZCA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0Q2hlY2tlZChwcm9wcyk7XG5cbiAgICB2YXIgbmF0aXZlUHJvcHMgPSBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICBkZWZhdWx0Q2hlY2tlZDogdW5kZWZpbmVkLFxuICAgICAgZGVmYXVsdFZhbHVlOiB1bmRlZmluZWQsXG4gICAgICB2YWx1ZTogdmFsdWUgIT0gbnVsbCA/IHZhbHVlIDogaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSxcbiAgICAgIGNoZWNrZWQ6IGNoZWNrZWQgIT0gbnVsbCA/IGNoZWNrZWQgOiBpbnN0Ll93cmFwcGVyU3RhdGUuaW5pdGlhbENoZWNrZWQsXG4gICAgICBvbkNoYW5nZTogaW5zdC5fd3JhcHBlclN0YXRlLm9uQ2hhbmdlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gbmF0aXZlUHJvcHM7XG4gIH0sXG5cbiAgbW91bnRXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgTGlua2VkVmFsdWVVdGlscy5jaGVja1Byb3BUeXBlcygnaW5wdXQnLCBwcm9wcywgaW5zdC5fY3VycmVudEVsZW1lbnQuX293bmVyKTtcbiAgICB9XG5cbiAgICB2YXIgZGVmYXVsdFZhbHVlID0gcHJvcHMuZGVmYXVsdFZhbHVlO1xuICAgIGluc3QuX3dyYXBwZXJTdGF0ZSA9IHtcbiAgICAgIGluaXRpYWxDaGVja2VkOiBwcm9wcy5kZWZhdWx0Q2hlY2tlZCB8fCBmYWxzZSxcbiAgICAgIGluaXRpYWxWYWx1ZTogZGVmYXVsdFZhbHVlICE9IG51bGwgPyBkZWZhdWx0VmFsdWUgOiBudWxsLFxuICAgICAgb25DaGFuZ2U6IF9oYW5kbGVDaGFuZ2UuYmluZChpbnN0KVxuICAgIH07XG4gIH0sXG5cbiAgbW91bnRSZWFkeVdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgLy8gQ2FuJ3QgYmUgaW4gbW91bnRXcmFwcGVyIG9yIGVsc2Ugc2VydmVyIHJlbmRlcmluZyBsZWFrcy5cbiAgICBpbnN0YW5jZXNCeVJlYWN0SURbaW5zdC5fcm9vdE5vZGVJRF0gPSBpbnN0O1xuICB9LFxuXG4gIHVubW91bnRXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCkge1xuICAgIGRlbGV0ZSBpbnN0YW5jZXNCeVJlYWN0SURbaW5zdC5fcm9vdE5vZGVJRF07XG4gIH0sXG5cbiAgdXBkYXRlV3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcbiAgICB2YXIgcHJvcHMgPSBpbnN0Ll9jdXJyZW50RWxlbWVudC5wcm9wcztcblxuICAgIC8vIFRPRE86IFNob3VsZG4ndCB0aGlzIGJlIGdldENoZWNrZWQocHJvcHMpP1xuICAgIHZhciBjaGVja2VkID0gcHJvcHMuY2hlY2tlZDtcbiAgICBpZiAoY2hlY2tlZCAhPSBudWxsKSB7XG4gICAgICBSZWFjdERPTUlET3BlcmF0aW9ucy51cGRhdGVQcm9wZXJ0eUJ5SUQoaW5zdC5fcm9vdE5vZGVJRCwgJ2NoZWNrZWQnLCBjaGVja2VkIHx8IGZhbHNlKTtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgLy8gQ2FzdCBgdmFsdWVgIHRvIGEgc3RyaW5nIHRvIGVuc3VyZSB0aGUgdmFsdWUgaXMgc2V0IGNvcnJlY3RseS4gV2hpbGVcbiAgICAgIC8vIGJyb3dzZXJzIHR5cGljYWxseSBkbyB0aGlzIGFzIG5lY2Vzc2FyeSwganNkb20gZG9lc24ndC5cbiAgICAgIFJlYWN0RE9NSURPcGVyYXRpb25zLnVwZGF0ZVByb3BlcnR5QnlJRChpbnN0Ll9yb290Tm9kZUlELCAndmFsdWUnLCAnJyArIHZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9oYW5kbGVDaGFuZ2UoZXZlbnQpIHtcbiAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cbiAgdmFyIHJldHVyblZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5leGVjdXRlT25DaGFuZ2UocHJvcHMsIGV2ZW50KTtcblxuICAvLyBIZXJlIHdlIHVzZSBhc2FwIHRvIHdhaXQgdW50aWwgYWxsIHVwZGF0ZXMgaGF2ZSBwcm9wYWdhdGVkLCB3aGljaFxuICAvLyBpcyBpbXBvcnRhbnQgd2hlbiB1c2luZyBjb250cm9sbGVkIGNvbXBvbmVudHMgd2l0aGluIGxheWVyczpcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8xNjk4XG4gIFJlYWN0VXBkYXRlcy5hc2FwKGZvcmNlVXBkYXRlSWZNb3VudGVkLCB0aGlzKTtcblxuICB2YXIgbmFtZSA9IHByb3BzLm5hbWU7XG4gIGlmIChwcm9wcy50eXBlID09PSAncmFkaW8nICYmIG5hbWUgIT0gbnVsbCkge1xuICAgIHZhciByb290Tm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICB2YXIgcXVlcnlSb290ID0gcm9vdE5vZGU7XG5cbiAgICB3aGlsZSAocXVlcnlSb290LnBhcmVudE5vZGUpIHtcbiAgICAgIHF1ZXJ5Um9vdCA9IHF1ZXJ5Um9vdC5wYXJlbnROb2RlO1xuICAgIH1cblxuICAgIC8vIElmIGByb290Tm9kZS5mb3JtYCB3YXMgbm9uLW51bGwsIHRoZW4gd2UgY291bGQgdHJ5IGBmb3JtLmVsZW1lbnRzYCxcbiAgICAvLyBidXQgdGhhdCBzb21ldGltZXMgYmVoYXZlcyBzdHJhbmdlbHkgaW4gSUU4LiBXZSBjb3VsZCBhbHNvIHRyeSB1c2luZ1xuICAgIC8vIGBmb3JtLmdldEVsZW1lbnRzQnlOYW1lYCwgYnV0IHRoYXQgd2lsbCBvbmx5IHJldHVybiBkaXJlY3QgY2hpbGRyZW5cbiAgICAvLyBhbmQgd29uJ3QgaW5jbHVkZSBpbnB1dHMgdGhhdCB1c2UgdGhlIEhUTUw1IGBmb3JtPWAgYXR0cmlidXRlLiBTaW5jZVxuICAgIC8vIHRoZSBpbnB1dCBtaWdodCBub3QgZXZlbiBiZSBpbiBhIGZvcm0sIGxldCdzIGp1c3QgdXNlIHRoZSBnbG9iYWxcbiAgICAvLyBgcXVlcnlTZWxlY3RvckFsbGAgdG8gZW5zdXJlIHdlIGRvbid0IG1pc3MgYW55dGhpbmcuXG4gICAgdmFyIGdyb3VwID0gcXVlcnlSb290LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9JyArIEpTT04uc3RyaW5naWZ5KCcnICsgbmFtZSkgKyAnXVt0eXBlPVwicmFkaW9cIl0nKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXAubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBvdGhlck5vZGUgPSBncm91cFtpXTtcbiAgICAgIGlmIChvdGhlck5vZGUgPT09IHJvb3ROb2RlIHx8IG90aGVyTm9kZS5mb3JtICE9PSByb290Tm9kZS5mb3JtKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGlmIHJhZGlvIGJ1dHRvbnMgcmVuZGVyZWQgYnkgZGlmZmVyZW50IGNvcGllcyBvZiBSZWFjdFxuICAgICAgLy8gYW5kIHRoZSBzYW1lIG5hbWUgYXJlIHJlbmRlcmVkIGludG8gdGhlIHNhbWUgZm9ybSAoc2FtZSBhcyAjMTkzOSkuXG4gICAgICAvLyBUaGF0J3MgcHJvYmFibHkgb2theTsgd2UgZG9uJ3Qgc3VwcG9ydCBpdCBqdXN0IGFzIHdlIGRvbid0IHN1cHBvcnRcbiAgICAgIC8vIG1peGluZyBSZWFjdCB3aXRoIG5vbi1SZWFjdC5cbiAgICAgIHZhciBvdGhlcklEID0gUmVhY3RNb3VudC5nZXRJRChvdGhlck5vZGUpO1xuICAgICAgIW90aGVySUQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RET01JbnB1dDogTWl4aW5nIFJlYWN0IGFuZCBub24tUmVhY3QgcmFkaW8gaW5wdXRzIHdpdGggdGhlICcgKyAnc2FtZSBgbmFtZWAgaXMgbm90IHN1cHBvcnRlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICB2YXIgb3RoZXJJbnN0YW5jZSA9IGluc3RhbmNlc0J5UmVhY3RJRFtvdGhlcklEXTtcbiAgICAgICFvdGhlckluc3RhbmNlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0RE9NSW5wdXQ6IFVua25vd24gcmFkaW8gYnV0dG9uIElEICVzLicsIG90aGVySUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIC8vIElmIHRoaXMgaXMgYSBjb250cm9sbGVkIHJhZGlvIGJ1dHRvbiBncm91cCwgZm9yY2luZyB0aGUgaW5wdXQgdGhhdFxuICAgICAgLy8gd2FzIHByZXZpb3VzbHkgY2hlY2tlZCB0byB1cGRhdGUgd2lsbCBjYXVzZSBpdCB0byBiZSBjb21lIHJlLWNoZWNrZWRcbiAgICAgIC8vIGFzIGFwcHJvcHJpYXRlLlxuICAgICAgUmVhY3RVcGRhdGVzLmFzYXAoZm9yY2VVcGRhdGVJZk1vdW50ZWQsIG90aGVySW5zdGFuY2UpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXR1cm5WYWx1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUlucHV0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTU9wdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q2hpbGRyZW4gPSByZXF1aXJlKCcuL1JlYWN0Q2hpbGRyZW4nKTtcbnZhciBSZWFjdERPTVNlbGVjdCA9IHJlcXVpcmUoJy4vUmVhY3RET01TZWxlY3QnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciB2YWx1ZUNvbnRleHRLZXkgPSBSZWFjdERPTVNlbGVjdC52YWx1ZUNvbnRleHRLZXk7XG5cbi8qKlxuICogSW1wbGVtZW50cyBhbiA8b3B0aW9uPiBuYXRpdmUgY29tcG9uZW50IHRoYXQgd2FybnMgd2hlbiBgc2VsZWN0ZWRgIGlzIHNldC5cbiAqL1xudmFyIFJlYWN0RE9NT3B0aW9uID0ge1xuICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIC8vIFRPRE8gKHl1bmdzdGVycyk6IFJlbW92ZSBzdXBwb3J0IGZvciBgc2VsZWN0ZWRgIGluIDxvcHRpb24+LlxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwcm9wcy5zZWxlY3RlZCA9PSBudWxsLCAnVXNlIHRoZSBgZGVmYXVsdFZhbHVlYCBvciBgdmFsdWVgIHByb3BzIG9uIDxzZWxlY3Q+IGluc3RlYWQgb2YgJyArICdzZXR0aW5nIGBzZWxlY3RlZGAgb24gPG9wdGlvbj4uJykgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gTG9vayB1cCB3aGV0aGVyIHRoaXMgb3B0aW9uIGlzICdzZWxlY3RlZCcgdmlhIGNvbnRleHRcbiAgICB2YXIgc2VsZWN0VmFsdWUgPSBjb250ZXh0W3ZhbHVlQ29udGV4dEtleV07XG5cbiAgICAvLyBJZiBjb250ZXh0IGtleSBpcyBudWxsIChlLmcuLCBubyBzcGVjaWZpZWQgdmFsdWUgb3IgYWZ0ZXIgaW5pdGlhbCBtb3VudClcbiAgICAvLyBvciBtaXNzaW5nIChlLmcuLCBmb3IgPGRhdGFsaXN0PiksIHdlIGRvbid0IGNoYW5nZSBwcm9wcy5zZWxlY3RlZFxuICAgIHZhciBzZWxlY3RlZCA9IG51bGw7XG4gICAgaWYgKHNlbGVjdFZhbHVlICE9IG51bGwpIHtcbiAgICAgIHNlbGVjdGVkID0gZmFsc2U7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzZWxlY3RWYWx1ZSkpIHtcbiAgICAgICAgLy8gbXVsdGlwbGVcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICgnJyArIHNlbGVjdFZhbHVlW2ldID09PSAnJyArIHByb3BzLnZhbHVlKSB7XG4gICAgICAgICAgICBzZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdGVkID0gJycgKyBzZWxlY3RWYWx1ZSA9PT0gJycgKyBwcm9wcy52YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7IHNlbGVjdGVkOiBzZWxlY3RlZCB9O1xuICB9LFxuXG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICB2YXIgbmF0aXZlUHJvcHMgPSBhc3NpZ24oeyBzZWxlY3RlZDogdW5kZWZpbmVkLCBjaGlsZHJlbjogdW5kZWZpbmVkIH0sIHByb3BzKTtcblxuICAgIC8vIFJlYWQgc3RhdGUgb25seSBmcm9tIGluaXRpYWwgbW91bnQgYmVjYXVzZSA8c2VsZWN0PiB1cGRhdGVzIHZhbHVlXG4gICAgLy8gbWFudWFsbHk7IHdlIG5lZWQgdGhlIGluaXRpYWwgc3RhdGUgb25seSBmb3Igc2VydmVyIHJlbmRlcmluZ1xuICAgIGlmIChpbnN0Ll93cmFwcGVyU3RhdGUuc2VsZWN0ZWQgIT0gbnVsbCkge1xuICAgICAgbmF0aXZlUHJvcHMuc2VsZWN0ZWQgPSBpbnN0Ll93cmFwcGVyU3RhdGUuc2VsZWN0ZWQ7XG4gICAgfVxuXG4gICAgdmFyIGNvbnRlbnQgPSAnJztcblxuICAgIC8vIEZsYXR0ZW4gY2hpbGRyZW4gYW5kIHdhcm4gaWYgdGhleSBhcmVuJ3Qgc3RyaW5ncyBvciBudW1iZXJzO1xuICAgIC8vIGludmFsaWQgdHlwZXMgYXJlIGlnbm9yZWQuXG4gICAgUmVhY3RDaGlsZHJlbi5mb3JFYWNoKHByb3BzLmNoaWxkcmVuLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIGlmIChjaGlsZCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY2hpbGQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBjaGlsZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29udGVudCArPSBjaGlsZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnT25seSBzdHJpbmdzIGFuZCBudW1iZXJzIGFyZSBzdXBwb3J0ZWQgYXMgPG9wdGlvbj4gY2hpbGRyZW4uJykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoY29udGVudCkge1xuICAgICAgbmF0aXZlUHJvcHMuY2hpbGRyZW4gPSBjb250ZW50O1xuICAgIH1cblxuICAgIHJldHVybiBuYXRpdmVQcm9wcztcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NT3B0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTVNlbGVjdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIExpbmtlZFZhbHVlVXRpbHMgPSByZXF1aXJlKCcuL0xpbmtlZFZhbHVlVXRpbHMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciB2YWx1ZUNvbnRleHRLZXkgPSAnX19SZWFjdERPTVNlbGVjdF92YWx1ZSQnICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7XG5cbmZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnNJZlBlbmRpbmdVcGRhdGVBbmRNb3VudGVkKCkge1xuICBpZiAodGhpcy5fcm9vdE5vZGVJRCAmJiB0aGlzLl93cmFwcGVyU3RhdGUucGVuZGluZ1VwZGF0ZSkge1xuICAgIHRoaXMuX3dyYXBwZXJTdGF0ZS5wZW5kaW5nVXBkYXRlID0gZmFsc2U7XG5cbiAgICB2YXIgcHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcblxuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICB1cGRhdGVPcHRpb25zKHRoaXMsIEJvb2xlYW4ocHJvcHMubXVsdGlwbGUpLCB2YWx1ZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikge1xuICBpZiAob3duZXIpIHtcbiAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG52YXIgdmFsdWVQcm9wTmFtZXMgPSBbJ3ZhbHVlJywgJ2RlZmF1bHRWYWx1ZSddO1xuXG4vKipcbiAqIFZhbGlkYXRpb24gZnVuY3Rpb24gZm9yIGB2YWx1ZWAgYW5kIGBkZWZhdWx0VmFsdWVgLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2hlY2tTZWxlY3RQcm9wVHlwZXMoaW5zdCwgcHJvcHMpIHtcbiAgdmFyIG93bmVyID0gaW5zdC5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuICBMaW5rZWRWYWx1ZVV0aWxzLmNoZWNrUHJvcFR5cGVzKCdzZWxlY3QnLCBwcm9wcywgb3duZXIpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVQcm9wTmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcHJvcE5hbWUgPSB2YWx1ZVByb3BOYW1lc1tpXTtcbiAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09IG51bGwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAocHJvcHMubXVsdGlwbGUpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKEFycmF5LmlzQXJyYXkocHJvcHNbcHJvcE5hbWVdKSwgJ1RoZSBgJXNgIHByb3Agc3VwcGxpZWQgdG8gPHNlbGVjdD4gbXVzdCBiZSBhbiBhcnJheSBpZiAnICsgJ2BtdWx0aXBsZWAgaXMgdHJ1ZS4lcycsIHByb3BOYW1lLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpKSA6IHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIUFycmF5LmlzQXJyYXkocHJvcHNbcHJvcE5hbWVdKSwgJ1RoZSBgJXNgIHByb3Agc3VwcGxpZWQgdG8gPHNlbGVjdD4gbXVzdCBiZSBhIHNjYWxhciAnICsgJ3ZhbHVlIGlmIGBtdWx0aXBsZWAgaXMgZmFsc2UuJXMnLCBwcm9wTmFtZSwgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKG93bmVyKSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWFjdERPTUNvbXBvbmVudH0gaW5zdFxuICogQHBhcmFtIHtib29sZWFufSBtdWx0aXBsZVxuICogQHBhcmFtIHsqfSBwcm9wVmFsdWUgQSBzdHJpbmdhYmxlICh3aXRoIGBtdWx0aXBsZWAsIGEgbGlzdCBvZiBzdHJpbmdhYmxlcykuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB1cGRhdGVPcHRpb25zKGluc3QsIG11bHRpcGxlLCBwcm9wVmFsdWUpIHtcbiAgdmFyIHNlbGVjdGVkVmFsdWUsIGk7XG4gIHZhciBvcHRpb25zID0gUmVhY3RNb3VudC5nZXROb2RlKGluc3QuX3Jvb3ROb2RlSUQpLm9wdGlvbnM7XG5cbiAgaWYgKG11bHRpcGxlKSB7XG4gICAgc2VsZWN0ZWRWYWx1ZSA9IHt9O1xuICAgIGZvciAoaSA9IDA7IGkgPCBwcm9wVmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNlbGVjdGVkVmFsdWVbJycgKyBwcm9wVmFsdWVbaV1dID0gdHJ1ZTtcbiAgICB9XG4gICAgZm9yIChpID0gMDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzZWxlY3RlZCA9IHNlbGVjdGVkVmFsdWUuaGFzT3duUHJvcGVydHkob3B0aW9uc1tpXS52YWx1ZSk7XG4gICAgICBpZiAob3B0aW9uc1tpXS5zZWxlY3RlZCAhPT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgb3B0aW9uc1tpXS5zZWxlY3RlZCA9IHNlbGVjdGVkO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBEbyBub3Qgc2V0IGBzZWxlY3QudmFsdWVgIGFzIGV4YWN0IGJlaGF2aW9yIGlzbid0IGNvbnNpc3RlbnQgYWNyb3NzIGFsbFxuICAgIC8vIGJyb3dzZXJzIGZvciBhbGwgY2FzZXMuXG4gICAgc2VsZWN0ZWRWYWx1ZSA9ICcnICsgcHJvcFZhbHVlO1xuICAgIGZvciAoaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAob3B0aW9uc1tpXS52YWx1ZSA9PT0gc2VsZWN0ZWRWYWx1ZSkge1xuICAgICAgICBvcHRpb25zW2ldLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgIG9wdGlvbnNbMF0uc2VsZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEltcGxlbWVudHMgYSA8c2VsZWN0PiBuYXRpdmUgY29tcG9uZW50IHRoYXQgYWxsb3dzIG9wdGlvbmFsbHkgc2V0dGluZyB0aGVcbiAqIHByb3BzIGB2YWx1ZWAgYW5kIGBkZWZhdWx0VmFsdWVgLiBJZiBgbXVsdGlwbGVgIGlzIGZhbHNlLCB0aGUgcHJvcCBtdXN0IGJlIGFcbiAqIHN0cmluZ2FibGUuIElmIGBtdWx0aXBsZWAgaXMgdHJ1ZSwgdGhlIHByb3AgbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdhYmxlcy5cbiAqXG4gKiBJZiBgdmFsdWVgIGlzIG5vdCBzdXBwbGllZCAob3IgbnVsbC91bmRlZmluZWQpLCB1c2VyIGFjdGlvbnMgdGhhdCBjaGFuZ2UgdGhlXG4gKiBzZWxlY3RlZCBvcHRpb24gd2lsbCB0cmlnZ2VyIHVwZGF0ZXMgdG8gdGhlIHJlbmRlcmVkIG9wdGlvbnMuXG4gKlxuICogSWYgaXQgaXMgc3VwcGxpZWQgKGFuZCBub3QgbnVsbC91bmRlZmluZWQpLCB0aGUgcmVuZGVyZWQgb3B0aW9ucyB3aWxsIG5vdFxuICogdXBkYXRlIGluIHJlc3BvbnNlIHRvIHVzZXIgYWN0aW9ucy4gSW5zdGVhZCwgdGhlIGB2YWx1ZWAgcHJvcCBtdXN0IGNoYW5nZSBpblxuICogb3JkZXIgZm9yIHRoZSByZW5kZXJlZCBvcHRpb25zIHRvIHVwZGF0ZS5cbiAqXG4gKiBJZiBgZGVmYXVsdFZhbHVlYCBpcyBwcm92aWRlZCwgYW55IG9wdGlvbnMgd2l0aCB0aGUgc3VwcGxpZWQgdmFsdWVzIHdpbGwgYmVcbiAqIHNlbGVjdGVkLlxuICovXG52YXIgUmVhY3RET01TZWxlY3QgPSB7XG4gIHZhbHVlQ29udGV4dEtleTogdmFsdWVDb250ZXh0S2V5LFxuXG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gYXNzaWduKHt9LCBwcm9wcywge1xuICAgICAgb25DaGFuZ2U6IGluc3QuX3dyYXBwZXJTdGF0ZS5vbkNoYW5nZSxcbiAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgfSxcblxuICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjaGVja1NlbGVjdFByb3BUeXBlcyhpbnN0LCBwcm9wcyk7XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG4gICAgaW5zdC5fd3JhcHBlclN0YXRlID0ge1xuICAgICAgcGVuZGluZ1VwZGF0ZTogZmFsc2UsXG4gICAgICBpbml0aWFsVmFsdWU6IHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IHByb3BzLmRlZmF1bHRWYWx1ZSxcbiAgICAgIG9uQ2hhbmdlOiBfaGFuZGxlQ2hhbmdlLmJpbmQoaW5zdCksXG4gICAgICB3YXNNdWx0aXBsZTogQm9vbGVhbihwcm9wcy5tdWx0aXBsZSlcbiAgICB9O1xuICB9LFxuXG4gIHByb2Nlc3NDaGlsZENvbnRleHQ6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIC8vIFBhc3MgZG93biBpbml0aWFsIHZhbHVlIHNvIGluaXRpYWwgZ2VuZXJhdGVkIG1hcmt1cCBoYXMgY29ycmVjdFxuICAgIC8vIGBzZWxlY3RlZGAgYXR0cmlidXRlc1xuICAgIHZhciBjaGlsZENvbnRleHQgPSBhc3NpZ24oe30sIGNvbnRleHQpO1xuICAgIGNoaWxkQ29udGV4dFt2YWx1ZUNvbnRleHRLZXldID0gaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZTtcbiAgICByZXR1cm4gY2hpbGRDb250ZXh0O1xuICB9LFxuXG4gIHBvc3RVcGRhdGVXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCkge1xuICAgIHZhciBwcm9wcyA9IGluc3QuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuXG4gICAgLy8gQWZ0ZXIgdGhlIGluaXRpYWwgbW91bnQsIHdlIGNvbnRyb2wgc2VsZWN0ZWQtbmVzcyBtYW51YWxseSBzbyBkb24ndCBwYXNzXG4gICAgLy8gdGhlIGNvbnRleHQgdmFsdWUgZG93blxuICAgIGluc3QuX3dyYXBwZXJTdGF0ZS5pbml0aWFsVmFsdWUgPSB1bmRlZmluZWQ7XG5cbiAgICB2YXIgd2FzTXVsdGlwbGUgPSBpbnN0Ll93cmFwcGVyU3RhdGUud2FzTXVsdGlwbGU7XG4gICAgaW5zdC5fd3JhcHBlclN0YXRlLndhc011bHRpcGxlID0gQm9vbGVhbihwcm9wcy5tdWx0aXBsZSk7XG5cbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLnBlbmRpbmdVcGRhdGUgPSBmYWxzZTtcbiAgICAgIHVwZGF0ZU9wdGlvbnMoaW5zdCwgQm9vbGVhbihwcm9wcy5tdWx0aXBsZSksIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHdhc011bHRpcGxlICE9PSBCb29sZWFuKHByb3BzLm11bHRpcGxlKSkge1xuICAgICAgLy8gRm9yIHNpbXBsaWNpdHksIHJlYXBwbHkgYGRlZmF1bHRWYWx1ZWAgaWYgYG11bHRpcGxlYCBpcyB0b2dnbGVkLlxuICAgICAgaWYgKHByb3BzLmRlZmF1bHRWYWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHVwZGF0ZU9wdGlvbnMoaW5zdCwgQm9vbGVhbihwcm9wcy5tdWx0aXBsZSksIHByb3BzLmRlZmF1bHRWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXZlcnQgdGhlIHNlbGVjdCBiYWNrIHRvIGl0cyBkZWZhdWx0IHVuc2VsZWN0ZWQgc3RhdGUuXG4gICAgICAgIHVwZGF0ZU9wdGlvbnMoaW5zdCwgQm9vbGVhbihwcm9wcy5tdWx0aXBsZSksIHByb3BzLm11bHRpcGxlID8gW10gOiAnJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBfaGFuZGxlQ2hhbmdlKGV2ZW50KSB7XG4gIHZhciBwcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICB2YXIgcmV0dXJuVmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmV4ZWN1dGVPbkNoYW5nZShwcm9wcywgZXZlbnQpO1xuXG4gIHRoaXMuX3dyYXBwZXJTdGF0ZS5wZW5kaW5nVXBkYXRlID0gdHJ1ZTtcbiAgUmVhY3RVcGRhdGVzLmFzYXAodXBkYXRlT3B0aW9uc0lmUGVuZGluZ1VwZGF0ZUFuZE1vdW50ZWQsIHRoaXMpO1xuICByZXR1cm4gcmV0dXJuVmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01TZWxlY3Q7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NU2VsZWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldCA9IHJlcXVpcmUoJy4vZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldCcpO1xudmFyIGdldFRleHRDb250ZW50QWNjZXNzb3IgPSByZXF1aXJlKCcuL2dldFRleHRDb250ZW50QWNjZXNzb3InKTtcblxuLyoqXG4gKiBXaGlsZSBgaXNDb2xsYXBzZWRgIGlzIGF2YWlsYWJsZSBvbiB0aGUgU2VsZWN0aW9uIG9iamVjdCBhbmQgYGNvbGxhcHNlZGBcbiAqIGlzIGF2YWlsYWJsZSBvbiB0aGUgUmFuZ2Ugb2JqZWN0LCBJRTExIHNvbWV0aW1lcyBnZXRzIHRoZW0gd3JvbmcuXG4gKiBJZiB0aGUgYW5jaG9yL2ZvY3VzIG5vZGVzIGFuZCBvZmZzZXRzIGFyZSB0aGUgc2FtZSwgdGhlIHJhbmdlIGlzIGNvbGxhcHNlZC5cbiAqL1xuZnVuY3Rpb24gaXNDb2xsYXBzZWQoYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0LCBmb2N1c05vZGUsIGZvY3VzT2Zmc2V0KSB7XG4gIHJldHVybiBhbmNob3JOb2RlID09PSBmb2N1c05vZGUgJiYgYW5jaG9yT2Zmc2V0ID09PSBmb2N1c09mZnNldDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGFwcHJvcHJpYXRlIGFuY2hvciBhbmQgZm9jdXMgbm9kZS9vZmZzZXQgcGFpcnMgZm9yIElFLlxuICpcbiAqIFRoZSBjYXRjaCBoZXJlIGlzIHRoYXQgSUUncyBzZWxlY3Rpb24gQVBJIGRvZXNuJ3QgcHJvdmlkZSBpbmZvcm1hdGlvblxuICogYWJvdXQgd2hldGhlciB0aGUgc2VsZWN0aW9uIGlzIGZvcndhcmQgb3IgYmFja3dhcmQsIHNvIHdlIGhhdmUgdG9cbiAqIGJlaGF2ZSBhcyB0aG91Z2ggaXQncyBhbHdheXMgZm9yd2FyZC5cbiAqXG4gKiBJRSB0ZXh0IGRpZmZlcnMgZnJvbSBtb2Rlcm4gc2VsZWN0aW9uIGluIHRoYXQgaXQgYmVoYXZlcyBhcyB0aG91Z2hcbiAqIGJsb2NrIGVsZW1lbnRzIGVuZCB3aXRoIGEgbmV3IGxpbmUuIFRoaXMgbWVhbnMgY2hhcmFjdGVyIG9mZnNldHMgd2lsbFxuICogZGlmZmVyIGJldHdlZW4gdGhlIHR3byBBUElzLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRJRU9mZnNldHMobm9kZSkge1xuICB2YXIgc2VsZWN0aW9uID0gZG9jdW1lbnQuc2VsZWN0aW9uO1xuICB2YXIgc2VsZWN0ZWRSYW5nZSA9IHNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICB2YXIgc2VsZWN0ZWRMZW5ndGggPSBzZWxlY3RlZFJhbmdlLnRleHQubGVuZ3RoO1xuXG4gIC8vIER1cGxpY2F0ZSBzZWxlY3Rpb24gc28gd2UgY2FuIG1vdmUgcmFuZ2Ugd2l0aG91dCBicmVha2luZyB1c2VyIHNlbGVjdGlvbi5cbiAgdmFyIGZyb21TdGFydCA9IHNlbGVjdGVkUmFuZ2UuZHVwbGljYXRlKCk7XG4gIGZyb21TdGFydC5tb3ZlVG9FbGVtZW50VGV4dChub2RlKTtcbiAgZnJvbVN0YXJ0LnNldEVuZFBvaW50KCdFbmRUb1N0YXJ0Jywgc2VsZWN0ZWRSYW5nZSk7XG5cbiAgdmFyIHN0YXJ0T2Zmc2V0ID0gZnJvbVN0YXJ0LnRleHQubGVuZ3RoO1xuICB2YXIgZW5kT2Zmc2V0ID0gc3RhcnRPZmZzZXQgKyBzZWxlY3RlZExlbmd0aDtcblxuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBzdGFydE9mZnNldCxcbiAgICBlbmQ6IGVuZE9mZnNldFxuICB9O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7P29iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0TW9kZXJuT2Zmc2V0cyhub2RlKSB7XG4gIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uICYmIHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcblxuICBpZiAoIXNlbGVjdGlvbiB8fCBzZWxlY3Rpb24ucmFuZ2VDb3VudCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGFuY2hvck5vZGUgPSBzZWxlY3Rpb24uYW5jaG9yTm9kZTtcbiAgdmFyIGFuY2hvck9mZnNldCA9IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQ7XG4gIHZhciBmb2N1c05vZGUgPSBzZWxlY3Rpb24uZm9jdXNOb2RlO1xuICB2YXIgZm9jdXNPZmZzZXQgPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQ7XG5cbiAgdmFyIGN1cnJlbnRSYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApO1xuXG4gIC8vIEluIEZpcmVmb3gsIHJhbmdlLnN0YXJ0Q29udGFpbmVyIGFuZCByYW5nZS5lbmRDb250YWluZXIgY2FuIGJlIFwiYW5vbnltb3VzXG4gIC8vIGRpdnNcIiwgZS5nLiB0aGUgdXAvZG93biBidXR0b25zIG9uIGFuIDxpbnB1dCB0eXBlPVwibnVtYmVyXCI+LiBBbm9ueW1vdXNcbiAgLy8gZGl2cyBkbyBub3Qgc2VlbSB0byBleHBvc2UgcHJvcGVydGllcywgdHJpZ2dlcmluZyBhIFwiUGVybWlzc2lvbiBkZW5pZWRcbiAgLy8gZXJyb3JcIiBpZiBhbnkgb2YgaXRzIHByb3BlcnRpZXMgYXJlIGFjY2Vzc2VkLiBUaGUgb25seSBzZWVtaW5nbHkgcG9zc2libGVcbiAgLy8gd2F5IHRvIGF2b2lkIGVycm9yaW5nIGlzIHRvIGFjY2VzcyBhIHByb3BlcnR5IHRoYXQgdHlwaWNhbGx5IHdvcmtzIGZvclxuICAvLyBub24tYW5vbnltb3VzIGRpdnMgYW5kIGNhdGNoIGFueSBlcnJvciB0aGF0IG1heSBvdGhlcndpc2UgYXJpc2UuIFNlZVxuICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0yMDg0MjdcbiAgdHJ5IHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtZXhwcmVzc2lvbnMgKi9cbiAgICBjdXJyZW50UmFuZ2Uuc3RhcnRDb250YWluZXIubm9kZVR5cGU7XG4gICAgY3VycmVudFJhbmdlLmVuZENvbnRhaW5lci5ub2RlVHlwZTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBJZiB0aGUgbm9kZSBhbmQgb2Zmc2V0IHZhbHVlcyBhcmUgdGhlIHNhbWUsIHRoZSBzZWxlY3Rpb24gaXMgY29sbGFwc2VkLlxuICAvLyBgU2VsZWN0aW9uLmlzQ29sbGFwc2VkYCBpcyBhdmFpbGFibGUgbmF0aXZlbHksIGJ1dCBJRSBzb21ldGltZXMgZ2V0c1xuICAvLyB0aGlzIHZhbHVlIHdyb25nLlxuICB2YXIgaXNTZWxlY3Rpb25Db2xsYXBzZWQgPSBpc0NvbGxhcHNlZChzZWxlY3Rpb24uYW5jaG9yTm9kZSwgc2VsZWN0aW9uLmFuY2hvck9mZnNldCwgc2VsZWN0aW9uLmZvY3VzTm9kZSwgc2VsZWN0aW9uLmZvY3VzT2Zmc2V0KTtcblxuICB2YXIgcmFuZ2VMZW5ndGggPSBpc1NlbGVjdGlvbkNvbGxhcHNlZCA/IDAgOiBjdXJyZW50UmFuZ2UudG9TdHJpbmcoKS5sZW5ndGg7XG5cbiAgdmFyIHRlbXBSYW5nZSA9IGN1cnJlbnRSYW5nZS5jbG9uZVJhbmdlKCk7XG4gIHRlbXBSYW5nZS5zZWxlY3ROb2RlQ29udGVudHMobm9kZSk7XG4gIHRlbXBSYW5nZS5zZXRFbmQoY3VycmVudFJhbmdlLnN0YXJ0Q29udGFpbmVyLCBjdXJyZW50UmFuZ2Uuc3RhcnRPZmZzZXQpO1xuXG4gIHZhciBpc1RlbXBSYW5nZUNvbGxhcHNlZCA9IGlzQ29sbGFwc2VkKHRlbXBSYW5nZS5zdGFydENvbnRhaW5lciwgdGVtcFJhbmdlLnN0YXJ0T2Zmc2V0LCB0ZW1wUmFuZ2UuZW5kQ29udGFpbmVyLCB0ZW1wUmFuZ2UuZW5kT2Zmc2V0KTtcblxuICB2YXIgc3RhcnQgPSBpc1RlbXBSYW5nZUNvbGxhcHNlZCA/IDAgOiB0ZW1wUmFuZ2UudG9TdHJpbmcoKS5sZW5ndGg7XG4gIHZhciBlbmQgPSBzdGFydCArIHJhbmdlTGVuZ3RoO1xuXG4gIC8vIERldGVjdCB3aGV0aGVyIHRoZSBzZWxlY3Rpb24gaXMgYmFja3dhcmQuXG4gIHZhciBkZXRlY3Rpb25SYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gIGRldGVjdGlvblJhbmdlLnNldFN0YXJ0KGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCk7XG4gIGRldGVjdGlvblJhbmdlLnNldEVuZChmb2N1c05vZGUsIGZvY3VzT2Zmc2V0KTtcbiAgdmFyIGlzQmFja3dhcmQgPSBkZXRlY3Rpb25SYW5nZS5jb2xsYXBzZWQ7XG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydDogaXNCYWNrd2FyZCA/IGVuZCA6IHN0YXJ0LFxuICAgIGVuZDogaXNCYWNrd2FyZCA/IHN0YXJ0IDogZW5kXG4gIH07XG59XG5cbi8qKlxuICogQHBhcmFtIHtET01FbGVtZW50fERPTVRleHROb2RlfSBub2RlXG4gKiBAcGFyYW0ge29iamVjdH0gb2Zmc2V0c1xuICovXG5mdW5jdGlvbiBzZXRJRU9mZnNldHMobm9kZSwgb2Zmc2V0cykge1xuICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKS5kdXBsaWNhdGUoKTtcbiAgdmFyIHN0YXJ0LCBlbmQ7XG5cbiAgaWYgKHR5cGVvZiBvZmZzZXRzLmVuZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBzdGFydCA9IG9mZnNldHMuc3RhcnQ7XG4gICAgZW5kID0gc3RhcnQ7XG4gIH0gZWxzZSBpZiAob2Zmc2V0cy5zdGFydCA+IG9mZnNldHMuZW5kKSB7XG4gICAgc3RhcnQgPSBvZmZzZXRzLmVuZDtcbiAgICBlbmQgPSBvZmZzZXRzLnN0YXJ0O1xuICB9IGVsc2Uge1xuICAgIHN0YXJ0ID0gb2Zmc2V0cy5zdGFydDtcbiAgICBlbmQgPSBvZmZzZXRzLmVuZDtcbiAgfVxuXG4gIHJhbmdlLm1vdmVUb0VsZW1lbnRUZXh0KG5vZGUpO1xuICByYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHN0YXJ0KTtcbiAgcmFuZ2Uuc2V0RW5kUG9pbnQoJ0VuZFRvU3RhcnQnLCByYW5nZSk7XG4gIHJhbmdlLm1vdmVFbmQoJ2NoYXJhY3RlcicsIGVuZCAtIHN0YXJ0KTtcbiAgcmFuZ2Uuc2VsZWN0KCk7XG59XG5cbi8qKlxuICogSW4gbW9kZXJuIG5vbi1JRSBicm93c2Vycywgd2UgY2FuIHN1cHBvcnQgYm90aCBmb3J3YXJkIGFuZCBiYWNrd2FyZFxuICogc2VsZWN0aW9ucy5cbiAqXG4gKiBOb3RlOiBJRTEwKyBzdXBwb3J0cyB0aGUgU2VsZWN0aW9uIG9iamVjdCwgYnV0IGl0IGRvZXMgbm90IHN1cHBvcnRcbiAqIHRoZSBgZXh0ZW5kYCBtZXRob2QsIHdoaWNoIG1lYW5zIHRoYXQgZXZlbiBpbiBtb2Rlcm4gSUUsIGl0J3Mgbm90IHBvc3NpYmxlXG4gKiB0byBwcm9ncmFtYXRpY2FsbHkgY3JlYXRlIGEgYmFja3dhcmQgc2VsZWN0aW9uLiBUaHVzLCBmb3IgYWxsIElFXG4gKiB2ZXJzaW9ucywgd2UgdXNlIHRoZSBvbGQgSUUgQVBJIHRvIGNyZWF0ZSBvdXIgc2VsZWN0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBvZmZzZXRzXG4gKi9cbmZ1bmN0aW9uIHNldE1vZGVybk9mZnNldHMobm9kZSwgb2Zmc2V0cykge1xuICBpZiAoIXdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICB2YXIgbGVuZ3RoID0gbm9kZVtnZXRUZXh0Q29udGVudEFjY2Vzc29yKCldLmxlbmd0aDtcbiAgdmFyIHN0YXJ0ID0gTWF0aC5taW4ob2Zmc2V0cy5zdGFydCwgbGVuZ3RoKTtcbiAgdmFyIGVuZCA9IHR5cGVvZiBvZmZzZXRzLmVuZCA9PT0gJ3VuZGVmaW5lZCcgPyBzdGFydCA6IE1hdGgubWluKG9mZnNldHMuZW5kLCBsZW5ndGgpO1xuXG4gIC8vIElFIDExIHVzZXMgbW9kZXJuIHNlbGVjdGlvbiwgYnV0IGRvZXNuJ3Qgc3VwcG9ydCB0aGUgZXh0ZW5kIG1ldGhvZC5cbiAgLy8gRmxpcCBiYWNrd2FyZCBzZWxlY3Rpb25zLCBzbyB3ZSBjYW4gc2V0IHdpdGggYSBzaW5nbGUgcmFuZ2UuXG4gIGlmICghc2VsZWN0aW9uLmV4dGVuZCAmJiBzdGFydCA+IGVuZCkge1xuICAgIHZhciB0ZW1wID0gZW5kO1xuICAgIGVuZCA9IHN0YXJ0O1xuICAgIHN0YXJ0ID0gdGVtcDtcbiAgfVxuXG4gIHZhciBzdGFydE1hcmtlciA9IGdldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXQobm9kZSwgc3RhcnQpO1xuICB2YXIgZW5kTWFya2VyID0gZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldChub2RlLCBlbmQpO1xuXG4gIGlmIChzdGFydE1hcmtlciAmJiBlbmRNYXJrZXIpIHtcbiAgICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIHJhbmdlLnNldFN0YXJ0KHN0YXJ0TWFya2VyLm5vZGUsIHN0YXJ0TWFya2VyLm9mZnNldCk7XG4gICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO1xuXG4gICAgaWYgKHN0YXJ0ID4gZW5kKSB7XG4gICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xuICAgICAgc2VsZWN0aW9uLmV4dGVuZChlbmRNYXJrZXIubm9kZSwgZW5kTWFya2VyLm9mZnNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJhbmdlLnNldEVuZChlbmRNYXJrZXIubm9kZSwgZW5kTWFya2VyLm9mZnNldCk7XG4gICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgdXNlSUVPZmZzZXRzID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmICdzZWxlY3Rpb24nIGluIGRvY3VtZW50ICYmICEoJ2dldFNlbGVjdGlvbicgaW4gd2luZG93KTtcblxudmFyIFJlYWN0RE9NU2VsZWN0aW9uID0ge1xuICAvKipcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gICAqL1xuICBnZXRPZmZzZXRzOiB1c2VJRU9mZnNldHMgPyBnZXRJRU9mZnNldHMgOiBnZXRNb2Rlcm5PZmZzZXRzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9IG5vZGVcbiAgICogQHBhcmFtIHtvYmplY3R9IG9mZnNldHNcbiAgICovXG4gIHNldE9mZnNldHM6IHVzZUlFT2Zmc2V0cyA/IHNldElFT2Zmc2V0cyA6IHNldE1vZGVybk9mZnNldHNcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01TZWxlY3Rpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NU2VydmVyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3REZWZhdWx0SW5qZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRJbmplY3Rpb24nKTtcbnZhciBSZWFjdFNlcnZlclJlbmRlcmluZyA9IHJlcXVpcmUoJy4vUmVhY3RTZXJ2ZXJSZW5kZXJpbmcnKTtcbnZhciBSZWFjdFZlcnNpb24gPSByZXF1aXJlKCcuL1JlYWN0VmVyc2lvbicpO1xuXG5SZWFjdERlZmF1bHRJbmplY3Rpb24uaW5qZWN0KCk7XG5cbnZhciBSZWFjdERPTVNlcnZlciA9IHtcbiAgcmVuZGVyVG9TdHJpbmc6IFJlYWN0U2VydmVyUmVuZGVyaW5nLnJlbmRlclRvU3RyaW5nLFxuICByZW5kZXJUb1N0YXRpY01hcmt1cDogUmVhY3RTZXJ2ZXJSZW5kZXJpbmcucmVuZGVyVG9TdGF0aWNNYXJrdXAsXG4gIHZlcnNpb246IFJlYWN0VmVyc2lvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTVNlcnZlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01UZXh0Q29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTUNoaWxkcmVuT3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vRE9NQ2hpbGRyZW5PcGVyYXRpb25zJyk7XG52YXIgRE9NUHJvcGVydHlPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eU9wZXJhdGlvbnMnKTtcbnZhciBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIgPSByZXF1aXJlKCcuL2VzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlcicpO1xudmFyIHNldFRleHRDb250ZW50ID0gcmVxdWlyZSgnLi9zZXRUZXh0Q29udGVudCcpO1xudmFyIHZhbGlkYXRlRE9NTmVzdGluZyA9IHJlcXVpcmUoJy4vdmFsaWRhdGVET01OZXN0aW5nJyk7XG5cbi8qKlxuICogVGV4dCBub2RlcyB2aW9sYXRlIGEgY291cGxlIGFzc3VtcHRpb25zIHRoYXQgUmVhY3QgbWFrZXMgYWJvdXQgY29tcG9uZW50czpcbiAqXG4gKiAgLSBXaGVuIG1vdW50aW5nIHRleHQgaW50byB0aGUgRE9NLCBhZGphY2VudCB0ZXh0IG5vZGVzIGFyZSBtZXJnZWQuXG4gKiAgLSBUZXh0IG5vZGVzIGNhbm5vdCBiZSBhc3NpZ25lZCBhIFJlYWN0IHJvb3QgSUQuXG4gKlxuICogVGhpcyBjb21wb25lbnQgaXMgdXNlZCB0byB3cmFwIHN0cmluZ3MgaW4gZWxlbWVudHMgc28gdGhhdCB0aGV5IGNhbiB1bmRlcmdvXG4gKiB0aGUgc2FtZSByZWNvbmNpbGlhdGlvbiB0aGF0IGlzIGFwcGxpZWQgdG8gZWxlbWVudHMuXG4gKlxuICogVE9ETzogSW52ZXN0aWdhdGUgcmVwcmVzZW50aW5nIFJlYWN0IGNvbXBvbmVudHMgaW4gdGhlIERPTSB3aXRoIHRleHQgbm9kZXMuXG4gKlxuICogQGNsYXNzIFJlYWN0RE9NVGV4dENvbXBvbmVudFxuICogQGV4dGVuZHMgUmVhY3RDb21wb25lbnRcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RET01UZXh0Q29tcG9uZW50ID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gIC8vIFRoaXMgY29uc3RydWN0b3IgYW5kIGl0cyBhcmd1bWVudCBpcyBjdXJyZW50bHkgdXNlZCBieSBtb2Nrcy5cbn07XG5cbmFzc2lnbihSZWFjdERPTVRleHRDb21wb25lbnQucHJvdG90eXBlLCB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UmVhY3RUZXh0fSB0ZXh0XG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgY29uc3RydWN0OiBmdW5jdGlvbiAodGV4dCkge1xuICAgIC8vIFRPRE86IFRoaXMgaXMgcmVhbGx5IGEgUmVhY3RUZXh0IChSZWFjdE5vZGUpLCBub3QgYSBSZWFjdEVsZW1lbnRcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IHRleHQ7XG4gICAgdGhpcy5fc3RyaW5nVGV4dCA9ICcnICsgdGV4dDtcblxuICAgIC8vIFByb3BlcnRpZXNcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgICB0aGlzLl9tb3VudEluZGV4ID0gMDtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUgbWFya3VwIGZvciB0aGlzIHRleHQgbm9kZS4gVGhpcyBub2RlIGlzIG5vdCBpbnRlbmRlZCB0byBoYXZlXG4gICAqIGFueSBmZWF0dXJlcyBiZXNpZGVzIGNvbnRhaW5pbmcgdGV4dCBjb250ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgZm9yIHRoaXMgdGV4dCBub2RlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pIHtcbiAgICAgICAgdmFsaWRhdGVET01OZXN0aW5nKCdzcGFuJywgbnVsbCwgY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSByb290SUQ7XG4gICAgaWYgKHRyYW5zYWN0aW9uLnVzZUNyZWF0ZUVsZW1lbnQpIHtcbiAgICAgIHZhciBvd25lckRvY3VtZW50ID0gY29udGV4dFtSZWFjdE1vdW50Lm93bmVyRG9jdW1lbnRDb250ZXh0S2V5XTtcbiAgICAgIHZhciBlbCA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLnNldEF0dHJpYnV0ZUZvcklEKGVsLCByb290SUQpO1xuICAgICAgLy8gUG9wdWxhdGUgbm9kZSBjYWNoZVxuICAgICAgUmVhY3RNb3VudC5nZXRJRChlbCk7XG4gICAgICBzZXRUZXh0Q29udGVudChlbCwgdGhpcy5fc3RyaW5nVGV4dCk7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBlc2NhcGVkVGV4dCA9IGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3Nlcih0aGlzLl9zdHJpbmdUZXh0KTtcblxuICAgICAgaWYgKHRyYW5zYWN0aW9uLnJlbmRlclRvU3RhdGljTWFya3VwKSB7XG4gICAgICAgIC8vIE5vcm1hbGx5IHdlJ2Qgd3JhcCB0aGlzIGluIGEgYHNwYW5gIGZvciB0aGUgcmVhc29ucyBzdGF0ZWQgYWJvdmUsIGJ1dFxuICAgICAgICAvLyBzaW5jZSB0aGlzIGlzIGEgc2l0dWF0aW9uIHdoZXJlIFJlYWN0IHdvbid0IHRha2Ugb3ZlciAoc3RhdGljIHBhZ2VzKSxcbiAgICAgICAgLy8gd2UgY2FuIHNpbXBseSByZXR1cm4gdGhlIHRleHQgYXMgaXQgaXMuXG4gICAgICAgIHJldHVybiBlc2NhcGVkVGV4dDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICc8c3BhbiAnICsgRE9NUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvcklEKHJvb3RJRCkgKyAnPicgKyBlc2NhcGVkVGV4dCArICc8L3NwYW4+JztcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhpcyBjb21wb25lbnQgYnkgdXBkYXRpbmcgdGhlIHRleHQgY29udGVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdFRleHR9IG5leHRUZXh0IFRoZSBuZXh0IHRleHQgY29udGVudFxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKG5leHRUZXh0LCB0cmFuc2FjdGlvbikge1xuICAgIGlmIChuZXh0VGV4dCAhPT0gdGhpcy5fY3VycmVudEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbmV4dFRleHQ7XG4gICAgICB2YXIgbmV4dFN0cmluZ1RleHQgPSAnJyArIG5leHRUZXh0O1xuICAgICAgaWYgKG5leHRTdHJpbmdUZXh0ICE9PSB0aGlzLl9zdHJpbmdUZXh0KSB7XG4gICAgICAgIC8vIFRPRE86IFNhdmUgdGhpcyBhcyBwZW5kaW5nIHByb3BzIGFuZCB1c2UgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5XG4gICAgICAgIC8vIGFuZC9vciB1cGRhdGVDb21wb25lbnQgdG8gZG8gdGhlIGFjdHVhbCB1cGRhdGUgZm9yIGNvbnNpc3RlbmN5IHdpdGhcbiAgICAgICAgLy8gb3RoZXIgY29tcG9uZW50IHR5cGVzP1xuICAgICAgICB0aGlzLl9zdHJpbmdUZXh0ID0gbmV4dFN0cmluZ1RleHQ7XG4gICAgICAgIHZhciBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgICAgICBET01DaGlsZHJlbk9wZXJhdGlvbnMudXBkYXRlVGV4dENvbnRlbnQobm9kZSwgbmV4dFN0cmluZ1RleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB1bm1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQudW5tb3VudElERnJvbUVudmlyb25tZW50KHRoaXMuX3Jvb3ROb2RlSUQpO1xuICB9XG5cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NVGV4dENvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01UZXh0YXJlYVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIExpbmtlZFZhbHVlVXRpbHMgPSByZXF1aXJlKCcuL0xpbmtlZFZhbHVlVXRpbHMnKTtcbnZhciBSZWFjdERPTUlET3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RET01JRE9wZXJhdGlvbnMnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuZnVuY3Rpb24gZm9yY2VVcGRhdGVJZk1vdW50ZWQoKSB7XG4gIGlmICh0aGlzLl9yb290Tm9kZUlEKSB7XG4gICAgLy8gRE9NIGNvbXBvbmVudCBpcyBzdGlsbCBtb3VudGVkOyB1cGRhdGVcbiAgICBSZWFjdERPTVRleHRhcmVhLnVwZGF0ZVdyYXBwZXIodGhpcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGEgPHRleHRhcmVhPiBuYXRpdmUgY29tcG9uZW50IHRoYXQgYWxsb3dzIHNldHRpbmcgYHZhbHVlYCwgYW5kXG4gKiBgZGVmYXVsdFZhbHVlYC4gVGhpcyBkaWZmZXJzIGZyb20gdGhlIHRyYWRpdGlvbmFsIERPTSBBUEkgYmVjYXVzZSB2YWx1ZSBpc1xuICogdXN1YWxseSBzZXQgYXMgUENEQVRBIGNoaWxkcmVuLlxuICpcbiAqIElmIGB2YWx1ZWAgaXMgbm90IHN1cHBsaWVkIChvciBudWxsL3VuZGVmaW5lZCksIHVzZXIgYWN0aW9ucyB0aGF0IGFmZmVjdCB0aGVcbiAqIHZhbHVlIHdpbGwgdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LlxuICpcbiAqIElmIGB2YWx1ZWAgaXMgc3VwcGxpZWQgKGFuZCBub3QgbnVsbC91bmRlZmluZWQpLCB0aGUgcmVuZGVyZWQgZWxlbWVudCB3aWxsXG4gKiBub3QgdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LiBJbnN0ZWFkLCB0aGUgYHZhbHVlYCBwcm9wIG11c3QgY2hhbmdlIGluXG4gKiBvcmRlciBmb3IgdGhlIHJlbmRlcmVkIGVsZW1lbnQgdG8gYmUgdXBkYXRlZC5cbiAqXG4gKiBUaGUgcmVuZGVyZWQgZWxlbWVudCB3aWxsIGJlIGluaXRpYWxpemVkIHdpdGggYW4gZW1wdHkgdmFsdWUsIHRoZSBwcm9wXG4gKiBgZGVmYXVsdFZhbHVlYCBpZiBzcGVjaWZpZWQsIG9yIHRoZSBjaGlsZHJlbiBjb250ZW50IChkZXByZWNhdGVkKS5cbiAqL1xudmFyIFJlYWN0RE9NVGV4dGFyZWEgPSB7XG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICAhKHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2BkYW5nZXJvdXNseVNldElubmVySFRNTGAgZG9lcyBub3QgbWFrZSBzZW5zZSBvbiA8dGV4dGFyZWE+LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIEFsd2F5cyBzZXQgY2hpbGRyZW4gdG8gdGhlIHNhbWUgdGhpbmcuIEluIElFOSwgdGhlIHNlbGVjdGlvbiByYW5nZSB3aWxsXG4gICAgLy8gZ2V0IHJlc2V0IGlmIGB0ZXh0Q29udGVudGAgaXMgbXV0YXRlZC5cbiAgICB2YXIgbmF0aXZlUHJvcHMgPSBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICBkZWZhdWx0VmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICBjaGlsZHJlbjogaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSxcbiAgICAgIG9uQ2hhbmdlOiBpbnN0Ll93cmFwcGVyU3RhdGUub25DaGFuZ2VcbiAgICB9KTtcblxuICAgIHJldHVybiBuYXRpdmVQcm9wcztcbiAgfSxcblxuICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBMaW5rZWRWYWx1ZVV0aWxzLmNoZWNrUHJvcFR5cGVzKCd0ZXh0YXJlYScsIHByb3BzLCBpbnN0Ll9jdXJyZW50RWxlbWVudC5fb3duZXIpO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0VmFsdWUgPSBwcm9wcy5kZWZhdWx0VmFsdWU7XG4gICAgLy8gVE9ETyAoeXVuZ3N0ZXJzKTogUmVtb3ZlIHN1cHBvcnQgZm9yIGNoaWxkcmVuIGNvbnRlbnQgaW4gPHRleHRhcmVhPi5cbiAgICB2YXIgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbjtcbiAgICBpZiAoY2hpbGRyZW4gIT0gbnVsbCkge1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdVc2UgdGhlIGBkZWZhdWx0VmFsdWVgIG9yIGB2YWx1ZWAgcHJvcHMgaW5zdGVhZCBvZiBzZXR0aW5nICcgKyAnY2hpbGRyZW4gb24gPHRleHRhcmVhPi4nKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgICEoZGVmYXVsdFZhbHVlID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0lmIHlvdSBzdXBwbHkgYGRlZmF1bHRWYWx1ZWAgb24gYSA8dGV4dGFyZWE+LCBkbyBub3QgcGFzcyBjaGlsZHJlbi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICAgICAgIShjaGlsZHJlbi5sZW5ndGggPD0gMSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnPHRleHRhcmVhPiBjYW4gb25seSBoYXZlIGF0IG1vc3Qgb25lIGNoaWxkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgY2hpbGRyZW4gPSBjaGlsZHJlblswXTtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdFZhbHVlID0gJycgKyBjaGlsZHJlbjtcbiAgICB9XG4gICAgaWYgKGRlZmF1bHRWYWx1ZSA9PSBudWxsKSB7XG4gICAgICBkZWZhdWx0VmFsdWUgPSAnJztcbiAgICB9XG4gICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG5cbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7XG4gICAgICAvLyBXZSBzYXZlIHRoZSBpbml0aWFsIHZhbHVlIHNvIHRoYXQgYFJlYWN0RE9NQ29tcG9uZW50YCBkb2Vzbid0IHVwZGF0ZVxuICAgICAgLy8gYHRleHRDb250ZW50YCAodW5uZWNlc3Nhcnkgc2luY2Ugd2UgdXBkYXRlIHZhbHVlKS5cbiAgICAgIC8vIFRoZSBpbml0aWFsIHZhbHVlIGNhbiBiZSBhIGJvb2xlYW4gb3Igb2JqZWN0IHNvIHRoYXQncyB3aHkgaXQnc1xuICAgICAgLy8gZm9yY2VkIHRvIGJlIGEgc3RyaW5nLlxuICAgICAgaW5pdGlhbFZhbHVlOiAnJyArICh2YWx1ZSAhPSBudWxsID8gdmFsdWUgOiBkZWZhdWx0VmFsdWUpLFxuICAgICAgb25DaGFuZ2U6IF9oYW5kbGVDaGFuZ2UuYmluZChpbnN0KVxuICAgIH07XG4gIH0sXG5cbiAgdXBkYXRlV3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcbiAgICB2YXIgcHJvcHMgPSBpbnN0Ll9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgLy8gQ2FzdCBgdmFsdWVgIHRvIGEgc3RyaW5nIHRvIGVuc3VyZSB0aGUgdmFsdWUgaXMgc2V0IGNvcnJlY3RseS4gV2hpbGVcbiAgICAgIC8vIGJyb3dzZXJzIHR5cGljYWxseSBkbyB0aGlzIGFzIG5lY2Vzc2FyeSwganNkb20gZG9lc24ndC5cbiAgICAgIFJlYWN0RE9NSURPcGVyYXRpb25zLnVwZGF0ZVByb3BlcnR5QnlJRChpbnN0Ll9yb290Tm9kZUlELCAndmFsdWUnLCAnJyArIHZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9oYW5kbGVDaGFuZ2UoZXZlbnQpIHtcbiAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG4gIHZhciByZXR1cm5WYWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZXhlY3V0ZU9uQ2hhbmdlKHByb3BzLCBldmVudCk7XG4gIFJlYWN0VXBkYXRlcy5hc2FwKGZvcmNlVXBkYXRlSWZNb3VudGVkLCB0aGlzKTtcbiAgcmV0dXJuIHJldHVyblZhbHVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NVGV4dGFyZWE7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3lcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xudmFyIFRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9UcmFuc2FjdGlvbicpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcblxudmFyIFJFU0VUX0JBVENIRURfVVBEQVRFUyA9IHtcbiAgaW5pdGlhbGl6ZTogZW1wdHlGdW5jdGlvbixcbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzID0gZmFsc2U7XG4gIH1cbn07XG5cbnZhciBGTFVTSF9CQVRDSEVEX1VQREFURVMgPSB7XG4gIGluaXRpYWxpemU6IGVtcHR5RnVuY3Rpb24sXG4gIGNsb3NlOiBSZWFjdFVwZGF0ZXMuZmx1c2hCYXRjaGVkVXBkYXRlcy5iaW5kKFJlYWN0VXBkYXRlcylcbn07XG5cbnZhciBUUkFOU0FDVElPTl9XUkFQUEVSUyA9IFtGTFVTSF9CQVRDSEVEX1VQREFURVMsIFJFU0VUX0JBVENIRURfVVBEQVRFU107XG5cbmZ1bmN0aW9uIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3lUcmFuc2FjdGlvbigpIHtcbiAgdGhpcy5yZWluaXRpYWxpemVUcmFuc2FjdGlvbigpO1xufVxuXG5hc3NpZ24oUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneVRyYW5zYWN0aW9uLnByb3RvdHlwZSwgVHJhbnNhY3Rpb24uTWl4aW4sIHtcbiAgZ2V0VHJhbnNhY3Rpb25XcmFwcGVyczogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBUUkFOU0FDVElPTl9XUkFQUEVSUztcbiAgfVxufSk7XG5cbnZhciB0cmFuc2FjdGlvbiA9IG5ldyBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5VHJhbnNhY3Rpb24oKTtcblxudmFyIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kgPSB7XG4gIGlzQmF0Y2hpbmdVcGRhdGVzOiBmYWxzZSxcblxuICAvKipcbiAgICogQ2FsbCB0aGUgcHJvdmlkZWQgZnVuY3Rpb24gaW4gYSBjb250ZXh0IHdpdGhpbiB3aGljaCBjYWxscyB0byBgc2V0U3RhdGVgXG4gICAqIGFuZCBmcmllbmRzIGFyZSBiYXRjaGVkIHN1Y2ggdGhhdCBjb21wb25lbnRzIGFyZW4ndCB1cGRhdGVkIHVubmVjZXNzYXJpbHkuXG4gICAqL1xuICBiYXRjaGVkVXBkYXRlczogZnVuY3Rpb24gKGNhbGxiYWNrLCBhLCBiLCBjLCBkLCBlKSB7XG4gICAgdmFyIGFscmVhZHlCYXRjaGluZ1VwZGF0ZXMgPSBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzO1xuXG4gICAgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcyA9IHRydWU7XG5cbiAgICAvLyBUaGUgY29kZSBpcyB3cml0dGVuIHRoaXMgd2F5IHRvIGF2b2lkIGV4dHJhIGFsbG9jYXRpb25zXG4gICAgaWYgKGFscmVhZHlCYXRjaGluZ1VwZGF0ZXMpIHtcbiAgICAgIGNhbGxiYWNrKGEsIGIsIGMsIGQsIGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmFuc2FjdGlvbi5wZXJmb3JtKGNhbGxiYWNrLCBudWxsLCBhLCBiLCBjLCBkLCBlKTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3REZWZhdWx0SW5qZWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQmVmb3JlSW5wdXRFdmVudFBsdWdpbiA9IHJlcXVpcmUoJy4vQmVmb3JlSW5wdXRFdmVudFBsdWdpbicpO1xudmFyIENoYW5nZUV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9DaGFuZ2VFdmVudFBsdWdpbicpO1xudmFyIENsaWVudFJlYWN0Um9vdEluZGV4ID0gcmVxdWlyZSgnLi9DbGllbnRSZWFjdFJvb3RJbmRleCcpO1xudmFyIERlZmF1bHRFdmVudFBsdWdpbk9yZGVyID0gcmVxdWlyZSgnLi9EZWZhdWx0RXZlbnRQbHVnaW5PcmRlcicpO1xudmFyIEVudGVyTGVhdmVFdmVudFBsdWdpbiA9IHJlcXVpcmUoJy4vRW50ZXJMZWF2ZUV2ZW50UGx1Z2luJyk7XG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xudmFyIEhUTUxET01Qcm9wZXJ0eUNvbmZpZyA9IHJlcXVpcmUoJy4vSFRNTERPTVByb3BlcnR5Q29uZmlnJyk7XG52YXIgUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4gPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckNvbXBvbmVudE1peGluJyk7XG52YXIgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50Jyk7XG52YXIgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSA9IHJlcXVpcmUoJy4vUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneScpO1xudmFyIFJlYWN0RE9NQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdERPTUNvbXBvbmVudCcpO1xudmFyIFJlYWN0RE9NVGV4dENvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RET01UZXh0Q29tcG9uZW50Jyk7XG52YXIgUmVhY3RFdmVudExpc3RlbmVyID0gcmVxdWlyZSgnLi9SZWFjdEV2ZW50TGlzdGVuZXInKTtcbnZhciBSZWFjdEluamVjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RJbmplY3Rpb24nKTtcbnZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZUhhbmRsZXMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbicpO1xudmFyIFNlbGVjdEV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9TZWxlY3RFdmVudFBsdWdpbicpO1xudmFyIFNlcnZlclJlYWN0Um9vdEluZGV4ID0gcmVxdWlyZSgnLi9TZXJ2ZXJSZWFjdFJvb3RJbmRleCcpO1xudmFyIFNpbXBsZUV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9TaW1wbGVFdmVudFBsdWdpbicpO1xudmFyIFNWR0RPTVByb3BlcnR5Q29uZmlnID0gcmVxdWlyZSgnLi9TVkdET01Qcm9wZXJ0eUNvbmZpZycpO1xuXG52YXIgYWxyZWFkeUluamVjdGVkID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGluamVjdCgpIHtcbiAgaWYgKGFscmVhZHlJbmplY3RlZCkge1xuICAgIC8vIFRPRE86IFRoaXMgaXMgY3VycmVudGx5IHRydWUgYmVjYXVzZSB0aGVzZSBpbmplY3Rpb25zIGFyZSBzaGFyZWQgYmV0d2VlblxuICAgIC8vIHRoZSBjbGllbnQgYW5kIHRoZSBzZXJ2ZXIgcGFja2FnZS4gVGhleSBzaG91bGQgYmUgYnVpbHQgaW5kZXBlbmRlbnRseVxuICAgIC8vIGFuZCBub3Qgc2hhcmUgYW55IGluamVjdGlvbiBzdGF0ZS4gVGhlbiB0aGlzIHByb2JsZW0gd2lsbCBiZSBzb2x2ZWQuXG4gICAgcmV0dXJuO1xuICB9XG4gIGFscmVhZHlJbmplY3RlZCA9IHRydWU7XG5cbiAgUmVhY3RJbmplY3Rpb24uRXZlbnRFbWl0dGVyLmluamVjdFJlYWN0RXZlbnRMaXN0ZW5lcihSZWFjdEV2ZW50TGlzdGVuZXIpO1xuXG4gIC8qKlxuICAgKiBJbmplY3QgbW9kdWxlcyBmb3IgcmVzb2x2aW5nIERPTSBoaWVyYXJjaHkgYW5kIHBsdWdpbiBvcmRlcmluZy5cbiAgICovXG4gIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdEV2ZW50UGx1Z2luT3JkZXIoRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIpO1xuICBSZWFjdEluamVjdGlvbi5FdmVudFBsdWdpbkh1Yi5pbmplY3RJbnN0YW5jZUhhbmRsZShSZWFjdEluc3RhbmNlSGFuZGxlcyk7XG4gIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdE1vdW50KFJlYWN0TW91bnQpO1xuXG4gIC8qKlxuICAgKiBTb21lIGltcG9ydGFudCBldmVudCBwbHVnaW5zIGluY2x1ZGVkIGJ5IGRlZmF1bHQgKHdpdGhvdXQgaGF2aW5nIHRvIHJlcXVpcmVcbiAgICogdGhlbSkuXG4gICAqL1xuICBSZWFjdEluamVjdGlvbi5FdmVudFBsdWdpbkh1Yi5pbmplY3RFdmVudFBsdWdpbnNCeU5hbWUoe1xuICAgIFNpbXBsZUV2ZW50UGx1Z2luOiBTaW1wbGVFdmVudFBsdWdpbixcbiAgICBFbnRlckxlYXZlRXZlbnRQbHVnaW46IEVudGVyTGVhdmVFdmVudFBsdWdpbixcbiAgICBDaGFuZ2VFdmVudFBsdWdpbjogQ2hhbmdlRXZlbnRQbHVnaW4sXG4gICAgU2VsZWN0RXZlbnRQbHVnaW46IFNlbGVjdEV2ZW50UGx1Z2luLFxuICAgIEJlZm9yZUlucHV0RXZlbnRQbHVnaW46IEJlZm9yZUlucHV0RXZlbnRQbHVnaW5cbiAgfSk7XG5cbiAgUmVhY3RJbmplY3Rpb24uTmF0aXZlQ29tcG9uZW50LmluamVjdEdlbmVyaWNDb21wb25lbnRDbGFzcyhSZWFjdERPTUNvbXBvbmVudCk7XG5cbiAgUmVhY3RJbmplY3Rpb24uTmF0aXZlQ29tcG9uZW50LmluamVjdFRleHRDb21wb25lbnRDbGFzcyhSZWFjdERPTVRleHRDb21wb25lbnQpO1xuXG4gIFJlYWN0SW5qZWN0aW9uLkNsYXNzLmluamVjdE1peGluKFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluKTtcblxuICBSZWFjdEluamVjdGlvbi5ET01Qcm9wZXJ0eS5pbmplY3RET01Qcm9wZXJ0eUNvbmZpZyhIVE1MRE9NUHJvcGVydHlDb25maWcpO1xuICBSZWFjdEluamVjdGlvbi5ET01Qcm9wZXJ0eS5pbmplY3RET01Qcm9wZXJ0eUNvbmZpZyhTVkdET01Qcm9wZXJ0eUNvbmZpZyk7XG5cbiAgUmVhY3RJbmplY3Rpb24uRW1wdHlDb21wb25lbnQuaW5qZWN0RW1wdHlDb21wb25lbnQoJ25vc2NyaXB0Jyk7XG5cbiAgUmVhY3RJbmplY3Rpb24uVXBkYXRlcy5pbmplY3RSZWNvbmNpbGVUcmFuc2FjdGlvbihSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uKTtcbiAgUmVhY3RJbmplY3Rpb24uVXBkYXRlcy5pbmplY3RCYXRjaGluZ1N0cmF0ZWd5KFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kpO1xuXG4gIFJlYWN0SW5qZWN0aW9uLlJvb3RJbmRleC5pbmplY3RDcmVhdGVSZWFjdFJvb3RJbmRleChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBDbGllbnRSZWFjdFJvb3RJbmRleC5jcmVhdGVSZWFjdFJvb3RJbmRleCA6IFNlcnZlclJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4KTtcblxuICBSZWFjdEluamVjdGlvbi5Db21wb25lbnQuaW5qZWN0RW52aXJvbm1lbnQoUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQpO1xuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFyIHVybCA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiB3aW5kb3cubG9jYXRpb24uaHJlZiB8fCAnJztcbiAgICBpZiAoL1s/Jl1yZWFjdF9wZXJmXFxiLy50ZXN0KHVybCkpIHtcbiAgICAgIHZhciBSZWFjdERlZmF1bHRQZXJmID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRQZXJmJyk7XG4gICAgICBSZWFjdERlZmF1bHRQZXJmLnN0YXJ0KCk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpbmplY3Q6IGluamVjdFxufTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFbGVtZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vY2FuRGVmaW5lUHJvcGVydHknKTtcblxuLy8gVGhlIFN5bWJvbCB1c2VkIHRvIHRhZyB0aGUgUmVhY3RFbGVtZW50IHR5cGUuIElmIHRoZXJlIGlzIG5vIG5hdGl2ZSBTeW1ib2xcbi8vIG5vciBwb2x5ZmlsbCwgdGhlbiBhIHBsYWluIG51bWJlciBpcyB1c2VkIGZvciBwZXJmb3JtYW5jZS5cbnZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbFsnZm9yJ10gJiYgU3ltYm9sWydmb3InXSgncmVhY3QuZWxlbWVudCcpIHx8IDB4ZWFjNztcblxudmFyIFJFU0VSVkVEX1BST1BTID0ge1xuICBrZXk6IHRydWUsXG4gIHJlZjogdHJ1ZSxcbiAgX19zZWxmOiB0cnVlLFxuICBfX3NvdXJjZTogdHJ1ZVxufTtcblxuLyoqXG4gKiBCYXNlIGNvbnN0cnVjdG9yIGZvciBhbGwgUmVhY3QgZWxlbWVudHMuIFRoaXMgaXMgb25seSB1c2VkIHRvIG1ha2UgdGhpc1xuICogd29yayB3aXRoIGEgZHluYW1pYyBpbnN0YW5jZW9mIGNoZWNrLiBOb3RoaW5nIHNob3VsZCBsaXZlIG9uIHRoaXMgcHJvdG90eXBlLlxuICpcbiAqIEBwYXJhbSB7Kn0gdHlwZVxuICogQHBhcmFtIHsqfSBrZXlcbiAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gcmVmXG4gKiBAcGFyYW0geyp9IHNlbGYgQSAqdGVtcG9yYXJ5KiBoZWxwZXIgdG8gZGV0ZWN0IHBsYWNlcyB3aGVyZSBgdGhpc2AgaXNcbiAqIGRpZmZlcmVudCBmcm9tIHRoZSBgb3duZXJgIHdoZW4gUmVhY3QuY3JlYXRlRWxlbWVudCBpcyBjYWxsZWQsIHNvIHRoYXQgd2VcbiAqIGNhbiB3YXJuLiBXZSB3YW50IHRvIGdldCByaWQgb2Ygb3duZXIgYW5kIHJlcGxhY2Ugc3RyaW5nIGByZWZgcyB3aXRoIGFycm93XG4gKiBmdW5jdGlvbnMsIGFuZCBhcyBsb25nIGFzIGB0aGlzYCBhbmQgb3duZXIgYXJlIHRoZSBzYW1lLCB0aGVyZSB3aWxsIGJlIG5vXG4gKiBjaGFuZ2UgaW4gYmVoYXZpb3IuXG4gKiBAcGFyYW0geyp9IHNvdXJjZSBBbiBhbm5vdGF0aW9uIG9iamVjdCAoYWRkZWQgYnkgYSB0cmFuc3BpbGVyIG9yIG90aGVyd2lzZSlcbiAqIGluZGljYXRpbmcgZmlsZW5hbWUsIGxpbmUgbnVtYmVyLCBhbmQvb3Igb3RoZXIgaW5mb3JtYXRpb24uXG4gKiBAcGFyYW0geyp9IG93bmVyXG4gKiBAcGFyYW0geyp9IHByb3BzXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIFJlYWN0RWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBrZXksIHJlZiwgc2VsZiwgc291cmNlLCBvd25lciwgcHJvcHMpIHtcbiAgdmFyIGVsZW1lbnQgPSB7XG4gICAgLy8gVGhpcyB0YWcgYWxsb3cgdXMgdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhpcyBhcyBhIFJlYWN0IEVsZW1lbnRcbiAgICAkJHR5cGVvZjogUkVBQ1RfRUxFTUVOVF9UWVBFLFxuXG4gICAgLy8gQnVpbHQtaW4gcHJvcGVydGllcyB0aGF0IGJlbG9uZyBvbiB0aGUgZWxlbWVudFxuICAgIHR5cGU6IHR5cGUsXG4gICAga2V5OiBrZXksXG4gICAgcmVmOiByZWYsXG4gICAgcHJvcHM6IHByb3BzLFxuXG4gICAgLy8gUmVjb3JkIHRoZSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoaXMgZWxlbWVudC5cbiAgICBfb3duZXI6IG93bmVyXG4gIH07XG5cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyBUaGUgdmFsaWRhdGlvbiBmbGFnIGlzIGN1cnJlbnRseSBtdXRhdGl2ZS4gV2UgcHV0IGl0IG9uXG4gICAgLy8gYW4gZXh0ZXJuYWwgYmFja2luZyBzdG9yZSBzbyB0aGF0IHdlIGNhbiBmcmVlemUgdGhlIHdob2xlIG9iamVjdC5cbiAgICAvLyBUaGlzIGNhbiBiZSByZXBsYWNlZCB3aXRoIGEgV2Vha01hcCBvbmNlIHRoZXkgYXJlIGltcGxlbWVudGVkIGluXG4gICAgLy8gY29tbW9ubHkgdXNlZCBkZXZlbG9wbWVudCBlbnZpcm9ubWVudHMuXG4gICAgZWxlbWVudC5fc3RvcmUgPSB7fTtcblxuICAgIC8vIFRvIG1ha2UgY29tcGFyaW5nIFJlYWN0RWxlbWVudHMgZWFzaWVyIGZvciB0ZXN0aW5nIHB1cnBvc2VzLCB3ZSBtYWtlXG4gICAgLy8gdGhlIHZhbGlkYXRpb24gZmxhZyBub24tZW51bWVyYWJsZSAod2hlcmUgcG9zc2libGUsIHdoaWNoIHNob3VsZFxuICAgIC8vIGluY2x1ZGUgZXZlcnkgZW52aXJvbm1lbnQgd2UgcnVuIHRlc3RzIGluKSwgc28gdGhlIHRlc3QgZnJhbWV3b3JrXG4gICAgLy8gaWdub3JlcyBpdC5cbiAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50Ll9zdG9yZSwgJ3ZhbGlkYXRlZCcsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgLy8gc2VsZiBhbmQgc291cmNlIGFyZSBERVYgb25seSBwcm9wZXJ0aWVzLlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdfc2VsZicsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IHNlbGZcbiAgICAgIH0pO1xuICAgICAgLy8gVHdvIGVsZW1lbnRzIGNyZWF0ZWQgaW4gdHdvIGRpZmZlcmVudCBwbGFjZXMgc2hvdWxkIGJlIGNvbnNpZGVyZWRcbiAgICAgIC8vIGVxdWFsIGZvciB0ZXN0aW5nIHB1cnBvc2VzIGFuZCB0aGVyZWZvcmUgd2UgaGlkZSBpdCBmcm9tIGVudW1lcmF0aW9uLlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdfc291cmNlJywge1xuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogc291cmNlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudC5fc3RvcmUudmFsaWRhdGVkID0gZmFsc2U7XG4gICAgICBlbGVtZW50Ll9zZWxmID0gc2VsZjtcbiAgICAgIGVsZW1lbnQuX3NvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgT2JqZWN0LmZyZWV6ZShlbGVtZW50LnByb3BzKTtcbiAgICBPYmplY3QuZnJlZXplKGVsZW1lbnQpO1xuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnQ7XG59O1xuXG5SZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBjb25maWcsIGNoaWxkcmVuKSB7XG4gIHZhciBwcm9wTmFtZTtcblxuICAvLyBSZXNlcnZlZCBuYW1lcyBhcmUgZXh0cmFjdGVkXG4gIHZhciBwcm9wcyA9IHt9O1xuXG4gIHZhciBrZXkgPSBudWxsO1xuICB2YXIgcmVmID0gbnVsbDtcbiAgdmFyIHNlbGYgPSBudWxsO1xuICB2YXIgc291cmNlID0gbnVsbDtcblxuICBpZiAoY29uZmlnICE9IG51bGwpIHtcbiAgICByZWYgPSBjb25maWcucmVmID09PSB1bmRlZmluZWQgPyBudWxsIDogY29uZmlnLnJlZjtcbiAgICBrZXkgPSBjb25maWcua2V5ID09PSB1bmRlZmluZWQgPyBudWxsIDogJycgKyBjb25maWcua2V5O1xuICAgIHNlbGYgPSBjb25maWcuX19zZWxmID09PSB1bmRlZmluZWQgPyBudWxsIDogY29uZmlnLl9fc2VsZjtcbiAgICBzb3VyY2UgPSBjb25maWcuX19zb3VyY2UgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjb25maWcuX19zb3VyY2U7XG4gICAgLy8gUmVtYWluaW5nIHByb3BlcnRpZXMgYXJlIGFkZGVkIHRvIGEgbmV3IHByb3BzIG9iamVjdFxuICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKSB7XG4gICAgICBpZiAoY29uZmlnLmhhc093blByb3BlcnR5KHByb3BOYW1lKSAmJiAhUkVTRVJWRURfUFJPUFMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hpbGRyZW4gY2FuIGJlIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQsIGFuZCB0aG9zZSBhcmUgdHJhbnNmZXJyZWQgb250b1xuICAvLyB0aGUgbmV3bHkgYWxsb2NhdGVkIHByb3BzIG9iamVjdC5cbiAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG4gIGlmIChjaGlsZHJlbkxlbmd0aCA9PT0gMSkge1xuICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gIH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7XG4gICAgdmFyIGNoaWxkQXJyYXkgPSBBcnJheShjaGlsZHJlbkxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbkxlbmd0aDsgaSsrKSB7XG4gICAgICBjaGlsZEFycmF5W2ldID0gYXJndW1lbnRzW2kgKyAyXTtcbiAgICB9XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZEFycmF5O1xuICB9XG5cbiAgLy8gUmVzb2x2ZSBkZWZhdWx0IHByb3BzXG4gIGlmICh0eXBlICYmIHR5cGUuZGVmYXVsdFByb3BzKSB7XG4gICAgdmFyIGRlZmF1bHRQcm9wcyA9IHR5cGUuZGVmYXVsdFByb3BzO1xuICAgIGZvciAocHJvcE5hbWUgaW4gZGVmYXVsdFByb3BzKSB7XG4gICAgICBpZiAodHlwZW9mIHByb3BzW3Byb3BOYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcHJvcHNbcHJvcE5hbWVdID0gZGVmYXVsdFByb3BzW3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gUmVhY3RFbGVtZW50KHR5cGUsIGtleSwgcmVmLCBzZWxmLCBzb3VyY2UsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQsIHByb3BzKTtcbn07XG5cblJlYWN0RWxlbWVudC5jcmVhdGVGYWN0b3J5ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgdmFyIGZhY3RvcnkgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudC5iaW5kKG51bGwsIHR5cGUpO1xuICAvLyBFeHBvc2UgdGhlIHR5cGUgb24gdGhlIGZhY3RvcnkgYW5kIHRoZSBwcm90b3R5cGUgc28gdGhhdCBpdCBjYW4gYmVcbiAgLy8gZWFzaWx5IGFjY2Vzc2VkIG9uIGVsZW1lbnRzLiBFLmcuIGA8Rm9vIC8+LnR5cGUgPT09IEZvb2AuXG4gIC8vIFRoaXMgc2hvdWxkIG5vdCBiZSBuYW1lZCBgY29uc3RydWN0b3JgIHNpbmNlIHRoaXMgbWF5IG5vdCBiZSB0aGUgZnVuY3Rpb25cbiAgLy8gdGhhdCBjcmVhdGVkIHRoZSBlbGVtZW50LCBhbmQgaXQgbWF5IG5vdCBldmVuIGJlIGEgY29uc3RydWN0b3IuXG4gIC8vIExlZ2FjeSBob29rIFRPRE86IFdhcm4gaWYgdGhpcyBpcyBhY2Nlc3NlZFxuICBmYWN0b3J5LnR5cGUgPSB0eXBlO1xuICByZXR1cm4gZmFjdG9yeTtcbn07XG5cblJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VLZXkgPSBmdW5jdGlvbiAob2xkRWxlbWVudCwgbmV3S2V5KSB7XG4gIHZhciBuZXdFbGVtZW50ID0gUmVhY3RFbGVtZW50KG9sZEVsZW1lbnQudHlwZSwgbmV3S2V5LCBvbGRFbGVtZW50LnJlZiwgb2xkRWxlbWVudC5fc2VsZiwgb2xkRWxlbWVudC5fc291cmNlLCBvbGRFbGVtZW50Ll9vd25lciwgb2xkRWxlbWVudC5wcm9wcyk7XG5cbiAgcmV0dXJuIG5ld0VsZW1lbnQ7XG59O1xuXG5SZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlUHJvcHMgPSBmdW5jdGlvbiAob2xkRWxlbWVudCwgbmV3UHJvcHMpIHtcbiAgdmFyIG5ld0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQob2xkRWxlbWVudC50eXBlLCBvbGRFbGVtZW50LmtleSwgb2xkRWxlbWVudC5yZWYsIG9sZEVsZW1lbnQuX3NlbGYsIG9sZEVsZW1lbnQuX3NvdXJjZSwgb2xkRWxlbWVudC5fb3duZXIsIG5ld1Byb3BzKTtcblxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIC8vIElmIHRoZSBrZXkgb24gdGhlIG9yaWdpbmFsIGlzIHZhbGlkLCB0aGVuIHRoZSBjbG9uZSBpcyB2YWxpZFxuICAgIG5ld0VsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCA9IG9sZEVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZDtcbiAgfVxuXG4gIHJldHVybiBuZXdFbGVtZW50O1xufTtcblxuUmVhY3RFbGVtZW50LmNsb25lRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb25maWcsIGNoaWxkcmVuKSB7XG4gIHZhciBwcm9wTmFtZTtcblxuICAvLyBPcmlnaW5hbCBwcm9wcyBhcmUgY29waWVkXG4gIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgZWxlbWVudC5wcm9wcyk7XG5cbiAgLy8gUmVzZXJ2ZWQgbmFtZXMgYXJlIGV4dHJhY3RlZFxuICB2YXIga2V5ID0gZWxlbWVudC5rZXk7XG4gIHZhciByZWYgPSBlbGVtZW50LnJlZjtcbiAgLy8gU2VsZiBpcyBwcmVzZXJ2ZWQgc2luY2UgdGhlIG93bmVyIGlzIHByZXNlcnZlZC5cbiAgdmFyIHNlbGYgPSBlbGVtZW50Ll9zZWxmO1xuICAvLyBTb3VyY2UgaXMgcHJlc2VydmVkIHNpbmNlIGNsb25lRWxlbWVudCBpcyB1bmxpa2VseSB0byBiZSB0YXJnZXRlZCBieSBhXG4gIC8vIHRyYW5zcGlsZXIsIGFuZCB0aGUgb3JpZ2luYWwgc291cmNlIGlzIHByb2JhYmx5IGEgYmV0dGVyIGluZGljYXRvciBvZiB0aGVcbiAgLy8gdHJ1ZSBvd25lci5cbiAgdmFyIHNvdXJjZSA9IGVsZW1lbnQuX3NvdXJjZTtcblxuICAvLyBPd25lciB3aWxsIGJlIHByZXNlcnZlZCwgdW5sZXNzIHJlZiBpcyBvdmVycmlkZGVuXG4gIHZhciBvd25lciA9IGVsZW1lbnQuX293bmVyO1xuXG4gIGlmIChjb25maWcgIT0gbnVsbCkge1xuICAgIGlmIChjb25maWcucmVmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIFNpbGVudGx5IHN0ZWFsIHRoZSByZWYgZnJvbSB0aGUgcGFyZW50LlxuICAgICAgcmVmID0gY29uZmlnLnJlZjtcbiAgICAgIG93bmVyID0gUmVhY3RDdXJyZW50T3duZXIuY3VycmVudDtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5rZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5ID0gJycgKyBjb25maWcua2V5O1xuICAgIH1cbiAgICAvLyBSZW1haW5pbmcgcHJvcGVydGllcyBvdmVycmlkZSBleGlzdGluZyBwcm9wc1xuICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKSB7XG4gICAgICBpZiAoY29uZmlnLmhhc093blByb3BlcnR5KHByb3BOYW1lKSAmJiAhUkVTRVJWRURfUFJPUFMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hpbGRyZW4gY2FuIGJlIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQsIGFuZCB0aG9zZSBhcmUgdHJhbnNmZXJyZWQgb250b1xuICAvLyB0aGUgbmV3bHkgYWxsb2NhdGVkIHByb3BzIG9iamVjdC5cbiAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG4gIGlmIChjaGlsZHJlbkxlbmd0aCA9PT0gMSkge1xuICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gIH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7XG4gICAgdmFyIGNoaWxkQXJyYXkgPSBBcnJheShjaGlsZHJlbkxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbkxlbmd0aDsgaSsrKSB7XG4gICAgICBjaGlsZEFycmF5W2ldID0gYXJndW1lbnRzW2kgKyAyXTtcbiAgICB9XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZEFycmF5O1xuICB9XG5cbiAgcmV0dXJuIFJlYWN0RWxlbWVudChlbGVtZW50LnR5cGUsIGtleSwgcmVmLCBzZWxmLCBzb3VyY2UsIG93bmVyLCBwcm9wcyk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7P29iamVjdH0gb2JqZWN0XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBvYmplY3RgIGlzIGEgdmFsaWQgY29tcG9uZW50LlxuICogQGZpbmFsXG4gKi9cblJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudCA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdCAhPT0gbnVsbCAmJiBvYmplY3QuJCR0eXBlb2YgPT09IFJFQUNUX0VMRU1FTlRfVFlQRTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RFbGVtZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVsZW1lbnRWYWxpZGF0b3JcbiAqL1xuXG4vKipcbiAqIFJlYWN0RWxlbWVudFZhbGlkYXRvciBwcm92aWRlcyBhIHdyYXBwZXIgYXJvdW5kIGEgZWxlbWVudCBmYWN0b3J5XG4gKiB3aGljaCB2YWxpZGF0ZXMgdGhlIHByb3BzIHBhc3NlZCB0byB0aGUgZWxlbWVudC4gVGhpcyBpcyBpbnRlbmRlZCB0byBiZVxuICogdXNlZCBvbmx5IGluIERFViBhbmQgY291bGQgYmUgcmVwbGFjZWQgYnkgYSBzdGF0aWMgdHlwZSBjaGVja2VyIGZvciBsYW5ndWFnZXNcbiAqIHRoYXQgc3VwcG9ydCBpdC5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMnKTtcbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcblxudmFyIGNhbkRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9jYW5EZWZpbmVQcm9wZXJ0eScpO1xudmFyIGdldEl0ZXJhdG9yRm4gPSByZXF1aXJlKCcuL2dldEl0ZXJhdG9yRm4nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKSB7XG4gIGlmIChSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG4gICAgdmFyIG5hbWUgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKTtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIFdhcm4gaWYgdGhlcmUncyBubyBrZXkgZXhwbGljaXRseSBzZXQgb24gZHluYW1pYyBhcnJheXMgb2YgY2hpbGRyZW4gb3JcbiAqIG9iamVjdCBrZXlzIGFyZSBub3QgdmFsaWQuIFRoaXMgYWxsb3dzIHVzIHRvIGtlZXAgdHJhY2sgb2YgY2hpbGRyZW4gYmV0d2VlblxuICogdXBkYXRlcy5cbiAqL1xudmFyIG93bmVySGFzS2V5VXNlV2FybmluZyA9IHt9O1xuXG52YXIgbG9nZ2VkVHlwZUZhaWx1cmVzID0ge307XG5cbi8qKlxuICogV2FybiBpZiB0aGUgZWxlbWVudCBkb2Vzbid0IGhhdmUgYW4gZXhwbGljaXQga2V5IGFzc2lnbmVkIHRvIGl0LlxuICogVGhpcyBlbGVtZW50IGlzIGluIGFuIGFycmF5LiBUaGUgYXJyYXkgY291bGQgZ3JvdyBhbmQgc2hyaW5rIG9yIGJlXG4gKiByZW9yZGVyZWQuIEFsbCBjaGlsZHJlbiB0aGF0IGhhdmVuJ3QgYWxyZWFkeSBiZWVuIHZhbGlkYXRlZCBhcmUgcmVxdWlyZWQgdG9cbiAqIGhhdmUgYSBcImtleVwiIHByb3BlcnR5IGFzc2lnbmVkIHRvIGl0LlxuICpcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudCB0aGF0IHJlcXVpcmVzIGEga2V5LlxuICogQHBhcmFtIHsqfSBwYXJlbnRUeXBlIGVsZW1lbnQncyBwYXJlbnQncyB0eXBlLlxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUV4cGxpY2l0S2V5KGVsZW1lbnQsIHBhcmVudFR5cGUpIHtcbiAgaWYgKCFlbGVtZW50Ll9zdG9yZSB8fCBlbGVtZW50Ll9zdG9yZS52YWxpZGF0ZWQgfHwgZWxlbWVudC5rZXkgIT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBlbGVtZW50Ll9zdG9yZS52YWxpZGF0ZWQgPSB0cnVlO1xuXG4gIHZhciBhZGRlbmRhID0gZ2V0QWRkZW5kYUZvcktleVVzZSgndW5pcXVlS2V5JywgZWxlbWVudCwgcGFyZW50VHlwZSk7XG4gIGlmIChhZGRlbmRhID09PSBudWxsKSB7XG4gICAgLy8gd2UgYWxyZWFkeSBzaG93ZWQgdGhlIHdhcm5pbmdcbiAgICByZXR1cm47XG4gIH1cbiAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdFYWNoIGNoaWxkIGluIGFuIGFycmF5IG9yIGl0ZXJhdG9yIHNob3VsZCBoYXZlIGEgdW5pcXVlIFwia2V5XCIgcHJvcC4nICsgJyVzJXMlcycsIGFkZGVuZGEucGFyZW50T3JPd25lciB8fCAnJywgYWRkZW5kYS5jaGlsZE93bmVyIHx8ICcnLCBhZGRlbmRhLnVybCB8fCAnJykgOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogU2hhcmVkIHdhcm5pbmcgYW5kIG1vbml0b3JpbmcgY29kZSBmb3IgdGhlIGtleSB3YXJuaW5ncy5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlVHlwZSBBIGtleSB1c2VkIGZvciBkZS1kdXBpbmcgd2FybmluZ3MuXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudCBDb21wb25lbnQgdGhhdCByZXF1aXJlcyBhIGtleS5cbiAqIEBwYXJhbSB7Kn0gcGFyZW50VHlwZSBlbGVtZW50J3MgcGFyZW50J3MgdHlwZS5cbiAqIEByZXR1cm5zIHs/b2JqZWN0fSBBIHNldCBvZiBhZGRlbmRhIHRvIHVzZSBpbiB0aGUgd2FybmluZyBtZXNzYWdlLCBvciBudWxsXG4gKiBpZiB0aGUgd2FybmluZyBoYXMgYWxyZWFkeSBiZWVuIHNob3duIGJlZm9yZSAoYW5kIHNob3VsZG4ndCBiZSBzaG93biBhZ2FpbikuXG4gKi9cbmZ1bmN0aW9uIGdldEFkZGVuZGFGb3JLZXlVc2UobWVzc2FnZVR5cGUsIGVsZW1lbnQsIHBhcmVudFR5cGUpIHtcbiAgdmFyIGFkZGVuZHVtID0gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKCk7XG4gIGlmICghYWRkZW5kdW0pIHtcbiAgICB2YXIgcGFyZW50TmFtZSA9IHR5cGVvZiBwYXJlbnRUeXBlID09PSAnc3RyaW5nJyA/IHBhcmVudFR5cGUgOiBwYXJlbnRUeXBlLmRpc3BsYXlOYW1lIHx8IHBhcmVudFR5cGUubmFtZTtcbiAgICBpZiAocGFyZW50TmFtZSkge1xuICAgICAgYWRkZW5kdW0gPSAnIENoZWNrIHRoZSB0b3AtbGV2ZWwgcmVuZGVyIGNhbGwgdXNpbmcgPCcgKyBwYXJlbnROYW1lICsgJz4uJztcbiAgICB9XG4gIH1cblxuICB2YXIgbWVtb2l6ZXIgPSBvd25lckhhc0tleVVzZVdhcm5pbmdbbWVzc2FnZVR5cGVdIHx8IChvd25lckhhc0tleVVzZVdhcm5pbmdbbWVzc2FnZVR5cGVdID0ge30pO1xuICBpZiAobWVtb2l6ZXJbYWRkZW5kdW1dKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgbWVtb2l6ZXJbYWRkZW5kdW1dID0gdHJ1ZTtcblxuICB2YXIgYWRkZW5kYSA9IHtcbiAgICBwYXJlbnRPck93bmVyOiBhZGRlbmR1bSxcbiAgICB1cmw6ICcgU2VlIGh0dHBzOi8vZmIubWUvcmVhY3Qtd2FybmluZy1rZXlzIGZvciBtb3JlIGluZm9ybWF0aW9uLicsXG4gICAgY2hpbGRPd25lcjogbnVsbFxuICB9O1xuXG4gIC8vIFVzdWFsbHkgdGhlIGN1cnJlbnQgb3duZXIgaXMgdGhlIG9mZmVuZGVyLCBidXQgaWYgaXQgYWNjZXB0cyBjaGlsZHJlbiBhcyBhXG4gIC8vIHByb3BlcnR5LCBpdCBtYXkgYmUgdGhlIGNyZWF0b3Igb2YgdGhlIGNoaWxkIHRoYXQncyByZXNwb25zaWJsZSBmb3JcbiAgLy8gYXNzaWduaW5nIGl0IGEga2V5LlxuICBpZiAoZWxlbWVudCAmJiBlbGVtZW50Ll9vd25lciAmJiBlbGVtZW50Ll9vd25lciAhPT0gUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCkge1xuICAgIC8vIEdpdmUgdGhlIGNvbXBvbmVudCB0aGF0IG9yaWdpbmFsbHkgY3JlYXRlZCB0aGlzIGNoaWxkLlxuICAgIGFkZGVuZGEuY2hpbGRPd25lciA9ICcgSXQgd2FzIHBhc3NlZCBhIGNoaWxkIGZyb20gJyArIGVsZW1lbnQuX293bmVyLmdldE5hbWUoKSArICcuJztcbiAgfVxuXG4gIHJldHVybiBhZGRlbmRhO1xufVxuXG4vKipcbiAqIEVuc3VyZSB0aGF0IGV2ZXJ5IGVsZW1lbnQgZWl0aGVyIGlzIHBhc3NlZCBpbiBhIHN0YXRpYyBsb2NhdGlvbiwgaW4gYW5cbiAqIGFycmF5IHdpdGggYW4gZXhwbGljaXQga2V5cyBwcm9wZXJ0eSBkZWZpbmVkLCBvciBpbiBhbiBvYmplY3QgbGl0ZXJhbFxuICogd2l0aCB2YWxpZCBrZXkgcHJvcGVydHkuXG4gKlxuICogQGludGVybmFsXG4gKiBAcGFyYW0ge1JlYWN0Tm9kZX0gbm9kZSBTdGF0aWNhbGx5IHBhc3NlZCBjaGlsZCBvZiBhbnkgdHlwZS5cbiAqIEBwYXJhbSB7Kn0gcGFyZW50VHlwZSBub2RlJ3MgcGFyZW50J3MgdHlwZS5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVDaGlsZEtleXMobm9kZSwgcGFyZW50VHlwZSkge1xuICBpZiAodHlwZW9mIG5vZGUgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KG5vZGUpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY2hpbGQgPSBub2RlW2ldO1xuICAgICAgaWYgKFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZCkpIHtcbiAgICAgICAgdmFsaWRhdGVFeHBsaWNpdEtleShjaGlsZCwgcGFyZW50VHlwZSk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChub2RlKSkge1xuICAgIC8vIFRoaXMgZWxlbWVudCB3YXMgcGFzc2VkIGluIGEgdmFsaWQgbG9jYXRpb24uXG4gICAgaWYgKG5vZGUuX3N0b3JlKSB7XG4gICAgICBub2RlLl9zdG9yZS52YWxpZGF0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIGlmIChub2RlKSB7XG4gICAgdmFyIGl0ZXJhdG9yRm4gPSBnZXRJdGVyYXRvckZuKG5vZGUpO1xuICAgIC8vIEVudHJ5IGl0ZXJhdG9ycyBwcm92aWRlIGltcGxpY2l0IGtleXMuXG4gICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAgICAgIGlmIChpdGVyYXRvckZuICE9PSBub2RlLmVudHJpZXMpIHtcbiAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKG5vZGUpO1xuICAgICAgICB2YXIgc3RlcDtcbiAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgIGlmIChSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoc3RlcC52YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlRXhwbGljaXRLZXkoc3RlcC52YWx1ZSwgcGFyZW50VHlwZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQXNzZXJ0IHRoYXQgdGhlIHByb3BzIGFyZSB2YWxpZFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnROYW1lIE5hbWUgb2YgdGhlIGNvbXBvbmVudCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcFR5cGVzIE1hcCBvZiBwcm9wIG5hbWUgdG8gYSBSZWFjdFByb3BUeXBlXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbiBlLmcuIFwicHJvcFwiLCBcImNvbnRleHRcIiwgXCJjaGlsZCBjb250ZXh0XCJcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNoZWNrUHJvcFR5cGVzKGNvbXBvbmVudE5hbWUsIHByb3BUeXBlcywgcHJvcHMsIGxvY2F0aW9uKSB7XG4gIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BUeXBlcykge1xuICAgIGlmIChwcm9wVHlwZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICB2YXIgZXJyb3I7XG4gICAgICAvLyBQcm9wIHR5cGUgdmFsaWRhdGlvbiBtYXkgdGhyb3cuIEluIGNhc2UgdGhleSBkbywgd2UgZG9uJ3Qgd2FudCB0b1xuICAgICAgLy8gZmFpbCB0aGUgcmVuZGVyIHBoYXNlIHdoZXJlIGl0IGRpZG4ndCBmYWlsIGJlZm9yZS4gU28gd2UgbG9nIGl0LlxuICAgICAgLy8gQWZ0ZXIgdGhlc2UgaGF2ZSBiZWVuIGNsZWFuZWQgdXAsIHdlJ2xsIGxldCB0aGVtIHRocm93LlxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyBpcyBpbnRlbnRpb25hbGx5IGFuIGludmFyaWFudCB0aGF0IGdldHMgY2F1Z2h0LiBJdCdzIHRoZSBzYW1lXG4gICAgICAgIC8vIGJlaGF2aW9yIGFzIHdpdGhvdXQgdGhpcyBzdGF0ZW1lbnQgZXhjZXB0IHdpdGggYSBiZXR0ZXIgbWVzc2FnZS5cbiAgICAgICAgISh0eXBlb2YgcHJvcFR5cGVzW3Byb3BOYW1lXSA9PT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXM6ICVzIHR5cGUgYCVzYCBpcyBpbnZhbGlkOyBpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgZnJvbSAnICsgJ1JlYWN0LlByb3BUeXBlcy4nLCBjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgZXJyb3IgPSBwcm9wVHlwZXNbcHJvcE5hbWVdKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIG51bGwsICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCcpO1xuICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgZXJyb3IgPSBleDtcbiAgICAgIH1cbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFlcnJvciB8fCBlcnJvciBpbnN0YW5jZW9mIEVycm9yLCAnJXM6IHR5cGUgc3BlY2lmaWNhdGlvbiBvZiAlcyBgJXNgIGlzIGludmFsaWQ7IHRoZSB0eXBlIGNoZWNrZXIgJyArICdmdW5jdGlvbiBtdXN0IHJldHVybiBgbnVsbGAgb3IgYW4gYEVycm9yYCBidXQgcmV0dXJuZWQgYSAlcy4gJyArICdZb3UgbWF5IGhhdmUgZm9yZ290dGVuIHRvIHBhc3MgYW4gYXJndW1lbnQgdG8gdGhlIHR5cGUgY2hlY2tlciAnICsgJ2NyZWF0b3IgKGFycmF5T2YsIGluc3RhbmNlT2YsIG9iamVjdE9mLCBvbmVPZiwgb25lT2ZUeXBlLCBhbmQgJyArICdzaGFwZSBhbGwgcmVxdWlyZSBhbiBhcmd1bWVudCkuJywgY29tcG9uZW50TmFtZSB8fCAnUmVhY3QgY2xhc3MnLCBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl0sIHByb3BOYW1lLCB0eXBlb2YgZXJyb3IpIDogdW5kZWZpbmVkO1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgIShlcnJvci5tZXNzYWdlIGluIGxvZ2dlZFR5cGVGYWlsdXJlcykpIHtcbiAgICAgICAgLy8gT25seSBtb25pdG9yIHRoaXMgZmFpbHVyZSBvbmNlIGJlY2F1c2UgdGhlcmUgdGVuZHMgdG8gYmUgYSBsb3Qgb2YgdGhlXG4gICAgICAgIC8vIHNhbWUgZXJyb3IuXG4gICAgICAgIGxvZ2dlZFR5cGVGYWlsdXJlc1tlcnJvci5tZXNzYWdlXSA9IHRydWU7XG5cbiAgICAgICAgdmFyIGFkZGVuZHVtID0gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKCk7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFpbGVkIHByb3BUeXBlOiAlcyVzJywgZXJyb3IubWVzc2FnZSwgYWRkZW5kdW0pIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEdpdmVuIGFuIGVsZW1lbnQsIHZhbGlkYXRlIHRoYXQgaXRzIHByb3BzIGZvbGxvdyB0aGUgcHJvcFR5cGVzIGRlZmluaXRpb24sXG4gKiBwcm92aWRlZCBieSB0aGUgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudFxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BUeXBlcyhlbGVtZW50KSB7XG4gIHZhciBjb21wb25lbnRDbGFzcyA9IGVsZW1lbnQudHlwZTtcbiAgaWYgKHR5cGVvZiBjb21wb25lbnRDbGFzcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbmFtZSA9IGNvbXBvbmVudENsYXNzLmRpc3BsYXlOYW1lIHx8IGNvbXBvbmVudENsYXNzLm5hbWU7XG4gIGlmIChjb21wb25lbnRDbGFzcy5wcm9wVHlwZXMpIHtcbiAgICBjaGVja1Byb3BUeXBlcyhuYW1lLCBjb21wb25lbnRDbGFzcy5wcm9wVHlwZXMsIGVsZW1lbnQucHJvcHMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBjb21wb25lbnRDbGFzcy5nZXREZWZhdWx0UHJvcHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhjb21wb25lbnRDbGFzcy5nZXREZWZhdWx0UHJvcHMuaXNSZWFjdENsYXNzQXBwcm92ZWQsICdnZXREZWZhdWx0UHJvcHMgaXMgb25seSB1c2VkIG9uIGNsYXNzaWMgUmVhY3QuY3JlYXRlQ2xhc3MgJyArICdkZWZpbml0aW9ucy4gVXNlIGEgc3RhdGljIHByb3BlcnR5IG5hbWVkIGBkZWZhdWx0UHJvcHNgIGluc3RlYWQuJykgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxudmFyIFJlYWN0RWxlbWVudFZhbGlkYXRvciA9IHtcblxuICBjcmVhdGVFbGVtZW50OiBmdW5jdGlvbiAodHlwZSwgcHJvcHMsIGNoaWxkcmVuKSB7XG4gICAgdmFyIHZhbGlkVHlwZSA9IHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAvLyBXZSB3YXJuIGluIHRoaXMgY2FzZSBidXQgZG9uJ3QgdGhyb3cuIFdlIGV4cGVjdCB0aGUgZWxlbWVudCBjcmVhdGlvbiB0b1xuICAgIC8vIHN1Y2NlZWQgYW5kIHRoZXJlIHdpbGwgbGlrZWx5IGJlIGVycm9ycyBpbiByZW5kZXIuXG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodmFsaWRUeXBlLCAnUmVhY3QuY3JlYXRlRWxlbWVudDogdHlwZSBzaG91bGQgbm90IGJlIG51bGwsIHVuZGVmaW5lZCwgYm9vbGVhbiwgb3IgJyArICdudW1iZXIuIEl0IHNob3VsZCBiZSBhIHN0cmluZyAoZm9yIERPTSBlbGVtZW50cykgb3IgYSBSZWFjdENsYXNzICcgKyAnKGZvciBjb21wb3NpdGUgY29tcG9uZW50cykuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKSkgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgZWxlbWVudCA9IFJlYWN0RWxlbWVudC5jcmVhdGVFbGVtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICAvLyBUaGUgcmVzdWx0IGNhbiBiZSBudWxsaXNoIGlmIGEgbW9jayBvciBhIGN1c3RvbSBmdW5jdGlvbiBpcyB1c2VkLlxuICAgIC8vIFRPRE86IERyb3AgdGhpcyB3aGVuIHRoZXNlIGFyZSBubyBsb25nZXIgYWxsb3dlZCBhcyB0aGUgdHlwZSBhcmd1bWVudC5cbiAgICBpZiAoZWxlbWVudCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICAvLyBTa2lwIGtleSB3YXJuaW5nIGlmIHRoZSB0eXBlIGlzbid0IHZhbGlkIHNpbmNlIG91ciBrZXkgdmFsaWRhdGlvbiBsb2dpY1xuICAgIC8vIGRvZXNuJ3QgZXhwZWN0IGEgbm9uLXN0cmluZy9mdW5jdGlvbiB0eXBlIGFuZCBjYW4gdGhyb3cgY29uZnVzaW5nIGVycm9ycy5cbiAgICAvLyBXZSBkb24ndCB3YW50IGV4Y2VwdGlvbiBiZWhhdmlvciB0byBkaWZmZXIgYmV0d2VlbiBkZXYgYW5kIHByb2QuXG4gICAgLy8gKFJlbmRlcmluZyB3aWxsIHRocm93IHdpdGggYSBoZWxwZnVsIG1lc3NhZ2UgYW5kIGFzIHNvb24gYXMgdGhlIHR5cGUgaXNcbiAgICAvLyBmaXhlZCwgdGhlIGtleSB3YXJuaW5ncyB3aWxsIGFwcGVhci4pXG4gICAgaWYgKHZhbGlkVHlwZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsaWRhdGVDaGlsZEtleXMoYXJndW1lbnRzW2ldLCB0eXBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YWxpZGF0ZVByb3BUeXBlcyhlbGVtZW50KTtcblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9LFxuXG4gIGNyZWF0ZUZhY3Rvcnk6IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgdmFyIHZhbGlkYXRlZEZhY3RvcnkgPSBSZWFjdEVsZW1lbnRWYWxpZGF0b3IuY3JlYXRlRWxlbWVudC5iaW5kKG51bGwsIHR5cGUpO1xuICAgIC8vIExlZ2FjeSBob29rIFRPRE86IFdhcm4gaWYgdGhpcyBpcyBhY2Nlc3NlZFxuICAgIHZhbGlkYXRlZEZhY3RvcnkudHlwZSA9IHR5cGU7XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKGNhbkRlZmluZVByb3BlcnR5KSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2YWxpZGF0ZWRGYWN0b3J5LCAndHlwZScsIHtcbiAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFjdG9yeS50eXBlIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB0aGUgY2xhc3MgZGlyZWN0bHkgJyArICdiZWZvcmUgcGFzc2luZyBpdCB0byBjcmVhdGVGYWN0b3J5LicpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICd0eXBlJywge1xuICAgICAgICAgICAgICB2YWx1ZTogdHlwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdHlwZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB2YWxpZGF0ZWRGYWN0b3J5O1xuICB9LFxuXG4gIGNsb25lRWxlbWVudDogZnVuY3Rpb24gKGVsZW1lbnQsIHByb3BzLCBjaGlsZHJlbikge1xuICAgIHZhciBuZXdFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNsb25lRWxlbWVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGZvciAodmFyIGkgPSAyOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YWxpZGF0ZUNoaWxkS2V5cyhhcmd1bWVudHNbaV0sIG5ld0VsZW1lbnQudHlwZSk7XG4gICAgfVxuICAgIHZhbGlkYXRlUHJvcFR5cGVzKG5ld0VsZW1lbnQpO1xuICAgIHJldHVybiBuZXdFbGVtZW50O1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVtcHR5Q29tcG9uZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkgPSByZXF1aXJlKCcuL1JlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeScpO1xudmFyIFJlYWN0UmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVyJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcblxudmFyIHBsYWNlaG9sZGVyRWxlbWVudDtcblxudmFyIFJlYWN0RW1wdHlDb21wb25lbnRJbmplY3Rpb24gPSB7XG4gIGluamVjdEVtcHR5Q29tcG9uZW50OiBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgcGxhY2Vob2xkZXJFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50KTtcbiAgfVxufTtcblxuZnVuY3Rpb24gcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQoKSB7XG4gIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5yZWdpc3Rlck51bGxDb21wb25lbnRJRCh0aGlzLl9yb290Tm9kZUlEKTtcbn1cblxudmFyIFJlYWN0RW1wdHlDb21wb25lbnQgPSBmdW5jdGlvbiAoaW5zdGFudGlhdGUpIHtcbiAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBudWxsO1xuICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSBpbnN0YW50aWF0ZShwbGFjZWhvbGRlckVsZW1lbnQpO1xufTtcbmFzc2lnbihSZWFjdEVtcHR5Q29tcG9uZW50LnByb3RvdHlwZSwge1xuICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7fSxcbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShyZWdpc3Rlck51bGxDb21wb25lbnRJRCwgdGhpcyk7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IHJvb3RJRDtcbiAgICByZXR1cm4gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50LCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgfSxcbiAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKCkge30sXG4gIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQpO1xuICAgIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5kZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcbiAgfVxufSk7XG5cblJlYWN0RW1wdHlDb21wb25lbnQuaW5qZWN0aW9uID0gUmVhY3RFbXB0eUNvbXBvbmVudEluamVjdGlvbjtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVtcHR5Q29tcG9uZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8vIFRoaXMgcmVnaXN0cnkga2VlcHMgdHJhY2sgb2YgdGhlIFJlYWN0IElEcyBvZiB0aGUgY29tcG9uZW50cyB0aGF0IHJlbmRlcmVkIHRvXG4vLyBgbnVsbGAgKGluIHJlYWxpdHkgYSBwbGFjZWhvbGRlciBzdWNoIGFzIGBub3NjcmlwdGApXG52YXIgbnVsbENvbXBvbmVudElEc1JlZ2lzdHJ5ID0ge307XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIENvbXBvbmVudCdzIGBfcm9vdE5vZGVJRGAuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBjb21wb25lbnQgaXMgcmVuZGVyZWQgdG8gbnVsbC5cbiAqL1xuZnVuY3Rpb24gaXNOdWxsQ29tcG9uZW50SUQoaWQpIHtcbiAgcmV0dXJuICEhbnVsbENvbXBvbmVudElEc1JlZ2lzdHJ5W2lkXTtcbn1cblxuLyoqXG4gKiBNYXJrIHRoZSBjb21wb25lbnQgYXMgaGF2aW5nIHJlbmRlcmVkIHRvIG51bGwuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQ29tcG9uZW50J3MgYF9yb290Tm9kZUlEYC5cbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQoaWQpIHtcbiAgbnVsbENvbXBvbmVudElEc1JlZ2lzdHJ5W2lkXSA9IHRydWU7XG59XG5cbi8qKlxuICogVW5tYXJrIHRoZSBjb21wb25lbnQgYXMgaGF2aW5nIHJlbmRlcmVkIHRvIG51bGw6IGl0IHJlbmRlcnMgdG8gc29tZXRoaW5nIG5vdy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBDb21wb25lbnQncyBgX3Jvb3ROb2RlSURgLlxuICovXG5mdW5jdGlvbiBkZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEKGlkKSB7XG4gIGRlbGV0ZSBudWxsQ29tcG9uZW50SURzUmVnaXN0cnlbaWRdO1xufVxuXG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5ID0ge1xuICBpc051bGxDb21wb25lbnRJRDogaXNOdWxsQ29tcG9uZW50SUQsXG4gIHJlZ2lzdGVyTnVsbENvbXBvbmVudElEOiByZWdpc3Rlck51bGxDb21wb25lbnRJRCxcbiAgZGVyZWdpc3Rlck51bGxDb21wb25lbnRJRDogZGVyZWdpc3Rlck51bGxDb21wb25lbnRJRFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnk7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RXJyb3JVdGlsc1xuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBjYXVnaHRFcnJvciA9IG51bGw7XG5cbi8qKlxuICogQ2FsbCBhIGZ1bmN0aW9uIHdoaWxlIGd1YXJkaW5nIGFnYWluc3QgZXJyb3JzIHRoYXQgaGFwcGVucyB3aXRoaW4gaXQuXG4gKlxuICogQHBhcmFtIHs/U3RyaW5nfSBuYW1lIG9mIHRoZSBndWFyZCB0byB1c2UgZm9yIGxvZ2dpbmcgb3IgZGVidWdnaW5nXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBpbnZva2VcbiAqIEBwYXJhbSB7Kn0gYSBGaXJzdCBhcmd1bWVudFxuICogQHBhcmFtIHsqfSBiIFNlY29uZCBhcmd1bWVudFxuICovXG5mdW5jdGlvbiBpbnZva2VHdWFyZGVkQ2FsbGJhY2sobmFtZSwgZnVuYywgYSwgYikge1xuICB0cnkge1xuICAgIHJldHVybiBmdW5jKGEsIGIpO1xuICB9IGNhdGNoICh4KSB7XG4gICAgaWYgKGNhdWdodEVycm9yID09PSBudWxsKSB7XG4gICAgICBjYXVnaHRFcnJvciA9IHg7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxudmFyIFJlYWN0RXJyb3JVdGlscyA9IHtcbiAgaW52b2tlR3VhcmRlZENhbGxiYWNrOiBpbnZva2VHdWFyZGVkQ2FsbGJhY2ssXG5cbiAgLyoqXG4gICAqIEludm9rZWQgYnkgUmVhY3RUZXN0VXRpbHMuU2ltdWxhdGUgc28gdGhhdCBhbnkgZXJyb3JzIHRocm93biBieSB0aGUgZXZlbnRcbiAgICogaGFuZGxlciBhcmUgc3VyZSB0byBiZSByZXRocm93biBieSByZXRocm93Q2F1Z2h0RXJyb3IuXG4gICAqL1xuICBpbnZva2VHdWFyZGVkQ2FsbGJhY2tXaXRoQ2F0Y2g6IGludm9rZUd1YXJkZWRDYWxsYmFjayxcblxuICAvKipcbiAgICogRHVyaW5nIGV4ZWN1dGlvbiBvZiBndWFyZGVkIGZ1bmN0aW9ucyB3ZSB3aWxsIGNhcHR1cmUgdGhlIGZpcnN0IGVycm9yIHdoaWNoXG4gICAqIHdlIHdpbGwgcmV0aHJvdyB0byBiZSBoYW5kbGVkIGJ5IHRoZSB0b3AgbGV2ZWwgZXJyb3IgaGFuZGxlci5cbiAgICovXG4gIHJldGhyb3dDYXVnaHRFcnJvcjogZnVuY3Rpb24gKCkge1xuICAgIGlmIChjYXVnaHRFcnJvcikge1xuICAgICAgdmFyIGVycm9yID0gY2F1Z2h0RXJyb3I7XG4gICAgICBjYXVnaHRFcnJvciA9IG51bGw7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn07XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8qKlxuICAgKiBUbyBoZWxwIGRldmVsb3BtZW50IHdlIGNhbiBnZXQgYmV0dGVyIGRldnRvb2xzIGludGVncmF0aW9uIGJ5IHNpbXVsYXRpbmcgYVxuICAgKiByZWFsIGJyb3dzZXIgZXZlbnQuXG4gICAqL1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5kaXNwYXRjaEV2ZW50ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIGZha2VOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncmVhY3QnKTtcbiAgICBSZWFjdEVycm9yVXRpbHMuaW52b2tlR3VhcmRlZENhbGxiYWNrID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMsIGEsIGIpIHtcbiAgICAgIHZhciBib3VuZEZ1bmMgPSBmdW5jLmJpbmQobnVsbCwgYSwgYik7XG4gICAgICB2YXIgZXZ0VHlwZSA9ICdyZWFjdC0nICsgbmFtZTtcbiAgICAgIGZha2VOb2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZ0VHlwZSwgYm91bmRGdW5jLCBmYWxzZSk7XG4gICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICBldnQuaW5pdEV2ZW50KGV2dFR5cGUsIGZhbHNlLCBmYWxzZSk7XG4gICAgICBmYWtlTm9kZS5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgICBmYWtlTm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2dFR5cGUsIGJvdW5kRnVuYywgZmFsc2UpO1xuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVycm9yVXRpbHM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RXZlbnRFbWl0dGVyTWl4aW5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudFBsdWdpbkh1YiA9IHJlcXVpcmUoJy4vRXZlbnRQbHVnaW5IdWInKTtcblxuZnVuY3Rpb24gcnVuRXZlbnRRdWV1ZUluQmF0Y2goZXZlbnRzKSB7XG4gIEV2ZW50UGx1Z2luSHViLmVucXVldWVFdmVudHMoZXZlbnRzKTtcbiAgRXZlbnRQbHVnaW5IdWIucHJvY2Vzc0V2ZW50UXVldWUoZmFsc2UpO1xufVxuXG52YXIgUmVhY3RFdmVudEVtaXR0ZXJNaXhpbiA9IHtcblxuICAvKipcbiAgICogU3RyZWFtcyBhIGZpcmVkIHRvcC1sZXZlbCBldmVudCB0byBgRXZlbnRQbHVnaW5IdWJgIHdoZXJlIHBsdWdpbnMgaGF2ZSB0aGVcbiAgICogb3Bwb3J0dW5pdHkgdG8gY3JlYXRlIGBSZWFjdEV2ZW50YHMgdG8gYmUgZGlzcGF0Y2hlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGVudmlyb25tZW50IGV2ZW50LlxuICAgKi9cbiAgaGFuZGxlVG9wTGV2ZWw6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICB2YXIgZXZlbnRzID0gRXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50cyh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuICAgIHJ1bkV2ZW50UXVldWVJbkJhdGNoKGV2ZW50cyk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RFdmVudEVtaXR0ZXJNaXhpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFdmVudExpc3RlbmVyXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50TGlzdGVuZXIgPSByZXF1aXJlKCdmYmpzL2xpYi9FdmVudExpc3RlbmVyJyk7XG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlSGFuZGxlcycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZ2V0RXZlbnRUYXJnZXQgPSByZXF1aXJlKCcuL2dldEV2ZW50VGFyZ2V0Jyk7XG52YXIgZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9nZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvbicpO1xuXG52YXIgRE9DVU1FTlRfRlJBR01FTlRfTk9ERV9UWVBFID0gMTE7XG5cbi8qKlxuICogRmluZHMgdGhlIHBhcmVudCBSZWFjdCBjb21wb25lbnQgb2YgYG5vZGVgLlxuICpcbiAqIEBwYXJhbSB7Kn0gbm9kZVxuICogQHJldHVybiB7P0RPTUV2ZW50VGFyZ2V0fSBQYXJlbnQgY29udGFpbmVyLCBvciBgbnVsbGAgaWYgdGhlIHNwZWNpZmllZCBub2RlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIG5vdCBuZXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIGZpbmRQYXJlbnQobm9kZSkge1xuICAvLyBUT0RPOiBJdCBtYXkgYmUgYSBnb29kIGlkZWEgdG8gY2FjaGUgdGhpcyB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IERPTVxuICAvLyB0cmF2ZXJzYWwsIGJ1dCBjYWNoaW5nIGlzIGRpZmZpY3VsdCB0byBkbyBjb3JyZWN0bHkgd2l0aG91dCB1c2luZyBhXG4gIC8vIG11dGF0aW9uIG9ic2VydmVyIHRvIGxpc3RlbiBmb3IgYWxsIERPTSBjaGFuZ2VzLlxuICB2YXIgbm9kZUlEID0gUmVhY3RNb3VudC5nZXRJRChub2RlKTtcbiAgdmFyIHJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChub2RlSUQpO1xuICB2YXIgY29udGFpbmVyID0gUmVhY3RNb3VudC5maW5kUmVhY3RDb250YWluZXJGb3JJRChyb290SUQpO1xuICB2YXIgcGFyZW50ID0gUmVhY3RNb3VudC5nZXRGaXJzdFJlYWN0RE9NKGNvbnRhaW5lcik7XG4gIHJldHVybiBwYXJlbnQ7XG59XG5cbi8vIFVzZWQgdG8gc3RvcmUgYW5jZXN0b3IgaGllcmFyY2h5IGluIHRvcCBsZXZlbCBjYWxsYmFja1xuZnVuY3Rpb24gVG9wTGV2ZWxDYWxsYmFja0Jvb2tLZWVwaW5nKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgdGhpcy50b3BMZXZlbFR5cGUgPSB0b3BMZXZlbFR5cGU7XG4gIHRoaXMubmF0aXZlRXZlbnQgPSBuYXRpdmVFdmVudDtcbiAgdGhpcy5hbmNlc3RvcnMgPSBbXTtcbn1cbmFzc2lnbihUb3BMZXZlbENhbGxiYWNrQm9va0tlZXBpbmcucHJvdG90eXBlLCB7XG4gIGRlc3RydWN0b3I6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnRvcExldmVsVHlwZSA9IG51bGw7XG4gICAgdGhpcy5uYXRpdmVFdmVudCA9IG51bGw7XG4gICAgdGhpcy5hbmNlc3RvcnMubGVuZ3RoID0gMDtcbiAgfVxufSk7XG5Qb29sZWRDbGFzcy5hZGRQb29saW5nVG8oVG9wTGV2ZWxDYWxsYmFja0Jvb2tLZWVwaW5nLCBQb29sZWRDbGFzcy50d29Bcmd1bWVudFBvb2xlcik7XG5cbmZ1bmN0aW9uIGhhbmRsZVRvcExldmVsSW1wbChib29rS2VlcGluZykge1xuICAvLyBUT0RPOiBSZS1lbmFibGUgZXZlbnQucGF0aCBoYW5kbGluZ1xuICAvL1xuICAvLyBpZiAoYm9va0tlZXBpbmcubmF0aXZlRXZlbnQucGF0aCAmJiBib29rS2VlcGluZy5uYXRpdmVFdmVudC5wYXRoLmxlbmd0aCA+IDEpIHtcbiAgLy8gICAvLyBOZXcgYnJvd3NlcnMgaGF2ZSBhIHBhdGggYXR0cmlidXRlIG9uIG5hdGl2ZSBldmVudHNcbiAgLy8gICBoYW5kbGVUb3BMZXZlbFdpdGhQYXRoKGJvb2tLZWVwaW5nKTtcbiAgLy8gfSBlbHNlIHtcbiAgLy8gICAvLyBMZWdhY3kgYnJvd3NlcnMgZG9uJ3QgaGF2ZSBhIHBhdGggYXR0cmlidXRlIG9uIG5hdGl2ZSBldmVudHNcbiAgLy8gICBoYW5kbGVUb3BMZXZlbFdpdGhvdXRQYXRoKGJvb2tLZWVwaW5nKTtcbiAgLy8gfVxuXG4gIHZvaWQgaGFuZGxlVG9wTGV2ZWxXaXRoUGF0aDsgLy8gdGVtcG9yYXJpbHkgdW51c2VkXG4gIGhhbmRsZVRvcExldmVsV2l0aG91dFBhdGgoYm9va0tlZXBpbmcpO1xufVxuXG4vLyBMZWdhY3kgYnJvd3NlcnMgZG9uJ3QgaGF2ZSBhIHBhdGggYXR0cmlidXRlIG9uIG5hdGl2ZSBldmVudHNcbmZ1bmN0aW9uIGhhbmRsZVRvcExldmVsV2l0aG91dFBhdGgoYm9va0tlZXBpbmcpIHtcbiAgdmFyIHRvcExldmVsVGFyZ2V0ID0gUmVhY3RNb3VudC5nZXRGaXJzdFJlYWN0RE9NKGdldEV2ZW50VGFyZ2V0KGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50KSkgfHwgd2luZG93O1xuXG4gIC8vIExvb3AgdGhyb3VnaCB0aGUgaGllcmFyY2h5LCBpbiBjYXNlIHRoZXJlJ3MgYW55IG5lc3RlZCBjb21wb25lbnRzLlxuICAvLyBJdCdzIGltcG9ydGFudCB0aGF0IHdlIGJ1aWxkIHRoZSBhcnJheSBvZiBhbmNlc3RvcnMgYmVmb3JlIGNhbGxpbmcgYW55XG4gIC8vIGV2ZW50IGhhbmRsZXJzLCBiZWNhdXNlIGV2ZW50IGhhbmRsZXJzIGNhbiBtb2RpZnkgdGhlIERPTSwgbGVhZGluZyB0b1xuICAvLyBpbmNvbnNpc3RlbmNpZXMgd2l0aCBSZWFjdE1vdW50J3Mgbm9kZSBjYWNoZS4gU2VlICMxMTA1LlxuICB2YXIgYW5jZXN0b3IgPSB0b3BMZXZlbFRhcmdldDtcbiAgd2hpbGUgKGFuY2VzdG9yKSB7XG4gICAgYm9va0tlZXBpbmcuYW5jZXN0b3JzLnB1c2goYW5jZXN0b3IpO1xuICAgIGFuY2VzdG9yID0gZmluZFBhcmVudChhbmNlc3Rvcik7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGJvb2tLZWVwaW5nLmFuY2VzdG9ycy5sZW5ndGg7IGkrKykge1xuICAgIHRvcExldmVsVGFyZ2V0ID0gYm9va0tlZXBpbmcuYW5jZXN0b3JzW2ldO1xuICAgIHZhciB0b3BMZXZlbFRhcmdldElEID0gUmVhY3RNb3VudC5nZXRJRCh0b3BMZXZlbFRhcmdldCkgfHwgJyc7XG4gICAgUmVhY3RFdmVudExpc3RlbmVyLl9oYW5kbGVUb3BMZXZlbChib29rS2VlcGluZy50b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBib29rS2VlcGluZy5uYXRpdmVFdmVudCwgZ2V0RXZlbnRUYXJnZXQoYm9va0tlZXBpbmcubmF0aXZlRXZlbnQpKTtcbiAgfVxufVxuXG4vLyBOZXcgYnJvd3NlcnMgaGF2ZSBhIHBhdGggYXR0cmlidXRlIG9uIG5hdGl2ZSBldmVudHNcbmZ1bmN0aW9uIGhhbmRsZVRvcExldmVsV2l0aFBhdGgoYm9va0tlZXBpbmcpIHtcbiAgdmFyIHBhdGggPSBib29rS2VlcGluZy5uYXRpdmVFdmVudC5wYXRoO1xuICB2YXIgY3VycmVudE5hdGl2ZVRhcmdldCA9IHBhdGhbMF07XG4gIHZhciBldmVudHNGaXJlZCA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBjdXJyZW50UGF0aEVsZW1lbnQgPSBwYXRoW2ldO1xuICAgIGlmIChjdXJyZW50UGF0aEVsZW1lbnQubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREVfVFlQRSkge1xuICAgICAgY3VycmVudE5hdGl2ZVRhcmdldCA9IHBhdGhbaSArIDFdO1xuICAgIH1cbiAgICAvLyBUT0RPOiBzbG93XG4gICAgdmFyIHJlYWN0UGFyZW50ID0gUmVhY3RNb3VudC5nZXRGaXJzdFJlYWN0RE9NKGN1cnJlbnRQYXRoRWxlbWVudCk7XG4gICAgaWYgKHJlYWN0UGFyZW50ID09PSBjdXJyZW50UGF0aEVsZW1lbnQpIHtcbiAgICAgIHZhciBjdXJyZW50UGF0aEVsZW1lbnRJRCA9IFJlYWN0TW91bnQuZ2V0SUQoY3VycmVudFBhdGhFbGVtZW50KTtcbiAgICAgIHZhciBuZXdSb290SUQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQoY3VycmVudFBhdGhFbGVtZW50SUQpO1xuICAgICAgYm9va0tlZXBpbmcuYW5jZXN0b3JzLnB1c2goY3VycmVudFBhdGhFbGVtZW50KTtcblxuICAgICAgdmFyIHRvcExldmVsVGFyZ2V0SUQgPSBSZWFjdE1vdW50LmdldElEKGN1cnJlbnRQYXRoRWxlbWVudCkgfHwgJyc7XG4gICAgICBldmVudHNGaXJlZCsrO1xuICAgICAgUmVhY3RFdmVudExpc3RlbmVyLl9oYW5kbGVUb3BMZXZlbChib29rS2VlcGluZy50b3BMZXZlbFR5cGUsIGN1cnJlbnRQYXRoRWxlbWVudCwgdG9wTGV2ZWxUYXJnZXRJRCwgYm9va0tlZXBpbmcubmF0aXZlRXZlbnQsIGN1cnJlbnROYXRpdmVUYXJnZXQpO1xuXG4gICAgICAvLyBKdW1wIHRvIHRoZSByb290IG9mIHRoaXMgUmVhY3QgcmVuZGVyIHRyZWVcbiAgICAgIHdoaWxlIChjdXJyZW50UGF0aEVsZW1lbnRJRCAhPT0gbmV3Um9vdElEKSB7XG4gICAgICAgIGkrKztcbiAgICAgICAgY3VycmVudFBhdGhFbGVtZW50ID0gcGF0aFtpXTtcbiAgICAgICAgY3VycmVudFBhdGhFbGVtZW50SUQgPSBSZWFjdE1vdW50LmdldElEKGN1cnJlbnRQYXRoRWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChldmVudHNGaXJlZCA9PT0gMCkge1xuICAgIFJlYWN0RXZlbnRMaXN0ZW5lci5faGFuZGxlVG9wTGV2ZWwoYm9va0tlZXBpbmcudG9wTGV2ZWxUeXBlLCB3aW5kb3csICcnLCBib29rS2VlcGluZy5uYXRpdmVFdmVudCwgZ2V0RXZlbnRUYXJnZXQoYm9va0tlZXBpbmcubmF0aXZlRXZlbnQpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzY3JvbGxWYWx1ZU1vbml0b3IoY2IpIHtcbiAgdmFyIHNjcm9sbFBvc2l0aW9uID0gZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24od2luZG93KTtcbiAgY2Ioc2Nyb2xsUG9zaXRpb24pO1xufVxuXG52YXIgUmVhY3RFdmVudExpc3RlbmVyID0ge1xuICBfZW5hYmxlZDogdHJ1ZSxcbiAgX2hhbmRsZVRvcExldmVsOiBudWxsLFxuXG4gIFdJTkRPV19IQU5ETEU6IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IHdpbmRvdyA6IG51bGwsXG5cbiAgc2V0SGFuZGxlVG9wTGV2ZWw6IGZ1bmN0aW9uIChoYW5kbGVUb3BMZXZlbCkge1xuICAgIFJlYWN0RXZlbnRMaXN0ZW5lci5faGFuZGxlVG9wTGV2ZWwgPSBoYW5kbGVUb3BMZXZlbDtcbiAgfSxcblxuICBzZXRFbmFibGVkOiBmdW5jdGlvbiAoZW5hYmxlZCkge1xuICAgIFJlYWN0RXZlbnRMaXN0ZW5lci5fZW5hYmxlZCA9ICEhZW5hYmxlZDtcbiAgfSxcblxuICBpc0VuYWJsZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gUmVhY3RFdmVudExpc3RlbmVyLl9lbmFibGVkO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUcmFwcyB0b3AtbGV2ZWwgZXZlbnRzIGJ5IHVzaW5nIGV2ZW50IGJ1YmJsaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoYW5kbGVyQmFzZU5hbWUgRXZlbnQgbmFtZSAoZS5nLiBcImNsaWNrXCIpLlxuICAgKiBAcGFyYW0ge29iamVjdH0gaGFuZGxlIEVsZW1lbnQgb24gd2hpY2ggdG8gYXR0YWNoIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBBbiBvYmplY3Qgd2l0aCBhIHJlbW92ZSBmdW5jdGlvbiB3aGljaCB3aWxsIGZvcmNlZnVsbHlcbiAgICogICAgICAgICAgICAgICAgICByZW1vdmUgdGhlIGxpc3RlbmVyLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHRyYXBCdWJibGVkRXZlbnQ6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBoYW5kbGU7XG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIEV2ZW50TGlzdGVuZXIubGlzdGVuKGVsZW1lbnQsIGhhbmRsZXJCYXNlTmFtZSwgUmVhY3RFdmVudExpc3RlbmVyLmRpc3BhdGNoRXZlbnQuYmluZChudWxsLCB0b3BMZXZlbFR5cGUpKTtcbiAgfSxcblxuICAvKipcbiAgICogVHJhcHMgYSB0b3AtbGV2ZWwgZXZlbnQgYnkgdXNpbmcgZXZlbnQgY2FwdHVyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoYW5kbGVyQmFzZU5hbWUgRXZlbnQgbmFtZSAoZS5nLiBcImNsaWNrXCIpLlxuICAgKiBAcGFyYW0ge29iamVjdH0gaGFuZGxlIEVsZW1lbnQgb24gd2hpY2ggdG8gYXR0YWNoIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBBbiBvYmplY3Qgd2l0aCBhIHJlbW92ZSBmdW5jdGlvbiB3aGljaCB3aWxsIGZvcmNlZnVsbHlcbiAgICogICAgICAgICAgICAgICAgICByZW1vdmUgdGhlIGxpc3RlbmVyLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHRyYXBDYXB0dXJlZEV2ZW50OiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCBoYW5kbGVyQmFzZU5hbWUsIGhhbmRsZSkge1xuICAgIHZhciBlbGVtZW50ID0gaGFuZGxlO1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBFdmVudExpc3RlbmVyLmNhcHR1cmUoZWxlbWVudCwgaGFuZGxlckJhc2VOYW1lLCBSZWFjdEV2ZW50TGlzdGVuZXIuZGlzcGF0Y2hFdmVudC5iaW5kKG51bGwsIHRvcExldmVsVHlwZSkpO1xuICB9LFxuXG4gIG1vbml0b3JTY3JvbGxWYWx1ZTogZnVuY3Rpb24gKHJlZnJlc2gpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBzY3JvbGxWYWx1ZU1vbml0b3IuYmluZChudWxsLCByZWZyZXNoKTtcbiAgICBFdmVudExpc3RlbmVyLmxpc3Rlbih3aW5kb3csICdzY3JvbGwnLCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgZGlzcGF0Y2hFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgICBpZiAoIVJlYWN0RXZlbnRMaXN0ZW5lci5fZW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBib29rS2VlcGluZyA9IFRvcExldmVsQ2FsbGJhY2tCb29rS2VlcGluZy5nZXRQb29sZWQodG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEV2ZW50IHF1ZXVlIGJlaW5nIHByb2Nlc3NlZCBpbiB0aGUgc2FtZSBjeWNsZSBhbGxvd3NcbiAgICAgIC8vIGBwcmV2ZW50RGVmYXVsdGAuXG4gICAgICBSZWFjdFVwZGF0ZXMuYmF0Y2hlZFVwZGF0ZXMoaGFuZGxlVG9wTGV2ZWxJbXBsLCBib29rS2VlcGluZyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIFRvcExldmVsQ2FsbGJhY2tCb29rS2VlcGluZy5yZWxlYXNlKGJvb2tLZWVwaW5nKTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RFdmVudExpc3RlbmVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEluamVjdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTVByb3BlcnR5ID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eScpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xudmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdENsYXNzID0gcmVxdWlyZSgnLi9SZWFjdENsYXNzJyk7XG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbXB0eUNvbXBvbmVudCcpO1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJyk7XG52YXIgUmVhY3ROYXRpdmVDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0TmF0aXZlQ29tcG9uZW50Jyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBSZWFjdFJvb3RJbmRleCA9IHJlcXVpcmUoJy4vUmVhY3RSb290SW5kZXgnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgUmVhY3RJbmplY3Rpb24gPSB7XG4gIENvbXBvbmVudDogUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5pbmplY3Rpb24sXG4gIENsYXNzOiBSZWFjdENsYXNzLmluamVjdGlvbixcbiAgRE9NUHJvcGVydHk6IERPTVByb3BlcnR5LmluamVjdGlvbixcbiAgRW1wdHlDb21wb25lbnQ6IFJlYWN0RW1wdHlDb21wb25lbnQuaW5qZWN0aW9uLFxuICBFdmVudFBsdWdpbkh1YjogRXZlbnRQbHVnaW5IdWIuaW5qZWN0aW9uLFxuICBFdmVudEVtaXR0ZXI6IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5pbmplY3Rpb24sXG4gIE5hdGl2ZUNvbXBvbmVudDogUmVhY3ROYXRpdmVDb21wb25lbnQuaW5qZWN0aW9uLFxuICBQZXJmOiBSZWFjdFBlcmYuaW5qZWN0aW9uLFxuICBSb290SW5kZXg6IFJlYWN0Um9vdEluZGV4LmluamVjdGlvbixcbiAgVXBkYXRlczogUmVhY3RVcGRhdGVzLmluamVjdGlvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEluamVjdGlvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RJbnB1dFNlbGVjdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NU2VsZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdERPTVNlbGVjdGlvbicpO1xuXG52YXIgY29udGFpbnNOb2RlID0gcmVxdWlyZSgnZmJqcy9saWIvY29udGFpbnNOb2RlJyk7XG52YXIgZm9jdXNOb2RlID0gcmVxdWlyZSgnZmJqcy9saWIvZm9jdXNOb2RlJyk7XG52YXIgZ2V0QWN0aXZlRWxlbWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL2dldEFjdGl2ZUVsZW1lbnQnKTtcblxuZnVuY3Rpb24gaXNJbkRvY3VtZW50KG5vZGUpIHtcbiAgcmV0dXJuIGNvbnRhaW5zTm9kZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIG5vZGUpO1xufVxuXG4vKipcbiAqIEBSZWFjdElucHV0U2VsZWN0aW9uOiBSZWFjdCBpbnB1dCBzZWxlY3Rpb24gbW9kdWxlLiBCYXNlZCBvbiBTZWxlY3Rpb24uanMsXG4gKiBidXQgbW9kaWZpZWQgdG8gYmUgc3VpdGFibGUgZm9yIHJlYWN0IGFuZCBoYXMgYSBjb3VwbGUgb2YgYnVnIGZpeGVzIChkb2Vzbid0XG4gKiBhc3N1bWUgYnV0dG9ucyBoYXZlIHJhbmdlIHNlbGVjdGlvbnMgYWxsb3dlZCkuXG4gKiBJbnB1dCBzZWxlY3Rpb24gbW9kdWxlIGZvciBSZWFjdC5cbiAqL1xudmFyIFJlYWN0SW5wdXRTZWxlY3Rpb24gPSB7XG5cbiAgaGFzU2VsZWN0aW9uQ2FwYWJpbGl0aWVzOiBmdW5jdGlvbiAoZWxlbSkge1xuICAgIHZhciBub2RlTmFtZSA9IGVsZW0gJiYgZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIG5vZGVOYW1lICYmIChub2RlTmFtZSA9PT0gJ2lucHV0JyAmJiBlbGVtLnR5cGUgPT09ICd0ZXh0JyB8fCBub2RlTmFtZSA9PT0gJ3RleHRhcmVhJyB8fCBlbGVtLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnKTtcbiAgfSxcblxuICBnZXRTZWxlY3Rpb25JbmZvcm1hdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBmb2N1c2VkRWxlbSA9IGdldEFjdGl2ZUVsZW1lbnQoKTtcbiAgICByZXR1cm4ge1xuICAgICAgZm9jdXNlZEVsZW06IGZvY3VzZWRFbGVtLFxuICAgICAgc2VsZWN0aW9uUmFuZ2U6IFJlYWN0SW5wdXRTZWxlY3Rpb24uaGFzU2VsZWN0aW9uQ2FwYWJpbGl0aWVzKGZvY3VzZWRFbGVtKSA/IFJlYWN0SW5wdXRTZWxlY3Rpb24uZ2V0U2VsZWN0aW9uKGZvY3VzZWRFbGVtKSA6IG51bGxcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcmVzdG9yZVNlbGVjdGlvbjogSWYgYW55IHNlbGVjdGlvbiBpbmZvcm1hdGlvbiB3YXMgcG90ZW50aWFsbHkgbG9zdCxcbiAgICogcmVzdG9yZSBpdC4gVGhpcyBpcyB1c2VmdWwgd2hlbiBwZXJmb3JtaW5nIG9wZXJhdGlvbnMgdGhhdCBjb3VsZCByZW1vdmUgZG9tXG4gICAqIG5vZGVzIGFuZCBwbGFjZSB0aGVtIGJhY2sgaW4sIHJlc3VsdGluZyBpbiBmb2N1cyBiZWluZyBsb3N0LlxuICAgKi9cbiAgcmVzdG9yZVNlbGVjdGlvbjogZnVuY3Rpb24gKHByaW9yU2VsZWN0aW9uSW5mb3JtYXRpb24pIHtcbiAgICB2YXIgY3VyRm9jdXNlZEVsZW0gPSBnZXRBY3RpdmVFbGVtZW50KCk7XG4gICAgdmFyIHByaW9yRm9jdXNlZEVsZW0gPSBwcmlvclNlbGVjdGlvbkluZm9ybWF0aW9uLmZvY3VzZWRFbGVtO1xuICAgIHZhciBwcmlvclNlbGVjdGlvblJhbmdlID0gcHJpb3JTZWxlY3Rpb25JbmZvcm1hdGlvbi5zZWxlY3Rpb25SYW5nZTtcbiAgICBpZiAoY3VyRm9jdXNlZEVsZW0gIT09IHByaW9yRm9jdXNlZEVsZW0gJiYgaXNJbkRvY3VtZW50KHByaW9yRm9jdXNlZEVsZW0pKSB7XG4gICAgICBpZiAoUmVhY3RJbnB1dFNlbGVjdGlvbi5oYXNTZWxlY3Rpb25DYXBhYmlsaXRpZXMocHJpb3JGb2N1c2VkRWxlbSkpIHtcbiAgICAgICAgUmVhY3RJbnB1dFNlbGVjdGlvbi5zZXRTZWxlY3Rpb24ocHJpb3JGb2N1c2VkRWxlbSwgcHJpb3JTZWxlY3Rpb25SYW5nZSk7XG4gICAgICB9XG4gICAgICBmb2N1c05vZGUocHJpb3JGb2N1c2VkRWxlbSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAZ2V0U2VsZWN0aW9uOiBHZXRzIHRoZSBzZWxlY3Rpb24gYm91bmRzIG9mIGEgZm9jdXNlZCB0ZXh0YXJlYSwgaW5wdXQgb3JcbiAgICogY29udGVudEVkaXRhYmxlIG5vZGUuXG4gICAqIC1AaW5wdXQ6IExvb2sgdXAgc2VsZWN0aW9uIGJvdW5kcyBvZiB0aGlzIGlucHV0XG4gICAqIC1AcmV0dXJuIHtzdGFydDogc2VsZWN0aW9uU3RhcnQsIGVuZDogc2VsZWN0aW9uRW5kfVxuICAgKi9cbiAgZ2V0U2VsZWN0aW9uOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICB2YXIgc2VsZWN0aW9uO1xuXG4gICAgaWYgKCdzZWxlY3Rpb25TdGFydCcgaW4gaW5wdXQpIHtcbiAgICAgIC8vIE1vZGVybiBicm93c2VyIHdpdGggaW5wdXQgb3IgdGV4dGFyZWEuXG4gICAgICBzZWxlY3Rpb24gPSB7XG4gICAgICAgIHN0YXJ0OiBpbnB1dC5zZWxlY3Rpb25TdGFydCxcbiAgICAgICAgZW5kOiBpbnB1dC5zZWxlY3Rpb25FbmRcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChkb2N1bWVudC5zZWxlY3Rpb24gJiYgKGlucHV0Lm5vZGVOYW1lICYmIGlucHV0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcpKSB7XG4gICAgICAvLyBJRTggaW5wdXQuXG4gICAgICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcbiAgICAgIC8vIFRoZXJlIGNhbiBvbmx5IGJlIG9uZSBzZWxlY3Rpb24gcGVyIGRvY3VtZW50IGluIElFLCBzbyBpdCBtdXN0XG4gICAgICAvLyBiZSBpbiBvdXIgZWxlbWVudC5cbiAgICAgIGlmIChyYW5nZS5wYXJlbnRFbGVtZW50KCkgPT09IGlucHV0KSB7XG4gICAgICAgIHNlbGVjdGlvbiA9IHtcbiAgICAgICAgICBzdGFydDogLXJhbmdlLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgLWlucHV0LnZhbHVlLmxlbmd0aCksXG4gICAgICAgICAgZW5kOiAtcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgLWlucHV0LnZhbHVlLmxlbmd0aClcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ29udGVudCBlZGl0YWJsZSBvciBvbGQgSUUgdGV4dGFyZWEuXG4gICAgICBzZWxlY3Rpb24gPSBSZWFjdERPTVNlbGVjdGlvbi5nZXRPZmZzZXRzKGlucHV0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZWN0aW9uIHx8IHsgc3RhcnQ6IDAsIGVuZDogMCB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBAc2V0U2VsZWN0aW9uOiBTZXRzIHRoZSBzZWxlY3Rpb24gYm91bmRzIG9mIGEgdGV4dGFyZWEgb3IgaW5wdXQgYW5kIGZvY3VzZXNcbiAgICogdGhlIGlucHV0LlxuICAgKiAtQGlucHV0ICAgICBTZXQgc2VsZWN0aW9uIGJvdW5kcyBvZiB0aGlzIGlucHV0IG9yIHRleHRhcmVhXG4gICAqIC1Ab2Zmc2V0cyAgIE9iamVjdCBvZiBzYW1lIGZvcm0gdGhhdCBpcyByZXR1cm5lZCBmcm9tIGdldCpcbiAgICovXG4gIHNldFNlbGVjdGlvbjogZnVuY3Rpb24gKGlucHV0LCBvZmZzZXRzKSB7XG4gICAgdmFyIHN0YXJ0ID0gb2Zmc2V0cy5zdGFydDtcbiAgICB2YXIgZW5kID0gb2Zmc2V0cy5lbmQ7XG4gICAgaWYgKHR5cGVvZiBlbmQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBlbmQgPSBzdGFydDtcbiAgICB9XG5cbiAgICBpZiAoJ3NlbGVjdGlvblN0YXJ0JyBpbiBpbnB1dCkge1xuICAgICAgaW5wdXQuc2VsZWN0aW9uU3RhcnQgPSBzdGFydDtcbiAgICAgIGlucHV0LnNlbGVjdGlvbkVuZCA9IE1hdGgubWluKGVuZCwgaW5wdXQudmFsdWUubGVuZ3RoKTtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiAoaW5wdXQubm9kZU5hbWUgJiYgaW5wdXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0JykpIHtcbiAgICAgIHZhciByYW5nZSA9IGlucHV0LmNyZWF0ZVRleHRSYW5nZSgpO1xuICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XG4gICAgICByYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHN0YXJ0KTtcbiAgICAgIHJhbmdlLm1vdmVFbmQoJ2NoYXJhY3RlcicsIGVuZCAtIHN0YXJ0KTtcbiAgICAgIHJhbmdlLnNlbGVjdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBSZWFjdERPTVNlbGVjdGlvbi5zZXRPZmZzZXRzKGlucHV0LCBvZmZzZXRzKTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RJbnB1dFNlbGVjdGlvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RJbnN0YW5jZUhhbmRsZXNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RSb290SW5kZXggPSByZXF1aXJlKCcuL1JlYWN0Um9vdEluZGV4Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIFNFUEFSQVRPUiA9ICcuJztcbnZhciBTRVBBUkFUT1JfTEVOR1RIID0gU0VQQVJBVE9SLmxlbmd0aDtcblxuLyoqXG4gKiBNYXhpbXVtIGRlcHRoIG9mIHRyYXZlcnNhbHMgYmVmb3JlIHdlIGNvbnNpZGVyIHRoZSBwb3NzaWJpbGl0eSBvZiBhIGJhZCBJRC5cbiAqL1xudmFyIE1BWF9UUkVFX0RFUFRIID0gMTAwMDA7XG5cbi8qKlxuICogQ3JlYXRlcyBhIERPTSBJRCBwcmVmaXggdG8gdXNlIHdoZW4gbW91bnRpbmcgUmVhY3QgY29tcG9uZW50cy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggQSB1bmlxdWUgaW50ZWdlclxuICogQHJldHVybiB7c3RyaW5nfSBSZWFjdCByb290IElELlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGdldFJlYWN0Um9vdElEU3RyaW5nKGluZGV4KSB7XG4gIHJldHVybiBTRVBBUkFUT1IgKyBpbmRleC50b1N0cmluZygzNik7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgY2hhcmFjdGVyIGluIHRoZSBzdXBwbGllZCBJRCBpcyBhIHNlcGFyYXRvciBvciB0aGUgZW5kLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBIFJlYWN0IERPTSBJRC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCBvZiB0aGUgY2hhcmFjdGVyIHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY2hhcmFjdGVyIGlzIGEgc2VwYXJhdG9yIG9yIGVuZCBvZiB0aGUgSUQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpc0JvdW5kYXJ5KGlkLCBpbmRleCkge1xuICByZXR1cm4gaWQuY2hhckF0KGluZGV4KSA9PT0gU0VQQVJBVE9SIHx8IGluZGV4ID09PSBpZC5sZW5ndGg7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBzdXBwbGllZCBzdHJpbmcgaXMgYSB2YWxpZCBSZWFjdCBET00gSUQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIEEgUmVhY3QgRE9NIElELCBtYXliZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHN0cmluZyBpcyBhIHZhbGlkIFJlYWN0IERPTSBJRC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWRJRChpZCkge1xuICByZXR1cm4gaWQgPT09ICcnIHx8IGlkLmNoYXJBdCgwKSA9PT0gU0VQQVJBVE9SICYmIGlkLmNoYXJBdChpZC5sZW5ndGggLSAxKSAhPT0gU0VQQVJBVE9SO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgZmlyc3QgSUQgaXMgYW4gYW5jZXN0b3Igb2Ygb3IgZXF1YWwgdG8gdGhlIHNlY29uZCBJRC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYW5jZXN0b3JJRFxuICogQHBhcmFtIHtzdHJpbmd9IGRlc2NlbmRhbnRJRFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBgYW5jZXN0b3JJRGAgaXMgYW4gYW5jZXN0b3Igb2YgYGRlc2NlbmRhbnRJRGAuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gaXNBbmNlc3RvcklET2YoYW5jZXN0b3JJRCwgZGVzY2VuZGFudElEKSB7XG4gIHJldHVybiBkZXNjZW5kYW50SUQuaW5kZXhPZihhbmNlc3RvcklEKSA9PT0gMCAmJiBpc0JvdW5kYXJ5KGRlc2NlbmRhbnRJRCwgYW5jZXN0b3JJRC5sZW5ndGgpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHBhcmVudCBJRCBvZiB0aGUgc3VwcGxpZWQgUmVhY3QgRE9NIElELCBgaWRgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiBhIGNvbXBvbmVudC5cbiAqIEByZXR1cm4ge3N0cmluZ30gSUQgb2YgdGhlIHBhcmVudCwgb3IgYW4gZW1wdHkgc3RyaW5nLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0UGFyZW50SUQoaWQpIHtcbiAgcmV0dXJuIGlkID8gaWQuc3Vic3RyKDAsIGlkLmxhc3RJbmRleE9mKFNFUEFSQVRPUikpIDogJyc7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbmV4dCBET00gSUQgb24gdGhlIHRyZWUgcGF0aCBmcm9tIHRoZSBzdXBwbGllZCBgYW5jZXN0b3JJRGAgdG8gdGhlXG4gKiBzdXBwbGllZCBgZGVzdGluYXRpb25JRGAuIElmIHRoZXkgYXJlIGVxdWFsLCB0aGUgSUQgaXMgcmV0dXJuZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGFuY2VzdG9ySUQgSUQgb2YgYW4gYW5jZXN0b3Igbm9kZSBvZiBgZGVzdGluYXRpb25JRGAuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb25JRCBJRCBvZiB0aGUgZGVzdGluYXRpb24gbm9kZS5cbiAqIEByZXR1cm4ge3N0cmluZ30gTmV4dCBJRCBvbiB0aGUgcGF0aCBmcm9tIGBhbmNlc3RvcklEYCB0byBgZGVzdGluYXRpb25JRGAuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXROZXh0RGVzY2VuZGFudElEKGFuY2VzdG9ySUQsIGRlc3RpbmF0aW9uSUQpIHtcbiAgIShpc1ZhbGlkSUQoYW5jZXN0b3JJRCkgJiYgaXNWYWxpZElEKGRlc3RpbmF0aW9uSUQpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdnZXROZXh0RGVzY2VuZGFudElEKCVzLCAlcyk6IFJlY2VpdmVkIGFuIGludmFsaWQgUmVhY3QgRE9NIElELicsIGFuY2VzdG9ySUQsIGRlc3RpbmF0aW9uSUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgIWlzQW5jZXN0b3JJRE9mKGFuY2VzdG9ySUQsIGRlc3RpbmF0aW9uSUQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2dldE5leHREZXNjZW5kYW50SUQoLi4uKTogUmVhY3QgaGFzIG1hZGUgYW4gaW52YWxpZCBhc3N1bXB0aW9uIGFib3V0ICcgKyAndGhlIERPTSBoaWVyYXJjaHkuIEV4cGVjdGVkIGAlc2AgdG8gYmUgYW4gYW5jZXN0b3Igb2YgYCVzYC4nLCBhbmNlc3RvcklELCBkZXN0aW5hdGlvbklEKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGlmIChhbmNlc3RvcklEID09PSBkZXN0aW5hdGlvbklEKSB7XG4gICAgcmV0dXJuIGFuY2VzdG9ySUQ7XG4gIH1cbiAgLy8gU2tpcCBvdmVyIHRoZSBhbmNlc3RvciBhbmQgdGhlIGltbWVkaWF0ZSBzZXBhcmF0b3IuIFRyYXZlcnNlIHVudGlsIHdlIGhpdFxuICAvLyBhbm90aGVyIHNlcGFyYXRvciBvciB3ZSByZWFjaCB0aGUgZW5kIG9mIGBkZXN0aW5hdGlvbklEYC5cbiAgdmFyIHN0YXJ0ID0gYW5jZXN0b3JJRC5sZW5ndGggKyBTRVBBUkFUT1JfTEVOR1RIO1xuICB2YXIgaTtcbiAgZm9yIChpID0gc3RhcnQ7IGkgPCBkZXN0aW5hdGlvbklELmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGlzQm91bmRhcnkoZGVzdGluYXRpb25JRCwgaSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZGVzdGluYXRpb25JRC5zdWJzdHIoMCwgaSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbmVhcmVzdCBjb21tb24gYW5jZXN0b3IgSUQgb2YgdHdvIElEcy5cbiAqXG4gKiBVc2luZyB0aGlzIElEIHNjaGVtZSwgdGhlIG5lYXJlc3QgY29tbW9uIGFuY2VzdG9yIElEIGlzIHRoZSBsb25nZXN0IGNvbW1vblxuICogcHJlZml4IG9mIHRoZSB0d28gSURzIHRoYXQgaW1tZWRpYXRlbHkgcHJlY2VkZWQgYSBcIm1hcmtlclwiIGluIGJvdGggc3RyaW5ncy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gb25lSURcbiAqIEBwYXJhbSB7c3RyaW5nfSB0d29JRFxuICogQHJldHVybiB7c3RyaW5nfSBOZWFyZXN0IGNvbW1vbiBhbmNlc3RvciBJRCwgb3IgdGhlIGVtcHR5IHN0cmluZyBpZiBub25lLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0Rmlyc3RDb21tb25BbmNlc3RvcklEKG9uZUlELCB0d29JRCkge1xuICB2YXIgbWluTGVuZ3RoID0gTWF0aC5taW4ob25lSUQubGVuZ3RoLCB0d29JRC5sZW5ndGgpO1xuICBpZiAobWluTGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHZhciBsYXN0Q29tbW9uTWFya2VySW5kZXggPSAwO1xuICAvLyBVc2UgYDw9YCB0byB0cmF2ZXJzZSB1bnRpbCB0aGUgXCJFT0xcIiBvZiB0aGUgc2hvcnRlciBzdHJpbmcuXG4gIGZvciAodmFyIGkgPSAwOyBpIDw9IG1pbkxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGlzQm91bmRhcnkob25lSUQsIGkpICYmIGlzQm91bmRhcnkodHdvSUQsIGkpKSB7XG4gICAgICBsYXN0Q29tbW9uTWFya2VySW5kZXggPSBpO1xuICAgIH0gZWxzZSBpZiAob25lSUQuY2hhckF0KGkpICE9PSB0d29JRC5jaGFyQXQoaSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICB2YXIgbG9uZ2VzdENvbW1vbklEID0gb25lSUQuc3Vic3RyKDAsIGxhc3RDb21tb25NYXJrZXJJbmRleCk7XG4gICFpc1ZhbGlkSUQobG9uZ2VzdENvbW1vbklEKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdnZXRGaXJzdENvbW1vbkFuY2VzdG9ySUQoJXMsICVzKTogRXhwZWN0ZWQgYSB2YWxpZCBSZWFjdCBET00gSUQ6ICVzJywgb25lSUQsIHR3b0lELCBsb25nZXN0Q29tbW9uSUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgcmV0dXJuIGxvbmdlc3RDb21tb25JRDtcbn1cblxuLyoqXG4gKiBUcmF2ZXJzZXMgdGhlIHBhcmVudCBwYXRoIGJldHdlZW4gdHdvIElEcyAoZWl0aGVyIHVwIG9yIGRvd24pLiBUaGUgSURzIG11c3RcbiAqIG5vdCBiZSB0aGUgc2FtZSwgYW5kIHRoZXJlIG11c3QgZXhpc3QgYSBwYXJlbnQgcGF0aCBiZXR3ZWVuIHRoZW0uIElmIHRoZVxuICogY2FsbGJhY2sgcmV0dXJucyBgZmFsc2VgLCB0cmF2ZXJzYWwgaXMgc3RvcHBlZC5cbiAqXG4gKiBAcGFyYW0gez9zdHJpbmd9IHN0YXJ0IElEIGF0IHdoaWNoIHRvIHN0YXJ0IHRyYXZlcnNhbC5cbiAqIEBwYXJhbSB7P3N0cmluZ30gc3RvcCBJRCBhdCB3aGljaCB0byBlbmQgdHJhdmVyc2FsLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgQ2FsbGJhY2sgdG8gaW52b2tlIGVhY2ggSUQgd2l0aC5cbiAqIEBwYXJhbSB7Kn0gYXJnIEFyZ3VtZW50IHRvIGludm9rZSB0aGUgY2FsbGJhY2sgd2l0aC5cbiAqIEBwYXJhbSB7P2Jvb2xlYW59IHNraXBGaXJzdCBXaGV0aGVyIG9yIG5vdCB0byBza2lwIHRoZSBmaXJzdCBub2RlLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gc2tpcExhc3QgV2hldGhlciBvciBub3QgdG8gc2tpcCB0aGUgbGFzdCBub2RlLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VQYXJlbnRQYXRoKHN0YXJ0LCBzdG9wLCBjYiwgYXJnLCBza2lwRmlyc3QsIHNraXBMYXN0KSB7XG4gIHN0YXJ0ID0gc3RhcnQgfHwgJyc7XG4gIHN0b3AgPSBzdG9wIHx8ICcnO1xuICAhKHN0YXJ0ICE9PSBzdG9wKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0cmF2ZXJzZVBhcmVudFBhdGgoLi4uKTogQ2Fubm90IHRyYXZlcnNlIGZyb20gYW5kIHRvIHRoZSBzYW1lIElELCBgJXNgLicsIHN0YXJ0KSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHZhciB0cmF2ZXJzZVVwID0gaXNBbmNlc3RvcklET2Yoc3RvcCwgc3RhcnQpO1xuICAhKHRyYXZlcnNlVXAgfHwgaXNBbmNlc3RvcklET2Yoc3RhcnQsIHN0b3ApKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0cmF2ZXJzZVBhcmVudFBhdGgoJXMsICVzLCAuLi4pOiBDYW5ub3QgdHJhdmVyc2UgZnJvbSB0d28gSURzIHRoYXQgZG8gJyArICdub3QgaGF2ZSBhIHBhcmVudCBwYXRoLicsIHN0YXJ0LCBzdG9wKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIC8vIFRyYXZlcnNlIGZyb20gYHN0YXJ0YCB0byBgc3RvcGAgb25lIGRlcHRoIGF0IGEgdGltZS5cbiAgdmFyIGRlcHRoID0gMDtcbiAgdmFyIHRyYXZlcnNlID0gdHJhdmVyc2VVcCA/IGdldFBhcmVudElEIDogZ2V0TmV4dERlc2NlbmRhbnRJRDtcbiAgZm9yICh2YXIgaWQgPSBzdGFydDs7IC8qIHVudGlsIGJyZWFrICovaWQgPSB0cmF2ZXJzZShpZCwgc3RvcCkpIHtcbiAgICB2YXIgcmV0O1xuICAgIGlmICgoIXNraXBGaXJzdCB8fCBpZCAhPT0gc3RhcnQpICYmICghc2tpcExhc3QgfHwgaWQgIT09IHN0b3ApKSB7XG4gICAgICByZXQgPSBjYihpZCwgdHJhdmVyc2VVcCwgYXJnKTtcbiAgICB9XG4gICAgaWYgKHJldCA9PT0gZmFsc2UgfHwgaWQgPT09IHN0b3ApIHtcbiAgICAgIC8vIE9ubHkgYnJlYWsgLy9hZnRlci8vIHZpc2l0aW5nIGBzdG9wYC5cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAhKGRlcHRoKysgPCBNQVhfVFJFRV9ERVBUSCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndHJhdmVyc2VQYXJlbnRQYXRoKCVzLCAlcywgLi4uKTogRGV0ZWN0ZWQgYW4gaW5maW5pdGUgbG9vcCB3aGlsZSAnICsgJ3RyYXZlcnNpbmcgdGhlIFJlYWN0IERPTSBJRCB0cmVlLiBUaGlzIG1heSBiZSBkdWUgdG8gbWFsZm9ybWVkIElEczogJXMnLCBzdGFydCwgc3RvcCwgaWQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIE1hbmFnZXMgdGhlIElEcyBhc3NpZ25lZCB0byBET00gcmVwcmVzZW50YXRpb25zIG9mIFJlYWN0IGNvbXBvbmVudHMuIFRoaXNcbiAqIHVzZXMgYSBzcGVjaWZpYyBzY2hlbWUgaW4gb3JkZXIgdG8gdHJhdmVyc2UgdGhlIERPTSBlZmZpY2llbnRseSAoZS5nLiBpblxuICogb3JkZXIgdG8gc2ltdWxhdGUgZXZlbnRzKS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0ge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgUmVhY3Qgcm9vdCBJRFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IEEgUmVhY3Qgcm9vdCBJRC5cbiAgICovXG4gIGNyZWF0ZVJlYWN0Um9vdElEOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdldFJlYWN0Um9vdElEU3RyaW5nKFJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4KCkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgUmVhY3QgSUQgYnkgam9pbmluZyBhIHJvb3QgSUQgd2l0aCBhIG5hbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgUm9vdCBJRCBvZiBhIHBhcmVudCBjb21wb25lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEEgY29tcG9uZW50J3MgbmFtZSAoYXMgZmxhdHRlbmVkIGNoaWxkcmVuKS5cbiAgICogQHJldHVybiB7c3RyaW5nfSBBIFJlYWN0IElELlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNyZWF0ZVJlYWN0SUQ6IGZ1bmN0aW9uIChyb290SUQsIG5hbWUpIHtcbiAgICByZXR1cm4gcm9vdElEICsgbmFtZTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgRE9NIElEIG9mIHRoZSBSZWFjdCBjb21wb25lbnQgdGhhdCBpcyB0aGUgcm9vdCBvZiB0aGUgdHJlZSB0aGF0XG4gICAqIGNvbnRhaW5zIHRoZSBSZWFjdCBjb21wb25lbnQgd2l0aCB0aGUgc3VwcGxpZWQgRE9NIElELlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgRE9NIElEIG9mIGEgUmVhY3QgY29tcG9uZW50LlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBET00gSUQgb2YgdGhlIFJlYWN0IGNvbXBvbmVudCB0aGF0IGlzIHRoZSByb290LlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldFJlYWN0Um9vdElERnJvbU5vZGVJRDogZnVuY3Rpb24gKGlkKSB7XG4gICAgaWYgKGlkICYmIGlkLmNoYXJBdCgwKSA9PT0gU0VQQVJBVE9SICYmIGlkLmxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBpbmRleCA9IGlkLmluZGV4T2YoU0VQQVJBVE9SLCAxKTtcbiAgICAgIHJldHVybiBpbmRleCA+IC0xID8gaWQuc3Vic3RyKDAsIGluZGV4KSA6IGlkO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogVHJhdmVyc2VzIHRoZSBJRCBoaWVyYXJjaHkgYW5kIGludm9rZXMgdGhlIHN1cHBsaWVkIGBjYmAgb24gYW55IElEcyB0aGF0XG4gICAqIHNob3VsZCB3b3VsZCByZWNlaXZlIGEgYG1vdXNlRW50ZXJgIG9yIGBtb3VzZUxlYXZlYCBldmVudC5cbiAgICpcbiAgICogTk9URTogRG9lcyBub3QgaW52b2tlIHRoZSBjYWxsYmFjayBvbiB0aGUgbmVhcmVzdCBjb21tb24gYW5jZXN0b3IgYmVjYXVzZVxuICAgKiBub3RoaW5nIFwiZW50ZXJlZFwiIG9yIFwibGVmdFwiIHRoYXQgZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxlYXZlSUQgSUQgYmVpbmcgbGVmdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVudGVySUQgSUQgYmVpbmcgZW50ZXJlZC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgQ2FsbGJhY2sgdG8gaW52b2tlIG9uIGVhY2ggZW50ZXJlZC9sZWZ0IElELlxuICAgKiBAcGFyYW0geyp9IHVwQXJnIEFyZ3VtZW50IHRvIGludm9rZSB0aGUgY2FsbGJhY2sgd2l0aCBvbiBsZWZ0IElEcy5cbiAgICogQHBhcmFtIHsqfSBkb3duQXJnIEFyZ3VtZW50IHRvIGludm9rZSB0aGUgY2FsbGJhY2sgd2l0aCBvbiBlbnRlcmVkIElEcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICB0cmF2ZXJzZUVudGVyTGVhdmU6IGZ1bmN0aW9uIChsZWF2ZUlELCBlbnRlcklELCBjYiwgdXBBcmcsIGRvd25BcmcpIHtcbiAgICB2YXIgYW5jZXN0b3JJRCA9IGdldEZpcnN0Q29tbW9uQW5jZXN0b3JJRChsZWF2ZUlELCBlbnRlcklEKTtcbiAgICBpZiAoYW5jZXN0b3JJRCAhPT0gbGVhdmVJRCkge1xuICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKGxlYXZlSUQsIGFuY2VzdG9ySUQsIGNiLCB1cEFyZywgZmFsc2UsIHRydWUpO1xuICAgIH1cbiAgICBpZiAoYW5jZXN0b3JJRCAhPT0gZW50ZXJJRCkge1xuICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKGFuY2VzdG9ySUQsIGVudGVySUQsIGNiLCBkb3duQXJnLCB0cnVlLCBmYWxzZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTaW11bGF0ZXMgdGhlIHRyYXZlcnNhbCBvZiBhIHR3by1waGFzZSwgY2FwdHVyZS9idWJibGUgZXZlbnQgZGlzcGF0Y2guXG4gICAqXG4gICAqIE5PVEU6IFRoaXMgdHJhdmVyc2FsIGhhcHBlbnMgb24gSURzIHdpdGhvdXQgdG91Y2hpbmcgdGhlIERPTS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldElEIElEIG9mIHRoZSB0YXJnZXQgbm9kZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgQ2FsbGJhY2sgdG8gaW52b2tlLlxuICAgKiBAcGFyYW0geyp9IGFyZyBBcmd1bWVudCB0byBpbnZva2UgdGhlIGNhbGxiYWNrIHdpdGguXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdHJhdmVyc2VUd29QaGFzZTogZnVuY3Rpb24gKHRhcmdldElELCBjYiwgYXJnKSB7XG4gICAgaWYgKHRhcmdldElEKSB7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgoJycsIHRhcmdldElELCBjYiwgYXJnLCB0cnVlLCBmYWxzZSk7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgodGFyZ2V0SUQsICcnLCBjYiwgYXJnLCBmYWxzZSwgdHJ1ZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTYW1lIGFzIGB0cmF2ZXJzZVR3b1BoYXNlYCBidXQgc2tpcHMgdGhlIGB0YXJnZXRJRGAuXG4gICAqL1xuICB0cmF2ZXJzZVR3b1BoYXNlU2tpcFRhcmdldDogZnVuY3Rpb24gKHRhcmdldElELCBjYiwgYXJnKSB7XG4gICAgaWYgKHRhcmdldElEKSB7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgoJycsIHRhcmdldElELCBjYiwgYXJnLCB0cnVlLCB0cnVlKTtcbiAgICAgIHRyYXZlcnNlUGFyZW50UGF0aCh0YXJnZXRJRCwgJycsIGNiLCBhcmcsIHRydWUsIHRydWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVHJhdmVyc2UgYSBub2RlIElELCBjYWxsaW5nIHRoZSBzdXBwbGllZCBgY2JgIGZvciBlYWNoIGFuY2VzdG9yIElELiBGb3JcbiAgICogZXhhbXBsZSwgcGFzc2luZyBgLjAuJHJvdy0wLjFgIHdvdWxkIHJlc3VsdCBpbiBgY2JgIGdldHRpbmcgY2FsbGVkXG4gICAqIHdpdGggYC4wYCwgYC4wLiRyb3ctMGAsIGFuZCBgLjAuJHJvdy0wLjFgLlxuICAgKlxuICAgKiBOT1RFOiBUaGlzIHRyYXZlcnNhbCBoYXBwZW5zIG9uIElEcyB3aXRob3V0IHRvdWNoaW5nIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRJRCBJRCBvZiB0aGUgdGFyZ2V0IG5vZGUuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIENhbGxiYWNrIHRvIGludm9rZS5cbiAgICogQHBhcmFtIHsqfSBhcmcgQXJndW1lbnQgdG8gaW52b2tlIHRoZSBjYWxsYmFjayB3aXRoLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHRyYXZlcnNlQW5jZXN0b3JzOiBmdW5jdGlvbiAodGFyZ2V0SUQsIGNiLCBhcmcpIHtcbiAgICB0cmF2ZXJzZVBhcmVudFBhdGgoJycsIHRhcmdldElELCBjYiwgYXJnLCB0cnVlLCBmYWxzZSk7XG4gIH0sXG5cbiAgZ2V0Rmlyc3RDb21tb25BbmNlc3RvcklEOiBnZXRGaXJzdENvbW1vbkFuY2VzdG9ySUQsXG5cbiAgLyoqXG4gICAqIEV4cG9zZWQgZm9yIHVuaXQgdGVzdGluZy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXROZXh0RGVzY2VuZGFudElEOiBnZXROZXh0RGVzY2VuZGFudElELFxuXG4gIGlzQW5jZXN0b3JJRE9mOiBpc0FuY2VzdG9ySURPZixcblxuICBTRVBBUkFUT1I6IFNFUEFSQVRPUlxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEluc3RhbmNlTWFwXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIGBSZWFjdEluc3RhbmNlTWFwYCBtYWludGFpbnMgYSBtYXBwaW5nIGZyb20gYSBwdWJsaWMgZmFjaW5nIHN0YXRlZnVsXG4gKiBpbnN0YW5jZSAoa2V5KSBhbmQgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uICh2YWx1ZSkuIFRoaXMgYWxsb3dzIHB1YmxpY1xuICogbWV0aG9kcyB0byBhY2NlcHQgdGhlIHVzZXIgZmFjaW5nIGluc3RhbmNlIGFzIGFuIGFyZ3VtZW50IGFuZCBtYXAgdGhlbSBiYWNrXG4gKiB0byBpbnRlcm5hbCBtZXRob2RzLlxuICovXG5cbi8vIFRPRE86IFJlcGxhY2UgdGhpcyB3aXRoIEVTNjogdmFyIFJlYWN0SW5zdGFuY2VNYXAgPSBuZXcgTWFwKCk7XG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHtcblxuICAvKipcbiAgICogVGhpcyBBUEkgc2hvdWxkIGJlIGNhbGxlZCBgZGVsZXRlYCBidXQgd2UnZCBoYXZlIHRvIG1ha2Ugc3VyZSB0byBhbHdheXNcbiAgICogdHJhbnNmb3JtIHRoZXNlIHRvIHN0cmluZ3MgZm9yIElFIHN1cHBvcnQuIFdoZW4gdGhpcyB0cmFuc2Zvcm0gaXMgZnVsbHlcbiAgICogc3VwcG9ydGVkIHdlIGNhbiByZW5hbWUgaXQuXG4gICAqL1xuICByZW1vdmU6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBrZXkuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSA9IHVuZGVmaW5lZDtcbiAgfSxcblxuICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4ga2V5Ll9yZWFjdEludGVybmFsSW5zdGFuY2U7XG4gIH0sXG5cbiAgaGFzOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIGtleS5fcmVhY3RJbnRlcm5hbEluc3RhbmNlICE9PSB1bmRlZmluZWQ7XG4gIH0sXG5cbiAgc2V0OiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIGtleS5fcmVhY3RJbnRlcm5hbEluc3RhbmNlID0gdmFsdWU7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEluc3RhbmNlTWFwOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdElzb21vcnBoaWNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdENoaWxkcmVuID0gcmVxdWlyZSgnLi9SZWFjdENoaWxkcmVuJyk7XG52YXIgUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50Jyk7XG52YXIgUmVhY3RDbGFzcyA9IHJlcXVpcmUoJy4vUmVhY3RDbGFzcycpO1xudmFyIFJlYWN0RE9NRmFjdG9yaWVzID0gcmVxdWlyZSgnLi9SZWFjdERPTUZhY3RvcmllcycpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RFbGVtZW50VmFsaWRhdG9yID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnRWYWxpZGF0b3InKTtcbnZhciBSZWFjdFByb3BUeXBlcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZXMnKTtcbnZhciBSZWFjdFZlcnNpb24gPSByZXF1aXJlKCcuL1JlYWN0VmVyc2lvbicpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgb25seUNoaWxkID0gcmVxdWlyZSgnLi9vbmx5Q2hpbGQnKTtcblxudmFyIGNyZWF0ZUVsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudDtcbnZhciBjcmVhdGVGYWN0b3J5ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUZhY3Rvcnk7XG52YXIgY2xvbmVFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNsb25lRWxlbWVudDtcblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgY3JlYXRlRWxlbWVudCA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jcmVhdGVFbGVtZW50O1xuICBjcmVhdGVGYWN0b3J5ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNyZWF0ZUZhY3Rvcnk7XG4gIGNsb25lRWxlbWVudCA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jbG9uZUVsZW1lbnQ7XG59XG5cbnZhciBSZWFjdCA9IHtcblxuICAvLyBNb2Rlcm5cblxuICBDaGlsZHJlbjoge1xuICAgIG1hcDogUmVhY3RDaGlsZHJlbi5tYXAsXG4gICAgZm9yRWFjaDogUmVhY3RDaGlsZHJlbi5mb3JFYWNoLFxuICAgIGNvdW50OiBSZWFjdENoaWxkcmVuLmNvdW50LFxuICAgIHRvQXJyYXk6IFJlYWN0Q2hpbGRyZW4udG9BcnJheSxcbiAgICBvbmx5OiBvbmx5Q2hpbGRcbiAgfSxcblxuICBDb21wb25lbnQ6IFJlYWN0Q29tcG9uZW50LFxuXG4gIGNyZWF0ZUVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnQsXG4gIGNsb25lRWxlbWVudDogY2xvbmVFbGVtZW50LFxuICBpc1ZhbGlkRWxlbWVudDogUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50LFxuXG4gIC8vIENsYXNzaWNcblxuICBQcm9wVHlwZXM6IFJlYWN0UHJvcFR5cGVzLFxuICBjcmVhdGVDbGFzczogUmVhY3RDbGFzcy5jcmVhdGVDbGFzcyxcbiAgY3JlYXRlRmFjdG9yeTogY3JlYXRlRmFjdG9yeSxcbiAgY3JlYXRlTWl4aW46IGZ1bmN0aW9uIChtaXhpbikge1xuICAgIC8vIEN1cnJlbnRseSBhIG5vb3AuIFdpbGwgYmUgdXNlZCB0byB2YWxpZGF0ZSBhbmQgdHJhY2UgbWl4aW5zLlxuICAgIHJldHVybiBtaXhpbjtcbiAgfSxcblxuICAvLyBUaGlzIGxvb2tzIERPTSBzcGVjaWZpYyBidXQgdGhlc2UgYXJlIGFjdHVhbGx5IGlzb21vcnBoaWMgaGVscGVyc1xuICAvLyBzaW5jZSB0aGV5IGFyZSBqdXN0IGdlbmVyYXRpbmcgRE9NIHN0cmluZ3MuXG4gIERPTTogUmVhY3RET01GYWN0b3JpZXMsXG5cbiAgdmVyc2lvbjogUmVhY3RWZXJzaW9uLFxuXG4gIC8vIEhvb2sgZm9yIEpTWCBzcHJlYWQsIGRvbid0IHVzZSB0aGlzIGZvciBhbnl0aGluZyBlbHNlLlxuICBfX3NwcmVhZDogYXNzaWduXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE1hcmt1cENoZWNrc3VtXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWRsZXIzMiA9IHJlcXVpcmUoJy4vYWRsZXIzMicpO1xuXG52YXIgVEFHX0VORCA9IC9cXC8/Pi87XG5cbnZhciBSZWFjdE1hcmt1cENoZWNrc3VtID0ge1xuICBDSEVDS1NVTV9BVFRSX05BTUU6ICdkYXRhLXJlYWN0LWNoZWNrc3VtJyxcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBNYXJrdXAgc3RyaW5nXG4gICAqIEByZXR1cm4ge3N0cmluZ30gTWFya3VwIHN0cmluZyB3aXRoIGNoZWNrc3VtIGF0dHJpYnV0ZSBhdHRhY2hlZFxuICAgKi9cbiAgYWRkQ2hlY2tzdW1Ub01hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCkge1xuICAgIHZhciBjaGVja3N1bSA9IGFkbGVyMzIobWFya3VwKTtcblxuICAgIC8vIEFkZCBjaGVja3N1bSAoaGFuZGxlIGJvdGggcGFyZW50IHRhZ3MgYW5kIHNlbGYtY2xvc2luZyB0YWdzKVxuICAgIHJldHVybiBtYXJrdXAucmVwbGFjZShUQUdfRU5ELCAnICcgKyBSZWFjdE1hcmt1cENoZWNrc3VtLkNIRUNLU1VNX0FUVFJfTkFNRSArICc9XCInICsgY2hlY2tzdW0gKyAnXCIkJicpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIHRvIHVzZVxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgcm9vdCBSZWFjdCBlbGVtZW50XG4gICAqIEByZXR1cm5zIHtib29sZWFufSB3aGV0aGVyIG9yIG5vdCB0aGUgbWFya3VwIGlzIHRoZSBzYW1lXG4gICAqL1xuICBjYW5SZXVzZU1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCwgZWxlbWVudCkge1xuICAgIHZhciBleGlzdGluZ0NoZWNrc3VtID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoUmVhY3RNYXJrdXBDaGVja3N1bS5DSEVDS1NVTV9BVFRSX05BTUUpO1xuICAgIGV4aXN0aW5nQ2hlY2tzdW0gPSBleGlzdGluZ0NoZWNrc3VtICYmIHBhcnNlSW50KGV4aXN0aW5nQ2hlY2tzdW0sIDEwKTtcbiAgICB2YXIgbWFya3VwQ2hlY2tzdW0gPSBhZGxlcjMyKG1hcmt1cCk7XG4gICAgcmV0dXJuIG1hcmt1cENoZWNrc3VtID09PSBleGlzdGluZ0NoZWNrc3VtO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0TWFya3VwQ2hlY2tzdW07IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0TW91bnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBET01Qcm9wZXJ0eSA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHknKTtcbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlcicpO1xudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0gcmVxdWlyZSgnLi9SZWFjdERPTUZlYXR1cmVGbGFncycpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5ID0gcmVxdWlyZSgnLi9SZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnknKTtcbnZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZUhhbmRsZXMnKTtcbnZhciBSZWFjdEluc3RhbmNlTWFwID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlTWFwJyk7XG52YXIgUmVhY3RNYXJrdXBDaGVja3N1bSA9IHJlcXVpcmUoJy4vUmVhY3RNYXJrdXBDaGVja3N1bScpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcbnZhciBSZWFjdFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZVF1ZXVlJyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5T2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlPYmplY3QnKTtcbnZhciBjb250YWluc05vZGUgPSByZXF1aXJlKCdmYmpzL2xpYi9jb250YWluc05vZGUnKTtcbnZhciBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgc2V0SW5uZXJIVE1MID0gcmVxdWlyZSgnLi9zZXRJbm5lckhUTUwnKTtcbnZhciBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciB2YWxpZGF0ZURPTU5lc3RpbmcgPSByZXF1aXJlKCcuL3ZhbGlkYXRlRE9NTmVzdGluZycpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBBVFRSX05BTUUgPSBET01Qcm9wZXJ0eS5JRF9BVFRSSUJVVEVfTkFNRTtcbnZhciBub2RlQ2FjaGUgPSB7fTtcblxudmFyIEVMRU1FTlRfTk9ERV9UWVBFID0gMTtcbnZhciBET0NfTk9ERV9UWVBFID0gOTtcbnZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUgPSAxMTtcblxudmFyIG93bmVyRG9jdW1lbnRDb250ZXh0S2V5ID0gJ19fUmVhY3RNb3VudF9vd25lckRvY3VtZW50JCcgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKTtcblxuLyoqIE1hcHBpbmcgZnJvbSByZWFjdFJvb3RJRCB0byBSZWFjdCBjb21wb25lbnQgaW5zdGFuY2UuICovXG52YXIgaW5zdGFuY2VzQnlSZWFjdFJvb3RJRCA9IHt9O1xuXG4vKiogTWFwcGluZyBmcm9tIHJlYWN0Um9vdElEIHRvIGBjb250YWluZXJgIG5vZGVzLiAqL1xudmFyIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEID0ge307XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8qKiBfX0RFVl9fLW9ubHkgbWFwcGluZyBmcm9tIHJlYWN0Um9vdElEIHRvIHJvb3QgZWxlbWVudHMuICovXG4gIHZhciByb290RWxlbWVudHNCeVJlYWN0Um9vdElEID0ge307XG59XG5cbi8vIFVzZWQgdG8gc3RvcmUgYnJlYWR0aC1maXJzdCBzZWFyY2ggc3RhdGUgaW4gZmluZENvbXBvbmVudFJvb3QuXG52YXIgZmluZENvbXBvbmVudFJvb3RSZXVzYWJsZUFycmF5ID0gW107XG5cbi8qKlxuICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBjaGFyYWN0ZXJcbiAqIHRoYXQncyBub3QgY29tbW9uIGJldHdlZW4gdGhlIHR3byBnaXZlbiBzdHJpbmdzLlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIGluZGV4IG9mIHRoZSBjaGFyYWN0ZXIgd2hlcmUgdGhlIHN0cmluZ3MgZGl2ZXJnZVxuICovXG5mdW5jdGlvbiBmaXJzdERpZmZlcmVuY2VJbmRleChzdHJpbmcxLCBzdHJpbmcyKSB7XG4gIHZhciBtaW5MZW4gPSBNYXRoLm1pbihzdHJpbmcxLmxlbmd0aCwgc3RyaW5nMi5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG1pbkxlbjsgaSsrKSB7XG4gICAgaWYgKHN0cmluZzEuY2hhckF0KGkpICE9PSBzdHJpbmcyLmNoYXJBdChpKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHJpbmcxLmxlbmd0aCA9PT0gc3RyaW5nMi5sZW5ndGggPyAtMSA6IG1pbkxlbjtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NRG9jdW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCB0aGF0IG1heSBjb250YWluXG4gKiBhIFJlYWN0IGNvbXBvbmVudFxuICogQHJldHVybiB7Pyp9IERPTSBlbGVtZW50IHRoYXQgbWF5IGhhdmUgdGhlIHJlYWN0Um9vdCBJRCwgb3IgbnVsbC5cbiAqL1xuZnVuY3Rpb24gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcikge1xuICBpZiAoIWNvbnRhaW5lcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DX05PREVfVFlQRSkge1xuICAgIHJldHVybiBjb250YWluZXIuZG9jdW1lbnRFbGVtZW50O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjb250YWluZXIuZmlyc3RDaGlsZDtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRoYXQgbWF5IGNvbnRhaW4gYSBSZWFjdCBjb21wb25lbnQuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBBIFwicmVhY3RSb290XCIgSUQsIGlmIGEgUmVhY3QgY29tcG9uZW50IGlzIHJlbmRlcmVkLlxuICovXG5mdW5jdGlvbiBnZXRSZWFjdFJvb3RJRChjb250YWluZXIpIHtcbiAgdmFyIHJvb3RFbGVtZW50ID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gIHJldHVybiByb290RWxlbWVudCAmJiBSZWFjdE1vdW50LmdldElEKHJvb3RFbGVtZW50KTtcbn1cblxuLyoqXG4gKiBBY2Nlc3Npbmcgbm9kZVtBVFRSX05BTUVdIG9yIGNhbGxpbmcgZ2V0QXR0cmlidXRlKEFUVFJfTkFNRSkgb24gYSBmb3JtXG4gKiBlbGVtZW50IGNhbiByZXR1cm4gaXRzIGNvbnRyb2wgd2hvc2UgbmFtZSBvciBJRCBlcXVhbHMgQVRUUl9OQU1FLiBBbGxcbiAqIERPTSBub2RlcyBzdXBwb3J0IGBnZXRBdHRyaWJ1dGVOb2RlYCBidXQgdGhpcyBjYW4gYWxzbyBnZXQgY2FsbGVkIG9uXG4gKiBvdGhlciBvYmplY3RzIHNvIGp1c3QgcmV0dXJuICcnIGlmIHdlJ3JlIGdpdmVuIHNvbWV0aGluZyBvdGhlciB0aGFuIGFcbiAqIERPTSBub2RlIChzdWNoIGFzIHdpbmRvdykuXG4gKlxuICogQHBhcmFtIHs/RE9NRWxlbWVudHxET01XaW5kb3d8RE9NRG9jdW1lbnR8RE9NVGV4dE5vZGV9IG5vZGUgRE9NIG5vZGUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IElEIG9mIHRoZSBzdXBwbGllZCBgZG9tTm9kZWAuXG4gKi9cbmZ1bmN0aW9uIGdldElEKG5vZGUpIHtcbiAgdmFyIGlkID0gaW50ZXJuYWxHZXRJRChub2RlKTtcbiAgaWYgKGlkKSB7XG4gICAgaWYgKG5vZGVDYWNoZS5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICAgIHZhciBjYWNoZWQgPSBub2RlQ2FjaGVbaWRdO1xuICAgICAgaWYgKGNhY2hlZCAhPT0gbm9kZSkge1xuICAgICAgICAhIWlzVmFsaWQoY2FjaGVkLCBpZCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RNb3VudDogVHdvIHZhbGlkIGJ1dCB1bmVxdWFsIG5vZGVzIHdpdGggdGhlIHNhbWUgYCVzYDogJXMnLCBBVFRSX05BTUUsIGlkKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgbm9kZUNhY2hlW2lkXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGVDYWNoZVtpZF0gPSBub2RlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpZDtcbn1cblxuZnVuY3Rpb24gaW50ZXJuYWxHZXRJRChub2RlKSB7XG4gIC8vIElmIG5vZGUgaXMgc29tZXRoaW5nIGxpa2UgYSB3aW5kb3csIGRvY3VtZW50LCBvciB0ZXh0IG5vZGUsIG5vbmUgb2ZcbiAgLy8gd2hpY2ggc3VwcG9ydCBhdHRyaWJ1dGVzIG9yIGEgLmdldEF0dHJpYnV0ZSBtZXRob2QsIGdyYWNlZnVsbHkgcmV0dXJuXG4gIC8vIHRoZSBlbXB0eSBzdHJpbmcsIGFzIGlmIHRoZSBhdHRyaWJ1dGUgd2VyZSBtaXNzaW5nLlxuICByZXR1cm4gbm9kZSAmJiBub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZShBVFRSX05BTUUpIHx8ICcnO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIFJlYWN0LXNwZWNpZmljIElEIG9mIHRoZSBnaXZlbiBub2RlLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZSBUaGUgRE9NIG5vZGUgd2hvc2UgSUQgd2lsbCBiZSBzZXQuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIHZhbHVlIG9mIHRoZSBJRCBhdHRyaWJ1dGUuXG4gKi9cbmZ1bmN0aW9uIHNldElEKG5vZGUsIGlkKSB7XG4gIHZhciBvbGRJRCA9IGludGVybmFsR2V0SUQobm9kZSk7XG4gIGlmIChvbGRJRCAhPT0gaWQpIHtcbiAgICBkZWxldGUgbm9kZUNhY2hlW29sZElEXTtcbiAgfVxuICBub2RlLnNldEF0dHJpYnV0ZShBVFRSX05BTUUsIGlkKTtcbiAgbm9kZUNhY2hlW2lkXSA9IG5vZGU7XG59XG5cbi8qKlxuICogRmluZHMgdGhlIG5vZGUgd2l0aCB0aGUgc3VwcGxpZWQgUmVhY3QtZ2VuZXJhdGVkIERPTSBJRC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQSBSZWFjdC1nZW5lcmF0ZWQgRE9NIElELlxuICogQHJldHVybiB7RE9NRWxlbWVudH0gRE9NIG5vZGUgd2l0aCB0aGUgc3VwcGxlZCBgaWRgLlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGdldE5vZGUoaWQpIHtcbiAgaWYgKCFub2RlQ2FjaGUuaGFzT3duUHJvcGVydHkoaWQpIHx8ICFpc1ZhbGlkKG5vZGVDYWNoZVtpZF0sIGlkKSkge1xuICAgIG5vZGVDYWNoZVtpZF0gPSBSZWFjdE1vdW50LmZpbmRSZWFjdE5vZGVCeUlEKGlkKTtcbiAgfVxuICByZXR1cm4gbm9kZUNhY2hlW2lkXTtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgbm9kZSB3aXRoIHRoZSBzdXBwbGllZCBwdWJsaWMgUmVhY3QgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHsqfSBpbnN0YW5jZSBBIHB1YmxpYyBSZWFjdCBpbnN0YW5jZS5cbiAqIEByZXR1cm4gez9ET01FbGVtZW50fSBET00gbm9kZSB3aXRoIHRoZSBzdXBwbGVkIGBpZGAuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZUZyb21JbnN0YW5jZShpbnN0YW5jZSkge1xuICB2YXIgaWQgPSBSZWFjdEluc3RhbmNlTWFwLmdldChpbnN0YW5jZSkuX3Jvb3ROb2RlSUQ7XG4gIGlmIChSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkuaXNOdWxsQ29tcG9uZW50SUQoaWQpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKCFub2RlQ2FjaGUuaGFzT3duUHJvcGVydHkoaWQpIHx8ICFpc1ZhbGlkKG5vZGVDYWNoZVtpZF0sIGlkKSkge1xuICAgIG5vZGVDYWNoZVtpZF0gPSBSZWFjdE1vdW50LmZpbmRSZWFjdE5vZGVCeUlEKGlkKTtcbiAgfVxuICByZXR1cm4gbm9kZUNhY2hlW2lkXTtcbn1cblxuLyoqXG4gKiBBIG5vZGUgaXMgXCJ2YWxpZFwiIGlmIGl0IGlzIGNvbnRhaW5lZCBieSBhIGN1cnJlbnRseSBtb3VudGVkIGNvbnRhaW5lci5cbiAqXG4gKiBUaGlzIG1lYW5zIHRoYXQgdGhlIG5vZGUgZG9lcyBub3QgaGF2ZSB0byBiZSBjb250YWluZWQgYnkgYSBkb2N1bWVudCBpblxuICogb3JkZXIgdG8gYmUgY29uc2lkZXJlZCB2YWxpZC5cbiAqXG4gKiBAcGFyYW0gez9ET01FbGVtZW50fSBub2RlIFRoZSBjYW5kaWRhdGUgRE9NIG5vZGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIGV4cGVjdGVkIElEIG9mIHRoZSBub2RlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgbm9kZSBpcyBjb250YWluZWQgYnkgYSBtb3VudGVkIGNvbnRhaW5lci5cbiAqL1xuZnVuY3Rpb24gaXNWYWxpZChub2RlLCBpZCkge1xuICBpZiAobm9kZSkge1xuICAgICEoaW50ZXJuYWxHZXRJRChub2RlKSA9PT0gaWQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0TW91bnQ6IFVuZXhwZWN0ZWQgbW9kaWZpY2F0aW9uIG9mIGAlc2AnLCBBVFRSX05BTUUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBjb250YWluZXIgPSBSZWFjdE1vdW50LmZpbmRSZWFjdENvbnRhaW5lckZvcklEKGlkKTtcbiAgICBpZiAoY29udGFpbmVyICYmIGNvbnRhaW5zTm9kZShjb250YWluZXIsIG5vZGUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ2F1c2VzIHRoZSBjYWNoZSB0byBmb3JnZXQgYWJvdXQgb25lIFJlYWN0LXNwZWNpZmljIElELlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgSUQgdG8gZm9yZ2V0LlxuICovXG5mdW5jdGlvbiBwdXJnZUlEKGlkKSB7XG4gIGRlbGV0ZSBub2RlQ2FjaGVbaWRdO1xufVxuXG52YXIgZGVlcGVzdE5vZGVTb0ZhciA9IG51bGw7XG5mdW5jdGlvbiBmaW5kRGVlcGVzdENhY2hlZEFuY2VzdG9ySW1wbChhbmNlc3RvcklEKSB7XG4gIHZhciBhbmNlc3RvciA9IG5vZGVDYWNoZVthbmNlc3RvcklEXTtcbiAgaWYgKGFuY2VzdG9yICYmIGlzVmFsaWQoYW5jZXN0b3IsIGFuY2VzdG9ySUQpKSB7XG4gICAgZGVlcGVzdE5vZGVTb0ZhciA9IGFuY2VzdG9yO1xuICB9IGVsc2Uge1xuICAgIC8vIFRoaXMgbm9kZSBpc24ndCBwb3B1bGF0ZWQgaW4gdGhlIGNhY2hlLCBzbyBwcmVzdW1hYmx5IG5vbmUgb2YgaXRzXG4gICAgLy8gZGVzY2VuZGFudHMgYXJlLiBCcmVhayBvdXQgb2YgdGhlIGxvb3AuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBkZWVwZXN0IGNhY2hlZCBub2RlIHdob3NlIElEIGlzIGEgcHJlZml4IG9mIGB0YXJnZXRJRGAuXG4gKi9cbmZ1bmN0aW9uIGZpbmREZWVwZXN0Q2FjaGVkQW5jZXN0b3IodGFyZ2V0SUQpIHtcbiAgZGVlcGVzdE5vZGVTb0ZhciA9IG51bGw7XG4gIFJlYWN0SW5zdGFuY2VIYW5kbGVzLnRyYXZlcnNlQW5jZXN0b3JzKHRhcmdldElELCBmaW5kRGVlcGVzdENhY2hlZEFuY2VzdG9ySW1wbCk7XG5cbiAgdmFyIGZvdW5kTm9kZSA9IGRlZXBlc3ROb2RlU29GYXI7XG4gIGRlZXBlc3ROb2RlU29GYXIgPSBudWxsO1xuICByZXR1cm4gZm91bmROb2RlO1xufVxuXG4vKipcbiAqIE1vdW50cyB0aGlzIGNvbXBvbmVudCBhbmQgaW5zZXJ0cyBpdCBpbnRvIHRoZSBET00uXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50SW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIG1vdW50LlxuICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBET00gSUQgb2YgdGhlIHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIG1vdW50IGludG8uXG4gKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3VsZFJldXNlTWFya3VwIElmIHRydWUsIGRvIG5vdCBpbnNlcnQgbWFya3VwXG4gKi9cbmZ1bmN0aW9uIG1vdW50Q29tcG9uZW50SW50b05vZGUoY29tcG9uZW50SW5zdGFuY2UsIHJvb3RJRCwgY29udGFpbmVyLCB0cmFuc2FjdGlvbiwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpIHtcbiAgaWYgKFJlYWN0RE9NRmVhdHVyZUZsYWdzLnVzZUNyZWF0ZUVsZW1lbnQpIHtcbiAgICBjb250ZXh0ID0gYXNzaWduKHt9LCBjb250ZXh0KTtcbiAgICBpZiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NfTk9ERV9UWVBFKSB7XG4gICAgICBjb250ZXh0W293bmVyRG9jdW1lbnRDb250ZXh0S2V5XSA9IGNvbnRhaW5lcjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGV4dFtvd25lckRvY3VtZW50Q29udGV4dEtleV0gPSBjb250YWluZXIub3duZXJEb2N1bWVudDtcbiAgICB9XG4gIH1cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoY29udGV4dCA9PT0gZW1wdHlPYmplY3QpIHtcbiAgICAgIGNvbnRleHQgPSB7fTtcbiAgICB9XG4gICAgdmFyIHRhZyA9IGNvbnRhaW5lci5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnRleHRbdmFsaWRhdGVET01OZXN0aW5nLmFuY2VzdG9ySW5mb0NvbnRleHRLZXldID0gdmFsaWRhdGVET01OZXN0aW5nLnVwZGF0ZWRBbmNlc3RvckluZm8obnVsbCwgdGFnLCBudWxsKTtcbiAgfVxuICB2YXIgbWFya3VwID0gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgY29tcG9uZW50SW5zdGFuY2UuX3JlbmRlcmVkQ29tcG9uZW50Ll90b3BMZXZlbFdyYXBwZXIgPSBjb21wb25lbnRJbnN0YW5jZTtcbiAgUmVhY3RNb3VudC5fbW91bnRJbWFnZUludG9Ob2RlKG1hcmt1cCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgdHJhbnNhY3Rpb24pO1xufVxuXG4vKipcbiAqIEJhdGNoZWQgbW91bnQuXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50SW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIG1vdW50LlxuICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBET00gSUQgb2YgdGhlIHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIG1vdW50IGludG8uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3VsZFJldXNlTWFya3VwIElmIHRydWUsIGRvIG5vdCBpbnNlcnQgbWFya3VwXG4gKi9cbmZ1bmN0aW9uIGJhdGNoZWRNb3VudENvbXBvbmVudEludG9Ob2RlKGNvbXBvbmVudEluc3RhbmNlLCByb290SUQsIGNvbnRhaW5lciwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpIHtcbiAgdmFyIHRyYW5zYWN0aW9uID0gUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKFxuICAvKiBmb3JjZUhUTUwgKi9zaG91bGRSZXVzZU1hcmt1cCk7XG4gIHRyYW5zYWN0aW9uLnBlcmZvcm0obW91bnRDb21wb25lbnRJbnRvTm9kZSwgbnVsbCwgY29tcG9uZW50SW5zdGFuY2UsIHJvb3RJRCwgY29udGFpbmVyLCB0cmFuc2FjdGlvbiwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpO1xuICBSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5yZWxlYXNlKHRyYW5zYWN0aW9uKTtcbn1cblxuLyoqXG4gKiBVbm1vdW50cyBhIGNvbXBvbmVudCBhbmQgcmVtb3ZlcyBpdCBmcm9tIHRoZSBET00uXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gaW5zdGFuY2UgUmVhY3QgY29tcG9uZW50IGluc3RhbmNlLlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gdW5tb3VudCBmcm9tLlxuICogQGZpbmFsXG4gKiBAaW50ZXJuYWxcbiAqIEBzZWUge1JlYWN0TW91bnQudW5tb3VudENvbXBvbmVudEF0Tm9kZX1cbiAqL1xuZnVuY3Rpb24gdW5tb3VudENvbXBvbmVudEZyb21Ob2RlKGluc3RhbmNlLCBjb250YWluZXIpIHtcbiAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQoaW5zdGFuY2UpO1xuXG4gIGlmIChjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUpIHtcbiAgICBjb250YWluZXIgPSBjb250YWluZXIuZG9jdW1lbnRFbGVtZW50O1xuICB9XG5cbiAgLy8gaHR0cDovL2pzcGVyZi5jb20vZW1wdHlpbmctYS1ub2RlXG4gIHdoaWxlIChjb250YWluZXIubGFzdENoaWxkKSB7XG4gICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuICB9XG59XG5cbi8qKlxuICogVHJ1ZSBpZiB0aGUgc3VwcGxpZWQgRE9NIG5vZGUgaGFzIGEgZGlyZWN0IFJlYWN0LXJlbmRlcmVkIGNoaWxkIHRoYXQgaXNcbiAqIG5vdCBhIFJlYWN0IHJvb3QgZWxlbWVudC4gVXNlZnVsIGZvciB3YXJuaW5nIGluIGByZW5kZXJgLFxuICogYHVubW91bnRDb21wb25lbnRBdE5vZGVgLCBldGMuXG4gKlxuICogQHBhcmFtIHs/RE9NRWxlbWVudH0gbm9kZSBUaGUgY2FuZGlkYXRlIERPTSBub2RlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgRE9NIGVsZW1lbnQgY29udGFpbnMgYSBkaXJlY3QgY2hpbGQgdGhhdCB3YXNcbiAqIHJlbmRlcmVkIGJ5IFJlYWN0IGJ1dCBpcyBub3QgYSByb290IGVsZW1lbnQuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gaGFzTm9uUm9vdFJlYWN0Q2hpbGQobm9kZSkge1xuICB2YXIgcmVhY3RSb290SUQgPSBnZXRSZWFjdFJvb3RJRChub2RlKTtcbiAgcmV0dXJuIHJlYWN0Um9vdElEID8gcmVhY3RSb290SUQgIT09IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChyZWFjdFJvb3RJRCkgOiBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBmaXJzdCAoZGVlcGVzdCkgYW5jZXN0b3Igb2YgYSBub2RlIHdoaWNoIGlzIHJlbmRlcmVkIGJ5IHRoaXMgY29weVxuICogb2YgUmVhY3QuXG4gKi9cbmZ1bmN0aW9uIGZpbmRGaXJzdFJlYWN0RE9NSW1wbChub2RlKSB7XG4gIC8vIFRoaXMgbm9kZSBtaWdodCBiZSBmcm9tIGFub3RoZXIgUmVhY3QgaW5zdGFuY2UsIHNvIHdlIG1ha2Ugc3VyZSBub3QgdG9cbiAgLy8gZXhhbWluZSB0aGUgbm9kZSBjYWNoZSBoZXJlXG4gIGZvciAoOyBub2RlICYmIG5vZGUucGFyZW50Tm9kZSAhPT0gbm9kZTsgbm9kZSA9IG5vZGUucGFyZW50Tm9kZSkge1xuICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSAxKSB7XG4gICAgICAvLyBOb3QgYSBET01FbGVtZW50LCB0aGVyZWZvcmUgbm90IGEgUmVhY3QgY29tcG9uZW50XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFyIG5vZGVJRCA9IGludGVybmFsR2V0SUQobm9kZSk7XG4gICAgaWYgKCFub2RlSUQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YXIgcmVhY3RSb290SUQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQobm9kZUlEKTtcblxuICAgIC8vIElmIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEIGNvbnRhaW5zIHRoZSBjb250YWluZXIgd2UgZmluZCBieSBjcmF3bGluZyB1cFxuICAgIC8vIHRoZSB0cmVlLCB3ZSBrbm93IHRoYXQgdGhpcyBpbnN0YW5jZSBvZiBSZWFjdCByZW5kZXJlZCB0aGUgbm9kZS5cbiAgICAvLyBuYi4gaXNWYWxpZCdzIHN0cmF0ZWd5ICh3aXRoIGNvbnRhaW5zTm9kZSkgZG9lcyBub3Qgd29yayBiZWNhdXNlIHJlbmRlclxuICAgIC8vIHRyZWVzIG1heSBiZSBuZXN0ZWQgYW5kIHdlIGRvbid0IHdhbnQgYSBmYWxzZSBwb3NpdGl2ZSBpbiB0aGF0IGNhc2UuXG4gICAgdmFyIGN1cnJlbnQgPSBub2RlO1xuICAgIHZhciBsYXN0SUQ7XG4gICAgZG8ge1xuICAgICAgbGFzdElEID0gaW50ZXJuYWxHZXRJRChjdXJyZW50KTtcbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudE5vZGU7XG4gICAgICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG4gICAgICAgIC8vIFRoZSBwYXNzZWQtaW4gbm9kZSBoYXMgYmVlbiBkZXRhY2hlZCBmcm9tIHRoZSBjb250YWluZXIgaXQgd2FzXG4gICAgICAgIC8vIG9yaWdpbmFsbHkgcmVuZGVyZWQgaW50by5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSB3aGlsZSAobGFzdElEICE9PSByZWFjdFJvb3RJRCk7XG5cbiAgICBpZiAoY3VycmVudCA9PT0gY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdKSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogVGVtcG9yYXJ5ICg/KSBoYWNrIHNvIHRoYXQgd2UgY2FuIHN0b3JlIGFsbCB0b3AtbGV2ZWwgcGVuZGluZyB1cGRhdGVzIG9uXG4gKiBjb21wb3NpdGVzIGluc3RlYWQgb2YgaGF2aW5nIHRvIHdvcnJ5IGFib3V0IGRpZmZlcmVudCB0eXBlcyBvZiBjb21wb25lbnRzXG4gKiBoZXJlLlxuICovXG52YXIgVG9wTGV2ZWxXcmFwcGVyID0gZnVuY3Rpb24gKCkge307XG5Ub3BMZXZlbFdyYXBwZXIucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQgPSB7fTtcbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIFRvcExldmVsV3JhcHBlci5kaXNwbGF5TmFtZSA9ICdUb3BMZXZlbFdyYXBwZXInO1xufVxuVG9wTGV2ZWxXcmFwcGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHRoaXMucHJvcHMgaXMgYWN0dWFsbHkgYSBSZWFjdEVsZW1lbnRcbiAgcmV0dXJuIHRoaXMucHJvcHM7XG59O1xuXG4vKipcbiAqIE1vdW50aW5nIGlzIHRoZSBwcm9jZXNzIG9mIGluaXRpYWxpemluZyBhIFJlYWN0IGNvbXBvbmVudCBieSBjcmVhdGluZyBpdHNcbiAqIHJlcHJlc2VudGF0aXZlIERPTSBlbGVtZW50cyBhbmQgaW5zZXJ0aW5nIHRoZW0gaW50byBhIHN1cHBsaWVkIGBjb250YWluZXJgLlxuICogQW55IHByaW9yIGNvbnRlbnQgaW5zaWRlIGBjb250YWluZXJgIGlzIGRlc3Ryb3llZCBpbiB0aGUgcHJvY2Vzcy5cbiAqXG4gKiAgIFJlYWN0TW91bnQucmVuZGVyKFxuICogICAgIGNvbXBvbmVudCxcbiAqICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJylcbiAqICAgKTtcbiAqXG4gKiAgIDxkaXYgaWQ9XCJjb250YWluZXJcIj4gICAgICAgICAgICAgICAgICAgPC0tIFN1cHBsaWVkIGBjb250YWluZXJgLlxuICogICAgIDxkaXYgZGF0YS1yZWFjdGlkPVwiLjNcIj4gICAgICAgICAgICAgIDwtLSBSZW5kZXJlZCByZWFjdFJvb3Qgb2YgUmVhY3RcbiAqICAgICAgIC8vIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9kaXY+XG4gKlxuICogSW5zaWRlIG9mIGBjb250YWluZXJgLCB0aGUgZmlyc3QgZWxlbWVudCByZW5kZXJlZCBpcyB0aGUgXCJyZWFjdFJvb3RcIi5cbiAqL1xudmFyIFJlYWN0TW91bnQgPSB7XG5cbiAgVG9wTGV2ZWxXcmFwcGVyOiBUb3BMZXZlbFdyYXBwZXIsXG5cbiAgLyoqIEV4cG9zZWQgZm9yIGRlYnVnZ2luZyBwdXJwb3NlcyAqKi9cbiAgX2luc3RhbmNlc0J5UmVhY3RSb290SUQ6IGluc3RhbmNlc0J5UmVhY3RSb290SUQsXG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgYSBob29rIHByb3ZpZGVkIHRvIHN1cHBvcnQgcmVuZGVyaW5nIFJlYWN0IGNvbXBvbmVudHMgd2hpbGVcbiAgICogZW5zdXJpbmcgdGhhdCB0aGUgYXBwYXJlbnQgc2Nyb2xsIHBvc2l0aW9uIG9mIGl0cyBgY29udGFpbmVyYCBkb2VzIG5vdFxuICAgKiBjaGFuZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIFRoZSBgY29udGFpbmVyYCBiZWluZyByZW5kZXJlZCBpbnRvLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSByZW5kZXJDYWxsYmFjayBUaGlzIG11c3QgYmUgY2FsbGVkIG9uY2UgdG8gZG8gdGhlIHJlbmRlci5cbiAgICovXG4gIHNjcm9sbE1vbml0b3I6IGZ1bmN0aW9uIChjb250YWluZXIsIHJlbmRlckNhbGxiYWNrKSB7XG4gICAgcmVuZGVyQ2FsbGJhY2soKTtcbiAgfSxcblxuICAvKipcbiAgICogVGFrZSBhIGNvbXBvbmVudCB0aGF0J3MgYWxyZWFkeSBtb3VudGVkIGludG8gdGhlIERPTSBhbmQgcmVwbGFjZSBpdHMgcHJvcHNcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gcHJldkNvbXBvbmVudCBjb21wb25lbnQgaW5zdGFuY2UgYWxyZWFkeSBpbiB0aGUgRE9NXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBjb21wb25lbnQgaW5zdGFuY2UgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIGNvbnRhaW5lciB0byByZW5kZXIgaW50b1xuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIGNvbXBsZXRpb25cbiAgICovXG4gIF91cGRhdGVSb290Q29tcG9uZW50OiBmdW5jdGlvbiAocHJldkNvbXBvbmVudCwgbmV4dEVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHtcbiAgICBSZWFjdE1vdW50LnNjcm9sbE1vbml0b3IoY29udGFpbmVyLCBmdW5jdGlvbiAoKSB7XG4gICAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVFbGVtZW50SW50ZXJuYWwocHJldkNvbXBvbmVudCwgbmV4dEVsZW1lbnQpO1xuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZUNhbGxiYWNrSW50ZXJuYWwocHJldkNvbXBvbmVudCwgY2FsbGJhY2spO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFJlY29yZCB0aGUgcm9vdCBlbGVtZW50IGluIGNhc2UgaXQgbGF0ZXIgZ2V0cyB0cmFuc3BsYW50ZWQuXG4gICAgICByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW2dldFJlYWN0Um9vdElEKGNvbnRhaW5lcildID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZDb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgY29tcG9uZW50IGludG8gdGhlIGluc3RhbmNlIG1hcCBhbmQgc3RhcnRzIHNjcm9sbCB2YWx1ZVxuICAgKiBtb25pdG9yaW5nXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IG5leHRDb21wb25lbnQgY29tcG9uZW50IGluc3RhbmNlIHRvIHJlbmRlclxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBjb250YWluZXIgdG8gcmVuZGVyIGludG9cbiAgICogQHJldHVybiB7c3RyaW5nfSByZWFjdFJvb3QgSUQgcHJlZml4XG4gICAqL1xuICBfcmVnaXN0ZXJDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0Q29tcG9uZW50LCBjb250YWluZXIpIHtcbiAgICAhKGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdfcmVnaXN0ZXJDb21wb25lbnQoLi4uKTogVGFyZ2V0IGNvbnRhaW5lciBpcyBub3QgYSBET00gZWxlbWVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuZW5zdXJlU2Nyb2xsVmFsdWVNb25pdG9yaW5nKCk7XG5cbiAgICB2YXIgcmVhY3RSb290SUQgPSBSZWFjdE1vdW50LnJlZ2lzdGVyQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0gPSBuZXh0Q29tcG9uZW50O1xuICAgIHJldHVybiByZWFjdFJvb3RJRDtcbiAgfSxcblxuICAvKipcbiAgICogUmVuZGVyIGEgbmV3IGNvbXBvbmVudCBpbnRvIHRoZSBET00uXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBlbGVtZW50IHRvIHJlbmRlclxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBjb250YWluZXIgdG8gcmVuZGVyIGludG9cbiAgICogQHBhcmFtIHtib29sZWFufSBzaG91bGRSZXVzZU1hcmt1cCBpZiB3ZSBzaG91bGQgc2tpcCB0aGUgbWFya3VwIGluc2VydGlvblxuICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gbmV4dENvbXBvbmVudFxuICAgKi9cbiAgX3JlbmRlck5ld1Jvb3RDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0RWxlbWVudCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgY29udGV4dCkge1xuICAgIC8vIFZhcmlvdXMgcGFydHMgb2Ygb3VyIGNvZGUgKHN1Y2ggYXMgUmVhY3RDb21wb3NpdGVDb21wb25lbnQnc1xuICAgIC8vIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQpIGFzc3VtZSB0aGF0IGNhbGxzIHRvIHJlbmRlciBhcmVuJ3QgbmVzdGVkO1xuICAgIC8vIHZlcmlmeSB0aGF0IHRoYXQncyB0aGUgY2FzZS5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID09IG51bGwsICdfcmVuZGVyTmV3Um9vdENvbXBvbmVudCgpOiBSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uICcgKyAnb2YgcHJvcHMgYW5kIHN0YXRlOyB0cmlnZ2VyaW5nIG5lc3RlZCBjb21wb25lbnQgdXBkYXRlcyBmcm9tICcgKyAncmVuZGVyIGlzIG5vdCBhbGxvd2VkLiBJZiBuZWNlc3NhcnksIHRyaWdnZXIgbmVzdGVkIHVwZGF0ZXMgaW4gJyArICdjb21wb25lbnREaWRVcGRhdGUuIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mICVzLicsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgJiYgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudC5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgY29tcG9uZW50SW5zdGFuY2UgPSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KG5leHRFbGVtZW50LCBudWxsKTtcbiAgICB2YXIgcmVhY3RSb290SUQgPSBSZWFjdE1vdW50Ll9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSwgY29udGFpbmVyKTtcblxuICAgIC8vIFRoZSBpbml0aWFsIHJlbmRlciBpcyBzeW5jaHJvbm91cyBidXQgYW55IHVwZGF0ZXMgdGhhdCBoYXBwZW4gZHVyaW5nXG4gICAgLy8gcmVuZGVyaW5nLCBpbiBjb21wb25lbnRXaWxsTW91bnQgb3IgY29tcG9uZW50RGlkTW91bnQsIHdpbGwgYmUgYmF0Y2hlZFxuICAgIC8vIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBiYXRjaGluZyBzdHJhdGVneS5cblxuICAgIFJlYWN0VXBkYXRlcy5iYXRjaGVkVXBkYXRlcyhiYXRjaGVkTW91bnRDb21wb25lbnRJbnRvTm9kZSwgY29tcG9uZW50SW5zdGFuY2UsIHJlYWN0Um9vdElELCBjb250YWluZXIsIHNob3VsZFJldXNlTWFya3VwLCBjb250ZXh0KTtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBSZWNvcmQgdGhlIHJvb3QgZWxlbWVudCBpbiBjYXNlIGl0IGxhdGVyIGdldHMgdHJhbnNwbGFudGVkLlxuICAgICAgcm9vdEVsZW1lbnRzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0gPSBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29tcG9uZW50SW5zdGFuY2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgYSBSZWFjdCBjb21wb25lbnQgaW50byB0aGUgRE9NIGluIHRoZSBzdXBwbGllZCBgY29udGFpbmVyYC5cbiAgICpcbiAgICogSWYgdGhlIFJlYWN0IGNvbXBvbmVudCB3YXMgcHJldmlvdXNseSByZW5kZXJlZCBpbnRvIGBjb250YWluZXJgLCB0aGlzIHdpbGxcbiAgICogcGVyZm9ybSBhbiB1cGRhdGUgb24gaXQgYW5kIG9ubHkgbXV0YXRlIHRoZSBET00gYXMgbmVjZXNzYXJ5IHRvIHJlZmxlY3QgdGhlXG4gICAqIGxhdGVzdCBSZWFjdCBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IHBhcmVudENvbXBvbmVudCBUaGUgY29uY2VwdHVhbCBwYXJlbnQgb2YgdGhpcyByZW5kZXIgdHJlZS5cbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50IENvbXBvbmVudCBlbGVtZW50IHRvIHJlbmRlci5cbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gcmVuZGVyIGludG8uXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gY29tcGxldGlvblxuICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gQ29tcG9uZW50IGluc3RhbmNlIHJlbmRlcmVkIGluIGBjb250YWluZXJgLlxuICAgKi9cbiAgcmVuZGVyU3VidHJlZUludG9Db250YWluZXI6IGZ1bmN0aW9uIChwYXJlbnRDb21wb25lbnQsIG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XG4gICAgIShwYXJlbnRDb21wb25lbnQgIT0gbnVsbCAmJiBwYXJlbnRDb21wb25lbnQuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSAhPSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwYXJlbnRDb21wb25lbnQgbXVzdCBiZSBhIHZhbGlkIFJlYWN0IENvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gUmVhY3RNb3VudC5fcmVuZGVyU3VidHJlZUludG9Db250YWluZXIocGFyZW50Q29tcG9uZW50LCBuZXh0RWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyOiBmdW5jdGlvbiAocGFyZW50Q29tcG9uZW50LCBuZXh0RWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuICAgICFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQobmV4dEVsZW1lbnQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0RE9NLnJlbmRlcigpOiBJbnZhbGlkIGNvbXBvbmVudCBlbGVtZW50LiVzJywgdHlwZW9mIG5leHRFbGVtZW50ID09PSAnc3RyaW5nJyA/ICcgSW5zdGVhZCBvZiBwYXNzaW5nIGFuIGVsZW1lbnQgc3RyaW5nLCBtYWtlIHN1cmUgdG8gaW5zdGFudGlhdGUgJyArICdpdCBieSBwYXNzaW5nIGl0IHRvIFJlYWN0LmNyZWF0ZUVsZW1lbnQuJyA6IHR5cGVvZiBuZXh0RWxlbWVudCA9PT0gJ2Z1bmN0aW9uJyA/ICcgSW5zdGVhZCBvZiBwYXNzaW5nIGEgY29tcG9uZW50IGNsYXNzLCBtYWtlIHN1cmUgdG8gaW5zdGFudGlhdGUgJyArICdpdCBieSBwYXNzaW5nIGl0IHRvIFJlYWN0LmNyZWF0ZUVsZW1lbnQuJyA6XG4gICAgLy8gQ2hlY2sgaWYgaXQgcXVhY2tzIGxpa2UgYW4gZWxlbWVudFxuICAgIG5leHRFbGVtZW50ICE9IG51bGwgJiYgbmV4dEVsZW1lbnQucHJvcHMgIT09IHVuZGVmaW5lZCA/ICcgVGhpcyBtYXkgYmUgY2F1c2VkIGJ5IHVuaW50ZW50aW9uYWxseSBsb2FkaW5nIHR3byBpbmRlcGVuZGVudCAnICsgJ2NvcGllcyBvZiBSZWFjdC4nIDogJycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFjb250YWluZXIgfHwgIWNvbnRhaW5lci50YWdOYW1lIHx8IGNvbnRhaW5lci50YWdOYW1lLnRvVXBwZXJDYXNlKCkgIT09ICdCT0RZJywgJ3JlbmRlcigpOiBSZW5kZXJpbmcgY29tcG9uZW50cyBkaXJlY3RseSBpbnRvIGRvY3VtZW50LmJvZHkgaXMgJyArICdkaXNjb3VyYWdlZCwgc2luY2UgaXRzIGNoaWxkcmVuIGFyZSBvZnRlbiBtYW5pcHVsYXRlZCBieSB0aGlyZC1wYXJ0eSAnICsgJ3NjcmlwdHMgYW5kIGJyb3dzZXIgZXh0ZW5zaW9ucy4gVGhpcyBtYXkgbGVhZCB0byBzdWJ0bGUgJyArICdyZWNvbmNpbGlhdGlvbiBpc3N1ZXMuIFRyeSByZW5kZXJpbmcgaW50byBhIGNvbnRhaW5lciBlbGVtZW50IGNyZWF0ZWQgJyArICdmb3IgeW91ciBhcHAuJykgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgbmV4dFdyYXBwZWRFbGVtZW50ID0gbmV3IFJlYWN0RWxlbWVudChUb3BMZXZlbFdyYXBwZXIsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG5leHRFbGVtZW50KTtcblxuICAgIHZhciBwcmV2Q29tcG9uZW50ID0gaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtnZXRSZWFjdFJvb3RJRChjb250YWluZXIpXTtcblxuICAgIGlmIChwcmV2Q29tcG9uZW50KSB7XG4gICAgICB2YXIgcHJldldyYXBwZWRFbGVtZW50ID0gcHJldkNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQ7XG4gICAgICB2YXIgcHJldkVsZW1lbnQgPSBwcmV2V3JhcHBlZEVsZW1lbnQucHJvcHM7XG4gICAgICBpZiAoc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KSkge1xuICAgICAgICB2YXIgcHVibGljSW5zdCA9IHByZXZDb21wb25lbnQuX3JlbmRlcmVkQ29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCk7XG4gICAgICAgIHZhciB1cGRhdGVkQ2FsbGJhY2sgPSBjYWxsYmFjayAmJiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2FsbGJhY2suY2FsbChwdWJsaWNJbnN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVhY3RNb3VudC5fdXBkYXRlUm9vdENvbXBvbmVudChwcmV2Q29tcG9uZW50LCBuZXh0V3JhcHBlZEVsZW1lbnQsIGNvbnRhaW5lciwgdXBkYXRlZENhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHB1YmxpY0luc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBSZWFjdE1vdW50LnVubW91bnRDb21wb25lbnRBdE5vZGUoY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVhY3RSb290RWxlbWVudCA9IGdldFJlYWN0Um9vdEVsZW1lbnRJbkNvbnRhaW5lcihjb250YWluZXIpO1xuICAgIHZhciBjb250YWluZXJIYXNSZWFjdE1hcmt1cCA9IHJlYWN0Um9vdEVsZW1lbnQgJiYgISFpbnRlcm5hbEdldElEKHJlYWN0Um9vdEVsZW1lbnQpO1xuICAgIHZhciBjb250YWluZXJIYXNOb25Sb290UmVhY3RDaGlsZCA9IGhhc05vblJvb3RSZWFjdENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWNvbnRhaW5lckhhc05vblJvb3RSZWFjdENoaWxkLCAncmVuZGVyKC4uLik6IFJlcGxhY2luZyBSZWFjdC1yZW5kZXJlZCBjaGlsZHJlbiB3aXRoIGEgbmV3IHJvb3QgJyArICdjb21wb25lbnQuIElmIHlvdSBpbnRlbmRlZCB0byB1cGRhdGUgdGhlIGNoaWxkcmVuIG9mIHRoaXMgbm9kZSwgJyArICd5b3Ugc2hvdWxkIGluc3RlYWQgaGF2ZSB0aGUgZXhpc3RpbmcgY2hpbGRyZW4gdXBkYXRlIHRoZWlyIHN0YXRlICcgKyAnYW5kIHJlbmRlciB0aGUgbmV3IGNvbXBvbmVudHMgaW5zdGVhZCBvZiBjYWxsaW5nIFJlYWN0RE9NLnJlbmRlci4nKSA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKCFjb250YWluZXJIYXNSZWFjdE1hcmt1cCB8fCByZWFjdFJvb3RFbGVtZW50Lm5leHRTaWJsaW5nKSB7XG4gICAgICAgIHZhciByb290RWxlbWVudFNpYmxpbmcgPSByZWFjdFJvb3RFbGVtZW50O1xuICAgICAgICB3aGlsZSAocm9vdEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgICAgICAgaWYgKGludGVybmFsR2V0SUQocm9vdEVsZW1lbnRTaWJsaW5nKSkge1xuICAgICAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdyZW5kZXIoKTogVGFyZ2V0IG5vZGUgaGFzIG1hcmt1cCByZW5kZXJlZCBieSBSZWFjdCwgYnV0IHRoZXJlICcgKyAnYXJlIHVucmVsYXRlZCBub2RlcyBhcyB3ZWxsLiBUaGlzIGlzIG1vc3QgY29tbW9ubHkgY2F1c2VkIGJ5ICcgKyAnd2hpdGUtc3BhY2UgaW5zZXJ0ZWQgYXJvdW5kIHNlcnZlci1yZW5kZXJlZCBtYXJrdXAuJykgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgcm9vdEVsZW1lbnRTaWJsaW5nID0gcm9vdEVsZW1lbnRTaWJsaW5nLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNob3VsZFJldXNlTWFya3VwID0gY29udGFpbmVySGFzUmVhY3RNYXJrdXAgJiYgIXByZXZDb21wb25lbnQgJiYgIWNvbnRhaW5lckhhc05vblJvb3RSZWFjdENoaWxkO1xuICAgIHZhciBjb21wb25lbnQgPSBSZWFjdE1vdW50Ll9yZW5kZXJOZXdSb290Q29tcG9uZW50KG5leHRXcmFwcGVkRWxlbWVudCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgcGFyZW50Q29tcG9uZW50ICE9IG51bGwgPyBwYXJlbnRDb21wb25lbnQuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZS5fcHJvY2Vzc0NoaWxkQ29udGV4dChwYXJlbnRDb21wb25lbnQuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZS5fY29udGV4dCkgOiBlbXB0eU9iamVjdCkuX3JlbmRlcmVkQ29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCk7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjay5jYWxsKGNvbXBvbmVudCk7XG4gICAgfVxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgYSBSZWFjdCBjb21wb25lbnQgaW50byB0aGUgRE9NIGluIHRoZSBzdXBwbGllZCBgY29udGFpbmVyYC5cbiAgICpcbiAgICogSWYgdGhlIFJlYWN0IGNvbXBvbmVudCB3YXMgcHJldmlvdXNseSByZW5kZXJlZCBpbnRvIGBjb250YWluZXJgLCB0aGlzIHdpbGxcbiAgICogcGVyZm9ybSBhbiB1cGRhdGUgb24gaXQgYW5kIG9ubHkgbXV0YXRlIHRoZSBET00gYXMgbmVjZXNzYXJ5IHRvIHJlZmxlY3QgdGhlXG4gICAqIGxhdGVzdCBSZWFjdCBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBDb21wb25lbnQgZWxlbWVudCB0byByZW5kZXIuXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIHJlbmRlciBpbnRvLlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIGNvbXBsZXRpb25cbiAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9IENvbXBvbmVudCBpbnN0YW5jZSByZW5kZXJlZCBpbiBgY29udGFpbmVyYC5cbiAgICovXG4gIHJlbmRlcjogZnVuY3Rpb24gKG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFJlYWN0TW91bnQuX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyKG51bGwsIG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgY29udGFpbmVyIG5vZGUgaW50byB3aGljaCBSZWFjdCBjb21wb25lbnRzIHdpbGwgYmUgcmVuZGVyZWQuXG4gICAqIFRoaXMgYWxzbyBjcmVhdGVzIHRoZSBcInJlYWN0Um9vdFwiIElEIHRoYXQgd2lsbCBiZSBhc3NpZ25lZCB0byB0aGUgZWxlbWVudFxuICAgKiByZW5kZXJlZCB3aXRoaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIHJlZ2lzdGVyIGFzIGEgY29udGFpbmVyLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBcInJlYWN0Um9vdFwiIElEIG9mIGVsZW1lbnRzIHJlbmRlcmVkIHdpdGhpbi5cbiAgICovXG4gIHJlZ2lzdGVyQ29udGFpbmVyOiBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgdmFyIHJlYWN0Um9vdElEID0gZ2V0UmVhY3RSb290SUQoY29udGFpbmVyKTtcbiAgICBpZiAocmVhY3RSb290SUQpIHtcbiAgICAgIC8vIElmIG9uZSBleGlzdHMsIG1ha2Ugc3VyZSBpdCBpcyBhIHZhbGlkIFwicmVhY3RSb290XCIgSUQuXG4gICAgICByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChyZWFjdFJvb3RJRCk7XG4gICAgfVxuICAgIGlmICghcmVhY3RSb290SUQpIHtcbiAgICAgIC8vIE5vIHZhbGlkIFwicmVhY3RSb290XCIgSUQgZm91bmQsIGNyZWF0ZSBvbmUuXG4gICAgICByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0Um9vdElEKCk7XG4gICAgfVxuICAgIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXSA9IGNvbnRhaW5lcjtcbiAgICByZXR1cm4gcmVhY3RSb290SUQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVubW91bnRzIGFuZCBkZXN0cm95cyB0aGUgUmVhY3QgY29tcG9uZW50IHJlbmRlcmVkIGluIHRoZSBgY29udGFpbmVyYC5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgY29udGFpbmluZyBhIFJlYWN0IGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBhIGNvbXBvbmVudCB3YXMgZm91bmQgaW4gYW5kIHVubW91bnRlZCBmcm9tXG4gICAqICAgICAgICAgICAgICAgICAgIGBjb250YWluZXJgXG4gICAqL1xuICB1bm1vdW50Q29tcG9uZW50QXROb2RlOiBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgLy8gVmFyaW91cyBwYXJ0cyBvZiBvdXIgY29kZSAoc3VjaCBhcyBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCdzXG4gICAgLy8gX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCkgYXNzdW1lIHRoYXQgY2FsbHMgdG8gcmVuZGVyIGFyZW4ndCBuZXN0ZWQ7XG4gICAgLy8gdmVyaWZ5IHRoYXQgdGhhdCdzIHRoZSBjYXNlLiAoU3RyaWN0bHkgc3BlYWtpbmcsIHVubW91bnRpbmcgd29uJ3QgY2F1c2UgYVxuICAgIC8vIHJlbmRlciBidXQgd2Ugc3RpbGwgZG9uJ3QgZXhwZWN0IHRvIGJlIGluIGEgcmVuZGVyIGNhbGwgaGVyZS4pXG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9PSBudWxsLCAndW5tb3VudENvbXBvbmVudEF0Tm9kZSgpOiBSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uICcgKyAnb2YgcHJvcHMgYW5kIHN0YXRlOyB0cmlnZ2VyaW5nIG5lc3RlZCBjb21wb25lbnQgdXBkYXRlcyBmcm9tIHJlbmRlciAnICsgJ2lzIG5vdCBhbGxvd2VkLiBJZiBuZWNlc3NhcnksIHRyaWdnZXIgbmVzdGVkIHVwZGF0ZXMgaW4gJyArICdjb21wb25lbnREaWRVcGRhdGUuIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mICVzLicsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgJiYgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudC5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG5cbiAgICAhKGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd1bm1vdW50Q29tcG9uZW50QXROb2RlKC4uLik6IFRhcmdldCBjb250YWluZXIgaXMgbm90IGEgRE9NIGVsZW1lbnQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIHJlYWN0Um9vdElEID0gZ2V0UmVhY3RSb290SUQoY29udGFpbmVyKTtcbiAgICB2YXIgY29tcG9uZW50ID0gaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF07XG4gICAgaWYgKCFjb21wb25lbnQpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBub2RlIGJlaW5nIHVubW91bnRlZCB3YXMgcmVuZGVyZWQgYnkgUmVhY3QsIGJ1dCBpc24ndCBhXG4gICAgICAvLyByb290IG5vZGUuXG4gICAgICB2YXIgY29udGFpbmVySGFzTm9uUm9vdFJlYWN0Q2hpbGQgPSBoYXNOb25Sb290UmVhY3RDaGlsZChjb250YWluZXIpO1xuXG4gICAgICAvLyBDaGVjayBpZiB0aGUgY29udGFpbmVyIGl0c2VsZiBpcyBhIFJlYWN0IHJvb3Qgbm9kZS5cbiAgICAgIHZhciBjb250YWluZXJJRCA9IGludGVybmFsR2V0SUQoY29udGFpbmVyKTtcbiAgICAgIHZhciBpc0NvbnRhaW5lclJlYWN0Um9vdCA9IGNvbnRhaW5lcklEICYmIGNvbnRhaW5lcklEID09PSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQoY29udGFpbmVySUQpO1xuXG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghY29udGFpbmVySGFzTm9uUm9vdFJlYWN0Q2hpbGQsICd1bm1vdW50Q29tcG9uZW50QXROb2RlKCk6IFRoZSBub2RlIHlvdVxcJ3JlIGF0dGVtcHRpbmcgdG8gdW5tb3VudCAnICsgJ3dhcyByZW5kZXJlZCBieSBSZWFjdCBhbmQgaXMgbm90IGEgdG9wLWxldmVsIGNvbnRhaW5lci4gJXMnLCBpc0NvbnRhaW5lclJlYWN0Um9vdCA/ICdZb3UgbWF5IGhhdmUgYWNjaWRlbnRhbGx5IHBhc3NlZCBpbiBhIFJlYWN0IHJvb3Qgbm9kZSBpbnN0ZWFkICcgKyAnb2YgaXRzIGNvbnRhaW5lci4nIDogJ0luc3RlYWQsIGhhdmUgdGhlIHBhcmVudCBjb21wb25lbnQgdXBkYXRlIGl0cyBzdGF0ZSBhbmQgJyArICdyZXJlbmRlciBpbiBvcmRlciB0byByZW1vdmUgdGhpcyBjb21wb25lbnQuJykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzKHVubW91bnRDb21wb25lbnRGcm9tTm9kZSwgY29tcG9uZW50LCBjb250YWluZXIpO1xuICAgIGRlbGV0ZSBpbnN0YW5jZXNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcbiAgICBkZWxldGUgY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBkZWxldGUgcm9vdEVsZW1lbnRzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF07XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgY29udGFpbmVyIERPTSBlbGVtZW50IHRoYXQgY29udGFpbnMgUmVhY3QgY29tcG9uZW50IHRvIHdoaWNoIHRoZVxuICAgKiBzdXBwbGllZCBET00gYGlkYCBiZWxvbmdzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIElEIG9mIGFuIGVsZW1lbnQgcmVuZGVyZWQgYnkgYSBSZWFjdCBjb21wb25lbnQuXG4gICAqIEByZXR1cm4gez9ET01FbGVtZW50fSBET00gZWxlbWVudCB0aGF0IGNvbnRhaW5zIHRoZSBgaWRgLlxuICAgKi9cbiAgZmluZFJlYWN0Q29udGFpbmVyRm9ySUQ6IGZ1bmN0aW9uIChpZCkge1xuICAgIHZhciByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChpZCk7XG4gICAgdmFyIGNvbnRhaW5lciA9IGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgcm9vdEVsZW1lbnQgPSByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcbiAgICAgIGlmIChyb290RWxlbWVudCAmJiByb290RWxlbWVudC5wYXJlbnROb2RlICE9PSBjb250YWluZXIpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoXG4gICAgICAgIC8vIENhbGwgaW50ZXJuYWxHZXRJRCBoZXJlIGJlY2F1c2UgZ2V0SUQgY2FsbHMgaXNWYWxpZCB3aGljaCBjYWxsc1xuICAgICAgICAvLyBmaW5kUmVhY3RDb250YWluZXJGb3JJRCAodGhpcyBmdW5jdGlvbikuXG4gICAgICAgIGludGVybmFsR2V0SUQocm9vdEVsZW1lbnQpID09PSByZWFjdFJvb3RJRCwgJ1JlYWN0TW91bnQ6IFJvb3QgZWxlbWVudCBJRCBkaWZmZXJlZCBmcm9tIHJlYWN0Um9vdElELicpIDogdW5kZWZpbmVkO1xuICAgICAgICB2YXIgY29udGFpbmVyQ2hpbGQgPSBjb250YWluZXIuZmlyc3RDaGlsZDtcbiAgICAgICAgaWYgKGNvbnRhaW5lckNoaWxkICYmIHJlYWN0Um9vdElEID09PSBpbnRlcm5hbEdldElEKGNvbnRhaW5lckNoaWxkKSkge1xuICAgICAgICAgIC8vIElmIHRoZSBjb250YWluZXIgaGFzIGEgbmV3IGNoaWxkIHdpdGggdGhlIHNhbWUgSUQgYXMgdGhlIG9sZFxuICAgICAgICAgIC8vIHJvb3QgZWxlbWVudCwgdGhlbiByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXSBpc1xuICAgICAgICAgIC8vIGp1c3Qgc3RhbGUgYW5kIG5lZWRzIHRvIGJlIHVwZGF0ZWQuIFRoZSBjYXNlIHRoYXQgZGVzZXJ2ZXMgYVxuICAgICAgICAgIC8vIHdhcm5pbmcgaXMgd2hlbiB0aGUgY29udGFpbmVyIGlzIGVtcHR5LlxuICAgICAgICAgIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbcmVhY3RSb290SURdID0gY29udGFpbmVyQ2hpbGQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdE1vdW50OiBSb290IGVsZW1lbnQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIGl0cyBvcmlnaW5hbCAnICsgJ2NvbnRhaW5lci4gTmV3IGNvbnRhaW5lcjogJXMnLCByb290RWxlbWVudC5wYXJlbnROb2RlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmRzIGFuIGVsZW1lbnQgcmVuZGVyZWQgYnkgUmVhY3Qgd2l0aCB0aGUgc3VwcGxpZWQgSUQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiBhIERPTSBub2RlIGluIHRoZSBSZWFjdCBjb21wb25lbnQuXG4gICAqIEByZXR1cm4ge0RPTUVsZW1lbnR9IFJvb3QgRE9NIG5vZGUgb2YgdGhlIFJlYWN0IGNvbXBvbmVudC5cbiAgICovXG4gIGZpbmRSZWFjdE5vZGVCeUlEOiBmdW5jdGlvbiAoaWQpIHtcbiAgICB2YXIgcmVhY3RSb290ID0gUmVhY3RNb3VudC5maW5kUmVhY3RDb250YWluZXJGb3JJRChpZCk7XG4gICAgcmV0dXJuIFJlYWN0TW91bnQuZmluZENvbXBvbmVudFJvb3QocmVhY3RSb290LCBpZCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRyYXZlcnNlcyB1cCB0aGUgYW5jZXN0b3JzIG9mIHRoZSBzdXBwbGllZCBub2RlIHRvIGZpbmQgYSBub2RlIHRoYXQgaXMgYVxuICAgKiBET00gcmVwcmVzZW50YXRpb24gb2YgYSBSZWFjdCBjb21wb25lbnQgcmVuZGVyZWQgYnkgdGhpcyBjb3B5IG9mIFJlYWN0LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG5vZGVcbiAgICogQHJldHVybiB7P0RPTUV2ZW50VGFyZ2V0fVxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldEZpcnN0UmVhY3RET006IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIGZpbmRGaXJzdFJlYWN0RE9NSW1wbChub2RlKTtcbiAgfSxcblxuICAvKipcbiAgICogRmluZHMgYSBub2RlIHdpdGggdGhlIHN1cHBsaWVkIGB0YXJnZXRJRGAgaW5zaWRlIG9mIHRoZSBzdXBwbGllZFxuICAgKiBgYW5jZXN0b3JOb2RlYC4gIEV4cGxvaXRzIHRoZSBJRCBuYW1pbmcgc2NoZW1lIHRvIHBlcmZvcm0gdGhlIHNlYXJjaFxuICAgKiBxdWlja2x5LlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSBhbmNlc3Rvck5vZGUgU2VhcmNoIGZyb20gdGhpcyByb290LlxuICAgKiBAcGFyYXJtIHtzdHJpbmd9IHRhcmdldElEIElEIG9mIHRoZSBET00gcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7RE9NRXZlbnRUYXJnZXR9IERPTSBub2RlIHdpdGggdGhlIHN1cHBsaWVkIGB0YXJnZXRJRGAuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZmluZENvbXBvbmVudFJvb3Q6IGZ1bmN0aW9uIChhbmNlc3Rvck5vZGUsIHRhcmdldElEKSB7XG4gICAgdmFyIGZpcnN0Q2hpbGRyZW4gPSBmaW5kQ29tcG9uZW50Um9vdFJldXNhYmxlQXJyYXk7XG4gICAgdmFyIGNoaWxkSW5kZXggPSAwO1xuXG4gICAgdmFyIGRlZXBlc3RBbmNlc3RvciA9IGZpbmREZWVwZXN0Q2FjaGVkQW5jZXN0b3IodGFyZ2V0SUQpIHx8IGFuY2VzdG9yTm9kZTtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgb24gdGhlIG5leHQgbGluZTsgZ2l2ZSBhbiBlYXJseSB3YXJuaW5nXG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhkZWVwZXN0QW5jZXN0b3IgIT0gbnVsbCwgJ1JlYWN0IGNhblxcJ3QgZmluZCB0aGUgcm9vdCBjb21wb25lbnQgbm9kZSBmb3IgZGF0YS1yZWFjdGlkIHZhbHVlICcgKyAnYCVzYC4gSWYgeW91XFwncmUgc2VlaW5nIHRoaXMgbWVzc2FnZSwgaXQgcHJvYmFibHkgbWVhbnMgdGhhdCAnICsgJ3lvdVxcJ3ZlIGxvYWRlZCB0d28gY29waWVzIG9mIFJlYWN0IG9uIHRoZSBwYWdlLiBBdCB0aGlzIHRpbWUsIG9ubHkgJyArICdhIHNpbmdsZSBjb3B5IG9mIFJlYWN0IGNhbiBiZSBsb2FkZWQgYXQgYSB0aW1lLicsIHRhcmdldElEKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBmaXJzdENoaWxkcmVuWzBdID0gZGVlcGVzdEFuY2VzdG9yLmZpcnN0Q2hpbGQ7XG4gICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSAxO1xuXG4gICAgd2hpbGUgKGNoaWxkSW5kZXggPCBmaXJzdENoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgdmFyIGNoaWxkID0gZmlyc3RDaGlsZHJlbltjaGlsZEluZGV4KytdO1xuICAgICAgdmFyIHRhcmdldENoaWxkO1xuXG4gICAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgICAgdmFyIGNoaWxkSUQgPSBSZWFjdE1vdW50LmdldElEKGNoaWxkKTtcbiAgICAgICAgaWYgKGNoaWxkSUQpIHtcbiAgICAgICAgICAvLyBFdmVuIGlmIHdlIGZpbmQgdGhlIG5vZGUgd2UncmUgbG9va2luZyBmb3IsIHdlIGZpbmlzaCBsb29waW5nXG4gICAgICAgICAgLy8gdGhyb3VnaCBpdHMgc2libGluZ3MgdG8gZW5zdXJlIHRoZXkncmUgY2FjaGVkIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZVxuICAgICAgICAgIC8vIHRvIHJldmlzaXQgdGhpcyBub2RlIGFnYWluLiBPdGhlcndpc2UsIHdlIG1ha2Ugbl4yIGNhbGxzIHRvIGdldElEXG4gICAgICAgICAgLy8gd2hlbiB2aXNpdGluZyB0aGUgbWFueSBjaGlsZHJlbiBvZiBhIHNpbmdsZSBub2RlIGluIG9yZGVyLlxuXG4gICAgICAgICAgaWYgKHRhcmdldElEID09PSBjaGlsZElEKSB7XG4gICAgICAgICAgICB0YXJnZXRDaGlsZCA9IGNoaWxkO1xuICAgICAgICAgIH0gZWxzZSBpZiAoUmVhY3RJbnN0YW5jZUhhbmRsZXMuaXNBbmNlc3RvcklET2YoY2hpbGRJRCwgdGFyZ2V0SUQpKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBmaW5kIGEgY2hpbGQgd2hvc2UgSUQgaXMgYW4gYW5jZXN0b3Igb2YgdGhlIGdpdmVuIElELFxuICAgICAgICAgICAgLy8gdGhlbiB3ZSBjYW4gYmUgc3VyZSB0aGF0IHdlIG9ubHkgd2FudCB0byBzZWFyY2ggdGhlIHN1YnRyZWVcbiAgICAgICAgICAgIC8vIHJvb3RlZCBhdCB0aGlzIGNoaWxkLCBzbyB3ZSBjYW4gdGhyb3cgb3V0IHRoZSByZXN0IG9mIHRoZVxuICAgICAgICAgICAgLy8gc2VhcmNoIHN0YXRlLlxuICAgICAgICAgICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSBjaGlsZEluZGV4ID0gMDtcbiAgICAgICAgICAgIGZpcnN0Q2hpbGRyZW4ucHVzaChjaGlsZC5maXJzdENoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgdGhpcyBjaGlsZCBoYWQgbm8gSUQsIHRoZW4gdGhlcmUncyBhIGNoYW5jZSB0aGF0IGl0IHdhc1xuICAgICAgICAgIC8vIGluamVjdGVkIGF1dG9tYXRpY2FsbHkgYnkgdGhlIGJyb3dzZXIsIGFzIHdoZW4gYSBgPHRhYmxlPmBcbiAgICAgICAgICAvLyBlbGVtZW50IHNwcm91dHMgYW4gZXh0cmEgYDx0Ym9keT5gIGNoaWxkIGFzIGEgc2lkZSBlZmZlY3Qgb2ZcbiAgICAgICAgICAvLyBgLmlubmVySFRNTGAgcGFyc2luZy4gT3B0aW1pc3RpY2FsbHkgY29udGludWUgZG93biB0aGlzXG4gICAgICAgICAgLy8gYnJhbmNoLCBidXQgbm90IGJlZm9yZSBleGFtaW5pbmcgdGhlIG90aGVyIHNpYmxpbmdzLlxuICAgICAgICAgIGZpcnN0Q2hpbGRyZW4ucHVzaChjaGlsZC5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICB9XG5cbiAgICAgIGlmICh0YXJnZXRDaGlsZCkge1xuICAgICAgICAvLyBFbXB0eWluZyBmaXJzdENoaWxkcmVuL2ZpbmRDb21wb25lbnRSb290UmV1c2FibGVBcnJheSBpc1xuICAgICAgICAvLyBub3QgbmVjZXNzYXJ5IGZvciBjb3JyZWN0bmVzcywgYnV0IGl0IGhlbHBzIHRoZSBHQyByZWNsYWltXG4gICAgICAgIC8vIGFueSBub2RlcyB0aGF0IHdlcmUgbGVmdCBhdCB0aGUgZW5kIG9mIHRoZSBzZWFyY2guXG4gICAgICAgIGZpcnN0Q2hpbGRyZW4ubGVuZ3RoID0gMDtcblxuICAgICAgICByZXR1cm4gdGFyZ2V0Q2hpbGQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSAwO1xuXG4gICAgIWZhbHNlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2ZpbmRDb21wb25lbnRSb290KC4uLiwgJXMpOiBVbmFibGUgdG8gZmluZCBlbGVtZW50LiBUaGlzIHByb2JhYmx5ICcgKyAnbWVhbnMgdGhlIERPTSB3YXMgdW5leHBlY3RlZGx5IG11dGF0ZWQgKGUuZy4sIGJ5IHRoZSBicm93c2VyKSwgJyArICd1c3VhbGx5IGR1ZSB0byBmb3JnZXR0aW5nIGEgPHRib2R5PiB3aGVuIHVzaW5nIHRhYmxlcywgbmVzdGluZyB0YWdzICcgKyAnbGlrZSA8Zm9ybT4sIDxwPiwgb3IgPGE+LCBvciB1c2luZyBub24tU1ZHIGVsZW1lbnRzIGluIGFuIDxzdmc+ICcgKyAncGFyZW50LiAnICsgJ1RyeSBpbnNwZWN0aW5nIHRoZSBjaGlsZCBub2RlcyBvZiB0aGUgZWxlbWVudCB3aXRoIFJlYWN0IElEIGAlc2AuJywgdGFyZ2V0SUQsIFJlYWN0TW91bnQuZ2V0SUQoYW5jZXN0b3JOb2RlKSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9LFxuXG4gIF9tb3VudEltYWdlSW50b05vZGU6IGZ1bmN0aW9uIChtYXJrdXAsIGNvbnRhaW5lciwgc2hvdWxkUmV1c2VNYXJrdXAsIHRyYW5zYWN0aW9uKSB7XG4gICAgIShjb250YWluZXIgJiYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NfTk9ERV9UWVBFIHx8IGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DVU1FTlRfRlJBR01FTlRfTk9ERV9UWVBFKSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnbW91bnRDb21wb25lbnRJbnRvTm9kZSguLi4pOiBUYXJnZXQgY29udGFpbmVyIGlzIG5vdCB2YWxpZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoc2hvdWxkUmV1c2VNYXJrdXApIHtcbiAgICAgIHZhciByb290RWxlbWVudCA9IGdldFJlYWN0Um9vdEVsZW1lbnRJbkNvbnRhaW5lcihjb250YWluZXIpO1xuICAgICAgaWYgKFJlYWN0TWFya3VwQ2hlY2tzdW0uY2FuUmV1c2VNYXJrdXAobWFya3VwLCByb290RWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGNoZWNrc3VtID0gcm9vdEVsZW1lbnQuZ2V0QXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FKTtcbiAgICAgICAgcm9vdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FKTtcblxuICAgICAgICB2YXIgcm9vdE1hcmt1cCA9IHJvb3RFbGVtZW50Lm91dGVySFRNTDtcbiAgICAgICAgcm9vdEVsZW1lbnQuc2V0QXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FLCBjaGVja3N1bSk7XG5cbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRNYXJrdXAgPSBtYXJrdXA7XG4gICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgLy8gYmVjYXVzZSByb290TWFya3VwIGlzIHJldHJpZXZlZCBmcm9tIHRoZSBET00sIHZhcmlvdXMgbm9ybWFsaXphdGlvbnNcbiAgICAgICAgICAvLyB3aWxsIGhhdmUgb2NjdXJyZWQgd2hpY2ggd2lsbCBub3QgYmUgcHJlc2VudCBpbiBgbWFya3VwYC4gSGVyZSxcbiAgICAgICAgICAvLyBpbnNlcnQgbWFya3VwIGludG8gYSA8ZGl2PiBvciA8aWZyYW1lPiBkZXBlbmRpbmcgb24gdGhlIGNvbnRhaW5lclxuICAgICAgICAgIC8vIHR5cGUgdG8gcGVyZm9ybSB0aGUgc2FtZSBub3JtYWxpemF0aW9ucyBiZWZvcmUgY29tcGFyaW5nLlxuICAgICAgICAgIHZhciBub3JtYWxpemVyO1xuICAgICAgICAgIGlmIChjb250YWluZXIubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERV9UWVBFKSB7XG4gICAgICAgICAgICBub3JtYWxpemVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBub3JtYWxpemVyLmlubmVySFRNTCA9IG1hcmt1cDtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRNYXJrdXAgPSBub3JtYWxpemVyLmlubmVySFRNTDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9ybWFsaXplciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub3JtYWxpemVyKTtcbiAgICAgICAgICAgIG5vcm1hbGl6ZXIuY29udGVudERvY3VtZW50LndyaXRlKG1hcmt1cCk7XG4gICAgICAgICAgICBub3JtYWxpemVkTWFya3VwID0gbm9ybWFsaXplci5jb250ZW50RG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTDtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobm9ybWFsaXplcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRpZmZJbmRleCA9IGZpcnN0RGlmZmVyZW5jZUluZGV4KG5vcm1hbGl6ZWRNYXJrdXAsIHJvb3RNYXJrdXApO1xuICAgICAgICB2YXIgZGlmZmVyZW5jZSA9ICcgKGNsaWVudCkgJyArIG5vcm1hbGl6ZWRNYXJrdXAuc3Vic3RyaW5nKGRpZmZJbmRleCAtIDIwLCBkaWZmSW5kZXggKyAyMCkgKyAnXFxuIChzZXJ2ZXIpICcgKyByb290TWFya3VwLnN1YnN0cmluZyhkaWZmSW5kZXggLSAyMCwgZGlmZkluZGV4ICsgMjApO1xuXG4gICAgICAgICEoY29udGFpbmVyLm5vZGVUeXBlICE9PSBET0NfTk9ERV9UWVBFKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdZb3VcXCdyZSB0cnlpbmcgdG8gcmVuZGVyIGEgY29tcG9uZW50IHRvIHRoZSBkb2N1bWVudCB1c2luZyAnICsgJ3NlcnZlciByZW5kZXJpbmcgYnV0IHRoZSBjaGVja3N1bSB3YXMgaW52YWxpZC4gVGhpcyB1c3VhbGx5ICcgKyAnbWVhbnMgeW91IHJlbmRlcmVkIGEgZGlmZmVyZW50IGNvbXBvbmVudCB0eXBlIG9yIHByb3BzIG9uICcgKyAndGhlIGNsaWVudCBmcm9tIHRoZSBvbmUgb24gdGhlIHNlcnZlciwgb3IgeW91ciByZW5kZXIoKSAnICsgJ21ldGhvZHMgYXJlIGltcHVyZS4gUmVhY3QgY2Fubm90IGhhbmRsZSB0aGlzIGNhc2UgZHVlIHRvICcgKyAnY3Jvc3MtYnJvd3NlciBxdWlya3MgYnkgcmVuZGVyaW5nIGF0IHRoZSBkb2N1bWVudCByb290LiBZb3UgJyArICdzaG91bGQgbG9vayBmb3IgZW52aXJvbm1lbnQgZGVwZW5kZW50IGNvZGUgaW4geW91ciBjb21wb25lbnRzICcgKyAnYW5kIGVuc3VyZSB0aGUgcHJvcHMgYXJlIHRoZSBzYW1lIGNsaWVudCBhbmQgc2VydmVyIHNpZGU6XFxuJXMnLCBkaWZmZXJlbmNlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0IGF0dGVtcHRlZCB0byByZXVzZSBtYXJrdXAgaW4gYSBjb250YWluZXIgYnV0IHRoZSAnICsgJ2NoZWNrc3VtIHdhcyBpbnZhbGlkLiBUaGlzIGdlbmVyYWxseSBtZWFucyB0aGF0IHlvdSBhcmUgJyArICd1c2luZyBzZXJ2ZXIgcmVuZGVyaW5nIGFuZCB0aGUgbWFya3VwIGdlbmVyYXRlZCBvbiB0aGUgJyArICdzZXJ2ZXIgd2FzIG5vdCB3aGF0IHRoZSBjbGllbnQgd2FzIGV4cGVjdGluZy4gUmVhY3QgaW5qZWN0ZWQgJyArICduZXcgbWFya3VwIHRvIGNvbXBlbnNhdGUgd2hpY2ggd29ya3MgYnV0IHlvdSBoYXZlIGxvc3QgbWFueSAnICsgJ29mIHRoZSBiZW5lZml0cyBvZiBzZXJ2ZXIgcmVuZGVyaW5nLiBJbnN0ZWFkLCBmaWd1cmUgb3V0ICcgKyAnd2h5IHRoZSBtYXJrdXAgYmVpbmcgZ2VuZXJhdGVkIGlzIGRpZmZlcmVudCBvbiB0aGUgY2xpZW50ICcgKyAnb3Igc2VydmVyOlxcbiVzJywgZGlmZmVyZW5jZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAhKGNvbnRhaW5lci5ub2RlVHlwZSAhPT0gRE9DX05PREVfVFlQRSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnWW91XFwncmUgdHJ5aW5nIHRvIHJlbmRlciBhIGNvbXBvbmVudCB0byB0aGUgZG9jdW1lbnQgYnV0ICcgKyAneW91IGRpZG5cXCd0IHVzZSBzZXJ2ZXIgcmVuZGVyaW5nLiBXZSBjYW5cXCd0IGRvIHRoaXMgJyArICd3aXRob3V0IHVzaW5nIHNlcnZlciByZW5kZXJpbmcgZHVlIHRvIGNyb3NzLWJyb3dzZXIgcXVpcmtzLiAnICsgJ1NlZSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0cmluZygpIGZvciBzZXJ2ZXIgcmVuZGVyaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIGlmICh0cmFuc2FjdGlvbi51c2VDcmVhdGVFbGVtZW50KSB7XG4gICAgICB3aGlsZSAoY29udGFpbmVyLmxhc3RDaGlsZCkge1xuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG4gICAgICB9XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobWFya3VwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0SW5uZXJIVE1MKGNvbnRhaW5lciwgbWFya3VwKTtcbiAgICB9XG4gIH0sXG5cbiAgb3duZXJEb2N1bWVudENvbnRleHRLZXk6IG93bmVyRG9jdW1lbnRDb250ZXh0S2V5LFxuXG4gIC8qKlxuICAgKiBSZWFjdCBJRCB1dGlsaXRpZXMuXG4gICAqL1xuXG4gIGdldFJlYWN0Um9vdElEOiBnZXRSZWFjdFJvb3RJRCxcblxuICBnZXRJRDogZ2V0SUQsXG5cbiAgc2V0SUQ6IHNldElELFxuXG4gIGdldE5vZGU6IGdldE5vZGUsXG5cbiAgZ2V0Tm9kZUZyb21JbnN0YW5jZTogZ2V0Tm9kZUZyb21JbnN0YW5jZSxcblxuICBpc1ZhbGlkOiBpc1ZhbGlkLFxuXG4gIHB1cmdlSUQ6IHB1cmdlSURcbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdE1vdW50LCAnUmVhY3RNb3VudCcsIHtcbiAgX3JlbmRlck5ld1Jvb3RDb21wb25lbnQ6ICdfcmVuZGVyTmV3Um9vdENvbXBvbmVudCcsXG4gIF9tb3VudEltYWdlSW50b05vZGU6ICdfbW91bnRJbWFnZUludG9Ob2RlJ1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RNb3VudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RNdWx0aUNoaWxkXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcyA9IHJlcXVpcmUoJy4vUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMnKTtcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0UmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVyJyk7XG52YXIgUmVhY3RDaGlsZFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0Q2hpbGRSZWNvbmNpbGVyJyk7XG5cbnZhciBmbGF0dGVuQ2hpbGRyZW4gPSByZXF1aXJlKCcuL2ZsYXR0ZW5DaGlsZHJlbicpO1xuXG4vKipcbiAqIFVwZGF0aW5nIGNoaWxkcmVuIG9mIGEgY29tcG9uZW50IG1heSB0cmlnZ2VyIHJlY3Vyc2l2ZSB1cGRhdGVzLiBUaGUgZGVwdGggaXNcbiAqIHVzZWQgdG8gYmF0Y2ggcmVjdXJzaXZlIHVwZGF0ZXMgdG8gcmVuZGVyIG1hcmt1cCBtb3JlIGVmZmljaWVudGx5LlxuICpcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgdXBkYXRlRGVwdGggPSAwO1xuXG4vKipcbiAqIFF1ZXVlIG9mIHVwZGF0ZSBjb25maWd1cmF0aW9uIG9iamVjdHMuXG4gKlxuICogRWFjaCBvYmplY3QgaGFzIGEgYHR5cGVgIHByb3BlcnR5IHRoYXQgaXMgaW4gYFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzYC5cbiAqXG4gKiBAdHlwZSB7YXJyYXk8b2JqZWN0Pn1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciB1cGRhdGVRdWV1ZSA9IFtdO1xuXG4vKipcbiAqIFF1ZXVlIG9mIG1hcmt1cCB0byBiZSByZW5kZXJlZC5cbiAqXG4gKiBAdHlwZSB7YXJyYXk8c3RyaW5nPn1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBtYXJrdXBRdWV1ZSA9IFtdO1xuXG4vKipcbiAqIEVucXVldWVzIG1hcmt1cCB0byBiZSByZW5kZXJlZCBhbmQgaW5zZXJ0ZWQgYXQgYSBzdXBwbGllZCBpbmRleC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0aGF0IHJlbmRlcnMgaW50byBhbiBlbGVtZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHRvSW5kZXggRGVzdGluYXRpb24gaW5kZXguXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbnF1ZXVlSW5zZXJ0TWFya3VwKHBhcmVudElELCBtYXJrdXAsIHRvSW5kZXgpIHtcbiAgLy8gTk9URTogTnVsbCB2YWx1ZXMgcmVkdWNlIGhpZGRlbiBjbGFzc2VzLlxuICB1cGRhdGVRdWV1ZS5wdXNoKHtcbiAgICBwYXJlbnRJRDogcGFyZW50SUQsXG4gICAgcGFyZW50Tm9kZTogbnVsbCxcbiAgICB0eXBlOiBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5JTlNFUlRfTUFSS1VQLFxuICAgIG1hcmt1cEluZGV4OiBtYXJrdXBRdWV1ZS5wdXNoKG1hcmt1cCkgLSAxLFxuICAgIGNvbnRlbnQ6IG51bGwsXG4gICAgZnJvbUluZGV4OiBudWxsLFxuICAgIHRvSW5kZXg6IHRvSW5kZXhcbiAgfSk7XG59XG5cbi8qKlxuICogRW5xdWV1ZXMgbW92aW5nIGFuIGV4aXN0aW5nIGVsZW1lbnQgdG8gYW5vdGhlciBpbmRleC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IFNvdXJjZSBpbmRleCBvZiB0aGUgZXhpc3RpbmcgZWxlbWVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b0luZGV4IERlc3RpbmF0aW9uIGluZGV4IG9mIHRoZSBlbGVtZW50LlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZU1vdmUocGFyZW50SUQsIGZyb21JbmRleCwgdG9JbmRleCkge1xuICAvLyBOT1RFOiBOdWxsIHZhbHVlcyByZWR1Y2UgaGlkZGVuIGNsYXNzZXMuXG4gIHVwZGF0ZVF1ZXVlLnB1c2goe1xuICAgIHBhcmVudElEOiBwYXJlbnRJRCxcbiAgICBwYXJlbnROb2RlOiBudWxsLFxuICAgIHR5cGU6IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLk1PVkVfRVhJU1RJTkcsXG4gICAgbWFya3VwSW5kZXg6IG51bGwsXG4gICAgY29udGVudDogbnVsbCxcbiAgICBmcm9tSW5kZXg6IGZyb21JbmRleCxcbiAgICB0b0luZGV4OiB0b0luZGV4XG4gIH0pO1xufVxuXG4vKipcbiAqIEVucXVldWVzIHJlbW92aW5nIGFuIGVsZW1lbnQgYXQgYW4gaW5kZXguXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmVudElEIElEIG9mIHRoZSBwYXJlbnQgY29tcG9uZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBJbmRleCBvZiB0aGUgZWxlbWVudCB0byByZW1vdmUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbnF1ZXVlUmVtb3ZlKHBhcmVudElELCBmcm9tSW5kZXgpIHtcbiAgLy8gTk9URTogTnVsbCB2YWx1ZXMgcmVkdWNlIGhpZGRlbiBjbGFzc2VzLlxuICB1cGRhdGVRdWV1ZS5wdXNoKHtcbiAgICBwYXJlbnRJRDogcGFyZW50SUQsXG4gICAgcGFyZW50Tm9kZTogbnVsbCxcbiAgICB0eXBlOiBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5SRU1PVkVfTk9ERSxcbiAgICBtYXJrdXBJbmRleDogbnVsbCxcbiAgICBjb250ZW50OiBudWxsLFxuICAgIGZyb21JbmRleDogZnJvbUluZGV4LFxuICAgIHRvSW5kZXg6IG51bGxcbiAgfSk7XG59XG5cbi8qKlxuICogRW5xdWV1ZXMgc2V0dGluZyB0aGUgbWFya3VwIG9mIGEgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0aGF0IHJlbmRlcnMgaW50byBhbiBlbGVtZW50LlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZVNldE1hcmt1cChwYXJlbnRJRCwgbWFya3VwKSB7XG4gIC8vIE5PVEU6IE51bGwgdmFsdWVzIHJlZHVjZSBoaWRkZW4gY2xhc3Nlcy5cbiAgdXBkYXRlUXVldWUucHVzaCh7XG4gICAgcGFyZW50SUQ6IHBhcmVudElELFxuICAgIHBhcmVudE5vZGU6IG51bGwsXG4gICAgdHlwZTogUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuU0VUX01BUktVUCxcbiAgICBtYXJrdXBJbmRleDogbnVsbCxcbiAgICBjb250ZW50OiBtYXJrdXAsXG4gICAgZnJvbUluZGV4OiBudWxsLFxuICAgIHRvSW5kZXg6IG51bGxcbiAgfSk7XG59XG5cbi8qKlxuICogRW5xdWV1ZXMgc2V0dGluZyB0aGUgdGV4dCBjb250ZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJlbnRJRCBJRCBvZiB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0Q29udGVudCBUZXh0IGNvbnRlbnQgdG8gc2V0LlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZVRleHRDb250ZW50KHBhcmVudElELCB0ZXh0Q29udGVudCkge1xuICAvLyBOT1RFOiBOdWxsIHZhbHVlcyByZWR1Y2UgaGlkZGVuIGNsYXNzZXMuXG4gIHVwZGF0ZVF1ZXVlLnB1c2goe1xuICAgIHBhcmVudElEOiBwYXJlbnRJRCxcbiAgICBwYXJlbnROb2RlOiBudWxsLFxuICAgIHR5cGU6IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlRFWFRfQ09OVEVOVCxcbiAgICBtYXJrdXBJbmRleDogbnVsbCxcbiAgICBjb250ZW50OiB0ZXh0Q29udGVudCxcbiAgICBmcm9tSW5kZXg6IG51bGwsXG4gICAgdG9JbmRleDogbnVsbFxuICB9KTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzZXMgYW55IGVucXVldWVkIHVwZGF0ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKCkge1xuICBpZiAodXBkYXRlUXVldWUubGVuZ3RoKSB7XG4gICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5wcm9jZXNzQ2hpbGRyZW5VcGRhdGVzKHVwZGF0ZVF1ZXVlLCBtYXJrdXBRdWV1ZSk7XG4gICAgY2xlYXJRdWV1ZSgpO1xuICB9XG59XG5cbi8qKlxuICogQ2xlYXJzIGFueSBlbnF1ZXVlZCB1cGRhdGVzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNsZWFyUXVldWUoKSB7XG4gIHVwZGF0ZVF1ZXVlLmxlbmd0aCA9IDA7XG4gIG1hcmt1cFF1ZXVlLmxlbmd0aCA9IDA7XG59XG5cbi8qKlxuICogUmVhY3RNdWx0aUNoaWxkIGFyZSBjYXBhYmxlIG9mIHJlY29uY2lsaW5nIG11bHRpcGxlIGNoaWxkcmVuLlxuICpcbiAqIEBjbGFzcyBSZWFjdE11bHRpQ2hpbGRcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RNdWx0aUNoaWxkID0ge1xuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBjb21tb24gZnVuY3Rpb25hbGl0eSBmb3IgY29tcG9uZW50cyB0aGF0IG11c3QgcmVjb25jaWxlIG11bHRpcGxlXG4gICAqIGNoaWxkcmVuLiBUaGlzIGlzIHVzZWQgYnkgYFJlYWN0RE9NQ29tcG9uZW50YCB0byBtb3VudCwgdXBkYXRlLCBhbmRcbiAgICogdW5tb3VudCBjaGlsZCBjb21wb25lbnRzLlxuICAgKlxuICAgKiBAbGVuZHMge1JlYWN0TXVsdGlDaGlsZC5wcm90b3R5cGV9XG4gICAqL1xuICBNaXhpbjoge1xuXG4gICAgX3JlY29uY2lsZXJJbnN0YW50aWF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAobmVzdGVkQ2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdENoaWxkUmVjb25jaWxlci5pbnN0YW50aWF0ZUNoaWxkcmVuKG5lc3RlZENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLmluc3RhbnRpYXRlQ2hpbGRyZW4obmVzdGVkQ2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgX3JlY29uY2lsZXJVcGRhdGVDaGlsZHJlbjogZnVuY3Rpb24gKHByZXZDaGlsZHJlbiwgbmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICB2YXIgbmV4dENoaWxkcmVuO1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5fb3duZXI7XG4gICAgICAgICAgICBuZXh0Q2hpbGRyZW4gPSBmbGF0dGVuQ2hpbGRyZW4obmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMpO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVwZGF0ZUNoaWxkcmVuKHByZXZDaGlsZHJlbiwgbmV4dENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG5leHRDaGlsZHJlbiA9IGZsYXR0ZW5DaGlsZHJlbihuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cyk7XG4gICAgICByZXR1cm4gUmVhY3RDaGlsZFJlY29uY2lsZXIudXBkYXRlQ2hpbGRyZW4ocHJldkNoaWxkcmVuLCBuZXh0Q2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgXCJtb3VudCBpbWFnZVwiIGZvciBlYWNoIG9mIHRoZSBzdXBwbGllZCBjaGlsZHJlbi4gSW4gdGhlIGNhc2VcbiAgICAgKiBvZiBgUmVhY3RET01Db21wb25lbnRgLCBhIG1vdW50IGltYWdlIGlzIGEgc3RyaW5nIG9mIG1hcmt1cC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7P29iamVjdH0gbmVzdGVkQ2hpbGRyZW4gTmVzdGVkIGNoaWxkIG1hcHMuXG4gICAgICogQHJldHVybiB7YXJyYXl9IEFuIGFycmF5IG9mIG1vdW50ZWQgcmVwcmVzZW50YXRpb25zLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG1vdW50Q2hpbGRyZW46IGZ1bmN0aW9uIChuZXN0ZWRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuX3JlY29uY2lsZXJJbnN0YW50aWF0ZUNoaWxkcmVuKG5lc3RlZENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICB0aGlzLl9yZW5kZXJlZENoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICB2YXIgbW91bnRJbWFnZXMgPSBbXTtcbiAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICBmb3IgKHZhciBuYW1lIGluIGNoaWxkcmVuKSB7XG4gICAgICAgIGlmIChjaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW25hbWVdO1xuICAgICAgICAgIC8vIElubGluZWQgZm9yIHBlcmZvcm1hbmNlLCBzZWUgYFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0SURgLlxuICAgICAgICAgIHZhciByb290SUQgPSB0aGlzLl9yb290Tm9kZUlEICsgbmFtZTtcbiAgICAgICAgICB2YXIgbW91bnRJbWFnZSA9IFJlYWN0UmVjb25jaWxlci5tb3VudENvbXBvbmVudChjaGlsZCwgcm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgICAgY2hpbGQuX21vdW50SW5kZXggPSBpbmRleCsrO1xuICAgICAgICAgIG1vdW50SW1hZ2VzLnB1c2gobW91bnRJbWFnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBtb3VudEltYWdlcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVwbGFjZXMgYW55IHJlbmRlcmVkIGNoaWxkcmVuIHdpdGggYSB0ZXh0IGNvbnRlbnQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5leHRDb250ZW50IFN0cmluZyBvZiBjb250ZW50LlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVwZGF0ZVRleHRDb250ZW50OiBmdW5jdGlvbiAobmV4dENvbnRlbnQpIHtcbiAgICAgIHVwZGF0ZURlcHRoKys7XG4gICAgICB2YXIgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHByZXZDaGlsZHJlbiA9IHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW47XG4gICAgICAgIC8vIFJlbW92ZSBhbnkgcmVuZGVyZWQgY2hpbGRyZW4uXG4gICAgICAgIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVubW91bnRDaGlsZHJlbihwcmV2Q2hpbGRyZW4pO1xuICAgICAgICAvLyBUT0RPOiBUaGUgc2V0VGV4dENvbnRlbnQgb3BlcmF0aW9uIHNob3VsZCBiZSBlbm91Z2hcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgICBpZiAocHJldkNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLl91bm1vdW50Q2hpbGQocHJldkNoaWxkcmVuW25hbWVdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IG5ldyB0ZXh0IGNvbnRlbnQuXG4gICAgICAgIHRoaXMuc2V0VGV4dENvbnRlbnQobmV4dENvbnRlbnQpO1xuICAgICAgICBlcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdXBkYXRlRGVwdGgtLTtcbiAgICAgICAgaWYgKCF1cGRhdGVEZXB0aCkge1xuICAgICAgICAgIGlmIChlcnJvclRocm93bikge1xuICAgICAgICAgICAgY2xlYXJRdWV1ZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9jZXNzUXVldWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVwbGFjZXMgYW55IHJlbmRlcmVkIGNoaWxkcmVuIHdpdGggYSBtYXJrdXAgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5leHRNYXJrdXAgU3RyaW5nIG9mIG1hcmt1cC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB1cGRhdGVNYXJrdXA6IGZ1bmN0aW9uIChuZXh0TWFya3VwKSB7XG4gICAgICB1cGRhdGVEZXB0aCsrO1xuICAgICAgdmFyIGVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBwcmV2Q2hpbGRyZW4gPSB0aGlzLl9yZW5kZXJlZENoaWxkcmVuO1xuICAgICAgICAvLyBSZW1vdmUgYW55IHJlbmRlcmVkIGNoaWxkcmVuLlxuICAgICAgICBSZWFjdENoaWxkUmVjb25jaWxlci51bm1vdW50Q2hpbGRyZW4ocHJldkNoaWxkcmVuKTtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgICBpZiAocHJldkNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLl91bm1vdW50Q2hpbGRCeU5hbWUocHJldkNoaWxkcmVuW25hbWVdLCBuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRNYXJrdXAobmV4dE1hcmt1cCk7XG4gICAgICAgIGVycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB1cGRhdGVEZXB0aC0tO1xuICAgICAgICBpZiAoIXVwZGF0ZURlcHRoKSB7XG4gICAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICBjbGVhclF1ZXVlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2Nlc3NRdWV1ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSByZW5kZXJlZCBjaGlsZHJlbiB3aXRoIG5ldyBjaGlsZHJlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMgTmVzdGVkIGNoaWxkIGVsZW1lbnQgbWFwcy5cbiAgICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdXBkYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIHVwZGF0ZURlcHRoKys7XG4gICAgICB2YXIgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2hpbGRyZW4obmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgZXJyb3JUaHJvd24gPSBmYWxzZTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHVwZGF0ZURlcHRoLS07XG4gICAgICAgIGlmICghdXBkYXRlRGVwdGgpIHtcbiAgICAgICAgICBpZiAoZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgIGNsZWFyUXVldWUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvY2Vzc1F1ZXVlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEltcHJvdmUgcGVyZm9ybWFuY2UgYnkgaXNvbGF0aW5nIHRoaXMgaG90IGNvZGUgcGF0aCBmcm9tIHRoZSB0cnkvY2F0Y2hcbiAgICAgKiBibG9jayBpbiBgdXBkYXRlQ2hpbGRyZW5gLlxuICAgICAqXG4gICAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cyBOZXN0ZWQgY2hpbGQgZWxlbWVudCBtYXBzLlxuICAgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICAgKiBAZmluYWxcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX3VwZGF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAobmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICB2YXIgcHJldkNoaWxkcmVuID0gdGhpcy5fcmVuZGVyZWRDaGlsZHJlbjtcbiAgICAgIHZhciBuZXh0Q2hpbGRyZW4gPSB0aGlzLl9yZWNvbmNpbGVyVXBkYXRlQ2hpbGRyZW4ocHJldkNoaWxkcmVuLCBuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgdGhpcy5fcmVuZGVyZWRDaGlsZHJlbiA9IG5leHRDaGlsZHJlbjtcbiAgICAgIGlmICghbmV4dENoaWxkcmVuICYmICFwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIG5hbWU7XG4gICAgICAvLyBgbmV4dEluZGV4YCB3aWxsIGluY3JlbWVudCBmb3IgZWFjaCBjaGlsZCBpbiBgbmV4dENoaWxkcmVuYCwgYnV0XG4gICAgICAvLyBgbGFzdEluZGV4YCB3aWxsIGJlIHRoZSBsYXN0IGluZGV4IHZpc2l0ZWQgaW4gYHByZXZDaGlsZHJlbmAuXG4gICAgICB2YXIgbGFzdEluZGV4ID0gMDtcbiAgICAgIHZhciBuZXh0SW5kZXggPSAwO1xuICAgICAgZm9yIChuYW1lIGluIG5leHRDaGlsZHJlbikge1xuICAgICAgICBpZiAoIW5leHRDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcmV2Q2hpbGQgPSBwcmV2Q2hpbGRyZW4gJiYgcHJldkNoaWxkcmVuW25hbWVdO1xuICAgICAgICB2YXIgbmV4dENoaWxkID0gbmV4dENoaWxkcmVuW25hbWVdO1xuICAgICAgICBpZiAocHJldkNoaWxkID09PSBuZXh0Q2hpbGQpIHtcbiAgICAgICAgICB0aGlzLm1vdmVDaGlsZChwcmV2Q2hpbGQsIG5leHRJbmRleCwgbGFzdEluZGV4KTtcbiAgICAgICAgICBsYXN0SW5kZXggPSBNYXRoLm1heChwcmV2Q2hpbGQuX21vdW50SW5kZXgsIGxhc3RJbmRleCk7XG4gICAgICAgICAgcHJldkNoaWxkLl9tb3VudEluZGV4ID0gbmV4dEluZGV4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChwcmV2Q2hpbGQpIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBgbGFzdEluZGV4YCBiZWZvcmUgYF9tb3VudEluZGV4YCBnZXRzIHVuc2V0IGJ5IHVubW91bnRpbmcuXG4gICAgICAgICAgICBsYXN0SW5kZXggPSBNYXRoLm1heChwcmV2Q2hpbGQuX21vdW50SW5kZXgsIGxhc3RJbmRleCk7XG4gICAgICAgICAgICB0aGlzLl91bm1vdW50Q2hpbGQocHJldkNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gVGhlIGNoaWxkIG11c3QgYmUgaW5zdGFudGlhdGVkIGJlZm9yZSBpdCdzIG1vdW50ZWQuXG4gICAgICAgICAgdGhpcy5fbW91bnRDaGlsZEJ5TmFtZUF0SW5kZXgobmV4dENoaWxkLCBuYW1lLCBuZXh0SW5kZXgsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBuZXh0SW5kZXgrKztcbiAgICAgIH1cbiAgICAgIC8vIFJlbW92ZSBjaGlsZHJlbiB0aGF0IGFyZSBubyBsb25nZXIgcHJlc2VudC5cbiAgICAgIGZvciAobmFtZSBpbiBwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKHByZXZDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiAhKG5leHRDaGlsZHJlbiAmJiBuZXh0Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpKSB7XG4gICAgICAgICAgdGhpcy5fdW5tb3VudENoaWxkKHByZXZDaGlsZHJlbltuYW1lXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5tb3VudHMgYWxsIHJlbmRlcmVkIGNoaWxkcmVuLiBUaGlzIHNob3VsZCBiZSB1c2VkIHRvIGNsZWFuIHVwIGNoaWxkcmVuXG4gICAgICogd2hlbiB0aGlzIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB1bm1vdW50Q2hpbGRyZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByZW5kZXJlZENoaWxkcmVuID0gdGhpcy5fcmVuZGVyZWRDaGlsZHJlbjtcbiAgICAgIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVubW91bnRDaGlsZHJlbihyZW5kZXJlZENoaWxkcmVuKTtcbiAgICAgIHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW4gPSBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyBhIGNoaWxkIGNvbXBvbmVudCB0byB0aGUgc3VwcGxpZWQgaW5kZXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDb21wb25lbnQgdG8gbW92ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9JbmRleCBEZXN0aW5hdGlvbiBpbmRleCBvZiB0aGUgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGFzdEluZGV4IExhc3QgaW5kZXggdmlzaXRlZCBvZiB0aGUgc2libGluZ3Mgb2YgYGNoaWxkYC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgbW92ZUNoaWxkOiBmdW5jdGlvbiAoY2hpbGQsIHRvSW5kZXgsIGxhc3RJbmRleCkge1xuICAgICAgLy8gSWYgdGhlIGluZGV4IG9mIGBjaGlsZGAgaXMgbGVzcyB0aGFuIGBsYXN0SW5kZXhgLCB0aGVuIGl0IG5lZWRzIHRvXG4gICAgICAvLyBiZSBtb3ZlZC4gT3RoZXJ3aXNlLCB3ZSBkbyBub3QgbmVlZCB0byBtb3ZlIGl0IGJlY2F1c2UgYSBjaGlsZCB3aWxsIGJlXG4gICAgICAvLyBpbnNlcnRlZCBvciBtb3ZlZCBiZWZvcmUgYGNoaWxkYC5cbiAgICAgIGlmIChjaGlsZC5fbW91bnRJbmRleCA8IGxhc3RJbmRleCkge1xuICAgICAgICBlbnF1ZXVlTW92ZSh0aGlzLl9yb290Tm9kZUlELCBjaGlsZC5fbW91bnRJbmRleCwgdG9JbmRleCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjaGlsZCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDb21wb25lbnQgdG8gY3JlYXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb3VudEltYWdlIE1hcmt1cCB0byBpbnNlcnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGNyZWF0ZUNoaWxkOiBmdW5jdGlvbiAoY2hpbGQsIG1vdW50SW1hZ2UpIHtcbiAgICAgIGVucXVldWVJbnNlcnRNYXJrdXAodGhpcy5fcm9vdE5vZGVJRCwgbW91bnRJbWFnZSwgY2hpbGQuX21vdW50SW5kZXgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgY2hpbGQgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY2hpbGQgQ2hpbGQgdG8gcmVtb3ZlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICByZW1vdmVDaGlsZDogZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICBlbnF1ZXVlUmVtb3ZlKHRoaXMuX3Jvb3ROb2RlSUQsIGNoaWxkLl9tb3VudEluZGV4KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGlzIHRleHQgY29udGVudCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dENvbnRlbnQgVGV4dCBjb250ZW50IHRvIHNldC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgc2V0VGV4dENvbnRlbnQ6IGZ1bmN0aW9uICh0ZXh0Q29udGVudCkge1xuICAgICAgZW5xdWV1ZVRleHRDb250ZW50KHRoaXMuX3Jvb3ROb2RlSUQsIHRleHRDb250ZW50KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGlzIG1hcmt1cCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0byBzZXQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHNldE1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCkge1xuICAgICAgZW5xdWV1ZVNldE1hcmt1cCh0aGlzLl9yb290Tm9kZUlELCBtYXJrdXApO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNb3VudHMgYSBjaGlsZCB3aXRoIHRoZSBzdXBwbGllZCBuYW1lLlxuICAgICAqXG4gICAgICogTk9URTogVGhpcyBpcyBwYXJ0IG9mIGB1cGRhdGVDaGlsZHJlbmAgYW5kIGlzIGhlcmUgZm9yIHJlYWRhYmlsaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY2hpbGQgQ29tcG9uZW50IHRvIG1vdW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIGNoaWxkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCBhdCB3aGljaCB0byBpbnNlcnQgdGhlIGNoaWxkLlxuICAgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9tb3VudENoaWxkQnlOYW1lQXRJbmRleDogZnVuY3Rpb24gKGNoaWxkLCBuYW1lLCBpbmRleCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIC8vIElubGluZWQgZm9yIHBlcmZvcm1hbmNlLCBzZWUgYFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0SURgLlxuICAgICAgdmFyIHJvb3RJRCA9IHRoaXMuX3Jvb3ROb2RlSUQgKyBuYW1lO1xuICAgICAgdmFyIG1vdW50SW1hZ2UgPSBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQoY2hpbGQsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgY2hpbGQuX21vdW50SW5kZXggPSBpbmRleDtcbiAgICAgIHRoaXMuY3JlYXRlQ2hpbGQoY2hpbGQsIG1vdW50SW1hZ2UpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbm1vdW50cyBhIHJlbmRlcmVkIGNoaWxkLlxuICAgICAqXG4gICAgICogTk9URTogVGhpcyBpcyBwYXJ0IG9mIGB1cGRhdGVDaGlsZHJlbmAgYW5kIGlzIGhlcmUgZm9yIHJlYWRhYmlsaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY2hpbGQgQ29tcG9uZW50IHRvIHVubW91bnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfdW5tb3VudENoaWxkOiBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgICAgY2hpbGQuX21vdW50SW5kZXggPSBudWxsO1xuICAgIH1cblxuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RNdWx0aUNoaWxkOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGtleU1pcnJvciA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU1pcnJvcicpO1xuXG4vKipcbiAqIFdoZW4gYSBjb21wb25lbnQncyBjaGlsZHJlbiBhcmUgdXBkYXRlZCwgYSBzZXJpZXMgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb25cbiAqIG9iamVjdHMgYXJlIGNyZWF0ZWQgaW4gb3JkZXIgdG8gYmF0Y2ggYW5kIHNlcmlhbGl6ZSB0aGUgcmVxdWlyZWQgY2hhbmdlcy5cbiAqXG4gKiBFbnVtZXJhdGVzIGFsbCB0aGUgcG9zc2libGUgdHlwZXMgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb25zLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMgPSBrZXlNaXJyb3Ioe1xuICBJTlNFUlRfTUFSS1VQOiBudWxsLFxuICBNT1ZFX0VYSVNUSU5HOiBudWxsLFxuICBSRU1PVkVfTk9ERTogbnVsbCxcbiAgU0VUX01BUktVUDogbnVsbCxcbiAgVEVYVF9DT05URU5UOiBudWxsXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3ROYXRpdmVDb21wb25lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIGF1dG9HZW5lcmF0ZVdyYXBwZXJDbGFzcyA9IG51bGw7XG52YXIgZ2VuZXJpY0NvbXBvbmVudENsYXNzID0gbnVsbDtcbi8vIFRoaXMgcmVnaXN0cnkga2VlcHMgdHJhY2sgb2Ygd3JhcHBlciBjbGFzc2VzIGFyb3VuZCBuYXRpdmUgdGFncy5cbnZhciB0YWdUb0NvbXBvbmVudENsYXNzID0ge307XG52YXIgdGV4dENvbXBvbmVudENsYXNzID0gbnVsbDtcblxudmFyIFJlYWN0TmF0aXZlQ29tcG9uZW50SW5qZWN0aW9uID0ge1xuICAvLyBUaGlzIGFjY2VwdHMgYSBjbGFzcyB0aGF0IHJlY2VpdmVzIHRoZSB0YWcgc3RyaW5nLiBUaGlzIGlzIGEgY2F0Y2ggYWxsXG4gIC8vIHRoYXQgY2FuIHJlbmRlciBhbnkga2luZCBvZiB0YWcuXG4gIGluamVjdEdlbmVyaWNDb21wb25lbnRDbGFzczogZnVuY3Rpb24gKGNvbXBvbmVudENsYXNzKSB7XG4gICAgZ2VuZXJpY0NvbXBvbmVudENsYXNzID0gY29tcG9uZW50Q2xhc3M7XG4gIH0sXG4gIC8vIFRoaXMgYWNjZXB0cyBhIHRleHQgY29tcG9uZW50IGNsYXNzIHRoYXQgdGFrZXMgdGhlIHRleHQgc3RyaW5nIHRvIGJlXG4gIC8vIHJlbmRlcmVkIGFzIHByb3BzLlxuICBpbmplY3RUZXh0Q29tcG9uZW50Q2xhc3M6IGZ1bmN0aW9uIChjb21wb25lbnRDbGFzcykge1xuICAgIHRleHRDb21wb25lbnRDbGFzcyA9IGNvbXBvbmVudENsYXNzO1xuICB9LFxuICAvLyBUaGlzIGFjY2VwdHMgYSBrZXllZCBvYmplY3Qgd2l0aCBjbGFzc2VzIGFzIHZhbHVlcy4gRWFjaCBrZXkgcmVwcmVzZW50cyBhXG4gIC8vIHRhZy4gVGhhdCBwYXJ0aWN1bGFyIHRhZyB3aWxsIHVzZSB0aGlzIGNsYXNzIGluc3RlYWQgb2YgdGhlIGdlbmVyaWMgb25lLlxuICBpbmplY3RDb21wb25lbnRDbGFzc2VzOiBmdW5jdGlvbiAoY29tcG9uZW50Q2xhc3Nlcykge1xuICAgIGFzc2lnbih0YWdUb0NvbXBvbmVudENsYXNzLCBjb21wb25lbnRDbGFzc2VzKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgYSBjb21wb3NpdGUgY29tcG9uZW50IHdyYXBwZXIgY2xhc3MgZm9yIGEgc3BlY2lmaWMgdGFnLlxuICpcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50IFRoZSB0YWcgZm9yIHdoaWNoIHRvIGdldCB0aGUgY2xhc3MuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIFJlYWN0IGNsYXNzIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRDb21wb25lbnRDbGFzc0ZvckVsZW1lbnQoZWxlbWVudCkge1xuICBpZiAodHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbGVtZW50LnR5cGU7XG4gIH1cbiAgdmFyIHRhZyA9IGVsZW1lbnQudHlwZTtcbiAgdmFyIGNvbXBvbmVudENsYXNzID0gdGFnVG9Db21wb25lbnRDbGFzc1t0YWddO1xuICBpZiAoY29tcG9uZW50Q2xhc3MgPT0gbnVsbCkge1xuICAgIHRhZ1RvQ29tcG9uZW50Q2xhc3NbdGFnXSA9IGNvbXBvbmVudENsYXNzID0gYXV0b0dlbmVyYXRlV3JhcHBlckNsYXNzKHRhZyk7XG4gIH1cbiAgcmV0dXJuIGNvbXBvbmVudENsYXNzO1xufVxuXG4vKipcbiAqIEdldCBhIG5hdGl2ZSBpbnRlcm5hbCBjb21wb25lbnQgY2xhc3MgZm9yIGEgc3BlY2lmaWMgdGFnLlxuICpcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGNyZWF0ZS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9ufSBUaGUgaW50ZXJuYWwgY2xhc3MgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUludGVybmFsQ29tcG9uZW50KGVsZW1lbnQpIHtcbiAgIWdlbmVyaWNDb21wb25lbnRDbGFzcyA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUaGVyZSBpcyBubyByZWdpc3RlcmVkIGNvbXBvbmVudCBmb3IgdGhlIHRhZyAlcycsIGVsZW1lbnQudHlwZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICByZXR1cm4gbmV3IGdlbmVyaWNDb21wb25lbnRDbGFzcyhlbGVtZW50LnR5cGUsIGVsZW1lbnQucHJvcHMpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7UmVhY3RUZXh0fSB0ZXh0XG4gKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2VGb3JUZXh0KHRleHQpIHtcbiAgcmV0dXJuIG5ldyB0ZXh0Q29tcG9uZW50Q2xhc3ModGV4dCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc1RleHRDb21wb25lbnQoY29tcG9uZW50KSB7XG4gIHJldHVybiBjb21wb25lbnQgaW5zdGFuY2VvZiB0ZXh0Q29tcG9uZW50Q2xhc3M7XG59XG5cbnZhciBSZWFjdE5hdGl2ZUNvbXBvbmVudCA9IHtcbiAgZ2V0Q29tcG9uZW50Q2xhc3NGb3JFbGVtZW50OiBnZXRDb21wb25lbnRDbGFzc0ZvckVsZW1lbnQsXG4gIGNyZWF0ZUludGVybmFsQ29tcG9uZW50OiBjcmVhdGVJbnRlcm5hbENvbXBvbmVudCxcbiAgY3JlYXRlSW5zdGFuY2VGb3JUZXh0OiBjcmVhdGVJbnN0YW5jZUZvclRleHQsXG4gIGlzVGV4dENvbXBvbmVudDogaXNUZXh0Q29tcG9uZW50LFxuICBpbmplY3Rpb246IFJlYWN0TmF0aXZlQ29tcG9uZW50SW5qZWN0aW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0TmF0aXZlQ29tcG9uZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3ROb29wVXBkYXRlUXVldWVcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCBjYWxsZXJOYW1lKSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICclcyguLi4pOiBDYW4gb25seSB1cGRhdGUgYSBtb3VudGVkIG9yIG1vdW50aW5nIGNvbXBvbmVudC4gJyArICdUaGlzIHVzdWFsbHkgbWVhbnMgeW91IGNhbGxlZCAlcygpIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnQuICcgKyAnVGhpcyBpcyBhIG5vLW9wLiBQbGVhc2UgY2hlY2sgdGhlIGNvZGUgZm9yIHRoZSAlcyBjb21wb25lbnQuJywgY2FsbGVyTmFtZSwgY2FsbGVyTmFtZSwgcHVibGljSW5zdGFuY2UuY29uc3RydWN0b3IgJiYgcHVibGljSW5zdGFuY2UuY29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgJycpIDogdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgYWJzdHJhY3QgQVBJIGZvciBhbiB1cGRhdGUgcXVldWUuXG4gKi9cbnZhciBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IHtcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9zaXRlIGNvbXBvbmVudCBpcyBtb3VudGVkLlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB3ZSB3YW50IHRvIHRlc3QuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbW91bnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEBmaW5hbFxuICAgKi9cbiAgaXNNb3VudGVkOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVucXVldWUgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgYWZ0ZXIgYWxsIHRoZSBwZW5kaW5nIHVwZGF0ZXNcbiAgICogaGF2ZSBwcm9jZXNzZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIHVzZSBhcyBgdGhpc2AgY29udGV4dC5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxlZCBhZnRlciBzdGF0ZSBpcyB1cGRhdGVkLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVDYWxsYmFjazogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBjYWxsYmFjaykge30sXG5cbiAgLyoqXG4gICAqIEZvcmNlcyBhbiB1cGRhdGUuIFRoaXMgc2hvdWxkIG9ubHkgYmUgaW52b2tlZCB3aGVuIGl0IGlzIGtub3duIHdpdGhcbiAgICogY2VydGFpbnR5IHRoYXQgd2UgYXJlICoqbm90KiogaW4gYSBET00gdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIFlvdSBtYXkgd2FudCB0byBjYWxsIHRoaXMgd2hlbiB5b3Uga25vdyB0aGF0IHNvbWUgZGVlcGVyIGFzcGVjdCBvZiB0aGVcbiAgICogY29tcG9uZW50J3Mgc3RhdGUgaGFzIGNoYW5nZWQgYnV0IGBzZXRTdGF0ZWAgd2FzIG5vdCBjYWxsZWQuXG4gICAqXG4gICAqIFRoaXMgd2lsbCBub3QgaW52b2tlIGBzaG91bGRDb21wb25lbnRVcGRhdGVgLCBidXQgaXQgd2lsbCBpbnZva2VcbiAgICogYGNvbXBvbmVudFdpbGxVcGRhdGVgIGFuZCBgY29tcG9uZW50RGlkVXBkYXRlYC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZUZvcmNlVXBkYXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCAnZm9yY2VVcGRhdGUnKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYWxsIG9mIHRoZSBzdGF0ZS4gQWx3YXlzIHVzZSB0aGlzIG9yIGBzZXRTdGF0ZWAgdG8gbXV0YXRlIHN0YXRlLlxuICAgKiBZb3Ugc2hvdWxkIHRyZWF0IGB0aGlzLnN0YXRlYCBhcyBpbW11dGFibGUuXG4gICAqXG4gICAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGB0aGlzLnN0YXRlYCB3aWxsIGJlIGltbWVkaWF0ZWx5IHVwZGF0ZWQsIHNvXG4gICAqIGFjY2Vzc2luZyBgdGhpcy5zdGF0ZWAgYWZ0ZXIgY2FsbGluZyB0aGlzIG1ldGhvZCBtYXkgcmV0dXJuIHRoZSBvbGQgdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29tcGxldGVTdGF0ZSBOZXh0IHN0YXRlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVSZXBsYWNlU3RhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgY29tcGxldGVTdGF0ZSkge1xuICAgIHdhcm5URFoocHVibGljSW5zdGFuY2UsICdyZXBsYWNlU3RhdGUnKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgc3RhdGUuIFRoaXMgb25seSBleGlzdHMgYmVjYXVzZSBfcGVuZGluZ1N0YXRlIGlzXG4gICAqIGludGVybmFsLiBUaGlzIHByb3ZpZGVzIGEgbWVyZ2luZyBzdHJhdGVneSB0aGF0IGlzIG5vdCBhdmFpbGFibGUgdG8gZGVlcFxuICAgKiBwcm9wZXJ0aWVzIHdoaWNoIGlzIGNvbmZ1c2luZy4gVE9ETzogRXhwb3NlIHBlbmRpbmdTdGF0ZSBvciBkb24ndCB1c2UgaXRcbiAgICogZHVyaW5nIHRoZSBtZXJnZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsU3RhdGUgTmV4dCBwYXJ0aWFsIHN0YXRlIHRvIGJlIG1lcmdlZCB3aXRoIHN0YXRlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVTZXRTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwYXJ0aWFsU3RhdGUpIHtcbiAgICB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCAnc2V0U3RhdGUnKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcGFydGlhbFByb3BzIFN1YnNldCBvZiB0aGUgbmV4dCBwcm9wcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlU2V0UHJvcHM6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcGFydGlhbFByb3BzKSB7XG4gICAgd2FyblREWihwdWJsaWNJbnN0YW5jZSwgJ3NldFByb3BzJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIGFsbCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHMgTmV3IHByb3BzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVSZXBsYWNlUHJvcHM6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcHJvcHMpIHtcbiAgICB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCAncmVwbGFjZVByb3BzJyk7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE5vb3BVcGRhdGVRdWV1ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RPd25lclxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIFJlYWN0T3duZXJzIGFyZSBjYXBhYmxlIG9mIHN0b3JpbmcgcmVmZXJlbmNlcyB0byBvd25lZCBjb21wb25lbnRzLlxuICpcbiAqIEFsbCBjb21wb25lbnRzIGFyZSBjYXBhYmxlIG9mIC8vYmVpbmcvLyByZWZlcmVuY2VkIGJ5IG93bmVyIGNvbXBvbmVudHMsIGJ1dFxuICogb25seSBSZWFjdE93bmVyIGNvbXBvbmVudHMgYXJlIGNhcGFibGUgb2YgLy9yZWZlcmVuY2luZy8vIG93bmVkIGNvbXBvbmVudHMuXG4gKiBUaGUgbmFtZWQgcmVmZXJlbmNlIGlzIGtub3duIGFzIGEgXCJyZWZcIi5cbiAqXG4gKiBSZWZzIGFyZSBhdmFpbGFibGUgd2hlbiBtb3VudGVkIGFuZCB1cGRhdGVkIGR1cmluZyByZWNvbmNpbGlhdGlvbi5cbiAqXG4gKiAgIHZhciBNeUNvbXBvbmVudCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAqICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICogICAgICAgcmV0dXJuIChcbiAqICAgICAgICAgPGRpdiBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfT5cbiAqICAgICAgICAgICA8Q3VzdG9tQ29tcG9uZW50IHJlZj1cImN1c3RvbVwiIC8+XG4gKiAgICAgICAgIDwvZGl2PlxuICogICAgICAgKTtcbiAqICAgICB9LFxuICogICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbigpIHtcbiAqICAgICAgIHRoaXMucmVmcy5jdXN0b20uaGFuZGxlQ2xpY2soKTtcbiAqICAgICB9LFxuICogICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAqICAgICAgIHRoaXMucmVmcy5jdXN0b20uaW5pdGlhbGl6ZSgpO1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogUmVmcyBzaG91bGQgcmFyZWx5IGJlIHVzZWQuIFdoZW4gcmVmcyBhcmUgdXNlZCwgdGhleSBzaG91bGQgb25seSBiZSBkb25lIHRvXG4gKiBjb250cm9sIGRhdGEgdGhhdCBpcyBub3QgaGFuZGxlZCBieSBSZWFjdCdzIGRhdGEgZmxvdy5cbiAqXG4gKiBAY2xhc3MgUmVhY3RPd25lclxuICovXG52YXIgUmVhY3RPd25lciA9IHtcblxuICAvKipcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBvYmplY3RcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb2JqZWN0YCBpcyBhIHZhbGlkIG93bmVyLlxuICAgKiBAZmluYWxcbiAgICovXG4gIGlzVmFsaWRPd25lcjogZnVuY3Rpb24gKG9iamVjdCkge1xuICAgIHJldHVybiAhIShvYmplY3QgJiYgdHlwZW9mIG9iamVjdC5hdHRhY2hSZWYgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9iamVjdC5kZXRhY2hSZWYgPT09ICdmdW5jdGlvbicpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGRzIGEgY29tcG9uZW50IGJ5IHJlZiB0byBhbiBvd25lciBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNvbXBvbmVudCBDb21wb25lbnQgdG8gcmVmZXJlbmNlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmIE5hbWUgYnkgd2hpY2ggdG8gcmVmZXIgdG8gdGhlIGNvbXBvbmVudC5cbiAgICogQHBhcmFtIHtSZWFjdE93bmVyfSBvd25lciBDb21wb25lbnQgb24gd2hpY2ggdG8gcmVjb3JkIHRoZSByZWYuXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGFkZENvbXBvbmVudEFzUmVmVG86IGZ1bmN0aW9uIChjb21wb25lbnQsIHJlZiwgb3duZXIpIHtcbiAgICAhUmVhY3RPd25lci5pc1ZhbGlkT3duZXIob3duZXIpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2FkZENvbXBvbmVudEFzUmVmVG8oLi4uKTogT25seSBhIFJlYWN0T3duZXIgY2FuIGhhdmUgcmVmcy4gWW91IG1pZ2h0ICcgKyAnYmUgYWRkaW5nIGEgcmVmIHRvIGEgY29tcG9uZW50IHRoYXQgd2FzIG5vdCBjcmVhdGVkIGluc2lkZSBhIGNvbXBvbmVudFxcJ3MgJyArICdgcmVuZGVyYCBtZXRob2QsIG9yIHlvdSBoYXZlIG11bHRpcGxlIGNvcGllcyBvZiBSZWFjdCBsb2FkZWQgJyArICcoZGV0YWlsczogaHR0cHM6Ly9mYi5tZS9yZWFjdC1yZWZzLW11c3QtaGF2ZS1vd25lcikuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIG93bmVyLmF0dGFjaFJlZihyZWYsIGNvbXBvbmVudCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBjb21wb25lbnQgYnkgcmVmIGZyb20gYW4gb3duZXIgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjb21wb25lbnQgQ29tcG9uZW50IHRvIGRlcmVmZXJlbmNlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmIE5hbWUgb2YgdGhlIHJlZiB0byByZW1vdmUuXG4gICAqIEBwYXJhbSB7UmVhY3RPd25lcn0gb3duZXIgQ29tcG9uZW50IG9uIHdoaWNoIHRoZSByZWYgaXMgcmVjb3JkZWQuXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHJlbW92ZUNvbXBvbmVudEFzUmVmRnJvbTogZnVuY3Rpb24gKGNvbXBvbmVudCwgcmVmLCBvd25lcikge1xuICAgICFSZWFjdE93bmVyLmlzVmFsaWRPd25lcihvd25lcikgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAncmVtb3ZlQ29tcG9uZW50QXNSZWZGcm9tKC4uLik6IE9ubHkgYSBSZWFjdE93bmVyIGNhbiBoYXZlIHJlZnMuIFlvdSBtaWdodCAnICsgJ2JlIHJlbW92aW5nIGEgcmVmIHRvIGEgY29tcG9uZW50IHRoYXQgd2FzIG5vdCBjcmVhdGVkIGluc2lkZSBhIGNvbXBvbmVudFxcJ3MgJyArICdgcmVuZGVyYCBtZXRob2QsIG9yIHlvdSBoYXZlIG11bHRpcGxlIGNvcGllcyBvZiBSZWFjdCBsb2FkZWQgJyArICcoZGV0YWlsczogaHR0cHM6Ly9mYi5tZS9yZWFjdC1yZWZzLW11c3QtaGF2ZS1vd25lcikuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIC8vIENoZWNrIHRoYXQgYGNvbXBvbmVudGAgaXMgc3RpbGwgdGhlIGN1cnJlbnQgcmVmIGJlY2F1c2Ugd2UgZG8gbm90IHdhbnQgdG9cbiAgICAvLyBkZXRhY2ggdGhlIHJlZiBpZiBhbm90aGVyIGNvbXBvbmVudCBzdG9sZSBpdC5cbiAgICBpZiAob3duZXIuZ2V0UHVibGljSW5zdGFuY2UoKS5yZWZzW3JlZl0gPT09IGNvbXBvbmVudC5nZXRQdWJsaWNJbnN0YW5jZSgpKSB7XG4gICAgICBvd25lci5kZXRhY2hSZWYocmVmKTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE93bmVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFBlcmZcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFJlYWN0UGVyZiBpcyBhIGdlbmVyYWwgQU9QIHN5c3RlbSBkZXNpZ25lZCB0byBtZWFzdXJlIHBlcmZvcm1hbmNlLiBUaGlzXG4gKiBtb2R1bGUgb25seSBoYXMgdGhlIGhvb2tzOiBzZWUgUmVhY3REZWZhdWx0UGVyZiBmb3IgdGhlIGFuYWx5c2lzIHRvb2wuXG4gKi9cbnZhciBSZWFjdFBlcmYgPSB7XG4gIC8qKlxuICAgKiBCb29sZWFuIHRvIGVuYWJsZS9kaXNhYmxlIG1lYXN1cmVtZW50LiBTZXQgdG8gZmFsc2UgYnkgZGVmYXVsdCB0byBwcmV2ZW50XG4gICAqIGFjY2lkZW50YWwgbG9nZ2luZyBhbmQgcGVyZiBsb3NzLlxuICAgKi9cbiAgZW5hYmxlTWVhc3VyZTogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEhvbGRzIG9udG8gdGhlIG1lYXN1cmUgZnVuY3Rpb24gaW4gdXNlLiBCeSBkZWZhdWx0LCBkb24ndCBtZWFzdXJlXG4gICAqIGFueXRoaW5nLCBidXQgd2UnbGwgb3ZlcnJpZGUgdGhpcyBpZiB3ZSBpbmplY3QgYSBtZWFzdXJlIGZ1bmN0aW9uLlxuICAgKi9cbiAgc3RvcmVkTWVhc3VyZTogX25vTWVhc3VyZSxcblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gb2JqZWN0TmFtZVxuICAgKiBAcGFyYW0ge29iamVjdDxzdHJpbmc+fSBtZXRob2ROYW1lc1xuICAgKi9cbiAgbWVhc3VyZU1ldGhvZHM6IGZ1bmN0aW9uIChvYmplY3QsIG9iamVjdE5hbWUsIG1ldGhvZE5hbWVzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRob2ROYW1lcykge1xuICAgICAgICBpZiAoIW1ldGhvZE5hbWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBvYmplY3Rba2V5XSA9IFJlYWN0UGVyZi5tZWFzdXJlKG9iamVjdE5hbWUsIG1ldGhvZE5hbWVzW2tleV0sIG9iamVjdFtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVzZSB0aGlzIHRvIHdyYXAgbWV0aG9kcyB5b3Ugd2FudCB0byBtZWFzdXJlLiBaZXJvIG92ZXJoZWFkIGluIHByb2R1Y3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvYmpOYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbk5hbWVcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xuICAgKiBAcmV0dXJuIHtmdW5jdGlvbn1cbiAgICovXG4gIG1lYXN1cmU6IGZ1bmN0aW9uIChvYmpOYW1lLCBmbk5hbWUsIGZ1bmMpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIG1lYXN1cmVkRnVuYyA9IG51bGw7XG4gICAgICB2YXIgd3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFJlYWN0UGVyZi5lbmFibGVNZWFzdXJlKSB7XG4gICAgICAgICAgaWYgKCFtZWFzdXJlZEZ1bmMpIHtcbiAgICAgICAgICAgIG1lYXN1cmVkRnVuYyA9IFJlYWN0UGVyZi5zdG9yZWRNZWFzdXJlKG9iak5hbWUsIGZuTmFtZSwgZnVuYyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBtZWFzdXJlZEZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICAgIHdyYXBwZXIuZGlzcGxheU5hbWUgPSBvYmpOYW1lICsgJ18nICsgZm5OYW1lO1xuICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgfVxuICAgIHJldHVybiBmdW5jO1xuICB9LFxuXG4gIGluamVjdGlvbjoge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG1lYXN1cmVcbiAgICAgKi9cbiAgICBpbmplY3RNZWFzdXJlOiBmdW5jdGlvbiAobWVhc3VyZSkge1xuICAgICAgUmVhY3RQZXJmLnN0b3JlZE1lYXN1cmUgPSBtZWFzdXJlO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBTaW1wbHkgcGFzc2VzIHRocm91Z2ggdGhlIG1lYXN1cmVkIGZ1bmN0aW9uLCB3aXRob3V0IG1lYXN1cmluZyBpdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gb2JqTmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IGZuTmFtZVxuICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xuICogQHJldHVybiB7ZnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIF9ub01lYXN1cmUob2JqTmFtZSwgZm5OYW1lLCBmdW5jKSB7XG4gIHJldHVybiBmdW5jO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UGVyZjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHt9O1xuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHtcbiAgICBwcm9wOiAncHJvcCcsXG4gICAgY29udGV4dDogJ2NvbnRleHQnLFxuICAgIGNoaWxkQ29udGV4dDogJ2NoaWxkIGNvbnRleHQnXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBrZXlNaXJyb3IgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlNaXJyb3InKTtcblxudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSBrZXlNaXJyb3Ioe1xuICBwcm9wOiBudWxsLFxuICBjb250ZXh0OiBudWxsLFxuICBjaGlsZENvbnRleHQ6IG51bGxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbnM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UHJvcFR5cGVzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMnKTtcblxudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgZ2V0SXRlcmF0b3JGbiA9IHJlcXVpcmUoJy4vZ2V0SXRlcmF0b3JGbicpO1xuXG4vKipcbiAqIENvbGxlY3Rpb24gb2YgbWV0aG9kcyB0aGF0IGFsbG93IGRlY2xhcmF0aW9uIGFuZCB2YWxpZGF0aW9uIG9mIHByb3BzIHRoYXQgYXJlXG4gKiBzdXBwbGllZCB0byBSZWFjdCBjb21wb25lbnRzLiBFeGFtcGxlIHVzYWdlOlxuICpcbiAqICAgdmFyIFByb3BzID0gcmVxdWlyZSgnUmVhY3RQcm9wVHlwZXMnKTtcbiAqICAgdmFyIE15QXJ0aWNsZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAqICAgICBwcm9wVHlwZXM6IHtcbiAqICAgICAgIC8vIEFuIG9wdGlvbmFsIHN0cmluZyBwcm9wIG5hbWVkIFwiZGVzY3JpcHRpb25cIi5cbiAqICAgICAgIGRlc2NyaXB0aW9uOiBQcm9wcy5zdHJpbmcsXG4gKlxuICogICAgICAgLy8gQSByZXF1aXJlZCBlbnVtIHByb3AgbmFtZWQgXCJjYXRlZ29yeVwiLlxuICogICAgICAgY2F0ZWdvcnk6IFByb3BzLm9uZU9mKFsnTmV3cycsJ1Bob3RvcyddKS5pc1JlcXVpcmVkLFxuICpcbiAqICAgICAgIC8vIEEgcHJvcCBuYW1lZCBcImRpYWxvZ1wiIHRoYXQgcmVxdWlyZXMgYW4gaW5zdGFuY2Ugb2YgRGlhbG9nLlxuICogICAgICAgZGlhbG9nOiBQcm9wcy5pbnN0YW5jZU9mKERpYWxvZykuaXNSZXF1aXJlZFxuICogICAgIH0sXG4gKiAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHsgLi4uIH1cbiAqICAgfSk7XG4gKlxuICogQSBtb3JlIGZvcm1hbCBzcGVjaWZpY2F0aW9uIG9mIGhvdyB0aGVzZSBtZXRob2RzIGFyZSB1c2VkOlxuICpcbiAqICAgdHlwZSA6PSBhcnJheXxib29sfGZ1bmN8b2JqZWN0fG51bWJlcnxzdHJpbmd8b25lT2YoWy4uLl0pfGluc3RhbmNlT2YoLi4uKVxuICogICBkZWNsIDo9IFJlYWN0UHJvcFR5cGVzLnt0eXBlfSguaXNSZXF1aXJlZCk/XG4gKlxuICogRWFjaCBhbmQgZXZlcnkgZGVjbGFyYXRpb24gcHJvZHVjZXMgYSBmdW5jdGlvbiB3aXRoIHRoZSBzYW1lIHNpZ25hdHVyZS4gVGhpc1xuICogYWxsb3dzIHRoZSBjcmVhdGlvbiBvZiBjdXN0b20gdmFsaWRhdGlvbiBmdW5jdGlvbnMuIEZvciBleGFtcGxlOlxuICpcbiAqICB2YXIgTXlMaW5rID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgcHJvcFR5cGVzOiB7XG4gKiAgICAgIC8vIEFuIG9wdGlvbmFsIHN0cmluZyBvciBVUkkgcHJvcCBuYW1lZCBcImhyZWZcIi5cbiAqICAgICAgaHJlZjogZnVuY3Rpb24ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lKSB7XG4gKiAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAqICAgICAgICBpZiAocHJvcFZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHByb3BWYWx1ZSAhPT0gJ3N0cmluZycgJiZcbiAqICAgICAgICAgICAgIShwcm9wVmFsdWUgaW5zdGFuY2VvZiBVUkkpKSB7XG4gKiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKFxuICogICAgICAgICAgICAnRXhwZWN0ZWQgYSBzdHJpbmcgb3IgYW4gVVJJIGZvciAnICsgcHJvcE5hbWUgKyAnIGluICcgK1xuICogICAgICAgICAgICBjb21wb25lbnROYW1lXG4gKiAgICAgICAgICApO1xuICogICAgICAgIH1cbiAqICAgICAgfVxuICogICAgfSxcbiAqICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7Li4ufVxuICogIH0pO1xuICpcbiAqIEBpbnRlcm5hbFxuICovXG5cbnZhciBBTk9OWU1PVVMgPSAnPDxhbm9ueW1vdXM+Pic7XG5cbnZhciBSZWFjdFByb3BUeXBlcyA9IHtcbiAgYXJyYXk6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdhcnJheScpLFxuICBib29sOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignYm9vbGVhbicpLFxuICBmdW5jOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignZnVuY3Rpb24nKSxcbiAgbnVtYmVyOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignbnVtYmVyJyksXG4gIG9iamVjdDogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ29iamVjdCcpLFxuICBzdHJpbmc6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdzdHJpbmcnKSxcblxuICBhbnk6IGNyZWF0ZUFueVR5cGVDaGVja2VyKCksXG4gIGFycmF5T2Y6IGNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlcixcbiAgZWxlbWVudDogY3JlYXRlRWxlbWVudFR5cGVDaGVja2VyKCksXG4gIGluc3RhbmNlT2Y6IGNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIsXG4gIG5vZGU6IGNyZWF0ZU5vZGVDaGVja2VyKCksXG4gIG9iamVjdE9mOiBjcmVhdGVPYmplY3RPZlR5cGVDaGVja2VyLFxuICBvbmVPZjogY3JlYXRlRW51bVR5cGVDaGVja2VyLFxuICBvbmVPZlR5cGU6IGNyZWF0ZVVuaW9uVHlwZUNoZWNrZXIsXG4gIHNoYXBlOiBjcmVhdGVTaGFwZVR5cGVDaGVja2VyXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSkge1xuICBmdW5jdGlvbiBjaGVja1R5cGUoaXNSZXF1aXJlZCwgcHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudE5hbWUgfHwgQU5PTllNT1VTO1xuICAgIHByb3BGdWxsTmFtZSA9IHByb3BGdWxsTmFtZSB8fCBwcm9wTmFtZTtcbiAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09IG51bGwpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICBpZiAoaXNSZXF1aXJlZCkge1xuICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdSZXF1aXJlZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHdhcyBub3Qgc3BlY2lmaWVkIGluICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLicpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKTtcbiAgICB9XG4gIH1cblxuICB2YXIgY2hhaW5lZENoZWNrVHlwZSA9IGNoZWNrVHlwZS5iaW5kKG51bGwsIGZhbHNlKTtcbiAgY2hhaW5lZENoZWNrVHlwZS5pc1JlcXVpcmVkID0gY2hlY2tUeXBlLmJpbmQobnVsbCwgdHJ1ZSk7XG5cbiAgcmV0dXJuIGNoYWluZWRDaGVja1R5cGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKGV4cGVjdGVkVHlwZSkge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgaWYgKHByb3BUeXBlICE9PSBleHBlY3RlZFR5cGUpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICAvLyBgcHJvcFZhbHVlYCBiZWluZyBpbnN0YW5jZSBvZiwgc2F5LCBkYXRlL3JlZ2V4cCwgcGFzcyB0aGUgJ29iamVjdCdcbiAgICAgIC8vIGNoZWNrLCBidXQgd2UgY2FuIG9mZmVyIGEgbW9yZSBwcmVjaXNlIGVycm9yIG1lc3NhZ2UgaGVyZSByYXRoZXIgdGhhblxuICAgICAgLy8gJ29mIHR5cGUgYG9iamVjdGAnLlxuICAgICAgdmFyIHByZWNpc2VUeXBlID0gZ2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKTtcblxuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcmVjaXNlVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCAnKSArICgnYCcgKyBleHBlY3RlZFR5cGUgKyAnYC4nKSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFueVR5cGVDaGVja2VyKCkge1xuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIoZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJucyhudWxsKSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlcih0eXBlQ2hlY2tlcikge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYW4gYXJyYXkuJykpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGVycm9yID0gdHlwZUNoZWNrZXIocHJvcFZhbHVlLCBpLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJ1snICsgaSArICddJywgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlcigpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgaWYgKCFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQocHJvcHNbcHJvcE5hbWVdKSkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBzdXBwbGllZCB0byAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYSBzaW5nbGUgUmVhY3RFbGVtZW50LicpKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2VUeXBlQ2hlY2tlcihleHBlY3RlZENsYXNzKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIGlmICghKHByb3BzW3Byb3BOYW1lXSBpbnN0YW5jZW9mIGV4cGVjdGVkQ2xhc3MpKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgdmFyIGV4cGVjdGVkQ2xhc3NOYW1lID0gZXhwZWN0ZWRDbGFzcy5uYW1lIHx8IEFOT05ZTU9VUztcbiAgICAgIHZhciBhY3R1YWxDbGFzc05hbWUgPSBnZXRDbGFzc05hbWUocHJvcHNbcHJvcE5hbWVdKTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgYWN0dWFsQ2xhc3NOYW1lICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkICcpICsgKCdpbnN0YW5jZSBvZiBgJyArIGV4cGVjdGVkQ2xhc3NOYW1lICsgJ2AuJykpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVFbnVtVHlwZUNoZWNrZXIoZXhwZWN0ZWRWYWx1ZXMpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGV4cGVjdGVkVmFsdWVzKSkge1xuICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mLCBleHBlY3RlZCBhbiBpbnN0YW5jZSBvZiBhcnJheS4nKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleHBlY3RlZFZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHByb3BWYWx1ZSA9PT0gZXhwZWN0ZWRWYWx1ZXNbaV0pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICB2YXIgdmFsdWVzU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZXhwZWN0ZWRWYWx1ZXMpO1xuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB2YWx1ZSBgJyArIHByb3BWYWx1ZSArICdgICcgKyAoJ3N1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBvbmUgb2YgJyArIHZhbHVlc1N0cmluZyArICcuJykpO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIodHlwZUNoZWNrZXIpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuICAgIGlmIChwcm9wVHlwZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByb3BUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGFuIG9iamVjdC4nKSk7XG4gICAgfVxuICAgIGZvciAodmFyIGtleSBpbiBwcm9wVmFsdWUpIHtcbiAgICAgIGlmIChwcm9wVmFsdWUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICB2YXIgZXJyb3IgPSB0eXBlQ2hlY2tlcihwcm9wVmFsdWUsIGtleSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSArICcuJyArIGtleSwgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVVuaW9uVHlwZUNoZWNrZXIoYXJyYXlPZlR5cGVDaGVja2Vycykge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXlPZlR5cGVDaGVja2VycykpIHtcbiAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudCBzdXBwbGllZCB0byBvbmVPZlR5cGUsIGV4cGVjdGVkIGFuIGluc3RhbmNlIG9mIGFycmF5LicpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheU9mVHlwZUNoZWNrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY2hlY2tlciA9IGFycmF5T2ZUeXBlQ2hlY2tlcnNbaV07XG4gICAgICBpZiAoY2hlY2tlcihwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUsICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCcpID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agc3VwcGxpZWQgdG8gJyArICgnYCcgKyBjb21wb25lbnROYW1lICsgJ2AuJykpO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vZGVDaGVja2VyKCkge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICBpZiAoIWlzTm9kZShwcm9wc1twcm9wTmFtZV0pKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHN1cHBsaWVkIHRvICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhIFJlYWN0Tm9kZS4nKSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNoYXBlVHlwZUNoZWNrZXIoc2hhcGVUeXBlcykge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgaWYgKHByb3BUeXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlIGAnICsgcHJvcFR5cGUgKyAnYCAnICsgKCdzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYG9iamVjdGAuJykpO1xuICAgIH1cbiAgICBmb3IgKHZhciBrZXkgaW4gc2hhcGVUeXBlcykge1xuICAgICAgdmFyIGNoZWNrZXIgPSBzaGFwZVR5cGVzW2tleV07XG4gICAgICBpZiAoIWNoZWNrZXIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgZXJyb3IgPSBjaGVja2VyKHByb3BWYWx1ZSwga2V5LCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJy4nICsga2V5LCAnU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQnKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGlzTm9kZShwcm9wVmFsdWUpIHtcbiAgc3dpdGNoICh0eXBlb2YgcHJvcFZhbHVlKSB7XG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgIGNhc2UgJ3VuZGVmaW5lZCc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIHJldHVybiAhcHJvcFZhbHVlO1xuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBwcm9wVmFsdWUuZXZlcnkoaXNOb2RlKTtcbiAgICAgIH1cbiAgICAgIGlmIChwcm9wVmFsdWUgPT09IG51bGwgfHwgUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KHByb3BWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihwcm9wVmFsdWUpO1xuICAgICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKHByb3BWYWx1ZSk7XG4gICAgICAgIHZhciBzdGVwO1xuICAgICAgICBpZiAoaXRlcmF0b3JGbiAhPT0gcHJvcFZhbHVlLmVudHJpZXMpIHtcbiAgICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICBpZiAoIWlzTm9kZShzdGVwLnZhbHVlKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEl0ZXJhdG9yIHdpbGwgcHJvdmlkZSBlbnRyeSBbayx2XSB0dXBsZXMgcmF0aGVyIHRoYW4gdmFsdWVzLlxuICAgICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHN0ZXAudmFsdWU7XG4gICAgICAgICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgaWYgKCFpc05vZGUoZW50cnlbMV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gRXF1aXZhbGVudCBvZiBgdHlwZW9mYCBidXQgd2l0aCBzcGVjaWFsIGhhbmRsaW5nIGZvciBhcnJheSBhbmQgcmVnZXhwLlxuZnVuY3Rpb24gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKSB7XG4gIHZhciBwcm9wVHlwZSA9IHR5cGVvZiBwcm9wVmFsdWU7XG4gIGlmIChBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHtcbiAgICByZXR1cm4gJ2FycmF5JztcbiAgfVxuICBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgLy8gT2xkIHdlYmtpdHMgKGF0IGxlYXN0IHVudGlsIEFuZHJvaWQgNC4wKSByZXR1cm4gJ2Z1bmN0aW9uJyByYXRoZXIgdGhhblxuICAgIC8vICdvYmplY3QnIGZvciB0eXBlb2YgYSBSZWdFeHAuIFdlJ2xsIG5vcm1hbGl6ZSB0aGlzIGhlcmUgc28gdGhhdCAvYmxhL1xuICAgIC8vIHBhc3NlcyBQcm9wVHlwZXMub2JqZWN0LlxuICAgIHJldHVybiAnb2JqZWN0JztcbiAgfVxuICByZXR1cm4gcHJvcFR5cGU7XG59XG5cbi8vIFRoaXMgaGFuZGxlcyBtb3JlIHR5cGVzIHRoYW4gYGdldFByb3BUeXBlYC4gT25seSB1c2VkIGZvciBlcnJvciBtZXNzYWdlcy5cbi8vIFNlZSBgY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXJgLlxuZnVuY3Rpb24gZ2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKSB7XG4gIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gIGlmIChwcm9wVHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgcmV0dXJuICdkYXRlJztcbiAgICB9IGVsc2UgaWYgKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgcmV0dXJuICdyZWdleHAnO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcHJvcFR5cGU7XG59XG5cbi8vIFJldHVybnMgY2xhc3MgbmFtZSBvZiB0aGUgb2JqZWN0LCBpZiBhbnkuXG5mdW5jdGlvbiBnZXRDbGFzc05hbWUocHJvcFZhbHVlKSB7XG4gIGlmICghcHJvcFZhbHVlLmNvbnN0cnVjdG9yIHx8ICFwcm9wVmFsdWUuY29uc3RydWN0b3IubmFtZSkge1xuICAgIHJldHVybiAnPDxhbm9ueW1vdXM+Pic7XG4gIH1cbiAgcmV0dXJuIHByb3BWYWx1ZS5jb25zdHJ1Y3Rvci5uYW1lO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENhbGxiYWNrUXVldWUgPSByZXF1aXJlKCcuL0NhbGxiYWNrUXVldWUnKTtcbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlcicpO1xudmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0gcmVxdWlyZSgnLi9SZWFjdERPTUZlYXR1cmVGbGFncycpO1xudmFyIFJlYWN0SW5wdXRTZWxlY3Rpb24gPSByZXF1aXJlKCcuL1JlYWN0SW5wdXRTZWxlY3Rpb24nKTtcbnZhciBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vVHJhbnNhY3Rpb24nKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xuXG4vKipcbiAqIEVuc3VyZXMgdGhhdCwgd2hlbiBwb3NzaWJsZSwgdGhlIHNlbGVjdGlvbiByYW5nZSAoY3VycmVudGx5IHNlbGVjdGVkIHRleHRcbiAqIGlucHV0KSBpcyBub3QgZGlzdHVyYmVkIGJ5IHBlcmZvcm1pbmcgdGhlIHRyYW5zYWN0aW9uLlxuICovXG52YXIgU0VMRUNUSU9OX1JFU1RPUkFUSU9OID0ge1xuICAvKipcbiAgICogQHJldHVybiB7U2VsZWN0aW9ufSBTZWxlY3Rpb24gaW5mb3JtYXRpb24uXG4gICAqL1xuICBpbml0aWFsaXplOiBSZWFjdElucHV0U2VsZWN0aW9uLmdldFNlbGVjdGlvbkluZm9ybWF0aW9uLFxuICAvKipcbiAgICogQHBhcmFtIHtTZWxlY3Rpb259IHNlbCBTZWxlY3Rpb24gaW5mb3JtYXRpb24gcmV0dXJuZWQgZnJvbSBgaW5pdGlhbGl6ZWAuXG4gICAqL1xuICBjbG9zZTogUmVhY3RJbnB1dFNlbGVjdGlvbi5yZXN0b3JlU2VsZWN0aW9uXG59O1xuXG4vKipcbiAqIFN1cHByZXNzZXMgZXZlbnRzIChibHVyL2ZvY3VzKSB0aGF0IGNvdWxkIGJlIGluYWR2ZXJ0ZW50bHkgZGlzcGF0Y2hlZCBkdWUgdG9cbiAqIGhpZ2ggbGV2ZWwgRE9NIG1hbmlwdWxhdGlvbnMgKGxpa2UgdGVtcG9yYXJpbHkgcmVtb3ZpbmcgYSB0ZXh0IGlucHV0IGZyb20gdGhlXG4gKiBET00pLlxuICovXG52YXIgRVZFTlRfU1VQUFJFU1NJT04gPSB7XG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZW5hYmxlZCBzdGF0dXMgb2YgYFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcmAgYmVmb3JlXG4gICAqIHRoZSByZWNvbmNpbGlhdGlvbi5cbiAgICovXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY3VycmVudGx5RW5hYmxlZCA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5pc0VuYWJsZWQoKTtcbiAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuc2V0RW5hYmxlZChmYWxzZSk7XG4gICAgcmV0dXJuIGN1cnJlbnRseUVuYWJsZWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJldmlvdXNseUVuYWJsZWQgRW5hYmxlZCBzdGF0dXMgb2ZcbiAgICogICBgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyYCBiZWZvcmUgdGhlIHJlY29uY2lsaWF0aW9uIG9jY3VycmVkLiBgY2xvc2VgXG4gICAqICAgcmVzdG9yZXMgdGhlIHByZXZpb3VzIHZhbHVlLlxuICAgKi9cbiAgY2xvc2U6IGZ1bmN0aW9uIChwcmV2aW91c2x5RW5hYmxlZCkge1xuICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5zZXRFbmFibGVkKHByZXZpb3VzbHlFbmFibGVkKTtcbiAgfVxufTtcblxuLyoqXG4gKiBQcm92aWRlcyBhIHF1ZXVlIGZvciBjb2xsZWN0aW5nIGBjb21wb25lbnREaWRNb3VudGAgYW5kXG4gKiBgY29tcG9uZW50RGlkVXBkYXRlYCBjYWxsYmFja3MgZHVyaW5nIHRoZSB0aGUgdHJhbnNhY3Rpb24uXG4gKi9cbnZhciBPTl9ET01fUkVBRFlfUVVFVUVJTkcgPSB7XG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgaW50ZXJuYWwgYG9uRE9NUmVhZHlgIHF1ZXVlLlxuICAgKi9cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVhY3RNb3VudFJlYWR5LnJlc2V0KCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFmdGVyIERPTSBpcyBmbHVzaGVkLCBpbnZva2UgYWxsIHJlZ2lzdGVyZWQgYG9uRE9NUmVhZHlgIGNhbGxiYWNrcy5cbiAgICovXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkubm90aWZ5QWxsKCk7XG4gIH1cbn07XG5cbi8qKlxuICogRXhlY3V0ZWQgd2l0aGluIHRoZSBzY29wZSBvZiB0aGUgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gQ29uc2lkZXIgdGhlc2UgYXNcbiAqIGJlaW5nIG1lbWJlciBtZXRob2RzLCBidXQgd2l0aCBhbiBpbXBsaWVkIG9yZGVyaW5nIHdoaWxlIGJlaW5nIGlzb2xhdGVkIGZyb21cbiAqIGVhY2ggb3RoZXIuXG4gKi9cbnZhciBUUkFOU0FDVElPTl9XUkFQUEVSUyA9IFtTRUxFQ1RJT05fUkVTVE9SQVRJT04sIEVWRU5UX1NVUFBSRVNTSU9OLCBPTl9ET01fUkVBRFlfUVVFVUVJTkddO1xuXG4vKipcbiAqIEN1cnJlbnRseTpcbiAqIC0gVGhlIG9yZGVyIHRoYXQgdGhlc2UgYXJlIGxpc3RlZCBpbiB0aGUgdHJhbnNhY3Rpb24gaXMgY3JpdGljYWw6XG4gKiAtIFN1cHByZXNzZXMgZXZlbnRzLlxuICogLSBSZXN0b3JlcyBzZWxlY3Rpb24gcmFuZ2UuXG4gKlxuICogRnV0dXJlOlxuICogLSBSZXN0b3JlIGRvY3VtZW50L292ZXJmbG93IHNjcm9sbCBwb3NpdGlvbnMgdGhhdCB3ZXJlIHVuaW50ZW50aW9uYWxseVxuICogICBtb2RpZmllZCB2aWEgRE9NIGluc2VydGlvbnMgYWJvdmUgdGhlIHRvcCB2aWV3cG9ydCBib3VuZGFyeS5cbiAqIC0gSW1wbGVtZW50L2ludGVncmF0ZSB3aXRoIGN1c3RvbWl6ZWQgY29uc3RyYWludCBiYXNlZCBsYXlvdXQgc3lzdGVtIGFuZCBrZWVwXG4gKiAgIHRyYWNrIG9mIHdoaWNoIGRpbWVuc2lvbnMgbXVzdCBiZSByZW1lYXN1cmVkLlxuICpcbiAqIEBjbGFzcyBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uXG4gKi9cbmZ1bmN0aW9uIFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24oZm9yY2VIVE1MKSB7XG4gIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcbiAgLy8gT25seSBzZXJ2ZXItc2lkZSByZW5kZXJpbmcgcmVhbGx5IG5lZWRzIHRoaXMgb3B0aW9uIChzZWVcbiAgLy8gYFJlYWN0U2VydmVyUmVuZGVyaW5nYCksIGJ1dCBzZXJ2ZXItc2lkZSB1c2VzXG4gIC8vIGBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uYCBpbnN0ZWFkLiBUaGlzIG9wdGlvbiBpcyBoZXJlIHNvIHRoYXQgaXQnc1xuICAvLyBhY2Nlc3NpYmxlIGFuZCBkZWZhdWx0cyB0byBmYWxzZSB3aGVuIGBSZWFjdERPTUNvbXBvbmVudGAgYW5kXG4gIC8vIGBSZWFjdFRleHRDb21wb25lbnRgIGNoZWNrcyBpdCBpbiBgbW91bnRDb21wb25lbnRgLmBcbiAgdGhpcy5yZW5kZXJUb1N0YXRpY01hcmt1cCA9IGZhbHNlO1xuICB0aGlzLnJlYWN0TW91bnRSZWFkeSA9IENhbGxiYWNrUXVldWUuZ2V0UG9vbGVkKG51bGwpO1xuICB0aGlzLnVzZUNyZWF0ZUVsZW1lbnQgPSAhZm9yY2VIVE1MICYmIFJlYWN0RE9NRmVhdHVyZUZsYWdzLnVzZUNyZWF0ZUVsZW1lbnQ7XG59XG5cbnZhciBNaXhpbiA9IHtcbiAgLyoqXG4gICAqIEBzZWUgVHJhbnNhY3Rpb25cbiAgICogQGFic3RyYWN0XG4gICAqIEBmaW5hbFxuICAgKiBAcmV0dXJuIHthcnJheTxvYmplY3Q+fSBMaXN0IG9mIG9wZXJhdGlvbiB3cmFwIHByb2NlZHVyZXMuXG4gICAqICAgVE9ETzogY29udmVydCB0byBhcnJheTxUcmFuc2FjdGlvbldyYXBwZXI+XG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFRSQU5TQUNUSU9OX1dSQVBQRVJTO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBxdWV1ZSB0byBjb2xsZWN0IGBvbkRPTVJlYWR5YCBjYWxsYmFja3Mgd2l0aC5cbiAgICovXG4gIGdldFJlYWN0TW91bnRSZWFkeTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWN0TW91bnRSZWFkeTtcbiAgfSxcblxuICAvKipcbiAgICogYFBvb2xlZENsYXNzYCBsb29rcyBmb3IgdGhpcywgYW5kIHdpbGwgaW52b2tlIHRoaXMgYmVmb3JlIGFsbG93aW5nIHRoaXNcbiAgICogaW5zdGFuY2UgdG8gYmUgcmV1c2VkLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIENhbGxiYWNrUXVldWUucmVsZWFzZSh0aGlzLnJlYWN0TW91bnRSZWFkeSk7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkgPSBudWxsO1xuICB9XG59O1xuXG5hc3NpZ24oUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5wcm90b3R5cGUsIFRyYW5zYWN0aW9uLk1peGluLCBNaXhpbik7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFJlY29uY2lsZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFJlZiA9IHJlcXVpcmUoJy4vUmVhY3RSZWYnKTtcblxuLyoqXG4gKiBIZWxwZXIgdG8gY2FsbCBSZWFjdFJlZi5hdHRhY2hSZWZzIHdpdGggdGhpcyBjb21wb3NpdGUgY29tcG9uZW50LCBzcGxpdCBvdXRcbiAqIHRvIGF2b2lkIGFsbG9jYXRpb25zIGluIHRoZSB0cmFuc2FjdGlvbiBtb3VudC1yZWFkeSBxdWV1ZS5cbiAqL1xuZnVuY3Rpb24gYXR0YWNoUmVmcygpIHtcbiAgUmVhY3RSZWYuYXR0YWNoUmVmcyh0aGlzLCB0aGlzLl9jdXJyZW50RWxlbWVudCk7XG59XG5cbnZhciBSZWFjdFJlY29uY2lsZXIgPSB7XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBjb21wb25lbnQsIHJlbmRlcnMgbWFya3VwLCBhbmQgcmVnaXN0ZXJzIGV2ZW50IGxpc3RlbmVycy5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gaW50ZXJuYWxJbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHJldHVybiB7P3N0cmluZ30gUmVuZGVyZWQgbWFya3VwIHRvIGJlIGluc2VydGVkIGludG8gdGhlIERPTS5cbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdmFyIG1hcmt1cCA9IGludGVybmFsSW5zdGFuY2UubW91bnRDb21wb25lbnQocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgaWYgKGludGVybmFsSW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50ICYmIGludGVybmFsSW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50LnJlZiAhPSBudWxsKSB7XG4gICAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKGF0dGFjaFJlZnMsIGludGVybmFsSW5zdGFuY2UpO1xuICAgIH1cbiAgICByZXR1cm4gbWFya3VwO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyBhbnkgcmVzb3VyY2VzIGFsbG9jYXRlZCBieSBgbW91bnRDb21wb25lbnRgLlxuICAgKlxuICAgKiBAZmluYWxcbiAgICogQGludGVybmFsXG4gICAqL1xuICB1bm1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAoaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgIFJlYWN0UmVmLmRldGFjaFJlZnMoaW50ZXJuYWxJbnN0YW5jZSwgaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQpO1xuICAgIGludGVybmFsSW5zdGFuY2UudW5tb3VudENvbXBvbmVudCgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYSBjb21wb25lbnQgdXNpbmcgYSBuZXcgZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gaW50ZXJuYWxJbnN0YW5jZVxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnRcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHJlY2VpdmVDb21wb25lbnQ6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCBuZXh0RWxlbWVudCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB2YXIgcHJldkVsZW1lbnQgPSBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudDtcblxuICAgIGlmIChuZXh0RWxlbWVudCA9PT0gcHJldkVsZW1lbnQgJiYgY29udGV4dCA9PT0gaW50ZXJuYWxJbnN0YW5jZS5fY29udGV4dCkge1xuICAgICAgLy8gU2luY2UgZWxlbWVudHMgYXJlIGltbXV0YWJsZSBhZnRlciB0aGUgb3duZXIgaXMgcmVuZGVyZWQsXG4gICAgICAvLyB3ZSBjYW4gZG8gYSBjaGVhcCBpZGVudGl0eSBjb21wYXJlIGhlcmUgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXMgYVxuICAgICAgLy8gc3VwZXJmbHVvdXMgcmVjb25jaWxlLiBJdCdzIHBvc3NpYmxlIGZvciBzdGF0ZSB0byBiZSBtdXRhYmxlIGJ1dCBzdWNoXG4gICAgICAvLyBjaGFuZ2Ugc2hvdWxkIHRyaWdnZXIgYW4gdXBkYXRlIG9mIHRoZSBvd25lciB3aGljaCB3b3VsZCByZWNyZWF0ZVxuICAgICAgLy8gdGhlIGVsZW1lbnQuIFdlIGV4cGxpY2l0bHkgY2hlY2sgZm9yIHRoZSBleGlzdGVuY2Ugb2YgYW4gb3duZXIgc2luY2VcbiAgICAgIC8vIGl0J3MgcG9zc2libGUgZm9yIGFuIGVsZW1lbnQgY3JlYXRlZCBvdXRzaWRlIGEgY29tcG9zaXRlIHRvIGJlXG4gICAgICAvLyBkZWVwbHkgbXV0YXRlZCBhbmQgcmV1c2VkLlxuXG4gICAgICAvLyBUT0RPOiBCYWlsaW5nIG91dCBlYXJseSBpcyBqdXN0IGEgcGVyZiBvcHRpbWl6YXRpb24gcmlnaHQ/XG4gICAgICAvLyBUT0RPOiBSZW1vdmluZyB0aGUgcmV0dXJuIHN0YXRlbWVudCBzaG91bGQgYWZmZWN0IGNvcnJlY3RuZXNzP1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciByZWZzQ2hhbmdlZCA9IFJlYWN0UmVmLnNob3VsZFVwZGF0ZVJlZnMocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KTtcblxuICAgIGlmIChyZWZzQ2hhbmdlZCkge1xuICAgICAgUmVhY3RSZWYuZGV0YWNoUmVmcyhpbnRlcm5hbEluc3RhbmNlLCBwcmV2RWxlbWVudCk7XG4gICAgfVxuXG4gICAgaW50ZXJuYWxJbnN0YW5jZS5yZWNlaXZlQ29tcG9uZW50KG5leHRFbGVtZW50LCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG5cbiAgICBpZiAocmVmc0NoYW5nZWQgJiYgaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQgJiYgaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQucmVmICE9IG51bGwpIHtcbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoYXR0YWNoUmVmcywgaW50ZXJuYWxJbnN0YW5jZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBGbHVzaCBhbnkgZGlydHkgY2hhbmdlcyBpbiBhIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gaW50ZXJuYWxJbnN0YW5jZVxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5OiBmdW5jdGlvbiAoaW50ZXJuYWxJbnN0YW5jZSwgdHJhbnNhY3Rpb24pIHtcbiAgICBpbnRlcm5hbEluc3RhbmNlLnBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSh0cmFuc2FjdGlvbik7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFJlY29uY2lsZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UmVmXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RPd25lcicpO1xuXG52YXIgUmVhY3RSZWYgPSB7fTtcblxuZnVuY3Rpb24gYXR0YWNoUmVmKHJlZiwgY29tcG9uZW50LCBvd25lcikge1xuICBpZiAodHlwZW9mIHJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJlZihjb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gTGVnYWN5IHJlZlxuICAgIFJlYWN0T3duZXIuYWRkQ29tcG9uZW50QXNSZWZUbyhjb21wb25lbnQsIHJlZiwgb3duZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRldGFjaFJlZihyZWYsIGNvbXBvbmVudCwgb3duZXIpIHtcbiAgaWYgKHR5cGVvZiByZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZWYobnVsbCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gTGVnYWN5IHJlZlxuICAgIFJlYWN0T3duZXIucmVtb3ZlQ29tcG9uZW50QXNSZWZGcm9tKGNvbXBvbmVudCwgcmVmLCBvd25lcik7XG4gIH1cbn1cblxuUmVhY3RSZWYuYXR0YWNoUmVmcyA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgZWxlbWVudCkge1xuICBpZiAoZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgcmVmID0gZWxlbWVudC5yZWY7XG4gIGlmIChyZWYgIT0gbnVsbCkge1xuICAgIGF0dGFjaFJlZihyZWYsIGluc3RhbmNlLCBlbGVtZW50Ll9vd25lcik7XG4gIH1cbn07XG5cblJlYWN0UmVmLnNob3VsZFVwZGF0ZVJlZnMgPSBmdW5jdGlvbiAocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KSB7XG4gIC8vIElmIGVpdGhlciB0aGUgb3duZXIgb3IgYSBgcmVmYCBoYXMgY2hhbmdlZCwgbWFrZSBzdXJlIHRoZSBuZXdlc3Qgb3duZXJcbiAgLy8gaGFzIHN0b3JlZCBhIHJlZmVyZW5jZSB0byBgdGhpc2AsIGFuZCB0aGUgcHJldmlvdXMgb3duZXIgKGlmIGRpZmZlcmVudClcbiAgLy8gaGFzIGZvcmdvdHRlbiB0aGUgcmVmZXJlbmNlIHRvIGB0aGlzYC4gV2UgdXNlIHRoZSBlbGVtZW50IGluc3RlYWRcbiAgLy8gb2YgdGhlIHB1YmxpYyB0aGlzLnByb3BzIGJlY2F1c2UgdGhlIHBvc3QgcHJvY2Vzc2luZyBjYW5ub3QgZGV0ZXJtaW5lXG4gIC8vIGEgcmVmLiBUaGUgcmVmIGNvbmNlcHR1YWxseSBsaXZlcyBvbiB0aGUgZWxlbWVudC5cblxuICAvLyBUT0RPOiBTaG91bGQgdGhpcyBldmVuIGJlIHBvc3NpYmxlPyBUaGUgb3duZXIgY2Fubm90IGNoYW5nZSBiZWNhdXNlXG4gIC8vIGl0J3MgZm9yYmlkZGVuIGJ5IHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50LiBUaGUgcmVmIGNhbiBjaGFuZ2VcbiAgLy8gaWYgeW91IHN3YXAgdGhlIGtleXMgb2YgYnV0IG5vdCB0aGUgcmVmcy4gUmVjb25zaWRlciB3aGVyZSB0aGlzIGNoZWNrXG4gIC8vIGlzIG1hZGUuIEl0IHByb2JhYmx5IGJlbG9uZ3Mgd2hlcmUgdGhlIGtleSBjaGVja2luZyBhbmRcbiAgLy8gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCBpcyBkb25lLlxuXG4gIHZhciBwcmV2RW1wdHkgPSBwcmV2RWxlbWVudCA9PT0gbnVsbCB8fCBwcmV2RWxlbWVudCA9PT0gZmFsc2U7XG4gIHZhciBuZXh0RW1wdHkgPSBuZXh0RWxlbWVudCA9PT0gbnVsbCB8fCBuZXh0RWxlbWVudCA9PT0gZmFsc2U7XG5cbiAgcmV0dXJuKFxuICAgIC8vIFRoaXMgaGFzIGEgZmV3IGZhbHNlIHBvc2l0aXZlcyB3L3IvdCBlbXB0eSBjb21wb25lbnRzLlxuICAgIHByZXZFbXB0eSB8fCBuZXh0RW1wdHkgfHwgbmV4dEVsZW1lbnQuX293bmVyICE9PSBwcmV2RWxlbWVudC5fb3duZXIgfHwgbmV4dEVsZW1lbnQucmVmICE9PSBwcmV2RWxlbWVudC5yZWZcbiAgKTtcbn07XG5cblJlYWN0UmVmLmRldGFjaFJlZnMgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnQgPT09IG51bGwgfHwgZWxlbWVudCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHJlZiA9IGVsZW1lbnQucmVmO1xuICBpZiAocmVmICE9IG51bGwpIHtcbiAgICBkZXRhY2hSZWYocmVmLCBpbnN0YW5jZSwgZWxlbWVudC5fb3duZXIpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UmVmOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFJvb3RJbmRleFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFJvb3RJbmRleEluamVjdGlvbiA9IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9jcmVhdGVSZWFjdFJvb3RJbmRleFxuICAgKi9cbiAgaW5qZWN0Q3JlYXRlUmVhY3RSb290SW5kZXg6IGZ1bmN0aW9uIChfY3JlYXRlUmVhY3RSb290SW5kZXgpIHtcbiAgICBSZWFjdFJvb3RJbmRleC5jcmVhdGVSZWFjdFJvb3RJbmRleCA9IF9jcmVhdGVSZWFjdFJvb3RJbmRleDtcbiAgfVxufTtcblxudmFyIFJlYWN0Um9vdEluZGV4ID0ge1xuICBjcmVhdGVSZWFjdFJvb3RJbmRleDogbnVsbCxcbiAgaW5qZWN0aW9uOiBSZWFjdFJvb3RJbmRleEluamVjdGlvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFJvb3RJbmRleDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5XG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneSA9IHtcbiAgaXNCYXRjaGluZ1VwZGF0ZXM6IGZhbHNlLFxuICBiYXRjaGVkVXBkYXRlczogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaGVyZS4gRHVyaW5nIHRoZSBzZXJ2ZXIgcmVuZGVyaW5nIHdlIGRvbid0IHdhbnQgdG9cbiAgICAvLyBzY2hlZHVsZSBhbnkgdXBkYXRlcy4gV2Ugd2lsbCBzaW1wbHkgaWdub3JlIHRoZW0uXG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSA9IHJlcXVpcmUoJy4vUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneScpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VIYW5kbGVzJyk7XG52YXIgUmVhY3RNYXJrdXBDaGVja3N1bSA9IHJlcXVpcmUoJy4vUmVhY3RNYXJrdXBDaGVja3N1bScpO1xudmFyIFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneSA9IHJlcXVpcmUoJy4vUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5Jyk7XG52YXIgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbicpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBlbXB0eU9iamVjdCA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5T2JqZWN0Jyk7XG52YXIgaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBIVE1MIG1hcmt1cFxuICovXG5mdW5jdGlvbiByZW5kZXJUb1N0cmluZyhlbGVtZW50KSB7XG4gICFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoZWxlbWVudCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAncmVuZGVyVG9TdHJpbmcoKTogWW91IG11c3QgcGFzcyBhIHZhbGlkIFJlYWN0RWxlbWVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgdmFyIHRyYW5zYWN0aW9uO1xuICB0cnkge1xuICAgIFJlYWN0VXBkYXRlcy5pbmplY3Rpb24uaW5qZWN0QmF0Y2hpbmdTdHJhdGVneShSZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3kpO1xuXG4gICAgdmFyIGlkID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuY3JlYXRlUmVhY3RSb290SUQoKTtcbiAgICB0cmFuc2FjdGlvbiA9IFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKGZhbHNlKTtcblxuICAgIHJldHVybiB0cmFuc2FjdGlvbi5wZXJmb3JtKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQoZWxlbWVudCwgbnVsbCk7XG4gICAgICB2YXIgbWFya3VwID0gY29tcG9uZW50SW5zdGFuY2UubW91bnRDb21wb25lbnQoaWQsIHRyYW5zYWN0aW9uLCBlbXB0eU9iamVjdCk7XG4gICAgICByZXR1cm4gUmVhY3RNYXJrdXBDaGVja3N1bS5hZGRDaGVja3N1bVRvTWFya3VwKG1hcmt1cCk7XG4gICAgfSwgbnVsbCk7XG4gIH0gZmluYWxseSB7XG4gICAgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5yZWxlYXNlKHRyYW5zYWN0aW9uKTtcbiAgICAvLyBSZXZlcnQgdG8gdGhlIERPTSBiYXRjaGluZyBzdHJhdGVneSBzaW5jZSB0aGVzZSB0d28gcmVuZGVyZXJzXG4gICAgLy8gY3VycmVudGx5IHNoYXJlIHRoZXNlIHN0YXRlZnVsIG1vZHVsZXMuXG4gICAgUmVhY3RVcGRhdGVzLmluamVjdGlvbi5pbmplY3RCYXRjaGluZ1N0cmF0ZWd5KFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kpO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge3N0cmluZ30gdGhlIEhUTUwgbWFya3VwLCB3aXRob3V0IHRoZSBleHRyYSBSZWFjdCBJRCBhbmQgY2hlY2tzdW1cbiAqIChmb3IgZ2VuZXJhdGluZyBzdGF0aWMgcGFnZXMpXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclRvU3RhdGljTWFya3VwKGVsZW1lbnQpIHtcbiAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChlbGVtZW50KSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdyZW5kZXJUb1N0YXRpY01hcmt1cCgpOiBZb3UgbXVzdCBwYXNzIGEgdmFsaWQgUmVhY3RFbGVtZW50LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICB2YXIgdHJhbnNhY3Rpb247XG4gIHRyeSB7XG4gICAgUmVhY3RVcGRhdGVzLmluamVjdGlvbi5pbmplY3RCYXRjaGluZ1N0cmF0ZWd5KFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneSk7XG5cbiAgICB2YXIgaWQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5jcmVhdGVSZWFjdFJvb3RJRCgpO1xuICAgIHRyYW5zYWN0aW9uID0gUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5nZXRQb29sZWQodHJ1ZSk7XG5cbiAgICByZXR1cm4gdHJhbnNhY3Rpb24ucGVyZm9ybShmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY29tcG9uZW50SW5zdGFuY2UgPSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KGVsZW1lbnQsIG51bGwpO1xuICAgICAgcmV0dXJuIGNvbXBvbmVudEluc3RhbmNlLm1vdW50Q29tcG9uZW50KGlkLCB0cmFuc2FjdGlvbiwgZW1wdHlPYmplY3QpO1xuICAgIH0sIG51bGwpO1xuICB9IGZpbmFsbHkge1xuICAgIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24ucmVsZWFzZSh0cmFuc2FjdGlvbik7XG4gICAgLy8gUmV2ZXJ0IHRvIHRoZSBET00gYmF0Y2hpbmcgc3RyYXRlZ3kgc2luY2UgdGhlc2UgdHdvIHJlbmRlcmVyc1xuICAgIC8vIGN1cnJlbnRseSBzaGFyZSB0aGVzZSBzdGF0ZWZ1bCBtb2R1bGVzLlxuICAgIFJlYWN0VXBkYXRlcy5pbmplY3Rpb24uaW5qZWN0QmF0Y2hpbmdTdHJhdGVneShSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmVuZGVyVG9TdHJpbmc6IHJlbmRlclRvU3RyaW5nLFxuICByZW5kZXJUb1N0YXRpY01hcmt1cDogcmVuZGVyVG9TdGF0aWNNYXJrdXBcbn07IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb25cbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG52YXIgQ2FsbGJhY2tRdWV1ZSA9IHJlcXVpcmUoJy4vQ2FsbGJhY2tRdWV1ZScpO1xudmFyIFRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9UcmFuc2FjdGlvbicpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcblxuLyoqXG4gKiBQcm92aWRlcyBhIGBDYWxsYmFja1F1ZXVlYCBxdWV1ZSBmb3IgY29sbGVjdGluZyBgb25ET01SZWFkeWAgY2FsbGJhY2tzXG4gKiBkdXJpbmcgdGhlIHBlcmZvcm1pbmcgb2YgdGhlIHRyYW5zYWN0aW9uLlxuICovXG52YXIgT05fRE9NX1JFQURZX1FVRVVFSU5HID0ge1xuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGludGVybmFsIGBvbkRPTVJlYWR5YCBxdWV1ZS5cbiAgICovXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlYWN0TW91bnRSZWFkeS5yZXNldCgpO1xuICB9LFxuXG4gIGNsb3NlOiBlbXB0eUZ1bmN0aW9uXG59O1xuXG4vKipcbiAqIEV4ZWN1dGVkIHdpdGhpbiB0aGUgc2NvcGUgb2YgdGhlIGBUcmFuc2FjdGlvbmAgaW5zdGFuY2UuIENvbnNpZGVyIHRoZXNlIGFzXG4gKiBiZWluZyBtZW1iZXIgbWV0aG9kcywgYnV0IHdpdGggYW4gaW1wbGllZCBvcmRlcmluZyB3aGlsZSBiZWluZyBpc29sYXRlZCBmcm9tXG4gKiBlYWNoIG90aGVyLlxuICovXG52YXIgVFJBTlNBQ1RJT05fV1JBUFBFUlMgPSBbT05fRE9NX1JFQURZX1FVRVVFSU5HXTtcblxuLyoqXG4gKiBAY2xhc3MgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvblxuICogQHBhcmFtIHtib29sZWFufSByZW5kZXJUb1N0YXRpY01hcmt1cFxuICovXG5mdW5jdGlvbiBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uKHJlbmRlclRvU3RhdGljTWFya3VwKSB7XG4gIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcbiAgdGhpcy5yZW5kZXJUb1N0YXRpY01hcmt1cCA9IHJlbmRlclRvU3RhdGljTWFya3VwO1xuICB0aGlzLnJlYWN0TW91bnRSZWFkeSA9IENhbGxiYWNrUXVldWUuZ2V0UG9vbGVkKG51bGwpO1xuICB0aGlzLnVzZUNyZWF0ZUVsZW1lbnQgPSBmYWxzZTtcbn1cblxudmFyIE1peGluID0ge1xuICAvKipcbiAgICogQHNlZSBUcmFuc2FjdGlvblxuICAgKiBAYWJzdHJhY3RcbiAgICogQGZpbmFsXG4gICAqIEByZXR1cm4ge2FycmF5fSBFbXB0eSBsaXN0IG9mIG9wZXJhdGlvbiB3cmFwIHByb2NlZHVyZXMuXG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFRSQU5TQUNUSU9OX1dSQVBQRVJTO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBxdWV1ZSB0byBjb2xsZWN0IGBvbkRPTVJlYWR5YCBjYWxsYmFja3Mgd2l0aC5cbiAgICovXG4gIGdldFJlYWN0TW91bnRSZWFkeTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWN0TW91bnRSZWFkeTtcbiAgfSxcblxuICAvKipcbiAgICogYFBvb2xlZENsYXNzYCBsb29rcyBmb3IgdGhpcywgYW5kIHdpbGwgaW52b2tlIHRoaXMgYmVmb3JlIGFsbG93aW5nIHRoaXNcbiAgICogaW5zdGFuY2UgdG8gYmUgcmV1c2VkLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIENhbGxiYWNrUXVldWUucmVsZWFzZSh0aGlzLnJlYWN0TW91bnRSZWFkeSk7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkgPSBudWxsO1xuICB9XG59O1xuXG5hc3NpZ24oUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5wcm90b3R5cGUsIFRyYW5zYWN0aW9uLk1peGluLCBNaXhpbik7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RVcGRhdGVRdWV1ZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZU1hcCcpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpIHtcbiAgUmVhY3RVcGRhdGVzLmVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG59XG5cbmZ1bmN0aW9uIGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgY2FsbGVyTmFtZSkge1xuICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KHB1YmxpY0luc3RhbmNlKTtcbiAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIE9ubHkgd2FybiB3aGVuIHdlIGhhdmUgYSBjYWxsZXJOYW1lLiBPdGhlcndpc2Ugd2Ugc2hvdWxkIGJlIHNpbGVudC5cbiAgICAgIC8vIFdlJ3JlIHByb2JhYmx5IGNhbGxpbmcgZnJvbSBlbnF1ZXVlQ2FsbGJhY2suIFdlIGRvbid0IHdhbnQgdG8gd2FyblxuICAgICAgLy8gdGhlcmUgYmVjYXVzZSB3ZSBhbHJlYWR5IHdhcm5lZCBmb3IgdGhlIGNvcnJlc3BvbmRpbmcgbGlmZWN5Y2xlIG1ldGhvZC5cbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFjYWxsZXJOYW1lLCAnJXMoLi4uKTogQ2FuIG9ubHkgdXBkYXRlIGEgbW91bnRlZCBvciBtb3VudGluZyBjb21wb25lbnQuICcgKyAnVGhpcyB1c3VhbGx5IG1lYW5zIHlvdSBjYWxsZWQgJXMoKSBvbiBhbiB1bm1vdW50ZWQgY29tcG9uZW50LiAnICsgJ1RoaXMgaXMgYSBuby1vcC4gUGxlYXNlIGNoZWNrIHRoZSBjb2RlIGZvciB0aGUgJXMgY29tcG9uZW50LicsIGNhbGxlck5hbWUsIGNhbGxlck5hbWUsIHB1YmxpY0luc3RhbmNlLmNvbnN0cnVjdG9yLmRpc3BsYXlOYW1lKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPT0gbnVsbCwgJyVzKC4uLik6IENhbm5vdCB1cGRhdGUgZHVyaW5nIGFuIGV4aXN0aW5nIHN0YXRlIHRyYW5zaXRpb24gJyArICcoc3VjaCBhcyB3aXRoaW4gYHJlbmRlcmApLiBSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uICcgKyAnb2YgcHJvcHMgYW5kIHN0YXRlLicsIGNhbGxlck5hbWUpIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgcmV0dXJuIGludGVybmFsSW5zdGFuY2U7XG59XG5cbi8qKlxuICogUmVhY3RVcGRhdGVRdWV1ZSBhbGxvd3MgZm9yIHN0YXRlIHVwZGF0ZXMgdG8gYmUgc2NoZWR1bGVkIGludG8gYSBsYXRlclxuICogcmVjb25jaWxpYXRpb24gc3RlcC5cbiAqL1xudmFyIFJlYWN0VXBkYXRlUXVldWUgPSB7XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGNvbXBvc2l0ZSBjb21wb25lbnQgaXMgbW91bnRlZC5cbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2Ugd2Ugd2FudCB0byB0ZXN0LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG1vdW50ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAZmluYWxcbiAgICovXG4gIGlzTW91bnRlZDogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBvd25lciA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQ7XG4gICAgICBpZiAob3duZXIgIT09IG51bGwpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcob3duZXIuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyLCAnJXMgaXMgYWNjZXNzaW5nIGlzTW91bnRlZCBpbnNpZGUgaXRzIHJlbmRlcigpIGZ1bmN0aW9uLiAnICsgJ3JlbmRlcigpIHNob3VsZCBiZSBhIHB1cmUgZnVuY3Rpb24gb2YgcHJvcHMgYW5kIHN0YXRlLiBJdCBzaG91bGQgJyArICduZXZlciBhY2Nlc3Mgc29tZXRoaW5nIHRoYXQgcmVxdWlyZXMgc3RhbGUgZGF0YSBmcm9tIHRoZSBwcmV2aW91cyAnICsgJ3JlbmRlciwgc3VjaCBhcyByZWZzLiBNb3ZlIHRoaXMgbG9naWMgdG8gY29tcG9uZW50RGlkTW91bnQgYW5kICcgKyAnY29tcG9uZW50RGlkVXBkYXRlIGluc3RlYWQuJywgb3duZXIuZ2V0TmFtZSgpIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgICBvd25lci5fd2FybmVkQWJvdXRSZWZzSW5SZW5kZXIgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KHB1YmxpY0luc3RhbmNlKTtcbiAgICBpZiAoaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgLy8gRHVyaW5nIGNvbXBvbmVudFdpbGxNb3VudCBhbmQgcmVuZGVyIHRoaXMgd2lsbCBzdGlsbCBiZSBudWxsIGJ1dCBhZnRlclxuICAgICAgLy8gdGhhdCB3aWxsIGFsd2F5cyByZW5kZXIgdG8gc29tZXRoaW5nLiBBdCBsZWFzdCBmb3Igbm93LiBTbyB3ZSBjYW4gdXNlXG4gICAgICAvLyB0aGlzIGhhY2suXG4gICAgICByZXR1cm4gISFpbnRlcm5hbEluc3RhbmNlLl9yZW5kZXJlZENvbXBvbmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRW5xdWV1ZSBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhZnRlciBhbGwgdGhlIHBlbmRpbmcgdXBkYXRlc1xuICAgKiBoYXZlIHByb2Nlc3NlZC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gdXNlIGFzIGB0aGlzYCBjb250ZXh0LlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHN0YXRlIGlzIHVwZGF0ZWQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZUNhbGxiYWNrOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIGNhbGxiYWNrKSB7XG4gICAgISh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2VucXVldWVDYWxsYmFjayguLi4pOiBZb3UgY2FsbGVkIGBzZXRQcm9wc2AsIGByZXBsYWNlUHJvcHNgLCAnICsgJ2BzZXRTdGF0ZWAsIGByZXBsYWNlU3RhdGVgLCBvciBgZm9yY2VVcGRhdGVgIHdpdGggYSBjYWxsYmFjayB0aGF0ICcgKyAnaXNuXFwndCBjYWxsYWJsZS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UpO1xuXG4gICAgLy8gUHJldmlvdXNseSB3ZSB3b3VsZCB0aHJvdyBhbiBlcnJvciBpZiB3ZSBkaWRuJ3QgaGF2ZSBhbiBpbnRlcm5hbFxuICAgIC8vIGluc3RhbmNlLiBTaW5jZSB3ZSB3YW50IHRvIG1ha2UgaXQgYSBuby1vcCBpbnN0ZWFkLCB3ZSBtaXJyb3IgdGhlIHNhbWVcbiAgICAvLyBiZWhhdmlvciB3ZSBoYXZlIGluIG90aGVyIGVucXVldWUqIG1ldGhvZHMuXG4gICAgLy8gV2UgYWxzbyBuZWVkIHRvIGlnbm9yZSBjYWxsYmFja3MgaW4gY29tcG9uZW50V2lsbE1vdW50LiBTZWVcbiAgICAvLyBlbnF1ZXVlVXBkYXRlcy5cbiAgICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzKSB7XG4gICAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzID0gW2NhbGxiYWNrXTtcbiAgICB9XG4gICAgLy8gVE9ETzogVGhlIGNhbGxiYWNrIGhlcmUgaXMgaWdub3JlZCB3aGVuIHNldFN0YXRlIGlzIGNhbGxlZCBmcm9tXG4gICAgLy8gY29tcG9uZW50V2lsbE1vdW50LiBFaXRoZXIgZml4IGl0IG9yIGRpc2FsbG93IGRvaW5nIHNvIGNvbXBsZXRlbHkgaW5cbiAgICAvLyBmYXZvciBvZiBnZXRJbml0aWFsU3RhdGUuIEFsdGVybmF0aXZlbHksIHdlIGNhbiBkaXNhbGxvd1xuICAgIC8vIGNvbXBvbmVudFdpbGxNb3VudCBkdXJpbmcgc2VydmVyLXNpZGUgcmVuZGVyaW5nLlxuICAgIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG4gIH0sXG5cbiAgZW5xdWV1ZUNhbGxiYWNrSW50ZXJuYWw6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCBjYWxsYmFjaykge1xuICAgICEodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdlbnF1ZXVlQ2FsbGJhY2soLi4uKTogWW91IGNhbGxlZCBgc2V0UHJvcHNgLCBgcmVwbGFjZVByb3BzYCwgJyArICdgc2V0U3RhdGVgLCBgcmVwbGFjZVN0YXRlYCwgb3IgYGZvcmNlVXBkYXRlYCB3aXRoIGEgY2FsbGJhY2sgdGhhdCAnICsgJ2lzblxcJ3QgY2FsbGFibGUuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIGlmIChpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzKSB7XG4gICAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzID0gW2NhbGxiYWNrXTtcbiAgICB9XG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfSxcblxuICAvKipcbiAgICogRm9yY2VzIGFuIHVwZGF0ZS4gVGhpcyBzaG91bGQgb25seSBiZSBpbnZva2VkIHdoZW4gaXQgaXMga25vd24gd2l0aFxuICAgKiBjZXJ0YWludHkgdGhhdCB3ZSBhcmUgKipub3QqKiBpbiBhIERPTSB0cmFuc2FjdGlvbi5cbiAgICpcbiAgICogWW91IG1heSB3YW50IHRvIGNhbGwgdGhpcyB3aGVuIHlvdSBrbm93IHRoYXQgc29tZSBkZWVwZXIgYXNwZWN0IG9mIHRoZVxuICAgKiBjb21wb25lbnQncyBzdGF0ZSBoYXMgY2hhbmdlZCBidXQgYHNldFN0YXRlYCB3YXMgbm90IGNhbGxlZC5cbiAgICpcbiAgICogVGhpcyB3aWxsIG5vdCBpbnZva2UgYHNob3VsZENvbXBvbmVudFVwZGF0ZWAsIGJ1dCBpdCB3aWxsIGludm9rZVxuICAgKiBgY29tcG9uZW50V2lsbFVwZGF0ZWAgYW5kIGBjb21wb25lbnREaWRVcGRhdGVgLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlRm9yY2VVcGRhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuICAgIHZhciBpbnRlcm5hbEluc3RhbmNlID0gZ2V0SW50ZXJuYWxJbnN0YW5jZVJlYWR5Rm9yVXBkYXRlKHB1YmxpY0luc3RhbmNlLCAnZm9yY2VVcGRhdGUnKTtcblxuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdGb3JjZVVwZGF0ZSA9IHRydWU7XG5cbiAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhbGwgb2YgdGhlIHN0YXRlLiBBbHdheXMgdXNlIHRoaXMgb3IgYHNldFN0YXRlYCB0byBtdXRhdGUgc3RhdGUuXG4gICAqIFlvdSBzaG91bGQgdHJlYXQgYHRoaXMuc3RhdGVgIGFzIGltbXV0YWJsZS5cbiAgICpcbiAgICogVGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgYHRoaXMuc3RhdGVgIHdpbGwgYmUgaW1tZWRpYXRlbHkgdXBkYXRlZCwgc29cbiAgICogYWNjZXNzaW5nIGB0aGlzLnN0YXRlYCBhZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kIG1heSByZXR1cm4gdGhlIG9sZCB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wbGV0ZVN0YXRlIE5leHQgc3RhdGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBjb21wbGV0ZVN0YXRlKSB7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsICdyZXBsYWNlU3RhdGUnKTtcblxuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdTdGF0ZVF1ZXVlID0gW2NvbXBsZXRlU3RhdGVdO1xuICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdSZXBsYWNlU3RhdGUgPSB0cnVlO1xuXG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgc3RhdGUuIFRoaXMgb25seSBleGlzdHMgYmVjYXVzZSBfcGVuZGluZ1N0YXRlIGlzXG4gICAqIGludGVybmFsLiBUaGlzIHByb3ZpZGVzIGEgbWVyZ2luZyBzdHJhdGVneSB0aGF0IGlzIG5vdCBhdmFpbGFibGUgdG8gZGVlcFxuICAgKiBwcm9wZXJ0aWVzIHdoaWNoIGlzIGNvbmZ1c2luZy4gVE9ETzogRXhwb3NlIHBlbmRpbmdTdGF0ZSBvciBkb24ndCB1c2UgaXRcbiAgICogZHVyaW5nIHRoZSBtZXJnZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsU3RhdGUgTmV4dCBwYXJ0aWFsIHN0YXRlIHRvIGJlIG1lcmdlZCB3aXRoIHN0YXRlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVTZXRTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwYXJ0aWFsU3RhdGUpIHtcbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ3NldFN0YXRlJyk7XG5cbiAgICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcXVldWUgPSBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nU3RhdGVRdWV1ZSB8fCAoaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ1N0YXRlUXVldWUgPSBbXSk7XG4gICAgcXVldWUucHVzaChwYXJ0aWFsU3RhdGUpO1xuXG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcGFydGlhbFByb3BzIFN1YnNldCBvZiB0aGUgbmV4dCBwcm9wcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlU2V0UHJvcHM6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcGFydGlhbFByb3BzKSB7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsICdzZXRQcm9wcycpO1xuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVTZXRQcm9wc0ludGVybmFsKGludGVybmFsSW5zdGFuY2UsIHBhcnRpYWxQcm9wcyk7XG4gIH0sXG5cbiAgZW5xdWV1ZVNldFByb3BzSW50ZXJuYWw6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCBwYXJ0aWFsUHJvcHMpIHtcbiAgICB2YXIgdG9wTGV2ZWxXcmFwcGVyID0gaW50ZXJuYWxJbnN0YW5jZS5fdG9wTGV2ZWxXcmFwcGVyO1xuICAgICF0b3BMZXZlbFdyYXBwZXIgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnc2V0UHJvcHMoLi4uKTogWW91IGNhbGxlZCBgc2V0UHJvcHNgIG9uIGEgJyArICdjb21wb25lbnQgd2l0aCBhIHBhcmVudC4gVGhpcyBpcyBhbiBhbnRpLXBhdHRlcm4gc2luY2UgcHJvcHMgd2lsbCAnICsgJ2dldCByZWFjdGl2ZWx5IHVwZGF0ZWQgd2hlbiByZW5kZXJlZC4gSW5zdGVhZCwgY2hhbmdlIHRoZSBvd25lclxcJ3MgJyArICdgcmVuZGVyYCBtZXRob2QgdG8gcGFzcyB0aGUgY29ycmVjdCB2YWx1ZSBhcyBwcm9wcyB0byB0aGUgY29tcG9uZW50ICcgKyAnd2hlcmUgaXQgaXMgY3JlYXRlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAvLyBNZXJnZSB3aXRoIHRoZSBwZW5kaW5nIGVsZW1lbnQgaWYgaXQgZXhpc3RzLCBvdGhlcndpc2Ugd2l0aCBleGlzdGluZ1xuICAgIC8vIGVsZW1lbnQgcHJvcHMuXG4gICAgdmFyIHdyYXBFbGVtZW50ID0gdG9wTGV2ZWxXcmFwcGVyLl9wZW5kaW5nRWxlbWVudCB8fCB0b3BMZXZlbFdyYXBwZXIuX2N1cnJlbnRFbGVtZW50O1xuICAgIHZhciBlbGVtZW50ID0gd3JhcEVsZW1lbnQucHJvcHM7XG4gICAgdmFyIHByb3BzID0gYXNzaWduKHt9LCBlbGVtZW50LnByb3BzLCBwYXJ0aWFsUHJvcHMpO1xuICAgIHRvcExldmVsV3JhcHBlci5fcGVuZGluZ0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlUHJvcHMod3JhcEVsZW1lbnQsIFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VQcm9wcyhlbGVtZW50LCBwcm9wcykpO1xuXG4gICAgZW5xdWV1ZVVwZGF0ZSh0b3BMZXZlbFdyYXBwZXIpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhbGwgb2YgdGhlIHByb3BzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IHByb3BzIE5ldyBwcm9wcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlUmVwbGFjZVByb3BzOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIHByb3BzKSB7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsICdyZXBsYWNlUHJvcHMnKTtcbiAgICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlUmVwbGFjZVByb3BzSW50ZXJuYWwoaW50ZXJuYWxJbnN0YW5jZSwgcHJvcHMpO1xuICB9LFxuXG4gIGVucXVldWVSZXBsYWNlUHJvcHNJbnRlcm5hbDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIHByb3BzKSB7XG4gICAgdmFyIHRvcExldmVsV3JhcHBlciA9IGludGVybmFsSW5zdGFuY2UuX3RvcExldmVsV3JhcHBlcjtcbiAgICAhdG9wTGV2ZWxXcmFwcGVyID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3JlcGxhY2VQcm9wcyguLi4pOiBZb3UgY2FsbGVkIGByZXBsYWNlUHJvcHNgIG9uIGEgJyArICdjb21wb25lbnQgd2l0aCBhIHBhcmVudC4gVGhpcyBpcyBhbiBhbnRpLXBhdHRlcm4gc2luY2UgcHJvcHMgd2lsbCAnICsgJ2dldCByZWFjdGl2ZWx5IHVwZGF0ZWQgd2hlbiByZW5kZXJlZC4gSW5zdGVhZCwgY2hhbmdlIHRoZSBvd25lclxcJ3MgJyArICdgcmVuZGVyYCBtZXRob2QgdG8gcGFzcyB0aGUgY29ycmVjdCB2YWx1ZSBhcyBwcm9wcyB0byB0aGUgY29tcG9uZW50ICcgKyAnd2hlcmUgaXQgaXMgY3JlYXRlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAvLyBNZXJnZSB3aXRoIHRoZSBwZW5kaW5nIGVsZW1lbnQgaWYgaXQgZXhpc3RzLCBvdGhlcndpc2Ugd2l0aCBleGlzdGluZ1xuICAgIC8vIGVsZW1lbnQgcHJvcHMuXG4gICAgdmFyIHdyYXBFbGVtZW50ID0gdG9wTGV2ZWxXcmFwcGVyLl9wZW5kaW5nRWxlbWVudCB8fCB0b3BMZXZlbFdyYXBwZXIuX2N1cnJlbnRFbGVtZW50O1xuICAgIHZhciBlbGVtZW50ID0gd3JhcEVsZW1lbnQucHJvcHM7XG4gICAgdG9wTGV2ZWxXcmFwcGVyLl9wZW5kaW5nRWxlbWVudCA9IFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VQcm9wcyh3cmFwRWxlbWVudCwgUmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZVByb3BzKGVsZW1lbnQsIHByb3BzKSk7XG5cbiAgICBlbnF1ZXVlVXBkYXRlKHRvcExldmVsV3JhcHBlcik7XG4gIH0sXG5cbiAgZW5xdWV1ZUVsZW1lbnRJbnRlcm5hbDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIG5ld0VsZW1lbnQpIHtcbiAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nRWxlbWVudCA9IG5ld0VsZW1lbnQ7XG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0VXBkYXRlUXVldWU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0VXBkYXRlc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENhbGxiYWNrUXVldWUgPSByZXF1aXJlKCcuL0NhbGxiYWNrUXVldWUnKTtcbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFJlYWN0UmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVyJyk7XG52YXIgVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL1RyYW5zYWN0aW9uJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIGRpcnR5Q29tcG9uZW50cyA9IFtdO1xudmFyIGFzYXBDYWxsYmFja1F1ZXVlID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQoKTtcbnZhciBhc2FwRW5xdWV1ZWQgPSBmYWxzZTtcblxudmFyIGJhdGNoaW5nU3RyYXRlZ3kgPSBudWxsO1xuXG5mdW5jdGlvbiBlbnN1cmVJbmplY3RlZCgpIHtcbiAgIShSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbiAmJiBiYXRjaGluZ1N0cmF0ZWd5KSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXM6IG11c3QgaW5qZWN0IGEgcmVjb25jaWxlIHRyYW5zYWN0aW9uIGNsYXNzIGFuZCBiYXRjaGluZyAnICsgJ3N0cmF0ZWd5JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG52YXIgTkVTVEVEX1VQREFURVMgPSB7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRpcnR5Q29tcG9uZW50c0xlbmd0aCA9IGRpcnR5Q29tcG9uZW50cy5sZW5ndGg7XG4gIH0sXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZGlydHlDb21wb25lbnRzTGVuZ3RoICE9PSBkaXJ0eUNvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICAvLyBBZGRpdGlvbmFsIHVwZGF0ZXMgd2VyZSBlbnF1ZXVlZCBieSBjb21wb25lbnREaWRVcGRhdGUgaGFuZGxlcnMgb3JcbiAgICAgIC8vIHNpbWlsYXI7IGJlZm9yZSBvdXIgb3duIFVQREFURV9RVUVVRUlORyB3cmFwcGVyIGNsb3Nlcywgd2Ugd2FudCB0byBydW5cbiAgICAgIC8vIHRoZXNlIG5ldyB1cGRhdGVzIHNvIHRoYXQgaWYgQSdzIGNvbXBvbmVudERpZFVwZGF0ZSBjYWxscyBzZXRTdGF0ZSBvblxuICAgICAgLy8gQiwgQiB3aWxsIHVwZGF0ZSBiZWZvcmUgdGhlIGNhbGxiYWNrIEEncyB1cGRhdGVyIHByb3ZpZGVkIHdoZW4gY2FsbGluZ1xuICAgICAgLy8gc2V0U3RhdGUuXG4gICAgICBkaXJ0eUNvbXBvbmVudHMuc3BsaWNlKDAsIHRoaXMuZGlydHlDb21wb25lbnRzTGVuZ3RoKTtcbiAgICAgIGZsdXNoQmF0Y2hlZFVwZGF0ZXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlydHlDb21wb25lbnRzLmxlbmd0aCA9IDA7XG4gICAgfVxuICB9XG59O1xuXG52YXIgVVBEQVRFX1FVRVVFSU5HID0ge1xuICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsYmFja1F1ZXVlLnJlc2V0KCk7XG4gIH0sXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsYmFja1F1ZXVlLm5vdGlmeUFsbCgpO1xuICB9XG59O1xuXG52YXIgVFJBTlNBQ1RJT05fV1JBUFBFUlMgPSBbTkVTVEVEX1VQREFURVMsIFVQREFURV9RVUVVRUlOR107XG5cbmZ1bmN0aW9uIFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24oKSB7XG4gIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcbiAgdGhpcy5kaXJ0eUNvbXBvbmVudHNMZW5ndGggPSBudWxsO1xuICB0aGlzLmNhbGxiYWNrUXVldWUgPSBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpO1xuICB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uID0gUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKCAvKiBmb3JjZUhUTUwgKi9mYWxzZSk7XG59XG5cbmFzc2lnbihSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uLnByb3RvdHlwZSwgVHJhbnNhY3Rpb24uTWl4aW4sIHtcbiAgZ2V0VHJhbnNhY3Rpb25XcmFwcGVyczogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBUUkFOU0FDVElPTl9XUkFQUEVSUztcbiAgfSxcblxuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5kaXJ0eUNvbXBvbmVudHNMZW5ndGggPSBudWxsO1xuICAgIENhbGxiYWNrUXVldWUucmVsZWFzZSh0aGlzLmNhbGxiYWNrUXVldWUpO1xuICAgIHRoaXMuY2FsbGJhY2tRdWV1ZSA9IG51bGw7XG4gICAgUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24ucmVsZWFzZSh0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uKTtcbiAgICB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uID0gbnVsbDtcbiAgfSxcblxuICBwZXJmb3JtOiBmdW5jdGlvbiAobWV0aG9kLCBzY29wZSwgYSkge1xuICAgIC8vIEVzc2VudGlhbGx5IGNhbGxzIGB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uLnBlcmZvcm0obWV0aG9kLCBzY29wZSwgYSlgXG4gICAgLy8gd2l0aCB0aGlzIHRyYW5zYWN0aW9uJ3Mgd3JhcHBlcnMgYXJvdW5kIGl0LlxuICAgIHJldHVybiBUcmFuc2FjdGlvbi5NaXhpbi5wZXJmb3JtLmNhbGwodGhpcywgdGhpcy5yZWNvbmNpbGVUcmFuc2FjdGlvbi5wZXJmb3JtLCB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uLCBtZXRob2QsIHNjb3BlLCBhKTtcbiAgfVxufSk7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uKTtcblxuZnVuY3Rpb24gYmF0Y2hlZFVwZGF0ZXMoY2FsbGJhY2ssIGEsIGIsIGMsIGQsIGUpIHtcbiAgZW5zdXJlSW5qZWN0ZWQoKTtcbiAgYmF0Y2hpbmdTdHJhdGVneS5iYXRjaGVkVXBkYXRlcyhjYWxsYmFjaywgYSwgYiwgYywgZCwgZSk7XG59XG5cbi8qKlxuICogQXJyYXkgY29tcGFyYXRvciBmb3IgUmVhY3RDb21wb25lbnRzIGJ5IG1vdW50IG9yZGVyaW5nLlxuICpcbiAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGMxIGZpcnN0IGNvbXBvbmVudCB5b3UncmUgY29tcGFyaW5nXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjMiBzZWNvbmQgY29tcG9uZW50IHlvdSdyZSBjb21wYXJpbmdcbiAqIEByZXR1cm4ge251bWJlcn0gUmV0dXJuIHZhbHVlIHVzYWJsZSBieSBBcnJheS5wcm90b3R5cGUuc29ydCgpLlxuICovXG5mdW5jdGlvbiBtb3VudE9yZGVyQ29tcGFyYXRvcihjMSwgYzIpIHtcbiAgcmV0dXJuIGMxLl9tb3VudE9yZGVyIC0gYzIuX21vdW50T3JkZXI7XG59XG5cbmZ1bmN0aW9uIHJ1bkJhdGNoZWRVcGRhdGVzKHRyYW5zYWN0aW9uKSB7XG4gIHZhciBsZW4gPSB0cmFuc2FjdGlvbi5kaXJ0eUNvbXBvbmVudHNMZW5ndGg7XG4gICEobGVuID09PSBkaXJ0eUNvbXBvbmVudHMubGVuZ3RoKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFeHBlY3RlZCBmbHVzaCB0cmFuc2FjdGlvblxcJ3Mgc3RvcmVkIGRpcnR5LWNvbXBvbmVudHMgbGVuZ3RoICglcykgdG8gJyArICdtYXRjaCBkaXJ0eS1jb21wb25lbnRzIGFycmF5IGxlbmd0aCAoJXMpLicsIGxlbiwgZGlydHlDb21wb25lbnRzLmxlbmd0aCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIC8vIFNpbmNlIHJlY29uY2lsaW5nIGEgY29tcG9uZW50IGhpZ2hlciBpbiB0aGUgb3duZXIgaGllcmFyY2h5IHVzdWFsbHkgKG5vdFxuICAvLyBhbHdheXMgLS0gc2VlIHNob3VsZENvbXBvbmVudFVwZGF0ZSgpKSB3aWxsIHJlY29uY2lsZSBjaGlsZHJlbiwgcmVjb25jaWxlXG4gIC8vIHRoZW0gYmVmb3JlIHRoZWlyIGNoaWxkcmVuIGJ5IHNvcnRpbmcgdGhlIGFycmF5LlxuICBkaXJ0eUNvbXBvbmVudHMuc29ydChtb3VudE9yZGVyQ29tcGFyYXRvcik7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIC8vIElmIGEgY29tcG9uZW50IGlzIHVubW91bnRlZCBiZWZvcmUgcGVuZGluZyBjaGFuZ2VzIGFwcGx5LCBpdCB3aWxsIHN0aWxsXG4gICAgLy8gYmUgaGVyZSwgYnV0IHdlIGFzc3VtZSB0aGF0IGl0IGhhcyBjbGVhcmVkIGl0cyBfcGVuZGluZ0NhbGxiYWNrcyBhbmRcbiAgICAvLyB0aGF0IHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSBpcyBhIG5vb3AuXG4gICAgdmFyIGNvbXBvbmVudCA9IGRpcnR5Q29tcG9uZW50c1tpXTtcblxuICAgIC8vIElmIHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSBoYXBwZW5zIHRvIGVucXVldWUgYW55IG5ldyB1cGRhdGVzLCB3ZVxuICAgIC8vIHNob3VsZG4ndCBleGVjdXRlIHRoZSBjYWxsYmFja3MgdW50aWwgdGhlIG5leHQgcmVuZGVyIGhhcHBlbnMsIHNvXG4gICAgLy8gc3Rhc2ggdGhlIGNhbGxiYWNrcyBmaXJzdFxuICAgIHZhciBjYWxsYmFja3MgPSBjb21wb25lbnQuX3BlbmRpbmdDYWxsYmFja3M7XG4gICAgY29tcG9uZW50Ll9wZW5kaW5nQ2FsbGJhY2tzID0gbnVsbDtcblxuICAgIFJlYWN0UmVjb25jaWxlci5wZXJmb3JtVXBkYXRlSWZOZWNlc3NhcnkoY29tcG9uZW50LCB0cmFuc2FjdGlvbi5yZWNvbmNpbGVUcmFuc2FjdGlvbik7XG5cbiAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNhbGxiYWNrcy5sZW5ndGg7IGorKykge1xuICAgICAgICB0cmFuc2FjdGlvbi5jYWxsYmFja1F1ZXVlLmVucXVldWUoY2FsbGJhY2tzW2pdLCBjb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbnZhciBmbHVzaEJhdGNoZWRVcGRhdGVzID0gZnVuY3Rpb24gKCkge1xuICAvLyBSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uJ3Mgd3JhcHBlcnMgd2lsbCBjbGVhciB0aGUgZGlydHlDb21wb25lbnRzXG4gIC8vIGFycmF5IGFuZCBwZXJmb3JtIGFueSB1cGRhdGVzIGVucXVldWVkIGJ5IG1vdW50LXJlYWR5IGhhbmRsZXJzIChpLmUuLFxuICAvLyBjb21wb25lbnREaWRVcGRhdGUpIGJ1dCB3ZSBuZWVkIHRvIGNoZWNrIGhlcmUgdG9vIGluIG9yZGVyIHRvIGNhdGNoXG4gIC8vIHVwZGF0ZXMgZW5xdWV1ZWQgYnkgc2V0U3RhdGUgY2FsbGJhY2tzIGFuZCBhc2FwIGNhbGxzLlxuICB3aGlsZSAoZGlydHlDb21wb25lbnRzLmxlbmd0aCB8fCBhc2FwRW5xdWV1ZWQpIHtcbiAgICBpZiAoZGlydHlDb21wb25lbnRzLmxlbmd0aCkge1xuICAgICAgdmFyIHRyYW5zYWN0aW9uID0gUmVhY3RVcGRhdGVzRmx1c2hUcmFuc2FjdGlvbi5nZXRQb29sZWQoKTtcbiAgICAgIHRyYW5zYWN0aW9uLnBlcmZvcm0ocnVuQmF0Y2hlZFVwZGF0ZXMsIG51bGwsIHRyYW5zYWN0aW9uKTtcbiAgICAgIFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24ucmVsZWFzZSh0cmFuc2FjdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKGFzYXBFbnF1ZXVlZCkge1xuICAgICAgYXNhcEVucXVldWVkID0gZmFsc2U7XG4gICAgICB2YXIgcXVldWUgPSBhc2FwQ2FsbGJhY2tRdWV1ZTtcbiAgICAgIGFzYXBDYWxsYmFja1F1ZXVlID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQoKTtcbiAgICAgIHF1ZXVlLm5vdGlmeUFsbCgpO1xuICAgICAgQ2FsbGJhY2tRdWV1ZS5yZWxlYXNlKHF1ZXVlKTtcbiAgICB9XG4gIH1cbn07XG5mbHVzaEJhdGNoZWRVcGRhdGVzID0gUmVhY3RQZXJmLm1lYXN1cmUoJ1JlYWN0VXBkYXRlcycsICdmbHVzaEJhdGNoZWRVcGRhdGVzJywgZmx1c2hCYXRjaGVkVXBkYXRlcyk7XG5cbi8qKlxuICogTWFyayBhIGNvbXBvbmVudCBhcyBuZWVkaW5nIGEgcmVyZW5kZXIsIGFkZGluZyBhbiBvcHRpb25hbCBjYWxsYmFjayB0byBhXG4gKiBsaXN0IG9mIGZ1bmN0aW9ucyB3aGljaCB3aWxsIGJlIGV4ZWN1dGVkIG9uY2UgdGhlIHJlcmVuZGVyIG9jY3Vycy5cbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZVVwZGF0ZShjb21wb25lbnQpIHtcbiAgZW5zdXJlSW5qZWN0ZWQoKTtcblxuICAvLyBWYXJpb3VzIHBhcnRzIG9mIG91ciBjb2RlIChzdWNoIGFzIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50J3NcbiAgLy8gX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCkgYXNzdW1lIHRoYXQgY2FsbHMgdG8gcmVuZGVyIGFyZW4ndCBuZXN0ZWQ7XG4gIC8vIHZlcmlmeSB0aGF0IHRoYXQncyB0aGUgY2FzZS4gKFRoaXMgaXMgY2FsbGVkIGJ5IGVhY2ggdG9wLWxldmVsIHVwZGF0ZVxuICAvLyBmdW5jdGlvbiwgbGlrZSBzZXRQcm9wcywgc2V0U3RhdGUsIGZvcmNlVXBkYXRlLCBldGMuOyBjcmVhdGlvbiBhbmRcbiAgLy8gZGVzdHJ1Y3Rpb24gb2YgdG9wLWxldmVsIGNvbXBvbmVudHMgaXMgZ3VhcmRlZCBpbiBSZWFjdE1vdW50LilcblxuICBpZiAoIWJhdGNoaW5nU3RyYXRlZ3kuaXNCYXRjaGluZ1VwZGF0ZXMpIHtcbiAgICBiYXRjaGluZ1N0cmF0ZWd5LmJhdGNoZWRVcGRhdGVzKGVucXVldWVVcGRhdGUsIGNvbXBvbmVudCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZGlydHlDb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbn1cblxuLyoqXG4gKiBFbnF1ZXVlIGEgY2FsbGJhY2sgdG8gYmUgcnVuIGF0IHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgYmF0Y2hpbmcgY3ljbGUuIFRocm93c1xuICogaWYgbm8gdXBkYXRlcyBhcmUgY3VycmVudGx5IGJlaW5nIHBlcmZvcm1lZC5cbiAqL1xuZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgY29udGV4dCkge1xuICAhYmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcyA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXMuYXNhcDogQ2FuXFwndCBlbnF1ZXVlIGFuIGFzYXAgY2FsbGJhY2sgaW4gYSBjb250ZXh0IHdoZXJlJyArICd1cGRhdGVzIGFyZSBub3QgYmVpbmcgYmF0Y2hlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGFzYXBDYWxsYmFja1F1ZXVlLmVucXVldWUoY2FsbGJhY2ssIGNvbnRleHQpO1xuICBhc2FwRW5xdWV1ZWQgPSB0cnVlO1xufVxuXG52YXIgUmVhY3RVcGRhdGVzSW5qZWN0aW9uID0ge1xuICBpbmplY3RSZWNvbmNpbGVUcmFuc2FjdGlvbjogZnVuY3Rpb24gKFJlY29uY2lsZVRyYW5zYWN0aW9uKSB7XG4gICAgIVJlY29uY2lsZVRyYW5zYWN0aW9uID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgcmVjb25jaWxlIHRyYW5zYWN0aW9uIGNsYXNzJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIFJlYWN0VXBkYXRlcy5SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uID0gUmVjb25jaWxlVHJhbnNhY3Rpb247XG4gIH0sXG5cbiAgaW5qZWN0QmF0Y2hpbmdTdHJhdGVneTogZnVuY3Rpb24gKF9iYXRjaGluZ1N0cmF0ZWd5KSB7XG4gICAgIV9iYXRjaGluZ1N0cmF0ZWd5ID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgYmF0Y2hpbmcgc3RyYXRlZ3knKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgISh0eXBlb2YgX2JhdGNoaW5nU3RyYXRlZ3kuYmF0Y2hlZFVwZGF0ZXMgPT09ICdmdW5jdGlvbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgYmF0Y2hlZFVwZGF0ZXMoKSBmdW5jdGlvbicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhKHR5cGVvZiBfYmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcyA9PT0gJ2Jvb2xlYW4nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXM6IG11c3QgcHJvdmlkZSBhbiBpc0JhdGNoaW5nVXBkYXRlcyBib29sZWFuIGF0dHJpYnV0ZScpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBiYXRjaGluZ1N0cmF0ZWd5ID0gX2JhdGNoaW5nU3RyYXRlZ3k7XG4gIH1cbn07XG5cbnZhciBSZWFjdFVwZGF0ZXMgPSB7XG4gIC8qKlxuICAgKiBSZWFjdCByZWZlcmVuY2VzIGBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uYCB1c2luZyB0aGlzIHByb3BlcnR5IGluIG9yZGVyXG4gICAqIHRvIGFsbG93IGRlcGVuZGVuY3kgaW5qZWN0aW9uLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb246IG51bGwsXG5cbiAgYmF0Y2hlZFVwZGF0ZXM6IGJhdGNoZWRVcGRhdGVzLFxuICBlbnF1ZXVlVXBkYXRlOiBlbnF1ZXVlVXBkYXRlLFxuICBmbHVzaEJhdGNoZWRVcGRhdGVzOiBmbHVzaEJhdGNoZWRVcGRhdGVzLFxuICBpbmplY3Rpb246IFJlYWN0VXBkYXRlc0luamVjdGlvbixcbiAgYXNhcDogYXNhcFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFVwZGF0ZXM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0VmVyc2lvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSAnMC4xNC45JzsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU1ZHRE9NUHJvcGVydHlDb25maWdcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBET01Qcm9wZXJ0eSA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHknKTtcblxudmFyIE1VU1RfVVNFX0FUVFJJQlVURSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5NVVNUX1VTRV9BVFRSSUJVVEU7XG5cbnZhciBOUyA9IHtcbiAgeGxpbms6ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyxcbiAgeG1sOiAnaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlJ1xufTtcblxudmFyIFNWR0RPTVByb3BlcnR5Q29uZmlnID0ge1xuICBQcm9wZXJ0aWVzOiB7XG4gICAgY2xpcFBhdGg6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBjeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGN5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGR4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmaWxsOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZmlsbE9wYWNpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb250RmFtaWx5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZm9udFNpemU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZ5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZ3JhZGllbnRUcmFuc2Zvcm06IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBncmFkaWVudFVuaXRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWFya2VyRW5kOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWFya2VyTWlkOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWFya2VyU3RhcnQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBvZmZzZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBvcGFjaXR5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcGF0dGVybkNvbnRlbnRVbml0czogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHBhdHRlcm5Vbml0czogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHBvaW50czogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHByZXNlcnZlQXNwZWN0UmF0aW86IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICByOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcng6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICByeTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHNwcmVhZE1ldGhvZDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0b3BDb2xvcjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0b3BPcGFjaXR5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3Ryb2tlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3Ryb2tlRGFzaGFycmF5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3Ryb2tlTGluZWNhcDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0cm9rZU9wYWNpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdHJva2VXaWR0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHRleHRBbmNob3I6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB0cmFuc2Zvcm06IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB2ZXJzaW9uOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgdmlld0JveDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHgxOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeDI6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtBY3R1YXRlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtBcmNyb2xlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtIcmVmOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtSb2xlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtTaG93OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtUaXRsZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHhsaW5rVHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHhtbEJhc2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bWxMYW5nOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeG1sU3BhY2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB5MTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHkyOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeTogTVVTVF9VU0VfQVRUUklCVVRFXG4gIH0sXG4gIERPTUF0dHJpYnV0ZU5hbWVzcGFjZXM6IHtcbiAgICB4bGlua0FjdHVhdGU6IE5TLnhsaW5rLFxuICAgIHhsaW5rQXJjcm9sZTogTlMueGxpbmssXG4gICAgeGxpbmtIcmVmOiBOUy54bGluayxcbiAgICB4bGlua1JvbGU6IE5TLnhsaW5rLFxuICAgIHhsaW5rU2hvdzogTlMueGxpbmssXG4gICAgeGxpbmtUaXRsZTogTlMueGxpbmssXG4gICAgeGxpbmtUeXBlOiBOUy54bGluayxcbiAgICB4bWxCYXNlOiBOUy54bWwsXG4gICAgeG1sTGFuZzogTlMueG1sLFxuICAgIHhtbFNwYWNlOiBOUy54bWxcbiAgfSxcbiAgRE9NQXR0cmlidXRlTmFtZXM6IHtcbiAgICBjbGlwUGF0aDogJ2NsaXAtcGF0aCcsXG4gICAgZmlsbE9wYWNpdHk6ICdmaWxsLW9wYWNpdHknLFxuICAgIGZvbnRGYW1pbHk6ICdmb250LWZhbWlseScsXG4gICAgZm9udFNpemU6ICdmb250LXNpemUnLFxuICAgIGdyYWRpZW50VHJhbnNmb3JtOiAnZ3JhZGllbnRUcmFuc2Zvcm0nLFxuICAgIGdyYWRpZW50VW5pdHM6ICdncmFkaWVudFVuaXRzJyxcbiAgICBtYXJrZXJFbmQ6ICdtYXJrZXItZW5kJyxcbiAgICBtYXJrZXJNaWQ6ICdtYXJrZXItbWlkJyxcbiAgICBtYXJrZXJTdGFydDogJ21hcmtlci1zdGFydCcsXG4gICAgcGF0dGVybkNvbnRlbnRVbml0czogJ3BhdHRlcm5Db250ZW50VW5pdHMnLFxuICAgIHBhdHRlcm5Vbml0czogJ3BhdHRlcm5Vbml0cycsXG4gICAgcHJlc2VydmVBc3BlY3RSYXRpbzogJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLFxuICAgIHNwcmVhZE1ldGhvZDogJ3NwcmVhZE1ldGhvZCcsXG4gICAgc3RvcENvbG9yOiAnc3RvcC1jb2xvcicsXG4gICAgc3RvcE9wYWNpdHk6ICdzdG9wLW9wYWNpdHknLFxuICAgIHN0cm9rZURhc2hhcnJheTogJ3N0cm9rZS1kYXNoYXJyYXknLFxuICAgIHN0cm9rZUxpbmVjYXA6ICdzdHJva2UtbGluZWNhcCcsXG4gICAgc3Ryb2tlT3BhY2l0eTogJ3N0cm9rZS1vcGFjaXR5JyxcbiAgICBzdHJva2VXaWR0aDogJ3N0cm9rZS13aWR0aCcsXG4gICAgdGV4dEFuY2hvcjogJ3RleHQtYW5jaG9yJyxcbiAgICB2aWV3Qm94OiAndmlld0JveCcsXG4gICAgeGxpbmtBY3R1YXRlOiAneGxpbms6YWN0dWF0ZScsXG4gICAgeGxpbmtBcmNyb2xlOiAneGxpbms6YXJjcm9sZScsXG4gICAgeGxpbmtIcmVmOiAneGxpbms6aHJlZicsXG4gICAgeGxpbmtSb2xlOiAneGxpbms6cm9sZScsXG4gICAgeGxpbmtTaG93OiAneGxpbms6c2hvdycsXG4gICAgeGxpbmtUaXRsZTogJ3hsaW5rOnRpdGxlJyxcbiAgICB4bGlua1R5cGU6ICd4bGluazp0eXBlJyxcbiAgICB4bWxCYXNlOiAneG1sOmJhc2UnLFxuICAgIHhtbExhbmc6ICd4bWw6bGFuZycsXG4gICAgeG1sU3BhY2U6ICd4bWw6c3BhY2UnXG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU1ZHRE9NUHJvcGVydHlDb25maWc7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFNlbGVjdEV2ZW50UGx1Z2luXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRQcm9wYWdhdG9ycyA9IHJlcXVpcmUoJy4vRXZlbnRQcm9wYWdhdG9ycycpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdElucHV0U2VsZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdElucHV0U2VsZWN0aW9uJyk7XG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbnZhciBnZXRBY3RpdmVFbGVtZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvZ2V0QWN0aXZlRWxlbWVudCcpO1xudmFyIGlzVGV4dElucHV0RWxlbWVudCA9IHJlcXVpcmUoJy4vaXNUZXh0SW5wdXRFbGVtZW50Jyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xudmFyIHNoYWxsb3dFcXVhbCA9IHJlcXVpcmUoJ2ZianMvbGliL3NoYWxsb3dFcXVhbCcpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbnZhciBza2lwU2VsZWN0aW9uQ2hhbmdlRXZlbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ2RvY3VtZW50TW9kZScgaW4gZG9jdW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRNb2RlIDw9IDExO1xuXG52YXIgZXZlbnRUeXBlcyA9IHtcbiAgc2VsZWN0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TZWxlY3Q6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblNlbGVjdENhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDb250ZXh0TWVudSwgdG9wTGV2ZWxUeXBlcy50b3BGb2N1cywgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93biwgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZVVwLCB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZV1cbiAgfVxufTtcblxudmFyIGFjdGl2ZUVsZW1lbnQgPSBudWxsO1xudmFyIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG52YXIgbGFzdFNlbGVjdGlvbiA9IG51bGw7XG52YXIgbW91c2VEb3duID0gZmFsc2U7XG5cbi8vIFRyYWNrIHdoZXRoZXIgYSBsaXN0ZW5lciBleGlzdHMgZm9yIHRoaXMgcGx1Z2luLiBJZiBub25lIGV4aXN0LCB3ZSBkb1xuLy8gbm90IGV4dHJhY3QgZXZlbnRzLlxudmFyIGhhc0xpc3RlbmVyID0gZmFsc2U7XG52YXIgT05fU0VMRUNUX0tFWSA9IGtleU9mKHsgb25TZWxlY3Q6IG51bGwgfSk7XG5cbi8qKlxuICogR2V0IGFuIG9iamVjdCB3aGljaCBpcyBhIHVuaXF1ZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gKlxuICogVGhlIHJldHVybiB2YWx1ZSB3aWxsIG5vdCBiZSBjb25zaXN0ZW50IGFjcm9zcyBub2RlcyBvciBicm93c2VycywgYnV0XG4gKiB0d28gaWRlbnRpY2FsIHNlbGVjdGlvbnMgb24gdGhlIHNhbWUgbm9kZSB3aWxsIHJldHVybiBpZGVudGljYWwgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0U2VsZWN0aW9uKG5vZGUpIHtcbiAgaWYgKCdzZWxlY3Rpb25TdGFydCcgaW4gbm9kZSAmJiBSZWFjdElucHV0U2VsZWN0aW9uLmhhc1NlbGVjdGlvbkNhcGFiaWxpdGllcyhub2RlKSkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogbm9kZS5zZWxlY3Rpb25TdGFydCxcbiAgICAgIGVuZDogbm9kZS5zZWxlY3Rpb25FbmRcbiAgICB9O1xuICB9IGVsc2UgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcbiAgICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIHJldHVybiB7XG4gICAgICBhbmNob3JOb2RlOiBzZWxlY3Rpb24uYW5jaG9yTm9kZSxcbiAgICAgIGFuY2hvck9mZnNldDogc2VsZWN0aW9uLmFuY2hvck9mZnNldCxcbiAgICAgIGZvY3VzTm9kZTogc2VsZWN0aW9uLmZvY3VzTm9kZSxcbiAgICAgIGZvY3VzT2Zmc2V0OiBzZWxlY3Rpb24uZm9jdXNPZmZzZXRcbiAgICB9O1xuICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xuICAgIHZhciByYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgIHJldHVybiB7XG4gICAgICBwYXJlbnRFbGVtZW50OiByYW5nZS5wYXJlbnRFbGVtZW50KCksXG4gICAgICB0ZXh0OiByYW5nZS50ZXh0LFxuICAgICAgdG9wOiByYW5nZS5ib3VuZGluZ1RvcCxcbiAgICAgIGxlZnQ6IHJhbmdlLmJvdW5kaW5nTGVmdFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBQb2xsIHNlbGVjdGlvbiB0byBzZWUgd2hldGhlciBpdCdzIGNoYW5nZWQuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50XG4gKiBAcmV0dXJuIHs/U3ludGhldGljRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIGNvbnN0cnVjdFNlbGVjdEV2ZW50KG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAvLyBFbnN1cmUgd2UgaGF2ZSB0aGUgcmlnaHQgZWxlbWVudCwgYW5kIHRoYXQgdGhlIHVzZXIgaXMgbm90IGRyYWdnaW5nIGFcbiAgLy8gc2VsZWN0aW9uICh0aGlzIG1hdGNoZXMgbmF0aXZlIGBzZWxlY3RgIGV2ZW50IGJlaGF2aW9yKS4gSW4gSFRNTDUsIHNlbGVjdFxuICAvLyBmaXJlcyBvbmx5IG9uIGlucHV0IGFuZCB0ZXh0YXJlYSB0aHVzIGlmIHRoZXJlJ3Mgbm8gZm9jdXNlZCBlbGVtZW50IHdlXG4gIC8vIHdvbid0IGRpc3BhdGNoLlxuICBpZiAobW91c2VEb3duIHx8IGFjdGl2ZUVsZW1lbnQgPT0gbnVsbCB8fCBhY3RpdmVFbGVtZW50ICE9PSBnZXRBY3RpdmVFbGVtZW50KCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIE9ubHkgZmlyZSB3aGVuIHNlbGVjdGlvbiBoYXMgYWN0dWFsbHkgY2hhbmdlZC5cbiAgdmFyIGN1cnJlbnRTZWxlY3Rpb24gPSBnZXRTZWxlY3Rpb24oYWN0aXZlRWxlbWVudCk7XG4gIGlmICghbGFzdFNlbGVjdGlvbiB8fCAhc2hhbGxvd0VxdWFsKGxhc3RTZWxlY3Rpb24sIGN1cnJlbnRTZWxlY3Rpb24pKSB7XG4gICAgbGFzdFNlbGVjdGlvbiA9IGN1cnJlbnRTZWxlY3Rpb247XG5cbiAgICB2YXIgc3ludGhldGljRXZlbnQgPSBTeW50aGV0aWNFdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlcy5zZWxlY3QsIGFjdGl2ZUVsZW1lbnRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICAgIHN5bnRoZXRpY0V2ZW50LnR5cGUgPSAnc2VsZWN0JztcbiAgICBzeW50aGV0aWNFdmVudC50YXJnZXQgPSBhY3RpdmVFbGVtZW50O1xuXG4gICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKHN5bnRoZXRpY0V2ZW50KTtcblxuICAgIHJldHVybiBzeW50aGV0aWNFdmVudDtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIFRoaXMgcGx1Z2luIGNyZWF0ZXMgYW4gYG9uU2VsZWN0YCBldmVudCB0aGF0IG5vcm1hbGl6ZXMgc2VsZWN0IGV2ZW50c1xuICogYWNyb3NzIGZvcm0gZWxlbWVudHMuXG4gKlxuICogU3VwcG9ydGVkIGVsZW1lbnRzIGFyZTpcbiAqIC0gaW5wdXQgKHNlZSBgaXNUZXh0SW5wdXRFbGVtZW50YClcbiAqIC0gdGV4dGFyZWFcbiAqIC0gY29udGVudEVkaXRhYmxlXG4gKlxuICogVGhpcyBkaWZmZXJzIGZyb20gbmF0aXZlIGJyb3dzZXIgaW1wbGVtZW50YXRpb25zIGluIHRoZSBmb2xsb3dpbmcgd2F5czpcbiAqIC0gRmlyZXMgb24gY29udGVudEVkaXRhYmxlIGZpZWxkcyBhcyB3ZWxsIGFzIGlucHV0cy5cbiAqIC0gRmlyZXMgZm9yIGNvbGxhcHNlZCBzZWxlY3Rpb24uXG4gKiAtIEZpcmVzIGFmdGVyIHVzZXIgaW5wdXQuXG4gKi9cbnZhciBTZWxlY3RFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50c31cbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICBpZiAoIWhhc0xpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuICAgICAgLy8gVHJhY2sgdGhlIGlucHV0IG5vZGUgdGhhdCBoYXMgZm9jdXMuXG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRm9jdXM6XG4gICAgICAgIGlmIChpc1RleHRJbnB1dEVsZW1lbnQodG9wTGV2ZWxUYXJnZXQpIHx8IHRvcExldmVsVGFyZ2V0LmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgYWN0aXZlRWxlbWVudCA9IHRvcExldmVsVGFyZ2V0O1xuICAgICAgICAgIGFjdGl2ZUVsZW1lbnRJRCA9IHRvcExldmVsVGFyZ2V0SUQ7XG4gICAgICAgICAgbGFzdFNlbGVjdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQmx1cjpcbiAgICAgICAgYWN0aXZlRWxlbWVudCA9IG51bGw7XG4gICAgICAgIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG4gICAgICAgIGxhc3RTZWxlY3Rpb24gPSBudWxsO1xuICAgICAgICBicmVhaztcblxuICAgICAgLy8gRG9uJ3QgZmlyZSB0aGUgZXZlbnQgd2hpbGUgdGhlIHVzZXIgaXMgZHJhZ2dpbmcuIFRoaXMgbWF0Y2hlcyB0aGVcbiAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgbmF0aXZlIHNlbGVjdCBldmVudC5cbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZURvd246XG4gICAgICAgIG1vdXNlRG93biA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbnRleHRNZW51OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlVXA6XG4gICAgICAgIG1vdXNlRG93biA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gY29uc3RydWN0U2VsZWN0RXZlbnQobmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICAgICAgLy8gQ2hyb21lIGFuZCBJRSBmaXJlIG5vbi1zdGFuZGFyZCBldmVudCB3aGVuIHNlbGVjdGlvbiBpcyBjaGFuZ2VkIChhbmRcbiAgICAgIC8vIHNvbWV0aW1lcyB3aGVuIGl0IGhhc24ndCkuIElFJ3MgZXZlbnQgZmlyZXMgb3V0IG9mIG9yZGVyIHdpdGggcmVzcGVjdFxuICAgICAgLy8gdG8ga2V5IGFuZCBpbnB1dCBldmVudHMgb24gZGVsZXRpb24sIHNvIHdlIGRpc2NhcmQgaXQuXG4gICAgICAvL1xuICAgICAgLy8gRmlyZWZveCBkb2Vzbid0IHN1cHBvcnQgc2VsZWN0aW9uY2hhbmdlLCBzbyBjaGVjayBzZWxlY3Rpb24gc3RhdHVzXG4gICAgICAvLyBhZnRlciBlYWNoIGtleSBlbnRyeS4gVGhlIHNlbGVjdGlvbiBjaGFuZ2VzIGFmdGVyIGtleWRvd24gYW5kIGJlZm9yZVxuICAgICAgLy8ga2V5dXAsIGJ1dCB3ZSBjaGVjayBvbiBrZXlkb3duIGFzIHdlbGwgaW4gdGhlIGNhc2Ugb2YgaG9sZGluZyBkb3duIGFcbiAgICAgIC8vIGtleSwgd2hlbiBtdWx0aXBsZSBrZXlkb3duIGV2ZW50cyBhcmUgZmlyZWQgYnV0IG9ubHkgb25lIGtleXVwIGlzLlxuICAgICAgLy8gVGhpcyBpcyBhbHNvIG91ciBhcHByb2FjaCBmb3IgSUUgaGFuZGxpbmcsIGZvciB0aGUgcmVhc29uIGFib3ZlLlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZTpcbiAgICAgICAgaWYgKHNraXBTZWxlY3Rpb25DaGFuZ2VFdmVudCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5RG93bjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcDpcbiAgICAgICAgcmV0dXJuIGNvbnN0cnVjdFNlbGVjdEV2ZW50KG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG5cbiAgZGlkUHV0TGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAocmVnaXN0cmF0aW9uTmFtZSA9PT0gT05fU0VMRUNUX0tFWSkge1xuICAgICAgaGFzTGlzdGVuZXIgPSB0cnVlO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTZWxlY3RFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU2VydmVyUmVhY3RSb290SW5kZXhcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFNpemUgb2YgdGhlIHJlYWN0Um9vdCBJRCBzcGFjZS4gV2UgZ2VuZXJhdGUgcmFuZG9tIG51bWJlcnMgZm9yIFJlYWN0IHJvb3RcbiAqIElEcyBhbmQgaWYgdGhlcmUncyBhIGNvbGxpc2lvbiB0aGUgZXZlbnRzIGFuZCBET00gdXBkYXRlIHN5c3RlbSB3aWxsXG4gKiBnZXQgY29uZnVzZWQuIEluIHRoZSBmdXR1cmUgd2UgbmVlZCBhIHdheSB0byBnZW5lcmF0ZSBHVUlEcyBidXQgZm9yXG4gKiBub3cgdGhpcyB3aWxsIHdvcmsgb24gYSBzbWFsbGVyIHNjYWxlLlxuICovXG52YXIgR0xPQkFMX01PVU5UX1BPSU5UX01BWCA9IE1hdGgucG93KDIsIDUzKTtcblxudmFyIFNlcnZlclJlYWN0Um9vdEluZGV4ID0ge1xuICBjcmVhdGVSZWFjdFJvb3RJbmRleDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIEdMT0JBTF9NT1VOVF9QT0lOVF9NQVgpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlcnZlclJlYWN0Um9vdEluZGV4OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTaW1wbGVFdmVudFBsdWdpblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50TGlzdGVuZXIgPSByZXF1aXJlKCdmYmpzL2xpYi9FdmVudExpc3RlbmVyJyk7XG52YXIgRXZlbnRQcm9wYWdhdG9ycyA9IHJlcXVpcmUoJy4vRXZlbnRQcm9wYWdhdG9ycycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBTeW50aGV0aWNDbGlwYm9hcmRFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljQ2xpcGJvYXJkRXZlbnQnKTtcbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcbnZhciBTeW50aGV0aWNGb2N1c0V2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNGb2N1c0V2ZW50Jyk7XG52YXIgU3ludGhldGljS2V5Ym9hcmRFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljS2V5Ym9hcmRFdmVudCcpO1xudmFyIFN5bnRoZXRpY01vdXNlRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY01vdXNlRXZlbnQnKTtcbnZhciBTeW50aGV0aWNEcmFnRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0RyYWdFdmVudCcpO1xudmFyIFN5bnRoZXRpY1RvdWNoRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1RvdWNoRXZlbnQnKTtcbnZhciBTeW50aGV0aWNVSUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNVSUV2ZW50Jyk7XG52YXIgU3ludGhldGljV2hlZWxFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljV2hlZWxFdmVudCcpO1xuXG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcbnZhciBnZXRFdmVudENoYXJDb2RlID0gcmVxdWlyZSgnLi9nZXRFdmVudENoYXJDb2RlJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbnZhciBldmVudFR5cGVzID0ge1xuICBhYm9ydDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQWJvcnQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkFib3J0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgYmx1cjoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQmx1cjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQmx1ckNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGNhblBsYXk6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNhblBsYXk6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNhblBsYXlDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBjYW5QbGF5VGhyb3VnaDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQ2FuUGxheVRocm91Z2g6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNhblBsYXlUaHJvdWdoQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgY2xpY2s6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNsaWNrOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25DbGlja0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGNvbnRleHRNZW51OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db250ZXh0TWVudTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ29udGV4dE1lbnVDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBjb3B5OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db3B5OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Db3B5Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgY3V0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25DdXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkN1dENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRvdWJsZUNsaWNrOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Eb3VibGVDbGljazogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRG91YmxlQ2xpY2tDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJhZ0VuZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0VuZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ0VuZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWdFbnRlcjoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0VudGVyOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnRW50ZXJDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnRXhpdDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0V4aXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdFeGl0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJhZ0xlYXZlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnTGVhdmU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdMZWF2ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWdPdmVyOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnT3ZlcjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ092ZXJDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkRyYWdTdGFydDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ1N0YXJ0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJvcDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJvcDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJvcENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGR1cmF0aW9uQ2hhbmdlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EdXJhdGlvbkNoYW5nZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHVyYXRpb25DaGFuZ2VDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBlbXB0aWVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbXB0aWVkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25FbXB0aWVkQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZW5jcnlwdGVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbmNyeXB0ZWQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkVuY3J5cHRlZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGVuZGVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbmRlZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRW5kZWRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBlcnJvcjoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRXJyb3I6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkVycm9yQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZm9jdXM6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkZvY3VzOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Gb2N1c0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGlucHV0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25JbnB1dDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uSW5wdXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBrZXlEb3duOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25LZXlEb3duOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25LZXlEb3duQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAga2V5UHJlc3M6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbktleVByZXNzOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25LZXlQcmVzc0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGtleVVwOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25LZXlVcDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uS2V5VXBDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBsb2FkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Mb2FkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Mb2FkQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbG9hZGVkRGF0YToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTG9hZGVkRGF0YTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTG9hZGVkRGF0YUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGxvYWRlZE1ldGFkYXRhOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Mb2FkZWRNZXRhZGF0YTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTG9hZGVkTWV0YWRhdGFDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBsb2FkU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkxvYWRTdGFydDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTG9hZFN0YXJ0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgLy8gTm90ZTogV2UgZG8gbm90IGFsbG93IGxpc3RlbmluZyB0byBtb3VzZU92ZXIgZXZlbnRzLiBJbnN0ZWFkLCB1c2UgdGhlXG4gIC8vIG9uTW91c2VFbnRlci9vbk1vdXNlTGVhdmUgY3JlYXRlZCBieSBgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luYC5cbiAgbW91c2VEb3duOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Nb3VzZURvd246IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlRG93bkNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIG1vdXNlTW92ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTW91c2VNb3ZlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Nb3VzZU1vdmVDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBtb3VzZU91dDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTW91c2VPdXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlT3V0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbW91c2VPdmVyOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Nb3VzZU92ZXI6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlT3ZlckNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIG1vdXNlVXA6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbk1vdXNlVXA6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlVXBDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBwYXN0ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUGFzdGU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBhc3RlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgcGF1c2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblBhdXNlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25QYXVzZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHBsYXk6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblBsYXk6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBsYXlDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBwbGF5aW5nOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25QbGF5aW5nOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25QbGF5aW5nQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgcHJvZ3Jlc3M6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblByb2dyZXNzOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Qcm9ncmVzc0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHJhdGVDaGFuZ2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblJhdGVDaGFuZ2U6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblJhdGVDaGFuZ2VDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICByZXNldDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUmVzZXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblJlc2V0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgc2Nyb2xsOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TY3JvbGw6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblNjcm9sbENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHNlZWtlZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uU2Vla2VkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TZWVrZWRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBzZWVraW5nOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TZWVraW5nOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TZWVraW5nQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgc3RhbGxlZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uU3RhbGxlZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uU3RhbGxlZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHN1Ym1pdDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uU3VibWl0OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TdWJtaXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBzdXNwZW5kOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TdXNwZW5kOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TdXNwZW5kQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgdGltZVVwZGF0ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uVGltZVVwZGF0ZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVGltZVVwZGF0ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHRvdWNoQ2FuY2VsOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Ub3VjaENhbmNlbDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVG91Y2hDYW5jZWxDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB0b3VjaEVuZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uVG91Y2hFbmQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoRW5kQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgdG91Y2hNb3ZlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Ub3VjaE1vdmU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoTW92ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHRvdWNoU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblRvdWNoU3RhcnQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoU3RhcnRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB2b2x1bWVDaGFuZ2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblZvbHVtZUNoYW5nZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVm9sdW1lQ2hhbmdlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgd2FpdGluZzoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uV2FpdGluZzogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uV2FpdGluZ0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHdoZWVsOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25XaGVlbDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uV2hlZWxDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9XG59O1xuXG52YXIgdG9wTGV2ZWxFdmVudHNUb0Rpc3BhdGNoQ29uZmlnID0ge1xuICB0b3BBYm9ydDogZXZlbnRUeXBlcy5hYm9ydCxcbiAgdG9wQmx1cjogZXZlbnRUeXBlcy5ibHVyLFxuICB0b3BDYW5QbGF5OiBldmVudFR5cGVzLmNhblBsYXksXG4gIHRvcENhblBsYXlUaHJvdWdoOiBldmVudFR5cGVzLmNhblBsYXlUaHJvdWdoLFxuICB0b3BDbGljazogZXZlbnRUeXBlcy5jbGljayxcbiAgdG9wQ29udGV4dE1lbnU6IGV2ZW50VHlwZXMuY29udGV4dE1lbnUsXG4gIHRvcENvcHk6IGV2ZW50VHlwZXMuY29weSxcbiAgdG9wQ3V0OiBldmVudFR5cGVzLmN1dCxcbiAgdG9wRG91YmxlQ2xpY2s6IGV2ZW50VHlwZXMuZG91YmxlQ2xpY2ssXG4gIHRvcERyYWc6IGV2ZW50VHlwZXMuZHJhZyxcbiAgdG9wRHJhZ0VuZDogZXZlbnRUeXBlcy5kcmFnRW5kLFxuICB0b3BEcmFnRW50ZXI6IGV2ZW50VHlwZXMuZHJhZ0VudGVyLFxuICB0b3BEcmFnRXhpdDogZXZlbnRUeXBlcy5kcmFnRXhpdCxcbiAgdG9wRHJhZ0xlYXZlOiBldmVudFR5cGVzLmRyYWdMZWF2ZSxcbiAgdG9wRHJhZ092ZXI6IGV2ZW50VHlwZXMuZHJhZ092ZXIsXG4gIHRvcERyYWdTdGFydDogZXZlbnRUeXBlcy5kcmFnU3RhcnQsXG4gIHRvcERyb3A6IGV2ZW50VHlwZXMuZHJvcCxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6IGV2ZW50VHlwZXMuZHVyYXRpb25DaGFuZ2UsXG4gIHRvcEVtcHRpZWQ6IGV2ZW50VHlwZXMuZW1wdGllZCxcbiAgdG9wRW5jcnlwdGVkOiBldmVudFR5cGVzLmVuY3J5cHRlZCxcbiAgdG9wRW5kZWQ6IGV2ZW50VHlwZXMuZW5kZWQsXG4gIHRvcEVycm9yOiBldmVudFR5cGVzLmVycm9yLFxuICB0b3BGb2N1czogZXZlbnRUeXBlcy5mb2N1cyxcbiAgdG9wSW5wdXQ6IGV2ZW50VHlwZXMuaW5wdXQsXG4gIHRvcEtleURvd246IGV2ZW50VHlwZXMua2V5RG93bixcbiAgdG9wS2V5UHJlc3M6IGV2ZW50VHlwZXMua2V5UHJlc3MsXG4gIHRvcEtleVVwOiBldmVudFR5cGVzLmtleVVwLFxuICB0b3BMb2FkOiBldmVudFR5cGVzLmxvYWQsXG4gIHRvcExvYWRlZERhdGE6IGV2ZW50VHlwZXMubG9hZGVkRGF0YSxcbiAgdG9wTG9hZGVkTWV0YWRhdGE6IGV2ZW50VHlwZXMubG9hZGVkTWV0YWRhdGEsXG4gIHRvcExvYWRTdGFydDogZXZlbnRUeXBlcy5sb2FkU3RhcnQsXG4gIHRvcE1vdXNlRG93bjogZXZlbnRUeXBlcy5tb3VzZURvd24sXG4gIHRvcE1vdXNlTW92ZTogZXZlbnRUeXBlcy5tb3VzZU1vdmUsXG4gIHRvcE1vdXNlT3V0OiBldmVudFR5cGVzLm1vdXNlT3V0LFxuICB0b3BNb3VzZU92ZXI6IGV2ZW50VHlwZXMubW91c2VPdmVyLFxuICB0b3BNb3VzZVVwOiBldmVudFR5cGVzLm1vdXNlVXAsXG4gIHRvcFBhc3RlOiBldmVudFR5cGVzLnBhc3RlLFxuICB0b3BQYXVzZTogZXZlbnRUeXBlcy5wYXVzZSxcbiAgdG9wUGxheTogZXZlbnRUeXBlcy5wbGF5LFxuICB0b3BQbGF5aW5nOiBldmVudFR5cGVzLnBsYXlpbmcsXG4gIHRvcFByb2dyZXNzOiBldmVudFR5cGVzLnByb2dyZXNzLFxuICB0b3BSYXRlQ2hhbmdlOiBldmVudFR5cGVzLnJhdGVDaGFuZ2UsXG4gIHRvcFJlc2V0OiBldmVudFR5cGVzLnJlc2V0LFxuICB0b3BTY3JvbGw6IGV2ZW50VHlwZXMuc2Nyb2xsLFxuICB0b3BTZWVrZWQ6IGV2ZW50VHlwZXMuc2Vla2VkLFxuICB0b3BTZWVraW5nOiBldmVudFR5cGVzLnNlZWtpbmcsXG4gIHRvcFN0YWxsZWQ6IGV2ZW50VHlwZXMuc3RhbGxlZCxcbiAgdG9wU3VibWl0OiBldmVudFR5cGVzLnN1Ym1pdCxcbiAgdG9wU3VzcGVuZDogZXZlbnRUeXBlcy5zdXNwZW5kLFxuICB0b3BUaW1lVXBkYXRlOiBldmVudFR5cGVzLnRpbWVVcGRhdGUsXG4gIHRvcFRvdWNoQ2FuY2VsOiBldmVudFR5cGVzLnRvdWNoQ2FuY2VsLFxuICB0b3BUb3VjaEVuZDogZXZlbnRUeXBlcy50b3VjaEVuZCxcbiAgdG9wVG91Y2hNb3ZlOiBldmVudFR5cGVzLnRvdWNoTW92ZSxcbiAgdG9wVG91Y2hTdGFydDogZXZlbnRUeXBlcy50b3VjaFN0YXJ0LFxuICB0b3BWb2x1bWVDaGFuZ2U6IGV2ZW50VHlwZXMudm9sdW1lQ2hhbmdlLFxuICB0b3BXYWl0aW5nOiBldmVudFR5cGVzLndhaXRpbmcsXG4gIHRvcFdoZWVsOiBldmVudFR5cGVzLndoZWVsXG59O1xuXG5mb3IgKHZhciB0eXBlIGluIHRvcExldmVsRXZlbnRzVG9EaXNwYXRjaENvbmZpZykge1xuICB0b3BMZXZlbEV2ZW50c1RvRGlzcGF0Y2hDb25maWdbdHlwZV0uZGVwZW5kZW5jaWVzID0gW3R5cGVdO1xufVxuXG52YXIgT05fQ0xJQ0tfS0VZID0ga2V5T2YoeyBvbkNsaWNrOiBudWxsIH0pO1xudmFyIG9uQ2xpY2tMaXN0ZW5lcnMgPSB7fTtcblxudmFyIFNpbXBsZUV2ZW50UGx1Z2luID0ge1xuXG4gIGV2ZW50VHlwZXM6IGV2ZW50VHlwZXMsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIHZhciBkaXNwYXRjaENvbmZpZyA9IHRvcExldmVsRXZlbnRzVG9EaXNwYXRjaENvbmZpZ1t0b3BMZXZlbFR5cGVdO1xuICAgIGlmICghZGlzcGF0Y2hDb25maWcpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgRXZlbnRDb25zdHJ1Y3RvcjtcbiAgICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEFib3J0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENhblBsYXk6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ2FuUGxheVRocm91Z2g6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHVyYXRpb25DaGFuZ2U6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRW1wdGllZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BFbmNyeXB0ZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRW5kZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRXJyb3I6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wSW5wdXQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTG9hZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BMb2FkZWREYXRhOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcExvYWRlZE1ldGFkYXRhOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcExvYWRTdGFydDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BQYXVzZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BQbGF5OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBsYXlpbmc6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUHJvZ3Jlc3M6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUmF0ZUNoYW5nZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BSZXNldDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTZWVrZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wU2Vla2luZzpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTdGFsbGVkOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFN1Ym1pdDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTdXNwZW5kOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFRpbWVVcGRhdGU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVm9sdW1lQ2hhbmdlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFdhaXRpbmc6XG4gICAgICAgIC8vIEhUTUwgRXZlbnRzXG4gICAgICAgIC8vIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvaW5kZXguaHRtbCNldmVudHMtMFxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzOlxuICAgICAgICAvLyBGaXJlRm94IGNyZWF0ZXMgYSBrZXlwcmVzcyBldmVudCBmb3IgZnVuY3Rpb24ga2V5cyB0b28uIFRoaXMgcmVtb3Zlc1xuICAgICAgICAvLyB0aGUgdW53YW50ZWQga2V5cHJlc3MgZXZlbnRzLiBFbnRlciBpcyBob3dldmVyIGJvdGggcHJpbnRhYmxlIGFuZFxuICAgICAgICAvLyBub24tcHJpbnRhYmxlLiBPbmUgd291bGQgZXhwZWN0IFRhYiB0byBiZSBhcyB3ZWxsIChidXQgaXQgaXNuJ3QpLlxuICAgICAgICBpZiAoZ2V0RXZlbnRDaGFyQ29kZShuYXRpdmVFdmVudCkgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd246XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5VXA6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNLZXlib2FyZEV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BCbHVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzOlxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljRm9jdXNFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ2xpY2s6XG4gICAgICAgIC8vIEZpcmVmb3ggY3JlYXRlcyBhIGNsaWNrIGV2ZW50IG9uIHJpZ2h0IG1vdXNlIGNsaWNrcy4gVGhpcyByZW1vdmVzIHRoZVxuICAgICAgICAvLyB1bndhbnRlZCBjbGljayBldmVudHMuXG4gICAgICAgIGlmIChuYXRpdmVFdmVudC5idXR0b24gPT09IDIpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbnRleHRNZW51OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERvdWJsZUNsaWNrOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU1vdmU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VPdXQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlVXA6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNNb3VzZUV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdFbmQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJhZ0VudGVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdFeGl0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdMZWF2ZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnT3ZlcjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnU3RhcnQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJvcDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY0RyYWdFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hDYW5jZWw6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hFbmQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hNb3ZlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoU3RhcnQ6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNUb3VjaEV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTY3JvbGw6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNVSUV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BXaGVlbDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY1doZWVsRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvcHk6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ3V0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBhc3RlOlxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljQ2xpcGJvYXJkRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAhRXZlbnRDb25zdHJ1Y3RvciA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdTaW1wbGVFdmVudFBsdWdpbjogVW5oYW5kbGVkIGV2ZW50IHR5cGUsIGAlc2AuJywgdG9wTGV2ZWxUeXBlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIGV2ZW50ID0gRXZlbnRDb25zdHJ1Y3Rvci5nZXRQb29sZWQoZGlzcGF0Y2hDb25maWcsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcbiAgICByZXR1cm4gZXZlbnQ7XG4gIH0sXG5cbiAgZGlkUHV0TGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpIHtcbiAgICAvLyBNb2JpbGUgU2FmYXJpIGRvZXMgbm90IGZpcmUgcHJvcGVybHkgYnViYmxlIGNsaWNrIGV2ZW50cyBvblxuICAgIC8vIG5vbi1pbnRlcmFjdGl2ZSBlbGVtZW50cywgd2hpY2ggbWVhbnMgZGVsZWdhdGVkIGNsaWNrIGxpc3RlbmVycyBkbyBub3RcbiAgICAvLyBmaXJlLiBUaGUgd29ya2Fyb3VuZCBmb3IgdGhpcyBidWcgaW52b2x2ZXMgYXR0YWNoaW5nIGFuIGVtcHR5IGNsaWNrXG4gICAgLy8gbGlzdGVuZXIgb24gdGhlIHRhcmdldCBub2RlLlxuICAgIGlmIChyZWdpc3RyYXRpb25OYW1lID09PSBPTl9DTElDS19LRVkpIHtcbiAgICAgIHZhciBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKGlkKTtcbiAgICAgIGlmICghb25DbGlja0xpc3RlbmVyc1tpZF0pIHtcbiAgICAgICAgb25DbGlja0xpc3RlbmVyc1tpZF0gPSBFdmVudExpc3RlbmVyLmxpc3Rlbihub2RlLCAnY2xpY2snLCBlbXB0eUZ1bmN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgd2lsbERlbGV0ZUxpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICBpZiAocmVnaXN0cmF0aW9uTmFtZSA9PT0gT05fQ0xJQ0tfS0VZKSB7XG4gICAgICBvbkNsaWNrTGlzdGVuZXJzW2lkXS5yZW1vdmUoKTtcbiAgICAgIGRlbGV0ZSBvbkNsaWNrTGlzdGVuZXJzW2lkXTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTaW1wbGVFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljQ2xpcGJvYXJkRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9jbGlwYm9hcmQtYXBpcy9cbiAqL1xudmFyIENsaXBib2FyZEV2ZW50SW50ZXJmYWNlID0ge1xuICBjbGlwYm9hcmREYXRhOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gJ2NsaXBib2FyZERhdGEnIGluIGV2ZW50ID8gZXZlbnQuY2xpcGJvYXJkRGF0YSA6IHdpbmRvdy5jbGlwYm9hcmREYXRhO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNDbGlwYm9hcmRFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0NsaXBib2FyZEV2ZW50LCBDbGlwYm9hcmRFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljQ2xpcGJvYXJkRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2V2ZW50cy1jb21wb3NpdGlvbmV2ZW50c1xuICovXG52YXIgQ29tcG9zaXRpb25FdmVudEludGVyZmFjZSA9IHtcbiAgZGF0YTogbnVsbFxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljQ29tcG9zaXRpb25FdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQsIENvbXBvc2l0aW9uRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0RyYWdFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNNb3VzZUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNNb3VzZUV2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBEcmFnRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgRHJhZ0V2ZW50SW50ZXJmYWNlID0ge1xuICBkYXRhVHJhbnNmZXI6IG51bGxcbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY1VJRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY0RyYWdFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNNb3VzZUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNNb3VzZUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNEcmFnRXZlbnQsIERyYWdFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljRHJhZ0V2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIEV2ZW50SW50ZXJmYWNlID0ge1xuICB0eXBlOiBudWxsLFxuICB0YXJnZXQ6IG51bGwsXG4gIC8vIGN1cnJlbnRUYXJnZXQgaXMgc2V0IHdoZW4gZGlzcGF0Y2hpbmc7IG5vIHVzZSBpbiBjb3B5aW5nIGl0IGhlcmVcbiAgY3VycmVudFRhcmdldDogZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc051bGwsXG4gIGV2ZW50UGhhc2U6IG51bGwsXG4gIGJ1YmJsZXM6IG51bGwsXG4gIGNhbmNlbGFibGU6IG51bGwsXG4gIHRpbWVTdGFtcDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuIGV2ZW50LnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpO1xuICB9LFxuICBkZWZhdWx0UHJldmVudGVkOiBudWxsLFxuICBpc1RydXN0ZWQ6IG51bGxcbn07XG5cbi8qKlxuICogU3ludGhldGljIGV2ZW50cyBhcmUgZGlzcGF0Y2hlZCBieSBldmVudCBwbHVnaW5zLCB0eXBpY2FsbHkgaW4gcmVzcG9uc2UgdG8gYVxuICogdG9wLWxldmVsIGV2ZW50IGRlbGVnYXRpb24gaGFuZGxlci5cbiAqXG4gKiBUaGVzZSBzeXN0ZW1zIHNob3VsZCBnZW5lcmFsbHkgdXNlIHBvb2xpbmcgdG8gcmVkdWNlIHRoZSBmcmVxdWVuY3kgb2YgZ2FyYmFnZVxuICogY29sbGVjdGlvbi4gVGhlIHN5c3RlbSBzaG91bGQgY2hlY2sgYGlzUGVyc2lzdGVudGAgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlXG4gKiBldmVudCBzaG91bGQgYmUgcmVsZWFzZWQgaW50byB0aGUgcG9vbCBhZnRlciBiZWluZyBkaXNwYXRjaGVkLiBVc2VycyB0aGF0XG4gKiBuZWVkIGEgcGVyc2lzdGVkIGV2ZW50IHNob3VsZCBpbnZva2UgYHBlcnNpc3RgLlxuICpcbiAqIFN5bnRoZXRpYyBldmVudHMgKGFuZCBzdWJjbGFzc2VzKSBpbXBsZW1lbnQgdGhlIERPTSBMZXZlbCAzIEV2ZW50cyBBUEkgYnlcbiAqIG5vcm1hbGl6aW5nIGJyb3dzZXIgcXVpcmtzLiBTdWJjbGFzc2VzIGRvIG5vdCBuZWNlc3NhcmlseSBoYXZlIHRvIGltcGxlbWVudCBhXG4gKiBET00gaW50ZXJmYWNlOyBjdXN0b20gYXBwbGljYXRpb24tc3BlY2lmaWMgZXZlbnRzIGNhbiBhbHNvIHN1YmNsYXNzIHRoaXMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICB0aGlzLmRpc3BhdGNoQ29uZmlnID0gZGlzcGF0Y2hDb25maWc7XG4gIHRoaXMuZGlzcGF0Y2hNYXJrZXIgPSBkaXNwYXRjaE1hcmtlcjtcbiAgdGhpcy5uYXRpdmVFdmVudCA9IG5hdGl2ZUV2ZW50O1xuXG4gIHZhciBJbnRlcmZhY2UgPSB0aGlzLmNvbnN0cnVjdG9yLkludGVyZmFjZTtcbiAgZm9yICh2YXIgcHJvcE5hbWUgaW4gSW50ZXJmYWNlKSB7XG4gICAgaWYgKCFJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFyIG5vcm1hbGl6ZSA9IEludGVyZmFjZVtwcm9wTmFtZV07XG4gICAgaWYgKG5vcm1hbGl6ZSkge1xuICAgICAgdGhpc1twcm9wTmFtZV0gPSBub3JtYWxpemUobmF0aXZlRXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocHJvcE5hbWUgPT09ICd0YXJnZXQnKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbmF0aXZlRXZlbnRUYXJnZXQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzW3Byb3BOYW1lXSA9IG5hdGl2ZUV2ZW50W3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgZGVmYXVsdFByZXZlbnRlZCA9IG5hdGl2ZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgIT0gbnVsbCA/IG5hdGl2ZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgOiBuYXRpdmVFdmVudC5yZXR1cm5WYWx1ZSA9PT0gZmFsc2U7XG4gIGlmIChkZWZhdWx0UHJldmVudGVkKSB7XG4gICAgdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNGYWxzZTtcbiAgfVxuICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0ZhbHNlO1xufVxuXG5hc3NpZ24oU3ludGhldGljRXZlbnQucHJvdG90eXBlLCB7XG5cbiAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICAgIHZhciBldmVudCA9IHRoaXMubmF0aXZlRXZlbnQ7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGV2ZW50LCAnVGhpcyBzeW50aGV0aWMgZXZlbnQgaXMgcmV1c2VkIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLiBJZiB5b3VcXCdyZSAnICsgJ3NlZWluZyB0aGlzLCB5b3VcXCdyZSBjYWxsaW5nIGBwcmV2ZW50RGVmYXVsdGAgb24gYSAnICsgJ3JlbGVhc2VkL251bGxpZmllZCBzeW50aGV0aWMgZXZlbnQuIFRoaXMgaXMgYSBuby1vcC4gU2VlICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC1ldmVudC1wb29saW5nIGZvciBtb3JlIGluZm9ybWF0aW9uLicpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIWV2ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlO1xuICB9LFxuXG4gIHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBldmVudCA9IHRoaXMubmF0aXZlRXZlbnQ7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGV2ZW50LCAnVGhpcyBzeW50aGV0aWMgZXZlbnQgaXMgcmV1c2VkIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLiBJZiB5b3VcXCdyZSAnICsgJ3NlZWluZyB0aGlzLCB5b3VcXCdyZSBjYWxsaW5nIGBzdG9wUHJvcGFnYXRpb25gIG9uIGEgJyArICdyZWxlYXNlZC9udWxsaWZpZWQgc3ludGhldGljIGV2ZW50LiBUaGlzIGlzIGEgbm8tb3AuIFNlZSAnICsgJ2h0dHBzOi8vZmIubWUvcmVhY3QtZXZlbnQtcG9vbGluZyBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCFldmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgIH1cbiAgICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdlIHJlbGVhc2UgYWxsIGRpc3BhdGNoZWQgYFN5bnRoZXRpY0V2ZW50YHMgYWZ0ZXIgZWFjaCBldmVudCBsb29wLCBhZGRpbmdcbiAgICogdGhlbSBiYWNrIGludG8gdGhlIHBvb2wuIFRoaXMgYWxsb3dzIGEgd2F5IHRvIGhvbGQgb250byBhIHJlZmVyZW5jZSB0aGF0XG4gICAqIHdvbid0IGJlIGFkZGVkIGJhY2sgaW50byB0aGUgcG9vbC5cbiAgICovXG4gIHBlcnNpc3Q6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmlzUGVyc2lzdGVudCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhpcyBldmVudCBzaG91bGQgYmUgcmVsZWFzZWQgYmFjayBpbnRvIHRoZSBwb29sLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoaXMgc2hvdWxkIG5vdCBiZSByZWxlYXNlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cbiAgaXNQZXJzaXN0ZW50OiBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zRmFsc2UsXG5cbiAgLyoqXG4gICAqIGBQb29sZWRDbGFzc2AgbG9va3MgZm9yIGBkZXN0cnVjdG9yYCBvbiBlYWNoIGluc3RhbmNlIGl0IHJlbGVhc2VzLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBJbnRlcmZhY2UgPSB0aGlzLmNvbnN0cnVjdG9yLkludGVyZmFjZTtcbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBJbnRlcmZhY2UpIHtcbiAgICAgIHRoaXNbcHJvcE5hbWVdID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5kaXNwYXRjaENvbmZpZyA9IG51bGw7XG4gICAgdGhpcy5kaXNwYXRjaE1hcmtlciA9IG51bGw7XG4gICAgdGhpcy5uYXRpdmVFdmVudCA9IG51bGw7XG4gIH1cblxufSk7XG5cblN5bnRoZXRpY0V2ZW50LkludGVyZmFjZSA9IEV2ZW50SW50ZXJmYWNlO1xuXG4vKipcbiAqIEhlbHBlciB0byByZWR1Y2UgYm9pbGVycGxhdGUgd2hlbiBjcmVhdGluZyBzdWJjbGFzc2VzLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IENsYXNzXG4gKiBAcGFyYW0gez9vYmplY3R9IEludGVyZmFjZVxuICovXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MgPSBmdW5jdGlvbiAoQ2xhc3MsIEludGVyZmFjZSkge1xuICB2YXIgU3VwZXIgPSB0aGlzO1xuXG4gIHZhciBwcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XG4gIGFzc2lnbihwcm90b3R5cGUsIENsYXNzLnByb3RvdHlwZSk7XG4gIENsYXNzLnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2xhc3M7XG5cbiAgQ2xhc3MuSW50ZXJmYWNlID0gYXNzaWduKHt9LCBTdXBlci5JbnRlcmZhY2UsIEludGVyZmFjZSk7XG4gIENsYXNzLmF1Z21lbnRDbGFzcyA9IFN1cGVyLmF1Z21lbnRDbGFzcztcblxuICBQb29sZWRDbGFzcy5hZGRQb29saW5nVG8oQ2xhc3MsIFBvb2xlZENsYXNzLmZvdXJBcmd1bWVudFBvb2xlcik7XG59O1xuXG5Qb29sZWRDbGFzcy5hZGRQb29saW5nVG8oU3ludGhldGljRXZlbnQsIFBvb2xlZENsYXNzLmZvdXJBcmd1bWVudFBvb2xlcik7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0ZvY3VzRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljVUlFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljVUlFdmVudCcpO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgRm9jdXNFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvXG4gKi9cbnZhciBGb2N1c0V2ZW50SW50ZXJmYWNlID0ge1xuICByZWxhdGVkVGFyZ2V0OiBudWxsXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNGb2N1c0V2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY1VJRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY1VJRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0ZvY3VzRXZlbnQsIEZvY3VzRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0ZvY3VzRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0lucHV0RXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDEzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDEzMTEwNVxuICogICAgICAvI2V2ZW50cy1pbnB1dGV2ZW50c1xuICovXG52YXIgSW5wdXRFdmVudEludGVyZmFjZSA9IHtcbiAgZGF0YTogbnVsbFxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljSW5wdXRFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0lucHV0RXZlbnQsIElucHV0RXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0lucHV0RXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0tleWJvYXJkRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljVUlFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljVUlFdmVudCcpO1xuXG52YXIgZ2V0RXZlbnRDaGFyQ29kZSA9IHJlcXVpcmUoJy4vZ2V0RXZlbnRDaGFyQ29kZScpO1xudmFyIGdldEV2ZW50S2V5ID0gcmVxdWlyZSgnLi9nZXRFdmVudEtleScpO1xudmFyIGdldEV2ZW50TW9kaWZpZXJTdGF0ZSA9IHJlcXVpcmUoJy4vZ2V0RXZlbnRNb2RpZmllclN0YXRlJyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBLZXlib2FyZEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIEtleWJvYXJkRXZlbnRJbnRlcmZhY2UgPSB7XG4gIGtleTogZ2V0RXZlbnRLZXksXG4gIGxvY2F0aW9uOiBudWxsLFxuICBjdHJsS2V5OiBudWxsLFxuICBzaGlmdEtleTogbnVsbCxcbiAgYWx0S2V5OiBudWxsLFxuICBtZXRhS2V5OiBudWxsLFxuICByZXBlYXQ6IG51bGwsXG4gIGxvY2FsZTogbnVsbCxcbiAgZ2V0TW9kaWZpZXJTdGF0ZTogZ2V0RXZlbnRNb2RpZmllclN0YXRlLFxuICAvLyBMZWdhY3kgSW50ZXJmYWNlXG4gIGNoYXJDb2RlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBgY2hhckNvZGVgIGlzIHRoZSByZXN1bHQgb2YgYSBLZXlQcmVzcyBldmVudCBhbmQgcmVwcmVzZW50cyB0aGUgdmFsdWUgb2ZcbiAgICAvLyB0aGUgYWN0dWFsIHByaW50YWJsZSBjaGFyYWN0ZXIuXG5cbiAgICAvLyBLZXlQcmVzcyBpcyBkZXByZWNhdGVkLCBidXQgaXRzIHJlcGxhY2VtZW50IGlzIG5vdCB5ZXQgZmluYWwgYW5kIG5vdFxuICAgIC8vIGltcGxlbWVudGVkIGluIGFueSBtYWpvciBicm93c2VyLiBPbmx5IEtleVByZXNzIGhhcyBjaGFyQ29kZS5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleXByZXNzJykge1xuICAgICAgcmV0dXJuIGdldEV2ZW50Q2hhckNvZGUoZXZlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfSxcbiAga2V5Q29kZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gYGtleUNvZGVgIGlzIHRoZSByZXN1bHQgb2YgYSBLZXlEb3duL1VwIGV2ZW50IGFuZCByZXByZXNlbnRzIHRoZSB2YWx1ZSBvZlxuICAgIC8vIHBoeXNpY2FsIGtleWJvYXJkIGtleS5cblxuICAgIC8vIFRoZSBhY3R1YWwgbWVhbmluZyBvZiB0aGUgdmFsdWUgZGVwZW5kcyBvbiB0aGUgdXNlcnMnIGtleWJvYXJkIGxheW91dFxuICAgIC8vIHdoaWNoIGNhbm5vdCBiZSBkZXRlY3RlZC4gQXNzdW1pbmcgdGhhdCBpdCBpcyBhIFVTIGtleWJvYXJkIGxheW91dFxuICAgIC8vIHByb3ZpZGVzIGEgc3VycHJpc2luZ2x5IGFjY3VyYXRlIG1hcHBpbmcgZm9yIFVTIGFuZCBFdXJvcGVhbiB1c2Vycy5cbiAgICAvLyBEdWUgdG8gdGhpcywgaXQgaXMgbGVmdCB0byB0aGUgdXNlciB0byBpbXBsZW1lbnQgYXQgdGhpcyB0aW1lLlxuICAgIGlmIChldmVudC50eXBlID09PSAna2V5ZG93bicgfHwgZXZlbnQudHlwZSA9PT0gJ2tleXVwJykge1xuICAgICAgcmV0dXJuIGV2ZW50LmtleUNvZGU7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9LFxuICB3aGljaDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gYHdoaWNoYCBpcyBhbiBhbGlhcyBmb3IgZWl0aGVyIGBrZXlDb2RlYCBvciBgY2hhckNvZGVgIGRlcGVuZGluZyBvbiB0aGVcbiAgICAvLyB0eXBlIG9mIHRoZSBldmVudC5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleXByZXNzJykge1xuICAgICAgcmV0dXJuIGdldEV2ZW50Q2hhckNvZGUoZXZlbnQpO1xuICAgIH1cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleWRvd24nIHx8IGV2ZW50LnR5cGUgPT09ICdrZXl1cCcpIHtcbiAgICAgIHJldHVybiBldmVudC5rZXlDb2RlO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljS2V5Ym9hcmRFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNVSUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNVSUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNLZXlib2FyZEV2ZW50LCBLZXlib2FyZEV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNLZXlib2FyZEV2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNNb3VzZUV2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY1VJRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1VJRXZlbnQnKTtcbnZhciBWaWV3cG9ydE1ldHJpY3MgPSByZXF1aXJlKCcuL1ZpZXdwb3J0TWV0cmljcycpO1xuXG52YXIgZ2V0RXZlbnRNb2RpZmllclN0YXRlID0gcmVxdWlyZSgnLi9nZXRFdmVudE1vZGlmaWVyU3RhdGUnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIE1vdXNlRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgTW91c2VFdmVudEludGVyZmFjZSA9IHtcbiAgc2NyZWVuWDogbnVsbCxcbiAgc2NyZWVuWTogbnVsbCxcbiAgY2xpZW50WDogbnVsbCxcbiAgY2xpZW50WTogbnVsbCxcbiAgY3RybEtleTogbnVsbCxcbiAgc2hpZnRLZXk6IG51bGwsXG4gIGFsdEtleTogbnVsbCxcbiAgbWV0YUtleTogbnVsbCxcbiAgZ2V0TW9kaWZpZXJTdGF0ZTogZ2V0RXZlbnRNb2RpZmllclN0YXRlLFxuICBidXR0b246IGZ1bmN0aW9uIChldmVudCkge1xuICAgIC8vIFdlYmtpdCwgRmlyZWZveCwgSUU5K1xuICAgIC8vIHdoaWNoOiAgMSAyIDNcbiAgICAvLyBidXR0b246IDAgMSAyIChzdGFuZGFyZClcbiAgICB2YXIgYnV0dG9uID0gZXZlbnQuYnV0dG9uO1xuICAgIGlmICgnd2hpY2gnIGluIGV2ZW50KSB7XG4gICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cbiAgICAvLyBJRTw5XG4gICAgLy8gd2hpY2g6ICB1bmRlZmluZWRcbiAgICAvLyBidXR0b246IDAgMCAwXG4gICAgLy8gYnV0dG9uOiAxIDQgMiAob25tb3VzZXVwKVxuICAgIHJldHVybiBidXR0b24gPT09IDIgPyAyIDogYnV0dG9uID09PSA0ID8gMSA6IDA7XG4gIH0sXG4gIGJ1dHRvbnM6IG51bGwsXG4gIHJlbGF0ZWRUYXJnZXQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiBldmVudC5yZWxhdGVkVGFyZ2V0IHx8IChldmVudC5mcm9tRWxlbWVudCA9PT0gZXZlbnQuc3JjRWxlbWVudCA/IGV2ZW50LnRvRWxlbWVudCA6IGV2ZW50LmZyb21FbGVtZW50KTtcbiAgfSxcbiAgLy8gXCJQcm9wcmlldGFyeVwiIEludGVyZmFjZS5cbiAgcGFnZVg6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiAncGFnZVgnIGluIGV2ZW50ID8gZXZlbnQucGFnZVggOiBldmVudC5jbGllbnRYICsgVmlld3BvcnRNZXRyaWNzLmN1cnJlbnRTY3JvbGxMZWZ0O1xuICB9LFxuICBwYWdlWTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuICdwYWdlWScgaW4gZXZlbnQgPyBldmVudC5wYWdlWSA6IGV2ZW50LmNsaWVudFkgKyBWaWV3cG9ydE1ldHJpY3MuY3VycmVudFNjcm9sbFRvcDtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljTW91c2VFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNVSUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNVSUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNNb3VzZUV2ZW50LCBNb3VzZUV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNNb3VzZUV2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNUb3VjaEV2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY1VJRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1VJRXZlbnQnKTtcblxudmFyIGdldEV2ZW50TW9kaWZpZXJTdGF0ZSA9IHJlcXVpcmUoJy4vZ2V0RXZlbnRNb2RpZmllclN0YXRlJyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBUb3VjaEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3RvdWNoLWV2ZW50cy9cbiAqL1xudmFyIFRvdWNoRXZlbnRJbnRlcmZhY2UgPSB7XG4gIHRvdWNoZXM6IG51bGwsXG4gIHRhcmdldFRvdWNoZXM6IG51bGwsXG4gIGNoYW5nZWRUb3VjaGVzOiBudWxsLFxuICBhbHRLZXk6IG51bGwsXG4gIG1ldGFLZXk6IG51bGwsXG4gIGN0cmxLZXk6IG51bGwsXG4gIHNoaWZ0S2V5OiBudWxsLFxuICBnZXRNb2RpZmllclN0YXRlOiBnZXRFdmVudE1vZGlmaWVyU3RhdGVcbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY1VJRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY1RvdWNoRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgU3ludGhldGljVUlFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljVUlFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljVG91Y2hFdmVudCwgVG91Y2hFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljVG91Y2hFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljVUlFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxudmFyIGdldEV2ZW50VGFyZ2V0ID0gcmVxdWlyZSgnLi9nZXRFdmVudFRhcmdldCcpO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgVUlFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvXG4gKi9cbnZhciBVSUV2ZW50SW50ZXJmYWNlID0ge1xuICB2aWV3OiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudmlldykge1xuICAgICAgcmV0dXJuIGV2ZW50LnZpZXc7XG4gICAgfVxuXG4gICAgdmFyIHRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGV2ZW50KTtcbiAgICBpZiAodGFyZ2V0ICE9IG51bGwgJiYgdGFyZ2V0LndpbmRvdyA9PT0gdGFyZ2V0KSB7XG4gICAgICAvLyB0YXJnZXQgaXMgYSB3aW5kb3cgb2JqZWN0XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cblxuICAgIHZhciBkb2MgPSB0YXJnZXQub3duZXJEb2N1bWVudDtcbiAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IHdoeSBgb3duZXJEb2N1bWVudGAgaXMgc29tZXRpbWVzIHVuZGVmaW5lZCBpbiBJRTguXG4gICAgaWYgKGRvYykge1xuICAgICAgcmV0dXJuIGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cbiAgfSxcbiAgZGV0YWlsOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQuZGV0YWlsIHx8IDA7XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY0V2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNVSUV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljVUlFdmVudCwgVUlFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljVUlFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljV2hlZWxFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNNb3VzZUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNNb3VzZUV2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBXaGVlbEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIFdoZWVsRXZlbnRJbnRlcmZhY2UgPSB7XG4gIGRlbHRhWDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuICdkZWx0YVgnIGluIGV2ZW50ID8gZXZlbnQuZGVsdGFYIDpcbiAgICAvLyBGYWxsYmFjayB0byBgd2hlZWxEZWx0YVhgIGZvciBXZWJraXQgYW5kIG5vcm1hbGl6ZSAocmlnaHQgaXMgcG9zaXRpdmUpLlxuICAgICd3aGVlbERlbHRhWCcgaW4gZXZlbnQgPyAtZXZlbnQud2hlZWxEZWx0YVggOiAwO1xuICB9LFxuICBkZWx0YVk6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiAnZGVsdGFZJyBpbiBldmVudCA/IGV2ZW50LmRlbHRhWSA6XG4gICAgLy8gRmFsbGJhY2sgdG8gYHdoZWVsRGVsdGFZYCBmb3IgV2Via2l0IGFuZCBub3JtYWxpemUgKGRvd24gaXMgcG9zaXRpdmUpLlxuICAgICd3aGVlbERlbHRhWScgaW4gZXZlbnQgPyAtZXZlbnQud2hlZWxEZWx0YVkgOlxuICAgIC8vIEZhbGxiYWNrIHRvIGB3aGVlbERlbHRhYCBmb3IgSUU8OSBhbmQgbm9ybWFsaXplIChkb3duIGlzIHBvc2l0aXZlKS5cbiAgICAnd2hlZWxEZWx0YScgaW4gZXZlbnQgPyAtZXZlbnQud2hlZWxEZWx0YSA6IDA7XG4gIH0sXG4gIGRlbHRhWjogbnVsbCxcblxuICAvLyBCcm93c2VycyB3aXRob3V0IFwiZGVsdGFNb2RlXCIgaXMgcmVwb3J0aW5nIGluIHJhdyB3aGVlbCBkZWx0YSB3aGVyZSBvbmVcbiAgLy8gbm90Y2ggb24gdGhlIHNjcm9sbCBpcyBhbHdheXMgKy8tIDEyMCwgcm91Z2hseSBlcXVpdmFsZW50IHRvIHBpeGVscy5cbiAgLy8gQSBnb29kIGFwcHJveGltYXRpb24gb2YgRE9NX0RFTFRBX0xJTkUgKDEpIGlzIDUlIG9mIHZpZXdwb3J0IHNpemUgb3JcbiAgLy8gfjQwIHBpeGVscywgZm9yIERPTV9ERUxUQV9TQ1JFRU4gKDIpIGl0IGlzIDg3LjUlIG9mIHZpZXdwb3J0IHNpemUuXG4gIGRlbHRhTW9kZTogbnVsbFxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljTW91c2VFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljV2hlZWxFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNNb3VzZUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNNb3VzZUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNXaGVlbEV2ZW50LCBXaGVlbEV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNXaGVlbEV2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBUcmFuc2FjdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIGBUcmFuc2FjdGlvbmAgY3JlYXRlcyBhIGJsYWNrIGJveCB0aGF0IGlzIGFibGUgdG8gd3JhcCBhbnkgbWV0aG9kIHN1Y2ggdGhhdFxuICogY2VydGFpbiBpbnZhcmlhbnRzIGFyZSBtYWludGFpbmVkIGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIG1ldGhvZCBpcyBpbnZva2VkXG4gKiAoRXZlbiBpZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIHdoaWxlIGludm9raW5nIHRoZSB3cmFwcGVkIG1ldGhvZCkuIFdob2V2ZXJcbiAqIGluc3RhbnRpYXRlcyBhIHRyYW5zYWN0aW9uIGNhbiBwcm92aWRlIGVuZm9yY2VycyBvZiB0aGUgaW52YXJpYW50cyBhdFxuICogY3JlYXRpb24gdGltZS4gVGhlIGBUcmFuc2FjdGlvbmAgY2xhc3MgaXRzZWxmIHdpbGwgc3VwcGx5IG9uZSBhZGRpdGlvbmFsXG4gKiBhdXRvbWF0aWMgaW52YXJpYW50IGZvciB5b3UgLSB0aGUgaW52YXJpYW50IHRoYXQgYW55IHRyYW5zYWN0aW9uIGluc3RhbmNlXG4gKiBzaG91bGQgbm90IGJlIHJ1biB3aGlsZSBpdCBpcyBhbHJlYWR5IGJlaW5nIHJ1bi4gWW91IHdvdWxkIHR5cGljYWxseSBjcmVhdGUgYVxuICogc2luZ2xlIGluc3RhbmNlIG9mIGEgYFRyYW5zYWN0aW9uYCBmb3IgcmV1c2UgbXVsdGlwbGUgdGltZXMsIHRoYXQgcG90ZW50aWFsbHlcbiAqIGlzIHVzZWQgdG8gd3JhcCBzZXZlcmFsIGRpZmZlcmVudCBtZXRob2RzLiBXcmFwcGVycyBhcmUgZXh0cmVtZWx5IHNpbXBsZSAtXG4gKiB0aGV5IG9ubHkgcmVxdWlyZSBpbXBsZW1lbnRpbmcgdHdvIG1ldGhvZHMuXG4gKlxuICogPHByZT5cbiAqICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVycyAoaW5qZWN0ZWQgYXQgY3JlYXRpb24gdGltZSlcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICAgICAgICArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLXwtLS0tLS0tLS0tLS0tLStcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICB2ICAgICAgICB8ICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgICAgICstLS0tLS0tLS0tLS0tLS0rICAgfCAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICArLS18ICAgIHdyYXBwZXIxICAgfC0tLXwtLS0tKyAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgfCAgKy0tLS0tLS0tLS0tLS0tLSsgICB2ICAgIHwgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICAgICAgICAgKy0tLS0tLS0tLS0tLS0rICB8ICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICB8ICAgICArLS0tLXwgICB3cmFwcGVyMiAgfC0tLS0tLS0tKyAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgfCAgICAgfCAgICArLS0tLS0tLS0tLS0tLSsgIHwgICAgIHwgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICAgIHwgICAgICAgICAgICAgICAgICAgICB8ICAgICB8ICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICB2ICAgICB2ICAgICAgICAgICAgICAgICAgICAgdiAgICAgdiAgIHwgd3JhcHBlclxuICogICAgICAgICAgICAgICAgICAgIHwgKy0tLSsgKy0tLSsgICArLS0tLS0tLS0tKyAgICstLS0rICstLS0rIHwgaW52YXJpYW50c1xuICogcGVyZm9ybShhbnlNZXRob2QpIHwgfCAgIHwgfCAgIHwgICB8ICAgICAgICAgfCAgIHwgICB8IHwgICB8IHwgbWFpbnRhaW5lZFxuICogKy0tLS0tLS0tLS0tLS0tLS0tPnwtfC0tLXwtfC0tLXwtLT58YW55TWV0aG9kfC0tLXwtLS18LXwtLS18LXwtLS0tLS0tLT5cbiAqICAgICAgICAgICAgICAgICAgICB8IHwgICB8IHwgICB8ICAgfCAgICAgICAgIHwgICB8ICAgfCB8ICAgfCB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCB8ICAgfCB8ICAgfCAgIHwgICAgICAgICB8ICAgfCAgIHwgfCAgIHwgfFxuICogICAgICAgICAgICAgICAgICAgIHwgfCAgIHwgfCAgIHwgICB8ICAgICAgICAgfCAgIHwgICB8IHwgICB8IHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICstLS0rICstLS0rICAgKy0tLS0tLS0tLSsgICArLS0tKyArLS0tKyB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgaW5pdGlhbGl6ZSAgICAgICAgICAgICAgICAgICAgY2xvc2UgICAgfFxuICogICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAqIDwvcHJlPlxuICpcbiAqIFVzZSBjYXNlczpcbiAqIC0gUHJlc2VydmluZyB0aGUgaW5wdXQgc2VsZWN0aW9uIHJhbmdlcyBiZWZvcmUvYWZ0ZXIgcmVjb25jaWxpYXRpb24uXG4gKiAgIFJlc3RvcmluZyBzZWxlY3Rpb24gZXZlbiBpbiB0aGUgZXZlbnQgb2YgYW4gdW5leHBlY3RlZCBlcnJvci5cbiAqIC0gRGVhY3RpdmF0aW5nIGV2ZW50cyB3aGlsZSByZWFycmFuZ2luZyB0aGUgRE9NLCBwcmV2ZW50aW5nIGJsdXJzL2ZvY3VzZXMsXG4gKiAgIHdoaWxlIGd1YXJhbnRlZWluZyB0aGF0IGFmdGVyd2FyZHMsIHRoZSBldmVudCBzeXN0ZW0gaXMgcmVhY3RpdmF0ZWQuXG4gKiAtIEZsdXNoaW5nIGEgcXVldWUgb2YgY29sbGVjdGVkIERPTSBtdXRhdGlvbnMgdG8gdGhlIG1haW4gVUkgdGhyZWFkIGFmdGVyIGFcbiAqICAgcmVjb25jaWxpYXRpb24gdGFrZXMgcGxhY2UgaW4gYSB3b3JrZXIgdGhyZWFkLlxuICogLSBJbnZva2luZyBhbnkgY29sbGVjdGVkIGBjb21wb25lbnREaWRVcGRhdGVgIGNhbGxiYWNrcyBhZnRlciByZW5kZXJpbmcgbmV3XG4gKiAgIGNvbnRlbnQuXG4gKiAtIChGdXR1cmUgdXNlIGNhc2UpOiBXcmFwcGluZyBwYXJ0aWN1bGFyIGZsdXNoZXMgb2YgdGhlIGBSZWFjdFdvcmtlcmAgcXVldWVcbiAqICAgdG8gcHJlc2VydmUgdGhlIGBzY3JvbGxUb3BgIChhbiBhdXRvbWF0aWMgc2Nyb2xsIGF3YXJlIERPTSkuXG4gKiAtIChGdXR1cmUgdXNlIGNhc2UpOiBMYXlvdXQgY2FsY3VsYXRpb25zIGJlZm9yZSBhbmQgYWZ0ZXIgRE9NIHVwZGF0ZXMuXG4gKlxuICogVHJhbnNhY3Rpb25hbCBwbHVnaW4gQVBJOlxuICogLSBBIG1vZHVsZSB0aGF0IGhhcyBhbiBgaW5pdGlhbGl6ZWAgbWV0aG9kIHRoYXQgcmV0dXJucyBhbnkgcHJlY29tcHV0YXRpb24uXG4gKiAtIGFuZCBhIGBjbG9zZWAgbWV0aG9kIHRoYXQgYWNjZXB0cyB0aGUgcHJlY29tcHV0YXRpb24uIGBjbG9zZWAgaXMgaW52b2tlZFxuICogICB3aGVuIHRoZSB3cmFwcGVkIHByb2Nlc3MgaXMgY29tcGxldGVkLCBvciBoYXMgZmFpbGVkLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8VHJhbnNhY3Rpb25hbFdyYXBwZXI+fSB0cmFuc2FjdGlvbldyYXBwZXIgV3JhcHBlciBtb2R1bGVzXG4gKiB0aGF0IGltcGxlbWVudCBgaW5pdGlhbGl6ZWAgYW5kIGBjbG9zZWAuXG4gKiBAcmV0dXJuIHtUcmFuc2FjdGlvbn0gU2luZ2xlIHRyYW5zYWN0aW9uIGZvciByZXVzZSBpbiB0aHJlYWQuXG4gKlxuICogQGNsYXNzIFRyYW5zYWN0aW9uXG4gKi9cbnZhciBNaXhpbiA9IHtcbiAgLyoqXG4gICAqIFNldHMgdXAgdGhpcyBpbnN0YW5jZSBzbyB0aGF0IGl0IGlzIHByZXBhcmVkIGZvciBjb2xsZWN0aW5nIG1ldHJpY3MuIERvZXNcbiAgICogc28gc3VjaCB0aGF0IHRoaXMgc2V0dXAgbWV0aG9kIG1heSBiZSB1c2VkIG9uIGFuIGluc3RhbmNlIHRoYXQgaXMgYWxyZWFkeVxuICAgKiBpbml0aWFsaXplZCwgaW4gYSB3YXkgdGhhdCBkb2VzIG5vdCBjb25zdW1lIGFkZGl0aW9uYWwgbWVtb3J5IHVwb24gcmV1c2UuXG4gICAqIFRoYXQgY2FuIGJlIHVzZWZ1bCBpZiB5b3UgZGVjaWRlIHRvIG1ha2UgeW91ciBzdWJjbGFzcyBvZiB0aGlzIG1peGluIGFcbiAgICogXCJQb29sZWRDbGFzc1wiLlxuICAgKi9cbiAgcmVpbml0aWFsaXplVHJhbnNhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnRyYW5zYWN0aW9uV3JhcHBlcnMgPSB0aGlzLmdldFRyYW5zYWN0aW9uV3JhcHBlcnMoKTtcbiAgICBpZiAodGhpcy53cmFwcGVySW5pdERhdGEpIHtcbiAgICAgIHRoaXMud3JhcHBlckluaXREYXRhLmxlbmd0aCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud3JhcHBlckluaXREYXRhID0gW107XG4gICAgfVxuICAgIHRoaXMuX2lzSW5UcmFuc2FjdGlvbiA9IGZhbHNlO1xuICB9LFxuXG4gIF9pc0luVHJhbnNhY3Rpb246IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7QXJyYXk8VHJhbnNhY3Rpb25XcmFwcGVyPn0gQXJyYXkgb2YgdHJhbnNhY3Rpb24gd3JhcHBlcnMuXG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBudWxsLFxuXG4gIGlzSW5UcmFuc2FjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAhIXRoaXMuX2lzSW5UcmFuc2FjdGlvbjtcbiAgfSxcblxuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIGZ1bmN0aW9uIHdpdGhpbiBhIHNhZmV0eSB3aW5kb3cuIFVzZSB0aGlzIGZvciB0aGUgdG9wIGxldmVsXG4gICAqIG1ldGhvZHMgdGhhdCByZXN1bHQgaW4gbGFyZ2UgYW1vdW50cyBvZiBjb21wdXRhdGlvbi9tdXRhdGlvbnMgdGhhdCB3b3VsZFxuICAgKiBuZWVkIHRvIGJlIHNhZmV0eSBjaGVja2VkLiBUaGUgb3B0aW9uYWwgYXJndW1lbnRzIGhlbHBzIHByZXZlbnQgdGhlIG5lZWRcbiAgICogdG8gYmluZCBpbiBtYW55IGNhc2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtZXRob2QgTWVtYmVyIG9mIHNjb3BlIHRvIGNhbGwuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZSBTY29wZSB0byBpbnZva2UgZnJvbS5cbiAgICogQHBhcmFtIHtPYmplY3Q/PX0gYSBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG4gICAqIEBwYXJhbSB7T2JqZWN0Pz19IGIgQXJndW1lbnQgdG8gcGFzcyB0byB0aGUgbWV0aG9kLlxuICAgKiBAcGFyYW0ge09iamVjdD89fSBjIEFyZ3VtZW50IHRvIHBhc3MgdG8gdGhlIG1ldGhvZC5cbiAgICogQHBhcmFtIHtPYmplY3Q/PX0gZCBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG4gICAqIEBwYXJhbSB7T2JqZWN0Pz19IGUgQXJndW1lbnQgdG8gcGFzcyB0byB0aGUgbWV0aG9kLlxuICAgKiBAcGFyYW0ge09iamVjdD89fSBmIEFyZ3VtZW50IHRvIHBhc3MgdG8gdGhlIG1ldGhvZC5cbiAgICpcbiAgICogQHJldHVybiB7Kn0gUmV0dXJuIHZhbHVlIGZyb20gYG1ldGhvZGAuXG4gICAqL1xuICBwZXJmb3JtOiBmdW5jdGlvbiAobWV0aG9kLCBzY29wZSwgYSwgYiwgYywgZCwgZSwgZikge1xuICAgICEhdGhpcy5pc0luVHJhbnNhY3Rpb24oKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUcmFuc2FjdGlvbi5wZXJmb3JtKC4uLik6IENhbm5vdCBpbml0aWFsaXplIGEgdHJhbnNhY3Rpb24gd2hlbiB0aGVyZSAnICsgJ2lzIGFscmVhZHkgYW4gb3V0c3RhbmRpbmcgdHJhbnNhY3Rpb24uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHZhciBlcnJvclRocm93bjtcbiAgICB2YXIgcmV0O1xuICAgIHRyeSB7XG4gICAgICB0aGlzLl9pc0luVHJhbnNhY3Rpb24gPSB0cnVlO1xuICAgICAgLy8gQ2F0Y2hpbmcgZXJyb3JzIG1ha2VzIGRlYnVnZ2luZyBtb3JlIGRpZmZpY3VsdCwgc28gd2Ugc3RhcnQgd2l0aFxuICAgICAgLy8gZXJyb3JUaHJvd24gc2V0IHRvIHRydWUgYmVmb3JlIHNldHRpbmcgaXQgdG8gZmFsc2UgYWZ0ZXIgY2FsbGluZ1xuICAgICAgLy8gY2xvc2UgLS0gaWYgaXQncyBzdGlsbCBzZXQgdG8gdHJ1ZSBpbiB0aGUgZmluYWxseSBibG9jaywgaXQgbWVhbnNcbiAgICAgIC8vIG9uZSBvZiB0aGVzZSBjYWxscyB0aHJldy5cbiAgICAgIGVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZUFsbCgwKTtcbiAgICAgIHJldCA9IG1ldGhvZC5jYWxsKHNjb3BlLCBhLCBiLCBjLCBkLCBlLCBmKTtcbiAgICAgIGVycm9yVGhyb3duID0gZmFsc2U7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChlcnJvclRocm93bikge1xuICAgICAgICAgIC8vIElmIGBtZXRob2RgIHRocm93cywgcHJlZmVyIHRvIHNob3cgdGhhdCBzdGFjayB0cmFjZSBvdmVyIGFueSB0aHJvd25cbiAgICAgICAgICAvLyBieSBpbnZva2luZyBgY2xvc2VBbGxgLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlQWxsKDApO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge31cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTaW5jZSBgbWV0aG9kYCBkaWRuJ3QgdGhyb3csIHdlIGRvbid0IHdhbnQgdG8gc2lsZW5jZSB0aGUgZXhjZXB0aW9uXG4gICAgICAgICAgLy8gaGVyZS5cbiAgICAgICAgICB0aGlzLmNsb3NlQWxsKDApO1xuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0aGlzLl9pc0luVHJhbnNhY3Rpb24gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfSxcblxuICBpbml0aWFsaXplQWxsOiBmdW5jdGlvbiAoc3RhcnRJbmRleCkge1xuICAgIHZhciB0cmFuc2FjdGlvbldyYXBwZXJzID0gdGhpcy50cmFuc2FjdGlvbldyYXBwZXJzO1xuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgdHJhbnNhY3Rpb25XcmFwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHdyYXBwZXIgPSB0cmFuc2FjdGlvbldyYXBwZXJzW2ldO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ2F0Y2hpbmcgZXJyb3JzIG1ha2VzIGRlYnVnZ2luZyBtb3JlIGRpZmZpY3VsdCwgc28gd2Ugc3RhcnQgd2l0aCB0aGVcbiAgICAgICAgLy8gT0JTRVJWRURfRVJST1Igc3RhdGUgYmVmb3JlIG92ZXJ3cml0aW5nIGl0IHdpdGggdGhlIHJlYWwgcmV0dXJuIHZhbHVlXG4gICAgICAgIC8vIG9mIGluaXRpYWxpemUgLS0gaWYgaXQncyBzdGlsbCBzZXQgdG8gT0JTRVJWRURfRVJST1IgaW4gdGhlIGZpbmFsbHlcbiAgICAgICAgLy8gYmxvY2ssIGl0IG1lYW5zIHdyYXBwZXIuaW5pdGlhbGl6ZSB0aHJldy5cbiAgICAgICAgdGhpcy53cmFwcGVySW5pdERhdGFbaV0gPSBUcmFuc2FjdGlvbi5PQlNFUlZFRF9FUlJPUjtcbiAgICAgICAgdGhpcy53cmFwcGVySW5pdERhdGFbaV0gPSB3cmFwcGVyLmluaXRpYWxpemUgPyB3cmFwcGVyLmluaXRpYWxpemUuY2FsbCh0aGlzKSA6IG51bGw7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAodGhpcy53cmFwcGVySW5pdERhdGFbaV0gPT09IFRyYW5zYWN0aW9uLk9CU0VSVkVEX0VSUk9SKSB7XG4gICAgICAgICAgLy8gVGhlIGluaXRpYWxpemVyIGZvciB3cmFwcGVyIGkgdGhyZXcgYW4gZXJyb3I7IGluaXRpYWxpemUgdGhlXG4gICAgICAgICAgLy8gcmVtYWluaW5nIHdyYXBwZXJzIGJ1dCBzaWxlbmNlIGFueSBleGNlcHRpb25zIGZyb20gdGhlbSB0byBlbnN1cmVcbiAgICAgICAgICAvLyB0aGF0IHRoZSBmaXJzdCBlcnJvciBpcyB0aGUgb25lIHRvIGJ1YmJsZSB1cC5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQWxsKGkgKyAxKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHt9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEludm9rZXMgZWFjaCBvZiBgdGhpcy50cmFuc2FjdGlvbldyYXBwZXJzLmNsb3NlW2ldYCBmdW5jdGlvbnMsIHBhc3NpbmcgaW50b1xuICAgKiB0aGVtIHRoZSByZXNwZWN0aXZlIHJldHVybiB2YWx1ZXMgb2YgYHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycy5pbml0W2ldYFxuICAgKiAoYGNsb3NlYHJzIHRoYXQgY29ycmVzcG9uZCB0byBpbml0aWFsaXplcnMgdGhhdCBmYWlsZWQgd2lsbCBub3QgYmVcbiAgICogaW52b2tlZCkuXG4gICAqL1xuICBjbG9zZUFsbDogZnVuY3Rpb24gKHN0YXJ0SW5kZXgpIHtcbiAgICAhdGhpcy5pc0luVHJhbnNhY3Rpb24oKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUcmFuc2FjdGlvbi5jbG9zZUFsbCgpOiBDYW5ub3QgY2xvc2UgdHJhbnNhY3Rpb24gd2hlbiBub25lIGFyZSBvcGVuLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgdHJhbnNhY3Rpb25XcmFwcGVycyA9IHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycztcbiAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSA8IHRyYW5zYWN0aW9uV3JhcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB3cmFwcGVyID0gdHJhbnNhY3Rpb25XcmFwcGVyc1tpXTtcbiAgICAgIHZhciBpbml0RGF0YSA9IHRoaXMud3JhcHBlckluaXREYXRhW2ldO1xuICAgICAgdmFyIGVycm9yVGhyb3duO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ2F0Y2hpbmcgZXJyb3JzIG1ha2VzIGRlYnVnZ2luZyBtb3JlIGRpZmZpY3VsdCwgc28gd2Ugc3RhcnQgd2l0aFxuICAgICAgICAvLyBlcnJvclRocm93biBzZXQgdG8gdHJ1ZSBiZWZvcmUgc2V0dGluZyBpdCB0byBmYWxzZSBhZnRlciBjYWxsaW5nXG4gICAgICAgIC8vIGNsb3NlIC0tIGlmIGl0J3Mgc3RpbGwgc2V0IHRvIHRydWUgaW4gdGhlIGZpbmFsbHkgYmxvY2ssIGl0IG1lYW5zXG4gICAgICAgIC8vIHdyYXBwZXIuY2xvc2UgdGhyZXcuXG4gICAgICAgIGVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgaWYgKGluaXREYXRhICE9PSBUcmFuc2FjdGlvbi5PQlNFUlZFRF9FUlJPUiAmJiB3cmFwcGVyLmNsb3NlKSB7XG4gICAgICAgICAgd3JhcHBlci5jbG9zZS5jYWxsKHRoaXMsIGluaXREYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgLy8gVGhlIGNsb3NlciBmb3Igd3JhcHBlciBpIHRocmV3IGFuIGVycm9yOyBjbG9zZSB0aGUgcmVtYWluaW5nXG4gICAgICAgICAgLy8gd3JhcHBlcnMgYnV0IHNpbGVuY2UgYW55IGV4Y2VwdGlvbnMgZnJvbSB0aGVtIHRvIGVuc3VyZSB0aGF0IHRoZVxuICAgICAgICAgIC8vIGZpcnN0IGVycm9yIGlzIHRoZSBvbmUgdG8gYnViYmxlIHVwLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlQWxsKGkgKyAxKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMud3JhcHBlckluaXREYXRhLmxlbmd0aCA9IDA7XG4gIH1cbn07XG5cbnZhciBUcmFuc2FjdGlvbiA9IHtcblxuICBNaXhpbjogTWl4aW4sXG5cbiAgLyoqXG4gICAqIFRva2VuIHRvIGxvb2sgZm9yIHRvIGRldGVybWluZSBpZiBhbiBlcnJvciBvY2N1cnJlZC5cbiAgICovXG4gIE9CU0VSVkVEX0VSUk9SOiB7fVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYW5zYWN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBWaWV3cG9ydE1ldHJpY3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBWaWV3cG9ydE1ldHJpY3MgPSB7XG5cbiAgY3VycmVudFNjcm9sbExlZnQ6IDAsXG5cbiAgY3VycmVudFNjcm9sbFRvcDogMCxcblxuICByZWZyZXNoU2Nyb2xsVmFsdWVzOiBmdW5jdGlvbiAoc2Nyb2xsUG9zaXRpb24pIHtcbiAgICBWaWV3cG9ydE1ldHJpY3MuY3VycmVudFNjcm9sbExlZnQgPSBzY3JvbGxQb3NpdGlvbi54O1xuICAgIFZpZXdwb3J0TWV0cmljcy5jdXJyZW50U2Nyb2xsVG9wID0gc2Nyb2xsUG9zaXRpb24ueTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZpZXdwb3J0TWV0cmljczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgYWNjdW11bGF0ZUludG9cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKlxuICogQWNjdW11bGF0ZXMgaXRlbXMgdGhhdCBtdXN0IG5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCBpbnRvIHRoZSBmaXJzdCBvbmUuIFRoaXNcbiAqIGlzIHVzZWQgdG8gY29uc2VydmUgbWVtb3J5IGJ5IGF2b2lkaW5nIGFycmF5IGFsbG9jYXRpb25zLCBhbmQgdGh1cyBzYWNyaWZpY2VzXG4gKiBBUEkgY2xlYW5uZXNzLiBTaW5jZSBgY3VycmVudGAgY2FuIGJlIG51bGwgYmVmb3JlIGJlaW5nIHBhc3NlZCBpbiBhbmQgbm90XG4gKiBudWxsIGFmdGVyIHRoaXMgZnVuY3Rpb24sIG1ha2Ugc3VyZSB0byBhc3NpZ24gaXQgYmFjayB0byBgY3VycmVudGA6XG4gKlxuICogYGEgPSBhY2N1bXVsYXRlSW50byhhLCBiKTtgXG4gKlxuICogVGhpcyBBUEkgc2hvdWxkIGJlIHNwYXJpbmdseSB1c2VkLiBUcnkgYGFjY3VtdWxhdGVgIGZvciBzb21ldGhpbmcgY2xlYW5lci5cbiAqXG4gKiBAcmV0dXJuIHsqfGFycmF5PCo+fSBBbiBhY2N1bXVsYXRpb24gb2YgaXRlbXMuXG4gKi9cblxuZnVuY3Rpb24gYWNjdW11bGF0ZUludG8oY3VycmVudCwgbmV4dCkge1xuICAhKG5leHQgIT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnYWNjdW11bGF0ZUludG8oLi4uKTogQWNjdW11bGF0ZWQgaXRlbXMgbXVzdCBub3QgYmUgbnVsbCBvciB1bmRlZmluZWQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG5leHQ7XG4gIH1cblxuICAvLyBCb3RoIGFyZSBub3QgZW1wdHkuIFdhcm5pbmc6IE5ldmVyIGNhbGwgeC5jb25jYXQoeSkgd2hlbiB5b3UgYXJlIG5vdFxuICAvLyBjZXJ0YWluIHRoYXQgeCBpcyBhbiBBcnJheSAoeCBjb3VsZCBiZSBhIHN0cmluZyB3aXRoIGNvbmNhdCBtZXRob2QpLlxuICB2YXIgY3VycmVudElzQXJyYXkgPSBBcnJheS5pc0FycmF5KGN1cnJlbnQpO1xuICB2YXIgbmV4dElzQXJyYXkgPSBBcnJheS5pc0FycmF5KG5leHQpO1xuXG4gIGlmIChjdXJyZW50SXNBcnJheSAmJiBuZXh0SXNBcnJheSkge1xuICAgIGN1cnJlbnQucHVzaC5hcHBseShjdXJyZW50LCBuZXh0KTtcbiAgICByZXR1cm4gY3VycmVudDtcbiAgfVxuXG4gIGlmIChjdXJyZW50SXNBcnJheSkge1xuICAgIGN1cnJlbnQucHVzaChuZXh0KTtcbiAgICByZXR1cm4gY3VycmVudDtcbiAgfVxuXG4gIGlmIChuZXh0SXNBcnJheSkge1xuICAgIC8vIEEgYml0IHRvbyBkYW5nZXJvdXMgdG8gbXV0YXRlIGBuZXh0YC5cbiAgICByZXR1cm4gW2N1cnJlbnRdLmNvbmNhdChuZXh0KTtcbiAgfVxuXG4gIHJldHVybiBbY3VycmVudCwgbmV4dF07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYWNjdW11bGF0ZUludG87IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGFkbGVyMzJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBNT0QgPSA2NTUyMTtcblxuLy8gYWRsZXIzMiBpcyBub3QgY3J5cHRvZ3JhcGhpY2FsbHkgc3Ryb25nLCBhbmQgaXMgb25seSB1c2VkIHRvIHNhbml0eSBjaGVjayB0aGF0XG4vLyBtYXJrdXAgZ2VuZXJhdGVkIG9uIHRoZSBzZXJ2ZXIgbWF0Y2hlcyB0aGUgbWFya3VwIGdlbmVyYXRlZCBvbiB0aGUgY2xpZW50LlxuLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiAoYSBtb2RpZmllZCB2ZXJzaW9uIG9mIHRoZSBTaGVldEpTIHZlcnNpb24pIGhhcyBiZWVuIG9wdGltaXplZFxuLy8gZm9yIG91ciB1c2UgY2FzZSwgYXQgdGhlIGV4cGVuc2Ugb2YgY29uZm9ybWluZyB0byB0aGUgYWRsZXIzMiBzcGVjaWZpY2F0aW9uXG4vLyBmb3Igbm9uLWFzY2lpIGlucHV0cy5cbmZ1bmN0aW9uIGFkbGVyMzIoZGF0YSkge1xuICB2YXIgYSA9IDE7XG4gIHZhciBiID0gMDtcbiAgdmFyIGkgPSAwO1xuICB2YXIgbCA9IGRhdGEubGVuZ3RoO1xuICB2YXIgbSA9IGwgJiB+MHgzO1xuICB3aGlsZSAoaSA8IG0pIHtcbiAgICBmb3IgKDsgaSA8IE1hdGgubWluKGkgKyA0MDk2LCBtKTsgaSArPSA0KSB7XG4gICAgICBiICs9IChhICs9IGRhdGEuY2hhckNvZGVBdChpKSkgKyAoYSArPSBkYXRhLmNoYXJDb2RlQXQoaSArIDEpKSArIChhICs9IGRhdGEuY2hhckNvZGVBdChpICsgMikpICsgKGEgKz0gZGF0YS5jaGFyQ29kZUF0KGkgKyAzKSk7XG4gICAgfVxuICAgIGEgJT0gTU9EO1xuICAgIGIgJT0gTU9EO1xuICB9XG4gIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgYiArPSBhICs9IGRhdGEuY2hhckNvZGVBdChpKTtcbiAgfVxuICBhICU9IE1PRDtcbiAgYiAlPSBNT0Q7XG4gIHJldHVybiBhIHwgYiA8PCAxNjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhZGxlcjMyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBjYW5EZWZpbmVQcm9wZXJ0eVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGNhbkRlZmluZVByb3BlcnR5ID0gZmFsc2U7XG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICB0cnkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3gnLCB7IGdldDogZnVuY3Rpb24gKCkge30gfSk7XG4gICAgY2FuRGVmaW5lUHJvcGVydHkgPSB0cnVlO1xuICB9IGNhdGNoICh4KSB7XG4gICAgLy8gSUUgd2lsbCBmYWlsIG9uIGRlZmluZVByb3BlcnR5XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjYW5EZWZpbmVQcm9wZXJ0eTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZGFuZ2Vyb3VzU3R5bGVWYWx1ZVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBDU1NQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vQ1NTUHJvcGVydHknKTtcblxudmFyIGlzVW5pdGxlc3NOdW1iZXIgPSBDU1NQcm9wZXJ0eS5pc1VuaXRsZXNzTnVtYmVyO1xuXG4vKipcbiAqIENvbnZlcnQgYSB2YWx1ZSBpbnRvIHRoZSBwcm9wZXIgY3NzIHdyaXRhYmxlIHZhbHVlLiBUaGUgc3R5bGUgbmFtZSBgbmFtZWBcbiAqIHNob3VsZCBiZSBsb2dpY2FsIChubyBoeXBoZW5zKSwgYXMgc3BlY2lmaWVkXG4gKiBpbiBgQ1NTUHJvcGVydHkuaXNVbml0bGVzc051bWJlcmAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQ1NTIHByb3BlcnR5IG5hbWUgc3VjaCBhcyBgdG9wTWFyZ2luYC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgQ1NTIHByb3BlcnR5IHZhbHVlIHN1Y2ggYXMgYDEwcHhgLlxuICogQHJldHVybiB7c3RyaW5nfSBOb3JtYWxpemVkIHN0eWxlIHZhbHVlIHdpdGggZGltZW5zaW9ucyBhcHBsaWVkLlxuICovXG5mdW5jdGlvbiBkYW5nZXJvdXNTdHlsZVZhbHVlKG5hbWUsIHZhbHVlKSB7XG4gIC8vIE5vdGUgdGhhdCB3ZSd2ZSByZW1vdmVkIGVzY2FwZVRleHRGb3JCcm93c2VyKCkgY2FsbHMgaGVyZSBzaW5jZSB0aGVcbiAgLy8gd2hvbGUgc3RyaW5nIHdpbGwgYmUgZXNjYXBlZCB3aGVuIHRoZSBhdHRyaWJ1dGUgaXMgaW5qZWN0ZWQgaW50b1xuICAvLyB0aGUgbWFya3VwLiBJZiB5b3UgcHJvdmlkZSB1bnNhZmUgdXNlciBkYXRhIGhlcmUgdGhleSBjYW4gaW5qZWN0XG4gIC8vIGFyYml0cmFyeSBDU1Mgd2hpY2ggbWF5IGJlIHByb2JsZW1hdGljIChJIGNvdWxkbid0IHJlcHJvIHRoaXMpOlxuICAvLyBodHRwczovL3d3dy5vd2FzcC5vcmcvaW5kZXgucGhwL1hTU19GaWx0ZXJfRXZhc2lvbl9DaGVhdF9TaGVldFxuICAvLyBodHRwOi8vd3d3LnRoZXNwYW5uZXIuY28udWsvMjAwNy8xMS8yNi91bHRpbWF0ZS14c3MtY3NzLWluamVjdGlvbi9cbiAgLy8gVGhpcyBpcyBub3QgYW4gWFNTIGhvbGUgYnV0IGluc3RlYWQgYSBwb3RlbnRpYWwgQ1NTIGluamVjdGlvbiBpc3N1ZVxuICAvLyB3aGljaCBoYXMgbGVhZCB0byBhIGdyZWF0ZXIgZGlzY3Vzc2lvbiBhYm91dCBob3cgd2UncmUgZ29pbmcgdG9cbiAgLy8gdHJ1c3QgVVJMcyBtb3ZpbmcgZm9yd2FyZC4gU2VlICMyMTE1OTAxXG5cbiAgdmFyIGlzRW1wdHkgPSB2YWx1ZSA9PSBudWxsIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nIHx8IHZhbHVlID09PSAnJztcbiAgaWYgKGlzRW1wdHkpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICB2YXIgaXNOb25OdW1lcmljID0gaXNOYU4odmFsdWUpO1xuICBpZiAoaXNOb25OdW1lcmljIHx8IHZhbHVlID09PSAwIHx8IGlzVW5pdGxlc3NOdW1iZXIuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgaXNVbml0bGVzc051bWJlcltuYW1lXSkge1xuICAgIHJldHVybiAnJyArIHZhbHVlOyAvLyBjYXN0IHRvIHN0cmluZ1xuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgfVxuICByZXR1cm4gdmFsdWUgKyAncHgnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRhbmdlcm91c1N0eWxlVmFsdWU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGRlcHJlY2F0ZWRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG4vKipcbiAqIFRoaXMgd2lsbCBsb2cgYSBzaW5nbGUgZGVwcmVjYXRpb24gbm90aWNlIHBlciBmdW5jdGlvbiBhbmQgZm9yd2FyZCB0aGUgY2FsbFxuICogb24gdG8gdGhlIG5ldyBBUEkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGZuTmFtZSBUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBuZXdNb2R1bGUgVGhlIG1vZHVsZSB0aGF0IGZuIHdpbGwgZXhpc3QgaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuZXdQYWNrYWdlIFRoZSBtb2R1bGUgdGhhdCBmbiB3aWxsIGV4aXN0IGluXG4gKiBAcGFyYW0geyp9IGN0eCBUaGUgY29udGV4dCB0aGlzIGZvcndhcmRlZCBjYWxsIHNob3VsZCBydW4gaW5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBmb3J3YXJkIG9uIHRvXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCB3YXJuIG9uY2UgYW5kIHRoZW4gY2FsbCBmblxuICovXG5mdW5jdGlvbiBkZXByZWNhdGVkKGZuTmFtZSwgbmV3TW9kdWxlLCBuZXdQYWNrYWdlLCBjdHgsIGZuKSB7XG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YXIgbmV3Rm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh3YXJuZWQsXG4gICAgICAvLyBSZXF1aXJlIGV4YW1wbGVzIGluIHRoaXMgc3RyaW5nIG11c3QgYmUgc3BsaXQgdG8gcHJldmVudCBSZWFjdCdzXG4gICAgICAvLyBidWlsZCB0b29scyBmcm9tIG1pc3Rha2luZyB0aGVtIGZvciByZWFsIHJlcXVpcmVzLlxuICAgICAgLy8gT3RoZXJ3aXNlIHRoZSBidWlsZCB0b29scyB3aWxsIGF0dGVtcHQgdG8gYnVpbGQgYSAnJXMnIG1vZHVsZS5cbiAgICAgICdSZWFjdC4lcyBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICVzLiVzIGZyb20gcmVxdWlyZScgKyAnKFxcJyVzXFwnKSAnICsgJ2luc3RlYWQuJywgZm5OYW1lLCBuZXdNb2R1bGUsIGZuTmFtZSwgbmV3UGFja2FnZSkgOiB1bmRlZmluZWQ7XG4gICAgICB3YXJuZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKTtcbiAgICB9O1xuICAgIC8vIFdlIG5lZWQgdG8gbWFrZSBzdXJlIGFsbCBwcm9wZXJ0aWVzIG9mIHRoZSBvcmlnaW5hbCBmbiBhcmUgY29waWVkIG92ZXIuXG4gICAgLy8gSW4gcGFydGljdWxhciwgdGhpcyBpcyBuZWVkZWQgdG8gc3VwcG9ydCBQcm9wVHlwZXNcbiAgICByZXR1cm4gYXNzaWduKG5ld0ZuLCBmbik7XG4gIH1cblxuICByZXR1cm4gZm47XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVwcmVjYXRlZDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRVNDQVBFX0xPT0tVUCA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJzwnOiAnJmx0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICAnXFwnJzogJyYjeDI3Oydcbn07XG5cbnZhciBFU0NBUEVfUkVHRVggPSAvWyY+PFwiJ10vZztcblxuZnVuY3Rpb24gZXNjYXBlcihtYXRjaCkge1xuICByZXR1cm4gRVNDQVBFX0xPT0tVUFttYXRjaF07XG59XG5cbi8qKlxuICogRXNjYXBlcyB0ZXh0IHRvIHByZXZlbnQgc2NyaXB0aW5nIGF0dGFja3MuXG4gKlxuICogQHBhcmFtIHsqfSB0ZXh0IFRleHQgdmFsdWUgdG8gZXNjYXBlLlxuICogQHJldHVybiB7c3RyaW5nfSBBbiBlc2NhcGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKHRleHQpIHtcbiAgcmV0dXJuICgnJyArIHRleHQpLnJlcGxhY2UoRVNDQVBFX1JFR0VYLCBlc2NhcGVyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGZpbmRET01Ob2RlXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0SW5zdGFuY2VNYXAgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VNYXAnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIERPTSBub2RlIHJlbmRlcmVkIGJ5IHRoaXMgZWxlbWVudC5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fERPTUVsZW1lbnR9IGNvbXBvbmVudE9yRWxlbWVudFxuICogQHJldHVybiB7P0RPTUVsZW1lbnR9IFRoZSByb290IG5vZGUgb2YgdGhpcyBlbGVtZW50LlxuICovXG5mdW5jdGlvbiBmaW5kRE9NTm9kZShjb21wb25lbnRPckVsZW1lbnQpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YXIgb3duZXIgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50O1xuICAgIGlmIChvd25lciAhPT0gbnVsbCkge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcob3duZXIuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyLCAnJXMgaXMgYWNjZXNzaW5nIGdldERPTU5vZGUgb3IgZmluZERPTU5vZGUgaW5zaWRlIGl0cyByZW5kZXIoKS4gJyArICdyZW5kZXIoKSBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uIG9mIHByb3BzIGFuZCBzdGF0ZS4gSXQgc2hvdWxkICcgKyAnbmV2ZXIgYWNjZXNzIHNvbWV0aGluZyB0aGF0IHJlcXVpcmVzIHN0YWxlIGRhdGEgZnJvbSB0aGUgcHJldmlvdXMgJyArICdyZW5kZXIsIHN1Y2ggYXMgcmVmcy4gTW92ZSB0aGlzIGxvZ2ljIHRvIGNvbXBvbmVudERpZE1vdW50IGFuZCAnICsgJ2NvbXBvbmVudERpZFVwZGF0ZSBpbnN0ZWFkLicsIG93bmVyLmdldE5hbWUoKSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIG93bmVyLl93YXJuZWRBYm91dFJlZnNJblJlbmRlciA9IHRydWU7XG4gICAgfVxuICB9XG4gIGlmIChjb21wb25lbnRPckVsZW1lbnQgPT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChjb21wb25lbnRPckVsZW1lbnQubm9kZVR5cGUgPT09IDEpIHtcbiAgICByZXR1cm4gY29tcG9uZW50T3JFbGVtZW50O1xuICB9XG4gIGlmIChSZWFjdEluc3RhbmNlTWFwLmhhcyhjb21wb25lbnRPckVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIFJlYWN0TW91bnQuZ2V0Tm9kZUZyb21JbnN0YW5jZShjb21wb25lbnRPckVsZW1lbnQpO1xuICB9XG4gICEoY29tcG9uZW50T3JFbGVtZW50LnJlbmRlciA9PSBudWxsIHx8IHR5cGVvZiBjb21wb25lbnRPckVsZW1lbnQucmVuZGVyICE9PSAnZnVuY3Rpb24nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdmaW5kRE9NTm9kZSB3YXMgY2FsbGVkIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAhZmFsc2UgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRWxlbWVudCBhcHBlYXJzIHRvIGJlIG5laXRoZXIgUmVhY3RDb21wb25lbnQgbm9yIERPTU5vZGUgKGtleXM6ICVzKScsIE9iamVjdC5rZXlzKGNvbXBvbmVudE9yRWxlbWVudCkpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmaW5kRE9NTm9kZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZmxhdHRlbkNoaWxkcmVuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdHJhdmVyc2VBbGxDaGlsZHJlbiA9IHJlcXVpcmUoJy4vdHJhdmVyc2VBbGxDaGlsZHJlbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHJhdmVyc2VDb250ZXh0IENvbnRleHQgcGFzc2VkIHRocm91Z2ggdHJhdmVyc2FsLlxuICogQHBhcmFtIHs/UmVhY3RDb21wb25lbnR9IGNoaWxkIFJlYWN0IGNoaWxkIGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7IXN0cmluZ30gbmFtZSBTdHJpbmcgbmFtZSBvZiBrZXkgcGF0aCB0byBjaGlsZC5cbiAqL1xuZnVuY3Rpb24gZmxhdHRlblNpbmdsZUNoaWxkSW50b0NvbnRleHQodHJhdmVyc2VDb250ZXh0LCBjaGlsZCwgbmFtZSkge1xuICAvLyBXZSBmb3VuZCBhIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAgdmFyIHJlc3VsdCA9IHRyYXZlcnNlQ29udGV4dDtcbiAgdmFyIGtleVVuaXF1ZSA9IHJlc3VsdFtuYW1lXSA9PT0gdW5kZWZpbmVkO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGtleVVuaXF1ZSwgJ2ZsYXR0ZW5DaGlsZHJlbiguLi4pOiBFbmNvdW50ZXJlZCB0d28gY2hpbGRyZW4gd2l0aCB0aGUgc2FtZSBrZXksICcgKyAnYCVzYC4gQ2hpbGQga2V5cyBtdXN0IGJlIHVuaXF1ZTsgd2hlbiB0d28gY2hpbGRyZW4gc2hhcmUgYSBrZXksIG9ubHkgJyArICd0aGUgZmlyc3QgY2hpbGQgd2lsbCBiZSB1c2VkLicsIG5hbWUpIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmIChrZXlVbmlxdWUgJiYgY2hpbGQgIT0gbnVsbCkge1xuICAgIHJlc3VsdFtuYW1lXSA9IGNoaWxkO1xuICB9XG59XG5cbi8qKlxuICogRmxhdHRlbnMgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLiBBbnkgbnVsbFxuICogY2hpbGRyZW4gd2lsbCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBvYmplY3QuXG4gKiBAcmV0dXJuIHshb2JqZWN0fSBmbGF0dGVuZWQgY2hpbGRyZW4ga2V5ZWQgYnkgbmFtZS5cbiAqL1xuZnVuY3Rpb24gZmxhdHRlbkNoaWxkcmVuKGNoaWxkcmVuKSB7XG4gIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgZmxhdHRlblNpbmdsZUNoaWxkSW50b0NvbnRleHQsIHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZmxhdHRlbkNoaWxkcmVuOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBmb3JFYWNoQWNjdW11bGF0ZWRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQHBhcmFtIHthcnJheX0gYXJyIGFuIFwiYWNjdW11bGF0aW9uXCIgb2YgaXRlbXMgd2hpY2ggaXMgZWl0aGVyIGFuIEFycmF5IG9yXG4gKiBhIHNpbmdsZSBpdGVtLiBVc2VmdWwgd2hlbiBwYWlyZWQgd2l0aCB0aGUgYGFjY3VtdWxhdGVgIG1vZHVsZS4gVGhpcyBpcyBhXG4gKiBzaW1wbGUgdXRpbGl0eSB0aGF0IGFsbG93cyB1cyB0byByZWFzb24gYWJvdXQgYSBjb2xsZWN0aW9uIG9mIGl0ZW1zLCBidXRcbiAqIGhhbmRsaW5nIHRoZSBjYXNlIHdoZW4gdGhlcmUgaXMgZXhhY3RseSBvbmUgaXRlbSAoYW5kIHdlIGRvIG5vdCBuZWVkIHRvXG4gKiBhbGxvY2F0ZSBhbiBhcnJheSkuXG4gKi9cbnZhciBmb3JFYWNoQWNjdW11bGF0ZWQgPSBmdW5jdGlvbiAoYXJyLCBjYiwgc2NvcGUpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xuICAgIGFyci5mb3JFYWNoKGNiLCBzY29wZSk7XG4gIH0gZWxzZSBpZiAoYXJyKSB7XG4gICAgY2IuY2FsbChzY29wZSwgYXJyKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmb3JFYWNoQWNjdW11bGF0ZWQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50Q2hhckNvZGVcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIGBjaGFyQ29kZWAgcmVwcmVzZW50cyB0aGUgYWN0dWFsIFwiY2hhcmFjdGVyIGNvZGVcIiBhbmQgaXMgc2FmZSB0byB1c2Ugd2l0aFxuICogYFN0cmluZy5mcm9tQ2hhckNvZGVgLiBBcyBzdWNoLCBvbmx5IGtleXMgdGhhdCBjb3JyZXNwb25kIHRvIHByaW50YWJsZVxuICogY2hhcmFjdGVycyBwcm9kdWNlIGEgdmFsaWQgYGNoYXJDb2RlYCwgdGhlIG9ubHkgZXhjZXB0aW9uIHRvIHRoaXMgaXMgRW50ZXIuXG4gKiBUaGUgVGFiLWtleSBpcyBjb25zaWRlcmVkIG5vbi1wcmludGFibGUgYW5kIGRvZXMgbm90IGhhdmUgYSBgY2hhckNvZGVgLFxuICogcHJlc3VtYWJseSBiZWNhdXNlIGl0IGRvZXMgbm90IHByb2R1Y2UgYSB0YWItY2hhcmFjdGVyIGluIGJyb3dzZXJzLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gTm9ybWFsaXplZCBgY2hhckNvZGVgIHByb3BlcnR5LlxuICovXG5mdW5jdGlvbiBnZXRFdmVudENoYXJDb2RlKG5hdGl2ZUV2ZW50KSB7XG4gIHZhciBjaGFyQ29kZTtcbiAgdmFyIGtleUNvZGUgPSBuYXRpdmVFdmVudC5rZXlDb2RlO1xuXG4gIGlmICgnY2hhckNvZGUnIGluIG5hdGl2ZUV2ZW50KSB7XG4gICAgY2hhckNvZGUgPSBuYXRpdmVFdmVudC5jaGFyQ29kZTtcblxuICAgIC8vIEZGIGRvZXMgbm90IHNldCBgY2hhckNvZGVgIGZvciB0aGUgRW50ZXIta2V5LCBjaGVjayBhZ2FpbnN0IGBrZXlDb2RlYC5cbiAgICBpZiAoY2hhckNvZGUgPT09IDAgJiYga2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgIGNoYXJDb2RlID0gMTM7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIElFOCBkb2VzIG5vdCBpbXBsZW1lbnQgYGNoYXJDb2RlYCwgYnV0IGBrZXlDb2RlYCBoYXMgdGhlIGNvcnJlY3QgdmFsdWUuXG4gICAgY2hhckNvZGUgPSBrZXlDb2RlO1xuICB9XG5cbiAgLy8gU29tZSBub24tcHJpbnRhYmxlIGtleXMgYXJlIHJlcG9ydGVkIGluIGBjaGFyQ29kZWAvYGtleUNvZGVgLCBkaXNjYXJkIHRoZW0uXG4gIC8vIE11c3Qgbm90IGRpc2NhcmQgdGhlIChub24tKXByaW50YWJsZSBFbnRlci1rZXkuXG4gIGlmIChjaGFyQ29kZSA+PSAzMiB8fCBjaGFyQ29kZSA9PT0gMTMpIHtcbiAgICByZXR1cm4gY2hhckNvZGU7XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRFdmVudENoYXJDb2RlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRFdmVudEtleVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBnZXRFdmVudENoYXJDb2RlID0gcmVxdWlyZSgnLi9nZXRFdmVudENoYXJDb2RlJyk7XG5cbi8qKlxuICogTm9ybWFsaXphdGlvbiBvZiBkZXByZWNhdGVkIEhUTUw1IGBrZXlgIHZhbHVlc1xuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvS2V5Ym9hcmRFdmVudCNLZXlfbmFtZXNcbiAqL1xudmFyIG5vcm1hbGl6ZUtleSA9IHtcbiAgJ0VzYyc6ICdFc2NhcGUnLFxuICAnU3BhY2ViYXInOiAnICcsXG4gICdMZWZ0JzogJ0Fycm93TGVmdCcsXG4gICdVcCc6ICdBcnJvd1VwJyxcbiAgJ1JpZ2h0JzogJ0Fycm93UmlnaHQnLFxuICAnRG93bic6ICdBcnJvd0Rvd24nLFxuICAnRGVsJzogJ0RlbGV0ZScsXG4gICdXaW4nOiAnT1MnLFxuICAnTWVudSc6ICdDb250ZXh0TWVudScsXG4gICdBcHBzJzogJ0NvbnRleHRNZW51JyxcbiAgJ1Njcm9sbCc6ICdTY3JvbGxMb2NrJyxcbiAgJ01velByaW50YWJsZUtleSc6ICdVbmlkZW50aWZpZWQnXG59O1xuXG4vKipcbiAqIFRyYW5zbGF0aW9uIGZyb20gbGVnYWN5IGBrZXlDb2RlYCB0byBIVE1MNSBga2V5YFxuICogT25seSBzcGVjaWFsIGtleXMgc3VwcG9ydGVkLCBhbGwgb3RoZXJzIGRlcGVuZCBvbiBrZXlib2FyZCBsYXlvdXQgb3IgYnJvd3NlclxuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvS2V5Ym9hcmRFdmVudCNLZXlfbmFtZXNcbiAqL1xudmFyIHRyYW5zbGF0ZVRvS2V5ID0ge1xuICA4OiAnQmFja3NwYWNlJyxcbiAgOTogJ1RhYicsXG4gIDEyOiAnQ2xlYXInLFxuICAxMzogJ0VudGVyJyxcbiAgMTY6ICdTaGlmdCcsXG4gIDE3OiAnQ29udHJvbCcsXG4gIDE4OiAnQWx0JyxcbiAgMTk6ICdQYXVzZScsXG4gIDIwOiAnQ2Fwc0xvY2snLFxuICAyNzogJ0VzY2FwZScsXG4gIDMyOiAnICcsXG4gIDMzOiAnUGFnZVVwJyxcbiAgMzQ6ICdQYWdlRG93bicsXG4gIDM1OiAnRW5kJyxcbiAgMzY6ICdIb21lJyxcbiAgMzc6ICdBcnJvd0xlZnQnLFxuICAzODogJ0Fycm93VXAnLFxuICAzOTogJ0Fycm93UmlnaHQnLFxuICA0MDogJ0Fycm93RG93bicsXG4gIDQ1OiAnSW5zZXJ0JyxcbiAgNDY6ICdEZWxldGUnLFxuICAxMTI6ICdGMScsIDExMzogJ0YyJywgMTE0OiAnRjMnLCAxMTU6ICdGNCcsIDExNjogJ0Y1JywgMTE3OiAnRjYnLFxuICAxMTg6ICdGNycsIDExOTogJ0Y4JywgMTIwOiAnRjknLCAxMjE6ICdGMTAnLCAxMjI6ICdGMTEnLCAxMjM6ICdGMTInLFxuICAxNDQ6ICdOdW1Mb2NrJyxcbiAgMTQ1OiAnU2Nyb2xsTG9jaycsXG4gIDIyNDogJ01ldGEnXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge3N0cmluZ30gTm9ybWFsaXplZCBga2V5YCBwcm9wZXJ0eS5cbiAqL1xuZnVuY3Rpb24gZ2V0RXZlbnRLZXkobmF0aXZlRXZlbnQpIHtcbiAgaWYgKG5hdGl2ZUV2ZW50LmtleSkge1xuICAgIC8vIE5vcm1hbGl6ZSBpbmNvbnNpc3RlbnQgdmFsdWVzIHJlcG9ydGVkIGJ5IGJyb3dzZXJzIGR1ZSB0b1xuICAgIC8vIGltcGxlbWVudGF0aW9ucyBvZiBhIHdvcmtpbmcgZHJhZnQgc3BlY2lmaWNhdGlvbi5cblxuICAgIC8vIEZpcmVGb3ggaW1wbGVtZW50cyBga2V5YCBidXQgcmV0dXJucyBgTW96UHJpbnRhYmxlS2V5YCBmb3IgYWxsXG4gICAgLy8gcHJpbnRhYmxlIGNoYXJhY3RlcnMgKG5vcm1hbGl6ZWQgdG8gYFVuaWRlbnRpZmllZGApLCBpZ25vcmUgaXQuXG4gICAgdmFyIGtleSA9IG5vcm1hbGl6ZUtleVtuYXRpdmVFdmVudC5rZXldIHx8IG5hdGl2ZUV2ZW50LmtleTtcbiAgICBpZiAoa2V5ICE9PSAnVW5pZGVudGlmaWVkJykge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cblxuICAvLyBCcm93c2VyIGRvZXMgbm90IGltcGxlbWVudCBga2V5YCwgcG9seWZpbGwgYXMgbXVjaCBvZiBpdCBhcyB3ZSBjYW4uXG4gIGlmIChuYXRpdmVFdmVudC50eXBlID09PSAna2V5cHJlc3MnKSB7XG4gICAgdmFyIGNoYXJDb2RlID0gZ2V0RXZlbnRDaGFyQ29kZShuYXRpdmVFdmVudCk7XG5cbiAgICAvLyBUaGUgZW50ZXIta2V5IGlzIHRlY2huaWNhbGx5IGJvdGggcHJpbnRhYmxlIGFuZCBub24tcHJpbnRhYmxlIGFuZCBjYW5cbiAgICAvLyB0aHVzIGJlIGNhcHR1cmVkIGJ5IGBrZXlwcmVzc2AsIG5vIG90aGVyIG5vbi1wcmludGFibGUga2V5IHNob3VsZC5cbiAgICByZXR1cm4gY2hhckNvZGUgPT09IDEzID8gJ0VudGVyJyA6IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICB9XG4gIGlmIChuYXRpdmVFdmVudC50eXBlID09PSAna2V5ZG93bicgfHwgbmF0aXZlRXZlbnQudHlwZSA9PT0gJ2tleXVwJykge1xuICAgIC8vIFdoaWxlIHVzZXIga2V5Ym9hcmQgbGF5b3V0IGRldGVybWluZXMgdGhlIGFjdHVhbCBtZWFuaW5nIG9mIGVhY2hcbiAgICAvLyBga2V5Q29kZWAgdmFsdWUsIGFsbW9zdCBhbGwgZnVuY3Rpb24ga2V5cyBoYXZlIGEgdW5pdmVyc2FsIHZhbHVlLlxuICAgIHJldHVybiB0cmFuc2xhdGVUb0tleVtuYXRpdmVFdmVudC5rZXlDb2RlXSB8fCAnVW5pZGVudGlmaWVkJztcbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0RXZlbnRLZXk7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50TW9kaWZpZXJTdGF0ZVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVHJhbnNsYXRpb24gZnJvbSBtb2RpZmllciBrZXkgdG8gdGhlIGFzc29jaWF0ZWQgcHJvcGVydHkgaW4gdGhlIGV2ZW50LlxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2tleXMtTW9kaWZpZXJzXG4gKi9cblxudmFyIG1vZGlmaWVyS2V5VG9Qcm9wID0ge1xuICAnQWx0JzogJ2FsdEtleScsXG4gICdDb250cm9sJzogJ2N0cmxLZXknLFxuICAnTWV0YSc6ICdtZXRhS2V5JyxcbiAgJ1NoaWZ0JzogJ3NoaWZ0S2V5J1xufTtcblxuLy8gSUU4IGRvZXMgbm90IGltcGxlbWVudCBnZXRNb2RpZmllclN0YXRlIHNvIHdlIHNpbXBseSBtYXAgaXQgdG8gdGhlIG9ubHlcbi8vIG1vZGlmaWVyIGtleXMgZXhwb3NlZCBieSB0aGUgZXZlbnQgaXRzZWxmLCBkb2VzIG5vdCBzdXBwb3J0IExvY2sta2V5cy5cbi8vIEN1cnJlbnRseSwgYWxsIG1ham9yIGJyb3dzZXJzIGV4Y2VwdCBDaHJvbWUgc2VlbXMgdG8gc3VwcG9ydCBMb2NrLWtleXMuXG5mdW5jdGlvbiBtb2RpZmllclN0YXRlR2V0dGVyKGtleUFyZykge1xuICB2YXIgc3ludGhldGljRXZlbnQgPSB0aGlzO1xuICB2YXIgbmF0aXZlRXZlbnQgPSBzeW50aGV0aWNFdmVudC5uYXRpdmVFdmVudDtcbiAgaWYgKG5hdGl2ZUV2ZW50LmdldE1vZGlmaWVyU3RhdGUpIHtcbiAgICByZXR1cm4gbmF0aXZlRXZlbnQuZ2V0TW9kaWZpZXJTdGF0ZShrZXlBcmcpO1xuICB9XG4gIHZhciBrZXlQcm9wID0gbW9kaWZpZXJLZXlUb1Byb3Bba2V5QXJnXTtcbiAgcmV0dXJuIGtleVByb3AgPyAhIW5hdGl2ZUV2ZW50W2tleVByb3BdIDogZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50TW9kaWZpZXJTdGF0ZShuYXRpdmVFdmVudCkge1xuICByZXR1cm4gbW9kaWZpZXJTdGF0ZUdldHRlcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRFdmVudE1vZGlmaWVyU3RhdGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50VGFyZ2V0XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBHZXRzIHRoZSB0YXJnZXQgbm9kZSBmcm9tIGEgbmF0aXZlIGJyb3dzZXIgZXZlbnQgYnkgYWNjb3VudGluZyBmb3JcbiAqIGluY29uc2lzdGVuY2llcyBpbiBicm93c2VyIERPTSBBUElzLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge0RPTUV2ZW50VGFyZ2V0fSBUYXJnZXQgbm9kZS5cbiAqL1xuZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXQobmF0aXZlRXZlbnQpIHtcbiAgdmFyIHRhcmdldCA9IG5hdGl2ZUV2ZW50LnRhcmdldCB8fCBuYXRpdmVFdmVudC5zcmNFbGVtZW50IHx8IHdpbmRvdztcbiAgLy8gU2FmYXJpIG1heSBmaXJlIGV2ZW50cyBvbiB0ZXh0IG5vZGVzIChOb2RlLlRFWFRfTk9ERSBpcyAzKS5cbiAgLy8gQHNlZSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2pzL2V2ZW50c19wcm9wZXJ0aWVzLmh0bWxcbiAgcmV0dXJuIHRhcmdldC5ub2RlVHlwZSA9PT0gMyA/IHRhcmdldC5wYXJlbnROb2RlIDogdGFyZ2V0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldEV2ZW50VGFyZ2V0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRJdGVyYXRvckZuXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyogZ2xvYmFsIFN5bWJvbCAqL1xudmFyIElURVJBVE9SX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLml0ZXJhdG9yO1xudmFyIEZBVVhfSVRFUkFUT1JfU1lNQk9MID0gJ0BAaXRlcmF0b3InOyAvLyBCZWZvcmUgU3ltYm9sIHNwZWMuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgaXRlcmF0b3IgbWV0aG9kIGZ1bmN0aW9uIGNvbnRhaW5lZCBvbiB0aGUgaXRlcmFibGUgb2JqZWN0LlxuICpcbiAqIEJlIHN1cmUgdG8gaW52b2tlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBpdGVyYWJsZSBhcyBjb250ZXh0OlxuICpcbiAqICAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4obXlJdGVyYWJsZSk7XG4gKiAgICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAqICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChteUl0ZXJhYmxlKTtcbiAqICAgICAgIC4uLlxuICogICAgIH1cbiAqXG4gKiBAcGFyYW0gez9vYmplY3R9IG1heWJlSXRlcmFibGVcbiAqIEByZXR1cm4gez9mdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gZ2V0SXRlcmF0b3JGbihtYXliZUl0ZXJhYmxlKSB7XG4gIHZhciBpdGVyYXRvckZuID0gbWF5YmVJdGVyYWJsZSAmJiAoSVRFUkFUT1JfU1lNQk9MICYmIG1heWJlSXRlcmFibGVbSVRFUkFUT1JfU1lNQk9MXSB8fCBtYXliZUl0ZXJhYmxlW0ZBVVhfSVRFUkFUT1JfU1lNQk9MXSk7XG4gIGlmICh0eXBlb2YgaXRlcmF0b3JGbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBpdGVyYXRvckZuO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0SXRlcmF0b3JGbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBHaXZlbiBhbnkgbm9kZSByZXR1cm4gdGhlIGZpcnN0IGxlYWYgbm9kZSB3aXRob3V0IGNoaWxkcmVuLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gbm9kZVxuICogQHJldHVybiB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX1cbiAqL1xuZnVuY3Rpb24gZ2V0TGVhZk5vZGUobm9kZSkge1xuICB3aGlsZSAobm9kZSAmJiBub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICBub2RlID0gbm9kZS5maXJzdENoaWxkO1xuICB9XG4gIHJldHVybiBub2RlO1xufVxuXG4vKipcbiAqIEdldCB0aGUgbmV4dCBzaWJsaW5nIHdpdGhpbiBhIGNvbnRhaW5lci4gVGhpcyB3aWxsIHdhbGsgdXAgdGhlXG4gKiBET00gaWYgYSBub2RlJ3Mgc2libGluZ3MgaGF2ZSBiZWVuIGV4aGF1c3RlZC5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9IG5vZGVcbiAqIEByZXR1cm4gez9ET01FbGVtZW50fERPTVRleHROb2RlfVxuICovXG5mdW5jdGlvbiBnZXRTaWJsaW5nTm9kZShub2RlKSB7XG4gIHdoaWxlIChub2RlKSB7XG4gICAgaWYgKG5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICB9XG59XG5cbi8qKlxuICogR2V0IG9iamVjdCBkZXNjcmliaW5nIHRoZSBub2RlcyB3aGljaCBjb250YWluIGNoYXJhY3RlcnMgYXQgb2Zmc2V0LlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gcm9vdFxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFxuICogQHJldHVybiB7P29iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldChyb290LCBvZmZzZXQpIHtcbiAgdmFyIG5vZGUgPSBnZXRMZWFmTm9kZShyb290KTtcbiAgdmFyIG5vZGVTdGFydCA9IDA7XG4gIHZhciBub2RlRW5kID0gMDtcblxuICB3aGlsZSAobm9kZSkge1xuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAzKSB7XG4gICAgICBub2RlRW5kID0gbm9kZVN0YXJ0ICsgbm9kZS50ZXh0Q29udGVudC5sZW5ndGg7XG5cbiAgICAgIGlmIChub2RlU3RhcnQgPD0gb2Zmc2V0ICYmIG5vZGVFbmQgPj0gb2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgICBvZmZzZXQ6IG9mZnNldCAtIG5vZGVTdGFydFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBub2RlU3RhcnQgPSBub2RlRW5kO1xuICAgIH1cblxuICAgIG5vZGUgPSBnZXRMZWFmTm9kZShnZXRTaWJsaW5nTm9kZShub2RlKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRUZXh0Q29udGVudEFjY2Vzc29yXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgY29udGVudEtleSA9IG51bGw7XG5cbi8qKlxuICogR2V0cyB0aGUga2V5IHVzZWQgdG8gYWNjZXNzIHRleHQgY29udGVudCBvbiBhIERPTSBub2RlLlxuICpcbiAqIEByZXR1cm4gez9zdHJpbmd9IEtleSB1c2VkIHRvIGFjY2VzcyB0ZXh0IGNvbnRlbnQuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2V0VGV4dENvbnRlbnRBY2Nlc3NvcigpIHtcbiAgaWYgKCFjb250ZW50S2V5ICYmIEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICAgIC8vIFByZWZlciB0ZXh0Q29udGVudCB0byBpbm5lclRleHQgYmVjYXVzZSBtYW55IGJyb3dzZXJzIHN1cHBvcnQgYm90aCBidXRcbiAgICAvLyBTVkcgPHRleHQ+IGVsZW1lbnRzIGRvbid0IHN1cHBvcnQgaW5uZXJUZXh0IGV2ZW4gd2hlbiA8ZGl2PiBkb2VzLlxuICAgIGNvbnRlbnRLZXkgPSAndGV4dENvbnRlbnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA/ICd0ZXh0Q29udGVudCcgOiAnaW5uZXJUZXh0JztcbiAgfVxuICByZXR1cm4gY29udGVudEtleTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRUZXh0Q29udGVudEFjY2Vzc29yOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpO1xudmFyIFJlYWN0RW1wdHlDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0RW1wdHlDb21wb25lbnQnKTtcbnZhciBSZWFjdE5hdGl2ZUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3ROYXRpdmVDb21wb25lbnQnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8vIFRvIGF2b2lkIGEgY3ljbGljIGRlcGVuZGVuY3ksIHdlIGNyZWF0ZSB0aGUgZmluYWwgY2xhc3MgaW4gdGhpcyBtb2R1bGVcbnZhciBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7fTtcbmFzc2lnbihSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFdyYXBwZXIucHJvdG90eXBlLCBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudC5NaXhpbiwge1xuICBfaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudDogaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudFxufSk7XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikge1xuICBpZiAob3duZXIpIHtcbiAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSB0eXBlIHJlZmVyZW5jZSBpcyBhIGtub3duIGludGVybmFsIHR5cGUuIEkuZS4gbm90IGEgdXNlclxuICogcHJvdmlkZWQgY29tcG9zaXRlIHR5cGUuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHlwZVxuICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoaXMgaXMgYSB2YWxpZCBpbnRlcm5hbCB0eXBlLlxuICovXG5mdW5jdGlvbiBpc0ludGVybmFsQ29tcG9uZW50VHlwZSh0eXBlKSB7XG4gIHJldHVybiB0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdHlwZS5wcm90b3R5cGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB0eXBlLnByb3RvdHlwZS5tb3VudENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdHlwZS5wcm90b3R5cGUucmVjZWl2ZUNvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuLyoqXG4gKiBHaXZlbiBhIFJlYWN0Tm9kZSwgY3JlYXRlIGFuIGluc3RhbmNlIHRoYXQgd2lsbCBhY3R1YWxseSBiZSBtb3VudGVkLlxuICpcbiAqIEBwYXJhbSB7UmVhY3ROb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtvYmplY3R9IEEgbmV3IGluc3RhbmNlIG9mIHRoZSBlbGVtZW50J3MgY29uc3RydWN0b3IuXG4gKiBAcHJvdGVjdGVkXG4gKi9cbmZ1bmN0aW9uIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQobm9kZSkge1xuICB2YXIgaW5zdGFuY2U7XG5cbiAgaWYgKG5vZGUgPT09IG51bGwgfHwgbm9kZSA9PT0gZmFsc2UpIHtcbiAgICBpbnN0YW5jZSA9IG5ldyBSZWFjdEVtcHR5Q29tcG9uZW50KGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBub2RlID09PSAnb2JqZWN0Jykge1xuICAgIHZhciBlbGVtZW50ID0gbm9kZTtcbiAgICAhKGVsZW1lbnQgJiYgKHR5cGVvZiBlbGVtZW50LnR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gJ3N0cmluZycpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFbGVtZW50IHR5cGUgaXMgaW52YWxpZDogZXhwZWN0ZWQgYSBzdHJpbmcgKGZvciBidWlsdC1pbiBjb21wb25lbnRzKSAnICsgJ29yIGEgY2xhc3MvZnVuY3Rpb24gKGZvciBjb21wb3NpdGUgY29tcG9uZW50cykgYnV0IGdvdDogJXMuJXMnLCBlbGVtZW50LnR5cGUgPT0gbnVsbCA/IGVsZW1lbnQudHlwZSA6IHR5cGVvZiBlbGVtZW50LnR5cGUsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShlbGVtZW50Ll9vd25lcikpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIFNwZWNpYWwgY2FzZSBzdHJpbmcgdmFsdWVzXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50LnR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpbnN0YW5jZSA9IFJlYWN0TmF0aXZlQ29tcG9uZW50LmNyZWF0ZUludGVybmFsQ29tcG9uZW50KGVsZW1lbnQpO1xuICAgIH0gZWxzZSBpZiAoaXNJbnRlcm5hbENvbXBvbmVudFR5cGUoZWxlbWVudC50eXBlKSkge1xuICAgICAgLy8gVGhpcyBpcyB0ZW1wb3JhcmlseSBhdmFpbGFibGUgZm9yIGN1c3RvbSBjb21wb25lbnRzIHRoYXQgYXJlIG5vdCBzdHJpbmdcbiAgICAgIC8vIHJlcHJlc2VudGF0aW9ucy4gSS5lLiBBUlQuIE9uY2UgdGhvc2UgYXJlIHVwZGF0ZWQgdG8gdXNlIHRoZSBzdHJpbmdcbiAgICAgIC8vIHJlcHJlc2VudGF0aW9uLCB3ZSBjYW4gZHJvcCB0aGlzIGNvZGUgcGF0aC5cbiAgICAgIGluc3RhbmNlID0gbmV3IGVsZW1lbnQudHlwZShlbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zdGFuY2UgPSBuZXcgUmVhY3RDb21wb3NpdGVDb21wb25lbnRXcmFwcGVyKCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBub2RlID09PSAnc3RyaW5nJyB8fCB0eXBlb2Ygbm9kZSA9PT0gJ251bWJlcicpIHtcbiAgICBpbnN0YW5jZSA9IFJlYWN0TmF0aXZlQ29tcG9uZW50LmNyZWF0ZUluc3RhbmNlRm9yVGV4dChub2RlKTtcbiAgfSBlbHNlIHtcbiAgICAhZmFsc2UgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRW5jb3VudGVyZWQgaW52YWxpZCBSZWFjdCBub2RlIG9mIHR5cGUgJXMnLCB0eXBlb2Ygbm9kZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgaW5zdGFuY2UuY29uc3RydWN0ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBpbnN0YW5jZS5tb3VudENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgaW5zdGFuY2UucmVjZWl2ZUNvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgaW5zdGFuY2UudW5tb3VudENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJywgJ09ubHkgUmVhY3QgQ29tcG9uZW50cyBjYW4gYmUgbW91bnRlZC4nKSA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8vIFNldHMgdXAgdGhlIGluc3RhbmNlLiBUaGlzIGNhbiBwcm9iYWJseSBqdXN0IG1vdmUgaW50byB0aGUgY29uc3RydWN0b3Igbm93LlxuICBpbnN0YW5jZS5jb25zdHJ1Y3Qobm9kZSk7XG5cbiAgLy8gVGhlc2UgdHdvIGZpZWxkcyBhcmUgdXNlZCBieSB0aGUgRE9NIGFuZCBBUlQgZGlmZmluZyBhbGdvcml0aG1zXG4gIC8vIHJlc3BlY3RpdmVseS4gSW5zdGVhZCBvZiB1c2luZyBleHBhbmRvcyBvbiBjb21wb25lbnRzLCB3ZSBzaG91bGQgYmVcbiAgLy8gc3RvcmluZyB0aGUgc3RhdGUgbmVlZGVkIGJ5IHRoZSBkaWZmaW5nIGFsZ29yaXRobXMgZWxzZXdoZXJlLlxuICBpbnN0YW5jZS5fbW91bnRJbmRleCA9IDA7XG4gIGluc3RhbmNlLl9tb3VudEltYWdlID0gbnVsbDtcblxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGluc3RhbmNlLl9pc093bmVyTmVjZXNzYXJ5ID0gZmFsc2U7XG4gICAgaW5zdGFuY2UuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyID0gZmFsc2U7XG4gIH1cblxuICAvLyBJbnRlcm5hbCBpbnN0YW5jZXMgc2hvdWxkIGZ1bGx5IGNvbnN0cnVjdGVkIGF0IHRoaXMgcG9pbnQsIHNvIHRoZXkgc2hvdWxkXG4gIC8vIG5vdCBnZXQgYW55IG5ldyBmaWVsZHMgYWRkZWQgdG8gdGhlbSBhdCB0aGlzIHBvaW50LlxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChPYmplY3QucHJldmVudEV4dGVuc2lvbnMpIHtcbiAgICAgIE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyhpbnN0YW5jZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGlzRXZlbnRTdXBwb3J0ZWRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciB1c2VIYXNGZWF0dXJlO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICB1c2VIYXNGZWF0dXJlID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24gJiYgZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSAmJlxuICAvLyBhbHdheXMgcmV0dXJucyB0cnVlIGluIG5ld2VyIGJyb3dzZXJzIGFzIHBlciB0aGUgc3RhbmRhcmQuXG4gIC8vIEBzZWUgaHR0cDovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1kb21pbXBsZW1lbnRhdGlvbi1oYXNmZWF0dXJlXG4gIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoJycsICcnKSAhPT0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYW4gZXZlbnQgaXMgc3VwcG9ydGVkIGluIHRoZSBjdXJyZW50IGV4ZWN1dGlvbiBlbnZpcm9ubWVudC5cbiAqXG4gKiBOT1RFOiBUaGlzIHdpbGwgbm90IHdvcmsgY29ycmVjdGx5IGZvciBub24tZ2VuZXJpYyBldmVudHMgc3VjaCBhcyBgY2hhbmdlYCxcbiAqIGByZXNldGAsIGBsb2FkYCwgYGVycm9yYCwgYW5kIGBzZWxlY3RgLlxuICpcbiAqIEJvcnJvd3MgZnJvbSBNb2Rlcm5penIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVN1ZmZpeCBFdmVudCBuYW1lLCBlLmcuIFwiY2xpY2tcIi5cbiAqIEBwYXJhbSB7P2Jvb2xlYW59IGNhcHR1cmUgQ2hlY2sgaWYgdGhlIGNhcHR1cmUgcGhhc2UgaXMgc3VwcG9ydGVkLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgc3VwcG9ydGVkLlxuICogQGludGVybmFsXG4gKiBAbGljZW5zZSBNb2Rlcm5penIgMy4wLjBwcmUgKEN1c3RvbSBCdWlsZCkgfCBNSVRcbiAqL1xuZnVuY3Rpb24gaXNFdmVudFN1cHBvcnRlZChldmVudE5hbWVTdWZmaXgsIGNhcHR1cmUpIHtcbiAgaWYgKCFFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gfHwgY2FwdHVyZSAmJiAhKCdhZGRFdmVudExpc3RlbmVyJyBpbiBkb2N1bWVudCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgZXZlbnROYW1lID0gJ29uJyArIGV2ZW50TmFtZVN1ZmZpeDtcbiAgdmFyIGlzU3VwcG9ydGVkID0gKGV2ZW50TmFtZSBpbiBkb2N1bWVudCk7XG5cbiAgaWYgKCFpc1N1cHBvcnRlZCkge1xuICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoZXZlbnROYW1lLCAncmV0dXJuOycpO1xuICAgIGlzU3VwcG9ydGVkID0gdHlwZW9mIGVsZW1lbnRbZXZlbnROYW1lXSA9PT0gJ2Z1bmN0aW9uJztcbiAgfVxuXG4gIGlmICghaXNTdXBwb3J0ZWQgJiYgdXNlSGFzRmVhdHVyZSAmJiBldmVudE5hbWVTdWZmaXggPT09ICd3aGVlbCcpIHtcbiAgICAvLyBUaGlzIGlzIHRoZSBvbmx5IHdheSB0byB0ZXN0IHN1cHBvcnQgZm9yIHRoZSBgd2hlZWxgIGV2ZW50IGluIElFOSsuXG4gICAgaXNTdXBwb3J0ZWQgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCdFdmVudHMud2hlZWwnLCAnMy4wJyk7XG4gIH1cblxuICByZXR1cm4gaXNTdXBwb3J0ZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNFdmVudFN1cHBvcnRlZDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaXNUZXh0SW5wdXRFbGVtZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBzZWUgaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvdGhlLWlucHV0LWVsZW1lbnQuaHRtbCNpbnB1dC10eXBlLWF0dHItc3VtbWFyeVxuICovXG52YXIgc3VwcG9ydGVkSW5wdXRUeXBlcyA9IHtcbiAgJ2NvbG9yJzogdHJ1ZSxcbiAgJ2RhdGUnOiB0cnVlLFxuICAnZGF0ZXRpbWUnOiB0cnVlLFxuICAnZGF0ZXRpbWUtbG9jYWwnOiB0cnVlLFxuICAnZW1haWwnOiB0cnVlLFxuICAnbW9udGgnOiB0cnVlLFxuICAnbnVtYmVyJzogdHJ1ZSxcbiAgJ3Bhc3N3b3JkJzogdHJ1ZSxcbiAgJ3JhbmdlJzogdHJ1ZSxcbiAgJ3NlYXJjaCc6IHRydWUsXG4gICd0ZWwnOiB0cnVlLFxuICAndGV4dCc6IHRydWUsXG4gICd0aW1lJzogdHJ1ZSxcbiAgJ3VybCc6IHRydWUsXG4gICd3ZWVrJzogdHJ1ZVxufTtcblxuZnVuY3Rpb24gaXNUZXh0SW5wdXRFbGVtZW50KGVsZW0pIHtcbiAgdmFyIG5vZGVOYW1lID0gZWxlbSAmJiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIG5vZGVOYW1lICYmIChub2RlTmFtZSA9PT0gJ2lucHV0JyAmJiBzdXBwb3J0ZWRJbnB1dFR5cGVzW2VsZW0udHlwZV0gfHwgbm9kZU5hbWUgPT09ICd0ZXh0YXJlYScpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzVGV4dElucHV0RWxlbWVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgb25seUNoaWxkXG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBmaXJzdCBjaGlsZCBpbiBhIGNvbGxlY3Rpb24gb2YgY2hpbGRyZW4gYW5kIHZlcmlmaWVzIHRoYXQgdGhlcmVcbiAqIGlzIG9ubHkgb25lIGNoaWxkIGluIHRoZSBjb2xsZWN0aW9uLiBUaGUgY3VycmVudCBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzXG4gKiBmdW5jdGlvbiBhc3N1bWVzIHRoYXQgYSBzaW5nbGUgY2hpbGQgZ2V0cyBwYXNzZWQgd2l0aG91dCBhIHdyYXBwZXIsIGJ1dCB0aGVcbiAqIHB1cnBvc2Ugb2YgdGhpcyBoZWxwZXIgZnVuY3Rpb24gaXMgdG8gYWJzdHJhY3QgYXdheSB0aGUgcGFydGljdWxhciBzdHJ1Y3R1cmVcbiAqIG9mIGNoaWxkcmVuLlxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gY2hpbGRyZW4gQ2hpbGQgY29sbGVjdGlvbiBzdHJ1Y3R1cmUuXG4gKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gVGhlIGZpcnN0IGFuZCBvbmx5IGBSZWFjdENvbXBvbmVudGAgY29udGFpbmVkIGluIHRoZVxuICogc3RydWN0dXJlLlxuICovXG5mdW5jdGlvbiBvbmx5Q2hpbGQoY2hpbGRyZW4pIHtcbiAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZHJlbikgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnb25seUNoaWxkIG11c3QgYmUgcGFzc2VkIGEgY2hpbGRyZW4gd2l0aCBleGFjdGx5IG9uZSBjaGlsZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHJldHVybiBjaGlsZHJlbjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvbmx5Q2hpbGQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyID0gcmVxdWlyZSgnLi9lc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXInKTtcblxuLyoqXG4gKiBFc2NhcGVzIGF0dHJpYnV0ZSB2YWx1ZSB0byBwcmV2ZW50IHNjcmlwdGluZyBhdHRhY2tzLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gZXNjYXBlLlxuICogQHJldHVybiB7c3RyaW5nfSBBbiBlc2NhcGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpIHtcbiAgcmV0dXJuICdcIicgKyBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIodmFsdWUpICsgJ1wiJztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3NlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4qIEBwcm92aWRlc01vZHVsZSByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lclxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0TW91bnQucmVuZGVyU3VidHJlZUludG9Db250YWluZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHNldElubmVySFRNTFxuICovXG5cbi8qIGdsb2JhbHMgTVNBcHAgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgV0hJVEVTUEFDRV9URVNUID0gL15bIFxcclxcblxcdFxcZl0vO1xudmFyIE5PTlZJU0lCTEVfVEVTVCA9IC88KCEtLXxsaW5rfG5vc2NyaXB0fG1ldGF8c2NyaXB0fHN0eWxlKVsgXFxyXFxuXFx0XFxmXFwvPl0vO1xuXG4vKipcbiAqIFNldCB0aGUgaW5uZXJIVE1MIHByb3BlcnR5IG9mIGEgbm9kZSwgZW5zdXJpbmcgdGhhdCB3aGl0ZXNwYWNlIGlzIHByZXNlcnZlZFxuICogZXZlbiBpbiBJRTguXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gKiBAcGFyYW0ge3N0cmluZ30gaHRtbFxuICogQGludGVybmFsXG4gKi9cbnZhciBzZXRJbm5lckhUTUwgPSBmdW5jdGlvbiAobm9kZSwgaHRtbCkge1xuICBub2RlLmlubmVySFRNTCA9IGh0bWw7XG59O1xuXG4vLyBXaW44IGFwcHM6IEFsbG93IGFsbCBodG1sIHRvIGJlIGluc2VydGVkXG5pZiAodHlwZW9mIE1TQXBwICE9PSAndW5kZWZpbmVkJyAmJiBNU0FwcC5leGVjVW5zYWZlTG9jYWxGdW5jdGlvbikge1xuICBzZXRJbm5lckhUTUwgPSBmdW5jdGlvbiAobm9kZSwgaHRtbCkge1xuICAgIE1TQXBwLmV4ZWNVbnNhZmVMb2NhbEZ1bmN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIG5vZGUuaW5uZXJIVE1MID0gaHRtbDtcbiAgICB9KTtcbiAgfTtcbn1cblxuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICAvLyBJRTg6IFdoZW4gdXBkYXRpbmcgYSBqdXN0IGNyZWF0ZWQgbm9kZSB3aXRoIGlubmVySFRNTCBvbmx5IGxlYWRpbmdcbiAgLy8gd2hpdGVzcGFjZSBpcyByZW1vdmVkLiBXaGVuIHVwZGF0aW5nIGFuIGV4aXN0aW5nIG5vZGUgd2l0aCBpbm5lckhUTUxcbiAgLy8gd2hpdGVzcGFjZSBpbiByb290IFRleHROb2RlcyBpcyBhbHNvIGNvbGxhcHNlZC5cbiAgLy8gQHNlZSBxdWlya3Ntb2RlLm9yZy9idWdyZXBvcnRzL2FyY2hpdmVzLzIwMDQvMTEvaW5uZXJodG1sX2FuZF90Lmh0bWxcblxuICAvLyBGZWF0dXJlIGRldGVjdGlvbjsgb25seSBJRTggaXMga25vd24gdG8gYmVoYXZlIGltcHJvcGVybHkgbGlrZSB0aGlzLlxuICB2YXIgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdGVzdEVsZW1lbnQuaW5uZXJIVE1MID0gJyAnO1xuICBpZiAodGVzdEVsZW1lbnQuaW5uZXJIVE1MID09PSAnJykge1xuICAgIHNldElubmVySFRNTCA9IGZ1bmN0aW9uIChub2RlLCBodG1sKSB7XG4gICAgICAvLyBNYWdpYyB0aGVvcnk6IElFOCBzdXBwb3NlZGx5IGRpZmZlcmVudGlhdGVzIGJldHdlZW4gYWRkZWQgYW5kIHVwZGF0ZWRcbiAgICAgIC8vIG5vZGVzIHdoZW4gcHJvY2Vzc2luZyBpbm5lckhUTUwsIGlubmVySFRNTCBvbiB1cGRhdGVkIG5vZGVzIHN1ZmZlcnNcbiAgICAgIC8vIGZyb20gd29yc2Ugd2hpdGVzcGFjZSBiZWhhdmlvci4gUmUtYWRkaW5nIGEgbm9kZSBsaWtlIHRoaXMgdHJpZ2dlcnNcbiAgICAgIC8vIHRoZSBpbml0aWFsIGFuZCBtb3JlIGZhdm9yYWJsZSB3aGl0ZXNwYWNlIGJlaGF2aW9yLlxuICAgICAgLy8gVE9ETzogV2hhdCB0byBkbyBvbiBhIGRldGFjaGVkIG5vZGU/XG4gICAgICBpZiAobm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobm9kZSwgbm9kZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdlIGFsc28gaW1wbGVtZW50IGEgd29ya2Fyb3VuZCBmb3Igbm9uLXZpc2libGUgdGFncyBkaXNhcHBlYXJpbmcgaW50b1xuICAgICAgLy8gdGhpbiBhaXIgb24gSUU4LCB0aGlzIG9ubHkgaGFwcGVucyBpZiB0aGVyZSBpcyBubyB2aXNpYmxlIHRleHRcbiAgICAgIC8vIGluLWZyb250IG9mIHRoZSBub24tdmlzaWJsZSB0YWdzLiBQaWdneWJhY2sgb24gdGhlIHdoaXRlc3BhY2UgZml4XG4gICAgICAvLyBhbmQgc2ltcGx5IGNoZWNrIGlmIGFueSBub24tdmlzaWJsZSB0YWdzIGFwcGVhciBpbiB0aGUgc291cmNlLlxuICAgICAgaWYgKFdISVRFU1BBQ0VfVEVTVC50ZXN0KGh0bWwpIHx8IGh0bWxbMF0gPT09ICc8JyAmJiBOT05WSVNJQkxFX1RFU1QudGVzdChodG1sKSkge1xuICAgICAgICAvLyBSZWNvdmVyIGxlYWRpbmcgd2hpdGVzcGFjZSBieSB0ZW1wb3JhcmlseSBwcmVwZW5kaW5nIGFueSBjaGFyYWN0ZXIuXG4gICAgICAgIC8vIFxcdUZFRkYgaGFzIHRoZSBwb3RlbnRpYWwgYWR2YW50YWdlIG9mIGJlaW5nIHplcm8td2lkdGgvaW52aXNpYmxlLlxuICAgICAgICAvLyBVZ2xpZnlKUyBkcm9wcyBVK0ZFRkYgY2hhcnMgd2hlbiBwYXJzaW5nLCBzbyB1c2UgU3RyaW5nLmZyb21DaGFyQ29kZVxuICAgICAgICAvLyBpbiBob3BlcyB0aGF0IHRoaXMgaXMgcHJlc2VydmVkIGV2ZW4gaWYgXCJcXHVGRUZGXCIgaXMgdHJhbnNmb3JtZWQgdG9cbiAgICAgICAgLy8gdGhlIGFjdHVhbCBVbmljb2RlIGNoYXJhY3RlciAoYnkgQmFiZWwsIGZvciBleGFtcGxlKS5cbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21pc2hvby9VZ2xpZnlKUzIvYmxvYi92Mi40LjIwL2xpYi9wYXJzZS5qcyNMMjE2XG4gICAgICAgIG5vZGUuaW5uZXJIVE1MID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEZFRkYpICsgaHRtbDtcblxuICAgICAgICAvLyBkZWxldGVEYXRhIGxlYXZlcyBhbiBlbXB0eSBgVGV4dE5vZGVgIHdoaWNoIG9mZnNldHMgdGhlIGluZGV4IG9mIGFsbFxuICAgICAgICAvLyBjaGlsZHJlbi4gRGVmaW5pdGVseSB3YW50IHRvIGF2b2lkIHRoaXMuXG4gICAgICAgIHZhciB0ZXh0Tm9kZSA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgICAgICAgaWYgKHRleHROb2RlLmRhdGEubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZCh0ZXh0Tm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGV4dE5vZGUuZGVsZXRlRGF0YSgwLCAxKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRJbm5lckhUTUw7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHNldFRleHRDb250ZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xudmFyIGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlciA9IHJlcXVpcmUoJy4vZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyJyk7XG52YXIgc2V0SW5uZXJIVE1MID0gcmVxdWlyZSgnLi9zZXRJbm5lckhUTUwnKTtcblxuLyoqXG4gKiBTZXQgdGhlIHRleHRDb250ZW50IHByb3BlcnR5IG9mIGEgbm9kZSwgZW5zdXJpbmcgdGhhdCB3aGl0ZXNwYWNlIGlzIHByZXNlcnZlZFxuICogZXZlbiBpbiBJRTguIGlubmVyVGV4dCBpcyBhIHBvb3Igc3Vic3RpdHV0ZSBmb3IgdGV4dENvbnRlbnQgYW5kLCBhbW9uZyBtYW55XG4gKiBpc3N1ZXMsIGluc2VydHMgPGJyPiBpbnN0ZWFkIG9mIHRoZSBsaXRlcmFsIG5ld2xpbmUgY2hhcnMuIGlubmVySFRNTCBiZWhhdmVzXG4gKiBhcyBpdCBzaG91bGQuXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICogQGludGVybmFsXG4gKi9cbnZhciBzZXRUZXh0Q29udGVudCA9IGZ1bmN0aW9uIChub2RlLCB0ZXh0KSB7XG4gIG5vZGUudGV4dENvbnRlbnQgPSB0ZXh0O1xufTtcblxuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICBpZiAoISgndGV4dENvbnRlbnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkpIHtcbiAgICBzZXRUZXh0Q29udGVudCA9IGZ1bmN0aW9uIChub2RlLCB0ZXh0KSB7XG4gICAgICBzZXRJbm5lckhUTUwobm9kZSwgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKHRleHQpKTtcbiAgICB9O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0VGV4dENvbnRlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBHaXZlbiBhIGBwcmV2RWxlbWVudGAgYW5kIGBuZXh0RWxlbWVudGAsIGRldGVybWluZXMgaWYgdGhlIGV4aXN0aW5nXG4gKiBpbnN0YW5jZSBzaG91bGQgYmUgdXBkYXRlZCBhcyBvcHBvc2VkIHRvIGJlaW5nIGRlc3Ryb3llZCBvciByZXBsYWNlZCBieSBhIG5ld1xuICogaW5zdGFuY2UuIEJvdGggYXJndW1lbnRzIGFyZSBlbGVtZW50cy4gVGhpcyBlbnN1cmVzIHRoYXQgdGhpcyBsb2dpYyBjYW5cbiAqIG9wZXJhdGUgb24gc3RhdGVsZXNzIHRyZWVzIHdpdGhvdXQgYW55IGJhY2tpbmcgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2RWxlbWVudFxuICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0RWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXhpc3RpbmcgaW5zdGFuY2Ugc2hvdWxkIGJlIHVwZGF0ZWQuXG4gKiBAcHJvdGVjdGVkXG4gKi9cbmZ1bmN0aW9uIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50KHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCkge1xuICB2YXIgcHJldkVtcHR5ID0gcHJldkVsZW1lbnQgPT09IG51bGwgfHwgcHJldkVsZW1lbnQgPT09IGZhbHNlO1xuICB2YXIgbmV4dEVtcHR5ID0gbmV4dEVsZW1lbnQgPT09IG51bGwgfHwgbmV4dEVsZW1lbnQgPT09IGZhbHNlO1xuICBpZiAocHJldkVtcHR5IHx8IG5leHRFbXB0eSkge1xuICAgIHJldHVybiBwcmV2RW1wdHkgPT09IG5leHRFbXB0eTtcbiAgfVxuXG4gIHZhciBwcmV2VHlwZSA9IHR5cGVvZiBwcmV2RWxlbWVudDtcbiAgdmFyIG5leHRUeXBlID0gdHlwZW9mIG5leHRFbGVtZW50O1xuICBpZiAocHJldlR5cGUgPT09ICdzdHJpbmcnIHx8IHByZXZUeXBlID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBuZXh0VHlwZSA9PT0gJ3N0cmluZycgfHwgbmV4dFR5cGUgPT09ICdudW1iZXInO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXh0VHlwZSA9PT0gJ29iamVjdCcgJiYgcHJldkVsZW1lbnQudHlwZSA9PT0gbmV4dEVsZW1lbnQudHlwZSAmJiBwcmV2RWxlbWVudC5rZXkgPT09IG5leHRFbGVtZW50LmtleTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHRyYXZlcnNlQWxsQ2hpbGRyZW5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlSGFuZGxlcycpO1xuXG52YXIgZ2V0SXRlcmF0b3JGbiA9IHJlcXVpcmUoJy4vZ2V0SXRlcmF0b3JGbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBTRVBBUkFUT1IgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5TRVBBUkFUT1I7XG52YXIgU1VCU0VQQVJBVE9SID0gJzonO1xuXG4vKipcbiAqIFRPRE86IFRlc3QgdGhhdCBhIHNpbmdsZSBjaGlsZCBhbmQgYW4gYXJyYXkgd2l0aCBvbmUgaXRlbSBoYXZlIHRoZSBzYW1lIGtleVxuICogcGF0dGVybi5cbiAqL1xuXG52YXIgdXNlclByb3ZpZGVkS2V5RXNjYXBlckxvb2t1cCA9IHtcbiAgJz0nOiAnPTAnLFxuICAnLic6ICc9MScsXG4gICc6JzogJz0yJ1xufTtcblxudmFyIHVzZXJQcm92aWRlZEtleUVzY2FwZVJlZ2V4ID0gL1s9LjpdL2c7XG5cbnZhciBkaWRXYXJuQWJvdXRNYXBzID0gZmFsc2U7XG5cbmZ1bmN0aW9uIHVzZXJQcm92aWRlZEtleUVzY2FwZXIobWF0Y2gpIHtcbiAgcmV0dXJuIHVzZXJQcm92aWRlZEtleUVzY2FwZXJMb29rdXBbbWF0Y2hdO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEga2V5IHN0cmluZyB0aGF0IGlkZW50aWZpZXMgYSBjb21wb25lbnQgd2l0aGluIGEgc2V0LlxuICpcbiAqIEBwYXJhbSB7Kn0gY29tcG9uZW50IEEgY29tcG9uZW50IHRoYXQgY291bGQgY29udGFpbiBhIG1hbnVhbCBrZXkuXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggdGhhdCBpcyB1c2VkIGlmIGEgbWFudWFsIGtleSBpcyBub3QgcHJvdmlkZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldENvbXBvbmVudEtleShjb21wb25lbnQsIGluZGV4KSB7XG4gIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50LmtleSAhPSBudWxsKSB7XG4gICAgLy8gRXhwbGljaXQga2V5XG4gICAgcmV0dXJuIHdyYXBVc2VyUHJvdmlkZWRLZXkoY29tcG9uZW50LmtleSk7XG4gIH1cbiAgLy8gSW1wbGljaXQga2V5IGRldGVybWluZWQgYnkgdGhlIGluZGV4IGluIHRoZSBzZXRcbiAgcmV0dXJuIGluZGV4LnRvU3RyaW5nKDM2KTtcbn1cblxuLyoqXG4gKiBFc2NhcGUgYSBjb21wb25lbnQga2V5IHNvIHRoYXQgaXQgaXMgc2FmZSB0byB1c2UgaW4gYSByZWFjdGlkLlxuICpcbiAqIEBwYXJhbSB7Kn0gdGV4dCBDb21wb25lbnQga2V5IHRvIGJlIGVzY2FwZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEFuIGVzY2FwZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBlc2NhcGVVc2VyUHJvdmlkZWRLZXkodGV4dCkge1xuICByZXR1cm4gKCcnICsgdGV4dCkucmVwbGFjZSh1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCwgdXNlclByb3ZpZGVkS2V5RXNjYXBlcik7XG59XG5cbi8qKlxuICogV3JhcCBhIGBrZXlgIHZhbHVlIGV4cGxpY2l0bHkgcHJvdmlkZWQgYnkgdGhlIHVzZXIgdG8gZGlzdGluZ3Vpc2ggaXQgZnJvbVxuICogaW1wbGljaXRseS1nZW5lcmF0ZWQga2V5cyBnZW5lcmF0ZWQgYnkgYSBjb21wb25lbnQncyBpbmRleCBpbiBpdHMgcGFyZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVmFsdWUgb2YgYSB1c2VyLXByb3ZpZGVkIGBrZXlgIGF0dHJpYnV0ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiB3cmFwVXNlclByb3ZpZGVkS2V5KGtleSkge1xuICByZXR1cm4gJyQnICsgZXNjYXBlVXNlclByb3ZpZGVkS2V5KGtleSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcGFyYW0geyFzdHJpbmd9IG5hbWVTb0ZhciBOYW1lIG9mIHRoZSBrZXkgcGF0aCBzbyBmYXIuXG4gKiBAcGFyYW0geyFmdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2sgdG8gaW52b2tlIHdpdGggZWFjaCBjaGlsZCBmb3VuZC5cbiAqIEBwYXJhbSB7Pyp9IHRyYXZlcnNlQ29udGV4dCBVc2VkIHRvIHBhc3MgaW5mb3JtYXRpb24gdGhyb3VnaG91dCB0aGUgdHJhdmVyc2FsXG4gKiBwcm9jZXNzLlxuICogQHJldHVybiB7IW51bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbiBpbiB0aGlzIHN1YnRyZWUuXG4gKi9cbmZ1bmN0aW9uIHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkcmVuLCBuYW1lU29GYXIsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgY2hpbGRyZW47XG5cbiAgaWYgKHR5cGUgPT09ICd1bmRlZmluZWQnIHx8IHR5cGUgPT09ICdib29sZWFuJykge1xuICAgIC8vIEFsbCBvZiB0aGUgYWJvdmUgYXJlIHBlcmNlaXZlZCBhcyBudWxsLlxuICAgIGNoaWxkcmVuID0gbnVsbDtcbiAgfVxuXG4gIGlmIChjaGlsZHJlbiA9PT0gbnVsbCB8fCB0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBlID09PSAnbnVtYmVyJyB8fCBSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoY2hpbGRyZW4pKSB7XG4gICAgY2FsbGJhY2sodHJhdmVyc2VDb250ZXh0LCBjaGlsZHJlbixcbiAgICAvLyBJZiBpdCdzIHRoZSBvbmx5IGNoaWxkLCB0cmVhdCB0aGUgbmFtZSBhcyBpZiBpdCB3YXMgd3JhcHBlZCBpbiBhbiBhcnJheVxuICAgIC8vIHNvIHRoYXQgaXQncyBjb25zaXN0ZW50IGlmIHRoZSBudW1iZXIgb2YgY2hpbGRyZW4gZ3Jvd3MuXG4gICAgbmFtZVNvRmFyID09PSAnJyA/IFNFUEFSQVRPUiArIGdldENvbXBvbmVudEtleShjaGlsZHJlbiwgMCkgOiBuYW1lU29GYXIpO1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgdmFyIGNoaWxkO1xuICB2YXIgbmV4dE5hbWU7XG4gIHZhciBzdWJ0cmVlQ291bnQgPSAwOyAvLyBDb3VudCBvZiBjaGlsZHJlbiBmb3VuZCBpbiB0aGUgY3VycmVudCBzdWJ0cmVlLlxuICB2YXIgbmV4dE5hbWVQcmVmaXggPSBuYW1lU29GYXIgPT09ICcnID8gU0VQQVJBVE9SIDogbmFtZVNvRmFyICsgU1VCU0VQQVJBVE9SO1xuXG4gIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICBuZXh0TmFtZSA9IG5leHROYW1lUHJlZml4ICsgZ2V0Q29tcG9uZW50S2V5KGNoaWxkLCBpKTtcbiAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4oY2hpbGRyZW4pO1xuICAgIGlmIChpdGVyYXRvckZuKSB7XG4gICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvckZuLmNhbGwoY2hpbGRyZW4pO1xuICAgICAgdmFyIHN0ZXA7XG4gICAgICBpZiAoaXRlcmF0b3JGbiAhPT0gY2hpbGRyZW4uZW50cmllcykge1xuICAgICAgICB2YXIgaWkgPSAwO1xuICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgY2hpbGQgPSBzdGVwLnZhbHVlO1xuICAgICAgICAgIG5leHROYW1lID0gbmV4dE5hbWVQcmVmaXggKyBnZXRDb21wb25lbnRLZXkoY2hpbGQsIGlpKyspO1xuICAgICAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGRpZFdhcm5BYm91dE1hcHMsICdVc2luZyBNYXBzIGFzIGNoaWxkcmVuIGlzIG5vdCB5ZXQgZnVsbHkgc3VwcG9ydGVkLiBJdCBpcyBhbiAnICsgJ2V4cGVyaW1lbnRhbCBmZWF0dXJlIHRoYXQgbWlnaHQgYmUgcmVtb3ZlZC4gQ29udmVydCBpdCB0byBhICcgKyAnc2VxdWVuY2UgLyBpdGVyYWJsZSBvZiBrZXllZCBSZWFjdEVsZW1lbnRzIGluc3RlYWQuJykgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgZGlkV2FybkFib3V0TWFwcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSXRlcmF0b3Igd2lsbCBwcm92aWRlIGVudHJ5IFtrLHZdIHR1cGxlcyByYXRoZXIgdGhhbiB2YWx1ZXMuXG4gICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICB2YXIgZW50cnkgPSBzdGVwLnZhbHVlO1xuICAgICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgICAgY2hpbGQgPSBlbnRyeVsxXTtcbiAgICAgICAgICAgIG5leHROYW1lID0gbmV4dE5hbWVQcmVmaXggKyB3cmFwVXNlclByb3ZpZGVkS2V5KGVudHJ5WzBdKSArIFNVQlNFUEFSQVRPUiArIGdldENvbXBvbmVudEtleShjaGlsZCwgMCk7XG4gICAgICAgICAgICBzdWJ0cmVlQ291bnQgKz0gdHJhdmVyc2VBbGxDaGlsZHJlbkltcGwoY2hpbGQsIG5leHROYW1lLCBjYWxsYmFjaywgdHJhdmVyc2VDb250ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICB2YXIgYWRkZW5kdW0gPSAnJztcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGFkZGVuZHVtID0gJyBJZiB5b3UgbWVhbnQgdG8gcmVuZGVyIGEgY29sbGVjdGlvbiBvZiBjaGlsZHJlbiwgdXNlIGFuIGFycmF5ICcgKyAnaW5zdGVhZCBvciB3cmFwIHRoZSBvYmplY3QgdXNpbmcgY3JlYXRlRnJhZ21lbnQob2JqZWN0KSBmcm9tIHRoZSAnICsgJ1JlYWN0IGFkZC1vbnMuJztcbiAgICAgICAgaWYgKGNoaWxkcmVuLl9pc1JlYWN0RWxlbWVudCkge1xuICAgICAgICAgIGFkZGVuZHVtID0gJyBJdCBsb29rcyBsaWtlIHlvdVxcJ3JlIHVzaW5nIGFuIGVsZW1lbnQgY3JlYXRlZCBieSBhIGRpZmZlcmVudCAnICsgJ3ZlcnNpb24gb2YgUmVhY3QuIE1ha2Ugc3VyZSB0byB1c2Ugb25seSBvbmUgY29weSBvZiBSZWFjdC4nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG4gICAgICAgICAgdmFyIG5hbWUgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKTtcbiAgICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgICAgYWRkZW5kdW0gKz0gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIGNoaWxkcmVuU3RyaW5nID0gU3RyaW5nKGNoaWxkcmVuKTtcbiAgICAgICFmYWxzZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdPYmplY3RzIGFyZSBub3QgdmFsaWQgYXMgYSBSZWFjdCBjaGlsZCAoZm91bmQ6ICVzKS4lcycsIGNoaWxkcmVuU3RyaW5nID09PSAnW29iamVjdCBPYmplY3RdJyA/ICdvYmplY3Qgd2l0aCBrZXlzIHsnICsgT2JqZWN0LmtleXMoY2hpbGRyZW4pLmpvaW4oJywgJykgKyAnfScgOiBjaGlsZHJlblN0cmluZywgYWRkZW5kdW0pIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3VidHJlZUNvdW50O1xufVxuXG4vKipcbiAqIFRyYXZlcnNlcyBjaGlsZHJlbiB0aGF0IGFyZSB0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmAsIGJ1dFxuICogbWlnaHQgYWxzbyBiZSBzcGVjaWZpZWQgdGhyb3VnaCBhdHRyaWJ1dGVzOlxuICpcbiAqIC0gYHRyYXZlcnNlQWxsQ2hpbGRyZW4odGhpcy5wcm9wcy5jaGlsZHJlbiwgLi4uKWBcbiAqIC0gYHRyYXZlcnNlQWxsQ2hpbGRyZW4odGhpcy5wcm9wcy5sZWZ0UGFuZWxDaGlsZHJlbiwgLi4uKWBcbiAqXG4gKiBUaGUgYHRyYXZlcnNlQ29udGV4dGAgaXMgYW4gb3B0aW9uYWwgYXJndW1lbnQgdGhhdCBpcyBwYXNzZWQgdGhyb3VnaCB0aGVcbiAqIGVudGlyZSB0cmF2ZXJzYWwuIEl0IGNhbiBiZSB1c2VkIHRvIHN0b3JlIGFjY3VtdWxhdGlvbnMgb3IgYW55dGhpbmcgZWxzZSB0aGF0XG4gKiB0aGUgY2FsbGJhY2sgbWlnaHQgZmluZCByZWxldmFudC5cbiAqXG4gKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIG9iamVjdC5cbiAqIEBwYXJhbSB7IWZ1bmN0aW9ufSBjYWxsYmFjayBUbyBpbnZva2UgdXBvbiB0cmF2ZXJzaW5nIGVhY2ggY2hpbGQuXG4gKiBAcGFyYW0gez8qfSB0cmF2ZXJzZUNvbnRleHQgQ29udGV4dCBmb3IgdHJhdmVyc2FsLlxuICogQHJldHVybiB7IW51bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbiBpbiB0aGlzIHN1YnRyZWUuXG4gKi9cbmZ1bmN0aW9uIHRyYXZlcnNlQWxsQ2hpbGRyZW4oY2hpbGRyZW4sIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpIHtcbiAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHJldHVybiB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZHJlbiwgJycsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRyYXZlcnNlQWxsQ2hpbGRyZW47IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSB2YWxpZGF0ZURPTU5lc3RpbmdcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciB2YWxpZGF0ZURPTU5lc3RpbmcgPSBlbXB0eUZ1bmN0aW9uO1xuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAvLyBUaGlzIHZhbGlkYXRpb24gY29kZSB3YXMgd3JpdHRlbiBiYXNlZCBvbiB0aGUgSFRNTDUgcGFyc2luZyBzcGVjOlxuICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNoYXMtYW4tZWxlbWVudC1pbi1zY29wZVxuICAvL1xuICAvLyBOb3RlOiB0aGlzIGRvZXMgbm90IGNhdGNoIGFsbCBpbnZhbGlkIG5lc3RpbmcsIG5vciBkb2VzIGl0IHRyeSB0byAoYXMgaXQnc1xuICAvLyBub3QgY2xlYXIgd2hhdCBwcmFjdGljYWwgYmVuZWZpdCBkb2luZyBzbyBwcm92aWRlcyk7IGluc3RlYWQsIHdlIHdhcm4gb25seVxuICAvLyBmb3IgY2FzZXMgd2hlcmUgdGhlIHBhcnNlciB3aWxsIGdpdmUgYSBwYXJzZSB0cmVlIGRpZmZlcmluZyBmcm9tIHdoYXQgUmVhY3RcbiAgLy8gaW50ZW5kZWQuIEZvciBleGFtcGxlLCA8Yj48ZGl2PjwvZGl2PjwvYj4gaXMgaW52YWxpZCBidXQgd2UgZG9uJ3Qgd2FyblxuICAvLyBiZWNhdXNlIGl0IHN0aWxsIHBhcnNlcyBjb3JyZWN0bHk7IHdlIGRvIHdhcm4gZm9yIG90aGVyIGNhc2VzIGxpa2UgbmVzdGVkXG4gIC8vIDxwPiB0YWdzIHdoZXJlIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHNlY29uZCBlbGVtZW50IGltcGxpY2l0bHkgY2xvc2VzIHRoZVxuICAvLyBmaXJzdCwgY2F1c2luZyBhIGNvbmZ1c2luZyBtZXNzLlxuXG4gIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3NwZWNpYWxcbiAgdmFyIHNwZWNpYWxUYWdzID0gWydhZGRyZXNzJywgJ2FwcGxldCcsICdhcmVhJywgJ2FydGljbGUnLCAnYXNpZGUnLCAnYmFzZScsICdiYXNlZm9udCcsICdiZ3NvdW5kJywgJ2Jsb2NrcXVvdGUnLCAnYm9keScsICdicicsICdidXR0b24nLCAnY2FwdGlvbicsICdjZW50ZXInLCAnY29sJywgJ2NvbGdyb3VwJywgJ2RkJywgJ2RldGFpbHMnLCAnZGlyJywgJ2RpdicsICdkbCcsICdkdCcsICdlbWJlZCcsICdmaWVsZHNldCcsICdmaWdjYXB0aW9uJywgJ2ZpZ3VyZScsICdmb290ZXInLCAnZm9ybScsICdmcmFtZScsICdmcmFtZXNldCcsICdoMScsICdoMicsICdoMycsICdoNCcsICdoNScsICdoNicsICdoZWFkJywgJ2hlYWRlcicsICdoZ3JvdXAnLCAnaHInLCAnaHRtbCcsICdpZnJhbWUnLCAnaW1nJywgJ2lucHV0JywgJ2lzaW5kZXgnLCAnbGknLCAnbGluaycsICdsaXN0aW5nJywgJ21haW4nLCAnbWFycXVlZScsICdtZW51JywgJ21lbnVpdGVtJywgJ21ldGEnLCAnbmF2JywgJ25vZW1iZWQnLCAnbm9mcmFtZXMnLCAnbm9zY3JpcHQnLCAnb2JqZWN0JywgJ29sJywgJ3AnLCAncGFyYW0nLCAncGxhaW50ZXh0JywgJ3ByZScsICdzY3JpcHQnLCAnc2VjdGlvbicsICdzZWxlY3QnLCAnc291cmNlJywgJ3N0eWxlJywgJ3N1bW1hcnknLCAndGFibGUnLCAndGJvZHknLCAndGQnLCAndGVtcGxhdGUnLCAndGV4dGFyZWEnLCAndGZvb3QnLCAndGgnLCAndGhlYWQnLCAndGl0bGUnLCAndHInLCAndHJhY2snLCAndWwnLCAnd2JyJywgJ3htcCddO1xuXG4gIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI2hhcy1hbi1lbGVtZW50LWluLXNjb3BlXG4gIHZhciBpblNjb3BlVGFncyA9IFsnYXBwbGV0JywgJ2NhcHRpb24nLCAnaHRtbCcsICd0YWJsZScsICd0ZCcsICd0aCcsICdtYXJxdWVlJywgJ29iamVjdCcsICd0ZW1wbGF0ZScsXG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjaHRtbC1pbnRlZ3JhdGlvbi1wb2ludFxuICAvLyBUT0RPOiBEaXN0aW5ndWlzaCBieSBuYW1lc3BhY2UgaGVyZSAtLSBmb3IgPHRpdGxlPiwgaW5jbHVkaW5nIGl0IGhlcmVcbiAgLy8gZXJycyBvbiB0aGUgc2lkZSBvZiBmZXdlciB3YXJuaW5nc1xuICAnZm9yZWlnbk9iamVjdCcsICdkZXNjJywgJ3RpdGxlJ107XG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjaGFzLWFuLWVsZW1lbnQtaW4tYnV0dG9uLXNjb3BlXG4gIHZhciBidXR0b25TY29wZVRhZ3MgPSBpblNjb3BlVGFncy5jb25jYXQoWydidXR0b24nXSk7XG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjZ2VuZXJhdGUtaW1wbGllZC1lbmQtdGFnc1xuICB2YXIgaW1wbGllZEVuZFRhZ3MgPSBbJ2RkJywgJ2R0JywgJ2xpJywgJ29wdGlvbicsICdvcHRncm91cCcsICdwJywgJ3JwJywgJ3J0J107XG5cbiAgdmFyIGVtcHR5QW5jZXN0b3JJbmZvID0ge1xuICAgIHBhcmVudFRhZzogbnVsbCxcblxuICAgIGZvcm1UYWc6IG51bGwsXG4gICAgYVRhZ0luU2NvcGU6IG51bGwsXG4gICAgYnV0dG9uVGFnSW5TY29wZTogbnVsbCxcbiAgICBub2JyVGFnSW5TY29wZTogbnVsbCxcbiAgICBwVGFnSW5CdXR0b25TY29wZTogbnVsbCxcblxuICAgIGxpc3RJdGVtVGFnQXV0b2Nsb3Npbmc6IG51bGwsXG4gICAgZGxJdGVtVGFnQXV0b2Nsb3Npbmc6IG51bGxcbiAgfTtcblxuICB2YXIgdXBkYXRlZEFuY2VzdG9ySW5mbyA9IGZ1bmN0aW9uIChvbGRJbmZvLCB0YWcsIGluc3RhbmNlKSB7XG4gICAgdmFyIGFuY2VzdG9ySW5mbyA9IGFzc2lnbih7fSwgb2xkSW5mbyB8fCBlbXB0eUFuY2VzdG9ySW5mbyk7XG4gICAgdmFyIGluZm8gPSB7IHRhZzogdGFnLCBpbnN0YW5jZTogaW5zdGFuY2UgfTtcblxuICAgIGlmIChpblNjb3BlVGFncy5pbmRleE9mKHRhZykgIT09IC0xKSB7XG4gICAgICBhbmNlc3RvckluZm8uYVRhZ0luU2NvcGUgPSBudWxsO1xuICAgICAgYW5jZXN0b3JJbmZvLmJ1dHRvblRhZ0luU2NvcGUgPSBudWxsO1xuICAgICAgYW5jZXN0b3JJbmZvLm5vYnJUYWdJblNjb3BlID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGJ1dHRvblNjb3BlVGFncy5pbmRleE9mKHRhZykgIT09IC0xKSB7XG4gICAgICBhbmNlc3RvckluZm8ucFRhZ0luQnV0dG9uU2NvcGUgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNlZSBydWxlcyBmb3IgJ2xpJywgJ2RkJywgJ2R0JyBzdGFydCB0YWdzIGluXG4gICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWluYm9keVxuICAgIGlmIChzcGVjaWFsVGFncy5pbmRleE9mKHRhZykgIT09IC0xICYmIHRhZyAhPT0gJ2FkZHJlc3MnICYmIHRhZyAhPT0gJ2RpdicgJiYgdGFnICE9PSAncCcpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5saXN0SXRlbVRhZ0F1dG9jbG9zaW5nID0gbnVsbDtcbiAgICAgIGFuY2VzdG9ySW5mby5kbEl0ZW1UYWdBdXRvY2xvc2luZyA9IG51bGw7XG4gICAgfVxuXG4gICAgYW5jZXN0b3JJbmZvLnBhcmVudFRhZyA9IGluZm87XG5cbiAgICBpZiAodGFnID09PSAnZm9ybScpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5mb3JtVGFnID0gaW5mbztcbiAgICB9XG4gICAgaWYgKHRhZyA9PT0gJ2EnKSB7XG4gICAgICBhbmNlc3RvckluZm8uYVRhZ0luU2NvcGUgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnYnV0dG9uJykge1xuICAgICAgYW5jZXN0b3JJbmZvLmJ1dHRvblRhZ0luU2NvcGUgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnbm9icicpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5ub2JyVGFnSW5TY29wZSA9IGluZm87XG4gICAgfVxuICAgIGlmICh0YWcgPT09ICdwJykge1xuICAgICAgYW5jZXN0b3JJbmZvLnBUYWdJbkJ1dHRvblNjb3BlID0gaW5mbztcbiAgICB9XG4gICAgaWYgKHRhZyA9PT0gJ2xpJykge1xuICAgICAgYW5jZXN0b3JJbmZvLmxpc3RJdGVtVGFnQXV0b2Nsb3NpbmcgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnZGQnIHx8IHRhZyA9PT0gJ2R0Jykge1xuICAgICAgYW5jZXN0b3JJbmZvLmRsSXRlbVRhZ0F1dG9jbG9zaW5nID0gaW5mbztcbiAgICB9XG5cbiAgICByZXR1cm4gYW5jZXN0b3JJbmZvO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXJcbiAgICovXG4gIHZhciBpc1RhZ1ZhbGlkV2l0aFBhcmVudCA9IGZ1bmN0aW9uICh0YWcsIHBhcmVudFRhZykge1xuICAgIC8vIEZpcnN0LCBsZXQncyBjaGVjayBpZiB3ZSdyZSBpbiBhbiB1bnVzdWFsIHBhcnNpbmcgbW9kZS4uLlxuICAgIHN3aXRjaCAocGFyZW50VGFnKSB7XG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5zZWxlY3RcbiAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdvcHRpb24nIHx8IHRhZyA9PT0gJ29wdGdyb3VwJyB8fCB0YWcgPT09ICcjdGV4dCc7XG4gICAgICBjYXNlICdvcHRncm91cCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdvcHRpb24nIHx8IHRhZyA9PT0gJyN0ZXh0JztcbiAgICAgIC8vIFN0cmljdGx5IHNwZWFraW5nLCBzZWVpbmcgYW4gPG9wdGlvbj4gZG9lc24ndCBtZWFuIHdlJ3JlIGluIGEgPHNlbGVjdD5cbiAgICAgIC8vIGJ1dFxuICAgICAgY2FzZSAnb3B0aW9uJzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJyN0ZXh0JztcblxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWludGRcbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmNhcHRpb25cbiAgICAgIC8vIE5vIHNwZWNpYWwgYmVoYXZpb3Igc2luY2UgdGhlc2UgcnVsZXMgZmFsbCBiYWNrIHRvIFwiaW4gYm9keVwiIG1vZGUgZm9yXG4gICAgICAvLyBhbGwgZXhjZXB0IHNwZWNpYWwgdGFibGUgbm9kZXMgd2hpY2ggY2F1c2UgYmFkIHBhcnNpbmcgYmVoYXZpb3IgYW55d2F5LlxuXG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW50clxuICAgICAgY2FzZSAndHInOlxuICAgICAgICByZXR1cm4gdGFnID09PSAndGgnIHx8IHRhZyA9PT0gJ3RkJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnRib2R5XG4gICAgICBjYXNlICd0Ym9keSc6XG4gICAgICBjYXNlICd0aGVhZCc6XG4gICAgICBjYXNlICd0Zm9vdCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICd0cicgfHwgdGFnID09PSAnc3R5bGUnIHx8IHRhZyA9PT0gJ3NjcmlwdCcgfHwgdGFnID09PSAndGVtcGxhdGUnO1xuXG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5jb2xncm91cFxuICAgICAgY2FzZSAnY29sZ3JvdXAnOlxuICAgICAgICByZXR1cm4gdGFnID09PSAnY29sJyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnRhYmxlXG4gICAgICBjYXNlICd0YWJsZSc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdjYXB0aW9uJyB8fCB0YWcgPT09ICdjb2xncm91cCcgfHwgdGFnID09PSAndGJvZHknIHx8IHRhZyA9PT0gJ3Rmb290JyB8fCB0YWcgPT09ICd0aGVhZCcgfHwgdGFnID09PSAnc3R5bGUnIHx8IHRhZyA9PT0gJ3NjcmlwdCcgfHwgdGFnID09PSAndGVtcGxhdGUnO1xuXG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5oZWFkXG4gICAgICBjYXNlICdoZWFkJzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ2Jhc2UnIHx8IHRhZyA9PT0gJ2Jhc2Vmb250JyB8fCB0YWcgPT09ICdiZ3NvdW5kJyB8fCB0YWcgPT09ICdsaW5rJyB8fCB0YWcgPT09ICdtZXRhJyB8fCB0YWcgPT09ICd0aXRsZScgfHwgdGFnID09PSAnbm9zY3JpcHQnIHx8IHRhZyA9PT0gJ25vZnJhbWVzJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3NlbWFudGljcy5odG1sI3RoZS1odG1sLWVsZW1lbnRcbiAgICAgIGNhc2UgJ2h0bWwnOlxuICAgICAgICByZXR1cm4gdGFnID09PSAnaGVhZCcgfHwgdGFnID09PSAnYm9keSc7XG4gICAgfVxuXG4gICAgLy8gUHJvYmFibHkgaW4gdGhlIFwiaW4gYm9keVwiIHBhcnNpbmcgbW9kZSwgc28gd2Ugb3V0bGF3IG9ubHkgdGFnIGNvbWJvc1xuICAgIC8vIHdoZXJlIHRoZSBwYXJzaW5nIHJ1bGVzIGNhdXNlIGltcGxpY2l0IG9wZW5zIG9yIGNsb3NlcyB0byBiZSBhZGRlZC5cbiAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5ib2R5XG4gICAgc3dpdGNoICh0YWcpIHtcbiAgICAgIGNhc2UgJ2gxJzpcbiAgICAgIGNhc2UgJ2gyJzpcbiAgICAgIGNhc2UgJ2gzJzpcbiAgICAgIGNhc2UgJ2g0JzpcbiAgICAgIGNhc2UgJ2g1JzpcbiAgICAgIGNhc2UgJ2g2JzpcbiAgICAgICAgcmV0dXJuIHBhcmVudFRhZyAhPT0gJ2gxJyAmJiBwYXJlbnRUYWcgIT09ICdoMicgJiYgcGFyZW50VGFnICE9PSAnaDMnICYmIHBhcmVudFRhZyAhPT0gJ2g0JyAmJiBwYXJlbnRUYWcgIT09ICdoNScgJiYgcGFyZW50VGFnICE9PSAnaDYnO1xuXG4gICAgICBjYXNlICdycCc6XG4gICAgICBjYXNlICdydCc6XG4gICAgICAgIHJldHVybiBpbXBsaWVkRW5kVGFncy5pbmRleE9mKHBhcmVudFRhZykgPT09IC0xO1xuXG4gICAgICBjYXNlICdjYXB0aW9uJzpcbiAgICAgIGNhc2UgJ2NvbCc6XG4gICAgICBjYXNlICdjb2xncm91cCc6XG4gICAgICBjYXNlICdmcmFtZSc6XG4gICAgICBjYXNlICdoZWFkJzpcbiAgICAgIGNhc2UgJ3Rib2R5JzpcbiAgICAgIGNhc2UgJ3RkJzpcbiAgICAgIGNhc2UgJ3Rmb290JzpcbiAgICAgIGNhc2UgJ3RoJzpcbiAgICAgIGNhc2UgJ3RoZWFkJzpcbiAgICAgIGNhc2UgJ3RyJzpcbiAgICAgICAgLy8gVGhlc2UgdGFncyBhcmUgb25seSB2YWxpZCB3aXRoIGEgZmV3IHBhcmVudHMgdGhhdCBoYXZlIHNwZWNpYWwgY2hpbGRcbiAgICAgICAgLy8gcGFyc2luZyBydWxlcyAtLSBpZiB3ZSdyZSBkb3duIGhlcmUsIHRoZW4gbm9uZSBvZiB0aG9zZSBtYXRjaGVkIGFuZFxuICAgICAgICAvLyBzbyB3ZSBhbGxvdyBpdCBvbmx5IGlmIHdlIGRvbid0IGtub3cgd2hhdCB0aGUgcGFyZW50IGlzLCBhcyBhbGwgb3RoZXJcbiAgICAgICAgLy8gY2FzZXMgYXJlIGludmFsaWQuXG4gICAgICAgIHJldHVybiBwYXJlbnRUYWcgPT0gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyXG4gICAqL1xuICB2YXIgZmluZEludmFsaWRBbmNlc3RvckZvclRhZyA9IGZ1bmN0aW9uICh0YWcsIGFuY2VzdG9ySW5mbykge1xuICAgIHN3aXRjaCAodGFnKSB7XG4gICAgICBjYXNlICdhZGRyZXNzJzpcbiAgICAgIGNhc2UgJ2FydGljbGUnOlxuICAgICAgY2FzZSAnYXNpZGUnOlxuICAgICAgY2FzZSAnYmxvY2txdW90ZSc6XG4gICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgY2FzZSAnZGV0YWlscyc6XG4gICAgICBjYXNlICdkaWFsb2cnOlxuICAgICAgY2FzZSAnZGlyJzpcbiAgICAgIGNhc2UgJ2Rpdic6XG4gICAgICBjYXNlICdkbCc6XG4gICAgICBjYXNlICdmaWVsZHNldCc6XG4gICAgICBjYXNlICdmaWdjYXB0aW9uJzpcbiAgICAgIGNhc2UgJ2ZpZ3VyZSc6XG4gICAgICBjYXNlICdmb290ZXInOlxuICAgICAgY2FzZSAnaGVhZGVyJzpcbiAgICAgIGNhc2UgJ2hncm91cCc6XG4gICAgICBjYXNlICdtYWluJzpcbiAgICAgIGNhc2UgJ21lbnUnOlxuICAgICAgY2FzZSAnbmF2JzpcbiAgICAgIGNhc2UgJ29sJzpcbiAgICAgIGNhc2UgJ3AnOlxuICAgICAgY2FzZSAnc2VjdGlvbic6XG4gICAgICBjYXNlICdzdW1tYXJ5JzpcbiAgICAgIGNhc2UgJ3VsJzpcblxuICAgICAgY2FzZSAncHJlJzpcbiAgICAgIGNhc2UgJ2xpc3RpbmcnOlxuXG4gICAgICBjYXNlICd0YWJsZSc6XG5cbiAgICAgIGNhc2UgJ2hyJzpcblxuICAgICAgY2FzZSAneG1wJzpcblxuICAgICAgY2FzZSAnaDEnOlxuICAgICAgY2FzZSAnaDInOlxuICAgICAgY2FzZSAnaDMnOlxuICAgICAgY2FzZSAnaDQnOlxuICAgICAgY2FzZSAnaDUnOlxuICAgICAgY2FzZSAnaDYnOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLnBUYWdJbkJ1dHRvblNjb3BlO1xuXG4gICAgICBjYXNlICdmb3JtJzpcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5mb3JtVGFnIHx8IGFuY2VzdG9ySW5mby5wVGFnSW5CdXR0b25TY29wZTtcblxuICAgICAgY2FzZSAnbGknOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmxpc3RJdGVtVGFnQXV0b2Nsb3Npbmc7XG5cbiAgICAgIGNhc2UgJ2RkJzpcbiAgICAgIGNhc2UgJ2R0JzpcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5kbEl0ZW1UYWdBdXRvY2xvc2luZztcblxuICAgICAgY2FzZSAnYnV0dG9uJzpcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5idXR0b25UYWdJblNjb3BlO1xuXG4gICAgICBjYXNlICdhJzpcbiAgICAgICAgLy8gU3BlYyBzYXlzIHNvbWV0aGluZyBhYm91dCBzdG9yaW5nIGEgbGlzdCBvZiBtYXJrZXJzLCBidXQgaXQgc291bmRzXG4gICAgICAgIC8vIGVxdWl2YWxlbnQgdG8gdGhpcyBjaGVjay5cbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZTtcblxuICAgICAgY2FzZSAnbm9icic6XG4gICAgICAgIHJldHVybiBhbmNlc3RvckluZm8ubm9iclRhZ0luU2NvcGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgUmVhY3RDb21wb3NpdGVDb21wb25lbnQgaW5zdGFuY2UsIHJldHVybiBhIGxpc3Qgb2YgaXRzIHJlY3Vyc2l2ZVxuICAgKiBvd25lcnMsIHN0YXJ0aW5nIGF0IHRoZSByb290IGFuZCBlbmRpbmcgd2l0aCB0aGUgaW5zdGFuY2UgaXRzZWxmLlxuICAgKi9cbiAgdmFyIGZpbmRPd25lclN0YWNrID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgaWYgKCFpbnN0YW5jZSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHZhciBzdGFjayA9IFtdO1xuICAgIC8qZXNsaW50LWRpc2FibGUgc3BhY2UtYWZ0ZXIta2V5d29yZHMgKi9cbiAgICBkbyB7XG4gICAgICAvKmVzbGludC1lbmFibGUgc3BhY2UtYWZ0ZXIta2V5d29yZHMgKi9cbiAgICAgIHN0YWNrLnB1c2goaW5zdGFuY2UpO1xuICAgIH0gd2hpbGUgKGluc3RhbmNlID0gaW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50Ll9vd25lcik7XG4gICAgc3RhY2sucmV2ZXJzZSgpO1xuICAgIHJldHVybiBzdGFjaztcbiAgfTtcblxuICB2YXIgZGlkV2FybiA9IHt9O1xuXG4gIHZhbGlkYXRlRE9NTmVzdGluZyA9IGZ1bmN0aW9uIChjaGlsZFRhZywgY2hpbGRJbnN0YW5jZSwgYW5jZXN0b3JJbmZvKSB7XG4gICAgYW5jZXN0b3JJbmZvID0gYW5jZXN0b3JJbmZvIHx8IGVtcHR5QW5jZXN0b3JJbmZvO1xuICAgIHZhciBwYXJlbnRJbmZvID0gYW5jZXN0b3JJbmZvLnBhcmVudFRhZztcbiAgICB2YXIgcGFyZW50VGFnID0gcGFyZW50SW5mbyAmJiBwYXJlbnRJbmZvLnRhZztcblxuICAgIHZhciBpbnZhbGlkUGFyZW50ID0gaXNUYWdWYWxpZFdpdGhQYXJlbnQoY2hpbGRUYWcsIHBhcmVudFRhZykgPyBudWxsIDogcGFyZW50SW5mbztcbiAgICB2YXIgaW52YWxpZEFuY2VzdG9yID0gaW52YWxpZFBhcmVudCA/IG51bGwgOiBmaW5kSW52YWxpZEFuY2VzdG9yRm9yVGFnKGNoaWxkVGFnLCBhbmNlc3RvckluZm8pO1xuICAgIHZhciBwcm9ibGVtYXRpYyA9IGludmFsaWRQYXJlbnQgfHwgaW52YWxpZEFuY2VzdG9yO1xuXG4gICAgaWYgKHByb2JsZW1hdGljKSB7XG4gICAgICB2YXIgYW5jZXN0b3JUYWcgPSBwcm9ibGVtYXRpYy50YWc7XG4gICAgICB2YXIgYW5jZXN0b3JJbnN0YW5jZSA9IHByb2JsZW1hdGljLmluc3RhbmNlO1xuXG4gICAgICB2YXIgY2hpbGRPd25lciA9IGNoaWxkSW5zdGFuY2UgJiYgY2hpbGRJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuICAgICAgdmFyIGFuY2VzdG9yT3duZXIgPSBhbmNlc3Rvckluc3RhbmNlICYmIGFuY2VzdG9ySW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcblxuICAgICAgdmFyIGNoaWxkT3duZXJzID0gZmluZE93bmVyU3RhY2soY2hpbGRPd25lcik7XG4gICAgICB2YXIgYW5jZXN0b3JPd25lcnMgPSBmaW5kT3duZXJTdGFjayhhbmNlc3Rvck93bmVyKTtcblxuICAgICAgdmFyIG1pblN0YWNrTGVuID0gTWF0aC5taW4oY2hpbGRPd25lcnMubGVuZ3RoLCBhbmNlc3Rvck93bmVycy5sZW5ndGgpO1xuICAgICAgdmFyIGk7XG5cbiAgICAgIHZhciBkZWVwZXN0Q29tbW9uID0gLTE7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbWluU3RhY2tMZW47IGkrKykge1xuICAgICAgICBpZiAoY2hpbGRPd25lcnNbaV0gPT09IGFuY2VzdG9yT3duZXJzW2ldKSB7XG4gICAgICAgICAgZGVlcGVzdENvbW1vbiA9IGk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIFVOS05PV04gPSAnKHVua25vd24pJztcbiAgICAgIHZhciBjaGlsZE93bmVyTmFtZXMgPSBjaGlsZE93bmVycy5zbGljZShkZWVwZXN0Q29tbW9uICsgMSkubWFwKGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgICAgIHJldHVybiBpbnN0LmdldE5hbWUoKSB8fCBVTktOT1dOO1xuICAgICAgfSk7XG4gICAgICB2YXIgYW5jZXN0b3JPd25lck5hbWVzID0gYW5jZXN0b3JPd25lcnMuc2xpY2UoZGVlcGVzdENvbW1vbiArIDEpLm1hcChmdW5jdGlvbiAoaW5zdCkge1xuICAgICAgICByZXR1cm4gaW5zdC5nZXROYW1lKCkgfHwgVU5LTk9XTjtcbiAgICAgIH0pO1xuICAgICAgdmFyIG93bmVySW5mbyA9IFtdLmNvbmNhdChcbiAgICAgIC8vIElmIHRoZSBwYXJlbnQgYW5kIGNoaWxkIGluc3RhbmNlcyBoYXZlIGEgY29tbW9uIG93bmVyIGFuY2VzdG9yLCBzdGFydFxuICAgICAgLy8gd2l0aCB0aGF0IC0tIG90aGVyd2lzZSB3ZSBqdXN0IHN0YXJ0IHdpdGggdGhlIHBhcmVudCdzIG93bmVycy5cbiAgICAgIGRlZXBlc3RDb21tb24gIT09IC0xID8gY2hpbGRPd25lcnNbZGVlcGVzdENvbW1vbl0uZ2V0TmFtZSgpIHx8IFVOS05PV04gOiBbXSwgYW5jZXN0b3JPd25lck5hbWVzLCBhbmNlc3RvclRhZyxcbiAgICAgIC8vIElmIHdlJ3JlIHdhcm5pbmcgYWJvdXQgYW4gaW52YWxpZCAobm9uLXBhcmVudCkgYW5jZXN0cnksIGFkZCAnLi4uJ1xuICAgICAgaW52YWxpZEFuY2VzdG9yID8gWycuLi4nXSA6IFtdLCBjaGlsZE93bmVyTmFtZXMsIGNoaWxkVGFnKS5qb2luKCcgPiAnKTtcblxuICAgICAgdmFyIHdhcm5LZXkgPSAhIWludmFsaWRQYXJlbnQgKyAnfCcgKyBjaGlsZFRhZyArICd8JyArIGFuY2VzdG9yVGFnICsgJ3wnICsgb3duZXJJbmZvO1xuICAgICAgaWYgKGRpZFdhcm5bd2FybktleV0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZGlkV2Fyblt3YXJuS2V5XSA9IHRydWU7XG5cbiAgICAgIGlmIChpbnZhbGlkUGFyZW50KSB7XG4gICAgICAgIHZhciBpbmZvID0gJyc7XG4gICAgICAgIGlmIChhbmNlc3RvclRhZyA9PT0gJ3RhYmxlJyAmJiBjaGlsZFRhZyA9PT0gJ3RyJykge1xuICAgICAgICAgIGluZm8gKz0gJyBBZGQgYSA8dGJvZHk+IHRvIHlvdXIgY29kZSB0byBtYXRjaCB0aGUgRE9NIHRyZWUgZ2VuZXJhdGVkIGJ5ICcgKyAndGhlIGJyb3dzZXIuJztcbiAgICAgICAgfVxuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ3ZhbGlkYXRlRE9NTmVzdGluZyguLi4pOiA8JXM+IGNhbm5vdCBhcHBlYXIgYXMgYSBjaGlsZCBvZiA8JXM+LiAnICsgJ1NlZSAlcy4lcycsIGNoaWxkVGFnLCBhbmNlc3RvclRhZywgb3duZXJJbmZvLCBpbmZvKSA6IHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAndmFsaWRhdGVET01OZXN0aW5nKC4uLik6IDwlcz4gY2Fubm90IGFwcGVhciBhcyBhIGRlc2NlbmRhbnQgb2YgJyArICc8JXM+LiBTZWUgJXMuJywgY2hpbGRUYWcsIGFuY2VzdG9yVGFnLCBvd25lckluZm8pIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleSA9ICdfX3ZhbGlkYXRlRE9NTmVzdGluZ19hbmNlc3RvckluZm8kJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO1xuXG4gIHZhbGlkYXRlRE9NTmVzdGluZy51cGRhdGVkQW5jZXN0b3JJbmZvID0gdXBkYXRlZEFuY2VzdG9ySW5mbztcblxuICAvLyBGb3IgdGVzdGluZ1xuICB2YWxpZGF0ZURPTU5lc3RpbmcuaXNUYWdWYWxpZEluQ29udGV4dCA9IGZ1bmN0aW9uICh0YWcsIGFuY2VzdG9ySW5mbykge1xuICAgIGFuY2VzdG9ySW5mbyA9IGFuY2VzdG9ySW5mbyB8fCBlbXB0eUFuY2VzdG9ySW5mbztcbiAgICB2YXIgcGFyZW50SW5mbyA9IGFuY2VzdG9ySW5mby5wYXJlbnRUYWc7XG4gICAgdmFyIHBhcmVudFRhZyA9IHBhcmVudEluZm8gJiYgcGFyZW50SW5mby50YWc7XG4gICAgcmV0dXJuIGlzVGFnVmFsaWRXaXRoUGFyZW50KHRhZywgcGFyZW50VGFnKSAmJiAhZmluZEludmFsaWRBbmNlc3RvckZvclRhZyh0YWcsIGFuY2VzdG9ySW5mbyk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdmFsaWRhdGVET01OZXN0aW5nOyIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9SZWFjdCcpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBzaGFsbG93XG5cbmZ1bmN0aW9uIHNoYWxsb3coYSwgYiwgY29tcGFyZSkge1xuICB2YXIgYUlzQXJyYXkgPSBBcnJheS5pc0FycmF5KGEpXG4gIHZhciBiSXNBcnJheSA9IEFycmF5LmlzQXJyYXkoYilcblxuICBpZiAoYUlzQXJyYXkgIT09IGJJc0FycmF5KSByZXR1cm4gZmFsc2VcblxuICB2YXIgYVR5cGVvZiA9IHR5cGVvZiBhXG4gIHZhciBiVHlwZW9mID0gdHlwZW9mIGJcblxuICBpZiAoYVR5cGVvZiAhPT0gYlR5cGVvZikgcmV0dXJuIGZhbHNlXG4gIGlmIChmbGF0KGFUeXBlb2YpKSByZXR1cm4gY29tcGFyZVxuICAgID8gY29tcGFyZShhLCBiKVxuICAgIDogYSA9PT0gYlxuXG4gIHJldHVybiBhSXNBcnJheVxuICAgID8gc2hhbGxvd0FycmF5KGEsIGIsIGNvbXBhcmUpXG4gICAgOiBzaGFsbG93T2JqZWN0KGEsIGIsIGNvbXBhcmUpXG59XG5cbmZ1bmN0aW9uIHNoYWxsb3dBcnJheShhLCBiLCBjb21wYXJlKSB7XG4gIHZhciBsID0gYS5sZW5ndGhcbiAgaWYgKGwgIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2VcblxuICBpZiAoY29tcGFyZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKVxuICAgICAgaWYgKCFjb21wYXJlKGFbaV0sIGJbaV0pKSByZXR1cm4gZmFsc2VcbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKGFbaV0gIT09IGJbaV0pIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbmZ1bmN0aW9uIHNoYWxsb3dPYmplY3QoYSwgYiwgY29tcGFyZSkge1xuICB2YXIga2EgPSAwXG4gIHZhciBrYiA9IDBcblxuICBpZiAoY29tcGFyZSkge1xuICAgIGZvciAodmFyIGtleSBpbiBhKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGEuaGFzT3duUHJvcGVydHkoa2V5KSAmJlxuICAgICAgICAhY29tcGFyZShhW2tleV0sIGJba2V5XSlcbiAgICAgICkgcmV0dXJuIGZhbHNlXG5cbiAgICAgIGthKytcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIga2V5IGluIGEpIHtcbiAgICAgIGlmIChcbiAgICAgICAgYS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmXG4gICAgICAgIGFba2V5XSAhPT0gYltrZXldXG4gICAgICApIHJldHVybiBmYWxzZVxuXG4gICAgICBrYSsrXG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIga2V5IGluIGIpIHtcbiAgICBpZiAoYi5oYXNPd25Qcm9wZXJ0eShrZXkpKSBrYisrXG4gIH1cblxuICByZXR1cm4ga2EgPT09IGtiXG59XG5cbmZ1bmN0aW9uIGZsYXQodHlwZSkge1xuICByZXR1cm4gKFxuICAgIHR5cGUgIT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlICE9PSAnb2JqZWN0J1xuICApXG59XG4iLCIvLyAgICAgVW5kZXJzY29yZS5qcyAxLjkuMVxuLy8gICAgIGh0dHA6Ly91bmRlcnNjb3JlanMub3JnXG4vLyAgICAgKGMpIDIwMDktMjAxOCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbihmdW5jdGlvbigpIHtcblxuICAvLyBCYXNlbGluZSBzZXR1cFxuICAvLyAtLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIChgc2VsZmApIGluIHRoZSBicm93c2VyLCBgZ2xvYmFsYFxuICAvLyBvbiB0aGUgc2VydmVyLCBvciBgdGhpc2AgaW4gc29tZSB2aXJ0dWFsIG1hY2hpbmVzLiBXZSB1c2UgYHNlbGZgXG4gIC8vIGluc3RlYWQgb2YgYHdpbmRvd2AgZm9yIGBXZWJXb3JrZXJgIHN1cHBvcnQuXG4gIHZhciByb290ID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmICYmIHNlbGYgfHxcbiAgICAgICAgICAgIHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsLmdsb2JhbCA9PT0gZ2xvYmFsICYmIGdsb2JhbCB8fFxuICAgICAgICAgICAgdGhpcyB8fFxuICAgICAgICAgICAge307XG5cbiAgLy8gU2F2ZSB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGBfYCB2YXJpYWJsZS5cbiAgdmFyIHByZXZpb3VzVW5kZXJzY29yZSA9IHJvb3QuXztcblxuICAvLyBTYXZlIGJ5dGVzIGluIHRoZSBtaW5pZmllZCAoYnV0IG5vdCBnemlwcGVkKSB2ZXJzaW9uOlxuICB2YXIgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSwgT2JqUHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuICB2YXIgU3ltYm9sUHJvdG8gPSB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyA/IFN5bWJvbC5wcm90b3R5cGUgOiBudWxsO1xuXG4gIC8vIENyZWF0ZSBxdWljayByZWZlcmVuY2UgdmFyaWFibGVzIGZvciBzcGVlZCBhY2Nlc3MgdG8gY29yZSBwcm90b3R5cGVzLlxuICB2YXIgcHVzaCA9IEFycmF5UHJvdG8ucHVzaCxcbiAgICAgIHNsaWNlID0gQXJyYXlQcm90by5zbGljZSxcbiAgICAgIHRvU3RyaW5nID0gT2JqUHJvdG8udG9TdHJpbmcsXG4gICAgICBoYXNPd25Qcm9wZXJ0eSA9IE9ialByb3RvLmhhc093blByb3BlcnR5O1xuXG4gIC8vIEFsbCAqKkVDTUFTY3JpcHQgNSoqIG5hdGl2ZSBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbnMgdGhhdCB3ZSBob3BlIHRvIHVzZVxuICAvLyBhcmUgZGVjbGFyZWQgaGVyZS5cbiAgdmFyIG5hdGl2ZUlzQXJyYXkgPSBBcnJheS5pc0FycmF5LFxuICAgICAgbmF0aXZlS2V5cyA9IE9iamVjdC5rZXlzLFxuICAgICAgbmF0aXZlQ3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcblxuICAvLyBOYWtlZCBmdW5jdGlvbiByZWZlcmVuY2UgZm9yIHN1cnJvZ2F0ZS1wcm90b3R5cGUtc3dhcHBpbmcuXG4gIHZhciBDdG9yID0gZnVuY3Rpb24oKXt9O1xuXG4gIC8vIENyZWF0ZSBhIHNhZmUgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgdXNlIGJlbG93LlxuICB2YXIgXyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogaW5zdGFuY2VvZiBfKSByZXR1cm4gb2JqO1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBfKSkgcmV0dXJuIG5ldyBfKG9iaik7XG4gICAgdGhpcy5fd3JhcHBlZCA9IG9iajtcbiAgfTtcblxuICAvLyBFeHBvcnQgdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciAqKk5vZGUuanMqKiwgd2l0aFxuICAvLyBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBmb3IgdGhlaXIgb2xkIG1vZHVsZSBBUEkuIElmIHdlJ3JlIGluXG4gIC8vIHRoZSBicm93c2VyLCBhZGQgYF9gIGFzIGEgZ2xvYmFsIG9iamVjdC5cbiAgLy8gKGBub2RlVHlwZWAgaXMgY2hlY2tlZCB0byBlbnN1cmUgdGhhdCBgbW9kdWxlYFxuICAvLyBhbmQgYGV4cG9ydHNgIGFyZSBub3QgSFRNTCBlbGVtZW50cy4pXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPSAndW5kZWZpbmVkJyAmJiAhZXhwb3J0cy5ub2RlVHlwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9ICd1bmRlZmluZWQnICYmICFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF87XG4gICAgfVxuICAgIGV4cG9ydHMuXyA9IF87XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5fID0gXztcbiAgfVxuXG4gIC8vIEN1cnJlbnQgdmVyc2lvbi5cbiAgXy5WRVJTSU9OID0gJzEuOS4xJztcblxuICAvLyBJbnRlcm5hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gZWZmaWNpZW50IChmb3IgY3VycmVudCBlbmdpbmVzKSB2ZXJzaW9uXG4gIC8vIG9mIHRoZSBwYXNzZWQtaW4gY2FsbGJhY2ssIHRvIGJlIHJlcGVhdGVkbHkgYXBwbGllZCBpbiBvdGhlciBVbmRlcnNjb3JlXG4gIC8vIGZ1bmN0aW9ucy5cbiAgdmFyIG9wdGltaXplQ2IgPSBmdW5jdGlvbihmdW5jLCBjb250ZXh0LCBhcmdDb3VudCkge1xuICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHJldHVybiBmdW5jO1xuICAgIHN3aXRjaCAoYXJnQ291bnQgPT0gbnVsbCA/IDMgOiBhcmdDb3VudCkge1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgLy8gVGhlIDItYXJndW1lbnQgY2FzZSBpcyBvbWl0dGVkIGJlY2F1c2Ugd2XigJlyZSBub3QgdXNpbmcgaXQuXG4gICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgYnVpbHRpbkl0ZXJhdGVlO1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGNhbGxiYWNrcyB0aGF0IGNhbiBiZSBhcHBsaWVkIHRvIGVhY2hcbiAgLy8gZWxlbWVudCBpbiBhIGNvbGxlY3Rpb24sIHJldHVybmluZyB0aGUgZGVzaXJlZCByZXN1bHQg4oCUIGVpdGhlciBgaWRlbnRpdHlgLFxuICAvLyBhbiBhcmJpdHJhcnkgY2FsbGJhY2ssIGEgcHJvcGVydHkgbWF0Y2hlciwgb3IgYSBwcm9wZXJ0eSBhY2Nlc3Nvci5cbiAgdmFyIGNiID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQsIGFyZ0NvdW50KSB7XG4gICAgaWYgKF8uaXRlcmF0ZWUgIT09IGJ1aWx0aW5JdGVyYXRlZSkgcmV0dXJuIF8uaXRlcmF0ZWUodmFsdWUsIGNvbnRleHQpO1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gXy5pZGVudGl0eTtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKHZhbHVlKSkgcmV0dXJuIG9wdGltaXplQ2IodmFsdWUsIGNvbnRleHQsIGFyZ0NvdW50KTtcbiAgICBpZiAoXy5pc09iamVjdCh2YWx1ZSkgJiYgIV8uaXNBcnJheSh2YWx1ZSkpIHJldHVybiBfLm1hdGNoZXIodmFsdWUpO1xuICAgIHJldHVybiBfLnByb3BlcnR5KHZhbHVlKTtcbiAgfTtcblxuICAvLyBFeHRlcm5hbCB3cmFwcGVyIGZvciBvdXIgY2FsbGJhY2sgZ2VuZXJhdG9yLiBVc2VycyBtYXkgY3VzdG9taXplXG4gIC8vIGBfLml0ZXJhdGVlYCBpZiB0aGV5IHdhbnQgYWRkaXRpb25hbCBwcmVkaWNhdGUvaXRlcmF0ZWUgc2hvcnRoYW5kIHN0eWxlcy5cbiAgLy8gVGhpcyBhYnN0cmFjdGlvbiBoaWRlcyB0aGUgaW50ZXJuYWwtb25seSBhcmdDb3VudCBhcmd1bWVudC5cbiAgXy5pdGVyYXRlZSA9IGJ1aWx0aW5JdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGNiKHZhbHVlLCBjb250ZXh0LCBJbmZpbml0eSk7XG4gIH07XG5cbiAgLy8gU29tZSBmdW5jdGlvbnMgdGFrZSBhIHZhcmlhYmxlIG51bWJlciBvZiBhcmd1bWVudHMsIG9yIGEgZmV3IGV4cGVjdGVkXG4gIC8vIGFyZ3VtZW50cyBhdCB0aGUgYmVnaW5uaW5nIGFuZCB0aGVuIGEgdmFyaWFibGUgbnVtYmVyIG9mIHZhbHVlcyB0byBvcGVyYXRlXG4gIC8vIG9uLiBUaGlzIGhlbHBlciBhY2N1bXVsYXRlcyBhbGwgcmVtYWluaW5nIGFyZ3VtZW50cyBwYXN0IHRoZSBmdW5jdGlvbuKAmXNcbiAgLy8gYXJndW1lbnQgbGVuZ3RoIChvciBhbiBleHBsaWNpdCBgc3RhcnRJbmRleGApLCBpbnRvIGFuIGFycmF5IHRoYXQgYmVjb21lc1xuICAvLyB0aGUgbGFzdCBhcmd1bWVudC4gU2ltaWxhciB0byBFUzbigJlzIFwicmVzdCBwYXJhbWV0ZXJcIi5cbiAgdmFyIHJlc3RBcmd1bWVudHMgPSBmdW5jdGlvbihmdW5jLCBzdGFydEluZGV4KSB7XG4gICAgc3RhcnRJbmRleCA9IHN0YXJ0SW5kZXggPT0gbnVsbCA/IGZ1bmMubGVuZ3RoIC0gMSA6ICtzdGFydEluZGV4O1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsZW5ndGggPSBNYXRoLm1heChhcmd1bWVudHMubGVuZ3RoIC0gc3RhcnRJbmRleCwgMCksXG4gICAgICAgICAgcmVzdCA9IEFycmF5KGxlbmd0aCksXG4gICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgZm9yICg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHJlc3RbaW5kZXhdID0gYXJndW1lbnRzW2luZGV4ICsgc3RhcnRJbmRleF07XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIHJlc3QpO1xuICAgICAgICBjYXNlIDE6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJndW1lbnRzWzBdLCByZXN0KTtcbiAgICAgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdLCByZXN0KTtcbiAgICAgIH1cbiAgICAgIHZhciBhcmdzID0gQXJyYXkoc3RhcnRJbmRleCArIDEpO1xuICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgc3RhcnRJbmRleDsgaW5kZXgrKykge1xuICAgICAgICBhcmdzW2luZGV4XSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICB9XG4gICAgICBhcmdzW3N0YXJ0SW5kZXhdID0gcmVzdDtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGEgbmV3IG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gYW5vdGhlci5cbiAgdmFyIGJhc2VDcmVhdGUgPSBmdW5jdGlvbihwcm90b3R5cGUpIHtcbiAgICBpZiAoIV8uaXNPYmplY3QocHJvdG90eXBlKSkgcmV0dXJuIHt9O1xuICAgIGlmIChuYXRpdmVDcmVhdGUpIHJldHVybiBuYXRpdmVDcmVhdGUocHJvdG90eXBlKTtcbiAgICBDdG9yLnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IEN0b3I7XG4gICAgQ3Rvci5wcm90b3R5cGUgPSBudWxsO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgdmFyIHNoYWxsb3dQcm9wZXJ0eSA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogPT0gbnVsbCA/IHZvaWQgMCA6IG9ialtrZXldO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGhhcyA9IGZ1bmN0aW9uKG9iaiwgcGF0aCkge1xuICAgIHJldHVybiBvYmogIT0gbnVsbCAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcGF0aCk7XG4gIH1cblxuICB2YXIgZGVlcEdldCA9IGZ1bmN0aW9uKG9iaiwgcGF0aCkge1xuICAgIHZhciBsZW5ndGggPSBwYXRoLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAob2JqID09IG51bGwpIHJldHVybiB2b2lkIDA7XG4gICAgICBvYmogPSBvYmpbcGF0aFtpXV07XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGggPyBvYmogOiB2b2lkIDA7XG4gIH07XG5cbiAgLy8gSGVscGVyIGZvciBjb2xsZWN0aW9uIG1ldGhvZHMgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBjb2xsZWN0aW9uXG4gIC8vIHNob3VsZCBiZSBpdGVyYXRlZCBhcyBhbiBhcnJheSBvciBhcyBhbiBvYmplY3QuXG4gIC8vIFJlbGF0ZWQ6IGh0dHA6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoXG4gIC8vIEF2b2lkcyBhIHZlcnkgbmFzdHkgaU9TIDggSklUIGJ1ZyBvbiBBUk0tNjQuICMyMDk0XG4gIHZhciBNQVhfQVJSQVlfSU5ERVggPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuICB2YXIgZ2V0TGVuZ3RoID0gc2hhbGxvd1Byb3BlcnR5KCdsZW5ndGgnKTtcbiAgdmFyIGlzQXJyYXlMaWtlID0gZnVuY3Rpb24oY29sbGVjdGlvbikge1xuICAgIHZhciBsZW5ndGggPSBnZXRMZW5ndGgoY29sbGVjdGlvbik7XG4gICAgcmV0dXJuIHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgJiYgbGVuZ3RoID49IDAgJiYgbGVuZ3RoIDw9IE1BWF9BUlJBWV9JTkRFWDtcbiAgfTtcblxuICAvLyBDb2xsZWN0aW9uIEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFRoZSBjb3JuZXJzdG9uZSwgYW4gYGVhY2hgIGltcGxlbWVudGF0aW9uLCBha2EgYGZvckVhY2hgLlxuICAvLyBIYW5kbGVzIHJhdyBvYmplY3RzIGluIGFkZGl0aW9uIHRvIGFycmF5LWxpa2VzLiBUcmVhdHMgYWxsXG4gIC8vIHNwYXJzZSBhcnJheS1saWtlcyBhcyBpZiB0aGV5IHdlcmUgZGVuc2UuXG4gIF8uZWFjaCA9IF8uZm9yRWFjaCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciBpLCBsZW5ndGg7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcbiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYXRlZShvYmpbaV0sIGksIG9iaik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGl0ZXJhdGVlKG9ialtrZXlzW2ldXSwga2V5c1tpXSwgb2JqKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIHJlc3VsdHMgb2YgYXBwbHlpbmcgdGhlIGl0ZXJhdGVlIHRvIGVhY2ggZWxlbWVudC5cbiAgXy5tYXAgPSBfLmNvbGxlY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGgsXG4gICAgICAgIHJlc3VsdHMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICByZXN1bHRzW2luZGV4XSA9IGl0ZXJhdGVlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgcmVkdWNpbmcgZnVuY3Rpb24gaXRlcmF0aW5nIGxlZnQgb3IgcmlnaHQuXG4gIHZhciBjcmVhdGVSZWR1Y2UgPSBmdW5jdGlvbihkaXIpIHtcbiAgICAvLyBXcmFwIGNvZGUgdGhhdCByZWFzc2lnbnMgYXJndW1lbnQgdmFyaWFibGVzIGluIGEgc2VwYXJhdGUgZnVuY3Rpb24gdGhhblxuICAgIC8vIHRoZSBvbmUgdGhhdCBhY2Nlc3NlcyBgYXJndW1lbnRzLmxlbmd0aGAgdG8gYXZvaWQgYSBwZXJmIGhpdC4gKCMxOTkxKVxuICAgIHZhciByZWR1Y2VyID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgbWVtbywgaW5pdGlhbCkge1xuICAgICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aCxcbiAgICAgICAgICBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgIGlmICghaW5pdGlhbCkge1xuICAgICAgICBtZW1vID0gb2JqW2tleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4XTtcbiAgICAgICAgaW5kZXggKz0gZGlyO1xuICAgICAgfVxuICAgICAgZm9yICg7IGluZGV4ID49IDAgJiYgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IGRpcikge1xuICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgICBtZW1vID0gaXRlcmF0ZWUobWVtbywgb2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfTtcblxuICAgIHJldHVybiBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBtZW1vLCBjb250ZXh0KSB7XG4gICAgICB2YXIgaW5pdGlhbCA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMztcbiAgICAgIHJldHVybiByZWR1Y2VyKG9iaiwgb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCwgNCksIG1lbW8sIGluaXRpYWwpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gKipSZWR1Y2UqKiBidWlsZHMgdXAgYSBzaW5nbGUgcmVzdWx0IGZyb20gYSBsaXN0IG9mIHZhbHVlcywgYWthIGBpbmplY3RgLFxuICAvLyBvciBgZm9sZGxgLlxuICBfLnJlZHVjZSA9IF8uZm9sZGwgPSBfLmluamVjdCA9IGNyZWF0ZVJlZHVjZSgxKTtcblxuICAvLyBUaGUgcmlnaHQtYXNzb2NpYXRpdmUgdmVyc2lvbiBvZiByZWR1Y2UsIGFsc28ga25vd24gYXMgYGZvbGRyYC5cbiAgXy5yZWR1Y2VSaWdodCA9IF8uZm9sZHIgPSBjcmVhdGVSZWR1Y2UoLTEpO1xuXG4gIC8vIFJldHVybiB0aGUgZmlyc3QgdmFsdWUgd2hpY2ggcGFzc2VzIGEgdHJ1dGggdGVzdC4gQWxpYXNlZCBhcyBgZGV0ZWN0YC5cbiAgXy5maW5kID0gXy5kZXRlY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBrZXlGaW5kZXIgPSBpc0FycmF5TGlrZShvYmopID8gXy5maW5kSW5kZXggOiBfLmZpbmRLZXk7XG4gICAgdmFyIGtleSA9IGtleUZpbmRlcihvYmosIHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgaWYgKGtleSAhPT0gdm9pZCAwICYmIGtleSAhPT0gLTEpIHJldHVybiBvYmpba2V5XTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBzZWxlY3RgLlxuICBfLmZpbHRlciA9IF8uc2VsZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHMucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgZm9yIHdoaWNoIGEgdHJ1dGggdGVzdCBmYWlscy5cbiAgXy5yZWplY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBfLmZpbHRlcihvYmosIF8ubmVnYXRlKGNiKHByZWRpY2F0ZSkpLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgd2hldGhlciBhbGwgb2YgdGhlIGVsZW1lbnRzIG1hdGNoIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgYWxsYC5cbiAgXy5ldmVyeSA9IF8uYWxsID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAoIXByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIGF0IGxlYXN0IG9uZSBlbGVtZW50IGluIHRoZSBvYmplY3QgbWF0Y2hlcyBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYGFueWAuXG4gIF8uc29tZSA9IF8uYW55ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgaWYgdGhlIGFycmF5IG9yIG9iamVjdCBjb250YWlucyBhIGdpdmVuIGl0ZW0gKHVzaW5nIGA9PT1gKS5cbiAgLy8gQWxpYXNlZCBhcyBgaW5jbHVkZXNgIGFuZCBgaW5jbHVkZWAuXG4gIF8uY29udGFpbnMgPSBfLmluY2x1ZGVzID0gXy5pbmNsdWRlID0gZnVuY3Rpb24ob2JqLCBpdGVtLCBmcm9tSW5kZXgsIGd1YXJkKSB7XG4gICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ICE9ICdudW1iZXInIHx8IGd1YXJkKSBmcm9tSW5kZXggPSAwO1xuICAgIHJldHVybiBfLmluZGV4T2Yob2JqLCBpdGVtLCBmcm9tSW5kZXgpID49IDA7XG4gIH07XG5cbiAgLy8gSW52b2tlIGEgbWV0aG9kICh3aXRoIGFyZ3VtZW50cykgb24gZXZlcnkgaXRlbSBpbiBhIGNvbGxlY3Rpb24uXG4gIF8uaW52b2tlID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihvYmosIHBhdGgsIGFyZ3MpIHtcbiAgICB2YXIgY29udGV4dFBhdGgsIGZ1bmM7XG4gICAgaWYgKF8uaXNGdW5jdGlvbihwYXRoKSkge1xuICAgICAgZnVuYyA9IHBhdGg7XG4gICAgfSBlbHNlIGlmIChfLmlzQXJyYXkocGF0aCkpIHtcbiAgICAgIGNvbnRleHRQYXRoID0gcGF0aC5zbGljZSgwLCAtMSk7XG4gICAgICBwYXRoID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gXy5tYXAob2JqLCBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgICB2YXIgbWV0aG9kID0gZnVuYztcbiAgICAgIGlmICghbWV0aG9kKSB7XG4gICAgICAgIGlmIChjb250ZXh0UGF0aCAmJiBjb250ZXh0UGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICBjb250ZXh0ID0gZGVlcEdldChjb250ZXh0LCBjb250ZXh0UGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRleHQgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgbWV0aG9kID0gY29udGV4dFtwYXRoXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZXRob2QgPT0gbnVsbCA/IG1ldGhvZCA6IG1ldGhvZC5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgbWFwYDogZmV0Y2hpbmcgYSBwcm9wZXJ0eS5cbiAgXy5wbHVjayA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgXy5wcm9wZXJ0eShrZXkpKTtcbiAgfTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaWx0ZXJgOiBzZWxlY3Rpbmcgb25seSBvYmplY3RzXG4gIC8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8ud2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmluZGA6IGdldHRpbmcgdGhlIGZpcnN0IG9iamVjdFxuICAvLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLmZpbmRXaGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHtcbiAgICByZXR1cm4gXy5maW5kKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1heCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0gLUluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSAtSW5maW5pdHksXG4gICAgICAgIHZhbHVlLCBjb21wdXRlZDtcbiAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCB8fCB0eXBlb2YgaXRlcmF0ZWUgPT0gJ251bWJlcicgJiYgdHlwZW9mIG9ialswXSAhPSAnb2JqZWN0JyAmJiBvYmogIT0gbnVsbCkge1xuICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2ldO1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSA+IHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odiwgaW5kZXgsIGxpc3QpIHtcbiAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2LCBpbmRleCwgbGlzdCk7XG4gICAgICAgIGlmIChjb21wdXRlZCA+IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gLUluZmluaXR5ICYmIHJlc3VsdCA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdjtcbiAgICAgICAgICBsYXN0Q29tcHV0ZWQgPSBjb21wdXRlZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtaW5pbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1pbiA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0gSW5maW5pdHksIGxhc3RDb21wdXRlZCA9IEluZmluaXR5LFxuICAgICAgICB2YWx1ZSwgY29tcHV0ZWQ7XG4gICAgaWYgKGl0ZXJhdGVlID09IG51bGwgfHwgdHlwZW9mIGl0ZXJhdGVlID09ICdudW1iZXInICYmIHR5cGVvZiBvYmpbMF0gIT0gJ29iamVjdCcgJiYgb2JqICE9IG51bGwpIHtcbiAgICAgIG9iaiA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSA9IG9ialtpXTtcbiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgPCByZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHYsIGluZGV4LCBsaXN0KSB7XG4gICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUodiwgaW5kZXgsIGxpc3QpO1xuICAgICAgICBpZiAoY29tcHV0ZWQgPCBsYXN0Q29tcHV0ZWQgfHwgY29tcHV0ZWQgPT09IEluZmluaXR5ICYmIHJlc3VsdCA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICByZXN1bHQgPSB2O1xuICAgICAgICAgIGxhc3RDb21wdXRlZCA9IGNvbXB1dGVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBTaHVmZmxlIGEgY29sbGVjdGlvbi5cbiAgXy5zaHVmZmxlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIF8uc2FtcGxlKG9iaiwgSW5maW5pdHkpO1xuICB9O1xuXG4gIC8vIFNhbXBsZSAqKm4qKiByYW5kb20gdmFsdWVzIGZyb20gYSBjb2xsZWN0aW9uIHVzaW5nIHRoZSBtb2Rlcm4gdmVyc2lvbiBvZiB0aGVcbiAgLy8gW0Zpc2hlci1ZYXRlcyBzaHVmZmxlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlcuKAk1lhdGVzX3NodWZmbGUpLlxuICAvLyBJZiAqKm4qKiBpcyBub3Qgc3BlY2lmaWVkLCByZXR1cm5zIGEgc2luZ2xlIHJhbmRvbSBlbGVtZW50LlxuICAvLyBUaGUgaW50ZXJuYWwgYGd1YXJkYCBhcmd1bWVudCBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBtYXBgLlxuICBfLnNhbXBsZSA9IGZ1bmN0aW9uKG9iaiwgbiwgZ3VhcmQpIHtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSB7XG4gICAgICBpZiAoIWlzQXJyYXlMaWtlKG9iaikpIG9iaiA9IF8udmFsdWVzKG9iaik7XG4gICAgICByZXR1cm4gb2JqW18ucmFuZG9tKG9iai5sZW5ndGggLSAxKV07XG4gICAgfVxuICAgIHZhciBzYW1wbGUgPSBpc0FycmF5TGlrZShvYmopID8gXy5jbG9uZShvYmopIDogXy52YWx1ZXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKHNhbXBsZSk7XG4gICAgbiA9IE1hdGgubWF4KE1hdGgubWluKG4sIGxlbmd0aCksIDApO1xuICAgIHZhciBsYXN0ID0gbGVuZ3RoIC0gMTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbjsgaW5kZXgrKykge1xuICAgICAgdmFyIHJhbmQgPSBfLnJhbmRvbShpbmRleCwgbGFzdCk7XG4gICAgICB2YXIgdGVtcCA9IHNhbXBsZVtpbmRleF07XG4gICAgICBzYW1wbGVbaW5kZXhdID0gc2FtcGxlW3JhbmRdO1xuICAgICAgc2FtcGxlW3JhbmRdID0gdGVtcDtcbiAgICB9XG4gICAgcmV0dXJuIHNhbXBsZS5zbGljZSgwLCBuKTtcbiAgfTtcblxuICAvLyBTb3J0IHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24gcHJvZHVjZWQgYnkgYW4gaXRlcmF0ZWUuXG4gIF8uc29ydEJ5ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgcmV0dXJuIF8ucGx1Y2soXy5tYXAob2JqLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBsaXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIGluZGV4OiBpbmRleCsrLFxuICAgICAgICBjcml0ZXJpYTogaXRlcmF0ZWUodmFsdWUsIGtleSwgbGlzdClcbiAgICAgIH07XG4gICAgfSkuc29ydChmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgICAgdmFyIGEgPSBsZWZ0LmNyaXRlcmlhO1xuICAgICAgdmFyIGIgPSByaWdodC5jcml0ZXJpYTtcbiAgICAgIGlmIChhICE9PSBiKSB7XG4gICAgICAgIGlmIChhID4gYiB8fCBhID09PSB2b2lkIDApIHJldHVybiAxO1xuICAgICAgICBpZiAoYSA8IGIgfHwgYiA9PT0gdm9pZCAwKSByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gbGVmdC5pbmRleCAtIHJpZ2h0LmluZGV4O1xuICAgIH0pLCAndmFsdWUnKTtcbiAgfTtcblxuICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiB1c2VkIGZvciBhZ2dyZWdhdGUgXCJncm91cCBieVwiIG9wZXJhdGlvbnMuXG4gIHZhciBncm91cCA9IGZ1bmN0aW9uKGJlaGF2aW9yLCBwYXJ0aXRpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHBhcnRpdGlvbiA/IFtbXSwgW11dIDoge307XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xuICAgICAgICB2YXIga2V5ID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBvYmopO1xuICAgICAgICBiZWhhdmlvcihyZXN1bHQsIHZhbHVlLCBrZXkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gR3JvdXBzIHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24uIFBhc3MgZWl0aGVyIGEgc3RyaW5nIGF0dHJpYnV0ZVxuICAvLyB0byBncm91cCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGNyaXRlcmlvbi5cbiAgXy5ncm91cEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgaWYgKGhhcyhyZXN1bHQsIGtleSkpIHJlc3VsdFtrZXldLnB1c2godmFsdWUpOyBlbHNlIHJlc3VsdFtrZXldID0gW3ZhbHVlXTtcbiAgfSk7XG5cbiAgLy8gSW5kZXhlcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLCBzaW1pbGFyIHRvIGBncm91cEJ5YCwgYnV0IGZvclxuICAvLyB3aGVuIHlvdSBrbm93IHRoYXQgeW91ciBpbmRleCB2YWx1ZXMgd2lsbCBiZSB1bmlxdWUuXG4gIF8uaW5kZXhCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gIH0pO1xuXG4gIC8vIENvdW50cyBpbnN0YW5jZXMgb2YgYW4gb2JqZWN0IHRoYXQgZ3JvdXAgYnkgYSBjZXJ0YWluIGNyaXRlcmlvbi4gUGFzc1xuICAvLyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlIHRvIGNvdW50IGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcbiAgLy8gY3JpdGVyaW9uLlxuICBfLmNvdW50QnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoaGFzKHJlc3VsdCwga2V5KSkgcmVzdWx0W2tleV0rKzsgZWxzZSByZXN1bHRba2V5XSA9IDE7XG4gIH0pO1xuXG4gIHZhciByZVN0clN5bWJvbCA9IC9bXlxcdWQ4MDAtXFx1ZGZmZl18W1xcdWQ4MDAtXFx1ZGJmZl1bXFx1ZGMwMC1cXHVkZmZmXXxbXFx1ZDgwMC1cXHVkZmZmXS9nO1xuICAvLyBTYWZlbHkgY3JlYXRlIGEgcmVhbCwgbGl2ZSBhcnJheSBmcm9tIGFueXRoaW5nIGl0ZXJhYmxlLlxuICBfLnRvQXJyYXkgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIW9iaikgcmV0dXJuIFtdO1xuICAgIGlmIChfLmlzQXJyYXkob2JqKSkgcmV0dXJuIHNsaWNlLmNhbGwob2JqKTtcbiAgICBpZiAoXy5pc1N0cmluZyhvYmopKSB7XG4gICAgICAvLyBLZWVwIHN1cnJvZ2F0ZSBwYWlyIGNoYXJhY3RlcnMgdG9nZXRoZXJcbiAgICAgIHJldHVybiBvYmoubWF0Y2gocmVTdHJTeW1ib2wpO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkgcmV0dXJuIF8ubWFwKG9iaiwgXy5pZGVudGl0eSk7XG4gICAgcmV0dXJuIF8udmFsdWVzKG9iaik7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gYW4gb2JqZWN0LlxuICBfLnNpemUgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiAwO1xuICAgIHJldHVybiBpc0FycmF5TGlrZShvYmopID8gb2JqLmxlbmd0aCA6IF8ua2V5cyhvYmopLmxlbmd0aDtcbiAgfTtcblxuICAvLyBTcGxpdCBhIGNvbGxlY3Rpb24gaW50byB0d28gYXJyYXlzOiBvbmUgd2hvc2UgZWxlbWVudHMgYWxsIHNhdGlzZnkgdGhlIGdpdmVuXG4gIC8vIHByZWRpY2F0ZSwgYW5kIG9uZSB3aG9zZSBlbGVtZW50cyBhbGwgZG8gbm90IHNhdGlzZnkgdGhlIHByZWRpY2F0ZS5cbiAgXy5wYXJ0aXRpb24gPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBwYXNzKSB7XG4gICAgcmVzdWx0W3Bhc3MgPyAwIDogMV0ucHVzaCh2YWx1ZSk7XG4gIH0sIHRydWUpO1xuXG4gIC8vIEFycmF5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGZpcnN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgaGVhZGAgYW5kIGB0YWtlYC4gVGhlICoqZ3VhcmQqKiBjaGVja1xuICAvLyBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuXG4gIF8uZmlyc3QgPSBfLmhlYWQgPSBfLnRha2UgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCB8fCBhcnJheS5sZW5ndGggPCAxKSByZXR1cm4gbiA9PSBudWxsID8gdm9pZCAwIDogW107XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkgcmV0dXJuIGFycmF5WzBdO1xuICAgIHJldHVybiBfLmluaXRpYWwoYXJyYXksIGFycmF5Lmxlbmd0aCAtIG4pO1xuICB9O1xuXG4gIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGxhc3QgZW50cnkgb2YgdGhlIGFycmF5LiBFc3BlY2lhbGx5IHVzZWZ1bCBvblxuICAvLyB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiBhbGwgdGhlIHZhbHVlcyBpblxuICAvLyB0aGUgYXJyYXksIGV4Y2x1ZGluZyB0aGUgbGFzdCBOLlxuICBfLmluaXRpYWwgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgMCwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gKG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKSkpO1xuICB9O1xuXG4gIC8vIEdldCB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBsYXN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS5cbiAgXy5sYXN0ID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgaWYgKGFycmF5ID09IG51bGwgfHwgYXJyYXkubGVuZ3RoIDwgMSkgcmV0dXJuIG4gPT0gbnVsbCA/IHZvaWQgMCA6IFtdO1xuICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHJldHVybiBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbiAgICByZXR1cm4gXy5yZXN0KGFycmF5LCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSBuKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgZmlyc3QgZW50cnkgb2YgdGhlIGFycmF5LiBBbGlhc2VkIGFzIGB0YWlsYCBhbmQgYGRyb3BgLlxuICAvLyBFc3BlY2lhbGx5IHVzZWZ1bCBvbiB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyBhbiAqKm4qKiB3aWxsIHJldHVyblxuICAvLyB0aGUgcmVzdCBOIHZhbHVlcyBpbiB0aGUgYXJyYXkuXG4gIF8ucmVzdCA9IF8udGFpbCA9IF8uZHJvcCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCBuID09IG51bGwgfHwgZ3VhcmQgPyAxIDogbik7XG4gIH07XG5cbiAgLy8gVHJpbSBvdXQgYWxsIGZhbHN5IHZhbHVlcyBmcm9tIGFuIGFycmF5LlxuICBfLmNvbXBhY3QgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgQm9vbGVhbik7XG4gIH07XG5cbiAgLy8gSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgYSByZWN1cnNpdmUgYGZsYXR0ZW5gIGZ1bmN0aW9uLlxuICB2YXIgZmxhdHRlbiA9IGZ1bmN0aW9uKGlucHV0LCBzaGFsbG93LCBzdHJpY3QsIG91dHB1dCkge1xuICAgIG91dHB1dCA9IG91dHB1dCB8fCBbXTtcbiAgICB2YXIgaWR4ID0gb3V0cHV0Lmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGlucHV0KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFsdWUgPSBpbnB1dFtpXTtcbiAgICAgIGlmIChpc0FycmF5TGlrZSh2YWx1ZSkgJiYgKF8uaXNBcnJheSh2YWx1ZSkgfHwgXy5pc0FyZ3VtZW50cyh2YWx1ZSkpKSB7XG4gICAgICAgIC8vIEZsYXR0ZW4gY3VycmVudCBsZXZlbCBvZiBhcnJheSBvciBhcmd1bWVudHMgb2JqZWN0LlxuICAgICAgICBpZiAoc2hhbGxvdykge1xuICAgICAgICAgIHZhciBqID0gMCwgbGVuID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIHdoaWxlIChqIDwgbGVuKSBvdXRwdXRbaWR4KytdID0gdmFsdWVbaisrXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbGF0dGVuKHZhbHVlLCBzaGFsbG93LCBzdHJpY3QsIG91dHB1dCk7XG4gICAgICAgICAgaWR4ID0gb3V0cHV0Lmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghc3RyaWN0KSB7XG4gICAgICAgIG91dHB1dFtpZHgrK10gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcblxuICAvLyBGbGF0dGVuIG91dCBhbiBhcnJheSwgZWl0aGVyIHJlY3Vyc2l2ZWx5IChieSBkZWZhdWx0KSwgb3IganVzdCBvbmUgbGV2ZWwuXG4gIF8uZmxhdHRlbiA9IGZ1bmN0aW9uKGFycmF5LCBzaGFsbG93KSB7XG4gICAgcmV0dXJuIGZsYXR0ZW4oYXJyYXksIHNoYWxsb3csIGZhbHNlKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSB2ZXJzaW9uIG9mIHRoZSBhcnJheSB0aGF0IGRvZXMgbm90IGNvbnRhaW4gdGhlIHNwZWNpZmllZCB2YWx1ZShzKS5cbiAgXy53aXRob3V0ID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihhcnJheSwgb3RoZXJBcnJheXMpIHtcbiAgICByZXR1cm4gXy5kaWZmZXJlbmNlKGFycmF5LCBvdGhlckFycmF5cyk7XG4gIH0pO1xuXG4gIC8vIFByb2R1Y2UgYSBkdXBsaWNhdGUtZnJlZSB2ZXJzaW9uIG9mIHRoZSBhcnJheS4gSWYgdGhlIGFycmF5IGhhcyBhbHJlYWR5XG4gIC8vIGJlZW4gc29ydGVkLCB5b3UgaGF2ZSB0aGUgb3B0aW9uIG9mIHVzaW5nIGEgZmFzdGVyIGFsZ29yaXRobS5cbiAgLy8gVGhlIGZhc3RlciBhbGdvcml0aG0gd2lsbCBub3Qgd29yayB3aXRoIGFuIGl0ZXJhdGVlIGlmIHRoZSBpdGVyYXRlZVxuICAvLyBpcyBub3QgYSBvbmUtdG8tb25lIGZ1bmN0aW9uLCBzbyBwcm92aWRpbmcgYW4gaXRlcmF0ZWUgd2lsbCBkaXNhYmxlXG4gIC8vIHRoZSBmYXN0ZXIgYWxnb3JpdGhtLlxuICAvLyBBbGlhc2VkIGFzIGB1bmlxdWVgLlxuICBfLnVuaXEgPSBfLnVuaXF1ZSA9IGZ1bmN0aW9uKGFycmF5LCBpc1NvcnRlZCwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpZiAoIV8uaXNCb29sZWFuKGlzU29ydGVkKSkge1xuICAgICAgY29udGV4dCA9IGl0ZXJhdGVlO1xuICAgICAgaXRlcmF0ZWUgPSBpc1NvcnRlZDtcbiAgICAgIGlzU29ydGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpdGVyYXRlZSAhPSBudWxsKSBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIHNlZW4gPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFsdWUgPSBhcnJheVtpXSxcbiAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlID8gaXRlcmF0ZWUodmFsdWUsIGksIGFycmF5KSA6IHZhbHVlO1xuICAgICAgaWYgKGlzU29ydGVkICYmICFpdGVyYXRlZSkge1xuICAgICAgICBpZiAoIWkgfHwgc2VlbiAhPT0gY29tcHV0ZWQpIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgc2VlbiA9IGNvbXB1dGVkO1xuICAgICAgfSBlbHNlIGlmIChpdGVyYXRlZSkge1xuICAgICAgICBpZiAoIV8uY29udGFpbnMoc2VlbiwgY29tcHV0ZWQpKSB7XG4gICAgICAgICAgc2Vlbi5wdXNoKGNvbXB1dGVkKTtcbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIV8uY29udGFpbnMocmVzdWx0LCB2YWx1ZSkpIHtcbiAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyB0aGUgdW5pb246IGVhY2ggZGlzdGluY3QgZWxlbWVudCBmcm9tIGFsbCBvZlxuICAvLyB0aGUgcGFzc2VkLWluIGFycmF5cy5cbiAgXy51bmlvbiA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oYXJyYXlzKSB7XG4gICAgcmV0dXJuIF8udW5pcShmbGF0dGVuKGFycmF5cywgdHJ1ZSwgdHJ1ZSkpO1xuICB9KTtcblxuICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgZXZlcnkgaXRlbSBzaGFyZWQgYmV0d2VlbiBhbGwgdGhlXG4gIC8vIHBhc3NlZC1pbiBhcnJheXMuXG4gIF8uaW50ZXJzZWN0aW9uID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIGFyZ3NMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gYXJyYXlbaV07XG4gICAgICBpZiAoXy5jb250YWlucyhyZXN1bHQsIGl0ZW0pKSBjb250aW51ZTtcbiAgICAgIHZhciBqO1xuICAgICAgZm9yIChqID0gMTsgaiA8IGFyZ3NMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAoIV8uY29udGFpbnMoYXJndW1lbnRzW2pdLCBpdGVtKSkgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoaiA9PT0gYXJnc0xlbmd0aCkgcmVzdWx0LnB1c2goaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gVGFrZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG9uZSBhcnJheSBhbmQgYSBudW1iZXIgb2Ygb3RoZXIgYXJyYXlzLlxuICAvLyBPbmx5IHRoZSBlbGVtZW50cyBwcmVzZW50IGluIGp1c3QgdGhlIGZpcnN0IGFycmF5IHdpbGwgcmVtYWluLlxuICBfLmRpZmZlcmVuY2UgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKGFycmF5LCByZXN0KSB7XG4gICAgcmVzdCA9IGZsYXR0ZW4ocmVzdCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgcmV0dXJuIF8uZmlsdGVyKGFycmF5LCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICByZXR1cm4gIV8uY29udGFpbnMocmVzdCwgdmFsdWUpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBDb21wbGVtZW50IG9mIF8uemlwLiBVbnppcCBhY2NlcHRzIGFuIGFycmF5IG9mIGFycmF5cyBhbmQgZ3JvdXBzXG4gIC8vIGVhY2ggYXJyYXkncyBlbGVtZW50cyBvbiBzaGFyZWQgaW5kaWNlcy5cbiAgXy51bnppcCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5ICYmIF8ubWF4KGFycmF5LCBnZXRMZW5ndGgpLmxlbmd0aCB8fCAwO1xuICAgIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmVzdWx0W2luZGV4XSA9IF8ucGx1Y2soYXJyYXksIGluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBaaXAgdG9nZXRoZXIgbXVsdGlwbGUgbGlzdHMgaW50byBhIHNpbmdsZSBhcnJheSAtLSBlbGVtZW50cyB0aGF0IHNoYXJlXG4gIC8vIGFuIGluZGV4IGdvIHRvZ2V0aGVyLlxuICBfLnppcCA9IHJlc3RBcmd1bWVudHMoXy51bnppcCk7XG5cbiAgLy8gQ29udmVydHMgbGlzdHMgaW50byBvYmplY3RzLiBQYXNzIGVpdGhlciBhIHNpbmdsZSBhcnJheSBvZiBgW2tleSwgdmFsdWVdYFxuICAvLyBwYWlycywgb3IgdHdvIHBhcmFsbGVsIGFycmF5cyBvZiB0aGUgc2FtZSBsZW5ndGggLS0gb25lIG9mIGtleXMsIGFuZCBvbmUgb2ZcbiAgLy8gdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVzLiBQYXNzaW5nIGJ5IHBhaXJzIGlzIHRoZSByZXZlcnNlIG9mIF8ucGFpcnMuXG4gIF8ub2JqZWN0ID0gZnVuY3Rpb24obGlzdCwgdmFsdWVzKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgobGlzdCk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICByZXN1bHRbbGlzdFtpXV0gPSB2YWx1ZXNbaV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRbbGlzdFtpXVswXV0gPSBsaXN0W2ldWzFdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIEdlbmVyYXRvciBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGZpbmRJbmRleCBhbmQgZmluZExhc3RJbmRleCBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlciA9IGZ1bmN0aW9uKGRpcikge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgICB2YXIgaW5kZXggPSBkaXIgPiAwID8gMCA6IGxlbmd0aCAtIDE7XG4gICAgICBmb3IgKDsgaW5kZXggPj0gMCAmJiBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gZGlyKSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBpbmRleCBvbiBhbiBhcnJheS1saWtlIHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3QuXG4gIF8uZmluZEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoMSk7XG4gIF8uZmluZExhc3RJbmRleCA9IGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKC0xKTtcblxuICAvLyBVc2UgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIHRvIGZpZ3VyZSBvdXQgdGhlIHNtYWxsZXN0IGluZGV4IGF0IHdoaWNoXG4gIC8vIGFuIG9iamVjdCBzaG91bGQgYmUgaW5zZXJ0ZWQgc28gYXMgdG8gbWFpbnRhaW4gb3JkZXIuIFVzZXMgYmluYXJ5IHNlYXJjaC5cbiAgXy5zb3J0ZWRJbmRleCA9IGZ1bmN0aW9uKGFycmF5LCBvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCwgMSk7XG4gICAgdmFyIHZhbHVlID0gaXRlcmF0ZWUob2JqKTtcbiAgICB2YXIgbG93ID0gMCwgaGlnaCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgIHZhciBtaWQgPSBNYXRoLmZsb29yKChsb3cgKyBoaWdoKSAvIDIpO1xuICAgICAgaWYgKGl0ZXJhdGVlKGFycmF5W21pZF0pIDwgdmFsdWUpIGxvdyA9IG1pZCArIDE7IGVsc2UgaGlnaCA9IG1pZDtcbiAgICB9XG4gICAgcmV0dXJuIGxvdztcbiAgfTtcblxuICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBpbmRleE9mIGFuZCBsYXN0SW5kZXhPZiBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVJbmRleEZpbmRlciA9IGZ1bmN0aW9uKGRpciwgcHJlZGljYXRlRmluZCwgc29ydGVkSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGlkeCkge1xuICAgICAgdmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpO1xuICAgICAgaWYgKHR5cGVvZiBpZHggPT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKGRpciA+IDApIHtcbiAgICAgICAgICBpID0gaWR4ID49IDAgPyBpZHggOiBNYXRoLm1heChpZHggKyBsZW5ndGgsIGkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxlbmd0aCA9IGlkeCA+PSAwID8gTWF0aC5taW4oaWR4ICsgMSwgbGVuZ3RoKSA6IGlkeCArIGxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc29ydGVkSW5kZXggJiYgaWR4ICYmIGxlbmd0aCkge1xuICAgICAgICBpZHggPSBzb3J0ZWRJbmRleChhcnJheSwgaXRlbSk7XG4gICAgICAgIHJldHVybiBhcnJheVtpZHhdID09PSBpdGVtID8gaWR4IDogLTE7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbSAhPT0gaXRlbSkge1xuICAgICAgICBpZHggPSBwcmVkaWNhdGVGaW5kKHNsaWNlLmNhbGwoYXJyYXksIGksIGxlbmd0aCksIF8uaXNOYU4pO1xuICAgICAgICByZXR1cm4gaWR4ID49IDAgPyBpZHggKyBpIDogLTE7XG4gICAgICB9XG4gICAgICBmb3IgKGlkeCA9IGRpciA+IDAgPyBpIDogbGVuZ3RoIC0gMTsgaWR4ID49IDAgJiYgaWR4IDwgbGVuZ3RoOyBpZHggKz0gZGlyKSB7XG4gICAgICAgIGlmIChhcnJheVtpZHhdID09PSBpdGVtKSByZXR1cm4gaWR4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBpdGVtIGluIGFuIGFycmF5LFxuICAvLyBvciAtMSBpZiB0aGUgaXRlbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGFycmF5LlxuICAvLyBJZiB0aGUgYXJyYXkgaXMgbGFyZ2UgYW5kIGFscmVhZHkgaW4gc29ydCBvcmRlciwgcGFzcyBgdHJ1ZWBcbiAgLy8gZm9yICoqaXNTb3J0ZWQqKiB0byB1c2UgYmluYXJ5IHNlYXJjaC5cbiAgXy5pbmRleE9mID0gY3JlYXRlSW5kZXhGaW5kZXIoMSwgXy5maW5kSW5kZXgsIF8uc29ydGVkSW5kZXgpO1xuICBfLmxhc3RJbmRleE9mID0gY3JlYXRlSW5kZXhGaW5kZXIoLTEsIF8uZmluZExhc3RJbmRleCk7XG5cbiAgLy8gR2VuZXJhdGUgYW4gaW50ZWdlciBBcnJheSBjb250YWluaW5nIGFuIGFyaXRobWV0aWMgcHJvZ3Jlc3Npb24uIEEgcG9ydCBvZlxuICAvLyB0aGUgbmF0aXZlIFB5dGhvbiBgcmFuZ2UoKWAgZnVuY3Rpb24uIFNlZVxuICAvLyBbdGhlIFB5dGhvbiBkb2N1bWVudGF0aW9uXShodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvZnVuY3Rpb25zLmh0bWwjcmFuZ2UpLlxuICBfLnJhbmdlID0gZnVuY3Rpb24oc3RhcnQsIHN0b3AsIHN0ZXApIHtcbiAgICBpZiAoc3RvcCA9PSBudWxsKSB7XG4gICAgICBzdG9wID0gc3RhcnQgfHwgMDtcbiAgICAgIHN0YXJ0ID0gMDtcbiAgICB9XG4gICAgaWYgKCFzdGVwKSB7XG4gICAgICBzdGVwID0gc3RvcCA8IHN0YXJ0ID8gLTEgOiAxO1xuICAgIH1cblxuICAgIHZhciBsZW5ndGggPSBNYXRoLm1heChNYXRoLmNlaWwoKHN0b3AgLSBzdGFydCkgLyBzdGVwKSwgMCk7XG4gICAgdmFyIHJhbmdlID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyssIHN0YXJ0ICs9IHN0ZXApIHtcbiAgICAgIHJhbmdlW2lkeF0gPSBzdGFydDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2U7XG4gIH07XG5cbiAgLy8gQ2h1bmsgYSBzaW5nbGUgYXJyYXkgaW50byBtdWx0aXBsZSBhcnJheXMsIGVhY2ggY29udGFpbmluZyBgY291bnRgIG9yIGZld2VyXG4gIC8vIGl0ZW1zLlxuICBfLmNodW5rID0gZnVuY3Rpb24oYXJyYXksIGNvdW50KSB7XG4gICAgaWYgKGNvdW50ID09IG51bGwgfHwgY291bnQgPCAxKSByZXR1cm4gW107XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBpID0gMCwgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICAgIHdoaWxlIChpIDwgbGVuZ3RoKSB7XG4gICAgICByZXN1bHQucHVzaChzbGljZS5jYWxsKGFycmF5LCBpLCBpICs9IGNvdW50KSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gKGFoZW0pIEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgdG8gZXhlY3V0ZSBhIGZ1bmN0aW9uIGFzIGEgY29uc3RydWN0b3JcbiAgLy8gb3IgYSBub3JtYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICB2YXIgZXhlY3V0ZUJvdW5kID0gZnVuY3Rpb24oc291cmNlRnVuYywgYm91bmRGdW5jLCBjb250ZXh0LCBjYWxsaW5nQ29udGV4dCwgYXJncykge1xuICAgIGlmICghKGNhbGxpbmdDb250ZXh0IGluc3RhbmNlb2YgYm91bmRGdW5jKSkgcmV0dXJuIHNvdXJjZUZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgdmFyIHNlbGYgPSBiYXNlQ3JlYXRlKHNvdXJjZUZ1bmMucHJvdG90eXBlKTtcbiAgICB2YXIgcmVzdWx0ID0gc291cmNlRnVuYy5hcHBseShzZWxmLCBhcmdzKTtcbiAgICBpZiAoXy5pc09iamVjdChyZXN1bHQpKSByZXR1cm4gcmVzdWx0O1xuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIGZ1bmN0aW9uIGJvdW5kIHRvIGEgZ2l2ZW4gb2JqZWN0IChhc3NpZ25pbmcgYHRoaXNgLCBhbmQgYXJndW1lbnRzLFxuICAvLyBvcHRpb25hbGx5KS4gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYEZ1bmN0aW9uLmJpbmRgIGlmXG4gIC8vIGF2YWlsYWJsZS5cbiAgXy5iaW5kID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihmdW5jLCBjb250ZXh0LCBhcmdzKSB7XG4gICAgaWYgKCFfLmlzRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvbicpO1xuICAgIHZhciBib3VuZCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oY2FsbEFyZ3MpIHtcbiAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIGNvbnRleHQsIHRoaXMsIGFyZ3MuY29uY2F0KGNhbGxBcmdzKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGJvdW5kO1xuICB9KTtcblxuICAvLyBQYXJ0aWFsbHkgYXBwbHkgYSBmdW5jdGlvbiBieSBjcmVhdGluZyBhIHZlcnNpb24gdGhhdCBoYXMgaGFkIHNvbWUgb2YgaXRzXG4gIC8vIGFyZ3VtZW50cyBwcmUtZmlsbGVkLCB3aXRob3V0IGNoYW5naW5nIGl0cyBkeW5hbWljIGB0aGlzYCBjb250ZXh0LiBfIGFjdHNcbiAgLy8gYXMgYSBwbGFjZWhvbGRlciBieSBkZWZhdWx0LCBhbGxvd2luZyBhbnkgY29tYmluYXRpb24gb2YgYXJndW1lbnRzIHRvIGJlXG4gIC8vIHByZS1maWxsZWQuIFNldCBgXy5wYXJ0aWFsLnBsYWNlaG9sZGVyYCBmb3IgYSBjdXN0b20gcGxhY2Vob2xkZXIgYXJndW1lbnQuXG4gIF8ucGFydGlhbCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oZnVuYywgYm91bmRBcmdzKSB7XG4gICAgdmFyIHBsYWNlaG9sZGVyID0gXy5wYXJ0aWFsLnBsYWNlaG9sZGVyO1xuICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBvc2l0aW9uID0gMCwgbGVuZ3RoID0gYm91bmRBcmdzLmxlbmd0aDtcbiAgICAgIHZhciBhcmdzID0gQXJyYXkobGVuZ3RoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJnc1tpXSA9IGJvdW5kQXJnc1tpXSA9PT0gcGxhY2Vob2xkZXIgPyBhcmd1bWVudHNbcG9zaXRpb24rK10gOiBib3VuZEFyZ3NbaV07XG4gICAgICB9XG4gICAgICB3aGlsZSAocG9zaXRpb24gPCBhcmd1bWVudHMubGVuZ3RoKSBhcmdzLnB1c2goYXJndW1lbnRzW3Bvc2l0aW9uKytdKTtcbiAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIHRoaXMsIHRoaXMsIGFyZ3MpO1xuICAgIH07XG4gICAgcmV0dXJuIGJvdW5kO1xuICB9KTtcblxuICBfLnBhcnRpYWwucGxhY2Vob2xkZXIgPSBfO1xuXG4gIC8vIEJpbmQgYSBudW1iZXIgb2YgYW4gb2JqZWN0J3MgbWV0aG9kcyB0byB0aGF0IG9iamVjdC4gUmVtYWluaW5nIGFyZ3VtZW50c1xuICAvLyBhcmUgdGhlIG1ldGhvZCBuYW1lcyB0byBiZSBib3VuZC4gVXNlZnVsIGZvciBlbnN1cmluZyB0aGF0IGFsbCBjYWxsYmFja3NcbiAgLy8gZGVmaW5lZCBvbiBhbiBvYmplY3QgYmVsb25nIHRvIGl0LlxuICBfLmJpbmRBbGwgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKG9iaiwga2V5cykge1xuICAgIGtleXMgPSBmbGF0dGVuKGtleXMsIGZhbHNlLCBmYWxzZSk7XG4gICAgdmFyIGluZGV4ID0ga2V5cy5sZW5ndGg7XG4gICAgaWYgKGluZGV4IDwgMSkgdGhyb3cgbmV3IEVycm9yKCdiaW5kQWxsIG11c3QgYmUgcGFzc2VkIGZ1bmN0aW9uIG5hbWVzJyk7XG4gICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2luZGV4XTtcbiAgICAgIG9ialtrZXldID0gXy5iaW5kKG9ialtrZXldLCBvYmopO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gTWVtb2l6ZSBhbiBleHBlbnNpdmUgZnVuY3Rpb24gYnkgc3RvcmluZyBpdHMgcmVzdWx0cy5cbiAgXy5tZW1vaXplID0gZnVuY3Rpb24oZnVuYywgaGFzaGVyKSB7XG4gICAgdmFyIG1lbW9pemUgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBjYWNoZSA9IG1lbW9pemUuY2FjaGU7XG4gICAgICB2YXIgYWRkcmVzcyA9ICcnICsgKGhhc2hlciA/IGhhc2hlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDoga2V5KTtcbiAgICAgIGlmICghaGFzKGNhY2hlLCBhZGRyZXNzKSkgY2FjaGVbYWRkcmVzc10gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gY2FjaGVbYWRkcmVzc107XG4gICAgfTtcbiAgICBtZW1vaXplLmNhY2hlID0ge307XG4gICAgcmV0dXJuIG1lbW9pemU7XG4gIH07XG5cbiAgLy8gRGVsYXlzIGEgZnVuY3Rpb24gZm9yIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCBhbmQgdGhlbiBjYWxsc1xuICAvLyBpdCB3aXRoIHRoZSBhcmd1bWVudHMgc3VwcGxpZWQuXG4gIF8uZGVsYXkgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIGFyZ3MpIHtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH0sIHdhaXQpO1xuICB9KTtcblxuICAvLyBEZWZlcnMgYSBmdW5jdGlvbiwgc2NoZWR1bGluZyBpdCB0byBydW4gYWZ0ZXIgdGhlIGN1cnJlbnQgY2FsbCBzdGFjayBoYXNcbiAgLy8gY2xlYXJlZC5cbiAgXy5kZWZlciA9IF8ucGFydGlhbChfLmRlbGF5LCBfLCAxKTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCBvbmx5IGJlIHRyaWdnZXJlZCBhdCBtb3N0IG9uY2VcbiAgLy8gZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuIE5vcm1hbGx5LCB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGwgcnVuXG4gIC8vIGFzIG11Y2ggYXMgaXQgY2FuLCB3aXRob3V0IGV2ZXIgZ29pbmcgbW9yZSB0aGFuIG9uY2UgcGVyIGB3YWl0YCBkdXJhdGlvbjtcbiAgLy8gYnV0IGlmIHlvdSdkIGxpa2UgdG8gZGlzYWJsZSB0aGUgZXhlY3V0aW9uIG9uIHRoZSBsZWFkaW5nIGVkZ2UsIHBhc3NcbiAgLy8gYHtsZWFkaW5nOiBmYWxzZX1gLiBUbyBkaXNhYmxlIGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSwgZGl0dG8uXG4gIF8udGhyb3R0bGUgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgdmFyIHRpbWVvdXQsIGNvbnRleHQsIGFyZ3MsIHJlc3VsdDtcbiAgICB2YXIgcHJldmlvdXMgPSAwO1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuXG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogXy5ub3coKTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH07XG5cbiAgICB2YXIgdGhyb3R0bGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbm93ID0gXy5ub3coKTtcbiAgICAgIGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkgcHJldmlvdXMgPSBub3c7XG4gICAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG4gICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICBpZiAocmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gd2FpdCkge1xuICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBwcmV2aW91cyA9IG5vdztcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKCF0aW1lb3V0ICYmIG9wdGlvbnMudHJhaWxpbmcgIT09IGZhbHNlKSB7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgdGhyb3R0bGVkLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgcHJldmlvdXMgPSAwO1xuICAgICAgdGltZW91dCA9IGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRocm90dGxlZDtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90XG4gIC8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAgLy8gTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gIC8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuXG4gIF8uZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICB2YXIgdGltZW91dCwgcmVzdWx0O1xuXG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oY29udGV4dCwgYXJncykge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBpZiAoYXJncykgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9O1xuXG4gICAgdmFyIGRlYm91bmNlZCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oYXJncykge1xuICAgICAgaWYgKHRpbWVvdXQpIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgICAgdmFyIGNhbGxOb3cgPSAhdGltZW91dDtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgICAgICBpZiAoY2FsbE5vdykgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVvdXQgPSBfLmRlbGF5KGxhdGVyLCB3YWl0LCB0aGlzLCBhcmdzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIGRlYm91bmNlZC5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgIH07XG5cbiAgICByZXR1cm4gZGVib3VuY2VkO1xuICB9O1xuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGZ1bmN0aW9uIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgc2Vjb25kLFxuICAvLyBhbGxvd2luZyB5b3UgdG8gYWRqdXN0IGFyZ3VtZW50cywgcnVuIGNvZGUgYmVmb3JlIGFuZCBhZnRlciwgYW5kXG4gIC8vIGNvbmRpdGlvbmFsbHkgZXhlY3V0ZSB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uXG4gIF8ud3JhcCA9IGZ1bmN0aW9uKGZ1bmMsIHdyYXBwZXIpIHtcbiAgICByZXR1cm4gXy5wYXJ0aWFsKHdyYXBwZXIsIGZ1bmMpO1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBuZWdhdGVkIHZlcnNpb24gb2YgdGhlIHBhc3NlZC1pbiBwcmVkaWNhdGUuXG4gIF8ubmVnYXRlID0gZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICFwcmVkaWNhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiBhIGxpc3Qgb2YgZnVuY3Rpb25zLCBlYWNoXG4gIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuXG4gIF8uY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBzdGFydCA9IGFyZ3MubGVuZ3RoIC0gMTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSA9IHN0YXJ0O1xuICAgICAgdmFyIHJlc3VsdCA9IGFyZ3Nbc3RhcnRdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB3aGlsZSAoaS0tKSByZXN1bHQgPSBhcmdzW2ldLmNhbGwodGhpcywgcmVzdWx0KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgb24gYW5kIGFmdGVyIHRoZSBOdGggY2FsbC5cbiAgXy5hZnRlciA9IGZ1bmN0aW9uKHRpbWVzLCBmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC0tdGltZXMgPCAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgdXAgdG8gKGJ1dCBub3QgaW5jbHVkaW5nKSB0aGUgTnRoIGNhbGwuXG4gIF8uYmVmb3JlID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHtcbiAgICB2YXIgbWVtbztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoLS10aW1lcyA+IDApIHtcbiAgICAgICAgbWVtbyA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aW1lcyA8PSAxKSBmdW5jID0gbnVsbDtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhdCBtb3N0IG9uZSB0aW1lLCBubyBtYXR0ZXIgaG93XG4gIC8vIG9mdGVuIHlvdSBjYWxsIGl0LiBVc2VmdWwgZm9yIGxhenkgaW5pdGlhbGl6YXRpb24uXG4gIF8ub25jZSA9IF8ucGFydGlhbChfLmJlZm9yZSwgMik7XG5cbiAgXy5yZXN0QXJndW1lbnRzID0gcmVzdEFyZ3VtZW50cztcblxuICAvLyBPYmplY3QgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBLZXlzIGluIElFIDwgOSB0aGF0IHdvbid0IGJlIGl0ZXJhdGVkIGJ5IGBmb3Iga2V5IGluIC4uLmAgYW5kIHRodXMgbWlzc2VkLlxuICB2YXIgaGFzRW51bUJ1ZyA9ICF7dG9TdHJpbmc6IG51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCd0b1N0cmluZycpO1xuICB2YXIgbm9uRW51bWVyYWJsZVByb3BzID0gWyd2YWx1ZU9mJywgJ2lzUHJvdG90eXBlT2YnLCAndG9TdHJpbmcnLFxuICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICdoYXNPd25Qcm9wZXJ0eScsICd0b0xvY2FsZVN0cmluZyddO1xuXG4gIHZhciBjb2xsZWN0Tm9uRW51bVByb3BzID0gZnVuY3Rpb24ob2JqLCBrZXlzKSB7XG4gICAgdmFyIG5vbkVudW1JZHggPSBub25FbnVtZXJhYmxlUHJvcHMubGVuZ3RoO1xuICAgIHZhciBjb25zdHJ1Y3RvciA9IG9iai5jb25zdHJ1Y3RvcjtcbiAgICB2YXIgcHJvdG8gPSBfLmlzRnVuY3Rpb24oY29uc3RydWN0b3IpICYmIGNvbnN0cnVjdG9yLnByb3RvdHlwZSB8fCBPYmpQcm90bztcblxuICAgIC8vIENvbnN0cnVjdG9yIGlzIGEgc3BlY2lhbCBjYXNlLlxuICAgIHZhciBwcm9wID0gJ2NvbnN0cnVjdG9yJztcbiAgICBpZiAoaGFzKG9iaiwgcHJvcCkgJiYgIV8uY29udGFpbnMoa2V5cywgcHJvcCkpIGtleXMucHVzaChwcm9wKTtcblxuICAgIHdoaWxlIChub25FbnVtSWR4LS0pIHtcbiAgICAgIHByb3AgPSBub25FbnVtZXJhYmxlUHJvcHNbbm9uRW51bUlkeF07XG4gICAgICBpZiAocHJvcCBpbiBvYmogJiYgb2JqW3Byb3BdICE9PSBwcm90b1twcm9wXSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkge1xuICAgICAgICBrZXlzLnB1c2gocHJvcCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFJldHJpZXZlIHRoZSBuYW1lcyBvZiBhbiBvYmplY3QncyBvd24gcHJvcGVydGllcy5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYE9iamVjdC5rZXlzYC5cbiAgXy5rZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICBpZiAobmF0aXZlS2V5cykgcmV0dXJuIG5hdGl2ZUtleXMob2JqKTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChoYXMob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTtcbiAgICAvLyBBaGVtLCBJRSA8IDkuXG4gICAgaWYgKGhhc0VudW1CdWcpIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKTtcbiAgICByZXR1cm4ga2V5cztcbiAgfTtcblxuICAvLyBSZXRyaWV2ZSBhbGwgdGhlIHByb3BlcnR5IG5hbWVzIG9mIGFuIG9iamVjdC5cbiAgXy5hbGxLZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGtleXMucHVzaChrZXkpO1xuICAgIC8vIEFoZW0sIElFIDwgOS5cbiAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpO1xuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG4gIC8vIFJldHJpZXZlIHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0J3MgcHJvcGVydGllcy5cbiAgXy52YWx1ZXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgdmFsdWVzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YWx1ZXNbaV0gPSBvYmpba2V5c1tpXV07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0ZWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBvYmplY3QuXG4gIC8vIEluIGNvbnRyYXN0IHRvIF8ubWFwIGl0IHJldHVybnMgYW4gb2JqZWN0LlxuICBfLm1hcE9iamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopLFxuICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aCxcbiAgICAgICAgcmVzdWx0cyA9IHt9O1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5c1tpbmRleF07XG4gICAgICByZXN1bHRzW2N1cnJlbnRLZXldID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBDb252ZXJ0IGFuIG9iamVjdCBpbnRvIGEgbGlzdCBvZiBgW2tleSwgdmFsdWVdYCBwYWlycy5cbiAgLy8gVGhlIG9wcG9zaXRlIG9mIF8ub2JqZWN0LlxuICBfLnBhaXJzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgdmFyIHBhaXJzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBwYWlyc1tpXSA9IFtrZXlzW2ldLCBvYmpba2V5c1tpXV1dO1xuICAgIH1cbiAgICByZXR1cm4gcGFpcnM7XG4gIH07XG5cbiAgLy8gSW52ZXJ0IHRoZSBrZXlzIGFuZCB2YWx1ZXMgb2YgYW4gb2JqZWN0LiBUaGUgdmFsdWVzIG11c3QgYmUgc2VyaWFsaXphYmxlLlxuICBfLmludmVydCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICByZXN1bHRbb2JqW2tleXNbaV1dXSA9IGtleXNbaV07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgc29ydGVkIGxpc3Qgb2YgdGhlIGZ1bmN0aW9uIG5hbWVzIGF2YWlsYWJsZSBvbiB0aGUgb2JqZWN0LlxuICAvLyBBbGlhc2VkIGFzIGBtZXRob2RzYC5cbiAgXy5mdW5jdGlvbnMgPSBfLm1ldGhvZHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgbmFtZXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAoXy5pc0Z1bmN0aW9uKG9ialtrZXldKSkgbmFtZXMucHVzaChrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gbmFtZXMuc29ydCgpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhc3NpZ25lciBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVBc3NpZ25lciA9IGZ1bmN0aW9uKGtleXNGdW5jLCBkZWZhdWx0cykge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgaWYgKGRlZmF1bHRzKSBvYmogPSBPYmplY3Qob2JqKTtcbiAgICAgIGlmIChsZW5ndGggPCAyIHx8IG9iaiA9PSBudWxsKSByZXR1cm4gb2JqO1xuICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XSxcbiAgICAgICAgICAgIGtleXMgPSBrZXlzRnVuYyhzb3VyY2UpLFxuICAgICAgICAgICAgbCA9IGtleXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmICghZGVmYXVsdHMgfHwgb2JqW2tleV0gPT09IHZvaWQgMCkgb2JqW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEV4dGVuZCBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgcHJvcGVydGllcyBpbiBwYXNzZWQtaW4gb2JqZWN0KHMpLlxuICBfLmV4dGVuZCA9IGNyZWF0ZUFzc2lnbmVyKF8uYWxsS2V5cyk7XG5cbiAgLy8gQXNzaWducyBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgb3duIHByb3BlcnRpZXMgaW4gdGhlIHBhc3NlZC1pbiBvYmplY3QocykuXG4gIC8vIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduKVxuICBfLmV4dGVuZE93biA9IF8uYXNzaWduID0gY3JlYXRlQXNzaWduZXIoXy5rZXlzKTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBrZXkgb24gYW4gb2JqZWN0IHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3QuXG4gIF8uZmluZEtleSA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopLCBrZXk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtrZXldLCBrZXksIG9iaikpIHJldHVybiBrZXk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEludGVybmFsIHBpY2sgaGVscGVyIGZ1bmN0aW9uIHRvIGRldGVybWluZSBpZiBgb2JqYCBoYXMga2V5IGBrZXlgLlxuICB2YXIga2V5SW5PYmogPSBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmopIHtcbiAgICByZXR1cm4ga2V5IGluIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgb25seSBjb250YWluaW5nIHRoZSB3aGl0ZWxpc3RlZCBwcm9wZXJ0aWVzLlxuICBfLnBpY2sgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKG9iaiwga2V5cykge1xuICAgIHZhciByZXN1bHQgPSB7fSwgaXRlcmF0ZWUgPSBrZXlzWzBdO1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdDtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSkge1xuICAgICAgaWYgKGtleXMubGVuZ3RoID4gMSkgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBrZXlzWzFdKTtcbiAgICAgIGtleXMgPSBfLmFsbEtleXMob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaXRlcmF0ZWUgPSBrZXlJbk9iajtcbiAgICAgIGtleXMgPSBmbGF0dGVuKGtleXMsIGZhbHNlLCBmYWxzZSk7XG4gICAgICBvYmogPSBPYmplY3Qob2JqKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gICAgICBpZiAoaXRlcmF0ZWUodmFsdWUsIGtleSwgb2JqKSkgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSk7XG5cbiAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IHdpdGhvdXQgdGhlIGJsYWNrbGlzdGVkIHByb3BlcnRpZXMuXG4gIF8ub21pdCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24ob2JqLCBrZXlzKSB7XG4gICAgdmFyIGl0ZXJhdGVlID0ga2V5c1swXSwgY29udGV4dDtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSkge1xuICAgICAgaXRlcmF0ZWUgPSBfLm5lZ2F0ZShpdGVyYXRlZSk7XG4gICAgICBpZiAoa2V5cy5sZW5ndGggPiAxKSBjb250ZXh0ID0ga2V5c1sxXTtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5cyA9IF8ubWFwKGZsYXR0ZW4oa2V5cywgZmFsc2UsIGZhbHNlKSwgU3RyaW5nKTtcbiAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICByZXR1cm4gIV8uY29udGFpbnMoa2V5cywga2V5KTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBfLnBpY2sob2JqLCBpdGVyYXRlZSwgY29udGV4dCk7XG4gIH0pO1xuXG4gIC8vIEZpbGwgaW4gYSBnaXZlbiBvYmplY3Qgd2l0aCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gIF8uZGVmYXVsdHMgPSBjcmVhdGVBc3NpZ25lcihfLmFsbEtleXMsIHRydWUpO1xuXG4gIC8vIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSB0aGUgZ2l2ZW4gcHJvdG90eXBlIG9iamVjdC5cbiAgLy8gSWYgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGFyZSBwcm92aWRlZCB0aGVuIHRoZXkgd2lsbCBiZSBhZGRlZCB0byB0aGVcbiAgLy8gY3JlYXRlZCBvYmplY3QuXG4gIF8uY3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlLCBwcm9wcykge1xuICAgIHZhciByZXN1bHQgPSBiYXNlQ3JlYXRlKHByb3RvdHlwZSk7XG4gICAgaWYgKHByb3BzKSBfLmV4dGVuZE93bihyZXN1bHQsIHByb3BzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIChzaGFsbG93LWNsb25lZCkgZHVwbGljYXRlIG9mIGFuIG9iamVjdC5cbiAgXy5jbG9uZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gb2JqO1xuICAgIHJldHVybiBfLmlzQXJyYXkob2JqKSA/IG9iai5zbGljZSgpIDogXy5leHRlbmQoe30sIG9iaik7XG4gIH07XG5cbiAgLy8gSW52b2tlcyBpbnRlcmNlcHRvciB3aXRoIHRoZSBvYmosIGFuZCB0aGVuIHJldHVybnMgb2JqLlxuICAvLyBUaGUgcHJpbWFyeSBwdXJwb3NlIG9mIHRoaXMgbWV0aG9kIGlzIHRvIFwidGFwIGludG9cIiBhIG1ldGhvZCBjaGFpbiwgaW5cbiAgLy8gb3JkZXIgdG8gcGVyZm9ybSBvcGVyYXRpb25zIG9uIGludGVybWVkaWF0ZSByZXN1bHRzIHdpdGhpbiB0aGUgY2hhaW4uXG4gIF8udGFwID0gZnVuY3Rpb24ob2JqLCBpbnRlcmNlcHRvcikge1xuICAgIGludGVyY2VwdG9yKG9iaik7XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm5zIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZiBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5pc01hdGNoID0gZnVuY3Rpb24ob2JqZWN0LCBhdHRycykge1xuICAgIHZhciBrZXlzID0gXy5rZXlzKGF0dHJzKSwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgaWYgKG9iamVjdCA9PSBudWxsKSByZXR1cm4gIWxlbmd0aDtcbiAgICB2YXIgb2JqID0gT2JqZWN0KG9iamVjdCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoYXR0cnNba2V5XSAhPT0gb2JqW2tleV0gfHwgIShrZXkgaW4gb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuXG4gIC8vIEludGVybmFsIHJlY3Vyc2l2ZSBjb21wYXJpc29uIGZ1bmN0aW9uIGZvciBgaXNFcXVhbGAuXG4gIHZhciBlcSwgZGVlcEVxO1xuICBlcSA9IGZ1bmN0aW9uKGEsIGIsIGFTdGFjaywgYlN0YWNrKSB7XG4gICAgLy8gSWRlbnRpY2FsIG9iamVjdHMgYXJlIGVxdWFsLiBgMCA9PT0gLTBgLCBidXQgdGhleSBhcmVuJ3QgaWRlbnRpY2FsLlxuICAgIC8vIFNlZSB0aGUgW0hhcm1vbnkgYGVnYWxgIHByb3Bvc2FsXShodHRwOi8vd2lraS5lY21hc2NyaXB0Lm9yZy9kb2t1LnBocD9pZD1oYXJtb255OmVnYWwpLlxuICAgIGlmIChhID09PSBiKSByZXR1cm4gYSAhPT0gMCB8fCAxIC8gYSA9PT0gMSAvIGI7XG4gICAgLy8gYG51bGxgIG9yIGB1bmRlZmluZWRgIG9ubHkgZXF1YWwgdG8gaXRzZWxmIChzdHJpY3QgY29tcGFyaXNvbikuXG4gICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICAvLyBgTmFOYHMgYXJlIGVxdWl2YWxlbnQsIGJ1dCBub24tcmVmbGV4aXZlLlxuICAgIGlmIChhICE9PSBhKSByZXR1cm4gYiAhPT0gYjtcbiAgICAvLyBFeGhhdXN0IHByaW1pdGl2ZSBjaGVja3NcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBhO1xuICAgIGlmICh0eXBlICE9PSAnZnVuY3Rpb24nICYmIHR5cGUgIT09ICdvYmplY3QnICYmIHR5cGVvZiBiICE9ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGRlZXBFcShhLCBiLCBhU3RhY2ssIGJTdGFjayk7XG4gIH07XG5cbiAgLy8gSW50ZXJuYWwgcmVjdXJzaXZlIGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIGBpc0VxdWFsYC5cbiAgZGVlcEVxID0gZnVuY3Rpb24oYSwgYiwgYVN0YWNrLCBiU3RhY2spIHtcbiAgICAvLyBVbndyYXAgYW55IHdyYXBwZWQgb2JqZWN0cy5cbiAgICBpZiAoYSBpbnN0YW5jZW9mIF8pIGEgPSBhLl93cmFwcGVkO1xuICAgIGlmIChiIGluc3RhbmNlb2YgXykgYiA9IGIuX3dyYXBwZWQ7XG4gICAgLy8gQ29tcGFyZSBgW1tDbGFzc11dYCBuYW1lcy5cbiAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbChhKTtcbiAgICBpZiAoY2xhc3NOYW1lICE9PSB0b1N0cmluZy5jYWxsKGIpKSByZXR1cm4gZmFsc2U7XG4gICAgc3dpdGNoIChjbGFzc05hbWUpIHtcbiAgICAgIC8vIFN0cmluZ3MsIG51bWJlcnMsIHJlZ3VsYXIgZXhwcmVzc2lvbnMsIGRhdGVzLCBhbmQgYm9vbGVhbnMgYXJlIGNvbXBhcmVkIGJ5IHZhbHVlLlxuICAgICAgY2FzZSAnW29iamVjdCBSZWdFeHBdJzpcbiAgICAgIC8vIFJlZ0V4cHMgYXJlIGNvZXJjZWQgdG8gc3RyaW5ncyBmb3IgY29tcGFyaXNvbiAoTm90ZTogJycgKyAvYS9pID09PSAnL2EvaScpXG4gICAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxuICAgICAgICAvLyBQcmltaXRpdmVzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIG9iamVjdCB3cmFwcGVycyBhcmUgZXF1aXZhbGVudDsgdGh1cywgYFwiNVwiYCBpc1xuICAgICAgICAvLyBlcXVpdmFsZW50IHRvIGBuZXcgU3RyaW5nKFwiNVwiKWAuXG4gICAgICAgIHJldHVybiAnJyArIGEgPT09ICcnICsgYjtcbiAgICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6XG4gICAgICAgIC8vIGBOYU5gcyBhcmUgZXF1aXZhbGVudCwgYnV0IG5vbi1yZWZsZXhpdmUuXG4gICAgICAgIC8vIE9iamVjdChOYU4pIGlzIGVxdWl2YWxlbnQgdG8gTmFOLlxuICAgICAgICBpZiAoK2EgIT09ICthKSByZXR1cm4gK2IgIT09ICtiO1xuICAgICAgICAvLyBBbiBgZWdhbGAgY29tcGFyaXNvbiBpcyBwZXJmb3JtZWQgZm9yIG90aGVyIG51bWVyaWMgdmFsdWVzLlxuICAgICAgICByZXR1cm4gK2EgPT09IDAgPyAxIC8gK2EgPT09IDEgLyBiIDogK2EgPT09ICtiO1xuICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEJvb2xlYW5dJzpcbiAgICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1lcmljIHByaW1pdGl2ZSB2YWx1ZXMuIERhdGVzIGFyZSBjb21wYXJlZCBieSB0aGVpclxuICAgICAgICAvLyBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMuIE5vdGUgdGhhdCBpbnZhbGlkIGRhdGVzIHdpdGggbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zXG4gICAgICAgIC8vIG9mIGBOYU5gIGFyZSBub3QgZXF1aXZhbGVudC5cbiAgICAgICAgcmV0dXJuICthID09PSArYjtcbiAgICAgIGNhc2UgJ1tvYmplY3QgU3ltYm9sXSc6XG4gICAgICAgIHJldHVybiBTeW1ib2xQcm90by52YWx1ZU9mLmNhbGwoYSkgPT09IFN5bWJvbFByb3RvLnZhbHVlT2YuY2FsbChiKTtcbiAgICB9XG5cbiAgICB2YXIgYXJlQXJyYXlzID0gY2xhc3NOYW1lID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIGlmICghYXJlQXJyYXlzKSB7XG4gICAgICBpZiAodHlwZW9mIGEgIT0gJ29iamVjdCcgfHwgdHlwZW9mIGIgIT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gT2JqZWN0cyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVpdmFsZW50LCBidXQgYE9iamVjdGBzIG9yIGBBcnJheWBzXG4gICAgICAvLyBmcm9tIGRpZmZlcmVudCBmcmFtZXMgYXJlLlxuICAgICAgdmFyIGFDdG9yID0gYS5jb25zdHJ1Y3RvciwgYkN0b3IgPSBiLmNvbnN0cnVjdG9yO1xuICAgICAgaWYgKGFDdG9yICE9PSBiQ3RvciAmJiAhKF8uaXNGdW5jdGlvbihhQ3RvcikgJiYgYUN0b3IgaW5zdGFuY2VvZiBhQ3RvciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uaXNGdW5jdGlvbihiQ3RvcikgJiYgYkN0b3IgaW5zdGFuY2VvZiBiQ3RvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCdjb25zdHJ1Y3RvcicgaW4gYSAmJiAnY29uc3RydWN0b3InIGluIGIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQXNzdW1lIGVxdWFsaXR5IGZvciBjeWNsaWMgc3RydWN0dXJlcy4gVGhlIGFsZ29yaXRobSBmb3IgZGV0ZWN0aW5nIGN5Y2xpY1xuICAgIC8vIHN0cnVjdHVyZXMgaXMgYWRhcHRlZCBmcm9tIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjMsIGFic3RyYWN0IG9wZXJhdGlvbiBgSk9gLlxuXG4gICAgLy8gSW5pdGlhbGl6aW5nIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIC8vIEl0J3MgZG9uZSBoZXJlIHNpbmNlIHdlIG9ubHkgbmVlZCB0aGVtIGZvciBvYmplY3RzIGFuZCBhcnJheXMgY29tcGFyaXNvbi5cbiAgICBhU3RhY2sgPSBhU3RhY2sgfHwgW107XG4gICAgYlN0YWNrID0gYlN0YWNrIHx8IFtdO1xuICAgIHZhciBsZW5ndGggPSBhU3RhY2subGVuZ3RoO1xuICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgLy8gTGluZWFyIHNlYXJjaC4gUGVyZm9ybWFuY2UgaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mXG4gICAgICAvLyB1bmlxdWUgbmVzdGVkIHN0cnVjdHVyZXMuXG4gICAgICBpZiAoYVN0YWNrW2xlbmd0aF0gPT09IGEpIHJldHVybiBiU3RhY2tbbGVuZ3RoXSA9PT0gYjtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGZpcnN0IG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnB1c2goYSk7XG4gICAgYlN0YWNrLnB1c2goYik7XG5cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgYW5kIGFycmF5cy5cbiAgICBpZiAoYXJlQXJyYXlzKSB7XG4gICAgICAvLyBDb21wYXJlIGFycmF5IGxlbmd0aHMgdG8gZGV0ZXJtaW5lIGlmIGEgZGVlcCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeS5cbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIERlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXMuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKCFlcShhW2xlbmd0aF0sIGJbbGVuZ3RoXSwgYVN0YWNrLCBiU3RhY2spKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERlZXAgY29tcGFyZSBvYmplY3RzLlxuICAgICAgdmFyIGtleXMgPSBfLmtleXMoYSksIGtleTtcbiAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgLy8gRW5zdXJlIHRoYXQgYm90aCBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUgbnVtYmVyIG9mIHByb3BlcnRpZXMgYmVmb3JlIGNvbXBhcmluZyBkZWVwIGVxdWFsaXR5LlxuICAgICAgaWYgKF8ua2V5cyhiKS5sZW5ndGggIT09IGxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIC8vIERlZXAgY29tcGFyZSBlYWNoIG1lbWJlclxuICAgICAgICBrZXkgPSBrZXlzW2xlbmd0aF07XG4gICAgICAgIGlmICghKGhhcyhiLCBrZXkpICYmIGVxKGFba2V5XSwgYltrZXldLCBhU3RhY2ssIGJTdGFjaykpKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFJlbW92ZSB0aGUgZmlyc3Qgb2JqZWN0IGZyb20gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIGFTdGFjay5wb3AoKTtcbiAgICBiU3RhY2sucG9wKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gUGVyZm9ybSBhIGRlZXAgY29tcGFyaXNvbiB0byBjaGVjayBpZiB0d28gb2JqZWN0cyBhcmUgZXF1YWwuXG4gIF8uaXNFcXVhbCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gZXEoYSwgYik7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiBhcnJheSwgc3RyaW5nLCBvciBvYmplY3QgZW1wdHk/XG4gIC8vIEFuIFwiZW1wdHlcIiBvYmplY3QgaGFzIG5vIGVudW1lcmFibGUgb3duLXByb3BlcnRpZXMuXG4gIF8uaXNFbXB0eSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikgJiYgKF8uaXNBcnJheShvYmopIHx8IF8uaXNTdHJpbmcob2JqKSB8fCBfLmlzQXJndW1lbnRzKG9iaikpKSByZXR1cm4gb2JqLmxlbmd0aCA9PT0gMDtcbiAgICByZXR1cm4gXy5rZXlzKG9iaikubGVuZ3RoID09PSAwO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBET00gZWxlbWVudD9cbiAgXy5pc0VsZW1lbnQgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PT0gMSk7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhbiBhcnJheT9cbiAgLy8gRGVsZWdhdGVzIHRvIEVDTUE1J3MgbmF0aXZlIEFycmF5LmlzQXJyYXlcbiAgXy5pc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgYW4gb2JqZWN0P1xuICBfLmlzT2JqZWN0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2Ygb2JqO1xuICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhb2JqO1xuICB9O1xuXG4gIC8vIEFkZCBzb21lIGlzVHlwZSBtZXRob2RzOiBpc0FyZ3VtZW50cywgaXNGdW5jdGlvbiwgaXNTdHJpbmcsIGlzTnVtYmVyLCBpc0RhdGUsIGlzUmVnRXhwLCBpc0Vycm9yLCBpc01hcCwgaXNXZWFrTWFwLCBpc1NldCwgaXNXZWFrU2V0LlxuICBfLmVhY2goWydBcmd1bWVudHMnLCAnRnVuY3Rpb24nLCAnU3RyaW5nJywgJ051bWJlcicsICdEYXRlJywgJ1JlZ0V4cCcsICdFcnJvcicsICdTeW1ib2wnLCAnTWFwJywgJ1dlYWtNYXAnLCAnU2V0JywgJ1dlYWtTZXQnXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIF9bJ2lzJyArIG5hbWVdID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCAnICsgbmFtZSArICddJztcbiAgICB9O1xuICB9KTtcblxuICAvLyBEZWZpbmUgYSBmYWxsYmFjayB2ZXJzaW9uIG9mIHRoZSBtZXRob2QgaW4gYnJvd3NlcnMgKGFoZW0sIElFIDwgOSksIHdoZXJlXG4gIC8vIHRoZXJlIGlzbid0IGFueSBpbnNwZWN0YWJsZSBcIkFyZ3VtZW50c1wiIHR5cGUuXG4gIGlmICghXy5pc0FyZ3VtZW50cyhhcmd1bWVudHMpKSB7XG4gICAgXy5pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIGhhcyhvYmosICdjYWxsZWUnKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gT3B0aW1pemUgYGlzRnVuY3Rpb25gIGlmIGFwcHJvcHJpYXRlLiBXb3JrIGFyb3VuZCBzb21lIHR5cGVvZiBidWdzIGluIG9sZCB2OCxcbiAgLy8gSUUgMTEgKCMxNjIxKSwgU2FmYXJpIDggKCMxOTI5KSwgYW5kIFBoYW50b21KUyAoIzIyMzYpLlxuICB2YXIgbm9kZWxpc3QgPSByb290LmRvY3VtZW50ICYmIHJvb3QuZG9jdW1lbnQuY2hpbGROb2RlcztcbiAgaWYgKHR5cGVvZiAvLi8gIT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgSW50OEFycmF5ICE9ICdvYmplY3QnICYmIHR5cGVvZiBub2RlbGlzdCAhPSAnZnVuY3Rpb24nKSB7XG4gICAgXy5pc0Z1bmN0aW9uID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PSAnZnVuY3Rpb24nIHx8IGZhbHNlO1xuICAgIH07XG4gIH1cblxuICAvLyBJcyBhIGdpdmVuIG9iamVjdCBhIGZpbml0ZSBudW1iZXI/XG4gIF8uaXNGaW5pdGUgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gIV8uaXNTeW1ib2wob2JqKSAmJiBpc0Zpbml0ZShvYmopICYmICFpc05hTihwYXJzZUZsb2F0KG9iaikpO1xuICB9O1xuXG4gIC8vIElzIHRoZSBnaXZlbiB2YWx1ZSBgTmFOYD9cbiAgXy5pc05hTiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBfLmlzTnVtYmVyKG9iaikgJiYgaXNOYU4ob2JqKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgYm9vbGVhbj9cbiAgXy5pc0Jvb2xlYW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSB0cnVlIHx8IG9iaiA9PT0gZmFsc2UgfHwgdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBCb29sZWFuXSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBlcXVhbCB0byBudWxsP1xuICBfLmlzTnVsbCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IG51bGw7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSB1bmRlZmluZWQ/XG4gIF8uaXNVbmRlZmluZWQgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSB2b2lkIDA7XG4gIH07XG5cbiAgLy8gU2hvcnRjdXQgZnVuY3Rpb24gZm9yIGNoZWNraW5nIGlmIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBwcm9wZXJ0eSBkaXJlY3RseVxuICAvLyBvbiBpdHNlbGYgKGluIG90aGVyIHdvcmRzLCBub3Qgb24gYSBwcm90b3R5cGUpLlxuICBfLmhhcyA9IGZ1bmN0aW9uKG9iaiwgcGF0aCkge1xuICAgIGlmICghXy5pc0FycmF5KHBhdGgpKSB7XG4gICAgICByZXR1cm4gaGFzKG9iaiwgcGF0aCk7XG4gICAgfVxuICAgIHZhciBsZW5ndGggPSBwYXRoLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0gcGF0aFtpXTtcbiAgICAgIGlmIChvYmogPT0gbnVsbCB8fCAhaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgb2JqID0gb2JqW2tleV07XG4gICAgfVxuICAgIHJldHVybiAhIWxlbmd0aDtcbiAgfTtcblxuICAvLyBVdGlsaXR5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFJ1biBVbmRlcnNjb3JlLmpzIGluICpub0NvbmZsaWN0KiBtb2RlLCByZXR1cm5pbmcgdGhlIGBfYCB2YXJpYWJsZSB0byBpdHNcbiAgLy8gcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICByb290Ll8gPSBwcmV2aW91c1VuZGVyc2NvcmU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gS2VlcCB0aGUgaWRlbnRpdHkgZnVuY3Rpb24gYXJvdW5kIGZvciBkZWZhdWx0IGl0ZXJhdGVlcy5cbiAgXy5pZGVudGl0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIC8vIFByZWRpY2F0ZS1nZW5lcmF0aW5nIGZ1bmN0aW9ucy4gT2Z0ZW4gdXNlZnVsIG91dHNpZGUgb2YgVW5kZXJzY29yZS5cbiAgXy5jb25zdGFudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gIH07XG5cbiAgXy5ub29wID0gZnVuY3Rpb24oKXt9O1xuXG4gIC8vIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIHBhc3NlZCBhbiBvYmplY3QsIHdpbGwgdHJhdmVyc2UgdGhhdCBvYmplY3TigJlzXG4gIC8vIHByb3BlcnRpZXMgZG93biB0aGUgZ2l2ZW4gYHBhdGhgLCBzcGVjaWZpZWQgYXMgYW4gYXJyYXkgb2Yga2V5cyBvciBpbmRleGVzLlxuICBfLnByb3BlcnR5ID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIGlmICghXy5pc0FycmF5KHBhdGgpKSB7XG4gICAgICByZXR1cm4gc2hhbGxvd1Byb3BlcnR5KHBhdGgpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gZGVlcEdldChvYmosIHBhdGgpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gR2VuZXJhdGVzIGEgZnVuY3Rpb24gZm9yIGEgZ2l2ZW4gb2JqZWN0IHRoYXQgcmV0dXJucyBhIGdpdmVuIHByb3BlcnR5LlxuICBfLnByb3BlcnR5T2YgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpe307XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihwYXRoKSB7XG4gICAgICByZXR1cm4gIV8uaXNBcnJheShwYXRoKSA/IG9ialtwYXRoXSA6IGRlZXBHZXQob2JqLCBwYXRoKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBwcmVkaWNhdGUgZm9yIGNoZWNraW5nIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZlxuICAvLyBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5tYXRjaGVyID0gXy5tYXRjaGVzID0gZnVuY3Rpb24oYXR0cnMpIHtcbiAgICBhdHRycyA9IF8uZXh0ZW5kT3duKHt9LCBhdHRycyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIF8uaXNNYXRjaChvYmosIGF0dHJzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJ1biBhIGZ1bmN0aW9uICoqbioqIHRpbWVzLlxuICBfLnRpbWVzID0gZnVuY3Rpb24obiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgYWNjdW0gPSBBcnJheShNYXRoLm1heCgwLCBuKSk7XG4gICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgYWNjdW1baV0gPSBpdGVyYXRlZShpKTtcbiAgICByZXR1cm4gYWNjdW07XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAoaW5jbHVzaXZlKS5cbiAgXy5yYW5kb20gPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIGlmIChtYXggPT0gbnVsbCkge1xuICAgICAgbWF4ID0gbWluO1xuICAgICAgbWluID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG1pbiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSk7XG4gIH07XG5cbiAgLy8gQSAocG9zc2libHkgZmFzdGVyKSB3YXkgdG8gZ2V0IHRoZSBjdXJyZW50IHRpbWVzdGFtcCBhcyBhbiBpbnRlZ2VyLlxuICBfLm5vdyA9IERhdGUubm93IHx8IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgfTtcblxuICAvLyBMaXN0IG9mIEhUTUwgZW50aXRpZXMgZm9yIGVzY2FwaW5nLlxuICB2YXIgZXNjYXBlTWFwID0ge1xuICAgICcmJzogJyZhbXA7JyxcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7JyxcbiAgICAnXCInOiAnJnF1b3Q7JyxcbiAgICBcIidcIjogJyYjeDI3OycsXG4gICAgJ2AnOiAnJiN4NjA7J1xuICB9O1xuICB2YXIgdW5lc2NhcGVNYXAgPSBfLmludmVydChlc2NhcGVNYXApO1xuXG4gIC8vIEZ1bmN0aW9ucyBmb3IgZXNjYXBpbmcgYW5kIHVuZXNjYXBpbmcgc3RyaW5ncyB0by9mcm9tIEhUTUwgaW50ZXJwb2xhdGlvbi5cbiAgdmFyIGNyZWF0ZUVzY2FwZXIgPSBmdW5jdGlvbihtYXApIHtcbiAgICB2YXIgZXNjYXBlciA9IGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbWFwW21hdGNoXTtcbiAgICB9O1xuICAgIC8vIFJlZ2V4ZXMgZm9yIGlkZW50aWZ5aW5nIGEga2V5IHRoYXQgbmVlZHMgdG8gYmUgZXNjYXBlZC5cbiAgICB2YXIgc291cmNlID0gJyg/OicgKyBfLmtleXMobWFwKS5qb2luKCd8JykgKyAnKSc7XG4gICAgdmFyIHRlc3RSZWdleHAgPSBSZWdFeHAoc291cmNlKTtcbiAgICB2YXIgcmVwbGFjZVJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UsICdnJyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgc3RyaW5nID0gc3RyaW5nID09IG51bGwgPyAnJyA6ICcnICsgc3RyaW5nO1xuICAgICAgcmV0dXJuIHRlc3RSZWdleHAudGVzdChzdHJpbmcpID8gc3RyaW5nLnJlcGxhY2UocmVwbGFjZVJlZ2V4cCwgZXNjYXBlcikgOiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbiAgXy5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKGVzY2FwZU1hcCk7XG4gIF8udW5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKHVuZXNjYXBlTWFwKTtcblxuICAvLyBUcmF2ZXJzZXMgdGhlIGNoaWxkcmVuIG9mIGBvYmpgIGFsb25nIGBwYXRoYC4gSWYgYSBjaGlsZCBpcyBhIGZ1bmN0aW9uLCBpdFxuICAvLyBpcyBpbnZva2VkIHdpdGggaXRzIHBhcmVudCBhcyBjb250ZXh0LiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZmluYWxcbiAgLy8gY2hpbGQsIG9yIGBmYWxsYmFja2AgaWYgYW55IGNoaWxkIGlzIHVuZGVmaW5lZC5cbiAgXy5yZXN1bHQgPSBmdW5jdGlvbihvYmosIHBhdGgsIGZhbGxiYWNrKSB7XG4gICAgaWYgKCFfLmlzQXJyYXkocGF0aCkpIHBhdGggPSBbcGF0aF07XG4gICAgdmFyIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKGZhbGxiYWNrKSA/IGZhbGxiYWNrLmNhbGwob2JqKSA6IGZhbGxiYWNrO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcHJvcCA9IG9iaiA9PSBudWxsID8gdm9pZCAwIDogb2JqW3BhdGhbaV1dO1xuICAgICAgaWYgKHByb3AgPT09IHZvaWQgMCkge1xuICAgICAgICBwcm9wID0gZmFsbGJhY2s7XG4gICAgICAgIGkgPSBsZW5ndGg7IC8vIEVuc3VyZSB3ZSBkb24ndCBjb250aW51ZSBpdGVyYXRpbmcuXG4gICAgICB9XG4gICAgICBvYmogPSBfLmlzRnVuY3Rpb24ocHJvcCkgPyBwcm9wLmNhbGwob2JqKSA6IHByb3A7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgaW50ZWdlciBpZCAodW5pcXVlIHdpdGhpbiB0aGUgZW50aXJlIGNsaWVudCBzZXNzaW9uKS5cbiAgLy8gVXNlZnVsIGZvciB0ZW1wb3JhcnkgRE9NIGlkcy5cbiAgdmFyIGlkQ291bnRlciA9IDA7XG4gIF8udW5pcXVlSWQgPSBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICB2YXIgaWQgPSArK2lkQ291bnRlciArICcnO1xuICAgIHJldHVybiBwcmVmaXggPyBwcmVmaXggKyBpZCA6IGlkO1xuICB9O1xuXG4gIC8vIEJ5IGRlZmF1bHQsIFVuZGVyc2NvcmUgdXNlcyBFUkItc3R5bGUgdGVtcGxhdGUgZGVsaW1pdGVycywgY2hhbmdlIHRoZVxuICAvLyBmb2xsb3dpbmcgdGVtcGxhdGUgc2V0dGluZ3MgdG8gdXNlIGFsdGVybmF0aXZlIGRlbGltaXRlcnMuXG4gIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcbiAgICBldmFsdWF0ZTogLzwlKFtcXHNcXFNdKz8pJT4vZyxcbiAgICBpbnRlcnBvbGF0ZTogLzwlPShbXFxzXFxTXSs/KSU+L2csXG4gICAgZXNjYXBlOiAvPCUtKFtcXHNcXFNdKz8pJT4vZ1xuICB9O1xuXG4gIC8vIFdoZW4gY3VzdG9taXppbmcgYHRlbXBsYXRlU2V0dGluZ3NgLCBpZiB5b3UgZG9uJ3Qgd2FudCB0byBkZWZpbmUgYW5cbiAgLy8gaW50ZXJwb2xhdGlvbiwgZXZhbHVhdGlvbiBvciBlc2NhcGluZyByZWdleCwgd2UgbmVlZCBvbmUgdGhhdCBpc1xuICAvLyBndWFyYW50ZWVkIG5vdCB0byBtYXRjaC5cbiAgdmFyIG5vTWF0Y2ggPSAvKC4pXi87XG5cbiAgLy8gQ2VydGFpbiBjaGFyYWN0ZXJzIG5lZWQgdG8gYmUgZXNjYXBlZCBzbyB0aGF0IHRoZXkgY2FuIGJlIHB1dCBpbnRvIGFcbiAgLy8gc3RyaW5nIGxpdGVyYWwuXG4gIHZhciBlc2NhcGVzID0ge1xuICAgIFwiJ1wiOiBcIidcIixcbiAgICAnXFxcXCc6ICdcXFxcJyxcbiAgICAnXFxyJzogJ3InLFxuICAgICdcXG4nOiAnbicsXG4gICAgJ1xcdTIwMjgnOiAndTIwMjgnLFxuICAgICdcXHUyMDI5JzogJ3UyMDI5J1xuICB9O1xuXG4gIHZhciBlc2NhcGVSZWdFeHAgPSAvXFxcXHwnfFxccnxcXG58XFx1MjAyOHxcXHUyMDI5L2c7XG5cbiAgdmFyIGVzY2FwZUNoYXIgPSBmdW5jdGlvbihtYXRjaCkge1xuICAgIHJldHVybiAnXFxcXCcgKyBlc2NhcGVzW21hdGNoXTtcbiAgfTtcblxuICAvLyBKYXZhU2NyaXB0IG1pY3JvLXRlbXBsYXRpbmcsIHNpbWlsYXIgdG8gSm9obiBSZXNpZydzIGltcGxlbWVudGF0aW9uLlxuICAvLyBVbmRlcnNjb3JlIHRlbXBsYXRpbmcgaGFuZGxlcyBhcmJpdHJhcnkgZGVsaW1pdGVycywgcHJlc2VydmVzIHdoaXRlc3BhY2UsXG4gIC8vIGFuZCBjb3JyZWN0bHkgZXNjYXBlcyBxdW90ZXMgd2l0aGluIGludGVycG9sYXRlZCBjb2RlLlxuICAvLyBOQjogYG9sZFNldHRpbmdzYCBvbmx5IGV4aXN0cyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIF8udGVtcGxhdGUgPSBmdW5jdGlvbih0ZXh0LCBzZXR0aW5ncywgb2xkU2V0dGluZ3MpIHtcbiAgICBpZiAoIXNldHRpbmdzICYmIG9sZFNldHRpbmdzKSBzZXR0aW5ncyA9IG9sZFNldHRpbmdzO1xuICAgIHNldHRpbmdzID0gXy5kZWZhdWx0cyh7fSwgc2V0dGluZ3MsIF8udGVtcGxhdGVTZXR0aW5ncyk7XG5cbiAgICAvLyBDb21iaW5lIGRlbGltaXRlcnMgaW50byBvbmUgcmVndWxhciBleHByZXNzaW9uIHZpYSBhbHRlcm5hdGlvbi5cbiAgICB2YXIgbWF0Y2hlciA9IFJlZ0V4cChbXG4gICAgICAoc2V0dGluZ3MuZXNjYXBlIHx8IG5vTWF0Y2gpLnNvdXJjZSxcbiAgICAgIChzZXR0aW5ncy5pbnRlcnBvbGF0ZSB8fCBub01hdGNoKS5zb3VyY2UsXG4gICAgICAoc2V0dGluZ3MuZXZhbHVhdGUgfHwgbm9NYXRjaCkuc291cmNlXG4gICAgXS5qb2luKCd8JykgKyAnfCQnLCAnZycpO1xuXG4gICAgLy8gQ29tcGlsZSB0aGUgdGVtcGxhdGUgc291cmNlLCBlc2NhcGluZyBzdHJpbmcgbGl0ZXJhbHMgYXBwcm9wcmlhdGVseS5cbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBzb3VyY2UgPSBcIl9fcCs9J1wiO1xuICAgIHRleHQucmVwbGFjZShtYXRjaGVyLCBmdW5jdGlvbihtYXRjaCwgZXNjYXBlLCBpbnRlcnBvbGF0ZSwgZXZhbHVhdGUsIG9mZnNldCkge1xuICAgICAgc291cmNlICs9IHRleHQuc2xpY2UoaW5kZXgsIG9mZnNldCkucmVwbGFjZShlc2NhcGVSZWdFeHAsIGVzY2FwZUNoYXIpO1xuICAgICAgaW5kZXggPSBvZmZzZXQgKyBtYXRjaC5sZW5ndGg7XG5cbiAgICAgIGlmIChlc2NhcGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJytcXG4oKF9fdD0oXCIgKyBlc2NhcGUgKyBcIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xcbidcIjtcbiAgICAgIH0gZWxzZSBpZiAoaW50ZXJwb2xhdGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJytcXG4oKF9fdD0oXCIgKyBpbnRlcnBvbGF0ZSArIFwiKSk9PW51bGw/Jyc6X190KStcXG4nXCI7XG4gICAgICB9IGVsc2UgaWYgKGV2YWx1YXRlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIic7XFxuXCIgKyBldmFsdWF0ZSArIFwiXFxuX19wKz0nXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkb2JlIFZNcyBuZWVkIHRoZSBtYXRjaCByZXR1cm5lZCB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IG9mZnNldC5cbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9KTtcbiAgICBzb3VyY2UgKz0gXCInO1xcblwiO1xuXG4gICAgLy8gSWYgYSB2YXJpYWJsZSBpcyBub3Qgc3BlY2lmaWVkLCBwbGFjZSBkYXRhIHZhbHVlcyBpbiBsb2NhbCBzY29wZS5cbiAgICBpZiAoIXNldHRpbmdzLnZhcmlhYmxlKSBzb3VyY2UgPSAnd2l0aChvYmp8fHt9KXtcXG4nICsgc291cmNlICsgJ31cXG4nO1xuXG4gICAgc291cmNlID0gXCJ2YXIgX190LF9fcD0nJyxfX2o9QXJyYXkucHJvdG90eXBlLmpvaW4sXCIgK1xuICAgICAgXCJwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xcblwiICtcbiAgICAgIHNvdXJjZSArICdyZXR1cm4gX19wO1xcbic7XG5cbiAgICB2YXIgcmVuZGVyO1xuICAgIHRyeSB7XG4gICAgICByZW5kZXIgPSBuZXcgRnVuY3Rpb24oc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaicsICdfJywgc291cmNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBlLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuXG4gICAgdmFyIHRlbXBsYXRlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGRhdGEsIF8pO1xuICAgIH07XG5cbiAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBzb3VyY2UgYXMgYSBjb252ZW5pZW5jZSBmb3IgcHJlY29tcGlsYXRpb24uXG4gICAgdmFyIGFyZ3VtZW50ID0gc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaic7XG4gICAgdGVtcGxhdGUuc291cmNlID0gJ2Z1bmN0aW9uKCcgKyBhcmd1bWVudCArICcpe1xcbicgKyBzb3VyY2UgKyAnfSc7XG5cbiAgICByZXR1cm4gdGVtcGxhdGU7XG4gIH07XG5cbiAgLy8gQWRkIGEgXCJjaGFpblwiIGZ1bmN0aW9uLiBTdGFydCBjaGFpbmluZyBhIHdyYXBwZWQgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8uY2hhaW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBfKG9iaik7XG4gICAgaW5zdGFuY2UuX2NoYWluID0gdHJ1ZTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH07XG5cbiAgLy8gT09QXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuICAvLyBJZiBVbmRlcnNjb3JlIGlzIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLCBpdCByZXR1cm5zIGEgd3JhcHBlZCBvYmplY3QgdGhhdFxuICAvLyBjYW4gYmUgdXNlZCBPTy1zdHlsZS4gVGhpcyB3cmFwcGVyIGhvbGRzIGFsdGVyZWQgdmVyc2lvbnMgb2YgYWxsIHRoZVxuICAvLyB1bmRlcnNjb3JlIGZ1bmN0aW9ucy4gV3JhcHBlZCBvYmplY3RzIG1heSBiZSBjaGFpbmVkLlxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb250aW51ZSBjaGFpbmluZyBpbnRlcm1lZGlhdGUgcmVzdWx0cy5cbiAgdmFyIGNoYWluUmVzdWx0ID0gZnVuY3Rpb24oaW5zdGFuY2UsIG9iaikge1xuICAgIHJldHVybiBpbnN0YW5jZS5fY2hhaW4gPyBfKG9iaikuY2hhaW4oKSA6IG9iajtcbiAgfTtcblxuICAvLyBBZGQgeW91ciBvd24gY3VzdG9tIGZ1bmN0aW9ucyB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8ubWl4aW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICBfLmVhY2goXy5mdW5jdGlvbnMob2JqKSwgZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIGZ1bmMgPSBfW25hbWVdID0gb2JqW25hbWVdO1xuICAgICAgXy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbdGhpcy5fd3JhcHBlZF07XG4gICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIGNoYWluUmVzdWx0KHRoaXMsIGZ1bmMuYXBwbHkoXywgYXJncykpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4gXztcbiAgfTtcblxuICAvLyBBZGQgYWxsIG9mIHRoZSBVbmRlcnNjb3JlIGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlciBvYmplY3QuXG4gIF8ubWl4aW4oXyk7XG5cbiAgLy8gQWRkIGFsbCBtdXRhdG9yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci5cbiAgXy5lYWNoKFsncG9wJywgJ3B1c2gnLCAncmV2ZXJzZScsICdzaGlmdCcsICdzb3J0JywgJ3NwbGljZScsICd1bnNoaWZ0J10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9iaiA9IHRoaXMuX3dyYXBwZWQ7XG4gICAgICBtZXRob2QuYXBwbHkob2JqLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKChuYW1lID09PSAnc2hpZnQnIHx8IG5hbWUgPT09ICdzcGxpY2UnKSAmJiBvYmoubGVuZ3RoID09PSAwKSBkZWxldGUgb2JqWzBdO1xuICAgICAgcmV0dXJuIGNoYWluUmVzdWx0KHRoaXMsIG9iaik7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQWRkIGFsbCBhY2Nlc3NvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG4gIF8uZWFjaChbJ2NvbmNhdCcsICdqb2luJywgJ3NsaWNlJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGNoYWluUmVzdWx0KHRoaXMsIG1ldGhvZC5hcHBseSh0aGlzLl93cmFwcGVkLCBhcmd1bWVudHMpKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBFeHRyYWN0cyB0aGUgcmVzdWx0IGZyb20gYSB3cmFwcGVkIGFuZCBjaGFpbmVkIG9iamVjdC5cbiAgXy5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JhcHBlZDtcbiAgfTtcblxuICAvLyBQcm92aWRlIHVud3JhcHBpbmcgcHJveHkgZm9yIHNvbWUgbWV0aG9kcyB1c2VkIGluIGVuZ2luZSBvcGVyYXRpb25zXG4gIC8vIHN1Y2ggYXMgYXJpdGhtZXRpYyBhbmQgSlNPTiBzdHJpbmdpZmljYXRpb24uXG4gIF8ucHJvdG90eXBlLnZhbHVlT2YgPSBfLnByb3RvdHlwZS50b0pTT04gPSBfLnByb3RvdHlwZS52YWx1ZTtcblxuICBfLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBTdHJpbmcodGhpcy5fd3JhcHBlZCk7XG4gIH07XG5cbiAgLy8gQU1EIHJlZ2lzdHJhdGlvbiBoYXBwZW5zIGF0IHRoZSBlbmQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBBTUQgbG9hZGVyc1xuICAvLyB0aGF0IG1heSBub3QgZW5mb3JjZSBuZXh0LXR1cm4gc2VtYW50aWNzIG9uIG1vZHVsZXMuIEV2ZW4gdGhvdWdoIGdlbmVyYWxcbiAgLy8gcHJhY3RpY2UgZm9yIEFNRCByZWdpc3RyYXRpb24gaXMgdG8gYmUgYW5vbnltb3VzLCB1bmRlcnNjb3JlIHJlZ2lzdGVyc1xuICAvLyBhcyBhIG5hbWVkIG1vZHVsZSBiZWNhdXNlLCBsaWtlIGpRdWVyeSwgaXQgaXMgYSBiYXNlIGxpYnJhcnkgdGhhdCBpc1xuICAvLyBwb3B1bGFyIGVub3VnaCB0byBiZSBidW5kbGVkIGluIGEgdGhpcmQgcGFydHkgbGliLCBidXQgbm90IGJlIHBhcnQgb2ZcbiAgLy8gYW4gQU1EIGxvYWQgcmVxdWVzdC4gVGhvc2UgY2FzZXMgY291bGQgZ2VuZXJhdGUgYW4gZXJyb3Igd2hlbiBhblxuICAvLyBhbm9ueW1vdXMgZGVmaW5lKCkgaXMgY2FsbGVkIG91dHNpZGUgb2YgYSBsb2FkZXIgcmVxdWVzdC5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKCd1bmRlcnNjb3JlJywgW10sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF87XG4gICAgfSk7XG4gIH1cbn0oKSk7XG4iLCIhZnVuY3Rpb24oKXtcbiAgdmFyIGQzID0ge3ZlcnNpb246IFwiMy41LjE3XCJ9OyAvLyBzZW12ZXJcbnZhciBkM19kb2N1bWVudCA9IHRoaXMuZG9jdW1lbnQ7XG5cbmZ1bmN0aW9uIGQzX2RvY3VtZW50RWxlbWVudChub2RlKSB7XG4gIHJldHVybiBub2RlXG4gICAgICAmJiAobm9kZS5vd25lckRvY3VtZW50IC8vIG5vZGUgaXMgYSBOb2RlXG4gICAgICB8fCBub2RlLmRvY3VtZW50IC8vIG5vZGUgaXMgYSBXaW5kb3dcbiAgICAgIHx8IG5vZGUpLmRvY3VtZW50RWxlbWVudDsgLy8gbm9kZSBpcyBhIERvY3VtZW50XG59XG5cbmZ1bmN0aW9uIGQzX3dpbmRvdyhub2RlKSB7XG4gIHJldHVybiBub2RlXG4gICAgICAmJiAoKG5vZGUub3duZXJEb2N1bWVudCAmJiBub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpIC8vIG5vZGUgaXMgYSBOb2RlXG4gICAgICAgIHx8IChub2RlLmRvY3VtZW50ICYmIG5vZGUpIC8vIG5vZGUgaXMgYSBXaW5kb3dcbiAgICAgICAgfHwgbm9kZS5kZWZhdWx0Vmlldyk7IC8vIG5vZGUgaXMgYSBEb2N1bWVudFxufVxuZnVuY3Rpb24gZDNfaWRlbnRpdHkoZCkge1xuICByZXR1cm4gZDtcbn1cbi8vIENvcGllcyBhIHZhcmlhYmxlIG51bWJlciBvZiBtZXRob2RzIGZyb20gc291cmNlIHRvIHRhcmdldC5cbmQzLnJlYmluZCA9IGZ1bmN0aW9uKHRhcmdldCwgc291cmNlKSB7XG4gIHZhciBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1ldGhvZDtcbiAgd2hpbGUgKCsraSA8IG4pIHRhcmdldFttZXRob2QgPSBhcmd1bWVudHNbaV1dID0gZDNfcmViaW5kKHRhcmdldCwgc291cmNlLCBzb3VyY2VbbWV0aG9kXSk7XG4gIHJldHVybiB0YXJnZXQ7XG59O1xuXG4vLyBNZXRob2QgaXMgYXNzdW1lZCB0byBiZSBhIHN0YW5kYXJkIEQzIGdldHRlci1zZXR0ZXI6XG4vLyBJZiBwYXNzZWQgd2l0aCBubyBhcmd1bWVudHMsIGdldHMgdGhlIHZhbHVlLlxuLy8gSWYgcGFzc2VkIHdpdGggYXJndW1lbnRzLCBzZXRzIHRoZSB2YWx1ZSBhbmQgcmV0dXJucyB0aGUgdGFyZ2V0LlxuZnVuY3Rpb24gZDNfcmViaW5kKHRhcmdldCwgc291cmNlLCBtZXRob2QpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWx1ZSA9IG1ldGhvZC5hcHBseShzb3VyY2UsIGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHZhbHVlID09PSBzb3VyY2UgPyB0YXJnZXQgOiB2YWx1ZTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGQzX3ZlbmRvclN5bWJvbChvYmplY3QsIG5hbWUpIHtcbiAgaWYgKG5hbWUgaW4gb2JqZWN0KSByZXR1cm4gbmFtZTtcbiAgbmFtZSA9IG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpO1xuICBmb3IgKHZhciBpID0gMCwgbiA9IGQzX3ZlbmRvclByZWZpeGVzLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgIHZhciBwcmVmaXhOYW1lID0gZDNfdmVuZG9yUHJlZml4ZXNbaV0gKyBuYW1lO1xuICAgIGlmIChwcmVmaXhOYW1lIGluIG9iamVjdCkgcmV0dXJuIHByZWZpeE5hbWU7XG4gIH1cbn1cblxudmFyIGQzX3ZlbmRvclByZWZpeGVzID0gW1wid2Via2l0XCIsIFwibXNcIiwgXCJtb3pcIiwgXCJNb3pcIiwgXCJvXCIsIFwiT1wiXTtcbmZ1bmN0aW9uIGQzX2NsYXNzKGN0b3IsIHByb3BlcnRpZXMpIHtcbiAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3Rvci5wcm90b3R5cGUsIGtleSwge1xuICAgICAgdmFsdWU6IHByb3BlcnRpZXNba2V5XSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgfSk7XG4gIH1cbn1cblxuZDMubWFwID0gZnVuY3Rpb24ob2JqZWN0LCBmKSB7XG4gIHZhciBtYXAgPSBuZXcgZDNfTWFwO1xuICBpZiAob2JqZWN0IGluc3RhbmNlb2YgZDNfTWFwKSB7XG4gICAgb2JqZWN0LmZvckVhY2goZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBtYXAuc2V0KGtleSwgdmFsdWUpOyB9KTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkpIHtcbiAgICB2YXIgaSA9IC0xLFxuICAgICAgICBuID0gb2JqZWN0Lmxlbmd0aCxcbiAgICAgICAgbztcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgd2hpbGUgKCsraSA8IG4pIG1hcC5zZXQoaSwgb2JqZWN0W2ldKTtcbiAgICBlbHNlIHdoaWxlICgrK2kgPCBuKSBtYXAuc2V0KGYuY2FsbChvYmplY3QsIG8gPSBvYmplY3RbaV0sIGkpLCBvKTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSBtYXAuc2V0KGtleSwgb2JqZWN0W2tleV0pO1xuICB9XG4gIHJldHVybiBtYXA7XG59O1xuXG5mdW5jdGlvbiBkM19NYXAoKSB7XG4gIHRoaXMuXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5cbnZhciBkM19tYXBfcHJvdG8gPSBcIl9fcHJvdG9fX1wiLFxuICAgIGQzX21hcF96ZXJvID0gXCJcXDBcIjtcblxuZDNfY2xhc3MoZDNfTWFwLCB7XG4gIGhhczogZDNfbWFwX2hhcyxcbiAgZ2V0OiBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5fW2QzX21hcF9lc2NhcGUoa2V5KV07XG4gIH0sXG4gIHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLl9bZDNfbWFwX2VzY2FwZShrZXkpXSA9IHZhbHVlO1xuICB9LFxuICByZW1vdmU6IGQzX21hcF9yZW1vdmUsXG4gIGtleXM6IGQzX21hcF9rZXlzLFxuICB2YWx1ZXM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSB2YWx1ZXMucHVzaCh0aGlzLl9ba2V5XSk7XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfSxcbiAgZW50cmllczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVudHJpZXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSBlbnRyaWVzLnB1c2goe2tleTogZDNfbWFwX3VuZXNjYXBlKGtleSksIHZhbHVlOiB0aGlzLl9ba2V5XX0pO1xuICAgIHJldHVybiBlbnRyaWVzO1xuICB9LFxuICBzaXplOiBkM19tYXBfc2l6ZSxcbiAgZW1wdHk6IGQzX21hcF9lbXB0eSxcbiAgZm9yRWFjaDogZnVuY3Rpb24oZikge1xuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIGYuY2FsbCh0aGlzLCBkM19tYXBfdW5lc2NhcGUoa2V5KSwgdGhpcy5fW2tleV0pO1xuICB9XG59KTtcblxuZnVuY3Rpb24gZDNfbWFwX2VzY2FwZShrZXkpIHtcbiAgcmV0dXJuIChrZXkgKz0gXCJcIikgPT09IGQzX21hcF9wcm90byB8fCBrZXlbMF0gPT09IGQzX21hcF96ZXJvID8gZDNfbWFwX3plcm8gKyBrZXkgOiBrZXk7XG59XG5cbmZ1bmN0aW9uIGQzX21hcF91bmVzY2FwZShrZXkpIHtcbiAgcmV0dXJuIChrZXkgKz0gXCJcIilbMF0gPT09IGQzX21hcF96ZXJvID8ga2V5LnNsaWNlKDEpIDoga2V5O1xufVxuXG5mdW5jdGlvbiBkM19tYXBfaGFzKGtleSkge1xuICByZXR1cm4gZDNfbWFwX2VzY2FwZShrZXkpIGluIHRoaXMuXztcbn1cblxuZnVuY3Rpb24gZDNfbWFwX3JlbW92ZShrZXkpIHtcbiAgcmV0dXJuIChrZXkgPSBkM19tYXBfZXNjYXBlKGtleSkpIGluIHRoaXMuXyAmJiBkZWxldGUgdGhpcy5fW2tleV07XG59XG5cbmZ1bmN0aW9uIGQzX21hcF9rZXlzKCkge1xuICB2YXIga2V5cyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSBrZXlzLnB1c2goZDNfbWFwX3VuZXNjYXBlKGtleSkpO1xuICByZXR1cm4ga2V5cztcbn1cblxuZnVuY3Rpb24gZDNfbWFwX3NpemUoKSB7XG4gIHZhciBzaXplID0gMDtcbiAgZm9yICh2YXIga2V5IGluIHRoaXMuXykgKytzaXplO1xuICByZXR1cm4gc2l6ZTtcbn1cblxuZnVuY3Rpb24gZDNfbWFwX2VtcHR5KCkge1xuICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxudmFyIGQzX2FycmF5U2xpY2UgPSBbXS5zbGljZSxcbiAgICBkM19hcnJheSA9IGZ1bmN0aW9uKGxpc3QpIHsgcmV0dXJuIGQzX2FycmF5U2xpY2UuY2FsbChsaXN0KTsgfTsgLy8gY29udmVyc2lvbiBmb3IgTm9kZUxpc3RzXG5mdW5jdGlvbiBkM19ub29wKCkge31cblxuZDMuZGlzcGF0Y2ggPSBmdW5jdGlvbigpIHtcbiAgdmFyIGRpc3BhdGNoID0gbmV3IGQzX2Rpc3BhdGNoLFxuICAgICAgaSA9IC0xLFxuICAgICAgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIHdoaWxlICgrK2kgPCBuKSBkaXNwYXRjaFthcmd1bWVudHNbaV1dID0gZDNfZGlzcGF0Y2hfZXZlbnQoZGlzcGF0Y2gpO1xuICByZXR1cm4gZGlzcGF0Y2g7XG59O1xuXG5mdW5jdGlvbiBkM19kaXNwYXRjaCgpIHt9XG5cbmQzX2Rpc3BhdGNoLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBpID0gdHlwZS5pbmRleE9mKFwiLlwiKSxcbiAgICAgIG5hbWUgPSBcIlwiO1xuXG4gIC8vIEV4dHJhY3Qgb3B0aW9uYWwgbmFtZXNwYWNlLCBlLmcuLCBcImNsaWNrLmZvb1wiXG4gIGlmIChpID49IDApIHtcbiAgICBuYW1lID0gdHlwZS5zbGljZShpICsgMSk7XG4gICAgdHlwZSA9IHR5cGUuc2xpY2UoMCwgaSk7XG4gIH1cblxuICBpZiAodHlwZSkgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPCAyXG4gICAgICA/IHRoaXNbdHlwZV0ub24obmFtZSlcbiAgICAgIDogdGhpc1t0eXBlXS5vbihuYW1lLCBsaXN0ZW5lcik7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICBpZiAobGlzdGVuZXIgPT0gbnVsbCkgZm9yICh0eXBlIGluIHRoaXMpIHtcbiAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KHR5cGUpKSB0aGlzW3R5cGVdLm9uKG5hbWUsIG51bGwpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufTtcblxuZnVuY3Rpb24gZDNfZGlzcGF0Y2hfZXZlbnQoZGlzcGF0Y2gpIHtcbiAgdmFyIGxpc3RlbmVycyA9IFtdLFxuICAgICAgbGlzdGVuZXJCeU5hbWUgPSBuZXcgZDNfTWFwO1xuXG4gIGZ1bmN0aW9uIGV2ZW50KCkge1xuICAgIHZhciB6ID0gbGlzdGVuZXJzLCAvLyBkZWZlbnNpdmUgcmVmZXJlbmNlXG4gICAgICAgIGkgPSAtMSxcbiAgICAgICAgbiA9IHoubGVuZ3RoLFxuICAgICAgICBsO1xuICAgIHdoaWxlICgrK2kgPCBuKSBpZiAobCA9IHpbaV0ub24pIGwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICByZXR1cm4gZGlzcGF0Y2g7XG4gIH1cblxuICBldmVudC5vbiA9IGZ1bmN0aW9uKG5hbWUsIGxpc3RlbmVyKSB7XG4gICAgdmFyIGwgPSBsaXN0ZW5lckJ5TmFtZS5nZXQobmFtZSksXG4gICAgICAgIGk7XG5cbiAgICAvLyByZXR1cm4gdGhlIGN1cnJlbnQgbGlzdGVuZXIsIGlmIGFueVxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgcmV0dXJuIGwgJiYgbC5vbjtcblxuICAgIC8vIHJlbW92ZSB0aGUgb2xkIGxpc3RlbmVyLCBpZiBhbnkgKHdpdGggY29weS1vbi13cml0ZSlcbiAgICBpZiAobCkge1xuICAgICAgbC5vbiA9IG51bGw7XG4gICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuc2xpY2UoMCwgaSA9IGxpc3RlbmVycy5pbmRleE9mKGwpKS5jb25jYXQobGlzdGVuZXJzLnNsaWNlKGkgKyAxKSk7XG4gICAgICBsaXN0ZW5lckJ5TmFtZS5yZW1vdmUobmFtZSk7XG4gICAgfVxuXG4gICAgLy8gYWRkIHRoZSBuZXcgbGlzdGVuZXIsIGlmIGFueVxuICAgIGlmIChsaXN0ZW5lcikgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXJCeU5hbWUuc2V0KG5hbWUsIHtvbjogbGlzdGVuZXJ9KSk7XG5cbiAgICByZXR1cm4gZGlzcGF0Y2g7XG4gIH07XG5cbiAgcmV0dXJuIGV2ZW50O1xufVxuXG5kMy5ldmVudCA9IG51bGw7XG5cbmZ1bmN0aW9uIGQzX2V2ZW50UHJldmVudERlZmF1bHQoKSB7XG4gIGQzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG59XG5cbmZ1bmN0aW9uIGQzX2V2ZW50U291cmNlKCkge1xuICB2YXIgZSA9IGQzLmV2ZW50LCBzO1xuICB3aGlsZSAocyA9IGUuc291cmNlRXZlbnQpIGUgPSBzO1xuICByZXR1cm4gZTtcbn1cblxuLy8gTGlrZSBkMy5kaXNwYXRjaCwgYnV0IGZvciBjdXN0b20gZXZlbnRzIGFic3RyYWN0aW5nIG5hdGl2ZSBVSSBldmVudHMuIFRoZXNlXG4vLyBldmVudHMgaGF2ZSBhIHRhcmdldCBjb21wb25lbnQgKHN1Y2ggYXMgYSBicnVzaCksIGEgdGFyZ2V0IGVsZW1lbnQgKHN1Y2ggYXNcbi8vIHRoZSBzdmc6ZyBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIGJydXNoKSBhbmQgdGhlIHN0YW5kYXJkIGFyZ3VtZW50cyBgZGAgKHRoZVxuLy8gdGFyZ2V0IGVsZW1lbnQncyBkYXRhKSBhbmQgYGlgICh0aGUgc2VsZWN0aW9uIGluZGV4IG9mIHRoZSB0YXJnZXQgZWxlbWVudCkuXG5mdW5jdGlvbiBkM19ldmVudERpc3BhdGNoKHRhcmdldCkge1xuICB2YXIgZGlzcGF0Y2ggPSBuZXcgZDNfZGlzcGF0Y2gsXG4gICAgICBpID0gMCxcbiAgICAgIG4gPSBhcmd1bWVudHMubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2kgPCBuKSBkaXNwYXRjaFthcmd1bWVudHNbaV1dID0gZDNfZGlzcGF0Y2hfZXZlbnQoZGlzcGF0Y2gpO1xuXG4gIC8vIENyZWF0ZXMgYSBkaXNwYXRjaCBjb250ZXh0IGZvciB0aGUgc3BlY2lmaWVkIGB0aGl6YCAodHlwaWNhbGx5LCB0aGUgdGFyZ2V0XG4gIC8vIERPTSBlbGVtZW50IHRoYXQgcmVjZWl2ZWQgdGhlIHNvdXJjZSBldmVudCkgYW5kIGBhcmd1bWVudHpgICh0eXBpY2FsbHksIHRoZVxuICAvLyBkYXRhIGBkYCBhbmQgaW5kZXggYGlgIG9mIHRoZSB0YXJnZXQgZWxlbWVudCkuIFRoZSByZXR1cm5lZCBmdW5jdGlvbiBjYW4gYmVcbiAgLy8gdXNlZCB0byBkaXNwYXRjaCBhbiBldmVudCB0byBhbnkgcmVnaXN0ZXJlZCBsaXN0ZW5lcnM7IHRoZSBmdW5jdGlvbiB0YWtlcyBhXG4gIC8vIHNpbmdsZSBhcmd1bWVudCBhcyBpbnB1dCwgYmVpbmcgdGhlIGV2ZW50IHRvIGRpc3BhdGNoLiBUaGUgZXZlbnQgbXVzdCBoYXZlXG4gIC8vIGEgXCJ0eXBlXCIgYXR0cmlidXRlIHdoaWNoIGNvcnJlc3BvbmRzIHRvIGEgdHlwZSByZWdpc3RlcmVkIGluIHRoZVxuICAvLyBjb25zdHJ1Y3Rvci4gVGhpcyBjb250ZXh0IHdpbGwgYXV0b21hdGljYWxseSBwb3B1bGF0ZSB0aGUgXCJzb3VyY2VFdmVudFwiIGFuZFxuICAvLyBcInRhcmdldFwiIGF0dHJpYnV0ZXMgb2YgdGhlIGV2ZW50LCBhcyB3ZWxsIGFzIHNldHRpbmcgdGhlIGBkMy5ldmVudGAgZ2xvYmFsXG4gIC8vIGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIG5vdGlmaWNhdGlvbi5cbiAgZGlzcGF0Y2gub2YgPSBmdW5jdGlvbih0aGl6LCBhcmd1bWVudHopIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZTEpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBlMCA9XG4gICAgICAgIGUxLnNvdXJjZUV2ZW50ID0gZDMuZXZlbnQ7XG4gICAgICAgIGUxLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgZDMuZXZlbnQgPSBlMTtcbiAgICAgICAgZGlzcGF0Y2hbZTEudHlwZV0uYXBwbHkodGhpeiwgYXJndW1lbnR6KTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGQzLmV2ZW50ID0gZTA7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gZGlzcGF0Y2g7XG59XG5kMy5yZXF1b3RlID0gZnVuY3Rpb24ocykge1xuICByZXR1cm4gcy5yZXBsYWNlKGQzX3JlcXVvdGVfcmUsIFwiXFxcXCQmXCIpO1xufTtcblxudmFyIGQzX3JlcXVvdGVfcmUgPSAvW1xcXFxcXF5cXCRcXCpcXCtcXD9cXHxcXFtcXF1cXChcXClcXC5cXHtcXH1dL2c7XG52YXIgZDNfc3ViY2xhc3MgPSB7fS5fX3Byb3RvX18/XG5cbi8vIFVudGlsIEVDTUFTY3JpcHQgc3VwcG9ydHMgYXJyYXkgc3ViY2xhc3NpbmcsIHByb3RvdHlwZSBpbmplY3Rpb24gd29ya3Mgd2VsbC5cbmZ1bmN0aW9uKG9iamVjdCwgcHJvdG90eXBlKSB7XG4gIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG59OlxuXG4vLyBBbmQgaWYgeW91ciBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBfX3Byb3RvX18sIHdlJ2xsIHVzZSBkaXJlY3QgZXh0ZW5zaW9uLlxuZnVuY3Rpb24ob2JqZWN0LCBwcm90b3R5cGUpIHtcbiAgZm9yICh2YXIgcHJvcGVydHkgaW4gcHJvdG90eXBlKSBvYmplY3RbcHJvcGVydHldID0gcHJvdG90eXBlW3Byb3BlcnR5XTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbihncm91cHMpIHtcbiAgZDNfc3ViY2xhc3MoZ3JvdXBzLCBkM19zZWxlY3Rpb25Qcm90b3R5cGUpO1xuICByZXR1cm4gZ3JvdXBzO1xufVxuXG52YXIgZDNfc2VsZWN0ID0gZnVuY3Rpb24ocywgbikgeyByZXR1cm4gbi5xdWVyeVNlbGVjdG9yKHMpOyB9LFxuICAgIGQzX3NlbGVjdEFsbCA9IGZ1bmN0aW9uKHMsIG4pIHsgcmV0dXJuIG4ucXVlcnlTZWxlY3RvckFsbChzKTsgfSxcbiAgICBkM19zZWxlY3RNYXRjaGVzID0gZnVuY3Rpb24obiwgcykge1xuICAgICAgdmFyIGQzX3NlbGVjdE1hdGNoZXIgPSBuLm1hdGNoZXMgfHwgbltkM192ZW5kb3JTeW1ib2wobiwgXCJtYXRjaGVzU2VsZWN0b3JcIildO1xuICAgICAgZDNfc2VsZWN0TWF0Y2hlcyA9IGZ1bmN0aW9uKG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIGQzX3NlbGVjdE1hdGNoZXIuY2FsbChuLCBzKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gZDNfc2VsZWN0TWF0Y2hlcyhuLCBzKTtcbiAgICB9O1xuXG4vLyBQcmVmZXIgU2l6emxlLCBpZiBhdmFpbGFibGUuXG5pZiAodHlwZW9mIFNpenpsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gIGQzX3NlbGVjdCA9IGZ1bmN0aW9uKHMsIG4pIHsgcmV0dXJuIFNpenpsZShzLCBuKVswXSB8fCBudWxsOyB9O1xuICBkM19zZWxlY3RBbGwgPSBTaXp6bGU7XG4gIGQzX3NlbGVjdE1hdGNoZXMgPSBTaXp6bGUubWF0Y2hlc1NlbGVjdG9yO1xufVxuXG5kMy5zZWxlY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGQzLnNlbGVjdChkM19kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpO1xufTtcblxudmFyIGQzX3NlbGVjdGlvblByb3RvdHlwZSA9IGQzLnNlbGVjdGlvbi5wcm90b3R5cGUgPSBbXTtcblxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgdmFyIHN1Ymdyb3VwcyA9IFtdLFxuICAgICAgc3ViZ3JvdXAsXG4gICAgICBzdWJub2RlLFxuICAgICAgZ3JvdXAsXG4gICAgICBub2RlO1xuXG4gIHNlbGVjdG9yID0gZDNfc2VsZWN0aW9uX3NlbGVjdG9yKHNlbGVjdG9yKTtcblxuICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTspIHtcbiAgICBzdWJncm91cHMucHVzaChzdWJncm91cCA9IFtdKTtcbiAgICBzdWJncm91cC5wYXJlbnROb2RlID0gKGdyb3VwID0gdGhpc1tqXSkucGFyZW50Tm9kZTtcbiAgICBmb3IgKHZhciBpID0gLTEsIG4gPSBncm91cC5sZW5ndGg7ICsraSA8IG47KSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2goc3Vibm9kZSA9IHNlbGVjdG9yLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaikpO1xuICAgICAgICBpZiAoc3Vibm9kZSAmJiBcIl9fZGF0YV9fXCIgaW4gbm9kZSkgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJncm91cC5wdXNoKG51bGwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkM19zZWxlY3Rpb24oc3ViZ3JvdXBzKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9zZWxlY3RvcihzZWxlY3Rvcikge1xuICByZXR1cm4gdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgPyBzZWxlY3RvciA6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19zZWxlY3Qoc2VsZWN0b3IsIHRoaXMpO1xuICB9O1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuc2VsZWN0QWxsID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgdmFyIHN1Ymdyb3VwcyA9IFtdLFxuICAgICAgc3ViZ3JvdXAsXG4gICAgICBub2RlO1xuXG4gIHNlbGVjdG9yID0gZDNfc2VsZWN0aW9uX3NlbGVjdG9yQWxsKHNlbGVjdG9yKTtcblxuICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTspIHtcbiAgICBmb3IgKHZhciBncm91cCA9IHRoaXNbal0sIGkgPSAtMSwgbiA9IGdyb3VwLmxlbmd0aDsgKytpIDwgbjspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc3ViZ3JvdXBzLnB1c2goc3ViZ3JvdXAgPSBkM19hcnJheShzZWxlY3Rvci5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGopKSk7XG4gICAgICAgIHN1Ymdyb3VwLnBhcmVudE5vZGUgPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkM19zZWxlY3Rpb24oc3ViZ3JvdXBzKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9zZWxlY3RvckFsbChzZWxlY3Rvcikge1xuICByZXR1cm4gdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgPyBzZWxlY3RvciA6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19zZWxlY3RBbGwoc2VsZWN0b3IsIHRoaXMpO1xuICB9O1xufVxudmFyIGQzX25zWGh0bWwgPSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIjtcblxudmFyIGQzX25zUHJlZml4ID0ge1xuICBzdmc6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcbiAgeGh0bWw6IGQzX25zWGh0bWwsXG4gIHhsaW5rOiBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIixcbiAgeG1sOiBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiLFxuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiXG59O1xuXG5kMy5ucyA9IHtcbiAgcHJlZml4OiBkM19uc1ByZWZpeCxcbiAgcXVhbGlmeTogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gbmFtZS5pbmRleE9mKFwiOlwiKSwgcHJlZml4ID0gbmFtZTtcbiAgICBpZiAoaSA+PSAwICYmIChwcmVmaXggPSBuYW1lLnNsaWNlKDAsIGkpKSAhPT0gXCJ4bWxuc1wiKSBuYW1lID0gbmFtZS5zbGljZShpICsgMSk7XG4gICAgcmV0dXJuIGQzX25zUHJlZml4Lmhhc093blByb3BlcnR5KHByZWZpeCkgPyB7c3BhY2U6IGQzX25zUHJlZml4W3ByZWZpeF0sIGxvY2FsOiBuYW1lfSA6IG5hbWU7XG4gIH1cbn07XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5hdHRyID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG5cbiAgICAvLyBGb3IgYXR0cihzdHJpbmcpLCByZXR1cm4gdGhlIGF0dHJpYnV0ZSB2YWx1ZSBmb3IgdGhlIGZpcnN0IG5vZGUuXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZSgpO1xuICAgICAgbmFtZSA9IGQzLm5zLnF1YWxpZnkobmFtZSk7XG4gICAgICByZXR1cm4gbmFtZS5sb2NhbFxuICAgICAgICAgID8gbm9kZS5nZXRBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKVxuICAgICAgICAgIDogbm9kZS5nZXRBdHRyaWJ1dGUobmFtZSk7XG4gICAgfVxuXG4gICAgLy8gRm9yIGF0dHIob2JqZWN0KSwgdGhlIG9iamVjdCBzcGVjaWZpZXMgdGhlIG5hbWVzIGFuZCB2YWx1ZXMgb2YgdGhlXG4gICAgLy8gYXR0cmlidXRlcyB0byBzZXQgb3IgcmVtb3ZlLiBUaGUgdmFsdWVzIG1heSBiZSBmdW5jdGlvbnMgdGhhdCBhcmVcbiAgICAvLyBldmFsdWF0ZWQgZm9yIGVhY2ggZWxlbWVudC5cbiAgICBmb3IgKHZhbHVlIGluIG5hbWUpIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fYXR0cih2YWx1ZSwgbmFtZVt2YWx1ZV0pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX2F0dHIobmFtZSwgdmFsdWUpKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9hdHRyKG5hbWUsIHZhbHVlKSB7XG4gIG5hbWUgPSBkMy5ucy5xdWFsaWZ5KG5hbWUpO1xuXG4gIC8vIEZvciBhdHRyKHN0cmluZywgbnVsbCksIHJlbW92ZSB0aGUgYXR0cmlidXRlIHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLlxuICBmdW5jdGlvbiBhdHRyTnVsbCgpIHtcbiAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgfVxuICBmdW5jdGlvbiBhdHRyTnVsbE5TKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMobmFtZS5zcGFjZSwgbmFtZS5sb2NhbCk7XG4gIH1cblxuICAvLyBGb3IgYXR0cihzdHJpbmcsIHN0cmluZyksIHNldCB0aGUgYXR0cmlidXRlIHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLlxuICBmdW5jdGlvbiBhdHRyQ29uc3RhbnQoKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICB9XG4gIGZ1bmN0aW9uIGF0dHJDb25zdGFudE5TKCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlTlMobmFtZS5zcGFjZSwgbmFtZS5sb2NhbCwgdmFsdWUpO1xuICB9XG5cbiAgLy8gRm9yIGF0dHIoc3RyaW5nLCBmdW5jdGlvbiksIGV2YWx1YXRlIHRoZSBmdW5jdGlvbiBmb3IgZWFjaCBlbGVtZW50LCBhbmQgc2V0XG4gIC8vIG9yIHJlbW92ZSB0aGUgYXR0cmlidXRlIGFzIGFwcHJvcHJpYXRlLlxuICBmdW5jdGlvbiBhdHRyRnVuY3Rpb24oKSB7XG4gICAgdmFyIHggPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh4ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgeCk7XG4gIH1cbiAgZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoKSB7XG4gICAgdmFyIHggPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh4ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMobmFtZS5zcGFjZSwgbmFtZS5sb2NhbCk7XG4gICAgZWxzZSB0aGlzLnNldEF0dHJpYnV0ZU5TKG5hbWUuc3BhY2UsIG5hbWUubG9jYWwsIHgpO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlID09IG51bGxcbiAgICAgID8gKG5hbWUubG9jYWwgPyBhdHRyTnVsbE5TIDogYXR0ck51bGwpIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IChuYW1lLmxvY2FsID8gYXR0ckZ1bmN0aW9uTlMgOiBhdHRyRnVuY3Rpb24pXG4gICAgICA6IChuYW1lLmxvY2FsID8gYXR0ckNvbnN0YW50TlMgOiBhdHRyQ29uc3RhbnQpKTtcbn1cbmZ1bmN0aW9uIGQzX2NvbGxhcHNlKHMpIHtcbiAgcmV0dXJuIHMudHJpbSgpLnJlcGxhY2UoL1xccysvZywgXCIgXCIpO1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuY2xhc3NlZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuXG4gICAgLy8gRm9yIGNsYXNzZWQoc3RyaW5nKSwgcmV0dXJuIHRydWUgb25seSBpZiB0aGUgZmlyc3Qgbm9kZSBoYXMgdGhlIHNwZWNpZmllZFxuICAgIC8vIGNsYXNzIG9yIGNsYXNzZXMuIE5vdGUgdGhhdCBldmVuIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIERPTVRva2VuTGlzdCwgaXRcbiAgICAvLyBwcm9iYWJseSBkb2Vzbid0IHN1cHBvcnQgaXQgb24gU1ZHIGVsZW1lbnRzICh3aGljaCBjYW4gYmUgYW5pbWF0ZWQpLlxuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdmFyIG5vZGUgPSB0aGlzLm5vZGUoKSxcbiAgICAgICAgICBuID0gKG5hbWUgPSBkM19zZWxlY3Rpb25fY2xhc3NlcyhuYW1lKSkubGVuZ3RoLFxuICAgICAgICAgIGkgPSAtMTtcbiAgICAgIGlmICh2YWx1ZSA9IG5vZGUuY2xhc3NMaXN0KSB7XG4gICAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoIXZhbHVlLmNvbnRhaW5zKG5hbWVbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7XG4gICAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoIWQzX3NlbGVjdGlvbl9jbGFzc2VkUmUobmFtZVtpXSkudGVzdCh2YWx1ZSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIEZvciBjbGFzc2VkKG9iamVjdCksIHRoZSBvYmplY3Qgc3BlY2lmaWVzIHRoZSBuYW1lcyBvZiBjbGFzc2VzIHRvIGFkZCBvclxuICAgIC8vIHJlbW92ZS4gVGhlIHZhbHVlcyBtYXkgYmUgZnVuY3Rpb25zIHRoYXQgYXJlIGV2YWx1YXRlZCBmb3IgZWFjaCBlbGVtZW50LlxuICAgIGZvciAodmFsdWUgaW4gbmFtZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9jbGFzc2VkKHZhbHVlLCBuYW1lW3ZhbHVlXSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gT3RoZXJ3aXNlLCBib3RoIGEgbmFtZSBhbmQgYSB2YWx1ZSBhcmUgc3BlY2lmaWVkLCBhbmQgYXJlIGhhbmRsZWQgYXMgYmVsb3cuXG4gIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX2NsYXNzZWQobmFtZSwgdmFsdWUpKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9jbGFzc2VkUmUobmFtZSkge1xuICByZXR1cm4gbmV3IFJlZ0V4cChcIig/Ol58XFxcXHMrKVwiICsgZDMucmVxdW90ZShuYW1lKSArIFwiKD86XFxcXHMrfCQpXCIsIFwiZ1wiKTtcbn1cblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZXMobmFtZSkge1xuICByZXR1cm4gKG5hbWUgKyBcIlwiKS50cmltKCkuc3BsaXQoL158XFxzKy8pO1xufVxuXG4vLyBNdWx0aXBsZSBjbGFzcyBuYW1lcyBhcmUgYWxsb3dlZCAoZS5nLiwgXCJmb28gYmFyXCIpLlxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZWQobmFtZSwgdmFsdWUpIHtcbiAgbmFtZSA9IGQzX3NlbGVjdGlvbl9jbGFzc2VzKG5hbWUpLm1hcChkM19zZWxlY3Rpb25fY2xhc3NlZE5hbWUpO1xuICB2YXIgbiA9IG5hbWUubGVuZ3RoO1xuXG4gIGZ1bmN0aW9uIGNsYXNzZWRDb25zdGFudCgpIHtcbiAgICB2YXIgaSA9IC0xO1xuICAgIHdoaWxlICgrK2kgPCBuKSBuYW1lW2ldKHRoaXMsIHZhbHVlKTtcbiAgfVxuXG4gIC8vIFdoZW4gdGhlIHZhbHVlIGlzIGEgZnVuY3Rpb24sIHRoZSBmdW5jdGlvbiBpcyBzdGlsbCBldmFsdWF0ZWQgb25seSBvbmNlIHBlclxuICAvLyBlbGVtZW50IGV2ZW4gaWYgdGhlcmUgYXJlIG11bHRpcGxlIGNsYXNzIG5hbWVzLlxuICBmdW5jdGlvbiBjbGFzc2VkRnVuY3Rpb24oKSB7XG4gICAgdmFyIGkgPSAtMSwgeCA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgd2hpbGUgKCsraSA8IG4pIG5hbWVbaV0odGhpcywgeCk7XG4gIH1cblxuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gY2xhc3NlZEZ1bmN0aW9uXG4gICAgICA6IGNsYXNzZWRDb25zdGFudDtcbn1cblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZWROYW1lKG5hbWUpIHtcbiAgdmFyIHJlID0gZDNfc2VsZWN0aW9uX2NsYXNzZWRSZShuYW1lKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUsIHZhbHVlKSB7XG4gICAgaWYgKGMgPSBub2RlLmNsYXNzTGlzdCkgcmV0dXJuIHZhbHVlID8gYy5hZGQobmFtZSkgOiBjLnJlbW92ZShuYW1lKTtcbiAgICB2YXIgYyA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIjtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHJlLmxhc3RJbmRleCA9IDA7XG4gICAgICBpZiAoIXJlLnRlc3QoYykpIG5vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgZDNfY29sbGFwc2UoYyArIFwiIFwiICsgbmFtZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIGQzX2NvbGxhcHNlKGMucmVwbGFjZShyZSwgXCIgXCIpKSk7XG4gICAgfVxuICB9O1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuc3R5bGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgdmFyIG4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAobiA8IDMpIHtcblxuICAgIC8vIEZvciBzdHlsZShvYmplY3QpIG9yIHN0eWxlKG9iamVjdCwgc3RyaW5nKSwgdGhlIG9iamVjdCBzcGVjaWZpZXMgdGhlXG4gICAgLy8gbmFtZXMgYW5kIHZhbHVlcyBvZiB0aGUgYXR0cmlidXRlcyB0byBzZXQgb3IgcmVtb3ZlLiBUaGUgdmFsdWVzIG1heSBiZVxuICAgIC8vIGZ1bmN0aW9ucyB0aGF0IGFyZSBldmFsdWF0ZWQgZm9yIGVhY2ggZWxlbWVudC4gVGhlIG9wdGlvbmFsIHN0cmluZ1xuICAgIC8vIHNwZWNpZmllcyB0aGUgcHJpb3JpdHkuXG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICBpZiAobiA8IDIpIHZhbHVlID0gXCJcIjtcbiAgICAgIGZvciAocHJpb3JpdHkgaW4gbmFtZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9zdHlsZShwcmlvcml0eSwgbmFtZVtwcmlvcml0eV0sIHZhbHVlKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBGb3Igc3R5bGUoc3RyaW5nKSwgcmV0dXJuIHRoZSBjb21wdXRlZCBzdHlsZSB2YWx1ZSBmb3IgdGhlIGZpcnN0IG5vZGUuXG4gICAgaWYgKG4gPCAyKSB7XG4gICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZSgpO1xuICAgICAgcmV0dXJuIGQzX3dpbmRvdyhub2RlKS5nZXRDb21wdXRlZFN0eWxlKG5vZGUsIG51bGwpLmdldFByb3BlcnR5VmFsdWUobmFtZSk7XG4gICAgfVxuXG4gICAgLy8gRm9yIHN0eWxlKHN0cmluZywgc3RyaW5nKSBvciBzdHlsZShzdHJpbmcsIGZ1bmN0aW9uKSwgdXNlIHRoZSBkZWZhdWx0XG4gICAgLy8gcHJpb3JpdHkuIFRoZSBwcmlvcml0eSBpcyBpZ25vcmVkIGZvciBzdHlsZShzdHJpbmcsIG51bGwpLlxuICAgIHByaW9yaXR5ID0gXCJcIjtcbiAgfVxuXG4gIC8vIE90aGVyd2lzZSwgYSBuYW1lLCB2YWx1ZSBhbmQgcHJpb3JpdHkgYXJlIHNwZWNpZmllZCwgYW5kIGhhbmRsZWQgYXMgYmVsb3cuXG4gIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX3N0eWxlKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3N0eWxlKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuXG4gIC8vIEZvciBzdHlsZShuYW1lLCBudWxsKSBvciBzdHlsZShuYW1lLCBudWxsLCBwcmlvcml0eSksIHJlbW92ZSB0aGUgc3R5bGVcbiAgLy8gcHJvcGVydHkgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuIFRoZSBwcmlvcml0eSBpcyBpZ25vcmVkLlxuICBmdW5jdGlvbiBzdHlsZU51bGwoKSB7XG4gICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgfVxuXG4gIC8vIEZvciBzdHlsZShuYW1lLCBzdHJpbmcpIG9yIHN0eWxlKG5hbWUsIHN0cmluZywgcHJpb3JpdHkpLCBzZXQgdGhlIHN0eWxlXG4gIC8vIHByb3BlcnR5IHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLCB1c2luZyB0aGUgc3BlY2lmaWVkIHByaW9yaXR5LlxuICBmdW5jdGlvbiBzdHlsZUNvbnN0YW50KCkge1xuICAgIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUsIHByaW9yaXR5KTtcbiAgfVxuXG4gIC8vIEZvciBzdHlsZShuYW1lLCBmdW5jdGlvbikgb3Igc3R5bGUobmFtZSwgZnVuY3Rpb24sIHByaW9yaXR5KSwgZXZhbHVhdGUgdGhlXG4gIC8vIGZ1bmN0aW9uIGZvciBlYWNoIGVsZW1lbnQsIGFuZCBzZXQgb3IgcmVtb3ZlIHRoZSBzdHlsZSBwcm9wZXJ0eSBhc1xuICAvLyBhcHByb3ByaWF0ZS4gV2hlbiBzZXR0aW5nLCB1c2UgdGhlIHNwZWNpZmllZCBwcmlvcml0eS5cbiAgZnVuY3Rpb24gc3R5bGVGdW5jdGlvbigpIHtcbiAgICB2YXIgeCA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHggPT0gbnVsbCkgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgICBlbHNlIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgeCwgcHJpb3JpdHkpO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlID09IG51bGxcbiAgICAgID8gc3R5bGVOdWxsIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IHN0eWxlRnVuY3Rpb24gOiBzdHlsZUNvbnN0YW50KTtcbn1cblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLnByb3BlcnR5ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG5cbiAgICAvLyBGb3IgcHJvcGVydHkoc3RyaW5nKSwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBmb3IgdGhlIGZpcnN0IG5vZGUuXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSByZXR1cm4gdGhpcy5ub2RlKClbbmFtZV07XG5cbiAgICAvLyBGb3IgcHJvcGVydHkob2JqZWN0KSwgdGhlIG9iamVjdCBzcGVjaWZpZXMgdGhlIG5hbWVzIGFuZCB2YWx1ZXMgb2YgdGhlXG4gICAgLy8gcHJvcGVydGllcyB0byBzZXQgb3IgcmVtb3ZlLiBUaGUgdmFsdWVzIG1heSBiZSBmdW5jdGlvbnMgdGhhdCBhcmVcbiAgICAvLyBldmFsdWF0ZWQgZm9yIGVhY2ggZWxlbWVudC5cbiAgICBmb3IgKHZhbHVlIGluIG5hbWUpIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fcHJvcGVydHkodmFsdWUsIG5hbWVbdmFsdWVdKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBPdGhlcndpc2UsIGJvdGggYSBuYW1lIGFuZCBhIHZhbHVlIGFyZSBzcGVjaWZpZWQsIGFuZCBhcmUgaGFuZGxlZCBhcyBiZWxvdy5cbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fcHJvcGVydHkobmFtZSwgdmFsdWUpKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9wcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuXG4gIC8vIEZvciBwcm9wZXJ0eShuYW1lLCBudWxsKSwgcmVtb3ZlIHRoZSBwcm9wZXJ0eSB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZS5cbiAgZnVuY3Rpb24gcHJvcGVydHlOdWxsKCkge1xuICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICB9XG5cbiAgLy8gRm9yIHByb3BlcnR5KG5hbWUsIHN0cmluZyksIHNldCB0aGUgcHJvcGVydHkgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gIGZ1bmN0aW9uIHByb3BlcnR5Q29uc3RhbnQoKSB7XG4gICAgdGhpc1tuYW1lXSA9IHZhbHVlO1xuICB9XG5cbiAgLy8gRm9yIHByb3BlcnR5KG5hbWUsIGZ1bmN0aW9uKSwgZXZhbHVhdGUgdGhlIGZ1bmN0aW9uIGZvciBlYWNoIGVsZW1lbnQsIGFuZFxuICAvLyBzZXQgb3IgcmVtb3ZlIHRoZSBwcm9wZXJ0eSBhcyBhcHByb3ByaWF0ZS5cbiAgZnVuY3Rpb24gcHJvcGVydHlGdW5jdGlvbigpIHtcbiAgICB2YXIgeCA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHggPT0gbnVsbCkgZGVsZXRlIHRoaXNbbmFtZV07XG4gICAgZWxzZSB0aGlzW25hbWVdID0geDtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZSA9PSBudWxsXG4gICAgICA/IHByb3BlcnR5TnVsbCA6ICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBwcm9wZXJ0eUZ1bmN0aW9uIDogcHJvcGVydHlDb25zdGFudCk7XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS50ZXh0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IGZ1bmN0aW9uKCkgeyB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IHRoaXMudGV4dENvbnRlbnQgPSB2ID09IG51bGwgPyBcIlwiIDogdjsgfSA6IHZhbHVlID09IG51bGxcbiAgICAgID8gZnVuY3Rpb24oKSB7IHRoaXMudGV4dENvbnRlbnQgPSBcIlwiOyB9XG4gICAgICA6IGZ1bmN0aW9uKCkgeyB0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7IH0pXG4gICAgICA6IHRoaXMubm9kZSgpLnRleHRDb250ZW50O1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmh0bWwgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2godHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gZnVuY3Rpb24oKSB7IHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgdGhpcy5pbm5lckhUTUwgPSB2ID09IG51bGwgPyBcIlwiIDogdjsgfSA6IHZhbHVlID09IG51bGxcbiAgICAgID8gZnVuY3Rpb24oKSB7IHRoaXMuaW5uZXJIVE1MID0gXCJcIjsgfVxuICAgICAgOiBmdW5jdGlvbigpIHsgdGhpcy5pbm5lckhUTUwgPSB2YWx1ZTsgfSlcbiAgICAgIDogdGhpcy5ub2RlKCkuaW5uZXJIVE1MO1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgbmFtZSA9IGQzX3NlbGVjdGlvbl9jcmVhdG9yKG5hbWUpO1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQobmFtZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fY3JlYXRvcihuYW1lKSB7XG5cbiAgZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgIHZhciBkb2N1bWVudCA9IHRoaXMub3duZXJEb2N1bWVudCxcbiAgICAgICAgbmFtZXNwYWNlID0gdGhpcy5uYW1lc3BhY2VVUkk7XG4gICAgcmV0dXJuIG5hbWVzcGFjZSA9PT0gZDNfbnNYaHRtbCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJID09PSBkM19uc1hodG1sXG4gICAgICAgID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKVxuICAgICAgICA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lc3BhY2UsIG5hbWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlTlMoKSB7XG4gICAgcmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZS5zcGFjZSwgbmFtZS5sb2NhbCk7XG4gIH1cblxuICByZXR1cm4gdHlwZW9mIG5hbWUgPT09IFwiZnVuY3Rpb25cIiA/IG5hbWVcbiAgICAgIDogKG5hbWUgPSBkMy5ucy5xdWFsaWZ5KG5hbWUpKS5sb2NhbCA/IGNyZWF0ZU5TXG4gICAgICA6IGNyZWF0ZTtcbn1cblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uKG5hbWUsIGJlZm9yZSkge1xuICBuYW1lID0gZDNfc2VsZWN0aW9uX2NyZWF0b3IobmFtZSk7XG4gIGJlZm9yZSA9IGQzX3NlbGVjdGlvbl9zZWxlY3RvcihiZWZvcmUpO1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zZXJ0QmVmb3JlKG5hbWUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgYmVmb3JlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgbnVsbCk7XG4gIH0pO1xufTtcblxuLy8gVE9ETyByZW1vdmUoc2VsZWN0b3IpP1xuLy8gVE9ETyByZW1vdmUobm9kZSk/XG4vLyBUT0RPIHJlbW92ZShmdW5jdGlvbik/XG5kM19zZWxlY3Rpb25Qcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uUmVtb3ZlKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvblJlbW92ZSgpIHtcbiAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xufVxuXG5kMy5zZXQgPSBmdW5jdGlvbihhcnJheSkge1xuICB2YXIgc2V0ID0gbmV3IGQzX1NldDtcbiAgaWYgKGFycmF5KSBmb3IgKHZhciBpID0gMCwgbiA9IGFycmF5Lmxlbmd0aDsgaSA8IG47ICsraSkgc2V0LmFkZChhcnJheVtpXSk7XG4gIHJldHVybiBzZXQ7XG59O1xuXG5mdW5jdGlvbiBkM19TZXQoKSB7XG4gIHRoaXMuXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5cbmQzX2NsYXNzKGQzX1NldCwge1xuICBoYXM6IGQzX21hcF9oYXMsXG4gIGFkZDogZnVuY3Rpb24oa2V5KSB7XG4gICAgdGhpcy5fW2QzX21hcF9lc2NhcGUoa2V5ICs9IFwiXCIpXSA9IHRydWU7XG4gICAgcmV0dXJuIGtleTtcbiAgfSxcbiAgcmVtb3ZlOiBkM19tYXBfcmVtb3ZlLFxuICB2YWx1ZXM6IGQzX21hcF9rZXlzLFxuICBzaXplOiBkM19tYXBfc2l6ZSxcbiAgZW1wdHk6IGQzX21hcF9lbXB0eSxcbiAgZm9yRWFjaDogZnVuY3Rpb24oZikge1xuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIGYuY2FsbCh0aGlzLCBkM19tYXBfdW5lc2NhcGUoa2V5KSk7XG4gIH1cbn0pO1xuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuZGF0YSA9IGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgdmFyIGkgPSAtMSxcbiAgICAgIG4gPSB0aGlzLmxlbmd0aCxcbiAgICAgIGdyb3VwLFxuICAgICAgbm9kZTtcblxuICAvLyBJZiBubyB2YWx1ZSBpcyBzcGVjaWZpZWQsIHJldHVybiB0aGUgZmlyc3QgdmFsdWUuXG4gIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIHZhbHVlID0gbmV3IEFycmF5KG4gPSAoZ3JvdXAgPSB0aGlzWzBdKS5sZW5ndGgpO1xuICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHZhbHVlW2ldID0gbm9kZS5fX2RhdGFfXztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gYmluZChncm91cCwgZ3JvdXBEYXRhKSB7XG4gICAgdmFyIGksXG4gICAgICAgIG4gPSBncm91cC5sZW5ndGgsXG4gICAgICAgIG0gPSBncm91cERhdGEubGVuZ3RoLFxuICAgICAgICBuMCA9IE1hdGgubWluKG4sIG0pLFxuICAgICAgICB1cGRhdGVOb2RlcyA9IG5ldyBBcnJheShtKSxcbiAgICAgICAgZW50ZXJOb2RlcyA9IG5ldyBBcnJheShtKSxcbiAgICAgICAgZXhpdE5vZGVzID0gbmV3IEFycmF5KG4pLFxuICAgICAgICBub2RlLFxuICAgICAgICBub2RlRGF0YTtcblxuICAgIGlmIChrZXkpIHtcbiAgICAgIHZhciBub2RlQnlLZXlWYWx1ZSA9IG5ldyBkM19NYXAsXG4gICAgICAgICAga2V5VmFsdWVzID0gbmV3IEFycmF5KG4pLFxuICAgICAgICAgIGtleVZhbHVlO1xuXG4gICAgICBmb3IgKGkgPSAtMTsgKytpIDwgbjspIHtcbiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICAgIGlmIChub2RlQnlLZXlWYWx1ZS5oYXMoa2V5VmFsdWUgPSBrZXkuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpKSkpIHtcbiAgICAgICAgICAgIGV4aXROb2Rlc1tpXSA9IG5vZGU7IC8vIGR1cGxpY2F0ZSBzZWxlY3Rpb24ga2V5XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vZGVCeUtleVZhbHVlLnNldChrZXlWYWx1ZSwgbm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGtleVZhbHVlc1tpXSA9IGtleVZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAoaSA9IC0xOyArK2kgPCBtOykge1xuICAgICAgICBpZiAoIShub2RlID0gbm9kZUJ5S2V5VmFsdWUuZ2V0KGtleVZhbHVlID0ga2V5LmNhbGwoZ3JvdXBEYXRhLCBub2RlRGF0YSA9IGdyb3VwRGF0YVtpXSwgaSkpKSkge1xuICAgICAgICAgIGVudGVyTm9kZXNbaV0gPSBkM19zZWxlY3Rpb25fZGF0YU5vZGUobm9kZURhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKG5vZGUgIT09IHRydWUpIHsgLy8gbm8gZHVwbGljYXRlIGRhdGEga2V5XG4gICAgICAgICAgdXBkYXRlTm9kZXNbaV0gPSBub2RlO1xuICAgICAgICAgIG5vZGUuX19kYXRhX18gPSBub2RlRGF0YTtcbiAgICAgICAgfVxuICAgICAgICBub2RlQnlLZXlWYWx1ZS5zZXQoa2V5VmFsdWUsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGkgPSAtMTsgKytpIDwgbjspIHtcbiAgICAgICAgaWYgKGkgaW4ga2V5VmFsdWVzICYmIG5vZGVCeUtleVZhbHVlLmdldChrZXlWYWx1ZXNbaV0pICE9PSB0cnVlKSB7XG4gICAgICAgICAgZXhpdE5vZGVzW2ldID0gZ3JvdXBbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChpID0gLTE7ICsraSA8IG4wOykge1xuICAgICAgICBub2RlID0gZ3JvdXBbaV07XG4gICAgICAgIG5vZGVEYXRhID0gZ3JvdXBEYXRhW2ldO1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuX19kYXRhX18gPSBub2RlRGF0YTtcbiAgICAgICAgICB1cGRhdGVOb2Rlc1tpXSA9IG5vZGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZW50ZXJOb2Rlc1tpXSA9IGQzX3NlbGVjdGlvbl9kYXRhTm9kZShub2RlRGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoOyBpIDwgbTsgKytpKSB7XG4gICAgICAgIGVudGVyTm9kZXNbaV0gPSBkM19zZWxlY3Rpb25fZGF0YU5vZGUoZ3JvdXBEYXRhW2ldKTtcbiAgICAgIH1cbiAgICAgIGZvciAoOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGV4aXROb2Rlc1tpXSA9IGdyb3VwW2ldO1xuICAgICAgfVxuICAgIH1cblxuICAgIGVudGVyTm9kZXMudXBkYXRlXG4gICAgICAgID0gdXBkYXRlTm9kZXM7XG5cbiAgICBlbnRlck5vZGVzLnBhcmVudE5vZGVcbiAgICAgICAgPSB1cGRhdGVOb2Rlcy5wYXJlbnROb2RlXG4gICAgICAgID0gZXhpdE5vZGVzLnBhcmVudE5vZGVcbiAgICAgICAgPSBncm91cC5wYXJlbnROb2RlO1xuXG4gICAgZW50ZXIucHVzaChlbnRlck5vZGVzKTtcbiAgICB1cGRhdGUucHVzaCh1cGRhdGVOb2Rlcyk7XG4gICAgZXhpdC5wdXNoKGV4aXROb2Rlcyk7XG4gIH1cblxuICB2YXIgZW50ZXIgPSBkM19zZWxlY3Rpb25fZW50ZXIoW10pLFxuICAgICAgdXBkYXRlID0gZDNfc2VsZWN0aW9uKFtdKSxcbiAgICAgIGV4aXQgPSBkM19zZWxlY3Rpb24oW10pO1xuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICBiaW5kKGdyb3VwID0gdGhpc1tpXSwgdmFsdWUuY2FsbChncm91cCwgZ3JvdXAucGFyZW50Tm9kZS5fX2RhdGFfXywgaSkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgYmluZChncm91cCA9IHRoaXNbaV0sIHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGUuZW50ZXIgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGVudGVyOyB9O1xuICB1cGRhdGUuZXhpdCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gZXhpdDsgfTtcbiAgcmV0dXJuIHVwZGF0ZTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9kYXRhTm9kZShkYXRhKSB7XG4gIHJldHVybiB7X19kYXRhX186IGRhdGF9O1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuZGF0dW0gPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLnByb3BlcnR5KFwiX19kYXRhX19cIiwgdmFsdWUpXG4gICAgICA6IHRoaXMucHJvcGVydHkoXCJfX2RhdGFfX1wiKTtcbn07XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbihmaWx0ZXIpIHtcbiAgdmFyIHN1Ymdyb3VwcyA9IFtdLFxuICAgICAgc3ViZ3JvdXAsXG4gICAgICBncm91cCxcbiAgICAgIG5vZGU7XG5cbiAgaWYgKHR5cGVvZiBmaWx0ZXIgIT09IFwiZnVuY3Rpb25cIikgZmlsdGVyID0gZDNfc2VsZWN0aW9uX2ZpbHRlcihmaWx0ZXIpO1xuXG4gIGZvciAodmFyIGogPSAwLCBtID0gdGhpcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICBzdWJncm91cHMucHVzaChzdWJncm91cCA9IFtdKTtcbiAgICBzdWJncm91cC5wYXJlbnROb2RlID0gKGdyb3VwID0gdGhpc1tqXSkucGFyZW50Tm9kZTtcbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIGZpbHRlci5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGopKSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGQzX3NlbGVjdGlvbihzdWJncm91cHMpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2ZpbHRlcihzZWxlY3Rvcikge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX3NlbGVjdE1hdGNoZXModGhpcywgc2VsZWN0b3IpO1xuICB9O1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUub3JkZXIgPSBmdW5jdGlvbigpIHtcbiAgZm9yICh2YXIgaiA9IC0xLCBtID0gdGhpcy5sZW5ndGg7ICsraiA8IG07KSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSB0aGlzW2pdLCBpID0gZ3JvdXAubGVuZ3RoIC0gMSwgbmV4dCA9IGdyb3VwW2ldLCBub2RlOyAtLWkgPj0gMDspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgaWYgKG5leHQgJiYgbmV4dCAhPT0gbm9kZS5uZXh0U2libGluZykgbmV4dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBuZXh0KTtcbiAgICAgICAgbmV4dCA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0aGlzO1xufTtcbmQzLmFzY2VuZGluZyA9IGQzX2FzY2VuZGluZztcblxuZnVuY3Rpb24gZDNfYXNjZW5kaW5nKGEsIGIpIHtcbiAgcmV0dXJuIGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiBhID49IGIgPyAwIDogTmFOO1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uKGNvbXBhcmF0b3IpIHtcbiAgY29tcGFyYXRvciA9IGQzX3NlbGVjdGlvbl9zb3J0Q29tcGFyYXRvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTspIHRoaXNbal0uc29ydChjb21wYXJhdG9yKTtcbiAgcmV0dXJuIHRoaXMub3JkZXIoKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9zb3J0Q29tcGFyYXRvcihjb21wYXJhdG9yKSB7XG4gIGlmICghYXJndW1lbnRzLmxlbmd0aCkgY29tcGFyYXRvciA9IGQzX2FzY2VuZGluZztcbiAgcmV0dXJuIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gYSAmJiBiID8gY29tcGFyYXRvcihhLl9fZGF0YV9fLCBiLl9fZGF0YV9fKSA6ICFhIC0gIWI7XG4gIH07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgcmV0dXJuIGQzX3NlbGVjdGlvbl9lYWNoKHRoaXMsIGZ1bmN0aW9uKG5vZGUsIGksIGopIHtcbiAgICBjYWxsYmFjay5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGopO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9lYWNoKGdyb3VwcywgY2FsbGJhY2spIHtcbiAgZm9yICh2YXIgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgaisrKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSBjYWxsYmFjayhub2RlLCBpLCBqKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGdyb3Vwcztcbn1cblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgYXJncyA9IGQzX2FycmF5KGFyZ3VtZW50cyk7XG4gIGNhbGxiYWNrLmFwcGx5KGFyZ3NbMF0gPSB0aGlzLCBhcmdzKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuZW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICF0aGlzLm5vZGUoKTtcbn07XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5ub2RlID0gZnVuY3Rpb24oKSB7XG4gIGZvciAodmFyIGogPSAwLCBtID0gdGhpcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICBmb3IgKHZhciBncm91cCA9IHRoaXNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICB2YXIgbm9kZSA9IGdyb3VwW2ldO1xuICAgICAgaWYgKG5vZGUpIHJldHVybiBub2RlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zaXplID0gZnVuY3Rpb24oKSB7XG4gIHZhciBuID0gMDtcbiAgZDNfc2VsZWN0aW9uX2VhY2godGhpcywgZnVuY3Rpb24oKSB7ICsrbjsgfSk7XG4gIHJldHVybiBuO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2VudGVyKHNlbGVjdGlvbikge1xuICBkM19zdWJjbGFzcyhzZWxlY3Rpb24sIGQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZSk7XG4gIHJldHVybiBzZWxlY3Rpb247XG59XG5cbnZhciBkM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUgPSBbXTtcblxuZDMuc2VsZWN0aW9uLmVudGVyID0gZDNfc2VsZWN0aW9uX2VudGVyO1xuZDMuc2VsZWN0aW9uLmVudGVyLnByb3RvdHlwZSA9IGQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZTtcblxuZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLmFwcGVuZCA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5hcHBlbmQ7XG5kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuZW1wdHkgPSBkM19zZWxlY3Rpb25Qcm90b3R5cGUuZW1wdHk7XG5kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUubm9kZSA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5ub2RlO1xuZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLmNhbGwgPSBkM19zZWxlY3Rpb25Qcm90b3R5cGUuY2FsbDtcbmQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZS5zaXplID0gZDNfc2VsZWN0aW9uUHJvdG90eXBlLnNpemU7XG5cblxuZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHZhciBzdWJncm91cHMgPSBbXSxcbiAgICAgIHN1Ymdyb3VwLFxuICAgICAgc3Vibm9kZSxcbiAgICAgIHVwZ3JvdXAsXG4gICAgICBncm91cCxcbiAgICAgIG5vZGU7XG5cbiAgZm9yICh2YXIgaiA9IC0xLCBtID0gdGhpcy5sZW5ndGg7ICsraiA8IG07KSB7XG4gICAgdXBncm91cCA9IChncm91cCA9IHRoaXNbal0pLnVwZGF0ZTtcbiAgICBzdWJncm91cHMucHVzaChzdWJncm91cCA9IFtdKTtcbiAgICBzdWJncm91cC5wYXJlbnROb2RlID0gZ3JvdXAucGFyZW50Tm9kZTtcbiAgICBmb3IgKHZhciBpID0gLTEsIG4gPSBncm91cC5sZW5ndGg7ICsraSA8IG47KSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2godXBncm91cFtpXSA9IHN1Ym5vZGUgPSBzZWxlY3Rvci5jYWxsKGdyb3VwLnBhcmVudE5vZGUsIG5vZGUuX19kYXRhX18sIGksIGopKTtcbiAgICAgICAgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJncm91cC5wdXNoKG51bGwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkM19zZWxlY3Rpb24oc3ViZ3JvdXBzKTtcbn07XG5cbmQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbihuYW1lLCBiZWZvcmUpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSBiZWZvcmUgPSBkM19zZWxlY3Rpb25fZW50ZXJJbnNlcnRCZWZvcmUodGhpcyk7XG4gIHJldHVybiBkM19zZWxlY3Rpb25Qcm90b3R5cGUuaW5zZXJ0LmNhbGwodGhpcywgbmFtZSwgYmVmb3JlKTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9lbnRlckluc2VydEJlZm9yZShlbnRlcikge1xuICB2YXIgaTAsIGowO1xuICByZXR1cm4gZnVuY3Rpb24oZCwgaSwgaikge1xuICAgIHZhciBncm91cCA9IGVudGVyW2pdLnVwZGF0ZSxcbiAgICAgICAgbiA9IGdyb3VwLmxlbmd0aCxcbiAgICAgICAgbm9kZTtcbiAgICBpZiAoaiAhPSBqMCkgajAgPSBqLCBpMCA9IDA7XG4gICAgaWYgKGkgPj0gaTApIGkwID0gaSArIDE7XG4gICAgd2hpbGUgKCEobm9kZSA9IGdyb3VwW2kwXSkgJiYgKytpMCA8IG4pO1xuICAgIHJldHVybiBub2RlO1xuICB9O1xufVxuXG4vLyBUT0RPIGZhc3Qgc2luZ2xldG9uIGltcGxlbWVudGF0aW9uP1xuZDMuc2VsZWN0ID0gZnVuY3Rpb24obm9kZSkge1xuICB2YXIgZ3JvdXA7XG4gIGlmICh0eXBlb2Ygbm9kZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGdyb3VwID0gW2QzX3NlbGVjdChub2RlLCBkM19kb2N1bWVudCldO1xuICAgIGdyb3VwLnBhcmVudE5vZGUgPSBkM19kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIH0gZWxzZSB7XG4gICAgZ3JvdXAgPSBbbm9kZV07XG4gICAgZ3JvdXAucGFyZW50Tm9kZSA9IGQzX2RvY3VtZW50RWxlbWVudChub2RlKTtcbiAgfVxuICByZXR1cm4gZDNfc2VsZWN0aW9uKFtncm91cF0pO1xufTtcblxuZDMuc2VsZWN0QWxsID0gZnVuY3Rpb24obm9kZXMpIHtcbiAgdmFyIGdyb3VwO1xuICBpZiAodHlwZW9mIG5vZGVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgZ3JvdXAgPSBkM19hcnJheShkM19zZWxlY3RBbGwobm9kZXMsIGQzX2RvY3VtZW50KSk7XG4gICAgZ3JvdXAucGFyZW50Tm9kZSA9IGQzX2RvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgfSBlbHNlIHtcbiAgICBncm91cCA9IGQzX2FycmF5KG5vZGVzKTtcbiAgICBncm91cC5wYXJlbnROb2RlID0gbnVsbDtcbiAgfVxuICByZXR1cm4gZDNfc2VsZWN0aW9uKFtncm91cF0pO1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIsIGNhcHR1cmUpIHtcbiAgdmFyIG4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAobiA8IDMpIHtcblxuICAgIC8vIEZvciBvbihvYmplY3QpIG9yIG9uKG9iamVjdCwgYm9vbGVhbiksIHRoZSBvYmplY3Qgc3BlY2lmaWVzIHRoZSBldmVudFxuICAgIC8vIHR5cGVzIGFuZCBsaXN0ZW5lcnMgdG8gYWRkIG9yIHJlbW92ZS4gVGhlIG9wdGlvbmFsIGJvb2xlYW4gc3BlY2lmaWVzXG4gICAgLy8gd2hldGhlciB0aGUgbGlzdGVuZXIgY2FwdHVyZXMgZXZlbnRzLlxuICAgIGlmICh0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgaWYgKG4gPCAyKSBsaXN0ZW5lciA9IGZhbHNlO1xuICAgICAgZm9yIChjYXB0dXJlIGluIHR5cGUpIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fb24oY2FwdHVyZSwgdHlwZVtjYXB0dXJlXSwgbGlzdGVuZXIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIEZvciBvbihzdHJpbmcpLCByZXR1cm4gdGhlIGxpc3RlbmVyIGZvciB0aGUgZmlyc3Qgbm9kZS5cbiAgICBpZiAobiA8IDIpIHJldHVybiAobiA9IHRoaXMubm9kZSgpW1wiX19vblwiICsgdHlwZV0pICYmIG4uXztcblxuICAgIC8vIEZvciBvbihzdHJpbmcsIGZ1bmN0aW9uKSwgdXNlIHRoZSBkZWZhdWx0IGNhcHR1cmUuXG4gICAgY2FwdHVyZSA9IGZhbHNlO1xuICB9XG5cbiAgLy8gT3RoZXJ3aXNlLCBhIHR5cGUsIGxpc3RlbmVyIGFuZCBjYXB0dXJlIGFyZSBzcGVjaWZpZWQsIGFuZCBoYW5kbGVkIGFzIGJlbG93LlxuICByZXR1cm4gdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9vbih0eXBlLCBsaXN0ZW5lciwgY2FwdHVyZSkpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX29uKHR5cGUsIGxpc3RlbmVyLCBjYXB0dXJlKSB7XG4gIHZhciBuYW1lID0gXCJfX29uXCIgKyB0eXBlLFxuICAgICAgaSA9IHR5cGUuaW5kZXhPZihcIi5cIiksXG4gICAgICB3cmFwID0gZDNfc2VsZWN0aW9uX29uTGlzdGVuZXI7XG5cbiAgaWYgKGkgPiAwKSB0eXBlID0gdHlwZS5zbGljZSgwLCBpKTtcbiAgdmFyIGZpbHRlciA9IGQzX3NlbGVjdGlvbl9vbkZpbHRlcnMuZ2V0KHR5cGUpO1xuICBpZiAoZmlsdGVyKSB0eXBlID0gZmlsdGVyLCB3cmFwID0gZDNfc2VsZWN0aW9uX29uRmlsdGVyO1xuXG4gIGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xuICAgIHZhciBsID0gdGhpc1tuYW1lXTtcbiAgICBpZiAobCkge1xuICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGwsIGwuJCk7XG4gICAgICBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkFkZCgpIHtcbiAgICB2YXIgbCA9IHdyYXAobGlzdGVuZXIsIGQzX2FycmF5KGFyZ3VtZW50cykpO1xuICAgIG9uUmVtb3ZlLmNhbGwodGhpcyk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHR5cGUsIHRoaXNbbmFtZV0gPSBsLCBsLiQgPSBjYXB0dXJlKTtcbiAgICBsLl8gPSBsaXN0ZW5lcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUFsbCgpIHtcbiAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKFwiXl9fb24oW14uXSspXCIgKyBkMy5yZXF1b3RlKHR5cGUpICsgXCIkXCIpLFxuICAgICAgICBtYXRjaDtcbiAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgIGlmIChtYXRjaCA9IG5hbWUubWF0Y2gocmUpKSB7XG4gICAgICAgIHZhciBsID0gdGhpc1tuYW1lXTtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKG1hdGNoWzFdLCBsLCBsLiQpO1xuICAgICAgICBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gaVxuICAgICAgPyBsaXN0ZW5lciA/IG9uQWRkIDogb25SZW1vdmVcbiAgICAgIDogbGlzdGVuZXIgPyBkM19ub29wIDogcmVtb3ZlQWxsO1xufVxuXG52YXIgZDNfc2VsZWN0aW9uX29uRmlsdGVycyA9IGQzLm1hcCh7XG4gIG1vdXNlZW50ZXI6IFwibW91c2VvdmVyXCIsXG4gIG1vdXNlbGVhdmU6IFwibW91c2VvdXRcIlxufSk7XG5cbmlmIChkM19kb2N1bWVudCkge1xuICBkM19zZWxlY3Rpb25fb25GaWx0ZXJzLmZvckVhY2goZnVuY3Rpb24oaykge1xuICAgIGlmIChcIm9uXCIgKyBrIGluIGQzX2RvY3VtZW50KSBkM19zZWxlY3Rpb25fb25GaWx0ZXJzLnJlbW92ZShrKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9vbkxpc3RlbmVyKGxpc3RlbmVyLCBhcmd1bWVudHopIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgbyA9IGQzLmV2ZW50OyAvLyBFdmVudHMgY2FuIGJlIHJlZW50cmFudCAoZS5nLiwgZm9jdXMpLlxuICAgIGQzLmV2ZW50ID0gZTtcbiAgICBhcmd1bWVudHpbMF0gPSB0aGlzLl9fZGF0YV9fO1xuICAgIHRyeSB7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHopO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBkMy5ldmVudCA9IG87XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fb25GaWx0ZXIobGlzdGVuZXIsIGFyZ3VtZW50eikge1xuICB2YXIgbCA9IGQzX3NlbGVjdGlvbl9vbkxpc3RlbmVyKGxpc3RlbmVyLCBhcmd1bWVudHopO1xuICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgIHZhciB0YXJnZXQgPSB0aGlzLCByZWxhdGVkID0gZS5yZWxhdGVkVGFyZ2V0O1xuICAgIGlmICghcmVsYXRlZCB8fCAocmVsYXRlZCAhPT0gdGFyZ2V0ICYmICEocmVsYXRlZC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0YXJnZXQpICYgOCkpKSB7XG4gICAgICBsLmNhbGwodGFyZ2V0LCBlKTtcbiAgICB9XG4gIH07XG59XG5cbnZhciBkM19ldmVudF9kcmFnU2VsZWN0LFxuICAgIGQzX2V2ZW50X2RyYWdJZCA9IDA7XG5cbmZ1bmN0aW9uIGQzX2V2ZW50X2RyYWdTdXBwcmVzcyhub2RlKSB7XG4gIHZhciBuYW1lID0gXCIuZHJhZ3N1cHByZXNzLVwiICsgKytkM19ldmVudF9kcmFnSWQsXG4gICAgICBjbGljayA9IFwiY2xpY2tcIiArIG5hbWUsXG4gICAgICB3ID0gZDMuc2VsZWN0KGQzX3dpbmRvdyhub2RlKSlcbiAgICAgICAgICAub24oXCJ0b3VjaG1vdmVcIiArIG5hbWUsIGQzX2V2ZW50UHJldmVudERlZmF1bHQpXG4gICAgICAgICAgLm9uKFwiZHJhZ3N0YXJ0XCIgKyBuYW1lLCBkM19ldmVudFByZXZlbnREZWZhdWx0KVxuICAgICAgICAgIC5vbihcInNlbGVjdHN0YXJ0XCIgKyBuYW1lLCBkM19ldmVudFByZXZlbnREZWZhdWx0KTtcblxuICBpZiAoZDNfZXZlbnRfZHJhZ1NlbGVjdCA9PSBudWxsKSB7XG4gICAgZDNfZXZlbnRfZHJhZ1NlbGVjdCA9IFwib25zZWxlY3RzdGFydFwiIGluIG5vZGUgPyBmYWxzZVxuICAgICAgICA6IGQzX3ZlbmRvclN5bWJvbChub2RlLnN0eWxlLCBcInVzZXJTZWxlY3RcIik7XG4gIH1cblxuICBpZiAoZDNfZXZlbnRfZHJhZ1NlbGVjdCkge1xuICAgIHZhciBzdHlsZSA9IGQzX2RvY3VtZW50RWxlbWVudChub2RlKS5zdHlsZSxcbiAgICAgICAgc2VsZWN0ID0gc3R5bGVbZDNfZXZlbnRfZHJhZ1NlbGVjdF07XG4gICAgc3R5bGVbZDNfZXZlbnRfZHJhZ1NlbGVjdF0gPSBcIm5vbmVcIjtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbihzdXBwcmVzc0NsaWNrKSB7XG4gICAgdy5vbihuYW1lLCBudWxsKTtcbiAgICBpZiAoZDNfZXZlbnRfZHJhZ1NlbGVjdCkgc3R5bGVbZDNfZXZlbnRfZHJhZ1NlbGVjdF0gPSBzZWxlY3Q7XG4gICAgaWYgKHN1cHByZXNzQ2xpY2spIHsgLy8gc3VwcHJlc3MgdGhlIG5leHQgY2xpY2ssIGJ1dCBvbmx5IGlmIGl04oCZcyBpbW1lZGlhdGVcbiAgICAgIHZhciBvZmYgPSBmdW5jdGlvbigpIHsgdy5vbihjbGljaywgbnVsbCk7IH07XG4gICAgICB3Lm9uKGNsaWNrLCBmdW5jdGlvbigpIHsgZDNfZXZlbnRQcmV2ZW50RGVmYXVsdCgpOyBvZmYoKTsgfSwgdHJ1ZSk7XG4gICAgICBzZXRUaW1lb3V0KG9mZiwgMCk7XG4gICAgfVxuICB9O1xufVxuXG5kMy5tb3VzZSA9IGZ1bmN0aW9uKGNvbnRhaW5lcikge1xuICByZXR1cm4gZDNfbW91c2VQb2ludChjb250YWluZXIsIGQzX2V2ZW50U291cmNlKCkpO1xufTtcblxuLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTQ0MDgzXG52YXIgZDNfbW91c2VfYnVnNDQwODMgPSB0aGlzLm5hdmlnYXRvciAmJiAvV2ViS2l0Ly50ZXN0KHRoaXMubmF2aWdhdG9yLnVzZXJBZ2VudCkgPyAtMSA6IDA7XG5cbmZ1bmN0aW9uIGQzX21vdXNlUG9pbnQoY29udGFpbmVyLCBlKSB7XG4gIGlmIChlLmNoYW5nZWRUb3VjaGVzKSBlID0gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgdmFyIHN2ZyA9IGNvbnRhaW5lci5vd25lclNWR0VsZW1lbnQgfHwgY29udGFpbmVyO1xuICBpZiAoc3ZnLmNyZWF0ZVNWR1BvaW50KSB7XG4gICAgdmFyIHBvaW50ID0gc3ZnLmNyZWF0ZVNWR1BvaW50KCk7XG4gICAgaWYgKGQzX21vdXNlX2J1ZzQ0MDgzIDwgMCkge1xuICAgICAgdmFyIHdpbmRvdyA9IGQzX3dpbmRvdyhjb250YWluZXIpO1xuICAgICAgaWYgKHdpbmRvdy5zY3JvbGxYIHx8IHdpbmRvdy5zY3JvbGxZKSB7XG4gICAgICAgIHN2ZyA9IGQzLnNlbGVjdChcImJvZHlcIikuYXBwZW5kKFwic3ZnXCIpLnN0eWxlKHtcbiAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgIG1hcmdpbjogMCxcbiAgICAgICAgICBwYWRkaW5nOiAwLFxuICAgICAgICAgIGJvcmRlcjogXCJub25lXCJcbiAgICAgICAgfSwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgIHZhciBjdG0gPSBzdmdbMF1bMF0uZ2V0U2NyZWVuQ1RNKCk7XG4gICAgICAgIGQzX21vdXNlX2J1ZzQ0MDgzID0gIShjdG0uZiB8fCBjdG0uZSk7XG4gICAgICAgIHN2Zy5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGQzX21vdXNlX2J1ZzQ0MDgzKSBwb2ludC54ID0gZS5wYWdlWCwgcG9pbnQueSA9IGUucGFnZVk7XG4gICAgZWxzZSBwb2ludC54ID0gZS5jbGllbnRYLCBwb2ludC55ID0gZS5jbGllbnRZO1xuICAgIHBvaW50ID0gcG9pbnQubWF0cml4VHJhbnNmb3JtKGNvbnRhaW5lci5nZXRTY3JlZW5DVE0oKS5pbnZlcnNlKCkpO1xuICAgIHJldHVybiBbcG9pbnQueCwgcG9pbnQueV07XG4gIH1cbiAgdmFyIHJlY3QgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiBbZS5jbGllbnRYIC0gcmVjdC5sZWZ0IC0gY29udGFpbmVyLmNsaWVudExlZnQsIGUuY2xpZW50WSAtIHJlY3QudG9wIC0gY29udGFpbmVyLmNsaWVudFRvcF07XG59O1xuXG5kMy50b3VjaCA9IGZ1bmN0aW9uKGNvbnRhaW5lciwgdG91Y2hlcywgaWRlbnRpZmllcikge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIGlkZW50aWZpZXIgPSB0b3VjaGVzLCB0b3VjaGVzID0gZDNfZXZlbnRTb3VyY2UoKS5jaGFuZ2VkVG91Y2hlcztcbiAgaWYgKHRvdWNoZXMpIGZvciAodmFyIGkgPSAwLCBuID0gdG91Y2hlcy5sZW5ndGgsIHRvdWNoOyBpIDwgbjsgKytpKSB7XG4gICAgaWYgKCh0b3VjaCA9IHRvdWNoZXNbaV0pLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJldHVybiBkM19tb3VzZVBvaW50KGNvbnRhaW5lciwgdG91Y2gpO1xuICAgIH1cbiAgfVxufTtcbmQzLmJlaGF2aW9yID0ge307XG5cbmQzLmJlaGF2aW9yLmRyYWcgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGV2ZW50ID0gZDNfZXZlbnREaXNwYXRjaChkcmFnLCBcImRyYWdcIiwgXCJkcmFnc3RhcnRcIiwgXCJkcmFnZW5kXCIpLFxuICAgICAgb3JpZ2luID0gbnVsbCxcbiAgICAgIG1vdXNlZG93biA9IGRyYWdzdGFydChkM19ub29wLCBkMy5tb3VzZSwgZDNfd2luZG93LCBcIm1vdXNlbW92ZVwiLCBcIm1vdXNldXBcIiksXG4gICAgICB0b3VjaHN0YXJ0ID0gZHJhZ3N0YXJ0KGQzX2JlaGF2aW9yX2RyYWdUb3VjaElkLCBkMy50b3VjaCwgZDNfaWRlbnRpdHksIFwidG91Y2htb3ZlXCIsIFwidG91Y2hlbmRcIik7XG5cbiAgZnVuY3Rpb24gZHJhZygpIHtcbiAgICB0aGlzLm9uKFwibW91c2Vkb3duLmRyYWdcIiwgbW91c2Vkb3duKVxuICAgICAgICAub24oXCJ0b3VjaHN0YXJ0LmRyYWdcIiwgdG91Y2hzdGFydCk7XG4gIH1cblxuICBmdW5jdGlvbiBkcmFnc3RhcnQoaWQsIHBvc2l0aW9uLCBzdWJqZWN0LCBtb3ZlLCBlbmQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgdGFyZ2V0ID0gZDMuZXZlbnQudGFyZ2V0LmNvcnJlc3BvbmRpbmdFbGVtZW50IHx8IGQzLmV2ZW50LnRhcmdldCxcbiAgICAgICAgICBwYXJlbnQgPSB0aGF0LnBhcmVudE5vZGUsXG4gICAgICAgICAgZGlzcGF0Y2ggPSBldmVudC5vZih0aGF0LCBhcmd1bWVudHMpLFxuICAgICAgICAgIGRyYWdnZWQgPSAwLFxuICAgICAgICAgIGRyYWdJZCA9IGlkKCksXG4gICAgICAgICAgZHJhZ05hbWUgPSBcIi5kcmFnXCIgKyAoZHJhZ0lkID09IG51bGwgPyBcIlwiIDogXCItXCIgKyBkcmFnSWQpLFxuICAgICAgICAgIGRyYWdPZmZzZXQsXG4gICAgICAgICAgZHJhZ1N1YmplY3QgPSBkMy5zZWxlY3Qoc3ViamVjdCh0YXJnZXQpKS5vbihtb3ZlICsgZHJhZ05hbWUsIG1vdmVkKS5vbihlbmQgKyBkcmFnTmFtZSwgZW5kZWQpLFxuICAgICAgICAgIGRyYWdSZXN0b3JlID0gZDNfZXZlbnRfZHJhZ1N1cHByZXNzKHRhcmdldCksXG4gICAgICAgICAgcG9zaXRpb24wID0gcG9zaXRpb24ocGFyZW50LCBkcmFnSWQpO1xuXG4gICAgICBpZiAob3JpZ2luKSB7XG4gICAgICAgIGRyYWdPZmZzZXQgPSBvcmlnaW4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgICAgICAgZHJhZ09mZnNldCA9IFtkcmFnT2Zmc2V0LnggLSBwb3NpdGlvbjBbMF0sIGRyYWdPZmZzZXQueSAtIHBvc2l0aW9uMFsxXV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkcmFnT2Zmc2V0ID0gWzAsIDBdO1xuICAgICAgfVxuXG4gICAgICBkaXNwYXRjaCh7dHlwZTogXCJkcmFnc3RhcnRcIn0pO1xuXG4gICAgICBmdW5jdGlvbiBtb3ZlZCgpIHtcbiAgICAgICAgdmFyIHBvc2l0aW9uMSA9IHBvc2l0aW9uKHBhcmVudCwgZHJhZ0lkKSwgZHgsIGR5O1xuICAgICAgICBpZiAoIXBvc2l0aW9uMSkgcmV0dXJuOyAvLyB0aGlzIHRvdWNoIGRpZG7igJl0IG1vdmVcblxuICAgICAgICBkeCA9IHBvc2l0aW9uMVswXSAtIHBvc2l0aW9uMFswXTtcbiAgICAgICAgZHkgPSBwb3NpdGlvbjFbMV0gLSBwb3NpdGlvbjBbMV07XG4gICAgICAgIGRyYWdnZWQgfD0gZHggfCBkeTtcbiAgICAgICAgcG9zaXRpb24wID0gcG9zaXRpb24xO1xuXG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBcImRyYWdcIixcbiAgICAgICAgICB4OiBwb3NpdGlvbjFbMF0gKyBkcmFnT2Zmc2V0WzBdLFxuICAgICAgICAgIHk6IHBvc2l0aW9uMVsxXSArIGRyYWdPZmZzZXRbMV0sXG4gICAgICAgICAgZHg6IGR4LFxuICAgICAgICAgIGR5OiBkeVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZW5kZWQoKSB7XG4gICAgICAgIGlmICghcG9zaXRpb24ocGFyZW50LCBkcmFnSWQpKSByZXR1cm47IC8vIHRoaXMgdG91Y2ggZGlkbuKAmXQgZW5kXG4gICAgICAgIGRyYWdTdWJqZWN0Lm9uKG1vdmUgKyBkcmFnTmFtZSwgbnVsbCkub24oZW5kICsgZHJhZ05hbWUsIG51bGwpO1xuICAgICAgICBkcmFnUmVzdG9yZShkcmFnZ2VkKTtcbiAgICAgICAgZGlzcGF0Y2goe3R5cGU6IFwiZHJhZ2VuZFwifSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGRyYWcub3JpZ2luID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIG9yaWdpbjtcbiAgICBvcmlnaW4gPSB4O1xuICAgIHJldHVybiBkcmFnO1xuICB9O1xuXG4gIHJldHVybiBkMy5yZWJpbmQoZHJhZywgZXZlbnQsIFwib25cIik7XG59O1xuXG4vLyBXaGlsZSBpdCBpcyBwb3NzaWJsZSB0byByZWNlaXZlIGEgdG91Y2hzdGFydCBldmVudCB3aXRoIG1vcmUgdGhhbiBvbmUgY2hhbmdlZFxuLy8gdG91Y2gsIHRoZSBldmVudCBpcyBvbmx5IHNoYXJlZCBieSB0b3VjaGVzIG9uIHRoZSBzYW1lIHRhcmdldDsgZm9yIG5ld1xuLy8gdG91Y2hlcyB0YXJnZXR0aW5nIGRpZmZlcmVudCBlbGVtZW50cywgbXVsdGlwbGUgdG91Y2hzdGFydCBldmVudHMgYXJlXG4vLyByZWNlaXZlZCBldmVuIHdoZW4gdGhlIHRvdWNoZXMgc3RhcnQgc2ltdWx0YW5lb3VzbHkuIFNpbmNlIG11bHRpcGxlIHRvdWNoZXNcbi8vIGNhbm5vdCBtb3ZlIHRoZSBzYW1lIHRhcmdldCB0byBkaWZmZXJlbnQgbG9jYXRpb25zIGNvbmN1cnJlbnRseSB3aXRob3V0XG4vLyB0ZWFyaW5nIHRoZSBmYWJyaWMgb2Ygc3BhY2V0aW1lLCB3ZSBhbGxvdyB0aGUgZmlyc3QgdG91Y2ggdG8gd2luLlxuZnVuY3Rpb24gZDNfYmVoYXZpb3JfZHJhZ1RvdWNoSWQoKSB7XG4gIHJldHVybiBkMy5ldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5pZGVudGlmaWVyO1xufVxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHRoaXMuZDMgPSBkMywgZGVmaW5lKGQzKTtcbiAgZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiBtb2R1bGUuZXhwb3J0cykgbW9kdWxlLmV4cG9ydHMgPSBkMztcbiAgZWxzZSB0aGlzLmQzID0gZDM7XG59KCk7XG4iLCIvKipcbiAqIEFic3RyYWN0RmlsZSBpcyBhbiBhYnN0cmFjdCByZXByZXNlbnRhdGlvbiBvZiBhIGZpbGUuIFRoZXJlIGFyZSB0d28gaW1wbGVtZW50YXRpb246XG4gKiAxLiBSZW1vdGVGaWxlICAtIHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZSBvbiBhIHJlbW90ZSBzZXJ2ZXIgd2hpY2ggY2FuIGJlXG4gKiBmZXRjaGVkIGluIGNodW5rcywgZS5nLiB1c2luZyBhIFJhbmdlIHJlcXVlc3QuXG4gKiAyLiBMb2NhbFN0cmluZ0ZpbGUgaXMgYSByZXByZXNlbnRhdGlvbiBvZiBhIGZpbGUgdGhhdCB3YXMgY3JlYXRlZCBmcm9tIGlucHV0IHN0cmluZy4gXG4gKiBVc2VkIGZvciB0ZXN0aW5nIGFuZCBzbWFsbCBpbnB1dCBmaWxlcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy9pbXBvcnQgUSBmcm9tICdxJztcblxuY2xhc3MgQWJzdHJhY3RGaWxlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy9ob3cgdG8gcHJldmVudCBpbnN0YW50YXRpb24gb2YgdGhpcyBjbGFzcz8/P1xuICAgIC8vdGhpcyBjb2RlIGRvZXNuJ3QgcGFzcyBucG0gcnVuIGZsb3dcbi8vICAgIGlmIChuZXcudGFyZ2V0ID09PSBBYnN0cmFjdEZpbGUpIHsgXG4vLyAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29uc3RydWN0IEFic3RyYWN0RmlsZSBpbnN0YW5jZXMgZGlyZWN0bHlcIik7XG4vLyAgICB9XG4gIH1cblxuICBnZXRCeXRlcyhzdGFydDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6T2JqZWN0IHsvLzogUS5Qcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk1ldGhvZCBnZXRCeXRlcyBpcyBub3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cblxuICAvLyBSZWFkIHRoZSBlbnRpcmUgZmlsZSAtLSBub3QgcmVjb21tZW5kZWQgZm9yIGxhcmdlIGZpbGVzIVxuICBnZXRBbGwoKTpPYmplY3Qgey8vOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTWV0aG9kIGdldEFsbCBpcyBub3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cblxuICAvLyBSZWFkcyB0aGUgZW50aXJlIGZpbGUgYXMgYSBzdHJpbmcgKG5vdCBhbiBBcnJheUJ1ZmZlcikuXG4gIC8vIFRoaXMgZG9lcyBub3QgdXNlIHRoZSBjYWNoZS5cbiAgZ2V0QWxsU3RyaW5nKCk6T2JqZWN0IHsvLzogUS5Qcm9taXNlPHN0cmluZz4ge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNZXRob2QgZ2V0QWxsU3RyaW5nIGlzIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgbnVtYmVyIG9mIGJ5dGVzIGluIHRoZSByZW1vdGUgZmlsZS5cbiAgZ2V0U2l6ZSgpOk9iamVjdCB7Ly86IFEuUHJvbWlzZTxudW1iZXI+IHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTWV0aG9kIGdldFNpemUgaXMgbm90IGltcGxlbWVudGVkXCIpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQWJzdHJhY3RGaWxlO1xuIiwiLyoqXG4gKiBJbnRlcmZhY2UgZm9yIGFsaWdubWVudHMsIHNoYXJlZCBiZXR3ZWVuIEJBTSBhbmQgR0E0R0ggYmFja2VuZHMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG4gXG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2V9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHR5cGUgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgdHlwZSB7Q292ZXJhZ2VDb3VudH0gZnJvbSAnLi92aXovcGlsZXVwdXRpbHMnO1xuXG4vLyBcIkNJR0FSXCIgb3BlcmF0aW9ucyBleHByZXNzIGhvdyBhIHNlcXVlbmNlIGFsaWducyB0byB0aGUgcmVmZXJlbmNlOiBkb2VzIGl0XG4vLyBoYXZlIGluc2VydGlvbnM/IGRlbGV0aW9ucz8gRm9yIG1vcmUgYmFja2dyb3VuZCwgc2VlIHRoZSBTQU0vQkFNIHBhcGVyLlxuZXhwb3J0IHR5cGUgQ2lnYXJTeW1ib2wgPSAnTSd8J0knfCdEJ3wnTid8J1MnfCdIJ3wnUCd8Jz0nfCdYJztcbmV4cG9ydCB0eXBlIENpZ2FyT3AgPSB7XG4gIG9wOiBDaWdhclN5bWJvbDtcbiAgbGVuZ3RoOiBudW1iZXJcbn1cblxuLy8gY29udmVydHMgYSBzdHJpbmcgaW50byBhIFN0cmFuZCBlbGVtZW50LiBNdXN0IGJlICcrJyBvciAnLScuIEFueSBvdGhlclxuLy8gc3RyaW5ncyB3aWxsIGJlIGNvbnZlcnRlZCB0byAnLicuXG5mdW5jdGlvbiBzdHJUb1N0cmFuZChzdHI6IHN0cmluZyk6IFN0cmFuZCB7XG4gIHJldHVybiBzdHIgJiYgc3RyID09ICcrJyA/ICcrJyA6IChzdHIgJiYgc3RyID09ICctJyA/ICctJyA6ICcuJyk7IC8vIGVpdGhlciArLCAtIG9yIC5cbn1cblxuZXhwb3J0IHR5cGUgU3RyYW5kID0gJy0nIHwgJysnIHwgJy4nO1xuXG4vLyBjb252ZXJ0cyBhIEdBNEdIIFN0cmFuZCB0byBhIHN0cmluZyBvZiAgZ2E0Z2guQ29tbW9uLnN0cmFuZC5QT1NfU1RSQU5ELFxuLy8gTkVHX1NUUkFORCwgb3IgU1RSQU5EX1VOU1BFQ0lGSUVEIHRvIFN0cmFuZCB0eXBlLlxuZnVuY3Rpb24gZ2E0Z2hTdHJhbmRUb1N0cmFuZChzdHI6IHN0cmluZyk6IFN0cmFuZCB7XG4gIHJldHVybiBzdHIgJiYgc3RyID09ICdQT1NfU1RSQU5EJyA/ICcrJyA6IChzdHIgJiYgc3RyID09ICdORUdfU1RSQU5EJyA/ICctJyA6ICcuJyk7IC8vIGVpdGhlciArLCAtIG9yIC5cbn1cblxuZXhwb3J0IHR5cGUgTWF0ZVByb3BlcnRpZXMgPSB7XG4gIHJlZjogP3N0cmluZztcbiAgcG9zOiBudW1iZXI7XG4gIHN0cmFuZDogU3RyYW5kO1xufVxuXG5leHBvcnQgdHlwZSBBbGlnbm1lbnQgPSB7XG4gIHBvczogbnVtYmVyO1xuICByZWY6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBjaWdhck9wczogQ2lnYXJPcFtdO1xuXG4gIGdldEtleSgpOiBzdHJpbmc7XG4gIGdldFN0cmFuZCgpOiBTdHJhbmQ7XG4gIGdldFF1YWxpdHlTY29yZXMoKTogbnVtYmVyW107XG4gIGdldFNlcXVlbmNlKCk6IHN0cmluZztcbiAgZ2V0SW50ZXJ2YWwoKTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPjtcbiAgaW50ZXJzZWN0cyhpbnRlcnZhbDogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW47XG4gIGdldFJlZmVyZW5jZUxlbmd0aCgpOiBudW1iZXI7XG4gIGdldE1hdGVQcm9wZXJ0aWVzKCk6ID9NYXRlUHJvcGVydGllcztcbiAgZ2V0SW5mZXJyZWRJbnNlcnRTaXplKCk6IG51bWJlcjtcbiAgZ2V0Q292ZXJhZ2UocmVmZXJlbmNlU291cmNlOiBPYmplY3QpOiBDb3ZlcmFnZUNvdW50O1xuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc3RyVG9TdHJhbmQsXG4gIGdhNGdoU3RyYW5kVG9TdHJhbmRcbn07XG4iLCIvKiBAZmxvdyAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2V9IGZyb20gJy4vdHlwZXMnO1xuXG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi9JbnRlcnZhbCc7XG5pbXBvcnQge2ZsYXRNYXB9IGZyb20gJy4vdXRpbHMnO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIGNsb3NlZCBpbnRlcnZhbCBvbiB0aGUgZ2Vub21lOiBjb250aWc6c3RhcnQtc3RvcC5cbiAqXG4gKiBUaGUgY29udGlnIG1heSBiZSBlaXRoZXIgYSBzdHJpbmcgKFwiY2hyMjJcIikgb3IgYSBudW1iZXIgKGluIGNhc2UgdGhlIGNvbnRpZ3NcbiAqIGFyZSBpbmRleGVkLCBmb3IgZXhhbXBsZSkuXG4gKi9cbmNsYXNzIENvbnRpZ0ludGVydmFsPFQ6IChudW1iZXJ8c3RyaW5nKT4ge1xuICBjb250aWc6IFQ7XG4gIGludGVydmFsOiBJbnRlcnZhbDtcblxuICBjb25zdHJ1Y3Rvcihjb250aWc6IFQsIHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlcikge1xuICAgIHRoaXMuY29udGlnID0gY29udGlnO1xuICAgIHRoaXMuaW50ZXJ2YWwgPSBuZXcgSW50ZXJ2YWwoc3RhcnQsIHN0b3ApO1xuICB9XG5cbiAgLy8gVE9ETzogbWFrZSB0aGVzZSBnZXR0ZXIgbWV0aG9kcyAmIHN3aXRjaCB0byBCYWJlbC5cbiAgc3RhcnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnZhbC5zdGFydDtcbiAgfVxuICBzdG9wKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJ2YWwuc3RvcDtcbiAgfVxuICBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnZhbC5sZW5ndGgoKTtcbiAgfVxuXG4gIC8vIEludGVyc2VjdHMgZnVuY3Rpb24sIGFsbG93aW5nIGZvciAnY2hyMTcnIHZzLiAnMTcnLXN0eWxlIG1pc21hdGNoZXMuXG4gIGludGVyc2VjdHMob3RoZXI6IENvbnRpZ0ludGVydmFsPFQ+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNock9uQ29udGlnKG90aGVyLmNvbnRpZykgJiZcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwuaW50ZXJzZWN0cyhvdGhlci5pbnRlcnZhbCkpO1xuICB9XG5cbiAgY29udGFpbnNJbnRlcnZhbChvdGhlcjogQ29udGlnSW50ZXJ2YWw8VD4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHRoaXMuY2hyT25Db250aWcob3RoZXIuY29udGlnKSAmJlxuICAgICAgICAgICAgdGhpcy5pbnRlcnZhbC5jb250YWluc0ludGVydmFsKG90aGVyLmludGVydmFsKSk7XG4gIH1cblxuICBpc0FkamFjZW50VG8ob3RoZXI6IENvbnRpZ0ludGVydmFsPFQ+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNock9uQ29udGlnKG90aGVyLmNvbnRpZykgJiZcbiAgICAgICAgICAgICh0aGlzLnN0YXJ0KCkgPT0gMSArIG90aGVyLnN0b3AoKSB8fFxuICAgICAgICAgICAgIHRoaXMuc3RvcCgpICsgMSA9PSBvdGhlci5zdGFydCgpKSk7XG4gIH1cblxuICBpc0NvdmVyZWRCeShpbnRlcnZhbHM6IENvbnRpZ0ludGVydmFsPFQ+W10pOiBib29sZWFuIHtcbiAgICB2YXIgaXZzID0gaW50ZXJ2YWxzLmZpbHRlcihpdiA9PiB0aGlzLmNock9uQ29udGlnKGl2LmNvbnRpZykpXG4gICAgICAgICAgICAgICAgICAgICAgIC5tYXAoaXYgPT4gaXYuaW50ZXJ2YWwpO1xuICAgIHJldHVybiB0aGlzLmludGVydmFsLmlzQ292ZXJlZEJ5KGl2cyk7XG4gIH1cblxuICBjb250YWluc0xvY3VzKGNvbnRpZzogVCwgcG9zaXRpb246IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNock9uQ29udGlnKGNvbnRpZykgJiZcbiAgICAgICAgICAgdGhpcy5pbnRlcnZhbC5jb250YWlucyhwb3NpdGlvbik7XG4gIH1cblxuICAvLyBJcyB0aGlzIHJlYWQgb24gdGhlIGdpdmVuIGNvbnRpZz8gKGFsbG93aW5nIGZvciBjaHIxNyB2cyAxNy1zdHlsZSBtaXNtYXRjaGVzKVxuICBjaHJPbkNvbnRpZyhjb250aWc6IFQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHRoaXMuY29udGlnID09PSBjb250aWcgfHxcbiAgICAgICAgICAgIHRoaXMuY29udGlnID09PSAnY2hyJyArIGNvbnRpZyB8fFxuICAgICAgICAgICAgJ2NocicgKyB0aGlzLmNvbnRpZyA9PT0gY29udGlnKTtcbiAgfVxuXG4gIGNsb25lKCk6IENvbnRpZ0ludGVydmFsPFQ+IHtcbiAgICByZXR1cm4gbmV3IENvbnRpZ0ludGVydmFsKHRoaXMuY29udGlnLCB0aGlzLmludGVydmFsLnN0YXJ0LCB0aGlzLmludGVydmFsLnN0b3ApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNpbWlsYXIgdG8gSW50ZXJ2YWwuY29tcGxlbWVudEludGVydmFscywgYnV0IG9ubHkgY29uc2lkZXJzIHRob3NlIGludGVydmFsc1xuICAgKiBvbiB0aGUgc2FtZSBjb250aWcgYXMgdGhpcyBvbmUuXG4gICAqL1xuICBjb21wbGVtZW50SW50ZXJ2YWxzKGludGVydmFsczogQ29udGlnSW50ZXJ2YWw8VD5bXSk6IENvbnRpZ0ludGVydmFsPFQ+W10ge1xuICAgIHJldHVybiB0aGlzLmludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMoXG4gICAgICAgIGZsYXRNYXAoaW50ZXJ2YWxzLCBjaSA9PiB0aGlzLmNock9uQ29udGlnKGNpLmNvbnRpZykgPyBbY2kuaW50ZXJ2YWxdIDogW10pKVxuICAgICAgICAubWFwKGl2ID0+IG5ldyBDb250aWdJbnRlcnZhbCh0aGlzLmNvbnRpZywgaXYuc3RhcnQsIGl2LnN0b3ApKTtcbiAgfVxuXG4gIC8qXG4gIFRoaXMgbWV0aG9kIGRvZXNuJ3QgdHlwZWNoZWNrLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2Zsb3cvaXNzdWVzLzM4OFxuICBpc0FmdGVySW50ZXJ2YWwob3RoZXI6IENvbnRpZ0ludGVydmFsKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNvbnRpZyA+IG90aGVyLmNvbnRpZyB8fFxuICAgICAgICAgICAgKHRoaXMuY29udGlnID09PSBvdGhlci5jb250aWcgJiYgdGhpcy5zdGFydCgpID4gb3RoZXIuc3RhcnQoKSkpO1xuICB9XG4gICovXG5cbiAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7dGhpcy5jb250aWd9OiR7dGhpcy5zdGFydCgpfS0ke3RoaXMuc3RvcCgpfWA7XG4gIH1cblxuICB0b0dlbm9tZVJhbmdlKCk6IEdlbm9tZVJhbmdlIHtcbiAgICBpZiAoISh0eXBlb2YgdGhpcy5jb250aWcgPT09ICdzdHJpbmcnIHx8IHRoaXMuY29udGlnIGluc3RhbmNlb2YgU3RyaW5nKSkge1xuICAgICAgdGhyb3cgJ0Nhbm5vdCBjb252ZXJ0IG51bWVyaWMgQ29udGlnSW50ZXJ2YWwgdG8gR2Vub21lUmFuZ2UnO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgY29udGlnOiB0aGlzLmNvbnRpZyxcbiAgICAgIHN0YXJ0OiB0aGlzLnN0YXJ0KCksXG4gICAgICBzdG9wOiB0aGlzLnN0b3AoKVxuICAgIH07XG4gIH1cblxuICByb3VuZChzaXplOiBudW1iZXIsIHplcm9CYXNlZDogYm9vbGVhbik6IENvbnRpZ0ludGVydmFsPFQ+IHtcbiAgICB2YXIgbmV3SW50ZXJ2YWwgPSB0aGlzLmludGVydmFsLnJvdW5kKHNpemUsIHplcm9CYXNlZCk7XG4gICAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbCh0aGlzLmNvbnRpZywgbmV3SW50ZXJ2YWwuc3RhcnQsIG5ld0ludGVydmFsLnN0b3ApO1xuICB9XG5cbiAgLy8gQ29tcGFyYXRvciBmb3IgdXNlIHdpdGggQXJyYXkucHJvdG90eXBlLnNvcnRcbiAgc3RhdGljIGNvbXBhcmU8VDogKHN0cmluZ3xudW1iZXIpPihhOiBDb250aWdJbnRlcnZhbDxUPiwgYjogQ29udGlnSW50ZXJ2YWw8VD4pOiBudW1iZXIge1xuICAgIGlmIChhLmNvbnRpZy50b1N0cmluZygpID4gYi5jb250aWcudG9TdHJpbmcoKSkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH0gZWxzZSBpZiAoYS5jb250aWcudG9TdHJpbmcoKSA8IGIuY29udGlnLnRvU3RyaW5nKCkpIHtcbiAgICAgIHJldHVybiArMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGEuc3RhcnQoKSAtIGIuc3RhcnQoKTtcbiAgICB9XG4gIH1cblxuICAvLyBTb3J0IGFuIGFycmF5IG9mIGludGVydmFscyAmIGNvYWxlc2NlIGFkamFjZW50L292ZXJsYXBwaW5nIHJhbmdlcy5cbiAgLy8gTkI6IHRoaXMgbWF5IHJlLW9yZGVyIHRoZSBpbnRlcnZhbHMgcGFyYW1ldGVyXG4gIHN0YXRpYyBjb2FsZXNjZTxUOiAoc3RyaW5nfG51bWJlcik+KGludGVydmFsczogQ29udGlnSW50ZXJ2YWw8VD5bXSk6IENvbnRpZ0ludGVydmFsPFQ+W10ge1xuICAgIGludGVydmFscy5zb3J0KENvbnRpZ0ludGVydmFsLmNvbXBhcmUpO1xuXG4gICAgdmFyIHJzID0gW107XG4gICAgaW50ZXJ2YWxzLmZvckVhY2gociA9PiB7XG4gICAgICBpZiAocnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJzLnB1c2gocik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGxhc3RSID0gcnNbcnMubGVuZ3RoIC0gMV07XG4gICAgICBpZiAoci5pbnRlcnNlY3RzKGxhc3RSKSB8fCByLmlzQWRqYWNlbnRUbyhsYXN0UikpIHtcbiAgICAgICAgbGFzdFIgPSByc1tycy5sZW5ndGggLSAxXSA9IGxhc3RSLmNsb25lKCk7XG4gICAgICAgIGxhc3RSLmludGVydmFsLnN0b3AgPSBNYXRoLm1heChyLmludGVydmFsLnN0b3AsIGxhc3RSLmludGVydmFsLnN0b3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcnMucHVzaChyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIHN0YXRpYyBmcm9tR2Vub21lUmFuZ2UocmFuZ2U6IEdlbm9tZVJhbmdlKTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcudG9TdHJpbmcoKSwgcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3ApO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ29udGlnSW50ZXJ2YWw7XG4iLCIvKipcbiAqIENvbnRyb2xzIGZvciB6b29taW5nIHRvIHBhcnRpY3VsYXIgcmFuZ2VzIG9mIHRoZSBnZW5vbWUuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZSwgUGFydGlhbEdlbm9tZVJhbmdlfSBmcm9tICcuL3R5cGVzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi9JbnRlcnZhbCc7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHJhbmdlOiA/R2Vub21lUmFuZ2U7XG4gIGNvbnRpZ0xpc3Q6IHN0cmluZ1tdO1xuICBvbkNoYW5nZTogKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSk9PnZvaWQ7XG59O1xuXG5jbGFzcyBDb250cm9scyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xuICBwcm9wczogUHJvcHM7XG4gIHN0YXRlOiB2b2lkOyAgLy8gbm8gc3RhdGVcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICB9XG5cbiAgbWFrZVJhbmdlKCk6IEdlbm9tZVJhbmdlIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGlnOiB0aGlzLnJlZnMuY29udGlnLnZhbHVlLFxuICAgICAgc3RhcnQ6IE51bWJlcih0aGlzLnJlZnMuc3RhcnQudmFsdWUpLFxuICAgICAgc3RvcDogTnVtYmVyKHRoaXMucmVmcy5zdG9wLnZhbHVlKVxuICAgIH07XG4gIH1cblxuICBjb21wbGV0ZVJhbmdlKHJhbmdlOiA/UGFydGlhbEdlbm9tZVJhbmdlKTogR2Vub21lUmFuZ2Uge1xuICAgIHJhbmdlID0gcmFuZ2UgfHwge307XG4gICAgaWYgKHJhbmdlLnN0YXJ0ICYmIHJhbmdlLnN0b3AgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQ29uc3RydWN0IGEgcmFuZ2UgY2VudGVyZWQgYXJvdW5kIGEgdmFsdWUuIFRoaXMgbWF0Y2hlcyBJR1YuXG4gICAgICByYW5nZS5zdG9wID0gcmFuZ2Uuc3RhcnQgKyAyMDtcbiAgICAgIHJhbmdlLnN0YXJ0IC09IDIwO1xuICAgIH1cblxuICAgIGlmIChyYW5nZS5jb250aWcpIHtcbiAgICAgIC8vIFRoZXJlIGFyZSBtYWpvciBwZXJmb3JtYW5jZSBpc3N1ZXMgd2l0aCBoYXZpbmcgYSAnY2hyJyBtaXNtYXRjaCBpbiB0aGVcbiAgICAgIC8vIGdsb2JhbCBsb2NhdGlvbiBvYmplY3QuXG4gICAgICBjb25zdCBjb250aWcgPSByYW5nZS5jb250aWc7XG4gICAgICB2YXIgYWx0Q29udGlnID0gXy5maW5kKHRoaXMucHJvcHMuY29udGlnTGlzdCwgcmVmID0+IHV0aWxzLmlzQ2hyTWF0Y2goY29udGlnLCByZWYpKTtcbiAgICAgIGlmIChhbHRDb250aWcpIHJhbmdlLmNvbnRpZyA9IGFsdENvbnRpZztcbiAgICB9XG5cbiAgICByZXR1cm4gKF8uZXh0ZW5kKF8uY2xvbmUodGhpcy5wcm9wcy5yYW5nZSksIHJhbmdlKSA6IGFueSk7XG4gIH1cblxuICBoYW5kbGVDb250aWdDaGFuZ2UoZTogU3ludGhldGljRXZlbnQ8Pikge1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5jb21wbGV0ZVJhbmdlKHtjb250aWc6IHRoaXMucmVmcy5jb250aWcudmFsdWV9KSk7XG4gIH1cblxuICBoYW5kbGVGb3JtU3VibWl0KGU6IFN5bnRoZXRpY0V2ZW50PD4pIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIHJhbmdlID0gdGhpcy5jb21wbGV0ZVJhbmdlKHV0aWxzLnBhcnNlUmFuZ2UodGhpcy5yZWZzLnBvc2l0aW9uLnZhbHVlKSk7XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZShyYW5nZSk7XG4gIH1cblxuICAvLyBTZXRzIHRoZSB2YWx1ZXMgb2YgdGhlIGlucHV0IGVsZW1lbnRzIHRvIG1hdGNoIGBwcm9wcy5yYW5nZWAuXG4gIHVwZGF0ZVJhbmdlVUkoKSB7XG4gICAgY29uc3QgciA9IHRoaXMucHJvcHMucmFuZ2U7XG4gICAgaWYgKCFyKSByZXR1cm47XG5cbiAgICB0aGlzLnJlZnMucG9zaXRpb24udmFsdWUgPSB1dGlscy5mb3JtYXRJbnRlcnZhbChuZXcgSW50ZXJ2YWwoci5zdGFydCwgci5zdG9wKSk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5jb250aWdMaXN0KSB7XG4gICAgICB2YXIgY29udGlnSWR4ID0gdGhpcy5wcm9wcy5jb250aWdMaXN0LmluZGV4T2Yoci5jb250aWcpO1xuICAgICAgdGhpcy5yZWZzLmNvbnRpZy5zZWxlY3RlZEluZGV4ID0gY29udGlnSWR4O1xuICAgIH1cbiAgfVxuXG4gIHpvb21JbihlOiBhbnkpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy56b29tQnlGYWN0b3IoMC41KTtcbiAgfVxuXG4gIHpvb21PdXQoZTogYW55KSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuem9vbUJ5RmFjdG9yKDIuMCk7XG4gIH1cblxuICB6b29tQnlGYWN0b3IoZmFjdG9yOiBudW1iZXIpIHtcbiAgICB2YXIgciA9IHRoaXMucHJvcHMucmFuZ2U7XG4gICAgaWYgKCFyKSByZXR1cm47XG5cbiAgICB2YXIgaXYgPSB1dGlscy5zY2FsZVJhbmdlKG5ldyBJbnRlcnZhbChyLnN0YXJ0LCByLnN0b3ApLCBmYWN0b3IpO1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2Uoe1xuICAgICAgY29udGlnOiByLmNvbnRpZyxcbiAgICAgIHN0YXJ0OiBpdi5zdGFydCxcbiAgICAgIHN0b3A6IGl2LnN0b3BcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIHZhciBjb250aWdPcHRpb25zID0gdGhpcy5wcm9wcy5jb250aWdMaXN0XG4gICAgICAgID8gdGhpcy5wcm9wcy5jb250aWdMaXN0Lm1hcCgoY29udGlnLCBpKSA9PiA8b3B0aW9uIGtleT17aX0+e2NvbnRpZ308L29wdGlvbj4pXG4gICAgICAgIDogbnVsbDtcblxuICAgIC8vIE5vdGU6IGlucHV0IHZhbHVlcyBhcmUgc2V0IGluIGNvbXBvbmVudERpZFVwZGF0ZS5cbiAgICByZXR1cm4gKFxuICAgICAgPGZvcm0gY2xhc3NOYW1lPSdjb250cm9scycgb25TdWJtaXQ9e3RoaXMuaGFuZGxlRm9ybVN1Ym1pdC5iaW5kKHRoaXMpfT5cbiAgICAgICAgPHNlbGVjdCByZWY9J2NvbnRpZycgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ29udGlnQ2hhbmdlLmJpbmQodGhpcyl9PlxuICAgICAgICAgIHtjb250aWdPcHRpb25zfVxuICAgICAgICA8L3NlbGVjdD57JyAnfVxuICAgICAgICA8aW5wdXQgcmVmPSdwb3NpdGlvbicgdHlwZT0ndGV4dCcgLz57JyAnfVxuICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT0nYnRuLXN1Ym1pdCcgb25DbGljaz17dGhpcy5oYW5kbGVGb3JtU3VibWl0LmJpbmQodGhpcyl9PkdvPC9idXR0b24+eycgJ31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3pvb20tY29udHJvbHMnPlxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdidG4tem9vbS1vdXQnIG9uQ2xpY2s9e3RoaXMuem9vbU91dC5iaW5kKHRoaXMpfT48L2J1dHRvbj57JyAnfVxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdidG4tem9vbS1pbicgb25DbGljaz17dGhpcy56b29tSW4uYmluZCh0aGlzKX0+PC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9mb3JtPlxuICAgICk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBPYmplY3QpIHtcbiAgICBpZiAoIV8uaXNFcXVhbChwcmV2UHJvcHMucmFuZ2UsIHRoaXMucHJvcHMucmFuZ2UpKSB7XG4gICAgICB0aGlzLnVwZGF0ZVJhbmdlVUkoKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnVwZGF0ZVJhbmdlVUkoKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRyb2xzO1xuIiwiLyoqXG4gKiBUaGlzIHNlcnZlcyBhcyBhIGJyaWRnZSBiZXR3ZWVuIG9yZy5nYTRnaC5HQVJlYWRBbGlnbm1lbnQgYW5kIHRoZVxuICogcGlsZXVwLmpzIEFsaWdubWVudCB0eXBlLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7Q2lnYXJPcCwgTWF0ZVByb3BlcnRpZXMsIFN0cmFuZH0gZnJvbSAnLi9BbGlnbm1lbnQnO1xuaW1wb3J0IHR5cGUge0NvdmVyYWdlQ291bnR9IGZyb20gJy4vdml6L3BpbGV1cHV0aWxzJztcbmltcG9ydCB7Z2V0T3BJbmZvfSBmcm9tICcuL3Zpei9waWxldXB1dGlscyc7XG5cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBTYW1SZWFkIGZyb20gJy4vZGF0YS9TYW1SZWFkJztcblxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nYTRnaC9nYTRnaC1zY2hlbWFzL2Jsb2IvbWFzdGVyL3NyYy9tYWluL3Byb3RvL2dhNGdoL3JlYWRzLnByb3RvXG4vLyBEYXRhIGNhbiBiZSBxdWVyaWVkIGF0IGh0dHA6Ly8xa2cuZ2E0Z2gub3JnL3JlYWRzL3NlYXJjaFxudmFyIE9QX01BUCA9IHtcbiAgQUxJR05NRU5UX01BVENIOiAnTScsXG4gIElOU0VSVDogJ0knLFxuICBERUxFVEU6ICdEJyxcbiAgU0tJUDogJ04nLFxuICBDTElQX1NPRlQ6ICdTJyxcbiAgQ0xJUF9IQVJEOiAnSCcsXG4gIFBBRDogJ1AnLFxuICBTRVFVRU5DRV9NQVRDSDogJz0nLFxuICBTRVFVRU5DRV9NSVNNQVRDSDogJ1gnXG59O1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgYWN0cyBhcyBhIGJyaWRnZSBiZXR3ZWVuIG9yZy5nYTRnaC5HQVJlYWRBbGlnbm1lbnQgYW5kIHRoZVxuICogcGlsZXVwLmpzIEFsaWdubWVudCB0eXBlLlxuICovXG5jbGFzcyBHQTRHSEFsaWdubWVudCAvKiBpbXBsZW1lbnRzIEFsaWdubWVudCAqLyB7XG4gIHBvczogbnVtYmVyO1xuICByZWY6IHN0cmluZztcbiAgYWxpZ25tZW50OiBPYmplY3Q7XG4gIG5hbWU6IHN0cmluZztcbiAgY2lnYXJPcHM6IENpZ2FyT3BbXTtcbiAgX2ludGVydmFsOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+O1xuXG4gIC8vIGFsaWdubWVudCBmb2xsb3dzIG9yZy5nYTRnaC5HQVJlYWRBbGlnbm1lbnRcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dhNGdoL2dhNGdoLXNjaGVtYXMvYmxvYi9tYXN0ZXIvc3JjL21haW4vcHJvdG8vZ2E0Z2gvcmVhZHMucHJvdG9cbiAgY29uc3RydWN0b3IoYWxpZ25tZW50OiBPYmplY3QpIHtcbiAgICB0aGlzLmFsaWdubWVudCA9IGFsaWdubWVudDtcbiAgICB0aGlzLnBvcyA9IHBhcnNlSW50KGFsaWdubWVudC5hbGlnbm1lbnQucG9zaXRpb24ucG9zaXRpb24pO1xuICAgIHRoaXMucmVmID0gYWxpZ25tZW50LmFsaWdubWVudC5wb3NpdGlvbi5yZWZlcmVuY2VOYW1lO1xuICAgIHRoaXMubmFtZSA9IGFsaWdubWVudC5mcmFnbWVudE5hbWU7XG5cbiAgICB0aGlzLmNpZ2FyT3BzID0gYWxpZ25tZW50LmFsaWdubWVudC5jaWdhci5tYXAoXG4gICAgICAgICh7b3BlcmF0aW9uLCBvcGVyYXRpb25MZW5ndGg6IGxlbmd0aH0pID0+ICh7IG9wOiBPUF9NQVBbb3BlcmF0aW9uXSwgbGVuZ3RoOiBwYXJzZUludChsZW5ndGgpfSlcbiAgICApO1xuICAgIHRoaXMuX2ludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKHRoaXMucmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zICsgdGhpcy5nZXRSZWZlcmVuY2VMZW5ndGgoKSAtIDEpO1xuICB9XG5cbiAgZ2V0S2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIEdBNEdIQWxpZ25tZW50LmtleUZyb21HQTRHSFJlc3BvbnNlKHRoaXMuYWxpZ25tZW50KTtcbiAgfVxuXG4gIGdldFN0cmFuZCgpOiBTdHJhbmQge1xuICAgIHJldHVybiB0aGlzLmFsaWdubWVudC5hbGlnbm1lbnQucG9zaXRpb24uc3RyYW5kID09ICdORUdfU1RSQU5EJyA/ICctJyA6ICcrJztcbiAgfVxuXG4gIGdldFF1YWxpdHlTY29yZXMoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLmFsaWdubWVudC5hbGlnbmVkUXVhbGl0eTtcbiAgfVxuXG4gIGdldFNlcXVlbmNlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuYWxpZ25tZW50LmFsaWduZWRTZXF1ZW5jZTtcbiAgfVxuXG4gIGdldEludGVydmFsKCk6IENvbnRpZ0ludGVydmFsPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcnZhbDtcbiAgfVxuXG4gIGludGVyc2VjdHMoaW50ZXJ2YWw6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gaW50ZXJ2YWwuaW50ZXJzZWN0cyh0aGlzLmdldEludGVydmFsKCkpO1xuICB9XG5cbiAgZ2V0UmVmZXJlbmNlTGVuZ3RoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIFNhbVJlYWQucmVmZXJlbmNlTGVuZ3RoRnJvbU9wcyh0aGlzLmNpZ2FyT3BzKTtcbiAgfVxuXG4gIGdldE1hdGVQcm9wZXJ0aWVzKCk6ID9NYXRlUHJvcGVydGllcyB7XG4gICAgdmFyIG5leHQgPSB0aGlzLmFsaWdubWVudC5uZXh0TWF0ZVBvc2l0aW9uO1xuICAgIHJldHVybiBuZXh0ICYmIHtcbiAgICAgIHJlZjogbmV4dC5yZWZlcmVuY2VOYW1lLFxuICAgICAgcG9zOiBwYXJzZUludChuZXh0LnBvc2l0aW9uKSxcbiAgICAgIHN0cmFuZDogbmV4dC5zdHJhbmQgPT0gJ05FR19TVFJBTkQnID8gJy0nIDogJysnXG4gICAgfTtcbiAgfVxuXG4gIGdldEluZmVycmVkSW5zZXJ0U2l6ZSgpOiBudW1iZXIge1xuICAgIC8vIFRPRE86IFNBTS9CQU0gd3JpdGVzIHRoaXMgZXhwbGljaXRseS4gRG9lcyBHQTRHSCByZWFsbHkgbm90P1xuICAgIHZhciBtID0gdGhpcy5nZXRNYXRlUHJvcGVydGllcygpO1xuICAgIGlmIChtICYmIG0ucmVmID09IHRoaXMucmVmKSB7XG4gICAgICB2YXIgc3RhcnQxID0gdGhpcy5faW50ZXJ2YWwuc3RhcnQoKSxcbiAgICAgICAgICBzdG9wMSA9IHRoaXMuX2ludGVydmFsLnN0b3AoKSxcbiAgICAgICAgICBzdGFydDIgPSBtLnBvcyxcbiAgICAgICAgICBzdG9wMiA9IHN0YXJ0MiArIHRoaXMuZ2V0U2VxdWVuY2UoKS5sZW5ndGg7XG4gICAgICByZXR1cm4gTWF0aC5tYXgoc3RvcDEsIHN0b3AyKSAtIE1hdGgubWluKHN0YXJ0MSwgc3RhcnQyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q292ZXJhZ2UocmVmZXJlbmNlU291cmNlOiBPYmplY3QpOiBDb3ZlcmFnZUNvdW50IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmFuZ2U6IHRoaXMuZ2V0SW50ZXJ2YWwoKSxcbiAgICAgIG9wSW5mbzogZ2V0T3BJbmZvKHRoaXMsIHJlZmVyZW5jZVNvdXJjZSlcbiAgICB9XG4gIH1cblxuICAvLyBUaGlzIGlzIGV4cG9zZWQgYXMgYSBzdGF0aWMgbWV0aG9kIHRvIGZhY2lsaXRhdGUgYW4gb3B0aW1pemF0aW9uIGluIEdBNEdIQWxpZ25tZW50U291cmNlLlxuICBzdGF0aWMga2V5RnJvbUdBNEdIUmVzcG9uc2UoYWxpZ25tZW50OiBPYmplY3QpOiBzdHJpbmcge1xuICAgIC8vIHRoaXMuYWxpZ25tZW50LmlkIHdvdWxkIGJlIGFwcGVhbGluZyBoZXJlLCBidXQgaXQncyBub3QgYWN0dWFsbHkgdW5pcXVlIVxuICAgIHJldHVybiBhbGlnbm1lbnQuZnJhZ21lbnROYW1lICsgJzonICsgYWxpZ25tZW50LnJlYWROdW1iZXI7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBHQTRHSEFsaWdubWVudDtcbiIsIi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgY2xvc2VkIG51bWVyaWMgaW50ZXJ2YWwsIFtzdGFydCwgc3RvcF0uXG4gKlxuICogQGZsb3dcbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuY2xhc3MgSW50ZXJ2YWwge1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG5cbiAgLy8gUmVwcmVzZW50cyBbc3RhcnQsIHN0b3BdIC0tIGJvdGggZW5kcyBhcmUgaW5jbHVzaXZlLlxuICAvLyBJZiBzdG9wIDwgc3RhcnQsIHRoZW4gdGhpcyBpcyBhbiBlbXB0eSBpbnRlcnZhbC5cbiAgY29uc3RydWN0b3Ioc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKSB7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuc3RvcCA9IHN0b3A7XG4gIH1cblxuICAvLyBUT0RPOiBtYWtlIHRoaXMgYSBnZXR0ZXIgbWV0aG9kICYgc3dpdGNoIHRvIEJhYmVsLlxuICBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgdGhpcy5zdG9wIC0gdGhpcy5zdGFydCArIDEpO1xuICB9XG5cbiAgaW50ZXJzZWN0KG90aGVyOiBJbnRlcnZhbCk6IEludGVydmFsIHtcbiAgICByZXR1cm4gbmV3IEludGVydmFsKE1hdGgubWF4KHRoaXMuc3RhcnQsIG90aGVyLnN0YXJ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKHRoaXMuc3RvcCwgb3RoZXIuc3RvcCkpO1xuICB9XG5cbiAgaW50ZXJzZWN0cyhvdGhlcjogSW50ZXJ2YWwpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdGFydCA8PSBvdGhlci5zdG9wICYmIG90aGVyLnN0YXJ0IDw9IHRoaXMuc3RvcDtcbiAgfVxuXG4gIGNvbnRhaW5zKHZhbHVlOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdmFsdWUgPj0gdGhpcy5zdGFydCAmJiB2YWx1ZSA8PSB0aGlzLnN0b3A7XG4gIH1cblxuICBjb250YWluc0ludGVydmFsKG90aGVyOiBJbnRlcnZhbCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5zKG90aGVyLnN0YXJ0KSAmJiB0aGlzLmNvbnRhaW5zKG90aGVyLnN0b3ApO1xuICB9XG5cbiAgLy8gUm91bmRzIHRoZSBpbnRlcnZhbCB0byB0aGUgbmVhcmVzdCBtdWx0aXBsZXMgb2Ygc2l6ZS5cbiAgLy8gT3B0aW9uYWwgbWluaW11bSBwYXJhbWV0ZXIgZGV0ZXJtaW5lcyB0aGUgbG93ZXN0XG4gIC8vIHBvc3NpYmxlIHZhbHVlIGZvciB0aGUgc3RhcnQgb2YgdGhlIHJlc3VsdGluZyBJbnRlcnZhbC5cbiAgcm91bmQoc2l6ZTogbnVtYmVyLCB6ZXJvQmFzZWQ6IGJvb2xlYW4pOiBJbnRlcnZhbCB7XG4gICAgdmFyIG1pbmltdW0gPSB6ZXJvQmFzZWQgPyAwIDogMTtcbiAgICB2YXIgcm91bmREb3duID0geCA9PiB4IC0geCAlIHNpemU7XG4gICAgdmFyIG5ld1N0YXJ0ID0gTWF0aC5tYXgobWluaW11bSwgcm91bmREb3duKHRoaXMuc3RhcnQpKSxcbiAgICAgICAgbmV3U3RvcCA9IHJvdW5kRG93bih0aGlzLnN0b3AgKyBzaXplIC0gMSk7XG5cbiAgICByZXR1cm4gbmV3IEludGVydmFsKG5ld1N0YXJ0LCBuZXdTdG9wKTtcbiAgfVxuXG4gIGNsb25lKCk6IEludGVydmFsIHtcbiAgICByZXR1cm4gbmV3IEludGVydmFsKHRoaXMuc3RhcnQsIHRoaXMuc3RvcCk7XG4gIH1cblxuICAvKipcbiAgICogSXMgdGhpcyBJbnRlcnZhbCBlbnRpcmVseSBjb3ZlcmVkIGJ5IHRoZSB1bmlvbiBvZiB0aGUgcmFuZ2VzP1xuICAgKiBUaGUgcmFuZ2VzIHBhcmFtZXRlciBtdXN0IGJlIHNvcnRlZCBieSByYW5nZS5zdGFydFxuICAgKi9cbiAgaXNDb3ZlcmVkQnkocmFuZ2VzOiBJbnRlcnZhbFtdKTogYm9vbGVhbiB7XG4gICAgdmFyIHJlbWFpbmluZyA9IHRoaXMuY2xvbmUoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHIgPSByYW5nZXNbaV07XG4gICAgICBpZiAoaSAmJiByLnN0YXJ0IDwgcmFuZ2VzW2kgLSAxXS5zdGFydCkge1xuICAgICAgICB0aHJvdyAnaXNDb3ZlcmVkQnkgbXVzdCBiZSBjYWxsZWQgd2l0aCBzb3J0ZWQgcmFuZ2VzJztcbiAgICAgIH1cbiAgICAgIGlmIChyLnN0YXJ0ID4gcmVtYWluaW5nLnN0YXJ0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTsgIC8vIEEgcG9zaXRpb24gaGFzIGJlZW4gbWlzc2VkIGFuZCB0aGVyZSdzIG5vIGdvaW5nIGJhY2suXG4gICAgICB9XG4gICAgICByZW1haW5pbmcuc3RhcnQgPSBNYXRoLm1heChyZW1haW5pbmcuc3RhcnQsIHIuc3RvcCArIDEpO1xuICAgICAgaWYgKHJlbWFpbmluZy5sZW5ndGgoKSA8PSAwKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRmluZCB0aGUgc3ViaW50ZXJ2YWxzIHdoaWNoIGFyZSBub3QgaW4gYG90aGVyYC5cbiAgICogVGhpcyBjYW4geWllbGQgZWl0aGVyIHplcm8sIG9uZSBvciB0d28gSW50ZXJ2YWxzLlxuICAgKi9cbiAgc3VidHJhY3Qob3RoZXI6IEludGVydmFsKTogSW50ZXJ2YWxbXSB7XG4gICAgaWYgKCF0aGlzLmludGVyc2VjdHMob3RoZXIpKSB7XG4gICAgICByZXR1cm4gW3RoaXNdOyAgLy8gdW5hZmZlY3RlZCBieSB0aGlzIHJhbmdlXG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbnRhaW5zSW50ZXJ2YWwob3RoZXIpKSB7XG4gICAgICAvLyByZXR1cm4gdGhlIGJpdCBiZWZvcmUgYW5kIHRoZSBiaXQgYWZ0ZXJcbiAgICAgIHJldHVybiBbbmV3IEludGVydmFsKHRoaXMuc3RhcnQsIG90aGVyLnN0YXJ0IC0gMSksXG4gICAgICAgICAgICAgIG5ldyBJbnRlcnZhbChvdGhlci5zdG9wICsgMSwgdGhpcy5zdG9wKV0uZmlsdGVyKHggPT4geC5sZW5ndGgoKSA+IDApO1xuICAgIH0gZWxzZSBpZiAob3RoZXIuY29udGFpbnNJbnRlcnZhbCh0aGlzKSkge1xuICAgICAgcmV0dXJuIFtdOyAgLy8gaXQncyBiZWVuIGNvbXBsZXRlbHkgb2JsaXRlcmF0ZWRcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaXQgb3ZlcmxhcHMgb25lIGVuZFxuICAgICAgaWYgKG90aGVyLnN0YXJ0IDwgdGhpcy5zdGFydCkge1xuICAgICAgICByZXR1cm4gW25ldyBJbnRlcnZhbChvdGhlci5zdG9wICsgMSwgdGhpcy5zdG9wKV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW25ldyBJbnRlcnZhbCh0aGlzLnN0YXJ0LCBvdGhlci5zdGFydCAtIDEpXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmluZCB0aGUgZGlzam9pbnQgc3ViaW50ZXJ2YWxzIG5vdCBjb3ZlcmVkIGJ5IGFueSBpbnRlcnZhbCBpbiB0aGUgbGlzdC5cbiAgICpcbiAgICogSWYgY29tcCA9IGludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMocmFuZ2VzKSwgdGhlbiB0aGlzIGd1YXJhbnRlZXMgdGhhdDpcbiAgICogLSBjb21wIHVuaW9uIHJhbmdlcyA9IGludGVydmFsXG4gICAqIC0gYSBpbnQgYiA9IDAgZm9yYWxsIGEgXFxpbiBjb21wLCBiIGluIHJhbmdlc1xuICAgKlxuICAgKiAoVGhlIGlucHV0IHJhbmdlcyBuZWVkIG5vdCBiZSBkaXNqb2ludC4pXG4gICAqL1xuICBjb21wbGVtZW50SW50ZXJ2YWxzKHJhbmdlczogSW50ZXJ2YWxbXSk6IEludGVydmFsW10ge1xuICAgIHZhciBjb21wcyA9IFt0aGlzXTtcbiAgICByYW5nZXMuZm9yRWFjaChyYW5nZSA9PiB7XG4gICAgICB2YXIgbmV3Q29tcHMgPSBbXTtcbiAgICAgIGNvbXBzLmZvckVhY2goaXYgPT4ge1xuICAgICAgICBuZXdDb21wcyA9IG5ld0NvbXBzLmNvbmNhdChpdi5zdWJ0cmFjdChyYW5nZSkpO1xuICAgICAgfSk7XG4gICAgICBjb21wcyA9IG5ld0NvbXBzO1xuICAgIH0pO1xuICAgIHJldHVybiBjb21wcztcbiAgfVxuXG4gIHN0YXRpYyBpbnRlcnNlY3RBbGwoaW50ZXJ2YWxzOiBBcnJheTxJbnRlcnZhbD4pOiBJbnRlcnZhbCB7XG4gICAgaWYgKCFpbnRlcnZhbHMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyaWVkIHRvIGludGVyc2VjdCB6ZXJvIGludGVydmFscycpO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gaW50ZXJ2YWxzWzBdLmNsb25lKCk7XG4gICAgaW50ZXJ2YWxzLnNsaWNlKDEpLmZvckVhY2goZnVuY3Rpb24oe3N0YXJ0LCBzdG9wfSkge1xuICAgICAgcmVzdWx0LnN0YXJ0ID0gTWF0aC5tYXgoc3RhcnQsIHJlc3VsdC5zdGFydCk7XG4gICAgICByZXN1bHQuc3RvcCA9IE1hdGgubWluKHN0b3AsIHJlc3VsdC5zdG9wKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gUmV0dXJucyBhbiBpbnRlcnZhbCB3aGljaCBjb250YWlucyBhbGwgdGhlIGdpdmVuIGludGVydmFscy5cbiAgc3RhdGljIGJvdW5kaW5nSW50ZXJ2YWwoaW50ZXJ2YWxzOiBBcnJheTxJbnRlcnZhbD4pOiBJbnRlcnZhbCB7XG4gICAgaWYgKCFpbnRlcnZhbHMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyaWVkIHRvIGJvdW5kIHplcm8gaW50ZXJ2YWxzJyk7XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBpbnRlcnZhbHNbMF0uY2xvbmUoKTtcbiAgICBpbnRlcnZhbHMuc2xpY2UoMSkuZm9yRWFjaChmdW5jdGlvbih7c3RhcnQsIHN0b3B9KSB7XG4gICAgICByZXN1bHQuc3RhcnQgPSBNYXRoLm1pbihzdGFydCwgcmVzdWx0LnN0YXJ0KTtcbiAgICAgIHJlc3VsdC5zdG9wID0gTWF0aC5tYXgoc3RvcCwgcmVzdWx0LnN0b3ApO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7dGhpcy5zdGFydH0sICR7dGhpcy5zdG9wfV1gO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJ2YWw7XG4iLCIvKipcbiAqIExvY2FsU3RyaW5nRmlsZSBpcyBhIHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZSB0aGF0IHdhcyBjcmVhdGVkIGZyb20gaW5wdXQgc3RyaW5nLiBVc2VkIGZvciB0ZXN0aW5nIGFuZCBzbWFsbCBpbnB1dCBmaWxlcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgQWJzdHJhY3RGaWxlIGZyb20gJy4vQWJzdHJhY3RGaWxlJztcblxuY2xhc3MgTG9jYWxTdHJpbmdGaWxlIGV4dGVuZHMgQWJzdHJhY3RGaWxlIHtcbiAgZmlsZUxlbmd0aDogbnVtYmVyO1xuICBjb250ZW50OiBzdHJpbmc7ICAvL2NvbnRlbnQgb2YgdGhpcyBcIkZpbGVcIlxuICBidWZmZXI6IEFycmF5QnVmZmVyO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5maWxlTGVuZ3RoID0gY29udGVudC5sZW5ndGg7ICBcbiAgICB0aGlzLmJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihjb250ZW50Lmxlbmd0aCk7IC8vIDIgYnl0ZXMgZm9yIGVhY2ggY2hhclxuICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG5cbiAgICB2YXIgYnVmVmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyKTtcbiAgICBmb3IgKHZhciBpPTA7IGkgPCB0aGlzLmZpbGVMZW5ndGg7IGkrKykge1xuICAgICAgYnVmVmlld1tpXSA9IGNvbnRlbnQuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gIH1cblxuICBnZXRCeXRlcyhzdGFydDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IFEuUHJvbWlzZTw/QXJyYXlCdWZmZXI+IHtcbiAgICBpZiAobGVuZ3RoIDwgMCkge1xuICAgICAgcmV0dXJuIFEucmVqZWN0KGBSZXF1ZXN0ZWQgPDAgYnl0ZXMgKCR7bGVuZ3RofSlgKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgcmVtb3RlIGZpbGUgbGVuZ3RoIGlzIGtub3duLCBjbGFtcCB0aGUgcmVxdWVzdCB0byBmaXQgd2l0aGluIGl0LlxuICAgIHZhciBzdG9wID0gc3RhcnQgKyBsZW5ndGggLSAxO1xuICAgIGlmICh0aGlzLmZpbGVMZW5ndGggIT0gLTEpIHtcbiAgICAgIHN0b3AgPSBNYXRoLm1pbih0aGlzLmZpbGVMZW5ndGggLSAxLCBzdG9wKTtcbiAgICB9XG5cbiAgICAvLyBGaXJzdCBjaGVjayB0aGUgY2FjaGUuXG4gICAgdmFyIGJ1ZiA9IHRoaXMuZ2V0RnJvbUNhY2hlKHN0YXJ0LCBzdG9wKTtcbiAgICByZXR1cm4gUS53aGVuKGJ1Zik7XG4gIH1cblxuICAvLyBSZWFkIHRoZSBlbnRpcmUgZmlsZSAtLSBub3QgcmVjb21tZW5kZWQgZm9yIGxhcmdlIGZpbGVzIVxuICBnZXRBbGwoKTogUS5Qcm9taXNlPD9BcnJheUJ1ZmZlcj4ge1xuICAgdmFyIGJ1ZiA9IHRoaXMuZ2V0RnJvbUNhY2hlKDAsIHRoaXMuZmlsZUxlbmd0aCAtIDEpO1xuICAgcmV0dXJuIFEud2hlbihidWYpO1xuICB9XG5cbiAgLy8gUmVhZHMgdGhlIGVudGlyZSBmaWxlIGFzIGEgc3RyaW5nIChub3QgYW4gQXJyYXlCdWZmZXIpLlxuICAvLyBUaGlzIGRvZXMgbm90IHVzZSB0aGUgY2FjaGUuXG4gIGdldEFsbFN0cmluZygpOiBRLlByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIFEud2hlbih0aGlzLmNvbnRlbnQpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBudW1iZXIgb2YgYnl0ZXMgaW4gdGhlIHJlbW90ZSBmaWxlLlxuICBnZXRTaXplKCk6IFEuUHJvbWlzZTxudW1iZXI+IHtcbiAgICByZXR1cm4gUS53aGVuKHRoaXMuZmlsZUxlbmd0aCk7XG4gIH1cblxuICBnZXRGcm9tQ2FjaGUoc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogP0FycmF5QnVmZmVyIHtcbiAgICByZXR1cm4gdGhpcy5idWZmZXIuc2xpY2Uoc3RhcnQsIHN0b3AgKyAxKTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gTG9jYWxTdHJpbmdGaWxlO1xuIiwiLyoqXG4gKiBBIGdlbmVyaWMgbWVudSwgaW50ZW5kZWQgdG8gYmUgdXNlZCBmb3IgYm90aCB0b2dnbGluZyBvcHRpb25zIGFuZCBpbnZva2luZyBjb21tYW5kcy5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiB2YXIgaXRlbXMgPSBbXG4gKiAgIHtrZXk6ICdhJywgbGFiZWw6ICdJdGVtIEEnLCBjaGVja2VkOiB0cnVlfSxcbiAqICAge2tleTogJ2InLCBsYWJlbDogJ0l0ZW0gQid9LFxuICogICAnLScsXG4gKiAgIHtrZXk6ICdyYW5kb20nLCBsYWJlbDogJ1BpY2sgUmFuZG9tJ31cbiAqIF07XG4gKiA8TWVudSBoZWFkZXI9XCJIZWFkZXJcIiBpdGVtcz17aXRlbXN9IG9uU2VsZWN0PXtzZWxlY3RIYW5kbGVyfSAvPlxuICpcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG50eXBlIE1lbnVJdGVtID0ge1xuICBrZXk6IHN0cmluZztcbiAgbGFiZWw6IHN0cmluZztcbiAgY2hlY2tlZD86IGJvb2xlYW47XG59O1xuXG50eXBlIFByb3BzID0ge1xuICBoZWFkZXI6IHN0cmluZztcbiAgaXRlbXM6IEFycmF5PE1lbnVJdGVtfCctJz47XG4gIG9uU2VsZWN0OiAoa2V5OiBzdHJpbmcpID0+IHZvaWQ7XG59O1xuXG5jbGFzcyBNZW51IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XG4gIHByb3BzOiBQcm9wcztcblxuICBjbGlja0hhbmRsZXIoaWR4OiBudW1iZXIsIGU6IFN5bnRoZXRpY01vdXNlRXZlbnQ8Pikge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgaXRlbSA9IHRoaXMucHJvcHMuaXRlbXNbaWR4XTtcbiAgICBpZiAodHlwZW9mKGl0ZW0pID09ICdzdHJpbmcnKSByZXR1cm47ICAvLyBmb3IgZmxvd1xuICAgIHRoaXMucHJvcHMub25TZWxlY3QoaXRlbS5rZXkpO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgdmFyIG1ha2VIYW5kbGVyID0gaSA9PiB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMsIGkpO1xuICAgIHZhciBlbHMgPSBbXTtcbiAgICBpZiAodGhpcy5wcm9wcy5oZWFkZXIpIHtcbiAgICAgIGVscy5wdXNoKDxkaXYga2V5PSdoZWFkZXInIGNsYXNzTmFtZT0nbWVudS1oZWFkZXInPnt0aGlzLnByb3BzLmhlYWRlcn08L2Rpdj4pO1xuICAgIH1cbiAgICBlbHMgPSBlbHMuY29uY2F0KHRoaXMucHJvcHMuaXRlbXMubWFwKChpdGVtLCBpKSA9PiB7XG4gICAgICBpZiAodHlwZW9mKGl0ZW0pID09PSAnc3RyaW5nJykgeyAgLy8gd291bGQgcHJlZmVyIFwiPT0gJy0nXCIsIHNlZSBmbG93IzEwNjZcbiAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9J21lbnUtc2VwYXJhdG9yJyAvPjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjaGVja0NsYXNzID0gJ2NoZWNrJyArIChpdGVtLmNoZWNrZWQgPyAnIGNoZWNrZWQnIDogJycpO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9J21lbnUtaXRlbScgb25DbGljaz17bWFrZUhhbmRsZXIoaSl9PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtjaGVja0NsYXNzfT48L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21lbnUtaXRlbS1sYWJlbCc+e2l0ZW0ubGFiZWx9PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVudSc+XG4gICAgICAgIHtlbHN9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTWVudTtcbiIsIi8qKlxuICogUmVtb3RlRmlsZSBpcyBhIHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZSBvbiBhIHJlbW90ZSBzZXJ2ZXIgd2hpY2ggY2FuIGJlXG4gKiBmZXRjaGVkIGluIGNodW5rcywgZS5nLiB1c2luZyBhIFJhbmdlIHJlcXVlc3QuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBRIGZyb20gJ3EnO1xuaW1wb3J0IEFic3RyYWN0RmlsZSBmcm9tICcuL0Fic3RyYWN0RmlsZSc7XG5cbnR5cGUgQ2h1bmsgPSB7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjtcbiAgYnVmZmVyOiBBcnJheUJ1ZmZlcjtcbiAgLy8gVE9ETyhkYW52ayk6IHByaW9yaXR5OiBudW1iZXI7XG59XG5cblxuY2xhc3MgUmVtb3RlRmlsZSBleHRlbmRzIEFic3RyYWN0RmlsZXtcbiAgdXJsOiBzdHJpbmc7XG4gIGZpbGVMZW5ndGg6IG51bWJlcjtcbiAgY2h1bmtzOiBBcnJheTxDaHVuaz47ICAvLyByZWdpb25zIG9mIGZpbGUgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBsb2FkZWQuXG4gIG51bU5ldHdvcmtSZXF1ZXN0czogbnVtYmVyOyAgLy8gdHJhY2sgdGhpcyBmb3IgZGVidWdnaW5nL3Rlc3RpbmdcblxuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5maWxlTGVuZ3RoID0gLTE7ICAvLyB1bmtub3duXG4gICAgdGhpcy5jaHVua3MgPSBbXTtcbiAgICB0aGlzLm51bU5ldHdvcmtSZXF1ZXN0cyA9IDA7XG4gIH1cblxuICBnZXRCeXRlcyhzdGFydDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IFEuUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgIGlmIChsZW5ndGggPCAwKSB7XG4gICAgICByZXR1cm4gUS5yZWplY3QoYFJlcXVlc3RlZCA8MCBieXRlcyAoJHtsZW5ndGh9KSBmcm9tICR7dGhpcy51cmx9YCk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHJlbW90ZSBmaWxlIGxlbmd0aCBpcyBrbm93biwgY2xhbXAgdGhlIHJlcXVlc3QgdG8gZml0IHdpdGhpbiBpdC5cbiAgICB2YXIgc3RvcCA9IHN0YXJ0ICsgbGVuZ3RoIC0gMTtcbiAgICBpZiAodGhpcy5maWxlTGVuZ3RoICE9IC0xKSB7XG4gICAgICBzdG9wID0gTWF0aC5taW4odGhpcy5maWxlTGVuZ3RoIC0gMSwgc3RvcCk7XG4gICAgfVxuXG4gICAgLy8gRmlyc3QgY2hlY2sgdGhlIGNhY2hlLlxuICAgIHZhciBidWYgPSB0aGlzLmdldEZyb21DYWNoZShzdGFydCwgc3RvcCk7XG4gICAgaWYgKGJ1Zikge1xuICAgICAgcmV0dXJuIFEud2hlbihidWYpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IGhhbmRsZSBwYXJ0aWFsIG92ZXJsYXAgb2YgcmVxdWVzdCB3LyBjYWNoZS5cblxuICAgIC8vIE5lZWQgdG8gZmV0Y2ggZnJvbSB0aGUgbmV0d29yay5cbiAgICByZXR1cm4gdGhpcy5nZXRGcm9tTmV0d29yayhzdGFydCwgc3RvcCk7XG4gIH1cblxuICAvLyBSZWFkIHRoZSBlbnRpcmUgZmlsZSAtLSBub3QgcmVjb21tZW5kZWQgZm9yIGxhcmdlIGZpbGVzIVxuICBnZXRBbGwoKTogUS5Qcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgLy8gQ2hlY2sgY2FjaGUgaWYgZmlsZSBsZW5ndGggaXMgYXZhaWxhYmxlLlxuICAgIGlmICh0aGlzLmZpbGVMZW5ndGggIT0gLTEpIHtcbiAgICAgIHZhciBidWYgPSB0aGlzLmdldEZyb21DYWNoZSgwLCB0aGlzLmZpbGVMZW5ndGggLSAxKTtcbiAgICAgIGlmIChidWYpIHtcbiAgICAgICAgcmV0dXJuIFEud2hlbihidWYpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdGhpcy51cmwpO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKChbYnVmZmVyXSkgPT4ge1xuICAgICAgdGhpcy5maWxlTGVuZ3RoID0gYnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgICB0aGlzLmNodW5rcyA9IFt7c3RhcnQ6IDAsIHN0b3A6IHRoaXMuZmlsZUxlbmd0aCAtIDEsIGJ1ZmZlcn1dO1xuICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJlYWRzIHRoZSBlbnRpcmUgZmlsZSBhcyBhIHN0cmluZyAobm90IGFuIEFycmF5QnVmZmVyKS5cbiAgLy8gVGhpcyBkb2VzIG5vdCB1c2UgdGhlIGNhY2hlLlxuICBnZXRBbGxTdHJpbmcoKTogUS5Qcm9taXNlPHN0cmluZz4ge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdGhpcy51cmwpO1xuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKChbc3RyaW5nXSkgPT4ge1xuICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgbnVtYmVyIG9mIGJ5dGVzIGluIHRoZSByZW1vdGUgZmlsZS5cbiAgZ2V0U2l6ZSgpOiBRLlByb21pc2U8bnVtYmVyPiB7XG4gICAgaWYgKHRoaXMuZmlsZUxlbmd0aCAhPSAtMSkge1xuICAgICAgcmV0dXJuIFEud2hlbih0aGlzLmZpbGVMZW5ndGgpO1xuICAgIH1cblxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignSEVBRCcsIHRoaXMudXJsKTtcblxuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKCgpID0+IHtcbiAgICAgIC8vIGV2ZW50LnRvdGFsIHdvdWxkIGJlIGJldHRlciwgc2VlIGZhY2Vib29rL2Zsb3cjMzU3XG4gICAgICB2YXIgbGVuID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdDb250ZW50LUxlbmd0aCcpO1xuICAgICAgaWYgKGxlbiAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKGxlbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyAnUmVtb3RlIHJlc291cmNlIGhhcyB1bmtub3duIGxlbmd0aCc7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXRGcm9tQ2FjaGUoc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogP0FycmF5QnVmZmVyIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2h1bmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY2h1bmsgPSB0aGlzLmNodW5rc1tpXTtcbiAgICAgIGlmIChjaHVuay5zdGFydCA8PSBzdGFydCAmJiBjaHVuay5zdG9wID49IHN0b3ApIHtcbiAgICAgICAgcmV0dXJuIGNodW5rLmJ1ZmZlci5zbGljZShzdGFydCAtIGNodW5rLnN0YXJ0LCBzdG9wIC0gY2h1bmsuc3RhcnQgKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBnZXRGcm9tTmV0d29yayhzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICB2YXIgbGVuZ3RoID0gc3RvcCAtIHN0YXJ0ICsgMTtcbiAgICBpZiAobGVuZ3RoID4gNTAwMDAwMDApIHtcbiAgICAgIHRocm93IGBNb25zdGVyIHJlcXVlc3Q6IFdvbid0IGZldGNoICR7bGVuZ3RofSBieXRlcyBmcm9tICR7dGhpcy51cmx9YDtcbiAgICB9XG5cbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHRoaXMudXJsKTtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignUmFuZ2UnLCBgYnl0ZXM9JHtzdGFydH0tJHtzdG9wfWApO1xuXG4gICAgcmV0dXJuIHRoaXMucHJvbWlzZVhIUih4aHIpLnRoZW4oKFtidWZmZXJdKSA9PiB7XG4gICAgICAvLyBUaGUgYWN0dWFsIGxlbmd0aCBvZiB0aGUgcmVzcG9uc2UgbWF5IGJlIGxlc3MgdGhhbiByZXF1ZXN0ZWQgaWYgaXQnc1xuICAgICAgLy8gdG9vIHNob3J0LCBlLmcuIGlmIHdlIHJlcXVlc3QgYnl0ZXMgMC0xMDAwIG9mIGEgNTAwLWJ5dGUgZmlsZS5cbiAgICAgIHZhciBuZXdDaHVuayA9IHsgc3RhcnQsIHN0b3A6IHN0YXJ0ICsgYnVmZmVyLmJ5dGVMZW5ndGggLSAxLCBidWZmZXIgfTtcbiAgICAgIHRoaXMuY2h1bmtzLnB1c2gobmV3Q2h1bmspO1xuXG4gICAgICAvLyBSZWNvcmQgdGhlIGZ1bGwgZmlsZSBsZW5ndGggaWYgaXQncyBhdmFpbGFibGUuXG4gICAgICB2YXIgc2l6ZSA9IHRoaXMuX2dldExlbmd0aEZyb21Db250ZW50UmFuZ2UoeGhyKTtcbiAgICAgIGlmIChzaXplICE9PSBudWxsICYmIHNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodGhpcy5maWxlTGVuZ3RoICE9IC0xICYmIHRoaXMuZmlsZUxlbmd0aCAhPSBzaXplKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBTaXplIG9mIHJlbW90ZSBmaWxlICR7dGhpcy51cmx9IGNoYW5nZWQgZnJvbSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5maWxlTGVuZ3RofSB0byAke3NpemV9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5maWxlTGVuZ3RoID0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gV3JhcHBlciB0byBjb252ZXJ0IFhIUnMgdG8gUHJvbWlzZXMuXG4gIC8vIFRoZSBwcm9taXNlZCB2YWx1ZXMgYXJlIHRoZSByZXNwb25zZSAoZS5nLiBhbiBBcnJheUJ1ZmZlcikgYW5kIHRoZSBFdmVudC5cbiAgcHJvbWlzZVhIUih4aHI6IFhNTEh0dHBSZXF1ZXN0KTogUS5Qcm9taXNlPFthbnksIEV2ZW50XT4ge1xuICAgIHZhciB1cmwgPSB0aGlzLnVybDtcbiAgICB2YXIgZGVmZXJyZWQgPSBRLmRlZmVyKCk7XG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KGBSZXF1ZXN0IGZvciAke3VybH0gZmFpbGVkIHdpdGggc3RhdHVzOiAke3RoaXMuc3RhdHVzfSAke3RoaXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoW3RoaXMucmVzcG9uc2UsIGVdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICAgIGRlZmVycmVkLnJlamVjdChgUmVxdWVzdCBmb3IgJHt1cmx9IGZhaWxlZCB3aXRoIHN0YXR1czogJHt0aGlzLnN0YXR1c30gJHt0aGlzLnN0YXR1c1RleHR9YCk7XG4gICAgfSk7XG4gICAgdGhpcy5udW1OZXR3b3JrUmVxdWVzdHMrKztcbiAgICB4aHIuc2VuZCgpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9XG5cbiAgLy8gQXR0ZW1wdGluZyB0byBhY2Nlc3MgQ29udGVudC1SYW5nZSBkaXJlY3RseSBtYXkgcmFpc2Ugc2VjdXJpdHkgZXJyb3JzLlxuICAvLyBUaGlzIGVuc3VyZXMgdGhlIGFjY2VzcyBpcyBzYWZlIGJlZm9yZSBtYWtpbmcgaXQuXG4gIF9nZXRMZW5ndGhGcm9tQ29udGVudFJhbmdlKHhocjogWE1MSHR0cFJlcXVlc3QpOiA/bnVtYmVyIHtcbiAgICBpZiAoIS9Db250ZW50LVJhbmdlL2kuZXhlYyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgY29udGVudFJhbmdlID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdDb250ZW50LVJhbmdlJyk7XG4gICAgdmFyIG0gPSAvXFwvKFxcZCspJC8uZXhlYyhjb250ZW50UmFuZ2UpO1xuICAgIGlmIChtKSB7XG4gICAgICByZXR1cm4gTnVtYmVyKG1bMV0pO1xuICAgIH1cbiAgICBjb25zb2xlLndhcm4oYFJlY2VpdmVkIGltcHJvcGVyIENvbnRlbnQtUmFuZ2UgdmFsdWUgZm9yIGAgK1xuICAgICAgICAgICAgICAgICBgJHt0aGlzLnVybH06ICR7Y29udGVudFJhbmdlfWApO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY2xlYXJDYWNoZSgpIHtcbiAgICB0aGlzLmNodW5rcyA9IFtdO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVtb3RlRmlsZTtcbiIsIi8qKlxuICogUmVtb3RlUmVxdWVzdCBpcyBhIGdlbmVyaWMgZW5kcG9pbnQgZm9yIHNlcnZpbmcgaHR0cCByZXF1ZXN0cy4gUmVtb3RlUmVxdWVzdFxuICogaGFuZGxlcyBqc29uIGRhdGEsIHdoaWNoIGlzIHNwZWNpZmllZCBieSBnZW5vbWljIHJhbmdlIChjb250aWcsIHN0YXJ0LCBzdG9wKVxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi9Db250aWdJbnRlcnZhbCc7XG5cbnZhciBNT05TVEVSX1JFUVVFU1QgPSA1MDAwMDAwO1xuXG5jbGFzcyBSZW1vdGVSZXF1ZXN0IHtcbiAgdXJsOiBzdHJpbmc7XG4gIGNhY2hlOiBPYmplY3Q7XG4gIG51bU5ldHdvcmtSZXF1ZXN0czogbnVtYmVyOyAgLy8gdHJhY2sgdGhpcyBmb3IgZGVidWdnaW5nL3Rlc3RpbmdcblxuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgIHRoaXMuY2FjaGUgPSByZXF1aXJlKCdtZW1vcnktY2FjaGUnKTtcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLm51bU5ldHdvcmtSZXF1ZXN0cyA9IDA7XG4gIH1cblxuICBnZXQoY29udGlnOiBzdHJpbmcsIHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlcik6IFEuUHJvbWlzZTxPYmplY3Q+IHtcbiAgICB2YXIgbGVuZ3RoID0gc3RvcCAtIHN0YXJ0O1xuICAgIGlmIChsZW5ndGggPD0gMCkge1xuICAgICAgcmV0dXJuIFEucmVqZWN0KGBSZXF1ZXN0ZWQgPDAgaW50ZXJ2YWwgKCR7bGVuZ3RofSkgZnJvbSAke3RoaXMudXJsfWApO1xuICAgIH1cblxuICAgIC8vIEZpcnN0IGNoZWNrIHRoZSBjYWNoZS5cbiAgICB2YXIgY29udGlnSW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwoY29udGlnLCBzdGFydCwgc3RvcCk7XG4gICAgdmFyIGJ1ZiA9IHRoaXMuY2FjaGUuZ2V0KGNvbnRpZ0ludGVydmFsKTtcbiAgICBpZiAoYnVmKSB7XG4gICAgICByZXR1cm4gUS53aGVuKGJ1Zik7XG4gICAgfVxuXG4gICAgLy8gTmVlZCB0byBmZXRjaCBmcm9tIHRoZSBuZXR3b3JrLlxuICAgIHJldHVybiB0aGlzLmdldEZyb21OZXR3b3JrKGNvbnRpZywgc3RhcnQsIHN0b3ApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgbXVzdCBiZSBvZiBmb3JtIFwidXJsL2NvbnRpZz9zdGFydD1zdGFydCZlbmQ9c3RvcFwiXG4gICovXG4gIGdldEZyb21OZXR3b3JrKGNvbnRpZzogc3RyaW5nLCBzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8T2JqZWN0PiB7XG4gICAgdmFyIGxlbmd0aCA9IHN0b3AgLSBzdGFydDtcbiAgICBpZiAobGVuZ3RoID4gNTAwMDAwMCkge1xuICAgICAgdGhyb3cgYE1vbnN0ZXIgcmVxdWVzdDogV29uJ3QgZmV0Y2ggJHtsZW5ndGh9IHNpemVkIHJhbmdlcyBmcm9tICR7dGhpcy51cmx9YDtcbiAgICB9XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHZhciBlbmRwb2ludCA9IHRoaXMuZ2V0RW5kcG9pbnRGcm9tQ29udGlnKGNvbnRpZywgc3RhcnQsIHN0b3ApO1xuICAgIHhoci5vcGVuKCdHRVQnLCBlbmRwb2ludCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblxuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKGpzb24gPT4ge1xuICAgICAgLy8gZXh0cmFjdCByZXNwb25zZSBmcm9tIHByb21pc2VcbiAgICAgIHZhciBidWZmZXIgPSBqc29uWzBdO1xuICAgICAgdmFyIGNvbnRpZ0ludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKGNvbnRpZywgc3RhcnQsIHN0b3ApO1xuICAgICAgdGhpcy5jYWNoZS5wdXQoY29udGlnSW50ZXJ2YWwsIGJ1ZmZlcik7XG4gICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0RW5kcG9pbnRGcm9tQ29udGlnKGNvbnRpZzogc3RyaW5nLCBzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLnVybH0vJHtjb250aWd9P3N0YXJ0PSR7c3RhcnR9JmVuZD0ke3N0b3B9YDtcbiAgfVxuXG4gIC8vIFdyYXBwZXIgdG8gY29udmVydCBYSFJzIHRvIFByb21pc2VzLlxuICAvLyBUaGUgcHJvbWlzZWQgdmFsdWVzIGFyZSB0aGUgcmVzcG9uc2UgKGUuZy4gYW4gQXJyYXlCdWZmZXIpIGFuZCB0aGUgRXZlbnQuXG4gIHByb21pc2VYSFIoeGhyOiBYTUxIdHRwUmVxdWVzdCk6IFEuUHJvbWlzZTxbYW55LCBFdmVudF0+IHtcbiAgICB2YXIgdXJsID0gdGhpcy51cmw7XG4gICAgdmFyIGRlZmVycmVkID0gUS5kZWZlcigpO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oZTogYW55KSB7XG4gICAgICBpZiAodGhpcy5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICAgIGRlZmVycmVkLnJlamVjdChgUmVxdWVzdCBmb3IgJHt1cmx9IGZhaWxlZCB3aXRoIHN0YXR1czogJHt0aGlzLnN0YXR1c30gJHt0aGlzLnN0YXR1c1RleHR9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKFt0aGlzLnJlc3BvbnNlLCBlXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24oZTogYW55KSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3QoYFJlcXVlc3QgZm9yICR7dXJsfSBmYWlsZWQgd2l0aCBzdGF0dXM6ICR7dGhpcy5zdGF0dXN9ICR7dGhpcy5zdGF0dXNUZXh0fWApO1xuICAgIH0pO1xuICAgIHRoaXMubnVtTmV0d29ya1JlcXVlc3RzKys7XG4gICAgeGhyLnNlbmQoKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgUmVtb3RlUmVxdWVzdCxcbiAgTU9OU1RFUl9SRVFVRVNUOiBNT05TVEVSX1JFUVVFU1Rcbn07XG4iLCIvKipcbiAqIFJvb3Qgb2YgdGhlIFJlYWN0IGNvbXBvbmVudCB0cmVlLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2V9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHR5cGUge1R3b0JpdFNvdXJjZX0gZnJvbSAnLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge1Zpc3VhbGl6ZWRUcmFjaywgVml6V2l0aE9wdGlvbnN9IGZyb20gJy4vdHlwZXMnO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IENvbnRyb2xzIGZyb20gJy4vQ29udHJvbHMnO1xuaW1wb3J0IE1lbnUgZnJvbSAnLi9NZW51JztcbmltcG9ydCBWaXN1YWxpemF0aW9uV3JhcHBlciBmcm9tICcuL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcblxudHlwZSBQcm9wcyA9IHtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG4gIHRyYWNrczogVmlzdWFsaXplZFRyYWNrW107XG4gIGluaXRpYWxSYW5nZTogR2Vub21lUmFuZ2U7XG59O1xuXG50eXBlIFN0YXRlID0ge1xuICBjb250aWdMaXN0OiBzdHJpbmdbXTtcbiAgcmFuZ2U6ID9HZW5vbWVSYW5nZTtcbiAgc2V0dGluZ3NNZW51S2V5OiA/c3RyaW5nO1xuICB1cGRhdGVTaXplOiBib29sZWFuO1xufTtcblxuY2xhc3MgUm9vdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgcHJvcHM6IFByb3BzO1xuICBzdGF0ZTogU3RhdGU7XG4gIHRyYWNrUmVhY3RFbGVtZW50czogQXJyYXk8T2JqZWN0PjsgLy9pdCdzIGFuIGFycmF5IG9mIHJlYWN0ZWxlbWVudCB0aGF0IGFyZSBjcmVhdGVkIGZvciB0cmFja3NcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBjb250aWdMaXN0OiB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5jb250aWdMaXN0KCksXG4gICAgICByYW5nZTogbnVsbCxcbiAgICAgIHVwZGF0ZVNpemU6IGZhbHNlLFxuICAgICAgc2V0dGluZ3NNZW51S2V5OiBudWxsXG4gICAgfTtcbiAgICB0aGlzLnRyYWNrUmVhY3RFbGVtZW50cyA9IFtdO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2Uub24oJ2NvbnRpZ3MnLCAoKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY29udGlnTGlzdDogdGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2UuY29udGlnTGlzdCgpLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUucmFuZ2UpIHtcbiAgICAgIHRoaXMuaGFuZGxlUmFuZ2VDaGFuZ2UodGhpcy5wcm9wcy5pbml0aWFsUmFuZ2UpO1xuICAgIH1cbiAgICAvLyBpbiBjYXNlIHRoZSBjb250aWdzIGNhbWUgaW4gYmV0d2VlbiBnZXRJbml0aWFsU3RhdGUoKSBhbmQgaGVyZS5cbiAgICB0aGlzLnNldFN0YXRlKHtjb250aWdMaXN0OiB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5jb250aWdMaXN0KCl9KTtcbiAgfVxuXG4gIGhhbmRsZVJhbmdlQ2hhbmdlKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgIC8vIERvIG5vdCBwcm9wYWdhdGUgbmVnYXRpdmUgcmFuZ2VzXG4gICAgaWYgKG5ld1JhbmdlLnN0YXJ0IDwgMCkge1xuICAgICAgbmV3UmFuZ2Uuc3RhcnQgPSAwO1xuICAgIH1cbiAgICB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5ub3JtYWxpemVSYW5nZShuZXdSYW5nZSkudGhlbihyYW5nZSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtyYW5nZTogcmFuZ2V9KTtcblxuICAgICAgLy8gSW5mb3JtIGFsbCB0aGUgc291cmNlcyBvZiB0aGUgcmFuZ2UgY2hhbmdlIChpbmNsdWRpbmcgcmVmZXJlbmNlU291cmNlKS5cbiAgICAgIHRoaXMucHJvcHMudHJhY2tzLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgICB0cmFjay5zb3VyY2UucmFuZ2VDaGFuZ2VkKHJhbmdlKTtcbiAgICAgIH0pO1xuICAgIH0pLmRvbmUoKTtcbiAgfVxuXG4gIHRvZ2dsZVNldHRpbmdzTWVudShrZXk6IHN0cmluZywgZTogU3ludGhldGljRXZlbnQ8Pikge1xuICAgIGlmICh0aGlzLnN0YXRlLnNldHRpbmdzTWVudUtleSA9PSBrZXkpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3NldHRpbmdzTWVudUtleTogbnVsbH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtzZXR0aW5nc01lbnVLZXk6IGtleX0pO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVNlbGVjdE9wdGlvbih0cmFja0tleTogc3RyaW5nLCBvcHRpb25LZXk6IHN0cmluZykge1xuICAgIHRoaXMuc2V0U3RhdGUoe3NldHRpbmdzTWVudUtleTogbnVsbH0pO1xuICAgIHZhciB2aXogPSB0aGlzLnByb3BzLnRyYWNrc1tOdW1iZXIodHJhY2tLZXkpXS52aXN1YWxpemF0aW9uO1xuICAgIHZhciBvbGRPcHRzID0gdml6Lm9wdGlvbnM7XG4gICAgLy8gJEZsb3dJZ25vcmU6IFRPRE8gcmVtb3ZlIGZsb3cgc3VwcHJlc3Npb25cbiAgICB2YXIgbmV3T3B0cyA9IHZpei5jb21wb25lbnQuaGFuZGxlU2VsZWN0T3B0aW9uKG9wdGlvbktleSwgb2xkT3B0cyk7XG4gICAgdml6Lm9wdGlvbnMgPSBuZXdPcHRzO1xuICAgIGlmIChuZXdPcHRzICE9IG9sZE9wdHMpIHtcbiAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBtYWtlRGl2Rm9yVHJhY2soa2V5OiBzdHJpbmcsIHRyYWNrOiBWaXN1YWxpemVkVHJhY2spOiBSZWFjdCRFbGVtZW50PCdkaXYnPiB7XG4gICAgLy90aGlzIHNob3VsZCBiZSBpbXByb3ZlZCwgYnV0IEkgaGF2ZSBubyBpZGVhIGhvdyAod2hlbiB0cnlpbmcgdG9cbiAgICAvL2FjY2VzcyB0aGlzLnRyYWNrUmVhY3RFbGVtZW50cyB3aXRoIHN0cmluZyBrZXksIGZsb3cgY29tcGxhaW5zKVxuICAgIHZhciBpbnRLZXkgPSBwYXJzZUludChrZXkpOyBcbiAgICB2YXIgdHJhY2tFbCA9IChcbiAgICAgICAgPFZpc3VhbGl6YXRpb25XcmFwcGVyIHZpc3VhbGl6YXRpb249e3RyYWNrLnZpc3VhbGl6YXRpb259XG4gICAgICAgICAgICByYW5nZT17dGhpcy5zdGF0ZS5yYW5nZX1cbiAgICAgICAgICAgIG9uUmFuZ2VDaGFuZ2U9e3RoaXMuaGFuZGxlUmFuZ2VDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgICAgIHNvdXJjZT17dHJhY2suc291cmNlfVxuICAgICAgICAgICAgb3B0aW9ucz17dHJhY2sudHJhY2sub3B0aW9uc31cbiAgICAgICAgICAgIHJlZmVyZW5jZVNvdXJjZT17dGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2V9XG4gICAgICAgICAgICByZWYgPSB7KGM6IFJlYWN0JEVsZW1lbnRSZWY8T2JqZWN0PikgPT4ge3RoaXMudHJhY2tSZWFjdEVsZW1lbnRzW2ludEtleV09Y319XG4gICAgICAgICAgLz4pO1xuXG4gICAgdmFyIHRyYWNrTmFtZSA9IHRyYWNrLnRyYWNrLm5hbWUgfHwgJyh0cmFjayBuYW1lKSc7XG5cbiAgICB2YXIgZ2Vhckljb24gPSBudWxsLFxuICAgICAgICBzZXR0aW5nc01lbnUgPSBudWxsO1xuICAgIC8vICRGbG93SWdub3JlOiBUT0RPIHJlbW92ZSBmbG93IHN1cHByZXNzaW9uXG4gICAgaWYgKHRyYWNrLnZpc3VhbGl6YXRpb24uY29tcG9uZW50LmdldE9wdGlvbnNNZW51KSB7XG4gICAgICBnZWFySWNvbiA9IChcbiAgICAgICAgICA8c3BhbiByZWY9eydnZWFyLScgKyBrZXl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdnZWFyJ1xuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlU2V0dGluZ3NNZW51LmJpbmQodGhpcywga2V5KX0+XG4gICAgICAgICAgICDimplcbiAgICAgICAgICA8L3NwYW4+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXRlLnNldHRpbmdzTWVudUtleSA9PSBrZXkpIHtcbiAgICAgIHZhciBnZWFyID0gdGhpcy5yZWZzWydnZWFyLScgKyBrZXldLFxuICAgICAgICAgIGdlYXJYID0gZ2Vhci5vZmZzZXRMZWZ0LFxuICAgICAgICAgIGdlYXJXID0gZ2Vhci5vZmZzZXRXaWR0aCxcbiAgICAgICAgICBnZWFyWSA9IGdlYXIub2Zmc2V0VG9wO1xuXG4gICAgICB2YXIgbWVudVN0eWxlID0ge1xuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgbGVmdDogKGdlYXJYICsgZ2VhclcpICsgJ3B4JyxcbiAgICAgICAgdG9wOiBnZWFyWSArICdweCdcbiAgICAgIH07XG4gICAgICAvLyAkRmxvd0lnbm9yZTogVE9ETyByZW1vdmUgZmxvdyBzdXBwcmVzc2lvblxuICAgICAgdmFyIGl0ZW1zID0gdHJhY2sudmlzdWFsaXphdGlvbi5jb21wb25lbnQuZ2V0T3B0aW9uc01lbnUodHJhY2sudmlzdWFsaXphdGlvbi5vcHRpb25zKTtcbiAgICAgIHNldHRpbmdzTWVudSA9IChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J21lbnUtY29udGFpbmVyJyBzdHlsZT17bWVudVN0eWxlfT5cbiAgICAgICAgICA8TWVudSBoZWFkZXI9e3RyYWNrTmFtZX0gaXRlbXM9e2l0ZW1zfSBvblNlbGVjdD17dGhpcy5oYW5kbGVTZWxlY3RPcHRpb24uYmluZCh0aGlzLCBrZXkpfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgdmFyIGNsYXNzTmFtZSA9IFsndHJhY2snLCB0cmFjay52aXN1YWxpemF0aW9uLmNvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCAnJywgdHJhY2sudHJhY2suY3NzQ2xhc3MgfHwgJyddLmpvaW4oJyAnKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGtleT17a2V5fSBjbGFzc05hbWU9e2NsYXNzTmFtZX0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmFjay1sYWJlbCc+XG4gICAgICAgICAgPHNwYW4+e3RyYWNrTmFtZX08L3NwYW4+XG4gICAgICAgICAgPGJyLz5cbiAgICAgICAgICB7Z2Vhckljb259XG4gICAgICAgICAge3NldHRpbmdzTWVudX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmFjay1jb250ZW50Jz5cbiAgICAgICAgICB7dHJhY2tFbH1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgLy8gVE9ETzogdXNlIGEgYmV0dGVyIGtleSB0aGFuIGluZGV4LlxuICAgIHZhciB0cmFja0VscyA9IHRoaXMucHJvcHMudHJhY2tzLm1hcCgodCwgaSkgPT4gdGhpcy5tYWtlRGl2Rm9yVHJhY2soJycraSwgdCkpO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncGlsZXVwLXJvb3QnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndHJhY2sgY29udHJvbHMnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmFjay1sYWJlbCc+XG4gICAgICAgICAgICAmbmJzcDtcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndHJhY2stY29udGVudCc+XG4gICAgICAgICAgICA8Q29udHJvbHMgY29udGlnTGlzdD17dGhpcy5zdGF0ZS5jb250aWdMaXN0fVxuICAgICAgICAgICAgICAgICAgICAgIHJhbmdlPXt0aGlzLnN0YXRlLnJhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVJhbmdlQ2hhbmdlLmJpbmQodGhpcyl9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7dHJhY2tFbHN9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUHJvcHMsIHByZXZTdGF0ZTogT2JqZWN0KSB7XG4gICAgaWYgKHRoaXMuc3RhdGUudXBkYXRlU2l6ZSkge1xuICAgICAgZm9yICh2YXIgaT0wO2k8dGhpcy5wcm9wcy50cmFja3MubGVuZ3RoO2krKykge1xuICAgICAgICB0aGlzLnRyYWNrUmVhY3RFbGVtZW50c1tpXS5zZXRTdGF0ZSh7dXBkYXRlU2l6ZTp0aGlzLnN0YXRlLnVwZGF0ZVNpemV9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdGUudXBkYXRlU2l6ZT1mYWxzZTtcbiAgICB9XG4gIH1cblxufVxuUm9vdC5kaXNwbGF5TmFtZSA9ICdSb290JztcblxubW9kdWxlLmV4cG9ydHMgPSBSb290O1xuIiwiLyoqXG4gKiBBIHN0b3JlIGZvciBzZXF1ZW5jZXMuXG4gKlxuICogVGhpcyBpcyB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSByZWZlcmVuY2UgZGF0YS5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIEludGVydmFsIGZyb20gJy4vSW50ZXJ2YWwnO1xuaW1wb3J0IHR5cGUgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi9Db250aWdJbnRlcnZhbCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5pbXBvcnQge2FsdENvbnRpZ05hbWV9IGZyb20gJy4vdXRpbHMnO1xuXG4vLyBTdG9yZSBzZXF1ZW5jZXMgb2YgdGhpcyBtYW55IGJhc2UgcGFpcnMgdG9nZXRoZXIgaW4gYSBzaW5nbGUgc3RyaW5nLlxuY29uc3QgQ0hVTktfU0laRSA9IDEwMDA7XG5cbnR5cGUgU2VxTWFwID0ge1trZXk6IG51bWJlcl06IHN0cmluZ307XG50eXBlIENodW5rV2l0aE9mZnNldCA9IHtcbiAgY2h1bmtTdGFydDogbnVtYmVyO1xuICBvZmZzZXQ6IG51bWJlcjtcbiAgbGVuZ3RoOiBudW1iZXI7XG59O1xuXG4vLyBUaGlzIGNsYXNzIHN0b3JlcyBzZXF1ZW5jZXMgZWZmaWNpZW50bHkuXG5jbGFzcyBTZXF1ZW5jZVN0b3JlIHtcbiAgLy8gY29udGlnIC0tPiBzdGFydCBvZiBjaHVuayAtLT4gc2VxdWVuY2Ugb2YgY2h1bmtcbiAgY29udGlnTWFwOiB7W2tleTogc3RyaW5nXTogU2VxTWFwfTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbnRpZ01hcCA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhIHJhbmdlIG9mIHRoZSBnZW5vbWUgdG8gdGhlIHBhcnRpY3VsYXIgc2VxdWVuY2UuXG4gICAqIFRoaXMgb3ZlcndyaXRlcyBhbnkgZXhpc3RpbmcgZGF0YS5cbiAgICovXG4gIHNldFJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LCBzZXF1ZW5jZTogc3RyaW5nKSB7XG4gICAgaWYgKHJhbmdlLmxlbmd0aCgpID09PSAwKSByZXR1cm47XG4gICAgaWYgKHJhbmdlLmxlbmd0aCgpICE9IHNlcXVlbmNlLmxlbmd0aCkge1xuICAgICAgdGhyb3cgJ3NldFJhbmdlIGxlbmd0aCBtaXNtYXRjaCc7XG4gICAgfVxuXG4gICAgdmFyIHNlcXMgPSB0aGlzLl9nZXRTZXF1ZW5jZXMocmFuZ2UuY29udGlnKTtcbiAgICBpZiAoIXNlcXMpIHtcbiAgICAgIHNlcXMgPSB0aGlzLmNvbnRpZ01hcFtyYW5nZS5jb250aWddID0ge307XG4gICAgfVxuXG4gICAgZm9yICh2YXIgY2h1bmsgb2YgdGhpcy5fY2h1bmtGb3JJbnRlcnZhbChyYW5nZS5pbnRlcnZhbCkpIHtcbiAgICAgIHZhciBwb3MgPSBjaHVuay5jaHVua1N0YXJ0ICsgY2h1bmsub2Zmc2V0IC0gcmFuZ2Uuc3RhcnQoKTtcbiAgICAgIHRoaXMuX3NldENodW5rKHNlcXMsIGNodW5rLCBzZXF1ZW5jZS5zbGljZShwb3MsIHBvcyArIGNodW5rLmxlbmd0aCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBhIHJhbmdlIG9mIHNlcXVlbmNlIGRhdGEuXG4gICAqIElmIGFueSBwb3J0aW9ucyBhcmUgdW5rbm93biwgdGhleSB3aWxsIGJlIHNldCB0byAnLicuXG4gICAqL1xuICBnZXRBc1N0cmluZyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IHN0cmluZyB7XG4gICAgY29uc3Qgc2VxcyA9IHRoaXMuX2dldFNlcXVlbmNlcyhyYW5nZS5jb250aWcpO1xuICAgIGlmICghc2Vxcykge1xuICAgICAgcmV0dXJuICcuJy5yZXBlYXQocmFuZ2UubGVuZ3RoKCkpO1xuICAgIH1cblxuICAgIHZhciBjaHVua3MgPSB0aGlzLl9jaHVua0ZvckludGVydmFsKHJhbmdlLmludGVydmFsKTtcbiAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgZm9yICh2YXIgY2h1bmsgb2YgY2h1bmtzKSB7XG4gICAgICB2YXIgc2VxID0gc2Vxc1tjaHVuay5jaHVua1N0YXJ0XTtcbiAgICAgIGlmICghc2VxKSB7XG4gICAgICAgIHJlc3VsdCArPSAnLicucmVwZWF0KGNodW5rLmxlbmd0aCk7XG4gICAgICB9IGVsc2UgaWYgKGNodW5rLm9mZnNldCA9PT0gMCAmJiBjaHVuay5sZW5ndGggPT0gc2VxLmxlbmd0aCkge1xuICAgICAgICByZXN1bHQgKz0gc2VxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ICs9IHNlcS5zbGljZShjaHVuay5vZmZzZXQsIGNodW5rLm9mZnNldCArIGNodW5rLmxlbmd0aCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogTGlrZSBnZXRBc1N0cmluZygpLCBidXQgcmV0dXJucyBhIGxlc3MgZWZmaWNpZW50IG9iamVjdCByZXByZXNlbnRhdGlvbjpcbiAgICogeydjaHIxOjEwJzogJ0EnLCAnY2hyMToxMSc6ICdDJywgLi4ufVxuICAgKi9cbiAgZ2V0QXNPYmplY3RzKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KToge1trZXk6c3RyaW5nXTogP3N0cmluZ30ge1xuICAgIHJldHVybiBfLm9iamVjdChfLm1hcCh0aGlzLmdldEFzU3RyaW5nKHJhbmdlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKGJhc2UsIGkpID0+IFtyYW5nZS5jb250aWcgKyAnOicgKyAocmFuZ2Uuc3RhcnQoKSArIGkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2UgPT0gJy4nID8gbnVsbCA6IGJhc2VdKSk7XG4gIH1cblxuICAvLyBSZXRyaWV2ZSBhIGNodW5rIGZyb20gdGhlIHNlcXVlbmNlIG1hcC5cbiAgX2dldENodW5rKHNlcXM6IFNlcU1hcCwgc3RhcnQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIHNlcXNbc3RhcnRdIHx8ICcuJy5yZXBlYXQoQ0hVTktfU0laRSk7XG4gIH1cblxuICAvLyBTcGxpdCBhbiBpbnRlcnZhbCBpbnRvIGNodW5rcyB3aGljaCBhbGlnbiB3aXRoIHRoZSBzdG9yZS5cbiAgX2NodW5rRm9ySW50ZXJ2YWwocmFuZ2U6IEludGVydmFsKTogQ2h1bmtXaXRoT2Zmc2V0W10ge1xuICAgIHZhciBvZmZzZXQgPSByYW5nZS5zdGFydCAlIENIVU5LX1NJWkUsXG4gICAgICAgIGNodW5rU3RhcnQgPSByYW5nZS5zdGFydCAtIG9mZnNldDtcbiAgICB2YXIgY2h1bmtzID0gW3tcbiAgICAgIGNodW5rU3RhcnQsXG4gICAgICBvZmZzZXQsXG4gICAgICBsZW5ndGg6IE1hdGgubWluKENIVU5LX1NJWkUgLSBvZmZzZXQsIHJhbmdlLmxlbmd0aCgpKVxuICAgIH1dO1xuICAgIGNodW5rU3RhcnQgKz0gQ0hVTktfU0laRTtcbiAgICBmb3IgKDsgY2h1bmtTdGFydCA8PSByYW5nZS5zdG9wOyBjaHVua1N0YXJ0ICs9IENIVU5LX1NJWkUpIHtcbiAgICAgIGNodW5rcy5wdXNoKHtcbiAgICAgICAgY2h1bmtTdGFydCxcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICBsZW5ndGg6IE1hdGgubWluKENIVU5LX1NJWkUsIHJhbmdlLnN0b3AgLSBjaHVua1N0YXJ0ICsgMSlcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY2h1bmtzO1xuICB9XG5cbiAgLy8gU2V0IGEgKHN1YnNldCBvZiBhKSBjaHVuayB0byB0aGUgZ2l2ZW4gc2VxdWVuY2UuXG4gIF9zZXRDaHVuayhzZXFzOiBTZXFNYXAsIGNodW5rOiBDaHVua1dpdGhPZmZzZXQsIHNlcXVlbmNlOiBzdHJpbmcpIHtcbiAgICAvLyBGaXJzdDogdGhlIGVhc3kgY2FzZS4gVG90YWwgcmVwbGFjZW1lbnQuXG4gICAgaWYgKGNodW5rLm9mZnNldCA9PT0gMCAmJiBzZXF1ZW5jZS5sZW5ndGggPT0gQ0hVTktfU0laRSkge1xuICAgICAgc2Vxc1tjaHVuay5jaHVua1N0YXJ0XSA9IHNlcXVlbmNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFdlIG5lZWQgdG8gbWVyZ2UgdGhlIG5ldyBzZXF1ZW5jZSB3aXRoIHRoZSBvbGQuXG4gICAgdmFyIG9sZENodW5rID0gdGhpcy5fZ2V0Q2h1bmsoc2VxcywgY2h1bmsuY2h1bmtTdGFydCk7XG4gICAgc2Vxc1tjaHVuay5jaHVua1N0YXJ0XSA9IG9sZENodW5rLnNsaWNlKDAsIGNodW5rLm9mZnNldCkgK1xuICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZSArXG4gICAgICAgICAgICAgICAgICAgICAgIG9sZENodW5rLnNsaWNlKGNodW5rLm9mZnNldCArIHNlcXVlbmNlLmxlbmd0aCk7XG4gIH1cblxuICAvLyBHZXQgdGhlIHNlcXVlbmNlcyBmb3IgYSBjb250aWcsIGFsbG93aW5nIGNoci0gbWlzbWF0Y2hlcy5cbiAgX2dldFNlcXVlbmNlcyhjb250aWc6IHN0cmluZyk6ID9TZXFNYXAge1xuICAgIHJldHVybiB0aGlzLmNvbnRpZ01hcFtjb250aWddIHx8XG4gICAgICAgICAgIHRoaXMuY29udGlnTWFwW2FsdENvbnRpZ05hbWUoY29udGlnKV0gfHxcbiAgICAgICAgICAgbnVsbDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNlcXVlbmNlU3RvcmU7XG4iLCIvKipcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuXG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2UsIFZpeldpdGhPcHRpb25zfSBmcm9tICcuL3R5cGVzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi92aXovZDN1dGlscyc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBkMyBmcm9tICcuLi9saWIvbWluaWQzJztcblxuZXhwb3J0IHR5cGUgVml6UHJvcHM8VDogYW55PiA9IHtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG4gIHJhbmdlOiBHZW5vbWVSYW5nZTtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG4gIHNvdXJjZTogVDtcbiAgb3B0aW9uczogYW55O1xufTtcblxudHlwZSBQcm9wcyA9IHtcbiAgcmFuZ2U6ID9HZW5vbWVSYW5nZTtcbiAgdmlzdWFsaXphdGlvbjogVml6V2l0aE9wdGlvbnM7XG4gIG9uUmFuZ2VDaGFuZ2U6IChuZXdSYW5nZTogR2Vub21lUmFuZ2UpID0+IHZvaWQ7XG4gIHJlZmVyZW5jZVNvdXJjZTogVHdvQml0U291cmNlO1xuICBzb3VyY2U6IGFueTtcbiAgb3B0aW9uczogP09iamVjdDtcbn07XG5cbnR5cGUgU3RhdGUgPSB7XG4gIHdpZHRoOiBudW1iZXI7IFxuICBoZWlnaHQ6IG51bWJlcjsgXG4gIHVwZGF0ZVNpemU6IGJvb2xlYW47XG59O1xuXG5jbGFzcyBWaXN1YWxpemF0aW9uV3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgcHJvcHM6IFByb3BzO1xuICBzdGF0ZTogU3RhdGU7XG4gIGhhc0RyYWdCZWVuSW5pdGlhbGl6ZWQ6IGJvb2xlYW47XG4gIG9uUmVzaXplTGlzdGVuZXI6IE9iamVjdDsgIC8vbGlzdGVuZXIgdGhhdCBoYW5kbGVzIHdpbmRvdy5vbnJlc2l6ZSBldmVudFxuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBPYmplY3QpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5oYXNEcmFnQmVlbkluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHVwZGF0ZVNpemU6IGZhbHNlLFxuICAgICAgd2lkdGg6IDAsXG4gICAgICBoZWlnaHQ6IDBcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlU2l6ZSgpOiBhbnkge1xuICAgIHZhciB0aGlzTm9kZSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpXG4gICAgaWYgKHRoaXNOb2RlICYmIHRoaXNOb2RlIGluc3RhbmNlb2YgRWxlbWVudCkgeyAvLyBjaGVjayBmb3IgZ2V0Q29udGV4dFxuICAgICAgdmFyIHBhcmVudERpdiA9IHRoaXNOb2RlLnBhcmVudE5vZGU7ICBcbiAgICAgIGlmIChwYXJlbnREaXYgJiYgcGFyZW50RGl2IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHsgLy8gY2hlY2sgZm9yIGdldENvbnRleHRcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgdXBkYXRlU2l6ZTogZmFsc2UsXG4gICAgICAgICAgd2lkdGg6IHBhcmVudERpdi5vZmZzZXRXaWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IHBhcmVudERpdi5vZmZzZXRIZWlnaHRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKTogYW55IHtcbiAgICAvL2xvY2FsIGNvcHkgb2YgdGhlIGxpc3RlbmVyLCBzbyB3ZSBjYW4gcmVtb3ZlIGl0XG4gICAgLy93aGVuIHBpbGV1cCBpcyBkZXN0cm95ZWRcbiAgICB0aGlzLm9uUmVzaXplTGlzdGVuZXIgPSAoKSA9PiB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vblJlc2l6ZUxpc3RlbmVyKTtcbiAgICB0aGlzLnVwZGF0ZVNpemUoKTtcblxuICAgIGlmICh0aGlzLnByb3BzLnJhbmdlICYmICF0aGlzLmhhc0RyYWdCZWVuSW5pdGlhbGl6ZWQpIHRoaXMuYWRkRHJhZ0ludGVyZmFjZSgpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCk6IGFueSB7XG4gICAgaWYgKHRoaXMucHJvcHMucmFuZ2UgJiYgIXRoaXMuaGFzRHJhZ0JlZW5Jbml0aWFsaXplZCkgdGhpcy5hZGREcmFnSW50ZXJmYWNlKCk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpOiBhbnkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uUmVzaXplTGlzdGVuZXIpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogKG51bTogbnVtYmVyKT0+bnVtYmVyIHtcbiAgICBpZiAoIXRoaXMucHJvcHMucmFuZ2UpIHJldHVybiB4ID0+IHg7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnN0YXRlLndpZHRoKTtcbiAgfVxuXG4gIGFkZERyYWdJbnRlcmZhY2UoKTogYW55IHtcbiAgICB0aGlzLmhhc0RyYWdCZWVuSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIHZhciBkaXYgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICB2YXIgb3JpZ2luYWxSYW5nZSwgb3JpZ2luYWxTY2FsZSwgZHg9MDtcbiAgICB2YXIgZHJhZ3N0YXJ0ZWQgPSAoKSA9PiB7XG4gICAgICBkMy5ldmVudC5zb3VyY2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGR4ID0gMDtcbiAgICAgIG9yaWdpbmFsUmFuZ2UgPSBfLmNsb25lKHRoaXMucHJvcHMucmFuZ2UpO1xuICAgICAgb3JpZ2luYWxTY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKTtcbiAgICB9O1xuICAgIHZhciB1cGRhdGVSYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmICghb3JpZ2luYWxTY2FsZSkgcmV0dXJuOyAgLy8gY2FuIG5ldmVyIGhhcHBlbiwgYnV0IEZsb3cgZG9uJ3Qga25vdy5cbiAgICAgIGlmICghb3JpZ2luYWxSYW5nZSkgcmV0dXJuOyAgLy8gY2FuIG5ldmVyIGhhcHBlbiwgYnV0IEZsb3cgZG9uJ3Qga25vdy5cbiAgICAgIHZhciBuZXdTdGFydCA9IG9yaWdpbmFsU2NhbGUuaW52ZXJ0KC1keCksXG4gICAgICAgICAgaW50U3RhcnQgPSBNYXRoLnJvdW5kKG5ld1N0YXJ0KSxcbiAgICAgICAgICBvZmZzZXRQeCA9IG9yaWdpbmFsU2NhbGUobmV3U3RhcnQpIC0gb3JpZ2luYWxTY2FsZShpbnRTdGFydCk7XG5cbiAgICAgIHZhciBuZXdSYW5nZSA9IHtcbiAgICAgICAgY29udGlnOiBvcmlnaW5hbFJhbmdlLmNvbnRpZyxcbiAgICAgICAgc3RhcnQ6IGludFN0YXJ0LFxuICAgICAgICBzdG9wOiBpbnRTdGFydCArIChvcmlnaW5hbFJhbmdlLnN0b3AgLSBvcmlnaW5hbFJhbmdlLnN0YXJ0KSxcbiAgICAgICAgb2Zmc2V0UHg6IG9mZnNldFB4XG4gICAgICB9O1xuICAgICAgdGhpcy5wcm9wcy5vblJhbmdlQ2hhbmdlKG5ld1JhbmdlKTtcbiAgICB9O1xuICAgIHZhciBkcmFnbW92ZSA9ICgpID0+IHtcbiAgICAgIGR4ICs9IGQzLmV2ZW50LmR4OyAgLy8gdGhlc2UgYXJlIGludGVnZXJzLCBzbyBubyByb3VuZG9mZiBpc3N1ZXMuXG4gICAgICB1cGRhdGVSYW5nZSgpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gZHJhZ2VuZGVkKCkge1xuICAgICAgdXBkYXRlUmFuZ2UoKTtcbiAgICB9XG5cbiAgICB2YXIgZHJhZyA9IGQzLmJlaGF2aW9yLmRyYWcoKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGRyYWdzdGFydGVkKVxuICAgICAgICAub24oJ2RyYWcnLCBkcmFnbW92ZSlcbiAgICAgICAgLm9uKCdkcmFnZW5kJywgZHJhZ2VuZGVkKTtcblxuICAgIGQzLnNlbGVjdChkaXYpLmNhbGwoZHJhZykub24oJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKCk6IGFueSB7XG4gICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVcGRhdGUobmV4dFByb3BzOlByb3BzLCBuZXh0U3RhdGU6IE9iamVjdCkge1xuICAgIGlmIChuZXh0U3RhdGUudXBkYXRlU2l6ZSkge1xuICAgICAgdGhpcy51cGRhdGVTaXplKCk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlO1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMucHJvcHMudmlzdWFsaXphdGlvbi5jb21wb25lbnQ7XG4gICAgaWYgKCFyYW5nZSkge1xuICAgICAgaWYgKGNvbXBvbmVudC5kaXNwbGF5TmFtZSAhPSBudWxsKVxuICAgICAgICByZXR1cm4gPEVtcHR5VHJhY2sgY2xhc3NOYW1lPXtjb21wb25lbnQuZGlzcGxheU5hbWV9IC8+O1xuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gPEVtcHR5VHJhY2sgY2xhc3NOYW1lPSdFbXB0eVRyYWNrJyAvPjtcbiAgICB9XG5cbiAgICB2YXIgb3B0aW9ucyA9IF8uZXh0ZW5kKF8uY2xvbmUodGhpcy5wcm9wcy52aXN1YWxpemF0aW9uLm9wdGlvbnMpLHRoaXMucHJvcHMub3B0aW9ucyk7XG5cbiAgICB2YXIgZWwgPSBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudCwgKHtcbiAgICAgIHJhbmdlOiByYW5nZSxcbiAgICAgIHNvdXJjZTogdGhpcy5wcm9wcy5zb3VyY2UsXG4gICAgICByZWZlcmVuY2VTb3VyY2U6IHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLFxuICAgICAgd2lkdGg6IHRoaXMuc3RhdGUud2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMuc3RhdGUuaGVpZ2h0LFxuICAgICAgb3B0aW9uczogb3B0aW9uc1xuICAgIH0gOiBWaXpQcm9wczxhbnk+KSk7XG5cbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9J2RyYWctd3JhcHBlcic+e2VsfTwvZGl2PjtcbiAgfVxufVxuVmlzdWFsaXphdGlvbldyYXBwZXIuZGlzcGxheU5hbWUgPSAnVmlzdWFsaXphdGlvbldyYXBwZXInO1xuXG5cbnR5cGUgRW1wdHlUcmFja1Byb3BzID0ge2NsYXNzTmFtZTogc3RyaW5nfTtcbmNsYXNzIEVtcHR5VHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8RW1wdHlUcmFja1Byb3BzPiB7XG4gIHJlbmRlcigpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5wcm9wcy5jbGFzc05hbWUgKyAnIGVtcHR5JztcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZX0+PC9kaXY+O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVmlzdWFsaXphdGlvbldyYXBwZXI7XG4iLCIvKipcbiAqIFBhcnNlciBmb3IgYmlnQmVkIGZvcm1hdC5cbiAqIEJhc2VkIG9uIFVDU0MncyBzcmMvaW5jL2JiaUZpbGUuaFxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5pbXBvcnQgcGFrbyBmcm9tICdwYWtvL2xpYi9pbmZsYXRlJzsgIC8vIGZvciBnemlwIGluZmxhdGlvblxuXG5pbXBvcnQgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBiYmkgZnJvbSAnLi9mb3JtYXRzL2JiaSc7XG5cblxuZnVuY3Rpb24gcGFyc2VIZWFkZXIoYnVmZmVyKSB7XG4gIC8vIFRPRE86IGNoZWNrIEVuZGlhbm5lc3MgdXNpbmcgbWFnaWMuIFBvc3NpYmx5IHVzZSBqRGF0YVZpZXcubGl0dGxlRW5kaWFuXG4gIC8vIHRvIGZsaXAgdGhlIGVuZGlhbm5lc3MgZm9yIGpCaW5hcnkgY29uc3VtcHRpb24uXG4gIC8vIE5COiBkYWxsaWFuY2UgZG9lc24ndCBzdXBwb3J0IGJpZyBlbmRpYW4gZm9ybWF0cy5cbiAgcmV0dXJuIG5ldyBqQmluYXJ5KGJ1ZmZlciwgYmJpLlRZUEVfU0VUKS5yZWFkKCdIZWFkZXInKTtcbn1cblxuLy8gVGhlIFwiQ0lSXCIgdHJlZSBjb250YWlucyBhIG1hcHBpbmcgZnJvbSBzZXF1ZW5jZSAtPiBibG9jayBvZmZzZXRzLlxuLy8gSXQgc3RhbmRzIGZvciBcIkNocm9tb3NvbWUgSW5kZXggUiB0cmVlXCJcbmZ1bmN0aW9uIHBhcnNlQ2lyVHJlZShidWZmZXIpIHtcbiAgcmV0dXJuIG5ldyBqQmluYXJ5KGJ1ZmZlciwgYmJpLlRZUEVfU0VUKS5yZWFkKCdDaXJUcmVlJyk7XG59XG5cbi8vIEV4dHJhY3QgYSBtYXAgZnJvbSBjb250aWcgbmFtZSAtLT4gY29udGlnIElEIGZyb20gdGhlIGJpZ0JlZCBoZWFkZXIuXG5mdW5jdGlvbiBnZW5lcmF0ZUNvbnRpZ01hcChoZWFkZXIpOiB7W2tleTpzdHJpbmddOiBudW1iZXJ9IHtcbiAgLy8gSnVzdCBhc3N1bWUgaXQncyBhIGZsYXQgXCJ0cmVlXCIgZm9yIG5vdy5cbiAgdmFyIG5vZGVzID0gaGVhZGVyLmNocm9tb3NvbWVUcmVlLm5vZGVzLmNvbnRlbnRzO1xuICBpZiAoIW5vZGVzKSB7XG4gICAgdGhyb3cgJ0ludmFsaWQgY2hyb21vc29tZSB0cmVlJztcbiAgfVxuICByZXR1cm4gXy5vYmplY3Qobm9kZXMubWFwKGZ1bmN0aW9uKHtpZCwga2V5fSkge1xuICAgIC8vIHJlbW92ZSB0cmFpbGluZyBudWxscyBmcm9tIHRoZSBrZXkgc3RyaW5nXG4gICAgcmV0dXJuIFtrZXkucmVwbGFjZSgvXFwwLiovLCAnJyksIGlkXTtcbiAgfSkpO1xufVxuXG4vLyBHZW5lcmF0ZSB0aGUgcmV2ZXJzZSBtYXAgZnJvbSBjb250aWcgSUQgLS0+IGNvbnRpZyBuYW1lLlxuZnVuY3Rpb24gcmV2ZXJzZUNvbnRpZ01hcChjb250aWdNYXA6IHtba2V5OnN0cmluZ106IG51bWJlcn0pOiBBcnJheTxzdHJpbmc+IHtcbiAgdmFyIGFyeSA9IFtdO1xuICBfLmVhY2goY29udGlnTWFwLCAoaW5kZXgsIG5hbWUpID0+IHtcbiAgICBhcnlbaW5kZXhdID0gbmFtZTtcbiAgfSk7XG4gIHJldHVybiBhcnk7XG59XG5cblxuZnVuY3Rpb24gZXh0cmFjdEZlYXR1cmVzRnJvbUJsb2NrKGJ1ZmZlcjogQXJyYXlCdWZmZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVJhbmdlOiBJbnRlcnZhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jazogTGVhZkRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDb21wcmVzc2VkOiBib29sZWFuKTogQ2hySWRCZWRSb3dbXSB7XG4gIHZhciBibG9ja09mZnNldCA9IGJsb2NrLm9mZnNldCAtIGRhdGFSYW5nZS5zdGFydCxcbiAgICAgIGJsb2NrTGltaXQgPSBibG9ja09mZnNldCArIGJsb2NrLnNpemUsXG5cbiAgICAgIGJsb2NrQnVmZmVyID1cbiAgICAgICAgLy8gTk9URTogXCIrIDJcIiBza2lwcyBvdmVyIHR3byBieXRlcyBvZiBnemlwIGhlYWRlciAoMHg4YjFmKSwgd2hpY2ggcGFrby5pbmZsYXRlUmF3IHdpbGwgbm90IGhhbmRsZS5cbiAgICAgICAgYnVmZmVyLnNsaWNlKFxuICAgICAgICAgIGJsb2NrT2Zmc2V0ICsgKGlzQ29tcHJlc3NlZCA/IDIgOiAwKSxcbiAgICAgICAgICBibG9ja0xpbWl0XG4gICAgICAgICk7XG5cbiAgdmFyIGluZmxhdGVkQnVmZmVyID1cbiAgICBpc0NvbXByZXNzZWQgP1xuICAgICAgcGFrby5pbmZsYXRlUmF3KG5ldyBVaW50OEFycmF5KGJsb2NrQnVmZmVyKSkgOlxuICAgICAgYmxvY2tCdWZmZXI7XG5cbiAgdmFyIGpiID0gbmV3IGpCaW5hcnkoaW5mbGF0ZWRCdWZmZXIsIGJiaS5UWVBFX1NFVCk7XG4gIC8vIFRPRE86IHBhcnNlIG9ubHkgb25lIEJlZEVudHJ5IGF0IGEgdGltZSAmIHVzZSBhbiBpdGVyYXRvci5cbiAgcmV0dXJuIGpiLnJlYWQoJ0JlZEJsb2NrJyk7XG59XG5cblxudHlwZSBCZWRSb3cgPSB7XG4gIC8vIEhhbGYtb3BlbiBpbnRlcnZhbCBmb3IgdGhlIEJFRCByb3cuXG4gIGNvbnRpZzogc3RyaW5nO1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG4gIC8vIFJlbWFpbmluZyBmaWVsZHMgaW4gdGhlIEJFRCByb3cgKHR5cGljYWxseSB0YWItZGVsaW1pdGVkKVxuICByZXN0OiBzdHJpbmc7XG59XG5cbnR5cGUgQ2hySWRCZWRSb3cgPSB7XG4gIGNocklkOiBudW1iZXI7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjsgIC8vIG5vdGU6IG5vdCBpbmNsdXNpdmVcbiAgcmVzdDogc3RyaW5nO1xufVxuXG4vLyBBbGwgZmVhdHVyZXMgZm91bmQgaW4gcmFuZ2UuXG50eXBlIEJlZEJsb2NrID0ge1xuICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPjtcbiAgcm93czogQmVkUm93W107XG59XG5cbnR5cGUgQ2hySWRCZWRCbG9jayA9IHtcbiAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj47XG4gIHJvd3M6IENocklkQmVkUm93W107XG59XG5cbi8vIEEgY29weSBvZiBMZWFmRGF0YSBmcm9tIGJiaS5qcy5cbnR5cGUgTGVhZkRhdGEgPSB7XG4gIHN0YXJ0Q2hyb21JeDogbnVtYmVyO1xuICBzdGFydEJhc2U6IG51bWJlcjtcbiAgZW5kQ2hyb21JeDogbnVtYmVyO1xuICBlbmRCYXNlOiBudW1iZXI7XG4gIG9mZnNldDogbnVtYmVyO1xuICBzaXplOiBudW1iZXI7XG59XG5cbi8vIFRoaXMgKGludGVybmFsKSB2ZXJzaW9uIG9mIHRoZSBCaWdCZWQgY2xhc3MgaGFzIG5vIHByb21pc2VzIGZvciBoZWFkZXJzLFxuLy8gb25seSBpbW1lZGlhdGUgZGF0YS4gVGhpcyBncmVhdGx5IHNpbXBsaWZpZXMgd3JpdGluZyBtZXRob2RzIG9uIGl0LlxuY2xhc3MgSW1tZWRpYXRlQmlnQmVkIHtcbiAgcmVtb3RlRmlsZTogUmVtb3RlRmlsZTtcbiAgaGVhZGVyOiBPYmplY3Q7XG4gIGNpclRyZWU6IE9iamVjdDtcbiAgY29udGlnTWFwOiB7W2tleTpzdHJpbmddOiBudW1iZXJ9O1xuICBjaHJJZFRvQ29udGlnOiBzdHJpbmdbXTtcblxuICBjb25zdHJ1Y3RvcihyZW1vdGVGaWxlLCBoZWFkZXIsIGNpclRyZWUsIGNvbnRpZ01hcDoge1trZXk6c3RyaW5nXTogbnVtYmVyfSkge1xuICAgIHRoaXMucmVtb3RlRmlsZSA9IHJlbW90ZUZpbGU7XG4gICAgdGhpcy5oZWFkZXIgPSBoZWFkZXI7XG4gICAgdGhpcy5jaXJUcmVlID0gY2lyVHJlZTtcbiAgICB0aGlzLmNvbnRpZ01hcCA9IGNvbnRpZ01hcDtcbiAgICB0aGlzLmNocklkVG9Db250aWcgPSByZXZlcnNlQ29udGlnTWFwKGNvbnRpZ01hcCk7XG4gIH1cblxuICAvLyBNYXAgY29udGlnIG5hbWUgdG8gY29udGlnIElELiBMZWFkaW5nIFwiY2hyXCIgaXMgb3B0aW9uYWwuIFRocm93cyBvbiBmYWlsdXJlLlxuICBnZXRDb250aWdJZChjb250aWc6IHN0cmluZyk6IG51bWJlciB7XG4gICAgaWYgKGNvbnRpZyBpbiB0aGlzLmNvbnRpZ01hcCkgcmV0dXJuIHRoaXMuY29udGlnTWFwW2NvbnRpZ107XG4gICAgdmFyIGNociA9ICdjaHInICsgY29udGlnO1xuICAgIGlmIChjaHIgaW4gdGhpcy5jb250aWdNYXApIHJldHVybiB0aGlzLmNvbnRpZ01hcFtjaHJdO1xuICAgIHRocm93IGBJbnZhbGlkIGNvbnRpZyAke2NvbnRpZ31gO1xuICB9XG5cbiAgZ2V0Q2hySWRJbnRlcnZhbChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IENvbnRpZ0ludGVydmFsPG51bWJlcj4ge1xuICAgIHJldHVybiBuZXcgQ29udGlnSW50ZXJ2YWwoXG4gICAgICAgIHRoaXMuZ2V0Q29udGlnSWQocmFuZ2UuY29udGlnKSwgcmFuZ2Uuc3RhcnQoKSwgcmFuZ2Uuc3RvcCgpKTtcbiAgfVxuXG4gIGdldENvbnRpZ0ludGVydmFsKHJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+KTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbChcbiAgICAgICAgdGhpcy5jaHJJZFRvQ29udGlnW3JhbmdlLmNvbnRpZ10sIHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSk7XG4gIH1cblxuICAvLyBCZWQgZW50cmllcyBoYXZlIGEgY2hyb21vc29tZSBJRC4gVGhpcyBjb252ZXJ0cyB0aGF0IHRvIGEgY29udGlnIHN0cmluZy5cbiAgYXR0YWNoQ29udGlnVG9CZWRSb3dzKGJlZHM6IENocklkQmVkUm93W10pOiBCZWRSb3dbXSB7XG4gICAgcmV0dXJuIGJlZHMubWFwKGJlZCA9PiAoe1xuICAgICAgY29udGlnOiB0aGlzLmNocklkVG9Db250aWdbYmVkLmNocklkXSxcbiAgICAgIHN0YXJ0OiBiZWQuc3RhcnQsXG4gICAgICBzdG9wOiBiZWQuc3RvcCxcbiAgICAgIHJlc3Q6IGJlZC5yZXN0XG4gICAgfSkpO1xuICB9XG5cbiAgLy8gRmluZCBhbGwgYmxvY2tzIGNvbnRhaW5pbmcgZmVhdHVyZXMgd2hpY2ggaW50ZXJzZWN0IHdpdGggY29udGlnUmFuZ2UuXG4gIGZpbmRPdmVybGFwcGluZ0Jsb2NrcyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPik6IEFycmF5PExlYWZEYXRhPiB7XG4gICAgLy8gRG8gYSByZWN1cnNpdmUgc2VhcmNoIHRocm91Z2ggdGhlIGluZGV4IHRyZWVcbiAgICB2YXIgbWF0Y2hpbmdCbG9ja3MgPSBbXTtcbiAgICB2YXIgdHVwbGVSYW5nZSA9IFtbcmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCgpXSxcbiAgICAgICAgICAgICAgICAgICAgICBbcmFuZ2UuY29udGlnLCByYW5nZS5zdG9wKCldXTtcbiAgICB2YXIgZmluZCA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIGlmIChub2RlLmNvbnRlbnRzKSB7XG4gICAgICAgIG5vZGUuY29udGVudHMuZm9yRWFjaChmaW5kKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBub2RlUmFuZ2UgPVxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFtub2RlLnN0YXJ0Q2hyb21JeCwgbm9kZS5zdGFydEJhc2VdLFxuICAgICAgICAgICAgW25vZGUuZW5kQ2hyb21JeCwgbm9kZS5lbmRCYXNlXVxuICAgICAgICAgIF07XG5cbiAgICAgICAgaWYgKHV0aWxzLnR1cGxlUmFuZ2VPdmVybGFwcyhub2RlUmFuZ2UsIHR1cGxlUmFuZ2UpKSB7XG4gICAgICAgICAgbWF0Y2hpbmdCbG9ja3MucHVzaChub2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgZmluZCh0aGlzLmNpclRyZWUuYmxvY2tzKTtcblxuICAgIHJldHVybiBtYXRjaGluZ0Jsb2NrcztcbiAgfVxuXG4gIC8vIEludGVybmFsIGZ1bmN0aW9uIGZvciBmZXRjaGluZyBmZWF0dXJlcyBieSBibG9jay5cbiAgZmV0Y2hGZWF0dXJlc0J5QmxvY2socmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBRLlByb21pc2U8Q2hySWRCZWRCbG9ja1tdPiB7XG4gICAgdmFyIGJsb2NrcyA9IHRoaXMuZmluZE92ZXJsYXBwaW5nQmxvY2tzKHJhbmdlKTtcbiAgICBpZiAoYmxvY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFEud2hlbihbXSk7XG4gICAgfVxuXG4gICAgLy8gRmluZCB0aGUgcmFuZ2UgaW4gdGhlIGZpbGUgd2hpY2ggY29udGFpbnMgYWxsIHJlbGV2YW50IGJsb2Nrcy5cbiAgICAvLyBJbiB0aGVvcnkgdGhlcmUgY291bGQgYmUgZ2FwcyBiZXR3ZWVuIGJsb2NrcywgYnV0IGl0J3MgaGFyZCB0byBzZWUgaG93LlxuICAgIHZhciBieXRlUmFuZ2UgPSBJbnRlcnZhbC5ib3VuZGluZ0ludGVydmFsKFxuICAgICAgICBibG9ja3MubWFwKG4gPT4gbmV3IEludGVydmFsKCtuLm9mZnNldCwgbi5vZmZzZXQrbi5zaXplKSkpO1xuXG4gICAgdmFyIGlzQ29tcHJlc3NlZCA9ICh0aGlzLmhlYWRlci51bmNvbXByZXNzQnVmU2l6ZSA+IDApO1xuICAgIHJldHVybiB0aGlzLnJlbW90ZUZpbGUuZ2V0Qnl0ZXMoYnl0ZVJhbmdlLnN0YXJ0LCBieXRlUmFuZ2UubGVuZ3RoKCkpXG4gICAgICAgIC50aGVuKGJ1ZmZlciA9PiB7XG4gICAgICAgICAgcmV0dXJuIGJsb2Nrcy5tYXAoYmxvY2sgPT4ge1xuICAgICAgICAgICAgdmFyIGJlZHMgPSBleHRyYWN0RmVhdHVyZXNGcm9tQmxvY2soYnVmZmVyLCBieXRlUmFuZ2UsIGJsb2NrLCBpc0NvbXByZXNzZWQpO1xuICAgICAgICAgICAgaWYgKGJsb2NrLnN0YXJ0Q2hyb21JeCAhPSBibG9jay5lbmRDaHJvbUl4KSB7XG4gICAgICAgICAgICAgIHRocm93IGBDYW4ndCBoYW5kbGUgYmxvY2tzIHdoaWNoIHNwYW4gY2hyb21vc29tZXMhYDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgcmFuZ2U6IG5ldyBDb250aWdJbnRlcnZhbChibG9jay5zdGFydENocm9tSXgsIGJsb2NrLnN0YXJ0QmFzZSwgYmxvY2suZW5kQmFzZSksXG4gICAgICAgICAgICAgIHJvd3M6IGJlZHNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICB9XG5cbiAgLy8gVE9ETzogbWVyZ2UgdGhpcyBpbnRvIGdldEZlYXR1cmVzSW5SYW5nZVxuICAvLyBGZXRjaCB0aGUgcmVsZXZhbnQgYmxvY2tzIGZyb20gdGhlIGJpZ0JlZCBmaWxlIGFuZCBleHRyYWN0IHRoZSBmZWF0dXJlc1xuICAvLyB3aGljaCBvdmVybGFwIHRoZSBnaXZlbiByYW5nZS5cbiAgZmV0Y2hGZWF0dXJlcyhjb250aWdSYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPik6IFEuUHJvbWlzZTxCZWRSb3dbXT4ge1xuICAgIHJldHVybiB0aGlzLmZldGNoRmVhdHVyZXNCeUJsb2NrKGNvbnRpZ1JhbmdlKVxuICAgICAgICAudGhlbihiZWRzQnlCbG9jayA9PiB7XG4gICAgICAgICAgdmFyIGJlZHMgPSBfLmZsYXR0ZW4oYmVkc0J5QmxvY2subWFwKGIgPT4gYi5yb3dzKSk7XG5cbiAgICAgICAgICBiZWRzID0gYmVkcy5maWx0ZXIoZnVuY3Rpb24oYmVkKSB7XG4gICAgICAgICAgICAvLyBOb3RlOiBCRUQgaW50ZXJ2YWxzIGFyZSBleHBsaWNpdGx5IGhhbGYtb3Blbi5cbiAgICAgICAgICAgIC8vIFRoZSBcIi0gMVwiIGNvbnZlcnRzIHRoZW0gdG8gY2xvc2VkIGludGVydmFscyBmb3IgQ29udGlnSW50ZXJ2YWwuXG4gICAgICAgICAgICB2YXIgYmVkSW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwoYmVkLmNocklkLCBiZWQuc3RhcnQsIGJlZC5zdG9wIC0gMSk7XG4gICAgICAgICAgICByZXR1cm4gY29udGlnUmFuZ2UuaW50ZXJzZWN0cyhiZWRJbnRlcnZhbCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gdGhpcy5hdHRhY2hDb250aWdUb0JlZFJvd3MoYmVkcyk7XG4gICAgICAgIH0pO1xuICB9XG5cbiAgZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogUS5Qcm9taXNlPEJlZFJvd1tdPiB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hGZWF0dXJlcyh0aGlzLmdldENocklkSW50ZXJ2YWwocmFuZ2UpKTtcbiAgfVxuXG4gIGdldEZlYXR1cmVCbG9ja3NPdmVybGFwcGluZyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IFEuUHJvbWlzZTxCZWRCbG9ja1tdPiB7XG4gICAgdmFyIGluZGV4UmFuZ2UgPSB0aGlzLmdldENocklkSW50ZXJ2YWwocmFuZ2UpO1xuICAgIHJldHVybiB0aGlzLmZldGNoRmVhdHVyZXNCeUJsb2NrKGluZGV4UmFuZ2UpXG4gICAgICAgIC50aGVuKGZlYXR1cmVCbG9ja3MgPT4ge1xuICAgICAgICAgIC8vIENvbnZlcnQgY2hySWRzIHRvIGNvbnRpZyBzdHJpbmdzLlxuICAgICAgICAgIHJldHVybiBmZWF0dXJlQmxvY2tzLm1hcChmYiA9PiAoe1xuICAgICAgICAgICAgcmFuZ2U6IHRoaXMuZ2V0Q29udGlnSW50ZXJ2YWwoZmIucmFuZ2UpLFxuICAgICAgICAgICAgcm93czogdGhpcy5hdHRhY2hDb250aWdUb0JlZFJvd3MoZmIucm93cylcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICB9XG5cbn1cblxuXG5jbGFzcyBCaWdCZWQge1xuICByZW1vdGVGaWxlOiBSZW1vdGVGaWxlO1xuICBoZWFkZXI6IFEuUHJvbWlzZTxhbnk+O1xuICBjaXJUcmVlOiBRLlByb21pc2U8YW55PjtcbiAgY29udGlnTWFwOiBRLlByb21pc2U8e1trZXk6c3RyaW5nXTogbnVtYmVyfT47XG4gIGltbWVkaWF0ZTogUS5Qcm9taXNlPEltbWVkaWF0ZUJpZ0JlZD47XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgdG8gcmVxdWVzdCBmZWF0dXJlcyBmcm9tIGEgcmVtb3RlIGJpZ0JlZCBmaWxlLlxuICAgKiBUaGUgcmVtb3RlIHNvdXJjZSBtdXN0IHN1cHBvcnQgSFRUUCBSYW5nZSBoZWFkZXJzLlxuICAgKiBUaGlzIHdpbGwga2ljayBvZmYgc2V2ZXJhbCBhc3luYyByZXF1ZXN0cyBmb3IgcG9ydGlvbnMgb2YgdGhlIGZpbGUuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgIHRoaXMucmVtb3RlRmlsZSA9IG5ldyBSZW1vdGVGaWxlKHVybCk7XG4gICAgdGhpcy5oZWFkZXIgPSB0aGlzLnJlbW90ZUZpbGUuZ2V0Qnl0ZXMoMCwgNjQqMTAyNCkudGhlbihwYXJzZUhlYWRlcik7XG4gICAgdGhpcy5jb250aWdNYXAgPSB0aGlzLmhlYWRlci50aGVuKGdlbmVyYXRlQ29udGlnTWFwKTtcblxuICAgIC8vIE5leHQ6IGZldGNoIHRoZSBibG9jayBpbmRleCBhbmQgcGFyc2Ugb3V0IHRoZSBcIkNJUlwiIHRyZWUuXG4gICAgdGhpcy5jaXJUcmVlID0gdGhpcy5oZWFkZXIudGhlbihoZWFkZXIgPT4ge1xuICAgICAgLy8gem9vbUhlYWRlcnNbMF0uZGF0YU9mZnNldCBpcyB0aGUgbmV4dCBlbnRyeSBpbiB0aGUgZmlsZS5cbiAgICAgIC8vIFdlIGFzc3VtZSB0aGUgXCJjaXJUcmVlXCIgc2VjdGlvbiBnb2VzIGFsbCB0aGUgd2F5IHRvIHRoYXQgcG9pbnQuXG4gICAgICAvLyBMYWNraW5nIHpvb20gaGVhZGVycywgYXNzdW1lIGl0J3MgNGsuXG4gICAgICAvLyBUT0RPOiBmZXRjaCBtb3JlIHRoYW4gNGsgaWYgbmVjZXNzYXJ5XG4gICAgICB2YXIgc3RhcnQgPSBoZWFkZXIudW56b29tZWRJbmRleE9mZnNldCxcbiAgICAgICAgICB6b29tSGVhZGVyID0gaGVhZGVyLnpvb21IZWFkZXJzWzBdLFxuICAgICAgICAgIGxlbmd0aCA9IHpvb21IZWFkZXIgPyB6b29tSGVhZGVyLmRhdGFPZmZzZXQgLSBzdGFydCA6IDQwOTY7XG4gICAgICByZXR1cm4gdGhpcy5yZW1vdGVGaWxlLmdldEJ5dGVzKHN0YXJ0LCBsZW5ndGgpLnRoZW4ocGFyc2VDaXJUcmVlKTtcbiAgICB9KTtcblxuICAgIHRoaXMuaW1tZWRpYXRlID0gUS5hbGwoW3RoaXMuaGVhZGVyLCB0aGlzLmNpclRyZWUsIHRoaXMuY29udGlnTWFwXSlcbiAgICAgICAgLnRoZW4oKFtoZWFkZXIsIGNpclRyZWUsIGNvbnRpZ01hcF0pID0+IHtcbiAgICAgICAgICB2YXIgY206IHtba2V5OnN0cmluZ106IG51bWJlcn0gPSBjb250aWdNYXA7XG4gICAgICAgICAgcmV0dXJuIG5ldyBJbW1lZGlhdGVCaWdCZWQodGhpcy5yZW1vdGVGaWxlLCBoZWFkZXIsIGNpclRyZWUsIGNtKTtcbiAgICAgICAgfSk7XG5cbiAgICAvLyBCdWJibGUgdXAgZXJyb3JzXG4gICAgdGhpcy5pbW1lZGlhdGUuZG9uZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIEJFRCBlbnRyaWVzIHdoaWNoIG92ZXJsYXAgdGhlIHJhbmdlLlxuICAgKiBOb3RlOiB3aGlsZSB0aGUgcmVxdWVzdGVkIHJhbmdlIGlzIGluY2x1c2l2ZSBvbiBib3RoIGVuZHMsIHJhbmdlcyBpblxuICAgKiBiaWdCZWQgZm9ybWF0IGZpbGVzIGFyZSBoYWxmLW9wZW4gKGluY2x1c2l2ZSBhdCB0aGUgc3RhcnQsIGV4Y2x1c2l2ZSBhdFxuICAgKiB0aGUgZW5kKS5cbiAgICovXG4gIGdldEZlYXR1cmVzSW5SYW5nZShjb250aWc6IHN0cmluZywgc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogUS5Qcm9taXNlPEFycmF5PEJlZFJvdz4+IHtcbiAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoY29udGlnLCBzdGFydCwgc3RvcCk7XG4gICAgcmV0dXJuIHRoaXMuaW1tZWRpYXRlLnRoZW4oaW0gPT4gaW0uZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgZmVhdHVyZXMgaW4gYmxvY2tzIG92ZXJsYXBwaW5nIHRoZSBnaXZlbiByYW5nZS5cbiAgICogQmVjYXVzZSB0aGVzZSBmZWF0dXJlcyBtdXN0IGFsbCBiZSBmZXRjaGVkLCBkZWNvbXByZXNzZWQgYW5kIHBhcnNlZFxuICAgKiBhbnl3YXksIHRoaXMgY2FuIGJlIGhlbHBmdWwgZm9yIHVwc3RyZWFtIGNhY2hpbmcuXG4gICAqL1xuICBnZXRGZWF0dXJlQmxvY2tzT3ZlcmxhcHBpbmcocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBRLlByb21pc2U8QXJyYXk8QmVkQmxvY2s+PiB7XG4gICAgcmV0dXJuIHRoaXMuaW1tZWRpYXRlLnRoZW4oaW0gPT4gaW0uZ2V0RmVhdHVyZUJsb2Nrc092ZXJsYXBwaW5nKHJhbmdlKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBCaWdCZWQ7XG4iLCIvKipcbiAqIFRoaXMgY2xhc3MgcGFyc2VzIGFuZCByZXByZXNlbnRzIGEgc2luZ2xlIHJlYWQgaW4gYSBTQU0vQkFNIGZpbGUuXG4gKlxuICogVGhpcyBpcyB1c2VkIGluc3RlYWQgb2YgcGFyc2luZyBkaXJlY3RseSB2aWEgakJpbmFyeSBpbiBvcmRlciB0bzpcbiAqIC0gTWFrZSB0aGUgcGFyc2luZyBsYXp5IChmb3Igc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2Ugd2lucylcbiAqIC0gTWFrZSB0aGUgcmVzdWx0aW5nIG9iamVjdCBtb3JlIHByZWNpc2VseSB0eXBlZC5cbiAqXG4gKiBQYXJzaW5nIHJlYWRzIHVzaW5nIFNhbVJlYWQgaXMgfjItM3ggZmFzdGVyIHRoYW4gdXNpbmcgakJpbmFyeSBhbmRcbiAqIFRoaW5BbGlnbm1lbnQgZGlyZWN0bHkuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4vVmlydHVhbE9mZnNldCc7XG5pbXBvcnQgdHlwZSB7U3RyYW5kLCBDaWdhck9wLCBNYXRlUHJvcGVydGllc30gZnJvbSAnLi4vQWxpZ25tZW50JztcblxuaW1wb3J0IGpEYXRhVmlldyBmcm9tICdqZGF0YXZpZXcnO1xuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBiYW1UeXBlcyBmcm9tICcuL2Zvcm1hdHMvYmFtVHlwZXMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIHtDb3ZlcmFnZUNvdW50fSBmcm9tICcuLi92aXovcGlsZXVwdXRpbHMnO1xuaW1wb3J0IHtnZXRPcEluZm99IGZyb20gJy4uL3Zpei9waWxldXB1dGlscyc7XG5cbi8vIFRPRE86IE1ha2UgbW9yZSBleHRlbnNpdmUgdXNlIG9mIHRoZSBqQmluYXJ5IHNwZWNzLlxuXG5cbnZhciBDSUdBUl9PUFMgPSBbJ00nLCAnSScsICdEJywgJ04nLCAnUycsICdIJywgJ1AnLCAnPScsICdYJ107XG5cbnZhciBTRVFVRU5DRV9WQUxVRVMgPSBbJz0nLCAnQScsICdDJywgJ00nLCAnRycsICdSJywgJ1MnLCAnVicsXG4gICAgICAgICAgICAgICAgICAgICAgICdUJywgJ1cnLCAnWScsICdIJywgJ0snLCAnRCcsICdCJywgJ04nXTtcblxuXG5mdW5jdGlvbiBzdHJhbmRGbGFnVG9TdHJpbmcocmV2ZXJzZVN0cmFuZDogbnVtYmVyKTogU3RyYW5kIHtcbiAgcmV0dXJuIHJldmVyc2VTdHJhbmQgPyAnLScgOiAnKyc7XG59XG5cblxuY2xhc3MgU2FtUmVhZCAvKiBpbXBsZW1lbnRzIEFsaWdubWVudCAqLyB7XG4gIGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG4gIG9mZnNldDogVmlydHVhbE9mZnNldDtcblxuICBwb3M6IG51bWJlcjtcbiAgcmVmSUQ6IG51bWJlcjtcbiAgcmVmOiBzdHJpbmc7XG4gIGxfc2VxOiBudW1iZXI7XG4gIG5hbWU6IHN0cmluZztcbiAgY2lnYXJPcHM6IENpZ2FyT3BbXTtcblxuICAvLyBjYWNoZWQgdmFsdWVzXG4gIF9mdWxsOiA/T2JqZWN0O1xuICBfc2VxOiA/c3RyaW5nO1xuICBfaW50ZXJ2YWw6ID9Db250aWdJbnRlcnZhbDxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gYnVmZmVyIGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2YgdGhlIHNlcmlhbGl6ZWQgQkFNIHJlYWQuIEl0IG11c3RcbiAgICogICAgIGNvbnRhaW4gYXQgbGVhc3Qgb25lIGZ1bGwgcmVhZCAoYnV0IG1heSBjb250YWluIG1vcmUpLlxuICAgKiBAcGFyYW0gb2Zmc2V0IHJlY29yZHMgd2hlcmUgdGhpcyBhbGlnbm1lbnQgaXMgbG9jYXRlZCBpbiB0aGUgQkFNIGZpbGUuIEl0J3NcbiAgICogICAgIHVzZWZ1bCBhcyBhIHVuaXF1ZSBJRCBmb3IgYWxpZ25tZW50cy5cbiAgICogQHBhcmFtIHJlZiBpcyB0aGUgaHVtYW4tcmVhZGFibGUgbmFtZSBvZiB0aGUgcmVmZXJlbmNlL2NvbnRpZyAodGhlIGJpbmFyeVxuICAgKiAgICAgZW5jb2Rpbmcgb25seSBjb250YWlucyBhbiBJRCkuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihidWZmZXI6IEFycmF5QnVmZmVyLCBvZmZzZXQ6IFZpcnR1YWxPZmZzZXQsIHJlZjogc3RyaW5nKSB7XG4gICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG5cbiAgICAvLyBHbyBhaGVhZCBhbmQgcGFyc2UgYSBmZXcgZmllbGRzIGltbWVkaWF0ZWx5LlxuICAgIHZhciBqdiA9IHRoaXMuX2dldEpEYXRhVmlldygpO1xuICAgIHRoaXMucmVmSUQgPSBqdi5nZXRJbnQzMigwKTtcbiAgICB0aGlzLnJlZiA9IHJlZjtcbiAgICB0aGlzLnBvcyA9IGp2LmdldEludDMyKDQpO1xuICAgIHRoaXMubF9zZXEgPSBqdi5nZXRJbnQzMigxNik7XG4gICAgdGhpcy5jaWdhck9wcyA9IHRoaXMuX2dldENpZ2FyT3BzKCk7XG4gICAgdGhpcy5uYW1lID0gdGhpcy5fZ2V0TmFtZSgpO1xuICB9XG5cbiAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICB2YXIgc3RvcCA9IHRoaXMucG9zICsgdGhpcy5sX3NlcTtcbiAgICByZXR1cm4gYCR7dGhpcy5yZWZ9OiR7MSt0aGlzLnBvc30tJHtzdG9wfWA7XG4gIH1cblxuICBfZ2V0SkRhdGFWaWV3KCk6IGpEYXRhVmlldyB7XG4gICAgdmFyIGIgPSB0aGlzLmJ1ZmZlcjtcbiAgICByZXR1cm4gbmV3IGpEYXRhVmlldyhiLCAwLCBiLmJ5dGVMZW5ndGgsIHRydWUgLyogbGl0dGxlIGVuZGlhbiAqLyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBpZGVudGlmaWVyIHdoaWNoIGlzIHVuaXF1ZSB3aXRoaW4gdGhlIEJBTSBmaWxlLlxuICAgKi9cbiAgZ2V0S2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMub2Zmc2V0LnRvU3RyaW5nKCk7XG4gIH1cblxuICBfZ2V0TmFtZSgpOiBzdHJpbmcge1xuICAgIHZhciBqdiA9IHRoaXMuX2dldEpEYXRhVmlldygpO1xuICAgIHZhciBsX3JlYWRfbmFtZSA9IGp2LmdldFVpbnQ4KDgpO1xuICAgIGp2LnNlZWsoMzIpOyAgLy8gdGhlIHJlYWQtbmFtZSBzdGFydHMgYXQgYnl0ZSAzMlxuICAgIHJldHVybiBqdi5nZXRTdHJpbmcobF9yZWFkX25hbWUgLSAxKTsgIC8vIGlnbm9yZSBudWxsLXRlcm1pbmF0b3JcbiAgfVxuXG4gIGdldEZsYWcoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0SkRhdGFWaWV3KCkuZ2V0VWludDE2KDE0KTtcbiAgfVxuXG4gIGdldEluZmVycmVkSW5zZXJ0U2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nZXRKRGF0YVZpZXcoKS5nZXRVaW50MTYoMjgpO1xuICB9XG5cbiAgZ2V0U3RyYW5kKCk6IFN0cmFuZCB7XG4gICAgcmV0dXJuIHN0cmFuZEZsYWdUb1N0cmluZyh0aGlzLmdldEZsYWcoKSAmIGJhbVR5cGVzLkZsYWdzLlJFQURfU1RSQU5EKTtcbiAgfVxuXG4gIC8vIFRPRE86IGdldCByaWQgb2YgdGhpczsgbW92ZSBhbGwgbWV0aG9kcyBpbnRvIFNhbVJlYWQuXG4gIGdldEZ1bGwoKTogT2JqZWN0IHtcbiAgICBpZiAodGhpcy5fZnVsbCkgcmV0dXJuIHRoaXMuX2Z1bGw7XG4gICAgdmFyIGpiID0gbmV3IGpCaW5hcnkodGhpcy5idWZmZXIsIGJhbVR5cGVzLlRZUEVfU0VUKTtcbiAgICB2YXIgZnVsbCA9IGpiLnJlYWQoYmFtVHlwZXMuVGhpY2tBbGlnbm1lbnQsIDApO1xuICAgIHRoaXMuX2Z1bGwgPSBmdWxsO1xuICAgIHJldHVybiBmdWxsO1xuICB9XG5cbiAgZ2V0SW50ZXJ2YWwoKTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiB7XG4gICAgaWYgKHRoaXMuX2ludGVydmFsKSByZXR1cm4gdGhpcy5faW50ZXJ2YWw7ICAvLyB1c2UgdGhlIGNhY2hlXG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKHRoaXMucmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MgKyB0aGlzLmdldFJlZmVyZW5jZUxlbmd0aCgpIC0gMSk7XG4gICAgcmV0dXJuIGludGVydmFsO1xuICB9XG5cbiAgaW50ZXJzZWN0cyhpbnRlcnZhbDogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpbnRlcnZhbC5pbnRlcnNlY3RzKHRoaXMuZ2V0SW50ZXJ2YWwoKSk7XG4gIH1cblxuICBfZ2V0Q2lnYXJPcHMoKTogQ2lnYXJPcFtdIHtcbiAgICB2YXIganYgPSB0aGlzLl9nZXRKRGF0YVZpZXcoKSxcbiAgICAgICAgbF9yZWFkX25hbWUgPSBqdi5nZXRVaW50OCg4KSxcbiAgICAgICAgbl9jaWdhcl9vcCA9IGp2LmdldFVpbnQxNigxMiksXG4gICAgICAgIHBvcyA9IDMyICsgbF9yZWFkX25hbWUsXG4gICAgICAgIGNpZ2FyX29wcyA9IG5ldyBBcnJheShuX2NpZ2FyX29wKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5fY2lnYXJfb3A7IGkrKykge1xuICAgICAgdmFyIHYgPSBqdi5nZXRVaW50MzIocG9zICsgNCAqIGkpO1xuICAgICAgY2lnYXJfb3BzW2ldID0ge1xuICAgICAgICBvcDogQ0lHQVJfT1BTW3YgJiAweGZdLFxuICAgICAgICBsZW5ndGg6IHYgPj4gNFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGNpZ2FyX29wcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHBlci1iYXNlIHF1YWxpdHkgc2NvcmVzIGZyb20gMC0yNTUuXG4gICAqL1xuICBnZXRRdWFsaXR5U2NvcmVzKCk6IG51bWJlcltdIHtcbiAgICB2YXIganYgPSB0aGlzLl9nZXRKRGF0YVZpZXcoKSxcbiAgICAgICAgbF9yZWFkX25hbWUgPSBqdi5nZXRVaW50OCg4KSxcbiAgICAgICAgbl9jaWdhcl9vcCA9IGp2LmdldFVpbnQxNigxMiksXG4gICAgICAgIGxfc2VxID0ganYuZ2V0SW50MzIoMTYpLFxuICAgICAgICBwb3MgPSAzMiArIGxfcmVhZF9uYW1lICsgNCAqIG5fY2lnYXJfb3AgKyBNYXRoLmNlaWwobF9zZXEgLyAyKTtcbiAgICByZXR1cm4ganYuZ2V0Qnl0ZXMobF9zZXEsIHBvcywgdHJ1ZSAvKiBsaXR0bGUgZW5kaWFuICovLCB0cnVlIC8qIHRvQXJyYXkgKi8pO1xuICB9XG5cbiAgZ2V0Q2lnYXJTdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbWFrZUNpZ2FyU3RyaW5nKHRoaXMuZ2V0RnVsbCgpLmNpZ2FyKTtcbiAgfVxuXG4gIGdldFF1YWxQaHJlZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBtYWtlQXNjaWlQaHJlZCh0aGlzLmdldFF1YWxpdHlTY29yZXMoKSk7XG4gIH1cblxuICBnZXRTZXF1ZW5jZSgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLl9zZXEpIHJldHVybiB0aGlzLl9zZXE7XG4gICAgdmFyIGp2ID0gdGhpcy5fZ2V0SkRhdGFWaWV3KCksXG4gICAgICAgIGxfcmVhZF9uYW1lID0ganYuZ2V0VWludDgoOCksXG4gICAgICAgIG5fY2lnYXJfb3AgPSBqdi5nZXRVaW50MTYoMTIpLFxuICAgICAgICBsX3NlcSA9IGp2LmdldEludDMyKDE2KSxcbiAgICAgICAgcG9zID0gMzIgKyBsX3JlYWRfbmFtZSArIDQgKiBuX2NpZ2FyX29wLFxuICAgICAgICBiYXNlUGFpcnMgPSBuZXcgQXJyYXkobF9zZXEpLFxuICAgICAgICBudW1CeXRlcyA9IE1hdGguY2VpbChsX3NlcSAvIDIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1CeXRlczsgaSsrKSB7XG4gICAgICB2YXIgYiA9IGp2LmdldFVpbnQ4KHBvcyArIGkpO1xuICAgICAgYmFzZVBhaXJzWzIgKiBpXSA9IFNFUVVFTkNFX1ZBTFVFU1tiID4+IDRdO1xuICAgICAgaWYgKDIgKiBpICsgMSA8IGxfc2VxKSB7XG4gICAgICAgIGJhc2VQYWlyc1syICogaSArIDFdID0gU0VRVUVOQ0VfVkFMVUVTW2IgJiAweGZdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzZXEgPSBiYXNlUGFpcnMuam9pbignJyk7XG4gICAgdGhpcy5fc2VxID0gc2VxO1xuICAgIHJldHVybiBzZXE7XG4gIH1cblxuICAvLyBSZXR1cm5zIHRoZSBsZW5ndGggb2YgdGhlIGFsaWdubWVudCBmcm9tIGZpcnN0IGFsaWduZWQgcmVhZCB0byBsYXN0IGFsaWduZWQgcmVhZC5cbiAgZ2V0UmVmZXJlbmNlTGVuZ3RoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIFNhbVJlYWQucmVmZXJlbmNlTGVuZ3RoRnJvbU9wcyh0aGlzLmNpZ2FyT3BzKTtcbiAgfVxuXG4gIGdldENvdmVyYWdlKHJlZmVyZW5jZVNvdXJjZTogT2JqZWN0KTogQ292ZXJhZ2VDb3VudCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJhbmdlOiB0aGlzLmdldEludGVydmFsKCksXG4gICAgICBvcEluZm86IGdldE9wSW5mbyh0aGlzLCByZWZlcmVuY2VTb3VyY2UpXG4gICAgfTtcbiAgfVxuXG4gIGdldE1hdGVQcm9wZXJ0aWVzKCk6ID9NYXRlUHJvcGVydGllcyB7XG4gICAgdmFyIGp2ID0gdGhpcy5fZ2V0SkRhdGFWaWV3KCksXG4gICAgICAgIGZsYWcgPSBqdi5nZXRVaW50MTYoMTQpO1xuICAgIGlmICghKGZsYWcgJiBiYW1UeXBlcy5GbGFncy5SRUFEX1BBSVJFRCkpIHJldHVybiBudWxsO1xuXG4gICAgdmFyIG5leHRSZWZJZCA9IGp2LmdldEludDMyKDIwKSxcbiAgICAgICAgbmV4dFBvcyA9IGp2LmdldEludDMyKDI0KSxcbiAgICAgICAgbmV4dFN0cmFuZCA9IHN0cmFuZEZsYWdUb1N0cmluZyhmbGFnICYgYmFtVHlwZXMuRmxhZ3MuTUFURV9TVFJBTkQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIElmIHRoZSBtYXRlIGlzIG9uIGFub3RoZXIgY29udGlnLCB0aGVyZSdzIG5vIGVhc3kgd2F5IHRvIGdldCBpdHMgc3RyaW5nIG5hbWUuXG4gICAgICByZWY6IG5leHRSZWZJZCA9PSB0aGlzLnJlZklEID8gdGhpcy5yZWYgOiBudWxsLFxuICAgICAgcG9zOiBuZXh0UG9zLFxuICAgICAgc3RyYW5kOiBuZXh0U3RyYW5kXG4gICAgfTtcbiAgfVxuXG4gIGRlYnVnU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgdmFyIGYgPSB0aGlzLmdldEZ1bGwoKTtcblxuICAgIHJldHVybiBgTmFtZTogJHt0aGlzLm5hbWV9XG5GTEFHOiAke3RoaXMuZ2V0RmxhZygpfVxuUG9zaXRpb246ICR7dGhpcy5nZXRJbnRlcnZhbCgpLnRvU3RyaW5nKCl9XG5DSUdBUjogJHt0aGlzLmdldENpZ2FyU3RyaW5nKCl9XG5TZXF1ZW5jZTogJHtmLnNlcX1cblF1YWxpdHk6ICAke3RoaXMuZ2V0UXVhbFBocmVkKCl9XG5UYWdzOiAke0pTT04uc3RyaW5naWZ5KGYuYXV4aWxpYXJ5LCBudWxsLCAnICAnKX1cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIHJlZmVyZW5jZUxlbmd0aEZyb21PcHMob3BzOiBDaWdhck9wW10pOiBudW1iZXIge1xuICAgIHZhciByZWZMZW5ndGggPSAwO1xuICAgIG9wcy5mb3JFYWNoKCh7b3AsIGxlbmd0aH0pID0+IHtcbiAgICAgIHN3aXRjaCAob3ApIHtcbiAgICAgICAgY2FzZSAnTSc6XG4gICAgICAgIGNhc2UgJ0QnOlxuICAgICAgICBjYXNlICdOJzpcbiAgICAgICAgY2FzZSAnPSc6XG4gICAgICAgIGNhc2UgJ1gnOlxuICAgICAgICAgIHJlZkxlbmd0aCArPSBsZW5ndGg7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlZkxlbmd0aDtcbiAgfVxufVxuXG4vLyBDb252ZXJ0IGEgc3RydWN0dXJlZCBDaWdhciBvYmplY3QgaW50byB0aGUgc3RyaW5nIGZvcm1hdCB3ZSBhbGwgbG92ZS5cbmZ1bmN0aW9uIG1ha2VDaWdhclN0cmluZyhjaWdhck9wczogQXJyYXk8e29wOnN0cmluZzsgbGVuZ3RoOm51bWJlcn0+KSB7XG4gIHJldHVybiBjaWdhck9wcy5tYXAoKHtvcCwgbGVuZ3RofSkgPT4gbGVuZ3RoICsgb3ApLmpvaW4oJycpO1xufVxuXG4vLyBDb252ZXJ0IGFuIGFycmF5IG9mIFBocmVkIHNjb3JlcyB0byBhIHByaW50YWJsZSBzdHJpbmcuXG5mdW5jdGlvbiBtYWtlQXNjaWlQaHJlZChxdWFsaXRpZXM6IG51bWJlcltdKTogc3RyaW5nIHtcbiAgaWYgKHF1YWxpdGllcy5sZW5ndGggPT09IDApIHJldHVybiAnJztcbiAgaWYgKF8uZXZlcnkocXVhbGl0aWVzLCB4ID0+IHggPT0gMjU1KSkgcmV0dXJuICcqJztcbiAgcmV0dXJuIHF1YWxpdGllcy5tYXAocSA9PiBTdHJpbmcuZnJvbUNoYXJDb2RlKDMzICsgcSkpLmpvaW4oJycpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNhbVJlYWQ7XG4iLCIvKipcbiAqIFRoaXMgbW9kdWxlIGRlZmluZXMgYSBwYXJzZXIgZm9yIHRoZSAyYml0IGZpbGUgZm9ybWF0LlxuICogU2VlIGh0dHA6Ly9nZW5vbWUudWNzYy5lZHUvRkFRL0ZBUWZvcm1hdC5odG1sI2Zvcm1hdDdcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBqQmluYXJ5IGZyb20gJ2piaW5hcnknO1xuXG5pbXBvcnQgdHdvQml0VHlwZXMgZnJvbSAnLi9mb3JtYXRzL3R3b0JpdFR5cGVzJztcblxudmFyIEJBU0VfUEFJUlMgPSBbXG4gICdUJywgIC8vIDA9MDBcbiAgJ0MnLCAgLy8gMT0wMVxuICAnQScsICAvLyAyPTEwXG4gICdHJyAgIC8vIDM9MTFcbl07XG5cbi8qKlxuICBUaGUgZm9sbG93aW5nIGNodW5rIHNpemVzIGFyZSBvcHRpbWl6ZWQgYWdhaW5zdFxuICB0aGUgaHVtYW4gcmVmZXJlbmNlIGdlbm9tZSAoaGcxOS4yYml0KS4gQXNzdW1pbmcgdGhhdFxuICBwaWxldXAuanMgaXMgbW9zdGx5IGJlaW5nIHVzZWQgZm9yIGh1bWFuIGdlbm9tZSxcbiAgaW5jcmVhc2luZyB0aGUgZm9sbG93aW5nIG51bWJlcnMgbWlnaHQgY2F1c2Ugbm9ubmVjZXNzYXJ5XG4gIG5ldHdvcmsgdHJhZmZpYyBhbmQgbWlnaHQgYWxzbyBicmVhayBvdXIgdW5pdCB0ZXN0c1xuICB0aGF0IG1ha2UgdXNlIG9mIG1hcHBlZCAyYml0IGZpbGVzLlxuKi9cbnZhciBGSVJTVF9IRUFERVJfQ0hVTktTSVpFID0gMTYgKiAxMDI0LCAgLy8gMTYgS0JcbiAgICBGSVJTVF9TRVFVRU5DRV9DSFVOS1NJWkUgPSAoNCAqIDEwMjQpIC0gMSwgIC8vIH4gNEtCXG4gICAgTUFYX0NIVU5LU0laRSA9IDEwMjQgKiAxMDI0OyAgLy8gMSBNQlxuXG50eXBlIEZpbGVJbmRleEVudHJ5ID0ge1xuICBuYW1lOiBzdHJpbmc7XG4gIG9mZnNldDogbnVtYmVyO1xufTtcblxudHlwZSBTZXF1ZW5jZVJlY29yZCA9IHtcbiAgbnVtQmFzZXM6IG51bWJlcjtcbiAgdW5rbm93bkJsb2NrU3RhcnRzOiBBcnJheTxudW1iZXI+OyAgLy8gbmIgdGhlc2UgbnVtYmVycyBhcmUgMC1iYXNlZFxuICB1bmtub3duQmxvY2tMZW5ndGhzOiBBcnJheTxudW1iZXI+OyAgLy8gVE9ETyhkYW52ayk6IGFkZCBhbiBpbnRlcnZhbCB0eXBlP1xuICBudW1NYXNrQmxvY2tzOiBudW1iZXI7XG4gIG1hc2tCbG9ja1N0YXJ0czogQXJyYXk8bnVtYmVyPjtcbiAgbWFza0Jsb2NrTGVuZ3RoczogQXJyYXk8bnVtYmVyPjtcbiAgZG5hT2Zmc2V0RnJvbUhlYWRlcjogbnVtYmVyOyAgLy8gIyBvZiBieXRlcyBmcm9tIHNlcXVlbmNlIGhlYWRlciB0byBwYWNrZWQgRE5BXG4gIG9mZnNldDogbnVtYmVyOyAgLy8gYnl0ZXMgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIGZpbGUgYXQgd2hpY2ggdGhpcyBkYXRhIGxpdmVzLlxufVxuXG50eXBlIFR3b0JpdEhlYWRlciA9IHtcbiAgc2VxdWVuY2VDb3VudDogbnVtYmVyO1xuICBzZXF1ZW5jZXM6IEFycmF5PEZpbGVJbmRleEVudHJ5Pjtcbn1cblxuXG4vKipcbiAqIFBhcnNlcyBhIHNpbmdsZSBTZXF1ZW5jZVJlY29yZCBmcm9tIHRoZSBzdGFydCBvZiB0aGUgQXJyYXlCdWZmZXIuXG4gKiBmaWxlT2Zmc2V0IGlzIHRoZSBwb3NpdGlvbiBvZiB0aGlzIHNlcXVlbmNlIHdpdGhpbiB0aGUgMmJpdCBmaWxlLlxuICovXG5mdW5jdGlvbiBwYXJzZVNlcXVlbmNlUmVjb3JkKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIGZpbGVPZmZzZXQ6IG51bWJlcik6IFNlcXVlbmNlUmVjb3JkIHtcbiAgdmFyIGpiID0gbmV3IGpCaW5hcnkoYnVmZmVyLCB0d29CaXRUeXBlcy5UWVBFX1NFVCk7XG4gIHZhciBoZWFkZXIgPSBqYi5yZWFkKCdTZXF1ZW5jZVJlY29yZCcpO1xuXG4gIHZhciBkbmFPZmZzZXQgPSBqYi50ZWxsKCkgKyA4ICogaGVhZGVyLm1hc2tCbG9ja0NvdW50ICsgNDtcblxuICByZXR1cm4ge1xuICAgIG51bUJhc2VzOiBoZWFkZXIuZG5hU2l6ZSxcbiAgICB1bmtub3duQmxvY2tTdGFydHM6IGhlYWRlci5uQmxvY2tTdGFydHMsXG4gICAgdW5rbm93bkJsb2NrTGVuZ3RoczogaGVhZGVyLm5CbG9ja1NpemVzLFxuICAgIG51bU1hc2tCbG9ja3M6IGhlYWRlci5tYXNrQmxvY2tDb3VudCxcbiAgICBtYXNrQmxvY2tTdGFydHM6IFtdLFxuICAgIG1hc2tCbG9ja0xlbmd0aHM6IFtdLFxuICAgIGRuYU9mZnNldEZyb21IZWFkZXI6IGRuYU9mZnNldCxcbiAgICBvZmZzZXQ6IGZpbGVPZmZzZXRcbiAgfTtcbn1cblxuXG5mdW5jdGlvbiBwYXJzZUhlYWRlcihidWZmZXI6IEFycmF5QnVmZmVyKTogVHdvQml0SGVhZGVyIHtcbiAgdmFyIGpiID0gbmV3IGpCaW5hcnkoYnVmZmVyLCB0d29CaXRUeXBlcy5UWVBFX1NFVCk7XG4gIHZhciBoZWFkZXIgPSBqYi5yZWFkKCdIZWFkZXInKTtcblxuICByZXR1cm4ge1xuICAgIHNlcXVlbmNlQ291bnQ6IGhlYWRlci5zZXF1ZW5jZUNvdW50LFxuICAgIHNlcXVlbmNlczogaGVhZGVyLnNlcXVlbmNlc1xuICB9O1xufVxuXG5cbi8qKlxuICogUmVhZCAyLWJpdCBlbmNvZGVkIGJhc2UgcGFpcnMgZnJvbSBhIERhdGFWaWV3IGludG8gYW4gYXJyYXkgb2YgJ0EnLCAnVCcsXG4gKiAnQycsICdHJyBzdHJpbmdzLlxuICogVGhlc2UgYXJlIHJldHVybmVkIGFzIGFuIGFycmF5IChyYXRoZXIgdGhhbiBhIHN0cmluZykgdG8gZmFjaWxpdGF0ZSBmdXJ0aGVyXG4gKiBtb2RpZmljYXRpb24uXG4gKi9cbmZ1bmN0aW9uIHVucGFja0ROQShkYXRhVmlldzogRGF0YVZpZXcsIHN0YXJ0QmFzZVBhaXI6IG51bWJlciwgbnVtQmFzZVBhaXJzOiBudW1iZXIpOiBBcnJheTxzdHJpbmc+IHtcbiAgLy8gVE9ETzogdXNlIGpCaW5hcnkgYml0ZmllbGQgZm9yIHRoaXNcbiAgdmFyIGJhc2VQYWlyczogQXJyYXk8c3RyaW5nPiA9IFtdO1xuICBiYXNlUGFpcnMubGVuZ3RoID0gZGF0YVZpZXcuYnl0ZUxlbmd0aCAqIDQ7ICAvLyBwcmUtYWxsb2NhdGVcbiAgdmFyIGJhc2VQYWlySWR4ID0gLXN0YXJ0QmFzZVBhaXI7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YVZpZXcuYnl0ZUxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHBhY2tlZCA9IGRhdGFWaWV3LmdldFVpbnQ4KGkpO1xuICAgIGZvciAodmFyIHNoaWZ0ID0gNjsgc2hpZnQgPj0gMDsgc2hpZnQgLT0gMikge1xuICAgICAgdmFyIGJwID0gQkFTRV9QQUlSU1socGFja2VkID4+IHNoaWZ0KSAmIDNdO1xuICAgICAgaWYgKHN0YXJ0QmFzZVBhaXIgPj0gMCkge1xuICAgICAgICBiYXNlUGFpcnNbYmFzZVBhaXJJZHhdID0gYnA7XG4gICAgICB9XG4gICAgICBiYXNlUGFpcklkeCsrO1xuICAgIH1cbiAgfVxuICAvLyBSZW1vdmUgYmFzZSBwYWlycyBmcm9tIHRoZSBlbmQgaWYgdGhlIHNlcXVlbmNlIHRlcm1pbmF0ZWQgbWlkLWJ5dGUuXG4gIGJhc2VQYWlycy5sZW5ndGggPSBudW1CYXNlUGFpcnM7XG4gIHJldHVybiBiYXNlUGFpcnM7XG59XG5cbi8qKlxuICogQ2hhbmdlIGJhc2UgcGFpcnMgdG8gJ04nIHdoZXJlIHRoZSBTZXF1ZW5jZVJlY29yZCBkaWN0YXRlcy5cbiAqIFRoaXMgbW9kaWZpZXMgdGhlIGJhc2VQYWlycyBhcnJheSBpbi1wbGFjZS5cbiAqL1xuZnVuY3Rpb24gbWFya1Vua25vd25ETkEoYmFzZVBhaXJzOiBBcnJheTxzdHJpbmc+LCBkbmFTdGFydEluZGV4OiBudW1iZXIsIHNlcXVlbmNlOiBTZXF1ZW5jZVJlY29yZCk6IEFycmF5PHN0cmluZz4ge1xuICB2YXIgZG5hU3RvcCA9IGRuYVN0YXJ0SW5kZXggKyBiYXNlUGFpcnMubGVuZ3RoIC0gMTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXF1ZW5jZS51bmtub3duQmxvY2tTdGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgblN0YXJ0ID0gc2VxdWVuY2UudW5rbm93bkJsb2NrU3RhcnRzW2ldLFxuICAgICAgICBuTGVuZ3RoID0gc2VxdWVuY2UudW5rbm93bkJsb2NrTGVuZ3Roc1tpXSxcbiAgICAgICAgblN0b3AgPSBuU3RhcnQgKyBuTGVuZ3RoIC0gMSxcbiAgICAgICAgaW50U3RhcnQgPSBNYXRoLm1heChuU3RhcnQsIGRuYVN0YXJ0SW5kZXgpLFxuICAgICAgICBpbnRTdG9wID0gTWF0aC5taW4oblN0b3AsIGRuYVN0b3ApO1xuICAgIGlmIChpbnRTdG9wIDwgaW50U3RhcnQpIGNvbnRpbnVlOyAgLy8gbm8gb3ZlcmxhcFxuXG4gICAgZm9yICh2YXIgaiA9IGludFN0YXJ0OyBqIDw9IGludFN0b3A7IGorKykge1xuICAgICAgYmFzZVBhaXJzW2ogLSBkbmFTdGFydEluZGV4XSA9ICdOJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYmFzZVBhaXJzO1xufVxuXG5cbi8qKlxuICogQW4gdW1icmVsbGEgZXJyb3IgdHlwZSB0byBkZXNjcmliZSBpc3N1ZXMgd2l0aCBwYXJzaW5nIGFuXG4gKiBpbmNvbXBsZXRlIGNodW5rIG9mIGRhdGEgd2l0aCBKQmluYXJ5J3MgcmVhZC4gSWYgdGhpcyBpcyBiZWluZ1xuICogcmFpc2VkLCB3ZSBlaXRoZXIgbmVlZCB0byBhc2sgZm9yIG1vcmUgZGF0YSAoYSBiaWdnZXIgY2h1bmspIG9yXG4gKiByZXBvcnQgdG8gdGhlIHVzZXIgdGhhdCB0aGVyZSBtaWdodCBiZSBhIHByb2JsZW0gd2l0aCB0aGUgMmJpdFxuICogZmlsZSwgc3BlY2lmaWNhbGx5IHdpdGggaXRzIGhlYWRlci5cbiAqL1xuZnVuY3Rpb24gSW5jb21wbGV0ZUNodW5rRXJyb3IobWVzc2FnZSkge1xuICAgIHRoaXMubmFtZSA9IFwiSW5jb21wbGV0ZUNodW5rRXJyb3JcIjtcbiAgICB0aGlzLm1lc3NhZ2UgPSAobWVzc2FnZSB8fCBcIlwiKTtcbn1cbkluY29tcGxldGVDaHVua0Vycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlLCB7XG4gICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IEluY29tcGxldGVDaHVua0Vycm9yLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxufSk7XG5cbi8qKlxuICogV3JhcHMgYSBwYXJzaW5nIGF0dGVtcHQsIGNhcHR1cmVzIGVycm9ycyByZWxhdGVkIHRvXG4gKiBpbmNvbXBsZXRlIGRhdGEgYW5kIHJlLXRocm93cyBhIHNwZWNpYWxpemVkIGVycm9yOlxuICogSW5jb21wbGV0ZUNodW5rRXJyb3IuIE90aGVyd2lzZSwgd2hhdGV2ZXIgb3RoZXIgZXJyb3JcbiAqIGlzIGJlaW5nIHJhaXNlZCBnZXRzIGVzY2FsYXRlZC5cbiAqL1xuZnVuY3Rpb24gcGFyc2VXaXRoRXhjZXB0aW9uKHBhcnNlRnVuYzogRnVuY3Rpb24pIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcGFyc2VGdW5jKCk7XG4gIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAvLyBDaHJvbWUtbGlrZSBicm93c2VyczogUmFuZ2VFcnJvcjsgcGhhbnRvbWpzOiBET01FeGNlcHRpb25cbiAgICBpZiAoZXJyb3IubmFtZSA9PSBcIlJhbmdlRXJyb3JcIiB8fCBlcnJvci5uYW1lID09IFwiSU5ERVhfU0laRV9FUlJcIikge1xuICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgbmFtZTogJHtlcnJvci5uYW1lfWApO1xuICAgICAgICB0aHJvdyBuZXcgSW5jb21wbGV0ZUNodW5rRXJyb3IoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUcnkgZ2V0dGluZyBhIGJpZ2dlciBjaHVuayBvZiB0aGUgcmVtb3RlIGZpbGVcbiAqIHVudGlsIHRoZSBJbmNvbXBsZXRlIENodW5rIEVycm9yIGlzIHJlc29sdmVkLiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHdlIG5lZWQgdG9cbiAqIHBhcnNlIHRoZSBoZWFkZXIsIGJ1dCB3aGVuIHdlIGRvbid0IGtub3cgdGhlIHNpemUgb2YgdGhlIGhlYWRlciB1cCBmcm9udC5cbiAqIElmIHRoZSBpbnRpYWwgcmVxdWVzdCByZXR1cm5zIGFuIGluY29tcGxldGUgaGVhZGVyIGFuZCBoZW5jZSB0aGVcbiAqIHBhcnNpbmcgZmFpbHMsIHdlIG5leHQgdHJ5IGRvdWJsaW5nIHRoZSByZXF1ZXN0ZWQgc2l6ZS5cbiAqIFRoZSBzaXplIG9mIHRoZSByZXF1ZXN0IGlzIGNhcHBlZCB3aXRoIGB1bnRpbFNpemVgIHNvIHRoYXRcbiAqIHdlIGRvbid0IHN0YXJ0IGFza2luZyBmb3IgTUJzIG9mIGRhdGEgZm9yIG5vIHVzZS5cbiAqIEluc3RlYWQgd2Ugd2UgdGhyb3cgYW4gZXJyb3IgaWYgd2UgcmVhY2ggdGhlIGNhcCxcbiAqIHBvdGVudGlhbGx5IG1lYW5pbmcgYSBjb3JydXB0ZWQgMmJpdCBmaWxlLlxuKi9cbmZ1bmN0aW9uIHJldHJ5UmVtb3RlR2V0KHJlbW90ZUZpbGU6IFJlbW90ZUZpbGUsIHN0YXJ0OiBudW1iZXIsIHNpemU6IG51bWJlciwgdW50aWxTaXplOiBudW1iZXIsIHByb21pc2VkRnVuYzogRnVuY3Rpb24pIHtcbiAgcmV0dXJuIHJlbW90ZUZpbGUuZ2V0Qnl0ZXMoc3RhcnQsIHNpemUpLnRoZW4ocHJvbWlzZWRGdW5jKS5jYXRjaChlcnJvciA9PiB7XG4gICAgaWYoZXJyb3IubmFtZSA9PSBcIkluY29tcGxldGVDaHVua0Vycm9yXCIpIHtcbiAgICAgIC8vIERvIG5vdCBhdHRlbXB0IHRvIGRvd25sb2FkIG1vcmUgdGhhbiBgdW50aWxTaXplYFxuICAgICAgaWYoc2l6ZSA+IHVudGlsU2l6ZSkge1xuICAgICAgICB0aHJvdyBgQ291bGRuJ3QgcGFyc2UgdGhlIGhlYWRlciBgICtcbiAgICAgICAgICAgICAgYGZyb20gdGhlIGZpcnN0ICR7c2l6ZX0gYnl0ZXMgb2YgdGhlIGZpbGUuIGAgK1xuICAgICAgICAgICAgICBgQ29ycnVwdGVkIDJiaXQgZmlsZT9gO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldHJ5UmVtb3RlR2V0KHJlbW90ZUZpbGUsIHN0YXJ0LCBzaXplKjIsIHVudGlsU2l6ZSwgcHJvbWlzZWRGdW5jKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9KTtcbn1cblxuY2xhc3MgVHdvQml0IHtcbiAgcmVtb3RlRmlsZTogUmVtb3RlRmlsZTtcbiAgaGVhZGVyOiBRLlByb21pc2U8VHdvQml0SGVhZGVyPjtcblxuICBjb25zdHJ1Y3RvcihyZW1vdGVGaWxlOiBSZW1vdGVGaWxlKSB7XG4gICAgdGhpcy5yZW1vdGVGaWxlID0gcmVtb3RlRmlsZTtcbiAgICB2YXIgZGVmZXJyZWRIZWFkZXIgPSBRLmRlZmVyKCk7XG4gICAgdGhpcy5oZWFkZXIgPSBkZWZlcnJlZEhlYWRlci5wcm9taXNlO1xuICAgIHJldHJ5UmVtb3RlR2V0KFxuICAgICAgdGhpcy5yZW1vdGVGaWxlLFxuICAgICAgMCwgIC8vIEJlZ2lubmluZyBvZiB0aGUgZmlsZVxuICAgICAgRklSU1RfSEVBREVSX0NIVU5LU0laRSxcbiAgICAgIE1BWF9DSFVOS1NJWkUsXG4gICAgICBidWZmZXIgPT4ge1xuICAgICAgICB2YXIgaGVhZGVyID0gcGFyc2VXaXRoRXhjZXB0aW9uKCgpID0+IHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VIZWFkZXIoYnVmZmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRlZmVycmVkSGVhZGVyLnJlc29sdmUoaGVhZGVyKTtcbiAgICAgIH0pLmRvbmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBiYXNlIHBhaXJzIGZvciBjb250aWc6c3RhcnQtc3RvcC5cbiAgICogVGhlIHJhbmdlIGlzIGluY2x1c2l2ZSBhbmQgemVyby1iYXNlZC5cbiAgICogUmV0dXJucyBlbXB0eSBzdHJpbmcgaWYgbm8gZGF0YSBpcyBhdmFpbGFibGUgb24gdGhpcyByYW5nZS5cbiAgICovXG4gIGdldEZlYXR1cmVzSW5SYW5nZShjb250aWc6IHN0cmluZywgc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogUS5Qcm9taXNlPHN0cmluZz4ge1xuICAgIGlmIChzdGFydCA+IHN0b3ApIHtcbiAgICAgIHRocm93IGBSZXF1ZXN0ZWQgYSAyYml0IHJhbmdlIHdpdGggc3RhcnQgPiBzdG9wICgke3N0YXJ0fSwgJHtzdG9wfSlgO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9nZXRTZXF1ZW5jZUhlYWRlcihjb250aWcpLnRoZW4oaGVhZGVyID0+IHtcbiAgICAgIHZhciBkbmFPZmZzZXQgPSBoZWFkZXIub2Zmc2V0ICsgaGVhZGVyLmRuYU9mZnNldEZyb21IZWFkZXI7XG4gICAgICB2YXIgb2Zmc2V0ID0gTWF0aC5mbG9vcihkbmFPZmZzZXQgKyBzdGFydC80KTtcbiAgICAgIHZhciBieXRlTGVuZ3RoID0gTWF0aC5jZWlsKChzdG9wIC0gc3RhcnQgKyAxKSAvIDQpICsgMTtcbiAgICAgIHJldHVybiB0aGlzLnJlbW90ZUZpbGUuZ2V0Qnl0ZXMob2Zmc2V0LCBieXRlTGVuZ3RoKS50aGVuKGJ1ZmZlciA9PiB7XG4gICAgICAgIHZhciBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICAgICAgICByZXR1cm4gbWFya1Vua25vd25ETkEoXG4gICAgICAgICAgICB1bnBhY2tETkEoZGF0YVZpZXcsIHN0YXJ0ICUgNCwgc3RvcCAtIHN0YXJ0ICsgMSksIHN0YXJ0LCBoZWFkZXIpXG4gICAgICAgICAgICAuam9pbignJyk7XG4gICAgICB9KTtcbiAgICB9KS50aGVuKHAgPT4ge1xuICAgICAgcmV0dXJuIHA7XG4gICAgfSk7XG4gIH1cblxuICAvLyBSZXR1cm5zIGEgbGlzdCBvZiBjb250aWcgbmFtZXMuXG4gIGdldENvbnRpZ0xpc3QoKTogUS5Qcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgcmV0dXJuIHRoaXMuaGVhZGVyLnRoZW4oaGVhZGVyID0+IGhlYWRlci5zZXF1ZW5jZXMubWFwKHNlcSA9PiBzZXEubmFtZSkpO1xuICB9XG5cbiAgX2dldFNlcXVlbmNlSGVhZGVyKGNvbnRpZzogc3RyaW5nKTogUS5Qcm9taXNlPFNlcXVlbmNlUmVjb3JkPiB7XG4gICAgcmV0dXJuIHRoaXMuaGVhZGVyLnRoZW4oaGVhZGVyID0+IHtcbiAgICAgIHZhciBtYXliZVNlcSA9IF8uZmluZFdoZXJlKGhlYWRlci5zZXF1ZW5jZXMsIHtuYW1lOiBjb250aWd9KSB8fFxuICAgICAgICAgICAgICAgICAgICAgXy5maW5kV2hlcmUoaGVhZGVyLnNlcXVlbmNlcywge25hbWU6ICdjaHInICsgY29udGlnfSk7XG4gICAgICBpZiAobWF5YmVTZXEgPT09IG51bGwgfHwgbWF5YmVTZXEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyAnSW52YWxpZCBjb250aWc6ICcgKyBjb250aWc7XG4gICAgICB9XG4gICAgICB2YXIgc2VxID0gbWF5YmVTZXE7ICAvLyBmb3IgZmxvdywgc2VlIGZhY2Vib29rL2Zsb3cjMjY2XG5cbiAgICAgIHJldHVybiByZXRyeVJlbW90ZUdldChcbiAgICAgICAgdGhpcy5yZW1vdGVGaWxlLFxuICAgICAgICBzZXEub2Zmc2V0LFxuICAgICAgICBGSVJTVF9TRVFVRU5DRV9DSFVOS1NJWkUsXG4gICAgICAgIE1BWF9DSFVOS1NJWkUsXG4gICAgICAgIGJ1ZmZlciA9PiB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlV2l0aEV4Y2VwdGlvbigoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTZXF1ZW5jZVJlY29yZChidWZmZXIsIHNlcS5vZmZzZXQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0pLnRoZW4ocCA9PiB7XG4gICAgICByZXR1cm4gcDtcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFR3b0JpdDtcbiIsIi8qKlxuICogQSB2aXJ0dWFsIG9mZnNldCBpbnRvIGEgQkFNIGZpbGUuXG4gKiBUaGlzIGNvbWJpbmVzIHRoZSBvZmZzZXQgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgY29tcHJlc3Npb24gYmxvY2sgd2l0aCBhblxuICogb2Zmc2V0IGludG8gdGhlIGluZmxhdGVkIGRhdGEuXG4gKiBUaGVzZSBhcmUgdXN1YWxseSByZXByZXNlbnRlZCBhcyB1aW50NjRzLCB3aGljaCBhcmUgYXdrd2FyZCB0byB3b3JrIHdpdGggaW5cbiAqIEphdmFTY3JpcHQuXG4gKiBAZmxvd1xuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG5jbGFzcyBWaXJ0dWFsT2Zmc2V0IHtcbiAgY29mZnNldDogbnVtYmVyO1xuICB1b2Zmc2V0OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoY29mZnNldDogbnVtYmVyLCB1b2Zmc2V0OiBudW1iZXIpIHtcbiAgICB0aGlzLmNvZmZzZXQgPSBjb2Zmc2V0O1xuICAgIHRoaXMudW9mZnNldCA9IHVvZmZzZXQ7XG4gIH1cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLmNvZmZzZXR9OiR7dGhpcy51b2Zmc2V0fWA7XG4gIH1cblxuICBpc0xlc3NUaGFuKG90aGVyOiBWaXJ0dWFsT2Zmc2V0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29mZnNldCA8IG90aGVyLmNvZmZzZXQgfHxcbiAgICAgICAgICAgKHRoaXMuY29mZnNldCA9PSBvdGhlci5jb2Zmc2V0ICYmXG4gICAgICAgICAgICB0aGlzLnVvZmZzZXQgPCBvdGhlci51b2Zmc2V0KTtcbiAgfVxuXG4gIGlzTGVzc1RoYW5PckVxdWFsKG90aGVyOiBWaXJ0dWFsT2Zmc2V0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29mZnNldCA8PSBvdGhlci5jb2Zmc2V0IHx8XG4gICAgICAgICAgICh0aGlzLmNvZmZzZXQgPT0gb3RoZXIuY29mZnNldCAmJlxuICAgICAgICAgICAgdGhpcy51b2Zmc2V0IDw9IG90aGVyLnVvZmZzZXQpO1xuICB9XG5cbiAgaXNFcXVhbChvdGhlcjogVmlydHVhbE9mZnNldCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvZmZzZXQgPT0gb3RoZXIuY29mZnNldCAmJlxuICAgICAgICAgICB0aGlzLnVvZmZzZXQgPT0gb3RoZXIudW9mZnNldDtcbiAgfVxuXG4gIC8vIFJldHVybnMgPDAgaWYgdGhpcyA8IG90aGVyLCAwIGlmIHRoaXMgPT0gb3RoZXIsID4wIGlmIHRoaXMgPiBvdGhlci5cbiAgLy8gVXNlZnVsIGZvciBzb3J0aW5nLlxuICBjb21wYXJlVG8ob3RoZXI6IFZpcnR1YWxPZmZzZXQpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvZmZzZXQgLSBvdGhlci5jb2Zmc2V0IHx8IHRoaXMudW9mZnNldCAtIG90aGVyLnVvZmZzZXQ7XG4gIH1cblxuICBjbG9uZSgpOiBWaXJ0dWFsT2Zmc2V0IHtcbiAgICByZXR1cm4gbmV3IFZpcnR1YWxPZmZzZXQodGhpcy5jb2Zmc2V0LCB0aGlzLnVvZmZzZXQpO1xuICB9XG5cbiAgLy8gVGhpcyBpcyBhIGZhc3RlciBzdGFuZC1pbiBmb3IgakJpbmFyeS5yZWFkKCdWaXJ0dWFsT2Zmc2V0JylcbiAgc3RhdGljIGZyb21CbG9iKHU4OiBVaW50OEFycmF5LCBvZmZzZXQ/OiBudW1iZXIpOiBWaXJ0dWFsT2Zmc2V0IHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcbiAgICB2YXIgdW9mZnNldCA9IHU4W29mZnNldCAgICBdICtcbiAgICAgICAgICAgICAgICAgIHU4W29mZnNldCArIDFdICogMjU2LFxuICAgICAgICBjb2Zmc2V0ID0gdThbb2Zmc2V0ICsgMl0gK1xuICAgICAgICAgICAgICAgICAgdThbb2Zmc2V0ICsgM10gKiAyNTYgK1xuICAgICAgICAgICAgICAgICAgdThbb2Zmc2V0ICsgNF0gKiA2NTUzNiArXG4gICAgICAgICAgICAgICAgICB1OFtvZmZzZXQgKyA1XSAqIDE2Nzc3MjE2ICtcbiAgICAgICAgICAgICAgICAgIHU4W29mZnNldCArIDZdICogNDI5NDk2NzI5NiArXG4gICAgICAgICAgICAgICAgICB1OFtvZmZzZXQgKyA3XSAqIDEwOTk1MTE2Mjc3NzY7XG4gICAgcmV0dXJuIG5ldyBWaXJ0dWFsT2Zmc2V0KGNvZmZzZXQsIHVvZmZzZXQpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVmlydHVhbE9mZnNldDtcbiIsIi8qKlxuICogVG9vbHMgZm9yIHdvcmtpbmcgd2l0aCBpbmRleGVkIEJBTSAoQkFJKSBmaWxlcy5cbiAqIFRoZXNlIGhhdmUgbm90aGluZyB0byBzYXkgYWJvdXQgcGFyc2luZyB0aGUgQkFNIGZpbGUgaXRzZWxmLiBGb3IgdGhhdCwgc2VlXG4gKiBiYW0uanMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIFJlbW90ZUZpbGUgZnJvbSAnLi4vUmVtb3RlRmlsZSc7XG5pbXBvcnQgdHlwZSBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgdHlwZSB7Q2h1bmt9IGZyb20gJy4uL3R5cGVzJztcblxuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5pbXBvcnQgakRhdGFWaWV3IGZyb20gJ2pkYXRhdmlldyc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBRIGZyb20gJ3EnO1xuaW1wb3J0IGJhbVR5cGVzIGZyb20gJy4vZm9ybWF0cy9iYW1UeXBlcyc7XG5pbXBvcnQgVmlydHVhbE9mZnNldCBmcm9tICcuL1ZpcnR1YWxPZmZzZXQnO1xuXG5cbi8vIEluIHRoZSBldmVudCB0aGF0IGluZGV4IGNodW5rcyBhcmVuJ3QgYXZhaWxhYmxlIGZyb20gYW4gZXh0ZXJuYWwgc291cmNlLCBpdFxuLy8gd2luZHMgdXAgc2F2aW5nIHRpbWUgdG8gZG8gYSBmYXN0IHBhc3Mgb3ZlciB0aGUgZGF0YSB0byBjb21wdXRlIHRoZW0uIFRoaXNcbi8vIGFsbG93cyB1cyB0byBwYXJzZSBhIHNpbmdsZSBjb250aWcgYXQgYSB0aW1lIHVzaW5nIGpCaW5hcnkuXG5mdW5jdGlvbiBjb21wdXRlSW5kZXhDaHVua3MoYnVmZmVyKSB7XG4gIHZhciBCTE9DS19TSVpFID0gNjU1MzY7XG4gIHZhciB2aWV3ID0gbmV3IGpEYXRhVmlldyhidWZmZXIsIDAsIGJ1ZmZlci5ieXRlTGVuZ3RoLCB0cnVlIC8qIGxpdHRsZSBlbmRpYW4gKi8pO1xuXG4gIHZhciBtaW5CbG9ja0luZGV4ID0gSW5maW5pdHk7XG4gIHZhciBjb250aWdTdGFydE9mZnNldHMgPSBbXTtcbiAgdmlldy5nZXRJbnQzMigpOyAgLy8gbWFnaWNcbiAgdmFyIG5fcmVmID0gdmlldy5nZXRJbnQzMigpO1xuICBmb3IgKHZhciBqID0gMDsgaiA8IG5fcmVmOyBqKyspIHtcbiAgICBjb250aWdTdGFydE9mZnNldHMucHVzaCh2aWV3LnRlbGwoKSk7XG4gICAgdmFyIG5fYmluID0gdmlldy5nZXRJbnQzMigpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbl9iaW47IGkrKykge1xuICAgICAgdmlldy5nZXRVaW50MzIoKTsgIC8vIGJpbiBJRFxuICAgICAgdmFyIG5fY2h1bmsgPSB2aWV3LmdldEludDMyKCk7XG4gICAgICB2aWV3LnNraXAobl9jaHVuayAqIDE2KTtcbiAgICB9XG4gICAgdmFyIG5faW50diA9IHZpZXcuZ2V0SW50MzIoKTtcbiAgICBpZiAobl9pbnR2KSB7XG4gICAgICB2YXIgb2Zmc2V0ID0gVmlydHVhbE9mZnNldC5mcm9tQmxvYih2aWV3LmdldEJ5dGVzKDgpLCAwKSxcbiAgICAgICAgICBjb2Zmc2V0ID0gb2Zmc2V0LmNvZmZzZXQgKyAob2Zmc2V0LnVvZmZzZXQgPyBCTE9DS19TSVpFIDogMCk7XG4gICAgICBtaW5CbG9ja0luZGV4ID0gY29mZnNldCA/IE1hdGgubWluKGNvZmZzZXQsIG1pbkJsb2NrSW5kZXgpIDogQkxPQ0tfU0laRTtcbiAgICAgIHZpZXcuc2tpcCgobl9pbnR2IC0gMSkgKiA4KTtcbiAgICB9XG4gIH1cbiAgY29udGlnU3RhcnRPZmZzZXRzLnB1c2godmlldy50ZWxsKCkpO1xuXG4gIC8vIEF0IHRoaXMgcG9pbnQsIGBtaW5CbG9ja0luZGV4YCBzaG91bGQgYmUgbm9uLUluZmluaXR5IChzZWUgIzQwNSAmICM0MDYpXG4gIHJldHVybiB7XG4gICAgY2h1bmtzOiBfLnppcChfLmluaXRpYWwoY29udGlnU3RhcnRPZmZzZXRzKSwgXy5yZXN0KGNvbnRpZ1N0YXJ0T2Zmc2V0cykpLFxuICAgIG1pbkJsb2NrSW5kZXhcbiAgfTtcbn1cblxuXG5mdW5jdGlvbiByZWFkQ2h1bmtzKGJ1Zikge1xuICByZXR1cm4gbmV3IGpCaW5hcnkoYnVmLCBiYW1UeXBlcy5UWVBFX1NFVCkucmVhZCgnQ2h1bmtzQXJyYXknKTtcbn1cblxuZnVuY3Rpb24gcmVhZEludGVydmFscyhibG9iOiBVaW50OEFycmF5KSB7XG4gIHZhciBpbnRlcnZhbHMgPSBuZXcgQXJyYXkoTWF0aC5mbG9vcihibG9iLmxlbmd0aCAvIDgpKTtcbiAgZm9yICh2YXIgcG9zID0gMDsgcG9zIDwgYmxvYi5sZW5ndGggLSA3OyBwb3MgKz0gOCkge1xuICAgIGludGVydmFsc1twb3MgPj4gM10gPSBWaXJ0dWFsT2Zmc2V0LmZyb21CbG9iKGJsb2IsIHBvcyk7XG4gIH1cbiAgcmV0dXJuIGludGVydmFscztcbn1cblxuZnVuY3Rpb24gZG9DaHVua3NPdmVybGFwKGE6IENodW5rLCBiOiBDaHVuaykge1xuICByZXR1cm4gYS5jaHVua19iZWcuaXNMZXNzVGhhbk9yRXF1YWwoYi5jaHVua19lbmQpICYmXG4gICAgICAgICBiLmNodW5rX2JlZy5pc0xlc3NUaGFuT3JFcXVhbChhLmNodW5rX2VuZCk7XG59XG5cbmZ1bmN0aW9uIGFyZUNodW5rc0FkamFjZW50KGE6IENodW5rLCBiOiBDaHVuaykge1xuICByZXR1cm4gYS5jaHVua19iZWcuaXNFcXVhbChiLmNodW5rX2VuZCkgfHwgYS5jaHVua19lbmQuaXNFcXVhbChiLmNodW5rX2JlZyk7XG59XG5cbi8vIFRoaXMgY29hbGVzY2VzIGFkamFjZW50ICYgb3ZlcmxhcHBpbmcgY2h1bmtzIHRvIG1pbmltaXplIGZldGNoZXMuXG4vLyBJdCBhbHNvIGFwcGxpZXMgdGhlIFwibGluZWFyIG9wdGltaXphdGlvblwiLCB3aGljaCBjYW4gZ3JlYXRseSByZWR1Y2UgdGhlXG4vLyBudW1iZXIgb2YgbmV0d29yayBmZXRjaGVzIG5lZWRlZCB0byBmdWxmaWxsIGEgcmVxdWVzdC5cbmZ1bmN0aW9uIG9wdGltaXplQ2h1bmtMaXN0KGNodW5rTGlzdDogQ2h1bmtbXSwgbWluaW11bU9mZnNldDogVmlydHVhbE9mZnNldCk6IENodW5rW10ge1xuICBjaHVua0xpc3Quc29ydCgoYSwgYikgPT4ge1xuICAgIHZhciByZXN1bHQgPSBhLmNodW5rX2JlZy5jb21wYXJlVG8oYi5jaHVua19iZWcpO1xuICAgIGlmIChyZXN1bHQgPT09IDApIHtcbiAgICAgIHJlc3VsdCA9IGEuY2h1bmtfZW5kLmNvbXBhcmVUbyhiLmNodW5rX2VuZCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0pO1xuXG4gIHZhciBuZXdDaHVua3MgPSBbXTtcbiAgY2h1bmtMaXN0LmZvckVhY2goY2h1bmsgPT4ge1xuICAgIGlmIChjaHVuay5jaHVua19lbmQuaXNMZXNzVGhhbihtaW5pbXVtT2Zmc2V0KSkge1xuICAgICAgcmV0dXJuOyAgLy8gbGluZWFyIGluZGV4IG9wdGltaXphdGlvblxuICAgIH1cblxuICAgIGlmIChuZXdDaHVua3MubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXdDaHVua3MucHVzaChjaHVuayk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGxhc3RDaHVuayA9IG5ld0NodW5rc1tuZXdDaHVua3MubGVuZ3RoIC0gMV07XG4gICAgaWYgKCFkb0NodW5rc092ZXJsYXAobGFzdENodW5rLCBjaHVuaykgJiZcbiAgICAgICAgIWFyZUNodW5rc0FkamFjZW50KGxhc3RDaHVuaywgY2h1bmspKSB7XG4gICAgICBuZXdDaHVua3MucHVzaChjaHVuayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChsYXN0Q2h1bmsuY2h1bmtfZW5kLmlzTGVzc1RoYW4oY2h1bmsuY2h1bmtfZW5kKSkge1xuICAgICAgICBsYXN0Q2h1bmsuY2h1bmtfZW5kID0gY2h1bmsuY2h1bmtfZW5kO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIG5ld0NodW5rcztcbn1cblxuLy8gVGhpcyB2ZXJzaW9uIG9mIEJhaUZpbGUgaXMgbm90IGNvbXBsZXRlbHkgaW1tZWRpYXRlLCBidXQgaXQgZG9lcyBndWFyYW50ZWVcbi8vIHRoYXQgdGhlIGluZGV4IGNodW5rcyBhcmUgYXZhaWxhYmxlLlxuY2xhc3MgSW1tZWRpYXRlQmFpRmlsZSB7XG4gIGJ1ZmZlcjogP0FycmF5QnVmZmVyO1xuICByZW1vdGVGaWxlOiBSZW1vdGVGaWxlO1xuICBpbmRleENodW5rczogT2JqZWN0O1xuICBpbmRleENhY2hlOiBRLlByb21pc2U8T2JqZWN0PltdOyAgLy8gcmVmIElEIC0+IHBhcnNlZCBCYWlJbmRleFxuICBpbnRlcnZhbHNDYWNoZTogQXJyYXk8P1ZpcnR1YWxPZmZzZXRbXT47ICAvLyByZWYgSUQgLT4gbGluZWFyIGluZGV4XG5cbiAgY29uc3RydWN0b3IoYnVmZmVyOiA/QXJyYXlCdWZmZXIsIHJlbW90ZUZpbGU6IFJlbW90ZUZpbGUsIGluZGV4Q2h1bmtzPzogT2JqZWN0KSB7XG4gICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgdGhpcy5yZW1vdGVGaWxlID0gcmVtb3RlRmlsZTtcbiAgICBpZiAoYnVmZmVyKSB7XG4gICAgICB0aGlzLmluZGV4Q2h1bmtzID0gY29tcHV0ZUluZGV4Q2h1bmtzKGJ1ZmZlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpbmRleENodW5rcykge1xuICAgICAgICB0aGlzLmluZGV4Q2h1bmtzID0gaW5kZXhDaHVua3M7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyAnV2l0aG91dCBpbmRleCBjaHVua3MsIHRoZSBlbnRpcmUgQkFJIGJ1ZmZlciBtdXN0IGJlIGxvYWRlZCc7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuaW5kZXhDYWNoZSA9IG5ldyBBcnJheSh0aGlzLmluZGV4Q2h1bmtzLmNodW5rcy5sZW5ndGgpO1xuICAgIHRoaXMuaW50ZXJ2YWxzQ2FjaGUgPSBuZXcgQXJyYXkodGhpcy5pbmRleENodW5rcy5jaHVua3MubGVuZ3RoKTtcbiAgfVxuXG4gIGdldENodW5rc0ZvckludGVydmFsKHJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+KTogUS5Qcm9taXNlPENodW5rW10+IHtcbiAgICBpZiAocmFuZ2UuY29udGlnIDwgMCB8fCByYW5nZS5jb250aWcgPiB0aGlzLmluZGV4Q2h1bmtzLmNodW5rcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBRLnJlamVjdChgSW52YWxpZCBjb250aWcgJHtyYW5nZS5jb250aWd9YCk7XG4gICAgfVxuXG4gICAgdmFyIGJpbnMgPSByZWcyYmlucyhyYW5nZS5zdGFydCgpLCByYW5nZS5zdG9wKCkgKyAxKTtcblxuICAgIHJldHVybiB0aGlzLmluZGV4Rm9yQ29udGlnKHJhbmdlLmNvbnRpZykudGhlbihjb250aWdJbmRleCA9PiB7XG4gICAgICB2YXIgY2h1bmtzID0gXy5jaGFpbihjb250aWdJbmRleC5iaW5zKVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGIgPT4gYmlucy5pbmRleE9mKGIuYmluKSA+PSAwKVxuICAgICAgICAgICAgICAgICAgICAubWFwKGIgPT4gcmVhZENodW5rcyhiLmNodW5rcykpXG4gICAgICAgICAgICAgICAgICAgIC5mbGF0dGVuKClcbiAgICAgICAgICAgICAgICAgICAgLnZhbHVlKCk7XG5cbiAgICAgIHZhciBsaW5lYXJJbmRleCA9IHRoaXMuZ2V0SW50ZXJ2YWxzKGNvbnRpZ0luZGV4LmludGVydmFscywgcmFuZ2UuY29udGlnKTtcbiAgICAgIHZhciBzdGFydElkeCA9IE1hdGgubWF4KDAsIE1hdGguZmxvb3IocmFuZ2Uuc3RhcnQoKSAvIDE2Mzg0KSk7XG4gICAgICB2YXIgbWluaW11bU9mZnNldCA9IGxpbmVhckluZGV4W3N0YXJ0SWR4XTtcblxuICAgICAgY2h1bmtzID0gb3B0aW1pemVDaHVua0xpc3QoY2h1bmtzLCBtaW5pbXVtT2Zmc2V0KTtcblxuICAgICAgcmV0dXJuIGNodW5rcztcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJldHJpZXZlIGFuZCBwYXJzZSB0aGUgaW5kZXggZm9yIGEgcGFydGljdWxhciBjb250aWcuXG4gIGluZGV4Rm9yQ29udGlnKGNvbnRpZzogbnVtYmVyKTogUS5Qcm9taXNlPE9iamVjdD4ge1xuICAgIHZhciB2ID0gdGhpcy5pbmRleENhY2hlW2NvbnRpZ107XG4gICAgaWYgKHYpIHtcbiAgICAgIHJldHVybiB2O1xuICAgIH1cblxuICAgIHZhciBbc3RhcnQsIHN0b3BdID0gdGhpcy5pbmRleENodW5rcy5jaHVua3NbY29udGlnXTtcbiAgICB0aGlzLmluZGV4Q2FjaGVbY29udGlnXSA9IHRoaXMuZ2V0U2xpY2Uoc3RhcnQsIHN0b3ApLnRoZW4oYnVmZmVyID0+IHtcbiAgICAgIHZhciBqYiA9IG5ldyBqQmluYXJ5KGJ1ZmZlciwgYmFtVHlwZXMuVFlQRV9TRVQpO1xuICAgICAgcmV0dXJuIGpiLnJlYWQoJ0JhaUluZGV4Jyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuaW5kZXhDYWNoZVtjb250aWddO1xuICB9XG5cbiAgZ2V0U2xpY2Uoc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogUS5Qcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgaWYgKHRoaXMuYnVmZmVyKSB7XG4gICAgICByZXR1cm4gUS53aGVuKHRoaXMuYnVmZmVyLnNsaWNlKHN0YXJ0LCBzdG9wKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnJlbW90ZUZpbGUuZ2V0Qnl0ZXMoc3RhcnQsIHN0b3AgLSBzdGFydCArIDEpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENhY2hlZCB3cmFwcGVyIGFyb3VuZCByZWFkSW50ZXJ2YWxzKClcbiAgZ2V0SW50ZXJ2YWxzKGJsb2I6IFVpbnQ4QXJyYXksIHJlZklkOiBudW1iZXIpOiBWaXJ0dWFsT2Zmc2V0W10ge1xuICAgIHZhciBsaW5lYXJJbmRleCA9IHRoaXMuaW50ZXJ2YWxzQ2FjaGVbcmVmSWRdO1xuICAgIGlmIChsaW5lYXJJbmRleCkge1xuICAgICAgcmV0dXJuIGxpbmVhckluZGV4O1xuICAgIH1cbiAgICBsaW5lYXJJbmRleCA9IHJlYWRJbnRlcnZhbHMoYmxvYik7XG4gICAgdGhpcy5pbnRlcnZhbHNDYWNoZVtyZWZJZF0gPSBsaW5lYXJJbmRleDtcbiAgICByZXR1cm4gbGluZWFySW5kZXg7XG4gIH1cbn1cblxuXG5jbGFzcyBCYWlGaWxlIHtcbiAgcmVtb3RlRmlsZTogUmVtb3RlRmlsZTtcbiAgaW1tZWRpYXRlOiBRLlByb21pc2U8SW1tZWRpYXRlQmFpRmlsZT47XG5cbiAgY29uc3RydWN0b3IocmVtb3RlRmlsZTogUmVtb3RlRmlsZSwgaW5kZXhDaHVua3M/OiBPYmplY3QpIHtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuICAgIGlmIChpbmRleENodW5rcykge1xuICAgICAgdGhpcy5pbW1lZGlhdGUgPSBRLndoZW4obmV3IEltbWVkaWF0ZUJhaUZpbGUobnVsbCwgcmVtb3RlRmlsZSwgaW5kZXhDaHVua3MpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbW1lZGlhdGUgPSByZW1vdGVGaWxlLmdldEFsbCgpLnRoZW4oYnVmID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbW1lZGlhdGVCYWlGaWxlKGJ1ZiwgcmVtb3RlRmlsZSwgaW5kZXhDaHVua3MpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuaW1tZWRpYXRlLmRvbmUoKTtcbiAgfVxuXG4gIGdldENodW5rc0ZvckludGVydmFsKHJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+KTogUS5Qcm9taXNlPENodW5rW10+IHtcbiAgICByZXR1cm4gdGhpcy5pbW1lZGlhdGUudGhlbihpbW1lZGlhdGUgPT4ge1xuICAgICAgcmV0dXJuIGltbWVkaWF0ZS5nZXRDaHVua3NGb3JJbnRlcnZhbChyYW5nZSk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRIZWFkZXJTaXplKCk6IFEuUHJvbWlzZTxudW1iZXI+IHtcbiAgICByZXR1cm4gdGhpcy5pbW1lZGlhdGUudGhlbihpbW1lZGlhdGUgPT4ge1xuICAgICAgcmV0dXJuIGltbWVkaWF0ZS5pbmRleENodW5rcy5taW5CbG9ja0luZGV4O1xuICAgIH0pO1xuICB9XG59XG5cblxuLy8gVGhlc2UgZnVuY3Rpb25zIGNvbWUgZGlyZWN0bHkgZnJvbSB0aGUgU0FNIHBhcGVyXG4vLyBTZWUgaHR0cHM6Ly9zYW10b29scy5naXRodWIuaW8vaHRzLXNwZWNzL1NBTXYxLnBkZiBzZWN0aW9uIDUuM1xuXG4vLyBjYWxjdWxhdGUgdGhlIGxpc3Qgb2YgYmlucyB0aGF0IG1heSBvdmVybGFwIHdpdGggcmVnaW9uIFtiZWcsZW5kKSAoemVyby1iYXNlZClcbmZ1bmN0aW9uIHJlZzJiaW5zKGJlZywgZW5kKSB7XG4gIHZhciBrLCBsaXN0ID0gW107XG4gIC0tZW5kO1xuICBsaXN0LnB1c2goMCk7XG4gIGZvciAoayA9ICAgIDEgKyAoYmVnPj4yNik7IGsgPD0gICAgMSArIChlbmQ+PjI2KTsgKytrKSBsaXN0LnB1c2goayk7XG4gIGZvciAoayA9ICAgIDkgKyAoYmVnPj4yMyk7IGsgPD0gICAgOSArIChlbmQ+PjIzKTsgKytrKSBsaXN0LnB1c2goayk7XG4gIGZvciAoayA9ICAgNzMgKyAoYmVnPj4yMCk7IGsgPD0gICA3MyArIChlbmQ+PjIwKTsgKytrKSBsaXN0LnB1c2goayk7XG4gIGZvciAoayA9ICA1ODUgKyAoYmVnPj4xNyk7IGsgPD0gIDU4NSArIChlbmQ+PjE3KTsgKytrKSBsaXN0LnB1c2goayk7XG4gIGZvciAoayA9IDQ2ODEgKyAoYmVnPj4xNCk7IGsgPD0gNDY4MSArIChlbmQ+PjE0KTsgKytrKSBsaXN0LnB1c2goayk7XG4gIHJldHVybiBsaXN0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJhaUZpbGU7XG4iLCIvKipcbiAqIFRvb2xzIGZvciBwYXJzaW5nIEJBTSBmaWxlcy5cbiAqIFNlZSBodHRwczovL3NhbXRvb2xzLmdpdGh1Yi5pby9odHMtc3BlY3MvU0FNdjEucGRmXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIFJlbW90ZUZpbGUgZnJvbSAnLi4vUmVtb3RlRmlsZSc7XG5pbXBvcnQgdHlwZSB7Q2h1bmssIEluZmxhdGVkQmxvY2t9IGZyb20gJy4uL3R5cGVzJztcblxuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5pbXBvcnQgakRhdGFWaWV3IGZyb20gJ2pkYXRhdmlldyc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBRIGZyb20gJ3EnO1xuXG5pbXBvcnQgYmFtVHlwZXMgZnJvbSAnLi9mb3JtYXRzL2JhbVR5cGVzJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgQmFpRmlsZSBmcm9tICcuL2JhaSc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IFZpcnR1YWxPZmZzZXQgZnJvbSAnLi9WaXJ0dWFsT2Zmc2V0JztcbmltcG9ydCBTYW1SZWFkIGZyb20gJy4vU2FtUmVhZCc7XG5cblxuLyoqXG4gKiBUaGUgJ2NvbnRhaW5lZCcgcGFyYW1ldGVyIGNvbnRyb2xzIHdoZXRoZXIgdGhlIGFsaWdubWVudHMgbXVzdCBiZSBmdWxseVxuICogY29udGFpbmVkIHdpdGhpbiB0aGUgcmFuZ2UsIG9yIG5lZWQgb25seSBvdmVybGFwIGl0LlxuICovXG5mdW5jdGlvbiBpc0FsaWdubWVudEluUmFuZ2UocmVhZDogU2FtUmVhZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhSYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZWQ6IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgLy8gVE9ETzogVXNlIGNpZ2FyLmdldFJlZmVyZW5jZUxlbmd0aCgpIGluc3RlYWQgb2YgbF9zZXEsIGxpa2UgaHRzamRrLiBcbiAgdmFyIHJlYWRSYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChyZWFkLnJlZklELCByZWFkLnBvcywgcmVhZC5wb3MgKyByZWFkLmxfc2VxIC0gMSk7XG4gIGlmIChjb250YWluZWQpIHtcbiAgICByZXR1cm4gaWR4UmFuZ2UuY29udGFpbnNJbnRlcnZhbChyZWFkUmFuZ2UpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiByZWFkUmFuZ2UuaW50ZXJzZWN0cyhpZHhSYW5nZSk7XG4gIH1cbn1cblxuXG52YXIga01heEZldGNoID0gNjU1MzYgKiAyO1xuXG4vLyBSZWFkIGEgc2luZ2xlIGFsaWdubWVudFxuZnVuY3Rpb24gcmVhZEFsaWdubWVudCh2aWV3OiBqRGF0YVZpZXcsIHBvczogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IFZpcnR1YWxPZmZzZXQsIHJlZk5hbWU6IHN0cmluZyk6IHtyZWFkOiBTYW1SZWFkLCByZWFkTGVuZ3RoOiBudW1iZXIgfSB7XG4gIHZhciByZWFkTGVuZ3RoID0gdmlldy5nZXRJbnQzMihwb3MpO1xuICBwb3MgKz0gNDtcblxuICBpZiAocG9zICsgcmVhZExlbmd0aCA+IHZpZXcuYnl0ZUxlbmd0aCkge1xuICAgIC8vIFdlIGNhbm5vdCByZXBsYWNlIHdpdGggYW4gZXJyb3IgaGVyZSwgYmVjYXVzZSBwcm9taXNlIGRlcGVuZHMgb24gcmVzcG9uc2UuXG4gICAgLy8gJEZsb3dJZ25vcmU6IFRPRE8gcmVtb3ZlIGZsb3cgc3VwcHJlc3Npb24uIFxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIHJlYWRTbGljZSA9IHZpZXcuYnVmZmVyLnNsaWNlKHBvcywgcG9zICsgcmVhZExlbmd0aCk7XG5cbiAgdmFyIHJlYWQgPSBuZXcgU2FtUmVhZChyZWFkU2xpY2UsIG9mZnNldC5jbG9uZSgpLCByZWZOYW1lKTtcbiAgcmV0dXJuIHtcbiAgICByZWFkLFxuICAgIHJlYWRMZW5ndGg6IDQgKyByZWFkTGVuZ3RoXG4gIH07XG59XG5cbi8vIFRoaXMgdHJhY2tzIGhvdyBtYW55IGJ5dGVzIHdlcmUgcmVhZC5cbmZ1bmN0aW9uIHJlYWRBbGlnbm1lbnRzVG9FbmQoYnVmZmVyOiBBcnJheUJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmTmFtZTogc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhSYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVkOiBib29sZWFuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IFZpcnR1YWxPZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrczogSW5mbGF0ZWRCbG9ja1tdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnRzOiBTYW1SZWFkW10pIHtcbiAgLy8gV2UgdXNlIGpEYXRhVmlldyBhbmQgQXJyYXlCdWZmZXIgZGlyZWN0bHkgZm9yIGEgc3BlZWR1cCBvdmVyIGpCaW5hcnkuXG4gIC8vIFRoaXMgcGFyc2VzIHJlYWRzIH4yLTN4IGZhc3RlciB0aGFuIHVzaW5nIFRoaW5BbGlnbm1lbnQgZGlyZWN0bHkuXG4gIHZhciBqdiA9IG5ldyBqRGF0YVZpZXcoYnVmZmVyLCAwLCBidWZmZXIuYnl0ZUxlbmd0aCwgdHJ1ZSAvKiBsaXR0bGUgZW5kaWFuICovKTtcbiAgdmFyIHNob3VsZEFib3J0ID0gZmFsc2U7XG4gIHZhciBwb3MgPSAwO1xuICBvZmZzZXQgPSBvZmZzZXQuY2xvbmUoKTtcbiAgdmFyIGJsb2NrSW5kZXggPSAwO1xuICB0cnkge1xuICAgIHdoaWxlIChwb3MgPCBidWZmZXIuYnl0ZUxlbmd0aCkge1xuICAgICAgdmFyIHJlYWREYXRhID0gcmVhZEFsaWdubWVudChqdiwgcG9zLCBvZmZzZXQsIHJlZk5hbWUpO1xuICAgICAgaWYgKCFyZWFkRGF0YSkgYnJlYWs7XG5cbiAgICAgIHZhciB7cmVhZCwgcmVhZExlbmd0aH0gPSByZWFkRGF0YTtcbiAgICAgIHBvcyArPSByZWFkTGVuZ3RoO1xuICAgICAgaWYgKGlzQWxpZ25tZW50SW5SYW5nZShyZWFkLCBpZHhSYW5nZSwgY29udGFpbmVkKSkge1xuICAgICAgICBhbGlnbm1lbnRzLnB1c2gocmVhZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkdmFuY2UgdGhlIFZpcnR1YWxPZmZzZXQgdG8gcmVmbGVjdCB0aGUgbmV3IHBvc2l0aW9uXG4gICAgICBvZmZzZXQudW9mZnNldCArPSByZWFkTGVuZ3RoO1xuICAgICAgdmFyIGJ1ZkxlbiA9IGJsb2Nrc1tibG9ja0luZGV4XS5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgIGlmIChvZmZzZXQudW9mZnNldCA+PSBidWZMZW4pIHtcbiAgICAgICAgb2Zmc2V0LnVvZmZzZXQgLT0gYnVmTGVuO1xuICAgICAgICBvZmZzZXQuY29mZnNldCArPSBibG9ja3NbYmxvY2tJbmRleF0uY29tcHJlc3NlZExlbmd0aDtcbiAgICAgICAgYmxvY2tJbmRleCsrO1xuICAgICAgfVxuXG4gICAgICAvLyBPcHRpbWl6YXRpb246IGlmIHRoZSBsYXN0IGFsaWdubWVudCBzdGFydGVkIGFmdGVyIHRoZSByZXF1ZXN0ZWQgcmFuZ2UsXG4gICAgICAvLyB0aGVuIG5vIG90aGVyIGNodW5rcyBjYW4gcG9zc2libHkgY29udGFpbiBtYXRjaGluZyBhbGlnbm1lbnRzLlxuICAgICAgLy8gVE9ETzogdXNlIGNvbnRpZ0ludGVydmFsLmlzQWZ0ZXJJbnRlcnZhbCB3aGVuIHRoYXQncyBwb3NzaWJsZS5cbiAgICAgIHZhciByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChyZWFkLnJlZklELCByZWFkLnBvcywgcmVhZC5wb3MgKyAxKTtcbiAgICAgIGlmIChyYW5nZS5jb250aWcgPiBpZHhSYW5nZS5jb250aWcgfHxcbiAgICAgICAgICAocmFuZ2UuY29udGlnID09IGlkeFJhbmdlLmNvbnRpZyAmJiByYW5nZS5zdGFydCgpID4gaWR4UmFuZ2Uuc3RvcCgpKSkge1xuICAgICAgICBzaG91bGRBYm9ydCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBDb2RlIGdldHMgaGVyZSBpZiB0aGUgY29tcHJlc3Npb24gYmxvY2sgZW5kZWQgZXhhY3RseSBhdCB0aGUgZW5kIG9mXG4gICAgLy8gYW4gQWxpZ25tZW50LlxuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gUGFydGlhbCByZWNvcmRcbiAgICBpZiAoIShlIGluc3RhbmNlb2YgUmFuZ2VFcnJvcikpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzaG91bGRBYm9ydCxcbiAgICBuZXh0T2Zmc2V0OiBvZmZzZXRcbiAgfTtcbn1cblxuLy8gRmV0Y2ggYWxpZ25tZW50cyBmcm9tIHRoZSByZW1vdGUgc291cmNlIGF0IHRoZSBsb2NhdGlvbnMgc3BlY2lmaWVkIGJ5IENodW5rcy5cbi8vIFRoaXMgY2FuIHBvdGVudGlhbGx5IHJlc3VsdCBpbiBtYW55IG5ldHdvcmsgcmVxdWVzdHMuXG4vLyBUaGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBmdWxmaWxsZWQgb25jZSBpdCBjYW4gYmUgcHJvdmVkIHRoYXQgbm8gbW9yZVxuLy8gYWxpZ25tZW50cyBuZWVkIHRvIGJlIGZldGNoZWQuXG5mdW5jdGlvbiBmZXRjaEFsaWdubWVudHMocmVtb3RlRmlsZTogUmVtb3RlRmlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICByZWZOYW1lOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgaWR4UmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVkOiBib29sZWFuLFxuICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rczogQ2h1bmtbXSk6IFEuUHJvbWlzZTxTYW1SZWFkW10+IHtcblxuICB2YXIgbnVtUmVxdWVzdHMgPSAwLFxuICAgICAgYWxpZ25tZW50cyA9IFtdLFxuICAgICAgZGVmZXJyZWQgPSBRLmRlZmVyKCk7XG5cbiAgZnVuY3Rpb24gZmV0Y2goY2h1bmtzOiBDaHVua1tdKSB7XG4gICAgaWYgKGNodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoYWxpZ25tZW50cyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTmV2ZXIgZmV0Y2ggbW9yZSB0aGFuIDEyOGsgYXQgYSB0aW1lIC0tIHRoaXMgcmVkdWNlcyBjb250ZW50aW9uIG9uIHRoZVxuICAgIC8vIG1haW4gdGhyZWFkIGFuZCBjYW4gYXZvaWQgc2VuZGluZyB1bm5lY2Vzc2FyeSBieXRlcyBvdmVyIHRoZSBuZXR3b3JrLlxuICAgIHZhciBjaHVuayA9IGNodW5rc1swXSxcbiAgICAgICAgY2h1bmtfYmVnID0gY2h1bmsuY2h1bmtfYmVnLmNvZmZzZXQsXG4gICAgICAgIGNodW5rX2VuZCA9IGNodW5rLmNodW5rX2VuZC5jb2Zmc2V0O1xuICAgIHZhciBieXRlc1RvRmV0Y2ggPSBNYXRoLm1pbihrTWF4RmV0Y2gsIChjaHVua19lbmQgKyA2NTUzNikgLSBjaHVua19iZWcpO1xuICAgIHJlbW90ZUZpbGUuZ2V0Qnl0ZXMoY2h1bmtfYmVnLCBieXRlc1RvRmV0Y2gpLnRoZW4oYnVmZmVyID0+IHtcbiAgICAgIG51bVJlcXVlc3RzKys7XG4gICAgICBkZWZlcnJlZC5ub3RpZnkoe251bVJlcXVlc3RzfSk7XG4gICAgICB2YXIgY2FjaGVLZXkgPSB7XG4gICAgICAgIGZpbGVuYW1lOiByZW1vdGVGaWxlLnVybCxcbiAgICAgICAgaW5pdGlhbE9mZnNldDogY2h1bmtfYmVnXG4gICAgICB9O1xuICAgICAgdmFyIGJsb2NrcyA9IHV0aWxzLmluZmxhdGVDb25jYXRlbmF0ZWRHemlwKGJ1ZmZlciwgY2h1bmtfZW5kIC0gY2h1bmtfYmVnLCBjYWNoZUtleSk7XG5cbiAgICAgIC8vIElmIHRoZSBjaHVuayBoYXNuJ3QgYmVlbiBleGhhdXN0ZWQsIHJlc3VtZSBpdCBhdCBhbiBhcHByb3ByaWF0ZSBwbGFjZS5cbiAgICAgIC8vIFRoZSBsYXN0IGJsb2NrIG5lZWRzIHRvIGJlIHJlLXJlYWQsIHNpbmNlIGl0IG1heSBub3QgaGF2ZSBiZWVuIGV4aGF1c3RlZC5cbiAgICAgIHZhciBsYXN0QmxvY2sgPSBibG9ja3NbYmxvY2tzLmxlbmd0aCAtIDFdLFxuICAgICAgICAgIGxhc3RCeXRlID0gY2h1bmtfYmVnICsgbGFzdEJsb2NrLm9mZnNldCAtIDEsXG4gICAgICAgICAgbmV3Q2h1bmsgPSBudWxsO1xuICAgICAgaWYgKGJsb2Nrcy5sZW5ndGggPiAxICYmIGxhc3RCeXRlIDwgY2h1bmtfZW5kKSB7XG4gICAgICAgIG5ld0NodW5rID0ge1xuICAgICAgICAgIGNodW5rX2JlZzogbmV3IFZpcnR1YWxPZmZzZXQobGFzdEJ5dGUgKyAxLCAwKSxcbiAgICAgICAgICBjaHVua19lbmQ6IGNodW5rLmNodW5rX2VuZFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB2YXIgYnVmZmVycyA9IGJsb2Nrcy5tYXAoeCA9PiB4LmJ1ZmZlcik7XG4gICAgICBidWZmZXJzWzBdID0gYnVmZmVyc1swXS5zbGljZShjaHVuay5jaHVua19iZWcudW9mZnNldCk7XG4gICAgICB2YXIgZGVjb21wID0gdXRpbHMuY29uY2F0QXJyYXlCdWZmZXJzKGJ1ZmZlcnMpO1xuICAgICAgaWYgKGRlY29tcC5ieXRlTGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIge3Nob3VsZEFib3J0LCBuZXh0T2Zmc2V0fSA9XG4gICAgICAgICAgICByZWFkQWxpZ25tZW50c1RvRW5kKGRlY29tcCwgcmVmTmFtZSwgaWR4UmFuZ2UsIGNvbnRhaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuY2h1bmtfYmVnLCBibG9ja3MsIGFsaWdubWVudHMpO1xuICAgICAgICBpZiAoc2hvdWxkQWJvcnQpIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGFsaWdubWVudHMpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3Q2h1bmspIHtcbiAgICAgICAgICBuZXdDaHVuay5jaHVua19iZWcgPSBuZXh0T2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdDaHVuayA9IG51bGw7ICAvLyBUaGlzIGlzIG1vc3QgbGlrZWx5IEVPRlxuICAgICAgfVxuICAgICAgZmV0Y2goKG5ld0NodW5rICE9PSBudWxsID8gW25ld0NodW5rXSA6IFtdKS5jb25jYXQoXy5yZXN0KGNodW5rcykpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZldGNoKGNodW5rcyk7XG4gIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG4gXG5jbGFzcyBCYW0ge1xuICBpbmRleDogP0JhaUZpbGU7XG4gIGhlYWRlcjogUS5Qcm9taXNlPE9iamVjdD47XG4gIHJlbW90ZUZpbGU6IFJlbW90ZUZpbGU7XG4gIGhhc0luZGV4Q2h1bmtzOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKHJlbW90ZUZpbGU6IFJlbW90ZUZpbGUsXG4gICAgICAgICAgICAgIHJlbW90ZUluZGV4RmlsZT86IFJlbW90ZUZpbGUsXG4gICAgICAgICAgICAgIGluZGV4Q2h1bmtzPzogT2JqZWN0KSB7XG4gICAgdGhpcy5yZW1vdGVGaWxlID0gcmVtb3RlRmlsZTtcbiAgICB0aGlzLmluZGV4ID0gcmVtb3RlSW5kZXhGaWxlID8gbmV3IEJhaUZpbGUocmVtb3RlSW5kZXhGaWxlLCBpbmRleENodW5rcykgOiBudWxsO1xuICAgIHRoaXMuaGFzSW5kZXhDaHVua3MgPSAhIWluZGV4Q2h1bmtzO1xuXG4gICAgdmFyIHNpemVQcm9taXNlID0gdGhpcy5pbmRleCA/IHRoaXMuaW5kZXguZ2V0SGVhZGVyU2l6ZSgpIDogUS53aGVuKDIgKiA2NTUzNSk7XG4gICAgdGhpcy5oZWFkZXIgPSBzaXplUHJvbWlzZS50aGVuKHNpemUgPT4ge1xuICAgICAgdmFyIGRlZiA9IFEuZGVmZXIoKTtcbiAgICAgIC8vIFRoaXMgaGFwcGVucyBpbiB0aGUgbmV4dCBldmVudCBsb29wIHRvIGdpdmUgbGlzdGVuZXJzIGEgY2hhbmNlIHRvIHJlZ2lzdGVyLlxuICAgICAgUS53aGVuKCkudGhlbigoKSA9PiB7IGRlZi5ub3RpZnkoe3N0YXR1czogJ0ZldGNoaW5nIEJBTSBoZWFkZXInfSk7IH0pO1xuICAgICAgdXRpbHMucGlwZVByb21pc2UoXG4gICAgICAgICAgZGVmLFxuICAgICAgICAgIHRoaXMucmVtb3RlRmlsZS5nZXRCeXRlcygwLCBzaXplKS50aGVuKGJ1ZiA9PiB7XG4gICAgICAgICAgICB2YXIgZGVjb21wID0gdXRpbHMuaW5mbGF0ZUd6aXAoYnVmKTtcbiAgICAgICAgICAgIHZhciBqYiA9IG5ldyBqQmluYXJ5KGRlY29tcCwgYmFtVHlwZXMuVFlQRV9TRVQpO1xuICAgICAgICAgICAgcmV0dXJuIGpiLnJlYWQoJ0JhbUhlYWRlcicpO1xuICAgICAgICAgIH0pKTtcbiAgICAgIHJldHVybiBkZWYucHJvbWlzZTtcbiAgICB9KTtcbiAgICB0aGlzLmhlYWRlci5kb25lKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgdGhlIGVudGlyZSBCQU0gZmlsZSBmcm9tIHRoZSByZW1vdGUgc291cmNlIGFuZCBwYXJzZXMgaXQuXG4gICAqIFNpbmNlIEJBTSBmaWxlcyBjYW4gYmUgZW5vcm1vdXMgKGh1bmRyZWRzIG9mIEdCKSwgdGhpcyBpcyBvbmx5IHJlY29tbWVuZGVkXG4gICAqIGZvciBzbWFsbCB0ZXN0IGlucHV0cy5cbiAgICovXG4gIHJlYWRBbGwoKTogUS5Qcm9taXNlPE9iamVjdD4ge1xuICAgIHJldHVybiB0aGlzLnJlbW90ZUZpbGUuZ2V0QWxsKCkudGhlbihidWYgPT4ge1xuICAgICAgdmFyIGRlY29tcCA9IHV0aWxzLmluZmxhdGVHemlwKGJ1Zik7XG4gICAgICB2YXIgamIgPSBuZXcgakJpbmFyeShkZWNvbXAsIGJhbVR5cGVzLlRZUEVfU0VUKTtcbiAgICAgIHZhciBvID0gamIucmVhZCgnQmFtRmlsZScpO1xuICAgICAgLy8gRG8gc29tZSBtaWxkIHJlLXNoYXBpbmcuXG4gICAgICB2YXIgdm8gPSBuZXcgVmlydHVhbE9mZnNldCgwLCAwKTtcbiAgICAgIHZhciBzbGljZSA9IGZ1bmN0aW9uKHU4OiBVaW50OEFycmF5KSB7XG4gICAgICAgIHJldHVybiB1OC5idWZmZXIuc2xpY2UodTguYnl0ZU9mZnNldCwgdTguYnl0ZU9mZnNldCArIHU4LmJ5dGVMZW5ndGggLSAxKTtcbiAgICAgIH07XG4gICAgICBvLmFsaWdubWVudHMgPSBvLmFsaWdubWVudHMubWFwKHggPT4ge1xuICAgICAgICB2YXIgciA9IG5ldyBTYW1SZWFkKHNsaWNlKHguY29udGVudHMpLCB2bywgJycpO1xuICAgICAgICBpZiAoci5yZWZJRCAhPSAtMSkge1xuICAgICAgICAgIHIucmVmID0gby5oZWFkZXIucmVmZXJlbmNlc1tyLnJlZklEXS5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbztcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhIHNpbmdsZSByZWFkIGF0IHRoZSBnaXZlbiBWaXJ0dWFsT2Zmc2V0LlxuICAgKiBUaGlzIGlzIGluc2FuZWx5IGluZWZmaWNpZW50IGFuZCBzaG91bGQgbm90IGJlIHVzZWQgb3V0c2lkZSBvZiB0ZXN0aW5nLlxuICAgKi9cbiAgcmVhZEF0T2Zmc2V0KG9mZnNldDogVmlydHVhbE9mZnNldCk6IFEuUHJvbWlzZTxTYW1SZWFkPiB7XG4gICAgdmFyIHJlYWRQcm9taXNlOiBRLlByb21pc2U8U2FtUmVhZD4gPSB0aGlzLnJlbW90ZUZpbGUuZ2V0Qnl0ZXMob2Zmc2V0LmNvZmZzZXQsIGtNYXhGZXRjaCkudGhlbihnemlwID0+IHtcbiAgICAgIHZhciBidWY6IEFycmF5QnVmZmVyID0gdXRpbHMuaW5mbGF0ZUd6aXAoZ3ppcCk7XG4gICAgICB2YXIganYgPSBuZXcgakRhdGFWaWV3KGJ1ZiwgMCwgYnVmLmJ5dGVMZW5ndGgsIHRydWUgLyogbGl0dGxlIGVuZGlhbiAqLyk7XG4gICAgICB2YXIgcmVhZERhdGEgPSByZWFkQWxpZ25tZW50KGp2LCBvZmZzZXQudW9mZnNldCwgb2Zmc2V0LCAnJyk7XG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgaHVtYW4tcmVhZGFibGUgcmVmIG5hbWVcbiAgICAgIHZhciByZWFkOiBTYW1SZWFkID0gcmVhZERhdGEucmVhZDtcbiAgICAgIHJldHVybiByZWFkO1xuICAgIH0pO1xuXG5cbiAgICByZXR1cm4gUS5hbGwoW3JlYWRQcm9taXNlLCB0aGlzLmhlYWRlcl0pXG4gICAgLnRoZW4oKFtyZWFkLCBoZWFkZXJdKSA9PiB7XG4gICAgICByZWFkLnJlZiA9IGhlYWRlci5yZWZlcmVuY2VzW3JlYWQucmVmSURdLm5hbWU7XG4gICAgICByZXR1cm4gcmVhZDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXAgYSBjb250aWcgbmFtZSB0byBhIGNvbnRpZyBpbmRleCBhbmQgY2Fub25pY2FsIG5hbWUuXG4gICAqL1xuICBnZXRDb250aWdJbmRleChjb250aWdOYW1lOiBzdHJpbmcpOiBRLlByb21pc2U8e2lkeDogbnVtYmVyOyBuYW1lOiBzdHJpbmd9PiB7XG4gICAgcmV0dXJuIHRoaXMuaGVhZGVyLnRoZW4oaGVhZGVyID0+IHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVhZGVyLnJlZmVyZW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5hbWUgPSBoZWFkZXIucmVmZXJlbmNlc1tpXS5uYW1lO1xuICAgICAgICBpZiAobmFtZSA9PSBjb250aWdOYW1lIHx8XG4gICAgICAgICAgICBuYW1lID09ICdjaHInICsgY29udGlnTmFtZSB8fFxuICAgICAgICAgICAgJ2NocicgKyBuYW1lID09IGNvbnRpZ05hbWUpIHtcbiAgICAgICAgICByZXR1cm4ge2lkeDogaSwgbmFtZTogbmFtZX07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IGBJbnZhbGlkIGNvbnRpZyBuYW1lOiAke2NvbnRpZ05hbWV9YDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhbGwgdGhlIGFsaWdubWVudHMgd2hpY2ggb3ZlcmxhcCBhIHJhbmdlLlxuICAgKiBUaGUgJ2NvbnRhaW5lZCcgcGFyYW1ldGVyIGNvbnRyb2xzIHdoZXRoZXIgdGhlIGFsaWdubWVudHMgbXVzdCBiZSBmdWxseVxuICAgKiBjb250YWluZWQgd2l0aGluIHRoZSByYW5nZSwgb3IgbmVlZCBvbmx5IG92ZXJsYXAgaXQuXG4gICAqL1xuICBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sIG9wdF9jb250YWluZWQ/OiBib29sZWFuKTogUS5Qcm9taXNlPFNhbVJlYWRbXT4ge1xuICAgIHZhciBjb250YWluZWQgPSBvcHRfY29udGFpbmVkIHx8IGZhbHNlO1xuICAgIGlmICghdGhpcy5pbmRleCkge1xuICAgICAgdGhyb3cgJ1JhbmdlIHNlYXJjaGVzIGFyZSBvbmx5IHN1cHBvcnRlZCBvbiBCQU1zIHdpdGggQkFJIGluZGljZXMuJztcbiAgICB9XG4gICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleDtcblxuICAgIHJldHVybiB0aGlzLmdldENvbnRpZ0luZGV4KHJhbmdlLmNvbnRpZykudGhlbigoe2lkeCwgbmFtZX0pID0+IHtcbiAgICAgIHZhciBkZWY6IFEuRGVmZXJyZWQ8U2FtUmVhZFtdPiA9IFEuZGVmZXIoKTtcbiAgICAgIC8vIFRoaXMgaGFwcGVucyBpbiB0aGUgbmV4dCBldmVudCBsb29wIHRvIGdpdmUgbGlzdGVuZXJzIGEgY2hhbmNlIHRvIHJlZ2lzdGVyLlxuICAgICAgUS53aGVuKCkudGhlbigoKSA9PiB7IGRlZi5ub3RpZnkoe3N0YXR1czogJ0ZldGNoaW5nIEJBTSBpbmRleCd9KTsgfSk7XG5cbiAgICAgIHZhciBpZHhSYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChpZHgsIHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSk7XG5cbiAgICAgIHZhciBwcm9taXNlOiBRLlByb21pc2U8U2FtUmVhZFtdPiA9IGluZGV4LmdldENodW5rc0ZvckludGVydmFsKGlkeFJhbmdlKS50aGVuKGNodW5rcyA9PiB7XG4gICAgICAgICAgcmV0dXJuIGZldGNoQWxpZ25tZW50cyh0aGlzLnJlbW90ZUZpbGUsIG5hbWUsIGlkeFJhbmdlLCBjb250YWluZWQsIGNodW5rcyk7XG4gICAgICAgIH0pLnRoZW4oc2FtUmVhZHMgPT4ge1xuICAgICAgICAgIHJldHVybiBzYW1SZWFkcztcbiAgICAgICAgfSk7XG5cbiAgICAgIHV0aWxzLnBpcGVQcm9taXNlKGRlZiwgcHJvbWlzZSk7XG4gICAgICAgIFxuICAgICAgcmV0dXJuIGRlZi5wcm9taXNlO1xuICAgIH0pO1xuICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBCYW07XG4iLCIvKiBAZmxvdyAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5cbmNsYXNzIENvZGluZ0ludGVydmFsIGV4dGVuZHMgSW50ZXJ2YWwge1xuICBpc0NvZGluZzogYm9vbGVhbjtcbiAgY29uc3RydWN0b3Ioc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyLCBpc0NvZGluZzogYm9vbGVhbikge1xuICAgIHN1cGVyKHN0YXJ0LCBzdG9wKTtcbiAgICB0aGlzLmlzQ29kaW5nID0gaXNDb2Rpbmc7XG4gIH1cbn1cblxuLyoqXG4gKiBTcGxpdCBleG9ucyB3aGljaCBjcm9zcyB0aGUgY29kaW5nL25vbi1jb2RpbmcgYm91bmRhcnkgaW50byBwdXJlbHkgY29kaW5nICZcbiAqIG5vbi1jb2RpbmcgcGFydHMuXG4gKi9cbmZ1bmN0aW9uIHNwbGl0Q29kaW5nRXhvbnMoZXhvbnM6IEludGVydmFsW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGluZ1JlZ2lvbjogSW50ZXJ2YWwpOiBDb2RpbmdJbnRlcnZhbFtdIHtcbiAgcmV0dXJuIF8uZmxhdHRlbihleG9ucy5tYXAoZXhvbiA9PiB7XG4gICAgLy8gU3BlY2lhbCBjYXNlOiB0aGUgY29kaW5nIHJlZ2lvbiBpcyBlbnRpcmVseSBjb250YWluZWQgYnkgdGhpcyBleG9uLlxuICAgIGlmIChleG9uLmNvbnRhaW5zSW50ZXJ2YWwoY29kaW5nUmVnaW9uKSkge1xuICAgICAgLy8gc3BsaXQgaW50byB0aHJlZSBwYXJ0cy5cbiAgICAgIHJldHVybiBbXG4gICAgICAgICAgbmV3IENvZGluZ0ludGVydmFsKGV4b24uc3RhcnQsIGNvZGluZ1JlZ2lvbi5zdGFydCAtIDEsIGZhbHNlKSxcbiAgICAgICAgICBuZXcgQ29kaW5nSW50ZXJ2YWwoY29kaW5nUmVnaW9uLnN0YXJ0LCBjb2RpbmdSZWdpb24uc3RvcCwgdHJ1ZSksXG4gICAgICAgICAgbmV3IENvZGluZ0ludGVydmFsKGNvZGluZ1JlZ2lvbi5zdG9wICsgMSwgZXhvbi5zdG9wLCBmYWxzZSlcbiAgICAgIF0uZmlsdGVyKGludGVydmFsID0+IGludGVydmFsLnN0YXJ0IDw9IGludGVydmFsLnN0b3ApO1xuICAgIH1cblxuICAgIHZhciBzdGFydElzQ29kaW5nID0gY29kaW5nUmVnaW9uLmNvbnRhaW5zKGV4b24uc3RhcnQpLFxuICAgICAgICBzdG9wSXNDb2RpbmcgPSBjb2RpbmdSZWdpb24uY29udGFpbnMoZXhvbi5zdG9wKTtcbiAgICBpZiAoc3RhcnRJc0NvZGluZyA9PSBzdG9wSXNDb2RpbmcpIHtcbiAgICAgIHJldHVybiBbbmV3IENvZGluZ0ludGVydmFsKGV4b24uc3RhcnQsIGV4b24uc3RvcCwgc3RhcnRJc0NvZGluZyldO1xuICAgIH0gZWxzZSBpZiAoc3RhcnRJc0NvZGluZykge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgbmV3IENvZGluZ0ludGVydmFsKGV4b24uc3RhcnQsIGNvZGluZ1JlZ2lvbi5zdG9wLCB0cnVlKSxcbiAgICAgICAgbmV3IENvZGluZ0ludGVydmFsKGNvZGluZ1JlZ2lvbi5zdG9wICsgMSwgZXhvbi5zdG9wLCBmYWxzZSlcbiAgICAgIF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChleG9uLnN0YXJ0LCBjb2RpbmdSZWdpb24uc3RhcnQgLSAxLCBmYWxzZSksXG4gICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChjb2RpbmdSZWdpb24uc3RhcnQsIGV4b24uc3RvcCwgdHJ1ZSlcbiAgICAgIF07XG4gICAgfVxuICB9KSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge3NwbGl0Q29kaW5nRXhvbnMsIENvZGluZ0ludGVydmFsfTtcbiIsIi8qKlxuICogQ2xhc3MgZm9yIHBhcnNpbmcgZmVhdHVyZXMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgdHlwZSB7Q292ZXJhZ2VDb3VudH0gZnJvbSAnLi4vdml6L3BpbGV1cHV0aWxzJztcblxuY2xhc3MgRmVhdHVyZSB7XG4gIGlkOiBzdHJpbmc7XG4gIGZlYXR1cmVUeXBlOiBzdHJpbmc7XG4gIHBvc2l0aW9uOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+O1xuICBzY29yZTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGZlYXR1cmU6IE9iamVjdCkge1xuICAgIHRoaXMuaWQgPSBmZWF0dXJlLmlkO1xuICAgIHRoaXMuZmVhdHVyZVR5cGUgPSBmZWF0dXJlLmZlYXR1cmVUeXBlO1xuICAgIHRoaXMucG9zaXRpb24gPSBmZWF0dXJlLnBvc2l0aW9uO1xuICAgIHRoaXMuc2NvcmUgPSBmZWF0dXJlLnNjb3JlO1xuICB9XG5cbiAgZ2V0S2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuaWQ7XG4gIH1cblxuICBnZXRJbnRlcnZhbCgpOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5wb3NpdGlvbjtcbiAgfVxuXG4gIGdldENvdmVyYWdlKHJlZmVyZW5jZVNvdXJjZTogT2JqZWN0KTogQ292ZXJhZ2VDb3VudCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJhbmdlOiB0aGlzLmdldEludGVydmFsKCksXG4gICAgICBvcEluZm86IG51bGxcbiAgICB9O1xuICB9XG5cblxuICBzdGF0aWMgZnJvbUdBNEdIKGdhNGdoRmVhdHVyZTogT2JqZWN0KTogRmVhdHVyZSB7XG4gICAgdmFyIHBvc2l0aW9uID0gbmV3IENvbnRpZ0ludGVydmFsKGdhNGdoRmVhdHVyZS5yZWZlcmVuY2VOYW1lLCBwYXJzZUludChnYTRnaEZlYXR1cmUuc3RhcnQpLCBwYXJzZUludChnYTRnaEZlYXR1cmUuZW5kKSk7XG4gICAgcmV0dXJuIG5ldyBGZWF0dXJlKFxuICAgIHtcbiAgICAgIGlkOiBnYTRnaEZlYXR1cmUuaWQsXG4gICAgICBmZWF0dXJlVHlwZTogZ2E0Z2hGZWF0dXJlLmZlYXR1cmVUeXBlLFxuICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgc2NvcmU6IDEwMDBcbiAgICB9KTtcbiAgfVxuXG4gIGludGVyc2VjdHMocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gcmFuZ2UuaW50ZXJzZWN0cyh0aGlzLnBvc2l0aW9uKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZlYXR1cmU7XG4iLCIvKipcbiAqIEJpbmFyeSBmb3JtYXRzIGZvciBCQU0gZmlsZXMuXG4gKiBTZWUgaHR0cHM6Ly9zYW10b29scy5naXRodWIuaW8vaHRzLXNwZWNzL1NBTXYxLnBkZlxuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBqQmluYXJ5IGZyb20gJ2piaW5hcnknO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmltcG9ydCBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4uL1ZpcnR1YWxPZmZzZXQnO1xuaW1wb3J0IHtudWxsU3RyaW5nLCB1aW50NjRuYXRpdmV9IGZyb20gJy4vaGVscGVycyc7XG5cbnZhciBTRVFVRU5DRV9WQUxVRVMgPSBbJz0nLCAnQScsICdDJywgJ00nLCAnRycsICdSJywgJ1MnLCAnVicsICdUJywgJ1cnLCAnWScsICdIJywgJ0snLCAnRCcsICdCJywgJ04nXTtcbnZhciBDSUdBUl9PUFMgPSBbJ00nLCAnSScsICdEJywgJ04nLCAnUycsICdIJywgJ1AnLCAnPScsICdYJ107XG5cblxuLy8gQ29yZSBhbGlnbm1lbnQgZmllbGRzIHNoYXJlZCBiZXR3ZWVuIEJhbUFsaWdubWVudCBhbmQgVGhpbkJhbUFsaWdubWVudC5cbi8vIFRPRE86IGZpZ3VyZSBvdXQgd2h5IGpCaW5hcnkncyAnZXh0ZW5kJyB0eXBlIGRvZXNuJ3Qgd29yayB3aXRoIHRoaXMgaW4gVFlQRV9TRVQuXG52YXIgVGhpbkFsaWdubWVudCA9IHtcbiAgcmVmSUQ6ICdpbnQzMicsICAgICAgICAvLyAwXG4gIHBvczogJ2ludDMyJywgICAgICAgICAgLy8gNFxuICBsX3JlYWRfbmFtZTogJ3VpbnQ4JywgIC8vIDhcbiAgTUFQUTogJ3VpbnQ4JywgICAgICAgICAvLyA5XG4gIGJpbjogJ3VpbnQxNicsICAgICAgICAgLy8gMTBcbiAgbl9jaWdhcl9vcDogJ3VpbnQxNicsICAvLyAxMlxuICBGTEFHOiAndWludDE2JywgICAgICAgIC8vIDE0XG4gIGxfc2VxOiAnaW50MzInLCAgICAgICAgLy8gMTZcbiAgbmV4dF9yZWZJRDogJ2ludDMyJywgICAvLyAyMFxuICBuZXh0X3BvczogJ2ludDMyJywgICAgIC8vIDI0XG4gIHRsZW46ICdpbnQzMicgICAgICAgICAgLy8gMjhcbiAgLy8gbGVuZ3RoIG9mIGZpeGVkLXNpemUgaGVhZGVyID0gMzIgYnl0ZXNcbn07XG5cbnZhciBGbGFncyA9IHtcbiAgUkVBRF9QQUlSRUQ6IDB4MSxcbiAgUFJPUEVSX1BBSVI6IDB4MixcbiAgUkVBRF9VTk1BUFBFRDogMHg0LFxuICBNQVRFX1VOTUFQUEVEOiAweDgsXG4gIFJFQURfU1RSQU5EOiAweDEwLFxuICBNQVRFX1NUUkFORDogMHgyMCxcbiAgRklSU1RfT0ZfUEFJUjogMHg0MCxcbiAgU0VDT05EX09GX1BBSVI6IDB4ODAsXG4gIE5PVF9QUklNQVJZX0FMSUdOTUVOVDogMHgxMDAsXG4gIFJFQURfRkFJTFNfVkVORE9SX1FVQUxJVFlfQ0hFQ0s6IDB4MjAwLFxuICBEVVBMSUNBVEVfUkVBRDogMHg0MDAsXG4gIFNVUFBMRU1FTlRBUllfQUxJR05NRU5UOiAweDgwMFxufTtcblxudmFyIFRoaWNrQWxpZ25tZW50ID0gXy5leHRlbmQoXy5jbG9uZShUaGluQWxpZ25tZW50KSwge1xuICByZWFkX25hbWU6IFtudWxsU3RyaW5nLCAnbF9yZWFkX25hbWUnXSxcbiAgY2lnYXI6IFsnYXJyYXknLCAnQ2lnYXJPcCcsICduX2NpZ2FyX29wJ10sXG4gIHNlcTogWydGb3VyQml0U2VxdWVuY2UnLCAnbF9zZXEnXSxcbiAgcXVhbDogWydhcnJheScsICd1aW50OCcsICdsX3NlcSddLCAgLy8gMjU1ID0gdW5rbm93blxuICBhdXhpbGlhcnk6IFsnYXJyYXknLCB7XG4gICAgdGFnOiBbJ3N0cmluZycsIDJdLFxuICAgIHZhbF90eXBlOiAnY2hhcicsXG4gICAgdmFsdWU6IFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdCJywge1xuICAgICAgICAgICAgIHZhbF90eXBlOiAnY2hhcicsXG4gICAgICAgICAgICAgbnVtX3ZhbHVlczogJ2ludDMyJyxcbiAgICAgICAgICAgICB2YWx1ZXM6IFsnYXJyYXknLCAnQXV4aWxpYXJ5VmFsdWUnLCAnbnVtX3ZhbHVlcyddXG4gICAgICAgICAgICB9LCAnQXV4aWxpYXJ5VmFsdWUnXVxuICB9XSAgLy8gZ29lcyB1bnRpbCB0aGUgZW5kIG9mIHRoZSBibG9ja1xufSk7XG5cbnZhciBUWVBFX1NFVDogYW55ID0ge1xuICAnakJpbmFyeS5saXR0bGVFbmRpYW4nOiB0cnVlLFxuXG4gICdCYW1IZWFkZXInOiB7XG4gICAgX21hZ2ljOiBbJ2NvbnN0JywgWydzdHJpbmcnLCA0XSwgJ0JBTVxcdTAwMDEnLCB0cnVlXSxcbiAgICBsX3RleHQ6ICdpbnQzMicsXG4gICAgdGV4dDogWydzdHJpbmcnLCAnbF90ZXh0J10sXG4gICAgbl9yZWY6ICdpbnQzMicsXG4gICAgcmVmZXJlbmNlczogWydhcnJheScsIHtcbiAgICAgIGxfbmFtZTogJ2ludDMyJyxcbiAgICAgIG5hbWU6IFtudWxsU3RyaW5nLCAnbF9uYW1lJ10sXG4gICAgICBsX3JlZjogJ2ludDMyJ1xuICAgIH0sICduX3JlZiddXG4gIH0sXG5cbiAgJ0JhbUFsaWdubWVudCc6IHtcbiAgICBibG9ja19zaXplOiAnaW50MzInLFxuICAgIGNvbnRlbnRzOiBbJ2Jsb2InLCAnYmxvY2tfc2l6ZSddXG4gIH0sXG5cbiAgLy8gVE9ETzogbWFrZSBhIFwiY2FzZVwiIGNvbnN0cnVjdCBmb3IgakJpbmFyeSAmIGltcGxlbWVudCB0aGUgcmVzdCBvZiB0aGVzZS5cbiAgJ0F1eGlsaWFyeVZhbHVlJzpcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnQScsICdjaGFyJyxcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnYycsICdpbnQ4JyxcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnQycsICd1aW50OCcsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ3MnLCAnaW50MTYnLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdTJywgJ3VpbnQxNicsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ2knLCAnaW50MzInLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdJJywgJ3VpbnQzMicsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ2YnLCAnZmxvYXQzMicsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ1onLCAnc3RyaW5nMCcsXG4gICAgLy8gVE9ETzogJ0gnID0gYnl0ZSBhcnJheSBpbiBoZXggZm9ybWF0XG4gICAgWydza2lwJywgMF1dXV1dXV1dXSxcbiAgXSxcblxuICAvLyBcIkNJR0FSOiBvcCBsZW48PDR8b3AuIOKAmE1JRE5TSFA9WOKAmeKGkuKAmDAxMjM0NTY3OOKAmVwiXG4gIC8vIFRPRE86IGl0IG1heSBiZSBwb3NzaWJsZSB0byByZWFkIHRoaXMgZGVjbGFyYXRpdmVseSB3aXRoIGEgYml0ZmllbGQgdHlwZS5cbiAgJ0NpZ2FyT3AnOiBqQmluYXJ5LlRlbXBsYXRlKHtcbiAgICBiYXNlVHlwZTogJ3VpbnQzMicsXG4gICAgcmVhZChjb250ZXh0KSB7XG4gICAgICB2YXIgdiA9IHRoaXMuYmFzZVJlYWQoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxlbmd0aDogdiA+PiA0LFxuICAgICAgICBvcDogQ0lHQVJfT1BTW3YgJiAweGZdXG4gICAgICB9O1xuICAgIH1cbiAgfSksXG5cbiAgLy8gXCI0LWJpdCBlbmNvZGVkIHJlYWQ6IOKAmD1BQ01HUlNWVFdZSEtEQk7igJnihpIgWzAsIDE1XTsgb3RoZXIgY2hhcmFjdGVycyBtYXBwZWRcbiAgLy8gdG8g4oCYTuKAmTsgaGlnaCBueWJibGUgZmlyc3QgKDFzdCBiYXNlIGluIHRoZSBoaWdoZXN0IDQtYml0IG9mIHRoZSAxc3QgYnl0ZSlcIlxuICAnRm91ckJpdFNlcXVlbmNlJzogakJpbmFyeS5UZW1wbGF0ZSh7XG4gICAgc2V0UGFyYW1zKGxlbmd0aEZpZWxkKSB7XG4gICAgICB0aGlzLmxlbmd0aEZpZWxkID0gbGVuZ3RoRmllbGQ7XG4gICAgICB2YXIgbnVtQnl0ZXMgPSBjdHggPT4gTWF0aC5mbG9vcigoK2N0eFtsZW5ndGhGaWVsZF0gKyAxKSAvIDIpO1xuICAgICAgdGhpcy5iYXNlVHlwZSA9IFsnYXJyYXknLCAndWludDgnLCBudW1CeXRlc107XG4gICAgfSxcbiAgICByZWFkKGN0eCkge1xuICAgICAgdmFyIG51bUJhc2VzID0gK2N0eFt0aGlzLmxlbmd0aEZpZWxkXTtcbiAgICAgIHZhciB2YWxzID0gdGhpcy5iYXNlUmVhZCgpO1xuICAgICAgcmV0dXJuIHZhbHMubWFwKChiLCBpKSA9PiB7XG4gICAgICAgIHJldHVybiBTRVFVRU5DRV9WQUxVRVNbYiA+PiA0XSArXG4gICAgICAgICAgICAgICAoMiAqIGkgKyAxIDwgbnVtQmFzZXMgPyBTRVFVRU5DRV9WQUxVRVNbYiAmIDB4Zl0gOiAnJyk7XG4gICAgICB9KS5qb2luKCcnKTtcbiAgICB9XG4gIH0pLFxuXG4gICdCYW1GaWxlJzoge1xuICAgIGhlYWRlcjogJ0JhbUhlYWRlcicsXG4gICAgYWxpZ25tZW50czogWydhcnJheScsICdCYW1BbGlnbm1lbnQnXVxuICB9LFxuXG4gIC8vIEJBSSBpbmRleCBmb3JtYXRzXG4gIC8vIFNlZSBodHRwczovL3NhbXRvb2xzLmdpdGh1Yi5pby9odHMtc3BlY3MvU0FNdjEucGRmXG4gICdWaXJ0dWFsT2Zmc2V0JzogakJpbmFyeS5UZW1wbGF0ZSh7XG4gICAgYmFzZVR5cGU6ICd1aW50NjQnLFxuICAgIHJlYWQoKSB7XG4gICAgICAvLyBRdW90aCBIZW5nIExpOiB1NjQgPSBjb2Zmc2V0PDwxNnx1b2Zmc2V0XG4gICAgICB2YXIgdTY0ID0gdGhpcy5iYXNlUmVhZCgpO1xuICAgICAgcmV0dXJuIG5ldyBWaXJ0dWFsT2Zmc2V0KFxuICAgICAgICAvLyBvZmZzZXQgb2YgYmVnaW5uaW5nIG9mIGd6aXAgYmxvY2sgaW4gdGhlIGNvbXByZXNzZWQgZmlsZS5cbiAgICAgICAgdTY0LmhpICogNjU1MzYgKyAodTY0LmxvID4+PiAxNiksXG4gICAgICAgIC8vIG9mZnNldCBvZiBkYXRhIHdpdGhpbiB0aGUgZGVjb21wcmVzc2VkIGJsb2NrXG4gICAgICAgIHU2NC5sbyAmIDB4ZmZmZlxuICAgICAgKTtcbiAgICB9XG4gIH0pLFxuXG4gICdDaHVua3NBcnJheSc6IFsnYXJyYXknLCB7XG4gICAgY2h1bmtfYmVnOiAnVmlydHVhbE9mZnNldCcsXG4gICAgY2h1bmtfZW5kOiAnVmlydHVhbE9mZnNldCdcbiAgfV0sXG5cbiAgJ0ludGVydmFsc0FycmF5JzogWydhcnJheScsICdWaXJ0dWFsT2Zmc2V0J10sXG5cbiAgJ0JhaUluZGV4Jzoge1xuICAgIG5fYmluOiAnaW50MzInLFxuICAgIGJpbnM6IFsnYXJyYXknLCB7XG4gICAgICBiaW46ICd1aW50MzInLFxuICAgICAgbl9jaHVuazogJ2ludDMyJyxcbiAgICAgIGNodW5rczogWydibG9iJywgY3R4ID0+IDE2ICogY3R4Lm5fY2h1bmtdLFxuICAgICAgLy8gUGFyc2luZyBpcyBkZWZlcnJlZCBhcyBhIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbi4gVGhlIHR5cGUgaXMgcmVhbGx5OlxuICAgICAgLy8gY2h1bmtzOiBbJ2FycmF5Jywge1xuICAgICAgLy8gICBjaHVua19iZWc6ICdWaXJ0dWFsT2Zmc2V0JyxcbiAgICAgIC8vICAgY2h1bmtfZW5kOiAnVmlydHVhbE9mZnNldCdcbiAgICAgIC8vIH0sICduX2NodW5rJ11cbiAgICB9LCAnbl9iaW4nXSxcbiAgICBuX2ludHY6ICdpbnQzMicsXG4gICAgaW50ZXJ2YWxzOiBbJ2Jsb2InLCBjdHggPT4gOCAqIGN0eC5uX2ludHZdXG4gICAgLy8gUGFyc2luZyBpcyBkZWZlcnJlZCBhcyBhIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbi4gVGhlIHR5cGUgaXMgcmVhbGx5OlxuICAgIC8vIGludGVydmFsczogWydhcnJheScsICdWaXJ0dWFsT2Zmc2V0JywgJ25faW50diddXG4gIH0sXG5cbiAgJ0JhaUZpbGUnOiB7XG4gICAgbWFnaWM6IFsnY29uc3QnLCBbJ3N0cmluZycsIDRdLCAnQkFJXFx1MDAwMSddLFxuICAgIG5fcmVmOiAnaW50MzInLFxuICAgIGluZGljZXM6IFsnYXJyYXknLCAnQmFpSW5kZXgnLCAnbl9yZWYnXSxcbiAgICBuX25vX2Nvb3I6IHVpbnQ2NG5hdGl2ZSAgLy8gc3BlYyBzYXlzIG9wdGlvbmFsLCBidXQgaXQncyBhbHdheXMgdGhlcmUuXG4gIH1cbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7VFlQRV9TRVQsIFRoaW5BbGlnbm1lbnQsIFRoaWNrQWxpZ25tZW50LCBGbGFnc307XG4iLCIvKipcbiAqIEJCSSBpcyB0aGUgc2hhcmVkIHN0cnVjdHVyZSBiZXR3ZWVuIGJpZ0JlZCBhbmQgYmlnV2lnLlxuICogVGhlc2Ugc3RydWN0dXJlcyBhcmUgYmFzZWQgb24gVUNTQydzIHNyYy9pbmMvYmJpRmlsZS5oXG4gKiBAZmxvd1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHt0eXBlQXRPZmZzZXR9IGZyb20gJy4vaGVscGVycyc7XG5cbnZhciBUWVBFX1NFVCA9IHtcbiAgJ2pCaW5hcnkubGl0dGxlRW5kaWFuJzogdHJ1ZSxcblxuICAnSGVhZGVyJzoge1xuICAgIF9tYWdpYzogWydjb25zdCcsICd1aW50MzInLCAweDg3ODlGMkVCLCB0cnVlXSxcbiAgICB2ZXJzaW9uOiAndWludDE2JyxcbiAgICB6b29tTGV2ZWxzOiAndWludDE2JyxcbiAgICBjaHJvbW9zb21lVHJlZU9mZnNldDogJ3VpbnQ2NCcsXG4gICAgdW56b29tZWREYXRhT2Zmc2V0OiAndWludDY0JyxcbiAgICB1bnpvb21lZEluZGV4T2Zmc2V0OiAndWludDY0JyxcbiAgICBmaWVsZENvdW50OiAndWludDE2JyxcbiAgICBkZWZpbmVkRmllbGRDb3VudDogJ3VpbnQxNicsXG4gICAgLy8gMCBpZiBubyBhdXRvU3FsIGluZm9ybWF0aW9uXG4gICAgYXV0b1NxbE9mZnNldDogJ3VpbnQ2NCcsXG4gICAgdG90YWxTdW1tYXJ5T2Zmc2V0OiAndWludDY0JyxcbiAgICAvLyBTaXplIG9mIHVuY29tcHJlc3Npb24gYnVmZmVyLiAgMCBpZiB1bmNvbXByZXNzZWQuXG4gICAgdW5jb21wcmVzc0J1ZlNpemU6ICd1aW50MzInLFxuICAgIC8vIE9mZnNldCB0byBoZWFkZXIgZXh0ZW5zaW9uIDAgaWYgbm8gc3VjaCBleHRlbnNpb25cbiAgICAvLyBUT0RPOiBzdXBwb3J0IGV4dGVuZGVkIGhlYWRlcnMgKG5vdCB1c2VkIGluIGVuc0dlbmUuYmIpXG4gICAgZXh0ZW5zaW9uT2Zmc2V0OiAndWludDY0JyxcbiAgICB6b29tSGVhZGVyczogWydhcnJheScsICdab29tSGVhZGVyJywgJ3pvb21MZXZlbHMnXSxcblxuICAgIHRvdGFsU3VtbWFyeTogdHlwZUF0T2Zmc2V0KCdUb3RhbFN1bW1hcnknLCAndG90YWxTdW1tYXJ5T2Zmc2V0JyksXG4gICAgY2hyb21vc29tZVRyZWU6IHR5cGVBdE9mZnNldCgnQlBsdXNUcmVlJywgJ2Nocm9tb3NvbWVUcmVlT2Zmc2V0JylcbiAgfSxcblxuICAnVG90YWxTdW1tYXJ5Jzoge1xuICAgIGJhc2VzQ292ZXJlZDogJ3VpbnQ2NCcsXG4gICAgbWluVmFsOiAnZmxvYXQ2NCcsICAgICAvLyBmb3IgYmlnQmVkIG1pbmltdW0gZGVwdGggb2YgY292ZXJhZ2VcbiAgICBtYXhWYWw6ICdmbG9hdDY0JywgICAgIC8vIGZvciBiaWdCZWQgbWF4aW11bSBkZXB0aCBvZiBjb3ZlcmFnZVxuICAgIHN1bURhdGE6ICdmbG9hdDY0JywgICAgLy8gZm9yIGJpZ0JlZCBzdW0gb2YgY292ZXJhZ2VcbiAgICBzdW1TcXVhcmVkOiAnZmxvYXQ2NCcgIC8vIGZvciBiaWdCZWQgc3VtIG9mIGNvdmVyYWdlIHNxdWFyZWRcbiAgfSxcblxuICAnWm9vbUhlYWRlcic6IHtcbiAgICByZWR1Y3Rpb25MZXZlbDogJ3VpbnQzMicsXG4gICAgX3Jlc2VydmVkOiAndWludDMyJyxcbiAgICBkYXRhT2Zmc2V0OiAndWludDY0JyxcbiAgICBpbmRleE9mZnNldDogJ3VpbnQ2NCdcbiAgfSxcblxuICAnQlBsdXNUcmVlJzoge1xuICAgIG1hZ2ljOiBbJ2NvbnN0JywgJ3VpbnQzMicsIDB4NzhDQThDOTEsIHRydWVdLFxuICAgIC8vIE51bWJlciBvZiBjaGlsZHJlbiBwZXIgYmxvY2sgKG5vdCBieXRlIHNpemUgb2YgYmxvY2spXG4gICAgYmxvY2tTaXplOiAndWludDMyJyxcbiAgICAvLyBOdW1iZXIgb2Ygc2lnbmlmaWNhbnQgYnl0ZXMgaW4ga2V5XG4gICAga2V5U2l6ZTogJ3VpbnQzMicsXG4gICAgLy8gTnVtYmVyIG9mIGJ5dGVzIGluIHZhbHVlXG4gICAgdmFsU2l6ZTogJ3VpbnQzMicsXG4gICAgLy8gTnVtYmVyIG9mIGl0ZW1zIGluIGluZGV4XG4gICAgaXRlbUNvdW50OiAndWludDY0JyxcbiAgICBfcmVzZXJ2ZWQyOiBbJ3NraXAnLCA0XSxcbiAgICBfcmVzZXJ2ZWQzOiBbJ3NraXAnLCA0XSxcbiAgICBub2RlczogJ0JQbHVzVHJlZU5vZGUnICAvLyBbJ2FycmF5JywgJ0JQbHVzVHJlZU5vZGUnLCAnaXRlbUNvdW50J11cbiAgfSxcbiAgXG4gICdCUGx1c1RyZWVOb2RlJzoge1xuICAgIGlzTGVhZjogJ3VpbnQ4JywgIC8vIDEgPSB5ZXMsIDAgPSBub1xuICAgIF9yZXNlcnZlZDogJ3VpbnQ4JyxcbiAgICBjb3VudDogJ3VpbnQxNicsXG4gICAgY29udGVudHM6IFsnYXJyYXknLCBbJ2lmJywgJ2lzTGVhZicsIHtcbiAgICAgIGtleTogWydzdHJpbmcnLCAna2V5U2l6ZSddLFxuICAgICAgLy8gTm90ZTogYmlnQmVkIGFsbG93cyBtb3JlIGdlbmVyYWwgdmFsdWVzOyB0aGlzIGlzIHdoYXQgRW5zZW1ibCB1c2VzLlxuICAgICAgLy8gdmFsdWU6IFsnc3RyaW5nJywgJ3ZhbFNpemUnXVxuICAgICAgaWQ6ICd1aW50MzInLFxuICAgICAgc2l6ZTogJ3VpbnQzMidcbiAgICB9LCB7XG4gICAgICBrZXk6IFsnc3RyaW5nJywgJ2tleVNpemUnXSxcbiAgICAgIG9mZnNldDogJ3VpbnQ2NCdcbiAgICB9XSwgJ2NvdW50J11cbiAgfSxcblxuICAnQ2lyVHJlZSc6IHtcbiAgICBfbWFnaWM6IFsnY29uc3QnLCAndWludDMyJywgMHgyNDY4QUNFMCwgdHJ1ZV0sXG4gICAgYmxvY2tTaXplOiAndWludDMyJyxcbiAgICBpdGVtQ291bnQ6ICd1aW50NjQnLFxuICAgIHN0YXJ0Q2hyb21JeDogJ3VpbnQzMicsXG4gICAgc3RhcnRCYXNlOiAndWludDMyJyxcbiAgICBlbmRDaHJvbUl4OiAndWludDMyJyxcbiAgICBlbmRCYXNlOiAndWludDMyJyxcbiAgICBmaWxlU2l6ZTogJ3VpbnQ2NCcsXG4gICAgaXRlbXNQZXJTbG90OiAndWludDMyJyxcbiAgICBfcmVzZXJ2ZWQ6IFsnc2tpcCcsIDRdLFxuICAgIGJsb2NrczogJ0Npck5vZGUnXG4gIH0sXG5cbiAgJ0Npck5vZGUnOiB7XG4gICAgaXNMZWFmOiAndWludDgnLCAgLy8gMSA9IHllcywgMCA9IG5vXG4gICAgX3Jlc2VydmVkOiAndWludDgnLFxuICAgIGNvdW50OiAndWludDE2JyxcbiAgICBjb250ZW50czogW1xuICAgICAgJ2FycmF5JywgW1xuICAgICAgICAnaWYnLCAnaXNMZWFmJywgJ0xlYWZEYXRhJywgJ05vbkxlYWZEYXRhJ1xuICAgICAgXSxcbiAgICAgICdjb3VudCdcbiAgICBdXG4gIH0sXG5cbiAgJ0xlYWZEYXRhJzoge1xuICAgIHN0YXJ0Q2hyb21JeDogJ3VpbnQzMicsXG4gICAgc3RhcnRCYXNlOiAndWludDMyJyxcbiAgICBlbmRDaHJvbUl4OiAndWludDMyJyxcbiAgICBlbmRCYXNlOiAndWludDMyJyxcbiAgICBvZmZzZXQ6ICd1aW50NjQnLFxuICAgIHNpemU6ICd1aW50NjQnXG4gIH0sXG5cbiAgJ05vbkxlYWZEYXRhJzoge1xuICAgIHN0YXJ0Q2hyb21JeDogJ3VpbnQzMicsXG4gICAgc3RhcnRCYXNlOiAndWludDMyJyxcbiAgICBlbmRDaHJvbUl4OiAndWludDMyJyxcbiAgICBlbmRCYXNlOiAndWludDMyJyxcbiAgICBvZmZzZXQ6ICd1aW50NjQnLFxuICB9LFxuXG4gICdCZWRFbnRyeSc6IHtcbiAgICAnY2hySWQnOiAndWludDMyJyxcbiAgICAnc3RhcnQnOiAndWludDMyJyxcbiAgICAnc3RvcCc6ICd1aW50MzInLFxuICAgICdyZXN0JzogJ3N0cmluZzAnXG4gIH0sXG5cbiAgJ0JlZEJsb2NrJzogWydhcnJheScsICdCZWRFbnRyeSddLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7VFlQRV9TRVR9O1xuIiwiLyoqXG4gKiBIZWxwZXJzIGZvciBzcGVjaWZ5aW5nIGZpbGUgZm9ybWF0cyB1c2luZyBqQmluYXJ5LlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcblxuLy8gUmVhZCBhIGpCaW5hcnkgdHlwZSBhdCBhbiBvZmZzZXQgaW4gdGhlIGJ1ZmZlciBzcGVjaWZpZWQgYnkgYW5vdGhlciBmaWVsZC5cbmZ1bmN0aW9uIHR5cGVBdE9mZnNldChiYXNlVHlwZTogYW55LCBvZmZzZXRGaWVsZE5hbWU6IHN0cmluZyk6IGFueSB7XG4gIHJldHVybiBqQmluYXJ5LlRlbXBsYXRlKHtcbiAgICAgIGJhc2VUeXBlOiBiYXNlVHlwZSxcbiAgICAgIHJlYWQ6IGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgICAgICAgaWYgKCtjb250ZXh0W29mZnNldEZpZWxkTmFtZV0gPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5iaW5hcnkucmVhZCh0aGlzLmJhc2VUeXBlLCArY29udGV4dFtvZmZzZXRGaWVsZE5hbWVdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xufVxuXG4vLyBBIGJsb2NrIG9mIGZpeGVkIGxlbmd0aCBjb250YWluaW5nIHNvbWUgb3RoZXIgdHlwZS5cbi8vIFRPRE86IHdyaXRlIHRoaXMgdXNpbmcgJ2JpbmFyeScgdHlwZSAobGlrZSBudWxsU3RyaW5nKS5cbnZhciBzaXplZEJsb2NrID0gakJpbmFyeS5UeXBlKHtcbiAgcGFyYW1zOiBbJ2l0ZW1UeXBlJywgJ2xlbmd0aEZpZWxkJ10sXG4gIHJlc29sdmU6IGZ1bmN0aW9uKGdldFR5cGUpIHtcbiAgICB0aGlzLml0ZW1UeXBlID0gZ2V0VHlwZSh0aGlzLml0ZW1UeXBlKTtcbiAgfSxcbiAgcmVhZDogZnVuY3Rpb24oY29udGV4dCkge1xuICAgIHZhciBwb3MgPSB0aGlzLmJpbmFyeS50ZWxsKCk7XG4gICAgdmFyIGxlbiA9ICtjb250ZXh0W3RoaXMubGVuZ3RoRmllbGRdO1xuICAgIHRoaXMuYmluYXJ5LnNraXAobGVuKTtcbiAgICByZXR1cm4gdGhpcy5iaW5hcnkuc2xpY2UocG9zLCBwb3MgKyBsZW4pLnJlYWQodGhpcy5pdGVtVHlwZSk7XG4gIH1cbn0pO1xuXG4vLyBBIGZpeGVkLWxlbmd0aCBzdHJpbmcgZmllbGQgd2hpY2ggaXMgYWxzbyBudWxsLXRlcm1pbmF0ZWQuXG4vLyBUT0RPOiBzaG91bGQgYmUgW3NpemVkQmxvY2ssICdzdHJpbmcwJywgbGVuZ3RoRmllbGRdXG4vLyBUT0RPOiBmaWxlIGEgYnVnIHVwc3RyZWFtIG9uICdzdHJpbmcwJywgd2hpY2ggc2hvdWxkIGRvIHdoYXQgdGhpcyBkb2VzLlxudmFyIG51bGxTdHJpbmcgPSBqQmluYXJ5LlRlbXBsYXRlKHtcbiAgc2V0UGFyYW1zKGxlbmd0aEZpZWxkKSB7XG4gICAgdGhpcy5iYXNlVHlwZSA9IFsnYmluYXJ5JywgbGVuZ3RoRmllbGRdO1xuICB9LFxuICByZWFkKCkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZWFkKCkucmVhZCgnc3RyaW5nMCcpO1xuICB9XG59KTtcblxuXG4vLyBMaWtlICd1aW50NjQnLCBidXQgYXNzZXJ0cyB0aGF0IHRoZSBudW1iZXIgaXMgPDJeNTMgKGkuZS4gZml0cyBwcmVjaXNlbHkgaW5cbi8vIGEgZmxvYXQpIGFuZCByZWFkcyBpdCBhcyBhIHBsYWluLW9sZC1udW1iZXIuIFRoaXMgaXMgYSBwZXJmb3JtYW5jZSBhbmRcbi8vIGRlYnVnZ2luZyB3aW4sIHNpbmNlIHBsYWluIG51bWJlcnMgc2hvdyB1cCBtb3JlIG5pY2VseSBpbiB0aGUgY29uc29sZS5cbnZhciB1aW50NjRuYXRpdmUgPSBqQmluYXJ5LlRlbXBsYXRlKHtcbiAgYmFzZVR5cGU6ICd1aW50NjQnLFxuICByZWFkKCkge1xuICAgIHZhciBudW0gPSB0aGlzLmJhc2VSZWFkKCksXG4gICAgICAgIHYgPSArbnVtO1xuICAgIC8vIFRlc3QgZm9yIHdyYXBhcm91bmQgJiByb3VuZG9mZlxuICAgIGlmICh2IDwgMCB8fCAxICsgdiA9PSB2KSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgTnVtYmVyIG91dCBvZiBwcmVjaXNlIGZsb2F0aW5nIHBvaW50IHJhbmdlOiAke251bX1gKTtcbiAgICB9XG4gICAgcmV0dXJuICtudW07XG4gIH1cbn0pO1xuXG5cbi8vIFR5cGUgcmV0dXJuZWQgYnkgbGF6eUFycmF5IGhlbHBlciwgYmVsb3cuXG4vLyBIYXMgYSAubGVuZ3RoIHByb3BlcnR5LCBhIC5nZXQoKSBtZXRob2QgYW5kIGEgLmdldEFsbCgpIG1ldGhvZC5cbmNsYXNzIExhenlBcnJheSB7XG4gIGJ5dGVzUGVySXRlbTogbnVtYmVyO1xuICBqYjogT2JqZWN0O1xuICBpdGVtVHlwZTogT2JqZWN0O1xuICBsZW5ndGg6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihqYiwgYnl0ZXNQZXJJdGVtOiBudW1iZXIsIGl0ZW1UeXBlKSB7XG4gICAgdGhpcy5ieXRlc1Blckl0ZW0gPSBieXRlc1Blckl0ZW07XG4gICAgdGhpcy5qYiA9IGpiO1xuICAgIHRoaXMuaXRlbVR5cGUgPSBpdGVtVHlwZTtcbiAgICB0aGlzLmxlbmd0aCA9IHRoaXMuamIudmlldy5ieXRlTGVuZ3RoIC8gdGhpcy5ieXRlc1Blckl0ZW07XG4gIH1cblxuICBnZXQoaSkge1xuICAgIHRoaXMuamIuc2VlayhpICogdGhpcy5ieXRlc1Blckl0ZW0pO1xuICAgIHJldHVybiB0aGlzLmpiLnJlYWQodGhpcy5pdGVtVHlwZSk7XG4gIH1cblxuICBnZXRBbGwoKSB7XG4gICAgdGhpcy5qYi5zZWVrKDApO1xuICAgIHJldHVybiB0aGlzLmpiLnJlYWQoWydhcnJheScsIHRoaXMuaXRlbVR5cGUsIHRoaXMubGVuZ3RoXSk7XG4gIH1cbn1cblxuXG4vLyBMaWtlIGpCaW5hcnkncyAnYXJyYXknLCBidXQgZGVmZXJzIHBhcnNpbmcgb2YgaXRlbXMgdW50aWwgdGhleSBhcmUgYWNjZXNzZWQuXG4vLyBUaGlzIGNhbiByZXN1bHQgaW4gYSBodWdlIHNwZWVkdXAgZm9yIGxhcmdlIGFycmF5cy4gU2VlIExhenlBcnJheSBmb3IgdGhlXG4vLyByZXN1bHRpbmcgdHlwZS5cbnZhciBsYXp5QXJyYXkgPSBqQmluYXJ5LlR5cGUoe1xuICBwYXJhbXM6IFsnaXRlbVR5cGUnLCAnYnl0ZXNQZXJJdGVtJywgJ251bUl0ZW1zJ10sXG4gIHJlYWQoKSB7XG4gICAgdmFyIG51bUl0ZW1zID0gdGhpcy50b1ZhbHVlKHRoaXMubnVtSXRlbXMpO1xuICAgIHZhciBieXRlc1Blckl0ZW0gPSB0aGlzLnRvVmFsdWUodGhpcy5ieXRlc1Blckl0ZW0pO1xuICAgIGlmIChudW1JdGVtcyA9PT0gdW5kZWZpbmVkIHx8IGJ5dGVzUGVySXRlbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyAnYnl0ZXNQZXJJdGVtIGFuZCBudW1JdGVtcyBtdXN0IGJlIHNldCBmb3IgbGF6eUFycmF5JztcbiAgICB9XG4gICAgdmFyIHBvcyA9IHRoaXMuYmluYXJ5LnRlbGwoKTtcbiAgICB2YXIgbGVuID0gbnVtSXRlbXMgKiBieXRlc1Blckl0ZW07XG4gICAgdmFyIGJ1ZmZlciA9IHRoaXMuYmluYXJ5LnNsaWNlKHBvcywgcG9zICsgbGVuKTtcbiAgICB0aGlzLmJpbmFyeS5za2lwKGxlbik7XG4gICAgcmV0dXJuIG5ldyBMYXp5QXJyYXkoYnVmZmVyLCBieXRlc1Blckl0ZW0sIHRoaXMuaXRlbVR5cGUpO1xuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSB7dHlwZUF0T2Zmc2V0LCBzaXplZEJsb2NrLCBudWxsU3RyaW5nLCB1aW50NjRuYXRpdmUsIGxhenlBcnJheX07XG4iLCIvKipcbiAqIFR3b0JpdCBpcyBhIHBhY2tlZCBnZW5vbWUgZm9ybWF0LlxuICogU2VlIGh0dHA6Ly9nZW5vbWUudWNzYy5lZHUvRkFRL0ZBUWZvcm1hdC5odG1sI2Zvcm1hdDdcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgVFlQRV9TRVQgPSB7XG4gICdqQmluYXJ5LmxpdHRsZUVuZGlhbic6IHRydWUsXG5cbiAgJ0hlYWRlcic6IHtcbiAgICBtYWdpYzogWydjb25zdCcsICd1aW50MzInLCAweDFBNDEyNzQzLCB0cnVlXSxcbiAgICB2ZXJzaW9uOiBbJ2NvbnN0JywgJ3VpbnQzMicsIDAsIHRydWVdLFxuICAgIHNlcXVlbmNlQ291bnQ6ICd1aW50MzInLFxuICAgIHJlc2VydmVkOiAndWludDMyJyxcblxuICAgIHNlcXVlbmNlczogWydhcnJheScsICdTZXF1ZW5jZUhlYWRlcicsICdzZXF1ZW5jZUNvdW50J11cbiAgfSxcblxuICAnU2VxdWVuY2VIZWFkZXInOiB7XG4gICAgbmFtZVNpemU6ICd1aW50OCcsXG4gICAgbmFtZTogWydzdHJpbmcnLCAnbmFtZVNpemUnXSxcbiAgICBvZmZzZXQ6ICd1aW50MzInXG4gIH0sXG5cbiAgJ1NlcXVlbmNlUmVjb3JkJzoge1xuICAgIGRuYVNpemU6ICd1aW50MzInLFxuICAgIG5CbG9ja0NvdW50OiAndWludDMyJyxcbiAgICBuQmxvY2tTdGFydHM6IFsnYXJyYXknLCAndWludDMyJywgJ25CbG9ja0NvdW50J10sXG4gICAgbkJsb2NrU2l6ZXM6IFsnYXJyYXknLCAndWludDMyJywgJ25CbG9ja0NvdW50J10sXG4gICAgLy8gVGhlIG1hc2tzIGNhbiBiZSBxdWl0ZSBsYXJnZSAofjJNQiBmb3IgY2hyMSkgYW5kIHdlIG1vc3RseSBkb24ndCBjYXJlXG4gICAgLy8gYWJvdXQgdGhlbS4gIFNvIHdlIGlnbm9yZSB0aGVtLCBidXQgd2UgZG8gbmVlZCB0byBrbm93IHRoZWlyIGxlbmd0aC5cbiAgICBtYXNrQmxvY2tDb3VudDogJ3VpbnQzMicsXG4gICAgLy8gbWFza0Jsb2NrU3RhcnRzOiBbJ2FycmF5JywgJ3VpbnQzMicsICdtYXNrQmxvY2tDb3VudCddXG4gICAgLy8gbWFza0Jsb2NrU2l6ZXM6IFsnYXJyYXknLCAndWludDMyJywgJ21hc2tCbG9ja0NvdW50J11cbiAgICAvLyByZXNlcnZlZDogJ3VpbnQzMidcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7VFlQRV9TRVR9O1xuIiwiLyoqXG4gKiBDbGFzcyBmb3IgcGFyc2luZyBnZW5lcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5cbmltcG9ydCB0eXBlIHtTdHJhbmR9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgIHtnYTRnaFN0cmFuZFRvU3RyYW5kfSBmcm9tICAnLi4vQWxpZ25tZW50JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmNsYXNzIEdlbmUge1xuICBwb3NpdGlvbjogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPjtcbiAgaWQ6IHN0cmluZzsgIC8vIHRyYW5zY3JpcHQgSUQsIGUuZy4gXCJFTlNUMDAwMDAyNjkzMDVcIlxuICBzY29yZTogbnVtYmVyO1xuICBzdHJhbmQ6IFN0cmFuZDtcbiAgY29kaW5nUmVnaW9uOiBJbnRlcnZhbDsgIC8vIGxvY3VzIG9mIGNvZGluZyBzdGFydFxuICBleG9uczogQXJyYXk8SW50ZXJ2YWw+O1xuICBnZW5lSWQ6IHN0cmluZzsgIC8vIGVuc2VtYmwgZ2VuZSBJRFxuICBuYW1lOiBzdHJpbmc7ICAvLyBodW1hbi1yZWFkYWJsZSBuYW1lLCBlLmcuIFwiVFA1M1wiXG5cbiAgY29uc3RydWN0b3IoZ2VuZTogT2JqZWN0KSB7XG4gICAgdGhpcy5wb3NpdGlvbiA9IGdlbmUucG9zaXRpb247XG4gICAgdGhpcy5pZCA9ICBnZW5lLmlkO1xuICAgIHRoaXMuc2NvcmUgPSBnZW5lLnNjb3JlO1xuICAgIHRoaXMuc3RyYW5kID0gZ2VuZS5zdHJhbmQ7XG4gICAgdGhpcy5jb2RpbmdSZWdpb24gPSBnZW5lLmNvZGluZ1JlZ2lvbjtcbiAgICB0aGlzLmV4b25zID0gZ2VuZS5leG9ucztcbiAgICB0aGlzLmdlbmVJZCA9IGdlbmUuZ2VuZUlkO1xuICAgIHRoaXMubmFtZSA9IGdlbmUubmFtZTtcbiAgfVxuXG4gIGdldEtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmlkO1xuICB9XG5cbiAgZ2V0SW50ZXJ2YWwoKTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zaXRpb247XG4gIH1cblxuICBzdGF0aWMgZnJvbUdBNEdIKGdhNGdoR2VuZTogT2JqZWN0KTogR2VuZSB7XG4gICAgdmFyIHBvc2l0aW9uID0gbmV3IENvbnRpZ0ludGVydmFsKGdhNGdoR2VuZS5yZWZlcmVuY2VOYW1lLCBwYXJzZUludChnYTRnaEdlbmUuc3RhcnQpLCBwYXJzZUludChnYTRnaEdlbmUuZW5kKSk7XG4gICAgdmFyIHN0cmFuZCA9IGdhNGdoU3RyYW5kVG9TdHJhbmQoZ2E0Z2hHZW5lLnN0cmFuZCk7XG5cbiAgICAvLyBtYWtlIGEgdW5pcXVlIGlkIGZvciB0aGlzIEdlbmVcbiAgICB2YXIgaWQgPSBnYTRnaEdlbmUuaWQgJiYgZ2E0Z2hHZW5lLmlkICE9IFwiXCIgPyBnYTRnaEdlbmUuaWQgOiAoZ2E0Z2hHZW5lLmdlbmVTeW1ib2wgJiYgZ2E0Z2hHZW5lLmdlbmVTeW1ib2wgIT0gXCJcIiA/IGdhNGdoR2VuZS5nZW5lU3ltYm9sIDogZ2E0Z2hHZW5lLm5hbWUpO1xuXG4gICAgdmFyIGJsb2NrU3RhcnRzID0gZ2E0Z2hHZW5lLmF0dHJpYnV0ZXMuYXR0ci5ibG9ja1N0YXJ0cztcbiAgICB2YXIgYmxvY2tTaXplcyA9IGdhNGdoR2VuZS5hdHRyaWJ1dGVzLmF0dHIuYmxvY2tTaXplcztcblxuICAgIC8vIHByb2Nlc3MgZXhvbnMsIGlmIGF2YWlsYWJsZVxuICAgIHZhciAgZXhvbnMgPSBbXTtcblxuICAgIGlmIChibG9ja1N0YXJ0cyAmJiBibG9ja1NpemVzKSB7XG4gICAgICBpZiAoYmxvY2tTdGFydHMudmFsdWVzICYmIGJsb2NrU2l6ZXMudmFsdWVzKSB7XG4gICAgICAgIHZhciBleG9uU3RhcnRzID0gXy5tYXAoYmxvY2tTdGFydHMudmFsdWVzWzBdLnN0cmluZ1ZhbHVlLnNwbGl0KCcsJyksIGYgPT4gcGFyc2VJbnQoZikpO1xuICAgICAgICB2YXIgZXhvbkxlbmd0aHMgPSBfLm1hcChibG9ja1NpemVzLnZhbHVlc1swXS5zdHJpbmdWYWx1ZS5zcGxpdCgnLCcpLCBmID0+IHBhcnNlSW50KGYpKTtcblxuICAgICAgICBleG9ucyA9IF8uemlwKGV4b25TdGFydHMsIGV4b25MZW5ndGhzKVxuICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKFtzdGFydCwgbGVuZ3RoXSkge1xuICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW50ZXJ2YWwocG9zaXRpb24uc3RhcnQoKSArIHN0YXJ0LCBwb3NpdGlvbi5zdGFydCgpICsgc3RhcnQgKyBsZW5ndGgpO1xuICAgICAgICAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgdGhpY2tTdGFydCA9IGdhNGdoR2VuZS5hdHRyaWJ1dGVzLmF0dHIudGhpY2tTdGFydDtcbiAgICB2YXIgdGhpY2tFbmQgPSBnYTRnaEdlbmUuYXR0cmlidXRlcy5hdHRyLnRoaWNrRW5kO1xuXG4gICAgdmFyIGNvZGluZ1JlZ2lvbiA9IG51bGw7XG5cbiAgICBpZiAodGhpY2tTdGFydC52YWx1ZXMgJiYgdGhpY2tFbmQudmFsdWVzKSB7XG4gICAgICBjb2RpbmdSZWdpb24gPSBuZXcgSW50ZXJ2YWwocGFyc2VJbnQodGhpY2tTdGFydC52YWx1ZXNbMF0uc3RyaW5nVmFsdWUpLFxuICAgICAgICAgIHBhcnNlSW50KHRoaWNrRW5kLnZhbHVlc1swXS5zdHJpbmdWYWx1ZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb2RpbmdSZWdpb24gPSBuZXcgSW50ZXJ2YWwocG9zaXRpb24uc3RhcnQoKSwgcG9zaXRpb24uZW5kKCkpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgR2VuZSh7XG4gICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICBpZDogaWQsXG4gICAgICBzY29yZTogMTAwMCxcbiAgICAgIHN0cmFuZDogc3RyYW5kLFxuICAgICAgY29kaW5nUmVnaW9uOiBjb2RpbmdSZWdpb24sXG4gICAgICBleG9uczogZXhvbnMsXG4gICAgICBnZW5lSWQ6IGdhNGdoR2VuZS5nZW5lU3ltYm9sLFxuICAgICAgbmFtZTogZ2E0Z2hHZW5lLm5hbWVcbiAgICB9KTtcbiAgfVxuXG4gIGludGVyc2VjdHMocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gcmFuZ2UuaW50ZXJzZWN0cyh0aGlzLnBvc2l0aW9uKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEdlbmU7XG4iLCIvKipcbiAqIEdlbmVyaWMgb2JqZWN0IHRoYXQgY2FuIGJlIGRpc3BsYXllZC4gVGhpcyBjYW4gYmUgYSBnZW5lLCBmZWF0dXJlIG9yIHZhcmlhbnQsIGV0Yy5cbiAqIFNlZSAuLi92aXovR2VuZXJpY0ZlYXR1cmVDYWNoZS5qc1xuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKmpzaGludCB1bnVzZWQ6ZmFsc2UgKi9cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5cblxuY2xhc3MgR2VuZXJpY0ZlYXR1cmUge1xuICBpZDogc3RyaW5nO1xuICBwb3NpdGlvbjogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPjtcbiAgZ0ZlYXR1cmU6IE9iamVjdDtcblxuICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nLCBwb3NpdGlvbjogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiwgZ2VuZXJpY0ZlYXR1cmU6IE9iamVjdCkge1xuICAgIHRoaXMuaWQgPSBnZW5lcmljRmVhdHVyZS5pZDtcbiAgICB0aGlzLnBvc2l0aW9uID0gZ2VuZXJpY0ZlYXR1cmUucG9zaXRpb247XG4gICAgdGhpcy5nRmVhdHVyZSA9IGdlbmVyaWNGZWF0dXJlO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gR2VuZXJpY0ZlYXR1cmU7XG4iLCIvKipcbiAqIENsYXNzIGZvciBwYXJzaW5nIHZhcmlhbnRzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuXG5jbGFzcyBWYXJpYW50IHtcbiAgY29udGlnOiBzdHJpbmc7XG4gIHBvc2l0aW9uOiBudW1iZXI7XG4gIHJlZjogc3RyaW5nO1xuICBhbHQ6IHN0cmluZztcbiAgaWQ6IHN0cmluZztcbiAgLy90aGlzIGlzIHRoZSBiaWdnZXN0IGFsbGVsZSBmcmVxdWVuY3kgZm9yIHNpbmdsZSB2Y2YgZW50cnlcbiAgLy9zaW5nbGUgdmNmIGVudHJ5IG1pZ2h0IGNvbnRhaW4gbW9yZSB0aGFuIG9uZSB2YXJpYW50IGxpa2UgdGhlIGV4YW1wbGUgYmVsb3dcbiAgLy8yMCAxMTEwNjk2IHJzNjA0MDM1NSBBIEcsVCA2NyBQQVNTIE5TPTI7RFA9MTA7QUY9MC4zMzMsMC42Njc7QUE9VDtEQlxuICBtYWpvckZyZXF1ZW5jeTogP251bWJlcjtcbiAgLy90aGlzIGlzIHRoZSBzbWFsbGVzdCBhbGxlbCBmcmVxdWVuY3kgZm9yIHNpbmdsZSB2Y2YgZW50cnlcbiAgbWlub3JGcmVxdWVuY3k6ID9udW1iZXI7XG4gIHZjZkxpbmU6IHN0cmluZztcblxuXG4gIGNvbnN0cnVjdG9yKHZhcmlhbnQ6IE9iamVjdCkge1xuICAgdGhpcy5jb250aWcgPSB2YXJpYW50LmNvbnRpZztcbiAgIHRoaXMucG9zaXRpb24gPSBwYXJzZUludCh2YXJpYW50LnBvc2l0aW9uKTtcbiAgIHRoaXMucmVmID0gdmFyaWFudC5yZWY7XG4gICB0aGlzLmFsdCA9IHZhcmlhbnQuYWx0O1xuICAgdGhpcy5pZCA9IHZhcmlhbnQuaWQ7XG4gICB0aGlzLm1ham9yRnJlcXVlbmN5ID0gdmFyaWFudC5tYWpvckZyZXF1ZW5jeTtcbiAgIHRoaXMubWlub3JGcmVxdWVuY3kgPSB2YXJpYW50Lm1pbm9yRnJlcXVlbmN5O1xuICAgdGhpcy52Y2ZMaW5lID0gdmFyaWFudC52Y2ZMaW5lO1xuICB9XG5cbiAgc3RhdGljIGZyb21HQTRHSChnYTRnaFZhcmlhbnQ6IE9iamVjdCk6IFZhcmlhbnQge1xuICAgcmV0dXJuIG5ldyBWYXJpYW50KFxuICAgIHtcbiAgICAgY29udGlnOiBnYTRnaFZhcmlhbnQucmVmZXJlbmNlTmFtZSxcbiAgICAgcG9zaXRpb246IHBhcnNlSW50KGdhNGdoVmFyaWFudC5zdGFydCksXG4gICAgIGlkOiBnYTRnaFZhcmlhbnQuaWQsXG4gICAgIHJlZjogZ2E0Z2hWYXJpYW50LnJlZmVyZW5jZUJhc2VzLFxuICAgICBhbHQ6IGdhNGdoVmFyaWFudC5hbHRlcm5hdGVCYXNlcyxcbiAgICAgbWFqb3JGcmVxdWVuY3k6IDAsXG4gICAgIG1pbm9yRnJlcXVlbmN5OiAwLCAvLyBUT0RPIGV4dHJhY3QgdGhlc2VcbiAgICAgdmNmTGluZTogXCJcIiAvLyBUT0RPXG4gICB9KTtcbiAgfVxuXG4gIGludGVyc2VjdHMocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gcmFuZ2UuaW50ZXJzZWN0cyhuZXcgQ29udGlnSW50ZXJ2YWwodGhpcy5jb250aWcsIHRoaXMucG9zaXRpb24sIHRoaXMucG9zaXRpb24gKyAxKSk7XG4gIH1cblxufVxuXG4vLyBHQTRHSCBHZW5vdHlwZSBDYWxsXG5jbGFzcyBDYWxsIHtcbiAgY2FsbFNldE5hbWU6IHN0cmluZztcbiAgZ2Vub3R5cGU6IG51bWJlcltdO1xuICBjYWxsU2V0SWQ6IHN0cmluZztcbiAgcGhhc2VzZXQ6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihjYWxsU2V0TmFtZTogc3RyaW5nLCBnZW5vdHlwZTogbnVtYmVyW10sXG4gICAgICBjYWxsU2V0SWQ6IHN0cmluZywgcGhhc2VzZXQ6IHN0cmluZykge1xuICAgICAgdGhpcy5jYWxsU2V0TmFtZSA9IGNhbGxTZXROYW1lO1xuICAgICAgdGhpcy5nZW5vdHlwZSA9IGdlbm90eXBlO1xuICAgICAgdGhpcy5jYWxsU2V0SWQgPSBjYWxsU2V0SWQ7XG4gICAgICB0aGlzLnBoYXNlc2V0ID0gcGhhc2VzZXQ7XG4gIH1cbn1cblxuLy8gaG9sZHMgdmFyaWFudCBhbmQgZ2Vub3R5cGUgc2FtcGxlIGlkc1xuY2xhc3MgVmFyaWFudENvbnRleHQge1xuICB2YXJpYW50OiBWYXJpYW50O1xuICBjYWxsczogQ2FsbFtdO1xuXG4gIGNvbnN0cnVjdG9yKHZhcmlhbnQ6IE9iamVjdCwgY2FsbHM6IENhbGxbXSkge1xuICAgIHRoaXMudmFyaWFudCA9IHZhcmlhbnQ7XG4gICAgdGhpcy5jYWxscyA9IGNhbGxzO1xuICB9XG5cbiAgaW50ZXJzZWN0cyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIHZhciB0aGlzUmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwodGhpcy52YXJpYW50LmNvbnRpZywgdGhpcy52YXJpYW50LnBvc2l0aW9uLCB0aGlzLnZhcmlhbnQucG9zaXRpb24gKyAxKTtcbiAgICByZXR1cm4gcmFuZ2UuaW50ZXJzZWN0cyh0aGlzUmFuZ2UpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBDYWxsLFxuICBWYXJpYW50LFxuICBWYXJpYW50Q29udGV4dFxufTtcbiIsIi8qKlxuICogRmV0Y2hlci9wYXJzZXIgZm9yIFZDRiBmaWxlcy5cbiAqIFRoaXMgbWFrZXMgdmVyeSBsaXR0bGUgZWZmb3J0IHRvIHBhcnNlIG91dCBkZXRhaWxzIGZyb20gVkNGIGVudHJpZXMuIEl0IGp1c3RcbiAqIGV4dHJhY3RzIENPTlRJRywgUE9TSVRJT04sIFJFRiBhbmQgQUxULlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgQWJzdHJhY3RGaWxlIGZyb20gJy4uL0Fic3RyYWN0RmlsZSc7XG5pbXBvcnQgdHlwZSBRIGZyb20gJ3EnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IHtDYWxsLCBWYXJpYW50LCBWYXJpYW50Q29udGV4dH0gZnJvbSBcIi4vdmFyaWFudFwiO1xuXG5cbi8vIFRoaXMgaXMgYSBtaW5pbWFsbHktcGFyc2VkIGxpbmUgZm9yIGZhY2lsaXRhdGluZyBiaW5hcnkgc2VhcmNoLlxudHlwZSBMb2N1c0xpbmUgPSB7XG4gIGNvbnRpZzogc3RyaW5nO1xuICBwb3NpdGlvbjogbnVtYmVyO1xuICBsaW5lOiBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RTYW1wbGVzKGhlYWRlcjogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG5cbiAgdmFyIGxpbmUgPSBfLmZpbHRlcihoZWFkZXIsIGggPT4gaC5zdGFydHNXaXRoKFwiI0NIUk9NXCIpKVswXS5zcGxpdCgnXFx0Jyk7XG5cbiAgLy8gZHJvcCBmaXJzdCA4IHRpdGxlcy4gU2VlIHZjZiBoZWFkZXIgc3BlY2lmaWNhdGlvbiAxLjM6IGh0dHBzOi8vc2FtdG9vbHMuZ2l0aHViLmlvL2h0cy1zcGVjcy9WQ0Z2NC4yLnBkZlxuICB2YXIgc2FtcGxlcyA9IGxpbmUuc3BsaWNlKDkpO1xuXG4gIHJldHVybiBzYW1wbGVzO1xufVxuXG5cbmZ1bmN0aW9uIGV4dHJhY3RMb2N1c0xpbmUodmNmTGluZTogc3RyaW5nKTogTG9jdXNMaW5lIHtcbiAgdmFyIHRhYjEgPSB2Y2ZMaW5lLmluZGV4T2YoJ1xcdCcpLFxuICAgICAgdGFiMiA9IHZjZkxpbmUuaW5kZXhPZignXFx0JywgdGFiMSArIDEpO1xuXG4gIHJldHVybiB7XG4gICAgY29udGlnOiB2Y2ZMaW5lLnNsaWNlKDAsIHRhYjEpLFxuICAgIHBvc2l0aW9uOiBOdW1iZXIodmNmTGluZS5zbGljZSh0YWIxICsgMSwgdGFiMikpLFxuICAgIGxpbmU6IHZjZkxpbmVcbiAgfTtcbn1cblxuXG5mdW5jdGlvbiBleHRyYWN0VmFyaWFudENvbnRleHQoc2FtcGxlczogc3RyaW5nW10sIHZjZkxpbmU6IHN0cmluZyk6IFZhcmlhbnRDb250ZXh0IHtcbiAgdmFyIHBhcnRzID0gdmNmTGluZS5zcGxpdCgnXFx0Jyk7XG4gIHZhciBtYXhGcmVxdWVuY3kgPSBudWxsO1xuICB2YXIgbWluRnJlcXVlbmN5ID0gbnVsbDtcbiAgdmFyIGNhbGxzID0gW107XG5cbiAgaWYgKHBhcnRzLmxlbmd0aD49Nyl7XG4gICAgdmFyIHBhcmFtcyA9IHBhcnRzWzddLnNwbGl0KCc7Jyk7IC8vIHByb2Nlc3MgSU5GTyBmaWVsZFxuICAgIGZvciAodmFyIGk9MDtpPHBhcmFtcy5sZW5ndGg7aSsrKSB7XG4gICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbaV07XG4gICAgICBpZiAocGFyYW0uc3RhcnRzV2l0aChcIkFGPVwiKSkge1xuICAgICAgICBtYXhGcmVxdWVuY3kgPSAwLjA7XG4gICAgICAgIG1pbkZyZXF1ZW5jeSA9IDEuMDtcbiAgICAgICAgdmFyIGZyZXF1ZW5jaWVzU3RyaW5ncyA9IHBhcmFtLnN1YnN0cigzKS5zcGxpdChcIixcIik7XG4gICAgICAgIGZvciAodmFyIGo9MDtqPGZyZXF1ZW5jaWVzU3RyaW5ncy5sZW5ndGg7aisrKSB7XG4gICAgICAgICAgdmFyIGN1cnJlbnRGcmVxdWVuY3kgPSBwYXJzZUZsb2F0KGZyZXF1ZW5jaWVzU3RyaW5nc1tqXSk7XG4gICAgICAgICAgbWF4RnJlcXVlbmN5ID0gTWF0aC5tYXgobWF4RnJlcXVlbmN5LCBjdXJyZW50RnJlcXVlbmN5KTtcbiAgICAgICAgICBtaW5GcmVxdWVuY3kgPSBNYXRoLm1pbihtaW5GcmVxdWVuY3ksIGN1cnJlbnRGcmVxdWVuY3kpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcHJvY2VzcyBnZW5vdHlwZSBpbmZvcm1hdGlvbiBmb3IgZWFjaCBzYW1wbGVcbiAgICBpZiAocGFydHMubGVuZ3RoID4gOSkge1xuICAgICAgdmFyIHNhbXBsZV9pID0gMDsgLy8ga2VlcHMgdHJhY2sgb2Ygd2hpY2ggc2FtcGxlIHdlIGFyZSBwcm9jZXNzaW5nXG4gICAgICBmb3IgKGkgPSA5OyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGdlbm90eXBlID0gcGFydHNbaV0uc3BsaXQoJzonKVswXS5zcGxpdChcIi9cIikubWFwKGkgPT4gcGFyc2VJbnQoaSkpO1xuICAgICAgICAvLyBUT0RPIGlzIGl0IGV2ZXIgbm90IDI/XG4gICAgICAgIGlmIChnZW5vdHlwZS5sZW5ndGggPT0gMikge1xuICAgICAgICAgIGlmIChwYXJzZUludChnZW5vdHlwZVswXSkgPT0gMSB8fCBwYXJzZUludChnZW5vdHlwZVsxXSkgPT0gMSkge1xuICAgICAgICAgICAgLy8gVE9ETyBkbyB5b3UgaGF2ZSB0byBvdmVyd3JpdGUgd2l0aCBjb25jYXQ/XG4gICAgICAgICAgICB2YXIgY2FsbCA9IG5ldyBDYWxsKHNhbXBsZXNbc2FtcGxlX2ldLCBnZW5vdHlwZSxcbiAgICAgICAgICAgICAgICBzYW1wbGVzW3NhbXBsZV9pXSwgXCJUcnVlXCIpOyAvLyBjdXJyZW50bHkgbm90IGRvaW5nIGFueXRoaW5nIHdpdGggcGhhc2luZ1xuICAgICAgICAgICAgY2FsbHMgPSBjYWxscy5jb25jYXQoY2FsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNhbXBsZV9pKys7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHZhciBjb250aWcgPSBwYXJ0c1swXTtcbiAgdmFyIHBvc2l0aW9uID0gTnVtYmVyKHBhcnRzWzFdKTtcblxuICByZXR1cm4gbmV3IFZhcmlhbnRDb250ZXh0KG5ldyBWYXJpYW50KHtcbiAgICBjb250aWc6IGNvbnRpZyxcbiAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgaWQ6IHBhcnRzWzJdLFxuICAgIHJlZjogcGFydHNbM10sXG4gICAgYWx0OiBwYXJ0c1s0XSxcbiAgICBtYWpvckZyZXF1ZW5jeTogbWF4RnJlcXVlbmN5LFxuICAgIG1pbm9yRnJlcXVlbmN5OiBtaW5GcmVxdWVuY3ksXG4gICAgdmNmTGluZSxcbiAgfSksIGNhbGxzKTtcbn1cblxuXG5mdW5jdGlvbiBjb21wYXJlTG9jdXNMaW5lKGE6IExvY3VzTGluZSwgYjogTG9jdXNMaW5lKTogbnVtYmVyIHtcbiAgLy8gU29ydCBsZXhpY29ncmFwaGljYWxseSBieSBjb250aWcsIHRoZW4gbnVtZXJpY2FsbHkgYnkgcG9zaXRpb24uXG4gIGlmIChhLmNvbnRpZyA8IGIuY29udGlnKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9IGVsc2UgaWYgKGEuY29udGlnID4gYi5jb250aWcpIHtcbiAgICByZXR1cm4gKzE7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGEucG9zaXRpb24gLSBiLnBvc2l0aW9uO1xuICB9XG59XG5cblxuLy8gKGJhc2VkIG9uIHVuZGVyc2NvcmUgc291cmNlKVxuZnVuY3Rpb24gbG93ZXN0SW5kZXg8VD4oaGF5c3RhY2s6IFRbXSwgbmVlZGxlOiBULCBjb21wYXJlOiAoYTogVCwgYjogVCk9Pm51bWJlcik6IG51bWJlciB7XG4gIHZhciBsb3cgPSAwLFxuICAgICAgaGlnaCA9IGhheXN0YWNrLmxlbmd0aDtcbiAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICB2YXIgbWlkID0gTWF0aC5mbG9vcigobG93ICsgaGlnaCkgLyAyKSxcbiAgICAgICAgYyA9IGNvbXBhcmUoaGF5c3RhY2tbbWlkXSwgbmVlZGxlKTtcbiAgICBpZiAoYyA8IDApIHtcbiAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBsb3c7XG59XG5cblxuY2xhc3MgSW1tZWRpYXRlVmNmRmlsZSB7XG4gIGxpbmVzOiBMb2N1c0xpbmVbXTtcbiAgY29udGlnTWFwOiB7W2tleTpzdHJpbmddOnN0cmluZ307ICAvLyBjYW5vbmljYWwgbWFwXG4gIHNhbXBsZXM6IHN0cmluZ1tdO1xuXG4gIGNvbnN0cnVjdG9yKHNhbXBsZXM6IHN0cmluZ1tdLCBsaW5lczogTG9jdXNMaW5lW10pIHtcbiAgICB0aGlzLnNhbXBsZXMgPSBzYW1wbGVzO1xuICAgIHRoaXMubGluZXMgPSBsaW5lcztcbiAgICB0aGlzLmNvbnRpZ01hcCA9IHRoaXMuZXh0cmFjdENvbnRpZ3MoKTtcbiAgfVxuXG4gIGV4dHJhY3RDb250aWdzKCk6IHtba2V5OnN0cmluZ106c3RyaW5nfSB7XG4gICAgdmFyIGNvbnRpZ3MgPSBbXSxcbiAgICAgICAgbGFzdENvbnRpZyA9ICcnO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpbmUgPSB0aGlzLmxpbmVzW2ldO1xuICAgICAgaWYgKGxpbmUuY29udGlnICE9IGxhc3RDb250aWcpIHtcbiAgICAgICAgY29udGlncy5wdXNoKGxpbmUuY29udGlnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgY29udGlnTWFwID0ge307XG4gICAgY29udGlncy5mb3JFYWNoKGNvbnRpZyA9PiB7XG4gICAgICBpZiAoY29udGlnLnNsaWNlKDAsIDMpID09ICdjaHInKSB7XG4gICAgICAgIGNvbnRpZ01hcFtjb250aWcuc2xpY2UoNCldID0gY29udGlnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGlnTWFwWydjaHInICsgY29udGlnXSA9IGNvbnRpZztcbiAgICAgIH1cbiAgICAgIGNvbnRpZ01hcFtjb250aWddID0gY29udGlnO1xuICAgIH0pO1xuICAgIHJldHVybiBjb250aWdNYXA7XG4gIH1cblxuICBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBWYXJpYW50Q29udGV4dFtdIHtcbiAgICB2YXIgbGluZXMgPSB0aGlzLmxpbmVzO1xuICAgIHZhciBjb250aWcgPSB0aGlzLmNvbnRpZ01hcFtyYW5nZS5jb250aWddO1xuICAgIGlmICghY29udGlnKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgdmFyIHN0YXJ0TG9jdXMgPSB7XG4gICAgICAgIGNvbnRpZzogY29udGlnLFxuICAgICAgICBwb3NpdGlvbjogcmFuZ2Uuc3RhcnQoKSxcbiAgICAgICAgbGluZTogJydcbiAgICAgIH0sXG4gICAgICBlbmRMb2N1cyA9IHtcbiAgICAgICAgY29udGlnOiBjb250aWcsXG4gICAgICAgIHBvc2l0aW9uOiByYW5nZS5zdG9wKCksXG4gICAgICAgIGxpbmU6ICcnXG4gICAgICB9O1xuICAgIHZhciBzdGFydEluZGV4ID0gbG93ZXN0SW5kZXgobGluZXMsIHN0YXJ0TG9jdXMsIGNvbXBhcmVMb2N1c0xpbmUpO1xuXG4gICAgdmFyIHJlc3VsdDogTG9jdXNMaW5lW10gPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChjb21wYXJlTG9jdXNMaW5lKGxpbmVzW2ldLCBlbmRMb2N1cykgPiAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVzdWx0LnB1c2gobGluZXNbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQubWFwKGxpbmUgPT4gZXh0cmFjdFZhcmlhbnRDb250ZXh0KHRoaXMuc2FtcGxlcywgbGluZS5saW5lKSk7XG4gIH1cbn1cblxuXG5jbGFzcyBWY2ZGaWxlIHtcbiAgcmVtb3RlRmlsZTogQWJzdHJhY3RGaWxlO1xuICBpbW1lZGlhdGU6IFEuUHJvbWlzZTxJbW1lZGlhdGVWY2ZGaWxlPjtcblxuICBjb25zdHJ1Y3RvcihyZW1vdGVGaWxlOiBBYnN0cmFjdEZpbGUpIHtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuXG4gICAgdGhpcy5pbW1lZGlhdGUgPSB0aGlzLnJlbW90ZUZpbGUuZ2V0QWxsU3RyaW5nKCkudGhlbih0eHQgPT4ge1xuICAgICAgLy8gUnVubmluZyB0aGlzIG9uIGEgMTJNQiBzdHJpbmcgdGFrZXMgfjgwbXMgb24gbXkgMjAxNCBNYWNib29rIFByb1xuICAgICAgdmFyIHR4dExpbmVzID0gdHh0LnNwbGl0KCdcXG4nKTtcbiAgICAgIHZhciBsaW5lcyA9ICB0eHRMaW5lc1xuICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihsaW5lID0+IChsaW5lLmxlbmd0aCAmJiBsaW5lWzBdICE9ICcjJykpXG4gICAgICAgICAgICAgICAgICAgICAubWFwKGV4dHJhY3RMb2N1c0xpbmUpO1xuXG4gICAgICB2YXIgaGVhZGVyID0gdHh0TGluZXMuZmlsdGVyKGxpbmUgPT4gKGxpbmUubGVuZ3RoICYmIGxpbmVbMF0gPT0gJyMnKSk7XG5cbiAgICAgIHZhciBzYW1wbGVzID0gZXh0cmFjdFNhbXBsZXMoaGVhZGVyKTtcblxuICAgICAgcmV0dXJuIFtzYW1wbGVzLCBsaW5lc107XG4gICAgfSkudGhlbihyZXN1bHRzID0+IHtcbiAgICAgIHZhciBzYW1wbGVzID0gcmVzdWx0c1swXTtcbiAgICAgIHZhciBsaW5lcyA9IHJlc3VsdHNbMV07XG4gICAgICAvLyBTb3J0aW5nIHRoaXMgc3RydWN0dXJlIGZyb20gdGhlIDEyTUIgVkNGIGZpbGUgdGFrZXMgfjYwbXNcbiAgICAgIGxpbmVzLnNvcnQoY29tcGFyZUxvY3VzTGluZSk7XG4gICAgICByZXR1cm4gbmV3IEltbWVkaWF0ZVZjZkZpbGUoc2FtcGxlcywgbGluZXMpO1xuICAgIH0pO1xuICAgIHRoaXMuaW1tZWRpYXRlLmRvbmUoKTtcbiAgfVxuXG4gIGdldENhbGxOYW1lcygpOiBRLlByb21pc2U8c3RyaW5nW10+IHtcbiAgICByZXR1cm4gdGhpcy5pbW1lZGlhdGUudGhlbihpbW1lZGlhdGUgPT4ge1xuICAgICAgcmV0dXJuIGltbWVkaWF0ZS5zYW1wbGVzO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogUS5Qcm9taXNlPFZhcmlhbnRDb250ZXh0W10+IHtcbiAgICByZXR1cm4gdGhpcy5pbW1lZGlhdGUudGhlbihpbW1lZGlhdGUgPT4ge1xuICAgICAgcmV0dXJuIGltbWVkaWF0ZS5nZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2UpO1xuICAgIH0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBWY2ZGaWxlXG59O1xuIiwiLyoqXG4gKiBBIGRhdGEgc291cmNlIHdoaWNoIGltcGxlbWVudHMgZ2VuZXJpYyBKU09OIHByb3RvY29sLlxuICogQ3VycmVudGx5IG9ubHkgdXNlZCB0byBsb2FkIGFsaWdubWVudHMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtBbGlnbm1lbnR9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgdHlwZSB7RGF0YVNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9EYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgR0E0R0hBbGlnbm1lbnQgZnJvbSAnLi4vR0E0R0hBbGlnbm1lbnQnO1xuXG5mdW5jdGlvbiBjcmVhdGUoanNvbjogc3RyaW5nKTogRGF0YVNvdXJjZTxBbGlnbm1lbnQ+IHtcblxuICAvLyBwYXJzZSBqc29uXG4gIHZhciBwYXJzZWRKc29uID0gSlNPTi5wYXJzZShqc29uKTtcbiAgdmFyIHJlYWRzOiBBbGlnbm1lbnRbXSA9IFtdO1xuXG4gIC8vIGZpbGwgcmVhZHMgd2l0aCBqc29uXG4gIGlmICghXy5pc0VtcHR5KHBhcnNlZEpzb24pKSB7XG4gICAgICByZWFkcyA9IF8udmFsdWVzKHBhcnNlZEpzb24uYWxpZ25tZW50cykubWFwKGFsaWdubWVudCA9PiBuZXcgR0E0R0hBbGlnbm1lbnQoYWxpZ25tZW50KSk7XG4gIH1cblxuICBmdW5jdGlvbiByYW5nZUNoYW5nZWQobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgLy8gRGF0YSBpcyBhbHJlYWR5IHBhcnNlZCwgc28gaW1tZWRpYXRlbHkgcmV0dXJuXG4gICAgdmFyIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKG5ld1JhbmdlLmNvbnRpZywgbmV3UmFuZ2Uuc3RhcnQsIG5ld1JhbmdlLnN0b3ApO1xuICAgIG8udHJpZ2dlcignbmV3ZGF0YScsIHJhbmdlKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogQWxpZ25tZW50W10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcbiAgICB2YXIgciA9IF8uZmlsdGVyKHJlYWRzLCByZWFkID0+IHJlYWQuaW50ZXJzZWN0cyhyYW5nZSkpO1xuICAgIHJldHVybiByO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkLFxuICAgIGdldEZlYXR1cmVzSW5SYW5nZSxcblxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvbmNlOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6IChzdHJpbmcsIGFueSkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTtcbiAgcmV0dXJuIG87XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGVcbn07XG4iLCIvKipcbiAqIEEgZGF0YSBzb3VyY2Ugd2hpY2ggaW1wbGVtZW50cyBnZW5lcmljIEpTT04gcHJvdG9jb2wuXG4gKiBDdXJyZW50bHkgb25seSB1c2VkIHRvIGxvYWQgYWxpZ25tZW50cy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0RhdGFTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvRGF0YVNvdXJjZSc7XG5pbXBvcnQgRmVhdHVyZSBmcm9tICcuLi9kYXRhL2ZlYXR1cmUnO1xuXG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2V9IGZyb20gJy4uL3R5cGVzJztcblxuZnVuY3Rpb24gY3JlYXRlKGpzb246IHN0cmluZyk6IERhdGFTb3VyY2U8RmVhdHVyZT4ge1xuXG4gIC8vIHBhcnNlIGpzb25cbiAgdmFyIHBhcnNlZEpzb24gPSBKU09OLnBhcnNlKGpzb24pO1xuICB2YXIgZmVhdHVyZXM6IEZlYXR1cmVbXSA9IFtdO1xuXG4gIC8vIGZpbGwgZmVhdHVyZXMgd2l0aCBqc29uXG4gIGlmICghXy5pc0VtcHR5KHBhcnNlZEpzb24pKSB7XG4gICAgICBmZWF0dXJlcyA9IF8udmFsdWVzKHBhcnNlZEpzb24uZmVhdHVyZXMpLm1hcChmZWF0dXJlID0+IEZlYXR1cmUuZnJvbUdBNEdIKGZlYXR1cmUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJhbmdlQ2hhbmdlZChuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAvLyBEYXRhIGlzIGFscmVhZHkgcGFyc2VkLCBzbyBpbW1lZGlhdGVseSByZXR1cm5cbiAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwobmV3UmFuZ2UuY29udGlnLCBuZXdSYW5nZS5zdGFydCwgbmV3UmFuZ2Uuc3RvcCk7XG4gICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpO1xuICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBGZWF0dXJlW10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcbiAgICB2YXIgciA9IF8uZmlsdGVyKGZlYXR1cmVzLCBmZWF0dXJlID0+IGZlYXR1cmUuaW50ZXJzZWN0cyhyYW5nZSkpO1xuICAgIHJldHVybiByO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkLFxuICAgIGdldEZlYXR1cmVzSW5SYW5nZSxcblxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvbmNlOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6IChzdHJpbmcsIGFueSkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTtcbiAgcmV0dXJuIG87XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGVcbn07XG4iLCIvKipcbiAqIEEgZGF0YSBzb3VyY2Ugd2hpY2ggaW1wbGVtZW50cyBnZW5lcmljIEpTT04gcHJvdG9jb2wuXG4gKiBDdXJyZW50bHkgb25seSB1c2VkIHRvIGxvYWQgYWxpZ25tZW50cy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZjZkRhdGFTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvVmNmRGF0YVNvdXJjZSc7XG5pbXBvcnQge1ZhcmlhbnQsIFZhcmlhbnRDb250ZXh0fSBmcm9tICcuLi9kYXRhL3ZhcmlhbnQnO1xuXG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2V9IGZyb20gJy4uL3R5cGVzJztcblxuZnVuY3Rpb24gY3JlYXRlKGpzb246IHN0cmluZyk6IFZjZkRhdGFTb3VyY2Uge1xuXG4gIC8vIHBhcnNlIGpzb25cbiAgdmFyIHBhcnNlZEpzb24gPSBKU09OLnBhcnNlKGpzb24pO1xuICB2YXIgdmFyaWFudHM6IFZhcmlhbnRDb250ZXh0W10gPSBbXTtcbiAgdmFyIGNhbGxTZXROYW1lczogc3RyaW5nW10gPSBbXTtcblxuICAvLyBmaWxsIHZhcmlhbnRzIHdpdGgganNvblxuICBpZiAoIV8uaXNFbXB0eShwYXJzZWRKc29uKSkge1xuICAgICAgdmFyaWFudHMgPSBfLnZhbHVlcyhwYXJzZWRKc29uLnZhcmlhbnRzKS5tYXAodmFyaWFudCA9PiBuZXcgVmFyaWFudENvbnRleHQoVmFyaWFudC5mcm9tR0E0R0godmFyaWFudCksdmFyaWFudC5jYWxscykpO1xuICAgICAgY2FsbFNldE5hbWVzID0gXy5tYXAodmFyaWFudHNbMF0uY2FsbHMsIGMgPT4gYy5jYWxsU2V0TmFtZSk7XG4gIH1cblxuICBmdW5jdGlvbiByYW5nZUNoYW5nZWQobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgLy8gRGF0YSBpcyBhbHJlYWR5IHBhcnNlZCwgc28gaW1tZWRpYXRlbHkgcmV0dXJuXG4gICAgdmFyIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKG5ld1JhbmdlLmNvbnRpZywgbmV3UmFuZ2Uuc3RhcnQsIG5ld1JhbmdlLnN0b3ApO1xuICAgIG8udHJpZ2dlcignbmV3ZGF0YScsIHJhbmdlKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VmFyaWFudHNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmFyaWFudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG4gICAgdmFyIGZpbHRlcmVkID0gXy5maWx0ZXIodmFyaWFudHMsIHZhcmlhbnQgPT4gdmFyaWFudC5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gICAgcmV0dXJuIF8ubWFwKGZpbHRlcmVkLCBmID0+IGYudmFyaWFudCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRHZW5vdHlwZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmFyaWFudENvbnRleHRbXSB7XG4gICAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG5cbiAgICAgIHJldHVybiBfLmZpbHRlcih2YXJpYW50cywgdmFyaWFudCA9PiB2YXJpYW50LmludGVyc2VjdHMocmFuZ2UpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENhbGxOYW1lcygpOiBRLlByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgIHJldHVybiBRLnJlc29sdmUoY2FsbFNldE5hbWVzKTtcbiAgfVxuXG4gIHZhciBvID0ge1xuICAgIHJhbmdlQ2hhbmdlZCxcbiAgICBnZXRWYXJpYW50c0luUmFuZ2UsXG4gICAgZ2V0R2Vub3R5cGVzSW5SYW5nZSxcbiAgICBnZXRDYWxsTmFtZXMsXG5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb25jZTogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RyaW5nLCBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7XG4gIHJldHVybiBvO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlXG59O1xuIiwiLyoqXG4gKiBUaGlzIGV4cG9zZXMgdGhlIG1haW4gZW50cnkgcG9pbnQgaW50byBwaWxldXAuanMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtUcmFjaywgVmlzdWFsaXplZFRyYWNrLCBWaXpXaXRoT3B0aW9uc30gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge0FsbGVsRnJlcXVlbmN5U3RyYXRlZ3l9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHR5cGUge1N0YXRlfSBmcm9tICcuL3R5cGVzJztcblxuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuXG4vLyBEYXRhIHNvdXJjZXNcbmltcG9ydCBUd29CaXREYXRhU291cmNlIGZyb20gJy4vc291cmNlcy9Ud29CaXREYXRhU291cmNlJztcbmltcG9ydCBCaWdCZWREYXRhU291cmNlIGZyb20gJy4vc291cmNlcy9CaWdCZWREYXRhU291cmNlJztcbmltcG9ydCBWY2ZEYXRhU291cmNlIGZyb20gJy4vc291cmNlcy9WY2ZEYXRhU291cmNlJztcbmltcG9ydCBCYW1EYXRhU291cmNlIGZyb20gJy4vc291cmNlcy9CYW1EYXRhU291cmNlJztcbmltcG9ydCBFbXB0eVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvRW1wdHlTb3VyY2UnO1xuXG4vLyBEYXRhIHNvdXJjZXMgZnJvbSBqc29uXG5pbXBvcnQgR0E0R0hBbGlnbm1lbnRKc29uIGZyb20gJy4vanNvbi9HQTRHSEFsaWdubWVudEpzb24nO1xuaW1wb3J0IEdBNEdIVmFyaWFudEpzb24gZnJvbSAnLi9qc29uL0dBNEdIVmFyaWFudEpzb24nO1xuaW1wb3J0IEdBNEdIRmVhdHVyZUpzb24gZnJvbSAnLi9qc29uL0dBNEdIRmVhdHVyZUpzb24nO1xuXG4vLyBHQTRHSCBzb3VyY2VzXG5pbXBvcnQgR0E0R0hBbGlnbm1lbnRTb3VyY2UgZnJvbSAnLi9zb3VyY2VzL0dBNEdIQWxpZ25tZW50U291cmNlJztcbmltcG9ydCBHQTRHSFZhcmlhbnRTb3VyY2UgZnJvbSAnLi9zb3VyY2VzL0dBNEdIVmFyaWFudFNvdXJjZSc7XG5pbXBvcnQgR0E0R0hGZWF0dXJlU291cmNlIGZyb20gJy4vc291cmNlcy9HQTRHSEZlYXR1cmVTb3VyY2UnO1xuaW1wb3J0IEdBNEdIR2VuZVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvR0E0R0hHZW5lU291cmNlJztcblxuLy8gVmlzdWFsaXphdGlvbnNcbmltcG9ydCBDb3ZlcmFnZVRyYWNrIGZyb20gJy4vdml6L0NvdmVyYWdlVHJhY2snO1xuaW1wb3J0IEdlbm9tZVRyYWNrIGZyb20gJy4vdml6L0dlbm9tZVRyYWNrJztcbmltcG9ydCBHZW5lVHJhY2sgZnJvbSAnLi92aXovR2VuZVRyYWNrJztcbmltcG9ydCBGZWF0dXJlVHJhY2sgZnJvbSAnLi92aXovRmVhdHVyZVRyYWNrJztcbmltcG9ydCBMb2NhdGlvblRyYWNrIGZyb20gJy4vdml6L0xvY2F0aW9uVHJhY2snO1xuaW1wb3J0IFBpbGV1cFRyYWNrIGZyb20gJy4vdml6L1BpbGV1cFRyYWNrJztcbmltcG9ydCBTY2FsZVRyYWNrIGZyb20gJy4vdml6L1NjYWxlVHJhY2snO1xuaW1wb3J0IFZhcmlhbnRUcmFjayBmcm9tICcuL3Zpei9WYXJpYW50VHJhY2snO1xuaW1wb3J0IEdlbm90eXBlVHJhY2sgZnJvbSAnLi92aXovR2Vub3R5cGVUcmFjayc7XG5pbXBvcnQgUm9vdCBmcm9tICcuL1Jvb3QnO1xuXG50eXBlIEdlbm9tZVJhbmdlID0ge1xuICBjb250aWc6IHN0cmluZztcbiAgc3RhcnQ6IG51bWJlcjtcbiAgc3RvcDogbnVtYmVyO1xufVxuXG50eXBlIFBpbGV1cCA9IHtcbiAgc2V0UmFuZ2UocmFuZ2U6IEdlbm9tZVJhbmdlKTogdm9pZDtcbiAgZ2V0UmFuZ2UoKTogR2Vub21lUmFuZ2U7XG4gIGRlc3Ryb3koKTogdm9pZDtcbn1cblxudHlwZSBQaWxldXBQYXJhbXMgPSB7XG4gIHJhbmdlOiB7XG4gICAgY29udGlnOiBzdHJpbmcsXG4gICAgc3RhcnQ6IG51bWJlcixcbiAgICBzdG9wOiBudW1iZXJcbiAgfTtcbiAgdHJhY2tzOiBUcmFja1tdO1xufVxuXG5mdW5jdGlvbiBmaW5kUmVmZXJlbmNlKHRyYWNrczogVmlzdWFsaXplZFRyYWNrW10pOiA/VmlzdWFsaXplZFRyYWNrIHtcbiAgcmV0dXJuIF8uZmluZCh0cmFja3MsIHQgPT4gISF0LnRyYWNrLmlzUmVmZXJlbmNlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlKGVsT3JJZDogc3RyaW5nfEVsZW1lbnQsIHBhcmFtczogUGlsZXVwUGFyYW1zKTogUGlsZXVwIHtcbiAgdmFyIGVsID0gdHlwZW9mKGVsT3JJZCkgPT0gJ3N0cmluZycgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbE9ySWQpIDogZWxPcklkO1xuICBpZiAoIWVsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gY3JlYXRlIHBpbGV1cCB3aXRoIG5vbi1leGlzdGVudCBlbGVtZW50ICR7ZWxPcklkLnRvU3RyaW5nKCl9YCk7XG4gIH1cblxuICB2YXIgdml6VHJhY2tzID0gcGFyYW1zLnRyYWNrcy5tYXAoZnVuY3Rpb24odHJhY2s6IFRyYWNrKTogVmlzdWFsaXplZFRyYWNrIHtcbiAgICB2YXIgc291cmNlID0gdHJhY2suZGF0YSA/IHRyYWNrLmRhdGEgOiB0cmFjay52aXouY29tcG9uZW50LmRlZmF1bHRTb3VyY2U7XG4gICAgaWYoIXNvdXJjZSkge1xuICAgICAgdmFyIGRpc3BsYXlOYW1lID0gdHJhY2sudml6LmNvbXBvbmVudC5kaXNwbGF5TmFtZSAhPSBudWxsID8gdHJhY2sudml6LmNvbXBvbmVudC5kaXNwbGF5TmFtZSA6ICd0cmFjayc7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBUcmFjayAnJHtkaXNwbGF5TmFtZX0nIGRvZXNuJ3QgaGF2ZSBhIGRlZmF1bHQgYCArXG4gICAgICAgIGBkYXRhIHNvdXJjZTsgeW91IG11c3Qgc3BlY2lmeSBvbmUgd2hlbiBpbml0aWFsaXppbmcgaXQuYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge3Zpc3VhbGl6YXRpb246IHRyYWNrLnZpeiwgc291cmNlLCB0cmFja307XG4gIH0pO1xuXG4gIHZhciByZWZlcmVuY2VUcmFjayA9IGZpbmRSZWZlcmVuY2Uodml6VHJhY2tzKTtcbiAgaWYgKCFyZWZlcmVuY2VUcmFjaykge1xuICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3QgaW5jbHVkZSBhdCBsZWFzdCBvbmUgdHJhY2sgd2l0aCB0eXBlPXJlZmVyZW5jZScpO1xuICB9XG5cbiAgdmFyIHJlYWN0RWxlbWVudCA9XG4gICAgICBSZWFjdERPTS5yZW5kZXIoPFJvb3QgcmVmZXJlbmNlU291cmNlPXtyZWZlcmVuY2VUcmFjay5zb3VyY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tzPXt2aXpUcmFja3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFJhbmdlPXtwYXJhbXMucmFuZ2V9IC8+LCBlbCk7XG5cbiAgLy9pZiB0aGUgZWxlbWVudCBkb2Vzbid0IGJlbG9uZyB0byBkb2N1bWVudCBET00gb2JzZXJ2ZSBET00gdG8gZGV0ZWN0XG4gIC8vd2hlbiBpdCdzIGF0dGFjaGVkXG4gIHZhciBvYnNlcnZlciA9IG51bGw7XG4gIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgaWYgKCFib2R5KSB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gbWF0Y2g6IGRvY3VtZW50LmJvZHlcIik7XG5cbiAgaWYgKCFib2R5LmNvbnRhaW5zKGVsKSkge1xuICAgIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKSB7XG4gICAgICBtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtdXRhdGlvbikge1xuICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcpIHtcbiAgICAgICAgICB2YXIgYWRkZWQ9IGZhbHNlO1xuICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aDtpKyspIHtcbiAgICAgICAgICAgIC8vd2hlbiBhZGRlZCBlbGVtZW50IGlzIGVsZW1lbnQgd2hlcmUgd2UgdmlzdWFsaXplIHBpbGV1cFxuICAgICAgICAgICAgLy9vciBpdCBjb250YWlucyBlbGVtZW50IHdoZXJlIHdlIHZpc3VhbGl6ZSBwaWxldXBcbiAgICAgICAgICAgIC8vdGhlbiB3ZSB3aWxsIGhhdmUgdG8gdXBkYXRlIGNvbXBvbmVudFxuICAgICAgICAgICAgaWYgKG11dGF0aW9uLmFkZGVkTm9kZXNbaV09PT1lbCB8fCBtdXRhdGlvbi5hZGRlZE5vZGVzW2ldLmNvbnRhaW5zKGVsKSkge1xuICAgICAgICAgICAgICBhZGRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhZGRlZCkge1xuICAgICAgICAgICAgaWYgKHJlYWN0RWxlbWVudCkge1xuICAgICAgICAgICAgICByZWFjdEVsZW1lbnQuc2V0U3RhdGUoe3VwZGF0ZVNpemU6dHJ1ZX0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgJ1JlYWN0RWxlbWVudCB3YXMgbm90IGluaXRpYWxpemVkIHByb3Blcmx5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIC8vIGNvbmZpZ3VyYXRpb24gb2YgdGhlIG9ic2VydmVyOlxuICAgIHZhciBjb25maWcgPSB7YXR0cmlidXRlczogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlLCBjaGFyYWN0ZXJEYXRhOiB0cnVlLCBzdWJ0cmVlOiB0cnVlfTtcblxuICAgIC8vIHN0YXJ0IG9ic2VydmluZyBkb2N1bWVudFxuICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQsIGNvbmZpZyk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNldFJhbmdlKHJhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgICAgaWYgKHJlYWN0RWxlbWVudCA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyAnQ2Fubm90IGNhbGwgc2V0UmFuZ2Ugb24gYSBkZXN0cm95ZWQgcGlsZXVwJztcbiAgICAgIH1cbiAgICAgIHJlYWN0RWxlbWVudC5oYW5kbGVSYW5nZUNoYW5nZShyYW5nZSk7XG4gICAgfSxcbiAgICBnZXRSYW5nZSgpOiBHZW5vbWVSYW5nZSB7XG4gICAgICBpZiAocmVhY3RFbGVtZW50ID09PSBudWxsKSB7XG4gICAgICAgIHRocm93ICdDYW5ub3QgY2FsbCBnZXRSYW5nZSBvbiBhIGRlc3Ryb3llZCBwaWxldXAnO1xuICAgICAgfVxuICAgICAgaWYgKHJlYWN0RWxlbWVudC5zdGF0ZS5yYW5nZSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBfLmNsb25lKHJlYWN0RWxlbWVudC5zdGF0ZS5yYW5nZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyAnQ2Fubm90IGNhbGwgc2V0UmFuZ2Ugb24gbm9uLWV4aXN0ZW50IHJhbmdlJztcbiAgICAgIH1cblxuICAgIH0sXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgIGlmICghdml6VHJhY2tzKSB7XG4gICAgICAgIHRocm93ICdDYW5ub3QgY2FsbCBkZXN0cm95KCkgdHdpY2Ugb24gdGhlIHNhbWUgcGlsZXVwJztcbiAgICAgIH1cbiAgICAgIHZpelRyYWNrcy5mb3JFYWNoKCh7c291cmNlfSkgPT4ge1xuICAgICAgICBzb3VyY2Uub2ZmKCk7XG4gICAgICB9KTtcbiAgICAgIFJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUoZWwpO1xuICAgICAgcmVhY3RFbGVtZW50ID0gbnVsbDtcbiAgICAgIHJlZmVyZW5jZVRyYWNrID0gbnVsbDtcbiAgICAgIHZpelRyYWNrcyA9IG51bGw7XG5cbiAgICAgIC8vIGRpc2Nvbm5lY3Qgb2JzZXJ2ZXIgaWYgaXQgd2FzIGNyZWF0ZWRcbiAgICAgIGlmIChvYnNlcnZlciAhPT0gbnVsbCAmJiBvYnNlcnZlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbnR5cGUgVml6T2JqZWN0ID0gKChvcHRpb25zOiA/T2JqZWN0KSA9PiBWaXpXaXRoT3B0aW9ucyk7XG5cbmZ1bmN0aW9uIG1ha2VWaXpPYmplY3QoY29tcG9uZW50OiBDbGFzczxSZWFjdC5Db21wb25lbnQ8Vml6UHJvcHM8YW55PiwgU3RhdGU+Pik6IFZpek9iamVjdCB7XG4gIHJldHVybiBvcHRpb25zID0+IHtcbiAgICAvLyAkRmxvd0lnbm9yZTogVE9ETyByZW1vdmUgZmxvdyBzdXBwcmVzc2lvblxuICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7fSwgY29tcG9uZW50LmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICByZXR1cm4ge2NvbXBvbmVudCwgb3B0aW9uc307XG4gIH07XG59XG5cbnZhciBwaWxldXAgPSB7XG4gIGNyZWF0ZTogY3JlYXRlLFxuICBmb3JtYXRzOiB7XG4gICAgYmFtOiBCYW1EYXRhU291cmNlLmNyZWF0ZSxcbiAgICBhbGlnbm1lbnRKc29uOiBHQTRHSEFsaWdubWVudEpzb24uY3JlYXRlLFxuICAgIHZhcmlhbnRKc29uOiBHQTRHSFZhcmlhbnRKc29uLmNyZWF0ZSxcbiAgICBmZWF0dXJlSnNvbjogR0E0R0hGZWF0dXJlSnNvbi5jcmVhdGUsXG4gICAgdmNmOiBWY2ZEYXRhU291cmNlLmNyZWF0ZSxcbiAgICB0d29CaXQ6IFR3b0JpdERhdGFTb3VyY2UuY3JlYXRlLFxuICAgIGJpZ0JlZDogQmlnQmVkRGF0YVNvdXJjZS5jcmVhdGUsXG4gICAgR0FSZWFkQWxpZ25tZW50OiBHQTRHSEFsaWdubWVudFNvdXJjZS5jcmVhdGUsXG4gICAgR0FWYXJpYW50OiBHQTRHSFZhcmlhbnRTb3VyY2UuY3JlYXRlLFxuICAgIEdBRmVhdHVyZTogR0E0R0hGZWF0dXJlU291cmNlLmNyZWF0ZSxcbiAgICBHQUdlbmU6IEdBNEdIR2VuZVNvdXJjZS5jcmVhdGUsXG4gICAgZW1wdHk6IEVtcHR5U291cmNlLmNyZWF0ZVxuICB9LFxuICB2aXo6IHtcbiAgICBjb3ZlcmFnZTogbWFrZVZpek9iamVjdChDb3ZlcmFnZVRyYWNrKSxcbiAgICBnZW5vbWU6ICAgbWFrZVZpek9iamVjdChHZW5vbWVUcmFjayksXG4gICAgZ2VuZXM6ICAgIG1ha2VWaXpPYmplY3QoR2VuZVRyYWNrKSxcbiAgICBmZWF0dXJlczogbWFrZVZpek9iamVjdChGZWF0dXJlVHJhY2spLFxuICAgIGxvY2F0aW9uOiBtYWtlVml6T2JqZWN0KExvY2F0aW9uVHJhY2spLFxuICAgIHNjYWxlOiAgICBtYWtlVml6T2JqZWN0KFNjYWxlVHJhY2spLFxuICAgIHZhcmlhbnRzOiBtYWtlVml6T2JqZWN0KFZhcmlhbnRUcmFjayksXG4gICAgZ2Vub3R5cGVzOiBtYWtlVml6T2JqZWN0KEdlbm90eXBlVHJhY2spLFxuICAgIHBpbGV1cDogICBtYWtlVml6T2JqZWN0KFBpbGV1cFRyYWNrKVxuICB9LFxuICBlbnVtOiB7XG4gICAgdmFyaWFudHM6IHtcbiAgICAgIGFsbGVsRnJlcXVlbmN5U3RyYXRlZ3k6IEFsbGVsRnJlcXVlbmN5U3RyYXRlZ3ksXG4gICAgfSxcbiAgfSxcbiAgdmVyc2lvbjogJzAuNi4xMSdcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gcGlsZXVwO1xuXG4vLyBFeHBvcnQgYSBnbG9iYWwgdW50aWwgdGhlIGRpc3RyaWJ1dGVkIHBhY2thZ2Ugd29ya3Mgd2l0aCBDb21tb25KU1xuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9oYW1tZXJsYWIvcGlsZXVwLmpzL2lzc3Vlcy8xMzZcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3cucGlsZXVwID0gcGlsZXVwO1xufVxuIiwiLyoqXG4gKiBMaWdodHdlaWdodCByZXBsYWNlbWVudCBmb3IgZDMuc2NhbGUubGluZWFyKCkuXG4gKiBUaGlzIG9ubHkgc3VwcG9ydHMgbnVtZXJpYyBzY2FsZXMsIGUuZy4gc2NhbGUucmFuZ2UoWydyZWQnLCAnYmx1ZSddKSBpcyBpbnZhbGlkLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBsaW5lYXIoKTogYW55IHtcbiAgdmFyIGNsYW1wZWQgPSBmYWxzZSxcbiAgICAgIGRvbWFpbiA9IFswLCAxXSxcbiAgICAgIHJhbmdlID0gWzAsIDFdO1xuXG4gIHZhciBtZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoY2xhbXBlZCkge1xuICAgICAgeCA9IE1hdGgubWF4KE1hdGgubWluKHgsIGRvbWFpblsxXSksIGRvbWFpblswXSk7XG4gICAgfVxuICAgIC8vIFRPRE86IGNvbXB1dGUgY29lZmZpY2llbnRzIG9uY2UuXG4gICAgcmV0dXJuICh4IC0gZG9tYWluWzBdKSAvIChkb21haW5bMV0gLSBkb21haW5bMF0pICogKHJhbmdlWzFdIC0gcmFuZ2VbMF0pICsgcmFuZ2VbMF07XG4gIH07XG5cbiAgbWUuY2xhbXAgPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKHggPT09IHVuZGVmaW5lZCkgcmV0dXJuIGNsYW1wZWQ7XG4gICAgY2xhbXBlZCA9IHg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIG1lLmRvbWFpbiA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZG9tYWluO1xuICAgIGRvbWFpbiA9IHg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIG1lLnJhbmdlID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09PSB1bmRlZmluZWQpIHJldHVybiByYW5nZTtcbiAgICByYW5nZSA9IHg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIG1lLmludmVydCA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoY2xhbXBlZCkge1xuICAgICAgdGhyb3cgYENhbid0IGludmVydCBhIGNsYW1wZWQgbGluZWFyIHNjYWxlLmA7XG4gICAgfVxuICAgIHJldHVybiAoeCAtIHJhbmdlWzBdKSAvIChyYW5nZVsxXSAtIHJhbmdlWzBdKSAqIChkb21haW5bMV0gLSBkb21haW5bMF0pICsgZG9tYWluWzBdO1xuICB9O1xuICBtZS5uaWNlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gVGhpcyBtZXRob2QgaXMgYWRhcHRlZCBkaXJlY3RseSBmcm9tIGQzJ3MgbGluZWFyIHNjYWxlIG5pY2UgbWV0aG9kLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWJvc3RvY2svZDMvYmxvYi81Yjk4MWExOGQvc3JjL3NjYWxlL2xpbmVhci5qcyNMOTQtTDExMlxuICAgIHZhciBtID0gMTA7XG4gICAgdmFyIGV4dGVudCA9IGRvbWFpbixcbiAgICAgICAgc3BhbiA9IE1hdGguYWJzKGV4dGVudFsxXSAtIGV4dGVudFswXSksXG4gICAgICAgIHN0ZXAgPSBNYXRoLnBvdygxMCwgTWF0aC5mbG9vcihNYXRoLmxvZyhzcGFuIC8gbSkgLyBNYXRoLkxOMTApKSxcbiAgICAgICAgZXJyID0gbSAvIHNwYW4gKiBzdGVwO1xuXG4gICAgLy8gRmlsdGVyIHRpY2tzIHRvIGdldCBjbG9zZXIgdG8gdGhlIGRlc2lyZWQgY291bnQuXG4gICAgaWYgKGVyciA8PSAwLjE1KSBzdGVwICo9IDEwO1xuICAgIGVsc2UgaWYgKGVyciA8PSAwLjM1KSBzdGVwICo9IDU7XG4gICAgZWxzZSBpZiAoZXJyIDw9IDAuNzUpIHN0ZXAgKj0gMjtcblxuICAgIHZhciBuaWNlID0ge1xuICAgICAgZmxvb3I6IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIE1hdGguZmxvb3IoeCAvIHN0ZXApICogc3RlcDsgfSxcbiAgICAgIGNlaWw6IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIE1hdGguY2VpbCh4IC8gc3RlcCkgKiBzdGVwOyB9XG4gICAgfTtcblxuICAgIHZhciBpMCA9IDAsXG4gICAgICAgIGkxID0gMSxcbiAgICAgICAgeDAgPSBkb21haW5baTBdLFxuICAgICAgICB4MSA9IGRvbWFpbltpMV0sXG4gICAgICAgIGR4O1xuXG4gICAgaWYgKHgxIDwgeDApIHtcbiAgICAgIGR4ID0gaTA7IGkwID0gaTE7IGkxID0gZHg7XG4gICAgICBkeCA9IHgwOyB4MCA9IHgxOyB4MSA9IGR4O1xuICAgIH1cblxuICAgIGRvbWFpbltpMF0gPSBuaWNlLmZsb29yKHgwKTtcbiAgICBkb21haW5baTFdID0gbmljZS5jZWlsKHgxKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICByZXR1cm4gbWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0geyBsaW5lYXIgfTtcbiIsIi8qIEBmbG93ICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQge0V2ZW50c30gZnJvbSAnYmFja2JvbmUnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IEJhbUZpbGUgZnJvbSAnLi4vZGF0YS9iYW0nO1xuaW1wb3J0IFJlbW90ZUZpbGUgZnJvbSAnLi4vUmVtb3RlRmlsZSc7XG5cbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHR5cGUge0FsaWdubWVudH0gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCB0eXBlICB7RGF0YVNvdXJjZX0gZnJvbSAnLi9EYXRhU291cmNlJztcbi8vIEdlbm9tZSByYW5nZXMgYXJlIHJvdW5kZWQgdG8gbXVsdGlwbGVzIG9mIHRoaXMgZm9yIGZldGNoaW5nLlxuLy8gVGhpcyByZWR1Y2VzIG5ldHdvcmsgYWN0aXZpdHkgd2hpbGUgZmV0Y2hpbmcuXG4vLyBUT0RPOiB0dW5lIHRoaXMgdmFsdWVcbnZhciBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IDEwMDtcbnZhciBaRVJPX0JBU0VEID0gZmFsc2U7XG5cblxuZnVuY3Rpb24gY3JlYXRlRnJvbUJhbUZpbGUocmVtb3RlU291cmNlOiBCYW1GaWxlKTogRGF0YVNvdXJjZTxBbGlnbm1lbnQ+IHtcbiAgdmFyIHJlYWRzOiB7W2tleTpzdHJpbmddOiBBbGlnbm1lbnR9ID0ge307XG5cbiAgLy8gTWFwcGluZyBmcm9tIGNvbnRpZyBuYW1lIHRvIGNhbm9uaWNhbCBjb250aWcgbmFtZS5cbiAgdmFyIGNvbnRpZ05hbWVzOiB7W2tleTpzdHJpbmddOiBzdHJpbmd9ID0ge307XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10gPSBbXTtcblxuICBmdW5jdGlvbiBhZGRSZWFkKHJlYWQ6IEFsaWdubWVudCkge1xuICAgIHZhciBrZXkgPSByZWFkLmdldEtleSgpO1xuICAgIGlmICghcmVhZHNba2V5XSkge1xuICAgICAgcmVhZHNba2V5XSA9IHJlYWQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2F2ZUNvbnRpZ01hcHBpbmcoaGVhZGVyOiBPYmplY3QpIHtcbiAgICBoZWFkZXIucmVmZXJlbmNlcy5mb3JFYWNoKHJlZiA9PiB7XG4gICAgICB2YXIgbmFtZSA9IHJlZi5uYW1lO1xuICAgICAgY29udGlnTmFtZXNbbmFtZV0gPSBuYW1lO1xuICAgICAgY29udGlnTmFtZXNbJ2NocicgKyBuYW1lXSA9IG5hbWU7XG4gICAgICBpZiAobmFtZS5zbGljZSgwLCAzKSA9PSAnY2hyJykge1xuICAgICAgICBjb250aWdOYW1lc1tuYW1lLnNsaWNlKDMpXSA9IG5hbWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaChyYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICB2YXIgcmVmc1Byb21pc2UgPSAhXy5pc0VtcHR5KGNvbnRpZ05hbWVzKSA/IFEud2hlbigpIDpcbiAgICAgICAgcmVtb3RlU291cmNlLmhlYWRlci50aGVuKHNhdmVDb250aWdNYXBwaW5nKTtcblxuICAgIC8vIEZvciBCQU1zIHdpdGhvdXQgaW5kZXggY2h1bmtzLCB3ZSBuZWVkIHRvIGZldGNoIHRoZSBlbnRpcmUgQkFJIGZpbGVcbiAgICAvLyBiZWZvcmUgd2UgY2FuIGtub3cgaG93IGxhcmdlIHRoZSBCQU0gaGVhZGVyIGlzLiBJZiB0aGUgaGVhZGVyIGlzXG4gICAgLy8gcGVuZGluZywgaXQncyBhbG1vc3QgY2VydGFpbmx5IGJlY2F1c2UgdGhlIEJBSSBmaWxlIGlzIGluIGZsaWdodC5cbiAgICBRLndoZW4oKS50aGVuKCgpID0+IHtcbiAgICAgIGlmIChyZWZzUHJvbWlzZS5pc1BlbmRpbmcoKSAmJiAhcmVtb3RlU291cmNlLmhhc0luZGV4Q2h1bmtzKSB7XG4gICAgICAgIG8udHJpZ2dlcignbmV0d29ya3Byb2dyZXNzJywge1xuICAgICAgICAgIHN0YXR1czogJ0ZldGNoaW5nIEJBTSBpbmRleCAtLSB1c2UgaW5kZXggY2h1bmtzIHRvIHNwZWVkIHRoaXMgdXAnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLmRvbmUoKTtcblxuICAgIHJldHVybiByZWZzUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIHZhciBjb250aWdOYW1lID0gY29udGlnTmFtZXNbcmFuZ2UuY29udGlnXTtcbiAgICAgIHZhciBpbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChjb250aWdOYW1lLCByYW5nZS5zdGFydCwgcmFuZ2Uuc3RvcCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgaW50ZXJ2YWwgaXMgYWxyZWFkeSBpbiB0aGUgY2FjaGUuXG4gICAgICAvLyBJZiBub3QsIGltbWVkaWF0ZWx5IFwiY292ZXJcIiBpdCB0byBwcmV2ZW50IGR1cGxpY2F0ZSByZXF1ZXN0cy5cbiAgICAgIGlmIChpbnRlcnZhbC5pc0NvdmVyZWRCeShjb3ZlcmVkUmFuZ2VzKSkge1xuICAgICAgICByZXR1cm4gUS53aGVuKCk7XG4gICAgICB9XG5cbiAgICAgIGludGVydmFsID0gaW50ZXJ2YWwucm91bmQoQkFTRV9QQUlSU19QRVJfRkVUQ0gsIFpFUk9fQkFTRUQpO1xuICAgICAgdmFyIG5ld1JhbmdlcyA9IGludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMoY292ZXJlZFJhbmdlcyk7XG4gICAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgICAgY292ZXJlZFJhbmdlcyA9IENvbnRpZ0ludGVydmFsLmNvYWxlc2NlKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgICByZXR1cm4gUS5hbGwobmV3UmFuZ2VzLm1hcChyYW5nZSA9PlxuICAgICAgICAgIHJlbW90ZVNvdXJjZS5nZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2UpXG4gICAgICAgICAgICAucHJvZ3Jlc3MocHJvZ3Jlc3NFdmVudCA9PiB7XG4gICAgICAgICAgICAgIG8udHJpZ2dlcignbmV0d29ya3Byb2dyZXNzJywgcHJvZ3Jlc3NFdmVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVhZHMgPT4ge1xuICAgICAgICAgICAgICByZWFkcy5mb3JFYWNoKHJlYWQgPT4gYWRkUmVhZChyZWFkKSk7XG4gICAgICAgICAgICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICAgICAgICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZlYXR1cmVzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IEFsaWdubWVudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG4gICAgaWYgKF8uaXNFbXB0eShjb250aWdOYW1lcykpIHJldHVybiBbXTtcblxuICAgIHZhciBjYW5vbmljYWxSYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChjb250aWdOYW1lc1tyYW5nZS5jb250aWddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5zdGFydCgpLCByYW5nZS5zdG9wKCkpO1xuXG4gICAgcmV0dXJuIF8uZmlsdGVyKHJlYWRzLCByZWFkID0+IHJlYWQuaW50ZXJzZWN0cyhjYW5vbmljYWxSYW5nZSkpO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkOiBmdW5jdGlvbihuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAgIGZldGNoKG5ld1JhbmdlKS5kb25lKCk7XG4gICAgfSxcbiAgICBnZXRGZWF0dXJlc0luUmFuZ2UsXG5cbiAgICAvLyBUaGVzZSBhcmUgaGVyZSB0byBtYWtlIEZsb3cgaGFwcHkuXG4gICAgb246ICgpID0+IHt9LFxuICAgIG9uY2U6ICgpID0+IHt9LFxuICAgIG9mZjogKCkgPT4ge30sXG4gICAgdHJpZ2dlcjogKHN0YXR1czogc3RyaW5nLCBwYXJhbTogYW55KSA9PiB7fVxuICB9O1xuICBfLmV4dGVuZChvLCBFdmVudHMpOyAgLy8gTWFrZSB0aGlzIGFuIGV2ZW50IGVtaXR0ZXJcblxuICByZXR1cm4gbztcbn1cblxudHlwZSBCYW1TcGVjID0ge1xuICB1cmw6IHN0cmluZztcbiAgaW5kZXhVcmw6IHN0cmluZztcbiAgaW5kZXhDaHVua3M/OiBPYmplY3Q7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZShzcGVjOiBCYW1TcGVjKTogRGF0YVNvdXJjZTxBbGlnbm1lbnQ+IHtcbiAgdmFyIHVybCA9IHNwZWMudXJsO1xuICBpZiAoIXVybCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBVUkwgZnJvbSB0cmFjayBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHNwZWMpfWApO1xuICB9XG4gIHZhciBpbmRleFVybCA9IHNwZWMuaW5kZXhVcmw7XG4gIGlmICghaW5kZXhVcmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgaW5kZXhVUkwgZnJvbSB0cmFjayBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHNwZWMpfWApO1xuICB9XG5cbiAgLy8gVE9ETzogdGhpcyBpcyBvdmVybHkgcmVwZXRpdGl2ZSwgc2VlIGZsb3cgaXNzdWUgZmFjZWJvb2svZmxvdyM0MzdcbiAgdmFyIGJhbUZpbGUgPSBzcGVjLmluZGV4Q2h1bmtzID9cbiAgICAgIG5ldyBCYW1GaWxlKG5ldyBSZW1vdGVGaWxlKHVybCksIG5ldyBSZW1vdGVGaWxlKGluZGV4VXJsKSwgc3BlYy5pbmRleENodW5rcykgOlxuICAgICAgbmV3IEJhbUZpbGUobmV3IFJlbW90ZUZpbGUodXJsKSwgbmV3IFJlbW90ZUZpbGUoaW5kZXhVcmwpKTtcbiAgcmV0dXJuIGNyZWF0ZUZyb21CYW1GaWxlKGJhbUZpbGUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tQmFtRmlsZVxufTtcbiIsIi8qIEBmbG93ICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHtzdHJUb1N0cmFuZH0gZnJvbSAnLi4vQWxpZ25tZW50JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuaW1wb3J0IEJpZ0JlZCBmcm9tICcuLi9kYXRhL0JpZ0JlZCc7XG5pbXBvcnQgR2VuZSBmcm9tICcuLi9kYXRhL2dlbmUnO1xuXG5pbXBvcnQgdHlwZSB7RGF0YVNvdXJjZX0gZnJvbSAnLi9EYXRhU291cmNlJztcblxuLy8gVGhlIGZpZWxkcyBhcmUgZGVzY3JpYmVkIGF0IGh0dHA6Ly9nZW5vbWUudWNzYy5lZHUvRkFRL0ZBUWZvcm1hdCNmb3JtYXQxXG4vLyBGaWVsZHMgNC0xMiBhcmUgb3B0aW9uYWxcbmZ1bmN0aW9uIHBhcnNlQmVkRmVhdHVyZShmKTogR2VuZSB7XG4gIHZhciBwb3NpdGlvbiA9IG5ldyBDb250aWdJbnRlcnZhbChmLmNvbnRpZywgZi5zdGFydCwgZi5zdG9wKSxcbiAgICAgIHggPSBmLnJlc3Quc3BsaXQoJ1xcdCcpO1xuXG4gIC8vIGlmIG5vIGlkLCBnZW5lcmF0ZSByYW5kb21seSBmb3IgdW5pcXVlIHN0b3JhZ2VcbiAgdmFyIGlkID0geFswXSA/IHhbMF0gOiBwb3NpdGlvbi50b1N0cmluZygpOyAvLyBlLmcuIEVOU1QwMDAwMDM1OTU5N1xuICB2YXIgc2NvcmUgPSB4WzFdID8gcGFyc2VJbnQoeFsxXSkgOiAxMDAwOyAvLyBudW1iZXIgZnJvbSAwLTEwMDBcbiAgdmFyIHN0cmFuZCA9ICBzdHJUb1N0cmFuZCh4WzJdKTsgLy8gZWl0aGVyICssIC0gb3IgLlxuICB2YXIgY29kaW5nUmVnaW9uID0gKHhbM10gJiYgeFs0XSkgPyBuZXcgSW50ZXJ2YWwoTnVtYmVyKHhbM10pLCBOdW1iZXIoeFs0XSkpIDpuZXcgSW50ZXJ2YWwoZi5zdGFydCwgZi5zdG9wKTtcbiAgdmFyIGdlbmVJZCA9ICB4WzldID8geFs5XSA6IGlkO1xuICB2YXIgbmFtZSA9ICB4WzEwXSA/IHhbMTBdIDogXCJcIjtcblxuICAvLyBwYXJzZSBleG9uc1xuICB2YXIgZXhvbnMgPSBbXTtcbiAgaWYgKHhbN10gJiYgeFs4XSkge1xuICAgIC8vIGV4b25zIGFycmF5cyBzb21ldGltZXMgaGF2ZSB0cmFpbGluZyBjb21tYXNcbiAgICB2YXIgZXhvbkxlbmd0aHMgPSB4WzddLnJlcGxhY2UoLywqJC8sICcnKS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpLFxuICAgICAgZXhvblN0YXJ0cyA9IHhbOF0ucmVwbGFjZSgvLCokLywgJycpLnNwbGl0KCcsJykubWFwKE51bWJlcik7XG5cbiAgICBleG9ucyA9IF8uemlwKGV4b25TdGFydHMsIGV4b25MZW5ndGhzKVxuICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oW3N0YXJ0LCBsZW5ndGhdKSB7XG4gICAgICAgICAgICAgICByZXR1cm4gbmV3IEludGVydmFsKGYuc3RhcnQgKyBzdGFydCwgZi5zdGFydCArIHN0YXJ0ICsgbGVuZ3RoKTtcbiAgICAgICAgICAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBuZXcgR2VuZSh7XG4gICAgcG9zaXRpb24sXG4gICAgaWQ6IGlkLFxuICAgIHNjb3JlOiBzY29yZSxcbiAgICBzdHJhbmQ6IHN0cmFuZCxcbiAgICBjb2RpbmdSZWdpb246IGNvZGluZ1JlZ2lvbixcbiAgICBnZW5lSWQ6IGdlbmVJZCxcbiAgICBuYW1lOiBuYW1lLFxuICAgIGV4b25zXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGcm9tQmlnQmVkRmlsZShyZW1vdGVTb3VyY2U6IEJpZ0JlZCk6IERhdGFTb3VyY2U8R2VuZT4ge1xuICAvLyBDb2xsZWN0aW9uIG9mIGdlbmVzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gbG9hZGVkLlxuICB2YXIgZ2VuZXM6IHtba2V5OnN0cmluZ106IEdlbmV9ID0ge307XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBBcnJheTxDb250aWdJbnRlcnZhbDxzdHJpbmc+PiA9IFtdO1xuXG4gIGZ1bmN0aW9uIGFkZEdlbmUobmV3R2VuZSkge1xuICAgIGlmICghZ2VuZXNbbmV3R2VuZS5pZF0pIHtcbiAgICAgIGdlbmVzW25ld0dlbmUuaWRdID0gbmV3R2VuZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBHZW5lW10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIF8uZWFjaChnZW5lcywgZ2VuZSA9PiB7XG4gICAgICBpZiAocmFuZ2UuaW50ZXJzZWN0cyhnZW5lLnBvc2l0aW9uKSkge1xuICAgICAgICByZXN1bHRzLnB1c2goZ2VuZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaChyYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICB2YXIgaW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCwgcmFuZ2Uuc3RvcCk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGlzIGludGVydmFsIGlzIGFscmVhZHkgaW4gdGhlIGNhY2hlLlxuICAgIGlmIChpbnRlcnZhbC5pc0NvdmVyZWRCeShjb3ZlcmVkUmFuZ2VzKSkge1xuICAgICAgcmV0dXJuIFEud2hlbigpO1xuICAgIH1cblxuICAgIGNvdmVyZWRSYW5nZXMucHVzaChpbnRlcnZhbCk7XG4gICAgY292ZXJlZFJhbmdlcyA9IENvbnRpZ0ludGVydmFsLmNvYWxlc2NlKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgcmV0dXJuIHJlbW90ZVNvdXJjZS5nZXRGZWF0dXJlQmxvY2tzT3ZlcmxhcHBpbmcoaW50ZXJ2YWwpLnRoZW4oZmVhdHVyZUJsb2NrcyA9PiB7XG4gICAgICBmZWF0dXJlQmxvY2tzLmZvckVhY2goZmIgPT4ge1xuICAgICAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goZmIucmFuZ2UpO1xuICAgICAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG4gICAgICAgIHZhciBnZW5lcyA9IGZiLnJvd3MubWFwKHBhcnNlQmVkRmVhdHVyZSk7XG4gICAgICAgIGdlbmVzLmZvckVhY2goZ2VuZSA9PiBhZGRHZW5lKGdlbmUpKTtcbiAgICAgIH0pO1xuICAgICAgLy93ZSBoYXZlIG5ldyBkYXRhIGZyb20gb3VyIGludGVybmFsIGJsb2NrIHJhbmdlXG4gICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCBpbnRlcnZhbCk7XG4gICAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQ6IGZ1bmN0aW9uKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgICAgZmV0Y2gobmV3UmFuZ2UpLmRvbmUoKTtcbiAgICB9LFxuICAgIGdldEZlYXR1cmVzSW5SYW5nZSxcblxuICAgIC8vIFRoZXNlIGFyZSBoZXJlIHRvIG1ha2UgRmxvdyBoYXBweS5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb25jZTogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RhdHVzOiBzdHJpbmcsIHBhcmFtOiBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBjcmVhdGUoZGF0YToge3VybDpzdHJpbmd9KTogRGF0YVNvdXJjZTxHZW5lPiB7XG4gIHZhciB1cmwgPSBkYXRhLnVybDtcbiAgaWYgKCF1cmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgVVJMIGZyb20gdHJhY2s6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG4gIH1cblxuICByZXR1cm4gY3JlYXRlRnJvbUJpZ0JlZEZpbGUobmV3IEJpZ0JlZCh1cmwpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZSxcbiAgY3JlYXRlRnJvbUJpZ0JlZEZpbGVcbn07XG4iLCIvKlxuICogVGhpcyBpcyBhIGR1bW15IGRhdGEgc291cmNlIHRvIGJlIHVzZWQgYnkgdHJhY2tzIHRoYXQgZG8gbm90IGRlcGVuZCBvbiBkYXRhLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2V9IGZyb20gJy4uL3R5cGVzJztcblxudHlwZSBFbXB0eVNvdXJjZSA9IHtcbiAgcmFuZ2VDaGFuZ2VkOiAobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiB2b2lkO1xuICBvbjogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nKSA9PiB2b2lkO1xuICB0cmlnZ2VyOiAoZXZlbnQ6IHN0cmluZywgLi4uYXJnczphbnkpID0+IHZvaWQ7XG59XG5cbnZhciBjcmVhdGUgPSAoKTogRW1wdHlTb3VyY2UgPT4gKHtcbiAgcmFuZ2VDaGFuZ2VkOiAoKSA9PiB7fSxcbiAgb246ICgpID0+IHt9LFxuICBvZmY6ICgpID0+IHt9LFxuICB0cmlnZ2VyOiAoKSA9PiB7fVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGVcbn07XG4iLCIvKipcbiAqIEEgZGF0YSBzb3VyY2Ugd2hpY2ggaW1wbGVtZW50cyB0aGUgR0E0R0ggcHJvdG9jb2wuXG4gKiBDdXJyZW50bHkgb25seSB1c2VkIHRvIGxvYWQgYWxpZ25tZW50cy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0dlbm9tZVJhbmdlfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgdHlwZSB7QWxpZ25tZW50fSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuaW1wb3J0IHR5cGUge0RhdGFTb3VyY2V9IGZyb20gJy4vRGF0YVNvdXJjZSc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBHQTRHSEFsaWdubWVudCBmcm9tICcuLi9HQTRHSEFsaWdubWVudCc7XG5cbnZhciBBTElHTk1FTlRTX1BFUl9SRVFVRVNUID0gMjAwOyAgLy8gVE9ETzogZXhwbGFpbiB0aGlzIGNob2ljZS5cbnZhciBaRVJPX0JBU0VEID0gZmFsc2U7XG5cblxuLy8gR2Vub21lIHJhbmdlcyBhcmUgcm91bmRlZCB0byBtdWx0aXBsZXMgb2YgdGhpcyBmb3IgZmV0Y2hpbmcuXG4vLyBUaGlzIHJlZHVjZXMgbmV0d29yayBhY3Rpdml0eSB3aGlsZSBmZXRjaGluZy5cbi8vIFRPRE86IHR1bmUgdGhpcyB2YWx1ZSAtLSBzZXR0aW5nIGl0IGNsb3NlIHRvIHRoZSByZWFkIGxlbmd0aCB3aWxsIHJlc3VsdCBpblxuLy8gbG90cyBvZiByZWFkcyBiZWluZyBmZXRjaGVkIHR3aWNlLCBidXQgc2V0dGluZyBpdCB0b28gbGFyZ2Ugd2lsbCByZXN1bHQgaW5cbi8vIGJ1bGtpZXIgcmVxdWVzdHMuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDA7XG5cbnR5cGUgR0E0R0hTcGVjID0ge1xuICBlbmRwb2ludDogc3RyaW5nO1xuICByZWFkR3JvdXBJZDogc3RyaW5nO1xuICAvLyBIQUNLIGZvciBkZW1vLiBJZiBzZXQsIHdpbGwgYWx3YXlzIHVzZSB0aGlzIHJlZmVyZW5jZSBpZC5cbiAgLy8gVGhpcyBpcyBmb3IgZmV0Y2hpbmcgcmVmZXJlbmNlSWRzIHNwZWNpZmllZCBpbiBHQTRHSCByZWZlcmVuY2VcbiAgLy8gc2VydmVyXG4gIGZvcmNlZFJlZmVyZW5jZUlkOiA/c3RyaW5nO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlKHNwZWM6IEdBNEdIU3BlYyk6IERhdGFTb3VyY2U8QWxpZ25tZW50PiB7XG4gIHZhciB1cmwgPSBzcGVjLmVuZHBvaW50ICsgJy9yZWFkcy9zZWFyY2gnO1xuXG4gIHZhciByZWFkczoge1trZXk6c3RyaW5nXTogQWxpZ25tZW50fSA9IHt9O1xuXG4gIC8vIFJhbmdlcyBmb3Igd2hpY2ggd2UgaGF2ZSBjb21wbGV0ZSBpbmZvcm1hdGlvbiAtLSBubyBuZWVkIHRvIGhpdCBuZXR3b3JrLlxuICB2YXIgY292ZXJlZFJhbmdlczogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPltdID0gW107XG5cbiAgZnVuY3Rpb24gYWRkUmVhZHNGcm9tUmVzcG9uc2UocmVzcG9uc2U6IE9iamVjdCkge1xuICAgIGlmIChyZXNwb25zZS5hbGlnbm1lbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVzcG9uc2UuYWxpZ25tZW50cy5mb3JFYWNoKGFsaWdubWVudCA9PiB7XG4gICAgICAvLyBvcHRpbWl6YXRpb246IGRvbid0IGJvdGhlciBjb25zdHJ1Y3RpbmcgYSBHQTRHSEFsaWdubWVudCB1bmxlc3MgaXQncyBuZXcuXG4gICAgICB2YXIga2V5ID0gR0E0R0hBbGlnbm1lbnQua2V5RnJvbUdBNEdIUmVzcG9uc2UoYWxpZ25tZW50KTtcbiAgICAgIGlmIChrZXkgaW4gcmVhZHMpIHJldHVybjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBnYTRnaEFsaWdubWVudCA9IG5ldyBHQTRHSEFsaWdubWVudChhbGlnbm1lbnQpO1xuICAgICAgICByZWFkc1trZXldID0gZ2E0Z2hBbGlnbm1lbnQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIHNvbWV0aW1lcywgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIgZG9lcyBub3QgaGF2ZSBhbiBhbGlnbm1lbnQuXG4gICAgICAgIC8vIHRoaXMgd2lsbCBjYXRjaCBhbiBleGNlcHRpb24gaW4gdGhlIEdBNEdIQWxpZ25tZW50IGNvbnN0cnVjdG9yXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByYW5nZUNoYW5nZWQobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKG5ld1JhbmdlLmNvbnRpZywgbmV3UmFuZ2Uuc3RhcnQsIG5ld1JhbmdlLnN0b3ApO1xuICAgIGlmIChpbnRlcnZhbC5pc0NvdmVyZWRCeShjb3ZlcmVkUmFuZ2VzKSkgcmV0dXJuO1xuXG4gICAgaW50ZXJ2YWwgPSBpbnRlcnZhbC5yb3VuZChCQVNFX1BBSVJTX1BFUl9GRVRDSCwgWkVST19CQVNFRCk7XG5cbiAgICAvLyBzZWxlY3Qgb25seSBpbnRlcnZhbHMgbm90IHlldCBsb2FkZWQgaW50byBjb3ZlcmVkUmFuZ2Vzw59cbiAgICB2YXIgaW50ZXJ2YWxzID0gaW50ZXJ2YWwuY29tcGxlbWVudEludGVydmFscyhjb3ZlcmVkUmFuZ2VzKTtcblxuICAgIC8vIFdlIFwiY292ZXJcIiB0aGUgaW50ZXJ2YWwgaW1tZWRpYXRlbHkgKGJlZm9yZSB0aGUgcmVhZHMgaGF2ZSBhcnJpdmVkKSB0b1xuICAgIC8vIHByZXZlbnQgZHVwbGljYXRlIG5ldHdvcmsgcmVxdWVzdHMuXG4gICAgY292ZXJlZFJhbmdlcy5wdXNoKGludGVydmFsKTtcbiAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG5cbiAgICBpbnRlcnZhbHMuZm9yRWFjaChpID0+IHtcbiAgICAgIGZldGNoQWxpZ25tZW50c0ZvckludGVydmFsKGksIG51bGwsIDEgLyogZmlyc3QgcmVxdWVzdCAqLyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBub3RpZnlGYWlsdXJlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIG8udHJpZ2dlcignbmV0d29ya2ZhaWx1cmUnLCBtZXNzYWdlKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2hBbGlnbm1lbnRzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUb2tlbjogP3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtUmVxdWVzdHM6IG51bWJlcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignUE9TVCcsIHVybCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oZTogYW55KSB7XG4gICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlO1xuICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDQwMCkge1xuICAgICAgICBub3RpZnlGYWlsdXJlKHRoaXMuc3RhdHVzICsgJyAnICsgdGhpcy5zdGF0dXNUZXh0ICsgJyAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUpIHtcbiAgICAgICAgICBub3RpZnlGYWlsdXJlKCdFcnJvciBmcm9tIEdBNEdIIGVuZHBvaW50OiAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGRSZWFkc0Zyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpOyAgLy8gZGlzcGxheSBkYXRhIGFzIGl0IGNvbWVzIGluLlxuICAgICAgICAgIGlmIChyZXNwb25zZS5uZXh0UGFnZVRva2VuKSB7XG4gICAgICAgICAgICBmZXRjaEFsaWdubWVudHNGb3JJbnRlcnZhbChyYW5nZSwgcmVzcG9uc2UubmV4dFBhZ2VUb2tlbiwgbnVtUmVxdWVzdHMgKyAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgby50cmlnZ2VyKCduZXR3b3JrZG9uZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGU6IGFueSkge1xuICAgICAgbm90aWZ5RmFpbHVyZSgnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXM6ICcgKyB0aGlzLnN0YXR1cyk7XG4gICAgfSk7XG5cbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtwcm9ncmVzcycsIHtudW1SZXF1ZXN0c30pO1xuICAgIC8vIGhhY2sgZm9yIERFTU8uIGZvcmNlIEdBNEdIIHJlZmVyZW5jZSBJRFxuICAgIHZhciBjb250aWcgPSByYW5nZS5jb250aWc7XG4gICAgaWYgKHNwZWMuZm9yY2VkUmVmZXJlbmNlSWQgIT09IHVuZGVmaW5lZClcbiAgICB7XG4gICAgICBjb250aWcgPSBzcGVjLmZvcmNlZFJlZmVyZW5jZUlkO1xuICAgIH1cbiAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICBwYWdlVG9rZW46IHBhZ2VUb2tlbixcbiAgICAgIHBhZ2VTaXplOiBBTElHTk1FTlRTX1BFUl9SRVFVRVNULFxuICAgICAgcmVhZEdyb3VwSWRzOiBbc3BlYy5yZWFkR3JvdXBJZF0sXG4gICAgICByZWZlcmVuY2VJZDogY29udGlnLFxuICAgICAgc3RhcnQ6IHJhbmdlLnN0YXJ0KCksXG4gICAgICBlbmQ6IHJhbmdlLnN0b3AoKVxuICAgIH0pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZlYXR1cmVzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IEFsaWdubWVudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG5cbiAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSk7XG5cbiAgICByZXR1cm4gXy5maWx0ZXIocmVhZHMsIHJlYWQgPT4gcmVhZC5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQsXG4gICAgZ2V0RmVhdHVyZXNJblJhbmdlLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvbmNlOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6IChzdGF0dXM6IHN0cmluZywgcGFyYW06IGFueSkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTsgIC8vIE1ha2UgdGhpcyBhbiBldmVudCBlbWl0dGVyXG4gIHJldHVybiBvO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlXG59O1xuIiwiLyoqXG4gKiBBIGRhdGEgc291cmNlIHdoaWNoIGltcGxlbWVudHMgdGhlIEdBNEdIIEZlYXR1cmUgcHJvdG9jb2wuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcblxuaW1wb3J0IHR5cGUge0RhdGFTb3VyY2V9IGZyb20gJy4vRGF0YVNvdXJjZSc7XG5pbXBvcnQgRmVhdHVyZSBmcm9tICcuLi9kYXRhL2ZlYXR1cmUnO1xuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDA7XG52YXIgRkVBVFVSRVNfUEVSX1JFUVVFU1QgPSA0MDA7XG52YXIgWkVST19CQVNFRCA9IGZhbHNlO1xuXG5leHBvcnQgdHlwZSBHQTRHSEZlYXR1cmVTcGVjID0ge1xuICBlbmRwb2ludDogc3RyaW5nO1xuICBmZWF0dXJlU2V0SWQ6IHN0cmluZztcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZShzcGVjOiBHQTRHSEZlYXR1cmVTcGVjKTogRGF0YVNvdXJjZTxGZWF0dXJlPiB7XG4gIHZhciB1cmwgPSBzcGVjLmVuZHBvaW50ICsgJy9mZWF0dXJlcy9zZWFyY2gnO1xuXG4gIHZhciBmZWF0dXJlczoge1trZXk6c3RyaW5nXTogRmVhdHVyZX0gPSB7fTtcblxuICAvLyBSYW5nZXMgZm9yIHdoaWNoIHdlIGhhdmUgY29tcGxldGUgaW5mb3JtYXRpb24gLS0gbm8gbmVlZCB0byBoaXQgbmV0d29yay5cbiAgdmFyIGNvdmVyZWRSYW5nZXM6IENvbnRpZ0ludGVydmFsPHN0cmluZz5bXSA9IFtdO1xuXG4gIGZ1bmN0aW9uIGFkZEZlYXR1cmVzRnJvbVJlc3BvbnNlKHJlc3BvbnNlOiBPYmplY3QpIHtcbiAgICBpZiAocmVzcG9uc2UuZmVhdHVyZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJlc3BvbnNlLmZlYXR1cmVzLmZvckVhY2goZ2E0Z2hGZWF0dXJlID0+IHtcbiAgICAgIHZhciBjb250aWdJbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChnYTRnaEZlYXR1cmUucmVmZXJlbmNlTmFtZSwgZ2E0Z2hGZWF0dXJlLnN0YXJ0LCBnYTRnaEZlYXR1cmUuZW5kKTtcblxuICAgICAgdmFyIGtleSA9IGdhNGdoRmVhdHVyZS5pZCArIGNvbnRpZ0ludGVydmFsLnRvU3RyaW5nKCk7XG4gICAgICBpZiAoa2V5IGluIGZlYXR1cmVzKSByZXR1cm47XG4gICAgICB2YXIgZmVhdHVyZSA9IEZlYXR1cmUuZnJvbUdBNEdIKGdhNGdoRmVhdHVyZSk7XG4gICAgICBmZWF0dXJlc1trZXldID0gZmVhdHVyZTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJhbmdlQ2hhbmdlZChuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICB2YXIgaW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwobmV3UmFuZ2UuY29udGlnLCBuZXdSYW5nZS5zdGFydCwgbmV3UmFuZ2Uuc3RvcCk7XG4gICAgaWYgKGludGVydmFsLmlzQ292ZXJlZEJ5KGNvdmVyZWRSYW5nZXMpKSByZXR1cm47XG5cbiAgICBpbnRlcnZhbCA9IGludGVydmFsLnJvdW5kKEJBU0VfUEFJUlNfUEVSX0ZFVENILCBaRVJPX0JBU0VEKTtcblxuICAgIC8vIHNlbGVjdCBvbmx5IGludGVydmFscyBub3QgeWV0IGxvYWRlZCBpbnRvIGNvdmVyZWRSYW5nZXPDn1xuICAgIHZhciBpbnRlcnZhbHMgPSBpbnRlcnZhbC5jb21wbGVtZW50SW50ZXJ2YWxzKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgLy8gV2UgXCJjb3ZlclwiIHRoZSBpbnRlcnZhbCBpbW1lZGlhdGVseSAoYmVmb3JlIHRoZSByZWFkcyBoYXZlIGFycml2ZWQpIHRvXG4gICAgLy8gcHJldmVudCBkdXBsaWNhdGUgbmV0d29yayByZXF1ZXN0cy5cbiAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgIGNvdmVyZWRSYW5nZXMgPSBDb250aWdJbnRlcnZhbC5jb2FsZXNjZShjb3ZlcmVkUmFuZ2VzKTtcblxuICAgIGludGVydmFscy5mb3JFYWNoKGkgPT4ge1xuICAgICAgZmV0Y2hGZWF0dXJlc0ZvckludGVydmFsKGksIG51bGwsIDEgLyogZmlyc3QgcmVxdWVzdCAqLyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBub3RpZnlGYWlsdXJlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIG8udHJpZ2dlcignbmV0d29ya2ZhaWx1cmUnLCBtZXNzYWdlKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2hGZWF0dXJlc0ZvckludGVydmFsKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlVG9rZW46ID9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bVJlcXVlc3RzOiBudW1iZXIpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwpO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKGU6IGFueSkge1xuICAgICAgdmFyIHJlc3BvbnNlID0gdGhpcy5yZXNwb25zZTtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgbm90aWZ5RmFpbHVyZSh0aGlzLnN0YXR1cyArICcgJyArIHRoaXMuc3RhdHVzVGV4dCArICcgJyArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlKSB7XG4gICAgICAgICAgbm90aWZ5RmFpbHVyZSgnRXJyb3IgZnJvbSBHQTRHSCBGZWF0dXJlIGVuZHBvaW50OiAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGRGZWF0dXJlc0Zyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpOyAgLy8gZGlzcGxheSBkYXRhIGFzIGl0IGNvbWVzIGluLlxuICAgICAgICAgIGlmIChyZXNwb25zZS5uZXh0UGFnZVRva2VuKSB7XG4gICAgICAgICAgICBmZXRjaEZlYXR1cmVzRm9ySW50ZXJ2YWwocmFuZ2UsIHJlc3BvbnNlLm5leHRQYWdlVG9rZW4sIG51bVJlcXVlc3RzICsgMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICAgIG5vdGlmeUZhaWx1cmUoJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzOiAnICsgdGhpcy5zdGF0dXMpO1xuICAgIH0pO1xuXG4gICAgby50cmlnZ2VyKCduZXR3b3JrcHJvZ3Jlc3MnLCB7bnVtUmVxdWVzdHN9KTtcbiAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICBmZWF0dXJlU2V0SWQ6IHNwZWMuZmVhdHVyZVNldElkLFxuICAgICAgcGFnZVRva2VuOiBwYWdlVG9rZW4sXG4gICAgICBwYWdlU2l6ZTogRkVBVFVSRVNfUEVSX1JFUVVFU1QsXG4gICAgICByZWZlcmVuY2VOYW1lOiByYW5nZS5jb250aWcsXG4gICAgICBzdGFydDogcmFuZ2Uuc3RhcnQoKSxcbiAgICAgIGVuZDogcmFuZ2Uuc3RvcCgpXG4gICAgfSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogRmVhdHVyZVtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG4gICAgcmV0dXJuIF8uZmlsdGVyKGZlYXR1cmVzLCBmZWF0dXJlID0+IGZlYXR1cmUuaW50ZXJzZWN0cyhyYW5nZSkpO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkLFxuICAgIGdldEZlYXR1cmVzSW5SYW5nZSxcblxuICAgIC8vIFRoZXNlIGFyZSBoZXJlIHRvIG1ha2UgRmxvdyBoYXBweS5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb25jZTogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RhdHVzOiBzdHJpbmcsIHBhcmFtOiBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuICByZXR1cm4gbztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZVxufTtcbiIsIi8qKlxuICogQSBkYXRhIHNvdXJjZSB3aGljaCByZWFkcyBnZW5lcyBmcm9tIGEgR0E0R0ggRmVhdHVyZSBwcm90b2NvbC5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQge0V2ZW50c30gZnJvbSAnYmFja2JvbmUnO1xuaW1wb3J0IHR5cGUge0dlbm9tZVJhbmdlfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IHR5cGUge0dBNEdIRmVhdHVyZVNwZWN9ICBmcm9tICcuL0dBNEdIRmVhdHVyZVNvdXJjZSc7XG5cbmltcG9ydCB0eXBlIHtEYXRhU291cmNlfSBmcm9tICcuL0RhdGFTb3VyY2UnO1xuaW1wb3J0IEdlbmUgZnJvbSAnLi4vZGF0YS9nZW5lJztcblxudmFyIEJBU0VfUEFJUlNfUEVSX0ZFVENIID0gMTAwO1xudmFyIEdFTkVTX1BFUl9SRVFVRVNUID0gNDAwO1xudmFyIFpFUk9fQkFTRUQgPSBmYWxzZTtcblxuXG5mdW5jdGlvbiBjcmVhdGUoc3BlYzogR0E0R0hGZWF0dXJlU3BlYyk6IERhdGFTb3VyY2U8R2VuZT4ge1xuICB2YXIgdXJsID0gc3BlYy5lbmRwb2ludCArICcvZmVhdHVyZXMvc2VhcmNoJztcblxuICB2YXIgZ2VuZXM6IHtba2V5OnN0cmluZ106IEdlbmV9ID0ge307XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10gPSBbXTtcblxuICBmdW5jdGlvbiBhZGRGZWF0dXJlc0Zyb21SZXNwb25zZShyZXNwb25zZTogT2JqZWN0KSB7XG4gICAgaWYgKHJlc3BvbnNlLmZlYXR1cmVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXNwb25zZS5mZWF0dXJlcy5mb3JFYWNoKGdhNGdoRmVhdHVyZSA9PiB7XG4gICAgICB2YXIgY29udGlnSW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwoZ2E0Z2hGZWF0dXJlLnJlZmVyZW5jZU5hbWUsIGdhNGdoRmVhdHVyZS5zdGFydCwgZ2E0Z2hGZWF0dXJlLmVuZCk7XG5cbiAgICAgIHZhciBrZXkgPSBnYTRnaEZlYXR1cmUuaWQgKyBjb250aWdJbnRlcnZhbC50b1N0cmluZygpO1xuICAgICAgaWYgKGtleSBpbiBnZW5lcykgcmV0dXJuO1xuICAgICAgdmFyIGdlbmUgPSBHZW5lLmZyb21HQTRHSChnYTRnaEZlYXR1cmUpO1xuICAgICAgZ2VuZXNba2V5XSA9IGdlbmU7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByYW5nZUNoYW5nZWQobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKG5ld1JhbmdlLmNvbnRpZywgbmV3UmFuZ2Uuc3RhcnQsIG5ld1JhbmdlLnN0b3ApO1xuICAgIGlmIChpbnRlcnZhbC5pc0NvdmVyZWRCeShjb3ZlcmVkUmFuZ2VzKSkgcmV0dXJuO1xuXG4gICAgaW50ZXJ2YWwgPSBpbnRlcnZhbC5yb3VuZChCQVNFX1BBSVJTX1BFUl9GRVRDSCwgWkVST19CQVNFRCk7XG5cbiAgICAvLyBzZWxlY3Qgb25seSBpbnRlcnZhbHMgbm90IHlldCBsb2FkZWQgaW50byBjb3ZlcmVkUmFuZ2Vzw59cbiAgICB2YXIgaW50ZXJ2YWxzID0gaW50ZXJ2YWwuY29tcGxlbWVudEludGVydmFscyhjb3ZlcmVkUmFuZ2VzKTtcblxuICAgIC8vIFdlIFwiY292ZXJcIiB0aGUgaW50ZXJ2YWwgaW1tZWRpYXRlbHkgKGJlZm9yZSB0aGUgcmVhZHMgaGF2ZSBhcnJpdmVkKSB0b1xuICAgIC8vIHByZXZlbnQgZHVwbGljYXRlIG5ldHdvcmsgcmVxdWVzdHMuXG4gICAgY292ZXJlZFJhbmdlcy5wdXNoKGludGVydmFsKTtcbiAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG5cbiAgICBpbnRlcnZhbHMuZm9yRWFjaChpID0+IHtcbiAgICAgIGZldGNoRmVhdHVyZXNGb3JJbnRlcnZhbChpLCBudWxsLCAxKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdGlmeUZhaWx1cmUobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgby50cmlnZ2VyKCduZXR3b3JrZmFpbHVyZScsIG1lc3NhZ2UpO1xuICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaEZlYXR1cmVzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUb2tlbjogP3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtUmVxdWVzdHM6IG51bWJlcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignUE9TVCcsIHVybCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oZTogYW55KSB7XG4gICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlO1xuICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDQwMCkge1xuICAgICAgICBub3RpZnlGYWlsdXJlKHRoaXMuc3RhdHVzICsgJyAnICsgdGhpcy5zdGF0dXNUZXh0ICsgJyAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUpIHtcbiAgICAgICAgICBub3RpZnlGYWlsdXJlKCdFcnJvciBmcm9tIEdBNEdIIEZlYXR1cmUgZW5kcG9pbnQ6ICcgKyBKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFkZEZlYXR1cmVzRnJvbVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCByYW5nZSk7ICAvLyBkaXNwbGF5IGRhdGEgYXMgaXQgY29tZXMgaW4uXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLm5leHRQYWdlVG9rZW4pIHtcbiAgICAgICAgICAgIGZldGNoRmVhdHVyZXNGb3JJbnRlcnZhbChyYW5nZSwgcmVzcG9uc2UubmV4dFBhZ2VUb2tlbiwgbnVtUmVxdWVzdHMgKyAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgby50cmlnZ2VyKCduZXR3b3JrZG9uZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGU6IGFueSkge1xuICAgICAgbm90aWZ5RmFpbHVyZSgnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXM6ICcgKyB0aGlzLnN0YXR1cyk7XG4gICAgfSk7XG5cbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtwcm9ncmVzcycsIHtudW1SZXF1ZXN0c30pO1xuICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGZlYXR1cmVTZXRJZDogc3BlYy5mZWF0dXJlU2V0SWQsXG4gICAgICBwYWdlVG9rZW46IHBhZ2VUb2tlbixcbiAgICAgIHBhZ2VTaXplOiBHRU5FU19QRVJfUkVRVUVTVCxcbiAgICAgIHJlZmVyZW5jZU5hbWU6IHJhbmdlLmNvbnRpZyxcbiAgICAgIHN0YXJ0OiByYW5nZS5zdGFydCgpLFxuICAgICAgZW5kOiByYW5nZS5zdG9wKClcbiAgICB9KSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBHZW5lW10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcbiAgICByZXR1cm4gXy5maWx0ZXIoZ2VuZXMsIGdlbmUgPT4gZ2VuZS5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQsXG4gICAgZ2V0RmVhdHVyZXNJblJhbmdlLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvbmNlOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6IChzdGF0dXM6IHN0cmluZywgcGFyYW06IGFueSkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTsgIC8vIE1ha2UgdGhpcyBhbiBldmVudCBlbWl0dGVyXG4gIHJldHVybiBvO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlXG59O1xuIiwiLyoqXG4gKiBBIGRhdGEgc291cmNlIHdoaWNoIGltcGxlbWVudHMgdGhlIEdBNEdIIFZhcmlhbnQgcHJvdG9jb2wuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQge0V2ZW50c30gZnJvbSAnYmFja2JvbmUnO1xuaW1wb3J0IHR5cGUge0dlbm9tZVJhbmdlfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuXG5pbXBvcnQgdHlwZSB7VmNmRGF0YVNvdXJjZX0gZnJvbSAnLi9WY2ZEYXRhU291cmNlJztcbmltcG9ydCB7VmFyaWFudCwgVmFyaWFudENvbnRleHR9IGZyb20gJy4uL2RhdGEvdmFyaWFudCc7XG5cbnZhciBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IDEwMDtcbnZhciBWQVJJQU5UU19QRVJfUkVRVUVTVCA9IDQwMDtcbnZhciBaRVJPX0JBU0VEID0gZmFsc2U7XG5cbnR5cGUgR0E0R0hWYXJpYW50U3BlYyA9IHtcbiAgZW5kcG9pbnQ6IHN0cmluZztcbiAgdmFyaWFudFNldElkOiBzdHJpbmc7XG4gIGNhbGxTZXRJZHM6IHN0cmluZ1tdO1xuICBjYWxsU2V0TmFtZXM/OiBzdHJpbmdbXTsgLy8gb3B0aW9uYWwgcGFyYW1ldGVyIGZvciBkaXNwbGF5aW5nIGNhbGwgc2V0IG5hbWVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2l0aG91dCB0aGlzIHBhcmFtZXRlciwgdXNlcnMgbXVzdCBtYWtlIGV4dHJhIGh0dHBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcXVlc3QgZm9yIGNhbGwgc2V0IG5hbWVzIGZvciBHZW5vdHlwZSBUcmFjayBkaXNwbGF5XG59O1xuXG5mdW5jdGlvbiBjcmVhdGUoc3BlYzogR0E0R0hWYXJpYW50U3BlYyk6IFZjZkRhdGFTb3VyY2Uge1xuICB2YXIgdXJsID0gc3BlYy5lbmRwb2ludCArICcvdmFyaWFudHMvc2VhcmNoJztcblxuICB2YXIgdmFyaWFudHM6IHtba2V5OnN0cmluZ106IFZhcmlhbnRDb250ZXh0fSA9IHt9O1xuXG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10gPSBbXTtcblxuICBmdW5jdGlvbiBhZGRWYXJpYW50c0Zyb21SZXNwb25zZShyZXNwb25zZTogT2JqZWN0KSB7XG4gICAgaWYgKHJlc3BvbnNlLnZhcmlhbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXNwb25zZS52YXJpYW50cy5mb3JFYWNoKGdhNGdoVmFyaWFudCA9PiB7XG4gICAgICB2YXIga2V5ID0gZ2E0Z2hWYXJpYW50LmlkO1xuICAgICAgaWYgKGtleSBpbiB2YXJpYW50cykgcmV0dXJuO1xuXG4gICAgICB2YXIgdmFyaWFudCA9IG5ldyBWYXJpYW50Q29udGV4dChWYXJpYW50LmZyb21HQTRHSChnYTRnaFZhcmlhbnQpLCBnYTRnaFZhcmlhbnQuY2FsbHMpO1xuICAgICAgdmFyaWFudHNba2V5XSA9IHZhcmlhbnQ7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByYW5nZUNoYW5nZWQobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKG5ld1JhbmdlLmNvbnRpZywgbmV3UmFuZ2Uuc3RhcnQsIG5ld1JhbmdlLnN0b3ApO1xuXG4gICAgaWYgKGludGVydmFsLmlzQ292ZXJlZEJ5KGNvdmVyZWRSYW5nZXMpKSByZXR1cm47XG5cbiAgICBpbnRlcnZhbCA9IGludGVydmFsLnJvdW5kKEJBU0VfUEFJUlNfUEVSX0ZFVENILCBaRVJPX0JBU0VEKTtcblxuICAgIC8vIHNlbGVjdCBvbmx5IGludGVydmFscyBub3QgeWV0IGxvYWRlZCBpbnRvIGNvdmVyZWRSYW5nZXPDn1xuICAgIHZhciBpbnRlcnZhbHMgPSBpbnRlcnZhbC5jb21wbGVtZW50SW50ZXJ2YWxzKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgLy8gV2UgXCJjb3ZlclwiIHRoZSBpbnRlcnZhbCBpbW1lZGlhdGVseSAoYmVmb3JlIHRoZSByZWFkcyBoYXZlIGFycml2ZWQpIHRvXG4gICAgLy8gcHJldmVudCBkdXBsaWNhdGUgbmV0d29yayByZXF1ZXN0cy5cbiAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgIGNvdmVyZWRSYW5nZXMgPSBDb250aWdJbnRlcnZhbC5jb2FsZXNjZShjb3ZlcmVkUmFuZ2VzKTtcblxuICAgIGludGVydmFscy5mb3JFYWNoKGkgPT4ge1xuICAgICAgZmV0Y2hWYXJpYW50c0ZvckludGVydmFsKGksIG51bGwsIDEgLyogZmlyc3QgcmVxdWVzdCAqLyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBub3RpZnlGYWlsdXJlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIG8udHJpZ2dlcignbmV0d29ya2ZhaWx1cmUnLCBtZXNzYWdlKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2hWYXJpYW50c0ZvckludGVydmFsKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlVG9rZW46ID9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bVJlcXVlc3RzOiBudW1iZXIpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwpO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKGU6IGFueSkge1xuICAgICAgdmFyIHJlc3BvbnNlID0gdGhpcy5yZXNwb25zZTtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgbm90aWZ5RmFpbHVyZSh0aGlzLnN0YXR1cyArICcgJyArIHRoaXMuc3RhdHVzVGV4dCArICcgJyArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlKSB7XG4gICAgICAgICAgbm90aWZ5RmFpbHVyZSgnRXJyb3IgZnJvbSBHQTRHSCBWYXJpYW50IGVuZHBvaW50OiAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGRWYXJpYW50c0Zyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpOyAgLy8gZGlzcGxheSBkYXRhIGFzIGl0IGNvbWVzIGluLlxuICAgICAgICAgIGlmIChyZXNwb25zZS5uZXh0UGFnZVRva2VuKSB7XG4gICAgICAgICAgICBmZXRjaFZhcmlhbnRzRm9ySW50ZXJ2YWwocmFuZ2UsIHJlc3BvbnNlLm5leHRQYWdlVG9rZW4sIG51bVJlcXVlc3RzICsgMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICAgIG5vdGlmeUZhaWx1cmUoJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzOiAnICsgdGhpcy5zdGF0dXMpO1xuICAgIH0pO1xuXG4gICAgby50cmlnZ2VyKCduZXR3b3JrcHJvZ3Jlc3MnLCB7bnVtUmVxdWVzdHN9KTtcbiAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICB2YXJpYW50U2V0SWQ6IHNwZWMudmFyaWFudFNldElkLFxuICAgICAgcGFnZVRva2VuOiBwYWdlVG9rZW4sXG4gICAgICBwYWdlU2l6ZTogVkFSSUFOVFNfUEVSX1JFUVVFU1QsXG4gICAgICByZWZlcmVuY2VOYW1lOiByYW5nZS5jb250aWcsXG4gICAgICBjYWxsU2V0SWRzOiBzcGVjLmNhbGxTZXRJZHMsXG4gICAgICBzdGFydDogcmFuZ2Uuc3RhcnQoKSxcbiAgICAgIGVuZDogcmFuZ2Uuc3RvcCgpXG4gICAgfSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VmFyaWFudHNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmFyaWFudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG5cbiAgICB2YXIgZmlsdGVyZWQgPSBfLmZpbHRlcih2YXJpYW50cywgdmFyaWFudCA9PiB2YXJpYW50LmludGVyc2VjdHMocmFuZ2UpKTtcbiAgICByZXR1cm4gXy5tYXAoZmlsdGVyZWQsIGYgPT4gZi52YXJpYW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEdlbm90eXBlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBWYXJpYW50Q29udGV4dFtdIHtcbiAgICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcblxuICAgICAgcmV0dXJuIF8uZmlsdGVyKHZhcmlhbnRzLCB2YXJpYW50ID0+IHZhcmlhbnQuaW50ZXJzZWN0cyhyYW5nZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q2FsbE5hbWVzKCk6IFEuUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGlmIChzcGVjLmNhbGxTZXROYW1lcykge1xuICAgICAgcmV0dXJuIFEucmVzb2x2ZShzcGVjLmNhbGxTZXROYW1lcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBRLnJlc29sdmUoc3BlYy5jYWxsU2V0SWRzKTtcbiAgICB9XG5cbiAgfVxuXG4gIHZhciBvID0ge1xuICAgIHJhbmdlQ2hhbmdlZCxcbiAgICBnZXRWYXJpYW50c0luUmFuZ2UsXG4gICAgZ2V0R2Vub3R5cGVzSW5SYW5nZSxcbiAgICBnZXRDYWxsTmFtZXMsXG5cbiAgICAvLyBUaGVzZSBhcmUgaGVyZSB0byBtYWtlIEZsb3cgaGFwcHkuXG4gICAgb246ICgpID0+IHt9LFxuICAgIG9uY2U6ICgpID0+IHt9LFxuICAgIG9mZjogKCkgPT4ge30sXG4gICAgdHJpZ2dlcjogKHN0YXR1czogc3RyaW5nLCBwYXJhbTogYW55KSA9PiB7fVxuICB9O1xuICBfLmV4dGVuZChvLCBFdmVudHMpOyAgLy8gTWFrZSB0aGlzIGFuIGV2ZW50IGVtaXR0ZXJcbiAgcmV0dXJuIG87XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGVcbn07XG4iLCIvKipcbiAqIFRoZSBcImdsdWVcIiBiZXR3ZWVuIFR3b0JpdC5qcyBhbmQgR2Vub21lVHJhY2suanMuXG4gKlxuICogR2Vub21lVHJhY2sgaXMgcHVyZSB2aWV3IGNvZGUgLS0gaXQgcmVuZGVycyBkYXRhIHdoaWNoIGlzIGFscmVhZHkgaW4tbWVtb3J5XG4gKiBpbiB0aGUgYnJvd3Nlci5cbiAqXG4gKiBUd29CaXQgaXMgcHVyZWx5IGZvciBkYXRhIHBhcnNpbmcgYW5kIGZldGNoaW5nLiBJdCBvbmx5IGtub3dzIGhvdyB0byByZXR1cm5cbiAqIHByb21pc2VzIGZvciB2YXJpb3VzIGdlbm9tZSBmZWF0dXJlcy5cbiAqXG4gKiBUaGlzIGNvZGUgYWN0cyBhcyBhIGJyaWRnZSBiZXR3ZWVuIHRoZSB0d28uIEl0IG1haW50YWlucyBhIGxvY2FsIHZlcnNpb24gb2ZcbiAqIHRoZSBkYXRhLCBmZXRjaGluZyByZW1vdGUgZGF0YSBhbmQgaW5mb3JtaW5nIHRoZSB2aWV3IHdoZW4gaXQgYmVjb21lc1xuICogYXZhaWxhYmxlLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5cbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBUd29CaXQgZnJvbSAnLi4vZGF0YS9Ud29CaXQnO1xuaW1wb3J0IFJlbW90ZUZpbGUgZnJvbSAnLi4vUmVtb3RlRmlsZSc7XG5pbXBvcnQgU2VxdWVuY2VTdG9yZSBmcm9tICcuLi9TZXF1ZW5jZVN0b3JlJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5cblxuLy8gUmVxdWVzdHMgZm9yIDJiaXQgcmFuZ2VzIGFyZSBleHBhbmRlZCB0byBiZWdpbiAmIGVuZCBhdCBtdWx0aXBsZXMgb2YgdGhpc1xuLy8gY29uc3RhbnQuIERvaW5nIHRoaXMgbWVhbnMgdGhhdCBwYW5uaW5nIHR5cGljYWxseSB3b24ndCByZXF1aXJlXG4vLyBhZGRpdGlvbmFsIG5ldHdvcmsgcmVxdWVzdHMuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDAwMDtcblxudmFyIE1BWF9CQVNFX1BBSVJTX1RPX0ZFVENIID0gMTAwMDAwO1xudmFyIFpFUk9fQkFTRUQgPSB0cnVlO1xuXG5cblxuLy8gRmxvdyB0eXBlIGZvciBleHBvcnQuXG5leHBvcnQgdHlwZSBUd29CaXRTb3VyY2UgPSB7XG4gIHJhbmdlQ2hhbmdlZDogKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkgPT4gdm9pZDtcbiAgZ2V0UmFuZ2U6IChyYW5nZTogR2Vub21lUmFuZ2UpID0+IHtba2V5OnN0cmluZ106ID9zdHJpbmd9O1xuICBnZXRSYW5nZUFzU3RyaW5nOiAocmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiBzdHJpbmc7XG4gIGNvbnRpZ0xpc3Q6ICgpID0+IHN0cmluZ1tdO1xuICBub3JtYWxpemVSYW5nZTogKHJhbmdlOiBHZW5vbWVSYW5nZSkgPT4gUS5Qcm9taXNlPEdlbm9tZVJhbmdlPjtcbiAgb246IChldmVudDogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgb25jZTogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nKSA9PiB2b2lkO1xuICB0cmlnZ2VyOiAoZXZlbnQ6IHN0cmluZywgLi4uYXJnczphbnkpID0+IHZvaWQ7XG59XG5cblxudmFyIGNyZWF0ZUZyb21Ud29CaXRGaWxlID0gZnVuY3Rpb24ocmVtb3RlU291cmNlOiBUd29CaXQpOiBUd29CaXRTb3VyY2Uge1xuICAvLyBMb2NhbCBjYWNoZSBvZiBnZW5vbWljIGRhdGEuXG4gIHZhciBjb250aWdMaXN0ID0gW107XG4gIHZhciBzdG9yZSA9IG5ldyBTZXF1ZW5jZVN0b3JlKCk7XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzID0gKFtdOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10pO1xuXG4gIGZ1bmN0aW9uIGZldGNoKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgdmFyIHNwYW4gPSByYW5nZS5sZW5ndGgoKTtcbiAgICBpZiAoc3BhbiA+IE1BWF9CQVNFX1BBSVJTX1RPX0ZFVENIKSB7XG4gICAgICAvL2luZm9ybSB0aGF0IHdlIHdvbid0IGZldGNoIHRoZSBkYXRhXG4gICAgICBvLnRyaWdnZXIoJ25ld2RhdGFyZWZ1c2VkJywgcmFuZ2UpO1xuICAgICAgcmV0dXJuIFEud2hlbigpOyAgLy8gZW1wdHkgcHJvbWlzZVxuICAgIH1cbiAgICAvL25vdyB3ZSBjYW4gYWRkIHJlZ2lvbiB0byBjb3ZlcmVkIHJlZ2lvbnNcbiAgICAvL2RvaW5nIGl0IGVhcmxpZXIgd291bGQgcHJvdmlkZSBpbmNvbnNpc3RlbmN5XG4gICAgY292ZXJlZFJhbmdlcy5wdXNoKHJhbmdlKTtcbiAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG5cbiAgICByZW1vdGVTb3VyY2UuZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQoKSwgcmFuZ2Uuc3RvcCgpKVxuICAgICAgLnRoZW4obGV0dGVycyA9PiB7XG4gICAgICAgIGlmICghbGV0dGVycykgcmV0dXJuO1xuICAgICAgICBpZiAobGV0dGVycy5sZW5ndGggPCByYW5nZS5sZW5ndGgoKSkge1xuICAgICAgICAgIC8vIFByb2JhYmx5IGF0IEVPRlxuICAgICAgICAgIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5zdGFydCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLnN0YXJ0KCkgKyBsZXR0ZXJzLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHN0b3JlLnNldFJhbmdlKHJhbmdlLCBsZXR0ZXJzKTtcbiAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCByYW5nZSk7XG4gICAgICB9KS5kb25lKCk7XG4gIH1cblxuICAvLyBUaGlzIGVpdGhlciBhZGRzIG9yIHJlbW92ZXMgYSAnY2hyJyBhcyBuZWVkZWQuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVJhbmdlU3luYyhyYW5nZTogR2Vub21lUmFuZ2UpOiBHZW5vbWVSYW5nZSB7XG4gICAgaWYgKGNvbnRpZ0xpc3QuaW5kZXhPZihyYW5nZS5jb250aWcpID49IDApIHtcbiAgICAgIHJldHVybiByYW5nZTtcbiAgICB9XG4gICAgdmFyIGFsdENvbnRpZyA9IHV0aWxzLmFsdENvbnRpZ05hbWUocmFuZ2UuY29udGlnKTtcbiAgICBpZiAoY29udGlnTGlzdC5pbmRleE9mKGFsdENvbnRpZykgPj0gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29udGlnOiBhbHRDb250aWcsXG4gICAgICAgIHN0YXJ0OiByYW5nZS5zdGFydCxcbiAgICAgICAgc3RvcDogcmFuZ2Uuc3RvcFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlOyAgLy8gbGV0IGl0IGZhaWwgd2l0aCB0aGUgb3JpZ2luYWwgY29udGlnXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVSYW5nZShyYW5nZTogR2Vub21lUmFuZ2UpOiBRLlByb21pc2U8R2Vub21lUmFuZ2U+IHtcbiAgICByZXR1cm4gY29udGlnUHJvbWlzZS50aGVuKCgpID0+IG5vcm1hbGl6ZVJhbmdlU3luYyhyYW5nZSkpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHtcImNocjEyOjEyM1wiIC0+IFwiW0FUQ0ddXCJ9IG1hcHBpbmcgZm9yIHRoZSByYW5nZS5cbiAgZnVuY3Rpb24gZ2V0UmFuZ2UocmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgcmV0dXJuIHN0b3JlLmdldEFzT2JqZWN0cyhDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UocmFuZ2UpKTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBzdHJpbmcgb2YgYmFzZSBwYWlycyBmb3IgdGhpcyByYW5nZS5cbiAgZnVuY3Rpb24gZ2V0UmFuZ2VBc1N0cmluZyhyYW5nZTogR2Vub21lUmFuZ2UpOiBzdHJpbmcge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiAnJztcbiAgICByZXR1cm4gc3RvcmUuZ2V0QXNTdHJpbmcoQ29udGlnSW50ZXJ2YWwuZnJvbUdlbm9tZVJhbmdlKHJhbmdlKSk7XG4gIH1cblxuICAvLyBGZXRjaCB0aGUgY29udGlnIGxpc3QgaW1tZWRpYXRlbHkuXG4gIHZhciBjb250aWdQcm9taXNlID0gcmVtb3RlU291cmNlLmdldENvbnRpZ0xpc3QoKS50aGVuKGMgPT4ge1xuICAgIGNvbnRpZ0xpc3QgPSBjO1xuICAgIG8udHJpZ2dlcignY29udGlncycsIGNvbnRpZ0xpc3QpO1xuICAgIHJldHVybiBjO1xuICB9KTtcbiAgY29udGlnUHJvbWlzZS5kb25lKCk7XG5cbiAgdmFyIG8gPSB7XG4gICAgLy8gVGhlIHJhbmdlIGhlcmUgaXMgMC1iYXNlZCwgaW5jbHVzaXZlXG4gICAgcmFuZ2VDaGFuZ2VkOiBmdW5jdGlvbihuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAgIG5vcm1hbGl6ZVJhbmdlKG5ld1JhbmdlKS50aGVuKHIgPT4ge1xuICAgICAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoci5jb250aWcsIHIuc3RhcnQsIHIuc3RvcCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpbnRlcnZhbCBpcyBhbHJlYWR5IGluIHRoZSBjYWNoZS5cbiAgICAgICAgaWYgKHJhbmdlLmlzQ292ZXJlZEJ5KGNvdmVyZWRSYW5nZXMpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmFuZ2UgPSByYW5nZS5yb3VuZChCQVNFX1BBSVJTX1BFUl9GRVRDSCwgWkVST19CQVNFRCk7XG4gICAgICAgIHZhciBuZXdSYW5nZXMgPSByYW5nZS5jb21wbGVtZW50SW50ZXJ2YWxzKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgICAgIGZvciAodmFyIG5ld1JhbmdlIG9mIG5ld1Jhbmdlcykge1xuICAgICAgICAgIGZldGNoKG5ld1JhbmdlKTtcbiAgICAgICAgfVxuICAgICAgfSkuZG9uZSgpO1xuICAgIH0sXG4gICAgLy8gVGhlIHJhbmdlcyBwYXNzZWQgdG8gdGhlc2UgbWV0aG9kcyBhcmUgMC1iYXNlZFxuICAgIGdldFJhbmdlLFxuICAgIGdldFJhbmdlQXNTdHJpbmcsXG4gICAgY29udGlnTGlzdDogKCkgPT4gY29udGlnTGlzdCxcbiAgICBub3JtYWxpemVSYW5nZSxcblxuICAgIC8vIFRoZXNlIGFyZSBoZXJlIHRvIG1ha2UgRmxvdyBoYXBweS5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb25jZTogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RhdHVzOiBzdHJpbmcsIHBhcmFtOiBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlKGRhdGE6IHt1cmw6c3RyaW5nfSk6IFR3b0JpdFNvdXJjZSB7XG4gIHZhciB1cmwgPSBkYXRhLnVybDtcbiAgaWYgKCF1cmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgVVJMIGZyb20gdHJhY2s6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG4gIH1cblxuICByZXR1cm4gY3JlYXRlRnJvbVR3b0JpdEZpbGUobmV3IFR3b0JpdChuZXcgUmVtb3RlRmlsZSh1cmwpKSk7XG59XG5cbi8vIEdldHRlci9zZXR0ZXIgZm9yIGJhc2UgcGFpcnMgcGVyIGZldGNoLlxuLy8gVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGZvciB0ZXN0aW5nLlxuZnVuY3Rpb24gdGVzdEJhc2VQYWlyc1RvRmV0Y2gobnVtPzogbnVtYmVyKTogYW55IHtcbiAgaWYgKG51bSkge1xuICAgIEJBU0VfUEFJUlNfUEVSX0ZFVENIID0gbnVtO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBCQVNFX1BBSVJTX1BFUl9GRVRDSDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tVHdvQml0RmlsZSxcbiAgdGVzdEJhc2VQYWlyc1RvRmV0Y2hcbn07XG4iLCIvKipcbiAqIENhY2hpbmcgJiBwcmVmZXRjaGluZyBmb3IgVkNGIHNvdXJjZXMuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5cbmltcG9ydCBFdmVudHMgZnJvbSAnYmFja2JvbmUnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBSZW1vdGVGaWxlIGZyb20gJy4uL1JlbW90ZUZpbGUnO1xuaW1wb3J0IExvY2FsU3RyaW5nRmlsZSBmcm9tICcuLi9Mb2NhbFN0cmluZ0ZpbGUnO1xuLy8gcmVxdWlyZW1lbnQgZm9yIGpzaGludCB0byBwYXNzXG4vKiBleHBvcnRlZCBWYXJpYW50ICovXG5pbXBvcnQge1ZhcmlhbnQsIFZhcmlhbnRDb250ZXh0fSBmcm9tICcuLi9kYXRhL3ZhcmlhbnQnO1xuaW1wb3J0IHtWY2ZGaWxlfSBmcm9tICcuLi9kYXRhL3ZjZic7XG5cblxuZXhwb3J0IHR5cGUgVmNmRGF0YVNvdXJjZSA9IHtcbiAgcmFuZ2VDaGFuZ2VkOiAobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiB2b2lkO1xuICBnZXRWYXJpYW50c0luUmFuZ2U6IChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikgPT4gVmFyaWFudFtdO1xuICBnZXRHZW5vdHlwZXNJblJhbmdlOiAocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pID0+IFZhcmlhbnRDb250ZXh0W107XG4gIGdldENhbGxOYW1lczogKCkgPT4gUS5Qcm9taXNlPHN0cmluZ1tdPjtcbiAgb246IChldmVudDogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgb2ZmOiAoZXZlbnQ6IHN0cmluZykgPT4gdm9pZDtcbiAgdHJpZ2dlcjogKGV2ZW50OiBzdHJpbmcsIC4uLmFyZ3M6YW55KSA9PiB2b2lkO1xufTtcblxuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDA7XG52YXIgWkVST19CQVNFRCA9IGZhbHNlO1xuXG5mdW5jdGlvbiB2YXJpYW50Q29udGV4dEtleSh2OiBWYXJpYW50Q29udGV4dCk6IHN0cmluZyB7XG4gIHJldHVybiBgJHt2LnZhcmlhbnQuY29udGlnfToke3YudmFyaWFudC5wb3NpdGlvbn1gO1xufVxuXG5cbmZ1bmN0aW9uIGNyZWF0ZUZyb21WY2ZGaWxlKHJlbW90ZVNvdXJjZTogVmNmRmlsZSk6IFZjZkRhdGFTb3VyY2Uge1xuICB2YXIgdmFyaWFudHM6IHtba2V5OiBzdHJpbmddOiBWYXJpYW50Q29udGV4dH0gPSB7fTtcblxuICAvLyBSYW5nZXMgZm9yIHdoaWNoIHdlIGhhdmUgY29tcGxldGUgaW5mb3JtYXRpb24gLS0gbm8gbmVlZCB0byBoaXQgbmV0d29yay5cbiAgdmFyIGNvdmVyZWRSYW5nZXM6IENvbnRpZ0ludGVydmFsPHN0cmluZz5bXSA9IFtdO1xuXG4gIGZ1bmN0aW9uIGFkZFZhcmlhbnRDb250ZXh0KHY6IFZhcmlhbnRDb250ZXh0KSB7XG4gICAgdmFyIGtleSA9IHZhcmlhbnRDb250ZXh0S2V5KHYpO1xuICAgIGlmICghdmFyaWFudHNba2V5XSkge1xuICAgICAgdmFyaWFudHNba2V5XSA9IHY7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2gocmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3ApO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpbnRlcnZhbCBpcyBhbHJlYWR5IGluIHRoZSBjYWNoZS5cbiAgICBpZiAoaW50ZXJ2YWwuaXNDb3ZlcmVkQnkoY292ZXJlZFJhbmdlcykpIHtcbiAgICAgIHJldHVybiBRLndoZW4oKTtcbiAgICB9XG5cbiAgICBpbnRlcnZhbCA9IGludGVydmFsLnJvdW5kKEJBU0VfUEFJUlNfUEVSX0ZFVENILCBaRVJPX0JBU0VEKTtcblxuICAgIC8vIFwiQ292ZXJcIiB0aGUgcmFuZ2UgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBkdXBsaWNhdGUgZmV0Y2hlcy5cbiAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgIGNvdmVyZWRSYW5nZXMgPSBDb250aWdJbnRlcnZhbC5jb2FsZXNjZShjb3ZlcmVkUmFuZ2VzKTtcbiAgICByZXR1cm4gcmVtb3RlU291cmNlLmdldEZlYXR1cmVzSW5SYW5nZShpbnRlcnZhbCkudGhlbih2YXJpYW50cyA9PiB7XG4gICAgICB2YXJpYW50cy5mb3JFYWNoKHZhcmlhbnQgPT4gYWRkVmFyaWFudENvbnRleHQodmFyaWFudCkpO1xuICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgaW50ZXJ2YWwpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VmFyaWFudHNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmFyaWFudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107ICAvLyBYWFggd2h5IHdvdWxkIHRoaXMgaGFwcGVuP1xuICAgIHZhciBmaWx0ZXJlZCA9IF8uZmlsdGVyKHZhcmlhbnRzLCB2ID0+IHJhbmdlLmNvbnRhaW5zTG9jdXModi52YXJpYW50LmNvbnRpZywgdi52YXJpYW50LnBvc2l0aW9uKSk7XG4gICAgcmV0dXJuIF8ubWFwKGZpbHRlcmVkLCBmID0+IGYudmFyaWFudCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRHZW5vdHlwZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmFyaWFudENvbnRleHRbXSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKHZhcmlhbnRzLCB2ID0+IHJhbmdlLmNvbnRhaW5zTG9jdXModi52YXJpYW50LmNvbnRpZywgdi52YXJpYW50LnBvc2l0aW9uKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDYWxsTmFtZXMoKTogUS5Qcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgcmV0dXJuIHJlbW90ZVNvdXJjZS5nZXRDYWxsTmFtZXMoKS50aGVuKHNhbXBsZXMgPT4ge1xuICAgICAgcmV0dXJuIHNhbXBsZXM7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQ6IGZ1bmN0aW9uKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgICAgZmV0Y2gobmV3UmFuZ2UpLmRvbmUoKTtcbiAgICB9LFxuICAgIGdldFZhcmlhbnRzSW5SYW5nZSxcbiAgICBnZXRHZW5vdHlwZXNJblJhbmdlLFxuICAgIGdldENhbGxOYW1lcyxcblxuICAgIC8vIFRoZXNlIGFyZSBoZXJlIHRvIG1ha2UgRmxvdyBoYXBweS5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RhdHVzOiBzdHJpbmcsIHBhcmFtOiBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBjcmVhdGUoZGF0YToge3VybD86IHN0cmluZywgY29udGVudD86IHN0cmluZ30pOiBWY2ZEYXRhU291cmNlIHtcbiAgdmFyIHt1cmwsIGNvbnRlbnR9ID0gZGF0YTtcbiAgaWYgKHVybCkge1xuICAgIHJldHVybiBjcmVhdGVGcm9tVmNmRmlsZShuZXcgVmNmRmlsZShuZXcgUmVtb3RlRmlsZSh1cmwpKSk7XG4gIH0gZWxzZSBpZiAoY29udGVudCkge1xuICAgIHJldHVybiBjcmVhdGVGcm9tVmNmRmlsZShuZXcgVmNmRmlsZShuZXcgTG9jYWxTdHJpbmdGaWxlKGNvbnRlbnQpKSk7XG4gIH1cbiAgLy8gSWYgbm8gVVJMIG9yIGNvbnRlbnQgaXMgcGFzc2VkLCBmYWlsXG4gIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBVUkwgb3IgY29udGVudCBmcm9tIHRyYWNrOiAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tVmNmRmlsZVxufTtcbiIsIi8qKlxuICogQ2VudHJhbCBjb2xsZWN0aW9uIG9mIHN0eWxpbmcgc2V0dGluZ3MuXG4gKiBVbnRpbCB3ZSBmaWd1cmUgb3V0IGEgYmV0dGVyIHN0b3J5IGFyb3VuZCBjYW52YXMgJiBDU1MsIHRoZXkgbGl2ZSBoZXJlLlxuICpcbiAqIEBmbG93XG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBEaXNwbGF5TW9kZSBmcm9tICcuL3Zpei9EaXNwbGF5TW9kZSc7XG5cblxuLyoqXG4gKiBDb21wdXRlcyBzdHlsZXMgZm9yIGJhc2UgcGFpcnMgd2hpY2ggYXJlIHJlbmRlcmVkIGFzIGxldHRlcnMuXG4gICpcbiAqIEBwYXJhbSBtb2RlIERpc3BsYXlNb2RlIHRvIHJlbmRlciB0ZXh0LlxuICogQHBhcmFtIGZvbnRTaXplIGZvbnQgc2l6ZS5cbiAqL1xuZnVuY3Rpb24gVEVYVF9TVFlMRShtb2RlOiBudW1iZXIsIGZvbnRTaXplOiBudW1iZXIpOiBzdHJpbmcge1xuXG4gIGlmIChtb2RlID09IERpc3BsYXlNb2RlLkxPT1NFKSB7XG4gICAgcmV0dXJuICBgJHtmb250U2l6ZX1weCAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYDtcbiAgfSBlbHNlIGlmIChtb2RlID09IERpc3BsYXlNb2RlLlRJR0hUKSB7XG4gICAgcmV0dXJuIGBib2xkICR7Zm9udFNpemV9cHggJ0hlbHZldGljYSBOZXVlJywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZmA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAke2ZvbnRTaXplfXB4YDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgVEVYVF9TVFlMRSxcblxuICAvLyBDb2xvcnMgZm9yIGluZGl2aWR1YWwgYmFzZSBwYWlyc1xuICBCQVNFX0NPTE9SUzoge1xuICAgICdBJzogJyMxODg3MTInLFxuICAgICdHJzogJyNDNDVDMTYnLFxuICAgICdDJzogJyMwNjAwRjknLFxuICAgICdUJzogJyNGNzAwMTYnLFxuICAgICdVJzogJyNGNzAwMTYnLFxuICAgICdOJzogJ2JsYWNrJ1xuICB9LFxuXG5cbiAgLy8gR2VuZSB0cmFja1xuICBHRU5FX0FSUk9XX1NJWkU6IDQsXG4gIEdFTkVfQ09MT1I6ICdibHVlJywgIC8vIGNvbG9yIG9mIHRoZSBnZW5lIGxpbmUsIGV4b25zLCB0ZXh0LCBldGMuXG4gIEdFTkVfQ09NUExFTUVOVF9DT0xPUjogJ3doaXRlJywgIC8vIGEgY29sb3IgdmlzaWJsZSBvbiB0b3Agb2YgR0VORV9DT0xPUlxuICBHRU5FX0ZPTlQ6IGAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYCxcbiAgR0VORV9GT05UX1NJWkU6IDE2LFxuICBHRU5FX1RFWFRfUEFERElORzogNSwgIC8vIHNwYWNlIGJldHdlZW4gYm90dG9tIG9mIGNvZGluZyBleG9uICYgdG9wIG9mIGdlbmUgbmFtZVxuXG4gIC8vIFBpbGV1cCB0cmFja1xuICBBTElHTk1FTlRfQ09MT1I6ICcjYzhjOGM4JyxcbiAgQUxJR05NRU5UX01JTlVTX1NUUkFORF9DT0xPUjogJ3JnYigxNzYsIDE3NiwgMjM2KScsXG4gIEFMSUdOTUVOVF9QTFVTX1NUUkFORF9DT0xPUjogJ3JnYigyMzYsIDE3NiwgMTc2KScsXG4gIERFTEVURV9DT0xPUjogJ2JsYWNrJyxcbiAgSU5TRVJUX0NPTE9SOiAncmdiKDk3LCAwLCAyMTYpJyxcbiAgUkVBRF9TUEFDSU5HOiAyLCAvLyB2ZXJ0aWNhbCBzcGFjaW5nIGJldHdlZW4gcmVhZHNcbiAgUkVBRF9IRUlHSFQ6IDEzLCAvLyBIZWlnaHQgb2YgcmVhZFxuXG5cbiAgLy8gQ292ZXJhZ2UgdHJhY2tcbiAgQ09WRVJBR0VfRk9OVF9TVFlMRTogYGJvbGQgOXB4ICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWZgLFxuICBDT1ZFUkFHRV9GT05UX0NPTE9SOiAnYmxhY2snLFxuICBDT1ZFUkFHRV9USUNLX0xFTkdUSDogNSxcbiAgQ09WRVJBR0VfVEVYVF9QQURESU5HOiAzLCAgLy8gc3BhY2UgYmV0d2VlbiBheGlzIHRpY2tzIGFuZCB0ZXh0XG4gIENPVkVSQUdFX1RFWFRfWV9PRkZTRVQ6IDMsICAvLyBzbyB0aGF0IHRpY2tzIGFuZCB0ZXh0cyBhbGlnbiBiZXR0ZXJcbiAgQ09WRVJBR0VfQklOX0NPTE9SOiAnI2EwYTBhMCcsXG4gIENPVkVSQUdFX01JTl9CQVJfV0lEVEhfRk9SX0dBUDogOCwgIC8vIHNob3cgYSAxcHggZ2FwIGJldHdlZW4gYmFycyBhdCB0aGlzIHJlc29sdXRpb25cblxuICAvLyBTY2FsZSBUcmFja1xuICBTQ0FMRV9MSU5FX1BBRERJTkc6IDQwLCAgLy8gc3BhY2UgYmV0d2VlbiBtaWQgcG9pbnQgYW5kIGxlZnQvcmlnaHQgbGluZXNcbiAgU0NBTEVfRk9OVF9TVFlMRTogYGJvbGQgMTJweCAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYCxcbiAgU0NBTEVfVEVYVF9ZX09GRlNFVDogNSwgIC8vIHNvIHRoYXQgbGluZXMgYW5kIHRoZSB0ZXh0IGFsaWduIGJldHRlclxuICBTQ0FMRV9GT05UX0NPTE9SOiAnYmxhY2snLFxuICBTQ0FMRV9BUlJPV19TSVpFOiA0LFxuXG4gIC8vIExvY2F0aW9uIHRyYWNrXG4gIExPQ19URVhUX1BBRERJTkc6IDUsICAvLyBzcGFjZSBiZXR3ZWVuIG1pZC1wb2ludCBsYWJlbCBhbmQgdGlja1xuICBMT0NfVElDS19MRU5HVEg6IDEwLFxuICBMT0NfVEVYVF9ZX09GRlNFVDogNSwgIC8vIHNvIHRoYXQgdGhlIGxpbmUgYW5kIHRoZSB0ZXh0IGFsaWduIGJldHRlclxuICBMT0NfRk9OVF9TVFlMRTogYDEzcHggJ0hlbHZldGljYSBOZXVlJywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZmAsXG4gIExPQ19GT05UX0NPTE9SOiAnYmxhY2snLFxuXG4gIC8vIFZhcmlhbnQgVHJhY2tcbiAgVkFSSUFOVF9TVFJPS0U6ICdibHVlJyxcbiAgVkFSSUFOVF9GSUxMOiAnI2RkZCcsXG4gIFZBUklBTlRfSEVJR0hUOiAxNCxcblxuICAvLyBHZW5vdHlwZSBUcmFja1xuICBHRU5PVFlQRV9TUEFDSU5HOiAxLFxuICBHRU5PVFlQRV9IRUlHSFQ6IDEwLFxuICBHRU5PVFlQRV9GSUxMX0hFVDogJyMwMDE1ZmYnLFxuICBHRU5PVFlQRV9GSUxMX0hPTTogJyMwMGYxZjknLFxuICBCQUNLR1JPVU5EX0ZJTEw6ICcjZjJmMmYyJyxcblxufTtcbiIsIi8qKlxuICogQ29tbW9uIHR5cGVzIHVzZWQgaW4gbWFueSBtb2R1bGVzLlxuICpcbiAqIEZsb3cgbWFrZXMgaXQgZGlmZmljdWx0IGZvciBhIG1vZHVsZSB0byBleHBvcnQgYm90aCBzeW1ib2xzIGFuZCB0eXBlcy4gVGhpc1xuICogbW9kdWxlIHNlcnZlcyBhcyBhIGR1bXBpbmcgZ3JvdW5kIGZvciB0eXBlcyB3aGljaCB3ZSdkIHJlYWxseSBsaWtlIHRvIGV4cG9ydFxuICogZnJvbSBvdGhlciBtb2R1bGVzLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gUHVibGljIEFQSVxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgY29uc3QgQWxsZWxGcmVxdWVuY3lTdHJhdGVneSA9IHtcbiAgTWlub3IgOiB7bmFtZTogXCJNaW5vclwifSxcbiAgTWFqb3IgOiB7bmFtZTogXCJNYWpvclwifSxcbn07XG5cblxuZXhwb3J0IHR5cGUgTmV0d29ya1N0YXR1cyA9IHtudW1SZXF1ZXN0cz86IG51bWJlciwgc3RhdHVzPzogc3RyaW5nfTtcblxuZXhwb3J0IHR5cGUgU3RhdGUgPSB7XG4gIG5ldHdvcmtTdGF0dXM6ID9OZXR3b3JrU3RhdHVzO1xufTtcblxuZXhwb3J0IHR5cGUgVml6V2l0aE9wdGlvbnMgPSB7XG4gIGNvbXBvbmVudDogQ2xhc3M8UmVhY3QuQ29tcG9uZW50PGFueSwgYW55Pj47XG4gIG9wdGlvbnM6ID9PYmplY3Q7XG59XG5cbmV4cG9ydCB0eXBlIFRyYWNrID0ge1xuICB2aXo6IFZpeldpdGhPcHRpb25zO1xuICBkYXRhOiBPYmplY3Q7ICAvLyBUaGlzIGlzIGEgRGF0YVNvdXJjZSBvYmplY3RcbiAgbmFtZT86IHN0cmluZztcbiAgY3NzQ2xhc3M/OiBzdHJpbmc7XG4gIGlzUmVmZXJlbmNlPzogYm9vbGVhbjtcbiAgb3B0aW9ucz86IE9iamVjdFxufVxuXG5leHBvcnQgdHlwZSBWaXN1YWxpemVkVHJhY2sgPSB7XG4gIHZpc3VhbGl6YXRpb246IFZpeldpdGhPcHRpb25zO1xuICBzb3VyY2U6IE9iamVjdDsgIC8vIGRhdGEgc291cmNlXG4gIHRyYWNrOiBUcmFjazsgIC8vIGZvciBjc3MgY2xhc3MgYW5kIG9wdGlvbnNcbn1cblxuZXhwb3J0IHR5cGUgR2Vub21lUmFuZ2UgPSB7XG4gIGNvbnRpZzogc3RyaW5nO1xuICBzdGFydDogbnVtYmVyOyAgLy8gaW5jbHVzaXZlXG4gIHN0b3A6IG51bWJlcjsgIC8vIGluY2x1c2l2ZVxufVxuXG5leHBvcnQgdHlwZSBQYXJ0aWFsR2Vub21lUmFuZ2UgPSB7XG4gIGNvbnRpZz86IHN0cmluZztcbiAgc3RhcnQ/OiBudW1iZXI7XG4gIHN0b3A/OiBudW1iZXI7XG59XG5cbi8vIEJBTS9CQUkgcGFyc2luZ1xuXG5pbXBvcnQgdHlwZSBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4vZGF0YS9WaXJ0dWFsT2Zmc2V0JztcblxuZXhwb3J0IHR5cGUgQ2h1bmsgPSB7XG4gIGNodW5rX2JlZzogVmlydHVhbE9mZnNldDtcbiAgY2h1bmtfZW5kOiBWaXJ0dWFsT2Zmc2V0O1xufVxuXG4vLyBzcmMvdXRpbHMuanNcbmV4cG9ydCB0eXBlIEluZmxhdGVkQmxvY2sgPSB7XG4gIG9mZnNldDogbnVtYmVyO1xuICBjb21wcmVzc2VkTGVuZ3RoOiBudW1iZXI7XG4gIGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG59XG4iLCIvKipcbiAqIEdyYWItYmFnIG9mIHV0aWxpdHkgZnVuY3Rpb25zLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7SW5mbGF0ZWRCbG9jaywgUGFydGlhbEdlbm9tZVJhbmdlfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB0eXBlIFEgZnJvbSAncSc7XG5cbmltcG9ydCBwYWtvIGZyb20gJ3Bha28vbGliL2luZmxhdGUnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuL0ludGVydmFsJztcblxuLy8gQ29tcGFyZSB0d28gdHVwbGVzIG9mIGVxdWFsIGxlbmd0aC4gSXMgdDEgPD0gdDI/XG4vLyBUT0RPOiBtYWtlIHRoaXMgdHVwbGVMZXNzT3JFcXVhbDxUPiAtLSBpdCB3b3JrcyB3aXRoIHN0cmluZ3Mgb3IgYm9vbGVhbnMsIHRvby5cbmZ1bmN0aW9uIHR1cGxlTGVzc09yRXF1YWwodDE6IEFycmF5PG51bWJlcj4sIHQyOiBBcnJheTxudW1iZXI+KTogYm9vbGVhbiB7XG4gIGlmICh0MS5sZW5ndGggIT0gdDIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ0NvbXBhcmluZyBub24tZXF1YWwgbGVuZ3RoIHR1cGxlcycpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHQxLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHQxW2ldID4gdDJbaV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHQxW2ldIDwgdDJbaV0pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gRG8gdHdvIHJhbmdlcyBvZiB0dXBsZXMgb3ZlcmxhcD9cbi8vIFRPRE86IG1ha2UgdGhpcyB0dXBsZVJhbmdlT3ZlcmxhcHM8VD4gLS0gaXQgd29ya3Mgd2l0aCBzdHJpbmdzIG9yIGJvb2xlYW5zLCB0b28uXG5mdW5jdGlvbiB0dXBsZVJhbmdlT3ZlcmxhcHModHVwbGVSYW5nZTE6IEFycmF5PEFycmF5PG51bWJlcj4+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR1cGxlUmFuZ2UyOiBBcnJheTxBcnJheTxudW1iZXI+Pik6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgICAvLyBBcmUgdGhlIHJhbmdlcyBvdmVybGFwcGluZz9cbiAgICAgdHVwbGVMZXNzT3JFcXVhbCh0dXBsZVJhbmdlMVswXSwgdHVwbGVSYW5nZTJbMV0pICYmXG4gICAgIHR1cGxlTGVzc09yRXF1YWwodHVwbGVSYW5nZTJbMF0sIHR1cGxlUmFuZ2UxWzFdKSAmJlxuICAgICAvLyAuLi4gYW5kIG5vbi1lbXB0eT9cbiAgICAgdHVwbGVMZXNzT3JFcXVhbCh0dXBsZVJhbmdlMVswXSwgdHVwbGVSYW5nZTFbMV0pICYmXG4gICAgIHR1cGxlTGVzc09yRXF1YWwodHVwbGVSYW5nZTJbMF0sIHR1cGxlUmFuZ2UyWzFdKSk7XG59XG5cbi8vIFJldHVybiBhIG5ldyBBcnJheUJ1ZmZlciBieSBjb25jYXRlbmF0aW5nIGFuIGFycmF5IG9mIEFycmF5QnVmZmVycy5cbmZ1bmN0aW9uIGNvbmNhdEFycmF5QnVmZmVycyhidWZmZXJzOiBBcnJheUJ1ZmZlcltdKTogQXJyYXlCdWZmZXIge1xuICB2YXIgdG90YWxCeXRlcyA9IGJ1ZmZlcnMubWFwKGIgPT4gYi5ieXRlTGVuZ3RoKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcbiAgdmFyIG91dHB1dCA9IG5ldyBVaW50OEFycmF5KHRvdGFsQnl0ZXMpO1xuICB2YXIgcG9zaXRpb24gPSAwO1xuICBidWZmZXJzLmZvckVhY2goYnVmID0+IHtcbiAgICBvdXRwdXQuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZiksIHBvc2l0aW9uKTtcbiAgICBwb3NpdGlvbiArPSBidWYuYnl0ZUxlbmd0aDtcbiAgfSk7XG4gIHJldHVybiBvdXRwdXQuYnVmZmVyO1xufVxuXG50eXBlIEluZmxhdGVDYWNoZUtleSA9IHtcbiAgZmlsZW5hbWU6IHN0cmluZztcbiAgaW5pdGlhbE9mZnNldDogbnVtYmVyO1xufVxuXG50eXBlIFBha29SZXN1bHQgPSB7XG4gIGVycjogbnVtYmVyO1xuICBtc2c6IHN0cmluZztcbiAgYnVmZmVyOiA/QXJyYXlCdWZmZXI7XG4gIHRvdGFsX2luOiBudW1iZXI7XG59XG52YXIgaW5mbGF0aW9uQ2FjaGU6IHtba2V5OiBzdHJpbmddOiBQYWtvUmVzdWx0fSA9IHt9O1xuXG4vLyBleHRyYWN0ZWQgZm9yIGNhY2hpbmdcbmZ1bmN0aW9uIF9pbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24pOiBQYWtvUmVzdWx0IHtcbiAgdmFyIGluZmxhdG9yID0gbmV3IHBha28uSW5mbGF0ZSgpO1xuICBpbmZsYXRvci5wdXNoKGJ1ZmZlci5zbGljZShwb3NpdGlvbikpO1xuICByZXR1cm4ge1xuICAgIGVycjogaW5mbGF0b3IuZXJyLFxuICAgIG1zZzogaW5mbGF0b3IubXNnLFxuICAgIGJ1ZmZlcjogaW5mbGF0b3IucmVzdWx0ID8gaW5mbGF0b3IucmVzdWx0LmJ1ZmZlciA6IG51bGwsXG4gICAgdG90YWxfaW46IGluZmxhdG9yLnN0cm0udG90YWxfaW5cbiAgfTtcbn1cblxuZnVuY3Rpb24gY2FjaGVkSW5mbGF0ZU9uZShidWZmZXIsIHBvc2l0aW9uLCBjYWNoZT86IEluZmxhdGVDYWNoZUtleSkge1xuICBpZiAoIWNhY2hlKSB7XG4gICAgcmV0dXJuIF9pbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24pO1xuICB9XG4gIHZhciBjYWNoZUtleSA9IGNhY2hlLmZpbGVuYW1lICsgJzonICsgKGNhY2hlLmluaXRpYWxPZmZzZXQgKyBwb3NpdGlvbik7XG4gIHZhciB2ID0gaW5mbGF0aW9uQ2FjaGVbY2FjaGVLZXldO1xuICBpZiAodiAmJiAocG9zaXRpb24gKyB2LnRvdGFsX2luID4gYnVmZmVyLmJ5dGVMZW5ndGgpKSB7XG4gICAgLy8gSXQgc2hvdWxkIGZhaWwuXG4gICAgcmV0dXJuIF9pbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKCF2KSB7XG4gICAgdiA9IF9pbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24pO1xuICB9XG4gIGlmICghdi5lcnIgJiYgdi5idWZmZXIpIHtcbiAgICBpbmZsYXRpb25DYWNoZVtjYWNoZUtleV0gPSB2O1xuICB9XG4gIHJldHVybiB2O1xufVxuXG4vKipcbiAqIEJBTSBmaWxlcyBhcmUgd3JpdHRlbiBpbiBcIkJHWkZcIiBmb3JtYXQsIHdoaWNoIGNvbnNpc3RzIG9mIG1hbnkgY29uY2F0ZW5hdGVkXG4gKiBnemlwIGJsb2Nrcy4gZ3VuemlwIGNvbmNhdGVuYXRlcyBhbGwgdGhlIGluZmxhdGVkIGJsb2NrcywgYnV0IHBha28gb25seVxuICogaW5mbGF0ZXMgb25lIGJsb2NrIGF0IGEgdGltZS4gVGhpcyB3cmFwcGVyIG1ha2VzIHBha28gYmVoYXZlIGxpa2UgZ3VuemlwLlxuICogSWYgc3BlY2lmaWVkLCBsYXN0QmxvY2tTdGFydCB3aWxsIHN0b3AgaW5mbGF0aW9uIGJlZm9yZSBhbGwgdGhlIGJsb2Nrc1xuICogaGF2ZSBiZWVuIHByb2Nlc3NlZC5cbiAqL1xuZnVuY3Rpb24gaW5mbGF0ZUNvbmNhdGVuYXRlZEd6aXAoYnVmZmVyOiBBcnJheUJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RCbG9ja1N0YXJ0PzogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGU/OiBJbmZsYXRlQ2FjaGVLZXkpOiBJbmZsYXRlZEJsb2NrW10ge1xuICB2YXIgcG9zaXRpb24gPSAwLFxuICAgICAgYmxvY2tzID0gW107XG4gIGlmIChsYXN0QmxvY2tTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGFzdEJsb2NrU3RhcnQgPSBidWZmZXIuYnl0ZUxlbmd0aDtcbiAgfVxuICBkbyB7XG4gICAgdmFyIHJlc3VsdCA9IGNhY2hlZEluZmxhdGVPbmUoYnVmZmVyLCBwb3NpdGlvbiwgY2FjaGUpO1xuXG4gICAgaWYgKHJlc3VsdC5lcnIpIHtcbiAgICAgIHRocm93ICdHemlwIGVycm9yOiAnICsgcmVzdWx0Lm1zZztcbiAgICB9XG4gICAgaWYgKHJlc3VsdC5idWZmZXIpIHtcbiAgICAgIGJsb2Nrcy5wdXNoKHtcbiAgICAgICAgb2Zmc2V0OiBwb3NpdGlvbixcbiAgICAgICAgY29tcHJlc3NlZExlbmd0aDogcmVzdWx0LnRvdGFsX2luLFxuICAgICAgICBidWZmZXI6IHJlc3VsdC5idWZmZXJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBwb3NpdGlvbiArPSByZXN1bHQudG90YWxfaW47XG4gIH0gd2hpbGUgKHBvc2l0aW9uIDw9IGxhc3RCbG9ja1N0YXJ0ICYmIHBvc2l0aW9uIDwgYnVmZmVyLmJ5dGVMZW5ndGgpO1xuICByZXR1cm4gYmxvY2tzO1xufVxuXG4vKipcbiAqIEluZmxhdGUgb25lIG9yIG1vcmUgZ3ppcCBibG9ja3MgaW4gdGhlIGJ1ZmZlci5cbiAqIFJldHVybnMgdGhlIGNvbmNhdGVuYXRpb24gb2YgYWxsIGluZmxhdGVkIGJsb2Nrcy5cbiAqIFRoaXMgbWlycm9ycyB0aGUgYmVoYXZpb3Igb2YgZ3ppcCgxKS5cbiAqL1xuZnVuY3Rpb24gaW5mbGF0ZUd6aXAoYnVmZmVyOiBBcnJheUJ1ZmZlcik6IEFycmF5QnVmZmVyIHtcbiAgcmV0dXJuIGNvbmNhdEFycmF5QnVmZmVycyhpbmZsYXRlQ29uY2F0ZW5hdGVkR3ppcChidWZmZXIpLm1hcCh4ID0+IHguYnVmZmVyKSk7XG59XG5cbi8vIEdpdmVuICdjaHI5JywgcmV0dXJuICc5Jy4gR2l2ZW4gJzknLCByZXR1cm4gJ2NocjknLlxuZnVuY3Rpb24gYWx0Q29udGlnTmFtZShjb250aWc6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmIChjb250aWcuc2xpY2UoMCwgMykgPT0gJ2NocicpIHtcbiAgICByZXR1cm4gY29udGlnLnNsaWNlKDMpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnY2hyJyArIGNvbnRpZztcbiAgfVxufVxuXG4vLyBBcmUgdHdvIHN0cmluZ3MgZXF1YWwgbW9kdWxlIGEgJ2NocicgcHJlZml4P1xuLy8gZS5nLiBpc0Nock1hdGNoKCcxNycsICdjaHIxNycpID09IHRydWVcbmZ1bmN0aW9uIGlzQ2hyTWF0Y2goYTogc3RyaW5nLCBiOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIGEgPT0gYiB8fCAnY2hyJyArIGEgPT0gYiB8fCBhID09ICdjaHInICsgYjtcbn1cblxuLyoqXG4gKiBQaXBlIGFsbCBwcm9taXNlIGV2ZW50cyB0aHJvdWdoIGEgZGVmZXJyZWQgb2JqZWN0LlxuICogVGhpcyBpcyBzaW1pbGFyIHRvIGRlZmVycmVkLnJlc29sdmUocHJvbWlzZSksIGV4Y2VwdCB0aGF0IGl0IGFsbG93cyBwcm9ncmVzc1xuICogbm90aWZpY2F0aW9ucyBmcm9tIHRoZSBwcm9taXNlIHRvIGJ1YmJsZSB0aHJvdWdoLlxuICovXG5mdW5jdGlvbiBwaXBlUHJvbWlzZTxUPihkZWZlcnJlZDogUS5EZWZlcnJlZDxUPiwgcHJvbWlzZTogUS5Qcm9taXNlPFQ+KSB7XG4gIHByb21pc2UudGhlbihkZWZlcnJlZC5yZXNvbHZlLCBkZWZlcnJlZC5yZWplY3QsIGRlZmVycmVkLm5vdGlmeSk7XG59XG5cbi8qKlxuICogU2NhbGUgdGhlIHJhbmdlIGJ5IGBmYWN0b3JgIGFib3V0IGl0cyBjZW50ZXIuXG4gKiBmYWN0b3IgMi4wIHdpbGwgcHJvZHVjZSBhIHJhbmdlIHdpdGggdHdpY2UgdGhlIHNwYW4sIDAuNSB3aXRoIGhhbGYuXG4gKiBBbiBpbnZhcmlhbnQgaXMgdGhhdCB0aGUgY2VudGVyIHZhbHVlIHdpbGwgYmUgaWRlbnRpY2FsIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gKi9cbmZ1bmN0aW9uIHNjYWxlUmFuZ2UocmFuZ2U6IEludGVydmFsLCBmYWN0b3I6IG51bWJlcik6IEludGVydmFsIHtcbiAgdmFyIHNwYW4gPSByYW5nZS5zdG9wIC0gcmFuZ2Uuc3RhcnQsXG4gICAgICBjZW50ZXIgPSBNYXRoLmZsb29yKChyYW5nZS5zdGFydCArIHJhbmdlLnN0b3ApIC8gMiksXG4gICAgICBuZXdTcGFuID0gTWF0aC5yb3VuZChmYWN0b3IgKiBzcGFuIC8gMikgKiAyLFxuICAgICAgc3RhcnQgPSBjZW50ZXIgLSBuZXdTcGFuIC8gMixcbiAgICAgIHN0b3AgPSBjZW50ZXIgKyBuZXdTcGFuIC8gMjsgIC8vIFRPRE86IGNsYW1wXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIC8vIFNoaWZ0IHRvIHRoZSByaWdodCBzbyB0aGF0IHRoZSByYW5nZSBzdGFydHMgYXQgemVyby5cbiAgICBzdG9wIC09IHN0YXJ0O1xuICAgIHN0YXJ0ID0gMDtcbiAgfVxuICByZXR1cm4gbmV3IEludGVydmFsKHN0YXJ0LCBzdG9wKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHVzZXItc3BlY2lmaWVkIHJhbmdlIGludG8gYSByYW5nZS5cbiAqIE9ubHkgdGhlIHNwZWNpZmllZCBwb3J0aW9ucyBvZiB0aGUgcmFuZ2Ugd2lsbCBiZSBmaWxsZWQgb3V0IGluIHRoZSByZXR1cm5lZCBvYmplY3QuXG4gKiBGb3IgZXhhbXBsZTpcbiAqICdjaHIxNycgLS0+IHtjb250aWc6J2NocjE3J31cbiAqICcxMC0yMCcgLS0+IHtzdGFydDogMTAsIHN0b3A6IDIwfVxuICogJzE3OjEwLTIwJyAtLT4ge2NvbnRpZzogJzE3Jywgc3RhcnQ6IDEwLCBzdG9wOiAyMH1cbiAqIFJldHVybnMgbnVsbCBpZiB0aGUgcmFuZ2UgY2FuJ3QgYmUgcGFyc2VkLlxuICovXG5mdW5jdGlvbiBwYXJzZVJhbmdlKHJhbmdlOiBzdHJpbmcpOiA/UGFydGlhbEdlbm9tZVJhbmdlIHtcbiAgLy8gRmlyc3QgdHJ5ICdjb250aWc6c3RhcnQtc3RvcCdcbiAgdmFyIG0gPSAvXihbXiA6XSspOihbMC05LF0rKS0oWzAtOSxdKykkLy5leGVjKHJhbmdlKTtcbiAgaWYgKG0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGlnOiBtWzFdLFxuICAgICAgc3RhcnQ6IHBhcnNlTnVtYmVyV2l0aENvbW1hcyhtWzJdKSxcbiAgICAgIHN0b3A6IHBhcnNlTnVtYmVyV2l0aENvbW1hcyhtWzNdKVxuICAgIH07XG4gIH1cblxuICAvLyBUaGVuIGNvbnRpZzpudW1iZXJcbiAgbSA9IC9eKFteIDpdKyk6KFswLTksXSspJC8uZXhlYyhyYW5nZSk7XG4gIGlmIChtKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRpZzogbVsxXSxcbiAgICAgIHN0YXJ0OiBwYXJzZU51bWJlcldpdGhDb21tYXMobVsyXSksXG4gICAgfTtcbiAgfVxuXG4gIC8vIFRoZW4gJ3N0YXJ0OnN0b3AnXG4gIG0gPSAvXihbMC05LF0rKS0oWzAtOSxdKykkLy5leGVjKHJhbmdlKTtcbiAgaWYgKG0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnQ6IHBhcnNlTnVtYmVyV2l0aENvbW1hcyhtWzFdKSxcbiAgICAgIHN0b3A6IHBhcnNlTnVtYmVyV2l0aENvbW1hcyhtWzJdKVxuICAgIH07XG4gIH1cblxuICAvLyBUaGVuICdjb250aWc6JyBvciBub24tbnVtZXJpYyAnY29udGlnJ1xuICBtID0gL14oW14gOl0rKTokLy5leGVjKHJhbmdlKSB8fCAvXihbXjAtOV1bXiA6XSspJC8uZXhlYyhyYW5nZSk7XG4gIGlmIChtKSB7XG4gICAgcmV0dXJuIHsgY29udGlnOiBtWzFdIH07XG4gIH1cblxuICAvLyBUaGVuIHBsYWluLW9sZCBudW1iZXJzLlxuICBtID0gL14oWzAtOSxdKykkLy5leGVjKHJhbmdlKTtcbiAgaWYgKG0pIHtcbiAgICByZXR1cm4geyBzdGFydDogcGFyc2VOdW1iZXJXaXRoQ29tbWFzKG1bMV0pIH07XG4gIH1cblxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRJbnRlcnZhbChpdjogSW50ZXJ2YWwpOiBzdHJpbmcge1xuICByZXR1cm4gbnVtYmVyV2l0aENvbW1hcyhpdi5zdGFydCkgKyAnLScgKyBudW1iZXJXaXRoQ29tbWFzKGl2LnN0b3ApO1xufVxuXG4vLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjkwMTI5OC8zODg5NTFcbmZ1bmN0aW9uIG51bWJlcldpdGhDb21tYXMoeDogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIHgudG9TdHJpbmcoKS5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCBcIixcIik7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTnVtYmVyV2l0aENvbW1hcyh4OiBzdHJpbmcpOiBudW1iZXIge1xuICByZXR1cm4gcGFyc2VJbnQoeC5yZXBsYWNlKC8sL2csICcnKSwgMTApO1xufVxuXG5mdW5jdGlvbiBmbGF0TWFwPFQsIFI+KGFycmF5OiBUW10sIGZuOiAodDogVCk9PlJbXSk6IFJbXSB7XG4gIHJldHVybiBfLmZsYXR0ZW4oYXJyYXkubWFwKGZuKSwgdHJ1ZSAvKiBzaGFsbG93ICovKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgdGhlIHBlcmNlbnRpbGUtdGggZWxlbWVudCBvZiB4cy5cbiAqIHBlcmNlbnRpbGUgc2hvdWxkIGJlIGFuIGludGVnZXIgZnJvbSAxIHRvIDk5LlxuICogVGhpcyB3aWxsIHNvcnQgdGhlIHhzLlxuICovXG5mdW5jdGlvbiBjb21wdXRlUGVyY2VudGlsZSh4czogbnVtYmVyW10sIHBlcmNlbnRpbGU6IG51bWJlcik6IG51bWJlciB7XG4gIGlmICh4cy5sZW5ndGggPT09IDApIHJldHVybiAwOyAgLy8gcGxhY2Vob2xkZXIgdmFsdWVcblxuICB4cy5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gIHZhciBpZHggPSAoeHMubGVuZ3RoIC0gMSkgKiBwZXJjZW50aWxlIC8gMTAwLFxuICAgICAgbG8gPSBNYXRoLmZsb29yKGlkeCksXG4gICAgICBoaSA9IE1hdGguY2VpbChpZHgpO1xuXG4gIGlmIChsbyA9PSBoaSkge1xuICAgIHJldHVybiB4c1tsb107XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHhzW2xvXSAqIChpZHggLSBsbykgKyB4c1toaV0gKiAoaGkgLSBpZHgpO1xuICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBzdHJpbmcgaW50byBhIG51bGwsIE5hTiwgdW5kZWZpbmVkLCBJbmYgb3IgLUluZi4gUmV0dXJuc1xuICogb3JpZ2luYWwgc3RyaW5nIGlmIHN0cmluZyBpcyBub3QgYSBzcGVjaWFsIGNhc2UuXG4gKiBSZXR1cm5zIHN0cmluZyBwYXJzZWQgdG8gc3BlY2lhbCBjYXNlIChudWxsLCBOYU4sIHVuZGVmaW5lZCwgSW5mIG9yIC1JbmYpXG4gKiBvciBvcmlnaW5hbCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIHN0cmluZ1RvTGl0ZXJhbCh2YWx1ZTogc3RyaW5nKTogYW55IHtcbiAgdmFyIG1hcHMgPSB7XG4gICBcIk5hTlwiOiBOYU4sXG4gICBcIm51bGxcIjogbnVsbCxcbiAgIFwidW5kZWZpbmVkXCI6IHVuZGVmaW5lZCxcbiAgIFwiSW5maW5pdHlcIjogSW5maW5pdHksXG4gICBcIi1JbmZpbml0eVwiOiAtSW5maW5pdHlcbiAgIH07XG4gIHJldHVybiAoKHZhbHVlIGluIG1hcHMpID8gbWFwc1t2YWx1ZV0gOiB2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICB0dXBsZUxlc3NPckVxdWFsLFxuICB0dXBsZVJhbmdlT3ZlcmxhcHMsXG4gIGNvbmNhdEFycmF5QnVmZmVycyxcbiAgaW5mbGF0ZUNvbmNhdGVuYXRlZEd6aXAsXG4gIGluZmxhdGVHemlwLFxuICBhbHRDb250aWdOYW1lLFxuICBwaXBlUHJvbWlzZSxcbiAgc2NhbGVSYW5nZSxcbiAgcGFyc2VSYW5nZSxcbiAgZm9ybWF0SW50ZXJ2YWwsXG4gIGlzQ2hyTWF0Y2gsXG4gIGZsYXRNYXAsXG4gIGNvbXB1dGVQZXJjZW50aWxlLFxuICBzdHJpbmdUb0xpdGVyYWxcbn07XG4iLCIvKipcbiAqIEFic3RyYWN0Q2FjaGVcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG4vKmpzaGludCB1bnVzZWQ6ZmFsc2UgKi9cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xuXG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuXG5pbXBvcnQgdHlwZSB7VmlzdWFsQWxpZ25tZW50fSBmcm9tICcuL1BpbGV1cENhY2hlJztcbmltcG9ydCBHZW5lcmljRmVhdHVyZSBmcm9tICcuLi9kYXRhL2dlbmVyaWNGZWF0dXJlLmpzJztcblxuXG5leHBvcnQgdHlwZSBWaXN1YWxHcm91cDxUOiAoVmlzdWFsQWxpZ25tZW50IHwgR2VuZXJpY0ZlYXR1cmUpPiA9IHtcbiAga2V5OiBzdHJpbmc7XG4gIHJvdzogbnVtYmVyOyAgLy8gcGlsZXVwIHJvdy5cbiAgc3BhbjogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPjsgIC8vIHRpcC10by10aXAgc3BhbiBmb3IgdGhlIHJlYWQgZ3JvdXBcbiAgaW5zZXJ0OiA/SW50ZXJ2YWw7ICAvLyBpbnRlcnZhbCBmb3IgdGhlIGNvbm5lY3RvciwgaWYgYXBwbGljYWJsZS5cbiAgaXRlbXM6IFRbXTtcbn07XG5cbmNsYXNzIEFic3RyYWN0Q2FjaGU8VDogKFZpc3VhbEFsaWdubWVudCB8IEdlbmVyaWNGZWF0dXJlKT4ge1xuICAvLyBtYXBzIGdyb3VwS2V5IHRvIFZpc3VhbEdyb3VwXG4gIGdyb3Vwczoge1trZXk6IHN0cmluZ106IFZpc3VhbEdyb3VwPFQ+fTsgXG4gIHJlZlRvUGlsZXVwOiB7W2tleTogc3RyaW5nXTogQXJyYXk8SW50ZXJ2YWxbXT59O1xuICByZWZlcmVuY2VTb3VyY2U6IFR3b0JpdFNvdXJjZTtcblxuICBjb25zdHJ1Y3RvcihyZWZlcmVuY2VTb3VyY2U6IFR3b0JpdFNvdXJjZSkge1xuICAgIHRoaXMuZ3JvdXBzID0ge307XG4gICAgdGhpcy5yZWZUb1BpbGV1cCA9IHt9O1xuICAgIHRoaXMucmVmZXJlbmNlU291cmNlID0gcmVmZXJlbmNlU291cmNlO1xuICB9XG5cbiAgcGlsZXVwRm9yUmVmKHJlZjogc3RyaW5nKTogQXJyYXk8SW50ZXJ2YWxbXT4ge1xuICAgIGlmIChyZWYgaW4gdGhpcy5yZWZUb1BpbGV1cCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVmVG9QaWxldXBbcmVmXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFsdCA9IHV0aWxzLmFsdENvbnRpZ05hbWUocmVmKTtcbiAgICAgIGlmIChhbHQgaW4gdGhpcy5yZWZUb1BpbGV1cCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZUb1BpbGV1cFthbHRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEhvdyBtYW55IHJvd3MgdGFsbCBpcyB0aGUgcGlsZXVwIGZvciBhIGdpdmVuIHJlZj8gVGhpcyBpcyByZWxhdGVkIHRvIHRoZVxuICAvLyBtYXhpbXVtIHJlYWQgZGVwdGguIFRoaXMgaXMgJ2NocictYWdub3N0aWMuXG4gIHBpbGV1cEhlaWdodEZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgdmFyIHBpbGV1cCA9IHRoaXMucGlsZXVwRm9yUmVmKHJlZik7XG4gICAgcmV0dXJuIHBpbGV1cCA/IHBpbGV1cC5sZW5ndGggOiAwO1xuICB9XG5cbiAgLy8gRmluZCBncm91cHMgb3ZlcmxhcHBpbmcgdGhlIHJhbmdlLiBUaGlzIGlzICdjaHInLWFnbm9zdGljLlxuICBnZXRHcm91cHNPdmVybGFwcGluZyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IFZpc3VhbEdyb3VwPFQ+W10ge1xuICAgIC8vIFRPRE86IHNwZWVkIHRoaXMgdXAgdXNpbmcgYW4gaW50ZXJ2YWwgdHJlZVxuICAgIHJldHVybiBfLmZpbHRlcih0aGlzLmdyb3VwcywgZ3JvdXAgPT4gZ3JvdXAuc3Bhbi5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gIH1cblxuICAvLyBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBncm91cHMgYXQgYSBsb2N1cy5cbiAgLy8gTGlrZSBnZXRHcm91cHNPdmVybGFwcGluZyhyYW5nZSkubGVuZ3RoID4gMCwgYnV0IG1vcmUgZWZmaWNpZW50LlxuICBhbnlHcm91cHNPdmVybGFwcGluZyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIGZvciAodmFyIGsgaW4gdGhpcy5ncm91cHMpIHtcbiAgICAgIHZhciBncm91cCA9IHRoaXMuZ3JvdXBzW2tdO1xuICAgICAgaWYgKGdyb3VwLnNwYW4uaW50ZXJzZWN0cyhyYW5nZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEFic3RyYWN0Q2FjaGU7XG4iLCIvKipcbiAqIERhdGEgbWFuYWdlbWVudCBmb3IgQ292ZXJhZ2VUcmFjay5cbiAqXG4gKiBUaGlzIGNsYXNzIHRyYWNrcyBjb3VudHMgYW5kIG1pc21hdGNoZXMgYXQgZWFjaCBsb2N1cy5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtBbGlnbm1lbnR9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgRmVhdHVyZSBmcm9tICcuLi9kYXRhL2ZlYXR1cmUnO1xuaW1wb3J0IHR5cGUge1R3b0JpdFNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9Ud29CaXREYXRhU291cmNlJztcbmltcG9ydCB0eXBlIENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIHtDb3ZlcmFnZUNvdW50fSBmcm9tICcuL3BpbGV1cHV0aWxzJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCB0eXBlIEJpblN1bW1hcnkgPSB7XG4gIGNvdW50OiBudW1iZXI7XG4gIC8vIFRoZXNlIHByb3BlcnRpZXMgd2lsbCBvbmx5IGJlIHByZXNlbnQgd2hlbiB0aGVyZSBhcmUgbWlzbWF0Y2hlcy5cbiAgbWlzbWF0Y2hlcz86IHtba2V5OiBzdHJpbmddOiBudW1iZXJ9O1xuICByZWY/OiBzdHJpbmc7ICAvLyB3aGF0IGRvZXMgdGhlIHJlZmVyZW5jZSBoYXZlIGhlcmU/XG59O1xuXG4vLyBUaGlzIGNsYXNzIHByb3ZpZGVzIGRhdGEgbWFuYWdlbWVudCBmb3IgdGhlIHZpc3VhbGl6YXRpb24sIGdyb3VwaW5nIHBhaXJlZFxuLy8gcmVhZHMgYW5kIG1hbmFnaW5nIHRoZSBwaWxldXAuXG5jbGFzcyBDb3ZlcmFnZUNhY2hlPFQ6IChBbGlnbm1lbnQgfCBGZWF0dXJlKT4ge1xuICAvLyBtYXBzIGdyb3VwS2V5IHRvIFZpc3VhbEdyb3VwXG4gIGl0ZW1zOiB7W2tleTogc3RyaW5nXTogVH07XG4gIC8vIHJlZiAtLT4gcG9zaXRpb24gLS0+IEJpblN1bW1hcnlcbiAgcmVmVG9Db3VudHM6IHtba2V5OiBzdHJpbmddOiB7W2tleTogbnVtYmVyXTogQmluU3VtbWFyeX19O1xuICByZWZUb01heENvdmVyYWdlOiB7W2tleTogc3RyaW5nXTogbnVtYmVyfTtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG5cbiAgY29uc3RydWN0b3IocmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2UpIHtcbiAgICB0aGlzLml0ZW1zID0ge307XG4gICAgdGhpcy5yZWZUb0NvdW50cyA9IHt9O1xuICAgIHRoaXMucmVmVG9NYXhDb3ZlcmFnZSA9IHt9O1xuICAgIHRoaXMucmVmZXJlbmNlU291cmNlID0gcmVmZXJlbmNlU291cmNlO1xuICB9XG5cbiAgLy8gTG9hZCBhIG5ldyByZWFkIGludG8gdGhlIHZpc3VhbGl6YXRpb24gY2FjaGUuXG4gIC8vIENhbGxpbmcgdGhpcyBtdWx0aXBsZSB0aW1lcyB3aXRoIHRoZSBzYW1lIHJlYWQgaXMgYSBuby1vcC5cbiAgYWRkSXRlbShpdGVtOiBUKSB7XG4gICAgdmFyIGtleSA9IGl0ZW0uZ2V0S2V5KCk7XG4gICAgaWYgKGtleSBpbiB0aGlzLml0ZW1zKSByZXR1cm47ICAvLyB3ZSd2ZSBhbHJlYWR5IHNlZW4gdGhpcyBvbmUuXG4gICAgdGhpcy5pdGVtc1trZXldID0gaXRlbTtcbiAgICB2YXIgY292ZXJhZ2VDb3VudCA9IGl0ZW0uZ2V0Q292ZXJhZ2UodGhpcy5yZWZlcmVuY2VTb3VyY2UpO1xuICAgIHRoaXMuYWRkVG9Db3ZlcmFnZShjb3ZlcmFnZUNvdW50KTtcbiAgfVxuXG4gIC8vIFVwZGF0ZXMgcmVmZXJlbmNlIG1pc21hdGNoIGluZm9ybWF0aW9uIGZvciBwcmV2aW91c2x5LWxvYWRlZCByZWFkcy5cbiAgdXBkYXRlTWlzbWF0Y2hlcyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikge1xuICAgIHZhciByZWYgPSB0aGlzLl9jYW5vbmljYWxSZWYocmFuZ2UuY29udGlnKTtcbiAgICB0aGlzLnJlZlRvQ291bnRzW3JlZl0gPSB7fTsgIC8vIFRPRE86IGNvdWxkIGJlIG1vcmUgZWZmaWNpZW50XG4gICAgdGhpcy5yZWZUb01heENvdmVyYWdlW3JlZl0gPSAwO1xuXG4gICAgZm9yICh2YXIgayBpbiB0aGlzLml0ZW1zKSB7XG4gICAgICB2YXIgaXRlbTogKEZlYXR1cmUgfCBBbGlnbm1lbnQpID0gdGhpcy5pdGVtc1trXTtcbiAgICAgIGlmIChpdGVtLmdldEludGVydmFsKCkuY2hyT25Db250aWcocmFuZ2UuY29udGlnKSkge1xuICAgICAgICB2YXIgY292ZXJhZ2VDb3VudCA9IGl0ZW0uZ2V0Q292ZXJhZ2UodGhpcy5yZWZlcmVuY2VTb3VyY2UpO1xuICAgICAgICB0aGlzLmFkZFRvQ292ZXJhZ2UoY292ZXJhZ2VDb3VudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYWRkVG9Db3ZlcmFnZShjb3ZlcmFnZUNvdW50OiBDb3ZlcmFnZUNvdW50KSB7XG5cbiAgICAvLyBBZGQgY292ZXJhZ2UvbWlzbWF0Y2ggaW5mb3JtYXRpb25cbiAgICB2YXIgcmVmID0gdGhpcy5fY2Fub25pY2FsUmVmKGNvdmVyYWdlQ291bnQucmFuZ2UuY29udGlnKTtcbiAgICBpZiAoIShyZWYgaW4gdGhpcy5yZWZUb0NvdW50cykpIHtcbiAgICAgIHRoaXMucmVmVG9Db3VudHNbcmVmXSA9IHt9O1xuICAgICAgdGhpcy5yZWZUb01heENvdmVyYWdlW3JlZl0gPSAwO1xuICAgIH1cbiAgICB2YXIgY291bnRzID0gdGhpcy5yZWZUb0NvdW50c1tyZWZdLFxuICAgICAgICBtYXggPSB0aGlzLnJlZlRvTWF4Q292ZXJhZ2VbcmVmXSxcbiAgICAgICAgY29udGlnID0gY292ZXJhZ2VDb3VudC5yYW5nZSxcbiAgICAgICAgc3RhcnQgPSBjb250aWcuc3RhcnQoKSxcbiAgICAgICAgc3RvcCA9IGNvbnRpZy5zdG9wKCk7XG4gICAgZm9yICh2YXIgcG9zID0gc3RhcnQ7IHBvcyA8PSBzdG9wOyBwb3MrKykge1xuICAgICAgbGV0IGMgPSBjb3VudHNbcG9zXTtcbiAgICAgIGlmICghYykge1xuICAgICAgICBjb3VudHNbcG9zXSA9IGMgPSB7Y291bnQ6IDB9O1xuICAgICAgfVxuICAgICAgYy5jb3VudCArPSAxO1xuICAgICAgaWYgKGMuY291bnQgPiBtYXgpIG1heCA9IGMuY291bnQ7XG4gICAgfVxuXG4gICAgaWYgKGNvdmVyYWdlQ291bnQub3BJbmZvKSB7XG4gICAgICBmb3IgKHZhciBtbSBvZiBjb3ZlcmFnZUNvdW50Lm9wSW5mby5taXNtYXRjaGVzKSB7XG4gICAgICAgIHZhciBiaW4gPSBjb3VudHNbbW0ucG9zXTtcbiAgICAgICAgdmFyIG1pc21hdGNoZXM7XG4gICAgICAgIGlmIChiaW4ubWlzbWF0Y2hlcykge1xuICAgICAgICAgIG1pc21hdGNoZXMgPSBiaW4ubWlzbWF0Y2hlcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtaXNtYXRjaGVzID0gYmluLm1pc21hdGNoZXMgPSB7fTtcbiAgICAgICAgICBiaW4ucmVmID0gdGhpcy5yZWZlcmVuY2VTb3VyY2UuZ2V0UmFuZ2VBc1N0cmluZyh7XG4gICAgICAgICAgICBjb250aWc6IHJlZiwgc3RhcnQ6IG1tLnBvcywgc3RvcDogbW0ucG9zfSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGMgPSBtaXNtYXRjaGVzW21tLmJhc2VQYWlyXSB8fCAwO1xuICAgICAgICBtaXNtYXRjaGVzW21tLmJhc2VQYWlyXSA9IDEgKyBjO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlZlRvTWF4Q292ZXJhZ2VbcmVmXSA9IG1heDtcblxuICB9XG5cbiAgbWF4Q292ZXJhZ2VGb3JSZWYocmVmOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnJlZlRvTWF4Q292ZXJhZ2VbcmVmXSB8fFxuICAgICAgICB0aGlzLnJlZlRvTWF4Q292ZXJhZ2VbdXRpbHMuYWx0Q29udGlnTmFtZShyZWYpXSB8fFxuICAgICAgICAwO1xuICB9XG5cbiAgYmluc0ZvclJlZihyZWY6IHN0cmluZyk6IHtba2V5OiBudW1iZXJdOiBCaW5TdW1tYXJ5fSB7XG4gICAgcmV0dXJuIHRoaXMucmVmVG9Db3VudHNbcmVmXSB8fFxuICAgICAgICB0aGlzLnJlZlRvQ291bnRzW3V0aWxzLmFsdENvbnRpZ05hbWUocmVmKV0gfHxcbiAgICAgICAge307XG4gIH1cblxuICAvLyBSZXR1cm5zIHdoaWNoZXZlciBmb3JtIG9mIHRoZSByZWYgKFwiY2hyMTdcIiwgXCIxN1wiKSBoYXMgYmVlbiBzZWVuLlxuICBfY2Fub25pY2FsUmVmKHJlZjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5yZWZUb0NvdW50c1tyZWZdKSByZXR1cm4gcmVmO1xuICAgIHZhciBhbHQgPSB1dGlscy5hbHRDb250aWdOYW1lKHJlZik7XG4gICAgaWYgKHRoaXMucmVmVG9Db3VudHNbYWx0XSkgcmV0dXJuIGFsdDtcbiAgICByZXR1cm4gcmVmO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ292ZXJhZ2VDYWNoZTtcbiIsIi8qKlxuICogQ292ZXJhZ2UgdmlzdWFsaXphdGlvbiBvZiBBbGlnbm1lbnQgc291cmNlcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0FsaWdubWVudH0gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCB0eXBlIHtEYXRhU291cmNlfSBmcm9tICcuLi9zb3VyY2VzL0RhdGFTb3VyY2UnO1xuaW1wb3J0IEZlYXR1cmUgZnJvbSAnLi4vZGF0YS9mZWF0dXJlJztcbmltcG9ydCB0eXBlIHtEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgdHlwZSB7QmluU3VtbWFyeX0gZnJvbSAnLi9Db3ZlcmFnZUNhY2hlJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCB0eXBlIHtTdGF0ZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc2NhbGUgZnJvbSAnLi4vc2NhbGUnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBDb3ZlcmFnZUNhY2hlIGZyb20gJy4vQ292ZXJhZ2VDYWNoZSc7XG5pbXBvcnQgVGlsZWRDYW52YXMgZnJvbSAnLi9UaWxlZENhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcblxuLy8gQmFzaWMgc2V0dXAgKFRPRE86IG1ha2UgdGhpcyBjb25maWd1cmFibGUgYnkgdGhlIHVzZXIpXG5jb25zdCBTSE9XX01JU01BVENIRVMgPSB0cnVlO1xuXG4vLyBPbmx5IHNob3cgbWlzbWF0Y2ggaW5mb3JtYXRpb24gd2hlbiB0aGVyZSBhcmUgbW9yZSB0aGFuIHRoaXMgbWFueVxuLy8gcmVhZHMgc3VwcG9ydGluZyB0aGF0IG1pc21hdGNoLlxuY29uc3QgTUlTTUFUQ0hfVEhSRVNIT0xEID0gMTtcblxuXG5jbGFzcyBDb3ZlcmFnZVRpbGVkQ2FudmFzIGV4dGVuZHMgVGlsZWRDYW52YXMge1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgb3B0aW9uczogT2JqZWN0O1xuICBjYWNoZTogQ292ZXJhZ2VDYWNoZTwgQWxpZ25tZW50IHwgRmVhdHVyZT4gO1xuXG4gIGNvbnN0cnVjdG9yKGNhY2hlOiBDb3ZlcmFnZUNhY2hlPChBbGlnbm1lbnQgfCBGZWF0dXJlKT4sIGhlaWdodDogbnVtYmVyLCBvcHRpb25zOiBPYmplY3QpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xuICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgoMSwgaGVpZ2h0KTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgaGVpZ2h0Rm9yUmVmKHJlZjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5oZWlnaHQ7XG4gIH1cblxuICB1cGRhdGUoaGVpZ2h0OiBudW1iZXIsIG9wdGlvbnM6IE9iamVjdCkge1xuICAgIC8vIHdvcmthcm91bmQgZm9yIGFuIGlzc3VlIGluIFBoYW50b21KUyB3aGVyZSBoZWlnaHQgYWx3YXlzIGNvbWVzIG91dCB0byB6ZXJvLlxuICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgoMSwgaGVpZ2h0KTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgeVNjYWxlRm9yUmVmKHJlZjogc3RyaW5nLCBib3R0b21QYWRkaW5nOiBudW1iZXIsIHRvcFBhZGRpbmc6bnVtYmVyKTogKHk6IG51bWJlcikgPT4gbnVtYmVyIHtcbiAgICB2YXIgbWF4Q292ZXJhZ2UgPSB0aGlzLmNhY2hlLm1heENvdmVyYWdlRm9yUmVmKHJlZik7XG4gICAgcmV0dXJuIHNjYWxlLmxpbmVhcigpXG4gICAgICAuZG9tYWluKFttYXhDb3ZlcmFnZSwgMF0pXG4gICAgICAucmFuZ2UoW2JvdHRvbVBhZGRpbmcsIHRoaXMuaGVpZ2h0IC0gdG9wUGFkZGluZ10pXG4gICAgICAubmljZSgpO1xuICB9XG5cbiAgcmVuZGVyKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgIHhTY2FsZTogKHg6IG51bWJlcik9Pm51bWJlcixcbiAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgdmFyIGJpbnMgPSB0aGlzLmNhY2hlLmJpbnNGb3JSZWYocmFuZ2UuY29udGlnKTtcbiAgICB2YXIgeVNjYWxlID0gdGhpcy55U2NhbGVGb3JSZWYocmFuZ2UuY29udGlnLCAxMCwgMTApO1xuICAgIHZhciByZWxheGVkUmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoXG4gICAgICAgIHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQoKSAtIDEsIHJhbmdlLnN0b3AoKSArIDEpO1xuICAgIHJlbmRlckJhcnMoY3R4LCB4U2NhbGUsIHlTY2FsZSwgcmVsYXhlZFJhbmdlLCBiaW5zLCB0aGlzLm9wdGlvbnMpO1xuICB9XG59XG5cblxuLy8gRHJhdyBjb3ZlcmFnZSBiaW5zICYgbWlzbWF0Y2hlc1xuZnVuY3Rpb24gcmVuZGVyQmFycyhjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgIHhTY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHlTY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICBiaW5zOiB7W2tleTogbnVtYmVyXTogQmluU3VtbWFyeX0sXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IE9iamVjdCkge1xuICBpZiAoXy5pc0VtcHR5KGJpbnMpKSByZXR1cm47XG5cbiAgdmFyIGJhcldpZHRoID0geFNjYWxlKDEpIC0geFNjYWxlKDApO1xuICB2YXIgc2hvd1BhZGRpbmcgPSAoYmFyV2lkdGggPiBzdHlsZS5DT1ZFUkFHRV9NSU5fQkFSX1dJRFRIX0ZPUl9HQVApO1xuICB2YXIgcGFkZGluZyA9IHNob3dQYWRkaW5nID8gMSA6IDA7XG5cbiAgdmFyIGJpblBvcyA9IGZ1bmN0aW9uKHBvczogbnVtYmVyLCBjb3VudDogbnVtYmVyKSB7XG4gICAgLy8gUm91bmQgdG8gaW50ZWdlciBjb29yZGluYXRlcyBmb3IgY3Jpc3AgbGluZXMsIHdpdGhvdXQgYWxpYXNpbmcuXG4gICAgdmFyIGJhclgxID0gTWF0aC5yb3VuZCh4U2NhbGUoMSArIHBvcykpLFxuICAgICAgICBiYXJYMiA9IE1hdGgucm91bmQoeFNjYWxlKDIgKyBwb3MpKSAtIHBhZGRpbmcsXG4gICAgICAgIGJhclkgPSBNYXRoLnJvdW5kKHlTY2FsZShjb3VudCkpO1xuICAgIHJldHVybiB7YmFyWDEsIGJhclgyLCBiYXJZfTtcbiAgfTtcblxuICB2YXIgbWlzbWF0Y2hCaW5zID0gKHt9IDoge1trZXk6bnVtYmVyXTogQmluU3VtbWFyeX0pOyAgLy8ga2VlcCB0cmFjayBvZiB3aGljaCBvbmVzIGhhdmUgbWlzbWF0Y2hlc1xuICB2YXIgdkJhc2VQb3NZID0geVNjYWxlKDApOyAgLy8gdGhlIHZlcnkgYm90dG9tIG9mIHRoZSBjYW52YXNcbiAgdmFyIHN0YXJ0ID0gcmFuZ2Uuc3RhcnQoKSxcbiAgICAgIHN0b3AgPSByYW5nZS5zdG9wKCk7XG5cbiAgLy8gdHJhY2sgbGFzdCBnZW5vbWljIHBvc2l0aW9uXG4gIHZhciBsYXN0UG9zID0gbnVsbDtcblxuICBmb3IgKHZhciBwb3MgPSBzdGFydDsgcG9zIDwgc3RvcDsgcG9zKyspIHtcbiAgICB2YXIgYmluID0gYmluc1twb3NdO1xuICAgIGlmICghYmluKSBjb250aW51ZTtcblxuXG4gICAgaWYgKCFsYXN0UG9zKSB7XG4gICAgICBsZXQge2JhclgxfSA9IGJpblBvcyhwb3MsIGJpbi5jb3VudCk7XG4gICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQ09WRVJBR0VfQklOX0NPTE9SO1xuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgY3R4Lm1vdmVUbyhiYXJYMSwgdkJhc2VQb3NZKTtcbiAgICB9XG5cbiAgICBjdHgucHVzaE9iamVjdChiaW4pO1xuICAgIGxldCB7YmFyWDEsIGJhclgyLCBiYXJZfSA9IGJpblBvcyhwb3MsIGJpbi5jb3VudCk7XG4gICAgY3R4LmxpbmVUbyhiYXJYMSwgYmFyWSk7XG4gICAgY3R4LmxpbmVUbyhiYXJYMiwgYmFyWSk7XG4gICAgaWYgKHNob3dQYWRkaW5nKSB7XG4gICAgICBjdHgubGluZVRvKGJhclgyLCB2QmFzZVBvc1kpO1xuICAgICAgY3R4LmxpbmVUbyhiYXJYMiArIDEsIHZCYXNlUG9zWSk7XG4gICAgfVxuXG4gICAgaWYgKFNIT1dfTUlTTUFUQ0hFUyAmJiAhXy5pc0VtcHR5KGJpbi5taXNtYXRjaGVzKSkge1xuICAgICAgbWlzbWF0Y2hCaW5zW3Bvc10gPSBiaW47XG4gICAgfVxuICAgIGxhc3RQb3MgPSBwb3M7XG4gICAgY3R4LnBvcE9iamVjdCgpO1xuICB9XG5cbiAgaWYgKGxhc3RQb3MpIHtcbiAgICBsZXQge2JhclgyfSA9IGJpblBvcyhsYXN0UG9zLCAwKTsgLy8gY291bnQgZG9lcyBub3QgbWF0dGVyLCBkcmF3aW5nIHZCYXNlUG9zWVxuICAgIGN0eC5saW5lVG8oYmFyWDIsIHZCYXNlUG9zWSk7ICAvLyByaWdodCBlZGdlIG9mIHRoZSByaWdodCBiYXIuXG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIGN0eC5maWxsKCk7XG4gIH1cblxuICAvLyBOb3cgcmVuZGVyIHRoZSBtaXNtYXRjaGVzXG4gIF8uZWFjaChtaXNtYXRjaEJpbnMsIChiaW4sIHBvcykgPT4ge1xuICAgIGlmICghYmluLm1pc21hdGNoZXMpIHJldHVybjsgIC8vIHRoaXMgaXMgaGVyZSBmb3IgRmxvdzsgaXQgY2FuJ3QgcmVhbGx5IGhhcHBlbi5cbiAgICBjb25zdCBtaXNtYXRjaGVzID0gXy5jbG9uZShiaW4ubWlzbWF0Y2hlcyk7XG4gICAgcG9zID0gTnVtYmVyKHBvcyk7ICAvLyBvYmplY3Qga2V5cyBhcmUgc3RyaW5ncywgbm90IG51bWJlcnMuXG5cbiAgICAvLyBJZiB0aGlzIGlzIGEgaGlnaC1mcmVxdWVuY3kgdmFyaWFudCwgYWRkIGluIHRoZSByZWZlcmVuY2UuXG4gICAgdmFyIG1pc21hdGNoQ291bnQgPSBfLnJlZHVjZShtaXNtYXRjaGVzLCAoeCwgeSkgPT4geCArIHkpO1xuICAgIHZhciBtb3N0RnJlcXVlbnRNaXNtYXRjaCA9IF8ubWF4KG1pc21hdGNoZXMpO1xuICAgIGlmIChtb3N0RnJlcXVlbnRNaXNtYXRjaCA+IE1JU01BVENIX1RIUkVTSE9MRCAmJlxuICAgICAgICBtaXNtYXRjaENvdW50ID4gb3B0aW9ucy52YWZDb2xvclRocmVzaG9sZCAqIGJpbi5jb3VudCAmJlxuICAgICAgICBtaXNtYXRjaENvdW50IDwgYmluLmNvdW50KSB7XG4gICAgICBpZiAoYmluLnJlZikgeyAgLy8gaGVyZSBmb3IgZmxvdzsgY2FuJ3QgcmVhbHkgaGFwcGVuXG4gICAgICAgIG1pc21hdGNoZXNbYmluLnJlZl0gPSBiaW4uY291bnQgLSBtaXNtYXRjaENvdW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCB7YmFyWDEsIGJhclgyfSA9IGJpblBvcyhwb3MsIGJpbi5jb3VudCk7XG4gICAgY3R4LnB1c2hPYmplY3QoYmluKTtcbiAgICB2YXIgY291bnRTb0ZhciA9IDA7XG4gICAgXy5jaGFpbihtaXNtYXRjaGVzKVxuICAgICAgLm1hcCgoY291bnQsIGJhc2UpID0+ICh7Y291bnQsIGJhc2V9KSkgIC8vIHB1bGwgYmFzZSBpbnRvIHRoZSBvYmplY3RcbiAgICAgIC5maWx0ZXIoKHtjb3VudH0pID0+IGNvdW50ID4gTUlTTUFUQ0hfVEhSRVNIT0xEKVxuICAgICAgLnNvcnRCeSgoe2NvdW50fSkgPT4gLWNvdW50KSAgLy8gdGhlIG1vc3QgY29tbW9uIG1pc21hdGNoIGF0IHRoZSBib3R0b21cbiAgICAgIC5lYWNoKCh7Y291bnQsIGJhc2V9KSA9PiB7XG4gICAgICAgIHZhciBtaXNNYXRjaE9iaiA9IHtwb3NpdGlvbjogMSArIHBvcywgY291bnQsIGJhc2V9O1xuICAgICAgICBjdHgucHVzaE9iamVjdChtaXNNYXRjaE9iaik7ICAvLyBmb3IgZGVidWdnaW5nIGFuZCBjbGljay10cmFja2luZ1xuXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5CQVNFX0NPTE9SU1tiYXNlXTtcbiAgICAgICAgdmFyIHkgPSB5U2NhbGUoY291bnRTb0Zhcik7XG4gICAgICAgIGN0eC5maWxsUmVjdChiYXJYMSxcbiAgICAgICAgICAgICAgICAgICAgIHksXG4gICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgxLCBiYXJYMiAtIGJhclgxKSwgIC8vIG1pbiB3aWR0aCBvZiAxcHhcbiAgICAgICAgICAgICAgICAgICAgIHlTY2FsZShjb3VudFNvRmFyICsgY291bnQpIC0geSk7XG4gICAgICAgIGNvdW50U29GYXIgKz0gY291bnQ7XG5cbiAgICAgICAgY3R4LnBvcE9iamVjdCgpO1xuICAgICAgfSk7XG4gICAgY3R4LnBvcE9iamVjdCgpO1xuICB9KTtcbn1cblxuY2xhc3MgQ292ZXJhZ2VUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxWaXpQcm9wczxEYXRhU291cmNlPEFsaWdubWVudCB8IEZlYXR1cmU+PiwgU3RhdGU+IHtcbiAgcHJvcHM6IFZpelByb3BzPERhdGFTb3VyY2U8QWxpZ25tZW50IHwgRmVhdHVyZSA+PjtcbiAgc3RhdGU6IFN0YXRlOyAvLyBubyBzdGF0ZSwgdXNlZCB0byBtYWtlIGZsb3cgaGFwcHlcbiAgY2FjaGU6IENvdmVyYWdlQ2FjaGU8IEFsaWdubWVudCB8IEZlYXR1cmUgPjtcbiAgdGlsZXM6IENvdmVyYWdlVGlsZWRDYW52YXM7XG4gIHN0YXRpYyBkZWZhdWx0T3B0aW9uczogT2JqZWN0O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBWaXpQcm9wczxEYXRhU291cmNlPEFsaWdubWVudCB8IEZlYXR1cmU+Pikge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIHJldHVybiA8Y2FudmFzIHJlZj0nY2FudmFzJyBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyl9IC8+O1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmNhY2hlID0gbmV3IENvdmVyYWdlQ2FjaGUodGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2UpO1xuICAgIHRoaXMudGlsZXMgPSBuZXcgQ292ZXJhZ2VUaWxlZENhbnZhcyh0aGlzLmNhY2hlLCB0aGlzLnByb3BzLmhlaWdodCwgdGhpcy5wcm9wcy5vcHRpb25zKTtcblxuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXdkYXRhJywgcmFuZ2UgPT4ge1xuICAgICAgdmFyIG9sZE1heCA9IHRoaXMuY2FjaGUubWF4Q292ZXJhZ2VGb3JSZWYocmFuZ2UuY29udGlnKTtcbiAgICAgIHRoaXMucHJvcHMuc291cmNlLmdldEZlYXR1cmVzSW5SYW5nZShyYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2gocmVhZCA9PiB0aGlzLmNhY2hlLmFkZEl0ZW0ocmVhZCkpO1xuICAgICAgdmFyIG5ld01heCA9IHRoaXMuY2FjaGUubWF4Q292ZXJhZ2VGb3JSZWYocmFuZ2UuY29udGlnKTtcblxuICAgICAgaWYgKG9sZE1heCAhPSBuZXdNYXgpIHtcbiAgICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlQWxsKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVSYW5nZShyYW5nZSk7XG4gICAgICB9XG4gICAgICB0aGlzLnZpc3VhbGl6ZUNvdmVyYWdlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5vbignbmV3ZGF0YScsIHJhbmdlID0+IHtcbiAgICAgIHRoaXMuY2FjaGUudXBkYXRlTWlzbWF0Y2hlcyhyYW5nZSk7XG4gICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVSYW5nZShyYW5nZSk7XG4gICAgICB0aGlzLnZpc3VhbGl6ZUNvdmVyYWdlKCk7XG4gICAgfSk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHRoaXMucHJvcHMsIHByZXZQcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHModGhpcy5zdGF0ZSwgcHJldlN0YXRlKSkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaGVpZ2h0ICE9IHByZXZQcm9wcy5oZWlnaHQgfHxcbiAgICAgICAgICB0aGlzLnByb3BzLm9wdGlvbnMgIT0gcHJldlByb3BzLm9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy50aWxlcy51cGRhdGUodGhpcy5wcm9wcy5oZWlnaHQsIHRoaXMucHJvcHMub3B0aW9ucyk7XG4gICAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgICAgfVxuICAgICAgdGhpcy52aXN1YWxpemVDb3ZlcmFnZSgpO1xuICAgIH1cbiAgfVxuXG4gIGdldENvbnRleHQoKTogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHtcbiAgICB2YXIgY2FudmFzID0gKHRoaXMucmVmcy5jYW52YXMgOiBIVE1MQ2FudmFzRWxlbWVudCk7XG4gICAgLy8gVGhlIHR5cGVjYXN0IHRocm91Z2ggYGFueWAgaXMgYmVjYXVzZSBnZXRDb250ZXh0IGNvdWxkIHJldHVybiBhIFdlYkdMIGNvbnRleHQuXG4gICAgdmFyIGN0eCA9ICgoY2FudmFzLmdldENvbnRleHQoJzJkJykgOiBhbnkpIDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTtcbiAgICByZXR1cm4gY3R4O1xuICB9XG5cbiAgLy8gRHJhdyB0aHJlZSB0aWNrcyBvbiB0aGUgbGVmdCB0byBzZXQgdGhlIHNjYWxlIGZvciB0aGUgdXNlclxuICByZW5kZXJUaWNrcyhjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHlTY2FsZTogKG51bTogbnVtYmVyKT0+bnVtYmVyKSB7XG4gICAgdmFyIGF4aXNNYXggPSB5U2NhbGUuZG9tYWluKClbMF07XG4gICAgWzAsIE1hdGgucm91bmQoYXhpc01heCAvIDIpLCBheGlzTWF4XS5mb3JFYWNoKHRpY2sgPT4ge1xuICAgICAgLy8gRHJhdyBhIGxpbmUgaW5kaWNhdGluZyB0aGUgdGlja1xuICAgICAgY3R4LnB1c2hPYmplY3Qoe3ZhbHVlOiB0aWNrLCB0eXBlOiAndGljayd9KTtcbiAgICAgIHZhciB0aWNrUG9zWSA9IE1hdGgucm91bmQoeVNjYWxlKHRpY2spKTtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHN0eWxlLkNPVkVSQUdFX0ZPTlRfQ09MT1I7XG4gICAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIDAsIHRpY2tQb3NZLCBzdHlsZS5DT1ZFUkFHRV9USUNLX0xFTkdUSCwgdGlja1Bvc1kpO1xuICAgICAgY3R4LnBvcE9iamVjdCgpO1xuXG4gICAgICB2YXIgdGlja0xhYmVsID0gdGljayArICdYJztcbiAgICAgIGN0eC5wdXNoT2JqZWN0KHt2YWx1ZTogdGljaywgbGFiZWw6IHRpY2tMYWJlbCwgdHlwZTogJ2xhYmVsJ30pO1xuICAgICAgLy8gTm93IHByaW50IHRoZSBjb3ZlcmFnZSBpbmZvcm1hdGlvblxuICAgICAgY3R4LmZvbnQgPSBzdHlsZS5DT1ZFUkFHRV9GT05UX1NUWUxFO1xuICAgICAgdmFyIHRleHRQb3NYID0gc3R5bGUuQ09WRVJBR0VfVElDS19MRU5HVEggKyBzdHlsZS5DT1ZFUkFHRV9URVhUX1BBRERJTkcsXG4gICAgICAgICAgdGV4dFBvc1kgPSB0aWNrUG9zWSArIHN0eWxlLkNPVkVSQUdFX1RFWFRfWV9PRkZTRVQ7XG4gICAgICAvLyBUaGUgc3Ryb2tlIGNyZWF0ZXMgYSBib3JkZXIgYXJvdW5kIHRoZSB0ZXh0IHRvIG1ha2UgaXQgbGVnaWJsZSBvdmVyIHRoZSBiYXJzLlxuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcbiAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgY3R4LnN0cm9rZVRleHQodGlja0xhYmVsLCB0ZXh0UG9zWCwgdGV4dFBvc1kpO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQ09WRVJBR0VfRk9OVF9DT0xPUjtcbiAgICAgIGN0eC5maWxsVGV4dCh0aWNrTGFiZWwsIHRleHRQb3NYLCB0ZXh0UG9zWSk7XG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgfSk7XG4gIH1cblxuICB2aXN1YWxpemVDb3ZlcmFnZSgpIHtcbiAgICB2YXIgY2FudmFzID0gKHRoaXMucmVmcy5jYW52YXMgOiBIVE1MQ2FudmFzRWxlbWVudCksXG4gICAgICAgIHdpZHRoID0gdGhpcy5wcm9wcy53aWR0aCxcbiAgICAgICAgaGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQsXG4gICAgICAgIHJhbmdlID0gQ29udGlnSW50ZXJ2YWwuZnJvbUdlbm9tZVJhbmdlKHRoaXMucHJvcHMucmFuZ2UpO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgaGVpZ2h0ICYgd2lkdGggYXJlIGtub3duLlxuICAgIGlmICh3aWR0aCA9PT0gMCkgcmV0dXJuO1xuICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQodGhpcy5nZXRDb250ZXh0KCkpO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnJlc2V0KCk7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG5cbiAgICB2YXIgeVNjYWxlID0gdGhpcy50aWxlcy55U2NhbGVGb3JSZWYocmFuZ2UuY29udGlnLCAxMCwgMTApO1xuXG4gICAgdGhpcy50aWxlcy5yZW5kZXJUb1NjcmVlbihjdHgsIHJhbmdlLCB0aGlzLmdldFNjYWxlKCkpO1xuICAgIHRoaXMucmVuZGVyVGlja3MoY3R4LCB5U2NhbGUpO1xuXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKHJlYWN0RXZlbnQ6IGFueSkge1xuICAgIHZhciBldiA9IHJlYWN0RXZlbnQubmF0aXZlRXZlbnQsXG4gICAgICAgIHggPSBldi5vZmZzZXRYO1xuXG4gICAgLy8gSXQncyBzaW1wbGUgdG8gZmlndXJlIG91dCB3aGljaCBwb3NpdGlvbiB3YXMgY2xpY2tlZCB1c2luZyB0aGUgeC1zY2FsZS5cbiAgICAvLyBObyBuZWVkIHRvIHJlbmRlciB0aGUgc2NlbmUgdG8gZGV0ZXJtaW5lIHdoYXQgd2FzIGNsaWNrZWQuXG4gICAgdmFyIHJhbmdlID0gQ29udGlnSW50ZXJ2YWwuZnJvbUdlbm9tZVJhbmdlKHRoaXMucHJvcHMucmFuZ2UpLFxuICAgICAgICB4U2NhbGUgPSB0aGlzLmdldFNjYWxlKCksXG4gICAgICAgIGJpbnMgPSB0aGlzLmNhY2hlLmJpbnNGb3JSZWYocmFuZ2UuY29udGlnKSxcbiAgICAgICAgcG9zID0gTWF0aC5mbG9vcih4U2NhbGUuaW52ZXJ0KHgpKSAtIDEsXG4gICAgICAgIGJpbiA9IGJpbnNbcG9zXTtcblxuICAgIHZhciBhbGVydCA9IHdpbmRvdy5hbGVydCB8fCBjb25zb2xlLmxvZztcbiAgICBpZiAoYmluKSB7XG4gICAgICB2YXIgbW1Db3VudCA9IGJpbi5taXNtYXRjaGVzID8gXy5yZWR1Y2UoYmluLm1pc21hdGNoZXMsIChhLCBiKSA9PiBhICsgYikgOiAwO1xuICAgICAgdmFyIHJlZiA9IGJpbi5yZWYgfHwgdGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2UuZ2V0UmFuZ2VBc1N0cmluZyhcbiAgICAgICAgICB7Y29udGlnOiByYW5nZS5jb250aWcsIHN0YXJ0OiBwb3MsIHN0b3A6IHBvc30pO1xuXG4gICAgICAvLyBDb25zdHJ1Y3QgYSBKU09OIG9iamVjdCB0byBzaG93IHRoZSB1c2VyLlxuICAgICAgdmFyIG1lc3NhZ2VPYmplY3QgPSBfLmV4dGVuZChcbiAgICAgICAge1xuICAgICAgICAgICdwb3NpdGlvbic6IHJhbmdlLmNvbnRpZyArICc6JyArICgxICsgcG9zKSxcbiAgICAgICAgICAncmVhZCBkZXB0aCc6IGJpbi5jb3VudFxuICAgICAgICB9LFxuICAgICAgICBiaW4ubWlzbWF0Y2hlcyk7XG4gICAgICBtZXNzYWdlT2JqZWN0W3JlZl0gPSBiaW4uY291bnQgLSBtbUNvdW50O1xuICAgICAgYWxlcnQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZU9iamVjdCwgbnVsbCwgJyAgJykpO1xuICAgIH1cbiAgfVxufVxuXG5Db3ZlcmFnZVRyYWNrLmRpc3BsYXlOYW1lID0gJ2NvdmVyYWdlJztcbkNvdmVyYWdlVHJhY2suZGVmYXVsdE9wdGlvbnMgPSB7XG4gIC8vIENvbG9yIHRoZSByZWZlcmVuY2UgYmFzZSBpbiB0aGUgYmFyIGNoYXJ0IHdoZW4gdGhlIFZhcmlhbnQgQWxsZWxlIEZyYWN0aW9uXG4gIC8vIGV4Y2VlZHMgdGhpcyBhbW91bnQuIFdoZW4gdGhlcmUgYXJlID49MiBhZ3JlZWluZyBtaXNtYXRjaGVzLCB0aGV5IGFyZVxuICAvLyBhbHdheXMgcmVuZGVyZWQuIEJ1dCBmb3IgbWlzbWF0Y2hlcyBiZWxvdyB0aGlzIHRocmVzaG9sZCwgdGhlIHJlZmVyZW5jZSBpc1xuICAvLyBub3QgY29sb3JlZCBpbiB0aGUgYmFyIGNoYXJ0LiBUaGlzIGRyYXdzIGF0dGVudGlvbiB0byBoaWdoLVZBRiBtaXNtYXRjaGVzLlxuICB2YWZDb2xvclRocmVzaG9sZDogMC4yXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvdmVyYWdlVHJhY2s7XG4iLCIvKipcbiAqIEluZGl2aWR1YWwgYmFzZSBwYWlycyBhcmUgcmVuZGVyZWQgZGlmZmVyZW50bHkgZGVwZW5kaW5nIG9uIHRoZSBzY2FsZS5cbiAqIFRoaXMgZW51bSAmIGFzc29jaWF0ZWQgZnVuY3Rpb25zIGhlbHAgdHJhY2sgdGhlc2UgdHJhbnNpdGlvbnMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBEaXNwbGF5TW9kZSA9IHtcbiAgTE9PU0U6IDEsICAgLy8gTG90cyBvZiBzcGFjZSAtLSBhIGJpZyBmb250IGlzIE9LLlxuICBUSUdIVDogMiwgICAvLyBMZXR0ZXJzIG5lZWQgdG8gYmUgc2hydW5rIHRvIGZpdC5cbiAgQkxPQ0tTOiAzLCAgLy8gQ2hhbmdlIGZyb20gbGV0dGVycyB0byBibG9ja3Mgb2YgY29sb3JcbiAgSElEREVOOiA0LFxuXG4gIGdldERpc3BsYXlNb2RlKHB4UGVyTGV0dGVyOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmIChweFBlckxldHRlciA+PSAyNSkge1xuICAgICAgcmV0dXJuIERpc3BsYXlNb2RlLkxPT1NFO1xuICAgIH0gZWxzZSBpZiAocHhQZXJMZXR0ZXIgPj0gMTApIHtcbiAgICAgIHJldHVybiBEaXNwbGF5TW9kZS5USUdIVDtcbiAgICB9IGVsc2UgaWYgKHB4UGVyTGV0dGVyID49IDEpIHtcbiAgICAgIHJldHVybiBEaXNwbGF5TW9kZS5CTE9DS1M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBEaXNwbGF5TW9kZS5ISURERU47XG4gICAgfVxuICB9LFxuXG4gIGlzVGV4dChtb2RlOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKG1vZGUgPT0gRGlzcGxheU1vZGUuTE9PU0UgfHwgbW9kZSA9PSBEaXNwbGF5TW9kZS5USUdIVCk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRGlzcGxheU1vZGU7XG4iLCIvKipcbiAqIFZpc3VhbGl6YXRpb24gb2YgZmVhdHVyZXMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtEYXRhU291cmNlfSBmcm9tICcuLi9zb3VyY2VzL0RhdGFTb3VyY2UnO1xuaW1wb3J0IEZlYXR1cmUgZnJvbSAnLi4vZGF0YS9mZWF0dXJlJztcbmltcG9ydCBHZW5lcmljRmVhdHVyZSBmcm9tICcuLi9kYXRhL2dlbmVyaWNGZWF0dXJlJztcbmltcG9ydCB7R2VuZXJpY0ZlYXR1cmVDYWNoZX0gZnJvbSAnLi9HZW5lcmljRmVhdHVyZUNhY2hlJztcbmltcG9ydCB0eXBlIHtWaXN1YWxHcm91cH0gZnJvbSAnLi9BYnN0cmFjdENhY2hlJztcbmltcG9ydCB0eXBlIHtEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBmcm9tICdkYXRhLWNhbnZhcyc7XG5cbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuaW1wb3J0IHR5cGUge1NjYWxlfSBmcm9tICcuL2QzdXRpbHMnO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQgUmVtb3RlUmVxdWVzdCBmcm9tICcuLi9SZW1vdGVSZXF1ZXN0JztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IFRpbGVkQ2FudmFzIGZyb20gJy4vVGlsZWRDYW52YXMnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHN0eWxlIGZyb20gJy4uL3N0eWxlJztcbmltcG9ydCB0eXBlIHtTdGF0ZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHt5Rm9yUm93fSBmcm9tICcuL3BpbGV1cHV0aWxzJztcblxuXG5jbGFzcyBGZWF0dXJlVGlsZWRDYW52YXMgZXh0ZW5kcyBUaWxlZENhbnZhcyB7XG4gIG9wdGlvbnM6IE9iamVjdDtcbiAgc291cmNlOiBEYXRhU291cmNlPEZlYXR1cmU+O1xuICBjYWNoZTogR2VuZXJpY0ZlYXR1cmVDYWNoZTtcblxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6IERhdGFTb3VyY2U8RmVhdHVyZT4sIGNhY2hlOiBHZW5lcmljRmVhdHVyZUNhY2hlLCBvcHRpb25zOiBPYmplY3QpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMuY2FjaGUgPSBjYWNoZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgdXBkYXRlKG5ld09wdGlvbnM6IE9iamVjdCkge1xuICAgIHRoaXMub3B0aW9ucyA9IG5ld09wdGlvbnM7XG4gIH1cblxuICBoZWlnaHRGb3JSZWYocmVmOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLnBpbGV1cEhlaWdodEZvclJlZihyZWYpICpcbiAgICAgICAgICAgICAgICAgICAgKHN0eWxlLlJFQURfSEVJR0hUICsgc3R5bGUuUkVBRF9TUEFDSU5HKTtcbiAgfVxuXG4gIHJlbmRlcihjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICBzY2FsZTogKHg6IG51bWJlcik9Pm51bWJlcixcbiAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgb3JpZ2luYWxSYW5nZTogP0NvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICByZXNvbHV0aW9uOiA/bnVtYmVyKSB7XG4gICAgdmFyIHJlbGF4ZWRSYW5nZSA9XG4gICAgICAgIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0KCkgLSAxLCByYW5nZS5zdG9wKCkgKyAxKTtcbiAgICAvLyBnZXQgZmVhdHVyZXMgYW5kIHB1dCBpbiBjYWNoZVxuICAgIHZhciBmZWF0dXJlcyA9IHRoaXMuc291cmNlLmdldEZlYXR1cmVzSW5SYW5nZShyZWxheGVkUmFuZ2UsIHJlc29sdXRpb24pO1xuICAgIGZlYXR1cmVzLmZvckVhY2goZiA9PiB0aGlzLmNhY2hlLmFkZEZlYXR1cmUobmV3IEdlbmVyaWNGZWF0dXJlKGYuaWQsIGYucG9zaXRpb24sIGYpKSk7XG5cbiAgICAvLyBnZXQgdmlzdWFsIGZlYXR1cmVzIHdpdGggYXNzaWduZWQgcm93c1xuICAgIHZhciB2RmVhdHVyZXMgPSB0aGlzLmNhY2hlLmdldEdyb3Vwc092ZXJsYXBwaW5nKHJlbGF4ZWRSYW5nZSk7XG4gICAgcmVuZGVyRmVhdHVyZXMoY3R4LCBzY2FsZSwgcmVsYXhlZFJhbmdlLCB2RmVhdHVyZXMpO1xuICB9XG59XG5cbi8vIERyYXcgZmVhdHVyZXNcbmZ1bmN0aW9uIHJlbmRlckZlYXR1cmVzKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IChudW06IG51bWJlcikgPT4gbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgICAgICAgICAgICAgdkZlYXR1cmVzOiBWaXN1YWxHcm91cDxHZW5lcmljRmVhdHVyZT5bXSkge1xuXG4gICAgY3R4LmZvbnQgPSBgJHtzdHlsZS5HRU5FX0ZPTlRfU0laRX1weCAke3N0eWxlLkdFTkVfRk9OVH1gO1xuICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcblxuICAgIHZGZWF0dXJlcy5mb3JFYWNoKHZGZWF0dXJlID0+IHtcbiAgICAgIHZhciBmZWF0dXJlID0gdkZlYXR1cmUuaXRlbXNbMF0uZ0ZlYXR1cmU7XG4gICAgICBpZiAoIXZGZWF0dXJlLnNwYW4uaW50ZXJzZWN0cyhyYW5nZSkpIHJldHVybjtcbiAgICAgIGN0eC5wdXNoT2JqZWN0KGZlYXR1cmUpO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XG5cbiAgICAgIC8vIENyZWF0ZSB0cmFuc3BhcmVuY3kgdmFsdWUgYmFzZWQgb24gc2NvcmUuIFNjb3JlIG9mIDw9IDIwMCBpcyB0aGUgc2FtZSB0cmFuc3BhcmVuY3kuXG4gICAgICB2YXIgYWxwaGFTY29yZSA9IE1hdGgubWF4KGZlYXR1cmUuc2NvcmUgLyAxMDAwLjAsIDAuMik7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMCwgMCwgJyArIGFscGhhU2NvcmUgKyAnKSc7XG5cbiAgICAgIHZhciB4ID0gTWF0aC5yb3VuZChzY2FsZSh2RmVhdHVyZS5zcGFuLnN0YXJ0KCkpKTtcbiAgICAgIHZhciB3aWR0aCA9IE1hdGguY2VpbChzY2FsZSh2RmVhdHVyZS5zcGFuLnN0b3AoKSkgLSBzY2FsZSh2RmVhdHVyZS5zcGFuLnN0YXJ0KCkpKTtcbiAgICAgIHZhciB5ID0geUZvclJvdyh2RmVhdHVyZS5yb3cpO1xuICAgICAgY3R4LmZpbGxSZWN0KHggLSAwLjUsIHksIHdpZHRoLCBzdHlsZS5SRUFEX0hFSUdIVCk7XG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgfSk7XG59XG5cbmNsYXNzIEZlYXR1cmVUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxWaXpQcm9wczxEYXRhU291cmNlPEZlYXR1cmU+PiwgU3RhdGU+IHtcbiAgcHJvcHM6IFZpelByb3BzPERhdGFTb3VyY2U8RmVhdHVyZT4+O1xuICBzdGF0ZTogU3RhdGU7XG4gIHRpbGVzOiBGZWF0dXJlVGlsZWRDYW52YXM7XG4gIGNhY2hlOiBHZW5lcmljRmVhdHVyZUNhY2hlO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBWaXpQcm9wczxEYXRhU291cmNlPEZlYXR1cmU+Pikge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgbmV0d29ya1N0YXR1czogbnVsbFxuICAgIH07XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICAvLyBUaGVzZSBzdHlsZXMgYWxsb3cgdmVydGljYWwgc2Nyb2xsaW5nIHRvIHNlZSB0aGUgZnVsbCBwaWxldXAuXG4gICAgLy8gQWRkaW5nIGEgdmVydGljYWwgc2Nyb2xsYmFyIHNocmlua3MgdGhlIHZpc2libGUgYXJlYSwgYnV0IHdlIGhhdmUgdG8gYWN0XG4gICAgLy8gYXMgdGhvdWdoIGl0IGRvZXNuJ3QsIHNpbmNlIGFkanVzdGluZyB0aGUgc2NhbGUgd291bGQgcHV0IGl0IG91dCBvZiBzeW5jXG4gICAgLy8gd2l0aCBvdGhlciB0cmFja3MuXG4gICAgdmFyIGNvbnRhaW5lclN0eWxlcyA9IHtcbiAgICAgICdoZWlnaHQnOiAnMTAwJSdcbiAgICB9O1xuXG4gICAgdmFyIHN0YXR1c0VsID0gbnVsbCxcbiAgICAgICAgbmV0d29ya1N0YXR1cyA9IHRoaXMuc3RhdGUubmV0d29ya1N0YXR1cztcbiAgICBpZiAobmV0d29ya1N0YXR1cykge1xuICAgICAgc3RhdHVzRWwgPSAoXG4gICAgICAgIDxkaXYgcmVmPSdzdGF0dXMnIGNsYXNzTmFtZT0nbmV0d29yay1zdGF0dXMtc21hbGwnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSduZXR3b3JrLXN0YXR1cy1tZXNzYWdlLXNtYWxsJz5cbiAgICAgICAgICAgIExvYWRpbmcgZmVhdHVyZXPigKZcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgICB2YXIgcmFuZ2VMZW5ndGggPSB0aGlzLnByb3BzLnJhbmdlLnN0b3AgLSB0aGlzLnByb3BzLnJhbmdlLnN0YXJ0O1xuICAgIC8vIElmIHJhbmdlIGlzIHRvbyBsYXJnZSwgZG8gbm90IHJlbmRlciAnY2FudmFzJ1xuICAgIGlmIChyYW5nZUxlbmd0aCA+IFJlbW90ZVJlcXVlc3QuTU9OU1RFUl9SRVFVRVNUKSB7XG4gICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjZW50ZXInPlxuICAgICAgICAgICAgICBab29tIGluIHRvIHNlZSBmZWF0dXJlc1xuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8Y2FudmFzIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKX0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIHtzdGF0dXNFbH1cbiAgICAgICAgICA8ZGl2IHJlZj0nY29udGFpbmVyJyBzdHlsZT17Y29udGFpbmVyU3R5bGVzfT5cbiAgICAgICAgICAgIDxjYW52YXMgcmVmPSdjYW52YXMnIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKX0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuY2FjaGUgPSBuZXcgR2VuZXJpY0ZlYXR1cmVDYWNoZSh0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZSk7XG4gICAgdGhpcy50aWxlcyA9IG5ldyBGZWF0dXJlVGlsZWRDYW52YXModGhpcy5wcm9wcy5zb3VyY2UsIHRoaXMuY2FjaGUsIHRoaXMucHJvcHMub3B0aW9ucyk7XG5cbiAgICAvLyBWaXN1YWxpemUgbmV3IHJlZmVyZW5jZSBkYXRhIGFzIGl0IGNvbWVzIGluIGZyb20gdGhlIG5ldHdvcmsuXG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ld2RhdGEnLCAocmFuZ2UpID0+IHtcbiAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZVJhbmdlKHJhbmdlKTtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLm9uKCduZXdkYXRhJywgcmFuZ2UgPT4ge1xuICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlUmFuZ2UocmFuZ2UpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ldHdvcmtwcm9ncmVzcycsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogZX0pO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrZG9uZScsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogbnVsbH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICBpZiAoIXNoYWxsb3dFcXVhbHModGhpcy5wcm9wcywgcHJldlByb3BzKSB8fFxuICAgICAgICAhc2hhbGxvd0VxdWFscyh0aGlzLnN0YXRlLCBwcmV2U3RhdGUpKSB7XG4gICAgICAgIHRoaXMudGlsZXMudXBkYXRlKHRoaXMucHJvcHMub3B0aW9ucyk7XG4gICAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KSxcbiAgICAgICAgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgICBnZW5vbWVSYW5nZSA9IHRoaXMucHJvcHMucmFuZ2U7XG5cbiAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoZ2Vub21lUmFuZ2UuY29udGlnLCBnZW5vbWVSYW5nZS5zdGFydCwgZ2Vub21lUmFuZ2Uuc3RvcCk7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwIHx8IHR5cGVvZiBjYW52YXMgPT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcblxuICAgIHZhciBjdHggPSBkYXRhQ2FudmFzLmdldERhdGFDb250ZXh0KGNhbnZhc1V0aWxzLmdldENvbnRleHQoY2FudmFzKSk7XG5cblxuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgLy8gZ2V0IHBhcmVudCBvZiBjYW52YXNcbiAgICAvLyBUaGUgdHlwZWNhc3RzIHRocm91Z2ggYGFueWAgYXJlIHRvIGZvb2wgZmxvdy5cbiAgICB2YXIgcGFyZW50ID0gKChkM3V0aWxzLmZpbmRQYXJlbnQoY2FudmFzLCBcImZlYXR1cmVzXCIpIDogYW55KSA6IEhUTUxDYW52YXNFbGVtZW50KTtcbiAgICBcbiAgICAvLyBIZWlnaHQgY2FuIG9ubHkgYmUgY29tcHV0ZWQgYWZ0ZXIgdGhlIHBpbGV1cCBoYXMgYmVlbiB1cGRhdGVkLlxuICAgIHZhciBoZWlnaHQgPSB5Rm9yUm93KHRoaXMuY2FjaGUucGlsZXVwSGVpZ2h0Rm9yUmVmKHRoaXMucHJvcHMucmFuZ2UuY29udGlnKSk7XG5cbiAgICAvLyByZXNpemUgaGVpZ2h0IGZvciBkZXZpY2VcbiAgICBoZWlnaHQgPSBkM3V0aWxzLmhlaWdodEZvckNhbnZhcyhjYW52YXMsIGhlaWdodCk7XG5cbiAgICAvLyBzZXQgaGVpZ2h0IGZvciBwYXJlbnQgZGl2IHRvIGluY2x1ZGUgYWxsIGZlYXR1cmVzXG4gICAgaWYgKHBhcmVudCkgcGFyZW50LnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG5cbiAgICBkM3V0aWxzLnNpemVDYW52YXMoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIHRoaXMudGlsZXMucmVuZGVyVG9TY3JlZW4oY3R4LCByYW5nZSwgdGhpcy5nZXRTY2FsZSgpKTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKHJlYWN0RXZlbnQ6IGFueSkge1xuICAgIHZhciByYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIHZhciBldiA9IHJlYWN0RXZlbnQubmF0aXZlRXZlbnQsXG4gICAgICAgIHggPSBldi5vZmZzZXRYLCAvLyByZXNpemUgb2Zmc2V0IHRvIGNhbnZhcyBzaXplXG4gICAgICAgIHkgPSBldi5vZmZzZXRZL3JhdGlvO1xuXG4gICAgdmFyIGN0eCA9IGNhbnZhc1V0aWxzLmdldENvbnRleHQodGhpcy5yZWZzLmNhbnZhcyk7XG4gICAgdmFyIHRyYWNraW5nQ3R4ID0gbmV3IGRhdGFDYW52YXMuQ2xpY2tUcmFja2luZ0NvbnRleHQoY3R4LCB4LCB5KTtcblxuICAgIHZhciBnZW5vbWVSYW5nZSA9IHRoaXMucHJvcHMucmFuZ2UsXG4gICAgICAgIC8vIGFsbG93IHNvbWUgYnVmZmVyaW5nIHNvIGNsaWNrIGlzbid0IHNvIHNlbnNpdGl2ZVxuICAgICAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChnZW5vbWVSYW5nZS5jb250aWcsIGdlbm9tZVJhbmdlLnN0YXJ0LTEsIGdlbm9tZVJhbmdlLnN0b3ArMSksXG4gICAgICAgIHNjYWxlID0gdGhpcy5nZXRTY2FsZSgpLFxuICAgICAgICB2RmVhdHVyZXMgPSB0aGlzLmNhY2hlLmdldEdyb3Vwc092ZXJsYXBwaW5nKHJhbmdlKTtcblxuICAgIHJlbmRlckZlYXR1cmVzKHRyYWNraW5nQ3R4LCBzY2FsZSwgcmFuZ2UsIHZGZWF0dXJlcyk7XG4gICAgdmFyIGZlYXR1cmUgPSBfLmZpbmQodHJhY2tpbmdDdHguaGl0c1swXSwgaGl0ID0+IGhpdCk7XG5cbiAgICBpZiAoZmVhdHVyZSkge1xuICAgICAgLy91c2VyIHByb3ZpZGVkIGZ1bmN0aW9uIGZvciBkaXNwbGF5aW5nIHBvcHVwXG4gICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMub3B0aW9ucy5vbkZlYXR1cmVDbGlja2VkICA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRoaXMucHJvcHMub3B0aW9ucy5vbkZlYXR1cmVDbGlja2VkKGZlYXR1cmUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGFsZXJ0ID0gd2luZG93LmFsZXJ0IHx8IGNvbnNvbGUubG9nO1xuICAgICAgICAvLyBDb25zdHJ1Y3QgYSBKU09OIG9iamVjdCB0byBzaG93IHRoZSB1c2VyLlxuICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IF8uZXh0ZW5kKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgICdpZCc6ICAgICBmZWF0dXJlLmlkLFxuICAgICAgICAgICAgJ3JhbmdlJzogIGAke2ZlYXR1cmUucG9zaXRpb24uY29udGlnfToke2ZlYXR1cmUucG9zaXRpb24uc3RhcnQoKX0tJHtmZWF0dXJlLnBvc2l0aW9uLnN0b3AoKX1gLFxuICAgICAgICAgICAgJ3Njb3JlJzogIGZlYXR1cmUuc2NvcmVcbiAgICAgICAgICB9KTtcbiAgICAgICAgYWxlcnQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZU9iamVjdCwgbnVsbCwgJyAgJykpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5GZWF0dXJlVHJhY2suZGlzcGxheU5hbWUgPSAnZmVhdHVyZXMnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZlYXR1cmVUcmFjaztcbiIsIi8qKlxuICogVmlzdWFsaXphdGlvbiBvZiBnZW5lcywgaW5jbHVkaW5nIGV4b25zIGFuZCBjb2RpbmcgcmVnaW9ucy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1N0cmFuZH0gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCBHZW5lIGZyb20gJy4uL2RhdGEvZ2VuZSc7XG5pbXBvcnQgdHlwZSB7RGF0YVNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9EYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuaW1wb3J0IHR5cGUge1NjYWxlfSBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHR5cGUge1N0YXRlfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCBHZW5lcmljRmVhdHVyZSBmcm9tICcuLi9kYXRhL2dlbmVyaWNGZWF0dXJlJztcbmltcG9ydCB7R2VuZXJpY0ZlYXR1cmVDYWNoZX0gZnJvbSAnLi9HZW5lcmljRmVhdHVyZUNhY2hlJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgc2hhbGxvd0VxdWFscyBmcm9tICdzaGFsbG93LWVxdWFscyc7XG5cbmltcG9ydCBiZWR0b29scyBmcm9tICcuLi9kYXRhL2JlZHRvb2xzJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHNjYWxlIGZyb20gJy4uL3NjYWxlJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5cblxuLy8gRHJhdyBhbiBhcnJvdyBpbiB0aGUgbWlkZGxlIG9mIHRoZSB2aXNpYmxlIHBvcnRpb24gb2YgcmFuZ2UuXG5mdW5jdGlvbiBkcmF3QXJyb3coY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgY2xhbXBlZFNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgICAgICAgICAgIHJhbmdlOiBJbnRlcnZhbCxcbiAgICAgICAgICAgICAgICAgICB0aXBZOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgc3RyYW5kOiBTdHJhbmQpIHtcbiAgdmFyIHgxID0gY2xhbXBlZFNjYWxlKDEgKyByYW5nZS5zdGFydCksXG4gICAgICB4MiA9IGNsYW1wZWRTY2FsZSgxICsgcmFuZ2Uuc3RvcCk7XG5cbiAgLy8gaXQncyBvZmYtc2NyZWVuIG9yIHRoZXJlJ3Mgbm90IGVub3VnaCByb29tIHRvIGRyYXcgaXQgbGVnaWJseS5cbiAgaWYgKHgyIC0geDEgPD0gMiAqIHN0eWxlLkdFTkVfQVJST1dfU0laRSkgcmV0dXJuO1xuXG4gIHZhciBjeCA9ICh4MSArIHgyKSAvIDI7XG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgaWYgKHN0cmFuZCA9PSAnLScpIHtcbiAgICBjdHgubW92ZVRvKGN4ICsgc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZIC0gc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgICBjdHgubGluZVRvKGN4LCB0aXBZKTtcbiAgICBjdHgubGluZVRvKGN4ICsgc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZICsgc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgfSBlbHNlIHtcbiAgICBjdHgubW92ZVRvKGN4IC0gc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZIC0gc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgICBjdHgubGluZVRvKGN4LCB0aXBZKTtcbiAgICBjdHgubGluZVRvKGN4IC0gc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZICsgc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgfVxuICBjdHguc3Ryb2tlKCk7XG59XG5cbmZ1bmN0aW9uIGRyYXdHZW5lTmFtZShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgICBjbGFtcGVkU2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgZ2VuZUxpbmVZOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgZ2VuZTogR2VuZSxcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0SW50ZXJ2YWxzOiBJbnRlcnZhbFtdKSB7XG4gIHZhciBwID0gZ2VuZS5wb3NpdGlvbixcbiAgICAgIGNlbnRlclggPSAwLjUgKiAoY2xhbXBlZFNjYWxlKDEgKyBwLnN0YXJ0KCkpICsgY2xhbXBlZFNjYWxlKDEgKyBwLnN0b3AoKSkpO1xuICAvLyBkbyBub3QgdXNlIGdlbmUgbmFtZSBpZiBpdCBpcyBudWxsIG9yIGVtcHR5XG4gIHZhciBuYW1lID0gICFfLmlzRW1wdHkodXRpbHMuc3RyaW5nVG9MaXRlcmFsKGdlbmUubmFtZSkpID8gZ2VuZS5uYW1lIDogZ2VuZS5pZDtcbiAgdmFyIHRleHRXaWR0aCA9IGN0eC5tZWFzdXJlVGV4dChuYW1lKS53aWR0aDtcbiAgdmFyIHRleHRJbnRlcnZhbCA9IG5ldyBJbnRlcnZhbChjZW50ZXJYIC0gMC41ICogdGV4dFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlclggKyAwLjUgKiB0ZXh0V2lkdGgpO1xuICBpZiAoIV8uYW55KHRleHRJbnRlcnZhbHMsIGl2ID0+IHRleHRJbnRlcnZhbC5pbnRlcnNlY3RzKGl2KSkpIHtcbiAgICB0ZXh0SW50ZXJ2YWxzLnB1c2godGV4dEludGVydmFsKTtcbiAgICB2YXIgYmFzZWxpbmVZID0gZ2VuZUxpbmVZICsgc3R5bGUuR0VORV9GT05UX1NJWkUgKyBzdHlsZS5HRU5FX1RFWFRfUEFERElORztcbiAgICBjdHguZmlsbFRleHQobmFtZSwgY2VudGVyWCwgYmFzZWxpbmVZKTtcbiAgfVxufVxuXG5jbGFzcyBHZW5lVHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Vml6UHJvcHM8RGF0YVNvdXJjZTxHZW5lPj4sIFN0YXRlPiB7XG4gIHByb3BzOiBWaXpQcm9wczxEYXRhU291cmNlPEdlbmU+PjtcbiAgc3RhdGU6IFN0YXRlO1xuICBjYWNoZTogR2VuZXJpY0ZlYXR1cmVDYWNoZTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVml6UHJvcHM8RGF0YVNvdXJjZTxHZW5lPj4pIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5ldHdvcmtTdGF0dXM6IG51bGxcbiAgICB9O1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgcmV0dXJuIDxjYW52YXMgLz47XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmNhY2hlID0gbmV3IEdlbmVyaWNGZWF0dXJlQ2FjaGUodGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2UpO1xuICAgICAgLy8gVmlzdWFsaXplIG5ldyByZWZlcmVuY2UgZGF0YSBhcyBpdCBjb21lcyBpbiBmcm9tIHRoZSBuZXR3b3JrLlxuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXdkYXRhJywgKHJhbmdlKSA9PiB7XG4gICAgICAvLyBhZGQgZ2VuZXMgdG8gZ2VuZXJpYyBjYWNoZVxuICAgICAgdmFyIGdlbmVzID0gdGhpcy5wcm9wcy5zb3VyY2UuZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlKTtcbiAgICAgIGdlbmVzLmZvckVhY2goZiA9PiB0aGlzLmNhY2hlLmFkZEZlYXR1cmUobmV3IEdlbmVyaWNGZWF0dXJlKGYuaWQsIGYucG9zaXRpb24sIGYpKSk7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5vbignbmV3ZGF0YScsIHJhbmdlID0+IHtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrcHJvZ3Jlc3MnLCBlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe25ldHdvcmtTdGF0dXM6IGV9KTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV0d29ya2RvbmUnLCBlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe25ldHdvcmtTdGF0dXM6IG51bGx9KTtcbiAgICB9KTtcblxuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHRoaXMucHJvcHMsIHByZXZQcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHModGhpcy5zdGF0ZSwgcHJldlN0YXRlKSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKSxcbiAgICAgICAge3dpZHRoLCBoZWlnaHR9ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgZ2Vub21lUmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlO1xuXG4gICAgdmFyIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKGdlbm9tZVJhbmdlLmNvbnRpZywgZ2Vub21lUmFuZ2Uuc3RhcnQsIGdlbm9tZVJhbmdlLnN0b3ApO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgaGVpZ2h0ICYgd2lkdGggYXJlIGtub3duLlxuICAgIGlmICh3aWR0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgdmFyIHNjID0gdGhpcy5nZXRTY2FsZSgpLFxuICAgICAgICAvLyBXZSBjYW4ndCBjbGFtcCBzY2FsZSBkaXJlY3RseSBiZWNhdXNlIG9mIG9mZnNldFB4LlxuICAgICAgICBjbGFtcGVkU2NhbGUgPSBzY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgLmRvbWFpbihbc2MuaW52ZXJ0KDApLCBzYy5pbnZlcnQod2lkdGgpXSlcbiAgICAgICAgICAgIC5yYW5nZShbMCwgd2lkdGhdKVxuICAgICAgICAgICAgLmNsYW1wKHRydWUpO1xuXG5cblxuICAgIGlmIChjYW52YXMgJiYgY2FudmFzIGluc3RhbmNlb2YgRWxlbWVudCkgeyAvLyBjaGVjayBmb3IgZ2V0Q29udGV4dFxuICAgICAgaWYgKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7IC8vIGNoZWNrIGZvciBzaXplQ2FudmFzXG4gICAgICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgfVxuICAgICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpKTtcblxuICAgICAgY3R4LnJlc2V0KCk7XG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcblxuICAgICAgdmFyIGdlbmVMaW5lWSA9IE1hdGgucm91bmQoaGVpZ2h0IC8gNCk7XG4gICAgICB2YXIgdGV4dEludGVydmFscyA9IFtdOyAgLy8geC1pbnRlcnZhbHMgd2l0aCByZW5kZXJlZCBnZW5lIG5hbWVzLCB0byBhdm9pZCBvdmVyLWRyYXdpbmcuXG4gICAgICBjdHguZm9udCA9IGAke3N0eWxlLkdFTkVfRk9OVF9TSVpFfXB4ICR7c3R5bGUuR0VORV9GT05UfWA7XG4gICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICB2YXIgdkZlYXR1cmVzID0gXy5mbGF0dGVuKF8ubWFwKHRoaXMuY2FjaGUuZ2V0R3JvdXBzT3ZlcmxhcHBpbmcocmFuZ2UpLFxuICAgICAgICAgICAgICAgICAgICBnID0+IGcuaXRlbXMpKTtcblxuICAgICAgdkZlYXR1cmVzLmZvckVhY2godkZlYXR1cmUgPT4ge1xuICAgICAgICB2YXIgZ2VuZSA9IHZGZWF0dXJlLmdGZWF0dXJlO1xuICAgICAgICBpZiAoIWdlbmUucG9zaXRpb24uaW50ZXJzZWN0cyhyYW5nZSkpIHJldHVybjtcbiAgICAgICAgY3R4LnB1c2hPYmplY3QoZ2VuZSk7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSAxO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHlsZS5HRU5FX0NPTE9SO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuR0VORV9DT0xPUjtcblxuICAgICAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIGNsYW1wZWRTY2FsZSgxICsgZ2VuZS5wb3NpdGlvbi5zdGFydCgpKSwgZ2VuZUxpbmVZICsgMC41LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYW1wZWRTY2FsZSgxICsgZ2VuZS5wb3NpdGlvbi5zdG9wKCkpLCBnZW5lTGluZVkgKyAwLjUpO1xuXG4gICAgICAgIC8vIFRPRE86IG9ubHkgY29tcHV0ZSBhbGwgdGhlc2UgaW50ZXJ2YWxzIHdoZW4gZGF0YSBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICAgICAgdmFyIGV4b25zID0gYmVkdG9vbHMuc3BsaXRDb2RpbmdFeG9ucyhnZW5lLmV4b25zLCBnZW5lLmNvZGluZ1JlZ2lvbik7XG4gICAgICAgIGV4b25zLmZvckVhY2goZXhvbiA9PiB7XG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHNjKDEgKyBleG9uLnN0YXJ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgZ2VuZUxpbmVZIC0gMyAqIChleG9uLmlzQ29kaW5nID8gMiA6IDEpLFxuICAgICAgICAgICAgICAgICAgICAgICBzYyhleG9uLnN0b3AgKyAyKSAtIHNjKDEgKyBleG9uLnN0YXJ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgNiAqIChleG9uLmlzQ29kaW5nID8gMiA6IDEpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGludHJvbnMgPSBnZW5lLnBvc2l0aW9uLmludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMoZ2VuZS5leG9ucyk7XG4gICAgICAgIGludHJvbnMuZm9yRWFjaChyYW5nZSA9PiB7XG4gICAgICAgICAgZHJhd0Fycm93KGN0eCwgY2xhbXBlZFNjYWxlLCByYW5nZSwgZ2VuZUxpbmVZICsgMC41LCBnZW5lLnN0cmFuZCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHlsZS5HRU5FX0NPTVBMRU1FTlRfQ09MT1I7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgICBnZW5lLmV4b25zLmZvckVhY2gocmFuZ2UgPT4ge1xuICAgICAgICAgIGRyYXdBcnJvdyhjdHgsIGNsYW1wZWRTY2FsZSwgcmFuZ2UsIGdlbmVMaW5lWSArIDAuNSwgZ2VuZS5zdHJhbmQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkcmF3R2VuZU5hbWUoY3R4LCBjbGFtcGVkU2NhbGUsIGdlbmVMaW5lWSwgZ2VuZSwgdGV4dEludGVydmFscyk7XG5cbiAgICAgICAgY3R4LnBvcE9iamVjdCgpO1xuICAgICAgfSk7XG4gICAgfSAvLyBlbmQgdHlwZWNoZWNrIGZvciBjYW52YXPDn1xuICB9XG59XG5cbkdlbmVUcmFjay5kaXNwbGF5TmFtZSA9ICdnZW5lcyc7XG5cbm1vZHVsZS5leHBvcnRzID0gR2VuZVRyYWNrO1xuIiwiLyoqXG4gKiBEYXRhIG1hbmFnZW1lbnQgZm9yIEZlYXR1cmVUcmFjay5cbiAqXG4gKiBUaGlzIGNsYXNzIGdyb3VwcyBmZWF0dXJlcyBhbmQgcGlsZXMgdGhlbSB1cC5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG4vKmpzaGludCB1bnVzZWQ6ZmFsc2UgKi9cbmltcG9ydCBHZW5lcmljRmVhdHVyZSBmcm9tICcuLi9kYXRhL2dlbmVyaWNGZWF0dXJlLmpzJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5cbmltcG9ydCB7YWRkVG9QaWxldXB9IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuaW1wb3J0IHR5cGUge1R3b0JpdFNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9Ud29CaXREYXRhU291cmNlJztcbmltcG9ydCBBYnN0cmFjdENhY2hlIGZyb20gJy4vQWJzdHJhY3RDYWNoZSc7XG5pbXBvcnQgdHlwZSB7VmlzdWFsR3JvdXB9IGZyb20gJy4vQWJzdHJhY3RDYWNoZSc7XG5cbi8vIFRoaXMgY2xhc3MgcHJvdmlkZXMgZGF0YSBtYW5hZ2VtZW50IGZvciB0aGUgdmlzdWFsaXphdGlvblxuY2xhc3MgR2VuZXJpY0ZlYXR1cmVDYWNoZSBleHRlbmRzIEFic3RyYWN0Q2FjaGU8R2VuZXJpY0ZlYXR1cmU+IHtcbiAgLy8gbWFwcyBncm91cEtleSB0byBWaXN1YWxHcm91cFxuICBncm91cHM6IHtba2V5OiBzdHJpbmddOiBWaXN1YWxHcm91cDxHZW5lcmljRmVhdHVyZT59O1xuICByZWZUb1BpbGV1cDoge1trZXk6IHN0cmluZ106IEFycmF5PEludGVydmFsW10+fTtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG5cbiAgY29uc3RydWN0b3IocmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2UpIHtcbiAgICBzdXBlcihyZWZlcmVuY2VTb3VyY2UpO1xuICB9XG5cbiAgLy8gbmFtZSB3b3VsZCBtYWtlIGEgZ29vZCBrZXksIGJ1dCBmZWF0dXJlcyBmcm9tIGRpZmZlcmVudCBjb250aWdzXG4gIC8vIHNob3VsZG4ndCBiZSBncm91cGVkIHZpc3VhbGx5LiBIZW5jZSB3ZSB1c2UgZmVhdHVyZSBuYW1lICsgY29udGlnLlxuICBncm91cEtleShmOiBHZW5lcmljRmVhdHVyZSk6IHN0cmluZyB7XG4gICAgICByZXR1cm4gZi5pZCB8fCBmLnBvc2l0aW9uLnRvU3RyaW5nKCk7XG4gIH1cblxuICAvLyBMb2FkIGEgbmV3IGZlYXR1cmUgaW50byB0aGUgdmlzdWFsaXphdGlvbiBjYWNoZS5cbiAgLy8gQ2FsbGluZyB0aGlzIG11bHRpcGxlIHRpbWVzIHdpdGggdGhlIHNhbWUgZmVhdHVyZSBpcyBhIG5vLW9wLlxuICBhZGRGZWF0dXJlKGZlYXR1cmU6IEdlbmVyaWNGZWF0dXJlKSB7XG4gICAgdmFyIGtleSA9IHRoaXMuZ3JvdXBLZXkoZmVhdHVyZSk7XG5cbiAgICBpZiAoIShrZXkgaW4gdGhpcy5ncm91cHMpKSB7XG4gICAgICB0aGlzLmdyb3Vwc1trZXldID0ge1xuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgc3BhbjogZmVhdHVyZS5wb3NpdGlvbixcbiAgICAgICAgcm93OiAtMSwgIC8vIFRCRFxuICAgICAgICBpbnNlcnQ6IG51bGwsXG4gICAgICAgIGl0ZW1zOiBbXVxuICAgICAgfTtcbiAgICB9XG4gICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cHNba2V5XTtcblxuICAgIGlmIChfLmZpbmQoZ3JvdXAuaXRlbXMsIGYgPT4gZi5nRmVhdHVyZSA9PSBmZWF0dXJlLmdGZWF0dXJlKSkge1xuICAgICAgcmV0dXJuOyAgLy8gd2UndmUgYWxyZWFkeSBnb3QgaXQuXG4gICAgfVxuXG4gICAgZ3JvdXAuaXRlbXMucHVzaChmZWF0dXJlKTtcblxuICAgIGlmICghKGZlYXR1cmUucG9zaXRpb24uY29udGlnIGluIHRoaXMucmVmVG9QaWxldXApKSB7XG4gICAgICB0aGlzLnJlZlRvUGlsZXVwW2ZlYXR1cmUucG9zaXRpb24uY29udGlnXSA9IFtdO1xuICAgIH1cbiAgICB2YXIgcGlsZXVwID0gdGhpcy5yZWZUb1BpbGV1cFtmZWF0dXJlLnBvc2l0aW9uLmNvbnRpZ107XG4gICAgZ3JvdXAucm93ID0gYWRkVG9QaWxldXAoZ3JvdXAuc3Bhbi5pbnRlcnZhbCwgcGlsZXVwKTtcbiAgIFxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBHZW5lcmljRmVhdHVyZUNhY2hlXG59O1xuIiwiLyoqXG4gKiBBIHRyYWNrIHdoaWNoIGRpc3BsYXlzIGEgcmVmZXJlbmNlIGdlbm9tZS5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge0RhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IHR5cGUge1N0YXRlfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCBEaXNwbGF5TW9kZSBmcm9tICcuL0Rpc3BsYXlNb2RlJztcbmltcG9ydCBUaWxlZENhbnZhcyBmcm9tICcuL1RpbGVkQ2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5cblxuZnVuY3Rpb24gcmVuZGVyR2Vub21lKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgICAgYmFzZVBhaXJzOiBzdHJpbmcpIHtcbiAgdmFyIHB4UGVyTGV0dGVyID0gc2NhbGUoMSkgLSBzY2FsZSgwKTtcbiAgdmFyIG1vZGUgPSBEaXNwbGF5TW9kZS5nZXREaXNwbGF5TW9kZShweFBlckxldHRlcik7XG4gIHZhciBzaG93VGV4dCA9IERpc3BsYXlNb2RlLmlzVGV4dChtb2RlKTtcblxuICAvLyBnZXQgYWRqdXN0ZWQgY2FudmFzIGhlaWdodCBmb3IgZHJhd2luZyBsZXR0ZXJzIGFuZCByZWN0c1xuICB2YXIgYWRqdXN0ZWRIZWlnaHQgPSBoZWlnaHQvd2luZG93LmRldmljZVBpeGVsUmF0aW87XG5cbiAgaWYgKG1vZGUgIT0gRGlzcGxheU1vZGUuSElEREVOKSB7XG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIGN0eC5mb250ID0gc3R5bGUuVEVYVF9TVFlMRShtb2RlLCBhZGp1c3RlZEhlaWdodCk7XG5cbiAgICB2YXIgcHJldmlvdXNCYXNlID0gbnVsbDtcbiAgICB2YXIgc3RhcnQgPSByYW5nZS5zdGFydCgpLFxuICAgICAgICBzdG9wID0gcmFuZ2Uuc3RvcCgpO1xuICAgIGZvciAodmFyIHBvcyA9IHN0YXJ0OyBwb3MgPD0gc3RvcDsgcG9zKyspIHtcbiAgICAgIHZhciBsZXR0ZXIgPSBiYXNlUGFpcnNbcG9zIC0gc3RhcnRdO1xuICAgICAgaWYgKGxldHRlciA9PSAnLicpIGNvbnRpbnVlOyAgLy8gbm90IHlldCBrbm93blxuXG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LnB1c2hPYmplY3Qoe3BvcywgbGV0dGVyfSk7XG4gICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQkFTRV9DT0xPUlNbbGV0dGVyXTtcbiAgICAgIGlmIChzaG93VGV4dCkge1xuICAgICAgICAvLyBXZSBvbmx5IHB1c2ggb2JqZWN0cyBpbiB0aGUgdGV4dCBjYXNlIGFzIGl0IGludm9sdmVzIGNyZWF0aW5nIGFcbiAgICAgICAgLy8gbmV3IG9iamVjdCAmIGNhbiBiZWNvbWUgYSBwZXJmb3JtYW5jZSBpc3N1ZS5cbiAgICAgICAgLy8gMC41ID0gY2VudGVyZWRcbiAgICAgICAgY3R4LmZpbGxUZXh0KGxldHRlciwgc2NhbGUoMSArIDAuNSArIHBvcyksIGFkanVzdGVkSGVpZ2h0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChweFBlckxldHRlciA+PSBzdHlsZS5DT1ZFUkFHRV9NSU5fQkFSX1dJRFRIX0ZPUl9HQVApIHtcbiAgICAgICAgICAvLyBXZSB3YW50IGEgd2hpdGUgc3BhY2UgYmV0d2VlbiBibG9ja3MgYXQgdGhpcyBzaXplLCBzbyB3ZSBjYW4gc2VlXG4gICAgICAgICAgLy8gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBiYXNlcy5cbiAgICAgICAgICBjdHguZmlsbFJlY3Qoc2NhbGUoMSArIHBvcykgKyAwLjUsIDAsICBweFBlckxldHRlciAtIDEuNSwgYWRqdXN0ZWRIZWlnaHQpO1xuICAgICAgICB9IGVsc2UgaWYgKHByZXZpb3VzQmFzZSA9PT0gbGV0dGVyKSB7XG4gICAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB3YW50IHJ1bnMgb2YgY29sb3JzIHRvIGJlIGNvbXBsZXRlbHkgc29saWQgLi4uXG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHNjYWxlKDEgKyBwb3MpIC0gMS41LCAwLCBweFBlckxldHRlciArIDEuNSwgYWRqdXN0ZWRIZWlnaHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIC4uLiBhbmQgbWluaW1pemUgdGhlIGFtb3VudCBvZiBzbXVkZ2luZyBhbmQgd2hpdGVzcGFjZSBiZXR3ZWVuXG4gICAgICAgICAgLy8gYmFzZXMuXG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHNjYWxlKDEgKyBwb3MpIC0gMC41LCAwLCAgcHhQZXJMZXR0ZXIgKyAxLjUsIGFkanVzdGVkSGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgcHJldmlvdXNCYXNlID0gbGV0dGVyO1xuICAgIH1cbiAgfVxufVxuXG5cbmNsYXNzIEdlbm9tZVRpbGVkQ2FudmFzIGV4dGVuZHMgVGlsZWRDYW52YXMge1xuICBzb3VyY2U6IFR3b0JpdFNvdXJjZTtcbiAgaGVpZ2h0OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3Ioc291cmNlOiBUd29CaXRTb3VyY2UsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAvLyB3b3JrYXJvdW5kIGZvciBhbiBpc3N1ZSBpbiBQaGFudG9tSlMgd2hlcmUgaGVpZ2h0IGFsd2F5cyBjb21lcyBvdXQgdG8gemVyby5cbiAgICB0aGlzLmhlaWdodCA9IE1hdGgubWF4KDEsIGhlaWdodCk7XG4gIH1cblxuICByZW5kZXIoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgc2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikge1xuICAgIC8vIFRoZSArLy0xIGVuc3VyZXMgdGhhdCBwYXJ0aWFsbHktdmlzaWJsZSBiYXNlcyBvbiB0aGUgZWRnZSBhcmUgcmVuZGVyZWQuXG4gICAgdmFyIGdlbm9tZVJhbmdlID0ge1xuICAgICAgY29udGlnOiByYW5nZS5jb250aWcsXG4gICAgICBzdGFydDogTWF0aC5tYXgoMCwgcmFuZ2Uuc3RhcnQoKSAtIDEpLFxuICAgICAgc3RvcDogcmFuZ2Uuc3RvcCgpICsgMVxuICAgIH07XG4gICAgdmFyIGJhc2VQYWlycyA9IHRoaXMuc291cmNlLmdldFJhbmdlQXNTdHJpbmcoZ2Vub21lUmFuZ2UpO1xuICAgIHJlbmRlckdlbm9tZShjdHgsIHNjYWxlLCB0aGlzLmhlaWdodCwgQ29udGlnSW50ZXJ2YWwuZnJvbUdlbm9tZVJhbmdlKGdlbm9tZVJhbmdlKSwgYmFzZVBhaXJzKTtcbiAgfVxuXG4gIGhlaWdodEZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaGVpZ2h0O1xuICB9XG5cbiAgdXBkYXRlSGVpZ2h0KGhlaWdodDogbnVtYmVyKSB7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gIH1cbn1cblxuY2xhc3MgR2Vub21lVHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Vml6UHJvcHM8VHdvQml0U291cmNlPiwgU3RhdGU+IHtcbiAgcHJvcHM6IFZpelByb3BzPFR3b0JpdFNvdXJjZT47XG4gIHN0YXRlOiBTdGF0ZTsgIC8vIG5vIHN0YXRlLCB1c2VkIHRvIG1ha2UgZmxvdyBoYXBweVxuICB0aWxlczogR2Vub21lVGlsZWRDYW52YXM7XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgcmV0dXJuIDxjYW52YXMgLz47XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnRpbGVzID0gbmV3IEdlbm9tZVRpbGVkQ2FudmFzKHRoaXMucHJvcHMuc291cmNlLCB0aGlzLnByb3BzLmhlaWdodCk7XG5cbiAgICAvLyBWaXN1YWxpemUgbmV3IHJlZmVyZW5jZSBkYXRhIGFzIGl0IGNvbWVzIGluIGZyb20gdGhlIG5ldHdvcmsuXG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ld2RhdGEnLCByYW5nZSA9PiB7XG4gICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVSYW5nZShyYW5nZSk7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9KTtcblxuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHByZXZQcm9wcywgdGhpcy5wcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHMocHJldlN0YXRlLCB0aGlzLnN0YXRlKSkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaGVpZ2h0ICE9IHByZXZQcm9wcy5oZWlnaHQpIHtcbiAgICAgICAgdGhpcy50aWxlcy51cGRhdGVIZWlnaHQodGhpcy5wcm9wcy5oZWlnaHQpO1xuICAgICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVZpc3VhbGl6YXRpb24oKSB7XG4gICAgdmFyIGNhbnZhcyA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLFxuICAgICAgICB7d2lkdGgsIGhlaWdodCwgcmFuZ2V9ID0gdGhpcy5wcm9wcztcblxuICAgIC8vIEhvbGQgb2ZmIHVudGlsIGhlaWdodCAmIHdpZHRoIGFyZSBrbm93bi5cbiAgICBpZiAod2lkdGggPT09IDApIHJldHVybjtcblxuICAgIGlmIChjYW52YXMgJiYgY2FudmFzIGluc3RhbmNlb2YgRWxlbWVudCkgeyAvLyBjaGVjayBmb3IgZ2V0Q29udGV4dFxuICAgICAgaWYgKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7IC8vIGNoZWNrIGZvciBzaXplQ2FudmFzXG4gICAgICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgfVxuICAgICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpKTtcblxuICAgICAgY3R4LnJlc2V0KCk7XG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICAgIHRoaXMudGlsZXMucmVuZGVyVG9TY3JlZW4oY3R4LCBDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UocmFuZ2UpLCB0aGlzLmdldFNjYWxlKCkpO1xuICAgIH0gLy8gZW5kIHR5cGVjaGVjayBmb3IgY2FudmFzXG4gIH1cbn1cblxuR2Vub21lVHJhY2suZGlzcGxheU5hbWUgPSAncmVmZXJlbmNlJztcblxubW9kdWxlLmV4cG9ydHMgPSBHZW5vbWVUcmFjaztcbiIsIi8qKlxuICogVmlzdWFsaXphdGlvbiBvZiBnZW5vdHlwZXNcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZjZkRhdGFTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvVmNmRGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7VmFyaWFudENvbnRleHR9IGZyb20gJy4uL2RhdGEvdmFyaWFudCc7XG5pbXBvcnQgdHlwZSB7RGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuXG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgVGlsZWRDYW52YXMgZnJvbSAnLi9UaWxlZENhbnZhcyc7XG5pbXBvcnQgZGF0YUNhbnZhcyBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB0eXBlIHtTdGF0ZX0gZnJvbSAnLi4vdHlwZXMnO1xuXG52YXIgTU9OU1RFUl9SRVFVRVNUID0gMTAwMDA7XG52YXIgTEFCRUxfV0lEVEggPSAxMDA7XG5cbmNsYXNzIEdlbm90eXBlVGlsZWRDYW52YXMgZXh0ZW5kcyBUaWxlZENhbnZhcyB7XG4gIG9wdGlvbnM6IE9iamVjdDtcbiAgc291cmNlOiBWY2ZEYXRhU291cmNlO1xuICBjYWxsU2V0TmFtZXM6IHN0cmluZ1tdO1xuXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTogVmNmRGF0YVNvdXJjZSwgY2FsbFNldE5hbWVzOiBzdHJpbmdbXSwgb3B0aW9uczogT2JqZWN0KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuY2FsbFNldE5hbWVzID0gY2FsbFNldE5hbWVzO1xuICB9XG5cbiAgdXBkYXRlKG5ld09wdGlvbnM6IE9iamVjdCkge1xuICAgIHRoaXMub3B0aW9ucyA9IG5ld09wdGlvbnM7XG4gIH1cblxuICBoZWlnaHRGb3JSZWYocmVmOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB5Rm9yUm93KHRoaXMuY2FsbFNldE5hbWVzLmxlbmd0aCk7XG4gIH1cblxuICByZW5kZXIoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgc2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgIG9yaWdpbmFsUmFuZ2U6ID9Db250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgdmFyIHJlbGF4ZWRSYW5nZSA9XG4gICAgICAgIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0KCkgLSAxLCByYW5nZS5zdG9wKCkgKyAxKTtcblxuICAgIC8vIHJlbGF4ZWQgcmFuZ2UgaXMganVzdCBmb3IgdGhpcyB0aWxlXG4gICAgdmFyIHZHZW5vdHlwZXMgPSB0aGlzLnNvdXJjZS5nZXRHZW5vdHlwZXNJblJhbmdlKHJlbGF4ZWRSYW5nZSk7XG4gICAgcmVuZGVyR2Vub3R5cGVzKGN0eCwgc2NhbGUsIHJlbGF4ZWRSYW5nZSwgdkdlbm90eXBlcywgdGhpcy5jYWxsU2V0TmFtZXMpO1xuICB9XG59XG4vLyBEcmF3IGdlbm90eXBlc1xuZnVuY3Rpb24gcmVuZGVyR2Vub3R5cGVzKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IChudW06IG51bWJlcikgPT4gbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgICAgICAgICAgICAgdmNzOiBWYXJpYW50Q29udGV4dFtdLFxuICAgICAgICAgICAgICAgICAgICBjYWxsU2V0TmFtZXM6IHN0cmluZ1tdKSB7XG4gICAgLy8gZHJhdyBnZW5vdHlwZXNcbiAgICB2Y3MuZm9yRWFjaCh2YyA9PiB7XG4gICAgICAgIHZhciB2YXJpYW50ID0gdmMudmFyaWFudDtcbiAgICAgICAgY3R4LnB1c2hPYmplY3QodmFyaWFudCk7XG5cbiAgICAgICAgdmFyIHggPSBNYXRoLnJvdW5kKHNjYWxlKHZhcmlhbnQucG9zaXRpb24pKTtcbiAgICAgICAgdmFyIHdpZHRoID0gTWF0aC5tYXgoMSwgTWF0aC5yb3VuZChzY2FsZSh2YXJpYW50LnBvc2l0aW9uICsgMSkgLSBzY2FsZSh2YXJpYW50LnBvc2l0aW9uKSkpO1xuICAgICAgICB2Yy5jYWxscy5mb3JFYWNoKGNhbGwgPT4ge1xuICAgICAgICAgIHZhciB5ID0geUZvclJvdyhjYWxsU2V0TmFtZXMuaW5kZXhPZihjYWxsLmNhbGxTZXROYW1lKSk7XG4gICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNhbGwuZ2Vub3R5cGUucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCkgPT0gMSA/IHN0eWxlLkdFTk9UWVBFX0ZJTExfSEVUIDogc3R5bGUuR0VOT1RZUEVfRklMTF9IT007XG4gICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY3R4LmZpbGxTdHlsZTtcbiAgICAgICAgICBjdHguZmlsbFJlY3QoeCAtIDAuMiwgeSwgd2lkdGgsIHN0eWxlLkdFTk9UWVBFX0hFSUdIVCk7XG4gICAgICAgICAgY3R4LnN0cm9rZVJlY3QoeCAtIDAuMiwgeSwgd2lkdGgsIHN0eWxlLkdFTk9UWVBFX0hFSUdIVCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHlGb3JSb3cocm93KSB7XG4gIHJldHVybiByb3cgKiAoc3R5bGUuR0VOT1RZUEVfSEVJR0hUICsgc3R5bGUuR0VOT1RZUEVfU1BBQ0lORyk7XG59XG5cbmNsYXNzIEdlbm90eXBlVHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Vml6UHJvcHM8VmNmRGF0YVNvdXJjZT4sIFN0YXRlPiB7XG4gIHByb3BzOiBWaXpQcm9wczxWY2ZEYXRhU291cmNlPjtcbiAgc3RhdGU6IFN0YXRlO1xuICB0aWxlczogR2Vub3R5cGVUaWxlZENhbnZhcztcbiAgY2FsbFNldE5hbWVzOiBzdHJpbmdbXTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuY2FsbFNldE5hbWVzID0gW107XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5ldHdvcmtTdGF0dXM6IG51bGxcbiAgICB9O1xuICAgIHByb3BzLnNvdXJjZS5nZXRDYWxsTmFtZXMoKS50aGVuKHNhbXBsZXMgPT4ge1xuICAgICAgdGhpcy5jYWxsU2V0TmFtZXMgPSBzYW1wbGVzO1xuICAgICAgdGhpcy50aWxlcy5jYWxsU2V0TmFtZXMgPSBzYW1wbGVzO1xuICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlQWxsKCk7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIC8vIFRoZXNlIHN0eWxlcyBhbGxvdyB2ZXJ0aWNhbCBzY3JvbGxpbmcgdG8gc2VlIHRoZSBmdWxsIHBpbGV1cC5cbiAgICAvLyBBZGRpbmcgYSB2ZXJ0aWNhbCBzY3JvbGxiYXIgc2hyaW5rcyB0aGUgdmlzaWJsZSBhcmVhLCBidXQgd2UgaGF2ZSB0byBhY3RcbiAgICAvLyBhcyB0aG91Z2ggaXQgZG9lc24ndCwgc2luY2UgYWRqdXN0aW5nIHRoZSBzY2FsZSB3b3VsZCBwdXQgaXQgb3V0IG9mIHN5bmNcbiAgICAvLyB3aXRoIG90aGVyIHRyYWNrcy5cbiAgICB2YXIgY29udGFpbmVyU3R5bGVzID0ge1xuICAgICAgJ2hlaWdodCc6ICcxMDAlJ1xuICAgIH07XG5cbiAgICB2YXIgbGFiZWxTdHlsZXMgPSB7XG4gICAgICAnZmxvYXQnOiAnbGVmdCcsXG4gICAgICAnb3ZlcmZsb3cnOiAnaGlkZGVuJyxcbiAgICAgICd3aWR0aDonOiBgJHsgTEFCRUxfV0lEVEggfXB4YFxuICAgIH07XG5cbiAgICB2YXIgY2FudmFzU3R5bGVzID0ge1xuICAgICAgJ292ZXJmbG93JzogJ2hpZGRlbidcbiAgICB9O1xuXG4gICAgdmFyIHN0YXR1c0VsID0gbnVsbCxcbiAgICAgICAgbmV0d29ya1N0YXR1cyA9IHRoaXMuc3RhdGUubmV0d29ya1N0YXR1cztcbiAgICBpZiAobmV0d29ya1N0YXR1cykge1xuICAgICAgc3RhdHVzRWwgPSAoXG4gICAgICAgIDxkaXYgcmVmPSdzdGF0dXMnIGNsYXNzTmFtZT0nbmV0d29yay1zdGF0dXMtc21hbGwnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSduZXR3b3JrLXN0YXR1cy1tZXNzYWdlLXNtYWxsJz5cbiAgICAgICAgICAgIExvYWRpbmcgR2Vub3R5cGVz4oCmXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG4gICAgdmFyIHJhbmdlTGVuZ3RoID0gdGhpcy5wcm9wcy5yYW5nZS5zdG9wIC0gdGhpcy5wcm9wcy5yYW5nZS5zdGFydDtcbiAgICAvLyBJZiByYW5nZSBpcyB0b28gbGFyZ2UsIGRvIG5vdCByZW5kZXIgJ2NhbnZhcydcbiAgICBpZiAocmFuZ2VMZW5ndGggPj0gTU9OU1RFUl9SRVFVRVNUKSB7XG4gICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjZW50ZXInPlxuICAgICAgICAgICAgICBab29tIGluIHRvIHNlZSBnZW5vdHlwZXNcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGNhbnZhcyBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyl9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICB7c3RhdHVzRWx9XG4gICAgICAgICAgPGRpdiByZWY9J2NvbnRhaW5lcicgc3R5bGU9e2NvbnRhaW5lclN0eWxlc30+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdlbm90eXBlTGFiZWxzXCIgc3R5bGU9e2xhYmVsU3R5bGVzfT48Y2FudmFzIHJlZj0nbGFiZWxDYW52YXMnIC8+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdlbm90eXBlUm93c1wiIHN0eWxlPXtjYW52YXNTdHlsZXN9PjxjYW52YXMgcmVmPSdjYW52YXMnIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKX0gLz48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLnRpbGVzID0gbmV3IEdlbm90eXBlVGlsZWRDYW52YXModGhpcy5wcm9wcy5zb3VyY2UsXG4gICAgICAgIHRoaXMuY2FsbFNldE5hbWVzLCB0aGlzLnByb3BzLm9wdGlvbnMpO1xuXG4gICAgICAgIC8vIFZpc3VhbGl6ZSBuZXcgZGF0YSBhcyBpdCBjb21lcyBpbiBmcm9tIHRoZSBuZXR3b3JrLlxuICAgICAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV3ZGF0YScsIChyYW5nZSkgPT4ge1xuICAgICAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZVJhbmdlKHJhbmdlKTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrcHJvZ3Jlc3MnLCBlID0+IHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtuZXR3b3JrU3RhdHVzOiBlfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV0d29ya2RvbmUnLCBlID0+IHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtuZXR3b3JrU3RhdHVzOiBudWxsfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCAtIExBQkVMX1dJRFRIKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICBpZiAoIXNoYWxsb3dFcXVhbHMocHJldlByb3BzLCB0aGlzLnByb3BzKSB8fFxuICAgICAgICAhc2hhbGxvd0VxdWFscyhwcmV2U3RhdGUsIHRoaXMuc3RhdGUpKSB7XG4gICAgICAgICAgdGhpcy50aWxlcy51cGRhdGUodGhpcy5wcm9wcy5vcHRpb25zKTtcbiAgICAgICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9XG4gIH1cblxuICAvLyBkcmF3cyBnZW5vdHlwZSBsaW5lcyB0byB2aXN1YWxseSBzZXBhcmF0ZSBnZW5vdHlwZSByb3dzXG4gIGRyYXdMaW5lcyhjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICB2YXIgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoO1xuXG4gICAgLy8gZHJhdyBiYWNrZ3JvdW5kIGZvciBlYWNoIHJvd1xuICAgIGlmICh0aGlzLmNhbGxTZXROYW1lcyAhPT0gbnVsbCkge1xuICAgICAgY3R4LmZvbnQgPSBcIjlweCBBcmlhbFwiO1xuICAgICAgdGhpcy5jYWxsU2V0TmFtZXMuZm9yRWFjaChzYW1wbGVJZCA9PiB7XG4gICAgICAgIGN0eC5wdXNoT2JqZWN0KHNhbXBsZUlkKTtcbiAgICAgICAgdmFyIHkgPSB5Rm9yUm93KHRoaXMuY2FsbFNldE5hbWVzLmluZGV4T2Yoc2FtcGxlSWQpKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLkJBQ0tHUk9VTkRfRklMTDtcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIHksIHdpZHRoLCBzdHlsZS5HRU5PVFlQRV9IRUlHSFQpO1xuICAgICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBkcmF3cyBzYW1wbGUgbmFtZXMgb24gc2lkZSBiYXIuIFRoaXMgbmVlZHMgdG8gYmUgb25seSByZW5kZXJlZCBvbmNlLlxuICBkcmF3TGFiZWxzKCkge1xuICAgIC8vIGlmIGFscmVhZHkgZHJhd24sIHJldHVyblxuICAgIHZhciBsYWJlbENhbnZhcyA9ICh0aGlzLnJlZnMubGFiZWxDYW52YXMgOiBIVE1MQ2FudmFzRWxlbWVudCksXG4gICAgICAgIHdpZHRoID0gdGhpcy5wcm9wcy53aWR0aDtcblxuICAgIC8vIEhvbGQgb2ZmIHVudGlsIGhlaWdodCAmIHdpZHRoIGFyZSBrbm93bi5cbiAgICBpZiAod2lkdGggPT09IDAgfHwgdHlwZW9mIGxhYmVsQ2FudmFzID09ICd1bmRlZmluZWQnKSByZXR1cm47XG5cbiAgICB2YXIgaGVpZ2h0ID0geUZvclJvdyh0aGlzLmNhbGxTZXROYW1lcy5sZW5ndGgpO1xuXG5cbiAgICAvLyBvbmx5IHJlbmRlciBvbmNlIG9uIGxvYWQuXG4gICAgaWYgKGxhYmVsQ2FudmFzLmNsaWVudEhlaWdodCAhPSBoZWlnaHQpIHtcbiAgICAgIHZhciBsYWJlbEN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY2FudmFzVXRpbHMuZ2V0Q29udGV4dChsYWJlbENhbnZhcykpO1xuICAgICAgZDN1dGlscy5zaXplQ2FudmFzKGxhYmVsQ2FudmFzLCBMQUJFTF9XSURUSCwgaGVpZ2h0KTtcblxuICAgICAgLy8gZHJhdyBsYWJlbCBmb3IgZWFjaCByb3dcbiAgICAgIGlmICh0aGlzLmNhbGxTZXROYW1lcyAhPT0gbnVsbCkge1xuICAgICAgICBsYWJlbEN0eC5mb250ID0gXCI5cHggQXJpYWxcIjtcbiAgICAgICAgdGhpcy5jYWxsU2V0TmFtZXMuZm9yRWFjaChzYW1wbGVJZCA9PiB7XG4gICAgICAgICAgbGFiZWxDdHgucHVzaE9iamVjdChzYW1wbGVJZCk7XG4gICAgICAgICAgdmFyIHkgPSB5Rm9yUm93KHRoaXMuY2FsbFNldE5hbWVzLmluZGV4T2Yoc2FtcGxlSWQpKTtcbiAgICAgICAgICBsYWJlbEN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XG4gICAgICAgICAgbGFiZWxDdHguZmlsbFRleHQoc2FtcGxlSWQsIDAsIHkrc3R5bGUuR0VOT1RZUEVfSEVJR0hUKTtcbiAgICAgICAgICBsYWJlbEN0eC5wb3BPYmplY3QoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gKHRoaXMucmVmcy5jYW52YXMgOiBIVE1MQ2FudmFzRWxlbWVudCksXG4gICAgICAgIHdpZHRoID0gdGhpcy5wcm9wcy53aWR0aDtcblxuICAgIC8vIEhvbGQgb2ZmIHVudGlsIGhlaWdodCAmIHdpZHRoIGFyZSBrbm93bi5cbiAgICBpZiAod2lkdGggPT09IDAgfHwgdHlwZW9mIGNhbnZhcyA9PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuXG4gICAgdmFyIGhlaWdodCA9IHlGb3JSb3codGhpcy5jYWxsU2V0TmFtZXMubGVuZ3RoKTtcbiAgICBkM3V0aWxzLnNpemVDYW52YXMoY2FudmFzLCB3aWR0aCAtIExBQkVMX1dJRFRILCBoZWlnaHQpO1xuXG4gICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpKTtcbiAgICB0aGlzLmRyYXdMYWJlbHMoKTtcbiAgICB0aGlzLnJlbmRlclNjZW5lKGN0eCk7XG4gIH1cblxuICByZW5kZXJTY2VuZShjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICB2YXIgcmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlLFxuICAgICAgICBpbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0LCByYW5nZS5zdG9wKSxcbiAgICAgICAgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCk7XG5cbiAgICBjdHgucmVzZXQoKTtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcblxuICAgIC8vIHJlbmRlciBsaW5lcyBhZnRlciByZWN0YW5nbGUgaGFzIGJlZW4gY2xlYXJlZFxuICAgIHRoaXMuZHJhd0xpbmVzKGN0eCk7XG5cbiAgICB0aGlzLnRpbGVzLnJlbmRlclRvU2NyZWVuKGN0eCwgaW50ZXJ2YWwsIHNjYWxlKTtcbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2socmVhY3RFdmVudDogYW55KSB7XG4gICAgdmFyIGV2ID0gcmVhY3RFdmVudC5uYXRpdmVFdmVudCxcbiAgICAgICAgeCA9IGV2Lm9mZnNldFg7XG5cbiAgICB2YXIgZ2Vub21lUmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlLFxuICAgICAgICAvLyBhbGxvdyBzb21lIGJ1ZmZlcmluZyBzbyBjbGljayBpc24ndCBzbyBzZW5zaXRpdmVcbiAgICAgICAgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoZ2Vub21lUmFuZ2UuY29udGlnLCBnZW5vbWVSYW5nZS5zdGFydC0xLCBnZW5vbWVSYW5nZS5zdG9wKzEpLFxuICAgICAgICBzY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKSxcbiAgICAgICAgLy8gbGVhdmUgcGFkZGluZyBvZiAycHggdG8gcmVkdWNlIGNsaWNrIHNwZWNpZmljaXR5XG4gICAgICAgIGNsaWNrU3RhcnQgPSBNYXRoLmZsb29yKHNjYWxlLmludmVydCh4KSkgLSAyLFxuICAgICAgICBjbGlja0VuZCA9IGNsaWNrU3RhcnQgKyAyLFxuICAgICAgICAvLyBJZiBjbGljay10cmFja2luZyBnZXRzIHNsb3csIHRoaXMgcmFuZ2UgY291bGQgYmUgbmFycm93ZWQgdG8gb25lXG4gICAgICAgIC8vIGNsb3NlciB0byB0aGUgY2xpY2sgY29vcmRpbmF0ZSwgcmF0aGVyIHRoYW4gdGhlIHdob2xlIHZpc2libGUgcmFuZ2UuXG4gICAgICAgIHZHZW5vdHlwZXMgPSB0aGlzLnByb3BzLnNvdXJjZS5nZXRHZW5vdHlwZXNJblJhbmdlKHJhbmdlKTtcblxuICAgIHZhciBnZW5vdHlwZSA9IF8uZmluZCh2R2Vub3R5cGVzLCBmID0+IHV0aWxzLnR1cGxlUmFuZ2VPdmVybGFwcyhbW2YudmFyaWFudC5wb3NpdGlvbl0sIFtmLnZhcmlhbnQucG9zaXRpb24rMV1dLCBbW2NsaWNrU3RhcnRdLCBbY2xpY2tFbmRdXSkpO1xuICAgIHZhciBhbGVydCA9IHdpbmRvdy5hbGVydCB8fCBjb25zb2xlLmxvZztcbiAgICBpZiAoZ2Vub3R5cGUpIHtcbiAgICAgIHZhciB2YXJpYW50U3RyaW5nID0gYHZhcmlhbnQ6ICR7SlNPTi5zdHJpbmdpZnkoZ2Vub3R5cGUudmFyaWFudCl9YDtcbiAgICAgIHZhciBjYWxsU2V0TmFtZXMgPSBnZW5vdHlwZS5jYWxscy5tYXAociA9PiByLmNhbGxTZXROYW1lKTtcbiAgICAgIHZhciBzYW1wbGVzID0gYHNhbXBsZXMgd2l0aCB2YXJpYW50OiAke0pTT04uc3RyaW5naWZ5KGNhbGxTZXROYW1lcyl9YDtcbiAgICAgIGFsZXJ0KGAke3ZhcmlhbnRTdHJpbmd9XFxuJHtzYW1wbGVzfWApO1xuICAgIH1cbiAgfVxufVxuXG5HZW5vdHlwZVRyYWNrLmRpc3BsYXlOYW1lID0gJ2dlbm90eXBlcyc7XG5cbm1vZHVsZS5leHBvcnRzID0gR2Vub3R5cGVUcmFjaztcbiIsIi8qKlxuICogQSB0cmFjayB3aGljaCBzaG93cyB0aGUgbG9jYXRpb24gb2YgdGhlIGJhc2UgaW4gdGhlIG1pZGRsZSBvZiB0aGUgdmlldy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQgdHlwZSB7U3RhdGV9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBFbXB0eVNvdXJjZSBmcm9tICcuLi9zb3VyY2VzL0VtcHR5U291cmNlJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgZGF0YUNhbnZhcyBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcblxuY2xhc3MgTG9jYXRpb25UcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxWaXpQcm9wczx2b2lkPiwgU3RhdGU+IHtcbiAgcHJvcHM6IFZpelByb3BzPHZvaWQ+O1xuICBzdGF0ZTogU3RhdGU7ICAvLyBzdGF0ZSBub3QgdXNlZCwgaGVyZSB0byBtYWtlIGZsb3cgaGFwcHlcbiAgc3RhdGljIGRlZmF1bHRTb3VyY2U6IE9iamVjdDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVml6UHJvcHM8dm9pZD4pIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIHJldHVybiA8Y2FudmFzIC8+O1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKSxcbiAgICAgICAge3JhbmdlLCB3aWR0aCwgaGVpZ2h0fSA9IHRoaXMucHJvcHMsXG4gICAgICAgIHNjYWxlID0gdGhpcy5nZXRTY2FsZSgpO1xuXG4gICAgaWYgKGNhbnZhcyAmJiBjYW52YXMgaW5zdGFuY2VvZiBFbGVtZW50KSB7IC8vIGNoZWNrIGZvciBnZXRDb250ZXh0XG4gICAgICBpZiAoY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHsgLy8gY2hlY2sgZm9yIHNpemVDYW52YXNcbiAgICAgICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICB9XG4gICAgICB2YXIgY3R4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjYW52YXNVdGlscy5nZXRDb250ZXh0KGNhbnZhcykpO1xuICAgICAgY3R4LnNhdmUoKTtcbiAgICAgIGN0eC5yZXNldCgpO1xuICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG5cbiAgICAgIHZhciBtaWRQb2ludCA9IE1hdGguZmxvb3IoKHJhbmdlLnN0b3AgKyByYW5nZS5zdGFydCkgLyAyKSxcbiAgICAgICAgICByaWdodExpbmVYID0gTWF0aC5yb3VuZChzY2FsZShtaWRQb2ludCArIDEpKSxcbiAgICAgICAgICBsZWZ0TGluZVggPSBNYXRoLnJvdW5kKHNjYWxlKG1pZFBvaW50KSk7XG5cbiAgICAgIC8vIExlZnQgbGluZVxuICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCBsZWZ0TGluZVggLSAwLjUsIDAsIGxlZnRMaW5lWCAtIDAuNSwgaGVpZ2h0KTtcblxuICAgICAgLy8gUmlnaHQgbGluZVxuICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCByaWdodExpbmVYIC0gMC41LCAwLCByaWdodExpbmVYIC0gMC41LCBoZWlnaHQpO1xuXG4gICAgICAvLyBNaWQgbGFiZWxcbiAgICAgIHZhciBtaWRZID0gaGVpZ2h0IC8gMjtcblxuICAgICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLkxPQ19GT05UX0NPTE9SO1xuICAgICAgY3R4LmZvbnQgPSBzdHlsZS5MT0NfRk9OVF9TVFlMRTtcbiAgICAgIGN0eC5maWxsVGV4dChtaWRQb2ludC50b0xvY2FsZVN0cmluZygpICsgJyBicCcsXG4gICAgICAgICAgICAgICAgICAgcmlnaHRMaW5lWCArIHN0eWxlLkxPQ19USUNLX0xFTkdUSCArIHN0eWxlLkxPQ19URVhUX1BBRERJTkcsXG4gICAgICAgICAgICAgICAgICAgbWlkWSArIHN0eWxlLkxPQ19URVhUX1lfT0ZGU0VUKTtcblxuICAgICAgLy8gQ29ubmVjdCBsYWJlbCB3aXRoIHRoZSByaWdodCBsaW5lXG4gICAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIHJpZ2h0TGluZVggLSAwLjUsIG1pZFkgLSAwLjUsIHJpZ2h0TGluZVggKyBzdHlsZS5MT0NfVElDS19MRU5HVEggLSAwLjUsIG1pZFkgLSAwLjUpO1xuXG4gICAgICAvLyBjbGVhbiB1cFxuICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICB9IC8vIGVuZCB0eXBlY2hlY2sgZm9yIGNhbnZhc1xuICB9XG59XG5cbkxvY2F0aW9uVHJhY2suZGlzcGxheU5hbWUgPSAnbG9jYXRpb24nO1xuTG9jYXRpb25UcmFjay5kZWZhdWx0U291cmNlID0gRW1wdHlTb3VyY2UuY3JlYXRlKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gTG9jYXRpb25UcmFjaztcbiIsIi8qKlxuICogRGF0YSBtYW5hZ2VtZW50IGZvciBQaWxldXBUcmFjay5cbiAqXG4gKiBUaGlzIGNsYXNzIGdyb3VwcyBwYWlyZWQgcmVhZHMgYW5kIHBpbGVzIHRoZW0gdXAuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7U3RyYW5kLCBBbGlnbm1lbnR9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge0Jhc2VQYWlyfSBmcm9tICcuL3BpbGV1cHV0aWxzJztcbmltcG9ydCBBYnN0cmFjdENhY2hlIGZyb20gJy4vQWJzdHJhY3RDYWNoZSc7XG5pbXBvcnQgdHlwZSB7VmlzdWFsR3JvdXB9IGZyb20gJy4vQWJzdHJhY3RDYWNoZSc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQge2FkZFRvUGlsZXVwLCBnZXRPcEluZm99IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcblxuLy8gVGhpcyBidW5kbGVzIGV2ZXJ5dGhpbmcgaW50cmluc2ljIHRvIHRoZSBhbGlnbm1lbnQgdGhhdCB3ZSBuZWVkIHRvIGRpc3BsYXlcbi8vIGl0LCBpLmUuIGV2ZXJ5dGhpbmcgbm90IGRlcGVuZGVuZCBvbiBzY2FsZS92aWV3cG9ydC5cbmV4cG9ydCB0eXBlIFZpc3VhbEFsaWdubWVudCA9IHtcbiAgcmVhZDogQWxpZ25tZW50O1xuICBzdHJhbmQ6IFN0cmFuZDtcbiAgcmVmTGVuZ3RoOiBudW1iZXI7ICAvLyBzcGFuIG9uIHRoZSByZWZlcmVuY2UgKGFjY291bnRpbmcgZm9yIGluZGVscylcbiAgbWlzbWF0Y2hlczogQXJyYXk8QmFzZVBhaXI+O1xuICBvcHM6IE9iamVjdFtdO1xufTtcblxuLy8gSW5zZXJ0IHNpemVzIHdpdGhpbiB0aGlzIHBlcmNlbnRpbGUgcmFuZ2Ugd2lsbCBiZSBjb25zaWRlcmVkIFwibm9ybWFsXCIuXG5jb25zdCBNSU5fT1VUTElFUl9QRVJDRU5USUxFID0gMC41O1xuY29uc3QgTUFYX09VVExJRVJfUEVSQ0VOVElMRSA9IDk5LjU7XG5jb25zdCBNQVhfSU5TRVJUX1NJWkUgPSAzMDAwMDsgIC8vIGlnbm9yZSBpbnNlcnRzIGxhcmdlciB0aGFuIHRoaXMgaW4gY2FsY3VsYXRpb25zXG5jb25zdCBNSU5fUkVBRFNfRk9SX09VVExJRVJTID0gNTAwOyAgLy8gbWluaW11bSByZWFkcyBmb3IgcmVsaWFibGUgc3RhdHNcblxuZXhwb3J0IHR5cGUgSW5zZXJ0U3RhdHMgPSB7XG4gIG1pbk91dGxpZXJTaXplOiBudW1iZXI7XG4gIG1heE91dGxpZXJTaXplOiBudW1iZXI7XG59O1xuXG4vLyBUaGlzIGNsYXNzIHByb3ZpZGVzIGRhdGEgbWFuYWdlbWVudCBmb3IgdGhlIHZpc3VhbGl6YXRpb24sIGdyb3VwaW5nIHBhaXJlZFxuLy8gcmVhZHMgYW5kIG1hbmFnaW5nIHRoZSBwaWxldXAuXG5jbGFzcyBQaWxldXBDYWNoZSBleHRlbmRzIEFic3RyYWN0Q2FjaGU8VmlzdWFsQWxpZ25tZW50PiB7XG4gIC8vIG1hcHMgZ3JvdXBLZXkgdG8gVmlzdWFsR3JvdXBcbiAgZ3JvdXBzOiB7W2tleTogc3RyaW5nXTogVmlzdWFsR3JvdXA8VmlzdWFsQWxpZ25tZW50Pn07XG4gIHJlZlRvUGlsZXVwOiB7W2tleTogc3RyaW5nXTogQXJyYXk8SW50ZXJ2YWxbXT59O1xuICByZWZlcmVuY2VTb3VyY2U6IFR3b0JpdFNvdXJjZTtcbiAgdmlld0FzUGFpcnM6IGJvb2xlYW47XG4gIF9pbnNlcnRTdGF0czogP0luc2VydFN0YXRzO1xuXG4gIGNvbnN0cnVjdG9yKHJlZmVyZW5jZVNvdXJjZTogVHdvQml0U291cmNlLCB2aWV3QXNQYWlyczogYm9vbGVhbikge1xuICAgIHN1cGVyKHJlZmVyZW5jZVNvdXJjZSk7XG4gICAgdGhpcy52aWV3QXNQYWlycyA9IHZpZXdBc1BhaXJzO1xuICAgIHRoaXMuX2luc2VydFN0YXRzID0gbnVsbDtcbiAgfVxuXG4gIC8vIHJlYWQgbmFtZSB3b3VsZCBtYWtlIGEgZ29vZCBrZXksIGJ1dCBwYWlyZWQgcmVhZHMgZnJvbSBkaWZmZXJlbnQgY29udGlnc1xuICAvLyBzaG91bGRuJ3QgYmUgZ3JvdXBlZCB2aXN1YWxseS4gSGVuY2Ugd2UgdXNlIHJlYWQgbmFtZSArIGNvbnRpZy5cbiAgZ3JvdXBLZXkocmVhZDogQWxpZ25tZW50KTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy52aWV3QXNQYWlycykge1xuICAgICAgcmV0dXJuIGAke3JlYWQubmFtZX06JHtyZWFkLnJlZn1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVhZC5nZXRLZXkoKTtcbiAgICB9XG4gIH1cblxuICAvLyBMb2FkIGEgbmV3IHJlYWQgaW50byB0aGUgdmlzdWFsaXphdGlvbiBjYWNoZS5cbiAgLy8gQ2FsbGluZyB0aGlzIG11bHRpcGxlIHRpbWVzIHdpdGggdGhlIHNhbWUgcmVhZCBpcyBhIG5vLW9wLlxuICBhZGRBbGlnbm1lbnQocmVhZDogQWxpZ25tZW50KSB7XG4gICAgdGhpcy5faW5zZXJ0U3RhdHMgPSBudWxsOyAgLy8gaW52YWxpZGF0ZVxuICAgIHZhciBrZXkgPSB0aGlzLmdyb3VwS2V5KHJlYWQpLFxuICAgICAgICByYW5nZSA9IHJlYWQuZ2V0SW50ZXJ2YWwoKTtcblxuICAgIGlmICghKGtleSBpbiB0aGlzLmdyb3VwcykpIHtcbiAgICAgIHRoaXMuZ3JvdXBzW2tleV0gPSB7XG4gICAgICAgIGtleToga2V5LFxuICAgICAgICByb3c6IC0xLCAgLy8gVEJEXG4gICAgICAgIGluc2VydDogbnVsbCwgIC8vIFRCRFxuICAgICAgICBzcGFuOiByYW5nZSxcbiAgICAgICAgaXRlbXM6IFtdXG4gICAgICB9O1xuICAgIH1cbiAgICB2YXIgZ3JvdXAgPSB0aGlzLmdyb3Vwc1trZXldO1xuXG4gICAgaWYgKF8uZmluZChncm91cC5pdGVtcywgYSA9PiBhLnJlYWQgPT0gcmVhZCkpIHtcbiAgICAgIHJldHVybjsgIC8vIHdlJ3ZlIGFscmVhZHkgZ290IGl0LlxuICAgIH1cblxuICAgIHZhciBvcEluZm8gPSBnZXRPcEluZm8ocmVhZCwgdGhpcy5yZWZlcmVuY2VTb3VyY2UpO1xuICAgIHZhciB2aXN1YWxBbGlnbm1lbnQgPSB7XG4gICAgICByZWFkLFxuICAgICAgc3RyYW5kOiByZWFkLmdldFN0cmFuZCgpLFxuICAgICAgcmVmTGVuZ3RoOiByYW5nZS5sZW5ndGgoKSxcbiAgICAgIG9wczogb3BJbmZvLm9wcyxcbiAgICAgIG1pc21hdGNoZXM6IG9wSW5mby5taXNtYXRjaGVzXG4gICAgfTtcbiAgICBncm91cC5pdGVtcy5wdXNoKHZpc3VhbEFsaWdubWVudCk7XG5cbiAgICB2YXIgbWF0ZUludGVydmFsID0gbnVsbDtcbiAgICBpZiAoZ3JvdXAuaXRlbXMubGVuZ3RoID09IDEpIHtcbiAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IHJlYWQgaW4gdGhlIGdyb3VwLiBJbmZlciBpdHMgc3BhbiBmcm9tIGl0cyBtYXRlIHByb3BlcnRpZXMuXG4gICAgICAvLyBUT0RPOiBpZiB0aGUgbWF0ZSBBbGlnbm1lbnQgaXMgYWxzbyBhdmFpbGFibGUsIGl0IHdvdWxkIGJlIGJldHRlciB0byB1c2UgdGhhdC5cbiAgICAgIGlmICh0aGlzLnZpZXdBc1BhaXJzKSB7XG4gICAgICAgIHZhciBtYXRlUHJvcHMgPSByZWFkLmdldE1hdGVQcm9wZXJ0aWVzKCk7XG4gICAgICAgIHZhciBpbnRlcnZhbHMgPSBbcmFuZ2VdO1xuICAgICAgICBpZiAobWF0ZVByb3BzICYmIG1hdGVQcm9wcy5yZWYgJiYgbWF0ZVByb3BzLnJlZiA9PSByZWFkLnJlZikge1xuICAgICAgICAgIG1hdGVJbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChtYXRlUHJvcHMucmVmLCBtYXRlUHJvcHMucG9zLCBtYXRlUHJvcHMucG9zICsgcmFuZ2UubGVuZ3RoKCkpO1xuICAgICAgICAgIGludGVydmFscy5wdXNoKG1hdGVJbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgZ3JvdXAgPSBfLmV4dGVuZChncm91cCwgc3BhbkFuZEluc2VydChpbnRlcnZhbHMpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdyb3VwLnNwYW4gPSByYW5nZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCEocmVhZC5yZWYgaW4gdGhpcy5yZWZUb1BpbGV1cCkpIHtcbiAgICAgICAgdGhpcy5yZWZUb1BpbGV1cFtyZWFkLnJlZl0gPSBbXTtcbiAgICAgIH1cbiAgICAgIHZhciBwaWxldXAgPSB0aGlzLnJlZlRvUGlsZXVwW3JlYWQucmVmXTtcbiAgICAgIGdyb3VwLnJvdyA9IGFkZFRvUGlsZXVwKGdyb3VwLnNwYW4uaW50ZXJ2YWwsIHBpbGV1cCk7XG4gICAgfSBlbHNlIGlmIChncm91cC5pdGVtcy5sZW5ndGggPT0gMikge1xuICAgICAgLy8gUmVmaW5lIHRoZSBjb25uZWN0b3JcbiAgICAgIG1hdGVJbnRlcnZhbCA9IGdyb3VwLml0ZW1zWzBdLnJlYWQuZ2V0SW50ZXJ2YWwoKTtcbiAgICAgIHZhciB7c3BhbiwgaW5zZXJ0fSA9IHNwYW5BbmRJbnNlcnQoW3JhbmdlLCBtYXRlSW50ZXJ2YWxdKTtcbiAgICAgIGdyb3VwLmluc2VydCA9IGluc2VydDtcbiAgICAgIGlmIChpbnNlcnQpIHtcbiAgICAgICAgZ3JvdXAuc3BhbiA9IHNwYW47XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHRoaXMgbXVzdCBiZSBhIGNoaW1lcmljIHJlYWQuXG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlcyByZWZlcmVuY2UgbWlzbWF0Y2ggaW5mb3JtYXRpb24gZm9yIHByZXZpb3VzbHktbG9hZGVkIHJlYWRzLlxuICB1cGRhdGVNaXNtYXRjaGVzKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgZm9yICh2YXIgayBpbiB0aGlzLmdyb3Vwcykge1xuICAgICAgdmFyIHJlYWRzID0gdGhpcy5ncm91cHNba10uaXRlbXM7XG4gICAgICBmb3IgKHZhciB2UmVhZCBvZiByZWFkcykge1xuICAgICAgICB2YXIgcmVhZCA9IHZSZWFkLnJlYWQ7XG4gICAgICAgIGlmIChyZWFkLmdldEludGVydmFsKCkuaW50ZXJzZWN0cyhyYW5nZSkpIHtcbiAgICAgICAgICB2YXIgb3BJbmZvID0gZ2V0T3BJbmZvKHJlYWQsIHRoaXMucmVmZXJlbmNlU291cmNlKTtcbiAgICAgICAgICB2UmVhZC5taXNtYXRjaGVzID0gb3BJbmZvLm1pc21hdGNoZXM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBSZS1zb3J0IHRoZSBwaWxldXAgc28gdGhhdCByZWFkcyBvdmVybGFwcGluZyB0aGUgbG9jdXMgYXJlIG9uIHRvcC5cbiAgc29ydFJlYWRzQXQoY29udGlnOiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIpIHtcbiAgICAvLyBTdHJhdGVneTogRm9yIGVhY2ggcGlsZXVwIHJvdywgZGV0ZXJtaW5lIHdoZXRoZXIgaXQgb3ZlcmxhcHMgdGhlIGxvY3VzLlxuICAgIC8vIFRoZW4gc29ydCB0aGUgYXJyYXkgaW5kaWNlcyB0byBnZXQgYSBwZXJtdXRhdGlvbi5cbiAgICAvLyBCdWlsZCBhIG5ldyBwaWxldXAgYnkgcGVybXV0aW5nIHRoZSBvbGQgcGlsZXVwXG4gICAgLy8gVXBkYXRlIGFsbCB0aGUgYHJvd2AgcHJvcGVydGllcyBvZiB0aGUgcmVsZXZhbnQgdmlzdWFsIGdyb3Vwc1xuXG4gICAgY29uc3QgcGlsZXVwID0gdGhpcy5waWxldXBGb3JSZWYoY29udGlnKTtcblxuICAgIC8vIEZpbmQgdGhlIGdyb3VwcyBmb3Igd2hpY2ggYW4gYWxpZ25tZW50IG92ZXJsYXBzIHRoZSBsb2N1cy5cbiAgICB2YXIgZ3JvdXBzID0gXy5maWx0ZXIodGhpcy5ncm91cHMsXG4gICAgICAgICAgZ3JvdXAgPT4gXy5hbnkoZ3JvdXAuaXRlbXMsXG4gICAgICAgICAgICAgIGEgPT4gYS5yZWFkLmdldEludGVydmFsKCkuY29udGFpbnNMb2N1cyhjb250aWcsIHBvc2l0aW9uKSkpO1xuXG4gICAgLy8gRm9yIGVhY2ggcm93LCBmaW5kIHRoZSBsZWZ0LW1vc3QgcG9pbnQgKGZvciBzb3J0aW5nKS5cbiAgICB2YXIgcm93c092ZXJsYXBwaW5nID1cbiAgICAgICAgXy5tYXBPYmplY3QoXy5ncm91cEJ5KGdyb3VwcywgZyA9PiBnLnJvdyksXG4gICAgICAgICAgICAgICAgICAgIGdzID0+IF8ubWluKGdzLCBnPT5nLnNwYW4uc3RhcnQoKSkuc3Bhbi5zdGFydCgpKTtcblxuICAgIC8vIFNvcnQgZ3JvdXBzIGJ5IHdoZXRoZXIgdGhleSBvdmVybGFwLCB0aGVuIGJ5IHRoZWlyIHN0YXJ0LlxuICAgIC8vIFRPRE86IGlzIHRoZXJlIGFuIGVhc2llciB3YXkgdG8gY29uc3RydWN0IHRoZSBmb3J3YXJkIG1hcCBkaXJlY3RseT9cbiAgICB2YXIgcGVybXV0YXRpb24gPSBfLnNvcnRCeShfLnJhbmdlKDAsIHBpbGV1cC5sZW5ndGgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeCA9PiByb3dzT3ZlcmxhcHBpbmdbaWR4XSB8fCBJbmZpbml0eSk7XG4gICAgdmFyIG9sZFRvTmV3ID0gKFtdOiBudW1iZXJbXSk7XG4gICAgcGVybXV0YXRpb24uZm9yRWFjaCgob2xkSW5kZXgsIG5ld0luZGV4KSA9PiB7IG9sZFRvTmV3W29sZEluZGV4XSA9IG5ld0luZGV4OyB9KTtcbiAgICB2YXIgbmV3UGlsZXVwID0gXy5yYW5nZSgwLCBwaWxldXAubGVuZ3RoKS5tYXAoaSA9PiBwaWxldXBbb2xkVG9OZXdbaV1dKTtcblxuICAgIHZhciBub3JtUmVmID0gY29udGlnIGluIHRoaXMucmVmVG9QaWxldXAgPyBjb250aWcgOiB1dGlscy5hbHRDb250aWdOYW1lKGNvbnRpZyk7XG4gICAgdGhpcy5yZWZUb1BpbGV1cFtub3JtUmVmXSA9IG5ld1BpbGV1cDtcblxuICAgIF8uZWFjaCh0aGlzLmdyb3VwcywgZyA9PiB7XG4gICAgICBpZiAoZy5zcGFuLmNock9uQ29udGlnKGNvbnRpZykpIHtcbiAgICAgICAgZy5yb3cgPSBvbGRUb05ld1tnLnJvd107XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXRJbnNlcnRTdGF0cygpOiBJbnNlcnRTdGF0cyB7XG4gICAgaWYgKHRoaXMuX2luc2VydFN0YXRzKSByZXR1cm4gdGhpcy5faW5zZXJ0U3RhdHM7XG4gICAgdmFyIGluc2VydHMgPSBfLm1hcCh0aGlzLmdyb3VwcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGcgPT4gZy5pdGVtc1swXS5yZWFkLmdldEluZmVycmVkSW5zZXJ0U2l6ZSgpKVxuICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoeCA9PiB4IDwgTUFYX0lOU0VSVF9TSVpFKTtcbiAgICBjb25zdCBpbnNlcnRTdGF0cyA9IGluc2VydHMubGVuZ3RoID49IE1JTl9SRUFEU19GT1JfT1VUTElFUlMgPyB7XG4gICAgICBtaW5PdXRsaWVyU2l6ZTogdXRpbHMuY29tcHV0ZVBlcmNlbnRpbGUoaW5zZXJ0cywgTUlOX09VVExJRVJfUEVSQ0VOVElMRSksXG4gICAgICBtYXhPdXRsaWVyU2l6ZTogdXRpbHMuY29tcHV0ZVBlcmNlbnRpbGUoaW5zZXJ0cywgTUFYX09VVExJRVJfUEVSQ0VOVElMRSlcbiAgICB9IDoge1xuICAgICAgbWluT3V0bGllclNpemU6IDAsXG4gICAgICBtYXhPdXRsaWVyU2l6ZTogSW5maW5pdHlcbiAgICB9O1xuXG4gICAgdGhpcy5faW5zZXJ0U3RhdHMgPSBpbnNlcnRTdGF0cztcbiAgICByZXR1cm4gaW5zZXJ0U3RhdHM7XG4gIH1cbn1cblxuLy8gSGVscGVyIG1ldGhvZCBmb3IgYWRkUmVhZC5cbi8vIEdpdmVuIDEtMiBpbnRlcnZhbHMsIGNvbXB1dGUgdGhlaXIgc3BhbiBhbmQgaW5zZXJ0IChpbnRlcnZhbCBiZXR3ZWVuIHRoZW0pLlxuLy8gRm9yIG9uZSBpbnRlcnZhbCwgdGhlc2UgYXJlIGJvdGggdHJpdmlhbC5cbi8vIFRPRE86IHdoYXQgdGhpcyBjYWxscyBhbiBcImluc2VydFwiIGlzIG5vdCB3aGF0IG1vc3QgcGVvcGxlIG1lYW4gYnkgdGhhdC5cbmZ1bmN0aW9uIHNwYW5BbmRJbnNlcnQoaW50ZXJ2YWxzOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10pIHtcbiAgaWYgKGludGVydmFscy5sZW5ndGggPT0gMSkge1xuICAgIHJldHVybiB7aW5zZXJ0OiBudWxsLCBzcGFuOiBpbnRlcnZhbHNbMF19O1xuICB9IGVsc2UgaWYgKGludGVydmFscy5sZW5ndGggIT0yKSB7XG4gICAgdGhyb3cgYENhbGxlZCBzcGFuQW5kSW5zZXJ0IHdpdGggJHtpbnRlcnZhbHMubGVuZ3RofSBcXG5vdGluIFsxLCAyXWA7XG4gIH1cblxuICBpZiAoIWludGVydmFsc1swXS5jaHJPbkNvbnRpZyhpbnRlcnZhbHNbMV0uY29udGlnKSkge1xuICAgIHJldHVybiBzcGFuQW5kSW5zZXJ0KFtpbnRlcnZhbHNbMF1dKTtcbiAgfVxuICB2YXIgaXYxID0gaW50ZXJ2YWxzWzBdLmludGVydmFsLFxuICAgICAgaXYyID0gaW50ZXJ2YWxzWzFdLmludGVydmFsLFxuICAgICAgaW5zZXJ0ID0gaXYxLnN0YXJ0IDwgaXYyLnN0YXJ0ID9cbiAgICAgICAgICBuZXcgSW50ZXJ2YWwoaXYxLnN0b3AsIGl2Mi5zdGFydCkgOlxuICAgICAgICAgIG5ldyBJbnRlcnZhbChpdjIuc3RvcCwgaXYxLnN0YXJ0KTtcblxuICB2YXIgc3BhbiA9IEludGVydmFsLmJvdW5kaW5nSW50ZXJ2YWwoW2l2MSwgaXYyXSk7XG4gIHJldHVybiB7XG4gICAgaW5zZXJ0LFxuICAgIHNwYW46IG5ldyBDb250aWdJbnRlcnZhbChpbnRlcnZhbHNbMF0uY29udGlnLCBzcGFuLnN0YXJ0LCBzcGFuLnN0b3ApXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUGlsZXVwQ2FjaGU7XG4iLCIvKipcbiAqIFBpbGV1cCB2aXN1YWxpemF0aW9uIG9mIEJBTSBzb3VyY2VzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7RGF0YVNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9EYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtBbGlnbm1lbnR9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgdHlwZSB7QmFzZVBhaXJ9IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuaW1wb3J0IHR5cGUge1Zpc3VhbEFsaWdubWVudCwgSW5zZXJ0U3RhdHN9IGZyb20gJy4vUGlsZXVwQ2FjaGUnO1xuaW1wb3J0IHR5cGUge1Zpc3VhbEdyb3VwfSBmcm9tICcuL0Fic3RyYWN0Q2FjaGUnO1xuaW1wb3J0IHR5cGUge0RhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuaW1wb3J0IHR5cGUge1NjYWxlfSBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHR5cGUge1N0YXRlLCBOZXR3b3JrU3RhdHVzfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc2hhbGxvd0VxdWFscyBmcm9tICdzaGFsbG93LWVxdWFscyc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuaW1wb3J0IHNjYWxlIGZyb20gJy4uL3NjYWxlJztcbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQge0NpZ2FyT3AsIHlGb3JSb3d9IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBEaXNwbGF5TW9kZSBmcm9tICcuL0Rpc3BsYXlNb2RlJztcbmltcG9ydCBQaWxldXBDYWNoZSBmcm9tICcuL1BpbGV1cENhY2hlJztcbmltcG9ydCBUaWxlZENhbnZhcyBmcm9tICcuL1RpbGVkQ2FudmFzJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgZGF0YUNhbnZhcyBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuXG5cbnZhciBSRUFEX1NUUkFORF9BUlJPV19XSURUSCA9IDU7XG5cbi8vIFBoYW50b21KUyBkb2VzIG5vdCBzdXBwb3J0IHNldExpbmVEYXNoLlxuLy8gTm9kZSBkb2Vzbid0IGV2ZW4ga25vdyBhYm91dCB0aGUgc3ltYm9sLlxudmFyIFNVUFBPUlRTX0RBU0hFUyA9IHR5cGVvZihDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICEhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5zZXRMaW5lRGFzaDtcblxuY2xhc3MgUGlsZXVwVGlsZWRDYW52YXMgZXh0ZW5kcyBUaWxlZENhbnZhcyB7XG4gIGNhY2hlOiBQaWxldXBDYWNoZTtcbiAgb3B0aW9uczogT2JqZWN0O1xuXG4gIGNvbnN0cnVjdG9yKGNhY2hlOiBQaWxldXBDYWNoZSwgb3B0aW9uczogT2JqZWN0KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIHVwZGF0ZShuZXdPcHRpb25zOiBPYmplY3QpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBuZXdPcHRpb25zO1xuICB9XG5cbiAgaGVpZ2h0Rm9yUmVmKHJlZjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5waWxldXBIZWlnaHRGb3JSZWYocmVmKSAqXG4gICAgICAgICAgICAgICAgICAgIChzdHlsZS5SRUFEX0hFSUdIVCArIHN0eWxlLlJFQURfU1BBQ0lORyk7XG4gIH1cblxuICByZW5kZXIoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgc2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikge1xuICAgIHZhciByZWxheGVkUmFuZ2UgPVxuICAgICAgICBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCgpIC0gMSwgcmFuZ2Uuc3RvcCgpICsgMSk7XG4gICAgdmFyIHZHcm91cHMgPSB0aGlzLmNhY2hlLmdldEdyb3Vwc092ZXJsYXBwaW5nKHJlbGF4ZWRSYW5nZSk7XG4gICAgdmFyIGluc2VydFN0YXRzID0gdGhpcy5vcHRpb25zLmNvbG9yQnlJbnNlcnQgPyB0aGlzLmNhY2hlLmdldEluc2VydFN0YXRzKCkgOiBudWxsO1xuICAgIHJlbmRlclBpbGV1cChjdHgsIHNjYWxlLCByZWxheGVkUmFuZ2UsIGluc2VydFN0YXRzLCB0aGlzLm9wdGlvbnMuY29sb3JCeVN0cmFuZCwgdkdyb3Vwcyk7XG4gIH1cbn1cblxuXG4vLyBTaG91bGQgdGhlIENpZ2FyIG9wIGJlIHJlbmRlcmVkIHRvIHRoZSBzY3JlZW4/XG5mdW5jdGlvbiBpc1JlbmRlcmVkKG9wKSB7XG4gIHJldHVybiAob3Aub3AgPT0gQ2lnYXJPcC5NQVRDSCB8fFxuICAgICAgICAgIG9wLm9wID09IENpZ2FyT3AuREVMRVRFIHx8XG4gICAgICAgICAgb3Aub3AgPT0gQ2lnYXJPcC5JTlNFUlQpO1xufVxuXG4vLyBSZW5kZXIgYSBwb3J0aW9uIG9mIHRoZSBwaWxldXAgaW50byB0aGUgY2FudmFzLlxuZnVuY3Rpb24gcmVuZGVyUGlsZXVwKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0U3RhdHM6ID9JbnNlcnRTdGF0cyxcbiAgICAgICAgICAgICAgICAgICAgICBjb2xvckJ5U3RyYW5kOiBib29sZWFuLFxuICAgICAgICAgICAgICAgICAgICAgIHZHcm91cHM6IFZpc3VhbEdyb3VwPFZpc3VhbEFsaWdubWVudD5bXSkge1xuICAvLyBTaG91bGQgbWlzbWF0Y2hlZCBiYXNlIHBhaXJzIGJlIHNob3duIGFzIGJsb2NrcyBvZiBjb2xvciBvciBhcyBsZXR0ZXJzP1xuICB2YXIgcHhQZXJMZXR0ZXIgPSBzY2FsZSgxKSAtIHNjYWxlKDApLFxuICAgICAgbW9kZSA9IERpc3BsYXlNb2RlLmdldERpc3BsYXlNb2RlKHB4UGVyTGV0dGVyKSxcbiAgICAgIHNob3dUZXh0ID0gRGlzcGxheU1vZGUuaXNUZXh0KG1vZGUpO1xuXG4gIGZ1bmN0aW9uIGRyYXdBcnJvdyhwb3M6IG51bWJlciwgcmVmTGVuZ3RoOiBudW1iZXIsIHRvcDogbnVtYmVyLCBkaXJlY3Rpb246ICdMJyB8ICdSJykge1xuICAgIHZhciBsZWZ0ID0gc2NhbGUocG9zICsgMSksXG4gICAgICAgIHJpZ2h0ID0gc2NhbGUocG9zICsgcmVmTGVuZ3RoICsgMSksXG4gICAgICAgIGJvdHRvbSA9IHRvcCArIHN0eWxlLlJFQURfSEVJR0hULFxuICAgICAgICAvLyBBcnJvd2hlYWRzIGJlY29tZSBhIGRpc3RyYWN0aW9uIGFzIHlvdSB6b29tIG91dCBhbmQgdGhlIHJlYWRzIGdldFxuICAgICAgICAvLyBzaG9ydGVyLiBUaGV5IHNob3VsZCBuZXZlciBiZSBtb3JlIHRoYW4gMS82IHRoZSByZWFkIGxlbmd0aC5cbiAgICAgICAgYXJyb3dTaXplID0gTWF0aC5taW4oUkVBRF9TVFJBTkRfQVJST1dfV0lEVEgsIChyaWdodCAtIGxlZnQpIC8gNik7XG5cbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgaWYgKGRpcmVjdGlvbiA9PSAnUicpIHtcbiAgICAgIGN0eC5tb3ZlVG8obGVmdCwgdG9wKTtcbiAgICAgIGN0eC5saW5lVG8ocmlnaHQgLSBhcnJvd1NpemUsIHRvcCk7XG4gICAgICBjdHgubGluZVRvKHJpZ2h0LCAodG9wICsgYm90dG9tKSAvIDIpO1xuICAgICAgY3R4LmxpbmVUbyhyaWdodCAtIGFycm93U2l6ZSwgYm90dG9tKTtcbiAgICAgIGN0eC5saW5lVG8obGVmdCwgYm90dG9tKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4Lm1vdmVUbyhyaWdodCwgdG9wKTtcbiAgICAgIGN0eC5saW5lVG8obGVmdCArIGFycm93U2l6ZSwgdG9wKTtcbiAgICAgIGN0eC5saW5lVG8obGVmdCwgKHRvcCArIGJvdHRvbSkgLyAyKTtcbiAgICAgIGN0eC5saW5lVG8obGVmdCArIGFycm93U2l6ZSwgYm90dG9tKTtcbiAgICAgIGN0eC5saW5lVG8ocmlnaHQsIGJvdHRvbSk7XG4gICAgfVxuICAgIGN0eC5maWxsKCk7XG4gIH1cblxuICBmdW5jdGlvbiBkcmF3U2VnbWVudChvcCwgeSwgdlJlYWQpIHtcbiAgICBzd2l0Y2ggKG9wLm9wKSB7XG4gICAgICBjYXNlIENpZ2FyT3AuTUFUQ0g6XG4gICAgICAgIGlmIChvcC5hcnJvdykge1xuICAgICAgICAgIGRyYXdBcnJvdyhvcC5wb3MsIG9wLmxlbmd0aCwgeSwgb3AuYXJyb3cpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB4ID0gc2NhbGUob3AucG9zICsgMSk7XG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHgsIHksIHNjYWxlKG9wLnBvcyArIG9wLmxlbmd0aCArIDEpIC0geCwgc3R5bGUuUkVBRF9IRUlHSFQpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIENpZ2FyT3AuREVMRVRFOlxuICAgICAgICB2YXIgeDEgPSBzY2FsZShvcC5wb3MgKyAxKSxcbiAgICAgICAgICAgIHgyID0gc2NhbGUob3AucG9zICsgMSArIG9wLmxlbmd0aCksXG4gICAgICAgICAgICB5cCA9IHkgKyBzdHlsZS5SRUFEX0hFSUdIVCAvIDIgLSAwLjU7XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5ERUxFVEVfQ09MT1I7XG4gICAgICAgIGN0eC5maWxsUmVjdCh4MSwgeXAsIHgyIC0geDEsIDEpO1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBDaWdhck9wLklOU0VSVDpcbiAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLklOU0VSVF9DT0xPUjtcbiAgICAgICAgdmFyIHgwID0gc2NhbGUob3AucG9zICsgMSkgLSAyLCAgLy8gdG8gY292ZXIgYSBiaXQgb2YgdGhlIHByZXZpb3VzIHNlZ21lbnRcbiAgICAgICAgICAgIHkxID0geSAtIDEsXG4gICAgICAgICAgICB5MiA9IHkgKyBzdHlsZS5SRUFEX0hFSUdIVCArIDI7XG4gICAgICAgIGN0eC5maWxsUmVjdCh4MCwgeTEsIDEsIHkyIC0geTEpO1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkcmF3QWxpZ25tZW50KHZSZWFkOiBWaXN1YWxBbGlnbm1lbnQsIHk6IG51bWJlcikge1xuICAgIGN0eC5wdXNoT2JqZWN0KHZSZWFkKTtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGlmIChjb2xvckJ5U3RyYW5kKSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gdlJlYWQuc3RyYW5kID09ICcrJyA/XG4gICAgICAgICAgc3R5bGUuQUxJR05NRU5UX1BMVVNfU1RSQU5EX0NPTE9SIDpcbiAgICAgICAgICBzdHlsZS5BTElHTk1FTlRfTUlOVVNfU1RSQU5EX0NPTE9SO1xuICAgIH1cbiAgICB2UmVhZC5vcHMuZm9yRWFjaChvcCA9PiB7XG4gICAgICBpZiAoaXNSZW5kZXJlZChvcCkpIHtcbiAgICAgICAgZHJhd1NlZ21lbnQob3AsIHksIHZSZWFkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB2UmVhZC5taXNtYXRjaGVzLmZvckVhY2goYnAgPT4gcmVuZGVyTWlzbWF0Y2goYnAsIHkpKTtcbiAgICBjdHgucmVzdG9yZSgpO1xuICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYXdHcm91cCh2R3JvdXA6IFZpc3VhbEdyb3VwPFZpc3VhbEFsaWdubWVudD4pIHtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGlmIChpbnNlcnRTdGF0cyAmJiB2R3JvdXAuaW5zZXJ0KSB7XG4gICAgICB2YXIgbGVuID0gdkdyb3VwLnNwYW4ubGVuZ3RoKCk7XG4gICAgICBpZiAobGVuIDwgaW5zZXJ0U3RhdHMubWluT3V0bGllclNpemUpIHtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdibHVlJztcbiAgICAgIH0gZWxzZSBpZiAobGVuID4gaW5zZXJ0U3RhdHMubWF4T3V0bGllclNpemUpIHtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLkFMSUdOTUVOVF9DT0xPUjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLkFMSUdOTUVOVF9DT0xPUjtcbiAgICB9XG4gICAgdmFyIHkgPSB5Rm9yUm93KHZHcm91cC5yb3cpO1xuICAgIGN0eC5wdXNoT2JqZWN0KHZHcm91cCk7XG4gICAgaWYgKHZHcm91cC5pbnNlcnQpIHtcbiAgICAgIHZhciBzcGFuID0gdkdyb3VwLmluc2VydCxcbiAgICAgICAgICB4MSA9IHNjYWxlKHNwYW4uc3RhcnQgKyAxKSxcbiAgICAgICAgICB4MiA9IHNjYWxlKHNwYW4uc3RvcCArIDEpO1xuICAgICAgY3R4LmZpbGxSZWN0KHgxLCB5ICsgc3R5bGUuUkVBRF9IRUlHSFQgLyAyIC0gMC41LCB4MiAtIHgxLCAxKTtcbiAgICB9XG4gICAgdkdyb3VwLml0ZW1zLmZvckVhY2godlJlYWQgPT4gZHJhd0FsaWdubWVudCh2UmVhZCwgeSkpO1xuICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyTWlzbWF0Y2goYnA6IEJhc2VQYWlyLCB5OiBudW1iZXIpIHtcbiAgICAvLyBUaGlzIGNhbiBoYXBwZW4gaWYgdGhlIG1pc21hdGNoIGlzIGluIGEgZGlmZmVyZW50IHRpbGUsIGZvciBleGFtcGxlLlxuICAgIGlmICghcmFuZ2UuaW50ZXJ2YWwuY29udGFpbnMoYnAucG9zKSkgcmV0dXJuO1xuXG4gICAgY3R4LnB1c2hPYmplY3QoYnApO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLkJBU0VfQ09MT1JTW2JwLmJhc2VQYWlyXTtcbiAgICBjdHguZ2xvYmFsQWxwaGEgPSBvcGFjaXR5Rm9yUXVhbGl0eShicC5xdWFsaXR5KTtcbiAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgaWYgKHNob3dUZXh0KSB7XG4gICAgICAvLyAwLjUgPSBjZW50ZXJlZFxuICAgICAgY3R4LmZpbGxUZXh0KGJwLmJhc2VQYWlyLCBzY2FsZSgxICsgMC41ICsgYnAucG9zKSwgeSArIHN0eWxlLlJFQURfSEVJR0hUIC0gMik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0eC5maWxsUmVjdChzY2FsZSgxICsgYnAucG9zKSwgeSwgIHB4UGVyTGV0dGVyIC0gMSwgc3R5bGUuUkVBRF9IRUlHSFQpO1xuICAgIH1cbiAgICBjdHgucmVzdG9yZSgpO1xuICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgfVxuXG4gIGN0eC5mb250ID0gc3R5bGUuVEVYVF9TVFlMRShEaXNwbGF5TW9kZS5USUdIVCwgc3R5bGUuUkVBRF9IRUlHSFQgLSAxKTtcbiAgdkdyb3Vwcy5mb3JFYWNoKHZHcm91cCA9PiBkcmF3R3JvdXAodkdyb3VwKSk7XG59XG5cbi8vIFRoaXMgaXMgYWRhcHRlZCBmcm9tIElHVi5cbnZhciBNSU5fUSA9IDUsICAvLyB0aGVzZSBhcmUgUGhyZWQtc2NhbGVkIHNjb3Jlc1xuICAgIE1BWF9RID0gMjAsXG4gICAgUV9TQ0FMRSA9IHNjYWxlLmxpbmVhcigpXG4gICAgICAgICAgICAgICAgICAgLmRvbWFpbihbTUlOX1EsIE1BWF9RXSlcbiAgICAgICAgICAgICAgICAgICAucmFuZ2UoWzAuMSwgMC45XSlcbiAgICAgICAgICAgICAgICAgICAuY2xhbXAodHJ1ZSk7ICAvLyBjbGFtcCBvdXRwdXQgdG8gWzAuMSwgMC45XVxuZnVuY3Rpb24gb3BhY2l0eUZvclF1YWxpdHkocXVhbGl0eTogbnVtYmVyKTogbnVtYmVyIHtcbiAgdmFyIGFscGhhID0gUV9TQ0FMRShxdWFsaXR5KTtcblxuICAvLyBSb3VuZCBhbHBoYSB0byBuZWFyZXN0IDAuMVxuICBhbHBoYSA9IE1hdGgucm91bmQoYWxwaGEgKiAxMCArIDAuNSkgLyAxMC4wO1xuICByZXR1cm4gTWF0aC5taW4oMS4wLCBhbHBoYSk7XG59XG5cbmNsYXNzIFBpbGV1cFRyYWNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFZpelByb3BzPERhdGFTb3VyY2U8QWxpZ25tZW50Pj4sIFN0YXRlPiB7XG4gIHByb3BzOiBWaXpQcm9wczxEYXRhU291cmNlPEFsaWdubWVudD4+O1xuICBzdGF0ZTogU3RhdGU7XG4gIGNhY2hlOiBQaWxldXBDYWNoZTtcbiAgdGlsZXM6IFBpbGV1cFRpbGVkQ2FudmFzO1xuICBzdGF0aWMgZGVmYXVsdE9wdGlvbnM6IHsgdmlld0FzUGFpcnM6IGJvb2xlYW4gfTtcbiAgc3RhdGljIGdldE9wdGlvbnNNZW51OiAob3B0aW9uczogT2JqZWN0KSA9PiBhbnk7XG4gIHN0YXRpYyBoYW5kbGVTZWxlY3RPcHRpb246IChrZXk6IHN0cmluZywgb2xkT3B0aW9uczogT2JqZWN0KSA9PiBPYmplY3Q7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFZpelByb3BzPERhdGFTb3VyY2U8QWxpZ25tZW50Pj4pIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5ldHdvcmtTdGF0dXM6IG51bGxcbiAgICB9O1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgLy8gVGhlc2Ugc3R5bGVzIGFsbG93IHZlcnRpY2FsIHNjcm9sbGluZyB0byBzZWUgdGhlIGZ1bGwgcGlsZXVwLlxuICAgIC8vIEFkZGluZyBhIHZlcnRpY2FsIHNjcm9sbGJhciBzaHJpbmtzIHRoZSB2aXNpYmxlIGFyZWEsIGJ1dCB3ZSBoYXZlIHRvIGFjdFxuICAgIC8vIGFzIHRob3VnaCBpdCBkb2Vzbid0LCBzaW5jZSBhZGp1c3RpbmcgdGhlIHNjYWxlIHdvdWxkIHB1dCBpdCBvdXQgb2Ygc3luY1xuICAgIC8vIHdpdGggb3RoZXIgdHJhY2tzLlxuICAgIHZhciBjb250YWluZXJTdHlsZXMgPSB7XG4gICAgICAnaGVpZ2h0JzogJzEwMCUnXG4gICAgfTtcblxuICAgIHZhciBzdGF0dXNFbCA9IG51bGwsXG4gICAgICAgIG5ldHdvcmtTdGF0dXMgPSB0aGlzLnN0YXRlLm5ldHdvcmtTdGF0dXM7XG4gICAgaWYgKG5ldHdvcmtTdGF0dXMpIHtcbiAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5mb3JtYXRTdGF0dXMobmV0d29ya1N0YXR1cyk7XG4gICAgICBzdGF0dXNFbCA9IChcbiAgICAgICAgPGRpdiByZWY9J3N0YXR1cycgY2xhc3NOYW1lPSduZXR3b3JrLXN0YXR1cyc+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J25ldHdvcmstc3RhdHVzLW1lc3NhZ2UnPlxuICAgICAgICAgICAgTG9hZGluZyBhbGlnbm1lbnRz4oCmICh7bWVzc2FnZX0pXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAge3N0YXR1c0VsfVxuICAgICAgICA8ZGl2IHJlZj0nY29udGFpbmVyJyBzdHlsZT17Y29udGFpbmVyU3R5bGVzfT5cbiAgICAgICAgICA8Y2FudmFzIHJlZj0nY2FudmFzJyBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyl9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIGZvcm1hdFN0YXR1cyhzdGF0dXM6IE5ldHdvcmtTdGF0dXMpOiBzdHJpbmcge1xuICAgIGlmIChzdGF0dXMubnVtUmVxdWVzdHMpIHtcbiAgICAgIHZhciBwbHVyYWxTID0gc3RhdHVzLm51bVJlcXVlc3RzID4gMSA/ICdzJyA6ICcnO1xuICAgICAgcmV0dXJuIGBpc3N1ZWQgJHtzdGF0dXMubnVtUmVxdWVzdHN9IHJlcXVlc3Qke3BsdXJhbFN9YDtcbiAgICB9IGVsc2UgaWYgKHN0YXR1cy5zdGF0dXMpIHtcbiAgICAgIHJldHVybiBzdGF0dXMuc3RhdHVzO1xuICAgIH1cbiAgICB0aHJvdyAnaW52YWxpZCc7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmNhY2hlID0gbmV3IFBpbGV1cENhY2hlKHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLCB0aGlzLnByb3BzLm9wdGlvbnMudmlld0FzUGFpcnMpO1xuICAgIHRoaXMudGlsZXMgPSBuZXcgUGlsZXVwVGlsZWRDYW52YXModGhpcy5jYWNoZSwgdGhpcy5wcm9wcy5vcHRpb25zKTtcblxuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXdkYXRhJywgcmFuZ2UgPT4ge1xuICAgICAgdGhpcy51cGRhdGVSZWFkcyhyYW5nZSk7XG4gICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVSYW5nZShyYW5nZSk7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5vbignbmV3ZGF0YScsIHJhbmdlID0+IHtcbiAgICAgIHRoaXMuY2FjaGUudXBkYXRlTWlzbWF0Y2hlcyhyYW5nZSk7XG4gICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVSYW5nZShyYW5nZSk7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV0d29ya3Byb2dyZXNzJywgZSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtuZXR3b3JrU3RhdHVzOiBlfSk7XG4gICAgfSk7XG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ldHdvcmtkb25lJywgZSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtuZXR3b3JrU3RhdHVzOiBudWxsfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgfVxuXG4gIGdldFNjYWxlKCk6IFNjYWxlIHtcbiAgICByZXR1cm4gZDN1dGlscy5nZXRUcmFja1NjYWxlKHRoaXMucHJvcHMucmFuZ2UsIHRoaXMucHJvcHMud2lkdGgpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogYW55LCBwcmV2U3RhdGU6IGFueSkge1xuICAgIHZhciBzaG91bGRVcGRhdGUgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zICE9IHByZXZQcm9wcy5vcHRpb25zKSB7XG4gICAgICB0aGlzLmhhbmRsZU9wdGlvbnNDaGFuZ2UocHJldlByb3BzLm9wdGlvbnMpO1xuICAgICAgc2hvdWxkVXBkYXRlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoIXNoYWxsb3dFcXVhbHModGhpcy5wcm9wcywgcHJldlByb3BzKSB8fFxuICAgICAgICAhc2hhbGxvd0VxdWFscyh0aGlzLnN0YXRlLCBwcmV2U3RhdGUpIHx8XG4gICAgICAgIHNob3VsZFVwZGF0ZSkge1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlT3B0aW9uc0NoYW5nZShvbGRPcHRzOiBPYmplY3QpIHtcbiAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcblxuICAgIGlmIChvbGRPcHRzLnZpZXdBc1BhaXJzICE9IHRoaXMucHJvcHMub3B0aW9ucy52aWV3QXNQYWlycykge1xuICAgICAgdGhpcy5jYWNoZSA9IG5ldyBQaWxldXBDYWNoZSh0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZSwgdGhpcy5wcm9wcy5vcHRpb25zLnZpZXdBc1BhaXJzKTtcbiAgICAgIHRoaXMudGlsZXMgPSBuZXcgUGlsZXVwVGlsZWRDYW52YXModGhpcy5jYWNoZSwgdGhpcy5wcm9wcy5vcHRpb25zKTtcbiAgICAgIHRoaXMudXBkYXRlUmVhZHMoQ29udGlnSW50ZXJ2YWwuZnJvbUdlbm9tZVJhbmdlKHRoaXMucHJvcHMucmFuZ2UpKTtcbiAgICB9IGVsc2UgaWYgKG9sZE9wdHMuY29sb3JCeUluc2VydCAhPSB0aGlzLnByb3BzLm9wdGlvbnMuY29sb3JCeUluc2VydCkge1xuICAgICAgdGhpcy50aWxlcy51cGRhdGUodGhpcy5wcm9wcy5vcHRpb25zKTtcbiAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfSBlbHNlIGlmIChvbGRPcHRzLmhpZGVBbGlnbm1lbnRzICE9IHRoaXMucHJvcHMub3B0aW9ucy5oaWRlQWxpZ25tZW50cykge1xuICAgICAgdGhpcy50aWxlcy51cGRhdGUodGhpcy5wcm9wcy5vcHRpb25zKTtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH1cblxuICAgIGlmIChvbGRPcHRzLnNvcnQgIT0gdGhpcy5wcm9wcy5vcHRpb25zLnNvcnQpIHtcbiAgICAgIHRoaXMuaGFuZGxlU29ydCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIExvYWQgbmV3IHJlYWRzIGludG8gdGhlIHZpc3VhbGl6YXRpb24gY2FjaGUuXG4gIHVwZGF0ZVJlYWRzKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgdmFyIGFueUJlZm9yZSA9IHRoaXMuY2FjaGUuYW55R3JvdXBzT3ZlcmxhcHBpbmcocmFuZ2UpO1xuICAgIHRoaXMucHJvcHMuc291cmNlLmdldEZlYXR1cmVzSW5SYW5nZShyYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKHJlYWQgPT4gdGhpcy5jYWNoZS5hZGRBbGlnbm1lbnQocmVhZCkpO1xuXG4gICAgaWYgKCFhbnlCZWZvcmUgJiYgdGhpcy5jYWNoZS5hbnlHcm91cHNPdmVybGFwcGluZyhyYW5nZSkpIHtcbiAgICAgIC8vIElmIHRoZXNlIGFyZSB0aGUgZmlyc3QgcmVhZHMgdG8gYmUgc2hvd24gaW4gdGhlIHZpc2libGUgcmFuZ2UsXG4gICAgICAvLyB0aGVuIHNvcnQgdGhlbSB0byBoaWdobGlnaHQgcmVhZHMgaW4gdGhlIGNlbnRlci5cbiAgICAgIHRoaXMuaGFuZGxlU29ydCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSB0aGUgdmlzdWFsaXphdGlvbiB0byByZWZsZWN0IHRoZSBjYWNoZWQgcmVhZHMgJlxuICAvLyBjdXJyZW50bHktdmlzaWJsZSByYW5nZS5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gdGhpcy5yZWZzLmNhbnZhcyxcbiAgICAgICAgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgaGVpZ2h0ICYgd2lkdGggYXJlIGtub3duLlxuICAgIGlmICh3aWR0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgdmFyIGN0eCA9IGNhbnZhc1V0aWxzLmdldENvbnRleHQoY2FudmFzKTtcbiAgICB2YXIgZHR4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjdHgpO1xuXG4gICAgdGhpcy5yZW5kZXJTY2VuZShkdHgpO1xuXG4gIH1cblxuICByZW5kZXJTY2VuZShjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICB2YXIgZ2Vub21lUmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlLFxuICAgICAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChnZW5vbWVSYW5nZS5jb250aWcsIGdlbm9tZVJhbmdlLnN0YXJ0LCBnZW5vbWVSYW5nZS5zdG9wKSxcbiAgICAgICAgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCksXG4gICAgICAgIGNhbnZhcyA9IHRoaXMucmVmcy5jYW52YXMsXG4gICAgICAgIHdpZHRoID0gdGhpcy5wcm9wcy53aWR0aDtcblxuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgLy8gZ2V0IHBhcmVudCBvZiBjYW52YXNcbiAgICAvLyBUaGUgdHlwZWNhc3RzIHRocm91Z2ggYGFueWAgYXJlIHRvIGZvb2wgZmxvdy5cbiAgICB2YXIgcGFyZW50ID0gKChkM3V0aWxzLmZpbmRQYXJlbnQoY2FudmFzLCBcInBpbGV1cFwiKSA6IGFueSkgOiBIVE1MQ2FudmFzRWxlbWVudCk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLmhpZGVBbGlnbm1lbnRzKSB7XG4gICAgICBkM3V0aWxzLnNpemVDYW52YXMoY2FudmFzLCB3aWR0aCwgMCk7XG4gICAgICAvLyBpZiBhbGlnbm1lbnRzIGFyZSBoaWRkZW4sIHNldCBwYXJlbnQgZGl2IHRvIDBweFxuICAgICAgaWYgKHBhcmVudCkgcGFyZW50LnN0eWxlLm1pbkhlaWdodCA9IFwiMHB4XCI7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdW5zZXQgbWluaW11bSBoaWdodCBmb3Igdmlld2luZyBhbGlnbm1lbnRzXG4gICAgaWYgKHBhcmVudCkgcGFyZW50LnN0eWxlLm1pbkhlaWdodCA9IFwiXCI7XG5cbiAgICAvLyBIZWlnaHQgY2FuIG9ubHkgYmUgY29tcHV0ZWQgYWZ0ZXIgdGhlIHBpbGV1cCBoYXMgYmVlbiB1cGRhdGVkLlxuICAgIHZhciBoZWlnaHQgPSB5Rm9yUm93KHRoaXMuY2FjaGUucGlsZXVwSGVpZ2h0Rm9yUmVmKHRoaXMucHJvcHMucmFuZ2UuY29udGlnKSk7XG5cbiAgICBkM3V0aWxzLnNpemVDYW52YXMoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIHRoaXMudGlsZXMucmVuZGVyVG9TY3JlZW4oY3R4LCByYW5nZSwgc2NhbGUpO1xuXG4gICAgLy8gVE9ETzogdGhlIGNlbnRlciBsaW5lIHNob3VsZCBnbyBhYm92ZSBhbGlnbm1lbnRzLCBidXQgYmVsb3cgbWlzbWF0Y2hlc1xuICAgIHRoaXMucmVuZGVyQ2VudGVyTGluZShjdHgsIHJhbmdlLCBzY2FsZSk7XG5cbiAgICAvLyBUaGlzIGlzIGEgaGFjayB0byBtaXRpZ2F0ZSAjMzUwXG4gICAgdmFyIGVsID0gZDN1dGlscy5maW5kUGFyZW50KHRoaXMucmVmcy5jYW52YXMsICd0cmFjay1jb250ZW50Jyk7XG4gICAgaWYgKGVsKSBlbC5zY3JvbGxMZWZ0ID0gMDtcbiAgfVxuXG4gIC8vIERyYXcgdGhlIGNlbnRlciBsaW5lKHMpLCB3aGljaCBvcmllbnQgdGhlIHVzZXJcbiAgcmVuZGVyQ2VudGVyTGluZShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgICAgICAgICAgICBzY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIpIHtcbiAgICB2YXIgbWlkUG9pbnQgPSBNYXRoLmZsb29yKChyYW5nZS5zdG9wKCkgKyByYW5nZS5zdGFydCgpKSAvIDIpLFxuICAgICAgICByaWdodExpbmVYID0gTWF0aC5jZWlsKHNjYWxlKG1pZFBvaW50ICsgMSkpLFxuICAgICAgICBsZWZ0TGluZVggPSBNYXRoLmZsb29yKHNjYWxlKG1pZFBvaW50KSksXG4gICAgICAgIGhlaWdodCA9IGN0eC5jYW52YXMuaGVpZ2h0O1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgaWYgKFNVUFBPUlRTX0RBU0hFUykge1xuICAgICAgY3R4LnNldExpbmVEYXNoKFs1LCA1XSk7XG4gICAgfVxuICAgIGlmIChyaWdodExpbmVYIC0gbGVmdExpbmVYIDwgMykge1xuICAgICAgLy8gSWYgdGhlIGxpbmVzIGFyZSB2ZXJ5IGNsb3NlLCB0aGVuIGp1c3QgZHJhdyBhIGNlbnRlciBsaW5lLlxuICAgICAgdmFyIG1pZFggPSBNYXRoLnJvdW5kKChsZWZ0TGluZVggKyByaWdodExpbmVYKSAvIDIpO1xuICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCBtaWRYIC0gMC41LCAwLCBtaWRYIC0gMC41LCBoZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIGxlZnRMaW5lWCAtIDAuNSwgMCwgbGVmdExpbmVYIC0gMC41LCBoZWlnaHQpO1xuICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCByaWdodExpbmVYIC0gMC41LCAwLCByaWdodExpbmVYIC0gMC41LCBoZWlnaHQpO1xuICAgIH1cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgaGFuZGxlU29ydCgpIHtcbiAgICB2YXIge3N0YXJ0LCBzdG9wfSA9IHRoaXMucHJvcHMucmFuZ2UsXG4gICAgICAgIG1pZGRsZSA9IChzdGFydCArIHN0b3ApIC8gMjtcbiAgICB0aGlzLmNhY2hlLnNvcnRSZWFkc0F0KHRoaXMucHJvcHMucmFuZ2UuY29udGlnLCBtaWRkbGUpO1xuICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2socmVhY3RFdmVudDogYW55KSB7XG4gICAgdmFyIGV2ID0gcmVhY3RFdmVudC5uYXRpdmVFdmVudCxcbiAgICAgICAgeCA9IGV2Lm9mZnNldFgsXG4gICAgICAgIHkgPSBldi5vZmZzZXRZO1xuICAgIHZhciBjdHggPSBjYW52YXNVdGlscy5nZXRDb250ZXh0KHRoaXMucmVmcy5jYW52YXMpO1xuICAgIHZhciB0cmFja2luZ0N0eCA9IG5ldyBkYXRhQ2FudmFzLkNsaWNrVHJhY2tpbmdDb250ZXh0KGN0eCwgeCwgeSk7XG5cbiAgICB2YXIgZ2Vub21lUmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlLFxuICAgICAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChnZW5vbWVSYW5nZS5jb250aWcsIGdlbm9tZVJhbmdlLnN0YXJ0LCBnZW5vbWVSYW5nZS5zdG9wKSxcbiAgICAgICAgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCksXG4gICAgICAgIC8vIElmIGNsaWNrLXRyYWNraW5nIGdldHMgc2xvdywgdGhpcyByYW5nZSBjb3VsZCBiZSBuYXJyb3dlZCB0byBvbmVcbiAgICAgICAgLy8gY2xvc2VyIHRvIHRoZSBjbGljayBjb29yZGluYXRlLCByYXRoZXIgdGhhbiB0aGUgd2hvbGUgdmlzaWJsZSByYW5nZS5cbiAgICAgICAgdkdyb3VwcyA9IHRoaXMuY2FjaGUuZ2V0R3JvdXBzT3ZlcmxhcHBpbmcocmFuZ2UpO1xuXG4gICAgcmVuZGVyUGlsZXVwKHRyYWNraW5nQ3R4LCBzY2FsZSwgcmFuZ2UsIG51bGwsIGZhbHNlLCB2R3JvdXBzKTtcbiAgICB2YXIgdlJlYWQgPSBfLmZpbmQodHJhY2tpbmdDdHguaGl0c1swXSwgaGl0ID0+IGhpdC5yZWFkKTtcbiAgICB2YXIgYWxlcnQgPSB3aW5kb3cuYWxlcnQgfHwgY29uc29sZS5sb2c7XG4gICAgaWYgKHZSZWFkKSB7XG4gICAgICBhbGVydCh2UmVhZC5yZWFkLmRlYnVnU3RyaW5nKCkpO1xuICAgIH1cbiAgfVxufVxuXG5QaWxldXBUcmFjay5kaXNwbGF5TmFtZSA9ICdwaWxldXAnO1xuUGlsZXVwVHJhY2suZGVmYXVsdE9wdGlvbnMgPSB7XG4gIHZpZXdBc1BhaXJzOiBmYWxzZSxcbiAgY29sb3JCeUluc2VydDogdHJ1ZSxcbiAgY29sb3JCeVN0cmFuZDogZmFsc2UsXG4gIGhpZGVBbGlnbm1lbnRzOiBmYWxzZVxufTtcblxuUGlsZXVwVHJhY2suZ2V0T3B0aW9uc01lbnUgPSBmdW5jdGlvbihvcHRpb25zOiBPYmplY3QpOiBhbnkge1xuICByZXR1cm4gW1xuICAgIHtrZXk6ICd2aWV3LXBhaXJzJywgbGFiZWw6ICdWaWV3IGFzIHBhaXJzJywgY2hlY2tlZDogb3B0aW9ucy52aWV3QXNQYWlyc30sXG4gICAgJy0nLFxuICAgIHtrZXk6ICdjb2xvci1pbnNlcnQnLCBsYWJlbDogJ0NvbG9yIGJ5IGluc2VydCBzaXplJywgY2hlY2tlZDogb3B0aW9ucy5jb2xvckJ5SW5zZXJ0fSxcbiAgICB7a2V5OiAnY29sb3Itc3RyYW5kJywgbGFiZWw6ICdDb2xvciBieSBzdHJhbmQnLCBjaGVja2VkOiBvcHRpb25zLmNvbG9yQnlTdHJhbmR9LFxuICAgIHtrZXk6ICdoaWRlLWFsaWdubWVudHMnLCBsYWJlbDogJ0hpZGUgYWxpZ25tZW50cycsIGNoZWNrZWQ6IG9wdGlvbnMuaGlkZUFsaWdubWVudHN9LFxuICAgICctJyxcbiAgICB7a2V5OiAnc29ydCcsIGxhYmVsOiAnU29ydCBhbGlnbm1lbnRzJ31cbiAgXTtcbn07XG5cbnZhciBtZXNzYWdlSWQgPSAxO1xuXG5QaWxldXBUcmFjay5oYW5kbGVTZWxlY3RPcHRpb24gPSBmdW5jdGlvbihrZXk6IHN0cmluZywgb2xkT3B0aW9uczogT2JqZWN0KTogT2JqZWN0IHtcbiAgdmFyIG9wdHMgPSBfLmNsb25lKG9sZE9wdGlvbnMpO1xuICBpZiAoa2V5ID09ICd2aWV3LXBhaXJzJykge1xuICAgIG9wdHMudmlld0FzUGFpcnMgPSAhb3B0cy52aWV3QXNQYWlycztcbiAgICByZXR1cm4gb3B0cztcbiAgfSBlbHNlIGlmIChrZXkgPT0gJ2NvbG9yLWluc2VydCcpIHtcbiAgICBvcHRzLmNvbG9yQnlJbnNlcnQgPSAhb3B0cy5jb2xvckJ5SW5zZXJ0O1xuICAgIGlmIChvcHRzLmNvbG9yQnlJbnNlcnQpIG9wdHMuY29sb3JCeVN0cmFuZCA9IGZhbHNlO1xuICAgIHJldHVybiBvcHRzO1xuICB9IGVsc2UgaWYgKGtleSA9PSAnY29sb3Itc3RyYW5kJykge1xuICAgIG9wdHMuY29sb3JCeVN0cmFuZCA9ICFvcHRzLmNvbG9yQnlTdHJhbmQ7XG4gICAgaWYgKG9wdHMuY29sb3JCeVN0cmFuZCkgb3B0cy5jb2xvckJ5SW5zZXJ0ID0gZmFsc2U7XG4gICAgcmV0dXJuIG9wdHM7XG4gIH0gZWxzZSBpZiAoa2V5ID09ICdoaWRlLWFsaWdubWVudHMnKSB7XG4gICAgb3B0cy5oaWRlQWxpZ25tZW50cyA9ICFvcHRzLmhpZGVBbGlnbm1lbnRzO1xuICAgIHJldHVybiBvcHRzO1xuICB9IGVsc2UgaWYgKGtleSA9PSAnc29ydCcpIHtcbiAgICBvcHRzLnNvcnQgPSAobWVzc2FnZUlkKyspO1xuICAgIHJldHVybiBvcHRzO1xuICB9XG4gIHJldHVybiBvbGRPcHRpb25zOyAgLy8gbm8gY2hhbmdlXG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gUGlsZXVwVHJhY2s7XG4iLCIvKipcbiAqIEEgdHJhY2sgd2hpY2ggc2hvd3MgYSBzY2FsZSBwcm9wb3J0aW9uYWwgdG8gc2xpY2Ugb2YgdGhlIGdlbm9tZSBiZWluZ1xuICogc2hvd24gYnkgdGhlIHJlZmVyZW5jZSB0cmFjay4gVGhpcyB0cmFjayB0cmllcyB0byBzaG93IGEgc2NhbGUgaW4ga2JwLFxuICogbWJwIG9yIGdicCBkZXBlbmRpbmcgb24gdGhlIHNpemUgb2YgdGhlIHZpZXcgYW5kIGFsc28gdHJpZXMgdG8gcm91bmQgdGhlXG4gKiBzY2FsZSBzaXplIChlLmcuIHByZWZlcnMgXCIxLDAwMCBicFwiLCBcIjEsMDAwIGticFwiIG92ZXIgXCIxIGticFwiIGFuZCBcIjEgbWJwXCIpXG4gKlxuICogICAgICAgICAgIDwtLS0tLS0tLS0tIDMwIGJwIC0tLS0tLS0tLS0+XG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7Vml6UHJvcHN9IGZyb20gJy4uL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCB0eXBlIHtTdGF0ZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IEVtcHR5U291cmNlIGZyb20gJy4uL3NvdXJjZXMvRW1wdHlTb3VyY2UnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuXG5jbGFzcyBTY2FsZVRyYWNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFZpelByb3BzPHZvaWQ+LCBTdGF0ZT4ge1xuICBwcm9wczogVml6UHJvcHM8dm9pZD47XG4gIHN0YXRlOiBTdGF0ZTsgIC8vIG5vIHN0YXRlLCB1c2VkIHRvIG1ha2UgZmxvdyBoYXBweVxuICBzdGF0aWMgZGVmYXVsdFNvdXJjZTogT2JqZWN0O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBWaXpQcm9wczx2b2lkPikge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgfVxuXG4gIGdldFNjYWxlKCk6IFNjYWxlIHtcbiAgICByZXR1cm4gZDN1dGlscy5nZXRUcmFja1NjYWxlKHRoaXMucHJvcHMucmFuZ2UsIHRoaXMucHJvcHMud2lkdGgpO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgcmV0dXJuIDxjYW52YXMgcmVmPSdjYW52YXMnIC8+O1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBnZXRET01Ob2RlKCk6IGFueSB7XG4gICAgcmV0dXJuIFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpO1xuICB9XG5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gdGhpcy5nZXRET01Ob2RlKCksXG4gICAgICAgIHtyYW5nZSwgd2lkdGgsIGhlaWdodH0gPSB0aGlzLnByb3BzO1xuXG4gICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG5cbiAgICB2YXIgY3R4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjYW52YXNVdGlscy5nZXRDb250ZXh0KGNhbnZhcykpO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnJlc2V0KCk7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG5cbiAgICB2YXIgdmlld1NpemUgPSByYW5nZS5zdG9wIC0gcmFuZ2Uuc3RhcnQgKyAxLFxuICAgICAgICBtaWRYID0gTWF0aC5yb3VuZCh3aWR0aCAvIDIpLFxuICAgICAgICBtaWRZID0gTWF0aC5yb3VuZChoZWlnaHQgLyAyKTtcblxuICAgIC8vIE1pZCBsYWJlbFxuICAgIHZhciB7cHJlZml4LCB1bml0fSA9IGQzdXRpbHMuZm9ybWF0UmFuZ2Uodmlld1NpemUpO1xuICAgIGN0eC5saW5lV2lkdGggPSAxO1xuICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5TQ0FMRV9GT05UX0NPTE9SO1xuICAgIGN0eC5mb250ID0gc3R5bGUuU0NBTEVfRk9OVF9TVFlMRTtcbiAgICBjdHgudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICBjdHguZmlsbFRleHQocHJlZml4ICsgXCIgXCIgKyB1bml0LFxuICAgICAgICAgICAgICAgICBtaWRYLFxuICAgICAgICAgICAgICAgICBtaWRZICsgc3R5bGUuU0NBTEVfVEVYVF9ZX09GRlNFVCk7XG5cbiAgICAvLyBMZWZ0IGxpbmVcbiAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIDAuNSwgbWlkWSAtIDAuNSwgbWlkWCAtIHN0eWxlLlNDQUxFX0xJTkVfUEFERElORyAtIDAuNSwgbWlkWSAtIDAuNSk7XG4gICAgLy8gTGVmdCBhcnJvd1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHgubW92ZVRvKDAuNSArIHN0eWxlLlNDQUxFX0FSUk9XX1NJWkUsIG1pZFkgLSBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFIC0gMC41KTtcbiAgICBjdHgubGluZVRvKDAuNSwgbWlkWSAtIDAuNSk7XG4gICAgY3R4LmxpbmVUbygwLjUgKyBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFLCBtaWRZICsgc3R5bGUuU0NBTEVfQVJST1dfU0laRSAtIDAuNSk7XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIGN0eC5maWxsKCk7XG4gICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgLy8gUmlnaHQgbGluZVxuICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgbWlkWCArIHN0eWxlLlNDQUxFX0xJTkVfUEFERElORyAtIDAuNSwgbWlkWSAtIDAuNSwgd2lkdGggLSAwLjUsIG1pZFkgLSAwLjUpO1xuICAgIC8vIFJpZ2h0IGFycm93XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5tb3ZlVG8od2lkdGggLSBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFIC0gMC41LCBtaWRZIC0gc3R5bGUuU0NBTEVfQVJST1dfU0laRSAtIDAuNSk7XG4gICAgY3R4LmxpbmVUbyh3aWR0aCAtIDAuNSwgbWlkWSAtIDAuNSk7XG4gICAgY3R4LmxpbmVUbyh3aWR0aCAtIHN0eWxlLlNDQUxFX0FSUk9XX1NJWkUgLSAwLjUsIG1pZFkgKyBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFIC0gMC41KTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LmZpbGwoKTtcbiAgICBjdHguc3Ryb2tlKCk7XG5cbiAgICAvLyBDbGVhbiB1cCBhZnRlcndhcmRzXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxufVxuXG5TY2FsZVRyYWNrLmRpc3BsYXlOYW1lID0gJ3NjYWxlJztcblNjYWxlVHJhY2suZGVmYXVsdFNvdXJjZSA9IEVtcHR5U291cmNlLmNyZWF0ZSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNjYWxlVHJhY2s7XG4iLCIvKipcbiAqIEEgY2FudmFzIHdoaWNoIG1haW50YWlucyBhIGNhY2hlIG9mIHByZXZpb3VzbHktcmVuZGVyZWQgdGlsZXMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBmcm9tICdkYXRhLWNhbnZhcyc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5pbXBvcnQgc2NhbGUgZnJvbSAnLi4vc2NhbGUnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5cbnR5cGUgVGlsZSA9IHtcbiAgcGl4ZWxzUGVyQmFzZTogbnVtYmVyO1xuICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPjtcbiAgYnVmZmVyOiBIVE1MQ2FudmFzRWxlbWVudDtcbn07XG5cbmNvbnN0IEVQU0lMT04gPSAxZS02O1xuY29uc3QgTUlOX1BYX1BFUl9CVUZGRVIgPSA1MDA7XG5cbmNvbnN0IERFQlVHX1JFTkRFUl9USUxFX0VER0VTID0gZmFsc2U7XG5cbmNsYXNzIFRpbGVkQ2FudmFzIHtcbiAgdGlsZUNhY2hlOiBUaWxlW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50aWxlQ2FjaGUgPSBbXTtcbiAgfVxuXG4gIHJlbmRlclRpbGUodGlsZTogVGlsZSkge1xuICAgIHZhciByYW5nZSA9IHRpbGUucmFuZ2UsXG4gICAgICAgIGhlaWdodCA9IHRoaXMuaGVpZ2h0Rm9yUmVmKHJhbmdlLmNvbnRpZyksXG4gICAgICAgIHdpZHRoID0gTWF0aC5yb3VuZCh0aWxlLnBpeGVsc1BlckJhc2UgKiByYW5nZS5sZW5ndGgoKSk7XG4gICAgLy8gVE9ETzogZG9lcyBpdCBtYWtlIHNlbnNlIHRvIHJlLXVzZSBjYW52YXNlcz9cbiAgICB0aWxlLmJ1ZmZlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyh0aWxlLmJ1ZmZlciwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICAvLyBUaGUgZmFyIHJpZ2h0IGVkZ2Ugb2YgdGhlIHRpbGUgaXMgdGhlIHN0YXJ0IG9mIHRoZSBfbmV4dF8gcmFuZ2UncyBiYXNlXG4gICAgLy8gcGFpciwgbm90IHRoZSBzdGFydCBvZiB0aGUgbGFzdCBvbmUgaW4gdGhpcyB0aWxlLlxuICAgIHZhciBzYyA9IHNjYWxlLmxpbmVhcigpLmRvbWFpbihbcmFuZ2Uuc3RhcnQoKSwgcmFuZ2Uuc3RvcCgpICsgMV0pLnJhbmdlKFswLCB3aWR0aF0pO1xuICAgIHZhciBjdHggPSBjYW52YXNVdGlscy5nZXRDb250ZXh0KHRpbGUuYnVmZmVyKTtcbiAgICB2YXIgZHR4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjdHgpO1xuICAgIHRoaXMucmVuZGVyKGR0eCwgc2MsIHJhbmdlKTtcbiAgfVxuXG4gIC8vIENyZWF0ZSAoYW5kIHJlbmRlcikgbmV3IHRpbGVzIHRvIGZpbGwgdGhlIGdhcHMuXG4gIG1ha2VOZXdUaWxlcyhleGlzdGluZ1RpbGVzOiBJbnRlcnZhbFtdLFxuICAgICAgICAgICAgICAgcGl4ZWxzUGVyQmFzZTogbnVtYmVyLFxuICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBUaWxlW10ge1xuICAgIHZhciBuZXdJbnRlcnZhbHMgPSBUaWxlZENhbnZhcy5nZXROZXdUaWxlUmFuZ2VzKFxuICAgICAgICAgIGV4aXN0aW5nVGlsZXMsIHJhbmdlLmludGVydmFsLCBwaXhlbHNQZXJCYXNlKTtcblxuICAgIHZhciBuZXdUaWxlcyA9IG5ld0ludGVydmFscy5tYXAoaXYgPT4gKHtcbiAgICAgIHBpeGVsc1BlckJhc2UsXG4gICAgICByYW5nZTogbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgaXYuc3RhcnQsIGl2LnN0b3ApLFxuICAgICAgYnVmZmVyOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxuICAgIH0pKTtcblxuICAgIC8vIFRPRE86IGl0IHdvdWxkIGJlIGJldHRlciB0byB3cmFwIHRoZXNlIGNhbGxzIGluIHJlcXVlc3RBbmltYXRpb25GcmFtZSxcbiAgICAvLyBzbyB0aGF0IHJlbmRlcmluZyBpcyBkb25lIG9mZiB0aGUgbWFpbiBldmVudCBsb29wLlxuICAgIG5ld1RpbGVzLmZvckVhY2godGlsZSA9PiB0aGlzLnJlbmRlclRpbGUodGlsZSkpO1xuICAgIHRoaXMudGlsZUNhY2hlID0gdGhpcy50aWxlQ2FjaGUuY29uY2F0KG5ld1RpbGVzKTtcbiAgICB0aGlzLnRpbGVDYWNoZS5zb3J0KChhLCBiKSA9PiBDb250aWdJbnRlcnZhbC5jb21wYXJlKGEucmFuZ2UsIGIucmFuZ2UpKTtcbiAgICByZXR1cm4gbmV3VGlsZXM7XG4gIH1cblxuICByZW5kZXJUb1NjcmVlbihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgIHNjYWxlOiAobnVtOiBudW1iZXIpID0+IG51bWJlcikge1xuICAgIHZhciBwaXhlbHNQZXJCYXNlID0gc2NhbGUoMSkgLSBzY2FsZSgwKTtcbiAgICB2YXIgdGlsZXNBdFJlcyA9IHRoaXMudGlsZUNhY2hlLmZpbHRlcih0aWxlID0+IE1hdGguYWJzKHRpbGUucGl4ZWxzUGVyQmFzZSAtIHBpeGVsc1BlckJhc2UpIDwgRVBTSUxPTiAmJiByYW5nZS5jaHJPbkNvbnRpZyh0aWxlLnJhbmdlLmNvbnRpZykpO1xuICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodEZvclJlZihyYW5nZS5jb250aWcpO1xuXG4gICAgdmFyIGV4aXN0aW5nSW50ZXJ2YWxzID0gdGlsZXNBdFJlcy5tYXAodGlsZSA9PiB0aWxlLnJhbmdlLmludGVydmFsKTtcbiAgICBpZiAoIXJhbmdlLmludGVydmFsLmlzQ292ZXJlZEJ5KGV4aXN0aW5nSW50ZXJ2YWxzKSkge1xuICAgICAgdGlsZXNBdFJlcyA9IHRpbGVzQXRSZXMuY29uY2F0KHRoaXMubWFrZU5ld1RpbGVzKGV4aXN0aW5nSW50ZXJ2YWxzLCBwaXhlbHNQZXJCYXNlLCByYW5nZSkpO1xuICAgIH1cblxuICAgIHZhciB0aWxlcyA9IHRpbGVzQXRSZXMuZmlsdGVyKHRpbGUgPT4gcmFuZ2UuaW50ZXJzZWN0cyh0aWxlLnJhbmdlKSk7XG5cbiAgICB0aWxlcy5mb3JFYWNoKHRpbGUgPT4ge1xuICAgICAgdmFyIGxlZnQgPSBNYXRoLnJvdW5kKHNjYWxlKHRpbGUucmFuZ2Uuc3RhcnQoKSkpLFxuICAgICAgICAgIG5leHRMZWZ0ID0gTWF0aC5yb3VuZChzY2FsZSh0aWxlLnJhbmdlLnN0b3AoKSArIDEpKSxcbiAgICAgICAgICB3aWR0aCA9IG5leHRMZWZ0IC0gbGVmdDtcbiAgICAgIC8vIERyYXdpbmcgYSAwcHggdGFsbCBjYW52YXMgdGhyb3dzIGluIEZpcmVmb3ggYW5kIFBoYW50b21KUy5cbiAgICAgIGlmICh0aWxlLmJ1ZmZlci5oZWlnaHQgPT09IDApIHJldHVybjtcbiAgICAgIC8vIFdlIGNhbid0IGp1c3QgdGhyb3cgdGhlIGltYWdlcyBvbiB0aGUgc2NyZWVuIHdpdGhvdXQgc2NhbGluZyBkdWUgdG9cbiAgICAgIC8vIHJvdW5kaW5nIGlzc3Vlcywgd2hpY2ggY2FuIHJlc3VsdCBpbiAxcHggZ2FwcyBvciBvdmVyZHJhd2luZy5cbiAgICAgIC8vIFdlIGFsd2F5cyBoYXZlOlxuICAgICAgLy8gICB3aWR0aCAtIHRpbGUuYnVmZmVyLndpZHRoIFxcaW4gey0xLCAwLCArMX1cbiAgICAgIGN0eC5kcmF3SW1hZ2UodGlsZS5idWZmZXIsIFxuICAgICAgICAgICAgICAgICAgICAwLCAwLCB0aWxlLmJ1ZmZlci53aWR0aCwgdGlsZS5idWZmZXIuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBsZWZ0LCAwLCB3aWR0aCwgdGlsZS5idWZmZXIuaGVpZ2h0KTtcblxuICAgICAgaWYgKERFQlVHX1JFTkRFUl9USUxFX0VER0VTKSB7XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgbGVmdCAtIDAuNSwgMCwgbGVmdCAtIDAuNSwgaGVpZ2h0KTtcbiAgICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCBuZXh0TGVmdCAtIDAuNSwgMCwgbmV4dExlZnQgLSAwLjUsIGhlaWdodCk7XG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpbnZhbGlkYXRlQWxsKCkge1xuICAgIHRoaXMudGlsZUNhY2hlID0gW107XG4gIH1cblxuICBpbnZhbGlkYXRlUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgICB0aGlzLnRpbGVDYWNoZSA9IHRoaXMudGlsZUNhY2hlLmZpbHRlcih0aWxlID0+ICF0aWxlLnJhbmdlLmludGVyc2VjdHMocmFuZ2UpKTtcbiAgfVxuXG4gIGhlaWdodEZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgdGhyb3cgJ05vdCBpbXBsZW1lbnRlZCc7XG4gIH1cblxuICByZW5kZXIoZHR4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgc2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IHZvaWQge1xuICAgIHRocm93ICdOb3QgaW1wbGVtZW50ZWQnO1xuICB9XG5cbiAgLy8gcmVxdWlyZXMgdGhhdCBleGlzdGluZ0ludGVydmFscyBiZSBzb3J0ZWQuXG4gIHN0YXRpYyBnZXROZXdUaWxlUmFuZ2VzKGV4aXN0aW5nSW50ZXJ2YWxzOiBJbnRlcnZhbFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZTogSW50ZXJ2YWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBpeGVsc1BlckJhc2U6IG51bWJlcik6IEludGVydmFsW10ge1xuICAgIHZhciBpdldpZHRoID0gTWF0aC5jZWlsKE1JTl9QWF9QRVJfQlVGRkVSIC8gcGl4ZWxzUGVyQmFzZSk7XG4gICAgdmFyIGZpcnN0U3RhcnQgPSBNYXRoLmZsb29yKHJhbmdlLnN0YXJ0IC8gaXZXaWR0aCkgKiBpdldpZHRoO1xuICAgIHZhciBpdnMgPSBfLnJhbmdlKGZpcnN0U3RhcnQsIHJhbmdlLnN0b3AsIGl2V2lkdGgpXG4gICAgICAgICAgICAgICAubWFwKHN0YXJ0ID0+IG5ldyBJbnRlcnZhbChzdGFydCwgc3RhcnQgKyBpdldpZHRoIC0gMSkpXG4gICAgICAgICAgICAgICAuZmlsdGVyKGl2ID0+ICFpdi5pc0NvdmVyZWRCeShleGlzdGluZ0ludGVydmFscykpO1xuXG4gICAgcmV0dXJuIHV0aWxzLmZsYXRNYXAoaXZzLCBpdiA9PiBpdi5jb21wbGVtZW50SW50ZXJ2YWxzKGV4aXN0aW5nSW50ZXJ2YWxzKSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGl2ID0+IGl2LmludGVyc2VjdHMocmFuZ2UpKTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gVGlsZWRDYW52YXM7XG4iLCIvKipcbiAqIFZpc3VhbGl6YXRpb24gb2YgdmFyaWFudHNcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcbmltcG9ydCB7QWxsZWxGcmVxdWVuY3lTdHJhdGVneX0gZnJvbSAnLi4vdHlwZXMnO1xuXG5cbmltcG9ydCB0eXBlIHtWY2ZEYXRhU291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1ZjZkRhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge0RhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuaW1wb3J0IHR5cGUge1NjYWxlfSBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHR5cGUge1N0YXRlfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5cbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQgc2hhbGxvd0VxdWFscyBmcm9tICdzaGFsbG93LWVxdWFscyc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5cbmNsYXNzIFZhcmlhbnRUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxWaXpQcm9wczxWY2ZEYXRhU291cmNlPiwgU3RhdGU+IHtcbiAgcHJvcHM6IFZpelByb3BzPFZjZkRhdGFTb3VyY2U+O1xuXG4gIHN0YXRlOiBTdGF0ZTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVml6UHJvcHM8VmNmRGF0YVNvdXJjZT4pIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICByZXR1cm4gPGNhbnZhcyBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyl9IC8+O1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG5cbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV3ZGF0YScsICgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHByZXZQcm9wcywgdGhpcy5wcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHMocHJldlN0YXRlLCB0aGlzLnN0YXRlKSkge1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyksXG4gICAgICAgIHt3aWR0aCwgaGVpZ2h0fSA9IHRoaXMucHJvcHM7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwKSByZXR1cm47XG4gICAgXG4gICAgaWYgKGNhbnZhcyAmJiBjYW52YXMgaW5zdGFuY2VvZiBFbGVtZW50KSB7IC8vIGNoZWNrIGZvciBnZXRDb250ZXh0XG4gICAgICBpZiAoY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHsgLy8gY2hlY2sgZm9yIHNpemVDYW52YXNcbiAgICAgICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICB9XG4gICAgICB2YXIgY3R4ID0gY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpO1xuICAgICAgdmFyIGR0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY3R4KTtcbiAgICAgIHRoaXMucmVuZGVyU2NlbmUoZHR4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbnZhcyBpcyBub3QgYW4gRWxlbWVudFwiKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJTY2VuZShjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICB2YXIgcmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlLFxuICAgICAgICBpbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0LCByYW5nZS5zdG9wKSxcbiAgICAgICAgdmFyaWFudHMgPSB0aGlzLnByb3BzLnNvdXJjZS5nZXRWYXJpYW50c0luUmFuZ2UoaW50ZXJ2YWwpLFxuICAgICAgICBzY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKSxcbiAgICAgICAgaGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQsXG4gICAgICAgIHkgPSBoZWlnaHQgLSBzdHlsZS5WQVJJQU5UX0hFSUdIVCAtIDE7XG5cbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICBjdHgucmVzZXQoKTtcbiAgICBjdHguc2F2ZSgpO1xuXG4gICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLlZBUklBTlRfRklMTDtcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHlsZS5WQVJJQU5UX1NUUk9LRTtcbiAgICB2YXJpYW50cy5mb3JFYWNoKHZhcmlhbnQgPT4ge1xuICAgICAgdmFyIHZhcmlhbnRIZWlnaHRSYXRpbyA9IDEuMDtcbiAgICAgIGlmICh0aGlzLnByb3BzLm9wdGlvbnMudmFyaWFudEhlaWdodEJ5RnJlcXVlbmN5KSB7XG4gICAgICAgIHZhciBmcmVxdWVuY3kgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLmFsbGVsRnJlcXVlbmN5U3RyYXRlZ3kgPT09IHVuZGVmaW5lZCkgeyAvL2RlZmF1bHQgc3RhcnRlZ3lcbiAgICAgICAgICBmcmVxdWVuY3kgPSB2YXJpYW50Lm1ham9yRnJlcXVlbmN5O1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMub3B0aW9ucy5hbGxlbEZyZXF1ZW5jeVN0cmF0ZWd5ID09PSBBbGxlbEZyZXF1ZW5jeVN0cmF0ZWd5Lk1ham9yKSB7XG4gICAgICAgICAgZnJlcXVlbmN5ID0gdmFyaWFudC5tYWpvckZyZXF1ZW5jeTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLm9wdGlvbnMuYWxsZWxGcmVxdWVuY3lTdHJhdGVneSA9PT0gQWxsZWxGcmVxdWVuY3lTdHJhdGVneS5NaW5vcikge1xuICAgICAgICAgIGZyZXF1ZW5jeSA9IHZhcmlhbnQubWlub3JGcmVxdWVuY3k7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJVbmtub3duIEFsbGVsRnJlcXVlbmN5U3RyYXRlZ3k6IFwiLHRoaXMucHJvcHMub3B0aW9ucy5hbGxlbEZyZXF1ZW5jeVN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZnJlcXVlbmN5ICE9PSBudWxsICYmIGZyZXF1ZW5jeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFyaWFudEhlaWdodFJhdGlvID0gZnJlcXVlbmN5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgaGVpZ2h0ID0gc3R5bGUuVkFSSUFOVF9IRUlHSFQqdmFyaWFudEhlaWdodFJhdGlvO1xuICAgICAgdmFyIHZhcmlhbnRZID0geSAtIDAuNSArIHN0eWxlLlZBUklBTlRfSEVJR0hUIC0gaGVpZ2h0O1xuICAgICAgdmFyIHZhcmlhbnRYID0gTWF0aC5yb3VuZChzY2FsZSh2YXJpYW50LnBvc2l0aW9uKSkgLSAwLjU7XG4gICAgICB2YXIgd2lkdGggPSBNYXRoLm1heCgxLCBNYXRoLnJvdW5kKHNjYWxlKHZhcmlhbnQucG9zaXRpb24gKyAxKSAtIHNjYWxlKHZhcmlhbnQucG9zaXRpb24pKSk7XG4gICAgICBjdHgucHVzaE9iamVjdCh2YXJpYW50KTtcblxuICAgICAgY3R4LmZpbGxSZWN0KHZhcmlhbnRYLCB2YXJpYW50WSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICBjdHguc3Ryb2tlUmVjdCh2YXJpYW50WCwgdmFyaWFudFksIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgY3R4LnBvcE9iamVjdCgpO1xuICAgIH0pO1xuXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKHJlYWN0RXZlbnQ6IGFueSkge1xuICAgIHZhciBldiA9IHJlYWN0RXZlbnQubmF0aXZlRXZlbnQsXG4gICAgICAgIHggPSBldi5vZmZzZXRYLFxuICAgICAgICB5ID0gZXYub2Zmc2V0WSxcbiAgICAgICAgY2FudmFzOiAobnVsbCB8IEVsZW1lbnQgfCBUZXh0KSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpO1xuXG4gICAgaWYgKGNhbnZhcyA9PSBudWxsICkgcmV0dXJuO1xuXG4gICAgaWYgKGNhbnZhcyAmJiBjYW52YXMgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICB2YXIgY3R4ID0gY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpLFxuICAgICAgICAgIHRyYWNraW5nQ3R4ID0gbmV3IGRhdGFDYW52YXMuQ2xpY2tUcmFja2luZ0NvbnRleHQoY3R4LCB4LCB5KTtcbiAgICAgIHRoaXMucmVuZGVyU2NlbmUodHJhY2tpbmdDdHgpO1xuXG4gICAgICB2YXIgdmFyaWFudHMgPSB0cmFja2luZ0N0eC5oaXQ7XG4gICAgICBpZiAodmFyaWFudHMgJiYgdmFyaWFudHMubGVuZ3RoPjApIHtcbiAgICAgICAgdmFyIGRhdGEgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaT0wO2k8dmFyaWFudHMubGVuZ3RoO2krKykge1xuICAgICAgICAgIGRhdGEucHVzaCh7XG4gICAgICAgICAgICBpZDogICAgICAgdmFyaWFudHNbaV0uaWQsXG4gICAgICAgICAgICB2Y2ZMaW5lOiAgdmFyaWFudHNbaV0udmNmTGluZSxcbiAgICAgICAgICAgIHJlZjogICAgICB2YXJpYW50c1tpXS5yZWYsXG4gICAgICAgICAgICBhbHQ6ICAgICAgdmFyaWFudHNbaV0uYWx0fSk7XG4gICAgICAgIH1cbiAgICAgICAgLy91c2VyIHByb3ZpZGVkIGZ1bmN0aW9uIGZvciBkaXNwbGF5aW5nIHBvcHVwXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5vcHRpb25zLm9uVmFyaWFudENsaWNrZWQgID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLm9wdGlvbnMub25WYXJpYW50Q2xpY2tlZChkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlZhcmlhbnRzIGNsaWNrZWQ6IFwiLCBkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2FudmFzIGlzIG5vdCBhbiBFbGVtZW50XCIpO1xuICAgIH1cbiAgfVxufVxuXG5WYXJpYW50VHJhY2suZGlzcGxheU5hbWUgPSAndmFyaWFudHMnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZhcmlhbnRUcmFjaztcbiIsIi8qKlxuICogVXRpbGl0eSBjb2RlIGZvciB3b3JraW5nIHdpdGggdGhlIEhUTUwgY2FudmFzIGVsZW1lbnQuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyBSZXR1cm4gdGhlIDJEIGNvbnRleHQgZm9yIGEgY2FudmFzLiBUaGlzIGlzIGhlbHBmdWwgZm9yIHR5cGUgc2FmZXR5LlxuZnVuY3Rpb24gZ2V0Q29udGV4dChlbDogRWxlbWVudCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XG4gIC8vIFRoZSB0eXBlY2FzdHMgdGhyb3VnaCBgYW55YCBhcmUgdG8gZm9vbCBmbG93LlxuICB2YXIgY2FudmFzID0gKChlbCA6IGFueSkgOiBIVE1MQ2FudmFzRWxlbWVudCk7XG4gIHZhciBjdHggPSAoKGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpIDogYW55KSA6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk7XG4gIHJldHVybiBjdHg7XG59XG5cbi8vIFN0cm9rZSBhIGxpbmUgYmV0d2VlbiB0d28gcG9pbnRzXG5mdW5jdGlvbiBkcmF3TGluZShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcikge1xuICBjdHguYmVnaW5QYXRoKCk7XG4gIGN0eC5tb3ZlVG8oeDEsIHkxKTtcbiAgY3R4LmxpbmVUbyh4MiwgeTIpO1xuICBjdHguc3Ryb2tlKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRDb250ZXh0LFxuICBkcmF3TGluZVxufTtcbiIsIi8qKlxuICogRDMvRE9NLXJlbGF0ZWQgdXRpbGl0eSBmdW5jdGlvbnMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBzY2FsZSBmcm9tICcuLi9zY2FsZSc7XG5cbi8vIFN1YnR5cGUgb2YgR2Vub21lUmFuZ2VcbnR5cGUgUmFuZ2UgPSB7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIFNjYWxlID0gKG51bTogbnVtYmVyKSA9PiBudW1iZXI7XG5cbi8qKlxuICogU2hhcmVkIHgtYXhpcyBzY2FsaW5nIGxvZ2ljIGZvciB0cmFja3NcbiAqL1xuZnVuY3Rpb24gZ2V0VHJhY2tTY2FsZShyYW5nZTogUmFuZ2UsIHdpZHRoOiBudW1iZXIpOiBhbnkge1xuICBpZiAoIXJhbmdlKSByZXR1cm4gc2NhbGUubGluZWFyKCk7XG4gIHJldHVybiBzY2FsZS5saW5lYXIoKVxuICAgICAgICAgIC5kb21haW4oW3JhbmdlLnN0YXJ0LCByYW5nZS5zdG9wICsgMV0pICAvLyAxIGJwIHdpZGVcbiAgICAgICAgICAucmFuZ2UoWzAsIHdpZHRoXSk7XG59XG5cbnZhciBmb3JtYXRQcmVmaXhlcyA9IFtcIlwiLFwia1wiLFwiTVwiLFwiR1wiLFwiVFwiLFwiUFwiLFwiRVwiLFwiWlwiLFwiWVwiXTtcblxuLy8gUmV0dXJucyB0aGUgU0ktcHJlZml4IGZvciBudW0sIGFsYSBkMy5mb3JtYXRQcmVmaXguXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21ib3N0b2NrL2QzL2Jsb2IvNWI5ODFhMTgvc3JjL2Zvcm1hdC9mb3JtYXRQcmVmaXguanNcbmZ1bmN0aW9uIGZvcm1hdFByZWZpeCh2YWx1ZTogbnVtYmVyKSB7XG4gIHZhciBpID0gMDtcbiAgaWYgKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgKj0gLTE7XG4gICAgaSA9IDEgKyBNYXRoLmZsb29yKDFlLTEyICsgTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjEwKTtcbiAgICBpID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjQsIE1hdGguZmxvb3IoKGkgLSAxKSAvIDMpICogMykpO1xuICB9XG4gIHZhciBrID0gTWF0aC5wb3coMTAsIGkpO1xuICByZXR1cm4ge1xuICAgIHN5bWJvbDogZm9ybWF0UHJlZml4ZXNbaSAvIDNdLFxuICAgIHNjYWxlOiBkID0+IGQgLyBrXG4gIH07XG59XG5cbi8qKlxuICogRm9ybWF0cyB0aGUgc2l6ZSBvZiBhIHZpZXcgYW5kIGluZmVycyB3aGF0IHByZWZpeC91bml0IHRvIHNob3cuXG4gKiBUaGlzIGZvcm1hdHRpbmcgZm9sbG93cyBJR1YncyBjb252ZW50aW9ucyByZWdhcmRpbmcgcmFuZ2UgZGlzcGxheTpcbiAqICBcIjEgYnBcIiwgXCIxMDEgYnBcIiwgXCIxLDAwMSBicFwiLCBcIjEsMDAxIGticFwiLCAuLi5cbiAqL1xuZnVuY3Rpb24gZm9ybWF0UmFuZ2Uodmlld1NpemU6IG51bWJlcik6IHtwcmVmaXg6IHN0cmluZywgdW5pdDogc3RyaW5nfSB7XG4gIHZhciB0bXBWaWV3U2l6ZSA9IHZpZXdTaXplIC8gMTAwMCxcbiAgICAgIGZwcmVmaXggPSBmb3JtYXRQcmVmaXgoTWF0aC5tYXgoMSwgdG1wVmlld1NpemUpKSxcbiAgICAgIHVuaXQgPSBmcHJlZml4LnN5bWJvbCArIFwiYnBcIiwgIC8vIGJwLCBrYnAsIE1icCwgR2JwXG4gICAgICBwcmVmaXggPSBNYXRoLnJvdW5kKGZwcmVmaXguc2NhbGUodmlld1NpemUpKS50b0xvY2FsZVN0cmluZygpO1xuICByZXR1cm4ge3ByZWZpeCwgdW5pdH07XG59XG5cbmZ1bmN0aW9uIGhlaWdodEZvckNhbnZhcyhlbDogSFRNTENhbnZhc0VsZW1lbnQsIGhlaWdodDogbnVtYmVyKTogbnVtYmVyIHtcbiAgdmFyIHJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gIHJldHVybiAoaGVpZ2h0ICogcmF0aW8pO1xufVxuXG4vKipcbiAqIFNpemVzIGEgY2FudmFzIGFwcHJvcHJpYXRlbHkgZm9yIHRoaXMgZGV2aWNlLlxuICovXG5mdW5jdGlvbiBzaXplQ2FudmFzKGVsOiBIVE1MQ2FudmFzRWxlbWVudCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgdmFyIHJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gIGVsLndpZHRoID0gd2lkdGggKiByYXRpbztcbiAgZWwuaGVpZ2h0ID0gaGVpZ2h0ICogcmF0aW87XG4gIGVsLnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnO1xuICBlbC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xuICB2YXIgY3R4ID0gZWwuZ2V0Q29udGV4dCgnMmQnKTtcbiAgaWYgKGN0eCAhPT0gbnVsbCAmJiBjdHggaW5zdGFuY2VvZiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICBjdHguc2NhbGUocmF0aW8sIHJhdGlvKTtcbiAgfVxufVxuXG4vKipcbiAqIEZpbmQgdGhlIGNsb3Nlc3QgcGFyZW50IHdpdGggYSBnaXZlbiBjbGFzcyBuYW1lLlxuICovXG5mdW5jdGlvbiBmaW5kUGFyZW50KGluRWw6IEVsZW1lbnQsIGNsYXNzTmFtZTogc3RyaW5nKTogP0VsZW1lbnQge1xuICB2YXIgZWwgPSBpbkVsOyAgLy8gdGhpcyBpcyBmb3IgRmxvdy5cbiAgZG8ge1xuICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkgcmV0dXJuIGVsO1xuICAgIGVsID0gZWwucGFyZW50RWxlbWVudDtcbiAgfSB3aGlsZSAoZWwpO1xuICByZXR1cm4gbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGhlaWdodEZvckNhbnZhcyxcbiAgZm9ybWF0UmFuZ2UsXG4gIGdldFRyYWNrU2NhbGUsXG4gIHNpemVDYW52YXMsXG4gIGZpbmRQYXJlbnRcbn07XG4iLCIvKiogQGZsb3cgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0FsaWdubWVudCwgQ2lnYXJTeW1ib2x9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgdHlwZSBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcblxuLyoqXG4gKiBDYWxjdWxhdGUgcm93IGhlaWdodCBmb3IgcGlsZXVwXG4gKiByb3c6IHJvdyBudW1iZXJcbiAqIGhlaWdodDogaGVpZ2h0IG9mIGVsZW1lbnRzIHRvIGRyYXdcbiAqIHNwYWNpbmc6IHNwYWNpbmcgYmV0d2VlbiBlbGVtZW50cyB0byBkcmF3XG4gKiBSZXR1cm5zIHkgbG9jYXRpb24gZm9yIHRoaXMgcm93XG4gKi9cbmZ1bmN0aW9uIHlGb3JSb3cocm93OiBudW1iZXIsIGhlaWdodDogbnVtYmVyPXN0eWxlLlJFQURfSEVJR0hULCBzcGFjaW5nOiBudW1iZXI9c3R5bGUuUkVBRF9TUEFDSU5HKTogbnVtYmVyIHtcbiAgcmV0dXJuIChyb3cgKiAoaGVpZ2h0ICsgc3BhY2luZykpO1xufVxuXG4vKipcbiAqIEdpdmVuIGEgbGlzdCBvZiBJbnRlcnZhbHMsIHJldHVybiBhIHBhcmFsbGVsIGxpc3Qgb2Ygcm93IG51bWJlcnMgZm9yIGVhY2guXG4gKiBBc3N1bWluZyByb3dzID0gcGlsZXVwKHJlYWRzKSwgdGhlbiB5b3VyIGd1YXJhbnRlZSBpcyB0aGF0XG4gKiByb3dzW2ldID09IHJvd3Nbal0gPT4gIXJlYWRzW2ldLmludGVyc2VjdHMocmVhZHNbal0pXG4gKi9cbmZ1bmN0aW9uIHBpbGV1cChyZWFkczogSW50ZXJ2YWxbXSk6IG51bWJlcltdIHtcbiAgdmFyIHJvd3MgPSBuZXcgQXJyYXkocmVhZHMubGVuZ3RoKSxcbiAgICAgIGxhc3RSZWFkcyA9IFtdOyAgLy8gcm93IG51bWJlciAtLT4gbGFzdCBJbnRlcnZhbCBpbiB0aGF0IHJvd1xuXG4gIC8vIEZvciBlYWNoIHJlYWQsIGZpbmQgdGhlIGZpcnN0IHJvdyB0aGF0IGl0IHdpbGwgZml0IGluLlxuICAvLyBUaGlzIGlzIHBvdGVudGlhbGx5IE8obl4yKSBpbiB0aGUgbnVtYmVyIG9mIHJlYWRzOyB0aGVyZSdzIHByb2JhYmx5IGFcbiAgLy8gYmV0dGVyIHdheS5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWFkcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciByID0gcmVhZHNbaV07XG4gICAgdmFyIHJvd051bSA9IGxhc3RSZWFkcy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBsYXN0UmVhZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmICghci5pbnRlcnNlY3RzKGxhc3RSZWFkc1tqXSkpIHtcbiAgICAgICAgcm93TnVtID0gajtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJvd3NbaV0gPSByb3dOdW07XG4gICAgbGFzdFJlYWRzW3Jvd051bV0gPSByO1xuICB9XG5cbiAgcmV0dXJuIHJvd3M7XG59XG5cbi8qKlxuICogQWRkIGEgcmVhZCB0byBhbiBleGlzdGluZyBwaWxldXAuXG4gKiBwaWxldXAgbWFwcyB7cm93IC0tPiByZWFkcyBpbiB0aGF0IHJvd31cbiAqIFRoaXMgbW9kaWZpZXMgcGlsZXVwIGJ5IGluc2VydGluZyB0aGUgcmVhZCBpbiB0aGUgYXBwcm9wcmlhdGUgcm93LlxuICogUmV0dXJucyB0aGUgY2hvc2VuIHJvdyBudW1iZXIuXG4gKi9cbmZ1bmN0aW9uIGFkZFRvUGlsZXVwKHJlYWQ6IEludGVydmFsLCBwaWxldXA6IEFycmF5PEludGVydmFsW10+KTogbnVtYmVyIHtcbiAgdmFyIGNob3NlblJvdyA9IC0xO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHBpbGV1cC5sZW5ndGg7IGkrKykge1xuICAgIHZhciByZWFkcyA9IHBpbGV1cFtpXTtcbiAgICB2YXIgb2sgPSB0cnVlO1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVhZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmIChyZWFkc1tqXS5pbnRlcnNlY3RzKHJlYWQpKSB7XG4gICAgICAgIG9rID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvaykge1xuICAgICAgY2hvc2VuUm93ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChjaG9zZW5Sb3cgPT0gLTEpIHtcbiAgICBjaG9zZW5Sb3cgPSBwaWxldXAubGVuZ3RoO1xuICAgIHBpbGV1cFtjaG9zZW5Sb3ddID0gW107ICAvLyBnbyBkZWVwZXJcbiAgfVxuXG4gIHBpbGV1cFtjaG9zZW5Sb3ddLnB1c2gocmVhZCk7XG4gIHJldHVybiBjaG9zZW5Sb3c7XG59XG5cbmV4cG9ydCB0eXBlIEJhc2VQYWlyID0ge1xuICBwb3M6IG51bWJlcjtcbiAgYmFzZVBhaXI6IHN0cmluZztcbiAgcXVhbGl0eTogbnVtYmVyO1xufVxuXG5mdW5jdGlvbiBmaW5kTWlzbWF0Y2hlcyhyZWZlcmVuY2U6IHN0cmluZywgc2VxOiBzdHJpbmcsIHJlZlBvczogbnVtYmVyLCBzY29yZXM6IG51bWJlcltdKTogQmFzZVBhaXJbXSB7XG4gIHZhciBvdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXEubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcG9zID0gcmVmUG9zICsgaSxcbiAgICAgICAgcmVmID0gcmVmZXJlbmNlLmNoYXJBdChpKSxcbiAgICAgICAgYmFzZVBhaXIgPSBzZXEuY2hhckF0KGkpO1xuICAgIGlmIChyZWYgIT0gYmFzZVBhaXIgJiYgcmVmICE9ICcuJykge1xuICAgICAgb3V0LnB1c2goe1xuICAgICAgICBwb3MsXG4gICAgICAgIGJhc2VQYWlyLFxuICAgICAgICBxdWFsaXR5OiBzY29yZXNbaV1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0O1xufVxuXG4vLyBEZXRlcm1pbmUgd2hpY2ggYWxpZ25tZW50IHNlZ21lbnQgdG8gcmVuZGVyIGFzIGFuIGFycm93LlxuLy8gVGhpcyBpcyBlaXRoZXIgdGhlIGZpcnN0IG9yIGxhc3QgJ00nIHNlY3Rpb24sIGV4Y2x1ZGluZyBzb2Z0IGNsaXBwaW5nLlxuZnVuY3Rpb24gZ2V0QXJyb3dJbmRleChyZWFkOiBBbGlnbm1lbnQpOiBudW1iZXIge1xuICB2YXIgaSwgb3AsIG9wcyA9IHJlYWQuY2lnYXJPcHM7XG4gIGlmIChyZWFkLmdldFN0cmFuZCgpID09ICctJykge1xuICAgIGZvciAoaSA9IDA7IGkgPCBvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9wID0gb3BzW2ldO1xuICAgICAgaWYgKG9wLm9wID09ICdTJykgY29udGludWU7XG4gICAgICBpZiAob3Aub3AgPT0gJ00nKSByZXR1cm4gaTtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZm9yIChpID0gb3BzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBvcCA9IG9wc1tpXTtcbiAgICAgIGlmIChvcC5vcCA9PSAnUycpIGNvbnRpbnVlO1xuICAgICAgaWYgKG9wLm9wID09ICdNJykgcmV0dXJuIGk7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLy8gVGhlIGNvbW1lbnRzIGJlbG93IGNvbWUgZnJvbSB0aGUgU0FNIHNwZWNcbnZhciBDaWdhck9wID0ge1xuICBNQVRDSDogJ00nLCAgLy8gYWxpZ25tZW50IG1hdGNoIChjYW4gYmUgYSBzZXF1ZW5jZSBtYXRjaCBvciBtaXNtYXRjaClcbiAgSU5TRVJUOiAnSScsICAvLyBpbnNlcnRpb24gdG8gdGhlIHJlZmVyZW5jZVxuICBERUxFVEU6ICdEJywgIC8vIGRlbGV0aW9uIGZyb20gdGhlIHJlZmVyZW5jZVxuICBTS0lQOiAnTicsICAvLyBza2lwcGVkIHJlZ2lvbiBmcm9tIHRoZSByZWZlcmVuY2VcbiAgU09GVENMSVA6ICdTJywgIC8vIHNvZnQgY2xpcHBpbmcgKGNsaXBwZWQgc2VxdWVuY2VzIHByZXNlbnQgaW4gU0VRKVxuICBIQVJEQ0xJUDogJ0gnLCAgLy8gaGFyZCBjbGlwcGluZyAoY2xpcHBlZCBzZXF1ZW5jZXMgTk9UIHByZXNlbnQgaW4gU0VRKVxuICBQQURESU5HOiAnUCcsICAvLyBwYWRkaW5nIChzaWxlbnQgZGVsZXRpb24gZnJvbSBwYWRkZWQgcmVmZXJlbmNlKVxuICBTRVFNQVRDSDogJz0nLCAgLy8gc2VxdWVuY2UgbWF0Y2hcbiAgU0VRTUlTTUFUQ0g6ICdYJyAgLy8gc2VxdWVuY2UgbWlzbWF0Y2hcbn07XG5cbnR5cGUgT3AgPSB7XG4gIG9wOiBDaWdhclN5bWJvbDtcbiAgbGVuZ3RoOiBudW1iZXI7XG4gIHBvczogbnVtYmVyO1xuICBhcnJvdzogPygnTCd8J1InKTtcbn1cblxuZXhwb3J0IHR5cGUgT3BJbmZvID0ge1xuICBvcHM6IE9wW10sXG4gIG1pc21hdGNoZXM6IEJhc2VQYWlyW11cbn1cblxuZXhwb3J0IHR5cGUgQ292ZXJhZ2VDb3VudCA9IHtcbiAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gIG9wSW5mbzogP09wSW5mb1xufVxuXG4vLyBCcmVha3MgdGhlIHJlYWQgZG93biBpbnRvIENpZ2FyIE9wcyBzdWl0YWJsZSBmb3IgZGlzcGxheVxuZnVuY3Rpb24gZ2V0T3BJbmZvKHJlYWQ6IEFsaWdubWVudCwgcmVmZXJlbmNlU291cmNlOiBPYmplY3QpOiBPcEluZm8ge1xuICB2YXIgb3BzID0gcmVhZC5jaWdhck9wcztcblxuICB2YXIgcmFuZ2UgPSByZWFkLmdldEludGVydmFsKCksXG4gICAgICBzdGFydCA9IHJhbmdlLnN0YXJ0KCksXG4gICAgICBzZXEgPSByZWFkLmdldFNlcXVlbmNlKCksXG4gICAgICBzY29yZXMgPSByZWFkLmdldFF1YWxpdHlTY29yZXMoKSxcbiAgICAgIHNlcVBvcyA9IDAsXG4gICAgICByZWZQb3MgPSBzdGFydCxcbiAgICAgIGFycm93SW5kZXggPSBnZXRBcnJvd0luZGV4KHJlYWQpO1xuXG4gIHZhciByZXN1bHQ6IE9wW10gPSBbXTtcbiAgdmFyIG1pc21hdGNoZXMgPSAoW106IEJhc2VQYWlyW10pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBvcCA9IG9wc1tpXTtcbiAgICBpZiAob3Aub3AgPT0gJ00nKSB7XG4gICAgICB2YXIgcmVmID0gcmVmZXJlbmNlU291cmNlLmdldFJhbmdlQXNTdHJpbmcoe1xuICAgICAgICBjb250aWc6IHJhbmdlLmNvbnRpZyxcbiAgICAgICAgc3RhcnQ6IHJlZlBvcyxcbiAgICAgICAgc3RvcDogcmVmUG9zICsgb3AubGVuZ3RoIC0gMVxuICAgICAgfSk7XG4gICAgICB2YXIgbVNlcSA9IHNlcS5zbGljZShzZXFQb3MsIHNlcVBvcyArIG9wLmxlbmd0aCk7XG4gICAgICBtaXNtYXRjaGVzID0gbWlzbWF0Y2hlcy5jb25jYXQoZmluZE1pc21hdGNoZXMocmVmLCBtU2VxLCByZWZQb3MsIHNjb3JlcykpO1xuICAgIH1cblxuICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgIG9wOiBvcC5vcCxcbiAgICAgIGxlbmd0aDogb3AubGVuZ3RoLFxuICAgICAgcG9zOiByZWZQb3MsXG4gICAgICBhcnJvdzogbnVsbCAvLyBkaXJlY3Rpb24gd2lsbCBiZSBzZXQgYmVsb3dcbiAgICB9KTtcblxuICAgIC8vIFRoZXNlIGFyZSB0aGUgY2lnYXIgb3BlcmF0aW9ucyB3aGljaCBhZHZhbmNlIHBvc2l0aW9uIGluIHRoZSByZWZlcmVuY2VcbiAgICBzd2l0Y2ggKG9wLm9wKSB7XG4gICAgICBjYXNlIENpZ2FyT3AuTUFUQ0g6XG4gICAgICBjYXNlIENpZ2FyT3AuREVMRVRFOlxuICAgICAgY2FzZSBDaWdhck9wLlNLSVA6XG4gICAgICBjYXNlIENpZ2FyT3AuU0VRTUFUQ0g6XG4gICAgICBjYXNlIENpZ2FyT3AuU0VRTUlTTUFUQ0g6XG4gICAgICAgIHJlZlBvcyArPSBvcC5sZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gVGhlc2UgYXJlIHRoZSBjaWdhciBvcGVyYXRpb25zIHdoaWNoIGFkdmFuY2UgdGhlIHBlci1hbGlnbm1lbnQgc2VxdWVuY2UuXG4gICAgc3dpdGNoIChvcC5vcCkge1xuICAgICAgY2FzZSBDaWdhck9wLk1BVENIOlxuICAgICAgY2FzZSBDaWdhck9wLklOU0VSVDpcbiAgICAgIGNhc2UgQ2lnYXJPcC5TT0ZUQ0xJUDpcbiAgICAgIGNhc2UgQ2lnYXJPcC5TRVFNQVRDSDpcbiAgICAgIGNhc2UgQ2lnYXJPcC5TRVFNSVNNQVRDSDpcbiAgICAgICAgc2VxUG9zICs9IG9wLmxlbmd0aDtcbiAgICB9XG5cbiAgfVxuXG4gIGlmIChhcnJvd0luZGV4ID49IDApIHtcbiAgICByZXN1bHRbYXJyb3dJbmRleF0uYXJyb3cgPSByZWFkLmdldFN0cmFuZCgpID09ICctJyA/ICdMJyA6ICdSJztcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgb3BzOiByZXN1bHQsXG4gICAgbWlzbWF0Y2hlc1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgeUZvclJvdyxcbiAgcGlsZXVwLFxuICBhZGRUb1BpbGV1cCxcbiAgZ2V0T3BJbmZvLFxuICBDaWdhck9wXG59O1xuIl19
