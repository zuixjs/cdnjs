(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.pileup = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){t.Backbone=e(t,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){var s=t.Backbone,r=[],a=(r.push,r.slice);r.splice;e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var s=this,r=i.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var s,r,a,o,h,u,l,d;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(o=t?[t]:i.keys(this._events),h=0,u=o.length;h<u;h++)if(t=o[h],a=this._events[t]){if(this._events[t]=s=[],e||n)for(l=0,d=a.length;l<d;l++)r=a[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&u(i,e),n&&u(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var a in s)t=s[a],t.off(e,n,this),(r||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},h=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(h.test(i)){for(var r=i.split(h),a=0,o=r.length;a<o;a++)t[e].apply(t,[r[a]].concat(n));return!1}return!0},u=function(t,e){var i,n=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},l={listenTo:"on",listenToOnce:"once"};i.each(l,function(t,e){o[e]=function(e,n,s){var r=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=i.uniqueId("l"));return r[a]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),o.bind=o.on,o.unbind=o.off,i.extend(e,o);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,r,a,o,h,c,u,l;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;a=n.unset,h=n.silent,o=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),l=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],i.isEqual(l[s],e)||o.push(s),i.isEqual(u[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete l[s]:l[s]=e;if(!h){o.length&&(this._pending=n);for(var d=0,f=o.length;d<f;d++)this.trigger("change:"+o[d],this,l[o[d]],n)}if(c)return this;if(!h)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(s[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return!!e.set(e.parse(i,t),t)&&(n&&n(e,i,t),void e.trigger("sync",e,i,t))},U(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,r,a,o=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},o,s)),void 0===n.parse&&(n.parse=!0);var h=this,c=n.success;return n.success=function(t){h.attributes=o;var e=h.parse(t,n);return n.wait&&(e=i.extend(s||{},e)),!(i.isObject(e)&&!h.set(e,n))&&(c&&c(h,t,n),void h.trigger("sync",h,t,n))},U(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=s),a=this.sync(r,this,n),s&&n.wait&&(this.attributes=o),a},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;U(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||j();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});var f=["keys","values","pairs","invert","pick","omit"];i.each(f,function(t){d.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};i.extend(p.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,v))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var s,r,a,o;for(s=0,r=t.length;s<r;s++)o=t[s]=this.get(t[s]),o&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var s,r,a,o,h,c,u,l=e.at,f=this.model,p=this.comparator&&null==l&&e.sort!==!1,v=i.isString(this.comparator)?this.comparator:null,m=[],y=[],_={},b=e.add,w=e.merge,x=e.remove,E=!(p||!b||!x)&&[];for(s=0,r=t.length;s<r;s++){if(h=t[s]||{},a=h instanceof d?o=h:h[f.prototype.idAttribute||"id"],c=this.get(a))x&&(_[c.cid]=!0),w&&(h=h===o?o.attributes:h,e.parse&&(h=c.parse(h,e)),c.set(h,e),p&&!u&&c.hasChanged(v)&&(u=!0)),t[s]=c;else if(b){if(o=t[s]=this._prepareModel(h,e),!o)continue;m.push(o),this._addReference(o,e)}o=c||o,!E||!o.isNew()&&_[o.id]||E.push(o),_[o.id]=!0}if(x){for(s=0,r=this.length;s<r;++s)_[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,e)}if(m.length||E&&E.length)if(p&&(u=!0),this.length+=m.length,null!=l)for(s=0,r=m.length;s<r;s++)this.models.splice(l+s,0,m[s]);else{E&&(this.models.length=0);var k=E||m;for(s=0,r=k.length;s<r;s++)this.models.push(k[s])}if(u&&this.sort({silent:!0}),!e.silent){for(s=0,r=m.length;s<r;s++)(o=m[s]).trigger("add",o,this,e);(u||E&&E.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;n<s;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(m,function(t){p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){p.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)}});var _=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(_.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(b),r=s[1],a=s[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n):this.$el.on(r,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,s){var r=E[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||j()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",r),o)return o.apply(this,arguments)}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&x&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,h,s),h};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),E={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,S=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(k.prototype,o,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var a=r._extractParameters(t,i);r.execute(s,a),r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),e.history.trigger("route",r,n,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(H,"\\$&").replace(T,"(?:$1)?").replace($,function(t,e){return e?t:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var A=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,R=/msie [\w.]+/,O=/\/$/,P=/#.*$/;A.started=!1,i.extend(A.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(O,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(I,"")},start:function(t){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,r=R.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);if(this.root=("/"+this.root+"/").replace(N,"/"),r&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e!==this.fragment&&(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!A.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(P,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new A;var C=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};d.extend=p.extend=k.extend=_.extend=A.extend=C;var j=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e});

},{"underscore":177}],2:[function(require,module,exports){
var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h||r===u?62:r===c||r===f?63:r<o?-1:r<o+10?r-o+26+26:r<i+26?r-i:r<A+26?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;n<c;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}function e(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}var n,a,h,c=t.length%3,o="";for(n=0,h=t.length-c;n<h;n+=3)a=(t[n]<<16)+(t[n+1]<<8)+t[n+2],o+=e(a);switch(c){case 1:a=t[t.length-1],o+=r(a>>2),o+=r(a<<4&63),o+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],o+=r(a>>10),o+=r(a>>4&63),o+=r(a<<2&63),o+="="}return o}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0),u="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);

},{}],3:[function(require,module,exports){
(function (global){
"use strict";function typedArraySupport(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(t){return this instanceof Buffer?(Buffer.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?fromNumber(this,t):"string"==typeof t?fromString(this,t,arguments.length>1?arguments[1]:"utf8"):fromObject(this,t)):arguments.length>1?new Buffer(t,arguments[1]):new Buffer(t)}function fromNumber(t,e){if(t=allocate(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;r++)t[r]=0;return t}function fromString(t,e,r){"string"==typeof r&&""!==r||(r="utf8");var n=0|byteLength(e,r);return t=allocate(t,n),t.write(e,r),t}function fromObject(t,e){if(Buffer.isBuffer(e))return fromBuffer(t,e);if(isArray(e))return fromArray(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return fromTypedArray(t,e);if(e instanceof ArrayBuffer)return fromArrayBuffer(t,e)}return e.length?fromArrayLike(t,e):fromJsonObject(t,e)}function fromBuffer(t,e){var r=0|checked(e.length);return t=allocate(t,r),e.copy(t,0,0,r),t}function fromArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromTypedArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e){return Buffer.TYPED_ARRAY_SUPPORT?(e.byteLength,t=Buffer._augment(new Uint8Array(e))):t=fromTypedArray(t,new Uint8Array(e)),t}function fromArrayLike(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromJsonObject(t,e){var r,n=0;"Buffer"===e.type&&isArray(e.data)&&(r=e.data,n=0|checked(r.length)),t=allocate(t,n);for(var f=0;f<n;f+=1)t[f]=255&r[f];return t}function allocate(t,e){Buffer.TYPED_ARRAY_SUPPORT?(t=Buffer._augment(new Uint8Array(e)),t.__proto__=Buffer.prototype):(t.length=e,t._isBuffer=!0);var r=0!==e&&e<=Buffer.poolSize>>>1;return r&&(t.parent=rootParent),t}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t,e){if(!(this instanceof SlowBuffer))return new SlowBuffer(t,e);var r=new Buffer(t,e);return delete r.parent,r}function byteLength(t,e){"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if(e=0|e,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),e<0&&(e=0),r>this.length&&(r=this.length),r<=e)return"";for(;;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"binary":return binarySlice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function hexWrite(t,e,r,n){r=Number(r)||0;var f=t.length-r;n?(n=Number(n),n>f&&(n=f)):n=f;var i=e.length;if(i%2!==0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;o++){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function binaryWrite(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],f=e;f<r;){var i=t[f],o=null,u=i>239?4:i>223?3:i>191?2:1;if(f+u<=r){var s,a,h,c;switch(u){case 1:i<128&&(o=i);break;case 2:s=t[f+1],128===(192&s)&&(c=(31&i)<<6|63&s,c>127&&(o=c));break;case 3:s=t[f+1],a=t[f+2],128===(192&s)&&128===(192&a)&&(c=(15&i)<<12|(63&s)<<6|63&a,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:s=t[f+1],a=t[f+2],h=t[f+3],128===(192&s)&&128===(192&a)&&128===(192&h)&&(c=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&h,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),f+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;f++)n+=String.fromCharCode(127&t[f]);return n}function binarySlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;f++)n+=String.fromCharCode(t[f]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=e;i<r;i++)f+=toHex(t[i]);return f}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,f,i){if(!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>f||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var f=0,i=Math.min(t.length-r,2);f<i;f++)t[r+f]=(e&255<<8*(n?f:1-f))>>>8*(n?f:1-f)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var f=0,i=Math.min(t.length-r,4);f<i;f++)t[r+f]=e>>>8*(n?f:3-f)&255}function checkIEEE754(t,e,r,n,f,i){if(e>f||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(r<0)throw new RangeError("index out of range")}function writeFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,f){return f||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,f=null,i=[],o=0;o<n;o++){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!f){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),f=r;continue}r=(f-55296<<10|r-56320)+65536}else f&&(e-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,f,i=[],o=0;o<t.length&&!((e-=2)<0);o++)r=t.charCodeAt(o),n=r>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var f=0;f<n&&!(f+r>=e.length||f>=t.length);f++)e[f+r]=t[f];return f}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("isarray");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT?(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array):(Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0),Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,f=0,i=Math.min(r,n);f<i&&t[f]===e[f];)++f;return f!==i&&(r=t[f],n=e[f]),r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new Buffer(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new Buffer(e),f=0;for(r=0;r<t.length;r++){var i=t[r];i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:Buffer.compare(this,t)},Buffer.prototype.indexOf=function(t,e){function r(t,e,r){for(var n=-1,f=0;r+f<t.length;f++)if(t[r+f]===e[n===-1?0:f-n]){if(n===-1&&(n=f),f-n+1===e.length)return r+n}else n=-1;return-1}if(e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(e<0&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(Buffer.isBuffer(t))return r(this,t,e);if("number"==typeof t)return Buffer.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);throw new TypeError("val must be string, number or Buffer")},Buffer.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},Buffer.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var f=n;n=e,e=0|r,r=f}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"binary":return binaryWrite(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=Buffer._augment(this.subarray(t,e));else{var f=e-t;n=new Buffer(f,void 0);for(var i=0;i<f;i++)n[i]=this[i+t]}return n.length&&(n.parent=this.parent||this),n},Buffer.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return n},Buffer.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t+--e],f=1;e>0&&(f*=256);)n+=this[t+--e]*f;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return f*=128,n>=f&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=e,f=1,i=this[t+--n];n>0&&(f*=256);)i+=this[t+--n]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=1,i=0;for(this[e]=255&t;++i<r&&(f*=256);)this[e+i]=t/f&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=r-1,i=1;for(this[e+f]=255&t;--f>=0&&(i*=256);)this[e+f]=t/i&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=0,o=1,u=t<0?1:0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=r-1,o=1,u=t<0?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f,i=n-r;if(this===t&&r<e&&e<n)for(f=i-1;f>=0;f--)t[f+e]=this[f+r];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;f<i;f++)t[f+e]=this[f+r];else t._set(this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),r<e)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(e<0||e>=this.length)throw new RangeError("start out of bounds");if(r<0||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;n<r;n++)this[n]=t;else{var f=utf8ToBytes(t.toString()),i=f.length;for(n=e;n<r;n++)this[n]=f[n%i]}return this}},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;e<r;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(t){return t.constructor=Buffer,t._isBuffer=!0,t._set=t.set,t.get=BP.get,t.set=BP.set,t.write=BP.write,t.toString=BP.toString,t.toLocaleString=BP.toString,t.toJSON=BP.toJSON,t.equals=BP.equals,t.compare=BP.compare,t.indexOf=BP.indexOf,t.copy=BP.copy,t.slice=BP.slice,t.readUIntLE=BP.readUIntLE,t.readUIntBE=BP.readUIntBE,t.readUInt8=BP.readUInt8,t.readUInt16LE=BP.readUInt16LE,t.readUInt16BE=BP.readUInt16BE,t.readUInt32LE=BP.readUInt32LE,t.readUInt32BE=BP.readUInt32BE,t.readIntLE=BP.readIntLE,t.readIntBE=BP.readIntBE,t.readInt8=BP.readInt8,t.readInt16LE=BP.readInt16LE,t.readInt16BE=BP.readInt16BE,t.readInt32LE=BP.readInt32LE,t.readInt32BE=BP.readInt32BE,t.readFloatLE=BP.readFloatLE,t.readFloatBE=BP.readFloatBE,t.readDoubleLE=BP.readDoubleLE,t.readDoubleBE=BP.readDoubleBE,t.writeUInt8=BP.writeUInt8,t.writeUIntLE=BP.writeUIntLE,t.writeUIntBE=BP.writeUIntBE,t.writeUInt16LE=BP.writeUInt16LE,t.writeUInt16BE=BP.writeUInt16BE,t.writeUInt32LE=BP.writeUInt32LE,t.writeUInt32BE=BP.writeUInt32BE,t.writeIntLE=BP.writeIntLE,t.writeIntBE=BP.writeIntBE,t.writeInt8=BP.writeInt8,t.writeInt16LE=BP.writeInt16LE,t.writeInt16BE=BP.writeInt16BE,t.writeInt32LE=BP.writeInt32LE,t.writeInt32BE=BP.writeInt32BE,t.writeFloatLE=BP.writeFloatLE,t.writeFloatBE=BP.writeFloatBE,t.writeDoubleLE=BP.writeDoubleLE,t.writeDoubleBE=BP.writeDoubleBE,t.fill=BP.fill,t.inspect=BP.inspect,t.toArrayBuffer=BP.toArrayBuffer,t};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"base64-js":2,"ieee754":30,"isarray":31}],4:[function(require,module,exports){
!function(){"use strict";function t(t,e,n){n=n||!1;for(var r in e)!function(r){"function"==typeof e[r]?n||(t[r]=e[r].bind(e)):Object.defineProperty(t,r,{get:function(){return e[r]},set:function(t){e[r]=t}})}(r)}function e(e){t(this,e),this.pushObject=this.popObject=this.reset=function(){}}function n(t){if(t instanceof HTMLCanvasElement)return n(t.getContext("2d"));var r=t;if(u)return u(r);for(var o=0;o<n.cache.length;o++){var i=n.cache[o];if(i[0]==r)return i[1]}var c=new e(r);return n.cache.push([r,c]),c}function r(e){t(this,e,!0);var n=[];this.calls=n;for(var i in e)(function(t){"function"==typeof e[t]&&(this[t]=function(){var r=Array.prototype.slice.call(arguments);return n.push([t].concat(r)),e[t].apply(e,arguments)})}).bind(this)(i);this.pushObject=function(t){n.push(["pushObject",t])},this.popObject=function(){n.push(["popObject"])},this.reset=function(){this.calls=n=[]};var c=this.drawImage;this.drawImage=function(t){var i=r.recorderForCanvas(t);i?(e.drawImage.apply(e,arguments),n=n.concat(o(i.calls,arguments)),this.calls=n):c.apply(e,arguments)}}function o(t,e){var n,r,o=e[0],a=0,s=0,u=o.width,h=o.height,d=o.width,p=o.height;3==e.length?(n=e[1],r=e[2]):5==e.length?(n=e[1],r=e[2],d=e[3],p=e[4]):9==e.length&&(a=e[1],s=e[2],u=e[3],h=e[4],n=e[5],r=e[6],d=e[7],p=e[8]);var v=i(a,a+u,n,n+d),g=c(a,a+u,n,n+d),b=i(s,s+h,r,r+p),C=c(s,s+h,r,r+p),w=function(t){var e=t.slice(),n=e[0];if(n in l){var r=l[n];"number"==typeof r&&(r=[r]),r.forEach(function(t){e[1+t]=g(e[1+t]),e[2+t]=C(e[2+t])})}if(n in f){var o=f[n];"number"==typeof o&&(o=[o]),o.forEach(function(t){e[1+t]*=v,e[2+t]*=b})}return e};return t.map(w)}function i(t,e,n,r){return(r-n)/(e-t)}function c(t,e,n,r){var o=i(t,e,n,r);return function(e){return n+o*(e-t)}}function a(t,e){if(t)return r.recorderForSelector(t,e);if(r.recorders){if(0==r.recorders.length)throw"Called a RecordingContext method, but no canvases are being recorded.";if(r.recorders.length>1)throw"Called a RecordingContext method while multiple canvases were being recorded. Specify one using a div and selector.";return r.recorders[0][1]}throw"You must call RecordingContext.recordAll() before using other RecordingContext static methods"}function s(e,n,r){function o(){c.hits.unshift(Array.prototype.slice.call(i)),c.hit=c.hits[0]}t(this,e);var i=[];this.hits=[],this.hit=null;var c=this;this.pushObject=function(t){i.unshift(t)},this.popObject=function(){i.shift()},this.reset=function(){this.hits=[],this.hit=null},this.clearRect=function(t,e,n,r){},this.fillRect=function(t,e,i,c){n>=t&&n<=t+i&&r>=e&&r<=e+c&&o()},this.strokeRect=function(t,e,n,r){},this.fill=function(t){e.isPointInPath(n,r)&&o()},this.stroke=function(){e.isPointInStroke(n,r)&&o()},this.fillText=function(t,e,n,r){},this.strokeText=function(t,e,n,r){}}var u=null;n.cache=[];var l={clearRect:0,fillRect:0,strokeRect:0,fillText:1,strokeText:1,moveTo:0,lineTo:0,bezierCurveTo:[0,2,4],quadraticCurveTo:[0,2],rect:0},f={clearRect:2,fillRect:2,strokeRect:2,rect:2};r.prototype.drawnObjectsWith=function(t){return t||(t=function(){return!0}),this.callsOf("pushObject").filter(function(e){return t(e[1])}).map(function(t){return t[1]})},r.prototype.drawnObjects=r.prototype.drawnObjectsWith,r.prototype.callsOf=function(t){return this.calls.filter(function(e){return e[0]==t})},r.recordAll=function(){if(null!=u)throw"You forgot to call RecordingContext.reset()";r.recorders=[],u=function(t){var e=r.recorderForCanvas(t.canvas);return e?e:(e=new r(t),r.recorders.push([t.canvas,e]),e)}},r.reset=function(){if(!u)throw"Called RecordingContext.reset() before RecordingContext.recordAll()";u=null,r.recorders=null},r.recorderForCanvas=function(t){var e=r.recorders;if(null==e)throw"You must call RecordingContext.recordAll() before using other RecordingContext static methods";for(var n=0;n<e.length;n++){var o=e[n];if(o[0]==t)return o[1]}return null},r.recorderForSelector=function(t,e){var n=t.querySelector(e+" canvas")||t.querySelector(e);if(!n)throw"Unable to find a canvas matching "+e;if(!(n instanceof HTMLCanvasElement))throw"Selector "+e+" neither matches nor contains a canvas";return r.recorderForCanvas(n)},r.drawnObjectsWith=function(t,e,n){"function"!=typeof t&&0!=arguments.length||(n=t,t=null);var r=a(t,e);return n=n||function(){return!0},r?r.drawnObjectsWith(n):[]},r.drawnObjects=r.drawnObjectsWith,r.callsOf=function(t,e,n){"string"==typeof t&&(n=t,t=null);var r=a(t,e);return r?r.callsOf(n):[]};var h={DataContext:e,RecordingContext:r,ClickTrackingContext:s,getDataContext:n};"undefined"!=typeof module?module.exports=h:window.dataCanvas=h}();

},{}],5:[function(require,module,exports){
"use strict";var emptyFunction=require("./emptyFunction"),EventListener={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:emptyFunction}},registerDefault:function(){}};module.exports=EventListener;

},{"./emptyFunction":12}],6:[function(require,module,exports){
"use strict";var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:canUseDOM&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:canUseDOM&&!!window.screen,isInWorker:!canUseDOM};module.exports=ExecutionEnvironment;

},{}],7:[function(require,module,exports){
"use strict";function camelize(e){return e.replace(_hyphenPattern,function(e,t){return t.toUpperCase()})}var _hyphenPattern=/-(.)/g;module.exports=camelize;

},{}],8:[function(require,module,exports){
"use strict";function camelizeStyleName(e){return camelize(e.replace(msPattern,"ms-"))}var camelize=require("./camelize"),msPattern=/^-ms-/;module.exports=camelizeStyleName;

},{"./camelize":7}],9:[function(require,module,exports){
"use strict";function containsNode(e,o){var t=!0;e:for(;t;){var n=e,i=o;if(t=!1,n&&i){if(n===i)return!0;if(isTextNode(n))return!1;if(isTextNode(i)){e=n,o=i.parentNode,t=!0;continue e}return n.contains?n.contains(i):!!n.compareDocumentPosition&&!!(16&n.compareDocumentPosition(i))}return!1}}var isTextNode=require("./isTextNode");module.exports=containsNode;

},{"./isTextNode":22}],10:[function(require,module,exports){
"use strict";function hasArrayNature(r){return!!r&&("object"==typeof r||"function"==typeof r)&&"length"in r&&!("setInterval"in r)&&"number"!=typeof r.nodeType&&(Array.isArray(r)||"callee"in r||"item"in r)}function createArrayFromMixed(r){return hasArrayNature(r)?Array.isArray(r)?r.slice():toArray(r):[r]}var toArray=require("./toArray");module.exports=createArrayFromMixed;

},{"./toArray":28}],11:[function(require,module,exports){
"use strict";function getNodeName(e){var r=e.match(nodeNamePattern);return r&&r[1].toLowerCase()}function createNodesFromMarkup(e,r){var a=dummyNode;dummyNode?void 0:invariant(!1);var t=getNodeName(e),n=t&&getMarkupWrap(t);if(n){a.innerHTML=n[1]+e+n[2];for(var i=n[0];i--;)a=a.lastChild}else a.innerHTML=e;var o=a.getElementsByTagName("script");o.length&&(r?void 0:invariant(!1),createArrayFromMixed(o).forEach(r));for(var d=createArrayFromMixed(a.childNodes);a.lastChild;)a.removeChild(a.lastChild);return d}var ExecutionEnvironment=require("./ExecutionEnvironment"),createArrayFromMixed=require("./createArrayFromMixed"),getMarkupWrap=require("./getMarkupWrap"),invariant=require("./invariant"),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,nodeNamePattern=/^\s*<(\w+)/;module.exports=createNodesFromMarkup;

},{"./ExecutionEnvironment":6,"./createArrayFromMixed":10,"./getMarkupWrap":16,"./invariant":20}],12:[function(require,module,exports){
"use strict";function makeEmptyFunction(t){return function(){return t}}function emptyFunction(){}emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(t){return t},module.exports=emptyFunction;

},{}],13:[function(require,module,exports){
"use strict";var emptyObject={};module.exports=emptyObject;

},{}],14:[function(require,module,exports){
"use strict";function focusNode(o){try{o.focus()}catch(o){}}module.exports=focusNode;

},{}],15:[function(require,module,exports){
"use strict";function getActiveElement(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}module.exports=getActiveElement;

},{}],16:[function(require,module,exports){
"use strict";function getMarkupWrap(e){return dummyNode?void 0:invariant(!1),markupWrap.hasOwnProperty(e)||(e="*"),shouldWrap.hasOwnProperty(e)||("*"===e?dummyNode.innerHTML="<link />":dummyNode.innerHTML="<"+e+"></"+e+">",shouldWrap[e]=!dummyNode.firstChild),shouldWrap[e]?markupWrap[e]:null}var ExecutionEnvironment=require("./ExecutionEnvironment"),invariant=require("./invariant"),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,shouldWrap={},selectWrap=[1,'<select multiple="true">',"</select>"],tableWrap=[1,"<table>","</table>"],trWrap=[3,"<table><tbody><tr>","</tr></tbody></table>"],svgWrap=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],markupWrap={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:selectWrap,option:selectWrap,caption:tableWrap,colgroup:tableWrap,tbody:tableWrap,tfoot:tableWrap,thead:tableWrap,td:trWrap,th:trWrap},svgElements=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];svgElements.forEach(function(e){markupWrap[e]=svgWrap,shouldWrap[e]=!0}),module.exports=getMarkupWrap;

},{"./ExecutionEnvironment":6,"./invariant":20}],17:[function(require,module,exports){
"use strict";function getUnboundedScrollPosition(o){return o===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:o.scrollLeft,y:o.scrollTop}}module.exports=getUnboundedScrollPosition;

},{}],18:[function(require,module,exports){
"use strict";function hyphenate(e){return e.replace(_uppercasePattern,"-$1").toLowerCase()}var _uppercasePattern=/([A-Z])/g;module.exports=hyphenate;

},{}],19:[function(require,module,exports){
"use strict";function hyphenateStyleName(e){return hyphenate(e).replace(msPattern,"-ms-")}var hyphenate=require("./hyphenate"),msPattern=/^ms-/;module.exports=hyphenateStyleName;

},{"./hyphenate":18}],20:[function(require,module,exports){
"use strict";function invariant(e,n,r,i,o,a,t,f){if(!e){var s;if(void 0===n)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,i,o,a,t,f],l=0;s=new Error(n.replace(/%s/g,function(){return d[l++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}module.exports=invariant;

},{}],21:[function(require,module,exports){
"use strict";function isNode(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}module.exports=isNode;

},{}],22:[function(require,module,exports){
"use strict";function isTextNode(e){return isNode(e)&&3==e.nodeType}var isNode=require("./isNode");module.exports=isTextNode;

},{"./isNode":21}],23:[function(require,module,exports){
"use strict";var invariant=require("./invariant"),keyMirror=function(r){var i,n={};r instanceof Object&&!Array.isArray(r)?void 0:invariant(!1);for(i in r)r.hasOwnProperty(i)&&(n[i]=i);return n};module.exports=keyMirror;

},{"./invariant":20}],24:[function(require,module,exports){
"use strict";var keyOf=function(r){var e;for(e in r)if(r.hasOwnProperty(e))return e;return null};module.exports=keyOf;

},{}],25:[function(require,module,exports){
"use strict";function mapObject(r,t,e){if(!r)return null;var a={};for(var n in r)hasOwnProperty.call(r,n)&&(a[n]=t.call(e,r[n],n,r));return a}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=mapObject;

},{}],26:[function(require,module,exports){
"use strict";function memoizeStringOnly(n){var r={};return function(t){return r.hasOwnProperty(t)||(r[t]=n.call(this,t)),r[t]}}module.exports=memoizeStringOnly;

},{}],27:[function(require,module,exports){
"use strict";function shallowEqual(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=hasOwnProperty.bind(t),l=0;l<r.length;l++)if(!o(r[l])||e[r[l]]!==t[r[l]])return!1;return!0}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=shallowEqual;

},{}],28:[function(require,module,exports){
"use strict";function toArray(r){var t=r.length;if(Array.isArray(r)||"object"!=typeof r&&"function"!=typeof r?invariant(!1):void 0,"number"!=typeof t?invariant(!1):void 0,0===t||t-1 in r?void 0:invariant(!1),r.hasOwnProperty)try{return Array.prototype.slice.call(r)}catch(r){}for(var a=Array(t),i=0;i<t;i++)a[i]=r[i];return a}var invariant=require("./invariant");module.exports=toArray;

},{"./invariant":20}],29:[function(require,module,exports){
"use strict";var emptyFunction=require("./emptyFunction"),warning=emptyFunction;module.exports=warning;

},{"./emptyFunction":12}],30:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:(s?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};

},{}],31:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};

},{}],32:[function(require,module,exports){
!function(t){var e=this;"object"==typeof exports?module.exports=t(e,require("jdataview")):"function"==typeof define&&define.amd?define(["jdataview"],function(i){return t(e,i)}):e.jBinary=t(e,e.jDataView)}(function(t,e){"use strict";function i(t,e){return e&&t instanceof e}function n(t){for(var e=1,i=arguments.length;i>e;++e){var n=arguments[e];for(var r in n)void 0!==n[r]&&(t[r]=n[r])}return t}function r(t){return arguments[0]=l(t),n.apply(null,arguments)}function a(t,e,n){return i(n,Function)?n.call(t,e.contexts[0]):n}function s(t){return function(){var e=arguments,n=e.length-1,r=t.length-1,a=e[n];if(e.length=r+1,!i(a,Function)){var s=this;return new f(function(i,n){e[r]=function(t,e){return t?n(t):i(e)},t.apply(s,e)})}e[n]=void 0,e[r]=a,t.apply(this,e)}}function o(t,n){return i(t,o)?t.as(n):(i(t,e)||(t=new e(t,void 0,void 0,n?n["jBinary.littleEndian"]:void 0)),i(this,o)?(this.view=t,this.view.seek(0),this.contexts=[],this.as(n,!0)):new o(t,n))}function h(t){return r(h.prototype,t)}function u(t){return r(u.prototype,t,{createProperty:function(){var e=(t.createProperty||u.prototype.createProperty).apply(this,arguments);return e.getBaseType&&(e.baseType=e.binary.getType(e.getBaseType(e.binary.contexts[0]))),e}})}var c=t.document;"atob"in t&&"btoa"in t||!function(){function e(t){var e,i,r,a,s,o;for(r=t.length,i=0,e="";r>i;){if(a=255&t.charCodeAt(i++),i==r){e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4),e+="==";break}if(s=t.charCodeAt(i++),i==r){e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4|(240&s)>>4),e+=n.charAt((15&s)<<2),e+="=";break}o=t.charCodeAt(i++),e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4|(240&s)>>4),e+=n.charAt((15&s)<<2|(192&o)>>6),e+=n.charAt(63&o)}return e}function i(t){var e,i,n,a,s,o,h;for(o=t.length,s=0,h="";o>s;){do e=r[255&t.charCodeAt(s++)];while(o>s&&-1==e);if(-1==e)break;do i=r[255&t.charCodeAt(s++)];while(o>s&&-1==i);if(-1==i)break;h+=String.fromCharCode(e<<2|(48&i)>>4);do{if(n=255&t.charCodeAt(s++),61==n)return h;n=r[n]}while(o>s&&-1==n);if(-1==n)break;h+=String.fromCharCode((15&i)<<4|(60&n)>>2);do{if(a=255&t.charCodeAt(s++),61==a)return h;a=r[a]}while(o>s&&-1==a);if(-1==a)break;h+=String.fromCharCode((3&n)<<6|a)}return h}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];t.btoa||(t.btoa=e),t.atob||(t.atob=i)}();var f=t.Promise||function(t){this.then=t},l=Object.create;l||(l=function(t){var e=function(){};return e.prototype=t,new e});var p=o.prototype,y=p.typeSet={};p.toValue=function(t){return a(this,this,t)},p._named=function(t,e,i){return t.displayName=e+" @ "+(void 0!==i?i:this.view.tell()),t};var d=Object.defineProperty;if(d)try{d({},"x",{})}catch(t){d=void 0}else d=function(t,e,i,n){n&&(t[e]=i.value)};var v="jBinary.Cache",b=0;if(p._getCached=function(t,e,i){if(t.hasOwnProperty(this.cacheKey))return t[this.cacheKey];var n=e.call(this,t);return d(t,this.cacheKey,{value:n},i),n},p.getContext=function(t){switch(typeof t){case"undefined":t=0;case"number":return this.contexts[t];case"string":return this.getContext(function(e){return t in e});case"function":for(var e=0,i=this.contexts.length;i>e;e++){var n=this.contexts[e];if(t.call(this,n))return n}}},p.inContext=function(t,e){this.contexts.unshift(t);var i=e.call(this);return this.contexts.shift(),i},h.prototype={inherit:function(t,e){function i(t,e){var i=a[t];i&&(n||(n=r(a)),e.call(n,i),n[t]=null)}var n,a=this;return i("params",function(e){for(var i=0,n=e.length;n>i;i++)this[e[i]]=t[i]}),i("setParams",function(e){e.apply(this,t)}),i("typeParams",function(t){for(var i=0,n=t.length;n>i;i++){var r=t[i],a=this[r];a&&(this[r]=e(a))}}),i("resolve",function(t){t.call(this,e)}),n||a},createProperty:function(t){return r(this,{binary:t,view:t.view})},toValue:function(t,e){return e!==!1&&"string"==typeof t?this.binary.getContext(t)[t]:a(this,this.binary,t)}},o.Type=h,u.prototype=r(h.prototype,{setParams:function(){this.baseType&&(this.typeParams=["baseType"].concat(this.typeParams||[]))},baseRead:function(){return this.binary.read(this.baseType)},baseWrite:function(t){return this.binary.write(this.baseType,t)}}),n(u.prototype,{read:u.prototype.baseRead,write:u.prototype.baseWrite}),o.Template=u,p.as=function(t,e){var i=e?this:r(this);return t=t||y,i.typeSet=t===y||y.isPrototypeOf(t)?t:r(y,t),i.cacheKey=v,i.cacheKey=i._getCached(t,function(){return v+"."+ ++b},!0),i},p.seek=function(t,e){if(t=this.toValue(t),void 0!==e){var i=this.view.tell();this.view.seek(t);var n=e.call(this);return this.view.seek(i),n}return this.view.seek(t)},p.tell=function(){return this.view.tell()},p.skip=function(t,e){return this.seek(this.tell()+this.toValue(t),e)},p.slice=function(t,e,i){return new o(this.view.slice(t,e,i),this.typeSet)},p._getType=function(t,e){switch(typeof t){case"string":if(!(t in this.typeSet))throw new ReferenceError("Unknown type: "+t);return this._getType(this.typeSet[t],e);case"number":return this._getType(y.bitfield,[t]);case"object":if(i(t,h)){var n=this;return t.inherit(e||[],function(t){return n.getType(t)})}return i(t,Array)?this._getCached(t,function(t){return this.getType(t[0],t.slice(1))},!0):this._getCached(t,function(t){return this.getType(y.object,[t])},!1)}},p.getType=function(t,e){var n=this._getType(t,e);return n&&!i(t,h)&&(n.name="object"==typeof t?i(t,Array)?t[0]+"("+t.slice(1).join(", ")+")":"object":String(t)),n},p._action=function(t,e,i){if(void 0!==t){t=this.getType(t);var n=this._named(function(){return i.call(this,t.createProperty(this),this.contexts[0])},"["+t.name+"]",e);return void 0!==e?this.seek(e,n):n.call(this)}},p.read=function(t,e){return this._action(t,e,function(t,e){return t.read(e)})},p.readAll=function(){return this.read("jBinary.all",0)},p.write=function(t,e,i){return this._action(t,i,function(t,i){var n=this.tell();return t.write(e,i),this.tell()-n})},p.writeAll=function(t){return this.write("jBinary.all",t,0)},function(t,e){for(var i=0,n=e.length;n>i;i++){var a=e[i];y[a.toLowerCase()]=r(t,{dataType:a})}}(h({params:["littleEndian"],read:function(){return this.view["get"+this.dataType](void 0,this.littleEndian)},write:function(t){this.view["write"+this.dataType](t,this.littleEndian)}}),["Uint8","Uint16","Uint32","Uint64","Int8","Int16","Int32","Int64","Float32","Float64","Char"]),n(y,{byte:y.uint8,float:y.float32,double:y.float64}),y.array=u({params:["baseType","length"],read:function(){var t=this.toValue(this.length);if(this.baseType===y.uint8)return this.view.getBytes(t,void 0,!0,!0);var e;if(void 0!==t){e=new Array(t);for(var i=0;t>i;i++)e[i]=this.baseRead()}else{var n=this.view.byteLength;for(e=[];this.binary.tell()<n;)e.push(this.baseRead())}return e},write:function(t){if(this.baseType===y.uint8)return this.view.writeBytes(t);for(var e=0,i=t.length;i>e;e++)this.baseWrite(t[e])}}),y.binary=u({params:["length","typeSet"],read:function(){var t=this.binary.tell(),e=this.binary.skip(this.toValue(this.length)),i=this.view.slice(t,e);return new o(i,this.typeSet)},write:function(t){this.binary.write("blob",t.read("blob",0))}}),y.bitfield=h({params:["bitSize"],read:function(){return this.view.getUnsigned(this.bitSize)},write:function(t){this.view.writeUnsigned(t,this.bitSize)}}),y.blob=h({params:["length"],read:function(){return this.view.getBytes(this.toValue(this.length))},write:function(t){this.view.writeBytes(t,!0)}}),y.const=u({params:["baseType","value","strict"],read:function(){var t=this.baseRead();if(this.strict&&t!==this.value){if(i(this.strict,Function))return this.strict(t);throw new TypeError("Unexpected value ("+t+" !== "+this.value+").")}return t},write:function(t){this.baseWrite(this.strict||void 0===t?this.value:t)}}),y.enum=u({params:["baseType","matches"],setParams:function(t,e){this.backMatches={};for(var i in e)this.backMatches[e[i]]=i},read:function(){var t=this.baseRead();return t in this.matches?this.matches[t]:t},write:function(t){this.baseWrite(t in this.backMatches?this.backMatches[t]:t)}}),y.extend=h({setParams:function(){this.parts=arguments},resolve:function(t){for(var e=this.parts,i=e.length,n=new Array(i),r=0;i>r;r++)n[r]=t(e[r]);this.parts=n},read:function(){var t=this.parts,e=this.binary.read(t[0]);return this.binary.inContext(e,function(){for(var i=1,r=t.length;r>i;i++)n(e,this.read(t[i]))}),e},write:function(t){var e=this.parts;this.binary.inContext(t,function(){for(var i=0,n=e.length;n>i;i++)this.write(e[i],t)})}}),y.if=u({params:["condition","trueType","falseType"],typeParams:["trueType","falseType"],getBaseType:function(){return this.toValue(this.condition)?this.trueType:this.falseType}}),y.if_not=y.ifNot=u({setParams:function(t,e,i){this.baseType=["if",t,i,e]}}),y.lazy=u({marker:"jBinary.Lazy",params:["innerType","length"],getBaseType:function(){return["binary",this.length,this.binary.typeSet]},read:function(){var t=function(e){return 0===arguments.length?"value"in t?t.value:t.value=t.binary.read(t.innerType):n(t,{wasChanged:!0,value:e}).value};return t[this.marker]=!0,n(t,{binary:n(this.baseRead(),{contexts:this.binary.contexts.slice()}),innerType:this.innerType})},write:function(t){t.wasChanged||!t[this.marker]?this.binary.write(this.innerType,t()):this.baseWrite(t.binary)}}),y.object=h({params:["structure","proto"],resolve:function(t){var e={};for(var n in this.structure)e[n]=i(this.structure[n],Function)?this.structure[n]:t(this.structure[n]);this.structure=e},read:function(){var t=this,e=this.structure,n=this.proto?r(this.proto):{};return this.binary.inContext(n,function(){for(var r in e)this._named(function(){var a=i(e[r],Function)?e[r].call(t,n):this.read(e[r]);void 0!==a&&(n[r]=a)},r).call(this)}),n},write:function(t){var e=this,n=this.structure;this.binary.inContext(t,function(){for(var r in n)this._named(function(){i(n[r],Function)?t[r]=n[r].call(e,t):this.write(n[r],t[r])},r).call(this)})}}),y.skip=h({params:["length"],read:function(){this.view.skip(this.toValue(this.length))},write:function(){this.read()}}),y.string=u({params:["length","encoding"],read:function(){return this.view.getString(this.toValue(this.length),void 0,this.encoding)},write:function(t){this.view.writeString(t,this.encoding)}}),y.string0=h({params:["length","encoding"],read:function(){var t=this.view,e=this.length;if(void 0===e){var i,n=t.tell(),r=0;for(e=t.byteLength-n;e>r&&(i=t.getUint8());)r++;var a=t.getString(r,n,this.encoding);return e>r&&t.skip(1),a}return t.getString(e,void 0,this.encoding).replace(/\0.*$/,"")},write:function(t){var e=this.view,i=void 0===this.length?1:this.length-t.length;e.writeString(t,void 0,this.encoding),i>0&&(e.writeUint8(0),e.skip(i-1))}}),o.loadData=s(function(e,n){var r;if(i(e,t.Blob)){var a;if("FileReader"in t)a=new FileReader,a.onload=a.onerror=function(){n(this.error,this.result)},a.readAsArrayBuffer(e);else{a=new FileReaderSync;var s,o;try{o=a.readAsArrayBuffer(e)}catch(t){s=t}finally{n(s,o)}}}else if("string"!=typeof e)n(new TypeError("Unsupported source type."));else if(r=e.match(/^data:(.+?)(;base64)?,(.*)$/))try{var h=r[2],u=r[3];n(null,(h?atob:decodeURIComponent)(u))}catch(t){n(t)}else if("XMLHttpRequest"in t){var c=new XMLHttpRequest;c.open("GET",e,!0),"responseType"in c?c.responseType="arraybuffer":"overrideMimeType"in c?c.overrideMimeType("text/plain; charset=x-user-defined"):c.setRequestHeader("Accept-Charset","x-user-defined"),"onload"in c||(c.onreadystatechange=function(){4===this.readyState&&this.onload()});var f=function(t){n(new Error(t))};c.onload=function(){return 0!==this.status&&200!==this.status?f("HTTP Error #"+this.status+": "+this.statusText):("response"in this||(this.response=new VBArray(this.responseBody).toArray()),void n(null,this.response))},c.onerror=function(){f("Network error.")},c.send(null)}else n(new TypeError("Unsupported source type."))}),o.load=s(function(t,e,i){var n=o.loadData(t);o.load.getTypeSet(t,e,function(t){n.then(function(e){i(null,new o(e,t))},i)})}),o.load.getTypeSet=function(t,e,i){i(e)},p._toURI="URL"in t&&"createObjectURL"in URL?function(t){var e=this.seek(0,function(){return this.view.getBytes()});return URL.createObjectURL(new Blob([e],{type:t}))}:function(t){var e=this.seek(0,function(){return this.view.getString(void 0,void 0,"binary")});return"data:"+t+";base64,"+btoa(e)},p._mimeType=function(t){return t||this.typeSet["jBinary.mimeType"]||"application/octet-stream"},p.toURI=function(t){return this._toURI(this._mimeType(t))},c){var g=o.downloader=c.createElement("a");g.style.display="none"}return p.saveAs=s(function(t,e,i){"string"==typeof t?("msSaveBlob"in navigator?navigator.msSaveBlob(new Blob([this.read("blob",0)],{type:this._mimeType(e)}),t):c?(g.parentNode||c.body.appendChild(g),g.href=this.toURI(e),g.download=t,g.click(),g.href=g.download=""):i(new TypeError("Saving from Web Worker is not supported.")),i()):i(new TypeError("Unsupported storage type."))}),o});

},{"jdataview":33}],33:[function(require,module,exports){
(function (Buffer){
!function(t){var e=this;module.exports=t(e)}(function(t){"use strict";function e(t,e){return"object"==typeof t&&null!==t&&(t.constructor===e||Object.prototype.toString.call(t)==="[object "+e.name+"]")}function i(t,i){return!i&&e(t,Array)?t:Array.prototype.slice.call(t)}function n(t,e){return void 0!==t?t:e}function r(t,i,f,s){if(r.is(t)){var o=t.slice(i,i+f);return o._littleEndian=n(s,o._littleEndian),o}if(!r.is(this))return new r(t,i,f,s);if(this.buffer=t=r.wrapBuffer(t),this._isArrayBuffer=h.ArrayBuffer&&e(t,ArrayBuffer),this._isPixelData=!1,this._isDataView=h.DataView&&this._isArrayBuffer,this._isNodeBuffer=h.NodeBuffer&&e(t,Buffer),!this._isNodeBuffer&&!this._isArrayBuffer&&!e(t,Array))throw new TypeError("jDataView buffer has an incompatible type");this._littleEndian=!!s;var u="byteLength"in t?t.byteLength:t.length;this.byteOffset=i=n(i,0),this.byteLength=f=n(f,u-i),this._offset=this._bitOffset=0,this._isDataView?this._view=new DataView(t,i,f):this._checkBounds(i,f,u),this._engineAction=this._isDataView?this._dataViewAction:this._isNodeBuffer?this._nodeBufferAction:this._isArrayBuffer?this._arrayBufferAction:this._arrayAction}function f(t){if(h.NodeBuffer)return new Buffer(t,"binary");for(var e=h.ArrayBuffer?Uint8Array:Array,i=new e(t.length),n=0,r=t.length;r>n;n++)i[n]=255&t.charCodeAt(n);return i}function s(t){return t>=0&&31>t?1<<t:s[t]||(s[t]=Math.pow(2,t))}function o(t,e){this.lo=t,this.hi=e}function u(){o.apply(this,arguments)}var h={NodeBuffer:"Buffer"in t,DataView:"DataView"in t,ArrayBuffer:"ArrayBuffer"in t,PixelData:!1},a=t.TextEncoder,_=t.TextDecoder;h.NodeBuffer&&!function(t){try{t.writeFloatLE(1/0,0)}catch(t){h.NodeBuffer=!1}}(new Buffer(4));var c={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};r.wrapBuffer=function(t){switch(typeof t){case"number":if(h.NodeBuffer)t=new Buffer(t),t.fill(0);else if(h.ArrayBuffer)t=new Uint8Array(t).buffer;else{t=new Array(t);for(var n=0;n<t.length;n++)t[n]=0}return t;case"string":t=f(t);default:return"length"in t&&!(h.NodeBuffer&&e(t,Buffer)||h.ArrayBuffer&&e(t,ArrayBuffer))&&(h.NodeBuffer?t=new Buffer(t):h.ArrayBuffer?e(t,ArrayBuffer)||(t=new Uint8Array(t).buffer,e(t,ArrayBuffer)||(t=new Uint8Array(i(t,!0)).buffer)):t=i(t)),t}},r.is=function(t){return t&&t.jDataView},r.from=function(){return new r(arguments)},r.Uint64=o,o.prototype={valueOf:function(){return this.lo+s(32)*this.hi},toString:function(){return Number.prototype.toString.apply(this.valueOf(),arguments)}},o.fromNumber=function(t){var e=Math.floor(t/s(32)),i=t-e*s(32);return new o(i,e)},r.Int64=u,u.prototype="create"in Object?Object.create(o.prototype):new o,u.prototype.valueOf=function(){return this.hi<s(31)?o.prototype.valueOf.apply(this,arguments):-(s(32)-this.lo+s(32)*(s(32)-1-this.hi))},u.fromNumber=function(t){var e,i;if(t>=0){var n=o.fromNumber(t);e=n.lo,i=n.hi}else i=Math.floor(t/s(32)),e=t-i*s(32),i+=s(32);return new u(e,i)};var y=r.prototype={compatibility:h,jDataView:!0,_checkBounds:function(t,e,i){if("number"!=typeof t)throw new TypeError("Offset is not a number.");if("number"!=typeof e)throw new TypeError("Size is not a number.");if(0>e)throw new RangeError("Length is negative.");if(0>t||t+e>n(i,this.byteLength))throw new RangeError("Offsets are out of bounds.")},_action:function(t,e,i,r,f){return this._engineAction(t,e,n(i,this._offset),n(r,this._littleEndian),f)},_dataViewAction:function(t,e,i,n,r){return this._offset=i+c[t],e?this._view["get"+t](i,n):this._view["set"+t](i,r,n)},_arrayBufferAction:function(e,i,r,f,s){var o,u=c[e],h=t[e+"Array"];if(f=n(f,this._littleEndian),1===u||(this.byteOffset+r)%u===0&&f)return o=new h(this.buffer,this.byteOffset+r,1),this._offset=r+u,i?o[0]:o[0]=s;var a=new Uint8Array(i?this.getBytes(u,r,f,!0):u);return o=new h(a.buffer,0,1),i?o[0]:(o[0]=s,void this._setBytes(r,a,f))},_arrayAction:function(t,e,i,n,r){return e?this["_get"+t](i,n):this["_set"+t](i,r,n)},_getBytes:function(t,e,r){r=n(r,this._littleEndian),e=n(e,this._offset),t=n(t,this.byteLength-e),this._checkBounds(e,t),e+=this.byteOffset,this._offset=e-this.byteOffset+t;var f=this._isArrayBuffer?new Uint8Array(this.buffer,e,t):(this.buffer.slice||Array.prototype.slice).call(this.buffer,e,e+t);return r||1>=t?f:i(f).reverse()},getBytes:function(t,e,r,f){var s=this._getBytes(t,e,n(r,!0));return f?i(s):s},_setBytes:function(t,e,r){var f=e.length;if(0!==f){if(r=n(r,this._littleEndian),t=n(t,this._offset),this._checkBounds(t,f),!r&&f>1&&(e=i(e,!0).reverse()),t+=this.byteOffset,this._isArrayBuffer)new Uint8Array(this.buffer,t,f).set(e);else if(this._isNodeBuffer)new Buffer(e).copy(this.buffer,t);else for(var s=0;f>s;s++)this.buffer[t+s]=e[s];this._offset=t-this.byteOffset+f}},setBytes:function(t,e,i){this._setBytes(t,e,n(i,!0))},getString:function(t,e,i){if(this._isNodeBuffer)return e=n(e,this._offset),t=n(t,this.byteLength-e),this._checkBounds(e,t),this._offset=e+t,this.buffer.toString(i||"binary",this.byteOffset+e,this.byteOffset+this._offset);var r=this._getBytes(t,e,!0);if(i="utf8"===i?"utf-8":i||"binary",_&&"binary"!==i)return new _(i).decode(this._isArrayBuffer?r:new Uint8Array(r));var f="";t=r.length;for(var s=0;t>s;s++)f+=String.fromCharCode(r[s]);return"utf-8"===i&&(f=decodeURIComponent(escape(f))),f},setString:function(t,e,i){if(this._isNodeBuffer)return t=n(t,this._offset),this._checkBounds(t,e.length),void(this._offset=t+this.buffer.write(e,this.byteOffset+t,i||"binary"));i="utf8"===i?"utf-8":i||"binary";var r;a&&"binary"!==i?r=new a(i).encode(e):("utf-8"===i&&(e=unescape(encodeURIComponent(e))),r=f(e)),this._setBytes(t,r,!0)},getChar:function(t){return this.getString(1,t)},setChar:function(t,e){this.setString(t,e)},tell:function(){return this._offset},seek:function(t){return this._checkBounds(t,0),this._offset=t},skip:function(t){return this.seek(this._offset+t)},slice:function(t,e,i){function f(t,e){return 0>t?t+e:t}return t=f(t,this.byteLength),e=f(n(e,this.byteLength),this.byteLength),i?new r(this.getBytes(e-t,t,!0,!0),void 0,void 0,this._littleEndian):new r(this.buffer,this.byteOffset+t,e-t,this._littleEndian)},alignBy:function(t){return this._bitOffset=0,1!==n(t,1)?this.skip(t-(this._offset%t||t)):this._offset},_getFloat64:function(t,e){var i=this._getBytes(8,t,e),n=1-2*(i[7]>>7),r=((i[7]<<1&255)<<3|i[6]>>4)-1023,f=(15&i[6])*s(48)+i[5]*s(40)+i[4]*s(32)+i[3]*s(24)+i[2]*s(16)+i[1]*s(8)+i[0];return 1024===r?0!==f?NaN:1/0*n:-1023===r?n*f*s(-1074):n*(1+f*s(-52))*s(r)},_getFloat32:function(t,e){var i=this._getBytes(4,t,e),n=1-2*(i[3]>>7),r=(i[3]<<1&255|i[2]>>7)-127,f=(127&i[2])<<16|i[1]<<8|i[0];return 128===r?0!==f?NaN:1/0*n:-127===r?n*f*s(-149):n*(1+f*s(-23))*s(r)},_get64:function(t,e,i){i=n(i,this._littleEndian),e=n(e,this._offset);for(var r=i?[0,4]:[4,0],f=0;2>f;f++)r[f]=this.getUint32(e+r[f],i);return this._offset=e+8,new t(r[0],r[1])},getInt64:function(t,e){return this._get64(u,t,e)},getUint64:function(t,e){return this._get64(o,t,e)},_getInt32:function(t,e){var i=this._getBytes(4,t,e);return i[3]<<24|i[2]<<16|i[1]<<8|i[0]},_getUint32:function(t,e){return this._getInt32(t,e)>>>0},_getInt16:function(t,e){return this._getUint16(t,e)<<16>>16},_getUint16:function(t,e){var i=this._getBytes(2,t,e);return i[1]<<8|i[0]},_getInt8:function(t){return this._getUint8(t)<<24>>24},_getUint8:function(t){return this._getBytes(1,t)[0]},_getBitRangeData:function(t,e){var i=(n(e,this._offset)<<3)+this._bitOffset,r=i+t,f=i>>>3,s=r+7>>>3,o=this._getBytes(s-f,f,!0),u=0;(this._bitOffset=7&r)&&(this._bitOffset-=8);for(var h=0,a=o.length;a>h;h++)u=u<<8|o[h];return{start:f,bytes:o,wideValue:u}},getSigned:function(t,e){var i=32-t;return this.getUnsigned(t,e)<<i>>i},getUnsigned:function(t,e){var i=this._getBitRangeData(t,e).wideValue>>>-this._bitOffset;return 32>t?i&~(-1<<t):i},_setBinaryFloat:function(t,e,i,n,r){var f,o,u=0>e?1:0,h=~(-1<<n-1),a=1-h;0>e&&(e=-e),0===e?(f=0,o=0):isNaN(e)?(f=2*h+1,o=1):1/0===e?(f=2*h+1,o=0):(f=Math.floor(Math.log(e)/Math.LN2),f>=a&&h>=f?(o=Math.floor((e*s(-f)-1)*s(i)),f+=h):(o=Math.floor(e/s(a-i)),f=0));for(var _=[];i>=8;)_.push(o%256),o=Math.floor(o/256),i-=8;for(f=f<<i|o,n+=i;n>=8;)_.push(255&f),f>>>=8,n-=8;_.push(u<<n|f),this._setBytes(t,_,r)},_setFloat32:function(t,e,i){this._setBinaryFloat(t,e,23,8,i)},_setFloat64:function(t,e,i){this._setBinaryFloat(t,e,52,11,i)},_set64:function(t,e,i,r){"object"!=typeof i&&(i=t.fromNumber(i)),r=n(r,this._littleEndian),e=n(e,this._offset);var f=r?{lo:0,hi:4}:{lo:4,hi:0};for(var s in f)this.setUint32(e+f[s],i[s],r);this._offset=e+8},setInt64:function(t,e,i){this._set64(u,t,e,i)},setUint64:function(t,e,i){this._set64(o,t,e,i)},_setUint32:function(t,e,i){this._setBytes(t,[255&e,e>>>8&255,e>>>16&255,e>>>24],i)},_setUint16:function(t,e,i){this._setBytes(t,[255&e,e>>>8&255],i)},_setUint8:function(t,e){this._setBytes(t,[255&e])},setUnsigned:function(t,e,i){var n=this._getBitRangeData(i,t),r=n.wideValue,f=n.bytes;r&=~(~(-1<<i)<<-this._bitOffset),r|=(32>i?e&~(-1<<i):e)<<-this._bitOffset;for(var s=f.length-1;s>=0;s--)f[s]=255&r,r>>>=8;this._setBytes(n.start,f,!0)}},l={Int8:"Int8",Int16:"Int16",Int32:"Int32",Uint8:"UInt8",Uint16:"UInt16",Uint32:"UInt32",Float32:"Float",Float64:"Double"};y._nodeBufferAction=function(t,e,i,n,r){this._offset=i+c[t];var f=l[t]+("Int8"===t||"Uint8"===t?"":n?"LE":"BE");return i+=this.byteOffset,e?this.buffer["read"+f](i):this.buffer["write"+f](r,i)};for(var g in c)!function(t){y["get"+t]=function(e,i){return this._action(t,!0,e,i)},y["set"+t]=function(e,i,n){this._action(t,!1,e,n,i)}}(g);y._setInt32=y._setUint32,y._setInt16=y._setUint16,y._setInt8=y._setUint8,y.setSigned=y.setUnsigned;for(var B in y)"set"===B.slice(0,3)&&!function(t){y["write"+t]=function(){Array.prototype.unshift.call(arguments,void 0),this["set"+t].apply(this,arguments)}}(B.slice(3));return r});

}).call(this,require("buffer").Buffer)

},{"buffer":3}],34:[function(require,module,exports){
"use strict";function Inflate(t){if(!(this instanceof Inflate))return new Inflate(t);this.options=utils.assign({chunkSize:16384,windowBits:0,to:""},t||{});var i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,0===i.windowBits&&(i.windowBits=-15)),!(i.windowBits>=0&&i.windowBits<16)||t&&t.windowBits||(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&0===(15&i.windowBits)&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var n=zlib_inflate.inflateInit2(this.strm,i.windowBits);if(n!==c.Z_OK)throw new Error(msg[n]);this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header)}function inflate(t,i){var n=new Inflate(i);if(n.push(t,!0),n.err)throw n.msg;return n.result}function inflateRaw(t,i){return i=i||{},i.raw=!0,inflate(t,i)}var zlib_inflate=require("./zlib/inflate"),utils=require("./utils/common"),strings=require("./utils/strings"),c=require("./zlib/constants"),msg=require("./zlib/messages"),ZStream=require("./zlib/zstream"),GZheader=require("./zlib/gzheader"),toString=Object.prototype.toString;Inflate.prototype.push=function(t,i){var n,s,e,r,o,a,u=this.strm,l=this.options.chunkSize,h=this.options.dictionary,_=!1;if(this.ended)return!1;s=i===~~i?i:i===!0?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof t?u.input=strings.binstring2buf(t):"[object ArrayBuffer]"===toString.call(t)?u.input=new Uint8Array(t):u.input=t,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new utils.Buf8(l),u.next_out=0,u.avail_out=l),n=zlib_inflate.inflate(u,c.Z_NO_FLUSH),n===c.Z_NEED_DICT&&h&&(a="string"==typeof h?strings.string2buf(h):"[object ArrayBuffer]"===toString.call(h)?new Uint8Array(h):h,n=zlib_inflate.inflateSetDictionary(this.strm,a)),n===c.Z_BUF_ERROR&&_===!0&&(n=c.Z_OK,_=!1),n!==c.Z_STREAM_END&&n!==c.Z_OK)return this.onEnd(n),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&n!==c.Z_STREAM_END&&(0!==u.avail_in||s!==c.Z_FINISH&&s!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(e=strings.utf8border(u.output,u.next_out),r=u.next_out-e,o=strings.buf2string(u.output,e),u.next_out=r,u.avail_out=l-r,r&&utils.arraySet(u.output,u.output,e,r,0),this.onData(o)):this.onData(utils.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(_=!0)}while((u.avail_in>0||0===u.avail_out)&&n!==c.Z_STREAM_END);return n===c.Z_STREAM_END&&(s=c.Z_FINISH),s===c.Z_FINISH?(n=zlib_inflate.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c.Z_OK):s!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),u.avail_out=0,!0)},Inflate.prototype.onData=function(t){this.chunks.push(t)},Inflate.prototype.onEnd=function(t){t===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},exports.Inflate=Inflate,exports.inflate=inflate,exports.inflateRaw=inflateRaw,exports.ungzip=inflate;

},{"./utils/common":35,"./utils/strings":36,"./zlib/constants":38,"./zlib/gzheader":40,"./zlib/inflate":42,"./zlib/messages":44,"./zlib/zstream":45}],35:[function(require,module,exports){
"use strict";var TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;exports.assign=function(r){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n])}}return r},exports.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var fnTyped={arraySet:function(r,t,e,n,a){if(t.subarray&&r.subarray)return void r.set(t.subarray(e,e+n),a);for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){var t,e,n,a,o,s;for(n=0,t=0,e=r.length;t<e;t++)n+=r[t].length;for(s=new Uint8Array(n),a=0,t=0,e=r.length;t<e;t++)o=r[t],s.set(o,a),a+=o.length;return s}},fnUntyped={arraySet:function(r,t,e,n,a){for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){return[].concat.apply([],r)}};exports.setTyped=function(r){r?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK);

},{}],36:[function(require,module,exports){
"use strict";function buf2binstring(r,t){if(t<65537&&(r.subarray&&STR_APPLY_UIA_OK||!r.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils.shrinkBuf(r,t));for(var n="",e=0;e<t;e++)n+=String.fromCharCode(r[e]);return n}var utils=require("./common"),STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(r){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){STR_APPLY_UIA_OK=!1}for(var _utf8len=new utils.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1,exports.string2buf=function(r){var t,n,e,u,f,o=r.length,i=0;for(u=0;u<o;u++)n=r.charCodeAt(u),55296===(64512&n)&&u+1<o&&(e=r.charCodeAt(u+1),56320===(64512&e)&&(n=65536+(n-55296<<10)+(e-56320),u++)),i+=n<128?1:n<2048?2:n<65536?3:4;for(t=new utils.Buf8(i),f=0,u=0;f<i;u++)n=r.charCodeAt(u),55296===(64512&n)&&u+1<o&&(e=r.charCodeAt(u+1),56320===(64512&e)&&(n=65536+(n-55296<<10)+(e-56320),u++)),n<128?t[f++]=n:n<2048?(t[f++]=192|n>>>6,t[f++]=128|63&n):n<65536?(t[f++]=224|n>>>12,t[f++]=128|n>>>6&63,t[f++]=128|63&n):(t[f++]=240|n>>>18,t[f++]=128|n>>>12&63,t[f++]=128|n>>>6&63,t[f++]=128|63&n);return t},exports.buf2binstring=function(r){return buf2binstring(r,r.length)},exports.binstring2buf=function(r){for(var t=new utils.Buf8(r.length),n=0,e=t.length;n<e;n++)t[n]=r.charCodeAt(n);return t},exports.buf2string=function(r,t){var n,e,u,f,o=t||r.length,i=new Array(2*o);for(e=0,n=0;n<o;)if(u=r[n++],u<128)i[e++]=u;else if(f=_utf8len[u],f>4)i[e++]=65533,n+=f-1;else{for(u&=2===f?31:3===f?15:7;f>1&&n<o;)u=u<<6|63&r[n++],f--;f>1?i[e++]=65533:u<65536?i[e++]=u:(u-=65536,i[e++]=55296|u>>10&1023,i[e++]=56320|1023&u)}return buf2binstring(i,e)},exports.utf8border=function(r,t){var n;for(t=t||r.length,t>r.length&&(t=r.length),n=t-1;n>=0&&128===(192&r[n]);)n--;return n<0?t:0===n?t:n+_utf8len[r[n]]>t?n:t};

},{"./common":35}],37:[function(require,module,exports){
"use strict";function adler32(e,r,o,t){for(var d=65535&e|0,l=e>>>16&65535|0,u=0;0!==o;){u=o>2e3?2e3:o,o-=u;do d=d+r[t++]|0,l=l+d|0;while(--u);d%=65521,l%=65521}return d|l<<16|0}module.exports=adler32;

},{}],38:[function(require,module,exports){
"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};

},{}],39:[function(require,module,exports){
"use strict";function makeTable(){for(var r,a=[],c=0;c<256;c++){r=c;for(var e=0;e<8;e++)r=1&r?3988292384^r>>>1:r>>>1;a[c]=r}return a}function crc32(r,a,c,e){var o=crcTable,t=e+c;r^=-1;for(var n=e;n<t;n++)r=r>>>8^o[255&(r^a[n])];return r^-1}var crcTable=makeTable();module.exports=crc32;

},{}],40:[function(require,module,exports){
"use strict";function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}module.exports=GZheader;

},{}],41:[function(require,module,exports){
"use strict";var BAD=30,TYPE=12;module.exports=function(i,e){var o,a,t,d,n,l,s,f,r,b,c,u,v,m,w,h,k,_,x,g,A,B,D,p,E;o=i.state,a=i.next_in,p=i.input,t=a+(i.avail_in-5),d=i.next_out,E=i.output,n=d-(e-i.avail_out),l=d+(i.avail_out-257),s=o.dmax,f=o.wsize,r=o.whave,b=o.wnext,c=o.window,u=o.hold,v=o.bits,m=o.lencode,w=o.distcode,h=(1<<o.lenbits)-1,k=(1<<o.distbits)-1;i:do{v<15&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=m[u&h];e:for(;;){if(x=_>>>24,u>>>=x,v-=x,x=_>>>16&255,0===x)E[d++]=65535&_;else{if(!(16&x)){if(0===(64&x)){_=m[(65535&_)+(u&(1<<x)-1)];continue e}if(32&x){o.mode=TYPE;break i}i.msg="invalid literal/length code",o.mode=BAD;break i}g=65535&_,x&=15,x&&(v<x&&(u+=p[a++]<<v,v+=8),g+=u&(1<<x)-1,u>>>=x,v-=x),v<15&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=w[u&k];o:for(;;){if(x=_>>>24,u>>>=x,v-=x,x=_>>>16&255,!(16&x)){if(0===(64&x)){_=w[(65535&_)+(u&(1<<x)-1)];continue o}i.msg="invalid distance code",o.mode=BAD;break i}if(A=65535&_,x&=15,v<x&&(u+=p[a++]<<v,v+=8,v<x&&(u+=p[a++]<<v,v+=8)),A+=u&(1<<x)-1,A>s){i.msg="invalid distance too far back",o.mode=BAD;break i}if(u>>>=x,v-=x,x=d-n,A>x){if(x=A-x,x>r&&o.sane){i.msg="invalid distance too far back",o.mode=BAD;break i}if(B=0,D=c,0===b){if(B+=f-x,x<g){g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}}else if(b<x){if(B+=f+b-x,x-=b,x<g){g-=x;do E[d++]=c[B++];while(--x);if(B=0,b<g){x=b,g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}}}else if(B+=b-x,x<g){g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}for(;g>2;)E[d++]=D[B++],E[d++]=D[B++],E[d++]=D[B++],g-=3;g&&(E[d++]=D[B++],g>1&&(E[d++]=D[B++]))}else{B=d-A;do E[d++]=E[B++],E[d++]=E[B++],E[d++]=E[B++],g-=3;while(g>2);g&&(E[d++]=E[B++],g>1&&(E[d++]=E[B++]))}break}}break}}while(a<t&&d<l);g=v>>3,a-=g,v-=g<<3,u&=(1<<v)-1,i.next_in=a,i.next_out=d,i.avail_in=a<t?5+(t-a):5-(a-t),i.avail_out=d<l?257+(l-d):257-(d-l),o.hold=u,o.bits=v};

},{}],42:[function(require,module,exports){
"use strict";function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new utils.Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new utils.Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):Z_STREAM_ERROR}function inflateReset2(e,t){var a,i;return e&&e.state?(i=e.state,t<0?(a=0,t=-t):(a=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=a,i.wbits=t,inflateReset(e))):Z_STREAM_ERROR}function inflateInit2(e,t){var a,i;return e?(i=new InflateState,e.state=i,i.window=null,a=inflateReset2(e,t),a!==Z_OK&&(e.state=null),a):Z_STREAM_ERROR}function inflateInit(e){return inflateInit2(e,DEF_WBITS)}function fixedtables(e){if(virgin){var t;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,a,i){var n,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new utils.Buf8(s.wsize)),i>=s.wsize?(utils.arraySet(s.window,t,a-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),utils.arraySet(s.window,t,a-i,n,s.wnext),i-=n,i?(utils.arraySet(s.window,t,a-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}function inflate(e,t){var a,i,n,s,l,r,o,d,f,c,h,E,b,_,k,m,w,u,R,T,D,g,S,x,A=0,v=new utils.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR;a=e.state,a.mode===TYPE&&(a.mode=TYPEDO),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,c=r,h=o,g=Z_OK;e:for(;;)switch(a.mode){case HEAD:if(0===a.wrap){a.mode=TYPEDO;break}for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(2&a.wrap&&35615===d){a.check=0,v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0),d=0,f=0,a.mode=FLAGS;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",a.mode=BAD;break}if((15&d)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(d>>>=4,f-=4,D=(15&d)+8,0===a.wbits)a.wbits=D;else if(D>a.wbits){e.msg="invalid window size",a.mode=BAD;break}a.dmax=1<<D,e.adler=a.check=1,a.mode=512&d?DICTID:TYPE,d=0,f=0;break;case FLAGS:for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.flags=d,(255&a.flags)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=BAD;break}a.head&&(a.head.text=d>>8&1),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=TIME;case TIME:for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.time=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,v[2]=d>>>16&255,v[3]=d>>>24&255,a.check=crc32(a.check,v,4,0)),d=0,f=0,a.mode=OS;case OS:for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.xflags=255&d,a.head.os=d>>8),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=EXLEN;case EXLEN:if(1024&a.flags){for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length=d,a.head&&(a.head.extra_len=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0}else a.head&&(a.head.extra=null);a.mode=EXTRA;case EXTRA:if(1024&a.flags&&(E=a.length,E>r&&(E=r),E&&(a.head&&(D=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),utils.arraySet(a.head.extra,i,s,E,D)),512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,a.length-=E),a.length))break e;a.length=0,a.mode=NAME;case NAME:if(2048&a.flags){if(0===r)break e;E=0;do D=i[s+E++],a.head&&D&&a.length<65536&&(a.head.name+=String.fromCharCode(D));while(D&&E<r);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,D)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=COMMENT;case COMMENT:if(4096&a.flags){if(0===r)break e;E=0;do D=i[s+E++],a.head&&D&&a.length<65536&&(a.head.comment+=String.fromCharCode(D));while(D&&E<r);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,D)break e}else a.head&&(a.head.comment=null);a.mode=HCRC;case HCRC:if(512&a.flags){for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(65535&a.check)){e.msg="header crc mismatch",a.mode=BAD;break}d=0,f=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=TYPE;break;case DICTID:for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}e.adler=a.check=zswap32(d),d=0,f=0,a.mode=DICT;case DICT:if(0===a.havedict)return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,Z_NEED_DICT;e.adler=a.check=1,a.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(a.last){d>>>=7&f,f-=7&f,a.mode=CHECK;break}for(;f<3;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}switch(a.last=1&d,d>>>=1,f-=1,3&d){case 0:a.mode=STORED;break;case 1:if(fixedtables(a),a.mode=LEN_,t===Z_TREES){d>>>=2,f-=2;break e}break;case 2:a.mode=TABLE;break;case 3:e.msg="invalid block type",a.mode=BAD}d>>>=2,f-=2;break;case STORED:for(d>>>=7&f,f-=7&f;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if((65535&d)!==(d>>>16^65535)){e.msg="invalid stored block lengths",a.mode=BAD;break}if(a.length=65535&d,d=0,f=0,a.mode=COPY_,t===Z_TREES)break e;case COPY_:a.mode=COPY;case COPY:if(E=a.length){if(E>r&&(E=r),E>o&&(E=o),0===E)break e;utils.arraySet(n,i,s,E,l),r-=E,s+=E,o-=E,l+=E,a.length-=E;break}a.mode=TYPE;break;case TABLE:for(;f<14;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.nlen=(31&d)+257,d>>>=5,f-=5,a.ndist=(31&d)+1,d>>>=5,f-=5,a.ncode=(15&d)+4,d>>>=4,f-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=BAD;break}a.have=0,a.mode=LENLENS;case LENLENS:for(;a.have<a.ncode;){for(;f<3;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.lens[O[a.have++]]=7&d,d>>>=3,f-=3}for(;a.have<19;)a.lens[O[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,S={bits:a.lenbits},g=inflate_table(CODES,a.lens,0,19,a.lencode,0,a.work,S),a.lenbits=S.bits,g){e.msg="invalid code lengths set",a.mode=BAD;break}a.have=0,a.mode=CODELENS;case CODELENS:for(;a.have<a.nlen+a.ndist;){for(;A=a.lencode[d&(1<<a.lenbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(w<16)d>>>=k,f-=k,a.lens[a.have++]=w;else{if(16===w){for(x=k+2;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d>>>=k,f-=k,0===a.have){e.msg="invalid bit length repeat",a.mode=BAD;break}D=a.lens[a.have-1],E=3+(3&d),d>>>=2,f-=2}else if(17===w){for(x=k+3;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=k,f-=k,D=0,E=3+(7&d),d>>>=3,f-=3}else{for(x=k+7;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=k,f-=k,D=0,E=11+(127&d),d>>>=7,f-=7}if(a.have+E>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=BAD;break}for(;E--;)a.lens[a.have++]=D}}if(a.mode===BAD)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=BAD;break}if(a.lenbits=9,S={bits:a.lenbits},g=inflate_table(LENS,a.lens,0,a.nlen,a.lencode,0,a.work,S),a.lenbits=S.bits,g){e.msg="invalid literal/lengths set",a.mode=BAD;break}if(a.distbits=6,a.distcode=a.distdyn,S={bits:a.distbits},g=inflate_table(DISTS,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,S),a.distbits=S.bits,g){e.msg="invalid distances set",a.mode=BAD;break}if(a.mode=LEN_,t===Z_TREES)break e;case LEN_:a.mode=LEN;case LEN:if(r>=6&&o>=258){e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,inflate_fast(e,h),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,a.mode===TYPE&&(a.back=-1);break}for(a.back=0;A=a.lencode[d&(1<<a.lenbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(m&&0===(240&m)){for(u=k,R=m,T=w;A=a.lencode[T+((d&(1<<u+R)-1)>>u)],k=A>>>24,m=A>>>16&255,w=65535&A,!(u+k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=u,f-=u,a.back+=u}if(d>>>=k,f-=k,a.back+=k,a.length=w,0===m){a.mode=LIT;break}if(32&m){a.back=-1,a.mode=TYPE;break}if(64&m){e.msg="invalid literal/length code",a.mode=BAD;break}a.extra=15&m,a.mode=LENEXT;case LENEXT:if(a.extra){for(x=a.extra;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=DIST;case DIST:for(;A=a.distcode[d&(1<<a.distbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(0===(240&m)){for(u=k,R=m,T=w;A=a.distcode[T+((d&(1<<u+R)-1)>>u)],k=A>>>24,m=A>>>16&255,w=65535&A,!(u+k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=u,f-=u,a.back+=u}if(d>>>=k,f-=k,a.back+=k,64&m){e.msg="invalid distance code",a.mode=BAD;break}a.offset=w,a.extra=15&m,a.mode=DISTEXT;case DISTEXT:if(a.extra){for(x=a.extra;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.offset+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=BAD;break}a.mode=MATCH;case MATCH:if(0===o)break e;if(E=h-o,a.offset>E){if(E=a.offset-E,E>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=BAD;break}E>a.wnext?(E-=a.wnext,b=a.wsize-E):b=a.wnext-E,E>a.length&&(E=a.length),_=a.window}else _=n,b=l-a.offset,E=a.length;E>o&&(E=o),o-=E,a.length-=E;do n[l++]=_[b++];while(--E);0===a.length&&(a.mode=LEN);break;case LIT:if(0===o)break e;n[l++]=a.length,o--,a.mode=LEN;break;case CHECK:if(a.wrap){for(;f<32;){if(0===r)break e;r--,d|=i[s++]<<f,f+=8}if(h-=o,e.total_out+=h,a.total+=h,h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,l-h):adler32(a.check,n,h,l-h)),h=o,(a.flags?d:zswap32(d))!==a.check){e.msg="incorrect data check",a.mode=BAD;break}d=0,f=0}a.mode=LENGTH;case LENGTH:if(a.wrap&&a.flags){for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=BAD;break}d=0,f=0}a.mode=DONE;case DONE:g=Z_STREAM_END;break e;case BAD:g=Z_DATA_ERROR;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,(a.wsize||h!==e.avail_out&&a.mode<BAD&&(a.mode<CHECK||t!==Z_FINISH))&&updatewindow(e,e.output,e.next_out,h-e.avail_out)?(a.mode=MEM,Z_MEM_ERROR):(c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,a.total+=h,a.wrap&&h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,e.next_out-h):adler32(a.check,n,h,e.next_out-h)),e.data_type=a.bits+(a.last?64:0)+(a.mode===TYPE?128:0)+(a.mode===LEN_||a.mode===COPY_?256:0),(0===c&&0===h||t===Z_FINISH)&&g===Z_OK&&(g=Z_BUF_ERROR),g)}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK}function inflateGetHeader(e,t){var a;return e&&e.state?(a=e.state,0===(2&a.wrap)?Z_STREAM_ERROR:(a.head=t,t.done=!1,Z_OK)):Z_STREAM_ERROR}function inflateSetDictionary(e,t){var a,i,n,s=t.length;return e&&e.state?(a=e.state,0!==a.wrap&&a.mode!==DICT?Z_STREAM_ERROR:a.mode===DICT&&(i=1,i=adler32(i,t,s,0),i!==a.check)?Z_DATA_ERROR:(n=updatewindow(e,t,s,s))?(a.mode=MEM,Z_MEM_ERROR):(a.havedict=1,Z_OK)):Z_STREAM_ERROR}var utils=require("../utils/common"),adler32=require("./adler32"),crc32=require("./crc32"),inflate_fast=require("./inffast"),inflate_table=require("./inftrees"),CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,virgin=!0,lenfix,distfix;exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=inflateInit,exports.inflateInit2=inflateInit2,exports.inflate=inflate,exports.inflateEnd=inflateEnd,exports.inflateGetHeader=inflateGetHeader,exports.inflateSetDictionary=inflateSetDictionary,exports.inflateInfo="pako inflate (from Nodeca project)";

},{"../utils/common":35,"./adler32":37,"./crc32":39,"./inffast":41,"./inftrees":43}],43:[function(require,module,exports){
"use strict";var utils=require("../utils/common"),MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(r,S,e,f,t,i,u,o){var E,l,s,n,I,N,T,B,D,O=o.bits,a=0,b=0,A=0,L=0,M=0,X=0,d=0,G=0,H=0,U=0,_=null,x=0,c=new utils.Buf16(MAXBITS+1),m=new utils.Buf16(MAXBITS+1),v=null,w=0;for(a=0;a<=MAXBITS;a++)c[a]=0;for(b=0;b<f;b++)c[S[e+b]]++;for(M=O,L=MAXBITS;L>=1&&0===c[L];L--);if(M>L&&(M=L),0===L)return t[i++]=20971520,t[i++]=20971520,o.bits=1,0;for(A=1;A<L&&0===c[A];A++);for(M<A&&(M=A),G=1,a=1;a<=MAXBITS;a++)if(G<<=1,G-=c[a],G<0)return-1;if(G>0&&(r===CODES||1!==L))return-1;for(m[1]=0,a=1;a<MAXBITS;a++)m[a+1]=m[a]+c[a];for(b=0;b<f;b++)0!==S[e+b]&&(u[m[S[e+b]]++]=b);if(r===CODES?(_=v=u,N=19):r===LENS?(_=lbase,x-=257,v=lext,w-=257,N=256):(_=dbase,v=dext,N=-1),U=0,b=0,a=A,I=i,X=M,d=0,s=-1,H=1<<M,n=H-1,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;for(var C=0;;){C++,T=a-d,u[b]<N?(B=0,D=u[b]):u[b]>N?(B=v[w+u[b]],D=_[x+u[b]]):(B=96,D=0),E=1<<a-d,l=1<<X,A=l;do l-=E,t[I+(U>>d)+l]=T<<24|B<<16|D|0;while(0!==l);for(E=1<<a-1;U&E;)E>>=1;if(0!==E?(U&=E-1,U+=E):U=0,b++,0===--c[a]){if(a===L)break;a=S[e+u[b]]}if(a>M&&(U&n)!==s){for(0===d&&(d=M),I+=A,X=a-d,G=1<<X;X+d<L&&(G-=c[X+d],!(G<=0));)X++,G<<=1;if(H+=1<<X,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;s=U&n,t[s]=M<<24|X<<16|I-i|0}}return 0!==U&&(t[I+U]=a-d<<24|64<<16|0),o.bits=M,0};

},{"../utils/common":35}],44:[function(require,module,exports){
"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};

},{}],45:[function(require,module,exports){
"use strict";function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=ZStream;

},{}],46:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var u=1;u<arguments.length;u++)t[u-1]=arguments[u];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],47:[function(require,module,exports){
(function (process){
!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var n="undefined"!=typeof window?window:self,e=n.Q;n.Q=t(),n.Q.noConflict=function(){return n.Q=e,this}}}(function(){"use strict";function t(t){return function(){return J.apply(t,arguments)}}function n(t){return t===Object(t)}function e(t){return"[object StopIteration]"===nt(t)||t instanceof H}function r(t,n){if(V&&n.stack&&"object"==typeof t&&null!==t&&t.stack&&t.stack.indexOf(et)===-1){for(var e=[],r=n;r;r=r.source)r.stack&&e.unshift(r.stack);e.unshift(t.stack);var i=e.join("\n"+et+"\n");t.stack=o(i)}}function o(t){for(var n=t.split("\n"),e=[],r=0;r<n.length;++r){var o=n[r];c(o)||i(o)||!o||e.push(o)}return e.join("\n")}function i(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function u(t){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(n)return[n[1],Number(n[2])];var e=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(e)return[e[1],Number(e[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function c(t){var n=u(t);if(!n)return!1;var e=n[0],r=n[1];return e===G&&r>=_&&r<=ct}function f(){if(V)try{throw new Error}catch(r){var t=r.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],e=u(n);if(!e)return;return G=e[0],e[1]}}function s(t,n,e){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(n+" is deprecated, use "+e+" instead.",new Error("").stack),t.apply(t,arguments)}}function p(t){return t instanceof h?t:k(t)?O(t):E(t)}function a(){function t(t){n=t,i.source=t,L(e,function(n,e){p.nextTick(function(){t.promiseDispatch.apply(t,e)})},void 0),e=void 0,r=void 0}var n,e=[],r=[],o=Y(a.prototype),i=Y(h.prototype);if(i.promiseDispatch=function(t,o,i){var u=K(arguments);e?(e.push(u),"when"===o&&i[1]&&r.push(i[1])):p.nextTick(function(){n.promiseDispatch.apply(n,u)})},i.valueOf=function(){if(e)return i;var t=v(n);return m(t)&&(n=t),t},i.inspect=function(){return n?n.inspect():{state:"pending"}},p.longStackSupport&&V)try{throw new Error}catch(t){i.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(e){n||t(p(e))},o.fulfill=function(e){n||t(E(e))},o.reject=function(e){n||t(R(e))},o.notify=function(t){n||L(r,function(n,e){p.nextTick(function(){e(t)})},void 0)},o}function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var n=a();try{t(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}return n.promise}function d(t){return l(function(n,e){for(var r=0,o=t.length;r<o;r++)p(t[r]).then(n,e)})}function h(t,n,e){void 0===n&&(n=function(t){return R(new Error("Promise does not support operation: "+t))}),void 0===e&&(e=function(){return{state:"unknown"}});var r=Y(h.prototype);if(r.promiseDispatch=function(e,o,i){var u;try{u=t[o]?t[o].apply(r,i):n.call(r,o,i)}catch(t){u=R(t)}e&&e(u)},r.inspect=e,e){var o=e();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var t=e();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function y(t,n,e,r){return p(t).then(n,e,r)}function v(t){if(m(t)){var n=t.inspect();if("fulfilled"===n.state)return n.value}return t}function m(t){return t instanceof h}function k(t){return n(t)&&"function"==typeof t.then}function j(t){return m(t)&&"pending"===t.inspect().state}function w(t){return!m(t)||"fulfilled"===t.inspect().state}function g(t){return m(t)&&"rejected"===t.inspect().state}function b(){rt.length=0,ot.length=0,ut||(ut=!0)}function x(t,n){ut&&("object"==typeof process&&"function"==typeof process.emit&&p.nextTick.runAfter(function(){W(ot,t)!==-1&&(process.emit("unhandledRejection",n,t),it.push(t))}),ot.push(t),n&&"undefined"!=typeof n.stack?rt.push(n.stack):rt.push("(no stack) "+n))}function T(t){if(ut){var n=W(ot,t);n!==-1&&("object"==typeof process&&"function"==typeof process.emit&&p.nextTick.runAfter(function(){var e=W(it,t);e!==-1&&(process.emit("rejectionHandled",rt[n],t),it.splice(e,1))}),ot.splice(n,1),rt.splice(n,1))}}function R(t){var n=h({when:function(n){return n&&T(this),n?n(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return x(n,t),n}function E(t){return h({when:function(){return t},get:function(n){return t[n]},set:function(n,e){t[n]=e},delete:function(n){delete t[n]},post:function(n,e){return null===n||void 0===n?t.apply(void 0,e):t[n].apply(t,e)},apply:function(n,e){return t.apply(n,e)},keys:function(){return tt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function O(t){var n=a();return p.nextTick(function(){try{t.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}}),n.promise}function S(t){return h({isDef:function(){}},function(n,e){return A(t,n,e)},function(){return p(t).inspect()})}function N(t,n,e){return p(t).spread(n,e)}function D(t){return function(){function n(t,n){var u;if("undefined"==typeof StopIteration){try{u=r[t](n)}catch(t){return R(t)}return u.done?p(u.value):y(u.value,o,i)}try{u=r[t](n)}catch(t){return e(t)?p(t.value):R(t)}return y(u,o,i)}var r=t.apply(this,arguments),o=n.bind(n,"next"),i=n.bind(n,"throw");return o()}}function P(t){p.done(p.async(t)())}function C(t){throw new H(t)}function Q(t){return function(){return N([this,I(arguments)],function(n,e){return t.apply(n,e)})}}function A(t,n,e){return p(t).dispatch(n,e)}function I(t){return y(t,function(t){var n=0,e=a();return L(t,function(r,o,i){var u;m(o)&&"fulfilled"===(u=o.inspect()).state?t[i]=u.value:(++n,y(o,function(r){t[i]=r,0===--n&&e.resolve(t)},e.reject,function(t){e.notify({index:i,value:t})}))},void 0),0===n&&e.resolve(t),e.promise})}function U(t){if(0===t.length)return p.resolve();var n=p.defer(),e=0;return L(t,function(r,o,i){function u(t){n.resolve(t)}function c(){e--,0===e&&n.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function f(t){n.notify({index:i,value:t})}var s=t[i];e++,y(s,u,c,f)},void 0),n.promise}function F(t){return y(t,function(t){return t=X(t,p),y(I(X(t,function(t){return y(t,q,q)})),function(){return t})})}function M(t){return p(t).allSettled()}function B(t,n){return p(t).then(void 0,void 0,n)}function $(t,n){return p(t).nodeify(n)}var V=!1;try{throw new Error}catch(t){V=!!t.stack}var G,H,_=f(),q=function(){},z=function(){function t(){for(var t,r;e.next;)e=e.next,t=e.task,e.task=void 0,r=e.domain,r&&(e.domain=void 0,r.enter()),n(t,r);for(;c.length;)t=c.pop(),n(t);o=!1}function n(n,e){try{n()}catch(n){if(u)throw e&&e.exit(),setTimeout(t,0),e&&e.enter(),n;setTimeout(function(){throw n},0)}e&&e.exit()}var e={task:void 0,next:null},r=e,o=!1,i=void 0,u=!1,c=[];if(z=function(t){r=r.next={task:t,domain:u&&process.domain,next:null},o||(o=!0,i())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)u=!0,i=function(){process.nextTick(t)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var f=new MessageChannel;f.port1.onmessage=function(){i=s,f.port1.onmessage=t,t()};var s=function(){f.port2.postMessage(0)};i=function(){setTimeout(t,0),s()}}else i=function(){setTimeout(t,0)};return z.runAfter=function(t){c.push(t),o||(o=!0,i())},z}(),J=Function.call,K=t(Array.prototype.slice),L=t(Array.prototype.reduce||function(t,n){var e=0,r=this.length;if(1===arguments.length)for(;;){if(e in this){n=this[e++];break}if(++e>=r)throw new TypeError}for(;e<r;e++)e in this&&(n=t(n,this[e],e));return n}),W=t(Array.prototype.indexOf||function(t){for(var n=0;n<this.length;n++)if(this[n]===t)return n;return-1}),X=t(Array.prototype.map||function(t,n){var e=this,r=[];return L(e,function(o,i,u){r.push(t.call(n,i,u,e))},void 0),r}),Y=Object.create||function(t){function n(){}return n.prototype=t,new n},Z=t(Object.prototype.hasOwnProperty),tt=Object.keys||function(t){var n=[];for(var e in t)Z(t,e)&&n.push(e);return n},nt=t(Object.prototype.toString);H="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var et="From previous event:";p.resolve=p,p.nextTick=z,p.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(p.longStackSupport=!0),p.defer=a,a.prototype.makeNodeResolver=function(){var t=this;return function(n,e){n?t.reject(n):arguments.length>2?t.resolve(K(arguments,1)):t.resolve(e)}},p.Promise=l,p.promise=l,l.race=d,l.all=I,l.reject=R,l.resolve=p,p.passByCopy=function(t){return t},h.prototype.passByCopy=function(){return this},p.join=function(t,n){return p(t).join(n)},h.prototype.join=function(t){return p([this,t]).spread(function(t,n){if(t===n)return t;throw new Error("Can't join: not the same: "+t+" "+n)})},p.race=d,h.prototype.race=function(){return this.then(p.race)},p.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(t,n,e){function o(n){try{return"function"==typeof t?t(n):n}catch(t){return R(t)}}function i(t){if("function"==typeof n){r(t,c);try{return n(t)}catch(t){return R(t)}}return R(t)}function u(t){return"function"==typeof e?e(t):t}var c=this,f=a(),s=!1;return p.nextTick(function(){c.promiseDispatch(function(t){s||(s=!0,f.resolve(o(t)))},"when",[function(t){s||(s=!0,f.resolve(i(t)))}])}),c.promiseDispatch(void 0,"when",[void 0,function(t){var n,e=!1;try{n=u(t)}catch(t){if(e=!0,!p.onerror)throw t;p.onerror(t)}e||f.notify(n)}]),f.promise},p.tap=function(t,n){return p(t).tap(n)},h.prototype.tap=function(t){return t=p(t),this.then(function(n){return t.fcall(n).thenResolve(n)})},p.when=y,h.prototype.thenResolve=function(t){return this.then(function(){return t})},p.thenResolve=function(t,n){return p(t).thenResolve(n)},h.prototype.thenReject=function(t){return this.then(function(){throw t})},p.thenReject=function(t,n){return p(t).thenReject(n)},p.nearer=v,p.isPromise=m,p.isPromiseAlike=k,p.isPending=j,h.prototype.isPending=function(){return"pending"===this.inspect().state},p.isFulfilled=w,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},p.isRejected=g,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var rt=[],ot=[],it=[],ut=!0;p.resetUnhandledRejections=b,p.getUnhandledReasons=function(){return rt.slice()},p.stopUnhandledRejectionTracking=function(){b(),ut=!1},b(),p.reject=R,p.fulfill=E,p.master=S,p.spread=N,h.prototype.spread=function(t,n){return this.all().then(function(n){return t.apply(void 0,n)},n)},p.async=D,p.spawn=P,p.return=C,p.promised=Q,p.dispatch=A,h.prototype.dispatch=function(t,n){var e=this,r=a();return p.nextTick(function(){e.promiseDispatch(r.resolve,t,n)}),r.promise},p.get=function(t,n){return p(t).dispatch("get",[n])},h.prototype.get=function(t){return this.dispatch("get",[t])},p.set=function(t,n,e){return p(t).dispatch("set",[n,e])},h.prototype.set=function(t,n){return this.dispatch("set",[t,n])},p.del=p.delete=function(t,n){return p(t).dispatch("delete",[n])},h.prototype.del=h.prototype.delete=function(t){return this.dispatch("delete",[t])},p.mapply=p.post=function(t,n,e){return p(t).dispatch("post",[n,e])},h.prototype.mapply=h.prototype.post=function(t,n){return this.dispatch("post",[t,n])},p.send=p.mcall=p.invoke=function(t,n){return p(t).dispatch("post",[n,K(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(t){return this.dispatch("post",[t,K(arguments,1)])},p.fapply=function(t,n){return p(t).dispatch("apply",[void 0,n])},h.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},p.try=p.fcall=function(t){return p(t).dispatch("apply",[void 0,K(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,K(arguments)])},p.fbind=function(t){var n=p(t),e=K(arguments,1);return function(){return n.dispatch("apply",[this,e.concat(K(arguments))])}},h.prototype.fbind=function(){var t=this,n=K(arguments);return function(){return t.dispatch("apply",[this,n.concat(K(arguments))])}},p.keys=function(t){return p(t).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},p.all=I,h.prototype.all=function(){return I(this)},p.any=U,h.prototype.any=function(){return U(this)},p.allResolved=s(F,"allResolved","allSettled"),h.prototype.allResolved=function(){return F(this)},p.allSettled=M,h.prototype.allSettled=function(){return this.then(function(t){return I(X(t,function(t){function n(){return t.inspect()}return t=p(t),t.then(n,n)}))})},p.fail=p.catch=function(t,n){return p(t).then(void 0,n)},h.prototype.fail=h.prototype.catch=function(t){return this.then(void 0,t)},p.progress=B,h.prototype.progress=function(t){return this.then(void 0,void 0,t)},p.fin=p.finally=function(t,n){return p(t).finally(n)},h.prototype.fin=h.prototype.finally=function(t){return t=p(t),this.then(function(n){return t.fcall().then(function(){return n})},function(n){return t.fcall().then(function(){throw n})})},p.done=function(t,n,e,r){return p(t).done(n,e,r)},h.prototype.done=function(t,n,e){var o=function(t){p.nextTick(function(){if(r(t,i),!p.onerror)throw t;p.onerror(t)})},i=t||n||e?this.then(t,n,e):this;"object"==typeof process&&process&&process.domain&&(o=process.domain.bind(o)),i.then(void 0,o)},p.timeout=function(t,n,e){return p(t).timeout(n,e)},h.prototype.timeout=function(t,n){var e=a(),r=setTimeout(function(){n&&"string"!=typeof n||(n=new Error(n||"Timed out after "+t+" ms"),n.code="ETIMEDOUT"),e.reject(n)},t);return this.then(function(t){clearTimeout(r),e.resolve(t)},function(t){clearTimeout(r),e.reject(t)},e.notify),e.promise},p.delay=function(t,n){return void 0===n&&(n=t,t=void 0),p(t).delay(n)},h.prototype.delay=function(t){return this.then(function(n){var e=a();return setTimeout(function(){e.resolve(n)},t),e.promise})},p.nfapply=function(t,n){return p(t).nfapply(n)},h.prototype.nfapply=function(t){var n=a(),e=K(t);return e.push(n.makeNodeResolver()),this.fapply(e).fail(n.reject),n.promise},p.nfcall=function(t){var n=K(arguments,1);return p(t).nfapply(n)},h.prototype.nfcall=function(){var t=K(arguments),n=a();return t.push(n.makeNodeResolver()),this.fapply(t).fail(n.reject),n.promise},p.nfbind=p.denodeify=function(t){var n=K(arguments,1);return function(){var e=n.concat(K(arguments)),r=a();return e.push(r.makeNodeResolver()),p(t).fapply(e).fail(r.reject),r.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var t=K(arguments);return t.unshift(this),p.denodeify.apply(void 0,t)},p.nbind=function(t,n){var e=K(arguments,2);return function(){function r(){return t.apply(n,arguments)}var o=e.concat(K(arguments)),i=a();return o.push(i.makeNodeResolver()),p(r).fapply(o).fail(i.reject),i.promise}},h.prototype.nbind=function(){var t=K(arguments,0);return t.unshift(this),p.nbind.apply(void 0,t)},p.nmapply=p.npost=function(t,n,e){return p(t).npost(n,e)},h.prototype.nmapply=h.prototype.npost=function(t,n){var e=K(n||[]),r=a();return e.push(r.makeNodeResolver()),this.dispatch("post",[t,e]).fail(r.reject),r.promise},p.nsend=p.nmcall=p.ninvoke=function(t,n){var e=K(arguments,2),r=a();return e.push(r.makeNodeResolver()),p(t).dispatch("post",[n,e]).fail(r.reject),r.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(t){var n=K(arguments,1),e=a();return n.push(e.makeNodeResolver()),this.dispatch("post",[t,n]).fail(e.reject),e.promise},p.nodeify=$,h.prototype.nodeify=function(t){return t?void this.then(function(n){p.nextTick(function(){t(null,n)})},function(n){p.nextTick(function(){t(n)})}):this},p.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ct=f();return p});

}).call(this,require('_process'))

},{"_process":46}],48:[function(require,module,exports){
"use strict";module.exports=require("react/lib/ReactDOM");

},{"react/lib/ReactDOM":83}],49:[function(require,module,exports){
"use strict";var ReactMount=require("./ReactMount"),findDOMNode=require("./findDOMNode"),focusNode=require("fbjs/lib/focusNode"),Mixin={componentDidMount:function(){this.props.autoFocus&&focusNode(findDOMNode(this))}},AutoFocusUtils={Mixin:Mixin,focusDOMComponent:function(){focusNode(ReactMount.getNode(this._rootNodeID))}};module.exports=AutoFocusUtils;

},{"./ReactMount":111,"./findDOMNode":154,"fbjs/lib/focusNode":14}],50:[function(require,module,exports){
"use strict";function isPresto(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function isKeypressCommand(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function getCompositionEventType(e){switch(e){case topLevelTypes.topCompositionStart:return eventTypes.compositionStart;case topLevelTypes.topCompositionEnd:return eventTypes.compositionEnd;case topLevelTypes.topCompositionUpdate:return eventTypes.compositionUpdate}}function isFallbackCompositionStart(e,t){return e===topLevelTypes.topKeyDown&&t.keyCode===START_KEYCODE}function isFallbackCompositionEnd(e,t){switch(e){case topLevelTypes.topKeyUp:return END_KEYCODES.indexOf(t.keyCode)!==-1;case topLevelTypes.topKeyDown:return t.keyCode!==START_KEYCODE;case topLevelTypes.topKeyPress:case topLevelTypes.topMouseDown:case topLevelTypes.topBlur:return!0;default:return!1}}function getDataFromCustomEvent(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function extractCompositionEvent(e,t,o,n,p){var s,i;if(canUseCompositionEvent?s=getCompositionEventType(e):currentComposition?isFallbackCompositionEnd(e,n)&&(s=eventTypes.compositionEnd):isFallbackCompositionStart(e,n)&&(s=eventTypes.compositionStart),!s)return null;useFallbackCompositionData&&(currentComposition||s!==eventTypes.compositionStart?s===eventTypes.compositionEnd&&currentComposition&&(i=currentComposition.getData()):currentComposition=FallbackCompositionState.getPooled(t));var r=SyntheticCompositionEvent.getPooled(s,o,n,p);if(i)r.data=i;else{var a=getDataFromCustomEvent(n);null!==a&&(r.data=a)}return EventPropagators.accumulateTwoPhaseDispatches(r),r}function getNativeBeforeInputChars(e,t){switch(e){case topLevelTypes.topCompositionEnd:return getDataFromCustomEvent(t);case topLevelTypes.topKeyPress:var o=t.which;return o!==SPACEBAR_CODE?null:(hasSpaceKeypress=!0,SPACEBAR_CHAR);case topLevelTypes.topTextInput:var n=t.data;return n===SPACEBAR_CHAR&&hasSpaceKeypress?null:n;default:return null}}function getFallbackBeforeInputChars(e,t){if(currentComposition){if(e===topLevelTypes.topCompositionEnd||isFallbackCompositionEnd(e,t)){var o=currentComposition.getData();return FallbackCompositionState.release(currentComposition),currentComposition=null,o}return null}switch(e){case topLevelTypes.topPaste:return null;case topLevelTypes.topKeyPress:return t.which&&!isKeypressCommand(t)?String.fromCharCode(t.which):null;case topLevelTypes.topCompositionEnd:return useFallbackCompositionData?null:t.data;default:return null}}function extractBeforeInputEvent(e,t,o,n,p){var s;if(s=canUseTextInputEvent?getNativeBeforeInputChars(e,n):getFallbackBeforeInputChars(e,n),!s)return null;var i=SyntheticInputEvent.getPooled(eventTypes.beforeInput,o,n,p);return i.data=s,EventPropagators.accumulateTwoPhaseDispatches(i),i}var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),FallbackCompositionState=require("./FallbackCompositionState"),SyntheticCompositionEvent=require("./SyntheticCompositionEvent"),SyntheticInputEvent=require("./SyntheticInputEvent"),keyOf=require("fbjs/lib/keyOf"),END_KEYCODES=[9,13,27,32],START_KEYCODE=229,canUseCompositionEvent=ExecutionEnvironment.canUseDOM&&"CompositionEvent"in window,documentMode=null;ExecutionEnvironment.canUseDOM&&"documentMode"in document&&(documentMode=document.documentMode);var canUseTextInputEvent=ExecutionEnvironment.canUseDOM&&"TextEvent"in window&&!documentMode&&!isPresto(),useFallbackCompositionData=ExecutionEnvironment.canUseDOM&&(!canUseCompositionEvent||documentMode&&documentMode>8&&documentMode<=11),SPACEBAR_CODE=32,SPACEBAR_CHAR=String.fromCharCode(SPACEBAR_CODE),topLevelTypes=EventConstants.topLevelTypes,eventTypes={beforeInput:{phasedRegistrationNames:{bubbled:keyOf({onBeforeInput:null}),captured:keyOf({onBeforeInputCapture:null})},dependencies:[topLevelTypes.topCompositionEnd,topLevelTypes.topKeyPress,topLevelTypes.topTextInput,topLevelTypes.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:keyOf({onCompositionEnd:null}),captured:keyOf({onCompositionEndCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionEnd,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:keyOf({onCompositionStart:null}),captured:keyOf({onCompositionStartCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionStart,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:keyOf({onCompositionUpdate:null}),captured:keyOf({onCompositionUpdateCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionUpdate,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]}},hasSpaceKeypress=!1,currentComposition=null,BeforeInputEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,o,n,p){return[extractCompositionEvent(e,t,o,n,p),extractBeforeInputEvent(e,t,o,n,p)]}};module.exports=BeforeInputEventPlugin;

},{"./EventConstants":62,"./EventPropagators":66,"./FallbackCompositionState":67,"./SyntheticCompositionEvent":136,"./SyntheticInputEvent":140,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/keyOf":24}],51:[function(require,module,exports){
"use strict";function prefixKey(o,r){return o+r.charAt(0).toUpperCase()+r.substring(1)}var isUnitlessNumber={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},prefixes=["Webkit","ms","Moz","O"];Object.keys(isUnitlessNumber).forEach(function(o){prefixes.forEach(function(r){isUnitlessNumber[prefixKey(r,o)]=isUnitlessNumber[o]})});var shorthandPropertyExpansions={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},CSSProperty={isUnitlessNumber:isUnitlessNumber,shorthandPropertyExpansions:shorthandPropertyExpansions};module.exports=CSSProperty;

},{}],52:[function(require,module,exports){
"use strict";var CSSProperty=require("./CSSProperty"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactPerf=require("./ReactPerf"),camelizeStyleName=require("fbjs/lib/camelizeStyleName"),dangerousStyleValue=require("./dangerousStyleValue"),hyphenateStyleName=require("fbjs/lib/hyphenateStyleName"),memoizeStringOnly=require("fbjs/lib/memoizeStringOnly"),warning=require("fbjs/lib/warning"),processStyleName=memoizeStringOnly(function(e){return hyphenateStyleName(e)}),hasShorthandPropertyBug=!1,styleFloatAccessor="cssFloat";if(ExecutionEnvironment.canUseDOM){var tempStyle=document.createElement("div").style;try{tempStyle.font=""}catch(e){hasShorthandPropertyBug=!0}void 0===document.documentElement.style.cssFloat&&(styleFloatAccessor="styleFloat")}var badVendoredStyleNamePattern,badStyleValueWithSemicolonPattern,warnedStyleNames,warnedStyleValues,warnHyphenatedStyleName,warnBadVendoredStyleName,warnStyleValueWithSemicolon,warnValidStyle,CSSPropertyOperations={createMarkupForStyles:function(e){var r="";for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];null!=a&&(r+=processStyleName(t)+":",r+=dangerousStyleValue(t,a)+";")}return r||null},setValueForStyles:function(e,r){var t=e.style;for(var a in r)if(r.hasOwnProperty(a)){var n=dangerousStyleValue(a,r[a]);if("float"===a&&(a=styleFloatAccessor),n)t[a]=n;else{var l=hasShorthandPropertyBug&&CSSProperty.shorthandPropertyExpansions[a];if(l)for(var o in l)t[o]="";else t[a]=""}}}};ReactPerf.measureMethods(CSSPropertyOperations,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),module.exports=CSSPropertyOperations;

},{"./CSSProperty":51,"./ReactPerf":117,"./dangerousStyleValue":151,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/camelizeStyleName":8,"fbjs/lib/hyphenateStyleName":19,"fbjs/lib/memoizeStringOnly":26,"fbjs/lib/warning":29}],53:[function(require,module,exports){
"use strict";function CallbackQueue(){this._callbacks=null,this._contexts=null}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant");assign(CallbackQueue.prototype,{enqueue:function(t,l){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(l)},notifyAll:function(){var t=this._callbacks,l=this._contexts;if(t){t.length!==l.length?invariant(!1):void 0,this._callbacks=null,this._contexts=null;for(var s=0;s<t.length;s++)t[s].call(l[s]);t.length=0,l.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),PooledClass.addPoolingTo(CallbackQueue),module.exports=CallbackQueue;

},{"./Object.assign":70,"./PooledClass":71,"fbjs/lib/invariant":20}],54:[function(require,module,exports){
"use strict";function shouldUseChangeEvent(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function manualDispatchChangeEvent(e){var t=SyntheticEvent.getPooled(eventTypes.change,activeElementID,e,getEventTarget(e));EventPropagators.accumulateTwoPhaseDispatches(t),ReactUpdates.batchedUpdates(runEventInBatch,t)}function runEventInBatch(e){EventPluginHub.enqueueEvents(e),EventPluginHub.processEventQueue(!1)}function startWatchingForChangeEventIE8(e,t){activeElement=e,activeElementID=t,activeElement.attachEvent("onchange",manualDispatchChangeEvent)}function stopWatchingForChangeEventIE8(){activeElement&&(activeElement.detachEvent("onchange",manualDispatchChangeEvent),activeElement=null,activeElementID=null)}function getTargetIDForChangeEvent(e,t,n){if(e===topLevelTypes.topChange)return n}function handleEventsForChangeEventIE8(e,t,n){e===topLevelTypes.topFocus?(stopWatchingForChangeEventIE8(),startWatchingForChangeEventIE8(t,n)):e===topLevelTypes.topBlur&&stopWatchingForChangeEventIE8()}function startWatchingForValueChange(e,t){activeElement=e,activeElementID=t,activeElementValue=e.value,activeElementValueProp=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(activeElement,"value",newValueProp),activeElement.attachEvent("onpropertychange",handlePropertyChange)}function stopWatchingForValueChange(){activeElement&&(delete activeElement.value,activeElement.detachEvent("onpropertychange",handlePropertyChange),activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null)}function handlePropertyChange(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==activeElementValue&&(activeElementValue=t,manualDispatchChangeEvent(e))}}function getTargetIDForInputEvent(e,t,n){if(e===topLevelTypes.topInput)return n}function handleEventsForInputEventIE(e,t,n){e===topLevelTypes.topFocus?(stopWatchingForValueChange(),startWatchingForValueChange(t,n)):e===topLevelTypes.topBlur&&stopWatchingForValueChange()}function getTargetIDForInputEventIE(e,t,n){if((e===topLevelTypes.topSelectionChange||e===topLevelTypes.topKeyUp||e===topLevelTypes.topKeyDown)&&activeElement&&activeElement.value!==activeElementValue)return activeElementValue=activeElement.value,activeElementID}function shouldUseClickEvent(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function getTargetIDForClickEvent(e,t,n){if(e===topLevelTypes.topClick)return n}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactUpdates=require("./ReactUpdates"),SyntheticEvent=require("./SyntheticEvent"),getEventTarget=require("./getEventTarget"),isEventSupported=require("./isEventSupported"),isTextInputElement=require("./isTextInputElement"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,eventTypes={change:{phasedRegistrationNames:{bubbled:keyOf({onChange:null}),captured:keyOf({onChangeCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topChange,topLevelTypes.topClick,topLevelTypes.topFocus,topLevelTypes.topInput,topLevelTypes.topKeyDown,topLevelTypes.topKeyUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null,doesChangeEventBubble=!1;ExecutionEnvironment.canUseDOM&&(doesChangeEventBubble=isEventSupported("change")&&(!("documentMode"in document)||document.documentMode>8));var isInputEventSupported=!1;ExecutionEnvironment.canUseDOM&&(isInputEventSupported=isEventSupported("input")&&(!("documentMode"in document)||document.documentMode>9));var newValueProp={get:function(){return activeElementValueProp.get.call(this)},set:function(e){activeElementValue=""+e,activeElementValueProp.set.call(this,e)}},ChangeEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,a,o){var l,u;if(shouldUseChangeEvent(t)?doesChangeEventBubble?l=getTargetIDForChangeEvent:u=handleEventsForChangeEventIE8:isTextInputElement(t)?isInputEventSupported?l=getTargetIDForInputEvent:(l=getTargetIDForInputEventIE,u=handleEventsForInputEventIE):shouldUseClickEvent(t)&&(l=getTargetIDForClickEvent),l){var v=l(e,t,n);if(v){var p=SyntheticEvent.getPooled(eventTypes.change,v,a,o);return p.type="change",EventPropagators.accumulateTwoPhaseDispatches(p),p}}u&&u(e,t,n)}};module.exports=ChangeEventPlugin;

},{"./EventConstants":62,"./EventPluginHub":63,"./EventPropagators":66,"./ReactUpdates":129,"./SyntheticEvent":138,"./getEventTarget":160,"./isEventSupported":165,"./isTextInputElement":166,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/keyOf":24}],55:[function(require,module,exports){
"use strict";var nextReactRootIndex=0,ClientReactRootIndex={createReactRootIndex:function(){return nextReactRootIndex++}};module.exports=ClientReactRootIndex;

},{}],56:[function(require,module,exports){
"use strict";function insertChildAt(e,t,n){var r=n>=e.childNodes.length?null:e.childNodes.item(n);e.insertBefore(t,r)}var Danger=require("./Danger"),ReactMultiChildUpdateTypes=require("./ReactMultiChildUpdateTypes"),ReactPerf=require("./ReactPerf"),setInnerHTML=require("./setInnerHTML"),setTextContent=require("./setTextContent"),invariant=require("fbjs/lib/invariant"),DOMChildrenOperations={dangerouslyReplaceNodeWithMarkup:Danger.dangerouslyReplaceNodeWithMarkup,updateTextContent:setTextContent,processUpdates:function(e,t){for(var n,r=null,a=null,i=0;i<e.length;i++)if(n=e[i],n.type===ReactMultiChildUpdateTypes.MOVE_EXISTING||n.type===ReactMultiChildUpdateTypes.REMOVE_NODE){var d=n.fromIndex,l=n.parentNode.childNodes[d],p=n.parentID;l?void 0:invariant(!1),r=r||{},r[p]=r[p]||[],r[p][d]=l,a=a||[],a.push(l)}var s;if(s=t.length&&"string"==typeof t[0]?Danger.dangerouslyRenderMarkup(t):t,a)for(var o=0;o<a.length;o++)a[o].parentNode.removeChild(a[o]);for(var u=0;u<e.length;u++)switch(n=e[u],n.type){case ReactMultiChildUpdateTypes.INSERT_MARKUP:insertChildAt(n.parentNode,s[n.markupIndex],n.toIndex);break;case ReactMultiChildUpdateTypes.MOVE_EXISTING:insertChildAt(n.parentNode,r[n.parentID][n.fromIndex],n.toIndex);break;case ReactMultiChildUpdateTypes.SET_MARKUP:setInnerHTML(n.parentNode,n.content);break;case ReactMultiChildUpdateTypes.TEXT_CONTENT:setTextContent(n.parentNode,n.content);break;case ReactMultiChildUpdateTypes.REMOVE_NODE:}}};ReactPerf.measureMethods(DOMChildrenOperations,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),module.exports=DOMChildrenOperations;

},{"./Danger":59,"./ReactMultiChildUpdateTypes":113,"./ReactPerf":117,"./setInnerHTML":170,"./setTextContent":171,"fbjs/lib/invariant":20}],57:[function(require,module,exports){
"use strict";function checkMask(t,e){return(t&e)===e}var invariant=require("fbjs/lib/invariant"),DOMPropertyInjection={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(t){var e=DOMPropertyInjection,r=t.Properties||{},a=t.DOMAttributeNamespaces||{},o=t.DOMAttributeNames||{},i=t.DOMPropertyNames||{},s=t.DOMMutationMethods||{};t.isCustomAttribute&&DOMProperty._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var u in r){DOMProperty.properties.hasOwnProperty(u)?invariant(!1):void 0;var n=u.toLowerCase(),c=r[u],E={attributeName:n,attributeNamespace:null,propertyName:u,mutationMethod:null,mustUseAttribute:checkMask(c,e.MUST_USE_ATTRIBUTE),mustUseProperty:checkMask(c,e.MUST_USE_PROPERTY),hasSideEffects:checkMask(c,e.HAS_SIDE_EFFECTS),hasBooleanValue:checkMask(c,e.HAS_BOOLEAN_VALUE),hasNumericValue:checkMask(c,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:checkMask(c,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:checkMask(c,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(E.mustUseAttribute&&E.mustUseProperty?invariant(!1):void 0,!E.mustUseProperty&&E.hasSideEffects?invariant(!1):void 0,E.hasBooleanValue+E.hasNumericValue+E.hasOverloadedBooleanValue<=1?void 0:invariant(!1),o.hasOwnProperty(u)){var A=o[u];E.attributeName=A}a.hasOwnProperty(u)&&(E.attributeNamespace=a[u]),i.hasOwnProperty(u)&&(E.propertyName=i[u]),s.hasOwnProperty(u)&&(E.mutationMethod=s[u]),DOMProperty.properties[u]=E}}},defaultValueCache={},DOMProperty={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<DOMProperty._isCustomAttributeFunctions.length;e++){var r=DOMProperty._isCustomAttributeFunctions[e];if(r(t))return!0}return!1},getDefaultValueForProperty:function(t,e){var r,a=defaultValueCache[t];return a||(defaultValueCache[t]=a={}),e in a||(r=document.createElement(t),a[e]=r[e]),a[e]},injection:DOMPropertyInjection};module.exports=DOMProperty;

},{"fbjs/lib/invariant":20}],58:[function(require,module,exports){
"use strict";function isAttributeNameSafe(e){return!!validatedAttributeNameCache.hasOwnProperty(e)||!illegalAttributeNameCache.hasOwnProperty(e)&&(VALID_ATTRIBUTE_NAME_REGEX.test(e)?(validatedAttributeNameCache[e]=!0,!0):(illegalAttributeNameCache[e]=!0,!1))}function shouldIgnoreValue(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&t===!1}var DOMProperty=require("./DOMProperty"),ReactPerf=require("./ReactPerf"),quoteAttributeValueForBrowser=require("./quoteAttributeValueForBrowser"),warning=require("fbjs/lib/warning"),VALID_ATTRIBUTE_NAME_REGEX=/^[a-zA-Z_][\w\.\-]*$/,illegalAttributeNameCache={},validatedAttributeNameCache={},reactProps,warnedProperties,warnUnknownProperty,DOMPropertyOperations={createMarkupForID:function(e){return DOMProperty.ID_ATTRIBUTE_NAME+"="+quoteAttributeValueForBrowser(e)},setAttributeForID:function(e,t){e.setAttribute(DOMProperty.ID_ATTRIBUTE_NAME,t)},createMarkupForProperty:function(e,t){var r=DOMProperty.properties.hasOwnProperty(e)?DOMProperty.properties[e]:null;if(r){if(shouldIgnoreValue(r,t))return"";var o=r.attributeName;return r.hasBooleanValue||r.hasOverloadedBooleanValue&&t===!0?o+'=""':o+"="+quoteAttributeValueForBrowser(t)}return DOMProperty.isCustomAttribute(e)?null==t?"":e+"="+quoteAttributeValueForBrowser(t):null},createMarkupForCustomAttribute:function(e,t){return isAttributeNameSafe(e)&&null!=t?e+"="+quoteAttributeValueForBrowser(t):""},setValueForProperty:function(e,t,r){var o=DOMProperty.properties.hasOwnProperty(t)?DOMProperty.properties[t]:null;if(o){var a=o.mutationMethod;if(a)a(e,r);else if(shouldIgnoreValue(o,r))this.deleteValueForProperty(e,t);else if(o.mustUseAttribute){var u=o.attributeName,i=o.attributeNamespace;i?e.setAttributeNS(i,u,""+r):o.hasBooleanValue||o.hasOverloadedBooleanValue&&r===!0?e.setAttribute(u,""):e.setAttribute(u,""+r)}else{var s=o.propertyName;o.hasSideEffects&&""+e[s]==""+r||(e[s]=r)}}else DOMProperty.isCustomAttribute(t)&&DOMPropertyOperations.setValueForAttribute(e,t,r)},setValueForAttribute:function(e,t,r){isAttributeNameSafe(t)&&(null==r?e.removeAttribute(t):e.setAttribute(t,""+r))},deleteValueForProperty:function(e,t){var r=DOMProperty.properties.hasOwnProperty(t)?DOMProperty.properties[t]:null;if(r){var o=r.mutationMethod;if(o)o(e,void 0);else if(r.mustUseAttribute)e.removeAttribute(r.attributeName);else{var a=r.propertyName,u=DOMProperty.getDefaultValueForProperty(e.nodeName,a);r.hasSideEffects&&""+e[a]===u||(e[a]=u)}}else DOMProperty.isCustomAttribute(t)&&e.removeAttribute(t)}};ReactPerf.measureMethods(DOMPropertyOperations,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),module.exports=DOMPropertyOperations;

},{"./DOMProperty":57,"./ReactPerf":117,"./quoteAttributeValueForBrowser":168,"fbjs/lib/warning":29}],59:[function(require,module,exports){
"use strict";function getNodeName(e){return e.substring(1,e.indexOf(" "))}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),createNodesFromMarkup=require("fbjs/lib/createNodesFromMarkup"),emptyFunction=require("fbjs/lib/emptyFunction"),getMarkupWrap=require("fbjs/lib/getMarkupWrap"),invariant=require("fbjs/lib/invariant"),OPEN_TAG_NAME_EXP=/^(<[^ \/>]+)/,RESULT_INDEX_ATTR="data-danger-index",Danger={dangerouslyRenderMarkup:function(e){ExecutionEnvironment.canUseDOM?void 0:invariant(!1);for(var r,n={},t=0;t<e.length;t++)e[t]?void 0:invariant(!1),r=getNodeName(e[t]),r=getMarkupWrap(r)?r:"*",n[r]=n[r]||[],n[r][t]=e[t];var i=[],a=0;for(r in n)if(n.hasOwnProperty(r)){var o,u=n[r];for(o in u)if(u.hasOwnProperty(o)){var v=u[o];u[o]=v.replace(OPEN_TAG_NAME_EXP,"$1 "+RESULT_INDEX_ATTR+'="'+o+'" ')}for(var d=createNodesFromMarkup(u.join(""),emptyFunction),p=0;p<d.length;++p){var s=d[p];s.hasAttribute&&s.hasAttribute(RESULT_INDEX_ATTR)&&(o=+s.getAttribute(RESULT_INDEX_ATTR),s.removeAttribute(RESULT_INDEX_ATTR),i.hasOwnProperty(o)?invariant(!1):void 0,i[o]=s,a+=1)}}return a!==i.length?invariant(!1):void 0,i.length!==e.length?invariant(!1):void 0,i},dangerouslyReplaceNodeWithMarkup:function(e,r){ExecutionEnvironment.canUseDOM?void 0:invariant(!1),r?void 0:invariant(!1),"html"===e.tagName.toLowerCase()?invariant(!1):void 0;var n;n="string"==typeof r?createNodesFromMarkup(r,emptyFunction)[0]:r,e.parentNode.replaceChild(n,e)}};module.exports=Danger;

},{"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/createNodesFromMarkup":11,"fbjs/lib/emptyFunction":12,"fbjs/lib/getMarkupWrap":16,"fbjs/lib/invariant":20}],60:[function(require,module,exports){
"use strict";var keyOf=require("fbjs/lib/keyOf"),DefaultEventPluginOrder=[keyOf({ResponderEventPlugin:null}),keyOf({SimpleEventPlugin:null}),keyOf({TapEventPlugin:null}),keyOf({EnterLeaveEventPlugin:null}),keyOf({ChangeEventPlugin:null}),keyOf({SelectEventPlugin:null}),keyOf({BeforeInputEventPlugin:null})];module.exports=DefaultEventPluginOrder;

},{"fbjs/lib/keyOf":24}],61:[function(require,module,exports){
"use strict";var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),SyntheticMouseEvent=require("./SyntheticMouseEvent"),ReactMount=require("./ReactMount"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,getFirstReactDOM=ReactMount.getFirstReactDOM,eventTypes={mouseEnter:{registrationName:keyOf({onMouseEnter:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]},mouseLeave:{registrationName:keyOf({onMouseLeave:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]}},extractedEvents=[null,null],EnterLeaveEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,o,r){if(e===topLevelTypes.topMouseOver&&(o.relatedTarget||o.fromElement))return null;if(e!==topLevelTypes.topMouseOut&&e!==topLevelTypes.topMouseOver)return null;var s;if(t.window===t)s=t;else{var a=t.ownerDocument;s=a?a.defaultView||a.parentWindow:window}var u,v,p="",l="";if(e===topLevelTypes.topMouseOut?(u=t,p=n,v=getFirstReactDOM(o.relatedTarget||o.toElement),v?l=ReactMount.getID(v):v=s,v=v||s):(u=s,v=t,l=n),u===v)return null;var i=SyntheticMouseEvent.getPooled(eventTypes.mouseLeave,p,o,r);i.type="mouseleave",i.target=u,i.relatedTarget=v;var y=SyntheticMouseEvent.getPooled(eventTypes.mouseEnter,l,o,r);return y.type="mouseenter",y.target=v,y.relatedTarget=u,EventPropagators.accumulateEnterLeaveDispatches(i,y,p,l),extractedEvents[0]=i,extractedEvents[1]=y,extractedEvents}};module.exports=EnterLeaveEventPlugin;

},{"./EventConstants":62,"./EventPropagators":66,"./ReactMount":111,"./SyntheticMouseEvent":142,"fbjs/lib/keyOf":24}],62:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),PropagationPhases=keyMirror({bubbled:null,captured:null}),topLevelTypes=keyMirror({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),EventConstants={topLevelTypes:topLevelTypes,PropagationPhases:PropagationPhases};module.exports=EventConstants;

},{"fbjs/lib/keyMirror":23}],63:[function(require,module,exports){
"use strict";function validateInstanceHandle(){InstanceHandle&&InstanceHandle.traverseTwoPhase&&InstanceHandle.traverseEnterLeave}var EventPluginRegistry=require("./EventPluginRegistry"),EventPluginUtils=require("./EventPluginUtils"),ReactErrorUtils=require("./ReactErrorUtils"),accumulateInto=require("./accumulateInto"),forEachAccumulated=require("./forEachAccumulated"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),listenerBank={},eventQueue=null,executeDispatchesAndRelease=function(e,n){e&&(EventPluginUtils.executeDispatchesInOrder(e,n),e.isPersistent()||e.constructor.release(e))},executeDispatchesAndReleaseSimulated=function(e){return executeDispatchesAndRelease(e,!0)},executeDispatchesAndReleaseTopLevel=function(e){return executeDispatchesAndRelease(e,!1)},InstanceHandle=null,EventPluginHub={injection:{injectMount:EventPluginUtils.injection.injectMount,injectInstanceHandle:function(e){InstanceHandle=e},getInstanceHandle:function(){return InstanceHandle},injectEventPluginOrder:EventPluginRegistry.injectEventPluginOrder,injectEventPluginsByName:EventPluginRegistry.injectEventPluginsByName},eventNameDispatchConfigs:EventPluginRegistry.eventNameDispatchConfigs,registrationNameModules:EventPluginRegistry.registrationNameModules,putListener:function(e,n,t){"function"!=typeof t?invariant(!1):void 0;var i=listenerBank[n]||(listenerBank[n]={});i[e]=t;var r=EventPluginRegistry.registrationNameModules[n];r&&r.didPutListener&&r.didPutListener(e,n,t)},getListener:function(e,n){var t=listenerBank[n];return t&&t[e]},deleteListener:function(e,n){var t=EventPluginRegistry.registrationNameModules[n];t&&t.willDeleteListener&&t.willDeleteListener(e,n);var i=listenerBank[n];i&&delete i[e]},deleteAllListeners:function(e){for(var n in listenerBank)if(listenerBank[n][e]){var t=EventPluginRegistry.registrationNameModules[n];t&&t.willDeleteListener&&t.willDeleteListener(e,n),delete listenerBank[n][e]}},extractEvents:function(e,n,t,i,r){for(var a,u=EventPluginRegistry.plugins,s=0;s<u.length;s++){var l=u[s];if(l){var c=l.extractEvents(e,n,t,i,r);c&&(a=accumulateInto(a,c))}}return a},enqueueEvents:function(e){e&&(eventQueue=accumulateInto(eventQueue,e))},processEventQueue:function(e){var n=eventQueue;eventQueue=null,e?forEachAccumulated(n,executeDispatchesAndReleaseSimulated):forEachAccumulated(n,executeDispatchesAndReleaseTopLevel),eventQueue?invariant(!1):void 0,ReactErrorUtils.rethrowCaughtError()},__purge:function(){listenerBank={}},__getListenerBank:function(){return listenerBank}};module.exports=EventPluginHub;

},{"./EventPluginRegistry":64,"./EventPluginUtils":65,"./ReactErrorUtils":102,"./accumulateInto":148,"./forEachAccumulated":156,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],64:[function(require,module,exports){
"use strict";function recomputePluginOrdering(){if(EventPluginOrder)for(var e in namesToPlugins){var n=namesToPlugins[e],i=EventPluginOrder.indexOf(e);if(i>-1?void 0:invariant(!1),!EventPluginRegistry.plugins[i]){n.extractEvents?void 0:invariant(!1),EventPluginRegistry.plugins[i]=n;var r=n.eventTypes;for(var t in r)publishEventForPlugin(r[t],n,t)?void 0:invariant(!1)}}}function publishEventForPlugin(e,n,i){EventPluginRegistry.eventNameDispatchConfigs.hasOwnProperty(i)?invariant(!1):void 0,EventPluginRegistry.eventNameDispatchConfigs[i]=e;var r=e.phasedRegistrationNames;if(r){for(var t in r)if(r.hasOwnProperty(t)){var a=r[t];publishRegistrationName(a,n,i)}return!0}return!!e.registrationName&&(publishRegistrationName(e.registrationName,n,i),!0)}function publishRegistrationName(e,n,i){EventPluginRegistry.registrationNameModules[e]?invariant(!1):void 0,EventPluginRegistry.registrationNameModules[e]=n,EventPluginRegistry.registrationNameDependencies[e]=n.eventTypes[i].dependencies}var invariant=require("fbjs/lib/invariant"),EventPluginOrder=null,namesToPlugins={},EventPluginRegistry={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){EventPluginOrder?invariant(!1):void 0,EventPluginOrder=Array.prototype.slice.call(e),recomputePluginOrdering()},injectEventPluginsByName:function(e){var n=!1;for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];namesToPlugins.hasOwnProperty(i)&&namesToPlugins[i]===r||(namesToPlugins[i]?invariant(!1):void 0,namesToPlugins[i]=r,n=!0)}n&&recomputePluginOrdering()},getPluginModuleForEvent:function(e){var n=e.dispatchConfig;if(n.registrationName)return EventPluginRegistry.registrationNameModules[n.registrationName]||null;for(var i in n.phasedRegistrationNames)if(n.phasedRegistrationNames.hasOwnProperty(i)){var r=EventPluginRegistry.registrationNameModules[n.phasedRegistrationNames[i]];if(r)return r}return null},_resetEventPlugins:function(){EventPluginOrder=null;for(var e in namesToPlugins)namesToPlugins.hasOwnProperty(e)&&delete namesToPlugins[e];EventPluginRegistry.plugins.length=0;var n=EventPluginRegistry.eventNameDispatchConfigs;for(var i in n)n.hasOwnProperty(i)&&delete n[i];var r=EventPluginRegistry.registrationNameModules;for(var t in r)r.hasOwnProperty(t)&&delete r[t]}};module.exports=EventPluginRegistry;

},{"fbjs/lib/invariant":20}],65:[function(require,module,exports){
"use strict";function isEndish(e){return e===topLevelTypes.topMouseUp||e===topLevelTypes.topTouchEnd||e===topLevelTypes.topTouchCancel}function isMoveish(e){return e===topLevelTypes.topMouseMove||e===topLevelTypes.topTouchMove}function isStartish(e){return e===topLevelTypes.topMouseDown||e===topLevelTypes.topTouchStart}function executeDispatch(e,t,i,n){var s=e.type||"unknown-event";e.currentTarget=injection.Mount.getNode(n),t?ReactErrorUtils.invokeGuardedCallbackWithCatch(s,i,e,n):ReactErrorUtils.invokeGuardedCallback(s,i,e,n),e.currentTarget=null}function executeDispatchesInOrder(e,t){var i=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(i))for(var s=0;s<i.length&&!e.isPropagationStopped();s++)executeDispatch(e,t,i[s],n[s]);else i&&executeDispatch(e,t,i,n);e._dispatchListeners=null,e._dispatchIDs=null}function executeDispatchesInOrderStopAtTrueImpl(e){var t=e._dispatchListeners,i=e._dispatchIDs;if(Array.isArray(t)){for(var n=0;n<t.length&&!e.isPropagationStopped();n++)if(t[n](e,i[n]))return i[n]}else if(t&&t(e,i))return i;return null}function executeDispatchesInOrderStopAtTrue(e){var t=executeDispatchesInOrderStopAtTrueImpl(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function executeDirectDispatch(e){var t=e._dispatchListeners,i=e._dispatchIDs;Array.isArray(t)?invariant(!1):void 0;var n=t?t(e,i):null;return e._dispatchListeners=null,e._dispatchIDs=null,n}function hasDispatches(e){return!!e._dispatchListeners}var EventConstants=require("./EventConstants"),ReactErrorUtils=require("./ReactErrorUtils"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),injection={Mount:null,injectMount:function(e){injection.Mount=e}},topLevelTypes=EventConstants.topLevelTypes,validateEventDispatches,EventPluginUtils={isEndish:isEndish,isMoveish:isMoveish,isStartish:isStartish,executeDirectDispatch:executeDirectDispatch,executeDispatchesInOrder:executeDispatchesInOrder,executeDispatchesInOrderStopAtTrue:executeDispatchesInOrderStopAtTrue,hasDispatches:hasDispatches,getNode:function(e){return injection.Mount.getNode(e)},getID:function(e){return injection.Mount.getID(e)},injection:injection};module.exports=EventPluginUtils;

},{"./EventConstants":62,"./ReactErrorUtils":102,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],66:[function(require,module,exports){
"use strict";function listenerAtPhase(e,a,t){var c=a.dispatchConfig.phasedRegistrationNames[t];return getListener(e,c)}function accumulateDirectionalDispatches(e,a,t){var c=a?PropagationPhases.bubbled:PropagationPhases.captured,s=listenerAtPhase(e,t,c);s&&(t._dispatchListeners=accumulateInto(t._dispatchListeners,s),t._dispatchIDs=accumulateInto(t._dispatchIDs,e))}function accumulateTwoPhaseDispatchesSingle(e){e&&e.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,accumulateDirectionalDispatches,e)}function accumulateTwoPhaseDispatchesSingleSkipTarget(e){e&&e.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(e.dispatchMarker,accumulateDirectionalDispatches,e)}function accumulateDispatches(e,a,t){if(t&&t.dispatchConfig.registrationName){var c=t.dispatchConfig.registrationName,s=getListener(e,c);s&&(t._dispatchListeners=accumulateInto(t._dispatchListeners,s),t._dispatchIDs=accumulateInto(t._dispatchIDs,e))}}function accumulateDirectDispatchesSingle(e){e&&e.dispatchConfig.registrationName&&accumulateDispatches(e.dispatchMarker,null,e)}function accumulateTwoPhaseDispatches(e){forEachAccumulated(e,accumulateTwoPhaseDispatchesSingle)}function accumulateTwoPhaseDispatchesSkipTarget(e){forEachAccumulated(e,accumulateTwoPhaseDispatchesSingleSkipTarget)}function accumulateEnterLeaveDispatches(e,a,t,c){EventPluginHub.injection.getInstanceHandle().traverseEnterLeave(t,c,accumulateDispatches,e,a)}function accumulateDirectDispatches(e){forEachAccumulated(e,accumulateDirectDispatchesSingle)}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),warning=require("fbjs/lib/warning"),accumulateInto=require("./accumulateInto"),forEachAccumulated=require("./forEachAccumulated"),PropagationPhases=EventConstants.PropagationPhases,getListener=EventPluginHub.getListener,EventPropagators={accumulateTwoPhaseDispatches:accumulateTwoPhaseDispatches,accumulateTwoPhaseDispatchesSkipTarget:accumulateTwoPhaseDispatchesSkipTarget,accumulateDirectDispatches:accumulateDirectDispatches,accumulateEnterLeaveDispatches:accumulateEnterLeaveDispatches};module.exports=EventPropagators;

},{"./EventConstants":62,"./EventPluginHub":63,"./accumulateInto":148,"./forEachAccumulated":156,"fbjs/lib/warning":29}],67:[function(require,module,exports){
"use strict";function FallbackCompositionState(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),getTextContentAccessor=require("./getTextContentAccessor");assign(FallbackCompositionState.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[getTextContentAccessor()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,o=this._startText,s=o.length,a=this.getText(),l=a.length;for(t=0;t<s&&o[t]===a[t];t++);var i=s-t;for(e=1;e<=i&&o[s-e]===a[l-e];e++);var r=e>1?1-e:void 0;return this._fallbackText=a.slice(t,r),this._fallbackText}}),PooledClass.addPoolingTo(FallbackCompositionState),module.exports=FallbackCompositionState;

},{"./Object.assign":70,"./PooledClass":71,"./getTextContentAccessor":163}],68:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,MUST_USE_PROPERTY=DOMProperty.injection.MUST_USE_PROPERTY,HAS_BOOLEAN_VALUE=DOMProperty.injection.HAS_BOOLEAN_VALUE,HAS_SIDE_EFFECTS=DOMProperty.injection.HAS_SIDE_EFFECTS,HAS_NUMERIC_VALUE=DOMProperty.injection.HAS_NUMERIC_VALUE,HAS_POSITIVE_NUMERIC_VALUE=DOMProperty.injection.HAS_POSITIVE_NUMERIC_VALUE,HAS_OVERLOADED_BOOLEAN_VALUE=DOMProperty.injection.HAS_OVERLOADED_BOOLEAN_VALUE,hasSVG;if(ExecutionEnvironment.canUseDOM){var implementation=document.implementation;hasSVG=implementation&&implementation.hasFeature&&implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var HTMLDOMPropertyConfig={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,allowTransparency:MUST_USE_ATTRIBUTE,alt:null,async:HAS_BOOLEAN_VALUE,autoComplete:null,autoPlay:HAS_BOOLEAN_VALUE,capture:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,cellPadding:null,cellSpacing:null,charSet:MUST_USE_ATTRIBUTE,challenge:MUST_USE_ATTRIBUTE,checked:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,classID:MUST_USE_ATTRIBUTE,className:hasSVG?MUST_USE_ATTRIBUTE:MUST_USE_PROPERTY,cols:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,colSpan:null,content:null,contentEditable:null,contextMenu:MUST_USE_ATTRIBUTE,controls:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,coords:null,crossOrigin:null,data:null,dateTime:MUST_USE_ATTRIBUTE,default:HAS_BOOLEAN_VALUE,defer:HAS_BOOLEAN_VALUE,dir:null,disabled:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,download:HAS_OVERLOADED_BOOLEAN_VALUE,draggable:null,encType:null,form:MUST_USE_ATTRIBUTE,formAction:MUST_USE_ATTRIBUTE,formEncType:MUST_USE_ATTRIBUTE,formMethod:MUST_USE_ATTRIBUTE,formNoValidate:HAS_BOOLEAN_VALUE,formTarget:MUST_USE_ATTRIBUTE,frameBorder:MUST_USE_ATTRIBUTE,headers:null,height:MUST_USE_ATTRIBUTE,hidden:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:MUST_USE_PROPERTY,inputMode:MUST_USE_ATTRIBUTE,integrity:null,is:MUST_USE_ATTRIBUTE,keyParams:MUST_USE_ATTRIBUTE,keyType:MUST_USE_ATTRIBUTE,kind:null,label:null,lang:null,list:MUST_USE_ATTRIBUTE,loop:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,low:null,manifest:MUST_USE_ATTRIBUTE,marginHeight:null,marginWidth:null,max:null,maxLength:MUST_USE_ATTRIBUTE,media:MUST_USE_ATTRIBUTE,mediaGroup:null,method:null,min:null,minLength:MUST_USE_ATTRIBUTE,multiple:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,muted:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,name:null,nonce:MUST_USE_ATTRIBUTE,noValidate:HAS_BOOLEAN_VALUE,open:HAS_BOOLEAN_VALUE,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,rel:null,required:HAS_BOOLEAN_VALUE,reversed:HAS_BOOLEAN_VALUE,role:MUST_USE_ATTRIBUTE,rows:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,rowSpan:null,sandbox:null,scope:null,scoped:HAS_BOOLEAN_VALUE,scrolling:null,seamless:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,selected:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,shape:null,size:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,sizes:MUST_USE_ATTRIBUTE,span:HAS_POSITIVE_NUMERIC_VALUE,spellCheck:null,src:null,srcDoc:MUST_USE_PROPERTY,srcLang:null,srcSet:MUST_USE_ATTRIBUTE,start:HAS_NUMERIC_VALUE,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:MUST_USE_PROPERTY|HAS_SIDE_EFFECTS,width:MUST_USE_ATTRIBUTE,wmode:MUST_USE_ATTRIBUTE,wrap:null,about:MUST_USE_ATTRIBUTE,datatype:MUST_USE_ATTRIBUTE,inlist:MUST_USE_ATTRIBUTE,prefix:MUST_USE_ATTRIBUTE,property:MUST_USE_ATTRIBUTE,resource:MUST_USE_ATTRIBUTE,typeof:MUST_USE_ATTRIBUTE,vocab:MUST_USE_ATTRIBUTE,autoCapitalize:MUST_USE_ATTRIBUTE,autoCorrect:MUST_USE_ATTRIBUTE,autoSave:null,color:null,itemProp:MUST_USE_ATTRIBUTE,itemScope:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,itemType:MUST_USE_ATTRIBUTE,itemID:MUST_USE_ATTRIBUTE,itemRef:MUST_USE_ATTRIBUTE,results:null,security:MUST_USE_ATTRIBUTE,unselectable:MUST_USE_ATTRIBUTE},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoComplete:"autocomplete",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};module.exports=HTMLDOMPropertyConfig;

},{"./DOMProperty":57,"fbjs/lib/ExecutionEnvironment":6}],69:[function(require,module,exports){
"use strict";function _assertSingleLink(e){null!=e.checkedLink&&null!=e.valueLink?invariant(!1):void 0}function _assertValueLink(e){_assertSingleLink(e),null!=e.value||null!=e.onChange?invariant(!1):void 0}function _assertCheckedLink(e){_assertSingleLink(e),null!=e.checked||null!=e.onChange?invariant(!1):void 0}function getDeclarationErrorAddendum(e){if(e){var n=e.getName();if(n)return" Check the render method of `"+n+"`."}return""}var ReactPropTypes=require("./ReactPropTypes"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),hasReadOnlyValue={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},propTypes={value:function(e,n,a){return!e[n]||hasReadOnlyValue[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,n,a){return!e[n]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:ReactPropTypes.func},loggedTypeFailures={},LinkedValueUtils={checkPropTypes:function(e,n,a){for(var r in propTypes){if(propTypes.hasOwnProperty(r))var i=propTypes[r](n,r,e,ReactPropTypeLocations.prop);if(i instanceof Error&&!(i.message in loggedTypeFailures)){loggedTypeFailures[i.message]=!0;getDeclarationErrorAddendum(a)}}},getValue:function(e){return e.valueLink?(_assertValueLink(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(_assertCheckedLink(e),e.checkedLink.value):e.checked},executeOnChange:function(e,n){return e.valueLink?(_assertValueLink(e),e.valueLink.requestChange(n.target.value)):e.checkedLink?(_assertCheckedLink(e),e.checkedLink.requestChange(n.target.checked)):e.onChange?e.onChange.call(void 0,n):void 0}};module.exports=LinkedValueUtils;

},{"./ReactPropTypeLocations":119,"./ReactPropTypes":120,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],70:[function(require,module,exports){
"use strict";function assign(r,e){if(null==r)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(r),t=Object.prototype.hasOwnProperty,o=1;o<arguments.length;o++){var a=arguments[o];if(null!=a){var l=Object(a);for(var s in l)t.call(l,s)&&(n[s]=l[s])}}return n}module.exports=assign;

},{}],71:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),oneArgumentPooler=function(o){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,o),n}return new e(o)},twoArgumentPooler=function(o,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,o,e),r}return new n(o,e)},threeArgumentPooler=function(o,e,n){var r=this;if(r.instancePool.length){var t=r.instancePool.pop();return r.call(t,o,e,n),t}return new r(o,e,n)},fourArgumentPooler=function(o,e,n,r){var t=this;if(t.instancePool.length){var l=t.instancePool.pop();return t.call(l,o,e,n,r),l}return new t(o,e,n,r)},fiveArgumentPooler=function(o,e,n,r,t){var l=this;if(l.instancePool.length){var i=l.instancePool.pop();return l.call(i,o,e,n,r,t),i}return new l(o,e,n,r,t)},standardReleaser=function(o){var e=this;o instanceof e?void 0:invariant(!1),o.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(o)},DEFAULT_POOL_SIZE=10,DEFAULT_POOLER=oneArgumentPooler,addPoolingTo=function(o,e){var n=o;return n.instancePool=[],n.getPooled=e||DEFAULT_POOLER,n.poolSize||(n.poolSize=DEFAULT_POOL_SIZE),n.release=standardReleaser,n},PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fourArgumentPooler:fourArgumentPooler,fiveArgumentPooler:fiveArgumentPooler};module.exports=PooledClass;

},{"fbjs/lib/invariant":20}],72:[function(require,module,exports){
"use strict";var ReactDOM=require("./ReactDOM"),ReactDOMServer=require("./ReactDOMServer"),ReactIsomorphic=require("./ReactIsomorphic"),assign=require("./Object.assign"),deprecated=require("./deprecated"),React={};assign(React,ReactIsomorphic),assign(React,{findDOMNode:deprecated("findDOMNode","ReactDOM","react-dom",ReactDOM,ReactDOM.findDOMNode),render:deprecated("render","ReactDOM","react-dom",ReactDOM,ReactDOM.render),unmountComponentAtNode:deprecated("unmountComponentAtNode","ReactDOM","react-dom",ReactDOM,ReactDOM.unmountComponentAtNode),renderToString:deprecated("renderToString","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToString),renderToStaticMarkup:deprecated("renderToStaticMarkup","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToStaticMarkup)}),React.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOM,React.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOMServer,module.exports=React;

},{"./Object.assign":70,"./ReactDOM":83,"./ReactDOMServer":93,"./ReactIsomorphic":109,"./deprecated":152}],73:[function(require,module,exports){
"use strict";var ReactInstanceMap=require("./ReactInstanceMap"),findDOMNode=require("./findDOMNode"),warning=require("fbjs/lib/warning"),didWarnKey="_getDOMNodeDidWarn",ReactBrowserComponentMixin={getDOMNode:function(){return this.constructor[didWarnKey]=!0,findDOMNode(this)}};module.exports=ReactBrowserComponentMixin;

},{"./ReactInstanceMap":108,"./findDOMNode":154,"fbjs/lib/warning":29}],74:[function(require,module,exports){
"use strict";function getListeningForDocument(e){return Object.prototype.hasOwnProperty.call(e,topListenersIDKey)||(e[topListenersIDKey]=reactTopListenersCounter++,alreadyListeningTo[e[topListenersIDKey]]={}),alreadyListeningTo[e[topListenersIDKey]]}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),EventPluginRegistry=require("./EventPluginRegistry"),ReactEventEmitterMixin=require("./ReactEventEmitterMixin"),ReactPerf=require("./ReactPerf"),ViewportMetrics=require("./ViewportMetrics"),assign=require("./Object.assign"),isEventSupported=require("./isEventSupported"),alreadyListeningTo={},isMonitoringScrollValue=!1,reactTopListenersCounter=0,topEventMapping={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},topListenersIDKey="_reactListenersID"+String(Math.random()).slice(2),ReactBrowserEventEmitter=assign({},ReactEventEmitterMixin,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(ReactBrowserEventEmitter.handleTopLevel),ReactBrowserEventEmitter.ReactEventListener=e}},setEnabled:function(e){ReactBrowserEventEmitter.ReactEventListener&&ReactBrowserEventEmitter.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!ReactBrowserEventEmitter.ReactEventListener||!ReactBrowserEventEmitter.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var r=t,n=getListeningForDocument(r),o=EventPluginRegistry.registrationNameDependencies[e],i=EventConstants.topLevelTypes,a=0;a<o.length;a++){var s=o[a];n.hasOwnProperty(s)&&n[s]||(s===i.topWheel?isEventSupported("wheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"wheel",r):isEventSupported("mousewheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"mousewheel",r):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"DOMMouseScroll",r):s===i.topScroll?isEventSupported("scroll",!0)?ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topScroll,"scroll",r):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topScroll,"scroll",ReactBrowserEventEmitter.ReactEventListener.WINDOW_HANDLE):s===i.topFocus||s===i.topBlur?(isEventSupported("focus",!0)?(ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topFocus,"focus",r),ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topBlur,"blur",r)):isEventSupported("focusin")&&(ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topFocus,"focusin",r),ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topBlur,"focusout",r)),n[i.topBlur]=!0,n[i.topFocus]=!0):topEventMapping.hasOwnProperty(s)&&ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(s,topEventMapping[s],r),n[s]=!0)}},trapBubbledEvent:function(e,t,r){return ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(e,t,r)},trapCapturedEvent:function(e,t,r){return ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(e,t,r)},ensureScrollValueMonitoring:function(){if(!isMonitoringScrollValue){var e=ViewportMetrics.refreshScrollValues;ReactBrowserEventEmitter.ReactEventListener.monitorScrollValue(e),isMonitoringScrollValue=!0}},eventNameDispatchConfigs:EventPluginHub.eventNameDispatchConfigs,registrationNameModules:EventPluginHub.registrationNameModules,putListener:EventPluginHub.putListener,getListener:EventPluginHub.getListener,deleteListener:EventPluginHub.deleteListener,deleteAllListeners:EventPluginHub.deleteAllListeners});ReactPerf.measureMethods(ReactBrowserEventEmitter,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),module.exports=ReactBrowserEventEmitter;

},{"./EventConstants":62,"./EventPluginHub":63,"./EventPluginRegistry":64,"./Object.assign":70,"./ReactEventEmitterMixin":103,"./ReactPerf":117,"./ViewportMetrics":147,"./isEventSupported":165}],75:[function(require,module,exports){
"use strict";function instantiateChild(e,n,t){var r=void 0===e[t];null!=n&&r&&(e[t]=instantiateReactComponent(n,null))}var ReactReconciler=require("./ReactReconciler"),instantiateReactComponent=require("./instantiateReactComponent"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),traverseAllChildren=require("./traverseAllChildren"),warning=require("fbjs/lib/warning"),ReactChildReconciler={instantiateChildren:function(e,n,t){if(null==e)return null;var r={};return traverseAllChildren(e,instantiateChild,r),r},updateChildren:function(e,n,t,r){if(!n&&!e)return null;var i;for(i in n)if(n.hasOwnProperty(i)){var o=e&&e[i],a=o&&o._currentElement,l=n[i];if(null!=o&&shouldUpdateReactComponent(a,l))ReactReconciler.receiveComponent(o,l,t,r),n[i]=o;else{o&&ReactReconciler.unmountComponent(o,i);var c=instantiateReactComponent(l,null);n[i]=c}}for(i in e)!e.hasOwnProperty(i)||n&&n.hasOwnProperty(i)||ReactReconciler.unmountComponent(e[i]);return n},unmountChildren:function(e){for(var n in e)if(e.hasOwnProperty(n)){var t=e[n];ReactReconciler.unmountComponent(t)}}};module.exports=ReactChildReconciler;

},{"./ReactReconciler":122,"./instantiateReactComponent":164,"./shouldUpdateReactComponent":172,"./traverseAllChildren":173,"fbjs/lib/warning":29}],76:[function(require,module,exports){
"use strict";function escapeUserProvidedKey(e){return(""+e).replace(userProvidedKeyEscapeRegex,"//")}function ForEachBookKeeping(e,n){this.func=e,this.context=n,this.count=0}function forEachSingleChild(e,n,t){var r=e.func,o=e.context;r.call(o,n,e.count++)}function forEachChildren(e,n,t){if(null==e)return e;var r=ForEachBookKeeping.getPooled(n,t);traverseAllChildren(e,forEachSingleChild,r),ForEachBookKeeping.release(r)}function MapBookKeeping(e,n,t,r){this.result=e,this.keyPrefix=n,this.func=t,this.context=r,this.count=0}function mapSingleChildIntoContext(e,n,t){var r=e.result,o=e.keyPrefix,l=e.func,i=e.context,u=l.call(i,n,e.count++);Array.isArray(u)?mapIntoWithKeyPrefixInternal(u,r,t,emptyFunction.thatReturnsArgument):null!=u&&(ReactElement.isValidElement(u)&&(u=ReactElement.cloneAndReplaceKey(u,o+(u!==n?escapeUserProvidedKey(u.key||"")+"/":"")+t)),r.push(u))}function mapIntoWithKeyPrefixInternal(e,n,t,r,o){var l="";null!=t&&(l=escapeUserProvidedKey(t)+"/");var i=MapBookKeeping.getPooled(n,l,r,o);traverseAllChildren(e,mapSingleChildIntoContext,i),MapBookKeeping.release(i)}function mapChildren(e,n,t){if(null==e)return e;var r=[];return mapIntoWithKeyPrefixInternal(e,r,null,n,t),r}function forEachSingleChildDummy(e,n,t){return null}function countChildren(e,n){return traverseAllChildren(e,forEachSingleChildDummy,null)}function toArray(e){var n=[];return mapIntoWithKeyPrefixInternal(e,n,null,emptyFunction.thatReturnsArgument),n}var PooledClass=require("./PooledClass"),ReactElement=require("./ReactElement"),emptyFunction=require("fbjs/lib/emptyFunction"),traverseAllChildren=require("./traverseAllChildren"),twoArgumentPooler=PooledClass.twoArgumentPooler,fourArgumentPooler=PooledClass.fourArgumentPooler,userProvidedKeyEscapeRegex=/\/(?!\/)/g;ForEachBookKeeping.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler),MapBookKeeping.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(MapBookKeeping,fourArgumentPooler);var ReactChildren={forEach:forEachChildren,map:mapChildren,mapIntoWithKeyPrefixInternal:mapIntoWithKeyPrefixInternal,count:countChildren,toArray:toArray};module.exports=ReactChildren;

},{"./PooledClass":71,"./ReactElement":98,"./traverseAllChildren":173,"fbjs/lib/emptyFunction":12}],77:[function(require,module,exports){
"use strict";function warnSetProps(){warnedSetProps||(warnedSetProps=!0)}function validateTypeDef(e,t,n){for(var i in t)t.hasOwnProperty(i)}function validateMethodOverride(e,t){var n=ReactClassInterface.hasOwnProperty(t)?ReactClassInterface[t]:null;ReactClassMixin.hasOwnProperty(t)&&(n!==SpecPolicy.OVERRIDE_BASE?invariant(!1):void 0),e.hasOwnProperty(t)&&(n!==SpecPolicy.DEFINE_MANY&&n!==SpecPolicy.DEFINE_MANY_MERGED?invariant(!1):void 0)}function mixSpecIntoComponent(e,t){if(t){"function"==typeof t?invariant(!1):void 0,ReactElement.isValidElement(t)?invariant(!1):void 0;var n=e.prototype;t.hasOwnProperty(MIXINS_KEY)&&RESERVED_SPEC_KEYS.mixins(e,t.mixins);for(var i in t)if(t.hasOwnProperty(i)&&i!==MIXINS_KEY){var o=t[i];if(validateMethodOverride(n,i),RESERVED_SPEC_KEYS.hasOwnProperty(i))RESERVED_SPEC_KEYS[i](e,o);else{var a=ReactClassInterface.hasOwnProperty(i),r=n.hasOwnProperty(i),c="function"==typeof o,p=c&&!a&&!r&&t.autobind!==!1;if(p)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[i]=o,n[i]=o;else if(r){var s=ReactClassInterface[i];!a||s!==SpecPolicy.DEFINE_MANY_MERGED&&s!==SpecPolicy.DEFINE_MANY?invariant(!1):void 0,s===SpecPolicy.DEFINE_MANY_MERGED?n[i]=createMergedResultFunction(n[i],o):s===SpecPolicy.DEFINE_MANY&&(n[i]=createChainedFunction(n[i],o))}else n[i]=o}}}}function mixStaticSpecIntoComponent(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var o=n in RESERVED_SPEC_KEYS;o?invariant(!1):void 0;var a=n in e;a?invariant(!1):void 0,e[n]=i}}}function mergeIntoWithNoDuplicateKeys(e,t){e&&t&&"object"==typeof e&&"object"==typeof t?void 0:invariant(!1);for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]?invariant(!1):void 0,e[n]=t[n]);return e}function createMergedResultFunction(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);if(null==n)return i;if(null==i)return n;var o={};return mergeIntoWithNoDuplicateKeys(o,n),mergeIntoWithNoDuplicateKeys(o,i),o}}function createChainedFunction(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function bindAutoBindMethod(e,t){var n=t.bind(e);return n}function bindAutoBindMethods(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=bindAutoBindMethod(e,n)}}var ReactComponent=require("./ReactComponent"),ReactElement=require("./ReactElement"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),keyMirror=require("fbjs/lib/keyMirror"),keyOf=require("fbjs/lib/keyOf"),warning=require("fbjs/lib/warning"),MIXINS_KEY=keyOf({mixins:null}),SpecPolicy=keyMirror({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),injectedMixins=[],warnedSetProps=!1,ReactClassInterface={mixins:SpecPolicy.DEFINE_MANY,statics:SpecPolicy.DEFINE_MANY,propTypes:SpecPolicy.DEFINE_MANY,contextTypes:SpecPolicy.DEFINE_MANY,childContextTypes:SpecPolicy.DEFINE_MANY,getDefaultProps:SpecPolicy.DEFINE_MANY_MERGED,getInitialState:SpecPolicy.DEFINE_MANY_MERGED,getChildContext:SpecPolicy.DEFINE_MANY_MERGED,render:SpecPolicy.DEFINE_ONCE,componentWillMount:SpecPolicy.DEFINE_MANY,componentDidMount:SpecPolicy.DEFINE_MANY,componentWillReceiveProps:SpecPolicy.DEFINE_MANY,shouldComponentUpdate:SpecPolicy.DEFINE_ONCE,componentWillUpdate:SpecPolicy.DEFINE_MANY,componentDidUpdate:SpecPolicy.DEFINE_MANY,componentWillUnmount:SpecPolicy.DEFINE_MANY,updateComponent:SpecPolicy.OVERRIDE_BASE},RESERVED_SPEC_KEYS={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)mixSpecIntoComponent(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=assign({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=assign({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=createMergedResultFunction(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=assign({},e.propTypes,t)},statics:function(e,t){mixStaticSpecIntoComponent(e,t)},autobind:function(){}},ReactClassMixin={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(e,t){this.updater.enqueueSetProps(this,e),t&&this.updater.enqueueCallback(this,t)},replaceProps:function(e,t){this.updater.enqueueReplaceProps(this,e),t&&this.updater.enqueueCallback(this,t)}},ReactClassComponent=function(){};assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin);var ReactClass={createClass:function(e){var t=function(e,t,n){this.__reactAutoBindMap&&bindAutoBindMethods(this),this.props=e,this.context=t,this.refs=emptyObject,this.updater=n||ReactNoopUpdateQueue,this.state=null;var i=this.getInitialState?this.getInitialState():null;"object"!=typeof i||Array.isArray(i)?invariant(!1):void 0,this.state=i};t.prototype=new ReactClassComponent,t.prototype.constructor=t,injectedMixins.forEach(mixSpecIntoComponent.bind(null,t)),mixSpecIntoComponent(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render?void 0:invariant(!1);for(var n in ReactClassInterface)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){injectedMixins.push(e)}}};module.exports=ReactClass;

},{"./Object.assign":70,"./ReactComponent":78,"./ReactElement":98,"./ReactNoopUpdateQueue":115,"./ReactPropTypeLocationNames":118,"./ReactPropTypeLocations":119,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20,"fbjs/lib/keyMirror":23,"fbjs/lib/keyOf":24,"fbjs/lib/warning":29}],78:[function(require,module,exports){
"use strict";function ReactComponent(e,t,n){this.props=e,this.context=t,this.refs=emptyObject,this.updater=n||ReactNoopUpdateQueue}var ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue"),canDefineProperty=require("./canDefineProperty"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning");ReactComponent.prototype.isReactComponent={},ReactComponent.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e?invariant(!1):void 0,this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t)},ReactComponent.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e)};var deprecatedAPIs,defineDeprecationWarning,fnName;module.exports=ReactComponent;

},{"./ReactNoopUpdateQueue":115,"./canDefineProperty":150,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],79:[function(require,module,exports){
"use strict";var ReactDOMIDOperations=require("./ReactDOMIDOperations"),ReactMount=require("./ReactMount"),ReactComponentBrowserEnvironment={processChildrenUpdates:ReactDOMIDOperations.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:ReactDOMIDOperations.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){ReactMount.purgeID(e)}};module.exports=ReactComponentBrowserEnvironment;

},{"./ReactDOMIDOperations":88,"./ReactMount":111}],80:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),injected=!1,ReactComponentEnvironment={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(n){injected?invariant(!1):void 0,ReactComponentEnvironment.unmountIDFromEnvironment=n.unmountIDFromEnvironment,ReactComponentEnvironment.replaceNodeWithMarkupByID=n.replaceNodeWithMarkupByID,ReactComponentEnvironment.processChildrenUpdates=n.processChildrenUpdates,injected=!0}}};module.exports=ReactComponentEnvironment;

},{"fbjs/lib/invariant":20}],81:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}function StatelessComponent(e){}var ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceMap=require("./ReactInstanceMap"),ReactPerf=require("./ReactPerf"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactReconciler=require("./ReactReconciler"),ReactUpdateQueue=require("./ReactUpdateQueue"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),warning=require("fbjs/lib/warning");StatelessComponent.prototype.render=function(){var e=ReactInstanceMap.get(this)._currentElement.type;return e(this.props,this.context,this.updater)};var nextMountID=1,ReactCompositeComponentMixin={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=nextMountID++,this._rootNodeID=e;var o,i,r=this._processProps(this._currentElement.props),a=this._processContext(n),s=this._currentElement.type,c="prototype"in s;c&&(o=new s(r,a,ReactUpdateQueue)),c&&null!==o&&o!==!1&&!ReactElement.isValidElement(o)||(i=o,o=new StatelessComponent(s)),o.props=r,o.context=a,o.refs=emptyObject,o.updater=ReactUpdateQueue,this._instance=o,ReactInstanceMap.set(o,this);var p=o.state;void 0===p&&(o.state=p=null),"object"!=typeof p||Array.isArray(p)?invariant(!1):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===i&&(i=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(i);var u=ReactReconciler.mountComponent(this._renderedComponent,e,t,this._processChildContext(n));return o.componentDidMount&&t.getReactMountReady().enqueue(o.componentDidMount,o),u},unmountComponent:function(){var e=this._instance;e.componentWillUnmount&&e.componentWillUnmount(),ReactReconciler.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,ReactInstanceMap.remove(e)},_maskContext:function(e){var t=null,n=this._currentElement.type,o=n.contextTypes;if(!o)return emptyObject;t={};for(var i in o)t[i]=e[i];return t},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t=this._currentElement.type,n=this._instance,o=n.getChildContext&&n.getChildContext();if(o){"object"!=typeof t.childContextTypes?invariant(!1):void 0;for(var i in o)i in t.childContextTypes?void 0:invariant(!1);return assign({},e,o)}return e},_processProps:function(e){return e},_checkPropTypes:function(e,t,n){var o=this.getName();for(var i in e)if(e.hasOwnProperty(i)){var r;try{"function"!=typeof e[i]?invariant(!1):void 0,r=e[i](t,i,o,n)}catch(e){r=e}if(r instanceof Error){getDeclarationErrorAddendum(this);n===ReactPropTypeLocations.prop}}},receiveComponent:function(e,t,n){var o=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,o,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&ReactReconciler.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(e,t,n,o,i){var r,a=this._instance,s=this._context===i?a.context:this._processContext(i);t===n?r=n.props:(r=this._processProps(n.props),a.componentWillReceiveProps&&a.componentWillReceiveProps(r,s));var c=this._processPendingState(r,s),p=this._pendingForceUpdate||!a.shouldComponentUpdate||a.shouldComponentUpdate(r,c,s);p?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,r,c,s,e,i)):(this._currentElement=n,this._context=i,a.props=r,a.state=c,a.context=s)},_processPendingState:function(e,t){var n=this._instance,o=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!o)return n.state;if(i&&1===o.length)return o[0];for(var r=assign({},i?o[0]:n.state),a=i?1:0;a<o.length;a++){var s=o[a];assign(r,"function"==typeof s?s.call(n,r,e,t):s)}return r},_performComponentUpdate:function(e,t,n,o,i,r){var a,s,c,p=this._instance,u=Boolean(p.componentDidUpdate);u&&(a=p.props,s=p.state,c=p.context),p.componentWillUpdate&&p.componentWillUpdate(t,n,o),this._currentElement=e,this._context=r,p.props=t,p.state=n,p.context=o,this._updateRenderedComponent(i,r),u&&i.getReactMountReady().enqueue(p.componentDidUpdate.bind(p,a,s,c),p)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,o=n._currentElement,i=this._renderValidatedComponent();if(shouldUpdateReactComponent(o,i))ReactReconciler.receiveComponent(n,i,e,this._processChildContext(t));else{var r=this._rootNodeID,a=n._rootNodeID;ReactReconciler.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(i);var s=ReactReconciler.mountComponent(this._renderedComponent,r,e,this._processChildContext(t));this._replaceNodeWithMarkupByID(a,s)}},_replaceNodeWithMarkupByID:function(e,t){ReactComponentEnvironment.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(){var e;ReactCurrentOwner.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{ReactCurrentOwner.current=null}return null===e||e===!1||ReactElement.isValidElement(e)?void 0:invariant(!1),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n?invariant(!1):void 0;var o=t.getPublicInstance(),i=n.refs===emptyObject?n.refs={}:n.refs;i[e]=o},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return e instanceof StatelessComponent?null:e},_instantiateReactComponent:null};ReactPerf.measureMethods(ReactCompositeComponentMixin,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var ReactCompositeComponent={Mixin:ReactCompositeComponentMixin};module.exports=ReactCompositeComponent;

},{"./Object.assign":70,"./ReactComponentEnvironment":80,"./ReactCurrentOwner":82,"./ReactElement":98,"./ReactInstanceMap":108,"./ReactPerf":117,"./ReactPropTypeLocationNames":118,"./ReactPropTypeLocations":119,"./ReactReconciler":122,"./ReactUpdateQueue":128,"./shouldUpdateReactComponent":172,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],82:[function(require,module,exports){
"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner;

},{}],83:[function(require,module,exports){
"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactDOMTextComponent=require("./ReactDOMTextComponent"),ReactDefaultInjection=require("./ReactDefaultInjection"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),ReactUpdates=require("./ReactUpdates"),ReactVersion=require("./ReactVersion"),findDOMNode=require("./findDOMNode"),renderSubtreeIntoContainer=require("./renderSubtreeIntoContainer"),warning=require("fbjs/lib/warning");ReactDefaultInjection.inject();var render=ReactPerf.measure("React","render",ReactMount.render),React={findDOMNode:findDOMNode,render:render,unmountComponentAtNode:ReactMount.unmountComponentAtNode,version:ReactVersion,unstable_batchedUpdates:ReactUpdates.batchedUpdates,unstable_renderSubtreeIntoContainer:renderSubtreeIntoContainer};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:ReactCurrentOwner,InstanceHandles:ReactInstanceHandles,Mount:ReactMount,Reconciler:ReactReconciler,TextComponent:ReactDOMTextComponent});var ExecutionEnvironment,ieCompatibilityMode,expectedFeatures,i;module.exports=React;

},{"./ReactCurrentOwner":82,"./ReactDOMTextComponent":94,"./ReactDefaultInjection":97,"./ReactInstanceHandles":107,"./ReactMount":111,"./ReactPerf":117,"./ReactReconciler":122,"./ReactUpdates":129,"./ReactVersion":130,"./findDOMNode":154,"./renderSubtreeIntoContainer":169,"fbjs/lib/warning":29}],84:[function(require,module,exports){
"use strict";var mouseListenerNames={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},ReactDOMButton={getNativeProps:function(e,o,n){if(!o.disabled)return o;var t={};for(var u in o)o.hasOwnProperty(u)&&!mouseListenerNames[u]&&(t[u]=o[u]);return t}};module.exports=ReactDOMButton;

},{}],85:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){if(e){var t=e._currentElement._owner||null;if(t){var r=t.getName();if(r)return" This DOM node was rendered by `"+r+"`."}}return""}function legacyGetDOMNode(){return this}function legacyIsMounted(){var e=this._reactInternalComponent;return!!e}function legacySetStateEtc(){}function legacySetProps(e,t){var r=this._reactInternalComponent;r&&(ReactUpdateQueue.enqueueSetPropsInternal(r,e),t&&ReactUpdateQueue.enqueueCallbackInternal(r,t))}function legacyReplaceProps(e,t){var r=this._reactInternalComponent;r&&(ReactUpdateQueue.enqueueReplacePropsInternal(r,e),t&&ReactUpdateQueue.enqueueCallbackInternal(r,t))}function friendlyStringify(e){if("object"==typeof e){if(Array.isArray(e))return"["+e.map(friendlyStringify).join(", ")+"]";var t=[];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=/^[a-z$_][\w$_]*$/i.test(r)?r:JSON.stringify(r);t.push(n+": "+friendlyStringify(e[r]))}return"{"+t.join(", ")+"}"}return"string"==typeof e?JSON.stringify(e):"function"==typeof e?"[function object]":String(e)}function checkAndWarnForMutatedStyle(e,t,r){if(null!=e&&null!=t&&!shallowEqual(e,t)){var n,a=r._tag,o=r._currentElement._owner;o&&(n=o.getName());var i=n+"|"+a;styleMutationWarning.hasOwnProperty(i)||(styleMutationWarning[i]=!0)}}function assertValidProps(e,t){t&&(null!=t.dangerouslySetInnerHTML&&(null!=t.children?invariant(!1):void 0,"object"==typeof t.dangerouslySetInnerHTML&&HTML in t.dangerouslySetInnerHTML?void 0:invariant(!1)),null!=t.style&&"object"!=typeof t.style?invariant(!1):void 0)}function enqueuePutListener(e,t,r,n){var a=ReactMount.findReactContainerForID(e);if(a){var o=a.nodeType===ELEMENT_NODE_TYPE?a.ownerDocument:a;listenTo(t,o)}n.getReactMountReady().enqueue(putListener,{id:e,registrationName:t,listener:r})}function putListener(){var e=this;ReactBrowserEventEmitter.putListener(e.id,e.registrationName,e.listener)}function trapBubbledEventsLocal(){var e=this;e._rootNodeID?void 0:invariant(!1);var t=ReactMount.getNode(e._rootNodeID);switch(t?void 0:invariant(!1),e._tag){case"iframe":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var r in mediaEvents)mediaEvents.hasOwnProperty(r)&&e._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes[r],mediaEvents[r],t));break;case"img":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topError,"error",t),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topReset,"reset",t),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topSubmit,"submit",t)]}}function mountReadyInputWrapper(){ReactDOMInput.mountReadyWrapper(this)}function postUpdateSelectWrapper(){ReactDOMSelect.postUpdateWrapper(this)}function validateDangerousTag(e){hasOwnProperty.call(validatedTagCache,e)||(VALID_TAG_REGEX.test(e)?void 0:invariant(!1),validatedTagCache[e]=!0)}function processChildContextDev(e,t){e=assign({},e);var r=e[validateDOMNesting.ancestorInfoContextKey];return e[validateDOMNesting.ancestorInfoContextKey]=validateDOMNesting.updatedAncestorInfo(r,t._tag,t),e}function isCustomComponent(e,t){return e.indexOf("-")>=0||null!=t.is}function ReactDOMComponent(e){validateDangerousTag(e),this._tag=e.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null}var AutoFocusUtils=require("./AutoFocusUtils"),CSSPropertyOperations=require("./CSSPropertyOperations"),DOMProperty=require("./DOMProperty"),DOMPropertyOperations=require("./DOMPropertyOperations"),EventConstants=require("./EventConstants"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactDOMButton=require("./ReactDOMButton"),ReactDOMInput=require("./ReactDOMInput"),ReactDOMOption=require("./ReactDOMOption"),ReactDOMSelect=require("./ReactDOMSelect"),ReactDOMTextarea=require("./ReactDOMTextarea"),ReactMount=require("./ReactMount"),ReactMultiChild=require("./ReactMultiChild"),ReactPerf=require("./ReactPerf"),ReactUpdateQueue=require("./ReactUpdateQueue"),assign=require("./Object.assign"),canDefineProperty=require("./canDefineProperty"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),invariant=require("fbjs/lib/invariant"),isEventSupported=require("./isEventSupported"),keyOf=require("fbjs/lib/keyOf"),setInnerHTML=require("./setInnerHTML"),setTextContent=require("./setTextContent"),shallowEqual=require("fbjs/lib/shallowEqual"),validateDOMNesting=require("./validateDOMNesting"),warning=require("fbjs/lib/warning"),deleteListener=ReactBrowserEventEmitter.deleteListener,listenTo=ReactBrowserEventEmitter.listenTo,registrationNameModules=ReactBrowserEventEmitter.registrationNameModules,CONTENT_TYPES={string:!0,number:!0},CHILDREN=keyOf({children:null}),STYLE=keyOf({style:null}),HTML=keyOf({__html:null}),ELEMENT_NODE_TYPE=1,legacyPropsDescriptor,styleMutationWarning={},mediaEvents={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},omittedCloseTags={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},newlineEatingTags={listing:!0,pre:!0,textarea:!0},voidElementTags=assign({menuitem:!0},omittedCloseTags),VALID_TAG_REGEX=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,validatedTagCache={},hasOwnProperty={}.hasOwnProperty;ReactDOMComponent.displayName="ReactDOMComponent",ReactDOMComponent.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,r){this._rootNodeID=e;var n=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"button":n=ReactDOMButton.getNativeProps(this,n,r);break;case"input":ReactDOMInput.mountWrapper(this,n,r),n=ReactDOMInput.getNativeProps(this,n,r);break;case"option":ReactDOMOption.mountWrapper(this,n,r),n=ReactDOMOption.getNativeProps(this,n,r);break;case"select":ReactDOMSelect.mountWrapper(this,n,r),n=ReactDOMSelect.getNativeProps(this,n,r),r=ReactDOMSelect.processChildContext(this,n,r);break;case"textarea":ReactDOMTextarea.mountWrapper(this,n,r),n=ReactDOMTextarea.getNativeProps(this,n,r)}assertValidProps(this,n);var a;if(t.useCreateElement){var o=r[ReactMount.ownerDocumentContextKey],i=o.createElement(this._currentElement.type);DOMPropertyOperations.setAttributeForID(i,this._rootNodeID),ReactMount.getID(i),this._updateDOMProperties({},n,t,i),this._createInitialChildren(t,n,r,i),a=i}else{var s=this._createOpenTagMarkupAndPutListeners(t,n),p=this._createContentMarkup(t,n,r);a=!p&&omittedCloseTags[this._tag]?s+"/>":s+">"+p+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(mountReadyInputWrapper,this);case"button":case"select":case"textarea":n.autoFocus&&t.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}return a},_createOpenTagMarkupAndPutListeners:function(e,t){var r="<"+this._currentElement.type;for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];if(null!=a)if(registrationNameModules.hasOwnProperty(n))a&&enqueuePutListener(this._rootNodeID,n,a,e);else{n===STYLE&&(a&&(a=this._previousStyleCopy=assign({},t.style)),a=CSSPropertyOperations.createMarkupForStyles(a));var o=null;null!=this._tag&&isCustomComponent(this._tag,t)?n!==CHILDREN&&(o=DOMPropertyOperations.createMarkupForCustomAttribute(n,a)):o=DOMPropertyOperations.createMarkupForProperty(n,a),o&&(r+=" "+o)}}if(e.renderToStaticMarkup)return r;var i=DOMPropertyOperations.createMarkupForID(this._rootNodeID);return r+" "+i},_createContentMarkup:function(e,t,r){var n="",a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&(n=a.__html);else{var o=CONTENT_TYPES[typeof t.children]?t.children:null,i=null!=o?null:t.children;if(null!=o)n=escapeTextContentForBrowser(o);else if(null!=i){var s=this.mountChildren(i,e,r);n=s.join("")}}return newlineEatingTags[this._tag]&&"\n"===n.charAt(0)?"\n"+n:n},_createInitialChildren:function(e,t,r,n){var a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&setInnerHTML(n,a.__html);else{var o=CONTENT_TYPES[typeof t.children]?t.children:null,i=null!=o?null:t.children;if(null!=o)setTextContent(n,o);else if(null!=i)for(var s=this.mountChildren(i,e,r),p=0;p<s.length;p++)n.appendChild(s[p])}},receiveComponent:function(e,t,r){var n=this._currentElement;this._currentElement=e,this.updateComponent(t,n,e,r)},updateComponent:function(e,t,r,n){var a=t.props,o=this._currentElement.props;switch(this._tag){case"button":a=ReactDOMButton.getNativeProps(this,a),o=ReactDOMButton.getNativeProps(this,o);break;case"input":ReactDOMInput.updateWrapper(this),a=ReactDOMInput.getNativeProps(this,a),o=ReactDOMInput.getNativeProps(this,o);break;case"option":a=ReactDOMOption.getNativeProps(this,a),o=ReactDOMOption.getNativeProps(this,o);break;case"select":a=ReactDOMSelect.getNativeProps(this,a),o=ReactDOMSelect.getNativeProps(this,o);break;case"textarea":ReactDOMTextarea.updateWrapper(this),a=ReactDOMTextarea.getNativeProps(this,a),o=ReactDOMTextarea.getNativeProps(this,o)}assertValidProps(this,o),this._updateDOMProperties(a,o,e,null),this._updateDOMChildren(a,o,e,n),!canDefineProperty&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=o),"select"===this._tag&&e.getReactMountReady().enqueue(postUpdateSelectWrapper,this)},_updateDOMProperties:function(e,t,r,n){var a,o,i;for(a in e)if(!t.hasOwnProperty(a)&&e.hasOwnProperty(a))if(a===STYLE){var s=this._previousStyleCopy;for(o in s)s.hasOwnProperty(o)&&(i=i||{},i[o]="");this._previousStyleCopy=null}else registrationNameModules.hasOwnProperty(a)?e[a]&&deleteListener(this._rootNodeID,a):(DOMProperty.properties[a]||DOMProperty.isCustomAttribute(a))&&(n||(n=ReactMount.getNode(this._rootNodeID)),DOMPropertyOperations.deleteValueForProperty(n,a));for(a in t){var p=t[a],u=a===STYLE?this._previousStyleCopy:e[a];if(t.hasOwnProperty(a)&&p!==u)if(a===STYLE)if(p?p=this._previousStyleCopy=assign({},p):this._previousStyleCopy=null,u){for(o in u)!u.hasOwnProperty(o)||p&&p.hasOwnProperty(o)||(i=i||{},i[o]="");for(o in p)p.hasOwnProperty(o)&&u[o]!==p[o]&&(i=i||{},i[o]=p[o])}else i=p;else registrationNameModules.hasOwnProperty(a)?p?enqueuePutListener(this._rootNodeID,a,p,r):u&&deleteListener(this._rootNodeID,a):isCustomComponent(this._tag,t)?(n||(n=ReactMount.getNode(this._rootNodeID)),a===CHILDREN&&(p=null),DOMPropertyOperations.setValueForAttribute(n,a,p)):(DOMProperty.properties[a]||DOMProperty.isCustomAttribute(a))&&(n||(n=ReactMount.getNode(this._rootNodeID)),null!=p?DOMPropertyOperations.setValueForProperty(n,a,p):DOMPropertyOperations.deleteValueForProperty(n,a))}i&&(n||(n=ReactMount.getNode(this._rootNodeID)),CSSPropertyOperations.setValueForStyles(n,i))},_updateDOMChildren:function(e,t,r,n){var a=CONTENT_TYPES[typeof e.children]?e.children:null,o=CONTENT_TYPES[typeof t.children]?t.children:null,i=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,p=null!=a?null:e.children,u=null!=o?null:t.children,l=null!=a||null!=i,c=null!=o||null!=s;null!=p&&null==u?this.updateChildren(null,r,n):l&&!c&&this.updateTextContent(""),null!=o?a!==o&&this.updateTextContent(""+o):null!=s?i!==s&&this.updateMarkup(""+s):null!=u&&this.updateChildren(u,r,n)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var e=this._wrapperState.listeners;if(e)for(var t=0;t<e.length;t++)e[t].remove();break;case"input":ReactDOMInput.unmountWrapper(this);break;case"html":case"head":case"body":invariant(!1)}if(this.unmountChildren(),ReactBrowserEventEmitter.deleteAllListeners(this._rootNodeID),ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){var r=this._nodeWithLegacyProperties;r._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var e=ReactMount.getNode(this._rootNodeID);e._reactInternalComponent=this,e.getDOMNode=legacyGetDOMNode,e.isMounted=legacyIsMounted,e.setState=legacySetStateEtc,e.replaceState=legacySetStateEtc,e.forceUpdate=legacySetStateEtc,e.setProps=legacySetProps,e.replaceProps=legacyReplaceProps,e.props=this._currentElement.props,this._nodeWithLegacyProperties=e}return this._nodeWithLegacyProperties}},ReactPerf.measureMethods(ReactDOMComponent,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),assign(ReactDOMComponent.prototype,ReactDOMComponent.Mixin,ReactMultiChild.Mixin),module.exports=ReactDOMComponent;

},{"./AutoFocusUtils":49,"./CSSPropertyOperations":52,"./DOMProperty":57,"./DOMPropertyOperations":58,"./EventConstants":62,"./Object.assign":70,"./ReactBrowserEventEmitter":74,"./ReactComponentBrowserEnvironment":79,"./ReactDOMButton":84,"./ReactDOMInput":89,"./ReactDOMOption":90,"./ReactDOMSelect":91,"./ReactDOMTextarea":95,"./ReactMount":111,"./ReactMultiChild":112,"./ReactPerf":117,"./ReactUpdateQueue":128,"./canDefineProperty":150,"./escapeTextContentForBrowser":153,"./isEventSupported":165,"./setInnerHTML":170,"./setTextContent":171,"./validateDOMNesting":174,"fbjs/lib/invariant":20,"fbjs/lib/keyOf":24,"fbjs/lib/shallowEqual":27,"fbjs/lib/warning":29}],86:[function(require,module,exports){
"use strict";function createDOMFactory(e){return ReactElement.createFactory(e)}var ReactElement=require("./ReactElement"),ReactElementValidator=require("./ReactElementValidator"),mapObject=require("fbjs/lib/mapObject"),ReactDOMFactories=mapObject({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul",var:"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},createDOMFactory);module.exports=ReactDOMFactories;

},{"./ReactElement":98,"./ReactElementValidator":99,"fbjs/lib/mapObject":25}],87:[function(require,module,exports){
"use strict";var ReactDOMFeatureFlags={useCreateElement:!1};module.exports=ReactDOMFeatureFlags;

},{}],88:[function(require,module,exports){
"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations"),DOMPropertyOperations=require("./DOMPropertyOperations"),ReactMount=require("./ReactMount"),ReactPerf=require("./ReactPerf"),invariant=require("fbjs/lib/invariant"),INVALID_PROPERTY_ERRORS={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},ReactDOMIDOperations={updatePropertyByID:function(e,r,t){var a=ReactMount.getNode(e);INVALID_PROPERTY_ERRORS.hasOwnProperty(r)?invariant(!1):void 0,null!=t?DOMPropertyOperations.setValueForProperty(a,r,t):DOMPropertyOperations.deleteValueForProperty(a,r)},dangerouslyReplaceNodeWithMarkupByID:function(e,r){var t=ReactMount.getNode(e);DOMChildrenOperations.dangerouslyReplaceNodeWithMarkup(t,r)},dangerouslyProcessChildrenUpdates:function(e,r){for(var t=0;t<e.length;t++)e[t].parentNode=ReactMount.getNode(e[t].parentID);DOMChildrenOperations.processUpdates(e,r)}};ReactPerf.measureMethods(ReactDOMIDOperations,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),module.exports=ReactDOMIDOperations;

},{"./DOMChildrenOperations":56,"./DOMPropertyOperations":58,"./ReactMount":111,"./ReactPerf":117,"fbjs/lib/invariant":20}],89:[function(require,module,exports){
"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMInput.updateWrapper(this)}function _handleChange(e){var t=this._currentElement.props,a=LinkedValueUtils.executeOnChange(t,e);ReactUpdates.asap(forceUpdateIfMounted,this);var n=t.name;if("radio"===t.type&&null!=n){for(var r=ReactMount.getNode(this._rootNodeID),i=r;i.parentNode;)i=i.parentNode;for(var o=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),u=0;u<o.length;u++){var d=o[u];if(d!==r&&d.form===r.form){var l=ReactMount.getID(d);l?void 0:invariant(!1);var p=instancesByReactID[l];p?void 0:invariant(!1),ReactUpdates.asap(forceUpdateIfMounted,p)}}}return a}var ReactDOMIDOperations=require("./ReactDOMIDOperations"),LinkedValueUtils=require("./LinkedValueUtils"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),instancesByReactID={},ReactDOMInput={getNativeProps:function(e,t,a){var n=LinkedValueUtils.getValue(t),r=LinkedValueUtils.getChecked(t),i=assign({},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return i},mountWrapper:function(e,t){var a=t.defaultValue;e._wrapperState={initialChecked:t.defaultChecked||!1,initialValue:null!=a?a:null,onChange:_handleChange.bind(e)}},mountReadyWrapper:function(e){instancesByReactID[e._rootNodeID]=e},unmountWrapper:function(e){delete instancesByReactID[e._rootNodeID]},updateWrapper:function(e){var t=e._currentElement.props,a=t.checked;null!=a&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"checked",a||!1);var n=LinkedValueUtils.getValue(t);null!=n&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"value",""+n)}};module.exports=ReactDOMInput;

},{"./LinkedValueUtils":69,"./Object.assign":70,"./ReactDOMIDOperations":88,"./ReactMount":111,"./ReactUpdates":129,"fbjs/lib/invariant":20}],90:[function(require,module,exports){
"use strict";var ReactChildren=require("./ReactChildren"),ReactDOMSelect=require("./ReactDOMSelect"),assign=require("./Object.assign"),warning=require("fbjs/lib/warning"),valueContextKey=ReactDOMSelect.valueContextKey,ReactDOMOption={mountWrapper:function(e,t,r){var a=r[valueContextKey],n=null;if(null!=a)if(n=!1,Array.isArray(a)){for(var l=0;l<a.length;l++)if(""+a[l]==""+t.value){n=!0;break}}else n=""+a==""+t.value;e._wrapperState={selected:n}},getNativeProps:function(e,t,r){var a=assign({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(a.selected=e._wrapperState.selected);var n="";return ReactChildren.forEach(t.children,function(e){null!=e&&("string"!=typeof e&&"number"!=typeof e||(n+=e))}),n&&(a.children=n),a}};module.exports=ReactDOMOption;

},{"./Object.assign":70,"./ReactChildren":76,"./ReactDOMSelect":91,"fbjs/lib/warning":29}],91:[function(require,module,exports){
"use strict";function updateOptionsIfPendingUpdateAndMounted(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=LinkedValueUtils.getValue(e);null!=t&&updateOptions(this,Boolean(e.multiple),t)}}function getDeclarationErrorAddendum(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function checkSelectPropTypes(e,t){var a=e._currentElement._owner;LinkedValueUtils.checkPropTypes("select",t,a);for(var n=0;n<valuePropNames.length;n++){var l=valuePropNames[n];null!=t[l]&&t.multiple}}function updateOptions(e,t,a){var n,l,r=ReactMount.getNode(e._rootNodeID).options;if(t){for(n={},l=0;l<a.length;l++)n[""+a[l]]=!0;for(l=0;l<r.length;l++){var i=n.hasOwnProperty(r[l].value);r[l].selected!==i&&(r[l].selected=i)}}else{for(n=""+a,l=0;l<r.length;l++)if(r[l].value===n)return void(r[l].selected=!0);r.length&&(r[0].selected=!0)}}function _handleChange(e){var t=this._currentElement.props,a=LinkedValueUtils.executeOnChange(t,e);return this._wrapperState.pendingUpdate=!0,ReactUpdates.asap(updateOptionsIfPendingUpdateAndMounted,this),a}var LinkedValueUtils=require("./LinkedValueUtils"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),warning=require("fbjs/lib/warning"),valueContextKey="__ReactDOMSelect_value$"+Math.random().toString(36).slice(2),valuePropNames=["value","defaultValue"],ReactDOMSelect={valueContextKey:valueContextKey,getNativeProps:function(e,t,a){return assign({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var a=LinkedValueUtils.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=a?a:t.defaultValue,onChange:_handleChange.bind(e),wasMultiple:Boolean(t.multiple)}},processChildContext:function(e,t,a){var n=assign({},a);return n[valueContextKey]=e._wrapperState.initialValue,n},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var a=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var n=LinkedValueUtils.getValue(t);null!=n?(e._wrapperState.pendingUpdate=!1,updateOptions(e,Boolean(t.multiple),n)):a!==Boolean(t.multiple)&&(null!=t.defaultValue?updateOptions(e,Boolean(t.multiple),t.defaultValue):updateOptions(e,Boolean(t.multiple),t.multiple?[]:""))}};module.exports=ReactDOMSelect;

},{"./LinkedValueUtils":69,"./Object.assign":70,"./ReactMount":111,"./ReactUpdates":129,"fbjs/lib/warning":29}],92:[function(require,module,exports){
"use strict";function isCollapsed(e,t,n,o){return e===n&&t===o}function getIEOffsets(e){var t=document.selection,n=t.createRange(),o=n.text.length,s=n.duplicate();s.moveToElementText(e),s.setEndPoint("EndToStart",n);var r=s.text.length,a=r+o;return{start:r,end:a}}function getModernOffsets(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,o=t.anchorOffset,s=t.focusNode,r=t.focusOffset,a=t.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(e){return null}var f=isCollapsed(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),d=f?0:a.toString().length,c=a.cloneRange();c.selectNodeContents(e),c.setEnd(a.startContainer,a.startOffset);var i=isCollapsed(c.startContainer,c.startOffset,c.endContainer,c.endOffset),l=i?0:c.toString().length,u=l+d,g=document.createRange();g.setStart(n,o),g.setEnd(s,r);var O=g.collapsed;return{start:O?u:l,end:O?l:u}}function setIEOffsets(e,t){var n,o,s=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,o=n):t.start>t.end?(n=t.end,o=t.start):(n=t.start,o=t.end),s.moveToElementText(e),s.moveStart("character",n),s.setEndPoint("EndToStart",s),s.moveEnd("character",o-n),s.select()}function setModernOffsets(e,t){if(window.getSelection){var n=window.getSelection(),o=e[getTextContentAccessor()].length,s=Math.min(t.start,o),r="undefined"==typeof t.end?s:Math.min(t.end,o);if(!n.extend&&s>r){var a=r;r=s,s=a}var f=getNodeForCharacterOffset(e,s),d=getNodeForCharacterOffset(e,r);if(f&&d){var c=document.createRange();c.setStart(f.node,f.offset),n.removeAllRanges(),s>r?(n.addRange(c),n.extend(d.node,d.offset)):(c.setEnd(d.node,d.offset),n.addRange(c))}}}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),getNodeForCharacterOffset=require("./getNodeForCharacterOffset"),getTextContentAccessor=require("./getTextContentAccessor"),useIEOffsets=ExecutionEnvironment.canUseDOM&&"selection"in document&&!("getSelection"in window),ReactDOMSelection={getOffsets:useIEOffsets?getIEOffsets:getModernOffsets,setOffsets:useIEOffsets?setIEOffsets:setModernOffsets};module.exports=ReactDOMSelection;

},{"./getNodeForCharacterOffset":162,"./getTextContentAccessor":163,"fbjs/lib/ExecutionEnvironment":6}],93:[function(require,module,exports){
"use strict";var ReactDefaultInjection=require("./ReactDefaultInjection"),ReactServerRendering=require("./ReactServerRendering"),ReactVersion=require("./ReactVersion");ReactDefaultInjection.inject();var ReactDOMServer={renderToString:ReactServerRendering.renderToString,renderToStaticMarkup:ReactServerRendering.renderToStaticMarkup,version:ReactVersion};module.exports=ReactDOMServer;

},{"./ReactDefaultInjection":97,"./ReactServerRendering":126,"./ReactVersion":130}],94:[function(require,module,exports){
"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations"),DOMPropertyOperations=require("./DOMPropertyOperations"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactMount=require("./ReactMount"),assign=require("./Object.assign"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),setTextContent=require("./setTextContent"),validateDOMNesting=require("./validateDOMNesting"),ReactDOMTextComponent=function(e){};assign(ReactDOMTextComponent.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){if(this._rootNodeID=e,t.useCreateElement){var r=n[ReactMount.ownerDocumentContextKey],o=r.createElement("span");return DOMPropertyOperations.setAttributeForID(o,e),ReactMount.getID(o),setTextContent(o,this._stringText),o}var i=escapeTextContentForBrowser(this._stringText);return t.renderToStaticMarkup?i:"<span "+DOMPropertyOperations.createMarkupForID(e)+">"+i+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=ReactMount.getNode(this._rootNodeID);DOMChildrenOperations.updateTextContent(r,n)}}},unmountComponent:function(){ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID)}}),module.exports=ReactDOMTextComponent;

},{"./DOMChildrenOperations":56,"./DOMPropertyOperations":58,"./Object.assign":70,"./ReactComponentBrowserEnvironment":79,"./ReactMount":111,"./escapeTextContentForBrowser":153,"./setTextContent":171,"./validateDOMNesting":174}],95:[function(require,module,exports){
"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMTextarea.updateWrapper(this)}function _handleChange(e){var a=this._currentElement.props,t=LinkedValueUtils.executeOnChange(a,e);return ReactUpdates.asap(forceUpdateIfMounted,this),t}var LinkedValueUtils=require("./LinkedValueUtils"),ReactDOMIDOperations=require("./ReactDOMIDOperations"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactDOMTextarea={getNativeProps:function(e,a,t){null!=a.dangerouslySetInnerHTML?invariant(!1):void 0;var n=assign({},a,{defaultValue:void 0,value:void 0,children:e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return n},mountWrapper:function(e,a){var t=a.defaultValue,n=a.children;null!=n&&(null!=t?invariant(!1):void 0,Array.isArray(n)&&(n.length<=1?void 0:invariant(!1),n=n[0]),t=""+n),null==t&&(t="");var r=LinkedValueUtils.getValue(a);e._wrapperState={initialValue:""+(null!=r?r:t),onChange:_handleChange.bind(e)}},updateWrapper:function(e){var a=e._currentElement.props,t=LinkedValueUtils.getValue(a);null!=t&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"value",""+t)}};module.exports=ReactDOMTextarea;

},{"./LinkedValueUtils":69,"./Object.assign":70,"./ReactDOMIDOperations":88,"./ReactUpdates":129,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],96:[function(require,module,exports){
"use strict";function ReactDefaultBatchingStrategyTransaction(){this.reinitializeTransaction()}var ReactUpdates=require("./ReactUpdates"),Transaction=require("./Transaction"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),RESET_BATCHED_UPDATES={initialize:emptyFunction,close:function(){ReactDefaultBatchingStrategy.isBatchingUpdates=!1}},FLUSH_BATCHED_UPDATES={initialize:emptyFunction,close:ReactUpdates.flushBatchedUpdates.bind(ReactUpdates)},TRANSACTION_WRAPPERS=[FLUSH_BATCHED_UPDATES,RESET_BATCHED_UPDATES];assign(ReactDefaultBatchingStrategyTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS}});var transaction=new ReactDefaultBatchingStrategyTransaction,ReactDefaultBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(t,a,e,i,n,c){var r=ReactDefaultBatchingStrategy.isBatchingUpdates;ReactDefaultBatchingStrategy.isBatchingUpdates=!0,r?t(a,e,i,n,c):transaction.perform(t,null,a,e,i,n,c)}};module.exports=ReactDefaultBatchingStrategy;

},{"./Object.assign":70,"./ReactUpdates":129,"./Transaction":146,"fbjs/lib/emptyFunction":12}],97:[function(require,module,exports){
"use strict";function inject(){if(!alreadyInjected){alreadyInjected=!0,ReactInjection.EventEmitter.injectReactEventListener(ReactEventListener),ReactInjection.EventPluginHub.injectEventPluginOrder(DefaultEventPluginOrder),ReactInjection.EventPluginHub.injectInstanceHandle(ReactInstanceHandles),ReactInjection.EventPluginHub.injectMount(ReactMount),ReactInjection.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:SimpleEventPlugin,EnterLeaveEventPlugin:EnterLeaveEventPlugin,ChangeEventPlugin:ChangeEventPlugin,SelectEventPlugin:SelectEventPlugin,BeforeInputEventPlugin:BeforeInputEventPlugin}),ReactInjection.NativeComponent.injectGenericComponentClass(ReactDOMComponent),ReactInjection.NativeComponent.injectTextComponentClass(ReactDOMTextComponent),ReactInjection.Class.injectMixin(ReactBrowserComponentMixin),ReactInjection.DOMProperty.injectDOMPropertyConfig(HTMLDOMPropertyConfig),ReactInjection.DOMProperty.injectDOMPropertyConfig(SVGDOMPropertyConfig),ReactInjection.EmptyComponent.injectEmptyComponent("noscript"),ReactInjection.Updates.injectReconcileTransaction(ReactReconcileTransaction),ReactInjection.Updates.injectBatchingStrategy(ReactDefaultBatchingStrategy),ReactInjection.RootIndex.injectCreateReactRootIndex(ExecutionEnvironment.canUseDOM?ClientReactRootIndex.createReactRootIndex:ServerReactRootIndex.createReactRootIndex),ReactInjection.Component.injectEnvironment(ReactComponentBrowserEnvironment)}}var BeforeInputEventPlugin=require("./BeforeInputEventPlugin"),ChangeEventPlugin=require("./ChangeEventPlugin"),ClientReactRootIndex=require("./ClientReactRootIndex"),DefaultEventPluginOrder=require("./DefaultEventPluginOrder"),EnterLeaveEventPlugin=require("./EnterLeaveEventPlugin"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),HTMLDOMPropertyConfig=require("./HTMLDOMPropertyConfig"),ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy"),ReactDOMComponent=require("./ReactDOMComponent"),ReactDOMTextComponent=require("./ReactDOMTextComponent"),ReactEventListener=require("./ReactEventListener"),ReactInjection=require("./ReactInjection"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactReconcileTransaction=require("./ReactReconcileTransaction"),SelectEventPlugin=require("./SelectEventPlugin"),ServerReactRootIndex=require("./ServerReactRootIndex"),SimpleEventPlugin=require("./SimpleEventPlugin"),SVGDOMPropertyConfig=require("./SVGDOMPropertyConfig"),alreadyInjected=!1;module.exports={inject:inject};

},{"./BeforeInputEventPlugin":50,"./ChangeEventPlugin":54,"./ClientReactRootIndex":55,"./DefaultEventPluginOrder":60,"./EnterLeaveEventPlugin":61,"./HTMLDOMPropertyConfig":68,"./ReactBrowserComponentMixin":73,"./ReactComponentBrowserEnvironment":79,"./ReactDOMComponent":85,"./ReactDOMTextComponent":94,"./ReactDefaultBatchingStrategy":96,"./ReactEventListener":104,"./ReactInjection":105,"./ReactInstanceHandles":107,"./ReactMount":111,"./ReactReconcileTransaction":121,"./SVGDOMPropertyConfig":131,"./SelectEventPlugin":132,"./ServerReactRootIndex":133,"./SimpleEventPlugin":134,"fbjs/lib/ExecutionEnvironment":6}],98:[function(require,module,exports){
"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner"),assign=require("./Object.assign"),canDefineProperty=require("./canDefineProperty"),REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,RESERVED_PROPS={key:!0,ref:!0,__self:!0,__source:!0},ReactElement=function(e,r,n,t,l,o,c){var a={$$typeof:REACT_ELEMENT_TYPE,type:e,key:r,ref:n,props:c,_owner:o};return a};ReactElement.createElement=function(e,r,n){var t,l={},o=null,c=null,a=null,f=null;if(null!=r){c=void 0===r.ref?null:r.ref,o=void 0===r.key?null:""+r.key,a=void 0===r.__self?null:r.__self,f=void 0===r.__source?null:r.__source;for(t in r)r.hasOwnProperty(t)&&!RESERVED_PROPS.hasOwnProperty(t)&&(l[t]=r[t])}var u=arguments.length-2;if(1===u)l.children=n;else if(u>1){for(var i=Array(u),E=0;E<u;E++)i[E]=arguments[E+2];l.children=i}if(e&&e.defaultProps){var s=e.defaultProps;for(t in s)"undefined"==typeof l[t]&&(l[t]=s[t])}return ReactElement(e,o,c,a,f,ReactCurrentOwner.current,l)},ReactElement.createFactory=function(e){var r=ReactElement.createElement.bind(null,e);return r.type=e,r},ReactElement.cloneAndReplaceKey=function(e,r){var n=ReactElement(e.type,r,e.ref,e._self,e._source,e._owner,e.props);return n},ReactElement.cloneAndReplaceProps=function(e,r){var n=ReactElement(e.type,e.key,e.ref,e._self,e._source,e._owner,r);return n},ReactElement.cloneElement=function(e,r,n){var t,l=assign({},e.props),o=e.key,c=e.ref,a=e._self,f=e._source,u=e._owner;if(null!=r){void 0!==r.ref&&(c=r.ref,u=ReactCurrentOwner.current),void 0!==r.key&&(o=""+r.key);for(t in r)r.hasOwnProperty(t)&&!RESERVED_PROPS.hasOwnProperty(t)&&(l[t]=r[t])}var i=arguments.length-2;if(1===i)l.children=n;else if(i>1){for(var E=Array(i),s=0;s<i;s++)E[s]=arguments[s+2];l.children=E}return ReactElement(e.type,o,c,a,f,u,l)},ReactElement.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===REACT_ELEMENT_TYPE},module.exports=ReactElement;

},{"./Object.assign":70,"./ReactCurrentOwner":82,"./canDefineProperty":150}],99:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(){if(ReactCurrentOwner.current){var e=ReactCurrentOwner.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function validateExplicitKey(e,r){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;getAddendaForKeyUse("uniqueKey",e,r)}}function getAddendaForKeyUse(e,r,t){var a=getDeclarationErrorAddendum();if(!a){var n="string"==typeof t?t:t.displayName||t.name;n&&(a=" Check the top-level render call using <"+n+">.")}var i=ownerHasKeyUseWarning[e]||(ownerHasKeyUseWarning[e]={});if(i[a])return null;i[a]=!0;var o={parentOrOwner:a,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return r&&r._owner&&r._owner!==ReactCurrentOwner.current&&(o.childOwner=" It was passed a child from "+r._owner.getName()+"."),o}function validateChildKeys(e,r){if("object"==typeof e)if(Array.isArray(e))for(var t=0;t<e.length;t++){var a=e[t];ReactElement.isValidElement(a)&&validateExplicitKey(a,r)}else if(ReactElement.isValidElement(e))e._store&&(e._store.validated=!0);else if(e){var n=getIteratorFn(e);if(n&&n!==e.entries)for(var i,o=n.call(e);!(i=o.next()).done;)ReactElement.isValidElement(i.value)&&validateExplicitKey(i.value,r)}}function checkPropTypes(e,r,t,a){for(var n in r)if(r.hasOwnProperty(n)){var i;try{"function"!=typeof r[n]?invariant(!1):void 0,i=r[n](t,n,e,a)}catch(e){i=e}if(i instanceof Error&&!(i.message in loggedTypeFailures)){loggedTypeFailures[i.message]=!0;getDeclarationErrorAddendum()}}}function validatePropTypes(e){var r=e.type;if("function"==typeof r){var t=r.displayName||r.name;r.propTypes&&checkPropTypes(t,r.propTypes,e.props,ReactPropTypeLocations.prop),"function"==typeof r.getDefaultProps}}var ReactElement=require("./ReactElement"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactCurrentOwner=require("./ReactCurrentOwner"),canDefineProperty=require("./canDefineProperty"),getIteratorFn=require("./getIteratorFn"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ownerHasKeyUseWarning={},loggedTypeFailures={},ReactElementValidator={createElement:function(e,r,t){var a="string"==typeof e||"function"==typeof e,n=ReactElement.createElement.apply(this,arguments);if(null==n)return n;if(a)for(var i=2;i<arguments.length;i++)validateChildKeys(arguments[i],e);return validatePropTypes(n),n},createFactory:function(e){var r=ReactElementValidator.createElement.bind(null,e);return r.type=e,r},cloneElement:function(e,r,t){for(var a=ReactElement.cloneElement.apply(this,arguments),n=2;n<arguments.length;n++)validateChildKeys(arguments[n],a.type);return validatePropTypes(a),a}};module.exports=ReactElementValidator;

},{"./ReactCurrentOwner":82,"./ReactElement":98,"./ReactPropTypeLocationNames":118,"./ReactPropTypeLocations":119,"./canDefineProperty":150,"./getIteratorFn":161,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],100:[function(require,module,exports){
"use strict";function registerNullComponentID(){ReactEmptyComponentRegistry.registerNullComponentID(this._rootNodeID)}var ReactElement=require("./ReactElement"),ReactEmptyComponentRegistry=require("./ReactEmptyComponentRegistry"),ReactReconciler=require("./ReactReconciler"),assign=require("./Object.assign"),placeholderElement,ReactEmptyComponentInjection={injectEmptyComponent:function(e){placeholderElement=ReactElement.createElement(e)}},ReactEmptyComponent=function(e){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=e(placeholderElement)};assign(ReactEmptyComponent.prototype,{construct:function(e){},mountComponent:function(e,t,n){return t.getReactMountReady().enqueue(registerNullComponentID,this),this._rootNodeID=e,ReactReconciler.mountComponent(this._renderedComponent,e,t,n)},receiveComponent:function(){},unmountComponent:function(e,t,n){ReactReconciler.unmountComponent(this._renderedComponent),ReactEmptyComponentRegistry.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),ReactEmptyComponent.injection=ReactEmptyComponentInjection,module.exports=ReactEmptyComponent;

},{"./Object.assign":70,"./ReactElement":98,"./ReactEmptyComponentRegistry":101,"./ReactReconciler":122}],101:[function(require,module,exports){
"use strict";function isNullComponentID(e){return!!nullComponentIDsRegistry[e]}function registerNullComponentID(e){nullComponentIDsRegistry[e]=!0}function deregisterNullComponentID(e){delete nullComponentIDsRegistry[e]}var nullComponentIDsRegistry={},ReactEmptyComponentRegistry={isNullComponentID:isNullComponentID,registerNullComponentID:registerNullComponentID,deregisterNullComponentID:deregisterNullComponentID};module.exports=ReactEmptyComponentRegistry;

},{}],102:[function(require,module,exports){
"use strict";function invokeGuardedCallback(r,a,t,o){try{return a(t,o)}catch(r){return void(null===caughtError&&(caughtError=r))}}var caughtError=null,ReactErrorUtils={invokeGuardedCallback:invokeGuardedCallback,invokeGuardedCallbackWithCatch:invokeGuardedCallback,rethrowCaughtError:function(){if(caughtError){var r=caughtError;throw caughtError=null,r}}},fakeNode;module.exports=ReactErrorUtils;

},{}],103:[function(require,module,exports){
"use strict";function runEventQueueInBatch(e){EventPluginHub.enqueueEvents(e),EventPluginHub.processEventQueue(!1)}var EventPluginHub=require("./EventPluginHub"),ReactEventEmitterMixin={handleTopLevel:function(e,n,t,u,i){var v=EventPluginHub.extractEvents(e,n,t,u,i);runEventQueueInBatch(v)}};module.exports=ReactEventEmitterMixin;

},{"./EventPluginHub":63}],104:[function(require,module,exports){
"use strict";function findParent(e){var t=ReactMount.getID(e),n=ReactInstanceHandles.getReactRootIDFromNodeID(t),a=ReactMount.findReactContainerForID(n),o=ReactMount.getFirstReactDOM(a);return o}function TopLevelCallbackBookKeeping(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function handleTopLevelImpl(e){handleTopLevelWithoutPath(e)}function handleTopLevelWithoutPath(e){for(var t=ReactMount.getFirstReactDOM(getEventTarget(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=findParent(n);for(var a=0;a<e.ancestors.length;a++){t=e.ancestors[a];var o=ReactMount.getID(t)||"";ReactEventListener._handleTopLevel(e.topLevelType,t,o,e.nativeEvent,getEventTarget(e.nativeEvent))}}function handleTopLevelWithPath(e){for(var t=e.nativeEvent.path,n=t[0],a=0,o=0;o<t.length;o++){var l=t[o];l.nodeType===DOCUMENT_FRAGMENT_NODE_TYPE&&(n=t[o+1]);var i=ReactMount.getFirstReactDOM(l);if(i===l){var r=ReactMount.getID(l),s=ReactInstanceHandles.getReactRootIDFromNodeID(r);e.ancestors.push(l);var v=ReactMount.getID(l)||"";for(a++,ReactEventListener._handleTopLevel(e.topLevelType,l,v,e.nativeEvent,n);r!==s;)o++,l=t[o],r=ReactMount.getID(l)}}0===a&&ReactEventListener._handleTopLevel(e.topLevelType,window,"",e.nativeEvent,getEventTarget(e.nativeEvent))}function scrollValueMonitor(e){var t=getUnboundedScrollPosition(window);e(t)}var EventListener=require("fbjs/lib/EventListener"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),PooledClass=require("./PooledClass"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),getEventTarget=require("./getEventTarget"),getUnboundedScrollPosition=require("fbjs/lib/getUnboundedScrollPosition"),DOCUMENT_FRAGMENT_NODE_TYPE=11;assign(TopLevelCallbackBookKeeping.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),PooledClass.addPoolingTo(TopLevelCallbackBookKeeping,PooledClass.twoArgumentPooler);var ReactEventListener={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:ExecutionEnvironment.canUseDOM?window:null,setHandleTopLevel:function(e){ReactEventListener._handleTopLevel=e},setEnabled:function(e){ReactEventListener._enabled=!!e},isEnabled:function(){return ReactEventListener._enabled},trapBubbledEvent:function(e,t,n){var a=n;return a?EventListener.listen(a,t,ReactEventListener.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var a=n;return a?EventListener.capture(a,t,ReactEventListener.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=scrollValueMonitor.bind(null,e);EventListener.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(ReactEventListener._enabled){var n=TopLevelCallbackBookKeeping.getPooled(e,t);try{ReactUpdates.batchedUpdates(handleTopLevelImpl,n)}finally{TopLevelCallbackBookKeeping.release(n)}}}};module.exports=ReactEventListener;

},{"./Object.assign":70,"./PooledClass":71,"./ReactInstanceHandles":107,"./ReactMount":111,"./ReactUpdates":129,"./getEventTarget":160,"fbjs/lib/EventListener":5,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/getUnboundedScrollPosition":17}],105:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),EventPluginHub=require("./EventPluginHub"),ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactClass=require("./ReactClass"),ReactEmptyComponent=require("./ReactEmptyComponent"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactNativeComponent=require("./ReactNativeComponent"),ReactPerf=require("./ReactPerf"),ReactRootIndex=require("./ReactRootIndex"),ReactUpdates=require("./ReactUpdates"),ReactInjection={Component:ReactComponentEnvironment.injection,Class:ReactClass.injection,DOMProperty:DOMProperty.injection,EmptyComponent:ReactEmptyComponent.injection,EventPluginHub:EventPluginHub.injection,EventEmitter:ReactBrowserEventEmitter.injection,NativeComponent:ReactNativeComponent.injection,Perf:ReactPerf.injection,RootIndex:ReactRootIndex.injection,Updates:ReactUpdates.injection};module.exports=ReactInjection;

},{"./DOMProperty":57,"./EventPluginHub":63,"./ReactBrowserEventEmitter":74,"./ReactClass":77,"./ReactComponentEnvironment":80,"./ReactEmptyComponent":100,"./ReactNativeComponent":114,"./ReactPerf":117,"./ReactRootIndex":124,"./ReactUpdates":129}],106:[function(require,module,exports){
"use strict";function isInDocument(e){return containsNode(document.documentElement,e)}var ReactDOMSelection=require("./ReactDOMSelection"),containsNode=require("fbjs/lib/containsNode"),focusNode=require("fbjs/lib/focusNode"),getActiveElement=require("fbjs/lib/getActiveElement"),ReactInputSelection={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=getActiveElement();return{focusedElem:e,selectionRange:ReactInputSelection.hasSelectionCapabilities(e)?ReactInputSelection.getSelection(e):null}},restoreSelection:function(e){var t=getActiveElement(),n=e.focusedElem,o=e.selectionRange;t!==n&&isInDocument(n)&&(ReactInputSelection.hasSelectionCapabilities(n)&&ReactInputSelection.setSelection(n,o),focusNode(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=ReactDOMSelection.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,o=t.end;if("undefined"==typeof o&&(o=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(o,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var c=e.createTextRange();c.collapse(!0),c.moveStart("character",n),c.moveEnd("character",o-n),c.select()}else ReactDOMSelection.setOffsets(e,t)}};module.exports=ReactInputSelection;

},{"./ReactDOMSelection":92,"fbjs/lib/containsNode":9,"fbjs/lib/focusNode":14,"fbjs/lib/getActiveElement":15}],107:[function(require,module,exports){
"use strict";function getReactRootIDString(t){return SEPARATOR+t.toString(36)}function isBoundary(t,e){return t.charAt(e)===SEPARATOR||e===t.length}function isValidID(t){return""===t||t.charAt(0)===SEPARATOR&&t.charAt(t.length-1)!==SEPARATOR}function isAncestorIDOf(t,e){return 0===e.indexOf(t)&&isBoundary(e,t.length)}function getParentID(t){return t?t.substr(0,t.lastIndexOf(SEPARATOR)):""}function getNextDescendantID(t,e){if(isValidID(t)&&isValidID(e)?void 0:invariant(!1),isAncestorIDOf(t,e)?void 0:invariant(!1),t===e)return t;var r,n=t.length+SEPARATOR_LENGTH;for(r=n;r<e.length&&!isBoundary(e,r);r++);return e.substr(0,r)}function getFirstCommonAncestorID(t,e){var r=Math.min(t.length,e.length);if(0===r)return"";for(var n=0,a=0;a<=r;a++)if(isBoundary(t,a)&&isBoundary(e,a))n=a;else if(t.charAt(a)!==e.charAt(a))break;var i=t.substr(0,n);return isValidID(i)?void 0:invariant(!1),i}function traverseParentPath(t,e,r,n,a,i){t=t||"",e=e||"",t===e?invariant(!1):void 0;var o=isAncestorIDOf(e,t);o||isAncestorIDOf(t,e)?void 0:invariant(!1);for(var s=0,c=o?getParentID:getNextDescendantID,R=t;;R=c(R,e)){var A;if(a&&R===t||i&&R===e||(A=r(R,o,n)),A===!1||R===e)break;s++<MAX_TREE_DEPTH?void 0:invariant(!1)}}var ReactRootIndex=require("./ReactRootIndex"),invariant=require("fbjs/lib/invariant"),SEPARATOR=".",SEPARATOR_LENGTH=SEPARATOR.length,MAX_TREE_DEPTH=1e4,ReactInstanceHandles={createReactRootID:function(){return getReactRootIDString(ReactRootIndex.createReactRootIndex())},createReactID:function(t,e){return t+e},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===SEPARATOR&&t.length>1){var e=t.indexOf(SEPARATOR,1);return e>-1?t.substr(0,e):t}return null},traverseEnterLeave:function(t,e,r,n,a){var i=getFirstCommonAncestorID(t,e);i!==t&&traverseParentPath(t,i,r,n,!1,!0),i!==e&&traverseParentPath(i,e,r,a,!0,!1)},traverseTwoPhase:function(t,e,r){t&&(traverseParentPath("",t,e,r,!0,!1),traverseParentPath(t,"",e,r,!1,!0))},traverseTwoPhaseSkipTarget:function(t,e,r){t&&(traverseParentPath("",t,e,r,!0,!0),traverseParentPath(t,"",e,r,!0,!0))},traverseAncestors:function(t,e,r){traverseParentPath("",t,e,r,!0,!1)},getFirstCommonAncestorID:getFirstCommonAncestorID,_getNextDescendantID:getNextDescendantID,isAncestorIDOf:isAncestorIDOf,SEPARATOR:SEPARATOR};module.exports=ReactInstanceHandles;

},{"./ReactRootIndex":124,"fbjs/lib/invariant":20}],108:[function(require,module,exports){
"use strict";var ReactInstanceMap={remove:function(n){n._reactInternalInstance=void 0},get:function(n){return n._reactInternalInstance},has:function(n){return void 0!==n._reactInternalInstance},set:function(n,t){n._reactInternalInstance=t}};module.exports=ReactInstanceMap;

},{}],109:[function(require,module,exports){
"use strict";var ReactChildren=require("./ReactChildren"),ReactComponent=require("./ReactComponent"),ReactClass=require("./ReactClass"),ReactDOMFactories=require("./ReactDOMFactories"),ReactElement=require("./ReactElement"),ReactElementValidator=require("./ReactElementValidator"),ReactPropTypes=require("./ReactPropTypes"),ReactVersion=require("./ReactVersion"),assign=require("./Object.assign"),onlyChild=require("./onlyChild"),createElement=ReactElement.createElement,createFactory=ReactElement.createFactory,cloneElement=ReactElement.cloneElement,React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,toArray:ReactChildren.toArray,only:onlyChild},Component:ReactComponent,createElement:createElement,cloneElement:cloneElement,isValidElement:ReactElement.isValidElement,PropTypes:ReactPropTypes,createClass:ReactClass.createClass,createFactory:createFactory,createMixin:function(e){return e},DOM:ReactDOMFactories,version:ReactVersion,__spread:assign};module.exports=React;

},{"./Object.assign":70,"./ReactChildren":76,"./ReactClass":77,"./ReactComponent":78,"./ReactDOMFactories":86,"./ReactElement":98,"./ReactElementValidator":99,"./ReactPropTypes":120,"./ReactVersion":130,"./onlyChild":167}],110:[function(require,module,exports){
"use strict";var adler32=require("./adler32"),TAG_END=/\/?>/,ReactMarkupChecksum={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var r=adler32(e);return e.replace(TAG_END," "+ReactMarkupChecksum.CHECKSUM_ATTR_NAME+'="'+r+'"$&')},canReuseMarkup:function(e,r){var a=r.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);a=a&&parseInt(a,10);var u=adler32(e);return u===a}};module.exports=ReactMarkupChecksum;

},{"./adler32":149}],111:[function(require,module,exports){
"use strict";function firstDifferenceIndex(e,t){for(var n=Math.min(e.length,t.length),o=0;o<n;o++)if(e.charAt(o)!==t.charAt(o))return o;return e.length===t.length?-1:n}function getReactRootElementInContainer(e){return e?e.nodeType===DOC_NODE_TYPE?e.documentElement:e.firstChild:null}function getReactRootID(e){var t=getReactRootElementInContainer(e);return t&&ReactMount.getID(t)}function getID(e){var t=internalGetID(e);if(t)if(nodeCache.hasOwnProperty(t)){var n=nodeCache[t];n!==e&&(isValid(n,t)?invariant(!1):void 0,nodeCache[t]=e)}else nodeCache[t]=e;return t}function internalGetID(e){return e&&e.getAttribute&&e.getAttribute(ATTR_NAME)||""}function setID(e,t){var n=internalGetID(e);n!==t&&delete nodeCache[n],e.setAttribute(ATTR_NAME,t),nodeCache[t]=e}function getNode(e){return nodeCache.hasOwnProperty(e)&&isValid(nodeCache[e],e)||(nodeCache[e]=ReactMount.findReactNodeByID(e)),nodeCache[e]}function getNodeFromInstance(e){var t=ReactInstanceMap.get(e)._rootNodeID;return ReactEmptyComponentRegistry.isNullComponentID(t)?null:(nodeCache.hasOwnProperty(t)&&isValid(nodeCache[t],t)||(nodeCache[t]=ReactMount.findReactNodeByID(t)),nodeCache[t])}function isValid(e,t){if(e){internalGetID(e)!==t?invariant(!1):void 0;var n=ReactMount.findReactContainerForID(t);if(n&&containsNode(n,e))return!0}return!1}function purgeID(e){delete nodeCache[e]}function findDeepestCachedAncestorImpl(e){var t=nodeCache[e];return!(!t||!isValid(t,e))&&void(deepestNodeSoFar=t)}function findDeepestCachedAncestor(e){deepestNodeSoFar=null,ReactInstanceHandles.traverseAncestors(e,findDeepestCachedAncestorImpl);var t=deepestNodeSoFar;return deepestNodeSoFar=null,t}function mountComponentIntoNode(e,t,n,o,r,a){ReactDOMFeatureFlags.useCreateElement&&(a=assign({},a),n.nodeType===DOC_NODE_TYPE?a[ownerDocumentContextKey]=n:a[ownerDocumentContextKey]=n.ownerDocument);var c=ReactReconciler.mountComponent(e,t,o,a);e._renderedComponent._topLevelWrapper=e,ReactMount._mountImageIntoNode(c,n,r,o)}function batchedMountComponentIntoNode(e,t,n,o,r){var a=ReactUpdates.ReactReconcileTransaction.getPooled(o);a.perform(mountComponentIntoNode,null,e,t,n,a,o,r),ReactUpdates.ReactReconcileTransaction.release(a)}function unmountComponentFromNode(e,t){for(ReactReconciler.unmountComponent(e),t.nodeType===DOC_NODE_TYPE&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function hasNonRootReactChild(e){var t=getReactRootID(e);return!!t&&t!==ReactInstanceHandles.getReactRootIDFromNodeID(t)}function findFirstReactDOMImpl(e){for(;e&&e.parentNode!==e;e=e.parentNode)if(1===e.nodeType){var t=internalGetID(e);if(t){var n,o=ReactInstanceHandles.getReactRootIDFromNodeID(t),r=e;do if(n=internalGetID(r),r=r.parentNode,null==r)return null;while(n!==o);if(r===containersByReactRootID[o])return e}}return null}var DOMProperty=require("./DOMProperty"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactDOMFeatureFlags=require("./ReactDOMFeatureFlags"),ReactElement=require("./ReactElement"),ReactEmptyComponentRegistry=require("./ReactEmptyComponentRegistry"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactInstanceMap=require("./ReactInstanceMap"),ReactMarkupChecksum=require("./ReactMarkupChecksum"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),ReactUpdateQueue=require("./ReactUpdateQueue"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),containsNode=require("fbjs/lib/containsNode"),instantiateReactComponent=require("./instantiateReactComponent"),invariant=require("fbjs/lib/invariant"),setInnerHTML=require("./setInnerHTML"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),validateDOMNesting=require("./validateDOMNesting"),warning=require("fbjs/lib/warning"),ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME,nodeCache={},ELEMENT_NODE_TYPE=1,DOC_NODE_TYPE=9,DOCUMENT_FRAGMENT_NODE_TYPE=11,ownerDocumentContextKey="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),instancesByReactRootID={},containersByReactRootID={},rootElementsByReactRootID,findComponentRootReusableArray=[],deepestNodeSoFar=null,TopLevelWrapper=function(){};TopLevelWrapper.prototype.isReactComponent={},TopLevelWrapper.prototype.render=function(){return this.props};var ReactMount={TopLevelWrapper:TopLevelWrapper,_instancesByReactRootID:instancesByReactRootID,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,o){return ReactMount.scrollMonitor(n,function(){ReactUpdateQueue.enqueueElementInternal(e,t),o&&ReactUpdateQueue.enqueueCallbackInternal(e,o)}),e},_registerComponent:function(e,t){!t||t.nodeType!==ELEMENT_NODE_TYPE&&t.nodeType!==DOC_NODE_TYPE&&t.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE?invariant(!1):void 0,ReactBrowserEventEmitter.ensureScrollValueMonitoring();var n=ReactMount.registerContainer(t);return instancesByReactRootID[n]=e,n},_renderNewRootComponent:function(e,t,n,o){var r=instantiateReactComponent(e,null),a=ReactMount._registerComponent(r,t);return ReactUpdates.batchedUpdates(batchedMountComponentIntoNode,r,a,t,n,o),r},renderSubtreeIntoContainer:function(e,t,n,o){return null==e||null==e._reactInternalInstance?invariant(!1):void 0,ReactMount._renderSubtreeIntoContainer(e,t,n,o)},_renderSubtreeIntoContainer:function(e,t,n,o){ReactElement.isValidElement(t)?void 0:invariant(!1);var r=new ReactElement(TopLevelWrapper,null,null,null,null,null,t),a=instancesByReactRootID[getReactRootID(n)];if(a){var c=a._currentElement,i=c.props;if(shouldUpdateReactComponent(i,t)){var u=a._renderedComponent.getPublicInstance(),d=o&&function(){o.call(u)};return ReactMount._updateRootComponent(a,r,n,d),u}ReactMount.unmountComponentAtNode(n)}var R=getReactRootElementInContainer(n),s=R&&!!internalGetID(R),l=hasNonRootReactChild(n),p=s&&!a&&!l,C=ReactMount._renderNewRootComponent(r,n,p,null!=e?e._reactInternalInstance._processChildContext(e._reactInternalInstance._context):emptyObject)._renderedComponent.getPublicInstance();return o&&o.call(C),C},render:function(e,t,n){return ReactMount._renderSubtreeIntoContainer(null,e,t,n)},registerContainer:function(e){var t=getReactRootID(e);return t&&(t=ReactInstanceHandles.getReactRootIDFromNodeID(t)),t||(t=ReactInstanceHandles.createReactRootID()),containersByReactRootID[t]=e,t},unmountComponentAtNode:function(e){!e||e.nodeType!==ELEMENT_NODE_TYPE&&e.nodeType!==DOC_NODE_TYPE&&e.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE?invariant(!1):void 0;var t=getReactRootID(e),n=instancesByReactRootID[t];if(!n){var o=(hasNonRootReactChild(e),internalGetID(e));o&&o===ReactInstanceHandles.getReactRootIDFromNodeID(o);return!1}return ReactUpdates.batchedUpdates(unmountComponentFromNode,n,e),delete instancesByReactRootID[t],delete containersByReactRootID[t],!0},findReactContainerForID:function(e){var t=ReactInstanceHandles.getReactRootIDFromNodeID(e),n=containersByReactRootID[t];return n},findReactNodeByID:function(e){var t=ReactMount.findReactContainerForID(e);return ReactMount.findComponentRoot(t,e)},getFirstReactDOM:function(e){return findFirstReactDOMImpl(e)},findComponentRoot:function(e,t){var n=findComponentRootReusableArray,o=0,r=findDeepestCachedAncestor(t)||e;for(n[0]=r.firstChild,n.length=1;o<n.length;){for(var a,c=n[o++];c;){var i=ReactMount.getID(c);i?t===i?a=c:ReactInstanceHandles.isAncestorIDOf(i,t)&&(n.length=o=0,n.push(c.firstChild)):n.push(c.firstChild),c=c.nextSibling}if(a)return n.length=0,a}n.length=0,invariant(!1)},_mountImageIntoNode:function(e,t,n,o){if(!t||t.nodeType!==ELEMENT_NODE_TYPE&&t.nodeType!==DOC_NODE_TYPE&&t.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE?invariant(!1):void 0,n){var r=getReactRootElementInContainer(t);if(ReactMarkupChecksum.canReuseMarkup(e,r))return;var a=r.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);r.removeAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);var c=r.outerHTML;r.setAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME,a);var i=e,u=firstDifferenceIndex(i,c);" (client) "+i.substring(u-20,u+20)+"\n (server) "+c.substring(u-20,u+20);t.nodeType===DOC_NODE_TYPE?invariant(!1):void 0}if(t.nodeType===DOC_NODE_TYPE?invariant(!1):void 0,o.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);t.appendChild(e)}else setInnerHTML(t,e)},ownerDocumentContextKey:ownerDocumentContextKey,getReactRootID:getReactRootID,getID:getID,setID:setID,getNode:getNode,getNodeFromInstance:getNodeFromInstance,isValid:isValid,purgeID:purgeID};ReactPerf.measureMethods(ReactMount,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),module.exports=ReactMount;

},{"./DOMProperty":57,"./Object.assign":70,"./ReactBrowserEventEmitter":74,"./ReactCurrentOwner":82,"./ReactDOMFeatureFlags":87,"./ReactElement":98,"./ReactEmptyComponentRegistry":101,"./ReactInstanceHandles":107,"./ReactInstanceMap":108,"./ReactMarkupChecksum":110,"./ReactPerf":117,"./ReactReconciler":122,"./ReactUpdateQueue":128,"./ReactUpdates":129,"./instantiateReactComponent":164,"./setInnerHTML":170,"./shouldUpdateReactComponent":172,"./validateDOMNesting":174,"fbjs/lib/containsNode":9,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],112:[function(require,module,exports){
"use strict";function enqueueInsertMarkup(e,n,t){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.INSERT_MARKUP,markupIndex:markupQueue.push(n)-1,content:null,fromIndex:null,toIndex:t})}function enqueueMove(e,n,t){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:n,toIndex:t})}function enqueueRemove(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.REMOVE_NODE,markupIndex:null,content:null,fromIndex:n,toIndex:null})}function enqueueSetMarkup(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.SET_MARKUP,markupIndex:null,content:n,fromIndex:null,toIndex:null})}function enqueueTextContent(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.TEXT_CONTENT,markupIndex:null,content:n,fromIndex:null,toIndex:null})}function processQueue(){updateQueue.length&&(ReactComponentEnvironment.processChildrenUpdates(updateQueue,markupQueue),clearQueue())}function clearQueue(){updateQueue.length=0,markupQueue.length=0}var ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactMultiChildUpdateTypes=require("./ReactMultiChildUpdateTypes"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactReconciler=require("./ReactReconciler"),ReactChildReconciler=require("./ReactChildReconciler"),flattenChildren=require("./flattenChildren"),updateDepth=0,updateQueue=[],markupQueue=[],ReactMultiChild={Mixin:{_reconcilerInstantiateChildren:function(e,n,t){return ReactChildReconciler.instantiateChildren(e,n,t)},_reconcilerUpdateChildren:function(e,n,t,u){var r;return r=flattenChildren(n),ReactChildReconciler.updateChildren(e,r,t,u)},mountChildren:function(e,n,t){var u=this._reconcilerInstantiateChildren(e,n,t);this._renderedChildren=u;var r=[],i=0;for(var o in u)if(u.hasOwnProperty(o)){var d=u[o],a=this._rootNodeID+o,l=ReactReconciler.mountComponent(d,a,n,t);d._mountIndex=i++,r.push(l)}return r},updateTextContent:function(e){updateDepth++;var n=!0;try{var t=this._renderedChildren;ReactChildReconciler.unmountChildren(t);for(var u in t)t.hasOwnProperty(u)&&this._unmountChild(t[u]);this.setTextContent(e),n=!1}finally{updateDepth--,updateDepth||(n?clearQueue():processQueue())}},updateMarkup:function(e){updateDepth++;var n=!0;try{var t=this._renderedChildren;ReactChildReconciler.unmountChildren(t);for(var u in t)t.hasOwnProperty(u)&&this._unmountChildByName(t[u],u);this.setMarkup(e),n=!1}finally{updateDepth--,updateDepth||(n?clearQueue():processQueue())}},updateChildren:function(e,n,t){updateDepth++;var u=!0;try{this._updateChildren(e,n,t),u=!1}finally{updateDepth--,updateDepth||(u?clearQueue():processQueue())}},_updateChildren:function(e,n,t){var u=this._renderedChildren,r=this._reconcilerUpdateChildren(u,e,n,t);if(this._renderedChildren=r,r||u){var i,o=0,d=0;for(i in r)if(r.hasOwnProperty(i)){var a=u&&u[i],l=r[i];a===l?(this.moveChild(a,d,o),o=Math.max(a._mountIndex,o),a._mountIndex=d):(a&&(o=Math.max(a._mountIndex,o),this._unmountChild(a)),this._mountChildByNameAtIndex(l,i,d,n,t)),d++}for(i in u)!u.hasOwnProperty(i)||r&&r.hasOwnProperty(i)||this._unmountChild(u[i])}},unmountChildren:function(){var e=this._renderedChildren;ReactChildReconciler.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,n,t){e._mountIndex<t&&enqueueMove(this._rootNodeID,e._mountIndex,n)},createChild:function(e,n){enqueueInsertMarkup(this._rootNodeID,n,e._mountIndex)},removeChild:function(e){enqueueRemove(this._rootNodeID,e._mountIndex)},setTextContent:function(e){enqueueTextContent(this._rootNodeID,e)},setMarkup:function(e){enqueueSetMarkup(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,n,t,u,r){var i=this._rootNodeID+n,o=ReactReconciler.mountComponent(e,i,u,r);e._mountIndex=t,this.createChild(e,o)},_unmountChild:function(e){this.removeChild(e),e._mountIndex=null}}};module.exports=ReactMultiChild;

},{"./ReactChildReconciler":75,"./ReactComponentEnvironment":80,"./ReactCurrentOwner":82,"./ReactMultiChildUpdateTypes":113,"./ReactReconciler":122,"./flattenChildren":155}],113:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),ReactMultiChildUpdateTypes=keyMirror({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});module.exports=ReactMultiChildUpdateTypes;

},{"fbjs/lib/keyMirror":23}],114:[function(require,module,exports){
"use strict";function getComponentClassForElement(n){if("function"==typeof n.type)return n.type;var e=n.type,t=tagToComponentClass[e];return null==t&&(tagToComponentClass[e]=t=autoGenerateWrapperClass(e)),t}function createInternalComponent(n){return genericComponentClass?void 0:invariant(!1),new genericComponentClass(n.type,n.props)}function createInstanceForText(n){return new textComponentClass(n)}function isTextComponent(n){return n instanceof textComponentClass}var assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),autoGenerateWrapperClass=null,genericComponentClass=null,tagToComponentClass={},textComponentClass=null,ReactNativeComponentInjection={injectGenericComponentClass:function(n){genericComponentClass=n},injectTextComponentClass:function(n){textComponentClass=n},injectComponentClasses:function(n){assign(tagToComponentClass,n)}},ReactNativeComponent={getComponentClassForElement:getComponentClassForElement,createInternalComponent:createInternalComponent,createInstanceForText:createInstanceForText,isTextComponent:isTextComponent,injection:ReactNativeComponentInjection};module.exports=ReactNativeComponent;

},{"./Object.assign":70,"fbjs/lib/invariant":20}],115:[function(require,module,exports){
"use strict";function warnTDZ(e,n){}var warning=require("fbjs/lib/warning"),ReactNoopUpdateQueue={isMounted:function(e){return!1},enqueueCallback:function(e,n){},enqueueForceUpdate:function(e){warnTDZ(e,"forceUpdate")},enqueueReplaceState:function(e,n){warnTDZ(e,"replaceState")},enqueueSetState:function(e,n){warnTDZ(e,"setState")},enqueueSetProps:function(e,n){warnTDZ(e,"setProps")},enqueueReplaceProps:function(e,n){warnTDZ(e,"replaceProps")}};module.exports=ReactNoopUpdateQueue;

},{"fbjs/lib/warning":29}],116:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),ReactOwner={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,n,t){ReactOwner.isValidOwner(t)?void 0:invariant(!1),t.attachRef(n,e)},removeComponentAsRefFrom:function(e,n,t){ReactOwner.isValidOwner(t)?void 0:invariant(!1),t.getPublicInstance().refs[n]===e.getPublicInstance()&&t.detachRef(n)}};module.exports=ReactOwner;

},{"fbjs/lib/invariant":20}],117:[function(require,module,exports){
"use strict";function _noMeasure(e,r,t){return t}var ReactPerf={enableMeasure:!1,storedMeasure:_noMeasure,measureMethods:function(e,r,t){},measure:function(e,r,t){return t},injection:{injectMeasure:function(e){ReactPerf.storedMeasure=e}}};module.exports=ReactPerf;

},{}],118:[function(require,module,exports){
"use strict";var ReactPropTypeLocationNames={};module.exports=ReactPropTypeLocationNames;

},{}],119:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),ReactPropTypeLocations=keyMirror({prop:null,context:null,childContext:null});module.exports=ReactPropTypeLocations;

},{"fbjs/lib/keyMirror":23}],120:[function(require,module,exports){
"use strict";function createChainableTypeChecker(e){function r(r,n,t,a,c,o){if(a=a||ANONYMOUS,o=o||t,null==n[t]){var i=ReactPropTypeLocationNames[c];return r?new Error("Required "+i+" `"+o+"` was not specified in "+("`"+a+"`.")):null}return e(n,t,a,c,o)}var n=r.bind(null,!1);return n.isRequired=r.bind(null,!0),n}function createPrimitiveTypeChecker(e){function r(r,n,t,a,c){var o=r[n],i=getPropType(o);if(i!==e){var u=ReactPropTypeLocationNames[a],p=getPreciseType(o);return new Error("Invalid "+u+" `"+c+"` of type "+("`"+p+"` supplied to `"+t+"`, expected ")+("`"+e+"`."))}return null}return createChainableTypeChecker(r)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturns(null))}function createArrayOfTypeChecker(e){function r(r,n,t,a,c){var o=r[n];if(!Array.isArray(o)){var i=ReactPropTypeLocationNames[a],u=getPropType(o);return new Error("Invalid "+i+" `"+c+"` of type "+("`"+u+"` supplied to `"+t+"`, expected an array."))}for(var p=0;p<o.length;p++){var l=e(o,p,t,a,c+"["+p+"]");if(l instanceof Error)return l}return null}return createChainableTypeChecker(r)}function createElementTypeChecker(){function e(e,r,n,t,a){if(!ReactElement.isValidElement(e[r])){var c=ReactPropTypeLocationNames[t];return new Error("Invalid "+c+" `"+a+"` supplied to "+("`"+n+"`, expected a single ReactElement."))}return null}return createChainableTypeChecker(e)}function createInstanceTypeChecker(e){function r(r,n,t,a,c){if(!(r[n]instanceof e)){var o=ReactPropTypeLocationNames[a],i=e.name||ANONYMOUS,u=getClassName(r[n]);return new Error("Invalid "+o+" `"+c+"` of type "+("`"+u+"` supplied to `"+t+"`, expected ")+("instance of `"+i+"`."))}return null}return createChainableTypeChecker(r)}function createEnumTypeChecker(e){function r(r,n,t,a,c){for(var o=r[n],i=0;i<e.length;i++)if(o===e[i])return null;var u=ReactPropTypeLocationNames[a],p=JSON.stringify(e);return new Error("Invalid "+u+" `"+c+"` of value `"+o+"` "+("supplied to `"+t+"`, expected one of "+p+"."))}return createChainableTypeChecker(Array.isArray(e)?r:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function createObjectOfTypeChecker(e){function r(r,n,t,a,c){var o=r[n],i=getPropType(o);if("object"!==i){var u=ReactPropTypeLocationNames[a];return new Error("Invalid "+u+" `"+c+"` of type "+("`"+i+"` supplied to `"+t+"`, expected an object."))}for(var p in o)if(o.hasOwnProperty(p)){var l=e(o,p,t,a,c+"."+p);if(l instanceof Error)return l}return null}return createChainableTypeChecker(r)}function createUnionTypeChecker(e){function r(r,n,t,a,c){for(var o=0;o<e.length;o++){var i=e[o];if(null==i(r,n,t,a,c))return null}var u=ReactPropTypeLocationNames[a];return new Error("Invalid "+u+" `"+c+"` supplied to "+("`"+t+"`."))}return createChainableTypeChecker(Array.isArray(e)?r:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function createNodeChecker(){function e(e,r,n,t,a){if(!isNode(e[r])){var c=ReactPropTypeLocationNames[t];return new Error("Invalid "+c+" `"+a+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(e)}function createShapeTypeChecker(e){function r(r,n,t,a,c){var o=r[n],i=getPropType(o);if("object"!==i){var u=ReactPropTypeLocationNames[a];return new Error("Invalid "+u+" `"+c+"` of type `"+i+"` "+("supplied to `"+t+"`, expected `object`."))}for(var p in e){var l=e[p];if(l){var y=l(o,p,t,a,c+"."+p);if(y)return y}}return null}return createChainableTypeChecker(r)}function isNode(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(isNode);if(null===e||ReactElement.isValidElement(e))return!0;var r=getIteratorFn(e);if(!r)return!1;var n,t=r.call(e);if(r!==e.entries){for(;!(n=t.next()).done;)if(!isNode(n.value))return!1}else for(;!(n=t.next()).done;){var a=n.value;if(a&&!isNode(a[1]))return!1}return!0;default:return!1}}function getPropType(e){var r=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":r}function getPreciseType(e){var r=getPropType(e);if("object"===r){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return r}function getClassName(e){return e.constructor&&e.constructor.name?e.constructor.name:"<<anonymous>>"}var ReactElement=require("./ReactElement"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),emptyFunction=require("fbjs/lib/emptyFunction"),getIteratorFn=require("./getIteratorFn"),ANONYMOUS="<<anonymous>>",ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};module.exports=ReactPropTypes;

},{"./ReactElement":98,"./ReactPropTypeLocationNames":118,"./getIteratorFn":161,"fbjs/lib/emptyFunction":12}],121:[function(require,module,exports){
"use strict";function ReactReconcileTransaction(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!e&&ReactDOMFeatureFlags.useCreateElement}var CallbackQueue=require("./CallbackQueue"),PooledClass=require("./PooledClass"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactDOMFeatureFlags=require("./ReactDOMFeatureFlags"),ReactInputSelection=require("./ReactInputSelection"),Transaction=require("./Transaction"),assign=require("./Object.assign"),SELECTION_RESTORATION={initialize:ReactInputSelection.getSelectionInformation,close:ReactInputSelection.restoreSelection},EVENT_SUPPRESSION={initialize:function(){var e=ReactBrowserEventEmitter.isEnabled();return ReactBrowserEventEmitter.setEnabled(!1),e},close:function(e){ReactBrowserEventEmitter.setEnabled(e)}},ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},TRANSACTION_WRAPPERS=[SELECTION_RESTORATION,EVENT_SUPPRESSION,ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactReconcileTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactReconcileTransaction),module.exports=ReactReconcileTransaction;

},{"./CallbackQueue":53,"./Object.assign":70,"./PooledClass":71,"./ReactBrowserEventEmitter":74,"./ReactDOMFeatureFlags":87,"./ReactInputSelection":106,"./Transaction":146}],122:[function(require,module,exports){
"use strict";function attachRefs(){ReactRef.attachRefs(this,this._currentElement)}var ReactRef=require("./ReactRef"),ReactReconciler={mountComponent:function(e,t,n,c){var r=e.mountComponent(t,n,c);return e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(attachRefs,e),r},unmountComponent:function(e){ReactRef.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,c){var r=e._currentElement;if(t!==r||c!==e._context){var a=ReactRef.shouldUpdateRefs(r,t);a&&ReactRef.detachRefs(e,r),e.receiveComponent(t,n,c),a&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(attachRefs,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}};module.exports=ReactReconciler;

},{"./ReactRef":123}],123:[function(require,module,exports){
"use strict";function attachRef(e,n,t){"function"==typeof e?e(n.getPublicInstance()):ReactOwner.addComponentAsRefTo(n,e,t)}function detachRef(e,n,t){"function"==typeof e?e(null):ReactOwner.removeComponentAsRefFrom(n,e,t)}var ReactOwner=require("./ReactOwner"),ReactRef={};ReactRef.attachRefs=function(e,n){if(null!==n&&n!==!1){var t=n.ref;null!=t&&attachRef(t,e,n._owner)}},ReactRef.shouldUpdateRefs=function(e,n){var t=null===e||e===!1,f=null===n||n===!1;return t||f||n._owner!==e._owner||n.ref!==e.ref},ReactRef.detachRefs=function(e,n){if(null!==n&&n!==!1){var t=n.ref;null!=t&&detachRef(t,e,n._owner)}},module.exports=ReactRef;

},{"./ReactOwner":116}],124:[function(require,module,exports){
"use strict";var ReactRootIndexInjection={injectCreateReactRootIndex:function(e){ReactRootIndex.createReactRootIndex=e}},ReactRootIndex={createReactRootIndex:null,injection:ReactRootIndexInjection};module.exports=ReactRootIndex;

},{}],125:[function(require,module,exports){
"use strict";var ReactServerBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(t){}};module.exports=ReactServerBatchingStrategy;

},{}],126:[function(require,module,exports){
"use strict";function renderToString(e){ReactElement.isValidElement(e)?void 0:invariant(!1);var t;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var a=ReactInstanceHandles.createReactRootID();return t=ReactServerRenderingTransaction.getPooled(!1),t.perform(function(){var n=instantiateReactComponent(e,null),r=n.mountComponent(a,t,emptyObject);return ReactMarkupChecksum.addChecksumToMarkup(r)},null)}finally{ReactServerRenderingTransaction.release(t),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}function renderToStaticMarkup(e){ReactElement.isValidElement(e)?void 0:invariant(!1);var t;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var a=ReactInstanceHandles.createReactRootID();return t=ReactServerRenderingTransaction.getPooled(!0),t.perform(function(){var n=instantiateReactComponent(e,null);return n.mountComponent(a,t,emptyObject)},null)}finally{ReactServerRenderingTransaction.release(t),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}var ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy"),ReactElement=require("./ReactElement"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMarkupChecksum=require("./ReactMarkupChecksum"),ReactServerBatchingStrategy=require("./ReactServerBatchingStrategy"),ReactServerRenderingTransaction=require("./ReactServerRenderingTransaction"),ReactUpdates=require("./ReactUpdates"),emptyObject=require("fbjs/lib/emptyObject"),instantiateReactComponent=require("./instantiateReactComponent"),invariant=require("fbjs/lib/invariant");module.exports={renderToString:renderToString,renderToStaticMarkup:renderToStaticMarkup};

},{"./ReactDefaultBatchingStrategy":96,"./ReactElement":98,"./ReactInstanceHandles":107,"./ReactMarkupChecksum":110,"./ReactServerBatchingStrategy":125,"./ReactServerRenderingTransaction":127,"./ReactUpdates":129,"./instantiateReactComponent":164,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20}],127:[function(require,module,exports){
"use strict";function ReactServerRenderingTransaction(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!1}var PooledClass=require("./PooledClass"),CallbackQueue=require("./CallbackQueue"),Transaction=require("./Transaction"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:emptyFunction},TRANSACTION_WRAPPERS=[ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactServerRenderingTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactServerRenderingTransaction),module.exports=ReactServerRenderingTransaction;

},{"./CallbackQueue":53,"./Object.assign":70,"./PooledClass":71,"./Transaction":146,"fbjs/lib/emptyFunction":12}],128:[function(require,module,exports){
"use strict";function enqueueUpdate(e){ReactUpdates.enqueueUpdate(e)}function getInternalInstanceReadyForUpdate(e,n){var t=ReactInstanceMap.get(e);return t?t:null}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceMap=require("./ReactInstanceMap"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactUpdateQueue={isMounted:function(e){var n=ReactInstanceMap.get(e);return!!n&&!!n._renderedComponent},enqueueCallback:function(e,n){"function"!=typeof n?invariant(!1):void 0;var t=getInternalInstanceReadyForUpdate(e);return t?(t._pendingCallbacks?t._pendingCallbacks.push(n):t._pendingCallbacks=[n],void enqueueUpdate(t)):null},enqueueCallbackInternal:function(e,n){"function"!=typeof n?invariant(!1):void 0,e._pendingCallbacks?e._pendingCallbacks.push(n):e._pendingCallbacks=[n],enqueueUpdate(e)},enqueueForceUpdate:function(e){var n=getInternalInstanceReadyForUpdate(e,"forceUpdate");n&&(n._pendingForceUpdate=!0,enqueueUpdate(n))},enqueueReplaceState:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"replaceState");t&&(t._pendingStateQueue=[n],t._pendingReplaceState=!0,enqueueUpdate(t))},enqueueSetState:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"setState");if(t){var a=t._pendingStateQueue||(t._pendingStateQueue=[]);a.push(n),enqueueUpdate(t)}},enqueueSetProps:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"setProps");t&&ReactUpdateQueue.enqueueSetPropsInternal(t,n)},enqueueSetPropsInternal:function(e,n){var t=e._topLevelWrapper;t?void 0:invariant(!1);var a=t._pendingElement||t._currentElement,r=a.props,u=assign({},r.props,n);t._pendingElement=ReactElement.cloneAndReplaceProps(a,ReactElement.cloneAndReplaceProps(r,u)),enqueueUpdate(t)},enqueueReplaceProps:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"replaceProps");t&&ReactUpdateQueue.enqueueReplacePropsInternal(t,n)},enqueueReplacePropsInternal:function(e,n){var t=e._topLevelWrapper;t?void 0:invariant(!1);var a=t._pendingElement||t._currentElement,r=a.props;t._pendingElement=ReactElement.cloneAndReplaceProps(a,ReactElement.cloneAndReplaceProps(r,n)),enqueueUpdate(t)},enqueueElementInternal:function(e,n){e._pendingElement=n,enqueueUpdate(e)}};module.exports=ReactUpdateQueue;

},{"./Object.assign":70,"./ReactCurrentOwner":82,"./ReactElement":98,"./ReactInstanceMap":108,"./ReactUpdates":129,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],129:[function(require,module,exports){
"use strict";function ensureInjected(){ReactUpdates.ReactReconcileTransaction&&batchingStrategy?void 0:invariant(!1)}function ReactUpdatesFlushTransaction(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=CallbackQueue.getPooled(),this.reconcileTransaction=ReactUpdates.ReactReconcileTransaction.getPooled(!1)}function batchedUpdates(e,t,a,n,i,c){ensureInjected(),batchingStrategy.batchedUpdates(e,t,a,n,i,c)}function mountOrderComparator(e,t){return e._mountOrder-t._mountOrder}function runBatchedUpdates(e){var t=e.dirtyComponentsLength;t!==dirtyComponents.length?invariant(!1):void 0,dirtyComponents.sort(mountOrderComparator);for(var a=0;a<t;a++){var n=dirtyComponents[a],i=n._pendingCallbacks;if(n._pendingCallbacks=null,ReactReconciler.performUpdateIfNecessary(n,e.reconcileTransaction),i)for(var c=0;c<i.length;c++)e.callbackQueue.enqueue(i[c],n.getPublicInstance())}}function enqueueUpdate(e){return ensureInjected(),batchingStrategy.isBatchingUpdates?void dirtyComponents.push(e):void batchingStrategy.batchedUpdates(enqueueUpdate,e)}function asap(e,t){batchingStrategy.isBatchingUpdates?void 0:invariant(!1),asapCallbackQueue.enqueue(e,t),asapEnqueued=!0}var CallbackQueue=require("./CallbackQueue"),PooledClass=require("./PooledClass"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),Transaction=require("./Transaction"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),dirtyComponents=[],asapCallbackQueue=CallbackQueue.getPooled(),asapEnqueued=!1,batchingStrategy=null,NESTED_UPDATES={initialize:function(){this.dirtyComponentsLength=dirtyComponents.length},close:function(){this.dirtyComponentsLength!==dirtyComponents.length?(dirtyComponents.splice(0,this.dirtyComponentsLength),flushBatchedUpdates()):dirtyComponents.length=0}},UPDATE_QUEUEING={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},TRANSACTION_WRAPPERS=[NESTED_UPDATES,UPDATE_QUEUEING];assign(ReactUpdatesFlushTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},destructor:function(){this.dirtyComponentsLength=null,CallbackQueue.release(this.callbackQueue),this.callbackQueue=null,ReactUpdates.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,a){return Transaction.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,a)}}),PooledClass.addPoolingTo(ReactUpdatesFlushTransaction);var flushBatchedUpdates=function(){for(;dirtyComponents.length||asapEnqueued;){if(dirtyComponents.length){var e=ReactUpdatesFlushTransaction.getPooled();e.perform(runBatchedUpdates,null,e),ReactUpdatesFlushTransaction.release(e)}if(asapEnqueued){asapEnqueued=!1;var t=asapCallbackQueue;asapCallbackQueue=CallbackQueue.getPooled(),t.notifyAll(),CallbackQueue.release(t)}}};flushBatchedUpdates=ReactPerf.measure("ReactUpdates","flushBatchedUpdates",flushBatchedUpdates);var ReactUpdatesInjection={injectReconcileTransaction:function(e){e?void 0:invariant(!1),ReactUpdates.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e?void 0:invariant(!1),"function"!=typeof e.batchedUpdates?invariant(!1):void 0,"boolean"!=typeof e.isBatchingUpdates?invariant(!1):void 0,batchingStrategy=e}},ReactUpdates={ReactReconcileTransaction:null,batchedUpdates:batchedUpdates,enqueueUpdate:enqueueUpdate,flushBatchedUpdates:flushBatchedUpdates,injection:ReactUpdatesInjection,asap:asap};module.exports=ReactUpdates;

},{"./CallbackQueue":53,"./Object.assign":70,"./PooledClass":71,"./ReactPerf":117,"./ReactReconciler":122,"./Transaction":146,"fbjs/lib/invariant":20}],130:[function(require,module,exports){
"use strict";module.exports="0.14.8";

},{}],131:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,NS={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},SVGDOMPropertyConfig={Properties:{clipPath:MUST_USE_ATTRIBUTE,cx:MUST_USE_ATTRIBUTE,cy:MUST_USE_ATTRIBUTE,d:MUST_USE_ATTRIBUTE,dx:MUST_USE_ATTRIBUTE,dy:MUST_USE_ATTRIBUTE,fill:MUST_USE_ATTRIBUTE,fillOpacity:MUST_USE_ATTRIBUTE,fontFamily:MUST_USE_ATTRIBUTE,fontSize:MUST_USE_ATTRIBUTE,fx:MUST_USE_ATTRIBUTE,fy:MUST_USE_ATTRIBUTE,gradientTransform:MUST_USE_ATTRIBUTE,gradientUnits:MUST_USE_ATTRIBUTE,markerEnd:MUST_USE_ATTRIBUTE,markerMid:MUST_USE_ATTRIBUTE,markerStart:MUST_USE_ATTRIBUTE,offset:MUST_USE_ATTRIBUTE,opacity:MUST_USE_ATTRIBUTE,patternContentUnits:MUST_USE_ATTRIBUTE,patternUnits:MUST_USE_ATTRIBUTE,points:MUST_USE_ATTRIBUTE,preserveAspectRatio:MUST_USE_ATTRIBUTE,r:MUST_USE_ATTRIBUTE,rx:MUST_USE_ATTRIBUTE,ry:MUST_USE_ATTRIBUTE,spreadMethod:MUST_USE_ATTRIBUTE,stopColor:MUST_USE_ATTRIBUTE,stopOpacity:MUST_USE_ATTRIBUTE,stroke:MUST_USE_ATTRIBUTE,strokeDasharray:MUST_USE_ATTRIBUTE,strokeLinecap:MUST_USE_ATTRIBUTE,strokeOpacity:MUST_USE_ATTRIBUTE,strokeWidth:MUST_USE_ATTRIBUTE,textAnchor:MUST_USE_ATTRIBUTE,transform:MUST_USE_ATTRIBUTE,version:MUST_USE_ATTRIBUTE,viewBox:MUST_USE_ATTRIBUTE,x1:MUST_USE_ATTRIBUTE,x2:MUST_USE_ATTRIBUTE,x:MUST_USE_ATTRIBUTE,xlinkActuate:MUST_USE_ATTRIBUTE,xlinkArcrole:MUST_USE_ATTRIBUTE,xlinkHref:MUST_USE_ATTRIBUTE,xlinkRole:MUST_USE_ATTRIBUTE,xlinkShow:MUST_USE_ATTRIBUTE,xlinkTitle:MUST_USE_ATTRIBUTE,xlinkType:MUST_USE_ATTRIBUTE,xmlBase:MUST_USE_ATTRIBUTE,xmlLang:MUST_USE_ATTRIBUTE,xmlSpace:MUST_USE_ATTRIBUTE,y1:MUST_USE_ATTRIBUTE,y2:MUST_USE_ATTRIBUTE,y:MUST_USE_ATTRIBUTE},DOMAttributeNamespaces:{xlinkActuate:NS.xlink,xlinkArcrole:NS.xlink,xlinkHref:NS.xlink,xlinkRole:NS.xlink,xlinkShow:NS.xlink,xlinkTitle:NS.xlink,xlinkType:NS.xlink,xmlBase:NS.xml,xmlLang:NS.xml,xmlSpace:NS.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};module.exports=SVGDOMPropertyConfig;

},{"./DOMProperty":57}],132:[function(require,module,exports){
"use strict";function getSelection(e){if("selectionStart"in e&&ReactInputSelection.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function constructSelectEvent(e,t){if(mouseDown||null==activeElement||activeElement!==getActiveElement())return null;var n=getSelection(activeElement);if(!lastSelection||!shallowEqual(lastSelection,n)){lastSelection=n;var o=SyntheticEvent.getPooled(eventTypes.select,activeElementID,e,t);return o.type="select",o.target=activeElement,EventPropagators.accumulateTwoPhaseDispatches(o),o}return null}var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactInputSelection=require("./ReactInputSelection"),SyntheticEvent=require("./SyntheticEvent"),getActiveElement=require("fbjs/lib/getActiveElement"),isTextInputElement=require("./isTextInputElement"),keyOf=require("fbjs/lib/keyOf"),shallowEqual=require("fbjs/lib/shallowEqual"),topLevelTypes=EventConstants.topLevelTypes,skipSelectionChangeEvent=ExecutionEnvironment.canUseDOM&&"documentMode"in document&&document.documentMode<=11,eventTypes={select:{phasedRegistrationNames:{bubbled:keyOf({onSelect:null}),captured:keyOf({onSelectCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topContextMenu,topLevelTypes.topFocus,topLevelTypes.topKeyDown,topLevelTypes.topMouseDown,topLevelTypes.topMouseUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,lastSelection=null,mouseDown=!1,hasListener=!1,ON_SELECT_KEY=keyOf({onSelect:null}),SelectEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,o,l){if(!hasListener)return null;switch(e){case topLevelTypes.topFocus:(isTextInputElement(t)||"true"===t.contentEditable)&&(activeElement=t,activeElementID=n,lastSelection=null);break;case topLevelTypes.topBlur:activeElement=null,activeElementID=null,lastSelection=null;break;case topLevelTypes.topMouseDown:mouseDown=!0;break;case topLevelTypes.topContextMenu:case topLevelTypes.topMouseUp:return mouseDown=!1,constructSelectEvent(o,l);case topLevelTypes.topSelectionChange:if(skipSelectionChangeEvent)break;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:return constructSelectEvent(o,l)}return null},didPutListener:function(e,t,n){t===ON_SELECT_KEY&&(hasListener=!0)}};module.exports=SelectEventPlugin;

},{"./EventConstants":62,"./EventPropagators":66,"./ReactInputSelection":106,"./SyntheticEvent":138,"./isTextInputElement":166,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/getActiveElement":15,"fbjs/lib/keyOf":24,"fbjs/lib/shallowEqual":27}],133:[function(require,module,exports){
"use strict";var GLOBAL_MOUNT_POINT_MAX=Math.pow(2,53),ServerReactRootIndex={createReactRootIndex:function(){return Math.ceil(Math.random()*GLOBAL_MOUNT_POINT_MAX)}};module.exports=ServerReactRootIndex;

},{}],134:[function(require,module,exports){
"use strict";var EventConstants=require("./EventConstants"),EventListener=require("fbjs/lib/EventListener"),EventPropagators=require("./EventPropagators"),ReactMount=require("./ReactMount"),SyntheticClipboardEvent=require("./SyntheticClipboardEvent"),SyntheticEvent=require("./SyntheticEvent"),SyntheticFocusEvent=require("./SyntheticFocusEvent"),SyntheticKeyboardEvent=require("./SyntheticKeyboardEvent"),SyntheticMouseEvent=require("./SyntheticMouseEvent"),SyntheticDragEvent=require("./SyntheticDragEvent"),SyntheticTouchEvent=require("./SyntheticTouchEvent"),SyntheticUIEvent=require("./SyntheticUIEvent"),SyntheticWheelEvent=require("./SyntheticWheelEvent"),emptyFunction=require("fbjs/lib/emptyFunction"),getEventCharCode=require("./getEventCharCode"),invariant=require("fbjs/lib/invariant"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,eventTypes={abort:{phasedRegistrationNames:{bubbled:keyOf({onAbort:!0}),captured:keyOf({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:keyOf({onBlur:!0}),captured:keyOf({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:keyOf({onCanPlay:!0}),captured:keyOf({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:keyOf({onCanPlayThrough:!0}),captured:keyOf({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:keyOf({onClick:!0}),captured:keyOf({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:keyOf({onContextMenu:!0}),captured:keyOf({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:keyOf({onCopy:!0}),captured:keyOf({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:keyOf({onCut:!0}),captured:keyOf({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:keyOf({onDoubleClick:!0}),captured:keyOf({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:keyOf({onDrag:!0}),captured:keyOf({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:keyOf({onDragEnd:!0}),captured:keyOf({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:keyOf({onDragEnter:!0}),captured:keyOf({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:keyOf({onDragExit:!0}),captured:keyOf({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:keyOf({onDragLeave:!0}),captured:keyOf({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:keyOf({onDragOver:!0}),captured:keyOf({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:keyOf({onDragStart:!0}),captured:keyOf({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:keyOf({onDrop:!0}),captured:keyOf({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:keyOf({onDurationChange:!0}),captured:keyOf({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:keyOf({onEmptied:!0}),captured:keyOf({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:keyOf({onEncrypted:!0}),captured:keyOf({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:keyOf({onEnded:!0}),captured:keyOf({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:keyOf({onError:!0}),captured:keyOf({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:keyOf({onFocus:!0}),captured:keyOf({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:keyOf({onInput:!0}),captured:keyOf({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:keyOf({onKeyDown:!0}),captured:keyOf({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:keyOf({onKeyPress:!0}),captured:keyOf({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:keyOf({onKeyUp:!0}),captured:keyOf({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:keyOf({onLoad:!0}),captured:keyOf({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:keyOf({onLoadedData:!0}),captured:keyOf({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:keyOf({onLoadedMetadata:!0}),captured:keyOf({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:keyOf({onLoadStart:!0}),captured:keyOf({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:keyOf({onMouseDown:!0}),captured:keyOf({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:keyOf({onMouseMove:!0}),captured:keyOf({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:keyOf({onMouseOut:!0}),captured:keyOf({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:keyOf({onMouseOver:!0}),captured:keyOf({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:keyOf({onMouseUp:!0}),captured:keyOf({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:keyOf({onPaste:!0}),captured:keyOf({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:keyOf({onPause:!0}),captured:keyOf({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:keyOf({onPlay:!0}),captured:keyOf({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:keyOf({onPlaying:!0}),captured:keyOf({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:keyOf({onProgress:!0}),captured:keyOf({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:keyOf({onRateChange:!0}),captured:keyOf({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:keyOf({onReset:!0}),captured:keyOf({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:keyOf({onScroll:!0}),captured:keyOf({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:keyOf({onSeeked:!0}),captured:keyOf({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:keyOf({onSeeking:!0}),captured:keyOf({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:keyOf({onStalled:!0}),captured:keyOf({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:keyOf({onSubmit:!0}),captured:keyOf({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:keyOf({onSuspend:!0}),captured:keyOf({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:keyOf({onTimeUpdate:!0}),captured:keyOf({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:keyOf({onTouchCancel:!0}),captured:keyOf({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:keyOf({onTouchEnd:!0}),captured:keyOf({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:keyOf({onTouchMove:!0}),captured:keyOf({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:keyOf({onTouchStart:!0}),captured:keyOf({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:keyOf({onVolumeChange:!0}),captured:keyOf({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:keyOf({onWaiting:!0}),captured:keyOf({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:keyOf({onWheel:!0}),captured:keyOf({onWheelCapture:!0})}}},topLevelEventsToDispatchConfig={topAbort:eventTypes.abort,topBlur:eventTypes.blur,topCanPlay:eventTypes.canPlay,topCanPlayThrough:eventTypes.canPlayThrough,topClick:eventTypes.click,topContextMenu:eventTypes.contextMenu,topCopy:eventTypes.copy,topCut:eventTypes.cut,topDoubleClick:eventTypes.doubleClick,topDrag:eventTypes.drag,topDragEnd:eventTypes.dragEnd,topDragEnter:eventTypes.dragEnter,topDragExit:eventTypes.dragExit,topDragLeave:eventTypes.dragLeave,topDragOver:eventTypes.dragOver,topDragStart:eventTypes.dragStart,topDrop:eventTypes.drop,topDurationChange:eventTypes.durationChange,topEmptied:eventTypes.emptied,topEncrypted:eventTypes.encrypted,topEnded:eventTypes.ended,topError:eventTypes.error,topFocus:eventTypes.focus,topInput:eventTypes.input,topKeyDown:eventTypes.keyDown,topKeyPress:eventTypes.keyPress,topKeyUp:eventTypes.keyUp,topLoad:eventTypes.load,topLoadedData:eventTypes.loadedData,topLoadedMetadata:eventTypes.loadedMetadata,topLoadStart:eventTypes.loadStart,topMouseDown:eventTypes.mouseDown,topMouseMove:eventTypes.mouseMove,topMouseOut:eventTypes.mouseOut,topMouseOver:eventTypes.mouseOver,topMouseUp:eventTypes.mouseUp,topPaste:eventTypes.paste,topPause:eventTypes.pause,topPlay:eventTypes.play,topPlaying:eventTypes.playing,topProgress:eventTypes.progress,topRateChange:eventTypes.rateChange,topReset:eventTypes.reset,topScroll:eventTypes.scroll,topSeeked:eventTypes.seeked,topSeeking:eventTypes.seeking,topStalled:eventTypes.stalled,topSubmit:eventTypes.submit,topSuspend:eventTypes.suspend,topTimeUpdate:eventTypes.timeUpdate,topTouchCancel:eventTypes.touchCancel,topTouchEnd:eventTypes.touchEnd,topTouchMove:eventTypes.touchMove,topTouchStart:eventTypes.touchStart,topVolumeChange:eventTypes.volumeChange,topWaiting:eventTypes.waiting,topWheel:eventTypes.wheel};for(var type in topLevelEventsToDispatchConfig)topLevelEventsToDispatchConfig[type].dependencies=[type];var ON_CLICK_KEY=keyOf({onClick:null}),onClickListeners={},SimpleEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,a,o,p){var s=topLevelEventsToDispatchConfig[e];if(!s)return null;var n;switch(e){case topLevelTypes.topAbort:case topLevelTypes.topCanPlay:case topLevelTypes.topCanPlayThrough:case topLevelTypes.topDurationChange:case topLevelTypes.topEmptied:case topLevelTypes.topEncrypted:case topLevelTypes.topEnded:case topLevelTypes.topError:case topLevelTypes.topInput:case topLevelTypes.topLoad:case topLevelTypes.topLoadedData:case topLevelTypes.topLoadedMetadata:case topLevelTypes.topLoadStart:case topLevelTypes.topPause:case topLevelTypes.topPlay:case topLevelTypes.topPlaying:case topLevelTypes.topProgress:case topLevelTypes.topRateChange:case topLevelTypes.topReset:case topLevelTypes.topSeeked:case topLevelTypes.topSeeking:case topLevelTypes.topStalled:case topLevelTypes.topSubmit:case topLevelTypes.topSuspend:case topLevelTypes.topTimeUpdate:case topLevelTypes.topVolumeChange:case topLevelTypes.topWaiting:n=SyntheticEvent;break;case topLevelTypes.topKeyPress:if(0===getEventCharCode(o))return null;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:n=SyntheticKeyboardEvent;break;case topLevelTypes.topBlur:case topLevelTypes.topFocus:n=SyntheticFocusEvent;break;case topLevelTypes.topClick:if(2===o.button)return null;case topLevelTypes.topContextMenu:case topLevelTypes.topDoubleClick:case topLevelTypes.topMouseDown:case topLevelTypes.topMouseMove:case topLevelTypes.topMouseOut:case topLevelTypes.topMouseOver:case topLevelTypes.topMouseUp:n=SyntheticMouseEvent;break;case topLevelTypes.topDrag:case topLevelTypes.topDragEnd:case topLevelTypes.topDragEnter:case topLevelTypes.topDragExit:case topLevelTypes.topDragLeave:case topLevelTypes.topDragOver:case topLevelTypes.topDragStart:case topLevelTypes.topDrop:n=SyntheticDragEvent;break;case topLevelTypes.topTouchCancel:case topLevelTypes.topTouchEnd:case topLevelTypes.topTouchMove:case topLevelTypes.topTouchStart:n=SyntheticTouchEvent;break;case topLevelTypes.topScroll:n=SyntheticUIEvent;break;case topLevelTypes.topWheel:n=SyntheticWheelEvent;break;case topLevelTypes.topCopy:case topLevelTypes.topCut:case topLevelTypes.topPaste:n=SyntheticClipboardEvent}n?void 0:invariant(!1);var r=n.getPooled(s,a,o,p);return EventPropagators.accumulateTwoPhaseDispatches(r),r},didPutListener:function(e,t,a){if(t===ON_CLICK_KEY){var o=ReactMount.getNode(e);onClickListeners[e]||(onClickListeners[e]=EventListener.listen(o,"click",emptyFunction))}},willDeleteListener:function(e,t){t===ON_CLICK_KEY&&(onClickListeners[e].remove(),delete onClickListeners[e])}};module.exports=SimpleEventPlugin;

},{"./EventConstants":62,"./EventPropagators":66,"./ReactMount":111,"./SyntheticClipboardEvent":135,"./SyntheticDragEvent":137,"./SyntheticEvent":138,"./SyntheticFocusEvent":139,"./SyntheticKeyboardEvent":141,"./SyntheticMouseEvent":142,"./SyntheticTouchEvent":143,"./SyntheticUIEvent":144,"./SyntheticWheelEvent":145,"./getEventCharCode":157,"fbjs/lib/EventListener":5,"fbjs/lib/emptyFunction":12,"fbjs/lib/invariant":20,"fbjs/lib/keyOf":24}],135:[function(require,module,exports){
"use strict";function SyntheticClipboardEvent(t,e,n,a){SyntheticEvent.call(this,t,e,n,a)}var SyntheticEvent=require("./SyntheticEvent"),ClipboardEventInterface={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};SyntheticEvent.augmentClass(SyntheticClipboardEvent,ClipboardEventInterface),module.exports=SyntheticClipboardEvent;

},{"./SyntheticEvent":138}],136:[function(require,module,exports){
"use strict";function SyntheticCompositionEvent(t,n,e,i){SyntheticEvent.call(this,t,n,e,i)}var SyntheticEvent=require("./SyntheticEvent"),CompositionEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticCompositionEvent,CompositionEventInterface),module.exports=SyntheticCompositionEvent;

},{"./SyntheticEvent":138}],137:[function(require,module,exports){
"use strict";function SyntheticDragEvent(t,e,n,a){SyntheticMouseEvent.call(this,t,e,n,a)}var SyntheticMouseEvent=require("./SyntheticMouseEvent"),DragEventInterface={dataTransfer:null};SyntheticMouseEvent.augmentClass(SyntheticDragEvent,DragEventInterface),module.exports=SyntheticDragEvent;

},{"./SyntheticMouseEvent":142}],138:[function(require,module,exports){
"use strict";function SyntheticEvent(t,e,n,r){this.dispatchConfig=t,this.dispatchMarker=e,this.nativeEvent=n;var s=this.constructor.Interface;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];i?this[a]=i(n):"target"===a?this.target=r:this[a]=n[a]}var o=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;o?this.isDefaultPrevented=emptyFunction.thatReturnsTrue:this.isDefaultPrevented=emptyFunction.thatReturnsFalse,this.isPropagationStopped=emptyFunction.thatReturnsFalse}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),warning=require("fbjs/lib/warning"),EventInterface={type:null,target:null,currentTarget:emptyFunction.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};assign(SyntheticEvent.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=emptyFunction.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=emptyFunction.thatReturnsTrue)},persist:function(){this.isPersistent=emptyFunction.thatReturnsTrue},isPersistent:emptyFunction.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),SyntheticEvent.Interface=EventInterface,SyntheticEvent.augmentClass=function(t,e){var n=this,r=Object.create(n.prototype);assign(r,t.prototype),t.prototype=r,t.prototype.constructor=t,t.Interface=assign({},n.Interface,e),t.augmentClass=n.augmentClass,PooledClass.addPoolingTo(t,PooledClass.fourArgumentPooler)},PooledClass.addPoolingTo(SyntheticEvent,PooledClass.fourArgumentPooler),module.exports=SyntheticEvent;

},{"./Object.assign":70,"./PooledClass":71,"fbjs/lib/emptyFunction":12,"fbjs/lib/warning":29}],139:[function(require,module,exports){
"use strict";function SyntheticFocusEvent(t,e,n,c){SyntheticUIEvent.call(this,t,e,n,c)}var SyntheticUIEvent=require("./SyntheticUIEvent"),FocusEventInterface={relatedTarget:null};SyntheticUIEvent.augmentClass(SyntheticFocusEvent,FocusEventInterface),module.exports=SyntheticFocusEvent;

},{"./SyntheticUIEvent":144}],140:[function(require,module,exports){
"use strict";function SyntheticInputEvent(t,n,e,c){SyntheticEvent.call(this,t,n,e,c)}var SyntheticEvent=require("./SyntheticEvent"),InputEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticInputEvent,InputEventInterface),module.exports=SyntheticInputEvent;

},{"./SyntheticEvent":138}],141:[function(require,module,exports){
"use strict";function SyntheticKeyboardEvent(e,t,n,r){SyntheticUIEvent.call(this,e,t,n,r)}var SyntheticUIEvent=require("./SyntheticUIEvent"),getEventCharCode=require("./getEventCharCode"),getEventKey=require("./getEventKey"),getEventModifierState=require("./getEventModifierState"),KeyboardEventInterface={key:getEventKey,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:getEventModifierState,charCode:function(e){return"keypress"===e.type?getEventCharCode(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?getEventCharCode(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};SyntheticUIEvent.augmentClass(SyntheticKeyboardEvent,KeyboardEventInterface),module.exports=SyntheticKeyboardEvent;

},{"./SyntheticUIEvent":144,"./getEventCharCode":157,"./getEventKey":158,"./getEventModifierState":159}],142:[function(require,module,exports){
"use strict";function SyntheticMouseEvent(e,t,n,r){SyntheticUIEvent.call(this,e,t,n,r)}var SyntheticUIEvent=require("./SyntheticUIEvent"),ViewportMetrics=require("./ViewportMetrics"),getEventModifierState=require("./getEventModifierState"),MouseEventInterface={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:getEventModifierState,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+ViewportMetrics.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+ViewportMetrics.currentScrollTop}};SyntheticUIEvent.augmentClass(SyntheticMouseEvent,MouseEventInterface),module.exports=SyntheticMouseEvent;

},{"./SyntheticUIEvent":144,"./ViewportMetrics":147,"./getEventModifierState":159}],143:[function(require,module,exports){
"use strict";function SyntheticTouchEvent(e,t,n,c){SyntheticUIEvent.call(this,e,t,n,c)}var SyntheticUIEvent=require("./SyntheticUIEvent"),getEventModifierState=require("./getEventModifierState"),TouchEventInterface={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:getEventModifierState};SyntheticUIEvent.augmentClass(SyntheticTouchEvent,TouchEventInterface),module.exports=SyntheticTouchEvent;

},{"./SyntheticUIEvent":144,"./getEventModifierState":159}],144:[function(require,module,exports){
"use strict";function SyntheticUIEvent(e,t,n,i){SyntheticEvent.call(this,e,t,n,i)}var SyntheticEvent=require("./SyntheticEvent"),getEventTarget=require("./getEventTarget"),UIEventInterface={view:function(e){if(e.view)return e.view;var t=getEventTarget(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};SyntheticEvent.augmentClass(SyntheticUIEvent,UIEventInterface),module.exports=SyntheticUIEvent;

},{"./SyntheticEvent":138,"./getEventTarget":160}],145:[function(require,module,exports){
"use strict";function SyntheticWheelEvent(e,t,n,l){SyntheticMouseEvent.call(this,e,t,n,l)}var SyntheticMouseEvent=require("./SyntheticMouseEvent"),WheelEventInterface={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};SyntheticMouseEvent.augmentClass(SyntheticWheelEvent,WheelEventInterface),module.exports=SyntheticWheelEvent;

},{"./SyntheticMouseEvent":142}],146:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),Mixin={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(i,t,a,n,r,s,l,e){this.isInTransaction()?invariant(!1):void 0;var c,o;try{this._isInTransaction=!0,c=!0,this.initializeAll(0),o=i.call(t,a,n,r,s,l,e),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(i){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return o},initializeAll:function(i){for(var t=this.transactionWrappers,a=i;a<t.length;a++){var n=t[a];try{this.wrapperInitData[a]=Transaction.OBSERVED_ERROR,this.wrapperInitData[a]=n.initialize?n.initialize.call(this):null}finally{if(this.wrapperInitData[a]===Transaction.OBSERVED_ERROR)try{this.initializeAll(a+1)}catch(i){}}}},closeAll:function(i){this.isInTransaction()?void 0:invariant(!1);for(var t=this.transactionWrappers,a=i;a<t.length;a++){var n,r=t[a],s=this.wrapperInitData[a];try{n=!0,s!==Transaction.OBSERVED_ERROR&&r.close&&r.close.call(this,s),n=!1}finally{if(n)try{this.closeAll(a+1)}catch(i){}}}this.wrapperInitData.length=0}},Transaction={Mixin:Mixin,OBSERVED_ERROR:{}};module.exports=Transaction;

},{"fbjs/lib/invariant":20}],147:[function(require,module,exports){
"use strict";var ViewportMetrics={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(r){ViewportMetrics.currentScrollLeft=r.x,ViewportMetrics.currentScrollTop=r.y}};module.exports=ViewportMetrics;

},{}],148:[function(require,module,exports){
"use strict";function accumulateInto(r,a){if(null==a?invariant(!1):void 0,null==r)return a;var n=Array.isArray(r),i=Array.isArray(a);return n&&i?(r.push.apply(r,a),r):n?(r.push(a),r):i?[r].concat(a):[r,a]}var invariant=require("fbjs/lib/invariant");module.exports=accumulateInto;

},{"fbjs/lib/invariant":20}],149:[function(require,module,exports){
"use strict";function adler32(r){for(var e=1,t=0,o=0,a=r.length,d=a&-4;o<d;){for(;o<Math.min(o+4096,d);o+=4)t+=(e+=r.charCodeAt(o))+(e+=r.charCodeAt(o+1))+(e+=r.charCodeAt(o+2))+(e+=r.charCodeAt(o+3));e%=MOD,t%=MOD}for(;o<a;o++)t+=e+=r.charCodeAt(o);return e%=MOD,t%=MOD,e|t<<16}var MOD=65521;module.exports=adler32;

},{}],150:[function(require,module,exports){
"use strict";var canDefineProperty=!1;module.exports=canDefineProperty;

},{}],151:[function(require,module,exports){
"use strict";function dangerousStyleValue(e,r){var s=null==r||"boolean"==typeof r||""===r;if(s)return"";var t=isNaN(r);return t||0===r||isUnitlessNumber.hasOwnProperty(e)&&isUnitlessNumber[e]?""+r:("string"==typeof r&&(r=r.trim()),r+"px")}var CSSProperty=require("./CSSProperty"),isUnitlessNumber=CSSProperty.isUnitlessNumber;module.exports=dangerousStyleValue;

},{"./CSSProperty":51}],152:[function(require,module,exports){
"use strict";function deprecated(e,r,i,n,s){return s}var assign=require("./Object.assign"),warning=require("fbjs/lib/warning");module.exports=deprecated;

},{"./Object.assign":70,"fbjs/lib/warning":29}],153:[function(require,module,exports){
"use strict";function escaper(e){return ESCAPE_LOOKUP[e]}function escapeTextContentForBrowser(e){return(""+e).replace(ESCAPE_REGEX,escaper)}var ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;module.exports=escapeTextContentForBrowser;

},{}],154:[function(require,module,exports){
"use strict";function findDOMNode(e){return null==e?null:1===e.nodeType?e:ReactInstanceMap.has(e)?ReactMount.getNodeFromInstance(e):(null!=e.render&&"function"==typeof e.render?invariant(!1):void 0,void invariant(!1))}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactInstanceMap=require("./ReactInstanceMap"),ReactMount=require("./ReactMount"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning");module.exports=findDOMNode;

},{"./ReactCurrentOwner":82,"./ReactInstanceMap":108,"./ReactMount":111,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],155:[function(require,module,exports){
"use strict";function flattenSingleChildIntoContext(e,n,r){var l=e,t=void 0===l[r];t&&null!=n&&(l[r]=n)}function flattenChildren(e){if(null==e)return e;var n={};return traverseAllChildren(e,flattenSingleChildIntoContext,n),n}var traverseAllChildren=require("./traverseAllChildren"),warning=require("fbjs/lib/warning");module.exports=flattenChildren;

},{"./traverseAllChildren":173,"fbjs/lib/warning":29}],156:[function(require,module,exports){
"use strict";var forEachAccumulated=function(c,r,a){Array.isArray(c)?c.forEach(r,a):c&&r.call(a,c)};module.exports=forEachAccumulated;

},{}],157:[function(require,module,exports){
"use strict";function getEventCharCode(e){var r,t=e.keyCode;return"charCode"in e?(r=e.charCode,0===r&&13===t&&(r=13)):r=t,r>=32||13===r?r:0}module.exports=getEventCharCode;

},{}],158:[function(require,module,exports){
"use strict";function getEventKey(e){if(e.key){var r=normalizeKey[e.key]||e.key;if("Unidentified"!==r)return r}if("keypress"===e.type){var t=getEventCharCode(e);return 13===t?"Enter":String.fromCharCode(t)}return"keydown"===e.type||"keyup"===e.type?translateToKey[e.keyCode]||"Unidentified":""}var getEventCharCode=require("./getEventCharCode"),normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};module.exports=getEventKey;

},{"./getEventCharCode":157}],159:[function(require,module,exports){
"use strict";function modifierStateGetter(t){var e=this,r=e.nativeEvent;if(r.getModifierState)return r.getModifierState(t);var i=modifierKeyToProp[t];return!!i&&!!r[i]}function getEventModifierState(t){return modifierStateGetter}var modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};module.exports=getEventModifierState;

},{}],160:[function(require,module,exports){
"use strict";function getEventTarget(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}module.exports=getEventTarget;

},{}],161:[function(require,module,exports){
"use strict";function getIteratorFn(t){var r=t&&(ITERATOR_SYMBOL&&t[ITERATOR_SYMBOL]||t[FAUX_ITERATOR_SYMBOL]);if("function"==typeof r)return r}var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator";module.exports=getIteratorFn;

},{}],162:[function(require,module,exports){
"use strict";function getLeafNode(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function getSiblingNode(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function getNodeForCharacterOffset(e,t){for(var o=getLeafNode(e),n=0,r=0;o;){if(3===o.nodeType){if(r=n+o.textContent.length,n<=t&&r>=t)return{node:o,offset:t-n};n=r}o=getLeafNode(getSiblingNode(o))}}module.exports=getNodeForCharacterOffset;

},{}],163:[function(require,module,exports){
"use strict";function getTextContentAccessor(){return!contentKey&&ExecutionEnvironment.canUseDOM&&(contentKey="textContent"in document.documentElement?"textContent":"innerText"),contentKey}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),contentKey=null;module.exports=getTextContentAccessor;

},{"fbjs/lib/ExecutionEnvironment":6}],164:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function isInternalComponentType(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function instantiateReactComponent(e){var t;if(null===e||e===!1)t=new ReactEmptyComponent(instantiateReactComponent);else if("object"==typeof e){var n=e;!n||"function"!=typeof n.type&&"string"!=typeof n.type?invariant(!1):void 0,t="string"==typeof n.type?ReactNativeComponent.createInternalComponent(n):isInternalComponentType(n.type)?new n.type(n):new ReactCompositeComponentWrapper}else"string"==typeof e||"number"==typeof e?t=ReactNativeComponent.createInstanceForText(e):invariant(!1);return t.construct(e),t._mountIndex=0,t._mountImage=null,t}var ReactCompositeComponent=require("./ReactCompositeComponent"),ReactEmptyComponent=require("./ReactEmptyComponent"),ReactNativeComponent=require("./ReactNativeComponent"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactCompositeComponentWrapper=function(){};assign(ReactCompositeComponentWrapper.prototype,ReactCompositeComponent.Mixin,{_instantiateReactComponent:instantiateReactComponent}),module.exports=instantiateReactComponent;

},{"./Object.assign":70,"./ReactCompositeComponent":81,"./ReactEmptyComponent":100,"./ReactNativeComponent":114,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],165:[function(require,module,exports){
"use strict";function isEventSupported(e,t){if(!ExecutionEnvironment.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,u=n in document;if(!u){var i=document.createElement("div");i.setAttribute(n,"return;"),u="function"==typeof i[n]}return!u&&useHasFeature&&"wheel"===e&&(u=document.implementation.hasFeature("Events.wheel","3.0")),u}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),useHasFeature;ExecutionEnvironment.canUseDOM&&(useHasFeature=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),module.exports=isEventSupported;

},{"fbjs/lib/ExecutionEnvironment":6}],166:[function(require,module,exports){
"use strict";function isTextInputElement(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&supportedInputTypes[e.type]||"textarea"===t)}var supportedInputTypes={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};module.exports=isTextInputElement;

},{}],167:[function(require,module,exports){
"use strict";function onlyChild(e){return ReactElement.isValidElement(e)?void 0:invariant(!1),e}var ReactElement=require("./ReactElement"),invariant=require("fbjs/lib/invariant");module.exports=onlyChild;

},{"./ReactElement":98,"fbjs/lib/invariant":20}],168:[function(require,module,exports){
"use strict";function quoteAttributeValueForBrowser(e){return'"'+escapeTextContentForBrowser(e)+'"'}var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");module.exports=quoteAttributeValueForBrowser;

},{"./escapeTextContentForBrowser":153}],169:[function(require,module,exports){
"use strict";var ReactMount=require("./ReactMount");module.exports=ReactMount.renderSubtreeIntoContainer;

},{"./ReactMount":111}],170:[function(require,module,exports){
"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),WHITESPACE_TEST=/^[ \r\n\t\f]/,NONVISIBLE_TEST=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,setInnerHTML=function(e,n){e.innerHTML=n};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(setInnerHTML=function(e,n){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=n})}),ExecutionEnvironment.canUseDOM){var testElement=document.createElement("div");testElement.innerHTML=" ",""===testElement.innerHTML&&(setInnerHTML=function(e,n){if(e.parentNode&&e.parentNode.replaceChild(e,e),WHITESPACE_TEST.test(n)||"<"===n[0]&&NONVISIBLE_TEST.test(n)){e.innerHTML=String.fromCharCode(65279)+n;var t=e.firstChild;1===t.data.length?e.removeChild(t):t.deleteData(0,1)}else e.innerHTML=n})}module.exports=setInnerHTML;

},{"fbjs/lib/ExecutionEnvironment":6}],171:[function(require,module,exports){
"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),setInnerHTML=require("./setInnerHTML"),setTextContent=function(e,t){e.textContent=t};ExecutionEnvironment.canUseDOM&&("textContent"in document.documentElement||(setTextContent=function(e,t){setInnerHTML(e,escapeTextContentForBrowser(t))})),module.exports=setTextContent;

},{"./escapeTextContentForBrowser":153,"./setInnerHTML":170,"fbjs/lib/ExecutionEnvironment":6}],172:[function(require,module,exports){
"use strict";function shouldUpdateReactComponent(e,t){var n=null===e||e===!1,o=null===t||t===!1;if(n||o)return n===o;var r=typeof e,u=typeof t;return"string"===r||"number"===r?"string"===u||"number"===u:"object"===u&&e.type===t.type&&e.key===t.key}module.exports=shouldUpdateReactComponent;

},{}],173:[function(require,module,exports){
"use strict";function userProvidedKeyEscaper(e){return userProvidedKeyEscaperLookup[e]}function getComponentKey(e,r){return e&&null!=e.key?wrapUserProvidedKey(e.key):r.toString(36)}function escapeUserProvidedKey(e){return(""+e).replace(userProvidedKeyEscapeRegex,userProvidedKeyEscaper)}function wrapUserProvidedKey(e){return"$"+escapeUserProvidedKey(e)}function traverseAllChildrenImpl(e,r,n,t){var a=typeof e;if("undefined"!==a&&"boolean"!==a||(e=null),null===e||"string"===a||"number"===a||ReactElement.isValidElement(e))return n(t,e,""===r?SEPARATOR+getComponentKey(e,0):r),1;var i,l,o=0,s=""===r?SEPARATOR:r+SUBSEPARATOR;if(Array.isArray(e))for(var d=0;d<e.length;d++)i=e[d],l=s+getComponentKey(i,d),o+=traverseAllChildrenImpl(i,l,n,t);else{var u=getIteratorFn(e);if(u){var v,c=u.call(e);if(u!==e.entries)for(var p=0;!(v=c.next()).done;)i=v.value,l=s+getComponentKey(i,p++),o+=traverseAllChildrenImpl(i,l,n,t);else for(;!(v=c.next()).done;){var A=v.value;A&&(i=A[1],l=s+wrapUserProvidedKey(A[0])+SUBSEPARATOR+getComponentKey(i,0),o+=traverseAllChildrenImpl(i,l,n,t))}}else if("object"===a){String(e);invariant(!1)}}return o}function traverseAllChildren(e,r,n){return null==e?0:traverseAllChildrenImpl(e,"",r,n)}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceHandles=require("./ReactInstanceHandles"),getIteratorFn=require("./getIteratorFn"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),SEPARATOR=ReactInstanceHandles.SEPARATOR,SUBSEPARATOR=":",userProvidedKeyEscaperLookup={"=":"=0",".":"=1",":":"=2"},userProvidedKeyEscapeRegex=/[=.:]/g,didWarnAboutMaps=!1;module.exports=traverseAllChildren;

},{"./ReactCurrentOwner":82,"./ReactElement":98,"./ReactInstanceHandles":107,"./getIteratorFn":161,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],174:[function(require,module,exports){
"use strict";var assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),warning=require("fbjs/lib/warning"),validateDOMNesting=emptyFunction,specialTags,inScopeTags,buttonScopeTags,impliedEndTags,emptyAncestorInfo,updatedAncestorInfo,isTagValidWithParent,findInvalidAncestorForTag,findOwnerStack,didWarn;module.exports=validateDOMNesting;

},{"./Object.assign":70,"fbjs/lib/emptyFunction":12,"fbjs/lib/warning":29}],175:[function(require,module,exports){
"use strict";module.exports=require("./lib/React");

},{"./lib/React":72}],176:[function(require,module,exports){
function shallow(r,n,t){var a=Array.isArray(r),e=Array.isArray(n);if(a!==e)return!1;var o=typeof r,f=typeof n;return o===f&&(flat(o)?t?t(r,n):r===n:a?shallowArray(r,n,t):shallowObject(r,n,t))}function shallowArray(r,n,t){var a=r.length;if(a!==n.length)return!1;if(t){for(var e=0;e<a;e++)if(!t(r[e],n[e]))return!1}else for(var e=0;e<a;e++)if(r[e]!==n[e])return!1;return!0}function shallowObject(r,n,t){var a=0,e=0;if(t)for(var o in r){if(r.hasOwnProperty(o)&&!t(r[o],n[o]))return!1;a++}else for(var o in r){if(r.hasOwnProperty(o)&&r[o]!==n[o])return!1;a++}for(var o in n)n.hasOwnProperty(o)&&e++;return a===e}function flat(r){return"function"!==r&&"object"!==r}module.exports=shallow;

},{}],177:[function(require,module,exports){
(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&i<o;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&i<u;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&i<a;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,y=c.bind,d=Object.create,g=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(e<2||null==r)return r;for(var u=1;u<e;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;c<a;c++){var f=o[c];t&&void 0!==r[f]||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(d)return d(n);g.prototype=n;var t=new g;return g.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&t<=A};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;e<u;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;e<u;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;o<u;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;if(e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),void 0!==e&&e!==-1)return n[e]},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-(1/0),o=-(1/0);if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;a<c;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-(1/0)&&i===-(1/0))&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;a<c;a++)e=n[a],e<i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u<o||u===1/0&&i===1/0)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;i<e;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(r<e||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){if(null!=n)return null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){if(null!=n)return null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);o<a;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;f<l;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);o<a;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);e<u;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;o<r&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;e<t;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);e<u;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);i<o;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;i<e;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(y&&n.bind===y)return y.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;o<u;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(e<=1)throw new Error("bindAll must be passed function names");for(t=1;t<e;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;f<t&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),n<=1&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;u<r;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;a<i;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;u<r;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;e<u;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;i<o;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;a<c;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;i<e;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n||(k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length)},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return void 0===n},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;u<n;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return void 0===e&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(n){throw n.source=i,n}var a=function(n){return o.call(this,n,m)},c=t.variable||"obj";return a.source="function("+c+"){\n"+i+"}",a},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);

},{}],178:[function(require,module,exports){
!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function n(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function e(t){return t}function r(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function i(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=W.length;e<r;++e){var i=W[e]+n;if(i in t)return i}}function o(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function u(){this._=Object.create(null)}function a(t){return(t+="")===F||t[0]===J?J+t:t}function s(t){return(t+="")[0]===J?t.slice(1):t}function c(t){return a(t)in this._}function l(t){return(t=a(t))in this._&&delete this._[t]}function f(){var t=[];for(var n in this._)t.push(s(n));return t}function h(){var t=0;for(var n in this._)++t;return t}function p(){for(var t in this._)return!1;return!0}function v(){}function d(){}function _(t){function n(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}var e=[],r=new u;return n.on=function(n,i){var o,u=r.get(n);return arguments.length<2?u&&u.on:(u&&(u.on=null,e=e.slice(0,o=e.indexOf(u)).concat(e.slice(o+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function g(){U.event.preventDefault()}function y(){for(var t,n=U.event;t=n.sourceEvent;)n=t;return n}function m(t){for(var n=new d,e=0,r=arguments.length;++e<r;)n[arguments[e]]=_(n);return n.of=function(e,r){return function(i){try{var o=i.sourceEvent=U.event;i.target=t,U.event=i,n[i.type].apply(e,r)}finally{U.event=o}}},n}function w(t){return nt(t,ot),t}function x(t){return"function"==typeof t?t:function(){return et(t,this)}}function b(t){return"function"==typeof t?t:function(){return rt(t,this)}}function N(t,n){function e(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function u(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function a(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=U.ns.qualify(t),null==n?t.local?r:e:"function"==typeof n?t.local?a:u:t.local?o:i}function A(t){return t.trim().replace(/\s+/g," ")}function S(t){return new RegExp("(?:^|\\s+)"+U.requote(t)+"(?:\\s+|$)","g")}function E(t){return(t+"").trim().split(/^|\s+/)}function z(t,n){function e(){for(var e=-1;++e<i;)t[e](this,n)}function r(){for(var e=-1,r=n.apply(this,arguments);++e<i;)t[e](this,r)}t=E(t).map(T);var i=t.length;return"function"==typeof n?r:e}function T(t){var n=S(t);return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);var i=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(i)||e.setAttribute("class",A(i+" "+t))):e.setAttribute("class",A(i.replace(n," ")))}}function C(t,n,e){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,e)}function o(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}return null==n?r:"function"==typeof n?o:i}function L(t,n){function e(){delete this[t]}function r(){this[t]=n}function i(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return null==n?e:"function"==typeof n?i:r}function P(t){function n(){var n=this.ownerDocument,e=this.namespaceURI;return e===ut&&n.documentElement.namespaceURI===ut?n.createElement(t):n.createElementNS(e,t)}function e(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=U.ns.qualify(t)).local?e:n}function O(){var t=this.parentNode;t&&t.removeChild(this)}function q(){this._=Object.create(null)}function M(t){return{__data__:t}}function D(t){return function(){return it(this,t)}}function $(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function k(t){return arguments.length||(t=$),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function V(t,n){for(var e=0,r=t.length;e<r;e++)for(var i,o=t[e],u=0,a=o.length;u<a;u++)(i=o[u])&&n(i,u,e);return t}function R(t){return nt(t,st),t}function X(t){var n,e;return function(r,i,o){var u,a=t[o].update,s=a.length;for(o!=e&&(e=o,n=0),i>=n&&(n=i+1);!(u=a[n])&&++n<s;);return u}}function j(t,n,e){function r(){var n=this[u];n&&(this.removeEventListener(t,n,n.$),delete this[u])}function i(){var i=s(n,Z(arguments));r.call(this),this.addEventListener(t,this[u]=i,i.$=e),i._=n}function o(){var n,e=new RegExp("^__on([^.]+)"+U.requote(t)+"$");for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i.$),delete this[r]}}var u="__on"+t,a=t.indexOf("."),s=H;a>0&&(t=t.slice(0,a));var c=ct.get(t);return c&&(t=c,s=Y),a?n?i:r:n?v:o}function H(t,n){return function(e){var r=U.event;U.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{U.event=r}}}function Y(t,n){var e=H(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function B(e){var r=".dragsuppress-"+ ++ft,o="click"+r,u=U.select(n(e)).on("touchmove"+r,g).on("dragstart"+r,g).on("selectstart"+r,g);if(null==lt&&(lt=!("onselectstart"in e)&&i(e.style,"userSelect")),lt){var a=t(e).style,s=a[lt];a[lt]="none"}return function(t){if(u.on(r,null),lt&&(a[lt]=s),t){var n=function(){u.on(o,null)};u.on(o,function(){g(),n()},!0),setTimeout(n,0)}}}function G(t,e){e.changedTouches&&(e=e.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(ht<0){var o=n(t);if(o.scrollX||o.scrollY){r=U.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var u=r[0][0].getScreenCTM();ht=!(u.f||u.e),r.remove()}}return ht?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function I(){return U.event.changedTouches[0].identifier}var U={version:"3.5.17"},K=this.document;U.rebind=function(t,n){for(var e,i=1,o=arguments.length;++i<o;)t[e=arguments[i]]=r(t,n,n[e]);return t};var W=["webkit","ms","moz","Moz","o","O"];U.map=function(t,n){var e=new u;if(t instanceof u)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n.call(t,r=t[i],i),r)}else for(var a in t)e.set(a,t[a]);return e};var F="__proto__",J="\0";o(u,{has:c,get:function(t){return this._[a(t)]},set:function(t,n){return this._[a(t)]=n},remove:l,keys:f,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:s(n),value:this._[n]});return t},size:h,empty:p,forEach:function(t){for(var n in this._)t.call(this,s(n),this._[n])}});var Q=[].slice,Z=function(t){return Q.call(t)};U.dispatch=function(){for(var t=new d,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=_(t);return t},d.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},U.event=null,U.requote=function(t){return t.replace(tt,"\\$&")};var tt=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,nt={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},et=function(t,n){return n.querySelector(t)},rt=function(t,n){return n.querySelectorAll(t)},it=function(t,n){var e=t.matches||t[i(t,"matchesSelector")];return(it=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(et=function(t,n){return Sizzle(t,n)[0]||null},rt=Sizzle,it=Sizzle.matchesSelector),U.selection=function(){return U.select(K.documentElement)};var ot=U.selection.prototype=[];ot.select=function(t){var n,e,r,i,o=[];t=x(t);for(var u=-1,a=this.length;++u<a;){o.push(n=[]),n.parentNode=(r=this[u]).parentNode;for(var s=-1,c=r.length;++s<c;)(i=r[s])?(n.push(e=t.call(i,i.__data__,s,u)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return w(o)},ot.selectAll=function(t){var n,e,r=[];t=b(t);for(var i=-1,o=this.length;++i<o;)for(var u=this[i],a=-1,s=u.length;++a<s;)(e=u[a])&&(r.push(n=Z(t.call(e,e.__data__,a,i))),n.parentNode=e);return w(r)};var ut="http://www.w3.org/1999/xhtml",at={svg:"http://www.w3.org/2000/svg",xhtml:ut,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};U.ns={prefix:at,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),at.hasOwnProperty(e)?{space:at[e],local:t}:t}},ot.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return t=U.ns.qualify(t),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(N(n,t[n]));return this}return this.each(N(t,n))},ot.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=E(t)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!S(t[i]).test(n))return!1;return!0}for(n in t)this.each(z(n,t[n]));return this}return this.each(z(t,n))},ot.style=function(t,e,r){var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(e="");for(r in t)this.each(C(r,t[r],e));return this}if(i<2){var o=this.node();return n(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(C(t,e,r))},ot.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(L(n,t[n]));return this}return this.each(L(t,n))},ot.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},ot.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},ot.append=function(t){return t=P(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ot.insert=function(t,n){return t=P(t),n=x(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},ot.remove=function(){return this.each(O)},U.set=function(t){var n=new q;if(t)for(var e=0,r=t.length;e<r;++e)n.add(t[e]);return n},o(q,{has:c,add:function(t){return this._[a(t+="")]=!0,t},remove:l,values:f,size:h,empty:p,forEach:function(t){for(var n in this._)t.call(this,s(n))}}),ot.data=function(t,n){function e(t,e){var r,i,o,a=t.length,f=e.length,h=Math.min(a,f),p=new Array(f),v=new Array(f),d=new Array(a);if(n){var _,g=new u,y=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(g.has(_=n.call(i,i.__data__,r))?d[r]=i:g.set(_,i),y[r]=_);for(r=-1;++r<f;)(i=g.get(_=n.call(e,o=e[r],r)))?i!==!0&&(p[r]=i,i.__data__=o):v[r]=M(o),g.set(_,!0);for(r=-1;++r<a;)r in y&&g.get(y[r])!==!0&&(d[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],o=e[r],i?(i.__data__=o,p[r]=i):v[r]=M(o);for(;r<f;++r)v[r]=M(e[r]);for(;r<a;++r)d[r]=t[r]}v.update=p,v.parentNode=p.parentNode=d.parentNode=t.parentNode,s.push(v),c.push(p),l.push(d)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var s=R([]),c=w([]),l=w([]);if("function"==typeof t)for(;++o<a;)e(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)e(r=this[o],t);return c.enter=function(){return s},c.exit=function(){return l},c},ot.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ot.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=D(t));for(var o=0,u=this.length;o<u;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var a=0,s=e.length;a<s;a++)(r=e[a])&&t.call(r,r.__data__,a,o)&&n.push(r)}return w(i)},ot.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];--i>=0;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},U.ascending=$,ot.sort=function(t){t=k.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},ot.each=function(t){return V(this,function(n,e,r){t.call(n,n.__data__,e,r)})},ot.call=function(t){var n=Z(arguments);return t.apply(n[0]=this,n),this},ot.empty=function(){return!this.node()},ot.node=function(){for(var t=0,n=this.length;t<n;t++)for(var e=this[t],r=0,i=e.length;r<i;r++){var o=e[r];if(o)return o}return null},ot.size=function(){var t=0;return V(this,function(){++t}),t};var st=[];U.selection.enter=R,U.selection.enter.prototype=st,st.append=ot.append,st.empty=ot.empty,st.node=ot.node,st.call=ot.call,st.size=ot.size,st.select=function(t){for(var n,e,r,i,o,u=[],a=-1,s=this.length;++a<s;){r=(i=this[a]).update,u.push(n=[]),n.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(o=i[c])?(n.push(r[c]=e=t.call(i.parentNode,o.__data__,c,a)),e.__data__=o.__data__):n.push(null)}return w(u)},st.insert=function(t,n){return arguments.length<2&&(n=X(this)),ot.insert.call(this,t,n)},U.select=function(n){var e;return"string"==typeof n?(e=[et(n,K)],e.parentNode=K.documentElement):(e=[n],e.parentNode=t(n)),w([e])},U.selectAll=function(t){var n;return"string"==typeof t?(n=Z(rt(t,K)),n.parentNode=K.documentElement):(n=Z(t),n.parentNode=null),w([n])},ot.on=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(n=!1);for(e in t)this.each(j(e,t[e],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(j(t,n,e))};var ct=U.map({mouseenter:"mouseover",mouseleave:"mouseout"});K&&ct.forEach(function(t){"on"+t in K&&ct.remove(t)});var lt,ft=0;U.mouse=function(t){return G(t,y())};var ht=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;U.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=y().changedTouches),n)for(var r,i=0,o=n.length;i<o;++i)if((r=n[i]).identifier===e)return G(t,r)},U.behavior={},U.behavior.drag=function(){function t(){this.on("mousedown.drag",u).on("touchstart.drag",a)}function r(t,n,e,r,u){return function(){function a(){var t,e,r=n(h,d);r&&(t=r[0]-m[0],e=r[1]-m[1],v|=t|e,m=r,p({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:t,dy:e}))}function s(){n(h,d)&&(g.on(r+_,null).on(u+_,null),y(v),p({type:"dragend"}))}var c,l=this,f=U.event.target.correspondingElement||U.event.target,h=l.parentNode,p=i.of(l,arguments),v=0,d=t(),_=".drag"+(null==d?"":"-"+d),g=U.select(e(f)).on(r+_,a).on(u+_,s),y=B(f),m=n(h,d);o?(c=o.apply(l,arguments),c=[c.x-m[0],c.y-m[1]]):c=[0,0],p({type:"dragstart"})}}var i=m(t,"drag","dragstart","dragend"),o=null,u=r(v,U.mouse,n,"mousemove","mouseup"),a=r(I,U.touch,e,"touchmove","touchend");return t.origin=function(n){return arguments.length?(o=n,t):o},U.rebind(t,i,"on")},"function"==typeof define&&define.amd?(this.d3=U,define(U)):"object"==typeof module&&module.exports?module.exports=U:this.d3=U}();

},{}],179:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),AbstractFile=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getBytes",value:function(e,t){throw new TypeError("Method getBytes is not implemented")}},{key:"getAll",value:function(){throw new TypeError("Method getAll is not implemented")}},{key:"getAllString",value:function(){throw new TypeError("Method getAllString is not implemented")}},{key:"getSize",value:function(){throw new TypeError("Method getSize is not implemented")}}]),e}();module.exports=AbstractFile;

},{}],180:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),_utils=require("./utils"),ContigInterval=function(){function t(n,e,i){_classCallCheck(this,t),this.contig=n,this.interval=new _Interval2.default(e,i)}return _createClass(t,[{key:"start",value:function(){return this.interval.start}},{key:"stop",value:function(){return this.interval.stop}},{key:"length",value:function(){return this.interval.length()}},{key:"intersects",value:function(t){return this.contig===t.contig&&this.interval.intersects(t.interval)}},{key:"chrIntersects",value:function(t){return this.chrOnContig(t.contig)&&this.interval.intersects(t.interval)}},{key:"containsInterval",value:function(t){return this.contig===t.contig&&this.interval.containsInterval(t.interval)}},{key:"isAdjacentTo",value:function(t){return this.contig===t.contig&&(this.start()==1+t.stop()||this.stop()+1==t.start())}},{key:"isCoveredBy",value:function(t){var n=this,e=t.filter(function(t){return t.contig===n.contig}).map(function(t){return t.interval});return this.interval.isCoveredBy(e)}},{key:"containsLocus",value:function(t,n){return this.contig===t&&this.interval.contains(n)}},{key:"chrContainsLocus",value:function(t,n){return this.chrOnContig(t)&&this.interval.contains(n)}},{key:"chrOnContig",value:function(t){return this.contig===t||this.contig==="chr"+t||"chr"+this.contig===t}},{key:"clone",value:function(){return new t(this.contig,this.interval.start,this.interval.stop)}},{key:"complementIntervals",value:function(n){var e=this;return this.interval.complementIntervals((0,_utils.flatMap)(n,function(t){return t.contig===e.contig?[t.interval]:[]})).map(function(n){return new t(e.contig,n.start,n.stop)})}},{key:"toString",value:function(){return this.contig+":"+this.start()+"-"+this.stop()}},{key:"toGenomeRange",value:function(){if(!("string"==typeof this.contig||this.contig instanceof String))throw"Cannot convert numeric ContigInterval to GenomeRange";return{contig:this.contig,start:this.start(),stop:this.stop()}}}],[{key:"compare",value:function(t,n){return t.contig>n.contig?-1:t.contig<n.contig?1:t.start()-n.start()}},{key:"coalesce",value:function(n){n.sort(t.compare);var e=[];return n.forEach(function(t){if(0===e.length)return void e.push(t);var n=e[e.length-1];t.intersects(n)||t.isAdjacentTo(n)?(n=e[e.length-1]=n.clone(),n.interval.stop=Math.max(t.interval.stop,n.interval.stop)):e.push(t)}),e}},{key:"fromGenomeRange",value:function(n){return new t(n.contig,n.start,n.stop)}}]),t}();module.exports=ContigInterval;

},{"./Interval":183,"./utils":211}],181:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_get=function(t,e,n){for(var r=!0;r;){var o=t,a=e,i=n;r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,a);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(i)}var l=Object.getPrototypeOf(o);if(null===l)return;t=l,e=a,n=i,r=!0,u=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_utils=require("./utils"),_utils2=_interopRequireDefault(_utils),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),Controls=function(t){function e(t){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return _inherits(e,t),_createClass(e,[{key:"makeRange",value:function(){return{contig:this.refs.contig.value,start:Number(this.refs.start.value),stop:Number(this.refs.stop.value)}}},{key:"completeRange",value:function(t){var e=this;if(t=t||{},t.start&&void 0===t.stop&&(t.stop=t.start+20,t.start-=20),t.contig){var n;!function(){var r=t.contig;n=_underscore2.default.find(e.props.contigList,function(t){return _utils2.default.isChrMatch(r,t)}),n&&(t.contig=n)}()}return _underscore2.default.extend({},this.props.range,t)}},{key:"handleContigChange",value:function(t){this.props.onChange(this.completeRange({contig:this.refs.contig.value}))}},{key:"handleFormSubmit",value:function(t){t.preventDefault();var e=this.completeRange(_utils2.default.parseRange(this.refs.position.value));this.props.onChange(e)}},{key:"updateRangeUI",value:function(){var t=this.props.range;if(t&&(this.refs.position.value=_utils2.default.formatInterval(new _Interval2.default(t.start,t.stop)),this.props.contigList)){var e=this.props.contigList.indexOf(t.contig);this.refs.contig.selectedIndex=e}}},{key:"zoomIn",value:function(t){t.preventDefault(),this.zoomByFactor(.5)}},{key:"zoomOut",value:function(t){t.preventDefault(),this.zoomByFactor(2)}},{key:"zoomByFactor",value:function(t){var e=this.props.range;if(e){var n=_utils2.default.scaleRange(new _Interval2.default(e.start,e.stop),t);this.props.onChange({contig:e.contig,start:n.start,stop:n.stop})}}},{key:"render",value:function(){var t=this.props.contigList?this.props.contigList.map(function(t,e){return _react2.default.createElement("option",{key:e},t)}):null;return _react2.default.createElement("form",{className:"controls",onSubmit:this.handleFormSubmit.bind(this)},_react2.default.createElement("select",{ref:"contig",onChange:this.handleContigChange.bind(this)},t)," ",_react2.default.createElement("input",{ref:"position",type:"text"})," ",_react2.default.createElement("button",{className:"btn-submit",onClick:this.handleFormSubmit.bind(this)},"Go")," ",_react2.default.createElement("div",{className:"zoom-controls"},_react2.default.createElement("button",{className:"btn-zoom-out",onClick:this.zoomOut.bind(this)})," ",_react2.default.createElement("button",{className:"btn-zoom-in",onClick:this.zoomIn.bind(this)})))}},{key:"componentDidUpdate",value:function(t){_underscore2.default.isEqual(t.range,this.props.range)||this.updateRangeUI()}},{key:"componentDidMount",value:function(){this.updateRangeUI()}}]),e}(_react2.default.Component);module.exports=Controls;

},{"./Interval":183,"./utils":211,"react":175,"underscore":177}],182:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_ContigInterval=require("./ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataSamRead=require("./data/SamRead"),_dataSamRead2=_interopRequireDefault(_dataSamRead),OP_MAP={ALIGNMENT_MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",CLIP_SOFT:"S",CLIP_HARD:"H",PAD:"P",SEQUENCE_MATCH:"=",SEQUENCE_MISMATCH:"X"},GA4GHAlignment=function(){function e(t){_classCallCheck(this,e),this.alignment=t,this.pos=t.alignment.position.position,this.ref=t.alignment.position.referenceName,this.name=t.fragmentName,this.cigarOps=t.alignment.cigar.map(function(e){var t=e.operation,n=e.operationLength;return{op:OP_MAP[t],length:n}}),this._interval=new _ContigInterval2.default(this.ref,this.pos,this.pos+this.getReferenceLength()-1)}return _createClass(e,[{key:"getKey",value:function(){return e.keyFromGA4GHResponse(this.alignment)}},{key:"getStrand",value:function(){return this.alignment.alignment.position.reverseStrand?"-":"+"}},{key:"getQualityScores",value:function(){return this.alignment.alignedQuality}},{key:"getSequence",value:function(){return this.alignment.alignedSequence}},{key:"getInterval",value:function(){return this._interval}},{key:"intersects",value:function(e){return e.intersects(this.getInterval())}},{key:"getReferenceLength",value:function(){return _dataSamRead2.default.referenceLengthFromOps(this.cigarOps)}},{key:"getMateProperties",value:function(){var e=this.alignment.nextMatePosition;return e&&{ref:e.referenceName,pos:e.position,strand:e.reverseStrand?"-":"+"}}},{key:"getInferredInsertSize",value:function(){var e=this.getMateProperties();if(e&&e.ref==this.ref){var t=this._interval.start(),n=this._interval.stop(),r=e.pos,a=r+this.getSequence().length;return Math.max(n,a)-Math.min(t,r)}return 0}}],[{key:"keyFromGA4GHResponse",value:function(e){return e.fragmentName+":"+e.readNumber}}]),e}();module.exports=GA4GHAlignment;

},{"./ContigInterval":180,"./data/SamRead":191}],183:[function(require,module,exports){
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}(),Interval=function(){function t(n,r){_classCallCheck(this,t),this.start=n,this.stop=r}return _createClass(t,[{key:"length",value:function(){return Math.max(0,this.stop-this.start+1)}},{key:"intersect",value:function(n){return new t(Math.max(this.start,n.start),Math.min(this.stop,n.stop))}},{key:"intersects",value:function(t){return this.start<=t.stop&&t.start<=this.stop}},{key:"contains",value:function(t){return t>=this.start&&t<=this.stop}},{key:"containsInterval",value:function(t){return this.contains(t.start)&&this.contains(t.stop)}},{key:"clone",value:function(){return new t(this.start,this.stop)}},{key:"isCoveredBy",value:function(t){for(var n=this.clone(),r=0;r<t.length;r++){var e=t[r];if(r&&e.start<t[r-1].start)throw"isCoveredBy must be called with sorted ranges";if(e.start>n.start)return!1;if(n.start=e.stop+1,n.length()<=0)return!0}return!1}},{key:"subtract",value:function(n){return this.intersects(n)?this.containsInterval(n)?[new t(this.start,n.start-1),new t(n.stop+1,this.stop)].filter(function(t){return t.length()>0}):n.containsInterval(this)?[]:n.start<this.start?[new t(n.stop+1,this.stop)]:[new t(this.start,n.start-1)]:[this]}},{key:"complementIntervals",value:function(t){var n=[this];return t.forEach(function(t){var r=[];n.forEach(function(n){r=r.concat(n.subtract(t))}),n=r}),n}},{key:"toString",value:function(){return"["+this.start+", "+this.stop+"]"}}],[{key:"intersectAll",value:function(t){if(!t.length)throw new Error("Tried to intersect zero intervals");var n=t[0].clone();return t.slice(1).forEach(function(t){var r=t.start,e=t.stop;n.start=Math.max(r,n.start),n.stop=Math.min(e,n.stop)}),n}},{key:"boundingInterval",value:function(t){if(!t.length)throw new Error("Tried to bound zero intervals");var n=t[0].clone();return t.slice(1).forEach(function(t){var r=t.start,e=t.stop;n.start=Math.min(r,n.start),n.stop=Math.max(e,n.stop)}),n}}]),t}();module.exports=Interval;

},{}],184:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var i=e,o=t,u=r;n=!1,null===i&&(i=Function.prototype);var l=Object.getOwnPropertyDescriptor(i,o);if(void 0!==l){if("value"in l)return l.value;var a=l.get;if(void 0===a)return;return a.call(u)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=o,r=u,n=!0,l=f=void 0}},_q=require("q"),_q2=_interopRequireDefault(_q),_AbstractFile2=require("./AbstractFile"),_AbstractFile3=_interopRequireDefault(_AbstractFile2),LocalStringFile=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.fileLength=e.length,this.buffer=new ArrayBuffer(e.length),this.content=e;for(var r=new Uint8Array(this.buffer),n=0;n<this.fileLength;n++)r[n]=e.charCodeAt(n)}return _inherits(t,e),_createClass(t,[{key:"getBytes",value:function(e,t){if(t<0)return _q2.default.reject("Requested <0 bytes ("+t+")");var r=e+t-1;this.fileLength!=-1&&(r=Math.min(this.fileLength-1,r));var n=this.getFromCache(e,r);return _q2.default.when(n)}},{key:"getAll",value:function(){var e=this.getFromCache(0,this.fileLength-1);return _q2.default.when(e)}},{key:"getAllString",value:function(){return _q2.default.when(this.content)}},{key:"getSize",value:function(){return _q2.default.when(this.fileLength)}},{key:"getFromCache",value:function(e,t){return this.buffer.slice(e,t+1)}}]),t}(_AbstractFile3.default);module.exports=LocalStringFile;

},{"./AbstractFile":179,"q":47}],185:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var a=e,c=t,o=r;n=!1,null===a&&(a=Function.prototype);var u=Object.getOwnPropertyDescriptor(a,c);if(void 0!==u){if("value"in u)return u.value;var i=u.get;if(void 0===i)return;return i.call(o)}var l=Object.getPrototypeOf(a);if(null===l)return;e=l,t=c,r=o,n=!0,u=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),Menu=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"clickHandler",value:function(e,t){t.preventDefault();var r=this.props.items[e];"string"!=typeof r&&this.props.onSelect(r.key)}},{key:"render",value:function(){var e=this,t=function(t){return e.clickHandler.bind(e,t)},r=[];return this.props.header&&r.push(_react2.default.createElement("div",{key:"header",className:"menu-header"},this.props.header)),r=r.concat(this.props.items.map(function(e,r){if("string"==typeof e)return _react2.default.createElement("div",{key:r,className:"menu-separator"});var n="check"+(e.checked?" checked":"");return _react2.default.createElement("div",{key:r,className:"menu-item",onClick:t(r)},_react2.default.createElement("span",{className:n}),_react2.default.createElement("span",{className:"menu-item-label"},e.label))})),_react2.default.createElement("div",{className:"menu"},r)}}]),t}(_react2.default.Component);module.exports=Menu;

},{"react":175}],186:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var u,s=e[Symbol.iterator]();!(n=(u=s.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var i=e,o=t,u=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var a=s.get;if(void 0===a)return;return a.call(u)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,r=u,n=!0,s=l=void 0}},_q=require("q"),_q2=_interopRequireDefault(_q),_AbstractFile2=require("./AbstractFile"),_AbstractFile3=_interopRequireDefault(_AbstractFile2),RemoteFile=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e,this.fileLength=-1,this.chunks=[],this.numNetworkRequests=0}return _inherits(t,e),_createClass(t,[{key:"getBytes",value:function(e,t){if(t<0)return _q2.default.reject("Requested <0 bytes ("+t+") from "+this.url);var r=e+t-1;this.fileLength!=-1&&(r=Math.min(this.fileLength-1,r));var n=this.getFromCache(e,r);return n?_q2.default.when(n):this.getFromNetwork(e,r)}},{key:"getAll",value:function(){var e=this;if(this.fileLength!=-1){var t=this.getFromCache(0,this.fileLength-1);if(t)return _q2.default.when(t)}var r=new XMLHttpRequest;return r.open("GET",this.url),r.responseType="arraybuffer",this.promiseXHR(r).then(function(t){var r=_slicedToArray(t,1),n=r[0];return e.fileLength=n.byteLength,e.chunks=[{start:0,stop:e.fileLength-1,buffer:n}],n})}},{key:"getAllString",value:function(){var e=new XMLHttpRequest;return e.open("GET",this.url),this.promiseXHR(e).then(function(e){var t=_slicedToArray(e,1),r=t[0];return r})}},{key:"getSize",value:function(){if(this.fileLength!=-1)return _q2.default.when(this.fileLength);var e=new XMLHttpRequest;return e.open("HEAD",this.url),this.promiseXHR(e).then(function(){var t=e.getResponseHeader("Content-Length");if(null!==t)return Number(t);throw"Remote resource has unknown length"})}},{key:"getFromCache",value:function(e,t){for(var r=0;r<this.chunks.length;r++){var n=this.chunks[r];if(n.start<=e&&n.stop>=t)return n.buffer.slice(e-n.start,t-n.start+1)}return null}},{key:"getFromNetwork",value:function(e,t){var r=this,n=t-e+1;if(n>5e7)throw"Monster request: Won't fetch "+n+" bytes from "+this.url;var i=new XMLHttpRequest;return i.open("GET",this.url),i.responseType="arraybuffer",i.setRequestHeader("Range","bytes="+e+"-"+t),this.promiseXHR(i).then(function(t){var n=_slicedToArray(t,1),o=n[0],u={start:e,stop:e+o.byteLength-1,buffer:o};r.chunks.push(u);var s=r._getLengthFromContentRange(i);return null!==s&&void 0!==s&&(r.fileLength!=-1&&r.fileLength!=s?console.warn("Size of remote file "+r.url+" changed from "+(r.fileLength+" to "+s)):r.fileLength=s),o})}},{key:"promiseXHR",value:function(e){var t=this.url,r=_q2.default.defer();return e.addEventListener("load",function(e){this.status>=400?r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText):r.resolve([this.response,e])}),e.addEventListener("error",function(e){r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText)}),this.numNetworkRequests++,e.send(),r.promise}},{key:"_getLengthFromContentRange",value:function(e){if(!/Content-Range/i.exec(e.getAllResponseHeaders()))return null;var t=e.getResponseHeader("Content-Range"),r=/\/(\d+)$/.exec(t);return r?Number(r[1]):(console.warn("Received improper Content-Range value for "+(this.url+": "+t)),null)}},{key:"clearCache",value:function(){this.chunks=[]}}]),t}(_AbstractFile3.default);module.exports=RemoteFile;

},{"./AbstractFile":179,"q":47}],187:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_get=function(e,t,n){for(var a=!0;a;){var r=e,i=t,o=n;a=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,n=o,a=!0,s=c=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_Controls=require("./Controls"),_Controls2=_interopRequireDefault(_Controls),_Menu=require("./Menu"),_Menu2=_interopRequireDefault(_Menu),_VisualizationWrapper=require("./VisualizationWrapper"),_VisualizationWrapper2=_interopRequireDefault(_VisualizationWrapper),Root=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={contigList:this.props.referenceSource.contigList(),range:null,settingsMenuKey:null}}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=this;this.props.referenceSource.on("contigs",function(){e.setState({contigList:e.props.referenceSource.contigList()})}),this.state.range||this.handleRangeChange(this.props.initialRange),this.setState({contigList:this.props.referenceSource.contigList()})}},{key:"handleRangeChange",value:function(e){var t=this;e.start<0&&(e.start=0),this.props.referenceSource.normalizeRange(e).then(function(e){t.setState({range:e}),t.props.tracks.forEach(function(t){t.source.rangeChanged(e)})}).done()}},{key:"toggleSettingsMenu",value:function(e,t){this.state.settingsMenuKey==e?this.setState({settingsMenuKey:null}):this.setState({settingsMenuKey:e})}},{key:"handleSelectOption",value:function(e,t){this.setState({settingsMenuKey:null});var n=this.props.tracks[Number(e)].visualization,a=n.options,r=n.component.handleSelectOption(t,a);n.options=r,r!=a&&this.forceUpdate()}},{key:"makeDivForTrack",value:function(e,t){var n=_react2.default.createElement(_VisualizationWrapper2.default,{visualization:t.visualization,range:this.state.range,onRangeChange:this.handleRangeChange.bind(this),source:t.source,referenceSource:this.props.referenceSource}),a=t.track.name||"(track name)",r=null,i=null;if(t.visualization.component.getOptionsMenu&&(r=_react2.default.createElement("span",{ref:"gear-"+e,className:"gear",onClick:this.toggleSettingsMenu.bind(this,e)},"")),this.state.settingsMenuKey==e){var o=this.refs["gear-"+e],s=o.offsetLeft,l=o.offsetWidth,c=o.offsetTop,u={position:"absolute",left:s+l+"px",top:c+"px"},p=t.visualization.component.getOptionsMenu(t.visualization.options);i=_react2.default.createElement("div",{className:"menu-container",style:u},_react2.default.createElement(_Menu2.default,{header:a,items:p,onSelect:this.handleSelectOption.bind(this,e)}))}var f=["track",t.visualization.component.displayName||"",t.track.cssClass||""].join(" ");return _react2.default.createElement("div",{key:e,className:f},_react2.default.createElement("div",{className:"track-label"},_react2.default.createElement("span",null,a),_react2.default.createElement("br",null),r,i),_react2.default.createElement("div",{className:"track-content"},n))}},{key:"render",value:function(){var e=this,t=this.props.tracks.map(function(t,n){return e.makeDivForTrack(""+n,t)});return _react2.default.createElement("div",{className:"pileup-root"},_react2.default.createElement("div",{className:"track controls"},_react2.default.createElement("div",{className:"track-label"},""),_react2.default.createElement("div",{className:"track-content"},_react2.default.createElement(_Controls2.default,{contigList:this.state.contigList,range:this.state.range,onChange:this.handleRangeChange.bind(this)}))),t)}}]),t}(_react2.default.Component);Root.displayName="Root",module.exports=Root;

},{"./Controls":181,"./Menu":185,"./VisualizationWrapper":189,"react":175}],188:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_utils=require("./utils"),CHUNK_SIZE=1e3,SequenceStore=function(){function t(){_classCallCheck(this,t),this.contigMap={}}return _createClass(t,[{key:"setRange",value:function(t,e){if(0!==t.length()){if(t.length()!=e.length)throw"setRange length mismatch";var n=this._getSequences(t.contig);n||(n=this.contigMap[t.contig]={});var r=!0,u=!1,a=void 0;try{for(var i,o=this._chunkForInterval(t.interval)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value,s=l.chunkStart+l.offset-t.start();this._setChunk(n,l,e.slice(s,s+l.length))}}catch(t){u=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(u)throw a}}}}},{key:"getAsString",value:function(t){var e=this._getSequences(t.contig);if(!e)return".".repeat(t.length());var n=this._chunkForInterval(t.interval),r="",u=!0,a=!1,i=void 0;try{for(var o,l=n[Symbol.iterator]();!(u=(o=l.next()).done);u=!0){var s=o.value,c=e[s.chunkStart];r+=c?0===s.offset&&s.length==c.length?c:c.slice(s.offset,s.offset+s.length):".".repeat(s.length)}}catch(t){a=!0,i=t}finally{try{!u&&l.return&&l.return()}finally{if(a)throw i}}return r}},{key:"getAsObjects",value:function(t){return _underscore2.default.object(_underscore2.default.map(this.getAsString(t),function(e,n){return[t.contig+":"+(t.start()+n),"."==e?null:e]}))}},{key:"_getChunk",value:function(t,e){return t[e]||".".repeat(CHUNK_SIZE)}},{key:"_chunkForInterval",value:function(t){var e=t.start%CHUNK_SIZE,n=t.start-e,r=[{chunkStart:n,offset:e,length:Math.min(CHUNK_SIZE-e,t.length())}];for(n+=CHUNK_SIZE;n<=t.stop;n+=CHUNK_SIZE)r.push({chunkStart:n,offset:0,length:Math.min(CHUNK_SIZE,t.stop-n+1)});return r}},{key:"_setChunk",value:function(t,e,n){if(0===e.offset&&n.length==CHUNK_SIZE)return void(t[e.chunkStart]=n);var r=this._getChunk(t,e.chunkStart);t[e.chunkStart]=r.slice(0,e.offset)+n+r.slice(e.offset+n.length)}},{key:"_getSequences",value:function(t){return this.contigMap[t]||this.contigMap[(0,_utils.altContigName)(t)]||null}}]),t}();module.exports=SequenceStore;

},{"./utils":211,"underscore":177}],189:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_get=function(e,t,r){for(var i=!0;i;){var n=e,a=t,o=r;i=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=a,r=o,i=!0,s=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_vizD3utils=require("./viz/d3utils"),_vizD3utils2=_interopRequireDefault(_vizD3utils),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_libMinid3=require("../lib/minid3"),_libMinid32=_interopRequireDefault(_libMinid3),VisualizationWrapper=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.hasDragBeenInitialized=!1,this.state={width:0,height:0}}return _inherits(t,e),_createClass(t,[{key:"updateSize",value:function(){var e=_reactDom2.default.findDOMNode(this).parentNode;this.setState({width:e.offsetWidth,height:e.offsetHeight})}},{key:"componentDidMount",value:function(){var e=this;this.onResizeListener=function(){return e.updateSize()},window.addEventListener("resize",this.onResizeListener),this.updateSize(),this.props.range&&!this.hasDragBeenInitialized&&this.addDragInterface()}},{key:"componentDidUpdate",value:function(){this.props.range&&!this.hasDragBeenInitialized&&this.addDragInterface()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResizeListener)}},{key:"getScale",value:function(){return this.props.range?_vizD3utils2.default.getTrackScale(this.props.range,this.state.width):function(e){return e}}},{key:"addDragInterface",value:function(){function e(){s()}var t=this;this.hasDragBeenInitialized=!0;var r,i,n=_reactDom2.default.findDOMNode(this),a=0,o=function(){_libMinid32.default.event.sourceEvent.stopPropagation(),a=0,r=_underscore2.default.clone(t.props.range),i=t.getScale()},s=function(){if(i&&r){var e=i.invert(-a),n=Math.round(e),o=i(e)-i(n),s={contig:r.contig,start:n,stop:n+(r.stop-r.start),offsetPx:o};t.props.onRangeChange(s)}},u=function(){a+=_libMinid32.default.event.dx,s()},l=_libMinid32.default.behavior.drag().on("dragstart",o).on("drag",u).on("dragend",e);_libMinid32.default.select(n).call(l).on("click",this.handleClick.bind(this))}},{key:"handleClick",value:function(){_libMinid32.default.event.defaultPrevented&&_libMinid32.default.event.stopPropagation()}},{key:"render",value:function(){var e=this.props.range,t=this.props.visualization.component;if(!e)return _react2.default.createElement(EmptyTrack,{className:t.displayName});var r=_react2.default.createElement(t,{range:e,source:this.props.source,referenceSource:this.props.referenceSource,width:this.state.width,height:this.state.height,options:this.props.visualization.options});return _react2.default.createElement("div",{className:"drag-wrapper"},r)}}]),t}(_react2.default.Component);VisualizationWrapper.displayName="VisualizationWrapper";var EmptyTrack=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props.className+" empty";return _react2.default.createElement("div",{className:e})}}]),t}(_react2.default.Component);module.exports=VisualizationWrapper;

},{"../lib/minid3":178,"./viz/d3utils":224,"react":175,"react-dom":48,"underscore":177}],190:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function parseHeader(e){return new _jbinary2.default(e,_formatsBbi2.default.TYPE_SET).read("Header")}function parseCirTree(e){return new _jbinary2.default(e,_formatsBbi2.default.TYPE_SET).read("CirTree")}function generateContigMap(e){var t=e.chromosomeTree.nodes.contents;if(!t)throw"Invalid chromosome tree";return _underscore2.default.object(t.map(function(e){var t=e.id,r=e.key;return[r.replace(/\0.*/,""),t]}))}function reverseContigMap(e){var t=[];return _underscore2.default.each(e,function(e,r){t[e]=r}),t}function extractFeaturesFromBlock(e,t,r,n){var a=r.offset-t.start,i=a+r.size,o=e.slice(a+(n?2:0),i),u=n?_pakoLibInflate2.default.inflateRaw(new Uint8Array(o)):o,s=new _jbinary2.default(u,_formatsBbi2.default.TYPE_SET);return s.read("BedBlock")}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_pakoLibInflate=require("pako/lib/inflate"),_pakoLibInflate2=_interopRequireDefault(_pakoLibInflate),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_formatsBbi=require("./formats/bbi"),_formatsBbi2=_interopRequireDefault(_formatsBbi),ImmediateBigBed=function(){function e(t,r,n,a){_classCallCheck(this,e),this.remoteFile=t,this.header=r,this.cirTree=n,this.contigMap=a,this.chrIdToContig=reverseContigMap(a)}return _createClass(e,[{key:"getContigId",value:function(e){if(e in this.contigMap)return this.contigMap[e];var t="chr"+e;if(t in this.contigMap)return this.contigMap[t];throw"Invalid contig "+e}},{key:"getChrIdInterval",value:function(e){return new _ContigInterval2.default(this.getContigId(e.contig),e.start(),e.stop())}},{key:"getContigInterval",value:function(e){return new _ContigInterval2.default(this.chrIdToContig[e.contig],e.start(),e.stop())}},{key:"attachContigToBedRows",value:function(e){var t=this;return e.map(function(e){return{contig:t.chrIdToContig[e.chrId],start:e.start,stop:e.stop,rest:e.rest}})}},{key:"findOverlappingBlocks",value:function(e){var t=[],r=[[e.contig,e.start()],[e.contig,e.stop()]],n=function e(n){if(n.contents)n.contents.forEach(e);else{var a=[[n.startChromIx,n.startBase],[n.endChromIx,n.endBase]];_utils2.default.tupleRangeOverlaps(a,r)&&t.push(n)}};return n(this.cirTree.blocks),t}},{key:"fetchFeaturesByBlock",value:function(e){var t=this.findOverlappingBlocks(e);if(0===t.length)return _q2.default.when([]);var r=_Interval2.default.boundingInterval(t.map(function(e){return new _Interval2.default(+e.offset,e.offset+e.size)})),n=this.header.uncompressBufSize>0;return this.remoteFile.getBytes(r.start,r.length()).then(function(e){return t.map(function(t){var a=extractFeaturesFromBlock(e,r,t,n);if(t.startChromIx!=t.endChromIx)throw"Can't handle blocks which span chromosomes!";return{range:new _ContigInterval2.default(t.startChromIx,t.startBase,t.endBase),rows:a}})})}},{key:"fetchFeatures",value:function(e){var t=this;return this.fetchFeaturesByBlock(e).then(function(r){var n=_underscore2.default.flatten(r.map(function(e){return e.rows}));return n=n.filter(function(t){var r=new _ContigInterval2.default(t.chrId,t.start,t.stop-1);return e.intersects(r)}),t.attachContigToBedRows(n)})}},{key:"getFeaturesInRange",value:function(e){return this.fetchFeatures(this.getChrIdInterval(e))}},{key:"getFeatureBlocksOverlapping",value:function(e){var t=this,r=this.getChrIdInterval(e);return this.fetchFeaturesByBlock(r).then(function(e){return e.map(function(e){return{range:t.getContigInterval(e.range),rows:t.attachContigToBedRows(e.rows)}})})}}]),e}(),BigBed=function(){function e(t){var r=this;_classCallCheck(this,e),this.remoteFile=new _RemoteFile2.default(t),this.header=this.remoteFile.getBytes(0,65536).then(parseHeader),this.contigMap=this.header.then(generateContigMap),this.cirTree=this.header.then(function(e){var t=e.unzoomedIndexOffset,n=e.zoomHeaders[0],a=n?n.dataOffset-t:4096;return r.remoteFile.getBytes(t,a).then(parseCirTree)}),this.immediate=_q2.default.all([this.header,this.cirTree,this.contigMap]).then(function(e){var t=_slicedToArray(e,3),n=t[0],a=t[1],i=t[2],o=i;return new ImmediateBigBed(r.remoteFile,n,a,o)}),this.immediate.done()}return _createClass(e,[{key:"getFeaturesInRange",value:function(e,t,r){var n=new _ContigInterval2.default(e,t,r);return this.immediate.then(function(e){return e.getFeaturesInRange(n)})}},{key:"getFeatureBlocksOverlapping",value:function(e){return this.immediate.then(function(t){return t.getFeatureBlocksOverlapping(e)})}}]),e}();module.exports=BigBed;

},{"../ContigInterval":180,"../Interval":183,"../RemoteFile":186,"../utils":211,"./formats/bbi":198,"jbinary":32,"pako/lib/inflate":34,"q":47,"underscore":177}],191:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function strandFlagToString(e){return e?"-":"+"}function makeCigarString(e){return e.map(function(e){var t=e.op,r=e.length;return r+t}).join("")}function makeAsciiPhred(e){return 0===e.length?"":_underscore2.default.every(e,function(e){return 255==e})?"*":e.map(function(e){return String.fromCharCode(33+e)}).join("")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),CIGAR_OPS=["M","I","D","N","S","H","P","=","X"],SEQUENCE_VALUES=["=","A","C","M","G","R","S","V","T","W","Y","H","K","D","B","N"],SamRead=function(){function e(t,r,n){_classCallCheck(this,e),this.buffer=t,this.offset=r;var i=this._getJDataView();this.refID=i.getInt32(0),this.ref=n,this.pos=i.getInt32(4),this.l_seq=i.getInt32(16),this.cigarOps=this._getCigarOps(),this.name=this._getName()}return _createClass(e,[{key:"toString",value:function(){var e=this.pos+this.l_seq;return this.ref+":"+(1+this.pos)+"-"+e}},{key:"_getJDataView",value:function(){var e=this.buffer;return new _jdataview2.default(e,0,e.byteLength,!0)}},{key:"getKey",value:function(){return this.offset.toString()}},{key:"_getName",value:function(){var e=this._getJDataView(),t=e.getUint8(8);return e.seek(32),e.getString(t-1)}},{key:"getFlag",value:function(){return this._getJDataView().getUint16(14)}},{key:"getInferredInsertSize",value:function(){return this._getJDataView().getUint16(28)}},{key:"getStrand",value:function(){return strandFlagToString(this.getFlag()&_formatsBamTypes2.default.Flags.READ_STRAND)}},{key:"getFull",value:function(){if(this._full)return this._full;var e=new _jbinary2.default(this.buffer,_formatsBamTypes2.default.TYPE_SET),t=e.read(_formatsBamTypes2.default.ThickAlignment,0);return this._full=t,t}},{key:"getInterval",value:function(){if(this._interval)return this._interval;var e=new _ContigInterval2.default(this.ref,this.pos,this.pos+this.getReferenceLength()-1);return e}},{key:"intersects",value:function(e){return e.intersects(this.getInterval())}},{key:"_getCigarOps",value:function(){for(var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=32+t,i=new Array(r),a=0;a<r;a++){var u=e.getUint32(n+4*a);i[a]={op:CIGAR_OPS[15&u],length:u>>4}}return i}},{key:"getQualityScores",value:function(){var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=e.getInt32(16),i=32+t+4*r+Math.ceil(n/2);return e.getBytes(n,i,!0,!0)}},{key:"getCigarString",value:function(){return makeCigarString(this.getFull().cigar)}},{key:"getQualPhred",value:function(){return makeAsciiPhred(this.getQualityScores())}},{key:"getSequence",value:function(){if(this._seq)return this._seq;for(var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=e.getInt32(16),i=32+t+4*r,a=new Array(n),u=Math.ceil(n/2),s=0;s<u;s++){var g=e.getUint8(i+s);a[2*s]=SEQUENCE_VALUES[g>>4],2*s+1<n&&(a[2*s+1]=SEQUENCE_VALUES[15&g])}var l=a.join("");return this._seq=l,l}},{key:"getReferenceLength",value:function(){return e.referenceLengthFromOps(this.cigarOps)}},{key:"getMateProperties",value:function(){var e=this._getJDataView(),t=e.getUint16(14);if(!(t&_formatsBamTypes2.default.Flags.READ_PAIRED))return null;var r=e.getInt32(20),n=e.getInt32(24),i=strandFlagToString(t&_formatsBamTypes2.default.Flags.MATE_STRAND);return{ref:r==this.refID?this.ref:null,pos:n,strand:i}}},{key:"debugString",value:function(){var e=this.getFull();return"Name: "+this.name+"\nFLAG: "+this.getFlag()+"\nPosition: "+this.getInterval()+"\nCIGAR: "+this.getCigarString()+"\nSequence: "+e.seq+"\nQuality:  "+this.getQualPhred()+"\nTags: "+JSON.stringify(e.auxiliary,null,"  ")+"\n    "}}],[{key:"referenceLengthFromOps",value:function(e){var t=0;return e.forEach(function(e){var r=e.op,n=e.length;switch(r){case"M":case"D":case"N":case"=":case"X":t+=n}}),t}}]),e}();module.exports=SamRead;

},{"../ContigInterval":180,"./formats/bamTypes":197,"jbinary":32,"jdataview":33,"underscore":177}],192:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function parseSequenceRecord(e,r){var t=new _jbinary2.default(e,_formatsTwoBitTypes2.default.TYPE_SET),n=t.read("SequenceRecord"),o=t.tell()+8*n.maskBlockCount+4;return{numBases:n.dnaSize,unknownBlockStarts:n.nBlockStarts,unknownBlockLengths:n.nBlockSizes,numMaskBlocks:n.maskBlockCount,maskBlockStarts:[],maskBlockLengths:[],dnaOffsetFromHeader:o,offset:r}}function parseHeader(e){var r=new _jbinary2.default(e,_formatsTwoBitTypes2.default.TYPE_SET),t=r.read("Header");return{sequenceCount:t.sequenceCount,sequences:t.sequences}}function unpackDNA(e,r,t){var n=[];n.length=4*e.byteLength;for(var o=-r,a=0;a<e.byteLength;a++)for(var u=e.getUint8(a),i=6;i>=0;i-=2){var s=BASE_PAIRS[u>>i&3];r>=0&&(n[o]=s),o++}return n.length=t,n}function markUnknownDNA(e,r,t){for(var n=r+e.length-1,o=0;o<t.unknownBlockStarts.length;o++){var a=t.unknownBlockStarts[o],u=t.unknownBlockLengths[o],i=a+u-1,s=Math.max(a,r),c=Math.min(i,n);if(!(c<s))for(var f=s;f<=c;f++)e[f-r]="N"}return e}function IncompleteChunkError(e){this.name="IncompleteChunkError",this.message=e||""}function parseWithException(e){try{return e()}catch(e){throw"RangeError"==e.name||"INDEX_SIZE_ERR"==e.name?(console.log("Error name: "+e.name),new IncompleteChunkError(e)):e}}function retryRemoteGet(e,r,t,n,o){return e.getBytes(r,t).then(o).catch(function(a){if("IncompleteChunkError"==a.name){if(t>n)throw"Couldn't parse the header "+("from the first "+t+" bytes of the file. ")+"Corrupted 2bit file?";return retryRemoteGet(e,r,2*t,n,o)}throw a})}var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_formatsTwoBitTypes=require("./formats/twoBitTypes"),_formatsTwoBitTypes2=_interopRequireDefault(_formatsTwoBitTypes),BASE_PAIRS=["T","C","A","G"],FIRST_HEADER_CHUNKSIZE=16384,FIRST_SEQUENCE_CHUNKSIZE=4095,MAX_CHUNKSIZE=1048576;IncompleteChunkError.prototype=Error.prototype;var TwoBit=function(){function e(r){_classCallCheck(this,e),this.remoteFile=r;var t=_q2.default.defer();this.header=t.promise,retryRemoteGet(this.remoteFile,0,FIRST_HEADER_CHUNKSIZE,MAX_CHUNKSIZE,function(e){var r=parseWithException(function(){return parseHeader(e)});t.resolve(r)}).done()}return _createClass(e,[{key:"getFeaturesInRange",value:function(e,r,t){var n=this;if(r>t)throw"Requested a 2bit range with start > stop ("+r+", "+t+")";return this._getSequenceHeader(e).then(function(e){var o=e.offset+e.dnaOffsetFromHeader,a=Math.floor(o+r/4),u=Math.ceil((t-r+1)/4)+1;return n.remoteFile.getBytes(a,u).then(function(n){var o=new DataView(n);return markUnknownDNA(unpackDNA(o,r%4,t-r+1),r,e).join("")})})}},{key:"getContigList",value:function(){return this.header.then(function(e){return e.sequences.map(function(e){return e.name})})}},{key:"_getSequenceHeader",value:function(e){var r=this;return this.header.then(function(t){var n=_underscore2.default.findWhere(t.sequences,{name:e})||_underscore2.default.findWhere(t.sequences,{name:"chr"+e});if(null===n||void 0===n)throw"Invalid contig: "+e;var o=n;return retryRemoteGet(r.remoteFile,o.offset,FIRST_SEQUENCE_CHUNKSIZE,MAX_CHUNKSIZE,function(e){return parseWithException(function(){return parseSequenceRecord(e,o.offset)})})})}}]),e}();module.exports=TwoBit;

},{"./formats/twoBitTypes":200,"jbinary":32,"q":47,"underscore":177}],193:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var f=0;f<e.length;f++){var s=e[f];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,f,s){return f&&t(e.prototype,f),s&&t(e,s),e}}(),VirtualOffset=function(){function t(e,f){_classCallCheck(this,t),this.coffset=e,this.uoffset=f}return _createClass(t,[{key:"toString",value:function(){return this.coffset+":"+this.uoffset}},{key:"isLessThan",value:function(t){return this.coffset<t.coffset||this.coffset==t.coffset&&this.uoffset<t.uoffset}},{key:"isLessThanOrEqual",value:function(t){return this.coffset<=t.coffset||this.coffset==t.coffset&&this.uoffset<=t.uoffset}},{key:"isEqual",value:function(t){return this.coffset==t.coffset&&this.uoffset==t.uoffset}},{key:"compareTo",value:function(t){return this.coffset-t.coffset||this.uoffset-t.uoffset}},{key:"clone",value:function(){return new t(this.coffset,this.uoffset)}}],[{key:"fromBlob",value:function(e,f){f=f||0;var s=e[f]+256*e[f+1],o=e[f+2]+256*e[f+3]+65536*e[f+4]+16777216*e[f+5]+4294967296*e[f+6]+1099511627776*e[f+7];return new t(o,s)}}]),t}();module.exports=VirtualOffset;

},{}],194:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function computeIndexChunks(e){var n=65536,t=new _jdataview2.default(e,0,e.byteLength,!0),r=1/0,i=[];t.getInt32();for(var u=t.getInt32(),a=0;a<u;a++){i.push(t.tell());for(var s=t.getInt32(),o=0;o<s;o++){t.getUint32();var h=t.getInt32();t.skip(16*h)}var l=t.getInt32();if(l){var f=_VirtualOffset2.default.fromBlob(t.getBytes(8),0),c=f.coffset+(f.uoffset?n:0);r=c?Math.min(c,r):n,t.skip(8*(l-1))}}return i.push(t.tell()),{chunks:_underscore2.default.zip(_underscore2.default.initial(i),_underscore2.default.rest(i)),minBlockIndex:r}}function readChunks(e){return new _jbinary2.default(e,_formatsBamTypes2.default.TYPE_SET).read("ChunksArray")}function readIntervals(e){for(var n=new Array(Math.floor(e.length/8)),t=0;t<e.length-7;t+=8)n[t>>3]=_VirtualOffset2.default.fromBlob(e,t);return n}function doChunksOverlap(e,n){return e.chunk_beg.isLessThanOrEqual(n.chunk_end)&&n.chunk_beg.isLessThanOrEqual(e.chunk_end)}function areChunksAdjacent(e,n){return e.chunk_beg.isEqual(n.chunk_end)||e.chunk_end.isEqual(n.chunk_beg)}function optimizeChunkList(e,n){e.sort(function(e,n){var t=e.chunk_beg.compareTo(n.chunk_beg);return 0===t&&(t=e.chunk_end.compareTo(n.chunk_end)),t});var t=[];return e.forEach(function(e){if(!e.chunk_end.isLessThan(n)){if(0===t.length)return void t.push(e);var r=t[t.length-1];doChunksOverlap(r,e)||areChunksAdjacent(r,e)?r.chunk_end.isLessThan(e.chunk_end)&&(r.chunk_end=e.chunk_end):t.push(e)}}),t}function reg2bins(e,n){var t,r=[];for(--n,r.push(0),t=1+(e>>26);t<=1+(n>>26);++t)r.push(t);for(t=9+(e>>23);t<=9+(n>>23);++t)r.push(t);for(t=73+(e>>20);t<=73+(n>>20);++t)r.push(t);for(t=585+(e>>17);t<=585+(n>>17);++t)r.push(t);for(t=4681+(e>>14);t<=4681+(n>>14);++t)r.push(t);return r}var _slicedToArray=function(){function e(e,n){var t=[],r=!0,i=!1,u=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){i=!0,u=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw u}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_VirtualOffset=require("./VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),ImmediateBaiFile=function(){function e(n,t,r){if(_classCallCheck(this,e),this.buffer=n,this.remoteFile=t,n)this.indexChunks=computeIndexChunks(n);else{if(!r)throw"Without index chunks, the entire BAI buffer must be loaded";this.indexChunks=r}this.indexCache=new Array(this.indexChunks.chunks.length),this.intervalsCache=new Array(this.indexChunks.chunks.length)}return _createClass(e,[{key:"getChunksForInterval",value:function(e){var n=this;if(e.contig<0||e.contig>this.indexChunks.chunks.length)return _q2.default.reject("Invalid contig "+e.contig);var t=reg2bins(e.start(),e.stop()+1);return this.indexForContig(e.contig).then(function(r){var i=_underscore2.default.chain(r.bins).filter(function(e){return t.indexOf(e.bin)>=0}).map(function(e){return readChunks(e.chunks)}).flatten().value(),u=n.getIntervals(r.intervals,e.contig),a=Math.max(0,Math.floor(e.start()/16384)),s=u[a];return i=optimizeChunkList(i,s)})}},{key:"indexForContig",value:function(e){var n=this.indexCache[e];if(n)return n;var t=_slicedToArray(this.indexChunks.chunks[e],2),r=t[0],i=t[1];return this.indexCache[e]=this.getSlice(r,i).then(function(e){var n=new _jbinary2.default(e,_formatsBamTypes2.default.TYPE_SET);return n.read("BaiIndex")}),this.indexCache[e]}},{key:"getSlice",value:function(e,n){return this.buffer?_q2.default.when(this.buffer.slice(e,n)):this.remoteFile.getBytes(e,n-e+1)}},{key:"getIntervals",value:function(e,n){var t=this.intervalsCache[n];return t?t:(t=readIntervals(e),this.intervalsCache[n]=t,t)}}]),e}(),BaiFile=function(){function e(n,t){_classCallCheck(this,e),this.remoteFile=n,t?this.immediate=_q2.default.when(new ImmediateBaiFile(null,n,t)):this.immediate=n.getAll().then(function(e){return new ImmediateBaiFile(e,n,t)}),this.immediate.done()}return _createClass(e,[{key:"getChunksForInterval",value:function(e){return this.immediate.then(function(n){return n.getChunksForInterval(e)})}},{key:"getHeaderSize",value:function(){return this.immediate.then(function(e){return e.indexChunks.minBlockIndex})}}]),e}();module.exports=BaiFile;

},{"./VirtualOffset":193,"./formats/bamTypes":197,"jbinary":32,"jdataview":33,"q":47,"underscore":177}],195:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function isAlignmentInRange(e,t,n){var r=new _ContigInterval2.default(e.refID,e.pos,e.pos+e.l_seq-1);return n?t.containsInterval(r):r.intersects(t)}function readAlignment(e,t,n,r){var a=e.getInt32(t);if(t+=4,t+a>e.byteLength)return null;var i=e.buffer.slice(t,t+a),u=new _SamRead2.default(i,n.clone(),r);return{read:u,readLength:4+a}}function readAlignmentsToEnd(e,t,n,r,a,i,u){var f=new _jdataview2.default(e,0,e.byteLength,!0),l=!1,s=0;a=a.clone();var o=0;try{for(;s<e.byteLength;){var d=readAlignment(f,s,a,t);if(!d)break;var c=d.read,h=d.readLength;s+=h,isAlignmentInRange(c,n,r)&&u.push(c),a.uoffset+=h;var _=i[o].buffer.byteLength;a.uoffset>=_&&(a.uoffset-=_,a.coffset+=i[o].compressedLength,o++);var g=new _ContigInterval2.default(c.refID,c.pos,c.pos+1);if(g.contig>n.contig||g.contig==n.contig&&g.start()>n.stop()){l=!0;break}}}catch(e){if(!(e instanceof RangeError))throw e}return{shouldAbort:l,nextOffset:a}}function fetchAlignments(e,t,n,r,a){function i(a){if(0===a.length)return void l.resolve(f);var s=a[0],o=s.chunk_beg.coffset,d=s.chunk_end.coffset,c=Math.min(kMaxFetch,d+65536-o);e.getBytes(o,c).then(function(c){u++,l.notify({numRequests:u});var h={filename:e.url,initialOffset:o},_=_utils2.default.inflateConcatenatedGzip(c,d-o,h),g=_[_.length-1],m=o+g.offset-1,v=null;_.length>1&&m<d&&(v={chunk_beg:new _VirtualOffset2.default(m+1,0),chunk_end:s.chunk_end});var p=_.map(function(e){return e.buffer});p[0]=p[0].slice(s.chunk_beg.uoffset);var b=_utils2.default.concatArrayBuffers(p);if(b.byteLength>0){var y=readAlignmentsToEnd(b,t,n,r,s.chunk_beg,_,f),q=y.shouldAbort,w=y.nextOffset;if(q)return void l.resolve(f);v&&(v.chunk_beg=w)}else v=null;i((v?[v]:[]).concat(_underscore2.default.rest(a)))})}var u=0,f=[],l=_q2.default.defer();return i(a),l.promise}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_bai=require("./bai"),_bai2=_interopRequireDefault(_bai),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_VirtualOffset=require("./VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),_SamRead=require("./SamRead"),_SamRead2=_interopRequireDefault(_SamRead),kMaxFetch=131072,Bam=function(){function e(t,n,r){var a=this;_classCallCheck(this,e),this.remoteFile=t,this.index=n?new _bai2.default(n,r):null,this.hasIndexChunks=!!r;var i=this.index?this.index.getHeaderSize():_q2.default.when(131070);this.header=i.then(function(e){var t=_q2.default.defer();return _q2.default.when().then(function(){t.notify({status:"Fetching BAM header"})}),_utils2.default.pipePromise(t,a.remoteFile.getBytes(0,e).then(function(e){var t=_utils2.default.inflateGzip(e),n=new _jbinary2.default(t,_formatsBamTypes2.default.TYPE_SET);return n.read("BamHeader")})),t.promise}),this.header.done()}return _createClass(e,[{key:"readAll",value:function(){return this.remoteFile.getAll().then(function(e){var t=_utils2.default.inflateGzip(e),n=new _jbinary2.default(t,_formatsBamTypes2.default.TYPE_SET),r=n.read("BamFile"),a=new _VirtualOffset2.default(0,0),i=function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength-1)};return r.alignments=r.alignments.map(function(e){var t=new _SamRead2.default(i(e.contents),a,"");return t.refID!=-1&&(t.ref=r.header.references[t.refID].name),t}),r})}},{key:"readAtOffset",value:function(e){var t=this;return this.remoteFile.getBytes(e.coffset,kMaxFetch).then(function(n){var r=_utils2.default.inflateGzip(n),a=new _jdataview2.default(r,0,r.byteLength,!0),i=readAlignment(a,e.uoffset,e,"");if(i){var u=i.read;return t.header.then(function(e){return u.ref=e.references[u.refID].name,u})}throw"Unable to read alignment at "+e+" in "+t.remoteFile.url})}},{key:"getContigIndex",value:function(e){return this.header.then(function(t){for(var n=0;n<t.references.length;n++){var r=t.references[n].name;if(r==e||r=="chr"+e||"chr"+r==e)return{idx:n,name:r}}throw"Invalid contig name: "+e})}},{key:"getAlignmentsInRange",value:function(e,t){var n=this,r=t||!1;if(!this.index)throw"Range searches are only supported on BAMs with BAI indices.";var a=this.index;return this.getContigIndex(e.contig).then(function(t){var i=t.idx,u=t.name,f=_q2.default.defer();_q2.default.when().then(function(){f.notify({status:"Fetching BAM index"})});var l=new _ContigInterval2.default(i,e.start(),e.stop());return _utils2.default.pipePromise(f,a.getChunksForInterval(l).then(function(e){return fetchAlignments(n.remoteFile,u,l,r,e)})),f.promise})}}]),e}();module.exports=Bam;

},{"../ContigInterval":180,"../utils":211,"./SamRead":191,"./VirtualOffset":193,"./bai":194,"./formats/bamTypes":197,"jbinary":32,"jdataview":33,"q":47,"underscore":177}],196:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function splitCodingExons(t,e){return _underscore2.default.flatten(t.map(function(t){if(t.containsInterval(e))return[new CodingInterval(t.start,e.start-1,!1),new CodingInterval(e.start,e.stop,!0),new CodingInterval(e.stop+1,t.stop,!1)].filter(function(t){return t.start<=t.stop});var n=e.contains(t.start),r=e.contains(t.stop);return n==r?[new CodingInterval(t.start,t.stop,n)]:n?[new CodingInterval(t.start,e.stop,!0),new CodingInterval(e.stop+1,t.stop,!1)]:[new CodingInterval(t.start,e.start-1,!1),new CodingInterval(e.start,t.stop,!0)]}))}var _get=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=i,n=a,r=!0,s=u=void 0}},_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_Interval2=require("../Interval"),_Interval3=_interopRequireDefault(_Interval2),CodingInterval=function(t){function e(t,n,r){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n),this.isCoding=r}return _inherits(e,t),e}(_Interval3.default);module.exports={splitCodingExons:splitCodingExons,CodingInterval:CodingInterval};

},{"../Interval":183,"underscore":177}],197:[function(require,module,exports){
"use strict";function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}var _jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_VirtualOffset=require("../VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),_helpers=require("./helpers"),SEQUENCE_VALUES=["=","A","C","M","G","R","S","V","T","W","Y","H","K","D","B","N"],CIGAR_OPS=["M","I","D","N","S","H","P","=","X"],ThinAlignment={refID:"int32",pos:"int32",l_read_name:"uint8",MAPQ:"uint8",bin:"uint16",n_cigar_op:"uint16",FLAG:"uint16",l_seq:"int32",next_refID:"int32",next_pos:"int32",tlen:"int32"},Flags={READ_PAIRED:1,PROPER_PAIR:2,READ_UNMAPPED:4,MATE_UNMAPPED:8,READ_STRAND:16,MATE_STRAND:32,FIRST_OF_PAIR:64,SECOND_OF_PAIR:128,NOT_PRIMARY_ALIGNMENT:256,READ_FAILS_VENDOR_QUALITY_CHECK:512,DUPLICATE_READ:1024,SUPPLEMENTARY_ALIGNMENT:2048},ThickAlignment=_underscore2.default.extend({},ThinAlignment,{read_name:[_helpers.nullString,"l_read_name"],cigar:["array","CigarOp","n_cigar_op"],seq:["FourBitSequence","l_seq"],qual:["array","uint8","l_seq"],auxiliary:["array",{tag:["string",2],val_type:"char",value:["if",function(n){return"B"==n.val_type},{val_type:"char",num_values:"int32",values:["array","AuxiliaryValue","num_values"]},"AuxiliaryValue"]}]}),TYPE_SET={"jBinary.littleEndian":!0,BamHeader:{_magic:["const",["string",4],"BAM",!0],l_text:"int32",text:["string","l_text"],n_ref:"int32",references:["array",{l_name:"int32",name:[_helpers.nullString,"l_name"],l_ref:"int32"},"n_ref"]},BamAlignment:{block_size:"int32",contents:["blob","block_size"]},AuxiliaryValue:["if",function(n){return"A"==n.val_type},"char",["if",function(n){return"c"==n.val_type},"int8",["if",function(n){return"C"==n.val_type},"uint8",["if",function(n){return"s"==n.val_type},"int16",["if",function(n){return"S"==n.val_type},"uint16",["if",function(n){return"i"==n.val_type},"int32",["if",function(n){return"I"==n.val_type},"uint32",["if",function(n){return"f"==n.val_type},"float32",["if",function(n){return"Z"==n.val_type},"string0",["skip",0]]]]]]]]]],CigarOp:_jbinary2.default.Template({baseType:"uint32",read:function(n){var e=this.baseRead();return{length:e>>4,op:CIGAR_OPS[15&e]}}}),FourBitSequence:_jbinary2.default.Template({setParams:function(n){this.lengthField=n;var e=function(e){return Math.floor((+e[n]+1)/2)};this.baseType=["array","uint8",e]},read:function(n){var e=+n[this.lengthField],t=this.baseRead();return t.map(function(n,t){return SEQUENCE_VALUES[n>>4]+(2*t+1<e?SEQUENCE_VALUES[15&n]:"")}).join("")}}),BamFile:{header:"BamHeader",alignments:["array","BamAlignment"]},VirtualOffset:_jbinary2.default.Template({baseType:"uint64",read:function(){var n=this.baseRead();return new _VirtualOffset2.default(65536*n.hi+(n.lo>>>16),65535&n.lo)}}),ChunksArray:["array",{chunk_beg:"VirtualOffset",chunk_end:"VirtualOffset"}],IntervalsArray:["array","VirtualOffset"],BaiIndex:{n_bin:"int32",bins:["array",{bin:"uint32",n_chunk:"int32",chunks:["blob",function(n){return 16*n.n_chunk}]},"n_bin"],n_intv:"int32",intervals:["blob",function(n){return 8*n.n_intv}]},BaiFile:{magic:["const",["string",4],"BAI"],n_ref:"int32",indices:["array","BaiIndex","n_ref"],n_no_coor:_helpers.uint64native}};module.exports={TYPE_SET:TYPE_SET,ThinAlignment:ThinAlignment,ThickAlignment:ThickAlignment,Flags:Flags};

},{"../VirtualOffset":193,"./helpers":199,"jbinary":32,"underscore":177}],198:[function(require,module,exports){
"use strict";var _helpers=require("./helpers"),TYPE_SET={"jBinary.littleEndian":!0,Header:{_magic:["const","uint32",2273964779,!0],version:"uint16",zoomLevels:"uint16",chromosomeTreeOffset:"uint64",unzoomedDataOffset:"uint64",unzoomedIndexOffset:"uint64",fieldCount:"uint16",definedFieldCount:"uint16",autoSqlOffset:"uint64",totalSummaryOffset:"uint64",uncompressBufSize:"uint32",extensionOffset:"uint64",zoomHeaders:["array","ZoomHeader","zoomLevels"],totalSummary:(0,_helpers.typeAtOffset)("TotalSummary","totalSummaryOffset"),chromosomeTree:(0,_helpers.typeAtOffset)("BPlusTree","chromosomeTreeOffset")},TotalSummary:{basesCovered:"uint64",minVal:"float64",maxVal:"float64",sumData:"float64",sumSquared:"float64"},ZoomHeader:{reductionLevel:"uint32",_reserved:"uint32",dataOffset:"uint64",indexOffset:"uint64"},BPlusTree:{magic:["const","uint32",2026540177,!0],blockSize:"uint32",keySize:"uint32",valSize:"uint32",itemCount:"uint64",_reserved2:["skip",4],_reserved3:["skip",4],nodes:"BPlusTreeNode"},BPlusTreeNode:{isLeaf:"uint8",_reserved:"uint8",count:"uint16",contents:["array",["if","isLeaf",{key:["string","keySize"],id:"uint32",size:"uint32"},{key:["string","keySize"],offset:"uint64"}],"count"]},CirTree:{_magic:["const","uint32",610839776,!0],blockSize:"uint32",itemCount:"uint64",startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",fileSize:"uint64",itemsPerSlot:"uint32",_reserved:["skip",4],blocks:"CirNode"},CirNode:{isLeaf:"uint8",_reserved:"uint8",count:"uint16",contents:["array",["if","isLeaf","LeafData","NonLeafData"],"count"]},LeafData:{startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",offset:"uint64",size:"uint64"},NonLeafData:{startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",offset:"uint64"},BedEntry:{chrId:"uint32",start:"uint32",stop:"uint32",rest:"string0"},BedBlock:["array","BedEntry"]};module.exports={TYPE_SET:TYPE_SET};

},{"./helpers":199}],199:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function typeAtOffset(e,t){return _jbinary2.default.Template({baseType:e,read:function(e){return 0===+e[t]?null:this.binary.read(this.baseType,+e[t])}})}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),sizedBlock=_jbinary2.default.Type({params:["itemType","lengthField"],resolve:function(e){this.itemType=e(this.itemType)},read:function(e){var t=this.binary.tell(),i=+e[this.lengthField];return this.binary.skip(i),this.binary.slice(t,t+i).read(this.itemType)}}),nullString=_jbinary2.default.Template({setParams:function(e){this.baseType=["binary",e]},read:function(){return this.baseRead().read("string0")}}),uint64native=_jbinary2.default.Template({baseType:"uint64",read:function(){var e=this.baseRead(),t=+e;if(t<0||1+t==t)throw new RangeError("Number out of precise floating point range: "+e);return+e}}),LazyArray=function(){function e(t,i,r){_classCallCheck(this,e),this.bytesPerItem=i,this.jb=t,this.itemType=r,this.length=this.jb.view.byteLength/this.bytesPerItem}return _createClass(e,[{key:"get",value:function(e){return this.jb.seek(e*this.bytesPerItem),this.jb.read(this.itemType)}},{key:"getAll",value:function(){return this.jb.seek(0),this.jb.read(["array",this.itemType,this.length])}}]),e}(),lazyArray=_jbinary2.default.Type({params:["itemType","bytesPerItem","numItems"],read:function(){var e=this.toValue(this.numItems),t=this.toValue(this.bytesPerItem);if(void 0===e||void 0===t)throw"bytesPerItem and numItems must be set for lazyArray";var i=this.binary.tell(),r=e*t,n=this.binary.slice(i,i+r);return this.binary.skip(r),new LazyArray(n,t,this.itemType)}});module.exports={typeAtOffset:typeAtOffset,sizedBlock:sizedBlock,nullString:nullString,uint64native:uint64native,lazyArray:lazyArray};

},{"jbinary":32}],200:[function(require,module,exports){
"use strict";var TYPE_SET={"jBinary.littleEndian":!0,Header:{magic:["const","uint32",440477507,!0],version:["const","uint32",0,!0],sequenceCount:"uint32",reserved:"uint32",sequences:["array","SequenceHeader","sequenceCount"]},SequenceHeader:{nameSize:"uint8",name:["string","nameSize"],offset:"uint32"},SequenceRecord:{dnaSize:"uint32",nBlockCount:"uint32",nBlockStarts:["array","uint32","nBlockCount"],nBlockSizes:["array","uint32","nBlockCount"],maskBlockCount:"uint32"}};module.exports={TYPE_SET:TYPE_SET};

},{}],201:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function extractLocusLine(e){var t=e.indexOf("\t"),n=e.indexOf("\t",t+1);return{contig:e.slice(0,t),position:Number(e.slice(t+1,n)),line:e}}function extractVariant(e){var t=e.split("\t");return{contig:t[0],position:Number(t[1]),ref:t[3],alt:t[4],vcfLine:e}}function compareLocusLine(e,t){return e.contig<t.contig?-1:e.contig>t.contig?1:e.position-t.position}function lowestIndex(e,t,n){for(var i=0,r=e.length;i<r;){var o=Math.floor((i+r)/2),c=n(e[o],t);c<0?i=o+1:r=o}return i}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ImmediateVcfFile=function(){function e(t){_classCallCheck(this,e),this.lines=t,this.contigMap=this.extractContigs()}return _createClass(e,[{key:"extractContigs",value:function(){for(var e=[],t="",n=0;n<this.lines.length;n++){var i=this.lines[n];i.contig!=t&&e.push(i.contig)}var r={};return e.forEach(function(e){"chr"==e.slice(0,3)?r[e.slice(4)]=e:r["chr"+e]=e,r[e]=e}),r}},{key:"getFeaturesInRange",value:function(e){var t=this.lines,n=this.contigMap[e.contig];if(!n)return[];for(var i={contig:n,position:e.start(),line:""},r={contig:n,position:e.stop(),line:""},o=lowestIndex(t,i,compareLocusLine),c=[],a=o;a<t.length&&!(compareLocusLine(t[a],r)>0);a++)c.push(t[a]);return c.map(function(e){return extractVariant(e.line)})}}]),e}(),VcfFile=function(){function e(t){_classCallCheck(this,e),this.remoteFile=t,this.immediate=this.remoteFile.getAllString().then(function(e){var t=e.split("\n").filter(function(e){return e.length&&"#"!=e[0]}).map(extractLocusLine);return t}).then(function(e){return e.sort(compareLocusLine),new ImmediateVcfFile(e)}),this.immediate.done()}return _createClass(e,[{key:"getFeaturesInRange",value:function(e){return this.immediate.then(function(t){return t.getFeaturesInRange(e)})}}]),e}();module.exports=VcfFile;

},{}],202:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function findReference(e){return _underscore2.default.find(e,function(e){return!!e.track.isReference})}function create(e,r){var a="string"==typeof e?document.getElementById(e):e;if(!a)throw new Error("Attempted to create pileup with non-existent element "+e);var t=r.tracks.map(function(e){var r=e.data?e.data:e.viz.component.defaultSource;if(!r)throw new Error("Track '"+e.viz.component.displayName+"' doesn't have a default data source; you must specify one when initializing it.");return{visualization:e.viz,source:r,track:e}}),o=findReference(t);if(!o)throw new Error("You must include at least one track with type=reference");var u=_reactDom2.default.render(_react2.default.createElement(_Root2.default,{referenceSource:o.source,tracks:t,initialRange:r.range}),a);return{setRange:function(e){if(null===u)throw"Cannot call setRange on a destroyed pileup";u.handleRangeChange(e)},getRange:function(){if(null===u)throw"Cannot call setRange on a destroyed pileup";return _underscore2.default.clone(u.state.range)},destroy:function(){if(!t)throw"Cannot call destroy() twice on the same pileup";t.forEach(function(e){var r=e.source;r.off()}),_reactDom2.default.unmountComponentAtNode(a),u=null,o=null,t=null}}}function makeVizObject(e){return function(r){return r=_underscore2.default.extend({},e.defaultOptions,r),{component:e,options:r}}}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_sourcesTwoBitDataSource=require("./sources/TwoBitDataSource"),_sourcesTwoBitDataSource2=_interopRequireDefault(_sourcesTwoBitDataSource),_sourcesBigBedDataSource=require("./sources/BigBedDataSource"),_sourcesBigBedDataSource2=_interopRequireDefault(_sourcesBigBedDataSource),_sourcesVcfDataSource=require("./sources/VcfDataSource"),_sourcesVcfDataSource2=_interopRequireDefault(_sourcesVcfDataSource),_sourcesBamDataSource=require("./sources/BamDataSource"),_sourcesBamDataSource2=_interopRequireDefault(_sourcesBamDataSource),_sourcesGA4GHDataSource=require("./sources/GA4GHDataSource"),_sourcesGA4GHDataSource2=_interopRequireDefault(_sourcesGA4GHDataSource),_sourcesEmptySource=require("./sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_vizCoverageTrack=require("./viz/CoverageTrack"),_vizCoverageTrack2=_interopRequireDefault(_vizCoverageTrack),_vizGenomeTrack=require("./viz/GenomeTrack"),_vizGenomeTrack2=_interopRequireDefault(_vizGenomeTrack),_vizGeneTrack=require("./viz/GeneTrack"),_vizGeneTrack2=_interopRequireDefault(_vizGeneTrack),_vizLocationTrack=require("./viz/LocationTrack"),_vizLocationTrack2=_interopRequireDefault(_vizLocationTrack),_vizPileupTrack=require("./viz/PileupTrack"),_vizPileupTrack2=_interopRequireDefault(_vizPileupTrack),_vizScaleTrack=require("./viz/ScaleTrack"),_vizScaleTrack2=_interopRequireDefault(_vizScaleTrack),_vizVariantTrack=require("./viz/VariantTrack"),_vizVariantTrack2=_interopRequireDefault(_vizVariantTrack),_Root=require("./Root"),_Root2=_interopRequireDefault(_Root),pileup={create:create,formats:{bam:_sourcesBamDataSource2.default.create,ga4gh:_sourcesGA4GHDataSource2.default.create,vcf:_sourcesVcfDataSource2.default.create,twoBit:_sourcesTwoBitDataSource2.default.create,bigBed:_sourcesBigBedDataSource2.default.create,empty:_sourcesEmptySource2.default.create},viz:{coverage:makeVizObject(_vizCoverageTrack2.default),genome:makeVizObject(_vizGenomeTrack2.default),genes:makeVizObject(_vizGeneTrack2.default),location:makeVizObject(_vizLocationTrack2.default),scale:makeVizObject(_vizScaleTrack2.default),variants:makeVizObject(_vizVariantTrack2.default),pileup:makeVizObject(_vizPileupTrack2.default)},version:"0.6.8"};module.exports=pileup,"undefined"!=typeof window&&(window.pileup=pileup);

},{"./Root":187,"./sources/BamDataSource":204,"./sources/BigBedDataSource":205,"./sources/EmptySource":206,"./sources/GA4GHDataSource":207,"./sources/TwoBitDataSource":208,"./sources/VcfDataSource":209,"./viz/CoverageTrack":213,"./viz/GeneTrack":215,"./viz/GenomeTrack":216,"./viz/LocationTrack":217,"./viz/PileupTrack":219,"./viz/ScaleTrack":220,"./viz/VariantTrack":222,"react":175,"react-dom":48,"underscore":177}],203:[function(require,module,exports){
"use strict";function linear(){var n=!1,t=[0,1],r=[0,1],i=function(i){return n&&(i=Math.max(Math.min(i,t[1]),t[0])),(i-t[0])/(t[1]-t[0])*(r[1]-r[0])+r[0]};return i.clamp=function(t){return void 0===t?n:(n=t,this)},i.domain=function(n){return void 0===n?t:(t=n,this)},i.range=function(n){return void 0===n?r:(r=n,this)},i.invert=function(i){if(n)throw"Can't invert a clamped linear scale.";return(i-r[0])/(r[1]-r[0])*(t[1]-t[0])+t[0]},i.nice=function(){var n=10,r=t,i=Math.abs(r[1]-r[0]),o=Math.pow(10,Math.floor(Math.log(i/n)/Math.LN10)),a=n/i*o;a<=.15?o*=10:a<=.35?o*=5:a<=.75&&(o*=2);var e,u={floor:function(n){return Math.floor(n/o)*o},ceil:function(n){return Math.ceil(n/o)*o}},c=0,l=1,f=t[c],h=t[l];return h<f&&(e=c,c=l,l=e,e=f,f=h,h=e),t[c]=u.floor(f),t[l]=u.ceil(h),this},i}module.exports={linear:linear};

},{}],204:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function expandRange(e){var n=function(e){return e-e%BASE_PAIRS_PER_FETCH},t=Math.max(1,n(e.start())),r=n(e.stop()+BASE_PAIRS_PER_FETCH-1);return new _ContigInterval2.default(e.contig,t,r)}function createFromBamFile(e){function n(e){var n=e.getKey();i[n]||(i[n]=e)}function t(e){e.references.forEach(function(e){var n=e.name;u[n]=n,u["chr"+n]=n,"chr"==n.slice(0,3)&&(u[n.slice(3)]=n)})}function r(r){var a=_underscore2.default.isEmpty(u)?e.header.then(t):_q2.default.when();return _q2.default.when().then(function(){a.isPending()&&!e.hasIndexChunks&&f.trigger("networkprogress",{status:"Fetching BAM index -- use index chunks to speed this up"})}).done(),a.then(function(){var t=u[r.contig],a=new _ContigInterval2.default(t,r.start,r.stop);if(a.isCoveredBy(o))return _q2.default.when();a=expandRange(a);var i=a.complementIntervals(o);return o.push(a),o=_ContigInterval2.default.coalesce(o),_q2.default.all(i.map(function(t){return e.getAlignmentsInRange(t).progress(function(e){f.trigger("networkprogress",e)}).then(function(e){e.forEach(function(e){return n(e)}),f.trigger("networkdone"),f.trigger("newdata",t)})}))})}function a(e){if(!e)return[];if(_underscore2.default.isEmpty(u))return[];var n=new _ContigInterval2.default(u[e.contig],e.start(),e.stop());return _underscore2.default.filter(i,function(e){return e.intersects(n)})}var i={},u={},o=[],f={rangeChanged:function(e){r(e).done()},getAlignmentsInRange:a,on:function(){},once:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(f,_backbone.Events),f}function create(e){var n=e.url;if(!n)throw new Error("Missing URL from track data: "+JSON.stringify(e));var t=e.indexUrl;if(!t)throw new Error("Missing indexURL from track data: "+JSON.stringify(e));var r=e.indexChunks?new _dataBam2.default(new _RemoteFile2.default(n),new _RemoteFile2.default(t),e.indexChunks):new _dataBam2.default(new _RemoteFile2.default(n),new _RemoteFile2.default(t));return createFromBamFile(r)}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataBam=require("../data/bam"),_dataBam2=_interopRequireDefault(_dataBam),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),BASE_PAIRS_PER_FETCH=100;module.exports={create:create,createFromBamFile:createFromBamFile};

},{"../ContigInterval":180,"../RemoteFile":186,"../data/bam":195,"backbone":1,"q":47,"underscore":177}],205:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function parseBedFeature(e){var r=new _ContigInterval2.default(e.contig,e.start,e.stop),t=e.rest.split("\t"),n=t[7].replace(/,*$/,"").split(",").map(Number),a=t[8].replace(/,*$/,"").split(",").map(Number),i=_underscore2.default.zip(a,n).map(function(r){var t=_slicedToArray(r,2),n=t[0],a=t[1];return new _Interval2.default(e.start+n,e.start+n+a)});return{position:r,id:t[0],strand:t[2],codingRegion:new _Interval2.default(Number(t[3]),Number(t[4])),geneId:t[9],name:t[10],exons:i}}function createFromBigBedFile(e){function r(e){a[e.id]||(a[e.id]=e)}function t(e){if(!e)return[];var r=[];return _underscore2.default.each(a,function(t){e.intersects(t.position)&&r.push(t)}),r}function n(t){var n=new _ContigInterval2.default(t.contig,t.start,t.stop);return n.isCoveredBy(i)?_q2.default.when():(i.push(n),i=_ContigInterval2.default.coalesce(i),e.getFeatureBlocksOverlapping(n).then(function(e){e.forEach(function(e){i.push(e.range),i=_ContigInterval2.default.coalesce(i);var t=e.rows.map(parseBedFeature);t.forEach(function(e){return r(e)}),o.trigger("newdata",e.range)})}))}var a={},i=[],o={rangeChanged:function(e){n(e).done()},getGenesInRange:t,on:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(o,_backbone.Events),o}function create(e){var r=e.url;if(!r)throw new Error("Missing URL from track: "+JSON.stringify(e));return createFromBigBedFile(new _dataBigBed2.default(r))}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_dataBigBed=require("../data/BigBed"),_dataBigBed2=_interopRequireDefault(_dataBigBed);module.exports={create:create,createFromBigBedFile:createFromBigBedFile};

},{"../ContigInterval":180,"../Interval":183,"../data/BigBed":190,"backbone":1,"q":47,"underscore":177}],206:[function(require,module,exports){
"use strict";var create=function(){return{rangeChanged:function(){},on:function(){},off:function(){},trigger:function(){}}};module.exports={create:create};

},{}],207:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function expandRange(e){var n=function(e){return e-e%BASE_PAIRS_PER_FETCH},t=Math.max(1,n(e.start())),r=n(e.stop()+BASE_PAIRS_PER_FETCH-1);return new _ContigInterval2.default(e.contig,t,r)}function create(e){function n(e){e.alignments.forEach(function(e){var n=_GA4GHAlignment2.default.keyFromGA4GHResponse(e);if(!(n in s)){var t=new _GA4GHAlignment2.default(e);s[n]=t}})}function t(n){var t=e.killChr?n.contig.replace(/^chr/,""):n.contig,r=new _ContigInterval2.default(t,n.start,n.stop);r.isCoveredBy(u)||(r=expandRange(r),u.push(r),u=_ContigInterval2.default.coalesce(u),o(r,null,1))}function r(e){c.trigger("networkfailure",e),c.trigger("networkdone"),console.warn(e)}function o(t,i,s){var u=new XMLHttpRequest;u.open("POST",a),u.responseType="json",u.setRequestHeader("Content-Type","application/json"),u.addEventListener("load",function(e){var i=this.response;this.status>=400?r(this.status+" "+this.statusText+" "+JSON.stringify(i)):i.errorCode?r("Error from GA4GH endpoint: "+JSON.stringify(i)):(n(i),c.trigger("newdata",t),i.nextPageToken?o(t,i.nextPageToken,s+1):c.trigger("networkdone"))}),u.addEventListener("error",function(e){r("Request failed with status: "+this.status)}),c.trigger("networkprogress",{numRequests:s}),u.send(JSON.stringify({pageToken:i,pageSize:ALIGNMENTS_PER_REQUEST,readGroupIds:[e.readGroupId],referenceName:t.contig,start:t.start(),end:t.stop()}))}function i(n){return n?(e.killChr&&(n=new _ContigInterval2.default(n.contig.replace(/^chr/,""),n.start(),n.stop())),_underscore2.default.filter(s,function(e){return e.intersects(n)})):[]}if("v0.5.1"!=e.endpoint.slice(-6))throw new Error("Only v0.5.1 of the GA4GH API is supported by pileup.js");var a=e.endpoint+"/reads/search",s={},u=[],c={rangeChanged:t,getAlignmentsInRange:i,on:function(){},once:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(c,_backbone.Events),c}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_GA4GHAlignment=require("../GA4GHAlignment"),_GA4GHAlignment2=_interopRequireDefault(_GA4GHAlignment),ALIGNMENTS_PER_REQUEST=200,BASE_PAIRS_PER_FETCH=100;module.exports={create:create};

},{"../ContigInterval":180,"../GA4GHAlignment":182,"backbone":1,"underscore":177}],208:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function expandRange(e){var t=function(e){return e-e%BASE_PAIRS_PER_FETCH},n=Math.max(0,t(e.start())),r=t(e.stop()+BASE_PAIRS_PER_FETCH-1);return new _ContigInterval2.default(e.contig,n,r)}function create(e){var t=e.url;if(!t)throw new Error("Missing URL from track: "+JSON.stringify(e));return createFromTwoBitFile(new _dataTwoBit2.default(new _RemoteFile2.default(t)))}function testBasePairsToFetch(e){return e?void(BASE_PAIRS_PER_FETCH=e):BASE_PAIRS_PER_FETCH}Object.defineProperty(exports,"__esModule",{value:!0});var _q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataTwoBit=require("../data/TwoBit"),_dataTwoBit2=_interopRequireDefault(_dataTwoBit),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_SequenceStore=require("../SequenceStore"),_SequenceStore2=_interopRequireDefault(_SequenceStore),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),BASE_PAIRS_PER_FETCH=1e4,MAX_BASE_PAIRS_TO_FETCH=1e5,createFromTwoBitFile=function(e){function t(t){var n=t.length();return n>MAX_BASE_PAIRS_TO_FETCH?(l.trigger("newdatarefused",t),_q2.default.when()):(_.push(t),_=_ContigInterval2.default.coalesce(_),void e.getFeaturesInRange(t.contig,t.start(),t.stop()).then(function(e){e&&(e.length<t.length()&&(t=new _ContigInterval2.default(t.contig,t.start(),t.start()+e.length-1)),u.setRange(t,e))}).then(function(){l.trigger("newdata",t)}).done())}function n(e){if(a.indexOf(e.contig)>=0)return e;var t=_utils2.default.altContigName(e.contig);return a.indexOf(t)>=0?{contig:t,start:e.start,stop:e.stop}:e}function r(e){return c.then(function(){return n(e)})}function i(e){return u.getAsObjects(_ContigInterval2.default.fromGenomeRange(e))}function o(e){return e?u.getAsString(_ContigInterval2.default.fromGenomeRange(e)):""}var a=[],u=new _SequenceStore2.default,_=[],c=e.getContigList().then(function(e){return a=e,l.trigger("contigs",a),e});c.done();var l={rangeChanged:function(e){r(e).then(function(e){var n=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!n.isCoveredBy(_)){n=expandRange(n);var r=n.complementIntervals(_),i=!0,o=!1,a=void 0;try{for(var u,c=r[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value;t(l)}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}}}).done()},getRange:i,getRangeAsString:o,contigList:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return a}),normalizeRange:r,on:function(){},once:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(l,_backbone.Events),l};module.exports={create:create,createFromTwoBitFile:createFromTwoBitFile,testBasePairsToFetch:testBasePairsToFetch};

},{"../ContigInterval":180,"../RemoteFile":186,"../SequenceStore":188,"../data/TwoBit":192,"../utils":211,"backbone":1,"q":47,"underscore":177}],209:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function expandRange(e){var t=function(e){return e-e%BASE_PAIRS_PER_FETCH},r=Math.max(1,t(e.start())),n=t(e.stop()+BASE_PAIRS_PER_FETCH-1);return new _ContigInterval2.default(e.contig,r,n)}function variantKey(e){return e.contig+":"+e.position}function createFromVcfFile(e){function t(e){var t=variantKey(e);i[t]||(i[t]=e)}function r(r){var n=new _ContigInterval2.default(r.contig,r.start,r.stop);return n.isCoveredBy(a)?_q2.default.when():(n=expandRange(n),a.push(n),a=_ContigInterval2.default.coalesce(a),e.getFeaturesInRange(n).then(function(e){e.forEach(function(e){return t(e)}),o.trigger("newdata",n)}))}function n(e){return e?_underscore2.default.filter(i,function(t){return e.chrContainsLocus(t.contig,t.position)}):[]}var i={},a=[],o={rangeChanged:function(e){r(e).done()},getFeaturesInRange:n,on:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(o,_backbone2.default),o}function create(e){var t=e.url,r=e.content;if(t)return createFromVcfFile(new _dataVcf2.default(new _RemoteFile2.default(t)));if(r)return createFromVcfFile(new _dataVcf2.default(new _LocalStringFile2.default(r)));throw new Error("Missing URL or content from track: "+JSON.stringify(e))}Object.defineProperty(exports,"__esModule",{value:!0});var _backbone=require("backbone"),_backbone2=_interopRequireDefault(_backbone),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_LocalStringFile=require("../LocalStringFile"),_LocalStringFile2=_interopRequireDefault(_LocalStringFile),_dataVcf=require("../data/vcf"),_dataVcf2=_interopRequireDefault(_dataVcf),BASE_PAIRS_PER_FETCH=100;module.exports={create:create,createFromVcfFile:createFromVcfFile};

},{"../ContigInterval":180,"../LocalStringFile":184,"../RemoteFile":186,"../data/vcf":201,"backbone":1,"q":47,"underscore":177}],210:[function(require,module,exports){
"use strict";module.exports={BASE_COLORS:{A:"#188712",G:"#C45C16",C:"#0600F9",T:"#F70016",U:"#F70016",N:"black"},LOOSE_TEXT_STYLE:"24px 'Helvetica Neue', Helvetica, Arial, sans-serif",TIGHT_TEXT_STYLE:"bold 12px 'Helvetica Neue', Helvetica, Arial, sans-serif",GENE_ARROW_SIZE:4,GENE_COLOR:"blue",GENE_COMPLEMENT_COLOR:"white",GENE_FONT:"'Helvetica Neue', Helvetica, Arial, sans-serif",GENE_FONT_SIZE:16,GENE_TEXT_PADDING:5,ALIGNMENT_COLOR:"#c8c8c8",ALIGNMENT_MINUS_STRAND_COLOR:"rgb(176, 176, 236)",ALIGNMENT_PLUS_STRAND_COLOR:"rgb(236, 176, 176)",DELETE_COLOR:"black",INSERT_COLOR:"rgb(97, 0, 216)",COVERAGE_FONT_STYLE:"bold 9px 'Helvetica Neue', Helvetica, Arial, sans-serif",COVERAGE_FONT_COLOR:"black",COVERAGE_TICK_LENGTH:5,COVERAGE_TEXT_PADDING:3,COVERAGE_TEXT_Y_OFFSET:3,COVERAGE_BIN_COLOR:"#a0a0a0",COVERAGE_MIN_BAR_WIDTH_FOR_GAP:8,SCALE_LINE_PADDING:40,SCALE_FONT_STYLE:"bold 12px 'Helvetica Neue', Helvetica, Arial, sans-serif",SCALE_TEXT_Y_OFFSET:5,SCALE_FONT_COLOR:"black",SCALE_ARROW_SIZE:4,LOC_TEXT_PADDING:5,LOC_TICK_LENGTH:10,LOC_TEXT_Y_OFFSET:5,LOC_FONT_STYLE:"13px 'Helvetica Neue', Helvetica, Arial, sans-serif",LOC_FONT_COLOR:"black",VARIANT_STROKE:"blue",VARIANT_FILL:"#ddd",VARIANT_HEIGHT:14};

},{}],211:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function tupleLessOrEqual(e,t){if(e.length!=t.length)throw new Error("Comparing non-equal length tuples");for(var r=0;r<e.length;r++){if(e[r]>t[r])return!1;if(e[r]<t[r])return!0}return!0}function tupleRangeOverlaps(e,t){return tupleLessOrEqual(e[0],t[1])&&tupleLessOrEqual(t[0],e[1])&&tupleLessOrEqual(e[0],e[1])&&tupleLessOrEqual(t[0],t[1])}function concatArrayBuffers(e){var t=e.map(function(e){return e.byteLength}).reduce(function(e,t){return e+t},0),r=new Uint8Array(t),n=0;return e.forEach(function(e){r.set(new Uint8Array(e),n),n+=e.byteLength}),r.buffer}function _inflateOne(e,t){var r=new _pakoLibInflate2.default.Inflate;return r.push(e.slice(t)),{err:r.err,msg:r.msg,buffer:r.result?r.result.buffer:null,total_in:r.strm.total_in}}function cachedInflateOne(e,t,r){if(!r)return _inflateOne(e,t);var n=r.filename+":"+(r.initialOffset+t),a=inflationCache[n];return a&&t+a.total_in>e.byteLength?_inflateOne(e,t):(a||(a=_inflateOne(e,t)),!a.err&&a.buffer&&(inflationCache[n]=a),a)}function inflateConcatenatedGzip(e,t,r){var n=0,a=[];void 0===t&&(t=e.byteLength);do{var u=cachedInflateOne(e,n,r);if(u.err)throw"Gzip error: "+u.msg;u.buffer&&a.push({offset:n,compressedLength:u.total_in,buffer:u.buffer}),n+=u.total_in}while(n<=t&&n<e.byteLength);return a}function inflateGzip(e){return concatArrayBuffers(inflateConcatenatedGzip(e).map(function(e){return e.buffer}))}function altContigName(e){return"chr"==e.slice(0,3)?e.slice(3):"chr"+e}function isChrMatch(e,t){return e==t||"chr"+e==t||e=="chr"+t}function pipePromise(e,t){t.then(e.resolve,e.reject,e.notify)}function scaleRange(e,t){var r=e.stop-e.start,n=Math.floor((e.start+e.stop)/2),a=2*Math.round(t*r/2),u=n-a/2,i=n+a/2;return u<0&&(i-=u,u=0),new _Interval2.default(u,i)}function parseRange(e){var t=/^([^ :]+):([0-9,]+)-([0-9,]+)$/.exec(e);return t?{contig:t[1],start:parseNumberWithCommas(t[2]),stop:parseNumberWithCommas(t[3])}:(t=/^([^ :]+):([0-9,]+)$/.exec(e))?{contig:t[1],start:parseNumberWithCommas(t[2])}:(t=/^([0-9,]+)-([0-9,]+)$/.exec(e))?{start:parseNumberWithCommas(t[1]),stop:parseNumberWithCommas(t[2])}:(t=/^([^ :]+):$/.exec(e)||/^([^0-9][^ :]+)$/.exec(e))?{contig:t[1]}:(t=/^([0-9,]+)$/.exec(e),t?{start:parseNumberWithCommas(t[1])}:null)}function formatInterval(e){return numberWithCommas(e.start)+"-"+numberWithCommas(e.stop)}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function parseNumberWithCommas(e){return parseInt(e.replace(/,/g,""),10)}function flatMap(e,t){return _underscore2.default.flatten(e.map(t),!0)}function computePercentile(e,t){if(0===e.length)return 0;e.sort(function(e,t){return e-t});var r=(e.length-1)*t/100,n=Math.floor(r),a=Math.ceil(r);return n==a?e[n]:e[n]*(r-n)+e[a]*(a-r)}var _pakoLibInflate=require("pako/lib/inflate"),_pakoLibInflate2=_interopRequireDefault(_pakoLibInflate),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),inflationCache={};module.exports={tupleLessOrEqual:tupleLessOrEqual,tupleRangeOverlaps:tupleRangeOverlaps,concatArrayBuffers:concatArrayBuffers,inflateConcatenatedGzip:inflateConcatenatedGzip,inflateGzip:inflateGzip,altContigName:altContigName,pipePromise:pipePromise,scaleRange:scaleRange,parseRange:parseRange,formatInterval:formatInterval,isChrMatch:isChrMatch,flatMap:flatMap,computePercentile:computePercentile};

},{"./Interval":183,"pako/lib/inflate":34,"underscore":177}],212:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_pileuputils=require("./pileuputils"),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),CoverageCache=function(){function e(t){_classCallCheck(this,e),this.reads={},this.refToCounts={},this.refToMaxCoverage={},this.referenceSource=t}return _createClass(e,[{key:"addAlignment",value:function(e){var t=e.getKey();if(!(t in this.reads)){this.reads[t]=e;var r=(0,_pileuputils.getOpInfo)(e,this.referenceSource);this.addReadToCoverage(e,r)}}},{key:"updateMismatches",value:function(e){var t=this._canonicalRef(e.contig);this.refToCounts[t]={},this.refToMaxCoverage[t]=0;for(var r in this.reads){var a=this.reads[r];if(a.getInterval().chrOnContig(e.contig)){var o=(0,_pileuputils.getOpInfo)(a,this.referenceSource);this.addReadToCoverage(a,o)}}}},{key:"addReadToCoverage",value:function(e,t){var r=this._canonicalRef(e.ref);r in this.refToCounts||(this.refToCounts[r]={},this.refToMaxCoverage[r]=0);for(var a=this.refToCounts[r],o=this.refToMaxCoverage[r],i=e.getInterval(),n=i.start(),s=i.stop(),u=n;u<=s;u++){var f=a[u];f||(a[u]=f={count:0}),f.count+=1,f.count>o&&(o=f.count)}var l=!0,c=!1,h=void 0;try{for(var v,C=t.mismatches[Symbol.iterator]();!(l=(v=C.next()).done);l=!0){var g,d=v.value,p=a[d.pos];p.mismatches?g=p.mismatches:(g=p.mismatches={},p.ref=this.referenceSource.getRangeAsString({contig:r,start:d.pos,stop:d.pos}));var f=g[d.basePair]||0;g[d.basePair]=1+f}}catch(e){c=!0,h=e}finally{try{!l&&C.return&&C.return()}finally{if(c)throw h}}this.refToMaxCoverage[r]=o}},{key:"maxCoverageForRef",value:function(e){return this.refToMaxCoverage[e]||this.refToMaxCoverage[_utils2.default.altContigName(e)]||0}},{key:"binsForRef",value:function(e){return this.refToCounts[e]||this.refToCounts[_utils2.default.altContigName(e)]||{}}},{key:"_canonicalRef",value:function(e){if(this.refToCounts[e])return e;var t=_utils2.default.altContigName(e);return this.refToCounts[t]?t:e}}]),e}();module.exports=CoverageCache;

},{"../utils":211,"./pileuputils":225}],213:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderBars(e,t,a,r,n,i){if(!_underscore2.default.isEmpty(n)){var o=t(1)-t(0),s=o>_style2.default.COVERAGE_MIN_BAR_WIDTH_FOR_GAP,l=s?1:0,u=function(e,r){var n=Math.round(t(1+e)),i=Math.round(t(2+e))-l,o=Math.round(a(r));return{barX1:n,barX2:i,barY:o}},c={},f=a(0),h=r.start(),_=r.stop(),v=u(h,h in n?n[h].count:0),d=v.barX1;e.fillStyle=_style2.default.COVERAGE_BIN_COLOR,e.beginPath(),e.moveTo(d,f);for(var p=h;p<_;p++){var g=n[p];if(g){e.pushObject(g);var C=u(p,g.count),y=C.barX1,O=C.barX2,T=C.barY;e.lineTo(y,T),e.lineTo(O,T),s&&(e.lineTo(O,f),e.lineTo(O+1,f)),SHOW_MISMATCHES&&!_underscore2.default.isEmpty(g.mismatches)&&(c[p]=g),e.popObject()}}var R=u(_,_ in n?n[_].count:0),b=R.barX2;e.lineTo(b,f),e.closePath(),e.fill(),_underscore2.default.each(c,function(t,r){if(t.mismatches){var n=_underscore2.default.clone(t.mismatches);r=Number(r);var o=_underscore2.default.reduce(n,function(e,t){return e+t}),s=_underscore2.default.max(n);s>MISMATCH_THRESHOLD&&o>i.vafColorThreshold*t.count&&o<t.count&&t.ref&&(n[t.ref]=t.count-o);var l=u(r,t.count),c=l.barX1,f=l.barX2;e.pushObject(t);var h=0;_underscore2.default.chain(n).map(function(e,t){return{count:e,base:t}}).filter(function(e){var t=e.count;return t>MISMATCH_THRESHOLD}).sortBy(function(e){var t=e.count;return-t}).each(function(t){var n=t.count,i=t.base,o={position:1+r,count:n,base:i};e.pushObject(o),e.fillStyle=_style2.default.BASE_COLORS[i];var s=a(h);e.fillRect(c,s,Math.max(1,f-c),a(h+n)-s),h+=n,e.popObject()}),e.popObject()}})}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,i=t,o=a;r=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=i,a=o,r=!0,s=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_CoverageCache=require("./CoverageCache"),_CoverageCache2=_interopRequireDefault(_CoverageCache),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_style=require("../style"),_style2=_interopRequireDefault(_style),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),SHOW_MISMATCHES=!0,MISMATCH_THRESHOLD=1,CoverageTiledCanvas=function(e){function t(e,a,r){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.cache=e,this.height=Math.max(1,a),this.options=r}return _inherits(t,e),_createClass(t,[{key:"heightForRef",value:function(e){return this.height}},{key:"update",value:function(e,t){this.height=Math.max(1,e),this.options=t}},{key:"yScaleForRef",value:function(e){var t=this.cache.maxCoverageForRef(e),a=10;return _scale2.default.linear().domain([t,0]).range([a,this.height-a]).nice()}},{key:"render",value:function(e,t,a){var r=this.cache.binsForRef(a.contig),n=this.yScaleForRef(a.contig),i=new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1);renderBars(e,t,n,i,r,this.options)}}]),t}(_TiledCanvas3.default),CoverageTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _CoverageCache2.default(this.props.referenceSource),this.tiles=new CoverageTiledCanvas(this.cache,this.props.height,this.props.options),this.props.source.on("newdata",function(t){var a=e.cache.maxCoverageForRef(t.contig);e.props.source.getAlignmentsInRange(t).forEach(function(t){return e.cache.addAlignment(t)});var r=e.cache.maxCoverageForRef(t.contig);a!=r?e.tiles.invalidateAll():e.tiles.invalidateRange(t),e.visualizeCoverage()}),this.props.referenceSource.on("newdata",function(t){e.cache.updateMismatches(t),e.tiles.invalidateRange(t),e.visualizeCoverage()})}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)||(this.props.height==e.height&&this.props.options==e.options||(this.tiles.update(this.props.height,this.props.options),this.tiles.invalidateAll()),this.visualizeCoverage())}},{key:"getContext",value:function(){var e=this.refs.canvas,t=e.getContext("2d");return t}},{key:"renderTicks",value:function(e,t){var a=t.domain()[0];[0,Math.round(a/2),a].forEach(function(a){e.pushObject({value:a,type:"tick"});var r=Math.round(t(a));e.strokeStyle=_style2.default.COVERAGE_FONT_COLOR,_canvasUtils2.default.drawLine(e,0,r,_style2.default.COVERAGE_TICK_LENGTH,r),e.popObject();var n=a+"X";e.pushObject({value:a,label:n,type:"label"}),e.font=_style2.default.COVERAGE_FONT_STYLE;var i=_style2.default.COVERAGE_TICK_LENGTH+_style2.default.COVERAGE_TEXT_PADDING,o=r+_style2.default.COVERAGE_TEXT_Y_OFFSET;e.strokeStyle="white",e.lineWidth=2,e.strokeText(n,i,o),e.lineWidth=1,e.fillStyle=_style2.default.COVERAGE_FONT_COLOR,e.fillText(n,i,o),e.popObject()})}},{key:"visualizeCoverage",value:function(){var e=this.refs.canvas,t=this.props.width,a=this.props.height,r=_ContigInterval2.default.fromGenomeRange(this.props.range);if(0!==t){_d3utils2.default.sizeCanvas(e,t,a);var n=_dataCanvas2.default.getDataContext(this.getContext());n.save(),n.reset(),n.clearRect(0,0,n.canvas.width,n.canvas.height);var i=this.tiles.yScaleForRef(r.contig);this.tiles.renderToScreen(n,r,this.getScale()),this.renderTicks(n,i),n.restore()}}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,r=_ContigInterval2.default.fromGenomeRange(this.props.range),n=this.getScale(),i=this.cache.binsForRef(r.contig),o=Math.floor(n.invert(a))-1,s=i[o],l=window.alert||console.log;if(s){var u=s.mismatches?_underscore2.default.reduce(s.mismatches,function(e,t){return e+t}):0,c=s.ref||this.props.referenceSource.getRangeAsString({contig:r.contig,start:o,stop:o}),f=_underscore2.default.extend({position:r.contig+":"+(1+o),"read depth":s.count},s.mismatches);f[c]=s.count-u,l(JSON.stringify(f,null,"  "))}}}]),t}(_react2.default.Component);CoverageTrack.displayName="coverage",CoverageTrack.defaultOptions={vafColorThreshold:.2},module.exports=CoverageTrack;

},{"../ContigInterval":180,"../scale":203,"../style":210,"./CoverageCache":212,"./TiledCanvas":221,"./canvas-utils":223,"./d3utils":224,"data-canvas":4,"react":175,"shallow-equals":176,"underscore":177}],214:[function(require,module,exports){
"use strict";var DisplayMode={LOOSE:1,TIGHT:2,BLOCKS:3,HIDDEN:4,getDisplayMode:function(e){return e>=25?DisplayMode.LOOSE:e>=10?DisplayMode.TIGHT:e>=1?DisplayMode.BLOCKS:DisplayMode.HIDDEN},isText:function(e){return e==DisplayMode.LOOSE||e==DisplayMode.TIGHT}};module.exports=DisplayMode;

},{}],215:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function drawArrow(e,t,a,r,n){var l=t(1+a.start),o=t(1+a.stop);if(!(o-l<=2*_style2.default.GENE_ARROW_SIZE)){var i=(l+o)/2;e.beginPath(),"-"==n?(e.moveTo(i+_style2.default.GENE_ARROW_SIZE,r-_style2.default.GENE_ARROW_SIZE),e.lineTo(i,r),e.lineTo(i+_style2.default.GENE_ARROW_SIZE,r+_style2.default.GENE_ARROW_SIZE)):(e.moveTo(i-_style2.default.GENE_ARROW_SIZE,r-_style2.default.GENE_ARROW_SIZE),e.lineTo(i,r),e.lineTo(i-_style2.default.GENE_ARROW_SIZE,r+_style2.default.GENE_ARROW_SIZE)),e.stroke()}}function drawGeneName(e,t,a,r,n){var l=r.position,o=.5*(t(1+l.start())+t(1+l.stop())),i=r.name||r.id,s=e.measureText(i).width,u=new _Interval2.default(o-.5*s,o+.5*s);if(!_underscore2.default.any(n,function(e){return u.intersects(e)})){n.push(u);var _=a+_style2.default.GENE_FONT_SIZE+_style2.default.GENE_TEXT_PADDING;e.fillText(i,o,_)}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_dataBedtools=require("../data/bedtools"),_dataBedtools2=_interopRequireDefault(_dataBedtools),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),GeneTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={genes:[]}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",null)}},{key:"componentDidMount",value:function(){var e=this;this.props.source.on("newdata",function(t){e.setState({genes:e.props.source.getGenesInRange(t)})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.width,r=t.height,n=this.props.range,l=new _ContigInterval2.default(n.contig,n.start,n.stop);if(0!==a){var o=this.getScale(),i=_scale2.default.linear().domain([o.invert(0),o.invert(a)]).range([0,a]).clamp(!0);_d3utils2.default.sizeCanvas(e,a,r);var s=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));s.reset(),s.clearRect(0,0,s.canvas.width,s.canvas.height);var u=Math.round(r/4),_=[];s.font=_style2.default.GENE_FONT_SIZE+"px "+_style2.default.GENE_FONT,s.textAlign="center",this.state.genes.forEach(function(e){if(e.position.chrIntersects(l)){s.pushObject(e),s.lineWidth=1,s.strokeStyle=_style2.default.GENE_COLOR,s.fillStyle=_style2.default.GENE_COLOR,_canvasUtils2.default.drawLine(s,i(1+e.position.start()),u+.5,i(1+e.position.stop()),u+.5);var t=_dataBedtools2.default.splitCodingExons(e.exons,e.codingRegion);t.forEach(function(e){s.fillRect(o(1+e.start),u-3*(e.isCoding?2:1),o(e.stop+2)-o(1+e.start),6*(e.isCoding?2:1))});var a=e.position.interval.complementIntervals(e.exons);a.forEach(function(t){drawArrow(s,i,t,u+.5,e.strand)}),s.strokeStyle=_style2.default.GENE_COMPLEMENT_COLOR,s.lineWidth=2,e.exons.forEach(function(t){drawArrow(s,i,t,u+.5,e.strand)}),drawGeneName(s,i,u,e,_),s.popObject()}})}}}]),t}(_react2.default.Component);GeneTrack.displayName="genes",module.exports=GeneTrack;

},{"../ContigInterval":180,"../Interval":183,"../data/bedtools":196,"../scale":203,"../style":210,"./canvas-utils":223,"./d3utils":224,"data-canvas":4,"react":175,"react-dom":48,"shallow-equals":176,"underscore":177}],216:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderGenome(e,t,a,i,r){var n=t(1)-t(0),l=_DisplayMode2.default.getDisplayMode(n),o=_DisplayMode2.default.isText(l);if(l!=_DisplayMode2.default.HIDDEN){e.textAlign="center",l==_DisplayMode2.default.LOOSE?e.font=_style2.default.LOOSE_TEXT_STYLE:l==_DisplayMode2.default.TIGHT&&(e.font=_style2.default.TIGHT_TEXT_STYLE);for(var s=null,u=i.start(),c=i.stop(),f=u;f<=c;f++){var _=r[f-u];"."!=_&&(e.save(),e.pushObject({pos:f,letter:_}),e.fillStyle=_style2.default.BASE_COLORS[_],o?e.fillText(_,t(1.5+f),a-1):n>=_style2.default.COVERAGE_MIN_BAR_WIDTH_FOR_GAP?e.fillRect(t(1+f)+.5,0,n-1.5,a):s===_?e.fillRect(t(1+f)-1.5,0,n+1.5,a):e.fillRect(t(1+f)-.5,0,n+1.5,a),e.popObject(),e.restore(),s=_)}}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),_get=function(e,t,a){for(var i=!0;i;){var r=e,n=t,l=a;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,n);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=n,a=l,i=!0,o=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_DisplayMode=require("./DisplayMode"),_DisplayMode2=_interopRequireDefault(_DisplayMode),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_style=require("../style"),_style2=_interopRequireDefault(_style),GenomeTiledCanvas=function(e){function t(e,a){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.height=Math.max(1,a)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(e,t,a){var i={contig:a.contig,start:a.start()-1,stop:a.stop()+1},r=this.source.getRangeAsString(i);renderGenome(e,t,this.height,_ContigInterval2.default.fromGenomeRange(i),r)}},{key:"heightForRef",value:function(e){return this.height}},{key:"updateHeight",value:function(e){this.height=e}}]),t}(_TiledCanvas3.default),GenomeTrack=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",null)}},{key:"componentDidMount",value:function(){var e=this;this.tiles=new GenomeTiledCanvas(this.props.source,this.props.height),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||(this.props.height!=e.height&&(this.tiles.updateHeight(this.props.height),this.tiles.invalidateAll()),this.updateVisualization())}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.width,i=t.height,r=t.range;if(0!==a){_d3utils2.default.sizeCanvas(e,a,i);var n=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));n.reset(),n.clearRect(0,0,n.canvas.width,n.canvas.height),this.tiles.renderToScreen(n,_ContigInterval2.default.fromGenomeRange(r),this.getScale())}}}]),t}(_react2.default.Component);GenomeTrack.displayName="reference",module.exports=GenomeTrack;

},{"../ContigInterval":180,"../style":210,"./DisplayMode":214,"./TiledCanvas":221,"./canvas-utils":223,"./d3utils":224,"data-canvas":4,"react":175,"react-dom":48,"shallow-equals":176}],217:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,o=t,u=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,o);if(void 0!==i){if("value"in i)return i.value;var l=i.get;if(void 0===l)return;return l.call(u)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=o,a=u,r=!0,i=s=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_sourcesEmptySource=require("../sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),LocationTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"render",value:function(){return _react2.default.createElement("canvas",null)}},{key:"componentDidMount",value:function(){this.updateVisualization()}},{key:"componentDidUpdate",value:function(e,t){this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.range,r=t.width,n=t.height,o=this.getScale();_d3utils2.default.sizeCanvas(e,r,n);var u=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));u.save(),u.reset(),u.clearRect(0,0,u.canvas.width,u.canvas.height);var i=Math.floor((a.stop+a.start)/2),l=Math.round(o(i+1)),s=Math.round(o(i));_canvasUtils2.default.drawLine(u,s-.5,0,s-.5,n),_canvasUtils2.default.drawLine(u,l-.5,0,l-.5,n);var c=n/2;u.fillStyle=_style2.default.LOC_FONT_COLOR,u.font=_style2.default.LOC_FONT_STYLE,u.fillText(i.toLocaleString()+" bp",l+_style2.default.LOC_TICK_LENGTH+_style2.default.LOC_TEXT_PADDING,c+_style2.default.LOC_TEXT_Y_OFFSET),_canvasUtils2.default.drawLine(u,l-.5,c-.5,l+_style2.default.LOC_TICK_LENGTH-.5,c-.5),u.restore()}}]),t}(_react2.default.Component);LocationTrack.displayName="location",LocationTrack.defaultSource=_sourcesEmptySource2.default.create(),module.exports=LocationTrack;

},{"../sources/EmptySource":206,"../style":210,"./canvas-utils":223,"./d3utils":224,"data-canvas":4,"react":175,"react-dom":48}],218:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function spanAndInsert(e){for(var t=!0;t;){var r=e;if(t=!1,1==r.length)return{insert:null,span:r[0]};if(2!=r.length)throw"Called spanAndInsert with "+r.length+" \notin [1, 2]";if(r[0].chrOnContig(r[1].contig)){var n=r[0].interval,i=r[1].interval,u=n.start<i.start?new _Interval2.default(n.stop,i.start):new _Interval2.default(i.stop,n.start),s=_Interval2.default.boundingInterval([n,i]);return{insert:u,span:new _ContigInterval2.default(r[0].contig,s.start,s.stop)}}e=[r[0]],t=!0}}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_pileuputils=require("./pileuputils"),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),MIN_OUTLIER_PERCENTILE=.5,MAX_OUTLIER_PERCENTILE=99.5,MAX_INSERT_SIZE=3e4,MIN_READS_FOR_OUTLIERS=500,PileupCache=function(){function e(t,r){_classCallCheck(this,e),this.groups={},this.refToPileup={},this.referenceSource=t,this.viewAsPairs=r,this._insertStats=null}return _createClass(e,[{key:"groupKey",value:function(e){return this.viewAsPairs?e.name+":"+e.ref:e.getKey()}},{key:"addAlignment",value:function(e){this._insertStats=null;var t=this.groupKey(e),r=e.getInterval();t in this.groups||(this.groups[t]={key:t,row:-1,insert:null,span:r,alignments:[]});var n=this.groups[t];if(!_underscore2.default.find(n.alignments,function(t){return t.read==e})){var i=(0,_pileuputils.getOpInfo)(e,this.referenceSource),u={read:e,strand:e.getStrand(),refLength:r.length(),ops:i.ops,mismatches:i.mismatches};n.alignments.push(u);var s=null;if(1==n.alignments.length){if(this.viewAsPairs){var a=e.getMateProperties(),l=[r];a&&a.ref&&a.ref==e.ref&&(s=new _ContigInterval2.default(a.ref,a.pos,a.pos+r.length()),l.push(s)),n=_underscore2.default.extend(n,spanAndInsert(l))}else n.span=r;e.ref in this.refToPileup||(this.refToPileup[e.ref]=[]);var o=this.refToPileup[e.ref];n.row=(0,_pileuputils.addToPileup)(n.span.interval,o)}else if(2==n.alignments.length){s=n.alignments[0].read.getInterval();var f=spanAndInsert([r,s]),p=f.span,c=f.insert;n.insert=c,c&&(n.span=p)}}}},{key:"updateMismatches",value:function(e){for(var t in this.groups){var r=this.groups[t].alignments,n=!0,i=!1,u=void 0;try{for(var s,a=r[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value,o=l.read;if(o.getInterval().chrIntersects(e)){var f=(0,_pileuputils.getOpInfo)(o,this.referenceSource);l.mismatches=f.mismatches}}}catch(e){i=!0,u=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw u}}}}},{key:"pileupForRef",value:function(e){if(e in this.refToPileup)return this.refToPileup[e];var t=_utils2.default.altContigName(e);return t in this.refToPileup?this.refToPileup[t]:[]}},{key:"pileupHeightForRef",value:function(e){var t=this.pileupForRef(e);return t?t.length:0}},{key:"getGroupsOverlapping",value:function(e){return _underscore2.default.filter(this.groups,function(t){return t.span.chrIntersects(e)})}},{key:"anyGroupsOverlapping",value:function(e){for(var t in this.groups){var r=this.groups[t];if(r.span.chrIntersects(e))return!0}return!1}},{key:"sortReadsAt",value:function(e,t){var r=this.pileupForRef(e),n=_underscore2.default.filter(this.groups,function(r){return _underscore2.default.any(r.alignments,function(r){return r.read.getInterval().chrContainsLocus(e,t)})}),i=_underscore2.default.mapObject(_underscore2.default.groupBy(n,function(e){return e.row}),function(e){return _underscore2.default.min(e,function(e){return e.span.start()}).span.start()}),u=_underscore2.default.sortBy(_underscore2.default.range(0,r.length),function(e){return i[e]||1/0}),s=[];u.forEach(function(e,t){s[e]=t});var a=_underscore2.default.range(0,r.length).map(function(e){return r[s[e]]}),l=e in this.refToPileup?e:_utils2.default.altContigName(e);this.refToPileup[l]=a,_underscore2.default.each(this.groups,function(t){t.span.chrOnContig(e)&&(t.row=s[t.row])})}},{key:"getInsertStats",value:function(){if(this._insertStats)return this._insertStats;var e=_underscore2.default.map(this.groups,function(e){return e.alignments[0].read.getInferredInsertSize()}).filter(function(e){return e<MAX_INSERT_SIZE}),t=e.length>=MIN_READS_FOR_OUTLIERS?{minOutlierSize:_utils2.default.computePercentile(e,MIN_OUTLIER_PERCENTILE),maxOutlierSize:_utils2.default.computePercentile(e,MAX_OUTLIER_PERCENTILE)}:{minOutlierSize:0,maxOutlierSize:1/0};return this._insertStats=t,t}}]),e}();module.exports=PileupCache;

},{"../ContigInterval":180,"../Interval":183,"../utils":211,"./pileuputils":225,"underscore":177}],219:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function isRendered(e){return e.op==_pileuputils.CigarOp.MATCH||e.op==_pileuputils.CigarOp.DELETE||e.op==_pileuputils.CigarOp.INSERT}function renderPileup(e,t,a,i,r,n){function s(a,i,r,n){var s=t(a+1),l=t(a+i+1),o=r+READ_HEIGHT,u=Math.min(READ_STRAND_ARROW_WIDTH,(l-s)/6);e.beginPath(),"R"==n?(e.moveTo(s,r),e.lineTo(l-u,r),e.lineTo(l,(r+o)/2),e.lineTo(l-u,o),e.lineTo(s,o)):(e.moveTo(l,r),e.lineTo(s+u,r),e.lineTo(s,(r+o)/2),e.lineTo(s+u,o),e.lineTo(l,o)),e.fill()}function l(a,i,r){switch(a.op){case _pileuputils.CigarOp.MATCH:if(a.arrow)s(a.pos,a.length,i,a.arrow);else{var n=t(a.pos+1);e.fillRect(n,i,t(a.pos+a.length+1)-n,READ_HEIGHT)}break;case _pileuputils.CigarOp.DELETE:var l=t(a.pos+1),o=t(a.pos+1+a.length),u=i+READ_HEIGHT/2-.5;e.save(),e.fillStyle=_style2.default.DELETE_COLOR,e.fillRect(l,u,o-l,1),e.restore();break;case _pileuputils.CigarOp.INSERT:e.save(),e.fillStyle=_style2.default.INSERT_COLOR;var c=t(a.pos+1)-2,p=i-1,d=i+READ_HEIGHT+2;e.fillRect(c,p,1,d-p),e.restore()}}function o(t,a){e.pushObject(t),e.save(),r&&(e.fillStyle="+"==t.strand?_style2.default.ALIGNMENT_PLUS_STRAND_COLOR:_style2.default.ALIGNMENT_MINUS_STRAND_COLOR),t.ops.forEach(function(e){isRendered(e)&&l(e,a,t)}),t.mismatches.forEach(function(e){return c(e,a)}),e.restore(),e.popObject()}function u(a){if(e.save(),i&&a.insert){var r=a.span.length();r<i.minOutlierSize?e.fillStyle="blue":r>i.maxOutlierSize?e.fillStyle="red":e.fillStyle=_style2.default.ALIGNMENT_COLOR}else e.fillStyle=_style2.default.ALIGNMENT_COLOR;var n=yForRow(a.row);if(e.pushObject(a),a.insert){var s=a.insert,l=t(s.start+1),u=t(s.stop+1);e.fillRect(l,n+READ_HEIGHT/2-.5,u-l,1)}a.alignments.forEach(function(e){return o(e,n)}),e.popObject(),e.restore()}function c(i,r){a.interval.contains(i.pos)&&(e.pushObject(i),e.save(),e.fillStyle=_style2.default.BASE_COLORS[i.basePair],e.globalAlpha=opacityForQuality(i.quality),e.textAlign="center",f?e.fillText(i.basePair,t(1.5+i.pos),r+READ_HEIGHT-2):e.fillRect(t(1+i.pos),r,p-1,READ_HEIGHT),e.restore(),e.popObject())}var p=t(1)-t(0),d=_DisplayMode2.default.getDisplayMode(p),f=_DisplayMode2.default.isText(d);e.font=_style2.default.TIGHT_TEXT_STYLE,n.forEach(function(e){return u(e)})}function yForRow(e){return e*(READ_HEIGHT+READ_SPACING)}function opacityForQuality(e){var t=Q_SCALE(e);return t=Math.round(10*t+.5)/10,Math.min(1,t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),_get=function(e,t,a){for(var i=!0;i;){var r=e,n=t,s=a;i=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,n);if(void 0!==l){if("value"in l)return l.value;var o=l.get;if(void 0===o)return;return o.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=n,a=s,i=!0,l=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_pileuputils=require("./pileuputils"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_DisplayMode=require("./DisplayMode"),_DisplayMode2=_interopRequireDefault(_DisplayMode),_PileupCache=require("./PileupCache"),_PileupCache2=_interopRequireDefault(_PileupCache),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),READ_HEIGHT=13,READ_SPACING=2,READ_STRAND_ARROW_WIDTH=5,SUPPORTS_DASHES="undefined"!=typeof CanvasRenderingContext2D&&!!CanvasRenderingContext2D.prototype.setLineDash,PileupTiledCanvas=function(e){function t(e,a){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.cache=e,this.options=a}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.options=e}},{key:"heightForRef",value:function(e){return this.cache.pileupHeightForRef(e)*(READ_HEIGHT+READ_SPACING)}},{key:"render",value:function(e,t,a){var i=new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1),r=this.cache.getGroupsOverlapping(i),n=this.options.colorByInsert?this.cache.getInsertStats():null;renderPileup(e,t,i,n,this.options.colorByStrand,r)}}]),t}(_TiledCanvas3.default),MIN_Q=5,MAX_Q=20,Q_SCALE=_scale2.default.linear().domain([MIN_Q,MAX_Q]).range([.1,.9]).clamp(!0),PileupTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e={height:"100%"},t=null,a=this.state.networkStatus;if(a){var i=this.formatStatus(a);t=_react2.default.createElement("div",{ref:"status",className:"network-status"},_react2.default.createElement("div",{className:"network-status-message"},"Loading alignments (",i,")"))}return _react2.default.createElement("div",null,t,_react2.default.createElement("div",{ref:"container",style:e},_react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})))}},{key:"formatStatus",value:function(e){if(e.numRequests){var t=e.numRequests>1?"s":"";return"issued "+e.numRequests+" request"+t}if(e.status)return e.status;throw"invalid"}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _PileupCache2.default(this.props.referenceSource,this.props.options.viewAsPairs),this.tiles=new PileupTiledCanvas(this.cache,this.props.options),this.props.source.on("newdata",function(t){e.updateReads(t),e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.referenceSource.on("newdata",function(t){e.cache.updateMismatches(t),e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){var a=!1;this.props.options!=e.options&&(this.handleOptionsChange(e.options),a=!0),(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)&&!a||this.updateVisualization()}},{key:"handleOptionsChange",value:function(e){this.tiles.invalidateAll(),e.viewAsPairs!=this.props.options.viewAsPairs?(this.cache=new _PileupCache2.default(this.props.referenceSource,this.props.options.viewAsPairs),this.tiles=new PileupTiledCanvas(this.cache,this.props.options),this.updateReads(_ContigInterval2.default.fromGenomeRange(this.props.range))):e.colorByInsert!=this.props.options.colorByInsert&&(this.tiles.update(this.props.options),this.tiles.invalidateAll(),this.updateVisualization()),e.sort!=this.props.options.sort&&this.handleSort()}},{key:"updateReads",value:function(e){var t=this,a=this.cache.anyGroupsOverlapping(e);this.props.source.getAlignmentsInRange(e).forEach(function(e){return t.cache.addAlignment(e)}),!a&&this.cache.anyGroupsOverlapping(e)&&this.handleSort()}},{key:"updateVisualization",value:function(){var e=this.refs.canvas,t=this.props.width;if(0!==t){var a=yForRow(this.cache.pileupHeightForRef(this.props.range.contig));_d3utils2.default.sizeCanvas(e,t,a);var i=_canvasUtils2.default.getContext(e),r=_dataCanvas2.default.getDataContext(i);this.renderScene(r)}}},{key:"renderScene",value:function(e){var t=this.props.range,a=new _ContigInterval2.default(t.contig,t.start,t.stop),i=this.getScale();e.reset(),e.clearRect(0,0,e.canvas.width,e.canvas.height),this.tiles.renderToScreen(e,a,i),this.renderCenterLine(e,a,i);var r=_d3utils2.default.findParent(this.refs.canvas,"track-content");r&&(r.scrollLeft=0)}},{key:"renderCenterLine",value:function(e,t,a){var i=Math.floor((t.stop()+t.start())/2),r=Math.ceil(a(i+1)),n=Math.floor(a(i)),s=e.canvas.height;if(e.save(),e.lineWidth=1,SUPPORTS_DASHES&&e.setLineDash([5,5]),r-n<3){var l=Math.round((n+r)/2);_canvasUtils2.default.drawLine(e,l-.5,0,l-.5,s)}else _canvasUtils2.default.drawLine(e,n-.5,0,n-.5,s),_canvasUtils2.default.drawLine(e,r-.5,0,r-.5,s);e.restore()}},{key:"handleSort",value:function(){var e=this.props.range,t=e.start,a=e.stop,i=(t+a)/2;this.cache.sortReadsAt(this.props.range.contig,i),this.tiles.invalidateAll(),this.updateVisualization()}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,i=t.offsetY,r=_canvasUtils2.default.getContext(this.refs.canvas),n=new _dataCanvas2.default.ClickTrackingContext(r,a,i),s=this.props.range,l=new _ContigInterval2.default(s.contig,s.start,s.stop),o=this.getScale(),u=this.cache.getGroupsOverlapping(l);renderPileup(n,o,l,null,!1,u);var c=_underscore2.default.find(n.hits[0],function(e){return e.read}),p=window.alert||console.log;c&&p(c.read.debugString())}}]),t}(_react2.default.Component);PileupTrack.displayName="pileup",PileupTrack.defaultOptions={viewAsPairs:!1,colorByInsert:!0,colorByStrand:!1},PileupTrack.getOptionsMenu=function(e){return[{key:"view-pairs",label:"View as pairs",checked:e.viewAsPairs},"-",{key:"color-insert",label:"Color by insert size",checked:e.colorByInsert},{key:"color-strand",label:"Color by strand",checked:e.colorByStrand},"-",{key:"sort",label:"Sort alignments"}]};var messageId=1;PileupTrack.handleSelectOption=function(e,t){var a=_underscore2.default.clone(t);return"view-pairs"==e?(a.viewAsPairs=!a.viewAsPairs,a):"color-insert"==e?(a.colorByInsert=!a.colorByInsert,a.colorByInsert&&(a.colorByStrand=!1),a):"color-strand"==e?(a.colorByStrand=!a.colorByStrand,a.colorByStrand&&(a.colorByInsert=!1),a):"sort"==e?(a.sort=messageId++,a):t},module.exports=PileupTrack;

},{"../ContigInterval":180,"../scale":203,"../style":210,"./DisplayMode":214,"./PileupCache":218,"./TiledCanvas":221,"./canvas-utils":223,"./d3utils":224,"./pileuputils":225,"data-canvas":4,"react":175,"shallow-equals":176,"underscore":177}],220:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var l=e,u=t,n=a;r=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,u);if(void 0!==i){if("value"in i)return i.value;var o=i.get;if(void 0===o)return;return o.call(n)}var s=Object.getPrototypeOf(l);if(null===s)return;e=s,t=u,a=n,r=!0,i=s=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_sourcesEmptySource=require("../sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),ScaleTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"render",value:function(){return _react2.default.createElement("canvas",{ref:"canvas"})}},{key:"componentDidMount",value:function(){this.updateVisualization()}},{key:"componentDidUpdate",value:function(e,t){this.updateVisualization()}},{key:"getDOMNode",value:function(){return _reactDom2.default.findDOMNode(this)}},{key:"updateVisualization",value:function(){var e=this.getDOMNode(),t=this.props,a=t.range,r=t.width,l=t.height;_d3utils2.default.sizeCanvas(e,r,l);var u=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));u.save(),u.reset(),u.clearRect(0,0,u.canvas.width,u.canvas.height);var n=a.stop-a.start+1,i=Math.round(r/2),o=Math.round(l/2),s=_d3utils2.default.formatRange(n),c=s.prefix,_=s.unit;u.lineWidth=1,u.fillStyle=_style2.default.SCALE_FONT_COLOR,u.font=_style2.default.SCALE_FONT_STYLE,u.textAlign="center",u.fillText(c+" "+_,i,o+_style2.default.SCALE_TEXT_Y_OFFSET),_canvasUtils2.default.drawLine(u,.5,o-.5,i-_style2.default.SCALE_LINE_PADDING-.5,o-.5),u.beginPath(),u.moveTo(.5+_style2.default.SCALE_ARROW_SIZE,o-_style2.default.SCALE_ARROW_SIZE-.5),u.lineTo(.5,o-.5),u.lineTo(.5+_style2.default.SCALE_ARROW_SIZE,o+_style2.default.SCALE_ARROW_SIZE-.5),u.closePath(),u.fill(),u.stroke(),_canvasUtils2.default.drawLine(u,i+_style2.default.SCALE_LINE_PADDING-.5,o-.5,r-.5,o-.5),u.beginPath(),u.moveTo(r-_style2.default.SCALE_ARROW_SIZE-.5,o-_style2.default.SCALE_ARROW_SIZE-.5),u.lineTo(r-.5,o-.5),u.lineTo(r-_style2.default.SCALE_ARROW_SIZE-.5,o+_style2.default.SCALE_ARROW_SIZE-.5),u.closePath(),u.fill(),u.stroke(),u.restore()}}]),t}(_react2.default.Component);ScaleTrack.displayName="scale",ScaleTrack.defaultSource=_sourcesEmptySource2.default.create(),module.exports=ScaleTrack;

},{"../sources/EmptySource":206,"../style":210,"./canvas-utils":223,"./d3utils":224,"data-canvas":4,"react":175,"react-dom":48}],221:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),EPSILON=1e-6,MIN_PX_PER_BUFFER=500,DEBUG_RENDER_TILE_EDGES=!1,TiledCanvas=function(){function e(){_classCallCheck(this,e),this.tileCache=[]}return _createClass(e,[{key:"renderTile",value:function(e){var t=e.range,r=this.heightForRef(t.contig),n=Math.round(e.pixelsPerBase*t.length());e.buffer=document.createElement("canvas"),_d3utils2.default.sizeCanvas(e.buffer,n,r);var a=_scale2.default.linear().domain([t.start(),t.stop()+1]).range([0,n]),i=_canvasUtils2.default.getContext(e.buffer),u=_dataCanvas2.default.getDataContext(i);this.render(u,a,t)}},{key:"makeNewTiles",value:function(t,r,n){var a=this,i=e.getNewTileRanges(t,n.interval,r),u=i.map(function(e){return{pixelsPerBase:r,range:new _ContigInterval2.default(n.contig,e.start,e.stop),buffer:document.createElement("canvas")}});return u.forEach(function(e){return a.renderTile(e)}),this.tileCache=this.tileCache.concat(u),this.tileCache.sort(function(e,t){return _ContigInterval2.default.compare(e.range,t.range)}),u}},{key:"renderToScreen",value:function(e,t,r){var n=r(1)-r(0),a=this.tileCache.filter(function(e){return Math.abs(e.pixelsPerBase-n)<EPSILON&&t.chrOnContig(e.range.contig)}),i=this.heightForRef(t.contig),u=a.map(function(e){return e.range.interval});t.interval.isCoveredBy(u)||(a=a.concat(this.makeNewTiles(u,n,t)));var l=a.filter(function(e){return t.chrIntersects(e.range)});l.forEach(function(t){var n=Math.round(r(t.range.start())),a=Math.round(r(t.range.stop()+1)),u=a-n;0!==t.buffer.height&&(e.drawImage(t.buffer,0,0,t.buffer.width,t.buffer.height,n,0,u,t.buffer.height),DEBUG_RENDER_TILE_EDGES&&(e.save(),e.strokeStyle="black",_canvasUtils2.default.drawLine(e,n-.5,0,n-.5,i),_canvasUtils2.default.drawLine(e,a-.5,0,a-.5,i),e.restore()))})}},{key:"invalidateAll",value:function(){this.tileCache=[]}},{key:"invalidateRange",value:function(e){this.tileCache=this.tileCache.filter(function(t){return!t.range.chrIntersects(e)})}},{key:"heightForRef",value:function(e){throw"Not implemented"}},{key:"render",value:function(e,t,r){throw"Not implemented"}}],[{key:"getNewTileRanges",value:function(e,t,r){var n=Math.ceil(MIN_PX_PER_BUFFER/r),a=Math.floor(t.start/n)*n,i=_underscore2.default.range(a,t.stop,n).map(function(e){return new _Interval2.default(e,e+n-1)}).filter(function(t){return!t.isCoveredBy(e)});return _utils2.default.flatMap(i,function(t){return t.complementIntervals(e)}).filter(function(e){return e.intersects(t)})}}]),e}();module.exports=TiledCanvas;

},{"../ContigInterval":180,"../Interval":183,"../scale":203,"../utils":211,"./canvas-utils":223,"./d3utils":224,"data-canvas":4,"underscore":177}],222:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,i=t,o=a;r=!1,null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,i);if(void 0!==l){if("value"in l)return l.value;var u=l.get;if(void 0===u)return;return u.call(o)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=i,a=o,r=!0,l=s=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),VariantTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",{onClick:this.handleClick})}},{key:"componentDidMount",value:function(){var e=this;this.updateVisualization(),this.props.source.on("newdata",function(){e.updateVisualization()})}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.width,r=t.height;if(0!==a){_d3utils2.default.sizeCanvas(e,a,r);var n=_canvasUtils2.default.getContext(e),i=_dataCanvas2.default.getDataContext(n);this.renderScene(i)}}},{key:"renderScene",value:function(e){var t=this.props.range,a=new _ContigInterval2.default(t.contig,t.start,t.stop),r=this.props.source.getFeaturesInRange(a),n=this.getScale(),i=this.props.height,o=i-_style2.default.VARIANT_HEIGHT-1;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.reset(),e.save(),e.fillStyle=_style2.default.VARIANT_FILL,e.strokeStyle=_style2.default.VARIANT_STROKE,r.forEach(function(t){e.pushObject(t);var a=Math.round(n(t.position)),r=Math.round(n(t.position+1))-1-a;e.fillRect(a-.5,o-.5,r,_style2.default.VARIANT_HEIGHT),e.strokeRect(a-.5,o-.5,r,_style2.default.VARIANT_HEIGHT),e.popObject()}),e.restore()}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,r=t.offsetY,n=_reactDom2.default.findDOMNode(this),i=_canvasUtils2.default.getContext(n),o=new _dataCanvas2.default.ClickTrackingContext(i,a,r);this.renderScene(o);var l=o.hit&&o.hit[0],u=window.alert||console.log;l&&u(JSON.stringify(l))}}]),t}(_react2.default.Component);VariantTrack.displayName="variants",module.exports=VariantTrack;

},{"../ContigInterval":180,"../style":210,"./canvas-utils":223,"./d3utils":224,"data-canvas":4,"react":175,"react-dom":48,"shallow-equals":176}],223:[function(require,module,exports){
"use strict";function getContext(t){var e=t,n=e.getContext("2d");return n}function drawLine(t,e,n,o,r){t.beginPath(),t.moveTo(e,n),t.lineTo(o,r),t.stroke()}module.exports={getContext:getContext,drawLine:drawLine};

},{}],224:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getTrackScale(e,t){if(!e)return _scale2.default.linear();var a=e.offsetPx||0;return _scale2.default.linear().domain([e.start,e.stop+1]).range([-a,t-a])}function formatPrefix(e){var t=0;e&&(e<0&&(e*=-1),t=1+Math.floor(1e-12+Math.log(e)/Math.LN10),t=Math.max(0,Math.min(24,3*Math.floor((t-1)/3))));var a=Math.pow(10,t);return{symbol:formatPrefixes[t/3],scale:function(e){return e/a}}}function formatRange(e){var t=e/1e3,a=formatPrefix(Math.max(1,t)),r=a.symbol+"bp",n=Math.round(a.scale(e)).toLocaleString();return{prefix:n,unit:r}}function sizeCanvas(e,t,a){var r=window.devicePixelRatio;e.width=t*r,e.height=a*r,e.style.width=t+"px",e.style.height=a+"px";var n=e.getContext("2d");null!==n&&n instanceof CanvasRenderingContext2D&&n.scale(r,r)}function findParent(e,t){var a=e;do{if(a.classList.contains(t))return a;a=a.parentElement}while(a);return null}Object.defineProperty(exports,"__esModule",{value:!0});var _scale=require("../scale"),_scale2=_interopRequireDefault(_scale),formatPrefixes=["","k","M","G","T","P","E","Z","Y"];module.exports={formatRange:formatRange,getTrackScale:getTrackScale,sizeCanvas:sizeCanvas,findParent:findParent};

},{"../scale":203}],225:[function(require,module,exports){
"use strict";function pileup(e){for(var r=new Array(e.length),t=[],a=0;a<e.length;a++){for(var n=e[a],i=t.length,g=0;g<t.length;g++)if(!n.intersects(t[g])){i=g;break}r[a]=i,t[i]=n}return r}function addToPileup(e,r){for(var t=-1,a=0;a<r.length;a++){for(var n=r[a],i=!0,g=0;g<n.length;g++)if(n[g].intersects(e)){i=!1;break}if(i){t=a;break}}return t==-1&&(t=r.length,r[t]=[]),r[t].push(e),t}function findMismatches(e,r,t,a){for(var n=[],i=0;i<r.length;i++){var g=t+i,p=e.charAt(i),o=r.charAt(i);p!=o&&"."!=p&&n.push({pos:g,basePair:o,quality:a[i]})}return n}function getArrowIndex(e){var r,t,a=e.cigarOps;if("-"==e.getStrand()){for(r=0;r<a.length;r++)if(t=a[r],"S"!=t.op)return"M"==t.op?r:-1}else for(r=a.length-1;r>=0;r--)if(t=a[r],"S"!=t.op)return"M"==t.op?r:-1;return-1}function getOpInfo(e,r){for(var t=e.cigarOps,a=e.getInterval(),n=a.start(),i=e.getSequence(),g=e.getQualityScores(),p=0,o=n,s=getArrowIndex(e),c=[],l=[],u=0;u<t.length;u++){var h=t[u];if("M"==h.op){var f=r.getRangeAsString({contig:a.contig,start:o,stop:o+h.length-1}),C=i.slice(p,p+h.length);l=l.concat(findMismatches(f,C,o,g))}switch(c.push({op:h.op,length:h.length,pos:o,arrow:null}),h.op){case CigarOp.MATCH:case CigarOp.DELETE:case CigarOp.SKIP:case CigarOp.SEQMATCH:case CigarOp.SEQMISMATCH:o+=h.length}switch(h.op){case CigarOp.MATCH:case CigarOp.INSERT:case CigarOp.SOFTCLIP:case CigarOp.SEQMATCH:case CigarOp.SEQMISMATCH:p+=h.length}}return s>=0&&(c[s].arrow="-"==e.getStrand()?"L":"R"),{ops:c,mismatches:l}}Object.defineProperty(exports,"__esModule",{value:!0});var CigarOp={MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",SOFTCLIP:"S",HARDCLIP:"H",PADDING:"P",SEQMATCH:"=",SEQMISMATCH:"X"};module.exports={pileup:pileup,addToPileup:addToPileup,getOpInfo:getOpInfo,CigarOp:CigarOp};

},{}]},{},[202])(202)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFja2JvbmUvYmFja2JvbmUuanMiLCJub2RlX21vZHVsZXMvYmFzZTY0LWpzL2xpYi9iNjQuanMiLCJub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2RhdGEtY2FudmFzL3NyYy9kYXRhLWNhbnZhcy5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9FdmVudExpc3RlbmVyLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50LmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2NhbWVsaXplLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2NhbWVsaXplU3R5bGVOYW1lLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2NvbnRhaW5zTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9jcmVhdGVBcnJheUZyb21NaXhlZC5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9jcmVhdGVOb2Rlc0Zyb21NYXJrdXAuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvZW1wdHlGdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9lbXB0eU9iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9mb2N1c05vZGUuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvZ2V0QWN0aXZlRWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9nZXRNYXJrdXBXcmFwLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2dldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2h5cGhlbmF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9oeXBoZW5hdGVTdHlsZU5hbWUuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvaW52YXJpYW50LmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2lzTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9pc1RleHROb2RlLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2tleU1pcnJvci5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9rZXlPZi5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9tYXBPYmplY3QuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvbWVtb2l6ZVN0cmluZ09ubHkuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvc2hhbGxvd0VxdWFsLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL3RvQXJyYXkuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvd2FybmluZy5qcyIsIm5vZGVfbW9kdWxlcy9pZWVlNzU0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2lzYXJyYXkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvamJpbmFyeS9kaXN0L2Jyb3dzZXIvamJpbmFyeS5qcyIsIm5vZGVfbW9kdWxlcy9qZGF0YXZpZXcvZGlzdC9ub2RlL2pkYXRhdmlldy5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi9pbmZsYXRlLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3V0aWxzL2NvbW1vbi5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi91dGlscy9zdHJpbmdzLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvYWRsZXIzMi5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2NvbnN0YW50cy5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2NyYzMyLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvZ3poZWFkZXIuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvemxpYi9pbmZmYXN0LmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvaW5mbGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2luZnRyZWVzLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvbWVzc2FnZXMuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvemxpYi96c3RyZWFtLmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9xL3EuanMiLCJub2RlX21vZHVsZXMvcmVhY3QtZG9tL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9BdXRvRm9jdXNVdGlscy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQmVmb3JlSW5wdXRFdmVudFBsdWdpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQ1NTUHJvcGVydHkuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0NTU1Byb3BlcnR5T3BlcmF0aW9ucy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQ2FsbGJhY2tRdWV1ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQ2hhbmdlRXZlbnRQbHVnaW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0NsaWVudFJlYWN0Um9vdEluZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9ET01DaGlsZHJlbk9wZXJhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0RPTVByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9ET01Qcm9wZXJ0eU9wZXJhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0Rhbmdlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0VudGVyTGVhdmVFdmVudFBsdWdpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRXZlbnRDb25zdGFudHMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0V2ZW50UGx1Z2luSHViLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9FdmVudFBsdWdpblJlZ2lzdHJ5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9FdmVudFBsdWdpblV0aWxzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9FdmVudFByb3BhZ2F0b3JzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9GYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0hUTUxET01Qcm9wZXJ0eUNvbmZpZy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvTGlua2VkVmFsdWVVdGlscy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvT2JqZWN0LmFzc2lnbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUG9vbGVkQ2xhc3MuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEJyb3dzZXJDb21wb25lbnRNaXhpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdENoaWxkUmVjb25jaWxlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDaGlsZHJlbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDbGFzcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdENvbXBvbmVudEVudmlyb25tZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdENvbXBvc2l0ZUNvbXBvbmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDdXJyZW50T3duZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTUJ1dHRvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01Db21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NRmFjdG9yaWVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTUZlYXR1cmVGbGFncy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01JRE9wZXJhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NSW5wdXQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NT3B0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTVNlbGVjdC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01TZWxlY3Rpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NU2VydmVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTVRleHRDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NVGV4dGFyZWEuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RGVmYXVsdEluamVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RFbGVtZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEVsZW1lbnRWYWxpZGF0b3IuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RW1wdHlDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RFcnJvclV0aWxzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEV2ZW50RW1pdHRlck1peGluLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEV2ZW50TGlzdGVuZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0SW5qZWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdElucHV0U2VsZWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEluc3RhbmNlSGFuZGxlcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RJbnN0YW5jZU1hcC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RJc29tb3JwaGljLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE1hcmt1cENoZWNrc3VtLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE1vdW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE11bHRpQ2hpbGQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE5hdGl2ZUNvbXBvbmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3ROb29wVXBkYXRlUXVldWUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0T3duZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UGVyZi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFJlY29uY2lsZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UmVmLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFJvb3RJbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFNlcnZlclJlbmRlcmluZy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RVcGRhdGVRdWV1ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RVcGRhdGVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFZlcnNpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1NWR0RPTVByb3BlcnR5Q29uZmlnLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9TZWxlY3RFdmVudFBsdWdpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU2VydmVyUmVhY3RSb290SW5kZXguanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1NpbXBsZUV2ZW50UGx1Z2luLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9TeW50aGV0aWNDbGlwYm9hcmRFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljQ29tcG9zaXRpb25FdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljRHJhZ0V2ZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9TeW50aGV0aWNFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljRm9jdXNFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljSW5wdXRFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljS2V5Ym9hcmRFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljTW91c2VFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljVG91Y2hFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljVUlFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljV2hlZWxFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvVHJhbnNhY3Rpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1ZpZXdwb3J0TWV0cmljcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvYWNjdW11bGF0ZUludG8uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2FkbGVyMzIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2NhbkRlZmluZVByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9kYW5nZXJvdXNTdHlsZVZhbHVlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9kZXByZWNhdGVkLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9lc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2ZpbmRET01Ob2RlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9mbGF0dGVuQ2hpbGRyZW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2ZvckVhY2hBY2N1bXVsYXRlZC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZ2V0RXZlbnRDaGFyQ29kZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZ2V0RXZlbnRLZXkuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldEV2ZW50TW9kaWZpZXJTdGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZ2V0RXZlbnRUYXJnZXQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldEl0ZXJhdG9yRm4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldFRleHRDb250ZW50QWNjZXNzb3IuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2lzRXZlbnRTdXBwb3J0ZWQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2lzVGV4dElucHV0RWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvb25seUNoaWxkLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9xdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvcmVuZGVyU3VidHJlZUludG9Db250YWluZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL3NldElubmVySFRNTC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvc2V0VGV4dENvbnRlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL3Nob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi90cmF2ZXJzZUFsbENoaWxkcmVuLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi92YWxpZGF0ZURPTU5lc3RpbmcuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanMiLCJub2RlX21vZHVsZXMvc2hhbGxvdy1lcXVhbHMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdW5kZXJzY29yZS91bmRlcnNjb3JlLmpzIiwic3JjL2xpYi9taW5pZDMuanMiLCJzcmMvbWFpbi9BYnN0cmFjdEZpbGUuanMiLCJzcmMvbWFpbi9Db250aWdJbnRlcnZhbC5qcyIsInNyYy9tYWluL0NvbnRyb2xzLmpzIiwic3JjL21haW4vR0E0R0hBbGlnbm1lbnQuanMiLCJzcmMvbWFpbi9JbnRlcnZhbC5qcyIsInNyYy9tYWluL0xvY2FsU3RyaW5nRmlsZS5qcyIsInNyYy9tYWluL01lbnUuanMiLCJzcmMvbWFpbi9SZW1vdGVGaWxlLmpzIiwic3JjL21haW4vUm9vdC5qcyIsInNyYy9tYWluL1NlcXVlbmNlU3RvcmUuanMiLCJzcmMvbWFpbi9WaXN1YWxpemF0aW9uV3JhcHBlci5qcyIsInNyYy9tYWluL2RhdGEvQmlnQmVkLmpzIiwic3JjL21haW4vZGF0YS9TYW1SZWFkLmpzIiwic3JjL21haW4vZGF0YS9Ud29CaXQuanMiLCJzcmMvbWFpbi9kYXRhL1ZpcnR1YWxPZmZzZXQuanMiLCJzcmMvbWFpbi9kYXRhL2JhaS5qcyIsInNyYy9tYWluL2RhdGEvYmFtLmpzIiwic3JjL21haW4vZGF0YS9iZWR0b29scy5qcyIsInNyYy9tYWluL2RhdGEvZm9ybWF0cy9iYW1UeXBlcy5qcyIsInNyYy9tYWluL2RhdGEvZm9ybWF0cy9iYmkuanMiLCJzcmMvbWFpbi9kYXRhL2Zvcm1hdHMvaGVscGVycy5qcyIsInNyYy9tYWluL2RhdGEvZm9ybWF0cy90d29CaXRUeXBlcy5qcyIsInNyYy9tYWluL2RhdGEvdmNmLmpzIiwic3JjL21haW4vcGlsZXVwLmpzIiwic3JjL21haW4vc2NhbGUuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0JhbURhdGFTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0JpZ0JlZERhdGFTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0VtcHR5U291cmNlLmpzIiwic3JjL21haW4vc291cmNlcy9HQTRHSERhdGFTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL1ZjZkRhdGFTb3VyY2UuanMiLCJzcmMvbWFpbi9zdHlsZS5qcyIsInNyYy9tYWluL3V0aWxzLmpzIiwic3JjL21haW4vdml6L0NvdmVyYWdlQ2FjaGUuanMiLCJzcmMvbWFpbi92aXovQ292ZXJhZ2VUcmFjay5qcyIsInNyYy9tYWluL3Zpei9EaXNwbGF5TW9kZS5qcyIsInNyYy9tYWluL3Zpei9HZW5lVHJhY2suanMiLCJzcmMvbWFpbi92aXovR2Vub21lVHJhY2suanMiLCJzcmMvbWFpbi92aXovTG9jYXRpb25UcmFjay5qcyIsInNyYy9tYWluL3Zpei9QaWxldXBDYWNoZS5qcyIsInNyYy9tYWluL3Zpei9QaWxldXBUcmFjay5qcyIsInNyYy9tYWluL3Zpei9TY2FsZVRyYWNrLmpzIiwic3JjL21haW4vdml6L1RpbGVkQ2FudmFzLmpzIiwic3JjL21haW4vdml6L1ZhcmlhbnRUcmFjay5qcyIsInNyYy9tYWluL3Zpei9jYW52YXMtdXRpbHMuanMiLCJzcmMvbWFpbi92aXovZDN1dGlscy5qcyIsInNyYy9tYWluL3Zpei9waWxldXB1dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtDQ09DLFNBQVMsRUFBTSxHQUdkLEdBQXNCLGtCQUFYLFNBQXlCLE9BQU8sSUFDekMsUUFBUSxhQUFjLFNBQVUsV0FBWSxTQUFTLEVBQUcsRUFBRyxHQUd6RCxFQUFLLFNBQVcsRUFBUSxFQUFNLEVBQVMsRUFBRyxTQUl2QyxJQUF1QixtQkFBWixTQUF5QixDQUN6QyxHQUFJLEdBQUksUUFBUSxhQUNoQixHQUFRLEVBQU0sUUFBUyxPQUl2QixHQUFLLFNBQVcsRUFBUSxLQUFVLEVBQUssRUFBSSxFQUFLLFFBQVUsRUFBSyxPQUFTLEVBQUssT0FBUyxFQUFLLElBRzdGLEtBQU0sU0FBUyxFQUFNLEVBQVUsRUFBRyxHQU9sQyxHQUFJLEdBQW1CLEVBQUssU0FHeEIsS0FFQSxHQURPLEVBQU0sS0FDTCxFQUFNLE1BQ0wsR0FBTSxNQUduQixHQUFTLFFBQVUsUUFJbkIsRUFBUyxFQUFJLEVBSWIsRUFBUyxXQUFhLFdBRXBCLE1BREEsR0FBSyxTQUFXLEVBQ1QsTUFNVCxFQUFTLGFBQWMsRUFNdkIsRUFBUyxhQUFjLENBZXZCLElBQUksR0FBUyxFQUFTLFFBSXBCLEdBQUksU0FBUyxFQUFNLEVBQVUsR0FDM0IsSUFBSyxFQUFVLEtBQU0sS0FBTSxHQUFPLEVBQVUsTUFBYyxFQUFV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RUFBRSxFQUFFLE1BQU0sS0FBSyxJQUFJLFFBQVMsR0FBRSxFQUFFLEdBQUcsTUFBTyxHQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUksR0FBRSxFQUFFLE9BQU8sT0FBTyxFQUFFLEVBQUUsd0JBQXdCLFNBQVMsRUFBRSxLQUFLLElBQUksS0FBSyxLQUFLLEVBQUUsS0FBSyxLQUFLLEtBQUssR0FBRyxLQUFLLFlBQVksS0FBSyxHQUFHLEdBQUUsSUFBSyxHQUFJLEdBQUUsRUFBRSxJQUFJLFFBQVMsR0FBRSxHQUFHLE1BQU8sR0FBRSxFQUFFLFVBQVUsR0FBRyxRQUFTLEdBQUUsR0FBRyxNQUFPLEdBQUUsRUFBRSxVQUFVLEdBQUcsZUFBZSxXQUFXLEdBQUksSUFBRyxFQUFFLGdCQUFnQixFQUFFLFVBQVUsZ0JBQWdCLE1BQU0sS0FBSyxVQUFXLE9BQU8sR0FBRSxjQUFjLEVBQUUsU0FBUyxFQUFFLE9BQU8sUUFBUSxFQUFFLFlBQVksRUFBRSxPQUFPLFNBQVMsTUFBTSxLQUFLLEdBQUksR0FBRSxFQUFFLFFBQVMsU0FBUyxJQUFHLFFBQVMsS0FBSSxXQUFXLFFBQVMsR0FBRSxHQUFHLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUUsS0FBSSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsV0FBVyxLQUFLLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxPQUFPLEdBQUcsR0FBRyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksR0FBRyxHQUFHLElBQUssT0FBTSxHQUFHLEVBQUUsRUFBRSxXQUFXLEtBQUssR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLE9BQU8sR0FBRyxHQUFHLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxHQUFHLElBQUksSUFBSSxHQUFHLEdBQUcsRUFBRSxRQUFRLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBSSxPQUFNLEVBQUUsRUFBRSxXQUFXLEtBQUssR0FBRyxFQUFFLE9BQU8sR0FBRyxHQUFHLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxHQUFHLElBQUksSUFBSSxHQUFHLEdBQUcsRUFBRSxRQUFRLEdBQUcsSUFBSSxHQUFHLElBQUksSUFBSSxHQUFHLEdBQUcsRUFBRSxPQUFPLEdBQUcsR0FBRyxNQUFPLEdBQUUsUUFBUyxHQUFFLEdBQUcsR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFFLEtBQUksRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFHLEdBQUUsRUFBRSxJQUFJLEVBQUUsV0FBVyxZQUFZLEVBQUUsSUFBRyxHQUFJLEVBQUcsS0FBRyxHQUFJLEVBQUUsS0FBTSxHQUFHLEdBQUUsRUFBRSxJQUFJLEVBQUUsV0FBVyxZQUFZLEVBQUUsSUFBRyxHQUFJLEVBQUcsS0FBRyxHQUFJLEVBQUUsS0FBTSxJQUFHLE9BQU8sYUFBYSxHQUFHLEdBQUcsR0FBRyxJQUFJLEVBQUcsR0FBRSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsV0FBVyxLQUFLLElBQUksRUFBRSxNQUFPLEVBQUUsR0FBRSxFQUFFLFNBQVMsRUFBRSxJQUFHLEdBQUksRUFBRyxLQUFHLEdBQUksRUFBRSxLQUFNLElBQUcsT0FBTyxjQUFjLEdBQUcsSUFBSSxHQUFHLEdBQUcsSUFBSSxFQUFHLEdBQUUsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLFdBQVcsS0FBSyxJQUFJLEVBQUUsTUFBTyxFQUFFLEdBQUUsRUFBRSxTQUFTLEVBQUUsSUFBRyxHQUFJLEVBQUcsS0FBRyxHQUFJLEVBQUUsS0FBTSxJQUFHLE9BQU8sY0FBYyxFQUFFLElBQUksRUFBRSxHQUFHLE1BQU8sR0FBRSxHQUFJLEdBQUUsbUVBQW1FLElBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsRUFBRyxJQUFHLEdBQUcsR0FBRyxFQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxFQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsRUFBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxFQUFJLEdBQUUsT0FBTyxFQUFFLEtBQUssR0FBRyxFQUFFLE9BQU8sRUFBRSxLQUFLLEtBQU0sSUFBSSxHQUFFLEVBQUUsU0FBUyxTQUFTLEdBQUcsS0FBSyxLQUFLLEdBQUcsRUFBRSxPQUFPLE1BQU8sS0FBSSxFQUFFLFNBQVMsR0FBRyxHQUFJLEdBQUUsWUFBYSxPQUFPLEdBQUUsVUFBVSxFQUFFLEdBQUksSUFBSSxJQUFJLEdBQUUsRUFBRSxVQUFVLEVBQUUsRUFBRSxVQUFXLEdBQUUsUUFBUSxTQUFTLEdBQUcsTUFBTyxHQUFFLEtBQUssS0FBSyxJQUFJLEVBQUUsT0FBTyxTQUFTLEVBQUUsRUFBRSxHQUFHLE1BQU8sR0FBRSxZQUFZLEVBQUUsT0FBTyxTQUFTLEVBQUUsRUFBRSxLQUFLLEtBQUssUUFBUSxFQUFHLElBQUksR0FBRSxPQUFPLGNBQWUsSUFBRyxFQUFFLElBQUksS0FBSyxRQUFRLE1BQU0sR0FBRyxFQUFFLFdBQVksR0FBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLEdBQUcsSUFBSSxFQUFFLEdBQUcsRUFBRSxPQUFRLElBQUksR0FBRSxnQkFBZ0IsRUFBRSxDQUErMlMsSUFBNzJTLEVBQUUsV0FBVyxTQUFTLEVBQUUsRUFBRSxHQUFHLEdBQUcsRUFBRSxlQUFlLEtBQUssVUFBVSxNQUFPLEdBQUUsS0FBSyxTQUFVLElBQUksR0FBRSxFQUFFLEtBQUssS0FBSyxFQUFHLE9BQU8sR0FBRSxFQUFFLEtBQUssVUFBVSxNQUFNLEdBQUcsR0FBRyxHQUFHLEVBQUUsV0FBVyxTQUFTLEdBQUcsYUFBYyxJQUFHLElBQUksWUFBWSxFQUFFLENBQUUsS0FBSSxTQUFTLE1BQU8sTUFBSyxTQUFTLEVBQUcsS0FBSSxTQUFTLE1BQU8sTUFBSyxXQUFXLFNBQVMsR0FBRyxNQUFPLEtBQUssSUFBSSxLQUFJLFdBQVcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEtBQUssU0FBUyxPQUFPLEVBQUUsRUFBRSxJQUFJLENBQUMsR0FBSSxHQUFFLEtBQUssU0FBUyxFQUFHLElBQUcsRUFBRSxLQUFLLEtBQUssR0FBRyxNQUFPLE1BQUssRUFBRSxVQUFVLFNBQVMsRUFBRSxHQUFHLEtBQUssU0FBUyxRQUFRLEVBQUcsSUFBSSxHQUFFLEVBQUUsS0FBSyxLQUFNLE9BQU8sTUFBSyxTQUFTLFFBQVEsR0FBRyxFQUFFLFdBQVcsUUFBUSxTQUFTLEVBQUUsR0FBRyxRQUFTLEdBQUUsRUFBRSxHQUFHLEdBQUksR0FBRSxFQUFFLEVBQUcsS0FBSSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLE1BQU0sR0FBSSxHQUFFLEVBQUUsSUFBSyxPQUFPLEdBQUUsU0FBUyxTQUFTLEdBQUcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxZQUFZLFNBQVMsR0FBRyxFQUFFLE1BQU0sS0FBSyxLQUFLLEVBQUUsYUFBYSxTQUFTLEdBQUcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUksR0FBRSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUcsS0FBSSxLQUFLLEdBQUcsRUFBRSxPQUFPLEVBQUUsVUFBVSxTQUFTLEdBQUcsRUFBRSxLQUFLLEtBQUssS0FBSyxHQUFHLEdBQUcsZUFBZSxTQUFTLEdBQUcsTUFBTyxHQUFFLE1BQU0sT0FBTyxFQUFFLEtBQUssRUFBRSxRQUFRLFFBQVEsU0FBUyxFQUFFLEdBQUcsTUFBTyxNQUFJLEdBQUksZ0JBQWlCLEdBQUUsS0FBSyxPQUFPLFdBQVcsR0FBRyxHQUFHLEVBQUUsS0FBSyxLQUFLLE9BQU8sS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFLFVBQVUsRUFBRSxFQUFFLFdBQVcsVUFBVSxXQUFXLEtBQUssV0FBVyxLQUFLLFlBQVksWUFBWSxPQUFPLEtBQUssa0JBQWtCLFNBQVMsV0FBVyxNQUFPLE1BQUssT0FBTyxLQUFLLEtBQUssV0FBVyxVQUFVLFNBQVMsR0FBRyxNQUFPLE1BQUssT0FBTyxNQUFNLEtBQUssU0FBUyxNQUFNLEVBQUUsRUFBRSxXQUFXLEtBQUssRUFBRSxVQUFVLFNBQVMsTUFBTSxFQUFFLFVBQVUsWUFBWSxFQUFFLFNBQVMsRUFBRSxFQUFFLEdBQUcsU0FBUyxFQUFFLEdBQUcsR0FBSSxHQUFFLEVBQUUsS0FBSyxFQUFFLEtBQU0sT0FBTyxHQUFFLEdBQUcsRUFBRSxFQUFFLFFBQVEsSUFBSSxHQUFHLEVBQUUsY0FBYyxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLFdBQVcsTUFBTyxHQUFFLE9BQU8sSUFBRyxHQUFJLEdBQUcsRUFBRSxLQUFLLFNBQVMsRUFBRSxHQUFHLEdBQUcsRUFBRSxLQUFLLFFBQVEsR0FBRyxTQUFTLEVBQUUsQ0FBQyxHQUFJLEdBQUUsS0FBSyxLQUFLLE1BQU8sTUFBSyxLQUFLLEtBQUssRUFBRyxJQUFJLEdBQUUsRUFBRSxLQUFLLEtBQU0sT0FBTyxNQUFLLEtBQUssS0FBSyxHQUFHLEVBQUUsTUFBTyxNQUFLLEtBQUssS0FBSyxJQUFJLEVBQUUsS0FBSyxXQUFXLE1BQU8sTUFBSyxLQUFLLFFBQVEsRUFBRSxLQUFLLFNBQVMsRUFBRSxHQUFHLE1BQU8sTUFBSyxLQUFLLEtBQUssT0FBTyxLQUFLLFFBQVEsR0FBRyxJQUFJLEVBQUUsTUFBTSxTQUFTLEVBQUUsRUFBRSxHQUFHLE1BQU8sSUFBSSxHQUFFLEtBQUssS0FBSyxNQUFNLEVBQUUsRUFBRSxHQUFHLEtBQUssVUFBVSxFQUFFLFNBQVMsU0FBUyxFQUFFLEdBQUcsYUFBYyxJQUFHLElBQUksU0FBUyxLQUFLLElBQUssTUFBSyxTQUFTLEtBQU0sSUFBSSxnQkFBZSxpQkFBaUIsRUFBRyxPQUFPLE1BQUssU0FBUyxLQUFLLFFBQVEsR0FBRyxFQUFHLEtBQUksU0FBUyxNQUFPLE1BQUssU0FBUyxFQUFFLFVBQVUsR0FBSSxLQUFJLFNBQVMsR0FBRyxFQUFFLEVBQUUsR0FBRyxDQUFDLEdBQUksR0FBRSxJQUFLLE9BQU8sR0FBRSxRQUFRLE1BQU0sU0FBUyxHQUFHLE1BQU8sR0FBRSxRQUFRLEtBQUssTUFBTyxHQUFFLEVBQUUsT0FBTyxLQUFLLFdBQVcsRUFBRSxTQUFTLEdBQUcsTUFBTyxNQUFLLFFBQVEsRUFBRSxHQUFHLEVBQUUsTUFBTSxNQUFLLEdBQUksS0FBSyxXQUFXLEVBQUUsU0FBUyxHQUFHLE1BQU8sTUFBSyxRQUFRLEVBQUUsUUFBUSxNQUFLLEtBQU0sRUFBRSxRQUFRLFNBQVMsRUFBRSxHQUFHLEdBQUksR0FBRSxLQUFLLFNBQVMsRUFBRSxFQUFHLE9BQU8sS0FBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssZ0JBQWlCLEdBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxHQUFHLElBQUksRUFBRSxNQUFNLEdBQUcsS0FBSyxNQUFNLElBQUksU0FBUyxPQUFPLElBQUksR0FBRyxFQUFFLFFBQVEsU0FBUyxFQUFFLEVBQUUsR0FBRyxHQUFHLFNBQVMsRUFBRSxDQUFDLEVBQUUsS0FBSyxRQUFRLEVBQUcsSUFBSSxHQUFFLEtBQUssT0FBTyxXQUFXLE1BQU8sR0FBRSxLQUFLLEtBQUssRUFBRSxlQUFlLE1BQU0sS0FBSyxTQUFTLEtBQUssSUFBSSxFQUFFLEtBQUssSUFBSSxFQUFHLE9BQU8sVUFBUyxFQUFFLEtBQUssS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLFFBQVEsRUFBRSxLQUFLLFNBQVMsRUFBRSxHQUFHLE1BQU8sTUFBSyxRQUFRLEVBQUUsRUFBRSxTQUFTLEVBQUUsR0FBRyxNQUFPLEdBQUUsS0FBSyxNQUFNLEVBQUUsUUFBUSxXQUFXLE1BQU8sTUFBSyxLQUFLLGNBQWMsSUFBSSxFQUFFLE1BQU0sU0FBUyxFQUFFLEVBQUUsR0FBRyxNQUFPLE1BQUssUUFBUSxFQUFFLEVBQUUsU0FBUyxFQUFFLEdBQUcsR0FBSSxHQUFFLEtBQUssTUFBTyxPQUFPLEdBQUUsTUFBTSxFQUFFLEdBQUcsS0FBSyxPQUFPLEtBQUssRUFBRSxTQUFTLFNBQVMsR0FBRyxNQUFPLE1BQUssTUFBTSxjQUFjLEVBQUUsSUFBSSxTQUFTLEVBQUUsR0FBRyxJQUFJLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxJQUFJLENBQUMsR0FBSSxHQUFFLEVBQUUsRUFBRyxHQUFFLEVBQUUsZUFBZSxFQUFFLEdBQUcsU0FBUyxNQUFNLEdBQUcsUUFBUSxnQkFBZ0IsS0FBSyxXQUFXLE1BQU8sTUFBSyxLQUFLLE1BQU0sS0FBSyxVQUFVLE9BQU8sS0FBSyxlQUFlLE1BQU0sU0FBUyxHQUFHLEtBQUssS0FBSyxRQUFRLEtBQUssVUFBVSxFQUFFLEtBQUssa0JBQWtCLFFBQVEsU0FBUyxTQUFTLFNBQVMsT0FBTyxRQUFRLFFBQVEsUUFBUSxVQUFVLFVBQVUsU0FBUyxFQUFFLEdBQUcsS0FBTyxFQUFFLE1BQU0sTUFBUSxFQUFFLFFBQVEsT0FBUyxFQUFFLFVBQVUsRUFBRSxNQUFNLEdBQUcsUUFBUSxXQUFXLFVBQVUsS0FBSyxXQUFXLEdBQUksR0FBRSxLQUFLLFFBQVEsS0FBSyxPQUFRLElBQUcsS0FBSyxXQUFXLEVBQUUsTUFBTSxNQUFPLE1BQUssS0FBSyxTQUFTLEVBQUUsUUFBTyxHQUFHLEVBQUksSUFBSSxFQUFFLElBQUcsU0FBUyxFQUFFLENBQUMsRUFBRSxHQUFJLE9BQU0sRUFBRyxLQUFJLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRyxLQUFLLGVBQWUsQ0FBQyxHQUFJLEdBQUUsS0FBSyxLQUFLLFVBQVcsS0FBSSxLQUFLLEtBQUssT0FBTyxPQUFPLEdBQUcsRUFBRSxLQUFLLEtBQUssWUFBWSxNQUFPLElBQUcsTUFBTSxTQUFTLEdBQUcsR0FBRyxLQUFLLFdBQVcsRUFBRSxNQUFNLE1BQU8sTUFBSyxLQUFLLFdBQVcsRUFBRyxLQUFJLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxJQUFJLEtBQUssVUFBVSxFQUFFLE9BQU8sRUFBRSxPQUFPLEdBQUcsUUFBUSxTQUFTLFdBQVcsS0FBSyxXQUFXLEdBQUksR0FBRSxLQUFLLE9BQU8sT0FBTyxFQUFFLEtBQUssT0FBTyxLQUFLLEtBQUssUUFBUSxLQUFLLFNBQVMsRUFBRSxLQUFLLEtBQUssTUFBTSxFQUFFLEVBQUcsT0FBTyxJQUFJLEdBQUUsRUFBRSxLQUFLLFVBQVUsTUFBTSxTQUFTLEdBQUcsS0FBSyxPQUFPLE1BQU0sT0FBTyxFQUFFLEtBQUssT0FBTyxPQUFPLEVBQUUsU0FBUyxHQUFHLFFBQVEsV0FBVyxLQUFLLFdBQVcsTUFBTyxNQUFLLEtBQUssWUFBWSxLQUFLLFVBQVUsTUFBTSxTQUFTLEdBQUcsS0FBSyxLQUFLLGNBQWMsRUFBRSxLQUFLLFlBQVksRUFBRSxLQUFLLEdBQUcsUUFBUSxVQUFVLEtBQUssV0FBVyxNQUFPLE1BQUssS0FBSyxTQUFTLEtBQUssUUFBUSxLQUFLLFVBQVUsTUFBTSxTQUFTLEdBQUcsS0FBSyxLQUFLLFdBQVcsR0FBRSxNQUFPLEVBQVMsTUFBRSxHQUFHLFFBQVEsV0FBVyxRQUFRLFVBQVUsS0FBSyxXQUFXLEdBQUksR0FBRSxLQUFLLFVBQVcsSUFBRyxLQUFLLFFBQVEsSUFBSSxLQUFLLE1BQU0sQ0FBQyxHQUFHLEVBQUUsS0FBSyxPQUFPLFVBQVUsTUFBTyxNQUFLLE9BQU8sRUFBRyxNQUFNLElBQUksV0FBVSxxQkFBcUIsRUFBRSxRQUFRLEtBQUssTUFBTSxNQUFNLE1BQU8sSUFBRyxNQUFNLFNBQVMsR0FBRyxLQUFLLFVBQVUsS0FBSyxRQUFRLFNBQVMsRUFBRSxLQUFLLE1BQU0sTUFBTSxFQUFRLEtBQUUsR0FBRyxRQUFRLFdBQVcsV0FBVyxVQUFVLFNBQVMsRUFBRSxHQUFHLEtBQUssY0FBZSxLQUFJLEdBQUksS0FBSyxHQUFFLEtBQUssWUFBWSxFQUFFLElBQUksR0FBRyxLQUFLLFdBQVcsR0FBSSxHQUFFLEtBQUssVUFBVyxPQUFPLEtBQUssTUFBSyxRQUFRLEtBQUssUUFBUSxHQUFHLEdBQUcsTUFBTSxTQUFTLEdBQUcsS0FBSyxVQUFVLElBQUssTUFBSyxZQUFZLEtBQUssWUFBWSxHQUFHLE1BQU0sRUFBRSxPQUFPLEdBQUcsVUFBVSxXQUFXLEtBQUssTUFBTSxXQUFXLFFBQVEsU0FBUyxHQUFHLElBQUksR0FBSSxHQUFFLEtBQUssTUFBTSxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUksT0FBTSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUksTUFBSyxNQUFNLEdBQUcsS0FBSyxXQUFXLEdBQUksR0FBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLE9BQU8sS0FBSyxFQUFFLEdBQUksT0FBTyxNQUFLLE9BQU8sVUFBVSxFQUFFLFdBQVcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsS0FBSyxLQUFLLEVBQUUsT0FBTyxHQUFHLE1BQU0sU0FBUyxHQUFHLEdBQUksR0FBRSxLQUFLLEtBQU0sTUFBSyxPQUFPLFVBQVUsRUFBRSxXQUFXLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksS0FBSyxNQUFNLEVBQUUsR0FBRyxRQUFRLEVBQU0sR0FBRSxHQUFHLFFBQVEsWUFBWSxXQUFXLGFBQWEsWUFBWSxXQUFXLGFBQWEsWUFBWSxXQUFXLE1BQU8sTUFBSyxRQUFRLEtBQUssV0FBVyxLQUFLLFNBQVMsS0FBSyxhQUFhLEVBQUUsT0FBTyxFQUFFLE1BQU0sR0FBRyxVQUFVLFNBQVMsRUFBRSxFQUFFLEdBQUcsS0FBSyxVQUFVLEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEdBQUcsT0FBTyxlQUFlLFFBQVEsWUFBWSxVQUFVLFlBQVksV0FBVyxPQUFPLFNBQVMsS0FBSyxPQUFPLEtBQUssT0FBTyxVQUFVLEtBQUssV0FBVyxHQUFJLEdBQUUsU0FBUyxHQUFHLE1BQU8sS0FBSSxVQUFVLE9BQU8sU0FBVSxHQUFFLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLEtBQUssRUFBRSxXQUFXLEVBQUUsR0FBRyxZQUFXLEVBQUcsTUFBTSxJQUFJLE1BQU8sT0FBTyxHQUFFLEtBQUssU0FBUSxFQUFHLEVBQUUsR0FBRyxPQUFPLEVBQUUsS0FBSyxZQUFZLFNBQVMsS0FBSyxPQUFPLFNBQVMsVUFBVSxVQUFVLEtBQUssYUFBYSxNQUFNLFNBQVMsR0FBRyxFQUFFLGFBQWEsRUFBRSxLQUFLLFFBQVEsS0FBSyxPQUFPLE1BQU0sS0FBSyxVQUFVLEtBQUssS0FBSyxVQUFVLEVBQUUsV0FBVyxFQUFFLE9BQU8sR0FBRyxRQUFRLFlBQVksU0FBUyxRQUFRLFNBQVMsR0FBRyxHQUFJLEtBQUssS0FBSSxHQUFJLEtBQUssTUFBSyxVQUFVLEVBQUUsR0FBRyxFQUFFLEtBQUssVUFBVSxHQUFHLFVBQVUsS0FBSyxVQUFVLEdBQUcsRUFBRSxLQUFLLFVBQVUsR0FBSSxNQUFLLFVBQVUsR0FBRyxLQUFLLFdBQVcsR0FBSSxHQUFFLEtBQUssRUFBRSxLQUFLLFVBQVUsRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLFNBQVUsT0FBTyxNQUFLLE9BQU8sVUFBVSxFQUFFLFdBQVcsSUFBSSxHQUFJLEtBQUssR0FBRSxLQUFLLE9BQU8sV0FBVyxHQUFJLEdBQUUsRUFBRSxFQUFFLEdBQUcsVUFBVSxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSyxLQUFLLEVBQUUsR0FBSSxVQUFTLElBQUksRUFBRSxHQUFHLElBQUksR0FBRyxLQUFLLFFBQVEsR0FBRyxNQUFNLFNBQVMsR0FBRyxHQUFJLEdBQUUsS0FBSyxFQUFFLEtBQUssU0FBVSxNQUFLLE9BQU8sVUFBVSxFQUFFLFdBQVcsSUFBSSxHQUFJLEtBQUssR0FBRSxLQUFLLE9BQU8sV0FBVyxFQUFFLEVBQUUsR0FBRyxVQUFVLEVBQUUsR0FBRyxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSyxNQUFNLEVBQUUsR0FBRyxFQUFFLEtBQUssR0FBRyxLQUFLLFdBQVcsRUFBRSxLQUFLLEdBQUcsUUFBUSxVQUFVLEtBQUssV0FBVyxLQUFLLEtBQUssS0FBSyxLQUFLLFFBQVEsS0FBSyxVQUFVLE1BQU0sV0FBVyxLQUFLLFVBQVUsRUFBRSxPQUFPLEdBQUcsUUFBUSxTQUFTLFlBQVksS0FBSyxXQUFXLE1BQU8sTUFBSyxLQUFLLFVBQVUsS0FBSyxRQUFRLEtBQUssUUFBUSxPQUFPLEtBQUssV0FBVyxNQUFNLFNBQVMsR0FBRyxLQUFLLEtBQUssWUFBWSxFQUFFLEtBQUssYUFBYSxFQUFFLFFBQVEsR0FBRyxRQUFRLFNBQVMsWUFBWSxLQUFLLFdBQVcsR0FBSSxHQUFFLEtBQUssS0FBSyxFQUFFLEtBQUssTUFBTyxJQUFHLFNBQVMsRUFBRSxDQUFDLEdBQUksR0FBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLENBQUUsS0FBSSxFQUFFLEVBQUUsV0FBVyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsYUFBYSxHQUFJLElBQUksR0FBRSxFQUFFLFVBQVUsRUFBRSxFQUFFLEtBQUssU0FBVSxPQUFPLEdBQUUsR0FBRyxFQUFFLEtBQUssR0FBRyxF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QU0sRUFBUSxJQVduRSxPQVJBLEVBQU8sTUFDTCxHQUFJLEVBQUcsR0FDUCxPQUFRLEVBQUcsT0FDWCxJQUFLLEVBQ0wsTUFBTyxPQUlELEVBQUcsSUFDVCxJQUFLLFNBQVEsTUFDYixJQUFLLFNBQVEsT0FDYixJQUFLLFNBQVEsS0FDYixJQUFLLFNBQVEsU0FDYixJQUFLLFNBQVEsWUFDWCxHQUFVLEVBQUcsT0FJakIsT0FBUSxFQUFHLElBQ1QsSUFBSyxTQUFRLE1BQ2IsSUFBSyxTQUFRLE9BQ2IsSUFBSyxTQUFRLFNBQ2IsSUFBSyxTQUFRLFNBQ2IsSUFBSyxTQUFRLFlBQ1gsR0FBVSxFQUFHLFFBU25CLE1BSkksSUFBYyxJQUNoQixFQUFPLEdBQVksTUFBNEIsS0FBcEIsRUFBSyxZQUFxQixJQUFNLE1BSTNELElBQUssRUFDTCxXQUFBLHlEQXJGSixJQUFJLFVBQ0YsTUFBTyxJQUNQLE9BQVEsSUFDUixPQUFRLElBQ1IsS0FBTSxJQUNOLFNBQVUsSUFDVixTQUFVLElBQ1YsUUFBUyxJQUNULFNBQVUsSUFDVixZQUFhLElBZ0ZmLFFBQU8sU0FDTCxPQUFBLE9BQ0EsWUFBQSxZQUNBLFVBQUEsVUFDQSxRQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vICAgICBCYWNrYm9uZS5qcyAxLjEuMlxuXG4vLyAgICAgKGMpIDIwMTAtMjAxNCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIEJhY2tib25lIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLy8gICAgIEZvciBhbGwgZGV0YWlscyBhbmQgZG9jdW1lbnRhdGlvbjpcbi8vICAgICBodHRwOi8vYmFja2JvbmVqcy5vcmdcblxuKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblxuICAvLyBTZXQgdXAgQmFja2JvbmUgYXBwcm9wcmlhdGVseSBmb3IgdGhlIGVudmlyb25tZW50LiBTdGFydCB3aXRoIEFNRC5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbJ3VuZGVyc2NvcmUnLCAnanF1ZXJ5JywgJ2V4cG9ydHMnXSwgZnVuY3Rpb24oXywgJCwgZXhwb3J0cykge1xuICAgICAgLy8gRXhwb3J0IGdsb2JhbCBldmVuIGluIEFNRCBjYXNlIGluIGNhc2UgdGhpcyBzY3JpcHQgaXMgbG9hZGVkIHdpdGhcbiAgICAgIC8vIG90aGVycyB0aGF0IG1heSBzdGlsbCBleHBlY3QgYSBnbG9iYWwgQmFja2JvbmUuXG4gICAgICByb290LkJhY2tib25lID0gZmFjdG9yeShyb290LCBleHBvcnRzLCBfLCAkKTtcbiAgICB9KTtcblxuICAvLyBOZXh0IGZvciBOb2RlLmpzIG9yIENvbW1vbkpTLiBqUXVlcnkgbWF5IG5vdCBiZSBuZWVkZWQgYXMgYSBtb2R1bGUuXG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIF8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyk7XG4gICAgZmFjdG9yeShyb290LCBleHBvcnRzLCBfKTtcblxuICAvLyBGaW5hbGx5LCBhcyBhIGJyb3dzZXIgZ2xvYmFsLlxuICB9IGVsc2Uge1xuICAgIHJvb3QuQmFja2JvbmUgPSBmYWN0b3J5KHJvb3QsIHt9LCByb290Ll8sIChyb290LmpRdWVyeSB8fCByb290LlplcHRvIHx8IHJvb3QuZW5kZXIgfHwgcm9vdC4kKSk7XG4gIH1cblxufSh0aGlzLCBmdW5jdGlvbihyb290LCBCYWNrYm9uZSwgXywgJCkge1xuXG4gIC8vIEluaXRpYWwgU2V0dXBcbiAgLy8gLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgQmFja2JvbmVgIHZhcmlhYmxlLCBzbyB0aGF0IGl0IGNhbiBiZVxuICAvLyByZXN0b3JlZCBsYXRlciBvbiwgaWYgYG5vQ29uZmxpY3RgIGlzIHVzZWQuXG4gIHZhciBwcmV2aW91c0JhY2tib25lID0gcm9vdC5CYWNrYm9uZTtcblxuICAvLyBDcmVhdGUgbG9jYWwgcmVmZXJlbmNlcyB0byBhcnJheSBtZXRob2RzIHdlJ2xsIHdhbnQgdG8gdXNlIGxhdGVyLlxuICB2YXIgYXJyYXkgPSBbXTtcbiAgdmFyIHB1c2ggPSBhcnJheS5wdXNoO1xuICB2YXIgc2xpY2UgPSBhcnJheS5zbGljZTtcbiAgdmFyIHNwbGljZSA9IGFycmF5LnNwbGljZTtcblxuICAvLyBDdXJyZW50IHZlcnNpb24gb2YgdGhlIGxpYnJhcnkuIEtlZXAgaW4gc3luYyB3aXRoIGBwYWNrYWdlLmpzb25gLlxuICBCYWNrYm9uZS5WRVJTSU9OID0gJzEuMS4yJztcblxuICAvLyBGb3IgQmFja2JvbmUncyBwdXJwb3NlcywgalF1ZXJ5LCBaZXB0bywgRW5kZXIsIG9yIE15IExpYnJhcnkgKGtpZGRpbmcpIG93bnNcbiAgLy8gdGhlIGAkYCB2YXJpYWJsZS5cbiAgQmFja2JvbmUuJCA9ICQ7XG5cbiAgLy8gUnVucyBCYWNrYm9uZS5qcyBpbiAqbm9Db25mbGljdCogbW9kZSwgcmV0dXJuaW5nIHRoZSBgQmFja2JvbmVgIHZhcmlhYmxlXG4gIC8vIHRvIGl0cyBwcmV2aW91cyBvd25lci4gUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGlzIEJhY2tib25lIG9iamVjdC5cbiAgQmFja2JvbmUubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJvb3QuQmFja2JvbmUgPSBwcmV2aW91c0JhY2tib25lO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIFR1cm4gb24gYGVtdWxhdGVIVFRQYCB0byBzdXBwb3J0IGxlZ2FjeSBIVFRQIHNlcnZlcnMuIFNldHRpbmcgdGhpcyBvcHRpb25cbiAgLy8gd2lsbCBmYWtlIGBcIlBBVENIXCJgLCBgXCJQVVRcImAgYW5kIGBcIkRFTEVURVwiYCByZXF1ZXN0cyB2aWEgdGhlIGBfbWV0aG9kYCBwYXJhbWV0ZXIgYW5kXG4gIC8vIHNldCBhIGBYLUh0dHAtTWV0aG9kLU92ZXJyaWRlYCBoZWFkZXIuXG4gIEJhY2tib25lLmVtdWxhdGVIVFRQID0gZmFsc2U7XG5cbiAgLy8gVHVybiBvbiBgZW11bGF0ZUpTT05gIHRvIHN1cHBvcnQgbGVnYWN5IHNlcnZlcnMgdGhhdCBjYW4ndCBkZWFsIHdpdGggZGlyZWN0XG4gIC8vIGBhcHBsaWNhdGlvbi9qc29uYCByZXF1ZXN0cyAuLi4gd2lsbCBlbmNvZGUgdGhlIGJvZHkgYXNcbiAgLy8gYGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZGAgaW5zdGVhZCBhbmQgd2lsbCBzZW5kIHRoZSBtb2RlbCBpbiBhXG4gIC8vIGZvcm0gcGFyYW0gbmFtZWQgYG1vZGVsYC5cbiAgQmFja2JvbmUuZW11bGF0ZUpTT04gPSBmYWxzZTtcblxuICAvLyBCYWNrYm9uZS5FdmVudHNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gQSBtb2R1bGUgdGhhdCBjYW4gYmUgbWl4ZWQgaW4gdG8gKmFueSBvYmplY3QqIGluIG9yZGVyIHRvIHByb3ZpZGUgaXQgd2l0aFxuICAvLyBjdXN0b20gZXZlbnRzLiBZb3UgbWF5IGJpbmQgd2l0aCBgb25gIG9yIHJlbW92ZSB3aXRoIGBvZmZgIGNhbGxiYWNrXG4gIC8vIGZ1bmN0aW9ucyB0byBhbiBldmVudDsgYHRyaWdnZXJgLWluZyBhbiBldmVudCBmaXJlcyBhbGwgY2FsbGJhY2tzIGluXG4gIC8vIHN1Y2Nlc3Npb24uXG4gIC8vXG4gIC8vICAgICB2YXIgb2JqZWN0ID0ge307XG4gIC8vICAgICBfLmV4dGVuZChvYmplY3QsIEJhY2tib25lLkV2ZW50cyk7XG4gIC8vICAgICBvYmplY3Qub24oJ2V4cGFuZCcsIGZ1bmN0aW9uKCl7IGFsZXJ0KCdleHBhbmRlZCcpOyB9KTtcbiAgLy8gICAgIG9iamVjdC50cmlnZ2VyKCdleHBhbmQnKTtcbiAgLy9cbiAgdmFyIEV2ZW50cyA9IEJhY2tib25lLkV2ZW50cyA9IHtcblxuICAgIC8vIEJpbmQgYW4gZXZlbnQgdG8gYSBgY2FsbGJhY2tgIGZ1bmN0aW9uLiBQYXNzaW5nIGBcImFsbFwiYCB3aWxsIGJpbmRcbiAgICAvLyB0aGUgY2FsbGJhY2sgdG8gYWxsIGV2ZW50cyBmaXJlZC5cbiAgICBvbjogZnVuY3Rpb24obmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICAgIGlmICghZXZlbnRzQXBpKHRoaXMsICdvbicsIG5hbWUsIFtjYWxsYmFjaywgY29udGV4dF0pIHx8ICFjYWxsYmFjaykgcmV0dXJuIHRoaXM7XG4gICAgICB0aGlzLl9ldmVudHMgfHwgKHRoaXMuX2V2ZW50cyA9IHt9KTtcbiAgICAgIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHNbbmFtZV0gfHwgKHRoaXMuX2V2ZW50c1tuYW1lXSA9IFtdKTtcbiAgICAgIGV2ZW50cy5wdXNoKHtjYWxsYmFjazogY2FsbGJhY2ssIGNvbnRleHQ6IGNvbnRleHQsIGN0eDogY29udGV4dCB8fCB0aGlzfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQmluZCBhbiBldmVudCB0byBvbmx5IGJlIHRyaWdnZXJlZCBhIHNpbmdsZSB0aW1lLiBBZnRlciB0aGUgZmlyc3QgdGltZVxuICAgIC8vIHRoZSBjYWxsYmFjayBpcyBpbnZva2VkLCBpdCB3aWxsIGJlIHJlbW92ZWQuXG4gICAgb25jZTogZnVuY3Rpb24obmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICAgIGlmICghZXZlbnRzQXBpKHRoaXMsICdvbmNlJywgbmFtZSwgW2NhbGxiYWNrLCBjb250ZXh0XSkgfHwgIWNhbGxiYWNrKSByZXR1cm4gdGhpcztcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBvbmNlID0gXy5vbmNlKGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxmLm9mZihuYW1lLCBvbmNlKTtcbiAgICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0pO1xuICAgICAgb25jZS5fY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgIHJldHVybiB0aGlzLm9uKG5hbWUsIG9uY2UsIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgb25lIG9yIG1hbnkgY2FsbGJhY2tzLiBJZiBgY29udGV4dGAgaXMgbnVsbCwgcmVtb3ZlcyBhbGxcbiAgICAvLyBjYWxsYmFja3Mgd2l0aCB0aGF0IGZ1bmN0aW9uLiBJZiBgY2FsbGJhY2tgIGlzIG51bGwsIHJlbW92ZXMgYWxsXG4gICAgLy8gY2FsbGJhY2tzIGZvciB0aGUgZXZlbnQuIElmIGBuYW1lYCBpcyBudWxsLCByZW1vdmVzIGFsbCBib3VuZFxuICAgIC8vIGNhbGxiYWNrcyBmb3IgYWxsIGV2ZW50cy5cbiAgICBvZmY6IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgICB2YXIgcmV0YWluLCBldiwgZXZlbnRzLCBuYW1lcywgaSwgbCwgaiwgaztcbiAgICAgIGlmICghdGhpcy5fZXZlbnRzIHx8ICFldmVudHNBcGkodGhpcywgJ29mZicsIG5hbWUsIFtjYWxsYmFjaywgY29udGV4dF0pKSByZXR1cm4gdGhpcztcbiAgICAgIGlmICghbmFtZSAmJiAhY2FsbGJhY2sgJiYgIWNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gdm9pZCAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIG5hbWVzID0gbmFtZSA/IFtuYW1lXSA6IF8ua2V5cyh0aGlzLl9ldmVudHMpO1xuICAgICAgZm9yIChpID0gMCwgbCA9IG5hbWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBuYW1lID0gbmFtZXNbaV07XG4gICAgICAgIGlmIChldmVudHMgPSB0aGlzLl9ldmVudHNbbmFtZV0pIHtcbiAgICAgICAgICB0aGlzLl9ldmVudHNbbmFtZV0gPSByZXRhaW4gPSBbXTtcbiAgICAgICAgICBpZiAoY2FsbGJhY2sgfHwgY29udGV4dCkge1xuICAgICAgICAgICAgZm9yIChqID0gMCwgayA9IGV2ZW50cy5sZW5ndGg7IGogPCBrOyBqKyspIHtcbiAgICAgICAgICAgICAgZXYgPSBldmVudHNbal07XG4gICAgICAgICAgICAgIGlmICgoY2FsbGJhY2sgJiYgY2FsbGJhY2sgIT09IGV2LmNhbGxiYWNrICYmIGNhbGxiYWNrICE9PSBldi5jYWxsYmFjay5fY2FsbGJhY2spIHx8XG4gICAgICAgICAgICAgICAgICAoY29udGV4dCAmJiBjb250ZXh0ICE9PSBldi5jb250ZXh0KSkge1xuICAgICAgICAgICAgICAgIHJldGFpbi5wdXNoKGV2KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIXJldGFpbi5sZW5ndGgpIGRlbGV0ZSB0aGlzLl9ldmVudHNbbmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFRyaWdnZXIgb25lIG9yIG1hbnkgZXZlbnRzLCBmaXJpbmcgYWxsIGJvdW5kIGNhbGxiYWNrcy4gQ2FsbGJhY2tzIGFyZVxuICAgIC8vIHBhc3NlZCB0aGUgc2FtZSBhcmd1bWVudHMgYXMgYHRyaWdnZXJgIGlzLCBhcGFydCBmcm9tIHRoZSBldmVudCBuYW1lXG4gICAgLy8gKHVubGVzcyB5b3UncmUgbGlzdGVuaW5nIG9uIGBcImFsbFwiYCwgd2hpY2ggd2lsbCBjYXVzZSB5b3VyIGNhbGxiYWNrIHRvXG4gICAgLy8gcmVjZWl2ZSB0aGUgdHJ1ZSBuYW1lIG9mIHRoZSBldmVudCBhcyB0aGUgZmlyc3QgYXJndW1lbnQpLlxuICAgIHRyaWdnZXI6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIGlmICghdGhpcy5fZXZlbnRzKSByZXR1cm4gdGhpcztcbiAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgaWYgKCFldmVudHNBcGkodGhpcywgJ3RyaWdnZXInLCBuYW1lLCBhcmdzKSkgcmV0dXJuIHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzW25hbWVdO1xuICAgICAgdmFyIGFsbEV2ZW50cyA9IHRoaXMuX2V2ZW50cy5hbGw7XG4gICAgICBpZiAoZXZlbnRzKSB0cmlnZ2VyRXZlbnRzKGV2ZW50cywgYXJncyk7XG4gICAgICBpZiAoYWxsRXZlbnRzKSB0cmlnZ2VyRXZlbnRzKGFsbEV2ZW50cywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBUZWxsIHRoaXMgb2JqZWN0IHRvIHN0b3AgbGlzdGVuaW5nIHRvIGVpdGhlciBzcGVjaWZpYyBldmVudHMgLi4uIG9yXG4gICAgLy8gdG8gZXZlcnkgb2JqZWN0IGl0J3MgY3VycmVudGx5IGxpc3RlbmluZyB0by5cbiAgICBzdG9wTGlzdGVuaW5nOiBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgbGlzdGVuaW5nVG8gPSB0aGlzLl9saXN0ZW5pbmdUbztcbiAgICAgIGlmICghbGlzdGVuaW5nVG8pIHJldHVybiB0aGlzO1xuICAgICAgdmFyIHJlbW92ZSA9ICFuYW1lICYmICFjYWxsYmFjaztcbiAgICAgIGlmICghY2FsbGJhY2sgJiYgdHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSBjYWxsYmFjayA9IHRoaXM7XG4gICAgICBpZiAob2JqKSAobGlzdGVuaW5nVG8gPSB7fSlbb2JqLl9saXN0ZW5JZF0gPSBvYmo7XG4gICAgICBmb3IgKHZhciBpZCBpbiBsaXN0ZW5pbmdUbykge1xuICAgICAgICBvYmogPSBsaXN0ZW5pbmdUb1tpZF07XG4gICAgICAgIG9iai5vZmYobmFtZSwgY2FsbGJhY2ssIHRoaXMpO1xuICAgICAgICBpZiAocmVtb3ZlIHx8IF8uaXNFbXB0eShvYmouX2V2ZW50cykpIGRlbGV0ZSB0aGlzLl9saXN0ZW5pbmdUb1tpZF07XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgfTtcblxuICAvLyBSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCB0byBzcGxpdCBldmVudCBzdHJpbmdzLlxuICB2YXIgZXZlbnRTcGxpdHRlciA9IC9cXHMrLztcblxuICAvLyBJbXBsZW1lbnQgZmFuY3kgZmVhdHVyZXMgb2YgdGhlIEV2ZW50cyBBUEkgc3VjaCBhcyBtdWx0aXBsZSBldmVudFxuICAvLyBuYW1lcyBgXCJjaGFuZ2UgYmx1clwiYCBhbmQgalF1ZXJ5LXN0eWxlIGV2ZW50IG1hcHMgYHtjaGFuZ2U6IGFjdGlvbn1gXG4gIC8vIGluIHRlcm1zIG9mIHRoZSBleGlzdGluZyBBUEkuXG4gIHZhciBldmVudHNBcGkgPSBmdW5jdGlvbihvYmosIGFjdGlvbiwgbmFtZSwgcmVzdCkge1xuICAgIGlmICghbmFtZSkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBIYW5kbGUgZXZlbnQgbWFwcy5cbiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkge1xuICAgICAgICBvYmpbYWN0aW9uXS5hcHBseShvYmosIFtrZXksIG5hbWVba2V5XV0uY29uY2F0KHJlc3QpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgc3BhY2Ugc2VwYXJhdGVkIGV2ZW50IG5hbWVzLlxuICAgIGlmIChldmVudFNwbGl0dGVyLnRlc3QobmFtZSkpIHtcbiAgICAgIHZhciBuYW1lcyA9IG5hbWUuc3BsaXQoZXZlbnRTcGxpdHRlcik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5hbWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBvYmpbYWN0aW9uXS5hcHBseShvYmosIFtuYW1lc1tpXV0uY29uY2F0KHJlc3QpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBBIGRpZmZpY3VsdC10by1iZWxpZXZlLCBidXQgb3B0aW1pemVkIGludGVybmFsIGRpc3BhdGNoIGZ1bmN0aW9uIGZvclxuICAvLyB0cmlnZ2VyaW5nIGV2ZW50cy4gVHJpZXMgdG8ga2VlcCB0aGUgdXN1YWwgY2FzZXMgc3BlZWR5IChtb3N0IGludGVybmFsXG4gIC8vIEJhY2tib25lIGV2ZW50cyBoYXZlIDMgYXJndW1lbnRzKS5cbiAgdmFyIHRyaWdnZXJFdmVudHMgPSBmdW5jdGlvbihldmVudHMsIGFyZ3MpIHtcbiAgICB2YXIgZXYsIGkgPSAtMSwgbCA9IGV2ZW50cy5sZW5ndGgsIGExID0gYXJnc1swXSwgYTIgPSBhcmdzWzFdLCBhMyA9IGFyZ3NbMl07XG4gICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgY2FzZSAwOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCk7IHJldHVybjtcbiAgICAgIGNhc2UgMTogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExKTsgcmV0dXJuO1xuICAgICAgY2FzZSAyOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCwgYTEsIGEyKTsgcmV0dXJuO1xuICAgICAgY2FzZSAzOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCwgYTEsIGEyLCBhMyk7IHJldHVybjtcbiAgICAgIGRlZmF1bHQ6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmFwcGx5KGV2LmN0eCwgYXJncyk7IHJldHVybjtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGxpc3Rlbk1ldGhvZHMgPSB7bGlzdGVuVG86ICdvbicsIGxpc3RlblRvT25jZTogJ29uY2UnfTtcblxuICAvLyBJbnZlcnNpb24tb2YtY29udHJvbCB2ZXJzaW9ucyBvZiBgb25gIGFuZCBgb25jZWAuIFRlbGwgKnRoaXMqIG9iamVjdCB0b1xuICAvLyBsaXN0ZW4gdG8gYW4gZXZlbnQgaW4gYW5vdGhlciBvYmplY3QgLi4uIGtlZXBpbmcgdHJhY2sgb2Ygd2hhdCBpdCdzXG4gIC8vIGxpc3RlbmluZyB0by5cbiAgXy5lYWNoKGxpc3Rlbk1ldGhvZHMsIGZ1bmN0aW9uKGltcGxlbWVudGF0aW9uLCBtZXRob2QpIHtcbiAgICBFdmVudHNbbWV0aG9kXSA9IGZ1bmN0aW9uKG9iaiwgbmFtZSwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBsaXN0ZW5pbmdUbyA9IHRoaXMuX2xpc3RlbmluZ1RvIHx8ICh0aGlzLl9saXN0ZW5pbmdUbyA9IHt9KTtcbiAgICAgIHZhciBpZCA9IG9iai5fbGlzdGVuSWQgfHwgKG9iai5fbGlzdGVuSWQgPSBfLnVuaXF1ZUlkKCdsJykpO1xuICAgICAgbGlzdGVuaW5nVG9baWRdID0gb2JqO1xuICAgICAgaWYgKCFjYWxsYmFjayAmJiB0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIGNhbGxiYWNrID0gdGhpcztcbiAgICAgIG9ialtpbXBsZW1lbnRhdGlvbl0obmFtZSwgY2FsbGJhY2ssIHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQWxpYXNlcyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIEV2ZW50cy5iaW5kICAgPSBFdmVudHMub247XG4gIEV2ZW50cy51bmJpbmQgPSBFdmVudHMub2ZmO1xuXG4gIC8vIEFsbG93IHRoZSBgQmFja2JvbmVgIG9iamVjdCB0byBzZXJ2ZSBhcyBhIGdsb2JhbCBldmVudCBidXMsIGZvciBmb2xrcyB3aG9cbiAgLy8gd2FudCBnbG9iYWwgXCJwdWJzdWJcIiBpbiBhIGNvbnZlbmllbnQgcGxhY2UuXG4gIF8uZXh0ZW5kKEJhY2tib25lLCBFdmVudHMpO1xuXG4gIC8vIEJhY2tib25lLk1vZGVsXG4gIC8vIC0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gQmFja2JvbmUgKipNb2RlbHMqKiBhcmUgdGhlIGJhc2ljIGRhdGEgb2JqZWN0IGluIHRoZSBmcmFtZXdvcmsgLS1cbiAgLy8gZnJlcXVlbnRseSByZXByZXNlbnRpbmcgYSByb3cgaW4gYSB0YWJsZSBpbiBhIGRhdGFiYXNlIG9uIHlvdXIgc2VydmVyLlxuICAvLyBBIGRpc2NyZXRlIGNodW5rIG9mIGRhdGEgYW5kIGEgYnVuY2ggb2YgdXNlZnVsLCByZWxhdGVkIG1ldGhvZHMgZm9yXG4gIC8vIHBlcmZvcm1pbmcgY29tcHV0YXRpb25zIGFuZCB0cmFuc2Zvcm1hdGlvbnMgb24gdGhhdCBkYXRhLlxuXG4gIC8vIENyZWF0ZSBhIG5ldyBtb2RlbCB3aXRoIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlcy4gQSBjbGllbnQgaWQgKGBjaWRgKVxuICAvLyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBhbmQgYXNzaWduZWQgZm9yIHlvdS5cbiAgdmFyIE1vZGVsID0gQmFja2JvbmUuTW9kZWwgPSBmdW5jdGlvbihhdHRyaWJ1dGVzLCBvcHRpb25zKSB7XG4gICAgdmFyIGF0dHJzID0gYXR0cmlidXRlcyB8fCB7fTtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIHRoaXMuY2lkID0gXy51bmlxdWVJZCgnYycpO1xuICAgIHRoaXMuYXR0cmlidXRlcyA9IHt9O1xuICAgIGlmIChvcHRpb25zLmNvbGxlY3Rpb24pIHRoaXMuY29sbGVjdGlvbiA9IG9wdGlvbnMuY29sbGVjdGlvbjtcbiAgICBpZiAob3B0aW9ucy5wYXJzZSkgYXR0cnMgPSB0aGlzLnBhcnNlKGF0dHJzLCBvcHRpb25zKSB8fCB7fTtcbiAgICBhdHRycyA9IF8uZGVmYXVsdHMoe30sIGF0dHJzLCBfLnJlc3VsdCh0aGlzLCAnZGVmYXVsdHMnKSk7XG4gICAgdGhpcy5zZXQoYXR0cnMsIG9wdGlvbnMpO1xuICAgIHRoaXMuY2hhbmdlZCA9IHt9O1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIEF0dGFjaCBhbGwgaW5oZXJpdGFibGUgbWV0aG9kcyB0byB0aGUgTW9kZWwgcHJvdG90eXBlLlxuICBfLmV4dGVuZChNb2RlbC5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gQSBoYXNoIG9mIGF0dHJpYnV0ZXMgd2hvc2UgY3VycmVudCBhbmQgcHJldmlvdXMgdmFsdWUgZGlmZmVyLlxuICAgIGNoYW5nZWQ6IG51bGwsXG5cbiAgICAvLyBUaGUgdmFsdWUgcmV0dXJuZWQgZHVyaW5nIHRoZSBsYXN0IGZhaWxlZCB2YWxpZGF0aW9uLlxuICAgIHZhbGlkYXRpb25FcnJvcjogbnVsbCxcblxuICAgIC8vIFRoZSBkZWZhdWx0IG5hbWUgZm9yIHRoZSBKU09OIGBpZGAgYXR0cmlidXRlIGlzIGBcImlkXCJgLiBNb25nb0RCIGFuZFxuICAgIC8vIENvdWNoREIgdXNlcnMgbWF5IHdhbnQgdG8gc2V0IHRoaXMgdG8gYFwiX2lkXCJgLlxuICAgIGlkQXR0cmlidXRlOiAnaWQnLFxuXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXG4gICAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgbW9kZWwncyBgYXR0cmlidXRlc2Agb2JqZWN0LlxuICAgIHRvSlNPTjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIF8uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gUHJveHkgYEJhY2tib25lLnN5bmNgIGJ5IGRlZmF1bHQgLS0gYnV0IG92ZXJyaWRlIHRoaXMgaWYgeW91IG5lZWRcbiAgICAvLyBjdXN0b20gc3luY2luZyBzZW1hbnRpY3MgZm9yICp0aGlzKiBwYXJ0aWN1bGFyIG1vZGVsLlxuICAgIHN5bmM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJhY2tib25lLnN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUuXG4gICAgZ2V0OiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2F0dHJdO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIEhUTUwtZXNjYXBlZCB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUuXG4gICAgZXNjYXBlOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gXy5lc2NhcGUodGhpcy5nZXQoYXR0cikpO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXR0cmlidXRlIGNvbnRhaW5zIGEgdmFsdWUgdGhhdCBpcyBub3QgbnVsbFxuICAgIC8vIG9yIHVuZGVmaW5lZC5cbiAgICBoYXM6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldChhdHRyKSAhPSBudWxsO1xuICAgIH0sXG5cbiAgICAvLyBTZXQgYSBoYXNoIG9mIG1vZGVsIGF0dHJpYnV0ZXMgb24gdGhlIG9iamVjdCwgZmlyaW5nIGBcImNoYW5nZVwiYC4gVGhpcyBpc1xuICAgIC8vIHRoZSBjb3JlIHByaW1pdGl2ZSBvcGVyYXRpb24gb2YgYSBtb2RlbCwgdXBkYXRpbmcgdGhlIGRhdGEgYW5kIG5vdGlmeWluZ1xuICAgIC8vIGFueW9uZSB3aG8gbmVlZHMgdG8ga25vdyBhYm91dCB0aGUgY2hhbmdlIGluIHN0YXRlLiBUaGUgaGVhcnQgb2YgdGhlIGJlYXN0LlxuICAgIHNldDogZnVuY3Rpb24oa2V5LCB2YWwsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBhdHRyLCBhdHRycywgdW5zZXQsIGNoYW5nZXMsIHNpbGVudCwgY2hhbmdpbmcsIHByZXYsIGN1cnJlbnQ7XG4gICAgICBpZiAoa2V5ID09IG51bGwpIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBIYW5kbGUgYm90aCBgXCJrZXlcIiwgdmFsdWVgIGFuZCBge2tleTogdmFsdWV9YCAtc3R5bGUgYXJndW1lbnRzLlxuICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGF0dHJzID0ga2V5O1xuICAgICAgICBvcHRpb25zID0gdmFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGF0dHJzID0ge30pW2tleV0gPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cbiAgICAgIC8vIFJ1biB2YWxpZGF0aW9uLlxuICAgICAgaWYgKCF0aGlzLl92YWxpZGF0ZShhdHRycywgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gRXh0cmFjdCBhdHRyaWJ1dGVzIGFuZCBvcHRpb25zLlxuICAgICAgdW5zZXQgICAgICAgICAgID0gb3B0aW9ucy51bnNldDtcbiAgICAgIHNpbGVudCAgICAgICAgICA9IG9wdGlvbnMuc2lsZW50O1xuICAgICAgY2hhbmdlcyAgICAgICAgID0gW107XG4gICAgICBjaGFuZ2luZyAgICAgICAgPSB0aGlzLl9jaGFuZ2luZztcbiAgICAgIHRoaXMuX2NoYW5naW5nICA9IHRydWU7XG5cbiAgICAgIGlmICghY2hhbmdpbmcpIHtcbiAgICAgICAgdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzID0gXy5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpO1xuICAgICAgICB0aGlzLmNoYW5nZWQgPSB7fTtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnQgPSB0aGlzLmF0dHJpYnV0ZXMsIHByZXYgPSB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM7XG5cbiAgICAgIC8vIENoZWNrIGZvciBjaGFuZ2VzIG9mIGBpZGAuXG4gICAgICBpZiAodGhpcy5pZEF0dHJpYnV0ZSBpbiBhdHRycykgdGhpcy5pZCA9IGF0dHJzW3RoaXMuaWRBdHRyaWJ1dGVdO1xuXG4gICAgICAvLyBGb3IgZWFjaCBgc2V0YCBhdHRyaWJ1dGUsIHVwZGF0ZSBvciBkZWxldGUgdGhlIGN1cnJlbnQgdmFsdWUuXG4gICAgICBmb3IgKGF0dHIgaW4gYXR0cnMpIHtcbiAgICAgICAgdmFsID0gYXR0cnNbYXR0cl07XG4gICAgICAgIGlmICghXy5pc0VxdWFsKGN1cnJlbnRbYXR0cl0sIHZhbCkpIGNoYW5nZXMucHVzaChhdHRyKTtcbiAgICAgICAgaWYgKCFfLmlzRXF1YWwocHJldlthdHRyXSwgdmFsKSkge1xuICAgICAgICAgIHRoaXMuY2hhbmdlZFthdHRyXSA9IHZhbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgdGhpcy5jaGFuZ2VkW2F0dHJdO1xuICAgICAgICB9XG4gICAgICAgIHVuc2V0ID8gZGVsZXRlIGN1cnJlbnRbYXR0cl0gOiBjdXJyZW50W2F0dHJdID0gdmFsO1xuICAgICAgfVxuXG4gICAgICAvLyBUcmlnZ2VyIGFsbCByZWxldmFudCBhdHRyaWJ1dGUgY2hhbmdlcy5cbiAgICAgIGlmICghc2lsZW50KSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmxlbmd0aCkgdGhpcy5fcGVuZGluZyA9IG9wdGlvbnM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hhbmdlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZTonICsgY2hhbmdlc1tpXSwgdGhpcywgY3VycmVudFtjaGFuZ2VzW2ldXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gWW91IG1pZ2h0IGJlIHdvbmRlcmluZyB3aHkgdGhlcmUncyBhIGB3aGlsZWAgbG9vcCBoZXJlLiBDaGFuZ2VzIGNhblxuICAgICAgLy8gYmUgcmVjdXJzaXZlbHkgbmVzdGVkIHdpdGhpbiBgXCJjaGFuZ2VcImAgZXZlbnRzLlxuICAgICAgaWYgKGNoYW5naW5nKSByZXR1cm4gdGhpcztcbiAgICAgIGlmICghc2lsZW50KSB7XG4gICAgICAgIHdoaWxlICh0aGlzLl9wZW5kaW5nKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IHRoaXMuX3BlbmRpbmc7XG4gICAgICAgICAgdGhpcy5fcGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX3BlbmRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2NoYW5naW5nID0gZmFsc2U7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGFuIGF0dHJpYnV0ZSBmcm9tIHRoZSBtb2RlbCwgZmlyaW5nIGBcImNoYW5nZVwiYC4gYHVuc2V0YCBpcyBhIG5vb3BcbiAgICAvLyBpZiB0aGUgYXR0cmlidXRlIGRvZXNuJ3QgZXhpc3QuXG4gICAgdW5zZXQ6IGZ1bmN0aW9uKGF0dHIsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldChhdHRyLCB2b2lkIDAsIF8uZXh0ZW5kKHt9LCBvcHRpb25zLCB7dW5zZXQ6IHRydWV9KSk7XG4gICAgfSxcblxuICAgIC8vIENsZWFyIGFsbCBhdHRyaWJ1dGVzIG9uIHRoZSBtb2RlbCwgZmlyaW5nIGBcImNoYW5nZVwiYC5cbiAgICBjbGVhcjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGF0dHJzID0ge307XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5hdHRyaWJ1dGVzKSBhdHRyc1trZXldID0gdm9pZCAwO1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KGF0dHJzLCBfLmV4dGVuZCh7fSwgb3B0aW9ucywge3Vuc2V0OiB0cnVlfSkpO1xuICAgIH0sXG5cbiAgICAvLyBEZXRlcm1pbmUgaWYgdGhlIG1vZGVsIGhhcyBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0IGBcImNoYW5nZVwiYCBldmVudC5cbiAgICAvLyBJZiB5b3Ugc3BlY2lmeSBhbiBhdHRyaWJ1dGUgbmFtZSwgZGV0ZXJtaW5lIGlmIHRoYXQgYXR0cmlidXRlIGhhcyBjaGFuZ2VkLlxuICAgIGhhc0NoYW5nZWQ6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIGlmIChhdHRyID09IG51bGwpIHJldHVybiAhXy5pc0VtcHR5KHRoaXMuY2hhbmdlZCk7XG4gICAgICByZXR1cm4gXy5oYXModGhpcy5jaGFuZ2VkLCBhdHRyKTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIGFuIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgYXR0cmlidXRlcyB0aGF0IGhhdmUgY2hhbmdlZCwgb3JcbiAgICAvLyBmYWxzZSBpZiB0aGVyZSBhcmUgbm8gY2hhbmdlZCBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIGRldGVybWluaW5nIHdoYXRcbiAgICAvLyBwYXJ0cyBvZiBhIHZpZXcgbmVlZCB0byBiZSB1cGRhdGVkIGFuZC9vciB3aGF0IGF0dHJpYnV0ZXMgbmVlZCB0byBiZVxuICAgIC8vIHBlcnNpc3RlZCB0byB0aGUgc2VydmVyLiBVbnNldCBhdHRyaWJ1dGVzIHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC5cbiAgICAvLyBZb3UgY2FuIGFsc28gcGFzcyBhbiBhdHRyaWJ1dGVzIG9iamVjdCB0byBkaWZmIGFnYWluc3QgdGhlIG1vZGVsLFxuICAgIC8vIGRldGVybWluaW5nIGlmIHRoZXJlICp3b3VsZCBiZSogYSBjaGFuZ2UuXG4gICAgY2hhbmdlZEF0dHJpYnV0ZXM6IGZ1bmN0aW9uKGRpZmYpIHtcbiAgICAgIGlmICghZGlmZikgcmV0dXJuIHRoaXMuaGFzQ2hhbmdlZCgpID8gXy5jbG9uZSh0aGlzLmNoYW5nZWQpIDogZmFsc2U7XG4gICAgICB2YXIgdmFsLCBjaGFuZ2VkID0gZmFsc2U7XG4gICAgICB2YXIgb2xkID0gdGhpcy5fY2hhbmdpbmcgPyB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMgOiB0aGlzLmF0dHJpYnV0ZXM7XG4gICAgICBmb3IgKHZhciBhdHRyIGluIGRpZmYpIHtcbiAgICAgICAgaWYgKF8uaXNFcXVhbChvbGRbYXR0cl0sICh2YWwgPSBkaWZmW2F0dHJdKSkpIGNvbnRpbnVlO1xuICAgICAgICAoY2hhbmdlZCB8fCAoY2hhbmdlZCA9IHt9KSlbYXR0cl0gPSB2YWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2hhbmdlZDtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBwcmV2aW91cyB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUsIHJlY29yZGVkIGF0IHRoZSB0aW1lIHRoZSBsYXN0XG4gICAgLy8gYFwiY2hhbmdlXCJgIGV2ZW50IHdhcyBmaXJlZC5cbiAgICBwcmV2aW91czogZnVuY3Rpb24oYXR0cikge1xuICAgICAgaWYgKGF0dHIgPT0gbnVsbCB8fCAhdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXNbYXR0cl07XG4gICAgfSxcblxuICAgIC8vIEdldCBhbGwgb2YgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIG1vZGVsIGF0IHRoZSB0aW1lIG9mIHRoZSBwcmV2aW91c1xuICAgIC8vIGBcImNoYW5nZVwiYCBldmVudC5cbiAgICBwcmV2aW91c0F0dHJpYnV0ZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF8uY2xvbmUodGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gRmV0Y2ggdGhlIG1vZGVsIGZyb20gdGhlIHNlcnZlci4gSWYgdGhlIHNlcnZlcidzIHJlcHJlc2VudGF0aW9uIG9mIHRoZVxuICAgIC8vIG1vZGVsIGRpZmZlcnMgZnJvbSBpdHMgY3VycmVudCBhdHRyaWJ1dGVzLCB0aGV5IHdpbGwgYmUgb3ZlcnJpZGRlbixcbiAgICAvLyB0cmlnZ2VyaW5nIGEgYFwiY2hhbmdlXCJgIGV2ZW50LlxuICAgIGZldGNoOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIGlmIChvcHRpb25zLnBhcnNlID09PSB2b2lkIDApIG9wdGlvbnMucGFyc2UgPSB0cnVlO1xuICAgICAgdmFyIG1vZGVsID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICBpZiAoIW1vZGVsLnNldChtb2RlbC5wYXJzZShyZXNwLCBvcHRpb25zKSwgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MobW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBtb2RlbC50cmlnZ2VyKCdzeW5jJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiB0aGlzLnN5bmMoJ3JlYWQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICB9LFxuXG4gICAgLy8gU2V0IGEgaGFzaCBvZiBtb2RlbCBhdHRyaWJ1dGVzLCBhbmQgc3luYyB0aGUgbW9kZWwgdG8gdGhlIHNlcnZlci5cbiAgICAvLyBJZiB0aGUgc2VydmVyIHJldHVybnMgYW4gYXR0cmlidXRlcyBoYXNoIHRoYXQgZGlmZmVycywgdGhlIG1vZGVsJ3NcbiAgICAvLyBzdGF0ZSB3aWxsIGJlIGBzZXRgIGFnYWluLlxuICAgIHNhdmU6IGZ1bmN0aW9uKGtleSwgdmFsLCBvcHRpb25zKSB7XG4gICAgICB2YXIgYXR0cnMsIG1ldGhvZCwgeGhyLCBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzO1xuXG4gICAgICAvLyBIYW5kbGUgYm90aCBgXCJrZXlcIiwgdmFsdWVgIGFuZCBge2tleTogdmFsdWV9YCAtc3R5bGUgYXJndW1lbnRzLlxuICAgICAgaWYgKGtleSA9PSBudWxsIHx8IHR5cGVvZiBrZXkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGF0dHJzID0ga2V5O1xuICAgICAgICBvcHRpb25zID0gdmFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGF0dHJzID0ge30pW2tleV0gPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7dmFsaWRhdGU6IHRydWV9LCBvcHRpb25zKTtcblxuICAgICAgLy8gSWYgd2UncmUgbm90IHdhaXRpbmcgYW5kIGF0dHJpYnV0ZXMgZXhpc3QsIHNhdmUgYWN0cyBhc1xuICAgICAgLy8gYHNldChhdHRyKS5zYXZlKG51bGwsIG9wdHMpYCB3aXRoIHZhbGlkYXRpb24uIE90aGVyd2lzZSwgY2hlY2sgaWZcbiAgICAgIC8vIHRoZSBtb2RlbCB3aWxsIGJlIHZhbGlkIHdoZW4gdGhlIGF0dHJpYnV0ZXMsIGlmIGFueSwgYXJlIHNldC5cbiAgICAgIGlmIChhdHRycyAmJiAhb3B0aW9ucy53YWl0KSB7XG4gICAgICAgIGlmICghdGhpcy5zZXQoYXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXRoaXMuX3ZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgdGVtcG9yYXJ5IGF0dHJpYnV0ZXMgaWYgYHt3YWl0OiB0cnVlfWAuXG4gICAgICBpZiAoYXR0cnMgJiYgb3B0aW9ucy53YWl0KSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IF8uZXh0ZW5kKHt9LCBhdHRyaWJ1dGVzLCBhdHRycyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFmdGVyIGEgc3VjY2Vzc2Z1bCBzZXJ2ZXItc2lkZSBzYXZlLCB0aGUgY2xpZW50IGlzIChvcHRpb25hbGx5KVxuICAgICAgLy8gdXBkYXRlZCB3aXRoIHRoZSBzZXJ2ZXItc2lkZSBzdGF0ZS5cbiAgICAgIGlmIChvcHRpb25zLnBhcnNlID09PSB2b2lkIDApIG9wdGlvbnMucGFyc2UgPSB0cnVlO1xuICAgICAgdmFyIG1vZGVsID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAvLyBFbnN1cmUgYXR0cmlidXRlcyBhcmUgcmVzdG9yZWQgZHVyaW5nIHN5bmNocm9ub3VzIHNhdmVzLlxuICAgICAgICBtb2RlbC5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICAgICAgdmFyIHNlcnZlckF0dHJzID0gbW9kZWwucGFyc2UocmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChvcHRpb25zLndhaXQpIHNlcnZlckF0dHJzID0gXy5leHRlbmQoYXR0cnMgfHwge30sIHNlcnZlckF0dHJzKTtcbiAgICAgICAgaWYgKF8uaXNPYmplY3Qoc2VydmVyQXR0cnMpICYmICFtb2RlbC5zZXQoc2VydmVyQXR0cnMsIG9wdGlvbnMpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzKG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG5cbiAgICAgIG1ldGhvZCA9IHRoaXMuaXNOZXcoKSA/ICdjcmVhdGUnIDogKG9wdGlvbnMucGF0Y2ggPyAncGF0Y2gnIDogJ3VwZGF0ZScpO1xuICAgICAgaWYgKG1ldGhvZCA9PT0gJ3BhdGNoJykgb3B0aW9ucy5hdHRycyA9IGF0dHJzO1xuICAgICAgeGhyID0gdGhpcy5zeW5jKG1ldGhvZCwgdGhpcywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIFJlc3RvcmUgYXR0cmlidXRlcy5cbiAgICAgIGlmIChhdHRycyAmJiBvcHRpb25zLndhaXQpIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG5cbiAgICAgIHJldHVybiB4aHI7XG4gICAgfSxcblxuICAgIC8vIERlc3Ryb3kgdGhpcyBtb2RlbCBvbiB0aGUgc2VydmVyIGlmIGl0IHdhcyBhbHJlYWR5IHBlcnNpc3RlZC5cbiAgICAvLyBPcHRpbWlzdGljYWxseSByZW1vdmVzIHRoZSBtb2RlbCBmcm9tIGl0cyBjb2xsZWN0aW9uLCBpZiBpdCBoYXMgb25lLlxuICAgIC8vIElmIGB3YWl0OiB0cnVlYCBpcyBwYXNzZWQsIHdhaXRzIGZvciB0aGUgc2VydmVyIHRvIHJlc3BvbmQgYmVmb3JlIHJlbW92YWwuXG4gICAgZGVzdHJveTogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG5cbiAgICAgIHZhciBkZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG1vZGVsLnRyaWdnZXIoJ2Rlc3Ryb3knLCBtb2RlbCwgbW9kZWwuY29sbGVjdGlvbiwgb3B0aW9ucyk7XG4gICAgICB9O1xuXG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIGlmIChvcHRpb25zLndhaXQgfHwgbW9kZWwuaXNOZXcoKSkgZGVzdHJveSgpO1xuICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcyhtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghbW9kZWwuaXNOZXcoKSkgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLmlzTmV3KCkpIHtcbiAgICAgICAgb3B0aW9ucy5zdWNjZXNzKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcblxuICAgICAgdmFyIHhociA9IHRoaXMuc3luYygnZGVsZXRlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICBpZiAoIW9wdGlvbnMud2FpdCkgZGVzdHJveSgpO1xuICAgICAgcmV0dXJuIHhocjtcbiAgICB9LFxuXG4gICAgLy8gRGVmYXVsdCBVUkwgZm9yIHRoZSBtb2RlbCdzIHJlcHJlc2VudGF0aW9uIG9uIHRoZSBzZXJ2ZXIgLS0gaWYgeW91J3JlXG4gICAgLy8gdXNpbmcgQmFja2JvbmUncyByZXN0ZnVsIG1ldGhvZHMsIG92ZXJyaWRlIHRoaXMgdG8gY2hhbmdlIHRoZSBlbmRwb2ludFxuICAgIC8vIHRoYXQgd2lsbCBiZSBjYWxsZWQuXG4gICAgdXJsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBiYXNlID1cbiAgICAgICAgXy5yZXN1bHQodGhpcywgJ3VybFJvb3QnKSB8fFxuICAgICAgICBfLnJlc3VsdCh0aGlzLmNvbGxlY3Rpb24sICd1cmwnKSB8fFxuICAgICAgICB1cmxFcnJvcigpO1xuICAgICAgaWYgKHRoaXMuaXNOZXcoKSkgcmV0dXJuIGJhc2U7XG4gICAgICByZXR1cm4gYmFzZS5yZXBsYWNlKC8oW15cXC9dKSQvLCAnJDEvJykgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5pZCk7XG4gICAgfSxcblxuICAgIC8vICoqcGFyc2UqKiBjb252ZXJ0cyBhIHJlc3BvbnNlIGludG8gdGhlIGhhc2ggb2YgYXR0cmlidXRlcyB0byBiZSBgc2V0YCBvblxuICAgIC8vIHRoZSBtb2RlbC4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gaXMganVzdCB0byBwYXNzIHRoZSByZXNwb25zZSBhbG9uZy5cbiAgICBwYXJzZTogZnVuY3Rpb24ocmVzcCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHJlc3A7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBtb2RlbCB3aXRoIGlkZW50aWNhbCBhdHRyaWJ1dGVzIHRvIHRoaXMgb25lLlxuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmF0dHJpYnV0ZXMpO1xuICAgIH0sXG5cbiAgICAvLyBBIG1vZGVsIGlzIG5ldyBpZiBpdCBoYXMgbmV2ZXIgYmVlbiBzYXZlZCB0byB0aGUgc2VydmVyLCBhbmQgbGFja3MgYW4gaWQuXG4gICAgaXNOZXc6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICF0aGlzLmhhcyh0aGlzLmlkQXR0cmlidXRlKTtcbiAgICB9LFxuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIG1vZGVsIGlzIGN1cnJlbnRseSBpbiBhIHZhbGlkIHN0YXRlLlxuICAgIGlzVmFsaWQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLl92YWxpZGF0ZSh7fSwgXy5leHRlbmQob3B0aW9ucyB8fCB7fSwgeyB2YWxpZGF0ZTogdHJ1ZSB9KSk7XG4gICAgfSxcblxuICAgIC8vIFJ1biB2YWxpZGF0aW9uIGFnYWluc3QgdGhlIG5leHQgY29tcGxldGUgc2V0IG9mIG1vZGVsIGF0dHJpYnV0ZXMsXG4gICAgLy8gcmV0dXJuaW5nIGB0cnVlYCBpZiBhbGwgaXMgd2VsbC4gT3RoZXJ3aXNlLCBmaXJlIGFuIGBcImludmFsaWRcImAgZXZlbnQuXG4gICAgX3ZhbGlkYXRlOiBmdW5jdGlvbihhdHRycywgb3B0aW9ucykge1xuICAgICAgaWYgKCFvcHRpb25zLnZhbGlkYXRlIHx8ICF0aGlzLnZhbGlkYXRlKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGF0dHJzID0gXy5leHRlbmQoe30sIHRoaXMuYXR0cmlidXRlcywgYXR0cnMpO1xuICAgICAgdmFyIGVycm9yID0gdGhpcy52YWxpZGF0aW9uRXJyb3IgPSB0aGlzLnZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSB8fCBudWxsO1xuICAgICAgaWYgKCFlcnJvcikgcmV0dXJuIHRydWU7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2ludmFsaWQnLCB0aGlzLCBlcnJvciwgXy5leHRlbmQob3B0aW9ucywge3ZhbGlkYXRpb25FcnJvcjogZXJyb3J9KSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHdlIHdhbnQgdG8gaW1wbGVtZW50IG9uIHRoZSBNb2RlbC5cbiAgdmFyIG1vZGVsTWV0aG9kcyA9IFsna2V5cycsICd2YWx1ZXMnLCAncGFpcnMnLCAnaW52ZXJ0JywgJ3BpY2snLCAnb21pdCddO1xuXG4gIC8vIE1peCBpbiBlYWNoIFVuZGVyc2NvcmUgbWV0aG9kIGFzIGEgcHJveHkgdG8gYE1vZGVsI2F0dHJpYnV0ZXNgLlxuICBfLmVhY2gobW9kZWxNZXRob2RzLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgICBNb2RlbC5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICBhcmdzLnVuc2hpZnQodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICAgIHJldHVybiBfW21ldGhvZF0uYXBwbHkoXywgYXJncyk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQmFja2JvbmUuQ29sbGVjdGlvblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gSWYgbW9kZWxzIHRlbmQgdG8gcmVwcmVzZW50IGEgc2luZ2xlIHJvdyBvZiBkYXRhLCBhIEJhY2tib25lIENvbGxlY3Rpb24gaXNcbiAgLy8gbW9yZSBhbmFsYWdvdXMgdG8gYSB0YWJsZSBmdWxsIG9mIGRhdGEgLi4uIG9yIGEgc21hbGwgc2xpY2Ugb3IgcGFnZSBvZiB0aGF0XG4gIC8vIHRhYmxlLCBvciBhIGNvbGxlY3Rpb24gb2Ygcm93cyB0aGF0IGJlbG9uZyB0b2dldGhlciBmb3IgYSBwYXJ0aWN1bGFyIHJlYXNvblxuICAvLyAtLSBhbGwgb2YgdGhlIG1lc3NhZ2VzIGluIHRoaXMgcGFydGljdWxhciBmb2xkZXIsIGFsbCBvZiB0aGUgZG9jdW1lbnRzXG4gIC8vIGJlbG9uZ2luZyB0byB0aGlzIHBhcnRpY3VsYXIgYXV0aG9yLCBhbmQgc28gb24uIENvbGxlY3Rpb25zIG1haW50YWluXG4gIC8vIGluZGV4ZXMgb2YgdGhlaXIgbW9kZWxzLCBib3RoIGluIG9yZGVyLCBhbmQgZm9yIGxvb2t1cCBieSBgaWRgLlxuXG4gIC8vIENyZWF0ZSBhIG5ldyAqKkNvbGxlY3Rpb24qKiwgcGVyaGFwcyB0byBjb250YWluIGEgc3BlY2lmaWMgdHlwZSBvZiBgbW9kZWxgLlxuICAvLyBJZiBhIGBjb21wYXJhdG9yYCBpcyBzcGVjaWZpZWQsIHRoZSBDb2xsZWN0aW9uIHdpbGwgbWFpbnRhaW5cbiAgLy8gaXRzIG1vZGVscyBpbiBzb3J0IG9yZGVyLCBhcyB0aGV5J3JlIGFkZGVkIGFuZCByZW1vdmVkLlxuICB2YXIgQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24gPSBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIGlmIChvcHRpb25zLm1vZGVsKSB0aGlzLm1vZGVsID0gb3B0aW9ucy5tb2RlbDtcbiAgICBpZiAob3B0aW9ucy5jb21wYXJhdG9yICE9PSB2b2lkIDApIHRoaXMuY29tcGFyYXRvciA9IG9wdGlvbnMuY29tcGFyYXRvcjtcbiAgICB0aGlzLl9yZXNldCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChtb2RlbHMpIHRoaXMucmVzZXQobW9kZWxzLCBfLmV4dGVuZCh7c2lsZW50OiB0cnVlfSwgb3B0aW9ucykpO1xuICB9O1xuXG4gIC8vIERlZmF1bHQgb3B0aW9ucyBmb3IgYENvbGxlY3Rpb24jc2V0YC5cbiAgdmFyIHNldE9wdGlvbnMgPSB7YWRkOiB0cnVlLCByZW1vdmU6IHRydWUsIG1lcmdlOiB0cnVlfTtcbiAgdmFyIGFkZE9wdGlvbnMgPSB7YWRkOiB0cnVlLCByZW1vdmU6IGZhbHNlfTtcblxuICAvLyBEZWZpbmUgdGhlIENvbGxlY3Rpb24ncyBpbmhlcml0YWJsZSBtZXRob2RzLlxuICBfLmV4dGVuZChDb2xsZWN0aW9uLnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBtb2RlbCBmb3IgYSBjb2xsZWN0aW9uIGlzIGp1c3QgYSAqKkJhY2tib25lLk1vZGVsKiouXG4gICAgLy8gVGhpcyBzaG91bGQgYmUgb3ZlcnJpZGRlbiBpbiBtb3N0IGNhc2VzLlxuICAgIG1vZGVsOiBNb2RlbCxcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vIFRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGEgQ29sbGVjdGlvbiBpcyBhbiBhcnJheSBvZiB0aGVcbiAgICAvLyBtb2RlbHMnIGF0dHJpYnV0ZXMuXG4gICAgdG9KU09OOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24obW9kZWwpeyByZXR1cm4gbW9kZWwudG9KU09OKG9wdGlvbnMpOyB9KTtcbiAgICB9LFxuXG4gICAgLy8gUHJveHkgYEJhY2tib25lLnN5bmNgIGJ5IGRlZmF1bHQuXG4gICAgc3luYzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQmFja2JvbmUuc3luYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSBtb2RlbCwgb3IgbGlzdCBvZiBtb2RlbHMgdG8gdGhlIHNldC5cbiAgICBhZGQ6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KG1vZGVscywgXy5leHRlbmQoe21lcmdlOiBmYWxzZX0sIG9wdGlvbnMsIGFkZE9wdGlvbnMpKTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGEgbW9kZWwsIG9yIGEgbGlzdCBvZiBtb2RlbHMgZnJvbSB0aGUgc2V0LlxuICAgIHJlbW92ZTogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgc2luZ3VsYXIgPSAhXy5pc0FycmF5KG1vZGVscyk7XG4gICAgICBtb2RlbHMgPSBzaW5ndWxhciA/IFttb2RlbHNdIDogXy5jbG9uZShtb2RlbHMpO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICAgIHZhciBpLCBsLCBpbmRleCwgbW9kZWw7XG4gICAgICBmb3IgKGkgPSAwLCBsID0gbW9kZWxzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBtb2RlbCA9IG1vZGVsc1tpXSA9IHRoaXMuZ2V0KG1vZGVsc1tpXSk7XG4gICAgICAgIGlmICghbW9kZWwpIGNvbnRpbnVlO1xuICAgICAgICBkZWxldGUgdGhpcy5fYnlJZFttb2RlbC5pZF07XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9ieUlkW21vZGVsLmNpZF07XG4gICAgICAgIGluZGV4ID0gdGhpcy5pbmRleE9mKG1vZGVsKTtcbiAgICAgICAgdGhpcy5tb2RlbHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgdGhpcy5sZW5ndGgtLTtcbiAgICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCkge1xuICAgICAgICAgIG9wdGlvbnMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtb2RlbC50cmlnZ2VyKCdyZW1vdmUnLCBtb2RlbCwgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzaW5ndWxhciA/IG1vZGVsc1swXSA6IG1vZGVscztcbiAgICB9LFxuXG4gICAgLy8gVXBkYXRlIGEgY29sbGVjdGlvbiBieSBgc2V0YC1pbmcgYSBuZXcgbGlzdCBvZiBtb2RlbHMsIGFkZGluZyBuZXcgb25lcyxcbiAgICAvLyByZW1vdmluZyBtb2RlbHMgdGhhdCBhcmUgbm8gbG9uZ2VyIHByZXNlbnQsIGFuZCBtZXJnaW5nIG1vZGVscyB0aGF0XG4gICAgLy8gYWxyZWFkeSBleGlzdCBpbiB0aGUgY29sbGVjdGlvbiwgYXMgbmVjZXNzYXJ5LiBTaW1pbGFyIHRvICoqTW9kZWwjc2V0KiosXG4gICAgLy8gdGhlIGNvcmUgb3BlcmF0aW9uIGZvciB1cGRhdGluZyB0aGUgZGF0YSBjb250YWluZWQgYnkgdGhlIGNvbGxlY3Rpb24uXG4gICAgc2V0OiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBfLmRlZmF1bHRzKHt9LCBvcHRpb25zLCBzZXRPcHRpb25zKTtcbiAgICAgIGlmIChvcHRpb25zLnBhcnNlKSBtb2RlbHMgPSB0aGlzLnBhcnNlKG1vZGVscywgb3B0aW9ucyk7XG4gICAgICB2YXIgc2luZ3VsYXIgPSAhXy5pc0FycmF5KG1vZGVscyk7XG4gICAgICBtb2RlbHMgPSBzaW5ndWxhciA/IChtb2RlbHMgPyBbbW9kZWxzXSA6IFtdKSA6IF8uY2xvbmUobW9kZWxzKTtcbiAgICAgIHZhciBpLCBsLCBpZCwgbW9kZWwsIGF0dHJzLCBleGlzdGluZywgc29ydDtcbiAgICAgIHZhciBhdCA9IG9wdGlvbnMuYXQ7XG4gICAgICB2YXIgdGFyZ2V0TW9kZWwgPSB0aGlzLm1vZGVsO1xuICAgICAgdmFyIHNvcnRhYmxlID0gdGhpcy5jb21wYXJhdG9yICYmIChhdCA9PSBudWxsKSAmJiBvcHRpb25zLnNvcnQgIT09IGZhbHNlO1xuICAgICAgdmFyIHNvcnRBdHRyID0gXy5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpID8gdGhpcy5jb21wYXJhdG9yIDogbnVsbDtcbiAgICAgIHZhciB0b0FkZCA9IFtdLCB0b1JlbW92ZSA9IFtdLCBtb2RlbE1hcCA9IHt9O1xuICAgICAgdmFyIGFkZCA9IG9wdGlvbnMuYWRkLCBtZXJnZSA9IG9wdGlvbnMubWVyZ2UsIHJlbW92ZSA9IG9wdGlvbnMucmVtb3ZlO1xuICAgICAgdmFyIG9yZGVyID0gIXNvcnRhYmxlICYmIGFkZCAmJiByZW1vdmUgPyBbXSA6IGZhbHNlO1xuXG4gICAgICAvLyBUdXJuIGJhcmUgb2JqZWN0cyBpbnRvIG1vZGVsIHJlZmVyZW5jZXMsIGFuZCBwcmV2ZW50IGludmFsaWQgbW9kZWxzXG4gICAgICAvLyBmcm9tIGJlaW5nIGFkZGVkLlxuICAgICAgZm9yIChpID0gMCwgbCA9IG1vZGVscy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgYXR0cnMgPSBtb2RlbHNbaV0gfHwge307XG4gICAgICAgIGlmIChhdHRycyBpbnN0YW5jZW9mIE1vZGVsKSB7XG4gICAgICAgICAgaWQgPSBtb2RlbCA9IGF0dHJzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlkID0gYXR0cnNbdGFyZ2V0TW9kZWwucHJvdG90eXBlLmlkQXR0cmlidXRlIHx8ICdpZCddO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgYSBkdXBsaWNhdGUgaXMgZm91bmQsIHByZXZlbnQgaXQgZnJvbSBiZWluZyBhZGRlZCBhbmRcbiAgICAgICAgLy8gb3B0aW9uYWxseSBtZXJnZSBpdCBpbnRvIHRoZSBleGlzdGluZyBtb2RlbC5cbiAgICAgICAgaWYgKGV4aXN0aW5nID0gdGhpcy5nZXQoaWQpKSB7XG4gICAgICAgICAgaWYgKHJlbW92ZSkgbW9kZWxNYXBbZXhpc3RpbmcuY2lkXSA9IHRydWU7XG4gICAgICAgICAgaWYgKG1lcmdlKSB7XG4gICAgICAgICAgICBhdHRycyA9IGF0dHJzID09PSBtb2RlbCA/IG1vZGVsLmF0dHJpYnV0ZXMgOiBhdHRycztcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBhcnNlKSBhdHRycyA9IGV4aXN0aW5nLnBhcnNlKGF0dHJzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGV4aXN0aW5nLnNldChhdHRycywgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAoc29ydGFibGUgJiYgIXNvcnQgJiYgZXhpc3RpbmcuaGFzQ2hhbmdlZChzb3J0QXR0cikpIHNvcnQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtb2RlbHNbaV0gPSBleGlzdGluZztcblxuICAgICAgICAvLyBJZiB0aGlzIGlzIGEgbmV3LCB2YWxpZCBtb2RlbCwgcHVzaCBpdCB0byB0aGUgYHRvQWRkYCBsaXN0LlxuICAgICAgICB9IGVsc2UgaWYgKGFkZCkge1xuICAgICAgICAgIG1vZGVsID0gbW9kZWxzW2ldID0gdGhpcy5fcHJlcGFyZU1vZGVsKGF0dHJzLCBvcHRpb25zKTtcbiAgICAgICAgICBpZiAoIW1vZGVsKSBjb250aW51ZTtcbiAgICAgICAgICB0b0FkZC5wdXNoKG1vZGVsKTtcbiAgICAgICAgICB0aGlzLl9hZGRSZWZlcmVuY2UobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRG8gbm90IGFkZCBtdWx0aXBsZSBtb2RlbHMgd2l0aCB0aGUgc2FtZSBgaWRgLlxuICAgICAgICBtb2RlbCA9IGV4aXN0aW5nIHx8IG1vZGVsO1xuICAgICAgICBpZiAob3JkZXIgJiYgKG1vZGVsLmlzTmV3KCkgfHwgIW1vZGVsTWFwW21vZGVsLmlkXSkpIG9yZGVyLnB1c2gobW9kZWwpO1xuICAgICAgICBtb2RlbE1hcFttb2RlbC5pZF0gPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgbm9uZXhpc3RlbnQgbW9kZWxzIGlmIGFwcHJvcHJpYXRlLlxuICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICBpZiAoIW1vZGVsTWFwWyhtb2RlbCA9IHRoaXMubW9kZWxzW2ldKS5jaWRdKSB0b1JlbW92ZS5wdXNoKG1vZGVsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9SZW1vdmUubGVuZ3RoKSB0aGlzLnJlbW92ZSh0b1JlbW92ZSwgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlZSBpZiBzb3J0aW5nIGlzIG5lZWRlZCwgdXBkYXRlIGBsZW5ndGhgIGFuZCBzcGxpY2UgaW4gbmV3IG1vZGVscy5cbiAgICAgIGlmICh0b0FkZC5sZW5ndGggfHwgKG9yZGVyICYmIG9yZGVyLmxlbmd0aCkpIHtcbiAgICAgICAgaWYgKHNvcnRhYmxlKSBzb3J0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sZW5ndGggKz0gdG9BZGQubGVuZ3RoO1xuICAgICAgICBpZiAoYXQgIT0gbnVsbCkge1xuICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSB0b0FkZC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWxzLnNwbGljZShhdCArIGksIDAsIHRvQWRkW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG9yZGVyKSB0aGlzLm1vZGVscy5sZW5ndGggPSAwO1xuICAgICAgICAgIHZhciBvcmRlcmVkTW9kZWxzID0gb3JkZXIgfHwgdG9BZGQ7XG4gICAgICAgICAgZm9yIChpID0gMCwgbCA9IG9yZGVyZWRNb2RlbHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVscy5wdXNoKG9yZGVyZWRNb2RlbHNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTaWxlbnRseSBzb3J0IHRoZSBjb2xsZWN0aW9uIGlmIGFwcHJvcHJpYXRlLlxuICAgICAgaWYgKHNvcnQpIHRoaXMuc29ydCh7c2lsZW50OiB0cnVlfSk7XG5cbiAgICAgIC8vIFVubGVzcyBzaWxlbmNlZCwgaXQncyB0aW1lIHRvIGZpcmUgYWxsIGFwcHJvcHJpYXRlIGFkZC9zb3J0IGV2ZW50cy5cbiAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHtcbiAgICAgICAgZm9yIChpID0gMCwgbCA9IHRvQWRkLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIChtb2RlbCA9IHRvQWRkW2ldKS50cmlnZ2VyKCdhZGQnLCBtb2RlbCwgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvcnQgfHwgKG9yZGVyICYmIG9yZGVyLmxlbmd0aCkpIHRoaXMudHJpZ2dlcignc29ydCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm4gdGhlIGFkZGVkIChvciBtZXJnZWQpIG1vZGVsIChvciBtb2RlbHMpLlxuICAgICAgcmV0dXJuIHNpbmd1bGFyID8gbW9kZWxzWzBdIDogbW9kZWxzO1xuICAgIH0sXG5cbiAgICAvLyBXaGVuIHlvdSBoYXZlIG1vcmUgaXRlbXMgdGhhbiB5b3Ugd2FudCB0byBhZGQgb3IgcmVtb3ZlIGluZGl2aWR1YWxseSxcbiAgICAvLyB5b3UgY2FuIHJlc2V0IHRoZSBlbnRpcmUgc2V0IHdpdGggYSBuZXcgbGlzdCBvZiBtb2RlbHMsIHdpdGhvdXQgZmlyaW5nXG4gICAgLy8gYW55IGdyYW51bGFyIGBhZGRgIG9yIGByZW1vdmVgIGV2ZW50cy4gRmlyZXMgYHJlc2V0YCB3aGVuIGZpbmlzaGVkLlxuICAgIC8vIFVzZWZ1bCBmb3IgYnVsayBvcGVyYXRpb25zIGFuZCBvcHRpbWl6YXRpb25zLlxuICAgIHJlc2V0OiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubW9kZWxzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzLl9yZW1vdmVSZWZlcmVuY2UodGhpcy5tb2RlbHNbaV0sIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5wcmV2aW91c01vZGVscyA9IHRoaXMubW9kZWxzO1xuICAgICAgdGhpcy5fcmVzZXQoKTtcbiAgICAgIG1vZGVscyA9IHRoaXMuYWRkKG1vZGVscywgXy5leHRlbmQoe3NpbGVudDogdHJ1ZX0sIG9wdGlvbnMpKTtcbiAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMudHJpZ2dlcigncmVzZXQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBtb2RlbHM7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIG1vZGVsIHRvIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgcHVzaDogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLmFkZChtb2RlbCwgXy5leHRlbmQoe2F0OiB0aGlzLmxlbmd0aH0sIG9wdGlvbnMpKTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGEgbW9kZWwgZnJvbSB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHBvcDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIG1vZGVsID0gdGhpcy5hdCh0aGlzLmxlbmd0aCAtIDEpO1xuICAgICAgdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSBtb2RlbCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHVuc2hpZnQ6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZGQobW9kZWwsIF8uZXh0ZW5kKHthdDogMH0sIG9wdGlvbnMpKTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGEgbW9kZWwgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHNoaWZ0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzLmF0KDApO1xuICAgICAgdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH0sXG5cbiAgICAvLyBTbGljZSBvdXQgYSBzdWItYXJyYXkgb2YgbW9kZWxzIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgc2xpY2U6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNsaWNlLmFwcGx5KHRoaXMubW9kZWxzLCBhcmd1bWVudHMpO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgYSBtb2RlbCBmcm9tIHRoZSBzZXQgYnkgaWQuXG4gICAgZ2V0OiBmdW5jdGlvbihvYmopIHtcbiAgICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICAgIHJldHVybiB0aGlzLl9ieUlkW29ial0gfHwgdGhpcy5fYnlJZFtvYmouaWRdIHx8IHRoaXMuX2J5SWRbb2JqLmNpZF07XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgbW9kZWwgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgIGF0OiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgcmV0dXJuIHRoaXMubW9kZWxzW2luZGV4XTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIG1vZGVscyB3aXRoIG1hdGNoaW5nIGF0dHJpYnV0ZXMuIFVzZWZ1bCBmb3Igc2ltcGxlIGNhc2VzIG9mXG4gICAgLy8gYGZpbHRlcmAuXG4gICAgd2hlcmU6IGZ1bmN0aW9uKGF0dHJzLCBmaXJzdCkge1xuICAgICAgaWYgKF8uaXNFbXB0eShhdHRycykpIHJldHVybiBmaXJzdCA/IHZvaWQgMCA6IFtdO1xuICAgICAgcmV0dXJuIHRoaXNbZmlyc3QgPyAnZmluZCcgOiAnZmlsdGVyJ10oZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGF0dHJzKSB7XG4gICAgICAgICAgaWYgKGF0dHJzW2tleV0gIT09IG1vZGVsLmdldChrZXkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIHRoZSBmaXJzdCBtb2RlbCB3aXRoIG1hdGNoaW5nIGF0dHJpYnV0ZXMuIFVzZWZ1bCBmb3Igc2ltcGxlIGNhc2VzXG4gICAgLy8gb2YgYGZpbmRgLlxuICAgIGZpbmRXaGVyZTogZnVuY3Rpb24oYXR0cnMpIHtcbiAgICAgIHJldHVybiB0aGlzLndoZXJlKGF0dHJzLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgLy8gRm9yY2UgdGhlIGNvbGxlY3Rpb24gdG8gcmUtc29ydCBpdHNlbGYuIFlvdSBkb24ndCBuZWVkIHRvIGNhbGwgdGhpcyB1bmRlclxuICAgIC8vIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCBhcyB0aGUgc2V0IHdpbGwgbWFpbnRhaW4gc29ydCBvcmRlciBhcyBlYWNoIGl0ZW1cbiAgICAvLyBpcyBhZGRlZC5cbiAgICBzb3J0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAoIXRoaXMuY29tcGFyYXRvcikgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc29ydCBhIHNldCB3aXRob3V0IGEgY29tcGFyYXRvcicpO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcblxuICAgICAgLy8gUnVuIHNvcnQgYmFzZWQgb24gdHlwZSBvZiBgY29tcGFyYXRvcmAuXG4gICAgICBpZiAoXy5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpIHx8IHRoaXMuY29tcGFyYXRvci5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdGhpcy5tb2RlbHMgPSB0aGlzLnNvcnRCeSh0aGlzLmNvbXBhcmF0b3IsIHRoaXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tb2RlbHMuc29ydChfLmJpbmQodGhpcy5jb21wYXJhdG9yLCB0aGlzKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMudHJpZ2dlcignc29ydCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFBsdWNrIGFuIGF0dHJpYnV0ZSBmcm9tIGVhY2ggbW9kZWwgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgcGx1Y2s6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIHJldHVybiBfLmludm9rZSh0aGlzLm1vZGVscywgJ2dldCcsIGF0dHIpO1xuICAgIH0sXG5cbiAgICAvLyBGZXRjaCB0aGUgZGVmYXVsdCBzZXQgb2YgbW9kZWxzIGZvciB0aGlzIGNvbGxlY3Rpb24sIHJlc2V0dGluZyB0aGVcbiAgICAvLyBjb2xsZWN0aW9uIHdoZW4gdGhleSBhcnJpdmUuIElmIGByZXNldDogdHJ1ZWAgaXMgcGFzc2VkLCB0aGUgcmVzcG9uc2VcbiAgICAvLyBkYXRhIHdpbGwgYmUgcGFzc2VkIHRocm91Z2ggdGhlIGByZXNldGAgbWV0aG9kIGluc3RlYWQgb2YgYHNldGAuXG4gICAgZmV0Y2g6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgaWYgKG9wdGlvbnMucGFyc2UgPT09IHZvaWQgMCkgb3B0aW9ucy5wYXJzZSA9IHRydWU7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9IG9wdGlvbnMucmVzZXQgPyAncmVzZXQnIDogJ3NldCc7XG4gICAgICAgIGNvbGxlY3Rpb25bbWV0aG9kXShyZXNwLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MoY29sbGVjdGlvbiwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGNvbGxlY3Rpb24udHJpZ2dlcignc3luYycsIGNvbGxlY3Rpb24sIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiB0aGlzLnN5bmMoJ3JlYWQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICB9LFxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIGEgbW9kZWwgaW4gdGhpcyBjb2xsZWN0aW9uLiBBZGQgdGhlIG1vZGVsIHRvIHRoZVxuICAgIC8vIGNvbGxlY3Rpb24gaW1tZWRpYXRlbHksIHVubGVzcyBgd2FpdDogdHJ1ZWAgaXMgcGFzc2VkLCBpbiB3aGljaCBjYXNlIHdlXG4gICAgLy8gd2FpdCBmb3IgdGhlIHNlcnZlciB0byBhZ3JlZS5cbiAgICBjcmVhdGU6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIGlmICghKG1vZGVsID0gdGhpcy5fcHJlcGFyZU1vZGVsKG1vZGVsLCBvcHRpb25zKSkpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmICghb3B0aW9ucy53YWl0KSB0aGlzLmFkZChtb2RlbCwgb3B0aW9ucyk7XG4gICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKG1vZGVsLCByZXNwKSB7XG4gICAgICAgIGlmIChvcHRpb25zLndhaXQpIGNvbGxlY3Rpb24uYWRkKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MobW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIG1vZGVsLnNhdmUobnVsbCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gbW9kZWw7XG4gICAgfSxcblxuICAgIC8vICoqcGFyc2UqKiBjb252ZXJ0cyBhIHJlc3BvbnNlIGludG8gYSBsaXN0IG9mIG1vZGVscyB0byBiZSBhZGRlZCB0byB0aGVcbiAgICAvLyBjb2xsZWN0aW9uLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBpcyBqdXN0IHRvIHBhc3MgaXQgdGhyb3VnaC5cbiAgICBwYXJzZTogZnVuY3Rpb24ocmVzcCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHJlc3A7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBjb2xsZWN0aW9uIHdpdGggYW4gaWRlbnRpY2FsIGxpc3Qgb2YgbW9kZWxzIGFzIHRoaXMgb25lLlxuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLm1vZGVscyk7XG4gICAgfSxcblxuICAgIC8vIFByaXZhdGUgbWV0aG9kIHRvIHJlc2V0IGFsbCBpbnRlcm5hbCBzdGF0ZS4gQ2FsbGVkIHdoZW4gdGhlIGNvbGxlY3Rpb25cbiAgICAvLyBpcyBmaXJzdCBpbml0aWFsaXplZCBvciByZXNldC5cbiAgICBfcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgICAgdGhpcy5tb2RlbHMgPSBbXTtcbiAgICAgIHRoaXMuX2J5SWQgID0ge307XG4gICAgfSxcblxuICAgIC8vIFByZXBhcmUgYSBoYXNoIG9mIGF0dHJpYnV0ZXMgKG9yIG90aGVyIG1vZGVsKSB0byBiZSBhZGRlZCB0byB0aGlzXG4gICAgLy8gY29sbGVjdGlvbi5cbiAgICBfcHJlcGFyZU1vZGVsOiBmdW5jdGlvbihhdHRycywgb3B0aW9ucykge1xuICAgICAgaWYgKGF0dHJzIGluc3RhbmNlb2YgTW9kZWwpIHJldHVybiBhdHRycztcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgb3B0aW9ucy5jb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIHZhciBtb2RlbCA9IG5ldyB0aGlzLm1vZGVsKGF0dHJzLCBvcHRpb25zKTtcbiAgICAgIGlmICghbW9kZWwudmFsaWRhdGlvbkVycm9yKSByZXR1cm4gbW9kZWw7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2ludmFsaWQnLCB0aGlzLCBtb2RlbC52YWxpZGF0aW9uRXJyb3IsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gY3JlYXRlIGEgbW9kZWwncyB0aWVzIHRvIGEgY29sbGVjdGlvbi5cbiAgICBfYWRkUmVmZXJlbmNlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgdGhpcy5fYnlJZFttb2RlbC5jaWRdID0gbW9kZWw7XG4gICAgICBpZiAobW9kZWwuaWQgIT0gbnVsbCkgdGhpcy5fYnlJZFttb2RlbC5pZF0gPSBtb2RlbDtcbiAgICAgIGlmICghbW9kZWwuY29sbGVjdGlvbikgbW9kZWwuY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICBtb2RlbC5vbignYWxsJywgdGhpcy5fb25Nb2RlbEV2ZW50LCB0aGlzKTtcbiAgICB9LFxuXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIHNldmVyIGEgbW9kZWwncyB0aWVzIHRvIGEgY29sbGVjdGlvbi5cbiAgICBfcmVtb3ZlUmVmZXJlbmNlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgaWYgKHRoaXMgPT09IG1vZGVsLmNvbGxlY3Rpb24pIGRlbGV0ZSBtb2RlbC5jb2xsZWN0aW9uO1xuICAgICAgbW9kZWwub2ZmKCdhbGwnLCB0aGlzLl9vbk1vZGVsRXZlbnQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgY2FsbGVkIGV2ZXJ5IHRpbWUgYSBtb2RlbCBpbiB0aGUgc2V0IGZpcmVzIGFuIGV2ZW50LlxuICAgIC8vIFNldHMgbmVlZCB0byB1cGRhdGUgdGhlaXIgaW5kZXhlcyB3aGVuIG1vZGVscyBjaGFuZ2UgaWRzLiBBbGwgb3RoZXJcbiAgICAvLyBldmVudHMgc2ltcGx5IHByb3h5IHRocm91Z2guIFwiYWRkXCIgYW5kIFwicmVtb3ZlXCIgZXZlbnRzIHRoYXQgb3JpZ2luYXRlXG4gICAgLy8gaW4gb3RoZXIgY29sbGVjdGlvbnMgYXJlIGlnbm9yZWQuXG4gICAgX29uTW9kZWxFdmVudDogZnVuY3Rpb24oZXZlbnQsIG1vZGVsLCBjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG4gICAgICBpZiAoKGV2ZW50ID09PSAnYWRkJyB8fCBldmVudCA9PT0gJ3JlbW92ZScpICYmIGNvbGxlY3Rpb24gIT09IHRoaXMpIHJldHVybjtcbiAgICAgIGlmIChldmVudCA9PT0gJ2Rlc3Ryb3knKSB0aGlzLnJlbW92ZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICBpZiAobW9kZWwgJiYgZXZlbnQgPT09ICdjaGFuZ2U6JyArIG1vZGVsLmlkQXR0cmlidXRlKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9ieUlkW21vZGVsLnByZXZpb3VzKG1vZGVsLmlkQXR0cmlidXRlKV07XG4gICAgICAgIGlmIChtb2RlbC5pZCAhPSBudWxsKSB0aGlzLl9ieUlkW21vZGVsLmlkXSA9IG1vZGVsO1xuICAgICAgfVxuICAgICAgdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHdlIHdhbnQgdG8gaW1wbGVtZW50IG9uIHRoZSBDb2xsZWN0aW9uLlxuICAvLyA5MCUgb2YgdGhlIGNvcmUgdXNlZnVsbmVzcyBvZiBCYWNrYm9uZSBDb2xsZWN0aW9ucyBpcyBhY3R1YWxseSBpbXBsZW1lbnRlZFxuICAvLyByaWdodCBoZXJlOlxuICB2YXIgbWV0aG9kcyA9IFsnZm9yRWFjaCcsICdlYWNoJywgJ21hcCcsICdjb2xsZWN0JywgJ3JlZHVjZScsICdmb2xkbCcsXG4gICAgJ2luamVjdCcsICdyZWR1Y2VSaWdodCcsICdmb2xkcicsICdmaW5kJywgJ2RldGVjdCcsICdmaWx0ZXInLCAnc2VsZWN0JyxcbiAgICAncmVqZWN0JywgJ2V2ZXJ5JywgJ2FsbCcsICdzb21lJywgJ2FueScsICdpbmNsdWRlJywgJ2NvbnRhaW5zJywgJ2ludm9rZScsXG4gICAgJ21heCcsICdtaW4nLCAndG9BcnJheScsICdzaXplJywgJ2ZpcnN0JywgJ2hlYWQnLCAndGFrZScsICdpbml0aWFsJywgJ3Jlc3QnLFxuICAgICd0YWlsJywgJ2Ryb3AnLCAnbGFzdCcsICd3aXRob3V0JywgJ2RpZmZlcmVuY2UnLCAnaW5kZXhPZicsICdzaHVmZmxlJyxcbiAgICAnbGFzdEluZGV4T2YnLCAnaXNFbXB0eScsICdjaGFpbicsICdzYW1wbGUnXTtcblxuICAvLyBNaXggaW4gZWFjaCBVbmRlcnNjb3JlIG1ldGhvZCBhcyBhIHByb3h5IHRvIGBDb2xsZWN0aW9uI21vZGVsc2AuXG4gIF8uZWFjaChtZXRob2RzLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgIGFyZ3MudW5zaGlmdCh0aGlzLm1vZGVscyk7XG4gICAgICByZXR1cm4gX1ttZXRob2RdLmFwcGx5KF8sIGFyZ3MpO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHRha2UgYSBwcm9wZXJ0eSBuYW1lIGFzIGFuIGFyZ3VtZW50LlxuICB2YXIgYXR0cmlidXRlTWV0aG9kcyA9IFsnZ3JvdXBCeScsICdjb3VudEJ5JywgJ3NvcnRCeScsICdpbmRleEJ5J107XG5cbiAgLy8gVXNlIGF0dHJpYnV0ZXMgaW5zdGVhZCBvZiBwcm9wZXJ0aWVzLlxuICBfLmVhY2goYXR0cmlidXRlTWV0aG9kcywgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0KSB7XG4gICAgICB2YXIgaXRlcmF0b3IgPSBfLmlzRnVuY3Rpb24odmFsdWUpID8gdmFsdWUgOiBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICByZXR1cm4gbW9kZWwuZ2V0KHZhbHVlKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gX1ttZXRob2RdKHRoaXMubW9kZWxzLCBpdGVyYXRvciwgY29udGV4dCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQmFja2JvbmUuVmlld1xuICAvLyAtLS0tLS0tLS0tLS0tXG5cbiAgLy8gQmFja2JvbmUgVmlld3MgYXJlIGFsbW9zdCBtb3JlIGNvbnZlbnRpb24gdGhhbiB0aGV5IGFyZSBhY3R1YWwgY29kZS4gQSBWaWV3XG4gIC8vIGlzIHNpbXBseSBhIEphdmFTY3JpcHQgb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhIGxvZ2ljYWwgY2h1bmsgb2YgVUkgaW4gdGhlXG4gIC8vIERPTS4gVGhpcyBtaWdodCBiZSBhIHNpbmdsZSBpdGVtLCBhbiBlbnRpcmUgbGlzdCwgYSBzaWRlYmFyIG9yIHBhbmVsLCBvclxuICAvLyBldmVuIHRoZSBzdXJyb3VuZGluZyBmcmFtZSB3aGljaCB3cmFwcyB5b3VyIHdob2xlIGFwcC4gRGVmaW5pbmcgYSBjaHVuayBvZlxuICAvLyBVSSBhcyBhICoqVmlldyoqIGFsbG93cyB5b3UgdG8gZGVmaW5lIHlvdXIgRE9NIGV2ZW50cyBkZWNsYXJhdGl2ZWx5LCB3aXRob3V0XG4gIC8vIGhhdmluZyB0byB3b3JyeSBhYm91dCByZW5kZXIgb3JkZXIgLi4uIGFuZCBtYWtlcyBpdCBlYXN5IGZvciB0aGUgdmlldyB0b1xuICAvLyByZWFjdCB0byBzcGVjaWZpYyBjaGFuZ2VzIGluIHRoZSBzdGF0ZSBvZiB5b3VyIG1vZGVscy5cblxuICAvLyBDcmVhdGluZyBhIEJhY2tib25lLlZpZXcgY3JlYXRlcyBpdHMgaW5pdGlhbCBlbGVtZW50IG91dHNpZGUgb2YgdGhlIERPTSxcbiAgLy8gaWYgYW4gZXhpc3RpbmcgZWxlbWVudCBpcyBub3QgcHJvdmlkZWQuLi5cbiAgdmFyIFZpZXcgPSBCYWNrYm9uZS5WaWV3ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHRoaXMuY2lkID0gXy51bmlxdWVJZCgndmlldycpO1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgXy5leHRlbmQodGhpcywgXy5waWNrKG9wdGlvbnMsIHZpZXdPcHRpb25zKSk7XG4gICAgdGhpcy5fZW5zdXJlRWxlbWVudCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMuZGVsZWdhdGVFdmVudHMoKTtcbiAgfTtcblxuICAvLyBDYWNoZWQgcmVnZXggdG8gc3BsaXQga2V5cyBmb3IgYGRlbGVnYXRlYC5cbiAgdmFyIGRlbGVnYXRlRXZlbnRTcGxpdHRlciA9IC9eKFxcUyspXFxzKiguKikkLztcblxuICAvLyBMaXN0IG9mIHZpZXcgb3B0aW9ucyB0byBiZSBtZXJnZWQgYXMgcHJvcGVydGllcy5cbiAgdmFyIHZpZXdPcHRpb25zID0gWydtb2RlbCcsICdjb2xsZWN0aW9uJywgJ2VsJywgJ2lkJywgJ2F0dHJpYnV0ZXMnLCAnY2xhc3NOYW1lJywgJ3RhZ05hbWUnLCAnZXZlbnRzJ107XG5cbiAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLlZpZXcqKiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLlxuICBfLmV4dGVuZChWaWV3LnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBgdGFnTmFtZWAgb2YgYSBWaWV3J3MgZWxlbWVudCBpcyBgXCJkaXZcImAuXG4gICAgdGFnTmFtZTogJ2RpdicsXG5cbiAgICAvLyBqUXVlcnkgZGVsZWdhdGUgZm9yIGVsZW1lbnQgbG9va3VwLCBzY29wZWQgdG8gRE9NIGVsZW1lbnRzIHdpdGhpbiB0aGVcbiAgICAvLyBjdXJyZW50IHZpZXcuIFRoaXMgc2hvdWxkIGJlIHByZWZlcnJlZCB0byBnbG9iYWwgbG9va3VwcyB3aGVyZSBwb3NzaWJsZS5cbiAgICAkOiBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIHRoaXMuJGVsLmZpbmQoc2VsZWN0b3IpO1xuICAgIH0sXG5cbiAgICAvLyBJbml0aWFsaXplIGlzIGFuIGVtcHR5IGZ1bmN0aW9uIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGl0IHdpdGggeW91ciBvd25cbiAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpe30sXG5cbiAgICAvLyAqKnJlbmRlcioqIGlzIHRoZSBjb3JlIGZ1bmN0aW9uIHRoYXQgeW91ciB2aWV3IHNob3VsZCBvdmVycmlkZSwgaW4gb3JkZXJcbiAgICAvLyB0byBwb3B1bGF0ZSBpdHMgZWxlbWVudCAoYHRoaXMuZWxgKSwgd2l0aCB0aGUgYXBwcm9wcmlhdGUgSFRNTC4gVGhlXG4gICAgLy8gY29udmVudGlvbiBpcyBmb3IgKipyZW5kZXIqKiB0byBhbHdheXMgcmV0dXJuIGB0aGlzYC5cbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSB0aGlzIHZpZXcgYnkgdGFraW5nIHRoZSBlbGVtZW50IG91dCBvZiB0aGUgRE9NLCBhbmQgcmVtb3ZpbmcgYW55XG4gICAgLy8gYXBwbGljYWJsZSBCYWNrYm9uZS5FdmVudHMgbGlzdGVuZXJzLlxuICAgIHJlbW92ZTogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLiRlbC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuc3RvcExpc3RlbmluZygpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIENoYW5nZSB0aGUgdmlldydzIGVsZW1lbnQgKGB0aGlzLmVsYCBwcm9wZXJ0eSksIGluY2x1ZGluZyBldmVudFxuICAgIC8vIHJlLWRlbGVnYXRpb24uXG4gICAgc2V0RWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCwgZGVsZWdhdGUpIHtcbiAgICAgIGlmICh0aGlzLiRlbCkgdGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICB0aGlzLiRlbCA9IGVsZW1lbnQgaW5zdGFuY2VvZiBCYWNrYm9uZS4kID8gZWxlbWVudCA6IEJhY2tib25lLiQoZWxlbWVudCk7XG4gICAgICB0aGlzLmVsID0gdGhpcy4kZWxbMF07XG4gICAgICBpZiAoZGVsZWdhdGUgIT09IGZhbHNlKSB0aGlzLmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gU2V0IGNhbGxiYWNrcywgd2hlcmUgYHRoaXMuZXZlbnRzYCBpcyBhIGhhc2ggb2ZcbiAgICAvL1xuICAgIC8vICp7XCJldmVudCBzZWxlY3RvclwiOiBcImNhbGxiYWNrXCJ9KlxuICAgIC8vXG4gICAgLy8gICAgIHtcbiAgICAvLyAgICAgICAnbW91c2Vkb3duIC50aXRsZSc6ICAnZWRpdCcsXG4gICAgLy8gICAgICAgJ2NsaWNrIC5idXR0b24nOiAgICAgJ3NhdmUnLFxuICAgIC8vICAgICAgICdjbGljayAub3Blbic6ICAgICAgIGZ1bmN0aW9uKGUpIHsgLi4uIH1cbiAgICAvLyAgICAgfVxuICAgIC8vXG4gICAgLy8gcGFpcnMuIENhbGxiYWNrcyB3aWxsIGJlIGJvdW5kIHRvIHRoZSB2aWV3LCB3aXRoIGB0aGlzYCBzZXQgcHJvcGVybHkuXG4gICAgLy8gVXNlcyBldmVudCBkZWxlZ2F0aW9uIGZvciBlZmZpY2llbmN5LlxuICAgIC8vIE9taXR0aW5nIHRoZSBzZWxlY3RvciBiaW5kcyB0aGUgZXZlbnQgdG8gYHRoaXMuZWxgLlxuICAgIC8vIFRoaXMgb25seSB3b3JrcyBmb3IgZGVsZWdhdGUtYWJsZSBldmVudHM6IG5vdCBgZm9jdXNgLCBgYmx1cmAsIGFuZFxuICAgIC8vIG5vdCBgY2hhbmdlYCwgYHN1Ym1pdGAsIGFuZCBgcmVzZXRgIGluIEludGVybmV0IEV4cGxvcmVyLlxuICAgIGRlbGVnYXRlRXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcbiAgICAgIGlmICghKGV2ZW50cyB8fCAoZXZlbnRzID0gXy5yZXN1bHQodGhpcywgJ2V2ZW50cycpKSkpIHJldHVybiB0aGlzO1xuICAgICAgdGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gZXZlbnRzKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSBldmVudHNba2V5XTtcbiAgICAgICAgaWYgKCFfLmlzRnVuY3Rpb24obWV0aG9kKSkgbWV0aG9kID0gdGhpc1tldmVudHNba2V5XV07XG4gICAgICAgIGlmICghbWV0aG9kKSBjb250aW51ZTtcblxuICAgICAgICB2YXIgbWF0Y2ggPSBrZXkubWF0Y2goZGVsZWdhdGVFdmVudFNwbGl0dGVyKTtcbiAgICAgICAgdmFyIGV2ZW50TmFtZSA9IG1hdGNoWzFdLCBzZWxlY3RvciA9IG1hdGNoWzJdO1xuICAgICAgICBtZXRob2QgPSBfLmJpbmQobWV0aG9kLCB0aGlzKTtcbiAgICAgICAgZXZlbnROYW1lICs9ICcuZGVsZWdhdGVFdmVudHMnICsgdGhpcy5jaWQ7XG4gICAgICAgIGlmIChzZWxlY3RvciA9PT0gJycpIHtcbiAgICAgICAgICB0aGlzLiRlbC5vbihldmVudE5hbWUsIG1ldGhvZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kZWwub24oZXZlbnROYW1lLCBzZWxlY3RvciwgbWV0aG9kKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIENsZWFycyBhbGwgY2FsbGJhY2tzIHByZXZpb3VzbHkgYm91bmQgdG8gdGhlIHZpZXcgd2l0aCBgZGVsZWdhdGVFdmVudHNgLlxuICAgIC8vIFlvdSB1c3VhbGx5IGRvbid0IG5lZWQgdG8gdXNlIHRoaXMsIGJ1dCBtYXkgd2lzaCB0byBpZiB5b3UgaGF2ZSBtdWx0aXBsZVxuICAgIC8vIEJhY2tib25lIHZpZXdzIGF0dGFjaGVkIHRvIHRoZSBzYW1lIERPTSBlbGVtZW50LlxuICAgIHVuZGVsZWdhdGVFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy4kZWwub2ZmKCcuZGVsZWdhdGVFdmVudHMnICsgdGhpcy5jaWQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBWaWV3IGhhcyBhIERPTSBlbGVtZW50IHRvIHJlbmRlciBpbnRvLlxuICAgIC8vIElmIGB0aGlzLmVsYCBpcyBhIHN0cmluZywgcGFzcyBpdCB0aHJvdWdoIGAkKClgLCB0YWtlIHRoZSBmaXJzdFxuICAgIC8vIG1hdGNoaW5nIGVsZW1lbnQsIGFuZCByZS1hc3NpZ24gaXQgdG8gYGVsYC4gT3RoZXJ3aXNlLCBjcmVhdGVcbiAgICAvLyBhbiBlbGVtZW50IGZyb20gdGhlIGBpZGAsIGBjbGFzc05hbWVgIGFuZCBgdGFnTmFtZWAgcHJvcGVydGllcy5cbiAgICBfZW5zdXJlRWxlbWVudDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMuZWwpIHtcbiAgICAgICAgdmFyIGF0dHJzID0gXy5leHRlbmQoe30sIF8ucmVzdWx0KHRoaXMsICdhdHRyaWJ1dGVzJykpO1xuICAgICAgICBpZiAodGhpcy5pZCkgYXR0cnMuaWQgPSBfLnJlc3VsdCh0aGlzLCAnaWQnKTtcbiAgICAgICAgaWYgKHRoaXMuY2xhc3NOYW1lKSBhdHRyc1snY2xhc3MnXSA9IF8ucmVzdWx0KHRoaXMsICdjbGFzc05hbWUnKTtcbiAgICAgICAgdmFyICRlbCA9IEJhY2tib25lLiQoJzwnICsgXy5yZXN1bHQodGhpcywgJ3RhZ05hbWUnKSArICc+JykuYXR0cihhdHRycyk7XG4gICAgICAgIHRoaXMuc2V0RWxlbWVudCgkZWwsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0RWxlbWVudChfLnJlc3VsdCh0aGlzLCAnZWwnKSwgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cblxuICB9KTtcblxuICAvLyBCYWNrYm9uZS5zeW5jXG4gIC8vIC0tLS0tLS0tLS0tLS1cblxuICAvLyBPdmVycmlkZSB0aGlzIGZ1bmN0aW9uIHRvIGNoYW5nZSB0aGUgbWFubmVyIGluIHdoaWNoIEJhY2tib25lIHBlcnNpc3RzXG4gIC8vIG1vZGVscyB0byB0aGUgc2VydmVyLiBZb3Ugd2lsbCBiZSBwYXNzZWQgdGhlIHR5cGUgb2YgcmVxdWVzdCwgYW5kIHRoZVxuICAvLyBtb2RlbCBpbiBxdWVzdGlvbi4gQnkgZGVmYXVsdCwgbWFrZXMgYSBSRVNUZnVsIEFqYXggcmVxdWVzdFxuICAvLyB0byB0aGUgbW9kZWwncyBgdXJsKClgLiBTb21lIHBvc3NpYmxlIGN1c3RvbWl6YXRpb25zIGNvdWxkIGJlOlxuICAvL1xuICAvLyAqIFVzZSBgc2V0VGltZW91dGAgdG8gYmF0Y2ggcmFwaWQtZmlyZSB1cGRhdGVzIGludG8gYSBzaW5nbGUgcmVxdWVzdC5cbiAgLy8gKiBTZW5kIHVwIHRoZSBtb2RlbHMgYXMgWE1MIGluc3RlYWQgb2YgSlNPTi5cbiAgLy8gKiBQZXJzaXN0IG1vZGVscyB2aWEgV2ViU29ja2V0cyBpbnN0ZWFkIG9mIEFqYXguXG4gIC8vXG4gIC8vIFR1cm4gb24gYEJhY2tib25lLmVtdWxhdGVIVFRQYCBpbiBvcmRlciB0byBzZW5kIGBQVVRgIGFuZCBgREVMRVRFYCByZXF1ZXN0c1xuICAvLyBhcyBgUE9TVGAsIHdpdGggYSBgX21ldGhvZGAgcGFyYW1ldGVyIGNvbnRhaW5pbmcgdGhlIHRydWUgSFRUUCBtZXRob2QsXG4gIC8vIGFzIHdlbGwgYXMgYWxsIHJlcXVlc3RzIHdpdGggdGhlIGJvZHkgYXMgYGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZGBcbiAgLy8gaW5zdGVhZCBvZiBgYXBwbGljYXRpb24vanNvbmAgd2l0aCB0aGUgbW9kZWwgaW4gYSBwYXJhbSBuYW1lZCBgbW9kZWxgLlxuICAvLyBVc2VmdWwgd2hlbiBpbnRlcmZhY2luZyB3aXRoIHNlcnZlci1zaWRlIGxhbmd1YWdlcyBsaWtlICoqUEhQKiogdGhhdCBtYWtlXG4gIC8vIGl0IGRpZmZpY3VsdCB0byByZWFkIHRoZSBib2R5IG9mIGBQVVRgIHJlcXVlc3RzLlxuICBCYWNrYm9uZS5zeW5jID0gZnVuY3Rpb24obWV0aG9kLCBtb2RlbCwgb3B0aW9ucykge1xuICAgIHZhciB0eXBlID0gbWV0aG9kTWFwW21ldGhvZF07XG5cbiAgICAvLyBEZWZhdWx0IG9wdGlvbnMsIHVubGVzcyBzcGVjaWZpZWQuXG4gICAgXy5kZWZhdWx0cyhvcHRpb25zIHx8IChvcHRpb25zID0ge30pLCB7XG4gICAgICBlbXVsYXRlSFRUUDogQmFja2JvbmUuZW11bGF0ZUhUVFAsXG4gICAgICBlbXVsYXRlSlNPTjogQmFja2JvbmUuZW11bGF0ZUpTT05cbiAgICB9KTtcblxuICAgIC8vIERlZmF1bHQgSlNPTi1yZXF1ZXN0IG9wdGlvbnMuXG4gICAgdmFyIHBhcmFtcyA9IHt0eXBlOiB0eXBlLCBkYXRhVHlwZTogJ2pzb24nfTtcblxuICAgIC8vIEVuc3VyZSB0aGF0IHdlIGhhdmUgYSBVUkwuXG4gICAgaWYgKCFvcHRpb25zLnVybCkge1xuICAgICAgcGFyYW1zLnVybCA9IF8ucmVzdWx0KG1vZGVsLCAndXJsJykgfHwgdXJsRXJyb3IoKTtcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgdGhhdCB3ZSBoYXZlIHRoZSBhcHByb3ByaWF0ZSByZXF1ZXN0IGRhdGEuXG4gICAgaWYgKG9wdGlvbnMuZGF0YSA9PSBudWxsICYmIG1vZGVsICYmIChtZXRob2QgPT09ICdjcmVhdGUnIHx8IG1ldGhvZCA9PT0gJ3VwZGF0ZScgfHwgbWV0aG9kID09PSAncGF0Y2gnKSkge1xuICAgICAgcGFyYW1zLmNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgcGFyYW1zLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zLmF0dHJzIHx8IG1vZGVsLnRvSlNPTihvcHRpb25zKSk7XG4gICAgfVxuXG4gICAgLy8gRm9yIG9sZGVyIHNlcnZlcnMsIGVtdWxhdGUgSlNPTiBieSBlbmNvZGluZyB0aGUgcmVxdWVzdCBpbnRvIGFuIEhUTUwtZm9ybS5cbiAgICBpZiAob3B0aW9ucy5lbXVsYXRlSlNPTikge1xuICAgICAgcGFyYW1zLmNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7XG4gICAgICBwYXJhbXMuZGF0YSA9IHBhcmFtcy5kYXRhID8ge21vZGVsOiBwYXJhbXMuZGF0YX0gOiB7fTtcbiAgICB9XG5cbiAgICAvLyBGb3Igb2xkZXIgc2VydmVycywgZW11bGF0ZSBIVFRQIGJ5IG1pbWlja2luZyB0aGUgSFRUUCBtZXRob2Qgd2l0aCBgX21ldGhvZGBcbiAgICAvLyBBbmQgYW4gYFgtSFRUUC1NZXRob2QtT3ZlcnJpZGVgIGhlYWRlci5cbiAgICBpZiAob3B0aW9ucy5lbXVsYXRlSFRUUCAmJiAodHlwZSA9PT0gJ1BVVCcgfHwgdHlwZSA9PT0gJ0RFTEVURScgfHwgdHlwZSA9PT0gJ1BBVENIJykpIHtcbiAgICAgIHBhcmFtcy50eXBlID0gJ1BPU1QnO1xuICAgICAgaWYgKG9wdGlvbnMuZW11bGF0ZUpTT04pIHBhcmFtcy5kYXRhLl9tZXRob2QgPSB0eXBlO1xuICAgICAgdmFyIGJlZm9yZVNlbmQgPSBvcHRpb25zLmJlZm9yZVNlbmQ7XG4gICAgICBvcHRpb25zLmJlZm9yZVNlbmQgPSBmdW5jdGlvbih4aHIpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtSFRUUC1NZXRob2QtT3ZlcnJpZGUnLCB0eXBlKTtcbiAgICAgICAgaWYgKGJlZm9yZVNlbmQpIHJldHVybiBiZWZvcmVTZW5kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIERvbid0IHByb2Nlc3MgZGF0YSBvbiBhIG5vbi1HRVQgcmVxdWVzdC5cbiAgICBpZiAocGFyYW1zLnR5cGUgIT09ICdHRVQnICYmICFvcHRpb25zLmVtdWxhdGVKU09OKSB7XG4gICAgICBwYXJhbXMucHJvY2Vzc0RhdGEgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSdyZSBzZW5kaW5nIGEgYFBBVENIYCByZXF1ZXN0LCBhbmQgd2UncmUgaW4gYW4gb2xkIEludGVybmV0IEV4cGxvcmVyXG4gICAgLy8gdGhhdCBzdGlsbCBoYXMgQWN0aXZlWCBlbmFibGVkIGJ5IGRlZmF1bHQsIG92ZXJyaWRlIGpRdWVyeSB0byB1c2UgdGhhdFxuICAgIC8vIGZvciBYSFIgaW5zdGVhZC4gUmVtb3ZlIHRoaXMgbGluZSB3aGVuIGpRdWVyeSBzdXBwb3J0cyBgUEFUQ0hgIG9uIElFOC5cbiAgICBpZiAocGFyYW1zLnR5cGUgPT09ICdQQVRDSCcgJiYgbm9YaHJQYXRjaCkge1xuICAgICAgcGFyYW1zLnhociA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gTWFrZSB0aGUgcmVxdWVzdCwgYWxsb3dpbmcgdGhlIHVzZXIgdG8gb3ZlcnJpZGUgYW55IEFqYXggb3B0aW9ucy5cbiAgICB2YXIgeGhyID0gb3B0aW9ucy54aHIgPSBCYWNrYm9uZS5hamF4KF8uZXh0ZW5kKHBhcmFtcywgb3B0aW9ucykpO1xuICAgIG1vZGVsLnRyaWdnZXIoJ3JlcXVlc3QnLCBtb2RlbCwgeGhyLCBvcHRpb25zKTtcbiAgICByZXR1cm4geGhyO1xuICB9O1xuXG4gIHZhciBub1hoclBhdGNoID1cbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiAhIXdpbmRvdy5BY3RpdmVYT2JqZWN0ICYmXG4gICAgICAhKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiAobmV3IFhNTEh0dHBSZXF1ZXN0KS5kaXNwYXRjaEV2ZW50KTtcblxuICAvLyBNYXAgZnJvbSBDUlVEIHRvIEhUVFAgZm9yIG91ciBkZWZhdWx0IGBCYWNrYm9uZS5zeW5jYCBpbXBsZW1lbnRhdGlvbi5cbiAgdmFyIG1ldGhvZE1hcCA9IHtcbiAgICAnY3JlYXRlJzogJ1BPU1QnLFxuICAgICd1cGRhdGUnOiAnUFVUJyxcbiAgICAncGF0Y2gnOiAgJ1BBVENIJyxcbiAgICAnZGVsZXRlJzogJ0RFTEVURScsXG4gICAgJ3JlYWQnOiAgICdHRVQnXG4gIH07XG5cbiAgLy8gU2V0IHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIGBCYWNrYm9uZS5hamF4YCB0byBwcm94eSB0aHJvdWdoIHRvIGAkYC5cbiAgLy8gT3ZlcnJpZGUgdGhpcyBpZiB5b3UnZCBsaWtlIHRvIHVzZSBhIGRpZmZlcmVudCBsaWJyYXJ5LlxuICBCYWNrYm9uZS5hamF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIEJhY2tib25lLiQuYWpheC5hcHBseShCYWNrYm9uZS4kLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIEJhY2tib25lLlJvdXRlclxuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBSb3V0ZXJzIG1hcCBmYXV4LVVSTHMgdG8gYWN0aW9ucywgYW5kIGZpcmUgZXZlbnRzIHdoZW4gcm91dGVzIGFyZVxuICAvLyBtYXRjaGVkLiBDcmVhdGluZyBhIG5ldyBvbmUgc2V0cyBpdHMgYHJvdXRlc2AgaGFzaCwgaWYgbm90IHNldCBzdGF0aWNhbGx5LlxuICB2YXIgUm91dGVyID0gQmFja2JvbmUuUm91dGVyID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgaWYgKG9wdGlvbnMucm91dGVzKSB0aGlzLnJvdXRlcyA9IG9wdGlvbnMucm91dGVzO1xuICAgIHRoaXMuX2JpbmRSb3V0ZXMoKTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBDYWNoZWQgcmVndWxhciBleHByZXNzaW9ucyBmb3IgbWF0Y2hpbmcgbmFtZWQgcGFyYW0gcGFydHMgYW5kIHNwbGF0dGVkXG4gIC8vIHBhcnRzIG9mIHJvdXRlIHN0cmluZ3MuXG4gIHZhciBvcHRpb25hbFBhcmFtID0gL1xcKCguKj8pXFwpL2c7XG4gIHZhciBuYW1lZFBhcmFtICAgID0gLyhcXChcXD8pPzpcXHcrL2c7XG4gIHZhciBzcGxhdFBhcmFtICAgID0gL1xcKlxcdysvZztcbiAgdmFyIGVzY2FwZVJlZ0V4cCAgPSAvW1xcLXt9XFxbXFxdKz8uLFxcXFxcXF4kfCNcXHNdL2c7XG5cbiAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLlJvdXRlcioqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG4gIF8uZXh0ZW5kKFJvdXRlci5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXG4gICAgLy8gTWFudWFsbHkgYmluZCBhIHNpbmdsZSBuYW1lZCByb3V0ZSB0byBhIGNhbGxiYWNrLiBGb3IgZXhhbXBsZTpcbiAgICAvL1xuICAgIC8vICAgICB0aGlzLnJvdXRlKCdzZWFyY2gvOnF1ZXJ5L3A6bnVtJywgJ3NlYXJjaCcsIGZ1bmN0aW9uKHF1ZXJ5LCBudW0pIHtcbiAgICAvLyAgICAgICAuLi5cbiAgICAvLyAgICAgfSk7XG4gICAgLy9cbiAgICByb3V0ZTogZnVuY3Rpb24ocm91dGUsIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAoIV8uaXNSZWdFeHAocm91dGUpKSByb3V0ZSA9IHRoaXMuX3JvdXRlVG9SZWdFeHAocm91dGUpO1xuICAgICAgaWYgKF8uaXNGdW5jdGlvbihuYW1lKSkge1xuICAgICAgICBjYWxsYmFjayA9IG5hbWU7XG4gICAgICAgIG5hbWUgPSAnJztcbiAgICAgIH1cbiAgICAgIGlmICghY2FsbGJhY2spIGNhbGxiYWNrID0gdGhpc1tuYW1lXTtcbiAgICAgIHZhciByb3V0ZXIgPSB0aGlzO1xuICAgICAgQmFja2JvbmUuaGlzdG9yeS5yb3V0ZShyb3V0ZSwgZnVuY3Rpb24oZnJhZ21lbnQpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSByb3V0ZXIuX2V4dHJhY3RQYXJhbWV0ZXJzKHJvdXRlLCBmcmFnbWVudCk7XG4gICAgICAgIHJvdXRlci5leGVjdXRlKGNhbGxiYWNrLCBhcmdzKTtcbiAgICAgICAgcm91dGVyLnRyaWdnZXIuYXBwbHkocm91dGVyLCBbJ3JvdXRlOicgKyBuYW1lXS5jb25jYXQoYXJncykpO1xuICAgICAgICByb3V0ZXIudHJpZ2dlcigncm91dGUnLCBuYW1lLCBhcmdzKTtcbiAgICAgICAgQmFja2JvbmUuaGlzdG9yeS50cmlnZ2VyKCdyb3V0ZScsIHJvdXRlciwgbmFtZSwgYXJncyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBFeGVjdXRlIGEgcm91dGUgaGFuZGxlciB3aXRoIHRoZSBwcm92aWRlZCBwYXJhbWV0ZXJzLiAgVGhpcyBpcyBhblxuICAgIC8vIGV4Y2VsbGVudCBwbGFjZSB0byBkbyBwcmUtcm91dGUgc2V0dXAgb3IgcG9zdC1yb3V0ZSBjbGVhbnVwLlxuICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKGNhbGxiYWNrLCBhcmdzKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH0sXG5cbiAgICAvLyBTaW1wbGUgcHJveHkgdG8gYEJhY2tib25lLmhpc3RvcnlgIHRvIHNhdmUgYSBmcmFnbWVudCBpbnRvIHRoZSBoaXN0b3J5LlxuICAgIG5hdmlnYXRlOiBmdW5jdGlvbihmcmFnbWVudCwgb3B0aW9ucykge1xuICAgICAgQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShmcmFnbWVudCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQmluZCBhbGwgZGVmaW5lZCByb3V0ZXMgdG8gYEJhY2tib25lLmhpc3RvcnlgLiBXZSBoYXZlIHRvIHJldmVyc2UgdGhlXG4gICAgLy8gb3JkZXIgb2YgdGhlIHJvdXRlcyBoZXJlIHRvIHN1cHBvcnQgYmVoYXZpb3Igd2hlcmUgdGhlIG1vc3QgZ2VuZXJhbFxuICAgIC8vIHJvdXRlcyBjYW4gYmUgZGVmaW5lZCBhdCB0aGUgYm90dG9tIG9mIHRoZSByb3V0ZSBtYXAuXG4gICAgX2JpbmRSb3V0ZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLnJvdXRlcykgcmV0dXJuO1xuICAgICAgdGhpcy5yb3V0ZXMgPSBfLnJlc3VsdCh0aGlzLCAncm91dGVzJyk7XG4gICAgICB2YXIgcm91dGUsIHJvdXRlcyA9IF8ua2V5cyh0aGlzLnJvdXRlcyk7XG4gICAgICB3aGlsZSAoKHJvdXRlID0gcm91dGVzLnBvcCgpKSAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMucm91dGUocm91dGUsIHRoaXMucm91dGVzW3JvdXRlXSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIENvbnZlcnQgYSByb3V0ZSBzdHJpbmcgaW50byBhIHJlZ3VsYXIgZXhwcmVzc2lvbiwgc3VpdGFibGUgZm9yIG1hdGNoaW5nXG4gICAgLy8gYWdhaW5zdCB0aGUgY3VycmVudCBsb2NhdGlvbiBoYXNoLlxuICAgIF9yb3V0ZVRvUmVnRXhwOiBmdW5jdGlvbihyb3V0ZSkge1xuICAgICAgcm91dGUgPSByb3V0ZS5yZXBsYWNlKGVzY2FwZVJlZ0V4cCwgJ1xcXFwkJicpXG4gICAgICAgICAgICAgICAgICAgLnJlcGxhY2Uob3B0aW9uYWxQYXJhbSwgJyg/OiQxKT8nKVxuICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKG5hbWVkUGFyYW0sIGZ1bmN0aW9uKG1hdGNoLCBvcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbmFsID8gbWF0Y2ggOiAnKFteLz9dKyknO1xuICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgLnJlcGxhY2Uoc3BsYXRQYXJhbSwgJyhbXj9dKj8pJyk7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyByb3V0ZSArICcoPzpcXFxcPyhbXFxcXHNcXFxcU10qKSk/JCcpO1xuICAgIH0sXG5cbiAgICAvLyBHaXZlbiBhIHJvdXRlLCBhbmQgYSBVUkwgZnJhZ21lbnQgdGhhdCBpdCBtYXRjaGVzLCByZXR1cm4gdGhlIGFycmF5IG9mXG4gICAgLy8gZXh0cmFjdGVkIGRlY29kZWQgcGFyYW1ldGVycy4gRW1wdHkgb3IgdW5tYXRjaGVkIHBhcmFtZXRlcnMgd2lsbCBiZVxuICAgIC8vIHRyZWF0ZWQgYXMgYG51bGxgIHRvIG5vcm1hbGl6ZSBjcm9zcy1icm93c2VyIGJlaGF2aW9yLlxuICAgIF9leHRyYWN0UGFyYW1ldGVyczogZnVuY3Rpb24ocm91dGUsIGZyYWdtZW50KSB7XG4gICAgICB2YXIgcGFyYW1zID0gcm91dGUuZXhlYyhmcmFnbWVudCkuc2xpY2UoMSk7XG4gICAgICByZXR1cm4gXy5tYXAocGFyYW1zLCBmdW5jdGlvbihwYXJhbSwgaSkge1xuICAgICAgICAvLyBEb24ndCBkZWNvZGUgdGhlIHNlYXJjaCBwYXJhbXMuXG4gICAgICAgIGlmIChpID09PSBwYXJhbXMubGVuZ3RoIC0gMSkgcmV0dXJuIHBhcmFtIHx8IG51bGw7XG4gICAgICAgIHJldHVybiBwYXJhbSA/IGRlY29kZVVSSUNvbXBvbmVudChwYXJhbSkgOiBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIEJhY2tib25lLkhpc3RvcnlcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEhhbmRsZXMgY3Jvc3MtYnJvd3NlciBoaXN0b3J5IG1hbmFnZW1lbnQsIGJhc2VkIG9uIGVpdGhlclxuICAvLyBbcHVzaFN0YXRlXShodHRwOi8vZGl2ZWludG9odG1sNS5pbmZvL2hpc3RvcnkuaHRtbCkgYW5kIHJlYWwgVVJMcywgb3JcbiAgLy8gW29uaGFzaGNoYW5nZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9ET00vd2luZG93Lm9uaGFzaGNoYW5nZSlcbiAgLy8gYW5kIFVSTCBmcmFnbWVudHMuIElmIHRoZSBicm93c2VyIHN1cHBvcnRzIG5laXRoZXIgKG9sZCBJRSwgbmF0Y2gpLFxuICAvLyBmYWxscyBiYWNrIHRvIHBvbGxpbmcuXG4gIHZhciBIaXN0b3J5ID0gQmFja2JvbmUuSGlzdG9yeSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICBfLmJpbmRBbGwodGhpcywgJ2NoZWNrVXJsJyk7XG5cbiAgICAvLyBFbnN1cmUgdGhhdCBgSGlzdG9yeWAgY2FuIGJlIHVzZWQgb3V0c2lkZSBvZiB0aGUgYnJvd3Nlci5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgICB0aGlzLmhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciBzdHJpcHBpbmcgYSBsZWFkaW5nIGhhc2gvc2xhc2ggYW5kIHRyYWlsaW5nIHNwYWNlLlxuICB2YXIgcm91dGVTdHJpcHBlciA9IC9eWyNcXC9dfFxccyskL2c7XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciBzdHJpcHBpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlcy5cbiAgdmFyIHJvb3RTdHJpcHBlciA9IC9eXFwvK3xcXC8rJC9nO1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3IgZGV0ZWN0aW5nIE1TSUUuXG4gIHZhciBpc0V4cGxvcmVyID0gL21zaWUgW1xcdy5dKy87XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciByZW1vdmluZyBhIHRyYWlsaW5nIHNsYXNoLlxuICB2YXIgdHJhaWxpbmdTbGFzaCA9IC9cXC8kLztcblxuICAvLyBDYWNoZWQgcmVnZXggZm9yIHN0cmlwcGluZyB1cmxzIG9mIGhhc2guXG4gIHZhciBwYXRoU3RyaXBwZXIgPSAvIy4qJC87XG5cbiAgLy8gSGFzIHRoZSBoaXN0b3J5IGhhbmRsaW5nIGFscmVhZHkgYmVlbiBzdGFydGVkP1xuICBIaXN0b3J5LnN0YXJ0ZWQgPSBmYWxzZTtcblxuICAvLyBTZXQgdXAgYWxsIGluaGVyaXRhYmxlICoqQmFja2JvbmUuSGlzdG9yeSoqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG4gIF8uZXh0ZW5kKEhpc3RvcnkucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIFRoZSBkZWZhdWx0IGludGVydmFsIHRvIHBvbGwgZm9yIGhhc2ggY2hhbmdlcywgaWYgbmVjZXNzYXJ5LCBpc1xuICAgIC8vIHR3ZW50eSB0aW1lcyBhIHNlY29uZC5cbiAgICBpbnRlcnZhbDogNTAsXG5cbiAgICAvLyBBcmUgd2UgYXQgdGhlIGFwcCByb290P1xuICAgIGF0Um9vdDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9bXlxcL10kLywgJyQmLycpID09PSB0aGlzLnJvb3Q7XG4gICAgfSxcblxuICAgIC8vIEdldHMgdGhlIHRydWUgaGFzaCB2YWx1ZS4gQ2Fubm90IHVzZSBsb2NhdGlvbi5oYXNoIGRpcmVjdGx5IGR1ZSB0byBidWdcbiAgICAvLyBpbiBGaXJlZm94IHdoZXJlIGxvY2F0aW9uLmhhc2ggd2lsbCBhbHdheXMgYmUgZGVjb2RlZC5cbiAgICBnZXRIYXNoOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICAgIHZhciBtYXRjaCA9ICh3aW5kb3cgfHwgdGhpcykubG9jYXRpb24uaHJlZi5tYXRjaCgvIyguKikkLyk7XG4gICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6ICcnO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIGNyb3NzLWJyb3dzZXIgbm9ybWFsaXplZCBVUkwgZnJhZ21lbnQsIGVpdGhlciBmcm9tIHRoZSBVUkwsXG4gICAgLy8gdGhlIGhhc2gsIG9yIHRoZSBvdmVycmlkZS5cbiAgICBnZXRGcmFnbWVudDogZnVuY3Rpb24oZnJhZ21lbnQsIGZvcmNlUHVzaFN0YXRlKSB7XG4gICAgICBpZiAoZnJhZ21lbnQgPT0gbnVsbCkge1xuICAgICAgICBpZiAodGhpcy5faGFzUHVzaFN0YXRlIHx8ICF0aGlzLl93YW50c0hhc2hDaGFuZ2UgfHwgZm9yY2VQdXNoU3RhdGUpIHtcbiAgICAgICAgICBmcmFnbWVudCA9IGRlY29kZVVSSSh0aGlzLmxvY2F0aW9uLnBhdGhuYW1lICsgdGhpcy5sb2NhdGlvbi5zZWFyY2gpO1xuICAgICAgICAgIHZhciByb290ID0gdGhpcy5yb290LnJlcGxhY2UodHJhaWxpbmdTbGFzaCwgJycpO1xuICAgICAgICAgIGlmICghZnJhZ21lbnQuaW5kZXhPZihyb290KSkgZnJhZ21lbnQgPSBmcmFnbWVudC5zbGljZShyb290Lmxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZnJhZ21lbnQgPSB0aGlzLmdldEhhc2goKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZyYWdtZW50LnJlcGxhY2Uocm91dGVTdHJpcHBlciwgJycpO1xuICAgIH0sXG5cbiAgICAvLyBTdGFydCB0aGUgaGFzaCBjaGFuZ2UgaGFuZGxpbmcsIHJldHVybmluZyBgdHJ1ZWAgaWYgdGhlIGN1cnJlbnQgVVJMIG1hdGNoZXNcbiAgICAvLyBhbiBleGlzdGluZyByb3V0ZSwgYW5kIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgIHN0YXJ0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAoSGlzdG9yeS5zdGFydGVkKSB0aHJvdyBuZXcgRXJyb3IoXCJCYWNrYm9uZS5oaXN0b3J5IGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZFwiKTtcbiAgICAgIEhpc3Rvcnkuc3RhcnRlZCA9IHRydWU7XG5cbiAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIGluaXRpYWwgY29uZmlndXJhdGlvbi4gRG8gd2UgbmVlZCBhbiBpZnJhbWU/XG4gICAgICAvLyBJcyBwdXNoU3RhdGUgZGVzaXJlZCAuLi4gaXMgaXQgYXZhaWxhYmxlP1xuICAgICAgdGhpcy5vcHRpb25zICAgICAgICAgID0gXy5leHRlbmQoe3Jvb3Q6ICcvJ30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICB0aGlzLnJvb3QgICAgICAgICAgICAgPSB0aGlzLm9wdGlvbnMucm9vdDtcbiAgICAgIHRoaXMuX3dhbnRzSGFzaENoYW5nZSA9IHRoaXMub3B0aW9ucy5oYXNoQ2hhbmdlICE9PSBmYWxzZTtcbiAgICAgIHRoaXMuX3dhbnRzUHVzaFN0YXRlICA9ICEhdGhpcy5vcHRpb25zLnB1c2hTdGF0ZTtcbiAgICAgIHRoaXMuX2hhc1B1c2hTdGF0ZSAgICA9ICEhKHRoaXMub3B0aW9ucy5wdXNoU3RhdGUgJiYgdGhpcy5oaXN0b3J5ICYmIHRoaXMuaGlzdG9yeS5wdXNoU3RhdGUpO1xuICAgICAgdmFyIGZyYWdtZW50ICAgICAgICAgID0gdGhpcy5nZXRGcmFnbWVudCgpO1xuICAgICAgdmFyIGRvY01vZGUgICAgICAgICAgID0gZG9jdW1lbnQuZG9jdW1lbnRNb2RlO1xuICAgICAgdmFyIG9sZElFICAgICAgICAgICAgID0gKGlzRXhwbG9yZXIuZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpICYmICghZG9jTW9kZSB8fCBkb2NNb2RlIDw9IDcpKTtcblxuICAgICAgLy8gTm9ybWFsaXplIHJvb3QgdG8gYWx3YXlzIGluY2x1ZGUgYSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaC5cbiAgICAgIHRoaXMucm9vdCA9ICgnLycgKyB0aGlzLnJvb3QgKyAnLycpLnJlcGxhY2Uocm9vdFN0cmlwcGVyLCAnLycpO1xuXG4gICAgICBpZiAob2xkSUUgJiYgdGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG4gICAgICAgIHZhciBmcmFtZSA9IEJhY2tib25lLiQoJzxpZnJhbWUgc3JjPVwiamF2YXNjcmlwdDowXCIgdGFiaW5kZXg9XCItMVwiPicpO1xuICAgICAgICB0aGlzLmlmcmFtZSA9IGZyYW1lLmhpZGUoKS5hcHBlbmRUbygnYm9keScpWzBdLmNvbnRlbnRXaW5kb3c7XG4gICAgICAgIHRoaXMubmF2aWdhdGUoZnJhZ21lbnQpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXBlbmRpbmcgb24gd2hldGhlciB3ZSdyZSB1c2luZyBwdXNoU3RhdGUgb3IgaGFzaGVzLCBhbmQgd2hldGhlclxuICAgICAgLy8gJ29uaGFzaGNoYW5nZScgaXMgc3VwcG9ydGVkLCBkZXRlcm1pbmUgaG93IHdlIGNoZWNrIHRoZSBVUkwgc3RhdGUuXG4gICAgICBpZiAodGhpcy5faGFzUHVzaFN0YXRlKSB7XG4gICAgICAgIEJhY2tib25lLiQod2luZG93KS5vbigncG9wc3RhdGUnLCB0aGlzLmNoZWNrVXJsKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fd2FudHNIYXNoQ2hhbmdlICYmICgnb25oYXNoY2hhbmdlJyBpbiB3aW5kb3cpICYmICFvbGRJRSkge1xuICAgICAgICBCYWNrYm9uZS4kKHdpbmRvdykub24oJ2hhc2hjaGFuZ2UnLCB0aGlzLmNoZWNrVXJsKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLmNoZWNrVXJsLCB0aGlzLmludGVydmFsKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGV0ZXJtaW5lIGlmIHdlIG5lZWQgdG8gY2hhbmdlIHRoZSBiYXNlIHVybCwgZm9yIGEgcHVzaFN0YXRlIGxpbmtcbiAgICAgIC8vIG9wZW5lZCBieSBhIG5vbi1wdXNoU3RhdGUgYnJvd3Nlci5cbiAgICAgIHRoaXMuZnJhZ21lbnQgPSBmcmFnbWVudDtcbiAgICAgIHZhciBsb2MgPSB0aGlzLmxvY2F0aW9uO1xuXG4gICAgICAvLyBUcmFuc2l0aW9uIGZyb20gaGFzaENoYW5nZSB0byBwdXNoU3RhdGUgb3IgdmljZSB2ZXJzYSBpZiBib3RoIGFyZVxuICAgICAgLy8gcmVxdWVzdGVkLlxuICAgICAgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiB0aGlzLl93YW50c1B1c2hTdGF0ZSkge1xuXG4gICAgICAgIC8vIElmIHdlJ3ZlIHN0YXJ0ZWQgb2ZmIHdpdGggYSByb3V0ZSBmcm9tIGEgYHB1c2hTdGF0ZWAtZW5hYmxlZFxuICAgICAgICAvLyBicm93c2VyLCBidXQgd2UncmUgY3VycmVudGx5IGluIGEgYnJvd3NlciB0aGF0IGRvZXNuJ3Qgc3VwcG9ydCBpdC4uLlxuICAgICAgICBpZiAoIXRoaXMuX2hhc1B1c2hTdGF0ZSAmJiAhdGhpcy5hdFJvb3QoKSkge1xuICAgICAgICAgIHRoaXMuZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KG51bGwsIHRydWUpO1xuICAgICAgICAgIHRoaXMubG9jYXRpb24ucmVwbGFjZSh0aGlzLnJvb3QgKyAnIycgKyB0aGlzLmZyYWdtZW50KTtcbiAgICAgICAgICAvLyBSZXR1cm4gaW1tZWRpYXRlbHkgYXMgYnJvd3NlciB3aWxsIGRvIHJlZGlyZWN0IHRvIG5ldyB1cmxcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAvLyBPciBpZiB3ZSd2ZSBzdGFydGVkIG91dCB3aXRoIGEgaGFzaC1iYXNlZCByb3V0ZSwgYnV0IHdlJ3JlIGN1cnJlbnRseVxuICAgICAgICAvLyBpbiBhIGJyb3dzZXIgd2hlcmUgaXQgY291bGQgYmUgYHB1c2hTdGF0ZWAtYmFzZWQgaW5zdGVhZC4uLlxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2hhc1B1c2hTdGF0ZSAmJiB0aGlzLmF0Um9vdCgpICYmIGxvYy5oYXNoKSB7XG4gICAgICAgICAgdGhpcy5mcmFnbWVudCA9IHRoaXMuZ2V0SGFzaCgpLnJlcGxhY2Uocm91dGVTdHJpcHBlciwgJycpO1xuICAgICAgICAgIHRoaXMuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIGRvY3VtZW50LnRpdGxlLCB0aGlzLnJvb3QgKyB0aGlzLmZyYWdtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5vcHRpb25zLnNpbGVudCkgcmV0dXJuIHRoaXMubG9hZFVybCgpO1xuICAgIH0sXG5cbiAgICAvLyBEaXNhYmxlIEJhY2tib25lLmhpc3RvcnksIHBlcmhhcHMgdGVtcG9yYXJpbHkuIE5vdCB1c2VmdWwgaW4gYSByZWFsIGFwcCxcbiAgICAvLyBidXQgcG9zc2libHkgdXNlZnVsIGZvciB1bml0IHRlc3RpbmcgUm91dGVycy5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIEJhY2tib25lLiQod2luZG93KS5vZmYoJ3BvcHN0YXRlJywgdGhpcy5jaGVja1VybCkub2ZmKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1VybCk7XG4gICAgICBpZiAodGhpcy5fY2hlY2tVcmxJbnRlcnZhbCkgY2xlYXJJbnRlcnZhbCh0aGlzLl9jaGVja1VybEludGVydmFsKTtcbiAgICAgIEhpc3Rvcnkuc3RhcnRlZCA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSByb3V0ZSB0byBiZSB0ZXN0ZWQgd2hlbiB0aGUgZnJhZ21lbnQgY2hhbmdlcy4gUm91dGVzIGFkZGVkIGxhdGVyXG4gICAgLy8gbWF5IG92ZXJyaWRlIHByZXZpb3VzIHJvdXRlcy5cbiAgICByb3V0ZTogZnVuY3Rpb24ocm91dGUsIGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzLnVuc2hpZnQoe3JvdXRlOiByb3V0ZSwgY2FsbGJhY2s6IGNhbGxiYWNrfSk7XG4gICAgfSxcblxuICAgIC8vIENoZWNrcyB0aGUgY3VycmVudCBVUkwgdG8gc2VlIGlmIGl0IGhhcyBjaGFuZ2VkLCBhbmQgaWYgaXQgaGFzLFxuICAgIC8vIGNhbGxzIGBsb2FkVXJsYCwgbm9ybWFsaXppbmcgYWNyb3NzIHRoZSBoaWRkZW4gaWZyYW1lLlxuICAgIGNoZWNrVXJsOiBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgY3VycmVudCA9IHRoaXMuZ2V0RnJhZ21lbnQoKTtcbiAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLmZyYWdtZW50ICYmIHRoaXMuaWZyYW1lKSB7XG4gICAgICAgIGN1cnJlbnQgPSB0aGlzLmdldEZyYWdtZW50KHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZSkpO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnQgPT09IHRoaXMuZnJhZ21lbnQpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmICh0aGlzLmlmcmFtZSkgdGhpcy5uYXZpZ2F0ZShjdXJyZW50KTtcbiAgICAgIHRoaXMubG9hZFVybCgpO1xuICAgIH0sXG5cbiAgICAvLyBBdHRlbXB0IHRvIGxvYWQgdGhlIGN1cnJlbnQgVVJMIGZyYWdtZW50LiBJZiBhIHJvdXRlIHN1Y2NlZWRzIHdpdGggYVxuICAgIC8vIG1hdGNoLCByZXR1cm5zIGB0cnVlYC4gSWYgbm8gZGVmaW5lZCByb3V0ZXMgbWF0Y2hlcyB0aGUgZnJhZ21lbnQsXG4gICAgLy8gcmV0dXJucyBgZmFsc2VgLlxuICAgIGxvYWRVcmw6IGZ1bmN0aW9uKGZyYWdtZW50KSB7XG4gICAgICBmcmFnbWVudCA9IHRoaXMuZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KGZyYWdtZW50KTtcbiAgICAgIHJldHVybiBfLmFueSh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgIGlmIChoYW5kbGVyLnJvdXRlLnRlc3QoZnJhZ21lbnQpKSB7XG4gICAgICAgICAgaGFuZGxlci5jYWxsYmFjayhmcmFnbWVudCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBTYXZlIGEgZnJhZ21lbnQgaW50byB0aGUgaGFzaCBoaXN0b3J5LCBvciByZXBsYWNlIHRoZSBVUkwgc3RhdGUgaWYgdGhlXG4gICAgLy8gJ3JlcGxhY2UnIG9wdGlvbiBpcyBwYXNzZWQuIFlvdSBhcmUgcmVzcG9uc2libGUgZm9yIHByb3Blcmx5IFVSTC1lbmNvZGluZ1xuICAgIC8vIHRoZSBmcmFnbWVudCBpbiBhZHZhbmNlLlxuICAgIC8vXG4gICAgLy8gVGhlIG9wdGlvbnMgb2JqZWN0IGNhbiBjb250YWluIGB0cmlnZ2VyOiB0cnVlYCBpZiB5b3Ugd2lzaCB0byBoYXZlIHRoZVxuICAgIC8vIHJvdXRlIGNhbGxiYWNrIGJlIGZpcmVkIChub3QgdXN1YWxseSBkZXNpcmFibGUpLCBvciBgcmVwbGFjZTogdHJ1ZWAsIGlmXG4gICAgLy8geW91IHdpc2ggdG8gbW9kaWZ5IHRoZSBjdXJyZW50IFVSTCB3aXRob3V0IGFkZGluZyBhbiBlbnRyeSB0byB0aGUgaGlzdG9yeS5cbiAgICBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsIG9wdGlvbnMpIHtcbiAgICAgIGlmICghSGlzdG9yeS5zdGFydGVkKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoIW9wdGlvbnMgfHwgb3B0aW9ucyA9PT0gdHJ1ZSkgb3B0aW9ucyA9IHt0cmlnZ2VyOiAhIW9wdGlvbnN9O1xuXG4gICAgICB2YXIgdXJsID0gdGhpcy5yb290ICsgKGZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudChmcmFnbWVudCB8fCAnJykpO1xuXG4gICAgICAvLyBTdHJpcCB0aGUgaGFzaCBmb3IgbWF0Y2hpbmcuXG4gICAgICBmcmFnbWVudCA9IGZyYWdtZW50LnJlcGxhY2UocGF0aFN0cmlwcGVyLCAnJyk7XG5cbiAgICAgIGlmICh0aGlzLmZyYWdtZW50ID09PSBmcmFnbWVudCkgcmV0dXJuO1xuICAgICAgdGhpcy5mcmFnbWVudCA9IGZyYWdtZW50O1xuXG4gICAgICAvLyBEb24ndCBpbmNsdWRlIGEgdHJhaWxpbmcgc2xhc2ggb24gdGhlIHJvb3QuXG4gICAgICBpZiAoZnJhZ21lbnQgPT09ICcnICYmIHVybCAhPT0gJy8nKSB1cmwgPSB1cmwuc2xpY2UoMCwgLTEpO1xuXG4gICAgICAvLyBJZiBwdXNoU3RhdGUgaXMgYXZhaWxhYmxlLCB3ZSB1c2UgaXQgdG8gc2V0IHRoZSBmcmFnbWVudCBhcyBhIHJlYWwgVVJMLlxuICAgICAgaWYgKHRoaXMuX2hhc1B1c2hTdGF0ZSkge1xuICAgICAgICB0aGlzLmhpc3Rvcnlbb3B0aW9ucy5yZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJ10oe30sIGRvY3VtZW50LnRpdGxlLCB1cmwpO1xuXG4gICAgICAvLyBJZiBoYXNoIGNoYW5nZXMgaGF2ZW4ndCBiZWVuIGV4cGxpY2l0bHkgZGlzYWJsZWQsIHVwZGF0ZSB0aGUgaGFzaFxuICAgICAgLy8gZnJhZ21lbnQgdG8gc3RvcmUgaGlzdG9yeS5cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUhhc2godGhpcy5sb2NhdGlvbiwgZnJhZ21lbnQsIG9wdGlvbnMucmVwbGFjZSk7XG4gICAgICAgIGlmICh0aGlzLmlmcmFtZSAmJiAoZnJhZ21lbnQgIT09IHRoaXMuZ2V0RnJhZ21lbnQodGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lKSkpKSB7XG4gICAgICAgICAgLy8gT3BlbmluZyBhbmQgY2xvc2luZyB0aGUgaWZyYW1lIHRyaWNrcyBJRTcgYW5kIGVhcmxpZXIgdG8gcHVzaCBhXG4gICAgICAgICAgLy8gaGlzdG9yeSBlbnRyeSBvbiBoYXNoLXRhZyBjaGFuZ2UuICBXaGVuIHJlcGxhY2UgaXMgdHJ1ZSwgd2UgZG9uJ3RcbiAgICAgICAgICAvLyB3YW50IHRoaXMuXG4gICAgICAgICAgaWYoIW9wdGlvbnMucmVwbGFjZSkgdGhpcy5pZnJhbWUuZG9jdW1lbnQub3BlbigpLmNsb3NlKCk7XG4gICAgICAgICAgdGhpcy5fdXBkYXRlSGFzaCh0aGlzLmlmcmFtZS5sb2NhdGlvbiwgZnJhZ21lbnQsIG9wdGlvbnMucmVwbGFjZSk7XG4gICAgICAgIH1cblxuICAgICAgLy8gSWYgeW91J3ZlIHRvbGQgdXMgdGhhdCB5b3UgZXhwbGljaXRseSBkb24ndCB3YW50IGZhbGxiYWNrIGhhc2hjaGFuZ2UtXG4gICAgICAvLyBiYXNlZCBoaXN0b3J5LCB0aGVuIGBuYXZpZ2F0ZWAgYmVjb21lcyBhIHBhZ2UgcmVmcmVzaC5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uLmFzc2lnbih1cmwpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMudHJpZ2dlcikgcmV0dXJuIHRoaXMubG9hZFVybChmcmFnbWVudCk7XG4gICAgfSxcblxuICAgIC8vIFVwZGF0ZSB0aGUgaGFzaCBsb2NhdGlvbiwgZWl0aGVyIHJlcGxhY2luZyB0aGUgY3VycmVudCBlbnRyeSwgb3IgYWRkaW5nXG4gICAgLy8gYSBuZXcgb25lIHRvIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAgX3VwZGF0ZUhhc2g6IGZ1bmN0aW9uKGxvY2F0aW9uLCBmcmFnbWVudCwgcmVwbGFjZSkge1xuICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgdmFyIGhyZWYgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyhqYXZhc2NyaXB0OnwjKS4qJC8sICcnKTtcbiAgICAgICAgbG9jYXRpb24ucmVwbGFjZShocmVmICsgJyMnICsgZnJhZ21lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU29tZSBicm93c2VycyByZXF1aXJlIHRoYXQgYGhhc2hgIGNvbnRhaW5zIGEgbGVhZGluZyAjLlxuICAgICAgICBsb2NhdGlvbi5oYXNoID0gJyMnICsgZnJhZ21lbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIENyZWF0ZSB0aGUgZGVmYXVsdCBCYWNrYm9uZS5oaXN0b3J5LlxuICBCYWNrYm9uZS5oaXN0b3J5ID0gbmV3IEhpc3Rvcnk7XG5cbiAgLy8gSGVscGVyc1xuICAvLyAtLS0tLS0tXG5cbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvcnJlY3RseSBzZXQgdXAgdGhlIHByb3RvdHlwZSBjaGFpbiwgZm9yIHN1YmNsYXNzZXMuXG4gIC8vIFNpbWlsYXIgdG8gYGdvb2cuaW5oZXJpdHNgLCBidXQgdXNlcyBhIGhhc2ggb2YgcHJvdG90eXBlIHByb3BlcnRpZXMgYW5kXG4gIC8vIGNsYXNzIHByb3BlcnRpZXMgdG8gYmUgZXh0ZW5kZWQuXG4gIHZhciBleHRlbmQgPSBmdW5jdGlvbihwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuICAgIHZhciBjaGlsZDtcblxuICAgIC8vIFRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBmb3IgdGhlIG5ldyBzdWJjbGFzcyBpcyBlaXRoZXIgZGVmaW5lZCBieSB5b3VcbiAgICAvLyAodGhlIFwiY29uc3RydWN0b3JcIiBwcm9wZXJ0eSBpbiB5b3VyIGBleHRlbmRgIGRlZmluaXRpb24pLCBvciBkZWZhdWx0ZWRcbiAgICAvLyBieSB1cyB0byBzaW1wbHkgY2FsbCB0aGUgcGFyZW50J3MgY29uc3RydWN0b3IuXG4gICAgaWYgKHByb3RvUHJvcHMgJiYgXy5oYXMocHJvdG9Qcm9wcywgJ2NvbnN0cnVjdG9yJykpIHtcbiAgICAgIGNoaWxkID0gcHJvdG9Qcm9wcy5jb25zdHJ1Y3RvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hpbGQgPSBmdW5jdGlvbigpeyByZXR1cm4gcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH07XG4gICAgfVxuXG4gICAgLy8gQWRkIHN0YXRpYyBwcm9wZXJ0aWVzIHRvIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiwgaWYgc3VwcGxpZWQuXG4gICAgXy5leHRlbmQoY2hpbGQsIHBhcmVudCwgc3RhdGljUHJvcHMpO1xuXG4gICAgLy8gU2V0IHRoZSBwcm90b3R5cGUgY2hhaW4gdG8gaW5oZXJpdCBmcm9tIGBwYXJlbnRgLCB3aXRob3V0IGNhbGxpbmdcbiAgICAvLyBgcGFyZW50YCdzIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgIHZhciBTdXJyb2dhdGUgPSBmdW5jdGlvbigpeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH07XG4gICAgU3Vycm9nYXRlLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7XG4gICAgY2hpbGQucHJvdG90eXBlID0gbmV3IFN1cnJvZ2F0ZTtcblxuICAgIC8vIEFkZCBwcm90b3R5cGUgcHJvcGVydGllcyAoaW5zdGFuY2UgcHJvcGVydGllcykgdG8gdGhlIHN1YmNsYXNzLFxuICAgIC8vIGlmIHN1cHBsaWVkLlxuICAgIGlmIChwcm90b1Byb3BzKSBfLmV4dGVuZChjaGlsZC5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuXG4gICAgLy8gU2V0IGEgY29udmVuaWVuY2UgcHJvcGVydHkgaW4gY2FzZSB0aGUgcGFyZW50J3MgcHJvdG90eXBlIGlzIG5lZWRlZFxuICAgIC8vIGxhdGVyLlxuICAgIGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7XG5cbiAgICByZXR1cm4gY2hpbGQ7XG4gIH07XG5cbiAgLy8gU2V0IHVwIGluaGVyaXRhbmNlIGZvciB0aGUgbW9kZWwsIGNvbGxlY3Rpb24sIHJvdXRlciwgdmlldyBhbmQgaGlzdG9yeS5cbiAgTW9kZWwuZXh0ZW5kID0gQ29sbGVjdGlvbi5leHRlbmQgPSBSb3V0ZXIuZXh0ZW5kID0gVmlldy5leHRlbmQgPSBIaXN0b3J5LmV4dGVuZCA9IGV4dGVuZDtcblxuICAvLyBUaHJvdyBhbiBlcnJvciB3aGVuIGEgVVJMIGlzIG5lZWRlZCwgYW5kIG5vbmUgaXMgc3VwcGxpZWQuXG4gIHZhciB1cmxFcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQSBcInVybFwiIHByb3BlcnR5IG9yIGZ1bmN0aW9uIG11c3QgYmUgc3BlY2lmaWVkJyk7XG4gIH07XG5cbiAgLy8gV3JhcCBhbiBvcHRpb25hbCBlcnJvciBjYWxsYmFjayB3aXRoIGEgZmFsbGJhY2sgZXJyb3IgZXZlbnQuXG4gIHZhciB3cmFwRXJyb3IgPSBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgIHZhciBlcnJvciA9IG9wdGlvbnMuZXJyb3I7XG4gICAgb3B0aW9ucy5lcnJvciA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgIGlmIChlcnJvcikgZXJyb3IobW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgbW9kZWwudHJpZ2dlcignZXJyb3InLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gQmFja2JvbmU7XG5cbn0pKTtcbiIsInZhciBsb29rdXAgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG5cbjsoZnVuY3Rpb24gKGV4cG9ydHMpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG4gIHZhciBBcnIgPSAodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnKVxuICAgID8gVWludDhBcnJheVxuICAgIDogQXJyYXlcblxuXHR2YXIgUExVUyAgID0gJysnLmNoYXJDb2RlQXQoMClcblx0dmFyIFNMQVNIICA9ICcvJy5jaGFyQ29kZUF0KDApXG5cdHZhciBOVU1CRVIgPSAnMCcuY2hhckNvZGVBdCgwKVxuXHR2YXIgTE9XRVIgID0gJ2EnLmNoYXJDb2RlQXQoMClcblx0dmFyIFVQUEVSICA9ICdBJy5jaGFyQ29kZUF0KDApXG5cdHZhciBQTFVTX1VSTF9TQUZFID0gJy0nLmNoYXJDb2RlQXQoMClcblx0dmFyIFNMQVNIX1VSTF9TQUZFID0gJ18nLmNoYXJDb2RlQXQoMClcblxuXHRmdW5jdGlvbiBkZWNvZGUgKGVsdCkge1xuXHRcdHZhciBjb2RlID0gZWx0LmNoYXJDb2RlQXQoMClcblx0XHRpZiAoY29kZSA9PT0gUExVUyB8fFxuXHRcdCAgICBjb2RlID09PSBQTFVTX1VSTF9TQUZFKVxuXHRcdFx0cmV0dXJuIDYyIC8vICcrJ1xuXHRcdGlmIChjb2RlID09PSBTTEFTSCB8fFxuXHRcdCAgICBjb2RlID09PSBTTEFTSF9VUkxfU0FGRSlcblx0XHRcdHJldHVybiA2MyAvLyAnLydcblx0XHRpZiAoY29kZSA8IE5VTUJFUilcblx0XHRcdHJldHVybiAtMSAvL25vIG1hdGNoXG5cdFx0aWYgKGNvZGUgPCBOVU1CRVIgKyAxMClcblx0XHRcdHJldHVybiBjb2RlIC0gTlVNQkVSICsgMjYgKyAyNlxuXHRcdGlmIChjb2RlIDwgVVBQRVIgKyAyNilcblx0XHRcdHJldHVybiBjb2RlIC0gVVBQRVJcblx0XHRpZiAoY29kZSA8IExPV0VSICsgMjYpXG5cdFx0XHRyZXR1cm4gY29kZSAtIExPV0VSICsgMjZcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NFRvQnl0ZUFycmF5IChiNjQpIHtcblx0XHR2YXIgaSwgaiwgbCwgdG1wLCBwbGFjZUhvbGRlcnMsIGFyclxuXG5cdFx0aWYgKGI2NC5sZW5ndGggJSA0ID4gMCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0Jylcblx0XHR9XG5cblx0XHQvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKVxuXHRcdC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXRcblx0XHQvLyByZXByZXNlbnQgb25lIGJ5dGVcblx0XHQvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXNcblx0XHQvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlXG5cdFx0dmFyIGxlbiA9IGI2NC5sZW5ndGhcblx0XHRwbGFjZUhvbGRlcnMgPSAnPScgPT09IGI2NC5jaGFyQXQobGVuIC0gMikgPyAyIDogJz0nID09PSBiNjQuY2hhckF0KGxlbiAtIDEpID8gMSA6IDBcblxuXHRcdC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuXHRcdGFyciA9IG5ldyBBcnIoYjY0Lmxlbmd0aCAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKVxuXG5cdFx0Ly8gaWYgdGhlcmUgYXJlIHBsYWNlaG9sZGVycywgb25seSBnZXQgdXAgdG8gdGhlIGxhc3QgY29tcGxldGUgNCBjaGFyc1xuXHRcdGwgPSBwbGFjZUhvbGRlcnMgPiAwID8gYjY0Lmxlbmd0aCAtIDQgOiBiNjQubGVuZ3RoXG5cblx0XHR2YXIgTCA9IDBcblxuXHRcdGZ1bmN0aW9uIHB1c2ggKHYpIHtcblx0XHRcdGFycltMKytdID0gdlxuXHRcdH1cblxuXHRcdGZvciAoaSA9IDAsIGogPSAwOyBpIDwgbDsgaSArPSA0LCBqICs9IDMpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMTgpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPDwgMTIpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAyKSkgPDwgNikgfCBkZWNvZGUoYjY0LmNoYXJBdChpICsgMykpXG5cdFx0XHRwdXNoKCh0bXAgJiAweEZGMDAwMCkgPj4gMTYpXG5cdFx0XHRwdXNoKCh0bXAgJiAweEZGMDApID4+IDgpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fVxuXG5cdFx0aWYgKHBsYWNlSG9sZGVycyA9PT0gMikge1xuXHRcdFx0dG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAyKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpID4+IDQpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fSBlbHNlIGlmIChwbGFjZUhvbGRlcnMgPT09IDEpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMTApIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPDwgNCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDIpKSA+PiAyKVxuXHRcdFx0cHVzaCgodG1wID4+IDgpICYgMHhGRilcblx0XHRcdHB1c2godG1wICYgMHhGRilcblx0XHR9XG5cblx0XHRyZXR1cm4gYXJyXG5cdH1cblxuXHRmdW5jdGlvbiB1aW50OFRvQmFzZTY0ICh1aW50OCkge1xuXHRcdHZhciBpLFxuXHRcdFx0ZXh0cmFCeXRlcyA9IHVpbnQ4Lmxlbmd0aCAlIDMsIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG5cdFx0XHRvdXRwdXQgPSBcIlwiLFxuXHRcdFx0dGVtcCwgbGVuZ3RoXG5cblx0XHRmdW5jdGlvbiBlbmNvZGUgKG51bSkge1xuXHRcdFx0cmV0dXJuIGxvb2t1cC5jaGFyQXQobnVtKVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG5cdFx0XHRyZXR1cm4gZW5jb2RlKG51bSA+PiAxOCAmIDB4M0YpICsgZW5jb2RlKG51bSA+PiAxMiAmIDB4M0YpICsgZW5jb2RlKG51bSA+PiA2ICYgMHgzRikgKyBlbmNvZGUobnVtICYgMHgzRilcblx0XHR9XG5cblx0XHQvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG5cdFx0Zm9yIChpID0gMCwgbGVuZ3RoID0gdWludDgubGVuZ3RoIC0gZXh0cmFCeXRlczsgaSA8IGxlbmd0aDsgaSArPSAzKSB7XG5cdFx0XHR0ZW1wID0gKHVpbnQ4W2ldIDw8IDE2KSArICh1aW50OFtpICsgMV0gPDwgOCkgKyAodWludDhbaSArIDJdKVxuXHRcdFx0b3V0cHV0ICs9IHRyaXBsZXRUb0Jhc2U2NCh0ZW1wKVxuXHRcdH1cblxuXHRcdC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcblx0XHRzd2l0Y2ggKGV4dHJhQnl0ZXMpIHtcblx0XHRcdGNhc2UgMTpcblx0XHRcdFx0dGVtcCA9IHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDFdXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUodGVtcCA+PiAyKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wIDw8IDQpICYgMHgzRilcblx0XHRcdFx0b3V0cHV0ICs9ICc9PSdcblx0XHRcdFx0YnJlYWtcblx0XHRcdGNhc2UgMjpcblx0XHRcdFx0dGVtcCA9ICh1aW50OFt1aW50OC5sZW5ndGggLSAyXSA8PCA4KSArICh1aW50OFt1aW50OC5sZW5ndGggLSAxXSlcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSh0ZW1wID4+IDEwKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wID4+IDQpICYgMHgzRilcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSgodGVtcCA8PCAyKSAmIDB4M0YpXG5cdFx0XHRcdG91dHB1dCArPSAnPSdcblx0XHRcdFx0YnJlYWtcblx0XHR9XG5cblx0XHRyZXR1cm4gb3V0cHV0XG5cdH1cblxuXHRleHBvcnRzLnRvQnl0ZUFycmF5ID0gYjY0VG9CeXRlQXJyYXlcblx0ZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gdWludDhUb0Jhc2U2NFxufSh0eXBlb2YgZXhwb3J0cyA9PT0gJ3VuZGVmaW5lZCcgPyAodGhpcy5iYXNlNjRqcyA9IHt9KSA6IGV4cG9ydHMpKVxuIiwiLyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblxuJ3VzZSBzdHJpY3QnXG5cbnZhciBiYXNlNjQgPSByZXF1aXJlKCdiYXNlNjQtanMnKVxudmFyIGllZWU3NTQgPSByZXF1aXJlKCdpZWVlNzU0JylcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpXG5cbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5leHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcbkJ1ZmZlci5wb29sU2l6ZSA9IDgxOTIgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvblxuXG52YXIgcm9vdFBhcmVudCA9IHt9XG5cbi8qKlxuICogSWYgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYDpcbiAqICAgPT09IHRydWUgICAgVXNlIFVpbnQ4QXJyYXkgaW1wbGVtZW50YXRpb24gKGZhc3Rlc3QpXG4gKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpXG4gKlxuICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLFxuICogT3BlcmEgMTEuNissIGlPUyA0LjIrLlxuICpcbiAqIER1ZSB0byB2YXJpb3VzIGJyb3dzZXIgYnVncywgc29tZXRpbWVzIHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24gd2lsbCBiZSB1c2VkIGV2ZW5cbiAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLlxuICpcbiAqIE5vdGU6XG4gKlxuICogICAtIEZpcmVmb3ggNC0yOSBsYWNrcyBzdXBwb3J0IGZvciBhZGRpbmcgbmV3IHByb3BlcnRpZXMgdG8gYFVpbnQ4QXJyYXlgIGluc3RhbmNlcyxcbiAqICAgICBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOC5cbiAqXG4gKiAgIC0gU2FmYXJpIDUtNyBsYWNrcyBzdXBwb3J0IGZvciBjaGFuZ2luZyB0aGUgYE9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3JgIHByb3BlcnR5XG4gKiAgICAgb24gb2JqZWN0cy5cbiAqXG4gKiAgIC0gQ2hyb21lIDktMTAgaXMgbWlzc2luZyB0aGUgYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbi5cbiAqXG4gKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZlxuICogICAgIGluY29ycmVjdCBsZW5ndGggaW4gc29tZSBzaXR1YXRpb25zLlxuXG4gKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleVxuICogZ2V0IHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24sIHdoaWNoIGlzIHNsb3dlciBidXQgYmVoYXZlcyBjb3JyZWN0bHkuXG4gKi9cbkJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZFxuICA/IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gIDogdHlwZWRBcnJheVN1cHBvcnQoKVxuXG5mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCAoKSB7XG4gIGZ1bmN0aW9uIEJhciAoKSB7fVxuICB0cnkge1xuICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheSgxKVxuICAgIGFyci5mb28gPSBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9XG4gICAgYXJyLmNvbnN0cnVjdG9yID0gQmFyXG4gICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWRcbiAgICAgICAgYXJyLmNvbnN0cnVjdG9yID09PSBCYXIgJiYgLy8gY29uc3RydWN0b3IgY2FuIGJlIHNldFxuICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YFxuICAgICAgICBhcnIuc3ViYXJyYXkoMSwgMSkuYnl0ZUxlbmd0aCA9PT0gMCAvLyBpZTEwIGhhcyBicm9rZW4gYHN1YmFycmF5YFxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuZnVuY3Rpb24ga01heExlbmd0aCAoKSB7XG4gIHJldHVybiBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVFxuICAgID8gMHg3ZmZmZmZmZlxuICAgIDogMHgzZmZmZmZmZlxufVxuXG4vKipcbiAqIENsYXNzOiBCdWZmZXJcbiAqID09PT09PT09PT09PT1cbiAqXG4gKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGFyZSBhdWdtZW50ZWRcbiAqIHdpdGggZnVuY3Rpb24gcHJvcGVydGllcyBmb3IgYWxsIHRoZSBub2RlIGBCdWZmZXJgIEFQSSBmdW5jdGlvbnMuIFdlIHVzZVxuICogYFVpbnQ4QXJyYXlgIHNvIHRoYXQgc3F1YXJlIGJyYWNrZXQgbm90YXRpb24gd29ya3MgYXMgZXhwZWN0ZWQgLS0gaXQgcmV0dXJuc1xuICogYSBzaW5nbGUgb2N0ZXQuXG4gKlxuICogQnkgYXVnbWVudGluZyB0aGUgaW5zdGFuY2VzLCB3ZSBjYW4gYXZvaWQgbW9kaWZ5aW5nIHRoZSBgVWludDhBcnJheWBcbiAqIHByb3RvdHlwZS5cbiAqL1xuZnVuY3Rpb24gQnVmZmVyIChhcmcpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcbiAgICAvLyBBdm9pZCBnb2luZyB0aHJvdWdoIGFuIEFyZ3VtZW50c0FkYXB0b3JUcmFtcG9saW5lIGluIHRoZSBjb21tb24gY2FzZS5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHJldHVybiBuZXcgQnVmZmVyKGFyZywgYXJndW1lbnRzWzFdKVxuICAgIHJldHVybiBuZXcgQnVmZmVyKGFyZylcbiAgfVxuXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzLmxlbmd0aCA9IDBcbiAgICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZFxuICB9XG5cbiAgLy8gQ29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBmcm9tTnVtYmVyKHRoaXMsIGFyZylcbiAgfVxuXG4gIC8vIFNsaWdodGx5IGxlc3MgY29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmcm9tU3RyaW5nKHRoaXMsIGFyZywgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiAndXRmOCcpXG4gIH1cblxuICAvLyBVbnVzdWFsLlxuICByZXR1cm4gZnJvbU9iamVjdCh0aGlzLCBhcmcpXG59XG5cbmZ1bmN0aW9uIGZyb21OdW1iZXIgKHRoYXQsIGxlbmd0aCkge1xuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGxlbmd0aCkgfCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdGhhdFtpXSA9IDBcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbVN0cmluZyAodGhhdCwgc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgLy8gQXNzdW1wdGlvbjogYnl0ZUxlbmd0aCgpIHJldHVybiB2YWx1ZSBpcyBhbHdheXMgPCBrTWF4TGVuZ3RoLlxuICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblxuICB0aGF0LndyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iamVjdCkge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iamVjdCkpIHJldHVybiBmcm9tQnVmZmVyKHRoYXQsIG9iamVjdClcblxuICBpZiAoaXNBcnJheShvYmplY3QpKSByZXR1cm4gZnJvbUFycmF5KHRoYXQsIG9iamVjdClcblxuICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtdXN0IHN0YXJ0IHdpdGggbnVtYmVyLCBidWZmZXIsIGFycmF5IG9yIHN0cmluZycpXG4gIH1cblxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChvYmplY3QuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgIHJldHVybiBmcm9tVHlwZWRBcnJheSh0aGF0LCBvYmplY3QpXG4gICAgfVxuICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCBvYmplY3QpXG4gICAgfVxuICB9XG5cbiAgaWYgKG9iamVjdC5sZW5ndGgpIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iamVjdClcblxuICByZXR1cm4gZnJvbUpzb25PYmplY3QodGhhdCwgb2JqZWN0KVxufVxuXG5mdW5jdGlvbiBmcm9tQnVmZmVyICh0aGF0LCBidWZmZXIpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYnVmZmVyLmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIGJ1ZmZlci5jb3B5KHRoYXQsIDAsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5ICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLy8gRHVwbGljYXRlIG9mIGZyb21BcnJheSgpIHRvIGtlZXAgZnJvbUFycmF5KCkgbW9ub21vcnBoaWMuXG5mdW5jdGlvbiBmcm9tVHlwZWRBcnJheSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgLy8gVHJ1bmNhdGluZyB0aGUgZWxlbWVudHMgaXMgcHJvYmFibHkgbm90IHdoYXQgcGVvcGxlIGV4cGVjdCBmcm9tIHR5cGVkXG4gIC8vIGFycmF5cyB3aXRoIEJZVEVTX1BFUl9FTEVNRU5UID4gMSBidXQgaXQncyBjb21wYXRpYmxlIHdpdGggdGhlIGJlaGF2aW9yXG4gIC8vIG9mIHRoZSBvbGQgQnVmZmVyIGNvbnN0cnVjdG9yLlxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyICh0aGF0LCBhcnJheSkge1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICBhcnJheS5ieXRlTGVuZ3RoXG4gICAgdGhhdCA9IEJ1ZmZlci5fYXVnbWVudChuZXcgVWludDhBcnJheShhcnJheSkpXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQgPSBmcm9tVHlwZWRBcnJheSh0aGF0LCBuZXcgVWludDhBcnJheShhcnJheSkpXG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbi8vIERlc2VyaWFsaXplIHsgdHlwZTogJ0J1ZmZlcicsIGRhdGE6IFsxLDIsMywuLi5dIH0gaW50byBhIEJ1ZmZlciBvYmplY3QuXG4vLyBSZXR1cm5zIGEgemVyby1sZW5ndGggYnVmZmVyIGZvciBpbnB1dHMgdGhhdCBkb24ndCBjb25mb3JtIHRvIHRoZSBzcGVjLlxuZnVuY3Rpb24gZnJvbUpzb25PYmplY3QgKHRoYXQsIG9iamVjdCkge1xuICB2YXIgYXJyYXlcbiAgdmFyIGxlbmd0aCA9IDBcblxuICBpZiAob2JqZWN0LnR5cGUgPT09ICdCdWZmZXInICYmIGlzQXJyYXkob2JqZWN0LmRhdGEpKSB7XG4gICAgYXJyYXkgPSBvYmplY3QuZGF0YVxuICAgIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgfVxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5pZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxuICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxufSBlbHNlIHtcbiAgLy8gcHJlLXNldCBmb3IgdmFsdWVzIHRoYXQgbWF5IGV4aXN0IGluIHRoZSBmdXR1cmVcbiAgQnVmZmVyLnByb3RvdHlwZS5sZW5ndGggPSB1bmRlZmluZWRcbiAgQnVmZmVyLnByb3RvdHlwZS5wYXJlbnQgPSB1bmRlZmluZWRcbn1cblxuZnVuY3Rpb24gYWxsb2NhdGUgKHRoYXQsIGxlbmd0aCkge1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gQnVmZmVyLl9hdWdtZW50KG5ldyBVaW50OEFycmF5KGxlbmd0aCkpXG4gICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQubGVuZ3RoID0gbGVuZ3RoXG4gICAgdGhhdC5faXNCdWZmZXIgPSB0cnVlXG4gIH1cblxuICB2YXIgZnJvbVBvb2wgPSBsZW5ndGggIT09IDAgJiYgbGVuZ3RoIDw9IEJ1ZmZlci5wb29sU2l6ZSA+Pj4gMVxuICBpZiAoZnJvbVBvb2wpIHRoYXQucGFyZW50ID0gcm9vdFBhcmVudFxuXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkge1xuICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuXG4gIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKVxuICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBrTWF4TGVuZ3RoKCkudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG4gIH1cbiAgcmV0dXJuIGxlbmd0aCB8IDBcbn1cblxuZnVuY3Rpb24gU2xvd0J1ZmZlciAoc3ViamVjdCwgZW5jb2RpbmcpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNsb3dCdWZmZXIpKSByZXR1cm4gbmV3IFNsb3dCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcpXG5cbiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcpXG4gIGRlbGV0ZSBidWYucGFyZW50XG4gIHJldHVybiBidWZcbn1cblxuQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHtcbiAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcilcbn1cblxuQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChhID09PSBiKSByZXR1cm4gMFxuXG4gIHZhciB4ID0gYS5sZW5ndGhcbiAgdmFyIHkgPSBiLmxlbmd0aFxuXG4gIHZhciBpID0gMFxuICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkgYnJlYWtcblxuICAgICsraVxuICB9XG5cbiAgaWYgKGkgIT09IGxlbikge1xuICAgIHggPSBhW2ldXG4gICAgeSA9IGJbaV1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuQnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykge1xuICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6XG4gICAgY2FzZSAndXRmOCc6XG4gICAgY2FzZSAndXRmLTgnOlxuICAgIGNhc2UgJ2FzY2lpJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgY2FzZSAncmF3JzpcbiAgICBjYXNlICd1Y3MyJzpcbiAgICBjYXNlICd1Y3MtMic6XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgcmV0dXJuIHRydWVcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7XG4gIGlmICghaXNBcnJheShsaXN0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcignbGlzdCBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMuJylcblxuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcigwKVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGVuZ3RoID0gMFxuICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGhcbiAgICB9XG4gIH1cblxuICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihsZW5ndGgpXG4gIHZhciBwb3MgPSAwXG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldXG4gICAgaXRlbS5jb3B5KGJ1ZiwgcG9zKVxuICAgIHBvcyArPSBpdGVtLmxlbmd0aFxuICB9XG4gIHJldHVybiBidWZcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHN0cmluZyA9ICcnICsgc3RyaW5nXG5cbiAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAvLyBEZXByZWNhdGVkXG4gICAgICBjYXNlICdyYXcnOlxuICAgICAgY2FzZSAncmF3cyc6XG4gICAgICAgIHJldHVybiBsZW5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiBsZW4gKiAyXG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gbGVuID4+PiAxXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjhcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cbkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXG5mdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgc3RhcnQgPSBzdGFydCB8IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID09PSBJbmZpbml0eSA/IHRoaXMubGVuZ3RoIDogZW5kIHwgMFxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG4gIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmIChlbmQgPD0gc3RhcnQpIHJldHVybiAnJ1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGJpbmFyeVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwXG4gIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJ1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpXG4gIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG4gIHZhciBzdHIgPSAnJ1xuICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJylcbiAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG4gIH1cbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gMFxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYilcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0KSB7XG4gIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmZcbiAgZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDBcbiAgYnl0ZU9mZnNldCA+Pj0gMFxuXG4gIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG4gIGlmIChieXRlT2Zmc2V0ID49IHRoaXMubGVuZ3RoKSByZXR1cm4gLTFcblxuICAvLyBOZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoICsgYnl0ZU9mZnNldCwgMClcblxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xIC8vIHNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nIGFsd2F5cyBmYWlsc1xuICAgIHJldHVybiBTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLCB2YWwsIGJ5dGVPZmZzZXQpXG4gIH1cbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQpXG4gIH1cbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKHRoaXMsIFsgdmFsIF0sIGJ5dGVPZmZzZXQpXG4gIH1cblxuICBmdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0KSB7XG4gICAgdmFyIGZvdW5kSW5kZXggPSAtMVxuICAgIGZvciAodmFyIGkgPSAwOyBieXRlT2Zmc2V0ICsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGFycltieXRlT2Zmc2V0ICsgaV0gPT09IHZhbFtmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleF0pIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWwubGVuZ3RoKSByZXR1cm4gYnl0ZU9mZnNldCArIGZvdW5kSW5kZXhcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvdW5kSW5kZXggPSAtMVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTFcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbi8vIGBnZXRgIGlzIGRlcHJlY2F0ZWRcbkJ1ZmZlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0IChvZmZzZXQpIHtcbiAgY29uc29sZS5sb2coJy5nZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLicpXG4gIHJldHVybiB0aGlzLnJlYWRVSW50OChvZmZzZXQpXG59XG5cbi8vIGBzZXRgIGlzIGRlcHJlY2F0ZWRcbkJ1ZmZlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0ICh2LCBvZmZzZXQpIHtcbiAgY29uc29sZS5sb2coJy5zZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLicpXG4gIHJldHVybiB0aGlzLndyaXRlVUludDgodiwgb2Zmc2V0KVxufVxuXG5mdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcbiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgfSBlbHNlIHtcbiAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcbiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICAgIH1cbiAgfVxuXG4gIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG4gIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChzdHJMZW4gJSAyICE9PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG5cbiAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHtcbiAgICBsZW5ndGggPSBzdHJMZW4gLyAyXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpXG4gICAgaWYgKGlzTmFOKHBhcnNlZCkpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWRcbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJpbmFyeVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gdWNzMldyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykge1xuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKVxuICBpZiAob2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZylcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIG9mZnNldFssIGxlbmd0aF1bLCBlbmNvZGluZ10pXG4gIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkge1xuICAgIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgICBpZiAoaXNGaW5pdGUobGVuZ3RoKSkge1xuICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMFxuICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgfSBlbHNlIHtcbiAgICAgIGVuY29kaW5nID0gbGVuZ3RoXG4gICAgICBsZW5ndGggPSB1bmRlZmluZWRcbiAgICB9XG4gIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTNcbiAgfSBlbHNlIHtcbiAgICB2YXIgc3dhcCA9IGVuY29kaW5nXG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBvZmZzZXQgPSBsZW5ndGggfCAwXG4gICAgbGVuZ3RoID0gc3dhcFxuICB9XG5cbiAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCB8fCBsZW5ndGggPiByZW1haW5pbmcpIGxlbmd0aCA9IHJlbWFpbmluZ1xuXG4gIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBiaW5hcnlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdCdWZmZXInLFxuICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG4gIHZhciByZXMgPSBbXVxuXG4gIHZhciBpID0gc3RhcnRcbiAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldXG4gICAgdmFyIGNvZGVQb2ludCA9IG51bGxcbiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gM1xuICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG4gICAgICA6IDFcblxuICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcbiAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnRcblxuICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkge1xuICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3Rikge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcbiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcbiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRFxuICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikge1xuICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSlcbiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG4gICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApXG4gICAgICBjb2RlUG9pbnQgPSAweERDMDAgfCBjb2RlUG9pbnQgJiAweDNGRlxuICAgIH1cblxuICAgIHJlcy5wdXNoKGNvZGVQb2ludClcbiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2VcbiAgfVxuXG4gIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxufVxuXG4vLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcbi8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy5cbi8vIFdlIGdvIDEgbWFnbml0dWRlIGxlc3MsIGZvciBzYWZldHlcbnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXG5mdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHtcbiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgdmFyIHJlcyA9ICcnXG4gIHZhciBpID0gMFxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgU3RyaW5nLFxuICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuICAgIClcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RilcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGJpbmFyeVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGhcblxuICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW5cblxuICB2YXIgb3V0ID0gJydcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuICB9XG4gIHJldHVybiBvdXRcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIHZhciByZXMgPSAnJ1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIHN0YXJ0ID0gfn5zdGFydFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ICs9IGxlblxuICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG4gICAgc3RhcnQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCAwKSB7XG4gICAgZW5kICs9IGxlblxuICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwXG4gIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7XG4gICAgZW5kID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgdmFyIG5ld0J1ZlxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBuZXdCdWYgPSBCdWZmZXIuX2F1Z21lbnQodGhpcy5zdWJhcnJheShzdGFydCwgZW5kKSlcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZClcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyBpKyspIHtcbiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfVxuXG4gIGlmIChuZXdCdWYubGVuZ3RoKSBuZXdCdWYucGFyZW50ID0gdGhpcy5wYXJlbnQgfHwgdGhpc1xuXG4gIHJldHVybiBuZXdCdWZcbn1cblxuLypcbiAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuICovXG5mdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG4gIH1cblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG4gIHZhciBtdWwgPSAxXG4gIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG4gICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgIHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoXG4gIHZhciBtdWwgPSAxXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pXG4gIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignYnVmZmVyIG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCd2YWx1ZSBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSwgMClcblxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSwgMClcblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MTYgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyBpKyspIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgJiAoMHhmZiA8PCAoOCAqIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpKSkpID4+PlxuICAgICAgKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkgKiA4XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MzIgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDQpOyBpIDwgajsgaSsrKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlID4+PiAobGl0dGxlRW5kaWFuID8gaSA6IDMgLSBpKSAqIDgpICYgMHhmZlxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IDBcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IHZhbHVlIDwgMCA/IDEgOiAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gdmFsdWUgPCAwID8gMSA6IDBcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbiAgaWYgKG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5mdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpXG4gIHJldHVybiBvZmZzZXQgKyA4XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkge1xuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoXG4gIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMFxuICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcbiAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwXG4gIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnNcbiAgaWYgKHRhcmdldFN0YXJ0IDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgfVxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIC8vIEFyZSB3ZSBvb2I/XG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG4gICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnRcbiAgfVxuXG4gIHZhciBsZW4gPSBlbmQgLSBzdGFydFxuICB2YXIgaVxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQgJiYgc3RhcnQgPCB0YXJnZXRTdGFydCAmJiB0YXJnZXRTdGFydCA8IGVuZCkge1xuICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZFxuICAgIGZvciAoaSA9IGxlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnRcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRhcmdldC5fc2V0KHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSwgdGFyZ2V0U3RhcnQpXG4gIH1cblxuICByZXR1cm4gbGVuXG59XG5cbi8vIGZpbGwodmFsdWUsIHN0YXJ0PTAsIGVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsdWUsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCF2YWx1ZSkgdmFsdWUgPSAwXG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCkgZW5kID0gdGhpcy5sZW5ndGhcblxuICBpZiAoZW5kIDwgc3RhcnQpIHRocm93IG5ldyBSYW5nZUVycm9yKCdlbmQgPCBzdGFydCcpXG5cbiAgLy8gRmlsbCAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm5cbiAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm5cblxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIHZhciBpXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgdGhpc1tpXSA9IHZhbHVlXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBieXRlcyA9IHV0ZjhUb0J5dGVzKHZhbHVlLnRvU3RyaW5nKCkpXG4gICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aFxuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHRoaXNbaV0gPSBieXRlc1tpICUgbGVuXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgQXJyYXlCdWZmZXJgIHdpdGggdGhlICpjb3BpZWQqIG1lbW9yeSBvZiB0aGUgYnVmZmVyIGluc3RhbmNlLlxuICogQWRkZWQgaW4gTm9kZSAwLjEyLiBPbmx5IGF2YWlsYWJsZSBpbiBicm93c2VycyB0aGF0IHN1cHBvcnQgQXJyYXlCdWZmZXIuXG4gKi9cbkJ1ZmZlci5wcm90b3R5cGUudG9BcnJheUJ1ZmZlciA9IGZ1bmN0aW9uIHRvQXJyYXlCdWZmZXIgKCkge1xuICBpZiAodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgICByZXR1cm4gKG5ldyBCdWZmZXIodGhpcykpLmJ1ZmZlclxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYnVmID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5sZW5ndGgpXG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYnVmLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICAgIGJ1ZltpXSA9IHRoaXNbaV1cbiAgICAgIH1cbiAgICAgIHJldHVybiBidWYuYnVmZmVyXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0J1ZmZlci50b0FycmF5QnVmZmVyIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyJylcbiAgfVxufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbnZhciBCUCA9IEJ1ZmZlci5wcm90b3R5cGVcblxuLyoqXG4gKiBBdWdtZW50IGEgVWludDhBcnJheSAqaW5zdGFuY2UqIChub3QgdGhlIFVpbnQ4QXJyYXkgY2xhc3MhKSB3aXRoIEJ1ZmZlciBtZXRob2RzXG4gKi9cbkJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIF9hdWdtZW50IChhcnIpIHtcbiAgYXJyLmNvbnN0cnVjdG9yID0gQnVmZmVyXG4gIGFyci5faXNCdWZmZXIgPSB0cnVlXG5cbiAgLy8gc2F2ZSByZWZlcmVuY2UgdG8gb3JpZ2luYWwgVWludDhBcnJheSBzZXQgbWV0aG9kIGJlZm9yZSBvdmVyd3JpdGluZ1xuICBhcnIuX3NldCA9IGFyci5zZXRcblxuICAvLyBkZXByZWNhdGVkXG4gIGFyci5nZXQgPSBCUC5nZXRcbiAgYXJyLnNldCA9IEJQLnNldFxuXG4gIGFyci53cml0ZSA9IEJQLndyaXRlXG4gIGFyci50b1N0cmluZyA9IEJQLnRvU3RyaW5nXG4gIGFyci50b0xvY2FsZVN0cmluZyA9IEJQLnRvU3RyaW5nXG4gIGFyci50b0pTT04gPSBCUC50b0pTT05cbiAgYXJyLmVxdWFscyA9IEJQLmVxdWFsc1xuICBhcnIuY29tcGFyZSA9IEJQLmNvbXBhcmVcbiAgYXJyLmluZGV4T2YgPSBCUC5pbmRleE9mXG4gIGFyci5jb3B5ID0gQlAuY29weVxuICBhcnIuc2xpY2UgPSBCUC5zbGljZVxuICBhcnIucmVhZFVJbnRMRSA9IEJQLnJlYWRVSW50TEVcbiAgYXJyLnJlYWRVSW50QkUgPSBCUC5yZWFkVUludEJFXG4gIGFyci5yZWFkVUludDggPSBCUC5yZWFkVUludDhcbiAgYXJyLnJlYWRVSW50MTZMRSA9IEJQLnJlYWRVSW50MTZMRVxuICBhcnIucmVhZFVJbnQxNkJFID0gQlAucmVhZFVJbnQxNkJFXG4gIGFyci5yZWFkVUludDMyTEUgPSBCUC5yZWFkVUludDMyTEVcbiAgYXJyLnJlYWRVSW50MzJCRSA9IEJQLnJlYWRVSW50MzJCRVxuICBhcnIucmVhZEludExFID0gQlAucmVhZEludExFXG4gIGFyci5yZWFkSW50QkUgPSBCUC5yZWFkSW50QkVcbiAgYXJyLnJlYWRJbnQ4ID0gQlAucmVhZEludDhcbiAgYXJyLnJlYWRJbnQxNkxFID0gQlAucmVhZEludDE2TEVcbiAgYXJyLnJlYWRJbnQxNkJFID0gQlAucmVhZEludDE2QkVcbiAgYXJyLnJlYWRJbnQzMkxFID0gQlAucmVhZEludDMyTEVcbiAgYXJyLnJlYWRJbnQzMkJFID0gQlAucmVhZEludDMyQkVcbiAgYXJyLnJlYWRGbG9hdExFID0gQlAucmVhZEZsb2F0TEVcbiAgYXJyLnJlYWRGbG9hdEJFID0gQlAucmVhZEZsb2F0QkVcbiAgYXJyLnJlYWREb3VibGVMRSA9IEJQLnJlYWREb3VibGVMRVxuICBhcnIucmVhZERvdWJsZUJFID0gQlAucmVhZERvdWJsZUJFXG4gIGFyci53cml0ZVVJbnQ4ID0gQlAud3JpdGVVSW50OFxuICBhcnIud3JpdGVVSW50TEUgPSBCUC53cml0ZVVJbnRMRVxuICBhcnIud3JpdGVVSW50QkUgPSBCUC53cml0ZVVJbnRCRVxuICBhcnIud3JpdGVVSW50MTZMRSA9IEJQLndyaXRlVUludDE2TEVcbiAgYXJyLndyaXRlVUludDE2QkUgPSBCUC53cml0ZVVJbnQxNkJFXG4gIGFyci53cml0ZVVJbnQzMkxFID0gQlAud3JpdGVVSW50MzJMRVxuICBhcnIud3JpdGVVSW50MzJCRSA9IEJQLndyaXRlVUludDMyQkVcbiAgYXJyLndyaXRlSW50TEUgPSBCUC53cml0ZUludExFXG4gIGFyci53cml0ZUludEJFID0gQlAud3JpdGVJbnRCRVxuICBhcnIud3JpdGVJbnQ4ID0gQlAud3JpdGVJbnQ4XG4gIGFyci53cml0ZUludDE2TEUgPSBCUC53cml0ZUludDE2TEVcbiAgYXJyLndyaXRlSW50MTZCRSA9IEJQLndyaXRlSW50MTZCRVxuICBhcnIud3JpdGVJbnQzMkxFID0gQlAud3JpdGVJbnQzMkxFXG4gIGFyci53cml0ZUludDMyQkUgPSBCUC53cml0ZUludDMyQkVcbiAgYXJyLndyaXRlRmxvYXRMRSA9IEJQLndyaXRlRmxvYXRMRVxuICBhcnIud3JpdGVGbG9hdEJFID0gQlAud3JpdGVGbG9hdEJFXG4gIGFyci53cml0ZURvdWJsZUxFID0gQlAud3JpdGVEb3VibGVMRVxuICBhcnIud3JpdGVEb3VibGVCRSA9IEJQLndyaXRlRG91YmxlQkVcbiAgYXJyLmZpbGwgPSBCUC5maWxsXG4gIGFyci5pbnNwZWN0ID0gQlAuaW5zcGVjdFxuICBhcnIudG9BcnJheUJ1ZmZlciA9IEJQLnRvQXJyYXlCdWZmZXJcblxuICByZXR1cm4gYXJyXG59XG5cbnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7XG4gIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5XG4gIHZhciBjb2RlUG9pbnRcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHZhciBieXRlcyA9IFtdXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXG5cbiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG4gICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcbiAgICAgICAgLy8gbm8gbGVhZCB5ZXRcbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcbiAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHtcbiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcbiAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcbiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgIH1cblxuICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cbiAgICAvLyBlbmNvZGUgdXRmOFxuICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG9cbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuIiwiLyoqXG4gKiBXcmFwcGVycyBhcm91bmQgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHRvIGZhY2lsaXRhdGUgdGVzdGluZyBhbmQgY2xpY2stdHJhY2tpbmcuXG4gKlxuICogVGhpcyBhZGRzIHRoZSBjb25jZXB0IG9mIGEgXCJkYXRhIHN0YWNrXCIgdG8gdGhlIGNhbnZhcy4gV2hlbiBzaGFwZXMgYXJlXG4gKiBkcmF3biwgdGhleSByZXByZXNlbnQgdGhlIG9iamVjdHMgY3VycmVudGx5IG9uIHRoZSBzdGFjay4gVGhpcyBzdGFjayBjYW4gYmVcbiAqIG1hbmlwdWxhdGVkIHVzaW5nIGNvbnRleHQucHVzaE9iamVjdCgpIGFuZCBjb250ZXh0LnBvcE9iamVjdCgpLlxuICpcbiAqIFNlZSB0ZXN0IGZpbGUgZm9yIHNhbXBsZSB1c2FnZS5cbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cbid1c2Ugc3RyaWN0JztcblxuLy8gVHVybiBvYmogaW50byBhIHByb3h5IGZvciB0YXJnZXQuIFRoaXMgZm9yd2FyZHMgYm90aCBmdW5jdGlvbiBjYWxscyBhbmRcbi8vIHByb3BlcnR5IHNldHRlcnMvZ2V0dGVycy5cbmZ1bmN0aW9uIGZvcndhcmQob2JqLCB0YXJnZXQsIG9ubHlBY2Nlc3NvcnMpIHtcbiAgb25seUFjY2Vzc29ycyA9IG9ubHlBY2Nlc3NvcnMgfHwgZmFsc2U7XG4gIGZvciAodmFyIGsgaW4gdGFyZ2V0KSB7XG4gICAgKGZ1bmN0aW9uKGspIHtcbiAgICAgIGlmICh0eXBlb2YodGFyZ2V0W2tdKSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGlmICghb25seUFjY2Vzc29ycykge1xuICAgICAgICAgIG9ialtrXSA9ICB0YXJnZXRba10uYmluZCh0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRhcmdldFtrXTsgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHgpIHsgdGFyZ2V0W2tdID0geDsgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KShrKTtcbiAgfVxufVxuXG4vLyBUaGUgbW9zdCBiYXNpYyBkYXRhLWF3YXJlIGNhbnZhcy4gVGhpcyB0aHJvd3MgYXdheSBhbGwgZGF0YSBpbmZvcm1hdGlvbi5cbi8vIFVzZSB0aGlzIGZvciBiYXNpYyBkcmF3aW5nXG5mdW5jdGlvbiBEYXRhQ29udGV4dChjdHgpIHtcbiAgZm9yd2FyZCh0aGlzLCBjdHgpO1xuICB0aGlzLnB1c2hPYmplY3QgPSB0aGlzLnBvcE9iamVjdCA9IHRoaXMucmVzZXQgPSBmdW5jdGlvbigpIHt9O1xufVxuXG52YXIgc3R1YkdldERhdGFDb250ZXh0ID0gbnVsbDtcblxuLyoqXG4gKiBHZXQgYSBEYXRhQ29udGV4dCBmb3IgdGhlIGJ1aWx0LWluIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5cbiAqXG4gKiBUaGlzIGNhY2hlcyBEYXRhQ29udGV4dHMgYW5kIGZhY2lsaXRhdGVzIHN0dWJiaW5nIGluIHRlc3RzLlxuICpcbiAqIEFzIGEgY29udmVuaWVuY2UsIHlvdSBtYXkgcGFzcyBpbiBhIENhbnZhcyBlbGVtZW50IGluc3RlYWQgb2YgYVxuICogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELiBkYXRhLWNhbnZhcyB3aWxsIGNhbGwgZ2V0Q29udGV4dCgnMmQnKSBmb3IgeW91LlxuICovXG5mdW5jdGlvbiBnZXREYXRhQ29udGV4dChjdHhPckNhbnZhcykge1xuICBpZiAoY3R4T3JDYW52YXMgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgIHJldHVybiBnZXREYXRhQ29udGV4dChjdHhPckNhbnZhcy5nZXRDb250ZXh0KCcyZCcpKTtcbiAgfVxuXG4gIHZhciBjdHggPSBjdHhPckNhbnZhcztcbiAgaWYgKHN0dWJHZXREYXRhQ29udGV4dCkge1xuICAgIHJldHVybiBzdHViR2V0RGF0YUNvbnRleHQoY3R4KTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdldERhdGFDb250ZXh0LmNhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcGFpciA9IGdldERhdGFDb250ZXh0LmNhY2hlW2ldO1xuICAgICAgaWYgKHBhaXJbMF0gPT0gY3R4KSByZXR1cm4gcGFpclsxXTtcbiAgICB9XG4gICAgdmFyIGR0eCA9IG5ldyBEYXRhQ29udGV4dChjdHgpO1xuICAgIGdldERhdGFDb250ZXh0LmNhY2hlLnB1c2goW2N0eCwgZHR4XSk7XG4gICAgcmV0dXJuIGR0eDtcbiAgfVxufVxuZ2V0RGF0YUNvbnRleHQuY2FjaGUgPSBbXTsgIC8vIChDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIERhdGFDb250ZXh0KSBwYWlyc1xuXG5cbi8qKlxuICogQSBjb250ZXh0IHdoaWNoIHJlY29yZHMgd2hhdCBpdCBkb2VzIChmb3IgdGVzdGluZykuXG4gKlxuICogVGhpcyBwcm94aWVzIGFsbCBjYWxscyB0byB0aGUgdW5kZXJseWluZyBjYW52YXMsIHNvIHRoZXkgZG8gcHJvZHVjZSB2aXNpYmxlXG4gKiBkcmF3aW5nLiBVc2UgYGRyYXduT2JqZWN0c1dpdGhgIG9yIGBjYWxsc2AgdG8gdGVzdCB3aGF0IHdhcyBkcmF3bi5cbiAqL1xuZnVuY3Rpb24gUmVjb3JkaW5nQ29udGV4dChjdHgpIHtcbiAgZm9yd2FyZCh0aGlzLCBjdHgsIHRydWUgLyogb25seSBmb3dhcmQgYWNjZXNzb3JzICovKTtcblxuICB2YXIgY2FsbHMgPSBbXTtcbiAgdGhpcy5jYWxscyA9IGNhbGxzO1xuXG4gIGZvciAodmFyIGsgaW4gY3R4KSB7XG4gICAgKGZ1bmN0aW9uKGspIHtcbiAgICAgIGlmICh0eXBlb2YoY3R4W2tdKSAhPSAnZnVuY3Rpb24nKSByZXR1cm47XG4gICAgICB0aGlzW2tdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFRPRE86IHJlY29yZCBjdXJyZW50IGRyYXdpbmcgc3R5bGVcbiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICBjYWxscy5wdXNoKFtrXS5jb25jYXQoYXJncykpO1xuICAgICAgICByZXR1cm4gY3R4W2tdLmFwcGx5KGN0eCwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSkuYmluZCh0aGlzKShrKTtcbiAgfVxuXG4gIHRoaXMucHVzaE9iamVjdCA9IGZ1bmN0aW9uKG8pIHtcbiAgICBjYWxscy5wdXNoKFsncHVzaE9iamVjdCcsIG9dKTtcbiAgfTtcbiAgXG4gIHRoaXMucG9wT2JqZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgY2FsbHMucHVzaChbJ3BvcE9iamVjdCddKTtcbiAgfTtcblxuICB0aGlzLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jYWxscyA9IGNhbGxzID0gW107XG4gIH07XG5cbiAgdmFyIHJlY29yZGluZ0RyYXdJbWFnZSA9IHRoaXMuZHJhd0ltYWdlOyAgLy8gcGxhaW4gcmVjb3JkaW5nIGRyYXdJbWFnZSgpXG4gIHRoaXMuZHJhd0ltYWdlID0gZnVuY3Rpb24oaW1hZ2UpIHtcbiAgICAvLyBJZiB0aGUgZHJhd24gaW1hZ2UgaGFzIHJlY29yZGVkIGNhbGxzLCB0aGVuIHRoZXkgbmVlZCB0byBiZSB0cmFuc2ZlcnJlZCBvdmVyLlxuICAgIHZhciByZWNvcmRlciA9IFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJGb3JDYW52YXMoaW1hZ2UpO1xuICAgIGlmICghcmVjb3JkZXIpIHtcbiAgICAgIHJlY29yZGluZ0RyYXdJbWFnZS5hcHBseShjdHgsIGFyZ3VtZW50cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0eC5kcmF3SW1hZ2UuYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xuICAgICAgY2FsbHMgPSBjYWxscy5jb25jYXQodHJhbnNmb3JtZWRDYWxscyhyZWNvcmRlci5jYWxscywgYXJndW1lbnRzKSk7XG4gICAgICB0aGlzLmNhbGxzID0gY2FsbHM7XG4gICAgfVxuICB9XG59XG5cbi8vIFRyYW5zZm9ybSB0aGUgY2FsbHMgdG8gYSBuZXcgY29vcmRpbmF0ZSBzeXN0ZW0uXG4vLyBUaGUgYXJndW1lbnRzIGFyZSB0aG9zZSB0byBkcmF3SW1hZ2UoKS5cbmZ1bmN0aW9uIHRyYW5zZm9ybWVkQ2FsbHMoY2FsbHMsIGFyZ3MpIHtcbiAgdmFyIGltYWdlID0gYXJnc1swXSxcbiAgICAgIHN4ID0gMCxcbiAgICAgIHN5ID0gMCxcbiAgICAgIHNXaWR0aCA9IGltYWdlLndpZHRoLFxuICAgICAgc0hlaWdodCA9IGltYWdlLmhlaWdodCxcbiAgICAgIGR4LFxuICAgICAgZHksXG4gICAgICBkV2lkdGggPSBpbWFnZS53aWR0aCxcbiAgICAgIGRIZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG5cbiAgaWYgKGFyZ3MubGVuZ3RoID09IDMpIHtcbiAgICAvLyB2b2lkIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIGR4LCBkeSk7XG4gICAgZHggPSBhcmdzWzFdO1xuICAgIGR5ID0gYXJnc1syXTtcbiAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PSA1KSB7XG4gICAgLy8gdm9pZCBjdHguZHJhd0ltYWdlKGltYWdlLCBkeCwgZHksIGRXaWR0aCwgZEhlaWdodCk7XG4gICAgZHggPSBhcmdzWzFdO1xuICAgIGR5ID0gYXJnc1syXTtcbiAgICBkV2lkdGggPSBhcmdzWzNdO1xuICAgIGRIZWlnaHQgPSBhcmdzWzRdO1xuICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09IDkpIHtcbiAgICAvLyB2b2lkIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIHN4LCBzeSwgc1dpZHRoLCBzSGVpZ2h0LCBkeCwgZHksIGRXaWR0aCwgZEhlaWdodCk7XG4gICAgc3ggPSBhcmdzWzFdO1xuICAgIHN5ID0gYXJnc1syXTtcbiAgICBzV2lkdGggPSBhcmdzWzNdO1xuICAgIHNIZWlnaHQgPSBhcmdzWzRdO1xuICAgIGR4ID0gYXJnc1s1XTtcbiAgICBkeSA9IGFyZ3NbNl07XG4gICAgZFdpZHRoID0gYXJnc1s3XTtcbiAgICBkSGVpZ2h0ID0gYXJnc1s4XTtcbiAgfVxuICAvLyBPdGhlciBhcml0aWVzIHdpbGwgbWFrZSB0aGUgYnJvd3NlciB0aHJvdyBhbiBlcnJvciBvbiBjdHguZHJhd0ltYWdlLmFwcGx5XG5cbiAgdmFyIHhTY2FsaW5nID0gZ2V0U2NhbGVGYWN0b3Ioc3gsIHN4ICsgc1dpZHRoLCBkeCwgZHggKyBkV2lkdGgpLFxuICAgICAgeFNjYWxlICAgPSBtYWtlU2NhbGUoIHN4LCBzeCArIHNXaWR0aCwgZHgsIGR4ICsgZFdpZHRoKSxcbiAgICAgIHlTY2FsaW5nID0gZ2V0U2NhbGVGYWN0b3Ioc3ksIHN5ICsgc0hlaWdodCwgZHksIGR5ICsgZEhlaWdodCksXG4gICAgICB5U2NhbGUgICA9IG1ha2VTY2FsZSggc3ksIHN5ICsgc0hlaWdodCwgZHksIGR5ICsgZEhlaWdodCk7XG5cbiAgLy8gVGhlc2UgY2FsbHMgYXJlIG1vcmUgY29tcGxleDpcbiAgLy8gYXJjXG4gIC8vIGFyY1RvXG4gIC8vIGVsbGlwc2VcblxuICAvLyBUT0RPOiBjbGlwIGNhbGxzIG91dHNpZGUgb2YgdGhlIHNvdXJjZSByZWN0YW5nbGUuXG4gIHZhciB0cmFuc2Zvcm1DYWxsID0gZnVuY3Rpb24ob3JpZ2luYWxDYWxsKSB7XG4gICAgdmFyIGNhbGwgPSBvcmlnaW5hbENhbGwuc2xpY2UoKSwgIC8vIG1ha2UgYSBjb3B5XG4gICAgICAgIHR5cGUgPSBjYWxsWzBdO1xuICAgIGlmICh0eXBlIGluIENBTExTX1hZKSB7XG4gICAgICB2YXIgeHlzID0gQ0FMTFNfWFlbdHlwZV07XG4gICAgICBpZiAodHlwZW9mKHh5cykgPT0gJ251bWJlcicpIHh5cyA9IFt4eXNdO1xuICAgICAgeHlzLmZvckVhY2goZnVuY3Rpb24ocG9zKSB7XG4gICAgICAgIGNhbGxbMSArIHBvc10gPSB4U2NhbGUoY2FsbFsxICsgcG9zXSk7XG4gICAgICAgIGNhbGxbMiArIHBvc10gPSB5U2NhbGUoY2FsbFsyICsgcG9zXSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHR5cGUgaW4gQ0FMTFNfV0gpIHtcbiAgICAgIHZhciB3aHMgPSBDQUxMU19XSFt0eXBlXTtcbiAgICAgIGlmICh0eXBlb2Yod2hzKSA9PSAnbnVtYmVyJykgd2hzID0gW3doc107XG4gICAgICB3aHMuZm9yRWFjaChmdW5jdGlvbihwb3MpIHtcbiAgICAgICAgY2FsbFsxICsgcG9zXSAqPSB4U2NhbGluZztcbiAgICAgICAgY2FsbFsyICsgcG9zXSAqPSB5U2NhbGluZztcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY2FsbDtcbiAgfTtcblxuICByZXR1cm4gY2FsbHMubWFwKHRyYW5zZm9ybUNhbGwpO1xufVxuXG4vLyBIZWxwZXJzIGZvciB0cmFuc2Zvcm1lZENhbGxzXG5cbi8vIE1hcCAoeDEsIHgyKSAtLT4gKHkxLCB5MilcbmZ1bmN0aW9uIGdldFNjYWxlRmFjdG9yKHgxLCB4MiwgeTEsIHkyKSB7XG4gIHJldHVybiAoeTIgLSB5MSkgLyAoeDIgLSB4MSk7XG59O1xuZnVuY3Rpb24gbWFrZVNjYWxlKHgxLCB4MiwgeTEsIHkyKSB7XG4gIHZhciBzY2FsZSA9IGdldFNjYWxlRmFjdG9yKHgxLCB4MiwgeTEsIHkyKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4geTEgKyBzY2FsZSAqICh4IC0geDEpO1xuICB9O1xufTtcblxuLy8gVGhlc2UgY2FsbHMgYWxsIGhhdmUgKHgsIHkpIGFzIGFyZ3MgYXQgdGhlIHNwZWNpZmllZCBwb3NpdGlvbnMuXG52YXIgQ0FMTFNfWFkgPSB7XG4gIGNsZWFyUmVjdDogMCxcbiAgZmlsbFJlY3Q6IDAsXG4gIHN0cm9rZVJlY3Q6IDAsXG4gIGZpbGxUZXh0OiAxLFxuICBzdHJva2VUZXh0OiAxLFxuICBtb3ZlVG86IDAsXG4gIGxpbmVUbzogMCxcbiAgYmV6aWVyQ3VydmVUbzogWzAsIDIsIDRdLFxuICBxdWFkcmF0aWNDdXJ2ZVRvOiBbMCwgMl0sXG4gIHJlY3Q6IDBcbn07XG4vLyBUaGVzZSBjYWxscyBoYXZlICh3aWR0aCwgaGVpZ2h0KSBhcyBhcmdzIGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb25zLlxudmFyIENBTExTX1dIID0ge1xuICBjbGVhclJlY3Q6IDIsXG4gIGZpbGxSZWN0OiAyLFxuICBzdHJva2VSZWN0OiAyLFxuICAvLyBmaWxsVGV4dCBoYXMgYW4gb3B0aW9uYWwgYG1heF93aWR0aGAgcGFyYW1cbiAgcmVjdDogMixcbn07XG5cbi8qKlxuICogR2V0IGEgbGlzdCBvZiBvYmplY3RzIHdoaWNoIGhhdmUgYmVlbiBwdXNoZWQgdG8gdGhlIGRhdGEgY2FudmFzIHRoYXQgbWF0Y2hcbiAqIHRoZSBwYXJ0aWN1bGFyIHByZWRpY2F0ZS5cbiAqIElmIG5vIHByZWRpY2F0ZSBpcyBzcGVjaWZpZWQsIGFsbCBvYmplY3RzIGFyZSByZXR1cm5lZC5cbiAqL1xuUmVjb3JkaW5nQ29udGV4dC5wcm90b3R5cGUuZHJhd25PYmplY3RzV2l0aCA9IGZ1bmN0aW9uKHByZWRpY2F0ZSkge1xuICBpZiAoIXByZWRpY2F0ZSkgcHJlZGljYXRlID0gZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9O1xuICByZXR1cm4gdGhpcy5jYWxsc09mKCdwdXNoT2JqZWN0JylcbiAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHByZWRpY2F0ZSh4WzFdKSB9KVxuICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oeCkgeyByZXR1cm4geFsxXTsgfSk7XG59O1xuLy8gVGhpcyB2ZXJzaW9uIHJlYWRzIGJldHRlciBpZiB0aGVyZSdzIG5vIHByZWRpY2F0ZS5cblJlY29yZGluZ0NvbnRleHQucHJvdG90eXBlLmRyYXduT2JqZWN0cyA9IFJlY29yZGluZ0NvbnRleHQucHJvdG90eXBlLmRyYXduT2JqZWN0c1dpdGg7XG5cbi8qKlxuICogRmluZCBjYWxscyBvZiBhIHBhcnRpY3VsYXIgdHlwZSwgZS5nLiBgZmlsbFRleHRgIG9yIGBwdXNoT2JqZWN0YC5cbiAqXG4gKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBjYWxscyBhbmQgdGhlaXIgcGFyYW1ldGVycywgZS5nLlxuICogWyBbJ2ZpbGxUZXh0JywgJ0hlbGxvIScsIDIwLCAxMF0gXVxuICovXG5SZWNvcmRpbmdDb250ZXh0LnByb3RvdHlwZS5jYWxsc09mID0gZnVuY3Rpb24odHlwZSkge1xuICByZXR1cm4gdGhpcy5jYWxscy5maWx0ZXIoZnVuY3Rpb24oY2FsbCkgeyByZXR1cm4gY2FsbFswXSA9PSB0eXBlIH0pO1xufTtcblxuLyoqXG4gKiBTdGF0aWMgbWV0aG9kIHRvIGJlZ2luIHN3YXBwaW5nIGluIFJlY29yZGluZ0NvbnRleHQgaW4gcGxhY2Ugb2YgRGF0YUNvbnRleHQuXG4gKiBEb24ndCBmb3JnZXQgdG8gY2FsbCBSZWNvcmRpbmdDb250ZXh0LnJlc2V0KCkgYWZ0ZXIgdGhlIHRlc3QgY29tcGxldGVzIVxuICovXG5SZWNvcmRpbmdDb250ZXh0LnJlY29yZEFsbCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoc3R1YkdldERhdGFDb250ZXh0ICE9IG51bGwpIHtcbiAgICB0aHJvdyAnWW91IGZvcmdvdCB0byBjYWxsIFJlY29yZGluZ0NvbnRleHQucmVzZXQoKSc7XG4gIH1cbiAgUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlcnMgPSBbXTtcbiAgc3R1YkdldERhdGFDb250ZXh0ID0gZnVuY3Rpb24oY3R4KSB7XG4gICAgdmFyIHJlY29yZGVyID0gUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlckZvckNhbnZhcyhjdHguY2FudmFzKTtcbiAgICBpZiAocmVjb3JkZXIpIHJldHVybiByZWNvcmRlcjtcblxuICAgIHJlY29yZGVyID0gbmV3IFJlY29yZGluZ0NvbnRleHQoY3R4KTtcbiAgICBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycy5wdXNoKFtjdHguY2FudmFzLCByZWNvcmRlcl0pO1xuICAgIHJldHVybiByZWNvcmRlcjtcbiAgfTtcbn07XG5cbi8qKlxuICogUmV2ZXJ0IHRoZSBzdHViYmluZyBwZXJmb3JtZWQgYnkgUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRBbGwuXG4gKi9cblJlY29yZGluZ0NvbnRleHQucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCFzdHViR2V0RGF0YUNvbnRleHQpIHtcbiAgICB0aHJvdyAnQ2FsbGVkIFJlY29yZGluZ0NvbnRleHQucmVzZXQoKSBiZWZvcmUgUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRBbGwoKSc7XG4gIH1cbiAgc3R1YkdldERhdGFDb250ZXh0ID0gbnVsbDtcbiAgUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlcnMgPSBudWxsO1xufTtcblxuLy8gR2V0IHRoZSByZWNvcmRpbmcgY29udGV4dCBmb3IgYSBjYW52YXMuXG5SZWNvcmRpbmdDb250ZXh0LnJlY29yZGVyRm9yQ2FudmFzID0gZnVuY3Rpb24oY2FudmFzKSB7XG4gIHZhciByZWNvcmRlcnMgPSBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycztcbiAgaWYgKHJlY29yZGVycyA9PSBudWxsKSB7XG4gICAgdGhyb3cgJ1lvdSBtdXN0IGNhbGwgUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRBbGwoKSBiZWZvcmUgdXNpbmcgb3RoZXIgUmVjb3JkaW5nQ29udGV4dCBzdGF0aWMgbWV0aG9kcyc7XG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWNvcmRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgciA9IHJlY29yZGVyc1tpXTtcbiAgICBpZiAoclswXSA9PSBjYW52YXMpIHJldHVybiByWzFdO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIHJlY29yZGluZyBjb250ZXh0IGZvciBhIGNhbnZhcyBpbnNpZGUgb2YgZGl2LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIHdoZW4geW91IGhhdmUgYSB0ZXN0IGRpdiBhbmQgc2V2ZXJhbCBjYW52YXNlcy5cbiAqL1xuUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlckZvclNlbGVjdG9yID0gZnVuY3Rpb24oZGl2LCBzZWxlY3Rvcikge1xuICB2YXIgY2FudmFzID0gZGl2LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IgKyAnIGNhbnZhcycpIHx8IGRpdi5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgaWYgKCFjYW52YXMpIHtcbiAgICB0aHJvdyAnVW5hYmxlIHRvIGZpbmQgYSBjYW52YXMgbWF0Y2hpbmcgJyArIHNlbGVjdG9yO1xuICB9IGVsc2UgaWYgKCEoY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpKSB7XG4gICAgdGhyb3cgJ1NlbGVjdG9yICcgKyBzZWxlY3RvciArICcgbmVpdGhlciBtYXRjaGVzIG5vciBjb250YWlucyBhIGNhbnZhcyc7XG4gIH1cbiAgcmV0dXJuIFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJGb3JDYW52YXMoY2FudmFzKTtcbn07XG5cbi8vIFJlc29sdmVzIGFyZ3VtZW50cyBmb3IgUmVjb3JkaW5nQ29udGV4dCBoZWxwZXJzLlxuLy8gWW91IGNhbiBlaXRoZXIgc3BlY2lmeSBhIGRpdiAmIHNlbGVjdG9yIHRvIGZpbmQgdGhlIGNhbnZhcywgb3Igb21pdCB0aGlzIGlmXG4vLyB0aGVyZSdzIG9ubHkgb25lIGNhbnZhcyBiZWluZyByZWNvcmRlZC5cbmZ1bmN0aW9uIGZpbmRSZWNvcmRlcihkaXYsIHNlbGVjdG9yKSB7XG4gIGlmICghZGl2KSB7XG4gICAgaWYgKCFSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycykge1xuICAgICAgdGhyb3cgJ1lvdSBtdXN0IGNhbGwgUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRBbGwoKSBiZWZvcmUgdXNpbmcgb3RoZXIgUmVjb3JkaW5nQ29udGV4dCBzdGF0aWMgbWV0aG9kcyc7XG4gICAgfSBlbHNlIGlmIChSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycy5sZW5ndGggPT0gMCkge1xuICAgICAgdGhyb3cgJ0NhbGxlZCBhIFJlY29yZGluZ0NvbnRleHQgbWV0aG9kLCBidXQgbm8gY2FudmFzZXMgYXJlIGJlaW5nIHJlY29yZGVkLic7XG4gICAgfSBlbHNlIGlmIChSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycy5sZW5ndGggPiAxKSB7XG4gICAgICB0aHJvdyAnQ2FsbGVkIGEgUmVjb3JkaW5nQ29udGV4dCBtZXRob2Qgd2hpbGUgbXVsdGlwbGUgY2FudmFzZXMgd2VyZSBiZWluZyByZWNvcmRlZC4gU3BlY2lmeSBvbmUgdXNpbmcgYSBkaXYgYW5kIHNlbGVjdG9yLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVyc1swXVsxXTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJGb3JTZWxlY3RvcihkaXYsIHNlbGVjdG9yKTtcbiAgfVxufVxuXG4vLyBGaW5kIG9iamVjdHMgcHVzaGVkIG9udG8gYSBwYXJ0aWN1bGFyIHJlY29yZGVkIGNhbnZhcy5cblJlY29yZGluZ0NvbnRleHQuZHJhd25PYmplY3RzV2l0aCA9IGZ1bmN0aW9uKGRpdiwgc2VsZWN0b3IsIHByZWRpY2F0ZSkge1xuICAvLyBDaGVjayBmb3IgdGhlIHplcm8tYXJndW1lbnQgb3Igb25lLWFyZ3VtZW50IHZlcnNpb24uXG4gIGlmICh0eXBlb2YoZGl2KSA9PSAnZnVuY3Rpb24nIHx8IGFyZ3VtZW50cy5sZW5ndGggPT0gMCkge1xuICAgIHByZWRpY2F0ZSA9IGRpdjtcbiAgICBkaXYgPSBudWxsO1xuICB9XG4gIHZhciByZWNvcmRlciA9IGZpbmRSZWNvcmRlcihkaXYsIHNlbGVjdG9yKTtcbiAgcHJlZGljYXRlID0gcHJlZGljYXRlIHx8IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfTtcbiAgcmV0dXJuIHJlY29yZGVyID8gcmVjb3JkZXIuZHJhd25PYmplY3RzV2l0aChwcmVkaWNhdGUpIDogW107XG59O1xuXG4vLyBUaGlzIHZlcnNpb24gcmVhZHMgYmV0dGVyIGlmIHRoZXJlJ3Mgbm8gcHJlZGljYXRlLlxuUmVjb3JkaW5nQ29udGV4dC5kcmF3bk9iamVjdHMgPSBSZWNvcmRpbmdDb250ZXh0LmRyYXduT2JqZWN0c1dpdGg7XG5cbi8vIEZpbmQgY2FsbHMgb2YgcGFydGljdWxhciBkcmF3aW5nIGZ1bmN0aW9ucyAoZS5nLiBmaWxsVGV4dClcblJlY29yZGluZ0NvbnRleHQuY2FsbHNPZiA9IGZ1bmN0aW9uIChkaXYsIHNlbGVjdG9yLCB0eXBlKSB7XG4gIC8vIENoZWNrIGZvciB0aGUgb25lLWFyZ3VtZW50IHZlcnNpb24uXG4gIGlmICh0eXBlb2YoZGl2KSA9PSAnc3RyaW5nJykge1xuICAgIHR5cGUgPSBkaXY7XG4gICAgZGl2ID0gbnVsbDtcbiAgfVxuICB2YXIgcmVjb3JkZXIgPSBmaW5kUmVjb3JkZXIoZGl2LCBzZWxlY3Rvcik7XG4gIHJldHVybiByZWNvcmRlciA/IHJlY29yZGVyLmNhbGxzT2YodHlwZSkgOiBbXTtcbn07XG5cblxuLyoqXG4gKiBBIGNvbnRleHQgd2hpY2ggZGV0ZXJtaW5lcyB0aGUgZGF0YSBhdCBhIHBhcnRpY3VsYXIgbG9jYXRpb24uXG4gKlxuICogV2hlbiBkcmF3aW5nIG1ldGhvZHMgYXJlIGNhbGxlZCBvbiB0aGlzIGNsYXNzLCBub3RoaW5nIGlzIHJlbmRlcmVkLiBJbnN0ZWFkLFxuICogZWFjaCBzaGFwZSBpcyBjaGVja2VkIHRvIHNlZSBpZiBpdCBpbmNsdWRlcyB0aGUgcG9pbnQgb2YgaW50ZXJlc3QuIElmIGl0XG4gKiBkb2VzLCB0aGUgY3VycmVudCBkYXRhIHN0YWNrIGlzIHNhdmVkIGFzIGEgXCJoaXRcIi5cbiAqXG4gKiBUaGUgYGhpdHNgIHByb3BlcnR5IHJlY29yZHMgYWxsIHN1Y2ggaGl0cy5cbiAqIFRoZSBgaGl0YCBwcm9wZXJ0eSByZWNvcmRzIG9ubHkgdGhlIGxhc3QgKHRvcCkgaGl0LlxuICovXG5mdW5jdGlvbiBDbGlja1RyYWNraW5nQ29udGV4dChjdHgsIHB4LCBweSkge1xuICBmb3J3YXJkKHRoaXMsIGN0eCk7XG5cbiAgdmFyIHN0YWNrID0gW107XG4gIHRoaXMuaGl0cyA9IFtdO1xuICB0aGlzLmhpdCA9IG51bGw7XG4gIFxuICB2YXIgdGhhdCA9IHRoaXM7XG4gIGZ1bmN0aW9uIHJlY29yZEhpdCgpIHtcbiAgICB0aGF0LmhpdHMudW5zaGlmdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChzdGFjaykpO1xuICAgIHRoYXQuaGl0ID0gdGhhdC5oaXRzWzBdO1xuICB9XG5cbiAgdGhpcy5wdXNoT2JqZWN0ID0gZnVuY3Rpb24obykge1xuICAgIHN0YWNrLnVuc2hpZnQobyk7XG4gIH07XG4gIFxuICB0aGlzLnBvcE9iamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHN0YWNrLnNoaWZ0KCk7XG4gIH07XG5cbiAgdGhpcy5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaGl0cyA9IFtdO1xuICAgIHRoaXMuaGl0ID0gbnVsbDtcbiAgfTtcblxuICAvLyBUaGVzZSBhcmUgKG1vc3Qgb2YpIHRoZSBjYW52YXMgbWV0aG9kcyB3aGljaCBkcmF3IHNvbWV0aGluZy5cbiAgLy8gVE9ETzogd291bGQgaXQgbWFrZSBzZW5zZSB0byBwdXJnZSBleGlzdGluZyBoaXRzIGNvdmVyZWQgYnkgdGhpcz9cbiAgdGhpcy5jbGVhclJlY3QgPSBmdW5jdGlvbih4LCB5LCB3LCBoKSB7IH07XG5cbiAgdGhpcy5maWxsUmVjdCA9IGZ1bmN0aW9uKHgsIHksIHcsIGgpIHtcbiAgICBpZiAocHggPj0geCAmJiBweCA8PSB4ICsgdyAmJiBweSA+PSB5ICYmIHB5IDw9IHkgKyBoKSByZWNvcmRIaXQoKTtcbiAgfTtcblxuICB0aGlzLnN0cm9rZVJlY3QgPSBmdW5jdGlvbih4LCB5LCB3LCBoKSB7XG4gICAgLy8gLi4uXG4gIH07XG5cbiAgdGhpcy5maWxsID0gZnVuY3Rpb24oZmlsbFJ1bGUpIHtcbiAgICAvLyBUT0RPOiBpbXBsZW1lbnQgZmlsbFJ1bGVcbiAgICBpZiAoY3R4LmlzUG9pbnRJblBhdGgocHgsIHB5KSkgcmVjb3JkSGl0KCk7XG4gIH07XG5cbiAgdGhpcy5zdHJva2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoY3R4LmlzUG9pbnRJblN0cm9rZShweCwgcHkpKSByZWNvcmRIaXQoKTtcbiAgfTtcblxuICB0aGlzLmZpbGxUZXh0ID0gZnVuY3Rpb24odGV4dCwgeCwgeSwgbWF4V2lkdGgpIHtcbiAgICAvLyAuLi5cbiAgfTtcblxuICB0aGlzLnN0cm9rZVRleHQgPSBmdW5jdGlvbih0ZXh0LCB4LCB5LCBtYXhXaWR0aCkge1xuICAgIC8vIC4uLlxuICB9O1xufVxuXG52YXIgZXhwb3J0cyA9IHtcbiAgRGF0YUNvbnRleHQ6IERhdGFDb250ZXh0LFxuICBSZWNvcmRpbmdDb250ZXh0OiBSZWNvcmRpbmdDb250ZXh0LFxuICBDbGlja1RyYWNraW5nQ29udGV4dDogQ2xpY2tUcmFja2luZ0NvbnRleHQsXG4gIGdldERhdGFDb250ZXh0OiBnZXREYXRhQ29udGV4dFxufTtcblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG59IGVsc2Uge1xuICB3aW5kb3cuZGF0YUNhbnZhcyA9IGV4cG9ydHM7XG59XG5cbn0pKCk7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEV2ZW50TGlzdGVuZXJcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJy4vZW1wdHlGdW5jdGlvbicpO1xuXG4vKipcbiAqIFVwc3RyZWFtIHZlcnNpb24gb2YgZXZlbnQgbGlzdGVuZXIuIERvZXMgbm90IHRha2UgaW50byBhY2NvdW50IHNwZWNpZmljXG4gKiBuYXR1cmUgb2YgcGxhdGZvcm0uXG4gKi9cbnZhciBFdmVudExpc3RlbmVyID0ge1xuICAvKipcbiAgICogTGlzdGVuIHRvIERPTSBldmVudHMgZHVyaW5nIHRoZSBidWJibGUgcGhhc2UuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRhcmdldCBET00gZWxlbWVudCB0byByZWdpc3RlciBsaXN0ZW5lciBvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZSBFdmVudCB0eXBlLCBlLmcuICdjbGljaycgb3IgJ21vdXNlb3ZlcicuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrIGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IE9iamVjdCB3aXRoIGEgYHJlbW92ZWAgbWV0aG9kLlxuICAgKi9cbiAgbGlzdGVuOiBmdW5jdGlvbiAodGFyZ2V0LCBldmVudFR5cGUsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRhcmdldC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGNhbGxiYWNrLCBmYWxzZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGNhbGxiYWNrLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICh0YXJnZXQuYXR0YWNoRXZlbnQpIHtcbiAgICAgIHRhcmdldC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnRUeXBlLCBjYWxsYmFjayk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0YXJnZXQuZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50VHlwZSwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogTGlzdGVuIHRvIERPTSBldmVudHMgZHVyaW5nIHRoZSBjYXB0dXJlIHBoYXNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSB0YXJnZXQgRE9NIGVsZW1lbnQgdG8gcmVnaXN0ZXIgbGlzdGVuZXIgb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGUgRXZlbnQgdHlwZSwgZS5nLiAnY2xpY2snIG9yICdtb3VzZW92ZXInLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjayBmdW5jdGlvbi5cbiAgICogQHJldHVybiB7b2JqZWN0fSBPYmplY3Qgd2l0aCBhIGByZW1vdmVgIG1ldGhvZC5cbiAgICovXG4gIGNhcHR1cmU6IGZ1bmN0aW9uICh0YXJnZXQsIGV2ZW50VHlwZSwgY2FsbGJhY2spIHtcbiAgICBpZiAodGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2FsbGJhY2ssIHRydWUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0F0dGVtcHRlZCB0byBsaXN0ZW4gdG8gZXZlbnRzIGR1cmluZyB0aGUgY2FwdHVyZSBwaGFzZSBvbiBhICcgKyAnYnJvd3NlciB0aGF0IGRvZXMgbm90IHN1cHBvcnQgdGhlIGNhcHR1cmUgcGhhc2UuIFlvdXIgYXBwbGljYXRpb24gJyArICd3aWxsIG5vdCByZWNlaXZlIHNvbWUgZXZlbnRzLicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZlOiBlbXB0eUZ1bmN0aW9uXG4gICAgICB9O1xuICAgIH1cbiAgfSxcblxuICByZWdpc3RlckRlZmF1bHQ6IGZ1bmN0aW9uICgpIHt9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50TGlzdGVuZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEV4ZWN1dGlvbkVudmlyb25tZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FuVXNlRE9NID0gISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcblxuLyoqXG4gKiBTaW1wbGUsIGxpZ2h0d2VpZ2h0IG1vZHVsZSBhc3Npc3Rpbmcgd2l0aCB0aGUgZGV0ZWN0aW9uIGFuZCBjb250ZXh0IG9mXG4gKiBXb3JrZXIuIEhlbHBzIGF2b2lkIGNpcmN1bGFyIGRlcGVuZGVuY2llcyBhbmQgYWxsb3dzIGNvZGUgdG8gcmVhc29uIGFib3V0XG4gKiB3aGV0aGVyIG9yIG5vdCB0aGV5IGFyZSBpbiBhIFdvcmtlciwgZXZlbiBpZiB0aGV5IG5ldmVyIGluY2x1ZGUgdGhlIG1haW5cbiAqIGBSZWFjdFdvcmtlcmAgZGVwZW5kZW5jeS5cbiAqL1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0ge1xuXG4gIGNhblVzZURPTTogY2FuVXNlRE9NLFxuXG4gIGNhblVzZVdvcmtlcnM6IHR5cGVvZiBXb3JrZXIgIT09ICd1bmRlZmluZWQnLFxuXG4gIGNhblVzZUV2ZW50TGlzdGVuZXJzOiBjYW5Vc2VET00gJiYgISEod2luZG93LmFkZEV2ZW50TGlzdGVuZXIgfHwgd2luZG93LmF0dGFjaEV2ZW50KSxcblxuICBjYW5Vc2VWaWV3cG9ydDogY2FuVXNlRE9NICYmICEhd2luZG93LnNjcmVlbixcblxuICBpc0luV29ya2VyOiAhY2FuVXNlRE9NIC8vIEZvciBub3csIHRoaXMgaXMgdHJ1ZSAtIG1pZ2h0IGNoYW5nZSBpbiB0aGUgZnV0dXJlLlxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV4ZWN1dGlvbkVudmlyb25tZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBjYW1lbGl6ZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIF9oeXBoZW5QYXR0ZXJuID0gLy0oLikvZztcblxuLyoqXG4gKiBDYW1lbGNhc2VzIGEgaHlwaGVuYXRlZCBzdHJpbmcsIGZvciBleGFtcGxlOlxuICpcbiAqICAgPiBjYW1lbGl6ZSgnYmFja2dyb3VuZC1jb2xvcicpXG4gKiAgIDwgXCJiYWNrZ3JvdW5kQ29sb3JcIlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gY2FtZWxpemUoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZShfaHlwaGVuUGF0dGVybiwgZnVuY3Rpb24gKF8sIGNoYXJhY3Rlcikge1xuICAgIHJldHVybiBjaGFyYWN0ZXIudG9VcHBlckNhc2UoKTtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2FtZWxpemU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGNhbWVsaXplU3R5bGVOYW1lXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGNhbWVsaXplID0gcmVxdWlyZSgnLi9jYW1lbGl6ZScpO1xuXG52YXIgbXNQYXR0ZXJuID0gL14tbXMtLztcblxuLyoqXG4gKiBDYW1lbGNhc2VzIGEgaHlwaGVuYXRlZCBDU1MgcHJvcGVydHkgbmFtZSwgZm9yIGV4YW1wbGU6XG4gKlxuICogICA+IGNhbWVsaXplU3R5bGVOYW1lKCdiYWNrZ3JvdW5kLWNvbG9yJylcbiAqICAgPCBcImJhY2tncm91bmRDb2xvclwiXG4gKiAgID4gY2FtZWxpemVTdHlsZU5hbWUoJy1tb3otdHJhbnNpdGlvbicpXG4gKiAgIDwgXCJNb3pUcmFuc2l0aW9uXCJcbiAqICAgPiBjYW1lbGl6ZVN0eWxlTmFtZSgnLW1zLXRyYW5zaXRpb24nKVxuICogICA8IFwibXNUcmFuc2l0aW9uXCJcbiAqXG4gKiBBcyBBbmRpIFNtaXRoIHN1Z2dlc3RzXG4gKiAoaHR0cDovL3d3dy5hbmRpc21pdGguY29tL2Jsb2cvMjAxMi8wMi9tb2Rlcm5penItcHJlZml4ZWQvKSwgYW4gYC1tc2AgcHJlZml4XG4gKiBpcyBjb252ZXJ0ZWQgdG8gbG93ZXJjYXNlIGBtc2AuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBjYW1lbGl6ZVN0eWxlTmFtZShzdHJpbmcpIHtcbiAgcmV0dXJuIGNhbWVsaXplKHN0cmluZy5yZXBsYWNlKG1zUGF0dGVybiwgJ21zLScpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjYW1lbGl6ZVN0eWxlTmFtZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgY29udGFpbnNOb2RlXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGlzVGV4dE5vZGUgPSByZXF1aXJlKCcuL2lzVGV4dE5vZGUnKTtcblxuLyplc2xpbnQtZGlzYWJsZSBuby1iaXR3aXNlICovXG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgZ2l2ZW4gRE9NIG5vZGUgY29udGFpbnMgb3IgaXMgYW5vdGhlciBET00gbm9kZS5cbiAqXG4gKiBAcGFyYW0gez9ET01Ob2RlfSBvdXRlck5vZGUgT3V0ZXIgRE9NIG5vZGUuXG4gKiBAcGFyYW0gez9ET01Ob2RlfSBpbm5lck5vZGUgSW5uZXIgRE9NIG5vZGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBvdXRlck5vZGVgIGNvbnRhaW5zIG9yIGlzIGBpbm5lck5vZGVgLlxuICovXG5mdW5jdGlvbiBjb250YWluc05vZGUoX3gsIF94Mikge1xuICB2YXIgX2FnYWluID0gdHJ1ZTtcblxuICBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHtcbiAgICB2YXIgb3V0ZXJOb2RlID0gX3gsXG4gICAgICAgIGlubmVyTm9kZSA9IF94MjtcbiAgICBfYWdhaW4gPSBmYWxzZTtcblxuICAgIGlmICghb3V0ZXJOb2RlIHx8ICFpbm5lck5vZGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKG91dGVyTm9kZSA9PT0gaW5uZXJOb2RlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGlzVGV4dE5vZGUob3V0ZXJOb2RlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoaXNUZXh0Tm9kZShpbm5lck5vZGUpKSB7XG4gICAgICBfeCA9IG91dGVyTm9kZTtcbiAgICAgIF94MiA9IGlubmVyTm9kZS5wYXJlbnROb2RlO1xuICAgICAgX2FnYWluID0gdHJ1ZTtcbiAgICAgIGNvbnRpbnVlIF9mdW5jdGlvbjtcbiAgICB9IGVsc2UgaWYgKG91dGVyTm9kZS5jb250YWlucykge1xuICAgICAgcmV0dXJuIG91dGVyTm9kZS5jb250YWlucyhpbm5lck5vZGUpO1xuICAgIH0gZWxzZSBpZiAob3V0ZXJOb2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSB7XG4gICAgICByZXR1cm4gISEob3V0ZXJOb2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGlubmVyTm9kZSkgJiAxNik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjb250YWluc05vZGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGNyZWF0ZUFycmF5RnJvbU1peGVkXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHRvQXJyYXkgPSByZXF1aXJlKCcuL3RvQXJyYXknKTtcblxuLyoqXG4gKiBQZXJmb3JtIGEgaGV1cmlzdGljIHRlc3QgdG8gZGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBcImFycmF5LWxpa2VcIi5cbiAqXG4gKiAgIEEgbW9uayBhc2tlZCBKb3NodSwgYSBaZW4gbWFzdGVyLCBcIkhhcyBhIGRvZyBCdWRkaGEgbmF0dXJlP1wiXG4gKiAgIEpvc2h1IHJlcGxpZWQ6IFwiTXUuXCJcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGRldGVybWluZXMgaWYgaXRzIGFyZ3VtZW50IGhhcyBcImFycmF5IG5hdHVyZVwiOiBpdCByZXR1cm5zXG4gKiB0cnVlIGlmIHRoZSBhcmd1bWVudCBpcyBhbiBhY3R1YWwgYXJyYXksIGFuIGBhcmd1bWVudHMnIG9iamVjdCwgb3IgYW5cbiAqIEhUTUxDb2xsZWN0aW9uIChlLmcuIG5vZGUuY2hpbGROb2RlcyBvciBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCkpLlxuICpcbiAqIEl0IHdpbGwgcmV0dXJuIGZhbHNlIGZvciBvdGhlciBhcnJheS1saWtlIG9iamVjdHMgbGlrZSBGaWxlbGlzdC5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaGFzQXJyYXlOYXR1cmUob2JqKSB7XG4gIHJldHVybihcbiAgICAvLyBub3QgbnVsbC9mYWxzZVxuICAgICEhb2JqICYmIChcbiAgICAvLyBhcnJheXMgYXJlIG9iamVjdHMsIE5vZGVMaXN0cyBhcmUgZnVuY3Rpb25zIGluIFNhZmFyaVxuICAgIHR5cGVvZiBvYmogPT0gJ29iamVjdCcgfHwgdHlwZW9mIG9iaiA9PSAnZnVuY3Rpb24nKSAmJlxuICAgIC8vIHF1YWNrcyBsaWtlIGFuIGFycmF5XG4gICAgJ2xlbmd0aCcgaW4gb2JqICYmXG4gICAgLy8gbm90IHdpbmRvd1xuICAgICEoJ3NldEludGVydmFsJyBpbiBvYmopICYmXG4gICAgLy8gbm8gRE9NIG5vZGUgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYW4gYXJyYXktbGlrZVxuICAgIC8vIGEgJ3NlbGVjdCcgZWxlbWVudCBoYXMgJ2xlbmd0aCcgYW5kICdpdGVtJyBwcm9wZXJ0aWVzIG9uIElFOFxuICAgIHR5cGVvZiBvYmoubm9kZVR5cGUgIT0gJ251bWJlcicgJiYgKFxuICAgIC8vIGEgcmVhbCBhcnJheVxuICAgIEFycmF5LmlzQXJyYXkob2JqKSB8fFxuICAgIC8vIGFyZ3VtZW50c1xuICAgICdjYWxsZWUnIGluIG9iaiB8fFxuICAgIC8vIEhUTUxDb2xsZWN0aW9uL05vZGVMaXN0XG4gICAgJ2l0ZW0nIGluIG9iailcbiAgKTtcbn1cblxuLyoqXG4gKiBFbnN1cmUgdGhhdCB0aGUgYXJndW1lbnQgaXMgYW4gYXJyYXkgYnkgd3JhcHBpbmcgaXQgaW4gYW4gYXJyYXkgaWYgaXQgaXMgbm90LlxuICogQ3JlYXRlcyBhIGNvcHkgb2YgdGhlIGFyZ3VtZW50IGlmIGl0IGlzIGFscmVhZHkgYW4gYXJyYXkuXG4gKlxuICogVGhpcyBpcyBtb3N0bHkgdXNlZnVsIGlkaW9tYXRpY2FsbHk6XG4gKlxuICogICB2YXIgY3JlYXRlQXJyYXlGcm9tTWl4ZWQgPSByZXF1aXJlKCdjcmVhdGVBcnJheUZyb21NaXhlZCcpO1xuICpcbiAqICAgZnVuY3Rpb24gdGFrZXNPbmVPck1vcmVUaGluZ3ModGhpbmdzKSB7XG4gKiAgICAgdGhpbmdzID0gY3JlYXRlQXJyYXlGcm9tTWl4ZWQodGhpbmdzKTtcbiAqICAgICAuLi5cbiAqICAgfVxuICpcbiAqIFRoaXMgYWxsb3dzIHlvdSB0byB0cmVhdCBgdGhpbmdzJyBhcyBhbiBhcnJheSwgYnV0IGFjY2VwdCBzY2FsYXJzIGluIHRoZSBBUEkuXG4gKlxuICogSWYgeW91IG5lZWQgdG8gY29udmVydCBhbiBhcnJheS1saWtlIG9iamVjdCwgbGlrZSBgYXJndW1lbnRzYCwgaW50byBhbiBhcnJheVxuICogdXNlIHRvQXJyYXkgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7YXJyYXl9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUFycmF5RnJvbU1peGVkKG9iaikge1xuICBpZiAoIWhhc0FycmF5TmF0dXJlKG9iaikpIHtcbiAgICByZXR1cm4gW29ial07XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgcmV0dXJuIG9iai5zbGljZSgpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0b0FycmF5KG9iaik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVBcnJheUZyb21NaXhlZDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgY3JlYXRlTm9kZXNGcm9tTWFya3VwXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbi8qZXNsaW50LWRpc2FibGUgZmItd3d3L3Vuc2FmZS1odG1sKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBjcmVhdGVBcnJheUZyb21NaXhlZCA9IHJlcXVpcmUoJy4vY3JlYXRlQXJyYXlGcm9tTWl4ZWQnKTtcbnZhciBnZXRNYXJrdXBXcmFwID0gcmVxdWlyZSgnLi9nZXRNYXJrdXBXcmFwJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnLi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBEdW1teSBjb250YWluZXIgdXNlZCB0byByZW5kZXIgYWxsIG1hcmt1cC5cbiAqL1xudmFyIGR1bW15Tm9kZSA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpIDogbnVsbDtcblxuLyoqXG4gKiBQYXR0ZXJuIHVzZWQgYnkgYGdldE5vZGVOYW1lYC5cbiAqL1xudmFyIG5vZGVOYW1lUGF0dGVybiA9IC9eXFxzKjwoXFx3KykvO1xuXG4vKipcbiAqIEV4dHJhY3RzIHRoZSBgbm9kZU5hbWVgIG9mIHRoZSBmaXJzdCBlbGVtZW50IGluIGEgc3RyaW5nIG9mIG1hcmt1cC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIFN0cmluZyBvZiBtYXJrdXAuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBOb2RlIG5hbWUgb2YgdGhlIHN1cHBsaWVkIG1hcmt1cC5cbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZU5hbWUobWFya3VwKSB7XG4gIHZhciBub2RlTmFtZU1hdGNoID0gbWFya3VwLm1hdGNoKG5vZGVOYW1lUGF0dGVybik7XG4gIHJldHVybiBub2RlTmFtZU1hdGNoICYmIG5vZGVOYW1lTWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIG5vZGVzIHJlbmRlcmVkIGZyb20gdGhlIHN1cHBsaWVkIG1hcmt1cC4gVGhlXG4gKiBvcHRpb25hbGx5IHN1cHBsaWVkIGBoYW5kbGVTY3JpcHRgIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCBvbmNlIGZvciBlYWNoXG4gKiA8c2NyaXB0PiBlbGVtZW50IHRoYXQgaXMgcmVuZGVyZWQuIElmIG5vIGBoYW5kbGVTY3JpcHRgIGZ1bmN0aW9uIGlzIHN1cHBsaWVkLFxuICogYW4gZXhjZXB0aW9uIGlzIHRocm93biBpZiBhbnkgPHNjcmlwdD4gZWxlbWVudHMgYXJlIHJlbmRlcmVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgQSBzdHJpbmcgb2YgdmFsaWQgSFRNTCBtYXJrdXAuXG4gKiBAcGFyYW0gez9mdW5jdGlvbn0gaGFuZGxlU2NyaXB0IEludm9rZWQgb25jZSBmb3IgZWFjaCByZW5kZXJlZCA8c2NyaXB0Pi5cbiAqIEByZXR1cm4ge2FycmF5PERPTUVsZW1lbnR8RE9NVGV4dE5vZGU+fSBBbiBhcnJheSBvZiByZW5kZXJlZCBub2Rlcy5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlTm9kZXNGcm9tTWFya3VwKG1hcmt1cCwgaGFuZGxlU2NyaXB0KSB7XG4gIHZhciBub2RlID0gZHVtbXlOb2RlO1xuICAhISFkdW1teU5vZGUgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnY3JlYXRlTm9kZXNGcm9tTWFya3VwIGR1bW15IG5vdCBpbml0aWFsaXplZCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgdmFyIG5vZGVOYW1lID0gZ2V0Tm9kZU5hbWUobWFya3VwKTtcblxuICB2YXIgd3JhcCA9IG5vZGVOYW1lICYmIGdldE1hcmt1cFdyYXAobm9kZU5hbWUpO1xuICBpZiAod3JhcCkge1xuICAgIG5vZGUuaW5uZXJIVE1MID0gd3JhcFsxXSArIG1hcmt1cCArIHdyYXBbMl07XG5cbiAgICB2YXIgd3JhcERlcHRoID0gd3JhcFswXTtcbiAgICB3aGlsZSAod3JhcERlcHRoLS0pIHtcbiAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbm9kZS5pbm5lckhUTUwgPSBtYXJrdXA7XG4gIH1cblxuICB2YXIgc2NyaXB0cyA9IG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpO1xuICBpZiAoc2NyaXB0cy5sZW5ndGgpIHtcbiAgICAhaGFuZGxlU2NyaXB0ID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2NyZWF0ZU5vZGVzRnJvbU1hcmt1cCguLi4pOiBVbmV4cGVjdGVkIDxzY3JpcHQ+IGVsZW1lbnQgcmVuZGVyZWQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIGNyZWF0ZUFycmF5RnJvbU1peGVkKHNjcmlwdHMpLmZvckVhY2goaGFuZGxlU2NyaXB0KTtcbiAgfVxuXG4gIHZhciBub2RlcyA9IGNyZWF0ZUFycmF5RnJvbU1peGVkKG5vZGUuY2hpbGROb2Rlcyk7XG4gIHdoaWxlIChub2RlLmxhc3RDaGlsZCkge1xuICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5sYXN0Q2hpbGQpO1xuICB9XG4gIHJldHVybiBub2Rlcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVOb2Rlc0Zyb21NYXJrdXA7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGVtcHR5RnVuY3Rpb25cbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gbWFrZUVtcHR5RnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFyZztcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGFjY2VwdHMgYW5kIGRpc2NhcmRzIGlucHV0czsgaXQgaGFzIG5vIHNpZGUgZWZmZWN0cy4gVGhpcyBpc1xuICogcHJpbWFyaWx5IHVzZWZ1bCBpZGlvbWF0aWNhbGx5IGZvciBvdmVycmlkYWJsZSBmdW5jdGlvbiBlbmRwb2ludHMgd2hpY2hcbiAqIGFsd2F5cyBuZWVkIHRvIGJlIGNhbGxhYmxlLCBzaW5jZSBKUyBsYWNrcyBhIG51bGwtY2FsbCBpZGlvbSBhbGEgQ29jb2EuXG4gKi9cbmZ1bmN0aW9uIGVtcHR5RnVuY3Rpb24oKSB7fVxuXG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zID0gbWFrZUVtcHR5RnVuY3Rpb247XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zRmFsc2UgPSBtYWtlRW1wdHlGdW5jdGlvbihmYWxzZSk7XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVHJ1ZSA9IG1ha2VFbXB0eUZ1bmN0aW9uKHRydWUpO1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc051bGwgPSBtYWtlRW1wdHlGdW5jdGlvbihudWxsKTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUaGlzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcztcbn07XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zQXJndW1lbnQgPSBmdW5jdGlvbiAoYXJnKSB7XG4gIHJldHVybiBhcmc7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVtcHR5RnVuY3Rpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGVtcHR5T2JqZWN0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW1wdHlPYmplY3QgPSB7fTtcblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgT2JqZWN0LmZyZWV6ZShlbXB0eU9iamVjdCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZW1wdHlPYmplY3Q7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGZvY3VzTm9kZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGUgaW5wdXQvdGV4dGFyZWEgdG8gZm9jdXNcbiAqL1xuZnVuY3Rpb24gZm9jdXNOb2RlKG5vZGUpIHtcbiAgLy8gSUU4IGNhbiB0aHJvdyBcIkNhbid0IG1vdmUgZm9jdXMgdG8gdGhlIGNvbnRyb2wgYmVjYXVzZSBpdCBpcyBpbnZpc2libGUsXG4gIC8vIG5vdCBlbmFibGVkLCBvciBvZiBhIHR5cGUgdGhhdCBkb2VzIG5vdCBhY2NlcHQgdGhlIGZvY3VzLlwiIGZvciBhbGwga2luZHMgb2ZcbiAgLy8gcmVhc29ucyB0aGF0IGFyZSB0b28gZXhwZW5zaXZlIGFuZCBmcmFnaWxlIHRvIHRlc3QuXG4gIHRyeSB7XG4gICAgbm9kZS5mb2N1cygpO1xuICB9IGNhdGNoIChlKSB7fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZvY3VzTm9kZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0QWN0aXZlRWxlbWVudFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBmYi13d3cvdHlwZW9mLXVuZGVmaW5lZCAqL1xuXG4vKipcbiAqIFNhbWUgYXMgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBidXQgd3JhcHMgaW4gYSB0cnktY2F0Y2ggYmxvY2suIEluIElFIGl0IGlzXG4gKiBub3Qgc2FmZSB0byBjYWxsIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgaWYgdGhlcmUgaXMgbm90aGluZyBmb2N1c2VkLlxuICpcbiAqIFRoZSBhY3RpdmVFbGVtZW50IHdpbGwgYmUgbnVsbCBvbmx5IGlmIHRoZSBkb2N1bWVudCBvciBkb2N1bWVudCBib2R5IGlzIG5vdFxuICogeWV0IGRlZmluZWQuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gZ2V0QWN0aXZlRWxlbWVudCgpIC8qP0RPTUVsZW1lbnQqL3tcbiAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB0cnkge1xuICAgIHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50IHx8IGRvY3VtZW50LmJvZHk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuYm9keTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldEFjdGl2ZUVsZW1lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldE1hcmt1cFdyYXBcbiAqL1xuXG4vKmVzbGludC1kaXNhYmxlIGZiLXd3dy91bnNhZmUtaHRtbCAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJy4vaW52YXJpYW50Jyk7XG5cbi8qKlxuICogRHVtbXkgY29udGFpbmVyIHVzZWQgdG8gZGV0ZWN0IHdoaWNoIHdyYXBzIGFyZSBuZWNlc3NhcnkuXG4gKi9cbnZhciBkdW1teU5vZGUgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSA6IG51bGw7XG5cbi8qKlxuICogU29tZSBicm93c2VycyBjYW5ub3QgdXNlIGBpbm5lckhUTUxgIHRvIHJlbmRlciBjZXJ0YWluIGVsZW1lbnRzIHN0YW5kYWxvbmUsXG4gKiBzbyB3ZSB3cmFwIHRoZW0sIHJlbmRlciB0aGUgd3JhcHBlZCBub2RlcywgdGhlbiBleHRyYWN0IHRoZSBkZXNpcmVkIG5vZGUuXG4gKlxuICogSW4gSUU4LCBjZXJ0YWluIGVsZW1lbnRzIGNhbm5vdCByZW5kZXIgYWxvbmUsIHNvIHdyYXAgYWxsIGVsZW1lbnRzICgnKicpLlxuICovXG5cbnZhciBzaG91bGRXcmFwID0ge307XG5cbnZhciBzZWxlY3RXcmFwID0gWzEsICc8c2VsZWN0IG11bHRpcGxlPVwidHJ1ZVwiPicsICc8L3NlbGVjdD4nXTtcbnZhciB0YWJsZVdyYXAgPSBbMSwgJzx0YWJsZT4nLCAnPC90YWJsZT4nXTtcbnZhciB0cldyYXAgPSBbMywgJzx0YWJsZT48dGJvZHk+PHRyPicsICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXTtcblxudmFyIHN2Z1dyYXAgPSBbMSwgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPicsICc8L3N2Zz4nXTtcblxudmFyIG1hcmt1cFdyYXAgPSB7XG4gICcqJzogWzEsICc/PGRpdj4nLCAnPC9kaXY+J10sXG5cbiAgJ2FyZWEnOiBbMSwgJzxtYXA+JywgJzwvbWFwPiddLFxuICAnY29sJzogWzIsICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J10sXG4gICdsZWdlbmQnOiBbMSwgJzxmaWVsZHNldD4nLCAnPC9maWVsZHNldD4nXSxcbiAgJ3BhcmFtJzogWzEsICc8b2JqZWN0PicsICc8L29iamVjdD4nXSxcbiAgJ3RyJzogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG5cbiAgJ29wdGdyb3VwJzogc2VsZWN0V3JhcCxcbiAgJ29wdGlvbic6IHNlbGVjdFdyYXAsXG5cbiAgJ2NhcHRpb24nOiB0YWJsZVdyYXAsXG4gICdjb2xncm91cCc6IHRhYmxlV3JhcCxcbiAgJ3Rib2R5JzogdGFibGVXcmFwLFxuICAndGZvb3QnOiB0YWJsZVdyYXAsXG4gICd0aGVhZCc6IHRhYmxlV3JhcCxcblxuICAndGQnOiB0cldyYXAsXG4gICd0aCc6IHRyV3JhcFxufTtcblxuLy8gSW5pdGlhbGl6ZSB0aGUgU1ZHIGVsZW1lbnRzIHNpbmNlIHdlIGtub3cgdGhleSdsbCBhbHdheXMgbmVlZCB0byBiZSB3cmFwcGVkXG4vLyBjb25zaXN0ZW50bHkuIElmIHRoZXkgYXJlIGNyZWF0ZWQgaW5zaWRlIGEgPGRpdj4gdGhleSB3aWxsIGJlIGluaXRpYWxpemVkIGluXG4vLyB0aGUgd3JvbmcgbmFtZXNwYWNlIChhbmQgd2lsbCBub3QgZGlzcGxheSkuXG52YXIgc3ZnRWxlbWVudHMgPSBbJ2NpcmNsZScsICdjbGlwUGF0aCcsICdkZWZzJywgJ2VsbGlwc2UnLCAnZycsICdpbWFnZScsICdsaW5lJywgJ2xpbmVhckdyYWRpZW50JywgJ21hc2snLCAncGF0aCcsICdwYXR0ZXJuJywgJ3BvbHlnb24nLCAncG9seWxpbmUnLCAncmFkaWFsR3JhZGllbnQnLCAncmVjdCcsICdzdG9wJywgJ3RleHQnLCAndHNwYW4nXTtcbnN2Z0VsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKG5vZGVOYW1lKSB7XG4gIG1hcmt1cFdyYXBbbm9kZU5hbWVdID0gc3ZnV3JhcDtcbiAgc2hvdWxkV3JhcFtub2RlTmFtZV0gPSB0cnVlO1xufSk7XG5cbi8qKlxuICogR2V0cyB0aGUgbWFya3VwIHdyYXAgY29uZmlndXJhdGlvbiBmb3IgdGhlIHN1cHBsaWVkIGBub2RlTmFtZWAuXG4gKlxuICogTk9URTogVGhpcyBsYXppbHkgZGV0ZWN0cyB3aGljaCB3cmFwcyBhcmUgbmVjZXNzYXJ5IGZvciB0aGUgY3VycmVudCBicm93c2VyLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBub2RlTmFtZSBMb3dlcmNhc2UgYG5vZGVOYW1lYC5cbiAqIEByZXR1cm4gez9hcnJheX0gTWFya3VwIHdyYXAgY29uZmlndXJhdGlvbiwgaWYgYXBwbGljYWJsZS5cbiAqL1xuZnVuY3Rpb24gZ2V0TWFya3VwV3JhcChub2RlTmFtZSkge1xuICAhISFkdW1teU5vZGUgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnTWFya3VwIHdyYXBwaW5nIG5vZGUgbm90IGluaXRpYWxpemVkJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBpZiAoIW1hcmt1cFdyYXAuaGFzT3duUHJvcGVydHkobm9kZU5hbWUpKSB7XG4gICAgbm9kZU5hbWUgPSAnKic7XG4gIH1cbiAgaWYgKCFzaG91bGRXcmFwLmhhc093blByb3BlcnR5KG5vZGVOYW1lKSkge1xuICAgIGlmIChub2RlTmFtZSA9PT0gJyonKSB7XG4gICAgICBkdW1teU5vZGUuaW5uZXJIVE1MID0gJzxsaW5rIC8+JztcbiAgICB9IGVsc2Uge1xuICAgICAgZHVtbXlOb2RlLmlubmVySFRNTCA9ICc8JyArIG5vZGVOYW1lICsgJz48LycgKyBub2RlTmFtZSArICc+JztcbiAgICB9XG4gICAgc2hvdWxkV3JhcFtub2RlTmFtZV0gPSAhZHVtbXlOb2RlLmZpcnN0Q2hpbGQ7XG4gIH1cbiAgcmV0dXJuIHNob3VsZFdyYXBbbm9kZU5hbWVdID8gbWFya3VwV3JhcFtub2RlTmFtZV0gOiBudWxsO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldE1hcmt1cFdyYXA7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBHZXRzIHRoZSBzY3JvbGwgcG9zaXRpb24gb2YgdGhlIHN1cHBsaWVkIGVsZW1lbnQgb3Igd2luZG93LlxuICpcbiAqIFRoZSByZXR1cm4gdmFsdWVzIGFyZSB1bmJvdW5kZWQsIHVubGlrZSBgZ2V0U2Nyb2xsUG9zaXRpb25gLiBUaGlzIG1lYW5zIHRoZXlcbiAqIG1heSBiZSBuZWdhdGl2ZSBvciBleGNlZWQgdGhlIGVsZW1lbnQgYm91bmRhcmllcyAod2hpY2ggaXMgcG9zc2libGUgdXNpbmdcbiAqIGluZXJ0aWFsIHNjcm9sbGluZykuXG4gKlxuICogQHBhcmFtIHtET01XaW5kb3d8RE9NRWxlbWVudH0gc2Nyb2xsYWJsZVxuICogQHJldHVybiB7b2JqZWN0fSBNYXAgd2l0aCBgeGAgYW5kIGB5YCBrZXlzLlxuICovXG5mdW5jdGlvbiBnZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvbihzY3JvbGxhYmxlKSB7XG4gIGlmIChzY3JvbGxhYmxlID09PSB3aW5kb3cpIHtcbiAgICByZXR1cm4ge1xuICAgICAgeDogd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0LFxuICAgICAgeTogd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3BcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgeDogc2Nyb2xsYWJsZS5zY3JvbGxMZWZ0LFxuICAgIHk6IHNjcm9sbGFibGUuc2Nyb2xsVG9wXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGh5cGhlbmF0ZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfdXBwZXJjYXNlUGF0dGVybiA9IC8oW0EtWl0pL2c7XG5cbi8qKlxuICogSHlwaGVuYXRlcyBhIGNhbWVsY2FzZWQgc3RyaW5nLCBmb3IgZXhhbXBsZTpcbiAqXG4gKiAgID4gaHlwaGVuYXRlKCdiYWNrZ3JvdW5kQ29sb3InKVxuICogICA8IFwiYmFja2dyb3VuZC1jb2xvclwiXG4gKlxuICogRm9yIENTUyBzdHlsZSBuYW1lcywgdXNlIGBoeXBoZW5hdGVTdHlsZU5hbWVgIGluc3RlYWQgd2hpY2ggd29ya3MgcHJvcGVybHlcbiAqIHdpdGggYWxsIHZlbmRvciBwcmVmaXhlcywgaW5jbHVkaW5nIGBtc2AuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBoeXBoZW5hdGUoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZShfdXBwZXJjYXNlUGF0dGVybiwgJy0kMScpLnRvTG93ZXJDYXNlKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaHlwaGVuYXRlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBoeXBoZW5hdGVTdHlsZU5hbWVcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaHlwaGVuYXRlID0gcmVxdWlyZSgnLi9oeXBoZW5hdGUnKTtcblxudmFyIG1zUGF0dGVybiA9IC9ebXMtLztcblxuLyoqXG4gKiBIeXBoZW5hdGVzIGEgY2FtZWxjYXNlZCBDU1MgcHJvcGVydHkgbmFtZSwgZm9yIGV4YW1wbGU6XG4gKlxuICogICA+IGh5cGhlbmF0ZVN0eWxlTmFtZSgnYmFja2dyb3VuZENvbG9yJylcbiAqICAgPCBcImJhY2tncm91bmQtY29sb3JcIlxuICogICA+IGh5cGhlbmF0ZVN0eWxlTmFtZSgnTW96VHJhbnNpdGlvbicpXG4gKiAgIDwgXCItbW96LXRyYW5zaXRpb25cIlxuICogICA+IGh5cGhlbmF0ZVN0eWxlTmFtZSgnbXNUcmFuc2l0aW9uJylcbiAqICAgPCBcIi1tcy10cmFuc2l0aW9uXCJcbiAqXG4gKiBBcyBNb2Rlcm5penIgc3VnZ2VzdHMgKGh0dHA6Ly9tb2Rlcm5penIuY29tL2RvY3MvI3ByZWZpeGVkKSwgYW4gYG1zYCBwcmVmaXhcbiAqIGlzIGNvbnZlcnRlZCB0byBgLW1zLWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBoeXBoZW5hdGVTdHlsZU5hbWUoc3RyaW5nKSB7XG4gIHJldHVybiBoeXBoZW5hdGUoc3RyaW5nKS5yZXBsYWNlKG1zUGF0dGVybiwgJy1tcy0nKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoeXBoZW5hdGVTdHlsZU5hbWU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGludmFyaWFudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBVc2UgaW52YXJpYW50KCkgdG8gYXNzZXJ0IHN0YXRlIHdoaWNoIHlvdXIgcHJvZ3JhbSBhc3N1bWVzIHRvIGJlIHRydWUuXG4gKlxuICogUHJvdmlkZSBzcHJpbnRmLXN0eWxlIGZvcm1hdCAob25seSAlcyBpcyBzdXBwb3J0ZWQpIGFuZCBhcmd1bWVudHNcbiAqIHRvIHByb3ZpZGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBicm9rZSBhbmQgd2hhdCB5b3Ugd2VyZVxuICogZXhwZWN0aW5nLlxuICpcbiAqIFRoZSBpbnZhcmlhbnQgbWVzc2FnZSB3aWxsIGJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24sIGJ1dCB0aGUgaW52YXJpYW50XG4gKiB3aWxsIHJlbWFpbiB0byBlbnN1cmUgbG9naWMgZG9lcyBub3QgZGlmZmVyIGluIHByb2R1Y3Rpb24uXG4gKi9cblxuZnVuY3Rpb24gaW52YXJpYW50KGNvbmRpdGlvbiwgZm9ybWF0LCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB2YXIgZXJyb3I7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcignTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcbiAgICAgIH0pKTtcbiAgICAgIGVycm9yLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgfVxuXG4gICAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxOyAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGludmFyaWFudCdzIG93biBmcmFtZVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpc05vZGVcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0geyp9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIG9iamVjdCBpcyBhIERPTSBub2RlLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGlzTm9kZShvYmplY3QpIHtcbiAgcmV0dXJuICEhKG9iamVjdCAmJiAodHlwZW9mIE5vZGUgPT09ICdmdW5jdGlvbicgPyBvYmplY3QgaW5zdGFuY2VvZiBOb2RlIDogdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9iamVjdC5ub2RlVHlwZSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIG9iamVjdC5ub2RlTmFtZSA9PT0gJ3N0cmluZycpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc05vZGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGlzVGV4dE5vZGVcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNOb2RlID0gcmVxdWlyZSgnLi9pc05vZGUnKTtcblxuLyoqXG4gKiBAcGFyYW0geyp9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIG9iamVjdCBpcyBhIERPTSB0ZXh0IG5vZGUuXG4gKi9cbmZ1bmN0aW9uIGlzVGV4dE5vZGUob2JqZWN0KSB7XG4gIHJldHVybiBpc05vZGUob2JqZWN0KSAmJiBvYmplY3Qubm9kZVR5cGUgPT0gMztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1RleHROb2RlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBrZXlNaXJyb3JcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnLi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGFuIGVudW1lcmF0aW9uIHdpdGgga2V5cyBlcXVhbCB0byB0aGVpciB2YWx1ZS5cbiAqXG4gKiBGb3IgZXhhbXBsZTpcbiAqXG4gKiAgIHZhciBDT0xPUlMgPSBrZXlNaXJyb3Ioe2JsdWU6IG51bGwsIHJlZDogbnVsbH0pO1xuICogICB2YXIgbXlDb2xvciA9IENPTE9SUy5ibHVlO1xuICogICB2YXIgaXNDb2xvclZhbGlkID0gISFDT0xPUlNbbXlDb2xvcl07XG4gKlxuICogVGhlIGxhc3QgbGluZSBjb3VsZCBub3QgYmUgcGVyZm9ybWVkIGlmIHRoZSB2YWx1ZXMgb2YgdGhlIGdlbmVyYXRlZCBlbnVtIHdlcmVcbiAqIG5vdCBlcXVhbCB0byB0aGVpciBrZXlzLlxuICpcbiAqICAgSW5wdXQ6ICB7a2V5MTogdmFsMSwga2V5MjogdmFsMn1cbiAqICAgT3V0cHV0OiB7a2V5MToga2V5MSwga2V5Mjoga2V5Mn1cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtvYmplY3R9XG4gKi9cbnZhciBrZXlNaXJyb3IgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciByZXQgPSB7fTtcbiAgdmFyIGtleTtcbiAgIShvYmogaW5zdGFuY2VvZiBPYmplY3QgJiYgIUFycmF5LmlzQXJyYXkob2JqKSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAna2V5TWlycm9yKC4uLik6IEFyZ3VtZW50IG11c3QgYmUgYW4gb2JqZWN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHJldFtrZXldID0ga2V5O1xuICB9XG4gIHJldHVybiByZXQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGtleU1pcnJvcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUga2V5T2ZcbiAqL1xuXG4vKipcbiAqIEFsbG93cyBleHRyYWN0aW9uIG9mIGEgbWluaWZpZWQga2V5LiBMZXQncyB0aGUgYnVpbGQgc3lzdGVtIG1pbmlmeSBrZXlzXG4gKiB3aXRob3V0IGxvc2luZyB0aGUgYWJpbGl0eSB0byBkeW5hbWljYWxseSB1c2Uga2V5IHN0cmluZ3MgYXMgdmFsdWVzXG4gKiB0aGVtc2VsdmVzLiBQYXNzIGluIGFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIGtleS92YWwgcGFpciBhbmQgaXQgd2lsbCByZXR1cm5cbiAqIHlvdSB0aGUgc3RyaW5nIGtleSBvZiB0aGF0IHNpbmdsZSByZWNvcmQuIFN1cHBvc2UgeW91IHdhbnQgdG8gZ3JhYiB0aGVcbiAqIHZhbHVlIGZvciBhIGtleSAnY2xhc3NOYW1lJyBpbnNpZGUgb2YgYW4gb2JqZWN0LiBLZXkvdmFsIG1pbmlmaWNhdGlvbiBtYXlcbiAqIGhhdmUgYWxpYXNlZCB0aGF0IGtleSB0byBiZSAneGExMicuIGtleU9mKHtjbGFzc05hbWU6IG51bGx9KSB3aWxsIHJldHVyblxuICogJ3hhMTInIGluIHRoYXQgY2FzZS4gUmVzb2x2ZSBrZXlzIHlvdSB3YW50IHRvIHVzZSBvbmNlIGF0IHN0YXJ0dXAgdGltZSwgdGhlblxuICogcmV1c2UgdGhvc2UgcmVzb2x1dGlvbnMuXG4gKi9cblwidXNlIHN0cmljdFwiO1xuXG52YXIga2V5T2YgPSBmdW5jdGlvbiAob25lS2V5T2JqKSB7XG4gIHZhciBrZXk7XG4gIGZvciAoa2V5IGluIG9uZUtleU9iaikge1xuICAgIGlmICghb25lS2V5T2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICByZXR1cm4ga2V5O1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBrZXlPZjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgbWFwT2JqZWN0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBwcm92aWRlZCBgY2FsbGJhY2tgIG9uY2UgZm9yIGVhY2ggZW51bWVyYWJsZSBvd24gcHJvcGVydHkgaW4gdGhlXG4gKiBvYmplY3QgYW5kIGNvbnN0cnVjdHMgYSBuZXcgb2JqZWN0IGZyb20gdGhlIHJlc3VsdHMuIFRoZSBgY2FsbGJhY2tgIGlzXG4gKiBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOlxuICpcbiAqICAtIHRoZSBwcm9wZXJ0eSB2YWx1ZVxuICogIC0gdGhlIHByb3BlcnR5IG5hbWVcbiAqICAtIHRoZSBvYmplY3QgYmVpbmcgdHJhdmVyc2VkXG4gKlxuICogUHJvcGVydGllcyB0aGF0IGFyZSBhZGRlZCBhZnRlciB0aGUgY2FsbCB0byBgbWFwT2JqZWN0YCB3aWxsIG5vdCBiZSB2aXNpdGVkXG4gKiBieSBgY2FsbGJhY2tgLiBJZiB0aGUgdmFsdWVzIG9mIGV4aXN0aW5nIHByb3BlcnRpZXMgYXJlIGNoYW5nZWQsIHRoZSB2YWx1ZVxuICogcGFzc2VkIHRvIGBjYWxsYmFja2Agd2lsbCBiZSB0aGUgdmFsdWUgYXQgdGhlIHRpbWUgYG1hcE9iamVjdGAgdmlzaXRzIHRoZW0uXG4gKiBQcm9wZXJ0aWVzIHRoYXQgYXJlIGRlbGV0ZWQgYmVmb3JlIGJlaW5nIHZpc2l0ZWQgYXJlIG5vdCB2aXNpdGVkLlxuICpcbiAqIEBncmVwIGZ1bmN0aW9uIG9iamVjdE1hcCgpXG4gKiBAZ3JlcCBmdW5jdGlvbiBvYmpNYXAoKVxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gb2JqZWN0XG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHsqfSBjb250ZXh0XG4gKiBAcmV0dXJuIHs/b2JqZWN0fVxuICovXG5mdW5jdGlvbiBtYXBPYmplY3Qob2JqZWN0LCBjYWxsYmFjaywgY29udGV4dCkge1xuICBpZiAoIW9iamVjdCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgZm9yICh2YXIgbmFtZSBpbiBvYmplY3QpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIG5hbWUpKSB7XG4gICAgICByZXN1bHRbbmFtZV0gPSBjYWxsYmFjay5jYWxsKGNvbnRleHQsIG9iamVjdFtuYW1lXSwgbmFtZSwgb2JqZWN0KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXBPYmplY3Q7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIG1lbW9pemVTdHJpbmdPbmx5XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBNZW1vaXplcyB0aGUgcmV0dXJuIHZhbHVlIG9mIGEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIG9uZSBzdHJpbmcgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4ge2Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBtZW1vaXplU3RyaW5nT25seShjYWxsYmFjaykge1xuICB2YXIgY2FjaGUgPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICBpZiAoIWNhY2hlLmhhc093blByb3BlcnR5KHN0cmluZykpIHtcbiAgICAgIGNhY2hlW3N0cmluZ10gPSBjYWxsYmFjay5jYWxsKHRoaXMsIHN0cmluZyk7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZVtzdHJpbmddO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1lbW9pemVTdHJpbmdPbmx5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBzaGFsbG93RXF1YWxcbiAqIEB0eXBlY2hlY2tzXG4gKiBcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogUGVyZm9ybXMgZXF1YWxpdHkgYnkgaXRlcmF0aW5nIHRocm91Z2gga2V5cyBvbiBhbiBvYmplY3QgYW5kIHJldHVybmluZyBmYWxzZVxuICogd2hlbiBhbnkga2V5IGhhcyB2YWx1ZXMgd2hpY2ggYXJlIG5vdCBzdHJpY3RseSBlcXVhbCBiZXR3ZWVuIHRoZSBhcmd1bWVudHMuXG4gKiBSZXR1cm5zIHRydWUgd2hlbiB0aGUgdmFsdWVzIG9mIGFsbCBrZXlzIGFyZSBzdHJpY3RseSBlcXVhbC5cbiAqL1xuZnVuY3Rpb24gc2hhbGxvd0VxdWFsKG9iakEsIG9iakIpIHtcbiAgaWYgKG9iakEgPT09IG9iakIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygb2JqQSAhPT0gJ29iamVjdCcgfHwgb2JqQSA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqQiAhPT0gJ29iamVjdCcgfHwgb2JqQiA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBrZXlzQSA9IE9iamVjdC5rZXlzKG9iakEpO1xuICB2YXIga2V5c0IgPSBPYmplY3Qua2V5cyhvYmpCKTtcblxuICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBUZXN0IGZvciBBJ3Mga2V5cyBkaWZmZXJlbnQgZnJvbSBCLlxuICB2YXIgYkhhc093blByb3BlcnR5ID0gaGFzT3duUHJvcGVydHkuYmluZChvYmpCKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzQS5sZW5ndGg7IGkrKykge1xuICAgIGlmICghYkhhc093blByb3BlcnR5KGtleXNBW2ldKSB8fCBvYmpBW2tleXNBW2ldXSAhPT0gb2JqQltrZXlzQVtpXV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzaGFsbG93RXF1YWw7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHRvQXJyYXlcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnLi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBDb252ZXJ0IGFycmF5LWxpa2Ugb2JqZWN0cyB0byBhcnJheXMuXG4gKlxuICogVGhpcyBBUEkgYXNzdW1lcyB0aGUgY2FsbGVyIGtub3dzIHRoZSBjb250ZW50cyBvZiB0aGUgZGF0YSB0eXBlLiBGb3IgbGVzc1xuICogd2VsbCBkZWZpbmVkIGlucHV0cyB1c2UgY3JlYXRlQXJyYXlGcm9tTWl4ZWQuXG4gKlxuICogQHBhcmFtIHtvYmplY3R8ZnVuY3Rpb258ZmlsZWxpc3R9IG9ialxuICogQHJldHVybiB7YXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHRvQXJyYXkob2JqKSB7XG4gIHZhciBsZW5ndGggPSBvYmoubGVuZ3RoO1xuXG4gIC8vIFNvbWUgYnJvd3NlIGJ1aWx0aW4gb2JqZWN0cyBjYW4gcmVwb3J0IHR5cGVvZiAnZnVuY3Rpb24nIChlLmcuIE5vZGVMaXN0IGluXG4gIC8vIG9sZCB2ZXJzaW9ucyBvZiBTYWZhcmkpLlxuICAhKCFBcnJheS5pc0FycmF5KG9iaikgJiYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnIHx8IHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0b0FycmF5OiBBcnJheS1saWtlIG9iamVjdCBleHBlY3RlZCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAhKHR5cGVvZiBsZW5ndGggPT09ICdudW1iZXInKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0b0FycmF5OiBPYmplY3QgbmVlZHMgYSBsZW5ndGggcHJvcGVydHknKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgIShsZW5ndGggPT09IDAgfHwgbGVuZ3RoIC0gMSBpbiBvYmopID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RvQXJyYXk6IE9iamVjdCBzaG91bGQgaGF2ZSBrZXlzIGZvciBpbmRpY2VzJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIC8vIE9sZCBJRSBkb2Vzbid0IGdpdmUgY29sbGVjdGlvbnMgYWNjZXNzIHRvIGhhc093blByb3BlcnR5LiBBc3N1bWUgaW5wdXRzXG4gIC8vIHdpdGhvdXQgbWV0aG9kIHdpbGwgdGhyb3cgZHVyaW5nIHRoZSBzbGljZSBjYWxsIGFuZCBza2lwIHN0cmFpZ2h0IHRvIHRoZVxuICAvLyBmYWxsYmFjay5cbiAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwob2JqKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJRSA8IDkgZG9lcyBub3Qgc3VwcG9ydCBBcnJheSNzbGljZSBvbiBjb2xsZWN0aW9ucyBvYmplY3RzXG4gICAgfVxuICB9XG5cbiAgLy8gRmFsbCBiYWNrIHRvIGNvcHlpbmcga2V5IGJ5IGtleS4gVGhpcyBhc3N1bWVzIGFsbCBrZXlzIGhhdmUgYSB2YWx1ZSxcbiAgLy8gc28gd2lsbCBub3QgcHJlc2VydmUgc3BhcnNlbHkgcG9wdWxhdGVkIGlucHV0cy5cbiAgdmFyIHJldCA9IEFycmF5KGxlbmd0aCk7XG4gIGZvciAodmFyIGlpID0gMDsgaWkgPCBsZW5ndGg7IGlpKyspIHtcbiAgICByZXRbaWldID0gb2JqW2lpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvQXJyYXk7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHdhcm5pbmdcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9lbXB0eUZ1bmN0aW9uJyk7XG5cbi8qKlxuICogU2ltaWxhciB0byBpbnZhcmlhbnQgYnV0IG9ubHkgbG9ncyBhIHdhcm5pbmcgaWYgdGhlIGNvbmRpdGlvbiBpcyBub3QgbWV0LlxuICogVGhpcyBjYW4gYmUgdXNlZCB0byBsb2cgaXNzdWVzIGluIGRldmVsb3BtZW50IGVudmlyb25tZW50cyBpbiBjcml0aWNhbFxuICogcGF0aHMuIFJlbW92aW5nIHRoZSBsb2dnaW5nIGNvZGUgZm9yIHByb2R1Y3Rpb24gZW52aXJvbm1lbnRzIHdpbGwga2VlcCB0aGVcbiAqIHNhbWUgbG9naWMgYW5kIGZvbGxvdyB0aGUgc2FtZSBjb2RlIHBhdGhzLlxuICovXG5cbnZhciB3YXJuaW5nID0gZW1wdHlGdW5jdGlvbjtcblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgd2FybmluZyA9IGZ1bmN0aW9uIChjb25kaXRpb24sIGZvcm1hdCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDIgPyBfbGVuIC0gMiA6IDApLCBfa2V5ID0gMjsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5IC0gMl0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2B3YXJuaW5nKGNvbmRpdGlvbiwgZm9ybWF0LCAuLi5hcmdzKWAgcmVxdWlyZXMgYSB3YXJuaW5nICcgKyAnbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cblxuICAgIGlmIChmb3JtYXQuaW5kZXhPZignRmFpbGVkIENvbXBvc2l0ZSBwcm9wVHlwZTogJykgPT09IDApIHtcbiAgICAgIHJldHVybjsgLy8gSWdub3JlIENvbXBvc2l0ZUNvbXBvbmVudCBwcm9wdHlwZSBjaGVjay5cbiAgICB9XG5cbiAgICBpZiAoIWNvbmRpdGlvbikge1xuICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICAgIHZhciBtZXNzYWdlID0gJ1dhcm5pbmc6ICcgKyBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gLS0tIFdlbGNvbWUgdG8gZGVidWdnaW5nIFJlYWN0IC0tLVxuICAgICAgICAvLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IHlvdSBjYW4gdXNlIHRoaXMgc3RhY2tcbiAgICAgICAgLy8gdG8gZmluZCB0aGUgY2FsbHNpdGUgdGhhdCBjYXVzZWQgdGhpcyB3YXJuaW5nIHRvIGZpcmUuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAgIH0gY2F0Y2ggKHgpIHt9XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHdhcm5pbmc7IiwiZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG1cbiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBuQml0cyA9IC03XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG4gIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cbiAgaSArPSBkXG5cbiAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgcyA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gZUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gZSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIGUgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IG1MZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBpZiAoZSA9PT0gMCkge1xuICAgIGUgPSAxIC0gZUJpYXNcbiAgfSBlbHNlIGlmIChlID09PSBlTWF4KSB7XG4gICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG4gIH0gZWxzZSB7XG4gICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKVxuICAgIGUgPSBlIC0gZUJpYXNcbiAgfVxuICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKVxufVxuXG5leHBvcnRzLndyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG4gIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG4gIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuICAgIGUgPSBlTWF4XG4gIH0gZWxzZSB7XG4gICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tXG4gICAgICBjICo9IDJcbiAgICB9XG4gICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICB2YWx1ZSArPSBydCAvIGNcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrXG4gICAgICBjIC89IDJcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwXG4gICAgICBlID0gZU1heFxuICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IGUgKyBlQmlhc1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSAwXG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtXG4gIGVMZW4gKz0gbUxlblxuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG59XG4iLCJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xufTtcbiIsIiFmdW5jdGlvbihhKXt2YXIgYj10aGlzO1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWEoYixyZXF1aXJlKFwiamRhdGF2aWV3XCIpKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpkYXRhdmlld1wiXSxmdW5jdGlvbihjKXtyZXR1cm4gYShiLGMpfSk6Yi5qQmluYXJ5PWEoYixiLmpEYXRhVmlldyl9KGZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBiJiZhIGluc3RhbmNlb2YgYn1mdW5jdGlvbiBkKGEpe2Zvcih2YXIgYj0xLGM9YXJndW1lbnRzLmxlbmd0aDtjPmI7KytiKXt2YXIgZD1hcmd1bWVudHNbYl07Zm9yKHZhciBlIGluIGQpdm9pZCAwIT09ZFtlXSYmKGFbZV09ZFtlXSl9cmV0dXJuIGF9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYXJndW1lbnRzWzBdPW0oYSksZC5hcHBseShudWxsLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZihhLGIsZCl7cmV0dXJuIGMoZCxGdW5jdGlvbik/ZC5jYWxsKGEsYi5jb250ZXh0c1swXSk6ZH1mdW5jdGlvbiBnKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPWFyZ3VtZW50cyxkPWIubGVuZ3RoLTEsZT1hLmxlbmd0aC0xLGY9YltkXTtpZihiLmxlbmd0aD1lKzEsIWMoZixGdW5jdGlvbikpe3ZhciBnPXRoaXM7cmV0dXJuIG5ldyBsKGZ1bmN0aW9uKGMsZCl7YltlXT1mdW5jdGlvbihhLGIpe3JldHVybiBhP2QoYSk6YyhiKX0sYS5hcHBseShnLGIpfSl9YltkXT12b2lkIDAsYltlXT1mLGEuYXBwbHkodGhpcyxiKX19ZnVuY3Rpb24gaChhLGQpe3JldHVybiBjKGEsaCk/YS5hcyhkKTooYyhhLGIpfHwoYT1uZXcgYihhLHZvaWQgMCx2b2lkIDAsZD9kW1wiakJpbmFyeS5saXR0bGVFbmRpYW5cIl06dm9pZCAwKSksYyh0aGlzLGgpPyh0aGlzLnZpZXc9YSx0aGlzLnZpZXcuc2VlaygwKSx0aGlzLmNvbnRleHRzPVtdLHRoaXMuYXMoZCwhMCkpOm5ldyBoKGEsZCkpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGUoaS5wcm90b3R5cGUsYSl9ZnVuY3Rpb24gaihhKXtyZXR1cm4gZShqLnByb3RvdHlwZSxhLHtjcmVhdGVQcm9wZXJ0eTpmdW5jdGlvbigpe3ZhciBiPShhLmNyZWF0ZVByb3BlcnR5fHxqLnByb3RvdHlwZS5jcmVhdGVQcm9wZXJ0eSkuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBiLmdldEJhc2VUeXBlJiYoYi5iYXNlVHlwZT1iLmJpbmFyeS5nZXRUeXBlKGIuZ2V0QmFzZVR5cGUoYi5iaW5hcnkuY29udGV4dHNbMF0pKSksYn19KX12YXIgaz1hLmRvY3VtZW50O1wiYXRvYlwiaW4gYSYmXCJidG9hXCJpbiBhfHwhZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGEpe3ZhciBiLGMsZSxmLGcsaDtmb3IoZT1hLmxlbmd0aCxjPTAsYj1cIlwiO2U+Yzspe2lmKGY9MjU1JmEuY2hhckNvZGVBdChjKyspLGM9PWUpe2IrPWQuY2hhckF0KGY+PjIpLGIrPWQuY2hhckF0KCgzJmYpPDw0KSxiKz1cIj09XCI7YnJlYWt9aWYoZz1hLmNoYXJDb2RlQXQoYysrKSxjPT1lKXtiKz1kLmNoYXJBdChmPj4yKSxiKz1kLmNoYXJBdCgoMyZmKTw8NHwoMjQwJmcpPj40KSxiKz1kLmNoYXJBdCgoMTUmZyk8PDIpLGIrPVwiPVwiO2JyZWFrfWg9YS5jaGFyQ29kZUF0KGMrKyksYis9ZC5jaGFyQXQoZj4+MiksYis9ZC5jaGFyQXQoKDMmZik8PDR8KDI0MCZnKT4+NCksYis9ZC5jaGFyQXQoKDE1JmcpPDwyfCgxOTImaCk+PjYpLGIrPWQuY2hhckF0KDYzJmgpfXJldHVybiBifWZ1bmN0aW9uIGMoYSl7dmFyIGIsYyxkLGYsZyxoLGk7Zm9yKGg9YS5sZW5ndGgsZz0wLGk9XCJcIjtoPmc7KXtkbyBiPWVbMjU1JmEuY2hhckNvZGVBdChnKyspXTt3aGlsZShoPmcmJi0xPT1iKTtpZigtMT09YilicmVhaztkbyBjPWVbMjU1JmEuY2hhckNvZGVBdChnKyspXTt3aGlsZShoPmcmJi0xPT1jKTtpZigtMT09YylicmVhaztpKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGI8PDJ8KDQ4JmMpPj40KTtkb3tpZihkPTI1NSZhLmNoYXJDb2RlQXQoZysrKSw2MT09ZClyZXR1cm4gaTtkPWVbZF19d2hpbGUoaD5nJiYtMT09ZCk7aWYoLTE9PWQpYnJlYWs7aSs9U3RyaW5nLmZyb21DaGFyQ29kZSgoMTUmYyk8PDR8KDYwJmQpPj4yKTtkb3tpZihmPTI1NSZhLmNoYXJDb2RlQXQoZysrKSw2MT09ZilyZXR1cm4gaTtmPWVbZl19d2hpbGUoaD5nJiYtMT09Zik7aWYoLTE9PWYpYnJlYWs7aSs9U3RyaW5nLmZyb21DaGFyQ29kZSgoMyZkKTw8NnxmKX1yZXR1cm4gaX12YXIgZD1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIixlPVstMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSw2MiwtMSwtMSwtMSw2Myw1Miw1Myw1NCw1NSw1Niw1Nyw1OCw1OSw2MCw2MSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwwLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LC0xLC0xLC0xLC0xLC0xLC0xLDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM0LDM1LDM2LDM3LDM4LDM5LDQwLDQxLDQyLDQzLDQ0LDQ1LDQ2LDQ3LDQ4LDQ5LDUwLDUxLC0xLC0xLC0xLC0xLC0xXTthLmJ0b2F8fChhLmJ0b2E9YiksYS5hdG9ifHwoYS5hdG9iPWMpfSgpO3ZhciBsPWEuUHJvbWlzZXx8ZnVuY3Rpb24oYSl7dGhpcy50aGVuPWF9LG09T2JqZWN0LmNyZWF0ZTttfHwobT1mdW5jdGlvbihhKXt2YXIgYj1mdW5jdGlvbigpe307cmV0dXJuIGIucHJvdG90eXBlPWEsbmV3IGJ9KTt2YXIgbj1oLnByb3RvdHlwZSxvPW4udHlwZVNldD17fTtuLnRvVmFsdWU9ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcyx0aGlzLGEpfSxuLl9uYW1lZD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEuZGlzcGxheU5hbWU9YitcIiBAIFwiKyh2b2lkIDAhPT1jP2M6dGhpcy52aWV3LnRlbGwoKSksYX07dmFyIHA9T2JqZWN0LmRlZmluZVByb3BlcnR5O2lmKHApdHJ5e3Aoe30sXCJ4XCIse30pfWNhdGNoKHEpe3A9dm9pZCAwfWVsc2UgcD1mdW5jdGlvbihhLGIsYyxkKXtkJiYoYVtiXT1jLnZhbHVlKX07dmFyIHI9XCJqQmluYXJ5LkNhY2hlXCIscz0wO24uX2dldENhY2hlZD1mdW5jdGlvbihhLGIsYyl7aWYoYS5oYXNPd25Qcm9wZXJ0eSh0aGlzLmNhY2hlS2V5KSlyZXR1cm4gYVt0aGlzLmNhY2hlS2V5XTt2YXIgZD1iLmNhbGwodGhpcyxhKTtyZXR1cm4gcChhLHRoaXMuY2FjaGVLZXkse3ZhbHVlOmR9LGMpLGR9LG4uZ2V0Q29udGV4dD1mdW5jdGlvbihhKXtzd2l0Y2godHlwZW9mIGEpe2Nhc2VcInVuZGVmaW5lZFwiOmE9MDtjYXNlXCJudW1iZXJcIjpyZXR1cm4gdGhpcy5jb250ZXh0c1thXTtjYXNlXCJzdHJpbmdcIjpyZXR1cm4gdGhpcy5nZXRDb250ZXh0KGZ1bmN0aW9uKGIpe3JldHVybiBhIGluIGJ9KTtjYXNlXCJmdW5jdGlvblwiOmZvcih2YXIgYj0wLGM9dGhpcy5jb250ZXh0cy5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9dGhpcy5jb250ZXh0c1tiXTtpZihhLmNhbGwodGhpcyxkKSlyZXR1cm4gZH19fSxuLmluQ29udGV4dD1mdW5jdGlvbihhLGIpe3RoaXMuY29udGV4dHMudW5zaGlmdChhKTt2YXIgYz1iLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMuY29udGV4dHMuc2hpZnQoKSxjfSxpLnByb3RvdHlwZT17aW5oZXJpdDpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiKXt2YXIgYz1mW2FdO2MmJihkfHwoZD1lKGYpKSxiLmNhbGwoZCxjKSxkW2FdPW51bGwpfXZhciBkLGY9dGhpcztyZXR1cm4gYyhcInBhcmFtc1wiLGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl0aGlzW2JbY11dPWFbY119KSxjKFwic2V0UGFyYW1zXCIsZnVuY3Rpb24oYil7Yi5hcHBseSh0aGlzLGEpfSksYyhcInR5cGVQYXJhbXNcIixmdW5jdGlvbihhKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspe3ZhciBlPWFbY10sZj10aGlzW2VdO2YmJih0aGlzW2VdPWIoZikpfX0pLGMoXCJyZXNvbHZlXCIsZnVuY3Rpb24oYSl7YS5jYWxsKHRoaXMsYil9KSxkfHxmfSxjcmVhdGVQcm9wZXJ0eTpmdW5jdGlvbihhKXtyZXR1cm4gZSh0aGlzLHtiaW5hcnk6YSx2aWV3OmEudmlld30pfSx0b1ZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIhPT0hMSYmXCJzdHJpbmdcIj09dHlwZW9mIGE/dGhpcy5iaW5hcnkuZ2V0Q29udGV4dChhKVthXTpmKHRoaXMsdGhpcy5iaW5hcnksYSl9fSxoLlR5cGU9aSxqLnByb3RvdHlwZT1lKGkucHJvdG90eXBlLHtzZXRQYXJhbXM6ZnVuY3Rpb24oKXt0aGlzLmJhc2VUeXBlJiYodGhpcy50eXBlUGFyYW1zPVtcImJhc2VUeXBlXCJdLmNvbmNhdCh0aGlzLnR5cGVQYXJhbXN8fFtdKSl9LGJhc2VSZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmluYXJ5LnJlYWQodGhpcy5iYXNlVHlwZSl9LGJhc2VXcml0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5iaW5hcnkud3JpdGUodGhpcy5iYXNlVHlwZSxhKX19KSxkKGoucHJvdG90eXBlLHtyZWFkOmoucHJvdG90eXBlLmJhc2VSZWFkLHdyaXRlOmoucHJvdG90eXBlLmJhc2VXcml0ZX0pLGguVGVtcGxhdGU9aixuLmFzPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yj90aGlzOmUodGhpcyk7cmV0dXJuIGE9YXx8byxjLnR5cGVTZXQ9YT09PW98fG8uaXNQcm90b3R5cGVPZihhKT9hOmUobyxhKSxjLmNhY2hlS2V5PXIsYy5jYWNoZUtleT1jLl9nZXRDYWNoZWQoYSxmdW5jdGlvbigpe3JldHVybiByK1wiLlwiKyArK3N9LCEwKSxjfSxuLnNlZWs9ZnVuY3Rpb24oYSxiKXtpZihhPXRoaXMudG9WYWx1ZShhKSx2b2lkIDAhPT1iKXt2YXIgYz10aGlzLnZpZXcudGVsbCgpO3RoaXMudmlldy5zZWVrKGEpO3ZhciBkPWIuY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy52aWV3LnNlZWsoYyksZH1yZXR1cm4gdGhpcy52aWV3LnNlZWsoYSl9LG4udGVsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcudGVsbCgpfSxuLnNraXA9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5zZWVrKHRoaXMudGVsbCgpK3RoaXMudG9WYWx1ZShhKSxiKX0sbi5zbGljZT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIG5ldyBoKHRoaXMudmlldy5zbGljZShhLGIsYyksdGhpcy50eXBlU2V0KX0sbi5fZ2V0VHlwZT1mdW5jdGlvbihhLGIpe3N3aXRjaCh0eXBlb2YgYSl7Y2FzZVwic3RyaW5nXCI6aWYoIShhIGluIHRoaXMudHlwZVNldCkpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwiVW5rbm93biB0eXBlOiBcIithKTtyZXR1cm4gdGhpcy5fZ2V0VHlwZSh0aGlzLnR5cGVTZXRbYV0sYik7Y2FzZVwibnVtYmVyXCI6cmV0dXJuIHRoaXMuX2dldFR5cGUoby5iaXRmaWVsZCxbYV0pO2Nhc2VcIm9iamVjdFwiOmlmKGMoYSxpKSl7dmFyIGQ9dGhpcztyZXR1cm4gYS5pbmhlcml0KGJ8fFtdLGZ1bmN0aW9uKGEpe3JldHVybiBkLmdldFR5cGUoYSl9KX1yZXR1cm4gYyhhLEFycmF5KT90aGlzLl9nZXRDYWNoZWQoYSxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRUeXBlKGFbMF0sYS5zbGljZSgxKSl9LCEwKTp0aGlzLl9nZXRDYWNoZWQoYSxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRUeXBlKG8ub2JqZWN0LFthXSl9LCExKX19LG4uZ2V0VHlwZT1mdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMuX2dldFR5cGUoYSxiKTtyZXR1cm4gZCYmIWMoYSxpKSYmKGQubmFtZT1cIm9iamVjdFwiPT10eXBlb2YgYT9jKGEsQXJyYXkpP2FbMF0rXCIoXCIrYS5zbGljZSgxKS5qb2luKFwiLCBcIikrXCIpXCI6XCJvYmplY3RcIjpTdHJpbmcoYSkpLGR9LG4uX2FjdGlvbj1mdW5jdGlvbihhLGIsYyl7aWYodm9pZCAwIT09YSl7YT10aGlzLmdldFR5cGUoYSk7dmFyIGQ9dGhpcy5fbmFtZWQoZnVuY3Rpb24oKXtyZXR1cm4gYy5jYWxsKHRoaXMsYS5jcmVhdGVQcm9wZXJ0eSh0aGlzKSx0aGlzLmNvbnRleHRzWzBdKX0sXCJbXCIrYS5uYW1lK1wiXVwiLGIpO3JldHVybiB2b2lkIDAhPT1iP3RoaXMuc2VlayhiLGQpOmQuY2FsbCh0aGlzKX19LG4ucmVhZD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLl9hY3Rpb24oYSxiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEucmVhZChiKX0pfSxuLnJlYWRBbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkKFwiakJpbmFyeS5hbGxcIiwwKX0sbi53cml0ZT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMuX2FjdGlvbihhLGMsZnVuY3Rpb24oYSxjKXt2YXIgZD10aGlzLnRlbGwoKTtyZXR1cm4gYS53cml0ZShiLGMpLHRoaXMudGVsbCgpLWR9KX0sbi53cml0ZUFsbD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53cml0ZShcImpCaW5hcnkuYWxsXCIsYSwwKX0sZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2Q+YztjKyspe3ZhciBmPWJbY107b1tmLnRvTG93ZXJDYXNlKCldPWUoYSx7ZGF0YVR5cGU6Zn0pfX0oaSh7cGFyYW1zOltcImxpdHRsZUVuZGlhblwiXSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlld1tcImdldFwiK3RoaXMuZGF0YVR5cGVdKHZvaWQgMCx0aGlzLmxpdHRsZUVuZGlhbil9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMudmlld1tcIndyaXRlXCIrdGhpcy5kYXRhVHlwZV0oYSx0aGlzLmxpdHRsZUVuZGlhbil9fSksW1wiVWludDhcIixcIlVpbnQxNlwiLFwiVWludDMyXCIsXCJVaW50NjRcIixcIkludDhcIixcIkludDE2XCIsXCJJbnQzMlwiLFwiSW50NjRcIixcIkZsb2F0MzJcIixcIkZsb2F0NjRcIixcIkNoYXJcIl0pLGQobyx7XCJieXRlXCI6by51aW50OCxcImZsb2F0XCI6by5mbG9hdDMyLFwiZG91YmxlXCI6by5mbG9hdDY0fSksby5hcnJheT1qKHtwYXJhbXM6W1wiYmFzZVR5cGVcIixcImxlbmd0aFwiXSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50b1ZhbHVlKHRoaXMubGVuZ3RoKTtpZih0aGlzLmJhc2VUeXBlPT09by51aW50OClyZXR1cm4gdGhpcy52aWV3LmdldEJ5dGVzKGEsdm9pZCAwLCEwLCEwKTt2YXIgYjtpZih2b2lkIDAhPT1hKXtiPW5ldyBBcnJheShhKTtmb3IodmFyIGM9MDthPmM7YysrKWJbY109dGhpcy5iYXNlUmVhZCgpfWVsc2V7dmFyIGQ9dGhpcy52aWV3LmJ5dGVMZW5ndGg7Zm9yKGI9W107dGhpcy5iaW5hcnkudGVsbCgpPGQ7KWIucHVzaCh0aGlzLmJhc2VSZWFkKCkpfXJldHVybiBifSx3cml0ZTpmdW5jdGlvbihhKXtpZih0aGlzLmJhc2VUeXBlPT09by51aW50OClyZXR1cm4gdGhpcy52aWV3LndyaXRlQnl0ZXMoYSk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtjPmI7YisrKXRoaXMuYmFzZVdyaXRlKGFbYl0pfX0pLG8uYmluYXJ5PWooe3BhcmFtczpbXCJsZW5ndGhcIixcInR5cGVTZXRcIl0scmVhZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYmluYXJ5LnRlbGwoKSxiPXRoaXMuYmluYXJ5LnNraXAodGhpcy50b1ZhbHVlKHRoaXMubGVuZ3RoKSksYz10aGlzLnZpZXcuc2xpY2UoYSxiKTtyZXR1cm4gbmV3IGgoYyx0aGlzLnR5cGVTZXQpfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLmJpbmFyeS53cml0ZShcImJsb2JcIixhLnJlYWQoXCJibG9iXCIsMCkpfX0pLG8uYml0ZmllbGQ9aSh7cGFyYW1zOltcImJpdFNpemVcIl0scmVhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcuZ2V0VW5zaWduZWQodGhpcy5iaXRTaXplKX0sd3JpdGU6ZnVuY3Rpb24oYSl7dGhpcy52aWV3LndyaXRlVW5zaWduZWQoYSx0aGlzLmJpdFNpemUpfX0pLG8uYmxvYj1pKHtwYXJhbXM6W1wibGVuZ3RoXCJdLHJlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3LmdldEJ5dGVzKHRoaXMudG9WYWx1ZSh0aGlzLmxlbmd0aCkpfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLnZpZXcud3JpdGVCeXRlcyhhLCEwKX19KSxvW1wiY29uc3RcIl09aih7cGFyYW1zOltcImJhc2VUeXBlXCIsXCJ2YWx1ZVwiLFwic3RyaWN0XCJdLHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJhc2VSZWFkKCk7aWYodGhpcy5zdHJpY3QmJmEhPT10aGlzLnZhbHVlKXtpZihjKHRoaXMuc3RyaWN0LEZ1bmN0aW9uKSlyZXR1cm4gdGhpcy5zdHJpY3QoYSk7dGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuZXhwZWN0ZWQgdmFsdWUgKFwiK2ErXCIgIT09IFwiK3RoaXMudmFsdWUrXCIpLlwiKX1yZXR1cm4gYX0sd3JpdGU6ZnVuY3Rpb24oYSl7dGhpcy5iYXNlV3JpdGUodGhpcy5zdHJpY3R8fHZvaWQgMD09PWE/dGhpcy52YWx1ZTphKX19KSxvW1wiZW51bVwiXT1qKHtwYXJhbXM6W1wiYmFzZVR5cGVcIixcIm1hdGNoZXNcIl0sc2V0UGFyYW1zOmZ1bmN0aW9uKGEsYil7dGhpcy5iYWNrTWF0Y2hlcz17fTtmb3IodmFyIGMgaW4gYil0aGlzLmJhY2tNYXRjaGVzW2JbY11dPWN9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJhc2VSZWFkKCk7cmV0dXJuIGEgaW4gdGhpcy5tYXRjaGVzP3RoaXMubWF0Y2hlc1thXTphfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLmJhc2VXcml0ZShhIGluIHRoaXMuYmFja01hdGNoZXM/dGhpcy5iYWNrTWF0Y2hlc1thXTphKX19KSxvLmV4dGVuZD1pKHtzZXRQYXJhbXM6ZnVuY3Rpb24oKXt0aGlzLnBhcnRzPWFyZ3VtZW50c30scmVzb2x2ZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5wYXJ0cyxjPWIubGVuZ3RoLGQ9bmV3IEFycmF5KGMpLGU9MDtjPmU7ZSsrKWRbZV09YShiW2VdKTt0aGlzLnBhcnRzPWR9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhcnRzLGI9dGhpcy5iaW5hcnkucmVhZChhWzBdKTtyZXR1cm4gdGhpcy5iaW5hcnkuaW5Db250ZXh0KGIsZnVuY3Rpb24oKXtmb3IodmFyIGM9MSxlPWEubGVuZ3RoO2U+YztjKyspZChiLHRoaXMucmVhZChhW2NdKSl9KSxifSx3cml0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBhcnRzO3RoaXMuYmluYXJ5LmluQ29udGV4dChhLGZ1bmN0aW9uKCl7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aDtkPmM7YysrKXRoaXMud3JpdGUoYltjXSxhKX0pfX0pLG9bXCJpZlwiXT1qKHtwYXJhbXM6W1wiY29uZGl0aW9uXCIsXCJ0cnVlVHlwZVwiLFwiZmFsc2VUeXBlXCJdLHR5cGVQYXJhbXM6W1widHJ1ZVR5cGVcIixcImZhbHNlVHlwZVwiXSxnZXRCYXNlVHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvVmFsdWUodGhpcy5jb25kaXRpb24pP3RoaXMudHJ1ZVR5cGU6dGhpcy5mYWxzZVR5cGV9fSksby5pZl9ub3Q9by5pZk5vdD1qKHtzZXRQYXJhbXM6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYmFzZVR5cGU9W1wiaWZcIixhLGMsYl19fSksby5sYXp5PWooe21hcmtlcjpcImpCaW5hcnkuTGF6eVwiLHBhcmFtczpbXCJpbm5lclR5cGVcIixcImxlbmd0aFwiXSxnZXRCYXNlVHlwZTpmdW5jdGlvbigpe3JldHVybltcImJpbmFyeVwiLHRoaXMubGVuZ3RoLHRoaXMuYmluYXJ5LnR5cGVTZXRdfSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYil7cmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP1widmFsdWVcImluIGE/YS52YWx1ZTphLnZhbHVlPWEuYmluYXJ5LnJlYWQoYS5pbm5lclR5cGUpOmQoYSx7d2FzQ2hhbmdlZDohMCx2YWx1ZTpifSkudmFsdWV9O3JldHVybiBhW3RoaXMubWFya2VyXT0hMCxkKGEse2JpbmFyeTpkKHRoaXMuYmFzZVJlYWQoKSx7Y29udGV4dHM6dGhpcy5iaW5hcnkuY29udGV4dHMuc2xpY2UoKX0pLGlubmVyVHlwZTp0aGlzLmlubmVyVHlwZX0pfSx3cml0ZTpmdW5jdGlvbihhKXthLndhc0NoYW5nZWR8fCFhW3RoaXMubWFya2VyXT90aGlzLmJpbmFyeS53cml0ZSh0aGlzLmlubmVyVHlwZSxhKCkpOnRoaXMuYmFzZVdyaXRlKGEuYmluYXJ5KX19KSxvLm9iamVjdD1pKHtwYXJhbXM6W1wic3RydWN0dXJlXCIsXCJwcm90b1wiXSxyZXNvbHZlOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2Zvcih2YXIgZCBpbiB0aGlzLnN0cnVjdHVyZSliW2RdPWModGhpcy5zdHJ1Y3R1cmVbZF0sRnVuY3Rpb24pP3RoaXMuc3RydWN0dXJlW2RdOmEodGhpcy5zdHJ1Y3R1cmVbZF0pO3RoaXMuc3RydWN0dXJlPWJ9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9dGhpcy5zdHJ1Y3R1cmUsZD10aGlzLnByb3RvP2UodGhpcy5wcm90byk6e307cmV0dXJuIHRoaXMuYmluYXJ5LmluQ29udGV4dChkLGZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIGIpdGhpcy5fbmFtZWQoZnVuY3Rpb24oKXt2YXIgZj1jKGJbZV0sRnVuY3Rpb24pP2JbZV0uY2FsbChhLGQpOnRoaXMucmVhZChiW2VdKTt2b2lkIDAhPT1mJiYoZFtlXT1mKX0sZSkuY2FsbCh0aGlzKX0pLGR9LHdyaXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsZD10aGlzLnN0cnVjdHVyZTt0aGlzLmJpbmFyeS5pbkNvbnRleHQoYSxmdW5jdGlvbigpe2Zvcih2YXIgZSBpbiBkKXRoaXMuX25hbWVkKGZ1bmN0aW9uKCl7YyhkW2VdLEZ1bmN0aW9uKT9hW2VdPWRbZV0uY2FsbChiLGEpOnRoaXMud3JpdGUoZFtlXSxhW2VdKX0sZSkuY2FsbCh0aGlzKX0pfX0pLG8uc2tpcD1pKHtwYXJhbXM6W1wibGVuZ3RoXCJdLHJlYWQ6ZnVuY3Rpb24oKXt0aGlzLnZpZXcuc2tpcCh0aGlzLnRvVmFsdWUodGhpcy5sZW5ndGgpKX0sd3JpdGU6ZnVuY3Rpb24oKXt0aGlzLnJlYWQoKX19KSxvLnN0cmluZz1qKHtwYXJhbXM6W1wibGVuZ3RoXCIsXCJlbmNvZGluZ1wiXSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlldy5nZXRTdHJpbmcodGhpcy50b1ZhbHVlKHRoaXMubGVuZ3RoKSx2b2lkIDAsdGhpcy5lbmNvZGluZyl9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMudmlldy53cml0ZVN0cmluZyhhLHRoaXMuZW5jb2RpbmcpfX0pLG8uc3RyaW5nMD1pKHtwYXJhbXM6W1wibGVuZ3RoXCIsXCJlbmNvZGluZ1wiXSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy52aWV3LGI9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09Yil7dmFyIGMsZD1hLnRlbGwoKSxlPTA7Zm9yKGI9YS5ieXRlTGVuZ3RoLWQ7Yj5lJiYoYz1hLmdldFVpbnQ4KCkpOyllKys7dmFyIGY9YS5nZXRTdHJpbmcoZSxkLHRoaXMuZW5jb2RpbmcpO3JldHVybiBiPmUmJmEuc2tpcCgxKSxmfXJldHVybiBhLmdldFN0cmluZyhiLHZvaWQgMCx0aGlzLmVuY29kaW5nKS5yZXBsYWNlKC9cXDAuKiQvLFwiXCIpfSx3cml0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnZpZXcsYz12b2lkIDA9PT10aGlzLmxlbmd0aD8xOnRoaXMubGVuZ3RoLWEubGVuZ3RoO2Iud3JpdGVTdHJpbmcoYSx2b2lkIDAsdGhpcy5lbmNvZGluZyksYz4wJiYoYi53cml0ZVVpbnQ4KDApLGIuc2tpcChjLTEpKX19KTtoLmxvYWREYXRhPWcoZnVuY3Rpb24oYixkKXt2YXIgZTtpZihjKGIsYS5CbG9iKSl7dmFyIGY7aWYoXCJGaWxlUmVhZGVyXCJpbiBhKWY9bmV3IEZpbGVSZWFkZXIsZi5vbmxvYWQ9Zi5vbmVycm9yPWZ1bmN0aW9uKCl7ZCh0aGlzLmVycm9yLHRoaXMucmVzdWx0KX0sZi5yZWFkQXNBcnJheUJ1ZmZlcihiKTtlbHNle2Y9bmV3IEZpbGVSZWFkZXJTeW5jO3ZhciBnLGg7dHJ5e2g9Zi5yZWFkQXNBcnJheUJ1ZmZlcihiKX1jYXRjaChpKXtnPWl9ZmluYWxseXtkKGcsaCl9fX1lbHNle2lmKFwic3RyaW5nXCIhPXR5cGVvZiBiKWQobmV3IFR5cGVFcnJvcihcIlVuc3VwcG9ydGVkIHNvdXJjZSB0eXBlLlwiKSk7ZWxzZSBpZihlPWIubWF0Y2goL15kYXRhOiguKz8pKDtiYXNlNjQpPywoLiopJC8pKXRyeXt2YXIgaj1lWzJdLGs9ZVszXTtkKG51bGwsKGo/YXRvYjpkZWNvZGVVUklDb21wb25lbnQpKGspKX1jYXRjaChpKXtkKGkpfWVsc2UgaWYoXCJYTUxIdHRwUmVxdWVzdFwiaW4gYSl7dmFyIGw9bmV3IFhNTEh0dHBSZXF1ZXN0O2wub3BlbihcIkdFVFwiLGIsITApLFwicmVzcG9uc2VUeXBlXCJpbiBsP2wucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIjpcIm92ZXJyaWRlTWltZVR5cGVcImluIGw/bC5vdmVycmlkZU1pbWVUeXBlKFwidGV4dC9wbGFpbjsgY2hhcnNldD14LXVzZXItZGVmaW5lZFwiKTpsLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHQtQ2hhcnNldFwiLFwieC11c2VyLWRlZmluZWRcIiksXCJvbmxvYWRcImluIGx8fChsLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT10aGlzLnJlYWR5U3RhdGUmJnRoaXMub25sb2FkKCl9KTt2YXIgbT1mdW5jdGlvbihhKXtkKG5ldyBFcnJvcihhKSl9O2wub25sb2FkPWZ1bmN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLnN0YXR1cyYmMjAwIT09dGhpcy5zdGF0dXM/bShcIkhUVFAgRXJyb3IgI1wiK3RoaXMuc3RhdHVzK1wiOiBcIit0aGlzLnN0YXR1c1RleHQpOihcInJlc3BvbnNlXCJpbiB0aGlzfHwodGhpcy5yZXNwb25zZT1uZXcgVkJBcnJheSh0aGlzLnJlc3BvbnNlQm9keSkudG9BcnJheSgpKSx2b2lkIGQobnVsbCx0aGlzLnJlc3BvbnNlKSl9LGwub25lcnJvcj1mdW5jdGlvbigpe20oXCJOZXR3b3JrIGVycm9yLlwiKX0sbC5zZW5kKG51bGwpfWVsc2UgZChuZXcgVHlwZUVycm9yKFwiVW5zdXBwb3J0ZWQgc291cmNlIHR5cGUuXCIpKX19KSxoLmxvYWQ9ZyhmdW5jdGlvbihhLGIsYyl7dmFyIGQ9aC5sb2FkRGF0YShhKTtoLmxvYWQuZ2V0VHlwZVNldChhLGIsZnVuY3Rpb24oYSl7ZC50aGVuKGZ1bmN0aW9uKGIpe2MobnVsbCxuZXcgaChiLGEpKX0sYyl9KX0pLGgubG9hZC5nZXRUeXBlU2V0PWZ1bmN0aW9uKGEsYixjKXtjKGIpfSxuLl90b1VSST1cIlVSTFwiaW4gYSYmXCJjcmVhdGVPYmplY3RVUkxcImluIFVSTD9mdW5jdGlvbihhKXt2YXIgYj10aGlzLnNlZWsoMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcuZ2V0Qnl0ZXMoKX0pO3JldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtiXSx7dHlwZTphfSkpfTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNlZWsoMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcuZ2V0U3RyaW5nKHZvaWQgMCx2b2lkIDAsXCJiaW5hcnlcIil9KTtyZXR1cm5cImRhdGE6XCIrYStcIjtiYXNlNjQsXCIrYnRvYShiKX0sbi5fbWltZVR5cGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGF8fHRoaXMudHlwZVNldFtcImpCaW5hcnkubWltZVR5cGVcIl18fFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCJ9LG4udG9VUkk9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3RvVVJJKHRoaXMuX21pbWVUeXBlKGEpKX07aWYoayl7dmFyIHQ9aC5kb3dubG9hZGVyPWsuY3JlYXRlRWxlbWVudChcImFcIik7dC5zdHlsZS5kaXNwbGF5PVwibm9uZVwifXJldHVybiBuLnNhdmVBcz1nKGZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYSl7XCJtc1NhdmVCbG9iXCJpbiBuYXZpZ2F0b3I/bmF2aWdhdG9yLm1zU2F2ZUJsb2IobmV3IEJsb2IoW3RoaXMucmVhZChcImJsb2JcIiwwKV0se3R5cGU6dGhpcy5fbWltZVR5cGUoYil9KSxhKTprPyh0LnBhcmVudE5vZGV8fGsuYm9keS5hcHBlbmRDaGlsZCh0KSx0LmhyZWY9dGhpcy50b1VSSShiKSx0LmRvd25sb2FkPWEsdC5jbGljaygpLHQuaHJlZj10LmRvd25sb2FkPVwiXCIpOmMobmV3IFR5cGVFcnJvcihcIlNhdmluZyBmcm9tIFdlYiBXb3JrZXIgaXMgbm90IHN1cHBvcnRlZC5cIikpLGMoKX1lbHNlIGMobmV3IFR5cGVFcnJvcihcIlVuc3VwcG9ydGVkIHN0b3JhZ2UgdHlwZS5cIikpfSksaH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9amJpbmFyeS5qcy5tYXAiLCIhZnVuY3Rpb24oZmFjdG9yeSkge1xuICAgIHZhciBnbG9iYWwgPSB0aGlzO1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShnbG9iYWwpO1xufShmdW5jdGlvbihnbG9iYWwpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBpcyhvYmosIEN0b3IpIHtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgIT0gdHlwZW9mIG9iaiB8fCBudWxsID09PSBvYmogPyAhMSA6IG9iai5jb25zdHJ1Y3RvciA9PT0gQ3RvciB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gXCJbb2JqZWN0IFwiICsgQ3Rvci5uYW1lICsgXCJdXCI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFycmF5RnJvbShhcnJheUxpa2UsIGZvcmNlQ29weSkge1xuICAgICAgICByZXR1cm4gIWZvcmNlQ29weSAmJiBpcyhhcnJheUxpa2UsIEFycmF5KSA/IGFycmF5TGlrZSA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycmF5TGlrZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlZmluZWQodmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB2YWx1ZSA/IHZhbHVlIDogZGVmYXVsdFZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBqRGF0YVZpZXcoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgaWYgKGpEYXRhVmlldy5pcyhidWZmZXIpKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gYnVmZmVyLnNsaWNlKGJ5dGVPZmZzZXQsIGJ5dGVPZmZzZXQgKyBieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuX2xpdHRsZUVuZGlhbiA9IGRlZmluZWQobGl0dGxlRW5kaWFuLCByZXN1bHQuX2xpdHRsZUVuZGlhbiksIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWpEYXRhVmlldy5pcyh0aGlzKSkgcmV0dXJuIG5ldyBqRGF0YVZpZXcoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICBpZiAodGhpcy5idWZmZXIgPSBidWZmZXIgPSBqRGF0YVZpZXcud3JhcEJ1ZmZlcihidWZmZXIpLCB0aGlzLl9pc0FycmF5QnVmZmVyID0gY29tcGF0aWJpbGl0eS5BcnJheUJ1ZmZlciAmJiBpcyhidWZmZXIsIEFycmF5QnVmZmVyKSwgXG4gICAgICAgIHRoaXMuX2lzUGl4ZWxEYXRhID0gITEsIHRoaXMuX2lzRGF0YVZpZXcgPSBjb21wYXRpYmlsaXR5LkRhdGFWaWV3ICYmIHRoaXMuX2lzQXJyYXlCdWZmZXIsIFxuICAgICAgICB0aGlzLl9pc05vZGVCdWZmZXIgPSAhMCAmJiBjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgJiYgaXMoYnVmZmVyLCBCdWZmZXIpLCAhdGhpcy5faXNOb2RlQnVmZmVyICYmICF0aGlzLl9pc0FycmF5QnVmZmVyICYmICFpcyhidWZmZXIsIEFycmF5KSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcImpEYXRhVmlldyBidWZmZXIgaGFzIGFuIGluY29tcGF0aWJsZSB0eXBlXCIpO1xuICAgICAgICB0aGlzLl9saXR0bGVFbmRpYW4gPSAhIWxpdHRsZUVuZGlhbjtcbiAgICAgICAgdmFyIGJ1ZmZlckxlbmd0aCA9IFwiYnl0ZUxlbmd0aFwiIGluIGJ1ZmZlciA/IGJ1ZmZlci5ieXRlTGVuZ3RoIDogYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5ieXRlT2Zmc2V0ID0gYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgMCksIHRoaXMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPSBkZWZpbmVkKGJ5dGVMZW5ndGgsIGJ1ZmZlckxlbmd0aCAtIGJ5dGVPZmZzZXQpLCBcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gdGhpcy5fYml0T2Zmc2V0ID0gMCwgdGhpcy5faXNEYXRhVmlldyA/IHRoaXMuX3ZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSA6IHRoaXMuX2NoZWNrQm91bmRzKGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgsIGJ1ZmZlckxlbmd0aCksIFxuICAgICAgICB0aGlzLl9lbmdpbmVBY3Rpb24gPSB0aGlzLl9pc0RhdGFWaWV3ID8gdGhpcy5fZGF0YVZpZXdBY3Rpb24gOiB0aGlzLl9pc05vZGVCdWZmZXIgPyB0aGlzLl9ub2RlQnVmZmVyQWN0aW9uIDogdGhpcy5faXNBcnJheUJ1ZmZlciA/IHRoaXMuX2FycmF5QnVmZmVyQWN0aW9uIDogdGhpcy5fYXJyYXlBY3Rpb247XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldENoYXJDb2RlcyhzdHJpbmcpIHtcbiAgICAgICAgaWYgKGNvbXBhdGliaWxpdHkuTm9kZUJ1ZmZlcikgcmV0dXJuIG5ldyBCdWZmZXIoc3RyaW5nLCBcImJpbmFyeVwiKTtcbiAgICAgICAgZm9yICh2YXIgVHlwZSA9IGNvbXBhdGliaWxpdHkuQXJyYXlCdWZmZXIgPyBVaW50OEFycmF5IDogQXJyYXksIGNvZGVzID0gbmV3IFR5cGUoc3RyaW5nLmxlbmd0aCksIGkgPSAwLCBsZW5ndGggPSBzdHJpbmcubGVuZ3RoOyBsZW5ndGggPiBpOyBpKyspIGNvZGVzW2ldID0gMjU1ICYgc3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIHJldHVybiBjb2RlcztcbiAgICB9XG4gICAgZnVuY3Rpb24gcG93MihuKSB7XG4gICAgICAgIHJldHVybiBuID49IDAgJiYgMzEgPiBuID8gMSA8PCBuIDogcG93MltuXSB8fCAocG93MltuXSA9IE1hdGgucG93KDIsIG4pKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gVWludDY0KGxvLCBoaSkge1xuICAgICAgICB0aGlzLmxvID0gbG8sIHRoaXMuaGkgPSBoaTtcbiAgICB9XG4gICAgZnVuY3Rpb24gSW50NjQoKSB7XG4gICAgICAgIFVpbnQ2NC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICB2YXIgY29tcGF0aWJpbGl0eSA9IHtcbiAgICAgICAgTm9kZUJ1ZmZlcjogITAgJiYgXCJCdWZmZXJcIiBpbiBnbG9iYWwsXG4gICAgICAgIERhdGFWaWV3OiBcIkRhdGFWaWV3XCIgaW4gZ2xvYmFsLFxuICAgICAgICBBcnJheUJ1ZmZlcjogXCJBcnJheUJ1ZmZlclwiIGluIGdsb2JhbCxcbiAgICAgICAgUGl4ZWxEYXRhOiAhMVxuICAgIH0sIFRleHRFbmNvZGVyID0gZ2xvYmFsLlRleHRFbmNvZGVyLCBUZXh0RGVjb2RlciA9IGdsb2JhbC5UZXh0RGVjb2RlcjtcbiAgICBjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgJiYgIWZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYnVmZmVyLndyaXRlRmxvYXRMRSgxLzAsIDApO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgPSAhMTtcbiAgICAgICAgfVxuICAgIH0obmV3IEJ1ZmZlcig0KSk7XG4gICAgdmFyIGRhdGFUeXBlcyA9IHtcbiAgICAgICAgSW50ODogMSxcbiAgICAgICAgSW50MTY6IDIsXG4gICAgICAgIEludDMyOiA0LFxuICAgICAgICBVaW50ODogMSxcbiAgICAgICAgVWludDE2OiAyLFxuICAgICAgICBVaW50MzI6IDQsXG4gICAgICAgIEZsb2F0MzI6IDQsXG4gICAgICAgIEZsb2F0NjQ6IDhcbiAgICB9O1xuICAgIGpEYXRhVmlldy53cmFwQnVmZmVyID0gZnVuY3Rpb24oYnVmZmVyKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIGJ1ZmZlcikge1xuICAgICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIGlmIChjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIpIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYnVmZmVyKSwgYnVmZmVyLmZpbGwoMCk7IGVsc2UgaWYgKGNvbXBhdGliaWxpdHkuQXJyYXlCdWZmZXIpIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcikuYnVmZmVyOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBuZXcgQXJyYXkoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykgYnVmZmVyW2ldID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBidWZmZXI7XG5cbiAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICBidWZmZXIgPSBnZXRDaGFyQ29kZXMoYnVmZmVyKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJsZW5ndGhcIiBpbiBidWZmZXIgJiYgIShjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgJiYgaXMoYnVmZmVyLCBCdWZmZXIpIHx8IGNvbXBhdGliaWxpdHkuQXJyYXlCdWZmZXIgJiYgaXMoYnVmZmVyLCBBcnJheUJ1ZmZlcikpICYmIChjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgPyBidWZmZXIgPSBuZXcgQnVmZmVyKGJ1ZmZlcikgOiBjb21wYXRpYmlsaXR5LkFycmF5QnVmZmVyID8gaXMoYnVmZmVyLCBBcnJheUJ1ZmZlcikgfHwgKGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcikuYnVmZmVyLCBcbiAgICAgICAgICAgIGlzKGJ1ZmZlciwgQXJyYXlCdWZmZXIpIHx8IChidWZmZXIgPSBuZXcgVWludDhBcnJheShhcnJheUZyb20oYnVmZmVyLCAhMCkpLmJ1ZmZlcikpIDogYnVmZmVyID0gYXJyYXlGcm9tKGJ1ZmZlcikpLCBcbiAgICAgICAgICAgIGJ1ZmZlcjtcbiAgICAgICAgfVxuICAgIH0sIGpEYXRhVmlldy5pcyA9IGZ1bmN0aW9uKHZpZXcpIHtcbiAgICAgICAgcmV0dXJuIHZpZXcgJiYgdmlldy5qRGF0YVZpZXc7XG4gICAgfSwgakRhdGFWaWV3LmZyb20gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBqRGF0YVZpZXcoYXJndW1lbnRzKTtcbiAgICB9LCBqRGF0YVZpZXcuVWludDY0ID0gVWludDY0LCBVaW50NjQucHJvdG90eXBlID0ge1xuICAgICAgICB2YWx1ZU9mOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvICsgcG93MigzMikgKiB0aGlzLmhpO1xuICAgICAgICB9LFxuICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLnByb3RvdHlwZS50b1N0cmluZy5hcHBseSh0aGlzLnZhbHVlT2YoKSwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH0sIFVpbnQ2NC5mcm9tTnVtYmVyID0gZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgIHZhciBoaSA9IE1hdGguZmxvb3IobnVtYmVyIC8gcG93MigzMikpLCBsbyA9IG51bWJlciAtIGhpICogcG93MigzMik7XG4gICAgICAgIHJldHVybiBuZXcgVWludDY0KGxvLCBoaSk7XG4gICAgfSwgakRhdGFWaWV3LkludDY0ID0gSW50NjQsIEludDY0LnByb3RvdHlwZSA9IFwiY3JlYXRlXCIgaW4gT2JqZWN0ID8gT2JqZWN0LmNyZWF0ZShVaW50NjQucHJvdG90eXBlKSA6IG5ldyBVaW50NjQoKSwgXG4gICAgSW50NjQucHJvdG90eXBlLnZhbHVlT2YgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGkgPCBwb3cyKDMxKSA/IFVpbnQ2NC5wcm90b3R5cGUudmFsdWVPZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogLShwb3cyKDMyKSAtIHRoaXMubG8gKyBwb3cyKDMyKSAqIChwb3cyKDMyKSAtIDEgLSB0aGlzLmhpKSk7XG4gICAgfSwgSW50NjQuZnJvbU51bWJlciA9IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICB2YXIgbG8sIGhpO1xuICAgICAgICBpZiAobnVtYmVyID49IDApIHtcbiAgICAgICAgICAgIHZhciB1bnNpZ25lZCA9IFVpbnQ2NC5mcm9tTnVtYmVyKG51bWJlcik7XG4gICAgICAgICAgICBsbyA9IHVuc2lnbmVkLmxvLCBoaSA9IHVuc2lnbmVkLmhpO1xuICAgICAgICB9IGVsc2UgaGkgPSBNYXRoLmZsb29yKG51bWJlciAvIHBvdzIoMzIpKSwgbG8gPSBudW1iZXIgLSBoaSAqIHBvdzIoMzIpLCBoaSArPSBwb3cyKDMyKTtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnQ2NChsbywgaGkpO1xuICAgIH07XG4gICAgdmFyIHByb3RvID0gakRhdGFWaWV3LnByb3RvdHlwZSA9IHtcbiAgICAgICAgY29tcGF0aWJpbGl0eTogY29tcGF0aWJpbGl0eSxcbiAgICAgICAgakRhdGFWaWV3OiAhMCxcbiAgICAgICAgX2NoZWNrQm91bmRzOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhMZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChcIm51bWJlclwiICE9IHR5cGVvZiBieXRlT2Zmc2V0KSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2Zmc2V0IGlzIG5vdCBhIG51bWJlci5cIik7XG4gICAgICAgICAgICBpZiAoXCJudW1iZXJcIiAhPSB0eXBlb2YgYnl0ZUxlbmd0aCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlNpemUgaXMgbm90IGEgbnVtYmVyLlwiKTtcbiAgICAgICAgICAgIGlmICgwID4gYnl0ZUxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJMZW5ndGggaXMgbmVnYXRpdmUuXCIpO1xuICAgICAgICAgICAgaWYgKDAgPiBieXRlT2Zmc2V0IHx8IGJ5dGVPZmZzZXQgKyBieXRlTGVuZ3RoID4gZGVmaW5lZChtYXhMZW5ndGgsIHRoaXMuYnl0ZUxlbmd0aCkpIHRocm93IG5ldyBSYW5nZUVycm9yKFwiT2Zmc2V0cyBhcmUgb3V0IG9mIGJvdW5kcy5cIik7XG4gICAgICAgIH0sXG4gICAgICAgIF9hY3Rpb246IGZ1bmN0aW9uKHR5cGUsIGlzUmVhZEFjdGlvbiwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuLCB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZUFjdGlvbih0eXBlLCBpc1JlYWRBY3Rpb24sIGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSwgZGVmaW5lZChsaXR0bGVFbmRpYW4sIHRoaXMuX2xpdHRsZUVuZGlhbiksIHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgX2RhdGFWaWV3QWN0aW9uOiBmdW5jdGlvbih0eXBlLCBpc1JlYWRBY3Rpb24sIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0ICsgZGF0YVR5cGVzW3R5cGVdLCBpc1JlYWRBY3Rpb24gPyB0aGlzLl92aWV3W1wiZ2V0XCIgKyB0eXBlXShieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIDogdGhpcy5fdmlld1tcInNldFwiICsgdHlwZV0oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9hcnJheUJ1ZmZlckFjdGlvbjogZnVuY3Rpb24odHlwZSwgaXNSZWFkQWN0aW9uLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4sIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdHlwZWRBcnJheSwgc2l6ZSA9IGRhdGFUeXBlc1t0eXBlXSwgVHlwZWRBcnJheSA9IGdsb2JhbFt0eXBlICsgXCJBcnJheVwiXTtcbiAgICAgICAgICAgIGlmIChsaXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgMSA9PT0gc2l6ZSB8fCAodGhpcy5ieXRlT2Zmc2V0ICsgYnl0ZU9mZnNldCkgJSBzaXplID09PSAwICYmIGxpdHRsZUVuZGlhbikgcmV0dXJuIHR5cGVkQXJyYXkgPSBuZXcgVHlwZWRBcnJheSh0aGlzLmJ1ZmZlciwgdGhpcy5ieXRlT2Zmc2V0ICsgYnl0ZU9mZnNldCwgMSksIFxuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIHNpemUsIGlzUmVhZEFjdGlvbiA/IHR5cGVkQXJyYXlbMF0gOiB0eXBlZEFycmF5WzBdID0gdmFsdWU7XG4gICAgICAgICAgICB2YXIgYnl0ZXMgPSBuZXcgVWludDhBcnJheShpc1JlYWRBY3Rpb24gPyB0aGlzLmdldEJ5dGVzKHNpemUsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgITApIDogc2l6ZSk7XG4gICAgICAgICAgICByZXR1cm4gdHlwZWRBcnJheSA9IG5ldyBUeXBlZEFycmF5KGJ5dGVzLmJ1ZmZlciwgMCwgMSksIGlzUmVhZEFjdGlvbiA/IHR5cGVkQXJyYXlbMF0gOiAodHlwZWRBcnJheVswXSA9IHZhbHVlLCBcbiAgICAgICAgICAgIHZvaWQgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgYnl0ZXMsIGxpdHRsZUVuZGlhbikpO1xuICAgICAgICB9LFxuICAgICAgICBfYXJyYXlBY3Rpb246IGZ1bmN0aW9uKHR5cGUsIGlzUmVhZEFjdGlvbiwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuLCB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGlzUmVhZEFjdGlvbiA/IHRoaXNbXCJfZ2V0XCIgKyB0eXBlXShieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIDogdGhpc1tcIl9zZXRcIiArIHR5cGVdKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0Qnl0ZXM6IGZ1bmN0aW9uKGxlbmd0aCwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICBsaXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSwgXG4gICAgICAgICAgICBsZW5ndGggPSBkZWZpbmVkKGxlbmd0aCwgdGhpcy5ieXRlTGVuZ3RoIC0gYnl0ZU9mZnNldCksIHRoaXMuX2NoZWNrQm91bmRzKGJ5dGVPZmZzZXQsIGxlbmd0aCksIFxuICAgICAgICAgICAgYnl0ZU9mZnNldCArPSB0aGlzLmJ5dGVPZmZzZXQsIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgLSB0aGlzLmJ5dGVPZmZzZXQgKyBsZW5ndGg7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5faXNBcnJheUJ1ZmZlciA/IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyLCBieXRlT2Zmc2V0LCBsZW5ndGgpIDogKHRoaXMuYnVmZmVyLnNsaWNlIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZSkuY2FsbCh0aGlzLmJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZU9mZnNldCArIGxlbmd0aCk7XG4gICAgICAgICAgICByZXR1cm4gbGl0dGxlRW5kaWFuIHx8IDEgPj0gbGVuZ3RoID8gcmVzdWx0IDogYXJyYXlGcm9tKHJlc3VsdCkucmV2ZXJzZSgpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRCeXRlczogZnVuY3Rpb24obGVuZ3RoLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4sIHRvQXJyYXkpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLl9nZXRCeXRlcyhsZW5ndGgsIGJ5dGVPZmZzZXQsIGRlZmluZWQobGl0dGxlRW5kaWFuLCAhMCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRvQXJyYXkgPyBhcnJheUZyb20ocmVzdWx0KSA6IHJlc3VsdDtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldEJ5dGVzOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBieXRlcywgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKDAgIT09IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChsaXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tCb3VuZHMoYnl0ZU9mZnNldCwgbGVuZ3RoKSwgIWxpdHRsZUVuZGlhbiAmJiBsZW5ndGggPiAxICYmIChieXRlcyA9IGFycmF5RnJvbShieXRlcywgITApLnJldmVyc2UoKSksIFxuICAgICAgICAgICAgICAgIGJ5dGVPZmZzZXQgKz0gdGhpcy5ieXRlT2Zmc2V0LCB0aGlzLl9pc0FycmF5QnVmZmVyKSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlciwgYnl0ZU9mZnNldCwgbGVuZ3RoKS5zZXQoYnl0ZXMpOyBlbHNlIGlmICh0aGlzLl9pc05vZGVCdWZmZXIpIG5ldyBCdWZmZXIoYnl0ZXMpLmNvcHkodGhpcy5idWZmZXIsIGJ5dGVPZmZzZXQpOyBlbHNlIGZvciAodmFyIGkgPSAwOyBsZW5ndGggPiBpOyBpKyspIHRoaXMuYnVmZmVyW2J5dGVPZmZzZXQgKyBpXSA9IGJ5dGVzW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgLSB0aGlzLmJ5dGVPZmZzZXQgKyBsZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNldEJ5dGVzOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBieXRlcywgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRCeXRlcyhieXRlT2Zmc2V0LCBieXRlcywgZGVmaW5lZChsaXR0bGVFbmRpYW4sICEwKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFN0cmluZzogZnVuY3Rpb24oYnl0ZUxlbmd0aCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc05vZGVCdWZmZXIpIHJldHVybiBieXRlT2Zmc2V0ID0gZGVmaW5lZChieXRlT2Zmc2V0LCB0aGlzLl9vZmZzZXQpLCBieXRlTGVuZ3RoID0gZGVmaW5lZChieXRlTGVuZ3RoLCB0aGlzLmJ5dGVMZW5ndGggLSBieXRlT2Zmc2V0KSwgXG4gICAgICAgICAgICB0aGlzLl9jaGVja0JvdW5kcyhieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSwgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIGJ5dGVMZW5ndGgsIFxuICAgICAgICAgICAgdGhpcy5idWZmZXIudG9TdHJpbmcoZW5jb2RpbmcgfHwgXCJiaW5hcnlcIiwgdGhpcy5ieXRlT2Zmc2V0ICsgYnl0ZU9mZnNldCwgdGhpcy5ieXRlT2Zmc2V0ICsgdGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHZhciBieXRlcyA9IHRoaXMuX2dldEJ5dGVzKGJ5dGVMZW5ndGgsIGJ5dGVPZmZzZXQsICEwKTtcbiAgICAgICAgICAgIGlmIChlbmNvZGluZyA9IFwidXRmOFwiID09PSBlbmNvZGluZyA/IFwidXRmLThcIiA6IGVuY29kaW5nIHx8IFwiYmluYXJ5XCIsIFRleHREZWNvZGVyICYmIFwiYmluYXJ5XCIgIT09IGVuY29kaW5nKSByZXR1cm4gbmV3IFRleHREZWNvZGVyKGVuY29kaW5nKS5kZWNvZGUodGhpcy5faXNBcnJheUJ1ZmZlciA/IGJ5dGVzIDogbmV3IFVpbnQ4QXJyYXkoYnl0ZXMpKTtcbiAgICAgICAgICAgIHZhciBzdHJpbmcgPSBcIlwiO1xuICAgICAgICAgICAgYnl0ZUxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBieXRlTGVuZ3RoID4gaTsgaSsrKSBzdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSk7XG4gICAgICAgICAgICByZXR1cm4gXCJ1dGYtOFwiID09PSBlbmNvZGluZyAmJiAoc3RyaW5nID0gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShzdHJpbmcpKSksIHN0cmluZztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0U3RyaW5nOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBzdWJTdHJpbmcsIGVuY29kaW5nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faXNOb2RlQnVmZmVyKSByZXR1cm4gYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSwgdGhpcy5fY2hlY2tCb3VuZHMoYnl0ZU9mZnNldCwgc3ViU3RyaW5nLmxlbmd0aCksIFxuICAgICAgICAgICAgdm9pZCAodGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIHRoaXMuYnVmZmVyLndyaXRlKHN1YlN0cmluZywgdGhpcy5ieXRlT2Zmc2V0ICsgYnl0ZU9mZnNldCwgZW5jb2RpbmcgfHwgXCJiaW5hcnlcIikpO1xuICAgICAgICAgICAgZW5jb2RpbmcgPSBcInV0ZjhcIiA9PT0gZW5jb2RpbmcgPyBcInV0Zi04XCIgOiBlbmNvZGluZyB8fCBcImJpbmFyeVwiO1xuICAgICAgICAgICAgdmFyIGJ5dGVzO1xuICAgICAgICAgICAgVGV4dEVuY29kZXIgJiYgXCJiaW5hcnlcIiAhPT0gZW5jb2RpbmcgPyBieXRlcyA9IG5ldyBUZXh0RW5jb2RlcihlbmNvZGluZykuZW5jb2RlKHN1YlN0cmluZykgOiAoXCJ1dGYtOFwiID09PSBlbmNvZGluZyAmJiAoc3ViU3RyaW5nID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN1YlN0cmluZykpKSwgXG4gICAgICAgICAgICBieXRlcyA9IGdldENoYXJDb2RlcyhzdWJTdHJpbmcpKSwgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgYnl0ZXMsICEwKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q2hhcjogZnVuY3Rpb24oYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RyaW5nKDEsIGJ5dGVPZmZzZXQpO1xuICAgICAgICB9LFxuICAgICAgICBzZXRDaGFyOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBjaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RyaW5nKGJ5dGVPZmZzZXQsIGNoYXJhY3Rlcik7XG4gICAgICAgIH0sXG4gICAgICAgIHRlbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29mZnNldDtcbiAgICAgICAgfSxcbiAgICAgICAgc2VlazogZnVuY3Rpb24oYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrQm91bmRzKGJ5dGVPZmZzZXQsIDApLCB0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0O1xuICAgICAgICB9LFxuICAgICAgICBza2lwOiBmdW5jdGlvbihieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWVrKHRoaXMuX29mZnNldCArIGJ5dGVMZW5ndGgpO1xuICAgICAgICB9LFxuICAgICAgICBzbGljZTogZnVuY3Rpb24oc3RhcnQsIGVuZCwgZm9yY2VDb3B5KSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBub3JtYWxpemVPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDAgPiBvZmZzZXQgPyBvZmZzZXQgKyBieXRlTGVuZ3RoIDogb2Zmc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0YXJ0ID0gbm9ybWFsaXplT2Zmc2V0KHN0YXJ0LCB0aGlzLmJ5dGVMZW5ndGgpLCBlbmQgPSBub3JtYWxpemVPZmZzZXQoZGVmaW5lZChlbmQsIHRoaXMuYnl0ZUxlbmd0aCksIHRoaXMuYnl0ZUxlbmd0aCksIFxuICAgICAgICAgICAgZm9yY2VDb3B5ID8gbmV3IGpEYXRhVmlldyh0aGlzLmdldEJ5dGVzKGVuZCAtIHN0YXJ0LCBzdGFydCwgITAsICEwKSwgdm9pZCAwLCB2b2lkIDAsIHRoaXMuX2xpdHRsZUVuZGlhbikgOiBuZXcgakRhdGFWaWV3KHRoaXMuYnVmZmVyLCB0aGlzLmJ5dGVPZmZzZXQgKyBzdGFydCwgZW5kIC0gc3RhcnQsIHRoaXMuX2xpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIGFsaWduQnk6IGZ1bmN0aW9uKGJ5dGVDb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2JpdE9mZnNldCA9IDAsIDEgIT09IGRlZmluZWQoYnl0ZUNvdW50LCAxKSA/IHRoaXMuc2tpcChieXRlQ291bnQgLSAodGhpcy5fb2Zmc2V0ICUgYnl0ZUNvdW50IHx8IGJ5dGVDb3VudCkpIDogdGhpcy5fb2Zmc2V0O1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0RmxvYXQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuX2dldEJ5dGVzKDgsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiksIHNpZ24gPSAxIC0gMiAqIChiWzddID4+IDcpLCBleHBvbmVudCA9ICgoYls3XSA8PCAxICYgMjU1KSA8PCAzIHwgYls2XSA+PiA0KSAtIDEwMjMsIG1hbnRpc3NhID0gKDE1ICYgYls2XSkgKiBwb3cyKDQ4KSArIGJbNV0gKiBwb3cyKDQwKSArIGJbNF0gKiBwb3cyKDMyKSArIGJbM10gKiBwb3cyKDI0KSArIGJbMl0gKiBwb3cyKDE2KSArIGJbMV0gKiBwb3cyKDgpICsgYlswXTtcbiAgICAgICAgICAgIHJldHVybiAxMDI0ID09PSBleHBvbmVudCA/IDAgIT09IG1hbnRpc3NhID8gMC8wIDogMS8wICogc2lnbiA6IC0xMDIzID09PSBleHBvbmVudCA/IHNpZ24gKiBtYW50aXNzYSAqIHBvdzIoLTEwNzQpIDogc2lnbiAqICgxICsgbWFudGlzc2EgKiBwb3cyKC01MikpICogcG93MihleHBvbmVudCk7XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRGbG9hdDMyOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5fZ2V0Qnl0ZXMoNCwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSwgc2lnbiA9IDEgLSAyICogKGJbM10gPj4gNyksIGV4cG9uZW50ID0gKGJbM10gPDwgMSAmIDI1NSB8IGJbMl0gPj4gNykgLSAxMjcsIG1hbnRpc3NhID0gKDEyNyAmIGJbMl0pIDw8IDE2IHwgYlsxXSA8PCA4IHwgYlswXTtcbiAgICAgICAgICAgIHJldHVybiAxMjggPT09IGV4cG9uZW50ID8gMCAhPT0gbWFudGlzc2EgPyAwLzAgOiAxLzAgKiBzaWduIDogLTEyNyA9PT0gZXhwb25lbnQgPyBzaWduICogbWFudGlzc2EgKiBwb3cyKC0xNDkpIDogc2lnbiAqICgxICsgbWFudGlzc2EgKiBwb3cyKC0yMykpICogcG93MihleHBvbmVudCk7XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXQ2NDogZnVuY3Rpb24oVHlwZSwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICBsaXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIGZvciAodmFyIHBhcnRzID0gbGl0dGxlRW5kaWFuID8gWyAwLCA0IF0gOiBbIDQsIDAgXSwgaSA9IDA7IDIgPiBpOyBpKyspIHBhcnRzW2ldID0gdGhpcy5nZXRVaW50MzIoYnl0ZU9mZnNldCArIHBhcnRzW2ldLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgKyA4LCBuZXcgVHlwZShwYXJ0c1swXSwgcGFydHNbMV0pO1xuICAgICAgICB9LFxuICAgICAgICBnZXRJbnQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0NjQoSW50NjQsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFVpbnQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0NjQoVWludDY0LCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0SW50MzI6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLl9nZXRCeXRlcyg0LCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgcmV0dXJuIGJbM10gPDwgMjQgfCBiWzJdIDw8IDE2IHwgYlsxXSA8PCA4IHwgYlswXTtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldFVpbnQzMjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW50MzIoYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSA+Pj4gMDtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldEludDE2OiBmdW5jdGlvbihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRVaW50MTYoYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSA8PCAxNiA+PiAxNjtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldFVpbnQxNjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuX2dldEJ5dGVzKDIsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgICAgICByZXR1cm4gYlsxXSA8PCA4IHwgYlswXTtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldEludDg6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRVaW50OChieXRlT2Zmc2V0KSA8PCAyNCA+PiAyNDtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldFVpbnQ4OiBmdW5jdGlvbihieXRlT2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Qnl0ZXMoMSwgYnl0ZU9mZnNldClbMF07XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRCaXRSYW5nZURhdGE6IGZ1bmN0aW9uKGJpdExlbmd0aCwgYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0Qml0ID0gKGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSA8PCAzKSArIHRoaXMuX2JpdE9mZnNldCwgZW5kQml0ID0gc3RhcnRCaXQgKyBiaXRMZW5ndGgsIHN0YXJ0ID0gc3RhcnRCaXQgPj4+IDMsIGVuZCA9IGVuZEJpdCArIDcgPj4+IDMsIGIgPSB0aGlzLl9nZXRCeXRlcyhlbmQgLSBzdGFydCwgc3RhcnQsICEwKSwgd2lkZVZhbHVlID0gMDtcbiAgICAgICAgICAgICh0aGlzLl9iaXRPZmZzZXQgPSA3ICYgZW5kQml0KSAmJiAodGhpcy5fYml0T2Zmc2V0IC09IDgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGIubGVuZ3RoOyBsZW5ndGggPiBpOyBpKyspIHdpZGVWYWx1ZSA9IHdpZGVWYWx1ZSA8PCA4IHwgYltpXTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICAgICAgICAgIGJ5dGVzOiBiLFxuICAgICAgICAgICAgICAgIHdpZGVWYWx1ZTogd2lkZVZhbHVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBnZXRTaWduZWQ6IGZ1bmN0aW9uKGJpdExlbmd0aCwgYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgdmFyIHNoaWZ0ID0gMzIgLSBiaXRMZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRVbnNpZ25lZChiaXRMZW5ndGgsIGJ5dGVPZmZzZXQpIDw8IHNoaWZ0ID4+IHNoaWZ0O1xuICAgICAgICB9LFxuICAgICAgICBnZXRVbnNpZ25lZDogZnVuY3Rpb24oYml0TGVuZ3RoLCBieXRlT2Zmc2V0KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9nZXRCaXRSYW5nZURhdGEoYml0TGVuZ3RoLCBieXRlT2Zmc2V0KS53aWRlVmFsdWUgPj4+IC10aGlzLl9iaXRPZmZzZXQ7XG4gICAgICAgICAgICByZXR1cm4gMzIgPiBiaXRMZW5ndGggPyB2YWx1ZSAmIH4oLTEgPDwgYml0TGVuZ3RoKSA6IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBfc2V0QmluYXJ5RmxvYXQ6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBtYW50U2l6ZSwgZXhwU2l6ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgZXhwb25lbnQsIG1hbnRpc3NhLCBzaWduQml0ID0gMCA+IHZhbHVlID8gMSA6IDAsIGVNYXggPSB+KC0xIDw8IGV4cFNpemUgLSAxKSwgZU1pbiA9IDEgLSBlTWF4O1xuICAgICAgICAgICAgMCA+IHZhbHVlICYmICh2YWx1ZSA9IC12YWx1ZSksIDAgPT09IHZhbHVlID8gKGV4cG9uZW50ID0gMCwgbWFudGlzc2EgPSAwKSA6IGlzTmFOKHZhbHVlKSA/IChleHBvbmVudCA9IDIgKiBlTWF4ICsgMSwgXG4gICAgICAgICAgICBtYW50aXNzYSA9IDEpIDogMS8wID09PSB2YWx1ZSA/IChleHBvbmVudCA9IDIgKiBlTWF4ICsgMSwgbWFudGlzc2EgPSAwKSA6IChleHBvbmVudCA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpLCBcbiAgICAgICAgICAgIGV4cG9uZW50ID49IGVNaW4gJiYgZU1heCA+PSBleHBvbmVudCA/IChtYW50aXNzYSA9IE1hdGguZmxvb3IoKHZhbHVlICogcG93MigtZXhwb25lbnQpIC0gMSkgKiBwb3cyKG1hbnRTaXplKSksIFxuICAgICAgICAgICAgZXhwb25lbnQgKz0gZU1heCkgOiAobWFudGlzc2EgPSBNYXRoLmZsb29yKHZhbHVlIC8gcG93MihlTWluIC0gbWFudFNpemUpKSwgZXhwb25lbnQgPSAwKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBiID0gW107IG1hbnRTaXplID49IDg7ICkgYi5wdXNoKG1hbnRpc3NhICUgMjU2KSwgbWFudGlzc2EgPSBNYXRoLmZsb29yKG1hbnRpc3NhIC8gMjU2KSwgXG4gICAgICAgICAgICBtYW50U2l6ZSAtPSA4O1xuICAgICAgICAgICAgZm9yIChleHBvbmVudCA9IGV4cG9uZW50IDw8IG1hbnRTaXplIHwgbWFudGlzc2EsIGV4cFNpemUgKz0gbWFudFNpemU7IGV4cFNpemUgPj0gODsgKSBiLnB1c2goMjU1ICYgZXhwb25lbnQpLCBcbiAgICAgICAgICAgIGV4cG9uZW50ID4+Pj0gOCwgZXhwU2l6ZSAtPSA4O1xuICAgICAgICAgICAgYi5wdXNoKHNpZ25CaXQgPDwgZXhwU2l6ZSB8IGV4cG9uZW50KSwgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgYiwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldEZsb2F0MzI6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJpbmFyeUZsb2F0KGJ5dGVPZmZzZXQsIHZhbHVlLCAyMywgOCwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldEZsb2F0NjQ6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJpbmFyeUZsb2F0KGJ5dGVPZmZzZXQsIHZhbHVlLCA1MiwgMTEsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXQ2NDogZnVuY3Rpb24oVHlwZSwgYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgXCJvYmplY3RcIiAhPSB0eXBlb2YgdmFsdWUgJiYgKHZhbHVlID0gVHlwZS5mcm9tTnVtYmVyKHZhbHVlKSksIGxpdHRsZUVuZGlhbiA9IGRlZmluZWQobGl0dGxlRW5kaWFuLCB0aGlzLl9saXR0bGVFbmRpYW4pLCBcbiAgICAgICAgICAgIGJ5dGVPZmZzZXQgPSBkZWZpbmVkKGJ5dGVPZmZzZXQsIHRoaXMuX29mZnNldCk7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBsaXR0bGVFbmRpYW4gPyB7XG4gICAgICAgICAgICAgICAgbG86IDAsXG4gICAgICAgICAgICAgICAgaGk6IDRcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgbG86IDQsXG4gICAgICAgICAgICAgICAgaGk6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHZhciBwYXJ0TmFtZSBpbiBwYXJ0cykgdGhpcy5zZXRVaW50MzIoYnl0ZU9mZnNldCArIHBhcnRzW3BhcnROYW1lXSwgdmFsdWVbcGFydE5hbWVdLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIDg7XG4gICAgICAgIH0sXG4gICAgICAgIHNldEludDY0OiBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXQ2NChJbnQ2NCwgYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFVpbnQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdGhpcy5fc2V0NjQoVWludDY0LCBieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldFVpbnQzMjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgWyAyNTUgJiB2YWx1ZSwgdmFsdWUgPj4+IDggJiAyNTUsIHZhbHVlID4+PiAxNiAmIDI1NSwgdmFsdWUgPj4+IDI0IF0sIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRVaW50MTY6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJ5dGVzKGJ5dGVPZmZzZXQsIFsgMjU1ICYgdmFsdWUsIHZhbHVlID4+PiA4ICYgMjU1IF0sIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRVaW50ODogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJ5dGVzKGJ5dGVPZmZzZXQsIFsgMjU1ICYgdmFsdWUgXSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFVuc2lnbmVkOiBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgYml0TGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuX2dldEJpdFJhbmdlRGF0YShiaXRMZW5ndGgsIGJ5dGVPZmZzZXQpLCB3aWRlVmFsdWUgPSBkYXRhLndpZGVWYWx1ZSwgYiA9IGRhdGEuYnl0ZXM7XG4gICAgICAgICAgICB3aWRlVmFsdWUgJj0gfih+KC0xIDw8IGJpdExlbmd0aCkgPDwgLXRoaXMuX2JpdE9mZnNldCksIHdpZGVWYWx1ZSB8PSAoMzIgPiBiaXRMZW5ndGggPyB2YWx1ZSAmIH4oLTEgPDwgYml0TGVuZ3RoKSA6IHZhbHVlKSA8PCAtdGhpcy5fYml0T2Zmc2V0O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGJbaV0gPSAyNTUgJiB3aWRlVmFsdWUsIHdpZGVWYWx1ZSA+Pj49IDg7XG4gICAgICAgICAgICB0aGlzLl9zZXRCeXRlcyhkYXRhLnN0YXJ0LCBiLCAhMCk7XG4gICAgICAgIH1cbiAgICB9LCBub2RlTmFtaW5nID0ge1xuICAgICAgICBJbnQ4OiBcIkludDhcIixcbiAgICAgICAgSW50MTY6IFwiSW50MTZcIixcbiAgICAgICAgSW50MzI6IFwiSW50MzJcIixcbiAgICAgICAgVWludDg6IFwiVUludDhcIixcbiAgICAgICAgVWludDE2OiBcIlVJbnQxNlwiLFxuICAgICAgICBVaW50MzI6IFwiVUludDMyXCIsXG4gICAgICAgIEZsb2F0MzI6IFwiRmxvYXRcIixcbiAgICAgICAgRmxvYXQ2NDogXCJEb3VibGVcIlxuICAgIH07XG4gICAgcHJvdG8uX25vZGVCdWZmZXJBY3Rpb24gPSBmdW5jdGlvbih0eXBlLCBpc1JlYWRBY3Rpb24sIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIGRhdGFUeXBlc1t0eXBlXTtcbiAgICAgICAgdmFyIG5vZGVOYW1lID0gbm9kZU5hbWluZ1t0eXBlXSArIChcIkludDhcIiA9PT0gdHlwZSB8fCBcIlVpbnQ4XCIgPT09IHR5cGUgPyBcIlwiIDogbGl0dGxlRW5kaWFuID8gXCJMRVwiIDogXCJCRVwiKTtcbiAgICAgICAgcmV0dXJuIGJ5dGVPZmZzZXQgKz0gdGhpcy5ieXRlT2Zmc2V0LCBpc1JlYWRBY3Rpb24gPyB0aGlzLmJ1ZmZlcltcInJlYWRcIiArIG5vZGVOYW1lXShieXRlT2Zmc2V0KSA6IHRoaXMuYnVmZmVyW1wid3JpdGVcIiArIG5vZGVOYW1lXSh2YWx1ZSwgYnl0ZU9mZnNldCk7XG4gICAgfTtcbiAgICBmb3IgKHZhciB0eXBlIGluIGRhdGFUeXBlcykgIWZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgcHJvdG9bXCJnZXRcIiArIHR5cGVdID0gZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uKHR5cGUsICEwLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LCBwcm90b1tcInNldFwiICsgdHlwZV0gPSBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9hY3Rpb24odHlwZSwgITEsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgdmFsdWUpO1xuICAgICAgICB9O1xuICAgIH0odHlwZSk7XG4gICAgcHJvdG8uX3NldEludDMyID0gcHJvdG8uX3NldFVpbnQzMiwgcHJvdG8uX3NldEludDE2ID0gcHJvdG8uX3NldFVpbnQxNiwgcHJvdG8uX3NldEludDggPSBwcm90by5fc2V0VWludDgsIFxuICAgIHByb3RvLnNldFNpZ25lZCA9IHByb3RvLnNldFVuc2lnbmVkO1xuICAgIGZvciAodmFyIG1ldGhvZCBpbiBwcm90bykgXCJzZXRcIiA9PT0gbWV0aG9kLnNsaWNlKDAsIDMpICYmICFmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIHByb3RvW1wid3JpdGVcIiArIHR5cGVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGFyZ3VtZW50cywgdm9pZCAwKSwgdGhpc1tcInNldFwiICsgdHlwZV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9KG1ldGhvZC5zbGljZSgzKSk7XG4gICAgcmV0dXJuIGpEYXRhVmlldztcbn0pOyIsIid1c2Ugc3RyaWN0JztcblxuXG52YXIgemxpYl9pbmZsYXRlID0gcmVxdWlyZSgnLi96bGliL2luZmxhdGUnKTtcbnZhciB1dGlscyAgICAgICAgPSByZXF1aXJlKCcuL3V0aWxzL2NvbW1vbicpO1xudmFyIHN0cmluZ3MgICAgICA9IHJlcXVpcmUoJy4vdXRpbHMvc3RyaW5ncycpO1xudmFyIGMgICAgICAgICAgICA9IHJlcXVpcmUoJy4vemxpYi9jb25zdGFudHMnKTtcbnZhciBtc2cgICAgICAgICAgPSByZXF1aXJlKCcuL3psaWIvbWVzc2FnZXMnKTtcbnZhciBaU3RyZWFtICAgICAgPSByZXF1aXJlKCcuL3psaWIvenN0cmVhbScpO1xudmFyIEdaaGVhZGVyICAgICA9IHJlcXVpcmUoJy4vemxpYi9nemhlYWRlcicpO1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIGNsYXNzIEluZmxhdGVcbiAqXG4gKiBHZW5lcmljIEpTLXN0eWxlIHdyYXBwZXIgZm9yIHpsaWIgY2FsbHMuIElmIHlvdSBkb24ndCBuZWVkXG4gKiBzdHJlYW1pbmcgYmVoYXZpb3VyIC0gdXNlIG1vcmUgc2ltcGxlIGZ1bmN0aW9uczogW1tpbmZsYXRlXV1cbiAqIGFuZCBbW2luZmxhdGVSYXddXS5cbiAqKi9cblxuLyogaW50ZXJuYWxcbiAqIGluZmxhdGUuY2h1bmtzIC0+IEFycmF5XG4gKlxuICogQ2h1bmtzIG9mIG91dHB1dCBkYXRhLCBpZiBbW0luZmxhdGUjb25EYXRhXV0gbm90IG92ZXJyaWRlbi5cbiAqKi9cblxuLyoqXG4gKiBJbmZsYXRlLnJlc3VsdCAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZ1xuICpcbiAqIFVuY29tcHJlc3NlZCByZXN1bHQsIGdlbmVyYXRlZCBieSBkZWZhdWx0IFtbSW5mbGF0ZSNvbkRhdGFdXVxuICogYW5kIFtbSW5mbGF0ZSNvbkVuZF1dIGhhbmRsZXJzLiBGaWxsZWQgYWZ0ZXIgeW91IHB1c2ggbGFzdCBjaHVua1xuICogKGNhbGwgW1tJbmZsYXRlI3B1c2hdXSB3aXRoIGBaX0ZJTklTSGAgLyBgdHJ1ZWAgcGFyYW0pIG9yIGlmIHlvdVxuICogcHVzaCBhIGNodW5rIHdpdGggZXhwbGljaXQgZmx1c2ggKGNhbGwgW1tJbmZsYXRlI3B1c2hdXSB3aXRoXG4gKiBgWl9TWU5DX0ZMVVNIYCBwYXJhbSkuXG4gKiovXG5cbi8qKlxuICogSW5mbGF0ZS5lcnIgLT4gTnVtYmVyXG4gKlxuICogRXJyb3IgY29kZSBhZnRlciBpbmZsYXRlIGZpbmlzaGVkLiAwIChaX09LKSBvbiBzdWNjZXNzLlxuICogU2hvdWxkIGJlIGNoZWNrZWQgaWYgYnJva2VuIGRhdGEgcG9zc2libGUuXG4gKiovXG5cbi8qKlxuICogSW5mbGF0ZS5tc2cgLT4gU3RyaW5nXG4gKlxuICogRXJyb3IgbWVzc2FnZSwgaWYgW1tJbmZsYXRlLmVycl1dICE9IDBcbiAqKi9cblxuXG4vKipcbiAqIG5ldyBJbmZsYXRlKG9wdGlvbnMpXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgaW5mbGF0ZSBvcHRpb25zLlxuICpcbiAqIENyZWF0ZXMgbmV3IGluZmxhdG9yIGluc3RhbmNlIHdpdGggc3BlY2lmaWVkIHBhcmFtcy4gVGhyb3dzIGV4Y2VwdGlvblxuICogb24gYmFkIHBhcmFtcy4gU3VwcG9ydGVkIG9wdGlvbnM6XG4gKlxuICogLSBgd2luZG93Qml0c2BcbiAqIC0gYGRpY3Rpb25hcnlgXG4gKlxuICogW2h0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZF0oaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkKVxuICogZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlc2UuXG4gKlxuICogQWRkaXRpb25hbCBvcHRpb25zLCBmb3IgaW50ZXJuYWwgbmVlZHM6XG4gKlxuICogLSBgY2h1bmtTaXplYCAtIHNpemUgb2YgZ2VuZXJhdGVkIGRhdGEgY2h1bmtzICgxNksgYnkgZGVmYXVsdClcbiAqIC0gYHJhd2AgKEJvb2xlYW4pIC0gZG8gcmF3IGluZmxhdGVcbiAqIC0gYHRvYCAoU3RyaW5nKSAtIGlmIGVxdWFsIHRvICdzdHJpbmcnLCB0aGVuIHJlc3VsdCB3aWxsIGJlIGNvbnZlcnRlZFxuICogICBmcm9tIHV0ZjggdG8gdXRmMTYgKGphdmFzY3JpcHQpIHN0cmluZy4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCxcbiAqICAgY2h1bmsgbGVuZ3RoIGNhbiBkaWZmZXIgZnJvbSBgY2h1bmtTaXplYCwgZGVwZW5kaW5nIG9uIGNvbnRlbnQuXG4gKlxuICogQnkgZGVmYXVsdCwgd2hlbiBubyBvcHRpb25zIHNldCwgYXV0b2RldGVjdCBkZWZsYXRlL2d6aXAgZGF0YSBmb3JtYXQgdmlhXG4gKiB3cmFwcGVyIGhlYWRlci5cbiAqXG4gKiAjIyMjIyBFeGFtcGxlOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIHZhciBwYWtvID0gcmVxdWlyZSgncGFrbycpXG4gKiAgICwgY2h1bmsxID0gVWludDhBcnJheShbMSwyLDMsNCw1LDYsNyw4LDldKVxuICogICAsIGNodW5rMiA9IFVpbnQ4QXJyYXkoWzEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5XSk7XG4gKlxuICogdmFyIGluZmxhdGUgPSBuZXcgcGFrby5JbmZsYXRlKHsgbGV2ZWw6IDN9KTtcbiAqXG4gKiBpbmZsYXRlLnB1c2goY2h1bmsxLCBmYWxzZSk7XG4gKiBpbmZsYXRlLnB1c2goY2h1bmsyLCB0cnVlKTsgIC8vIHRydWUgLT4gbGFzdCBjaHVua1xuICpcbiAqIGlmIChpbmZsYXRlLmVycikgeyB0aHJvdyBuZXcgRXJyb3IoaW5mbGF0ZS5lcnIpOyB9XG4gKlxuICogY29uc29sZS5sb2coaW5mbGF0ZS5yZXN1bHQpO1xuICogYGBgXG4gKiovXG5mdW5jdGlvbiBJbmZsYXRlKG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEluZmxhdGUpKSByZXR1cm4gbmV3IEluZmxhdGUob3B0aW9ucyk7XG5cbiAgdGhpcy5vcHRpb25zID0gdXRpbHMuYXNzaWduKHtcbiAgICBjaHVua1NpemU6IDE2Mzg0LFxuICAgIHdpbmRvd0JpdHM6IDAsXG4gICAgdG86ICcnXG4gIH0sIG9wdGlvbnMgfHwge30pO1xuXG4gIHZhciBvcHQgPSB0aGlzLm9wdGlvbnM7XG5cbiAgLy8gRm9yY2Ugd2luZG93IHNpemUgZm9yIGByYXdgIGRhdGEsIGlmIG5vdCBzZXQgZGlyZWN0bHksXG4gIC8vIGJlY2F1c2Ugd2UgaGF2ZSBubyBoZWFkZXIgZm9yIGF1dG9kZXRlY3QuXG4gIGlmIChvcHQucmF3ICYmIChvcHQud2luZG93Qml0cyA+PSAwKSAmJiAob3B0LndpbmRvd0JpdHMgPCAxNikpIHtcbiAgICBvcHQud2luZG93Qml0cyA9IC1vcHQud2luZG93Qml0cztcbiAgICBpZiAob3B0LndpbmRvd0JpdHMgPT09IDApIHsgb3B0LndpbmRvd0JpdHMgPSAtMTU7IH1cbiAgfVxuXG4gIC8vIElmIGB3aW5kb3dCaXRzYCBub3QgZGVmaW5lZCAoYW5kIG1vZGUgbm90IHJhdykgLSBzZXQgYXV0b2RldGVjdCBmbGFnIGZvciBnemlwL2RlZmxhdGVcbiAgaWYgKChvcHQud2luZG93Qml0cyA+PSAwKSAmJiAob3B0LndpbmRvd0JpdHMgPCAxNikgJiZcbiAgICAgICEob3B0aW9ucyAmJiBvcHRpb25zLndpbmRvd0JpdHMpKSB7XG4gICAgb3B0LndpbmRvd0JpdHMgKz0gMzI7XG4gIH1cblxuICAvLyBHemlwIGhlYWRlciBoYXMgbm8gaW5mbyBhYm91dCB3aW5kb3dzIHNpemUsIHdlIGNhbiBkbyBhdXRvZGV0ZWN0IG9ubHlcbiAgLy8gZm9yIGRlZmxhdGUuIFNvLCBpZiB3aW5kb3cgc2l6ZSBub3Qgc2V0LCBmb3JjZSBpdCB0byBtYXggd2hlbiBnemlwIHBvc3NpYmxlXG4gIGlmICgob3B0LndpbmRvd0JpdHMgPiAxNSkgJiYgKG9wdC53aW5kb3dCaXRzIDwgNDgpKSB7XG4gICAgLy8gYml0IDMgKDE2KSAtPiBnemlwcGVkIGRhdGFcbiAgICAvLyBiaXQgNCAoMzIpIC0+IGF1dG9kZXRlY3QgZ3ppcC9kZWZsYXRlXG4gICAgaWYgKChvcHQud2luZG93Qml0cyAmIDE1KSA9PT0gMCkge1xuICAgICAgb3B0LndpbmRvd0JpdHMgfD0gMTU7XG4gICAgfVxuICB9XG5cbiAgdGhpcy5lcnIgICAgPSAwOyAgICAgIC8vIGVycm9yIGNvZGUsIGlmIGhhcHBlbnMgKDAgPSBaX09LKVxuICB0aGlzLm1zZyAgICA9ICcnOyAgICAgLy8gZXJyb3IgbWVzc2FnZVxuICB0aGlzLmVuZGVkICA9IGZhbHNlOyAgLy8gdXNlZCB0byBhdm9pZCBtdWx0aXBsZSBvbkVuZCgpIGNhbGxzXG4gIHRoaXMuY2h1bmtzID0gW107ICAgICAvLyBjaHVua3Mgb2YgY29tcHJlc3NlZCBkYXRhXG5cbiAgdGhpcy5zdHJtICAgPSBuZXcgWlN0cmVhbSgpO1xuICB0aGlzLnN0cm0uYXZhaWxfb3V0ID0gMDtcblxuICB2YXIgc3RhdHVzICA9IHpsaWJfaW5mbGF0ZS5pbmZsYXRlSW5pdDIoXG4gICAgdGhpcy5zdHJtLFxuICAgIG9wdC53aW5kb3dCaXRzXG4gICk7XG5cbiAgaWYgKHN0YXR1cyAhPT0gYy5aX09LKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1zZ1tzdGF0dXNdKTtcbiAgfVxuXG4gIHRoaXMuaGVhZGVyID0gbmV3IEdaaGVhZGVyKCk7XG5cbiAgemxpYl9pbmZsYXRlLmluZmxhdGVHZXRIZWFkZXIodGhpcy5zdHJtLCB0aGlzLmhlYWRlcik7XG59XG5cbi8qKlxuICogSW5mbGF0ZSNwdXNoKGRhdGFbLCBtb2RlXSkgLT4gQm9vbGVhblxuICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fEFycmF5QnVmZmVyfFN0cmluZyk6IGlucHV0IGRhdGFcbiAqIC0gbW9kZSAoTnVtYmVyfEJvb2xlYW4pOiAwLi42IGZvciBjb3JyZXNwb25kaW5nIFpfTk9fRkxVU0guLlpfVFJFRSBtb2Rlcy5cbiAqICAgU2VlIGNvbnN0YW50cy4gU2tpcHBlZCBvciBgZmFsc2VgIG1lYW5zIFpfTk9fRkxVU0gsIGB0cnVlYCBtZWFuc2ggWl9GSU5JU0guXG4gKlxuICogU2VuZHMgaW5wdXQgZGF0YSB0byBpbmZsYXRlIHBpcGUsIGdlbmVyYXRpbmcgW1tJbmZsYXRlI29uRGF0YV1dIGNhbGxzIHdpdGhcbiAqIG5ldyBvdXRwdXQgY2h1bmtzLiBSZXR1cm5zIGB0cnVlYCBvbiBzdWNjZXNzLiBUaGUgbGFzdCBkYXRhIGJsb2NrIG11c3QgaGF2ZVxuICogbW9kZSBaX0ZJTklTSCAob3IgYHRydWVgKS4gVGhhdCB3aWxsIGZsdXNoIGludGVybmFsIHBlbmRpbmcgYnVmZmVycyBhbmQgY2FsbFxuICogW1tJbmZsYXRlI29uRW5kXV0uIEZvciBpbnRlcmltIGV4cGxpY2l0IGZsdXNoZXMgKHdpdGhvdXQgZW5kaW5nIHRoZSBzdHJlYW0pIHlvdVxuICogY2FuIHVzZSBtb2RlIFpfU1lOQ19GTFVTSCwga2VlcGluZyB0aGUgZGVjb21wcmVzc2lvbiBjb250ZXh0LlxuICpcbiAqIE9uIGZhaWwgY2FsbCBbW0luZmxhdGUjb25FbmRdXSB3aXRoIGVycm9yIGNvZGUgYW5kIHJldHVybiBmYWxzZS5cbiAqXG4gKiBXZSBzdHJvbmdseSByZWNvbW1lbmQgdG8gdXNlIGBVaW50OEFycmF5YCBvbiBpbnB1dCBmb3IgYmVzdCBzcGVlZCAob3V0cHV0XG4gKiBmb3JtYXQgaXMgZGV0ZWN0ZWQgYXV0b21hdGljYWxseSkuIEFsc28sIGRvbid0IHNraXAgbGFzdCBwYXJhbSBhbmQgYWx3YXlzXG4gKiB1c2UgdGhlIHNhbWUgdHlwZSBpbiB5b3VyIGNvZGUgKGJvb2xlYW4gb3IgbnVtYmVyKS4gVGhhdCB3aWxsIGltcHJvdmUgSlMgc3BlZWQuXG4gKlxuICogRm9yIHJlZ3VsYXIgYEFycmF5YC1zIG1ha2Ugc3VyZSBhbGwgZWxlbWVudHMgYXJlIFswLi4yNTVdLlxuICpcbiAqICMjIyMjIEV4YW1wbGVcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBwdXNoKGNodW5rLCBmYWxzZSk7IC8vIHB1c2ggb25lIG9mIGRhdGEgY2h1bmtzXG4gKiAuLi5cbiAqIHB1c2goY2h1bmssIHRydWUpOyAgLy8gcHVzaCBsYXN0IGNodW5rXG4gKiBgYGBcbiAqKi9cbkluZmxhdGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoZGF0YSwgbW9kZSkge1xuICB2YXIgc3RybSA9IHRoaXMuc3RybTtcbiAgdmFyIGNodW5rU2l6ZSA9IHRoaXMub3B0aW9ucy5jaHVua1NpemU7XG4gIHZhciBkaWN0aW9uYXJ5ID0gdGhpcy5vcHRpb25zLmRpY3Rpb25hcnk7XG4gIHZhciBzdGF0dXMsIF9tb2RlO1xuICB2YXIgbmV4dF9vdXRfdXRmOCwgdGFpbCwgdXRmOHN0cjtcbiAgdmFyIGRpY3Q7XG5cbiAgLy8gRmxhZyB0byBwcm9wZXJseSBwcm9jZXNzIFpfQlVGX0VSUk9SIG9uIHRlc3RpbmcgaW5mbGF0ZSBjYWxsXG4gIC8vIHdoZW4gd2UgY2hlY2sgdGhhdCBhbGwgb3V0cHV0IGRhdGEgd2FzIGZsdXNoZWQuXG4gIHZhciBhbGxvd0J1ZkVycm9yID0gZmFsc2U7XG5cbiAgaWYgKHRoaXMuZW5kZWQpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIF9tb2RlID0gKG1vZGUgPT09IH5+bW9kZSkgPyBtb2RlIDogKChtb2RlID09PSB0cnVlKSA/IGMuWl9GSU5JU0ggOiBjLlpfTk9fRkxVU0gpO1xuXG4gIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWRcbiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgIC8vIE9ubHkgYmluYXJ5IHN0cmluZ3MgY2FuIGJlIGRlY29tcHJlc3NlZCBvbiBwcmFjdGljZVxuICAgIHN0cm0uaW5wdXQgPSBzdHJpbmdzLmJpbnN0cmluZzJidWYoZGF0YSk7XG4gIH0gZWxzZSBpZiAodG9TdHJpbmcuY2FsbChkYXRhKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJykge1xuICAgIHN0cm0uaW5wdXQgPSBuZXcgVWludDhBcnJheShkYXRhKTtcbiAgfSBlbHNlIHtcbiAgICBzdHJtLmlucHV0ID0gZGF0YTtcbiAgfVxuXG4gIHN0cm0ubmV4dF9pbiA9IDA7XG4gIHN0cm0uYXZhaWxfaW4gPSBzdHJtLmlucHV0Lmxlbmd0aDtcblxuICBkbyB7XG4gICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICBzdHJtLm91dHB1dCA9IG5ldyB1dGlscy5CdWY4KGNodW5rU2l6ZSk7XG4gICAgICBzdHJtLm5leHRfb3V0ID0gMDtcbiAgICAgIHN0cm0uYXZhaWxfb3V0ID0gY2h1bmtTaXplO1xuICAgIH1cblxuICAgIHN0YXR1cyA9IHpsaWJfaW5mbGF0ZS5pbmZsYXRlKHN0cm0sIGMuWl9OT19GTFVTSCk7ICAgIC8qIG5vIGJhZCByZXR1cm4gdmFsdWUgKi9cblxuICAgIGlmIChzdGF0dXMgPT09IGMuWl9ORUVEX0RJQ1QgJiYgZGljdGlvbmFyeSkge1xuICAgICAgLy8gQ29udmVydCBkYXRhIGlmIG5lZWRlZFxuICAgICAgaWYgKHR5cGVvZiBkaWN0aW9uYXJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICBkaWN0ID0gc3RyaW5ncy5zdHJpbmcyYnVmKGRpY3Rpb25hcnkpO1xuICAgICAgfSBlbHNlIGlmICh0b1N0cmluZy5jYWxsKGRpY3Rpb25hcnkpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nKSB7XG4gICAgICAgIGRpY3QgPSBuZXcgVWludDhBcnJheShkaWN0aW9uYXJ5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpY3QgPSBkaWN0aW9uYXJ5O1xuICAgICAgfVxuXG4gICAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLCBkaWN0KTtcblxuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IGMuWl9CVUZfRVJST1IgJiYgYWxsb3dCdWZFcnJvciA9PT0gdHJ1ZSkge1xuICAgICAgc3RhdHVzID0gYy5aX09LO1xuICAgICAgYWxsb3dCdWZFcnJvciA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgIT09IGMuWl9TVFJFQU1fRU5EICYmIHN0YXR1cyAhPT0gYy5aX09LKSB7XG4gICAgICB0aGlzLm9uRW5kKHN0YXR1cyk7XG4gICAgICB0aGlzLmVuZGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoc3RybS5uZXh0X291dCkge1xuICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwIHx8IHN0YXR1cyA9PT0gYy5aX1NUUkVBTV9FTkQgfHwgKHN0cm0uYXZhaWxfaW4gPT09IDAgJiYgKF9tb2RlID09PSBjLlpfRklOSVNIIHx8IF9tb2RlID09PSBjLlpfU1lOQ19GTFVTSCkpKSB7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50byA9PT0gJ3N0cmluZycpIHtcblxuICAgICAgICAgIG5leHRfb3V0X3V0ZjggPSBzdHJpbmdzLnV0Zjhib3JkZXIoc3RybS5vdXRwdXQsIHN0cm0ubmV4dF9vdXQpO1xuXG4gICAgICAgICAgdGFpbCA9IHN0cm0ubmV4dF9vdXQgLSBuZXh0X291dF91dGY4O1xuICAgICAgICAgIHV0ZjhzdHIgPSBzdHJpbmdzLmJ1ZjJzdHJpbmcoc3RybS5vdXRwdXQsIG5leHRfb3V0X3V0ZjgpO1xuXG4gICAgICAgICAgLy8gbW92ZSB0YWlsXG4gICAgICAgICAgc3RybS5uZXh0X291dCA9IHRhaWw7XG4gICAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBjaHVua1NpemUgLSB0YWlsO1xuICAgICAgICAgIGlmICh0YWlsKSB7IHV0aWxzLmFycmF5U2V0KHN0cm0ub3V0cHV0LCBzdHJtLm91dHB1dCwgbmV4dF9vdXRfdXRmOCwgdGFpbCwgMCk7IH1cblxuICAgICAgICAgIHRoaXMub25EYXRhKHV0ZjhzdHIpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5vbkRhdGEodXRpbHMuc2hyaW5rQnVmKHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0KSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXaGVuIG5vIG1vcmUgaW5wdXQgZGF0YSwgd2Ugc2hvdWxkIGNoZWNrIHRoYXQgaW50ZXJuYWwgaW5mbGF0ZSBidWZmZXJzXG4gICAgLy8gYXJlIGZsdXNoZWQuIFRoZSBvbmx5IHdheSB0byBkbyBpdCB3aGVuIGF2YWlsX291dCA9IDAgLSBydW4gb25lIG1vcmVcbiAgICAvLyBpbmZsYXRlIHBhc3MuIEJ1dCBpZiBvdXRwdXQgZGF0YSBub3QgZXhpc3RzLCBpbmZsYXRlIHJldHVybiBaX0JVRl9FUlJPUi5cbiAgICAvLyBIZXJlIHdlIHNldCBmbGFnIHRvIHByb2Nlc3MgdGhpcyBlcnJvciBwcm9wZXJseS5cbiAgICAvL1xuICAgIC8vIE5PVEUuIERlZmxhdGUgZG9lcyBub3QgcmV0dXJuIGVycm9yIGluIHRoaXMgY2FzZSBhbmQgZG9lcyBub3QgbmVlZHMgc3VjaFxuICAgIC8vIGxvZ2ljLlxuICAgIGlmIChzdHJtLmF2YWlsX2luID09PSAwICYmIHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICBhbGxvd0J1ZkVycm9yID0gdHJ1ZTtcbiAgICB9XG5cbiAgfSB3aGlsZSAoKHN0cm0uYXZhaWxfaW4gPiAwIHx8IHN0cm0uYXZhaWxfb3V0ID09PSAwKSAmJiBzdGF0dXMgIT09IGMuWl9TVFJFQU1fRU5EKTtcblxuICBpZiAoc3RhdHVzID09PSBjLlpfU1RSRUFNX0VORCkge1xuICAgIF9tb2RlID0gYy5aX0ZJTklTSDtcbiAgfVxuXG4gIC8vIEZpbmFsaXplIG9uIHRoZSBsYXN0IGNodW5rLlxuICBpZiAoX21vZGUgPT09IGMuWl9GSU5JU0gpIHtcbiAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZUVuZCh0aGlzLnN0cm0pO1xuICAgIHRoaXMub25FbmQoc3RhdHVzKTtcbiAgICB0aGlzLmVuZGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gc3RhdHVzID09PSBjLlpfT0s7XG4gIH1cblxuICAvLyBjYWxsYmFjayBpbnRlcmltIHJlc3VsdHMgaWYgWl9TWU5DX0ZMVVNILlxuICBpZiAoX21vZGUgPT09IGMuWl9TWU5DX0ZMVVNIKSB7XG4gICAgdGhpcy5vbkVuZChjLlpfT0spO1xuICAgIHN0cm0uYXZhaWxfb3V0ID0gMDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuXG4vKipcbiAqIEluZmxhdGUjb25EYXRhKGNodW5rKSAtPiBWb2lkXG4gKiAtIGNodW5rIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IG91cHV0IGRhdGEuIFR5cGUgb2YgYXJyYXkgZGVwZW5kc1xuICogICBvbiBqcyBlbmdpbmUgc3VwcG9ydC4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCwgZWFjaCBjaHVua1xuICogICB3aWxsIGJlIHN0cmluZy5cbiAqXG4gKiBCeSBkZWZhdWx0LCBzdG9yZXMgZGF0YSBibG9ja3MgaW4gYGNodW5rc1tdYCBwcm9wZXJ0eSBhbmQgZ2x1ZVxuICogdGhvc2UgaW4gYG9uRW5kYC4gT3ZlcnJpZGUgdGhpcyBoYW5kbGVyLCBpZiB5b3UgbmVlZCBhbm90aGVyIGJlaGF2aW91ci5cbiAqKi9cbkluZmxhdGUucHJvdG90eXBlLm9uRGF0YSA9IGZ1bmN0aW9uIChjaHVuaykge1xuICB0aGlzLmNodW5rcy5wdXNoKGNodW5rKTtcbn07XG5cblxuLyoqXG4gKiBJbmZsYXRlI29uRW5kKHN0YXR1cykgLT4gVm9pZFxuICogLSBzdGF0dXMgKE51bWJlcik6IGluZmxhdGUgc3RhdHVzLiAwIChaX09LKSBvbiBzdWNjZXNzLFxuICogICBvdGhlciBpZiBub3QuXG4gKlxuICogQ2FsbGVkIGVpdGhlciBhZnRlciB5b3UgdGVsbCBpbmZsYXRlIHRoYXQgdGhlIGlucHV0IHN0cmVhbSBpc1xuICogY29tcGxldGUgKFpfRklOSVNIKSBvciBzaG91bGQgYmUgZmx1c2hlZCAoWl9TWU5DX0ZMVVNIKVxuICogb3IgaWYgYW4gZXJyb3IgaGFwcGVuZWQuIEJ5IGRlZmF1bHQgLSBqb2luIGNvbGxlY3RlZCBjaHVua3MsXG4gKiBmcmVlIG1lbW9yeSBhbmQgZmlsbCBgcmVzdWx0c2AgLyBgZXJyYCBwcm9wZXJ0aWVzLlxuICoqL1xuSW5mbGF0ZS5wcm90b3R5cGUub25FbmQgPSBmdW5jdGlvbiAoc3RhdHVzKSB7XG4gIC8vIE9uIHN1Y2Nlc3MgLSBqb2luXG4gIGlmIChzdGF0dXMgPT09IGMuWl9PSykge1xuICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBHbHVlICYgY29udmVydCBoZXJlLCB1bnRpbCB3ZSB0ZWFjaCBwYWtvIHRvIHNlbmRcbiAgICAgIC8vIHV0ZjggYWxsaWduZWQgc3RyaW5ncyB0byBvbkRhdGFcbiAgICAgIHRoaXMucmVzdWx0ID0gdGhpcy5jaHVua3Muam9pbignJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzdWx0ID0gdXRpbHMuZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcyk7XG4gICAgfVxuICB9XG4gIHRoaXMuY2h1bmtzID0gW107XG4gIHRoaXMuZXJyID0gc3RhdHVzO1xuICB0aGlzLm1zZyA9IHRoaXMuc3RybS5tc2c7XG59O1xuXG5cbi8qKlxuICogaW5mbGF0ZShkYXRhWywgb3B0aW9uc10pIC0+IFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nXG4gKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nKTogaW5wdXQgZGF0YSB0byBkZWNvbXByZXNzLlxuICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy5cbiAqXG4gKiBEZWNvbXByZXNzIGBkYXRhYCB3aXRoIGluZmxhdGUvdW5nemlwIGFuZCBgb3B0aW9uc2AuIEF1dG9kZXRlY3RcbiAqIGZvcm1hdCB2aWEgd3JhcHBlciBoZWFkZXIgYnkgZGVmYXVsdC4gVGhhdCdzIHdoeSB3ZSBkb24ndCBwcm92aWRlXG4gKiBzZXBhcmF0ZSBgdW5nemlwYCBtZXRob2QuXG4gKlxuICogU3VwcG9ydGVkIG9wdGlvbnMgYXJlOlxuICpcbiAqIC0gd2luZG93Qml0c1xuICpcbiAqIFtodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWRdKGh0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZClcbiAqIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIFN1Z2FyIChvcHRpb25zKTpcbiAqXG4gKiAtIGByYXdgIChCb29sZWFuKSAtIHNheSB0aGF0IHdlIHdvcmsgd2l0aCByYXcgc3RyZWFtLCBpZiB5b3UgZG9uJ3Qgd2lzaCB0byBzcGVjaWZ5XG4gKiAgIG5lZ2F0aXZlIHdpbmRvd0JpdHMgaW1wbGljaXRseS5cbiAqIC0gYHRvYCAoU3RyaW5nKSAtIGlmIGVxdWFsIHRvICdzdHJpbmcnLCB0aGVuIHJlc3VsdCB3aWxsIGJlIGNvbnZlcnRlZFxuICogICBmcm9tIHV0ZjggdG8gdXRmMTYgKGphdmFzY3JpcHQpIHN0cmluZy4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCxcbiAqICAgY2h1bmsgbGVuZ3RoIGNhbiBkaWZmZXIgZnJvbSBgY2h1bmtTaXplYCwgZGVwZW5kaW5nIG9uIGNvbnRlbnQuXG4gKlxuICpcbiAqICMjIyMjIEV4YW1wbGU6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogdmFyIHBha28gPSByZXF1aXJlKCdwYWtvJylcbiAqICAgLCBpbnB1dCA9IHBha28uZGVmbGF0ZShbMSwyLDMsNCw1LDYsNyw4LDldKVxuICogICAsIG91dHB1dDtcbiAqXG4gKiB0cnkge1xuICogICBvdXRwdXQgPSBwYWtvLmluZmxhdGUoaW5wdXQpO1xuICogfSBjYXRjaCAoZXJyKVxuICogICBjb25zb2xlLmxvZyhlcnIpO1xuICogfVxuICogYGBgXG4gKiovXG5mdW5jdGlvbiBpbmZsYXRlKGlucHV0LCBvcHRpb25zKSB7XG4gIHZhciBpbmZsYXRvciA9IG5ldyBJbmZsYXRlKG9wdGlvbnMpO1xuXG4gIGluZmxhdG9yLnB1c2goaW5wdXQsIHRydWUpO1xuXG4gIC8vIFRoYXQgd2lsbCBuZXZlciBoYXBwZW5zLCBpZiB5b3UgZG9uJ3QgY2hlYXQgd2l0aCBvcHRpb25zIDopXG4gIGlmIChpbmZsYXRvci5lcnIpIHsgdGhyb3cgaW5mbGF0b3IubXNnOyB9XG5cbiAgcmV0dXJuIGluZmxhdG9yLnJlc3VsdDtcbn1cblxuXG4vKipcbiAqIGluZmxhdGVSYXcoZGF0YVssIG9wdGlvbnNdKSAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZ1xuICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IGlucHV0IGRhdGEgdG8gZGVjb21wcmVzcy5cbiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBpbmZsYXRlIG9wdGlvbnMuXG4gKlxuICogVGhlIHNhbWUgYXMgW1tpbmZsYXRlXV0sIGJ1dCBjcmVhdGVzIHJhdyBkYXRhLCB3aXRob3V0IHdyYXBwZXJcbiAqIChoZWFkZXIgYW5kIGFkbGVyMzIgY3JjKS5cbiAqKi9cbmZ1bmN0aW9uIGluZmxhdGVSYXcoaW5wdXQsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIG9wdGlvbnMucmF3ID0gdHJ1ZTtcbiAgcmV0dXJuIGluZmxhdGUoaW5wdXQsIG9wdGlvbnMpO1xufVxuXG5cbi8qKlxuICogdW5nemlwKGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmdcbiAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheXxTdHJpbmcpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgaW5mbGF0ZSBvcHRpb25zLlxuICpcbiAqIEp1c3Qgc2hvcnRjdXQgdG8gW1tpbmZsYXRlXV0sIGJlY2F1c2UgaXQgYXV0b2RldGVjdHMgZm9ybWF0XG4gKiBieSBoZWFkZXIuY29udGVudC4gRG9uZSBmb3IgY29udmVuaWVuY2UuXG4gKiovXG5cblxuZXhwb3J0cy5JbmZsYXRlID0gSW5mbGF0ZTtcbmV4cG9ydHMuaW5mbGF0ZSA9IGluZmxhdGU7XG5leHBvcnRzLmluZmxhdGVSYXcgPSBpbmZsYXRlUmF3O1xuZXhwb3J0cy51bmd6aXAgID0gaW5mbGF0ZTtcbiIsIid1c2Ugc3RyaWN0JztcblxuXG52YXIgVFlQRURfT0sgPSAgKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJykgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIFVpbnQxNkFycmF5ICE9PSAndW5kZWZpbmVkJykgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIEludDMyQXJyYXkgIT09ICd1bmRlZmluZWQnKTtcblxuXG5leHBvcnRzLmFzc2lnbiA9IGZ1bmN0aW9uIChvYmogLypmcm9tMSwgZnJvbTIsIGZyb20zLCAuLi4qLykge1xuICB2YXIgc291cmNlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIHdoaWxlIChzb3VyY2VzLmxlbmd0aCkge1xuICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzLnNoaWZ0KCk7XG4gICAgaWYgKCFzb3VyY2UpIHsgY29udGludWU7IH1cblxuICAgIGlmICh0eXBlb2Ygc291cmNlICE9PSAnb2JqZWN0Jykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzb3VyY2UgKyAnbXVzdCBiZSBub24tb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgcCBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkocCkpIHtcbiAgICAgICAgb2JqW3BdID0gc291cmNlW3BdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59O1xuXG5cbi8vIHJlZHVjZSBidWZmZXIgc2l6ZSwgYXZvaWRpbmcgbWVtIGNvcHlcbmV4cG9ydHMuc2hyaW5rQnVmID0gZnVuY3Rpb24gKGJ1Ziwgc2l6ZSkge1xuICBpZiAoYnVmLmxlbmd0aCA9PT0gc2l6ZSkgeyByZXR1cm4gYnVmOyB9XG4gIGlmIChidWYuc3ViYXJyYXkpIHsgcmV0dXJuIGJ1Zi5zdWJhcnJheSgwLCBzaXplKTsgfVxuICBidWYubGVuZ3RoID0gc2l6ZTtcbiAgcmV0dXJuIGJ1Zjtcbn07XG5cblxudmFyIGZuVHlwZWQgPSB7XG4gIGFycmF5U2V0OiBmdW5jdGlvbiAoZGVzdCwgc3JjLCBzcmNfb2ZmcywgbGVuLCBkZXN0X29mZnMpIHtcbiAgICBpZiAoc3JjLnN1YmFycmF5ICYmIGRlc3Quc3ViYXJyYXkpIHtcbiAgICAgIGRlc3Quc2V0KHNyYy5zdWJhcnJheShzcmNfb2Zmcywgc3JjX29mZnMgKyBsZW4pLCBkZXN0X29mZnMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBGYWxsYmFjayB0byBvcmRpbmFyeSBhcnJheVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGRlc3RbZGVzdF9vZmZzICsgaV0gPSBzcmNbc3JjX29mZnMgKyBpXTtcbiAgICB9XG4gIH0sXG4gIC8vIEpvaW4gYXJyYXkgb2YgY2h1bmtzIHRvIHNpbmdsZSBhcnJheS5cbiAgZmxhdHRlbkNodW5rczogZnVuY3Rpb24gKGNodW5rcykge1xuICAgIHZhciBpLCBsLCBsZW4sIHBvcywgY2h1bmssIHJlc3VsdDtcblxuICAgIC8vIGNhbGN1bGF0ZSBkYXRhIGxlbmd0aFxuICAgIGxlbiA9IDA7XG4gICAgZm9yIChpID0gMCwgbCA9IGNodW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGxlbiArPSBjaHVua3NbaV0ubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIGpvaW4gY2h1bmtzXG4gICAgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbiAgICBwb3MgPSAwO1xuICAgIGZvciAoaSA9IDAsIGwgPSBjaHVua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBjaHVuayA9IGNodW5rc1tpXTtcbiAgICAgIHJlc3VsdC5zZXQoY2h1bmssIHBvcyk7XG4gICAgICBwb3MgKz0gY2h1bmsubGVuZ3RoO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn07XG5cbnZhciBmblVudHlwZWQgPSB7XG4gIGFycmF5U2V0OiBmdW5jdGlvbiAoZGVzdCwgc3JjLCBzcmNfb2ZmcywgbGVuLCBkZXN0X29mZnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBkZXN0W2Rlc3Rfb2ZmcyArIGldID0gc3JjW3NyY19vZmZzICsgaV07XG4gICAgfVxuICB9LFxuICAvLyBKb2luIGFycmF5IG9mIGNodW5rcyB0byBzaW5nbGUgYXJyYXkuXG4gIGZsYXR0ZW5DaHVua3M6IGZ1bmN0aW9uIChjaHVua3MpIHtcbiAgICByZXR1cm4gW10uY29uY2F0LmFwcGx5KFtdLCBjaHVua3MpO1xuICB9XG59O1xuXG5cbi8vIEVuYWJsZS9EaXNhYmxlIHR5cGVkIGFycmF5cyB1c2UsIGZvciB0ZXN0aW5nXG4vL1xuZXhwb3J0cy5zZXRUeXBlZCA9IGZ1bmN0aW9uIChvbikge1xuICBpZiAob24pIHtcbiAgICBleHBvcnRzLkJ1ZjggID0gVWludDhBcnJheTtcbiAgICBleHBvcnRzLkJ1ZjE2ID0gVWludDE2QXJyYXk7XG4gICAgZXhwb3J0cy5CdWYzMiA9IEludDMyQXJyYXk7XG4gICAgZXhwb3J0cy5hc3NpZ24oZXhwb3J0cywgZm5UeXBlZCk7XG4gIH0gZWxzZSB7XG4gICAgZXhwb3J0cy5CdWY4ICA9IEFycmF5O1xuICAgIGV4cG9ydHMuQnVmMTYgPSBBcnJheTtcbiAgICBleHBvcnRzLkJ1ZjMyID0gQXJyYXk7XG4gICAgZXhwb3J0cy5hc3NpZ24oZXhwb3J0cywgZm5VbnR5cGVkKTtcbiAgfVxufTtcblxuZXhwb3J0cy5zZXRUeXBlZChUWVBFRF9PSyk7XG4iLCIvLyBTdHJpbmcgZW5jb2RlL2RlY29kZSBoZWxwZXJzXG4ndXNlIHN0cmljdCc7XG5cblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi9jb21tb24nKTtcblxuXG4vLyBRdWljayBjaGVjayBpZiB3ZSBjYW4gdXNlIGZhc3QgYXJyYXkgdG8gYmluIHN0cmluZyBjb252ZXJzaW9uXG4vL1xuLy8gLSBhcHBseShBcnJheSkgY2FuIGZhaWwgb24gQW5kcm9pZCAyLjJcbi8vIC0gYXBwbHkoVWludDhBcnJheSkgY2FuIGZhaWwgb24gaU9TIDUuMSBTYWZhcnlcbi8vXG52YXIgU1RSX0FQUExZX09LID0gdHJ1ZTtcbnZhciBTVFJfQVBQTFlfVUlBX09LID0gdHJ1ZTtcblxudHJ5IHsgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBbIDAgXSk7IH0gY2F0Y2ggKF9fKSB7IFNUUl9BUFBMWV9PSyA9IGZhbHNlOyB9XG50cnkgeyBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KDEpKTsgfSBjYXRjaCAoX18pIHsgU1RSX0FQUExZX1VJQV9PSyA9IGZhbHNlOyB9XG5cblxuLy8gVGFibGUgd2l0aCB1dGY4IGxlbmd0aHMgKGNhbGN1bGF0ZWQgYnkgZmlyc3QgYnl0ZSBvZiBzZXF1ZW5jZSlcbi8vIE5vdGUsIHRoYXQgNSAmIDYtYnl0ZSB2YWx1ZXMgYW5kIHNvbWUgNC1ieXRlIHZhbHVlcyBjYW4gbm90IGJlIHJlcHJlc2VudGVkIGluIEpTLFxuLy8gYmVjYXVzZSBtYXggcG9zc2libGUgY29kZXBvaW50IGlzIDB4MTBmZmZmXG52YXIgX3V0ZjhsZW4gPSBuZXcgdXRpbHMuQnVmOCgyNTYpO1xuZm9yICh2YXIgcSA9IDA7IHEgPCAyNTY7IHErKykge1xuICBfdXRmOGxlbltxXSA9IChxID49IDI1MiA/IDYgOiBxID49IDI0OCA/IDUgOiBxID49IDI0MCA/IDQgOiBxID49IDIyNCA/IDMgOiBxID49IDE5MiA/IDIgOiAxKTtcbn1cbl91dGY4bGVuWzI1NF0gPSBfdXRmOGxlblsyNTRdID0gMTsgLy8gSW52YWxpZCBzZXF1ZW5jZSBzdGFydFxuXG5cbi8vIGNvbnZlcnQgc3RyaW5nIHRvIGFycmF5ICh0eXBlZCwgd2hlbiBwb3NzaWJsZSlcbmV4cG9ydHMuc3RyaW5nMmJ1ZiA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIGJ1ZiwgYywgYzIsIG1fcG9zLCBpLCBzdHJfbGVuID0gc3RyLmxlbmd0aCwgYnVmX2xlbiA9IDA7XG5cbiAgLy8gY291bnQgYmluYXJ5IHNpemVcbiAgZm9yIChtX3BvcyA9IDA7IG1fcG9zIDwgc3RyX2xlbjsgbV9wb3MrKykge1xuICAgIGMgPSBzdHIuY2hhckNvZGVBdChtX3Bvcyk7XG4gICAgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmIChtX3BvcyArIDEgPCBzdHJfbGVuKSkge1xuICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3BvcyArIDEpO1xuICAgICAgaWYgKChjMiAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xuICAgICAgICBjID0gMHgxMDAwMCArICgoYyAtIDB4ZDgwMCkgPDwgMTApICsgKGMyIC0gMHhkYzAwKTtcbiAgICAgICAgbV9wb3MrKztcbiAgICAgIH1cbiAgICB9XG4gICAgYnVmX2xlbiArPSBjIDwgMHg4MCA/IDEgOiBjIDwgMHg4MDAgPyAyIDogYyA8IDB4MTAwMDAgPyAzIDogNDtcbiAgfVxuXG4gIC8vIGFsbG9jYXRlIGJ1ZmZlclxuICBidWYgPSBuZXcgdXRpbHMuQnVmOChidWZfbGVuKTtcblxuICAvLyBjb252ZXJ0XG4gIGZvciAoaSA9IDAsIG1fcG9zID0gMDsgaSA8IGJ1Zl9sZW47IG1fcG9zKyspIHtcbiAgICBjID0gc3RyLmNoYXJDb2RlQXQobV9wb3MpO1xuICAgIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJiAobV9wb3MgKyAxIDwgc3RyX2xlbikpIHtcbiAgICAgIGMyID0gc3RyLmNoYXJDb2RlQXQobV9wb3MgKyAxKTtcbiAgICAgIGlmICgoYzIgJiAweGZjMDApID09PSAweGRjMDApIHtcbiAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgLSAweGQ4MDApIDw8IDEwKSArIChjMiAtIDB4ZGMwMCk7XG4gICAgICAgIG1fcG9zKys7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjIDwgMHg4MCkge1xuICAgICAgLyogb25lIGJ5dGUgKi9cbiAgICAgIGJ1ZltpKytdID0gYztcbiAgICB9IGVsc2UgaWYgKGMgPCAweDgwMCkge1xuICAgICAgLyogdHdvIGJ5dGVzICovXG4gICAgICBidWZbaSsrXSA9IDB4QzAgfCAoYyA+Pj4gNik7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyAmIDB4M2YpO1xuICAgIH0gZWxzZSBpZiAoYyA8IDB4MTAwMDApIHtcbiAgICAgIC8qIHRocmVlIGJ5dGVzICovXG4gICAgICBidWZbaSsrXSA9IDB4RTAgfCAoYyA+Pj4gMTIpO1xuICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgPj4+IDYgJiAweDNmKTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjICYgMHgzZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qIGZvdXIgYnl0ZXMgKi9cbiAgICAgIGJ1ZltpKytdID0gMHhmMCB8IChjID4+PiAxOCk7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gMTIgJiAweDNmKTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjID4+PiA2ICYgMHgzZik7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyAmIDB4M2YpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWY7XG59O1xuXG4vLyBIZWxwZXIgKHVzZWQgaW4gMiBwbGFjZXMpXG5mdW5jdGlvbiBidWYyYmluc3RyaW5nKGJ1ZiwgbGVuKSB7XG4gIC8vIHVzZSBmYWxsYmFjayBmb3IgYmlnIGFycmF5cyB0byBhdm9pZCBzdGFjayBvdmVyZmxvd1xuICBpZiAobGVuIDwgNjU1MzcpIHtcbiAgICBpZiAoKGJ1Zi5zdWJhcnJheSAmJiBTVFJfQVBQTFlfVUlBX09LKSB8fCAoIWJ1Zi5zdWJhcnJheSAmJiBTVFJfQVBQTFlfT0spKSB7XG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCB1dGlscy5zaHJpbmtCdWYoYnVmLCBsZW4pKTtcbiAgICB9XG4gIH1cblxuICB2YXIgcmVzdWx0ID0gJyc7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cblxuLy8gQ29udmVydCBieXRlIGFycmF5IHRvIGJpbmFyeSBzdHJpbmdcbmV4cG9ydHMuYnVmMmJpbnN0cmluZyA9IGZ1bmN0aW9uIChidWYpIHtcbiAgcmV0dXJuIGJ1ZjJiaW5zdHJpbmcoYnVmLCBidWYubGVuZ3RoKTtcbn07XG5cblxuLy8gQ29udmVydCBiaW5hcnkgc3RyaW5nICh0eXBlZCwgd2hlbiBwb3NzaWJsZSlcbmV4cG9ydHMuYmluc3RyaW5nMmJ1ZiA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIGJ1ZiA9IG5ldyB1dGlscy5CdWY4KHN0ci5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMCwgbGVuID0gYnVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgYnVmW2ldID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gIH1cbiAgcmV0dXJuIGJ1Zjtcbn07XG5cblxuLy8gY29udmVydCBhcnJheSB0byBzdHJpbmdcbmV4cG9ydHMuYnVmMnN0cmluZyA9IGZ1bmN0aW9uIChidWYsIG1heCkge1xuICB2YXIgaSwgb3V0LCBjLCBjX2xlbjtcbiAgdmFyIGxlbiA9IG1heCB8fCBidWYubGVuZ3RoO1xuXG4gIC8vIFJlc2VydmUgbWF4IHBvc3NpYmxlIGxlbmd0aCAoMiB3b3JkcyBwZXIgY2hhcilcbiAgLy8gTkI6IGJ5IHVua25vd24gcmVhc29ucywgQXJyYXkgaXMgc2lnbmlmaWNhbnRseSBmYXN0ZXIgZm9yXG4gIC8vICAgICBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5IHRoYW4gVWludDE2QXJyYXkuXG4gIHZhciB1dGYxNmJ1ZiA9IG5ldyBBcnJheShsZW4gKiAyKTtcblxuICBmb3IgKG91dCA9IDAsIGkgPSAwOyBpIDwgbGVuOykge1xuICAgIGMgPSBidWZbaSsrXTtcbiAgICAvLyBxdWljayBwcm9jZXNzIGFzY2lpXG4gICAgaWYgKGMgPCAweDgwKSB7IHV0ZjE2YnVmW291dCsrXSA9IGM7IGNvbnRpbnVlOyB9XG5cbiAgICBjX2xlbiA9IF91dGY4bGVuW2NdO1xuICAgIC8vIHNraXAgNSAmIDYgYnl0ZSBjb2Rlc1xuICAgIGlmIChjX2xlbiA+IDQpIHsgdXRmMTZidWZbb3V0KytdID0gMHhmZmZkOyBpICs9IGNfbGVuIC0gMTsgY29udGludWU7IH1cblxuICAgIC8vIGFwcGx5IG1hc2sgb24gZmlyc3QgYnl0ZVxuICAgIGMgJj0gY19sZW4gPT09IDIgPyAweDFmIDogY19sZW4gPT09IDMgPyAweDBmIDogMHgwNztcbiAgICAvLyBqb2luIHRoZSByZXN0XG4gICAgd2hpbGUgKGNfbGVuID4gMSAmJiBpIDwgbGVuKSB7XG4gICAgICBjID0gKGMgPDwgNikgfCAoYnVmW2krK10gJiAweDNmKTtcbiAgICAgIGNfbGVuLS07XG4gICAgfVxuXG4gICAgLy8gdGVybWluYXRlZCBieSBlbmQgb2Ygc3RyaW5nP1xuICAgIGlmIChjX2xlbiA+IDEpIHsgdXRmMTZidWZbb3V0KytdID0gMHhmZmZkOyBjb250aW51ZTsgfVxuXG4gICAgaWYgKGMgPCAweDEwMDAwKSB7XG4gICAgICB1dGYxNmJ1ZltvdXQrK10gPSBjO1xuICAgIH0gZWxzZSB7XG4gICAgICBjIC09IDB4MTAwMDA7XG4gICAgICB1dGYxNmJ1ZltvdXQrK10gPSAweGQ4MDAgfCAoKGMgPj4gMTApICYgMHgzZmYpO1xuICAgICAgdXRmMTZidWZbb3V0KytdID0gMHhkYzAwIHwgKGMgJiAweDNmZik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1ZjJiaW5zdHJpbmcodXRmMTZidWYsIG91dCk7XG59O1xuXG5cbi8vIENhbGN1bGF0ZSBtYXggcG9zc2libGUgcG9zaXRpb24gaW4gdXRmOCBidWZmZXIsXG4vLyB0aGF0IHdpbGwgbm90IGJyZWFrIHNlcXVlbmNlLiBJZiB0aGF0J3Mgbm90IHBvc3NpYmxlXG4vLyAtICh2ZXJ5IHNtYWxsIGxpbWl0cykgcmV0dXJuIG1heCBzaXplIGFzIGlzLlxuLy9cbi8vIGJ1ZltdIC0gdXRmOCBieXRlcyBhcnJheVxuLy8gbWF4ICAgLSBsZW5ndGggbGltaXQgKG1hbmRhdG9yeSk7XG5leHBvcnRzLnV0Zjhib3JkZXIgPSBmdW5jdGlvbiAoYnVmLCBtYXgpIHtcbiAgdmFyIHBvcztcblxuICBtYXggPSBtYXggfHwgYnVmLmxlbmd0aDtcbiAgaWYgKG1heCA+IGJ1Zi5sZW5ndGgpIHsgbWF4ID0gYnVmLmxlbmd0aDsgfVxuXG4gIC8vIGdvIGJhY2sgZnJvbSBsYXN0IHBvc2l0aW9uLCB1bnRpbCBzdGFydCBvZiBzZXF1ZW5jZSBmb3VuZFxuICBwb3MgPSBtYXggLSAxO1xuICB3aGlsZSAocG9zID49IDAgJiYgKGJ1Zltwb3NdICYgMHhDMCkgPT09IDB4ODApIHsgcG9zLS07IH1cblxuICAvLyBGdWNrdXAgLSB2ZXJ5IHNtYWxsIGFuZCBicm9rZW4gc2VxdWVuY2UsXG4gIC8vIHJldHVybiBtYXgsIGJlY2F1c2Ugd2Ugc2hvdWxkIHJldHVybiBzb21ldGhpbmcgYW55d2F5LlxuICBpZiAocG9zIDwgMCkgeyByZXR1cm4gbWF4OyB9XG5cbiAgLy8gSWYgd2UgY2FtZSB0byBzdGFydCBvZiBidWZmZXIgLSB0aGF0IG1lYW5zIHZ1ZmZlciBpcyB0b28gc21hbGwsXG4gIC8vIHJldHVybiBtYXggdG9vLlxuICBpZiAocG9zID09PSAwKSB7IHJldHVybiBtYXg7IH1cblxuICByZXR1cm4gKHBvcyArIF91dGY4bGVuW2J1Zltwb3NdXSA+IG1heCkgPyBwb3MgOiBtYXg7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBOb3RlOiBhZGxlcjMyIHRha2VzIDEyJSBmb3IgbGV2ZWwgMCBhbmQgMiUgZm9yIGxldmVsIDYuXG4vLyBJdCBkb2Vzbid0IHdvcnRoIHRvIG1ha2UgYWRkaXRpb25hbCBvcHRpbWl6YXRpb25hIGFzIGluIG9yaWdpbmFsLlxuLy8gU21hbGwgc2l6ZSBpcyBwcmVmZXJhYmxlLlxuXG5mdW5jdGlvbiBhZGxlcjMyKGFkbGVyLCBidWYsIGxlbiwgcG9zKSB7XG4gIHZhciBzMSA9IChhZGxlciAmIDB4ZmZmZikgfDAsXG4gICAgICBzMiA9ICgoYWRsZXIgPj4+IDE2KSAmIDB4ZmZmZikgfDAsXG4gICAgICBuID0gMDtcblxuICB3aGlsZSAobGVuICE9PSAwKSB7XG4gICAgLy8gU2V0IGxpbWl0IH4gdHdpY2UgbGVzcyB0aGFuIDU1NTIsIHRvIGtlZXBcbiAgICAvLyBzMiBpbiAzMS1iaXRzLCBiZWNhdXNlIHdlIGZvcmNlIHNpZ25lZCBpbnRzLlxuICAgIC8vIGluIG90aGVyIGNhc2UgJT0gd2lsbCBmYWlsLlxuICAgIG4gPSBsZW4gPiAyMDAwID8gMjAwMCA6IGxlbjtcbiAgICBsZW4gLT0gbjtcblxuICAgIGRvIHtcbiAgICAgIHMxID0gKHMxICsgYnVmW3BvcysrXSkgfDA7XG4gICAgICBzMiA9IChzMiArIHMxKSB8MDtcbiAgICB9IHdoaWxlICgtLW4pO1xuXG4gICAgczEgJT0gNjU1MjE7XG4gICAgczIgJT0gNjU1MjE7XG4gIH1cblxuICByZXR1cm4gKHMxIHwgKHMyIDw8IDE2KSkgfDA7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBhZGxlcjMyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIC8qIEFsbG93ZWQgZmx1c2ggdmFsdWVzOyBzZWUgZGVmbGF0ZSgpIGFuZCBpbmZsYXRlKCkgYmVsb3cgZm9yIGRldGFpbHMgKi9cbiAgWl9OT19GTFVTSDogICAgICAgICAwLFxuICBaX1BBUlRJQUxfRkxVU0g6ICAgIDEsXG4gIFpfU1lOQ19GTFVTSDogICAgICAgMixcbiAgWl9GVUxMX0ZMVVNIOiAgICAgICAzLFxuICBaX0ZJTklTSDogICAgICAgICAgIDQsXG4gIFpfQkxPQ0s6ICAgICAgICAgICAgNSxcbiAgWl9UUkVFUzogICAgICAgICAgICA2LFxuXG4gIC8qIFJldHVybiBjb2RlcyBmb3IgdGhlIGNvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gZnVuY3Rpb25zLiBOZWdhdGl2ZSB2YWx1ZXNcbiAgKiBhcmUgZXJyb3JzLCBwb3NpdGl2ZSB2YWx1ZXMgYXJlIHVzZWQgZm9yIHNwZWNpYWwgYnV0IG5vcm1hbCBldmVudHMuXG4gICovXG4gIFpfT0s6ICAgICAgICAgICAgICAgMCxcbiAgWl9TVFJFQU1fRU5EOiAgICAgICAxLFxuICBaX05FRURfRElDVDogICAgICAgIDIsXG4gIFpfRVJSTk86ICAgICAgICAgICAtMSxcbiAgWl9TVFJFQU1fRVJST1I6ICAgIC0yLFxuICBaX0RBVEFfRVJST1I6ICAgICAgLTMsXG4gIC8vWl9NRU1fRVJST1I6ICAgICAtNCxcbiAgWl9CVUZfRVJST1I6ICAgICAgIC01LFxuICAvL1pfVkVSU0lPTl9FUlJPUjogLTYsXG5cbiAgLyogY29tcHJlc3Npb24gbGV2ZWxzICovXG4gIFpfTk9fQ09NUFJFU1NJT046ICAgICAgICAgMCxcbiAgWl9CRVNUX1NQRUVEOiAgICAgICAgICAgICAxLFxuICBaX0JFU1RfQ09NUFJFU1NJT046ICAgICAgIDksXG4gIFpfREVGQVVMVF9DT01QUkVTU0lPTjogICAtMSxcblxuXG4gIFpfRklMVEVSRUQ6ICAgICAgICAgICAgICAgMSxcbiAgWl9IVUZGTUFOX09OTFk6ICAgICAgICAgICAyLFxuICBaX1JMRTogICAgICAgICAgICAgICAgICAgIDMsXG4gIFpfRklYRUQ6ICAgICAgICAgICAgICAgICAgNCxcbiAgWl9ERUZBVUxUX1NUUkFURUdZOiAgICAgICAwLFxuXG4gIC8qIFBvc3NpYmxlIHZhbHVlcyBvZiB0aGUgZGF0YV90eXBlIGZpZWxkICh0aG91Z2ggc2VlIGluZmxhdGUoKSkgKi9cbiAgWl9CSU5BUlk6ICAgICAgICAgICAgICAgICAwLFxuICBaX1RFWFQ6ICAgICAgICAgICAgICAgICAgIDEsXG4gIC8vWl9BU0NJSTogICAgICAgICAgICAgICAgMSwgLy8gPSBaX1RFWFQgKGRlcHJlY2F0ZWQpXG4gIFpfVU5LTk9XTjogICAgICAgICAgICAgICAgMixcblxuICAvKiBUaGUgZGVmbGF0ZSBjb21wcmVzc2lvbiBtZXRob2QgKi9cbiAgWl9ERUZMQVRFRDogICAgICAgICAgICAgICA4XG4gIC8vWl9OVUxMOiAgICAgICAgICAgICAgICAgbnVsbCAvLyBVc2UgLTEgb3IgbnVsbCBpbmxpbmUsIGRlcGVuZGluZyBvbiB2YXIgdHlwZVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gTm90ZTogd2UgY2FuJ3QgZ2V0IHNpZ25pZmljYW50IHNwZWVkIGJvb3N0IGhlcmUuXG4vLyBTbyB3cml0ZSBjb2RlIHRvIG1pbmltaXplIHNpemUgLSBubyBwcmVnZW5lcmF0ZWQgdGFibGVzXG4vLyBhbmQgYXJyYXkgdG9vbHMgZGVwZW5kZW5jaWVzLlxuXG5cbi8vIFVzZSBvcmRpbmFyeSBhcnJheSwgc2luY2UgdW50eXBlZCBtYWtlcyBubyBib29zdCBoZXJlXG5mdW5jdGlvbiBtYWtlVGFibGUoKSB7XG4gIHZhciBjLCB0YWJsZSA9IFtdO1xuXG4gIGZvciAodmFyIG4gPSAwOyBuIDwgMjU2OyBuKyspIHtcbiAgICBjID0gbjtcbiAgICBmb3IgKHZhciBrID0gMDsgayA8IDg7IGsrKykge1xuICAgICAgYyA9ICgoYyAmIDEpID8gKDB4RURCODgzMjAgXiAoYyA+Pj4gMSkpIDogKGMgPj4+IDEpKTtcbiAgICB9XG4gICAgdGFibGVbbl0gPSBjO1xuICB9XG5cbiAgcmV0dXJuIHRhYmxlO1xufVxuXG4vLyBDcmVhdGUgdGFibGUgb24gbG9hZC4gSnVzdCAyNTUgc2lnbmVkIGxvbmdzLiBOb3QgYSBwcm9ibGVtLlxudmFyIGNyY1RhYmxlID0gbWFrZVRhYmxlKCk7XG5cblxuZnVuY3Rpb24gY3JjMzIoY3JjLCBidWYsIGxlbiwgcG9zKSB7XG4gIHZhciB0ID0gY3JjVGFibGUsXG4gICAgICBlbmQgPSBwb3MgKyBsZW47XG5cbiAgY3JjIF49IC0xO1xuXG4gIGZvciAodmFyIGkgPSBwb3M7IGkgPCBlbmQ7IGkrKykge1xuICAgIGNyYyA9IChjcmMgPj4+IDgpIF4gdFsoY3JjIF4gYnVmW2ldKSAmIDB4RkZdO1xuICB9XG5cbiAgcmV0dXJuIChjcmMgXiAoLTEpKTsgLy8gPj4+IDA7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBjcmMzMjtcbiIsIid1c2Ugc3RyaWN0JztcblxuXG5mdW5jdGlvbiBHWmhlYWRlcigpIHtcbiAgLyogdHJ1ZSBpZiBjb21wcmVzc2VkIGRhdGEgYmVsaWV2ZWQgdG8gYmUgdGV4dCAqL1xuICB0aGlzLnRleHQgICAgICAgPSAwO1xuICAvKiBtb2RpZmljYXRpb24gdGltZSAqL1xuICB0aGlzLnRpbWUgICAgICAgPSAwO1xuICAvKiBleHRyYSBmbGFncyAobm90IHVzZWQgd2hlbiB3cml0aW5nIGEgZ3ppcCBmaWxlKSAqL1xuICB0aGlzLnhmbGFncyAgICAgPSAwO1xuICAvKiBvcGVyYXRpbmcgc3lzdGVtICovXG4gIHRoaXMub3MgICAgICAgICA9IDA7XG4gIC8qIHBvaW50ZXIgdG8gZXh0cmEgZmllbGQgb3IgWl9OVUxMIGlmIG5vbmUgKi9cbiAgdGhpcy5leHRyYSAgICAgID0gbnVsbDtcbiAgLyogZXh0cmEgZmllbGQgbGVuZ3RoICh2YWxpZCBpZiBleHRyYSAhPSBaX05VTEwpICovXG4gIHRoaXMuZXh0cmFfbGVuICA9IDA7IC8vIEFjdHVhbGx5LCB3ZSBkb24ndCBuZWVkIGl0IGluIEpTLFxuICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgbGVhdmUgZm9yIGZldyBjb2RlIG1vZGlmaWNhdGlvbnNcblxuICAvL1xuICAvLyBTZXR1cCBsaW1pdHMgaXMgbm90IG5lY2Vzc2FyeSBiZWNhdXNlIGluIGpzIHdlIHNob3VsZCBub3QgcHJlYWxsb2NhdGUgbWVtb3J5XG4gIC8vIGZvciBpbmZsYXRlIHVzZSBjb25zdGFudCBsaW1pdCBpbiA2NTUzNiBieXRlc1xuICAvL1xuXG4gIC8qIHNwYWNlIGF0IGV4dHJhIChvbmx5IHdoZW4gcmVhZGluZyBoZWFkZXIpICovXG4gIC8vIHRoaXMuZXh0cmFfbWF4ICA9IDA7XG4gIC8qIHBvaW50ZXIgdG8gemVyby10ZXJtaW5hdGVkIGZpbGUgbmFtZSBvciBaX05VTEwgKi9cbiAgdGhpcy5uYW1lICAgICAgID0gJyc7XG4gIC8qIHNwYWNlIGF0IG5hbWUgKG9ubHkgd2hlbiByZWFkaW5nIGhlYWRlcikgKi9cbiAgLy8gdGhpcy5uYW1lX21heCAgID0gMDtcbiAgLyogcG9pbnRlciB0byB6ZXJvLXRlcm1pbmF0ZWQgY29tbWVudCBvciBaX05VTEwgKi9cbiAgdGhpcy5jb21tZW50ICAgID0gJyc7XG4gIC8qIHNwYWNlIGF0IGNvbW1lbnQgKG9ubHkgd2hlbiByZWFkaW5nIGhlYWRlcikgKi9cbiAgLy8gdGhpcy5jb21tX21heCAgID0gMDtcbiAgLyogdHJ1ZSBpZiB0aGVyZSB3YXMgb3Igd2lsbCBiZSBhIGhlYWRlciBjcmMgKi9cbiAgdGhpcy5oY3JjICAgICAgID0gMDtcbiAgLyogdHJ1ZSB3aGVuIGRvbmUgcmVhZGluZyBnemlwIGhlYWRlciAobm90IHVzZWQgd2hlbiB3cml0aW5nIGEgZ3ppcCBmaWxlKSAqL1xuICB0aGlzLmRvbmUgICAgICAgPSBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBHWmhlYWRlcjtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gU2VlIHN0YXRlIGRlZnMgZnJvbSBpbmZsYXRlLmpzXG52YXIgQkFEID0gMzA7ICAgICAgIC8qIGdvdCBhIGRhdGEgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciBUWVBFID0gMTI7ICAgICAgLyogaTogd2FpdGluZyBmb3IgdHlwZSBiaXRzLCBpbmNsdWRpbmcgbGFzdC1mbGFnIGJpdCAqL1xuXG4vKlxuICAgRGVjb2RlIGxpdGVyYWwsIGxlbmd0aCwgYW5kIGRpc3RhbmNlIGNvZGVzIGFuZCB3cml0ZSBvdXQgdGhlIHJlc3VsdGluZ1xuICAgbGl0ZXJhbCBhbmQgbWF0Y2ggYnl0ZXMgdW50aWwgZWl0aGVyIG5vdCBlbm91Z2ggaW5wdXQgb3Igb3V0cHV0IGlzXG4gICBhdmFpbGFibGUsIGFuIGVuZC1vZi1ibG9jayBpcyBlbmNvdW50ZXJlZCwgb3IgYSBkYXRhIGVycm9yIGlzIGVuY291bnRlcmVkLlxuICAgV2hlbiBsYXJnZSBlbm91Z2ggaW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIGFyZSBzdXBwbGllZCB0byBpbmZsYXRlKCksIGZvclxuICAgZXhhbXBsZSwgYSAxNksgaW5wdXQgYnVmZmVyIGFuZCBhIDY0SyBvdXRwdXQgYnVmZmVyLCBtb3JlIHRoYW4gOTUlIG9mIHRoZVxuICAgaW5mbGF0ZSBleGVjdXRpb24gdGltZSBpcyBzcGVudCBpbiB0aGlzIHJvdXRpbmUuXG5cbiAgIEVudHJ5IGFzc3VtcHRpb25zOlxuXG4gICAgICAgIHN0YXRlLm1vZGUgPT09IExFTlxuICAgICAgICBzdHJtLmF2YWlsX2luID49IDZcbiAgICAgICAgc3RybS5hdmFpbF9vdXQgPj0gMjU4XG4gICAgICAgIHN0YXJ0ID49IHN0cm0uYXZhaWxfb3V0XG4gICAgICAgIHN0YXRlLmJpdHMgPCA4XG5cbiAgIE9uIHJldHVybiwgc3RhdGUubW9kZSBpcyBvbmUgb2Y6XG5cbiAgICAgICAgTEVOIC0tIHJhbiBvdXQgb2YgZW5vdWdoIG91dHB1dCBzcGFjZSBvciBlbm91Z2ggYXZhaWxhYmxlIGlucHV0XG4gICAgICAgIFRZUEUgLS0gcmVhY2hlZCBlbmQgb2YgYmxvY2sgY29kZSwgaW5mbGF0ZSgpIHRvIGludGVycHJldCBuZXh0IGJsb2NrXG4gICAgICAgIEJBRCAtLSBlcnJvciBpbiBibG9jayBkYXRhXG5cbiAgIE5vdGVzOlxuXG4gICAgLSBUaGUgbWF4aW11bSBpbnB1dCBiaXRzIHVzZWQgYnkgYSBsZW5ndGgvZGlzdGFuY2UgcGFpciBpcyAxNSBiaXRzIGZvciB0aGVcbiAgICAgIGxlbmd0aCBjb2RlLCA1IGJpdHMgZm9yIHRoZSBsZW5ndGggZXh0cmEsIDE1IGJpdHMgZm9yIHRoZSBkaXN0YW5jZSBjb2RlLFxuICAgICAgYW5kIDEzIGJpdHMgZm9yIHRoZSBkaXN0YW5jZSBleHRyYS4gIFRoaXMgdG90YWxzIDQ4IGJpdHMsIG9yIHNpeCBieXRlcy5cbiAgICAgIFRoZXJlZm9yZSBpZiBzdHJtLmF2YWlsX2luID49IDYsIHRoZW4gdGhlcmUgaXMgZW5vdWdoIGlucHV0IHRvIGF2b2lkXG4gICAgICBjaGVja2luZyBmb3IgYXZhaWxhYmxlIGlucHV0IHdoaWxlIGRlY29kaW5nLlxuXG4gICAgLSBUaGUgbWF4aW11bSBieXRlcyB0aGF0IGEgc2luZ2xlIGxlbmd0aC9kaXN0YW5jZSBwYWlyIGNhbiBvdXRwdXQgaXMgMjU4XG4gICAgICBieXRlcywgd2hpY2ggaXMgdGhlIG1heGltdW0gbGVuZ3RoIHRoYXQgY2FuIGJlIGNvZGVkLiAgaW5mbGF0ZV9mYXN0KClcbiAgICAgIHJlcXVpcmVzIHN0cm0uYXZhaWxfb3V0ID49IDI1OCBmb3IgZWFjaCBsb29wIHRvIGF2b2lkIGNoZWNraW5nIGZvclxuICAgICAgb3V0cHV0IHNwYWNlLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluZmxhdGVfZmFzdChzdHJtLCBzdGFydCkge1xuICB2YXIgc3RhdGU7XG4gIHZhciBfaW47ICAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmlucHV0ICovXG4gIHZhciBsYXN0OyAgICAgICAgICAgICAgICAgICAvKiBoYXZlIGVub3VnaCBpbnB1dCB3aGlsZSBpbiA8IGxhc3QgKi9cbiAgdmFyIF9vdXQ7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0ub3V0cHV0ICovXG4gIHZhciBiZWc7ICAgICAgICAgICAgICAgICAgICAvKiBpbmZsYXRlKCkncyBpbml0aWFsIHN0cm0ub3V0cHV0ICovXG4gIHZhciBlbmQ7ICAgICAgICAgICAgICAgICAgICAvKiB3aGlsZSBvdXQgPCBlbmQsIGVub3VnaCBzcGFjZSBhdmFpbGFibGUgKi9cbi8vI2lmZGVmIElORkxBVEVfU1RSSUNUXG4gIHZhciBkbWF4OyAgICAgICAgICAgICAgICAgICAvKiBtYXhpbXVtIGRpc3RhbmNlIGZyb20gemxpYiBoZWFkZXIgKi9cbi8vI2VuZGlmXG4gIHZhciB3c2l6ZTsgICAgICAgICAgICAgICAgICAvKiB3aW5kb3cgc2l6ZSBvciB6ZXJvIGlmIG5vdCB1c2luZyB3aW5kb3cgKi9cbiAgdmFyIHdoYXZlOyAgICAgICAgICAgICAgICAgIC8qIHZhbGlkIGJ5dGVzIGluIHRoZSB3aW5kb3cgKi9cbiAgdmFyIHduZXh0OyAgICAgICAgICAgICAgICAgIC8qIHdpbmRvdyB3cml0ZSBpbmRleCAqL1xuICAvLyBVc2UgYHNfd2luZG93YCBpbnN0ZWFkIGB3aW5kb3dgLCBhdm9pZCBjb25mbGljdCB3aXRoIGluc3RydW1lbnRhdGlvbiB0b29sc1xuICB2YXIgc193aW5kb3c7ICAgICAgICAgICAgICAgLyogYWxsb2NhdGVkIHNsaWRpbmcgd2luZG93LCBpZiB3c2l6ZSAhPSAwICovXG4gIHZhciBob2xkOyAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmhvbGQgKi9cbiAgdmFyIGJpdHM7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uYml0cyAqL1xuICB2YXIgbGNvZGU7ICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5sZW5jb2RlICovXG4gIHZhciBkY29kZTsgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmRpc3Rjb2RlICovXG4gIHZhciBsbWFzazsgICAgICAgICAgICAgICAgICAvKiBtYXNrIGZvciBmaXJzdCBsZXZlbCBvZiBsZW5ndGggY29kZXMgKi9cbiAgdmFyIGRtYXNrOyAgICAgICAgICAgICAgICAgIC8qIG1hc2sgZm9yIGZpcnN0IGxldmVsIG9mIGRpc3RhbmNlIGNvZGVzICovXG4gIHZhciBoZXJlOyAgICAgICAgICAgICAgICAgICAvKiByZXRyaWV2ZWQgdGFibGUgZW50cnkgKi9cbiAgdmFyIG9wOyAgICAgICAgICAgICAgICAgICAgIC8qIGNvZGUgYml0cywgb3BlcmF0aW9uLCBleHRyYSBiaXRzLCBvciAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIHdpbmRvdyBwb3NpdGlvbiwgd2luZG93IGJ5dGVzIHRvIGNvcHkgKi9cbiAgdmFyIGxlbjsgICAgICAgICAgICAgICAgICAgIC8qIG1hdGNoIGxlbmd0aCwgdW51c2VkIGJ5dGVzICovXG4gIHZhciBkaXN0OyAgICAgICAgICAgICAgICAgICAvKiBtYXRjaCBkaXN0YW5jZSAqL1xuICB2YXIgZnJvbTsgICAgICAgICAgICAgICAgICAgLyogd2hlcmUgdG8gY29weSBtYXRjaCBmcm9tICovXG4gIHZhciBmcm9tX3NvdXJjZTtcblxuXG4gIHZhciBpbnB1dCwgb3V0cHV0OyAvLyBKUyBzcGVjaWZpYywgYmVjYXVzZSB3ZSBoYXZlIG5vIHBvaW50ZXJzXG5cbiAgLyogY29weSBzdGF0ZSB0byBsb2NhbCB2YXJpYWJsZXMgKi9cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICAvL2hlcmUgPSBzdGF0ZS5oZXJlO1xuICBfaW4gPSBzdHJtLm5leHRfaW47XG4gIGlucHV0ID0gc3RybS5pbnB1dDtcbiAgbGFzdCA9IF9pbiArIChzdHJtLmF2YWlsX2luIC0gNSk7XG4gIF9vdXQgPSBzdHJtLm5leHRfb3V0O1xuICBvdXRwdXQgPSBzdHJtLm91dHB1dDtcbiAgYmVnID0gX291dCAtIChzdGFydCAtIHN0cm0uYXZhaWxfb3V0KTtcbiAgZW5kID0gX291dCArIChzdHJtLmF2YWlsX291dCAtIDI1Nyk7XG4vLyNpZmRlZiBJTkZMQVRFX1NUUklDVFxuICBkbWF4ID0gc3RhdGUuZG1heDtcbi8vI2VuZGlmXG4gIHdzaXplID0gc3RhdGUud3NpemU7XG4gIHdoYXZlID0gc3RhdGUud2hhdmU7XG4gIHduZXh0ID0gc3RhdGUud25leHQ7XG4gIHNfd2luZG93ID0gc3RhdGUud2luZG93O1xuICBob2xkID0gc3RhdGUuaG9sZDtcbiAgYml0cyA9IHN0YXRlLmJpdHM7XG4gIGxjb2RlID0gc3RhdGUubGVuY29kZTtcbiAgZGNvZGUgPSBzdGF0ZS5kaXN0Y29kZTtcbiAgbG1hc2sgPSAoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDE7XG4gIGRtYXNrID0gKDEgPDwgc3RhdGUuZGlzdGJpdHMpIC0gMTtcblxuXG4gIC8qIGRlY29kZSBsaXRlcmFscyBhbmQgbGVuZ3RoL2Rpc3RhbmNlcyB1bnRpbCBlbmQtb2YtYmxvY2sgb3Igbm90IGVub3VnaFxuICAgICBpbnB1dCBkYXRhIG9yIG91dHB1dCBzcGFjZSAqL1xuXG4gIHRvcDpcbiAgZG8ge1xuICAgIGlmIChiaXRzIDwgMTUpIHtcbiAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICBiaXRzICs9IDg7XG4gICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgYml0cyArPSA4O1xuICAgIH1cblxuICAgIGhlcmUgPSBsY29kZVtob2xkICYgbG1hc2tdO1xuXG4gICAgZG9sZW46XG4gICAgZm9yICg7OykgeyAvLyBHb3RvIGVtdWxhdGlvblxuICAgICAgb3AgPSBoZXJlID4+PiAyNC8qaGVyZS5iaXRzKi87XG4gICAgICBob2xkID4+Pj0gb3A7XG4gICAgICBiaXRzIC09IG9wO1xuICAgICAgb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZi8qaGVyZS5vcCovO1xuICAgICAgaWYgKG9wID09PSAwKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBsaXRlcmFsICovXG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBoZXJlLnZhbCA+PSAweDIwICYmIGhlcmUudmFsIDwgMHg3ZiA/XG4gICAgICAgIC8vICAgICAgICBcImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAnJWMnXFxuXCIgOlxuICAgICAgICAvLyAgICAgICAgXCJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgMHglMDJ4XFxuXCIsIGhlcmUudmFsKSk7XG4gICAgICAgIG91dHB1dFtfb3V0KytdID0gaGVyZSAmIDB4ZmZmZi8qaGVyZS52YWwqLztcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG9wICYgMTYpIHsgICAgICAgICAgICAgICAgICAgICAvKiBsZW5ndGggYmFzZSAqL1xuICAgICAgICBsZW4gPSBoZXJlICYgMHhmZmZmLypoZXJlLnZhbCovO1xuICAgICAgICBvcCAmPSAxNTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZXh0cmEgYml0cyAqL1xuICAgICAgICBpZiAob3ApIHtcbiAgICAgICAgICBpZiAoYml0cyA8IG9wKSB7XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZW4gKz0gaG9sZCAmICgoMSA8PCBvcCkgLSAxKTtcbiAgICAgICAgICBob2xkID4+Pj0gb3A7XG4gICAgICAgICAgYml0cyAtPSBvcDtcbiAgICAgICAgfVxuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGxlbmd0aCAldVxcblwiLCBsZW4pKTtcbiAgICAgICAgaWYgKGJpdHMgPCAxNSkge1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIGhlcmUgPSBkY29kZVtob2xkICYgZG1hc2tdO1xuXG4gICAgICAgIGRvZGlzdDpcbiAgICAgICAgZm9yICg7OykgeyAvLyBnb3RvIGVtdWxhdGlvblxuICAgICAgICAgIG9wID0gaGVyZSA+Pj4gMjQvKmhlcmUuYml0cyovO1xuICAgICAgICAgIGhvbGQgPj4+PSBvcDtcbiAgICAgICAgICBiaXRzIC09IG9wO1xuICAgICAgICAgIG9wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmYvKmhlcmUub3AqLztcblxuICAgICAgICAgIGlmIChvcCAmIDE2KSB7ICAgICAgICAgICAgICAgICAgICAgIC8qIGRpc3RhbmNlIGJhc2UgKi9cbiAgICAgICAgICAgIGRpc3QgPSBoZXJlICYgMHhmZmZmLypoZXJlLnZhbCovO1xuICAgICAgICAgICAgb3AgJj0gMTU7ICAgICAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZXh0cmEgYml0cyAqL1xuICAgICAgICAgICAgaWYgKGJpdHMgPCBvcCkge1xuICAgICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICAgIGlmIChiaXRzIDwgb3ApIHtcbiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlzdCArPSBob2xkICYgKCgxIDw8IG9wKSAtIDEpO1xuLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1RcbiAgICAgICAgICAgIGlmIChkaXN0ID4gZG1heCkge1xuICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7XG4gICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICAgIGJyZWFrIHRvcDtcbiAgICAgICAgICAgIH1cbi8vI2VuZGlmXG4gICAgICAgICAgICBob2xkID4+Pj0gb3A7XG4gICAgICAgICAgICBiaXRzIC09IG9wO1xuICAgICAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBkaXN0YW5jZSAldVxcblwiLCBkaXN0KSk7XG4gICAgICAgICAgICBvcCA9IF9vdXQgLSBiZWc7ICAgICAgICAgICAgICAgIC8qIG1heCBkaXN0YW5jZSBpbiBvdXRwdXQgKi9cbiAgICAgICAgICAgIGlmIChkaXN0ID4gb3ApIHsgICAgICAgICAgICAgICAgLyogc2VlIGlmIGNvcHkgZnJvbSB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgb3AgPSBkaXN0IC0gb3A7ICAgICAgICAgICAgICAgLyogZGlzdGFuY2UgYmFjayBpbiB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgaWYgKG9wID4gd2hhdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuc2FuZSkge1xuICAgICAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2snO1xuICAgICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgICAgICAgIGJyZWFrIHRvcDtcbiAgICAgICAgICAgICAgICB9XG5cbi8vICghKSBUaGlzIGJsb2NrIGlzIGRpc2FibGVkIGluIHpsaWIgZGVmYWlsdHMsXG4vLyBkb24ndCBlbmFibGUgaXQgZm9yIGJpbmFyeSBjb21wYXRpYmlsaXR5XG4vLyNpZmRlZiBJTkZMQVRFX0FMTE9XX0lOVkFMSURfRElTVEFOQ0VfVE9PRkFSX0FSUlJcbi8vICAgICAgICAgICAgICAgIGlmIChsZW4gPD0gb3AgLSB3aGF2ZSkge1xuLy8gICAgICAgICAgICAgICAgICBkbyB7XG4vLyAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSAwO1xuLy8gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLWxlbik7XG4vLyAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIHRvcDtcbi8vICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgICAgIGxlbiAtPSBvcCAtIHdoYXZlO1xuLy8gICAgICAgICAgICAgICAgZG8ge1xuLy8gICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IDA7XG4vLyAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wID4gd2hhdmUpO1xuLy8gICAgICAgICAgICAgICAgaWYgKG9wID09PSAwKSB7XG4vLyAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDtcbi8vICAgICAgICAgICAgICAgICAgZG8ge1xuLy8gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4vLyAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tbGVuKTtcbi8vICAgICAgICAgICAgICAgICAgY29udGludWUgdG9wO1xuLy8gICAgICAgICAgICAgICAgfVxuLy8jZW5kaWZcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBmcm9tID0gMDsgLy8gd2luZG93IGluZGV4XG4gICAgICAgICAgICAgIGZyb21fc291cmNlID0gc193aW5kb3c7XG4gICAgICAgICAgICAgIGlmICh3bmV4dCA9PT0gMCkgeyAgICAgICAgICAgLyogdmVyeSBjb21tb24gY2FzZSAqL1xuICAgICAgICAgICAgICAgIGZyb20gKz0gd3NpemUgLSBvcDtcbiAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gd2luZG93ICovXG4gICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7XG4gICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApO1xuICAgICAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0OyAgLyogcmVzdCBmcm9tIG91dHB1dCAqL1xuICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYgKHduZXh0IDwgb3ApIHsgICAgICAvKiB3cmFwIGFyb3VuZCB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICBmcm9tICs9IHdzaXplICsgd25leHQgLSBvcDtcbiAgICAgICAgICAgICAgICBvcCAtPSB3bmV4dDtcbiAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gZW5kIG9mIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgICAgbGVuIC09IG9wO1xuICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107XG4gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTtcbiAgICAgICAgICAgICAgICAgIGZyb20gPSAwO1xuICAgICAgICAgICAgICAgICAgaWYgKHduZXh0IDwgbGVuKSB7ICAvKiBzb21lIGZyb20gc3RhcnQgb2Ygd2luZG93ICovXG4gICAgICAgICAgICAgICAgICAgIG9wID0gd25leHQ7XG4gICAgICAgICAgICAgICAgICAgIGxlbiAtPSBvcDtcbiAgICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7XG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgICAgICAvKiByZXN0IGZyb20gb3V0cHV0ICovXG4gICAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgLyogY29udGlndW91cyBpbiB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICBmcm9tICs9IHduZXh0IC0gb3A7XG4gICAgICAgICAgICAgICAgaWYgKG9wIDwgbGVuKSB7ICAgICAgICAgLyogc29tZSBmcm9tIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgICAgbGVuIC09IG9wO1xuICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107XG4gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTtcbiAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgIC8qIHJlc3QgZnJvbSBvdXRwdXQgKi9cbiAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB3aGlsZSAobGVuID4gMikge1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgICAgICAgICAgIGxlbiAtPSAzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChsZW4pIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAgICAgICAgIC8qIGNvcHkgZGlyZWN0IGZyb20gb3V0cHV0ICovXG4gICAgICAgICAgICAgIGRvIHsgICAgICAgICAgICAgICAgICAgICAgICAvKiBtaW5pbXVtIGxlbmd0aCBpcyB0aHJlZSAqL1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuICAgICAgICAgICAgICAgIGxlbiAtPSAzO1xuICAgICAgICAgICAgICB9IHdoaWxlIChsZW4gPiAyKTtcbiAgICAgICAgICAgICAgaWYgKGxlbikge1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKChvcCAmIDY0KSA9PT0gMCkgeyAgICAgICAgICAvKiAybmQgbGV2ZWwgZGlzdGFuY2UgY29kZSAqL1xuICAgICAgICAgICAgaGVyZSA9IGRjb2RlWyhoZXJlICYgMHhmZmZmKS8qaGVyZS52YWwqLyArIChob2xkICYgKCgxIDw8IG9wKSAtIDEpKV07XG4gICAgICAgICAgICBjb250aW51ZSBkb2Rpc3Q7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSBjb2RlJztcbiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICBicmVhayB0b3A7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7IC8vIG5lZWQgdG8gZW11bGF0ZSBnb3RvIHZpYSBcImNvbnRpbnVlXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoKG9wICYgNjQpID09PSAwKSB7ICAgICAgICAgICAgICAvKiAybmQgbGV2ZWwgbGVuZ3RoIGNvZGUgKi9cbiAgICAgICAgaGVyZSA9IGxjb2RlWyhoZXJlICYgMHhmZmZmKS8qaGVyZS52YWwqLyArIChob2xkICYgKCgxIDw8IG9wKSAtIDEpKV07XG4gICAgICAgIGNvbnRpbnVlIGRvbGVuO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAob3AgJiAzMikgeyAgICAgICAgICAgICAgICAgICAgIC8qIGVuZC1vZi1ibG9jayAqL1xuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGVuZCBvZiBibG9ja1xcblwiKSk7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgICBicmVhayB0b3A7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWsgdG9wO1xuICAgICAgfVxuXG4gICAgICBicmVhazsgLy8gbmVlZCB0byBlbXVsYXRlIGdvdG8gdmlhIFwiY29udGludWVcIlxuICAgIH1cbiAgfSB3aGlsZSAoX2luIDwgbGFzdCAmJiBfb3V0IDwgZW5kKTtcblxuICAvKiByZXR1cm4gdW51c2VkIGJ5dGVzIChvbiBlbnRyeSwgYml0cyA8IDgsIHNvIGluIHdvbid0IGdvIHRvbyBmYXIgYmFjaykgKi9cbiAgbGVuID0gYml0cyA+PiAzO1xuICBfaW4gLT0gbGVuO1xuICBiaXRzIC09IGxlbiA8PCAzO1xuICBob2xkICY9ICgxIDw8IGJpdHMpIC0gMTtcblxuICAvKiB1cGRhdGUgc3RhdGUgYW5kIHJldHVybiAqL1xuICBzdHJtLm5leHRfaW4gPSBfaW47XG4gIHN0cm0ubmV4dF9vdXQgPSBfb3V0O1xuICBzdHJtLmF2YWlsX2luID0gKF9pbiA8IGxhc3QgPyA1ICsgKGxhc3QgLSBfaW4pIDogNSAtIChfaW4gLSBsYXN0KSk7XG4gIHN0cm0uYXZhaWxfb3V0ID0gKF9vdXQgPCBlbmQgPyAyNTcgKyAoZW5kIC0gX291dCkgOiAyNTcgLSAoX291dCAtIGVuZCkpO1xuICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgc3RhdGUuYml0cyA9IGJpdHM7XG4gIHJldHVybjtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cblxudmFyIHV0aWxzICAgICAgICAgPSByZXF1aXJlKCcuLi91dGlscy9jb21tb24nKTtcbnZhciBhZGxlcjMyICAgICAgID0gcmVxdWlyZSgnLi9hZGxlcjMyJyk7XG52YXIgY3JjMzIgICAgICAgICA9IHJlcXVpcmUoJy4vY3JjMzInKTtcbnZhciBpbmZsYXRlX2Zhc3QgID0gcmVxdWlyZSgnLi9pbmZmYXN0Jyk7XG52YXIgaW5mbGF0ZV90YWJsZSA9IHJlcXVpcmUoJy4vaW5mdHJlZXMnKTtcblxudmFyIENPREVTID0gMDtcbnZhciBMRU5TID0gMTtcbnZhciBESVNUUyA9IDI7XG5cbi8qIFB1YmxpYyBjb25zdGFudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cbi8qIEFsbG93ZWQgZmx1c2ggdmFsdWVzOyBzZWUgZGVmbGF0ZSgpIGFuZCBpbmZsYXRlKCkgYmVsb3cgZm9yIGRldGFpbHMgKi9cbi8vdmFyIFpfTk9fRkxVU0ggICAgICA9IDA7XG4vL3ZhciBaX1BBUlRJQUxfRkxVU0ggPSAxO1xuLy92YXIgWl9TWU5DX0ZMVVNIICAgID0gMjtcbi8vdmFyIFpfRlVMTF9GTFVTSCAgICA9IDM7XG52YXIgWl9GSU5JU0ggICAgICAgID0gNDtcbnZhciBaX0JMT0NLICAgICAgICAgPSA1O1xudmFyIFpfVFJFRVMgICAgICAgICA9IDY7XG5cblxuLyogUmV0dXJuIGNvZGVzIGZvciB0aGUgY29tcHJlc3Npb24vZGVjb21wcmVzc2lvbiBmdW5jdGlvbnMuIE5lZ2F0aXZlIHZhbHVlc1xuICogYXJlIGVycm9ycywgcG9zaXRpdmUgdmFsdWVzIGFyZSB1c2VkIGZvciBzcGVjaWFsIGJ1dCBub3JtYWwgZXZlbnRzLlxuICovXG52YXIgWl9PSyAgICAgICAgICAgID0gMDtcbnZhciBaX1NUUkVBTV9FTkQgICAgPSAxO1xudmFyIFpfTkVFRF9ESUNUICAgICA9IDI7XG4vL3ZhciBaX0VSUk5PICAgICAgICAgPSAtMTtcbnZhciBaX1NUUkVBTV9FUlJPUiAgPSAtMjtcbnZhciBaX0RBVEFfRVJST1IgICAgPSAtMztcbnZhciBaX01FTV9FUlJPUiAgICAgPSAtNDtcbnZhciBaX0JVRl9FUlJPUiAgICAgPSAtNTtcbi8vdmFyIFpfVkVSU0lPTl9FUlJPUiA9IC02O1xuXG4vKiBUaGUgZGVmbGF0ZSBjb21wcmVzc2lvbiBtZXRob2QgKi9cbnZhciBaX0RFRkxBVEVEICA9IDg7XG5cblxuLyogU1RBVEVTID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxudmFyICAgIEhFQUQgPSAxOyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBtYWdpYyBoZWFkZXIgKi9cbnZhciAgICBGTEFHUyA9IDI7ICAgICAgLyogaTogd2FpdGluZyBmb3IgbWV0aG9kIGFuZCBmbGFncyAoZ3ppcCkgKi9cbnZhciAgICBUSU1FID0gMzsgICAgICAgLyogaTogd2FpdGluZyBmb3IgbW9kaWZpY2F0aW9uIHRpbWUgKGd6aXApICovXG52YXIgICAgT1MgPSA0OyAgICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGV4dHJhIGZsYWdzIGFuZCBvcGVyYXRpbmcgc3lzdGVtIChnemlwKSAqL1xudmFyICAgIEVYTEVOID0gNTsgICAgICAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBsZW5ndGggKGd6aXApICovXG52YXIgICAgRVhUUkEgPSA2OyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGV4dHJhIGJ5dGVzIChnemlwKSAqL1xudmFyICAgIE5BTUUgPSA3OyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBlbmQgb2YgZmlsZSBuYW1lIChnemlwKSAqL1xudmFyICAgIENPTU1FTlQgPSA4OyAgICAvKiBpOiB3YWl0aW5nIGZvciBlbmQgb2YgY29tbWVudCAoZ3ppcCkgKi9cbnZhciAgICBIQ1JDID0gOTsgICAgICAgLyogaTogd2FpdGluZyBmb3IgaGVhZGVyIGNyYyAoZ3ppcCkgKi9cbnZhciAgICBESUNUSUQgPSAxMDsgICAgLyogaTogd2FpdGluZyBmb3IgZGljdGlvbmFyeSBjaGVjayB2YWx1ZSAqL1xudmFyICAgIERJQ1QgPSAxMTsgICAgICAvKiB3YWl0aW5nIGZvciBpbmZsYXRlU2V0RGljdGlvbmFyeSgpIGNhbGwgKi9cbnZhciAgICAgICAgVFlQRSA9IDEyOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIHR5cGUgYml0cywgaW5jbHVkaW5nIGxhc3QtZmxhZyBiaXQgKi9cbnZhciAgICAgICAgVFlQRURPID0gMTM7ICAgIC8qIGk6IHNhbWUsIGJ1dCBza2lwIGNoZWNrIHRvIGV4aXQgaW5mbGF0ZSBvbiBuZXcgYmxvY2sgKi9cbnZhciAgICAgICAgU1RPUkVEID0gMTQ7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIHN0b3JlZCBzaXplIChsZW5ndGggYW5kIGNvbXBsZW1lbnQpICovXG52YXIgICAgICAgIENPUFlfID0gMTU7ICAgICAvKiBpL286IHNhbWUgYXMgQ09QWSBiZWxvdywgYnV0IG9ubHkgZmlyc3QgdGltZSBpbiAqL1xudmFyICAgICAgICBDT1BZID0gMTY7ICAgICAgLyogaS9vOiB3YWl0aW5nIGZvciBpbnB1dCBvciBvdXRwdXQgdG8gY29weSBzdG9yZWQgYmxvY2sgKi9cbnZhciAgICAgICAgVEFCTEUgPSAxNzsgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGR5bmFtaWMgYmxvY2sgdGFibGUgbGVuZ3RocyAqL1xudmFyICAgICAgICBMRU5MRU5TID0gMTg7ICAgLyogaTogd2FpdGluZyBmb3IgY29kZSBsZW5ndGggY29kZSBsZW5ndGhzICovXG52YXIgICAgICAgIENPREVMRU5TID0gMTk7ICAvKiBpOiB3YWl0aW5nIGZvciBsZW5ndGgvbGl0IGFuZCBkaXN0YW5jZSBjb2RlIGxlbmd0aHMgKi9cbnZhciAgICAgICAgICAgIExFTl8gPSAyMDsgICAgICAvKiBpOiBzYW1lIGFzIExFTiBiZWxvdywgYnV0IG9ubHkgZmlyc3QgdGltZSBpbiAqL1xudmFyICAgICAgICAgICAgTEVOID0gMjE7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGxlbmd0aC9saXQvZW9iIGNvZGUgKi9cbnZhciAgICAgICAgICAgIExFTkVYVCA9IDIyOyAgICAvKiBpOiB3YWl0aW5nIGZvciBsZW5ndGggZXh0cmEgYml0cyAqL1xudmFyICAgICAgICAgICAgRElTVCA9IDIzOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGRpc3RhbmNlIGNvZGUgKi9cbnZhciAgICAgICAgICAgIERJU1RFWFQgPSAyNDsgICAvKiBpOiB3YWl0aW5nIGZvciBkaXN0YW5jZSBleHRyYSBiaXRzICovXG52YXIgICAgICAgICAgICBNQVRDSCA9IDI1OyAgICAgLyogbzogd2FpdGluZyBmb3Igb3V0cHV0IHNwYWNlIHRvIGNvcHkgc3RyaW5nICovXG52YXIgICAgICAgICAgICBMSVQgPSAyNjsgICAgICAgLyogbzogd2FpdGluZyBmb3Igb3V0cHV0IHNwYWNlIHRvIHdyaXRlIGxpdGVyYWwgKi9cbnZhciAgICBDSEVDSyA9IDI3OyAgICAgLyogaTogd2FpdGluZyBmb3IgMzItYml0IGNoZWNrIHZhbHVlICovXG52YXIgICAgTEVOR1RIID0gMjg7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIDMyLWJpdCBsZW5ndGggKGd6aXApICovXG52YXIgICAgRE9ORSA9IDI5OyAgICAgIC8qIGZpbmlzaGVkIGNoZWNrLCBkb25lIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovXG52YXIgICAgQkFEID0gMzA7ICAgICAgIC8qIGdvdCBhIGRhdGEgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciAgICBNRU0gPSAzMTsgICAgICAgLyogZ290IGFuIGluZmxhdGUoKSBtZW1vcnkgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciAgICBTWU5DID0gMzI7ICAgICAgLyogbG9va2luZyBmb3Igc3luY2hyb25pemF0aW9uIGJ5dGVzIHRvIHJlc3RhcnQgaW5mbGF0ZSgpICovXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxuXG52YXIgRU5PVUdIX0xFTlMgPSA4NTI7XG52YXIgRU5PVUdIX0RJU1RTID0gNTkyO1xuLy92YXIgRU5PVUdIID0gIChFTk9VR0hfTEVOUytFTk9VR0hfRElTVFMpO1xuXG52YXIgTUFYX1dCSVRTID0gMTU7XG4vKiAzMksgTFo3NyB3aW5kb3cgKi9cbnZhciBERUZfV0JJVFMgPSBNQVhfV0JJVFM7XG5cblxuZnVuY3Rpb24genN3YXAzMihxKSB7XG4gIHJldHVybiAgKCgocSA+Pj4gMjQpICYgMHhmZikgK1xuICAgICAgICAgICgocSA+Pj4gOCkgJiAweGZmMDApICtcbiAgICAgICAgICAoKHEgJiAweGZmMDApIDw8IDgpICtcbiAgICAgICAgICAoKHEgJiAweGZmKSA8PCAyNCkpO1xufVxuXG5cbmZ1bmN0aW9uIEluZmxhdGVTdGF0ZSgpIHtcbiAgdGhpcy5tb2RlID0gMDsgICAgICAgICAgICAgLyogY3VycmVudCBpbmZsYXRlIG1vZGUgKi9cbiAgdGhpcy5sYXN0ID0gZmFsc2U7ICAgICAgICAgIC8qIHRydWUgaWYgcHJvY2Vzc2luZyBsYXN0IGJsb2NrICovXG4gIHRoaXMud3JhcCA9IDA7ICAgICAgICAgICAgICAvKiBiaXQgMCB0cnVlIGZvciB6bGliLCBiaXQgMSB0cnVlIGZvciBnemlwICovXG4gIHRoaXMuaGF2ZWRpY3QgPSBmYWxzZTsgICAgICAvKiB0cnVlIGlmIGRpY3Rpb25hcnkgcHJvdmlkZWQgKi9cbiAgdGhpcy5mbGFncyA9IDA7ICAgICAgICAgICAgIC8qIGd6aXAgaGVhZGVyIG1ldGhvZCBhbmQgZmxhZ3MgKDAgaWYgemxpYikgKi9cbiAgdGhpcy5kbWF4ID0gMDsgICAgICAgICAgICAgIC8qIHpsaWIgaGVhZGVyIG1heCBkaXN0YW5jZSAoSU5GTEFURV9TVFJJQ1QpICovXG4gIHRoaXMuY2hlY2sgPSAwOyAgICAgICAgICAgICAvKiBwcm90ZWN0ZWQgY29weSBvZiBjaGVjayB2YWx1ZSAqL1xuICB0aGlzLnRvdGFsID0gMDsgICAgICAgICAgICAgLyogcHJvdGVjdGVkIGNvcHkgb2Ygb3V0cHV0IGNvdW50ICovXG4gIC8vIFRPRE86IG1heSBiZSB7fVxuICB0aGlzLmhlYWQgPSBudWxsOyAgICAgICAgICAgLyogd2hlcmUgdG8gc2F2ZSBnemlwIGhlYWRlciBpbmZvcm1hdGlvbiAqL1xuXG4gIC8qIHNsaWRpbmcgd2luZG93ICovXG4gIHRoaXMud2JpdHMgPSAwOyAgICAgICAgICAgICAvKiBsb2cgYmFzZSAyIG9mIHJlcXVlc3RlZCB3aW5kb3cgc2l6ZSAqL1xuICB0aGlzLndzaXplID0gMDsgICAgICAgICAgICAgLyogd2luZG93IHNpemUgb3IgemVybyBpZiBub3QgdXNpbmcgd2luZG93ICovXG4gIHRoaXMud2hhdmUgPSAwOyAgICAgICAgICAgICAvKiB2YWxpZCBieXRlcyBpbiB0aGUgd2luZG93ICovXG4gIHRoaXMud25leHQgPSAwOyAgICAgICAgICAgICAvKiB3aW5kb3cgd3JpdGUgaW5kZXggKi9cbiAgdGhpcy53aW5kb3cgPSBudWxsOyAgICAgICAgIC8qIGFsbG9jYXRlZCBzbGlkaW5nIHdpbmRvdywgaWYgbmVlZGVkICovXG5cbiAgLyogYml0IGFjY3VtdWxhdG9yICovXG4gIHRoaXMuaG9sZCA9IDA7ICAgICAgICAgICAgICAvKiBpbnB1dCBiaXQgYWNjdW11bGF0b3IgKi9cbiAgdGhpcy5iaXRzID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBiaXRzIGluIFwiaW5cIiAqL1xuXG4gIC8qIGZvciBzdHJpbmcgYW5kIHN0b3JlZCBibG9jayBjb3B5aW5nICovXG4gIHRoaXMubGVuZ3RoID0gMDsgICAgICAgICAgICAvKiBsaXRlcmFsIG9yIGxlbmd0aCBvZiBkYXRhIHRvIGNvcHkgKi9cbiAgdGhpcy5vZmZzZXQgPSAwOyAgICAgICAgICAgIC8qIGRpc3RhbmNlIGJhY2sgdG8gY29weSBzdHJpbmcgZnJvbSAqL1xuXG4gIC8qIGZvciB0YWJsZSBhbmQgY29kZSBkZWNvZGluZyAqL1xuICB0aGlzLmV4dHJhID0gMDsgICAgICAgICAgICAgLyogZXh0cmEgYml0cyBuZWVkZWQgKi9cblxuICAvKiBmaXhlZCBhbmQgZHluYW1pYyBjb2RlIHRhYmxlcyAqL1xuICB0aGlzLmxlbmNvZGUgPSBudWxsOyAgICAgICAgICAvKiBzdGFydGluZyB0YWJsZSBmb3IgbGVuZ3RoL2xpdGVyYWwgY29kZXMgKi9cbiAgdGhpcy5kaXN0Y29kZSA9IG51bGw7ICAgICAgICAgLyogc3RhcnRpbmcgdGFibGUgZm9yIGRpc3RhbmNlIGNvZGVzICovXG4gIHRoaXMubGVuYml0cyA9IDA7ICAgICAgICAgICAvKiBpbmRleCBiaXRzIGZvciBsZW5jb2RlICovXG4gIHRoaXMuZGlzdGJpdHMgPSAwOyAgICAgICAgICAvKiBpbmRleCBiaXRzIGZvciBkaXN0Y29kZSAqL1xuXG4gIC8qIGR5bmFtaWMgdGFibGUgYnVpbGRpbmcgKi9cbiAgdGhpcy5uY29kZSA9IDA7ICAgICAgICAgICAgIC8qIG51bWJlciBvZiBjb2RlIGxlbmd0aCBjb2RlIGxlbmd0aHMgKi9cbiAgdGhpcy5ubGVuID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBsZW5ndGggY29kZSBsZW5ndGhzICovXG4gIHRoaXMubmRpc3QgPSAwOyAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZGlzdGFuY2UgY29kZSBsZW5ndGhzICovXG4gIHRoaXMuaGF2ZSA9IDA7ICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgY29kZSBsZW5ndGhzIGluIGxlbnNbXSAqL1xuICB0aGlzLm5leHQgPSBudWxsOyAgICAgICAgICAgICAgLyogbmV4dCBhdmFpbGFibGUgc3BhY2UgaW4gY29kZXNbXSAqL1xuXG4gIHRoaXMubGVucyA9IG5ldyB1dGlscy5CdWYxNigzMjApOyAvKiB0ZW1wb3Jhcnkgc3RvcmFnZSBmb3IgY29kZSBsZW5ndGhzICovXG4gIHRoaXMud29yayA9IG5ldyB1dGlscy5CdWYxNigyODgpOyAvKiB3b3JrIGFyZWEgZm9yIGNvZGUgdGFibGUgYnVpbGRpbmcgKi9cblxuICAvKlxuICAgYmVjYXVzZSB3ZSBkb24ndCBoYXZlIHBvaW50ZXJzIGluIGpzLCB3ZSB1c2UgbGVuY29kZSBhbmQgZGlzdGNvZGUgZGlyZWN0bHlcbiAgIGFzIGJ1ZmZlcnMgc28gd2UgZG9uJ3QgbmVlZCBjb2Rlc1xuICAqL1xuICAvL3RoaXMuY29kZXMgPSBuZXcgdXRpbHMuQnVmMzIoRU5PVUdIKTsgICAgICAgLyogc3BhY2UgZm9yIGNvZGUgdGFibGVzICovXG4gIHRoaXMubGVuZHluID0gbnVsbDsgICAgICAgICAgICAgIC8qIGR5bmFtaWMgdGFibGUgZm9yIGxlbmd0aC9saXRlcmFsIGNvZGVzIChKUyBzcGVjaWZpYykgKi9cbiAgdGhpcy5kaXN0ZHluID0gbnVsbDsgICAgICAgICAgICAgLyogZHluYW1pYyB0YWJsZSBmb3IgZGlzdGFuY2UgY29kZXMgKEpTIHNwZWNpZmljKSAqL1xuICB0aGlzLnNhbmUgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBpZiBmYWxzZSwgYWxsb3cgaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyICovXG4gIHRoaXMuYmFjayA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIGJpdHMgYmFjayBvZiBsYXN0IHVucHJvY2Vzc2VkIGxlbmd0aC9saXQgKi9cbiAgdGhpcy53YXMgPSAwOyAgICAgICAgICAgICAgICAgICAgLyogaW5pdGlhbCBsZW5ndGggb2YgbWF0Y2ggKi9cbn1cblxuZnVuY3Rpb24gaW5mbGF0ZVJlc2V0S2VlcChzdHJtKSB7XG4gIHZhciBzdGF0ZTtcblxuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9XG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgc3RybS50b3RhbF9pbiA9IHN0cm0udG90YWxfb3V0ID0gc3RhdGUudG90YWwgPSAwO1xuICBzdHJtLm1zZyA9ICcnOyAvKlpfTlVMTCovXG4gIGlmIChzdGF0ZS53cmFwKSB7ICAgICAgIC8qIHRvIHN1cHBvcnQgaWxsLWNvbmNlaXZlZCBKYXZhIHRlc3Qgc3VpdGUgKi9cbiAgICBzdHJtLmFkbGVyID0gc3RhdGUud3JhcCAmIDE7XG4gIH1cbiAgc3RhdGUubW9kZSA9IEhFQUQ7XG4gIHN0YXRlLmxhc3QgPSAwO1xuICBzdGF0ZS5oYXZlZGljdCA9IDA7XG4gIHN0YXRlLmRtYXggPSAzMjc2ODtcbiAgc3RhdGUuaGVhZCA9IG51bGwvKlpfTlVMTCovO1xuICBzdGF0ZS5ob2xkID0gMDtcbiAgc3RhdGUuYml0cyA9IDA7XG4gIC8vc3RhdGUubGVuY29kZSA9IHN0YXRlLmRpc3Rjb2RlID0gc3RhdGUubmV4dCA9IHN0YXRlLmNvZGVzO1xuICBzdGF0ZS5sZW5jb2RlID0gc3RhdGUubGVuZHluID0gbmV3IHV0aWxzLkJ1ZjMyKEVOT1VHSF9MRU5TKTtcbiAgc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5kaXN0ZHluID0gbmV3IHV0aWxzLkJ1ZjMyKEVOT1VHSF9ESVNUUyk7XG5cbiAgc3RhdGUuc2FuZSA9IDE7XG4gIHN0YXRlLmJhY2sgPSAtMTtcbiAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiByZXNldFxcblwiKSk7XG4gIHJldHVybiBaX09LO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlUmVzZXQoc3RybSkge1xuICB2YXIgc3RhdGU7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIHN0YXRlLndzaXplID0gMDtcbiAgc3RhdGUud2hhdmUgPSAwO1xuICBzdGF0ZS53bmV4dCA9IDA7XG4gIHJldHVybiBpbmZsYXRlUmVzZXRLZWVwKHN0cm0pO1xuXG59XG5cbmZ1bmN0aW9uIGluZmxhdGVSZXNldDIoc3RybSwgd2luZG93Qml0cykge1xuICB2YXIgd3JhcDtcbiAgdmFyIHN0YXRlO1xuXG4gIC8qIGdldCB0aGUgc3RhdGUgKi9cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG5cbiAgLyogZXh0cmFjdCB3cmFwIHJlcXVlc3QgZnJvbSB3aW5kb3dCaXRzIHBhcmFtZXRlciAqL1xuICBpZiAod2luZG93Qml0cyA8IDApIHtcbiAgICB3cmFwID0gMDtcbiAgICB3aW5kb3dCaXRzID0gLXdpbmRvd0JpdHM7XG4gIH1cbiAgZWxzZSB7XG4gICAgd3JhcCA9ICh3aW5kb3dCaXRzID4+IDQpICsgMTtcbiAgICBpZiAod2luZG93Qml0cyA8IDQ4KSB7XG4gICAgICB3aW5kb3dCaXRzICY9IDE1O1xuICAgIH1cbiAgfVxuXG4gIC8qIHNldCBudW1iZXIgb2Ygd2luZG93IGJpdHMsIGZyZWUgd2luZG93IGlmIGRpZmZlcmVudCAqL1xuICBpZiAod2luZG93Qml0cyAmJiAod2luZG93Qml0cyA8IDggfHwgd2luZG93Qml0cyA+IDE1KSkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuICBpZiAoc3RhdGUud2luZG93ICE9PSBudWxsICYmIHN0YXRlLndiaXRzICE9PSB3aW5kb3dCaXRzKSB7XG4gICAgc3RhdGUud2luZG93ID0gbnVsbDtcbiAgfVxuXG4gIC8qIHVwZGF0ZSBzdGF0ZSBhbmQgcmVzZXQgdGhlIHJlc3Qgb2YgaXQgKi9cbiAgc3RhdGUud3JhcCA9IHdyYXA7XG4gIHN0YXRlLndiaXRzID0gd2luZG93Qml0cztcbiAgcmV0dXJuIGluZmxhdGVSZXNldChzdHJtKTtcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZUluaXQyKHN0cm0sIHdpbmRvd0JpdHMpIHtcbiAgdmFyIHJldDtcbiAgdmFyIHN0YXRlO1xuXG4gIGlmICghc3RybSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgLy9zdHJtLm1zZyA9IFpfTlVMTDsgICAgICAgICAgICAgICAgIC8qIGluIGNhc2Ugd2UgcmV0dXJuIGFuIGVycm9yICovXG5cbiAgc3RhdGUgPSBuZXcgSW5mbGF0ZVN0YXRlKCk7XG5cbiAgLy9pZiAoc3RhdGUgPT09IFpfTlVMTCkgcmV0dXJuIFpfTUVNX0VSUk9SO1xuICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6IGFsbG9jYXRlZFxcblwiKSk7XG4gIHN0cm0uc3RhdGUgPSBzdGF0ZTtcbiAgc3RhdGUud2luZG93ID0gbnVsbC8qWl9OVUxMKi87XG4gIHJldCA9IGluZmxhdGVSZXNldDIoc3RybSwgd2luZG93Qml0cyk7XG4gIGlmIChyZXQgIT09IFpfT0spIHtcbiAgICBzdHJtLnN0YXRlID0gbnVsbC8qWl9OVUxMKi87XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZUluaXQoc3RybSkge1xuICByZXR1cm4gaW5mbGF0ZUluaXQyKHN0cm0sIERFRl9XQklUUyk7XG59XG5cblxuLypcbiBSZXR1cm4gc3RhdGUgd2l0aCBsZW5ndGggYW5kIGRpc3RhbmNlIGRlY29kaW5nIHRhYmxlcyBhbmQgaW5kZXggc2l6ZXMgc2V0IHRvXG4gZml4ZWQgY29kZSBkZWNvZGluZy4gIE5vcm1hbGx5IHRoaXMgcmV0dXJucyBmaXhlZCB0YWJsZXMgZnJvbSBpbmZmaXhlZC5oLlxuIElmIEJVSUxERklYRUQgaXMgZGVmaW5lZCwgdGhlbiBpbnN0ZWFkIHRoaXMgcm91dGluZSBidWlsZHMgdGhlIHRhYmxlcyB0aGVcbiBmaXJzdCB0aW1lIGl0J3MgY2FsbGVkLCBhbmQgcmV0dXJucyB0aG9zZSB0YWJsZXMgdGhlIGZpcnN0IHRpbWUgYW5kXG4gdGhlcmVhZnRlci4gIFRoaXMgcmVkdWNlcyB0aGUgc2l6ZSBvZiB0aGUgY29kZSBieSBhYm91dCAySyBieXRlcywgaW5cbiBleGNoYW5nZSBmb3IgYSBsaXR0bGUgZXhlY3V0aW9uIHRpbWUuICBIb3dldmVyLCBCVUlMREZJWEVEIHNob3VsZCBub3QgYmVcbiB1c2VkIGZvciB0aHJlYWRlZCBhcHBsaWNhdGlvbnMsIHNpbmNlIHRoZSByZXdyaXRpbmcgb2YgdGhlIHRhYmxlcyBhbmQgdmlyZ2luXG4gbWF5IG5vdCBiZSB0aHJlYWQtc2FmZS5cbiAqL1xudmFyIHZpcmdpbiA9IHRydWU7XG5cbnZhciBsZW5maXgsIGRpc3RmaXg7IC8vIFdlIGhhdmUgbm8gcG9pbnRlcnMgaW4gSlMsIHNvIGtlZXAgdGFibGVzIHNlcGFyYXRlXG5cbmZ1bmN0aW9uIGZpeGVkdGFibGVzKHN0YXRlKSB7XG4gIC8qIGJ1aWxkIGZpeGVkIGh1ZmZtYW4gdGFibGVzIGlmIGZpcnN0IGNhbGwgKG1heSBub3QgYmUgdGhyZWFkIHNhZmUpICovXG4gIGlmICh2aXJnaW4pIHtcbiAgICB2YXIgc3ltO1xuXG4gICAgbGVuZml4ID0gbmV3IHV0aWxzLkJ1ZjMyKDUxMik7XG4gICAgZGlzdGZpeCA9IG5ldyB1dGlscy5CdWYzMigzMik7XG5cbiAgICAvKiBsaXRlcmFsL2xlbmd0aCB0YWJsZSAqL1xuICAgIHN5bSA9IDA7XG4gICAgd2hpbGUgKHN5bSA8IDE0NCkgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDg7IH1cbiAgICB3aGlsZSAoc3ltIDwgMjU2KSB7IHN0YXRlLmxlbnNbc3ltKytdID0gOTsgfVxuICAgIHdoaWxlIChzeW0gPCAyODApIHsgc3RhdGUubGVuc1tzeW0rK10gPSA3OyB9XG4gICAgd2hpbGUgKHN5bSA8IDI4OCkgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDg7IH1cblxuICAgIGluZmxhdGVfdGFibGUoTEVOUywgIHN0YXRlLmxlbnMsIDAsIDI4OCwgbGVuZml4LCAgIDAsIHN0YXRlLndvcmssIHsgYml0czogOSB9KTtcblxuICAgIC8qIGRpc3RhbmNlIHRhYmxlICovXG4gICAgc3ltID0gMDtcbiAgICB3aGlsZSAoc3ltIDwgMzIpIHsgc3RhdGUubGVuc1tzeW0rK10gPSA1OyB9XG5cbiAgICBpbmZsYXRlX3RhYmxlKERJU1RTLCBzdGF0ZS5sZW5zLCAwLCAzMiwgICBkaXN0Zml4LCAwLCBzdGF0ZS53b3JrLCB7IGJpdHM6IDUgfSk7XG5cbiAgICAvKiBkbyB0aGlzIGp1c3Qgb25jZSAqL1xuICAgIHZpcmdpbiA9IGZhbHNlO1xuICB9XG5cbiAgc3RhdGUubGVuY29kZSA9IGxlbmZpeDtcbiAgc3RhdGUubGVuYml0cyA9IDk7XG4gIHN0YXRlLmRpc3Rjb2RlID0gZGlzdGZpeDtcbiAgc3RhdGUuZGlzdGJpdHMgPSA1O1xufVxuXG5cbi8qXG4gVXBkYXRlIHRoZSB3aW5kb3cgd2l0aCB0aGUgbGFzdCB3c2l6ZSAobm9ybWFsbHkgMzJLKSBieXRlcyB3cml0dGVuIGJlZm9yZVxuIHJldHVybmluZy4gIElmIHdpbmRvdyBkb2VzIG5vdCBleGlzdCB5ZXQsIGNyZWF0ZSBpdC4gIFRoaXMgaXMgb25seSBjYWxsZWRcbiB3aGVuIGEgd2luZG93IGlzIGFscmVhZHkgaW4gdXNlLCBvciB3aGVuIG91dHB1dCBoYXMgYmVlbiB3cml0dGVuIGR1cmluZyB0aGlzXG4gaW5mbGF0ZSBjYWxsLCBidXQgdGhlIGVuZCBvZiB0aGUgZGVmbGF0ZSBzdHJlYW0gaGFzIG5vdCBiZWVuIHJlYWNoZWQgeWV0LlxuIEl0IGlzIGFsc28gY2FsbGVkIHRvIGNyZWF0ZSBhIHdpbmRvdyBmb3IgZGljdGlvbmFyeSBkYXRhIHdoZW4gYSBkaWN0aW9uYXJ5XG4gaXMgbG9hZGVkLlxuXG4gUHJvdmlkaW5nIG91dHB1dCBidWZmZXJzIGxhcmdlciB0aGFuIDMySyB0byBpbmZsYXRlKCkgc2hvdWxkIHByb3ZpZGUgYSBzcGVlZFxuIGFkdmFudGFnZSwgc2luY2Ugb25seSB0aGUgbGFzdCAzMksgb2Ygb3V0cHV0IGlzIGNvcGllZCB0byB0aGUgc2xpZGluZyB3aW5kb3dcbiB1cG9uIHJldHVybiBmcm9tIGluZmxhdGUoKSwgYW5kIHNpbmNlIGFsbCBkaXN0YW5jZXMgYWZ0ZXIgdGhlIGZpcnN0IDMySyBvZlxuIG91dHB1dCB3aWxsIGZhbGwgaW4gdGhlIG91dHB1dCBkYXRhLCBtYWtpbmcgbWF0Y2ggY29waWVzIHNpbXBsZXIgYW5kIGZhc3Rlci5cbiBUaGUgYWR2YW50YWdlIG1heSBiZSBkZXBlbmRlbnQgb24gdGhlIHNpemUgb2YgdGhlIHByb2Nlc3NvcidzIGRhdGEgY2FjaGVzLlxuICovXG5mdW5jdGlvbiB1cGRhdGV3aW5kb3coc3RybSwgc3JjLCBlbmQsIGNvcHkpIHtcbiAgdmFyIGRpc3Q7XG4gIHZhciBzdGF0ZSA9IHN0cm0uc3RhdGU7XG5cbiAgLyogaWYgaXQgaGFzbid0IGJlZW4gZG9uZSBhbHJlYWR5LCBhbGxvY2F0ZSBzcGFjZSBmb3IgdGhlIHdpbmRvdyAqL1xuICBpZiAoc3RhdGUud2luZG93ID09PSBudWxsKSB7XG4gICAgc3RhdGUud3NpemUgPSAxIDw8IHN0YXRlLndiaXRzO1xuICAgIHN0YXRlLnduZXh0ID0gMDtcbiAgICBzdGF0ZS53aGF2ZSA9IDA7XG5cbiAgICBzdGF0ZS53aW5kb3cgPSBuZXcgdXRpbHMuQnVmOChzdGF0ZS53c2l6ZSk7XG4gIH1cblxuICAvKiBjb3B5IHN0YXRlLT53c2l6ZSBvciBsZXNzIG91dHB1dCBieXRlcyBpbnRvIHRoZSBjaXJjdWxhciB3aW5kb3cgKi9cbiAgaWYgKGNvcHkgPj0gc3RhdGUud3NpemUpIHtcbiAgICB1dGlscy5hcnJheVNldChzdGF0ZS53aW5kb3csIHNyYywgZW5kIC0gc3RhdGUud3NpemUsIHN0YXRlLndzaXplLCAwKTtcbiAgICBzdGF0ZS53bmV4dCA9IDA7XG4gICAgc3RhdGUud2hhdmUgPSBzdGF0ZS53c2l6ZTtcbiAgfVxuICBlbHNlIHtcbiAgICBkaXN0ID0gc3RhdGUud3NpemUgLSBzdGF0ZS53bmV4dDtcbiAgICBpZiAoZGlzdCA+IGNvcHkpIHtcbiAgICAgIGRpc3QgPSBjb3B5O1xuICAgIH1cbiAgICAvL3ptZW1jcHkoc3RhdGUtPndpbmRvdyArIHN0YXRlLT53bmV4dCwgZW5kIC0gY29weSwgZGlzdCk7XG4gICAgdXRpbHMuYXJyYXlTZXQoc3RhdGUud2luZG93LCBzcmMsIGVuZCAtIGNvcHksIGRpc3QsIHN0YXRlLnduZXh0KTtcbiAgICBjb3B5IC09IGRpc3Q7XG4gICAgaWYgKGNvcHkpIHtcbiAgICAgIC8vem1lbWNweShzdGF0ZS0+d2luZG93LCBlbmQgLSBjb3B5LCBjb3B5KTtcbiAgICAgIHV0aWxzLmFycmF5U2V0KHN0YXRlLndpbmRvdywgc3JjLCBlbmQgLSBjb3B5LCBjb3B5LCAwKTtcbiAgICAgIHN0YXRlLnduZXh0ID0gY29weTtcbiAgICAgIHN0YXRlLndoYXZlID0gc3RhdGUud3NpemU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc3RhdGUud25leHQgKz0gZGlzdDtcbiAgICAgIGlmIChzdGF0ZS53bmV4dCA9PT0gc3RhdGUud3NpemUpIHsgc3RhdGUud25leHQgPSAwOyB9XG4gICAgICBpZiAoc3RhdGUud2hhdmUgPCBzdGF0ZS53c2l6ZSkgeyBzdGF0ZS53aGF2ZSArPSBkaXN0OyB9XG4gICAgfVxuICB9XG4gIHJldHVybiAwO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlKHN0cm0sIGZsdXNoKSB7XG4gIHZhciBzdGF0ZTtcbiAgdmFyIGlucHV0LCBvdXRwdXQ7ICAgICAgICAgIC8vIGlucHV0L291dHB1dCBidWZmZXJzXG4gIHZhciBuZXh0OyAgICAgICAgICAgICAgICAgICAvKiBuZXh0IGlucHV0IElOREVYICovXG4gIHZhciBwdXQ7ICAgICAgICAgICAgICAgICAgICAvKiBuZXh0IG91dHB1dCBJTkRFWCAqL1xuICB2YXIgaGF2ZSwgbGVmdDsgICAgICAgICAgICAgLyogYXZhaWxhYmxlIGlucHV0IGFuZCBvdXRwdXQgKi9cbiAgdmFyIGhvbGQ7ICAgICAgICAgICAgICAgICAgIC8qIGJpdCBidWZmZXIgKi9cbiAgdmFyIGJpdHM7ICAgICAgICAgICAgICAgICAgIC8qIGJpdHMgaW4gYml0IGJ1ZmZlciAqL1xuICB2YXIgX2luLCBfb3V0OyAgICAgICAgICAgICAgLyogc2F2ZSBzdGFydGluZyBhdmFpbGFibGUgaW5wdXQgYW5kIG91dHB1dCAqL1xuICB2YXIgY29weTsgICAgICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIHN0b3JlZCBvciBtYXRjaCBieXRlcyB0byBjb3B5ICovXG4gIHZhciBmcm9tOyAgICAgICAgICAgICAgICAgICAvKiB3aGVyZSB0byBjb3B5IG1hdGNoIGJ5dGVzIGZyb20gKi9cbiAgdmFyIGZyb21fc291cmNlO1xuICB2YXIgaGVyZSA9IDA7ICAgICAgICAgICAgICAgLyogY3VycmVudCBkZWNvZGluZyB0YWJsZSBlbnRyeSAqL1xuICB2YXIgaGVyZV9iaXRzLCBoZXJlX29wLCBoZXJlX3ZhbDsgLy8gcGFrZWQgXCJoZXJlXCIgZGVub3JtYWxpemVkIChKUyBzcGVjaWZpYylcbiAgLy92YXIgbGFzdDsgICAgICAgICAgICAgICAgICAgLyogcGFyZW50IHRhYmxlIGVudHJ5ICovXG4gIHZhciBsYXN0X2JpdHMsIGxhc3Rfb3AsIGxhc3RfdmFsOyAvLyBwYWtlZCBcImxhc3RcIiBkZW5vcm1hbGl6ZWQgKEpTIHNwZWNpZmljKVxuICB2YXIgbGVuOyAgICAgICAgICAgICAgICAgICAgLyogbGVuZ3RoIHRvIGNvcHkgZm9yIHJlcGVhdHMsIGJpdHMgdG8gZHJvcCAqL1xuICB2YXIgcmV0OyAgICAgICAgICAgICAgICAgICAgLyogcmV0dXJuIGNvZGUgKi9cbiAgdmFyIGhidWYgPSBuZXcgdXRpbHMuQnVmOCg0KTsgICAgLyogYnVmZmVyIGZvciBnemlwIGhlYWRlciBjcmMgY2FsY3VsYXRpb24gKi9cbiAgdmFyIG9wdHM7XG5cbiAgdmFyIG47IC8vIHRlbXBvcmFyeSB2YXIgZm9yIE5FRURfQklUU1xuXG4gIHZhciBvcmRlciA9IC8qIHBlcm11dGF0aW9uIG9mIGNvZGUgbGVuZ3RocyAqL1xuICAgIFsgMTYsIDE3LCAxOCwgMCwgOCwgNywgOSwgNiwgMTAsIDUsIDExLCA0LCAxMiwgMywgMTMsIDIsIDE0LCAxLCAxNSBdO1xuXG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlIHx8ICFzdHJtLm91dHB1dCB8fFxuICAgICAgKCFzdHJtLmlucHV0ICYmIHN0cm0uYXZhaWxfaW4gIT09IDApKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG5cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBpZiAoc3RhdGUubW9kZSA9PT0gVFlQRSkgeyBzdGF0ZS5tb2RlID0gVFlQRURPOyB9ICAgIC8qIHNraXAgY2hlY2sgKi9cblxuXG4gIC8vLS0tIExPQUQoKSAtLS1cbiAgcHV0ID0gc3RybS5uZXh0X291dDtcbiAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7XG4gIGxlZnQgPSBzdHJtLmF2YWlsX291dDtcbiAgbmV4dCA9IHN0cm0ubmV4dF9pbjtcbiAgaW5wdXQgPSBzdHJtLmlucHV0O1xuICBoYXZlID0gc3RybS5hdmFpbF9pbjtcbiAgaG9sZCA9IHN0YXRlLmhvbGQ7XG4gIGJpdHMgPSBzdGF0ZS5iaXRzO1xuICAvLy0tLVxuXG4gIF9pbiA9IGhhdmU7XG4gIF9vdXQgPSBsZWZ0O1xuICByZXQgPSBaX09LO1xuXG4gIGluZl9sZWF2ZTogLy8gZ290byBlbXVsYXRpb25cbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoc3RhdGUubW9kZSkge1xuICAgIGNhc2UgSEVBRDpcbiAgICAgIGlmIChzdGF0ZS53cmFwID09PSAwKSB7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFRE87XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy89PT0gTkVFREJJVFMoMTYpO1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKChzdGF0ZS53cmFwICYgMikgJiYgaG9sZCA9PT0gMHg4YjFmKSB7ICAvKiBnemlwIGhlYWRlciAqL1xuICAgICAgICBzdGF0ZS5jaGVjayA9IDAvKmNyYzMyKDBMLCBaX05VTEwsIDApKi87XG4gICAgICAgIC8vPT09IENSQzIoc3RhdGUuY2hlY2ssIGhvbGQpO1xuICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTtcbiAgICAgICAgLy89PT0vL1xuXG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5tb2RlID0gRkxBR1M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUuZmxhZ3MgPSAwOyAgICAgICAgICAgLyogZXhwZWN0IHpsaWIgaGVhZGVyICovXG4gICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLmRvbmUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICghKHN0YXRlLndyYXAgJiAxKSB8fCAgIC8qIGNoZWNrIGlmIHpsaWIgaGVhZGVyIGFsbG93ZWQgKi9cbiAgICAgICAgKCgoaG9sZCAmIDB4ZmYpLypCSVRTKDgpKi8gPDwgOCkgKyAoaG9sZCA+PiA4KSkgJSAzMSkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbmNvcnJlY3QgaGVhZGVyIGNoZWNrJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICE9PSBaX0RFRkxBVEVEKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ3Vua25vd24gY29tcHJlc3Npb24gbWV0aG9kJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLy0tLSBEUk9QQklUUyg0KSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IDQ7XG4gICAgICBiaXRzIC09IDQ7XG4gICAgICAvLy0tLS8vXG4gICAgICBsZW4gPSAoaG9sZCAmIDB4MGYpLypCSVRTKDQpKi8gKyA4O1xuICAgICAgaWYgKHN0YXRlLndiaXRzID09PSAwKSB7XG4gICAgICAgIHN0YXRlLndiaXRzID0gbGVuO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAobGVuID4gc3RhdGUud2JpdHMpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCB3aW5kb3cgc2l6ZSc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUuZG1heCA9IDEgPDwgbGVuO1xuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgIHpsaWIgaGVhZGVyIG9rXFxuXCIpKTtcbiAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IDEvKmFkbGVyMzIoMEwsIFpfTlVMTCwgMCkqLztcbiAgICAgIHN0YXRlLm1vZGUgPSBob2xkICYgMHgyMDAgPyBESUNUSUQgOiBUWVBFO1xuICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgIGhvbGQgPSAwO1xuICAgICAgYml0cyA9IDA7XG4gICAgICAvLz09PS8vXG4gICAgICBicmVhaztcbiAgICBjYXNlIEZMQUdTOlxuICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUuZmxhZ3MgPSBob2xkO1xuICAgICAgaWYgKChzdGF0ZS5mbGFncyAmIDB4ZmYpICE9PSBaX0RFRkxBVEVEKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ3Vua25vd24gY29tcHJlc3Npb24gbWV0aG9kJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweGUwMDApIHtcbiAgICAgICAgc3RybS5tc2cgPSAndW5rbm93biBoZWFkZXIgZmxhZ3Mgc2V0JztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLnRleHQgPSAoKGhvbGQgPj4gOCkgJiAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmO1xuICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjtcbiAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgIH1cbiAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICBob2xkID0gMDtcbiAgICAgIGJpdHMgPSAwO1xuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubW9kZSA9IFRJTUU7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBUSU1FOlxuICAgICAgLy89PT0gTkVFREJJVFMoMzIpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC50aW1lID0gaG9sZDtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAvLz09PSBDUkM0KHN0YXRlLmNoZWNrLCBob2xkKVxuICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICBoYnVmWzJdID0gKGhvbGQgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgIGhidWZbM10gPSAoaG9sZCA+Pj4gMjQpICYgMHhmZjtcbiAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgNCwgMCk7XG4gICAgICAgIC8vPT09XG4gICAgICB9XG4gICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgaG9sZCA9IDA7XG4gICAgICBiaXRzID0gMDtcbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLm1vZGUgPSBPUztcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIE9TOlxuICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC54ZmxhZ3MgPSAoaG9sZCAmIDB4ZmYpO1xuICAgICAgICBzdGF0ZS5oZWFkLm9zID0gKGhvbGQgPj4gOCk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7XG4gICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjtcbiAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApO1xuICAgICAgICAvLz09PS8vXG4gICAgICB9XG4gICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgaG9sZCA9IDA7XG4gICAgICBiaXRzID0gMDtcbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLm1vZGUgPSBFWExFTjtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIEVYTEVOOlxuICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwNDAwKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDE2KTsgKi9cbiAgICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5sZW5ndGggPSBob2xkO1xuICAgICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmFfbGVuID0gaG9sZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhID0gbnVsbC8qWl9OVUxMKi87XG4gICAgICB9XG4gICAgICBzdGF0ZS5tb2RlID0gRVhUUkE7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBFWFRSQTpcbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDQwMCkge1xuICAgICAgICBjb3B5ID0gc3RhdGUubGVuZ3RoO1xuICAgICAgICBpZiAoY29weSA+IGhhdmUpIHsgY29weSA9IGhhdmU7IH1cbiAgICAgICAgaWYgKGNvcHkpIHtcbiAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICAgICAgbGVuID0gc3RhdGUuaGVhZC5leHRyYV9sZW4gLSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIXN0YXRlLmhlYWQuZXh0cmEpIHtcbiAgICAgICAgICAgICAgLy8gVXNlIHVudHlwZWQgYXJyYXkgZm9yIG1vcmUgY29udmVuaWVuZCBwcm9jZXNzaW5nIGxhdGVyXG4gICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEgPSBuZXcgQXJyYXkoc3RhdGUuaGVhZC5leHRyYV9sZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXRpbHMuYXJyYXlTZXQoXG4gICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEsXG4gICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICBuZXh0LFxuICAgICAgICAgICAgICAvLyBleHRyYSBmaWVsZCBpcyBsaW1pdGVkIHRvIDY1NTM2IGJ5dGVzXG4gICAgICAgICAgICAgIC8vIC0gbm8gbmVlZCBmb3IgYWRkaXRpb25hbCBzaXplIGNoZWNrXG4gICAgICAgICAgICAgIGNvcHksXG4gICAgICAgICAgICAgIC8qbGVuICsgY29weSA+IHN0YXRlLmhlYWQuZXh0cmFfbWF4IC0gbGVuID8gc3RhdGUuaGVhZC5leHRyYV9tYXggOiBjb3B5LCovXG4gICAgICAgICAgICAgIGxlblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vem1lbWNweShzdGF0ZS5oZWFkLmV4dHJhICsgbGVuLCBuZXh0LFxuICAgICAgICAgICAgLy8gICAgICAgIGxlbiArIGNvcHkgPiBzdGF0ZS5oZWFkLmV4dHJhX21heCA/XG4gICAgICAgICAgICAvLyAgICAgICAgc3RhdGUuaGVhZC5leHRyYV9tYXggLSBsZW4gOiBjb3B5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGhhdmUgLT0gY29weTtcbiAgICAgICAgICBuZXh0ICs9IGNvcHk7XG4gICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLmxlbmd0aCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIH1cbiAgICAgIHN0YXRlLmxlbmd0aCA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gTkFNRTtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIE5BTUU6XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDA4MDApIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGNvcHkgPSAwO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgLy8gVE9ETzogMiBvciAxIGJ5dGVzP1xuICAgICAgICAgIGxlbiA9IGlucHV0W25leHQgKyBjb3B5KytdO1xuICAgICAgICAgIC8qIHVzZSBjb25zdGFudCBsaW1pdCBiZWNhdXNlIGluIGpzIHdlIHNob3VsZCBub3QgcHJlYWxsb2NhdGUgbWVtb3J5ICovXG4gICAgICAgICAgaWYgKHN0YXRlLmhlYWQgJiYgbGVuICYmXG4gICAgICAgICAgICAgIChzdGF0ZS5sZW5ndGggPCA2NTUzNiAvKnN0YXRlLmhlYWQubmFtZV9tYXgqLykpIHtcbiAgICAgICAgICAgIHN0YXRlLmhlYWQubmFtZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGxlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChsZW4gJiYgY29weSA8IGhhdmUpO1xuXG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgaWYgKGxlbikgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5uYW1lID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHN0YXRlLmxlbmd0aCA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gQ09NTUVOVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIENPTU1FTlQ6XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDEwMDApIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGNvcHkgPSAwO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgbGVuID0gaW5wdXRbbmV4dCArIGNvcHkrK107XG4gICAgICAgICAgLyogdXNlIGNvbnN0YW50IGxpbWl0IGJlY2F1c2UgaW4ganMgd2Ugc2hvdWxkIG5vdCBwcmVhbGxvY2F0ZSBtZW1vcnkgKi9cbiAgICAgICAgICBpZiAoc3RhdGUuaGVhZCAmJiBsZW4gJiZcbiAgICAgICAgICAgICAgKHN0YXRlLmxlbmd0aCA8IDY1NTM2IC8qc3RhdGUuaGVhZC5jb21tX21heCovKSkge1xuICAgICAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUobGVuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKGxlbiAmJiBjb3B5IDwgaGF2ZSk7XG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgaWYgKGxlbikgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHN0YXRlLm1vZGUgPSBIQ1JDO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgSENSQzpcbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovXG4gICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgaWYgKGhvbGQgIT09IChzdGF0ZS5jaGVjayAmIDB4ZmZmZikpIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdoZWFkZXIgY3JjIG1pc21hdGNoJztcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5oY3JjID0gKChzdGF0ZS5mbGFncyA+PiA5KSAmIDEpO1xuICAgICAgICBzdGF0ZS5oZWFkLmRvbmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMDtcbiAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBESUNUSUQ6XG4gICAgICAvLz09PSBORUVEQklUUygzMik7ICovXG4gICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICB9XG4gICAgICAvLz09PS8vXG4gICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSB6c3dhcDMyKGhvbGQpO1xuICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgIGhvbGQgPSAwO1xuICAgICAgYml0cyA9IDA7XG4gICAgICAvLz09PS8vXG4gICAgICBzdGF0ZS5tb2RlID0gRElDVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIERJQ1Q6XG4gICAgICBpZiAoc3RhdGUuaGF2ZWRpY3QgPT09IDApIHtcbiAgICAgICAgLy8tLS0gUkVTVE9SRSgpIC0tLVxuICAgICAgICBzdHJtLm5leHRfb3V0ID0gcHV0O1xuICAgICAgICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7XG4gICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7XG4gICAgICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlO1xuICAgICAgICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7XG4gICAgICAgIC8vLS0tXG4gICAgICAgIHJldHVybiBaX05FRURfRElDVDtcbiAgICAgIH1cbiAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IDEvKmFkbGVyMzIoMEwsIFpfTlVMTCwgMCkqLztcbiAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgVFlQRTpcbiAgICAgIGlmIChmbHVzaCA9PT0gWl9CTE9DSyB8fCBmbHVzaCA9PT0gWl9UUkVFUykgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIFRZUEVETzpcbiAgICAgIGlmIChzdGF0ZS5sYXN0KSB7XG4gICAgICAgIC8vLS0tIEJZVEVCSVRTKCkgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IGJpdHMgJiA3O1xuICAgICAgICBiaXRzIC09IGJpdHMgJiA3O1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIHN0YXRlLm1vZGUgPSBDSEVDSztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLz09PSBORUVEQklUUygzKTsgKi9cbiAgICAgIHdoaWxlIChiaXRzIDwgMykge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubGFzdCA9IChob2xkICYgMHgwMSkvKkJJVFMoMSkqLztcbiAgICAgIC8vLS0tIERST1BCSVRTKDEpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gMTtcbiAgICAgIGJpdHMgLT0gMTtcbiAgICAgIC8vLS0tLy9cblxuICAgICAgc3dpdGNoICgoaG9sZCAmIDB4MDMpLypCSVRTKDIpKi8pIHtcbiAgICAgIGNhc2UgMDogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHN0b3JlZCBibG9jayAqL1xuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICBzdG9yZWQgYmxvY2slc1xcblwiLFxuICAgICAgICAvLyAgICAgICAgc3RhdGUubGFzdCA/IFwiIChsYXN0KVwiIDogXCJcIikpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gU1RPUkVEO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGZpeGVkIGJsb2NrICovXG4gICAgICAgIGZpeGVkdGFibGVzKHN0YXRlKTtcbiAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgZml4ZWQgY29kZXMgYmxvY2slc1xcblwiLFxuICAgICAgICAvLyAgICAgICAgc3RhdGUubGFzdCA/IFwiIChsYXN0KVwiIDogXCJcIikpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gTEVOXzsgICAgICAgICAgICAgLyogZGVjb2RlIGNvZGVzICovXG4gICAgICAgIGlmIChmbHVzaCA9PT0gWl9UUkVFUykge1xuICAgICAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vXG4gICAgICAgICAgaG9sZCA+Pj49IDI7XG4gICAgICAgICAgYml0cyAtPSAyO1xuICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBkeW5hbWljIGJsb2NrICovXG4gICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgIGR5bmFtaWMgY29kZXMgYmxvY2slc1xcblwiLFxuICAgICAgICAvLyAgICAgICAgc3RhdGUubGFzdCA/IFwiIChsYXN0KVwiIDogXCJcIikpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gVEFCTEU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGJsb2NrIHR5cGUnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgfVxuICAgICAgLy8tLS0gRFJPUEJJVFMoMikgLS0tLy9cbiAgICAgIGhvbGQgPj4+PSAyO1xuICAgICAgYml0cyAtPSAyO1xuICAgICAgLy8tLS0vL1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBTVE9SRUQ6XG4gICAgICAvLy0tLSBCWVRFQklUUygpIC0tLS8vIC8qIGdvIHRvIGJ5dGUgYm91bmRhcnkgKi9cbiAgICAgIGhvbGQgPj4+PSBiaXRzICYgNztcbiAgICAgIGJpdHMgLT0gYml0cyAmIDc7XG4gICAgICAvLy0tLS8vXG4gICAgICAvLz09PSBORUVEQklUUygzMik7ICovXG4gICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICB9XG4gICAgICAvLz09PS8vXG4gICAgICBpZiAoKGhvbGQgJiAweGZmZmYpICE9PSAoKGhvbGQgPj4+IDE2KSBeIDB4ZmZmZikpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBzdG9yZWQgYmxvY2sgbGVuZ3Rocyc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUubGVuZ3RoID0gaG9sZCAmIDB4ZmZmZjtcbiAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgc3RvcmVkIGxlbmd0aCAldVxcblwiLFxuICAgICAgLy8gICAgICAgIHN0YXRlLmxlbmd0aCkpO1xuICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgIGhvbGQgPSAwO1xuICAgICAgYml0cyA9IDA7XG4gICAgICAvLz09PS8vXG4gICAgICBzdGF0ZS5tb2RlID0gQ09QWV87XG4gICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBDT1BZXzpcbiAgICAgIHN0YXRlLm1vZGUgPSBDT1BZO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgQ09QWTpcbiAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICBpZiAoY29weSkge1xuICAgICAgICBpZiAoY29weSA+IGhhdmUpIHsgY29weSA9IGhhdmU7IH1cbiAgICAgICAgaWYgKGNvcHkgPiBsZWZ0KSB7IGNvcHkgPSBsZWZ0OyB9XG4gICAgICAgIGlmIChjb3B5ID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAvLy0tLSB6bWVtY3B5KHB1dCwgbmV4dCwgY29weSk7IC0tLVxuICAgICAgICB1dGlscy5hcnJheVNldChvdXRwdXQsIGlucHV0LCBuZXh0LCBjb3B5LCBwdXQpO1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIGhhdmUgLT0gY29weTtcbiAgICAgICAgbmV4dCArPSBjb3B5O1xuICAgICAgICBsZWZ0IC09IGNvcHk7XG4gICAgICAgIHB1dCArPSBjb3B5O1xuICAgICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIHN0b3JlZCBlbmRcXG5cIikpO1xuICAgICAgc3RhdGUubW9kZSA9IFRZUEU7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFRBQkxFOlxuICAgICAgLy89PT0gTkVFREJJVFMoMTQpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNCkge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubmxlbiA9IChob2xkICYgMHgxZikvKkJJVFMoNSkqLyArIDI1NztcbiAgICAgIC8vLS0tIERST1BCSVRTKDUpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gNTtcbiAgICAgIGJpdHMgLT0gNTtcbiAgICAgIC8vLS0tLy9cbiAgICAgIHN0YXRlLm5kaXN0ID0gKGhvbGQgJiAweDFmKS8qQklUUyg1KSovICsgMTtcbiAgICAgIC8vLS0tIERST1BCSVRTKDUpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gNTtcbiAgICAgIGJpdHMgLT0gNTtcbiAgICAgIC8vLS0tLy9cbiAgICAgIHN0YXRlLm5jb2RlID0gKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICsgNDtcbiAgICAgIC8vLS0tIERST1BCSVRTKDQpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gNDtcbiAgICAgIGJpdHMgLT0gNDtcbiAgICAgIC8vLS0tLy9cbi8vI2lmbmRlZiBQS1pJUF9CVUdfV09SS0FST1VORFxuICAgICAgaWYgKHN0YXRlLm5sZW4gPiAyODYgfHwgc3RhdGUubmRpc3QgPiAzMCkge1xuICAgICAgICBzdHJtLm1zZyA9ICd0b28gbWFueSBsZW5ndGggb3IgZGlzdGFuY2Ugc3ltYm9scyc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuLy8jZW5kaWZcbiAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgdGFibGUgc2l6ZXMgb2tcXG5cIikpO1xuICAgICAgc3RhdGUuaGF2ZSA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gTEVOTEVOUztcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIExFTkxFTlM6XG4gICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IHN0YXRlLm5jb2RlKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDMpO1xuICAgICAgICB3aGlsZSAoYml0cyA8IDMpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubGVuc1tvcmRlcltzdGF0ZS5oYXZlKytdXSA9IChob2xkICYgMHgwNyk7Ly9CSVRTKDMpO1xuICAgICAgICAvLy0tLSBEUk9QQklUUygzKSAtLS0vL1xuICAgICAgICBob2xkID4+Pj0gMztcbiAgICAgICAgYml0cyAtPSAzO1xuICAgICAgICAvLy0tLS8vXG4gICAgICB9XG4gICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IDE5KSB7XG4gICAgICAgIHN0YXRlLmxlbnNbb3JkZXJbc3RhdGUuaGF2ZSsrXV0gPSAwO1xuICAgICAgfVxuICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC5cbiAgICAgIC8vc3RhdGUubmV4dCA9IHN0YXRlLmNvZGVzO1xuICAgICAgLy9zdGF0ZS5sZW5jb2RlID0gc3RhdGUubmV4dDtcbiAgICAgIC8vIFN3aXRjaCB0byB1c2UgZHluYW1pYyB0YWJsZVxuICAgICAgc3RhdGUubGVuY29kZSA9IHN0YXRlLmxlbmR5bjtcbiAgICAgIHN0YXRlLmxlbmJpdHMgPSA3O1xuXG4gICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5sZW5iaXRzIH07XG4gICAgICByZXQgPSBpbmZsYXRlX3RhYmxlKENPREVTLCBzdGF0ZS5sZW5zLCAwLCAxOSwgc3RhdGUubGVuY29kZSwgMCwgc3RhdGUud29yaywgb3B0cyk7XG4gICAgICBzdGF0ZS5sZW5iaXRzID0gb3B0cy5iaXRzO1xuXG4gICAgICBpZiAocmV0KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgY29kZSBsZW5ndGhzIHNldCc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICBjb2RlIGxlbmd0aHMgb2tcXG5cIikpO1xuICAgICAgc3RhdGUuaGF2ZSA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gQ09ERUxFTlM7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBDT0RFTEVOUzpcbiAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgc3RhdGUubmxlbiArIHN0YXRlLm5kaXN0KSB7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICBoZXJlID0gc3RhdGUubGVuY29kZVtob2xkICYgKCgxIDw8IHN0YXRlLmxlbmJpdHMpIC0gMSldOy8qQklUUyhzdGF0ZS5sZW5iaXRzKSovXG4gICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7XG4gICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICAgIGlmICgoaGVyZV9iaXRzKSA8PSBiaXRzKSB7IGJyZWFrOyB9XG4gICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICB9XG4gICAgICAgIGlmIChoZXJlX3ZhbCA8IDE2KSB7XG4gICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSsrXSA9IGhlcmVfdmFsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGlmIChoZXJlX3ZhbCA9PT0gMTYpIHtcbiAgICAgICAgICAgIC8vPT09IE5FRURCSVRTKGhlcmUuYml0cyArIDIpO1xuICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDI7XG4gICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHtcbiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICAgIGlmIChzdGF0ZS5oYXZlID09PSAwKSB7XG4gICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgYml0IGxlbmd0aCByZXBlYXQnO1xuICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxlbiA9IHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSAtIDFdO1xuICAgICAgICAgICAgY29weSA9IDMgKyAoaG9sZCAmIDB4MDMpOy8vQklUUygyKTtcbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gMjtcbiAgICAgICAgICAgIGJpdHMgLT0gMjtcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoaGVyZV92YWwgPT09IDE3KSB7XG4gICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyAzKTtcbiAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyAzO1xuICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLz09PS8vXG4gICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICBsZW4gPSAwO1xuICAgICAgICAgICAgY29weSA9IDMgKyAoaG9sZCAmIDB4MDcpOy8vQklUUygzKTtcbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDMpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gMztcbiAgICAgICAgICAgIGJpdHMgLT0gMztcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyA3KTtcbiAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyA3O1xuICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLz09PS8vXG4gICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICBsZW4gPSAwO1xuICAgICAgICAgICAgY29weSA9IDExICsgKGhvbGQgJiAweDdmKTsvL0JJVFMoNyk7XG4gICAgICAgICAgICAvLy0tLSBEUk9QQklUUyg3KSAtLS0vL1xuICAgICAgICAgICAgaG9sZCA+Pj49IDc7XG4gICAgICAgICAgICBiaXRzIC09IDc7XG4gICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdGF0ZS5oYXZlICsgY29weSA+IHN0YXRlLm5sZW4gKyBzdGF0ZS5uZGlzdCkge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCc7XG4gICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHdoaWxlIChjb3B5LS0pIHtcbiAgICAgICAgICAgIHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSsrXSA9IGxlbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyogaGFuZGxlIGVycm9yIGJyZWFrcyBpbiB3aGlsZSAqL1xuICAgICAgaWYgKHN0YXRlLm1vZGUgPT09IEJBRCkgeyBicmVhazsgfVxuXG4gICAgICAvKiBjaGVjayBmb3IgZW5kLW9mLWJsb2NrIGNvZGUgKGJldHRlciBoYXZlIG9uZSkgKi9cbiAgICAgIGlmIChzdGF0ZS5sZW5zWzI1Nl0gPT09IDApIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBjb2RlIC0tIG1pc3NpbmcgZW5kLW9mLWJsb2NrJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8qIGJ1aWxkIGNvZGUgdGFibGVzIC0tIG5vdGU6IGRvIG5vdCBjaGFuZ2UgdGhlIGxlbmJpdHMgb3IgZGlzdGJpdHNcbiAgICAgICAgIHZhbHVlcyBoZXJlICg5IGFuZCA2KSB3aXRob3V0IHJlYWRpbmcgdGhlIGNvbW1lbnRzIGluIGluZnRyZWVzLmhcbiAgICAgICAgIGNvbmNlcm5pbmcgdGhlIEVOT1VHSCBjb25zdGFudHMsIHdoaWNoIGRlcGVuZCBvbiB0aG9zZSB2YWx1ZXMgKi9cbiAgICAgIHN0YXRlLmxlbmJpdHMgPSA5O1xuXG4gICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5sZW5iaXRzIH07XG4gICAgICByZXQgPSBpbmZsYXRlX3RhYmxlKExFTlMsIHN0YXRlLmxlbnMsIDAsIHN0YXRlLm5sZW4sIHN0YXRlLmxlbmNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpO1xuICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC5cbiAgICAgIC8vIHN0YXRlLm5leHRfaW5kZXggPSBvcHRzLnRhYmxlX2luZGV4O1xuICAgICAgc3RhdGUubGVuYml0cyA9IG9wdHMuYml0cztcbiAgICAgIC8vIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5uZXh0O1xuXG4gICAgICBpZiAocmV0KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgbGl0ZXJhbC9sZW5ndGhzIHNldCc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZS5kaXN0Yml0cyA9IDY7XG4gICAgICAvL3N0YXRlLmRpc3Rjb2RlLmNvcHkoc3RhdGUuY29kZXMpO1xuICAgICAgLy8gU3dpdGNoIHRvIHVzZSBkeW5hbWljIHRhYmxlXG4gICAgICBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLmRpc3RkeW47XG4gICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5kaXN0Yml0cyB9O1xuICAgICAgcmV0ID0gaW5mbGF0ZV90YWJsZShESVNUUywgc3RhdGUubGVucywgc3RhdGUubmxlbiwgc3RhdGUubmRpc3QsIHN0YXRlLmRpc3Rjb2RlLCAwLCBzdGF0ZS53b3JrLCBvcHRzKTtcbiAgICAgIC8vIFdlIGhhdmUgc2VwYXJhdGUgdGFibGVzICYgbm8gcG9pbnRlcnMuIDIgY29tbWVudGVkIGxpbmVzIGJlbG93IG5vdCBuZWVkZWQuXG4gICAgICAvLyBzdGF0ZS5uZXh0X2luZGV4ID0gb3B0cy50YWJsZV9pbmRleDtcbiAgICAgIHN0YXRlLmRpc3RiaXRzID0gb3B0cy5iaXRzO1xuICAgICAgLy8gc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5uZXh0O1xuXG4gICAgICBpZiAocmV0KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2VzIHNldCc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgJ2luZmxhdGU6ICAgICAgIGNvZGVzIG9rXFxuJykpO1xuICAgICAgc3RhdGUubW9kZSA9IExFTl87XG4gICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBMRU5fOlxuICAgICAgc3RhdGUubW9kZSA9IExFTjtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIExFTjpcbiAgICAgIGlmIChoYXZlID49IDYgJiYgbGVmdCA+PSAyNTgpIHtcbiAgICAgICAgLy8tLS0gUkVTVE9SRSgpIC0tLVxuICAgICAgICBzdHJtLm5leHRfb3V0ID0gcHV0O1xuICAgICAgICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7XG4gICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7XG4gICAgICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlO1xuICAgICAgICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7XG4gICAgICAgIC8vLS0tXG4gICAgICAgIGluZmxhdGVfZmFzdChzdHJtLCBfb3V0KTtcbiAgICAgICAgLy8tLS0gTE9BRCgpIC0tLVxuICAgICAgICBwdXQgPSBzdHJtLm5leHRfb3V0O1xuICAgICAgICBvdXRwdXQgPSBzdHJtLm91dHB1dDtcbiAgICAgICAgbGVmdCA9IHN0cm0uYXZhaWxfb3V0O1xuICAgICAgICBuZXh0ID0gc3RybS5uZXh0X2luO1xuICAgICAgICBpbnB1dCA9IHN0cm0uaW5wdXQ7XG4gICAgICAgIGhhdmUgPSBzdHJtLmF2YWlsX2luO1xuICAgICAgICBob2xkID0gc3RhdGUuaG9sZDtcbiAgICAgICAgYml0cyA9IHN0YXRlLmJpdHM7XG4gICAgICAgIC8vLS0tXG5cbiAgICAgICAgaWYgKHN0YXRlLm1vZGUgPT09IFRZUEUpIHtcbiAgICAgICAgICBzdGF0ZS5iYWNrID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzdGF0ZS5iYWNrID0gMDtcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbaG9sZCAmICgoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDEpXTsgIC8qQklUUyhzdGF0ZS5sZW5iaXRzKSovXG4gICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICBpZiAoaGVyZV9iaXRzIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAvLy0tLS8vXG4gICAgICB9XG4gICAgICBpZiAoaGVyZV9vcCAmJiAoaGVyZV9vcCAmIDB4ZjApID09PSAwKSB7XG4gICAgICAgIGxhc3RfYml0cyA9IGhlcmVfYml0cztcbiAgICAgICAgbGFzdF9vcCA9IGhlcmVfb3A7XG4gICAgICAgIGxhc3RfdmFsID0gaGVyZV92YWw7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICBoZXJlID0gc3RhdGUubGVuY29kZVtsYXN0X3ZhbCArXG4gICAgICAgICAgICAgICAgICAoKGhvbGQgJiAoKDEgPDwgKGxhc3RfYml0cyArIGxhc3Rfb3ApKSAtIDEpKS8qQklUUyhsYXN0LmJpdHMgKyBsYXN0Lm9wKSovID4+IGxhc3RfYml0cyldO1xuICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7XG5cbiAgICAgICAgICBpZiAoKGxhc3RfYml0cyArIGhlcmVfYml0cykgPD0gYml0cykgeyBicmVhazsgfVxuICAgICAgICAgIC8vLS0tIFBVTExCWVRFKCkgLS0tLy9cbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgfVxuICAgICAgICAvLy0tLSBEUk9QQklUUyhsYXN0LmJpdHMpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSBsYXN0X2JpdHM7XG4gICAgICAgIGJpdHMgLT0gbGFzdF9iaXRzO1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIHN0YXRlLmJhY2sgKz0gbGFzdF9iaXRzO1xuICAgICAgfVxuICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgLy8tLS0vL1xuICAgICAgc3RhdGUuYmFjayArPSBoZXJlX2JpdHM7XG4gICAgICBzdGF0ZS5sZW5ndGggPSBoZXJlX3ZhbDtcbiAgICAgIGlmIChoZXJlX29wID09PSAwKSB7XG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBoZXJlLnZhbCA+PSAweDIwICYmIGhlcmUudmFsIDwgMHg3ZiA/XG4gICAgICAgIC8vICAgICAgICBcImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAnJWMnXFxuXCIgOlxuICAgICAgICAvLyAgICAgICAgXCJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgMHglMDJ4XFxuXCIsIGhlcmUudmFsKSk7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBMSVQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGhlcmVfb3AgJiAzMikge1xuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGVuZCBvZiBibG9ja1xcblwiKSk7XG4gICAgICAgIHN0YXRlLmJhY2sgPSAtMTtcbiAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGhlcmVfb3AgJiA2NCkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHN0YXRlLmV4dHJhID0gaGVyZV9vcCAmIDE1O1xuICAgICAgc3RhdGUubW9kZSA9IExFTkVYVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIExFTkVYVDpcbiAgICAgIGlmIChzdGF0ZS5leHRyYSkge1xuICAgICAgICAvLz09PSBORUVEQklUUyhzdGF0ZS5leHRyYSk7XG4gICAgICAgIG4gPSBzdGF0ZS5leHRyYTtcbiAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLmxlbmd0aCArPSBob2xkICYgKCgxIDw8IHN0YXRlLmV4dHJhKSAtIDEpLypCSVRTKHN0YXRlLmV4dHJhKSovO1xuICAgICAgICAvLy0tLSBEUk9QQklUUyhzdGF0ZS5leHRyYSkgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IHN0YXRlLmV4dHJhO1xuICAgICAgICBiaXRzIC09IHN0YXRlLmV4dHJhO1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIHN0YXRlLmJhY2sgKz0gc3RhdGUuZXh0cmE7XG4gICAgICB9XG4gICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGxlbmd0aCAldVxcblwiLCBzdGF0ZS5sZW5ndGgpKTtcbiAgICAgIHN0YXRlLndhcyA9IHN0YXRlLmxlbmd0aDtcbiAgICAgIHN0YXRlLm1vZGUgPSBESVNUO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgRElTVDpcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgaGVyZSA9IHN0YXRlLmRpc3Rjb2RlW2hvbGQgJiAoKDEgPDwgc3RhdGUuZGlzdGJpdHMpIC0gMSldOy8qQklUUyhzdGF0ZS5kaXN0Yml0cykqL1xuICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7XG5cbiAgICAgICAgaWYgKChoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAvLy0tLS8vXG4gICAgICB9XG4gICAgICBpZiAoKGhlcmVfb3AgJiAweGYwKSA9PT0gMCkge1xuICAgICAgICBsYXN0X2JpdHMgPSBoZXJlX2JpdHM7XG4gICAgICAgIGxhc3Rfb3AgPSBoZXJlX29wO1xuICAgICAgICBsYXN0X3ZhbCA9IGhlcmVfdmFsO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgaGVyZSA9IHN0YXRlLmRpc3Rjb2RlW2xhc3RfdmFsICtcbiAgICAgICAgICAgICAgICAgICgoaG9sZCAmICgoMSA8PCAobGFzdF9iaXRzICsgbGFzdF9vcCkpIC0gMSkpLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07XG4gICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7XG4gICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICAgIGlmICgobGFzdF9iaXRzICsgaGVyZV9iaXRzKSA8PSBiaXRzKSB7IGJyZWFrOyB9XG4gICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICB9XG4gICAgICAgIC8vLS0tIERST1BCSVRTKGxhc3QuYml0cykgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IGxhc3RfYml0cztcbiAgICAgICAgYml0cyAtPSBsYXN0X2JpdHM7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUuYmFjayArPSBsYXN0X2JpdHM7XG4gICAgICB9XG4gICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAvLy0tLS8vXG4gICAgICBzdGF0ZS5iYWNrICs9IGhlcmVfYml0cztcbiAgICAgIGlmIChoZXJlX29wICYgNjQpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSBjb2RlJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzdGF0ZS5vZmZzZXQgPSBoZXJlX3ZhbDtcbiAgICAgIHN0YXRlLmV4dHJhID0gKGhlcmVfb3ApICYgMTU7XG4gICAgICBzdGF0ZS5tb2RlID0gRElTVEVYVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIERJU1RFWFQ6XG4gICAgICBpZiAoc3RhdGUuZXh0cmEpIHtcbiAgICAgICAgLy89PT0gTkVFREJJVFMoc3RhdGUuZXh0cmEpO1xuICAgICAgICBuID0gc3RhdGUuZXh0cmE7XG4gICAgICAgIHdoaWxlIChiaXRzIDwgbikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5vZmZzZXQgKz0gaG9sZCAmICgoMSA8PCBzdGF0ZS5leHRyYSkgLSAxKS8qQklUUyhzdGF0ZS5leHRyYSkqLztcbiAgICAgICAgLy8tLS0gRFJPUEJJVFMoc3RhdGUuZXh0cmEpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSBzdGF0ZS5leHRyYTtcbiAgICAgICAgYml0cyAtPSBzdGF0ZS5leHRyYTtcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBzdGF0ZS5iYWNrICs9IHN0YXRlLmV4dHJhO1xuICAgICAgfVxuLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1RcbiAgICAgIGlmIChzdGF0ZS5vZmZzZXQgPiBzdGF0ZS5kbWF4KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4vLyNlbmRpZlxuICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBkaXN0YW5jZSAldVxcblwiLCBzdGF0ZS5vZmZzZXQpKTtcbiAgICAgIHN0YXRlLm1vZGUgPSBNQVRDSDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIE1BVENIOlxuICAgICAgaWYgKGxlZnQgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICBjb3B5ID0gX291dCAtIGxlZnQ7XG4gICAgICBpZiAoc3RhdGUub2Zmc2V0ID4gY29weSkgeyAgICAgICAgIC8qIGNvcHkgZnJvbSB3aW5kb3cgKi9cbiAgICAgICAgY29weSA9IHN0YXRlLm9mZnNldCAtIGNvcHk7XG4gICAgICAgIGlmIChjb3B5ID4gc3RhdGUud2hhdmUpIHtcbiAgICAgICAgICBpZiAoc3RhdGUuc2FuZSkge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2snO1xuICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbi8vICghKSBUaGlzIGJsb2NrIGlzIGRpc2FibGVkIGluIHpsaWIgZGVmYWlsdHMsXG4vLyBkb24ndCBlbmFibGUgaXQgZm9yIGJpbmFyeSBjb21wYXRpYmlsaXR5XG4vLyNpZmRlZiBJTkZMQVRFX0FMTE9XX0lOVkFMSURfRElTVEFOQ0VfVE9PRkFSX0FSUlJcbi8vICAgICAgICAgIFRyYWNlKChzdGRlcnIsIFwiaW5mbGF0ZS5jIHRvbyBmYXJcXG5cIikpO1xuLy8gICAgICAgICAgY29weSAtPSBzdGF0ZS53aGF2ZTtcbi8vICAgICAgICAgIGlmIChjb3B5ID4gc3RhdGUubGVuZ3RoKSB7IGNvcHkgPSBzdGF0ZS5sZW5ndGg7IH1cbi8vICAgICAgICAgIGlmIChjb3B5ID4gbGVmdCkgeyBjb3B5ID0gbGVmdDsgfVxuLy8gICAgICAgICAgbGVmdCAtPSBjb3B5O1xuLy8gICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4vLyAgICAgICAgICBkbyB7XG4vLyAgICAgICAgICAgIG91dHB1dFtwdXQrK10gPSAwO1xuLy8gICAgICAgICAgfSB3aGlsZSAoLS1jb3B5KTtcbi8vICAgICAgICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHsgc3RhdGUubW9kZSA9IExFTjsgfVxuLy8gICAgICAgICAgYnJlYWs7XG4vLyNlbmRpZlxuICAgICAgICB9XG4gICAgICAgIGlmIChjb3B5ID4gc3RhdGUud25leHQpIHtcbiAgICAgICAgICBjb3B5IC09IHN0YXRlLnduZXh0O1xuICAgICAgICAgIGZyb20gPSBzdGF0ZS53c2l6ZSAtIGNvcHk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZnJvbSA9IHN0YXRlLnduZXh0IC0gY29weTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29weSA+IHN0YXRlLmxlbmd0aCkgeyBjb3B5ID0gc3RhdGUubGVuZ3RoOyB9XG4gICAgICAgIGZyb21fc291cmNlID0gc3RhdGUud2luZG93O1xuICAgICAgfVxuICAgICAgZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogY29weSBmcm9tIG91dHB1dCAqL1xuICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDtcbiAgICAgICAgZnJvbSA9IHB1dCAtIHN0YXRlLm9mZnNldDtcbiAgICAgICAgY29weSA9IHN0YXRlLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGlmIChjb3B5ID4gbGVmdCkgeyBjb3B5ID0gbGVmdDsgfVxuICAgICAgbGVmdCAtPSBjb3B5O1xuICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4gICAgICBkbyB7XG4gICAgICAgIG91dHB1dFtwdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgfSB3aGlsZSAoLS1jb3B5KTtcbiAgICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHsgc3RhdGUubW9kZSA9IExFTjsgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBMSVQ6XG4gICAgICBpZiAobGVmdCA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIG91dHB1dFtwdXQrK10gPSBzdGF0ZS5sZW5ndGg7XG4gICAgICBsZWZ0LS07XG4gICAgICBzdGF0ZS5tb2RlID0gTEVOO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBDSEVDSzpcbiAgICAgIGlmIChzdGF0ZS53cmFwKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDMyKTtcbiAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAvLyBVc2UgJ3wnIGluc2RlYWQgb2YgJysnIHRvIG1ha2Ugc3VyZSB0aGF0IHJlc3VsdCBpcyBzaWduZWRcbiAgICAgICAgICBob2xkIHw9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBfb3V0IC09IGxlZnQ7XG4gICAgICAgIHN0cm0udG90YWxfb3V0ICs9IF9vdXQ7XG4gICAgICAgIHN0YXRlLnRvdGFsICs9IF9vdXQ7XG4gICAgICAgIGlmIChfb3V0KSB7XG4gICAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID1cbiAgICAgICAgICAgICAgLypVUERBVEUoc3RhdGUuY2hlY2ssIHB1dCAtIF9vdXQsIF9vdXQpOyovXG4gICAgICAgICAgICAgIChzdGF0ZS5mbGFncyA/IGNyYzMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHB1dCAtIF9vdXQpIDogYWRsZXIzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBwdXQgLSBfb3V0KSk7XG5cbiAgICAgICAgfVxuICAgICAgICBfb3V0ID0gbGVmdDtcbiAgICAgICAgLy8gTkI6IGNyYzMyIHN0b3JlZCBhcyBzaWduZWQgMzItYml0IGludCwgenN3YXAzMiByZXR1cm5zIHNpZ25lZCB0b29cbiAgICAgICAgaWYgKChzdGF0ZS5mbGFncyA/IGhvbGQgOiB6c3dhcDMyKGhvbGQpKSAhPT0gc3RhdGUuY2hlY2spIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdpbmNvcnJlY3QgZGF0YSBjaGVjayc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICBob2xkID0gMDtcbiAgICAgICAgYml0cyA9IDA7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgIGNoZWNrIG1hdGNoZXMgdHJhaWxlclxcblwiKSk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5tb2RlID0gTEVOR1RIO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgTEVOR1RIOlxuICAgICAgaWYgKHN0YXRlLndyYXAgJiYgc3RhdGUuZmxhZ3MpIHtcbiAgICAgICAgLy89PT0gTkVFREJJVFMoMzIpO1xuICAgICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIGlmIChob2xkICE9PSAoc3RhdGUudG90YWwgJiAweGZmZmZmZmZmKSkge1xuICAgICAgICAgIHN0cm0ubXNnID0gJ2luY29ycmVjdCBsZW5ndGggY2hlY2snO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAvLz09PS8vXG4gICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICBsZW5ndGggbWF0Y2hlcyB0cmFpbGVyXFxuXCIpKTtcbiAgICAgIH1cbiAgICAgIHN0YXRlLm1vZGUgPSBET05FO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgRE9ORTpcbiAgICAgIHJldCA9IFpfU1RSRUFNX0VORDtcbiAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICBjYXNlIEJBRDpcbiAgICAgIHJldCA9IFpfREFUQV9FUlJPUjtcbiAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICBjYXNlIE1FTTpcbiAgICAgIHJldHVybiBaX01FTV9FUlJPUjtcbiAgICBjYXNlIFNZTkM6XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgICB9XG4gIH1cblxuICAvLyBpbmZfbGVhdmUgPC0gaGVyZSBpcyByZWFsIHBsYWNlIGZvciBcImdvdG8gaW5mX2xlYXZlXCIsIGVtdWxhdGVkIHZpYSBcImJyZWFrIGluZl9sZWF2ZVwiXG5cbiAgLypcbiAgICAgUmV0dXJuIGZyb20gaW5mbGF0ZSgpLCB1cGRhdGluZyB0aGUgdG90YWwgY291bnRzIGFuZCB0aGUgY2hlY2sgdmFsdWUuXG4gICAgIElmIHRoZXJlIHdhcyBubyBwcm9ncmVzcyBkdXJpbmcgdGhlIGluZmxhdGUoKSBjYWxsLCByZXR1cm4gYSBidWZmZXJcbiAgICAgZXJyb3IuICBDYWxsIHVwZGF0ZXdpbmRvdygpIHRvIGNyZWF0ZSBhbmQvb3IgdXBkYXRlIHRoZSB3aW5kb3cgc3RhdGUuXG4gICAgIE5vdGU6IGEgbWVtb3J5IGVycm9yIGZyb20gaW5mbGF0ZSgpIGlzIG5vbi1yZWNvdmVyYWJsZS5cbiAgICovXG5cbiAgLy8tLS0gUkVTVE9SRSgpIC0tLVxuICBzdHJtLm5leHRfb3V0ID0gcHV0O1xuICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7XG4gIHN0cm0ubmV4dF9pbiA9IG5leHQ7XG4gIHN0cm0uYXZhaWxfaW4gPSBoYXZlO1xuICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgc3RhdGUuYml0cyA9IGJpdHM7XG4gIC8vLS0tXG5cbiAgaWYgKHN0YXRlLndzaXplIHx8IChfb3V0ICE9PSBzdHJtLmF2YWlsX291dCAmJiBzdGF0ZS5tb2RlIDwgQkFEICYmXG4gICAgICAgICAgICAgICAgICAgICAgKHN0YXRlLm1vZGUgPCBDSEVDSyB8fCBmbHVzaCAhPT0gWl9GSU5JU0gpKSkge1xuICAgIGlmICh1cGRhdGV3aW5kb3coc3RybSwgc3RybS5vdXRwdXQsIHN0cm0ubmV4dF9vdXQsIF9vdXQgLSBzdHJtLmF2YWlsX291dCkpIHtcbiAgICAgIHN0YXRlLm1vZGUgPSBNRU07XG4gICAgICByZXR1cm4gWl9NRU1fRVJST1I7XG4gICAgfVxuICB9XG4gIF9pbiAtPSBzdHJtLmF2YWlsX2luO1xuICBfb3V0IC09IHN0cm0uYXZhaWxfb3V0O1xuICBzdHJtLnRvdGFsX2luICs9IF9pbjtcbiAgc3RybS50b3RhbF9vdXQgKz0gX291dDtcbiAgc3RhdGUudG90YWwgKz0gX291dDtcbiAgaWYgKHN0YXRlLndyYXAgJiYgX291dCkge1xuICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IC8qVVBEQVRFKHN0YXRlLmNoZWNrLCBzdHJtLm5leHRfb3V0IC0gX291dCwgX291dCk7Ki9cbiAgICAgIChzdGF0ZS5mbGFncyA/IGNyYzMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHN0cm0ubmV4dF9vdXQgLSBfb3V0KSA6IGFkbGVyMzIoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgc3RybS5uZXh0X291dCAtIF9vdXQpKTtcbiAgfVxuICBzdHJtLmRhdGFfdHlwZSA9IHN0YXRlLmJpdHMgKyAoc3RhdGUubGFzdCA/IDY0IDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAoc3RhdGUubW9kZSA9PT0gVFlQRSA/IDEyOCA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgKHN0YXRlLm1vZGUgPT09IExFTl8gfHwgc3RhdGUubW9kZSA9PT0gQ09QWV8gPyAyNTYgOiAwKTtcbiAgaWYgKCgoX2luID09PSAwICYmIF9vdXQgPT09IDApIHx8IGZsdXNoID09PSBaX0ZJTklTSCkgJiYgcmV0ID09PSBaX09LKSB7XG4gICAgcmV0ID0gWl9CVUZfRVJST1I7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZUVuZChzdHJtKSB7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlIC8qfHwgc3RybS0+emZyZWUgPT0gKGZyZWVfZnVuYykwKi8pIHtcbiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gIH1cblxuICB2YXIgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBpZiAoc3RhdGUud2luZG93KSB7XG4gICAgc3RhdGUud2luZG93ID0gbnVsbDtcbiAgfVxuICBzdHJtLnN0YXRlID0gbnVsbDtcbiAgcmV0dXJuIFpfT0s7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGVHZXRIZWFkZXIoc3RybSwgaGVhZCkge1xuICB2YXIgc3RhdGU7XG5cbiAgLyogY2hlY2sgc3RhdGUgKi9cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIGlmICgoc3RhdGUud3JhcCAmIDIpID09PSAwKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuXG4gIC8qIHNhdmUgaGVhZGVyIHN0cnVjdHVyZSAqL1xuICBzdGF0ZS5oZWFkID0gaGVhZDtcbiAgaGVhZC5kb25lID0gZmFsc2U7XG4gIHJldHVybiBaX09LO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlU2V0RGljdGlvbmFyeShzdHJtLCBkaWN0aW9uYXJ5KSB7XG4gIHZhciBkaWN0TGVuZ3RoID0gZGljdGlvbmFyeS5sZW5ndGg7XG5cbiAgdmFyIHN0YXRlO1xuICB2YXIgZGljdGlkO1xuICB2YXIgcmV0O1xuXG4gIC8qIGNoZWNrIHN0YXRlICovXG4gIGlmICghc3RybSAvKiA9PSBaX05VTEwgKi8gfHwgIXN0cm0uc3RhdGUgLyogPT0gWl9OVUxMICovKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG5cbiAgaWYgKHN0YXRlLndyYXAgIT09IDAgJiYgc3RhdGUubW9kZSAhPT0gRElDVCkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuXG4gIC8qIGNoZWNrIGZvciBjb3JyZWN0IGRpY3Rpb25hcnkgaWRlbnRpZmllciAqL1xuICBpZiAoc3RhdGUubW9kZSA9PT0gRElDVCkge1xuICAgIGRpY3RpZCA9IDE7IC8qIGFkbGVyMzIoMCwgbnVsbCwgMCkqL1xuICAgIC8qIGRpY3RpZCA9IGFkbGVyMzIoZGljdGlkLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoKTsgKi9cbiAgICBkaWN0aWQgPSBhZGxlcjMyKGRpY3RpZCwgZGljdGlvbmFyeSwgZGljdExlbmd0aCwgMCk7XG4gICAgaWYgKGRpY3RpZCAhPT0gc3RhdGUuY2hlY2spIHtcbiAgICAgIHJldHVybiBaX0RBVEFfRVJST1I7XG4gICAgfVxuICB9XG4gIC8qIGNvcHkgZGljdGlvbmFyeSB0byB3aW5kb3cgdXNpbmcgdXBkYXRld2luZG93KCksIHdoaWNoIHdpbGwgYW1lbmQgdGhlXG4gICBleGlzdGluZyBkaWN0aW9uYXJ5IGlmIGFwcHJvcHJpYXRlICovXG4gIHJldCA9IHVwZGF0ZXdpbmRvdyhzdHJtLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoLCBkaWN0TGVuZ3RoKTtcbiAgaWYgKHJldCkge1xuICAgIHN0YXRlLm1vZGUgPSBNRU07XG4gICAgcmV0dXJuIFpfTUVNX0VSUk9SO1xuICB9XG4gIHN0YXRlLmhhdmVkaWN0ID0gMTtcbiAgLy8gVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICBkaWN0aW9uYXJ5IHNldFxcblwiKSk7XG4gIHJldHVybiBaX09LO1xufVxuXG5leHBvcnRzLmluZmxhdGVSZXNldCA9IGluZmxhdGVSZXNldDtcbmV4cG9ydHMuaW5mbGF0ZVJlc2V0MiA9IGluZmxhdGVSZXNldDI7XG5leHBvcnRzLmluZmxhdGVSZXNldEtlZXAgPSBpbmZsYXRlUmVzZXRLZWVwO1xuZXhwb3J0cy5pbmZsYXRlSW5pdCA9IGluZmxhdGVJbml0O1xuZXhwb3J0cy5pbmZsYXRlSW5pdDIgPSBpbmZsYXRlSW5pdDI7XG5leHBvcnRzLmluZmxhdGUgPSBpbmZsYXRlO1xuZXhwb3J0cy5pbmZsYXRlRW5kID0gaW5mbGF0ZUVuZDtcbmV4cG9ydHMuaW5mbGF0ZUdldEhlYWRlciA9IGluZmxhdGVHZXRIZWFkZXI7XG5leHBvcnRzLmluZmxhdGVTZXREaWN0aW9uYXJ5ID0gaW5mbGF0ZVNldERpY3Rpb25hcnk7XG5leHBvcnRzLmluZmxhdGVJbmZvID0gJ3Bha28gaW5mbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdCknO1xuXG4vKiBOb3QgaW1wbGVtZW50ZWRcbmV4cG9ydHMuaW5mbGF0ZUNvcHkgPSBpbmZsYXRlQ29weTtcbmV4cG9ydHMuaW5mbGF0ZUdldERpY3Rpb25hcnkgPSBpbmZsYXRlR2V0RGljdGlvbmFyeTtcbmV4cG9ydHMuaW5mbGF0ZU1hcmsgPSBpbmZsYXRlTWFyaztcbmV4cG9ydHMuaW5mbGF0ZVByaW1lID0gaW5mbGF0ZVByaW1lO1xuZXhwb3J0cy5pbmZsYXRlU3luYyA9IGluZmxhdGVTeW5jO1xuZXhwb3J0cy5pbmZsYXRlU3luY1BvaW50ID0gaW5mbGF0ZVN5bmNQb2ludDtcbmV4cG9ydHMuaW5mbGF0ZVVuZGVybWluZSA9IGluZmxhdGVVbmRlcm1pbmU7XG4qL1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL2NvbW1vbicpO1xuXG52YXIgTUFYQklUUyA9IDE1O1xudmFyIEVOT1VHSF9MRU5TID0gODUyO1xudmFyIEVOT1VHSF9ESVNUUyA9IDU5Mjtcbi8vdmFyIEVOT1VHSCA9IChFTk9VR0hfTEVOUytFTk9VR0hfRElTVFMpO1xuXG52YXIgQ09ERVMgPSAwO1xudmFyIExFTlMgPSAxO1xudmFyIERJU1RTID0gMjtcblxudmFyIGxiYXNlID0gWyAvKiBMZW5ndGggY29kZXMgMjU3Li4yODUgYmFzZSAqL1xuICAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIDEzLCAxNSwgMTcsIDE5LCAyMywgMjcsIDMxLFxuICAzNSwgNDMsIDUxLCA1OSwgNjcsIDgzLCA5OSwgMTE1LCAxMzEsIDE2MywgMTk1LCAyMjcsIDI1OCwgMCwgMFxuXTtcblxudmFyIGxleHQgPSBbIC8qIExlbmd0aCBjb2RlcyAyNTcuLjI4NSBleHRyYSAqL1xuICAxNiwgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTYsIDE3LCAxNywgMTcsIDE3LCAxOCwgMTgsIDE4LCAxOCxcbiAgMTksIDE5LCAxOSwgMTksIDIwLCAyMCwgMjAsIDIwLCAyMSwgMjEsIDIxLCAyMSwgMTYsIDcyLCA3OFxuXTtcblxudmFyIGRiYXNlID0gWyAvKiBEaXN0YW5jZSBjb2RlcyAwLi4yOSBiYXNlICovXG4gIDEsIDIsIDMsIDQsIDUsIDcsIDksIDEzLCAxNywgMjUsIDMzLCA0OSwgNjUsIDk3LCAxMjksIDE5MyxcbiAgMjU3LCAzODUsIDUxMywgNzY5LCAxMDI1LCAxNTM3LCAyMDQ5LCAzMDczLCA0MDk3LCA2MTQ1LFxuICA4MTkzLCAxMjI4OSwgMTYzODUsIDI0NTc3LCAwLCAwXG5dO1xuXG52YXIgZGV4dCA9IFsgLyogRGlzdGFuY2UgY29kZXMgMC4uMjkgZXh0cmEgKi9cbiAgMTYsIDE2LCAxNiwgMTYsIDE3LCAxNywgMTgsIDE4LCAxOSwgMTksIDIwLCAyMCwgMjEsIDIxLCAyMiwgMjIsXG4gIDIzLCAyMywgMjQsIDI0LCAyNSwgMjUsIDI2LCAyNiwgMjcsIDI3LFxuICAyOCwgMjgsIDI5LCAyOSwgNjQsIDY0XG5dO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluZmxhdGVfdGFibGUodHlwZSwgbGVucywgbGVuc19pbmRleCwgY29kZXMsIHRhYmxlLCB0YWJsZV9pbmRleCwgd29yaywgb3B0cylcbntcbiAgdmFyIGJpdHMgPSBvcHRzLmJpdHM7XG4gICAgICAvL2hlcmUgPSBvcHRzLmhlcmU7IC8qIHRhYmxlIGVudHJ5IGZvciBkdXBsaWNhdGlvbiAqL1xuXG4gIHZhciBsZW4gPSAwOyAgICAgICAgICAgICAgIC8qIGEgY29kZSdzIGxlbmd0aCBpbiBiaXRzICovXG4gIHZhciBzeW0gPSAwOyAgICAgICAgICAgICAgIC8qIGluZGV4IG9mIGNvZGUgc3ltYm9scyAqL1xuICB2YXIgbWluID0gMCwgbWF4ID0gMDsgICAgICAgICAgLyogbWluaW11bSBhbmQgbWF4aW11bSBjb2RlIGxlbmd0aHMgKi9cbiAgdmFyIHJvb3QgPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGluZGV4IGJpdHMgZm9yIHJvb3QgdGFibGUgKi9cbiAgdmFyIGN1cnIgPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGluZGV4IGJpdHMgZm9yIGN1cnJlbnQgdGFibGUgKi9cbiAgdmFyIGRyb3AgPSAwOyAgICAgICAgICAgICAgLyogY29kZSBiaXRzIHRvIGRyb3AgZm9yIHN1Yi10YWJsZSAqL1xuICB2YXIgbGVmdCA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBwcmVmaXggY29kZXMgYXZhaWxhYmxlICovXG4gIHZhciB1c2VkID0gMDsgICAgICAgICAgICAgIC8qIGNvZGUgZW50cmllcyBpbiB0YWJsZSB1c2VkICovXG4gIHZhciBodWZmID0gMDsgICAgICAgICAgICAgIC8qIEh1ZmZtYW4gY29kZSAqL1xuICB2YXIgaW5jcjsgICAgICAgICAgICAgIC8qIGZvciBpbmNyZW1lbnRpbmcgY29kZSwgaW5kZXggKi9cbiAgdmFyIGZpbGw7ICAgICAgICAgICAgICAvKiBpbmRleCBmb3IgcmVwbGljYXRpbmcgZW50cmllcyAqL1xuICB2YXIgbG93OyAgICAgICAgICAgICAgIC8qIGxvdyBiaXRzIGZvciBjdXJyZW50IHJvb3QgZW50cnkgKi9cbiAgdmFyIG1hc2s7ICAgICAgICAgICAgICAvKiBtYXNrIGZvciBsb3cgcm9vdCBiaXRzICovXG4gIHZhciBuZXh0OyAgICAgICAgICAgICAvKiBuZXh0IGF2YWlsYWJsZSBzcGFjZSBpbiB0YWJsZSAqL1xuICB2YXIgYmFzZSA9IG51bGw7ICAgICAvKiBiYXNlIHZhbHVlIHRhYmxlIHRvIHVzZSAqL1xuICB2YXIgYmFzZV9pbmRleCA9IDA7XG4vLyAgdmFyIHNob2V4dHJhOyAgICAvKiBleHRyYSBiaXRzIHRhYmxlIHRvIHVzZSAqL1xuICB2YXIgZW5kOyAgICAgICAgICAgICAgICAgICAgLyogdXNlIGJhc2UgYW5kIGV4dHJhIGZvciBzeW1ib2wgPiBlbmQgKi9cbiAgdmFyIGNvdW50ID0gbmV3IHV0aWxzLkJ1ZjE2KE1BWEJJVFMgKyAxKTsgLy9bTUFYQklUUysxXTsgICAgLyogbnVtYmVyIG9mIGNvZGVzIG9mIGVhY2ggbGVuZ3RoICovXG4gIHZhciBvZmZzID0gbmV3IHV0aWxzLkJ1ZjE2KE1BWEJJVFMgKyAxKTsgLy9bTUFYQklUUysxXTsgICAgIC8qIG9mZnNldHMgaW4gdGFibGUgZm9yIGVhY2ggbGVuZ3RoICovXG4gIHZhciBleHRyYSA9IG51bGw7XG4gIHZhciBleHRyYV9pbmRleCA9IDA7XG5cbiAgdmFyIGhlcmVfYml0cywgaGVyZV9vcCwgaGVyZV92YWw7XG5cbiAgLypcbiAgIFByb2Nlc3MgYSBzZXQgb2YgY29kZSBsZW5ndGhzIHRvIGNyZWF0ZSBhIGNhbm9uaWNhbCBIdWZmbWFuIGNvZGUuICBUaGVcbiAgIGNvZGUgbGVuZ3RocyBhcmUgbGVuc1swLi5jb2Rlcy0xXS4gIEVhY2ggbGVuZ3RoIGNvcnJlc3BvbmRzIHRvIHRoZVxuICAgc3ltYm9scyAwLi5jb2Rlcy0xLiAgVGhlIEh1ZmZtYW4gY29kZSBpcyBnZW5lcmF0ZWQgYnkgZmlyc3Qgc29ydGluZyB0aGVcbiAgIHN5bWJvbHMgYnkgbGVuZ3RoIGZyb20gc2hvcnQgdG8gbG9uZywgYW5kIHJldGFpbmluZyB0aGUgc3ltYm9sIG9yZGVyXG4gICBmb3IgY29kZXMgd2l0aCBlcXVhbCBsZW5ndGhzLiAgVGhlbiB0aGUgY29kZSBzdGFydHMgd2l0aCBhbGwgemVybyBiaXRzXG4gICBmb3IgdGhlIGZpcnN0IGNvZGUgb2YgdGhlIHNob3J0ZXN0IGxlbmd0aCwgYW5kIHRoZSBjb2RlcyBhcmUgaW50ZWdlclxuICAgaW5jcmVtZW50cyBmb3IgdGhlIHNhbWUgbGVuZ3RoLCBhbmQgemVyb3MgYXJlIGFwcGVuZGVkIGFzIHRoZSBsZW5ndGhcbiAgIGluY3JlYXNlcy4gIEZvciB0aGUgZGVmbGF0ZSBmb3JtYXQsIHRoZXNlIGJpdHMgYXJlIHN0b3JlZCBiYWNrd2FyZHNcbiAgIGZyb20gdGhlaXIgbW9yZSBuYXR1cmFsIGludGVnZXIgaW5jcmVtZW50IG9yZGVyaW5nLCBhbmQgc28gd2hlbiB0aGVcbiAgIGRlY29kaW5nIHRhYmxlcyBhcmUgYnVpbHQgaW4gdGhlIGxhcmdlIGxvb3AgYmVsb3csIHRoZSBpbnRlZ2VyIGNvZGVzXG4gICBhcmUgaW5jcmVtZW50ZWQgYmFja3dhcmRzLlxuXG4gICBUaGlzIHJvdXRpbmUgYXNzdW1lcywgYnV0IGRvZXMgbm90IGNoZWNrLCB0aGF0IGFsbCBvZiB0aGUgZW50cmllcyBpblxuICAgbGVuc1tdIGFyZSBpbiB0aGUgcmFuZ2UgMC4uTUFYQklUUy4gIFRoZSBjYWxsZXIgbXVzdCBhc3N1cmUgdGhpcy5cbiAgIDEuLk1BWEJJVFMgaXMgaW50ZXJwcmV0ZWQgYXMgdGhhdCBjb2RlIGxlbmd0aC4gIHplcm8gbWVhbnMgdGhhdCB0aGF0XG4gICBzeW1ib2wgZG9lcyBub3Qgb2NjdXIgaW4gdGhpcyBjb2RlLlxuXG4gICBUaGUgY29kZXMgYXJlIHNvcnRlZCBieSBjb21wdXRpbmcgYSBjb3VudCBvZiBjb2RlcyBmb3IgZWFjaCBsZW5ndGgsXG4gICBjcmVhdGluZyBmcm9tIHRoYXQgYSB0YWJsZSBvZiBzdGFydGluZyBpbmRpY2VzIGZvciBlYWNoIGxlbmd0aCBpbiB0aGVcbiAgIHNvcnRlZCB0YWJsZSwgYW5kIHRoZW4gZW50ZXJpbmcgdGhlIHN5bWJvbHMgaW4gb3JkZXIgaW4gdGhlIHNvcnRlZFxuICAgdGFibGUuICBUaGUgc29ydGVkIHRhYmxlIGlzIHdvcmtbXSwgd2l0aCB0aGF0IHNwYWNlIGJlaW5nIHByb3ZpZGVkIGJ5XG4gICB0aGUgY2FsbGVyLlxuXG4gICBUaGUgbGVuZ3RoIGNvdW50cyBhcmUgdXNlZCBmb3Igb3RoZXIgcHVycG9zZXMgYXMgd2VsbCwgaS5lLiBmaW5kaW5nXG4gICB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBsZW5ndGggY29kZXMsIGRldGVybWluaW5nIGlmIHRoZXJlIGFyZSBhbnlcbiAgIGNvZGVzIGF0IGFsbCwgY2hlY2tpbmcgZm9yIGEgdmFsaWQgc2V0IG9mIGxlbmd0aHMsIGFuZCBsb29raW5nIGFoZWFkXG4gICBhdCBsZW5ndGggY291bnRzIHRvIGRldGVybWluZSBzdWItdGFibGUgc2l6ZXMgd2hlbiBidWlsZGluZyB0aGVcbiAgIGRlY29kaW5nIHRhYmxlcy5cbiAgICovXG5cbiAgLyogYWNjdW11bGF0ZSBsZW5ndGhzIGZvciBjb2RlcyAoYXNzdW1lcyBsZW5zW10gYWxsIGluIDAuLk1BWEJJVFMpICovXG4gIGZvciAobGVuID0gMDsgbGVuIDw9IE1BWEJJVFM7IGxlbisrKSB7XG4gICAgY291bnRbbGVuXSA9IDA7XG4gIH1cbiAgZm9yIChzeW0gPSAwOyBzeW0gPCBjb2Rlczsgc3ltKyspIHtcbiAgICBjb3VudFtsZW5zW2xlbnNfaW5kZXggKyBzeW1dXSsrO1xuICB9XG5cbiAgLyogYm91bmQgY29kZSBsZW5ndGhzLCBmb3JjZSByb290IHRvIGJlIHdpdGhpbiBjb2RlIGxlbmd0aHMgKi9cbiAgcm9vdCA9IGJpdHM7XG4gIGZvciAobWF4ID0gTUFYQklUUzsgbWF4ID49IDE7IG1heC0tKSB7XG4gICAgaWYgKGNvdW50W21heF0gIT09IDApIHsgYnJlYWs7IH1cbiAgfVxuICBpZiAocm9vdCA+IG1heCkge1xuICAgIHJvb3QgPSBtYXg7XG4gIH1cbiAgaWYgKG1heCA9PT0gMCkgeyAgICAgICAgICAgICAgICAgICAgIC8qIG5vIHN5bWJvbHMgdG8gY29kZSBhdCBhbGwgKi9cbiAgICAvL3RhYmxlLm9wW29wdHMudGFibGVfaW5kZXhdID0gNjQ7ICAvL2hlcmUub3AgPSAodmFyIGNoYXIpNjQ7ICAgIC8qIGludmFsaWQgY29kZSBtYXJrZXIgKi9cbiAgICAvL3RhYmxlLmJpdHNbb3B0cy50YWJsZV9pbmRleF0gPSAxOyAgIC8vaGVyZS5iaXRzID0gKHZhciBjaGFyKTE7XG4gICAgLy90YWJsZS52YWxbb3B0cy50YWJsZV9pbmRleCsrXSA9IDA7ICAgLy9oZXJlLnZhbCA9ICh2YXIgc2hvcnQpMDtcbiAgICB0YWJsZVt0YWJsZV9pbmRleCsrXSA9ICgxIDw8IDI0KSB8ICg2NCA8PCAxNikgfCAwO1xuXG5cbiAgICAvL3RhYmxlLm9wW29wdHMudGFibGVfaW5kZXhdID0gNjQ7XG4gICAgLy90YWJsZS5iaXRzW29wdHMudGFibGVfaW5kZXhdID0gMTtcbiAgICAvL3RhYmxlLnZhbFtvcHRzLnRhYmxlX2luZGV4KytdID0gMDtcbiAgICB0YWJsZVt0YWJsZV9pbmRleCsrXSA9ICgxIDw8IDI0KSB8ICg2NCA8PCAxNikgfCAwO1xuXG4gICAgb3B0cy5iaXRzID0gMTtcbiAgICByZXR1cm4gMDsgICAgIC8qIG5vIHN5bWJvbHMsIGJ1dCB3YWl0IGZvciBkZWNvZGluZyB0byByZXBvcnQgZXJyb3IgKi9cbiAgfVxuICBmb3IgKG1pbiA9IDE7IG1pbiA8IG1heDsgbWluKyspIHtcbiAgICBpZiAoY291bnRbbWluXSAhPT0gMCkgeyBicmVhazsgfVxuICB9XG4gIGlmIChyb290IDwgbWluKSB7XG4gICAgcm9vdCA9IG1pbjtcbiAgfVxuXG4gIC8qIGNoZWNrIGZvciBhbiBvdmVyLXN1YnNjcmliZWQgb3IgaW5jb21wbGV0ZSBzZXQgb2YgbGVuZ3RocyAqL1xuICBsZWZ0ID0gMTtcbiAgZm9yIChsZW4gPSAxOyBsZW4gPD0gTUFYQklUUzsgbGVuKyspIHtcbiAgICBsZWZ0IDw8PSAxO1xuICAgIGxlZnQgLT0gY291bnRbbGVuXTtcbiAgICBpZiAobGVmdCA8IDApIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9ICAgICAgICAvKiBvdmVyLXN1YnNjcmliZWQgKi9cbiAgfVxuICBpZiAobGVmdCA+IDAgJiYgKHR5cGUgPT09IENPREVTIHx8IG1heCAhPT0gMSkpIHtcbiAgICByZXR1cm4gLTE7ICAgICAgICAgICAgICAgICAgICAgIC8qIGluY29tcGxldGUgc2V0ICovXG4gIH1cblxuICAvKiBnZW5lcmF0ZSBvZmZzZXRzIGludG8gc3ltYm9sIHRhYmxlIGZvciBlYWNoIGxlbmd0aCBmb3Igc29ydGluZyAqL1xuICBvZmZzWzFdID0gMDtcbiAgZm9yIChsZW4gPSAxOyBsZW4gPCBNQVhCSVRTOyBsZW4rKykge1xuICAgIG9mZnNbbGVuICsgMV0gPSBvZmZzW2xlbl0gKyBjb3VudFtsZW5dO1xuICB9XG5cbiAgLyogc29ydCBzeW1ib2xzIGJ5IGxlbmd0aCwgYnkgc3ltYm9sIG9yZGVyIHdpdGhpbiBlYWNoIGxlbmd0aCAqL1xuICBmb3IgKHN5bSA9IDA7IHN5bSA8IGNvZGVzOyBzeW0rKykge1xuICAgIGlmIChsZW5zW2xlbnNfaW5kZXggKyBzeW1dICE9PSAwKSB7XG4gICAgICB3b3JrW29mZnNbbGVuc1tsZW5zX2luZGV4ICsgc3ltXV0rK10gPSBzeW07XG4gICAgfVxuICB9XG5cbiAgLypcbiAgIENyZWF0ZSBhbmQgZmlsbCBpbiBkZWNvZGluZyB0YWJsZXMuICBJbiB0aGlzIGxvb3AsIHRoZSB0YWJsZSBiZWluZ1xuICAgZmlsbGVkIGlzIGF0IG5leHQgYW5kIGhhcyBjdXJyIGluZGV4IGJpdHMuICBUaGUgY29kZSBiZWluZyB1c2VkIGlzIGh1ZmZcbiAgIHdpdGggbGVuZ3RoIGxlbi4gIFRoYXQgY29kZSBpcyBjb252ZXJ0ZWQgdG8gYW4gaW5kZXggYnkgZHJvcHBpbmcgZHJvcFxuICAgYml0cyBvZmYgb2YgdGhlIGJvdHRvbS4gIEZvciBjb2RlcyB3aGVyZSBsZW4gaXMgbGVzcyB0aGFuIGRyb3AgKyBjdXJyLFxuICAgdGhvc2UgdG9wIGRyb3AgKyBjdXJyIC0gbGVuIGJpdHMgYXJlIGluY3JlbWVudGVkIHRocm91Z2ggYWxsIHZhbHVlcyB0b1xuICAgZmlsbCB0aGUgdGFibGUgd2l0aCByZXBsaWNhdGVkIGVudHJpZXMuXG5cbiAgIHJvb3QgaXMgdGhlIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciB0aGUgcm9vdCB0YWJsZS4gIFdoZW4gbGVuIGV4Y2VlZHNcbiAgIHJvb3QsIHN1Yi10YWJsZXMgYXJlIGNyZWF0ZWQgcG9pbnRlZCB0byBieSB0aGUgcm9vdCBlbnRyeSB3aXRoIGFuIGluZGV4XG4gICBvZiB0aGUgbG93IHJvb3QgYml0cyBvZiBodWZmLiAgVGhpcyBpcyBzYXZlZCBpbiBsb3cgdG8gY2hlY2sgZm9yIHdoZW4gYVxuICAgbmV3IHN1Yi10YWJsZSBzaG91bGQgYmUgc3RhcnRlZC4gIGRyb3AgaXMgemVybyB3aGVuIHRoZSByb290IHRhYmxlIGlzXG4gICBiZWluZyBmaWxsZWQsIGFuZCBkcm9wIGlzIHJvb3Qgd2hlbiBzdWItdGFibGVzIGFyZSBiZWluZyBmaWxsZWQuXG5cbiAgIFdoZW4gYSBuZXcgc3ViLXRhYmxlIGlzIG5lZWRlZCwgaXQgaXMgbmVjZXNzYXJ5IHRvIGxvb2sgYWhlYWQgaW4gdGhlXG4gICBjb2RlIGxlbmd0aHMgdG8gZGV0ZXJtaW5lIHdoYXQgc2l6ZSBzdWItdGFibGUgaXMgbmVlZGVkLiAgVGhlIGxlbmd0aFxuICAgY291bnRzIGFyZSB1c2VkIGZvciB0aGlzLCBhbmQgc28gY291bnRbXSBpcyBkZWNyZW1lbnRlZCBhcyBjb2RlcyBhcmVcbiAgIGVudGVyZWQgaW4gdGhlIHRhYmxlcy5cblxuICAgdXNlZCBrZWVwcyB0cmFjayBvZiBob3cgbWFueSB0YWJsZSBlbnRyaWVzIGhhdmUgYmVlbiBhbGxvY2F0ZWQgZnJvbSB0aGVcbiAgIHByb3ZpZGVkICp0YWJsZSBzcGFjZS4gIEl0IGlzIGNoZWNrZWQgZm9yIExFTlMgYW5kIERJU1QgdGFibGVzIGFnYWluc3RcbiAgIHRoZSBjb25zdGFudHMgRU5PVUdIX0xFTlMgYW5kIEVOT1VHSF9ESVNUUyB0byBndWFyZCBhZ2FpbnN0IGNoYW5nZXMgaW5cbiAgIHRoZSBpbml0aWFsIHJvb3QgdGFibGUgc2l6ZSBjb25zdGFudHMuICBTZWUgdGhlIGNvbW1lbnRzIGluIGluZnRyZWVzLmhcbiAgIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICBzeW0gaW5jcmVtZW50cyB0aHJvdWdoIGFsbCBzeW1ib2xzLCBhbmQgdGhlIGxvb3AgdGVybWluYXRlcyB3aGVuXG4gICBhbGwgY29kZXMgb2YgbGVuZ3RoIG1heCwgaS5lLiBhbGwgY29kZXMsIGhhdmUgYmVlbiBwcm9jZXNzZWQuICBUaGlzXG4gICByb3V0aW5lIHBlcm1pdHMgaW5jb21wbGV0ZSBjb2Rlcywgc28gYW5vdGhlciBsb29wIGFmdGVyIHRoaXMgb25lIGZpbGxzXG4gICBpbiB0aGUgcmVzdCBvZiB0aGUgZGVjb2RpbmcgdGFibGVzIHdpdGggaW52YWxpZCBjb2RlIG1hcmtlcnMuXG4gICAqL1xuXG4gIC8qIHNldCB1cCBmb3IgY29kZSB0eXBlICovXG4gIC8vIHBvb3IgbWFuIG9wdGltaXphdGlvbiAtIHVzZSBpZi1lbHNlIGluc3RlYWQgb2Ygc3dpdGNoLFxuICAvLyB0byBhdm9pZCBkZW9wdHMgaW4gb2xkIHY4XG4gIGlmICh0eXBlID09PSBDT0RFUykge1xuICAgIGJhc2UgPSBleHRyYSA9IHdvcms7ICAgIC8qIGR1bW15IHZhbHVlLS1ub3QgdXNlZCAqL1xuICAgIGVuZCA9IDE5O1xuXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gTEVOUykge1xuICAgIGJhc2UgPSBsYmFzZTtcbiAgICBiYXNlX2luZGV4IC09IDI1NztcbiAgICBleHRyYSA9IGxleHQ7XG4gICAgZXh0cmFfaW5kZXggLT0gMjU3O1xuICAgIGVuZCA9IDI1NjtcblxuICB9IGVsc2UgeyAgICAgICAgICAgICAgICAgICAgLyogRElTVFMgKi9cbiAgICBiYXNlID0gZGJhc2U7XG4gICAgZXh0cmEgPSBkZXh0O1xuICAgIGVuZCA9IC0xO1xuICB9XG5cbiAgLyogaW5pdGlhbGl6ZSBvcHRzIGZvciBsb29wICovXG4gIGh1ZmYgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBzdGFydGluZyBjb2RlICovXG4gIHN5bSA9IDA7ICAgICAgICAgICAgICAgICAgICAvKiBzdGFydGluZyBjb2RlIHN5bWJvbCAqL1xuICBsZW4gPSBtaW47ICAgICAgICAgICAgICAgICAgLyogc3RhcnRpbmcgY29kZSBsZW5ndGggKi9cbiAgbmV4dCA9IHRhYmxlX2luZGV4OyAgICAgICAgICAgICAgLyogY3VycmVudCB0YWJsZSB0byBmaWxsIGluICovXG4gIGN1cnIgPSByb290OyAgICAgICAgICAgICAgICAvKiBjdXJyZW50IHRhYmxlIGluZGV4IGJpdHMgKi9cbiAgZHJvcCA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIGN1cnJlbnQgYml0cyB0byBkcm9wIGZyb20gY29kZSBmb3IgaW5kZXggKi9cbiAgbG93ID0gLTE7ICAgICAgICAgICAgICAgICAgIC8qIHRyaWdnZXIgbmV3IHN1Yi10YWJsZSB3aGVuIGxlbiA+IHJvb3QgKi9cbiAgdXNlZCA9IDEgPDwgcm9vdDsgICAgICAgICAgLyogdXNlIHJvb3QgdGFibGUgZW50cmllcyAqL1xuICBtYXNrID0gdXNlZCAtIDE7ICAgICAgICAgICAgLyogbWFzayBmb3IgY29tcGFyaW5nIGxvdyAqL1xuXG4gIC8qIGNoZWNrIGF2YWlsYWJsZSB0YWJsZSBzcGFjZSAqL1xuICBpZiAoKHR5cGUgPT09IExFTlMgJiYgdXNlZCA+IEVOT1VHSF9MRU5TKSB8fFxuICAgICh0eXBlID09PSBESVNUUyAmJiB1c2VkID4gRU5PVUdIX0RJU1RTKSkge1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgdmFyIGkgPSAwO1xuICAvKiBwcm9jZXNzIGFsbCBjb2RlcyBhbmQgbWFrZSB0YWJsZSBlbnRyaWVzICovXG4gIGZvciAoOzspIHtcbiAgICBpKys7XG4gICAgLyogY3JlYXRlIHRhYmxlIGVudHJ5ICovXG4gICAgaGVyZV9iaXRzID0gbGVuIC0gZHJvcDtcbiAgICBpZiAod29ya1tzeW1dIDwgZW5kKSB7XG4gICAgICBoZXJlX29wID0gMDtcbiAgICAgIGhlcmVfdmFsID0gd29ya1tzeW1dO1xuICAgIH1cbiAgICBlbHNlIGlmICh3b3JrW3N5bV0gPiBlbmQpIHtcbiAgICAgIGhlcmVfb3AgPSBleHRyYVtleHRyYV9pbmRleCArIHdvcmtbc3ltXV07XG4gICAgICBoZXJlX3ZhbCA9IGJhc2VbYmFzZV9pbmRleCArIHdvcmtbc3ltXV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaGVyZV9vcCA9IDMyICsgNjQ7ICAgICAgICAgLyogZW5kIG9mIGJsb2NrICovXG4gICAgICBoZXJlX3ZhbCA9IDA7XG4gICAgfVxuXG4gICAgLyogcmVwbGljYXRlIGZvciB0aG9zZSBpbmRpY2VzIHdpdGggbG93IGxlbiBiaXRzIGVxdWFsIHRvIGh1ZmYgKi9cbiAgICBpbmNyID0gMSA8PCAobGVuIC0gZHJvcCk7XG4gICAgZmlsbCA9IDEgPDwgY3VycjtcbiAgICBtaW4gPSBmaWxsOyAgICAgICAgICAgICAgICAgLyogc2F2ZSBvZmZzZXQgdG8gbmV4dCB0YWJsZSAqL1xuICAgIGRvIHtcbiAgICAgIGZpbGwgLT0gaW5jcjtcbiAgICAgIHRhYmxlW25leHQgKyAoaHVmZiA+PiBkcm9wKSArIGZpbGxdID0gKGhlcmVfYml0cyA8PCAyNCkgfCAoaGVyZV9vcCA8PCAxNikgfCBoZXJlX3ZhbCB8MDtcbiAgICB9IHdoaWxlIChmaWxsICE9PSAwKTtcblxuICAgIC8qIGJhY2t3YXJkcyBpbmNyZW1lbnQgdGhlIGxlbi1iaXQgY29kZSBodWZmICovXG4gICAgaW5jciA9IDEgPDwgKGxlbiAtIDEpO1xuICAgIHdoaWxlIChodWZmICYgaW5jcikge1xuICAgICAgaW5jciA+Pj0gMTtcbiAgICB9XG4gICAgaWYgKGluY3IgIT09IDApIHtcbiAgICAgIGh1ZmYgJj0gaW5jciAtIDE7XG4gICAgICBodWZmICs9IGluY3I7XG4gICAgfSBlbHNlIHtcbiAgICAgIGh1ZmYgPSAwO1xuICAgIH1cblxuICAgIC8qIGdvIHRvIG5leHQgc3ltYm9sLCB1cGRhdGUgY291bnQsIGxlbiAqL1xuICAgIHN5bSsrO1xuICAgIGlmICgtLWNvdW50W2xlbl0gPT09IDApIHtcbiAgICAgIGlmIChsZW4gPT09IG1heCkgeyBicmVhazsgfVxuICAgICAgbGVuID0gbGVuc1tsZW5zX2luZGV4ICsgd29ya1tzeW1dXTtcbiAgICB9XG5cbiAgICAvKiBjcmVhdGUgbmV3IHN1Yi10YWJsZSBpZiBuZWVkZWQgKi9cbiAgICBpZiAobGVuID4gcm9vdCAmJiAoaHVmZiAmIG1hc2spICE9PSBsb3cpIHtcbiAgICAgIC8qIGlmIGZpcnN0IHRpbWUsIHRyYW5zaXRpb24gdG8gc3ViLXRhYmxlcyAqL1xuICAgICAgaWYgKGRyb3AgPT09IDApIHtcbiAgICAgICAgZHJvcCA9IHJvb3Q7XG4gICAgICB9XG5cbiAgICAgIC8qIGluY3JlbWVudCBwYXN0IGxhc3QgdGFibGUgKi9cbiAgICAgIG5leHQgKz0gbWluOyAgICAgICAgICAgIC8qIGhlcmUgbWluIGlzIDEgPDwgY3VyciAqL1xuXG4gICAgICAvKiBkZXRlcm1pbmUgbGVuZ3RoIG9mIG5leHQgdGFibGUgKi9cbiAgICAgIGN1cnIgPSBsZW4gLSBkcm9wO1xuICAgICAgbGVmdCA9IDEgPDwgY3VycjtcbiAgICAgIHdoaWxlIChjdXJyICsgZHJvcCA8IG1heCkge1xuICAgICAgICBsZWZ0IC09IGNvdW50W2N1cnIgKyBkcm9wXTtcbiAgICAgICAgaWYgKGxlZnQgPD0gMCkgeyBicmVhazsgfVxuICAgICAgICBjdXJyKys7XG4gICAgICAgIGxlZnQgPDw9IDE7XG4gICAgICB9XG5cbiAgICAgIC8qIGNoZWNrIGZvciBlbm91Z2ggc3BhY2UgKi9cbiAgICAgIHVzZWQgKz0gMSA8PCBjdXJyO1xuICAgICAgaWYgKCh0eXBlID09PSBMRU5TICYmIHVzZWQgPiBFTk9VR0hfTEVOUykgfHxcbiAgICAgICAgKHR5cGUgPT09IERJU1RTICYmIHVzZWQgPiBFTk9VR0hfRElTVFMpKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuXG4gICAgICAvKiBwb2ludCBlbnRyeSBpbiByb290IHRhYmxlIHRvIHN1Yi10YWJsZSAqL1xuICAgICAgbG93ID0gaHVmZiAmIG1hc2s7XG4gICAgICAvKnRhYmxlLm9wW2xvd10gPSBjdXJyO1xuICAgICAgdGFibGUuYml0c1tsb3ddID0gcm9vdDtcbiAgICAgIHRhYmxlLnZhbFtsb3ddID0gbmV4dCAtIG9wdHMudGFibGVfaW5kZXg7Ki9cbiAgICAgIHRhYmxlW2xvd10gPSAocm9vdCA8PCAyNCkgfCAoY3VyciA8PCAxNikgfCAobmV4dCAtIHRhYmxlX2luZGV4KSB8MDtcbiAgICB9XG4gIH1cblxuICAvKiBmaWxsIGluIHJlbWFpbmluZyB0YWJsZSBlbnRyeSBpZiBjb2RlIGlzIGluY29tcGxldGUgKGd1YXJhbnRlZWQgdG8gaGF2ZVxuICAgYXQgbW9zdCBvbmUgcmVtYWluaW5nIGVudHJ5LCBzaW5jZSBpZiB0aGUgY29kZSBpcyBpbmNvbXBsZXRlLCB0aGVcbiAgIG1heGltdW0gY29kZSBsZW5ndGggdGhhdCB3YXMgYWxsb3dlZCB0byBnZXQgdGhpcyBmYXIgaXMgb25lIGJpdCkgKi9cbiAgaWYgKGh1ZmYgIT09IDApIHtcbiAgICAvL3RhYmxlLm9wW25leHQgKyBodWZmXSA9IDY0OyAgICAgICAgICAgIC8qIGludmFsaWQgY29kZSBtYXJrZXIgKi9cbiAgICAvL3RhYmxlLmJpdHNbbmV4dCArIGh1ZmZdID0gbGVuIC0gZHJvcDtcbiAgICAvL3RhYmxlLnZhbFtuZXh0ICsgaHVmZl0gPSAwO1xuICAgIHRhYmxlW25leHQgKyBodWZmXSA9ICgobGVuIC0gZHJvcCkgPDwgMjQpIHwgKDY0IDw8IDE2KSB8MDtcbiAgfVxuXG4gIC8qIHNldCByZXR1cm4gcGFyYW1ldGVycyAqL1xuICAvL29wdHMudGFibGVfaW5kZXggKz0gdXNlZDtcbiAgb3B0cy5iaXRzID0gcm9vdDtcbiAgcmV0dXJuIDA7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgMjogICAgICAnbmVlZCBkaWN0aW9uYXJ5JywgICAgIC8qIFpfTkVFRF9ESUNUICAgICAgIDIgICovXG4gIDE6ICAgICAgJ3N0cmVhbSBlbmQnLCAgICAgICAgICAvKiBaX1NUUkVBTV9FTkQgICAgICAxICAqL1xuICAwOiAgICAgICcnLCAgICAgICAgICAgICAgICAgICAgLyogWl9PSyAgICAgICAgICAgICAgMCAgKi9cbiAgJy0xJzogICAnZmlsZSBlcnJvcicsICAgICAgICAgIC8qIFpfRVJSTk8gICAgICAgICAoLTEpICovXG4gICctMic6ICAgJ3N0cmVhbSBlcnJvcicsICAgICAgICAvKiBaX1NUUkVBTV9FUlJPUiAgKC0yKSAqL1xuICAnLTMnOiAgICdkYXRhIGVycm9yJywgICAgICAgICAgLyogWl9EQVRBX0VSUk9SICAgICgtMykgKi9cbiAgJy00JzogICAnaW5zdWZmaWNpZW50IG1lbW9yeScsIC8qIFpfTUVNX0VSUk9SICAgICAoLTQpICovXG4gICctNSc6ICAgJ2J1ZmZlciBlcnJvcicsICAgICAgICAvKiBaX0JVRl9FUlJPUiAgICAgKC01KSAqL1xuICAnLTYnOiAgICdpbmNvbXBhdGlibGUgdmVyc2lvbicgLyogWl9WRVJTSU9OX0VSUk9SICgtNikgKi9cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cblxuZnVuY3Rpb24gWlN0cmVhbSgpIHtcbiAgLyogbmV4dCBpbnB1dCBieXRlICovXG4gIHRoaXMuaW5wdXQgPSBudWxsOyAvLyBKUyBzcGVjaWZpYywgYmVjYXVzZSB3ZSBoYXZlIG5vIHBvaW50ZXJzXG4gIHRoaXMubmV4dF9pbiA9IDA7XG4gIC8qIG51bWJlciBvZiBieXRlcyBhdmFpbGFibGUgYXQgaW5wdXQgKi9cbiAgdGhpcy5hdmFpbF9pbiA9IDA7XG4gIC8qIHRvdGFsIG51bWJlciBvZiBpbnB1dCBieXRlcyByZWFkIHNvIGZhciAqL1xuICB0aGlzLnRvdGFsX2luID0gMDtcbiAgLyogbmV4dCBvdXRwdXQgYnl0ZSBzaG91bGQgYmUgcHV0IHRoZXJlICovXG4gIHRoaXMub3V0cHV0ID0gbnVsbDsgLy8gSlMgc3BlY2lmaWMsIGJlY2F1c2Ugd2UgaGF2ZSBubyBwb2ludGVyc1xuICB0aGlzLm5leHRfb3V0ID0gMDtcbiAgLyogcmVtYWluaW5nIGZyZWUgc3BhY2UgYXQgb3V0cHV0ICovXG4gIHRoaXMuYXZhaWxfb3V0ID0gMDtcbiAgLyogdG90YWwgbnVtYmVyIG9mIGJ5dGVzIG91dHB1dCBzbyBmYXIgKi9cbiAgdGhpcy50b3RhbF9vdXQgPSAwO1xuICAvKiBsYXN0IGVycm9yIG1lc3NhZ2UsIE5VTEwgaWYgbm8gZXJyb3IgKi9cbiAgdGhpcy5tc2cgPSAnJy8qWl9OVUxMKi87XG4gIC8qIG5vdCB2aXNpYmxlIGJ5IGFwcGxpY2F0aW9ucyAqL1xuICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgLyogYmVzdCBndWVzcyBhYm91dCB0aGUgZGF0YSB0eXBlOiBiaW5hcnkgb3IgdGV4dCAqL1xuICB0aGlzLmRhdGFfdHlwZSA9IDIvKlpfVU5LTk9XTiovO1xuICAvKiBhZGxlcjMyIHZhbHVlIG9mIHRoZSB1bmNvbXByZXNzZWQgZGF0YSAqL1xuICB0aGlzLmFkbGVyID0gMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBaU3RyZWFtO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIi8vIHZpbTp0cz00OnN0cz00OnN3PTQ6XG4vKiFcbiAqXG4gKiBDb3B5cmlnaHQgMjAwOS0yMDEyIEtyaXMgS293YWwgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBNSVRcbiAqIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3EvcmF3L21hc3Rlci9MSUNFTlNFXG4gKlxuICogV2l0aCBwYXJ0cyBieSBUeWxlciBDbG9zZVxuICogQ29weXJpZ2h0IDIwMDctMjAwOSBUeWxlciBDbG9zZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIE1JVCBYIGxpY2Vuc2UgZm91bmRcbiAqIGF0IGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UuaHRtbFxuICogRm9ya2VkIGF0IHJlZl9zZW5kLmpzIHZlcnNpb246IDIwMDktMDUtMTFcbiAqXG4gKiBXaXRoIHBhcnRzIGJ5IE1hcmsgTWlsbGVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTEgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKi9cblxuKGZ1bmN0aW9uIChkZWZpbml0aW9uKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvLyBUaGlzIGZpbGUgd2lsbCBmdW5jdGlvbiBwcm9wZXJseSBhcyBhIDxzY3JpcHQ+IHRhZywgb3IgYSBtb2R1bGVcbiAgICAvLyB1c2luZyBDb21tb25KUyBhbmQgTm9kZUpTIG9yIFJlcXVpcmVKUyBtb2R1bGUgZm9ybWF0cy4gIEluXG4gICAgLy8gQ29tbW9uL05vZGUvUmVxdWlyZUpTLCB0aGUgbW9kdWxlIGV4cG9ydHMgdGhlIFEgQVBJIGFuZCB3aGVuXG4gICAgLy8gZXhlY3V0ZWQgYXMgYSBzaW1wbGUgPHNjcmlwdD4sIGl0IGNyZWF0ZXMgYSBRIGdsb2JhbCBpbnN0ZWFkLlxuXG4gICAgLy8gTW9udGFnZSBSZXF1aXJlXG4gICAgaWYgKHR5cGVvZiBib290c3RyYXAgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBib290c3RyYXAoXCJwcm9taXNlXCIsIGRlZmluaXRpb24pO1xuXG4gICAgLy8gQ29tbW9uSlNcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBkZWZpbml0aW9uKCk7XG5cbiAgICAvLyBSZXF1aXJlSlNcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShkZWZpbml0aW9uKTtcblxuICAgIC8vIFNFUyAoU2VjdXJlIEVjbWFTY3JpcHQpXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmICghc2VzLm9rKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlcy5tYWtlUSA9IGRlZmluaXRpb247XG4gICAgICAgIH1cblxuICAgIC8vIDxzY3JpcHQ+XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIC8vIFByZWZlciB3aW5kb3cgb3ZlciBzZWxmIGZvciBhZGQtb24gc2NyaXB0cy4gVXNlIHNlbGYgZm9yXG4gICAgICAgIC8vIG5vbi13aW5kb3dlZCBjb250ZXh0cy5cbiAgICAgICAgdmFyIGdsb2JhbCA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiBzZWxmO1xuXG4gICAgICAgIC8vIEdldCB0aGUgYHdpbmRvd2Agb2JqZWN0LCBzYXZlIHRoZSBwcmV2aW91cyBRIGdsb2JhbFxuICAgICAgICAvLyBhbmQgaW5pdGlhbGl6ZSBRIGFzIGEgZ2xvYmFsLlxuICAgICAgICB2YXIgcHJldmlvdXNRID0gZ2xvYmFsLlE7XG4gICAgICAgIGdsb2JhbC5RID0gZGVmaW5pdGlvbigpO1xuXG4gICAgICAgIC8vIEFkZCBhIG5vQ29uZmxpY3QgZnVuY3Rpb24gc28gUSBjYW4gYmUgcmVtb3ZlZCBmcm9tIHRoZVxuICAgICAgICAvLyBnbG9iYWwgbmFtZXNwYWNlLlxuICAgICAgICBnbG9iYWwuUS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZ2xvYmFsLlEgPSBwcmV2aW91c1E7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgZW52aXJvbm1lbnQgd2FzIG5vdCBhbnRpY2lwYXRlZCBieSBRLiBQbGVhc2UgZmlsZSBhIGJ1Zy5cIik7XG4gICAgfVxuXG59KShmdW5jdGlvbiAoKSB7XG5cInVzZSBzdHJpY3RcIjtcblxudmFyIGhhc1N0YWNrcyA9IGZhbHNlO1xudHJ5IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbn0gY2F0Y2ggKGUpIHtcbiAgICBoYXNTdGFja3MgPSAhIWUuc3RhY2s7XG59XG5cbi8vIEFsbCBjb2RlIGFmdGVyIHRoaXMgcG9pbnQgd2lsbCBiZSBmaWx0ZXJlZCBmcm9tIHN0YWNrIHRyYWNlcyByZXBvcnRlZFxuLy8gYnkgUS5cbnZhciBxU3RhcnRpbmdMaW5lID0gY2FwdHVyZUxpbmUoKTtcbnZhciBxRmlsZU5hbWU7XG5cbi8vIHNoaW1zXG5cbi8vIHVzZWQgZm9yIGZhbGxiYWNrIGluIFwiYWxsUmVzb2x2ZWRcIlxudmFyIG5vb3AgPSBmdW5jdGlvbiAoKSB7fTtcblxuLy8gVXNlIHRoZSBmYXN0ZXN0IHBvc3NpYmxlIG1lYW5zIHRvIGV4ZWN1dGUgYSB0YXNrIGluIGEgZnV0dXJlIHR1cm5cbi8vIG9mIHRoZSBldmVudCBsb29wLlxudmFyIG5leHRUaWNrID0oZnVuY3Rpb24gKCkge1xuICAgIC8vIGxpbmtlZCBsaXN0IG9mIHRhc2tzIChzaW5nbGUsIHdpdGggaGVhZCBub2RlKVxuICAgIHZhciBoZWFkID0ge3Rhc2s6IHZvaWQgMCwgbmV4dDogbnVsbH07XG4gICAgdmFyIHRhaWwgPSBoZWFkO1xuICAgIHZhciBmbHVzaGluZyA9IGZhbHNlO1xuICAgIHZhciByZXF1ZXN0VGljayA9IHZvaWQgMDtcbiAgICB2YXIgaXNOb2RlSlMgPSBmYWxzZTtcbiAgICAvLyBxdWV1ZSBmb3IgbGF0ZSB0YXNrcywgdXNlZCBieSB1bmhhbmRsZWQgcmVqZWN0aW9uIHRyYWNraW5nXG4gICAgdmFyIGxhdGVyUXVldWUgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgICAgICAvKiBqc2hpbnQgbG9vcGZ1bmM6IHRydWUgKi9cbiAgICAgICAgdmFyIHRhc2ssIGRvbWFpbjtcblxuICAgICAgICB3aGlsZSAoaGVhZC5uZXh0KSB7XG4gICAgICAgICAgICBoZWFkID0gaGVhZC5uZXh0O1xuICAgICAgICAgICAgdGFzayA9IGhlYWQudGFzaztcbiAgICAgICAgICAgIGhlYWQudGFzayA9IHZvaWQgMDtcbiAgICAgICAgICAgIGRvbWFpbiA9IGhlYWQuZG9tYWluO1xuXG4gICAgICAgICAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgICAgICAgICAgaGVhZC5kb21haW4gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgZG9tYWluLmVudGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBydW5TaW5nbGUodGFzaywgZG9tYWluKTtcblxuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChsYXRlclF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgdGFzayA9IGxhdGVyUXVldWUucG9wKCk7XG4gICAgICAgICAgICBydW5TaW5nbGUodGFzayk7XG4gICAgICAgIH1cbiAgICAgICAgZmx1c2hpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgLy8gcnVucyBhIHNpbmdsZSBmdW5jdGlvbiBpbiB0aGUgYXN5bmMgcXVldWVcbiAgICBmdW5jdGlvbiBydW5TaW5nbGUodGFzaywgZG9tYWluKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0YXNrKCk7XG5cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGlzTm9kZUpTKSB7XG4gICAgICAgICAgICAgICAgLy8gSW4gbm9kZSwgdW5jYXVnaHQgZXhjZXB0aW9ucyBhcmUgY29uc2lkZXJlZCBmYXRhbCBlcnJvcnMuXG4gICAgICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlbSBzeW5jaHJvbm91c2x5IHRvIGludGVycnVwdCBmbHVzaGluZyFcblxuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBjb250aW51YXRpb24gaWYgdGhlIHVuY2F1Z2h0IGV4Y2VwdGlvbiBpcyBzdXBwcmVzc2VkXG4gICAgICAgICAgICAgICAgLy8gbGlzdGVuaW5nIFwidW5jYXVnaHRFeGNlcHRpb25cIiBldmVudHMgKGFzIGRvbWFpbnMgZG9lcykuXG4gICAgICAgICAgICAgICAgLy8gQ29udGludWUgaW4gbmV4dCBldmVudCB0byBhdm9pZCB0aWNrIHJlY3Vyc2lvbi5cbiAgICAgICAgICAgICAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbWFpbi5leGl0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZmx1c2gsIDApO1xuICAgICAgICAgICAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluLmVudGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBicm93c2VycywgdW5jYXVnaHQgZXhjZXB0aW9ucyBhcmUgbm90IGZhdGFsLlxuICAgICAgICAgICAgICAgIC8vIFJlLXRocm93IHRoZW0gYXN5bmNocm9ub3VzbHkgdG8gYXZvaWQgc2xvdy1kb3ducy5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgICAgIGRvbWFpbi5leGl0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZXh0VGljayA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgIHRhaWwgPSB0YWlsLm5leHQgPSB7XG4gICAgICAgICAgICB0YXNrOiB0YXNrLFxuICAgICAgICAgICAgZG9tYWluOiBpc05vZGVKUyAmJiBwcm9jZXNzLmRvbWFpbixcbiAgICAgICAgICAgIG5leHQ6IG51bGxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoIWZsdXNoaW5nKSB7XG4gICAgICAgICAgICBmbHVzaGluZyA9IHRydWU7XG4gICAgICAgICAgICByZXF1ZXN0VGljaygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBwcm9jZXNzLnRvU3RyaW5nKCkgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiICYmIHByb2Nlc3MubmV4dFRpY2spIHtcbiAgICAgICAgLy8gRW5zdXJlIFEgaXMgaW4gYSByZWFsIE5vZGUgZW52aXJvbm1lbnQsIHdpdGggYSBgcHJvY2Vzcy5uZXh0VGlja2AuXG4gICAgICAgIC8vIFRvIHNlZSB0aHJvdWdoIGZha2UgTm9kZSBlbnZpcm9ubWVudHM6XG4gICAgICAgIC8vICogTW9jaGEgdGVzdCBydW5uZXIgLSBleHBvc2VzIGEgYHByb2Nlc3NgIGdsb2JhbCB3aXRob3V0IGEgYG5leHRUaWNrYFxuICAgICAgICAvLyAqIEJyb3dzZXJpZnkgLSBleHBvc2VzIGEgYHByb2Nlc3MubmV4VGlja2AgZnVuY3Rpb24gdGhhdCB1c2VzXG4gICAgICAgIC8vICAgYHNldFRpbWVvdXRgLiBJbiB0aGlzIGNhc2UgYHNldEltbWVkaWF0ZWAgaXMgcHJlZmVycmVkIGJlY2F1c2VcbiAgICAgICAgLy8gICAgaXQgaXMgZmFzdGVyLiBCcm93c2VyaWZ5J3MgYHByb2Nlc3MudG9TdHJpbmcoKWAgeWllbGRzXG4gICAgICAgIC8vICAgXCJbb2JqZWN0IE9iamVjdF1cIiwgd2hpbGUgaW4gYSByZWFsIE5vZGUgZW52aXJvbm1lbnRcbiAgICAgICAgLy8gICBgcHJvY2Vzcy5uZXh0VGljaygpYCB5aWVsZHMgXCJbb2JqZWN0IHByb2Nlc3NdXCIuXG4gICAgICAgIGlzTm9kZUpTID0gdHJ1ZTtcblxuICAgICAgICByZXF1ZXN0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpO1xuICAgICAgICB9O1xuXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgLy8gSW4gSUUxMCwgTm9kZS5qcyAwLjkrLCBvciBodHRwczovL2dpdGh1Yi5jb20vTm9ibGVKUy9zZXRJbW1lZGlhdGVcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHJlcXVlc3RUaWNrID0gc2V0SW1tZWRpYXRlLmJpbmQod2luZG93LCBmbHVzaCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXF1ZXN0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZXRJbW1lZGlhdGUoZmx1c2gpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgLy8gbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIC8vIGh0dHA6Ly93d3cubm9uYmxvY2tpbmcuaW8vMjAxMS8wNi93aW5kb3duZXh0dGljay5odG1sXG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIC8vIEF0IGxlYXN0IFNhZmFyaSBWZXJzaW9uIDYuMC41ICg4NTM2LjMwLjEpIGludGVybWl0dGVudGx5IGNhbm5vdCBjcmVhdGVcbiAgICAgICAgLy8gd29ya2luZyBtZXNzYWdlIHBvcnRzIHRoZSBmaXJzdCB0aW1lIGEgcGFnZSBsb2Fkcy5cbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXF1ZXN0VGljayA9IHJlcXVlc3RQb3J0VGljaztcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2g7XG4gICAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgcmVxdWVzdFBvcnRUaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gT3BlcmEgcmVxdWlyZXMgdXMgdG8gcHJvdmlkZSBhIG1lc3NhZ2UgcGF5bG9hZCwgcmVnYXJkbGVzcyBvZlxuICAgICAgICAgICAgLy8gd2hldGhlciB3ZSB1c2UgaXQuXG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZmx1c2gsIDApO1xuICAgICAgICAgICAgcmVxdWVzdFBvcnRUaWNrKCk7XG4gICAgICAgIH07XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBvbGQgYnJvd3NlcnNcbiAgICAgICAgcmVxdWVzdFRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZsdXNoLCAwKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gcnVucyBhIHRhc2sgYWZ0ZXIgYWxsIG90aGVyIHRhc2tzIGhhdmUgYmVlbiBydW5cbiAgICAvLyB0aGlzIGlzIHVzZWZ1bCBmb3IgdW5oYW5kbGVkIHJlamVjdGlvbiB0cmFja2luZyB0aGF0IG5lZWRzIHRvIGhhcHBlblxuICAgIC8vIGFmdGVyIGFsbCBgdGhlbmBkIHRhc2tzIGhhdmUgYmVlbiBydW4uXG4gICAgbmV4dFRpY2sucnVuQWZ0ZXIgPSBmdW5jdGlvbiAodGFzaykge1xuICAgICAgICBsYXRlclF1ZXVlLnB1c2godGFzayk7XG4gICAgICAgIGlmICghZmx1c2hpbmcpIHtcbiAgICAgICAgICAgIGZsdXNoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlcXVlc3RUaWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBuZXh0VGljaztcbn0pKCk7XG5cbi8vIEF0dGVtcHQgdG8gbWFrZSBnZW5lcmljcyBzYWZlIGluIHRoZSBmYWNlIG9mIGRvd25zdHJlYW1cbi8vIG1vZGlmaWNhdGlvbnMuXG4vLyBUaGVyZSBpcyBubyBzaXR1YXRpb24gd2hlcmUgdGhpcyBpcyBuZWNlc3NhcnkuXG4vLyBJZiB5b3UgbmVlZCBhIHNlY3VyaXR5IGd1YXJhbnRlZSwgdGhlc2UgcHJpbW9yZGlhbHMgbmVlZCB0byBiZVxuLy8gZGVlcGx5IGZyb3plbiBhbnl3YXksIGFuZCBpZiB5b3UgZG9u4oCZdCBuZWVkIGEgc2VjdXJpdHkgZ3VhcmFudGVlLFxuLy8gdGhpcyBpcyBqdXN0IHBsYWluIHBhcmFub2lkLlxuLy8gSG93ZXZlciwgdGhpcyAqKm1pZ2h0KiogaGF2ZSB0aGUgbmljZSBzaWRlLWVmZmVjdCBvZiByZWR1Y2luZyB0aGUgc2l6ZSBvZlxuLy8gdGhlIG1pbmlmaWVkIGNvZGUgYnkgcmVkdWNpbmcgeC5jYWxsKCkgdG8gbWVyZWx5IHgoKVxuLy8gU2VlIE1hcmsgTWlsbGVy4oCZcyBleHBsYW5hdGlvbiBvZiB3aGF0IHRoaXMgZG9lcy5cbi8vIGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWNvbnZlbnRpb25zOnNhZmVfbWV0YV9wcm9ncmFtbWluZ1xudmFyIGNhbGwgPSBGdW5jdGlvbi5jYWxsO1xuZnVuY3Rpb24gdW5jdXJyeVRoaXMoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBjYWxsLmFwcGx5KGYsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cbi8vIFRoaXMgaXMgZXF1aXZhbGVudCwgYnV0IHNsb3dlcjpcbi8vIHVuY3VycnlUaGlzID0gRnVuY3Rpb25fYmluZC5iaW5kKEZ1bmN0aW9uX2JpbmQuY2FsbCk7XG4vLyBodHRwOi8vanNwZXJmLmNvbS91bmN1cnJ5dGhpc1xuXG52YXIgYXJyYXlfc2xpY2UgPSB1bmN1cnJ5VGhpcyhBcnJheS5wcm90b3R5cGUuc2xpY2UpO1xuXG52YXIgYXJyYXlfcmVkdWNlID0gdW5jdXJyeVRoaXMoXG4gICAgQXJyYXkucHJvdG90eXBlLnJlZHVjZSB8fCBmdW5jdGlvbiAoY2FsbGJhY2ssIGJhc2lzKSB7XG4gICAgICAgIHZhciBpbmRleCA9IDAsXG4gICAgICAgICAgICBsZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgLy8gY29uY2VybmluZyB0aGUgaW5pdGlhbCB2YWx1ZSwgaWYgb25lIGlzIG5vdCBwcm92aWRlZFxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgLy8gc2VlayB0byB0aGUgZmlyc3QgdmFsdWUgaW4gdGhlIGFycmF5LCBhY2NvdW50aW5nXG4gICAgICAgICAgICAvLyBmb3IgdGhlIHBvc3NpYmlsaXR5IHRoYXQgaXMgaXMgYSBzcGFyc2UgYXJyYXlcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggaW4gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICBiYXNpcyA9IHRoaXNbaW5kZXgrK107XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKytpbmRleCA+PSBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKDEpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlZHVjZVxuICAgICAgICBmb3IgKDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIC8vIGFjY291bnQgZm9yIHRoZSBwb3NzaWJpbGl0eSB0aGF0IHRoZSBhcnJheSBpcyBzcGFyc2VcbiAgICAgICAgICAgIGlmIChpbmRleCBpbiB0aGlzKSB7XG4gICAgICAgICAgICAgICAgYmFzaXMgPSBjYWxsYmFjayhiYXNpcywgdGhpc1tpbmRleF0sIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFzaXM7XG4gICAgfVxuKTtcblxudmFyIGFycmF5X2luZGV4T2YgPSB1bmN1cnJ5VGhpcyhcbiAgICBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiB8fCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgLy8gbm90IGEgdmVyeSBnb29kIHNoaW0sIGJ1dCBnb29kIGVub3VnaCBmb3Igb3VyIG9uZSB1c2Ugb2YgaXRcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpc1tpXSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuKTtcblxudmFyIGFycmF5X21hcCA9IHVuY3VycnlUaGlzKFxuICAgIEFycmF5LnByb3RvdHlwZS5tYXAgfHwgZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzcCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBjb2xsZWN0ID0gW107XG4gICAgICAgIGFycmF5X3JlZHVjZShzZWxmLCBmdW5jdGlvbiAodW5kZWZpbmVkLCB2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGNvbGxlY3QucHVzaChjYWxsYmFjay5jYWxsKHRoaXNwLCB2YWx1ZSwgaW5kZXgsIHNlbGYpKTtcbiAgICAgICAgfSwgdm9pZCAwKTtcbiAgICAgICAgcmV0dXJuIGNvbGxlY3Q7XG4gICAgfVxuKTtcblxudmFyIG9iamVjdF9jcmVhdGUgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIChwcm90b3R5cGUpIHtcbiAgICBmdW5jdGlvbiBUeXBlKCkgeyB9XG4gICAgVHlwZS5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gICAgcmV0dXJuIG5ldyBUeXBlKCk7XG59O1xuXG52YXIgb2JqZWN0X2hhc093blByb3BlcnR5ID0gdW5jdXJyeVRoaXMoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSk7XG5cbnZhciBvYmplY3Rfa2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgaWYgKG9iamVjdF9oYXNPd25Qcm9wZXJ0eShvYmplY3QsIGtleSkpIHtcbiAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBrZXlzO1xufTtcblxudmFyIG9iamVjdF90b1N0cmluZyA9IHVuY3VycnlUaGlzKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpO1xuXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gT2JqZWN0KHZhbHVlKTtcbn1cblxuLy8gZ2VuZXJhdG9yIHJlbGF0ZWQgc2hpbXNcblxuLy8gRklYTUU6IFJlbW92ZSB0aGlzIGZ1bmN0aW9uIG9uY2UgRVM2IGdlbmVyYXRvcnMgYXJlIGluIFNwaWRlck1vbmtleS5cbmZ1bmN0aW9uIGlzU3RvcEl0ZXJhdGlvbihleGNlcHRpb24pIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBvYmplY3RfdG9TdHJpbmcoZXhjZXB0aW9uKSA9PT0gXCJbb2JqZWN0IFN0b3BJdGVyYXRpb25dXCIgfHxcbiAgICAgICAgZXhjZXB0aW9uIGluc3RhbmNlb2YgUVJldHVyblZhbHVlXG4gICAgKTtcbn1cblxuLy8gRklYTUU6IFJlbW92ZSB0aGlzIGhlbHBlciBhbmQgUS5yZXR1cm4gb25jZSBFUzYgZ2VuZXJhdG9ycyBhcmUgaW5cbi8vIFNwaWRlck1vbmtleS5cbnZhciBRUmV0dXJuVmFsdWU7XG5pZiAodHlwZW9mIFJldHVyblZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgUVJldHVyblZhbHVlID0gUmV0dXJuVmFsdWU7XG59IGVsc2Uge1xuICAgIFFSZXR1cm5WYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfTtcbn1cblxuLy8gbG9uZyBzdGFjayB0cmFjZXNcblxudmFyIFNUQUNLX0pVTVBfU0VQQVJBVE9SID0gXCJGcm9tIHByZXZpb3VzIGV2ZW50OlwiO1xuXG5mdW5jdGlvbiBtYWtlU3RhY2tUcmFjZUxvbmcoZXJyb3IsIHByb21pc2UpIHtcbiAgICAvLyBJZiBwb3NzaWJsZSwgdHJhbnNmb3JtIHRoZSBlcnJvciBzdGFjayB0cmFjZSBieSByZW1vdmluZyBOb2RlIGFuZCBRXG4gICAgLy8gY3J1ZnQsIHRoZW4gY29uY2F0ZW5hdGluZyB3aXRoIHRoZSBzdGFjayB0cmFjZSBvZiBgcHJvbWlzZWAuIFNlZSAjNTcuXG4gICAgaWYgKGhhc1N0YWNrcyAmJlxuICAgICAgICBwcm9taXNlLnN0YWNrICYmXG4gICAgICAgIHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBlcnJvciAhPT0gbnVsbCAmJlxuICAgICAgICBlcnJvci5zdGFjayAmJlxuICAgICAgICBlcnJvci5zdGFjay5pbmRleE9mKFNUQUNLX0pVTVBfU0VQQVJBVE9SKSA9PT0gLTFcbiAgICApIHtcbiAgICAgICAgdmFyIHN0YWNrcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBwID0gcHJvbWlzZTsgISFwOyBwID0gcC5zb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChwLnN0YWNrKSB7XG4gICAgICAgICAgICAgICAgc3RhY2tzLnVuc2hpZnQocC5zdGFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhY2tzLnVuc2hpZnQoZXJyb3Iuc3RhY2spO1xuXG4gICAgICAgIHZhciBjb25jYXRlZFN0YWNrcyA9IHN0YWNrcy5qb2luKFwiXFxuXCIgKyBTVEFDS19KVU1QX1NFUEFSQVRPUiArIFwiXFxuXCIpO1xuICAgICAgICBlcnJvci5zdGFjayA9IGZpbHRlclN0YWNrU3RyaW5nKGNvbmNhdGVkU3RhY2tzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZpbHRlclN0YWNrU3RyaW5nKHN0YWNrU3RyaW5nKSB7XG4gICAgdmFyIGxpbmVzID0gc3RhY2tTdHJpbmcuc3BsaXQoXCJcXG5cIik7XG4gICAgdmFyIGRlc2lyZWRMaW5lcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBsaW5lc1tpXTtcblxuICAgICAgICBpZiAoIWlzSW50ZXJuYWxGcmFtZShsaW5lKSAmJiAhaXNOb2RlRnJhbWUobGluZSkgJiYgbGluZSkge1xuICAgICAgICAgICAgZGVzaXJlZExpbmVzLnB1c2gobGluZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlc2lyZWRMaW5lcy5qb2luKFwiXFxuXCIpO1xufVxuXG5mdW5jdGlvbiBpc05vZGVGcmFtZShzdGFja0xpbmUpIHtcbiAgICByZXR1cm4gc3RhY2tMaW5lLmluZGV4T2YoXCIobW9kdWxlLmpzOlwiKSAhPT0gLTEgfHxcbiAgICAgICAgICAgc3RhY2tMaW5lLmluZGV4T2YoXCIobm9kZS5qczpcIikgIT09IC0xO1xufVxuXG5mdW5jdGlvbiBnZXRGaWxlTmFtZUFuZExpbmVOdW1iZXIoc3RhY2tMaW5lKSB7XG4gICAgLy8gTmFtZWQgZnVuY3Rpb25zOiBcImF0IGZ1bmN0aW9uTmFtZSAoZmlsZW5hbWU6bGluZU51bWJlcjpjb2x1bW5OdW1iZXIpXCJcbiAgICAvLyBJbiBJRTEwIGZ1bmN0aW9uIG5hbWUgY2FuIGhhdmUgc3BhY2VzIChcIkFub255bW91cyBmdW5jdGlvblwiKSBPX29cbiAgICB2YXIgYXR0ZW1wdDEgPSAvYXQgLisgXFwoKC4rKTooXFxkKyk6KD86XFxkKylcXCkkLy5leGVjKHN0YWNrTGluZSk7XG4gICAgaWYgKGF0dGVtcHQxKSB7XG4gICAgICAgIHJldHVybiBbYXR0ZW1wdDFbMV0sIE51bWJlcihhdHRlbXB0MVsyXSldO1xuICAgIH1cblxuICAgIC8vIEFub255bW91cyBmdW5jdGlvbnM6IFwiYXQgZmlsZW5hbWU6bGluZU51bWJlcjpjb2x1bW5OdW1iZXJcIlxuICAgIHZhciBhdHRlbXB0MiA9IC9hdCAoW14gXSspOihcXGQrKTooPzpcXGQrKSQvLmV4ZWMoc3RhY2tMaW5lKTtcbiAgICBpZiAoYXR0ZW1wdDIpIHtcbiAgICAgICAgcmV0dXJuIFthdHRlbXB0MlsxXSwgTnVtYmVyKGF0dGVtcHQyWzJdKV07XG4gICAgfVxuXG4gICAgLy8gRmlyZWZveCBzdHlsZTogXCJmdW5jdGlvbkBmaWxlbmFtZTpsaW5lTnVtYmVyIG9yIEBmaWxlbmFtZTpsaW5lTnVtYmVyXCJcbiAgICB2YXIgYXR0ZW1wdDMgPSAvLipAKC4rKTooXFxkKykkLy5leGVjKHN0YWNrTGluZSk7XG4gICAgaWYgKGF0dGVtcHQzKSB7XG4gICAgICAgIHJldHVybiBbYXR0ZW1wdDNbMV0sIE51bWJlcihhdHRlbXB0M1syXSldO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNJbnRlcm5hbEZyYW1lKHN0YWNrTGluZSkge1xuICAgIHZhciBmaWxlTmFtZUFuZExpbmVOdW1iZXIgPSBnZXRGaWxlTmFtZUFuZExpbmVOdW1iZXIoc3RhY2tMaW5lKTtcblxuICAgIGlmICghZmlsZU5hbWVBbmRMaW5lTnVtYmVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgZmlsZU5hbWUgPSBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMF07XG4gICAgdmFyIGxpbmVOdW1iZXIgPSBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMV07XG5cbiAgICByZXR1cm4gZmlsZU5hbWUgPT09IHFGaWxlTmFtZSAmJlxuICAgICAgICBsaW5lTnVtYmVyID49IHFTdGFydGluZ0xpbmUgJiZcbiAgICAgICAgbGluZU51bWJlciA8PSBxRW5kaW5nTGluZTtcbn1cblxuLy8gZGlzY292ZXIgb3duIGZpbGUgbmFtZSBhbmQgbGluZSBudW1iZXIgcmFuZ2UgZm9yIGZpbHRlcmluZyBzdGFja1xuLy8gdHJhY2VzXG5mdW5jdGlvbiBjYXB0dXJlTGluZSgpIHtcbiAgICBpZiAoIWhhc1N0YWNrcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB2YXIgbGluZXMgPSBlLnN0YWNrLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICB2YXIgZmlyc3RMaW5lID0gbGluZXNbMF0uaW5kZXhPZihcIkBcIikgPiAwID8gbGluZXNbMV0gOiBsaW5lc1syXTtcbiAgICAgICAgdmFyIGZpbGVOYW1lQW5kTGluZU51bWJlciA9IGdldEZpbGVOYW1lQW5kTGluZU51bWJlcihmaXJzdExpbmUpO1xuICAgICAgICBpZiAoIWZpbGVOYW1lQW5kTGluZU51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcUZpbGVOYW1lID0gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzBdO1xuICAgICAgICByZXR1cm4gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzFdO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVwcmVjYXRlKGNhbGxiYWNrLCBuYW1lLCBhbHRlcm5hdGl2ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUud2FybiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4obmFtZSArIFwiIGlzIGRlcHJlY2F0ZWQsIHVzZSBcIiArIGFsdGVybmF0aXZlICtcbiAgICAgICAgICAgICAgICAgICAgICAgICBcIiBpbnN0ZWFkLlwiLCBuZXcgRXJyb3IoXCJcIikuc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseShjYWxsYmFjaywgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuXG4vLyBlbmQgb2Ygc2hpbXNcbi8vIGJlZ2lubmluZyBvZiByZWFsIHdvcmtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgcHJvbWlzZSBmb3IgYW4gaW1tZWRpYXRlIHJlZmVyZW5jZSwgcGFzc2VzIHByb21pc2VzIHRocm91Z2gsIG9yXG4gKiBjb2VyY2VzIHByb21pc2VzIGZyb20gZGlmZmVyZW50IHN5c3RlbXMuXG4gKiBAcGFyYW0gdmFsdWUgaW1tZWRpYXRlIHJlZmVyZW5jZSBvciBwcm9taXNlXG4gKi9cbmZ1bmN0aW9uIFEodmFsdWUpIHtcbiAgICAvLyBJZiB0aGUgb2JqZWN0IGlzIGFscmVhZHkgYSBQcm9taXNlLCByZXR1cm4gaXQgZGlyZWN0bHkuICBUaGlzIGVuYWJsZXNcbiAgICAvLyB0aGUgcmVzb2x2ZSBmdW5jdGlvbiB0byBib3RoIGJlIHVzZWQgdG8gY3JlYXRlZCByZWZlcmVuY2VzIGZyb20gb2JqZWN0cyxcbiAgICAvLyBidXQgdG8gdG9sZXJhYmx5IGNvZXJjZSBub24tcHJvbWlzZXMgdG8gcHJvbWlzZXMuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgLy8gYXNzaW1pbGF0ZSB0aGVuYWJsZXNcbiAgICBpZiAoaXNQcm9taXNlQWxpa2UodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBjb2VyY2UodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmdWxmaWxsKHZhbHVlKTtcbiAgICB9XG59XG5RLnJlc29sdmUgPSBRO1xuXG4vKipcbiAqIFBlcmZvcm1zIGEgdGFzayBpbiBhIGZ1dHVyZSB0dXJuIG9mIHRoZSBldmVudCBsb29wLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gdGFza1xuICovXG5RLm5leHRUaWNrID0gbmV4dFRpY2s7XG5cbi8qKlxuICogQ29udHJvbHMgd2hldGhlciBvciBub3QgbG9uZyBzdGFjayB0cmFjZXMgd2lsbCBiZSBvblxuICovXG5RLmxvbmdTdGFja1N1cHBvcnQgPSBmYWxzZTtcblxuLy8gZW5hYmxlIGxvbmcgc3RhY2tzIGlmIFFfREVCVUcgaXMgc2V0XG5pZiAodHlwZW9mIHByb2Nlc3MgPT09IFwib2JqZWN0XCIgJiYgcHJvY2VzcyAmJiBwcm9jZXNzLmVudiAmJiBwcm9jZXNzLmVudi5RX0RFQlVHKSB7XG4gICAgUS5sb25nU3RhY2tTdXBwb3J0ID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEge3Byb21pc2UsIHJlc29sdmUsIHJlamVjdH0gb2JqZWN0LlxuICpcbiAqIGByZXNvbHZlYCBpcyBhIGNhbGxiYWNrIHRvIGludm9rZSB3aXRoIGEgbW9yZSByZXNvbHZlZCB2YWx1ZSBmb3IgdGhlXG4gKiBwcm9taXNlLiBUbyBmdWxmaWxsIHRoZSBwcm9taXNlLCBpbnZva2UgYHJlc29sdmVgIHdpdGggYW55IHZhbHVlIHRoYXQgaXNcbiAqIG5vdCBhIHRoZW5hYmxlLiBUbyByZWplY3QgdGhlIHByb21pc2UsIGludm9rZSBgcmVzb2x2ZWAgd2l0aCBhIHJlamVjdGVkXG4gKiB0aGVuYWJsZSwgb3IgaW52b2tlIGByZWplY3RgIHdpdGggdGhlIHJlYXNvbiBkaXJlY3RseS4gVG8gcmVzb2x2ZSB0aGVcbiAqIHByb21pc2UgdG8gYW5vdGhlciB0aGVuYWJsZSwgdGh1cyBwdXR0aW5nIGl0IGluIHRoZSBzYW1lIHN0YXRlLCBpbnZva2VcbiAqIGByZXNvbHZlYCB3aXRoIHRoYXQgb3RoZXIgdGhlbmFibGUuXG4gKi9cblEuZGVmZXIgPSBkZWZlcjtcbmZ1bmN0aW9uIGRlZmVyKCkge1xuICAgIC8vIGlmIFwibWVzc2FnZXNcIiBpcyBhbiBcIkFycmF5XCIsIHRoYXQgaW5kaWNhdGVzIHRoYXQgdGhlIHByb21pc2UgaGFzIG5vdCB5ZXRcbiAgICAvLyBiZWVuIHJlc29sdmVkLiAgSWYgaXQgaXMgXCJ1bmRlZmluZWRcIiwgaXQgaGFzIGJlZW4gcmVzb2x2ZWQuICBFYWNoXG4gICAgLy8gZWxlbWVudCBvZiB0aGUgbWVzc2FnZXMgYXJyYXkgaXMgaXRzZWxmIGFuIGFycmF5IG9mIGNvbXBsZXRlIGFyZ3VtZW50cyB0b1xuICAgIC8vIGZvcndhcmQgdG8gdGhlIHJlc29sdmVkIHByb21pc2UuICBXZSBjb2VyY2UgdGhlIHJlc29sdXRpb24gdmFsdWUgdG8gYVxuICAgIC8vIHByb21pc2UgdXNpbmcgdGhlIGByZXNvbHZlYCBmdW5jdGlvbiBiZWNhdXNlIGl0IGhhbmRsZXMgYm90aCBmdWxseVxuICAgIC8vIG5vbi10aGVuYWJsZSB2YWx1ZXMgYW5kIG90aGVyIHRoZW5hYmxlcyBncmFjZWZ1bGx5LlxuICAgIHZhciBtZXNzYWdlcyA9IFtdLCBwcm9ncmVzc0xpc3RlbmVycyA9IFtdLCByZXNvbHZlZFByb21pc2U7XG5cbiAgICB2YXIgZGVmZXJyZWQgPSBvYmplY3RfY3JlYXRlKGRlZmVyLnByb3RvdHlwZSk7XG4gICAgdmFyIHByb21pc2UgPSBvYmplY3RfY3JlYXRlKFByb21pc2UucHJvdG90eXBlKTtcblxuICAgIHByb21pc2UucHJvbWlzZURpc3BhdGNoID0gZnVuY3Rpb24gKHJlc29sdmUsIG9wLCBvcGVyYW5kcykge1xuICAgICAgICB2YXIgYXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cyk7XG4gICAgICAgIGlmIChtZXNzYWdlcykge1xuICAgICAgICAgICAgbWVzc2FnZXMucHVzaChhcmdzKTtcbiAgICAgICAgICAgIGlmIChvcCA9PT0gXCJ3aGVuXCIgJiYgb3BlcmFuZHNbMV0pIHsgLy8gcHJvZ3Jlc3Mgb3BlcmFuZFxuICAgICAgICAgICAgICAgIHByb2dyZXNzTGlzdGVuZXJzLnB1c2gob3BlcmFuZHNbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgUS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZWRQcm9taXNlLnByb21pc2VEaXNwYXRjaC5hcHBseShyZXNvbHZlZFByb21pc2UsIGFyZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gWFhYIGRlcHJlY2F0ZWRcbiAgICBwcm9taXNlLnZhbHVlT2YgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChtZXNzYWdlcykge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5lYXJlclZhbHVlID0gbmVhcmVyKHJlc29sdmVkUHJvbWlzZSk7XG4gICAgICAgIGlmIChpc1Byb21pc2UobmVhcmVyVmFsdWUpKSB7XG4gICAgICAgICAgICByZXNvbHZlZFByb21pc2UgPSBuZWFyZXJWYWx1ZTsgLy8gc2hvcnRlbiBjaGFpblxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZWFyZXJWYWx1ZTtcbiAgICB9O1xuXG4gICAgcHJvbWlzZS5pbnNwZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXJlc29sdmVkUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdGU6IFwicGVuZGluZ1wiIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc29sdmVkUHJvbWlzZS5pbnNwZWN0KCk7XG4gICAgfTtcblxuICAgIGlmIChRLmxvbmdTdGFja1N1cHBvcnQgJiYgaGFzU3RhY2tzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gTk9URTogZG9uJ3QgdHJ5IHRvIHVzZSBgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2VgIG9yIHRyYW5zZmVyIHRoZVxuICAgICAgICAgICAgLy8gYWNjZXNzb3IgYXJvdW5kOyB0aGF0IGNhdXNlcyBtZW1vcnkgbGVha3MgYXMgcGVyIEdILTExMS4gSnVzdFxuICAgICAgICAgICAgLy8gcmVpZnkgdGhlIHN0YWNrIHRyYWNlIGFzIGEgc3RyaW5nIEFTQVAuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gQXQgdGhlIHNhbWUgdGltZSwgY3V0IG9mZiB0aGUgZmlyc3QgbGluZTsgaXQncyBhbHdheXMganVzdFxuICAgICAgICAgICAgLy8gXCJbb2JqZWN0IFByb21pc2VdXFxuXCIsIGFzIHBlciB0aGUgYHRvU3RyaW5nYC5cbiAgICAgICAgICAgIHByb21pc2Uuc3RhY2sgPSBlLnN0YWNrLnN1YnN0cmluZyhlLnN0YWNrLmluZGV4T2YoXCJcXG5cIikgKyAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5PVEU6IHdlIGRvIHRoZSBjaGVja3MgZm9yIGByZXNvbHZlZFByb21pc2VgIGluIGVhY2ggbWV0aG9kLCBpbnN0ZWFkIG9mXG4gICAgLy8gY29uc29saWRhdGluZyB0aGVtIGludG8gYGJlY29tZWAsIHNpbmNlIG90aGVyd2lzZSB3ZSdkIGNyZWF0ZSBuZXdcbiAgICAvLyBwcm9taXNlcyB3aXRoIHRoZSBsaW5lcyBgYmVjb21lKHdoYXRldmVyKHZhbHVlKSlgLiBTZWUgZS5nLiBHSC0yNTIuXG5cbiAgICBmdW5jdGlvbiBiZWNvbWUobmV3UHJvbWlzZSkge1xuICAgICAgICByZXNvbHZlZFByb21pc2UgPSBuZXdQcm9taXNlO1xuICAgICAgICBwcm9taXNlLnNvdXJjZSA9IG5ld1Byb21pc2U7XG5cbiAgICAgICAgYXJyYXlfcmVkdWNlKG1lc3NhZ2VzLCBmdW5jdGlvbiAodW5kZWZpbmVkLCBtZXNzYWdlKSB7XG4gICAgICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBuZXdQcm9taXNlLnByb21pc2VEaXNwYXRjaC5hcHBseShuZXdQcm9taXNlLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCB2b2lkIDApO1xuXG4gICAgICAgIG1lc3NhZ2VzID0gdm9pZCAwO1xuICAgICAgICBwcm9ncmVzc0xpc3RlbmVycyA9IHZvaWQgMDtcbiAgICB9XG5cbiAgICBkZWZlcnJlZC5wcm9taXNlID0gcHJvbWlzZTtcbiAgICBkZWZlcnJlZC5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmIChyZXNvbHZlZFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJlY29tZShRKHZhbHVlKSk7XG4gICAgfTtcblxuICAgIGRlZmVycmVkLmZ1bGZpbGwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHJlc29sdmVkUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYmVjb21lKGZ1bGZpbGwodmFsdWUpKTtcbiAgICB9O1xuICAgIGRlZmVycmVkLnJlamVjdCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgaWYgKHJlc29sdmVkUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYmVjb21lKHJlamVjdChyZWFzb24pKTtcbiAgICB9O1xuICAgIGRlZmVycmVkLm5vdGlmeSA9IGZ1bmN0aW9uIChwcm9ncmVzcykge1xuICAgICAgICBpZiAocmVzb2x2ZWRQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhcnJheV9yZWR1Y2UocHJvZ3Jlc3NMaXN0ZW5lcnMsIGZ1bmN0aW9uICh1bmRlZmluZWQsIHByb2dyZXNzTGlzdGVuZXIpIHtcbiAgICAgICAgICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHByb2dyZXNzTGlzdGVuZXIocHJvZ3Jlc3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIHZvaWQgMCk7XG4gICAgfTtcblxuICAgIHJldHVybiBkZWZlcnJlZDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgTm9kZS1zdHlsZSBjYWxsYmFjayB0aGF0IHdpbGwgcmVzb2x2ZSBvciByZWplY3QgdGhlIGRlZmVycmVkXG4gKiBwcm9taXNlLlxuICogQHJldHVybnMgYSBub2RlYmFja1xuICovXG5kZWZlci5wcm90b3R5cGUubWFrZU5vZGVSZXNvbHZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlcnJvciwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBzZWxmLnJlamVjdChlcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICAgIHNlbGYucmVzb2x2ZShhcnJheV9zbGljZShhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYucmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gcmVzb2x2ZXIge0Z1bmN0aW9ufSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBub3RoaW5nIGFuZCBhY2NlcHRzXG4gKiB0aGUgcmVzb2x2ZSwgcmVqZWN0LCBhbmQgbm90aWZ5IGZ1bmN0aW9ucyBmb3IgYSBkZWZlcnJlZC5cbiAqIEByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IG1heSBiZSByZXNvbHZlZCB3aXRoIHRoZSBnaXZlbiByZXNvbHZlIGFuZCByZWplY3RcbiAqIGZ1bmN0aW9ucywgb3IgcmVqZWN0ZWQgYnkgYSB0aHJvd24gZXhjZXB0aW9uIGluIHJlc29sdmVyXG4gKi9cblEuUHJvbWlzZSA9IHByb21pc2U7IC8vIEVTNlxuUS5wcm9taXNlID0gcHJvbWlzZTtcbmZ1bmN0aW9uIHByb21pc2UocmVzb2x2ZXIpIHtcbiAgICBpZiAodHlwZW9mIHJlc29sdmVyICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcInJlc29sdmVyIG11c3QgYmUgYSBmdW5jdGlvbi5cIik7XG4gICAgfVxuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgdHJ5IHtcbiAgICAgICAgcmVzb2x2ZXIoZGVmZXJyZWQucmVzb2x2ZSwgZGVmZXJyZWQucmVqZWN0LCBkZWZlcnJlZC5ub3RpZnkpO1xuICAgIH0gY2F0Y2ggKHJlYXNvbikge1xuICAgICAgICBkZWZlcnJlZC5yZWplY3QocmVhc29uKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbnByb21pc2UucmFjZSA9IHJhY2U7IC8vIEVTNlxucHJvbWlzZS5hbGwgPSBhbGw7IC8vIEVTNlxucHJvbWlzZS5yZWplY3QgPSByZWplY3Q7IC8vIEVTNlxucHJvbWlzZS5yZXNvbHZlID0gUTsgLy8gRVM2XG5cbi8vIFhYWCBleHBlcmltZW50YWwuICBUaGlzIG1ldGhvZCBpcyBhIHdheSB0byBkZW5vdGUgdGhhdCBhIGxvY2FsIHZhbHVlIGlzXG4vLyBzZXJpYWxpemFibGUgYW5kIHNob3VsZCBiZSBpbW1lZGlhdGVseSBkaXNwYXRjaGVkIHRvIGEgcmVtb3RlIHVwb24gcmVxdWVzdCxcbi8vIGluc3RlYWQgb2YgcGFzc2luZyBhIHJlZmVyZW5jZS5cblEucGFzc0J5Q29weSA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAvL2ZyZWV6ZShvYmplY3QpO1xuICAgIC8vcGFzc0J5Q29waWVzLnNldChvYmplY3QsIHRydWUpO1xuICAgIHJldHVybiBvYmplY3Q7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5wYXNzQnlDb3B5ID0gZnVuY3Rpb24gKCkge1xuICAgIC8vZnJlZXplKG9iamVjdCk7XG4gICAgLy9wYXNzQnlDb3BpZXMuc2V0KG9iamVjdCwgdHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIElmIHR3byBwcm9taXNlcyBldmVudHVhbGx5IGZ1bGZpbGwgdG8gdGhlIHNhbWUgdmFsdWUsIHByb21pc2VzIHRoYXQgdmFsdWUsXG4gKiBidXQgb3RoZXJ3aXNlIHJlamVjdHMuXG4gKiBAcGFyYW0geCB7QW55Kn1cbiAqIEBwYXJhbSB5IHtBbnkqfVxuICogQHJldHVybnMge0FueSp9IGEgcHJvbWlzZSBmb3IgeCBhbmQgeSBpZiB0aGV5IGFyZSB0aGUgc2FtZSwgYnV0IGEgcmVqZWN0aW9uXG4gKiBvdGhlcndpc2UuXG4gKlxuICovXG5RLmpvaW4gPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgIHJldHVybiBRKHgpLmpvaW4oeSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5qb2luID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgICByZXR1cm4gUShbdGhpcywgdGhhdF0pLnNwcmVhZChmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICBpZiAoeCA9PT0geSkge1xuICAgICAgICAgICAgLy8gVE9ETzogXCI9PT1cIiBzaG91bGQgYmUgT2JqZWN0LmlzIG9yIGVxdWl2XG4gICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGpvaW46IG5vdCB0aGUgc2FtZTogXCIgKyB4ICsgXCIgXCIgKyB5KTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIGZpcnN0IG9mIGFuIGFycmF5IG9mIHByb21pc2VzIHRvIGJlY29tZSBzZXR0bGVkLlxuICogQHBhcmFtIGFuc3dlcnMge0FycmF5W0FueSpdfSBwcm9taXNlcyB0byByYWNlXG4gKiBAcmV0dXJucyB7QW55Kn0gdGhlIGZpcnN0IHByb21pc2UgdG8gYmUgc2V0dGxlZFxuICovXG5RLnJhY2UgPSByYWNlO1xuZnVuY3Rpb24gcmFjZShhbnN3ZXJQcykge1xuICAgIHJldHVybiBwcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8gU3dpdGNoIHRvIHRoaXMgb25jZSB3ZSBjYW4gYXNzdW1lIGF0IGxlYXN0IEVTNVxuICAgICAgICAvLyBhbnN3ZXJQcy5mb3JFYWNoKGZ1bmN0aW9uIChhbnN3ZXJQKSB7XG4gICAgICAgIC8vICAgICBRKGFuc3dlclApLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vIFVzZSB0aGlzIGluIHRoZSBtZWFudGltZVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYW5zd2VyUHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIFEoYW5zd2VyUHNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5yYWNlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnRoZW4oUS5yYWNlKTtcbn07XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIFByb21pc2Ugd2l0aCBhIHByb21pc2UgZGVzY3JpcHRvciBvYmplY3QgYW5kIG9wdGlvbmFsIGZhbGxiYWNrXG4gKiBmdW5jdGlvbi4gIFRoZSBkZXNjcmlwdG9yIGNvbnRhaW5zIG1ldGhvZHMgbGlrZSB3aGVuKHJlamVjdGVkKSwgZ2V0KG5hbWUpLFxuICogc2V0KG5hbWUsIHZhbHVlKSwgcG9zdChuYW1lLCBhcmdzKSwgYW5kIGRlbGV0ZShuYW1lKSwgd2hpY2ggYWxsXG4gKiByZXR1cm4gZWl0aGVyIGEgdmFsdWUsIGEgcHJvbWlzZSBmb3IgYSB2YWx1ZSwgb3IgYSByZWplY3Rpb24uICBUaGUgZmFsbGJhY2tcbiAqIGFjY2VwdHMgdGhlIG9wZXJhdGlvbiBuYW1lLCBhIHJlc29sdmVyLCBhbmQgYW55IGZ1cnRoZXIgYXJndW1lbnRzIHRoYXQgd291bGRcbiAqIGhhdmUgYmVlbiBmb3J3YXJkZWQgdG8gdGhlIGFwcHJvcHJpYXRlIG1ldGhvZCBhYm92ZSBoYWQgYSBtZXRob2QgYmVlblxuICogcHJvdmlkZWQgd2l0aCB0aGUgcHJvcGVyIG5hbWUuICBUaGUgQVBJIG1ha2VzIG5vIGd1YXJhbnRlZXMgYWJvdXQgdGhlIG5hdHVyZVxuICogb2YgdGhlIHJldHVybmVkIG9iamVjdCwgYXBhcnQgZnJvbSB0aGF0IGl0IGlzIHVzYWJsZSB3aGVyZWV2ZXIgcHJvbWlzZXMgYXJlXG4gKiBib3VnaHQgYW5kIHNvbGQuXG4gKi9cblEubWFrZVByb21pc2UgPSBQcm9taXNlO1xuZnVuY3Rpb24gUHJvbWlzZShkZXNjcmlwdG9yLCBmYWxsYmFjaywgaW5zcGVjdCkge1xuICAgIGlmIChmYWxsYmFjayA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGZhbGxiYWNrID0gZnVuY3Rpb24gKG9wKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBcIlByb21pc2UgZG9lcyBub3Qgc3VwcG9ydCBvcGVyYXRpb246IFwiICsgb3BcbiAgICAgICAgICAgICkpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaW5zcGVjdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGluc3BlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4ge3N0YXRlOiBcInVua25vd25cIn07XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBvYmplY3RfY3JlYXRlKFByb21pc2UucHJvdG90eXBlKTtcblxuICAgIHByb21pc2UucHJvbWlzZURpc3BhdGNoID0gZnVuY3Rpb24gKHJlc29sdmUsIG9wLCBhcmdzKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoZGVzY3JpcHRvcltvcF0pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBkZXNjcmlwdG9yW29wXS5hcHBseShwcm9taXNlLCBhcmdzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZmFsbGJhY2suY2FsbChwcm9taXNlLCBvcCwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc29sdmUpIHtcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwcm9taXNlLmluc3BlY3QgPSBpbnNwZWN0O1xuXG4gICAgLy8gWFhYIGRlcHJlY2F0ZWQgYHZhbHVlT2ZgIGFuZCBgZXhjZXB0aW9uYCBzdXBwb3J0XG4gICAgaWYgKGluc3BlY3QpIHtcbiAgICAgICAgdmFyIGluc3BlY3RlZCA9IGluc3BlY3QoKTtcbiAgICAgICAgaWYgKGluc3BlY3RlZC5zdGF0ZSA9PT0gXCJyZWplY3RlZFwiKSB7XG4gICAgICAgICAgICBwcm9taXNlLmV4Y2VwdGlvbiA9IGluc3BlY3RlZC5yZWFzb247XG4gICAgICAgIH1cblxuICAgICAgICBwcm9taXNlLnZhbHVlT2YgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5zcGVjdGVkID0gaW5zcGVjdCgpO1xuICAgICAgICAgICAgaWYgKGluc3BlY3RlZC5zdGF0ZSA9PT0gXCJwZW5kaW5nXCIgfHxcbiAgICAgICAgICAgICAgICBpbnNwZWN0ZWQuc3RhdGUgPT09IFwicmVqZWN0ZWRcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluc3BlY3RlZC52YWx1ZTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBQcm9taXNlXVwiO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChmdWxmaWxsZWQsIHJlamVjdGVkLCBwcm9ncmVzc2VkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgdmFyIGRvbmUgPSBmYWxzZTsgICAvLyBlbnN1cmUgdGhlIHVudHJ1c3RlZCBwcm9taXNlIG1ha2VzIGF0IG1vc3QgYVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2luZ2xlIGNhbGwgdG8gb25lIG9mIHRoZSBjYWxsYmFja3NcblxuICAgIGZ1bmN0aW9uIF9mdWxmaWxsZWQodmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZnVsZmlsbGVkID09PSBcImZ1bmN0aW9uXCIgPyBmdWxmaWxsZWQodmFsdWUpIDogdmFsdWU7XG4gICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChleGNlcHRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX3JlamVjdGVkKGV4Y2VwdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIHJlamVjdGVkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIG1ha2VTdGFja1RyYWNlTG9uZyhleGNlcHRpb24sIHNlbGYpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0ZWQoZXhjZXB0aW9uKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKG5ld0V4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3RXhjZXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX3Byb2dyZXNzZWQodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBwcm9ncmVzc2VkID09PSBcImZ1bmN0aW9uXCIgPyBwcm9ncmVzc2VkKHZhbHVlKSA6IHZhbHVlO1xuICAgIH1cblxuICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnByb21pc2VEaXNwYXRjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoX2Z1bGZpbGxlZCh2YWx1ZSkpO1xuICAgICAgICB9LCBcIndoZW5cIiwgW2Z1bmN0aW9uIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoX3JlamVjdGVkKGV4Y2VwdGlvbikpO1xuICAgICAgICB9XSk7XG4gICAgfSk7XG5cbiAgICAvLyBQcm9ncmVzcyBwcm9wYWdhdG9yIG5lZWQgdG8gYmUgYXR0YWNoZWQgaW4gdGhlIGN1cnJlbnQgdGljay5cbiAgICBzZWxmLnByb21pc2VEaXNwYXRjaCh2b2lkIDAsIFwid2hlblwiLCBbdm9pZCAwLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIG5ld1ZhbHVlO1xuICAgICAgICB2YXIgdGhyZXcgPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5ld1ZhbHVlID0gX3Byb2dyZXNzZWQodmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJldyA9IHRydWU7XG4gICAgICAgICAgICBpZiAoUS5vbmVycm9yKSB7XG4gICAgICAgICAgICAgICAgUS5vbmVycm9yKGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aHJldykge1xuICAgICAgICAgICAgZGVmZXJyZWQubm90aWZ5KG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuUS50YXAgPSBmdW5jdGlvbiAocHJvbWlzZSwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gUShwcm9taXNlKS50YXAoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBXb3JrcyBhbG1vc3QgbGlrZSBcImZpbmFsbHlcIiwgYnV0IG5vdCBjYWxsZWQgZm9yIHJlamVjdGlvbnMuXG4gKiBPcmlnaW5hbCByZXNvbHV0aW9uIHZhbHVlIGlzIHBhc3NlZCB0aHJvdWdoIGNhbGxiYWNrIHVuYWZmZWN0ZWQuXG4gKiBDYWxsYmFjayBtYXkgcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmUgYXdhaXRlZCBmb3IuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnMge1EuUHJvbWlzZX1cbiAqIEBleGFtcGxlXG4gKiBkb1NvbWV0aGluZygpXG4gKiAgIC50aGVuKC4uLilcbiAqICAgLnRhcChjb25zb2xlLmxvZylcbiAqICAgLnRoZW4oLi4uKTtcbiAqL1xuUHJvbWlzZS5wcm90b3R5cGUudGFwID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgY2FsbGJhY2sgPSBRKGNhbGxiYWNrKTtcblxuICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5mY2FsbCh2YWx1ZSkudGhlblJlc29sdmUodmFsdWUpO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBSZWdpc3RlcnMgYW4gb2JzZXJ2ZXIgb24gYSBwcm9taXNlLlxuICpcbiAqIEd1YXJhbnRlZXM6XG4gKlxuICogMS4gdGhhdCBmdWxmaWxsZWQgYW5kIHJlamVjdGVkIHdpbGwgYmUgY2FsbGVkIG9ubHkgb25jZS5cbiAqIDIuIHRoYXQgZWl0aGVyIHRoZSBmdWxmaWxsZWQgY2FsbGJhY2sgb3IgdGhlIHJlamVjdGVkIGNhbGxiYWNrIHdpbGwgYmVcbiAqICAgIGNhbGxlZCwgYnV0IG5vdCBib3RoLlxuICogMy4gdGhhdCBmdWxmaWxsZWQgYW5kIHJlamVjdGVkIHdpbGwgbm90IGJlIGNhbGxlZCBpbiB0aGlzIHR1cm4uXG4gKlxuICogQHBhcmFtIHZhbHVlICAgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIHRvIG9ic2VydmVcbiAqIEBwYXJhbSBmdWxmaWxsZWQgIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aXRoIHRoZSBmdWxmaWxsZWQgdmFsdWVcbiAqIEBwYXJhbSByZWplY3RlZCAgIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aXRoIHRoZSByZWplY3Rpb24gZXhjZXB0aW9uXG4gKiBAcGFyYW0gcHJvZ3Jlc3NlZCBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYW55IHByb2dyZXNzIG5vdGlmaWNhdGlvbnNcbiAqIEByZXR1cm4gcHJvbWlzZSBmb3IgdGhlIHJldHVybiB2YWx1ZSBmcm9tIHRoZSBpbnZva2VkIGNhbGxiYWNrXG4gKi9cblEud2hlbiA9IHdoZW47XG5mdW5jdGlvbiB3aGVuKHZhbHVlLCBmdWxmaWxsZWQsIHJlamVjdGVkLCBwcm9ncmVzc2VkKSB7XG4gICAgcmV0dXJuIFEodmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3NlZCk7XG59XG5cblByb21pc2UucHJvdG90eXBlLnRoZW5SZXNvbHZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiB2YWx1ZTsgfSk7XG59O1xuXG5RLnRoZW5SZXNvbHZlID0gZnVuY3Rpb24gKHByb21pc2UsIHZhbHVlKSB7XG4gICAgcmV0dXJuIFEocHJvbWlzZSkudGhlblJlc29sdmUodmFsdWUpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGhlblJlamVjdCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uICgpIHsgdGhyb3cgcmVhc29uOyB9KTtcbn07XG5cblEudGhlblJlamVjdCA9IGZ1bmN0aW9uIChwcm9taXNlLCByZWFzb24pIHtcbiAgICByZXR1cm4gUShwcm9taXNlKS50aGVuUmVqZWN0KHJlYXNvbik7XG59O1xuXG4vKipcbiAqIElmIGFuIG9iamVjdCBpcyBub3QgYSBwcm9taXNlLCBpdCBpcyBhcyBcIm5lYXJcIiBhcyBwb3NzaWJsZS5cbiAqIElmIGEgcHJvbWlzZSBpcyByZWplY3RlZCwgaXQgaXMgYXMgXCJuZWFyXCIgYXMgcG9zc2libGUgdG9vLlxuICogSWYgaXTigJlzIGEgZnVsZmlsbGVkIHByb21pc2UsIHRoZSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZWFyZXIuXG4gKiBJZiBpdOKAmXMgYSBkZWZlcnJlZCBwcm9taXNlIGFuZCB0aGUgZGVmZXJyZWQgaGFzIGJlZW4gcmVzb2x2ZWQsIHRoZVxuICogcmVzb2x1dGlvbiBpcyBcIm5lYXJlclwiLlxuICogQHBhcmFtIG9iamVjdFxuICogQHJldHVybnMgbW9zdCByZXNvbHZlZCAobmVhcmVzdCkgZm9ybSBvZiB0aGUgb2JqZWN0XG4gKi9cblxuLy8gWFhYIHNob3VsZCB3ZSByZS1kbyB0aGlzP1xuUS5uZWFyZXIgPSBuZWFyZXI7XG5mdW5jdGlvbiBuZWFyZXIodmFsdWUpIHtcbiAgICBpZiAoaXNQcm9taXNlKHZhbHVlKSkge1xuICAgICAgICB2YXIgaW5zcGVjdGVkID0gdmFsdWUuaW5zcGVjdCgpO1xuICAgICAgICBpZiAoaW5zcGVjdGVkLnN0YXRlID09PSBcImZ1bGZpbGxlZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5zcGVjdGVkLnZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBAcmV0dXJucyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYSBwcm9taXNlLlxuICogT3RoZXJ3aXNlIGl0IGlzIGEgZnVsZmlsbGVkIHZhbHVlLlxuICovXG5RLmlzUHJvbWlzZSA9IGlzUHJvbWlzZTtcbmZ1bmN0aW9uIGlzUHJvbWlzZShvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgUHJvbWlzZTtcbn1cblxuUS5pc1Byb21pc2VBbGlrZSA9IGlzUHJvbWlzZUFsaWtlO1xuZnVuY3Rpb24gaXNQcm9taXNlQWxpa2Uob2JqZWN0KSB7XG4gICAgcmV0dXJuIGlzT2JqZWN0KG9iamVjdCkgJiYgdHlwZW9mIG9iamVjdC50aGVuID09PSBcImZ1bmN0aW9uXCI7XG59XG5cbi8qKlxuICogQHJldHVybnMgd2hldGhlciB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGEgcGVuZGluZyBwcm9taXNlLCBtZWFuaW5nIG5vdFxuICogZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuICovXG5RLmlzUGVuZGluZyA9IGlzUGVuZGluZztcbmZ1bmN0aW9uIGlzUGVuZGluZyhvYmplY3QpIHtcbiAgICByZXR1cm4gaXNQcm9taXNlKG9iamVjdCkgJiYgb2JqZWN0Lmluc3BlY3QoKS5zdGF0ZSA9PT0gXCJwZW5kaW5nXCI7XG59XG5cblByb21pc2UucHJvdG90eXBlLmlzUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNwZWN0KCkuc3RhdGUgPT09IFwicGVuZGluZ1wiO1xufTtcblxuLyoqXG4gKiBAcmV0dXJucyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYSB2YWx1ZSBvciBmdWxmaWxsZWRcbiAqIHByb21pc2UuXG4gKi9cblEuaXNGdWxmaWxsZWQgPSBpc0Z1bGZpbGxlZDtcbmZ1bmN0aW9uIGlzRnVsZmlsbGVkKG9iamVjdCkge1xuICAgIHJldHVybiAhaXNQcm9taXNlKG9iamVjdCkgfHwgb2JqZWN0Lmluc3BlY3QoKS5zdGF0ZSA9PT0gXCJmdWxmaWxsZWRcIjtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuaXNGdWxmaWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zcGVjdCgpLnN0YXRlID09PSBcImZ1bGZpbGxlZFwiO1xufTtcblxuLyoqXG4gKiBAcmV0dXJucyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYSByZWplY3RlZCBwcm9taXNlLlxuICovXG5RLmlzUmVqZWN0ZWQgPSBpc1JlamVjdGVkO1xuZnVuY3Rpb24gaXNSZWplY3RlZChvYmplY3QpIHtcbiAgICByZXR1cm4gaXNQcm9taXNlKG9iamVjdCkgJiYgb2JqZWN0Lmluc3BlY3QoKS5zdGF0ZSA9PT0gXCJyZWplY3RlZFwiO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5pc1JlamVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmluc3BlY3QoKS5zdGF0ZSA9PT0gXCJyZWplY3RlZFwiO1xufTtcblxuLy8vLyBCRUdJTiBVTkhBTkRMRUQgUkVKRUNUSU9OIFRSQUNLSU5HXG5cbi8vIFRoaXMgcHJvbWlzZSBsaWJyYXJ5IGNvbnN1bWVzIGV4Y2VwdGlvbnMgdGhyb3duIGluIGhhbmRsZXJzIHNvIHRoZXkgY2FuIGJlXG4vLyBoYW5kbGVkIGJ5IGEgc3Vic2VxdWVudCBwcm9taXNlLiAgVGhlIGV4Y2VwdGlvbnMgZ2V0IGFkZGVkIHRvIHRoaXMgYXJyYXkgd2hlblxuLy8gdGhleSBhcmUgY3JlYXRlZCwgYW5kIHJlbW92ZWQgd2hlbiB0aGV5IGFyZSBoYW5kbGVkLiAgTm90ZSB0aGF0IGluIEVTNiBvclxuLy8gc2hpbW1lZCBlbnZpcm9ubWVudHMsIHRoaXMgd291bGQgbmF0dXJhbGx5IGJlIGEgYFNldGAuXG52YXIgdW5oYW5kbGVkUmVhc29ucyA9IFtdO1xudmFyIHVuaGFuZGxlZFJlamVjdGlvbnMgPSBbXTtcbnZhciByZXBvcnRlZFVuaGFuZGxlZFJlamVjdGlvbnMgPSBbXTtcbnZhciB0cmFja1VuaGFuZGxlZFJlamVjdGlvbnMgPSB0cnVlO1xuXG5mdW5jdGlvbiByZXNldFVuaGFuZGxlZFJlamVjdGlvbnMoKSB7XG4gICAgdW5oYW5kbGVkUmVhc29ucy5sZW5ndGggPSAwO1xuICAgIHVuaGFuZGxlZFJlamVjdGlvbnMubGVuZ3RoID0gMDtcblxuICAgIGlmICghdHJhY2tVbmhhbmRsZWRSZWplY3Rpb25zKSB7XG4gICAgICAgIHRyYWNrVW5oYW5kbGVkUmVqZWN0aW9ucyA9IHRydWU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB0cmFja1JlamVjdGlvbihwcm9taXNlLCByZWFzb24pIHtcbiAgICBpZiAoIXRyYWNrVW5oYW5kbGVkUmVqZWN0aW9ucykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcHJvY2Vzcy5lbWl0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgUS5uZXh0VGljay5ydW5BZnRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoYXJyYXlfaW5kZXhPZih1bmhhbmRsZWRSZWplY3Rpb25zLCBwcm9taXNlKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmVtaXQoXCJ1bmhhbmRsZWRSZWplY3Rpb25cIiwgcmVhc29uLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICByZXBvcnRlZFVuaGFuZGxlZFJlamVjdGlvbnMucHVzaChwcm9taXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdW5oYW5kbGVkUmVqZWN0aW9ucy5wdXNoKHByb21pc2UpO1xuICAgIGlmIChyZWFzb24gJiYgdHlwZW9mIHJlYXNvbi5zdGFjayAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICB1bmhhbmRsZWRSZWFzb25zLnB1c2gocmVhc29uLnN0YWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB1bmhhbmRsZWRSZWFzb25zLnB1c2goXCIobm8gc3RhY2spIFwiICsgcmVhc29uKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVudHJhY2tSZWplY3Rpb24ocHJvbWlzZSkge1xuICAgIGlmICghdHJhY2tVbmhhbmRsZWRSZWplY3Rpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgYXQgPSBhcnJheV9pbmRleE9mKHVuaGFuZGxlZFJlamVjdGlvbnMsIHByb21pc2UpO1xuICAgIGlmIChhdCAhPT0gLTEpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBwcm9jZXNzLmVtaXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgUS5uZXh0VGljay5ydW5BZnRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF0UmVwb3J0ID0gYXJyYXlfaW5kZXhPZihyZXBvcnRlZFVuaGFuZGxlZFJlamVjdGlvbnMsIHByb21pc2UpO1xuICAgICAgICAgICAgICAgIGlmIChhdFJlcG9ydCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbWl0KFwicmVqZWN0aW9uSGFuZGxlZFwiLCB1bmhhbmRsZWRSZWFzb25zW2F0XSwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydGVkVW5oYW5kbGVkUmVqZWN0aW9ucy5zcGxpY2UoYXRSZXBvcnQsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHVuaGFuZGxlZFJlamVjdGlvbnMuc3BsaWNlKGF0LCAxKTtcbiAgICAgICAgdW5oYW5kbGVkUmVhc29ucy5zcGxpY2UoYXQsIDEpO1xuICAgIH1cbn1cblxuUS5yZXNldFVuaGFuZGxlZFJlamVjdGlvbnMgPSByZXNldFVuaGFuZGxlZFJlamVjdGlvbnM7XG5cblEuZ2V0VW5oYW5kbGVkUmVhc29ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBNYWtlIGEgY29weSBzbyB0aGF0IGNvbnN1bWVycyBjYW4ndCBpbnRlcmZlcmUgd2l0aCBvdXIgaW50ZXJuYWwgc3RhdGUuXG4gICAgcmV0dXJuIHVuaGFuZGxlZFJlYXNvbnMuc2xpY2UoKTtcbn07XG5cblEuc3RvcFVuaGFuZGxlZFJlamVjdGlvblRyYWNraW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJlc2V0VW5oYW5kbGVkUmVqZWN0aW9ucygpO1xuICAgIHRyYWNrVW5oYW5kbGVkUmVqZWN0aW9ucyA9IGZhbHNlO1xufTtcblxucmVzZXRVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG5cbi8vLy8gRU5EIFVOSEFORExFRCBSRUpFQ1RJT04gVFJBQ0tJTkdcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgcmVqZWN0ZWQgcHJvbWlzZS5cbiAqIEBwYXJhbSByZWFzb24gdmFsdWUgZGVzY3JpYmluZyB0aGUgZmFpbHVyZVxuICovXG5RLnJlamVjdCA9IHJlamVjdDtcbmZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcbiAgICB2YXIgcmVqZWN0aW9uID0gUHJvbWlzZSh7XG4gICAgICAgIFwid2hlblwiOiBmdW5jdGlvbiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICAgIC8vIG5vdGUgdGhhdCB0aGUgZXJyb3IgaGFzIGJlZW4gaGFuZGxlZFxuICAgICAgICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdW50cmFja1JlamVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWplY3RlZCA/IHJlamVjdGVkKHJlYXNvbikgOiB0aGlzO1xuICAgICAgICB9XG4gICAgfSwgZnVuY3Rpb24gZmFsbGJhY2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sIGZ1bmN0aW9uIGluc3BlY3QoKSB7XG4gICAgICAgIHJldHVybiB7IHN0YXRlOiBcInJlamVjdGVkXCIsIHJlYXNvbjogcmVhc29uIH07XG4gICAgfSk7XG5cbiAgICAvLyBOb3RlIHRoYXQgdGhlIHJlYXNvbiBoYXMgbm90IGJlZW4gaGFuZGxlZC5cbiAgICB0cmFja1JlamVjdGlvbihyZWplY3Rpb24sIHJlYXNvbik7XG5cbiAgICByZXR1cm4gcmVqZWN0aW9uO1xufVxuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBmdWxmaWxsZWQgcHJvbWlzZSBmb3IgYW4gaW1tZWRpYXRlIHJlZmVyZW5jZS5cbiAqIEBwYXJhbSB2YWx1ZSBpbW1lZGlhdGUgcmVmZXJlbmNlXG4gKi9cblEuZnVsZmlsbCA9IGZ1bGZpbGw7XG5mdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7XG4gICAgcmV0dXJuIFByb21pc2Uoe1xuICAgICAgICBcIndoZW5cIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlW25hbWVdO1xuICAgICAgICB9LFxuICAgICAgICBcInNldFwiOiBmdW5jdGlvbiAobmFtZSwgcmhzKSB7XG4gICAgICAgICAgICB2YWx1ZVtuYW1lXSA9IHJocztcbiAgICAgICAgfSxcbiAgICAgICAgXCJkZWxldGVcIjogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZVtuYW1lXTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJwb3N0XCI6IGZ1bmN0aW9uIChuYW1lLCBhcmdzKSB7XG4gICAgICAgICAgICAvLyBNYXJrIE1pbGxlciBwcm9wb3NlcyB0aGF0IHBvc3Qgd2l0aCBubyBuYW1lIHNob3VsZCBhcHBseSBhXG4gICAgICAgICAgICAvLyBwcm9taXNlZCBmdW5jdGlvbi5cbiAgICAgICAgICAgIGlmIChuYW1lID09PSBudWxsIHx8IG5hbWUgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVbbmFtZV0uYXBwbHkodmFsdWUsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImFwcGx5XCI6IGZ1bmN0aW9uICh0aGlzcCwgYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmFwcGx5KHRoaXNwLCBhcmdzKTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJrZXlzXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Rfa2V5cyh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9LCB2b2lkIDAsIGZ1bmN0aW9uIGluc3BlY3QoKSB7XG4gICAgICAgIHJldHVybiB7IHN0YXRlOiBcImZ1bGZpbGxlZFwiLCB2YWx1ZTogdmFsdWUgfTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGVuYWJsZXMgdG8gUSBwcm9taXNlcy5cbiAqIEBwYXJhbSBwcm9taXNlIHRoZW5hYmxlIHByb21pc2VcbiAqIEByZXR1cm5zIGEgUSBwcm9taXNlXG4gKi9cbmZ1bmN0aW9uIGNvZXJjZShwcm9taXNlKSB7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHByb21pc2UudGhlbihkZWZlcnJlZC5yZXNvbHZlLCBkZWZlcnJlZC5yZWplY3QsIGRlZmVycmVkLm5vdGlmeSk7XG4gICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBBbm5vdGF0ZXMgYW4gb2JqZWN0IHN1Y2ggdGhhdCBpdCB3aWxsIG5ldmVyIGJlXG4gKiB0cmFuc2ZlcnJlZCBhd2F5IGZyb20gdGhpcyBwcm9jZXNzIG92ZXIgYW55IHByb21pc2VcbiAqIGNvbW11bmljYXRpb24gY2hhbm5lbC5cbiAqIEBwYXJhbSBvYmplY3RcbiAqIEByZXR1cm5zIHByb21pc2UgYSB3cmFwcGluZyBvZiB0aGF0IG9iamVjdCB0aGF0XG4gKiBhZGRpdGlvbmFsbHkgcmVzcG9uZHMgdG8gdGhlIFwiaXNEZWZcIiBtZXNzYWdlXG4gKiB3aXRob3V0IGEgcmVqZWN0aW9uLlxuICovXG5RLm1hc3RlciA9IG1hc3RlcjtcbmZ1bmN0aW9uIG1hc3RlcihvYmplY3QpIHtcbiAgICByZXR1cm4gUHJvbWlzZSh7XG4gICAgICAgIFwiaXNEZWZcIjogZnVuY3Rpb24gKCkge31cbiAgICB9LCBmdW5jdGlvbiBmYWxsYmFjayhvcCwgYXJncykge1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2gob2JqZWN0LCBvcCwgYXJncyk7XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gUShvYmplY3QpLmluc3BlY3QoKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBTcHJlYWRzIHRoZSB2YWx1ZXMgb2YgYSBwcm9taXNlZCBhcnJheSBvZiBhcmd1bWVudHMgaW50byB0aGVcbiAqIGZ1bGZpbGxtZW50IGNhbGxiYWNrLlxuICogQHBhcmFtIGZ1bGZpbGxlZCBjYWxsYmFjayB0aGF0IHJlY2VpdmVzIHZhcmlhZGljIGFyZ3VtZW50cyBmcm9tIHRoZVxuICogcHJvbWlzZWQgYXJyYXlcbiAqIEBwYXJhbSByZWplY3RlZCBjYWxsYmFjayB0aGF0IHJlY2VpdmVzIHRoZSBleGNlcHRpb24gaWYgdGhlIHByb21pc2VcbiAqIGlzIHJlamVjdGVkLlxuICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlIG9yIHRocm93biBleGNlcHRpb24gb2ZcbiAqIGVpdGhlciBjYWxsYmFjay5cbiAqL1xuUS5zcHJlYWQgPSBzcHJlYWQ7XG5mdW5jdGlvbiBzcHJlYWQodmFsdWUsIGZ1bGZpbGxlZCwgcmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gUSh2YWx1ZSkuc3ByZWFkKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5zcHJlYWQgPSBmdW5jdGlvbiAoZnVsZmlsbGVkLCByZWplY3RlZCkge1xuICAgIHJldHVybiB0aGlzLmFsbCgpLnRoZW4oZnVuY3Rpb24gKGFycmF5KSB7XG4gICAgICAgIHJldHVybiBmdWxmaWxsZWQuYXBwbHkodm9pZCAwLCBhcnJheSk7XG4gICAgfSwgcmVqZWN0ZWQpO1xufTtcblxuLyoqXG4gKiBUaGUgYXN5bmMgZnVuY3Rpb24gaXMgYSBkZWNvcmF0b3IgZm9yIGdlbmVyYXRvciBmdW5jdGlvbnMsIHR1cm5pbmdcbiAqIHRoZW0gaW50byBhc3luY2hyb25vdXMgZ2VuZXJhdG9ycy4gIEFsdGhvdWdoIGdlbmVyYXRvcnMgYXJlIG9ubHkgcGFydFxuICogb2YgdGhlIG5ld2VzdCBFQ01BU2NyaXB0IDYgZHJhZnRzLCB0aGlzIGNvZGUgZG9lcyBub3QgY2F1c2Ugc3ludGF4XG4gKiBlcnJvcnMgaW4gb2xkZXIgZW5naW5lcy4gIFRoaXMgY29kZSBzaG91bGQgY29udGludWUgdG8gd29yayBhbmQgd2lsbFxuICogaW4gZmFjdCBpbXByb3ZlIG92ZXIgdGltZSBhcyB0aGUgbGFuZ3VhZ2UgaW1wcm92ZXMuXG4gKlxuICogRVM2IGdlbmVyYXRvcnMgYXJlIGN1cnJlbnRseSBwYXJ0IG9mIFY4IHZlcnNpb24gMy4xOSB3aXRoIHRoZVxuICogLS1oYXJtb255LWdlbmVyYXRvcnMgcnVudGltZSBmbGFnIGVuYWJsZWQuICBTcGlkZXJNb25rZXkgaGFzIGhhZCB0aGVtXG4gKiBmb3IgbG9uZ2VyLCBidXQgdW5kZXIgYW4gb2xkZXIgUHl0aG9uLWluc3BpcmVkIGZvcm0uICBUaGlzIGZ1bmN0aW9uXG4gKiB3b3JrcyBvbiBib3RoIGtpbmRzIG9mIGdlbmVyYXRvcnMuXG4gKlxuICogRGVjb3JhdGVzIGEgZ2VuZXJhdG9yIGZ1bmN0aW9uIHN1Y2ggdGhhdDpcbiAqICAtIGl0IG1heSB5aWVsZCBwcm9taXNlc1xuICogIC0gZXhlY3V0aW9uIHdpbGwgY29udGludWUgd2hlbiB0aGF0IHByb21pc2UgaXMgZnVsZmlsbGVkXG4gKiAgLSB0aGUgdmFsdWUgb2YgdGhlIHlpZWxkIGV4cHJlc3Npb24gd2lsbCBiZSB0aGUgZnVsZmlsbGVkIHZhbHVlXG4gKiAgLSBpdCByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHJldHVybiB2YWx1ZSAod2hlbiB0aGUgZ2VuZXJhdG9yXG4gKiAgICBzdG9wcyBpdGVyYXRpbmcpXG4gKiAgLSB0aGUgZGVjb3JhdGVkIGZ1bmN0aW9uIHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlXG4gKiAgICBvZiB0aGUgZ2VuZXJhdG9yIG9yIHRoZSBmaXJzdCByZWplY3RlZCBwcm9taXNlIGFtb25nIHRob3NlXG4gKiAgICB5aWVsZGVkLlxuICogIC0gaWYgYW4gZXJyb3IgaXMgdGhyb3duIGluIHRoZSBnZW5lcmF0b3IsIGl0IHByb3BhZ2F0ZXMgdGhyb3VnaFxuICogICAgZXZlcnkgZm9sbG93aW5nIHlpZWxkIHVudGlsIGl0IGlzIGNhdWdodCwgb3IgdW50aWwgaXQgZXNjYXBlc1xuICogICAgdGhlIGdlbmVyYXRvciBmdW5jdGlvbiBhbHRvZ2V0aGVyLCBhbmQgaXMgdHJhbnNsYXRlZCBpbnRvIGFcbiAqICAgIHJlamVjdGlvbiBmb3IgdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhlIGRlY29yYXRlZCBnZW5lcmF0b3IuXG4gKi9cblEuYXN5bmMgPSBhc3luYztcbmZ1bmN0aW9uIGFzeW5jKG1ha2VHZW5lcmF0b3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyB3aGVuIHZlcmIgaXMgXCJzZW5kXCIsIGFyZyBpcyBhIHZhbHVlXG4gICAgICAgIC8vIHdoZW4gdmVyYiBpcyBcInRocm93XCIsIGFyZyBpcyBhbiBleGNlcHRpb25cbiAgICAgICAgZnVuY3Rpb24gY29udGludWVyKHZlcmIsIGFyZykge1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcblxuICAgICAgICAgICAgLy8gVW50aWwgVjggMy4xOSAvIENocm9taXVtIDI5IGlzIHJlbGVhc2VkLCBTcGlkZXJNb25rZXkgaXMgdGhlIG9ubHlcbiAgICAgICAgICAgIC8vIGVuZ2luZSB0aGF0IGhhcyBhIGRlcGxveWVkIGJhc2Ugb2YgYnJvd3NlcnMgdGhhdCBzdXBwb3J0IGdlbmVyYXRvcnMuXG4gICAgICAgICAgICAvLyBIb3dldmVyLCBTTSdzIGdlbmVyYXRvcnMgdXNlIHRoZSBQeXRob24taW5zcGlyZWQgc2VtYW50aWNzIG9mXG4gICAgICAgICAgICAvLyBvdXRkYXRlZCBFUzYgZHJhZnRzLiAgV2Ugd291bGQgbGlrZSB0byBzdXBwb3J0IEVTNiwgYnV0IHdlJ2QgYWxzb1xuICAgICAgICAgICAgLy8gbGlrZSB0byBtYWtlIGl0IHBvc3NpYmxlIHRvIHVzZSBnZW5lcmF0b3JzIGluIGRlcGxveWVkIGJyb3dzZXJzLCBzb1xuICAgICAgICAgICAgLy8gd2UgYWxzbyBzdXBwb3J0IFB5dGhvbi1zdHlsZSBnZW5lcmF0b3JzLiAgQXQgc29tZSBwb2ludCB3ZSBjYW4gcmVtb3ZlXG4gICAgICAgICAgICAvLyB0aGlzIGJsb2NrLlxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIFN0b3BJdGVyYXRpb24gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBFUzYgR2VuZXJhdG9yc1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGdlbmVyYXRvclt2ZXJiXShhcmcpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aGVuKHJlc3VsdC52YWx1ZSwgY2FsbGJhY2ssIGVycmJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU3BpZGVyTW9ua2V5IEdlbmVyYXRvcnNcbiAgICAgICAgICAgICAgICAvLyBGSVhNRTogUmVtb3ZlIHRoaXMgY2FzZSB3aGVuIFNNIGRvZXMgRVM2IGdlbmVyYXRvcnMuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZ2VuZXJhdG9yW3ZlcmJdKGFyZyk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1N0b3BJdGVyYXRpb24oZXhjZXB0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFEoZXhjZXB0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXhjZXB0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gd2hlbihyZXN1bHQsIGNhbGxiYWNrLCBlcnJiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgZ2VuZXJhdG9yID0gbWFrZUdlbmVyYXRvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBjb250aW51ZXIuYmluZChjb250aW51ZXIsIFwibmV4dFwiKTtcbiAgICAgICAgdmFyIGVycmJhY2sgPSBjb250aW51ZXIuYmluZChjb250aW51ZXIsIFwidGhyb3dcIik7XG4gICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgIH07XG59XG5cbi8qKlxuICogVGhlIHNwYXduIGZ1bmN0aW9uIGlzIGEgc21hbGwgd3JhcHBlciBhcm91bmQgYXN5bmMgdGhhdCBpbW1lZGlhdGVseVxuICogY2FsbHMgdGhlIGdlbmVyYXRvciBhbmQgYWxzbyBlbmRzIHRoZSBwcm9taXNlIGNoYWluLCBzbyB0aGF0IGFueVxuICogdW5oYW5kbGVkIGVycm9ycyBhcmUgdGhyb3duIGluc3RlYWQgb2YgZm9yd2FyZGVkIHRvIHRoZSBlcnJvclxuICogaGFuZGxlci4gVGhpcyBpcyB1c2VmdWwgYmVjYXVzZSBpdCdzIGV4dHJlbWVseSBjb21tb24gdG8gcnVuXG4gKiBnZW5lcmF0b3JzIGF0IHRoZSB0b3AtbGV2ZWwgdG8gd29yayB3aXRoIGxpYnJhcmllcy5cbiAqL1xuUS5zcGF3biA9IHNwYXduO1xuZnVuY3Rpb24gc3Bhd24obWFrZUdlbmVyYXRvcikge1xuICAgIFEuZG9uZShRLmFzeW5jKG1ha2VHZW5lcmF0b3IpKCkpO1xufVxuXG4vLyBGSVhNRTogUmVtb3ZlIHRoaXMgaW50ZXJmYWNlIG9uY2UgRVM2IGdlbmVyYXRvcnMgYXJlIGluIFNwaWRlck1vbmtleS5cbi8qKlxuICogVGhyb3dzIGEgUmV0dXJuVmFsdWUgZXhjZXB0aW9uIHRvIHN0b3AgYW4gYXN5bmNocm9ub3VzIGdlbmVyYXRvci5cbiAqXG4gKiBUaGlzIGludGVyZmFjZSBpcyBhIHN0b3AtZ2FwIG1lYXN1cmUgdG8gc3VwcG9ydCBnZW5lcmF0b3IgcmV0dXJuXG4gKiB2YWx1ZXMgaW4gb2xkZXIgRmlyZWZveC9TcGlkZXJNb25rZXkuICBJbiBicm93c2VycyB0aGF0IHN1cHBvcnQgRVM2XG4gKiBnZW5lcmF0b3JzIGxpa2UgQ2hyb21pdW0gMjksIGp1c3QgdXNlIFwicmV0dXJuXCIgaW4geW91ciBnZW5lcmF0b3JcbiAqIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgdGhlIHJldHVybiB2YWx1ZSBmb3IgdGhlIHN1cnJvdW5kaW5nIGdlbmVyYXRvclxuICogQHRocm93cyBSZXR1cm5WYWx1ZSBleGNlcHRpb24gd2l0aCB0aGUgdmFsdWUuXG4gKiBAZXhhbXBsZVxuICogLy8gRVM2IHN0eWxlXG4gKiBRLmFzeW5jKGZ1bmN0aW9uKiAoKSB7XG4gKiAgICAgIHZhciBmb28gPSB5aWVsZCBnZXRGb29Qcm9taXNlKCk7XG4gKiAgICAgIHZhciBiYXIgPSB5aWVsZCBnZXRCYXJQcm9taXNlKCk7XG4gKiAgICAgIHJldHVybiBmb28gKyBiYXI7XG4gKiB9KVxuICogLy8gT2xkZXIgU3BpZGVyTW9ua2V5IHN0eWxlXG4gKiBRLmFzeW5jKGZ1bmN0aW9uICgpIHtcbiAqICAgICAgdmFyIGZvbyA9IHlpZWxkIGdldEZvb1Byb21pc2UoKTtcbiAqICAgICAgdmFyIGJhciA9IHlpZWxkIGdldEJhclByb21pc2UoKTtcbiAqICAgICAgUS5yZXR1cm4oZm9vICsgYmFyKTtcbiAqIH0pXG4gKi9cblFbXCJyZXR1cm5cIl0gPSBfcmV0dXJuO1xuZnVuY3Rpb24gX3JldHVybih2YWx1ZSkge1xuICAgIHRocm93IG5ldyBRUmV0dXJuVmFsdWUodmFsdWUpO1xufVxuXG4vKipcbiAqIFRoZSBwcm9taXNlZCBmdW5jdGlvbiBkZWNvcmF0b3IgZW5zdXJlcyB0aGF0IGFueSBwcm9taXNlIGFyZ3VtZW50c1xuICogYXJlIHNldHRsZWQgYW5kIHBhc3NlZCBhcyB2YWx1ZXMgKGB0aGlzYCBpcyBhbHNvIHNldHRsZWQgYW5kIHBhc3NlZFxuICogYXMgYSB2YWx1ZSkuICBJdCB3aWxsIGFsc28gZW5zdXJlIHRoYXQgdGhlIHJlc3VsdCBvZiBhIGZ1bmN0aW9uIGlzXG4gKiBhbHdheXMgYSBwcm9taXNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgYWRkID0gUS5wcm9taXNlZChmdW5jdGlvbiAoYSwgYikge1xuICogICAgIHJldHVybiBhICsgYjtcbiAqIH0pO1xuICogYWRkKFEoYSksIFEoQikpO1xuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0byBkZWNvcmF0ZVxuICogQHJldHVybnMge2Z1bmN0aW9ufSBhIGZ1bmN0aW9uIHRoYXQgaGFzIGJlZW4gZGVjb3JhdGVkLlxuICovXG5RLnByb21pc2VkID0gcHJvbWlzZWQ7XG5mdW5jdGlvbiBwcm9taXNlZChjYWxsYmFjaykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzcHJlYWQoW3RoaXMsIGFsbChhcmd1bWVudHMpXSwgZnVuY3Rpb24gKHNlbGYsIGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBzZW5kcyBhIG1lc3NhZ2UgdG8gYSB2YWx1ZSBpbiBhIGZ1dHVyZSB0dXJuXG4gKiBAcGFyYW0gb2JqZWN0KiB0aGUgcmVjaXBpZW50XG4gKiBAcGFyYW0gb3AgdGhlIG5hbWUgb2YgdGhlIG1lc3NhZ2Ugb3BlcmF0aW9uLCBlLmcuLCBcIndoZW5cIixcbiAqIEBwYXJhbSBhcmdzIGZ1cnRoZXIgYXJndW1lbnRzIHRvIGJlIGZvcndhcmRlZCB0byB0aGUgb3BlcmF0aW9uXG4gKiBAcmV0dXJucyByZXN1bHQge1Byb21pc2V9IGEgcHJvbWlzZSBmb3IgdGhlIHJlc3VsdCBvZiB0aGUgb3BlcmF0aW9uXG4gKi9cblEuZGlzcGF0Y2ggPSBkaXNwYXRjaDtcbmZ1bmN0aW9uIGRpc3BhdGNoKG9iamVjdCwgb3AsIGFyZ3MpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKG9wLCBhcmdzKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAob3AsIGFyZ3MpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5wcm9taXNlRGlzcGF0Y2goZGVmZXJyZWQucmVzb2x2ZSwgb3AsIGFyZ3MpO1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSB2YWx1ZSBvZiBhIHByb3BlcnR5IGluIGEgZnV0dXJlIHR1cm4uXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IG9iamVjdFxuICogQHBhcmFtIG5hbWUgICAgICBuYW1lIG9mIHByb3BlcnR5IHRvIGdldFxuICogQHJldHVybiBwcm9taXNlIGZvciB0aGUgcHJvcGVydHkgdmFsdWVcbiAqL1xuUS5nZXQgPSBmdW5jdGlvbiAob2JqZWN0LCBrZXkpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKFwiZ2V0XCIsIFtrZXldKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcImdldFwiLCBba2V5XSk7XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciBvYmplY3Qgb2JqZWN0XG4gKiBAcGFyYW0gbmFtZSAgICAgIG5hbWUgb2YgcHJvcGVydHkgdG8gc2V0XG4gKiBAcGFyYW0gdmFsdWUgICAgIG5ldyB2YWx1ZSBvZiBwcm9wZXJ0eVxuICogQHJldHVybiBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlXG4gKi9cblEuc2V0ID0gZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2goXCJzZXRcIiwgW2tleSwgdmFsdWVdKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJzZXRcIiwgW2tleSwgdmFsdWVdKTtcbn07XG5cbi8qKlxuICogRGVsZXRlcyBhIHByb3BlcnR5IGluIGEgZnV0dXJlIHR1cm4uXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IG9iamVjdFxuICogQHBhcmFtIG5hbWUgICAgICBuYW1lIG9mIHByb3BlcnR5IHRvIGRlbGV0ZVxuICogQHJldHVybiBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlXG4gKi9cblEuZGVsID0gLy8gWFhYIGxlZ2FjeVxuUVtcImRlbGV0ZVwiXSA9IGZ1bmN0aW9uIChvYmplY3QsIGtleSkge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2goXCJkZWxldGVcIiwgW2tleV0pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZGVsID0gLy8gWFhYIGxlZ2FjeVxuUHJvbWlzZS5wcm90b3R5cGVbXCJkZWxldGVcIl0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJkZWxldGVcIiwgW2tleV0pO1xufTtcblxuLyoqXG4gKiBJbnZva2VzIGEgbWV0aG9kIGluIGEgZnV0dXJlIHR1cm4uXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IG9iamVjdFxuICogQHBhcmFtIG5hbWUgICAgICBuYW1lIG9mIG1ldGhvZCB0byBpbnZva2VcbiAqIEBwYXJhbSB2YWx1ZSAgICAgYSB2YWx1ZSB0byBwb3N0LCB0eXBpY2FsbHkgYW4gYXJyYXkgb2ZcbiAqICAgICAgICAgICAgICAgICAgaW52b2NhdGlvbiBhcmd1bWVudHMgZm9yIHByb21pc2VzIHRoYXRcbiAqICAgICAgICAgICAgICAgICAgYXJlIHVsdGltYXRlbHkgYmFja2VkIHdpdGggYHJlc29sdmVgIHZhbHVlcyxcbiAqICAgICAgICAgICAgICAgICAgYXMgb3Bwb3NlZCB0byB0aG9zZSBiYWNrZWQgd2l0aCBVUkxzXG4gKiAgICAgICAgICAgICAgICAgIHdoZXJlaW4gdGhlIHBvc3RlZCB2YWx1ZSBjYW4gYmUgYW55XG4gKiAgICAgICAgICAgICAgICAgIEpTT04gc2VyaWFsaXphYmxlIG9iamVjdC5cbiAqIEByZXR1cm4gcHJvbWlzZSBmb3IgdGhlIHJldHVybiB2YWx1ZVxuICovXG4vLyBib3VuZCBsb2NhbGx5IGJlY2F1c2UgaXQgaXMgdXNlZCBieSBvdGhlciBtZXRob2RzXG5RLm1hcHBseSA9IC8vIFhYWCBBcyBwcm9wb3NlZCBieSBcIlJlZHNhbmRyb1wiXG5RLnBvc3QgPSBmdW5jdGlvbiAob2JqZWN0LCBuYW1lLCBhcmdzKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIGFyZ3NdKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm1hcHBseSA9IC8vIFhYWCBBcyBwcm9wb3NlZCBieSBcIlJlZHNhbmRyb1wiXG5Qcm9taXNlLnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKG5hbWUsIGFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIGFyZ3NdKTtcbn07XG5cbi8qKlxuICogSW52b2tlcyBhIG1ldGhvZCBpbiBhIGZ1dHVyZSB0dXJuLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIHRhcmdldCBvYmplY3RcbiAqIEBwYXJhbSBuYW1lICAgICAgbmFtZSBvZiBtZXRob2QgdG8gaW52b2tlXG4gKiBAcGFyYW0gLi4uYXJncyAgIGFycmF5IG9mIGludm9jYXRpb24gYXJndW1lbnRzXG4gKiBAcmV0dXJuIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWVcbiAqL1xuUS5zZW5kID0gLy8gWFhYIE1hcmsgTWlsbGVyJ3MgcHJvcG9zZWQgcGFybGFuY2VcblEubWNhbGwgPSAvLyBYWFggQXMgcHJvcG9zZWQgYnkgXCJSZWRzYW5kcm9cIlxuUS5pbnZva2UgPSBmdW5jdGlvbiAob2JqZWN0LCBuYW1lIC8qLi4uYXJncyovKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMildKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnNlbmQgPSAvLyBYWFggTWFyayBNaWxsZXIncyBwcm9wb3NlZCBwYXJsYW5jZVxuUHJvbWlzZS5wcm90b3R5cGUubWNhbGwgPSAvLyBYWFggQXMgcHJvcG9zZWQgYnkgXCJSZWRzYW5kcm9cIlxuUHJvbWlzZS5wcm90b3R5cGUuaW52b2tlID0gZnVuY3Rpb24gKG5hbWUgLyouLi5hcmdzKi8pIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMSldKTtcbn07XG5cbi8qKlxuICogQXBwbGllcyB0aGUgcHJvbWlzZWQgZnVuY3Rpb24gaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciB0YXJnZXQgZnVuY3Rpb25cbiAqIEBwYXJhbSBhcmdzICAgICAgYXJyYXkgb2YgYXBwbGljYXRpb24gYXJndW1lbnRzXG4gKi9cblEuZmFwcGx5ID0gZnVuY3Rpb24gKG9iamVjdCwgYXJncykge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2goXCJhcHBseVwiLCBbdm9pZCAwLCBhcmdzXSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5mYXBwbHkgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKFwiYXBwbHlcIiwgW3ZvaWQgMCwgYXJnc10pO1xufTtcblxuLyoqXG4gKiBDYWxscyB0aGUgcHJvbWlzZWQgZnVuY3Rpb24gaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciB0YXJnZXQgZnVuY3Rpb25cbiAqIEBwYXJhbSAuLi5hcmdzICAgYXJyYXkgb2YgYXBwbGljYXRpb24gYXJndW1lbnRzXG4gKi9cblFbXCJ0cnlcIl0gPVxuUS5mY2FsbCA9IGZ1bmN0aW9uIChvYmplY3QgLyogLi4uYXJncyovKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcImFwcGx5XCIsIFt2b2lkIDAsIGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMSldKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmZjYWxsID0gZnVuY3Rpb24gKC8qLi4uYXJncyovKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJhcHBseVwiLCBbdm9pZCAwLCBhcnJheV9zbGljZShhcmd1bWVudHMpXSk7XG59O1xuXG4vKipcbiAqIEJpbmRzIHRoZSBwcm9taXNlZCBmdW5jdGlvbiwgdHJhbnNmb3JtaW5nIHJldHVybiB2YWx1ZXMgaW50byBhIGZ1bGZpbGxlZFxuICogcHJvbWlzZSBhbmQgdGhyb3duIGVycm9ycyBpbnRvIGEgcmVqZWN0ZWQgb25lLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIHRhcmdldCBmdW5jdGlvblxuICogQHBhcmFtIC4uLmFyZ3MgICBhcnJheSBvZiBhcHBsaWNhdGlvbiBhcmd1bWVudHNcbiAqL1xuUS5mYmluZCA9IGZ1bmN0aW9uIChvYmplY3QgLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgcHJvbWlzZSA9IFEob2JqZWN0KTtcbiAgICB2YXIgYXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGZib3VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2UuZGlzcGF0Y2goXCJhcHBseVwiLCBbXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgYXJncy5jb25jYXQoYXJyYXlfc2xpY2UoYXJndW1lbnRzKSlcbiAgICAgICAgXSk7XG4gICAgfTtcbn07XG5Qcm9taXNlLnByb3RvdHlwZS5mYmluZCA9IGZ1bmN0aW9uICgvKi4uLmFyZ3MqLykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB2YXIgYXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGZib3VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2UuZGlzcGF0Y2goXCJhcHBseVwiLCBbXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgYXJncy5jb25jYXQoYXJyYXlfc2xpY2UoYXJndW1lbnRzKSlcbiAgICAgICAgXSk7XG4gICAgfTtcbn07XG5cbi8qKlxuICogUmVxdWVzdHMgdGhlIG5hbWVzIG9mIHRoZSBvd25lZCBwcm9wZXJ0aWVzIG9mIGEgcHJvbWlzZWRcbiAqIG9iamVjdCBpbiBhIGZ1dHVyZSB0dXJuLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIHRhcmdldCBvYmplY3RcbiAqIEByZXR1cm4gcHJvbWlzZSBmb3IgdGhlIGtleXMgb2YgdGhlIGV2ZW50dWFsbHkgc2V0dGxlZCBvYmplY3RcbiAqL1xuUS5rZXlzID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2goXCJrZXlzXCIsIFtdKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJrZXlzXCIsIFtdKTtcbn07XG5cbi8qKlxuICogVHVybnMgYW4gYXJyYXkgb2YgcHJvbWlzZXMgaW50byBhIHByb21pc2UgZm9yIGFuIGFycmF5LiAgSWYgYW55IG9mXG4gKiB0aGUgcHJvbWlzZXMgZ2V0cyByZWplY3RlZCwgdGhlIHdob2xlIGFycmF5IGlzIHJlamVjdGVkIGltbWVkaWF0ZWx5LlxuICogQHBhcmFtIHtBcnJheSp9IGFuIGFycmF5IChvciBwcm9taXNlIGZvciBhbiBhcnJheSkgb2YgdmFsdWVzIChvclxuICogcHJvbWlzZXMgZm9yIHZhbHVlcylcbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgYW4gYXJyYXkgb2YgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVzXG4gKi9cbi8vIEJ5IE1hcmsgTWlsbGVyXG4vLyBodHRwOi8vd2lraS5lY21hc2NyaXB0Lm9yZy9kb2t1LnBocD9pZD1zdHJhd21hbjpjb25jdXJyZW5jeSZyZXY9MTMwODc3NjUyMSNhbGxmdWxmaWxsZWRcblEuYWxsID0gYWxsO1xuZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIHdoZW4ocHJvbWlzZXMsIGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgICAgICB2YXIgcGVuZGluZ0NvdW50ID0gMDtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICAgICAgYXJyYXlfcmVkdWNlKHByb21pc2VzLCBmdW5jdGlvbiAodW5kZWZpbmVkLCBwcm9taXNlLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIHNuYXBzaG90O1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGlzUHJvbWlzZShwcm9taXNlKSAmJlxuICAgICAgICAgICAgICAgIChzbmFwc2hvdCA9IHByb21pc2UuaW5zcGVjdCgpKS5zdGF0ZSA9PT0gXCJmdWxmaWxsZWRcIlxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXNbaW5kZXhdID0gc25hcHNob3QudmFsdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICsrcGVuZGluZ0NvdW50O1xuICAgICAgICAgICAgICAgIHdoZW4oXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoLS1wZW5kaW5nQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHByb21pc2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAocHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLm5vdGlmeSh7IGluZGV4OiBpbmRleCwgdmFsdWU6IHByb2dyZXNzIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdm9pZCAwKTtcbiAgICAgICAgaWYgKHBlbmRpbmdDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShwcm9taXNlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfSk7XG59XG5cblByb21pc2UucHJvdG90eXBlLmFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYWxsKHRoaXMpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBmaXJzdCByZXNvbHZlZCBwcm9taXNlIG9mIGFuIGFycmF5LiBQcmlvciByZWplY3RlZCBwcm9taXNlcyBhcmVcbiAqIGlnbm9yZWQuICBSZWplY3RzIG9ubHkgaWYgYWxsIHByb21pc2VzIGFyZSByZWplY3RlZC5cbiAqIEBwYXJhbSB7QXJyYXkqfSBhbiBhcnJheSBjb250YWluaW5nIHZhbHVlcyBvciBwcm9taXNlcyBmb3IgdmFsdWVzXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZnVsZmlsbGVkIHdpdGggdGhlIHZhbHVlIG9mIHRoZSBmaXJzdCByZXNvbHZlZCBwcm9taXNlLFxuICogb3IgYSByZWplY3RlZCBwcm9taXNlIGlmIGFsbCBwcm9taXNlcyBhcmUgcmVqZWN0ZWQuXG4gKi9cblEuYW55ID0gYW55O1xuXG5mdW5jdGlvbiBhbnkocHJvbWlzZXMpIHtcbiAgICBpZiAocHJvbWlzZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBRLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICB2YXIgZGVmZXJyZWQgPSBRLmRlZmVyKCk7XG4gICAgdmFyIHBlbmRpbmdDb3VudCA9IDA7XG4gICAgYXJyYXlfcmVkdWNlKHByb21pc2VzLCBmdW5jdGlvbiAocHJldiwgY3VycmVudCwgaW5kZXgpIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSBwcm9taXNlc1tpbmRleF07XG5cbiAgICAgICAgcGVuZGluZ0NvdW50Kys7XG5cbiAgICAgICAgd2hlbihwcm9taXNlLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgb25Qcm9ncmVzcyk7XG4gICAgICAgIGZ1bmN0aW9uIG9uRnVsZmlsbGVkKHJlc3VsdCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG9uUmVqZWN0ZWQoKSB7XG4gICAgICAgICAgICBwZW5kaW5nQ291bnQtLTtcbiAgICAgICAgICAgIGlmIChwZW5kaW5nQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QobmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICBcIkNhbid0IGdldCBmdWxmaWxsbWVudCB2YWx1ZSBmcm9tIGFueSBwcm9taXNlLCBhbGwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInByb21pc2VzIHdlcmUgcmVqZWN0ZWQuXCJcbiAgICAgICAgICAgICAgICApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBvblByb2dyZXNzKHByb2dyZXNzKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5ub3RpZnkoe1xuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogcHJvZ3Jlc3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwgdW5kZWZpbmVkKTtcblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5hbnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFueSh0aGlzKTtcbn07XG5cbi8qKlxuICogV2FpdHMgZm9yIGFsbCBwcm9taXNlcyB0byBiZSBzZXR0bGVkLCBlaXRoZXIgZnVsZmlsbGVkIG9yXG4gKiByZWplY3RlZC4gIFRoaXMgaXMgZGlzdGluY3QgZnJvbSBgYWxsYCBzaW5jZSB0aGF0IHdvdWxkIHN0b3BcbiAqIHdhaXRpbmcgYXQgdGhlIGZpcnN0IHJlamVjdGlvbi4gIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5XG4gKiBgYWxsUmVzb2x2ZWRgIHdpbGwgbmV2ZXIgYmUgcmVqZWN0ZWQuXG4gKiBAcGFyYW0gcHJvbWlzZXMgYSBwcm9taXNlIGZvciBhbiBhcnJheSAob3IgYW4gYXJyYXkpIG9mIHByb21pc2VzXG4gKiAob3IgdmFsdWVzKVxuICogQHJldHVybiBhIHByb21pc2UgZm9yIGFuIGFycmF5IG9mIHByb21pc2VzXG4gKi9cblEuYWxsUmVzb2x2ZWQgPSBkZXByZWNhdGUoYWxsUmVzb2x2ZWQsIFwiYWxsUmVzb2x2ZWRcIiwgXCJhbGxTZXR0bGVkXCIpO1xuZnVuY3Rpb24gYWxsUmVzb2x2ZWQocHJvbWlzZXMpIHtcbiAgICByZXR1cm4gd2hlbihwcm9taXNlcywgZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgICAgIHByb21pc2VzID0gYXJyYXlfbWFwKHByb21pc2VzLCBRKTtcbiAgICAgICAgcmV0dXJuIHdoZW4oYWxsKGFycmF5X21hcChwcm9taXNlcywgZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiB3aGVuKHByb21pc2UsIG5vb3AsIG5vb3ApO1xuICAgICAgICB9KSksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlcztcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cblByb21pc2UucHJvdG90eXBlLmFsbFJlc29sdmVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBhbGxSZXNvbHZlZCh0aGlzKTtcbn07XG5cbi8qKlxuICogQHNlZSBQcm9taXNlI2FsbFNldHRsZWRcbiAqL1xuUS5hbGxTZXR0bGVkID0gYWxsU2V0dGxlZDtcbmZ1bmN0aW9uIGFsbFNldHRsZWQocHJvbWlzZXMpIHtcbiAgICByZXR1cm4gUShwcm9taXNlcykuYWxsU2V0dGxlZCgpO1xufVxuXG4vKipcbiAqIFR1cm5zIGFuIGFycmF5IG9mIHByb21pc2VzIGludG8gYSBwcm9taXNlIGZvciBhbiBhcnJheSBvZiB0aGVpciBzdGF0ZXMgKGFzXG4gKiByZXR1cm5lZCBieSBgaW5zcGVjdGApIHdoZW4gdGhleSBoYXZlIGFsbCBzZXR0bGVkLlxuICogQHBhcmFtIHtBcnJheVtBbnkqXX0gdmFsdWVzIGFuIGFycmF5IChvciBwcm9taXNlIGZvciBhbiBhcnJheSkgb2YgdmFsdWVzIChvclxuICogcHJvbWlzZXMgZm9yIHZhbHVlcylcbiAqIEByZXR1cm5zIHtBcnJheVtTdGF0ZV19IGFuIGFycmF5IG9mIHN0YXRlcyBmb3IgdGhlIHJlc3BlY3RpdmUgdmFsdWVzLlxuICovXG5Qcm9taXNlLnByb3RvdHlwZS5hbGxTZXR0bGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgICAgIHJldHVybiBhbGwoYXJyYXlfbWFwKHByb21pc2VzLCBmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgICAgICAgICAgcHJvbWlzZSA9IFEocHJvbWlzZSk7XG4gICAgICAgICAgICBmdW5jdGlvbiByZWdhcmRsZXNzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlLmluc3BlY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4ocmVnYXJkbGVzcywgcmVnYXJkbGVzcyk7XG4gICAgICAgIH0pKTtcbiAgICB9KTtcbn07XG5cbi8qKlxuICogQ2FwdHVyZXMgdGhlIGZhaWx1cmUgb2YgYSBwcm9taXNlLCBnaXZpbmcgYW4gb3BvcnR1bml0eSB0byByZWNvdmVyXG4gKiB3aXRoIGEgY2FsbGJhY2suICBJZiB0aGUgZ2l2ZW4gcHJvbWlzZSBpcyBmdWxmaWxsZWQsIHRoZSByZXR1cm5lZFxuICogcHJvbWlzZSBpcyBmdWxmaWxsZWQuXG4gKiBAcGFyYW0ge0FueSp9IHByb21pc2UgZm9yIHNvbWV0aGluZ1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgdG8gZnVsZmlsbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpZiB0aGVcbiAqIGdpdmVuIHByb21pc2UgaXMgcmVqZWN0ZWRcbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgY2FsbGJhY2tcbiAqL1xuUS5mYWlsID0gLy8gWFhYIGxlZ2FjeVxuUVtcImNhdGNoXCJdID0gZnVuY3Rpb24gKG9iamVjdCwgcmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLnRoZW4odm9pZCAwLCByZWplY3RlZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5mYWlsID0gLy8gWFhYIGxlZ2FjeVxuUHJvbWlzZS5wcm90b3R5cGVbXCJjYXRjaFwiXSA9IGZ1bmN0aW9uIChyZWplY3RlZCkge1xuICAgIHJldHVybiB0aGlzLnRoZW4odm9pZCAwLCByZWplY3RlZCk7XG59O1xuXG4vKipcbiAqIEF0dGFjaGVzIGEgbGlzdGVuZXIgdGhhdCBjYW4gcmVzcG9uZCB0byBwcm9ncmVzcyBub3RpZmljYXRpb25zIGZyb20gYVxuICogcHJvbWlzZSdzIG9yaWdpbmF0aW5nIGRlZmVycmVkLiBUaGlzIGxpc3RlbmVyIHJlY2VpdmVzIHRoZSBleGFjdCBhcmd1bWVudHNcbiAqIHBhc3NlZCB0byBgYGRlZmVycmVkLm5vdGlmeWBgLlxuICogQHBhcmFtIHtBbnkqfSBwcm9taXNlIGZvciBzb21ldGhpbmdcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIHRvIHJlY2VpdmUgYW55IHByb2dyZXNzIG5vdGlmaWNhdGlvbnNcbiAqIEByZXR1cm5zIHRoZSBnaXZlbiBwcm9taXNlLCB1bmNoYW5nZWRcbiAqL1xuUS5wcm9ncmVzcyA9IHByb2dyZXNzO1xuZnVuY3Rpb24gcHJvZ3Jlc3Mob2JqZWN0LCBwcm9ncmVzc2VkKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS50aGVuKHZvaWQgMCwgdm9pZCAwLCBwcm9ncmVzc2VkKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUucHJvZ3Jlc3MgPSBmdW5jdGlvbiAocHJvZ3Jlc3NlZCkge1xuICAgIHJldHVybiB0aGlzLnRoZW4odm9pZCAwLCB2b2lkIDAsIHByb2dyZXNzZWQpO1xufTtcblxuLyoqXG4gKiBQcm92aWRlcyBhbiBvcHBvcnR1bml0eSB0byBvYnNlcnZlIHRoZSBzZXR0bGluZyBvZiBhIHByb21pc2UsXG4gKiByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIHByb21pc2UgaXMgZnVsZmlsbGVkIG9yIHJlamVjdGVkLiAgRm9yd2FyZHNcbiAqIHRoZSByZXNvbHV0aW9uIHRvIHRoZSByZXR1cm5lZCBwcm9taXNlIHdoZW4gdGhlIGNhbGxiYWNrIGlzIGRvbmUuXG4gKiBUaGUgY2FsbGJhY2sgY2FuIHJldHVybiBhIHByb21pc2UgdG8gZGVmZXIgY29tcGxldGlvbi5cbiAqIEBwYXJhbSB7QW55Kn0gcHJvbWlzZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgdG8gb2JzZXJ2ZSB0aGUgcmVzb2x1dGlvbiBvZiB0aGUgZ2l2ZW5cbiAqIHByb21pc2UsIHRha2VzIG5vIGFyZ3VtZW50cy5cbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHJlc29sdXRpb24gb2YgdGhlIGdpdmVuIHByb21pc2Ugd2hlblxuICogYGBmaW5gYCBpcyBkb25lLlxuICovXG5RLmZpbiA9IC8vIFhYWCBsZWdhY3lcblFbXCJmaW5hbGx5XCJdID0gZnVuY3Rpb24gKG9iamVjdCwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gUShvYmplY3QpW1wiZmluYWxseVwiXShjYWxsYmFjayk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5maW4gPSAvLyBYWFggbGVnYWN5XG5Qcm9taXNlLnByb3RvdHlwZVtcImZpbmFsbHlcIl0gPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICBjYWxsYmFjayA9IFEoY2FsbGJhY2spO1xuICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5mY2FsbCgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIC8vIFRPRE8gYXR0ZW1wdCB0byByZWN5Y2xlIHRoZSByZWplY3Rpb24gd2l0aCBcInRoaXNcIi5cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmZjYWxsKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBUZXJtaW5hdGVzIGEgY2hhaW4gb2YgcHJvbWlzZXMsIGZvcmNpbmcgcmVqZWN0aW9ucyB0byBiZVxuICogdGhyb3duIGFzIGV4Y2VwdGlvbnMuXG4gKiBAcGFyYW0ge0FueSp9IHByb21pc2UgYXQgdGhlIGVuZCBvZiBhIGNoYWluIG9mIHByb21pc2VzXG4gKiBAcmV0dXJucyBub3RoaW5nXG4gKi9cblEuZG9uZSA9IGZ1bmN0aW9uIChvYmplY3QsIGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIHByb2dyZXNzKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kb25lKGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIHByb2dyZXNzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRvbmUgPSBmdW5jdGlvbiAoZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3MpIHtcbiAgICB2YXIgb25VbmhhbmRsZWRFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAvLyBmb3J3YXJkIHRvIGEgZnV0dXJlIHR1cm4gc28gdGhhdCBgYHdoZW5gYFxuICAgICAgICAvLyBkb2VzIG5vdCBjYXRjaCBpdCBhbmQgdHVybiBpdCBpbnRvIGEgcmVqZWN0aW9uLlxuICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG1ha2VTdGFja1RyYWNlTG9uZyhlcnJvciwgcHJvbWlzZSk7XG4gICAgICAgICAgICBpZiAoUS5vbmVycm9yKSB7XG4gICAgICAgICAgICAgICAgUS5vbmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBBdm9pZCB1bm5lY2Vzc2FyeSBgbmV4dFRpY2tgaW5nIHZpYSBhbiB1bm5lY2Vzc2FyeSBgd2hlbmAuXG4gICAgdmFyIHByb21pc2UgPSBmdWxmaWxsZWQgfHwgcmVqZWN0ZWQgfHwgcHJvZ3Jlc3MgP1xuICAgICAgICB0aGlzLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3MpIDpcbiAgICAgICAgdGhpcztcblxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJiBwcm9jZXNzICYmIHByb2Nlc3MuZG9tYWluKSB7XG4gICAgICAgIG9uVW5oYW5kbGVkRXJyb3IgPSBwcm9jZXNzLmRvbWFpbi5iaW5kKG9uVW5oYW5kbGVkRXJyb3IpO1xuICAgIH1cblxuICAgIHByb21pc2UudGhlbih2b2lkIDAsIG9uVW5oYW5kbGVkRXJyb3IpO1xufTtcblxuLyoqXG4gKiBDYXVzZXMgYSBwcm9taXNlIHRvIGJlIHJlamVjdGVkIGlmIGl0IGRvZXMgbm90IGdldCBmdWxmaWxsZWQgYmVmb3JlXG4gKiBzb21lIG1pbGxpc2Vjb25kcyB0aW1lIG91dC5cbiAqIEBwYXJhbSB7QW55Kn0gcHJvbWlzZVxuICogQHBhcmFtIHtOdW1iZXJ9IG1pbGxpc2Vjb25kcyB0aW1lb3V0XG4gKiBAcGFyYW0ge0FueSp9IGN1c3RvbSBlcnJvciBtZXNzYWdlIG9yIEVycm9yIG9iamVjdCAob3B0aW9uYWwpXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSByZXNvbHV0aW9uIG9mIHRoZSBnaXZlbiBwcm9taXNlIGlmIGl0IGlzXG4gKiBmdWxmaWxsZWQgYmVmb3JlIHRoZSB0aW1lb3V0LCBvdGhlcndpc2UgcmVqZWN0ZWQuXG4gKi9cblEudGltZW91dCA9IGZ1bmN0aW9uIChvYmplY3QsIG1zLCBlcnJvcikge1xuICAgIHJldHVybiBRKG9iamVjdCkudGltZW91dChtcywgZXJyb3IpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGltZW91dCA9IGZ1bmN0aW9uIChtcywgZXJyb3IpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIHZhciB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFlcnJvciB8fCBcInN0cmluZ1wiID09PSB0eXBlb2YgZXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9yID0gbmV3IEVycm9yKGVycm9yIHx8IFwiVGltZWQgb3V0IGFmdGVyIFwiICsgbXMgKyBcIiBtc1wiKTtcbiAgICAgICAgICAgIGVycm9yLmNvZGUgPSBcIkVUSU1FRE9VVFwiO1xuICAgICAgICB9XG4gICAgICAgIGRlZmVycmVkLnJlamVjdChlcnJvcik7XG4gICAgfSwgbXMpO1xuXG4gICAgdGhpcy50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKGV4Y2VwdGlvbikge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgfSwgZGVmZXJyZWQubm90aWZ5KTtcblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIGdpdmVuIHZhbHVlIChvciBwcm9taXNlZCB2YWx1ZSksIHNvbWVcbiAqIG1pbGxpc2Vjb25kcyBhZnRlciBpdCByZXNvbHZlZC4gUGFzc2VzIHJlamVjdGlvbnMgaW1tZWRpYXRlbHkuXG4gKiBAcGFyYW0ge0FueSp9IHByb21pc2VcbiAqIEBwYXJhbSB7TnVtYmVyfSBtaWxsaXNlY29uZHNcbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHJlc29sdXRpb24gb2YgdGhlIGdpdmVuIHByb21pc2UgYWZ0ZXIgbWlsbGlzZWNvbmRzXG4gKiB0aW1lIGhhcyBlbGFwc2VkIHNpbmNlIHRoZSByZXNvbHV0aW9uIG9mIHRoZSBnaXZlbiBwcm9taXNlLlxuICogSWYgdGhlIGdpdmVuIHByb21pc2UgcmVqZWN0cywgdGhhdCBpcyBwYXNzZWQgaW1tZWRpYXRlbHkuXG4gKi9cblEuZGVsYXkgPSBmdW5jdGlvbiAob2JqZWN0LCB0aW1lb3V0KSB7XG4gICAgaWYgKHRpbWVvdXQgPT09IHZvaWQgMCkge1xuICAgICAgICB0aW1lb3V0ID0gb2JqZWN0O1xuICAgICAgICBvYmplY3QgPSB2b2lkIDA7XG4gICAgfVxuICAgIHJldHVybiBRKG9iamVjdCkuZGVsYXkodGltZW91dCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5kZWxheSA9IGZ1bmN0aW9uICh0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBQYXNzZXMgYSBjb250aW51YXRpb24gdG8gYSBOb2RlIGZ1bmN0aW9uLCB3aGljaCBpcyBjYWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAqIGFyZ3VtZW50cyBwcm92aWRlZCBhcyBhbiBhcnJheSwgYW5kIHJldHVybnMgYSBwcm9taXNlLlxuICpcbiAqICAgICAgUS5uZmFwcGx5KEZTLnJlYWRGaWxlLCBbX19maWxlbmFtZV0pXG4gKiAgICAgIC50aGVuKGZ1bmN0aW9uIChjb250ZW50KSB7XG4gKiAgICAgIH0pXG4gKlxuICovXG5RLm5mYXBwbHkgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFyZ3MpIHtcbiAgICByZXR1cm4gUShjYWxsYmFjaykubmZhcHBseShhcmdzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm5mYXBwbHkgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgdmFyIG5vZGVBcmdzID0gYXJyYXlfc2xpY2UoYXJncyk7XG4gICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgIHRoaXMuZmFwcGx5KG5vZGVBcmdzKS5mYWlsKGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG4vKipcbiAqIFBhc3NlcyBhIGNvbnRpbnVhdGlvbiB0byBhIE5vZGUgZnVuY3Rpb24sIHdoaWNoIGlzIGNhbGxlZCB3aXRoIHRoZSBnaXZlblxuICogYXJndW1lbnRzIHByb3ZpZGVkIGluZGl2aWR1YWxseSwgYW5kIHJldHVybnMgYSBwcm9taXNlLlxuICogQGV4YW1wbGVcbiAqIFEubmZjYWxsKEZTLnJlYWRGaWxlLCBfX2ZpbGVuYW1lKVxuICogLnRoZW4oZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAqIH0pXG4gKlxuICovXG5RLm5mY2FsbCA9IGZ1bmN0aW9uIChjYWxsYmFjayAvKi4uLmFyZ3MqLykge1xuICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAxKTtcbiAgICByZXR1cm4gUShjYWxsYmFjaykubmZhcHBseShhcmdzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm5mY2FsbCA9IGZ1bmN0aW9uICgvKi4uLmFyZ3MqLykge1xuICAgIHZhciBub2RlQXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cyk7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgdGhpcy5mYXBwbHkobm9kZUFyZ3MpLmZhaWwoZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn07XG5cbi8qKlxuICogV3JhcHMgYSBOb2RlSlMgY29udGludWF0aW9uIHBhc3NpbmcgZnVuY3Rpb24gYW5kIHJldHVybnMgYW4gZXF1aXZhbGVudFxuICogdmVyc2lvbiB0aGF0IHJldHVybnMgYSBwcm9taXNlLlxuICogQGV4YW1wbGVcbiAqIFEubmZiaW5kKEZTLnJlYWRGaWxlLCBfX2ZpbGVuYW1lKShcInV0Zi04XCIpXG4gKiAudGhlbihjb25zb2xlLmxvZylcbiAqIC5kb25lKClcbiAqL1xuUS5uZmJpbmQgPVxuUS5kZW5vZGVpZnkgPSBmdW5jdGlvbiAoY2FsbGJhY2sgLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgYmFzZUFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDEpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBub2RlQXJncyA9IGJhc2VBcmdzLmNvbmNhdChhcnJheV9zbGljZShhcmd1bWVudHMpKTtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICAgICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgICAgICBRKGNhbGxiYWNrKS5mYXBwbHkobm9kZUFyZ3MpLmZhaWwoZGVmZXJyZWQucmVqZWN0KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm5mYmluZCA9XG5Qcm9taXNlLnByb3RvdHlwZS5kZW5vZGVpZnkgPSBmdW5jdGlvbiAoLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgYXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cyk7XG4gICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgIHJldHVybiBRLmRlbm9kZWlmeS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufTtcblxuUS5uYmluZCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdGhpc3AgLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgYmFzZUFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDIpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBub2RlQXJncyA9IGJhc2VBcmdzLmNvbmNhdChhcnJheV9zbGljZShhcmd1bWVudHMpKTtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICAgICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgICAgICBmdW5jdGlvbiBib3VuZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzcCwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBRKGJvdW5kKS5mYXBwbHkobm9kZUFyZ3MpLmZhaWwoZGVmZXJyZWQucmVqZWN0KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm5iaW5kID0gZnVuY3Rpb24gKC8qdGhpc3AsIC4uLmFyZ3MqLykge1xuICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAwKTtcbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgcmV0dXJuIFEubmJpbmQuYXBwbHkodm9pZCAwLCBhcmdzKTtcbn07XG5cbi8qKlxuICogQ2FsbHMgYSBtZXRob2Qgb2YgYSBOb2RlLXN0eWxlIG9iamVjdCB0aGF0IGFjY2VwdHMgYSBOb2RlLXN0eWxlXG4gKiBjYWxsYmFjayB3aXRoIGEgZ2l2ZW4gYXJyYXkgb2YgYXJndW1lbnRzLCBwbHVzIGEgcHJvdmlkZWQgY2FsbGJhY2suXG4gKiBAcGFyYW0gb2JqZWN0IGFuIG9iamVjdCB0aGF0IGhhcyB0aGUgbmFtZWQgbWV0aG9kXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBtZXRob2Qgb2Ygb2JqZWN0XG4gKiBAcGFyYW0ge0FycmF5fSBhcmdzIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBtZXRob2Q7IHRoZSBjYWxsYmFja1xuICogd2lsbCBiZSBwcm92aWRlZCBieSBRIGFuZCBhcHBlbmRlZCB0byB0aGVzZSBhcmd1bWVudHMuXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSB2YWx1ZSBvciBlcnJvclxuICovXG5RLm5tYXBwbHkgPSAvLyBYWFggQXMgcHJvcG9zZWQgYnkgXCJSZWRzYW5kcm9cIlxuUS5ucG9zdCA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWUsIGFyZ3MpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLm5wb3N0KG5hbWUsIGFyZ3MpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubm1hcHBseSA9IC8vIFhYWCBBcyBwcm9wb3NlZCBieSBcIlJlZHNhbmRyb1wiXG5Qcm9taXNlLnByb3RvdHlwZS5ucG9zdCA9IGZ1bmN0aW9uIChuYW1lLCBhcmdzKSB7XG4gICAgdmFyIG5vZGVBcmdzID0gYXJyYXlfc2xpY2UoYXJncyB8fCBbXSk7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgdGhpcy5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIG5vZGVBcmdzXSkuZmFpbChkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuLyoqXG4gKiBDYWxscyBhIG1ldGhvZCBvZiBhIE5vZGUtc3R5bGUgb2JqZWN0IHRoYXQgYWNjZXB0cyBhIE5vZGUtc3R5bGVcbiAqIGNhbGxiYWNrLCBmb3J3YXJkaW5nIHRoZSBnaXZlbiB2YXJpYWRpYyBhcmd1bWVudHMsIHBsdXMgYSBwcm92aWRlZFxuICogY2FsbGJhY2sgYXJndW1lbnQuXG4gKiBAcGFyYW0gb2JqZWN0IGFuIG9iamVjdCB0aGF0IGhhcyB0aGUgbmFtZWQgbWV0aG9kXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBtZXRob2Qgb2Ygb2JqZWN0XG4gKiBAcGFyYW0gLi4uYXJncyBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgbWV0aG9kOyB0aGUgY2FsbGJhY2sgd2lsbFxuICogYmUgcHJvdmlkZWQgYnkgUSBhbmQgYXBwZW5kZWQgdG8gdGhlc2UgYXJndW1lbnRzLlxuICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgdmFsdWUgb3IgZXJyb3JcbiAqL1xuUS5uc2VuZCA9IC8vIFhYWCBCYXNlZCBvbiBNYXJrIE1pbGxlcidzIHByb3Bvc2VkIFwic2VuZFwiXG5RLm5tY2FsbCA9IC8vIFhYWCBCYXNlZCBvbiBcIlJlZHNhbmRybydzXCIgcHJvcG9zYWxcblEubmludm9rZSA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWUgLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgbm9kZUFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDIpO1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgIFEob2JqZWN0KS5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIG5vZGVBcmdzXSkuZmFpbChkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubnNlbmQgPSAvLyBYWFggQmFzZWQgb24gTWFyayBNaWxsZXIncyBwcm9wb3NlZCBcInNlbmRcIlxuUHJvbWlzZS5wcm90b3R5cGUubm1jYWxsID0gLy8gWFhYIEJhc2VkIG9uIFwiUmVkc2FuZHJvJ3NcIiBwcm9wb3NhbFxuUHJvbWlzZS5wcm90b3R5cGUubmludm9rZSA9IGZ1bmN0aW9uIChuYW1lIC8qLi4uYXJncyovKSB7XG4gICAgdmFyIG5vZGVBcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAxKTtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIG5vZGVBcmdzLnB1c2goZGVmZXJyZWQubWFrZU5vZGVSZXNvbHZlcigpKTtcbiAgICB0aGlzLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgbm9kZUFyZ3NdKS5mYWlsKGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG4vKipcbiAqIElmIGEgZnVuY3Rpb24gd291bGQgbGlrZSB0byBzdXBwb3J0IGJvdGggTm9kZSBjb250aW51YXRpb24tcGFzc2luZy1zdHlsZSBhbmRcbiAqIHByb21pc2UtcmV0dXJuaW5nLXN0eWxlLCBpdCBjYW4gZW5kIGl0cyBpbnRlcm5hbCBwcm9taXNlIGNoYWluIHdpdGhcbiAqIGBub2RlaWZ5KG5vZGViYWNrKWAsIGZvcndhcmRpbmcgdGhlIG9wdGlvbmFsIG5vZGViYWNrIGFyZ3VtZW50LiAgSWYgdGhlIHVzZXJcbiAqIGVsZWN0cyB0byB1c2UgYSBub2RlYmFjaywgdGhlIHJlc3VsdCB3aWxsIGJlIHNlbnQgdGhlcmUuICBJZiB0aGV5IGRvIG5vdFxuICogcGFzcyBhIG5vZGViYWNrLCB0aGV5IHdpbGwgcmVjZWl2ZSB0aGUgcmVzdWx0IHByb21pc2UuXG4gKiBAcGFyYW0gb2JqZWN0IGEgcmVzdWx0IChvciBhIHByb21pc2UgZm9yIGEgcmVzdWx0KVxuICogQHBhcmFtIHtGdW5jdGlvbn0gbm9kZWJhY2sgYSBOb2RlLmpzLXN0eWxlIGNhbGxiYWNrXG4gKiBAcmV0dXJucyBlaXRoZXIgdGhlIHByb21pc2Ugb3Igbm90aGluZ1xuICovXG5RLm5vZGVpZnkgPSBub2RlaWZ5O1xuZnVuY3Rpb24gbm9kZWlmeShvYmplY3QsIG5vZGViYWNrKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5ub2RlaWZ5KG5vZGViYWNrKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUubm9kZWlmeSA9IGZ1bmN0aW9uIChub2RlYmFjaykge1xuICAgIGlmIChub2RlYmFjaykge1xuICAgICAgICB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBub2RlYmFjayhudWxsLCB2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBub2RlYmFjayhlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufTtcblxuUS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUS5ub0NvbmZsaWN0IG9ubHkgd29ya3Mgd2hlbiBRIGlzIHVzZWQgYXMgYSBnbG9iYWxcIik7XG59O1xuXG4vLyBBbGwgY29kZSBiZWZvcmUgdGhpcyBwb2ludCB3aWxsIGJlIGZpbHRlcmVkIGZyb20gc3RhY2sgdHJhY2VzLlxudmFyIHFFbmRpbmdMaW5lID0gY2FwdHVyZUxpbmUoKTtcblxucmV0dXJuIFE7XG5cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ3JlYWN0L2xpYi9SZWFjdERPTScpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEF1dG9Gb2N1c1V0aWxzXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcblxudmFyIGZpbmRET01Ob2RlID0gcmVxdWlyZSgnLi9maW5kRE9NTm9kZScpO1xudmFyIGZvY3VzTm9kZSA9IHJlcXVpcmUoJ2ZianMvbGliL2ZvY3VzTm9kZScpO1xuXG52YXIgTWl4aW4gPSB7XG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuYXV0b0ZvY3VzKSB7XG4gICAgICBmb2N1c05vZGUoZmluZERPTU5vZGUodGhpcykpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIEF1dG9Gb2N1c1V0aWxzID0ge1xuICBNaXhpbjogTWl4aW4sXG5cbiAgZm9jdXNET01Db21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICBmb2N1c05vZGUoUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBBdXRvRm9jdXNVdGlsczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UHJvcGFnYXRvcnMgPSByZXF1aXJlKCcuL0V2ZW50UHJvcGFnYXRvcnMnKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlID0gcmVxdWlyZSgnLi9GYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUnKTtcbnZhciBTeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50Jyk7XG52YXIgU3ludGhldGljSW5wdXRFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljSW5wdXRFdmVudCcpO1xuXG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG52YXIgRU5EX0tFWUNPREVTID0gWzksIDEzLCAyNywgMzJdOyAvLyBUYWIsIFJldHVybiwgRXNjLCBTcGFjZVxudmFyIFNUQVJUX0tFWUNPREUgPSAyMjk7XG5cbnZhciBjYW5Vc2VDb21wb3NpdGlvbkV2ZW50ID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmICdDb21wb3NpdGlvbkV2ZW50JyBpbiB3aW5kb3c7XG5cbnZhciBkb2N1bWVudE1vZGUgPSBudWxsO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiAnZG9jdW1lbnRNb2RlJyBpbiBkb2N1bWVudCkge1xuICBkb2N1bWVudE1vZGUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XG59XG5cbi8vIFdlYmtpdCBvZmZlcnMgYSB2ZXJ5IHVzZWZ1bCBgdGV4dElucHV0YCBldmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvXG4vLyBkaXJlY3RseSByZXByZXNlbnQgYGJlZm9yZUlucHV0YC4gVGhlIElFIGB0ZXh0aW5wdXRgIGV2ZW50IGlzIG5vdCBhc1xuLy8gdXNlZnVsLCBzbyB3ZSBkb24ndCB1c2UgaXQuXG52YXIgY2FuVXNlVGV4dElucHV0RXZlbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ1RleHRFdmVudCcgaW4gd2luZG93ICYmICFkb2N1bWVudE1vZGUgJiYgIWlzUHJlc3RvKCk7XG5cbi8vIEluIElFOSssIHdlIGhhdmUgYWNjZXNzIHRvIGNvbXBvc2l0aW9uIGV2ZW50cywgYnV0IHRoZSBkYXRhIHN1cHBsaWVkXG4vLyBieSB0aGUgbmF0aXZlIGNvbXBvc2l0aW9uZW5kIGV2ZW50IG1heSBiZSBpbmNvcnJlY3QuIEphcGFuZXNlIGlkZW9ncmFwaGljXG4vLyBzcGFjZXMsIGZvciBpbnN0YW5jZSAoXFx1MzAwMCkgYXJlIG5vdCByZWNvcmRlZCBjb3JyZWN0bHkuXG52YXIgdXNlRmFsbGJhY2tDb21wb3NpdGlvbkRhdGEgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgKCFjYW5Vc2VDb21wb3NpdGlvbkV2ZW50IHx8IGRvY3VtZW50TW9kZSAmJiBkb2N1bWVudE1vZGUgPiA4ICYmIGRvY3VtZW50TW9kZSA8PSAxMSk7XG5cbi8qKlxuICogT3BlcmEgPD0gMTIgaW5jbHVkZXMgVGV4dEV2ZW50IGluIHdpbmRvdywgYnV0IGRvZXMgbm90IGZpcmVcbiAqIHRleHQgaW5wdXQgZXZlbnRzLiBSZWx5IG9uIGtleXByZXNzIGluc3RlYWQuXG4gKi9cbmZ1bmN0aW9uIGlzUHJlc3RvKCkge1xuICB2YXIgb3BlcmEgPSB3aW5kb3cub3BlcmE7XG4gIHJldHVybiB0eXBlb2Ygb3BlcmEgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvcGVyYS52ZXJzaW9uID09PSAnZnVuY3Rpb24nICYmIHBhcnNlSW50KG9wZXJhLnZlcnNpb24oKSwgMTApIDw9IDEyO1xufVxuXG52YXIgU1BBQ0VCQVJfQ09ERSA9IDMyO1xudmFyIFNQQUNFQkFSX0NIQVIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFNQQUNFQkFSX0NPREUpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbi8vIEV2ZW50cyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0eSBuYW1lcy5cbnZhciBldmVudFR5cGVzID0ge1xuICBiZWZvcmVJbnB1dDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQmVmb3JlSW5wdXQ6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkJlZm9yZUlucHV0Q2FwdHVyZTogbnVsbCB9KVxuICAgIH0sXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvbkVuZCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlQcmVzcywgdG9wTGV2ZWxUeXBlcy50b3BUZXh0SW5wdXQsIHRvcExldmVsVHlwZXMudG9wUGFzdGVdXG4gIH0sXG4gIGNvbXBvc2l0aW9uRW5kOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db21wb3NpdGlvbkVuZDogbnVsbCB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25FbmRDYXB0dXJlOiBudWxsIH0pXG4gICAgfSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcEJsdXIsIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQsIHRvcExldmVsVHlwZXMudG9wS2V5RG93biwgdG9wTGV2ZWxUeXBlcy50b3BLZXlQcmVzcywgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcCwgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZURvd25dXG4gIH0sXG4gIGNvbXBvc2l0aW9uU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uU3RhcnQ6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uU3RhcnRDYXB0dXJlOiBudWxsIH0pXG4gICAgfSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcEJsdXIsIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25TdGFydCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bl1cbiAgfSxcbiAgY29tcG9zaXRpb25VcGRhdGU6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uVXBkYXRlOiBudWxsIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Db21wb3NpdGlvblVwZGF0ZUNhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvblVwZGF0ZSwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bl1cbiAgfVxufTtcblxuLy8gVHJhY2sgd2hldGhlciB3ZSd2ZSBldmVyIGhhbmRsZWQgYSBrZXlwcmVzcyBvbiB0aGUgc3BhY2Uga2V5LlxudmFyIGhhc1NwYWNlS2V5cHJlc3MgPSBmYWxzZTtcblxuLyoqXG4gKiBSZXR1cm4gd2hldGhlciBhIG5hdGl2ZSBrZXlwcmVzcyBldmVudCBpcyBhc3N1bWVkIHRvIGJlIGEgY29tbWFuZC5cbiAqIFRoaXMgaXMgcmVxdWlyZWQgYmVjYXVzZSBGaXJlZm94IGZpcmVzIGBrZXlwcmVzc2AgZXZlbnRzIGZvciBrZXkgY29tbWFuZHNcbiAqIChjdXQsIGNvcHksIHNlbGVjdC1hbGwsIGV0Yy4pIGV2ZW4gdGhvdWdoIG5vIGNoYXJhY3RlciBpcyBpbnNlcnRlZC5cbiAqL1xuZnVuY3Rpb24gaXNLZXlwcmVzc0NvbW1hbmQobmF0aXZlRXZlbnQpIHtcbiAgcmV0dXJuIChuYXRpdmVFdmVudC5jdHJsS2V5IHx8IG5hdGl2ZUV2ZW50LmFsdEtleSB8fCBuYXRpdmVFdmVudC5tZXRhS2V5KSAmJlxuICAvLyBjdHJsS2V5ICYmIGFsdEtleSBpcyBlcXVpdmFsZW50IHRvIEFsdEdyLCBhbmQgaXMgbm90IGEgY29tbWFuZC5cbiAgIShuYXRpdmVFdmVudC5jdHJsS2V5ICYmIG5hdGl2ZUV2ZW50LmFsdEtleSk7XG59XG5cbi8qKlxuICogVHJhbnNsYXRlIG5hdGl2ZSB0b3AgbGV2ZWwgZXZlbnRzIGludG8gZXZlbnQgdHlwZXMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZVxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRDb21wb3NpdGlvbkV2ZW50VHlwZSh0b3BMZXZlbFR5cGUpIHtcbiAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25TdGFydDpcbiAgICAgIHJldHVybiBldmVudFR5cGVzLmNvbXBvc2l0aW9uU3RhcnQ7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kOlxuICAgICAgcmV0dXJuIGV2ZW50VHlwZXMuY29tcG9zaXRpb25FbmQ7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uVXBkYXRlOlxuICAgICAgcmV0dXJuIGV2ZW50VHlwZXMuY29tcG9zaXRpb25VcGRhdGU7XG4gIH1cbn1cblxuLyoqXG4gKiBEb2VzIG91ciBmYWxsYmFjayBiZXN0LWd1ZXNzIG1vZGVsIHRoaW5rIHRoaXMgZXZlbnQgc2lnbmlmaWVzIHRoYXRcbiAqIGNvbXBvc2l0aW9uIGhhcyBiZWd1bj9cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRmFsbGJhY2tDb21wb3NpdGlvblN0YXJ0KHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duICYmIG5hdGl2ZUV2ZW50LmtleUNvZGUgPT09IFNUQVJUX0tFWUNPREU7XG59XG5cbi8qKlxuICogRG9lcyBvdXIgZmFsbGJhY2sgbW9kZSB0aGluayB0aGF0IHRoaXMgZXZlbnQgaXMgdGhlIGVuZCBvZiBjb21wb3NpdGlvbj9cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSB7XG4gIHN3aXRjaCAodG9wTGV2ZWxUeXBlKSB7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVVwOlxuICAgICAgLy8gQ29tbWFuZCBrZXlzIGluc2VydCBvciBjbGVhciBJTUUgaW5wdXQuXG4gICAgICByZXR1cm4gRU5EX0tFWUNPREVTLmluZGV4T2YobmF0aXZlRXZlbnQua2V5Q29kZSkgIT09IC0xO1xuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duOlxuICAgICAgLy8gRXhwZWN0IElNRSBrZXlDb2RlIG9uIGVhY2gga2V5ZG93bi4gSWYgd2UgZ2V0IGFueSBvdGhlclxuICAgICAgLy8gY29kZSB3ZSBtdXN0IGhhdmUgZXhpdGVkIGVhcmxpZXIuXG4gICAgICByZXR1cm4gbmF0aXZlRXZlbnQua2V5Q29kZSAhPT0gU1RBUlRfS0VZQ09ERTtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3M6XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bjpcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQmx1cjpcbiAgICAgIC8vIEV2ZW50cyBhcmUgbm90IHBvc3NpYmxlIHdpdGhvdXQgY2FuY2VsbGluZyBJTUUuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogR29vZ2xlIElucHV0IFRvb2xzIHByb3ZpZGVzIGNvbXBvc2l0aW9uIGRhdGEgdmlhIGEgQ3VzdG9tRXZlbnQsXG4gKiB3aXRoIHRoZSBgZGF0YWAgcHJvcGVydHkgcG9wdWxhdGVkIGluIHRoZSBgZGV0YWlsYCBvYmplY3QuIElmIHRoaXNcbiAqIGlzIGF2YWlsYWJsZSBvbiB0aGUgZXZlbnQgb2JqZWN0LCB1c2UgaXQuIElmIG5vdCwgdGhpcyBpcyBhIHBsYWluXG4gKiBjb21wb3NpdGlvbiBldmVudCBhbmQgd2UgaGF2ZSBub3RoaW5nIHNwZWNpYWwgdG8gZXh0cmFjdC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldERhdGFGcm9tQ3VzdG9tRXZlbnQobmF0aXZlRXZlbnQpIHtcbiAgdmFyIGRldGFpbCA9IG5hdGl2ZUV2ZW50LmRldGFpbDtcbiAgaWYgKHR5cGVvZiBkZXRhaWwgPT09ICdvYmplY3QnICYmICdkYXRhJyBpbiBkZXRhaWwpIHtcbiAgICByZXR1cm4gZGV0YWlsLmRhdGE7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8vIFRyYWNrIHRoZSBjdXJyZW50IElNRSBjb21wb3NpdGlvbiBmYWxsYmFjayBvYmplY3QsIGlmIGFueS5cbnZhciBjdXJyZW50Q29tcG9zaXRpb24gPSBudWxsO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/b2JqZWN0fSBBIFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RDb21wb3NpdGlvbkV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICB2YXIgZXZlbnRUeXBlO1xuICB2YXIgZmFsbGJhY2tEYXRhO1xuXG4gIGlmIChjYW5Vc2VDb21wb3NpdGlvbkV2ZW50KSB7XG4gICAgZXZlbnRUeXBlID0gZ2V0Q29tcG9zaXRpb25FdmVudFR5cGUodG9wTGV2ZWxUeXBlKTtcbiAgfSBlbHNlIGlmICghY3VycmVudENvbXBvc2l0aW9uKSB7XG4gICAgaWYgKGlzRmFsbGJhY2tDb21wb3NpdGlvblN0YXJ0KHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpKSB7XG4gICAgICBldmVudFR5cGUgPSBldmVudFR5cGVzLmNvbXBvc2l0aW9uU3RhcnQ7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSkge1xuICAgIGV2ZW50VHlwZSA9IGV2ZW50VHlwZXMuY29tcG9zaXRpb25FbmQ7XG4gIH1cblxuICBpZiAoIWV2ZW50VHlwZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKHVzZUZhbGxiYWNrQ29tcG9zaXRpb25EYXRhKSB7XG4gICAgLy8gVGhlIGN1cnJlbnQgY29tcG9zaXRpb24gaXMgc3RvcmVkIHN0YXRpY2FsbHkgYW5kIG11c3Qgbm90IGJlXG4gICAgLy8gb3ZlcndyaXR0ZW4gd2hpbGUgY29tcG9zaXRpb24gY29udGludWVzLlxuICAgIGlmICghY3VycmVudENvbXBvc2l0aW9uICYmIGV2ZW50VHlwZSA9PT0gZXZlbnRUeXBlcy5jb21wb3NpdGlvblN0YXJ0KSB7XG4gICAgICBjdXJyZW50Q29tcG9zaXRpb24gPSBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUuZ2V0UG9vbGVkKHRvcExldmVsVGFyZ2V0KTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gZXZlbnRUeXBlcy5jb21wb3NpdGlvbkVuZCkge1xuICAgICAgaWYgKGN1cnJlbnRDb21wb3NpdGlvbikge1xuICAgICAgICBmYWxsYmFja0RhdGEgPSBjdXJyZW50Q29tcG9zaXRpb24uZ2V0RGF0YSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBldmVudCA9IFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZSwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICBpZiAoZmFsbGJhY2tEYXRhKSB7XG4gICAgLy8gSW5qZWN0IGRhdGEgZ2VuZXJhdGVkIGZyb20gZmFsbGJhY2sgcGF0aCBpbnRvIHRoZSBzeW50aGV0aWMgZXZlbnQuXG4gICAgLy8gVGhpcyBtYXRjaGVzIHRoZSBwcm9wZXJ0eSBvZiBuYXRpdmUgQ29tcG9zaXRpb25FdmVudEludGVyZmFjZS5cbiAgICBldmVudC5kYXRhID0gZmFsbGJhY2tEYXRhO1xuICB9IGVsc2Uge1xuICAgIHZhciBjdXN0b21EYXRhID0gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCk7XG4gICAgaWYgKGN1c3RvbURhdGEgIT09IG51bGwpIHtcbiAgICAgIGV2ZW50LmRhdGEgPSBjdXN0b21EYXRhO1xuICAgIH1cbiAgfVxuXG4gIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudCk7XG4gIHJldHVybiBldmVudDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBUaGUgc3RyaW5nIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBgYmVmb3JlSW5wdXRgIGV2ZW50LlxuICovXG5mdW5jdGlvbiBnZXROYXRpdmVCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQ6XG4gICAgICByZXR1cm4gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCk7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzOlxuICAgICAgLyoqXG4gICAgICAgKiBJZiBuYXRpdmUgYHRleHRJbnB1dGAgZXZlbnRzIGFyZSBhdmFpbGFibGUsIG91ciBnb2FsIGlzIHRvIG1ha2VcbiAgICAgICAqIHVzZSBvZiB0aGVtLiBIb3dldmVyLCB0aGVyZSBpcyBhIHNwZWNpYWwgY2FzZTogdGhlIHNwYWNlYmFyIGtleS5cbiAgICAgICAqIEluIFdlYmtpdCwgcHJldmVudGluZyBkZWZhdWx0IG9uIGEgc3BhY2ViYXIgYHRleHRJbnB1dGAgZXZlbnRcbiAgICAgICAqIGNhbmNlbHMgY2hhcmFjdGVyIGluc2VydGlvbiwgYnV0IGl0ICphbHNvKiBjYXVzZXMgdGhlIGJyb3dzZXJcbiAgICAgICAqIHRvIGZhbGwgYmFjayB0byBpdHMgZGVmYXVsdCBzcGFjZWJhciBiZWhhdmlvciBvZiBzY3JvbGxpbmcgdGhlXG4gICAgICAgKiBwYWdlLlxuICAgICAgICpcbiAgICAgICAqIFRyYWNraW5nIGF0OlxuICAgICAgICogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM1NTEwM1xuICAgICAgICpcbiAgICAgICAqIFRvIGF2b2lkIHRoaXMgaXNzdWUsIHVzZSB0aGUga2V5cHJlc3MgZXZlbnQgYXMgaWYgbm8gYHRleHRJbnB1dGBcbiAgICAgICAqIGV2ZW50IGlzIGF2YWlsYWJsZS5cbiAgICAgICAqL1xuICAgICAgdmFyIHdoaWNoID0gbmF0aXZlRXZlbnQud2hpY2g7XG4gICAgICBpZiAod2hpY2ggIT09IFNQQUNFQkFSX0NPREUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGhhc1NwYWNlS2V5cHJlc3MgPSB0cnVlO1xuICAgICAgcmV0dXJuIFNQQUNFQkFSX0NIQVI7XG5cbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVGV4dElucHV0OlxuICAgICAgLy8gUmVjb3JkIHRoZSBjaGFyYWN0ZXJzIHRvIGJlIGFkZGVkIHRvIHRoZSBET00uXG4gICAgICB2YXIgY2hhcnMgPSBuYXRpdmVFdmVudC5kYXRhO1xuXG4gICAgICAvLyBJZiBpdCdzIGEgc3BhY2ViYXIgY2hhcmFjdGVyLCBhc3N1bWUgdGhhdCB3ZSBoYXZlIGFscmVhZHkgaGFuZGxlZFxuICAgICAgLy8gaXQgYXQgdGhlIGtleXByZXNzIGxldmVsIGFuZCBiYWlsIGltbWVkaWF0ZWx5LiBBbmRyb2lkIENocm9tZVxuICAgICAgLy8gZG9lc24ndCBnaXZlIHVzIGtleWNvZGVzLCBzbyB3ZSBuZWVkIHRvIGJsYWNrbGlzdCBpdC5cbiAgICAgIGlmIChjaGFycyA9PT0gU1BBQ0VCQVJfQ0hBUiAmJiBoYXNTcGFjZUtleXByZXNzKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2hhcnM7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgLy8gRm9yIG90aGVyIG5hdGl2ZSBldmVudCB0eXBlcywgZG8gbm90aGluZy5cbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogRm9yIGJyb3dzZXJzIHRoYXQgZG8gbm90IHByb3ZpZGUgdGhlIGB0ZXh0SW5wdXRgIGV2ZW50LCBleHRyYWN0IHRoZVxuICogYXBwcm9wcmlhdGUgc3RyaW5nIHRvIHVzZSBmb3IgU3ludGhldGljSW5wdXRFdmVudC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBUaGUgZmFsbGJhY2sgc3RyaW5nIGZvciB0aGlzIGBiZWZvcmVJbnB1dGAgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGdldEZhbGxiYWNrQmVmb3JlSW5wdXRDaGFycyh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSB7XG4gIC8vIElmIHdlIGFyZSBjdXJyZW50bHkgY29tcG9zaW5nIChJTUUpIGFuZCB1c2luZyBhIGZhbGxiYWNrIHRvIGRvIHNvLFxuICAvLyB0cnkgdG8gZXh0cmFjdCB0aGUgY29tcG9zZWQgY2hhcmFjdGVycyBmcm9tIHRoZSBmYWxsYmFjayBvYmplY3QuXG4gIGlmIChjdXJyZW50Q29tcG9zaXRpb24pIHtcbiAgICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kIHx8IGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KSkge1xuICAgICAgdmFyIGNoYXJzID0gY3VycmVudENvbXBvc2l0aW9uLmdldERhdGEoKTtcbiAgICAgIEZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZS5yZWxlYXNlKGN1cnJlbnRDb21wb3NpdGlvbik7XG4gICAgICBjdXJyZW50Q29tcG9zaXRpb24gPSBudWxsO1xuICAgICAgcmV0dXJuIGNoYXJzO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHN3aXRjaCAodG9wTGV2ZWxUeXBlKSB7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBhc3RlOlxuICAgICAgLy8gSWYgYSBwYXN0ZSBldmVudCBvY2N1cnMgYWZ0ZXIgYSBrZXlwcmVzcywgdGhyb3cgb3V0IHRoZSBpbnB1dFxuICAgICAgLy8gY2hhcnMuIFBhc3RlIGV2ZW50cyBzaG91bGQgbm90IGxlYWQgdG8gQmVmb3JlSW5wdXQgZXZlbnRzLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzOlxuICAgICAgLyoqXG4gICAgICAgKiBBcyBvZiB2MjcsIEZpcmVmb3ggbWF5IGZpcmUga2V5cHJlc3MgZXZlbnRzIGV2ZW4gd2hlbiBubyBjaGFyYWN0ZXJcbiAgICAgICAqIHdpbGwgYmUgaW5zZXJ0ZWQuIEEgZmV3IHBvc3NpYmlsaXRpZXM6XG4gICAgICAgKlxuICAgICAgICogLSBgd2hpY2hgIGlzIGAwYC4gQXJyb3cga2V5cywgRXNjIGtleSwgZXRjLlxuICAgICAgICpcbiAgICAgICAqIC0gYHdoaWNoYCBpcyB0aGUgcHJlc3NlZCBrZXkgY29kZSwgYnV0IG5vIGNoYXIgaXMgYXZhaWxhYmxlLlxuICAgICAgICogICBFeDogJ0FsdEdyICsgZGAgaW4gUG9saXNoLiBUaGVyZSBpcyBubyBtb2RpZmllZCBjaGFyYWN0ZXIgZm9yXG4gICAgICAgKiAgIHRoaXMga2V5IGNvbWJpbmF0aW9uIGFuZCBubyBjaGFyYWN0ZXIgaXMgaW5zZXJ0ZWQgaW50byB0aGVcbiAgICAgICAqICAgZG9jdW1lbnQsIGJ1dCBGRiBmaXJlcyB0aGUga2V5cHJlc3MgZm9yIGNoYXIgY29kZSBgMTAwYCBhbnl3YXkuXG4gICAgICAgKiAgIE5vIGBpbnB1dGAgZXZlbnQgd2lsbCBvY2N1ci5cbiAgICAgICAqXG4gICAgICAgKiAtIGB3aGljaGAgaXMgdGhlIHByZXNzZWQga2V5IGNvZGUsIGJ1dCBhIGNvbW1hbmQgY29tYmluYXRpb24gaXNcbiAgICAgICAqICAgYmVpbmcgdXNlZC4gRXg6IGBDbWQrQ2AuIE5vIGNoYXJhY3RlciBpcyBpbnNlcnRlZCwgYW5kIG5vXG4gICAgICAgKiAgIGBpbnB1dGAgZXZlbnQgd2lsbCBvY2N1ci5cbiAgICAgICAqL1xuICAgICAgaWYgKG5hdGl2ZUV2ZW50LndoaWNoICYmICFpc0tleXByZXNzQ29tbWFuZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUobmF0aXZlRXZlbnQud2hpY2gpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kOlxuICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrQ29tcG9zaXRpb25EYXRhID8gbnVsbCA6IG5hdGl2ZUV2ZW50LmRhdGE7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogRXh0cmFjdCBhIFN5bnRoZXRpY0lucHV0RXZlbnQgZm9yIGBiZWZvcmVJbnB1dGAsIGJhc2VkIG9uIGVpdGhlciBuYXRpdmVcbiAqIGB0ZXh0SW5wdXRgIG9yIGZhbGxiYWNrIGJlaGF2aW9yLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHs/b2JqZWN0fSBBIFN5bnRoZXRpY0lucHV0RXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RCZWZvcmVJbnB1dEV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICB2YXIgY2hhcnM7XG5cbiAgaWYgKGNhblVzZVRleHRJbnB1dEV2ZW50KSB7XG4gICAgY2hhcnMgPSBnZXROYXRpdmVCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpO1xuICB9IGVsc2Uge1xuICAgIGNoYXJzID0gZ2V0RmFsbGJhY2tCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpO1xuICB9XG5cbiAgLy8gSWYgbm8gY2hhcmFjdGVycyBhcmUgYmVpbmcgaW5zZXJ0ZWQsIG5vIEJlZm9yZUlucHV0IGV2ZW50IHNob3VsZFxuICAvLyBiZSBmaXJlZC5cbiAgaWYgKCFjaGFycykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGV2ZW50ID0gU3ludGhldGljSW5wdXRFdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlcy5iZWZvcmVJbnB1dCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICBldmVudC5kYXRhID0gY2hhcnM7XG4gIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudCk7XG4gIHJldHVybiBldmVudDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gYG9uQmVmb3JlSW5wdXRgIGV2ZW50IHRvIG1hdGNoXG4gKiBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDEzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDEzMTEwNS8jZXZlbnRzLWlucHV0ZXZlbnRzLlxuICpcbiAqIFRoaXMgZXZlbnQgcGx1Z2luIGlzIGJhc2VkIG9uIHRoZSBuYXRpdmUgYHRleHRJbnB1dGAgZXZlbnRcbiAqIGF2YWlsYWJsZSBpbiBDaHJvbWUsIFNhZmFyaSwgT3BlcmEsIGFuZCBJRS4gVGhpcyBldmVudCBmaXJlcyBhZnRlclxuICogYG9uS2V5UHJlc3NgIGFuZCBgb25Db21wb3NpdGlvbkVuZGAsIGJ1dCBiZWZvcmUgYG9uSW5wdXRgLlxuICpcbiAqIGBiZWZvcmVJbnB1dGAgaXMgc3BlYydkIGJ1dCBub3QgaW1wbGVtZW50ZWQgaW4gYW55IGJyb3dzZXJzLCBhbmRcbiAqIHRoZSBgaW5wdXRgIGV2ZW50IGRvZXMgbm90IHByb3ZpZGUgYW55IHVzZWZ1bCBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGhhc1xuICogYWN0dWFsbHkgYmVlbiBhZGRlZCwgY29udHJhcnkgdG8gdGhlIHNwZWMuIFRodXMsIGB0ZXh0SW5wdXRgIGlzIHRoZSBiZXN0XG4gKiBhdmFpbGFibGUgZXZlbnQgdG8gaWRlbnRpZnkgdGhlIGNoYXJhY3RlcnMgdGhhdCBoYXZlIGFjdHVhbGx5IGJlZW4gaW5zZXJ0ZWRcbiAqIGludG8gdGhlIHRhcmdldCBub2RlLlxuICpcbiAqIFRoaXMgcGx1Z2luIGlzIGFsc28gcmVzcG9uc2libGUgZm9yIGVtaXR0aW5nIGBjb21wb3NpdGlvbmAgZXZlbnRzLCB0aHVzXG4gKiBhbGxvd2luZyB1cyB0byBzaGFyZSBjb21wb3NpdGlvbiBmYWxsYmFjayBjb2RlIGZvciBib3RoIGBiZWZvcmVJbnB1dGAgYW5kXG4gKiBgY29tcG9zaXRpb25gIGV2ZW50IHR5cGVzLlxuICovXG52YXIgQmVmb3JlSW5wdXRFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50c31cbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICByZXR1cm4gW2V4dHJhY3RDb21wb3NpdGlvbkV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCksIGV4dHJhY3RCZWZvcmVJbnB1dEV2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCldO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJlZm9yZUlucHV0RXZlbnRQbHVnaW47IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIENTU1Byb3BlcnR5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENTUyBwcm9wZXJ0aWVzIHdoaWNoIGFjY2VwdCBudW1iZXJzIGJ1dCBhcmUgbm90IGluIHVuaXRzIG9mIFwicHhcIi5cbiAqL1xudmFyIGlzVW5pdGxlc3NOdW1iZXIgPSB7XG4gIGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiB0cnVlLFxuICBib3hGbGV4OiB0cnVlLFxuICBib3hGbGV4R3JvdXA6IHRydWUsXG4gIGJveE9yZGluYWxHcm91cDogdHJ1ZSxcbiAgY29sdW1uQ291bnQ6IHRydWUsXG4gIGZsZXg6IHRydWUsXG4gIGZsZXhHcm93OiB0cnVlLFxuICBmbGV4UG9zaXRpdmU6IHRydWUsXG4gIGZsZXhTaHJpbms6IHRydWUsXG4gIGZsZXhOZWdhdGl2ZTogdHJ1ZSxcbiAgZmxleE9yZGVyOiB0cnVlLFxuICBmb250V2VpZ2h0OiB0cnVlLFxuICBsaW5lQ2xhbXA6IHRydWUsXG4gIGxpbmVIZWlnaHQ6IHRydWUsXG4gIG9wYWNpdHk6IHRydWUsXG4gIG9yZGVyOiB0cnVlLFxuICBvcnBoYW5zOiB0cnVlLFxuICB0YWJTaXplOiB0cnVlLFxuICB3aWRvd3M6IHRydWUsXG4gIHpJbmRleDogdHJ1ZSxcbiAgem9vbTogdHJ1ZSxcblxuICAvLyBTVkctcmVsYXRlZCBwcm9wZXJ0aWVzXG4gIGZpbGxPcGFjaXR5OiB0cnVlLFxuICBzdG9wT3BhY2l0eTogdHJ1ZSxcbiAgc3Ryb2tlRGFzaG9mZnNldDogdHJ1ZSxcbiAgc3Ryb2tlT3BhY2l0eTogdHJ1ZSxcbiAgc3Ryb2tlV2lkdGg6IHRydWVcbn07XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHByZWZpeCB2ZW5kb3Itc3BlY2lmaWMgcHJlZml4LCBlZzogV2Via2l0XG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IHN0eWxlIG5hbWUsIGVnOiB0cmFuc2l0aW9uRHVyYXRpb25cbiAqIEByZXR1cm4ge3N0cmluZ30gc3R5bGUgbmFtZSBwcmVmaXhlZCB3aXRoIGBwcmVmaXhgLCBwcm9wZXJseSBjYW1lbENhc2VkLCBlZzpcbiAqIFdlYmtpdFRyYW5zaXRpb25EdXJhdGlvblxuICovXG5mdW5jdGlvbiBwcmVmaXhLZXkocHJlZml4LCBrZXkpIHtcbiAgcmV0dXJuIHByZWZpeCArIGtleS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleS5zdWJzdHJpbmcoMSk7XG59XG5cbi8qKlxuICogU3VwcG9ydCBzdHlsZSBuYW1lcyB0aGF0IG1heSBjb21lIHBhc3NlZCBpbiBwcmVmaXhlZCBieSBhZGRpbmcgcGVybXV0YXRpb25zXG4gKiBvZiB2ZW5kb3IgcHJlZml4ZXMuXG4gKi9cbnZhciBwcmVmaXhlcyA9IFsnV2Via2l0JywgJ21zJywgJ01veicsICdPJ107XG5cbi8vIFVzaW5nIE9iamVjdC5rZXlzIGhlcmUsIG9yIGVsc2UgdGhlIHZhbmlsbGEgZm9yLWluIGxvb3AgbWFrZXMgSUU4IGdvIGludG8gYW5cbi8vIGluZmluaXRlIGxvb3AsIGJlY2F1c2UgaXQgaXRlcmF0ZXMgb3ZlciB0aGUgbmV3bHkgYWRkZWQgcHJvcHMgdG9vLlxuT2JqZWN0LmtleXMoaXNVbml0bGVzc051bWJlcikuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICBwcmVmaXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChwcmVmaXgpIHtcbiAgICBpc1VuaXRsZXNzTnVtYmVyW3ByZWZpeEtleShwcmVmaXgsIHByb3ApXSA9IGlzVW5pdGxlc3NOdW1iZXJbcHJvcF07XG4gIH0pO1xufSk7XG5cbi8qKlxuICogTW9zdCBzdHlsZSBwcm9wZXJ0aWVzIGNhbiBiZSB1bnNldCBieSBkb2luZyAuc3R5bGVbcHJvcF0gPSAnJyBidXQgSUU4XG4gKiBkb2Vzbid0IGxpa2UgZG9pbmcgdGhhdCB3aXRoIHNob3J0aGFuZCBwcm9wZXJ0aWVzIHNvIGZvciB0aGUgcHJvcGVydGllcyB0aGF0XG4gKiBJRTggYnJlYWtzIG9uLCB3aGljaCBhcmUgbGlzdGVkIGhlcmUsIHdlIGluc3RlYWQgdW5zZXQgZWFjaCBvZiB0aGVcbiAqIGluZGl2aWR1YWwgcHJvcGVydGllcy4gU2VlIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEyMzg1LlxuICogVGhlIDQtdmFsdWUgJ2Nsb2NrJyBwcm9wZXJ0aWVzIGxpa2UgbWFyZ2luLCBwYWRkaW5nLCBib3JkZXItd2lkdGggc2VlbSB0b1xuICogYmVoYXZlIHdpdGhvdXQgYW55IHByb2JsZW1zLiBDdXJpb3VzbHksIGxpc3Qtc3R5bGUgd29ya3MgdG9vIHdpdGhvdXQgYW55XG4gKiBzcGVjaWFsIHByb2RkaW5nLlxuICovXG52YXIgc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zID0ge1xuICBiYWNrZ3JvdW5kOiB7XG4gICAgYmFja2dyb3VuZEF0dGFjaG1lbnQ6IHRydWUsXG4gICAgYmFja2dyb3VuZENvbG9yOiB0cnVlLFxuICAgIGJhY2tncm91bmRJbWFnZTogdHJ1ZSxcbiAgICBiYWNrZ3JvdW5kUG9zaXRpb25YOiB0cnVlLFxuICAgIGJhY2tncm91bmRQb3NpdGlvblk6IHRydWUsXG4gICAgYmFja2dyb3VuZFJlcGVhdDogdHJ1ZVxuICB9LFxuICBiYWNrZ3JvdW5kUG9zaXRpb246IHtcbiAgICBiYWNrZ3JvdW5kUG9zaXRpb25YOiB0cnVlLFxuICAgIGJhY2tncm91bmRQb3NpdGlvblk6IHRydWVcbiAgfSxcbiAgYm9yZGVyOiB7XG4gICAgYm9yZGVyV2lkdGg6IHRydWUsXG4gICAgYm9yZGVyU3R5bGU6IHRydWUsXG4gICAgYm9yZGVyQ29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyQm90dG9tOiB7XG4gICAgYm9yZGVyQm90dG9tV2lkdGg6IHRydWUsXG4gICAgYm9yZGVyQm90dG9tU3R5bGU6IHRydWUsXG4gICAgYm9yZGVyQm90dG9tQ29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyTGVmdDoge1xuICAgIGJvcmRlckxlZnRXaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJMZWZ0U3R5bGU6IHRydWUsXG4gICAgYm9yZGVyTGVmdENvbG9yOiB0cnVlXG4gIH0sXG4gIGJvcmRlclJpZ2h0OiB7XG4gICAgYm9yZGVyUmlnaHRXaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJSaWdodFN0eWxlOiB0cnVlLFxuICAgIGJvcmRlclJpZ2h0Q29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyVG9wOiB7XG4gICAgYm9yZGVyVG9wV2lkdGg6IHRydWUsXG4gICAgYm9yZGVyVG9wU3R5bGU6IHRydWUsXG4gICAgYm9yZGVyVG9wQ29sb3I6IHRydWVcbiAgfSxcbiAgZm9udDoge1xuICAgIGZvbnRTdHlsZTogdHJ1ZSxcbiAgICBmb250VmFyaWFudDogdHJ1ZSxcbiAgICBmb250V2VpZ2h0OiB0cnVlLFxuICAgIGZvbnRTaXplOiB0cnVlLFxuICAgIGxpbmVIZWlnaHQ6IHRydWUsXG4gICAgZm9udEZhbWlseTogdHJ1ZVxuICB9LFxuICBvdXRsaW5lOiB7XG4gICAgb3V0bGluZVdpZHRoOiB0cnVlLFxuICAgIG91dGxpbmVTdHlsZTogdHJ1ZSxcbiAgICBvdXRsaW5lQ29sb3I6IHRydWVcbiAgfVxufTtcblxudmFyIENTU1Byb3BlcnR5ID0ge1xuICBpc1VuaXRsZXNzTnVtYmVyOiBpc1VuaXRsZXNzTnVtYmVyLFxuICBzaG9ydGhhbmRQcm9wZXJ0eUV4cGFuc2lvbnM6IHNob3J0aGFuZFByb3BlcnR5RXhwYW5zaW9uc1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDU1NQcm9wZXJ0eTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQ1NTUHJvcGVydHlPcGVyYXRpb25zXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENTU1Byb3BlcnR5ID0gcmVxdWlyZSgnLi9DU1NQcm9wZXJ0eScpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xuXG52YXIgY2FtZWxpemVTdHlsZU5hbWUgPSByZXF1aXJlKCdmYmpzL2xpYi9jYW1lbGl6ZVN0eWxlTmFtZScpO1xudmFyIGRhbmdlcm91c1N0eWxlVmFsdWUgPSByZXF1aXJlKCcuL2Rhbmdlcm91c1N0eWxlVmFsdWUnKTtcbnZhciBoeXBoZW5hdGVTdHlsZU5hbWUgPSByZXF1aXJlKCdmYmpzL2xpYi9oeXBoZW5hdGVTdHlsZU5hbWUnKTtcbnZhciBtZW1vaXplU3RyaW5nT25seSA9IHJlcXVpcmUoJ2ZianMvbGliL21lbW9pemVTdHJpbmdPbmx5Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIHByb2Nlc3NTdHlsZU5hbWUgPSBtZW1vaXplU3RyaW5nT25seShmdW5jdGlvbiAoc3R5bGVOYW1lKSB7XG4gIHJldHVybiBoeXBoZW5hdGVTdHlsZU5hbWUoc3R5bGVOYW1lKTtcbn0pO1xuXG52YXIgaGFzU2hvcnRoYW5kUHJvcGVydHlCdWcgPSBmYWxzZTtcbnZhciBzdHlsZUZsb2F0QWNjZXNzb3IgPSAnY3NzRmxvYXQnO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICB2YXIgdGVtcFN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGU7XG4gIHRyeSB7XG4gICAgLy8gSUU4IHRocm93cyBcIkludmFsaWQgYXJndW1lbnQuXCIgaWYgcmVzZXR0aW5nIHNob3J0aGFuZCBzdHlsZSBwcm9wZXJ0aWVzLlxuICAgIHRlbXBTdHlsZS5mb250ID0gJyc7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBoYXNTaG9ydGhhbmRQcm9wZXJ0eUJ1ZyA9IHRydWU7XG4gIH1cbiAgLy8gSUU4IG9ubHkgc3VwcG9ydHMgYWNjZXNzaW5nIGNzc0Zsb2F0IChzdGFuZGFyZCkgYXMgc3R5bGVGbG9hdFxuICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmNzc0Zsb2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdHlsZUZsb2F0QWNjZXNzb3IgPSAnc3R5bGVGbG9hdCc7XG4gIH1cbn1cblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgLy8gJ21zVHJhbnNmb3JtJyBpcyBjb3JyZWN0LCBidXQgdGhlIG90aGVyIHByZWZpeGVzIHNob3VsZCBiZSBjYXBpdGFsaXplZFxuICB2YXIgYmFkVmVuZG9yZWRTdHlsZU5hbWVQYXR0ZXJuID0gL14oPzp3ZWJraXR8bW96fG8pW0EtWl0vO1xuXG4gIC8vIHN0eWxlIHZhbHVlcyBzaG91bGRuJ3QgY29udGFpbiBhIHNlbWljb2xvblxuICB2YXIgYmFkU3R5bGVWYWx1ZVdpdGhTZW1pY29sb25QYXR0ZXJuID0gLztcXHMqJC87XG5cbiAgdmFyIHdhcm5lZFN0eWxlTmFtZXMgPSB7fTtcbiAgdmFyIHdhcm5lZFN0eWxlVmFsdWVzID0ge307XG5cbiAgdmFyIHdhcm5IeXBoZW5hdGVkU3R5bGVOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAod2FybmVkU3R5bGVOYW1lcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiB3YXJuZWRTdHlsZU5hbWVzW25hbWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2FybmVkU3R5bGVOYW1lc1tuYW1lXSA9IHRydWU7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdVbnN1cHBvcnRlZCBzdHlsZSBwcm9wZXJ0eSAlcy4gRGlkIHlvdSBtZWFuICVzPycsIG5hbWUsIGNhbWVsaXplU3R5bGVOYW1lKG5hbWUpKSA6IHVuZGVmaW5lZDtcbiAgfTtcblxuICB2YXIgd2FybkJhZFZlbmRvcmVkU3R5bGVOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAod2FybmVkU3R5bGVOYW1lcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiB3YXJuZWRTdHlsZU5hbWVzW25hbWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2FybmVkU3R5bGVOYW1lc1tuYW1lXSA9IHRydWU7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdVbnN1cHBvcnRlZCB2ZW5kb3ItcHJlZml4ZWQgc3R5bGUgcHJvcGVydHkgJXMuIERpZCB5b3UgbWVhbiAlcz8nLCBuYW1lLCBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKSkgOiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgdmFyIHdhcm5TdHlsZVZhbHVlV2l0aFNlbWljb2xvbiA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmICh3YXJuZWRTdHlsZVZhbHVlcy5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkgJiYgd2FybmVkU3R5bGVWYWx1ZXNbdmFsdWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2FybmVkU3R5bGVWYWx1ZXNbdmFsdWVdID0gdHJ1ZTtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1N0eWxlIHByb3BlcnR5IHZhbHVlcyBzaG91bGRuXFwndCBjb250YWluIGEgc2VtaWNvbG9uLiAnICsgJ1RyeSBcIiVzOiAlc1wiIGluc3RlYWQuJywgbmFtZSwgdmFsdWUucmVwbGFjZShiYWRTdHlsZVZhbHVlV2l0aFNlbWljb2xvblBhdHRlcm4sICcnKSkgOiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICovXG4gIHZhciB3YXJuVmFsaWRTdHlsZSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmIChuYW1lLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICB3YXJuSHlwaGVuYXRlZFN0eWxlTmFtZShuYW1lKTtcbiAgICB9IGVsc2UgaWYgKGJhZFZlbmRvcmVkU3R5bGVOYW1lUGF0dGVybi50ZXN0KG5hbWUpKSB7XG4gICAgICB3YXJuQmFkVmVuZG9yZWRTdHlsZU5hbWUobmFtZSk7XG4gICAgfSBlbHNlIGlmIChiYWRTdHlsZVZhbHVlV2l0aFNlbWljb2xvblBhdHRlcm4udGVzdCh2YWx1ZSkpIHtcbiAgICAgIHdhcm5TdHlsZVZhbHVlV2l0aFNlbWljb2xvbihuYW1lLCB2YWx1ZSk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIE9wZXJhdGlvbnMgZm9yIGRlYWxpbmcgd2l0aCBDU1MgcHJvcGVydGllcy5cbiAqL1xudmFyIENTU1Byb3BlcnR5T3BlcmF0aW9ucyA9IHtcblxuICAvKipcbiAgICogU2VyaWFsaXplcyBhIG1hcHBpbmcgb2Ygc3R5bGUgcHJvcGVydGllcyBmb3IgdXNlIGFzIGlubGluZSBzdHlsZXM6XG4gICAqXG4gICAqICAgPiBjcmVhdGVNYXJrdXBGb3JTdHlsZXMoe3dpZHRoOiAnMjAwcHgnLCBoZWlnaHQ6IDB9KVxuICAgKiAgIFwid2lkdGg6MjAwcHg7aGVpZ2h0OjA7XCJcbiAgICpcbiAgICogVW5kZWZpbmVkIHZhbHVlcyBhcmUgaWdub3JlZCBzbyB0aGF0IGRlY2xhcmF0aXZlIHByb2dyYW1taW5nIGlzIGVhc2llci5cbiAgICogVGhlIHJlc3VsdCBzaG91bGQgYmUgSFRNTC1lc2NhcGVkIGJlZm9yZSBpbnNlcnRpb24gaW50byB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gc3R5bGVzXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JTdHlsZXM6IGZ1bmN0aW9uIChzdHlsZXMpIHtcbiAgICB2YXIgc2VyaWFsaXplZCA9ICcnO1xuICAgIGZvciAodmFyIHN0eWxlTmFtZSBpbiBzdHlsZXMpIHtcbiAgICAgIGlmICghc3R5bGVzLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgc3R5bGVWYWx1ZSA9IHN0eWxlc1tzdHlsZU5hbWVdO1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FyblZhbGlkU3R5bGUoc3R5bGVOYW1lLCBzdHlsZVZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHlsZVZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgc2VyaWFsaXplZCArPSBwcm9jZXNzU3R5bGVOYW1lKHN0eWxlTmFtZSkgKyAnOic7XG4gICAgICAgIHNlcmlhbGl6ZWQgKz0gZGFuZ2Vyb3VzU3R5bGVWYWx1ZShzdHlsZU5hbWUsIHN0eWxlVmFsdWUpICsgJzsnO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VyaWFsaXplZCB8fCBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBmb3IgbXVsdGlwbGUgc3R5bGVzIG9uIGEgbm9kZS4gIElmIGEgdmFsdWUgaXMgc3BlY2lmaWVkIGFzXG4gICAqICcnIChlbXB0eSBzdHJpbmcpLCB0aGUgY29ycmVzcG9uZGluZyBzdHlsZSBwcm9wZXJ0eSB3aWxsIGJlIHVuc2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAgICogQHBhcmFtIHtvYmplY3R9IHN0eWxlc1xuICAgKi9cbiAgc2V0VmFsdWVGb3JTdHlsZXM6IGZ1bmN0aW9uIChub2RlLCBzdHlsZXMpIHtcbiAgICB2YXIgc3R5bGUgPSBub2RlLnN0eWxlO1xuICAgIGZvciAodmFyIHN0eWxlTmFtZSBpbiBzdHlsZXMpIHtcbiAgICAgIGlmICghc3R5bGVzLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuVmFsaWRTdHlsZShzdHlsZU5hbWUsIHN0eWxlc1tzdHlsZU5hbWVdKTtcbiAgICAgIH1cbiAgICAgIHZhciBzdHlsZVZhbHVlID0gZGFuZ2Vyb3VzU3R5bGVWYWx1ZShzdHlsZU5hbWUsIHN0eWxlc1tzdHlsZU5hbWVdKTtcbiAgICAgIGlmIChzdHlsZU5hbWUgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgc3R5bGVOYW1lID0gc3R5bGVGbG9hdEFjY2Vzc29yO1xuICAgICAgfVxuICAgICAgaWYgKHN0eWxlVmFsdWUpIHtcbiAgICAgICAgc3R5bGVbc3R5bGVOYW1lXSA9IHN0eWxlVmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZXhwYW5zaW9uID0gaGFzU2hvcnRoYW5kUHJvcGVydHlCdWcgJiYgQ1NTUHJvcGVydHkuc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zW3N0eWxlTmFtZV07XG4gICAgICAgIGlmIChleHBhbnNpb24pIHtcbiAgICAgICAgICAvLyBTaG9ydGhhbmQgcHJvcGVydHkgdGhhdCBJRTggd29uJ3QgbGlrZSB1bnNldHRpbmcsIHNvIHVuc2V0IGVhY2hcbiAgICAgICAgICAvLyBjb21wb25lbnQgdG8gcGxhY2F0ZSBpdFxuICAgICAgICAgIGZvciAodmFyIGluZGl2aWR1YWxTdHlsZU5hbWUgaW4gZXhwYW5zaW9uKSB7XG4gICAgICAgICAgICBzdHlsZVtpbmRpdmlkdWFsU3R5bGVOYW1lXSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHlsZVtzdHlsZU5hbWVdID0gJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKENTU1Byb3BlcnR5T3BlcmF0aW9ucywgJ0NTU1Byb3BlcnR5T3BlcmF0aW9ucycsIHtcbiAgc2V0VmFsdWVGb3JTdHlsZXM6ICdzZXRWYWx1ZUZvclN0eWxlcydcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENTU1Byb3BlcnR5T3BlcmF0aW9uczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQ2FsbGJhY2tRdWV1ZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCBwc2V1ZG8tZXZlbnQgbW9kdWxlIHRvIGhlbHAga2VlcCB0cmFjayBvZiBjb21wb25lbnRzIHdhaXRpbmcgdG9cbiAqIGJlIG5vdGlmaWVkIHdoZW4gdGhlaXIgRE9NIHJlcHJlc2VudGF0aW9ucyBhcmUgYXZhaWxhYmxlIGZvciB1c2UuXG4gKlxuICogVGhpcyBpbXBsZW1lbnRzIGBQb29sZWRDbGFzc2AsIHNvIHlvdSBzaG91bGQgbmV2ZXIgbmVlZCB0byBpbnN0YW50aWF0ZSB0aGlzLlxuICogSW5zdGVhZCwgdXNlIGBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpYC5cbiAqXG4gKiBAY2xhc3MgUmVhY3RNb3VudFJlYWR5XG4gKiBAaW1wbGVtZW50cyBQb29sZWRDbGFzc1xuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIENhbGxiYWNrUXVldWUoKSB7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IG51bGw7XG4gIHRoaXMuX2NvbnRleHRzID0gbnVsbDtcbn1cblxuYXNzaWduKENhbGxiYWNrUXVldWUucHJvdG90eXBlLCB7XG5cbiAgLyoqXG4gICAqIEVucXVldWVzIGEgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIGBub3RpZnlBbGxgIGlzIGludm9rZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIEludm9rZWQgd2hlbiBgbm90aWZ5QWxsYCBpcyBpbnZva2VkLlxuICAgKiBAcGFyYW0gez9vYmplY3R9IGNvbnRleHQgQ29udGV4dCB0byBjYWxsIGBjYWxsYmFja2Agd2l0aC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlOiBmdW5jdGlvbiAoY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwgW107XG4gICAgdGhpcy5fY29udGV4dHMgPSB0aGlzLl9jb250ZXh0cyB8fCBbXTtcbiAgICB0aGlzLl9jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgdGhpcy5fY29udGV4dHMucHVzaChjb250ZXh0KTtcbiAgfSxcblxuICAvKipcbiAgICogSW52b2tlcyBhbGwgZW5xdWV1ZWQgY2FsbGJhY2tzIGFuZCBjbGVhcnMgdGhlIHF1ZXVlLiBUaGlzIGlzIGludm9rZWQgYWZ0ZXJcbiAgICogdGhlIERPTSByZXByZXNlbnRhdGlvbiBvZiBhIGNvbXBvbmVudCBoYXMgYmVlbiBjcmVhdGVkIG9yIHVwZGF0ZWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbm90aWZ5QWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcztcbiAgICB2YXIgY29udGV4dHMgPSB0aGlzLl9jb250ZXh0cztcbiAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICAhKGNhbGxiYWNrcy5sZW5ndGggPT09IGNvbnRleHRzLmxlbmd0aCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnTWlzbWF0Y2hlZCBsaXN0IG9mIGNvbnRleHRzIGluIGNhbGxiYWNrIHF1ZXVlJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgdGhpcy5fY2FsbGJhY2tzID0gbnVsbDtcbiAgICAgIHRoaXMuX2NvbnRleHRzID0gbnVsbDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNhbGxiYWNrc1tpXS5jYWxsKGNvbnRleHRzW2ldKTtcbiAgICAgIH1cbiAgICAgIGNhbGxiYWNrcy5sZW5ndGggPSAwO1xuICAgICAgY29udGV4dHMubGVuZ3RoID0gMDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0aGUgaW50ZXJuYWwgcXVldWUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9jYWxsYmFja3MgPSBudWxsO1xuICAgIHRoaXMuX2NvbnRleHRzID0gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogYFBvb2xlZENsYXNzYCBsb29rcyBmb3IgdGhpcy5cbiAgICovXG4gIGRlc3RydWN0b3I6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxufSk7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhDYWxsYmFja1F1ZXVlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYWxsYmFja1F1ZXVlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBDaGFuZ2VFdmVudFBsdWdpblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xudmFyIEV2ZW50UHJvcGFnYXRvcnMgPSByZXF1aXJlKCcuL0V2ZW50UHJvcGFnYXRvcnMnKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxudmFyIGdldEV2ZW50VGFyZ2V0ID0gcmVxdWlyZSgnLi9nZXRFdmVudFRhcmdldCcpO1xudmFyIGlzRXZlbnRTdXBwb3J0ZWQgPSByZXF1aXJlKCcuL2lzRXZlbnRTdXBwb3J0ZWQnKTtcbnZhciBpc1RleHRJbnB1dEVsZW1lbnQgPSByZXF1aXJlKCcuL2lzVGV4dElucHV0RWxlbWVudCcpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcblxudmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xuXG52YXIgZXZlbnRUeXBlcyA9IHtcbiAgY2hhbmdlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25DaGFuZ2U6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNoYW5nZUNhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDaGFuZ2UsIHRvcExldmVsVHlwZXMudG9wQ2xpY2ssIHRvcExldmVsVHlwZXMudG9wRm9jdXMsIHRvcExldmVsVHlwZXMudG9wSW5wdXQsIHRvcExldmVsVHlwZXMudG9wS2V5RG93biwgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcCwgdG9wTGV2ZWxUeXBlcy50b3BTZWxlY3Rpb25DaGFuZ2VdXG4gIH1cbn07XG5cbi8qKlxuICogRm9yIElFIHNoaW1zXG4gKi9cbnZhciBhY3RpdmVFbGVtZW50ID0gbnVsbDtcbnZhciBhY3RpdmVFbGVtZW50SUQgPSBudWxsO1xudmFyIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IG51bGw7XG52YXIgYWN0aXZlRWxlbWVudFZhbHVlUHJvcCA9IG51bGw7XG5cbi8qKlxuICogU0VDVElPTjogaGFuZGxlIGBjaGFuZ2VgIGV2ZW50XG4gKi9cbmZ1bmN0aW9uIHNob3VsZFVzZUNoYW5nZUV2ZW50KGVsZW0pIHtcbiAgdmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBub2RlTmFtZSA9PT0gJ3NlbGVjdCcgfHwgbm9kZU5hbWUgPT09ICdpbnB1dCcgJiYgZWxlbS50eXBlID09PSAnZmlsZSc7XG59XG5cbnZhciBkb2VzQ2hhbmdlRXZlbnRCdWJibGUgPSBmYWxzZTtcbmlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcbiAgLy8gU2VlIGBoYW5kbGVDaGFuZ2VgIGNvbW1lbnQgYmVsb3dcbiAgZG9lc0NoYW5nZUV2ZW50QnViYmxlID0gaXNFdmVudFN1cHBvcnRlZCgnY2hhbmdlJykgJiYgKCEoJ2RvY3VtZW50TW9kZScgaW4gZG9jdW1lbnQpIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDgpO1xufVxuXG5mdW5jdGlvbiBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KG5hdGl2ZUV2ZW50KSB7XG4gIHZhciBldmVudCA9IFN5bnRoZXRpY0V2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLmNoYW5nZSwgYWN0aXZlRWxlbWVudElELCBuYXRpdmVFdmVudCwgZ2V0RXZlbnRUYXJnZXQobmF0aXZlRXZlbnQpKTtcbiAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcblxuICAvLyBJZiBjaGFuZ2UgYW5kIHByb3BlcnR5Y2hhbmdlIGJ1YmJsZWQsIHdlJ2QganVzdCBiaW5kIHRvIGl0IGxpa2UgYWxsIHRoZVxuICAvLyBvdGhlciBldmVudHMgYW5kIGhhdmUgaXQgZ28gdGhyb3VnaCBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuIFNpbmNlIGl0XG4gIC8vIGRvZXNuJ3QsIHdlIG1hbnVhbGx5IGxpc3RlbiBmb3IgdGhlIGV2ZW50cyBhbmQgc28gd2UgaGF2ZSB0byBlbnF1ZXVlIGFuZFxuICAvLyBwcm9jZXNzIHRoZSBhYnN0cmFjdCBldmVudCBtYW51YWxseS5cbiAgLy9cbiAgLy8gQmF0Y2hpbmcgaXMgbmVjZXNzYXJ5IGhlcmUgaW4gb3JkZXIgdG8gZW5zdXJlIHRoYXQgYWxsIGV2ZW50IGhhbmRsZXJzIHJ1blxuICAvLyBiZWZvcmUgdGhlIG5leHQgcmVyZW5kZXIgKGluY2x1ZGluZyBldmVudCBoYW5kbGVycyBhdHRhY2hlZCB0byBhbmNlc3RvclxuICAvLyBlbGVtZW50cyBpbnN0ZWFkIG9mIGRpcmVjdGx5IG9uIHRoZSBpbnB1dCkuIFdpdGhvdXQgdGhpcywgY29udHJvbGxlZFxuICAvLyBjb21wb25lbnRzIGRvbid0IHdvcmsgcHJvcGVybHkgaW4gY29uanVuY3Rpb24gd2l0aCBldmVudCBidWJibGluZyBiZWNhdXNlXG4gIC8vIHRoZSBjb21wb25lbnQgaXMgcmVyZW5kZXJlZCBhbmQgdGhlIHZhbHVlIHJldmVydGVkIGJlZm9yZSBhbGwgdGhlIGV2ZW50XG4gIC8vIGhhbmRsZXJzIGNhbiBydW4uIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzcwOC5cbiAgUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzKHJ1bkV2ZW50SW5CYXRjaCwgZXZlbnQpO1xufVxuXG5mdW5jdGlvbiBydW5FdmVudEluQmF0Y2goZXZlbnQpIHtcbiAgRXZlbnRQbHVnaW5IdWIuZW5xdWV1ZUV2ZW50cyhldmVudCk7XG4gIEV2ZW50UGx1Z2luSHViLnByb2Nlc3NFdmVudFF1ZXVlKGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gc3RhcnRXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KHRhcmdldCwgdGFyZ2V0SUQpIHtcbiAgYWN0aXZlRWxlbWVudCA9IHRhcmdldDtcbiAgYWN0aXZlRWxlbWVudElEID0gdGFyZ2V0SUQ7XG4gIGFjdGl2ZUVsZW1lbnQuYXR0YWNoRXZlbnQoJ29uY2hhbmdlJywgbWFudWFsRGlzcGF0Y2hDaGFuZ2VFdmVudCk7XG59XG5cbmZ1bmN0aW9uIHN0b3BXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KCkge1xuICBpZiAoIWFjdGl2ZUVsZW1lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYWN0aXZlRWxlbWVudC5kZXRhY2hFdmVudCgnb25jaGFuZ2UnLCBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KTtcbiAgYWN0aXZlRWxlbWVudCA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG59XG5cbmZ1bmN0aW9uIGdldFRhcmdldElERm9yQ2hhbmdlRXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcENoYW5nZSkge1xuICAgIHJldHVybiB0b3BMZXZlbFRhcmdldElEO1xuICB9XG59XG5mdW5jdGlvbiBoYW5kbGVFdmVudHNGb3JDaGFuZ2VFdmVudElFOCh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKSB7XG4gIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wRm9jdXMpIHtcbiAgICAvLyBzdG9wV2F0Y2hpbmcoKSBzaG91bGQgYmUgYSBub29wIGhlcmUgYnV0IHdlIGNhbGwgaXQganVzdCBpbiBjYXNlIHdlXG4gICAgLy8gbWlzc2VkIGEgYmx1ciBldmVudCBzb21laG93LlxuICAgIHN0b3BXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KCk7XG4gICAgc3RhcnRXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcbiAgfSBlbHNlIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQmx1cikge1xuICAgIHN0b3BXYXRjaGluZ0ZvckNoYW5nZUV2ZW50SUU4KCk7XG4gIH1cbn1cblxuLyoqXG4gKiBTRUNUSU9OOiBoYW5kbGUgYGlucHV0YCBldmVudFxuICovXG52YXIgaXNJbnB1dEV2ZW50U3VwcG9ydGVkID0gZmFsc2U7XG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIC8vIElFOSBjbGFpbXMgdG8gc3VwcG9ydCB0aGUgaW5wdXQgZXZlbnQgYnV0IGZhaWxzIHRvIHRyaWdnZXIgaXQgd2hlblxuICAvLyBkZWxldGluZyB0ZXh0LCBzbyB3ZSBpZ25vcmUgaXRzIGlucHV0IGV2ZW50c1xuICBpc0lucHV0RXZlbnRTdXBwb3J0ZWQgPSBpc0V2ZW50U3VwcG9ydGVkKCdpbnB1dCcpICYmICghKCdkb2N1bWVudE1vZGUnIGluIGRvY3VtZW50KSB8fCBkb2N1bWVudC5kb2N1bWVudE1vZGUgPiA5KTtcbn1cblxuLyoqXG4gKiAoRm9yIG9sZCBJRS4pIFJlcGxhY2VtZW50IGdldHRlci9zZXR0ZXIgZm9yIHRoZSBgdmFsdWVgIHByb3BlcnR5IHRoYXQgZ2V0c1xuICogc2V0IG9uIHRoZSBhY3RpdmUgZWxlbWVudC5cbiAqL1xudmFyIG5ld1ZhbHVlUHJvcCA9IHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3AuZ2V0LmNhbGwodGhpcyk7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgIC8vIENhc3QgdG8gYSBzdHJpbmcgc28gd2UgY2FuIGRvIGVxdWFsaXR5IGNoZWNrcy5cbiAgICBhY3RpdmVFbGVtZW50VmFsdWUgPSAnJyArIHZhbDtcbiAgICBhY3RpdmVFbGVtZW50VmFsdWVQcm9wLnNldC5jYWxsKHRoaXMsIHZhbCk7XG4gIH1cbn07XG5cbi8qKlxuICogKEZvciBvbGQgSUUuKSBTdGFydHMgdHJhY2tpbmcgcHJvcGVydHljaGFuZ2UgZXZlbnRzIG9uIHRoZSBwYXNzZWQtaW4gZWxlbWVudFxuICogYW5kIG92ZXJyaWRlIHRoZSB2YWx1ZSBwcm9wZXJ0eSBzbyB0aGF0IHdlIGNhbiBkaXN0aW5ndWlzaCB1c2VyIGV2ZW50cyBmcm9tXG4gKiB2YWx1ZSBjaGFuZ2VzIGluIEpTLlxuICovXG5mdW5jdGlvbiBzdGFydFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UodGFyZ2V0LCB0YXJnZXRJRCkge1xuICBhY3RpdmVFbGVtZW50ID0gdGFyZ2V0O1xuICBhY3RpdmVFbGVtZW50SUQgPSB0YXJnZXRJRDtcbiAgYWN0aXZlRWxlbWVudFZhbHVlID0gdGFyZ2V0LnZhbHVlO1xuICBhY3RpdmVFbGVtZW50VmFsdWVQcm9wID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQuY29uc3RydWN0b3IucHJvdG90eXBlLCAndmFsdWUnKTtcblxuICAvLyBOb3QgZ3VhcmRlZCBpbiBhIGNhbkRlZmluZVByb3BlcnR5IGNoZWNrOiBJRTggc3VwcG9ydHMgZGVmaW5lUHJvcGVydHkgb25seVxuICAvLyBvbiBET00gZWxlbWVudHNcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFjdGl2ZUVsZW1lbnQsICd2YWx1ZScsIG5ld1ZhbHVlUHJvcCk7XG4gIGFjdGl2ZUVsZW1lbnQuYXR0YWNoRXZlbnQoJ29ucHJvcGVydHljaGFuZ2UnLCBoYW5kbGVQcm9wZXJ0eUNoYW5nZSk7XG59XG5cbi8qKlxuICogKEZvciBvbGQgSUUuKSBSZW1vdmVzIHRoZSBldmVudCBsaXN0ZW5lcnMgZnJvbSB0aGUgY3VycmVudGx5LXRyYWNrZWQgZWxlbWVudCxcbiAqIGlmIGFueSBleGlzdHMuXG4gKi9cbmZ1bmN0aW9uIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCkge1xuICBpZiAoIWFjdGl2ZUVsZW1lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBkZWxldGUgcmVzdG9yZXMgdGhlIG9yaWdpbmFsIHByb3BlcnR5IGRlZmluaXRpb25cbiAgZGVsZXRlIGFjdGl2ZUVsZW1lbnQudmFsdWU7XG4gIGFjdGl2ZUVsZW1lbnQuZGV0YWNoRXZlbnQoJ29ucHJvcGVydHljaGFuZ2UnLCBoYW5kbGVQcm9wZXJ0eUNoYW5nZSk7XG5cbiAgYWN0aXZlRWxlbWVudCA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IG51bGw7XG4gIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3AgPSBudWxsO1xufVxuXG4vKipcbiAqIChGb3Igb2xkIElFLikgSGFuZGxlcyBhIHByb3BlcnR5Y2hhbmdlIGV2ZW50LCBzZW5kaW5nIGEgYGNoYW5nZWAgZXZlbnQgaWZcbiAqIHRoZSB2YWx1ZSBvZiB0aGUgYWN0aXZlIGVsZW1lbnQgaGFzIGNoYW5nZWQuXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZVByb3BlcnR5Q2hhbmdlKG5hdGl2ZUV2ZW50KSB7XG4gIGlmIChuYXRpdmVFdmVudC5wcm9wZXJ0eU5hbWUgIT09ICd2YWx1ZScpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHZhbHVlID0gbmF0aXZlRXZlbnQuc3JjRWxlbWVudC52YWx1ZTtcbiAgaWYgKHZhbHVlID09PSBhY3RpdmVFbGVtZW50VmFsdWUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYWN0aXZlRWxlbWVudFZhbHVlID0gdmFsdWU7XG5cbiAgbWFudWFsRGlzcGF0Y2hDaGFuZ2VFdmVudChuYXRpdmVFdmVudCk7XG59XG5cbi8qKlxuICogSWYgYSBgY2hhbmdlYCBldmVudCBzaG91bGQgYmUgZmlyZWQsIHJldHVybnMgdGhlIHRhcmdldCdzIElELlxuICovXG5mdW5jdGlvbiBnZXRUYXJnZXRJREZvcklucHV0RXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcElucHV0KSB7XG4gICAgLy8gSW4gbW9kZXJuIGJyb3dzZXJzIChpLmUuLCBub3QgSUU4IG9yIElFOSksIHRoZSBpbnB1dCBldmVudCBpcyBleGFjdGx5XG4gICAgLy8gd2hhdCB3ZSB3YW50IHNvIGZhbGwgdGhyb3VnaCBoZXJlIGFuZCB0cmlnZ2VyIGFuIGFic3RyYWN0IGV2ZW50XG4gICAgcmV0dXJuIHRvcExldmVsVGFyZ2V0SUQ7XG4gIH1cbn1cblxuLy8gRm9yIElFOCBhbmQgSUU5LlxuZnVuY3Rpb24gaGFuZGxlRXZlbnRzRm9ySW5wdXRFdmVudElFKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcbiAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BGb2N1cykge1xuICAgIC8vIEluIElFOCwgd2UgY2FuIGNhcHR1cmUgYWxtb3N0IGFsbCAudmFsdWUgY2hhbmdlcyBieSBhZGRpbmcgYVxuICAgIC8vIHByb3BlcnR5Y2hhbmdlIGhhbmRsZXIgYW5kIGxvb2tpbmcgZm9yIGV2ZW50cyB3aXRoIHByb3BlcnR5TmFtZVxuICAgIC8vIGVxdWFsIHRvICd2YWx1ZSdcbiAgICAvLyBJbiBJRTksIHByb3BlcnR5Y2hhbmdlIGZpcmVzIGZvciBtb3N0IGlucHV0IGV2ZW50cyBidXQgaXMgYnVnZ3kgYW5kXG4gICAgLy8gZG9lc24ndCBmaXJlIHdoZW4gdGV4dCBpcyBkZWxldGVkLCBidXQgY29udmVuaWVudGx5LCBzZWxlY3Rpb25jaGFuZ2VcbiAgICAvLyBhcHBlYXJzIHRvIGZpcmUgaW4gYWxsIG9mIHRoZSByZW1haW5pbmcgY2FzZXMgc28gd2UgY2F0Y2ggdGhvc2UgYW5kXG4gICAgLy8gZm9yd2FyZCB0aGUgZXZlbnQgaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkXG4gICAgLy8gSW4gZWl0aGVyIGNhc2UsIHdlIGRvbid0IHdhbnQgdG8gY2FsbCB0aGUgZXZlbnQgaGFuZGxlciBpZiB0aGUgdmFsdWVcbiAgICAvLyBpcyBjaGFuZ2VkIGZyb20gSlMgc28gd2UgcmVkZWZpbmUgYSBzZXR0ZXIgZm9yIGAudmFsdWVgIHRoYXQgdXBkYXRlc1xuICAgIC8vIG91ciBhY3RpdmVFbGVtZW50VmFsdWUgdmFyaWFibGUsIGFsbG93aW5nIHVzIHRvIGlnbm9yZSB0aG9zZSBjaGFuZ2VzXG4gICAgLy9cbiAgICAvLyBzdG9wV2F0Y2hpbmcoKSBzaG91bGQgYmUgYSBub29wIGhlcmUgYnV0IHdlIGNhbGwgaXQganVzdCBpbiBjYXNlIHdlXG4gICAgLy8gbWlzc2VkIGEgYmx1ciBldmVudCBzb21laG93LlxuICAgIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCk7XG4gICAgc3RhcnRXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcbiAgfSBlbHNlIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQmx1cikge1xuICAgIHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCk7XG4gIH1cbn1cblxuLy8gRm9yIElFOCBhbmQgSUU5LlxuZnVuY3Rpb24gZ2V0VGFyZ2V0SURGb3JJbnB1dEV2ZW50SUUodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZSB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wS2V5VXAgfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24pIHtcbiAgICAvLyBPbiB0aGUgc2VsZWN0aW9uY2hhbmdlIGV2ZW50LCB0aGUgdGFyZ2V0IGlzIGp1c3QgZG9jdW1lbnQgd2hpY2ggaXNuJ3RcbiAgICAvLyBoZWxwZnVsIGZvciB1cyBzbyBqdXN0IGNoZWNrIGFjdGl2ZUVsZW1lbnQgaW5zdGVhZC5cbiAgICAvL1xuICAgIC8vIDk5JSBvZiB0aGUgdGltZSwga2V5ZG93biBhbmQga2V5dXAgYXJlbid0IG5lY2Vzc2FyeS4gSUU4IGZhaWxzIHRvIGZpcmVcbiAgICAvLyBwcm9wZXJ0eWNoYW5nZSBvbiB0aGUgZmlyc3QgaW5wdXQgZXZlbnQgYWZ0ZXIgc2V0dGluZyBgdmFsdWVgIGZyb20gYVxuICAgIC8vIHNjcmlwdCBhbmQgZmlyZXMgb25seSBrZXlkb3duLCBrZXlwcmVzcywga2V5dXAuIENhdGNoaW5nIGtleXVwIHVzdWFsbHlcbiAgICAvLyBnZXRzIGl0IGFuZCBjYXRjaGluZyBrZXlkb3duIGxldHMgdXMgZmlyZSBhbiBldmVudCBmb3IgdGhlIGZpcnN0XG4gICAgLy8ga2V5c3Ryb2tlIGlmIHVzZXIgZG9lcyBhIGtleSByZXBlYXQgKGl0J2xsIGJlIGEgbGl0dGxlIGRlbGF5ZWQ6IHJpZ2h0XG4gICAgLy8gYmVmb3JlIHRoZSBzZWNvbmQga2V5c3Ryb2tlKS4gT3RoZXIgaW5wdXQgbWV0aG9kcyAoZS5nLiwgcGFzdGUpIHNlZW0gdG9cbiAgICAvLyBmaXJlIHNlbGVjdGlvbmNoYW5nZSBub3JtYWxseS5cbiAgICBpZiAoYWN0aXZlRWxlbWVudCAmJiBhY3RpdmVFbGVtZW50LnZhbHVlICE9PSBhY3RpdmVFbGVtZW50VmFsdWUpIHtcbiAgICAgIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9IGFjdGl2ZUVsZW1lbnQudmFsdWU7XG4gICAgICByZXR1cm4gYWN0aXZlRWxlbWVudElEO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFNFQ1RJT046IGhhbmRsZSBgY2xpY2tgIGV2ZW50XG4gKi9cbmZ1bmN0aW9uIHNob3VsZFVzZUNsaWNrRXZlbnQoZWxlbSkge1xuICAvLyBVc2UgdGhlIGBjbGlja2AgZXZlbnQgdG8gZGV0ZWN0IGNoYW5nZXMgdG8gY2hlY2tib3ggYW5kIHJhZGlvIGlucHV0cy5cbiAgLy8gVGhpcyBhcHByb2FjaCB3b3JrcyBhY3Jvc3MgYWxsIGJyb3dzZXJzLCB3aGVyZWFzIGBjaGFuZ2VgIGRvZXMgbm90IGZpcmVcbiAgLy8gdW50aWwgYGJsdXJgIGluIElFOC5cbiAgcmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnICYmIChlbGVtLnR5cGUgPT09ICdjaGVja2JveCcgfHwgZWxlbS50eXBlID09PSAncmFkaW8nKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGFyZ2V0SURGb3JDbGlja0V2ZW50KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcbiAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BDbGljaykge1xuICAgIHJldHVybiB0b3BMZXZlbFRhcmdldElEO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBwbHVnaW4gY3JlYXRlcyBhbiBgb25DaGFuZ2VgIGV2ZW50IHRoYXQgbm9ybWFsaXplcyBjaGFuZ2UgZXZlbnRzXG4gKiBhY3Jvc3MgZm9ybSBlbGVtZW50cy4gVGhpcyBldmVudCBmaXJlcyBhdCBhIHRpbWUgd2hlbiBpdCdzIHBvc3NpYmxlIHRvXG4gKiBjaGFuZ2UgdGhlIGVsZW1lbnQncyB2YWx1ZSB3aXRob3V0IHNlZWluZyBhIGZsaWNrZXIuXG4gKlxuICogU3VwcG9ydGVkIGVsZW1lbnRzIGFyZTpcbiAqIC0gaW5wdXQgKHNlZSBgaXNUZXh0SW5wdXRFbGVtZW50YClcbiAqIC0gdGV4dGFyZWFcbiAqIC0gc2VsZWN0XG4gKi9cbnZhciBDaGFuZ2VFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50c31cbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcblxuICAgIHZhciBnZXRUYXJnZXRJREZ1bmMsIGhhbmRsZUV2ZW50RnVuYztcbiAgICBpZiAoc2hvdWxkVXNlQ2hhbmdlRXZlbnQodG9wTGV2ZWxUYXJnZXQpKSB7XG4gICAgICBpZiAoZG9lc0NoYW5nZUV2ZW50QnViYmxlKSB7XG4gICAgICAgIGdldFRhcmdldElERnVuYyA9IGdldFRhcmdldElERm9yQ2hhbmdlRXZlbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoYW5kbGVFdmVudEZ1bmMgPSBoYW5kbGVFdmVudHNGb3JDaGFuZ2VFdmVudElFODtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVGV4dElucHV0RWxlbWVudCh0b3BMZXZlbFRhcmdldCkpIHtcbiAgICAgIGlmIChpc0lucHV0RXZlbnRTdXBwb3J0ZWQpIHtcbiAgICAgICAgZ2V0VGFyZ2V0SURGdW5jID0gZ2V0VGFyZ2V0SURGb3JJbnB1dEV2ZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2V0VGFyZ2V0SURGdW5jID0gZ2V0VGFyZ2V0SURGb3JJbnB1dEV2ZW50SUU7XG4gICAgICAgIGhhbmRsZUV2ZW50RnVuYyA9IGhhbmRsZUV2ZW50c0ZvcklucHV0RXZlbnRJRTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNob3VsZFVzZUNsaWNrRXZlbnQodG9wTGV2ZWxUYXJnZXQpKSB7XG4gICAgICBnZXRUYXJnZXRJREZ1bmMgPSBnZXRUYXJnZXRJREZvckNsaWNrRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGdldFRhcmdldElERnVuYykge1xuICAgICAgdmFyIHRhcmdldElEID0gZ2V0VGFyZ2V0SURGdW5jKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpO1xuICAgICAgaWYgKHRhcmdldElEKSB7XG4gICAgICAgIHZhciBldmVudCA9IFN5bnRoZXRpY0V2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLmNoYW5nZSwgdGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgICAgIGV2ZW50LnR5cGUgPSAnY2hhbmdlJztcbiAgICAgICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcbiAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChoYW5kbGVFdmVudEZ1bmMpIHtcbiAgICAgIGhhbmRsZUV2ZW50RnVuYyh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDaGFuZ2VFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQ2xpZW50UmVhY3RSb290SW5kZXhcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgbmV4dFJlYWN0Um9vdEluZGV4ID0gMDtcblxudmFyIENsaWVudFJlYWN0Um9vdEluZGV4ID0ge1xuICBjcmVhdGVSZWFjdFJvb3RJbmRleDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXh0UmVhY3RSb290SW5kZXgrKztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDbGllbnRSZWFjdFJvb3RJbmRleDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRE9NQ2hpbGRyZW5PcGVyYXRpb25zXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERhbmdlciA9IHJlcXVpcmUoJy4vRGFuZ2VyJyk7XG52YXIgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMgPSByZXF1aXJlKCcuL1JlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzJyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcblxudmFyIHNldElubmVySFRNTCA9IHJlcXVpcmUoJy4vc2V0SW5uZXJIVE1MJyk7XG52YXIgc2V0VGV4dENvbnRlbnQgPSByZXF1aXJlKCcuL3NldFRleHRDb250ZW50Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogSW5zZXJ0cyBgY2hpbGROb2RlYCBhcyBhIGNoaWxkIG9mIGBwYXJlbnROb2RlYCBhdCB0aGUgYGluZGV4YC5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHBhcmVudE5vZGUgUGFyZW50IG5vZGUgaW4gd2hpY2ggdG8gaW5zZXJ0LlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjaGlsZE5vZGUgQ2hpbGQgbm9kZSB0byBpbnNlcnQuXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggYXQgd2hpY2ggdG8gaW5zZXJ0IHRoZSBjaGlsZC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBpbnNlcnRDaGlsZEF0KHBhcmVudE5vZGUsIGNoaWxkTm9kZSwgaW5kZXgpIHtcbiAgLy8gQnkgZXhwbG9pdGluZyBhcnJheXMgcmV0dXJuaW5nIGB1bmRlZmluZWRgIGZvciBhbiB1bmRlZmluZWQgaW5kZXgsIHdlIGNhblxuICAvLyByZWx5IGV4Y2x1c2l2ZWx5IG9uIGBpbnNlcnRCZWZvcmUobm9kZSwgbnVsbClgIGluc3RlYWQgb2YgYWxzbyB1c2luZ1xuICAvLyBgYXBwZW5kQ2hpbGQobm9kZSlgLiBIb3dldmVyLCB1c2luZyBgdW5kZWZpbmVkYCBpcyBub3QgYWxsb3dlZCBieSBhbGxcbiAgLy8gYnJvd3NlcnMgc28gd2UgbXVzdCByZXBsYWNlIGl0IHdpdGggYG51bGxgLlxuXG4gIC8vIGZpeCByZW5kZXIgb3JkZXIgZXJyb3IgaW4gc2FmYXJpXG4gIC8vIElFOCB3aWxsIHRocm93IGVycm9yIHdoZW4gaW5kZXggb3V0IG9mIGxpc3Qgc2l6ZS5cbiAgdmFyIGJlZm9yZUNoaWxkID0gaW5kZXggPj0gcGFyZW50Tm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA/IG51bGwgOiBwYXJlbnROb2RlLmNoaWxkTm9kZXMuaXRlbShpbmRleCk7XG5cbiAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2hpbGROb2RlLCBiZWZvcmVDaGlsZCk7XG59XG5cbi8qKlxuICogT3BlcmF0aW9ucyBmb3IgdXBkYXRpbmcgd2l0aCBET00gY2hpbGRyZW4uXG4gKi9cbnZhciBET01DaGlsZHJlbk9wZXJhdGlvbnMgPSB7XG5cbiAgZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXA6IERhbmdlci5kYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cCxcblxuICB1cGRhdGVUZXh0Q29udGVudDogc2V0VGV4dENvbnRlbnQsXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSBjb21wb25lbnQncyBjaGlsZHJlbiBieSBwcm9jZXNzaW5nIGEgc2VyaWVzIG9mIHVwZGF0ZXMuIFRoZVxuICAgKiB1cGRhdGUgY29uZmlndXJhdGlvbnMgYXJlIGVhY2ggZXhwZWN0ZWQgdG8gaGF2ZSBhIGBwYXJlbnROb2RlYCBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheTxvYmplY3Q+fSB1cGRhdGVzIExpc3Qgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb25zLlxuICAgKiBAcGFyYW0ge2FycmF5PHN0cmluZz59IG1hcmt1cExpc3QgTGlzdCBvZiBtYXJrdXAgc3RyaW5ncy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcm9jZXNzVXBkYXRlczogZnVuY3Rpb24gKHVwZGF0ZXMsIG1hcmt1cExpc3QpIHtcbiAgICB2YXIgdXBkYXRlO1xuICAgIC8vIE1hcHBpbmcgZnJvbSBwYXJlbnQgSURzIHRvIGluaXRpYWwgY2hpbGQgb3JkZXJpbmdzLlxuICAgIHZhciBpbml0aWFsQ2hpbGRyZW4gPSBudWxsO1xuICAgIC8vIExpc3Qgb2YgY2hpbGRyZW4gdGhhdCB3aWxsIGJlIG1vdmVkIG9yIHJlbW92ZWQuXG4gICAgdmFyIHVwZGF0ZWRDaGlsZHJlbiA9IG51bGw7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVwZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHVwZGF0ZSA9IHVwZGF0ZXNbaV07XG4gICAgICBpZiAodXBkYXRlLnR5cGUgPT09IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLk1PVkVfRVhJU1RJTkcgfHwgdXBkYXRlLnR5cGUgPT09IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlJFTU9WRV9OT0RFKSB7XG4gICAgICAgIHZhciB1cGRhdGVkSW5kZXggPSB1cGRhdGUuZnJvbUluZGV4O1xuICAgICAgICB2YXIgdXBkYXRlZENoaWxkID0gdXBkYXRlLnBhcmVudE5vZGUuY2hpbGROb2Rlc1t1cGRhdGVkSW5kZXhdO1xuICAgICAgICB2YXIgcGFyZW50SUQgPSB1cGRhdGUucGFyZW50SUQ7XG5cbiAgICAgICAgIXVwZGF0ZWRDaGlsZCA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwcm9jZXNzVXBkYXRlcygpOiBVbmFibGUgdG8gZmluZCBjaGlsZCAlcyBvZiBlbGVtZW50LiBUaGlzICcgKyAncHJvYmFibHkgbWVhbnMgdGhlIERPTSB3YXMgdW5leHBlY3RlZGx5IG11dGF0ZWQgKGUuZy4sIGJ5IHRoZSAnICsgJ2Jyb3dzZXIpLCB1c3VhbGx5IGR1ZSB0byBmb3JnZXR0aW5nIGEgPHRib2R5PiB3aGVuIHVzaW5nIHRhYmxlcywgJyArICduZXN0aW5nIHRhZ3MgbGlrZSA8Zm9ybT4sIDxwPiwgb3IgPGE+LCBvciB1c2luZyBub24tU1ZHIGVsZW1lbnRzICcgKyAnaW4gYW4gPHN2Zz4gcGFyZW50LiBUcnkgaW5zcGVjdGluZyB0aGUgY2hpbGQgbm9kZXMgb2YgdGhlIGVsZW1lbnQgJyArICd3aXRoIFJlYWN0IElEIGAlc2AuJywgdXBkYXRlZEluZGV4LCBwYXJlbnRJRCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIGluaXRpYWxDaGlsZHJlbiA9IGluaXRpYWxDaGlsZHJlbiB8fCB7fTtcbiAgICAgICAgaW5pdGlhbENoaWxkcmVuW3BhcmVudElEXSA9IGluaXRpYWxDaGlsZHJlbltwYXJlbnRJRF0gfHwgW107XG4gICAgICAgIGluaXRpYWxDaGlsZHJlbltwYXJlbnRJRF1bdXBkYXRlZEluZGV4XSA9IHVwZGF0ZWRDaGlsZDtcblxuICAgICAgICB1cGRhdGVkQ2hpbGRyZW4gPSB1cGRhdGVkQ2hpbGRyZW4gfHwgW107XG4gICAgICAgIHVwZGF0ZWRDaGlsZHJlbi5wdXNoKHVwZGF0ZWRDaGlsZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJlbmRlcmVkTWFya3VwO1xuICAgIC8vIG1hcmt1cExpc3QgaXMgZWl0aGVyIGEgbGlzdCBvZiBtYXJrdXAgb3IganVzdCBhIGxpc3Qgb2YgZWxlbWVudHNcbiAgICBpZiAobWFya3VwTGlzdC5sZW5ndGggJiYgdHlwZW9mIG1hcmt1cExpc3RbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICByZW5kZXJlZE1hcmt1cCA9IERhbmdlci5kYW5nZXJvdXNseVJlbmRlck1hcmt1cChtYXJrdXBMaXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVuZGVyZWRNYXJrdXAgPSBtYXJrdXBMaXN0O1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSB1cGRhdGVkIGNoaWxkcmVuIGZpcnN0IHNvIHRoYXQgYHRvSW5kZXhgIGlzIGNvbnNpc3RlbnQuXG4gICAgaWYgKHVwZGF0ZWRDaGlsZHJlbikge1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB1cGRhdGVkQ2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdXBkYXRlZENoaWxkcmVuW2pdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodXBkYXRlZENoaWxkcmVuW2pdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBrID0gMDsgayA8IHVwZGF0ZXMubGVuZ3RoOyBrKyspIHtcbiAgICAgIHVwZGF0ZSA9IHVwZGF0ZXNba107XG4gICAgICBzd2l0Y2ggKHVwZGF0ZS50eXBlKSB7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuSU5TRVJUX01BUktVUDpcbiAgICAgICAgICBpbnNlcnRDaGlsZEF0KHVwZGF0ZS5wYXJlbnROb2RlLCByZW5kZXJlZE1hcmt1cFt1cGRhdGUubWFya3VwSW5kZXhdLCB1cGRhdGUudG9JbmRleCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuTU9WRV9FWElTVElORzpcbiAgICAgICAgICBpbnNlcnRDaGlsZEF0KHVwZGF0ZS5wYXJlbnROb2RlLCBpbml0aWFsQ2hpbGRyZW5bdXBkYXRlLnBhcmVudElEXVt1cGRhdGUuZnJvbUluZGV4XSwgdXBkYXRlLnRvSW5kZXgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlNFVF9NQVJLVVA6XG4gICAgICAgICAgc2V0SW5uZXJIVE1MKHVwZGF0ZS5wYXJlbnROb2RlLCB1cGRhdGUuY29udGVudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuVEVYVF9DT05URU5UOlxuICAgICAgICAgIHNldFRleHRDb250ZW50KHVwZGF0ZS5wYXJlbnROb2RlLCB1cGRhdGUuY29udGVudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuUkVNT1ZFX05PREU6XG4gICAgICAgICAgLy8gQWxyZWFkeSByZW1vdmVkIGJ5IHRoZSBmb3ItbG9vcCBhYm92ZS5cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKERPTUNoaWxkcmVuT3BlcmF0aW9ucywgJ0RPTUNoaWxkcmVuT3BlcmF0aW9ucycsIHtcbiAgdXBkYXRlVGV4dENvbnRlbnQ6ICd1cGRhdGVUZXh0Q29udGVudCdcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERPTUNoaWxkcmVuT3BlcmF0aW9uczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRE9NUHJvcGVydHlcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbmZ1bmN0aW9uIGNoZWNrTWFzayh2YWx1ZSwgYml0bWFzaykge1xuICByZXR1cm4gKHZhbHVlICYgYml0bWFzaykgPT09IGJpdG1hc2s7XG59XG5cbnZhciBET01Qcm9wZXJ0eUluamVjdGlvbiA9IHtcbiAgLyoqXG4gICAqIE1hcHBpbmcgZnJvbSBub3JtYWxpemVkLCBjYW1lbGNhc2VkIHByb3BlcnR5IG5hbWVzIHRvIGEgY29uZmlndXJhdGlvbiB0aGF0XG4gICAqIHNwZWNpZmllcyBob3cgdGhlIGFzc29jaWF0ZWQgRE9NIHByb3BlcnR5IHNob3VsZCBiZSBhY2Nlc3NlZCBvciByZW5kZXJlZC5cbiAgICovXG4gIE1VU1RfVVNFX0FUVFJJQlVURTogMHgxLFxuICBNVVNUX1VTRV9QUk9QRVJUWTogMHgyLFxuICBIQVNfU0lERV9FRkZFQ1RTOiAweDQsXG4gIEhBU19CT09MRUFOX1ZBTFVFOiAweDgsXG4gIEhBU19OVU1FUklDX1ZBTFVFOiAweDEwLFxuICBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRTogMHgyMCB8IDB4MTAsXG4gIEhBU19PVkVSTE9BREVEX0JPT0xFQU5fVkFMVUU6IDB4NDAsXG5cbiAgLyoqXG4gICAqIEluamVjdCBzb21lIHNwZWNpYWxpemVkIGtub3dsZWRnZSBhYm91dCB0aGUgRE9NLiBUaGlzIHRha2VzIGEgY29uZmlnIG9iamVjdFxuICAgKiB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICpcbiAgICogaXNDdXN0b21BdHRyaWJ1dGU6IGZ1bmN0aW9uIHRoYXQgZ2l2ZW4gYW4gYXR0cmlidXRlIG5hbWUgd2lsbCByZXR1cm4gdHJ1ZVxuICAgKiBpZiBpdCBjYW4gYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9NIHZlcmJhdGltLiBVc2VmdWwgZm9yIGRhdGEtKiBvciBhcmlhLSpcbiAgICogYXR0cmlidXRlcyB3aGVyZSBpdCdzIGltcG9zc2libGUgdG8gZW51bWVyYXRlIGFsbCBvZiB0aGUgcG9zc2libGVcbiAgICogYXR0cmlidXRlIG5hbWVzLFxuICAgKlxuICAgKiBQcm9wZXJ0aWVzOiBvYmplY3QgbWFwcGluZyBET00gcHJvcGVydHkgbmFtZSB0byBvbmUgb2YgdGhlXG4gICAqIERPTVByb3BlcnR5SW5qZWN0aW9uIGNvbnN0YW50cyBvciBudWxsLiBJZiB5b3VyIGF0dHJpYnV0ZSBpc24ndCBpbiBoZXJlLFxuICAgKiBpdCB3b24ndCBnZXQgd3JpdHRlbiB0byB0aGUgRE9NLlxuICAgKlxuICAgKiBET01BdHRyaWJ1dGVOYW1lczogb2JqZWN0IG1hcHBpbmcgUmVhY3QgYXR0cmlidXRlIG5hbWUgdG8gdGhlIERPTVxuICAgKiBhdHRyaWJ1dGUgbmFtZS4gQXR0cmlidXRlIG5hbWVzIG5vdCBzcGVjaWZpZWQgdXNlIHRoZSAqKmxvd2VyY2FzZSoqXG4gICAqIG5vcm1hbGl6ZWQgbmFtZS5cbiAgICpcbiAgICogRE9NQXR0cmlidXRlTmFtZXNwYWNlczogb2JqZWN0IG1hcHBpbmcgUmVhY3QgYXR0cmlidXRlIG5hbWUgdG8gdGhlIERPTVxuICAgKiBhdHRyaWJ1dGUgbmFtZXNwYWNlIFVSTC4gKEF0dHJpYnV0ZSBuYW1lcyBub3Qgc3BlY2lmaWVkIHVzZSBubyBuYW1lc3BhY2UuKVxuICAgKlxuICAgKiBET01Qcm9wZXJ0eU5hbWVzOiBzaW1pbGFyIHRvIERPTUF0dHJpYnV0ZU5hbWVzIGJ1dCBmb3IgRE9NIHByb3BlcnRpZXMuXG4gICAqIFByb3BlcnR5IG5hbWVzIG5vdCBzcGVjaWZpZWQgdXNlIHRoZSBub3JtYWxpemVkIG5hbWUuXG4gICAqXG4gICAqIERPTU11dGF0aW9uTWV0aG9kczogUHJvcGVydGllcyB0aGF0IHJlcXVpcmUgc3BlY2lhbCBtdXRhdGlvbiBtZXRob2RzLiBJZlxuICAgKiBgdmFsdWVgIGlzIHVuZGVmaW5lZCwgdGhlIG11dGF0aW9uIG1ldGhvZCBzaG91bGQgdW5zZXQgdGhlIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZG9tUHJvcGVydHlDb25maWcgdGhlIGNvbmZpZyBhcyBkZXNjcmliZWQgYWJvdmUuXG4gICAqL1xuICBpbmplY3RET01Qcm9wZXJ0eUNvbmZpZzogZnVuY3Rpb24gKGRvbVByb3BlcnR5Q29uZmlnKSB7XG4gICAgdmFyIEluamVjdGlvbiA9IERPTVByb3BlcnR5SW5qZWN0aW9uO1xuICAgIHZhciBQcm9wZXJ0aWVzID0gZG9tUHJvcGVydHlDb25maWcuUHJvcGVydGllcyB8fCB7fTtcbiAgICB2YXIgRE9NQXR0cmlidXRlTmFtZXNwYWNlcyA9IGRvbVByb3BlcnR5Q29uZmlnLkRPTUF0dHJpYnV0ZU5hbWVzcGFjZXMgfHwge307XG4gICAgdmFyIERPTUF0dHJpYnV0ZU5hbWVzID0gZG9tUHJvcGVydHlDb25maWcuRE9NQXR0cmlidXRlTmFtZXMgfHwge307XG4gICAgdmFyIERPTVByb3BlcnR5TmFtZXMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5ET01Qcm9wZXJ0eU5hbWVzIHx8IHt9O1xuICAgIHZhciBET01NdXRhdGlvbk1ldGhvZHMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5ET01NdXRhdGlvbk1ldGhvZHMgfHwge307XG5cbiAgICBpZiAoZG9tUHJvcGVydHlDb25maWcuaXNDdXN0b21BdHRyaWJ1dGUpIHtcbiAgICAgIERPTVByb3BlcnR5Ll9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9ucy5wdXNoKGRvbVByb3BlcnR5Q29uZmlnLmlzQ3VzdG9tQXR0cmlidXRlKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBQcm9wZXJ0aWVzKSB7XG4gICAgICAhIURPTVByb3BlcnR5LnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2luamVjdERPTVByb3BlcnR5Q29uZmlnKC4uLik6IFlvdVxcJ3JlIHRyeWluZyB0byBpbmplY3QgRE9NIHByb3BlcnR5ICcgKyAnXFwnJXNcXCcgd2hpY2ggaGFzIGFscmVhZHkgYmVlbiBpbmplY3RlZC4gWW91IG1heSBiZSBhY2NpZGVudGFsbHkgJyArICdpbmplY3RpbmcgdGhlIHNhbWUgRE9NIHByb3BlcnR5IGNvbmZpZyB0d2ljZSwgb3IgeW91IG1heSBiZSAnICsgJ2luamVjdGluZyB0d28gY29uZmlncyB0aGF0IGhhdmUgY29uZmxpY3RpbmcgcHJvcGVydHkgbmFtZXMuJywgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgdmFyIGxvd2VyQ2FzZWQgPSBwcm9wTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFyIHByb3BDb25maWcgPSBQcm9wZXJ0aWVzW3Byb3BOYW1lXTtcblxuICAgICAgdmFyIHByb3BlcnR5SW5mbyA9IHtcbiAgICAgICAgYXR0cmlidXRlTmFtZTogbG93ZXJDYXNlZCxcbiAgICAgICAgYXR0cmlidXRlTmFtZXNwYWNlOiBudWxsLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IHByb3BOYW1lLFxuICAgICAgICBtdXRhdGlvbk1ldGhvZDogbnVsbCxcblxuICAgICAgICBtdXN0VXNlQXR0cmlidXRlOiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLk1VU1RfVVNFX0FUVFJJQlVURSksXG4gICAgICAgIG11c3RVc2VQcm9wZXJ0eTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5NVVNUX1VTRV9QUk9QRVJUWSksXG4gICAgICAgIGhhc1NpZGVFZmZlY3RzOiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLkhBU19TSURFX0VGRkVDVFMpLFxuICAgICAgICBoYXNCb29sZWFuVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX0JPT0xFQU5fVkFMVUUpLFxuICAgICAgICBoYXNOdW1lcmljVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX05VTUVSSUNfVkFMVUUpLFxuICAgICAgICBoYXNQb3NpdGl2ZU51bWVyaWNWYWx1ZTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5IQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSksXG4gICAgICAgIGhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRSlcbiAgICAgIH07XG5cbiAgICAgICEoIXByb3BlcnR5SW5mby5tdXN0VXNlQXR0cmlidXRlIHx8ICFwcm9wZXJ0eUluZm8ubXVzdFVzZVByb3BlcnR5KSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdET01Qcm9wZXJ0eTogQ2Fubm90IHJlcXVpcmUgdXNpbmcgYm90aCBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5OiAlcycsIHByb3BOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAhKHByb3BlcnR5SW5mby5tdXN0VXNlUHJvcGVydHkgfHwgIXByb3BlcnR5SW5mby5oYXNTaWRlRWZmZWN0cykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRE9NUHJvcGVydHk6IFByb3BlcnRpZXMgdGhhdCBoYXZlIHNpZGUgZWZmZWN0cyBtdXN0IHVzZSBwcm9wZXJ0eTogJXMnLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgIShwcm9wZXJ0eUluZm8uaGFzQm9vbGVhblZhbHVlICsgcHJvcGVydHlJbmZvLmhhc051bWVyaWNWYWx1ZSArIHByb3BlcnR5SW5mby5oYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlIDw9IDEpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0RPTVByb3BlcnR5OiBWYWx1ZSBjYW4gYmUgb25lIG9mIGJvb2xlYW4sIG92ZXJsb2FkZWQgYm9vbGVhbiwgb3IgJyArICdudW1lcmljIHZhbHVlLCBidXQgbm90IGEgY29tYmluYXRpb246ICVzJywgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgRE9NUHJvcGVydHkuZ2V0UG9zc2libGVTdGFuZGFyZE5hbWVbbG93ZXJDYXNlZF0gPSBwcm9wTmFtZTtcbiAgICAgIH1cblxuICAgICAgaWYgKERPTUF0dHJpYnV0ZU5hbWVzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICB2YXIgYXR0cmlidXRlTmFtZSA9IERPTUF0dHJpYnV0ZU5hbWVzW3Byb3BOYW1lXTtcbiAgICAgICAgcHJvcGVydHlJbmZvLmF0dHJpYnV0ZU5hbWUgPSBhdHRyaWJ1dGVOYW1lO1xuICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lW2F0dHJpYnV0ZU5hbWVdID0gcHJvcE5hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKERPTUF0dHJpYnV0ZU5hbWVzcGFjZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lc3BhY2UgPSBET01BdHRyaWJ1dGVOYW1lc3BhY2VzW3Byb3BOYW1lXTtcbiAgICAgIH1cblxuICAgICAgaWYgKERPTVByb3BlcnR5TmFtZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BlcnR5SW5mby5wcm9wZXJ0eU5hbWUgPSBET01Qcm9wZXJ0eU5hbWVzW3Byb3BOYW1lXTtcbiAgICAgIH1cblxuICAgICAgaWYgKERPTU11dGF0aW9uTWV0aG9kcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgcHJvcGVydHlJbmZvLm11dGF0aW9uTWV0aG9kID0gRE9NTXV0YXRpb25NZXRob2RzW3Byb3BOYW1lXTtcbiAgICAgIH1cblxuICAgICAgRE9NUHJvcGVydHkucHJvcGVydGllc1twcm9wTmFtZV0gPSBwcm9wZXJ0eUluZm87XG4gICAgfVxuICB9XG59O1xudmFyIGRlZmF1bHRWYWx1ZUNhY2hlID0ge307XG5cbi8qKlxuICogRE9NUHJvcGVydHkgZXhwb3J0cyBsb29rdXAgb2JqZWN0cyB0aGF0IGNhbiBiZSB1c2VkIGxpa2UgZnVuY3Rpb25zOlxuICpcbiAqICAgPiBET01Qcm9wZXJ0eS5pc1ZhbGlkWydpZCddXG4gKiAgIHRydWVcbiAqICAgPiBET01Qcm9wZXJ0eS5pc1ZhbGlkWydmb29iYXInXVxuICogICB1bmRlZmluZWRcbiAqXG4gKiBBbHRob3VnaCB0aGlzIG1heSBiZSBjb25mdXNpbmcsIGl0IHBlcmZvcm1zIGJldHRlciBpbiBnZW5lcmFsLlxuICpcbiAqIEBzZWUgaHR0cDovL2pzcGVyZi5jb20va2V5LWV4aXN0c1xuICogQHNlZSBodHRwOi8vanNwZXJmLmNvbS9rZXktbWlzc2luZ1xuICovXG52YXIgRE9NUHJvcGVydHkgPSB7XG5cbiAgSURfQVRUUklCVVRFX05BTUU6ICdkYXRhLXJlYWN0aWQnLFxuXG4gIC8qKlxuICAgKiBNYXAgZnJvbSBwcm9wZXJ0eSBcInN0YW5kYXJkIG5hbWVcIiB0byBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IGhvdyB0byBzZXRcbiAgICogdGhlIHByb3BlcnR5IGluIHRoZSBET00uIEVhY2ggb2JqZWN0IGNvbnRhaW5zOlxuICAgKlxuICAgKiBhdHRyaWJ1dGVOYW1lOlxuICAgKiAgIFVzZWQgd2hlbiByZW5kZXJpbmcgbWFya3VwIG9yIHdpdGggYCpBdHRyaWJ1dGUoKWAuXG4gICAqIGF0dHJpYnV0ZU5hbWVzcGFjZVxuICAgKiBwcm9wZXJ0eU5hbWU6XG4gICAqICAgVXNlZCBvbiBET00gbm9kZSBpbnN0YW5jZXMuIChUaGlzIGluY2x1ZGVzIHByb3BlcnRpZXMgdGhhdCBtdXRhdGUgZHVlIHRvXG4gICAqICAgZXh0ZXJuYWwgZmFjdG9ycy4pXG4gICAqIG11dGF0aW9uTWV0aG9kOlxuICAgKiAgIElmIG5vbi1udWxsLCB1c2VkIGluc3RlYWQgb2YgdGhlIHByb3BlcnR5IG9yIGBzZXRBdHRyaWJ1dGUoKWAgYWZ0ZXJcbiAgICogICBpbml0aWFsIHJlbmRlci5cbiAgICogbXVzdFVzZUF0dHJpYnV0ZTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBtdXN0IGJlIGFjY2Vzc2VkIGFuZCBtdXRhdGVkIHVzaW5nIGAqQXR0cmlidXRlKClgLlxuICAgKiAgIChUaGlzIGluY2x1ZGVzIGFueXRoaW5nIHRoYXQgZmFpbHMgYDxwcm9wTmFtZT4gaW4gPGVsZW1lbnQ+YC4pXG4gICAqIG11c3RVc2VQcm9wZXJ0eTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBtdXN0IGJlIGFjY2Vzc2VkIGFuZCBtdXRhdGVkIGFzIGFuIG9iamVjdCBwcm9wZXJ0eS5cbiAgICogaGFzU2lkZUVmZmVjdHM6XG4gICAqICAgV2hldGhlciBvciBub3Qgc2V0dGluZyBhIHZhbHVlIGNhdXNlcyBzaWRlIGVmZmVjdHMgc3VjaCBhcyB0cmlnZ2VyaW5nXG4gICAqICAgcmVzb3VyY2VzIHRvIGJlIGxvYWRlZCBvciB0ZXh0IHNlbGVjdGlvbiBjaGFuZ2VzLiBJZiB0cnVlLCB3ZSByZWFkIGZyb21cbiAgICogICB0aGUgRE9NIGJlZm9yZSB1cGRhdGluZyB0byBlbnN1cmUgdGhhdCB0aGUgdmFsdWUgaXMgb25seSBzZXQgaWYgaXQgaGFzXG4gICAqICAgY2hhbmdlZC5cbiAgICogaGFzQm9vbGVhblZhbHVlOlxuICAgKiAgIFdoZXRoZXIgdGhlIHByb3BlcnR5IHNob3VsZCBiZSByZW1vdmVkIHdoZW4gc2V0IHRvIGEgZmFsc2V5IHZhbHVlLlxuICAgKiBoYXNOdW1lcmljVmFsdWU6XG4gICAqICAgV2hldGhlciB0aGUgcHJvcGVydHkgbXVzdCBiZSBudW1lcmljIG9yIHBhcnNlIGFzIGEgbnVtZXJpYyBhbmQgc2hvdWxkIGJlXG4gICAqICAgcmVtb3ZlZCB3aGVuIHNldCB0byBhIGZhbHNleSB2YWx1ZS5cbiAgICogaGFzUG9zaXRpdmVOdW1lcmljVmFsdWU6XG4gICAqICAgV2hldGhlciB0aGUgcHJvcGVydHkgbXVzdCBiZSBwb3NpdGl2ZSBudW1lcmljIG9yIHBhcnNlIGFzIGEgcG9zaXRpdmVcbiAgICogICBudW1lcmljIGFuZCBzaG91bGQgYmUgcmVtb3ZlZCB3aGVuIHNldCB0byBhIGZhbHNleSB2YWx1ZS5cbiAgICogaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBjYW4gYmUgdXNlZCBhcyBhIGZsYWcgYXMgd2VsbCBhcyB3aXRoIGEgdmFsdWUuXG4gICAqICAgUmVtb3ZlZCB3aGVuIHN0cmljdGx5IGVxdWFsIHRvIGZhbHNlOyBwcmVzZW50IHdpdGhvdXQgYSB2YWx1ZSB3aGVuXG4gICAqICAgc3RyaWN0bHkgZXF1YWwgdG8gdHJ1ZTsgcHJlc2VudCB3aXRoIGEgdmFsdWUgb3RoZXJ3aXNlLlxuICAgKi9cbiAgcHJvcGVydGllczoge30sXG5cbiAgLyoqXG4gICAqIE1hcHBpbmcgZnJvbSBsb3dlcmNhc2UgcHJvcGVydHkgbmFtZXMgdG8gdGhlIHByb3Blcmx5IGNhc2VkIHZlcnNpb24sIHVzZWRcbiAgICogdG8gd2FybiBpbiB0aGUgY2FzZSBvZiBtaXNzaW5nIHByb3BlcnRpZXMuIEF2YWlsYWJsZSBvbmx5IGluIF9fREVWX18uXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBnZXRQb3NzaWJsZVN0YW5kYXJkTmFtZTogXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHt9IDogbnVsbCxcblxuICAvKipcbiAgICogQWxsIG9mIHRoZSBpc0N1c3RvbUF0dHJpYnV0ZSgpIGZ1bmN0aW9ucyB0aGF0IGhhdmUgYmVlbiBpbmplY3RlZC5cbiAgICovXG4gIF9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9uczogW10sXG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIGEgcHJvcGVydHkgbmFtZSBpcyBhIGN1c3RvbSBhdHRyaWJ1dGUuXG4gICAqIEBtZXRob2RcbiAgICovXG4gIGlzQ3VzdG9tQXR0cmlidXRlOiBmdW5jdGlvbiAoYXR0cmlidXRlTmFtZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgRE9NUHJvcGVydHkuX2lzQ3VzdG9tQXR0cmlidXRlRnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXNDdXN0b21BdHRyaWJ1dGVGbiA9IERPTVByb3BlcnR5Ll9pc0N1c3RvbUF0dHJpYnV0ZUZ1bmN0aW9uc1tpXTtcbiAgICAgIGlmIChpc0N1c3RvbUF0dHJpYnV0ZUZuKGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGRlZmF1bHQgcHJvcGVydHkgdmFsdWUgZm9yIGEgRE9NIHByb3BlcnR5IChpLmUuLCBub3QgYW5cbiAgICogYXR0cmlidXRlKS4gTW9zdCBkZWZhdWx0IHZhbHVlcyBhcmUgJycgb3IgZmFsc2UsIGJ1dCBub3QgYWxsLiBXb3JzZSB5ZXQsXG4gICAqIHNvbWUgKGluIHBhcnRpY3VsYXIsIGB0eXBlYCkgdmFyeSBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2YgZWxlbWVudC5cbiAgICpcbiAgICogVE9ETzogSXMgaXQgYmV0dGVyIHRvIGdyYWIgYWxsIHRoZSBwb3NzaWJsZSBwcm9wZXJ0aWVzIHdoZW4gY3JlYXRpbmcgYW5cbiAgICogZWxlbWVudCB0byBhdm9pZCBoYXZpbmcgdG8gY3JlYXRlIHRoZSBzYW1lIGVsZW1lbnQgdHdpY2U/XG4gICAqL1xuICBnZXREZWZhdWx0VmFsdWVGb3JQcm9wZXJ0eTogZnVuY3Rpb24gKG5vZGVOYW1lLCBwcm9wKSB7XG4gICAgdmFyIG5vZGVEZWZhdWx0cyA9IGRlZmF1bHRWYWx1ZUNhY2hlW25vZGVOYW1lXTtcbiAgICB2YXIgdGVzdEVsZW1lbnQ7XG4gICAgaWYgKCFub2RlRGVmYXVsdHMpIHtcbiAgICAgIGRlZmF1bHRWYWx1ZUNhY2hlW25vZGVOYW1lXSA9IG5vZGVEZWZhdWx0cyA9IHt9O1xuICAgIH1cbiAgICBpZiAoIShwcm9wIGluIG5vZGVEZWZhdWx0cykpIHtcbiAgICAgIHRlc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSk7XG4gICAgICBub2RlRGVmYXVsdHNbcHJvcF0gPSB0ZXN0RWxlbWVudFtwcm9wXTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGVEZWZhdWx0c1twcm9wXTtcbiAgfSxcblxuICBpbmplY3Rpb246IERPTVByb3BlcnR5SW5qZWN0aW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IERPTVByb3BlcnR5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBET01Qcm9wZXJ0eU9wZXJhdGlvbnNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NUHJvcGVydHkgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5Jyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcblxudmFyIHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyID0gcmVxdWlyZSgnLi9xdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3NlcicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8vIFNpbXBsaWZpZWQgc3Vic2V0XG52YXIgVkFMSURfQVRUUklCVVRFX05BTUVfUkVHRVggPSAvXlthLXpBLVpfXVtcXHdcXC5cXC1dKiQvO1xudmFyIGlsbGVnYWxBdHRyaWJ1dGVOYW1lQ2FjaGUgPSB7fTtcbnZhciB2YWxpZGF0ZWRBdHRyaWJ1dGVOYW1lQ2FjaGUgPSB7fTtcblxuZnVuY3Rpb24gaXNBdHRyaWJ1dGVOYW1lU2FmZShhdHRyaWJ1dGVOYW1lKSB7XG4gIGlmICh2YWxpZGF0ZWRBdHRyaWJ1dGVOYW1lQ2FjaGUuaGFzT3duUHJvcGVydHkoYXR0cmlidXRlTmFtZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoaWxsZWdhbEF0dHJpYnV0ZU5hbWVDYWNoZS5oYXNPd25Qcm9wZXJ0eShhdHRyaWJ1dGVOYW1lKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoVkFMSURfQVRUUklCVVRFX05BTUVfUkVHRVgudGVzdChhdHRyaWJ1dGVOYW1lKSkge1xuICAgIHZhbGlkYXRlZEF0dHJpYnV0ZU5hbWVDYWNoZVthdHRyaWJ1dGVOYW1lXSA9IHRydWU7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWxsZWdhbEF0dHJpYnV0ZU5hbWVDYWNoZVthdHRyaWJ1dGVOYW1lXSA9IHRydWU7XG4gIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnSW52YWxpZCBhdHRyaWJ1dGUgbmFtZTogYCVzYCcsIGF0dHJpYnV0ZU5hbWUpIDogdW5kZWZpbmVkO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHNob3VsZElnbm9yZVZhbHVlKHByb3BlcnR5SW5mbywgdmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgfHwgcHJvcGVydHlJbmZvLmhhc0Jvb2xlYW5WYWx1ZSAmJiAhdmFsdWUgfHwgcHJvcGVydHlJbmZvLmhhc051bWVyaWNWYWx1ZSAmJiBpc05hTih2YWx1ZSkgfHwgcHJvcGVydHlJbmZvLmhhc1Bvc2l0aXZlTnVtZXJpY1ZhbHVlICYmIHZhbHVlIDwgMSB8fCBwcm9wZXJ0eUluZm8uaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZSAmJiB2YWx1ZSA9PT0gZmFsc2U7XG59XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciByZWFjdFByb3BzID0ge1xuICAgIGNoaWxkcmVuOiB0cnVlLFxuICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB0cnVlLFxuICAgIGtleTogdHJ1ZSxcbiAgICByZWY6IHRydWVcbiAgfTtcbiAgdmFyIHdhcm5lZFByb3BlcnRpZXMgPSB7fTtcblxuICB2YXIgd2FyblVua25vd25Qcm9wZXJ0eSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKHJlYWN0UHJvcHMuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgcmVhY3RQcm9wc1tuYW1lXSB8fCB3YXJuZWRQcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KG5hbWUpICYmIHdhcm5lZFByb3BlcnRpZXNbbmFtZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3YXJuZWRQcm9wZXJ0aWVzW25hbWVdID0gdHJ1ZTtcbiAgICB2YXIgbG93ZXJDYXNlZE5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBkYXRhLSogYXR0cmlidXRlcyBzaG91bGQgYmUgbG93ZXJjYXNlOyBzdWdnZXN0IHRoZSBsb3dlcmNhc2UgdmVyc2lvblxuICAgIHZhciBzdGFuZGFyZE5hbWUgPSBET01Qcm9wZXJ0eS5pc0N1c3RvbUF0dHJpYnV0ZShsb3dlckNhc2VkTmFtZSkgPyBsb3dlckNhc2VkTmFtZSA6IERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lLmhhc093blByb3BlcnR5KGxvd2VyQ2FzZWROYW1lKSA/IERPTVByb3BlcnR5LmdldFBvc3NpYmxlU3RhbmRhcmROYW1lW2xvd2VyQ2FzZWROYW1lXSA6IG51bGw7XG5cbiAgICAvLyBGb3Igbm93LCBvbmx5IHdhcm4gd2hlbiB3ZSBoYXZlIGEgc3VnZ2VzdGVkIGNvcnJlY3Rpb24uIFRoaXMgcHJldmVudHNcbiAgICAvLyBsb2dnaW5nIHRvbyBtdWNoIHdoZW4gdXNpbmcgdHJhbnNmZXJQcm9wc1RvLlxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHN0YW5kYXJkTmFtZSA9PSBudWxsLCAnVW5rbm93biBET00gcHJvcGVydHkgJXMuIERpZCB5b3UgbWVhbiAlcz8nLCBuYW1lLCBzdGFuZGFyZE5hbWUpIDogdW5kZWZpbmVkO1xuICB9O1xufVxuXG4vKipcbiAqIE9wZXJhdGlvbnMgZm9yIGRlYWxpbmcgd2l0aCBET00gcHJvcGVydGllcy5cbiAqL1xudmFyIERPTVByb3BlcnR5T3BlcmF0aW9ucyA9IHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIHRoZSBJRCBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIFVuZXNjYXBlZCBJRC5cbiAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgc3RyaW5nLlxuICAgKi9cbiAgY3JlYXRlTWFya3VwRm9ySUQ6IGZ1bmN0aW9uIChpZCkge1xuICAgIHJldHVybiBET01Qcm9wZXJ0eS5JRF9BVFRSSUJVVEVfTkFNRSArICc9JyArIHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyKGlkKTtcbiAgfSxcblxuICBzZXRBdHRyaWJ1dGVGb3JJRDogZnVuY3Rpb24gKG5vZGUsIGlkKSB7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoRE9NUHJvcGVydHkuSURfQVRUUklCVVRFX05BTUUsIGlkKTtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIGEgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHJldHVybiB7P3N0cmluZ30gTWFya3VwIHN0cmluZywgb3IgbnVsbCBpZiB0aGUgcHJvcGVydHkgd2FzIGludmFsaWQuXG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JQcm9wZXJ0eTogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIHByb3BlcnR5SW5mbyA9IERPTVByb3BlcnR5LnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW25hbWVdIDogbnVsbDtcbiAgICBpZiAocHJvcGVydHlJbmZvKSB7XG4gICAgICBpZiAoc2hvdWxkSWdub3JlVmFsdWUocHJvcGVydHlJbmZvLCB2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgICAgdmFyIGF0dHJpYnV0ZU5hbWUgPSBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZTtcbiAgICAgIGlmIChwcm9wZXJ0eUluZm8uaGFzQm9vbGVhblZhbHVlIHx8IHByb3BlcnR5SW5mby5oYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlICYmIHZhbHVlID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVOYW1lICsgJz1cIlwiJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdHRyaWJ1dGVOYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUobmFtZSkpIHtcbiAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FyblVua25vd25Qcm9wZXJ0eShuYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgbWFya3VwIGZvciBhIGN1c3RvbSBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBzdHJpbmcsIG9yIGVtcHR5IHN0cmluZyBpZiB0aGUgcHJvcGVydHkgd2FzIGludmFsaWQuXG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JDdXN0b21BdHRyaWJ1dGU6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghaXNBdHRyaWJ1dGVOYW1lU2FmZShuYW1lKSB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHJldHVybiBuYW1lICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBmb3IgYSBwcm9wZXJ0eSBvbiBhIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqL1xuICBzZXRWYWx1ZUZvclByb3BlcnR5OiBmdW5jdGlvbiAobm9kZSwgbmFtZSwgdmFsdWUpIHtcbiAgICB2YXIgcHJvcGVydHlJbmZvID0gRE9NUHJvcGVydHkucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IERPTVByb3BlcnR5LnByb3BlcnRpZXNbbmFtZV0gOiBudWxsO1xuICAgIGlmIChwcm9wZXJ0eUluZm8pIHtcbiAgICAgIHZhciBtdXRhdGlvbk1ldGhvZCA9IHByb3BlcnR5SW5mby5tdXRhdGlvbk1ldGhvZDtcbiAgICAgIGlmIChtdXRhdGlvbk1ldGhvZCkge1xuICAgICAgICBtdXRhdGlvbk1ldGhvZChub2RlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHNob3VsZElnbm9yZVZhbHVlKHByb3BlcnR5SW5mbywgdmFsdWUpKSB7XG4gICAgICAgIHRoaXMuZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eShub2RlLCBuYW1lKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlJbmZvLm11c3RVc2VBdHRyaWJ1dGUpIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZU5hbWUgPSBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZTtcbiAgICAgICAgdmFyIG5hbWVzcGFjZSA9IHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lc3BhY2U7XG4gICAgICAgIC8vIGBzZXRBdHRyaWJ1dGVgIHdpdGggb2JqZWN0cyBiZWNvbWVzIG9ubHkgYFtvYmplY3RdYCBpbiBJRTgvOSxcbiAgICAgICAgLy8gKCcnICsgdmFsdWUpIG1ha2VzIGl0IG91dHB1dCB0aGUgY29ycmVjdCB0b1N0cmluZygpLXZhbHVlLlxuICAgICAgICBpZiAobmFtZXNwYWNlKSB7XG4gICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGVOUyhuYW1lc3BhY2UsIGF0dHJpYnV0ZU5hbWUsICcnICsgdmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnR5SW5mby5oYXNCb29sZWFuVmFsdWUgfHwgcHJvcGVydHlJbmZvLmhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWUgJiYgdmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCAnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgJycgKyB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwcm9wTmFtZSA9IHByb3BlcnR5SW5mby5wcm9wZXJ0eU5hbWU7XG4gICAgICAgIC8vIE11c3QgZXhwbGljaXRseSBjYXN0IHZhbHVlcyBmb3IgSEFTX1NJREVfRUZGRUNUUy1wcm9wZXJ0aWVzIHRvIHRoZVxuICAgICAgICAvLyBwcm9wZXJ0eSB0eXBlIGJlZm9yZSBjb21wYXJpbmc7IG9ubHkgYHZhbHVlYCBkb2VzIGFuZCBpcyBzdHJpbmcuXG4gICAgICAgIGlmICghcHJvcGVydHlJbmZvLmhhc1NpZGVFZmZlY3RzIHx8ICcnICsgbm9kZVtwcm9wTmFtZV0gIT09ICcnICsgdmFsdWUpIHtcbiAgICAgICAgICAvLyBDb250cmFyeSB0byBgc2V0QXR0cmlidXRlYCwgb2JqZWN0IHByb3BlcnRpZXMgYXJlIHByb3Blcmx5XG4gICAgICAgICAgLy8gYHRvU3RyaW5nYGVkIGJ5IElFOC85LlxuICAgICAgICAgIG5vZGVbcHJvcE5hbWVdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKG5hbWUpKSB7XG4gICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JBdHRyaWJ1dGUobm9kZSwgbmFtZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FyblVua25vd25Qcm9wZXJ0eShuYW1lKTtcbiAgICB9XG4gIH0sXG5cbiAgc2V0VmFsdWVGb3JBdHRyaWJ1dGU6IGZ1bmN0aW9uIChub2RlLCBuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghaXNBdHRyaWJ1dGVOYW1lU2FmZShuYW1lKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsICcnICsgdmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGVsZXRlcyB0aGUgdmFsdWUgZm9yIGEgcHJvcGVydHkgb24gYSBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICovXG4gIGRlbGV0ZVZhbHVlRm9yUHJvcGVydHk6IGZ1bmN0aW9uIChub2RlLCBuYW1lKSB7XG4gICAgdmFyIHByb3BlcnR5SW5mbyA9IERPTVByb3BlcnR5LnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW25hbWVdIDogbnVsbDtcbiAgICBpZiAocHJvcGVydHlJbmZvKSB7XG4gICAgICB2YXIgbXV0YXRpb25NZXRob2QgPSBwcm9wZXJ0eUluZm8ubXV0YXRpb25NZXRob2Q7XG4gICAgICBpZiAobXV0YXRpb25NZXRob2QpIHtcbiAgICAgICAgbXV0YXRpb25NZXRob2Qobm9kZSwgdW5kZWZpbmVkKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlJbmZvLm11c3RVc2VBdHRyaWJ1dGUpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUocHJvcGVydHlJbmZvLmF0dHJpYnV0ZU5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHByb3BOYW1lID0gcHJvcGVydHlJbmZvLnByb3BlcnR5TmFtZTtcbiAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9IERPTVByb3BlcnR5LmdldERlZmF1bHRWYWx1ZUZvclByb3BlcnR5KG5vZGUubm9kZU5hbWUsIHByb3BOYW1lKTtcbiAgICAgICAgaWYgKCFwcm9wZXJ0eUluZm8uaGFzU2lkZUVmZmVjdHMgfHwgJycgKyBub2RlW3Byb3BOYW1lXSAhPT0gZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgbm9kZVtwcm9wTmFtZV0gPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKG5hbWUpKSB7XG4gICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICB9IGVsc2UgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm5Vbmtub3duUHJvcGVydHkobmFtZSk7XG4gICAgfVxuICB9XG5cbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhET01Qcm9wZXJ0eU9wZXJhdGlvbnMsICdET01Qcm9wZXJ0eU9wZXJhdGlvbnMnLCB7XG4gIHNldFZhbHVlRm9yUHJvcGVydHk6ICdzZXRWYWx1ZUZvclByb3BlcnR5JyxcbiAgc2V0VmFsdWVGb3JBdHRyaWJ1dGU6ICdzZXRWYWx1ZUZvckF0dHJpYnV0ZScsXG4gIGRlbGV0ZVZhbHVlRm9yUHJvcGVydHk6ICdkZWxldGVWYWx1ZUZvclByb3BlcnR5J1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRE9NUHJvcGVydHlPcGVyYXRpb25zOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBEYW5nZXJcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgY3JlYXRlTm9kZXNGcm9tTWFya3VwID0gcmVxdWlyZSgnZmJqcy9saWIvY3JlYXRlTm9kZXNGcm9tTWFya3VwJyk7XG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcbnZhciBnZXRNYXJrdXBXcmFwID0gcmVxdWlyZSgnZmJqcy9saWIvZ2V0TWFya3VwV3JhcCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgT1BFTl9UQUdfTkFNRV9FWFAgPSAvXig8W14gXFwvPl0rKS87XG52YXIgUkVTVUxUX0lOREVYX0FUVFIgPSAnZGF0YS1kYW5nZXItaW5kZXgnO1xuXG4vKipcbiAqIEV4dHJhY3RzIHRoZSBgbm9kZU5hbWVgIGZyb20gYSBzdHJpbmcgb2YgbWFya3VwLlxuICpcbiAqIE5PVEU6IEV4dHJhY3RpbmcgdGhlIGBub2RlTmFtZWAgZG9lcyBub3QgcmVxdWlyZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBtYXRjaFxuICogYmVjYXVzZSB3ZSBtYWtlIGFzc3VtcHRpb25zIGFib3V0IFJlYWN0LWdlbmVyYXRlZCBtYXJrdXAgKGkuZS4gdGhlcmUgYXJlIG5vXG4gKiBzcGFjZXMgc3Vycm91bmRpbmcgdGhlIG9wZW5pbmcgdGFnIGFuZCB0aGVyZSBpcyBhdCBsZWFzdCBvbmUgYXR0cmlidXRlKS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIFN0cmluZyBvZiBtYXJrdXAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IE5vZGUgbmFtZSBvZiB0aGUgc3VwcGxpZWQgbWFya3VwLlxuICogQHNlZSBodHRwOi8vanNwZXJmLmNvbS9leHRyYWN0LW5vZGVuYW1lXG4gKi9cbmZ1bmN0aW9uIGdldE5vZGVOYW1lKG1hcmt1cCkge1xuICByZXR1cm4gbWFya3VwLnN1YnN0cmluZygxLCBtYXJrdXAuaW5kZXhPZignICcpKTtcbn1cblxudmFyIERhbmdlciA9IHtcblxuICAvKipcbiAgICogUmVuZGVycyBtYXJrdXAgaW50byBhbiBhcnJheSBvZiBub2Rlcy4gVGhlIG1hcmt1cCBpcyBleHBlY3RlZCB0byByZW5kZXJcbiAgICogaW50byBhIGxpc3Qgb2Ygcm9vdCBub2Rlcy4gQWxzbywgdGhlIGxlbmd0aCBvZiBgcmVzdWx0TGlzdGAgYW5kXG4gICAqIGBtYXJrdXBMaXN0YCBzaG91bGQgYmUgdGhlIHNhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7YXJyYXk8c3RyaW5nPn0gbWFya3VwTGlzdCBMaXN0IG9mIG1hcmt1cCBzdHJpbmdzIHRvIHJlbmRlci5cbiAgICogQHJldHVybiB7YXJyYXk8RE9NRWxlbWVudD59IExpc3Qgb2YgcmVuZGVyZWQgbm9kZXMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZGFuZ2Vyb3VzbHlSZW5kZXJNYXJrdXA6IGZ1bmN0aW9uIChtYXJrdXBMaXN0KSB7XG4gICAgIUV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdkYW5nZXJvdXNseVJlbmRlck1hcmt1cCguLi4pOiBDYW5ub3QgcmVuZGVyIG1hcmt1cCBpbiBhIHdvcmtlciAnICsgJ3RocmVhZC4gTWFrZSBzdXJlIGB3aW5kb3dgIGFuZCBgZG9jdW1lbnRgIGFyZSBhdmFpbGFibGUgZ2xvYmFsbHkgJyArICdiZWZvcmUgcmVxdWlyaW5nIFJlYWN0IHdoZW4gdW5pdCB0ZXN0aW5nIG9yIHVzZSAnICsgJ1JlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RyaW5nIGZvciBzZXJ2ZXIgcmVuZGVyaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgbm9kZU5hbWU7XG4gICAgdmFyIG1hcmt1cEJ5Tm9kZU5hbWUgPSB7fTtcbiAgICAvLyBHcm91cCBtYXJrdXAgYnkgYG5vZGVOYW1lYCBpZiBhIHdyYXAgaXMgbmVjZXNzYXJ5LCBlbHNlIGJ5ICcqJy5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmt1cExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICFtYXJrdXBMaXN0W2ldID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVuZGVyTWFya3VwKC4uLik6IE1pc3NpbmcgbWFya3VwLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIG5vZGVOYW1lID0gZ2V0Tm9kZU5hbWUobWFya3VwTGlzdFtpXSk7XG4gICAgICBub2RlTmFtZSA9IGdldE1hcmt1cFdyYXAobm9kZU5hbWUpID8gbm9kZU5hbWUgOiAnKic7XG4gICAgICBtYXJrdXBCeU5vZGVOYW1lW25vZGVOYW1lXSA9IG1hcmt1cEJ5Tm9kZU5hbWVbbm9kZU5hbWVdIHx8IFtdO1xuICAgICAgbWFya3VwQnlOb2RlTmFtZVtub2RlTmFtZV1baV0gPSBtYXJrdXBMaXN0W2ldO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0TGlzdCA9IFtdO1xuICAgIHZhciByZXN1bHRMaXN0QXNzaWdubWVudENvdW50ID0gMDtcbiAgICBmb3IgKG5vZGVOYW1lIGluIG1hcmt1cEJ5Tm9kZU5hbWUpIHtcbiAgICAgIGlmICghbWFya3VwQnlOb2RlTmFtZS5oYXNPd25Qcm9wZXJ0eShub2RlTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgbWFya3VwTGlzdEJ5Tm9kZU5hbWUgPSBtYXJrdXBCeU5vZGVOYW1lW25vZGVOYW1lXTtcblxuICAgICAgLy8gVGhpcyBmb3ItaW4gbG9vcCBza2lwcyB0aGUgaG9sZXMgb2YgdGhlIHNwYXJzZSBhcnJheS4gVGhlIG9yZGVyIG9mXG4gICAgICAvLyBpdGVyYXRpb24gc2hvdWxkIGZvbGxvdyB0aGUgb3JkZXIgb2YgYXNzaWdubWVudCwgd2hpY2ggaGFwcGVucyB0byBtYXRjaFxuICAgICAgLy8gbnVtZXJpY2FsIGluZGV4IG9yZGVyLCBidXQgd2UgZG9uJ3QgcmVseSBvbiB0aGF0LlxuICAgICAgdmFyIHJlc3VsdEluZGV4O1xuICAgICAgZm9yIChyZXN1bHRJbmRleCBpbiBtYXJrdXBMaXN0QnlOb2RlTmFtZSkge1xuICAgICAgICBpZiAobWFya3VwTGlzdEJ5Tm9kZU5hbWUuaGFzT3duUHJvcGVydHkocmVzdWx0SW5kZXgpKSB7XG4gICAgICAgICAgdmFyIG1hcmt1cCA9IG1hcmt1cExpc3RCeU5vZGVOYW1lW3Jlc3VsdEluZGV4XTtcblxuICAgICAgICAgIC8vIFB1c2ggdGhlIHJlcXVlc3RlZCBtYXJrdXAgd2l0aCBhbiBhZGRpdGlvbmFsIFJFU1VMVF9JTkRFWF9BVFRSXG4gICAgICAgICAgLy8gYXR0cmlidXRlLiAgSWYgdGhlIG1hcmt1cCBkb2VzIG5vdCBzdGFydCB3aXRoIGEgPCBjaGFyYWN0ZXIsIGl0XG4gICAgICAgICAgLy8gd2lsbCBiZSBkaXNjYXJkZWQgYmVsb3cgKHdpdGggYW4gYXBwcm9wcmlhdGUgY29uc29sZS5lcnJvcikuXG4gICAgICAgICAgbWFya3VwTGlzdEJ5Tm9kZU5hbWVbcmVzdWx0SW5kZXhdID0gbWFya3VwLnJlcGxhY2UoT1BFTl9UQUdfTkFNRV9FWFAsXG4gICAgICAgICAgLy8gVGhpcyBpbmRleCB3aWxsIGJlIHBhcnNlZCBiYWNrIG91dCBiZWxvdy5cbiAgICAgICAgICAnJDEgJyArIFJFU1VMVF9JTkRFWF9BVFRSICsgJz1cIicgKyByZXN1bHRJbmRleCArICdcIiAnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZW5kZXIgZWFjaCBncm91cCBvZiBtYXJrdXAgd2l0aCBzaW1pbGFyIHdyYXBwaW5nIGBub2RlTmFtZWAuXG4gICAgICB2YXIgcmVuZGVyTm9kZXMgPSBjcmVhdGVOb2Rlc0Zyb21NYXJrdXAobWFya3VwTGlzdEJ5Tm9kZU5hbWUuam9pbignJyksIGVtcHR5RnVuY3Rpb24gLy8gRG8gbm90aGluZyBzcGVjaWFsIHdpdGggPHNjcmlwdD4gdGFncy5cbiAgICAgICk7XG5cbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVuZGVyTm9kZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIHJlbmRlck5vZGUgPSByZW5kZXJOb2Rlc1tqXTtcbiAgICAgICAgaWYgKHJlbmRlck5vZGUuaGFzQXR0cmlidXRlICYmIHJlbmRlck5vZGUuaGFzQXR0cmlidXRlKFJFU1VMVF9JTkRFWF9BVFRSKSkge1xuXG4gICAgICAgICAgcmVzdWx0SW5kZXggPSArcmVuZGVyTm9kZS5nZXRBdHRyaWJ1dGUoUkVTVUxUX0lOREVYX0FUVFIpO1xuICAgICAgICAgIHJlbmRlck5vZGUucmVtb3ZlQXR0cmlidXRlKFJFU1VMVF9JTkRFWF9BVFRSKTtcblxuICAgICAgICAgICEhcmVzdWx0TGlzdC5oYXNPd25Qcm9wZXJ0eShyZXN1bHRJbmRleCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGFuZ2VyOiBBc3NpZ25pbmcgdG8gYW4gYWxyZWFkeS1vY2N1cGllZCByZXN1bHQgaW5kZXguJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgcmVzdWx0TGlzdFtyZXN1bHRJbmRleF0gPSByZW5kZXJOb2RlO1xuXG4gICAgICAgICAgLy8gVGhpcyBzaG91bGQgbWF0Y2ggcmVzdWx0TGlzdC5sZW5ndGggYW5kIG1hcmt1cExpc3QubGVuZ3RoIHdoZW5cbiAgICAgICAgICAvLyB3ZSdyZSBkb25lLlxuICAgICAgICAgIHJlc3VsdExpc3RBc3NpZ25tZW50Q291bnQgKz0gMTtcbiAgICAgICAgfSBlbHNlIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRGFuZ2VyOiBEaXNjYXJkaW5nIHVuZXhwZWN0ZWQgbm9kZTonLCByZW5kZXJOb2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFsdGhvdWdoIHJlc3VsdExpc3Qgd2FzIHBvcHVsYXRlZCBvdXQgb2Ygb3JkZXIsIGl0IHNob3VsZCBub3cgYmUgYSBkZW5zZVxuICAgIC8vIGFycmF5LlxuICAgICEocmVzdWx0TGlzdEFzc2lnbm1lbnRDb3VudCA9PT0gcmVzdWx0TGlzdC5sZW5ndGgpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0RhbmdlcjogRGlkIG5vdCBhc3NpZ24gdG8gZXZlcnkgaW5kZXggb2YgcmVzdWx0TGlzdC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAhKHJlc3VsdExpc3QubGVuZ3RoID09PSBtYXJrdXBMaXN0Lmxlbmd0aCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGFuZ2VyOiBFeHBlY3RlZCBtYXJrdXAgdG8gcmVuZGVyICVzIG5vZGVzLCBidXQgcmVuZGVyZWQgJXMuJywgbWFya3VwTGlzdC5sZW5ndGgsIHJlc3VsdExpc3QubGVuZ3RoKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICByZXR1cm4gcmVzdWx0TGlzdDtcbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYSBub2RlIHdpdGggYSBzdHJpbmcgb2YgbWFya3VwIGF0IGl0cyBjdXJyZW50IHBvc2l0aW9uIHdpdGhpbiBpdHNcbiAgICogcGFyZW50LiBUaGUgbWFya3VwIG11c3QgcmVuZGVyIGludG8gYSBzaW5nbGUgcm9vdCBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG9sZENoaWxkIENoaWxkIG5vZGUgdG8gcmVwbGFjZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBNYXJrdXAgdG8gcmVuZGVyIGluIHBsYWNlIG9mIHRoZSBjaGlsZCBub2RlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwOiBmdW5jdGlvbiAob2xkQ2hpbGQsIG1hcmt1cCkge1xuICAgICFFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXAoLi4uKTogQ2Fubm90IHJlbmRlciBtYXJrdXAgaW4gYSAnICsgJ3dvcmtlciB0aHJlYWQuIE1ha2Ugc3VyZSBgd2luZG93YCBhbmQgYGRvY3VtZW50YCBhcmUgYXZhaWxhYmxlICcgKyAnZ2xvYmFsbHkgYmVmb3JlIHJlcXVpcmluZyBSZWFjdCB3aGVuIHVuaXQgdGVzdGluZyBvciB1c2UgJyArICdSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0cmluZygpIGZvciBzZXJ2ZXIgcmVuZGVyaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhbWFya3VwID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwKC4uLik6IE1pc3NpbmcgbWFya3VwLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhKG9sZENoaWxkLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ2h0bWwnKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cCguLi4pOiBDYW5ub3QgcmVwbGFjZSBtYXJrdXAgb2YgdGhlICcgKyAnPGh0bWw+IG5vZGUuIFRoaXMgaXMgYmVjYXVzZSBicm93c2VyIHF1aXJrcyBtYWtlIHRoaXMgdW5yZWxpYWJsZSAnICsgJ2FuZC9vciBzbG93LiBJZiB5b3Ugd2FudCB0byByZW5kZXIgdG8gdGhlIHJvb3QgeW91IG11c3QgdXNlICcgKyAnc2VydmVyIHJlbmRlcmluZy4gU2VlIFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RyaW5nKCkuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIG5ld0NoaWxkO1xuICAgIGlmICh0eXBlb2YgbWFya3VwID09PSAnc3RyaW5nJykge1xuICAgICAgbmV3Q2hpbGQgPSBjcmVhdGVOb2Rlc0Zyb21NYXJrdXAobWFya3VwLCBlbXB0eUZ1bmN0aW9uKVswXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3Q2hpbGQgPSBtYXJrdXA7XG4gICAgfVxuICAgIG9sZENoaWxkLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0NoaWxkLCBvbGRDaGlsZCk7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEYW5nZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIERlZmF1bHRFdmVudFBsdWdpbk9yZGVyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG4vKipcbiAqIE1vZHVsZSB0aGF0IGlzIGluamVjdGFibGUgaW50byBgRXZlbnRQbHVnaW5IdWJgLCB0aGF0IHNwZWNpZmllcyBhXG4gKiBkZXRlcm1pbmlzdGljIG9yZGVyaW5nIG9mIGBFdmVudFBsdWdpbmBzLiBBIGNvbnZlbmllbnQgd2F5IHRvIHJlYXNvbiBhYm91dFxuICogcGx1Z2lucywgd2l0aG91dCBoYXZpbmcgdG8gcGFja2FnZSBldmVyeSBvbmUgb2YgdGhlbS4gVGhpcyBpcyBiZXR0ZXIgdGhhblxuICogaGF2aW5nIHBsdWdpbnMgYmUgb3JkZXJlZCBpbiB0aGUgc2FtZSBvcmRlciB0aGF0IHRoZXkgYXJlIGluamVjdGVkIGJlY2F1c2VcbiAqIHRoYXQgb3JkZXJpbmcgd291bGQgYmUgaW5mbHVlbmNlZCBieSB0aGUgcGFja2FnaW5nIG9yZGVyLlxuICogYFJlc3BvbmRlckV2ZW50UGx1Z2luYCBtdXN0IG9jY3VyIGJlZm9yZSBgU2ltcGxlRXZlbnRQbHVnaW5gIHNvIHRoYXRcbiAqIHByZXZlbnRpbmcgZGVmYXVsdCBvbiBldmVudHMgaXMgY29udmVuaWVudCBpbiBgU2ltcGxlRXZlbnRQbHVnaW5gIGhhbmRsZXJzLlxuICovXG52YXIgRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIgPSBba2V5T2YoeyBSZXNwb25kZXJFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBTaW1wbGVFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBUYXBFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBFbnRlckxlYXZlRXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgQ2hhbmdlRXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgU2VsZWN0RXZlbnRQbHVnaW46IG51bGwgfSksIGtleU9mKHsgQmVmb3JlSW5wdXRFdmVudFBsdWdpbjogbnVsbCB9KV07XG5cbm1vZHVsZS5leHBvcnRzID0gRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEVudGVyTGVhdmVFdmVudFBsdWdpblxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudENvbnN0YW50cyA9IHJlcXVpcmUoJy4vRXZlbnRDb25zdGFudHMnKTtcbnZhciBFdmVudFByb3BhZ2F0b3JzID0gcmVxdWlyZSgnLi9FdmVudFByb3BhZ2F0b3JzJyk7XG52YXIgU3ludGhldGljTW91c2VFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljTW91c2VFdmVudCcpO1xuXG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcblxudmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xudmFyIGdldEZpcnN0UmVhY3RET00gPSBSZWFjdE1vdW50LmdldEZpcnN0UmVhY3RET007XG5cbnZhciBldmVudFR5cGVzID0ge1xuICBtb3VzZUVudGVyOiB7XG4gICAgcmVnaXN0cmF0aW9uTmFtZToga2V5T2YoeyBvbk1vdXNlRW50ZXI6IG51bGwgfSksXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU91dCwgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU92ZXJdXG4gIH0sXG4gIG1vdXNlTGVhdmU6IHtcbiAgICByZWdpc3RyYXRpb25OYW1lOiBrZXlPZih7IG9uTW91c2VMZWF2ZTogbnVsbCB9KSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3V0LCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3Zlcl1cbiAgfVxufTtcblxudmFyIGV4dHJhY3RlZEV2ZW50cyA9IFtudWxsLCBudWxsXTtcblxudmFyIEVudGVyTGVhdmVFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBGb3IgYWxtb3N0IGV2ZXJ5IGludGVyYWN0aW9uIHdlIGNhcmUgYWJvdXQsIHRoZXJlIHdpbGwgYmUgYm90aCBhIHRvcC1sZXZlbFxuICAgKiBgbW91c2VvdmVyYCBhbmQgYG1vdXNlb3V0YCBldmVudCB0aGF0IG9jY3Vycy4gT25seSB1c2UgYG1vdXNlb3V0YCBzbyB0aGF0XG4gICAqIHdlIGRvIG5vdCBleHRyYWN0IGR1cGxpY2F0ZSBldmVudHMuIEhvd2V2ZXIsIG1vdmluZyB0aGUgbW91c2UgaW50byB0aGVcbiAgICogYnJvd3NlciBmcm9tIG91dHNpZGUgd2lsbCBub3QgZmlyZSBhIGBtb3VzZW91dGAgZXZlbnQuIEluIHRoaXMgY2FzZSwgd2UgdXNlXG4gICAqIHRoZSBgbW91c2VvdmVyYCB0b3AtbGV2ZWwgZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyICYmIChuYXRpdmVFdmVudC5yZWxhdGVkVGFyZ2V0IHx8IG5hdGl2ZUV2ZW50LmZyb21FbGVtZW50KSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICh0b3BMZXZlbFR5cGUgIT09IHRvcExldmVsVHlwZXMudG9wTW91c2VPdXQgJiYgdG9wTGV2ZWxUeXBlICE9PSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3Zlcikge1xuICAgICAgLy8gTXVzdCBub3QgYmUgYSBtb3VzZSBpbiBvciBtb3VzZSBvdXQgLSBpZ25vcmluZy5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciB3aW47XG4gICAgaWYgKHRvcExldmVsVGFyZ2V0LndpbmRvdyA9PT0gdG9wTGV2ZWxUYXJnZXQpIHtcbiAgICAgIC8vIGB0b3BMZXZlbFRhcmdldGAgaXMgcHJvYmFibHkgYSB3aW5kb3cgb2JqZWN0LlxuICAgICAgd2luID0gdG9wTGV2ZWxUYXJnZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRPRE86IEZpZ3VyZSBvdXQgd2h5IGBvd25lckRvY3VtZW50YCBpcyBzb21ldGltZXMgdW5kZWZpbmVkIGluIElFOC5cbiAgICAgIHZhciBkb2MgPSB0b3BMZXZlbFRhcmdldC5vd25lckRvY3VtZW50O1xuICAgICAgaWYgKGRvYykge1xuICAgICAgICB3aW4gPSBkb2MuZGVmYXVsdFZpZXcgfHwgZG9jLnBhcmVudFdpbmRvdztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbiA9IHdpbmRvdztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZnJvbTtcbiAgICB2YXIgdG87XG4gICAgdmFyIGZyb21JRCA9ICcnO1xuICAgIHZhciB0b0lEID0gJyc7XG4gICAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU91dCkge1xuICAgICAgZnJvbSA9IHRvcExldmVsVGFyZ2V0O1xuICAgICAgZnJvbUlEID0gdG9wTGV2ZWxUYXJnZXRJRDtcbiAgICAgIHRvID0gZ2V0Rmlyc3RSZWFjdERPTShuYXRpdmVFdmVudC5yZWxhdGVkVGFyZ2V0IHx8IG5hdGl2ZUV2ZW50LnRvRWxlbWVudCk7XG4gICAgICBpZiAodG8pIHtcbiAgICAgICAgdG9JRCA9IFJlYWN0TW91bnQuZ2V0SUQodG8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG8gPSB3aW47XG4gICAgICB9XG4gICAgICB0byA9IHRvIHx8IHdpbjtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJvbSA9IHdpbjtcbiAgICAgIHRvID0gdG9wTGV2ZWxUYXJnZXQ7XG4gICAgICB0b0lEID0gdG9wTGV2ZWxUYXJnZXRJRDtcbiAgICB9XG5cbiAgICBpZiAoZnJvbSA9PT0gdG8pIHtcbiAgICAgIC8vIE5vdGhpbmcgcGVydGFpbnMgdG8gb3VyIG1hbmFnZWQgY29tcG9uZW50cy5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBsZWF2ZSA9IFN5bnRoZXRpY01vdXNlRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMubW91c2VMZWF2ZSwgZnJvbUlELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuICAgIGxlYXZlLnR5cGUgPSAnbW91c2VsZWF2ZSc7XG4gICAgbGVhdmUudGFyZ2V0ID0gZnJvbTtcbiAgICBsZWF2ZS5yZWxhdGVkVGFyZ2V0ID0gdG87XG5cbiAgICB2YXIgZW50ZXIgPSBTeW50aGV0aWNNb3VzZUV2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLm1vdXNlRW50ZXIsIHRvSUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgZW50ZXIudHlwZSA9ICdtb3VzZWVudGVyJztcbiAgICBlbnRlci50YXJnZXQgPSB0bztcbiAgICBlbnRlci5yZWxhdGVkVGFyZ2V0ID0gZnJvbTtcblxuICAgIEV2ZW50UHJvcGFnYXRvcnMuYWNjdW11bGF0ZUVudGVyTGVhdmVEaXNwYXRjaGVzKGxlYXZlLCBlbnRlciwgZnJvbUlELCB0b0lEKTtcblxuICAgIGV4dHJhY3RlZEV2ZW50c1swXSA9IGxlYXZlO1xuICAgIGV4dHJhY3RlZEV2ZW50c1sxXSA9IGVudGVyO1xuXG4gICAgcmV0dXJuIGV4dHJhY3RlZEV2ZW50cztcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEVudGVyTGVhdmVFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRDb25zdGFudHNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBrZXlNaXJyb3IgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlNaXJyb3InKTtcblxudmFyIFByb3BhZ2F0aW9uUGhhc2VzID0ga2V5TWlycm9yKHsgYnViYmxlZDogbnVsbCwgY2FwdHVyZWQ6IG51bGwgfSk7XG5cbi8qKlxuICogVHlwZXMgb2YgcmF3IHNpZ25hbHMgZnJvbSB0aGUgYnJvd3NlciBjYXVnaHQgYXQgdGhlIHRvcCBsZXZlbC5cbiAqL1xudmFyIHRvcExldmVsVHlwZXMgPSBrZXlNaXJyb3Ioe1xuICB0b3BBYm9ydDogbnVsbCxcbiAgdG9wQmx1cjogbnVsbCxcbiAgdG9wQ2FuUGxheTogbnVsbCxcbiAgdG9wQ2FuUGxheVRocm91Z2g6IG51bGwsXG4gIHRvcENoYW5nZTogbnVsbCxcbiAgdG9wQ2xpY2s6IG51bGwsXG4gIHRvcENvbXBvc2l0aW9uRW5kOiBudWxsLFxuICB0b3BDb21wb3NpdGlvblN0YXJ0OiBudWxsLFxuICB0b3BDb21wb3NpdGlvblVwZGF0ZTogbnVsbCxcbiAgdG9wQ29udGV4dE1lbnU6IG51bGwsXG4gIHRvcENvcHk6IG51bGwsXG4gIHRvcEN1dDogbnVsbCxcbiAgdG9wRG91YmxlQ2xpY2s6IG51bGwsXG4gIHRvcERyYWc6IG51bGwsXG4gIHRvcERyYWdFbmQ6IG51bGwsXG4gIHRvcERyYWdFbnRlcjogbnVsbCxcbiAgdG9wRHJhZ0V4aXQ6IG51bGwsXG4gIHRvcERyYWdMZWF2ZTogbnVsbCxcbiAgdG9wRHJhZ092ZXI6IG51bGwsXG4gIHRvcERyYWdTdGFydDogbnVsbCxcbiAgdG9wRHJvcDogbnVsbCxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6IG51bGwsXG4gIHRvcEVtcHRpZWQ6IG51bGwsXG4gIHRvcEVuY3J5cHRlZDogbnVsbCxcbiAgdG9wRW5kZWQ6IG51bGwsXG4gIHRvcEVycm9yOiBudWxsLFxuICB0b3BGb2N1czogbnVsbCxcbiAgdG9wSW5wdXQ6IG51bGwsXG4gIHRvcEtleURvd246IG51bGwsXG4gIHRvcEtleVByZXNzOiBudWxsLFxuICB0b3BLZXlVcDogbnVsbCxcbiAgdG9wTG9hZDogbnVsbCxcbiAgdG9wTG9hZGVkRGF0YTogbnVsbCxcbiAgdG9wTG9hZGVkTWV0YWRhdGE6IG51bGwsXG4gIHRvcExvYWRTdGFydDogbnVsbCxcbiAgdG9wTW91c2VEb3duOiBudWxsLFxuICB0b3BNb3VzZU1vdmU6IG51bGwsXG4gIHRvcE1vdXNlT3V0OiBudWxsLFxuICB0b3BNb3VzZU92ZXI6IG51bGwsXG4gIHRvcE1vdXNlVXA6IG51bGwsXG4gIHRvcFBhc3RlOiBudWxsLFxuICB0b3BQYXVzZTogbnVsbCxcbiAgdG9wUGxheTogbnVsbCxcbiAgdG9wUGxheWluZzogbnVsbCxcbiAgdG9wUHJvZ3Jlc3M6IG51bGwsXG4gIHRvcFJhdGVDaGFuZ2U6IG51bGwsXG4gIHRvcFJlc2V0OiBudWxsLFxuICB0b3BTY3JvbGw6IG51bGwsXG4gIHRvcFNlZWtlZDogbnVsbCxcbiAgdG9wU2Vla2luZzogbnVsbCxcbiAgdG9wU2VsZWN0aW9uQ2hhbmdlOiBudWxsLFxuICB0b3BTdGFsbGVkOiBudWxsLFxuICB0b3BTdWJtaXQ6IG51bGwsXG4gIHRvcFN1c3BlbmQ6IG51bGwsXG4gIHRvcFRleHRJbnB1dDogbnVsbCxcbiAgdG9wVGltZVVwZGF0ZTogbnVsbCxcbiAgdG9wVG91Y2hDYW5jZWw6IG51bGwsXG4gIHRvcFRvdWNoRW5kOiBudWxsLFxuICB0b3BUb3VjaE1vdmU6IG51bGwsXG4gIHRvcFRvdWNoU3RhcnQ6IG51bGwsXG4gIHRvcFZvbHVtZUNoYW5nZTogbnVsbCxcbiAgdG9wV2FpdGluZzogbnVsbCxcbiAgdG9wV2hlZWw6IG51bGxcbn0pO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSB7XG4gIHRvcExldmVsVHlwZXM6IHRvcExldmVsVHlwZXMsXG4gIFByb3BhZ2F0aW9uUGhhc2VzOiBQcm9wYWdhdGlvblBoYXNlc1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudENvbnN0YW50czsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQbHVnaW5IdWJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudFBsdWdpblJlZ2lzdHJ5ID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpblJlZ2lzdHJ5Jyk7XG52YXIgRXZlbnRQbHVnaW5VdGlscyA9IHJlcXVpcmUoJy4vRXZlbnRQbHVnaW5VdGlscycpO1xudmFyIFJlYWN0RXJyb3JVdGlscyA9IHJlcXVpcmUoJy4vUmVhY3RFcnJvclV0aWxzJyk7XG5cbnZhciBhY2N1bXVsYXRlSW50byA9IHJlcXVpcmUoJy4vYWNjdW11bGF0ZUludG8nKTtcbnZhciBmb3JFYWNoQWNjdW11bGF0ZWQgPSByZXF1aXJlKCcuL2ZvckVhY2hBY2N1bXVsYXRlZCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogSW50ZXJuYWwgc3RvcmUgZm9yIGV2ZW50IGxpc3RlbmVyc1xuICovXG52YXIgbGlzdGVuZXJCYW5rID0ge307XG5cbi8qKlxuICogSW50ZXJuYWwgcXVldWUgb2YgZXZlbnRzIHRoYXQgaGF2ZSBhY2N1bXVsYXRlZCB0aGVpciBkaXNwYXRjaGVzIGFuZCBhcmVcbiAqIHdhaXRpbmcgdG8gaGF2ZSB0aGVpciBkaXNwYXRjaGVzIGV4ZWN1dGVkLlxuICovXG52YXIgZXZlbnRRdWV1ZSA9IG51bGw7XG5cbi8qKlxuICogRGlzcGF0Y2hlcyBhbiBldmVudCBhbmQgcmVsZWFzZXMgaXQgYmFjayBpbnRvIHRoZSBwb29sLCB1bmxlc3MgcGVyc2lzdGVudC5cbiAqXG4gKiBAcGFyYW0gez9vYmplY3R9IGV2ZW50IFN5bnRoZXRpYyBldmVudCB0byBiZSBkaXNwYXRjaGVkLlxuICogQHBhcmFtIHtib29sZWFufSBzaW11bGF0ZWQgSWYgdGhlIGV2ZW50IGlzIHNpbXVsYXRlZCAoY2hhbmdlcyBleG4gYmVoYXZpb3IpXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlID0gZnVuY3Rpb24gKGV2ZW50LCBzaW11bGF0ZWQpIHtcbiAgaWYgKGV2ZW50KSB7XG4gICAgRXZlbnRQbHVnaW5VdGlscy5leGVjdXRlRGlzcGF0Y2hlc0luT3JkZXIoZXZlbnQsIHNpbXVsYXRlZCk7XG5cbiAgICBpZiAoIWV2ZW50LmlzUGVyc2lzdGVudCgpKSB7XG4gICAgICBldmVudC5jb25zdHJ1Y3Rvci5yZWxlYXNlKGV2ZW50KTtcbiAgICB9XG4gIH1cbn07XG52YXIgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlU2ltdWxhdGVkID0gZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuIGV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZShlLCB0cnVlKTtcbn07XG52YXIgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlVG9wTGV2ZWwgPSBmdW5jdGlvbiAoZSkge1xuICByZXR1cm4gZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlKGUsIGZhbHNlKTtcbn07XG5cbi8qKlxuICogLSBgSW5zdGFuY2VIYW5kbGVgOiBbcmVxdWlyZWRdIE1vZHVsZSB0aGF0IHBlcmZvcm1zIGxvZ2ljYWwgdHJhdmVyc2FscyBvZiBET01cbiAqICAgaGllcmFyY2h5IGdpdmVuIGlkcyBvZiB0aGUgbG9naWNhbCBET00gZWxlbWVudHMgaW52b2x2ZWQuXG4gKi9cbnZhciBJbnN0YW5jZUhhbmRsZSA9IG51bGw7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlSW5zdGFuY2VIYW5kbGUoKSB7XG4gIHZhciB2YWxpZCA9IEluc3RhbmNlSGFuZGxlICYmIEluc3RhbmNlSGFuZGxlLnRyYXZlcnNlVHdvUGhhc2UgJiYgSW5zdGFuY2VIYW5kbGUudHJhdmVyc2VFbnRlckxlYXZlO1xuICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh2YWxpZCwgJ0luc3RhbmNlSGFuZGxlIG5vdCBpbmplY3RlZCBiZWZvcmUgdXNlIScpIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSB1bmlmaWVkIGludGVyZmFjZSBmb3IgZXZlbnQgcGx1Z2lucyB0byBiZSBpbnN0YWxsZWQgYW5kIGNvbmZpZ3VyZWQuXG4gKlxuICogRXZlbnQgcGx1Z2lucyBjYW4gaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAgIGBleHRyYWN0RXZlbnRzYCB7ZnVuY3Rpb24oc3RyaW5nLCBET01FdmVudFRhcmdldCwgc3RyaW5nLCBvYmplY3QpOiAqfVxuICogICAgIFJlcXVpcmVkLiBXaGVuIGEgdG9wLWxldmVsIGV2ZW50IGlzIGZpcmVkLCB0aGlzIG1ldGhvZCBpcyBleHBlY3RlZCB0b1xuICogICAgIGV4dHJhY3Qgc3ludGhldGljIGV2ZW50cyB0aGF0IHdpbGwgaW4gdHVybiBiZSBxdWV1ZWQgYW5kIGRpc3BhdGNoZWQuXG4gKlxuICogICBgZXZlbnRUeXBlc2Age29iamVjdH1cbiAqICAgICBPcHRpb25hbCwgcGx1Z2lucyB0aGF0IGZpcmUgZXZlbnRzIG11c3QgcHVibGlzaCBhIG1hcHBpbmcgb2YgcmVnaXN0cmF0aW9uXG4gKiAgICAgbmFtZXMgdGhhdCBhcmUgdXNlZCB0byByZWdpc3RlciBsaXN0ZW5lcnMuIFZhbHVlcyBvZiB0aGlzIG1hcHBpbmcgbXVzdFxuICogICAgIGJlIG9iamVjdHMgdGhhdCBjb250YWluIGByZWdpc3RyYXRpb25OYW1lYCBvciBgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXNgLlxuICpcbiAqICAgYGV4ZWN1dGVEaXNwYXRjaGAge2Z1bmN0aW9uKG9iamVjdCwgZnVuY3Rpb24sIHN0cmluZyl9XG4gKiAgICAgT3B0aW9uYWwsIGFsbG93cyBwbHVnaW5zIHRvIG92ZXJyaWRlIGhvdyBhbiBldmVudCBnZXRzIGRpc3BhdGNoZWQuIEJ5XG4gKiAgICAgZGVmYXVsdCwgdGhlIGxpc3RlbmVyIGlzIHNpbXBseSBpbnZva2VkLlxuICpcbiAqIEVhY2ggcGx1Z2luIHRoYXQgaXMgaW5qZWN0ZWQgaW50byBgRXZlbnRzUGx1Z2luSHViYCBpcyBpbW1lZGlhdGVseSBvcGVyYWJsZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbnZhciBFdmVudFBsdWdpbkh1YiA9IHtcblxuICAvKipcbiAgICogTWV0aG9kcyBmb3IgaW5qZWN0aW5nIGRlcGVuZGVuY2llcy5cbiAgICovXG4gIGluamVjdGlvbjoge1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IEluamVjdGVkTW91bnRcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgaW5qZWN0TW91bnQ6IEV2ZW50UGx1Z2luVXRpbHMuaW5qZWN0aW9uLmluamVjdE1vdW50LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IEluamVjdGVkSW5zdGFuY2VIYW5kbGVcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgaW5qZWN0SW5zdGFuY2VIYW5kbGU6IGZ1bmN0aW9uIChJbmplY3RlZEluc3RhbmNlSGFuZGxlKSB7XG4gICAgICBJbnN0YW5jZUhhbmRsZSA9IEluamVjdGVkSW5zdGFuY2VIYW5kbGU7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YWxpZGF0ZUluc3RhbmNlSGFuZGxlKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGdldEluc3RhbmNlSGFuZGxlOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YWxpZGF0ZUluc3RhbmNlSGFuZGxlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gSW5zdGFuY2VIYW5kbGU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7YXJyYXl9IEluamVjdGVkRXZlbnRQbHVnaW5PcmRlclxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBpbmplY3RFdmVudFBsdWdpbk9yZGVyOiBFdmVudFBsdWdpblJlZ2lzdHJ5LmluamVjdEV2ZW50UGx1Z2luT3JkZXIsXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gaW5qZWN0ZWROYW1lc1RvUGx1Z2lucyBNYXAgZnJvbSBuYW1lcyB0byBwbHVnaW4gbW9kdWxlcy5cbiAgICAgKi9cbiAgICBpbmplY3RFdmVudFBsdWdpbnNCeU5hbWU6IEV2ZW50UGx1Z2luUmVnaXN0cnkuaW5qZWN0RXZlbnRQbHVnaW5zQnlOYW1lXG5cbiAgfSxcblxuICBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M6IEV2ZW50UGx1Z2luUmVnaXN0cnkuZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzLFxuXG4gIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzOiBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLFxuXG4gIC8qKlxuICAgKiBTdG9yZXMgYGxpc3RlbmVyYCBhdCBgbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdW2lkXWAuIElzIGlkZW1wb3RlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiB0aGUgRE9NIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWdpc3RyYXRpb25OYW1lIE5hbWUgb2YgbGlzdGVuZXIgKGUuZy4gYG9uQ2xpY2tgKS5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGxpc3RlbmVyIFRoZSBjYWxsYmFjayB0byBzdG9yZS5cbiAgICovXG4gIHB1dExpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUsIGxpc3RlbmVyKSB7XG4gICAgISh0eXBlb2YgbGlzdGVuZXIgPT09ICdmdW5jdGlvbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V4cGVjdGVkICVzIGxpc3RlbmVyIHRvIGJlIGEgZnVuY3Rpb24sIGluc3RlYWQgZ290IHR5cGUgJXMnLCByZWdpc3RyYXRpb25OYW1lLCB0eXBlb2YgbGlzdGVuZXIpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZSA9IGxpc3RlbmVyQmFua1tyZWdpc3RyYXRpb25OYW1lXSB8fCAobGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdID0ge30pO1xuICAgIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lW2lkXSA9IGxpc3RlbmVyO1xuXG4gICAgdmFyIFBsdWdpbk1vZHVsZSA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgaWYgKFBsdWdpbk1vZHVsZSAmJiBQbHVnaW5Nb2R1bGUuZGlkUHV0TGlzdGVuZXIpIHtcbiAgICAgIFBsdWdpbk1vZHVsZS5kaWRQdXRMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuICAgKiBAcmV0dXJuIHs/ZnVuY3Rpb259IFRoZSBzdG9yZWQgY2FsbGJhY2suXG4gICAqL1xuICBnZXRMaXN0ZW5lcjogZnVuY3Rpb24gKGlkLCByZWdpc3RyYXRpb25OYW1lKSB7XG4gICAgdmFyIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lID0gbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdO1xuICAgIHJldHVybiBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZSAmJiBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZVtpZF07XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYSBsaXN0ZW5lciBmcm9tIHRoZSByZWdpc3RyYXRpb24gYmFuay5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuICAgKi9cbiAgZGVsZXRlTGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIHZhciBQbHVnaW5Nb2R1bGUgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW3JlZ2lzdHJhdGlvbk5hbWVdO1xuICAgIGlmIChQbHVnaW5Nb2R1bGUgJiYgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcikge1xuICAgICAgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSk7XG4gICAgfVxuXG4gICAgdmFyIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lID0gbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdO1xuICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIG5ldmVyIGJlIG51bGwgLS0gd2hlbiBpcyBpdD9cbiAgICBpZiAoYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICAgIGRlbGV0ZSBiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZVtpZF07XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFsbCBsaXN0ZW5lcnMgZm9yIHRoZSBET00gZWxlbWVudCB3aXRoIHRoZSBzdXBwbGllZCBJRC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICovXG4gIGRlbGV0ZUFsbExpc3RlbmVyczogZnVuY3Rpb24gKGlkKSB7XG4gICAgZm9yICh2YXIgcmVnaXN0cmF0aW9uTmFtZSBpbiBsaXN0ZW5lckJhbmspIHtcbiAgICAgIGlmICghbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdW2lkXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIFBsdWdpbk1vZHVsZSA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgICBpZiAoUGx1Z2luTW9kdWxlICYmIFBsdWdpbk1vZHVsZS53aWxsRGVsZXRlTGlzdGVuZXIpIHtcbiAgICAgICAgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV1baWRdO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQWxsb3dzIHJlZ2lzdGVyZWQgcGx1Z2lucyBhbiBvcHBvcnR1bml0eSB0byBleHRyYWN0IGV2ZW50cyBmcm9tIHRvcC1sZXZlbFxuICAgKiBuYXRpdmUgYnJvd3NlciBldmVudHMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICB2YXIgZXZlbnRzO1xuICAgIHZhciBwbHVnaW5zID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5wbHVnaW5zO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGx1Z2lucy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gTm90IGV2ZXJ5IHBsdWdpbiBpbiB0aGUgb3JkZXJpbmcgbWF5IGJlIGxvYWRlZCBhdCBydW50aW1lLlxuICAgICAgdmFyIHBvc3NpYmxlUGx1Z2luID0gcGx1Z2luc1tpXTtcbiAgICAgIGlmIChwb3NzaWJsZVBsdWdpbikge1xuICAgICAgICB2YXIgZXh0cmFjdGVkRXZlbnRzID0gcG9zc2libGVQbHVnaW4uZXh0cmFjdEV2ZW50cyh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuICAgICAgICBpZiAoZXh0cmFjdGVkRXZlbnRzKSB7XG4gICAgICAgICAgZXZlbnRzID0gYWNjdW11bGF0ZUludG8oZXZlbnRzLCBleHRyYWN0ZWRFdmVudHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBldmVudHM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVucXVldWVzIGEgc3ludGhldGljIGV2ZW50IHRoYXQgc2hvdWxkIGJlIGRpc3BhdGNoZWQgd2hlblxuICAgKiBgcHJvY2Vzc0V2ZW50UXVldWVgIGlzIGludm9rZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnRzIEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVFdmVudHM6IGZ1bmN0aW9uIChldmVudHMpIHtcbiAgICBpZiAoZXZlbnRzKSB7XG4gICAgICBldmVudFF1ZXVlID0gYWNjdW11bGF0ZUludG8oZXZlbnRRdWV1ZSwgZXZlbnRzKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYWxsIHN5bnRoZXRpYyBldmVudHMgb24gdGhlIGV2ZW50IHF1ZXVlLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHByb2Nlc3NFdmVudFF1ZXVlOiBmdW5jdGlvbiAoc2ltdWxhdGVkKSB7XG4gICAgLy8gU2V0IGBldmVudFF1ZXVlYCB0byBudWxsIGJlZm9yZSBwcm9jZXNzaW5nIGl0IHNvIHRoYXQgd2UgY2FuIHRlbGwgaWYgbW9yZVxuICAgIC8vIGV2ZW50cyBnZXQgZW5xdWV1ZWQgd2hpbGUgcHJvY2Vzc2luZy5cbiAgICB2YXIgcHJvY2Vzc2luZ0V2ZW50UXVldWUgPSBldmVudFF1ZXVlO1xuICAgIGV2ZW50UXVldWUgPSBudWxsO1xuICAgIGlmIChzaW11bGF0ZWQpIHtcbiAgICAgIGZvckVhY2hBY2N1bXVsYXRlZChwcm9jZXNzaW5nRXZlbnRRdWV1ZSwgZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlU2ltdWxhdGVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yRWFjaEFjY3VtdWxhdGVkKHByb2Nlc3NpbmdFdmVudFF1ZXVlLCBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2VUb3BMZXZlbCk7XG4gICAgfVxuICAgICEhZXZlbnRRdWV1ZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwcm9jZXNzRXZlbnRRdWV1ZSgpOiBBZGRpdGlvbmFsIGV2ZW50cyB3ZXJlIGVucXVldWVkIHdoaWxlIHByb2Nlc3NpbmcgJyArICdhbiBldmVudCBxdWV1ZS4gU3VwcG9ydCBmb3IgdGhpcyBoYXMgbm90IHlldCBiZWVuIGltcGxlbWVudGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIGEgZ29vZCB0aW1lIHRvIHJldGhyb3cgaWYgYW55IG9mIHRoZSBldmVudCBoYW5kbGVycyB0aHJldy5cbiAgICBSZWFjdEVycm9yVXRpbHMucmV0aHJvd0NhdWdodEVycm9yKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZXNlIGFyZSBuZWVkZWQgZm9yIHRlc3RzIG9ubHkuIERvIG5vdCB1c2UhXG4gICAqL1xuICBfX3B1cmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgbGlzdGVuZXJCYW5rID0ge307XG4gIH0sXG5cbiAgX19nZXRMaXN0ZW5lckJhbms6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbGlzdGVuZXJCYW5rO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQbHVnaW5IdWI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEV2ZW50UGx1Z2luUmVnaXN0cnlcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogSW5qZWN0YWJsZSBvcmRlcmluZyBvZiBldmVudCBwbHVnaW5zLlxuICovXG52YXIgRXZlbnRQbHVnaW5PcmRlciA9IG51bGw7XG5cbi8qKlxuICogSW5qZWN0YWJsZSBtYXBwaW5nIGZyb20gbmFtZXMgdG8gZXZlbnQgcGx1Z2luIG1vZHVsZXMuXG4gKi9cbnZhciBuYW1lc1RvUGx1Z2lucyA9IHt9O1xuXG4vKipcbiAqIFJlY29tcHV0ZXMgdGhlIHBsdWdpbiBsaXN0IHVzaW5nIHRoZSBpbmplY3RlZCBwbHVnaW5zIGFuZCBwbHVnaW4gb3JkZXJpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVjb21wdXRlUGx1Z2luT3JkZXJpbmcoKSB7XG4gIGlmICghRXZlbnRQbHVnaW5PcmRlcikge1xuICAgIC8vIFdhaXQgdW50aWwgYW4gYEV2ZW50UGx1Z2luT3JkZXJgIGlzIGluamVjdGVkLlxuICAgIHJldHVybjtcbiAgfVxuICBmb3IgKHZhciBwbHVnaW5OYW1lIGluIG5hbWVzVG9QbHVnaW5zKSB7XG4gICAgdmFyIFBsdWdpbk1vZHVsZSA9IG5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdO1xuICAgIHZhciBwbHVnaW5JbmRleCA9IEV2ZW50UGx1Z2luT3JkZXIuaW5kZXhPZihwbHVnaW5OYW1lKTtcbiAgICAhKHBsdWdpbkluZGV4ID4gLTEpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IENhbm5vdCBpbmplY3QgZXZlbnQgcGx1Z2lucyB0aGF0IGRvIG5vdCBleGlzdCBpbiAnICsgJ3RoZSBwbHVnaW4gb3JkZXJpbmcsIGAlc2AuJywgcGx1Z2luTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIGlmIChFdmVudFBsdWdpblJlZ2lzdHJ5LnBsdWdpbnNbcGx1Z2luSW5kZXhdKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgIVBsdWdpbk1vZHVsZS5leHRyYWN0RXZlbnRzID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IEV2ZW50IHBsdWdpbnMgbXVzdCBpbXBsZW1lbnQgYW4gYGV4dHJhY3RFdmVudHNgICcgKyAnbWV0aG9kLCBidXQgYCVzYCBkb2VzIG5vdC4nLCBwbHVnaW5OYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgRXZlbnRQbHVnaW5SZWdpc3RyeS5wbHVnaW5zW3BsdWdpbkluZGV4XSA9IFBsdWdpbk1vZHVsZTtcbiAgICB2YXIgcHVibGlzaGVkRXZlbnRzID0gUGx1Z2luTW9kdWxlLmV2ZW50VHlwZXM7XG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIHB1Ymxpc2hlZEV2ZW50cykge1xuICAgICAgIXB1Ymxpc2hFdmVudEZvclBsdWdpbihwdWJsaXNoZWRFdmVudHNbZXZlbnROYW1lXSwgUGx1Z2luTW9kdWxlLCBldmVudE5hbWUpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IEZhaWxlZCB0byBwdWJsaXNoIGV2ZW50IGAlc2AgZm9yIHBsdWdpbiBgJXNgLicsIGV2ZW50TmFtZSwgcGx1Z2luTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFB1Ymxpc2hlcyBhbiBldmVudCBzbyB0aGF0IGl0IGNhbiBiZSBkaXNwYXRjaGVkIGJ5IHRoZSBzdXBwbGllZCBwbHVnaW4uXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIERpc3BhdGNoIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBldmVudC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBQbHVnaW5Nb2R1bGUgUGx1Z2luIHB1Ymxpc2hpbmcgdGhlIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgd2FzIHN1Y2Nlc3NmdWxseSBwdWJsaXNoZWQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwdWJsaXNoRXZlbnRGb3JQbHVnaW4oZGlzcGF0Y2hDb25maWcsIFBsdWdpbk1vZHVsZSwgZXZlbnROYW1lKSB7XG4gICEhRXZlbnRQbHVnaW5SZWdpc3RyeS5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3MuaGFzT3duUHJvcGVydHkoZXZlbnROYW1lKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFdmVudFBsdWdpbkh1YjogTW9yZSB0aGFuIG9uZSBwbHVnaW4gYXR0ZW1wdGVkIHRvIHB1Ymxpc2ggdGhlIHNhbWUgJyArICdldmVudCBuYW1lLCBgJXNgLicsIGV2ZW50TmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBFdmVudFBsdWdpblJlZ2lzdHJ5LmV2ZW50TmFtZURpc3BhdGNoQ29uZmlnc1tldmVudE5hbWVdID0gZGlzcGF0Y2hDb25maWc7XG5cbiAgdmFyIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzID0gZGlzcGF0Y2hDb25maWcucGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM7XG4gIGlmIChwaGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgIGZvciAodmFyIHBoYXNlTmFtZSBpbiBwaGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgICAgaWYgKHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzLmhhc093blByb3BlcnR5KHBoYXNlTmFtZSkpIHtcbiAgICAgICAgdmFyIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWUgPSBwaGFzZWRSZWdpc3RyYXRpb25OYW1lc1twaGFzZU5hbWVdO1xuICAgICAgICBwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZShwaGFzZWRSZWdpc3RyYXRpb25OYW1lLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKGRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICBwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZShkaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFB1Ymxpc2hlcyBhIHJlZ2lzdHJhdGlvbiBuYW1lIHRoYXQgaXMgdXNlZCB0byBpZGVudGlmeSBkaXNwYXRjaGVkIGV2ZW50cyBhbmRcbiAqIGNhbiBiZSB1c2VkIHdpdGggYEV2ZW50UGx1Z2luSHViLnB1dExpc3RlbmVyYCB0byByZWdpc3RlciBsaXN0ZW5lcnMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgUmVnaXN0cmF0aW9uIG5hbWUgdG8gYWRkLlxuICogQHBhcmFtIHtvYmplY3R9IFBsdWdpbk1vZHVsZSBQbHVnaW4gcHVibGlzaGluZyB0aGUgZXZlbnQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwdWJsaXNoUmVnaXN0cmF0aW9uTmFtZShyZWdpc3RyYXRpb25OYW1lLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSkge1xuICAhIUV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV0gPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5IdWI6IE1vcmUgdGhhbiBvbmUgcGx1Z2luIGF0dGVtcHRlZCB0byBwdWJsaXNoIHRoZSBzYW1lICcgKyAncmVnaXN0cmF0aW9uIG5hbWUsIGAlc2AuJywgcmVnaXN0cmF0aW9uTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW3JlZ2lzdHJhdGlvbk5hbWVdID0gUGx1Z2luTW9kdWxlO1xuICBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVEZXBlbmRlbmNpZXNbcmVnaXN0cmF0aW9uTmFtZV0gPSBQbHVnaW5Nb2R1bGUuZXZlbnRUeXBlc1tldmVudE5hbWVdLmRlcGVuZGVuY2llcztcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgcGx1Z2lucyBzbyB0aGF0IHRoZXkgY2FuIGV4dHJhY3QgYW5kIGRpc3BhdGNoIGV2ZW50cy5cbiAqXG4gKiBAc2VlIHtFdmVudFBsdWdpbkh1Yn1cbiAqL1xudmFyIEV2ZW50UGx1Z2luUmVnaXN0cnkgPSB7XG5cbiAgLyoqXG4gICAqIE9yZGVyZWQgbGlzdCBvZiBpbmplY3RlZCBwbHVnaW5zLlxuICAgKi9cbiAgcGx1Z2luczogW10sXG5cbiAgLyoqXG4gICAqIE1hcHBpbmcgZnJvbSBldmVudCBuYW1lIHRvIGRpc3BhdGNoIGNvbmZpZ1xuICAgKi9cbiAgZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzOiB7fSxcblxuICAvKipcbiAgICogTWFwcGluZyBmcm9tIHJlZ2lzdHJhdGlvbiBuYW1lIHRvIHBsdWdpbiBtb2R1bGVcbiAgICovXG4gIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzOiB7fSxcblxuICAvKipcbiAgICogTWFwcGluZyBmcm9tIHJlZ2lzdHJhdGlvbiBuYW1lIHRvIGV2ZW50IG5hbWVcbiAgICovXG4gIHJlZ2lzdHJhdGlvbk5hbWVEZXBlbmRlbmNpZXM6IHt9LFxuXG4gIC8qKlxuICAgKiBJbmplY3RzIGFuIG9yZGVyaW5nIG9mIHBsdWdpbnMgKGJ5IHBsdWdpbiBuYW1lKS4gVGhpcyBhbGxvd3MgdGhlIG9yZGVyaW5nXG4gICAqIHRvIGJlIGRlY291cGxlZCBmcm9tIGluamVjdGlvbiBvZiB0aGUgYWN0dWFsIHBsdWdpbnMgc28gdGhhdCBvcmRlcmluZyBpc1xuICAgKiBhbHdheXMgZGV0ZXJtaW5pc3RpYyByZWdhcmRsZXNzIG9mIHBhY2thZ2luZywgb24tdGhlLWZseSBpbmplY3Rpb24sIGV0Yy5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheX0gSW5qZWN0ZWRFdmVudFBsdWdpbk9yZGVyXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5pbmplY3Rpb24uaW5qZWN0RXZlbnRQbHVnaW5PcmRlcn1cbiAgICovXG4gIGluamVjdEV2ZW50UGx1Z2luT3JkZXI6IGZ1bmN0aW9uIChJbmplY3RlZEV2ZW50UGx1Z2luT3JkZXIpIHtcbiAgICAhIUV2ZW50UGx1Z2luT3JkZXIgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5SZWdpc3RyeTogQ2Fubm90IGluamVjdCBldmVudCBwbHVnaW4gb3JkZXJpbmcgbW9yZSB0aGFuICcgKyAnb25jZS4gWW91IGFyZSBsaWtlbHkgdHJ5aW5nIHRvIGxvYWQgbW9yZSB0aGFuIG9uZSBjb3B5IG9mIFJlYWN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAvLyBDbG9uZSB0aGUgb3JkZXJpbmcgc28gaXQgY2Fubm90IGJlIGR5bmFtaWNhbGx5IG11dGF0ZWQuXG4gICAgRXZlbnRQbHVnaW5PcmRlciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKEluamVjdGVkRXZlbnRQbHVnaW5PcmRlcik7XG4gICAgcmVjb21wdXRlUGx1Z2luT3JkZXJpbmcoKTtcbiAgfSxcblxuICAvKipcbiAgICogSW5qZWN0cyBwbHVnaW5zIHRvIGJlIHVzZWQgYnkgYEV2ZW50UGx1Z2luSHViYC4gVGhlIHBsdWdpbiBuYW1lcyBtdXN0IGJlXG4gICAqIGluIHRoZSBvcmRlcmluZyBpbmplY3RlZCBieSBgaW5qZWN0RXZlbnRQbHVnaW5PcmRlcmAuXG4gICAqXG4gICAqIFBsdWdpbnMgY2FuIGJlIGluamVjdGVkIGFzIHBhcnQgb2YgcGFnZSBpbml0aWFsaXphdGlvbiBvciBvbi10aGUtZmx5LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaW5qZWN0ZWROYW1lc1RvUGx1Z2lucyBNYXAgZnJvbSBuYW1lcyB0byBwbHVnaW4gbW9kdWxlcy5cbiAgICogQGludGVybmFsXG4gICAqIEBzZWUge0V2ZW50UGx1Z2luSHViLmluamVjdGlvbi5pbmplY3RFdmVudFBsdWdpbnNCeU5hbWV9XG4gICAqL1xuICBpbmplY3RFdmVudFBsdWdpbnNCeU5hbWU6IGZ1bmN0aW9uIChpbmplY3RlZE5hbWVzVG9QbHVnaW5zKSB7XG4gICAgdmFyIGlzT3JkZXJpbmdEaXJ0eSA9IGZhbHNlO1xuICAgIGZvciAodmFyIHBsdWdpbk5hbWUgaW4gaW5qZWN0ZWROYW1lc1RvUGx1Z2lucykge1xuICAgICAgaWYgKCFpbmplY3RlZE5hbWVzVG9QbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIFBsdWdpbk1vZHVsZSA9IGluamVjdGVkTmFtZXNUb1BsdWdpbnNbcGx1Z2luTmFtZV07XG4gICAgICBpZiAoIW5hbWVzVG9QbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpIHx8IG5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdICE9PSBQbHVnaW5Nb2R1bGUpIHtcbiAgICAgICAgISFuYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFdmVudFBsdWdpblJlZ2lzdHJ5OiBDYW5ub3QgaW5qZWN0IHR3byBkaWZmZXJlbnQgZXZlbnQgcGx1Z2lucyAnICsgJ3VzaW5nIHRoZSBzYW1lIG5hbWUsIGAlc2AuJywgcGx1Z2luTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICBuYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXSA9IFBsdWdpbk1vZHVsZTtcbiAgICAgICAgaXNPcmRlcmluZ0RpcnR5ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzT3JkZXJpbmdEaXJ0eSkge1xuICAgICAgcmVjb21wdXRlUGx1Z2luT3JkZXJpbmcoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIExvb2tzIHVwIHRoZSBwbHVnaW4gZm9yIHRoZSBzdXBwbGllZCBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IEEgc3ludGhldGljIGV2ZW50LlxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBUaGUgcGx1Z2luIHRoYXQgY3JlYXRlZCB0aGUgc3VwcGxpZWQgZXZlbnQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0UGx1Z2luTW9kdWxlRm9yRXZlbnQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBkaXNwYXRjaENvbmZpZyA9IGV2ZW50LmRpc3BhdGNoQ29uZmlnO1xuICAgIGlmIChkaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lKSB7XG4gICAgICByZXR1cm4gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tkaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lXSB8fCBudWxsO1xuICAgIH1cbiAgICBmb3IgKHZhciBwaGFzZSBpbiBkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgICAgaWYgKCFkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcy5oYXNPd25Qcm9wZXJ0eShwaGFzZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgUGx1Z2luTW9kdWxlID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lc1twaGFzZV1dO1xuICAgICAgaWYgKFBsdWdpbk1vZHVsZSkge1xuICAgICAgICByZXR1cm4gUGx1Z2luTW9kdWxlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogRXhwb3NlZCBmb3IgdW5pdCB0ZXN0aW5nLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Jlc2V0RXZlbnRQbHVnaW5zOiBmdW5jdGlvbiAoKSB7XG4gICAgRXZlbnRQbHVnaW5PcmRlciA9IG51bGw7XG4gICAgZm9yICh2YXIgcGx1Z2luTmFtZSBpbiBuYW1lc1RvUGx1Z2lucykge1xuICAgICAgaWYgKG5hbWVzVG9QbHVnaW5zLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpKSB7XG4gICAgICAgIGRlbGV0ZSBuYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gICAgRXZlbnRQbHVnaW5SZWdpc3RyeS5wbHVnaW5zLmxlbmd0aCA9IDA7XG5cbiAgICB2YXIgZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M7XG4gICAgZm9yICh2YXIgZXZlbnROYW1lIGluIGV2ZW50TmFtZURpc3BhdGNoQ29uZmlncykge1xuICAgICAgaWYgKGV2ZW50TmFtZURpc3BhdGNoQ29uZmlncy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKSB7XG4gICAgICAgIGRlbGV0ZSBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3NbZXZlbnROYW1lXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzO1xuICAgIGZvciAodmFyIHJlZ2lzdHJhdGlvbk5hbWUgaW4gcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMpIHtcbiAgICAgIGlmIChyZWdpc3RyYXRpb25OYW1lTW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShyZWdpc3RyYXRpb25OYW1lKSkge1xuICAgICAgICBkZWxldGUgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQbHVnaW5SZWdpc3RyeTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQbHVnaW5VdGlsc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIFJlYWN0RXJyb3JVdGlscyA9IHJlcXVpcmUoJy4vUmVhY3RFcnJvclV0aWxzJyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG4vKipcbiAqIEluamVjdGVkIGRlcGVuZGVuY2llczpcbiAqL1xuXG4vKipcbiAqIC0gYE1vdW50YDogW3JlcXVpcmVkXSBNb2R1bGUgdGhhdCBjYW4gY29udmVydCBiZXR3ZWVuIFJlYWN0IGRvbSBJRHMgYW5kXG4gKiAgIGFjdHVhbCBub2RlIHJlZmVyZW5jZXMuXG4gKi9cbnZhciBpbmplY3Rpb24gPSB7XG4gIE1vdW50OiBudWxsLFxuICBpbmplY3RNb3VudDogZnVuY3Rpb24gKEluamVjdGVkTW91bnQpIHtcbiAgICBpbmplY3Rpb24uTW91bnQgPSBJbmplY3RlZE1vdW50O1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhJbmplY3RlZE1vdW50ICYmIEluamVjdGVkTW91bnQuZ2V0Tm9kZSAmJiBJbmplY3RlZE1vdW50LmdldElELCAnRXZlbnRQbHVnaW5VdGlscy5pbmplY3Rpb24uaW5qZWN0TW91bnQoLi4uKTogSW5qZWN0ZWQgTW91bnQgJyArICdtb2R1bGUgaXMgbWlzc2luZyBnZXROb2RlIG9yIGdldElELicpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xuXG5mdW5jdGlvbiBpc0VuZGlzaCh0b3BMZXZlbFR5cGUpIHtcbiAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZVVwIHx8IHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BUb3VjaEVuZCB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wVG91Y2hDYW5jZWw7XG59XG5cbmZ1bmN0aW9uIGlzTW92ZWlzaCh0b3BMZXZlbFR5cGUpIHtcbiAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU1vdmUgfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoTW92ZTtcbn1cbmZ1bmN0aW9uIGlzU3RhcnRpc2godG9wTGV2ZWxUeXBlKSB7XG4gIHJldHVybiB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duIHx8IHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BUb3VjaFN0YXJ0O1xufVxuXG52YXIgdmFsaWRhdGVFdmVudERpc3BhdGNoZXM7XG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBkaXNwYXRjaExpc3RlbmVycyA9IGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycztcbiAgICB2YXIgZGlzcGF0Y2hJRHMgPSBldmVudC5fZGlzcGF0Y2hJRHM7XG5cbiAgICB2YXIgbGlzdGVuZXJzSXNBcnIgPSBBcnJheS5pc0FycmF5KGRpc3BhdGNoTGlzdGVuZXJzKTtcbiAgICB2YXIgaWRzSXNBcnIgPSBBcnJheS5pc0FycmF5KGRpc3BhdGNoSURzKTtcbiAgICB2YXIgSURzTGVuID0gaWRzSXNBcnIgPyBkaXNwYXRjaElEcy5sZW5ndGggOiBkaXNwYXRjaElEcyA/IDEgOiAwO1xuICAgIHZhciBsaXN0ZW5lcnNMZW4gPSBsaXN0ZW5lcnNJc0FyciA/IGRpc3BhdGNoTGlzdGVuZXJzLmxlbmd0aCA6IGRpc3BhdGNoTGlzdGVuZXJzID8gMSA6IDA7XG5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhpZHNJc0FyciA9PT0gbGlzdGVuZXJzSXNBcnIgJiYgSURzTGVuID09PSBsaXN0ZW5lcnNMZW4sICdFdmVudFBsdWdpblV0aWxzOiBJbnZhbGlkIGBldmVudGAuJykgOiB1bmRlZmluZWQ7XG4gIH07XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggdGhlIGV2ZW50IHRvIHRoZSBsaXN0ZW5lci5cbiAqIEBwYXJhbSB7U3ludGhldGljRXZlbnR9IGV2ZW50IFN5bnRoZXRpY0V2ZW50IHRvIGhhbmRsZVxuICogQHBhcmFtIHtib29sZWFufSBzaW11bGF0ZWQgSWYgdGhlIGV2ZW50IGlzIHNpbXVsYXRlZCAoY2hhbmdlcyBleG4gYmVoYXZpb3IpXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBsaXN0ZW5lciBBcHBsaWNhdGlvbi1sZXZlbCBjYWxsYmFja1xuICogQHBhcmFtIHtzdHJpbmd9IGRvbUlEIERPTSBpZCB0byBwYXNzIHRvIHRoZSBjYWxsYmFjay5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZURpc3BhdGNoKGV2ZW50LCBzaW11bGF0ZWQsIGxpc3RlbmVyLCBkb21JRCkge1xuICB2YXIgdHlwZSA9IGV2ZW50LnR5cGUgfHwgJ3Vua25vd24tZXZlbnQnO1xuICBldmVudC5jdXJyZW50VGFyZ2V0ID0gaW5qZWN0aW9uLk1vdW50LmdldE5vZGUoZG9tSUQpO1xuICBpZiAoc2ltdWxhdGVkKSB7XG4gICAgUmVhY3RFcnJvclV0aWxzLmludm9rZUd1YXJkZWRDYWxsYmFja1dpdGhDYXRjaCh0eXBlLCBsaXN0ZW5lciwgZXZlbnQsIGRvbUlEKTtcbiAgfSBlbHNlIHtcbiAgICBSZWFjdEVycm9yVXRpbHMuaW52b2tlR3VhcmRlZENhbGxiYWNrKHR5cGUsIGxpc3RlbmVyLCBldmVudCwgZG9tSUQpO1xuICB9XG4gIGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBudWxsO1xufVxuXG4vKipcbiAqIFN0YW5kYXJkL3NpbXBsZSBpdGVyYXRpb24gdGhyb3VnaCBhbiBldmVudCdzIGNvbGxlY3RlZCBkaXNwYXRjaGVzLlxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXIoZXZlbnQsIHNpbXVsYXRlZCkge1xuICB2YXIgZGlzcGF0Y2hMaXN0ZW5lcnMgPSBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnM7XG4gIHZhciBkaXNwYXRjaElEcyA9IGV2ZW50Ll9kaXNwYXRjaElEcztcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcyhldmVudCk7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcnMpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNwYXRjaExpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLyBMaXN0ZW5lcnMgYW5kIElEcyBhcmUgdHdvIHBhcmFsbGVsIGFycmF5cyB0aGF0IGFyZSBhbHdheXMgaW4gc3luYy5cbiAgICAgIGV4ZWN1dGVEaXNwYXRjaChldmVudCwgc2ltdWxhdGVkLCBkaXNwYXRjaExpc3RlbmVyc1tpXSwgZGlzcGF0Y2hJRHNbaV0pO1xuICAgIH1cbiAgfSBlbHNlIGlmIChkaXNwYXRjaExpc3RlbmVycykge1xuICAgIGV4ZWN1dGVEaXNwYXRjaChldmVudCwgc2ltdWxhdGVkLCBkaXNwYXRjaExpc3RlbmVycywgZGlzcGF0Y2hJRHMpO1xuICB9XG4gIGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycyA9IG51bGw7XG4gIGV2ZW50Ll9kaXNwYXRjaElEcyA9IG51bGw7XG59XG5cbi8qKlxuICogU3RhbmRhcmQvc2ltcGxlIGl0ZXJhdGlvbiB0aHJvdWdoIGFuIGV2ZW50J3MgY29sbGVjdGVkIGRpc3BhdGNoZXMsIGJ1dCBzdG9wc1xuICogYXQgdGhlIGZpcnN0IGRpc3BhdGNoIGV4ZWN1dGlvbiByZXR1cm5pbmcgdHJ1ZSwgYW5kIHJldHVybnMgdGhhdCBpZC5cbiAqXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBpZCBvZiB0aGUgZmlyc3QgZGlzcGF0Y2ggZXhlY3V0aW9uIHdobydzIGxpc3RlbmVyIHJldHVybnNcbiAqIHRydWUsIG9yIG51bGwgaWYgbm8gbGlzdGVuZXIgcmV0dXJuZWQgdHJ1ZS5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZURpc3BhdGNoZXNJbk9yZGVyU3RvcEF0VHJ1ZUltcGwoZXZlbnQpIHtcbiAgdmFyIGRpc3BhdGNoTGlzdGVuZXJzID0gZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzO1xuICB2YXIgZGlzcGF0Y2hJRHMgPSBldmVudC5fZGlzcGF0Y2hJRHM7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFsaWRhdGVFdmVudERpc3BhdGNoZXMoZXZlbnQpO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KGRpc3BhdGNoTGlzdGVuZXJzKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlzcGF0Y2hMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy8gTGlzdGVuZXJzIGFuZCBJRHMgYXJlIHR3byBwYXJhbGxlbCBhcnJheXMgdGhhdCBhcmUgYWx3YXlzIGluIHN5bmMuXG4gICAgICBpZiAoZGlzcGF0Y2hMaXN0ZW5lcnNbaV0oZXZlbnQsIGRpc3BhdGNoSURzW2ldKSkge1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2hJRHNbaV07XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGRpc3BhdGNoTGlzdGVuZXJzKSB7XG4gICAgaWYgKGRpc3BhdGNoTGlzdGVuZXJzKGV2ZW50LCBkaXNwYXRjaElEcykpIHtcbiAgICAgIHJldHVybiBkaXNwYXRjaElEcztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQHNlZSBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlSW1wbFxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlKGV2ZW50KSB7XG4gIHZhciByZXQgPSBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlSW1wbChldmVudCk7XG4gIGV2ZW50Ll9kaXNwYXRjaElEcyA9IG51bGw7XG4gIGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycyA9IG51bGw7XG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogRXhlY3V0aW9uIG9mIGEgXCJkaXJlY3RcIiBkaXNwYXRjaCAtIHRoZXJlIG11c3QgYmUgYXQgbW9zdCBvbmUgZGlzcGF0Y2hcbiAqIGFjY3VtdWxhdGVkIG9uIHRoZSBldmVudCBvciBpdCBpcyBjb25zaWRlcmVkIGFuIGVycm9yLiBJdCBkb2Vzbid0IHJlYWxseSBtYWtlXG4gKiBzZW5zZSBmb3IgYW4gZXZlbnQgd2l0aCBtdWx0aXBsZSBkaXNwYXRjaGVzIChidWJibGVkKSB0byBrZWVwIHRyYWNrIG9mIHRoZVxuICogcmV0dXJuIHZhbHVlcyBhdCBlYWNoIGRpc3BhdGNoIGV4ZWN1dGlvbiwgYnV0IGl0IGRvZXMgdGVuZCB0byBtYWtlIHNlbnNlIHdoZW5cbiAqIGRlYWxpbmcgd2l0aCBcImRpcmVjdFwiIGRpc3BhdGNoZXMuXG4gKlxuICogQHJldHVybiB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBleGVjdXRpbmcgdGhlIHNpbmdsZSBkaXNwYXRjaC5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZURpcmVjdERpc3BhdGNoKGV2ZW50KSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFsaWRhdGVFdmVudERpc3BhdGNoZXMoZXZlbnQpO1xuICB9XG4gIHZhciBkaXNwYXRjaExpc3RlbmVyID0gZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzO1xuICB2YXIgZGlzcGF0Y2hJRCA9IGV2ZW50Ll9kaXNwYXRjaElEcztcbiAgISFBcnJheS5pc0FycmF5KGRpc3BhdGNoTGlzdGVuZXIpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2V4ZWN1dGVEaXJlY3REaXNwYXRjaCguLi4pOiBJbnZhbGlkIGBldmVudGAuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB2YXIgcmVzID0gZGlzcGF0Y2hMaXN0ZW5lciA/IGRpc3BhdGNoTGlzdGVuZXIoZXZlbnQsIGRpc3BhdGNoSUQpIDogbnVsbDtcbiAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gbnVsbDtcbiAgZXZlbnQuX2Rpc3BhdGNoSURzID0gbnVsbDtcbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBldmVudFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZmYgbnVtYmVyIG9mIGRpc3BhdGNoZXMgYWNjdW11bGF0ZWQgaXMgZ3JlYXRlciB0aGFuIDAuXG4gKi9cbmZ1bmN0aW9uIGhhc0Rpc3BhdGNoZXMoZXZlbnQpIHtcbiAgcmV0dXJuICEhZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzO1xufVxuXG4vKipcbiAqIEdlbmVyYWwgdXRpbGl0aWVzIHRoYXQgYXJlIHVzZWZ1bCBpbiBjcmVhdGluZyBjdXN0b20gRXZlbnQgUGx1Z2lucy5cbiAqL1xudmFyIEV2ZW50UGx1Z2luVXRpbHMgPSB7XG4gIGlzRW5kaXNoOiBpc0VuZGlzaCxcbiAgaXNNb3ZlaXNoOiBpc01vdmVpc2gsXG4gIGlzU3RhcnRpc2g6IGlzU3RhcnRpc2gsXG5cbiAgZXhlY3V0ZURpcmVjdERpc3BhdGNoOiBleGVjdXRlRGlyZWN0RGlzcGF0Y2gsXG4gIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlcjogZXhlY3V0ZURpc3BhdGNoZXNJbk9yZGVyLFxuICBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlOiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlLFxuICBoYXNEaXNwYXRjaGVzOiBoYXNEaXNwYXRjaGVzLFxuXG4gIGdldE5vZGU6IGZ1bmN0aW9uIChpZCkge1xuICAgIHJldHVybiBpbmplY3Rpb24uTW91bnQuZ2V0Tm9kZShpZCk7XG4gIH0sXG4gIGdldElEOiBmdW5jdGlvbiAobm9kZSkge1xuICAgIHJldHVybiBpbmplY3Rpb24uTW91bnQuZ2V0SUQobm9kZSk7XG4gIH0sXG5cbiAgaW5qZWN0aW9uOiBpbmplY3Rpb25cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQbHVnaW5VdGlsczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQcm9wYWdhdG9yc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xuXG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIGFjY3VtdWxhdGVJbnRvID0gcmVxdWlyZSgnLi9hY2N1bXVsYXRlSW50bycpO1xudmFyIGZvckVhY2hBY2N1bXVsYXRlZCA9IHJlcXVpcmUoJy4vZm9yRWFjaEFjY3VtdWxhdGVkJyk7XG5cbnZhciBQcm9wYWdhdGlvblBoYXNlcyA9IEV2ZW50Q29uc3RhbnRzLlByb3BhZ2F0aW9uUGhhc2VzO1xudmFyIGdldExpc3RlbmVyID0gRXZlbnRQbHVnaW5IdWIuZ2V0TGlzdGVuZXI7XG5cbi8qKlxuICogU29tZSBldmVudCB0eXBlcyBoYXZlIGEgbm90aW9uIG9mIGRpZmZlcmVudCByZWdpc3RyYXRpb24gbmFtZXMgZm9yIGRpZmZlcmVudFxuICogXCJwaGFzZXNcIiBvZiBwcm9wYWdhdGlvbi4gVGhpcyBmaW5kcyBsaXN0ZW5lcnMgYnkgYSBnaXZlbiBwaGFzZS5cbiAqL1xuZnVuY3Rpb24gbGlzdGVuZXJBdFBoYXNlKGlkLCBldmVudCwgcHJvcGFnYXRpb25QaGFzZSkge1xuICB2YXIgcmVnaXN0cmF0aW9uTmFtZSA9IGV2ZW50LmRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzW3Byb3BhZ2F0aW9uUGhhc2VdO1xuICByZXR1cm4gZ2V0TGlzdGVuZXIoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpO1xufVxuXG4vKipcbiAqIFRhZ3MgYSBgU3ludGhldGljRXZlbnRgIHdpdGggZGlzcGF0Y2hlZCBsaXN0ZW5lcnMuIENyZWF0aW5nIHRoaXMgZnVuY3Rpb25cbiAqIGhlcmUsIGFsbG93cyB1cyB0byBub3QgaGF2ZSB0byBiaW5kIG9yIGNyZWF0ZSBmdW5jdGlvbnMgZm9yIGVhY2ggZXZlbnQuXG4gKiBNdXRhdGluZyB0aGUgZXZlbnQncyBtZW1iZXJzIGFsbG93cyB1cyB0byBub3QgaGF2ZSB0byBjcmVhdGUgYSB3cmFwcGluZ1xuICogXCJkaXNwYXRjaFwiIG9iamVjdCB0aGF0IHBhaXJzIHRoZSBldmVudCB3aXRoIHRoZSBsaXN0ZW5lci5cbiAqL1xuZnVuY3Rpb24gYWNjdW11bGF0ZURpcmVjdGlvbmFsRGlzcGF0Y2hlcyhkb21JRCwgdXB3YXJkcywgZXZlbnQpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhkb21JRCwgJ0Rpc3BhdGNoaW5nIGlkIG11c3Qgbm90IGJlIG51bGwnKSA6IHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgcGhhc2UgPSB1cHdhcmRzID8gUHJvcGFnYXRpb25QaGFzZXMuYnViYmxlZCA6IFByb3BhZ2F0aW9uUGhhc2VzLmNhcHR1cmVkO1xuICB2YXIgbGlzdGVuZXIgPSBsaXN0ZW5lckF0UGhhc2UoZG9tSUQsIGV2ZW50LCBwaGFzZSk7XG4gIGlmIChsaXN0ZW5lcikge1xuICAgIGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycyA9IGFjY3VtdWxhdGVJbnRvKGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycywgbGlzdGVuZXIpO1xuICAgIGV2ZW50Ll9kaXNwYXRjaElEcyA9IGFjY3VtdWxhdGVJbnRvKGV2ZW50Ll9kaXNwYXRjaElEcywgZG9tSUQpO1xuICB9XG59XG5cbi8qKlxuICogQ29sbGVjdCBkaXNwYXRjaGVzIChtdXN0IGJlIGVudGlyZWx5IGNvbGxlY3RlZCBiZWZvcmUgZGlzcGF0Y2hpbmcgLSBzZWUgdW5pdFxuICogdGVzdHMpLiBMYXppbHkgYWxsb2NhdGUgdGhlIGFycmF5IHRvIGNvbnNlcnZlIG1lbW9yeS4gIFdlIG11c3QgbG9vcCB0aHJvdWdoXG4gKiBlYWNoIGV2ZW50IGFuZCBwZXJmb3JtIHRoZSB0cmF2ZXJzYWwgZm9yIGVhY2ggb25lLiBXZSBjYW5ub3QgcGVyZm9ybSBhXG4gKiBzaW5nbGUgdHJhdmVyc2FsIGZvciB0aGUgZW50aXJlIGNvbGxlY3Rpb24gb2YgZXZlbnRzIGJlY2F1c2UgZWFjaCBldmVudCBtYXlcbiAqIGhhdmUgYSBkaWZmZXJlbnQgdGFyZ2V0LlxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlKGV2ZW50KSB7XG4gIGlmIChldmVudCAmJiBldmVudC5kaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgIEV2ZW50UGx1Z2luSHViLmluamVjdGlvbi5nZXRJbnN0YW5jZUhhbmRsZSgpLnRyYXZlcnNlVHdvUGhhc2UoZXZlbnQuZGlzcGF0Y2hNYXJrZXIsIGFjY3VtdWxhdGVEaXJlY3Rpb25hbERpc3BhdGNoZXMsIGV2ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIFNhbWUgYXMgYGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGVgLCBidXQgc2tpcHMgb3ZlciB0aGUgdGFyZ2V0SUQuXG4gKi9cbmZ1bmN0aW9uIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGVTa2lwVGFyZ2V0KGV2ZW50KSB7XG4gIGlmIChldmVudCAmJiBldmVudC5kaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykge1xuICAgIEV2ZW50UGx1Z2luSHViLmluamVjdGlvbi5nZXRJbnN0YW5jZUhhbmRsZSgpLnRyYXZlcnNlVHdvUGhhc2VTa2lwVGFyZ2V0KGV2ZW50LmRpc3BhdGNoTWFya2VyLCBhY2N1bXVsYXRlRGlyZWN0aW9uYWxEaXNwYXRjaGVzLCBldmVudCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBY2N1bXVsYXRlcyB3aXRob3V0IHJlZ2FyZCB0byBkaXJlY3Rpb24sIGRvZXMgbm90IGxvb2sgZm9yIHBoYXNlZFxuICogcmVnaXN0cmF0aW9uIG5hbWVzLiBTYW1lIGFzIGBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlc1NpbmdsZWAgYnV0IHdpdGhvdXRcbiAqIHJlcXVpcmluZyB0aGF0IHRoZSBgZGlzcGF0Y2hNYXJrZXJgIGJlIHRoZSBzYW1lIGFzIHRoZSBkaXNwYXRjaGVkIElELlxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlRGlzcGF0Y2hlcyhpZCwgaWdub3JlZERpcmVjdGlvbiwgZXZlbnQpIHtcbiAgaWYgKGV2ZW50ICYmIGV2ZW50LmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICB2YXIgcmVnaXN0cmF0aW9uTmFtZSA9IGV2ZW50LmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWU7XG4gICAgdmFyIGxpc3RlbmVyID0gZ2V0TGlzdGVuZXIoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpO1xuICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gYWNjdW11bGF0ZUludG8oZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzLCBsaXN0ZW5lcik7XG4gICAgICBldmVudC5fZGlzcGF0Y2hJRHMgPSBhY2N1bXVsYXRlSW50byhldmVudC5fZGlzcGF0Y2hJRHMsIGlkKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBY2N1bXVsYXRlcyBkaXNwYXRjaGVzIG9uIGFuIGBTeW50aGV0aWNFdmVudGAsIGJ1dCBvbmx5IGZvciB0aGVcbiAqIGBkaXNwYXRjaE1hcmtlcmAuXG4gKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBldmVudFxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlc1NpbmdsZShldmVudCkge1xuICBpZiAoZXZlbnQgJiYgZXZlbnQuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIGFjY3VtdWxhdGVEaXNwYXRjaGVzKGV2ZW50LmRpc3BhdGNoTWFya2VyLCBudWxsLCBldmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlcyhldmVudHMpIHtcbiAgZm9yRWFjaEFjY3VtdWxhdGVkKGV2ZW50cywgYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NpbmdsZSk7XG59XG5cbmZ1bmN0aW9uIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTa2lwVGFyZ2V0KGV2ZW50cykge1xuICBmb3JFYWNoQWNjdW11bGF0ZWQoZXZlbnRzLCBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlU2tpcFRhcmdldCk7XG59XG5cbmZ1bmN0aW9uIGFjY3VtdWxhdGVFbnRlckxlYXZlRGlzcGF0Y2hlcyhsZWF2ZSwgZW50ZXIsIGZyb21JRCwgdG9JRCkge1xuICBFdmVudFBsdWdpbkh1Yi5pbmplY3Rpb24uZ2V0SW5zdGFuY2VIYW5kbGUoKS50cmF2ZXJzZUVudGVyTGVhdmUoZnJvbUlELCB0b0lELCBhY2N1bXVsYXRlRGlzcGF0Y2hlcywgbGVhdmUsIGVudGVyKTtcbn1cblxuZnVuY3Rpb24gYWNjdW11bGF0ZURpcmVjdERpc3BhdGNoZXMoZXZlbnRzKSB7XG4gIGZvckVhY2hBY2N1bXVsYXRlZChldmVudHMsIGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzU2luZ2xlKTtcbn1cblxuLyoqXG4gKiBBIHNtYWxsIHNldCBvZiBwcm9wYWdhdGlvbiBwYXR0ZXJucywgZWFjaCBvZiB3aGljaCB3aWxsIGFjY2VwdCBhIHNtYWxsIGFtb3VudFxuICogb2YgaW5mb3JtYXRpb24sIGFuZCBnZW5lcmF0ZSBhIHNldCBvZiBcImRpc3BhdGNoIHJlYWR5IGV2ZW50IG9iamVjdHNcIiAtIHdoaWNoXG4gKiBhcmUgc2V0cyBvZiBldmVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBhbm5vdGF0ZWQgd2l0aCBhIHNldCBvZiBkaXNwYXRjaGVkXG4gKiBsaXN0ZW5lciBmdW5jdGlvbnMvaWRzLiBUaGUgQVBJIGlzIGRlc2lnbmVkIHRoaXMgd2F5IHRvIGRpc2NvdXJhZ2UgdGhlc2VcbiAqIHByb3BhZ2F0aW9uIHN0cmF0ZWdpZXMgZnJvbSBhY3R1YWxseSBleGVjdXRpbmcgdGhlIGRpc3BhdGNoZXMsIHNpbmNlIHdlXG4gKiBhbHdheXMgd2FudCB0byBjb2xsZWN0IHRoZSBlbnRpcmUgc2V0IG9mIGRpc3BhdGNoZXMgYmVmb3JlIGV4ZWN1dGluZyBldmVudCBhXG4gKiBzaW5nbGUgb25lLlxuICpcbiAqIEBjb25zdHJ1Y3RvciBFdmVudFByb3BhZ2F0b3JzXG4gKi9cbnZhciBFdmVudFByb3BhZ2F0b3JzID0ge1xuICBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzOiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzLFxuICBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2tpcFRhcmdldDogYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NraXBUYXJnZXQsXG4gIGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzOiBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlcyxcbiAgYWNjdW11bGF0ZUVudGVyTGVhdmVEaXNwYXRjaGVzOiBhY2N1bXVsYXRlRW50ZXJMZWF2ZURpc3BhdGNoZXNcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRQcm9wYWdhdG9yczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZ2V0VGV4dENvbnRlbnRBY2Nlc3NvciA9IHJlcXVpcmUoJy4vZ2V0VGV4dENvbnRlbnRBY2Nlc3NvcicpO1xuXG4vKipcbiAqIFRoaXMgaGVscGVyIGNsYXNzIHN0b3JlcyBpbmZvcm1hdGlvbiBhYm91dCB0ZXh0IGNvbnRlbnQgb2YgYSB0YXJnZXQgbm9kZSxcbiAqIGFsbG93aW5nIGNvbXBhcmlzb24gb2YgY29udGVudCBiZWZvcmUgYW5kIGFmdGVyIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogSWRlbnRpZnkgdGhlIG5vZGUgd2hlcmUgc2VsZWN0aW9uIGN1cnJlbnRseSBiZWdpbnMsIHRoZW4gb2JzZXJ2ZVxuICogYm90aCBpdHMgdGV4dCBjb250ZW50IGFuZCBpdHMgY3VycmVudCBwb3NpdGlvbiBpbiB0aGUgRE9NLiBTaW5jZSB0aGVcbiAqIGJyb3dzZXIgbWF5IG5hdGl2ZWx5IHJlcGxhY2UgdGhlIHRhcmdldCBub2RlIGR1cmluZyBjb21wb3NpdGlvbiwgd2UgY2FuXG4gKiB1c2UgaXRzIHBvc2l0aW9uIHRvIGZpbmQgaXRzIHJlcGxhY2VtZW50LlxuICpcbiAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHJvb3RcbiAqL1xuZnVuY3Rpb24gRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlKHJvb3QpIHtcbiAgdGhpcy5fcm9vdCA9IHJvb3Q7XG4gIHRoaXMuX3N0YXJ0VGV4dCA9IHRoaXMuZ2V0VGV4dCgpO1xuICB0aGlzLl9mYWxsYmFja1RleHQgPSBudWxsO1xufVxuXG5hc3NpZ24oRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlLnByb3RvdHlwZSwge1xuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcm9vdCA9IG51bGw7XG4gICAgdGhpcy5fc3RhcnRUZXh0ID0gbnVsbDtcbiAgICB0aGlzLl9mYWxsYmFja1RleHQgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCB0ZXh0IG9mIGlucHV0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXRUZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCd2YWx1ZScgaW4gdGhpcy5fcm9vdCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Jvb3QudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9yb290W2dldFRleHRDb250ZW50QWNjZXNzb3IoKV07XG4gIH0sXG5cbiAgLyoqXG4gICAqIERldGVybWluZSB0aGUgZGlmZmVyaW5nIHN1YnN0cmluZyBiZXR3ZWVuIHRoZSBpbml0aWFsbHkgc3RvcmVkXG4gICAqIHRleHQgY29udGVudCBhbmQgdGhlIGN1cnJlbnQgY29udGVudC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0RGF0YTogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9mYWxsYmFja1RleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9mYWxsYmFja1RleHQ7XG4gICAgfVxuXG4gICAgdmFyIHN0YXJ0O1xuICAgIHZhciBzdGFydFZhbHVlID0gdGhpcy5fc3RhcnRUZXh0O1xuICAgIHZhciBzdGFydExlbmd0aCA9IHN0YXJ0VmFsdWUubGVuZ3RoO1xuICAgIHZhciBlbmQ7XG4gICAgdmFyIGVuZFZhbHVlID0gdGhpcy5nZXRUZXh0KCk7XG4gICAgdmFyIGVuZExlbmd0aCA9IGVuZFZhbHVlLmxlbmd0aDtcblxuICAgIGZvciAoc3RhcnQgPSAwOyBzdGFydCA8IHN0YXJ0TGVuZ3RoOyBzdGFydCsrKSB7XG4gICAgICBpZiAoc3RhcnRWYWx1ZVtzdGFydF0gIT09IGVuZFZhbHVlW3N0YXJ0XSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbWluRW5kID0gc3RhcnRMZW5ndGggLSBzdGFydDtcbiAgICBmb3IgKGVuZCA9IDE7IGVuZCA8PSBtaW5FbmQ7IGVuZCsrKSB7XG4gICAgICBpZiAoc3RhcnRWYWx1ZVtzdGFydExlbmd0aCAtIGVuZF0gIT09IGVuZFZhbHVlW2VuZExlbmd0aCAtIGVuZF0pIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNsaWNlVGFpbCA9IGVuZCA+IDEgPyAxIC0gZW5kIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuX2ZhbGxiYWNrVGV4dCA9IGVuZFZhbHVlLnNsaWNlKHN0YXJ0LCBzbGljZVRhaWwpO1xuICAgIHJldHVybiB0aGlzLl9mYWxsYmFja1RleHQ7XG4gIH1cbn0pO1xuXG5Qb29sZWRDbGFzcy5hZGRQb29saW5nVG8oRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEhUTUxET01Qcm9wZXJ0eUNvbmZpZ1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTVByb3BlcnR5ID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eScpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIE1VU1RfVVNFX0FUVFJJQlVURSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5NVVNUX1VTRV9BVFRSSUJVVEU7XG52YXIgTVVTVF9VU0VfUFJPUEVSVFkgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uTVVTVF9VU0VfUFJPUEVSVFk7XG52YXIgSEFTX0JPT0xFQU5fVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX0JPT0xFQU5fVkFMVUU7XG52YXIgSEFTX1NJREVfRUZGRUNUUyA9IERPTVByb3BlcnR5LmluamVjdGlvbi5IQVNfU0lERV9FRkZFQ1RTO1xudmFyIEhBU19OVU1FUklDX1ZBTFVFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLkhBU19OVU1FUklDX1ZBTFVFO1xudmFyIEhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLkhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFO1xudmFyIEhBU19PVkVSTE9BREVEX0JPT0xFQU5fVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRTtcblxudmFyIGhhc1NWRztcbmlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcbiAgdmFyIGltcGxlbWVudGF0aW9uID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb247XG4gIGhhc1NWRyA9IGltcGxlbWVudGF0aW9uICYmIGltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUgJiYgaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgnaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNCYXNpY1N0cnVjdHVyZScsICcxLjEnKTtcbn1cblxudmFyIEhUTUxET01Qcm9wZXJ0eUNvbmZpZyA9IHtcbiAgaXNDdXN0b21BdHRyaWJ1dGU6IFJlZ0V4cC5wcm90b3R5cGUudGVzdC5iaW5kKC9eKGRhdGF8YXJpYSktW2Etel9dW2EtelxcZF8uXFwtXSokLyksXG4gIFByb3BlcnRpZXM6IHtcbiAgICAvKipcbiAgICAgKiBTdGFuZGFyZCBQcm9wZXJ0aWVzXG4gICAgICovXG4gICAgYWNjZXB0OiBudWxsLFxuICAgIGFjY2VwdENoYXJzZXQ6IG51bGwsXG4gICAgYWNjZXNzS2V5OiBudWxsLFxuICAgIGFjdGlvbjogbnVsbCxcbiAgICBhbGxvd0Z1bGxTY3JlZW46IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGFsbG93VHJhbnNwYXJlbmN5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgYWx0OiBudWxsLFxuICAgIGFzeW5jOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBhdXRvQ29tcGxldGU6IG51bGwsXG4gICAgLy8gYXV0b0ZvY3VzIGlzIHBvbHlmaWxsZWQvbm9ybWFsaXplZCBieSBBdXRvRm9jdXNVdGlsc1xuICAgIC8vIGF1dG9Gb2N1czogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgYXV0b1BsYXk6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNhcHR1cmU6IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNlbGxQYWRkaW5nOiBudWxsLFxuICAgIGNlbGxTcGFjaW5nOiBudWxsLFxuICAgIGNoYXJTZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBjaGFsbGVuZ2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBjaGVja2VkOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNsYXNzSUQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAvLyBUbyBzZXQgY2xhc3NOYW1lIG9uIFNWRyBlbGVtZW50cywgaXQncyBuZWNlc3NhcnkgdG8gdXNlIC5zZXRBdHRyaWJ1dGU7XG4gICAgLy8gdGhpcyB3b3JrcyBvbiBIVE1MIGVsZW1lbnRzIHRvbyBpbiBhbGwgYnJvd3NlcnMgZXhjZXB0IElFOC4gQ29udmVuaWVudGx5LFxuICAgIC8vIElFOCBkb2Vzbid0IHN1cHBvcnQgU1ZHIGFuZCBzbyB3ZSBjYW4gc2ltcGx5IHVzZSB0aGUgYXR0cmlidXRlIGluXG4gICAgLy8gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IFNWRyBhbmQgdGhlIHByb3BlcnR5IGluIGJyb3dzZXJzIHRoYXQgZG9uJ3QsXG4gICAgLy8gcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIEhUTUwgb3IgU1ZHLlxuICAgIGNsYXNzTmFtZTogaGFzU1ZHID8gTVVTVF9VU0VfQVRUUklCVVRFIDogTVVTVF9VU0VfUFJPUEVSVFksXG4gICAgY29sczogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUsXG4gICAgY29sU3BhbjogbnVsbCxcbiAgICBjb250ZW50OiBudWxsLFxuICAgIGNvbnRlbnRFZGl0YWJsZTogbnVsbCxcbiAgICBjb250ZXh0TWVudTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGNvbnRyb2xzOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGNvb3JkczogbnVsbCxcbiAgICBjcm9zc09yaWdpbjogbnVsbCxcbiAgICBkYXRhOiBudWxsLCAvLyBGb3IgYDxvYmplY3QgLz5gIGFjdHMgYXMgYHNyY2AuXG4gICAgZGF0ZVRpbWU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAnZGVmYXVsdCc6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGRlZmVyOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBkaXI6IG51bGwsXG4gICAgZGlzYWJsZWQ6IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGRvd25sb2FkOiBIQVNfT1ZFUkxPQURFRF9CT09MRUFOX1ZBTFVFLFxuICAgIGRyYWdnYWJsZTogbnVsbCxcbiAgICBlbmNUeXBlOiBudWxsLFxuICAgIGZvcm06IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb3JtQWN0aW9uOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZm9ybUVuY1R5cGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb3JtTWV0aG9kOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZm9ybU5vVmFsaWRhdGU6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGZvcm1UYXJnZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmcmFtZUJvcmRlcjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGhlYWRlcnM6IG51bGwsXG4gICAgaGVpZ2h0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaGlkZGVuOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBoaWdoOiBudWxsLFxuICAgIGhyZWY6IG51bGwsXG4gICAgaHJlZkxhbmc6IG51bGwsXG4gICAgaHRtbEZvcjogbnVsbCxcbiAgICBodHRwRXF1aXY6IG51bGwsXG4gICAgaWNvbjogbnVsbCxcbiAgICBpZDogTVVTVF9VU0VfUFJPUEVSVFksXG4gICAgaW5wdXRNb2RlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaW50ZWdyaXR5OiBudWxsLFxuICAgIGlzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAga2V5UGFyYW1zOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAga2V5VHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGtpbmQ6IG51bGwsXG4gICAgbGFiZWw6IG51bGwsXG4gICAgbGFuZzogbnVsbCxcbiAgICBsaXN0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbG9vcDogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBsb3c6IG51bGwsXG4gICAgbWFuaWZlc3Q6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtYXJnaW5IZWlnaHQ6IG51bGwsXG4gICAgbWFyZ2luV2lkdGg6IG51bGwsXG4gICAgbWF4OiBudWxsLFxuICAgIG1heExlbmd0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG1lZGlhOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWVkaWFHcm91cDogbnVsbCxcbiAgICBtZXRob2Q6IG51bGwsXG4gICAgbWluOiBudWxsLFxuICAgIG1pbkxlbmd0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG11bHRpcGxlOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIG11dGVkOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIG5hbWU6IG51bGwsXG4gICAgbm9uY2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBub1ZhbGlkYXRlOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBvcGVuOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBvcHRpbXVtOiBudWxsLFxuICAgIHBhdHRlcm46IG51bGwsXG4gICAgcGxhY2Vob2xkZXI6IG51bGwsXG4gICAgcG9zdGVyOiBudWxsLFxuICAgIHByZWxvYWQ6IG51bGwsXG4gICAgcmFkaW9Hcm91cDogbnVsbCxcbiAgICByZWFkT25seTogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICByZWw6IG51bGwsXG4gICAgcmVxdWlyZWQ6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIHJldmVyc2VkOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICByb2xlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcm93czogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUsXG4gICAgcm93U3BhbjogbnVsbCxcbiAgICBzYW5kYm94OiBudWxsLFxuICAgIHNjb3BlOiBudWxsLFxuICAgIHNjb3BlZDogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgc2Nyb2xsaW5nOiBudWxsLFxuICAgIHNlYW1sZXNzOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBzZWxlY3RlZDogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBzaGFwZTogbnVsbCxcbiAgICBzaXplOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSxcbiAgICBzaXplczogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHNwYW46IEhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFLFxuICAgIHNwZWxsQ2hlY2s6IG51bGwsXG4gICAgc3JjOiBudWxsLFxuICAgIHNyY0RvYzogTVVTVF9VU0VfUFJPUEVSVFksXG4gICAgc3JjTGFuZzogbnVsbCxcbiAgICBzcmNTZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdGFydDogSEFTX05VTUVSSUNfVkFMVUUsXG4gICAgc3RlcDogbnVsbCxcbiAgICBzdHlsZTogbnVsbCxcbiAgICBzdW1tYXJ5OiBudWxsLFxuICAgIHRhYkluZGV4OiBudWxsLFxuICAgIHRhcmdldDogbnVsbCxcbiAgICB0aXRsZTogbnVsbCxcbiAgICB0eXBlOiBudWxsLFxuICAgIHVzZU1hcDogbnVsbCxcbiAgICB2YWx1ZTogTVVTVF9VU0VfUFJPUEVSVFkgfCBIQVNfU0lERV9FRkZFQ1RTLFxuICAgIHdpZHRoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgd21vZGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB3cmFwOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogUkRGYSBQcm9wZXJ0aWVzXG4gICAgICovXG4gICAgYWJvdXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBkYXRhdHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGlubGlzdDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHByZWZpeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIHByb3BlcnR5IGlzIGFsc28gc3VwcG9ydGVkIGZvciBPcGVuR3JhcGggaW4gbWV0YSB0YWdzLlxuICAgIHByb3BlcnR5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcmVzb3VyY2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAndHlwZW9mJzogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHZvY2FiOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG5cbiAgICAvKipcbiAgICAgKiBOb24tc3RhbmRhcmQgUHJvcGVydGllc1xuICAgICAqL1xuICAgIC8vIGF1dG9DYXBpdGFsaXplIGFuZCBhdXRvQ29ycmVjdCBhcmUgc3VwcG9ydGVkIGluIE1vYmlsZSBTYWZhcmkgZm9yXG4gICAgLy8ga2V5Ym9hcmQgaGludHMuXG4gICAgYXV0b0NhcGl0YWxpemU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBhdXRvQ29ycmVjdDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIGF1dG9TYXZlIGFsbG93cyBXZWJLaXQvQmxpbmsgdG8gcGVyc2lzdCB2YWx1ZXMgb2YgaW5wdXQgZmllbGRzIG9uIHBhZ2UgcmVsb2Fkc1xuICAgIGF1dG9TYXZlOiBudWxsLFxuICAgIC8vIGNvbG9yIGlzIGZvciBTYWZhcmkgbWFzay1pY29uIGxpbmtcbiAgICBjb2xvcjogbnVsbCxcbiAgICAvLyBpdGVtUHJvcCwgaXRlbVNjb3BlLCBpdGVtVHlwZSBhcmUgZm9yXG4gICAgLy8gTWljcm9kYXRhIHN1cHBvcnQuIFNlZSBodHRwOi8vc2NoZW1hLm9yZy9kb2NzL2dzLmh0bWxcbiAgICBpdGVtUHJvcDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGl0ZW1TY29wZTogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgaXRlbVR5cGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAvLyBpdGVtSUQgYW5kIGl0ZW1SZWYgYXJlIGZvciBNaWNyb2RhdGEgc3VwcG9ydCBhcyB3ZWxsIGJ1dFxuICAgIC8vIG9ubHkgc3BlY2lmaWVkIGluIHRoZSB0aGUgV0hBVFdHIHNwZWMgZG9jdW1lbnQuIFNlZVxuICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL21pY3JvZGF0YS5odG1sI21pY3JvZGF0YS1kb20tYXBpXG4gICAgaXRlbUlEOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaXRlbVJlZjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIHJlc3VsdHMgc2hvdyBsb29raW5nIGdsYXNzIGljb24gYW5kIHJlY2VudCBzZWFyY2hlcyBvbiBpbnB1dFxuICAgIC8vIHNlYXJjaCBmaWVsZHMgaW4gV2ViS2l0L0JsaW5rXG4gICAgcmVzdWx0czogbnVsbCxcbiAgICAvLyBJRS1vbmx5IGF0dHJpYnV0ZSB0aGF0IHNwZWNpZmllcyBzZWN1cml0eSByZXN0cmljdGlvbnMgb24gYW4gaWZyYW1lXG4gICAgLy8gYXMgYW4gYWx0ZXJuYXRpdmUgdG8gdGhlIHNhbmRib3ggYXR0cmlidXRlIG9uIElFPDEwXG4gICAgc2VjdXJpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICAvLyBJRS1vbmx5IGF0dHJpYnV0ZSB0aGF0IGNvbnRyb2xzIGZvY3VzIGJlaGF2aW9yXG4gICAgdW5zZWxlY3RhYmxlOiBNVVNUX1VTRV9BVFRSSUJVVEVcbiAgfSxcbiAgRE9NQXR0cmlidXRlTmFtZXM6IHtcbiAgICBhY2NlcHRDaGFyc2V0OiAnYWNjZXB0LWNoYXJzZXQnLFxuICAgIGNsYXNzTmFtZTogJ2NsYXNzJyxcbiAgICBodG1sRm9yOiAnZm9yJyxcbiAgICBodHRwRXF1aXY6ICdodHRwLWVxdWl2J1xuICB9LFxuICBET01Qcm9wZXJ0eU5hbWVzOiB7XG4gICAgYXV0b0NvbXBsZXRlOiAnYXV0b2NvbXBsZXRlJyxcbiAgICBhdXRvRm9jdXM6ICdhdXRvZm9jdXMnLFxuICAgIGF1dG9QbGF5OiAnYXV0b3BsYXknLFxuICAgIGF1dG9TYXZlOiAnYXV0b3NhdmUnLFxuICAgIC8vIGBlbmNvZGluZ2AgaXMgZXF1aXZhbGVudCB0byBgZW5jdHlwZWAsIElFOCBsYWNrcyBhbiBgZW5jdHlwZWAgc2V0dGVyLlxuICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L2Zvcm1zLmh0bWwjZG9tLWZzLWVuY29kaW5nXG4gICAgZW5jVHlwZTogJ2VuY29kaW5nJyxcbiAgICBocmVmTGFuZzogJ2hyZWZsYW5nJyxcbiAgICByYWRpb0dyb3VwOiAncmFkaW9ncm91cCcsXG4gICAgc3BlbGxDaGVjazogJ3NwZWxsY2hlY2snLFxuICAgIHNyY0RvYzogJ3NyY2RvYycsXG4gICAgc3JjU2V0OiAnc3Jjc2V0J1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEhUTUxET01Qcm9wZXJ0eUNvbmZpZzsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgTGlua2VkVmFsdWVVdGlsc1xuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFByb3BUeXBlcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZXMnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25zID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25zJyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgaGFzUmVhZE9ubHlWYWx1ZSA9IHtcbiAgJ2J1dHRvbic6IHRydWUsXG4gICdjaGVja2JveCc6IHRydWUsXG4gICdpbWFnZSc6IHRydWUsXG4gICdoaWRkZW4nOiB0cnVlLFxuICAncmFkaW8nOiB0cnVlLFxuICAncmVzZXQnOiB0cnVlLFxuICAnc3VibWl0JzogdHJ1ZVxufTtcblxuZnVuY3Rpb24gX2Fzc2VydFNpbmdsZUxpbmsoaW5wdXRQcm9wcykge1xuICAhKGlucHV0UHJvcHMuY2hlY2tlZExpbmsgPT0gbnVsbCB8fCBpbnB1dFByb3BzLnZhbHVlTGluayA9PSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDYW5ub3QgcHJvdmlkZSBhIGNoZWNrZWRMaW5rIGFuZCBhIHZhbHVlTGluay4gSWYgeW91IHdhbnQgdG8gdXNlICcgKyAnY2hlY2tlZExpbmssIHlvdSBwcm9iYWJseSBkb25cXCd0IHdhbnQgdG8gdXNlIHZhbHVlTGluayBhbmQgdmljZSB2ZXJzYS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfYXNzZXJ0VmFsdWVMaW5rKGlucHV0UHJvcHMpIHtcbiAgX2Fzc2VydFNpbmdsZUxpbmsoaW5wdXRQcm9wcyk7XG4gICEoaW5wdXRQcm9wcy52YWx1ZSA9PSBudWxsICYmIGlucHV0UHJvcHMub25DaGFuZ2UgPT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnQ2Fubm90IHByb3ZpZGUgYSB2YWx1ZUxpbmsgYW5kIGEgdmFsdWUgb3Igb25DaGFuZ2UgZXZlbnQuIElmIHlvdSB3YW50ICcgKyAndG8gdXNlIHZhbHVlIG9yIG9uQ2hhbmdlLCB5b3UgcHJvYmFibHkgZG9uXFwndCB3YW50IHRvIHVzZSB2YWx1ZUxpbmsuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBfYXNzZXJ0Q2hlY2tlZExpbmsoaW5wdXRQcm9wcykge1xuICBfYXNzZXJ0U2luZ2xlTGluayhpbnB1dFByb3BzKTtcbiAgIShpbnB1dFByb3BzLmNoZWNrZWQgPT0gbnVsbCAmJiBpbnB1dFByb3BzLm9uQ2hhbmdlID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Nhbm5vdCBwcm92aWRlIGEgY2hlY2tlZExpbmsgYW5kIGEgY2hlY2tlZCBwcm9wZXJ0eSBvciBvbkNoYW5nZSBldmVudC4gJyArICdJZiB5b3Ugd2FudCB0byB1c2UgY2hlY2tlZCBvciBvbkNoYW5nZSwgeW91IHByb2JhYmx5IGRvblxcJ3Qgd2FudCB0byAnICsgJ3VzZSBjaGVja2VkTGluaycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbn1cblxudmFyIHByb3BUeXBlcyA9IHtcbiAgdmFsdWU6IGZ1bmN0aW9uIChwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUpIHtcbiAgICBpZiAoIXByb3BzW3Byb3BOYW1lXSB8fCBoYXNSZWFkT25seVZhbHVlW3Byb3BzLnR5cGVdIHx8IHByb3BzLm9uQ2hhbmdlIHx8IHByb3BzLnJlYWRPbmx5IHx8IHByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBFcnJvcignWW91IHByb3ZpZGVkIGEgYHZhbHVlYCBwcm9wIHRvIGEgZm9ybSBmaWVsZCB3aXRob3V0IGFuICcgKyAnYG9uQ2hhbmdlYCBoYW5kbGVyLiBUaGlzIHdpbGwgcmVuZGVyIGEgcmVhZC1vbmx5IGZpZWxkLiBJZiAnICsgJ3RoZSBmaWVsZCBzaG91bGQgYmUgbXV0YWJsZSB1c2UgYGRlZmF1bHRWYWx1ZWAuIE90aGVyd2lzZSwgJyArICdzZXQgZWl0aGVyIGBvbkNoYW5nZWAgb3IgYHJlYWRPbmx5YC4nKTtcbiAgfSxcbiAgY2hlY2tlZDogZnVuY3Rpb24gKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSkge1xuICAgIGlmICghcHJvcHNbcHJvcE5hbWVdIHx8IHByb3BzLm9uQ2hhbmdlIHx8IHByb3BzLnJlYWRPbmx5IHx8IHByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBFcnJvcignWW91IHByb3ZpZGVkIGEgYGNoZWNrZWRgIHByb3AgdG8gYSBmb3JtIGZpZWxkIHdpdGhvdXQgYW4gJyArICdgb25DaGFuZ2VgIGhhbmRsZXIuIFRoaXMgd2lsbCByZW5kZXIgYSByZWFkLW9ubHkgZmllbGQuIElmICcgKyAndGhlIGZpZWxkIHNob3VsZCBiZSBtdXRhYmxlIHVzZSBgZGVmYXVsdENoZWNrZWRgLiBPdGhlcndpc2UsICcgKyAnc2V0IGVpdGhlciBgb25DaGFuZ2VgIG9yIGByZWFkT25seWAuJyk7XG4gIH0sXG4gIG9uQ2hhbmdlOiBSZWFjdFByb3BUeXBlcy5mdW5jXG59O1xuXG52YXIgbG9nZ2VkVHlwZUZhaWx1cmVzID0ge307XG5mdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpIHtcbiAgaWYgKG93bmVyKSB7XG4gICAgdmFyIG5hbWUgPSBvd25lci5nZXROYW1lKCk7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIHJldHVybiAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mIGAnICsgbmFtZSArICdgLic7XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBQcm92aWRlIGEgbGlua2VkIGB2YWx1ZWAgYXR0cmlidXRlIGZvciBjb250cm9sbGVkIGZvcm1zLiBZb3Ugc2hvdWxkIG5vdCB1c2VcbiAqIHRoaXMgb3V0c2lkZSBvZiB0aGUgUmVhY3RET00gY29udHJvbGxlZCBmb3JtIGNvbXBvbmVudHMuXG4gKi9cbnZhciBMaW5rZWRWYWx1ZVV0aWxzID0ge1xuICBjaGVja1Byb3BUeXBlczogZnVuY3Rpb24gKHRhZ05hbWUsIHByb3BzLCBvd25lcikge1xuICAgIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BUeXBlcykge1xuICAgICAgaWYgKHByb3BUeXBlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgdmFyIGVycm9yID0gcHJvcFR5cGVzW3Byb3BOYW1lXShwcm9wcywgcHJvcE5hbWUsIHRhZ05hbWUsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCk7XG4gICAgICB9XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAhKGVycm9yLm1lc3NhZ2UgaW4gbG9nZ2VkVHlwZUZhaWx1cmVzKSkge1xuICAgICAgICAvLyBPbmx5IG1vbml0b3IgdGhpcyBmYWlsdXJlIG9uY2UgYmVjYXVzZSB0aGVyZSB0ZW5kcyB0byBiZSBhIGxvdCBvZiB0aGVcbiAgICAgICAgLy8gc2FtZSBlcnJvci5cbiAgICAgICAgbG9nZ2VkVHlwZUZhaWx1cmVzW2Vycm9yLm1lc3NhZ2VdID0gdHJ1ZTtcblxuICAgICAgICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpO1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ0ZhaWxlZCBmb3JtIHByb3BUeXBlOiAlcyVzJywgZXJyb3IubWVzc2FnZSwgYWRkZW5kdW0pIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IGlucHV0UHJvcHMgUHJvcHMgZm9yIGZvcm0gY29tcG9uZW50XG4gICAqIEByZXR1cm4geyp9IGN1cnJlbnQgdmFsdWUgb2YgdGhlIGlucHV0IGVpdGhlciBmcm9tIHZhbHVlIHByb3Agb3IgbGluay5cbiAgICovXG4gIGdldFZhbHVlOiBmdW5jdGlvbiAoaW5wdXRQcm9wcykge1xuICAgIGlmIChpbnB1dFByb3BzLnZhbHVlTGluaykge1xuICAgICAgX2Fzc2VydFZhbHVlTGluayhpbnB1dFByb3BzKTtcbiAgICAgIHJldHVybiBpbnB1dFByb3BzLnZhbHVlTGluay52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGlucHV0UHJvcHMudmFsdWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dFByb3BzIFByb3BzIGZvciBmb3JtIGNvbXBvbmVudFxuICAgKiBAcmV0dXJuIHsqfSBjdXJyZW50IGNoZWNrZWQgc3RhdHVzIG9mIHRoZSBpbnB1dCBlaXRoZXIgZnJvbSBjaGVja2VkIHByb3BcbiAgICogICAgICAgICAgICAgb3IgbGluay5cbiAgICovXG4gIGdldENoZWNrZWQ6IGZ1bmN0aW9uIChpbnB1dFByb3BzKSB7XG4gICAgaWYgKGlucHV0UHJvcHMuY2hlY2tlZExpbmspIHtcbiAgICAgIF9hc3NlcnRDaGVja2VkTGluayhpbnB1dFByb3BzKTtcbiAgICAgIHJldHVybiBpbnB1dFByb3BzLmNoZWNrZWRMaW5rLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXRQcm9wcy5jaGVja2VkO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaW5wdXRQcm9wcyBQcm9wcyBmb3IgZm9ybSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtTeW50aGV0aWNFdmVudH0gZXZlbnQgY2hhbmdlIGV2ZW50IHRvIGhhbmRsZVxuICAgKi9cbiAgZXhlY3V0ZU9uQ2hhbmdlOiBmdW5jdGlvbiAoaW5wdXRQcm9wcywgZXZlbnQpIHtcbiAgICBpZiAoaW5wdXRQcm9wcy52YWx1ZUxpbmspIHtcbiAgICAgIF9hc3NlcnRWYWx1ZUxpbmsoaW5wdXRQcm9wcyk7XG4gICAgICByZXR1cm4gaW5wdXRQcm9wcy52YWx1ZUxpbmsucmVxdWVzdENoYW5nZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoaW5wdXRQcm9wcy5jaGVja2VkTGluaykge1xuICAgICAgX2Fzc2VydENoZWNrZWRMaW5rKGlucHV0UHJvcHMpO1xuICAgICAgcmV0dXJuIGlucHV0UHJvcHMuY2hlY2tlZExpbmsucmVxdWVzdENoYW5nZShldmVudC50YXJnZXQuY2hlY2tlZCk7XG4gICAgfSBlbHNlIGlmIChpbnB1dFByb3BzLm9uQ2hhbmdlKSB7XG4gICAgICByZXR1cm4gaW5wdXRQcm9wcy5vbkNoYW5nZS5jYWxsKHVuZGVmaW5lZCwgZXZlbnQpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBMaW5rZWRWYWx1ZVV0aWxzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBPYmplY3QuYXNzaWduXG4gKi9cblxuLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5hc3NpZ25cblxuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2VzKSB7XG4gIGlmICh0YXJnZXQgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5hc3NpZ24gdGFyZ2V0IGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCcpO1xuICB9XG5cbiAgdmFyIHRvID0gT2JqZWN0KHRhcmdldCk7XG4gIHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbiAgZm9yICh2YXIgbmV4dEluZGV4ID0gMTsgbmV4dEluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgbmV4dEluZGV4KyspIHtcbiAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tuZXh0SW5kZXhdO1xuICAgIGlmIChuZXh0U291cmNlID09IG51bGwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBmcm9tID0gT2JqZWN0KG5leHRTb3VyY2UpO1xuXG4gICAgLy8gV2UgZG9uJ3QgY3VycmVudGx5IHN1cHBvcnQgYWNjZXNzb3JzIG5vciBwcm94aWVzLiBUaGVyZWZvcmUgdGhpc1xuICAgIC8vIGNvcHkgY2Fubm90IHRocm93LiBJZiB3ZSBldmVyIHN1cHBvcnRlZCB0aGlzIHRoZW4gd2UgbXVzdCBoYW5kbGVcbiAgICAvLyBleGNlcHRpb25zIGFuZCBzaWRlLWVmZmVjdHMuIFdlIGRvbid0IHN1cHBvcnQgc3ltYm9scyBzbyB0aGV5IHdvbid0XG4gICAgLy8gYmUgdHJhbnNmZXJyZWQuXG5cbiAgICBmb3IgKHZhciBrZXkgaW4gZnJvbSkge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoZnJvbSwga2V5KSkge1xuICAgICAgICB0b1trZXldID0gZnJvbVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0bztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhc3NpZ247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFBvb2xlZENsYXNzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogU3RhdGljIHBvb2xlcnMuIFNldmVyYWwgY3VzdG9tIHZlcnNpb25zIGZvciBlYWNoIHBvdGVudGlhbCBudW1iZXIgb2ZcbiAqIGFyZ3VtZW50cy4gQSBjb21wbGV0ZWx5IGdlbmVyaWMgcG9vbGVyIGlzIGVhc3kgdG8gaW1wbGVtZW50LCBidXQgd291bGRcbiAqIHJlcXVpcmUgYWNjZXNzaW5nIHRoZSBgYXJndW1lbnRzYCBvYmplY3QuIEluIGVhY2ggb2YgdGhlc2UsIGB0aGlzYCByZWZlcnMgdG9cbiAqIHRoZSBDbGFzcyBpdHNlbGYsIG5vdCBhbiBpbnN0YW5jZS4gSWYgYW55IG90aGVycyBhcmUgbmVlZGVkLCBzaW1wbHkgYWRkIHRoZW1cbiAqIGhlcmUsIG9yIGluIHRoZWlyIG93biBmaWxlcy5cbiAqL1xudmFyIG9uZUFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGNvcHlGaWVsZHNGcm9tKSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGNvcHlGaWVsZHNGcm9tKTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhjb3B5RmllbGRzRnJvbSk7XG4gIH1cbn07XG5cbnZhciB0d29Bcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyKTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIpO1xuICB9XG59O1xuXG52YXIgdGhyZWVBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIsIGEzKSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMiwgYTMpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMpO1xuICB9XG59O1xuXG52YXIgZm91ckFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMiwgYTMsIGE0KSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMiwgYTMsIGE0KTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIsIGEzLCBhNCk7XG4gIH1cbn07XG5cbnZhciBmaXZlQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoYTEsIGEyLCBhMywgYTQsIGE1KSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMiwgYTMsIGE0LCBhNSk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyLCBhMywgYTQsIGE1KTtcbiAgfVxufTtcblxudmFyIHN0YW5kYXJkUmVsZWFzZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgIShpbnN0YW5jZSBpbnN0YW5jZW9mIEtsYXNzKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUcnlpbmcgdG8gcmVsZWFzZSBhbiBpbnN0YW5jZSBpbnRvIGEgcG9vbCBvZiBhIGRpZmZlcmVudCB0eXBlLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgaW5zdGFuY2UuZGVzdHJ1Y3RvcigpO1xuICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCA8IEtsYXNzLnBvb2xTaXplKSB7XG4gICAgS2xhc3MuaW5zdGFuY2VQb29sLnB1c2goaW5zdGFuY2UpO1xuICB9XG59O1xuXG52YXIgREVGQVVMVF9QT09MX1NJWkUgPSAxMDtcbnZhciBERUZBVUxUX1BPT0xFUiA9IG9uZUFyZ3VtZW50UG9vbGVyO1xuXG4vKipcbiAqIEF1Z21lbnRzIGBDb3B5Q29uc3RydWN0b3JgIHRvIGJlIGEgcG9vbGFibGUgY2xhc3MsIGF1Z21lbnRpbmcgb25seSB0aGUgY2xhc3NcbiAqIGl0c2VsZiAoc3RhdGljYWxseSkgbm90IGFkZGluZyBhbnkgcHJvdG90eXBpY2FsIGZpZWxkcy4gQW55IENvcHlDb25zdHJ1Y3RvclxuICogeW91IGdpdmUgdGhpcyBtYXkgaGF2ZSBhIGBwb29sU2l6ZWAgcHJvcGVydHksIGFuZCB3aWxsIGxvb2sgZm9yIGFcbiAqIHByb3RvdHlwaWNhbCBgZGVzdHJ1Y3RvcmAgb24gaW5zdGFuY2VzIChvcHRpb25hbCkuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gQ29weUNvbnN0cnVjdG9yIENvbnN0cnVjdG9yIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVzZXQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwb29sZXIgQ3VzdG9taXphYmxlIHBvb2xlci5cbiAqL1xudmFyIGFkZFBvb2xpbmdUbyA9IGZ1bmN0aW9uIChDb3B5Q29uc3RydWN0b3IsIHBvb2xlcikge1xuICB2YXIgTmV3S2xhc3MgPSBDb3B5Q29uc3RydWN0b3I7XG4gIE5ld0tsYXNzLmluc3RhbmNlUG9vbCA9IFtdO1xuICBOZXdLbGFzcy5nZXRQb29sZWQgPSBwb29sZXIgfHwgREVGQVVMVF9QT09MRVI7XG4gIGlmICghTmV3S2xhc3MucG9vbFNpemUpIHtcbiAgICBOZXdLbGFzcy5wb29sU2l6ZSA9IERFRkFVTFRfUE9PTF9TSVpFO1xuICB9XG4gIE5ld0tsYXNzLnJlbGVhc2UgPSBzdGFuZGFyZFJlbGVhc2VyO1xuICByZXR1cm4gTmV3S2xhc3M7XG59O1xuXG52YXIgUG9vbGVkQ2xhc3MgPSB7XG4gIGFkZFBvb2xpbmdUbzogYWRkUG9vbGluZ1RvLFxuICBvbmVBcmd1bWVudFBvb2xlcjogb25lQXJndW1lbnRQb29sZXIsXG4gIHR3b0FyZ3VtZW50UG9vbGVyOiB0d29Bcmd1bWVudFBvb2xlcixcbiAgdGhyZWVBcmd1bWVudFBvb2xlcjogdGhyZWVBcmd1bWVudFBvb2xlcixcbiAgZm91ckFyZ3VtZW50UG9vbGVyOiBmb3VyQXJndW1lbnRQb29sZXIsXG4gIGZpdmVBcmd1bWVudFBvb2xlcjogZml2ZUFyZ3VtZW50UG9vbGVyXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBvb2xlZENsYXNzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NID0gcmVxdWlyZSgnLi9SZWFjdERPTScpO1xudmFyIFJlYWN0RE9NU2VydmVyID0gcmVxdWlyZSgnLi9SZWFjdERPTVNlcnZlcicpO1xudmFyIFJlYWN0SXNvbW9ycGhpYyA9IHJlcXVpcmUoJy4vUmVhY3RJc29tb3JwaGljJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBkZXByZWNhdGVkID0gcmVxdWlyZSgnLi9kZXByZWNhdGVkJyk7XG5cbi8vIGB2ZXJzaW9uYCB3aWxsIGJlIGFkZGVkIGhlcmUgYnkgUmVhY3RJc29tb3JwaGljLlxudmFyIFJlYWN0ID0ge307XG5cbmFzc2lnbihSZWFjdCwgUmVhY3RJc29tb3JwaGljKTtcblxuYXNzaWduKFJlYWN0LCB7XG4gIC8vIFJlYWN0RE9NXG4gIGZpbmRET01Ob2RlOiBkZXByZWNhdGVkKCdmaW5kRE9NTm9kZScsICdSZWFjdERPTScsICdyZWFjdC1kb20nLCBSZWFjdERPTSwgUmVhY3RET00uZmluZERPTU5vZGUpLFxuICByZW5kZXI6IGRlcHJlY2F0ZWQoJ3JlbmRlcicsICdSZWFjdERPTScsICdyZWFjdC1kb20nLCBSZWFjdERPTSwgUmVhY3RET00ucmVuZGVyKSxcbiAgdW5tb3VudENvbXBvbmVudEF0Tm9kZTogZGVwcmVjYXRlZCgndW5tb3VudENvbXBvbmVudEF0Tm9kZScsICdSZWFjdERPTScsICdyZWFjdC1kb20nLCBSZWFjdERPTSwgUmVhY3RET00udW5tb3VudENvbXBvbmVudEF0Tm9kZSksXG5cbiAgLy8gUmVhY3RET01TZXJ2ZXJcbiAgcmVuZGVyVG9TdHJpbmc6IGRlcHJlY2F0ZWQoJ3JlbmRlclRvU3RyaW5nJywgJ1JlYWN0RE9NU2VydmVyJywgJ3JlYWN0LWRvbS9zZXJ2ZXInLCBSZWFjdERPTVNlcnZlciwgUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdHJpbmcpLFxuICByZW5kZXJUb1N0YXRpY01hcmt1cDogZGVwcmVjYXRlZCgncmVuZGVyVG9TdGF0aWNNYXJrdXAnLCAnUmVhY3RET01TZXJ2ZXInLCAncmVhY3QtZG9tL3NlcnZlcicsIFJlYWN0RE9NU2VydmVyLCBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cClcbn0pO1xuXG5SZWFjdC5fX1NFQ1JFVF9ET01fRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRCA9IFJlYWN0RE9NO1xuUmVhY3QuX19TRUNSRVRfRE9NX1NFUlZFUl9ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEID0gUmVhY3RET01TZXJ2ZXI7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZU1hcCcpO1xuXG52YXIgZmluZERPTU5vZGUgPSByZXF1aXJlKCcuL2ZpbmRET01Ob2RlJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIGRpZFdhcm5LZXkgPSAnX2dldERPTU5vZGVEaWRXYXJuJztcblxudmFyIFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluID0ge1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgRE9NIG5vZGUgcmVuZGVyZWQgYnkgdGhpcyBjb21wb25lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge0RPTUVsZW1lbnR9IFRoZSByb290IG5vZGUgb2YgdGhpcyBjb21wb25lbnQuXG4gICAqIEBmaW5hbFxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBnZXRET01Ob2RlOiBmdW5jdGlvbiAoKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodGhpcy5jb25zdHJ1Y3RvcltkaWRXYXJuS2V5XSwgJyVzLmdldERPTU5vZGUoLi4uKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICcgKyAnUmVhY3RET00uZmluZERPTU5vZGUoaW5zdGFuY2UpIGluc3RlYWQuJywgUmVhY3RJbnN0YW5jZU1hcC5nZXQodGhpcykuZ2V0TmFtZSgpIHx8IHRoaXMudGFnTmFtZSB8fCAnVW5rbm93bicpIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuY29uc3RydWN0b3JbZGlkV2FybktleV0gPSB0cnVlO1xuICAgIHJldHVybiBmaW5kRE9NTm9kZSh0aGlzKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEJyb3dzZXJDb21wb25lbnRNaXhpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xudmFyIEV2ZW50UGx1Z2luUmVnaXN0cnkgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luUmVnaXN0cnknKTtcbnZhciBSZWFjdEV2ZW50RW1pdHRlck1peGluID0gcmVxdWlyZSgnLi9SZWFjdEV2ZW50RW1pdHRlck1peGluJyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBWaWV3cG9ydE1ldHJpY3MgPSByZXF1aXJlKCcuL1ZpZXdwb3J0TWV0cmljcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaXNFdmVudFN1cHBvcnRlZCA9IHJlcXVpcmUoJy4vaXNFdmVudFN1cHBvcnRlZCcpO1xuXG4vKipcbiAqIFN1bW1hcnkgb2YgYFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcmAgZXZlbnQgaGFuZGxpbmc6XG4gKlxuICogIC0gVG9wLWxldmVsIGRlbGVnYXRpb24gaXMgdXNlZCB0byB0cmFwIG1vc3QgbmF0aXZlIGJyb3dzZXIgZXZlbnRzLiBUaGlzXG4gKiAgICBtYXkgb25seSBvY2N1ciBpbiB0aGUgbWFpbiB0aHJlYWQgYW5kIGlzIHRoZSByZXNwb25zaWJpbGl0eSBvZlxuICogICAgUmVhY3RFdmVudExpc3RlbmVyLCB3aGljaCBpcyBpbmplY3RlZCBhbmQgY2FuIHRoZXJlZm9yZSBzdXBwb3J0IHBsdWdnYWJsZVxuICogICAgZXZlbnQgc291cmNlcy4gVGhpcyBpcyB0aGUgb25seSB3b3JrIHRoYXQgb2NjdXJzIGluIHRoZSBtYWluIHRocmVhZC5cbiAqXG4gKiAgLSBXZSBub3JtYWxpemUgYW5kIGRlLWR1cGxpY2F0ZSBldmVudHMgdG8gYWNjb3VudCBmb3IgYnJvd3NlciBxdWlya3MuIFRoaXNcbiAqICAgIG1heSBiZSBkb25lIGluIHRoZSB3b3JrZXIgdGhyZWFkLlxuICpcbiAqICAtIEZvcndhcmQgdGhlc2UgbmF0aXZlIGV2ZW50cyAod2l0aCB0aGUgYXNzb2NpYXRlZCB0b3AtbGV2ZWwgdHlwZSB1c2VkIHRvXG4gKiAgICB0cmFwIGl0KSB0byBgRXZlbnRQbHVnaW5IdWJgLCB3aGljaCBpbiB0dXJuIHdpbGwgYXNrIHBsdWdpbnMgaWYgdGhleSB3YW50XG4gKiAgICB0byBleHRyYWN0IGFueSBzeW50aGV0aWMgZXZlbnRzLlxuICpcbiAqICAtIFRoZSBgRXZlbnRQbHVnaW5IdWJgIHdpbGwgdGhlbiBwcm9jZXNzIGVhY2ggZXZlbnQgYnkgYW5ub3RhdGluZyB0aGVtIHdpdGhcbiAqICAgIFwiZGlzcGF0Y2hlc1wiLCBhIHNlcXVlbmNlIG9mIGxpc3RlbmVycyBhbmQgSURzIHRoYXQgY2FyZSBhYm91dCB0aGF0IGV2ZW50LlxuICpcbiAqICAtIFRoZSBgRXZlbnRQbHVnaW5IdWJgIHRoZW4gZGlzcGF0Y2hlcyB0aGUgZXZlbnRzLlxuICpcbiAqIE92ZXJ2aWV3IG9mIFJlYWN0IGFuZCB0aGUgZXZlbnQgc3lzdGVtOlxuICpcbiAqICstLS0tLS0tLS0tLS0rICAgIC5cbiAqIHwgICAgRE9NICAgICB8ICAgIC5cbiAqICstLS0tLS0tLS0tLS0rICAgIC5cbiAqICAgICAgIHwgICAgICAgICAgIC5cbiAqICAgICAgIHYgICAgICAgICAgIC5cbiAqICstLS0tLS0tLS0tLS0rICAgIC5cbiAqIHwgUmVhY3RFdmVudCB8ICAgIC5cbiAqIHwgIExpc3RlbmVyICB8ICAgIC5cbiAqICstLS0tLS0tLS0tLS0rICAgIC4gICAgICAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tK1xuICogICAgICAgfCAgICAgICAgICAgLiAgICAgICAgICAgICAgICstLS0tLS0tLSt8U2ltcGxlRXZlbnR8XG4gKiAgICAgICB8ICAgICAgICAgICAuICAgICAgICAgICAgICAgfCAgICAgICAgIHxQbHVnaW4gICAgIHxcbiAqICstLS0tLXwtLS0tLS0rICAgIC4gICAgICAgICAgICAgICB2ICAgICAgICAgKy0tLS0tLS0tLS0tK1xuICogfCAgICAgfCAgICAgIHwgICAgLiAgICArLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tK1xuICogfCAgICAgKy0tLS0tLS0tLS0tLi0tLT58RXZlbnRQbHVnaW5IdWJ8ICAgICAgICAgICAgICAgICAgICB8ICAgIEV2ZW50ICAgfFxuICogfCAgICAgICAgICAgIHwgICAgLiAgICB8ICAgICAgICAgICAgICB8ICAgICArLS0tLS0tLS0tLS0rICB8IFByb3BhZ2F0b3JzfFxuICogfCBSZWFjdEV2ZW50IHwgICAgLiAgICB8ICAgICAgICAgICAgICB8ICAgICB8VGFwRXZlbnQgICB8ICB8LS0tLS0tLS0tLS0tfFxuICogfCAgRW1pdHRlciAgIHwgICAgLiAgICB8ICAgICAgICAgICAgICB8PC0tLSt8UGx1Z2luICAgICB8ICB8b3RoZXIgcGx1Z2lufFxuICogfCAgICAgICAgICAgIHwgICAgLiAgICB8ICAgICAgICAgICAgICB8ICAgICArLS0tLS0tLS0tLS0rICB8ICB1dGlsaXRpZXMgfFxuICogfCAgICAgKy0tLS0tLS0tLS0tLi0tLT58ICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tK1xuICogfCAgICAgfCAgICAgIHwgICAgLiAgICArLS0tLS0tLS0tLS0tLS0rXG4gKiArLS0tLS18LS0tLS0tKyAgICAuICAgICAgICAgICAgICAgIF4gICAgICAgICstLS0tLS0tLS0tLStcbiAqICAgICAgIHwgICAgICAgICAgIC4gICAgICAgICAgICAgICAgfCAgICAgICAgfEVudGVyL0xlYXZlfFxuICogICAgICAgKyAgICAgICAgICAgLiAgICAgICAgICAgICAgICArLS0tLS0tLSt8UGx1Z2luICAgICB8XG4gKiArLS0tLS0tLS0tLS0tLSsgICAuICAgICAgICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLStcbiAqIHwgYXBwbGljYXRpb24gfCAgIC5cbiAqIHwtLS0tLS0tLS0tLS0tfCAgIC5cbiAqIHwgICAgICAgICAgICAgfCAgIC5cbiAqIHwgICAgICAgICAgICAgfCAgIC5cbiAqICstLS0tLS0tLS0tLS0tKyAgIC5cbiAqICAgICAgICAgICAgICAgICAgIC5cbiAqICAgIFJlYWN0IENvcmUgICAgIC4gIEdlbmVyYWwgUHVycG9zZSBFdmVudCBQbHVnaW4gU3lzdGVtXG4gKi9cblxudmFyIGFscmVhZHlMaXN0ZW5pbmdUbyA9IHt9O1xudmFyIGlzTW9uaXRvcmluZ1Njcm9sbFZhbHVlID0gZmFsc2U7XG52YXIgcmVhY3RUb3BMaXN0ZW5lcnNDb3VudGVyID0gMDtcblxuLy8gRm9yIGV2ZW50cyBsaWtlICdzdWJtaXQnIHdoaWNoIGRvbid0IGNvbnNpc3RlbnRseSBidWJibGUgKHdoaWNoIHdlIHRyYXAgYXQgYVxuLy8gbG93ZXIgbm9kZSB0aGFuIGBkb2N1bWVudGApLCBiaW5kaW5nIGF0IGBkb2N1bWVudGAgd291bGQgY2F1c2UgZHVwbGljYXRlXG4vLyBldmVudHMgc28gd2UgZG9uJ3QgaW5jbHVkZSB0aGVtIGhlcmVcbnZhciB0b3BFdmVudE1hcHBpbmcgPSB7XG4gIHRvcEFib3J0OiAnYWJvcnQnLFxuICB0b3BCbHVyOiAnYmx1cicsXG4gIHRvcENhblBsYXk6ICdjYW5wbGF5JyxcbiAgdG9wQ2FuUGxheVRocm91Z2g6ICdjYW5wbGF5dGhyb3VnaCcsXG4gIHRvcENoYW5nZTogJ2NoYW5nZScsXG4gIHRvcENsaWNrOiAnY2xpY2snLFxuICB0b3BDb21wb3NpdGlvbkVuZDogJ2NvbXBvc2l0aW9uZW5kJyxcbiAgdG9wQ29tcG9zaXRpb25TdGFydDogJ2NvbXBvc2l0aW9uc3RhcnQnLFxuICB0b3BDb21wb3NpdGlvblVwZGF0ZTogJ2NvbXBvc2l0aW9udXBkYXRlJyxcbiAgdG9wQ29udGV4dE1lbnU6ICdjb250ZXh0bWVudScsXG4gIHRvcENvcHk6ICdjb3B5JyxcbiAgdG9wQ3V0OiAnY3V0JyxcbiAgdG9wRG91YmxlQ2xpY2s6ICdkYmxjbGljaycsXG4gIHRvcERyYWc6ICdkcmFnJyxcbiAgdG9wRHJhZ0VuZDogJ2RyYWdlbmQnLFxuICB0b3BEcmFnRW50ZXI6ICdkcmFnZW50ZXInLFxuICB0b3BEcmFnRXhpdDogJ2RyYWdleGl0JyxcbiAgdG9wRHJhZ0xlYXZlOiAnZHJhZ2xlYXZlJyxcbiAgdG9wRHJhZ092ZXI6ICdkcmFnb3ZlcicsXG4gIHRvcERyYWdTdGFydDogJ2RyYWdzdGFydCcsXG4gIHRvcERyb3A6ICdkcm9wJyxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6ICdkdXJhdGlvbmNoYW5nZScsXG4gIHRvcEVtcHRpZWQ6ICdlbXB0aWVkJyxcbiAgdG9wRW5jcnlwdGVkOiAnZW5jcnlwdGVkJyxcbiAgdG9wRW5kZWQ6ICdlbmRlZCcsXG4gIHRvcEVycm9yOiAnZXJyb3InLFxuICB0b3BGb2N1czogJ2ZvY3VzJyxcbiAgdG9wSW5wdXQ6ICdpbnB1dCcsXG4gIHRvcEtleURvd246ICdrZXlkb3duJyxcbiAgdG9wS2V5UHJlc3M6ICdrZXlwcmVzcycsXG4gIHRvcEtleVVwOiAna2V5dXAnLFxuICB0b3BMb2FkZWREYXRhOiAnbG9hZGVkZGF0YScsXG4gIHRvcExvYWRlZE1ldGFkYXRhOiAnbG9hZGVkbWV0YWRhdGEnLFxuICB0b3BMb2FkU3RhcnQ6ICdsb2Fkc3RhcnQnLFxuICB0b3BNb3VzZURvd246ICdtb3VzZWRvd24nLFxuICB0b3BNb3VzZU1vdmU6ICdtb3VzZW1vdmUnLFxuICB0b3BNb3VzZU91dDogJ21vdXNlb3V0JyxcbiAgdG9wTW91c2VPdmVyOiAnbW91c2VvdmVyJyxcbiAgdG9wTW91c2VVcDogJ21vdXNldXAnLFxuICB0b3BQYXN0ZTogJ3Bhc3RlJyxcbiAgdG9wUGF1c2U6ICdwYXVzZScsXG4gIHRvcFBsYXk6ICdwbGF5JyxcbiAgdG9wUGxheWluZzogJ3BsYXlpbmcnLFxuICB0b3BQcm9ncmVzczogJ3Byb2dyZXNzJyxcbiAgdG9wUmF0ZUNoYW5nZTogJ3JhdGVjaGFuZ2UnLFxuICB0b3BTY3JvbGw6ICdzY3JvbGwnLFxuICB0b3BTZWVrZWQ6ICdzZWVrZWQnLFxuICB0b3BTZWVraW5nOiAnc2Vla2luZycsXG4gIHRvcFNlbGVjdGlvbkNoYW5nZTogJ3NlbGVjdGlvbmNoYW5nZScsXG4gIHRvcFN0YWxsZWQ6ICdzdGFsbGVkJyxcbiAgdG9wU3VzcGVuZDogJ3N1c3BlbmQnLFxuICB0b3BUZXh0SW5wdXQ6ICd0ZXh0SW5wdXQnLFxuICB0b3BUaW1lVXBkYXRlOiAndGltZXVwZGF0ZScsXG4gIHRvcFRvdWNoQ2FuY2VsOiAndG91Y2hjYW5jZWwnLFxuICB0b3BUb3VjaEVuZDogJ3RvdWNoZW5kJyxcbiAgdG9wVG91Y2hNb3ZlOiAndG91Y2htb3ZlJyxcbiAgdG9wVG91Y2hTdGFydDogJ3RvdWNoc3RhcnQnLFxuICB0b3BWb2x1bWVDaGFuZ2U6ICd2b2x1bWVjaGFuZ2UnLFxuICB0b3BXYWl0aW5nOiAnd2FpdGluZycsXG4gIHRvcFdoZWVsOiAnd2hlZWwnXG59O1xuXG4vKipcbiAqIFRvIGVuc3VyZSBubyBjb25mbGljdHMgd2l0aCBvdGhlciBwb3RlbnRpYWwgUmVhY3QgaW5zdGFuY2VzIG9uIHRoZSBwYWdlXG4gKi9cbnZhciB0b3BMaXN0ZW5lcnNJREtleSA9ICdfcmVhY3RMaXN0ZW5lcnNJRCcgKyBTdHJpbmcoTWF0aC5yYW5kb20oKSkuc2xpY2UoMik7XG5cbmZ1bmN0aW9uIGdldExpc3RlbmluZ0ZvckRvY3VtZW50KG1vdW50QXQpIHtcbiAgLy8gSW4gSUU4LCBgbW91bnRBdGAgaXMgYSBob3N0IG9iamVjdCBhbmQgZG9lc24ndCBoYXZlIGBoYXNPd25Qcm9wZXJ0eWBcbiAgLy8gZGlyZWN0bHkuXG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vdW50QXQsIHRvcExpc3RlbmVyc0lES2V5KSkge1xuICAgIG1vdW50QXRbdG9wTGlzdGVuZXJzSURLZXldID0gcmVhY3RUb3BMaXN0ZW5lcnNDb3VudGVyKys7XG4gICAgYWxyZWFkeUxpc3RlbmluZ1RvW21vdW50QXRbdG9wTGlzdGVuZXJzSURLZXldXSA9IHt9O1xuICB9XG4gIHJldHVybiBhbHJlYWR5TGlzdGVuaW5nVG9bbW91bnRBdFt0b3BMaXN0ZW5lcnNJREtleV1dO1xufVxuXG4vKipcbiAqIGBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXJgIGlzIHVzZWQgdG8gYXR0YWNoIHRvcC1sZXZlbCBldmVudCBsaXN0ZW5lcnMuIEZvclxuICogZXhhbXBsZTpcbiAqXG4gKiAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5wdXRMaXN0ZW5lcignbXlJRCcsICdvbkNsaWNrJywgbXlGdW5jdGlvbik7XG4gKlxuICogVGhpcyB3b3VsZCBhbGxvY2F0ZSBhIFwicmVnaXN0cmF0aW9uXCIgb2YgYCgnb25DbGljaycsIG15RnVuY3Rpb24pYCBvbiAnbXlJRCcuXG4gKlxuICogQGludGVybmFsXG4gKi9cbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSBhc3NpZ24oe30sIFJlYWN0RXZlbnRFbWl0dGVyTWl4aW4sIHtcblxuICAvKipcbiAgICogSW5qZWN0YWJsZSBldmVudCBiYWNrZW5kXG4gICAqL1xuICBSZWFjdEV2ZW50TGlzdGVuZXI6IG51bGwsXG5cbiAgaW5qZWN0aW9uOiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFJlYWN0RXZlbnRMaXN0ZW5lclxuICAgICAqL1xuICAgIGluamVjdFJlYWN0RXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gKFJlYWN0RXZlbnRMaXN0ZW5lcikge1xuICAgICAgUmVhY3RFdmVudExpc3RlbmVyLnNldEhhbmRsZVRvcExldmVsKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5oYW5kbGVUb3BMZXZlbCk7XG4gICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyID0gUmVhY3RFdmVudExpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU2V0cyB3aGV0aGVyIG9yIG5vdCBhbnkgY3JlYXRlZCBjYWxsYmFja3Mgc2hvdWxkIGJlIGVuYWJsZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCBUcnVlIGlmIGNhbGxiYWNrcyBzaG91bGQgYmUgZW5hYmxlZC5cbiAgICovXG4gIHNldEVuYWJsZWQ6IGZ1bmN0aW9uIChlbmFibGVkKSB7XG4gICAgaWYgKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIuc2V0RW5hYmxlZChlbmFibGVkKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgY2FsbGJhY2tzIGFyZSBlbmFibGVkLlxuICAgKi9cbiAgaXNFbmFibGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICEhKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIgJiYgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci5pc0VuYWJsZWQoKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdlIGxpc3RlbiBmb3IgYnViYmxlZCB0b3VjaCBldmVudHMgb24gdGhlIGRvY3VtZW50IG9iamVjdC5cbiAgICpcbiAgICogRmlyZWZveCB2OC4wMSAoYW5kIHBvc3NpYmx5IG90aGVycykgZXhoaWJpdGVkIHN0cmFuZ2UgYmVoYXZpb3Igd2hlblxuICAgKiBtb3VudGluZyBgb25tb3VzZW1vdmVgIGV2ZW50cyBhdCBzb21lIG5vZGUgdGhhdCB3YXMgbm90IHRoZSBkb2N1bWVudFxuICAgKiBlbGVtZW50LiBUaGUgc3ltcHRvbXMgd2VyZSB0aGF0IGlmIHlvdXIgbW91c2UgaXMgbm90IG1vdmluZyBvdmVyIHNvbWV0aGluZ1xuICAgKiBjb250YWluZWQgd2l0aGluIHRoYXQgbW91bnQgcG9pbnQgKGZvciBleGFtcGxlIG9uIHRoZSBiYWNrZ3JvdW5kKSB0aGVcbiAgICogdG9wLWxldmVsIGxpc3RlbmVycyBmb3IgYG9ubW91c2Vtb3ZlYCB3b24ndCBiZSBjYWxsZWQuIEhvd2V2ZXIsIGlmIHlvdVxuICAgKiByZWdpc3RlciB0aGUgYG1vdXNlbW92ZWAgb24gdGhlIGRvY3VtZW50IG9iamVjdCwgdGhlbiBpdCB3aWxsIG9mIGNvdXJzZVxuICAgKiBjYXRjaCBhbGwgYG1vdXNlbW92ZWBzLiBUaGlzIGFsb25nIHdpdGggaU9TIHF1aXJrcywganVzdGlmaWVzIHJlc3RyaWN0aW5nXG4gICAqIHRvcC1sZXZlbCBsaXN0ZW5lcnMgdG8gdGhlIGRvY3VtZW50IG9iamVjdCBvbmx5LCBhdCBsZWFzdCBmb3IgdGhlc2VcbiAgICogbW92ZW1lbnQgdHlwZXMgb2YgZXZlbnRzIGFuZCBwb3NzaWJseSBhbGwgZXZlbnRzLlxuICAgKlxuICAgKiBAc2VlIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvYmxvZy9hcmNoaXZlcy8yMDEwLzA5L2NsaWNrX2V2ZW50X2RlbC5odG1sXG4gICAqXG4gICAqIEFsc28sIGBrZXl1cGAvYGtleXByZXNzYC9ga2V5ZG93bmAgZG8gbm90IGJ1YmJsZSB0byB0aGUgd2luZG93IG9uIElFLCBidXRcbiAgICogdGhleSBidWJibGUgdG8gZG9jdW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWdpc3RyYXRpb25OYW1lIE5hbWUgb2YgbGlzdGVuZXIgKGUuZy4gYG9uQ2xpY2tgKS5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRlbnREb2N1bWVudEhhbmRsZSBEb2N1bWVudCB3aGljaCBvd25zIHRoZSBjb250YWluZXJcbiAgICovXG4gIGxpc3RlblRvOiBmdW5jdGlvbiAocmVnaXN0cmF0aW9uTmFtZSwgY29udGVudERvY3VtZW50SGFuZGxlKSB7XG4gICAgdmFyIG1vdW50QXQgPSBjb250ZW50RG9jdW1lbnRIYW5kbGU7XG4gICAgdmFyIGlzTGlzdGVuaW5nID0gZ2V0TGlzdGVuaW5nRm9yRG9jdW1lbnQobW91bnRBdCk7XG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZURlcGVuZGVuY2llc1tyZWdpc3RyYXRpb25OYW1lXTtcblxuICAgIHZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlcGVuZGVuY3kgPSBkZXBlbmRlbmNpZXNbaV07XG4gICAgICBpZiAoIShpc0xpc3RlbmluZy5oYXNPd25Qcm9wZXJ0eShkZXBlbmRlbmN5KSAmJiBpc0xpc3RlbmluZ1tkZXBlbmRlbmN5XSkpIHtcbiAgICAgICAgaWYgKGRlcGVuZGVuY3kgPT09IHRvcExldmVsVHlwZXMudG9wV2hlZWwpIHtcbiAgICAgICAgICBpZiAoaXNFdmVudFN1cHBvcnRlZCgnd2hlZWwnKSkge1xuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wV2hlZWwsICd3aGVlbCcsIG1vdW50QXQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNFdmVudFN1cHBvcnRlZCgnbW91c2V3aGVlbCcpKSB7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BXaGVlbCwgJ21vdXNld2hlZWwnLCBtb3VudEF0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRmlyZWZveCBuZWVkcyB0byBjYXB0dXJlIGEgZGlmZmVyZW50IG1vdXNlIHNjcm9sbCBldmVudC5cbiAgICAgICAgICAgIC8vIEBzZWUgaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9kb20vZXZlbnRzL3Rlc3RzL3Njcm9sbC5odG1sXG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BXaGVlbCwgJ0RPTU1vdXNlU2Nyb2xsJywgbW91bnRBdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRlcGVuZGVuY3kgPT09IHRvcExldmVsVHlwZXMudG9wU2Nyb2xsKSB7XG5cbiAgICAgICAgICBpZiAoaXNFdmVudFN1cHBvcnRlZCgnc2Nyb2xsJywgdHJ1ZSkpIHtcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcENhcHR1cmVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BTY3JvbGwsICdzY3JvbGwnLCBtb3VudEF0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wU2Nyb2xsLCAnc2Nyb2xsJywgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci5XSU5ET1dfSEFORExFKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGVwZW5kZW5jeSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BGb2N1cyB8fCBkZXBlbmRlbmN5ID09PSB0b3BMZXZlbFR5cGVzLnRvcEJsdXIpIHtcblxuICAgICAgICAgIGlmIChpc0V2ZW50U3VwcG9ydGVkKCdmb2N1cycsIHRydWUpKSB7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBDYXB0dXJlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wRm9jdXMsICdmb2N1cycsIG1vdW50QXQpO1xuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQ2FwdHVyZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcEJsdXIsICdibHVyJywgbW91bnRBdCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0V2ZW50U3VwcG9ydGVkKCdmb2N1c2luJykpIHtcbiAgICAgICAgICAgIC8vIElFIGhhcyBgZm9jdXNpbmAgYW5kIGBmb2N1c291dGAgZXZlbnRzIHdoaWNoIGJ1YmJsZS5cbiAgICAgICAgICAgIC8vIEBzZWUgaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9ibG9nL2FyY2hpdmVzLzIwMDgvMDQvZGVsZWdhdGluZ190aGUuaHRtbFxuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wRm9jdXMsICdmb2N1c2luJywgbW91bnRBdCk7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BCbHVyLCAnZm9jdXNvdXQnLCBtb3VudEF0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgYmx1ciBhbmQgZm9jdXMgZXZlbnQgbGlzdGVuZXJzIGFyZSBvbmx5IGF0dGFjaGVkIG9uY2VcbiAgICAgICAgICBpc0xpc3RlbmluZ1t0b3BMZXZlbFR5cGVzLnRvcEJsdXJdID0gdHJ1ZTtcbiAgICAgICAgICBpc0xpc3RlbmluZ1t0b3BMZXZlbFR5cGVzLnRvcEZvY3VzXSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodG9wRXZlbnRNYXBwaW5nLmhhc093blByb3BlcnR5KGRlcGVuZGVuY3kpKSB7XG4gICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KGRlcGVuZGVuY3ksIHRvcEV2ZW50TWFwcGluZ1tkZXBlbmRlbmN5XSwgbW91bnRBdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpc0xpc3RlbmluZ1tkZXBlbmRlbmN5XSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHRyYXBCdWJibGVkRXZlbnQ6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKSB7XG4gICAgcmV0dXJuIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKTtcbiAgfSxcblxuICB0cmFwQ2FwdHVyZWRFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpIHtcbiAgICByZXR1cm4gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQ2FwdHVyZWRFdmVudCh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKTtcbiAgfSxcblxuICAvKipcbiAgICogTGlzdGVucyB0byB3aW5kb3cgc2Nyb2xsIGFuZCByZXNpemUgZXZlbnRzLiBXZSBjYWNoZSBzY3JvbGwgdmFsdWVzIHNvIHRoYXRcbiAgICogYXBwbGljYXRpb24gY29kZSBjYW4gYWNjZXNzIHRoZW0gd2l0aG91dCB0cmlnZ2VyaW5nIHJlZmxvd3MuXG4gICAqXG4gICAqIE5PVEU6IFNjcm9sbCBldmVudHMgZG8gbm90IGJ1YmJsZS5cbiAgICpcbiAgICogQHNlZSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2RvbS9ldmVudHMvc2Nyb2xsLmh0bWxcbiAgICovXG4gIGVuc3VyZVNjcm9sbFZhbHVlTW9uaXRvcmluZzogZnVuY3Rpb24gKCkge1xuICAgIGlmICghaXNNb25pdG9yaW5nU2Nyb2xsVmFsdWUpIHtcbiAgICAgIHZhciByZWZyZXNoID0gVmlld3BvcnRNZXRyaWNzLnJlZnJlc2hTY3JvbGxWYWx1ZXM7XG4gICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLm1vbml0b3JTY3JvbGxWYWx1ZShyZWZyZXNoKTtcbiAgICAgIGlzTW9uaXRvcmluZ1Njcm9sbFZhbHVlID0gdHJ1ZTtcbiAgICB9XG4gIH0sXG5cbiAgZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzOiBFdmVudFBsdWdpbkh1Yi5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3MsXG5cbiAgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXM6IEV2ZW50UGx1Z2luSHViLnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLFxuXG4gIHB1dExpc3RlbmVyOiBFdmVudFBsdWdpbkh1Yi5wdXRMaXN0ZW5lcixcblxuICBnZXRMaXN0ZW5lcjogRXZlbnRQbHVnaW5IdWIuZ2V0TGlzdGVuZXIsXG5cbiAgZGVsZXRlTGlzdGVuZXI6IEV2ZW50UGx1Z2luSHViLmRlbGV0ZUxpc3RlbmVyLFxuXG4gIGRlbGV0ZUFsbExpc3RlbmVyczogRXZlbnRQbHVnaW5IdWIuZGVsZXRlQWxsTGlzdGVuZXJzXG5cbn0pO1xuXG5SZWFjdFBlcmYubWVhc3VyZU1ldGhvZHMoUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLCAnUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJywge1xuICBwdXRMaXN0ZW5lcjogJ3B1dExpc3RlbmVyJyxcbiAgZGVsZXRlTGlzdGVuZXI6ICdkZWxldGVMaXN0ZW5lcidcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDaGlsZFJlY29uY2lsZXJcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcblxudmFyIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciB0cmF2ZXJzZUFsbENoaWxkcmVuID0gcmVxdWlyZSgnLi90cmF2ZXJzZUFsbENoaWxkcmVuJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuZnVuY3Rpb24gaW5zdGFudGlhdGVDaGlsZChjaGlsZEluc3RhbmNlcywgY2hpbGQsIG5hbWUpIHtcbiAgLy8gV2UgZm91bmQgYSBjb21wb25lbnQgaW5zdGFuY2UuXG4gIHZhciBrZXlVbmlxdWUgPSBjaGlsZEluc3RhbmNlc1tuYW1lXSA9PT0gdW5kZWZpbmVkO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGtleVVuaXF1ZSwgJ2ZsYXR0ZW5DaGlsZHJlbiguLi4pOiBFbmNvdW50ZXJlZCB0d28gY2hpbGRyZW4gd2l0aCB0aGUgc2FtZSBrZXksICcgKyAnYCVzYC4gQ2hpbGQga2V5cyBtdXN0IGJlIHVuaXF1ZTsgd2hlbiB0d28gY2hpbGRyZW4gc2hhcmUgYSBrZXksIG9ubHkgJyArICd0aGUgZmlyc3QgY2hpbGQgd2lsbCBiZSB1c2VkLicsIG5hbWUpIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmIChjaGlsZCAhPSBudWxsICYmIGtleVVuaXF1ZSkge1xuICAgIGNoaWxkSW5zdGFuY2VzW25hbWVdID0gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChjaGlsZCwgbnVsbCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZWFjdENoaWxkUmVjb25jaWxlciBwcm92aWRlcyBoZWxwZXJzIGZvciBpbml0aWFsaXppbmcgb3IgdXBkYXRpbmcgYSBzZXQgb2ZcbiAqIGNoaWxkcmVuLiBJdHMgb3V0cHV0IGlzIHN1aXRhYmxlIGZvciBwYXNzaW5nIGl0IG9udG8gUmVhY3RNdWx0aUNoaWxkIHdoaWNoXG4gKiBkb2VzIGRpZmZlZCByZW9yZGVyaW5nIGFuZCBpbnNlcnRpb24uXG4gKi9cbnZhciBSZWFjdENoaWxkUmVjb25jaWxlciA9IHtcbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIFwibW91bnQgaW1hZ2VcIiBmb3IgZWFjaCBvZiB0aGUgc3VwcGxpZWQgY2hpbGRyZW4uIEluIHRoZSBjYXNlXG4gICAqIG9mIGBSZWFjdERPTUNvbXBvbmVudGAsIGEgbW91bnQgaW1hZ2UgaXMgYSBzdHJpbmcgb2YgbWFya3VwLlxuICAgKlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5lc3RlZENoaWxkTm9kZXMgTmVzdGVkIGNoaWxkIG1hcHMuXG4gICAqIEByZXR1cm4gez9vYmplY3R9IEEgc2V0IG9mIGNoaWxkIGluc3RhbmNlcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBpbnN0YW50aWF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAobmVzdGVkQ2hpbGROb2RlcywgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICBpZiAobmVzdGVkQ2hpbGROb2RlcyA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIGNoaWxkSW5zdGFuY2VzID0ge307XG4gICAgdHJhdmVyc2VBbGxDaGlsZHJlbihuZXN0ZWRDaGlsZE5vZGVzLCBpbnN0YW50aWF0ZUNoaWxkLCBjaGlsZEluc3RhbmNlcyk7XG4gICAgcmV0dXJuIGNoaWxkSW5zdGFuY2VzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSByZW5kZXJlZCBjaGlsZHJlbiBhbmQgcmV0dXJucyBhIG5ldyBzZXQgb2YgY2hpbGRyZW4uXG4gICAqXG4gICAqIEBwYXJhbSB7P29iamVjdH0gcHJldkNoaWxkcmVuIFByZXZpb3VzbHkgaW5pdGlhbGl6ZWQgc2V0IG9mIGNoaWxkcmVuLlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDaGlsZHJlbiBGbGF0IGNoaWxkIGVsZW1lbnQgbWFwcy5cbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBBIG5ldyBzZXQgb2YgY2hpbGQgaW5zdGFuY2VzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHVwZGF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAocHJldkNoaWxkcmVuLCBuZXh0Q2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgLy8gV2UgY3VycmVudGx5IGRvbid0IGhhdmUgYSB3YXkgdG8gdHJhY2sgbW92ZXMgaGVyZSBidXQgaWYgd2UgdXNlIGl0ZXJhdG9yc1xuICAgIC8vIGluc3RlYWQgb2YgZm9yLi5pbiB3ZSBjYW4gemlwIHRoZSBpdGVyYXRvcnMgYW5kIGNoZWNrIGlmIGFuIGl0ZW0gaGFzXG4gICAgLy8gbW92ZWQuXG4gICAgLy8gVE9ETzogSWYgbm90aGluZyBoYXMgY2hhbmdlZCwgcmV0dXJuIHRoZSBwcmV2Q2hpbGRyZW4gb2JqZWN0IHNvIHRoYXQgd2VcbiAgICAvLyBjYW4gcXVpY2tseSBiYWlsb3V0IGlmIG5vdGhpbmcgaGFzIGNoYW5nZWQuXG4gICAgaWYgKCFuZXh0Q2hpbGRyZW4gJiYgIXByZXZDaGlsZHJlbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHZhciBuYW1lO1xuICAgIGZvciAobmFtZSBpbiBuZXh0Q2hpbGRyZW4pIHtcbiAgICAgIGlmICghbmV4dENoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIHByZXZDaGlsZCA9IHByZXZDaGlsZHJlbiAmJiBwcmV2Q2hpbGRyZW5bbmFtZV07XG4gICAgICB2YXIgcHJldkVsZW1lbnQgPSBwcmV2Q2hpbGQgJiYgcHJldkNoaWxkLl9jdXJyZW50RWxlbWVudDtcbiAgICAgIHZhciBuZXh0RWxlbWVudCA9IG5leHRDaGlsZHJlbltuYW1lXTtcbiAgICAgIGlmIChwcmV2Q2hpbGQgIT0gbnVsbCAmJiBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudChwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQpKSB7XG4gICAgICAgIFJlYWN0UmVjb25jaWxlci5yZWNlaXZlQ29tcG9uZW50KHByZXZDaGlsZCwgbmV4dEVsZW1lbnQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgbmV4dENoaWxkcmVuW25hbWVdID0gcHJldkNoaWxkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHByZXZDaGlsZCkge1xuICAgICAgICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHByZXZDaGlsZCwgbmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIGNoaWxkIG11c3QgYmUgaW5zdGFudGlhdGVkIGJlZm9yZSBpdCdzIG1vdW50ZWQuXG4gICAgICAgIHZhciBuZXh0Q2hpbGRJbnN0YW5jZSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQobmV4dEVsZW1lbnQsIG51bGwpO1xuICAgICAgICBuZXh0Q2hpbGRyZW5bbmFtZV0gPSBuZXh0Q2hpbGRJbnN0YW5jZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gVW5tb3VudCBjaGlsZHJlbiB0aGF0IGFyZSBubyBsb25nZXIgcHJlc2VudC5cbiAgICBmb3IgKG5hbWUgaW4gcHJldkNoaWxkcmVuKSB7XG4gICAgICBpZiAocHJldkNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpICYmICEobmV4dENoaWxkcmVuICYmIG5leHRDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkpIHtcbiAgICAgICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQocHJldkNoaWxkcmVuW25hbWVdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5leHRDaGlsZHJlbjtcbiAgfSxcblxuICAvKipcbiAgICogVW5tb3VudHMgYWxsIHJlbmRlcmVkIGNoaWxkcmVuLiBUaGlzIHNob3VsZCBiZSB1c2VkIHRvIGNsZWFuIHVwIGNoaWxkcmVuXG4gICAqIHdoZW4gdGhpcyBjb21wb25lbnQgaXMgdW5tb3VudGVkLlxuICAgKlxuICAgKiBAcGFyYW0gez9vYmplY3R9IHJlbmRlcmVkQ2hpbGRyZW4gUHJldmlvdXNseSBpbml0aWFsaXplZCBzZXQgb2YgY2hpbGRyZW4uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdW5tb3VudENoaWxkcmVuOiBmdW5jdGlvbiAocmVuZGVyZWRDaGlsZHJlbikge1xuICAgIGZvciAodmFyIG5hbWUgaW4gcmVuZGVyZWRDaGlsZHJlbikge1xuICAgICAgaWYgKHJlbmRlcmVkQ2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgdmFyIHJlbmRlcmVkQ2hpbGQgPSByZW5kZXJlZENoaWxkcmVuW25hbWVdO1xuICAgICAgICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudChyZW5kZXJlZENoaWxkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENoaWxkUmVjb25jaWxlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDaGlsZHJlblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIHRyYXZlcnNlQWxsQ2hpbGRyZW4gPSByZXF1aXJlKCcuL3RyYXZlcnNlQWxsQ2hpbGRyZW4nKTtcblxudmFyIHR3b0FyZ3VtZW50UG9vbGVyID0gUG9vbGVkQ2xhc3MudHdvQXJndW1lbnRQb29sZXI7XG52YXIgZm91ckFyZ3VtZW50UG9vbGVyID0gUG9vbGVkQ2xhc3MuZm91ckFyZ3VtZW50UG9vbGVyO1xuXG52YXIgdXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXggPSAvXFwvKD8hXFwvKS9nO1xuZnVuY3Rpb24gZXNjYXBlVXNlclByb3ZpZGVkS2V5KHRleHQpIHtcbiAgcmV0dXJuICgnJyArIHRleHQpLnJlcGxhY2UodXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXgsICcvLycpO1xufVxuXG4vKipcbiAqIFBvb2xlZENsYXNzIHJlcHJlc2VudGluZyB0aGUgYm9va2tlZXBpbmcgYXNzb2NpYXRlZCB3aXRoIHBlcmZvcm1pbmcgYSBjaGlsZFxuICogdHJhdmVyc2FsLiBBbGxvd3MgYXZvaWRpbmcgYmluZGluZyBjYWxsYmFja3MuXG4gKlxuICogQGNvbnN0cnVjdG9yIEZvckVhY2hCb29rS2VlcGluZ1xuICogQHBhcmFtIHshZnVuY3Rpb259IGZvckVhY2hGdW5jdGlvbiBGdW5jdGlvbiB0byBwZXJmb3JtIHRyYXZlcnNhbCB3aXRoLlxuICogQHBhcmFtIHs/Kn0gZm9yRWFjaENvbnRleHQgQ29udGV4dCB0byBwZXJmb3JtIGNvbnRleHQgd2l0aC5cbiAqL1xuZnVuY3Rpb24gRm9yRWFjaEJvb2tLZWVwaW5nKGZvckVhY2hGdW5jdGlvbiwgZm9yRWFjaENvbnRleHQpIHtcbiAgdGhpcy5mdW5jID0gZm9yRWFjaEZ1bmN0aW9uO1xuICB0aGlzLmNvbnRleHQgPSBmb3JFYWNoQ29udGV4dDtcbiAgdGhpcy5jb3VudCA9IDA7XG59XG5Gb3JFYWNoQm9va0tlZXBpbmcucHJvdG90eXBlLmRlc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZnVuYyA9IG51bGw7XG4gIHRoaXMuY29udGV4dCA9IG51bGw7XG4gIHRoaXMuY291bnQgPSAwO1xufTtcblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhGb3JFYWNoQm9va0tlZXBpbmcsIHR3b0FyZ3VtZW50UG9vbGVyKTtcblxuZnVuY3Rpb24gZm9yRWFjaFNpbmdsZUNoaWxkKGJvb2tLZWVwaW5nLCBjaGlsZCwgbmFtZSkge1xuICB2YXIgZnVuYyA9IGJvb2tLZWVwaW5nLmZ1bmM7XG4gIHZhciBjb250ZXh0ID0gYm9va0tlZXBpbmcuY29udGV4dDtcblxuICBmdW5jLmNhbGwoY29udGV4dCwgY2hpbGQsIGJvb2tLZWVwaW5nLmNvdW50KyspO1xufVxuXG4vKipcbiAqIEl0ZXJhdGVzIHRocm91Z2ggY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLlxuICpcbiAqIFRoZSBwcm92aWRlZCBmb3JFYWNoRnVuYyhjaGlsZCwgaW5kZXgpIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoXG4gKiBsZWFmIGNoaWxkLlxuICpcbiAqIEBwYXJhbSB7Pyp9IGNoaWxkcmVuIENoaWxkcmVuIHRyZWUgY29udGFpbmVyLlxuICogQHBhcmFtIHtmdW5jdGlvbigqLCBpbnQpfSBmb3JFYWNoRnVuY1xuICogQHBhcmFtIHsqfSBmb3JFYWNoQ29udGV4dCBDb250ZXh0IGZvciBmb3JFYWNoQ29udGV4dC5cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaENoaWxkcmVuKGNoaWxkcmVuLCBmb3JFYWNoRnVuYywgZm9yRWFjaENvbnRleHQpIHtcbiAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cbiAgdmFyIHRyYXZlcnNlQ29udGV4dCA9IEZvckVhY2hCb29rS2VlcGluZy5nZXRQb29sZWQoZm9yRWFjaEZ1bmMsIGZvckVhY2hDb250ZXh0KTtcbiAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgZm9yRWFjaFNpbmdsZUNoaWxkLCB0cmF2ZXJzZUNvbnRleHQpO1xuICBGb3JFYWNoQm9va0tlZXBpbmcucmVsZWFzZSh0cmF2ZXJzZUNvbnRleHQpO1xufVxuXG4vKipcbiAqIFBvb2xlZENsYXNzIHJlcHJlc2VudGluZyB0aGUgYm9va2tlZXBpbmcgYXNzb2NpYXRlZCB3aXRoIHBlcmZvcm1pbmcgYSBjaGlsZFxuICogbWFwcGluZy4gQWxsb3dzIGF2b2lkaW5nIGJpbmRpbmcgY2FsbGJhY2tzLlxuICpcbiAqIEBjb25zdHJ1Y3RvciBNYXBCb29rS2VlcGluZ1xuICogQHBhcmFtIHshKn0gbWFwUmVzdWx0IE9iamVjdCBjb250YWluaW5nIHRoZSBvcmRlcmVkIG1hcCBvZiByZXN1bHRzLlxuICogQHBhcmFtIHshZnVuY3Rpb259IG1hcEZ1bmN0aW9uIEZ1bmN0aW9uIHRvIHBlcmZvcm0gbWFwcGluZyB3aXRoLlxuICogQHBhcmFtIHs/Kn0gbWFwQ29udGV4dCBDb250ZXh0IHRvIHBlcmZvcm0gbWFwcGluZyB3aXRoLlxuICovXG5mdW5jdGlvbiBNYXBCb29rS2VlcGluZyhtYXBSZXN1bHQsIGtleVByZWZpeCwgbWFwRnVuY3Rpb24sIG1hcENvbnRleHQpIHtcbiAgdGhpcy5yZXN1bHQgPSBtYXBSZXN1bHQ7XG4gIHRoaXMua2V5UHJlZml4ID0ga2V5UHJlZml4O1xuICB0aGlzLmZ1bmMgPSBtYXBGdW5jdGlvbjtcbiAgdGhpcy5jb250ZXh0ID0gbWFwQ29udGV4dDtcbiAgdGhpcy5jb3VudCA9IDA7XG59XG5NYXBCb29rS2VlcGluZy5wcm90b3R5cGUuZGVzdHJ1Y3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5yZXN1bHQgPSBudWxsO1xuICB0aGlzLmtleVByZWZpeCA9IG51bGw7XG4gIHRoaXMuZnVuYyA9IG51bGw7XG4gIHRoaXMuY29udGV4dCA9IG51bGw7XG4gIHRoaXMuY291bnQgPSAwO1xufTtcblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhNYXBCb29rS2VlcGluZywgZm91ckFyZ3VtZW50UG9vbGVyKTtcblxuZnVuY3Rpb24gbWFwU2luZ2xlQ2hpbGRJbnRvQ29udGV4dChib29rS2VlcGluZywgY2hpbGQsIGNoaWxkS2V5KSB7XG4gIHZhciByZXN1bHQgPSBib29rS2VlcGluZy5yZXN1bHQ7XG4gIHZhciBrZXlQcmVmaXggPSBib29rS2VlcGluZy5rZXlQcmVmaXg7XG4gIHZhciBmdW5jID0gYm9va0tlZXBpbmcuZnVuYztcbiAgdmFyIGNvbnRleHQgPSBib29rS2VlcGluZy5jb250ZXh0O1xuXG4gIHZhciBtYXBwZWRDaGlsZCA9IGZ1bmMuY2FsbChjb250ZXh0LCBjaGlsZCwgYm9va0tlZXBpbmcuY291bnQrKyk7XG4gIGlmIChBcnJheS5pc0FycmF5KG1hcHBlZENoaWxkKSkge1xuICAgIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwobWFwcGVkQ2hpbGQsIHJlc3VsdCwgY2hpbGRLZXksIGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNBcmd1bWVudCk7XG4gIH0gZWxzZSBpZiAobWFwcGVkQ2hpbGQgIT0gbnVsbCkge1xuICAgIGlmIChSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQobWFwcGVkQ2hpbGQpKSB7XG4gICAgICBtYXBwZWRDaGlsZCA9IFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VLZXkobWFwcGVkQ2hpbGQsXG4gICAgICAvLyBLZWVwIGJvdGggdGhlIChtYXBwZWQpIGFuZCBvbGQga2V5cyBpZiB0aGV5IGRpZmZlciwganVzdCBhc1xuICAgICAgLy8gdHJhdmVyc2VBbGxDaGlsZHJlbiB1c2VkIHRvIGRvIGZvciBvYmplY3RzIGFzIGNoaWxkcmVuXG4gICAgICBrZXlQcmVmaXggKyAobWFwcGVkQ2hpbGQgIT09IGNoaWxkID8gZXNjYXBlVXNlclByb3ZpZGVkS2V5KG1hcHBlZENoaWxkLmtleSB8fCAnJykgKyAnLycgOiAnJykgKyBjaGlsZEtleSk7XG4gICAgfVxuICAgIHJlc3VsdC5wdXNoKG1hcHBlZENoaWxkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsKGNoaWxkcmVuLCBhcnJheSwgcHJlZml4LCBmdW5jLCBjb250ZXh0KSB7XG4gIHZhciBlc2NhcGVkUHJlZml4ID0gJyc7XG4gIGlmIChwcmVmaXggIT0gbnVsbCkge1xuICAgIGVzY2FwZWRQcmVmaXggPSBlc2NhcGVVc2VyUHJvdmlkZWRLZXkocHJlZml4KSArICcvJztcbiAgfVxuICB2YXIgdHJhdmVyc2VDb250ZXh0ID0gTWFwQm9va0tlZXBpbmcuZ2V0UG9vbGVkKGFycmF5LCBlc2NhcGVkUHJlZml4LCBmdW5jLCBjb250ZXh0KTtcbiAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgbWFwU2luZ2xlQ2hpbGRJbnRvQ29udGV4dCwgdHJhdmVyc2VDb250ZXh0KTtcbiAgTWFwQm9va0tlZXBpbmcucmVsZWFzZSh0cmF2ZXJzZUNvbnRleHQpO1xufVxuXG4vKipcbiAqIE1hcHMgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLlxuICpcbiAqIFRoZSBwcm92aWRlZCBtYXBGdW5jdGlvbihjaGlsZCwga2V5LCBpbmRleCkgd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2hcbiAqIGxlYWYgY2hpbGQuXG4gKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCosIGludCl9IGZ1bmMgVGhlIG1hcCBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBDb250ZXh0IGZvciBtYXBGdW5jdGlvbi5cbiAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIG9yZGVyZWQgbWFwIG9mIHJlc3VsdHMuXG4gKi9cbmZ1bmN0aW9uIG1hcENoaWxkcmVuKGNoaWxkcmVuLCBmdW5jLCBjb250ZXh0KSB7XG4gIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbChjaGlsZHJlbiwgcmVzdWx0LCBudWxsLCBmdW5jLCBjb250ZXh0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZm9yRWFjaFNpbmdsZUNoaWxkRHVtbXkodHJhdmVyc2VDb250ZXh0LCBjaGlsZCwgbmFtZSkge1xuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBDb3VudCB0aGUgbnVtYmVyIG9mIGNoaWxkcmVuIHRoYXQgYXJlIHR5cGljYWxseSBzcGVjaWZpZWQgYXNcbiAqIGBwcm9wcy5jaGlsZHJlbmAuXG4gKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgY2hpbGRyZW4uXG4gKi9cbmZ1bmN0aW9uIGNvdW50Q2hpbGRyZW4oY2hpbGRyZW4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIHRyYXZlcnNlQWxsQ2hpbGRyZW4oY2hpbGRyZW4sIGZvckVhY2hTaW5nbGVDaGlsZER1bW15LCBudWxsKTtcbn1cblxuLyoqXG4gKiBGbGF0dGVuIGEgY2hpbGRyZW4gb2JqZWN0ICh0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmApIGFuZFxuICogcmV0dXJuIGFuIGFycmF5IHdpdGggYXBwcm9wcmlhdGVseSByZS1rZXllZCBjaGlsZHJlbi5cbiAqL1xuZnVuY3Rpb24gdG9BcnJheShjaGlsZHJlbikge1xuICB2YXIgcmVzdWx0ID0gW107XG4gIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwoY2hpbGRyZW4sIHJlc3VsdCwgbnVsbCwgZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0FyZ3VtZW50KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIFJlYWN0Q2hpbGRyZW4gPSB7XG4gIGZvckVhY2g6IGZvckVhY2hDaGlsZHJlbixcbiAgbWFwOiBtYXBDaGlsZHJlbixcbiAgbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbDogbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbCxcbiAgY291bnQ6IGNvdW50Q2hpbGRyZW4sXG4gIHRvQXJyYXk6IHRvQXJyYXlcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDaGlsZHJlbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDbGFzc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvbmVudCcpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9ucycpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcycpO1xudmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdE5vb3BVcGRhdGVRdWV1ZScpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eU9iamVjdCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIGtleU1pcnJvciA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU1pcnJvcicpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgTUlYSU5TX0tFWSA9IGtleU9mKHsgbWl4aW5zOiBudWxsIH0pO1xuXG4vKipcbiAqIFBvbGljaWVzIHRoYXQgZGVzY3JpYmUgbWV0aG9kcyBpbiBgUmVhY3RDbGFzc0ludGVyZmFjZWAuXG4gKi9cbnZhciBTcGVjUG9saWN5ID0ga2V5TWlycm9yKHtcbiAgLyoqXG4gICAqIFRoZXNlIG1ldGhvZHMgbWF5IGJlIGRlZmluZWQgb25seSBvbmNlIGJ5IHRoZSBjbGFzcyBzcGVjaWZpY2F0aW9uIG9yIG1peGluLlxuICAgKi9cbiAgREVGSU5FX09OQ0U6IG51bGwsXG4gIC8qKlxuICAgKiBUaGVzZSBtZXRob2RzIG1heSBiZSBkZWZpbmVkIGJ5IGJvdGggdGhlIGNsYXNzIHNwZWNpZmljYXRpb24gYW5kIG1peGlucy5cbiAgICogU3Vic2VxdWVudCBkZWZpbml0aW9ucyB3aWxsIGJlIGNoYWluZWQuIFRoZXNlIG1ldGhvZHMgbXVzdCByZXR1cm4gdm9pZC5cbiAgICovXG4gIERFRklORV9NQU5ZOiBudWxsLFxuICAvKipcbiAgICogVGhlc2UgbWV0aG9kcyBhcmUgb3ZlcnJpZGluZyB0aGUgYmFzZSBjbGFzcy5cbiAgICovXG4gIE9WRVJSSURFX0JBU0U6IG51bGwsXG4gIC8qKlxuICAgKiBUaGVzZSBtZXRob2RzIGFyZSBzaW1pbGFyIHRvIERFRklORV9NQU5ZLCBleGNlcHQgd2UgYXNzdW1lIHRoZXkgcmV0dXJuXG4gICAqIG9iamVjdHMuIFdlIHRyeSB0byBtZXJnZSB0aGUga2V5cyBvZiB0aGUgcmV0dXJuIHZhbHVlcyBvZiBhbGwgdGhlIG1peGVkIGluXG4gICAqIGZ1bmN0aW9ucy4gSWYgdGhlcmUgaXMgYSBrZXkgY29uZmxpY3Qgd2UgdGhyb3cuXG4gICAqL1xuICBERUZJTkVfTUFOWV9NRVJHRUQ6IG51bGxcbn0pO1xuXG52YXIgaW5qZWN0ZWRNaXhpbnMgPSBbXTtcblxudmFyIHdhcm5lZFNldFByb3BzID0gZmFsc2U7XG5mdW5jdGlvbiB3YXJuU2V0UHJvcHMoKSB7XG4gIGlmICghd2FybmVkU2V0UHJvcHMpIHtcbiAgICB3YXJuZWRTZXRQcm9wcyA9IHRydWU7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdzZXRQcm9wcyguLi4pIGFuZCByZXBsYWNlUHJvcHMoLi4uKSBhcmUgZGVwcmVjYXRlZC4gJyArICdJbnN0ZWFkLCBjYWxsIHJlbmRlciBhZ2FpbiBhdCB0aGUgdG9wIGxldmVsLicpIDogdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogQ29tcG9zaXRlIGNvbXBvbmVudHMgYXJlIGhpZ2hlci1sZXZlbCBjb21wb25lbnRzIHRoYXQgY29tcG9zZSBvdGhlciBjb21wb3NpdGVcbiAqIG9yIG5hdGl2ZSBjb21wb25lbnRzLlxuICpcbiAqIFRvIGNyZWF0ZSBhIG5ldyB0eXBlIG9mIGBSZWFjdENsYXNzYCwgcGFzcyBhIHNwZWNpZmljYXRpb24gb2ZcbiAqIHlvdXIgbmV3IGNsYXNzIHRvIGBSZWFjdC5jcmVhdGVDbGFzc2AuIFRoZSBvbmx5IHJlcXVpcmVtZW50IG9mIHlvdXIgY2xhc3NcbiAqIHNwZWNpZmljYXRpb24gaXMgdGhhdCB5b3UgaW1wbGVtZW50IGEgYHJlbmRlcmAgbWV0aG9kLlxuICpcbiAqICAgdmFyIE15Q29tcG9uZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICByZXR1cm4gPGRpdj5IZWxsbyBXb3JsZDwvZGl2PjtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFRoZSBjbGFzcyBzcGVjaWZpY2F0aW9uIHN1cHBvcnRzIGEgc3BlY2lmaWMgcHJvdG9jb2wgb2YgbWV0aG9kcyB0aGF0IGhhdmVcbiAqIHNwZWNpYWwgbWVhbmluZyAoZS5nLiBgcmVuZGVyYCkuIFNlZSBgUmVhY3RDbGFzc0ludGVyZmFjZWAgZm9yXG4gKiBtb3JlIHRoZSBjb21wcmVoZW5zaXZlIHByb3RvY29sLiBBbnkgb3RoZXIgcHJvcGVydGllcyBhbmQgbWV0aG9kcyBpbiB0aGVcbiAqIGNsYXNzIHNwZWNpZmljYXRpb24gd2lsbCBiZSBhdmFpbGFibGUgb24gdGhlIHByb3RvdHlwZS5cbiAqXG4gKiBAaW50ZXJmYWNlIFJlYWN0Q2xhc3NJbnRlcmZhY2VcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RDbGFzc0ludGVyZmFjZSA9IHtcblxuICAvKipcbiAgICogQW4gYXJyYXkgb2YgTWl4aW4gb2JqZWN0cyB0byBpbmNsdWRlIHdoZW4gZGVmaW5pbmcgeW91ciBjb21wb25lbnQuXG4gICAqXG4gICAqIEB0eXBlIHthcnJheX1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBtaXhpbnM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBjb250YWluaW5nIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMgdGhhdCBzaG91bGQgYmUgZGVmaW5lZCBvblxuICAgKiB0aGUgY29tcG9uZW50J3MgY29uc3RydWN0b3IgaW5zdGVhZCBvZiBpdHMgcHJvdG90eXBlIChzdGF0aWMgbWV0aG9kcykuXG4gICAqXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgc3RhdGljczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogRGVmaW5pdGlvbiBvZiBwcm9wIHR5cGVzIGZvciB0aGlzIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHR5cGUge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBwcm9wVHlwZXM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIERlZmluaXRpb24gb2YgY29udGV4dCB0eXBlcyBmb3IgdGhpcyBjb21wb25lbnQuXG4gICAqXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY29udGV4dFR5cGVzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBEZWZpbml0aW9uIG9mIGNvbnRleHQgdHlwZXMgdGhpcyBjb21wb25lbnQgc2V0cyBmb3IgaXRzIGNoaWxkcmVuLlxuICAgKlxuICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNoaWxkQ29udGV4dFR5cGVzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8vID09PT0gRGVmaW5pdGlvbiBtZXRob2RzID09PT1cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZC4gVmFsdWVzIGluIHRoZSBtYXBwaW5nIHdpbGwgYmUgc2V0IG9uXG4gICAqIGB0aGlzLnByb3BzYCBpZiB0aGF0IHByb3AgaXMgbm90IHNwZWNpZmllZCAoaS5lLiB1c2luZyBhbiBgaW5gIGNoZWNrKS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgaW52b2tlZCBiZWZvcmUgYGdldEluaXRpYWxTdGF0ZWAgYW5kIHRoZXJlZm9yZSBjYW5ub3QgcmVseVxuICAgKiBvbiBgdGhpcy5zdGF0ZWAgb3IgdXNlIGB0aGlzLnNldFN0YXRlYC5cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGdldERlZmF1bHRQcm9wczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQsXG5cbiAgLyoqXG4gICAqIEludm9rZWQgb25jZSBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkLiBUaGUgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZFxuICAgKiBhcyB0aGUgaW5pdGlhbCB2YWx1ZSBvZiBgdGhpcy5zdGF0ZWAuXG4gICAqXG4gICAqICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICogICAgIHJldHVybiB7XG4gICAqICAgICAgIGlzT246IGZhbHNlLFxuICAgKiAgICAgICBmb29CYXo6IG5ldyBCYXpGb28oKVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGdldEluaXRpYWxTdGF0ZTogU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQsXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBnZXRDaGlsZENvbnRleHQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VELFxuXG4gIC8qKlxuICAgKiBVc2VzIHByb3BzIGZyb20gYHRoaXMucHJvcHNgIGFuZCBzdGF0ZSBmcm9tIGB0aGlzLnN0YXRlYCB0byByZW5kZXIgdGhlXG4gICAqIHN0cnVjdHVyZSBvZiB0aGUgY29tcG9uZW50LlxuICAgKlxuICAgKiBObyBndWFyYW50ZWVzIGFyZSBtYWRlIGFib3V0IHdoZW4gb3IgaG93IG9mdGVuIHRoaXMgbWV0aG9kIGlzIGludm9rZWQsIHNvXG4gICAqIGl0IG11c3Qgbm90IGhhdmUgc2lkZSBlZmZlY3RzLlxuICAgKlxuICAgKiAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAqICAgICB2YXIgbmFtZSA9IHRoaXMucHJvcHMubmFtZTtcbiAgICogICAgIHJldHVybiA8ZGl2PkhlbGxvLCB7bmFtZX0hPC9kaXY+O1xuICAgKiAgIH1cbiAgICpcbiAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9XG4gICAqIEBub3NpZGVlZmZlY3RzXG4gICAqIEByZXF1aXJlZFxuICAgKi9cbiAgcmVuZGVyOiBTcGVjUG9saWN5LkRFRklORV9PTkNFLFxuXG4gIC8vID09PT0gRGVsZWdhdGUgbWV0aG9kcyA9PT09XG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGluaXRpYWxseSBjcmVhdGVkIGFuZCBhYm91dCB0byBiZSBtb3VudGVkLlxuICAgKiBUaGlzIG1heSBoYXZlIHNpZGUgZWZmZWN0cywgYnV0IGFueSBleHRlcm5hbCBzdWJzY3JpcHRpb25zIG9yIGRhdGEgY3JlYXRlZFxuICAgKiBieSB0aGlzIG1ldGhvZCBtdXN0IGJlIGNsZWFuZWQgdXAgaW4gYGNvbXBvbmVudFdpbGxVbm1vdW50YC5cbiAgICpcbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnRXaWxsTW91bnQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGhhcyBiZWVuIG1vdW50ZWQgYW5kIGhhcyBhIERPTSByZXByZXNlbnRhdGlvbi5cbiAgICogSG93ZXZlciwgdGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgdGhlIERPTSBub2RlIGlzIGluIHRoZSBkb2N1bWVudC5cbiAgICpcbiAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gb3BlcmF0ZSBvbiB0aGUgRE9NIHdoZW4gdGhlIGNvbXBvbmVudCBoYXNcbiAgICogYmVlbiBtb3VudGVkIChpbml0aWFsaXplZCBhbmQgcmVuZGVyZWQpIGZvciB0aGUgZmlyc3QgdGltZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSByb290Tm9kZSBET00gZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIGNvbXBvbmVudC5cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnREaWRNb3VudDogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogSW52b2tlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCByZWNlaXZlcyBuZXcgcHJvcHMuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIHJlYWN0IHRvIGEgcHJvcCB0cmFuc2l0aW9uIGJ5IHVwZGF0aW5nIHRoZVxuICAgKiBzdGF0ZSB1c2luZyBgdGhpcy5zZXRTdGF0ZWAuIEN1cnJlbnQgcHJvcHMgYXJlIGFjY2Vzc2VkIHZpYSBgdGhpcy5wcm9wc2AuXG4gICAqXG4gICAqICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24obmV4dFByb3BzLCBuZXh0Q29udGV4dCkge1xuICAgKiAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAqICAgICAgIGxpa2VzSW5jcmVhc2luZzogbmV4dFByb3BzLmxpa2VDb3VudCA+IHRoaXMucHJvcHMubGlrZUNvdW50XG4gICAqICAgICB9KTtcbiAgICogICB9XG4gICAqXG4gICAqIE5PVEU6IFRoZXJlIGlzIG5vIGVxdWl2YWxlbnQgYGNvbXBvbmVudFdpbGxSZWNlaXZlU3RhdGVgLiBBbiBpbmNvbWluZyBwcm9wXG4gICAqIHRyYW5zaXRpb24gbWF5IGNhdXNlIGEgc3RhdGUgY2hhbmdlLCBidXQgdGhlIG9wcG9zaXRlIGlzIG5vdCB0cnVlLiBJZiB5b3VcbiAgICogbmVlZCBpdCwgeW91IGFyZSBwcm9iYWJseSBsb29raW5nIGZvciBgY29tcG9uZW50V2lsbFVwZGF0ZWAuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoaWxlIGRlY2lkaW5nIGlmIHRoZSBjb21wb25lbnQgc2hvdWxkIGJlIHVwZGF0ZWQgYXMgYSByZXN1bHQgb2ZcbiAgICogcmVjZWl2aW5nIG5ldyBwcm9wcywgc3RhdGUgYW5kL29yIGNvbnRleHQuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIGByZXR1cm4gZmFsc2VgIHdoZW4geW91J3JlIGNlcnRhaW4gdGhhdCB0aGVcbiAgICogdHJhbnNpdGlvbiB0byB0aGUgbmV3IHByb3BzL3N0YXRlL2NvbnRleHQgd2lsbCBub3QgcmVxdWlyZSBhIGNvbXBvbmVudFxuICAgKiB1cGRhdGUuXG4gICAqXG4gICAqICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBmdW5jdGlvbihuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpIHtcbiAgICogICAgIHJldHVybiAhZXF1YWwobmV4dFByb3BzLCB0aGlzLnByb3BzKSB8fFxuICAgKiAgICAgICAhZXF1YWwobmV4dFN0YXRlLCB0aGlzLnN0YXRlKSB8fFxuICAgKiAgICAgICAhZXF1YWwobmV4dENvbnRleHQsIHRoaXMuY29udGV4dCk7XG4gICAqICAgfVxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dFN0YXRlXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dENvbnRleHRcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY29tcG9uZW50IHNob3VsZCB1cGRhdGUuXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBTcGVjUG9saWN5LkRFRklORV9PTkNFLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhYm91dCB0byB1cGRhdGUgZHVlIHRvIGEgdHJhbnNpdGlvbiBmcm9tXG4gICAqIGB0aGlzLnByb3BzYCwgYHRoaXMuc3RhdGVgIGFuZCBgdGhpcy5jb250ZXh0YCB0byBgbmV4dFByb3BzYCwgYG5leHRTdGF0ZWBcbiAgICogYW5kIGBuZXh0Q29udGV4dGAuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIHBlcmZvcm0gcHJlcGFyYXRpb24gYmVmb3JlIGFuIHVwZGF0ZSBvY2N1cnMuXG4gICAqXG4gICAqIE5PVEU6IFlvdSAqKmNhbm5vdCoqIHVzZSBgdGhpcy5zZXRTdGF0ZSgpYCBpbiB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG5leHRQcm9wc1xuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRTdGF0ZVxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDb250ZXh0XG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb21wb25lbnRXaWxsVXBkYXRlOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCdzIERPTSByZXByZXNlbnRhdGlvbiBoYXMgYmVlbiB1cGRhdGVkLlxuICAgKlxuICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBvcGVyYXRlIG9uIHRoZSBET00gd2hlbiB0aGUgY29tcG9uZW50IGhhc1xuICAgKiBiZWVuIHVwZGF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcmV2UHJvcHNcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2U3RhdGVcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2Q29udGV4dFxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHJvb3ROb2RlIERPTSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgY29tcG9uZW50LlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZCBmcm9tIGl0cyBwYXJlbnQgYW5kIGhhdmVcbiAgICogaXRzIERPTSByZXByZXNlbnRhdGlvbiBkZXN0cm95ZWQuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIGRlYWxsb2NhdGUgYW55IGV4dGVybmFsIHJlc291cmNlcy5cbiAgICpcbiAgICogTk9URTogVGhlcmUgaXMgbm8gYGNvbXBvbmVudERpZFVubW91bnRgIHNpbmNlIHlvdXIgY29tcG9uZW50IHdpbGwgaGF2ZSBiZWVuXG4gICAqIGRlc3Ryb3llZCBieSB0aGF0IHBvaW50LlxuICAgKlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8vID09PT0gQWR2YW5jZWQgbWV0aG9kcyA9PT09XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNvbXBvbmVudCdzIGN1cnJlbnRseSBtb3VudGVkIERPTSByZXByZXNlbnRhdGlvbi5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhpcyBpbXBsZW1lbnRzIFJlYWN0J3MgcmVuZGVyaW5nIGFuZCByZWNvbmNpbGlhdGlvbiBhbGdvcml0aG0uXG4gICAqIFNvcGhpc3RpY2F0ZWQgY2xpZW50cyBtYXkgd2lzaCB0byBvdmVycmlkZSB0aGlzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAb3ZlcnJpZGFibGVcbiAgICovXG4gIHVwZGF0ZUNvbXBvbmVudDogU3BlY1BvbGljeS5PVkVSUklERV9CQVNFXG5cbn07XG5cbi8qKlxuICogTWFwcGluZyBmcm9tIGNsYXNzIHNwZWNpZmljYXRpb24ga2V5cyB0byBzcGVjaWFsIHByb2Nlc3NpbmcgZnVuY3Rpb25zLlxuICpcbiAqIEFsdGhvdWdoIHRoZXNlIGFyZSBkZWNsYXJlZCBsaWtlIGluc3RhbmNlIHByb3BlcnRpZXMgaW4gdGhlIHNwZWNpZmljYXRpb25cbiAqIHdoZW4gZGVmaW5pbmcgY2xhc3NlcyB1c2luZyBgUmVhY3QuY3JlYXRlQ2xhc3NgLCB0aGV5IGFyZSBhY3R1YWxseSBzdGF0aWNcbiAqIGFuZCBhcmUgYWNjZXNzaWJsZSBvbiB0aGUgY29uc3RydWN0b3IgaW5zdGVhZCBvZiB0aGUgcHJvdG90eXBlLiBEZXNwaXRlXG4gKiBiZWluZyBzdGF0aWMsIHRoZXkgbXVzdCBiZSBkZWZpbmVkIG91dHNpZGUgb2YgdGhlIFwic3RhdGljc1wiIGtleSB1bmRlclxuICogd2hpY2ggYWxsIG90aGVyIHN0YXRpYyBtZXRob2RzIGFyZSBkZWZpbmVkLlxuICovXG52YXIgUkVTRVJWRURfU1BFQ19LRVlTID0ge1xuICBkaXNwbGF5TmFtZTogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBkaXNwbGF5TmFtZSkge1xuICAgIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7XG4gIH0sXG4gIG1peGluczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBtaXhpbnMpIHtcbiAgICBpZiAobWl4aW5zKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1peGlucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3RvciwgbWl4aW5zW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGNoaWxkQ29udGV4dFR5cGVzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGNoaWxkQ29udGV4dFR5cGVzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgY2hpbGRDb250ZXh0VHlwZXMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY2hpbGRDb250ZXh0KTtcbiAgICB9XG4gICAgQ29uc3RydWN0b3IuY2hpbGRDb250ZXh0VHlwZXMgPSBhc3NpZ24oe30sIENvbnN0cnVjdG9yLmNoaWxkQ29udGV4dFR5cGVzLCBjaGlsZENvbnRleHRUeXBlcyk7XG4gIH0sXG4gIGNvbnRleHRUeXBlczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBjb250ZXh0VHlwZXMpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCBjb250ZXh0VHlwZXMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY29udGV4dCk7XG4gICAgfVxuICAgIENvbnN0cnVjdG9yLmNvbnRleHRUeXBlcyA9IGFzc2lnbih7fSwgQ29uc3RydWN0b3IuY29udGV4dFR5cGVzLCBjb250ZXh0VHlwZXMpO1xuICB9LFxuICAvKipcbiAgICogU3BlY2lhbCBjYXNlIGdldERlZmF1bHRQcm9wcyB3aGljaCBzaG91bGQgbW92ZSBpbnRvIHN0YXRpY3MgYnV0IHJlcXVpcmVzXG4gICAqIGF1dG9tYXRpYyBtZXJnaW5nLlxuICAgKi9cbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGdldERlZmF1bHRQcm9wcykge1xuICAgIGlmIChDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMpIHtcbiAgICAgIENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcyA9IGNyZWF0ZU1lcmdlZFJlc3VsdEZ1bmN0aW9uKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcywgZ2V0RGVmYXVsdFByb3BzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzID0gZ2V0RGVmYXVsdFByb3BzO1xuICAgIH1cbiAgfSxcbiAgcHJvcFR5cGVzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3BUeXBlcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YWxpZGF0ZVR5cGVEZWYoQ29uc3RydWN0b3IsIHByb3BUeXBlcywgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5wcm9wKTtcbiAgICB9XG4gICAgQ29uc3RydWN0b3IucHJvcFR5cGVzID0gYXNzaWduKHt9LCBDb25zdHJ1Y3Rvci5wcm9wVHlwZXMsIHByb3BUeXBlcyk7XG4gIH0sXG4gIHN0YXRpY3M6IGZ1bmN0aW9uIChDb25zdHJ1Y3Rvciwgc3RhdGljcykge1xuICAgIG1peFN0YXRpY1NwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzdGF0aWNzKTtcbiAgfSxcbiAgYXV0b2JpbmQ6IGZ1bmN0aW9uICgpIHt9IH07XG5cbi8vIG5vb3BcbmZ1bmN0aW9uIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgdHlwZURlZiwgbG9jYXRpb24pIHtcbiAgZm9yICh2YXIgcHJvcE5hbWUgaW4gdHlwZURlZikge1xuICAgIGlmICh0eXBlRGVmLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgLy8gdXNlIGEgd2FybmluZyBpbnN0ZWFkIG9mIGFuIGludmFyaWFudCBzbyBjb21wb25lbnRzXG4gICAgICAvLyBkb24ndCBzaG93IHVwIGluIHByb2QgYnV0IG5vdCBpbiBfX0RFVl9fXG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgdHlwZURlZltwcm9wTmFtZV0gPT09ICdmdW5jdGlvbicsICclczogJXMgdHlwZSBgJXNgIGlzIGludmFsaWQ7IGl0IG11c3QgYmUgYSBmdW5jdGlvbiwgdXN1YWxseSBmcm9tICcgKyAnUmVhY3QuUHJvcFR5cGVzLicsIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8ICdSZWFjdENsYXNzJywgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dLCBwcm9wTmFtZSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUocHJvdG8sIG5hbWUpIHtcbiAgdmFyIHNwZWNQb2xpY3kgPSBSZWFjdENsYXNzSW50ZXJmYWNlLmhhc093blByb3BlcnR5KG5hbWUpID8gUmVhY3RDbGFzc0ludGVyZmFjZVtuYW1lXSA6IG51bGw7XG5cbiAgLy8gRGlzYWxsb3cgb3ZlcnJpZGluZyBvZiBiYXNlIGNsYXNzIG1ldGhvZHMgdW5sZXNzIGV4cGxpY2l0bHkgYWxsb3dlZC5cbiAgaWYgKFJlYWN0Q2xhc3NNaXhpbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICEoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5PVkVSUklERV9CQVNFKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzSW50ZXJmYWNlOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gb3ZlcnJpZGUgJyArICdgJXNgIGZyb20geW91ciBjbGFzcyBzcGVjaWZpY2F0aW9uLiBFbnN1cmUgdGhhdCB5b3VyIG1ldGhvZCBuYW1lcyAnICsgJ2RvIG5vdCBvdmVybGFwIHdpdGggUmVhY3QgbWV0aG9kcy4nLCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH1cblxuICAvLyBEaXNhbGxvdyBkZWZpbmluZyBtZXRob2RzIG1vcmUgdGhhbiBvbmNlIHVubGVzcyBleHBsaWNpdGx5IGFsbG93ZWQuXG4gIGlmIChwcm90by5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICEoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWSB8fCBzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzc0ludGVyZmFjZTogWW91IGFyZSBhdHRlbXB0aW5nIHRvIGRlZmluZSAnICsgJ2Alc2Agb24geW91ciBjb21wb25lbnQgbW9yZSB0aGFuIG9uY2UuIFRoaXMgY29uZmxpY3QgbWF5IGJlIGR1ZSAnICsgJ3RvIGEgbWl4aW4uJywgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogTWl4aW4gaGVscGVyIHdoaWNoIGhhbmRsZXMgcG9saWN5IHZhbGlkYXRpb24gYW5kIHJlc2VydmVkXG4gKiBzcGVjaWZpY2F0aW9uIGtleXMgd2hlbiBidWlsZGluZyBSZWFjdCBjbGFzc3Nlcy5cbiAqL1xuZnVuY3Rpb24gbWl4U3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIHNwZWMpIHtcbiAgaWYgKCFzcGVjKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgISh0eXBlb2Ygc3BlYyAhPT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91XFwncmUgYXR0ZW1wdGluZyB0byAnICsgJ3VzZSBhIGNvbXBvbmVudCBjbGFzcyBhcyBhIG1peGluLiBJbnN0ZWFkLCBqdXN0IHVzZSBhIHJlZ3VsYXIgb2JqZWN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgISFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoc3BlYykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91XFwncmUgYXR0ZW1wdGluZyB0byAnICsgJ3VzZSBhIGNvbXBvbmVudCBhcyBhIG1peGluLiBJbnN0ZWFkLCBqdXN0IHVzZSBhIHJlZ3VsYXIgb2JqZWN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICB2YXIgcHJvdG8gPSBDb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG5cbiAgLy8gQnkgaGFuZGxpbmcgbWl4aW5zIGJlZm9yZSBhbnkgb3RoZXIgcHJvcGVydGllcywgd2UgZW5zdXJlIHRoZSBzYW1lXG4gIC8vIGNoYWluaW5nIG9yZGVyIGlzIGFwcGxpZWQgdG8gbWV0aG9kcyB3aXRoIERFRklORV9NQU5ZIHBvbGljeSwgd2hldGhlclxuICAvLyBtaXhpbnMgYXJlIGxpc3RlZCBiZWZvcmUgb3IgYWZ0ZXIgdGhlc2UgbWV0aG9kcyBpbiB0aGUgc3BlYy5cbiAgaWYgKHNwZWMuaGFzT3duUHJvcGVydHkoTUlYSU5TX0tFWSkpIHtcbiAgICBSRVNFUlZFRF9TUEVDX0tFWVMubWl4aW5zKENvbnN0cnVjdG9yLCBzcGVjLm1peGlucyk7XG4gIH1cblxuICBmb3IgKHZhciBuYW1lIGluIHNwZWMpIHtcbiAgICBpZiAoIXNwZWMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChuYW1lID09PSBNSVhJTlNfS0VZKSB7XG4gICAgICAvLyBXZSBoYXZlIGFscmVhZHkgaGFuZGxlZCBtaXhpbnMgaW4gYSBzcGVjaWFsIGNhc2UgYWJvdmUuXG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICB2YXIgcHJvcGVydHkgPSBzcGVjW25hbWVdO1xuICAgIHZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUocHJvdG8sIG5hbWUpO1xuXG4gICAgaWYgKFJFU0VSVkVEX1NQRUNfS0VZUy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgUkVTRVJWRURfU1BFQ19LRVlTW25hbWVdKENvbnN0cnVjdG9yLCBwcm9wZXJ0eSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNldHVwIG1ldGhvZHMgb24gcHJvdG90eXBlOlxuICAgICAgLy8gVGhlIGZvbGxvd2luZyBtZW1iZXIgbWV0aG9kcyBzaG91bGQgbm90IGJlIGF1dG9tYXRpY2FsbHkgYm91bmQ6XG4gICAgICAvLyAxLiBFeHBlY3RlZCBSZWFjdENsYXNzIG1ldGhvZHMgKGluIHRoZSBcImludGVyZmFjZVwiKS5cbiAgICAgIC8vIDIuIE92ZXJyaWRkZW4gbWV0aG9kcyAodGhhdCB3ZXJlIG1peGVkIGluKS5cbiAgICAgIHZhciBpc1JlYWN0Q2xhc3NNZXRob2QgPSBSZWFjdENsYXNzSW50ZXJmYWNlLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgICAgdmFyIGlzQWxyZWFkeURlZmluZWQgPSBwcm90by5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcbiAgICAgIHZhciBpc0Z1bmN0aW9uID0gdHlwZW9mIHByb3BlcnR5ID09PSAnZnVuY3Rpb24nO1xuICAgICAgdmFyIHNob3VsZEF1dG9CaW5kID0gaXNGdW5jdGlvbiAmJiAhaXNSZWFjdENsYXNzTWV0aG9kICYmICFpc0FscmVhZHlEZWZpbmVkICYmIHNwZWMuYXV0b2JpbmQgIT09IGZhbHNlO1xuXG4gICAgICBpZiAoc2hvdWxkQXV0b0JpbmQpIHtcbiAgICAgICAgaWYgKCFwcm90by5fX3JlYWN0QXV0b0JpbmRNYXApIHtcbiAgICAgICAgICBwcm90by5fX3JlYWN0QXV0b0JpbmRNYXAgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBwcm90by5fX3JlYWN0QXV0b0JpbmRNYXBbbmFtZV0gPSBwcm9wZXJ0eTtcbiAgICAgICAgcHJvdG9bbmFtZV0gPSBwcm9wZXJ0eTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc0FscmVhZHlEZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIHNwZWNQb2xpY3kgPSBSZWFjdENsYXNzSW50ZXJmYWNlW25hbWVdO1xuXG4gICAgICAgICAgLy8gVGhlc2UgY2FzZXMgc2hvdWxkIGFscmVhZHkgYmUgY2F1Z2h0IGJ5IHZhbGlkYXRlTWV0aG9kT3ZlcnJpZGUuXG4gICAgICAgICAgIShpc1JlYWN0Q2xhc3NNZXRob2QgJiYgKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VEIHx8IHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTlkpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBVbmV4cGVjdGVkIHNwZWMgcG9saWN5ICVzIGZvciBrZXkgJXMgJyArICd3aGVuIG1peGluZyBpbiBjb21wb25lbnQgc3BlY3MuJywgc3BlY1BvbGljeSwgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgLy8gRm9yIG1ldGhvZHMgd2hpY2ggYXJlIGRlZmluZWQgbW9yZSB0aGFuIG9uY2UsIGNhbGwgdGhlIGV4aXN0aW5nXG4gICAgICAgICAgLy8gbWV0aG9kcyBiZWZvcmUgY2FsbGluZyB0aGUgbmV3IHByb3BlcnR5LCBtZXJnaW5nIGlmIGFwcHJvcHJpYXRlLlxuICAgICAgICAgIGlmIChzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCkge1xuICAgICAgICAgICAgcHJvdG9bbmFtZV0gPSBjcmVhdGVNZXJnZWRSZXN1bHRGdW5jdGlvbihwcm90b1tuYW1lXSwgcHJvcGVydHkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWSkge1xuICAgICAgICAgICAgcHJvdG9bbmFtZV0gPSBjcmVhdGVDaGFpbmVkRnVuY3Rpb24ocHJvdG9bbmFtZV0sIHByb3BlcnR5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvdG9bbmFtZV0gPSBwcm9wZXJ0eTtcbiAgICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgLy8gQWRkIHZlcmJvc2UgZGlzcGxheU5hbWUgdG8gdGhlIGZ1bmN0aW9uLCB3aGljaCBoZWxwcyB3aGVuIGxvb2tpbmdcbiAgICAgICAgICAgIC8vIGF0IHByb2ZpbGluZyB0b29scy5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcGVydHkgPT09ICdmdW5jdGlvbicgJiYgc3BlYy5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgICAgICBwcm90b1tuYW1lXS5kaXNwbGF5TmFtZSA9IHNwZWMuZGlzcGxheU5hbWUgKyAnXycgKyBuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBtaXhTdGF0aWNTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3RhdGljcykge1xuICBpZiAoIXN0YXRpY3MpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZm9yICh2YXIgbmFtZSBpbiBzdGF0aWNzKSB7XG4gICAgdmFyIHByb3BlcnR5ID0gc3RhdGljc1tuYW1lXTtcbiAgICBpZiAoIXN0YXRpY3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBpc1Jlc2VydmVkID0gKG5hbWUgaW4gUkVTRVJWRURfU1BFQ19LRVlTKTtcbiAgICAhIWlzUmVzZXJ2ZWQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91IGFyZSBhdHRlbXB0aW5nIHRvIGRlZmluZSBhIHJlc2VydmVkICcgKyAncHJvcGVydHksIGAlc2AsIHRoYXQgc2hvdWxkblxcJ3QgYmUgb24gdGhlIFwic3RhdGljc1wiIGtleS4gRGVmaW5lIGl0ICcgKyAnYXMgYW4gaW5zdGFuY2UgcHJvcGVydHkgaW5zdGVhZDsgaXQgd2lsbCBzdGlsbCBiZSBhY2Nlc3NpYmxlIG9uIHRoZSAnICsgJ2NvbnN0cnVjdG9yLicsIG5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBpc0luaGVyaXRlZCA9IChuYW1lIGluIENvbnN0cnVjdG9yKTtcbiAgICAhIWlzSW5oZXJpdGVkID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBkZWZpbmUgJyArICdgJXNgIG9uIHlvdXIgY29tcG9uZW50IG1vcmUgdGhhbiBvbmNlLiBUaGlzIGNvbmZsaWN0IG1heSBiZSAnICsgJ2R1ZSB0byBhIG1peGluLicsIG5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBDb25zdHJ1Y3RvcltuYW1lXSA9IHByb3BlcnR5O1xuICB9XG59XG5cbi8qKlxuICogTWVyZ2UgdHdvIG9iamVjdHMsIGJ1dCB0aHJvdyBpZiBib3RoIGNvbnRhaW4gdGhlIHNhbWUga2V5LlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvbmUgVGhlIGZpcnN0IG9iamVjdCwgd2hpY2ggaXMgbXV0YXRlZC5cbiAqIEBwYXJhbSB7b2JqZWN0fSB0d28gVGhlIHNlY29uZCBvYmplY3RcbiAqIEByZXR1cm4ge29iamVjdH0gb25lIGFmdGVyIGl0IGhhcyBiZWVuIG11dGF0ZWQgdG8gY29udGFpbiBldmVyeXRoaW5nIGluIHR3by5cbiAqL1xuZnVuY3Rpb24gbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cyhvbmUsIHR3bykge1xuICAhKG9uZSAmJiB0d28gJiYgdHlwZW9mIG9uZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHR3byA9PT0gJ29iamVjdCcpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ21lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoKTogQ2Fubm90IG1lcmdlIG5vbi1vYmplY3RzLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICBmb3IgKHZhciBrZXkgaW4gdHdvKSB7XG4gICAgaWYgKHR3by5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAhKG9uZVtrZXldID09PSB1bmRlZmluZWQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ21lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoKTogJyArICdUcmllZCB0byBtZXJnZSB0d28gb2JqZWN0cyB3aXRoIHRoZSBzYW1lIGtleTogYCVzYC4gVGhpcyBjb25mbGljdCAnICsgJ21heSBiZSBkdWUgdG8gYSBtaXhpbjsgaW4gcGFydGljdWxhciwgdGhpcyBtYXkgYmUgY2F1c2VkIGJ5IHR3byAnICsgJ2dldEluaXRpYWxTdGF0ZSgpIG9yIGdldERlZmF1bHRQcm9wcygpIG1ldGhvZHMgcmV0dXJuaW5nIG9iamVjdHMgJyArICd3aXRoIGNsYXNoaW5nIGtleXMuJywga2V5KSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICBvbmVba2V5XSA9IHR3b1trZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb25lO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdHdvIGZ1bmN0aW9ucyBhbmQgbWVyZ2VzIHRoZWlyIHJldHVybiB2YWx1ZXMuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gb25lIEZ1bmN0aW9uIHRvIGludm9rZSBmaXJzdC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHR3byBGdW5jdGlvbiB0byBpbnZva2Ugc2Vjb25kLlxuICogQHJldHVybiB7ZnVuY3Rpb259IEZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0aGUgdHdvIGFyZ3VtZW50IGZ1bmN0aW9ucy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU1lcmdlZFJlc3VsdEZ1bmN0aW9uKG9uZSwgdHdvKSB7XG4gIHJldHVybiBmdW5jdGlvbiBtZXJnZWRSZXN1bHQoKSB7XG4gICAgdmFyIGEgPSBvbmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB2YXIgYiA9IHR3by5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChhID09IG51bGwpIHtcbiAgICAgIHJldHVybiBiO1xuICAgIH0gZWxzZSBpZiAoYiA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gYTtcbiAgICB9XG4gICAgdmFyIGMgPSB7fTtcbiAgICBtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKGMsIGEpO1xuICAgIG1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoYywgYik7XG4gICAgcmV0dXJuIGM7XG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0d28gZnVuY3Rpb25zIGFuZCBpZ25vcmVzIHRoZWlyIHJldHVybiB2YWxlcy5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbmUgRnVuY3Rpb24gdG8gaW52b2tlIGZpcnN0LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHdvIEZ1bmN0aW9uIHRvIGludm9rZSBzZWNvbmQuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gRnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSB0d28gYXJndW1lbnQgZnVuY3Rpb25zLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2hhaW5lZEZ1bmN0aW9uKG9uZSwgdHdvKSB7XG4gIHJldHVybiBmdW5jdGlvbiBjaGFpbmVkRnVuY3Rpb24oKSB7XG4gICAgb25lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdHdvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbi8qKlxuICogQmluZHMgYSBtZXRob2QgdG8gdGhlIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29tcG9uZW50IENvbXBvbmVudCB3aG9zZSBtZXRob2QgaXMgZ29pbmcgdG8gYmUgYm91bmQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBtZXRob2QgTWV0aG9kIHRvIGJlIGJvdW5kLlxuICogQHJldHVybiB7ZnVuY3Rpb259IFRoZSBib3VuZCBtZXRob2QuXG4gKi9cbmZ1bmN0aW9uIGJpbmRBdXRvQmluZE1ldGhvZChjb21wb25lbnQsIG1ldGhvZCkge1xuICB2YXIgYm91bmRNZXRob2QgPSBtZXRob2QuYmluZChjb21wb25lbnQpO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZENvbnRleHQgPSBjb21wb25lbnQ7XG4gICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kTWV0aG9kID0gbWV0aG9kO1xuICAgIGJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZEFyZ3VtZW50cyA9IG51bGw7XG4gICAgdmFyIGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQuY29uc3RydWN0b3IuZGlzcGxheU5hbWU7XG4gICAgdmFyIF9iaW5kID0gYm91bmRNZXRob2QuYmluZDtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBibG9jay1zY29wZWQtdmFyLCBuby11bmRlZiAqL1xuICAgIGJvdW5kTWV0aG9kLmJpbmQgPSBmdW5jdGlvbiAobmV3VGhpcykge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICAvLyBVc2VyIGlzIHRyeWluZyB0byBiaW5kKCkgYW4gYXV0b2JvdW5kIG1ldGhvZDsgd2UgZWZmZWN0aXZlbHkgd2lsbFxuICAgICAgLy8gaWdub3JlIHRoZSB2YWx1ZSBvZiBcInRoaXNcIiB0aGF0IHRoZSB1c2VyIGlzIHRyeWluZyB0byB1c2UsIHNvXG4gICAgICAvLyBsZXQncyB3YXJuLlxuICAgICAgaWYgKG5ld1RoaXMgIT09IGNvbXBvbmVudCAmJiBuZXdUaGlzICE9PSBudWxsKSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnYmluZCgpOiBSZWFjdCBjb21wb25lbnQgbWV0aG9kcyBtYXkgb25seSBiZSBib3VuZCB0byB0aGUgJyArICdjb21wb25lbnQgaW5zdGFuY2UuIFNlZSAlcycsIGNvbXBvbmVudE5hbWUpIDogdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIGlmICghYXJncy5sZW5ndGgpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdiaW5kKCk6IFlvdSBhcmUgYmluZGluZyBhIGNvbXBvbmVudCBtZXRob2QgdG8gdGhlIGNvbXBvbmVudC4gJyArICdSZWFjdCBkb2VzIHRoaXMgZm9yIHlvdSBhdXRvbWF0aWNhbGx5IGluIGEgaGlnaC1wZXJmb3JtYW5jZSAnICsgJ3dheSwgc28geW91IGNhbiBzYWZlbHkgcmVtb3ZlIHRoaXMgY2FsbC4gU2VlICVzJywgY29tcG9uZW50TmFtZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBib3VuZE1ldGhvZDtcbiAgICAgIH1cbiAgICAgIHZhciByZWJvdW5kTWV0aG9kID0gX2JpbmQuYXBwbHkoYm91bmRNZXRob2QsIGFyZ3VtZW50cyk7XG4gICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZENvbnRleHQgPSBjb21wb25lbnQ7XG4gICAgICByZWJvdW5kTWV0aG9kLl9fcmVhY3RCb3VuZE1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIHJlYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQXJndW1lbnRzID0gYXJncztcbiAgICAgIHJldHVybiByZWJvdW5kTWV0aG9kO1xuICAgICAgLyogZXNsaW50LWVuYWJsZSAqL1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGJvdW5kTWV0aG9kO1xufVxuXG4vKipcbiAqIEJpbmRzIGFsbCBhdXRvLWJvdW5kIG1ldGhvZHMgaW4gYSBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGNvbXBvbmVudCBDb21wb25lbnQgd2hvc2UgbWV0aG9kIGlzIGdvaW5nIHRvIGJlIGJvdW5kLlxuICovXG5mdW5jdGlvbiBiaW5kQXV0b0JpbmRNZXRob2RzKGNvbXBvbmVudCkge1xuICBmb3IgKHZhciBhdXRvQmluZEtleSBpbiBjb21wb25lbnQuX19yZWFjdEF1dG9CaW5kTWFwKSB7XG4gICAgaWYgKGNvbXBvbmVudC5fX3JlYWN0QXV0b0JpbmRNYXAuaGFzT3duUHJvcGVydHkoYXV0b0JpbmRLZXkpKSB7XG4gICAgICB2YXIgbWV0aG9kID0gY29tcG9uZW50Ll9fcmVhY3RBdXRvQmluZE1hcFthdXRvQmluZEtleV07XG4gICAgICBjb21wb25lbnRbYXV0b0JpbmRLZXldID0gYmluZEF1dG9CaW5kTWV0aG9kKGNvbXBvbmVudCwgbWV0aG9kKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgbW9yZSB0byB0aGUgUmVhY3RDbGFzcyBiYXNlIGNsYXNzLiBUaGVzZSBhcmUgYWxsIGxlZ2FjeSBmZWF0dXJlcyBhbmRcbiAqIHRoZXJlZm9yZSBub3QgYWxyZWFkeSBwYXJ0IG9mIHRoZSBtb2Rlcm4gUmVhY3RDb21wb25lbnQuXG4gKi9cbnZhciBSZWFjdENsYXNzTWl4aW4gPSB7XG5cbiAgLyoqXG4gICAqIFRPRE86IFRoaXMgd2lsbCBiZSBkZXByZWNhdGVkIGJlY2F1c2Ugc3RhdGUgc2hvdWxkIGFsd2F5cyBrZWVwIGEgY29uc2lzdGVudFxuICAgKiB0eXBlIHNpZ25hdHVyZSBhbmQgdGhlIG9ubHkgdXNlIGNhc2UgZm9yIHRoaXMsIGlzIHRvIGF2b2lkIHRoYXQuXG4gICAqL1xuICByZXBsYWNlU3RhdGU6IGZ1bmN0aW9uIChuZXdTdGF0ZSwgY2FsbGJhY2spIHtcbiAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZVJlcGxhY2VTdGF0ZSh0aGlzLCBuZXdTdGF0ZSk7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGNvbXBvc2l0ZSBjb21wb25lbnQgaXMgbW91bnRlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBtb3VudGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQGZpbmFsXG4gICAqL1xuICBpc01vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVyLmlzTW91bnRlZCh0aGlzKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsUHJvcHMgU3Vic2V0IG9mIHRoZSBuZXh0IHByb3BzLlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHByb3BzIGFyZSB1cGRhdGVkLlxuICAgKiBAZmluYWxcbiAgICogQHB1YmxpY1xuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgc2V0UHJvcHM6IGZ1bmN0aW9uIChwYXJ0aWFsUHJvcHMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm5TZXRQcm9wcygpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZVNldFByb3BzKHRoaXMsIHBhcnRpYWxQcm9wcyk7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgYWxsIHRoZSBwcm9wcy5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG5ld1Byb3BzIFN1YnNldCBvZiB0aGUgbmV4dCBwcm9wcy5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxlZCBhZnRlciBwcm9wcyBhcmUgdXBkYXRlZC5cbiAgICogQGZpbmFsXG4gICAqIEBwdWJsaWNcbiAgICogQGRlcHJlY2F0ZWRcbiAgICovXG4gIHJlcGxhY2VQcm9wczogZnVuY3Rpb24gKG5ld1Byb3BzLCBjYWxsYmFjaykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuU2V0UHJvcHMoKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVyLmVucXVldWVSZXBsYWNlUHJvcHModGhpcywgbmV3UHJvcHMpO1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgdGhpcy51cGRhdGVyLmVucXVldWVDYWxsYmFjayh0aGlzLCBjYWxsYmFjayk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgUmVhY3RDbGFzc0NvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHt9O1xuYXNzaWduKFJlYWN0Q2xhc3NDb21wb25lbnQucHJvdG90eXBlLCBSZWFjdENvbXBvbmVudC5wcm90b3R5cGUsIFJlYWN0Q2xhc3NNaXhpbik7XG5cbi8qKlxuICogTW9kdWxlIGZvciBjcmVhdGluZyBjb21wb3NpdGUgY29tcG9uZW50cy5cbiAqXG4gKiBAY2xhc3MgUmVhY3RDbGFzc1xuICovXG52YXIgUmVhY3RDbGFzcyA9IHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvbXBvc2l0ZSBjb21wb25lbnQgY2xhc3MgZ2l2ZW4gYSBjbGFzcyBzcGVjaWZpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gc3BlYyBDbGFzcyBzcGVjaWZpY2F0aW9uICh3aGljaCBtdXN0IGRlZmluZSBgcmVuZGVyYCkuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9ufSBDb21wb25lbnQgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNyZWF0ZUNsYXNzOiBmdW5jdGlvbiAoc3BlYykge1xuICAgIHZhciBDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uIChwcm9wcywgY29udGV4dCwgdXBkYXRlcikge1xuICAgICAgLy8gVGhpcyBjb25zdHJ1Y3RvciBpcyBvdmVycmlkZGVuIGJ5IG1vY2tzLiBUaGUgYXJndW1lbnQgaXMgdXNlZFxuICAgICAgLy8gYnkgbW9ja3MgdG8gYXNzZXJ0IG9uIHdoYXQgZ2V0cyBtb3VudGVkLlxuXG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0aGlzIGluc3RhbmNlb2YgQ29uc3RydWN0b3IsICdTb21ldGhpbmcgaXMgY2FsbGluZyBhIFJlYWN0IGNvbXBvbmVudCBkaXJlY3RseS4gVXNlIGEgZmFjdG9yeSBvciAnICsgJ0pTWCBpbnN0ZWFkLiBTZWU6IGh0dHBzOi8vZmIubWUvcmVhY3QtbGVnYWN5ZmFjdG9yeScpIDogdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICAvLyBXaXJlIHVwIGF1dG8tYmluZGluZ1xuICAgICAgaWYgKHRoaXMuX19yZWFjdEF1dG9CaW5kTWFwKSB7XG4gICAgICAgIGJpbmRBdXRvQmluZE1ldGhvZHModGhpcyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICB0aGlzLnJlZnMgPSBlbXB0eU9iamVjdDtcbiAgICAgIHRoaXMudXBkYXRlciA9IHVwZGF0ZXIgfHwgUmVhY3ROb29wVXBkYXRlUXVldWU7XG5cbiAgICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuXG4gICAgICAvLyBSZWFjdENsYXNzZXMgZG9lc24ndCBoYXZlIGNvbnN0cnVjdG9ycy4gSW5zdGVhZCwgdGhleSB1c2UgdGhlXG4gICAgICAvLyBnZXRJbml0aWFsU3RhdGUgYW5kIGNvbXBvbmVudFdpbGxNb3VudCBtZXRob2RzIGZvciBpbml0aWFsaXphdGlvbi5cblxuICAgICAgdmFyIGluaXRpYWxTdGF0ZSA9IHRoaXMuZ2V0SW5pdGlhbFN0YXRlID8gdGhpcy5nZXRJbml0aWFsU3RhdGUoKSA6IG51bGw7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAvLyBXZSBhbGxvdyBhdXRvLW1vY2tzIHRvIHByb2NlZWQgYXMgaWYgdGhleSdyZSByZXR1cm5pbmcgbnVsbC5cbiAgICAgICAgaWYgKHR5cGVvZiBpbml0aWFsU3RhdGUgPT09ICd1bmRlZmluZWQnICYmIHRoaXMuZ2V0SW5pdGlhbFN0YXRlLl9pc01vY2tGdW5jdGlvbikge1xuICAgICAgICAgIC8vIFRoaXMgaXMgcHJvYmFibHkgYmFkIHByYWN0aWNlLiBDb25zaWRlciB3YXJuaW5nIGhlcmUgYW5kXG4gICAgICAgICAgLy8gZGVwcmVjYXRpbmcgdGhpcyBjb252ZW5pZW5jZS5cbiAgICAgICAgICBpbml0aWFsU3RhdGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAhKHR5cGVvZiBpbml0aWFsU3RhdGUgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGluaXRpYWxTdGF0ZSkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJyVzLmdldEluaXRpYWxTdGF0ZSgpOiBtdXN0IHJldHVybiBhbiBvYmplY3Qgb3IgbnVsbCcsIENvbnN0cnVjdG9yLmRpc3BsYXlOYW1lIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy5zdGF0ZSA9IGluaXRpYWxTdGF0ZTtcbiAgICB9O1xuICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IG5ldyBSZWFjdENsYXNzQ29tcG9uZW50KCk7XG4gICAgQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG5cbiAgICBpbmplY3RlZE1peGlucy5mb3JFYWNoKG1peFNwZWNJbnRvQ29tcG9uZW50LmJpbmQobnVsbCwgQ29uc3RydWN0b3IpKTtcblxuICAgIG1peFNwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzcGVjKTtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIGRlZmF1bHRQcm9wcyBwcm9wZXJ0eSBhZnRlciBhbGwgbWl4aW5zIGhhdmUgYmVlbiBtZXJnZWQuXG4gICAgaWYgKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcykge1xuICAgICAgQ29uc3RydWN0b3IuZGVmYXVsdFByb3BzID0gQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKCk7XG4gICAgfVxuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFRoaXMgaXMgYSB0YWcgdG8gaW5kaWNhdGUgdGhhdCB0aGUgdXNlIG9mIHRoZXNlIG1ldGhvZCBuYW1lcyBpcyBvayxcbiAgICAgIC8vIHNpbmNlIGl0J3MgdXNlZCB3aXRoIGNyZWF0ZUNsYXNzLiBJZiBpdCdzIG5vdCwgdGhlbiBpdCdzIGxpa2VseSBhXG4gICAgICAvLyBtaXN0YWtlIHNvIHdlJ2xsIHdhcm4geW91IHRvIHVzZSB0aGUgc3RhdGljIHByb3BlcnR5LCBwcm9wZXJ0eVxuICAgICAgLy8gaW5pdGlhbGl6ZXIgb3IgY29uc3RydWN0b3IgcmVzcGVjdGl2ZWx5LlxuICAgICAgaWYgKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcykge1xuICAgICAgICBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMuaXNSZWFjdENsYXNzQXBwcm92ZWQgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0SW5pdGlhbFN0YXRlKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRJbml0aWFsU3RhdGUuaXNSZWFjdENsYXNzQXBwcm92ZWQgPSB7fTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAhQ29uc3RydWN0b3IucHJvdG90eXBlLnJlbmRlciA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdjcmVhdGVDbGFzcyguLi4pOiBDbGFzcyBzcGVjaWZpY2F0aW9uIG11c3QgaW1wbGVtZW50IGEgYHJlbmRlcmAgbWV0aG9kLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbXBvbmVudFNob3VsZFVwZGF0ZSwgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnRTaG91bGRVcGRhdGUoKS4gRGlkIHlvdSBtZWFuIHNob3VsZENvbXBvbmVudFVwZGF0ZSgpPyAnICsgJ1RoZSBuYW1lIGlzIHBocmFzZWQgYXMgYSBxdWVzdGlvbiBiZWNhdXNlIHRoZSBmdW5jdGlvbiBpcyAnICsgJ2V4cGVjdGVkIHRvIHJldHVybiBhIHZhbHVlLicsIHNwZWMuZGlzcGxheU5hbWUgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghQ29uc3RydWN0b3IucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcygpLiBEaWQgeW91IG1lYW4gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygpPycsIHNwZWMuZGlzcGxheU5hbWUgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gUmVkdWNlIHRpbWUgc3BlbnQgZG9pbmcgbG9va3VwcyBieSBzZXR0aW5nIHRoZXNlIG9uIHRoZSBwcm90b3R5cGUuXG4gICAgZm9yICh2YXIgbWV0aG9kTmFtZSBpbiBSZWFjdENsYXNzSW50ZXJmYWNlKSB7XG4gICAgICBpZiAoIUNvbnN0cnVjdG9yLnByb3RvdHlwZVttZXRob2ROYW1lXSkge1xuICAgICAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfSxcblxuICBpbmplY3Rpb246IHtcbiAgICBpbmplY3RNaXhpbjogZnVuY3Rpb24gKG1peGluKSB7XG4gICAgICBpbmplY3RlZE1peGlucy5wdXNoKG1peGluKTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENsYXNzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvbmVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdE5vb3BVcGRhdGVRdWV1ZScpO1xuXG52YXIgY2FuRGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL2NhbkRlZmluZVByb3BlcnR5Jyk7XG52YXIgZW1wdHlPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eU9iamVjdCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogQmFzZSBjbGFzcyBoZWxwZXJzIGZvciB0aGUgdXBkYXRpbmcgc3RhdGUgb2YgYSBjb21wb25lbnQuXG4gKi9cbmZ1bmN0aW9uIFJlYWN0Q29tcG9uZW50KHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7XG4gIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7XG4gIC8vIFdlIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgdXBkYXRlciBidXQgdGhlIHJlYWwgb25lIGdldHMgaW5qZWN0ZWQgYnkgdGhlXG4gIC8vIHJlbmRlcmVyLlxuICB0aGlzLnVwZGF0ZXIgPSB1cGRhdGVyIHx8IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlO1xufVxuXG5SZWFjdENvbXBvbmVudC5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCA9IHt9O1xuXG4vKipcbiAqIFNldHMgYSBzdWJzZXQgb2YgdGhlIHN0YXRlLiBBbHdheXMgdXNlIHRoaXMgdG8gbXV0YXRlXG4gKiBzdGF0ZS4gWW91IHNob3VsZCB0cmVhdCBgdGhpcy5zdGF0ZWAgYXMgaW1tdXRhYmxlLlxuICpcbiAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGB0aGlzLnN0YXRlYCB3aWxsIGJlIGltbWVkaWF0ZWx5IHVwZGF0ZWQsIHNvXG4gKiBhY2Nlc3NpbmcgYHRoaXMuc3RhdGVgIGFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QgbWF5IHJldHVybiB0aGUgb2xkIHZhbHVlLlxuICpcbiAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGNhbGxzIHRvIGBzZXRTdGF0ZWAgd2lsbCBydW4gc3luY2hyb25vdXNseSxcbiAqIGFzIHRoZXkgbWF5IGV2ZW50dWFsbHkgYmUgYmF0Y2hlZCB0b2dldGhlci4gIFlvdSBjYW4gcHJvdmlkZSBhbiBvcHRpb25hbFxuICogY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGNhbGwgdG8gc2V0U3RhdGUgaXMgYWN0dWFsbHlcbiAqIGNvbXBsZXRlZC5cbiAqXG4gKiBXaGVuIGEgZnVuY3Rpb24gaXMgcHJvdmlkZWQgdG8gc2V0U3RhdGUsIGl0IHdpbGwgYmUgY2FsbGVkIGF0IHNvbWUgcG9pbnQgaW5cbiAqIHRoZSBmdXR1cmUgKG5vdCBzeW5jaHJvbm91c2x5KS4gSXQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgdXAgdG8gZGF0ZVxuICogY29tcG9uZW50IGFyZ3VtZW50cyAoc3RhdGUsIHByb3BzLCBjb250ZXh0KS4gVGhlc2UgdmFsdWVzIGNhbiBiZSBkaWZmZXJlbnRcbiAqIGZyb20gdGhpcy4qIGJlY2F1c2UgeW91ciBmdW5jdGlvbiBtYXkgYmUgY2FsbGVkIGFmdGVyIHJlY2VpdmVQcm9wcyBidXQgYmVmb3JlXG4gKiBzaG91bGRDb21wb25lbnRVcGRhdGUsIGFuZCB0aGlzIG5ldyBzdGF0ZSwgcHJvcHMsIGFuZCBjb250ZXh0IHdpbGwgbm90IHlldCBiZVxuICogYXNzaWduZWQgdG8gdGhpcy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdHxmdW5jdGlvbn0gcGFydGlhbFN0YXRlIE5leHQgcGFydGlhbCBzdGF0ZSBvciBmdW5jdGlvbiB0b1xuICogICAgICAgIHByb2R1Y2UgbmV4dCBwYXJ0aWFsIHN0YXRlIHRvIGJlIG1lcmdlZCB3aXRoIGN1cnJlbnQgc3RhdGUuXG4gKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHN0YXRlIGlzIHVwZGF0ZWQuXG4gKiBAZmluYWxcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuUmVhY3RDb21wb25lbnQucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHBhcnRpYWxTdGF0ZSwgY2FsbGJhY2spIHtcbiAgISh0eXBlb2YgcGFydGlhbFN0YXRlID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgcGFydGlhbFN0YXRlID09PSAnZnVuY3Rpb24nIHx8IHBhcnRpYWxTdGF0ZSA9PSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdzZXRTdGF0ZSguLi4pOiB0YWtlcyBhbiBvYmplY3Qgb2Ygc3RhdGUgdmFyaWFibGVzIHRvIHVwZGF0ZSBvciBhICcgKyAnZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhbiBvYmplY3Qgb2Ygc3RhdGUgdmFyaWFibGVzLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwYXJ0aWFsU3RhdGUgIT0gbnVsbCwgJ3NldFN0YXRlKC4uLik6IFlvdSBwYXNzZWQgYW4gdW5kZWZpbmVkIG9yIG51bGwgc3RhdGUgb2JqZWN0OyAnICsgJ2luc3RlYWQsIHVzZSBmb3JjZVVwZGF0ZSgpLicpIDogdW5kZWZpbmVkO1xuICB9XG4gIHRoaXMudXBkYXRlci5lbnF1ZXVlU2V0U3RhdGUodGhpcywgcGFydGlhbFN0YXRlKTtcbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgdGhpcy51cGRhdGVyLmVucXVldWVDYWxsYmFjayh0aGlzLCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbi8qKlxuICogRm9yY2VzIGFuIHVwZGF0ZS4gVGhpcyBzaG91bGQgb25seSBiZSBpbnZva2VkIHdoZW4gaXQgaXMga25vd24gd2l0aFxuICogY2VydGFpbnR5IHRoYXQgd2UgYXJlICoqbm90KiogaW4gYSBET00gdHJhbnNhY3Rpb24uXG4gKlxuICogWW91IG1heSB3YW50IHRvIGNhbGwgdGhpcyB3aGVuIHlvdSBrbm93IHRoYXQgc29tZSBkZWVwZXIgYXNwZWN0IG9mIHRoZVxuICogY29tcG9uZW50J3Mgc3RhdGUgaGFzIGNoYW5nZWQgYnV0IGBzZXRTdGF0ZWAgd2FzIG5vdCBjYWxsZWQuXG4gKlxuICogVGhpcyB3aWxsIG5vdCBpbnZva2UgYHNob3VsZENvbXBvbmVudFVwZGF0ZWAsIGJ1dCBpdCB3aWxsIGludm9rZVxuICogYGNvbXBvbmVudFdpbGxVcGRhdGVgIGFuZCBgY29tcG9uZW50RGlkVXBkYXRlYC5cbiAqXG4gKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHVwZGF0ZSBpcyBjb21wbGV0ZS5cbiAqIEBmaW5hbFxuICogQHByb3RlY3RlZFxuICovXG5SZWFjdENvbXBvbmVudC5wcm90b3R5cGUuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgdGhpcy51cGRhdGVyLmVucXVldWVGb3JjZVVwZGF0ZSh0aGlzKTtcbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgdGhpcy51cGRhdGVyLmVucXVldWVDYWxsYmFjayh0aGlzLCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbi8qKlxuICogRGVwcmVjYXRlZCBBUElzLiBUaGVzZSBBUElzIHVzZWQgdG8gZXhpc3Qgb24gY2xhc3NpYyBSZWFjdCBjbGFzc2VzIGJ1dCBzaW5jZVxuICogd2Ugd291bGQgbGlrZSB0byBkZXByZWNhdGUgdGhlbSwgd2UncmUgbm90IGdvaW5nIHRvIG1vdmUgdGhlbSBvdmVyIHRvIHRoaXNcbiAqIG1vZGVybiBiYXNlIGNsYXNzLiBJbnN0ZWFkLCB3ZSBkZWZpbmUgYSBnZXR0ZXIgdGhhdCB3YXJucyBpZiBpdCdzIGFjY2Vzc2VkLlxuICovXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICB2YXIgZGVwcmVjYXRlZEFQSXMgPSB7XG4gICAgZ2V0RE9NTm9kZTogWydnZXRET01Ob2RlJywgJ1VzZSBSZWFjdERPTS5maW5kRE9NTm9kZShjb21wb25lbnQpIGluc3RlYWQuJ10sXG4gICAgaXNNb3VudGVkOiBbJ2lzTW91bnRlZCcsICdJbnN0ZWFkLCBtYWtlIHN1cmUgdG8gY2xlYW4gdXAgc3Vic2NyaXB0aW9ucyBhbmQgcGVuZGluZyByZXF1ZXN0cyBpbiAnICsgJ2NvbXBvbmVudFdpbGxVbm1vdW50IHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzLiddLFxuICAgIHJlcGxhY2VQcm9wczogWydyZXBsYWNlUHJvcHMnLCAnSW5zdGVhZCwgY2FsbCByZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4nXSxcbiAgICByZXBsYWNlU3RhdGU6IFsncmVwbGFjZVN0YXRlJywgJ1JlZmFjdG9yIHlvdXIgY29kZSB0byB1c2Ugc2V0U3RhdGUgaW5zdGVhZCAoc2VlICcgKyAnaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8zMjM2KS4nXSxcbiAgICBzZXRQcm9wczogWydzZXRQcm9wcycsICdJbnN0ZWFkLCBjYWxsIHJlbmRlciBhZ2FpbiBhdCB0aGUgdG9wIGxldmVsLiddXG4gIH07XG4gIHZhciBkZWZpbmVEZXByZWNhdGlvbldhcm5pbmcgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgaW5mbykge1xuICAgIGlmIChjYW5EZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWN0Q29tcG9uZW50LnByb3RvdHlwZSwgbWV0aG9kTmFtZSwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJyVzKC4uLikgaXMgZGVwcmVjYXRlZCBpbiBwbGFpbiBKYXZhU2NyaXB0IFJlYWN0IGNsYXNzZXMuICVzJywgaW5mb1swXSwgaW5mb1sxXSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBmb3IgKHZhciBmbk5hbWUgaW4gZGVwcmVjYXRlZEFQSXMpIHtcbiAgICBpZiAoZGVwcmVjYXRlZEFQSXMuaGFzT3duUHJvcGVydHkoZm5OYW1lKSkge1xuICAgICAgZGVmaW5lRGVwcmVjYXRpb25XYXJuaW5nKGZuTmFtZSwgZGVwcmVjYXRlZEFQSXNbZm5OYW1lXSk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDb21wb25lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RET01JRE9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0RE9NSURPcGVyYXRpb25zJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xuXG4vKipcbiAqIEFic3RyYWN0cyBhd2F5IGFsbCBmdW5jdGlvbmFsaXR5IG9mIHRoZSByZWNvbmNpbGVyIHRoYXQgcmVxdWlyZXMga25vd2xlZGdlIG9mXG4gKiB0aGUgYnJvd3NlciBjb250ZXh0LiBUT0RPOiBUaGVzZSBjYWxsZXJzIHNob3VsZCBiZSByZWZhY3RvcmVkIHRvIGF2b2lkIHRoZVxuICogbmVlZCBmb3IgdGhpcyBpbmplY3Rpb24uXG4gKi9cbnZhciBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCA9IHtcblxuICBwcm9jZXNzQ2hpbGRyZW5VcGRhdGVzOiBSZWFjdERPTUlET3BlcmF0aW9ucy5kYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXMsXG5cbiAgcmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDogUmVhY3RET01JRE9wZXJhdGlvbnMuZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlELFxuXG4gIC8qKlxuICAgKiBJZiBhIHBhcnRpY3VsYXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgdGhhdCBzb21lIHJlc291cmNlcyBiZSBjbGVhbmVkIHVwLFxuICAgKiBzcGVjaWZ5IHRoaXMgaW4gdGhlIGluamVjdGVkIE1peGluLiBJbiB0aGUgRE9NLCB3ZSB3b3VsZCBsaWtlbHkgd2FudCB0b1xuICAgKiBwdXJnZSBhbnkgY2FjaGVkIG5vZGUgSUQgbG9va3Vwcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVubW91bnRJREZyb21FbnZpcm9ubWVudDogZnVuY3Rpb24gKHJvb3ROb2RlSUQpIHtcbiAgICBSZWFjdE1vdW50LnB1cmdlSUQocm9vdE5vZGVJRCk7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgaW5qZWN0ZWQgPSBmYWxzZTtcblxudmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSB7XG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsbHkgaW5qZWN0YWJsZSBlbnZpcm9ubWVudCBkZXBlbmRlbnQgY2xlYW51cCBob29rLiAoc2VydmVyIHZzLlxuICAgKiBicm93c2VyIGV0YykuIEV4YW1wbGU6IEEgYnJvd3NlciBzeXN0ZW0gY2FjaGVzIERPTSBub2RlcyBiYXNlZCBvbiBjb21wb25lbnRcbiAgICogSUQgYW5kIG11c3QgcmVtb3ZlIHRoYXQgY2FjaGUgZW50cnkgd2hlbiB0aGlzIGluc3RhbmNlIGlzIHVubW91bnRlZC5cbiAgICovXG4gIHVubW91bnRJREZyb21FbnZpcm9ubWVudDogbnVsbCxcblxuICAvKipcbiAgICogT3B0aW9uYWxseSBpbmplY3RhYmxlIGhvb2sgZm9yIHN3YXBwaW5nIG91dCBtb3VudCBpbWFnZXMgaW4gdGhlIG1pZGRsZSBvZlxuICAgKiB0aGUgdHJlZS5cbiAgICovXG4gIHJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQ6IG51bGwsXG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsbHkgaW5qZWN0YWJsZSBob29rIGZvciBwcm9jZXNzaW5nIGEgcXVldWUgb2YgY2hpbGQgdXBkYXRlcy4gV2lsbFxuICAgKiBsYXRlciBtb3ZlIGludG8gTXVsdGlDaGlsZENvbXBvbmVudHMuXG4gICAqL1xuICBwcm9jZXNzQ2hpbGRyZW5VcGRhdGVzOiBudWxsLFxuXG4gIGluamVjdGlvbjoge1xuICAgIGluamVjdEVudmlyb25tZW50OiBmdW5jdGlvbiAoZW52aXJvbm1lbnQpIHtcbiAgICAgICEhaW5qZWN0ZWQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQ6IGluamVjdEVudmlyb25tZW50KCkgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC51bm1vdW50SURGcm9tRW52aXJvbm1lbnQgPSBlbnZpcm9ubWVudC51bm1vdW50SURGcm9tRW52aXJvbm1lbnQ7XG4gICAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQgPSBlbnZpcm9ubWVudC5yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEO1xuICAgICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5wcm9jZXNzQ2hpbGRyZW5VcGRhdGVzID0gZW52aXJvbm1lbnQucHJvY2Vzc0NoaWxkcmVuVXBkYXRlcztcbiAgICAgIGluamVjdGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENvbXBvbmVudEVudmlyb25tZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0SW5zdGFuY2VNYXAgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VNYXAnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMnKTtcbnZhciBSZWFjdFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0UmVjb25jaWxlcicpO1xudmFyIFJlYWN0VXBkYXRlUXVldWUgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlUXVldWUnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5T2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlPYmplY3QnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSB7XG4gIHZhciBvd25lciA9IGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQuX293bmVyIHx8IG51bGw7XG4gIGlmIChvd25lcikge1xuICAgIHZhciBuYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuICAgIGlmIChuYW1lKSB7XG4gICAgICByZXR1cm4gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbmZ1bmN0aW9uIFN0YXRlbGVzc0NvbXBvbmVudChDb21wb25lbnQpIHt9XG5TdGF0ZWxlc3NDb21wb25lbnQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIENvbXBvbmVudCA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KHRoaXMpLl9jdXJyZW50RWxlbWVudC50eXBlO1xuICByZXR1cm4gQ29tcG9uZW50KHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCwgdGhpcy51cGRhdGVyKTtcbn07XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tIFRoZSBMaWZlLUN5Y2xlIG9mIGEgQ29tcG9zaXRlIENvbXBvbmVudCAtLS0tLS0tLS0tLS0tLS0tLS1cbiAqXG4gKiAtIGNvbnN0cnVjdG9yOiBJbml0aWFsaXphdGlvbiBvZiBzdGF0ZS4gVGhlIGluc3RhbmNlIGlzIG5vdyByZXRhaW5lZC5cbiAqICAgLSBjb21wb25lbnRXaWxsTW91bnRcbiAqICAgLSByZW5kZXJcbiAqICAgLSBbY2hpbGRyZW4ncyBjb25zdHJ1Y3RvcnNdXG4gKiAgICAgLSBbY2hpbGRyZW4ncyBjb21wb25lbnRXaWxsTW91bnQgYW5kIHJlbmRlcl1cbiAqICAgICAtIFtjaGlsZHJlbidzIGNvbXBvbmVudERpZE1vdW50XVxuICogICAgIC0gY29tcG9uZW50RGlkTW91bnRcbiAqXG4gKiAgICAgICBVcGRhdGUgUGhhc2VzOlxuICogICAgICAgLSBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIChvbmx5IGNhbGxlZCBpZiBwYXJlbnQgdXBkYXRlZClcbiAqICAgICAgIC0gc2hvdWxkQ29tcG9uZW50VXBkYXRlXG4gKiAgICAgICAgIC0gY29tcG9uZW50V2lsbFVwZGF0ZVxuICogICAgICAgICAgIC0gcmVuZGVyXG4gKiAgICAgICAgICAgLSBbY2hpbGRyZW4ncyBjb25zdHJ1Y3RvcnMgb3IgcmVjZWl2ZSBwcm9wcyBwaGFzZXNdXG4gKiAgICAgICAgIC0gY29tcG9uZW50RGlkVXBkYXRlXG4gKlxuICogICAgIC0gY29tcG9uZW50V2lsbFVubW91bnRcbiAqICAgICAtIFtjaGlsZHJlbidzIGNvbXBvbmVudFdpbGxVbm1vdW50XVxuICogICAtIFtjaGlsZHJlbiBkZXN0cm95ZWRdXG4gKiAtIChkZXN0cm95ZWQpOiBUaGUgaW5zdGFuY2UgaXMgbm93IGJsYW5rLCByZWxlYXNlZCBieSBSZWFjdCBhbmQgcmVhZHkgZm9yIEdDLlxuICpcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxuLyoqXG4gKiBBbiBpbmNyZW1lbnRpbmcgSUQgYXNzaWduZWQgdG8gZWFjaCBjb21wb25lbnQgd2hlbiBpdCBpcyBtb3VudGVkLiBUaGlzIGlzXG4gKiB1c2VkIHRvIGVuZm9yY2UgdGhlIG9yZGVyIGluIHdoaWNoIGBSZWFjdFVwZGF0ZXNgIHVwZGF0ZXMgZGlydHkgY29tcG9uZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgbmV4dE1vdW50SUQgPSAxO1xuXG4vKipcbiAqIEBsZW5kcyB7UmVhY3RDb21wb3NpdGVDb21wb25lbnQucHJvdG90eXBlfVxuICovXG52YXIgUmVhY3RDb21wb3NpdGVDb21wb25lbnRNaXhpbiA9IHtcblxuICAvKipcbiAgICogQmFzZSBjb25zdHJ1Y3RvciBmb3IgYWxsIGNvbXBvc2l0ZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50XG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IG51bGw7XG4gICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuXG4gICAgLy8gU2VlIFJlYWN0VXBkYXRlUXVldWVcbiAgICB0aGlzLl9wZW5kaW5nRWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy5fcGVuZGluZ1N0YXRlUXVldWUgPSBudWxsO1xuICAgIHRoaXMuX3BlbmRpbmdSZXBsYWNlU3RhdGUgPSBmYWxzZTtcbiAgICB0aGlzLl9wZW5kaW5nRm9yY2VVcGRhdGUgPSBmYWxzZTtcblxuICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcblxuICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xuICAgIHRoaXMuX21vdW50T3JkZXIgPSAwO1xuICAgIHRoaXMuX3RvcExldmVsV3JhcHBlciA9IG51bGw7XG5cbiAgICAvLyBTZWUgUmVhY3RVcGRhdGVzIGFuZCBSZWFjdFVwZGF0ZVF1ZXVlLlxuICAgIHRoaXMuX3BlbmRpbmdDYWxsYmFja3MgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgY29tcG9uZW50LCByZW5kZXJzIG1hcmt1cCwgYW5kIHJlZ2lzdGVycyBldmVudCBsaXN0ZW5lcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgRE9NIElEIG9mIHRoZSByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBSZW5kZXJlZCBtYXJrdXAgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9NLlxuICAgKiBAZmluYWxcbiAgICogQGludGVybmFsXG4gICAqL1xuICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gKHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB0aGlzLl9jb250ZXh0ID0gY29udGV4dDtcbiAgICB0aGlzLl9tb3VudE9yZGVyID0gbmV4dE1vdW50SUQrKztcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gcm9vdElEO1xuXG4gICAgdmFyIHB1YmxpY1Byb3BzID0gdGhpcy5fcHJvY2Vzc1Byb3BzKHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzKTtcbiAgICB2YXIgcHVibGljQ29udGV4dCA9IHRoaXMuX3Byb2Nlc3NDb250ZXh0KGNvbnRleHQpO1xuXG4gICAgdmFyIENvbXBvbmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBwdWJsaWMgY2xhc3NcbiAgICB2YXIgaW5zdDtcbiAgICB2YXIgcmVuZGVyZWRFbGVtZW50O1xuXG4gICAgLy8gVGhpcyBpcyBhIHdheSB0byBkZXRlY3QgaWYgQ29tcG9uZW50IGlzIGEgc3RhdGVsZXNzIGFycm93IGZ1bmN0aW9uXG4gICAgLy8gY29tcG9uZW50LCB3aGljaCBpcyBub3QgbmV3YWJsZS4gSXQgbWlnaHQgbm90IGJlIDEwMCUgcmVsaWFibGUgYnV0IGlzXG4gICAgLy8gc29tZXRoaW5nIHdlIGNhbiBkbyB1bnRpbCB3ZSBzdGFydCBkZXRlY3RpbmcgdGhhdCBDb21wb25lbnQgZXh0ZW5kc1xuICAgIC8vIFJlYWN0LkNvbXBvbmVudC4gV2UgYWxyZWFkeSBhc3N1bWUgdGhhdCB0eXBlb2YgQ29tcG9uZW50ID09PSAnZnVuY3Rpb24nLlxuICAgIHZhciBjYW5JbnN0YW50aWF0ZSA9ICgncHJvdG90eXBlJyBpbiBDb21wb25lbnQpO1xuXG4gICAgaWYgKGNhbkluc3RhbnRpYXRlKSB7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gdGhpcztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpbnN0ID0gbmV3IENvbXBvbmVudChwdWJsaWNQcm9wcywgcHVibGljQ29udGV4dCwgUmVhY3RVcGRhdGVRdWV1ZSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluc3QgPSBuZXcgQ29tcG9uZW50KHB1YmxpY1Byb3BzLCBwdWJsaWNDb250ZXh0LCBSZWFjdFVwZGF0ZVF1ZXVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNhbkluc3RhbnRpYXRlIHx8IGluc3QgPT09IG51bGwgfHwgaW5zdCA9PT0gZmFsc2UgfHwgUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGluc3QpKSB7XG4gICAgICByZW5kZXJlZEVsZW1lbnQgPSBpbnN0O1xuICAgICAgaW5zdCA9IG5ldyBTdGF0ZWxlc3NDb21wb25lbnQoQ29tcG9uZW50KTtcbiAgICB9XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGxhdGVyIGluIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQsIGJ1dCBhZGQgYW4gZWFybHlcbiAgICAgIC8vIHdhcm5pbmcgbm93IHRvIGhlbHAgZGVidWdnaW5nXG4gICAgICBpZiAoaW5zdC5yZW5kZXIgPT0gbnVsbCkge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJyVzKC4uLik6IE5vIGByZW5kZXJgIG1ldGhvZCBmb3VuZCBvbiB0aGUgcmV0dXJuZWQgY29tcG9uZW50ICcgKyAnaW5zdGFuY2U6IHlvdSBtYXkgaGF2ZSBmb3Jnb3R0ZW4gdG8gZGVmaW5lIGByZW5kZXJgLCByZXR1cm5lZCAnICsgJ251bGwvZmFsc2UgZnJvbSBhIHN0YXRlbGVzcyBjb21wb25lbnQsIG9yIHRyaWVkIHRvIHJlbmRlciBhbiAnICsgJ2VsZW1lbnQgd2hvc2UgdHlwZSBpcyBhIGZ1bmN0aW9uIHRoYXQgaXNuXFwndCBhIFJlYWN0IGNvbXBvbmVudC4nLCBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWUgfHwgJ0NvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gV2Ugc3VwcG9ydCBFUzYgaW5oZXJpdGluZyBmcm9tIFJlYWN0LkNvbXBvbmVudCwgdGhlIG1vZHVsZSBwYXR0ZXJuLFxuICAgICAgICAvLyBhbmQgc3RhdGVsZXNzIGNvbXBvbmVudHMsIGJ1dCBub3QgRVM2IGNsYXNzZXMgdGhhdCBkb24ndCBleHRlbmRcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoQ29tcG9uZW50LnByb3RvdHlwZSAmJiBDb21wb25lbnQucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQgfHwgIWNhbkluc3RhbnRpYXRlIHx8ICEoaW5zdCBpbnN0YW5jZW9mIENvbXBvbmVudCksICclcyguLi4pOiBSZWFjdCBjb21wb25lbnQgY2xhc3NlcyBtdXN0IGV4dGVuZCBSZWFjdC5Db21wb25lbnQuJywgQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIHx8ICdDb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUaGVzZSBzaG91bGQgYmUgc2V0IHVwIGluIHRoZSBjb25zdHJ1Y3RvciwgYnV0IGFzIGEgY29udmVuaWVuY2UgZm9yXG4gICAgLy8gc2ltcGxlciBjbGFzcyBhYnN0cmFjdGlvbnMsIHdlIHNldCB0aGVtIHVwIGFmdGVyIHRoZSBmYWN0LlxuICAgIGluc3QucHJvcHMgPSBwdWJsaWNQcm9wcztcbiAgICBpbnN0LmNvbnRleHQgPSBwdWJsaWNDb250ZXh0O1xuICAgIGluc3QucmVmcyA9IGVtcHR5T2JqZWN0O1xuICAgIGluc3QudXBkYXRlciA9IFJlYWN0VXBkYXRlUXVldWU7XG5cbiAgICB0aGlzLl9pbnN0YW5jZSA9IGluc3Q7XG5cbiAgICAvLyBTdG9yZSBhIHJlZmVyZW5jZSBmcm9tIHRoZSBpbnN0YW5jZSBiYWNrIHRvIHRoZSBpbnRlcm5hbCByZXByZXNlbnRhdGlvblxuICAgIFJlYWN0SW5zdGFuY2VNYXAuc2V0KGluc3QsIHRoaXMpO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFNpbmNlIHBsYWluIEpTIGNsYXNzZXMgYXJlIGRlZmluZWQgd2l0aG91dCBhbnkgc3BlY2lhbCBpbml0aWFsaXphdGlvblxuICAgICAgLy8gbG9naWMsIHdlIGNhbiBub3QgY2F0Y2ggY29tbW9uIGVycm9ycyBlYXJseS4gVGhlcmVmb3JlLCB3ZSBoYXZlIHRvXG4gICAgICAvLyBjYXRjaCB0aGVtIGhlcmUsIGF0IGluaXRpYWxpemF0aW9uIHRpbWUsIGluc3RlYWQuXG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaW5zdC5nZXRJbml0aWFsU3RhdGUgfHwgaW5zdC5nZXRJbml0aWFsU3RhdGUuaXNSZWFjdENsYXNzQXBwcm92ZWQsICdnZXRJbml0aWFsU3RhdGUgd2FzIGRlZmluZWQgb24gJXMsIGEgcGxhaW4gSmF2YVNjcmlwdCBjbGFzcy4gJyArICdUaGlzIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBjbGFzc2VzIGNyZWF0ZWQgdXNpbmcgUmVhY3QuY3JlYXRlQ2xhc3MuICcgKyAnRGlkIHlvdSBtZWFuIHRvIGRlZmluZSBhIHN0YXRlIHByb3BlcnR5IGluc3RlYWQ/JywgdGhpcy5nZXROYW1lKCkgfHwgJ2EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaW5zdC5nZXREZWZhdWx0UHJvcHMgfHwgaW5zdC5nZXREZWZhdWx0UHJvcHMuaXNSZWFjdENsYXNzQXBwcm92ZWQsICdnZXREZWZhdWx0UHJvcHMgd2FzIGRlZmluZWQgb24gJXMsIGEgcGxhaW4gSmF2YVNjcmlwdCBjbGFzcy4gJyArICdUaGlzIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBjbGFzc2VzIGNyZWF0ZWQgdXNpbmcgUmVhY3QuY3JlYXRlQ2xhc3MuICcgKyAnVXNlIGEgc3RhdGljIHByb3BlcnR5IHRvIGRlZmluZSBkZWZhdWx0UHJvcHMgaW5zdGVhZC4nLCB0aGlzLmdldE5hbWUoKSB8fCAnYSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFpbnN0LnByb3BUeXBlcywgJ3Byb3BUeXBlcyB3YXMgZGVmaW5lZCBhcyBhbiBpbnN0YW5jZSBwcm9wZXJ0eSBvbiAlcy4gVXNlIGEgc3RhdGljICcgKyAncHJvcGVydHkgdG8gZGVmaW5lIHByb3BUeXBlcyBpbnN0ZWFkLicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdhIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWluc3QuY29udGV4dFR5cGVzLCAnY29udGV4dFR5cGVzIHdhcyBkZWZpbmVkIGFzIGFuIGluc3RhbmNlIHByb3BlcnR5IG9uICVzLiBVc2UgYSAnICsgJ3N0YXRpYyBwcm9wZXJ0eSB0byBkZWZpbmUgY29udGV4dFR5cGVzIGluc3RlYWQuJywgdGhpcy5nZXROYW1lKCkgfHwgJ2EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgaW5zdC5jb21wb25lbnRTaG91bGRVcGRhdGUgIT09ICdmdW5jdGlvbicsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50U2hvdWxkVXBkYXRlKCkuIERpZCB5b3UgbWVhbiBzaG91bGRDb21wb25lbnRVcGRhdGUoKT8gJyArICdUaGUgbmFtZSBpcyBwaHJhc2VkIGFzIGEgcXVlc3Rpb24gYmVjYXVzZSB0aGUgZnVuY3Rpb24gaXMgJyArICdleHBlY3RlZCB0byByZXR1cm4gYSB2YWx1ZS4nLCB0aGlzLmdldE5hbWUoKSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiBpbnN0LmNvbXBvbmVudERpZFVubW91bnQgIT09ICdmdW5jdGlvbicsICclcyBoYXMgYSBtZXRob2QgY2FsbGVkICcgKyAnY29tcG9uZW50RGlkVW5tb3VudCgpLiBCdXQgdGhlcmUgaXMgbm8gc3VjaCBsaWZlY3ljbGUgbWV0aG9kLiAnICsgJ0RpZCB5b3UgbWVhbiBjb21wb25lbnRXaWxsVW5tb3VudCgpPycsIHRoaXMuZ2V0TmFtZSgpIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodHlwZW9mIGluc3QuY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcyAhPT0gJ2Z1bmN0aW9uJywgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzKCkuIERpZCB5b3UgbWVhbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKCk/JywgdGhpcy5nZXROYW1lKCkgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdmFyIGluaXRpYWxTdGF0ZSA9IGluc3Quc3RhdGU7XG4gICAgaWYgKGluaXRpYWxTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpbnN0LnN0YXRlID0gaW5pdGlhbFN0YXRlID0gbnVsbDtcbiAgICB9XG4gICAgISh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShpbml0aWFsU3RhdGUpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5zdGF0ZTogbXVzdCBiZSBzZXQgdG8gYW4gb2JqZWN0IG9yIG51bGwnLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSA9IG51bGw7XG4gICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdGb3JjZVVwZGF0ZSA9IGZhbHNlO1xuXG4gICAgaWYgKGluc3QuY29tcG9uZW50V2lsbE1vdW50KSB7XG4gICAgICBpbnN0LmNvbXBvbmVudFdpbGxNb3VudCgpO1xuICAgICAgLy8gV2hlbiBtb3VudGluZywgY2FsbHMgdG8gYHNldFN0YXRlYCBieSBgY29tcG9uZW50V2lsbE1vdW50YCB3aWxsIHNldFxuICAgICAgLy8gYHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlYCB3aXRob3V0IHRyaWdnZXJpbmcgYSByZS1yZW5kZXIuXG4gICAgICBpZiAodGhpcy5fcGVuZGluZ1N0YXRlUXVldWUpIHtcbiAgICAgICAgaW5zdC5zdGF0ZSA9IHRoaXMuX3Byb2Nlc3NQZW5kaW5nU3RhdGUoaW5zdC5wcm9wcywgaW5zdC5jb250ZXh0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBub3QgYSBzdGF0ZWxlc3MgY29tcG9uZW50LCB3ZSBub3cgcmVuZGVyXG4gICAgaWYgKHJlbmRlcmVkRWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZW5kZXJlZEVsZW1lbnQgPSB0aGlzLl9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZW5kZXJlZENvbXBvbmVudCA9IHRoaXMuX2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQocmVuZGVyZWRFbGVtZW50KTtcblxuICAgIHZhciBtYXJrdXAgPSBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIHRoaXMuX3Byb2Nlc3NDaGlsZENvbnRleHQoY29udGV4dCkpO1xuICAgIGlmIChpbnN0LmNvbXBvbmVudERpZE1vdW50KSB7XG4gICAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKGluc3QuY29tcG9uZW50RGlkTW91bnQsIGluc3QpO1xuICAgIH1cblxuICAgIHJldHVybiBtYXJrdXA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbGVhc2VzIGFueSByZXNvdXJjZXMgYWxsb2NhdGVkIGJ5IGBtb3VudENvbXBvbmVudGAuXG4gICAqXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuXG4gICAgaWYgKGluc3QuY29tcG9uZW50V2lsbFVubW91bnQpIHtcbiAgICAgIGluc3QuY29tcG9uZW50V2lsbFVubW91bnQoKTtcbiAgICB9XG5cbiAgICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudCh0aGlzLl9yZW5kZXJlZENvbXBvbmVudCk7XG4gICAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSBudWxsO1xuICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcblxuICAgIC8vIFJlc2V0IHBlbmRpbmcgZmllbGRzXG4gICAgLy8gRXZlbiBpZiB0aGlzIGNvbXBvbmVudCBpcyBzY2hlZHVsZWQgZm9yIGFub3RoZXIgdXBkYXRlIGluIFJlYWN0VXBkYXRlcyxcbiAgICAvLyBpdCB3b3VsZCBzdGlsbCBiZSBpZ25vcmVkIGJlY2F1c2UgdGhlc2UgZmllbGRzIGFyZSByZXNldC5cbiAgICB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSA9IG51bGw7XG4gICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdGb3JjZVVwZGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdDYWxsYmFja3MgPSBudWxsO1xuICAgIHRoaXMuX3BlbmRpbmdFbGVtZW50ID0gbnVsbDtcblxuICAgIC8vIFRoZXNlIGZpZWxkcyBkbyBub3QgcmVhbGx5IG5lZWQgdG8gYmUgcmVzZXQgc2luY2UgdGhpcyBvYmplY3QgaXMgbm9cbiAgICAvLyBsb25nZXIgYWNjZXNzaWJsZS5cbiAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgICB0aGlzLl90b3BMZXZlbFdyYXBwZXIgPSBudWxsO1xuXG4gICAgLy8gRGVsZXRlIHRoZSByZWZlcmVuY2UgZnJvbSB0aGUgaW5zdGFuY2UgdG8gdGhpcyBpbnRlcm5hbCByZXByZXNlbnRhdGlvblxuICAgIC8vIHdoaWNoIGFsbG93IHRoZSBpbnRlcm5hbHMgdG8gYmUgcHJvcGVybHkgY2xlYW5lZCB1cCBldmVuIGlmIHRoZSB1c2VyXG4gICAgLy8gbGVha3MgYSByZWZlcmVuY2UgdG8gdGhlIHB1YmxpYyBpbnN0YW5jZS5cbiAgICBSZWFjdEluc3RhbmNlTWFwLnJlbW92ZShpbnN0KTtcblxuICAgIC8vIFNvbWUgZXhpc3RpbmcgY29tcG9uZW50cyByZWx5IG9uIGluc3QucHJvcHMgZXZlbiBhZnRlciB0aGV5J3ZlIGJlZW5cbiAgICAvLyBkZXN0cm95ZWQgKGluIGV2ZW50IGhhbmRsZXJzKS5cbiAgICAvLyBUT0RPOiBpbnN0LnByb3BzID0gbnVsbDtcbiAgICAvLyBUT0RPOiBpbnN0LnN0YXRlID0gbnVsbDtcbiAgICAvLyBUT0RPOiBpbnN0LmNvbnRleHQgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGaWx0ZXJzIHRoZSBjb250ZXh0IG9iamVjdCB0byBvbmx5IGNvbnRhaW4ga2V5cyBzcGVjaWZpZWQgaW5cbiAgICogYGNvbnRleHRUeXBlc2BcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICogQHJldHVybiB7P29iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9tYXNrQ29udGV4dDogZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICB2YXIgbWFza2VkQ29udGV4dCA9IG51bGw7XG4gICAgdmFyIENvbXBvbmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG4gICAgdmFyIGNvbnRleHRUeXBlcyA9IENvbXBvbmVudC5jb250ZXh0VHlwZXM7XG4gICAgaWYgKCFjb250ZXh0VHlwZXMpIHtcbiAgICAgIHJldHVybiBlbXB0eU9iamVjdDtcbiAgICB9XG4gICAgbWFza2VkQ29udGV4dCA9IHt9O1xuICAgIGZvciAodmFyIGNvbnRleHROYW1lIGluIGNvbnRleHRUeXBlcykge1xuICAgICAgbWFza2VkQ29udGV4dFtjb250ZXh0TmFtZV0gPSBjb250ZXh0W2NvbnRleHROYW1lXTtcbiAgICB9XG4gICAgcmV0dXJuIG1hc2tlZENvbnRleHQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbHRlcnMgdGhlIGNvbnRleHQgb2JqZWN0IHRvIG9ubHkgY29udGFpbiBrZXlzIHNwZWNpZmllZCBpblxuICAgKiBgY29udGV4dFR5cGVzYCwgYW5kIGFzc2VydHMgdGhhdCB0aGV5IGFyZSB2YWxpZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICogQHJldHVybiB7P29iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9wcm9jZXNzQ29udGV4dDogZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICB2YXIgbWFza2VkQ29udGV4dCA9IHRoaXMuX21hc2tDb250ZXh0KGNvbnRleHQpO1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgQ29tcG9uZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcbiAgICAgIGlmIChDb21wb25lbnQuY29udGV4dFR5cGVzKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrUHJvcFR5cGVzKENvbXBvbmVudC5jb250ZXh0VHlwZXMsIG1hc2tlZENvbnRleHQsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMuY29udGV4dCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXNrZWRDb250ZXh0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY3VycmVudENvbnRleHRcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Byb2Nlc3NDaGlsZENvbnRleHQ6IGZ1bmN0aW9uIChjdXJyZW50Q29udGV4dCkge1xuICAgIHZhciBDb21wb25lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG4gICAgdmFyIGNoaWxkQ29udGV4dCA9IGluc3QuZ2V0Q2hpbGRDb250ZXh0ICYmIGluc3QuZ2V0Q2hpbGRDb250ZXh0KCk7XG4gICAgaWYgKGNoaWxkQ29udGV4dCkge1xuICAgICAgISh0eXBlb2YgQ29tcG9uZW50LmNoaWxkQ29udGV4dFR5cGVzID09PSAnb2JqZWN0JykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMuZ2V0Q2hpbGRDb250ZXh0KCk6IGNoaWxkQ29udGV4dFR5cGVzIG11c3QgYmUgZGVmaW5lZCBpbiBvcmRlciB0byAnICsgJ3VzZSBnZXRDaGlsZENvbnRleHQoKS4nLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB0aGlzLl9jaGVja1Byb3BUeXBlcyhDb21wb25lbnQuY2hpbGRDb250ZXh0VHlwZXMsIGNoaWxkQ29udGV4dCwgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5jaGlsZENvbnRleHQpO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgbmFtZSBpbiBjaGlsZENvbnRleHQpIHtcbiAgICAgICAgIShuYW1lIGluIENvbXBvbmVudC5jaGlsZENvbnRleHRUeXBlcykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMuZ2V0Q2hpbGRDb250ZXh0KCk6IGtleSBcIiVzXCIgaXMgbm90IGRlZmluZWQgaW4gY2hpbGRDb250ZXh0VHlwZXMuJywgdGhpcy5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JywgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFzc2lnbih7fSwgY3VycmVudENvbnRleHQsIGNoaWxkQ29udGV4dCk7XG4gICAgfVxuICAgIHJldHVybiBjdXJyZW50Q29udGV4dDtcbiAgfSxcblxuICAvKipcbiAgICogUHJvY2Vzc2VzIHByb3BzIGJ5IHNldHRpbmcgZGVmYXVsdCB2YWx1ZXMgZm9yIHVuc3BlY2lmaWVkIHByb3BzIGFuZFxuICAgKiBhc3NlcnRpbmcgdGhhdCB0aGUgcHJvcHMgYXJlIHZhbGlkLiBEb2VzIG5vdCBtdXRhdGUgaXRzIGFyZ3VtZW50OyByZXR1cm5zXG4gICAqIGEgbmV3IHByb3BzIG9iamVjdCB3aXRoIGRlZmF1bHRzIG1lcmdlZCBpbi5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG5ld1Byb3BzXG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9wcm9jZXNzUHJvcHM6IGZ1bmN0aW9uIChuZXdQcm9wcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgQ29tcG9uZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcbiAgICAgIGlmIChDb21wb25lbnQucHJvcFR5cGVzKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrUHJvcFR5cGVzKENvbXBvbmVudC5wcm9wVHlwZXMsIG5ld1Byb3BzLCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLnByb3ApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3UHJvcHM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFzc2VydCB0aGF0IHRoZSBwcm9wcyBhcmUgdmFsaWRcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHByb3BUeXBlcyBNYXAgb2YgcHJvcCBuYW1lIHRvIGEgUmVhY3RQcm9wVHlwZVxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uIGUuZy4gXCJwcm9wXCIsIFwiY29udGV4dFwiLCBcImNoaWxkIGNvbnRleHRcIlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NoZWNrUHJvcFR5cGVzOiBmdW5jdGlvbiAocHJvcFR5cGVzLCBwcm9wcywgbG9jYXRpb24pIHtcbiAgICAvLyBUT0RPOiBTdG9wIHZhbGlkYXRpbmcgcHJvcCB0eXBlcyBoZXJlIGFuZCBvbmx5IHVzZSB0aGUgZWxlbWVudFxuICAgIC8vIHZhbGlkYXRpb24uXG4gICAgdmFyIGNvbXBvbmVudE5hbWUgPSB0aGlzLmdldE5hbWUoKTtcbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBwcm9wVHlwZXMpIHtcbiAgICAgIGlmIChwcm9wVHlwZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHZhciBlcnJvcjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgYW4gaW52YXJpYW50IHRoYXQgZ2V0cyBjYXVnaHQuIEl0J3MgdGhlIHNhbWVcbiAgICAgICAgICAvLyBiZWhhdmlvciBhcyB3aXRob3V0IHRoaXMgc3RhdGVtZW50IGV4Y2VwdCB3aXRoIGEgYmV0dGVyIG1lc3NhZ2UuXG4gICAgICAgICAgISh0eXBlb2YgcHJvcFR5cGVzW3Byb3BOYW1lXSA9PT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXM6ICVzIHR5cGUgYCVzYCBpcyBpbnZhbGlkOyBpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgJyArICdmcm9tIFJlYWN0LlByb3BUeXBlcy4nLCBjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICBlcnJvciA9IHByb3BUeXBlc1twcm9wTmFtZV0ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbik7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgZXJyb3IgPSBleDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIC8vIFdlIG1heSB3YW50IHRvIGV4dGVuZCB0aGlzIGxvZ2ljIGZvciBzaW1pbGFyIGVycm9ycyBpblxuICAgICAgICAgIC8vIHRvcC1sZXZlbCByZW5kZXIgY2FsbHMsIHNvIEknbSBhYnN0cmFjdGluZyBpdCBhd2F5IGludG9cbiAgICAgICAgICAvLyBhIGZ1bmN0aW9uIHRvIG1pbmltaXplIHJlZmFjdG9yaW5nIGluIHRoZSBmdXR1cmVcbiAgICAgICAgICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0odGhpcyk7XG5cbiAgICAgICAgICBpZiAobG9jYXRpb24gPT09IFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCkge1xuICAgICAgICAgICAgLy8gUHJlZmFjZSBnaXZlcyB1cyBzb21ldGhpbmcgdG8gYmxhY2tsaXN0IGluIHdhcm5pbmcgbW9kdWxlXG4gICAgICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ0ZhaWxlZCBDb21wb3NpdGUgcHJvcFR5cGU6ICVzJXMnLCBlcnJvci5tZXNzYWdlLCBhZGRlbmR1bSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFpbGVkIENvbnRleHQgVHlwZXM6ICVzJXMnLCBlcnJvci5tZXNzYWdlLCBhZGRlbmR1bSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHJlY2VpdmVDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0RWxlbWVudCwgdHJhbnNhY3Rpb24sIG5leHRDb250ZXh0KSB7XG4gICAgdmFyIHByZXZFbGVtZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQ7XG4gICAgdmFyIHByZXZDb250ZXh0ID0gdGhpcy5fY29udGV4dDtcblxuICAgIHRoaXMuX3BlbmRpbmdFbGVtZW50ID0gbnVsbDtcblxuICAgIHRoaXMudXBkYXRlQ29tcG9uZW50KHRyYW5zYWN0aW9uLCBwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQsIHByZXZDb250ZXh0LCBuZXh0Q29udGV4dCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIElmIGFueSBvZiBgX3BlbmRpbmdFbGVtZW50YCwgYF9wZW5kaW5nU3RhdGVRdWV1ZWAsIG9yIGBfcGVuZGluZ0ZvcmNlVXBkYXRlYFxuICAgKiBpcyBzZXQsIHVwZGF0ZSB0aGUgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5OiBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcbiAgICBpZiAodGhpcy5fcGVuZGluZ0VsZW1lbnQgIT0gbnVsbCkge1xuICAgICAgUmVhY3RSZWNvbmNpbGVyLnJlY2VpdmVDb21wb25lbnQodGhpcywgdGhpcy5fcGVuZGluZ0VsZW1lbnQgfHwgdGhpcy5fY3VycmVudEVsZW1lbnQsIHRyYW5zYWN0aW9uLCB0aGlzLl9jb250ZXh0KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcGVuZGluZ1N0YXRlUXVldWUgIT09IG51bGwgfHwgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlKSB7XG4gICAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudCh0cmFuc2FjdGlvbiwgdGhpcy5fY3VycmVudEVsZW1lbnQsIHRoaXMuX2N1cnJlbnRFbGVtZW50LCB0aGlzLl9jb250ZXh0LCB0aGlzLl9jb250ZXh0KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYW4gdXBkYXRlIHRvIGEgbW91bnRlZCBjb21wb25lbnQuIFRoZSBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIGFuZFxuICAgKiBzaG91bGRDb21wb25lbnRVcGRhdGUgbWV0aG9kcyBhcmUgY2FsbGVkLCB0aGVuIChhc3N1bWluZyB0aGUgdXBkYXRlIGlzbid0XG4gICAqIHNraXBwZWQpIHRoZSByZW1haW5pbmcgdXBkYXRlIGxpZmVjeWNsZSBtZXRob2RzIGFyZSBjYWxsZWQgYW5kIHRoZSBET01cbiAgICogcmVwcmVzZW50YXRpb24gaXMgdXBkYXRlZC5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhpcyBpbXBsZW1lbnRzIFJlYWN0J3MgcmVuZGVyaW5nIGFuZCByZWNvbmNpbGlhdGlvbiBhbGdvcml0aG0uXG4gICAqIFNvcGhpc3RpY2F0ZWQgY2xpZW50cyBtYXkgd2lzaCB0byBvdmVycmlkZSB0aGlzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBwcmV2UGFyZW50RWxlbWVudFxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dFBhcmVudEVsZW1lbnRcbiAgICogQGludGVybmFsXG4gICAqIEBvdmVycmlkYWJsZVxuICAgKi9cbiAgdXBkYXRlQ29tcG9uZW50OiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHByZXZQYXJlbnRFbGVtZW50LCBuZXh0UGFyZW50RWxlbWVudCwgcHJldlVubWFza2VkQ29udGV4dCwgbmV4dFVubWFza2VkQ29udGV4dCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG5cbiAgICB2YXIgbmV4dENvbnRleHQgPSB0aGlzLl9jb250ZXh0ID09PSBuZXh0VW5tYXNrZWRDb250ZXh0ID8gaW5zdC5jb250ZXh0IDogdGhpcy5fcHJvY2Vzc0NvbnRleHQobmV4dFVubWFza2VkQ29udGV4dCk7XG4gICAgdmFyIG5leHRQcm9wcztcblxuICAgIC8vIERpc3Rpbmd1aXNoIGJldHdlZW4gYSBwcm9wcyB1cGRhdGUgdmVyc3VzIGEgc2ltcGxlIHN0YXRlIHVwZGF0ZVxuICAgIGlmIChwcmV2UGFyZW50RWxlbWVudCA9PT0gbmV4dFBhcmVudEVsZW1lbnQpIHtcbiAgICAgIC8vIFNraXAgY2hlY2tpbmcgcHJvcCB0eXBlcyBhZ2FpbiAtLSB3ZSBkb24ndCByZWFkIGluc3QucHJvcHMgdG8gYXZvaWRcbiAgICAgIC8vIHdhcm5pbmcgZm9yIERPTSBjb21wb25lbnQgcHJvcHMgaW4gdGhpcyB1cGdyYWRlXG4gICAgICBuZXh0UHJvcHMgPSBuZXh0UGFyZW50RWxlbWVudC5wcm9wcztcbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dFByb3BzID0gdGhpcy5fcHJvY2Vzc1Byb3BzKG5leHRQYXJlbnRFbGVtZW50LnByb3BzKTtcbiAgICAgIC8vIEFuIHVwZGF0ZSBoZXJlIHdpbGwgc2NoZWR1bGUgYW4gdXBkYXRlIGJ1dCBpbW1lZGlhdGVseSBzZXRcbiAgICAgIC8vIF9wZW5kaW5nU3RhdGVRdWV1ZSB3aGljaCB3aWxsIGVuc3VyZSB0aGF0IGFueSBzdGF0ZSB1cGRhdGVzIGdldHNcbiAgICAgIC8vIGltbWVkaWF0ZWx5IHJlY29uY2lsZWQgaW5zdGVhZCBvZiB3YWl0aW5nIGZvciB0aGUgbmV4dCBiYXRjaC5cblxuICAgICAgaWYgKGluc3QuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcykge1xuICAgICAgICBpbnN0LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzLCBuZXh0Q29udGV4dCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIG5leHRTdGF0ZSA9IHRoaXMuX3Byb2Nlc3NQZW5kaW5nU3RhdGUobmV4dFByb3BzLCBuZXh0Q29udGV4dCk7XG5cbiAgICB2YXIgc2hvdWxkVXBkYXRlID0gdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlIHx8ICFpbnN0LnNob3VsZENvbXBvbmVudFVwZGF0ZSB8fCBpbnN0LnNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiBzaG91bGRVcGRhdGUgIT09ICd1bmRlZmluZWQnLCAnJXMuc2hvdWxkQ29tcG9uZW50VXBkYXRlKCk6IFJldHVybmVkIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIGEgJyArICdib29sZWFuIHZhbHVlLiBNYWtlIHN1cmUgdG8gcmV0dXJuIHRydWUgb3IgZmFsc2UuJywgdGhpcy5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlID0gZmFsc2U7XG4gICAgICAvLyBXaWxsIHNldCBgdGhpcy5wcm9wc2AsIGB0aGlzLnN0YXRlYCBhbmQgYHRoaXMuY29udGV4dGAuXG4gICAgICB0aGlzLl9wZXJmb3JtQ29tcG9uZW50VXBkYXRlKG5leHRQYXJlbnRFbGVtZW50LCBuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQsIHRyYW5zYWN0aW9uLCBuZXh0VW5tYXNrZWRDb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgaXQncyBkZXRlcm1pbmVkIHRoYXQgYSBjb21wb25lbnQgc2hvdWxkIG5vdCB1cGRhdGUsIHdlIHN0aWxsIHdhbnRcbiAgICAgIC8vIHRvIHNldCBwcm9wcyBhbmQgc3RhdGUgYnV0IHdlIHNob3J0Y3V0IHRoZSByZXN0IG9mIHRoZSB1cGRhdGUuXG4gICAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG5leHRQYXJlbnRFbGVtZW50O1xuICAgICAgdGhpcy5fY29udGV4dCA9IG5leHRVbm1hc2tlZENvbnRleHQ7XG4gICAgICBpbnN0LnByb3BzID0gbmV4dFByb3BzO1xuICAgICAgaW5zdC5zdGF0ZSA9IG5leHRTdGF0ZTtcbiAgICAgIGluc3QuY29udGV4dCA9IG5leHRDb250ZXh0O1xuICAgIH1cbiAgfSxcblxuICBfcHJvY2Vzc1BlbmRpbmdTdGF0ZTogZnVuY3Rpb24gKHByb3BzLCBjb250ZXh0KSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcbiAgICB2YXIgcXVldWUgPSB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZTtcbiAgICB2YXIgcmVwbGFjZSA9IHRoaXMuX3BlbmRpbmdSZXBsYWNlU3RhdGU7XG4gICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlID0gbnVsbDtcblxuICAgIGlmICghcXVldWUpIHtcbiAgICAgIHJldHVybiBpbnN0LnN0YXRlO1xuICAgIH1cblxuICAgIGlmIChyZXBsYWNlICYmIHF1ZXVlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHF1ZXVlWzBdO1xuICAgIH1cblxuICAgIHZhciBuZXh0U3RhdGUgPSBhc3NpZ24oe30sIHJlcGxhY2UgPyBxdWV1ZVswXSA6IGluc3Quc3RhdGUpO1xuICAgIGZvciAodmFyIGkgPSByZXBsYWNlID8gMSA6IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHBhcnRpYWwgPSBxdWV1ZVtpXTtcbiAgICAgIGFzc2lnbihuZXh0U3RhdGUsIHR5cGVvZiBwYXJ0aWFsID09PSAnZnVuY3Rpb24nID8gcGFydGlhbC5jYWxsKGluc3QsIG5leHRTdGF0ZSwgcHJvcHMsIGNvbnRleHQpIDogcGFydGlhbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5leHRTdGF0ZTtcbiAgfSxcblxuICAvKipcbiAgICogTWVyZ2VzIG5ldyBwcm9wcyBhbmQgc3RhdGUsIG5vdGlmaWVzIGRlbGVnYXRlIG1ldGhvZHMgb2YgdXBkYXRlIGFuZFxuICAgKiBwZXJmb3JtcyB1cGRhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBOZXh0IGVsZW1lbnRcbiAgICogQHBhcmFtIHtvYmplY3R9IG5leHRQcm9wcyBOZXh0IHB1YmxpYyBvYmplY3QgdG8gc2V0IGFzIHByb3BlcnRpZXMuXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dFN0YXRlIE5leHQgb2JqZWN0IHRvIHNldCBhcyBzdGF0ZS5cbiAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0Q29udGV4dCBOZXh0IHB1YmxpYyBvYmplY3QgdG8gc2V0IGFzIGNvbnRleHQuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHs/b2JqZWN0fSB1bm1hc2tlZENvbnRleHRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9wZXJmb3JtQ29tcG9uZW50VXBkYXRlOiBmdW5jdGlvbiAobmV4dEVsZW1lbnQsIG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCwgdHJhbnNhY3Rpb24sIHVubWFza2VkQ29udGV4dCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG5cbiAgICB2YXIgaGFzQ29tcG9uZW50RGlkVXBkYXRlID0gQm9vbGVhbihpbnN0LmNvbXBvbmVudERpZFVwZGF0ZSk7XG4gICAgdmFyIHByZXZQcm9wcztcbiAgICB2YXIgcHJldlN0YXRlO1xuICAgIHZhciBwcmV2Q29udGV4dDtcbiAgICBpZiAoaGFzQ29tcG9uZW50RGlkVXBkYXRlKSB7XG4gICAgICBwcmV2UHJvcHMgPSBpbnN0LnByb3BzO1xuICAgICAgcHJldlN0YXRlID0gaW5zdC5zdGF0ZTtcbiAgICAgIHByZXZDb250ZXh0ID0gaW5zdC5jb250ZXh0O1xuICAgIH1cblxuICAgIGlmIChpbnN0LmNvbXBvbmVudFdpbGxVcGRhdGUpIHtcbiAgICAgIGluc3QuY29tcG9uZW50V2lsbFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpO1xuICAgIH1cblxuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbmV4dEVsZW1lbnQ7XG4gICAgdGhpcy5fY29udGV4dCA9IHVubWFza2VkQ29udGV4dDtcbiAgICBpbnN0LnByb3BzID0gbmV4dFByb3BzO1xuICAgIGluc3Quc3RhdGUgPSBuZXh0U3RhdGU7XG4gICAgaW5zdC5jb250ZXh0ID0gbmV4dENvbnRleHQ7XG5cbiAgICB0aGlzLl91cGRhdGVSZW5kZXJlZENvbXBvbmVudCh0cmFuc2FjdGlvbiwgdW5tYXNrZWRDb250ZXh0KTtcblxuICAgIGlmIChoYXNDb21wb25lbnREaWRVcGRhdGUpIHtcbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoaW5zdC5jb21wb25lbnREaWRVcGRhdGUuYmluZChpbnN0LCBwcmV2UHJvcHMsIHByZXZTdGF0ZSwgcHJldkNvbnRleHQpLCBpbnN0KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENhbGwgdGhlIGNvbXBvbmVudCdzIGByZW5kZXJgIG1ldGhvZCBhbmQgdXBkYXRlIHRoZSBET00gYWNjb3JkaW5nbHkuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQGludGVybmFsXG4gICAqL1xuICBfdXBkYXRlUmVuZGVyZWRDb21wb25lbnQ6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHZhciBwcmV2Q29tcG9uZW50SW5zdGFuY2UgPSB0aGlzLl9yZW5kZXJlZENvbXBvbmVudDtcbiAgICB2YXIgcHJldlJlbmRlcmVkRWxlbWVudCA9IHByZXZDb21wb25lbnRJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQ7XG4gICAgdmFyIG5leHRSZW5kZXJlZEVsZW1lbnQgPSB0aGlzLl9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQoKTtcbiAgICBpZiAoc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQocHJldlJlbmRlcmVkRWxlbWVudCwgbmV4dFJlbmRlcmVkRWxlbWVudCkpIHtcbiAgICAgIFJlYWN0UmVjb25jaWxlci5yZWNlaXZlQ29tcG9uZW50KHByZXZDb21wb25lbnRJbnN0YW5jZSwgbmV4dFJlbmRlcmVkRWxlbWVudCwgdHJhbnNhY3Rpb24sIHRoaXMuX3Byb2Nlc3NDaGlsZENvbnRleHQoY29udGV4dCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGVzZSB0d28gSURzIGFyZSBhY3R1YWxseSB0aGUgc2FtZSEgQnV0IG5vdGhpbmcgc2hvdWxkIHJlbHkgb24gdGhhdC5cbiAgICAgIHZhciB0aGlzSUQgPSB0aGlzLl9yb290Tm9kZUlEO1xuICAgICAgdmFyIHByZXZDb21wb25lbnRJRCA9IHByZXZDb21wb25lbnRJbnN0YW5jZS5fcm9vdE5vZGVJRDtcbiAgICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHByZXZDb21wb25lbnRJbnN0YW5jZSk7XG5cbiAgICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gdGhpcy5faW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChuZXh0UmVuZGVyZWRFbGVtZW50KTtcbiAgICAgIHZhciBuZXh0TWFya3VwID0gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50LCB0aGlzSUQsIHRyYW5zYWN0aW9uLCB0aGlzLl9wcm9jZXNzQ2hpbGRDb250ZXh0KGNvbnRleHQpKTtcbiAgICAgIHRoaXMuX3JlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQocHJldkNvbXBvbmVudElELCBuZXh0TWFya3VwKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEOiBmdW5jdGlvbiAocHJldkNvbXBvbmVudElELCBuZXh0TWFya3VwKSB7XG4gICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5yZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEKHByZXZDb21wb25lbnRJRCwgbmV4dE1hcmt1cCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnRXaXRob3V0T3duZXJPckNvbnRleHQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuICAgIHZhciByZW5kZXJlZENvbXBvbmVudCA9IGluc3QucmVuZGVyKCk7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFdlIGFsbG93IGF1dG8tbW9ja3MgdG8gcHJvY2VlZCBhcyBpZiB0aGV5J3JlIHJldHVybmluZyBudWxsLlxuICAgICAgaWYgKHR5cGVvZiByZW5kZXJlZENvbXBvbmVudCA9PT0gJ3VuZGVmaW5lZCcgJiYgaW5zdC5yZW5kZXIuX2lzTW9ja0Z1bmN0aW9uKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgcHJvYmFibHkgYmFkIHByYWN0aWNlLiBDb25zaWRlciB3YXJuaW5nIGhlcmUgYW5kXG4gICAgICAgIC8vIGRlcHJlY2F0aW5nIHRoaXMgY29udmVuaWVuY2UuXG4gICAgICAgIHJlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVuZGVyZWRDb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlbmRlcmVkQ29tcG9uZW50O1xuICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSB0aGlzO1xuICAgIHRyeSB7XG4gICAgICByZW5kZXJlZENvbXBvbmVudCA9IHRoaXMuX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudFdpdGhvdXRPd25lck9yQ29udGV4dCgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgIShcbiAgICAvLyBUT0RPOiBBbiBgaXNWYWxpZE5vZGVgIGZ1bmN0aW9uIHdvdWxkIHByb2JhYmx5IGJlIG1vcmUgYXBwcm9wcmlhdGVcbiAgICByZW5kZXJlZENvbXBvbmVudCA9PT0gbnVsbCB8fCByZW5kZXJlZENvbXBvbmVudCA9PT0gZmFsc2UgfHwgUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KHJlbmRlcmVkQ29tcG9uZW50KSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMucmVuZGVyKCk6IEEgdmFsaWQgUmVhY3RDb21wb25lbnQgbXVzdCBiZSByZXR1cm5lZC4gWW91IG1heSBoYXZlICcgKyAncmV0dXJuZWQgdW5kZWZpbmVkLCBhbiBhcnJheSBvciBzb21lIG90aGVyIGludmFsaWQgb2JqZWN0LicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVuZGVyZWRDb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIExhemlseSBhbGxvY2F0ZXMgdGhlIHJlZnMgb2JqZWN0IGFuZCBzdG9yZXMgYGNvbXBvbmVudGAgYXMgYHJlZmAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWYgUmVmZXJlbmNlIG5hbWUuXG4gICAqIEBwYXJhbSB7Y29tcG9uZW50fSBjb21wb25lbnQgQ29tcG9uZW50IHRvIHN0b3JlIGFzIGByZWZgLlxuICAgKiBAZmluYWxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGF0dGFjaFJlZjogZnVuY3Rpb24gKHJlZiwgY29tcG9uZW50KSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLmdldFB1YmxpY0luc3RhbmNlKCk7XG4gICAgIShpbnN0ICE9IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1N0YXRlbGVzcyBmdW5jdGlvbiBjb21wb25lbnRzIGNhbm5vdCBoYXZlIHJlZnMuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHZhciBwdWJsaWNDb21wb25lbnRJbnN0YW5jZSA9IGNvbXBvbmVudC5nZXRQdWJsaWNJbnN0YW5jZSgpO1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudCAmJiBjb21wb25lbnQuZ2V0TmFtZSA/IGNvbXBvbmVudC5nZXROYW1lKCkgOiAnYSBjb21wb25lbnQnO1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcocHVibGljQ29tcG9uZW50SW5zdGFuY2UgIT0gbnVsbCwgJ1N0YXRlbGVzcyBmdW5jdGlvbiBjb21wb25lbnRzIGNhbm5vdCBiZSBnaXZlbiByZWZzICcgKyAnKFNlZSByZWYgXCIlc1wiIGluICVzIGNyZWF0ZWQgYnkgJXMpLiAnICsgJ0F0dGVtcHRzIHRvIGFjY2VzcyB0aGlzIHJlZiB3aWxsIGZhaWwuJywgcmVmLCBjb21wb25lbnROYW1lLCB0aGlzLmdldE5hbWUoKSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHZhciByZWZzID0gaW5zdC5yZWZzID09PSBlbXB0eU9iamVjdCA/IGluc3QucmVmcyA9IHt9IDogaW5zdC5yZWZzO1xuICAgIHJlZnNbcmVmXSA9IHB1YmxpY0NvbXBvbmVudEluc3RhbmNlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEZXRhY2hlcyBhIHJlZmVyZW5jZSBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmIE5hbWUgdG8gZGVyZWZlcmVuY2UuXG4gICAqIEBmaW5hbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGV0YWNoUmVmOiBmdW5jdGlvbiAocmVmKSB7XG4gICAgdmFyIHJlZnMgPSB0aGlzLmdldFB1YmxpY0luc3RhbmNlKCkucmVmcztcbiAgICBkZWxldGUgcmVmc1tyZWZdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgYSB0ZXh0IGRlc2NyaXB0aW9uIG9mIHRoZSBjb21wb25lbnQgdGhhdCBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBpdFxuICAgKiBpbiBlcnJvciBtZXNzYWdlcy5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgbmFtZSBvciBudWxsLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldE5hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdHlwZSA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG4gICAgdmFyIGNvbnN0cnVjdG9yID0gdGhpcy5faW5zdGFuY2UgJiYgdGhpcy5faW5zdGFuY2UuY29uc3RydWN0b3I7XG4gICAgcmV0dXJuIHR5cGUuZGlzcGxheU5hbWUgfHwgY29uc3RydWN0b3IgJiYgY29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgdHlwZS5uYW1lIHx8IGNvbnN0cnVjdG9yICYmIGNvbnN0cnVjdG9yLm5hbWUgfHwgbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBwdWJsaWNseSBhY2Nlc3NpYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgY29tcG9uZW50IC0gaS5lLiB3aGF0XG4gICAqIGlzIGV4cG9zZWQgYnkgcmVmcyBhbmQgcmV0dXJuZWQgYnkgcmVuZGVyLiBDYW4gYmUgbnVsbCBmb3Igc3RhdGVsZXNzXG4gICAqIGNvbXBvbmVudHMuXG4gICAqXG4gICAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fSB0aGUgcHVibGljIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXRQdWJsaWNJbnN0YW5jZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG4gICAgaWYgKGluc3QgaW5zdGFuY2VvZiBTdGF0ZWxlc3NDb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gaW5zdDtcbiAgfSxcblxuICAvLyBTdHViXG4gIF9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50OiBudWxsXG5cbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdENvbXBvc2l0ZUNvbXBvbmVudE1peGluLCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnLCB7XG4gIG1vdW50Q29tcG9uZW50OiAnbW91bnRDb21wb25lbnQnLFxuICB1cGRhdGVDb21wb25lbnQ6ICd1cGRhdGVDb21wb25lbnQnLFxuICBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50OiAnX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCdcbn0pO1xuXG52YXIgUmVhY3RDb21wb3NpdGVDb21wb25lbnQgPSB7XG5cbiAgTWl4aW46IFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50TWl4aW5cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDdXJyZW50T3duZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogS2VlcHMgdHJhY2sgb2YgdGhlIGN1cnJlbnQgb3duZXIuXG4gKlxuICogVGhlIGN1cnJlbnQgb3duZXIgaXMgdGhlIGNvbXBvbmVudCB3aG8gc2hvdWxkIG93biBhbnkgY29tcG9uZW50cyB0aGF0IGFyZVxuICogY3VycmVudGx5IGJlaW5nIGNvbnN0cnVjdGVkLlxuICovXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSB7XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAdHlwZSB7UmVhY3RDb21wb25lbnR9XG4gICAqL1xuICBjdXJyZW50OiBudWxsXG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RDdXJyZW50T3duZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NXG4gKi9cblxuLyogZ2xvYmFscyBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18qL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcbnZhciBSZWFjdERPTVRleHRDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0RE9NVGV4dENvbXBvbmVudCcpO1xudmFyIFJlYWN0RGVmYXVsdEluamVjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3REZWZhdWx0SW5qZWN0aW9uJyk7XG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VIYW5kbGVzJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xudmFyIFJlYWN0VmVyc2lvbiA9IHJlcXVpcmUoJy4vUmVhY3RWZXJzaW9uJyk7XG5cbnZhciBmaW5kRE9NTm9kZSA9IHJlcXVpcmUoJy4vZmluZERPTU5vZGUnKTtcbnZhciByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lciA9IHJlcXVpcmUoJy4vcmVuZGVyU3VidHJlZUludG9Db250YWluZXInKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5SZWFjdERlZmF1bHRJbmplY3Rpb24uaW5qZWN0KCk7XG5cbnZhciByZW5kZXIgPSBSZWFjdFBlcmYubWVhc3VyZSgnUmVhY3QnLCAncmVuZGVyJywgUmVhY3RNb3VudC5yZW5kZXIpO1xuXG52YXIgUmVhY3QgPSB7XG4gIGZpbmRET01Ob2RlOiBmaW5kRE9NTm9kZSxcbiAgcmVuZGVyOiByZW5kZXIsXG4gIHVubW91bnRDb21wb25lbnRBdE5vZGU6IFJlYWN0TW91bnQudW5tb3VudENvbXBvbmVudEF0Tm9kZSxcbiAgdmVyc2lvbjogUmVhY3RWZXJzaW9uLFxuXG4gIC8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuICB1bnN0YWJsZV9iYXRjaGVkVXBkYXRlczogUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzLFxuICB1bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcjogcmVuZGVyU3VidHJlZUludG9Db250YWluZXJcbn07XG5cbi8vIEluamVjdCB0aGUgcnVudGltZSBpbnRvIGEgZGV2dG9vbHMgZ2xvYmFsIGhvb2sgcmVnYXJkbGVzcyBvZiBicm93c2VyLlxuLy8gQWxsb3dzIGZvciBkZWJ1Z2dpbmcgd2hlbiB0aGUgaG9vayBpcyBpbmplY3RlZCBvbiB0aGUgcGFnZS5cbi8qIGVzbGludC1lbmFibGUgY2FtZWxjYXNlICovXG5pZiAodHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5pbmplY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLmluamVjdCh7XG4gICAgQ3VycmVudE93bmVyOiBSZWFjdEN1cnJlbnRPd25lcixcbiAgICBJbnN0YW5jZUhhbmRsZXM6IFJlYWN0SW5zdGFuY2VIYW5kbGVzLFxuICAgIE1vdW50OiBSZWFjdE1vdW50LFxuICAgIFJlY29uY2lsZXI6IFJlYWN0UmVjb25jaWxlcixcbiAgICBUZXh0Q29tcG9uZW50OiBSZWFjdERPTVRleHRDb21wb25lbnRcbiAgfSk7XG59XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG4gIGlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgd2luZG93LnRvcCA9PT0gd2luZG93LnNlbGYpIHtcblxuICAgIC8vIEZpcnN0IGNoZWNrIGlmIGRldnRvb2xzIGlzIG5vdCBpbnN0YWxsZWRcbiAgICBpZiAodHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIElmIHdlJ3JlIGluIENocm9tZSBvciBGaXJlZm94LCBwcm92aWRlIGEgZG93bmxvYWQgbGluayBpZiBub3QgaW5zdGFsbGVkLlxuICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPiAtMSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0VkZ2UnKSA9PT0gLTEgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgPiAtMSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCdEb3dubG9hZCB0aGUgUmVhY3QgRGV2VG9vbHMgZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6ICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC1kZXZ0b29scycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHdlJ3JlIGluIElFOCwgY2hlY2sgdG8gc2VlIGlmIHdlIGFyZSBpbiBjb21wYXRpYmlsaXR5IG1vZGUgYW5kIHByb3ZpZGVcbiAgICAvLyBpbmZvcm1hdGlvbiBvbiBwcmV2ZW50aW5nIGNvbXBhdGliaWxpdHkgbW9kZVxuICAgIHZhciBpZUNvbXBhdGliaWxpdHlNb2RlID0gZG9jdW1lbnQuZG9jdW1lbnRNb2RlICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSA8IDg7XG5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaWVDb21wYXRpYmlsaXR5TW9kZSwgJ0ludGVybmV0IEV4cGxvcmVyIGlzIHJ1bm5pbmcgaW4gY29tcGF0aWJpbGl0eSBtb2RlOyBwbGVhc2UgYWRkIHRoZSAnICsgJ2ZvbGxvd2luZyB0YWcgdG8geW91ciBIVE1MIHRvIHByZXZlbnQgdGhpcyBmcm9tIGhhcHBlbmluZzogJyArICc8bWV0YSBodHRwLWVxdWl2PVwiWC1VQS1Db21wYXRpYmxlXCIgY29udGVudD1cIklFPWVkZ2VcIiAvPicpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIGV4cGVjdGVkRmVhdHVyZXMgPSBbXG4gICAgLy8gc2hpbXNcbiAgICBBcnJheS5pc0FycmF5LCBBcnJheS5wcm90b3R5cGUuZXZlcnksIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLCBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiwgQXJyYXkucHJvdG90eXBlLm1hcCwgRGF0ZS5ub3csIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLCBPYmplY3Qua2V5cywgU3RyaW5nLnByb3RvdHlwZS5zcGxpdCwgU3RyaW5nLnByb3RvdHlwZS50cmltLFxuXG4gICAgLy8gc2hhbXNcbiAgICBPYmplY3QuY3JlYXRlLCBPYmplY3QuZnJlZXplXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwZWN0ZWRGZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFleHBlY3RlZEZlYXR1cmVzW2ldKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ09uZSBvciBtb3JlIEVTNSBzaGltL3NoYW1zIGV4cGVjdGVkIGJ5IFJlYWN0IGFyZSBub3QgYXZhaWxhYmxlOiAnICsgJ2h0dHBzOi8vZmIubWUvcmVhY3Qtd2FybmluZy1wb2x5ZmlsbHMnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NQnV0dG9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgbW91c2VMaXN0ZW5lck5hbWVzID0ge1xuICBvbkNsaWNrOiB0cnVlLFxuICBvbkRvdWJsZUNsaWNrOiB0cnVlLFxuICBvbk1vdXNlRG93bjogdHJ1ZSxcbiAgb25Nb3VzZU1vdmU6IHRydWUsXG4gIG9uTW91c2VVcDogdHJ1ZSxcblxuICBvbkNsaWNrQ2FwdHVyZTogdHJ1ZSxcbiAgb25Eb3VibGVDbGlja0NhcHR1cmU6IHRydWUsXG4gIG9uTW91c2VEb3duQ2FwdHVyZTogdHJ1ZSxcbiAgb25Nb3VzZU1vdmVDYXB0dXJlOiB0cnVlLFxuICBvbk1vdXNlVXBDYXB0dXJlOiB0cnVlXG59O1xuXG4vKipcbiAqIEltcGxlbWVudHMgYSA8YnV0dG9uPiBuYXRpdmUgY29tcG9uZW50IHRoYXQgZG9lcyBub3QgcmVjZWl2ZSBtb3VzZSBldmVudHNcbiAqIHdoZW4gYGRpc2FibGVkYCBpcyBzZXQuXG4gKi9cbnZhciBSZWFjdERPTUJ1dHRvbiA9IHtcbiAgZ2V0TmF0aXZlUHJvcHM6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIGlmICghcHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiBwcm9wcztcbiAgICB9XG5cbiAgICAvLyBDb3B5IHRoZSBwcm9wcywgZXhjZXB0IHRoZSBtb3VzZSBsaXN0ZW5lcnNcbiAgICB2YXIgbmF0aXZlUHJvcHMgPSB7fTtcbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHtcbiAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmICFtb3VzZUxpc3RlbmVyTmFtZXNba2V5XSkge1xuICAgICAgICBuYXRpdmVQcm9wc1trZXldID0gcHJvcHNba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmF0aXZlUHJvcHM7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01CdXR0b247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NQ29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbi8qIGdsb2JhbCBoYXNPd25Qcm9wZXJ0eTp0cnVlICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEF1dG9Gb2N1c1V0aWxzID0gcmVxdWlyZSgnLi9BdXRvRm9jdXNVdGlscycpO1xudmFyIENTU1Byb3BlcnR5T3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vQ1NTUHJvcGVydHlPcGVyYXRpb25zJyk7XG52YXIgRE9NUHJvcGVydHkgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5Jyk7XG52YXIgRE9NUHJvcGVydHlPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eU9wZXJhdGlvbnMnKTtcbnZhciBFdmVudENvbnN0YW50cyA9IHJlcXVpcmUoJy4vRXZlbnRDb25zdGFudHMnKTtcbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlcicpO1xudmFyIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0RE9NQnV0dG9uID0gcmVxdWlyZSgnLi9SZWFjdERPTUJ1dHRvbicpO1xudmFyIFJlYWN0RE9NSW5wdXQgPSByZXF1aXJlKCcuL1JlYWN0RE9NSW5wdXQnKTtcbnZhciBSZWFjdERPTU9wdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RET01PcHRpb24nKTtcbnZhciBSZWFjdERPTVNlbGVjdCA9IHJlcXVpcmUoJy4vUmVhY3RET01TZWxlY3QnKTtcbnZhciBSZWFjdERPTVRleHRhcmVhID0gcmVxdWlyZSgnLi9SZWFjdERPTVRleHRhcmVhJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFJlYWN0TXVsdGlDaGlsZCA9IHJlcXVpcmUoJy4vUmVhY3RNdWx0aUNoaWxkJyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBSZWFjdFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZVF1ZXVlJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vY2FuRGVmaW5lUHJvcGVydHknKTtcbnZhciBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIgPSByZXF1aXJlKCcuL2VzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlcicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIGlzRXZlbnRTdXBwb3J0ZWQgPSByZXF1aXJlKCcuL2lzRXZlbnRTdXBwb3J0ZWQnKTtcbnZhciBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG52YXIgc2V0SW5uZXJIVE1MID0gcmVxdWlyZSgnLi9zZXRJbm5lckhUTUwnKTtcbnZhciBzZXRUZXh0Q29udGVudCA9IHJlcXVpcmUoJy4vc2V0VGV4dENvbnRlbnQnKTtcbnZhciBzaGFsbG93RXF1YWwgPSByZXF1aXJlKCdmYmpzL2xpYi9zaGFsbG93RXF1YWwnKTtcbnZhciB2YWxpZGF0ZURPTU5lc3RpbmcgPSByZXF1aXJlKCcuL3ZhbGlkYXRlRE9NTmVzdGluZycpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBkZWxldGVMaXN0ZW5lciA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5kZWxldGVMaXN0ZW5lcjtcbnZhciBsaXN0ZW5UbyA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5saXN0ZW5UbztcbnZhciByZWdpc3RyYXRpb25OYW1lTW9kdWxlcyA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5yZWdpc3RyYXRpb25OYW1lTW9kdWxlcztcblxuLy8gRm9yIHF1aWNrbHkgbWF0Y2hpbmcgY2hpbGRyZW4gdHlwZSwgdG8gdGVzdCBpZiBjYW4gYmUgdHJlYXRlZCBhcyBjb250ZW50LlxudmFyIENPTlRFTlRfVFlQRVMgPSB7ICdzdHJpbmcnOiB0cnVlLCAnbnVtYmVyJzogdHJ1ZSB9O1xuXG52YXIgQ0hJTERSRU4gPSBrZXlPZih7IGNoaWxkcmVuOiBudWxsIH0pO1xudmFyIFNUWUxFID0ga2V5T2YoeyBzdHlsZTogbnVsbCB9KTtcbnZhciBIVE1MID0ga2V5T2YoeyBfX2h0bWw6IG51bGwgfSk7XG5cbnZhciBFTEVNRU5UX05PREVfVFlQRSA9IDE7XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShpbnRlcm5hbEluc3RhbmNlKSB7XG4gIGlmIChpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgdmFyIG93bmVyID0gaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyIHx8IG51bGw7XG4gICAgaWYgKG93bmVyKSB7XG4gICAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcbiAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgIHJldHVybiAnIFRoaXMgRE9NIG5vZGUgd2FzIHJlbmRlcmVkIGJ5IGAnICsgbmFtZSArICdgLic7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn1cblxudmFyIGxlZ2FjeVByb3BzRGVzY3JpcHRvcjtcbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGxlZ2FjeVByb3BzRGVzY3JpcHRvciA9IHtcbiAgICBwcm9wczoge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbXBvbmVudCA9IHRoaXMuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQ7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnByb3BzIG9mIGEgRE9NIG5vZGU7IGluc3RlYWQsICcgKyAncmVjcmVhdGUgdGhlIHByb3BzIGFzIGByZW5kZXJgIGRpZCBvcmlnaW5hbGx5IG9yIHJlYWQgdGhlIERPTSAnICsgJ3Byb3BlcnRpZXMvYXR0cmlidXRlcyBkaXJlY3RseSBmcm9tIHRoaXMgbm9kZSAoZS5nLiwgJyArICd0aGlzLnJlZnMuYm94LmNsYXNzTmFtZSkuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gbGVnYWN5R2V0RE9NTm9kZSgpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5nZXRET01Ob2RlKCkgb2YgYSBET00gbm9kZTsgJyArICdpbnN0ZWFkLCB1c2UgdGhlIG5vZGUgZGlyZWN0bHkuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIGxlZ2FjeUlzTW91bnRlZCgpIHtcbiAgdmFyIGNvbXBvbmVudCA9IHRoaXMuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQ7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdERPTUNvbXBvbmVudDogRG8gbm90IGFjY2VzcyAuaXNNb3VudGVkKCkgb2YgYSBET00gbm9kZS4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gISFjb21wb25lbnQ7XG59XG5cbmZ1bmN0aW9uIGxlZ2FjeVNldFN0YXRlRXRjKCkge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnNldFN0YXRlKCksIC5yZXBsYWNlU3RhdGUoKSwgb3IgJyArICcuZm9yY2VVcGRhdGUoKSBvZiBhIERPTSBub2RlLiBUaGlzIGlzIGEgbm8tb3AuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gbGVnYWN5U2V0UHJvcHMocGFydGlhbFByb3BzLCBjYWxsYmFjaykge1xuICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5zZXRQcm9wcygpIG9mIGEgRE9NIG5vZGUuICcgKyAnSW5zdGVhZCwgY2FsbCBSZWFjdERPTS5yZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoIWNvbXBvbmVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVTZXRQcm9wc0ludGVybmFsKGNvbXBvbmVudCwgcGFydGlhbFByb3BzKTtcbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlQ2FsbGJhY2tJbnRlcm5hbChjb21wb25lbnQsIGNhbGxiYWNrKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBsZWdhY3lSZXBsYWNlUHJvcHMocGFydGlhbFByb3BzLCBjYWxsYmFjaykge1xuICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5yZXBsYWNlUHJvcHMoKSBvZiBhIERPTSBub2RlLiAnICsgJ0luc3RlYWQsIGNhbGwgUmVhY3RET00ucmVuZGVyIGFnYWluIGF0IHRoZSB0b3AgbGV2ZWwuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oY29tcG9uZW50KSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFjb21wb25lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlUmVwbGFjZVByb3BzSW50ZXJuYWwoY29tcG9uZW50LCBwYXJ0aWFsUHJvcHMpO1xuICBpZiAoY2FsbGJhY2spIHtcbiAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVDYWxsYmFja0ludGVybmFsKGNvbXBvbmVudCwgY2FsbGJhY2spO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZyaWVuZGx5U3RyaW5naWZ5KG9iaikge1xuICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICByZXR1cm4gJ1snICsgb2JqLm1hcChmcmllbmRseVN0cmluZ2lmeSkuam9pbignLCAnKSArICddJztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHBhaXJzID0gW107XG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgdmFyIGtleUVzY2FwZWQgPSAvXlthLXokX11bXFx3JF9dKiQvaS50ZXN0KGtleSkgPyBrZXkgOiBKU09OLnN0cmluZ2lmeShrZXkpO1xuICAgICAgICAgIHBhaXJzLnB1c2goa2V5RXNjYXBlZCArICc6ICcgKyBmcmllbmRseVN0cmluZ2lmeShvYmpba2V5XSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gJ3snICsgcGFpcnMuam9pbignLCAnKSArICd9JztcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKTtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuICdbZnVuY3Rpb24gb2JqZWN0XSc7XG4gIH1cbiAgLy8gRGlmZmVycyBmcm9tIEpTT04uc3RyaW5naWZ5IGluIHRoYXQgdW5kZWZpbmVkIGJlY2F1c2VzIHVuZGVmaW5lZCBhbmQgdGhhdFxuICAvLyBpbmYgYW5kIG5hbiBkb24ndCBiZWNvbWUgbnVsbFxuICByZXR1cm4gU3RyaW5nKG9iaik7XG59XG5cbnZhciBzdHlsZU11dGF0aW9uV2FybmluZyA9IHt9O1xuXG5mdW5jdGlvbiBjaGVja0FuZFdhcm5Gb3JNdXRhdGVkU3R5bGUoc3R5bGUxLCBzdHlsZTIsIGNvbXBvbmVudCkge1xuICBpZiAoc3R5bGUxID09IG51bGwgfHwgc3R5bGUyID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNoYWxsb3dFcXVhbChzdHlsZTEsIHN0eWxlMikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5fdGFnO1xuICB2YXIgb3duZXIgPSBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcbiAgdmFyIG93bmVyTmFtZTtcbiAgaWYgKG93bmVyKSB7XG4gICAgb3duZXJOYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuICB9XG5cbiAgdmFyIGhhc2ggPSBvd25lck5hbWUgKyAnfCcgKyBjb21wb25lbnROYW1lO1xuXG4gIGlmIChzdHlsZU11dGF0aW9uV2FybmluZy5oYXNPd25Qcm9wZXJ0eShoYXNoKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN0eWxlTXV0YXRpb25XYXJuaW5nW2hhc2hdID0gdHJ1ZTtcblxuICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ2Alc2Agd2FzIHBhc3NlZCBhIHN0eWxlIG9iamVjdCB0aGF0IGhhcyBwcmV2aW91c2x5IGJlZW4gbXV0YXRlZC4gJyArICdNdXRhdGluZyBgc3R5bGVgIGlzIGRlcHJlY2F0ZWQuIENvbnNpZGVyIGNsb25pbmcgaXQgYmVmb3JlaGFuZC4gQ2hlY2sgJyArICd0aGUgYHJlbmRlcmAgJXMuIFByZXZpb3VzIHN0eWxlOiAlcy4gTXV0YXRlZCBzdHlsZTogJXMuJywgY29tcG9uZW50TmFtZSwgb3duZXIgPyAnb2YgYCcgKyBvd25lck5hbWUgKyAnYCcgOiAndXNpbmcgPCcgKyBjb21wb25lbnROYW1lICsgJz4nLCBmcmllbmRseVN0cmluZ2lmeShzdHlsZTEpLCBmcmllbmRseVN0cmluZ2lmeShzdHlsZTIpKSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gY29tcG9uZW50XG4gKiBAcGFyYW0gez9vYmplY3R9IHByb3BzXG4gKi9cbmZ1bmN0aW9uIGFzc2VydFZhbGlkUHJvcHMoY29tcG9uZW50LCBwcm9wcykge1xuICBpZiAoIXByb3BzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIE5vdGUgdGhlIHVzZSBvZiBgPT1gIHdoaWNoIGNoZWNrcyBmb3IgbnVsbCBvciB1bmRlZmluZWQuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKHZvaWRFbGVtZW50VGFnc1tjb21wb25lbnQuX3RhZ10pIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHByb3BzLmNoaWxkcmVuID09IG51bGwgJiYgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgPT0gbnVsbCwgJyVzIGlzIGEgdm9pZCBlbGVtZW50IHRhZyBhbmQgbXVzdCBub3QgaGF2ZSBgY2hpbGRyZW5gIG9yICcgKyAndXNlIGBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTGAuJXMnLCBjb21wb25lbnQuX3RhZywgY29tcG9uZW50Ll9jdXJyZW50RWxlbWVudC5fb3duZXIgPyAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mICcgKyBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50Ll9vd25lci5nZXROYW1lKCkgKyAnLicgOiAnJykgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG4gIGlmIChwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCAhPSBudWxsKSB7XG4gICAgIShwcm9wcy5jaGlsZHJlbiA9PSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDYW4gb25seSBzZXQgb25lIG9mIGBjaGlsZHJlbmAgb3IgYHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgISh0eXBlb2YgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgPT09ICdvYmplY3QnICYmIEhUTUwgaW4gcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Bwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTGAgbXVzdCBiZSBpbiB0aGUgZm9ybSBge19faHRtbDogLi4ufWAuICcgKyAnUGxlYXNlIHZpc2l0IGh0dHBzOi8vZmIubWUvcmVhY3QtaW52YXJpYW50LWRhbmdlcm91c2x5LXNldC1pbm5lci1odG1sICcgKyAnZm9yIG1vcmUgaW5mb3JtYXRpb24uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcocHJvcHMuaW5uZXJIVE1MID09IG51bGwsICdEaXJlY3RseSBzZXR0aW5nIHByb3BlcnR5IGBpbm5lckhUTUxgIGlzIG5vdCBwZXJtaXR0ZWQuICcgKyAnRm9yIG1vcmUgaW5mb3JtYXRpb24sIGxvb2t1cCBkb2N1bWVudGF0aW9uIG9uIGBkYW5nZXJvdXNseVNldElubmVySFRNTGAuJykgOiB1bmRlZmluZWQ7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIXByb3BzLmNvbnRlbnRFZGl0YWJsZSB8fCBwcm9wcy5jaGlsZHJlbiA9PSBudWxsLCAnQSBjb21wb25lbnQgaXMgYGNvbnRlbnRFZGl0YWJsZWAgYW5kIGNvbnRhaW5zIGBjaGlsZHJlbmAgbWFuYWdlZCBieSAnICsgJ1JlYWN0LiBJdCBpcyBub3cgeW91ciByZXNwb25zaWJpbGl0eSB0byBndWFyYW50ZWUgdGhhdCBub25lIG9mICcgKyAndGhvc2Ugbm9kZXMgYXJlIHVuZXhwZWN0ZWRseSBtb2RpZmllZCBvciBkdXBsaWNhdGVkLiBUaGlzIGlzICcgKyAncHJvYmFibHkgbm90IGludGVudGlvbmFsLicpIDogdW5kZWZpbmVkO1xuICB9XG4gICEocHJvcHMuc3R5bGUgPT0gbnVsbCB8fCB0eXBlb2YgcHJvcHMuc3R5bGUgPT09ICdvYmplY3QnKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUaGUgYHN0eWxlYCBwcm9wIGV4cGVjdHMgYSBtYXBwaW5nIGZyb20gc3R5bGUgcHJvcGVydGllcyB0byB2YWx1ZXMsICcgKyAnbm90IGEgc3RyaW5nLiBGb3IgZXhhbXBsZSwgc3R5bGU9e3ttYXJnaW5SaWdodDogc3BhY2luZyArIFxcJ2VtXFwnfX0gd2hlbiAnICsgJ3VzaW5nIEpTWC4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGVucXVldWVQdXRMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIsIHRyYW5zYWN0aW9uKSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgLy8gSUU4IGhhcyBubyBBUEkgZm9yIGV2ZW50IGNhcHR1cmluZyBhbmQgdGhlIGBvblNjcm9sbGAgZXZlbnQgZG9lc24ndFxuICAgIC8vIGJ1YmJsZS5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhyZWdpc3RyYXRpb25OYW1lICE9PSAnb25TY3JvbGwnIHx8IGlzRXZlbnRTdXBwb3J0ZWQoJ3Njcm9sbCcsIHRydWUpLCAnVGhpcyBicm93c2VyIGRvZXNuXFwndCBzdXBwb3J0IHRoZSBgb25TY3JvbGxgIGV2ZW50JykgOiB1bmRlZmluZWQ7XG4gIH1cbiAgdmFyIGNvbnRhaW5lciA9IFJlYWN0TW91bnQuZmluZFJlYWN0Q29udGFpbmVyRm9ySUQoaWQpO1xuICBpZiAoY29udGFpbmVyKSB7XG4gICAgdmFyIGRvYyA9IGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFX1RZUEUgPyBjb250YWluZXIub3duZXJEb2N1bWVudCA6IGNvbnRhaW5lcjtcbiAgICBsaXN0ZW5UbyhyZWdpc3RyYXRpb25OYW1lLCBkb2MpO1xuICB9XG4gIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUocHV0TGlzdGVuZXIsIHtcbiAgICBpZDogaWQsXG4gICAgcmVnaXN0cmF0aW9uTmFtZTogcmVnaXN0cmF0aW9uTmFtZSxcbiAgICBsaXN0ZW5lcjogbGlzdGVuZXJcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHB1dExpc3RlbmVyKCkge1xuICB2YXIgbGlzdGVuZXJUb1B1dCA9IHRoaXM7XG4gIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5wdXRMaXN0ZW5lcihsaXN0ZW5lclRvUHV0LmlkLCBsaXN0ZW5lclRvUHV0LnJlZ2lzdHJhdGlvbk5hbWUsIGxpc3RlbmVyVG9QdXQubGlzdGVuZXIpO1xufVxuXG4vLyBUaGVyZSBhcmUgc28gbWFueSBtZWRpYSBldmVudHMsIGl0IG1ha2VzIHNlbnNlIHRvIGp1c3Rcbi8vIG1haW50YWluIGEgbGlzdCByYXRoZXIgdGhhbiBjcmVhdGUgYSBgdHJhcEJ1YmJsZWRFdmVudGAgZm9yIGVhY2hcbnZhciBtZWRpYUV2ZW50cyA9IHtcbiAgdG9wQWJvcnQ6ICdhYm9ydCcsXG4gIHRvcENhblBsYXk6ICdjYW5wbGF5JyxcbiAgdG9wQ2FuUGxheVRocm91Z2g6ICdjYW5wbGF5dGhyb3VnaCcsXG4gIHRvcER1cmF0aW9uQ2hhbmdlOiAnZHVyYXRpb25jaGFuZ2UnLFxuICB0b3BFbXB0aWVkOiAnZW1wdGllZCcsXG4gIHRvcEVuY3J5cHRlZDogJ2VuY3J5cHRlZCcsXG4gIHRvcEVuZGVkOiAnZW5kZWQnLFxuICB0b3BFcnJvcjogJ2Vycm9yJyxcbiAgdG9wTG9hZGVkRGF0YTogJ2xvYWRlZGRhdGEnLFxuICB0b3BMb2FkZWRNZXRhZGF0YTogJ2xvYWRlZG1ldGFkYXRhJyxcbiAgdG9wTG9hZFN0YXJ0OiAnbG9hZHN0YXJ0JyxcbiAgdG9wUGF1c2U6ICdwYXVzZScsXG4gIHRvcFBsYXk6ICdwbGF5JyxcbiAgdG9wUGxheWluZzogJ3BsYXlpbmcnLFxuICB0b3BQcm9ncmVzczogJ3Byb2dyZXNzJyxcbiAgdG9wUmF0ZUNoYW5nZTogJ3JhdGVjaGFuZ2UnLFxuICB0b3BTZWVrZWQ6ICdzZWVrZWQnLFxuICB0b3BTZWVraW5nOiAnc2Vla2luZycsXG4gIHRvcFN0YWxsZWQ6ICdzdGFsbGVkJyxcbiAgdG9wU3VzcGVuZDogJ3N1c3BlbmQnLFxuICB0b3BUaW1lVXBkYXRlOiAndGltZXVwZGF0ZScsXG4gIHRvcFZvbHVtZUNoYW5nZTogJ3ZvbHVtZWNoYW5nZScsXG4gIHRvcFdhaXRpbmc6ICd3YWl0aW5nJ1xufTtcblxuZnVuY3Rpb24gdHJhcEJ1YmJsZWRFdmVudHNMb2NhbCgpIHtcbiAgdmFyIGluc3QgPSB0aGlzO1xuICAvLyBJZiBhIGNvbXBvbmVudCByZW5kZXJzIHRvIG51bGwgb3IgaWYgYW5vdGhlciBjb21wb25lbnQgZmF0YWxzIGFuZCBjYXVzZXNcbiAgLy8gdGhlIHN0YXRlIG9mIHRoZSB0cmVlIHRvIGJlIGNvcnJ1cHRlZCwgYG5vZGVgIGhlcmUgY2FuIGJlIG51bGwuXG4gICFpbnN0Ll9yb290Tm9kZUlEID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ011c3QgYmUgbW91bnRlZCB0byB0cmFwIGV2ZW50cycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUoaW5zdC5fcm9vdE5vZGVJRCk7XG4gICFub2RlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RyYXBCdWJibGVkRXZlbnQoLi4uKTogUmVxdWlyZXMgbm9kZSB0byBiZSByZW5kZXJlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgc3dpdGNoIChpbnN0Ll90YWcpIHtcbiAgICBjYXNlICdpZnJhbWUnOlxuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycyA9IFtSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcExvYWQsICdsb2FkJywgbm9kZSldO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndmlkZW8nOlxuICAgIGNhc2UgJ2F1ZGlvJzpcblxuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycyA9IFtdO1xuICAgICAgLy8gY3JlYXRlIGxpc3RlbmVyIGZvciBlYWNoIG1lZGlhIGV2ZW50XG4gICAgICBmb3IgKHZhciBldmVudCBpbiBtZWRpYUV2ZW50cykge1xuICAgICAgICBpZiAobWVkaWFFdmVudHMuaGFzT3duUHJvcGVydHkoZXZlbnQpKSB7XG4gICAgICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycy5wdXNoKFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXNbZXZlbnRdLCBtZWRpYUV2ZW50c1tldmVudF0sIG5vZGUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVhaztcbiAgICBjYXNlICdpbWcnOlxuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycyA9IFtSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcEVycm9yLCAnZXJyb3InLCBub2RlKSwgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnRyYXBCdWJibGVkRXZlbnQoRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcy50b3BMb2FkLCAnbG9hZCcsIG5vZGUpXTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLmxpc3RlbmVycyA9IFtSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcFJlc2V0LCAncmVzZXQnLCBub2RlKSwgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnRyYXBCdWJibGVkRXZlbnQoRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcy50b3BTdWJtaXQsICdzdWJtaXQnLCBub2RlKV07XG4gICAgICBicmVhaztcbiAgfVxufVxuXG5mdW5jdGlvbiBtb3VudFJlYWR5SW5wdXRXcmFwcGVyKCkge1xuICBSZWFjdERPTUlucHV0Lm1vdW50UmVhZHlXcmFwcGVyKHRoaXMpO1xufVxuXG5mdW5jdGlvbiBwb3N0VXBkYXRlU2VsZWN0V3JhcHBlcigpIHtcbiAgUmVhY3RET01TZWxlY3QucG9zdFVwZGF0ZVdyYXBwZXIodGhpcyk7XG59XG5cbi8vIEZvciBIVE1MLCBjZXJ0YWluIHRhZ3Mgc2hvdWxkIG9taXQgdGhlaXIgY2xvc2UgdGFnLiBXZSBrZWVwIGEgd2hpdGVsaXN0IGZvclxuLy8gdGhvc2Ugc3BlY2lhbCBjYXNlZCB0YWdzLlxuXG52YXIgb21pdHRlZENsb3NlVGFncyA9IHtcbiAgJ2FyZWEnOiB0cnVlLFxuICAnYmFzZSc6IHRydWUsXG4gICdicic6IHRydWUsXG4gICdjb2wnOiB0cnVlLFxuICAnZW1iZWQnOiB0cnVlLFxuICAnaHInOiB0cnVlLFxuICAnaW1nJzogdHJ1ZSxcbiAgJ2lucHV0JzogdHJ1ZSxcbiAgJ2tleWdlbic6IHRydWUsXG4gICdsaW5rJzogdHJ1ZSxcbiAgJ21ldGEnOiB0cnVlLFxuICAncGFyYW0nOiB0cnVlLFxuICAnc291cmNlJzogdHJ1ZSxcbiAgJ3RyYWNrJzogdHJ1ZSxcbiAgJ3dicic6IHRydWVcbn07XG5cbi8vIE5PVEU6IG1lbnVpdGVtJ3MgY2xvc2UgdGFnIHNob3VsZCBiZSBvbWl0dGVkLCBidXQgdGhhdCBjYXVzZXMgcHJvYmxlbXMuXG52YXIgbmV3bGluZUVhdGluZ1RhZ3MgPSB7XG4gICdsaXN0aW5nJzogdHJ1ZSxcbiAgJ3ByZSc6IHRydWUsXG4gICd0ZXh0YXJlYSc6IHRydWVcbn07XG5cbi8vIEZvciBIVE1MLCBjZXJ0YWluIHRhZ3MgY2Fubm90IGhhdmUgY2hpbGRyZW4uIFRoaXMgaGFzIHRoZSBzYW1lIHB1cnBvc2UgYXNcbi8vIGBvbWl0dGVkQ2xvc2VUYWdzYCBleGNlcHQgdGhhdCBgbWVudWl0ZW1gIHNob3VsZCBzdGlsbCBoYXZlIGl0cyBjbG9zaW5nIHRhZy5cblxudmFyIHZvaWRFbGVtZW50VGFncyA9IGFzc2lnbih7XG4gICdtZW51aXRlbSc6IHRydWVcbn0sIG9taXR0ZWRDbG9zZVRhZ3MpO1xuXG4vLyBXZSBhY2NlcHQgYW55IHRhZyB0byBiZSByZW5kZXJlZCBidXQgc2luY2UgdGhpcyBnZXRzIGluamVjdGVkIGludG8gYXJiaXRyYXJ5XG4vLyBIVE1MLCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB0aGF0IGl0J3MgYSBzYWZlIHRhZy5cbi8vIGh0dHA6Ly93d3cudzMub3JnL1RSL1JFQy14bWwvI05ULU5hbWVcblxudmFyIFZBTElEX1RBR19SRUdFWCA9IC9eW2EtekEtWl1bYS16QS1aOl9cXC5cXC1cXGRdKiQvOyAvLyBTaW1wbGlmaWVkIHN1YnNldFxudmFyIHZhbGlkYXRlZFRhZ0NhY2hlID0ge307XG52YXIgaGFzT3duUHJvcGVydHkgPSAoe30pLmhhc093blByb3BlcnR5O1xuXG5mdW5jdGlvbiB2YWxpZGF0ZURhbmdlcm91c1RhZyh0YWcpIHtcbiAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbGlkYXRlZFRhZ0NhY2hlLCB0YWcpKSB7XG4gICAgIVZBTElEX1RBR19SRUdFWC50ZXN0KHRhZykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnSW52YWxpZCB0YWc6ICVzJywgdGFnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFsaWRhdGVkVGFnQ2FjaGVbdGFnXSA9IHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0NoaWxkQ29udGV4dERldihjb250ZXh0LCBpbnN0KSB7XG4gIC8vIFBhc3MgZG93biBvdXIgdGFnIG5hbWUgdG8gY2hpbGQgY29tcG9uZW50cyBmb3IgdmFsaWRhdGlvbiBwdXJwb3Nlc1xuICBjb250ZXh0ID0gYXNzaWduKHt9LCBjb250ZXh0KTtcbiAgdmFyIGluZm8gPSBjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XTtcbiAgY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0gPSB2YWxpZGF0ZURPTU5lc3RpbmcudXBkYXRlZEFuY2VzdG9ySW5mbyhpbmZvLCBpbnN0Ll90YWcsIGluc3QpO1xuICByZXR1cm4gY29udGV4dDtcbn1cblxuZnVuY3Rpb24gaXNDdXN0b21Db21wb25lbnQodGFnTmFtZSwgcHJvcHMpIHtcbiAgcmV0dXJuIHRhZ05hbWUuaW5kZXhPZignLScpID49IDAgfHwgcHJvcHMuaXMgIT0gbnVsbDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFJlYWN0IGNsYXNzIHRoYXQgaXMgaWRlbXBvdGVudCBhbmQgY2FwYWJsZSBvZiBjb250YWluaW5nIG90aGVyXG4gKiBSZWFjdCBjb21wb25lbnRzLiBJdCBhY2NlcHRzIGV2ZW50IGxpc3RlbmVycyBhbmQgRE9NIHByb3BlcnRpZXMgdGhhdCBhcmVcbiAqIHZhbGlkIGFjY29yZGluZyB0byBgRE9NUHJvcGVydHlgLlxuICpcbiAqICAtIEV2ZW50IGxpc3RlbmVyczogYG9uQ2xpY2tgLCBgb25Nb3VzZURvd25gLCBldGMuXG4gKiAgLSBET00gcHJvcGVydGllczogYGNsYXNzTmFtZWAsIGBuYW1lYCwgYHRpdGxlYCwgZXRjLlxuICpcbiAqIFRoZSBgc3R5bGVgIHByb3BlcnR5IGZ1bmN0aW9ucyBkaWZmZXJlbnRseSBmcm9tIHRoZSBET00gQVBJLiBJdCBhY2NlcHRzIGFuXG4gKiBvYmplY3QgbWFwcGluZyBvZiBzdHlsZSBwcm9wZXJ0aWVzIHRvIHZhbHVlcy5cbiAqXG4gKiBAY29uc3RydWN0b3IgUmVhY3RET01Db21wb25lbnRcbiAqIEBleHRlbmRzIFJlYWN0TXVsdGlDaGlsZFxuICovXG5mdW5jdGlvbiBSZWFjdERPTUNvbXBvbmVudCh0YWcpIHtcbiAgdmFsaWRhdGVEYW5nZXJvdXNUYWcodGFnKTtcbiAgdGhpcy5fdGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7XG4gIHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW4gPSBudWxsO1xuICB0aGlzLl9wcmV2aW91c1N0eWxlID0gbnVsbDtcbiAgdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBudWxsO1xuICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgdGhpcy5fd3JhcHBlclN0YXRlID0gbnVsbDtcbiAgdGhpcy5fdG9wTGV2ZWxXcmFwcGVyID0gbnVsbDtcbiAgdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzID0gbnVsbDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB0aGlzLl91bnByb2Nlc3NlZENvbnRleHREZXYgPSBudWxsO1xuICAgIHRoaXMuX3Byb2Nlc3NlZENvbnRleHREZXYgPSBudWxsO1xuICB9XG59XG5cblJlYWN0RE9NQ29tcG9uZW50LmRpc3BsYXlOYW1lID0gJ1JlYWN0RE9NQ29tcG9uZW50JztcblxuUmVhY3RET01Db21wb25lbnQuTWl4aW4gPSB7XG5cbiAgY29uc3RydWN0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gZWxlbWVudDtcbiAgfSxcblxuICAvKipcbiAgICogR2VuZXJhdGVzIHJvb3QgdGFnIG1hcmt1cCB0aGVuIHJlY3Vyc2VzLiBUaGlzIG1ldGhvZCBoYXMgc2lkZSBlZmZlY3RzIGFuZFxuICAgKiBpcyBub3QgaWRlbXBvdGVudC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgVGhlIHJvb3QgRE9NIElEIGZvciB0aGlzIG5vZGUuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjb21wdXRlZCBtYXJrdXAuXG4gICAqL1xuICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gKHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gcm9vdElEO1xuXG4gICAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cbiAgICBzd2l0Y2ggKHRoaXMuX3RhZykge1xuICAgICAgY2FzZSAnaWZyYW1lJzpcbiAgICAgIGNhc2UgJ2ltZyc6XG4gICAgICBjYXNlICdmb3JtJzpcbiAgICAgIGNhc2UgJ3ZpZGVvJzpcbiAgICAgIGNhc2UgJ2F1ZGlvJzpcbiAgICAgICAgdGhpcy5fd3JhcHBlclN0YXRlID0ge1xuICAgICAgICAgIGxpc3RlbmVyczogbnVsbFxuICAgICAgICB9O1xuICAgICAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKHRyYXBCdWJibGVkRXZlbnRzTG9jYWwsIHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1dHRvbic6XG4gICAgICAgIHByb3BzID0gUmVhY3RET01CdXR0b24uZ2V0TmF0aXZlUHJvcHModGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgUmVhY3RET01JbnB1dC5tb3VudFdyYXBwZXIodGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBwcm9wcyA9IFJlYWN0RE9NSW5wdXQuZ2V0TmF0aXZlUHJvcHModGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ29wdGlvbic6XG4gICAgICAgIFJlYWN0RE9NT3B0aW9uLm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHByb3BzID0gUmVhY3RET01PcHRpb24uZ2V0TmF0aXZlUHJvcHModGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgIFJlYWN0RE9NU2VsZWN0Lm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHByb3BzID0gUmVhY3RET01TZWxlY3QuZ2V0TmF0aXZlUHJvcHModGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBjb250ZXh0ID0gUmVhY3RET01TZWxlY3QucHJvY2Vzc0NoaWxkQ29udGV4dCh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICBSZWFjdERPTVRleHRhcmVhLm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHByb3BzID0gUmVhY3RET01UZXh0YXJlYS5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGFzc2VydFZhbGlkUHJvcHModGhpcywgcHJvcHMpO1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pIHtcbiAgICAgICAgdmFsaWRhdGVET01OZXN0aW5nKHRoaXMuX3RhZywgdGhpcywgY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB0aGlzLl91bnByb2Nlc3NlZENvbnRleHREZXYgPSBjb250ZXh0O1xuICAgICAgdGhpcy5fcHJvY2Vzc2VkQ29udGV4dERldiA9IHByb2Nlc3NDaGlsZENvbnRleHREZXYoY29udGV4dCwgdGhpcyk7XG4gICAgICBjb250ZXh0ID0gdGhpcy5fcHJvY2Vzc2VkQ29udGV4dERldjtcbiAgICB9XG5cbiAgICB2YXIgbW91bnRJbWFnZTtcbiAgICBpZiAodHJhbnNhY3Rpb24udXNlQ3JlYXRlRWxlbWVudCkge1xuICAgICAgdmFyIG93bmVyRG9jdW1lbnQgPSBjb250ZXh0W1JlYWN0TW91bnQub3duZXJEb2N1bWVudENvbnRleHRLZXldO1xuICAgICAgdmFyIGVsID0gb3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGUpO1xuICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLnNldEF0dHJpYnV0ZUZvcklEKGVsLCB0aGlzLl9yb290Tm9kZUlEKTtcbiAgICAgIC8vIFBvcHVsYXRlIG5vZGUgY2FjaGVcbiAgICAgIFJlYWN0TW91bnQuZ2V0SUQoZWwpO1xuICAgICAgdGhpcy5fdXBkYXRlRE9NUHJvcGVydGllcyh7fSwgcHJvcHMsIHRyYW5zYWN0aW9uLCBlbCk7XG4gICAgICB0aGlzLl9jcmVhdGVJbml0aWFsQ2hpbGRyZW4odHJhbnNhY3Rpb24sIHByb3BzLCBjb250ZXh0LCBlbCk7XG4gICAgICBtb3VudEltYWdlID0gZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0YWdPcGVuID0gdGhpcy5fY3JlYXRlT3BlblRhZ01hcmt1cEFuZFB1dExpc3RlbmVycyh0cmFuc2FjdGlvbiwgcHJvcHMpO1xuICAgICAgdmFyIHRhZ0NvbnRlbnQgPSB0aGlzLl9jcmVhdGVDb250ZW50TWFya3VwKHRyYW5zYWN0aW9uLCBwcm9wcywgY29udGV4dCk7XG4gICAgICBpZiAoIXRhZ0NvbnRlbnQgJiYgb21pdHRlZENsb3NlVGFnc1t0aGlzLl90YWddKSB7XG4gICAgICAgIG1vdW50SW1hZ2UgPSB0YWdPcGVuICsgJy8+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vdW50SW1hZ2UgPSB0YWdPcGVuICsgJz4nICsgdGFnQ29udGVudCArICc8LycgKyB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlICsgJz4nO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG4gICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUobW91bnRSZWFkeUlucHV0V3JhcHBlciwgdGhpcyk7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlICdidXR0b24nOlxuICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICAgICAgaWYgKHByb3BzLmF1dG9Gb2N1cykge1xuICAgICAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoQXV0b0ZvY3VzVXRpbHMuZm9jdXNET01Db21wb25lbnQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiBtb3VudEltYWdlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG1hcmt1cCBmb3IgdGhlIG9wZW4gdGFnIGFuZCBhbGwgYXR0cmlidXRlcy5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaGFzIHNpZGUgZWZmZWN0cyBiZWNhdXNlIGV2ZW50cyBnZXQgcmVnaXN0ZXJlZC5cbiAgICpcbiAgICogSXRlcmF0aW5nIG92ZXIgb2JqZWN0IHByb3BlcnRpZXMgaXMgZmFzdGVyIHRoYW4gaXRlcmF0aW5nIG92ZXIgYXJyYXlzLlxuICAgKiBAc2VlIGh0dHA6Ly9qc3BlcmYuY29tL29iai12cy1hcnItaXRlcmF0aW9uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgb2Ygb3BlbmluZyB0YWcuXG4gICAqL1xuICBfY3JlYXRlT3BlblRhZ01hcmt1cEFuZFB1dExpc3RlbmVyczogZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBwcm9wcykge1xuICAgIHZhciByZXQgPSAnPCcgKyB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuXG4gICAgZm9yICh2YXIgcHJvcEtleSBpbiBwcm9wcykge1xuICAgICAgaWYgKCFwcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wS2V5XTtcbiAgICAgIGlmIChwcm9wVmFsdWUgPT0gbnVsbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChyZWdpc3RyYXRpb25OYW1lTW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSkge1xuICAgICAgICBpZiAocHJvcFZhbHVlKSB7XG4gICAgICAgICAgZW5xdWV1ZVB1dExpc3RlbmVyKHRoaXMuX3Jvb3ROb2RlSUQsIHByb3BLZXksIHByb3BWYWx1ZSwgdHJhbnNhY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJvcEtleSA9PT0gU1RZTEUpIHtcbiAgICAgICAgICBpZiAocHJvcFZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAvLyBTZWUgYF91cGRhdGVET01Qcm9wZXJ0aWVzYC4gc3R5bGUgYmxvY2tcbiAgICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNTdHlsZSA9IHByb3BWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb3BWYWx1ZSA9IHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5ID0gYXNzaWduKHt9LCBwcm9wcy5zdHlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHByb3BWYWx1ZSA9IENTU1Byb3BlcnR5T3BlcmF0aW9ucy5jcmVhdGVNYXJrdXBGb3JTdHlsZXMocHJvcFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFya3VwID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuX3RhZyAhPSBudWxsICYmIGlzQ3VzdG9tQ29tcG9uZW50KHRoaXMuX3RhZywgcHJvcHMpKSB7XG4gICAgICAgICAgaWYgKHByb3BLZXkgIT09IENISUxEUkVOKSB7XG4gICAgICAgICAgICBtYXJrdXAgPSBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuY3JlYXRlTWFya3VwRm9yQ3VzdG9tQXR0cmlidXRlKHByb3BLZXksIHByb3BWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hcmt1cCA9IERPTVByb3BlcnR5T3BlcmF0aW9ucy5jcmVhdGVNYXJrdXBGb3JQcm9wZXJ0eShwcm9wS2V5LCBwcm9wVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXJrdXApIHtcbiAgICAgICAgICByZXQgKz0gJyAnICsgbWFya3VwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRm9yIHN0YXRpYyBwYWdlcywgbm8gbmVlZCB0byBwdXQgUmVhY3QgSUQgYW5kIGNoZWNrc3VtLiBTYXZlcyBsb3RzIG9mXG4gICAgLy8gYnl0ZXMuXG4gICAgaWYgKHRyYW5zYWN0aW9uLnJlbmRlclRvU3RhdGljTWFya3VwKSB7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIHZhciBtYXJrdXBGb3JJRCA9IERPTVByb3BlcnR5T3BlcmF0aW9ucy5jcmVhdGVNYXJrdXBGb3JJRCh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICByZXR1cm4gcmV0ICsgJyAnICsgbWFya3VwRm9ySUQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgbWFya3VwIGZvciB0aGUgY29udGVudCBiZXR3ZWVuIHRoZSB0YWdzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtvYmplY3R9IHByb3BzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEByZXR1cm4ge3N0cmluZ30gQ29udGVudCBtYXJrdXAuXG4gICAqL1xuICBfY3JlYXRlQ29udGVudE1hcmt1cDogZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBwcm9wcywgY29udGV4dCkge1xuICAgIHZhciByZXQgPSAnJztcblxuICAgIC8vIEludGVudGlvbmFsIHVzZSBvZiAhPSB0byBhdm9pZCBjYXRjaGluZyB6ZXJvL2ZhbHNlLlxuICAgIHZhciBpbm5lckhUTUwgPSBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTDtcbiAgICBpZiAoaW5uZXJIVE1MICE9IG51bGwpIHtcbiAgICAgIGlmIChpbm5lckhUTUwuX19odG1sICE9IG51bGwpIHtcbiAgICAgICAgcmV0ID0gaW5uZXJIVE1MLl9faHRtbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGNvbnRlbnRUb1VzZSA9IENPTlRFTlRfVFlQRVNbdHlwZW9mIHByb3BzLmNoaWxkcmVuXSA/IHByb3BzLmNoaWxkcmVuIDogbnVsbDtcbiAgICAgIHZhciBjaGlsZHJlblRvVXNlID0gY29udGVudFRvVXNlICE9IG51bGwgPyBudWxsIDogcHJvcHMuY2hpbGRyZW47XG4gICAgICBpZiAoY29udGVudFRvVXNlICE9IG51bGwpIHtcbiAgICAgICAgLy8gVE9ETzogVmFsaWRhdGUgdGhhdCB0ZXh0IGlzIGFsbG93ZWQgYXMgYSBjaGlsZCBvZiB0aGlzIG5vZGVcbiAgICAgICAgcmV0ID0gZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKGNvbnRlbnRUb1VzZSk7XG4gICAgICB9IGVsc2UgaWYgKGNoaWxkcmVuVG9Vc2UgIT0gbnVsbCkge1xuICAgICAgICB2YXIgbW91bnRJbWFnZXMgPSB0aGlzLm1vdW50Q2hpbGRyZW4oY2hpbGRyZW5Ub1VzZSwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICByZXQgPSBtb3VudEltYWdlcy5qb2luKCcnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5ld2xpbmVFYXRpbmdUYWdzW3RoaXMuX3RhZ10gJiYgcmV0LmNoYXJBdCgwKSA9PT0gJ1xcbicpIHtcbiAgICAgIC8vIHRleHQvaHRtbCBpZ25vcmVzIHRoZSBmaXJzdCBjaGFyYWN0ZXIgaW4gdGhlc2UgdGFncyBpZiBpdCdzIGEgbmV3bGluZVxuICAgICAgLy8gUHJlZmVyIHRvIGJyZWFrIGFwcGxpY2F0aW9uL3htbCBvdmVyIHRleHQvaHRtbCAoZm9yIG5vdykgYnkgYWRkaW5nXG4gICAgICAvLyBhIG5ld2xpbmUgc3BlY2lmaWNhbGx5IHRvIGdldCBlYXRlbiBieSB0aGUgcGFyc2VyLiAoQWx0ZXJuYXRlbHkgZm9yXG4gICAgICAvLyB0ZXh0YXJlYXMsIHJlcGxhY2luZyBcIl5cXG5cIiB3aXRoIFwiXFxyXFxuXCIgZG9lc24ndCBnZXQgZWF0ZW4sIGFuZCB0aGUgZmlyc3RcbiAgICAgIC8vIFxcciBpcyBub3JtYWxpemVkIG91dCBieSBIVE1MVGV4dEFyZWFFbGVtZW50I3ZhbHVlLilcbiAgICAgIC8vIFNlZTogPGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWwtcG9seWdsb3QvI25ld2xpbmVzLWluLXRleHRhcmVhLWFuZC1wcmU+XG4gICAgICAvLyBTZWU6IDxodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9zeW50YXguaHRtbCNlbGVtZW50LXJlc3RyaWN0aW9ucz5cbiAgICAgIC8vIFNlZTogPGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L3N5bnRheC5odG1sI25ld2xpbmVzPlxuICAgICAgLy8gU2VlOiBQYXJzaW5nIG9mIFwidGV4dGFyZWFcIiBcImxpc3RpbmdcIiBhbmQgXCJwcmVcIiBlbGVtZW50c1xuICAgICAgLy8gIGZyb20gPGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmJvZHk+XG4gICAgICByZXR1cm4gJ1xcbicgKyByZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICB9LFxuXG4gIF9jcmVhdGVJbml0aWFsQ2hpbGRyZW46IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcHJvcHMsIGNvbnRleHQsIGVsKSB7XG4gICAgLy8gSW50ZW50aW9uYWwgdXNlIG9mICE9IHRvIGF2b2lkIGNhdGNoaW5nIHplcm8vZmFsc2UuXG4gICAgdmFyIGlubmVySFRNTCA9IHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MO1xuICAgIGlmIChpbm5lckhUTUwgIT0gbnVsbCkge1xuICAgICAgaWYgKGlubmVySFRNTC5fX2h0bWwgIT0gbnVsbCkge1xuICAgICAgICBzZXRJbm5lckhUTUwoZWwsIGlubmVySFRNTC5fX2h0bWwpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY29udGVudFRvVXNlID0gQ09OVEVOVF9UWVBFU1t0eXBlb2YgcHJvcHMuY2hpbGRyZW5dID8gcHJvcHMuY2hpbGRyZW4gOiBudWxsO1xuICAgICAgdmFyIGNoaWxkcmVuVG9Vc2UgPSBjb250ZW50VG9Vc2UgIT0gbnVsbCA/IG51bGwgOiBwcm9wcy5jaGlsZHJlbjtcbiAgICAgIGlmIChjb250ZW50VG9Vc2UgIT0gbnVsbCkge1xuICAgICAgICAvLyBUT0RPOiBWYWxpZGF0ZSB0aGF0IHRleHQgaXMgYWxsb3dlZCBhcyBhIGNoaWxkIG9mIHRoaXMgbm9kZVxuICAgICAgICBzZXRUZXh0Q29udGVudChlbCwgY29udGVudFRvVXNlKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hpbGRyZW5Ub1VzZSAhPSBudWxsKSB7XG4gICAgICAgIHZhciBtb3VudEltYWdlcyA9IHRoaXMubW91bnRDaGlsZHJlbihjaGlsZHJlblRvVXNlLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW91bnRJbWFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBlbC5hcHBlbmRDaGlsZChtb3VudEltYWdlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlY2VpdmVzIGEgbmV4dCBlbGVtZW50IGFuZCB1cGRhdGVzIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnRcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqL1xuICByZWNlaXZlQ29tcG9uZW50OiBmdW5jdGlvbiAobmV4dEVsZW1lbnQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdmFyIHByZXZFbGVtZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQ7XG4gICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBuZXh0RWxlbWVudDtcbiAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudCh0cmFuc2FjdGlvbiwgcHJldkVsZW1lbnQsIG5leHRFbGVtZW50LCBjb250ZXh0KTtcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlcyBhIG5hdGl2ZSBET00gY29tcG9uZW50IGFmdGVyIGl0IGhhcyBhbHJlYWR5IGJlZW4gYWxsb2NhdGVkIGFuZFxuICAgKiBhdHRhY2hlZCB0byB0aGUgRE9NLiBSZWNvbmNpbGVzIHRoZSByb290IERPTSBub2RlLCB0aGVuIHJlY3Vyc2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBwcmV2RWxlbWVudFxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnRcbiAgICogQGludGVybmFsXG4gICAqIEBvdmVycmlkYWJsZVxuICAgKi9cbiAgdXBkYXRlQ29tcG9uZW50OiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCwgY29udGV4dCkge1xuICAgIHZhciBsYXN0UHJvcHMgPSBwcmV2RWxlbWVudC5wcm9wcztcbiAgICB2YXIgbmV4dFByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cbiAgICBzd2l0Y2ggKHRoaXMuX3RhZykge1xuICAgICAgY2FzZSAnYnV0dG9uJzpcbiAgICAgICAgbGFzdFByb3BzID0gUmVhY3RET01CdXR0b24uZ2V0TmF0aXZlUHJvcHModGhpcywgbGFzdFByb3BzKTtcbiAgICAgICAgbmV4dFByb3BzID0gUmVhY3RET01CdXR0b24uZ2V0TmF0aXZlUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgIFJlYWN0RE9NSW5wdXQudXBkYXRlV3JhcHBlcih0aGlzKTtcbiAgICAgICAgbGFzdFByb3BzID0gUmVhY3RET01JbnB1dC5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTUlucHV0LmdldE5hdGl2ZVByb3BzKHRoaXMsIG5leHRQcm9wcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb3B0aW9uJzpcbiAgICAgICAgbGFzdFByb3BzID0gUmVhY3RET01PcHRpb24uZ2V0TmF0aXZlUHJvcHModGhpcywgbGFzdFByb3BzKTtcbiAgICAgICAgbmV4dFByb3BzID0gUmVhY3RET01PcHRpb24uZ2V0TmF0aXZlUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTVNlbGVjdC5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTVNlbGVjdC5nZXROYXRpdmVQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICAgICAgUmVhY3RET01UZXh0YXJlYS51cGRhdGVXcmFwcGVyKHRoaXMpO1xuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTVRleHRhcmVhLmdldE5hdGl2ZVByb3BzKHRoaXMsIGxhc3RQcm9wcyk7XG4gICAgICAgIG5leHRQcm9wcyA9IFJlYWN0RE9NVGV4dGFyZWEuZ2V0TmF0aXZlUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIElmIHRoZSBjb250ZXh0IGlzIHJlZmVyZW5jZS1lcXVhbCB0byB0aGUgb2xkIG9uZSwgcGFzcyBkb3duIHRoZSBzYW1lXG4gICAgICAvLyBwcm9jZXNzZWQgb2JqZWN0IHNvIHRoZSB1cGRhdGUgYmFpbG91dCBpbiBSZWFjdFJlY29uY2lsZXIgYmVoYXZlc1xuICAgICAgLy8gY29ycmVjdGx5IChhbmQgaWRlbnRpY2FsbHkgaW4gZGV2IGFuZCBwcm9kKS4gU2VlICM1MDA1LlxuICAgICAgaWYgKHRoaXMuX3VucHJvY2Vzc2VkQ29udGV4dERldiAhPT0gY29udGV4dCkge1xuICAgICAgICB0aGlzLl91bnByb2Nlc3NlZENvbnRleHREZXYgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2ID0gcHJvY2Vzc0NoaWxkQ29udGV4dERldihjb250ZXh0LCB0aGlzKTtcbiAgICAgIH1cbiAgICAgIGNvbnRleHQgPSB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2O1xuICAgIH1cblxuICAgIGFzc2VydFZhbGlkUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICB0aGlzLl91cGRhdGVET01Qcm9wZXJ0aWVzKGxhc3RQcm9wcywgbmV4dFByb3BzLCB0cmFuc2FjdGlvbiwgbnVsbCk7XG4gICAgdGhpcy5fdXBkYXRlRE9NQ2hpbGRyZW4obGFzdFByb3BzLCBuZXh0UHJvcHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcblxuICAgIGlmICghY2FuRGVmaW5lUHJvcGVydHkgJiYgdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzKSB7XG4gICAgICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMucHJvcHMgPSBuZXh0UHJvcHM7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3RhZyA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgIC8vIDxzZWxlY3Q+IHZhbHVlIHVwZGF0ZSBuZWVkcyB0byBvY2N1ciBhZnRlciA8b3B0aW9uPiBjaGlsZHJlblxuICAgICAgLy8gcmVjb25jaWxpYXRpb25cbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUocG9zdFVwZGF0ZVNlbGVjdFdyYXBwZXIsIHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVjb25jaWxlcyB0aGUgcHJvcGVydGllcyBieSBkZXRlY3RpbmcgZGlmZmVyZW5jZXMgaW4gcHJvcGVydHkgdmFsdWVzIGFuZFxuICAgKiB1cGRhdGluZyB0aGUgRE9NIGFzIG5lY2Vzc2FyeS4gVGhpcyBmdW5jdGlvbiBpcyBwcm9iYWJseSB0aGUgc2luZ2xlIG1vc3RcbiAgICogY3JpdGljYWwgcGF0aCBmb3IgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uLlxuICAgKlxuICAgKiBUT0RPOiBCZW5jaG1hcmsgd2hldGhlciBjaGVja2luZyBmb3IgY2hhbmdlZCB2YWx1ZXMgaW4gbWVtb3J5IGFjdHVhbGx5XG4gICAqICAgICAgIGltcHJvdmVzIHBlcmZvcm1hbmNlIChlc3BlY2lhbGx5IHN0YXRpY2FsbHkgcG9zaXRpb25lZCBlbGVtZW50cykuXG4gICAqIFRPRE86IEJlbmNobWFyayB0aGUgZWZmZWN0cyBvZiBwdXR0aW5nIHRoaXMgYXQgdGhlIHRvcCBzaW5jZSA5OSUgb2YgcHJvcHNcbiAgICogICAgICAgZG8gbm90IGNoYW5nZSBmb3IgYSBnaXZlbiByZWNvbmNpbGlhdGlvbi5cbiAgICogVE9ETzogQmVuY2htYXJrIGFyZWFzIHRoYXQgY2FuIGJlIGltcHJvdmVkIHdpdGggY2FjaGluZy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtvYmplY3R9IGxhc3RQcm9wc1xuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHs/RE9NRWxlbWVudH0gbm9kZVxuICAgKi9cbiAgX3VwZGF0ZURPTVByb3BlcnRpZXM6IGZ1bmN0aW9uIChsYXN0UHJvcHMsIG5leHRQcm9wcywgdHJhbnNhY3Rpb24sIG5vZGUpIHtcbiAgICB2YXIgcHJvcEtleTtcbiAgICB2YXIgc3R5bGVOYW1lO1xuICAgIHZhciBzdHlsZVVwZGF0ZXM7XG4gICAgZm9yIChwcm9wS2V5IGluIGxhc3RQcm9wcykge1xuICAgICAgaWYgKG5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSB8fCAhbGFzdFByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BLZXkgPT09IFNUWUxFKSB7XG4gICAgICAgIHZhciBsYXN0U3R5bGUgPSB0aGlzLl9wcmV2aW91c1N0eWxlQ29weTtcbiAgICAgICAgZm9yIChzdHlsZU5hbWUgaW4gbGFzdFN0eWxlKSB7XG4gICAgICAgICAgaWYgKGxhc3RTdHlsZS5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpKSB7XG4gICAgICAgICAgICBzdHlsZVVwZGF0ZXMgPSBzdHlsZVVwZGF0ZXMgfHwge307XG4gICAgICAgICAgICBzdHlsZVVwZGF0ZXNbc3R5bGVOYW1lXSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlQ29weSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGlmIChsYXN0UHJvcHNbcHJvcEtleV0pIHtcbiAgICAgICAgICAvLyBPbmx5IGNhbGwgZGVsZXRlTGlzdGVuZXIgaWYgdGhlcmUgd2FzIGEgbGlzdGVuZXIgcHJldmlvdXNseSBvclxuICAgICAgICAgIC8vIGVsc2Ugd2lsbERlbGV0ZUxpc3RlbmVyIGdldHMgY2FsbGVkIHdoZW4gdGhlcmUgd2Fzbid0IGFjdHVhbGx5IGFcbiAgICAgICAgICAvLyBsaXN0ZW5lciAoZS5nLiwgb25DbGljaz17bnVsbH0pXG4gICAgICAgICAgZGVsZXRlTGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoRE9NUHJvcGVydHkucHJvcGVydGllc1twcm9wS2V5XSB8fCBET01Qcm9wZXJ0eS5pc0N1c3RvbUF0dHJpYnV0ZShwcm9wS2V5KSkge1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgICAgICB9XG4gICAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5kZWxldGVWYWx1ZUZvclByb3BlcnR5KG5vZGUsIHByb3BLZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHByb3BLZXkgaW4gbmV4dFByb3BzKSB7XG4gICAgICB2YXIgbmV4dFByb3AgPSBuZXh0UHJvcHNbcHJvcEtleV07XG4gICAgICB2YXIgbGFzdFByb3AgPSBwcm9wS2V5ID09PSBTVFlMRSA/IHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5IDogbGFzdFByb3BzW3Byb3BLZXldO1xuICAgICAgaWYgKCFuZXh0UHJvcHMuaGFzT3duUHJvcGVydHkocHJvcEtleSkgfHwgbmV4dFByb3AgPT09IGxhc3RQcm9wKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BLZXkgPT09IFNUWUxFKSB7XG4gICAgICAgIGlmIChuZXh0UHJvcCkge1xuICAgICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBjaGVja0FuZFdhcm5Gb3JNdXRhdGVkU3R5bGUodGhpcy5fcHJldmlvdXNTdHlsZUNvcHksIHRoaXMuX3ByZXZpb3VzU3R5bGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNTdHlsZSA9IG5leHRQcm9wO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXh0UHJvcCA9IHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5ID0gYXNzaWduKHt9LCBuZXh0UHJvcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0UHJvcCkge1xuICAgICAgICAgIC8vIFVuc2V0IHN0eWxlcyBvbiBgbGFzdFByb3BgIGJ1dCBub3Qgb24gYG5leHRQcm9wYC5cbiAgICAgICAgICBmb3IgKHN0eWxlTmFtZSBpbiBsYXN0UHJvcCkge1xuICAgICAgICAgICAgaWYgKGxhc3RQcm9wLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkgJiYgKCFuZXh0UHJvcCB8fCAhbmV4dFByb3AuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSkpIHtcbiAgICAgICAgICAgICAgc3R5bGVVcGRhdGVzID0gc3R5bGVVcGRhdGVzIHx8IHt9O1xuICAgICAgICAgICAgICBzdHlsZVVwZGF0ZXNbc3R5bGVOYW1lXSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBVcGRhdGUgc3R5bGVzIHRoYXQgY2hhbmdlZCBzaW5jZSBgbGFzdFByb3BgLlxuICAgICAgICAgIGZvciAoc3R5bGVOYW1lIGluIG5leHRQcm9wKSB7XG4gICAgICAgICAgICBpZiAobmV4dFByb3AuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSAmJiBsYXN0UHJvcFtzdHlsZU5hbWVdICE9PSBuZXh0UHJvcFtzdHlsZU5hbWVdKSB7XG4gICAgICAgICAgICAgIHN0eWxlVXBkYXRlcyA9IHN0eWxlVXBkYXRlcyB8fCB7fTtcbiAgICAgICAgICAgICAgc3R5bGVVcGRhdGVzW3N0eWxlTmFtZV0gPSBuZXh0UHJvcFtzdHlsZU5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZWxpZXMgb24gYHVwZGF0ZVN0eWxlc0J5SURgIG5vdCBtdXRhdGluZyBgc3R5bGVVcGRhdGVzYC5cbiAgICAgICAgICBzdHlsZVVwZGF0ZXMgPSBuZXh0UHJvcDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZWdpc3RyYXRpb25OYW1lTW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSkge1xuICAgICAgICBpZiAobmV4dFByb3ApIHtcbiAgICAgICAgICBlbnF1ZXVlUHV0TGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSwgbmV4dFByb3AsIHRyYW5zYWN0aW9uKTtcbiAgICAgICAgfSBlbHNlIGlmIChsYXN0UHJvcCkge1xuICAgICAgICAgIGRlbGV0ZUxpc3RlbmVyKHRoaXMuX3Jvb3ROb2RlSUQsIHByb3BLZXkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzQ3VzdG9tQ29tcG9uZW50KHRoaXMuX3RhZywgbmV4dFByb3BzKSkge1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wS2V5ID09PSBDSElMRFJFTikge1xuICAgICAgICAgIG5leHRQcm9wID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JBdHRyaWJ1dGUobm9kZSwgcHJvcEtleSwgbmV4dFByb3ApO1xuICAgICAgfSBlbHNlIGlmIChET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW3Byb3BLZXldIHx8IERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKHByb3BLZXkpKSB7XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2UncmUgdXBkYXRpbmcgdG8gbnVsbCBvciB1bmRlZmluZWQsIHdlIHNob3VsZCByZW1vdmUgdGhlIHByb3BlcnR5XG4gICAgICAgIC8vIGZyb20gdGhlIERPTSBub2RlIGluc3RlYWQgb2YgaW5hZHZlcnRhbnRseSBzZXR0aW5nIHRvIGEgc3RyaW5nLiBUaGlzXG4gICAgICAgIC8vIGJyaW5ncyB1cyBpbiBsaW5lIHdpdGggdGhlIHNhbWUgYmVoYXZpb3Igd2UgaGF2ZSBvbiBpbml0aWFsIHJlbmRlci5cbiAgICAgICAgaWYgKG5leHRQcm9wICE9IG51bGwpIHtcbiAgICAgICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JQcm9wZXJ0eShub2RlLCBwcm9wS2V5LCBuZXh0UHJvcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLmRlbGV0ZVZhbHVlRm9yUHJvcGVydHkobm9kZSwgcHJvcEtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHN0eWxlVXBkYXRlcykge1xuICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICB9XG4gICAgICBDU1NQcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JTdHlsZXMobm9kZSwgc3R5bGVVcGRhdGVzKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlY29uY2lsZXMgdGhlIGNoaWxkcmVuIHdpdGggdGhlIHZhcmlvdXMgcHJvcGVydGllcyB0aGF0IGFmZmVjdCB0aGVcbiAgICogY2hpbGRyZW4gY29udGVudC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGxhc3RQcm9wc1xuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICovXG4gIF91cGRhdGVET01DaGlsZHJlbjogZnVuY3Rpb24gKGxhc3RQcm9wcywgbmV4dFByb3BzLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHZhciBsYXN0Q29udGVudCA9IENPTlRFTlRfVFlQRVNbdHlwZW9mIGxhc3RQcm9wcy5jaGlsZHJlbl0gPyBsYXN0UHJvcHMuY2hpbGRyZW4gOiBudWxsO1xuICAgIHZhciBuZXh0Q29udGVudCA9IENPTlRFTlRfVFlQRVNbdHlwZW9mIG5leHRQcm9wcy5jaGlsZHJlbl0gPyBuZXh0UHJvcHMuY2hpbGRyZW4gOiBudWxsO1xuXG4gICAgdmFyIGxhc3RIdG1sID0gbGFzdFByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MICYmIGxhc3RQcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTC5fX2h0bWw7XG4gICAgdmFyIG5leHRIdG1sID0gbmV4dFByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MICYmIG5leHRQcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTC5fX2h0bWw7XG5cbiAgICAvLyBOb3RlIHRoZSB1c2Ugb2YgYCE9YCB3aGljaCBjaGVja3MgZm9yIG51bGwgb3IgdW5kZWZpbmVkLlxuICAgIHZhciBsYXN0Q2hpbGRyZW4gPSBsYXN0Q29udGVudCAhPSBudWxsID8gbnVsbCA6IGxhc3RQcm9wcy5jaGlsZHJlbjtcbiAgICB2YXIgbmV4dENoaWxkcmVuID0gbmV4dENvbnRlbnQgIT0gbnVsbCA/IG51bGwgOiBuZXh0UHJvcHMuY2hpbGRyZW47XG5cbiAgICAvLyBJZiB3ZSdyZSBzd2l0Y2hpbmcgZnJvbSBjaGlsZHJlbiB0byBjb250ZW50L2h0bWwgb3IgdmljZSB2ZXJzYSwgcmVtb3ZlXG4gICAgLy8gdGhlIG9sZCBjb250ZW50XG4gICAgdmFyIGxhc3RIYXNDb250ZW50T3JIdG1sID0gbGFzdENvbnRlbnQgIT0gbnVsbCB8fCBsYXN0SHRtbCAhPSBudWxsO1xuICAgIHZhciBuZXh0SGFzQ29udGVudE9ySHRtbCA9IG5leHRDb250ZW50ICE9IG51bGwgfHwgbmV4dEh0bWwgIT0gbnVsbDtcbiAgICBpZiAobGFzdENoaWxkcmVuICE9IG51bGwgJiYgbmV4dENoaWxkcmVuID09IG51bGwpIHtcbiAgICAgIHRoaXMudXBkYXRlQ2hpbGRyZW4obnVsbCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgIH0gZWxzZSBpZiAobGFzdEhhc0NvbnRlbnRPckh0bWwgJiYgIW5leHRIYXNDb250ZW50T3JIdG1sKSB7XG4gICAgICB0aGlzLnVwZGF0ZVRleHRDb250ZW50KCcnKTtcbiAgICB9XG5cbiAgICBpZiAobmV4dENvbnRlbnQgIT0gbnVsbCkge1xuICAgICAgaWYgKGxhc3RDb250ZW50ICE9PSBuZXh0Q29udGVudCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRleHRDb250ZW50KCcnICsgbmV4dENvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobmV4dEh0bWwgIT0gbnVsbCkge1xuICAgICAgaWYgKGxhc3RIdG1sICE9PSBuZXh0SHRtbCkge1xuICAgICAgICB0aGlzLnVwZGF0ZU1hcmt1cCgnJyArIG5leHRIdG1sKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG5leHRDaGlsZHJlbiAhPSBudWxsKSB7XG4gICAgICB0aGlzLnVwZGF0ZUNoaWxkcmVuKG5leHRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGVzdHJveXMgYWxsIGV2ZW50IHJlZ2lzdHJhdGlvbnMgZm9yIHRoaXMgaW5zdGFuY2UuIERvZXMgbm90IHJlbW92ZSBmcm9tXG4gICAqIHRoZSBET00uIFRoYXQgbXVzdCBiZSBkb25lIGJ5IHRoZSBwYXJlbnQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdW5tb3VudENvbXBvbmVudDogZnVuY3Rpb24gKCkge1xuICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG4gICAgICBjYXNlICdpZnJhbWUnOlxuICAgICAgY2FzZSAnaW1nJzpcbiAgICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgY2FzZSAndmlkZW8nOlxuICAgICAgY2FzZSAnYXVkaW8nOlxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fd3JhcHBlclN0YXRlLmxpc3RlbmVycztcbiAgICAgICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNbaV0ucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICBSZWFjdERPTUlucHV0LnVubW91bnRXcmFwcGVyKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2h0bWwnOlxuICAgICAgY2FzZSAnaGVhZCc6XG4gICAgICBjYXNlICdib2R5JzpcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbXBvbmVudHMgbGlrZSA8aHRtbD4gPGhlYWQ+IGFuZCA8Ym9keT4gY2FuJ3QgYmUgcmVtb3ZlZCBvciBhZGRlZFxuICAgICAgICAgKiBlYXNpbHkgaW4gYSBjcm9zcy1icm93c2VyIHdheSwgaG93ZXZlciBpdCdzIHZhbHVhYmxlIHRvIGJlIGFibGUgdG9cbiAgICAgICAgICogdGFrZSBhZHZhbnRhZ2Ugb2YgUmVhY3QncyByZWNvbmNpbGlhdGlvbiBmb3Igc3R5bGluZyBhbmQgPHRpdGxlPlxuICAgICAgICAgKiBtYW5hZ2VtZW50LiBTbyB3ZSBqdXN0IGRvY3VtZW50IGl0IGFuZCB0aHJvdyBpbiBkYW5nZXJvdXMgY2FzZXMuXG4gICAgICAgICAqL1xuICAgICAgICAhZmFsc2UgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnPCVzPiB0cmllZCB0byB1bm1vdW50LiBCZWNhdXNlIG9mIGNyb3NzLWJyb3dzZXIgcXVpcmtzIGl0IGlzICcgKyAnaW1wb3NzaWJsZSB0byB1bm1vdW50IHNvbWUgdG9wLWxldmVsIGNvbXBvbmVudHMgKGVnIDxodG1sPiwgJyArICc8aGVhZD4sIGFuZCA8Ym9keT4pIHJlbGlhYmx5IGFuZCBlZmZpY2llbnRseS4gVG8gZml4IHRoaXMsIGhhdmUgYSAnICsgJ3NpbmdsZSB0b3AtbGV2ZWwgY29tcG9uZW50IHRoYXQgbmV2ZXIgdW5tb3VudHMgcmVuZGVyIHRoZXNlICcgKyAnZWxlbWVudHMuJywgdGhpcy5fdGFnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMudW5tb3VudENoaWxkcmVuKCk7XG4gICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmRlbGV0ZUFsbExpc3RlbmVycyh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudC51bm1vdW50SURGcm9tRW52aXJvbm1lbnQodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IG51bGw7XG4gICAgdGhpcy5fd3JhcHBlclN0YXRlID0gbnVsbDtcbiAgICBpZiAodGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzKSB7XG4gICAgICB2YXIgbm9kZSA9IHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcztcbiAgICAgIG5vZGUuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQgPSBudWxsO1xuICAgICAgdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzID0gbnVsbDtcbiAgICB9XG4gIH0sXG5cbiAgZ2V0UHVibGljSW5zdGFuY2U6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcykge1xuICAgICAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG5cbiAgICAgIG5vZGUuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQgPSB0aGlzO1xuICAgICAgbm9kZS5nZXRET01Ob2RlID0gbGVnYWN5R2V0RE9NTm9kZTtcbiAgICAgIG5vZGUuaXNNb3VudGVkID0gbGVnYWN5SXNNb3VudGVkO1xuICAgICAgbm9kZS5zZXRTdGF0ZSA9IGxlZ2FjeVNldFN0YXRlRXRjO1xuICAgICAgbm9kZS5yZXBsYWNlU3RhdGUgPSBsZWdhY3lTZXRTdGF0ZUV0YztcbiAgICAgIG5vZGUuZm9yY2VVcGRhdGUgPSBsZWdhY3lTZXRTdGF0ZUV0YztcbiAgICAgIG5vZGUuc2V0UHJvcHMgPSBsZWdhY3lTZXRQcm9wcztcbiAgICAgIG5vZGUucmVwbGFjZVByb3BzID0gbGVnYWN5UmVwbGFjZVByb3BzO1xuXG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhub2RlLCBsZWdhY3lQcm9wc0Rlc2NyaXB0b3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHVwZGF0ZUNvbXBvbmVudCB3aWxsIHVwZGF0ZSB0aGlzIHByb3BlcnR5IG9uIHN1YnNlcXVlbnQgcmVuZGVyc1xuICAgICAgICAgIG5vZGUucHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdXBkYXRlQ29tcG9uZW50IHdpbGwgdXBkYXRlIHRoaXMgcHJvcGVydHkgb24gc3Vic2VxdWVudCByZW5kZXJzXG4gICAgICAgIG5vZGUucHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICAgIH1cblxuICAgICAgdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzID0gbm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcztcbiAgfVxuXG59O1xuXG5SZWFjdFBlcmYubWVhc3VyZU1ldGhvZHMoUmVhY3RET01Db21wb25lbnQsICdSZWFjdERPTUNvbXBvbmVudCcsIHtcbiAgbW91bnRDb21wb25lbnQ6ICdtb3VudENvbXBvbmVudCcsXG4gIHVwZGF0ZUNvbXBvbmVudDogJ3VwZGF0ZUNvbXBvbmVudCdcbn0pO1xuXG5hc3NpZ24oUmVhY3RET01Db21wb25lbnQucHJvdG90eXBlLCBSZWFjdERPTUNvbXBvbmVudC5NaXhpbiwgUmVhY3RNdWx0aUNoaWxkLk1peGluKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUNvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01GYWN0b3JpZXNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEVsZW1lbnRWYWxpZGF0b3IgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudFZhbGlkYXRvcicpO1xuXG52YXIgbWFwT2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvbWFwT2JqZWN0Jyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgZmFjdG9yeSB0aGF0IGNyZWF0ZXMgSFRNTCB0YWcgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRhZyBUYWcgbmFtZSAoZS5nLiBgZGl2YCkuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVET01GYWN0b3J5KHRhZykge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHJldHVybiBSZWFjdEVsZW1lbnRWYWxpZGF0b3IuY3JlYXRlRmFjdG9yeSh0YWcpO1xuICB9XG4gIHJldHVybiBSZWFjdEVsZW1lbnQuY3JlYXRlRmFjdG9yeSh0YWcpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBtYXBwaW5nIGZyb20gc3VwcG9ydGVkIEhUTUwgdGFncyB0byBgUmVhY3RET01Db21wb25lbnRgIGNsYXNzZXMuXG4gKiBUaGlzIGlzIGFsc28gYWNjZXNzaWJsZSB2aWEgYFJlYWN0LkRPTWAuXG4gKlxuICogQHB1YmxpY1xuICovXG52YXIgUmVhY3RET01GYWN0b3JpZXMgPSBtYXBPYmplY3Qoe1xuICBhOiAnYScsXG4gIGFiYnI6ICdhYmJyJyxcbiAgYWRkcmVzczogJ2FkZHJlc3MnLFxuICBhcmVhOiAnYXJlYScsXG4gIGFydGljbGU6ICdhcnRpY2xlJyxcbiAgYXNpZGU6ICdhc2lkZScsXG4gIGF1ZGlvOiAnYXVkaW8nLFxuICBiOiAnYicsXG4gIGJhc2U6ICdiYXNlJyxcbiAgYmRpOiAnYmRpJyxcbiAgYmRvOiAnYmRvJyxcbiAgYmlnOiAnYmlnJyxcbiAgYmxvY2txdW90ZTogJ2Jsb2NrcXVvdGUnLFxuICBib2R5OiAnYm9keScsXG4gIGJyOiAnYnInLFxuICBidXR0b246ICdidXR0b24nLFxuICBjYW52YXM6ICdjYW52YXMnLFxuICBjYXB0aW9uOiAnY2FwdGlvbicsXG4gIGNpdGU6ICdjaXRlJyxcbiAgY29kZTogJ2NvZGUnLFxuICBjb2w6ICdjb2wnLFxuICBjb2xncm91cDogJ2NvbGdyb3VwJyxcbiAgZGF0YTogJ2RhdGEnLFxuICBkYXRhbGlzdDogJ2RhdGFsaXN0JyxcbiAgZGQ6ICdkZCcsXG4gIGRlbDogJ2RlbCcsXG4gIGRldGFpbHM6ICdkZXRhaWxzJyxcbiAgZGZuOiAnZGZuJyxcbiAgZGlhbG9nOiAnZGlhbG9nJyxcbiAgZGl2OiAnZGl2JyxcbiAgZGw6ICdkbCcsXG4gIGR0OiAnZHQnLFxuICBlbTogJ2VtJyxcbiAgZW1iZWQ6ICdlbWJlZCcsXG4gIGZpZWxkc2V0OiAnZmllbGRzZXQnLFxuICBmaWdjYXB0aW9uOiAnZmlnY2FwdGlvbicsXG4gIGZpZ3VyZTogJ2ZpZ3VyZScsXG4gIGZvb3RlcjogJ2Zvb3RlcicsXG4gIGZvcm06ICdmb3JtJyxcbiAgaDE6ICdoMScsXG4gIGgyOiAnaDInLFxuICBoMzogJ2gzJyxcbiAgaDQ6ICdoNCcsXG4gIGg1OiAnaDUnLFxuICBoNjogJ2g2JyxcbiAgaGVhZDogJ2hlYWQnLFxuICBoZWFkZXI6ICdoZWFkZXInLFxuICBoZ3JvdXA6ICdoZ3JvdXAnLFxuICBocjogJ2hyJyxcbiAgaHRtbDogJ2h0bWwnLFxuICBpOiAnaScsXG4gIGlmcmFtZTogJ2lmcmFtZScsXG4gIGltZzogJ2ltZycsXG4gIGlucHV0OiAnaW5wdXQnLFxuICBpbnM6ICdpbnMnLFxuICBrYmQ6ICdrYmQnLFxuICBrZXlnZW46ICdrZXlnZW4nLFxuICBsYWJlbDogJ2xhYmVsJyxcbiAgbGVnZW5kOiAnbGVnZW5kJyxcbiAgbGk6ICdsaScsXG4gIGxpbms6ICdsaW5rJyxcbiAgbWFpbjogJ21haW4nLFxuICBtYXA6ICdtYXAnLFxuICBtYXJrOiAnbWFyaycsXG4gIG1lbnU6ICdtZW51JyxcbiAgbWVudWl0ZW06ICdtZW51aXRlbScsXG4gIG1ldGE6ICdtZXRhJyxcbiAgbWV0ZXI6ICdtZXRlcicsXG4gIG5hdjogJ25hdicsXG4gIG5vc2NyaXB0OiAnbm9zY3JpcHQnLFxuICBvYmplY3Q6ICdvYmplY3QnLFxuICBvbDogJ29sJyxcbiAgb3B0Z3JvdXA6ICdvcHRncm91cCcsXG4gIG9wdGlvbjogJ29wdGlvbicsXG4gIG91dHB1dDogJ291dHB1dCcsXG4gIHA6ICdwJyxcbiAgcGFyYW06ICdwYXJhbScsXG4gIHBpY3R1cmU6ICdwaWN0dXJlJyxcbiAgcHJlOiAncHJlJyxcbiAgcHJvZ3Jlc3M6ICdwcm9ncmVzcycsXG4gIHE6ICdxJyxcbiAgcnA6ICdycCcsXG4gIHJ0OiAncnQnLFxuICBydWJ5OiAncnVieScsXG4gIHM6ICdzJyxcbiAgc2FtcDogJ3NhbXAnLFxuICBzY3JpcHQ6ICdzY3JpcHQnLFxuICBzZWN0aW9uOiAnc2VjdGlvbicsXG4gIHNlbGVjdDogJ3NlbGVjdCcsXG4gIHNtYWxsOiAnc21hbGwnLFxuICBzb3VyY2U6ICdzb3VyY2UnLFxuICBzcGFuOiAnc3BhbicsXG4gIHN0cm9uZzogJ3N0cm9uZycsXG4gIHN0eWxlOiAnc3R5bGUnLFxuICBzdWI6ICdzdWInLFxuICBzdW1tYXJ5OiAnc3VtbWFyeScsXG4gIHN1cDogJ3N1cCcsXG4gIHRhYmxlOiAndGFibGUnLFxuICB0Ym9keTogJ3Rib2R5JyxcbiAgdGQ6ICd0ZCcsXG4gIHRleHRhcmVhOiAndGV4dGFyZWEnLFxuICB0Zm9vdDogJ3Rmb290JyxcbiAgdGg6ICd0aCcsXG4gIHRoZWFkOiAndGhlYWQnLFxuICB0aW1lOiAndGltZScsXG4gIHRpdGxlOiAndGl0bGUnLFxuICB0cjogJ3RyJyxcbiAgdHJhY2s6ICd0cmFjaycsXG4gIHU6ICd1JyxcbiAgdWw6ICd1bCcsXG4gICd2YXInOiAndmFyJyxcbiAgdmlkZW86ICd2aWRlbycsXG4gIHdicjogJ3dicicsXG5cbiAgLy8gU1ZHXG4gIGNpcmNsZTogJ2NpcmNsZScsXG4gIGNsaXBQYXRoOiAnY2xpcFBhdGgnLFxuICBkZWZzOiAnZGVmcycsXG4gIGVsbGlwc2U6ICdlbGxpcHNlJyxcbiAgZzogJ2cnLFxuICBpbWFnZTogJ2ltYWdlJyxcbiAgbGluZTogJ2xpbmUnLFxuICBsaW5lYXJHcmFkaWVudDogJ2xpbmVhckdyYWRpZW50JyxcbiAgbWFzazogJ21hc2snLFxuICBwYXRoOiAncGF0aCcsXG4gIHBhdHRlcm46ICdwYXR0ZXJuJyxcbiAgcG9seWdvbjogJ3BvbHlnb24nLFxuICBwb2x5bGluZTogJ3BvbHlsaW5lJyxcbiAgcmFkaWFsR3JhZGllbnQ6ICdyYWRpYWxHcmFkaWVudCcsXG4gIHJlY3Q6ICdyZWN0JyxcbiAgc3RvcDogJ3N0b3AnLFxuICBzdmc6ICdzdmcnLFxuICB0ZXh0OiAndGV4dCcsXG4gIHRzcGFuOiAndHNwYW4nXG5cbn0sIGNyZWF0ZURPTUZhY3RvcnkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NRmFjdG9yaWVzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTUZlYXR1cmVGbGFnc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0ge1xuICB1c2VDcmVhdGVFbGVtZW50OiBmYWxzZVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUZlYXR1cmVGbGFnczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01JRE9wZXJhdGlvbnNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NQ2hpbGRyZW5PcGVyYXRpb25zID0gcmVxdWlyZSgnLi9ET01DaGlsZHJlbk9wZXJhdGlvbnMnKTtcbnZhciBET01Qcm9wZXJ0eU9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5T3BlcmF0aW9ucycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogRXJyb3JzIGZvciBwcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIG5vdCBiZSB1cGRhdGVkIHdpdGggYHVwZGF0ZVByb3BlcnR5QnlJRCgpYC5cbiAqXG4gKiBAdHlwZSB7b2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmFyIElOVkFMSURfUFJPUEVSVFlfRVJST1JTID0ge1xuICBkYW5nZXJvdXNseVNldElubmVySFRNTDogJ2BkYW5nZXJvdXNseVNldElubmVySFRNTGAgbXVzdCBiZSBzZXQgdXNpbmcgYHVwZGF0ZUlubmVySFRNTEJ5SUQoKWAuJyxcbiAgc3R5bGU6ICdgc3R5bGVgIG11c3QgYmUgc2V0IHVzaW5nIGB1cGRhdGVTdHlsZXNCeUlEKClgLidcbn07XG5cbi8qKlxuICogT3BlcmF0aW9ucyB1c2VkIHRvIHByb2Nlc3MgdXBkYXRlcyB0byBET00gbm9kZXMuXG4gKi9cbnZhciBSZWFjdERPTUlET3BlcmF0aW9ucyA9IHtcblxuICAvKipcbiAgICogVXBkYXRlcyBhIERPTSBub2RlIHdpdGggbmV3IHByb3BlcnR5IHZhbHVlcy4gVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIHRvXG4gICAqIHVwZGF0ZSBET00gcHJvcGVydGllcyBpbiBgRE9NUHJvcGVydHlgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgdGhlIG5vZGUgdG8gdXBkYXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBBIHZhbGlkIHByb3BlcnR5IG5hbWUsIHNlZSBgRE9NUHJvcGVydHlgLlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIE5ldyB2YWx1ZSBvZiB0aGUgcHJvcGVydHkuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdXBkYXRlUHJvcGVydHlCeUlEOiBmdW5jdGlvbiAoaWQsIG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUoaWQpO1xuICAgICEhSU5WQUxJRF9QUk9QRVJUWV9FUlJPUlMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndXBkYXRlUHJvcGVydHlCeUlEKC4uLik6ICVzJywgSU5WQUxJRF9QUk9QRVJUWV9FUlJPUlNbbmFtZV0pIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIElmIHdlJ3JlIHVwZGF0aW5nIHRvIG51bGwgb3IgdW5kZWZpbmVkLCB3ZSBzaG91bGQgcmVtb3ZlIHRoZSBwcm9wZXJ0eVxuICAgIC8vIGZyb20gdGhlIERPTSBub2RlIGluc3RlYWQgb2YgaW5hZHZlcnRhbnRseSBzZXR0aW5nIHRvIGEgc3RyaW5nLiBUaGlzXG4gICAgLy8gYnJpbmdzIHVzIGluIGxpbmUgd2l0aCB0aGUgc2FtZSBiZWhhdmlvciB3ZSBoYXZlIG9uIGluaXRpYWwgcmVuZGVyLlxuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0VmFsdWVGb3JQcm9wZXJ0eShub2RlLCBuYW1lLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5kZWxldGVWYWx1ZUZvclByb3BlcnR5KG5vZGUsIG5hbWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYSBET00gbm9kZSB0aGF0IGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQgd2l0aCBtYXJrdXAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiBjaGlsZCB0byBiZSByZXBsYWNlZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBEYW5nZXJvdXMgbWFya3VwIHRvIGluamVjdCBpbiBwbGFjZSBvZiBjaGlsZC5cbiAgICogQGludGVybmFsXG4gICAqIEBzZWUge0Rhbmdlci5kYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cH1cbiAgICovXG4gIGRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDogZnVuY3Rpb24gKGlkLCBtYXJrdXApIHtcbiAgICB2YXIgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZShpZCk7XG4gICAgRE9NQ2hpbGRyZW5PcGVyYXRpb25zLmRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwKG5vZGUsIG1hcmt1cCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSBjb21wb25lbnQncyBjaGlsZHJlbiBieSBwcm9jZXNzaW5nIGEgc2VyaWVzIG9mIHVwZGF0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7YXJyYXk8b2JqZWN0Pn0gdXBkYXRlcyBMaXN0IG9mIHVwZGF0ZSBjb25maWd1cmF0aW9ucy5cbiAgICogQHBhcmFtIHthcnJheTxzdHJpbmc+fSBtYXJrdXAgTGlzdCBvZiBtYXJrdXAgc3RyaW5ncy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBkYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXM6IGZ1bmN0aW9uICh1cGRhdGVzLCBtYXJrdXApIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVwZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHVwZGF0ZXNbaV0ucGFyZW50Tm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh1cGRhdGVzW2ldLnBhcmVudElEKTtcbiAgICB9XG4gICAgRE9NQ2hpbGRyZW5PcGVyYXRpb25zLnByb2Nlc3NVcGRhdGVzKHVwZGF0ZXMsIG1hcmt1cCk7XG4gIH1cbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdERPTUlET3BlcmF0aW9ucywgJ1JlYWN0RE9NSURPcGVyYXRpb25zJywge1xuICBkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQ6ICdkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQnLFxuICBkYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXM6ICdkYW5nZXJvdXNseVByb2Nlc3NDaGlsZHJlblVwZGF0ZXMnXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUlET3BlcmF0aW9uczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01JbnB1dFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NSURPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9SZWFjdERPTUlET3BlcmF0aW9ucycpO1xudmFyIExpbmtlZFZhbHVlVXRpbHMgPSByZXF1aXJlKCcuL0xpbmtlZFZhbHVlVXRpbHMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgaW5zdGFuY2VzQnlSZWFjdElEID0ge307XG5cbmZ1bmN0aW9uIGZvcmNlVXBkYXRlSWZNb3VudGVkKCkge1xuICBpZiAodGhpcy5fcm9vdE5vZGVJRCkge1xuICAgIC8vIERPTSBjb21wb25lbnQgaXMgc3RpbGwgbW91bnRlZDsgdXBkYXRlXG4gICAgUmVhY3RET01JbnB1dC51cGRhdGVXcmFwcGVyKHRoaXMpO1xuICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyBhbiA8aW5wdXQ+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCBhbGxvd3Mgc2V0dGluZyB0aGVzZSBvcHRpb25hbFxuICogcHJvcHM6IGBjaGVja2VkYCwgYHZhbHVlYCwgYGRlZmF1bHRDaGVja2VkYCwgYW5kIGBkZWZhdWx0VmFsdWVgLlxuICpcbiAqIElmIGBjaGVja2VkYCBvciBgdmFsdWVgIGFyZSBub3Qgc3VwcGxpZWQgKG9yIG51bGwvdW5kZWZpbmVkKSwgdXNlciBhY3Rpb25zXG4gKiB0aGF0IGFmZmVjdCB0aGUgY2hlY2tlZCBzdGF0ZSBvciB2YWx1ZSB3aWxsIHRyaWdnZXIgdXBkYXRlcyB0byB0aGUgZWxlbWVudC5cbiAqXG4gKiBJZiB0aGV5IGFyZSBzdXBwbGllZCAoYW5kIG5vdCBudWxsL3VuZGVmaW5lZCksIHRoZSByZW5kZXJlZCBlbGVtZW50IHdpbGwgbm90XG4gKiB0cmlnZ2VyIHVwZGF0ZXMgdG8gdGhlIGVsZW1lbnQuIEluc3RlYWQsIHRoZSBwcm9wcyBtdXN0IGNoYW5nZSBpbiBvcmRlciBmb3JcbiAqIHRoZSByZW5kZXJlZCBlbGVtZW50IHRvIGJlIHVwZGF0ZWQuXG4gKlxuICogVGhlIHJlbmRlcmVkIGVsZW1lbnQgd2lsbCBiZSBpbml0aWFsaXplZCBhcyB1bmNoZWNrZWQgKG9yIGBkZWZhdWx0Q2hlY2tlZGApXG4gKiB3aXRoIGFuIGVtcHR5IHZhbHVlIChvciBgZGVmYXVsdFZhbHVlYCkuXG4gKlxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDEyL1dELWh0bWw1LTIwMTIxMDI1L3RoZS1pbnB1dC1lbGVtZW50Lmh0bWxcbiAqL1xudmFyIFJlYWN0RE9NSW5wdXQgPSB7XG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICB2YXIgY2hlY2tlZCA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0Q2hlY2tlZChwcm9wcyk7XG5cbiAgICB2YXIgbmF0aXZlUHJvcHMgPSBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICBkZWZhdWx0Q2hlY2tlZDogdW5kZWZpbmVkLFxuICAgICAgZGVmYXVsdFZhbHVlOiB1bmRlZmluZWQsXG4gICAgICB2YWx1ZTogdmFsdWUgIT0gbnVsbCA/IHZhbHVlIDogaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSxcbiAgICAgIGNoZWNrZWQ6IGNoZWNrZWQgIT0gbnVsbCA/IGNoZWNrZWQgOiBpbnN0Ll93cmFwcGVyU3RhdGUuaW5pdGlhbENoZWNrZWQsXG4gICAgICBvbkNoYW5nZTogaW5zdC5fd3JhcHBlclN0YXRlLm9uQ2hhbmdlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gbmF0aXZlUHJvcHM7XG4gIH0sXG5cbiAgbW91bnRXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgTGlua2VkVmFsdWVVdGlscy5jaGVja1Byb3BUeXBlcygnaW5wdXQnLCBwcm9wcywgaW5zdC5fY3VycmVudEVsZW1lbnQuX293bmVyKTtcbiAgICB9XG5cbiAgICB2YXIgZGVmYXVsdFZhbHVlID0gcHJvcHMuZGVmYXVsdFZhbHVlO1xuICAgIGluc3QuX3dyYXBwZXJTdGF0ZSA9IHtcbiAgICAgIGluaXRpYWxDaGVja2VkOiBwcm9wcy5kZWZhdWx0Q2hlY2tlZCB8fCBmYWxzZSxcbiAgICAgIGluaXRpYWxWYWx1ZTogZGVmYXVsdFZhbHVlICE9IG51bGwgPyBkZWZhdWx0VmFsdWUgOiBudWxsLFxuICAgICAgb25DaGFuZ2U6IF9oYW5kbGVDaGFuZ2UuYmluZChpbnN0KVxuICAgIH07XG4gIH0sXG5cbiAgbW91bnRSZWFkeVdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgLy8gQ2FuJ3QgYmUgaW4gbW91bnRXcmFwcGVyIG9yIGVsc2Ugc2VydmVyIHJlbmRlcmluZyBsZWFrcy5cbiAgICBpbnN0YW5jZXNCeVJlYWN0SURbaW5zdC5fcm9vdE5vZGVJRF0gPSBpbnN0O1xuICB9LFxuXG4gIHVubW91bnRXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCkge1xuICAgIGRlbGV0ZSBpbnN0YW5jZXNCeVJlYWN0SURbaW5zdC5fcm9vdE5vZGVJRF07XG4gIH0sXG5cbiAgdXBkYXRlV3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcbiAgICB2YXIgcHJvcHMgPSBpbnN0Ll9jdXJyZW50RWxlbWVudC5wcm9wcztcblxuICAgIC8vIFRPRE86IFNob3VsZG4ndCB0aGlzIGJlIGdldENoZWNrZWQocHJvcHMpP1xuICAgIHZhciBjaGVja2VkID0gcHJvcHMuY2hlY2tlZDtcbiAgICBpZiAoY2hlY2tlZCAhPSBudWxsKSB7XG4gICAgICBSZWFjdERPTUlET3BlcmF0aW9ucy51cGRhdGVQcm9wZXJ0eUJ5SUQoaW5zdC5fcm9vdE5vZGVJRCwgJ2NoZWNrZWQnLCBjaGVja2VkIHx8IGZhbHNlKTtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgLy8gQ2FzdCBgdmFsdWVgIHRvIGEgc3RyaW5nIHRvIGVuc3VyZSB0aGUgdmFsdWUgaXMgc2V0IGNvcnJlY3RseS4gV2hpbGVcbiAgICAgIC8vIGJyb3dzZXJzIHR5cGljYWxseSBkbyB0aGlzIGFzIG5lY2Vzc2FyeSwganNkb20gZG9lc24ndC5cbiAgICAgIFJlYWN0RE9NSURPcGVyYXRpb25zLnVwZGF0ZVByb3BlcnR5QnlJRChpbnN0Ll9yb290Tm9kZUlELCAndmFsdWUnLCAnJyArIHZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9oYW5kbGVDaGFuZ2UoZXZlbnQpIHtcbiAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cbiAgdmFyIHJldHVyblZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5leGVjdXRlT25DaGFuZ2UocHJvcHMsIGV2ZW50KTtcblxuICAvLyBIZXJlIHdlIHVzZSBhc2FwIHRvIHdhaXQgdW50aWwgYWxsIHVwZGF0ZXMgaGF2ZSBwcm9wYWdhdGVkLCB3aGljaFxuICAvLyBpcyBpbXBvcnRhbnQgd2hlbiB1c2luZyBjb250cm9sbGVkIGNvbXBvbmVudHMgd2l0aGluIGxheWVyczpcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8xNjk4XG4gIFJlYWN0VXBkYXRlcy5hc2FwKGZvcmNlVXBkYXRlSWZNb3VudGVkLCB0aGlzKTtcblxuICB2YXIgbmFtZSA9IHByb3BzLm5hbWU7XG4gIGlmIChwcm9wcy50eXBlID09PSAncmFkaW8nICYmIG5hbWUgIT0gbnVsbCkge1xuICAgIHZhciByb290Tm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICB2YXIgcXVlcnlSb290ID0gcm9vdE5vZGU7XG5cbiAgICB3aGlsZSAocXVlcnlSb290LnBhcmVudE5vZGUpIHtcbiAgICAgIHF1ZXJ5Um9vdCA9IHF1ZXJ5Um9vdC5wYXJlbnROb2RlO1xuICAgIH1cblxuICAgIC8vIElmIGByb290Tm9kZS5mb3JtYCB3YXMgbm9uLW51bGwsIHRoZW4gd2UgY291bGQgdHJ5IGBmb3JtLmVsZW1lbnRzYCxcbiAgICAvLyBidXQgdGhhdCBzb21ldGltZXMgYmVoYXZlcyBzdHJhbmdlbHkgaW4gSUU4LiBXZSBjb3VsZCBhbHNvIHRyeSB1c2luZ1xuICAgIC8vIGBmb3JtLmdldEVsZW1lbnRzQnlOYW1lYCwgYnV0IHRoYXQgd2lsbCBvbmx5IHJldHVybiBkaXJlY3QgY2hpbGRyZW5cbiAgICAvLyBhbmQgd29uJ3QgaW5jbHVkZSBpbnB1dHMgdGhhdCB1c2UgdGhlIEhUTUw1IGBmb3JtPWAgYXR0cmlidXRlLiBTaW5jZVxuICAgIC8vIHRoZSBpbnB1dCBtaWdodCBub3QgZXZlbiBiZSBpbiBhIGZvcm0sIGxldCdzIGp1c3QgdXNlIHRoZSBnbG9iYWxcbiAgICAvLyBgcXVlcnlTZWxlY3RvckFsbGAgdG8gZW5zdXJlIHdlIGRvbid0IG1pc3MgYW55dGhpbmcuXG4gICAgdmFyIGdyb3VwID0gcXVlcnlSb290LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9JyArIEpTT04uc3RyaW5naWZ5KCcnICsgbmFtZSkgKyAnXVt0eXBlPVwicmFkaW9cIl0nKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXAubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBvdGhlck5vZGUgPSBncm91cFtpXTtcbiAgICAgIGlmIChvdGhlck5vZGUgPT09IHJvb3ROb2RlIHx8IG90aGVyTm9kZS5mb3JtICE9PSByb290Tm9kZS5mb3JtKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGlmIHJhZGlvIGJ1dHRvbnMgcmVuZGVyZWQgYnkgZGlmZmVyZW50IGNvcGllcyBvZiBSZWFjdFxuICAgICAgLy8gYW5kIHRoZSBzYW1lIG5hbWUgYXJlIHJlbmRlcmVkIGludG8gdGhlIHNhbWUgZm9ybSAoc2FtZSBhcyAjMTkzOSkuXG4gICAgICAvLyBUaGF0J3MgcHJvYmFibHkgb2theTsgd2UgZG9uJ3Qgc3VwcG9ydCBpdCBqdXN0IGFzIHdlIGRvbid0IHN1cHBvcnRcbiAgICAgIC8vIG1peGluZyBSZWFjdCB3aXRoIG5vbi1SZWFjdC5cbiAgICAgIHZhciBvdGhlcklEID0gUmVhY3RNb3VudC5nZXRJRChvdGhlck5vZGUpO1xuICAgICAgIW90aGVySUQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RET01JbnB1dDogTWl4aW5nIFJlYWN0IGFuZCBub24tUmVhY3QgcmFkaW8gaW5wdXRzIHdpdGggdGhlICcgKyAnc2FtZSBgbmFtZWAgaXMgbm90IHN1cHBvcnRlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICB2YXIgb3RoZXJJbnN0YW5jZSA9IGluc3RhbmNlc0J5UmVhY3RJRFtvdGhlcklEXTtcbiAgICAgICFvdGhlckluc3RhbmNlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0RE9NSW5wdXQ6IFVua25vd24gcmFkaW8gYnV0dG9uIElEICVzLicsIG90aGVySUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIC8vIElmIHRoaXMgaXMgYSBjb250cm9sbGVkIHJhZGlvIGJ1dHRvbiBncm91cCwgZm9yY2luZyB0aGUgaW5wdXQgdGhhdFxuICAgICAgLy8gd2FzIHByZXZpb3VzbHkgY2hlY2tlZCB0byB1cGRhdGUgd2lsbCBjYXVzZSBpdCB0byBiZSBjb21lIHJlLWNoZWNrZWRcbiAgICAgIC8vIGFzIGFwcHJvcHJpYXRlLlxuICAgICAgUmVhY3RVcGRhdGVzLmFzYXAoZm9yY2VVcGRhdGVJZk1vdW50ZWQsIG90aGVySW5zdGFuY2UpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXR1cm5WYWx1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUlucHV0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTU9wdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q2hpbGRyZW4gPSByZXF1aXJlKCcuL1JlYWN0Q2hpbGRyZW4nKTtcbnZhciBSZWFjdERPTVNlbGVjdCA9IHJlcXVpcmUoJy4vUmVhY3RET01TZWxlY3QnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciB2YWx1ZUNvbnRleHRLZXkgPSBSZWFjdERPTVNlbGVjdC52YWx1ZUNvbnRleHRLZXk7XG5cbi8qKlxuICogSW1wbGVtZW50cyBhbiA8b3B0aW9uPiBuYXRpdmUgY29tcG9uZW50IHRoYXQgd2FybnMgd2hlbiBgc2VsZWN0ZWRgIGlzIHNldC5cbiAqL1xudmFyIFJlYWN0RE9NT3B0aW9uID0ge1xuICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIC8vIFRPRE8gKHl1bmdzdGVycyk6IFJlbW92ZSBzdXBwb3J0IGZvciBgc2VsZWN0ZWRgIGluIDxvcHRpb24+LlxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwcm9wcy5zZWxlY3RlZCA9PSBudWxsLCAnVXNlIHRoZSBgZGVmYXVsdFZhbHVlYCBvciBgdmFsdWVgIHByb3BzIG9uIDxzZWxlY3Q+IGluc3RlYWQgb2YgJyArICdzZXR0aW5nIGBzZWxlY3RlZGAgb24gPG9wdGlvbj4uJykgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gTG9vayB1cCB3aGV0aGVyIHRoaXMgb3B0aW9uIGlzICdzZWxlY3RlZCcgdmlhIGNvbnRleHRcbiAgICB2YXIgc2VsZWN0VmFsdWUgPSBjb250ZXh0W3ZhbHVlQ29udGV4dEtleV07XG5cbiAgICAvLyBJZiBjb250ZXh0IGtleSBpcyBudWxsIChlLmcuLCBubyBzcGVjaWZpZWQgdmFsdWUgb3IgYWZ0ZXIgaW5pdGlhbCBtb3VudClcbiAgICAvLyBvciBtaXNzaW5nIChlLmcuLCBmb3IgPGRhdGFsaXN0PiksIHdlIGRvbid0IGNoYW5nZSBwcm9wcy5zZWxlY3RlZFxuICAgIHZhciBzZWxlY3RlZCA9IG51bGw7XG4gICAgaWYgKHNlbGVjdFZhbHVlICE9IG51bGwpIHtcbiAgICAgIHNlbGVjdGVkID0gZmFsc2U7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzZWxlY3RWYWx1ZSkpIHtcbiAgICAgICAgLy8gbXVsdGlwbGVcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICgnJyArIHNlbGVjdFZhbHVlW2ldID09PSAnJyArIHByb3BzLnZhbHVlKSB7XG4gICAgICAgICAgICBzZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdGVkID0gJycgKyBzZWxlY3RWYWx1ZSA9PT0gJycgKyBwcm9wcy52YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7IHNlbGVjdGVkOiBzZWxlY3RlZCB9O1xuICB9LFxuXG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICB2YXIgbmF0aXZlUHJvcHMgPSBhc3NpZ24oeyBzZWxlY3RlZDogdW5kZWZpbmVkLCBjaGlsZHJlbjogdW5kZWZpbmVkIH0sIHByb3BzKTtcblxuICAgIC8vIFJlYWQgc3RhdGUgb25seSBmcm9tIGluaXRpYWwgbW91bnQgYmVjYXVzZSA8c2VsZWN0PiB1cGRhdGVzIHZhbHVlXG4gICAgLy8gbWFudWFsbHk7IHdlIG5lZWQgdGhlIGluaXRpYWwgc3RhdGUgb25seSBmb3Igc2VydmVyIHJlbmRlcmluZ1xuICAgIGlmIChpbnN0Ll93cmFwcGVyU3RhdGUuc2VsZWN0ZWQgIT0gbnVsbCkge1xuICAgICAgbmF0aXZlUHJvcHMuc2VsZWN0ZWQgPSBpbnN0Ll93cmFwcGVyU3RhdGUuc2VsZWN0ZWQ7XG4gICAgfVxuXG4gICAgdmFyIGNvbnRlbnQgPSAnJztcblxuICAgIC8vIEZsYXR0ZW4gY2hpbGRyZW4gYW5kIHdhcm4gaWYgdGhleSBhcmVuJ3Qgc3RyaW5ncyBvciBudW1iZXJzO1xuICAgIC8vIGludmFsaWQgdHlwZXMgYXJlIGlnbm9yZWQuXG4gICAgUmVhY3RDaGlsZHJlbi5mb3JFYWNoKHByb3BzLmNoaWxkcmVuLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIGlmIChjaGlsZCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY2hpbGQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBjaGlsZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29udGVudCArPSBjaGlsZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnT25seSBzdHJpbmdzIGFuZCBudW1iZXJzIGFyZSBzdXBwb3J0ZWQgYXMgPG9wdGlvbj4gY2hpbGRyZW4uJykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoY29udGVudCkge1xuICAgICAgbmF0aXZlUHJvcHMuY2hpbGRyZW4gPSBjb250ZW50O1xuICAgIH1cblxuICAgIHJldHVybiBuYXRpdmVQcm9wcztcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NT3B0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTVNlbGVjdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIExpbmtlZFZhbHVlVXRpbHMgPSByZXF1aXJlKCcuL0xpbmtlZFZhbHVlVXRpbHMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciB2YWx1ZUNvbnRleHRLZXkgPSAnX19SZWFjdERPTVNlbGVjdF92YWx1ZSQnICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7XG5cbmZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnNJZlBlbmRpbmdVcGRhdGVBbmRNb3VudGVkKCkge1xuICBpZiAodGhpcy5fcm9vdE5vZGVJRCAmJiB0aGlzLl93cmFwcGVyU3RhdGUucGVuZGluZ1VwZGF0ZSkge1xuICAgIHRoaXMuX3dyYXBwZXJTdGF0ZS5wZW5kaW5nVXBkYXRlID0gZmFsc2U7XG5cbiAgICB2YXIgcHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcblxuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICB1cGRhdGVPcHRpb25zKHRoaXMsIEJvb2xlYW4ocHJvcHMubXVsdGlwbGUpLCB2YWx1ZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikge1xuICBpZiAob3duZXIpIHtcbiAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG52YXIgdmFsdWVQcm9wTmFtZXMgPSBbJ3ZhbHVlJywgJ2RlZmF1bHRWYWx1ZSddO1xuXG4vKipcbiAqIFZhbGlkYXRpb24gZnVuY3Rpb24gZm9yIGB2YWx1ZWAgYW5kIGBkZWZhdWx0VmFsdWVgLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2hlY2tTZWxlY3RQcm9wVHlwZXMoaW5zdCwgcHJvcHMpIHtcbiAgdmFyIG93bmVyID0gaW5zdC5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuICBMaW5rZWRWYWx1ZVV0aWxzLmNoZWNrUHJvcFR5cGVzKCdzZWxlY3QnLCBwcm9wcywgb3duZXIpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVQcm9wTmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcHJvcE5hbWUgPSB2YWx1ZVByb3BOYW1lc1tpXTtcbiAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09IG51bGwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAocHJvcHMubXVsdGlwbGUpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKEFycmF5LmlzQXJyYXkocHJvcHNbcHJvcE5hbWVdKSwgJ1RoZSBgJXNgIHByb3Agc3VwcGxpZWQgdG8gPHNlbGVjdD4gbXVzdCBiZSBhbiBhcnJheSBpZiAnICsgJ2BtdWx0aXBsZWAgaXMgdHJ1ZS4lcycsIHByb3BOYW1lLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpKSA6IHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIUFycmF5LmlzQXJyYXkocHJvcHNbcHJvcE5hbWVdKSwgJ1RoZSBgJXNgIHByb3Agc3VwcGxpZWQgdG8gPHNlbGVjdD4gbXVzdCBiZSBhIHNjYWxhciAnICsgJ3ZhbHVlIGlmIGBtdWx0aXBsZWAgaXMgZmFsc2UuJXMnLCBwcm9wTmFtZSwgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKG93bmVyKSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWFjdERPTUNvbXBvbmVudH0gaW5zdFxuICogQHBhcmFtIHtib29sZWFufSBtdWx0aXBsZVxuICogQHBhcmFtIHsqfSBwcm9wVmFsdWUgQSBzdHJpbmdhYmxlICh3aXRoIGBtdWx0aXBsZWAsIGEgbGlzdCBvZiBzdHJpbmdhYmxlcykuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB1cGRhdGVPcHRpb25zKGluc3QsIG11bHRpcGxlLCBwcm9wVmFsdWUpIHtcbiAgdmFyIHNlbGVjdGVkVmFsdWUsIGk7XG4gIHZhciBvcHRpb25zID0gUmVhY3RNb3VudC5nZXROb2RlKGluc3QuX3Jvb3ROb2RlSUQpLm9wdGlvbnM7XG5cbiAgaWYgKG11bHRpcGxlKSB7XG4gICAgc2VsZWN0ZWRWYWx1ZSA9IHt9O1xuICAgIGZvciAoaSA9IDA7IGkgPCBwcm9wVmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNlbGVjdGVkVmFsdWVbJycgKyBwcm9wVmFsdWVbaV1dID0gdHJ1ZTtcbiAgICB9XG4gICAgZm9yIChpID0gMDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzZWxlY3RlZCA9IHNlbGVjdGVkVmFsdWUuaGFzT3duUHJvcGVydHkob3B0aW9uc1tpXS52YWx1ZSk7XG4gICAgICBpZiAob3B0aW9uc1tpXS5zZWxlY3RlZCAhPT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgb3B0aW9uc1tpXS5zZWxlY3RlZCA9IHNlbGVjdGVkO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBEbyBub3Qgc2V0IGBzZWxlY3QudmFsdWVgIGFzIGV4YWN0IGJlaGF2aW9yIGlzbid0IGNvbnNpc3RlbnQgYWNyb3NzIGFsbFxuICAgIC8vIGJyb3dzZXJzIGZvciBhbGwgY2FzZXMuXG4gICAgc2VsZWN0ZWRWYWx1ZSA9ICcnICsgcHJvcFZhbHVlO1xuICAgIGZvciAoaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAob3B0aW9uc1tpXS52YWx1ZSA9PT0gc2VsZWN0ZWRWYWx1ZSkge1xuICAgICAgICBvcHRpb25zW2ldLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgIG9wdGlvbnNbMF0uc2VsZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEltcGxlbWVudHMgYSA8c2VsZWN0PiBuYXRpdmUgY29tcG9uZW50IHRoYXQgYWxsb3dzIG9wdGlvbmFsbHkgc2V0dGluZyB0aGVcbiAqIHByb3BzIGB2YWx1ZWAgYW5kIGBkZWZhdWx0VmFsdWVgLiBJZiBgbXVsdGlwbGVgIGlzIGZhbHNlLCB0aGUgcHJvcCBtdXN0IGJlIGFcbiAqIHN0cmluZ2FibGUuIElmIGBtdWx0aXBsZWAgaXMgdHJ1ZSwgdGhlIHByb3AgbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdhYmxlcy5cbiAqXG4gKiBJZiBgdmFsdWVgIGlzIG5vdCBzdXBwbGllZCAob3IgbnVsbC91bmRlZmluZWQpLCB1c2VyIGFjdGlvbnMgdGhhdCBjaGFuZ2UgdGhlXG4gKiBzZWxlY3RlZCBvcHRpb24gd2lsbCB0cmlnZ2VyIHVwZGF0ZXMgdG8gdGhlIHJlbmRlcmVkIG9wdGlvbnMuXG4gKlxuICogSWYgaXQgaXMgc3VwcGxpZWQgKGFuZCBub3QgbnVsbC91bmRlZmluZWQpLCB0aGUgcmVuZGVyZWQgb3B0aW9ucyB3aWxsIG5vdFxuICogdXBkYXRlIGluIHJlc3BvbnNlIHRvIHVzZXIgYWN0aW9ucy4gSW5zdGVhZCwgdGhlIGB2YWx1ZWAgcHJvcCBtdXN0IGNoYW5nZSBpblxuICogb3JkZXIgZm9yIHRoZSByZW5kZXJlZCBvcHRpb25zIHRvIHVwZGF0ZS5cbiAqXG4gKiBJZiBgZGVmYXVsdFZhbHVlYCBpcyBwcm92aWRlZCwgYW55IG9wdGlvbnMgd2l0aCB0aGUgc3VwcGxpZWQgdmFsdWVzIHdpbGwgYmVcbiAqIHNlbGVjdGVkLlxuICovXG52YXIgUmVhY3RET01TZWxlY3QgPSB7XG4gIHZhbHVlQ29udGV4dEtleTogdmFsdWVDb250ZXh0S2V5LFxuXG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gYXNzaWduKHt9LCBwcm9wcywge1xuICAgICAgb25DaGFuZ2U6IGluc3QuX3dyYXBwZXJTdGF0ZS5vbkNoYW5nZSxcbiAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgfSxcblxuICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjaGVja1NlbGVjdFByb3BUeXBlcyhpbnN0LCBwcm9wcyk7XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG4gICAgaW5zdC5fd3JhcHBlclN0YXRlID0ge1xuICAgICAgcGVuZGluZ1VwZGF0ZTogZmFsc2UsXG4gICAgICBpbml0aWFsVmFsdWU6IHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IHByb3BzLmRlZmF1bHRWYWx1ZSxcbiAgICAgIG9uQ2hhbmdlOiBfaGFuZGxlQ2hhbmdlLmJpbmQoaW5zdCksXG4gICAgICB3YXNNdWx0aXBsZTogQm9vbGVhbihwcm9wcy5tdWx0aXBsZSlcbiAgICB9O1xuICB9LFxuXG4gIHByb2Nlc3NDaGlsZENvbnRleHQ6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIC8vIFBhc3MgZG93biBpbml0aWFsIHZhbHVlIHNvIGluaXRpYWwgZ2VuZXJhdGVkIG1hcmt1cCBoYXMgY29ycmVjdFxuICAgIC8vIGBzZWxlY3RlZGAgYXR0cmlidXRlc1xuICAgIHZhciBjaGlsZENvbnRleHQgPSBhc3NpZ24oe30sIGNvbnRleHQpO1xuICAgIGNoaWxkQ29udGV4dFt2YWx1ZUNvbnRleHRLZXldID0gaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZTtcbiAgICByZXR1cm4gY2hpbGRDb250ZXh0O1xuICB9LFxuXG4gIHBvc3RVcGRhdGVXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCkge1xuICAgIHZhciBwcm9wcyA9IGluc3QuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuXG4gICAgLy8gQWZ0ZXIgdGhlIGluaXRpYWwgbW91bnQsIHdlIGNvbnRyb2wgc2VsZWN0ZWQtbmVzcyBtYW51YWxseSBzbyBkb24ndCBwYXNzXG4gICAgLy8gdGhlIGNvbnRleHQgdmFsdWUgZG93blxuICAgIGluc3QuX3dyYXBwZXJTdGF0ZS5pbml0aWFsVmFsdWUgPSB1bmRlZmluZWQ7XG5cbiAgICB2YXIgd2FzTXVsdGlwbGUgPSBpbnN0Ll93cmFwcGVyU3RhdGUud2FzTXVsdGlwbGU7XG4gICAgaW5zdC5fd3JhcHBlclN0YXRlLndhc011bHRpcGxlID0gQm9vbGVhbihwcm9wcy5tdWx0aXBsZSk7XG5cbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgaW5zdC5fd3JhcHBlclN0YXRlLnBlbmRpbmdVcGRhdGUgPSBmYWxzZTtcbiAgICAgIHVwZGF0ZU9wdGlvbnMoaW5zdCwgQm9vbGVhbihwcm9wcy5tdWx0aXBsZSksIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHdhc011bHRpcGxlICE9PSBCb29sZWFuKHByb3BzLm11bHRpcGxlKSkge1xuICAgICAgLy8gRm9yIHNpbXBsaWNpdHksIHJlYXBwbHkgYGRlZmF1bHRWYWx1ZWAgaWYgYG11bHRpcGxlYCBpcyB0b2dnbGVkLlxuICAgICAgaWYgKHByb3BzLmRlZmF1bHRWYWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHVwZGF0ZU9wdGlvbnMoaW5zdCwgQm9vbGVhbihwcm9wcy5tdWx0aXBsZSksIHByb3BzLmRlZmF1bHRWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXZlcnQgdGhlIHNlbGVjdCBiYWNrIHRvIGl0cyBkZWZhdWx0IHVuc2VsZWN0ZWQgc3RhdGUuXG4gICAgICAgIHVwZGF0ZU9wdGlvbnMoaW5zdCwgQm9vbGVhbihwcm9wcy5tdWx0aXBsZSksIHByb3BzLm11bHRpcGxlID8gW10gOiAnJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBfaGFuZGxlQ2hhbmdlKGV2ZW50KSB7XG4gIHZhciBwcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICB2YXIgcmV0dXJuVmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmV4ZWN1dGVPbkNoYW5nZShwcm9wcywgZXZlbnQpO1xuXG4gIHRoaXMuX3dyYXBwZXJTdGF0ZS5wZW5kaW5nVXBkYXRlID0gdHJ1ZTtcbiAgUmVhY3RVcGRhdGVzLmFzYXAodXBkYXRlT3B0aW9uc0lmUGVuZGluZ1VwZGF0ZUFuZE1vdW50ZWQsIHRoaXMpO1xuICByZXR1cm4gcmV0dXJuVmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01TZWxlY3Q7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NU2VsZWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldCA9IHJlcXVpcmUoJy4vZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldCcpO1xudmFyIGdldFRleHRDb250ZW50QWNjZXNzb3IgPSByZXF1aXJlKCcuL2dldFRleHRDb250ZW50QWNjZXNzb3InKTtcblxuLyoqXG4gKiBXaGlsZSBgaXNDb2xsYXBzZWRgIGlzIGF2YWlsYWJsZSBvbiB0aGUgU2VsZWN0aW9uIG9iamVjdCBhbmQgYGNvbGxhcHNlZGBcbiAqIGlzIGF2YWlsYWJsZSBvbiB0aGUgUmFuZ2Ugb2JqZWN0LCBJRTExIHNvbWV0aW1lcyBnZXRzIHRoZW0gd3JvbmcuXG4gKiBJZiB0aGUgYW5jaG9yL2ZvY3VzIG5vZGVzIGFuZCBvZmZzZXRzIGFyZSB0aGUgc2FtZSwgdGhlIHJhbmdlIGlzIGNvbGxhcHNlZC5cbiAqL1xuZnVuY3Rpb24gaXNDb2xsYXBzZWQoYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0LCBmb2N1c05vZGUsIGZvY3VzT2Zmc2V0KSB7XG4gIHJldHVybiBhbmNob3JOb2RlID09PSBmb2N1c05vZGUgJiYgYW5jaG9yT2Zmc2V0ID09PSBmb2N1c09mZnNldDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGFwcHJvcHJpYXRlIGFuY2hvciBhbmQgZm9jdXMgbm9kZS9vZmZzZXQgcGFpcnMgZm9yIElFLlxuICpcbiAqIFRoZSBjYXRjaCBoZXJlIGlzIHRoYXQgSUUncyBzZWxlY3Rpb24gQVBJIGRvZXNuJ3QgcHJvdmlkZSBpbmZvcm1hdGlvblxuICogYWJvdXQgd2hldGhlciB0aGUgc2VsZWN0aW9uIGlzIGZvcndhcmQgb3IgYmFja3dhcmQsIHNvIHdlIGhhdmUgdG9cbiAqIGJlaGF2ZSBhcyB0aG91Z2ggaXQncyBhbHdheXMgZm9yd2FyZC5cbiAqXG4gKiBJRSB0ZXh0IGRpZmZlcnMgZnJvbSBtb2Rlcm4gc2VsZWN0aW9uIGluIHRoYXQgaXQgYmVoYXZlcyBhcyB0aG91Z2hcbiAqIGJsb2NrIGVsZW1lbnRzIGVuZCB3aXRoIGEgbmV3IGxpbmUuIFRoaXMgbWVhbnMgY2hhcmFjdGVyIG9mZnNldHMgd2lsbFxuICogZGlmZmVyIGJldHdlZW4gdGhlIHR3byBBUElzLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRJRU9mZnNldHMobm9kZSkge1xuICB2YXIgc2VsZWN0aW9uID0gZG9jdW1lbnQuc2VsZWN0aW9uO1xuICB2YXIgc2VsZWN0ZWRSYW5nZSA9IHNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICB2YXIgc2VsZWN0ZWRMZW5ndGggPSBzZWxlY3RlZFJhbmdlLnRleHQubGVuZ3RoO1xuXG4gIC8vIER1cGxpY2F0ZSBzZWxlY3Rpb24gc28gd2UgY2FuIG1vdmUgcmFuZ2Ugd2l0aG91dCBicmVha2luZyB1c2VyIHNlbGVjdGlvbi5cbiAgdmFyIGZyb21TdGFydCA9IHNlbGVjdGVkUmFuZ2UuZHVwbGljYXRlKCk7XG4gIGZyb21TdGFydC5tb3ZlVG9FbGVtZW50VGV4dChub2RlKTtcbiAgZnJvbVN0YXJ0LnNldEVuZFBvaW50KCdFbmRUb1N0YXJ0Jywgc2VsZWN0ZWRSYW5nZSk7XG5cbiAgdmFyIHN0YXJ0T2Zmc2V0ID0gZnJvbVN0YXJ0LnRleHQubGVuZ3RoO1xuICB2YXIgZW5kT2Zmc2V0ID0gc3RhcnRPZmZzZXQgKyBzZWxlY3RlZExlbmd0aDtcblxuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBzdGFydE9mZnNldCxcbiAgICBlbmQ6IGVuZE9mZnNldFxuICB9O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7P29iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0TW9kZXJuT2Zmc2V0cyhub2RlKSB7XG4gIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uICYmIHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcblxuICBpZiAoIXNlbGVjdGlvbiB8fCBzZWxlY3Rpb24ucmFuZ2VDb3VudCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGFuY2hvck5vZGUgPSBzZWxlY3Rpb24uYW5jaG9yTm9kZTtcbiAgdmFyIGFuY2hvck9mZnNldCA9IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQ7XG4gIHZhciBmb2N1c05vZGUgPSBzZWxlY3Rpb24uZm9jdXNOb2RlO1xuICB2YXIgZm9jdXNPZmZzZXQgPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQ7XG5cbiAgdmFyIGN1cnJlbnRSYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApO1xuXG4gIC8vIEluIEZpcmVmb3gsIHJhbmdlLnN0YXJ0Q29udGFpbmVyIGFuZCByYW5nZS5lbmRDb250YWluZXIgY2FuIGJlIFwiYW5vbnltb3VzXG4gIC8vIGRpdnNcIiwgZS5nLiB0aGUgdXAvZG93biBidXR0b25zIG9uIGFuIDxpbnB1dCB0eXBlPVwibnVtYmVyXCI+LiBBbm9ueW1vdXNcbiAgLy8gZGl2cyBkbyBub3Qgc2VlbSB0byBleHBvc2UgcHJvcGVydGllcywgdHJpZ2dlcmluZyBhIFwiUGVybWlzc2lvbiBkZW5pZWRcbiAgLy8gZXJyb3JcIiBpZiBhbnkgb2YgaXRzIHByb3BlcnRpZXMgYXJlIGFjY2Vzc2VkLiBUaGUgb25seSBzZWVtaW5nbHkgcG9zc2libGVcbiAgLy8gd2F5IHRvIGF2b2lkIGVycm9yaW5nIGlzIHRvIGFjY2VzcyBhIHByb3BlcnR5IHRoYXQgdHlwaWNhbGx5IHdvcmtzIGZvclxuICAvLyBub24tYW5vbnltb3VzIGRpdnMgYW5kIGNhdGNoIGFueSBlcnJvciB0aGF0IG1heSBvdGhlcndpc2UgYXJpc2UuIFNlZVxuICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0yMDg0MjdcbiAgdHJ5IHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtZXhwcmVzc2lvbnMgKi9cbiAgICBjdXJyZW50UmFuZ2Uuc3RhcnRDb250YWluZXIubm9kZVR5cGU7XG4gICAgY3VycmVudFJhbmdlLmVuZENvbnRhaW5lci5ub2RlVHlwZTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBJZiB0aGUgbm9kZSBhbmQgb2Zmc2V0IHZhbHVlcyBhcmUgdGhlIHNhbWUsIHRoZSBzZWxlY3Rpb24gaXMgY29sbGFwc2VkLlxuICAvLyBgU2VsZWN0aW9uLmlzQ29sbGFwc2VkYCBpcyBhdmFpbGFibGUgbmF0aXZlbHksIGJ1dCBJRSBzb21ldGltZXMgZ2V0c1xuICAvLyB0aGlzIHZhbHVlIHdyb25nLlxuICB2YXIgaXNTZWxlY3Rpb25Db2xsYXBzZWQgPSBpc0NvbGxhcHNlZChzZWxlY3Rpb24uYW5jaG9yTm9kZSwgc2VsZWN0aW9uLmFuY2hvck9mZnNldCwgc2VsZWN0aW9uLmZvY3VzTm9kZSwgc2VsZWN0aW9uLmZvY3VzT2Zmc2V0KTtcblxuICB2YXIgcmFuZ2VMZW5ndGggPSBpc1NlbGVjdGlvbkNvbGxhcHNlZCA/IDAgOiBjdXJyZW50UmFuZ2UudG9TdHJpbmcoKS5sZW5ndGg7XG5cbiAgdmFyIHRlbXBSYW5nZSA9IGN1cnJlbnRSYW5nZS5jbG9uZVJhbmdlKCk7XG4gIHRlbXBSYW5nZS5zZWxlY3ROb2RlQ29udGVudHMobm9kZSk7XG4gIHRlbXBSYW5nZS5zZXRFbmQoY3VycmVudFJhbmdlLnN0YXJ0Q29udGFpbmVyLCBjdXJyZW50UmFuZ2Uuc3RhcnRPZmZzZXQpO1xuXG4gIHZhciBpc1RlbXBSYW5nZUNvbGxhcHNlZCA9IGlzQ29sbGFwc2VkKHRlbXBSYW5nZS5zdGFydENvbnRhaW5lciwgdGVtcFJhbmdlLnN0YXJ0T2Zmc2V0LCB0ZW1wUmFuZ2UuZW5kQ29udGFpbmVyLCB0ZW1wUmFuZ2UuZW5kT2Zmc2V0KTtcblxuICB2YXIgc3RhcnQgPSBpc1RlbXBSYW5nZUNvbGxhcHNlZCA/IDAgOiB0ZW1wUmFuZ2UudG9TdHJpbmcoKS5sZW5ndGg7XG4gIHZhciBlbmQgPSBzdGFydCArIHJhbmdlTGVuZ3RoO1xuXG4gIC8vIERldGVjdCB3aGV0aGVyIHRoZSBzZWxlY3Rpb24gaXMgYmFja3dhcmQuXG4gIHZhciBkZXRlY3Rpb25SYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gIGRldGVjdGlvblJhbmdlLnNldFN0YXJ0KGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCk7XG4gIGRldGVjdGlvblJhbmdlLnNldEVuZChmb2N1c05vZGUsIGZvY3VzT2Zmc2V0KTtcbiAgdmFyIGlzQmFja3dhcmQgPSBkZXRlY3Rpb25SYW5nZS5jb2xsYXBzZWQ7XG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydDogaXNCYWNrd2FyZCA/IGVuZCA6IHN0YXJ0LFxuICAgIGVuZDogaXNCYWNrd2FyZCA/IHN0YXJ0IDogZW5kXG4gIH07XG59XG5cbi8qKlxuICogQHBhcmFtIHtET01FbGVtZW50fERPTVRleHROb2RlfSBub2RlXG4gKiBAcGFyYW0ge29iamVjdH0gb2Zmc2V0c1xuICovXG5mdW5jdGlvbiBzZXRJRU9mZnNldHMobm9kZSwgb2Zmc2V0cykge1xuICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKS5kdXBsaWNhdGUoKTtcbiAgdmFyIHN0YXJ0LCBlbmQ7XG5cbiAgaWYgKHR5cGVvZiBvZmZzZXRzLmVuZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBzdGFydCA9IG9mZnNldHMuc3RhcnQ7XG4gICAgZW5kID0gc3RhcnQ7XG4gIH0gZWxzZSBpZiAob2Zmc2V0cy5zdGFydCA+IG9mZnNldHMuZW5kKSB7XG4gICAgc3RhcnQgPSBvZmZzZXRzLmVuZDtcbiAgICBlbmQgPSBvZmZzZXRzLnN0YXJ0O1xuICB9IGVsc2Uge1xuICAgIHN0YXJ0ID0gb2Zmc2V0cy5zdGFydDtcbiAgICBlbmQgPSBvZmZzZXRzLmVuZDtcbiAgfVxuXG4gIHJhbmdlLm1vdmVUb0VsZW1lbnRUZXh0KG5vZGUpO1xuICByYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHN0YXJ0KTtcbiAgcmFuZ2Uuc2V0RW5kUG9pbnQoJ0VuZFRvU3RhcnQnLCByYW5nZSk7XG4gIHJhbmdlLm1vdmVFbmQoJ2NoYXJhY3RlcicsIGVuZCAtIHN0YXJ0KTtcbiAgcmFuZ2Uuc2VsZWN0KCk7XG59XG5cbi8qKlxuICogSW4gbW9kZXJuIG5vbi1JRSBicm93c2Vycywgd2UgY2FuIHN1cHBvcnQgYm90aCBmb3J3YXJkIGFuZCBiYWNrd2FyZFxuICogc2VsZWN0aW9ucy5cbiAqXG4gKiBOb3RlOiBJRTEwKyBzdXBwb3J0cyB0aGUgU2VsZWN0aW9uIG9iamVjdCwgYnV0IGl0IGRvZXMgbm90IHN1cHBvcnRcbiAqIHRoZSBgZXh0ZW5kYCBtZXRob2QsIHdoaWNoIG1lYW5zIHRoYXQgZXZlbiBpbiBtb2Rlcm4gSUUsIGl0J3Mgbm90IHBvc3NpYmxlXG4gKiB0byBwcm9ncmFtYXRpY2FsbHkgY3JlYXRlIGEgYmFja3dhcmQgc2VsZWN0aW9uLiBUaHVzLCBmb3IgYWxsIElFXG4gKiB2ZXJzaW9ucywgd2UgdXNlIHRoZSBvbGQgSUUgQVBJIHRvIGNyZWF0ZSBvdXIgc2VsZWN0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBvZmZzZXRzXG4gKi9cbmZ1bmN0aW9uIHNldE1vZGVybk9mZnNldHMobm9kZSwgb2Zmc2V0cykge1xuICBpZiAoIXdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICB2YXIgbGVuZ3RoID0gbm9kZVtnZXRUZXh0Q29udGVudEFjY2Vzc29yKCldLmxlbmd0aDtcbiAgdmFyIHN0YXJ0ID0gTWF0aC5taW4ob2Zmc2V0cy5zdGFydCwgbGVuZ3RoKTtcbiAgdmFyIGVuZCA9IHR5cGVvZiBvZmZzZXRzLmVuZCA9PT0gJ3VuZGVmaW5lZCcgPyBzdGFydCA6IE1hdGgubWluKG9mZnNldHMuZW5kLCBsZW5ndGgpO1xuXG4gIC8vIElFIDExIHVzZXMgbW9kZXJuIHNlbGVjdGlvbiwgYnV0IGRvZXNuJ3Qgc3VwcG9ydCB0aGUgZXh0ZW5kIG1ldGhvZC5cbiAgLy8gRmxpcCBiYWNrd2FyZCBzZWxlY3Rpb25zLCBzbyB3ZSBjYW4gc2V0IHdpdGggYSBzaW5nbGUgcmFuZ2UuXG4gIGlmICghc2VsZWN0aW9uLmV4dGVuZCAmJiBzdGFydCA+IGVuZCkge1xuICAgIHZhciB0ZW1wID0gZW5kO1xuICAgIGVuZCA9IHN0YXJ0O1xuICAgIHN0YXJ0ID0gdGVtcDtcbiAgfVxuXG4gIHZhciBzdGFydE1hcmtlciA9IGdldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXQobm9kZSwgc3RhcnQpO1xuICB2YXIgZW5kTWFya2VyID0gZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldChub2RlLCBlbmQpO1xuXG4gIGlmIChzdGFydE1hcmtlciAmJiBlbmRNYXJrZXIpIHtcbiAgICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIHJhbmdlLnNldFN0YXJ0KHN0YXJ0TWFya2VyLm5vZGUsIHN0YXJ0TWFya2VyLm9mZnNldCk7XG4gICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO1xuXG4gICAgaWYgKHN0YXJ0ID4gZW5kKSB7XG4gICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xuICAgICAgc2VsZWN0aW9uLmV4dGVuZChlbmRNYXJrZXIubm9kZSwgZW5kTWFya2VyLm9mZnNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJhbmdlLnNldEVuZChlbmRNYXJrZXIubm9kZSwgZW5kTWFya2VyLm9mZnNldCk7XG4gICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgdXNlSUVPZmZzZXRzID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmICdzZWxlY3Rpb24nIGluIGRvY3VtZW50ICYmICEoJ2dldFNlbGVjdGlvbicgaW4gd2luZG93KTtcblxudmFyIFJlYWN0RE9NU2VsZWN0aW9uID0ge1xuICAvKipcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gICAqL1xuICBnZXRPZmZzZXRzOiB1c2VJRU9mZnNldHMgPyBnZXRJRU9mZnNldHMgOiBnZXRNb2Rlcm5PZmZzZXRzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9IG5vZGVcbiAgICogQHBhcmFtIHtvYmplY3R9IG9mZnNldHNcbiAgICovXG4gIHNldE9mZnNldHM6IHVzZUlFT2Zmc2V0cyA/IHNldElFT2Zmc2V0cyA6IHNldE1vZGVybk9mZnNldHNcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01TZWxlY3Rpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NU2VydmVyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3REZWZhdWx0SW5qZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRJbmplY3Rpb24nKTtcbnZhciBSZWFjdFNlcnZlclJlbmRlcmluZyA9IHJlcXVpcmUoJy4vUmVhY3RTZXJ2ZXJSZW5kZXJpbmcnKTtcbnZhciBSZWFjdFZlcnNpb24gPSByZXF1aXJlKCcuL1JlYWN0VmVyc2lvbicpO1xuXG5SZWFjdERlZmF1bHRJbmplY3Rpb24uaW5qZWN0KCk7XG5cbnZhciBSZWFjdERPTVNlcnZlciA9IHtcbiAgcmVuZGVyVG9TdHJpbmc6IFJlYWN0U2VydmVyUmVuZGVyaW5nLnJlbmRlclRvU3RyaW5nLFxuICByZW5kZXJUb1N0YXRpY01hcmt1cDogUmVhY3RTZXJ2ZXJSZW5kZXJpbmcucmVuZGVyVG9TdGF0aWNNYXJrdXAsXG4gIHZlcnNpb246IFJlYWN0VmVyc2lvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTVNlcnZlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01UZXh0Q29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTUNoaWxkcmVuT3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vRE9NQ2hpbGRyZW5PcGVyYXRpb25zJyk7XG52YXIgRE9NUHJvcGVydHlPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eU9wZXJhdGlvbnMnKTtcbnZhciBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIgPSByZXF1aXJlKCcuL2VzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlcicpO1xudmFyIHNldFRleHRDb250ZW50ID0gcmVxdWlyZSgnLi9zZXRUZXh0Q29udGVudCcpO1xudmFyIHZhbGlkYXRlRE9NTmVzdGluZyA9IHJlcXVpcmUoJy4vdmFsaWRhdGVET01OZXN0aW5nJyk7XG5cbi8qKlxuICogVGV4dCBub2RlcyB2aW9sYXRlIGEgY291cGxlIGFzc3VtcHRpb25zIHRoYXQgUmVhY3QgbWFrZXMgYWJvdXQgY29tcG9uZW50czpcbiAqXG4gKiAgLSBXaGVuIG1vdW50aW5nIHRleHQgaW50byB0aGUgRE9NLCBhZGphY2VudCB0ZXh0IG5vZGVzIGFyZSBtZXJnZWQuXG4gKiAgLSBUZXh0IG5vZGVzIGNhbm5vdCBiZSBhc3NpZ25lZCBhIFJlYWN0IHJvb3QgSUQuXG4gKlxuICogVGhpcyBjb21wb25lbnQgaXMgdXNlZCB0byB3cmFwIHN0cmluZ3MgaW4gZWxlbWVudHMgc28gdGhhdCB0aGV5IGNhbiB1bmRlcmdvXG4gKiB0aGUgc2FtZSByZWNvbmNpbGlhdGlvbiB0aGF0IGlzIGFwcGxpZWQgdG8gZWxlbWVudHMuXG4gKlxuICogVE9ETzogSW52ZXN0aWdhdGUgcmVwcmVzZW50aW5nIFJlYWN0IGNvbXBvbmVudHMgaW4gdGhlIERPTSB3aXRoIHRleHQgbm9kZXMuXG4gKlxuICogQGNsYXNzIFJlYWN0RE9NVGV4dENvbXBvbmVudFxuICogQGV4dGVuZHMgUmVhY3RDb21wb25lbnRcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RET01UZXh0Q29tcG9uZW50ID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gIC8vIFRoaXMgY29uc3RydWN0b3IgYW5kIGl0cyBhcmd1bWVudCBpcyBjdXJyZW50bHkgdXNlZCBieSBtb2Nrcy5cbn07XG5cbmFzc2lnbihSZWFjdERPTVRleHRDb21wb25lbnQucHJvdG90eXBlLCB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UmVhY3RUZXh0fSB0ZXh0XG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgY29uc3RydWN0OiBmdW5jdGlvbiAodGV4dCkge1xuICAgIC8vIFRPRE86IFRoaXMgaXMgcmVhbGx5IGEgUmVhY3RUZXh0IChSZWFjdE5vZGUpLCBub3QgYSBSZWFjdEVsZW1lbnRcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IHRleHQ7XG4gICAgdGhpcy5fc3RyaW5nVGV4dCA9ICcnICsgdGV4dDtcblxuICAgIC8vIFByb3BlcnRpZXNcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgICB0aGlzLl9tb3VudEluZGV4ID0gMDtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUgbWFya3VwIGZvciB0aGlzIHRleHQgbm9kZS4gVGhpcyBub2RlIGlzIG5vdCBpbnRlbmRlZCB0byBoYXZlXG4gICAqIGFueSBmZWF0dXJlcyBiZXNpZGVzIGNvbnRhaW5pbmcgdGV4dCBjb250ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgZm9yIHRoaXMgdGV4dCBub2RlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pIHtcbiAgICAgICAgdmFsaWRhdGVET01OZXN0aW5nKCdzcGFuJywgbnVsbCwgY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSByb290SUQ7XG4gICAgaWYgKHRyYW5zYWN0aW9uLnVzZUNyZWF0ZUVsZW1lbnQpIHtcbiAgICAgIHZhciBvd25lckRvY3VtZW50ID0gY29udGV4dFtSZWFjdE1vdW50Lm93bmVyRG9jdW1lbnRDb250ZXh0S2V5XTtcbiAgICAgIHZhciBlbCA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLnNldEF0dHJpYnV0ZUZvcklEKGVsLCByb290SUQpO1xuICAgICAgLy8gUG9wdWxhdGUgbm9kZSBjYWNoZVxuICAgICAgUmVhY3RNb3VudC5nZXRJRChlbCk7XG4gICAgICBzZXRUZXh0Q29udGVudChlbCwgdGhpcy5fc3RyaW5nVGV4dCk7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBlc2NhcGVkVGV4dCA9IGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3Nlcih0aGlzLl9zdHJpbmdUZXh0KTtcblxuICAgICAgaWYgKHRyYW5zYWN0aW9uLnJlbmRlclRvU3RhdGljTWFya3VwKSB7XG4gICAgICAgIC8vIE5vcm1hbGx5IHdlJ2Qgd3JhcCB0aGlzIGluIGEgYHNwYW5gIGZvciB0aGUgcmVhc29ucyBzdGF0ZWQgYWJvdmUsIGJ1dFxuICAgICAgICAvLyBzaW5jZSB0aGlzIGlzIGEgc2l0dWF0aW9uIHdoZXJlIFJlYWN0IHdvbid0IHRha2Ugb3ZlciAoc3RhdGljIHBhZ2VzKSxcbiAgICAgICAgLy8gd2UgY2FuIHNpbXBseSByZXR1cm4gdGhlIHRleHQgYXMgaXQgaXMuXG4gICAgICAgIHJldHVybiBlc2NhcGVkVGV4dDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICc8c3BhbiAnICsgRE9NUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvcklEKHJvb3RJRCkgKyAnPicgKyBlc2NhcGVkVGV4dCArICc8L3NwYW4+JztcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhpcyBjb21wb25lbnQgYnkgdXBkYXRpbmcgdGhlIHRleHQgY29udGVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdFRleHR9IG5leHRUZXh0IFRoZSBuZXh0IHRleHQgY29udGVudFxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKG5leHRUZXh0LCB0cmFuc2FjdGlvbikge1xuICAgIGlmIChuZXh0VGV4dCAhPT0gdGhpcy5fY3VycmVudEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbmV4dFRleHQ7XG4gICAgICB2YXIgbmV4dFN0cmluZ1RleHQgPSAnJyArIG5leHRUZXh0O1xuICAgICAgaWYgKG5leHRTdHJpbmdUZXh0ICE9PSB0aGlzLl9zdHJpbmdUZXh0KSB7XG4gICAgICAgIC8vIFRPRE86IFNhdmUgdGhpcyBhcyBwZW5kaW5nIHByb3BzIGFuZCB1c2UgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5XG4gICAgICAgIC8vIGFuZC9vciB1cGRhdGVDb21wb25lbnQgdG8gZG8gdGhlIGFjdHVhbCB1cGRhdGUgZm9yIGNvbnNpc3RlbmN5IHdpdGhcbiAgICAgICAgLy8gb3RoZXIgY29tcG9uZW50IHR5cGVzP1xuICAgICAgICB0aGlzLl9zdHJpbmdUZXh0ID0gbmV4dFN0cmluZ1RleHQ7XG4gICAgICAgIHZhciBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgICAgICBET01DaGlsZHJlbk9wZXJhdGlvbnMudXBkYXRlVGV4dENvbnRlbnQobm9kZSwgbmV4dFN0cmluZ1RleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB1bm1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQudW5tb3VudElERnJvbUVudmlyb25tZW50KHRoaXMuX3Jvb3ROb2RlSUQpO1xuICB9XG5cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NVGV4dENvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01UZXh0YXJlYVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIExpbmtlZFZhbHVlVXRpbHMgPSByZXF1aXJlKCcuL0xpbmtlZFZhbHVlVXRpbHMnKTtcbnZhciBSZWFjdERPTUlET3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RET01JRE9wZXJhdGlvbnMnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuZnVuY3Rpb24gZm9yY2VVcGRhdGVJZk1vdW50ZWQoKSB7XG4gIGlmICh0aGlzLl9yb290Tm9kZUlEKSB7XG4gICAgLy8gRE9NIGNvbXBvbmVudCBpcyBzdGlsbCBtb3VudGVkOyB1cGRhdGVcbiAgICBSZWFjdERPTVRleHRhcmVhLnVwZGF0ZVdyYXBwZXIodGhpcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGEgPHRleHRhcmVhPiBuYXRpdmUgY29tcG9uZW50IHRoYXQgYWxsb3dzIHNldHRpbmcgYHZhbHVlYCwgYW5kXG4gKiBgZGVmYXVsdFZhbHVlYC4gVGhpcyBkaWZmZXJzIGZyb20gdGhlIHRyYWRpdGlvbmFsIERPTSBBUEkgYmVjYXVzZSB2YWx1ZSBpc1xuICogdXN1YWxseSBzZXQgYXMgUENEQVRBIGNoaWxkcmVuLlxuICpcbiAqIElmIGB2YWx1ZWAgaXMgbm90IHN1cHBsaWVkIChvciBudWxsL3VuZGVmaW5lZCksIHVzZXIgYWN0aW9ucyB0aGF0IGFmZmVjdCB0aGVcbiAqIHZhbHVlIHdpbGwgdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LlxuICpcbiAqIElmIGB2YWx1ZWAgaXMgc3VwcGxpZWQgKGFuZCBub3QgbnVsbC91bmRlZmluZWQpLCB0aGUgcmVuZGVyZWQgZWxlbWVudCB3aWxsXG4gKiBub3QgdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LiBJbnN0ZWFkLCB0aGUgYHZhbHVlYCBwcm9wIG11c3QgY2hhbmdlIGluXG4gKiBvcmRlciBmb3IgdGhlIHJlbmRlcmVkIGVsZW1lbnQgdG8gYmUgdXBkYXRlZC5cbiAqXG4gKiBUaGUgcmVuZGVyZWQgZWxlbWVudCB3aWxsIGJlIGluaXRpYWxpemVkIHdpdGggYW4gZW1wdHkgdmFsdWUsIHRoZSBwcm9wXG4gKiBgZGVmYXVsdFZhbHVlYCBpZiBzcGVjaWZpZWQsIG9yIHRoZSBjaGlsZHJlbiBjb250ZW50IChkZXByZWNhdGVkKS5cbiAqL1xudmFyIFJlYWN0RE9NVGV4dGFyZWEgPSB7XG4gIGdldE5hdGl2ZVByb3BzOiBmdW5jdGlvbiAoaW5zdCwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICAhKHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2BkYW5nZXJvdXNseVNldElubmVySFRNTGAgZG9lcyBub3QgbWFrZSBzZW5zZSBvbiA8dGV4dGFyZWE+LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIEFsd2F5cyBzZXQgY2hpbGRyZW4gdG8gdGhlIHNhbWUgdGhpbmcuIEluIElFOSwgdGhlIHNlbGVjdGlvbiByYW5nZSB3aWxsXG4gICAgLy8gZ2V0IHJlc2V0IGlmIGB0ZXh0Q29udGVudGAgaXMgbXV0YXRlZC5cbiAgICB2YXIgbmF0aXZlUHJvcHMgPSBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICBkZWZhdWx0VmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICBjaGlsZHJlbjogaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSxcbiAgICAgIG9uQ2hhbmdlOiBpbnN0Ll93cmFwcGVyU3RhdGUub25DaGFuZ2VcbiAgICB9KTtcblxuICAgIHJldHVybiBuYXRpdmVQcm9wcztcbiAgfSxcblxuICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBMaW5rZWRWYWx1ZVV0aWxzLmNoZWNrUHJvcFR5cGVzKCd0ZXh0YXJlYScsIHByb3BzLCBpbnN0Ll9jdXJyZW50RWxlbWVudC5fb3duZXIpO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0VmFsdWUgPSBwcm9wcy5kZWZhdWx0VmFsdWU7XG4gICAgLy8gVE9ETyAoeXVuZ3N0ZXJzKTogUmVtb3ZlIHN1cHBvcnQgZm9yIGNoaWxkcmVuIGNvbnRlbnQgaW4gPHRleHRhcmVhPi5cbiAgICB2YXIgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbjtcbiAgICBpZiAoY2hpbGRyZW4gIT0gbnVsbCkge1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdVc2UgdGhlIGBkZWZhdWx0VmFsdWVgIG9yIGB2YWx1ZWAgcHJvcHMgaW5zdGVhZCBvZiBzZXR0aW5nICcgKyAnY2hpbGRyZW4gb24gPHRleHRhcmVhPi4nKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgICEoZGVmYXVsdFZhbHVlID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0lmIHlvdSBzdXBwbHkgYGRlZmF1bHRWYWx1ZWAgb24gYSA8dGV4dGFyZWE+LCBkbyBub3QgcGFzcyBjaGlsZHJlbi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICAgICAgIShjaGlsZHJlbi5sZW5ndGggPD0gMSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnPHRleHRhcmVhPiBjYW4gb25seSBoYXZlIGF0IG1vc3Qgb25lIGNoaWxkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgY2hpbGRyZW4gPSBjaGlsZHJlblswXTtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdFZhbHVlID0gJycgKyBjaGlsZHJlbjtcbiAgICB9XG4gICAgaWYgKGRlZmF1bHRWYWx1ZSA9PSBudWxsKSB7XG4gICAgICBkZWZhdWx0VmFsdWUgPSAnJztcbiAgICB9XG4gICAgdmFyIHZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5nZXRWYWx1ZShwcm9wcyk7XG5cbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7XG4gICAgICAvLyBXZSBzYXZlIHRoZSBpbml0aWFsIHZhbHVlIHNvIHRoYXQgYFJlYWN0RE9NQ29tcG9uZW50YCBkb2Vzbid0IHVwZGF0ZVxuICAgICAgLy8gYHRleHRDb250ZW50YCAodW5uZWNlc3Nhcnkgc2luY2Ugd2UgdXBkYXRlIHZhbHVlKS5cbiAgICAgIC8vIFRoZSBpbml0aWFsIHZhbHVlIGNhbiBiZSBhIGJvb2xlYW4gb3Igb2JqZWN0IHNvIHRoYXQncyB3aHkgaXQnc1xuICAgICAgLy8gZm9yY2VkIHRvIGJlIGEgc3RyaW5nLlxuICAgICAgaW5pdGlhbFZhbHVlOiAnJyArICh2YWx1ZSAhPSBudWxsID8gdmFsdWUgOiBkZWZhdWx0VmFsdWUpLFxuICAgICAgb25DaGFuZ2U6IF9oYW5kbGVDaGFuZ2UuYmluZChpbnN0KVxuICAgIH07XG4gIH0sXG5cbiAgdXBkYXRlV3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcbiAgICB2YXIgcHJvcHMgPSBpbnN0Ll9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgLy8gQ2FzdCBgdmFsdWVgIHRvIGEgc3RyaW5nIHRvIGVuc3VyZSB0aGUgdmFsdWUgaXMgc2V0IGNvcnJlY3RseS4gV2hpbGVcbiAgICAgIC8vIGJyb3dzZXJzIHR5cGljYWxseSBkbyB0aGlzIGFzIG5lY2Vzc2FyeSwganNkb20gZG9lc24ndC5cbiAgICAgIFJlYWN0RE9NSURPcGVyYXRpb25zLnVwZGF0ZVByb3BlcnR5QnlJRChpbnN0Ll9yb290Tm9kZUlELCAndmFsdWUnLCAnJyArIHZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9oYW5kbGVDaGFuZ2UoZXZlbnQpIHtcbiAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG4gIHZhciByZXR1cm5WYWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZXhlY3V0ZU9uQ2hhbmdlKHByb3BzLCBldmVudCk7XG4gIFJlYWN0VXBkYXRlcy5hc2FwKGZvcmNlVXBkYXRlSWZNb3VudGVkLCB0aGlzKTtcbiAgcmV0dXJuIHJldHVyblZhbHVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NVGV4dGFyZWE7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3lcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xudmFyIFRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9UcmFuc2FjdGlvbicpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcblxudmFyIFJFU0VUX0JBVENIRURfVVBEQVRFUyA9IHtcbiAgaW5pdGlhbGl6ZTogZW1wdHlGdW5jdGlvbixcbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzID0gZmFsc2U7XG4gIH1cbn07XG5cbnZhciBGTFVTSF9CQVRDSEVEX1VQREFURVMgPSB7XG4gIGluaXRpYWxpemU6IGVtcHR5RnVuY3Rpb24sXG4gIGNsb3NlOiBSZWFjdFVwZGF0ZXMuZmx1c2hCYXRjaGVkVXBkYXRlcy5iaW5kKFJlYWN0VXBkYXRlcylcbn07XG5cbnZhciBUUkFOU0FDVElPTl9XUkFQUEVSUyA9IFtGTFVTSF9CQVRDSEVEX1VQREFURVMsIFJFU0VUX0JBVENIRURfVVBEQVRFU107XG5cbmZ1bmN0aW9uIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3lUcmFuc2FjdGlvbigpIHtcbiAgdGhpcy5yZWluaXRpYWxpemVUcmFuc2FjdGlvbigpO1xufVxuXG5hc3NpZ24oUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneVRyYW5zYWN0aW9uLnByb3RvdHlwZSwgVHJhbnNhY3Rpb24uTWl4aW4sIHtcbiAgZ2V0VHJhbnNhY3Rpb25XcmFwcGVyczogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBUUkFOU0FDVElPTl9XUkFQUEVSUztcbiAgfVxufSk7XG5cbnZhciB0cmFuc2FjdGlvbiA9IG5ldyBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5VHJhbnNhY3Rpb24oKTtcblxudmFyIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kgPSB7XG4gIGlzQmF0Y2hpbmdVcGRhdGVzOiBmYWxzZSxcblxuICAvKipcbiAgICogQ2FsbCB0aGUgcHJvdmlkZWQgZnVuY3Rpb24gaW4gYSBjb250ZXh0IHdpdGhpbiB3aGljaCBjYWxscyB0byBgc2V0U3RhdGVgXG4gICAqIGFuZCBmcmllbmRzIGFyZSBiYXRjaGVkIHN1Y2ggdGhhdCBjb21wb25lbnRzIGFyZW4ndCB1cGRhdGVkIHVubmVjZXNzYXJpbHkuXG4gICAqL1xuICBiYXRjaGVkVXBkYXRlczogZnVuY3Rpb24gKGNhbGxiYWNrLCBhLCBiLCBjLCBkLCBlKSB7XG4gICAgdmFyIGFscmVhZHlCYXRjaGluZ1VwZGF0ZXMgPSBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzO1xuXG4gICAgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcyA9IHRydWU7XG5cbiAgICAvLyBUaGUgY29kZSBpcyB3cml0dGVuIHRoaXMgd2F5IHRvIGF2b2lkIGV4dHJhIGFsbG9jYXRpb25zXG4gICAgaWYgKGFscmVhZHlCYXRjaGluZ1VwZGF0ZXMpIHtcbiAgICAgIGNhbGxiYWNrKGEsIGIsIGMsIGQsIGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmFuc2FjdGlvbi5wZXJmb3JtKGNhbGxiYWNrLCBudWxsLCBhLCBiLCBjLCBkLCBlKTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3REZWZhdWx0SW5qZWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQmVmb3JlSW5wdXRFdmVudFBsdWdpbiA9IHJlcXVpcmUoJy4vQmVmb3JlSW5wdXRFdmVudFBsdWdpbicpO1xudmFyIENoYW5nZUV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9DaGFuZ2VFdmVudFBsdWdpbicpO1xudmFyIENsaWVudFJlYWN0Um9vdEluZGV4ID0gcmVxdWlyZSgnLi9DbGllbnRSZWFjdFJvb3RJbmRleCcpO1xudmFyIERlZmF1bHRFdmVudFBsdWdpbk9yZGVyID0gcmVxdWlyZSgnLi9EZWZhdWx0RXZlbnRQbHVnaW5PcmRlcicpO1xudmFyIEVudGVyTGVhdmVFdmVudFBsdWdpbiA9IHJlcXVpcmUoJy4vRW50ZXJMZWF2ZUV2ZW50UGx1Z2luJyk7XG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xudmFyIEhUTUxET01Qcm9wZXJ0eUNvbmZpZyA9IHJlcXVpcmUoJy4vSFRNTERPTVByb3BlcnR5Q29uZmlnJyk7XG52YXIgUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4gPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckNvbXBvbmVudE1peGluJyk7XG52YXIgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50Jyk7XG52YXIgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSA9IHJlcXVpcmUoJy4vUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneScpO1xudmFyIFJlYWN0RE9NQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdERPTUNvbXBvbmVudCcpO1xudmFyIFJlYWN0RE9NVGV4dENvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RET01UZXh0Q29tcG9uZW50Jyk7XG52YXIgUmVhY3RFdmVudExpc3RlbmVyID0gcmVxdWlyZSgnLi9SZWFjdEV2ZW50TGlzdGVuZXInKTtcbnZhciBSZWFjdEluamVjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RJbmplY3Rpb24nKTtcbnZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZUhhbmRsZXMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbicpO1xudmFyIFNlbGVjdEV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9TZWxlY3RFdmVudFBsdWdpbicpO1xudmFyIFNlcnZlclJlYWN0Um9vdEluZGV4ID0gcmVxdWlyZSgnLi9TZXJ2ZXJSZWFjdFJvb3RJbmRleCcpO1xudmFyIFNpbXBsZUV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9TaW1wbGVFdmVudFBsdWdpbicpO1xudmFyIFNWR0RPTVByb3BlcnR5Q29uZmlnID0gcmVxdWlyZSgnLi9TVkdET01Qcm9wZXJ0eUNvbmZpZycpO1xuXG52YXIgYWxyZWFkeUluamVjdGVkID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGluamVjdCgpIHtcbiAgaWYgKGFscmVhZHlJbmplY3RlZCkge1xuICAgIC8vIFRPRE86IFRoaXMgaXMgY3VycmVudGx5IHRydWUgYmVjYXVzZSB0aGVzZSBpbmplY3Rpb25zIGFyZSBzaGFyZWQgYmV0d2VlblxuICAgIC8vIHRoZSBjbGllbnQgYW5kIHRoZSBzZXJ2ZXIgcGFja2FnZS4gVGhleSBzaG91bGQgYmUgYnVpbHQgaW5kZXBlbmRlbnRseVxuICAgIC8vIGFuZCBub3Qgc2hhcmUgYW55IGluamVjdGlvbiBzdGF0ZS4gVGhlbiB0aGlzIHByb2JsZW0gd2lsbCBiZSBzb2x2ZWQuXG4gICAgcmV0dXJuO1xuICB9XG4gIGFscmVhZHlJbmplY3RlZCA9IHRydWU7XG5cbiAgUmVhY3RJbmplY3Rpb24uRXZlbnRFbWl0dGVyLmluamVjdFJlYWN0RXZlbnRMaXN0ZW5lcihSZWFjdEV2ZW50TGlzdGVuZXIpO1xuXG4gIC8qKlxuICAgKiBJbmplY3QgbW9kdWxlcyBmb3IgcmVzb2x2aW5nIERPTSBoaWVyYXJjaHkgYW5kIHBsdWdpbiBvcmRlcmluZy5cbiAgICovXG4gIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdEV2ZW50UGx1Z2luT3JkZXIoRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIpO1xuICBSZWFjdEluamVjdGlvbi5FdmVudFBsdWdpbkh1Yi5pbmplY3RJbnN0YW5jZUhhbmRsZShSZWFjdEluc3RhbmNlSGFuZGxlcyk7XG4gIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdE1vdW50KFJlYWN0TW91bnQpO1xuXG4gIC8qKlxuICAgKiBTb21lIGltcG9ydGFudCBldmVudCBwbHVnaW5zIGluY2x1ZGVkIGJ5IGRlZmF1bHQgKHdpdGhvdXQgaGF2aW5nIHRvIHJlcXVpcmVcbiAgICogdGhlbSkuXG4gICAqL1xuICBSZWFjdEluamVjdGlvbi5FdmVudFBsdWdpbkh1Yi5pbmplY3RFdmVudFBsdWdpbnNCeU5hbWUoe1xuICAgIFNpbXBsZUV2ZW50UGx1Z2luOiBTaW1wbGVFdmVudFBsdWdpbixcbiAgICBFbnRlckxlYXZlRXZlbnRQbHVnaW46IEVudGVyTGVhdmVFdmVudFBsdWdpbixcbiAgICBDaGFuZ2VFdmVudFBsdWdpbjogQ2hhbmdlRXZlbnRQbHVnaW4sXG4gICAgU2VsZWN0RXZlbnRQbHVnaW46IFNlbGVjdEV2ZW50UGx1Z2luLFxuICAgIEJlZm9yZUlucHV0RXZlbnRQbHVnaW46IEJlZm9yZUlucHV0RXZlbnRQbHVnaW5cbiAgfSk7XG5cbiAgUmVhY3RJbmplY3Rpb24uTmF0aXZlQ29tcG9uZW50LmluamVjdEdlbmVyaWNDb21wb25lbnRDbGFzcyhSZWFjdERPTUNvbXBvbmVudCk7XG5cbiAgUmVhY3RJbmplY3Rpb24uTmF0aXZlQ29tcG9uZW50LmluamVjdFRleHRDb21wb25lbnRDbGFzcyhSZWFjdERPTVRleHRDb21wb25lbnQpO1xuXG4gIFJlYWN0SW5qZWN0aW9uLkNsYXNzLmluamVjdE1peGluKFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluKTtcblxuICBSZWFjdEluamVjdGlvbi5ET01Qcm9wZXJ0eS5pbmplY3RET01Qcm9wZXJ0eUNvbmZpZyhIVE1MRE9NUHJvcGVydHlDb25maWcpO1xuICBSZWFjdEluamVjdGlvbi5ET01Qcm9wZXJ0eS5pbmplY3RET01Qcm9wZXJ0eUNvbmZpZyhTVkdET01Qcm9wZXJ0eUNvbmZpZyk7XG5cbiAgUmVhY3RJbmplY3Rpb24uRW1wdHlDb21wb25lbnQuaW5qZWN0RW1wdHlDb21wb25lbnQoJ25vc2NyaXB0Jyk7XG5cbiAgUmVhY3RJbmplY3Rpb24uVXBkYXRlcy5pbmplY3RSZWNvbmNpbGVUcmFuc2FjdGlvbihSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uKTtcbiAgUmVhY3RJbmplY3Rpb24uVXBkYXRlcy5pbmplY3RCYXRjaGluZ1N0cmF0ZWd5KFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kpO1xuXG4gIFJlYWN0SW5qZWN0aW9uLlJvb3RJbmRleC5pbmplY3RDcmVhdGVSZWFjdFJvb3RJbmRleChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBDbGllbnRSZWFjdFJvb3RJbmRleC5jcmVhdGVSZWFjdFJvb3RJbmRleCA6IFNlcnZlclJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4KTtcblxuICBSZWFjdEluamVjdGlvbi5Db21wb25lbnQuaW5qZWN0RW52aXJvbm1lbnQoUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQpO1xuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFyIHVybCA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiB3aW5kb3cubG9jYXRpb24uaHJlZiB8fCAnJztcbiAgICBpZiAoL1s/Jl1yZWFjdF9wZXJmXFxiLy50ZXN0KHVybCkpIHtcbiAgICAgIHZhciBSZWFjdERlZmF1bHRQZXJmID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRQZXJmJyk7XG4gICAgICBSZWFjdERlZmF1bHRQZXJmLnN0YXJ0KCk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpbmplY3Q6IGluamVjdFxufTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFbGVtZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vY2FuRGVmaW5lUHJvcGVydHknKTtcblxuLy8gVGhlIFN5bWJvbCB1c2VkIHRvIHRhZyB0aGUgUmVhY3RFbGVtZW50IHR5cGUuIElmIHRoZXJlIGlzIG5vIG5hdGl2ZSBTeW1ib2xcbi8vIG5vciBwb2x5ZmlsbCwgdGhlbiBhIHBsYWluIG51bWJlciBpcyB1c2VkIGZvciBwZXJmb3JtYW5jZS5cbnZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbFsnZm9yJ10gJiYgU3ltYm9sWydmb3InXSgncmVhY3QuZWxlbWVudCcpIHx8IDB4ZWFjNztcblxudmFyIFJFU0VSVkVEX1BST1BTID0ge1xuICBrZXk6IHRydWUsXG4gIHJlZjogdHJ1ZSxcbiAgX19zZWxmOiB0cnVlLFxuICBfX3NvdXJjZTogdHJ1ZVxufTtcblxuLyoqXG4gKiBCYXNlIGNvbnN0cnVjdG9yIGZvciBhbGwgUmVhY3QgZWxlbWVudHMuIFRoaXMgaXMgb25seSB1c2VkIHRvIG1ha2UgdGhpc1xuICogd29yayB3aXRoIGEgZHluYW1pYyBpbnN0YW5jZW9mIGNoZWNrLiBOb3RoaW5nIHNob3VsZCBsaXZlIG9uIHRoaXMgcHJvdG90eXBlLlxuICpcbiAqIEBwYXJhbSB7Kn0gdHlwZVxuICogQHBhcmFtIHsqfSBrZXlcbiAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gcmVmXG4gKiBAcGFyYW0geyp9IHNlbGYgQSAqdGVtcG9yYXJ5KiBoZWxwZXIgdG8gZGV0ZWN0IHBsYWNlcyB3aGVyZSBgdGhpc2AgaXNcbiAqIGRpZmZlcmVudCBmcm9tIHRoZSBgb3duZXJgIHdoZW4gUmVhY3QuY3JlYXRlRWxlbWVudCBpcyBjYWxsZWQsIHNvIHRoYXQgd2VcbiAqIGNhbiB3YXJuLiBXZSB3YW50IHRvIGdldCByaWQgb2Ygb3duZXIgYW5kIHJlcGxhY2Ugc3RyaW5nIGByZWZgcyB3aXRoIGFycm93XG4gKiBmdW5jdGlvbnMsIGFuZCBhcyBsb25nIGFzIGB0aGlzYCBhbmQgb3duZXIgYXJlIHRoZSBzYW1lLCB0aGVyZSB3aWxsIGJlIG5vXG4gKiBjaGFuZ2UgaW4gYmVoYXZpb3IuXG4gKiBAcGFyYW0geyp9IHNvdXJjZSBBbiBhbm5vdGF0aW9uIG9iamVjdCAoYWRkZWQgYnkgYSB0cmFuc3BpbGVyIG9yIG90aGVyd2lzZSlcbiAqIGluZGljYXRpbmcgZmlsZW5hbWUsIGxpbmUgbnVtYmVyLCBhbmQvb3Igb3RoZXIgaW5mb3JtYXRpb24uXG4gKiBAcGFyYW0geyp9IG93bmVyXG4gKiBAcGFyYW0geyp9IHByb3BzXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIFJlYWN0RWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBrZXksIHJlZiwgc2VsZiwgc291cmNlLCBvd25lciwgcHJvcHMpIHtcbiAgdmFyIGVsZW1lbnQgPSB7XG4gICAgLy8gVGhpcyB0YWcgYWxsb3cgdXMgdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhpcyBhcyBhIFJlYWN0IEVsZW1lbnRcbiAgICAkJHR5cGVvZjogUkVBQ1RfRUxFTUVOVF9UWVBFLFxuXG4gICAgLy8gQnVpbHQtaW4gcHJvcGVydGllcyB0aGF0IGJlbG9uZyBvbiB0aGUgZWxlbWVudFxuICAgIHR5cGU6IHR5cGUsXG4gICAga2V5OiBrZXksXG4gICAgcmVmOiByZWYsXG4gICAgcHJvcHM6IHByb3BzLFxuXG4gICAgLy8gUmVjb3JkIHRoZSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoaXMgZWxlbWVudC5cbiAgICBfb3duZXI6IG93bmVyXG4gIH07XG5cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyBUaGUgdmFsaWRhdGlvbiBmbGFnIGlzIGN1cnJlbnRseSBtdXRhdGl2ZS4gV2UgcHV0IGl0IG9uXG4gICAgLy8gYW4gZXh0ZXJuYWwgYmFja2luZyBzdG9yZSBzbyB0aGF0IHdlIGNhbiBmcmVlemUgdGhlIHdob2xlIG9iamVjdC5cbiAgICAvLyBUaGlzIGNhbiBiZSByZXBsYWNlZCB3aXRoIGEgV2Vha01hcCBvbmNlIHRoZXkgYXJlIGltcGxlbWVudGVkIGluXG4gICAgLy8gY29tbW9ubHkgdXNlZCBkZXZlbG9wbWVudCBlbnZpcm9ubWVudHMuXG4gICAgZWxlbWVudC5fc3RvcmUgPSB7fTtcblxuICAgIC8vIFRvIG1ha2UgY29tcGFyaW5nIFJlYWN0RWxlbWVudHMgZWFzaWVyIGZvciB0ZXN0aW5nIHB1cnBvc2VzLCB3ZSBtYWtlXG4gICAgLy8gdGhlIHZhbGlkYXRpb24gZmxhZyBub24tZW51bWVyYWJsZSAod2hlcmUgcG9zc2libGUsIHdoaWNoIHNob3VsZFxuICAgIC8vIGluY2x1ZGUgZXZlcnkgZW52aXJvbm1lbnQgd2UgcnVuIHRlc3RzIGluKSwgc28gdGhlIHRlc3QgZnJhbWV3b3JrXG4gICAgLy8gaWdub3JlcyBpdC5cbiAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50Ll9zdG9yZSwgJ3ZhbGlkYXRlZCcsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgLy8gc2VsZiBhbmQgc291cmNlIGFyZSBERVYgb25seSBwcm9wZXJ0aWVzLlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdfc2VsZicsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IHNlbGZcbiAgICAgIH0pO1xuICAgICAgLy8gVHdvIGVsZW1lbnRzIGNyZWF0ZWQgaW4gdHdvIGRpZmZlcmVudCBwbGFjZXMgc2hvdWxkIGJlIGNvbnNpZGVyZWRcbiAgICAgIC8vIGVxdWFsIGZvciB0ZXN0aW5nIHB1cnBvc2VzIGFuZCB0aGVyZWZvcmUgd2UgaGlkZSBpdCBmcm9tIGVudW1lcmF0aW9uLlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdfc291cmNlJywge1xuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogc291cmNlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudC5fc3RvcmUudmFsaWRhdGVkID0gZmFsc2U7XG4gICAgICBlbGVtZW50Ll9zZWxmID0gc2VsZjtcbiAgICAgIGVsZW1lbnQuX3NvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgT2JqZWN0LmZyZWV6ZShlbGVtZW50LnByb3BzKTtcbiAgICBPYmplY3QuZnJlZXplKGVsZW1lbnQpO1xuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnQ7XG59O1xuXG5SZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBjb25maWcsIGNoaWxkcmVuKSB7XG4gIHZhciBwcm9wTmFtZTtcblxuICAvLyBSZXNlcnZlZCBuYW1lcyBhcmUgZXh0cmFjdGVkXG4gIHZhciBwcm9wcyA9IHt9O1xuXG4gIHZhciBrZXkgPSBudWxsO1xuICB2YXIgcmVmID0gbnVsbDtcbiAgdmFyIHNlbGYgPSBudWxsO1xuICB2YXIgc291cmNlID0gbnVsbDtcblxuICBpZiAoY29uZmlnICE9IG51bGwpIHtcbiAgICByZWYgPSBjb25maWcucmVmID09PSB1bmRlZmluZWQgPyBudWxsIDogY29uZmlnLnJlZjtcbiAgICBrZXkgPSBjb25maWcua2V5ID09PSB1bmRlZmluZWQgPyBudWxsIDogJycgKyBjb25maWcua2V5O1xuICAgIHNlbGYgPSBjb25maWcuX19zZWxmID09PSB1bmRlZmluZWQgPyBudWxsIDogY29uZmlnLl9fc2VsZjtcbiAgICBzb3VyY2UgPSBjb25maWcuX19zb3VyY2UgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjb25maWcuX19zb3VyY2U7XG4gICAgLy8gUmVtYWluaW5nIHByb3BlcnRpZXMgYXJlIGFkZGVkIHRvIGEgbmV3IHByb3BzIG9iamVjdFxuICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKSB7XG4gICAgICBpZiAoY29uZmlnLmhhc093blByb3BlcnR5KHByb3BOYW1lKSAmJiAhUkVTRVJWRURfUFJPUFMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hpbGRyZW4gY2FuIGJlIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQsIGFuZCB0aG9zZSBhcmUgdHJhbnNmZXJyZWQgb250b1xuICAvLyB0aGUgbmV3bHkgYWxsb2NhdGVkIHByb3BzIG9iamVjdC5cbiAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG4gIGlmIChjaGlsZHJlbkxlbmd0aCA9PT0gMSkge1xuICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gIH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7XG4gICAgdmFyIGNoaWxkQXJyYXkgPSBBcnJheShjaGlsZHJlbkxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbkxlbmd0aDsgaSsrKSB7XG4gICAgICBjaGlsZEFycmF5W2ldID0gYXJndW1lbnRzW2kgKyAyXTtcbiAgICB9XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZEFycmF5O1xuICB9XG5cbiAgLy8gUmVzb2x2ZSBkZWZhdWx0IHByb3BzXG4gIGlmICh0eXBlICYmIHR5cGUuZGVmYXVsdFByb3BzKSB7XG4gICAgdmFyIGRlZmF1bHRQcm9wcyA9IHR5cGUuZGVmYXVsdFByb3BzO1xuICAgIGZvciAocHJvcE5hbWUgaW4gZGVmYXVsdFByb3BzKSB7XG4gICAgICBpZiAodHlwZW9mIHByb3BzW3Byb3BOYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcHJvcHNbcHJvcE5hbWVdID0gZGVmYXVsdFByb3BzW3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gUmVhY3RFbGVtZW50KHR5cGUsIGtleSwgcmVmLCBzZWxmLCBzb3VyY2UsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQsIHByb3BzKTtcbn07XG5cblJlYWN0RWxlbWVudC5jcmVhdGVGYWN0b3J5ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgdmFyIGZhY3RvcnkgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudC5iaW5kKG51bGwsIHR5cGUpO1xuICAvLyBFeHBvc2UgdGhlIHR5cGUgb24gdGhlIGZhY3RvcnkgYW5kIHRoZSBwcm90b3R5cGUgc28gdGhhdCBpdCBjYW4gYmVcbiAgLy8gZWFzaWx5IGFjY2Vzc2VkIG9uIGVsZW1lbnRzLiBFLmcuIGA8Rm9vIC8+LnR5cGUgPT09IEZvb2AuXG4gIC8vIFRoaXMgc2hvdWxkIG5vdCBiZSBuYW1lZCBgY29uc3RydWN0b3JgIHNpbmNlIHRoaXMgbWF5IG5vdCBiZSB0aGUgZnVuY3Rpb25cbiAgLy8gdGhhdCBjcmVhdGVkIHRoZSBlbGVtZW50LCBhbmQgaXQgbWF5IG5vdCBldmVuIGJlIGEgY29uc3RydWN0b3IuXG4gIC8vIExlZ2FjeSBob29rIFRPRE86IFdhcm4gaWYgdGhpcyBpcyBhY2Nlc3NlZFxuICBmYWN0b3J5LnR5cGUgPSB0eXBlO1xuICByZXR1cm4gZmFjdG9yeTtcbn07XG5cblJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VLZXkgPSBmdW5jdGlvbiAob2xkRWxlbWVudCwgbmV3S2V5KSB7XG4gIHZhciBuZXdFbGVtZW50ID0gUmVhY3RFbGVtZW50KG9sZEVsZW1lbnQudHlwZSwgbmV3S2V5LCBvbGRFbGVtZW50LnJlZiwgb2xkRWxlbWVudC5fc2VsZiwgb2xkRWxlbWVudC5fc291cmNlLCBvbGRFbGVtZW50Ll9vd25lciwgb2xkRWxlbWVudC5wcm9wcyk7XG5cbiAgcmV0dXJuIG5ld0VsZW1lbnQ7XG59O1xuXG5SZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlUHJvcHMgPSBmdW5jdGlvbiAob2xkRWxlbWVudCwgbmV3UHJvcHMpIHtcbiAgdmFyIG5ld0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQob2xkRWxlbWVudC50eXBlLCBvbGRFbGVtZW50LmtleSwgb2xkRWxlbWVudC5yZWYsIG9sZEVsZW1lbnQuX3NlbGYsIG9sZEVsZW1lbnQuX3NvdXJjZSwgb2xkRWxlbWVudC5fb3duZXIsIG5ld1Byb3BzKTtcblxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIC8vIElmIHRoZSBrZXkgb24gdGhlIG9yaWdpbmFsIGlzIHZhbGlkLCB0aGVuIHRoZSBjbG9uZSBpcyB2YWxpZFxuICAgIG5ld0VsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCA9IG9sZEVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZDtcbiAgfVxuXG4gIHJldHVybiBuZXdFbGVtZW50O1xufTtcblxuUmVhY3RFbGVtZW50LmNsb25lRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb25maWcsIGNoaWxkcmVuKSB7XG4gIHZhciBwcm9wTmFtZTtcblxuICAvLyBPcmlnaW5hbCBwcm9wcyBhcmUgY29waWVkXG4gIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgZWxlbWVudC5wcm9wcyk7XG5cbiAgLy8gUmVzZXJ2ZWQgbmFtZXMgYXJlIGV4dHJhY3RlZFxuICB2YXIga2V5ID0gZWxlbWVudC5rZXk7XG4gIHZhciByZWYgPSBlbGVtZW50LnJlZjtcbiAgLy8gU2VsZiBpcyBwcmVzZXJ2ZWQgc2luY2UgdGhlIG93bmVyIGlzIHByZXNlcnZlZC5cbiAgdmFyIHNlbGYgPSBlbGVtZW50Ll9zZWxmO1xuICAvLyBTb3VyY2UgaXMgcHJlc2VydmVkIHNpbmNlIGNsb25lRWxlbWVudCBpcyB1bmxpa2VseSB0byBiZSB0YXJnZXRlZCBieSBhXG4gIC8vIHRyYW5zcGlsZXIsIGFuZCB0aGUgb3JpZ2luYWwgc291cmNlIGlzIHByb2JhYmx5IGEgYmV0dGVyIGluZGljYXRvciBvZiB0aGVcbiAgLy8gdHJ1ZSBvd25lci5cbiAgdmFyIHNvdXJjZSA9IGVsZW1lbnQuX3NvdXJjZTtcblxuICAvLyBPd25lciB3aWxsIGJlIHByZXNlcnZlZCwgdW5sZXNzIHJlZiBpcyBvdmVycmlkZGVuXG4gIHZhciBvd25lciA9IGVsZW1lbnQuX293bmVyO1xuXG4gIGlmIChjb25maWcgIT0gbnVsbCkge1xuICAgIGlmIChjb25maWcucmVmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIFNpbGVudGx5IHN0ZWFsIHRoZSByZWYgZnJvbSB0aGUgcGFyZW50LlxuICAgICAgcmVmID0gY29uZmlnLnJlZjtcbiAgICAgIG93bmVyID0gUmVhY3RDdXJyZW50T3duZXIuY3VycmVudDtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5rZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5ID0gJycgKyBjb25maWcua2V5O1xuICAgIH1cbiAgICAvLyBSZW1haW5pbmcgcHJvcGVydGllcyBvdmVycmlkZSBleGlzdGluZyBwcm9wc1xuICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKSB7XG4gICAgICBpZiAoY29uZmlnLmhhc093blByb3BlcnR5KHByb3BOYW1lKSAmJiAhUkVTRVJWRURfUFJPUFMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hpbGRyZW4gY2FuIGJlIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQsIGFuZCB0aG9zZSBhcmUgdHJhbnNmZXJyZWQgb250b1xuICAvLyB0aGUgbmV3bHkgYWxsb2NhdGVkIHByb3BzIG9iamVjdC5cbiAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG4gIGlmIChjaGlsZHJlbkxlbmd0aCA9PT0gMSkge1xuICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gIH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7XG4gICAgdmFyIGNoaWxkQXJyYXkgPSBBcnJheShjaGlsZHJlbkxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbkxlbmd0aDsgaSsrKSB7XG4gICAgICBjaGlsZEFycmF5W2ldID0gYXJndW1lbnRzW2kgKyAyXTtcbiAgICB9XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZEFycmF5O1xuICB9XG5cbiAgcmV0dXJuIFJlYWN0RWxlbWVudChlbGVtZW50LnR5cGUsIGtleSwgcmVmLCBzZWxmLCBzb3VyY2UsIG93bmVyLCBwcm9wcyk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7P29iamVjdH0gb2JqZWN0XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBvYmplY3RgIGlzIGEgdmFsaWQgY29tcG9uZW50LlxuICogQGZpbmFsXG4gKi9cblJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudCA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdCAhPT0gbnVsbCAmJiBvYmplY3QuJCR0eXBlb2YgPT09IFJFQUNUX0VMRU1FTlRfVFlQRTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RFbGVtZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVsZW1lbnRWYWxpZGF0b3JcbiAqL1xuXG4vKipcbiAqIFJlYWN0RWxlbWVudFZhbGlkYXRvciBwcm92aWRlcyBhIHdyYXBwZXIgYXJvdW5kIGEgZWxlbWVudCBmYWN0b3J5XG4gKiB3aGljaCB2YWxpZGF0ZXMgdGhlIHByb3BzIHBhc3NlZCB0byB0aGUgZWxlbWVudC4gVGhpcyBpcyBpbnRlbmRlZCB0byBiZVxuICogdXNlZCBvbmx5IGluIERFViBhbmQgY291bGQgYmUgcmVwbGFjZWQgYnkgYSBzdGF0aWMgdHlwZSBjaGVja2VyIGZvciBsYW5ndWFnZXNcbiAqIHRoYXQgc3VwcG9ydCBpdC5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMnKTtcbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcblxudmFyIGNhbkRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9jYW5EZWZpbmVQcm9wZXJ0eScpO1xudmFyIGdldEl0ZXJhdG9yRm4gPSByZXF1aXJlKCcuL2dldEl0ZXJhdG9yRm4nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKSB7XG4gIGlmIChSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG4gICAgdmFyIG5hbWUgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKTtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIFdhcm4gaWYgdGhlcmUncyBubyBrZXkgZXhwbGljaXRseSBzZXQgb24gZHluYW1pYyBhcnJheXMgb2YgY2hpbGRyZW4gb3JcbiAqIG9iamVjdCBrZXlzIGFyZSBub3QgdmFsaWQuIFRoaXMgYWxsb3dzIHVzIHRvIGtlZXAgdHJhY2sgb2YgY2hpbGRyZW4gYmV0d2VlblxuICogdXBkYXRlcy5cbiAqL1xudmFyIG93bmVySGFzS2V5VXNlV2FybmluZyA9IHt9O1xuXG52YXIgbG9nZ2VkVHlwZUZhaWx1cmVzID0ge307XG5cbi8qKlxuICogV2FybiBpZiB0aGUgZWxlbWVudCBkb2Vzbid0IGhhdmUgYW4gZXhwbGljaXQga2V5IGFzc2lnbmVkIHRvIGl0LlxuICogVGhpcyBlbGVtZW50IGlzIGluIGFuIGFycmF5LiBUaGUgYXJyYXkgY291bGQgZ3JvdyBhbmQgc2hyaW5rIG9yIGJlXG4gKiByZW9yZGVyZWQuIEFsbCBjaGlsZHJlbiB0aGF0IGhhdmVuJ3QgYWxyZWFkeSBiZWVuIHZhbGlkYXRlZCBhcmUgcmVxdWlyZWQgdG9cbiAqIGhhdmUgYSBcImtleVwiIHByb3BlcnR5IGFzc2lnbmVkIHRvIGl0LlxuICpcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudCB0aGF0IHJlcXVpcmVzIGEga2V5LlxuICogQHBhcmFtIHsqfSBwYXJlbnRUeXBlIGVsZW1lbnQncyBwYXJlbnQncyB0eXBlLlxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUV4cGxpY2l0S2V5KGVsZW1lbnQsIHBhcmVudFR5cGUpIHtcbiAgaWYgKCFlbGVtZW50Ll9zdG9yZSB8fCBlbGVtZW50Ll9zdG9yZS52YWxpZGF0ZWQgfHwgZWxlbWVudC5rZXkgIT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBlbGVtZW50Ll9zdG9yZS52YWxpZGF0ZWQgPSB0cnVlO1xuXG4gIHZhciBhZGRlbmRhID0gZ2V0QWRkZW5kYUZvcktleVVzZSgndW5pcXVlS2V5JywgZWxlbWVudCwgcGFyZW50VHlwZSk7XG4gIGlmIChhZGRlbmRhID09PSBudWxsKSB7XG4gICAgLy8gd2UgYWxyZWFkeSBzaG93ZWQgdGhlIHdhcm5pbmdcbiAgICByZXR1cm47XG4gIH1cbiAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdFYWNoIGNoaWxkIGluIGFuIGFycmF5IG9yIGl0ZXJhdG9yIHNob3VsZCBoYXZlIGEgdW5pcXVlIFwia2V5XCIgcHJvcC4nICsgJyVzJXMlcycsIGFkZGVuZGEucGFyZW50T3JPd25lciB8fCAnJywgYWRkZW5kYS5jaGlsZE93bmVyIHx8ICcnLCBhZGRlbmRhLnVybCB8fCAnJykgOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogU2hhcmVkIHdhcm5pbmcgYW5kIG1vbml0b3JpbmcgY29kZSBmb3IgdGhlIGtleSB3YXJuaW5ncy5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlVHlwZSBBIGtleSB1c2VkIGZvciBkZS1kdXBpbmcgd2FybmluZ3MuXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudCBDb21wb25lbnQgdGhhdCByZXF1aXJlcyBhIGtleS5cbiAqIEBwYXJhbSB7Kn0gcGFyZW50VHlwZSBlbGVtZW50J3MgcGFyZW50J3MgdHlwZS5cbiAqIEByZXR1cm5zIHs/b2JqZWN0fSBBIHNldCBvZiBhZGRlbmRhIHRvIHVzZSBpbiB0aGUgd2FybmluZyBtZXNzYWdlLCBvciBudWxsXG4gKiBpZiB0aGUgd2FybmluZyBoYXMgYWxyZWFkeSBiZWVuIHNob3duIGJlZm9yZSAoYW5kIHNob3VsZG4ndCBiZSBzaG93biBhZ2FpbikuXG4gKi9cbmZ1bmN0aW9uIGdldEFkZGVuZGFGb3JLZXlVc2UobWVzc2FnZVR5cGUsIGVsZW1lbnQsIHBhcmVudFR5cGUpIHtcbiAgdmFyIGFkZGVuZHVtID0gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKCk7XG4gIGlmICghYWRkZW5kdW0pIHtcbiAgICB2YXIgcGFyZW50TmFtZSA9IHR5cGVvZiBwYXJlbnRUeXBlID09PSAnc3RyaW5nJyA/IHBhcmVudFR5cGUgOiBwYXJlbnRUeXBlLmRpc3BsYXlOYW1lIHx8IHBhcmVudFR5cGUubmFtZTtcbiAgICBpZiAocGFyZW50TmFtZSkge1xuICAgICAgYWRkZW5kdW0gPSAnIENoZWNrIHRoZSB0b3AtbGV2ZWwgcmVuZGVyIGNhbGwgdXNpbmcgPCcgKyBwYXJlbnROYW1lICsgJz4uJztcbiAgICB9XG4gIH1cblxuICB2YXIgbWVtb2l6ZXIgPSBvd25lckhhc0tleVVzZVdhcm5pbmdbbWVzc2FnZVR5cGVdIHx8IChvd25lckhhc0tleVVzZVdhcm5pbmdbbWVzc2FnZVR5cGVdID0ge30pO1xuICBpZiAobWVtb2l6ZXJbYWRkZW5kdW1dKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgbWVtb2l6ZXJbYWRkZW5kdW1dID0gdHJ1ZTtcblxuICB2YXIgYWRkZW5kYSA9IHtcbiAgICBwYXJlbnRPck93bmVyOiBhZGRlbmR1bSxcbiAgICB1cmw6ICcgU2VlIGh0dHBzOi8vZmIubWUvcmVhY3Qtd2FybmluZy1rZXlzIGZvciBtb3JlIGluZm9ybWF0aW9uLicsXG4gICAgY2hpbGRPd25lcjogbnVsbFxuICB9O1xuXG4gIC8vIFVzdWFsbHkgdGhlIGN1cnJlbnQgb3duZXIgaXMgdGhlIG9mZmVuZGVyLCBidXQgaWYgaXQgYWNjZXB0cyBjaGlsZHJlbiBhcyBhXG4gIC8vIHByb3BlcnR5LCBpdCBtYXkgYmUgdGhlIGNyZWF0b3Igb2YgdGhlIGNoaWxkIHRoYXQncyByZXNwb25zaWJsZSBmb3JcbiAgLy8gYXNzaWduaW5nIGl0IGEga2V5LlxuICBpZiAoZWxlbWVudCAmJiBlbGVtZW50Ll9vd25lciAmJiBlbGVtZW50Ll9vd25lciAhPT0gUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCkge1xuICAgIC8vIEdpdmUgdGhlIGNvbXBvbmVudCB0aGF0IG9yaWdpbmFsbHkgY3JlYXRlZCB0aGlzIGNoaWxkLlxuICAgIGFkZGVuZGEuY2hpbGRPd25lciA9ICcgSXQgd2FzIHBhc3NlZCBhIGNoaWxkIGZyb20gJyArIGVsZW1lbnQuX293bmVyLmdldE5hbWUoKSArICcuJztcbiAgfVxuXG4gIHJldHVybiBhZGRlbmRhO1xufVxuXG4vKipcbiAqIEVuc3VyZSB0aGF0IGV2ZXJ5IGVsZW1lbnQgZWl0aGVyIGlzIHBhc3NlZCBpbiBhIHN0YXRpYyBsb2NhdGlvbiwgaW4gYW5cbiAqIGFycmF5IHdpdGggYW4gZXhwbGljaXQga2V5cyBwcm9wZXJ0eSBkZWZpbmVkLCBvciBpbiBhbiBvYmplY3QgbGl0ZXJhbFxuICogd2l0aCB2YWxpZCBrZXkgcHJvcGVydHkuXG4gKlxuICogQGludGVybmFsXG4gKiBAcGFyYW0ge1JlYWN0Tm9kZX0gbm9kZSBTdGF0aWNhbGx5IHBhc3NlZCBjaGlsZCBvZiBhbnkgdHlwZS5cbiAqIEBwYXJhbSB7Kn0gcGFyZW50VHlwZSBub2RlJ3MgcGFyZW50J3MgdHlwZS5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVDaGlsZEtleXMobm9kZSwgcGFyZW50VHlwZSkge1xuICBpZiAodHlwZW9mIG5vZGUgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KG5vZGUpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY2hpbGQgPSBub2RlW2ldO1xuICAgICAgaWYgKFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZCkpIHtcbiAgICAgICAgdmFsaWRhdGVFeHBsaWNpdEtleShjaGlsZCwgcGFyZW50VHlwZSk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChub2RlKSkge1xuICAgIC8vIFRoaXMgZWxlbWVudCB3YXMgcGFzc2VkIGluIGEgdmFsaWQgbG9jYXRpb24uXG4gICAgaWYgKG5vZGUuX3N0b3JlKSB7XG4gICAgICBub2RlLl9zdG9yZS52YWxpZGF0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIGlmIChub2RlKSB7XG4gICAgdmFyIGl0ZXJhdG9yRm4gPSBnZXRJdGVyYXRvckZuKG5vZGUpO1xuICAgIC8vIEVudHJ5IGl0ZXJhdG9ycyBwcm92aWRlIGltcGxpY2l0IGtleXMuXG4gICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAgICAgIGlmIChpdGVyYXRvckZuICE9PSBub2RlLmVudHJpZXMpIHtcbiAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKG5vZGUpO1xuICAgICAgICB2YXIgc3RlcDtcbiAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgIGlmIChSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoc3RlcC52YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlRXhwbGljaXRLZXkoc3RlcC52YWx1ZSwgcGFyZW50VHlwZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQXNzZXJ0IHRoYXQgdGhlIHByb3BzIGFyZSB2YWxpZFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnROYW1lIE5hbWUgb2YgdGhlIGNvbXBvbmVudCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcFR5cGVzIE1hcCBvZiBwcm9wIG5hbWUgdG8gYSBSZWFjdFByb3BUeXBlXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbiBlLmcuIFwicHJvcFwiLCBcImNvbnRleHRcIiwgXCJjaGlsZCBjb250ZXh0XCJcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNoZWNrUHJvcFR5cGVzKGNvbXBvbmVudE5hbWUsIHByb3BUeXBlcywgcHJvcHMsIGxvY2F0aW9uKSB7XG4gIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BUeXBlcykge1xuICAgIGlmIChwcm9wVHlwZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICB2YXIgZXJyb3I7XG4gICAgICAvLyBQcm9wIHR5cGUgdmFsaWRhdGlvbiBtYXkgdGhyb3cuIEluIGNhc2UgdGhleSBkbywgd2UgZG9uJ3Qgd2FudCB0b1xuICAgICAgLy8gZmFpbCB0aGUgcmVuZGVyIHBoYXNlIHdoZXJlIGl0IGRpZG4ndCBmYWlsIGJlZm9yZS4gU28gd2UgbG9nIGl0LlxuICAgICAgLy8gQWZ0ZXIgdGhlc2UgaGF2ZSBiZWVuIGNsZWFuZWQgdXAsIHdlJ2xsIGxldCB0aGVtIHRocm93LlxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyBpcyBpbnRlbnRpb25hbGx5IGFuIGludmFyaWFudCB0aGF0IGdldHMgY2F1Z2h0LiBJdCdzIHRoZSBzYW1lXG4gICAgICAgIC8vIGJlaGF2aW9yIGFzIHdpdGhvdXQgdGhpcyBzdGF0ZW1lbnQgZXhjZXB0IHdpdGggYSBiZXR0ZXIgbWVzc2FnZS5cbiAgICAgICAgISh0eXBlb2YgcHJvcFR5cGVzW3Byb3BOYW1lXSA9PT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXM6ICVzIHR5cGUgYCVzYCBpcyBpbnZhbGlkOyBpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgZnJvbSAnICsgJ1JlYWN0LlByb3BUeXBlcy4nLCBjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgZXJyb3IgPSBwcm9wVHlwZXNbcHJvcE5hbWVdKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24pO1xuICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgZXJyb3IgPSBleDtcbiAgICAgIH1cbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFlcnJvciB8fCBlcnJvciBpbnN0YW5jZW9mIEVycm9yLCAnJXM6IHR5cGUgc3BlY2lmaWNhdGlvbiBvZiAlcyBgJXNgIGlzIGludmFsaWQ7IHRoZSB0eXBlIGNoZWNrZXIgJyArICdmdW5jdGlvbiBtdXN0IHJldHVybiBgbnVsbGAgb3IgYW4gYEVycm9yYCBidXQgcmV0dXJuZWQgYSAlcy4gJyArICdZb3UgbWF5IGhhdmUgZm9yZ290dGVuIHRvIHBhc3MgYW4gYXJndW1lbnQgdG8gdGhlIHR5cGUgY2hlY2tlciAnICsgJ2NyZWF0b3IgKGFycmF5T2YsIGluc3RhbmNlT2YsIG9iamVjdE9mLCBvbmVPZiwgb25lT2ZUeXBlLCBhbmQgJyArICdzaGFwZSBhbGwgcmVxdWlyZSBhbiBhcmd1bWVudCkuJywgY29tcG9uZW50TmFtZSB8fCAnUmVhY3QgY2xhc3MnLCBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl0sIHByb3BOYW1lLCB0eXBlb2YgZXJyb3IpIDogdW5kZWZpbmVkO1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgIShlcnJvci5tZXNzYWdlIGluIGxvZ2dlZFR5cGVGYWlsdXJlcykpIHtcbiAgICAgICAgLy8gT25seSBtb25pdG9yIHRoaXMgZmFpbHVyZSBvbmNlIGJlY2F1c2UgdGhlcmUgdGVuZHMgdG8gYmUgYSBsb3Qgb2YgdGhlXG4gICAgICAgIC8vIHNhbWUgZXJyb3IuXG4gICAgICAgIGxvZ2dlZFR5cGVGYWlsdXJlc1tlcnJvci5tZXNzYWdlXSA9IHRydWU7XG5cbiAgICAgICAgdmFyIGFkZGVuZHVtID0gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKCk7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFpbGVkIHByb3BUeXBlOiAlcyVzJywgZXJyb3IubWVzc2FnZSwgYWRkZW5kdW0pIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEdpdmVuIGFuIGVsZW1lbnQsIHZhbGlkYXRlIHRoYXQgaXRzIHByb3BzIGZvbGxvdyB0aGUgcHJvcFR5cGVzIGRlZmluaXRpb24sXG4gKiBwcm92aWRlZCBieSB0aGUgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudFxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BUeXBlcyhlbGVtZW50KSB7XG4gIHZhciBjb21wb25lbnRDbGFzcyA9IGVsZW1lbnQudHlwZTtcbiAgaWYgKHR5cGVvZiBjb21wb25lbnRDbGFzcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbmFtZSA9IGNvbXBvbmVudENsYXNzLmRpc3BsYXlOYW1lIHx8IGNvbXBvbmVudENsYXNzLm5hbWU7XG4gIGlmIChjb21wb25lbnRDbGFzcy5wcm9wVHlwZXMpIHtcbiAgICBjaGVja1Byb3BUeXBlcyhuYW1lLCBjb21wb25lbnRDbGFzcy5wcm9wVHlwZXMsIGVsZW1lbnQucHJvcHMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBjb21wb25lbnRDbGFzcy5nZXREZWZhdWx0UHJvcHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhjb21wb25lbnRDbGFzcy5nZXREZWZhdWx0UHJvcHMuaXNSZWFjdENsYXNzQXBwcm92ZWQsICdnZXREZWZhdWx0UHJvcHMgaXMgb25seSB1c2VkIG9uIGNsYXNzaWMgUmVhY3QuY3JlYXRlQ2xhc3MgJyArICdkZWZpbml0aW9ucy4gVXNlIGEgc3RhdGljIHByb3BlcnR5IG5hbWVkIGBkZWZhdWx0UHJvcHNgIGluc3RlYWQuJykgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxudmFyIFJlYWN0RWxlbWVudFZhbGlkYXRvciA9IHtcblxuICBjcmVhdGVFbGVtZW50OiBmdW5jdGlvbiAodHlwZSwgcHJvcHMsIGNoaWxkcmVuKSB7XG4gICAgdmFyIHZhbGlkVHlwZSA9IHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAvLyBXZSB3YXJuIGluIHRoaXMgY2FzZSBidXQgZG9uJ3QgdGhyb3cuIFdlIGV4cGVjdCB0aGUgZWxlbWVudCBjcmVhdGlvbiB0b1xuICAgIC8vIHN1Y2NlZWQgYW5kIHRoZXJlIHdpbGwgbGlrZWx5IGJlIGVycm9ycyBpbiByZW5kZXIuXG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodmFsaWRUeXBlLCAnUmVhY3QuY3JlYXRlRWxlbWVudDogdHlwZSBzaG91bGQgbm90IGJlIG51bGwsIHVuZGVmaW5lZCwgYm9vbGVhbiwgb3IgJyArICdudW1iZXIuIEl0IHNob3VsZCBiZSBhIHN0cmluZyAoZm9yIERPTSBlbGVtZW50cykgb3IgYSBSZWFjdENsYXNzICcgKyAnKGZvciBjb21wb3NpdGUgY29tcG9uZW50cykuJXMnLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKSkgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgZWxlbWVudCA9IFJlYWN0RWxlbWVudC5jcmVhdGVFbGVtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICAvLyBUaGUgcmVzdWx0IGNhbiBiZSBudWxsaXNoIGlmIGEgbW9jayBvciBhIGN1c3RvbSBmdW5jdGlvbiBpcyB1c2VkLlxuICAgIC8vIFRPRE86IERyb3AgdGhpcyB3aGVuIHRoZXNlIGFyZSBubyBsb25nZXIgYWxsb3dlZCBhcyB0aGUgdHlwZSBhcmd1bWVudC5cbiAgICBpZiAoZWxlbWVudCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICAvLyBTa2lwIGtleSB3YXJuaW5nIGlmIHRoZSB0eXBlIGlzbid0IHZhbGlkIHNpbmNlIG91ciBrZXkgdmFsaWRhdGlvbiBsb2dpY1xuICAgIC8vIGRvZXNuJ3QgZXhwZWN0IGEgbm9uLXN0cmluZy9mdW5jdGlvbiB0eXBlIGFuZCBjYW4gdGhyb3cgY29uZnVzaW5nIGVycm9ycy5cbiAgICAvLyBXZSBkb24ndCB3YW50IGV4Y2VwdGlvbiBiZWhhdmlvciB0byBkaWZmZXIgYmV0d2VlbiBkZXYgYW5kIHByb2QuXG4gICAgLy8gKFJlbmRlcmluZyB3aWxsIHRocm93IHdpdGggYSBoZWxwZnVsIG1lc3NhZ2UgYW5kIGFzIHNvb24gYXMgdGhlIHR5cGUgaXNcbiAgICAvLyBmaXhlZCwgdGhlIGtleSB3YXJuaW5ncyB3aWxsIGFwcGVhci4pXG4gICAgaWYgKHZhbGlkVHlwZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsaWRhdGVDaGlsZEtleXMoYXJndW1lbnRzW2ldLCB0eXBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YWxpZGF0ZVByb3BUeXBlcyhlbGVtZW50KTtcblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9LFxuXG4gIGNyZWF0ZUZhY3Rvcnk6IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgdmFyIHZhbGlkYXRlZEZhY3RvcnkgPSBSZWFjdEVsZW1lbnRWYWxpZGF0b3IuY3JlYXRlRWxlbWVudC5iaW5kKG51bGwsIHR5cGUpO1xuICAgIC8vIExlZ2FjeSBob29rIFRPRE86IFdhcm4gaWYgdGhpcyBpcyBhY2Nlc3NlZFxuICAgIHZhbGlkYXRlZEZhY3RvcnkudHlwZSA9IHR5cGU7XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKGNhbkRlZmluZVByb3BlcnR5KSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2YWxpZGF0ZWRGYWN0b3J5LCAndHlwZScsIHtcbiAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFjdG9yeS50eXBlIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB0aGUgY2xhc3MgZGlyZWN0bHkgJyArICdiZWZvcmUgcGFzc2luZyBpdCB0byBjcmVhdGVGYWN0b3J5LicpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICd0eXBlJywge1xuICAgICAgICAgICAgICB2YWx1ZTogdHlwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdHlwZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB2YWxpZGF0ZWRGYWN0b3J5O1xuICB9LFxuXG4gIGNsb25lRWxlbWVudDogZnVuY3Rpb24gKGVsZW1lbnQsIHByb3BzLCBjaGlsZHJlbikge1xuICAgIHZhciBuZXdFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNsb25lRWxlbWVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGZvciAodmFyIGkgPSAyOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YWxpZGF0ZUNoaWxkS2V5cyhhcmd1bWVudHNbaV0sIG5ld0VsZW1lbnQudHlwZSk7XG4gICAgfVxuICAgIHZhbGlkYXRlUHJvcFR5cGVzKG5ld0VsZW1lbnQpO1xuICAgIHJldHVybiBuZXdFbGVtZW50O1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVtcHR5Q29tcG9uZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkgPSByZXF1aXJlKCcuL1JlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeScpO1xudmFyIFJlYWN0UmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVyJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcblxudmFyIHBsYWNlaG9sZGVyRWxlbWVudDtcblxudmFyIFJlYWN0RW1wdHlDb21wb25lbnRJbmplY3Rpb24gPSB7XG4gIGluamVjdEVtcHR5Q29tcG9uZW50OiBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgcGxhY2Vob2xkZXJFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50KTtcbiAgfVxufTtcblxuZnVuY3Rpb24gcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQoKSB7XG4gIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5yZWdpc3Rlck51bGxDb21wb25lbnRJRCh0aGlzLl9yb290Tm9kZUlEKTtcbn1cblxudmFyIFJlYWN0RW1wdHlDb21wb25lbnQgPSBmdW5jdGlvbiAoaW5zdGFudGlhdGUpIHtcbiAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBudWxsO1xuICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSBpbnN0YW50aWF0ZShwbGFjZWhvbGRlckVsZW1lbnQpO1xufTtcbmFzc2lnbihSZWFjdEVtcHR5Q29tcG9uZW50LnByb3RvdHlwZSwge1xuICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7fSxcbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShyZWdpc3Rlck51bGxDb21wb25lbnRJRCwgdGhpcyk7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IHJvb3RJRDtcbiAgICByZXR1cm4gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50LCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgfSxcbiAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKCkge30sXG4gIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQpO1xuICAgIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5kZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gbnVsbDtcbiAgfVxufSk7XG5cblJlYWN0RW1wdHlDb21wb25lbnQuaW5qZWN0aW9uID0gUmVhY3RFbXB0eUNvbXBvbmVudEluamVjdGlvbjtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVtcHR5Q29tcG9uZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8vIFRoaXMgcmVnaXN0cnkga2VlcHMgdHJhY2sgb2YgdGhlIFJlYWN0IElEcyBvZiB0aGUgY29tcG9uZW50cyB0aGF0IHJlbmRlcmVkIHRvXG4vLyBgbnVsbGAgKGluIHJlYWxpdHkgYSBwbGFjZWhvbGRlciBzdWNoIGFzIGBub3NjcmlwdGApXG52YXIgbnVsbENvbXBvbmVudElEc1JlZ2lzdHJ5ID0ge307XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIENvbXBvbmVudCdzIGBfcm9vdE5vZGVJRGAuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBjb21wb25lbnQgaXMgcmVuZGVyZWQgdG8gbnVsbC5cbiAqL1xuZnVuY3Rpb24gaXNOdWxsQ29tcG9uZW50SUQoaWQpIHtcbiAgcmV0dXJuICEhbnVsbENvbXBvbmVudElEc1JlZ2lzdHJ5W2lkXTtcbn1cblxuLyoqXG4gKiBNYXJrIHRoZSBjb21wb25lbnQgYXMgaGF2aW5nIHJlbmRlcmVkIHRvIG51bGwuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQ29tcG9uZW50J3MgYF9yb290Tm9kZUlEYC5cbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQoaWQpIHtcbiAgbnVsbENvbXBvbmVudElEc1JlZ2lzdHJ5W2lkXSA9IHRydWU7XG59XG5cbi8qKlxuICogVW5tYXJrIHRoZSBjb21wb25lbnQgYXMgaGF2aW5nIHJlbmRlcmVkIHRvIG51bGw6IGl0IHJlbmRlcnMgdG8gc29tZXRoaW5nIG5vdy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBDb21wb25lbnQncyBgX3Jvb3ROb2RlSURgLlxuICovXG5mdW5jdGlvbiBkZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEKGlkKSB7XG4gIGRlbGV0ZSBudWxsQ29tcG9uZW50SURzUmVnaXN0cnlbaWRdO1xufVxuXG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5ID0ge1xuICBpc051bGxDb21wb25lbnRJRDogaXNOdWxsQ29tcG9uZW50SUQsXG4gIHJlZ2lzdGVyTnVsbENvbXBvbmVudElEOiByZWdpc3Rlck51bGxDb21wb25lbnRJRCxcbiAgZGVyZWdpc3Rlck51bGxDb21wb25lbnRJRDogZGVyZWdpc3Rlck51bGxDb21wb25lbnRJRFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnk7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RXJyb3JVdGlsc1xuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBjYXVnaHRFcnJvciA9IG51bGw7XG5cbi8qKlxuICogQ2FsbCBhIGZ1bmN0aW9uIHdoaWxlIGd1YXJkaW5nIGFnYWluc3QgZXJyb3JzIHRoYXQgaGFwcGVucyB3aXRoaW4gaXQuXG4gKlxuICogQHBhcmFtIHs/U3RyaW5nfSBuYW1lIG9mIHRoZSBndWFyZCB0byB1c2UgZm9yIGxvZ2dpbmcgb3IgZGVidWdnaW5nXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBpbnZva2VcbiAqIEBwYXJhbSB7Kn0gYSBGaXJzdCBhcmd1bWVudFxuICogQHBhcmFtIHsqfSBiIFNlY29uZCBhcmd1bWVudFxuICovXG5mdW5jdGlvbiBpbnZva2VHdWFyZGVkQ2FsbGJhY2sobmFtZSwgZnVuYywgYSwgYikge1xuICB0cnkge1xuICAgIHJldHVybiBmdW5jKGEsIGIpO1xuICB9IGNhdGNoICh4KSB7XG4gICAgaWYgKGNhdWdodEVycm9yID09PSBudWxsKSB7XG4gICAgICBjYXVnaHRFcnJvciA9IHg7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxudmFyIFJlYWN0RXJyb3JVdGlscyA9IHtcbiAgaW52b2tlR3VhcmRlZENhbGxiYWNrOiBpbnZva2VHdWFyZGVkQ2FsbGJhY2ssXG5cbiAgLyoqXG4gICAqIEludm9rZWQgYnkgUmVhY3RUZXN0VXRpbHMuU2ltdWxhdGUgc28gdGhhdCBhbnkgZXJyb3JzIHRocm93biBieSB0aGUgZXZlbnRcbiAgICogaGFuZGxlciBhcmUgc3VyZSB0byBiZSByZXRocm93biBieSByZXRocm93Q2F1Z2h0RXJyb3IuXG4gICAqL1xuICBpbnZva2VHdWFyZGVkQ2FsbGJhY2tXaXRoQ2F0Y2g6IGludm9rZUd1YXJkZWRDYWxsYmFjayxcblxuICAvKipcbiAgICogRHVyaW5nIGV4ZWN1dGlvbiBvZiBndWFyZGVkIGZ1bmN0aW9ucyB3ZSB3aWxsIGNhcHR1cmUgdGhlIGZpcnN0IGVycm9yIHdoaWNoXG4gICAqIHdlIHdpbGwgcmV0aHJvdyB0byBiZSBoYW5kbGVkIGJ5IHRoZSB0b3AgbGV2ZWwgZXJyb3IgaGFuZGxlci5cbiAgICovXG4gIHJldGhyb3dDYXVnaHRFcnJvcjogZnVuY3Rpb24gKCkge1xuICAgIGlmIChjYXVnaHRFcnJvcikge1xuICAgICAgdmFyIGVycm9yID0gY2F1Z2h0RXJyb3I7XG4gICAgICBjYXVnaHRFcnJvciA9IG51bGw7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn07XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8qKlxuICAgKiBUbyBoZWxwIGRldmVsb3BtZW50IHdlIGNhbiBnZXQgYmV0dGVyIGRldnRvb2xzIGludGVncmF0aW9uIGJ5IHNpbXVsYXRpbmcgYVxuICAgKiByZWFsIGJyb3dzZXIgZXZlbnQuXG4gICAqL1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5kaXNwYXRjaEV2ZW50ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIGZha2VOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncmVhY3QnKTtcbiAgICBSZWFjdEVycm9yVXRpbHMuaW52b2tlR3VhcmRlZENhbGxiYWNrID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMsIGEsIGIpIHtcbiAgICAgIHZhciBib3VuZEZ1bmMgPSBmdW5jLmJpbmQobnVsbCwgYSwgYik7XG4gICAgICB2YXIgZXZ0VHlwZSA9ICdyZWFjdC0nICsgbmFtZTtcbiAgICAgIGZha2VOb2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZ0VHlwZSwgYm91bmRGdW5jLCBmYWxzZSk7XG4gICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICBldnQuaW5pdEV2ZW50KGV2dFR5cGUsIGZhbHNlLCBmYWxzZSk7XG4gICAgICBmYWtlTm9kZS5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgICBmYWtlTm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2dFR5cGUsIGJvdW5kRnVuYywgZmFsc2UpO1xuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVycm9yVXRpbHM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RXZlbnRFbWl0dGVyTWl4aW5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudFBsdWdpbkh1YiA9IHJlcXVpcmUoJy4vRXZlbnRQbHVnaW5IdWInKTtcblxuZnVuY3Rpb24gcnVuRXZlbnRRdWV1ZUluQmF0Y2goZXZlbnRzKSB7XG4gIEV2ZW50UGx1Z2luSHViLmVucXVldWVFdmVudHMoZXZlbnRzKTtcbiAgRXZlbnRQbHVnaW5IdWIucHJvY2Vzc0V2ZW50UXVldWUoZmFsc2UpO1xufVxuXG52YXIgUmVhY3RFdmVudEVtaXR0ZXJNaXhpbiA9IHtcblxuICAvKipcbiAgICogU3RyZWFtcyBhIGZpcmVkIHRvcC1sZXZlbCBldmVudCB0byBgRXZlbnRQbHVnaW5IdWJgIHdoZXJlIHBsdWdpbnMgaGF2ZSB0aGVcbiAgICogb3Bwb3J0dW5pdHkgdG8gY3JlYXRlIGBSZWFjdEV2ZW50YHMgdG8gYmUgZGlzcGF0Y2hlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGVudmlyb25tZW50IGV2ZW50LlxuICAgKi9cbiAgaGFuZGxlVG9wTGV2ZWw6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICB2YXIgZXZlbnRzID0gRXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50cyh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuICAgIHJ1bkV2ZW50UXVldWVJbkJhdGNoKGV2ZW50cyk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RFdmVudEVtaXR0ZXJNaXhpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFdmVudExpc3RlbmVyXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50TGlzdGVuZXIgPSByZXF1aXJlKCdmYmpzL2xpYi9FdmVudExpc3RlbmVyJyk7XG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlSGFuZGxlcycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZ2V0RXZlbnRUYXJnZXQgPSByZXF1aXJlKCcuL2dldEV2ZW50VGFyZ2V0Jyk7XG52YXIgZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9nZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvbicpO1xuXG52YXIgRE9DVU1FTlRfRlJBR01FTlRfTk9ERV9UWVBFID0gMTE7XG5cbi8qKlxuICogRmluZHMgdGhlIHBhcmVudCBSZWFjdCBjb21wb25lbnQgb2YgYG5vZGVgLlxuICpcbiAqIEBwYXJhbSB7Kn0gbm9kZVxuICogQHJldHVybiB7P0RPTUV2ZW50VGFyZ2V0fSBQYXJlbnQgY29udGFpbmVyLCBvciBgbnVsbGAgaWYgdGhlIHNwZWNpZmllZCBub2RlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIG5vdCBuZXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIGZpbmRQYXJlbnQobm9kZSkge1xuICAvLyBUT0RPOiBJdCBtYXkgYmUgYSBnb29kIGlkZWEgdG8gY2FjaGUgdGhpcyB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IERPTVxuICAvLyB0cmF2ZXJzYWwsIGJ1dCBjYWNoaW5nIGlzIGRpZmZpY3VsdCB0byBkbyBjb3JyZWN0bHkgd2l0aG91dCB1c2luZyBhXG4gIC8vIG11dGF0aW9uIG9ic2VydmVyIHRvIGxpc3RlbiBmb3IgYWxsIERPTSBjaGFuZ2VzLlxuICB2YXIgbm9kZUlEID0gUmVhY3RNb3VudC5nZXRJRChub2RlKTtcbiAgdmFyIHJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChub2RlSUQpO1xuICB2YXIgY29udGFpbmVyID0gUmVhY3RNb3VudC5maW5kUmVhY3RDb250YWluZXJGb3JJRChyb290SUQpO1xuICB2YXIgcGFyZW50ID0gUmVhY3RNb3VudC5nZXRGaXJzdFJlYWN0RE9NKGNvbnRhaW5lcik7XG4gIHJldHVybiBwYXJlbnQ7XG59XG5cbi8vIFVzZWQgdG8gc3RvcmUgYW5jZXN0b3IgaGllcmFyY2h5IGluIHRvcCBsZXZlbCBjYWxsYmFja1xuZnVuY3Rpb24gVG9wTGV2ZWxDYWxsYmFja0Jvb2tLZWVwaW5nKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgdGhpcy50b3BMZXZlbFR5cGUgPSB0b3BMZXZlbFR5cGU7XG4gIHRoaXMubmF0aXZlRXZlbnQgPSBuYXRpdmVFdmVudDtcbiAgdGhpcy5hbmNlc3RvcnMgPSBbXTtcbn1cbmFzc2lnbihUb3BMZXZlbENhbGxiYWNrQm9va0tlZXBpbmcucHJvdG90eXBlLCB7XG4gIGRlc3RydWN0b3I6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnRvcExldmVsVHlwZSA9IG51bGw7XG4gICAgdGhpcy5uYXRpdmVFdmVudCA9IG51bGw7XG4gICAgdGhpcy5hbmNlc3RvcnMubGVuZ3RoID0gMDtcbiAgfVxufSk7XG5Qb29sZWRDbGFzcy5hZGRQb29saW5nVG8oVG9wTGV2ZWxDYWxsYmFja0Jvb2tLZWVwaW5nLCBQb29sZWRDbGFzcy50d29Bcmd1bWVudFBvb2xlcik7XG5cbmZ1bmN0aW9uIGhhbmRsZVRvcExldmVsSW1wbChib29rS2VlcGluZykge1xuICAvLyBUT0RPOiBSZS1lbmFibGUgZXZlbnQucGF0aCBoYW5kbGluZ1xuICAvL1xuICAvLyBpZiAoYm9va0tlZXBpbmcubmF0aXZlRXZlbnQucGF0aCAmJiBib29rS2VlcGluZy5uYXRpdmVFdmVudC5wYXRoLmxlbmd0aCA+IDEpIHtcbiAgLy8gICAvLyBOZXcgYnJvd3NlcnMgaGF2ZSBhIHBhdGggYXR0cmlidXRlIG9uIG5hdGl2ZSBldmVudHNcbiAgLy8gICBoYW5kbGVUb3BMZXZlbFdpdGhQYXRoKGJvb2tLZWVwaW5nKTtcbiAgLy8gfSBlbHNlIHtcbiAgLy8gICAvLyBMZWdhY3kgYnJvd3NlcnMgZG9uJ3QgaGF2ZSBhIHBhdGggYXR0cmlidXRlIG9uIG5hdGl2ZSBldmVudHNcbiAgLy8gICBoYW5kbGVUb3BMZXZlbFdpdGhvdXRQYXRoKGJvb2tLZWVwaW5nKTtcbiAgLy8gfVxuXG4gIHZvaWQgaGFuZGxlVG9wTGV2ZWxXaXRoUGF0aDsgLy8gdGVtcG9yYXJpbHkgdW51c2VkXG4gIGhhbmRsZVRvcExldmVsV2l0aG91dFBhdGgoYm9va0tlZXBpbmcpO1xufVxuXG4vLyBMZWdhY3kgYnJvd3NlcnMgZG9uJ3QgaGF2ZSBhIHBhdGggYXR0cmlidXRlIG9uIG5hdGl2ZSBldmVudHNcbmZ1bmN0aW9uIGhhbmRsZVRvcExldmVsV2l0aG91dFBhdGgoYm9va0tlZXBpbmcpIHtcbiAgdmFyIHRvcExldmVsVGFyZ2V0ID0gUmVhY3RNb3VudC5nZXRGaXJzdFJlYWN0RE9NKGdldEV2ZW50VGFyZ2V0KGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50KSkgfHwgd2luZG93O1xuXG4gIC8vIExvb3AgdGhyb3VnaCB0aGUgaGllcmFyY2h5LCBpbiBjYXNlIHRoZXJlJ3MgYW55IG5lc3RlZCBjb21wb25lbnRzLlxuICAvLyBJdCdzIGltcG9ydGFudCB0aGF0IHdlIGJ1aWxkIHRoZSBhcnJheSBvZiBhbmNlc3RvcnMgYmVmb3JlIGNhbGxpbmcgYW55XG4gIC8vIGV2ZW50IGhhbmRsZXJzLCBiZWNhdXNlIGV2ZW50IGhhbmRsZXJzIGNhbiBtb2RpZnkgdGhlIERPTSwgbGVhZGluZyB0b1xuICAvLyBpbmNvbnNpc3RlbmNpZXMgd2l0aCBSZWFjdE1vdW50J3Mgbm9kZSBjYWNoZS4gU2VlICMxMTA1LlxuICB2YXIgYW5jZXN0b3IgPSB0b3BMZXZlbFRhcmdldDtcbiAgd2hpbGUgKGFuY2VzdG9yKSB7XG4gICAgYm9va0tlZXBpbmcuYW5jZXN0b3JzLnB1c2goYW5jZXN0b3IpO1xuICAgIGFuY2VzdG9yID0gZmluZFBhcmVudChhbmNlc3Rvcik7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGJvb2tLZWVwaW5nLmFuY2VzdG9ycy5sZW5ndGg7IGkrKykge1xuICAgIHRvcExldmVsVGFyZ2V0ID0gYm9va0tlZXBpbmcuYW5jZXN0b3JzW2ldO1xuICAgIHZhciB0b3BMZXZlbFRhcmdldElEID0gUmVhY3RNb3VudC5nZXRJRCh0b3BMZXZlbFRhcmdldCkgfHwgJyc7XG4gICAgUmVhY3RFdmVudExpc3RlbmVyLl9oYW5kbGVUb3BMZXZlbChib29rS2VlcGluZy50b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBib29rS2VlcGluZy5uYXRpdmVFdmVudCwgZ2V0RXZlbnRUYXJnZXQoYm9va0tlZXBpbmcubmF0aXZlRXZlbnQpKTtcbiAgfVxufVxuXG4vLyBOZXcgYnJvd3NlcnMgaGF2ZSBhIHBhdGggYXR0cmlidXRlIG9uIG5hdGl2ZSBldmVudHNcbmZ1bmN0aW9uIGhhbmRsZVRvcExldmVsV2l0aFBhdGgoYm9va0tlZXBpbmcpIHtcbiAgdmFyIHBhdGggPSBib29rS2VlcGluZy5uYXRpdmVFdmVudC5wYXRoO1xuICB2YXIgY3VycmVudE5hdGl2ZVRhcmdldCA9IHBhdGhbMF07XG4gIHZhciBldmVudHNGaXJlZCA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBjdXJyZW50UGF0aEVsZW1lbnQgPSBwYXRoW2ldO1xuICAgIGlmIChjdXJyZW50UGF0aEVsZW1lbnQubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREVfVFlQRSkge1xuICAgICAgY3VycmVudE5hdGl2ZVRhcmdldCA9IHBhdGhbaSArIDFdO1xuICAgIH1cbiAgICAvLyBUT0RPOiBzbG93XG4gICAgdmFyIHJlYWN0UGFyZW50ID0gUmVhY3RNb3VudC5nZXRGaXJzdFJlYWN0RE9NKGN1cnJlbnRQYXRoRWxlbWVudCk7XG4gICAgaWYgKHJlYWN0UGFyZW50ID09PSBjdXJyZW50UGF0aEVsZW1lbnQpIHtcbiAgICAgIHZhciBjdXJyZW50UGF0aEVsZW1lbnRJRCA9IFJlYWN0TW91bnQuZ2V0SUQoY3VycmVudFBhdGhFbGVtZW50KTtcbiAgICAgIHZhciBuZXdSb290SUQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQoY3VycmVudFBhdGhFbGVtZW50SUQpO1xuICAgICAgYm9va0tlZXBpbmcuYW5jZXN0b3JzLnB1c2goY3VycmVudFBhdGhFbGVtZW50KTtcblxuICAgICAgdmFyIHRvcExldmVsVGFyZ2V0SUQgPSBSZWFjdE1vdW50LmdldElEKGN1cnJlbnRQYXRoRWxlbWVudCkgfHwgJyc7XG4gICAgICBldmVudHNGaXJlZCsrO1xuICAgICAgUmVhY3RFdmVudExpc3RlbmVyLl9oYW5kbGVUb3BMZXZlbChib29rS2VlcGluZy50b3BMZXZlbFR5cGUsIGN1cnJlbnRQYXRoRWxlbWVudCwgdG9wTGV2ZWxUYXJnZXRJRCwgYm9va0tlZXBpbmcubmF0aXZlRXZlbnQsIGN1cnJlbnROYXRpdmVUYXJnZXQpO1xuXG4gICAgICAvLyBKdW1wIHRvIHRoZSByb290IG9mIHRoaXMgUmVhY3QgcmVuZGVyIHRyZWVcbiAgICAgIHdoaWxlIChjdXJyZW50UGF0aEVsZW1lbnRJRCAhPT0gbmV3Um9vdElEKSB7XG4gICAgICAgIGkrKztcbiAgICAgICAgY3VycmVudFBhdGhFbGVtZW50ID0gcGF0aFtpXTtcbiAgICAgICAgY3VycmVudFBhdGhFbGVtZW50SUQgPSBSZWFjdE1vdW50LmdldElEKGN1cnJlbnRQYXRoRWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChldmVudHNGaXJlZCA9PT0gMCkge1xuICAgIFJlYWN0RXZlbnRMaXN0ZW5lci5faGFuZGxlVG9wTGV2ZWwoYm9va0tlZXBpbmcudG9wTGV2ZWxUeXBlLCB3aW5kb3csICcnLCBib29rS2VlcGluZy5uYXRpdmVFdmVudCwgZ2V0RXZlbnRUYXJnZXQoYm9va0tlZXBpbmcubmF0aXZlRXZlbnQpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzY3JvbGxWYWx1ZU1vbml0b3IoY2IpIHtcbiAgdmFyIHNjcm9sbFBvc2l0aW9uID0gZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24od2luZG93KTtcbiAgY2Ioc2Nyb2xsUG9zaXRpb24pO1xufVxuXG52YXIgUmVhY3RFdmVudExpc3RlbmVyID0ge1xuICBfZW5hYmxlZDogdHJ1ZSxcbiAgX2hhbmRsZVRvcExldmVsOiBudWxsLFxuXG4gIFdJTkRPV19IQU5ETEU6IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IHdpbmRvdyA6IG51bGwsXG5cbiAgc2V0SGFuZGxlVG9wTGV2ZWw6IGZ1bmN0aW9uIChoYW5kbGVUb3BMZXZlbCkge1xuICAgIFJlYWN0RXZlbnRMaXN0ZW5lci5faGFuZGxlVG9wTGV2ZWwgPSBoYW5kbGVUb3BMZXZlbDtcbiAgfSxcblxuICBzZXRFbmFibGVkOiBmdW5jdGlvbiAoZW5hYmxlZCkge1xuICAgIFJlYWN0RXZlbnRMaXN0ZW5lci5fZW5hYmxlZCA9ICEhZW5hYmxlZDtcbiAgfSxcblxuICBpc0VuYWJsZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gUmVhY3RFdmVudExpc3RlbmVyLl9lbmFibGVkO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUcmFwcyB0b3AtbGV2ZWwgZXZlbnRzIGJ5IHVzaW5nIGV2ZW50IGJ1YmJsaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoYW5kbGVyQmFzZU5hbWUgRXZlbnQgbmFtZSAoZS5nLiBcImNsaWNrXCIpLlxuICAgKiBAcGFyYW0ge29iamVjdH0gaGFuZGxlIEVsZW1lbnQgb24gd2hpY2ggdG8gYXR0YWNoIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBBbiBvYmplY3Qgd2l0aCBhIHJlbW92ZSBmdW5jdGlvbiB3aGljaCB3aWxsIGZvcmNlZnVsbHlcbiAgICogICAgICAgICAgICAgICAgICByZW1vdmUgdGhlIGxpc3RlbmVyLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHRyYXBCdWJibGVkRXZlbnQ6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBoYW5kbGU7XG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIEV2ZW50TGlzdGVuZXIubGlzdGVuKGVsZW1lbnQsIGhhbmRsZXJCYXNlTmFtZSwgUmVhY3RFdmVudExpc3RlbmVyLmRpc3BhdGNoRXZlbnQuYmluZChudWxsLCB0b3BMZXZlbFR5cGUpKTtcbiAgfSxcblxuICAvKipcbiAgICogVHJhcHMgYSB0b3AtbGV2ZWwgZXZlbnQgYnkgdXNpbmcgZXZlbnQgY2FwdHVyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoYW5kbGVyQmFzZU5hbWUgRXZlbnQgbmFtZSAoZS5nLiBcImNsaWNrXCIpLlxuICAgKiBAcGFyYW0ge29iamVjdH0gaGFuZGxlIEVsZW1lbnQgb24gd2hpY2ggdG8gYXR0YWNoIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fSBBbiBvYmplY3Qgd2l0aCBhIHJlbW92ZSBmdW5jdGlvbiB3aGljaCB3aWxsIGZvcmNlZnVsbHlcbiAgICogICAgICAgICAgICAgICAgICByZW1vdmUgdGhlIGxpc3RlbmVyLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHRyYXBDYXB0dXJlZEV2ZW50OiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCBoYW5kbGVyQmFzZU5hbWUsIGhhbmRsZSkge1xuICAgIHZhciBlbGVtZW50ID0gaGFuZGxlO1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBFdmVudExpc3RlbmVyLmNhcHR1cmUoZWxlbWVudCwgaGFuZGxlckJhc2VOYW1lLCBSZWFjdEV2ZW50TGlzdGVuZXIuZGlzcGF0Y2hFdmVudC5iaW5kKG51bGwsIHRvcExldmVsVHlwZSkpO1xuICB9LFxuXG4gIG1vbml0b3JTY3JvbGxWYWx1ZTogZnVuY3Rpb24gKHJlZnJlc2gpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBzY3JvbGxWYWx1ZU1vbml0b3IuYmluZChudWxsLCByZWZyZXNoKTtcbiAgICBFdmVudExpc3RlbmVyLmxpc3Rlbih3aW5kb3csICdzY3JvbGwnLCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgZGlzcGF0Y2hFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgICBpZiAoIVJlYWN0RXZlbnRMaXN0ZW5lci5fZW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBib29rS2VlcGluZyA9IFRvcExldmVsQ2FsbGJhY2tCb29rS2VlcGluZy5nZXRQb29sZWQodG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEV2ZW50IHF1ZXVlIGJlaW5nIHByb2Nlc3NlZCBpbiB0aGUgc2FtZSBjeWNsZSBhbGxvd3NcbiAgICAgIC8vIGBwcmV2ZW50RGVmYXVsdGAuXG4gICAgICBSZWFjdFVwZGF0ZXMuYmF0Y2hlZFVwZGF0ZXMoaGFuZGxlVG9wTGV2ZWxJbXBsLCBib29rS2VlcGluZyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIFRvcExldmVsQ2FsbGJhY2tCb29rS2VlcGluZy5yZWxlYXNlKGJvb2tLZWVwaW5nKTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RFdmVudExpc3RlbmVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEluamVjdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTVByb3BlcnR5ID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eScpO1xudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xudmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdENsYXNzID0gcmVxdWlyZSgnLi9SZWFjdENsYXNzJyk7XG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbXB0eUNvbXBvbmVudCcpO1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJyk7XG52YXIgUmVhY3ROYXRpdmVDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0TmF0aXZlQ29tcG9uZW50Jyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBSZWFjdFJvb3RJbmRleCA9IHJlcXVpcmUoJy4vUmVhY3RSb290SW5kZXgnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgUmVhY3RJbmplY3Rpb24gPSB7XG4gIENvbXBvbmVudDogUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5pbmplY3Rpb24sXG4gIENsYXNzOiBSZWFjdENsYXNzLmluamVjdGlvbixcbiAgRE9NUHJvcGVydHk6IERPTVByb3BlcnR5LmluamVjdGlvbixcbiAgRW1wdHlDb21wb25lbnQ6IFJlYWN0RW1wdHlDb21wb25lbnQuaW5qZWN0aW9uLFxuICBFdmVudFBsdWdpbkh1YjogRXZlbnRQbHVnaW5IdWIuaW5qZWN0aW9uLFxuICBFdmVudEVtaXR0ZXI6IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5pbmplY3Rpb24sXG4gIE5hdGl2ZUNvbXBvbmVudDogUmVhY3ROYXRpdmVDb21wb25lbnQuaW5qZWN0aW9uLFxuICBQZXJmOiBSZWFjdFBlcmYuaW5qZWN0aW9uLFxuICBSb290SW5kZXg6IFJlYWN0Um9vdEluZGV4LmluamVjdGlvbixcbiAgVXBkYXRlczogUmVhY3RVcGRhdGVzLmluamVjdGlvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEluamVjdGlvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RJbnB1dFNlbGVjdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RE9NU2VsZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdERPTVNlbGVjdGlvbicpO1xuXG52YXIgY29udGFpbnNOb2RlID0gcmVxdWlyZSgnZmJqcy9saWIvY29udGFpbnNOb2RlJyk7XG52YXIgZm9jdXNOb2RlID0gcmVxdWlyZSgnZmJqcy9saWIvZm9jdXNOb2RlJyk7XG52YXIgZ2V0QWN0aXZlRWxlbWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL2dldEFjdGl2ZUVsZW1lbnQnKTtcblxuZnVuY3Rpb24gaXNJbkRvY3VtZW50KG5vZGUpIHtcbiAgcmV0dXJuIGNvbnRhaW5zTm9kZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIG5vZGUpO1xufVxuXG4vKipcbiAqIEBSZWFjdElucHV0U2VsZWN0aW9uOiBSZWFjdCBpbnB1dCBzZWxlY3Rpb24gbW9kdWxlLiBCYXNlZCBvbiBTZWxlY3Rpb24uanMsXG4gKiBidXQgbW9kaWZpZWQgdG8gYmUgc3VpdGFibGUgZm9yIHJlYWN0IGFuZCBoYXMgYSBjb3VwbGUgb2YgYnVnIGZpeGVzIChkb2Vzbid0XG4gKiBhc3N1bWUgYnV0dG9ucyBoYXZlIHJhbmdlIHNlbGVjdGlvbnMgYWxsb3dlZCkuXG4gKiBJbnB1dCBzZWxlY3Rpb24gbW9kdWxlIGZvciBSZWFjdC5cbiAqL1xudmFyIFJlYWN0SW5wdXRTZWxlY3Rpb24gPSB7XG5cbiAgaGFzU2VsZWN0aW9uQ2FwYWJpbGl0aWVzOiBmdW5jdGlvbiAoZWxlbSkge1xuICAgIHZhciBub2RlTmFtZSA9IGVsZW0gJiYgZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIG5vZGVOYW1lICYmIChub2RlTmFtZSA9PT0gJ2lucHV0JyAmJiBlbGVtLnR5cGUgPT09ICd0ZXh0JyB8fCBub2RlTmFtZSA9PT0gJ3RleHRhcmVhJyB8fCBlbGVtLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnKTtcbiAgfSxcblxuICBnZXRTZWxlY3Rpb25JbmZvcm1hdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBmb2N1c2VkRWxlbSA9IGdldEFjdGl2ZUVsZW1lbnQoKTtcbiAgICByZXR1cm4ge1xuICAgICAgZm9jdXNlZEVsZW06IGZvY3VzZWRFbGVtLFxuICAgICAgc2VsZWN0aW9uUmFuZ2U6IFJlYWN0SW5wdXRTZWxlY3Rpb24uaGFzU2VsZWN0aW9uQ2FwYWJpbGl0aWVzKGZvY3VzZWRFbGVtKSA/IFJlYWN0SW5wdXRTZWxlY3Rpb24uZ2V0U2VsZWN0aW9uKGZvY3VzZWRFbGVtKSA6IG51bGxcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcmVzdG9yZVNlbGVjdGlvbjogSWYgYW55IHNlbGVjdGlvbiBpbmZvcm1hdGlvbiB3YXMgcG90ZW50aWFsbHkgbG9zdCxcbiAgICogcmVzdG9yZSBpdC4gVGhpcyBpcyB1c2VmdWwgd2hlbiBwZXJmb3JtaW5nIG9wZXJhdGlvbnMgdGhhdCBjb3VsZCByZW1vdmUgZG9tXG4gICAqIG5vZGVzIGFuZCBwbGFjZSB0aGVtIGJhY2sgaW4sIHJlc3VsdGluZyBpbiBmb2N1cyBiZWluZyBsb3N0LlxuICAgKi9cbiAgcmVzdG9yZVNlbGVjdGlvbjogZnVuY3Rpb24gKHByaW9yU2VsZWN0aW9uSW5mb3JtYXRpb24pIHtcbiAgICB2YXIgY3VyRm9jdXNlZEVsZW0gPSBnZXRBY3RpdmVFbGVtZW50KCk7XG4gICAgdmFyIHByaW9yRm9jdXNlZEVsZW0gPSBwcmlvclNlbGVjdGlvbkluZm9ybWF0aW9uLmZvY3VzZWRFbGVtO1xuICAgIHZhciBwcmlvclNlbGVjdGlvblJhbmdlID0gcHJpb3JTZWxlY3Rpb25JbmZvcm1hdGlvbi5zZWxlY3Rpb25SYW5nZTtcbiAgICBpZiAoY3VyRm9jdXNlZEVsZW0gIT09IHByaW9yRm9jdXNlZEVsZW0gJiYgaXNJbkRvY3VtZW50KHByaW9yRm9jdXNlZEVsZW0pKSB7XG4gICAgICBpZiAoUmVhY3RJbnB1dFNlbGVjdGlvbi5oYXNTZWxlY3Rpb25DYXBhYmlsaXRpZXMocHJpb3JGb2N1c2VkRWxlbSkpIHtcbiAgICAgICAgUmVhY3RJbnB1dFNlbGVjdGlvbi5zZXRTZWxlY3Rpb24ocHJpb3JGb2N1c2VkRWxlbSwgcHJpb3JTZWxlY3Rpb25SYW5nZSk7XG4gICAgICB9XG4gICAgICBmb2N1c05vZGUocHJpb3JGb2N1c2VkRWxlbSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAZ2V0U2VsZWN0aW9uOiBHZXRzIHRoZSBzZWxlY3Rpb24gYm91bmRzIG9mIGEgZm9jdXNlZCB0ZXh0YXJlYSwgaW5wdXQgb3JcbiAgICogY29udGVudEVkaXRhYmxlIG5vZGUuXG4gICAqIC1AaW5wdXQ6IExvb2sgdXAgc2VsZWN0aW9uIGJvdW5kcyBvZiB0aGlzIGlucHV0XG4gICAqIC1AcmV0dXJuIHtzdGFydDogc2VsZWN0aW9uU3RhcnQsIGVuZDogc2VsZWN0aW9uRW5kfVxuICAgKi9cbiAgZ2V0U2VsZWN0aW9uOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICB2YXIgc2VsZWN0aW9uO1xuXG4gICAgaWYgKCdzZWxlY3Rpb25TdGFydCcgaW4gaW5wdXQpIHtcbiAgICAgIC8vIE1vZGVybiBicm93c2VyIHdpdGggaW5wdXQgb3IgdGV4dGFyZWEuXG4gICAgICBzZWxlY3Rpb24gPSB7XG4gICAgICAgIHN0YXJ0OiBpbnB1dC5zZWxlY3Rpb25TdGFydCxcbiAgICAgICAgZW5kOiBpbnB1dC5zZWxlY3Rpb25FbmRcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChkb2N1bWVudC5zZWxlY3Rpb24gJiYgKGlucHV0Lm5vZGVOYW1lICYmIGlucHV0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcpKSB7XG4gICAgICAvLyBJRTggaW5wdXQuXG4gICAgICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcbiAgICAgIC8vIFRoZXJlIGNhbiBvbmx5IGJlIG9uZSBzZWxlY3Rpb24gcGVyIGRvY3VtZW50IGluIElFLCBzbyBpdCBtdXN0XG4gICAgICAvLyBiZSBpbiBvdXIgZWxlbWVudC5cbiAgICAgIGlmIChyYW5nZS5wYXJlbnRFbGVtZW50KCkgPT09IGlucHV0KSB7XG4gICAgICAgIHNlbGVjdGlvbiA9IHtcbiAgICAgICAgICBzdGFydDogLXJhbmdlLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgLWlucHV0LnZhbHVlLmxlbmd0aCksXG4gICAgICAgICAgZW5kOiAtcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgLWlucHV0LnZhbHVlLmxlbmd0aClcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ29udGVudCBlZGl0YWJsZSBvciBvbGQgSUUgdGV4dGFyZWEuXG4gICAgICBzZWxlY3Rpb24gPSBSZWFjdERPTVNlbGVjdGlvbi5nZXRPZmZzZXRzKGlucHV0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZWN0aW9uIHx8IHsgc3RhcnQ6IDAsIGVuZDogMCB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBAc2V0U2VsZWN0aW9uOiBTZXRzIHRoZSBzZWxlY3Rpb24gYm91bmRzIG9mIGEgdGV4dGFyZWEgb3IgaW5wdXQgYW5kIGZvY3VzZXNcbiAgICogdGhlIGlucHV0LlxuICAgKiAtQGlucHV0ICAgICBTZXQgc2VsZWN0aW9uIGJvdW5kcyBvZiB0aGlzIGlucHV0IG9yIHRleHRhcmVhXG4gICAqIC1Ab2Zmc2V0cyAgIE9iamVjdCBvZiBzYW1lIGZvcm0gdGhhdCBpcyByZXR1cm5lZCBmcm9tIGdldCpcbiAgICovXG4gIHNldFNlbGVjdGlvbjogZnVuY3Rpb24gKGlucHV0LCBvZmZzZXRzKSB7XG4gICAgdmFyIHN0YXJ0ID0gb2Zmc2V0cy5zdGFydDtcbiAgICB2YXIgZW5kID0gb2Zmc2V0cy5lbmQ7XG4gICAgaWYgKHR5cGVvZiBlbmQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBlbmQgPSBzdGFydDtcbiAgICB9XG5cbiAgICBpZiAoJ3NlbGVjdGlvblN0YXJ0JyBpbiBpbnB1dCkge1xuICAgICAgaW5wdXQuc2VsZWN0aW9uU3RhcnQgPSBzdGFydDtcbiAgICAgIGlucHV0LnNlbGVjdGlvbkVuZCA9IE1hdGgubWluKGVuZCwgaW5wdXQudmFsdWUubGVuZ3RoKTtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiAoaW5wdXQubm9kZU5hbWUgJiYgaW5wdXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0JykpIHtcbiAgICAgIHZhciByYW5nZSA9IGlucHV0LmNyZWF0ZVRleHRSYW5nZSgpO1xuICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XG4gICAgICByYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHN0YXJ0KTtcbiAgICAgIHJhbmdlLm1vdmVFbmQoJ2NoYXJhY3RlcicsIGVuZCAtIHN0YXJ0KTtcbiAgICAgIHJhbmdlLnNlbGVjdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBSZWFjdERPTVNlbGVjdGlvbi5zZXRPZmZzZXRzKGlucHV0LCBvZmZzZXRzKTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RJbnB1dFNlbGVjdGlvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RJbnN0YW5jZUhhbmRsZXNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RSb290SW5kZXggPSByZXF1aXJlKCcuL1JlYWN0Um9vdEluZGV4Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIFNFUEFSQVRPUiA9ICcuJztcbnZhciBTRVBBUkFUT1JfTEVOR1RIID0gU0VQQVJBVE9SLmxlbmd0aDtcblxuLyoqXG4gKiBNYXhpbXVtIGRlcHRoIG9mIHRyYXZlcnNhbHMgYmVmb3JlIHdlIGNvbnNpZGVyIHRoZSBwb3NzaWJpbGl0eSBvZiBhIGJhZCBJRC5cbiAqL1xudmFyIE1BWF9UUkVFX0RFUFRIID0gMTAwMDA7XG5cbi8qKlxuICogQ3JlYXRlcyBhIERPTSBJRCBwcmVmaXggdG8gdXNlIHdoZW4gbW91bnRpbmcgUmVhY3QgY29tcG9uZW50cy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggQSB1bmlxdWUgaW50ZWdlclxuICogQHJldHVybiB7c3RyaW5nfSBSZWFjdCByb290IElELlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGdldFJlYWN0Um9vdElEU3RyaW5nKGluZGV4KSB7XG4gIHJldHVybiBTRVBBUkFUT1IgKyBpbmRleC50b1N0cmluZygzNik7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgY2hhcmFjdGVyIGluIHRoZSBzdXBwbGllZCBJRCBpcyBhIHNlcGFyYXRvciBvciB0aGUgZW5kLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBIFJlYWN0IERPTSBJRC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCBvZiB0aGUgY2hhcmFjdGVyIHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY2hhcmFjdGVyIGlzIGEgc2VwYXJhdG9yIG9yIGVuZCBvZiB0aGUgSUQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpc0JvdW5kYXJ5KGlkLCBpbmRleCkge1xuICByZXR1cm4gaWQuY2hhckF0KGluZGV4KSA9PT0gU0VQQVJBVE9SIHx8IGluZGV4ID09PSBpZC5sZW5ndGg7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBzdXBwbGllZCBzdHJpbmcgaXMgYSB2YWxpZCBSZWFjdCBET00gSUQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIEEgUmVhY3QgRE9NIElELCBtYXliZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHN0cmluZyBpcyBhIHZhbGlkIFJlYWN0IERPTSBJRC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWRJRChpZCkge1xuICByZXR1cm4gaWQgPT09ICcnIHx8IGlkLmNoYXJBdCgwKSA9PT0gU0VQQVJBVE9SICYmIGlkLmNoYXJBdChpZC5sZW5ndGggLSAxKSAhPT0gU0VQQVJBVE9SO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgZmlyc3QgSUQgaXMgYW4gYW5jZXN0b3Igb2Ygb3IgZXF1YWwgdG8gdGhlIHNlY29uZCBJRC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYW5jZXN0b3JJRFxuICogQHBhcmFtIHtzdHJpbmd9IGRlc2NlbmRhbnRJRFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBgYW5jZXN0b3JJRGAgaXMgYW4gYW5jZXN0b3Igb2YgYGRlc2NlbmRhbnRJRGAuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gaXNBbmNlc3RvcklET2YoYW5jZXN0b3JJRCwgZGVzY2VuZGFudElEKSB7XG4gIHJldHVybiBkZXNjZW5kYW50SUQuaW5kZXhPZihhbmNlc3RvcklEKSA9PT0gMCAmJiBpc0JvdW5kYXJ5KGRlc2NlbmRhbnRJRCwgYW5jZXN0b3JJRC5sZW5ndGgpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHBhcmVudCBJRCBvZiB0aGUgc3VwcGxpZWQgUmVhY3QgRE9NIElELCBgaWRgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiBhIGNvbXBvbmVudC5cbiAqIEByZXR1cm4ge3N0cmluZ30gSUQgb2YgdGhlIHBhcmVudCwgb3IgYW4gZW1wdHkgc3RyaW5nLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0UGFyZW50SUQoaWQpIHtcbiAgcmV0dXJuIGlkID8gaWQuc3Vic3RyKDAsIGlkLmxhc3RJbmRleE9mKFNFUEFSQVRPUikpIDogJyc7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbmV4dCBET00gSUQgb24gdGhlIHRyZWUgcGF0aCBmcm9tIHRoZSBzdXBwbGllZCBgYW5jZXN0b3JJRGAgdG8gdGhlXG4gKiBzdXBwbGllZCBgZGVzdGluYXRpb25JRGAuIElmIHRoZXkgYXJlIGVxdWFsLCB0aGUgSUQgaXMgcmV0dXJuZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGFuY2VzdG9ySUQgSUQgb2YgYW4gYW5jZXN0b3Igbm9kZSBvZiBgZGVzdGluYXRpb25JRGAuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb25JRCBJRCBvZiB0aGUgZGVzdGluYXRpb24gbm9kZS5cbiAqIEByZXR1cm4ge3N0cmluZ30gTmV4dCBJRCBvbiB0aGUgcGF0aCBmcm9tIGBhbmNlc3RvcklEYCB0byBgZGVzdGluYXRpb25JRGAuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXROZXh0RGVzY2VuZGFudElEKGFuY2VzdG9ySUQsIGRlc3RpbmF0aW9uSUQpIHtcbiAgIShpc1ZhbGlkSUQoYW5jZXN0b3JJRCkgJiYgaXNWYWxpZElEKGRlc3RpbmF0aW9uSUQpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdnZXROZXh0RGVzY2VuZGFudElEKCVzLCAlcyk6IFJlY2VpdmVkIGFuIGludmFsaWQgUmVhY3QgRE9NIElELicsIGFuY2VzdG9ySUQsIGRlc3RpbmF0aW9uSUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgIWlzQW5jZXN0b3JJRE9mKGFuY2VzdG9ySUQsIGRlc3RpbmF0aW9uSUQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2dldE5leHREZXNjZW5kYW50SUQoLi4uKTogUmVhY3QgaGFzIG1hZGUgYW4gaW52YWxpZCBhc3N1bXB0aW9uIGFib3V0ICcgKyAndGhlIERPTSBoaWVyYXJjaHkuIEV4cGVjdGVkIGAlc2AgdG8gYmUgYW4gYW5jZXN0b3Igb2YgYCVzYC4nLCBhbmNlc3RvcklELCBkZXN0aW5hdGlvbklEKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGlmIChhbmNlc3RvcklEID09PSBkZXN0aW5hdGlvbklEKSB7XG4gICAgcmV0dXJuIGFuY2VzdG9ySUQ7XG4gIH1cbiAgLy8gU2tpcCBvdmVyIHRoZSBhbmNlc3RvciBhbmQgdGhlIGltbWVkaWF0ZSBzZXBhcmF0b3IuIFRyYXZlcnNlIHVudGlsIHdlIGhpdFxuICAvLyBhbm90aGVyIHNlcGFyYXRvciBvciB3ZSByZWFjaCB0aGUgZW5kIG9mIGBkZXN0aW5hdGlvbklEYC5cbiAgdmFyIHN0YXJ0ID0gYW5jZXN0b3JJRC5sZW5ndGggKyBTRVBBUkFUT1JfTEVOR1RIO1xuICB2YXIgaTtcbiAgZm9yIChpID0gc3RhcnQ7IGkgPCBkZXN0aW5hdGlvbklELmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGlzQm91bmRhcnkoZGVzdGluYXRpb25JRCwgaSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZGVzdGluYXRpb25JRC5zdWJzdHIoMCwgaSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbmVhcmVzdCBjb21tb24gYW5jZXN0b3IgSUQgb2YgdHdvIElEcy5cbiAqXG4gKiBVc2luZyB0aGlzIElEIHNjaGVtZSwgdGhlIG5lYXJlc3QgY29tbW9uIGFuY2VzdG9yIElEIGlzIHRoZSBsb25nZXN0IGNvbW1vblxuICogcHJlZml4IG9mIHRoZSB0d28gSURzIHRoYXQgaW1tZWRpYXRlbHkgcHJlY2VkZWQgYSBcIm1hcmtlclwiIGluIGJvdGggc3RyaW5ncy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gb25lSURcbiAqIEBwYXJhbSB7c3RyaW5nfSB0d29JRFxuICogQHJldHVybiB7c3RyaW5nfSBOZWFyZXN0IGNvbW1vbiBhbmNlc3RvciBJRCwgb3IgdGhlIGVtcHR5IHN0cmluZyBpZiBub25lLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0Rmlyc3RDb21tb25BbmNlc3RvcklEKG9uZUlELCB0d29JRCkge1xuICB2YXIgbWluTGVuZ3RoID0gTWF0aC5taW4ob25lSUQubGVuZ3RoLCB0d29JRC5sZW5ndGgpO1xuICBpZiAobWluTGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHZhciBsYXN0Q29tbW9uTWFya2VySW5kZXggPSAwO1xuICAvLyBVc2UgYDw9YCB0byB0cmF2ZXJzZSB1bnRpbCB0aGUgXCJFT0xcIiBvZiB0aGUgc2hvcnRlciBzdHJpbmcuXG4gIGZvciAodmFyIGkgPSAwOyBpIDw9IG1pbkxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGlzQm91bmRhcnkob25lSUQsIGkpICYmIGlzQm91bmRhcnkodHdvSUQsIGkpKSB7XG4gICAgICBsYXN0Q29tbW9uTWFya2VySW5kZXggPSBpO1xuICAgIH0gZWxzZSBpZiAob25lSUQuY2hhckF0KGkpICE9PSB0d29JRC5jaGFyQXQoaSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICB2YXIgbG9uZ2VzdENvbW1vbklEID0gb25lSUQuc3Vic3RyKDAsIGxhc3RDb21tb25NYXJrZXJJbmRleCk7XG4gICFpc1ZhbGlkSUQobG9uZ2VzdENvbW1vbklEKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdnZXRGaXJzdENvbW1vbkFuY2VzdG9ySUQoJXMsICVzKTogRXhwZWN0ZWQgYSB2YWxpZCBSZWFjdCBET00gSUQ6ICVzJywgb25lSUQsIHR3b0lELCBsb25nZXN0Q29tbW9uSUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgcmV0dXJuIGxvbmdlc3RDb21tb25JRDtcbn1cblxuLyoqXG4gKiBUcmF2ZXJzZXMgdGhlIHBhcmVudCBwYXRoIGJldHdlZW4gdHdvIElEcyAoZWl0aGVyIHVwIG9yIGRvd24pLiBUaGUgSURzIG11c3RcbiAqIG5vdCBiZSB0aGUgc2FtZSwgYW5kIHRoZXJlIG11c3QgZXhpc3QgYSBwYXJlbnQgcGF0aCBiZXR3ZWVuIHRoZW0uIElmIHRoZVxuICogY2FsbGJhY2sgcmV0dXJucyBgZmFsc2VgLCB0cmF2ZXJzYWwgaXMgc3RvcHBlZC5cbiAqXG4gKiBAcGFyYW0gez9zdHJpbmd9IHN0YXJ0IElEIGF0IHdoaWNoIHRvIHN0YXJ0IHRyYXZlcnNhbC5cbiAqIEBwYXJhbSB7P3N0cmluZ30gc3RvcCBJRCBhdCB3aGljaCB0byBlbmQgdHJhdmVyc2FsLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgQ2FsbGJhY2sgdG8gaW52b2tlIGVhY2ggSUQgd2l0aC5cbiAqIEBwYXJhbSB7Kn0gYXJnIEFyZ3VtZW50IHRvIGludm9rZSB0aGUgY2FsbGJhY2sgd2l0aC5cbiAqIEBwYXJhbSB7P2Jvb2xlYW59IHNraXBGaXJzdCBXaGV0aGVyIG9yIG5vdCB0byBza2lwIHRoZSBmaXJzdCBub2RlLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gc2tpcExhc3QgV2hldGhlciBvciBub3QgdG8gc2tpcCB0aGUgbGFzdCBub2RlLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VQYXJlbnRQYXRoKHN0YXJ0LCBzdG9wLCBjYiwgYXJnLCBza2lwRmlyc3QsIHNraXBMYXN0KSB7XG4gIHN0YXJ0ID0gc3RhcnQgfHwgJyc7XG4gIHN0b3AgPSBzdG9wIHx8ICcnO1xuICAhKHN0YXJ0ICE9PSBzdG9wKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0cmF2ZXJzZVBhcmVudFBhdGgoLi4uKTogQ2Fubm90IHRyYXZlcnNlIGZyb20gYW5kIHRvIHRoZSBzYW1lIElELCBgJXNgLicsIHN0YXJ0KSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHZhciB0cmF2ZXJzZVVwID0gaXNBbmNlc3RvcklET2Yoc3RvcCwgc3RhcnQpO1xuICAhKHRyYXZlcnNlVXAgfHwgaXNBbmNlc3RvcklET2Yoc3RhcnQsIHN0b3ApKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0cmF2ZXJzZVBhcmVudFBhdGgoJXMsICVzLCAuLi4pOiBDYW5ub3QgdHJhdmVyc2UgZnJvbSB0d28gSURzIHRoYXQgZG8gJyArICdub3QgaGF2ZSBhIHBhcmVudCBwYXRoLicsIHN0YXJ0LCBzdG9wKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIC8vIFRyYXZlcnNlIGZyb20gYHN0YXJ0YCB0byBgc3RvcGAgb25lIGRlcHRoIGF0IGEgdGltZS5cbiAgdmFyIGRlcHRoID0gMDtcbiAgdmFyIHRyYXZlcnNlID0gdHJhdmVyc2VVcCA/IGdldFBhcmVudElEIDogZ2V0TmV4dERlc2NlbmRhbnRJRDtcbiAgZm9yICh2YXIgaWQgPSBzdGFydDs7IC8qIHVudGlsIGJyZWFrICovaWQgPSB0cmF2ZXJzZShpZCwgc3RvcCkpIHtcbiAgICB2YXIgcmV0O1xuICAgIGlmICgoIXNraXBGaXJzdCB8fCBpZCAhPT0gc3RhcnQpICYmICghc2tpcExhc3QgfHwgaWQgIT09IHN0b3ApKSB7XG4gICAgICByZXQgPSBjYihpZCwgdHJhdmVyc2VVcCwgYXJnKTtcbiAgICB9XG4gICAgaWYgKHJldCA9PT0gZmFsc2UgfHwgaWQgPT09IHN0b3ApIHtcbiAgICAgIC8vIE9ubHkgYnJlYWsgLy9hZnRlci8vIHZpc2l0aW5nIGBzdG9wYC5cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAhKGRlcHRoKysgPCBNQVhfVFJFRV9ERVBUSCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndHJhdmVyc2VQYXJlbnRQYXRoKCVzLCAlcywgLi4uKTogRGV0ZWN0ZWQgYW4gaW5maW5pdGUgbG9vcCB3aGlsZSAnICsgJ3RyYXZlcnNpbmcgdGhlIFJlYWN0IERPTSBJRCB0cmVlLiBUaGlzIG1heSBiZSBkdWUgdG8gbWFsZm9ybWVkIElEczogJXMnLCBzdGFydCwgc3RvcCwgaWQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIE1hbmFnZXMgdGhlIElEcyBhc3NpZ25lZCB0byBET00gcmVwcmVzZW50YXRpb25zIG9mIFJlYWN0IGNvbXBvbmVudHMuIFRoaXNcbiAqIHVzZXMgYSBzcGVjaWZpYyBzY2hlbWUgaW4gb3JkZXIgdG8gdHJhdmVyc2UgdGhlIERPTSBlZmZpY2llbnRseSAoZS5nLiBpblxuICogb3JkZXIgdG8gc2ltdWxhdGUgZXZlbnRzKS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0ge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgUmVhY3Qgcm9vdCBJRFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IEEgUmVhY3Qgcm9vdCBJRC5cbiAgICovXG4gIGNyZWF0ZVJlYWN0Um9vdElEOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdldFJlYWN0Um9vdElEU3RyaW5nKFJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4KCkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgUmVhY3QgSUQgYnkgam9pbmluZyBhIHJvb3QgSUQgd2l0aCBhIG5hbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgUm9vdCBJRCBvZiBhIHBhcmVudCBjb21wb25lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEEgY29tcG9uZW50J3MgbmFtZSAoYXMgZmxhdHRlbmVkIGNoaWxkcmVuKS5cbiAgICogQHJldHVybiB7c3RyaW5nfSBBIFJlYWN0IElELlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNyZWF0ZVJlYWN0SUQ6IGZ1bmN0aW9uIChyb290SUQsIG5hbWUpIHtcbiAgICByZXR1cm4gcm9vdElEICsgbmFtZTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgRE9NIElEIG9mIHRoZSBSZWFjdCBjb21wb25lbnQgdGhhdCBpcyB0aGUgcm9vdCBvZiB0aGUgdHJlZSB0aGF0XG4gICAqIGNvbnRhaW5zIHRoZSBSZWFjdCBjb21wb25lbnQgd2l0aCB0aGUgc3VwcGxpZWQgRE9NIElELlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgRE9NIElEIG9mIGEgUmVhY3QgY29tcG9uZW50LlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBET00gSUQgb2YgdGhlIFJlYWN0IGNvbXBvbmVudCB0aGF0IGlzIHRoZSByb290LlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldFJlYWN0Um9vdElERnJvbU5vZGVJRDogZnVuY3Rpb24gKGlkKSB7XG4gICAgaWYgKGlkICYmIGlkLmNoYXJBdCgwKSA9PT0gU0VQQVJBVE9SICYmIGlkLmxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBpbmRleCA9IGlkLmluZGV4T2YoU0VQQVJBVE9SLCAxKTtcbiAgICAgIHJldHVybiBpbmRleCA+IC0xID8gaWQuc3Vic3RyKDAsIGluZGV4KSA6IGlkO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogVHJhdmVyc2VzIHRoZSBJRCBoaWVyYXJjaHkgYW5kIGludm9rZXMgdGhlIHN1cHBsaWVkIGBjYmAgb24gYW55IElEcyB0aGF0XG4gICAqIHNob3VsZCB3b3VsZCByZWNlaXZlIGEgYG1vdXNlRW50ZXJgIG9yIGBtb3VzZUxlYXZlYCBldmVudC5cbiAgICpcbiAgICogTk9URTogRG9lcyBub3QgaW52b2tlIHRoZSBjYWxsYmFjayBvbiB0aGUgbmVhcmVzdCBjb21tb24gYW5jZXN0b3IgYmVjYXVzZVxuICAgKiBub3RoaW5nIFwiZW50ZXJlZFwiIG9yIFwibGVmdFwiIHRoYXQgZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxlYXZlSUQgSUQgYmVpbmcgbGVmdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVudGVySUQgSUQgYmVpbmcgZW50ZXJlZC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgQ2FsbGJhY2sgdG8gaW52b2tlIG9uIGVhY2ggZW50ZXJlZC9sZWZ0IElELlxuICAgKiBAcGFyYW0geyp9IHVwQXJnIEFyZ3VtZW50IHRvIGludm9rZSB0aGUgY2FsbGJhY2sgd2l0aCBvbiBsZWZ0IElEcy5cbiAgICogQHBhcmFtIHsqfSBkb3duQXJnIEFyZ3VtZW50IHRvIGludm9rZSB0aGUgY2FsbGJhY2sgd2l0aCBvbiBlbnRlcmVkIElEcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICB0cmF2ZXJzZUVudGVyTGVhdmU6IGZ1bmN0aW9uIChsZWF2ZUlELCBlbnRlcklELCBjYiwgdXBBcmcsIGRvd25BcmcpIHtcbiAgICB2YXIgYW5jZXN0b3JJRCA9IGdldEZpcnN0Q29tbW9uQW5jZXN0b3JJRChsZWF2ZUlELCBlbnRlcklEKTtcbiAgICBpZiAoYW5jZXN0b3JJRCAhPT0gbGVhdmVJRCkge1xuICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKGxlYXZlSUQsIGFuY2VzdG9ySUQsIGNiLCB1cEFyZywgZmFsc2UsIHRydWUpO1xuICAgIH1cbiAgICBpZiAoYW5jZXN0b3JJRCAhPT0gZW50ZXJJRCkge1xuICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKGFuY2VzdG9ySUQsIGVudGVySUQsIGNiLCBkb3duQXJnLCB0cnVlLCBmYWxzZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTaW11bGF0ZXMgdGhlIHRyYXZlcnNhbCBvZiBhIHR3by1waGFzZSwgY2FwdHVyZS9idWJibGUgZXZlbnQgZGlzcGF0Y2guXG4gICAqXG4gICAqIE5PVEU6IFRoaXMgdHJhdmVyc2FsIGhhcHBlbnMgb24gSURzIHdpdGhvdXQgdG91Y2hpbmcgdGhlIERPTS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldElEIElEIG9mIHRoZSB0YXJnZXQgbm9kZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgQ2FsbGJhY2sgdG8gaW52b2tlLlxuICAgKiBAcGFyYW0geyp9IGFyZyBBcmd1bWVudCB0byBpbnZva2UgdGhlIGNhbGxiYWNrIHdpdGguXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdHJhdmVyc2VUd29QaGFzZTogZnVuY3Rpb24gKHRhcmdldElELCBjYiwgYXJnKSB7XG4gICAgaWYgKHRhcmdldElEKSB7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgoJycsIHRhcmdldElELCBjYiwgYXJnLCB0cnVlLCBmYWxzZSk7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgodGFyZ2V0SUQsICcnLCBjYiwgYXJnLCBmYWxzZSwgdHJ1ZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTYW1lIGFzIGB0cmF2ZXJzZVR3b1BoYXNlYCBidXQgc2tpcHMgdGhlIGB0YXJnZXRJRGAuXG4gICAqL1xuICB0cmF2ZXJzZVR3b1BoYXNlU2tpcFRhcmdldDogZnVuY3Rpb24gKHRhcmdldElELCBjYiwgYXJnKSB7XG4gICAgaWYgKHRhcmdldElEKSB7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgoJycsIHRhcmdldElELCBjYiwgYXJnLCB0cnVlLCB0cnVlKTtcbiAgICAgIHRyYXZlcnNlUGFyZW50UGF0aCh0YXJnZXRJRCwgJycsIGNiLCBhcmcsIHRydWUsIHRydWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVHJhdmVyc2UgYSBub2RlIElELCBjYWxsaW5nIHRoZSBzdXBwbGllZCBgY2JgIGZvciBlYWNoIGFuY2VzdG9yIElELiBGb3JcbiAgICogZXhhbXBsZSwgcGFzc2luZyBgLjAuJHJvdy0wLjFgIHdvdWxkIHJlc3VsdCBpbiBgY2JgIGdldHRpbmcgY2FsbGVkXG4gICAqIHdpdGggYC4wYCwgYC4wLiRyb3ctMGAsIGFuZCBgLjAuJHJvdy0wLjFgLlxuICAgKlxuICAgKiBOT1RFOiBUaGlzIHRyYXZlcnNhbCBoYXBwZW5zIG9uIElEcyB3aXRob3V0IHRvdWNoaW5nIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRJRCBJRCBvZiB0aGUgdGFyZ2V0IG5vZGUuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIENhbGxiYWNrIHRvIGludm9rZS5cbiAgICogQHBhcmFtIHsqfSBhcmcgQXJndW1lbnQgdG8gaW52b2tlIHRoZSBjYWxsYmFjayB3aXRoLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHRyYXZlcnNlQW5jZXN0b3JzOiBmdW5jdGlvbiAodGFyZ2V0SUQsIGNiLCBhcmcpIHtcbiAgICB0cmF2ZXJzZVBhcmVudFBhdGgoJycsIHRhcmdldElELCBjYiwgYXJnLCB0cnVlLCBmYWxzZSk7XG4gIH0sXG5cbiAgZ2V0Rmlyc3RDb21tb25BbmNlc3RvcklEOiBnZXRGaXJzdENvbW1vbkFuY2VzdG9ySUQsXG5cbiAgLyoqXG4gICAqIEV4cG9zZWQgZm9yIHVuaXQgdGVzdGluZy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXROZXh0RGVzY2VuZGFudElEOiBnZXROZXh0RGVzY2VuZGFudElELFxuXG4gIGlzQW5jZXN0b3JJRE9mOiBpc0FuY2VzdG9ySURPZixcblxuICBTRVBBUkFUT1I6IFNFUEFSQVRPUlxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEluc3RhbmNlTWFwXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIGBSZWFjdEluc3RhbmNlTWFwYCBtYWludGFpbnMgYSBtYXBwaW5nIGZyb20gYSBwdWJsaWMgZmFjaW5nIHN0YXRlZnVsXG4gKiBpbnN0YW5jZSAoa2V5KSBhbmQgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uICh2YWx1ZSkuIFRoaXMgYWxsb3dzIHB1YmxpY1xuICogbWV0aG9kcyB0byBhY2NlcHQgdGhlIHVzZXIgZmFjaW5nIGluc3RhbmNlIGFzIGFuIGFyZ3VtZW50IGFuZCBtYXAgdGhlbSBiYWNrXG4gKiB0byBpbnRlcm5hbCBtZXRob2RzLlxuICovXG5cbi8vIFRPRE86IFJlcGxhY2UgdGhpcyB3aXRoIEVTNjogdmFyIFJlYWN0SW5zdGFuY2VNYXAgPSBuZXcgTWFwKCk7XG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHtcblxuICAvKipcbiAgICogVGhpcyBBUEkgc2hvdWxkIGJlIGNhbGxlZCBgZGVsZXRlYCBidXQgd2UnZCBoYXZlIHRvIG1ha2Ugc3VyZSB0byBhbHdheXNcbiAgICogdHJhbnNmb3JtIHRoZXNlIHRvIHN0cmluZ3MgZm9yIElFIHN1cHBvcnQuIFdoZW4gdGhpcyB0cmFuc2Zvcm0gaXMgZnVsbHlcbiAgICogc3VwcG9ydGVkIHdlIGNhbiByZW5hbWUgaXQuXG4gICAqL1xuICByZW1vdmU6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBrZXkuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSA9IHVuZGVmaW5lZDtcbiAgfSxcblxuICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4ga2V5Ll9yZWFjdEludGVybmFsSW5zdGFuY2U7XG4gIH0sXG5cbiAgaGFzOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIGtleS5fcmVhY3RJbnRlcm5hbEluc3RhbmNlICE9PSB1bmRlZmluZWQ7XG4gIH0sXG5cbiAgc2V0OiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIGtleS5fcmVhY3RJbnRlcm5hbEluc3RhbmNlID0gdmFsdWU7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEluc3RhbmNlTWFwOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdElzb21vcnBoaWNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdENoaWxkcmVuID0gcmVxdWlyZSgnLi9SZWFjdENoaWxkcmVuJyk7XG52YXIgUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50Jyk7XG52YXIgUmVhY3RDbGFzcyA9IHJlcXVpcmUoJy4vUmVhY3RDbGFzcycpO1xudmFyIFJlYWN0RE9NRmFjdG9yaWVzID0gcmVxdWlyZSgnLi9SZWFjdERPTUZhY3RvcmllcycpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RFbGVtZW50VmFsaWRhdG9yID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnRWYWxpZGF0b3InKTtcbnZhciBSZWFjdFByb3BUeXBlcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZXMnKTtcbnZhciBSZWFjdFZlcnNpb24gPSByZXF1aXJlKCcuL1JlYWN0VmVyc2lvbicpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgb25seUNoaWxkID0gcmVxdWlyZSgnLi9vbmx5Q2hpbGQnKTtcblxudmFyIGNyZWF0ZUVsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudDtcbnZhciBjcmVhdGVGYWN0b3J5ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUZhY3Rvcnk7XG52YXIgY2xvbmVFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNsb25lRWxlbWVudDtcblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgY3JlYXRlRWxlbWVudCA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jcmVhdGVFbGVtZW50O1xuICBjcmVhdGVGYWN0b3J5ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNyZWF0ZUZhY3Rvcnk7XG4gIGNsb25lRWxlbWVudCA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jbG9uZUVsZW1lbnQ7XG59XG5cbnZhciBSZWFjdCA9IHtcblxuICAvLyBNb2Rlcm5cblxuICBDaGlsZHJlbjoge1xuICAgIG1hcDogUmVhY3RDaGlsZHJlbi5tYXAsXG4gICAgZm9yRWFjaDogUmVhY3RDaGlsZHJlbi5mb3JFYWNoLFxuICAgIGNvdW50OiBSZWFjdENoaWxkcmVuLmNvdW50LFxuICAgIHRvQXJyYXk6IFJlYWN0Q2hpbGRyZW4udG9BcnJheSxcbiAgICBvbmx5OiBvbmx5Q2hpbGRcbiAgfSxcblxuICBDb21wb25lbnQ6IFJlYWN0Q29tcG9uZW50LFxuXG4gIGNyZWF0ZUVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnQsXG4gIGNsb25lRWxlbWVudDogY2xvbmVFbGVtZW50LFxuICBpc1ZhbGlkRWxlbWVudDogUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50LFxuXG4gIC8vIENsYXNzaWNcblxuICBQcm9wVHlwZXM6IFJlYWN0UHJvcFR5cGVzLFxuICBjcmVhdGVDbGFzczogUmVhY3RDbGFzcy5jcmVhdGVDbGFzcyxcbiAgY3JlYXRlRmFjdG9yeTogY3JlYXRlRmFjdG9yeSxcbiAgY3JlYXRlTWl4aW46IGZ1bmN0aW9uIChtaXhpbikge1xuICAgIC8vIEN1cnJlbnRseSBhIG5vb3AuIFdpbGwgYmUgdXNlZCB0byB2YWxpZGF0ZSBhbmQgdHJhY2UgbWl4aW5zLlxuICAgIHJldHVybiBtaXhpbjtcbiAgfSxcblxuICAvLyBUaGlzIGxvb2tzIERPTSBzcGVjaWZpYyBidXQgdGhlc2UgYXJlIGFjdHVhbGx5IGlzb21vcnBoaWMgaGVscGVyc1xuICAvLyBzaW5jZSB0aGV5IGFyZSBqdXN0IGdlbmVyYXRpbmcgRE9NIHN0cmluZ3MuXG4gIERPTTogUmVhY3RET01GYWN0b3JpZXMsXG5cbiAgdmVyc2lvbjogUmVhY3RWZXJzaW9uLFxuXG4gIC8vIEhvb2sgZm9yIEpTWCBzcHJlYWQsIGRvbid0IHVzZSB0aGlzIGZvciBhbnl0aGluZyBlbHNlLlxuICBfX3NwcmVhZDogYXNzaWduXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE1hcmt1cENoZWNrc3VtXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWRsZXIzMiA9IHJlcXVpcmUoJy4vYWRsZXIzMicpO1xuXG52YXIgVEFHX0VORCA9IC9cXC8/Pi87XG5cbnZhciBSZWFjdE1hcmt1cENoZWNrc3VtID0ge1xuICBDSEVDS1NVTV9BVFRSX05BTUU6ICdkYXRhLXJlYWN0LWNoZWNrc3VtJyxcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBNYXJrdXAgc3RyaW5nXG4gICAqIEByZXR1cm4ge3N0cmluZ30gTWFya3VwIHN0cmluZyB3aXRoIGNoZWNrc3VtIGF0dHJpYnV0ZSBhdHRhY2hlZFxuICAgKi9cbiAgYWRkQ2hlY2tzdW1Ub01hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCkge1xuICAgIHZhciBjaGVja3N1bSA9IGFkbGVyMzIobWFya3VwKTtcblxuICAgIC8vIEFkZCBjaGVja3N1bSAoaGFuZGxlIGJvdGggcGFyZW50IHRhZ3MgYW5kIHNlbGYtY2xvc2luZyB0YWdzKVxuICAgIHJldHVybiBtYXJrdXAucmVwbGFjZShUQUdfRU5ELCAnICcgKyBSZWFjdE1hcmt1cENoZWNrc3VtLkNIRUNLU1VNX0FUVFJfTkFNRSArICc9XCInICsgY2hlY2tzdW0gKyAnXCIkJicpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIHRvIHVzZVxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgcm9vdCBSZWFjdCBlbGVtZW50XG4gICAqIEByZXR1cm5zIHtib29sZWFufSB3aGV0aGVyIG9yIG5vdCB0aGUgbWFya3VwIGlzIHRoZSBzYW1lXG4gICAqL1xuICBjYW5SZXVzZU1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCwgZWxlbWVudCkge1xuICAgIHZhciBleGlzdGluZ0NoZWNrc3VtID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoUmVhY3RNYXJrdXBDaGVja3N1bS5DSEVDS1NVTV9BVFRSX05BTUUpO1xuICAgIGV4aXN0aW5nQ2hlY2tzdW0gPSBleGlzdGluZ0NoZWNrc3VtICYmIHBhcnNlSW50KGV4aXN0aW5nQ2hlY2tzdW0sIDEwKTtcbiAgICB2YXIgbWFya3VwQ2hlY2tzdW0gPSBhZGxlcjMyKG1hcmt1cCk7XG4gICAgcmV0dXJuIG1hcmt1cENoZWNrc3VtID09PSBleGlzdGluZ0NoZWNrc3VtO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0TWFya3VwQ2hlY2tzdW07IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0TW91bnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBET01Qcm9wZXJ0eSA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHknKTtcbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlcicpO1xudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0gcmVxdWlyZSgnLi9SZWFjdERPTUZlYXR1cmVGbGFncycpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5ID0gcmVxdWlyZSgnLi9SZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnknKTtcbnZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZUhhbmRsZXMnKTtcbnZhciBSZWFjdEluc3RhbmNlTWFwID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlTWFwJyk7XG52YXIgUmVhY3RNYXJrdXBDaGVja3N1bSA9IHJlcXVpcmUoJy4vUmVhY3RNYXJrdXBDaGVja3N1bScpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcbnZhciBSZWFjdFVwZGF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZVF1ZXVlJyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5T2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlPYmplY3QnKTtcbnZhciBjb250YWluc05vZGUgPSByZXF1aXJlKCdmYmpzL2xpYi9jb250YWluc05vZGUnKTtcbnZhciBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgc2V0SW5uZXJIVE1MID0gcmVxdWlyZSgnLi9zZXRJbm5lckhUTUwnKTtcbnZhciBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciB2YWxpZGF0ZURPTU5lc3RpbmcgPSByZXF1aXJlKCcuL3ZhbGlkYXRlRE9NTmVzdGluZycpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBBVFRSX05BTUUgPSBET01Qcm9wZXJ0eS5JRF9BVFRSSUJVVEVfTkFNRTtcbnZhciBub2RlQ2FjaGUgPSB7fTtcblxudmFyIEVMRU1FTlRfTk9ERV9UWVBFID0gMTtcbnZhciBET0NfTk9ERV9UWVBFID0gOTtcbnZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUgPSAxMTtcblxudmFyIG93bmVyRG9jdW1lbnRDb250ZXh0S2V5ID0gJ19fUmVhY3RNb3VudF9vd25lckRvY3VtZW50JCcgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKTtcblxuLyoqIE1hcHBpbmcgZnJvbSByZWFjdFJvb3RJRCB0byBSZWFjdCBjb21wb25lbnQgaW5zdGFuY2UuICovXG52YXIgaW5zdGFuY2VzQnlSZWFjdFJvb3RJRCA9IHt9O1xuXG4vKiogTWFwcGluZyBmcm9tIHJlYWN0Um9vdElEIHRvIGBjb250YWluZXJgIG5vZGVzLiAqL1xudmFyIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEID0ge307XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8qKiBfX0RFVl9fLW9ubHkgbWFwcGluZyBmcm9tIHJlYWN0Um9vdElEIHRvIHJvb3QgZWxlbWVudHMuICovXG4gIHZhciByb290RWxlbWVudHNCeVJlYWN0Um9vdElEID0ge307XG59XG5cbi8vIFVzZWQgdG8gc3RvcmUgYnJlYWR0aC1maXJzdCBzZWFyY2ggc3RhdGUgaW4gZmluZENvbXBvbmVudFJvb3QuXG52YXIgZmluZENvbXBvbmVudFJvb3RSZXVzYWJsZUFycmF5ID0gW107XG5cbi8qKlxuICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBjaGFyYWN0ZXJcbiAqIHRoYXQncyBub3QgY29tbW9uIGJldHdlZW4gdGhlIHR3byBnaXZlbiBzdHJpbmdzLlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIGluZGV4IG9mIHRoZSBjaGFyYWN0ZXIgd2hlcmUgdGhlIHN0cmluZ3MgZGl2ZXJnZVxuICovXG5mdW5jdGlvbiBmaXJzdERpZmZlcmVuY2VJbmRleChzdHJpbmcxLCBzdHJpbmcyKSB7XG4gIHZhciBtaW5MZW4gPSBNYXRoLm1pbihzdHJpbmcxLmxlbmd0aCwgc3RyaW5nMi5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG1pbkxlbjsgaSsrKSB7XG4gICAgaWYgKHN0cmluZzEuY2hhckF0KGkpICE9PSBzdHJpbmcyLmNoYXJBdChpKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHJpbmcxLmxlbmd0aCA9PT0gc3RyaW5nMi5sZW5ndGggPyAtMSA6IG1pbkxlbjtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NRG9jdW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCB0aGF0IG1heSBjb250YWluXG4gKiBhIFJlYWN0IGNvbXBvbmVudFxuICogQHJldHVybiB7Pyp9IERPTSBlbGVtZW50IHRoYXQgbWF5IGhhdmUgdGhlIHJlYWN0Um9vdCBJRCwgb3IgbnVsbC5cbiAqL1xuZnVuY3Rpb24gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcikge1xuICBpZiAoIWNvbnRhaW5lcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DX05PREVfVFlQRSkge1xuICAgIHJldHVybiBjb250YWluZXIuZG9jdW1lbnRFbGVtZW50O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjb250YWluZXIuZmlyc3RDaGlsZDtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRoYXQgbWF5IGNvbnRhaW4gYSBSZWFjdCBjb21wb25lbnQuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBBIFwicmVhY3RSb290XCIgSUQsIGlmIGEgUmVhY3QgY29tcG9uZW50IGlzIHJlbmRlcmVkLlxuICovXG5mdW5jdGlvbiBnZXRSZWFjdFJvb3RJRChjb250YWluZXIpIHtcbiAgdmFyIHJvb3RFbGVtZW50ID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gIHJldHVybiByb290RWxlbWVudCAmJiBSZWFjdE1vdW50LmdldElEKHJvb3RFbGVtZW50KTtcbn1cblxuLyoqXG4gKiBBY2Nlc3Npbmcgbm9kZVtBVFRSX05BTUVdIG9yIGNhbGxpbmcgZ2V0QXR0cmlidXRlKEFUVFJfTkFNRSkgb24gYSBmb3JtXG4gKiBlbGVtZW50IGNhbiByZXR1cm4gaXRzIGNvbnRyb2wgd2hvc2UgbmFtZSBvciBJRCBlcXVhbHMgQVRUUl9OQU1FLiBBbGxcbiAqIERPTSBub2RlcyBzdXBwb3J0IGBnZXRBdHRyaWJ1dGVOb2RlYCBidXQgdGhpcyBjYW4gYWxzbyBnZXQgY2FsbGVkIG9uXG4gKiBvdGhlciBvYmplY3RzIHNvIGp1c3QgcmV0dXJuICcnIGlmIHdlJ3JlIGdpdmVuIHNvbWV0aGluZyBvdGhlciB0aGFuIGFcbiAqIERPTSBub2RlIChzdWNoIGFzIHdpbmRvdykuXG4gKlxuICogQHBhcmFtIHs/RE9NRWxlbWVudHxET01XaW5kb3d8RE9NRG9jdW1lbnR8RE9NVGV4dE5vZGV9IG5vZGUgRE9NIG5vZGUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IElEIG9mIHRoZSBzdXBwbGllZCBgZG9tTm9kZWAuXG4gKi9cbmZ1bmN0aW9uIGdldElEKG5vZGUpIHtcbiAgdmFyIGlkID0gaW50ZXJuYWxHZXRJRChub2RlKTtcbiAgaWYgKGlkKSB7XG4gICAgaWYgKG5vZGVDYWNoZS5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICAgIHZhciBjYWNoZWQgPSBub2RlQ2FjaGVbaWRdO1xuICAgICAgaWYgKGNhY2hlZCAhPT0gbm9kZSkge1xuICAgICAgICAhIWlzVmFsaWQoY2FjaGVkLCBpZCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RNb3VudDogVHdvIHZhbGlkIGJ1dCB1bmVxdWFsIG5vZGVzIHdpdGggdGhlIHNhbWUgYCVzYDogJXMnLCBBVFRSX05BTUUsIGlkKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgbm9kZUNhY2hlW2lkXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGVDYWNoZVtpZF0gPSBub2RlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpZDtcbn1cblxuZnVuY3Rpb24gaW50ZXJuYWxHZXRJRChub2RlKSB7XG4gIC8vIElmIG5vZGUgaXMgc29tZXRoaW5nIGxpa2UgYSB3aW5kb3csIGRvY3VtZW50LCBvciB0ZXh0IG5vZGUsIG5vbmUgb2ZcbiAgLy8gd2hpY2ggc3VwcG9ydCBhdHRyaWJ1dGVzIG9yIGEgLmdldEF0dHJpYnV0ZSBtZXRob2QsIGdyYWNlZnVsbHkgcmV0dXJuXG4gIC8vIHRoZSBlbXB0eSBzdHJpbmcsIGFzIGlmIHRoZSBhdHRyaWJ1dGUgd2VyZSBtaXNzaW5nLlxuICByZXR1cm4gbm9kZSAmJiBub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZShBVFRSX05BTUUpIHx8ICcnO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIFJlYWN0LXNwZWNpZmljIElEIG9mIHRoZSBnaXZlbiBub2RlLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZSBUaGUgRE9NIG5vZGUgd2hvc2UgSUQgd2lsbCBiZSBzZXQuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIHZhbHVlIG9mIHRoZSBJRCBhdHRyaWJ1dGUuXG4gKi9cbmZ1bmN0aW9uIHNldElEKG5vZGUsIGlkKSB7XG4gIHZhciBvbGRJRCA9IGludGVybmFsR2V0SUQobm9kZSk7XG4gIGlmIChvbGRJRCAhPT0gaWQpIHtcbiAgICBkZWxldGUgbm9kZUNhY2hlW29sZElEXTtcbiAgfVxuICBub2RlLnNldEF0dHJpYnV0ZShBVFRSX05BTUUsIGlkKTtcbiAgbm9kZUNhY2hlW2lkXSA9IG5vZGU7XG59XG5cbi8qKlxuICogRmluZHMgdGhlIG5vZGUgd2l0aCB0aGUgc3VwcGxpZWQgUmVhY3QtZ2VuZXJhdGVkIERPTSBJRC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQSBSZWFjdC1nZW5lcmF0ZWQgRE9NIElELlxuICogQHJldHVybiB7RE9NRWxlbWVudH0gRE9NIG5vZGUgd2l0aCB0aGUgc3VwcGxlZCBgaWRgLlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGdldE5vZGUoaWQpIHtcbiAgaWYgKCFub2RlQ2FjaGUuaGFzT3duUHJvcGVydHkoaWQpIHx8ICFpc1ZhbGlkKG5vZGVDYWNoZVtpZF0sIGlkKSkge1xuICAgIG5vZGVDYWNoZVtpZF0gPSBSZWFjdE1vdW50LmZpbmRSZWFjdE5vZGVCeUlEKGlkKTtcbiAgfVxuICByZXR1cm4gbm9kZUNhY2hlW2lkXTtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgbm9kZSB3aXRoIHRoZSBzdXBwbGllZCBwdWJsaWMgUmVhY3QgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHsqfSBpbnN0YW5jZSBBIHB1YmxpYyBSZWFjdCBpbnN0YW5jZS5cbiAqIEByZXR1cm4gez9ET01FbGVtZW50fSBET00gbm9kZSB3aXRoIHRoZSBzdXBwbGVkIGBpZGAuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZUZyb21JbnN0YW5jZShpbnN0YW5jZSkge1xuICB2YXIgaWQgPSBSZWFjdEluc3RhbmNlTWFwLmdldChpbnN0YW5jZSkuX3Jvb3ROb2RlSUQ7XG4gIGlmIChSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkuaXNOdWxsQ29tcG9uZW50SUQoaWQpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKCFub2RlQ2FjaGUuaGFzT3duUHJvcGVydHkoaWQpIHx8ICFpc1ZhbGlkKG5vZGVDYWNoZVtpZF0sIGlkKSkge1xuICAgIG5vZGVDYWNoZVtpZF0gPSBSZWFjdE1vdW50LmZpbmRSZWFjdE5vZGVCeUlEKGlkKTtcbiAgfVxuICByZXR1cm4gbm9kZUNhY2hlW2lkXTtcbn1cblxuLyoqXG4gKiBBIG5vZGUgaXMgXCJ2YWxpZFwiIGlmIGl0IGlzIGNvbnRhaW5lZCBieSBhIGN1cnJlbnRseSBtb3VudGVkIGNvbnRhaW5lci5cbiAqXG4gKiBUaGlzIG1lYW5zIHRoYXQgdGhlIG5vZGUgZG9lcyBub3QgaGF2ZSB0byBiZSBjb250YWluZWQgYnkgYSBkb2N1bWVudCBpblxuICogb3JkZXIgdG8gYmUgY29uc2lkZXJlZCB2YWxpZC5cbiAqXG4gKiBAcGFyYW0gez9ET01FbGVtZW50fSBub2RlIFRoZSBjYW5kaWRhdGUgRE9NIG5vZGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIGV4cGVjdGVkIElEIG9mIHRoZSBub2RlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgbm9kZSBpcyBjb250YWluZWQgYnkgYSBtb3VudGVkIGNvbnRhaW5lci5cbiAqL1xuZnVuY3Rpb24gaXNWYWxpZChub2RlLCBpZCkge1xuICBpZiAobm9kZSkge1xuICAgICEoaW50ZXJuYWxHZXRJRChub2RlKSA9PT0gaWQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0TW91bnQ6IFVuZXhwZWN0ZWQgbW9kaWZpY2F0aW9uIG9mIGAlc2AnLCBBVFRSX05BTUUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBjb250YWluZXIgPSBSZWFjdE1vdW50LmZpbmRSZWFjdENvbnRhaW5lckZvcklEKGlkKTtcbiAgICBpZiAoY29udGFpbmVyICYmIGNvbnRhaW5zTm9kZShjb250YWluZXIsIG5vZGUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ2F1c2VzIHRoZSBjYWNoZSB0byBmb3JnZXQgYWJvdXQgb25lIFJlYWN0LXNwZWNpZmljIElELlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgSUQgdG8gZm9yZ2V0LlxuICovXG5mdW5jdGlvbiBwdXJnZUlEKGlkKSB7XG4gIGRlbGV0ZSBub2RlQ2FjaGVbaWRdO1xufVxuXG52YXIgZGVlcGVzdE5vZGVTb0ZhciA9IG51bGw7XG5mdW5jdGlvbiBmaW5kRGVlcGVzdENhY2hlZEFuY2VzdG9ySW1wbChhbmNlc3RvcklEKSB7XG4gIHZhciBhbmNlc3RvciA9IG5vZGVDYWNoZVthbmNlc3RvcklEXTtcbiAgaWYgKGFuY2VzdG9yICYmIGlzVmFsaWQoYW5jZXN0b3IsIGFuY2VzdG9ySUQpKSB7XG4gICAgZGVlcGVzdE5vZGVTb0ZhciA9IGFuY2VzdG9yO1xuICB9IGVsc2Uge1xuICAgIC8vIFRoaXMgbm9kZSBpc24ndCBwb3B1bGF0ZWQgaW4gdGhlIGNhY2hlLCBzbyBwcmVzdW1hYmx5IG5vbmUgb2YgaXRzXG4gICAgLy8gZGVzY2VuZGFudHMgYXJlLiBCcmVhayBvdXQgb2YgdGhlIGxvb3AuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBkZWVwZXN0IGNhY2hlZCBub2RlIHdob3NlIElEIGlzIGEgcHJlZml4IG9mIGB0YXJnZXRJRGAuXG4gKi9cbmZ1bmN0aW9uIGZpbmREZWVwZXN0Q2FjaGVkQW5jZXN0b3IodGFyZ2V0SUQpIHtcbiAgZGVlcGVzdE5vZGVTb0ZhciA9IG51bGw7XG4gIFJlYWN0SW5zdGFuY2VIYW5kbGVzLnRyYXZlcnNlQW5jZXN0b3JzKHRhcmdldElELCBmaW5kRGVlcGVzdENhY2hlZEFuY2VzdG9ySW1wbCk7XG5cbiAgdmFyIGZvdW5kTm9kZSA9IGRlZXBlc3ROb2RlU29GYXI7XG4gIGRlZXBlc3ROb2RlU29GYXIgPSBudWxsO1xuICByZXR1cm4gZm91bmROb2RlO1xufVxuXG4vKipcbiAqIE1vdW50cyB0aGlzIGNvbXBvbmVudCBhbmQgaW5zZXJ0cyBpdCBpbnRvIHRoZSBET00uXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50SW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIG1vdW50LlxuICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBET00gSUQgb2YgdGhlIHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIG1vdW50IGludG8uXG4gKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3VsZFJldXNlTWFya3VwIElmIHRydWUsIGRvIG5vdCBpbnNlcnQgbWFya3VwXG4gKi9cbmZ1bmN0aW9uIG1vdW50Q29tcG9uZW50SW50b05vZGUoY29tcG9uZW50SW5zdGFuY2UsIHJvb3RJRCwgY29udGFpbmVyLCB0cmFuc2FjdGlvbiwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpIHtcbiAgaWYgKFJlYWN0RE9NRmVhdHVyZUZsYWdzLnVzZUNyZWF0ZUVsZW1lbnQpIHtcbiAgICBjb250ZXh0ID0gYXNzaWduKHt9LCBjb250ZXh0KTtcbiAgICBpZiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NfTk9ERV9UWVBFKSB7XG4gICAgICBjb250ZXh0W293bmVyRG9jdW1lbnRDb250ZXh0S2V5XSA9IGNvbnRhaW5lcjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGV4dFtvd25lckRvY3VtZW50Q29udGV4dEtleV0gPSBjb250YWluZXIub3duZXJEb2N1bWVudDtcbiAgICB9XG4gIH1cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoY29udGV4dCA9PT0gZW1wdHlPYmplY3QpIHtcbiAgICAgIGNvbnRleHQgPSB7fTtcbiAgICB9XG4gICAgdmFyIHRhZyA9IGNvbnRhaW5lci5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnRleHRbdmFsaWRhdGVET01OZXN0aW5nLmFuY2VzdG9ySW5mb0NvbnRleHRLZXldID0gdmFsaWRhdGVET01OZXN0aW5nLnVwZGF0ZWRBbmNlc3RvckluZm8obnVsbCwgdGFnLCBudWxsKTtcbiAgfVxuICB2YXIgbWFya3VwID0gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgY29tcG9uZW50SW5zdGFuY2UuX3JlbmRlcmVkQ29tcG9uZW50Ll90b3BMZXZlbFdyYXBwZXIgPSBjb21wb25lbnRJbnN0YW5jZTtcbiAgUmVhY3RNb3VudC5fbW91bnRJbWFnZUludG9Ob2RlKG1hcmt1cCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgdHJhbnNhY3Rpb24pO1xufVxuXG4vKipcbiAqIEJhdGNoZWQgbW91bnQuXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50SW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIG1vdW50LlxuICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBET00gSUQgb2YgdGhlIHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIG1vdW50IGludG8uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3VsZFJldXNlTWFya3VwIElmIHRydWUsIGRvIG5vdCBpbnNlcnQgbWFya3VwXG4gKi9cbmZ1bmN0aW9uIGJhdGNoZWRNb3VudENvbXBvbmVudEludG9Ob2RlKGNvbXBvbmVudEluc3RhbmNlLCByb290SUQsIGNvbnRhaW5lciwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpIHtcbiAgdmFyIHRyYW5zYWN0aW9uID0gUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKFxuICAvKiBmb3JjZUhUTUwgKi9zaG91bGRSZXVzZU1hcmt1cCk7XG4gIHRyYW5zYWN0aW9uLnBlcmZvcm0obW91bnRDb21wb25lbnRJbnRvTm9kZSwgbnVsbCwgY29tcG9uZW50SW5zdGFuY2UsIHJvb3RJRCwgY29udGFpbmVyLCB0cmFuc2FjdGlvbiwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpO1xuICBSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5yZWxlYXNlKHRyYW5zYWN0aW9uKTtcbn1cblxuLyoqXG4gKiBVbm1vdW50cyBhIGNvbXBvbmVudCBhbmQgcmVtb3ZlcyBpdCBmcm9tIHRoZSBET00uXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gaW5zdGFuY2UgUmVhY3QgY29tcG9uZW50IGluc3RhbmNlLlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gdW5tb3VudCBmcm9tLlxuICogQGZpbmFsXG4gKiBAaW50ZXJuYWxcbiAqIEBzZWUge1JlYWN0TW91bnQudW5tb3VudENvbXBvbmVudEF0Tm9kZX1cbiAqL1xuZnVuY3Rpb24gdW5tb3VudENvbXBvbmVudEZyb21Ob2RlKGluc3RhbmNlLCBjb250YWluZXIpIHtcbiAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQoaW5zdGFuY2UpO1xuXG4gIGlmIChjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUpIHtcbiAgICBjb250YWluZXIgPSBjb250YWluZXIuZG9jdW1lbnRFbGVtZW50O1xuICB9XG5cbiAgLy8gaHR0cDovL2pzcGVyZi5jb20vZW1wdHlpbmctYS1ub2RlXG4gIHdoaWxlIChjb250YWluZXIubGFzdENoaWxkKSB7XG4gICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuICB9XG59XG5cbi8qKlxuICogVHJ1ZSBpZiB0aGUgc3VwcGxpZWQgRE9NIG5vZGUgaGFzIGEgZGlyZWN0IFJlYWN0LXJlbmRlcmVkIGNoaWxkIHRoYXQgaXNcbiAqIG5vdCBhIFJlYWN0IHJvb3QgZWxlbWVudC4gVXNlZnVsIGZvciB3YXJuaW5nIGluIGByZW5kZXJgLFxuICogYHVubW91bnRDb21wb25lbnRBdE5vZGVgLCBldGMuXG4gKlxuICogQHBhcmFtIHs/RE9NRWxlbWVudH0gbm9kZSBUaGUgY2FuZGlkYXRlIERPTSBub2RlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgRE9NIGVsZW1lbnQgY29udGFpbnMgYSBkaXJlY3QgY2hpbGQgdGhhdCB3YXNcbiAqIHJlbmRlcmVkIGJ5IFJlYWN0IGJ1dCBpcyBub3QgYSByb290IGVsZW1lbnQuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gaGFzTm9uUm9vdFJlYWN0Q2hpbGQobm9kZSkge1xuICB2YXIgcmVhY3RSb290SUQgPSBnZXRSZWFjdFJvb3RJRChub2RlKTtcbiAgcmV0dXJuIHJlYWN0Um9vdElEID8gcmVhY3RSb290SUQgIT09IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChyZWFjdFJvb3RJRCkgOiBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBmaXJzdCAoZGVlcGVzdCkgYW5jZXN0b3Igb2YgYSBub2RlIHdoaWNoIGlzIHJlbmRlcmVkIGJ5IHRoaXMgY29weVxuICogb2YgUmVhY3QuXG4gKi9cbmZ1bmN0aW9uIGZpbmRGaXJzdFJlYWN0RE9NSW1wbChub2RlKSB7XG4gIC8vIFRoaXMgbm9kZSBtaWdodCBiZSBmcm9tIGFub3RoZXIgUmVhY3QgaW5zdGFuY2UsIHNvIHdlIG1ha2Ugc3VyZSBub3QgdG9cbiAgLy8gZXhhbWluZSB0aGUgbm9kZSBjYWNoZSBoZXJlXG4gIGZvciAoOyBub2RlICYmIG5vZGUucGFyZW50Tm9kZSAhPT0gbm9kZTsgbm9kZSA9IG5vZGUucGFyZW50Tm9kZSkge1xuICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSAxKSB7XG4gICAgICAvLyBOb3QgYSBET01FbGVtZW50LCB0aGVyZWZvcmUgbm90IGEgUmVhY3QgY29tcG9uZW50XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFyIG5vZGVJRCA9IGludGVybmFsR2V0SUQobm9kZSk7XG4gICAgaWYgKCFub2RlSUQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YXIgcmVhY3RSb290SUQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQobm9kZUlEKTtcblxuICAgIC8vIElmIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEIGNvbnRhaW5zIHRoZSBjb250YWluZXIgd2UgZmluZCBieSBjcmF3bGluZyB1cFxuICAgIC8vIHRoZSB0cmVlLCB3ZSBrbm93IHRoYXQgdGhpcyBpbnN0YW5jZSBvZiBSZWFjdCByZW5kZXJlZCB0aGUgbm9kZS5cbiAgICAvLyBuYi4gaXNWYWxpZCdzIHN0cmF0ZWd5ICh3aXRoIGNvbnRhaW5zTm9kZSkgZG9lcyBub3Qgd29yayBiZWNhdXNlIHJlbmRlclxuICAgIC8vIHRyZWVzIG1heSBiZSBuZXN0ZWQgYW5kIHdlIGRvbid0IHdhbnQgYSBmYWxzZSBwb3NpdGl2ZSBpbiB0aGF0IGNhc2UuXG4gICAgdmFyIGN1cnJlbnQgPSBub2RlO1xuICAgIHZhciBsYXN0SUQ7XG4gICAgZG8ge1xuICAgICAgbGFzdElEID0gaW50ZXJuYWxHZXRJRChjdXJyZW50KTtcbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudE5vZGU7XG4gICAgICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG4gICAgICAgIC8vIFRoZSBwYXNzZWQtaW4gbm9kZSBoYXMgYmVlbiBkZXRhY2hlZCBmcm9tIHRoZSBjb250YWluZXIgaXQgd2FzXG4gICAgICAgIC8vIG9yaWdpbmFsbHkgcmVuZGVyZWQgaW50by5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSB3aGlsZSAobGFzdElEICE9PSByZWFjdFJvb3RJRCk7XG5cbiAgICBpZiAoY3VycmVudCA9PT0gY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdKSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogVGVtcG9yYXJ5ICg/KSBoYWNrIHNvIHRoYXQgd2UgY2FuIHN0b3JlIGFsbCB0b3AtbGV2ZWwgcGVuZGluZyB1cGRhdGVzIG9uXG4gKiBjb21wb3NpdGVzIGluc3RlYWQgb2YgaGF2aW5nIHRvIHdvcnJ5IGFib3V0IGRpZmZlcmVudCB0eXBlcyBvZiBjb21wb25lbnRzXG4gKiBoZXJlLlxuICovXG52YXIgVG9wTGV2ZWxXcmFwcGVyID0gZnVuY3Rpb24gKCkge307XG5Ub3BMZXZlbFdyYXBwZXIucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQgPSB7fTtcbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIFRvcExldmVsV3JhcHBlci5kaXNwbGF5TmFtZSA9ICdUb3BMZXZlbFdyYXBwZXInO1xufVxuVG9wTGV2ZWxXcmFwcGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHRoaXMucHJvcHMgaXMgYWN0dWFsbHkgYSBSZWFjdEVsZW1lbnRcbiAgcmV0dXJuIHRoaXMucHJvcHM7XG59O1xuXG4vKipcbiAqIE1vdW50aW5nIGlzIHRoZSBwcm9jZXNzIG9mIGluaXRpYWxpemluZyBhIFJlYWN0IGNvbXBvbmVudCBieSBjcmVhdGluZyBpdHNcbiAqIHJlcHJlc2VudGF0aXZlIERPTSBlbGVtZW50cyBhbmQgaW5zZXJ0aW5nIHRoZW0gaW50byBhIHN1cHBsaWVkIGBjb250YWluZXJgLlxuICogQW55IHByaW9yIGNvbnRlbnQgaW5zaWRlIGBjb250YWluZXJgIGlzIGRlc3Ryb3llZCBpbiB0aGUgcHJvY2Vzcy5cbiAqXG4gKiAgIFJlYWN0TW91bnQucmVuZGVyKFxuICogICAgIGNvbXBvbmVudCxcbiAqICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJylcbiAqICAgKTtcbiAqXG4gKiAgIDxkaXYgaWQ9XCJjb250YWluZXJcIj4gICAgICAgICAgICAgICAgICAgPC0tIFN1cHBsaWVkIGBjb250YWluZXJgLlxuICogICAgIDxkaXYgZGF0YS1yZWFjdGlkPVwiLjNcIj4gICAgICAgICAgICAgIDwtLSBSZW5kZXJlZCByZWFjdFJvb3Qgb2YgUmVhY3RcbiAqICAgICAgIC8vIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9kaXY+XG4gKlxuICogSW5zaWRlIG9mIGBjb250YWluZXJgLCB0aGUgZmlyc3QgZWxlbWVudCByZW5kZXJlZCBpcyB0aGUgXCJyZWFjdFJvb3RcIi5cbiAqL1xudmFyIFJlYWN0TW91bnQgPSB7XG5cbiAgVG9wTGV2ZWxXcmFwcGVyOiBUb3BMZXZlbFdyYXBwZXIsXG5cbiAgLyoqIEV4cG9zZWQgZm9yIGRlYnVnZ2luZyBwdXJwb3NlcyAqKi9cbiAgX2luc3RhbmNlc0J5UmVhY3RSb290SUQ6IGluc3RhbmNlc0J5UmVhY3RSb290SUQsXG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgYSBob29rIHByb3ZpZGVkIHRvIHN1cHBvcnQgcmVuZGVyaW5nIFJlYWN0IGNvbXBvbmVudHMgd2hpbGVcbiAgICogZW5zdXJpbmcgdGhhdCB0aGUgYXBwYXJlbnQgc2Nyb2xsIHBvc2l0aW9uIG9mIGl0cyBgY29udGFpbmVyYCBkb2VzIG5vdFxuICAgKiBjaGFuZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIFRoZSBgY29udGFpbmVyYCBiZWluZyByZW5kZXJlZCBpbnRvLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSByZW5kZXJDYWxsYmFjayBUaGlzIG11c3QgYmUgY2FsbGVkIG9uY2UgdG8gZG8gdGhlIHJlbmRlci5cbiAgICovXG4gIHNjcm9sbE1vbml0b3I6IGZ1bmN0aW9uIChjb250YWluZXIsIHJlbmRlckNhbGxiYWNrKSB7XG4gICAgcmVuZGVyQ2FsbGJhY2soKTtcbiAgfSxcblxuICAvKipcbiAgICogVGFrZSBhIGNvbXBvbmVudCB0aGF0J3MgYWxyZWFkeSBtb3VudGVkIGludG8gdGhlIERPTSBhbmQgcmVwbGFjZSBpdHMgcHJvcHNcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gcHJldkNvbXBvbmVudCBjb21wb25lbnQgaW5zdGFuY2UgYWxyZWFkeSBpbiB0aGUgRE9NXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBjb21wb25lbnQgaW5zdGFuY2UgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIGNvbnRhaW5lciB0byByZW5kZXIgaW50b1xuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIGNvbXBsZXRpb25cbiAgICovXG4gIF91cGRhdGVSb290Q29tcG9uZW50OiBmdW5jdGlvbiAocHJldkNvbXBvbmVudCwgbmV4dEVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHtcbiAgICBSZWFjdE1vdW50LnNjcm9sbE1vbml0b3IoY29udGFpbmVyLCBmdW5jdGlvbiAoKSB7XG4gICAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVFbGVtZW50SW50ZXJuYWwocHJldkNvbXBvbmVudCwgbmV4dEVsZW1lbnQpO1xuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZUNhbGxiYWNrSW50ZXJuYWwocHJldkNvbXBvbmVudCwgY2FsbGJhY2spO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFJlY29yZCB0aGUgcm9vdCBlbGVtZW50IGluIGNhc2UgaXQgbGF0ZXIgZ2V0cyB0cmFuc3BsYW50ZWQuXG4gICAgICByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW2dldFJlYWN0Um9vdElEKGNvbnRhaW5lcildID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZDb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgY29tcG9uZW50IGludG8gdGhlIGluc3RhbmNlIG1hcCBhbmQgc3RhcnRzIHNjcm9sbCB2YWx1ZVxuICAgKiBtb25pdG9yaW5nXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IG5leHRDb21wb25lbnQgY29tcG9uZW50IGluc3RhbmNlIHRvIHJlbmRlclxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBjb250YWluZXIgdG8gcmVuZGVyIGludG9cbiAgICogQHJldHVybiB7c3RyaW5nfSByZWFjdFJvb3QgSUQgcHJlZml4XG4gICAqL1xuICBfcmVnaXN0ZXJDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0Q29tcG9uZW50LCBjb250YWluZXIpIHtcbiAgICAhKGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdfcmVnaXN0ZXJDb21wb25lbnQoLi4uKTogVGFyZ2V0IGNvbnRhaW5lciBpcyBub3QgYSBET00gZWxlbWVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuZW5zdXJlU2Nyb2xsVmFsdWVNb25pdG9yaW5nKCk7XG5cbiAgICB2YXIgcmVhY3RSb290SUQgPSBSZWFjdE1vdW50LnJlZ2lzdGVyQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0gPSBuZXh0Q29tcG9uZW50O1xuICAgIHJldHVybiByZWFjdFJvb3RJRDtcbiAgfSxcblxuICAvKipcbiAgICogUmVuZGVyIGEgbmV3IGNvbXBvbmVudCBpbnRvIHRoZSBET00uXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBlbGVtZW50IHRvIHJlbmRlclxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBjb250YWluZXIgdG8gcmVuZGVyIGludG9cbiAgICogQHBhcmFtIHtib29sZWFufSBzaG91bGRSZXVzZU1hcmt1cCBpZiB3ZSBzaG91bGQgc2tpcCB0aGUgbWFya3VwIGluc2VydGlvblxuICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gbmV4dENvbXBvbmVudFxuICAgKi9cbiAgX3JlbmRlck5ld1Jvb3RDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0RWxlbWVudCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgY29udGV4dCkge1xuICAgIC8vIFZhcmlvdXMgcGFydHMgb2Ygb3VyIGNvZGUgKHN1Y2ggYXMgUmVhY3RDb21wb3NpdGVDb21wb25lbnQnc1xuICAgIC8vIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQpIGFzc3VtZSB0aGF0IGNhbGxzIHRvIHJlbmRlciBhcmVuJ3QgbmVzdGVkO1xuICAgIC8vIHZlcmlmeSB0aGF0IHRoYXQncyB0aGUgY2FzZS5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID09IG51bGwsICdfcmVuZGVyTmV3Um9vdENvbXBvbmVudCgpOiBSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uICcgKyAnb2YgcHJvcHMgYW5kIHN0YXRlOyB0cmlnZ2VyaW5nIG5lc3RlZCBjb21wb25lbnQgdXBkYXRlcyBmcm9tICcgKyAncmVuZGVyIGlzIG5vdCBhbGxvd2VkLiBJZiBuZWNlc3NhcnksIHRyaWdnZXIgbmVzdGVkIHVwZGF0ZXMgaW4gJyArICdjb21wb25lbnREaWRVcGRhdGUuIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mICVzLicsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgJiYgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudC5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgY29tcG9uZW50SW5zdGFuY2UgPSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KG5leHRFbGVtZW50LCBudWxsKTtcbiAgICB2YXIgcmVhY3RSb290SUQgPSBSZWFjdE1vdW50Ll9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSwgY29udGFpbmVyKTtcblxuICAgIC8vIFRoZSBpbml0aWFsIHJlbmRlciBpcyBzeW5jaHJvbm91cyBidXQgYW55IHVwZGF0ZXMgdGhhdCBoYXBwZW4gZHVyaW5nXG4gICAgLy8gcmVuZGVyaW5nLCBpbiBjb21wb25lbnRXaWxsTW91bnQgb3IgY29tcG9uZW50RGlkTW91bnQsIHdpbGwgYmUgYmF0Y2hlZFxuICAgIC8vIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBiYXRjaGluZyBzdHJhdGVneS5cblxuICAgIFJlYWN0VXBkYXRlcy5iYXRjaGVkVXBkYXRlcyhiYXRjaGVkTW91bnRDb21wb25lbnRJbnRvTm9kZSwgY29tcG9uZW50SW5zdGFuY2UsIHJlYWN0Um9vdElELCBjb250YWluZXIsIHNob3VsZFJldXNlTWFya3VwLCBjb250ZXh0KTtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBSZWNvcmQgdGhlIHJvb3QgZWxlbWVudCBpbiBjYXNlIGl0IGxhdGVyIGdldHMgdHJhbnNwbGFudGVkLlxuICAgICAgcm9vdEVsZW1lbnRzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0gPSBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29tcG9uZW50SW5zdGFuY2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgYSBSZWFjdCBjb21wb25lbnQgaW50byB0aGUgRE9NIGluIHRoZSBzdXBwbGllZCBgY29udGFpbmVyYC5cbiAgICpcbiAgICogSWYgdGhlIFJlYWN0IGNvbXBvbmVudCB3YXMgcHJldmlvdXNseSByZW5kZXJlZCBpbnRvIGBjb250YWluZXJgLCB0aGlzIHdpbGxcbiAgICogcGVyZm9ybSBhbiB1cGRhdGUgb24gaXQgYW5kIG9ubHkgbXV0YXRlIHRoZSBET00gYXMgbmVjZXNzYXJ5IHRvIHJlZmxlY3QgdGhlXG4gICAqIGxhdGVzdCBSZWFjdCBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IHBhcmVudENvbXBvbmVudCBUaGUgY29uY2VwdHVhbCBwYXJlbnQgb2YgdGhpcyByZW5kZXIgdHJlZS5cbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50IENvbXBvbmVudCBlbGVtZW50IHRvIHJlbmRlci5cbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gcmVuZGVyIGludG8uXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gY29tcGxldGlvblxuICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gQ29tcG9uZW50IGluc3RhbmNlIHJlbmRlcmVkIGluIGBjb250YWluZXJgLlxuICAgKi9cbiAgcmVuZGVyU3VidHJlZUludG9Db250YWluZXI6IGZ1bmN0aW9uIChwYXJlbnRDb21wb25lbnQsIG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XG4gICAgIShwYXJlbnRDb21wb25lbnQgIT0gbnVsbCAmJiBwYXJlbnRDb21wb25lbnQuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSAhPSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdwYXJlbnRDb21wb25lbnQgbXVzdCBiZSBhIHZhbGlkIFJlYWN0IENvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gUmVhY3RNb3VudC5fcmVuZGVyU3VidHJlZUludG9Db250YWluZXIocGFyZW50Q29tcG9uZW50LCBuZXh0RWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyOiBmdW5jdGlvbiAocGFyZW50Q29tcG9uZW50LCBuZXh0RWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuICAgICFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQobmV4dEVsZW1lbnQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0RE9NLnJlbmRlcigpOiBJbnZhbGlkIGNvbXBvbmVudCBlbGVtZW50LiVzJywgdHlwZW9mIG5leHRFbGVtZW50ID09PSAnc3RyaW5nJyA/ICcgSW5zdGVhZCBvZiBwYXNzaW5nIGFuIGVsZW1lbnQgc3RyaW5nLCBtYWtlIHN1cmUgdG8gaW5zdGFudGlhdGUgJyArICdpdCBieSBwYXNzaW5nIGl0IHRvIFJlYWN0LmNyZWF0ZUVsZW1lbnQuJyA6IHR5cGVvZiBuZXh0RWxlbWVudCA9PT0gJ2Z1bmN0aW9uJyA/ICcgSW5zdGVhZCBvZiBwYXNzaW5nIGEgY29tcG9uZW50IGNsYXNzLCBtYWtlIHN1cmUgdG8gaW5zdGFudGlhdGUgJyArICdpdCBieSBwYXNzaW5nIGl0IHRvIFJlYWN0LmNyZWF0ZUVsZW1lbnQuJyA6XG4gICAgLy8gQ2hlY2sgaWYgaXQgcXVhY2tzIGxpa2UgYW4gZWxlbWVudFxuICAgIG5leHRFbGVtZW50ICE9IG51bGwgJiYgbmV4dEVsZW1lbnQucHJvcHMgIT09IHVuZGVmaW5lZCA/ICcgVGhpcyBtYXkgYmUgY2F1c2VkIGJ5IHVuaW50ZW50aW9uYWxseSBsb2FkaW5nIHR3byBpbmRlcGVuZGVudCAnICsgJ2NvcGllcyBvZiBSZWFjdC4nIDogJycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFjb250YWluZXIgfHwgIWNvbnRhaW5lci50YWdOYW1lIHx8IGNvbnRhaW5lci50YWdOYW1lLnRvVXBwZXJDYXNlKCkgIT09ICdCT0RZJywgJ3JlbmRlcigpOiBSZW5kZXJpbmcgY29tcG9uZW50cyBkaXJlY3RseSBpbnRvIGRvY3VtZW50LmJvZHkgaXMgJyArICdkaXNjb3VyYWdlZCwgc2luY2UgaXRzIGNoaWxkcmVuIGFyZSBvZnRlbiBtYW5pcHVsYXRlZCBieSB0aGlyZC1wYXJ0eSAnICsgJ3NjcmlwdHMgYW5kIGJyb3dzZXIgZXh0ZW5zaW9ucy4gVGhpcyBtYXkgbGVhZCB0byBzdWJ0bGUgJyArICdyZWNvbmNpbGlhdGlvbiBpc3N1ZXMuIFRyeSByZW5kZXJpbmcgaW50byBhIGNvbnRhaW5lciBlbGVtZW50IGNyZWF0ZWQgJyArICdmb3IgeW91ciBhcHAuJykgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgbmV4dFdyYXBwZWRFbGVtZW50ID0gbmV3IFJlYWN0RWxlbWVudChUb3BMZXZlbFdyYXBwZXIsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG5leHRFbGVtZW50KTtcblxuICAgIHZhciBwcmV2Q29tcG9uZW50ID0gaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtnZXRSZWFjdFJvb3RJRChjb250YWluZXIpXTtcblxuICAgIGlmIChwcmV2Q29tcG9uZW50KSB7XG4gICAgICB2YXIgcHJldldyYXBwZWRFbGVtZW50ID0gcHJldkNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQ7XG4gICAgICB2YXIgcHJldkVsZW1lbnQgPSBwcmV2V3JhcHBlZEVsZW1lbnQucHJvcHM7XG4gICAgICBpZiAoc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KSkge1xuICAgICAgICB2YXIgcHVibGljSW5zdCA9IHByZXZDb21wb25lbnQuX3JlbmRlcmVkQ29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCk7XG4gICAgICAgIHZhciB1cGRhdGVkQ2FsbGJhY2sgPSBjYWxsYmFjayAmJiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2FsbGJhY2suY2FsbChwdWJsaWNJbnN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVhY3RNb3VudC5fdXBkYXRlUm9vdENvbXBvbmVudChwcmV2Q29tcG9uZW50LCBuZXh0V3JhcHBlZEVsZW1lbnQsIGNvbnRhaW5lciwgdXBkYXRlZENhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHB1YmxpY0luc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBSZWFjdE1vdW50LnVubW91bnRDb21wb25lbnRBdE5vZGUoY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVhY3RSb290RWxlbWVudCA9IGdldFJlYWN0Um9vdEVsZW1lbnRJbkNvbnRhaW5lcihjb250YWluZXIpO1xuICAgIHZhciBjb250YWluZXJIYXNSZWFjdE1hcmt1cCA9IHJlYWN0Um9vdEVsZW1lbnQgJiYgISFpbnRlcm5hbEdldElEKHJlYWN0Um9vdEVsZW1lbnQpO1xuICAgIHZhciBjb250YWluZXJIYXNOb25Sb290UmVhY3RDaGlsZCA9IGhhc05vblJvb3RSZWFjdENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWNvbnRhaW5lckhhc05vblJvb3RSZWFjdENoaWxkLCAncmVuZGVyKC4uLik6IFJlcGxhY2luZyBSZWFjdC1yZW5kZXJlZCBjaGlsZHJlbiB3aXRoIGEgbmV3IHJvb3QgJyArICdjb21wb25lbnQuIElmIHlvdSBpbnRlbmRlZCB0byB1cGRhdGUgdGhlIGNoaWxkcmVuIG9mIHRoaXMgbm9kZSwgJyArICd5b3Ugc2hvdWxkIGluc3RlYWQgaGF2ZSB0aGUgZXhpc3RpbmcgY2hpbGRyZW4gdXBkYXRlIHRoZWlyIHN0YXRlICcgKyAnYW5kIHJlbmRlciB0aGUgbmV3IGNvbXBvbmVudHMgaW5zdGVhZCBvZiBjYWxsaW5nIFJlYWN0RE9NLnJlbmRlci4nKSA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKCFjb250YWluZXJIYXNSZWFjdE1hcmt1cCB8fCByZWFjdFJvb3RFbGVtZW50Lm5leHRTaWJsaW5nKSB7XG4gICAgICAgIHZhciByb290RWxlbWVudFNpYmxpbmcgPSByZWFjdFJvb3RFbGVtZW50O1xuICAgICAgICB3aGlsZSAocm9vdEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgICAgICAgaWYgKGludGVybmFsR2V0SUQocm9vdEVsZW1lbnRTaWJsaW5nKSkge1xuICAgICAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdyZW5kZXIoKTogVGFyZ2V0IG5vZGUgaGFzIG1hcmt1cCByZW5kZXJlZCBieSBSZWFjdCwgYnV0IHRoZXJlICcgKyAnYXJlIHVucmVsYXRlZCBub2RlcyBhcyB3ZWxsLiBUaGlzIGlzIG1vc3QgY29tbW9ubHkgY2F1c2VkIGJ5ICcgKyAnd2hpdGUtc3BhY2UgaW5zZXJ0ZWQgYXJvdW5kIHNlcnZlci1yZW5kZXJlZCBtYXJrdXAuJykgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgcm9vdEVsZW1lbnRTaWJsaW5nID0gcm9vdEVsZW1lbnRTaWJsaW5nLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNob3VsZFJldXNlTWFya3VwID0gY29udGFpbmVySGFzUmVhY3RNYXJrdXAgJiYgIXByZXZDb21wb25lbnQgJiYgIWNvbnRhaW5lckhhc05vblJvb3RSZWFjdENoaWxkO1xuICAgIHZhciBjb21wb25lbnQgPSBSZWFjdE1vdW50Ll9yZW5kZXJOZXdSb290Q29tcG9uZW50KG5leHRXcmFwcGVkRWxlbWVudCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgcGFyZW50Q29tcG9uZW50ICE9IG51bGwgPyBwYXJlbnRDb21wb25lbnQuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZS5fcHJvY2Vzc0NoaWxkQ29udGV4dChwYXJlbnRDb21wb25lbnQuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZS5fY29udGV4dCkgOiBlbXB0eU9iamVjdCkuX3JlbmRlcmVkQ29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCk7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjay5jYWxsKGNvbXBvbmVudCk7XG4gICAgfVxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgYSBSZWFjdCBjb21wb25lbnQgaW50byB0aGUgRE9NIGluIHRoZSBzdXBwbGllZCBgY29udGFpbmVyYC5cbiAgICpcbiAgICogSWYgdGhlIFJlYWN0IGNvbXBvbmVudCB3YXMgcHJldmlvdXNseSByZW5kZXJlZCBpbnRvIGBjb250YWluZXJgLCB0aGlzIHdpbGxcbiAgICogcGVyZm9ybSBhbiB1cGRhdGUgb24gaXQgYW5kIG9ubHkgbXV0YXRlIHRoZSBET00gYXMgbmVjZXNzYXJ5IHRvIHJlZmxlY3QgdGhlXG4gICAqIGxhdGVzdCBSZWFjdCBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudCBDb21wb25lbnQgZWxlbWVudCB0byByZW5kZXIuXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIHJlbmRlciBpbnRvLlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIGNvbXBsZXRpb25cbiAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9IENvbXBvbmVudCBpbnN0YW5jZSByZW5kZXJlZCBpbiBgY29udGFpbmVyYC5cbiAgICovXG4gIHJlbmRlcjogZnVuY3Rpb24gKG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFJlYWN0TW91bnQuX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyKG51bGwsIG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgY29udGFpbmVyIG5vZGUgaW50byB3aGljaCBSZWFjdCBjb21wb25lbnRzIHdpbGwgYmUgcmVuZGVyZWQuXG4gICAqIFRoaXMgYWxzbyBjcmVhdGVzIHRoZSBcInJlYWN0Um9vdFwiIElEIHRoYXQgd2lsbCBiZSBhc3NpZ25lZCB0byB0aGUgZWxlbWVudFxuICAgKiByZW5kZXJlZCB3aXRoaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRvIHJlZ2lzdGVyIGFzIGEgY29udGFpbmVyLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBcInJlYWN0Um9vdFwiIElEIG9mIGVsZW1lbnRzIHJlbmRlcmVkIHdpdGhpbi5cbiAgICovXG4gIHJlZ2lzdGVyQ29udGFpbmVyOiBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgdmFyIHJlYWN0Um9vdElEID0gZ2V0UmVhY3RSb290SUQoY29udGFpbmVyKTtcbiAgICBpZiAocmVhY3RSb290SUQpIHtcbiAgICAgIC8vIElmIG9uZSBleGlzdHMsIG1ha2Ugc3VyZSBpdCBpcyBhIHZhbGlkIFwicmVhY3RSb290XCIgSUQuXG4gICAgICByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChyZWFjdFJvb3RJRCk7XG4gICAgfVxuICAgIGlmICghcmVhY3RSb290SUQpIHtcbiAgICAgIC8vIE5vIHZhbGlkIFwicmVhY3RSb290XCIgSUQgZm91bmQsIGNyZWF0ZSBvbmUuXG4gICAgICByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0Um9vdElEKCk7XG4gICAgfVxuICAgIGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXSA9IGNvbnRhaW5lcjtcbiAgICByZXR1cm4gcmVhY3RSb290SUQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVubW91bnRzIGFuZCBkZXN0cm95cyB0aGUgUmVhY3QgY29tcG9uZW50IHJlbmRlcmVkIGluIHRoZSBgY29udGFpbmVyYC5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgY29udGFpbmluZyBhIFJlYWN0IGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBhIGNvbXBvbmVudCB3YXMgZm91bmQgaW4gYW5kIHVubW91bnRlZCBmcm9tXG4gICAqICAgICAgICAgICAgICAgICAgIGBjb250YWluZXJgXG4gICAqL1xuICB1bm1vdW50Q29tcG9uZW50QXROb2RlOiBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgLy8gVmFyaW91cyBwYXJ0cyBvZiBvdXIgY29kZSAoc3VjaCBhcyBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCdzXG4gICAgLy8gX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCkgYXNzdW1lIHRoYXQgY2FsbHMgdG8gcmVuZGVyIGFyZW4ndCBuZXN0ZWQ7XG4gICAgLy8gdmVyaWZ5IHRoYXQgdGhhdCdzIHRoZSBjYXNlLiAoU3RyaWN0bHkgc3BlYWtpbmcsIHVubW91bnRpbmcgd29uJ3QgY2F1c2UgYVxuICAgIC8vIHJlbmRlciBidXQgd2Ugc3RpbGwgZG9uJ3QgZXhwZWN0IHRvIGJlIGluIGEgcmVuZGVyIGNhbGwgaGVyZS4pXG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9PSBudWxsLCAndW5tb3VudENvbXBvbmVudEF0Tm9kZSgpOiBSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uICcgKyAnb2YgcHJvcHMgYW5kIHN0YXRlOyB0cmlnZ2VyaW5nIG5lc3RlZCBjb21wb25lbnQgdXBkYXRlcyBmcm9tIHJlbmRlciAnICsgJ2lzIG5vdCBhbGxvd2VkLiBJZiBuZWNlc3NhcnksIHRyaWdnZXIgbmVzdGVkIHVwZGF0ZXMgaW4gJyArICdjb21wb25lbnREaWRVcGRhdGUuIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mICVzLicsIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgJiYgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudC5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG5cbiAgICAhKGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd1bm1vdW50Q29tcG9uZW50QXROb2RlKC4uLik6IFRhcmdldCBjb250YWluZXIgaXMgbm90IGEgRE9NIGVsZW1lbnQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIHJlYWN0Um9vdElEID0gZ2V0UmVhY3RSb290SUQoY29udGFpbmVyKTtcbiAgICB2YXIgY29tcG9uZW50ID0gaW5zdGFuY2VzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF07XG4gICAgaWYgKCFjb21wb25lbnQpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBub2RlIGJlaW5nIHVubW91bnRlZCB3YXMgcmVuZGVyZWQgYnkgUmVhY3QsIGJ1dCBpc24ndCBhXG4gICAgICAvLyByb290IG5vZGUuXG4gICAgICB2YXIgY29udGFpbmVySGFzTm9uUm9vdFJlYWN0Q2hpbGQgPSBoYXNOb25Sb290UmVhY3RDaGlsZChjb250YWluZXIpO1xuXG4gICAgICAvLyBDaGVjayBpZiB0aGUgY29udGFpbmVyIGl0c2VsZiBpcyBhIFJlYWN0IHJvb3Qgbm9kZS5cbiAgICAgIHZhciBjb250YWluZXJJRCA9IGludGVybmFsR2V0SUQoY29udGFpbmVyKTtcbiAgICAgIHZhciBpc0NvbnRhaW5lclJlYWN0Um9vdCA9IGNvbnRhaW5lcklEICYmIGNvbnRhaW5lcklEID09PSBSZWFjdEluc3RhbmNlSGFuZGxlcy5nZXRSZWFjdFJvb3RJREZyb21Ob2RlSUQoY29udGFpbmVySUQpO1xuXG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghY29udGFpbmVySGFzTm9uUm9vdFJlYWN0Q2hpbGQsICd1bm1vdW50Q29tcG9uZW50QXROb2RlKCk6IFRoZSBub2RlIHlvdVxcJ3JlIGF0dGVtcHRpbmcgdG8gdW5tb3VudCAnICsgJ3dhcyByZW5kZXJlZCBieSBSZWFjdCBhbmQgaXMgbm90IGEgdG9wLWxldmVsIGNvbnRhaW5lci4gJXMnLCBpc0NvbnRhaW5lclJlYWN0Um9vdCA/ICdZb3UgbWF5IGhhdmUgYWNjaWRlbnRhbGx5IHBhc3NlZCBpbiBhIFJlYWN0IHJvb3Qgbm9kZSBpbnN0ZWFkICcgKyAnb2YgaXRzIGNvbnRhaW5lci4nIDogJ0luc3RlYWQsIGhhdmUgdGhlIHBhcmVudCBjb21wb25lbnQgdXBkYXRlIGl0cyBzdGF0ZSBhbmQgJyArICdyZXJlbmRlciBpbiBvcmRlciB0byByZW1vdmUgdGhpcyBjb21wb25lbnQuJykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzKHVubW91bnRDb21wb25lbnRGcm9tTm9kZSwgY29tcG9uZW50LCBjb250YWluZXIpO1xuICAgIGRlbGV0ZSBpbnN0YW5jZXNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcbiAgICBkZWxldGUgY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBkZWxldGUgcm9vdEVsZW1lbnRzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF07XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgY29udGFpbmVyIERPTSBlbGVtZW50IHRoYXQgY29udGFpbnMgUmVhY3QgY29tcG9uZW50IHRvIHdoaWNoIHRoZVxuICAgKiBzdXBwbGllZCBET00gYGlkYCBiZWxvbmdzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIElEIG9mIGFuIGVsZW1lbnQgcmVuZGVyZWQgYnkgYSBSZWFjdCBjb21wb25lbnQuXG4gICAqIEByZXR1cm4gez9ET01FbGVtZW50fSBET00gZWxlbWVudCB0aGF0IGNvbnRhaW5zIHRoZSBgaWRgLlxuICAgKi9cbiAgZmluZFJlYWN0Q29udGFpbmVyRm9ySUQ6IGZ1bmN0aW9uIChpZCkge1xuICAgIHZhciByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChpZCk7XG4gICAgdmFyIGNvbnRhaW5lciA9IGNvbnRhaW5lcnNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgcm9vdEVsZW1lbnQgPSByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcbiAgICAgIGlmIChyb290RWxlbWVudCAmJiByb290RWxlbWVudC5wYXJlbnROb2RlICE9PSBjb250YWluZXIpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoXG4gICAgICAgIC8vIENhbGwgaW50ZXJuYWxHZXRJRCBoZXJlIGJlY2F1c2UgZ2V0SUQgY2FsbHMgaXNWYWxpZCB3aGljaCBjYWxsc1xuICAgICAgICAvLyBmaW5kUmVhY3RDb250YWluZXJGb3JJRCAodGhpcyBmdW5jdGlvbikuXG4gICAgICAgIGludGVybmFsR2V0SUQocm9vdEVsZW1lbnQpID09PSByZWFjdFJvb3RJRCwgJ1JlYWN0TW91bnQ6IFJvb3QgZWxlbWVudCBJRCBkaWZmZXJlZCBmcm9tIHJlYWN0Um9vdElELicpIDogdW5kZWZpbmVkO1xuICAgICAgICB2YXIgY29udGFpbmVyQ2hpbGQgPSBjb250YWluZXIuZmlyc3RDaGlsZDtcbiAgICAgICAgaWYgKGNvbnRhaW5lckNoaWxkICYmIHJlYWN0Um9vdElEID09PSBpbnRlcm5hbEdldElEKGNvbnRhaW5lckNoaWxkKSkge1xuICAgICAgICAgIC8vIElmIHRoZSBjb250YWluZXIgaGFzIGEgbmV3IGNoaWxkIHdpdGggdGhlIHNhbWUgSUQgYXMgdGhlIG9sZFxuICAgICAgICAgIC8vIHJvb3QgZWxlbWVudCwgdGhlbiByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXSBpc1xuICAgICAgICAgIC8vIGp1c3Qgc3RhbGUgYW5kIG5lZWRzIHRvIGJlIHVwZGF0ZWQuIFRoZSBjYXNlIHRoYXQgZGVzZXJ2ZXMgYVxuICAgICAgICAgIC8vIHdhcm5pbmcgaXMgd2hlbiB0aGUgY29udGFpbmVyIGlzIGVtcHR5LlxuICAgICAgICAgIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbcmVhY3RSb290SURdID0gY29udGFpbmVyQ2hpbGQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdE1vdW50OiBSb290IGVsZW1lbnQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIGl0cyBvcmlnaW5hbCAnICsgJ2NvbnRhaW5lci4gTmV3IGNvbnRhaW5lcjogJXMnLCByb290RWxlbWVudC5wYXJlbnROb2RlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmRzIGFuIGVsZW1lbnQgcmVuZGVyZWQgYnkgUmVhY3Qgd2l0aCB0aGUgc3VwcGxpZWQgSUQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiBhIERPTSBub2RlIGluIHRoZSBSZWFjdCBjb21wb25lbnQuXG4gICAqIEByZXR1cm4ge0RPTUVsZW1lbnR9IFJvb3QgRE9NIG5vZGUgb2YgdGhlIFJlYWN0IGNvbXBvbmVudC5cbiAgICovXG4gIGZpbmRSZWFjdE5vZGVCeUlEOiBmdW5jdGlvbiAoaWQpIHtcbiAgICB2YXIgcmVhY3RSb290ID0gUmVhY3RNb3VudC5maW5kUmVhY3RDb250YWluZXJGb3JJRChpZCk7XG4gICAgcmV0dXJuIFJlYWN0TW91bnQuZmluZENvbXBvbmVudFJvb3QocmVhY3RSb290LCBpZCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRyYXZlcnNlcyB1cCB0aGUgYW5jZXN0b3JzIG9mIHRoZSBzdXBwbGllZCBub2RlIHRvIGZpbmQgYSBub2RlIHRoYXQgaXMgYVxuICAgKiBET00gcmVwcmVzZW50YXRpb24gb2YgYSBSZWFjdCBjb21wb25lbnQgcmVuZGVyZWQgYnkgdGhpcyBjb3B5IG9mIFJlYWN0LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG5vZGVcbiAgICogQHJldHVybiB7P0RPTUV2ZW50VGFyZ2V0fVxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldEZpcnN0UmVhY3RET006IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIGZpbmRGaXJzdFJlYWN0RE9NSW1wbChub2RlKTtcbiAgfSxcblxuICAvKipcbiAgICogRmluZHMgYSBub2RlIHdpdGggdGhlIHN1cHBsaWVkIGB0YXJnZXRJRGAgaW5zaWRlIG9mIHRoZSBzdXBwbGllZFxuICAgKiBgYW5jZXN0b3JOb2RlYC4gIEV4cGxvaXRzIHRoZSBJRCBuYW1pbmcgc2NoZW1lIHRvIHBlcmZvcm0gdGhlIHNlYXJjaFxuICAgKiBxdWlja2x5LlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSBhbmNlc3Rvck5vZGUgU2VhcmNoIGZyb20gdGhpcyByb290LlxuICAgKiBAcGFyYXJtIHtzdHJpbmd9IHRhcmdldElEIElEIG9mIHRoZSBET00gcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7RE9NRXZlbnRUYXJnZXR9IERPTSBub2RlIHdpdGggdGhlIHN1cHBsaWVkIGB0YXJnZXRJRGAuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZmluZENvbXBvbmVudFJvb3Q6IGZ1bmN0aW9uIChhbmNlc3Rvck5vZGUsIHRhcmdldElEKSB7XG4gICAgdmFyIGZpcnN0Q2hpbGRyZW4gPSBmaW5kQ29tcG9uZW50Um9vdFJldXNhYmxlQXJyYXk7XG4gICAgdmFyIGNoaWxkSW5kZXggPSAwO1xuXG4gICAgdmFyIGRlZXBlc3RBbmNlc3RvciA9IGZpbmREZWVwZXN0Q2FjaGVkQW5jZXN0b3IodGFyZ2V0SUQpIHx8IGFuY2VzdG9yTm9kZTtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgb24gdGhlIG5leHQgbGluZTsgZ2l2ZSBhbiBlYXJseSB3YXJuaW5nXG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhkZWVwZXN0QW5jZXN0b3IgIT0gbnVsbCwgJ1JlYWN0IGNhblxcJ3QgZmluZCB0aGUgcm9vdCBjb21wb25lbnQgbm9kZSBmb3IgZGF0YS1yZWFjdGlkIHZhbHVlICcgKyAnYCVzYC4gSWYgeW91XFwncmUgc2VlaW5nIHRoaXMgbWVzc2FnZSwgaXQgcHJvYmFibHkgbWVhbnMgdGhhdCAnICsgJ3lvdVxcJ3ZlIGxvYWRlZCB0d28gY29waWVzIG9mIFJlYWN0IG9uIHRoZSBwYWdlLiBBdCB0aGlzIHRpbWUsIG9ubHkgJyArICdhIHNpbmdsZSBjb3B5IG9mIFJlYWN0IGNhbiBiZSBsb2FkZWQgYXQgYSB0aW1lLicsIHRhcmdldElEKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBmaXJzdENoaWxkcmVuWzBdID0gZGVlcGVzdEFuY2VzdG9yLmZpcnN0Q2hpbGQ7XG4gICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSAxO1xuXG4gICAgd2hpbGUgKGNoaWxkSW5kZXggPCBmaXJzdENoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgdmFyIGNoaWxkID0gZmlyc3RDaGlsZHJlbltjaGlsZEluZGV4KytdO1xuICAgICAgdmFyIHRhcmdldENoaWxkO1xuXG4gICAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgICAgdmFyIGNoaWxkSUQgPSBSZWFjdE1vdW50LmdldElEKGNoaWxkKTtcbiAgICAgICAgaWYgKGNoaWxkSUQpIHtcbiAgICAgICAgICAvLyBFdmVuIGlmIHdlIGZpbmQgdGhlIG5vZGUgd2UncmUgbG9va2luZyBmb3IsIHdlIGZpbmlzaCBsb29waW5nXG4gICAgICAgICAgLy8gdGhyb3VnaCBpdHMgc2libGluZ3MgdG8gZW5zdXJlIHRoZXkncmUgY2FjaGVkIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZVxuICAgICAgICAgIC8vIHRvIHJldmlzaXQgdGhpcyBub2RlIGFnYWluLiBPdGhlcndpc2UsIHdlIG1ha2Ugbl4yIGNhbGxzIHRvIGdldElEXG4gICAgICAgICAgLy8gd2hlbiB2aXNpdGluZyB0aGUgbWFueSBjaGlsZHJlbiBvZiBhIHNpbmdsZSBub2RlIGluIG9yZGVyLlxuXG4gICAgICAgICAgaWYgKHRhcmdldElEID09PSBjaGlsZElEKSB7XG4gICAgICAgICAgICB0YXJnZXRDaGlsZCA9IGNoaWxkO1xuICAgICAgICAgIH0gZWxzZSBpZiAoUmVhY3RJbnN0YW5jZUhhbmRsZXMuaXNBbmNlc3RvcklET2YoY2hpbGRJRCwgdGFyZ2V0SUQpKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBmaW5kIGEgY2hpbGQgd2hvc2UgSUQgaXMgYW4gYW5jZXN0b3Igb2YgdGhlIGdpdmVuIElELFxuICAgICAgICAgICAgLy8gdGhlbiB3ZSBjYW4gYmUgc3VyZSB0aGF0IHdlIG9ubHkgd2FudCB0byBzZWFyY2ggdGhlIHN1YnRyZWVcbiAgICAgICAgICAgIC8vIHJvb3RlZCBhdCB0aGlzIGNoaWxkLCBzbyB3ZSBjYW4gdGhyb3cgb3V0IHRoZSByZXN0IG9mIHRoZVxuICAgICAgICAgICAgLy8gc2VhcmNoIHN0YXRlLlxuICAgICAgICAgICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSBjaGlsZEluZGV4ID0gMDtcbiAgICAgICAgICAgIGZpcnN0Q2hpbGRyZW4ucHVzaChjaGlsZC5maXJzdENoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgdGhpcyBjaGlsZCBoYWQgbm8gSUQsIHRoZW4gdGhlcmUncyBhIGNoYW5jZSB0aGF0IGl0IHdhc1xuICAgICAgICAgIC8vIGluamVjdGVkIGF1dG9tYXRpY2FsbHkgYnkgdGhlIGJyb3dzZXIsIGFzIHdoZW4gYSBgPHRhYmxlPmBcbiAgICAgICAgICAvLyBlbGVtZW50IHNwcm91dHMgYW4gZXh0cmEgYDx0Ym9keT5gIGNoaWxkIGFzIGEgc2lkZSBlZmZlY3Qgb2ZcbiAgICAgICAgICAvLyBgLmlubmVySFRNTGAgcGFyc2luZy4gT3B0aW1pc3RpY2FsbHkgY29udGludWUgZG93biB0aGlzXG4gICAgICAgICAgLy8gYnJhbmNoLCBidXQgbm90IGJlZm9yZSBleGFtaW5pbmcgdGhlIG90aGVyIHNpYmxpbmdzLlxuICAgICAgICAgIGZpcnN0Q2hpbGRyZW4ucHVzaChjaGlsZC5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICB9XG5cbiAgICAgIGlmICh0YXJnZXRDaGlsZCkge1xuICAgICAgICAvLyBFbXB0eWluZyBmaXJzdENoaWxkcmVuL2ZpbmRDb21wb25lbnRSb290UmV1c2FibGVBcnJheSBpc1xuICAgICAgICAvLyBub3QgbmVjZXNzYXJ5IGZvciBjb3JyZWN0bmVzcywgYnV0IGl0IGhlbHBzIHRoZSBHQyByZWNsYWltXG4gICAgICAgIC8vIGFueSBub2RlcyB0aGF0IHdlcmUgbGVmdCBhdCB0aGUgZW5kIG9mIHRoZSBzZWFyY2guXG4gICAgICAgIGZpcnN0Q2hpbGRyZW4ubGVuZ3RoID0gMDtcblxuICAgICAgICByZXR1cm4gdGFyZ2V0Q2hpbGQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSAwO1xuXG4gICAgIWZhbHNlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2ZpbmRDb21wb25lbnRSb290KC4uLiwgJXMpOiBVbmFibGUgdG8gZmluZCBlbGVtZW50LiBUaGlzIHByb2JhYmx5ICcgKyAnbWVhbnMgdGhlIERPTSB3YXMgdW5leHBlY3RlZGx5IG11dGF0ZWQgKGUuZy4sIGJ5IHRoZSBicm93c2VyKSwgJyArICd1c3VhbGx5IGR1ZSB0byBmb3JnZXR0aW5nIGEgPHRib2R5PiB3aGVuIHVzaW5nIHRhYmxlcywgbmVzdGluZyB0YWdzICcgKyAnbGlrZSA8Zm9ybT4sIDxwPiwgb3IgPGE+LCBvciB1c2luZyBub24tU1ZHIGVsZW1lbnRzIGluIGFuIDxzdmc+ICcgKyAncGFyZW50LiAnICsgJ1RyeSBpbnNwZWN0aW5nIHRoZSBjaGlsZCBub2RlcyBvZiB0aGUgZWxlbWVudCB3aXRoIFJlYWN0IElEIGAlc2AuJywgdGFyZ2V0SUQsIFJlYWN0TW91bnQuZ2V0SUQoYW5jZXN0b3JOb2RlKSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9LFxuXG4gIF9tb3VudEltYWdlSW50b05vZGU6IGZ1bmN0aW9uIChtYXJrdXAsIGNvbnRhaW5lciwgc2hvdWxkUmV1c2VNYXJrdXAsIHRyYW5zYWN0aW9uKSB7XG4gICAgIShjb250YWluZXIgJiYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NfTk9ERV9UWVBFIHx8IGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DVU1FTlRfRlJBR01FTlRfTk9ERV9UWVBFKSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnbW91bnRDb21wb25lbnRJbnRvTm9kZSguLi4pOiBUYXJnZXQgY29udGFpbmVyIGlzIG5vdCB2YWxpZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoc2hvdWxkUmV1c2VNYXJrdXApIHtcbiAgICAgIHZhciByb290RWxlbWVudCA9IGdldFJlYWN0Um9vdEVsZW1lbnRJbkNvbnRhaW5lcihjb250YWluZXIpO1xuICAgICAgaWYgKFJlYWN0TWFya3VwQ2hlY2tzdW0uY2FuUmV1c2VNYXJrdXAobWFya3VwLCByb290RWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGNoZWNrc3VtID0gcm9vdEVsZW1lbnQuZ2V0QXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FKTtcbiAgICAgICAgcm9vdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FKTtcblxuICAgICAgICB2YXIgcm9vdE1hcmt1cCA9IHJvb3RFbGVtZW50Lm91dGVySFRNTDtcbiAgICAgICAgcm9vdEVsZW1lbnQuc2V0QXR0cmlidXRlKFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FLCBjaGVja3N1bSk7XG5cbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRNYXJrdXAgPSBtYXJrdXA7XG4gICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgLy8gYmVjYXVzZSByb290TWFya3VwIGlzIHJldHJpZXZlZCBmcm9tIHRoZSBET00sIHZhcmlvdXMgbm9ybWFsaXphdGlvbnNcbiAgICAgICAgICAvLyB3aWxsIGhhdmUgb2NjdXJyZWQgd2hpY2ggd2lsbCBub3QgYmUgcHJlc2VudCBpbiBgbWFya3VwYC4gSGVyZSxcbiAgICAgICAgICAvLyBpbnNlcnQgbWFya3VwIGludG8gYSA8ZGl2PiBvciA8aWZyYW1lPiBkZXBlbmRpbmcgb24gdGhlIGNvbnRhaW5lclxuICAgICAgICAgIC8vIHR5cGUgdG8gcGVyZm9ybSB0aGUgc2FtZSBub3JtYWxpemF0aW9ucyBiZWZvcmUgY29tcGFyaW5nLlxuICAgICAgICAgIHZhciBub3JtYWxpemVyO1xuICAgICAgICAgIGlmIChjb250YWluZXIubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERV9UWVBFKSB7XG4gICAgICAgICAgICBub3JtYWxpemVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBub3JtYWxpemVyLmlubmVySFRNTCA9IG1hcmt1cDtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRNYXJrdXAgPSBub3JtYWxpemVyLmlubmVySFRNTDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9ybWFsaXplciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub3JtYWxpemVyKTtcbiAgICAgICAgICAgIG5vcm1hbGl6ZXIuY29udGVudERvY3VtZW50LndyaXRlKG1hcmt1cCk7XG4gICAgICAgICAgICBub3JtYWxpemVkTWFya3VwID0gbm9ybWFsaXplci5jb250ZW50RG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTDtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobm9ybWFsaXplcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRpZmZJbmRleCA9IGZpcnN0RGlmZmVyZW5jZUluZGV4KG5vcm1hbGl6ZWRNYXJrdXAsIHJvb3RNYXJrdXApO1xuICAgICAgICB2YXIgZGlmZmVyZW5jZSA9ICcgKGNsaWVudCkgJyArIG5vcm1hbGl6ZWRNYXJrdXAuc3Vic3RyaW5nKGRpZmZJbmRleCAtIDIwLCBkaWZmSW5kZXggKyAyMCkgKyAnXFxuIChzZXJ2ZXIpICcgKyByb290TWFya3VwLnN1YnN0cmluZyhkaWZmSW5kZXggLSAyMCwgZGlmZkluZGV4ICsgMjApO1xuXG4gICAgICAgICEoY29udGFpbmVyLm5vZGVUeXBlICE9PSBET0NfTk9ERV9UWVBFKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdZb3VcXCdyZSB0cnlpbmcgdG8gcmVuZGVyIGEgY29tcG9uZW50IHRvIHRoZSBkb2N1bWVudCB1c2luZyAnICsgJ3NlcnZlciByZW5kZXJpbmcgYnV0IHRoZSBjaGVja3N1bSB3YXMgaW52YWxpZC4gVGhpcyB1c3VhbGx5ICcgKyAnbWVhbnMgeW91IHJlbmRlcmVkIGEgZGlmZmVyZW50IGNvbXBvbmVudCB0eXBlIG9yIHByb3BzIG9uICcgKyAndGhlIGNsaWVudCBmcm9tIHRoZSBvbmUgb24gdGhlIHNlcnZlciwgb3IgeW91ciByZW5kZXIoKSAnICsgJ21ldGhvZHMgYXJlIGltcHVyZS4gUmVhY3QgY2Fubm90IGhhbmRsZSB0aGlzIGNhc2UgZHVlIHRvICcgKyAnY3Jvc3MtYnJvd3NlciBxdWlya3MgYnkgcmVuZGVyaW5nIGF0IHRoZSBkb2N1bWVudCByb290LiBZb3UgJyArICdzaG91bGQgbG9vayBmb3IgZW52aXJvbm1lbnQgZGVwZW5kZW50IGNvZGUgaW4geW91ciBjb21wb25lbnRzICcgKyAnYW5kIGVuc3VyZSB0aGUgcHJvcHMgYXJlIHRoZSBzYW1lIGNsaWVudCBhbmQgc2VydmVyIHNpZGU6XFxuJXMnLCBkaWZmZXJlbmNlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0IGF0dGVtcHRlZCB0byByZXVzZSBtYXJrdXAgaW4gYSBjb250YWluZXIgYnV0IHRoZSAnICsgJ2NoZWNrc3VtIHdhcyBpbnZhbGlkLiBUaGlzIGdlbmVyYWxseSBtZWFucyB0aGF0IHlvdSBhcmUgJyArICd1c2luZyBzZXJ2ZXIgcmVuZGVyaW5nIGFuZCB0aGUgbWFya3VwIGdlbmVyYXRlZCBvbiB0aGUgJyArICdzZXJ2ZXIgd2FzIG5vdCB3aGF0IHRoZSBjbGllbnQgd2FzIGV4cGVjdGluZy4gUmVhY3QgaW5qZWN0ZWQgJyArICduZXcgbWFya3VwIHRvIGNvbXBlbnNhdGUgd2hpY2ggd29ya3MgYnV0IHlvdSBoYXZlIGxvc3QgbWFueSAnICsgJ29mIHRoZSBiZW5lZml0cyBvZiBzZXJ2ZXIgcmVuZGVyaW5nLiBJbnN0ZWFkLCBmaWd1cmUgb3V0ICcgKyAnd2h5IHRoZSBtYXJrdXAgYmVpbmcgZ2VuZXJhdGVkIGlzIGRpZmZlcmVudCBvbiB0aGUgY2xpZW50ICcgKyAnb3Igc2VydmVyOlxcbiVzJywgZGlmZmVyZW5jZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAhKGNvbnRhaW5lci5ub2RlVHlwZSAhPT0gRE9DX05PREVfVFlQRSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnWW91XFwncmUgdHJ5aW5nIHRvIHJlbmRlciBhIGNvbXBvbmVudCB0byB0aGUgZG9jdW1lbnQgYnV0ICcgKyAneW91IGRpZG5cXCd0IHVzZSBzZXJ2ZXIgcmVuZGVyaW5nLiBXZSBjYW5cXCd0IGRvIHRoaXMgJyArICd3aXRob3V0IHVzaW5nIHNlcnZlciByZW5kZXJpbmcgZHVlIHRvIGNyb3NzLWJyb3dzZXIgcXVpcmtzLiAnICsgJ1NlZSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0cmluZygpIGZvciBzZXJ2ZXIgcmVuZGVyaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIGlmICh0cmFuc2FjdGlvbi51c2VDcmVhdGVFbGVtZW50KSB7XG4gICAgICB3aGlsZSAoY29udGFpbmVyLmxhc3RDaGlsZCkge1xuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG4gICAgICB9XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobWFya3VwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0SW5uZXJIVE1MKGNvbnRhaW5lciwgbWFya3VwKTtcbiAgICB9XG4gIH0sXG5cbiAgb3duZXJEb2N1bWVudENvbnRleHRLZXk6IG93bmVyRG9jdW1lbnRDb250ZXh0S2V5LFxuXG4gIC8qKlxuICAgKiBSZWFjdCBJRCB1dGlsaXRpZXMuXG4gICAqL1xuXG4gIGdldFJlYWN0Um9vdElEOiBnZXRSZWFjdFJvb3RJRCxcblxuICBnZXRJRDogZ2V0SUQsXG5cbiAgc2V0SUQ6IHNldElELFxuXG4gIGdldE5vZGU6IGdldE5vZGUsXG5cbiAgZ2V0Tm9kZUZyb21JbnN0YW5jZTogZ2V0Tm9kZUZyb21JbnN0YW5jZSxcblxuICBpc1ZhbGlkOiBpc1ZhbGlkLFxuXG4gIHB1cmdlSUQ6IHB1cmdlSURcbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdE1vdW50LCAnUmVhY3RNb3VudCcsIHtcbiAgX3JlbmRlck5ld1Jvb3RDb21wb25lbnQ6ICdfcmVuZGVyTmV3Um9vdENvbXBvbmVudCcsXG4gIF9tb3VudEltYWdlSW50b05vZGU6ICdfbW91bnRJbWFnZUludG9Ob2RlJ1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RNb3VudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RNdWx0aUNoaWxkXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcyA9IHJlcXVpcmUoJy4vUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMnKTtcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0UmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVyJyk7XG52YXIgUmVhY3RDaGlsZFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0Q2hpbGRSZWNvbmNpbGVyJyk7XG5cbnZhciBmbGF0dGVuQ2hpbGRyZW4gPSByZXF1aXJlKCcuL2ZsYXR0ZW5DaGlsZHJlbicpO1xuXG4vKipcbiAqIFVwZGF0aW5nIGNoaWxkcmVuIG9mIGEgY29tcG9uZW50IG1heSB0cmlnZ2VyIHJlY3Vyc2l2ZSB1cGRhdGVzLiBUaGUgZGVwdGggaXNcbiAqIHVzZWQgdG8gYmF0Y2ggcmVjdXJzaXZlIHVwZGF0ZXMgdG8gcmVuZGVyIG1hcmt1cCBtb3JlIGVmZmljaWVudGx5LlxuICpcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgdXBkYXRlRGVwdGggPSAwO1xuXG4vKipcbiAqIFF1ZXVlIG9mIHVwZGF0ZSBjb25maWd1cmF0aW9uIG9iamVjdHMuXG4gKlxuICogRWFjaCBvYmplY3QgaGFzIGEgYHR5cGVgIHByb3BlcnR5IHRoYXQgaXMgaW4gYFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzYC5cbiAqXG4gKiBAdHlwZSB7YXJyYXk8b2JqZWN0Pn1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciB1cGRhdGVRdWV1ZSA9IFtdO1xuXG4vKipcbiAqIFF1ZXVlIG9mIG1hcmt1cCB0byBiZSByZW5kZXJlZC5cbiAqXG4gKiBAdHlwZSB7YXJyYXk8c3RyaW5nPn1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBtYXJrdXBRdWV1ZSA9IFtdO1xuXG4vKipcbiAqIEVucXVldWVzIG1hcmt1cCB0byBiZSByZW5kZXJlZCBhbmQgaW5zZXJ0ZWQgYXQgYSBzdXBwbGllZCBpbmRleC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0aGF0IHJlbmRlcnMgaW50byBhbiBlbGVtZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHRvSW5kZXggRGVzdGluYXRpb24gaW5kZXguXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbnF1ZXVlSW5zZXJ0TWFya3VwKHBhcmVudElELCBtYXJrdXAsIHRvSW5kZXgpIHtcbiAgLy8gTk9URTogTnVsbCB2YWx1ZXMgcmVkdWNlIGhpZGRlbiBjbGFzc2VzLlxuICB1cGRhdGVRdWV1ZS5wdXNoKHtcbiAgICBwYXJlbnRJRDogcGFyZW50SUQsXG4gICAgcGFyZW50Tm9kZTogbnVsbCxcbiAgICB0eXBlOiBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5JTlNFUlRfTUFSS1VQLFxuICAgIG1hcmt1cEluZGV4OiBtYXJrdXBRdWV1ZS5wdXNoKG1hcmt1cCkgLSAxLFxuICAgIGNvbnRlbnQ6IG51bGwsXG4gICAgZnJvbUluZGV4OiBudWxsLFxuICAgIHRvSW5kZXg6IHRvSW5kZXhcbiAgfSk7XG59XG5cbi8qKlxuICogRW5xdWV1ZXMgbW92aW5nIGFuIGV4aXN0aW5nIGVsZW1lbnQgdG8gYW5vdGhlciBpbmRleC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IFNvdXJjZSBpbmRleCBvZiB0aGUgZXhpc3RpbmcgZWxlbWVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b0luZGV4IERlc3RpbmF0aW9uIGluZGV4IG9mIHRoZSBlbGVtZW50LlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZU1vdmUocGFyZW50SUQsIGZyb21JbmRleCwgdG9JbmRleCkge1xuICAvLyBOT1RFOiBOdWxsIHZhbHVlcyByZWR1Y2UgaGlkZGVuIGNsYXNzZXMuXG4gIHVwZGF0ZVF1ZXVlLnB1c2goe1xuICAgIHBhcmVudElEOiBwYXJlbnRJRCxcbiAgICBwYXJlbnROb2RlOiBudWxsLFxuICAgIHR5cGU6IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLk1PVkVfRVhJU1RJTkcsXG4gICAgbWFya3VwSW5kZXg6IG51bGwsXG4gICAgY29udGVudDogbnVsbCxcbiAgICBmcm9tSW5kZXg6IGZyb21JbmRleCxcbiAgICB0b0luZGV4OiB0b0luZGV4XG4gIH0pO1xufVxuXG4vKipcbiAqIEVucXVldWVzIHJlbW92aW5nIGFuIGVsZW1lbnQgYXQgYW4gaW5kZXguXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmVudElEIElEIG9mIHRoZSBwYXJlbnQgY29tcG9uZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBJbmRleCBvZiB0aGUgZWxlbWVudCB0byByZW1vdmUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbnF1ZXVlUmVtb3ZlKHBhcmVudElELCBmcm9tSW5kZXgpIHtcbiAgLy8gTk9URTogTnVsbCB2YWx1ZXMgcmVkdWNlIGhpZGRlbiBjbGFzc2VzLlxuICB1cGRhdGVRdWV1ZS5wdXNoKHtcbiAgICBwYXJlbnRJRDogcGFyZW50SUQsXG4gICAgcGFyZW50Tm9kZTogbnVsbCxcbiAgICB0eXBlOiBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5SRU1PVkVfTk9ERSxcbiAgICBtYXJrdXBJbmRleDogbnVsbCxcbiAgICBjb250ZW50OiBudWxsLFxuICAgIGZyb21JbmRleDogZnJvbUluZGV4LFxuICAgIHRvSW5kZXg6IG51bGxcbiAgfSk7XG59XG5cbi8qKlxuICogRW5xdWV1ZXMgc2V0dGluZyB0aGUgbWFya3VwIG9mIGEgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0aGF0IHJlbmRlcnMgaW50byBhbiBlbGVtZW50LlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZVNldE1hcmt1cChwYXJlbnRJRCwgbWFya3VwKSB7XG4gIC8vIE5PVEU6IE51bGwgdmFsdWVzIHJlZHVjZSBoaWRkZW4gY2xhc3Nlcy5cbiAgdXBkYXRlUXVldWUucHVzaCh7XG4gICAgcGFyZW50SUQ6IHBhcmVudElELFxuICAgIHBhcmVudE5vZGU6IG51bGwsXG4gICAgdHlwZTogUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuU0VUX01BUktVUCxcbiAgICBtYXJrdXBJbmRleDogbnVsbCxcbiAgICBjb250ZW50OiBtYXJrdXAsXG4gICAgZnJvbUluZGV4OiBudWxsLFxuICAgIHRvSW5kZXg6IG51bGxcbiAgfSk7XG59XG5cbi8qKlxuICogRW5xdWV1ZXMgc2V0dGluZyB0aGUgdGV4dCBjb250ZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJlbnRJRCBJRCBvZiB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0Q29udGVudCBUZXh0IGNvbnRlbnQgdG8gc2V0LlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZVRleHRDb250ZW50KHBhcmVudElELCB0ZXh0Q29udGVudCkge1xuICAvLyBOT1RFOiBOdWxsIHZhbHVlcyByZWR1Y2UgaGlkZGVuIGNsYXNzZXMuXG4gIHVwZGF0ZVF1ZXVlLnB1c2goe1xuICAgIHBhcmVudElEOiBwYXJlbnRJRCxcbiAgICBwYXJlbnROb2RlOiBudWxsLFxuICAgIHR5cGU6IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlRFWFRfQ09OVEVOVCxcbiAgICBtYXJrdXBJbmRleDogbnVsbCxcbiAgICBjb250ZW50OiB0ZXh0Q29udGVudCxcbiAgICBmcm9tSW5kZXg6IG51bGwsXG4gICAgdG9JbmRleDogbnVsbFxuICB9KTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzZXMgYW55IGVucXVldWVkIHVwZGF0ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKCkge1xuICBpZiAodXBkYXRlUXVldWUubGVuZ3RoKSB7XG4gICAgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5wcm9jZXNzQ2hpbGRyZW5VcGRhdGVzKHVwZGF0ZVF1ZXVlLCBtYXJrdXBRdWV1ZSk7XG4gICAgY2xlYXJRdWV1ZSgpO1xuICB9XG59XG5cbi8qKlxuICogQ2xlYXJzIGFueSBlbnF1ZXVlZCB1cGRhdGVzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNsZWFyUXVldWUoKSB7XG4gIHVwZGF0ZVF1ZXVlLmxlbmd0aCA9IDA7XG4gIG1hcmt1cFF1ZXVlLmxlbmd0aCA9IDA7XG59XG5cbi8qKlxuICogUmVhY3RNdWx0aUNoaWxkIGFyZSBjYXBhYmxlIG9mIHJlY29uY2lsaW5nIG11bHRpcGxlIGNoaWxkcmVuLlxuICpcbiAqIEBjbGFzcyBSZWFjdE11bHRpQ2hpbGRcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RNdWx0aUNoaWxkID0ge1xuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBjb21tb24gZnVuY3Rpb25hbGl0eSBmb3IgY29tcG9uZW50cyB0aGF0IG11c3QgcmVjb25jaWxlIG11bHRpcGxlXG4gICAqIGNoaWxkcmVuLiBUaGlzIGlzIHVzZWQgYnkgYFJlYWN0RE9NQ29tcG9uZW50YCB0byBtb3VudCwgdXBkYXRlLCBhbmRcbiAgICogdW5tb3VudCBjaGlsZCBjb21wb25lbnRzLlxuICAgKlxuICAgKiBAbGVuZHMge1JlYWN0TXVsdGlDaGlsZC5wcm90b3R5cGV9XG4gICAqL1xuICBNaXhpbjoge1xuXG4gICAgX3JlY29uY2lsZXJJbnN0YW50aWF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAobmVzdGVkQ2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdENoaWxkUmVjb25jaWxlci5pbnN0YW50aWF0ZUNoaWxkcmVuKG5lc3RlZENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLmluc3RhbnRpYXRlQ2hpbGRyZW4obmVzdGVkQ2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgX3JlY29uY2lsZXJVcGRhdGVDaGlsZHJlbjogZnVuY3Rpb24gKHByZXZDaGlsZHJlbiwgbmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICB2YXIgbmV4dENoaWxkcmVuO1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5fb3duZXI7XG4gICAgICAgICAgICBuZXh0Q2hpbGRyZW4gPSBmbGF0dGVuQ2hpbGRyZW4obmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMpO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVwZGF0ZUNoaWxkcmVuKHByZXZDaGlsZHJlbiwgbmV4dENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG5leHRDaGlsZHJlbiA9IGZsYXR0ZW5DaGlsZHJlbihuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cyk7XG4gICAgICByZXR1cm4gUmVhY3RDaGlsZFJlY29uY2lsZXIudXBkYXRlQ2hpbGRyZW4ocHJldkNoaWxkcmVuLCBuZXh0Q2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgXCJtb3VudCBpbWFnZVwiIGZvciBlYWNoIG9mIHRoZSBzdXBwbGllZCBjaGlsZHJlbi4gSW4gdGhlIGNhc2VcbiAgICAgKiBvZiBgUmVhY3RET01Db21wb25lbnRgLCBhIG1vdW50IGltYWdlIGlzIGEgc3RyaW5nIG9mIG1hcmt1cC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7P29iamVjdH0gbmVzdGVkQ2hpbGRyZW4gTmVzdGVkIGNoaWxkIG1hcHMuXG4gICAgICogQHJldHVybiB7YXJyYXl9IEFuIGFycmF5IG9mIG1vdW50ZWQgcmVwcmVzZW50YXRpb25zLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG1vdW50Q2hpbGRyZW46IGZ1bmN0aW9uIChuZXN0ZWRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuX3JlY29uY2lsZXJJbnN0YW50aWF0ZUNoaWxkcmVuKG5lc3RlZENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICB0aGlzLl9yZW5kZXJlZENoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICB2YXIgbW91bnRJbWFnZXMgPSBbXTtcbiAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICBmb3IgKHZhciBuYW1lIGluIGNoaWxkcmVuKSB7XG4gICAgICAgIGlmIChjaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW25hbWVdO1xuICAgICAgICAgIC8vIElubGluZWQgZm9yIHBlcmZvcm1hbmNlLCBzZWUgYFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0SURgLlxuICAgICAgICAgIHZhciByb290SUQgPSB0aGlzLl9yb290Tm9kZUlEICsgbmFtZTtcbiAgICAgICAgICB2YXIgbW91bnRJbWFnZSA9IFJlYWN0UmVjb25jaWxlci5tb3VudENvbXBvbmVudChjaGlsZCwgcm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgICAgY2hpbGQuX21vdW50SW5kZXggPSBpbmRleCsrO1xuICAgICAgICAgIG1vdW50SW1hZ2VzLnB1c2gobW91bnRJbWFnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBtb3VudEltYWdlcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVwbGFjZXMgYW55IHJlbmRlcmVkIGNoaWxkcmVuIHdpdGggYSB0ZXh0IGNvbnRlbnQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5leHRDb250ZW50IFN0cmluZyBvZiBjb250ZW50LlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVwZGF0ZVRleHRDb250ZW50OiBmdW5jdGlvbiAobmV4dENvbnRlbnQpIHtcbiAgICAgIHVwZGF0ZURlcHRoKys7XG4gICAgICB2YXIgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHByZXZDaGlsZHJlbiA9IHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW47XG4gICAgICAgIC8vIFJlbW92ZSBhbnkgcmVuZGVyZWQgY2hpbGRyZW4uXG4gICAgICAgIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVubW91bnRDaGlsZHJlbihwcmV2Q2hpbGRyZW4pO1xuICAgICAgICAvLyBUT0RPOiBUaGUgc2V0VGV4dENvbnRlbnQgb3BlcmF0aW9uIHNob3VsZCBiZSBlbm91Z2hcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgICBpZiAocHJldkNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLl91bm1vdW50Q2hpbGQocHJldkNoaWxkcmVuW25hbWVdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IG5ldyB0ZXh0IGNvbnRlbnQuXG4gICAgICAgIHRoaXMuc2V0VGV4dENvbnRlbnQobmV4dENvbnRlbnQpO1xuICAgICAgICBlcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdXBkYXRlRGVwdGgtLTtcbiAgICAgICAgaWYgKCF1cGRhdGVEZXB0aCkge1xuICAgICAgICAgIGlmIChlcnJvclRocm93bikge1xuICAgICAgICAgICAgY2xlYXJRdWV1ZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9jZXNzUXVldWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVwbGFjZXMgYW55IHJlbmRlcmVkIGNoaWxkcmVuIHdpdGggYSBtYXJrdXAgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5leHRNYXJrdXAgU3RyaW5nIG9mIG1hcmt1cC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB1cGRhdGVNYXJrdXA6IGZ1bmN0aW9uIChuZXh0TWFya3VwKSB7XG4gICAgICB1cGRhdGVEZXB0aCsrO1xuICAgICAgdmFyIGVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBwcmV2Q2hpbGRyZW4gPSB0aGlzLl9yZW5kZXJlZENoaWxkcmVuO1xuICAgICAgICAvLyBSZW1vdmUgYW55IHJlbmRlcmVkIGNoaWxkcmVuLlxuICAgICAgICBSZWFjdENoaWxkUmVjb25jaWxlci51bm1vdW50Q2hpbGRyZW4ocHJldkNoaWxkcmVuKTtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgICBpZiAocHJldkNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLl91bm1vdW50Q2hpbGRCeU5hbWUocHJldkNoaWxkcmVuW25hbWVdLCBuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRNYXJrdXAobmV4dE1hcmt1cCk7XG4gICAgICAgIGVycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB1cGRhdGVEZXB0aC0tO1xuICAgICAgICBpZiAoIXVwZGF0ZURlcHRoKSB7XG4gICAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICBjbGVhclF1ZXVlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2Nlc3NRdWV1ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSByZW5kZXJlZCBjaGlsZHJlbiB3aXRoIG5ldyBjaGlsZHJlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMgTmVzdGVkIGNoaWxkIGVsZW1lbnQgbWFwcy5cbiAgICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdXBkYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIHVwZGF0ZURlcHRoKys7XG4gICAgICB2YXIgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2hpbGRyZW4obmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgZXJyb3JUaHJvd24gPSBmYWxzZTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHVwZGF0ZURlcHRoLS07XG4gICAgICAgIGlmICghdXBkYXRlRGVwdGgpIHtcbiAgICAgICAgICBpZiAoZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgIGNsZWFyUXVldWUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvY2Vzc1F1ZXVlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEltcHJvdmUgcGVyZm9ybWFuY2UgYnkgaXNvbGF0aW5nIHRoaXMgaG90IGNvZGUgcGF0aCBmcm9tIHRoZSB0cnkvY2F0Y2hcbiAgICAgKiBibG9jayBpbiBgdXBkYXRlQ2hpbGRyZW5gLlxuICAgICAqXG4gICAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cyBOZXN0ZWQgY2hpbGQgZWxlbWVudCBtYXBzLlxuICAgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICAgKiBAZmluYWxcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX3VwZGF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAobmV4dE5lc3RlZENoaWxkcmVuRWxlbWVudHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICB2YXIgcHJldkNoaWxkcmVuID0gdGhpcy5fcmVuZGVyZWRDaGlsZHJlbjtcbiAgICAgIHZhciBuZXh0Q2hpbGRyZW4gPSB0aGlzLl9yZWNvbmNpbGVyVXBkYXRlQ2hpbGRyZW4ocHJldkNoaWxkcmVuLCBuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgdGhpcy5fcmVuZGVyZWRDaGlsZHJlbiA9IG5leHRDaGlsZHJlbjtcbiAgICAgIGlmICghbmV4dENoaWxkcmVuICYmICFwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIG5hbWU7XG4gICAgICAvLyBgbmV4dEluZGV4YCB3aWxsIGluY3JlbWVudCBmb3IgZWFjaCBjaGlsZCBpbiBgbmV4dENoaWxkcmVuYCwgYnV0XG4gICAgICAvLyBgbGFzdEluZGV4YCB3aWxsIGJlIHRoZSBsYXN0IGluZGV4IHZpc2l0ZWQgaW4gYHByZXZDaGlsZHJlbmAuXG4gICAgICB2YXIgbGFzdEluZGV4ID0gMDtcbiAgICAgIHZhciBuZXh0SW5kZXggPSAwO1xuICAgICAgZm9yIChuYW1lIGluIG5leHRDaGlsZHJlbikge1xuICAgICAgICBpZiAoIW5leHRDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcmV2Q2hpbGQgPSBwcmV2Q2hpbGRyZW4gJiYgcHJldkNoaWxkcmVuW25hbWVdO1xuICAgICAgICB2YXIgbmV4dENoaWxkID0gbmV4dENoaWxkcmVuW25hbWVdO1xuICAgICAgICBpZiAocHJldkNoaWxkID09PSBuZXh0Q2hpbGQpIHtcbiAgICAgICAgICB0aGlzLm1vdmVDaGlsZChwcmV2Q2hpbGQsIG5leHRJbmRleCwgbGFzdEluZGV4KTtcbiAgICAgICAgICBsYXN0SW5kZXggPSBNYXRoLm1heChwcmV2Q2hpbGQuX21vdW50SW5kZXgsIGxhc3RJbmRleCk7XG4gICAgICAgICAgcHJldkNoaWxkLl9tb3VudEluZGV4ID0gbmV4dEluZGV4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChwcmV2Q2hpbGQpIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBgbGFzdEluZGV4YCBiZWZvcmUgYF9tb3VudEluZGV4YCBnZXRzIHVuc2V0IGJ5IHVubW91bnRpbmcuXG4gICAgICAgICAgICBsYXN0SW5kZXggPSBNYXRoLm1heChwcmV2Q2hpbGQuX21vdW50SW5kZXgsIGxhc3RJbmRleCk7XG4gICAgICAgICAgICB0aGlzLl91bm1vdW50Q2hpbGQocHJldkNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gVGhlIGNoaWxkIG11c3QgYmUgaW5zdGFudGlhdGVkIGJlZm9yZSBpdCdzIG1vdW50ZWQuXG4gICAgICAgICAgdGhpcy5fbW91bnRDaGlsZEJ5TmFtZUF0SW5kZXgobmV4dENoaWxkLCBuYW1lLCBuZXh0SW5kZXgsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBuZXh0SW5kZXgrKztcbiAgICAgIH1cbiAgICAgIC8vIFJlbW92ZSBjaGlsZHJlbiB0aGF0IGFyZSBubyBsb25nZXIgcHJlc2VudC5cbiAgICAgIGZvciAobmFtZSBpbiBwcmV2Q2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKHByZXZDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiAhKG5leHRDaGlsZHJlbiAmJiBuZXh0Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpKSB7XG4gICAgICAgICAgdGhpcy5fdW5tb3VudENoaWxkKHByZXZDaGlsZHJlbltuYW1lXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5tb3VudHMgYWxsIHJlbmRlcmVkIGNoaWxkcmVuLiBUaGlzIHNob3VsZCBiZSB1c2VkIHRvIGNsZWFuIHVwIGNoaWxkcmVuXG4gICAgICogd2hlbiB0aGlzIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB1bm1vdW50Q2hpbGRyZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByZW5kZXJlZENoaWxkcmVuID0gdGhpcy5fcmVuZGVyZWRDaGlsZHJlbjtcbiAgICAgIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVubW91bnRDaGlsZHJlbihyZW5kZXJlZENoaWxkcmVuKTtcbiAgICAgIHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW4gPSBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyBhIGNoaWxkIGNvbXBvbmVudCB0byB0aGUgc3VwcGxpZWQgaW5kZXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDb21wb25lbnQgdG8gbW92ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9JbmRleCBEZXN0aW5hdGlvbiBpbmRleCBvZiB0aGUgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGFzdEluZGV4IExhc3QgaW5kZXggdmlzaXRlZCBvZiB0aGUgc2libGluZ3Mgb2YgYGNoaWxkYC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgbW92ZUNoaWxkOiBmdW5jdGlvbiAoY2hpbGQsIHRvSW5kZXgsIGxhc3RJbmRleCkge1xuICAgICAgLy8gSWYgdGhlIGluZGV4IG9mIGBjaGlsZGAgaXMgbGVzcyB0aGFuIGBsYXN0SW5kZXhgLCB0aGVuIGl0IG5lZWRzIHRvXG4gICAgICAvLyBiZSBtb3ZlZC4gT3RoZXJ3aXNlLCB3ZSBkbyBub3QgbmVlZCB0byBtb3ZlIGl0IGJlY2F1c2UgYSBjaGlsZCB3aWxsIGJlXG4gICAgICAvLyBpbnNlcnRlZCBvciBtb3ZlZCBiZWZvcmUgYGNoaWxkYC5cbiAgICAgIGlmIChjaGlsZC5fbW91bnRJbmRleCA8IGxhc3RJbmRleCkge1xuICAgICAgICBlbnF1ZXVlTW92ZSh0aGlzLl9yb290Tm9kZUlELCBjaGlsZC5fbW91bnRJbmRleCwgdG9JbmRleCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjaGlsZCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDb21wb25lbnQgdG8gY3JlYXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb3VudEltYWdlIE1hcmt1cCB0byBpbnNlcnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGNyZWF0ZUNoaWxkOiBmdW5jdGlvbiAoY2hpbGQsIG1vdW50SW1hZ2UpIHtcbiAgICAgIGVucXVldWVJbnNlcnRNYXJrdXAodGhpcy5fcm9vdE5vZGVJRCwgbW91bnRJbWFnZSwgY2hpbGQuX21vdW50SW5kZXgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgY2hpbGQgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY2hpbGQgQ2hpbGQgdG8gcmVtb3ZlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICByZW1vdmVDaGlsZDogZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICBlbnF1ZXVlUmVtb3ZlKHRoaXMuX3Jvb3ROb2RlSUQsIGNoaWxkLl9tb3VudEluZGV4KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGlzIHRleHQgY29udGVudCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dENvbnRlbnQgVGV4dCBjb250ZW50IHRvIHNldC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgc2V0VGV4dENvbnRlbnQ6IGZ1bmN0aW9uICh0ZXh0Q29udGVudCkge1xuICAgICAgZW5xdWV1ZVRleHRDb250ZW50KHRoaXMuX3Jvb3ROb2RlSUQsIHRleHRDb250ZW50KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGlzIG1hcmt1cCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0byBzZXQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHNldE1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCkge1xuICAgICAgZW5xdWV1ZVNldE1hcmt1cCh0aGlzLl9yb290Tm9kZUlELCBtYXJrdXApO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNb3VudHMgYSBjaGlsZCB3aXRoIHRoZSBzdXBwbGllZCBuYW1lLlxuICAgICAqXG4gICAgICogTk9URTogVGhpcyBpcyBwYXJ0IG9mIGB1cGRhdGVDaGlsZHJlbmAgYW5kIGlzIGhlcmUgZm9yIHJlYWRhYmlsaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY2hpbGQgQ29tcG9uZW50IHRvIG1vdW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIGNoaWxkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCBhdCB3aGljaCB0byBpbnNlcnQgdGhlIGNoaWxkLlxuICAgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9tb3VudENoaWxkQnlOYW1lQXRJbmRleDogZnVuY3Rpb24gKGNoaWxkLCBuYW1lLCBpbmRleCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIC8vIElubGluZWQgZm9yIHBlcmZvcm1hbmNlLCBzZWUgYFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0SURgLlxuICAgICAgdmFyIHJvb3RJRCA9IHRoaXMuX3Jvb3ROb2RlSUQgKyBuYW1lO1xuICAgICAgdmFyIG1vdW50SW1hZ2UgPSBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQoY2hpbGQsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgY2hpbGQuX21vdW50SW5kZXggPSBpbmRleDtcbiAgICAgIHRoaXMuY3JlYXRlQ2hpbGQoY2hpbGQsIG1vdW50SW1hZ2UpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbm1vdW50cyBhIHJlbmRlcmVkIGNoaWxkLlxuICAgICAqXG4gICAgICogTk9URTogVGhpcyBpcyBwYXJ0IG9mIGB1cGRhdGVDaGlsZHJlbmAgYW5kIGlzIGhlcmUgZm9yIHJlYWRhYmlsaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY2hpbGQgQ29tcG9uZW50IHRvIHVubW91bnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfdW5tb3VudENoaWxkOiBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgICAgY2hpbGQuX21vdW50SW5kZXggPSBudWxsO1xuICAgIH1cblxuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RNdWx0aUNoaWxkOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGtleU1pcnJvciA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU1pcnJvcicpO1xuXG4vKipcbiAqIFdoZW4gYSBjb21wb25lbnQncyBjaGlsZHJlbiBhcmUgdXBkYXRlZCwgYSBzZXJpZXMgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb25cbiAqIG9iamVjdHMgYXJlIGNyZWF0ZWQgaW4gb3JkZXIgdG8gYmF0Y2ggYW5kIHNlcmlhbGl6ZSB0aGUgcmVxdWlyZWQgY2hhbmdlcy5cbiAqXG4gKiBFbnVtZXJhdGVzIGFsbCB0aGUgcG9zc2libGUgdHlwZXMgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb25zLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMgPSBrZXlNaXJyb3Ioe1xuICBJTlNFUlRfTUFSS1VQOiBudWxsLFxuICBNT1ZFX0VYSVNUSU5HOiBudWxsLFxuICBSRU1PVkVfTk9ERTogbnVsbCxcbiAgU0VUX01BUktVUDogbnVsbCxcbiAgVEVYVF9DT05URU5UOiBudWxsXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3ROYXRpdmVDb21wb25lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIGF1dG9HZW5lcmF0ZVdyYXBwZXJDbGFzcyA9IG51bGw7XG52YXIgZ2VuZXJpY0NvbXBvbmVudENsYXNzID0gbnVsbDtcbi8vIFRoaXMgcmVnaXN0cnkga2VlcHMgdHJhY2sgb2Ygd3JhcHBlciBjbGFzc2VzIGFyb3VuZCBuYXRpdmUgdGFncy5cbnZhciB0YWdUb0NvbXBvbmVudENsYXNzID0ge307XG52YXIgdGV4dENvbXBvbmVudENsYXNzID0gbnVsbDtcblxudmFyIFJlYWN0TmF0aXZlQ29tcG9uZW50SW5qZWN0aW9uID0ge1xuICAvLyBUaGlzIGFjY2VwdHMgYSBjbGFzcyB0aGF0IHJlY2VpdmVzIHRoZSB0YWcgc3RyaW5nLiBUaGlzIGlzIGEgY2F0Y2ggYWxsXG4gIC8vIHRoYXQgY2FuIHJlbmRlciBhbnkga2luZCBvZiB0YWcuXG4gIGluamVjdEdlbmVyaWNDb21wb25lbnRDbGFzczogZnVuY3Rpb24gKGNvbXBvbmVudENsYXNzKSB7XG4gICAgZ2VuZXJpY0NvbXBvbmVudENsYXNzID0gY29tcG9uZW50Q2xhc3M7XG4gIH0sXG4gIC8vIFRoaXMgYWNjZXB0cyBhIHRleHQgY29tcG9uZW50IGNsYXNzIHRoYXQgdGFrZXMgdGhlIHRleHQgc3RyaW5nIHRvIGJlXG4gIC8vIHJlbmRlcmVkIGFzIHByb3BzLlxuICBpbmplY3RUZXh0Q29tcG9uZW50Q2xhc3M6IGZ1bmN0aW9uIChjb21wb25lbnRDbGFzcykge1xuICAgIHRleHRDb21wb25lbnRDbGFzcyA9IGNvbXBvbmVudENsYXNzO1xuICB9LFxuICAvLyBUaGlzIGFjY2VwdHMgYSBrZXllZCBvYmplY3Qgd2l0aCBjbGFzc2VzIGFzIHZhbHVlcy4gRWFjaCBrZXkgcmVwcmVzZW50cyBhXG4gIC8vIHRhZy4gVGhhdCBwYXJ0aWN1bGFyIHRhZyB3aWxsIHVzZSB0aGlzIGNsYXNzIGluc3RlYWQgb2YgdGhlIGdlbmVyaWMgb25lLlxuICBpbmplY3RDb21wb25lbnRDbGFzc2VzOiBmdW5jdGlvbiAoY29tcG9uZW50Q2xhc3Nlcykge1xuICAgIGFzc2lnbih0YWdUb0NvbXBvbmVudENsYXNzLCBjb21wb25lbnRDbGFzc2VzKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgYSBjb21wb3NpdGUgY29tcG9uZW50IHdyYXBwZXIgY2xhc3MgZm9yIGEgc3BlY2lmaWMgdGFnLlxuICpcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50IFRoZSB0YWcgZm9yIHdoaWNoIHRvIGdldCB0aGUgY2xhc3MuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIFJlYWN0IGNsYXNzIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRDb21wb25lbnRDbGFzc0ZvckVsZW1lbnQoZWxlbWVudCkge1xuICBpZiAodHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbGVtZW50LnR5cGU7XG4gIH1cbiAgdmFyIHRhZyA9IGVsZW1lbnQudHlwZTtcbiAgdmFyIGNvbXBvbmVudENsYXNzID0gdGFnVG9Db21wb25lbnRDbGFzc1t0YWddO1xuICBpZiAoY29tcG9uZW50Q2xhc3MgPT0gbnVsbCkge1xuICAgIHRhZ1RvQ29tcG9uZW50Q2xhc3NbdGFnXSA9IGNvbXBvbmVudENsYXNzID0gYXV0b0dlbmVyYXRlV3JhcHBlckNsYXNzKHRhZyk7XG4gIH1cbiAgcmV0dXJuIGNvbXBvbmVudENsYXNzO1xufVxuXG4vKipcbiAqIEdldCBhIG5hdGl2ZSBpbnRlcm5hbCBjb21wb25lbnQgY2xhc3MgZm9yIGEgc3BlY2lmaWMgdGFnLlxuICpcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGNyZWF0ZS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9ufSBUaGUgaW50ZXJuYWwgY2xhc3MgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUludGVybmFsQ29tcG9uZW50KGVsZW1lbnQpIHtcbiAgIWdlbmVyaWNDb21wb25lbnRDbGFzcyA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUaGVyZSBpcyBubyByZWdpc3RlcmVkIGNvbXBvbmVudCBmb3IgdGhlIHRhZyAlcycsIGVsZW1lbnQudHlwZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICByZXR1cm4gbmV3IGdlbmVyaWNDb21wb25lbnRDbGFzcyhlbGVtZW50LnR5cGUsIGVsZW1lbnQucHJvcHMpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7UmVhY3RUZXh0fSB0ZXh0XG4gKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2VGb3JUZXh0KHRleHQpIHtcbiAgcmV0dXJuIG5ldyB0ZXh0Q29tcG9uZW50Q2xhc3ModGV4dCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc1RleHRDb21wb25lbnQoY29tcG9uZW50KSB7XG4gIHJldHVybiBjb21wb25lbnQgaW5zdGFuY2VvZiB0ZXh0Q29tcG9uZW50Q2xhc3M7XG59XG5cbnZhciBSZWFjdE5hdGl2ZUNvbXBvbmVudCA9IHtcbiAgZ2V0Q29tcG9uZW50Q2xhc3NGb3JFbGVtZW50OiBnZXRDb21wb25lbnRDbGFzc0ZvckVsZW1lbnQsXG4gIGNyZWF0ZUludGVybmFsQ29tcG9uZW50OiBjcmVhdGVJbnRlcm5hbENvbXBvbmVudCxcbiAgY3JlYXRlSW5zdGFuY2VGb3JUZXh0OiBjcmVhdGVJbnN0YW5jZUZvclRleHQsXG4gIGlzVGV4dENvbXBvbmVudDogaXNUZXh0Q29tcG9uZW50LFxuICBpbmplY3Rpb246IFJlYWN0TmF0aXZlQ29tcG9uZW50SW5qZWN0aW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0TmF0aXZlQ29tcG9uZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3ROb29wVXBkYXRlUXVldWVcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCBjYWxsZXJOYW1lKSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICclcyguLi4pOiBDYW4gb25seSB1cGRhdGUgYSBtb3VudGVkIG9yIG1vdW50aW5nIGNvbXBvbmVudC4gJyArICdUaGlzIHVzdWFsbHkgbWVhbnMgeW91IGNhbGxlZCAlcygpIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnQuICcgKyAnVGhpcyBpcyBhIG5vLW9wLiBQbGVhc2UgY2hlY2sgdGhlIGNvZGUgZm9yIHRoZSAlcyBjb21wb25lbnQuJywgY2FsbGVyTmFtZSwgY2FsbGVyTmFtZSwgcHVibGljSW5zdGFuY2UuY29uc3RydWN0b3IgJiYgcHVibGljSW5zdGFuY2UuY29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgJycpIDogdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgYWJzdHJhY3QgQVBJIGZvciBhbiB1cGRhdGUgcXVldWUuXG4gKi9cbnZhciBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IHtcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9zaXRlIGNvbXBvbmVudCBpcyBtb3VudGVkLlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB3ZSB3YW50IHRvIHRlc3QuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbW91bnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEBmaW5hbFxuICAgKi9cbiAgaXNNb3VudGVkOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVucXVldWUgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgYWZ0ZXIgYWxsIHRoZSBwZW5kaW5nIHVwZGF0ZXNcbiAgICogaGF2ZSBwcm9jZXNzZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRvIHVzZSBhcyBgdGhpc2AgY29udGV4dC5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxlZCBhZnRlciBzdGF0ZSBpcyB1cGRhdGVkLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVDYWxsYmFjazogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBjYWxsYmFjaykge30sXG5cbiAgLyoqXG4gICAqIEZvcmNlcyBhbiB1cGRhdGUuIFRoaXMgc2hvdWxkIG9ubHkgYmUgaW52b2tlZCB3aGVuIGl0IGlzIGtub3duIHdpdGhcbiAgICogY2VydGFpbnR5IHRoYXQgd2UgYXJlICoqbm90KiogaW4gYSBET00gdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIFlvdSBtYXkgd2FudCB0byBjYWxsIHRoaXMgd2hlbiB5b3Uga25vdyB0aGF0IHNvbWUgZGVlcGVyIGFzcGVjdCBvZiB0aGVcbiAgICogY29tcG9uZW50J3Mgc3RhdGUgaGFzIGNoYW5nZWQgYnV0IGBzZXRTdGF0ZWAgd2FzIG5vdCBjYWxsZWQuXG4gICAqXG4gICAqIFRoaXMgd2lsbCBub3QgaW52b2tlIGBzaG91bGRDb21wb25lbnRVcGRhdGVgLCBidXQgaXQgd2lsbCBpbnZva2VcbiAgICogYGNvbXBvbmVudFdpbGxVcGRhdGVgIGFuZCBgY29tcG9uZW50RGlkVXBkYXRlYC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZUZvcmNlVXBkYXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCAnZm9yY2VVcGRhdGUnKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYWxsIG9mIHRoZSBzdGF0ZS4gQWx3YXlzIHVzZSB0aGlzIG9yIGBzZXRTdGF0ZWAgdG8gbXV0YXRlIHN0YXRlLlxuICAgKiBZb3Ugc2hvdWxkIHRyZWF0IGB0aGlzLnN0YXRlYCBhcyBpbW11dGFibGUuXG4gICAqXG4gICAqIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IGB0aGlzLnN0YXRlYCB3aWxsIGJlIGltbWVkaWF0ZWx5IHVwZGF0ZWQsIHNvXG4gICAqIGFjY2Vzc2luZyBgdGhpcy5zdGF0ZWAgYWZ0ZXIgY2FsbGluZyB0aGlzIG1ldGhvZCBtYXkgcmV0dXJuIHRoZSBvbGQgdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29tcGxldGVTdGF0ZSBOZXh0IHN0YXRlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVSZXBsYWNlU3RhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgY29tcGxldGVTdGF0ZSkge1xuICAgIHdhcm5URFoocHVibGljSW5zdGFuY2UsICdyZXBsYWNlU3RhdGUnKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgc3RhdGUuIFRoaXMgb25seSBleGlzdHMgYmVjYXVzZSBfcGVuZGluZ1N0YXRlIGlzXG4gICAqIGludGVybmFsLiBUaGlzIHByb3ZpZGVzIGEgbWVyZ2luZyBzdHJhdGVneSB0aGF0IGlzIG5vdCBhdmFpbGFibGUgdG8gZGVlcFxuICAgKiBwcm9wZXJ0aWVzIHdoaWNoIGlzIGNvbmZ1c2luZy4gVE9ETzogRXhwb3NlIHBlbmRpbmdTdGF0ZSBvciBkb24ndCB1c2UgaXRcbiAgICogZHVyaW5nIHRoZSBtZXJnZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsU3RhdGUgTmV4dCBwYXJ0aWFsIHN0YXRlIHRvIGJlIG1lcmdlZCB3aXRoIHN0YXRlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVTZXRTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwYXJ0aWFsU3RhdGUpIHtcbiAgICB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCAnc2V0U3RhdGUnKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcGFydGlhbFByb3BzIFN1YnNldCBvZiB0aGUgbmV4dCBwcm9wcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlU2V0UHJvcHM6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcGFydGlhbFByb3BzKSB7XG4gICAgd2FyblREWihwdWJsaWNJbnN0YW5jZSwgJ3NldFByb3BzJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIGFsbCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHMgTmV3IHByb3BzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVSZXBsYWNlUHJvcHM6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcHJvcHMpIHtcbiAgICB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCAncmVwbGFjZVByb3BzJyk7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE5vb3BVcGRhdGVRdWV1ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RPd25lclxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIFJlYWN0T3duZXJzIGFyZSBjYXBhYmxlIG9mIHN0b3JpbmcgcmVmZXJlbmNlcyB0byBvd25lZCBjb21wb25lbnRzLlxuICpcbiAqIEFsbCBjb21wb25lbnRzIGFyZSBjYXBhYmxlIG9mIC8vYmVpbmcvLyByZWZlcmVuY2VkIGJ5IG93bmVyIGNvbXBvbmVudHMsIGJ1dFxuICogb25seSBSZWFjdE93bmVyIGNvbXBvbmVudHMgYXJlIGNhcGFibGUgb2YgLy9yZWZlcmVuY2luZy8vIG93bmVkIGNvbXBvbmVudHMuXG4gKiBUaGUgbmFtZWQgcmVmZXJlbmNlIGlzIGtub3duIGFzIGEgXCJyZWZcIi5cbiAqXG4gKiBSZWZzIGFyZSBhdmFpbGFibGUgd2hlbiBtb3VudGVkIGFuZCB1cGRhdGVkIGR1cmluZyByZWNvbmNpbGlhdGlvbi5cbiAqXG4gKiAgIHZhciBNeUNvbXBvbmVudCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAqICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICogICAgICAgcmV0dXJuIChcbiAqICAgICAgICAgPGRpdiBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfT5cbiAqICAgICAgICAgICA8Q3VzdG9tQ29tcG9uZW50IHJlZj1cImN1c3RvbVwiIC8+XG4gKiAgICAgICAgIDwvZGl2PlxuICogICAgICAgKTtcbiAqICAgICB9LFxuICogICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbigpIHtcbiAqICAgICAgIHRoaXMucmVmcy5jdXN0b20uaGFuZGxlQ2xpY2soKTtcbiAqICAgICB9LFxuICogICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAqICAgICAgIHRoaXMucmVmcy5jdXN0b20uaW5pdGlhbGl6ZSgpO1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogUmVmcyBzaG91bGQgcmFyZWx5IGJlIHVzZWQuIFdoZW4gcmVmcyBhcmUgdXNlZCwgdGhleSBzaG91bGQgb25seSBiZSBkb25lIHRvXG4gKiBjb250cm9sIGRhdGEgdGhhdCBpcyBub3QgaGFuZGxlZCBieSBSZWFjdCdzIGRhdGEgZmxvdy5cbiAqXG4gKiBAY2xhc3MgUmVhY3RPd25lclxuICovXG52YXIgUmVhY3RPd25lciA9IHtcblxuICAvKipcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBvYmplY3RcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb2JqZWN0YCBpcyBhIHZhbGlkIG93bmVyLlxuICAgKiBAZmluYWxcbiAgICovXG4gIGlzVmFsaWRPd25lcjogZnVuY3Rpb24gKG9iamVjdCkge1xuICAgIHJldHVybiAhIShvYmplY3QgJiYgdHlwZW9mIG9iamVjdC5hdHRhY2hSZWYgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9iamVjdC5kZXRhY2hSZWYgPT09ICdmdW5jdGlvbicpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGRzIGEgY29tcG9uZW50IGJ5IHJlZiB0byBhbiBvd25lciBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNvbXBvbmVudCBDb21wb25lbnQgdG8gcmVmZXJlbmNlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmIE5hbWUgYnkgd2hpY2ggdG8gcmVmZXIgdG8gdGhlIGNvbXBvbmVudC5cbiAgICogQHBhcmFtIHtSZWFjdE93bmVyfSBvd25lciBDb21wb25lbnQgb24gd2hpY2ggdG8gcmVjb3JkIHRoZSByZWYuXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGFkZENvbXBvbmVudEFzUmVmVG86IGZ1bmN0aW9uIChjb21wb25lbnQsIHJlZiwgb3duZXIpIHtcbiAgICAhUmVhY3RPd25lci5pc1ZhbGlkT3duZXIob3duZXIpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2FkZENvbXBvbmVudEFzUmVmVG8oLi4uKTogT25seSBhIFJlYWN0T3duZXIgY2FuIGhhdmUgcmVmcy4gWW91IG1pZ2h0ICcgKyAnYmUgYWRkaW5nIGEgcmVmIHRvIGEgY29tcG9uZW50IHRoYXQgd2FzIG5vdCBjcmVhdGVkIGluc2lkZSBhIGNvbXBvbmVudFxcJ3MgJyArICdgcmVuZGVyYCBtZXRob2QsIG9yIHlvdSBoYXZlIG11bHRpcGxlIGNvcGllcyBvZiBSZWFjdCBsb2FkZWQgJyArICcoZGV0YWlsczogaHR0cHM6Ly9mYi5tZS9yZWFjdC1yZWZzLW11c3QtaGF2ZS1vd25lcikuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIG93bmVyLmF0dGFjaFJlZihyZWYsIGNvbXBvbmVudCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBjb21wb25lbnQgYnkgcmVmIGZyb20gYW4gb3duZXIgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjb21wb25lbnQgQ29tcG9uZW50IHRvIGRlcmVmZXJlbmNlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmIE5hbWUgb2YgdGhlIHJlZiB0byByZW1vdmUuXG4gICAqIEBwYXJhbSB7UmVhY3RPd25lcn0gb3duZXIgQ29tcG9uZW50IG9uIHdoaWNoIHRoZSByZWYgaXMgcmVjb3JkZWQuXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHJlbW92ZUNvbXBvbmVudEFzUmVmRnJvbTogZnVuY3Rpb24gKGNvbXBvbmVudCwgcmVmLCBvd25lcikge1xuICAgICFSZWFjdE93bmVyLmlzVmFsaWRPd25lcihvd25lcikgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAncmVtb3ZlQ29tcG9uZW50QXNSZWZGcm9tKC4uLik6IE9ubHkgYSBSZWFjdE93bmVyIGNhbiBoYXZlIHJlZnMuIFlvdSBtaWdodCAnICsgJ2JlIHJlbW92aW5nIGEgcmVmIHRvIGEgY29tcG9uZW50IHRoYXQgd2FzIG5vdCBjcmVhdGVkIGluc2lkZSBhIGNvbXBvbmVudFxcJ3MgJyArICdgcmVuZGVyYCBtZXRob2QsIG9yIHlvdSBoYXZlIG11bHRpcGxlIGNvcGllcyBvZiBSZWFjdCBsb2FkZWQgJyArICcoZGV0YWlsczogaHR0cHM6Ly9mYi5tZS9yZWFjdC1yZWZzLW11c3QtaGF2ZS1vd25lcikuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIC8vIENoZWNrIHRoYXQgYGNvbXBvbmVudGAgaXMgc3RpbGwgdGhlIGN1cnJlbnQgcmVmIGJlY2F1c2Ugd2UgZG8gbm90IHdhbnQgdG9cbiAgICAvLyBkZXRhY2ggdGhlIHJlZiBpZiBhbm90aGVyIGNvbXBvbmVudCBzdG9sZSBpdC5cbiAgICBpZiAob3duZXIuZ2V0UHVibGljSW5zdGFuY2UoKS5yZWZzW3JlZl0gPT09IGNvbXBvbmVudC5nZXRQdWJsaWNJbnN0YW5jZSgpKSB7XG4gICAgICBvd25lci5kZXRhY2hSZWYocmVmKTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE93bmVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFBlcmZcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFJlYWN0UGVyZiBpcyBhIGdlbmVyYWwgQU9QIHN5c3RlbSBkZXNpZ25lZCB0byBtZWFzdXJlIHBlcmZvcm1hbmNlLiBUaGlzXG4gKiBtb2R1bGUgb25seSBoYXMgdGhlIGhvb2tzOiBzZWUgUmVhY3REZWZhdWx0UGVyZiBmb3IgdGhlIGFuYWx5c2lzIHRvb2wuXG4gKi9cbnZhciBSZWFjdFBlcmYgPSB7XG4gIC8qKlxuICAgKiBCb29sZWFuIHRvIGVuYWJsZS9kaXNhYmxlIG1lYXN1cmVtZW50LiBTZXQgdG8gZmFsc2UgYnkgZGVmYXVsdCB0byBwcmV2ZW50XG4gICAqIGFjY2lkZW50YWwgbG9nZ2luZyBhbmQgcGVyZiBsb3NzLlxuICAgKi9cbiAgZW5hYmxlTWVhc3VyZTogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEhvbGRzIG9udG8gdGhlIG1lYXN1cmUgZnVuY3Rpb24gaW4gdXNlLiBCeSBkZWZhdWx0LCBkb24ndCBtZWFzdXJlXG4gICAqIGFueXRoaW5nLCBidXQgd2UnbGwgb3ZlcnJpZGUgdGhpcyBpZiB3ZSBpbmplY3QgYSBtZWFzdXJlIGZ1bmN0aW9uLlxuICAgKi9cbiAgc3RvcmVkTWVhc3VyZTogX25vTWVhc3VyZSxcblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gb2JqZWN0TmFtZVxuICAgKiBAcGFyYW0ge29iamVjdDxzdHJpbmc+fSBtZXRob2ROYW1lc1xuICAgKi9cbiAgbWVhc3VyZU1ldGhvZHM6IGZ1bmN0aW9uIChvYmplY3QsIG9iamVjdE5hbWUsIG1ldGhvZE5hbWVzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRob2ROYW1lcykge1xuICAgICAgICBpZiAoIW1ldGhvZE5hbWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBvYmplY3Rba2V5XSA9IFJlYWN0UGVyZi5tZWFzdXJlKG9iamVjdE5hbWUsIG1ldGhvZE5hbWVzW2tleV0sIG9iamVjdFtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVzZSB0aGlzIHRvIHdyYXAgbWV0aG9kcyB5b3Ugd2FudCB0byBtZWFzdXJlLiBaZXJvIG92ZXJoZWFkIGluIHByb2R1Y3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvYmpOYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbk5hbWVcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xuICAgKiBAcmV0dXJuIHtmdW5jdGlvbn1cbiAgICovXG4gIG1lYXN1cmU6IGZ1bmN0aW9uIChvYmpOYW1lLCBmbk5hbWUsIGZ1bmMpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIG1lYXN1cmVkRnVuYyA9IG51bGw7XG4gICAgICB2YXIgd3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFJlYWN0UGVyZi5lbmFibGVNZWFzdXJlKSB7XG4gICAgICAgICAgaWYgKCFtZWFzdXJlZEZ1bmMpIHtcbiAgICAgICAgICAgIG1lYXN1cmVkRnVuYyA9IFJlYWN0UGVyZi5zdG9yZWRNZWFzdXJlKG9iak5hbWUsIGZuTmFtZSwgZnVuYyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBtZWFzdXJlZEZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICAgIHdyYXBwZXIuZGlzcGxheU5hbWUgPSBvYmpOYW1lICsgJ18nICsgZm5OYW1lO1xuICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgfVxuICAgIHJldHVybiBmdW5jO1xuICB9LFxuXG4gIGluamVjdGlvbjoge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG1lYXN1cmVcbiAgICAgKi9cbiAgICBpbmplY3RNZWFzdXJlOiBmdW5jdGlvbiAobWVhc3VyZSkge1xuICAgICAgUmVhY3RQZXJmLnN0b3JlZE1lYXN1cmUgPSBtZWFzdXJlO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBTaW1wbHkgcGFzc2VzIHRocm91Z2ggdGhlIG1lYXN1cmVkIGZ1bmN0aW9uLCB3aXRob3V0IG1lYXN1cmluZyBpdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gb2JqTmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IGZuTmFtZVxuICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xuICogQHJldHVybiB7ZnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIF9ub01lYXN1cmUob2JqTmFtZSwgZm5OYW1lLCBmdW5jKSB7XG4gIHJldHVybiBmdW5jO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UGVyZjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHt9O1xuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHtcbiAgICBwcm9wOiAncHJvcCcsXG4gICAgY29udGV4dDogJ2NvbnRleHQnLFxuICAgIGNoaWxkQ29udGV4dDogJ2NoaWxkIGNvbnRleHQnXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBrZXlNaXJyb3IgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlNaXJyb3InKTtcblxudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSBrZXlNaXJyb3Ioe1xuICBwcm9wOiBudWxsLFxuICBjb250ZXh0OiBudWxsLFxuICBjaGlsZENvbnRleHQ6IG51bGxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbnM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UHJvcFR5cGVzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMnKTtcblxudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgZ2V0SXRlcmF0b3JGbiA9IHJlcXVpcmUoJy4vZ2V0SXRlcmF0b3JGbicpO1xuXG4vKipcbiAqIENvbGxlY3Rpb24gb2YgbWV0aG9kcyB0aGF0IGFsbG93IGRlY2xhcmF0aW9uIGFuZCB2YWxpZGF0aW9uIG9mIHByb3BzIHRoYXQgYXJlXG4gKiBzdXBwbGllZCB0byBSZWFjdCBjb21wb25lbnRzLiBFeGFtcGxlIHVzYWdlOlxuICpcbiAqICAgdmFyIFByb3BzID0gcmVxdWlyZSgnUmVhY3RQcm9wVHlwZXMnKTtcbiAqICAgdmFyIE15QXJ0aWNsZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAqICAgICBwcm9wVHlwZXM6IHtcbiAqICAgICAgIC8vIEFuIG9wdGlvbmFsIHN0cmluZyBwcm9wIG5hbWVkIFwiZGVzY3JpcHRpb25cIi5cbiAqICAgICAgIGRlc2NyaXB0aW9uOiBQcm9wcy5zdHJpbmcsXG4gKlxuICogICAgICAgLy8gQSByZXF1aXJlZCBlbnVtIHByb3AgbmFtZWQgXCJjYXRlZ29yeVwiLlxuICogICAgICAgY2F0ZWdvcnk6IFByb3BzLm9uZU9mKFsnTmV3cycsJ1Bob3RvcyddKS5pc1JlcXVpcmVkLFxuICpcbiAqICAgICAgIC8vIEEgcHJvcCBuYW1lZCBcImRpYWxvZ1wiIHRoYXQgcmVxdWlyZXMgYW4gaW5zdGFuY2Ugb2YgRGlhbG9nLlxuICogICAgICAgZGlhbG9nOiBQcm9wcy5pbnN0YW5jZU9mKERpYWxvZykuaXNSZXF1aXJlZFxuICogICAgIH0sXG4gKiAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHsgLi4uIH1cbiAqICAgfSk7XG4gKlxuICogQSBtb3JlIGZvcm1hbCBzcGVjaWZpY2F0aW9uIG9mIGhvdyB0aGVzZSBtZXRob2RzIGFyZSB1c2VkOlxuICpcbiAqICAgdHlwZSA6PSBhcnJheXxib29sfGZ1bmN8b2JqZWN0fG51bWJlcnxzdHJpbmd8b25lT2YoWy4uLl0pfGluc3RhbmNlT2YoLi4uKVxuICogICBkZWNsIDo9IFJlYWN0UHJvcFR5cGVzLnt0eXBlfSguaXNSZXF1aXJlZCk/XG4gKlxuICogRWFjaCBhbmQgZXZlcnkgZGVjbGFyYXRpb24gcHJvZHVjZXMgYSBmdW5jdGlvbiB3aXRoIHRoZSBzYW1lIHNpZ25hdHVyZS4gVGhpc1xuICogYWxsb3dzIHRoZSBjcmVhdGlvbiBvZiBjdXN0b20gdmFsaWRhdGlvbiBmdW5jdGlvbnMuIEZvciBleGFtcGxlOlxuICpcbiAqICB2YXIgTXlMaW5rID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgcHJvcFR5cGVzOiB7XG4gKiAgICAgIC8vIEFuIG9wdGlvbmFsIHN0cmluZyBvciBVUkkgcHJvcCBuYW1lZCBcImhyZWZcIi5cbiAqICAgICAgaHJlZjogZnVuY3Rpb24ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lKSB7XG4gKiAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAqICAgICAgICBpZiAocHJvcFZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHByb3BWYWx1ZSAhPT0gJ3N0cmluZycgJiZcbiAqICAgICAgICAgICAgIShwcm9wVmFsdWUgaW5zdGFuY2VvZiBVUkkpKSB7XG4gKiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKFxuICogICAgICAgICAgICAnRXhwZWN0ZWQgYSBzdHJpbmcgb3IgYW4gVVJJIGZvciAnICsgcHJvcE5hbWUgKyAnIGluICcgK1xuICogICAgICAgICAgICBjb21wb25lbnROYW1lXG4gKiAgICAgICAgICApO1xuICogICAgICAgIH1cbiAqICAgICAgfVxuICogICAgfSxcbiAqICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7Li4ufVxuICogIH0pO1xuICpcbiAqIEBpbnRlcm5hbFxuICovXG5cbnZhciBBTk9OWU1PVVMgPSAnPDxhbm9ueW1vdXM+Pic7XG5cbnZhciBSZWFjdFByb3BUeXBlcyA9IHtcbiAgYXJyYXk6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdhcnJheScpLFxuICBib29sOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignYm9vbGVhbicpLFxuICBmdW5jOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignZnVuY3Rpb24nKSxcbiAgbnVtYmVyOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignbnVtYmVyJyksXG4gIG9iamVjdDogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ29iamVjdCcpLFxuICBzdHJpbmc6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdzdHJpbmcnKSxcblxuICBhbnk6IGNyZWF0ZUFueVR5cGVDaGVja2VyKCksXG4gIGFycmF5T2Y6IGNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlcixcbiAgZWxlbWVudDogY3JlYXRlRWxlbWVudFR5cGVDaGVja2VyKCksXG4gIGluc3RhbmNlT2Y6IGNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIsXG4gIG5vZGU6IGNyZWF0ZU5vZGVDaGVja2VyKCksXG4gIG9iamVjdE9mOiBjcmVhdGVPYmplY3RPZlR5cGVDaGVja2VyLFxuICBvbmVPZjogY3JlYXRlRW51bVR5cGVDaGVja2VyLFxuICBvbmVPZlR5cGU6IGNyZWF0ZVVuaW9uVHlwZUNoZWNrZXIsXG4gIHNoYXBlOiBjcmVhdGVTaGFwZVR5cGVDaGVja2VyXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSkge1xuICBmdW5jdGlvbiBjaGVja1R5cGUoaXNSZXF1aXJlZCwgcHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudE5hbWUgfHwgQU5PTllNT1VTO1xuICAgIHByb3BGdWxsTmFtZSA9IHByb3BGdWxsTmFtZSB8fCBwcm9wTmFtZTtcbiAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09IG51bGwpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICBpZiAoaXNSZXF1aXJlZCkge1xuICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdSZXF1aXJlZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHdhcyBub3Qgc3BlY2lmaWVkIGluICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLicpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKTtcbiAgICB9XG4gIH1cblxuICB2YXIgY2hhaW5lZENoZWNrVHlwZSA9IGNoZWNrVHlwZS5iaW5kKG51bGwsIGZhbHNlKTtcbiAgY2hhaW5lZENoZWNrVHlwZS5pc1JlcXVpcmVkID0gY2hlY2tUeXBlLmJpbmQobnVsbCwgdHJ1ZSk7XG5cbiAgcmV0dXJuIGNoYWluZWRDaGVja1R5cGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKGV4cGVjdGVkVHlwZSkge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgaWYgKHByb3BUeXBlICE9PSBleHBlY3RlZFR5cGUpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICAvLyBgcHJvcFZhbHVlYCBiZWluZyBpbnN0YW5jZSBvZiwgc2F5LCBkYXRlL3JlZ2V4cCwgcGFzcyB0aGUgJ29iamVjdCdcbiAgICAgIC8vIGNoZWNrLCBidXQgd2UgY2FuIG9mZmVyIGEgbW9yZSBwcmVjaXNlIGVycm9yIG1lc3NhZ2UgaGVyZSByYXRoZXIgdGhhblxuICAgICAgLy8gJ29mIHR5cGUgYG9iamVjdGAnLlxuICAgICAgdmFyIHByZWNpc2VUeXBlID0gZ2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKTtcblxuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcmVjaXNlVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCAnKSArICgnYCcgKyBleHBlY3RlZFR5cGUgKyAnYC4nKSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFueVR5cGVDaGVja2VyKCkge1xuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIoZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJucyhudWxsKSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlcih0eXBlQ2hlY2tlcikge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYW4gYXJyYXkuJykpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGVycm9yID0gdHlwZUNoZWNrZXIocHJvcFZhbHVlLCBpLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJ1snICsgaSArICddJyk7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlcigpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgaWYgKCFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQocHJvcHNbcHJvcE5hbWVdKSkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBzdXBwbGllZCB0byAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYSBzaW5nbGUgUmVhY3RFbGVtZW50LicpKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2VUeXBlQ2hlY2tlcihleHBlY3RlZENsYXNzKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIGlmICghKHByb3BzW3Byb3BOYW1lXSBpbnN0YW5jZW9mIGV4cGVjdGVkQ2xhc3MpKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgdmFyIGV4cGVjdGVkQ2xhc3NOYW1lID0gZXhwZWN0ZWRDbGFzcy5uYW1lIHx8IEFOT05ZTU9VUztcbiAgICAgIHZhciBhY3R1YWxDbGFzc05hbWUgPSBnZXRDbGFzc05hbWUocHJvcHNbcHJvcE5hbWVdKTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgYWN0dWFsQ2xhc3NOYW1lICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkICcpICsgKCdpbnN0YW5jZSBvZiBgJyArIGV4cGVjdGVkQ2xhc3NOYW1lICsgJ2AuJykpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVFbnVtVHlwZUNoZWNrZXIoZXhwZWN0ZWRWYWx1ZXMpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGV4cGVjdGVkVmFsdWVzKSkge1xuICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mLCBleHBlY3RlZCBhbiBpbnN0YW5jZSBvZiBhcnJheS4nKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleHBlY3RlZFZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHByb3BWYWx1ZSA9PT0gZXhwZWN0ZWRWYWx1ZXNbaV0pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICB2YXIgdmFsdWVzU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZXhwZWN0ZWRWYWx1ZXMpO1xuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB2YWx1ZSBgJyArIHByb3BWYWx1ZSArICdgICcgKyAoJ3N1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBvbmUgb2YgJyArIHZhbHVlc1N0cmluZyArICcuJykpO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIodHlwZUNoZWNrZXIpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuICAgIGlmIChwcm9wVHlwZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByb3BUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGFuIG9iamVjdC4nKSk7XG4gICAgfVxuICAgIGZvciAodmFyIGtleSBpbiBwcm9wVmFsdWUpIHtcbiAgICAgIGlmIChwcm9wVmFsdWUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICB2YXIgZXJyb3IgPSB0eXBlQ2hlY2tlcihwcm9wVmFsdWUsIGtleSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSArICcuJyArIGtleSk7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVVuaW9uVHlwZUNoZWNrZXIoYXJyYXlPZlR5cGVDaGVja2Vycykge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXlPZlR5cGVDaGVja2VycykpIHtcbiAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudCBzdXBwbGllZCB0byBvbmVPZlR5cGUsIGV4cGVjdGVkIGFuIGluc3RhbmNlIG9mIGFycmF5LicpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheU9mVHlwZUNoZWNrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY2hlY2tlciA9IGFycmF5T2ZUeXBlQ2hlY2tlcnNbaV07XG4gICAgICBpZiAoY2hlY2tlcihwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agc3VwcGxpZWQgdG8gJyArICgnYCcgKyBjb21wb25lbnROYW1lICsgJ2AuJykpO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vZGVDaGVja2VyKCkge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICBpZiAoIWlzTm9kZShwcm9wc1twcm9wTmFtZV0pKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHN1cHBsaWVkIHRvICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhIFJlYWN0Tm9kZS4nKSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNoYXBlVHlwZUNoZWNrZXIoc2hhcGVUeXBlcykge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgaWYgKHByb3BUeXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlIGAnICsgcHJvcFR5cGUgKyAnYCAnICsgKCdzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYG9iamVjdGAuJykpO1xuICAgIH1cbiAgICBmb3IgKHZhciBrZXkgaW4gc2hhcGVUeXBlcykge1xuICAgICAgdmFyIGNoZWNrZXIgPSBzaGFwZVR5cGVzW2tleV07XG4gICAgICBpZiAoIWNoZWNrZXIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgZXJyb3IgPSBjaGVja2VyKHByb3BWYWx1ZSwga2V5LCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJy4nICsga2V5KTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGlzTm9kZShwcm9wVmFsdWUpIHtcbiAgc3dpdGNoICh0eXBlb2YgcHJvcFZhbHVlKSB7XG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgIGNhc2UgJ3VuZGVmaW5lZCc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIHJldHVybiAhcHJvcFZhbHVlO1xuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBwcm9wVmFsdWUuZXZlcnkoaXNOb2RlKTtcbiAgICAgIH1cbiAgICAgIGlmIChwcm9wVmFsdWUgPT09IG51bGwgfHwgUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KHByb3BWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihwcm9wVmFsdWUpO1xuICAgICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKHByb3BWYWx1ZSk7XG4gICAgICAgIHZhciBzdGVwO1xuICAgICAgICBpZiAoaXRlcmF0b3JGbiAhPT0gcHJvcFZhbHVlLmVudHJpZXMpIHtcbiAgICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICBpZiAoIWlzTm9kZShzdGVwLnZhbHVlKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEl0ZXJhdG9yIHdpbGwgcHJvdmlkZSBlbnRyeSBbayx2XSB0dXBsZXMgcmF0aGVyIHRoYW4gdmFsdWVzLlxuICAgICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHN0ZXAudmFsdWU7XG4gICAgICAgICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgaWYgKCFpc05vZGUoZW50cnlbMV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gRXF1aXZhbGVudCBvZiBgdHlwZW9mYCBidXQgd2l0aCBzcGVjaWFsIGhhbmRsaW5nIGZvciBhcnJheSBhbmQgcmVnZXhwLlxuZnVuY3Rpb24gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKSB7XG4gIHZhciBwcm9wVHlwZSA9IHR5cGVvZiBwcm9wVmFsdWU7XG4gIGlmIChBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHtcbiAgICByZXR1cm4gJ2FycmF5JztcbiAgfVxuICBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgLy8gT2xkIHdlYmtpdHMgKGF0IGxlYXN0IHVudGlsIEFuZHJvaWQgNC4wKSByZXR1cm4gJ2Z1bmN0aW9uJyByYXRoZXIgdGhhblxuICAgIC8vICdvYmplY3QnIGZvciB0eXBlb2YgYSBSZWdFeHAuIFdlJ2xsIG5vcm1hbGl6ZSB0aGlzIGhlcmUgc28gdGhhdCAvYmxhL1xuICAgIC8vIHBhc3NlcyBQcm9wVHlwZXMub2JqZWN0LlxuICAgIHJldHVybiAnb2JqZWN0JztcbiAgfVxuICByZXR1cm4gcHJvcFR5cGU7XG59XG5cbi8vIFRoaXMgaGFuZGxlcyBtb3JlIHR5cGVzIHRoYW4gYGdldFByb3BUeXBlYC4gT25seSB1c2VkIGZvciBlcnJvciBtZXNzYWdlcy5cbi8vIFNlZSBgY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXJgLlxuZnVuY3Rpb24gZ2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKSB7XG4gIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gIGlmIChwcm9wVHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgcmV0dXJuICdkYXRlJztcbiAgICB9IGVsc2UgaWYgKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgcmV0dXJuICdyZWdleHAnO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcHJvcFR5cGU7XG59XG5cbi8vIFJldHVybnMgY2xhc3MgbmFtZSBvZiB0aGUgb2JqZWN0LCBpZiBhbnkuXG5mdW5jdGlvbiBnZXRDbGFzc05hbWUocHJvcFZhbHVlKSB7XG4gIGlmICghcHJvcFZhbHVlLmNvbnN0cnVjdG9yIHx8ICFwcm9wVmFsdWUuY29uc3RydWN0b3IubmFtZSkge1xuICAgIHJldHVybiAnPDxhbm9ueW1vdXM+Pic7XG4gIH1cbiAgcmV0dXJuIHByb3BWYWx1ZS5jb25zdHJ1Y3Rvci5uYW1lO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENhbGxiYWNrUXVldWUgPSByZXF1aXJlKCcuL0NhbGxiYWNrUXVldWUnKTtcbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcbnZhciBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuL1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlcicpO1xudmFyIFJlYWN0RE9NRmVhdHVyZUZsYWdzID0gcmVxdWlyZSgnLi9SZWFjdERPTUZlYXR1cmVGbGFncycpO1xudmFyIFJlYWN0SW5wdXRTZWxlY3Rpb24gPSByZXF1aXJlKCcuL1JlYWN0SW5wdXRTZWxlY3Rpb24nKTtcbnZhciBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vVHJhbnNhY3Rpb24nKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xuXG4vKipcbiAqIEVuc3VyZXMgdGhhdCwgd2hlbiBwb3NzaWJsZSwgdGhlIHNlbGVjdGlvbiByYW5nZSAoY3VycmVudGx5IHNlbGVjdGVkIHRleHRcbiAqIGlucHV0KSBpcyBub3QgZGlzdHVyYmVkIGJ5IHBlcmZvcm1pbmcgdGhlIHRyYW5zYWN0aW9uLlxuICovXG52YXIgU0VMRUNUSU9OX1JFU1RPUkFUSU9OID0ge1xuICAvKipcbiAgICogQHJldHVybiB7U2VsZWN0aW9ufSBTZWxlY3Rpb24gaW5mb3JtYXRpb24uXG4gICAqL1xuICBpbml0aWFsaXplOiBSZWFjdElucHV0U2VsZWN0aW9uLmdldFNlbGVjdGlvbkluZm9ybWF0aW9uLFxuICAvKipcbiAgICogQHBhcmFtIHtTZWxlY3Rpb259IHNlbCBTZWxlY3Rpb24gaW5mb3JtYXRpb24gcmV0dXJuZWQgZnJvbSBgaW5pdGlhbGl6ZWAuXG4gICAqL1xuICBjbG9zZTogUmVhY3RJbnB1dFNlbGVjdGlvbi5yZXN0b3JlU2VsZWN0aW9uXG59O1xuXG4vKipcbiAqIFN1cHByZXNzZXMgZXZlbnRzIChibHVyL2ZvY3VzKSB0aGF0IGNvdWxkIGJlIGluYWR2ZXJ0ZW50bHkgZGlzcGF0Y2hlZCBkdWUgdG9cbiAqIGhpZ2ggbGV2ZWwgRE9NIG1hbmlwdWxhdGlvbnMgKGxpa2UgdGVtcG9yYXJpbHkgcmVtb3ZpbmcgYSB0ZXh0IGlucHV0IGZyb20gdGhlXG4gKiBET00pLlxuICovXG52YXIgRVZFTlRfU1VQUFJFU1NJT04gPSB7XG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZW5hYmxlZCBzdGF0dXMgb2YgYFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcmAgYmVmb3JlXG4gICAqIHRoZSByZWNvbmNpbGlhdGlvbi5cbiAgICovXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY3VycmVudGx5RW5hYmxlZCA9IFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5pc0VuYWJsZWQoKTtcbiAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuc2V0RW5hYmxlZChmYWxzZSk7XG4gICAgcmV0dXJuIGN1cnJlbnRseUVuYWJsZWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJldmlvdXNseUVuYWJsZWQgRW5hYmxlZCBzdGF0dXMgb2ZcbiAgICogICBgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyYCBiZWZvcmUgdGhlIHJlY29uY2lsaWF0aW9uIG9jY3VycmVkLiBgY2xvc2VgXG4gICAqICAgcmVzdG9yZXMgdGhlIHByZXZpb3VzIHZhbHVlLlxuICAgKi9cbiAgY2xvc2U6IGZ1bmN0aW9uIChwcmV2aW91c2x5RW5hYmxlZCkge1xuICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5zZXRFbmFibGVkKHByZXZpb3VzbHlFbmFibGVkKTtcbiAgfVxufTtcblxuLyoqXG4gKiBQcm92aWRlcyBhIHF1ZXVlIGZvciBjb2xsZWN0aW5nIGBjb21wb25lbnREaWRNb3VudGAgYW5kXG4gKiBgY29tcG9uZW50RGlkVXBkYXRlYCBjYWxsYmFja3MgZHVyaW5nIHRoZSB0aGUgdHJhbnNhY3Rpb24uXG4gKi9cbnZhciBPTl9ET01fUkVBRFlfUVVFVUVJTkcgPSB7XG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgaW50ZXJuYWwgYG9uRE9NUmVhZHlgIHF1ZXVlLlxuICAgKi9cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVhY3RNb3VudFJlYWR5LnJlc2V0KCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFmdGVyIERPTSBpcyBmbHVzaGVkLCBpbnZva2UgYWxsIHJlZ2lzdGVyZWQgYG9uRE9NUmVhZHlgIGNhbGxiYWNrcy5cbiAgICovXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkubm90aWZ5QWxsKCk7XG4gIH1cbn07XG5cbi8qKlxuICogRXhlY3V0ZWQgd2l0aGluIHRoZSBzY29wZSBvZiB0aGUgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gQ29uc2lkZXIgdGhlc2UgYXNcbiAqIGJlaW5nIG1lbWJlciBtZXRob2RzLCBidXQgd2l0aCBhbiBpbXBsaWVkIG9yZGVyaW5nIHdoaWxlIGJlaW5nIGlzb2xhdGVkIGZyb21cbiAqIGVhY2ggb3RoZXIuXG4gKi9cbnZhciBUUkFOU0FDVElPTl9XUkFQUEVSUyA9IFtTRUxFQ1RJT05fUkVTVE9SQVRJT04sIEVWRU5UX1NVUFBSRVNTSU9OLCBPTl9ET01fUkVBRFlfUVVFVUVJTkddO1xuXG4vKipcbiAqIEN1cnJlbnRseTpcbiAqIC0gVGhlIG9yZGVyIHRoYXQgdGhlc2UgYXJlIGxpc3RlZCBpbiB0aGUgdHJhbnNhY3Rpb24gaXMgY3JpdGljYWw6XG4gKiAtIFN1cHByZXNzZXMgZXZlbnRzLlxuICogLSBSZXN0b3JlcyBzZWxlY3Rpb24gcmFuZ2UuXG4gKlxuICogRnV0dXJlOlxuICogLSBSZXN0b3JlIGRvY3VtZW50L292ZXJmbG93IHNjcm9sbCBwb3NpdGlvbnMgdGhhdCB3ZXJlIHVuaW50ZW50aW9uYWxseVxuICogICBtb2RpZmllZCB2aWEgRE9NIGluc2VydGlvbnMgYWJvdmUgdGhlIHRvcCB2aWV3cG9ydCBib3VuZGFyeS5cbiAqIC0gSW1wbGVtZW50L2ludGVncmF0ZSB3aXRoIGN1c3RvbWl6ZWQgY29uc3RyYWludCBiYXNlZCBsYXlvdXQgc3lzdGVtIGFuZCBrZWVwXG4gKiAgIHRyYWNrIG9mIHdoaWNoIGRpbWVuc2lvbnMgbXVzdCBiZSByZW1lYXN1cmVkLlxuICpcbiAqIEBjbGFzcyBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uXG4gKi9cbmZ1bmN0aW9uIFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24oZm9yY2VIVE1MKSB7XG4gIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcbiAgLy8gT25seSBzZXJ2ZXItc2lkZSByZW5kZXJpbmcgcmVhbGx5IG5lZWRzIHRoaXMgb3B0aW9uIChzZWVcbiAgLy8gYFJlYWN0U2VydmVyUmVuZGVyaW5nYCksIGJ1dCBzZXJ2ZXItc2lkZSB1c2VzXG4gIC8vIGBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uYCBpbnN0ZWFkLiBUaGlzIG9wdGlvbiBpcyBoZXJlIHNvIHRoYXQgaXQnc1xuICAvLyBhY2Nlc3NpYmxlIGFuZCBkZWZhdWx0cyB0byBmYWxzZSB3aGVuIGBSZWFjdERPTUNvbXBvbmVudGAgYW5kXG4gIC8vIGBSZWFjdFRleHRDb21wb25lbnRgIGNoZWNrcyBpdCBpbiBgbW91bnRDb21wb25lbnRgLmBcbiAgdGhpcy5yZW5kZXJUb1N0YXRpY01hcmt1cCA9IGZhbHNlO1xuICB0aGlzLnJlYWN0TW91bnRSZWFkeSA9IENhbGxiYWNrUXVldWUuZ2V0UG9vbGVkKG51bGwpO1xuICB0aGlzLnVzZUNyZWF0ZUVsZW1lbnQgPSAhZm9yY2VIVE1MICYmIFJlYWN0RE9NRmVhdHVyZUZsYWdzLnVzZUNyZWF0ZUVsZW1lbnQ7XG59XG5cbnZhciBNaXhpbiA9IHtcbiAgLyoqXG4gICAqIEBzZWUgVHJhbnNhY3Rpb25cbiAgICogQGFic3RyYWN0XG4gICAqIEBmaW5hbFxuICAgKiBAcmV0dXJuIHthcnJheTxvYmplY3Q+fSBMaXN0IG9mIG9wZXJhdGlvbiB3cmFwIHByb2NlZHVyZXMuXG4gICAqICAgVE9ETzogY29udmVydCB0byBhcnJheTxUcmFuc2FjdGlvbldyYXBwZXI+XG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFRSQU5TQUNUSU9OX1dSQVBQRVJTO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBxdWV1ZSB0byBjb2xsZWN0IGBvbkRPTVJlYWR5YCBjYWxsYmFja3Mgd2l0aC5cbiAgICovXG4gIGdldFJlYWN0TW91bnRSZWFkeTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWN0TW91bnRSZWFkeTtcbiAgfSxcblxuICAvKipcbiAgICogYFBvb2xlZENsYXNzYCBsb29rcyBmb3IgdGhpcywgYW5kIHdpbGwgaW52b2tlIHRoaXMgYmVmb3JlIGFsbG93aW5nIHRoaXNcbiAgICogaW5zdGFuY2UgdG8gYmUgcmV1c2VkLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIENhbGxiYWNrUXVldWUucmVsZWFzZSh0aGlzLnJlYWN0TW91bnRSZWFkeSk7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkgPSBudWxsO1xuICB9XG59O1xuXG5hc3NpZ24oUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5wcm90b3R5cGUsIFRyYW5zYWN0aW9uLk1peGluLCBNaXhpbik7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFJlY29uY2lsZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFJlZiA9IHJlcXVpcmUoJy4vUmVhY3RSZWYnKTtcblxuLyoqXG4gKiBIZWxwZXIgdG8gY2FsbCBSZWFjdFJlZi5hdHRhY2hSZWZzIHdpdGggdGhpcyBjb21wb3NpdGUgY29tcG9uZW50LCBzcGxpdCBvdXRcbiAqIHRvIGF2b2lkIGFsbG9jYXRpb25zIGluIHRoZSB0cmFuc2FjdGlvbiBtb3VudC1yZWFkeSBxdWV1ZS5cbiAqL1xuZnVuY3Rpb24gYXR0YWNoUmVmcygpIHtcbiAgUmVhY3RSZWYuYXR0YWNoUmVmcyh0aGlzLCB0aGlzLl9jdXJyZW50RWxlbWVudCk7XG59XG5cbnZhciBSZWFjdFJlY29uY2lsZXIgPSB7XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBjb21wb25lbnQsIHJlbmRlcnMgbWFya3VwLCBhbmQgcmVnaXN0ZXJzIGV2ZW50IGxpc3RlbmVycy5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gaW50ZXJuYWxJbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHJldHVybiB7P3N0cmluZ30gUmVuZGVyZWQgbWFya3VwIHRvIGJlIGluc2VydGVkIGludG8gdGhlIERPTS5cbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdmFyIG1hcmt1cCA9IGludGVybmFsSW5zdGFuY2UubW91bnRDb21wb25lbnQocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgaWYgKGludGVybmFsSW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50ICYmIGludGVybmFsSW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50LnJlZiAhPSBudWxsKSB7XG4gICAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKGF0dGFjaFJlZnMsIGludGVybmFsSW5zdGFuY2UpO1xuICAgIH1cbiAgICByZXR1cm4gbWFya3VwO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyBhbnkgcmVzb3VyY2VzIGFsbG9jYXRlZCBieSBgbW91bnRDb21wb25lbnRgLlxuICAgKlxuICAgKiBAZmluYWxcbiAgICogQGludGVybmFsXG4gICAqL1xuICB1bm1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAoaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgIFJlYWN0UmVmLmRldGFjaFJlZnMoaW50ZXJuYWxJbnN0YW5jZSwgaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQpO1xuICAgIGludGVybmFsSW5zdGFuY2UudW5tb3VudENvbXBvbmVudCgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYSBjb21wb25lbnQgdXNpbmcgYSBuZXcgZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gaW50ZXJuYWxJbnN0YW5jZVxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnRcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHJlY2VpdmVDb21wb25lbnQ6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCBuZXh0RWxlbWVudCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB2YXIgcHJldkVsZW1lbnQgPSBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudDtcblxuICAgIGlmIChuZXh0RWxlbWVudCA9PT0gcHJldkVsZW1lbnQgJiYgY29udGV4dCA9PT0gaW50ZXJuYWxJbnN0YW5jZS5fY29udGV4dCkge1xuICAgICAgLy8gU2luY2UgZWxlbWVudHMgYXJlIGltbXV0YWJsZSBhZnRlciB0aGUgb3duZXIgaXMgcmVuZGVyZWQsXG4gICAgICAvLyB3ZSBjYW4gZG8gYSBjaGVhcCBpZGVudGl0eSBjb21wYXJlIGhlcmUgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXMgYVxuICAgICAgLy8gc3VwZXJmbHVvdXMgcmVjb25jaWxlLiBJdCdzIHBvc3NpYmxlIGZvciBzdGF0ZSB0byBiZSBtdXRhYmxlIGJ1dCBzdWNoXG4gICAgICAvLyBjaGFuZ2Ugc2hvdWxkIHRyaWdnZXIgYW4gdXBkYXRlIG9mIHRoZSBvd25lciB3aGljaCB3b3VsZCByZWNyZWF0ZVxuICAgICAgLy8gdGhlIGVsZW1lbnQuIFdlIGV4cGxpY2l0bHkgY2hlY2sgZm9yIHRoZSBleGlzdGVuY2Ugb2YgYW4gb3duZXIgc2luY2VcbiAgICAgIC8vIGl0J3MgcG9zc2libGUgZm9yIGFuIGVsZW1lbnQgY3JlYXRlZCBvdXRzaWRlIGEgY29tcG9zaXRlIHRvIGJlXG4gICAgICAvLyBkZWVwbHkgbXV0YXRlZCBhbmQgcmV1c2VkLlxuXG4gICAgICAvLyBUT0RPOiBCYWlsaW5nIG91dCBlYXJseSBpcyBqdXN0IGEgcGVyZiBvcHRpbWl6YXRpb24gcmlnaHQ/XG4gICAgICAvLyBUT0RPOiBSZW1vdmluZyB0aGUgcmV0dXJuIHN0YXRlbWVudCBzaG91bGQgYWZmZWN0IGNvcnJlY3RuZXNzP1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciByZWZzQ2hhbmdlZCA9IFJlYWN0UmVmLnNob3VsZFVwZGF0ZVJlZnMocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KTtcblxuICAgIGlmIChyZWZzQ2hhbmdlZCkge1xuICAgICAgUmVhY3RSZWYuZGV0YWNoUmVmcyhpbnRlcm5hbEluc3RhbmNlLCBwcmV2RWxlbWVudCk7XG4gICAgfVxuXG4gICAgaW50ZXJuYWxJbnN0YW5jZS5yZWNlaXZlQ29tcG9uZW50KG5leHRFbGVtZW50LCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG5cbiAgICBpZiAocmVmc0NoYW5nZWQgJiYgaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQgJiYgaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQucmVmICE9IG51bGwpIHtcbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoYXR0YWNoUmVmcywgaW50ZXJuYWxJbnN0YW5jZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBGbHVzaCBhbnkgZGlydHkgY2hhbmdlcyBpbiBhIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gaW50ZXJuYWxJbnN0YW5jZVxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5OiBmdW5jdGlvbiAoaW50ZXJuYWxJbnN0YW5jZSwgdHJhbnNhY3Rpb24pIHtcbiAgICBpbnRlcm5hbEluc3RhbmNlLnBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSh0cmFuc2FjdGlvbik7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFJlY29uY2lsZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UmVmXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RPd25lcicpO1xuXG52YXIgUmVhY3RSZWYgPSB7fTtcblxuZnVuY3Rpb24gYXR0YWNoUmVmKHJlZiwgY29tcG9uZW50LCBvd25lcikge1xuICBpZiAodHlwZW9mIHJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJlZihjb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gTGVnYWN5IHJlZlxuICAgIFJlYWN0T3duZXIuYWRkQ29tcG9uZW50QXNSZWZUbyhjb21wb25lbnQsIHJlZiwgb3duZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRldGFjaFJlZihyZWYsIGNvbXBvbmVudCwgb3duZXIpIHtcbiAgaWYgKHR5cGVvZiByZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZWYobnVsbCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gTGVnYWN5IHJlZlxuICAgIFJlYWN0T3duZXIucmVtb3ZlQ29tcG9uZW50QXNSZWZGcm9tKGNvbXBvbmVudCwgcmVmLCBvd25lcik7XG4gIH1cbn1cblxuUmVhY3RSZWYuYXR0YWNoUmVmcyA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgZWxlbWVudCkge1xuICBpZiAoZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgcmVmID0gZWxlbWVudC5yZWY7XG4gIGlmIChyZWYgIT0gbnVsbCkge1xuICAgIGF0dGFjaFJlZihyZWYsIGluc3RhbmNlLCBlbGVtZW50Ll9vd25lcik7XG4gIH1cbn07XG5cblJlYWN0UmVmLnNob3VsZFVwZGF0ZVJlZnMgPSBmdW5jdGlvbiAocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KSB7XG4gIC8vIElmIGVpdGhlciB0aGUgb3duZXIgb3IgYSBgcmVmYCBoYXMgY2hhbmdlZCwgbWFrZSBzdXJlIHRoZSBuZXdlc3Qgb3duZXJcbiAgLy8gaGFzIHN0b3JlZCBhIHJlZmVyZW5jZSB0byBgdGhpc2AsIGFuZCB0aGUgcHJldmlvdXMgb3duZXIgKGlmIGRpZmZlcmVudClcbiAgLy8gaGFzIGZvcmdvdHRlbiB0aGUgcmVmZXJlbmNlIHRvIGB0aGlzYC4gV2UgdXNlIHRoZSBlbGVtZW50IGluc3RlYWRcbiAgLy8gb2YgdGhlIHB1YmxpYyB0aGlzLnByb3BzIGJlY2F1c2UgdGhlIHBvc3QgcHJvY2Vzc2luZyBjYW5ub3QgZGV0ZXJtaW5lXG4gIC8vIGEgcmVmLiBUaGUgcmVmIGNvbmNlcHR1YWxseSBsaXZlcyBvbiB0aGUgZWxlbWVudC5cblxuICAvLyBUT0RPOiBTaG91bGQgdGhpcyBldmVuIGJlIHBvc3NpYmxlPyBUaGUgb3duZXIgY2Fubm90IGNoYW5nZSBiZWNhdXNlXG4gIC8vIGl0J3MgZm9yYmlkZGVuIGJ5IHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50LiBUaGUgcmVmIGNhbiBjaGFuZ2VcbiAgLy8gaWYgeW91IHN3YXAgdGhlIGtleXMgb2YgYnV0IG5vdCB0aGUgcmVmcy4gUmVjb25zaWRlciB3aGVyZSB0aGlzIGNoZWNrXG4gIC8vIGlzIG1hZGUuIEl0IHByb2JhYmx5IGJlbG9uZ3Mgd2hlcmUgdGhlIGtleSBjaGVja2luZyBhbmRcbiAgLy8gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCBpcyBkb25lLlxuXG4gIHZhciBwcmV2RW1wdHkgPSBwcmV2RWxlbWVudCA9PT0gbnVsbCB8fCBwcmV2RWxlbWVudCA9PT0gZmFsc2U7XG4gIHZhciBuZXh0RW1wdHkgPSBuZXh0RWxlbWVudCA9PT0gbnVsbCB8fCBuZXh0RWxlbWVudCA9PT0gZmFsc2U7XG5cbiAgcmV0dXJuKFxuICAgIC8vIFRoaXMgaGFzIGEgZmV3IGZhbHNlIHBvc2l0aXZlcyB3L3IvdCBlbXB0eSBjb21wb25lbnRzLlxuICAgIHByZXZFbXB0eSB8fCBuZXh0RW1wdHkgfHwgbmV4dEVsZW1lbnQuX293bmVyICE9PSBwcmV2RWxlbWVudC5fb3duZXIgfHwgbmV4dEVsZW1lbnQucmVmICE9PSBwcmV2RWxlbWVudC5yZWZcbiAgKTtcbn07XG5cblJlYWN0UmVmLmRldGFjaFJlZnMgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnQgPT09IG51bGwgfHwgZWxlbWVudCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHJlZiA9IGVsZW1lbnQucmVmO1xuICBpZiAocmVmICE9IG51bGwpIHtcbiAgICBkZXRhY2hSZWYocmVmLCBpbnN0YW5jZSwgZWxlbWVudC5fb3duZXIpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UmVmOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFJvb3RJbmRleFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFJvb3RJbmRleEluamVjdGlvbiA9IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9jcmVhdGVSZWFjdFJvb3RJbmRleFxuICAgKi9cbiAgaW5qZWN0Q3JlYXRlUmVhY3RSb290SW5kZXg6IGZ1bmN0aW9uIChfY3JlYXRlUmVhY3RSb290SW5kZXgpIHtcbiAgICBSZWFjdFJvb3RJbmRleC5jcmVhdGVSZWFjdFJvb3RJbmRleCA9IF9jcmVhdGVSZWFjdFJvb3RJbmRleDtcbiAgfVxufTtcblxudmFyIFJlYWN0Um9vdEluZGV4ID0ge1xuICBjcmVhdGVSZWFjdFJvb3RJbmRleDogbnVsbCxcbiAgaW5qZWN0aW9uOiBSZWFjdFJvb3RJbmRleEluamVjdGlvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFJvb3RJbmRleDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5XG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneSA9IHtcbiAgaXNCYXRjaGluZ1VwZGF0ZXM6IGZhbHNlLFxuICBiYXRjaGVkVXBkYXRlczogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaGVyZS4gRHVyaW5nIHRoZSBzZXJ2ZXIgcmVuZGVyaW5nIHdlIGRvbid0IHdhbnQgdG9cbiAgICAvLyBzY2hlZHVsZSBhbnkgdXBkYXRlcy4gV2Ugd2lsbCBzaW1wbHkgaWdub3JlIHRoZW0uXG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSA9IHJlcXVpcmUoJy4vUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneScpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VIYW5kbGVzJyk7XG52YXIgUmVhY3RNYXJrdXBDaGVja3N1bSA9IHJlcXVpcmUoJy4vUmVhY3RNYXJrdXBDaGVja3N1bScpO1xudmFyIFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneSA9IHJlcXVpcmUoJy4vUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5Jyk7XG52YXIgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbicpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBlbXB0eU9iamVjdCA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5T2JqZWN0Jyk7XG52YXIgaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBIVE1MIG1hcmt1cFxuICovXG5mdW5jdGlvbiByZW5kZXJUb1N0cmluZyhlbGVtZW50KSB7XG4gICFSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoZWxlbWVudCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAncmVuZGVyVG9TdHJpbmcoKTogWW91IG11c3QgcGFzcyBhIHZhbGlkIFJlYWN0RWxlbWVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgdmFyIHRyYW5zYWN0aW9uO1xuICB0cnkge1xuICAgIFJlYWN0VXBkYXRlcy5pbmplY3Rpb24uaW5qZWN0QmF0Y2hpbmdTdHJhdGVneShSZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3kpO1xuXG4gICAgdmFyIGlkID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuY3JlYXRlUmVhY3RSb290SUQoKTtcbiAgICB0cmFuc2FjdGlvbiA9IFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKGZhbHNlKTtcblxuICAgIHJldHVybiB0cmFuc2FjdGlvbi5wZXJmb3JtKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQoZWxlbWVudCwgbnVsbCk7XG4gICAgICB2YXIgbWFya3VwID0gY29tcG9uZW50SW5zdGFuY2UubW91bnRDb21wb25lbnQoaWQsIHRyYW5zYWN0aW9uLCBlbXB0eU9iamVjdCk7XG4gICAgICByZXR1cm4gUmVhY3RNYXJrdXBDaGVja3N1bS5hZGRDaGVja3N1bVRvTWFya3VwKG1hcmt1cCk7XG4gICAgfSwgbnVsbCk7XG4gIH0gZmluYWxseSB7XG4gICAgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5yZWxlYXNlKHRyYW5zYWN0aW9uKTtcbiAgICAvLyBSZXZlcnQgdG8gdGhlIERPTSBiYXRjaGluZyBzdHJhdGVneSBzaW5jZSB0aGVzZSB0d28gcmVuZGVyZXJzXG4gICAgLy8gY3VycmVudGx5IHNoYXJlIHRoZXNlIHN0YXRlZnVsIG1vZHVsZXMuXG4gICAgUmVhY3RVcGRhdGVzLmluamVjdGlvbi5pbmplY3RCYXRjaGluZ1N0cmF0ZWd5KFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kpO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge3N0cmluZ30gdGhlIEhUTUwgbWFya3VwLCB3aXRob3V0IHRoZSBleHRyYSBSZWFjdCBJRCBhbmQgY2hlY2tzdW1cbiAqIChmb3IgZ2VuZXJhdGluZyBzdGF0aWMgcGFnZXMpXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclRvU3RhdGljTWFya3VwKGVsZW1lbnQpIHtcbiAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChlbGVtZW50KSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdyZW5kZXJUb1N0YXRpY01hcmt1cCgpOiBZb3UgbXVzdCBwYXNzIGEgdmFsaWQgUmVhY3RFbGVtZW50LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICB2YXIgdHJhbnNhY3Rpb247XG4gIHRyeSB7XG4gICAgUmVhY3RVcGRhdGVzLmluamVjdGlvbi5pbmplY3RCYXRjaGluZ1N0cmF0ZWd5KFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneSk7XG5cbiAgICB2YXIgaWQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5jcmVhdGVSZWFjdFJvb3RJRCgpO1xuICAgIHRyYW5zYWN0aW9uID0gUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5nZXRQb29sZWQodHJ1ZSk7XG5cbiAgICByZXR1cm4gdHJhbnNhY3Rpb24ucGVyZm9ybShmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY29tcG9uZW50SW5zdGFuY2UgPSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KGVsZW1lbnQsIG51bGwpO1xuICAgICAgcmV0dXJuIGNvbXBvbmVudEluc3RhbmNlLm1vdW50Q29tcG9uZW50KGlkLCB0cmFuc2FjdGlvbiwgZW1wdHlPYmplY3QpO1xuICAgIH0sIG51bGwpO1xuICB9IGZpbmFsbHkge1xuICAgIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24ucmVsZWFzZSh0cmFuc2FjdGlvbik7XG4gICAgLy8gUmV2ZXJ0IHRvIHRoZSBET00gYmF0Y2hpbmcgc3RyYXRlZ3kgc2luY2UgdGhlc2UgdHdvIHJlbmRlcmVyc1xuICAgIC8vIGN1cnJlbnRseSBzaGFyZSB0aGVzZSBzdGF0ZWZ1bCBtb2R1bGVzLlxuICAgIFJlYWN0VXBkYXRlcy5pbmplY3Rpb24uaW5qZWN0QmF0Y2hpbmdTdHJhdGVneShSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmVuZGVyVG9TdHJpbmc6IHJlbmRlclRvU3RyaW5nLFxuICByZW5kZXJUb1N0YXRpY01hcmt1cDogcmVuZGVyVG9TdGF0aWNNYXJrdXBcbn07IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb25cbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG52YXIgQ2FsbGJhY2tRdWV1ZSA9IHJlcXVpcmUoJy4vQ2FsbGJhY2tRdWV1ZScpO1xudmFyIFRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9UcmFuc2FjdGlvbicpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcblxuLyoqXG4gKiBQcm92aWRlcyBhIGBDYWxsYmFja1F1ZXVlYCBxdWV1ZSBmb3IgY29sbGVjdGluZyBgb25ET01SZWFkeWAgY2FsbGJhY2tzXG4gKiBkdXJpbmcgdGhlIHBlcmZvcm1pbmcgb2YgdGhlIHRyYW5zYWN0aW9uLlxuICovXG52YXIgT05fRE9NX1JFQURZX1FVRVVFSU5HID0ge1xuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGludGVybmFsIGBvbkRPTVJlYWR5YCBxdWV1ZS5cbiAgICovXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlYWN0TW91bnRSZWFkeS5yZXNldCgpO1xuICB9LFxuXG4gIGNsb3NlOiBlbXB0eUZ1bmN0aW9uXG59O1xuXG4vKipcbiAqIEV4ZWN1dGVkIHdpdGhpbiB0aGUgc2NvcGUgb2YgdGhlIGBUcmFuc2FjdGlvbmAgaW5zdGFuY2UuIENvbnNpZGVyIHRoZXNlIGFzXG4gKiBiZWluZyBtZW1iZXIgbWV0aG9kcywgYnV0IHdpdGggYW4gaW1wbGllZCBvcmRlcmluZyB3aGlsZSBiZWluZyBpc29sYXRlZCBmcm9tXG4gKiBlYWNoIG90aGVyLlxuICovXG52YXIgVFJBTlNBQ1RJT05fV1JBUFBFUlMgPSBbT05fRE9NX1JFQURZX1FVRVVFSU5HXTtcblxuLyoqXG4gKiBAY2xhc3MgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvblxuICogQHBhcmFtIHtib29sZWFufSByZW5kZXJUb1N0YXRpY01hcmt1cFxuICovXG5mdW5jdGlvbiBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uKHJlbmRlclRvU3RhdGljTWFya3VwKSB7XG4gIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcbiAgdGhpcy5yZW5kZXJUb1N0YXRpY01hcmt1cCA9IHJlbmRlclRvU3RhdGljTWFya3VwO1xuICB0aGlzLnJlYWN0TW91bnRSZWFkeSA9IENhbGxiYWNrUXVldWUuZ2V0UG9vbGVkKG51bGwpO1xuICB0aGlzLnVzZUNyZWF0ZUVsZW1lbnQgPSBmYWxzZTtcbn1cblxudmFyIE1peGluID0ge1xuICAvKipcbiAgICogQHNlZSBUcmFuc2FjdGlvblxuICAgKiBAYWJzdHJhY3RcbiAgICogQGZpbmFsXG4gICAqIEByZXR1cm4ge2FycmF5fSBFbXB0eSBsaXN0IG9mIG9wZXJhdGlvbiB3cmFwIHByb2NlZHVyZXMuXG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFRSQU5TQUNUSU9OX1dSQVBQRVJTO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBxdWV1ZSB0byBjb2xsZWN0IGBvbkRPTVJlYWR5YCBjYWxsYmFja3Mgd2l0aC5cbiAgICovXG4gIGdldFJlYWN0TW91bnRSZWFkeTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWN0TW91bnRSZWFkeTtcbiAgfSxcblxuICAvKipcbiAgICogYFBvb2xlZENsYXNzYCBsb29rcyBmb3IgdGhpcywgYW5kIHdpbGwgaW52b2tlIHRoaXMgYmVmb3JlIGFsbG93aW5nIHRoaXNcbiAgICogaW5zdGFuY2UgdG8gYmUgcmV1c2VkLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIENhbGxiYWNrUXVldWUucmVsZWFzZSh0aGlzLnJlYWN0TW91bnRSZWFkeSk7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkgPSBudWxsO1xuICB9XG59O1xuXG5hc3NpZ24oUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5wcm90b3R5cGUsIFRyYW5zYWN0aW9uLk1peGluLCBNaXhpbik7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RVcGRhdGVRdWV1ZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZU1hcCcpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpIHtcbiAgUmVhY3RVcGRhdGVzLmVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG59XG5cbmZ1bmN0aW9uIGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgY2FsbGVyTmFtZSkge1xuICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KHB1YmxpY0luc3RhbmNlKTtcbiAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIE9ubHkgd2FybiB3aGVuIHdlIGhhdmUgYSBjYWxsZXJOYW1lLiBPdGhlcndpc2Ugd2Ugc2hvdWxkIGJlIHNpbGVudC5cbiAgICAgIC8vIFdlJ3JlIHByb2JhYmx5IGNhbGxpbmcgZnJvbSBlbnF1ZXVlQ2FsbGJhY2suIFdlIGRvbid0IHdhbnQgdG8gd2FyblxuICAgICAgLy8gdGhlcmUgYmVjYXVzZSB3ZSBhbHJlYWR5IHdhcm5lZCBmb3IgdGhlIGNvcnJlc3BvbmRpbmcgbGlmZWN5Y2xlIG1ldGhvZC5cbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFjYWxsZXJOYW1lLCAnJXMoLi4uKTogQ2FuIG9ubHkgdXBkYXRlIGEgbW91bnRlZCBvciBtb3VudGluZyBjb21wb25lbnQuICcgKyAnVGhpcyB1c3VhbGx5IG1lYW5zIHlvdSBjYWxsZWQgJXMoKSBvbiBhbiB1bm1vdW50ZWQgY29tcG9uZW50LiAnICsgJ1RoaXMgaXMgYSBuby1vcC4gUGxlYXNlIGNoZWNrIHRoZSBjb2RlIGZvciB0aGUgJXMgY29tcG9uZW50LicsIGNhbGxlck5hbWUsIGNhbGxlck5hbWUsIHB1YmxpY0luc3RhbmNlLmNvbnN0cnVjdG9yLmRpc3BsYXlOYW1lKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPT0gbnVsbCwgJyVzKC4uLik6IENhbm5vdCB1cGRhdGUgZHVyaW5nIGFuIGV4aXN0aW5nIHN0YXRlIHRyYW5zaXRpb24gJyArICcoc3VjaCBhcyB3aXRoaW4gYHJlbmRlcmApLiBSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uICcgKyAnb2YgcHJvcHMgYW5kIHN0YXRlLicsIGNhbGxlck5hbWUpIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgcmV0dXJuIGludGVybmFsSW5zdGFuY2U7XG59XG5cbi8qKlxuICogUmVhY3RVcGRhdGVRdWV1ZSBhbGxvd3MgZm9yIHN0YXRlIHVwZGF0ZXMgdG8gYmUgc2NoZWR1bGVkIGludG8gYSBsYXRlclxuICogcmVjb25jaWxpYXRpb24gc3RlcC5cbiAqL1xudmFyIFJlYWN0VXBkYXRlUXVldWUgPSB7XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGNvbXBvc2l0ZSBjb21wb25lbnQgaXMgbW91bnRlZC5cbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2Ugd2Ugd2FudCB0byB0ZXN0LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG1vdW50ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAZmluYWxcbiAgICovXG4gIGlzTW91bnRlZDogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBvd25lciA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQ7XG4gICAgICBpZiAob3duZXIgIT09IG51bGwpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcob3duZXIuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyLCAnJXMgaXMgYWNjZXNzaW5nIGlzTW91bnRlZCBpbnNpZGUgaXRzIHJlbmRlcigpIGZ1bmN0aW9uLiAnICsgJ3JlbmRlcigpIHNob3VsZCBiZSBhIHB1cmUgZnVuY3Rpb24gb2YgcHJvcHMgYW5kIHN0YXRlLiBJdCBzaG91bGQgJyArICduZXZlciBhY2Nlc3Mgc29tZXRoaW5nIHRoYXQgcmVxdWlyZXMgc3RhbGUgZGF0YSBmcm9tIHRoZSBwcmV2aW91cyAnICsgJ3JlbmRlciwgc3VjaCBhcyByZWZzLiBNb3ZlIHRoaXMgbG9naWMgdG8gY29tcG9uZW50RGlkTW91bnQgYW5kICcgKyAnY29tcG9uZW50RGlkVXBkYXRlIGluc3RlYWQuJywgb3duZXIuZ2V0TmFtZSgpIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgICBvd25lci5fd2FybmVkQWJvdXRSZWZzSW5SZW5kZXIgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KHB1YmxpY0luc3RhbmNlKTtcbiAgICBpZiAoaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgLy8gRHVyaW5nIGNvbXBvbmVudFdpbGxNb3VudCBhbmQgcmVuZGVyIHRoaXMgd2lsbCBzdGlsbCBiZSBudWxsIGJ1dCBhZnRlclxuICAgICAgLy8gdGhhdCB3aWxsIGFsd2F5cyByZW5kZXIgdG8gc29tZXRoaW5nLiBBdCBsZWFzdCBmb3Igbm93LiBTbyB3ZSBjYW4gdXNlXG4gICAgICAvLyB0aGlzIGhhY2suXG4gICAgICByZXR1cm4gISFpbnRlcm5hbEluc3RhbmNlLl9yZW5kZXJlZENvbXBvbmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRW5xdWV1ZSBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhZnRlciBhbGwgdGhlIHBlbmRpbmcgdXBkYXRlc1xuICAgKiBoYXZlIHByb2Nlc3NlZC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gdXNlIGFzIGB0aGlzYCBjb250ZXh0LlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHN0YXRlIGlzIHVwZGF0ZWQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZUNhbGxiYWNrOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIGNhbGxiYWNrKSB7XG4gICAgISh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2VucXVldWVDYWxsYmFjayguLi4pOiBZb3UgY2FsbGVkIGBzZXRQcm9wc2AsIGByZXBsYWNlUHJvcHNgLCAnICsgJ2BzZXRTdGF0ZWAsIGByZXBsYWNlU3RhdGVgLCBvciBgZm9yY2VVcGRhdGVgIHdpdGggYSBjYWxsYmFjayB0aGF0ICcgKyAnaXNuXFwndCBjYWxsYWJsZS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UpO1xuXG4gICAgLy8gUHJldmlvdXNseSB3ZSB3b3VsZCB0aHJvdyBhbiBlcnJvciBpZiB3ZSBkaWRuJ3QgaGF2ZSBhbiBpbnRlcm5hbFxuICAgIC8vIGluc3RhbmNlLiBTaW5jZSB3ZSB3YW50IHRvIG1ha2UgaXQgYSBuby1vcCBpbnN0ZWFkLCB3ZSBtaXJyb3IgdGhlIHNhbWVcbiAgICAvLyBiZWhhdmlvciB3ZSBoYXZlIGluIG90aGVyIGVucXVldWUqIG1ldGhvZHMuXG4gICAgLy8gV2UgYWxzbyBuZWVkIHRvIGlnbm9yZSBjYWxsYmFja3MgaW4gY29tcG9uZW50V2lsbE1vdW50LiBTZWVcbiAgICAvLyBlbnF1ZXVlVXBkYXRlcy5cbiAgICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzKSB7XG4gICAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzID0gW2NhbGxiYWNrXTtcbiAgICB9XG4gICAgLy8gVE9ETzogVGhlIGNhbGxiYWNrIGhlcmUgaXMgaWdub3JlZCB3aGVuIHNldFN0YXRlIGlzIGNhbGxlZCBmcm9tXG4gICAgLy8gY29tcG9uZW50V2lsbE1vdW50LiBFaXRoZXIgZml4IGl0IG9yIGRpc2FsbG93IGRvaW5nIHNvIGNvbXBsZXRlbHkgaW5cbiAgICAvLyBmYXZvciBvZiBnZXRJbml0aWFsU3RhdGUuIEFsdGVybmF0aXZlbHksIHdlIGNhbiBkaXNhbGxvd1xuICAgIC8vIGNvbXBvbmVudFdpbGxNb3VudCBkdXJpbmcgc2VydmVyLXNpZGUgcmVuZGVyaW5nLlxuICAgIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG4gIH0sXG5cbiAgZW5xdWV1ZUNhbGxiYWNrSW50ZXJuYWw6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCBjYWxsYmFjaykge1xuICAgICEodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdlbnF1ZXVlQ2FsbGJhY2soLi4uKTogWW91IGNhbGxlZCBgc2V0UHJvcHNgLCBgcmVwbGFjZVByb3BzYCwgJyArICdgc2V0U3RhdGVgLCBgcmVwbGFjZVN0YXRlYCwgb3IgYGZvcmNlVXBkYXRlYCB3aXRoIGEgY2FsbGJhY2sgdGhhdCAnICsgJ2lzblxcJ3QgY2FsbGFibGUuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIGlmIChpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzKSB7XG4gICAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nQ2FsbGJhY2tzID0gW2NhbGxiYWNrXTtcbiAgICB9XG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfSxcblxuICAvKipcbiAgICogRm9yY2VzIGFuIHVwZGF0ZS4gVGhpcyBzaG91bGQgb25seSBiZSBpbnZva2VkIHdoZW4gaXQgaXMga25vd24gd2l0aFxuICAgKiBjZXJ0YWludHkgdGhhdCB3ZSBhcmUgKipub3QqKiBpbiBhIERPTSB0cmFuc2FjdGlvbi5cbiAgICpcbiAgICogWW91IG1heSB3YW50IHRvIGNhbGwgdGhpcyB3aGVuIHlvdSBrbm93IHRoYXQgc29tZSBkZWVwZXIgYXNwZWN0IG9mIHRoZVxuICAgKiBjb21wb25lbnQncyBzdGF0ZSBoYXMgY2hhbmdlZCBidXQgYHNldFN0YXRlYCB3YXMgbm90IGNhbGxlZC5cbiAgICpcbiAgICogVGhpcyB3aWxsIG5vdCBpbnZva2UgYHNob3VsZENvbXBvbmVudFVwZGF0ZWAsIGJ1dCBpdCB3aWxsIGludm9rZVxuICAgKiBgY29tcG9uZW50V2lsbFVwZGF0ZWAgYW5kIGBjb21wb25lbnREaWRVcGRhdGVgLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlRm9yY2VVcGRhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuICAgIHZhciBpbnRlcm5hbEluc3RhbmNlID0gZ2V0SW50ZXJuYWxJbnN0YW5jZVJlYWR5Rm9yVXBkYXRlKHB1YmxpY0luc3RhbmNlLCAnZm9yY2VVcGRhdGUnKTtcblxuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdGb3JjZVVwZGF0ZSA9IHRydWU7XG5cbiAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhbGwgb2YgdGhlIHN0YXRlLiBBbHdheXMgdXNlIHRoaXMgb3IgYHNldFN0YXRlYCB0byBtdXRhdGUgc3RhdGUuXG4gICAqIFlvdSBzaG91bGQgdHJlYXQgYHRoaXMuc3RhdGVgIGFzIGltbXV0YWJsZS5cbiAgICpcbiAgICogVGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgYHRoaXMuc3RhdGVgIHdpbGwgYmUgaW1tZWRpYXRlbHkgdXBkYXRlZCwgc29cbiAgICogYWNjZXNzaW5nIGB0aGlzLnN0YXRlYCBhZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kIG1heSByZXR1cm4gdGhlIG9sZCB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wbGV0ZVN0YXRlIE5leHQgc3RhdGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBjb21wbGV0ZVN0YXRlKSB7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsICdyZXBsYWNlU3RhdGUnKTtcblxuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdTdGF0ZVF1ZXVlID0gW2NvbXBsZXRlU3RhdGVdO1xuICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdSZXBsYWNlU3RhdGUgPSB0cnVlO1xuXG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgc3RhdGUuIFRoaXMgb25seSBleGlzdHMgYmVjYXVzZSBfcGVuZGluZ1N0YXRlIGlzXG4gICAqIGludGVybmFsLiBUaGlzIHByb3ZpZGVzIGEgbWVyZ2luZyBzdHJhdGVneSB0aGF0IGlzIG5vdCBhdmFpbGFibGUgdG8gZGVlcFxuICAgKiBwcm9wZXJ0aWVzIHdoaWNoIGlzIGNvbmZ1c2luZy4gVE9ETzogRXhwb3NlIHBlbmRpbmdTdGF0ZSBvciBkb24ndCB1c2UgaXRcbiAgICogZHVyaW5nIHRoZSBtZXJnZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsU3RhdGUgTmV4dCBwYXJ0aWFsIHN0YXRlIHRvIGJlIG1lcmdlZCB3aXRoIHN0YXRlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVTZXRTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwYXJ0aWFsU3RhdGUpIHtcbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ3NldFN0YXRlJyk7XG5cbiAgICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcXVldWUgPSBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nU3RhdGVRdWV1ZSB8fCAoaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ1N0YXRlUXVldWUgPSBbXSk7XG4gICAgcXVldWUucHVzaChwYXJ0aWFsU3RhdGUpO1xuXG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBhIHN1YnNldCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcGFydGlhbFByb3BzIFN1YnNldCBvZiB0aGUgbmV4dCBwcm9wcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlU2V0UHJvcHM6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcGFydGlhbFByb3BzKSB7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsICdzZXRQcm9wcycpO1xuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVTZXRQcm9wc0ludGVybmFsKGludGVybmFsSW5zdGFuY2UsIHBhcnRpYWxQcm9wcyk7XG4gIH0sXG5cbiAgZW5xdWV1ZVNldFByb3BzSW50ZXJuYWw6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCBwYXJ0aWFsUHJvcHMpIHtcbiAgICB2YXIgdG9wTGV2ZWxXcmFwcGVyID0gaW50ZXJuYWxJbnN0YW5jZS5fdG9wTGV2ZWxXcmFwcGVyO1xuICAgICF0b3BMZXZlbFdyYXBwZXIgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnc2V0UHJvcHMoLi4uKTogWW91IGNhbGxlZCBgc2V0UHJvcHNgIG9uIGEgJyArICdjb21wb25lbnQgd2l0aCBhIHBhcmVudC4gVGhpcyBpcyBhbiBhbnRpLXBhdHRlcm4gc2luY2UgcHJvcHMgd2lsbCAnICsgJ2dldCByZWFjdGl2ZWx5IHVwZGF0ZWQgd2hlbiByZW5kZXJlZC4gSW5zdGVhZCwgY2hhbmdlIHRoZSBvd25lclxcJ3MgJyArICdgcmVuZGVyYCBtZXRob2QgdG8gcGFzcyB0aGUgY29ycmVjdCB2YWx1ZSBhcyBwcm9wcyB0byB0aGUgY29tcG9uZW50ICcgKyAnd2hlcmUgaXQgaXMgY3JlYXRlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAvLyBNZXJnZSB3aXRoIHRoZSBwZW5kaW5nIGVsZW1lbnQgaWYgaXQgZXhpc3RzLCBvdGhlcndpc2Ugd2l0aCBleGlzdGluZ1xuICAgIC8vIGVsZW1lbnQgcHJvcHMuXG4gICAgdmFyIHdyYXBFbGVtZW50ID0gdG9wTGV2ZWxXcmFwcGVyLl9wZW5kaW5nRWxlbWVudCB8fCB0b3BMZXZlbFdyYXBwZXIuX2N1cnJlbnRFbGVtZW50O1xuICAgIHZhciBlbGVtZW50ID0gd3JhcEVsZW1lbnQucHJvcHM7XG4gICAgdmFyIHByb3BzID0gYXNzaWduKHt9LCBlbGVtZW50LnByb3BzLCBwYXJ0aWFsUHJvcHMpO1xuICAgIHRvcExldmVsV3JhcHBlci5fcGVuZGluZ0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlUHJvcHMod3JhcEVsZW1lbnQsIFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VQcm9wcyhlbGVtZW50LCBwcm9wcykpO1xuXG4gICAgZW5xdWV1ZVVwZGF0ZSh0b3BMZXZlbFdyYXBwZXIpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhbGwgb2YgdGhlIHByb3BzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IHByb3BzIE5ldyBwcm9wcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlUmVwbGFjZVByb3BzOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIHByb3BzKSB7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsICdyZXBsYWNlUHJvcHMnKTtcbiAgICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlUmVwbGFjZVByb3BzSW50ZXJuYWwoaW50ZXJuYWxJbnN0YW5jZSwgcHJvcHMpO1xuICB9LFxuXG4gIGVucXVldWVSZXBsYWNlUHJvcHNJbnRlcm5hbDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIHByb3BzKSB7XG4gICAgdmFyIHRvcExldmVsV3JhcHBlciA9IGludGVybmFsSW5zdGFuY2UuX3RvcExldmVsV3JhcHBlcjtcbiAgICAhdG9wTGV2ZWxXcmFwcGVyID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3JlcGxhY2VQcm9wcyguLi4pOiBZb3UgY2FsbGVkIGByZXBsYWNlUHJvcHNgIG9uIGEgJyArICdjb21wb25lbnQgd2l0aCBhIHBhcmVudC4gVGhpcyBpcyBhbiBhbnRpLXBhdHRlcm4gc2luY2UgcHJvcHMgd2lsbCAnICsgJ2dldCByZWFjdGl2ZWx5IHVwZGF0ZWQgd2hlbiByZW5kZXJlZC4gSW5zdGVhZCwgY2hhbmdlIHRoZSBvd25lclxcJ3MgJyArICdgcmVuZGVyYCBtZXRob2QgdG8gcGFzcyB0aGUgY29ycmVjdCB2YWx1ZSBhcyBwcm9wcyB0byB0aGUgY29tcG9uZW50ICcgKyAnd2hlcmUgaXQgaXMgY3JlYXRlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAvLyBNZXJnZSB3aXRoIHRoZSBwZW5kaW5nIGVsZW1lbnQgaWYgaXQgZXhpc3RzLCBvdGhlcndpc2Ugd2l0aCBleGlzdGluZ1xuICAgIC8vIGVsZW1lbnQgcHJvcHMuXG4gICAgdmFyIHdyYXBFbGVtZW50ID0gdG9wTGV2ZWxXcmFwcGVyLl9wZW5kaW5nRWxlbWVudCB8fCB0b3BMZXZlbFdyYXBwZXIuX2N1cnJlbnRFbGVtZW50O1xuICAgIHZhciBlbGVtZW50ID0gd3JhcEVsZW1lbnQucHJvcHM7XG4gICAgdG9wTGV2ZWxXcmFwcGVyLl9wZW5kaW5nRWxlbWVudCA9IFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VQcm9wcyh3cmFwRWxlbWVudCwgUmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZVByb3BzKGVsZW1lbnQsIHByb3BzKSk7XG5cbiAgICBlbnF1ZXVlVXBkYXRlKHRvcExldmVsV3JhcHBlcik7XG4gIH0sXG5cbiAgZW5xdWV1ZUVsZW1lbnRJbnRlcm5hbDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIG5ld0VsZW1lbnQpIHtcbiAgICBpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nRWxlbWVudCA9IG5ld0VsZW1lbnQ7XG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0VXBkYXRlUXVldWU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0VXBkYXRlc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENhbGxiYWNrUXVldWUgPSByZXF1aXJlKCcuL0NhbGxiYWNrUXVldWUnKTtcbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFJlYWN0UmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVyJyk7XG52YXIgVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL1RyYW5zYWN0aW9uJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIGRpcnR5Q29tcG9uZW50cyA9IFtdO1xudmFyIGFzYXBDYWxsYmFja1F1ZXVlID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQoKTtcbnZhciBhc2FwRW5xdWV1ZWQgPSBmYWxzZTtcblxudmFyIGJhdGNoaW5nU3RyYXRlZ3kgPSBudWxsO1xuXG5mdW5jdGlvbiBlbnN1cmVJbmplY3RlZCgpIHtcbiAgIShSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbiAmJiBiYXRjaGluZ1N0cmF0ZWd5KSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXM6IG11c3QgaW5qZWN0IGEgcmVjb25jaWxlIHRyYW5zYWN0aW9uIGNsYXNzIGFuZCBiYXRjaGluZyAnICsgJ3N0cmF0ZWd5JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG52YXIgTkVTVEVEX1VQREFURVMgPSB7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRpcnR5Q29tcG9uZW50c0xlbmd0aCA9IGRpcnR5Q29tcG9uZW50cy5sZW5ndGg7XG4gIH0sXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZGlydHlDb21wb25lbnRzTGVuZ3RoICE9PSBkaXJ0eUNvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICAvLyBBZGRpdGlvbmFsIHVwZGF0ZXMgd2VyZSBlbnF1ZXVlZCBieSBjb21wb25lbnREaWRVcGRhdGUgaGFuZGxlcnMgb3JcbiAgICAgIC8vIHNpbWlsYXI7IGJlZm9yZSBvdXIgb3duIFVQREFURV9RVUVVRUlORyB3cmFwcGVyIGNsb3Nlcywgd2Ugd2FudCB0byBydW5cbiAgICAgIC8vIHRoZXNlIG5ldyB1cGRhdGVzIHNvIHRoYXQgaWYgQSdzIGNvbXBvbmVudERpZFVwZGF0ZSBjYWxscyBzZXRTdGF0ZSBvblxuICAgICAgLy8gQiwgQiB3aWxsIHVwZGF0ZSBiZWZvcmUgdGhlIGNhbGxiYWNrIEEncyB1cGRhdGVyIHByb3ZpZGVkIHdoZW4gY2FsbGluZ1xuICAgICAgLy8gc2V0U3RhdGUuXG4gICAgICBkaXJ0eUNvbXBvbmVudHMuc3BsaWNlKDAsIHRoaXMuZGlydHlDb21wb25lbnRzTGVuZ3RoKTtcbiAgICAgIGZsdXNoQmF0Y2hlZFVwZGF0ZXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlydHlDb21wb25lbnRzLmxlbmd0aCA9IDA7XG4gICAgfVxuICB9XG59O1xuXG52YXIgVVBEQVRFX1FVRVVFSU5HID0ge1xuICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsYmFja1F1ZXVlLnJlc2V0KCk7XG4gIH0sXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jYWxsYmFja1F1ZXVlLm5vdGlmeUFsbCgpO1xuICB9XG59O1xuXG52YXIgVFJBTlNBQ1RJT05fV1JBUFBFUlMgPSBbTkVTVEVEX1VQREFURVMsIFVQREFURV9RVUVVRUlOR107XG5cbmZ1bmN0aW9uIFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24oKSB7XG4gIHRoaXMucmVpbml0aWFsaXplVHJhbnNhY3Rpb24oKTtcbiAgdGhpcy5kaXJ0eUNvbXBvbmVudHNMZW5ndGggPSBudWxsO1xuICB0aGlzLmNhbGxiYWNrUXVldWUgPSBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpO1xuICB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uID0gUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24uZ2V0UG9vbGVkKCAvKiBmb3JjZUhUTUwgKi9mYWxzZSk7XG59XG5cbmFzc2lnbihSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uLnByb3RvdHlwZSwgVHJhbnNhY3Rpb24uTWl4aW4sIHtcbiAgZ2V0VHJhbnNhY3Rpb25XcmFwcGVyczogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBUUkFOU0FDVElPTl9XUkFQUEVSUztcbiAgfSxcblxuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5kaXJ0eUNvbXBvbmVudHNMZW5ndGggPSBudWxsO1xuICAgIENhbGxiYWNrUXVldWUucmVsZWFzZSh0aGlzLmNhbGxiYWNrUXVldWUpO1xuICAgIHRoaXMuY2FsbGJhY2tRdWV1ZSA9IG51bGw7XG4gICAgUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24ucmVsZWFzZSh0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uKTtcbiAgICB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uID0gbnVsbDtcbiAgfSxcblxuICBwZXJmb3JtOiBmdW5jdGlvbiAobWV0aG9kLCBzY29wZSwgYSkge1xuICAgIC8vIEVzc2VudGlhbGx5IGNhbGxzIGB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uLnBlcmZvcm0obWV0aG9kLCBzY29wZSwgYSlgXG4gICAgLy8gd2l0aCB0aGlzIHRyYW5zYWN0aW9uJ3Mgd3JhcHBlcnMgYXJvdW5kIGl0LlxuICAgIHJldHVybiBUcmFuc2FjdGlvbi5NaXhpbi5wZXJmb3JtLmNhbGwodGhpcywgdGhpcy5yZWNvbmNpbGVUcmFuc2FjdGlvbi5wZXJmb3JtLCB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uLCBtZXRob2QsIHNjb3BlLCBhKTtcbiAgfVxufSk7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uKTtcblxuZnVuY3Rpb24gYmF0Y2hlZFVwZGF0ZXMoY2FsbGJhY2ssIGEsIGIsIGMsIGQsIGUpIHtcbiAgZW5zdXJlSW5qZWN0ZWQoKTtcbiAgYmF0Y2hpbmdTdHJhdGVneS5iYXRjaGVkVXBkYXRlcyhjYWxsYmFjaywgYSwgYiwgYywgZCwgZSk7XG59XG5cbi8qKlxuICogQXJyYXkgY29tcGFyYXRvciBmb3IgUmVhY3RDb21wb25lbnRzIGJ5IG1vdW50IG9yZGVyaW5nLlxuICpcbiAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGMxIGZpcnN0IGNvbXBvbmVudCB5b3UncmUgY29tcGFyaW5nXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjMiBzZWNvbmQgY29tcG9uZW50IHlvdSdyZSBjb21wYXJpbmdcbiAqIEByZXR1cm4ge251bWJlcn0gUmV0dXJuIHZhbHVlIHVzYWJsZSBieSBBcnJheS5wcm90b3R5cGUuc29ydCgpLlxuICovXG5mdW5jdGlvbiBtb3VudE9yZGVyQ29tcGFyYXRvcihjMSwgYzIpIHtcbiAgcmV0dXJuIGMxLl9tb3VudE9yZGVyIC0gYzIuX21vdW50T3JkZXI7XG59XG5cbmZ1bmN0aW9uIHJ1bkJhdGNoZWRVcGRhdGVzKHRyYW5zYWN0aW9uKSB7XG4gIHZhciBsZW4gPSB0cmFuc2FjdGlvbi5kaXJ0eUNvbXBvbmVudHNMZW5ndGg7XG4gICEobGVuID09PSBkaXJ0eUNvbXBvbmVudHMubGVuZ3RoKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFeHBlY3RlZCBmbHVzaCB0cmFuc2FjdGlvblxcJ3Mgc3RvcmVkIGRpcnR5LWNvbXBvbmVudHMgbGVuZ3RoICglcykgdG8gJyArICdtYXRjaCBkaXJ0eS1jb21wb25lbnRzIGFycmF5IGxlbmd0aCAoJXMpLicsIGxlbiwgZGlydHlDb21wb25lbnRzLmxlbmd0aCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIC8vIFNpbmNlIHJlY29uY2lsaW5nIGEgY29tcG9uZW50IGhpZ2hlciBpbiB0aGUgb3duZXIgaGllcmFyY2h5IHVzdWFsbHkgKG5vdFxuICAvLyBhbHdheXMgLS0gc2VlIHNob3VsZENvbXBvbmVudFVwZGF0ZSgpKSB3aWxsIHJlY29uY2lsZSBjaGlsZHJlbiwgcmVjb25jaWxlXG4gIC8vIHRoZW0gYmVmb3JlIHRoZWlyIGNoaWxkcmVuIGJ5IHNvcnRpbmcgdGhlIGFycmF5LlxuICBkaXJ0eUNvbXBvbmVudHMuc29ydChtb3VudE9yZGVyQ29tcGFyYXRvcik7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIC8vIElmIGEgY29tcG9uZW50IGlzIHVubW91bnRlZCBiZWZvcmUgcGVuZGluZyBjaGFuZ2VzIGFwcGx5LCBpdCB3aWxsIHN0aWxsXG4gICAgLy8gYmUgaGVyZSwgYnV0IHdlIGFzc3VtZSB0aGF0IGl0IGhhcyBjbGVhcmVkIGl0cyBfcGVuZGluZ0NhbGxiYWNrcyBhbmRcbiAgICAvLyB0aGF0IHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSBpcyBhIG5vb3AuXG4gICAgdmFyIGNvbXBvbmVudCA9IGRpcnR5Q29tcG9uZW50c1tpXTtcblxuICAgIC8vIElmIHBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeSBoYXBwZW5zIHRvIGVucXVldWUgYW55IG5ldyB1cGRhdGVzLCB3ZVxuICAgIC8vIHNob3VsZG4ndCBleGVjdXRlIHRoZSBjYWxsYmFja3MgdW50aWwgdGhlIG5leHQgcmVuZGVyIGhhcHBlbnMsIHNvXG4gICAgLy8gc3Rhc2ggdGhlIGNhbGxiYWNrcyBmaXJzdFxuICAgIHZhciBjYWxsYmFja3MgPSBjb21wb25lbnQuX3BlbmRpbmdDYWxsYmFja3M7XG4gICAgY29tcG9uZW50Ll9wZW5kaW5nQ2FsbGJhY2tzID0gbnVsbDtcblxuICAgIFJlYWN0UmVjb25jaWxlci5wZXJmb3JtVXBkYXRlSWZOZWNlc3NhcnkoY29tcG9uZW50LCB0cmFuc2FjdGlvbi5yZWNvbmNpbGVUcmFuc2FjdGlvbik7XG5cbiAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNhbGxiYWNrcy5sZW5ndGg7IGorKykge1xuICAgICAgICB0cmFuc2FjdGlvbi5jYWxsYmFja1F1ZXVlLmVucXVldWUoY2FsbGJhY2tzW2pdLCBjb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbnZhciBmbHVzaEJhdGNoZWRVcGRhdGVzID0gZnVuY3Rpb24gKCkge1xuICAvLyBSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uJ3Mgd3JhcHBlcnMgd2lsbCBjbGVhciB0aGUgZGlydHlDb21wb25lbnRzXG4gIC8vIGFycmF5IGFuZCBwZXJmb3JtIGFueSB1cGRhdGVzIGVucXVldWVkIGJ5IG1vdW50LXJlYWR5IGhhbmRsZXJzIChpLmUuLFxuICAvLyBjb21wb25lbnREaWRVcGRhdGUpIGJ1dCB3ZSBuZWVkIHRvIGNoZWNrIGhlcmUgdG9vIGluIG9yZGVyIHRvIGNhdGNoXG4gIC8vIHVwZGF0ZXMgZW5xdWV1ZWQgYnkgc2V0U3RhdGUgY2FsbGJhY2tzIGFuZCBhc2FwIGNhbGxzLlxuICB3aGlsZSAoZGlydHlDb21wb25lbnRzLmxlbmd0aCB8fCBhc2FwRW5xdWV1ZWQpIHtcbiAgICBpZiAoZGlydHlDb21wb25lbnRzLmxlbmd0aCkge1xuICAgICAgdmFyIHRyYW5zYWN0aW9uID0gUmVhY3RVcGRhdGVzRmx1c2hUcmFuc2FjdGlvbi5nZXRQb29sZWQoKTtcbiAgICAgIHRyYW5zYWN0aW9uLnBlcmZvcm0ocnVuQmF0Y2hlZFVwZGF0ZXMsIG51bGwsIHRyYW5zYWN0aW9uKTtcbiAgICAgIFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24ucmVsZWFzZSh0cmFuc2FjdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKGFzYXBFbnF1ZXVlZCkge1xuICAgICAgYXNhcEVucXVldWVkID0gZmFsc2U7XG4gICAgICB2YXIgcXVldWUgPSBhc2FwQ2FsbGJhY2tRdWV1ZTtcbiAgICAgIGFzYXBDYWxsYmFja1F1ZXVlID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQoKTtcbiAgICAgIHF1ZXVlLm5vdGlmeUFsbCgpO1xuICAgICAgQ2FsbGJhY2tRdWV1ZS5yZWxlYXNlKHF1ZXVlKTtcbiAgICB9XG4gIH1cbn07XG5mbHVzaEJhdGNoZWRVcGRhdGVzID0gUmVhY3RQZXJmLm1lYXN1cmUoJ1JlYWN0VXBkYXRlcycsICdmbHVzaEJhdGNoZWRVcGRhdGVzJywgZmx1c2hCYXRjaGVkVXBkYXRlcyk7XG5cbi8qKlxuICogTWFyayBhIGNvbXBvbmVudCBhcyBuZWVkaW5nIGEgcmVyZW5kZXIsIGFkZGluZyBhbiBvcHRpb25hbCBjYWxsYmFjayB0byBhXG4gKiBsaXN0IG9mIGZ1bmN0aW9ucyB3aGljaCB3aWxsIGJlIGV4ZWN1dGVkIG9uY2UgdGhlIHJlcmVuZGVyIG9jY3Vycy5cbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZVVwZGF0ZShjb21wb25lbnQpIHtcbiAgZW5zdXJlSW5qZWN0ZWQoKTtcblxuICAvLyBWYXJpb3VzIHBhcnRzIG9mIG91ciBjb2RlIChzdWNoIGFzIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50J3NcbiAgLy8gX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCkgYXNzdW1lIHRoYXQgY2FsbHMgdG8gcmVuZGVyIGFyZW4ndCBuZXN0ZWQ7XG4gIC8vIHZlcmlmeSB0aGF0IHRoYXQncyB0aGUgY2FzZS4gKFRoaXMgaXMgY2FsbGVkIGJ5IGVhY2ggdG9wLWxldmVsIHVwZGF0ZVxuICAvLyBmdW5jdGlvbiwgbGlrZSBzZXRQcm9wcywgc2V0U3RhdGUsIGZvcmNlVXBkYXRlLCBldGMuOyBjcmVhdGlvbiBhbmRcbiAgLy8gZGVzdHJ1Y3Rpb24gb2YgdG9wLWxldmVsIGNvbXBvbmVudHMgaXMgZ3VhcmRlZCBpbiBSZWFjdE1vdW50LilcblxuICBpZiAoIWJhdGNoaW5nU3RyYXRlZ3kuaXNCYXRjaGluZ1VwZGF0ZXMpIHtcbiAgICBiYXRjaGluZ1N0cmF0ZWd5LmJhdGNoZWRVcGRhdGVzKGVucXVldWVVcGRhdGUsIGNvbXBvbmVudCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZGlydHlDb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbn1cblxuLyoqXG4gKiBFbnF1ZXVlIGEgY2FsbGJhY2sgdG8gYmUgcnVuIGF0IHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgYmF0Y2hpbmcgY3ljbGUuIFRocm93c1xuICogaWYgbm8gdXBkYXRlcyBhcmUgY3VycmVudGx5IGJlaW5nIHBlcmZvcm1lZC5cbiAqL1xuZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgY29udGV4dCkge1xuICAhYmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcyA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXMuYXNhcDogQ2FuXFwndCBlbnF1ZXVlIGFuIGFzYXAgY2FsbGJhY2sgaW4gYSBjb250ZXh0IHdoZXJlJyArICd1cGRhdGVzIGFyZSBub3QgYmVpbmcgYmF0Y2hlZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGFzYXBDYWxsYmFja1F1ZXVlLmVucXVldWUoY2FsbGJhY2ssIGNvbnRleHQpO1xuICBhc2FwRW5xdWV1ZWQgPSB0cnVlO1xufVxuXG52YXIgUmVhY3RVcGRhdGVzSW5qZWN0aW9uID0ge1xuICBpbmplY3RSZWNvbmNpbGVUcmFuc2FjdGlvbjogZnVuY3Rpb24gKFJlY29uY2lsZVRyYW5zYWN0aW9uKSB7XG4gICAgIVJlY29uY2lsZVRyYW5zYWN0aW9uID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgcmVjb25jaWxlIHRyYW5zYWN0aW9uIGNsYXNzJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIFJlYWN0VXBkYXRlcy5SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uID0gUmVjb25jaWxlVHJhbnNhY3Rpb247XG4gIH0sXG5cbiAgaW5qZWN0QmF0Y2hpbmdTdHJhdGVneTogZnVuY3Rpb24gKF9iYXRjaGluZ1N0cmF0ZWd5KSB7XG4gICAgIV9iYXRjaGluZ1N0cmF0ZWd5ID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgYmF0Y2hpbmcgc3RyYXRlZ3knKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgISh0eXBlb2YgX2JhdGNoaW5nU3RyYXRlZ3kuYmF0Y2hlZFVwZGF0ZXMgPT09ICdmdW5jdGlvbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGEgYmF0Y2hlZFVwZGF0ZXMoKSBmdW5jdGlvbicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhKHR5cGVvZiBfYmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcyA9PT0gJ2Jvb2xlYW4nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdFVwZGF0ZXM6IG11c3QgcHJvdmlkZSBhbiBpc0JhdGNoaW5nVXBkYXRlcyBib29sZWFuIGF0dHJpYnV0ZScpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBiYXRjaGluZ1N0cmF0ZWd5ID0gX2JhdGNoaW5nU3RyYXRlZ3k7XG4gIH1cbn07XG5cbnZhciBSZWFjdFVwZGF0ZXMgPSB7XG4gIC8qKlxuICAgKiBSZWFjdCByZWZlcmVuY2VzIGBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uYCB1c2luZyB0aGlzIHByb3BlcnR5IGluIG9yZGVyXG4gICAqIHRvIGFsbG93IGRlcGVuZGVuY3kgaW5qZWN0aW9uLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb246IG51bGwsXG5cbiAgYmF0Y2hlZFVwZGF0ZXM6IGJhdGNoZWRVcGRhdGVzLFxuICBlbnF1ZXVlVXBkYXRlOiBlbnF1ZXVlVXBkYXRlLFxuICBmbHVzaEJhdGNoZWRVcGRhdGVzOiBmbHVzaEJhdGNoZWRVcGRhdGVzLFxuICBpbmplY3Rpb246IFJlYWN0VXBkYXRlc0luamVjdGlvbixcbiAgYXNhcDogYXNhcFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFVwZGF0ZXM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0VmVyc2lvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSAnMC4xNC44JzsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU1ZHRE9NUHJvcGVydHlDb25maWdcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBET01Qcm9wZXJ0eSA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHknKTtcblxudmFyIE1VU1RfVVNFX0FUVFJJQlVURSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5NVVNUX1VTRV9BVFRSSUJVVEU7XG5cbnZhciBOUyA9IHtcbiAgeGxpbms6ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyxcbiAgeG1sOiAnaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlJ1xufTtcblxudmFyIFNWR0RPTVByb3BlcnR5Q29uZmlnID0ge1xuICBQcm9wZXJ0aWVzOiB7XG4gICAgY2xpcFBhdGg6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBjeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGN5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGR4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmaWxsOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZmlsbE9wYWNpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb250RmFtaWx5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZm9udFNpemU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZ5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZ3JhZGllbnRUcmFuc2Zvcm06IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBncmFkaWVudFVuaXRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWFya2VyRW5kOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWFya2VyTWlkOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWFya2VyU3RhcnQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBvZmZzZXQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBvcGFjaXR5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcGF0dGVybkNvbnRlbnRVbml0czogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHBhdHRlcm5Vbml0czogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHBvaW50czogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHByZXNlcnZlQXNwZWN0UmF0aW86IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICByOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcng6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICByeTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHNwcmVhZE1ldGhvZDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0b3BDb2xvcjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0b3BPcGFjaXR5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3Ryb2tlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3Ryb2tlRGFzaGFycmF5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3Ryb2tlTGluZWNhcDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0cm9rZU9wYWNpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdHJva2VXaWR0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHRleHRBbmNob3I6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB0cmFuc2Zvcm06IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB2ZXJzaW9uOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgdmlld0JveDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHgxOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeDI6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtBY3R1YXRlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtBcmNyb2xlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtIcmVmOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtSb2xlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtTaG93OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtUaXRsZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHhsaW5rVHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHhtbEJhc2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bWxMYW5nOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeG1sU3BhY2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB5MTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHkyOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeTogTVVTVF9VU0VfQVRUUklCVVRFXG4gIH0sXG4gIERPTUF0dHJpYnV0ZU5hbWVzcGFjZXM6IHtcbiAgICB4bGlua0FjdHVhdGU6IE5TLnhsaW5rLFxuICAgIHhsaW5rQXJjcm9sZTogTlMueGxpbmssXG4gICAgeGxpbmtIcmVmOiBOUy54bGluayxcbiAgICB4bGlua1JvbGU6IE5TLnhsaW5rLFxuICAgIHhsaW5rU2hvdzogTlMueGxpbmssXG4gICAgeGxpbmtUaXRsZTogTlMueGxpbmssXG4gICAgeGxpbmtUeXBlOiBOUy54bGluayxcbiAgICB4bWxCYXNlOiBOUy54bWwsXG4gICAgeG1sTGFuZzogTlMueG1sLFxuICAgIHhtbFNwYWNlOiBOUy54bWxcbiAgfSxcbiAgRE9NQXR0cmlidXRlTmFtZXM6IHtcbiAgICBjbGlwUGF0aDogJ2NsaXAtcGF0aCcsXG4gICAgZmlsbE9wYWNpdHk6ICdmaWxsLW9wYWNpdHknLFxuICAgIGZvbnRGYW1pbHk6ICdmb250LWZhbWlseScsXG4gICAgZm9udFNpemU6ICdmb250LXNpemUnLFxuICAgIGdyYWRpZW50VHJhbnNmb3JtOiAnZ3JhZGllbnRUcmFuc2Zvcm0nLFxuICAgIGdyYWRpZW50VW5pdHM6ICdncmFkaWVudFVuaXRzJyxcbiAgICBtYXJrZXJFbmQ6ICdtYXJrZXItZW5kJyxcbiAgICBtYXJrZXJNaWQ6ICdtYXJrZXItbWlkJyxcbiAgICBtYXJrZXJTdGFydDogJ21hcmtlci1zdGFydCcsXG4gICAgcGF0dGVybkNvbnRlbnRVbml0czogJ3BhdHRlcm5Db250ZW50VW5pdHMnLFxuICAgIHBhdHRlcm5Vbml0czogJ3BhdHRlcm5Vbml0cycsXG4gICAgcHJlc2VydmVBc3BlY3RSYXRpbzogJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLFxuICAgIHNwcmVhZE1ldGhvZDogJ3NwcmVhZE1ldGhvZCcsXG4gICAgc3RvcENvbG9yOiAnc3RvcC1jb2xvcicsXG4gICAgc3RvcE9wYWNpdHk6ICdzdG9wLW9wYWNpdHknLFxuICAgIHN0cm9rZURhc2hhcnJheTogJ3N0cm9rZS1kYXNoYXJyYXknLFxuICAgIHN0cm9rZUxpbmVjYXA6ICdzdHJva2UtbGluZWNhcCcsXG4gICAgc3Ryb2tlT3BhY2l0eTogJ3N0cm9rZS1vcGFjaXR5JyxcbiAgICBzdHJva2VXaWR0aDogJ3N0cm9rZS13aWR0aCcsXG4gICAgdGV4dEFuY2hvcjogJ3RleHQtYW5jaG9yJyxcbiAgICB2aWV3Qm94OiAndmlld0JveCcsXG4gICAgeGxpbmtBY3R1YXRlOiAneGxpbms6YWN0dWF0ZScsXG4gICAgeGxpbmtBcmNyb2xlOiAneGxpbms6YXJjcm9sZScsXG4gICAgeGxpbmtIcmVmOiAneGxpbms6aHJlZicsXG4gICAgeGxpbmtSb2xlOiAneGxpbms6cm9sZScsXG4gICAgeGxpbmtTaG93OiAneGxpbms6c2hvdycsXG4gICAgeGxpbmtUaXRsZTogJ3hsaW5rOnRpdGxlJyxcbiAgICB4bGlua1R5cGU6ICd4bGluazp0eXBlJyxcbiAgICB4bWxCYXNlOiAneG1sOmJhc2UnLFxuICAgIHhtbExhbmc6ICd4bWw6bGFuZycsXG4gICAgeG1sU3BhY2U6ICd4bWw6c3BhY2UnXG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU1ZHRE9NUHJvcGVydHlDb25maWc7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFNlbGVjdEV2ZW50UGx1Z2luXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRQcm9wYWdhdG9ycyA9IHJlcXVpcmUoJy4vRXZlbnRQcm9wYWdhdG9ycycpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdElucHV0U2VsZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdElucHV0U2VsZWN0aW9uJyk7XG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbnZhciBnZXRBY3RpdmVFbGVtZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvZ2V0QWN0aXZlRWxlbWVudCcpO1xudmFyIGlzVGV4dElucHV0RWxlbWVudCA9IHJlcXVpcmUoJy4vaXNUZXh0SW5wdXRFbGVtZW50Jyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xudmFyIHNoYWxsb3dFcXVhbCA9IHJlcXVpcmUoJ2ZianMvbGliL3NoYWxsb3dFcXVhbCcpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbnZhciBza2lwU2VsZWN0aW9uQ2hhbmdlRXZlbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ2RvY3VtZW50TW9kZScgaW4gZG9jdW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRNb2RlIDw9IDExO1xuXG52YXIgZXZlbnRUeXBlcyA9IHtcbiAgc2VsZWN0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TZWxlY3Q6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblNlbGVjdENhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDb250ZXh0TWVudSwgdG9wTGV2ZWxUeXBlcy50b3BGb2N1cywgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93biwgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZVVwLCB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZV1cbiAgfVxufTtcblxudmFyIGFjdGl2ZUVsZW1lbnQgPSBudWxsO1xudmFyIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG52YXIgbGFzdFNlbGVjdGlvbiA9IG51bGw7XG52YXIgbW91c2VEb3duID0gZmFsc2U7XG5cbi8vIFRyYWNrIHdoZXRoZXIgYSBsaXN0ZW5lciBleGlzdHMgZm9yIHRoaXMgcGx1Z2luLiBJZiBub25lIGV4aXN0LCB3ZSBkb1xuLy8gbm90IGV4dHJhY3QgZXZlbnRzLlxudmFyIGhhc0xpc3RlbmVyID0gZmFsc2U7XG52YXIgT05fU0VMRUNUX0tFWSA9IGtleU9mKHsgb25TZWxlY3Q6IG51bGwgfSk7XG5cbi8qKlxuICogR2V0IGFuIG9iamVjdCB3aGljaCBpcyBhIHVuaXF1ZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gKlxuICogVGhlIHJldHVybiB2YWx1ZSB3aWxsIG5vdCBiZSBjb25zaXN0ZW50IGFjcm9zcyBub2RlcyBvciBicm93c2VycywgYnV0XG4gKiB0d28gaWRlbnRpY2FsIHNlbGVjdGlvbnMgb24gdGhlIHNhbWUgbm9kZSB3aWxsIHJldHVybiBpZGVudGljYWwgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0U2VsZWN0aW9uKG5vZGUpIHtcbiAgaWYgKCdzZWxlY3Rpb25TdGFydCcgaW4gbm9kZSAmJiBSZWFjdElucHV0U2VsZWN0aW9uLmhhc1NlbGVjdGlvbkNhcGFiaWxpdGllcyhub2RlKSkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogbm9kZS5zZWxlY3Rpb25TdGFydCxcbiAgICAgIGVuZDogbm9kZS5zZWxlY3Rpb25FbmRcbiAgICB9O1xuICB9IGVsc2UgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcbiAgICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIHJldHVybiB7XG4gICAgICBhbmNob3JOb2RlOiBzZWxlY3Rpb24uYW5jaG9yTm9kZSxcbiAgICAgIGFuY2hvck9mZnNldDogc2VsZWN0aW9uLmFuY2hvck9mZnNldCxcbiAgICAgIGZvY3VzTm9kZTogc2VsZWN0aW9uLmZvY3VzTm9kZSxcbiAgICAgIGZvY3VzT2Zmc2V0OiBzZWxlY3Rpb24uZm9jdXNPZmZzZXRcbiAgICB9O1xuICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xuICAgIHZhciByYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgIHJldHVybiB7XG4gICAgICBwYXJlbnRFbGVtZW50OiByYW5nZS5wYXJlbnRFbGVtZW50KCksXG4gICAgICB0ZXh0OiByYW5nZS50ZXh0LFxuICAgICAgdG9wOiByYW5nZS5ib3VuZGluZ1RvcCxcbiAgICAgIGxlZnQ6IHJhbmdlLmJvdW5kaW5nTGVmdFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBQb2xsIHNlbGVjdGlvbiB0byBzZWUgd2hldGhlciBpdCdzIGNoYW5nZWQuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50XG4gKiBAcmV0dXJuIHs/U3ludGhldGljRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIGNvbnN0cnVjdFNlbGVjdEV2ZW50KG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAvLyBFbnN1cmUgd2UgaGF2ZSB0aGUgcmlnaHQgZWxlbWVudCwgYW5kIHRoYXQgdGhlIHVzZXIgaXMgbm90IGRyYWdnaW5nIGFcbiAgLy8gc2VsZWN0aW9uICh0aGlzIG1hdGNoZXMgbmF0aXZlIGBzZWxlY3RgIGV2ZW50IGJlaGF2aW9yKS4gSW4gSFRNTDUsIHNlbGVjdFxuICAvLyBmaXJlcyBvbmx5IG9uIGlucHV0IGFuZCB0ZXh0YXJlYSB0aHVzIGlmIHRoZXJlJ3Mgbm8gZm9jdXNlZCBlbGVtZW50IHdlXG4gIC8vIHdvbid0IGRpc3BhdGNoLlxuICBpZiAobW91c2VEb3duIHx8IGFjdGl2ZUVsZW1lbnQgPT0gbnVsbCB8fCBhY3RpdmVFbGVtZW50ICE9PSBnZXRBY3RpdmVFbGVtZW50KCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIE9ubHkgZmlyZSB3aGVuIHNlbGVjdGlvbiBoYXMgYWN0dWFsbHkgY2hhbmdlZC5cbiAgdmFyIGN1cnJlbnRTZWxlY3Rpb24gPSBnZXRTZWxlY3Rpb24oYWN0aXZlRWxlbWVudCk7XG4gIGlmICghbGFzdFNlbGVjdGlvbiB8fCAhc2hhbGxvd0VxdWFsKGxhc3RTZWxlY3Rpb24sIGN1cnJlbnRTZWxlY3Rpb24pKSB7XG4gICAgbGFzdFNlbGVjdGlvbiA9IGN1cnJlbnRTZWxlY3Rpb247XG5cbiAgICB2YXIgc3ludGhldGljRXZlbnQgPSBTeW50aGV0aWNFdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlcy5zZWxlY3QsIGFjdGl2ZUVsZW1lbnRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICAgIHN5bnRoZXRpY0V2ZW50LnR5cGUgPSAnc2VsZWN0JztcbiAgICBzeW50aGV0aWNFdmVudC50YXJnZXQgPSBhY3RpdmVFbGVtZW50O1xuXG4gICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKHN5bnRoZXRpY0V2ZW50KTtcblxuICAgIHJldHVybiBzeW50aGV0aWNFdmVudDtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIFRoaXMgcGx1Z2luIGNyZWF0ZXMgYW4gYG9uU2VsZWN0YCBldmVudCB0aGF0IG5vcm1hbGl6ZXMgc2VsZWN0IGV2ZW50c1xuICogYWNyb3NzIGZvcm0gZWxlbWVudHMuXG4gKlxuICogU3VwcG9ydGVkIGVsZW1lbnRzIGFyZTpcbiAqIC0gaW5wdXQgKHNlZSBgaXNUZXh0SW5wdXRFbGVtZW50YClcbiAqIC0gdGV4dGFyZWFcbiAqIC0gY29udGVudEVkaXRhYmxlXG4gKlxuICogVGhpcyBkaWZmZXJzIGZyb20gbmF0aXZlIGJyb3dzZXIgaW1wbGVtZW50YXRpb25zIGluIHRoZSBmb2xsb3dpbmcgd2F5czpcbiAqIC0gRmlyZXMgb24gY29udGVudEVkaXRhYmxlIGZpZWxkcyBhcyB3ZWxsIGFzIGlucHV0cy5cbiAqIC0gRmlyZXMgZm9yIGNvbGxhcHNlZCBzZWxlY3Rpb24uXG4gKiAtIEZpcmVzIGFmdGVyIHVzZXIgaW5wdXQuXG4gKi9cbnZhciBTZWxlY3RFdmVudFBsdWdpbiA9IHtcblxuICBldmVudFR5cGVzOiBldmVudFR5cGVzLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IHRvcExldmVsVGFyZ2V0IFRoZSBsaXN0ZW5pbmcgY29tcG9uZW50IHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHsqfSBBbiBhY2N1bXVsYXRpb24gb2Ygc3ludGhldGljIGV2ZW50cy5cbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuZXh0cmFjdEV2ZW50c31cbiAgICovXG4gIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgICBpZiAoIWhhc0xpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuICAgICAgLy8gVHJhY2sgdGhlIGlucHV0IG5vZGUgdGhhdCBoYXMgZm9jdXMuXG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRm9jdXM6XG4gICAgICAgIGlmIChpc1RleHRJbnB1dEVsZW1lbnQodG9wTGV2ZWxUYXJnZXQpIHx8IHRvcExldmVsVGFyZ2V0LmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgYWN0aXZlRWxlbWVudCA9IHRvcExldmVsVGFyZ2V0O1xuICAgICAgICAgIGFjdGl2ZUVsZW1lbnRJRCA9IHRvcExldmVsVGFyZ2V0SUQ7XG4gICAgICAgICAgbGFzdFNlbGVjdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQmx1cjpcbiAgICAgICAgYWN0aXZlRWxlbWVudCA9IG51bGw7XG4gICAgICAgIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG4gICAgICAgIGxhc3RTZWxlY3Rpb24gPSBudWxsO1xuICAgICAgICBicmVhaztcblxuICAgICAgLy8gRG9uJ3QgZmlyZSB0aGUgZXZlbnQgd2hpbGUgdGhlIHVzZXIgaXMgZHJhZ2dpbmcuIFRoaXMgbWF0Y2hlcyB0aGVcbiAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgbmF0aXZlIHNlbGVjdCBldmVudC5cbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZURvd246XG4gICAgICAgIG1vdXNlRG93biA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbnRleHRNZW51OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlVXA6XG4gICAgICAgIG1vdXNlRG93biA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gY29uc3RydWN0U2VsZWN0RXZlbnQobmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcblxuICAgICAgLy8gQ2hyb21lIGFuZCBJRSBmaXJlIG5vbi1zdGFuZGFyZCBldmVudCB3aGVuIHNlbGVjdGlvbiBpcyBjaGFuZ2VkIChhbmRcbiAgICAgIC8vIHNvbWV0aW1lcyB3aGVuIGl0IGhhc24ndCkuIElFJ3MgZXZlbnQgZmlyZXMgb3V0IG9mIG9yZGVyIHdpdGggcmVzcGVjdFxuICAgICAgLy8gdG8ga2V5IGFuZCBpbnB1dCBldmVudHMgb24gZGVsZXRpb24sIHNvIHdlIGRpc2NhcmQgaXQuXG4gICAgICAvL1xuICAgICAgLy8gRmlyZWZveCBkb2Vzbid0IHN1cHBvcnQgc2VsZWN0aW9uY2hhbmdlLCBzbyBjaGVjayBzZWxlY3Rpb24gc3RhdHVzXG4gICAgICAvLyBhZnRlciBlYWNoIGtleSBlbnRyeS4gVGhlIHNlbGVjdGlvbiBjaGFuZ2VzIGFmdGVyIGtleWRvd24gYW5kIGJlZm9yZVxuICAgICAgLy8ga2V5dXAsIGJ1dCB3ZSBjaGVjayBvbiBrZXlkb3duIGFzIHdlbGwgaW4gdGhlIGNhc2Ugb2YgaG9sZGluZyBkb3duIGFcbiAgICAgIC8vIGtleSwgd2hlbiBtdWx0aXBsZSBrZXlkb3duIGV2ZW50cyBhcmUgZmlyZWQgYnV0IG9ubHkgb25lIGtleXVwIGlzLlxuICAgICAgLy8gVGhpcyBpcyBhbHNvIG91ciBhcHByb2FjaCBmb3IgSUUgaGFuZGxpbmcsIGZvciB0aGUgcmVhc29uIGFib3ZlLlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZTpcbiAgICAgICAgaWYgKHNraXBTZWxlY3Rpb25DaGFuZ2VFdmVudCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5RG93bjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcDpcbiAgICAgICAgcmV0dXJuIGNvbnN0cnVjdFNlbGVjdEV2ZW50KG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG5cbiAgZGlkUHV0TGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAocmVnaXN0cmF0aW9uTmFtZSA9PT0gT05fU0VMRUNUX0tFWSkge1xuICAgICAgaGFzTGlzdGVuZXIgPSB0cnVlO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTZWxlY3RFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU2VydmVyUmVhY3RSb290SW5kZXhcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFNpemUgb2YgdGhlIHJlYWN0Um9vdCBJRCBzcGFjZS4gV2UgZ2VuZXJhdGUgcmFuZG9tIG51bWJlcnMgZm9yIFJlYWN0IHJvb3RcbiAqIElEcyBhbmQgaWYgdGhlcmUncyBhIGNvbGxpc2lvbiB0aGUgZXZlbnRzIGFuZCBET00gdXBkYXRlIHN5c3RlbSB3aWxsXG4gKiBnZXQgY29uZnVzZWQuIEluIHRoZSBmdXR1cmUgd2UgbmVlZCBhIHdheSB0byBnZW5lcmF0ZSBHVUlEcyBidXQgZm9yXG4gKiBub3cgdGhpcyB3aWxsIHdvcmsgb24gYSBzbWFsbGVyIHNjYWxlLlxuICovXG52YXIgR0xPQkFMX01PVU5UX1BPSU5UX01BWCA9IE1hdGgucG93KDIsIDUzKTtcblxudmFyIFNlcnZlclJlYWN0Um9vdEluZGV4ID0ge1xuICBjcmVhdGVSZWFjdFJvb3RJbmRleDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIEdMT0JBTF9NT1VOVF9QT0lOVF9NQVgpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlcnZlclJlYWN0Um9vdEluZGV4OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTaW1wbGVFdmVudFBsdWdpblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50TGlzdGVuZXIgPSByZXF1aXJlKCdmYmpzL2xpYi9FdmVudExpc3RlbmVyJyk7XG52YXIgRXZlbnRQcm9wYWdhdG9ycyA9IHJlcXVpcmUoJy4vRXZlbnRQcm9wYWdhdG9ycycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBTeW50aGV0aWNDbGlwYm9hcmRFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljQ2xpcGJvYXJkRXZlbnQnKTtcbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcbnZhciBTeW50aGV0aWNGb2N1c0V2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNGb2N1c0V2ZW50Jyk7XG52YXIgU3ludGhldGljS2V5Ym9hcmRFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljS2V5Ym9hcmRFdmVudCcpO1xudmFyIFN5bnRoZXRpY01vdXNlRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY01vdXNlRXZlbnQnKTtcbnZhciBTeW50aGV0aWNEcmFnRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0RyYWdFdmVudCcpO1xudmFyIFN5bnRoZXRpY1RvdWNoRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1RvdWNoRXZlbnQnKTtcbnZhciBTeW50aGV0aWNVSUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNVSUV2ZW50Jyk7XG52YXIgU3ludGhldGljV2hlZWxFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljV2hlZWxFdmVudCcpO1xuXG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcbnZhciBnZXRFdmVudENoYXJDb2RlID0gcmVxdWlyZSgnLi9nZXRFdmVudENoYXJDb2RlJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbnZhciBldmVudFR5cGVzID0ge1xuICBhYm9ydDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQWJvcnQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkFib3J0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgYmx1cjoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQmx1cjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQmx1ckNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGNhblBsYXk6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNhblBsYXk6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNhblBsYXlDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBjYW5QbGF5VGhyb3VnaDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQ2FuUGxheVRocm91Z2g6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNhblBsYXlUaHJvdWdoQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgY2xpY2s6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNsaWNrOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25DbGlja0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGNvbnRleHRNZW51OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db250ZXh0TWVudTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ29udGV4dE1lbnVDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBjb3B5OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Db3B5OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Db3B5Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgY3V0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25DdXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkN1dENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRvdWJsZUNsaWNrOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Eb3VibGVDbGljazogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRG91YmxlQ2xpY2tDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJhZ0VuZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0VuZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ0VuZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWdFbnRlcjoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0VudGVyOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnRW50ZXJDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnRXhpdDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ0V4aXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdFeGl0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJhZ0xlYXZlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnTGVhdmU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdMZWF2ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWdPdmVyOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnT3ZlcjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ092ZXJDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkRyYWdTdGFydDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ1N0YXJ0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJvcDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJvcDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJvcENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGR1cmF0aW9uQ2hhbmdlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EdXJhdGlvbkNoYW5nZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHVyYXRpb25DaGFuZ2VDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBlbXB0aWVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbXB0aWVkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25FbXB0aWVkQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZW5jcnlwdGVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbmNyeXB0ZWQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkVuY3J5cHRlZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGVuZGVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FbmRlZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRW5kZWRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBlcnJvcjoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRXJyb3I6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkVycm9yQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZm9jdXM6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkZvY3VzOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Gb2N1c0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGlucHV0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25JbnB1dDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uSW5wdXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBrZXlEb3duOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25LZXlEb3duOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25LZXlEb3duQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAga2V5UHJlc3M6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbktleVByZXNzOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25LZXlQcmVzc0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGtleVVwOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25LZXlVcDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uS2V5VXBDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBsb2FkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Mb2FkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Mb2FkQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbG9hZGVkRGF0YToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTG9hZGVkRGF0YTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTG9hZGVkRGF0YUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGxvYWRlZE1ldGFkYXRhOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Mb2FkZWRNZXRhZGF0YTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTG9hZGVkTWV0YWRhdGFDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBsb2FkU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkxvYWRTdGFydDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTG9hZFN0YXJ0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgLy8gTm90ZTogV2UgZG8gbm90IGFsbG93IGxpc3RlbmluZyB0byBtb3VzZU92ZXIgZXZlbnRzLiBJbnN0ZWFkLCB1c2UgdGhlXG4gIC8vIG9uTW91c2VFbnRlci9vbk1vdXNlTGVhdmUgY3JlYXRlZCBieSBgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luYC5cbiAgbW91c2VEb3duOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Nb3VzZURvd246IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlRG93bkNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIG1vdXNlTW92ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTW91c2VNb3ZlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Nb3VzZU1vdmVDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBtb3VzZU91dDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTW91c2VPdXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlT3V0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbW91c2VPdmVyOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Nb3VzZU92ZXI6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlT3ZlckNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIG1vdXNlVXA6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbk1vdXNlVXA6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlVXBDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBwYXN0ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUGFzdGU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBhc3RlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgcGF1c2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblBhdXNlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25QYXVzZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHBsYXk6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblBsYXk6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBsYXlDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBwbGF5aW5nOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25QbGF5aW5nOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25QbGF5aW5nQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgcHJvZ3Jlc3M6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblByb2dyZXNzOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Qcm9ncmVzc0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHJhdGVDaGFuZ2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblJhdGVDaGFuZ2U6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblJhdGVDaGFuZ2VDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICByZXNldDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUmVzZXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblJlc2V0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgc2Nyb2xsOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TY3JvbGw6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblNjcm9sbENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHNlZWtlZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uU2Vla2VkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TZWVrZWRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBzZWVraW5nOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TZWVraW5nOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TZWVraW5nQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgc3RhbGxlZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uU3RhbGxlZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uU3RhbGxlZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHN1Ym1pdDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uU3VibWl0OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TdWJtaXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBzdXNwZW5kOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TdXNwZW5kOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TdXNwZW5kQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgdGltZVVwZGF0ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uVGltZVVwZGF0ZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVGltZVVwZGF0ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHRvdWNoQ2FuY2VsOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Ub3VjaENhbmNlbDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVG91Y2hDYW5jZWxDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB0b3VjaEVuZDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uVG91Y2hFbmQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoRW5kQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgdG91Y2hNb3ZlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Ub3VjaE1vdmU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoTW92ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHRvdWNoU3RhcnQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblRvdWNoU3RhcnQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblRvdWNoU3RhcnRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB2b2x1bWVDaGFuZ2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblZvbHVtZUNoYW5nZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVm9sdW1lQ2hhbmdlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgd2FpdGluZzoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uV2FpdGluZzogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uV2FpdGluZ0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHdoZWVsOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25XaGVlbDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uV2hlZWxDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9XG59O1xuXG52YXIgdG9wTGV2ZWxFdmVudHNUb0Rpc3BhdGNoQ29uZmlnID0ge1xuICB0b3BBYm9ydDogZXZlbnRUeXBlcy5hYm9ydCxcbiAgdG9wQmx1cjogZXZlbnRUeXBlcy5ibHVyLFxuICB0b3BDYW5QbGF5OiBldmVudFR5cGVzLmNhblBsYXksXG4gIHRvcENhblBsYXlUaHJvdWdoOiBldmVudFR5cGVzLmNhblBsYXlUaHJvdWdoLFxuICB0b3BDbGljazogZXZlbnRUeXBlcy5jbGljayxcbiAgdG9wQ29udGV4dE1lbnU6IGV2ZW50VHlwZXMuY29udGV4dE1lbnUsXG4gIHRvcENvcHk6IGV2ZW50VHlwZXMuY29weSxcbiAgdG9wQ3V0OiBldmVudFR5cGVzLmN1dCxcbiAgdG9wRG91YmxlQ2xpY2s6IGV2ZW50VHlwZXMuZG91YmxlQ2xpY2ssXG4gIHRvcERyYWc6IGV2ZW50VHlwZXMuZHJhZyxcbiAgdG9wRHJhZ0VuZDogZXZlbnRUeXBlcy5kcmFnRW5kLFxuICB0b3BEcmFnRW50ZXI6IGV2ZW50VHlwZXMuZHJhZ0VudGVyLFxuICB0b3BEcmFnRXhpdDogZXZlbnRUeXBlcy5kcmFnRXhpdCxcbiAgdG9wRHJhZ0xlYXZlOiBldmVudFR5cGVzLmRyYWdMZWF2ZSxcbiAgdG9wRHJhZ092ZXI6IGV2ZW50VHlwZXMuZHJhZ092ZXIsXG4gIHRvcERyYWdTdGFydDogZXZlbnRUeXBlcy5kcmFnU3RhcnQsXG4gIHRvcERyb3A6IGV2ZW50VHlwZXMuZHJvcCxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6IGV2ZW50VHlwZXMuZHVyYXRpb25DaGFuZ2UsXG4gIHRvcEVtcHRpZWQ6IGV2ZW50VHlwZXMuZW1wdGllZCxcbiAgdG9wRW5jcnlwdGVkOiBldmVudFR5cGVzLmVuY3J5cHRlZCxcbiAgdG9wRW5kZWQ6IGV2ZW50VHlwZXMuZW5kZWQsXG4gIHRvcEVycm9yOiBldmVudFR5cGVzLmVycm9yLFxuICB0b3BGb2N1czogZXZlbnRUeXBlcy5mb2N1cyxcbiAgdG9wSW5wdXQ6IGV2ZW50VHlwZXMuaW5wdXQsXG4gIHRvcEtleURvd246IGV2ZW50VHlwZXMua2V5RG93bixcbiAgdG9wS2V5UHJlc3M6IGV2ZW50VHlwZXMua2V5UHJlc3MsXG4gIHRvcEtleVVwOiBldmVudFR5cGVzLmtleVVwLFxuICB0b3BMb2FkOiBldmVudFR5cGVzLmxvYWQsXG4gIHRvcExvYWRlZERhdGE6IGV2ZW50VHlwZXMubG9hZGVkRGF0YSxcbiAgdG9wTG9hZGVkTWV0YWRhdGE6IGV2ZW50VHlwZXMubG9hZGVkTWV0YWRhdGEsXG4gIHRvcExvYWRTdGFydDogZXZlbnRUeXBlcy5sb2FkU3RhcnQsXG4gIHRvcE1vdXNlRG93bjogZXZlbnRUeXBlcy5tb3VzZURvd24sXG4gIHRvcE1vdXNlTW92ZTogZXZlbnRUeXBlcy5tb3VzZU1vdmUsXG4gIHRvcE1vdXNlT3V0OiBldmVudFR5cGVzLm1vdXNlT3V0LFxuICB0b3BNb3VzZU92ZXI6IGV2ZW50VHlwZXMubW91c2VPdmVyLFxuICB0b3BNb3VzZVVwOiBldmVudFR5cGVzLm1vdXNlVXAsXG4gIHRvcFBhc3RlOiBldmVudFR5cGVzLnBhc3RlLFxuICB0b3BQYXVzZTogZXZlbnRUeXBlcy5wYXVzZSxcbiAgdG9wUGxheTogZXZlbnRUeXBlcy5wbGF5LFxuICB0b3BQbGF5aW5nOiBldmVudFR5cGVzLnBsYXlpbmcsXG4gIHRvcFByb2dyZXNzOiBldmVudFR5cGVzLnByb2dyZXNzLFxuICB0b3BSYXRlQ2hhbmdlOiBldmVudFR5cGVzLnJhdGVDaGFuZ2UsXG4gIHRvcFJlc2V0OiBldmVudFR5cGVzLnJlc2V0LFxuICB0b3BTY3JvbGw6IGV2ZW50VHlwZXMuc2Nyb2xsLFxuICB0b3BTZWVrZWQ6IGV2ZW50VHlwZXMuc2Vla2VkLFxuICB0b3BTZWVraW5nOiBldmVudFR5cGVzLnNlZWtpbmcsXG4gIHRvcFN0YWxsZWQ6IGV2ZW50VHlwZXMuc3RhbGxlZCxcbiAgdG9wU3VibWl0OiBldmVudFR5cGVzLnN1Ym1pdCxcbiAgdG9wU3VzcGVuZDogZXZlbnRUeXBlcy5zdXNwZW5kLFxuICB0b3BUaW1lVXBkYXRlOiBldmVudFR5cGVzLnRpbWVVcGRhdGUsXG4gIHRvcFRvdWNoQ2FuY2VsOiBldmVudFR5cGVzLnRvdWNoQ2FuY2VsLFxuICB0b3BUb3VjaEVuZDogZXZlbnRUeXBlcy50b3VjaEVuZCxcbiAgdG9wVG91Y2hNb3ZlOiBldmVudFR5cGVzLnRvdWNoTW92ZSxcbiAgdG9wVG91Y2hTdGFydDogZXZlbnRUeXBlcy50b3VjaFN0YXJ0LFxuICB0b3BWb2x1bWVDaGFuZ2U6IGV2ZW50VHlwZXMudm9sdW1lQ2hhbmdlLFxuICB0b3BXYWl0aW5nOiBldmVudFR5cGVzLndhaXRpbmcsXG4gIHRvcFdoZWVsOiBldmVudFR5cGVzLndoZWVsXG59O1xuXG5mb3IgKHZhciB0eXBlIGluIHRvcExldmVsRXZlbnRzVG9EaXNwYXRjaENvbmZpZykge1xuICB0b3BMZXZlbEV2ZW50c1RvRGlzcGF0Y2hDb25maWdbdHlwZV0uZGVwZW5kZW5jaWVzID0gW3R5cGVdO1xufVxuXG52YXIgT05fQ0xJQ0tfS0VZID0ga2V5T2YoeyBvbkNsaWNrOiBudWxsIH0pO1xudmFyIG9uQ2xpY2tMaXN0ZW5lcnMgPSB7fTtcblxudmFyIFNpbXBsZUV2ZW50UGx1Z2luID0ge1xuXG4gIGV2ZW50VHlwZXM6IGV2ZW50VHlwZXMsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIHZhciBkaXNwYXRjaENvbmZpZyA9IHRvcExldmVsRXZlbnRzVG9EaXNwYXRjaENvbmZpZ1t0b3BMZXZlbFR5cGVdO1xuICAgIGlmICghZGlzcGF0Y2hDb25maWcpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgRXZlbnRDb25zdHJ1Y3RvcjtcbiAgICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEFib3J0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENhblBsYXk6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ2FuUGxheVRocm91Z2g6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHVyYXRpb25DaGFuZ2U6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRW1wdGllZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BFbmNyeXB0ZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRW5kZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRXJyb3I6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wSW5wdXQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTG9hZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BMb2FkZWREYXRhOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcExvYWRlZE1ldGFkYXRhOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcExvYWRTdGFydDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BQYXVzZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BQbGF5OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBsYXlpbmc6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUHJvZ3Jlc3M6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUmF0ZUNoYW5nZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BSZXNldDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTZWVrZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wU2Vla2luZzpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTdGFsbGVkOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFN1Ym1pdDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTdXNwZW5kOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFRpbWVVcGRhdGU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVm9sdW1lQ2hhbmdlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFdhaXRpbmc6XG4gICAgICAgIC8vIEhUTUwgRXZlbnRzXG4gICAgICAgIC8vIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvaW5kZXguaHRtbCNldmVudHMtMFxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzOlxuICAgICAgICAvLyBGaXJlRm94IGNyZWF0ZXMgYSBrZXlwcmVzcyBldmVudCBmb3IgZnVuY3Rpb24ga2V5cyB0b28uIFRoaXMgcmVtb3Zlc1xuICAgICAgICAvLyB0aGUgdW53YW50ZWQga2V5cHJlc3MgZXZlbnRzLiBFbnRlciBpcyBob3dldmVyIGJvdGggcHJpbnRhYmxlIGFuZFxuICAgICAgICAvLyBub24tcHJpbnRhYmxlLiBPbmUgd291bGQgZXhwZWN0IFRhYiB0byBiZSBhcyB3ZWxsIChidXQgaXQgaXNuJ3QpLlxuICAgICAgICBpZiAoZ2V0RXZlbnRDaGFyQ29kZShuYXRpdmVFdmVudCkgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd246XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5VXA6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNLZXlib2FyZEV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BCbHVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzOlxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljRm9jdXNFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ2xpY2s6XG4gICAgICAgIC8vIEZpcmVmb3ggY3JlYXRlcyBhIGNsaWNrIGV2ZW50IG9uIHJpZ2h0IG1vdXNlIGNsaWNrcy4gVGhpcyByZW1vdmVzIHRoZVxuICAgICAgICAvLyB1bndhbnRlZCBjbGljayBldmVudHMuXG4gICAgICAgIGlmIChuYXRpdmVFdmVudC5idXR0b24gPT09IDIpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvbnRleHRNZW51OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERvdWJsZUNsaWNrOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU1vdmU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VPdXQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlVXA6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNNb3VzZUV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdFbmQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJhZ0VudGVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdFeGl0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdMZWF2ZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnT3ZlcjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnU3RhcnQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJvcDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY0RyYWdFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hDYW5jZWw6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hFbmQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hNb3ZlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoU3RhcnQ6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNUb3VjaEV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTY3JvbGw6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNVSUV2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BXaGVlbDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY1doZWVsRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcENvcHk6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ3V0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBhc3RlOlxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljQ2xpcGJvYXJkRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAhRXZlbnRDb25zdHJ1Y3RvciA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdTaW1wbGVFdmVudFBsdWdpbjogVW5oYW5kbGVkIGV2ZW50IHR5cGUsIGAlc2AuJywgdG9wTGV2ZWxUeXBlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIGV2ZW50ID0gRXZlbnRDb25zdHJ1Y3Rvci5nZXRQb29sZWQoZGlzcGF0Y2hDb25maWcsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcbiAgICByZXR1cm4gZXZlbnQ7XG4gIH0sXG5cbiAgZGlkUHV0TGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpIHtcbiAgICAvLyBNb2JpbGUgU2FmYXJpIGRvZXMgbm90IGZpcmUgcHJvcGVybHkgYnViYmxlIGNsaWNrIGV2ZW50cyBvblxuICAgIC8vIG5vbi1pbnRlcmFjdGl2ZSBlbGVtZW50cywgd2hpY2ggbWVhbnMgZGVsZWdhdGVkIGNsaWNrIGxpc3RlbmVycyBkbyBub3RcbiAgICAvLyBmaXJlLiBUaGUgd29ya2Fyb3VuZCBmb3IgdGhpcyBidWcgaW52b2x2ZXMgYXR0YWNoaW5nIGFuIGVtcHR5IGNsaWNrXG4gICAgLy8gbGlzdGVuZXIgb24gdGhlIHRhcmdldCBub2RlLlxuICAgIGlmIChyZWdpc3RyYXRpb25OYW1lID09PSBPTl9DTElDS19LRVkpIHtcbiAgICAgIHZhciBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKGlkKTtcbiAgICAgIGlmICghb25DbGlja0xpc3RlbmVyc1tpZF0pIHtcbiAgICAgICAgb25DbGlja0xpc3RlbmVyc1tpZF0gPSBFdmVudExpc3RlbmVyLmxpc3Rlbihub2RlLCAnY2xpY2snLCBlbXB0eUZ1bmN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgd2lsbERlbGV0ZUxpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICBpZiAocmVnaXN0cmF0aW9uTmFtZSA9PT0gT05fQ0xJQ0tfS0VZKSB7XG4gICAgICBvbkNsaWNrTGlzdGVuZXJzW2lkXS5yZW1vdmUoKTtcbiAgICAgIGRlbGV0ZSBvbkNsaWNrTGlzdGVuZXJzW2lkXTtcbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTaW1wbGVFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljQ2xpcGJvYXJkRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9jbGlwYm9hcmQtYXBpcy9cbiAqL1xudmFyIENsaXBib2FyZEV2ZW50SW50ZXJmYWNlID0ge1xuICBjbGlwYm9hcmREYXRhOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gJ2NsaXBib2FyZERhdGEnIGluIGV2ZW50ID8gZXZlbnQuY2xpcGJvYXJkRGF0YSA6IHdpbmRvdy5jbGlwYm9hcmREYXRhO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNDbGlwYm9hcmRFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0NsaXBib2FyZEV2ZW50LCBDbGlwYm9hcmRFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljQ2xpcGJvYXJkRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2V2ZW50cy1jb21wb3NpdGlvbmV2ZW50c1xuICovXG52YXIgQ29tcG9zaXRpb25FdmVudEludGVyZmFjZSA9IHtcbiAgZGF0YTogbnVsbFxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljQ29tcG9zaXRpb25FdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQsIENvbXBvc2l0aW9uRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0RyYWdFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNNb3VzZUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNNb3VzZUV2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBEcmFnRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgRHJhZ0V2ZW50SW50ZXJmYWNlID0ge1xuICBkYXRhVHJhbnNmZXI6IG51bGxcbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY1VJRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY0RyYWdFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNNb3VzZUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNNb3VzZUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNEcmFnRXZlbnQsIERyYWdFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljRHJhZ0V2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIEV2ZW50SW50ZXJmYWNlID0ge1xuICB0eXBlOiBudWxsLFxuICB0YXJnZXQ6IG51bGwsXG4gIC8vIGN1cnJlbnRUYXJnZXQgaXMgc2V0IHdoZW4gZGlzcGF0Y2hpbmc7IG5vIHVzZSBpbiBjb3B5aW5nIGl0IGhlcmVcbiAgY3VycmVudFRhcmdldDogZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc051bGwsXG4gIGV2ZW50UGhhc2U6IG51bGwsXG4gIGJ1YmJsZXM6IG51bGwsXG4gIGNhbmNlbGFibGU6IG51bGwsXG4gIHRpbWVTdGFtcDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuIGV2ZW50LnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpO1xuICB9LFxuICBkZWZhdWx0UHJldmVudGVkOiBudWxsLFxuICBpc1RydXN0ZWQ6IG51bGxcbn07XG5cbi8qKlxuICogU3ludGhldGljIGV2ZW50cyBhcmUgZGlzcGF0Y2hlZCBieSBldmVudCBwbHVnaW5zLCB0eXBpY2FsbHkgaW4gcmVzcG9uc2UgdG8gYVxuICogdG9wLWxldmVsIGV2ZW50IGRlbGVnYXRpb24gaGFuZGxlci5cbiAqXG4gKiBUaGVzZSBzeXN0ZW1zIHNob3VsZCBnZW5lcmFsbHkgdXNlIHBvb2xpbmcgdG8gcmVkdWNlIHRoZSBmcmVxdWVuY3kgb2YgZ2FyYmFnZVxuICogY29sbGVjdGlvbi4gVGhlIHN5c3RlbSBzaG91bGQgY2hlY2sgYGlzUGVyc2lzdGVudGAgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlXG4gKiBldmVudCBzaG91bGQgYmUgcmVsZWFzZWQgaW50byB0aGUgcG9vbCBhZnRlciBiZWluZyBkaXNwYXRjaGVkLiBVc2VycyB0aGF0XG4gKiBuZWVkIGEgcGVyc2lzdGVkIGV2ZW50IHNob3VsZCBpbnZva2UgYHBlcnNpc3RgLlxuICpcbiAqIFN5bnRoZXRpYyBldmVudHMgKGFuZCBzdWJjbGFzc2VzKSBpbXBsZW1lbnQgdGhlIERPTSBMZXZlbCAzIEV2ZW50cyBBUEkgYnlcbiAqIG5vcm1hbGl6aW5nIGJyb3dzZXIgcXVpcmtzLiBTdWJjbGFzc2VzIGRvIG5vdCBuZWNlc3NhcmlseSBoYXZlIHRvIGltcGxlbWVudCBhXG4gKiBET00gaW50ZXJmYWNlOyBjdXN0b20gYXBwbGljYXRpb24tc3BlY2lmaWMgZXZlbnRzIGNhbiBhbHNvIHN1YmNsYXNzIHRoaXMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICB0aGlzLmRpc3BhdGNoQ29uZmlnID0gZGlzcGF0Y2hDb25maWc7XG4gIHRoaXMuZGlzcGF0Y2hNYXJrZXIgPSBkaXNwYXRjaE1hcmtlcjtcbiAgdGhpcy5uYXRpdmVFdmVudCA9IG5hdGl2ZUV2ZW50O1xuXG4gIHZhciBJbnRlcmZhY2UgPSB0aGlzLmNvbnN0cnVjdG9yLkludGVyZmFjZTtcbiAgZm9yICh2YXIgcHJvcE5hbWUgaW4gSW50ZXJmYWNlKSB7XG4gICAgaWYgKCFJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFyIG5vcm1hbGl6ZSA9IEludGVyZmFjZVtwcm9wTmFtZV07XG4gICAgaWYgKG5vcm1hbGl6ZSkge1xuICAgICAgdGhpc1twcm9wTmFtZV0gPSBub3JtYWxpemUobmF0aXZlRXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocHJvcE5hbWUgPT09ICd0YXJnZXQnKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbmF0aXZlRXZlbnRUYXJnZXQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzW3Byb3BOYW1lXSA9IG5hdGl2ZUV2ZW50W3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgZGVmYXVsdFByZXZlbnRlZCA9IG5hdGl2ZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgIT0gbnVsbCA/IG5hdGl2ZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgOiBuYXRpdmVFdmVudC5yZXR1cm5WYWx1ZSA9PT0gZmFsc2U7XG4gIGlmIChkZWZhdWx0UHJldmVudGVkKSB7XG4gICAgdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNGYWxzZTtcbiAgfVxuICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0ZhbHNlO1xufVxuXG5hc3NpZ24oU3ludGhldGljRXZlbnQucHJvdG90eXBlLCB7XG5cbiAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICAgIHZhciBldmVudCA9IHRoaXMubmF0aXZlRXZlbnQ7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGV2ZW50LCAnVGhpcyBzeW50aGV0aWMgZXZlbnQgaXMgcmV1c2VkIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLiBJZiB5b3VcXCdyZSAnICsgJ3NlZWluZyB0aGlzLCB5b3VcXCdyZSBjYWxsaW5nIGBwcmV2ZW50RGVmYXVsdGAgb24gYSAnICsgJ3JlbGVhc2VkL251bGxpZmllZCBzeW50aGV0aWMgZXZlbnQuIFRoaXMgaXMgYSBuby1vcC4gU2VlICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC1ldmVudC1wb29saW5nIGZvciBtb3JlIGluZm9ybWF0aW9uLicpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIWV2ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlO1xuICB9LFxuXG4gIHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBldmVudCA9IHRoaXMubmF0aXZlRXZlbnQ7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGV2ZW50LCAnVGhpcyBzeW50aGV0aWMgZXZlbnQgaXMgcmV1c2VkIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLiBJZiB5b3VcXCdyZSAnICsgJ3NlZWluZyB0aGlzLCB5b3VcXCdyZSBjYWxsaW5nIGBzdG9wUHJvcGFnYXRpb25gIG9uIGEgJyArICdyZWxlYXNlZC9udWxsaWZpZWQgc3ludGhldGljIGV2ZW50LiBUaGlzIGlzIGEgbm8tb3AuIFNlZSAnICsgJ2h0dHBzOi8vZmIubWUvcmVhY3QtZXZlbnQtcG9vbGluZyBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCFldmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgIH1cbiAgICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdlIHJlbGVhc2UgYWxsIGRpc3BhdGNoZWQgYFN5bnRoZXRpY0V2ZW50YHMgYWZ0ZXIgZWFjaCBldmVudCBsb29wLCBhZGRpbmdcbiAgICogdGhlbSBiYWNrIGludG8gdGhlIHBvb2wuIFRoaXMgYWxsb3dzIGEgd2F5IHRvIGhvbGQgb250byBhIHJlZmVyZW5jZSB0aGF0XG4gICAqIHdvbid0IGJlIGFkZGVkIGJhY2sgaW50byB0aGUgcG9vbC5cbiAgICovXG4gIHBlcnNpc3Q6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmlzUGVyc2lzdGVudCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhpcyBldmVudCBzaG91bGQgYmUgcmVsZWFzZWQgYmFjayBpbnRvIHRoZSBwb29sLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoaXMgc2hvdWxkIG5vdCBiZSByZWxlYXNlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cbiAgaXNQZXJzaXN0ZW50OiBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zRmFsc2UsXG5cbiAgLyoqXG4gICAqIGBQb29sZWRDbGFzc2AgbG9va3MgZm9yIGBkZXN0cnVjdG9yYCBvbiBlYWNoIGluc3RhbmNlIGl0IHJlbGVhc2VzLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBJbnRlcmZhY2UgPSB0aGlzLmNvbnN0cnVjdG9yLkludGVyZmFjZTtcbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBJbnRlcmZhY2UpIHtcbiAgICAgIHRoaXNbcHJvcE5hbWVdID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5kaXNwYXRjaENvbmZpZyA9IG51bGw7XG4gICAgdGhpcy5kaXNwYXRjaE1hcmtlciA9IG51bGw7XG4gICAgdGhpcy5uYXRpdmVFdmVudCA9IG51bGw7XG4gIH1cblxufSk7XG5cblN5bnRoZXRpY0V2ZW50LkludGVyZmFjZSA9IEV2ZW50SW50ZXJmYWNlO1xuXG4vKipcbiAqIEhlbHBlciB0byByZWR1Y2UgYm9pbGVycGxhdGUgd2hlbiBjcmVhdGluZyBzdWJjbGFzc2VzLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IENsYXNzXG4gKiBAcGFyYW0gez9vYmplY3R9IEludGVyZmFjZVxuICovXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MgPSBmdW5jdGlvbiAoQ2xhc3MsIEludGVyZmFjZSkge1xuICB2YXIgU3VwZXIgPSB0aGlzO1xuXG4gIHZhciBwcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XG4gIGFzc2lnbihwcm90b3R5cGUsIENsYXNzLnByb3RvdHlwZSk7XG4gIENsYXNzLnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2xhc3M7XG5cbiAgQ2xhc3MuSW50ZXJmYWNlID0gYXNzaWduKHt9LCBTdXBlci5JbnRlcmZhY2UsIEludGVyZmFjZSk7XG4gIENsYXNzLmF1Z21lbnRDbGFzcyA9IFN1cGVyLmF1Z21lbnRDbGFzcztcblxuICBQb29sZWRDbGFzcy5hZGRQb29saW5nVG8oQ2xhc3MsIFBvb2xlZENsYXNzLmZvdXJBcmd1bWVudFBvb2xlcik7XG59O1xuXG5Qb29sZWRDbGFzcy5hZGRQb29saW5nVG8oU3ludGhldGljRXZlbnQsIFBvb2xlZENsYXNzLmZvdXJBcmd1bWVudFBvb2xlcik7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0ZvY3VzRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljVUlFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljVUlFdmVudCcpO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgRm9jdXNFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvXG4gKi9cbnZhciBGb2N1c0V2ZW50SW50ZXJmYWNlID0ge1xuICByZWxhdGVkVGFyZ2V0OiBudWxsXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNGb2N1c0V2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY1VJRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY1VJRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0ZvY3VzRXZlbnQsIEZvY3VzRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0ZvY3VzRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0lucHV0RXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0V2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDEzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDEzMTEwNVxuICogICAgICAvI2V2ZW50cy1pbnB1dGV2ZW50c1xuICovXG52YXIgSW5wdXRFdmVudEludGVyZmFjZSA9IHtcbiAgZGF0YTogbnVsbFxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljSW5wdXRFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0lucHV0RXZlbnQsIElucHV0RXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0lucHV0RXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0tleWJvYXJkRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljVUlFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljVUlFdmVudCcpO1xuXG52YXIgZ2V0RXZlbnRDaGFyQ29kZSA9IHJlcXVpcmUoJy4vZ2V0RXZlbnRDaGFyQ29kZScpO1xudmFyIGdldEV2ZW50S2V5ID0gcmVxdWlyZSgnLi9nZXRFdmVudEtleScpO1xudmFyIGdldEV2ZW50TW9kaWZpZXJTdGF0ZSA9IHJlcXVpcmUoJy4vZ2V0RXZlbnRNb2RpZmllclN0YXRlJyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBLZXlib2FyZEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIEtleWJvYXJkRXZlbnRJbnRlcmZhY2UgPSB7XG4gIGtleTogZ2V0RXZlbnRLZXksXG4gIGxvY2F0aW9uOiBudWxsLFxuICBjdHJsS2V5OiBudWxsLFxuICBzaGlmdEtleTogbnVsbCxcbiAgYWx0S2V5OiBudWxsLFxuICBtZXRhS2V5OiBudWxsLFxuICByZXBlYXQ6IG51bGwsXG4gIGxvY2FsZTogbnVsbCxcbiAgZ2V0TW9kaWZpZXJTdGF0ZTogZ2V0RXZlbnRNb2RpZmllclN0YXRlLFxuICAvLyBMZWdhY3kgSW50ZXJmYWNlXG4gIGNoYXJDb2RlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBgY2hhckNvZGVgIGlzIHRoZSByZXN1bHQgb2YgYSBLZXlQcmVzcyBldmVudCBhbmQgcmVwcmVzZW50cyB0aGUgdmFsdWUgb2ZcbiAgICAvLyB0aGUgYWN0dWFsIHByaW50YWJsZSBjaGFyYWN0ZXIuXG5cbiAgICAvLyBLZXlQcmVzcyBpcyBkZXByZWNhdGVkLCBidXQgaXRzIHJlcGxhY2VtZW50IGlzIG5vdCB5ZXQgZmluYWwgYW5kIG5vdFxuICAgIC8vIGltcGxlbWVudGVkIGluIGFueSBtYWpvciBicm93c2VyLiBPbmx5IEtleVByZXNzIGhhcyBjaGFyQ29kZS5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleXByZXNzJykge1xuICAgICAgcmV0dXJuIGdldEV2ZW50Q2hhckNvZGUoZXZlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfSxcbiAga2V5Q29kZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gYGtleUNvZGVgIGlzIHRoZSByZXN1bHQgb2YgYSBLZXlEb3duL1VwIGV2ZW50IGFuZCByZXByZXNlbnRzIHRoZSB2YWx1ZSBvZlxuICAgIC8vIHBoeXNpY2FsIGtleWJvYXJkIGtleS5cblxuICAgIC8vIFRoZSBhY3R1YWwgbWVhbmluZyBvZiB0aGUgdmFsdWUgZGVwZW5kcyBvbiB0aGUgdXNlcnMnIGtleWJvYXJkIGxheW91dFxuICAgIC8vIHdoaWNoIGNhbm5vdCBiZSBkZXRlY3RlZC4gQXNzdW1pbmcgdGhhdCBpdCBpcyBhIFVTIGtleWJvYXJkIGxheW91dFxuICAgIC8vIHByb3ZpZGVzIGEgc3VycHJpc2luZ2x5IGFjY3VyYXRlIG1hcHBpbmcgZm9yIFVTIGFuZCBFdXJvcGVhbiB1c2Vycy5cbiAgICAvLyBEdWUgdG8gdGhpcywgaXQgaXMgbGVmdCB0byB0aGUgdXNlciB0byBpbXBsZW1lbnQgYXQgdGhpcyB0aW1lLlxuICAgIGlmIChldmVudC50eXBlID09PSAna2V5ZG93bicgfHwgZXZlbnQudHlwZSA9PT0gJ2tleXVwJykge1xuICAgICAgcmV0dXJuIGV2ZW50LmtleUNvZGU7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9LFxuICB3aGljaDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gYHdoaWNoYCBpcyBhbiBhbGlhcyBmb3IgZWl0aGVyIGBrZXlDb2RlYCBvciBgY2hhckNvZGVgIGRlcGVuZGluZyBvbiB0aGVcbiAgICAvLyB0eXBlIG9mIHRoZSBldmVudC5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleXByZXNzJykge1xuICAgICAgcmV0dXJuIGdldEV2ZW50Q2hhckNvZGUoZXZlbnQpO1xuICAgIH1cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleWRvd24nIHx8IGV2ZW50LnR5cGUgPT09ICdrZXl1cCcpIHtcbiAgICAgIHJldHVybiBldmVudC5rZXlDb2RlO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljS2V5Ym9hcmRFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNVSUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNVSUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNLZXlib2FyZEV2ZW50LCBLZXlib2FyZEV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNLZXlib2FyZEV2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNNb3VzZUV2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY1VJRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1VJRXZlbnQnKTtcbnZhciBWaWV3cG9ydE1ldHJpY3MgPSByZXF1aXJlKCcuL1ZpZXdwb3J0TWV0cmljcycpO1xuXG52YXIgZ2V0RXZlbnRNb2RpZmllclN0YXRlID0gcmVxdWlyZSgnLi9nZXRFdmVudE1vZGlmaWVyU3RhdGUnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIE1vdXNlRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgTW91c2VFdmVudEludGVyZmFjZSA9IHtcbiAgc2NyZWVuWDogbnVsbCxcbiAgc2NyZWVuWTogbnVsbCxcbiAgY2xpZW50WDogbnVsbCxcbiAgY2xpZW50WTogbnVsbCxcbiAgY3RybEtleTogbnVsbCxcbiAgc2hpZnRLZXk6IG51bGwsXG4gIGFsdEtleTogbnVsbCxcbiAgbWV0YUtleTogbnVsbCxcbiAgZ2V0TW9kaWZpZXJTdGF0ZTogZ2V0RXZlbnRNb2RpZmllclN0YXRlLFxuICBidXR0b246IGZ1bmN0aW9uIChldmVudCkge1xuICAgIC8vIFdlYmtpdCwgRmlyZWZveCwgSUU5K1xuICAgIC8vIHdoaWNoOiAgMSAyIDNcbiAgICAvLyBidXR0b246IDAgMSAyIChzdGFuZGFyZClcbiAgICB2YXIgYnV0dG9uID0gZXZlbnQuYnV0dG9uO1xuICAgIGlmICgnd2hpY2gnIGluIGV2ZW50KSB7XG4gICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cbiAgICAvLyBJRTw5XG4gICAgLy8gd2hpY2g6ICB1bmRlZmluZWRcbiAgICAvLyBidXR0b246IDAgMCAwXG4gICAgLy8gYnV0dG9uOiAxIDQgMiAob25tb3VzZXVwKVxuICAgIHJldHVybiBidXR0b24gPT09IDIgPyAyIDogYnV0dG9uID09PSA0ID8gMSA6IDA7XG4gIH0sXG4gIGJ1dHRvbnM6IG51bGwsXG4gIHJlbGF0ZWRUYXJnZXQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiBldmVudC5yZWxhdGVkVGFyZ2V0IHx8IChldmVudC5mcm9tRWxlbWVudCA9PT0gZXZlbnQuc3JjRWxlbWVudCA/IGV2ZW50LnRvRWxlbWVudCA6IGV2ZW50LmZyb21FbGVtZW50KTtcbiAgfSxcbiAgLy8gXCJQcm9wcmlldGFyeVwiIEludGVyZmFjZS5cbiAgcGFnZVg6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiAncGFnZVgnIGluIGV2ZW50ID8gZXZlbnQucGFnZVggOiBldmVudC5jbGllbnRYICsgVmlld3BvcnRNZXRyaWNzLmN1cnJlbnRTY3JvbGxMZWZ0O1xuICB9LFxuICBwYWdlWTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuICdwYWdlWScgaW4gZXZlbnQgPyBldmVudC5wYWdlWSA6IGV2ZW50LmNsaWVudFkgKyBWaWV3cG9ydE1ldHJpY3MuY3VycmVudFNjcm9sbFRvcDtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljTW91c2VFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNVSUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNVSUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNNb3VzZUV2ZW50LCBNb3VzZUV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNNb3VzZUV2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNUb3VjaEV2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY1VJRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1VJRXZlbnQnKTtcblxudmFyIGdldEV2ZW50TW9kaWZpZXJTdGF0ZSA9IHJlcXVpcmUoJy4vZ2V0RXZlbnRNb2RpZmllclN0YXRlJyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBUb3VjaEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3RvdWNoLWV2ZW50cy9cbiAqL1xudmFyIFRvdWNoRXZlbnRJbnRlcmZhY2UgPSB7XG4gIHRvdWNoZXM6IG51bGwsXG4gIHRhcmdldFRvdWNoZXM6IG51bGwsXG4gIGNoYW5nZWRUb3VjaGVzOiBudWxsLFxuICBhbHRLZXk6IG51bGwsXG4gIG1ldGFLZXk6IG51bGwsXG4gIGN0cmxLZXk6IG51bGwsXG4gIHNoaWZ0S2V5OiBudWxsLFxuICBnZXRNb2RpZmllclN0YXRlOiBnZXRFdmVudE1vZGlmaWVyU3RhdGVcbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY1VJRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY1RvdWNoRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgU3ludGhldGljVUlFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljVUlFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljVG91Y2hFdmVudCwgVG91Y2hFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljVG91Y2hFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljVUlFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxudmFyIGdldEV2ZW50VGFyZ2V0ID0gcmVxdWlyZSgnLi9nZXRFdmVudFRhcmdldCcpO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgVUlFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvXG4gKi9cbnZhciBVSUV2ZW50SW50ZXJmYWNlID0ge1xuICB2aWV3OiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudmlldykge1xuICAgICAgcmV0dXJuIGV2ZW50LnZpZXc7XG4gICAgfVxuXG4gICAgdmFyIHRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGV2ZW50KTtcbiAgICBpZiAodGFyZ2V0ICE9IG51bGwgJiYgdGFyZ2V0LndpbmRvdyA9PT0gdGFyZ2V0KSB7XG4gICAgICAvLyB0YXJnZXQgaXMgYSB3aW5kb3cgb2JqZWN0XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cblxuICAgIHZhciBkb2MgPSB0YXJnZXQub3duZXJEb2N1bWVudDtcbiAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IHdoeSBgb3duZXJEb2N1bWVudGAgaXMgc29tZXRpbWVzIHVuZGVmaW5lZCBpbiBJRTguXG4gICAgaWYgKGRvYykge1xuICAgICAgcmV0dXJuIGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cbiAgfSxcbiAgZGV0YWlsOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQuZGV0YWlsIHx8IDA7XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY0V2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNVSUV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljVUlFdmVudCwgVUlFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljVUlFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljV2hlZWxFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNNb3VzZUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNNb3VzZUV2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBXaGVlbEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIFdoZWVsRXZlbnRJbnRlcmZhY2UgPSB7XG4gIGRlbHRhWDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuICdkZWx0YVgnIGluIGV2ZW50ID8gZXZlbnQuZGVsdGFYIDpcbiAgICAvLyBGYWxsYmFjayB0byBgd2hlZWxEZWx0YVhgIGZvciBXZWJraXQgYW5kIG5vcm1hbGl6ZSAocmlnaHQgaXMgcG9zaXRpdmUpLlxuICAgICd3aGVlbERlbHRhWCcgaW4gZXZlbnQgPyAtZXZlbnQud2hlZWxEZWx0YVggOiAwO1xuICB9LFxuICBkZWx0YVk6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiAnZGVsdGFZJyBpbiBldmVudCA/IGV2ZW50LmRlbHRhWSA6XG4gICAgLy8gRmFsbGJhY2sgdG8gYHdoZWVsRGVsdGFZYCBmb3IgV2Via2l0IGFuZCBub3JtYWxpemUgKGRvd24gaXMgcG9zaXRpdmUpLlxuICAgICd3aGVlbERlbHRhWScgaW4gZXZlbnQgPyAtZXZlbnQud2hlZWxEZWx0YVkgOlxuICAgIC8vIEZhbGxiYWNrIHRvIGB3aGVlbERlbHRhYCBmb3IgSUU8OSBhbmQgbm9ybWFsaXplIChkb3duIGlzIHBvc2l0aXZlKS5cbiAgICAnd2hlZWxEZWx0YScgaW4gZXZlbnQgPyAtZXZlbnQud2hlZWxEZWx0YSA6IDA7XG4gIH0sXG4gIGRlbHRhWjogbnVsbCxcblxuICAvLyBCcm93c2VycyB3aXRob3V0IFwiZGVsdGFNb2RlXCIgaXMgcmVwb3J0aW5nIGluIHJhdyB3aGVlbCBkZWx0YSB3aGVyZSBvbmVcbiAgLy8gbm90Y2ggb24gdGhlIHNjcm9sbCBpcyBhbHdheXMgKy8tIDEyMCwgcm91Z2hseSBlcXVpdmFsZW50IHRvIHBpeGVscy5cbiAgLy8gQSBnb29kIGFwcHJveGltYXRpb24gb2YgRE9NX0RFTFRBX0xJTkUgKDEpIGlzIDUlIG9mIHZpZXdwb3J0IHNpemUgb3JcbiAgLy8gfjQwIHBpeGVscywgZm9yIERPTV9ERUxUQV9TQ1JFRU4gKDIpIGl0IGlzIDg3LjUlIG9mIHZpZXdwb3J0IHNpemUuXG4gIGRlbHRhTW9kZTogbnVsbFxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljTW91c2VFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljV2hlZWxFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNNb3VzZUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNNb3VzZUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNXaGVlbEV2ZW50LCBXaGVlbEV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNXaGVlbEV2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBUcmFuc2FjdGlvblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIGBUcmFuc2FjdGlvbmAgY3JlYXRlcyBhIGJsYWNrIGJveCB0aGF0IGlzIGFibGUgdG8gd3JhcCBhbnkgbWV0aG9kIHN1Y2ggdGhhdFxuICogY2VydGFpbiBpbnZhcmlhbnRzIGFyZSBtYWludGFpbmVkIGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIG1ldGhvZCBpcyBpbnZva2VkXG4gKiAoRXZlbiBpZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIHdoaWxlIGludm9raW5nIHRoZSB3cmFwcGVkIG1ldGhvZCkuIFdob2V2ZXJcbiAqIGluc3RhbnRpYXRlcyBhIHRyYW5zYWN0aW9uIGNhbiBwcm92aWRlIGVuZm9yY2VycyBvZiB0aGUgaW52YXJpYW50cyBhdFxuICogY3JlYXRpb24gdGltZS4gVGhlIGBUcmFuc2FjdGlvbmAgY2xhc3MgaXRzZWxmIHdpbGwgc3VwcGx5IG9uZSBhZGRpdGlvbmFsXG4gKiBhdXRvbWF0aWMgaW52YXJpYW50IGZvciB5b3UgLSB0aGUgaW52YXJpYW50IHRoYXQgYW55IHRyYW5zYWN0aW9uIGluc3RhbmNlXG4gKiBzaG91bGQgbm90IGJlIHJ1biB3aGlsZSBpdCBpcyBhbHJlYWR5IGJlaW5nIHJ1bi4gWW91IHdvdWxkIHR5cGljYWxseSBjcmVhdGUgYVxuICogc2luZ2xlIGluc3RhbmNlIG9mIGEgYFRyYW5zYWN0aW9uYCBmb3IgcmV1c2UgbXVsdGlwbGUgdGltZXMsIHRoYXQgcG90ZW50aWFsbHlcbiAqIGlzIHVzZWQgdG8gd3JhcCBzZXZlcmFsIGRpZmZlcmVudCBtZXRob2RzLiBXcmFwcGVycyBhcmUgZXh0cmVtZWx5IHNpbXBsZSAtXG4gKiB0aGV5IG9ubHkgcmVxdWlyZSBpbXBsZW1lbnRpbmcgdHdvIG1ldGhvZHMuXG4gKlxuICogPHByZT5cbiAqICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVycyAoaW5qZWN0ZWQgYXQgY3JlYXRpb24gdGltZSlcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICAgICAgICArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLXwtLS0tLS0tLS0tLS0tLStcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICB2ICAgICAgICB8ICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgICAgICstLS0tLS0tLS0tLS0tLS0rICAgfCAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICArLS18ICAgIHdyYXBwZXIxICAgfC0tLXwtLS0tKyAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgfCAgKy0tLS0tLS0tLS0tLS0tLSsgICB2ICAgIHwgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICAgICAgICAgKy0tLS0tLS0tLS0tLS0rICB8ICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICB8ICAgICArLS0tLXwgICB3cmFwcGVyMiAgfC0tLS0tLS0tKyAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgfCAgICAgfCAgICArLS0tLS0tLS0tLS0tLSsgIHwgICAgIHwgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICAgIHwgICAgICAgICAgICAgICAgICAgICB8ICAgICB8ICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICB2ICAgICB2ICAgICAgICAgICAgICAgICAgICAgdiAgICAgdiAgIHwgd3JhcHBlclxuICogICAgICAgICAgICAgICAgICAgIHwgKy0tLSsgKy0tLSsgICArLS0tLS0tLS0tKyAgICstLS0rICstLS0rIHwgaW52YXJpYW50c1xuICogcGVyZm9ybShhbnlNZXRob2QpIHwgfCAgIHwgfCAgIHwgICB8ICAgICAgICAgfCAgIHwgICB8IHwgICB8IHwgbWFpbnRhaW5lZFxuICogKy0tLS0tLS0tLS0tLS0tLS0tPnwtfC0tLXwtfC0tLXwtLT58YW55TWV0aG9kfC0tLXwtLS18LXwtLS18LXwtLS0tLS0tLT5cbiAqICAgICAgICAgICAgICAgICAgICB8IHwgICB8IHwgICB8ICAgfCAgICAgICAgIHwgICB8ICAgfCB8ICAgfCB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCB8ICAgfCB8ICAgfCAgIHwgICAgICAgICB8ICAgfCAgIHwgfCAgIHwgfFxuICogICAgICAgICAgICAgICAgICAgIHwgfCAgIHwgfCAgIHwgICB8ICAgICAgICAgfCAgIHwgICB8IHwgICB8IHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICstLS0rICstLS0rICAgKy0tLS0tLS0tLSsgICArLS0tKyArLS0tKyB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgaW5pdGlhbGl6ZSAgICAgICAgICAgICAgICAgICAgY2xvc2UgICAgfFxuICogICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAqIDwvcHJlPlxuICpcbiAqIFVzZSBjYXNlczpcbiAqIC0gUHJlc2VydmluZyB0aGUgaW5wdXQgc2VsZWN0aW9uIHJhbmdlcyBiZWZvcmUvYWZ0ZXIgcmVjb25jaWxpYXRpb24uXG4gKiAgIFJlc3RvcmluZyBzZWxlY3Rpb24gZXZlbiBpbiB0aGUgZXZlbnQgb2YgYW4gdW5leHBlY3RlZCBlcnJvci5cbiAqIC0gRGVhY3RpdmF0aW5nIGV2ZW50cyB3aGlsZSByZWFycmFuZ2luZyB0aGUgRE9NLCBwcmV2ZW50aW5nIGJsdXJzL2ZvY3VzZXMsXG4gKiAgIHdoaWxlIGd1YXJhbnRlZWluZyB0aGF0IGFmdGVyd2FyZHMsIHRoZSBldmVudCBzeXN0ZW0gaXMgcmVhY3RpdmF0ZWQuXG4gKiAtIEZsdXNoaW5nIGEgcXVldWUgb2YgY29sbGVjdGVkIERPTSBtdXRhdGlvbnMgdG8gdGhlIG1haW4gVUkgdGhyZWFkIGFmdGVyIGFcbiAqICAgcmVjb25jaWxpYXRpb24gdGFrZXMgcGxhY2UgaW4gYSB3b3JrZXIgdGhyZWFkLlxuICogLSBJbnZva2luZyBhbnkgY29sbGVjdGVkIGBjb21wb25lbnREaWRVcGRhdGVgIGNhbGxiYWNrcyBhZnRlciByZW5kZXJpbmcgbmV3XG4gKiAgIGNvbnRlbnQuXG4gKiAtIChGdXR1cmUgdXNlIGNhc2UpOiBXcmFwcGluZyBwYXJ0aWN1bGFyIGZsdXNoZXMgb2YgdGhlIGBSZWFjdFdvcmtlcmAgcXVldWVcbiAqICAgdG8gcHJlc2VydmUgdGhlIGBzY3JvbGxUb3BgIChhbiBhdXRvbWF0aWMgc2Nyb2xsIGF3YXJlIERPTSkuXG4gKiAtIChGdXR1cmUgdXNlIGNhc2UpOiBMYXlvdXQgY2FsY3VsYXRpb25zIGJlZm9yZSBhbmQgYWZ0ZXIgRE9NIHVwZGF0ZXMuXG4gKlxuICogVHJhbnNhY3Rpb25hbCBwbHVnaW4gQVBJOlxuICogLSBBIG1vZHVsZSB0aGF0IGhhcyBhbiBgaW5pdGlhbGl6ZWAgbWV0aG9kIHRoYXQgcmV0dXJucyBhbnkgcHJlY29tcHV0YXRpb24uXG4gKiAtIGFuZCBhIGBjbG9zZWAgbWV0aG9kIHRoYXQgYWNjZXB0cyB0aGUgcHJlY29tcHV0YXRpb24uIGBjbG9zZWAgaXMgaW52b2tlZFxuICogICB3aGVuIHRoZSB3cmFwcGVkIHByb2Nlc3MgaXMgY29tcGxldGVkLCBvciBoYXMgZmFpbGVkLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8VHJhbnNhY3Rpb25hbFdyYXBwZXI+fSB0cmFuc2FjdGlvbldyYXBwZXIgV3JhcHBlciBtb2R1bGVzXG4gKiB0aGF0IGltcGxlbWVudCBgaW5pdGlhbGl6ZWAgYW5kIGBjbG9zZWAuXG4gKiBAcmV0dXJuIHtUcmFuc2FjdGlvbn0gU2luZ2xlIHRyYW5zYWN0aW9uIGZvciByZXVzZSBpbiB0aHJlYWQuXG4gKlxuICogQGNsYXNzIFRyYW5zYWN0aW9uXG4gKi9cbnZhciBNaXhpbiA9IHtcbiAgLyoqXG4gICAqIFNldHMgdXAgdGhpcyBpbnN0YW5jZSBzbyB0aGF0IGl0IGlzIHByZXBhcmVkIGZvciBjb2xsZWN0aW5nIG1ldHJpY3MuIERvZXNcbiAgICogc28gc3VjaCB0aGF0IHRoaXMgc2V0dXAgbWV0aG9kIG1heSBiZSB1c2VkIG9uIGFuIGluc3RhbmNlIHRoYXQgaXMgYWxyZWFkeVxuICAgKiBpbml0aWFsaXplZCwgaW4gYSB3YXkgdGhhdCBkb2VzIG5vdCBjb25zdW1lIGFkZGl0aW9uYWwgbWVtb3J5IHVwb24gcmV1c2UuXG4gICAqIFRoYXQgY2FuIGJlIHVzZWZ1bCBpZiB5b3UgZGVjaWRlIHRvIG1ha2UgeW91ciBzdWJjbGFzcyBvZiB0aGlzIG1peGluIGFcbiAgICogXCJQb29sZWRDbGFzc1wiLlxuICAgKi9cbiAgcmVpbml0aWFsaXplVHJhbnNhY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnRyYW5zYWN0aW9uV3JhcHBlcnMgPSB0aGlzLmdldFRyYW5zYWN0aW9uV3JhcHBlcnMoKTtcbiAgICBpZiAodGhpcy53cmFwcGVySW5pdERhdGEpIHtcbiAgICAgIHRoaXMud3JhcHBlckluaXREYXRhLmxlbmd0aCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud3JhcHBlckluaXREYXRhID0gW107XG4gICAgfVxuICAgIHRoaXMuX2lzSW5UcmFuc2FjdGlvbiA9IGZhbHNlO1xuICB9LFxuXG4gIF9pc0luVHJhbnNhY3Rpb246IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7QXJyYXk8VHJhbnNhY3Rpb25XcmFwcGVyPn0gQXJyYXkgb2YgdHJhbnNhY3Rpb24gd3JhcHBlcnMuXG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBudWxsLFxuXG4gIGlzSW5UcmFuc2FjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAhIXRoaXMuX2lzSW5UcmFuc2FjdGlvbjtcbiAgfSxcblxuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIGZ1bmN0aW9uIHdpdGhpbiBhIHNhZmV0eSB3aW5kb3cuIFVzZSB0aGlzIGZvciB0aGUgdG9wIGxldmVsXG4gICAqIG1ldGhvZHMgdGhhdCByZXN1bHQgaW4gbGFyZ2UgYW1vdW50cyBvZiBjb21wdXRhdGlvbi9tdXRhdGlvbnMgdGhhdCB3b3VsZFxuICAgKiBuZWVkIHRvIGJlIHNhZmV0eSBjaGVja2VkLiBUaGUgb3B0aW9uYWwgYXJndW1lbnRzIGhlbHBzIHByZXZlbnQgdGhlIG5lZWRcbiAgICogdG8gYmluZCBpbiBtYW55IGNhc2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtZXRob2QgTWVtYmVyIG9mIHNjb3BlIHRvIGNhbGwuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZSBTY29wZSB0byBpbnZva2UgZnJvbS5cbiAgICogQHBhcmFtIHtPYmplY3Q/PX0gYSBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG4gICAqIEBwYXJhbSB7T2JqZWN0Pz19IGIgQXJndW1lbnQgdG8gcGFzcyB0byB0aGUgbWV0aG9kLlxuICAgKiBAcGFyYW0ge09iamVjdD89fSBjIEFyZ3VtZW50IHRvIHBhc3MgdG8gdGhlIG1ldGhvZC5cbiAgICogQHBhcmFtIHtPYmplY3Q/PX0gZCBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG4gICAqIEBwYXJhbSB7T2JqZWN0Pz19IGUgQXJndW1lbnQgdG8gcGFzcyB0byB0aGUgbWV0aG9kLlxuICAgKiBAcGFyYW0ge09iamVjdD89fSBmIEFyZ3VtZW50IHRvIHBhc3MgdG8gdGhlIG1ldGhvZC5cbiAgICpcbiAgICogQHJldHVybiB7Kn0gUmV0dXJuIHZhbHVlIGZyb20gYG1ldGhvZGAuXG4gICAqL1xuICBwZXJmb3JtOiBmdW5jdGlvbiAobWV0aG9kLCBzY29wZSwgYSwgYiwgYywgZCwgZSwgZikge1xuICAgICEhdGhpcy5pc0luVHJhbnNhY3Rpb24oKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUcmFuc2FjdGlvbi5wZXJmb3JtKC4uLik6IENhbm5vdCBpbml0aWFsaXplIGEgdHJhbnNhY3Rpb24gd2hlbiB0aGVyZSAnICsgJ2lzIGFscmVhZHkgYW4gb3V0c3RhbmRpbmcgdHJhbnNhY3Rpb24uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHZhciBlcnJvclRocm93bjtcbiAgICB2YXIgcmV0O1xuICAgIHRyeSB7XG4gICAgICB0aGlzLl9pc0luVHJhbnNhY3Rpb24gPSB0cnVlO1xuICAgICAgLy8gQ2F0Y2hpbmcgZXJyb3JzIG1ha2VzIGRlYnVnZ2luZyBtb3JlIGRpZmZpY3VsdCwgc28gd2Ugc3RhcnQgd2l0aFxuICAgICAgLy8gZXJyb3JUaHJvd24gc2V0IHRvIHRydWUgYmVmb3JlIHNldHRpbmcgaXQgdG8gZmFsc2UgYWZ0ZXIgY2FsbGluZ1xuICAgICAgLy8gY2xvc2UgLS0gaWYgaXQncyBzdGlsbCBzZXQgdG8gdHJ1ZSBpbiB0aGUgZmluYWxseSBibG9jaywgaXQgbWVhbnNcbiAgICAgIC8vIG9uZSBvZiB0aGVzZSBjYWxscyB0aHJldy5cbiAgICAgIGVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZUFsbCgwKTtcbiAgICAgIHJldCA9IG1ldGhvZC5jYWxsKHNjb3BlLCBhLCBiLCBjLCBkLCBlLCBmKTtcbiAgICAgIGVycm9yVGhyb3duID0gZmFsc2U7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChlcnJvclRocm93bikge1xuICAgICAgICAgIC8vIElmIGBtZXRob2RgIHRocm93cywgcHJlZmVyIHRvIHNob3cgdGhhdCBzdGFjayB0cmFjZSBvdmVyIGFueSB0aHJvd25cbiAgICAgICAgICAvLyBieSBpbnZva2luZyBgY2xvc2VBbGxgLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlQWxsKDApO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge31cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTaW5jZSBgbWV0aG9kYCBkaWRuJ3QgdGhyb3csIHdlIGRvbid0IHdhbnQgdG8gc2lsZW5jZSB0aGUgZXhjZXB0aW9uXG4gICAgICAgICAgLy8gaGVyZS5cbiAgICAgICAgICB0aGlzLmNsb3NlQWxsKDApO1xuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0aGlzLl9pc0luVHJhbnNhY3Rpb24gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfSxcblxuICBpbml0aWFsaXplQWxsOiBmdW5jdGlvbiAoc3RhcnRJbmRleCkge1xuICAgIHZhciB0cmFuc2FjdGlvbldyYXBwZXJzID0gdGhpcy50cmFuc2FjdGlvbldyYXBwZXJzO1xuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgdHJhbnNhY3Rpb25XcmFwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHdyYXBwZXIgPSB0cmFuc2FjdGlvbldyYXBwZXJzW2ldO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ2F0Y2hpbmcgZXJyb3JzIG1ha2VzIGRlYnVnZ2luZyBtb3JlIGRpZmZpY3VsdCwgc28gd2Ugc3RhcnQgd2l0aCB0aGVcbiAgICAgICAgLy8gT0JTRVJWRURfRVJST1Igc3RhdGUgYmVmb3JlIG92ZXJ3cml0aW5nIGl0IHdpdGggdGhlIHJlYWwgcmV0dXJuIHZhbHVlXG4gICAgICAgIC8vIG9mIGluaXRpYWxpemUgLS0gaWYgaXQncyBzdGlsbCBzZXQgdG8gT0JTRVJWRURfRVJST1IgaW4gdGhlIGZpbmFsbHlcbiAgICAgICAgLy8gYmxvY2ssIGl0IG1lYW5zIHdyYXBwZXIuaW5pdGlhbGl6ZSB0aHJldy5cbiAgICAgICAgdGhpcy53cmFwcGVySW5pdERhdGFbaV0gPSBUcmFuc2FjdGlvbi5PQlNFUlZFRF9FUlJPUjtcbiAgICAgICAgdGhpcy53cmFwcGVySW5pdERhdGFbaV0gPSB3cmFwcGVyLmluaXRpYWxpemUgPyB3cmFwcGVyLmluaXRpYWxpemUuY2FsbCh0aGlzKSA6IG51bGw7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAodGhpcy53cmFwcGVySW5pdERhdGFbaV0gPT09IFRyYW5zYWN0aW9uLk9CU0VSVkVEX0VSUk9SKSB7XG4gICAgICAgICAgLy8gVGhlIGluaXRpYWxpemVyIGZvciB3cmFwcGVyIGkgdGhyZXcgYW4gZXJyb3I7IGluaXRpYWxpemUgdGhlXG4gICAgICAgICAgLy8gcmVtYWluaW5nIHdyYXBwZXJzIGJ1dCBzaWxlbmNlIGFueSBleGNlcHRpb25zIGZyb20gdGhlbSB0byBlbnN1cmVcbiAgICAgICAgICAvLyB0aGF0IHRoZSBmaXJzdCBlcnJvciBpcyB0aGUgb25lIHRvIGJ1YmJsZSB1cC5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQWxsKGkgKyAxKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHt9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEludm9rZXMgZWFjaCBvZiBgdGhpcy50cmFuc2FjdGlvbldyYXBwZXJzLmNsb3NlW2ldYCBmdW5jdGlvbnMsIHBhc3NpbmcgaW50b1xuICAgKiB0aGVtIHRoZSByZXNwZWN0aXZlIHJldHVybiB2YWx1ZXMgb2YgYHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycy5pbml0W2ldYFxuICAgKiAoYGNsb3NlYHJzIHRoYXQgY29ycmVzcG9uZCB0byBpbml0aWFsaXplcnMgdGhhdCBmYWlsZWQgd2lsbCBub3QgYmVcbiAgICogaW52b2tlZCkuXG4gICAqL1xuICBjbG9zZUFsbDogZnVuY3Rpb24gKHN0YXJ0SW5kZXgpIHtcbiAgICAhdGhpcy5pc0luVHJhbnNhY3Rpb24oKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdUcmFuc2FjdGlvbi5jbG9zZUFsbCgpOiBDYW5ub3QgY2xvc2UgdHJhbnNhY3Rpb24gd2hlbiBub25lIGFyZSBvcGVuLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgdHJhbnNhY3Rpb25XcmFwcGVycyA9IHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycztcbiAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSA8IHRyYW5zYWN0aW9uV3JhcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB3cmFwcGVyID0gdHJhbnNhY3Rpb25XcmFwcGVyc1tpXTtcbiAgICAgIHZhciBpbml0RGF0YSA9IHRoaXMud3JhcHBlckluaXREYXRhW2ldO1xuICAgICAgdmFyIGVycm9yVGhyb3duO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ2F0Y2hpbmcgZXJyb3JzIG1ha2VzIGRlYnVnZ2luZyBtb3JlIGRpZmZpY3VsdCwgc28gd2Ugc3RhcnQgd2l0aFxuICAgICAgICAvLyBlcnJvclRocm93biBzZXQgdG8gdHJ1ZSBiZWZvcmUgc2V0dGluZyBpdCB0byBmYWxzZSBhZnRlciBjYWxsaW5nXG4gICAgICAgIC8vIGNsb3NlIC0tIGlmIGl0J3Mgc3RpbGwgc2V0IHRvIHRydWUgaW4gdGhlIGZpbmFsbHkgYmxvY2ssIGl0IG1lYW5zXG4gICAgICAgIC8vIHdyYXBwZXIuY2xvc2UgdGhyZXcuXG4gICAgICAgIGVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgaWYgKGluaXREYXRhICE9PSBUcmFuc2FjdGlvbi5PQlNFUlZFRF9FUlJPUiAmJiB3cmFwcGVyLmNsb3NlKSB7XG4gICAgICAgICAgd3JhcHBlci5jbG9zZS5jYWxsKHRoaXMsIGluaXREYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgLy8gVGhlIGNsb3NlciBmb3Igd3JhcHBlciBpIHRocmV3IGFuIGVycm9yOyBjbG9zZSB0aGUgcmVtYWluaW5nXG4gICAgICAgICAgLy8gd3JhcHBlcnMgYnV0IHNpbGVuY2UgYW55IGV4Y2VwdGlvbnMgZnJvbSB0aGVtIHRvIGVuc3VyZSB0aGF0IHRoZVxuICAgICAgICAgIC8vIGZpcnN0IGVycm9yIGlzIHRoZSBvbmUgdG8gYnViYmxlIHVwLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlQWxsKGkgKyAxKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMud3JhcHBlckluaXREYXRhLmxlbmd0aCA9IDA7XG4gIH1cbn07XG5cbnZhciBUcmFuc2FjdGlvbiA9IHtcblxuICBNaXhpbjogTWl4aW4sXG5cbiAgLyoqXG4gICAqIFRva2VuIHRvIGxvb2sgZm9yIHRvIGRldGVybWluZSBpZiBhbiBlcnJvciBvY2N1cnJlZC5cbiAgICovXG4gIE9CU0VSVkVEX0VSUk9SOiB7fVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYW5zYWN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBWaWV3cG9ydE1ldHJpY3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBWaWV3cG9ydE1ldHJpY3MgPSB7XG5cbiAgY3VycmVudFNjcm9sbExlZnQ6IDAsXG5cbiAgY3VycmVudFNjcm9sbFRvcDogMCxcblxuICByZWZyZXNoU2Nyb2xsVmFsdWVzOiBmdW5jdGlvbiAoc2Nyb2xsUG9zaXRpb24pIHtcbiAgICBWaWV3cG9ydE1ldHJpY3MuY3VycmVudFNjcm9sbExlZnQgPSBzY3JvbGxQb3NpdGlvbi54O1xuICAgIFZpZXdwb3J0TWV0cmljcy5jdXJyZW50U2Nyb2xsVG9wID0gc2Nyb2xsUG9zaXRpb24ueTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZpZXdwb3J0TWV0cmljczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgYWNjdW11bGF0ZUludG9cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKlxuICogQWNjdW11bGF0ZXMgaXRlbXMgdGhhdCBtdXN0IG5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCBpbnRvIHRoZSBmaXJzdCBvbmUuIFRoaXNcbiAqIGlzIHVzZWQgdG8gY29uc2VydmUgbWVtb3J5IGJ5IGF2b2lkaW5nIGFycmF5IGFsbG9jYXRpb25zLCBhbmQgdGh1cyBzYWNyaWZpY2VzXG4gKiBBUEkgY2xlYW5uZXNzLiBTaW5jZSBgY3VycmVudGAgY2FuIGJlIG51bGwgYmVmb3JlIGJlaW5nIHBhc3NlZCBpbiBhbmQgbm90XG4gKiBudWxsIGFmdGVyIHRoaXMgZnVuY3Rpb24sIG1ha2Ugc3VyZSB0byBhc3NpZ24gaXQgYmFjayB0byBgY3VycmVudGA6XG4gKlxuICogYGEgPSBhY2N1bXVsYXRlSW50byhhLCBiKTtgXG4gKlxuICogVGhpcyBBUEkgc2hvdWxkIGJlIHNwYXJpbmdseSB1c2VkLiBUcnkgYGFjY3VtdWxhdGVgIGZvciBzb21ldGhpbmcgY2xlYW5lci5cbiAqXG4gKiBAcmV0dXJuIHsqfGFycmF5PCo+fSBBbiBhY2N1bXVsYXRpb24gb2YgaXRlbXMuXG4gKi9cblxuZnVuY3Rpb24gYWNjdW11bGF0ZUludG8oY3VycmVudCwgbmV4dCkge1xuICAhKG5leHQgIT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnYWNjdW11bGF0ZUludG8oLi4uKTogQWNjdW11bGF0ZWQgaXRlbXMgbXVzdCBub3QgYmUgbnVsbCBvciB1bmRlZmluZWQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG5leHQ7XG4gIH1cblxuICAvLyBCb3RoIGFyZSBub3QgZW1wdHkuIFdhcm5pbmc6IE5ldmVyIGNhbGwgeC5jb25jYXQoeSkgd2hlbiB5b3UgYXJlIG5vdFxuICAvLyBjZXJ0YWluIHRoYXQgeCBpcyBhbiBBcnJheSAoeCBjb3VsZCBiZSBhIHN0cmluZyB3aXRoIGNvbmNhdCBtZXRob2QpLlxuICB2YXIgY3VycmVudElzQXJyYXkgPSBBcnJheS5pc0FycmF5KGN1cnJlbnQpO1xuICB2YXIgbmV4dElzQXJyYXkgPSBBcnJheS5pc0FycmF5KG5leHQpO1xuXG4gIGlmIChjdXJyZW50SXNBcnJheSAmJiBuZXh0SXNBcnJheSkge1xuICAgIGN1cnJlbnQucHVzaC5hcHBseShjdXJyZW50LCBuZXh0KTtcbiAgICByZXR1cm4gY3VycmVudDtcbiAgfVxuXG4gIGlmIChjdXJyZW50SXNBcnJheSkge1xuICAgIGN1cnJlbnQucHVzaChuZXh0KTtcbiAgICByZXR1cm4gY3VycmVudDtcbiAgfVxuXG4gIGlmIChuZXh0SXNBcnJheSkge1xuICAgIC8vIEEgYml0IHRvbyBkYW5nZXJvdXMgdG8gbXV0YXRlIGBuZXh0YC5cbiAgICByZXR1cm4gW2N1cnJlbnRdLmNvbmNhdChuZXh0KTtcbiAgfVxuXG4gIHJldHVybiBbY3VycmVudCwgbmV4dF07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYWNjdW11bGF0ZUludG87IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGFkbGVyMzJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBNT0QgPSA2NTUyMTtcblxuLy8gYWRsZXIzMiBpcyBub3QgY3J5cHRvZ3JhcGhpY2FsbHkgc3Ryb25nLCBhbmQgaXMgb25seSB1c2VkIHRvIHNhbml0eSBjaGVjayB0aGF0XG4vLyBtYXJrdXAgZ2VuZXJhdGVkIG9uIHRoZSBzZXJ2ZXIgbWF0Y2hlcyB0aGUgbWFya3VwIGdlbmVyYXRlZCBvbiB0aGUgY2xpZW50LlxuLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiAoYSBtb2RpZmllZCB2ZXJzaW9uIG9mIHRoZSBTaGVldEpTIHZlcnNpb24pIGhhcyBiZWVuIG9wdGltaXplZFxuLy8gZm9yIG91ciB1c2UgY2FzZSwgYXQgdGhlIGV4cGVuc2Ugb2YgY29uZm9ybWluZyB0byB0aGUgYWRsZXIzMiBzcGVjaWZpY2F0aW9uXG4vLyBmb3Igbm9uLWFzY2lpIGlucHV0cy5cbmZ1bmN0aW9uIGFkbGVyMzIoZGF0YSkge1xuICB2YXIgYSA9IDE7XG4gIHZhciBiID0gMDtcbiAgdmFyIGkgPSAwO1xuICB2YXIgbCA9IGRhdGEubGVuZ3RoO1xuICB2YXIgbSA9IGwgJiB+MHgzO1xuICB3aGlsZSAoaSA8IG0pIHtcbiAgICBmb3IgKDsgaSA8IE1hdGgubWluKGkgKyA0MDk2LCBtKTsgaSArPSA0KSB7XG4gICAgICBiICs9IChhICs9IGRhdGEuY2hhckNvZGVBdChpKSkgKyAoYSArPSBkYXRhLmNoYXJDb2RlQXQoaSArIDEpKSArIChhICs9IGRhdGEuY2hhckNvZGVBdChpICsgMikpICsgKGEgKz0gZGF0YS5jaGFyQ29kZUF0KGkgKyAzKSk7XG4gICAgfVxuICAgIGEgJT0gTU9EO1xuICAgIGIgJT0gTU9EO1xuICB9XG4gIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgYiArPSBhICs9IGRhdGEuY2hhckNvZGVBdChpKTtcbiAgfVxuICBhICU9IE1PRDtcbiAgYiAlPSBNT0Q7XG4gIHJldHVybiBhIHwgYiA8PCAxNjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhZGxlcjMyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBjYW5EZWZpbmVQcm9wZXJ0eVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGNhbkRlZmluZVByb3BlcnR5ID0gZmFsc2U7XG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICB0cnkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3gnLCB7IGdldDogZnVuY3Rpb24gKCkge30gfSk7XG4gICAgY2FuRGVmaW5lUHJvcGVydHkgPSB0cnVlO1xuICB9IGNhdGNoICh4KSB7XG4gICAgLy8gSUUgd2lsbCBmYWlsIG9uIGRlZmluZVByb3BlcnR5XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjYW5EZWZpbmVQcm9wZXJ0eTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZGFuZ2Vyb3VzU3R5bGVWYWx1ZVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBDU1NQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vQ1NTUHJvcGVydHknKTtcblxudmFyIGlzVW5pdGxlc3NOdW1iZXIgPSBDU1NQcm9wZXJ0eS5pc1VuaXRsZXNzTnVtYmVyO1xuXG4vKipcbiAqIENvbnZlcnQgYSB2YWx1ZSBpbnRvIHRoZSBwcm9wZXIgY3NzIHdyaXRhYmxlIHZhbHVlLiBUaGUgc3R5bGUgbmFtZSBgbmFtZWBcbiAqIHNob3VsZCBiZSBsb2dpY2FsIChubyBoeXBoZW5zKSwgYXMgc3BlY2lmaWVkXG4gKiBpbiBgQ1NTUHJvcGVydHkuaXNVbml0bGVzc051bWJlcmAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQ1NTIHByb3BlcnR5IG5hbWUgc3VjaCBhcyBgdG9wTWFyZ2luYC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgQ1NTIHByb3BlcnR5IHZhbHVlIHN1Y2ggYXMgYDEwcHhgLlxuICogQHJldHVybiB7c3RyaW5nfSBOb3JtYWxpemVkIHN0eWxlIHZhbHVlIHdpdGggZGltZW5zaW9ucyBhcHBsaWVkLlxuICovXG5mdW5jdGlvbiBkYW5nZXJvdXNTdHlsZVZhbHVlKG5hbWUsIHZhbHVlKSB7XG4gIC8vIE5vdGUgdGhhdCB3ZSd2ZSByZW1vdmVkIGVzY2FwZVRleHRGb3JCcm93c2VyKCkgY2FsbHMgaGVyZSBzaW5jZSB0aGVcbiAgLy8gd2hvbGUgc3RyaW5nIHdpbGwgYmUgZXNjYXBlZCB3aGVuIHRoZSBhdHRyaWJ1dGUgaXMgaW5qZWN0ZWQgaW50b1xuICAvLyB0aGUgbWFya3VwLiBJZiB5b3UgcHJvdmlkZSB1bnNhZmUgdXNlciBkYXRhIGhlcmUgdGhleSBjYW4gaW5qZWN0XG4gIC8vIGFyYml0cmFyeSBDU1Mgd2hpY2ggbWF5IGJlIHByb2JsZW1hdGljIChJIGNvdWxkbid0IHJlcHJvIHRoaXMpOlxuICAvLyBodHRwczovL3d3dy5vd2FzcC5vcmcvaW5kZXgucGhwL1hTU19GaWx0ZXJfRXZhc2lvbl9DaGVhdF9TaGVldFxuICAvLyBodHRwOi8vd3d3LnRoZXNwYW5uZXIuY28udWsvMjAwNy8xMS8yNi91bHRpbWF0ZS14c3MtY3NzLWluamVjdGlvbi9cbiAgLy8gVGhpcyBpcyBub3QgYW4gWFNTIGhvbGUgYnV0IGluc3RlYWQgYSBwb3RlbnRpYWwgQ1NTIGluamVjdGlvbiBpc3N1ZVxuICAvLyB3aGljaCBoYXMgbGVhZCB0byBhIGdyZWF0ZXIgZGlzY3Vzc2lvbiBhYm91dCBob3cgd2UncmUgZ29pbmcgdG9cbiAgLy8gdHJ1c3QgVVJMcyBtb3ZpbmcgZm9yd2FyZC4gU2VlICMyMTE1OTAxXG5cbiAgdmFyIGlzRW1wdHkgPSB2YWx1ZSA9PSBudWxsIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nIHx8IHZhbHVlID09PSAnJztcbiAgaWYgKGlzRW1wdHkpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICB2YXIgaXNOb25OdW1lcmljID0gaXNOYU4odmFsdWUpO1xuICBpZiAoaXNOb25OdW1lcmljIHx8IHZhbHVlID09PSAwIHx8IGlzVW5pdGxlc3NOdW1iZXIuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgaXNVbml0bGVzc051bWJlcltuYW1lXSkge1xuICAgIHJldHVybiAnJyArIHZhbHVlOyAvLyBjYXN0IHRvIHN0cmluZ1xuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgfVxuICByZXR1cm4gdmFsdWUgKyAncHgnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRhbmdlcm91c1N0eWxlVmFsdWU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGRlcHJlY2F0ZWRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG4vKipcbiAqIFRoaXMgd2lsbCBsb2cgYSBzaW5nbGUgZGVwcmVjYXRpb24gbm90aWNlIHBlciBmdW5jdGlvbiBhbmQgZm9yd2FyZCB0aGUgY2FsbFxuICogb24gdG8gdGhlIG5ldyBBUEkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGZuTmFtZSBUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBuZXdNb2R1bGUgVGhlIG1vZHVsZSB0aGF0IGZuIHdpbGwgZXhpc3QgaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuZXdQYWNrYWdlIFRoZSBtb2R1bGUgdGhhdCBmbiB3aWxsIGV4aXN0IGluXG4gKiBAcGFyYW0geyp9IGN0eCBUaGUgY29udGV4dCB0aGlzIGZvcndhcmRlZCBjYWxsIHNob3VsZCBydW4gaW5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBmb3J3YXJkIG9uIHRvXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCB3YXJuIG9uY2UgYW5kIHRoZW4gY2FsbCBmblxuICovXG5mdW5jdGlvbiBkZXByZWNhdGVkKGZuTmFtZSwgbmV3TW9kdWxlLCBuZXdQYWNrYWdlLCBjdHgsIGZuKSB7XG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YXIgbmV3Rm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh3YXJuZWQsXG4gICAgICAvLyBSZXF1aXJlIGV4YW1wbGVzIGluIHRoaXMgc3RyaW5nIG11c3QgYmUgc3BsaXQgdG8gcHJldmVudCBSZWFjdCdzXG4gICAgICAvLyBidWlsZCB0b29scyBmcm9tIG1pc3Rha2luZyB0aGVtIGZvciByZWFsIHJlcXVpcmVzLlxuICAgICAgLy8gT3RoZXJ3aXNlIHRoZSBidWlsZCB0b29scyB3aWxsIGF0dGVtcHQgdG8gYnVpbGQgYSAnJXMnIG1vZHVsZS5cbiAgICAgICdSZWFjdC4lcyBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICVzLiVzIGZyb20gcmVxdWlyZScgKyAnKFxcJyVzXFwnKSAnICsgJ2luc3RlYWQuJywgZm5OYW1lLCBuZXdNb2R1bGUsIGZuTmFtZSwgbmV3UGFja2FnZSkgOiB1bmRlZmluZWQ7XG4gICAgICB3YXJuZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKTtcbiAgICB9O1xuICAgIC8vIFdlIG5lZWQgdG8gbWFrZSBzdXJlIGFsbCBwcm9wZXJ0aWVzIG9mIHRoZSBvcmlnaW5hbCBmbiBhcmUgY29waWVkIG92ZXIuXG4gICAgLy8gSW4gcGFydGljdWxhciwgdGhpcyBpcyBuZWVkZWQgdG8gc3VwcG9ydCBQcm9wVHlwZXNcbiAgICByZXR1cm4gYXNzaWduKG5ld0ZuLCBmbik7XG4gIH1cblxuICByZXR1cm4gZm47XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVwcmVjYXRlZDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRVNDQVBFX0xPT0tVUCA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJzwnOiAnJmx0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICAnXFwnJzogJyYjeDI3Oydcbn07XG5cbnZhciBFU0NBUEVfUkVHRVggPSAvWyY+PFwiJ10vZztcblxuZnVuY3Rpb24gZXNjYXBlcihtYXRjaCkge1xuICByZXR1cm4gRVNDQVBFX0xPT0tVUFttYXRjaF07XG59XG5cbi8qKlxuICogRXNjYXBlcyB0ZXh0IHRvIHByZXZlbnQgc2NyaXB0aW5nIGF0dGFja3MuXG4gKlxuICogQHBhcmFtIHsqfSB0ZXh0IFRleHQgdmFsdWUgdG8gZXNjYXBlLlxuICogQHJldHVybiB7c3RyaW5nfSBBbiBlc2NhcGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKHRleHQpIHtcbiAgcmV0dXJuICgnJyArIHRleHQpLnJlcGxhY2UoRVNDQVBFX1JFR0VYLCBlc2NhcGVyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGZpbmRET01Ob2RlXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0SW5zdGFuY2VNYXAgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VNYXAnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIERPTSBub2RlIHJlbmRlcmVkIGJ5IHRoaXMgZWxlbWVudC5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fERPTUVsZW1lbnR9IGNvbXBvbmVudE9yRWxlbWVudFxuICogQHJldHVybiB7P0RPTUVsZW1lbnR9IFRoZSByb290IG5vZGUgb2YgdGhpcyBlbGVtZW50LlxuICovXG5mdW5jdGlvbiBmaW5kRE9NTm9kZShjb21wb25lbnRPckVsZW1lbnQpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YXIgb3duZXIgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50O1xuICAgIGlmIChvd25lciAhPT0gbnVsbCkge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcob3duZXIuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyLCAnJXMgaXMgYWNjZXNzaW5nIGdldERPTU5vZGUgb3IgZmluZERPTU5vZGUgaW5zaWRlIGl0cyByZW5kZXIoKS4gJyArICdyZW5kZXIoKSBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uIG9mIHByb3BzIGFuZCBzdGF0ZS4gSXQgc2hvdWxkICcgKyAnbmV2ZXIgYWNjZXNzIHNvbWV0aGluZyB0aGF0IHJlcXVpcmVzIHN0YWxlIGRhdGEgZnJvbSB0aGUgcHJldmlvdXMgJyArICdyZW5kZXIsIHN1Y2ggYXMgcmVmcy4gTW92ZSB0aGlzIGxvZ2ljIHRvIGNvbXBvbmVudERpZE1vdW50IGFuZCAnICsgJ2NvbXBvbmVudERpZFVwZGF0ZSBpbnN0ZWFkLicsIG93bmVyLmdldE5hbWUoKSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIG93bmVyLl93YXJuZWRBYm91dFJlZnNJblJlbmRlciA9IHRydWU7XG4gICAgfVxuICB9XG4gIGlmIChjb21wb25lbnRPckVsZW1lbnQgPT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChjb21wb25lbnRPckVsZW1lbnQubm9kZVR5cGUgPT09IDEpIHtcbiAgICByZXR1cm4gY29tcG9uZW50T3JFbGVtZW50O1xuICB9XG4gIGlmIChSZWFjdEluc3RhbmNlTWFwLmhhcyhjb21wb25lbnRPckVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIFJlYWN0TW91bnQuZ2V0Tm9kZUZyb21JbnN0YW5jZShjb21wb25lbnRPckVsZW1lbnQpO1xuICB9XG4gICEoY29tcG9uZW50T3JFbGVtZW50LnJlbmRlciA9PSBudWxsIHx8IHR5cGVvZiBjb21wb25lbnRPckVsZW1lbnQucmVuZGVyICE9PSAnZnVuY3Rpb24nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdmaW5kRE9NTm9kZSB3YXMgY2FsbGVkIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAhZmFsc2UgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRWxlbWVudCBhcHBlYXJzIHRvIGJlIG5laXRoZXIgUmVhY3RDb21wb25lbnQgbm9yIERPTU5vZGUgKGtleXM6ICVzKScsIE9iamVjdC5rZXlzKGNvbXBvbmVudE9yRWxlbWVudCkpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmaW5kRE9NTm9kZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZmxhdHRlbkNoaWxkcmVuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdHJhdmVyc2VBbGxDaGlsZHJlbiA9IHJlcXVpcmUoJy4vdHJhdmVyc2VBbGxDaGlsZHJlbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHJhdmVyc2VDb250ZXh0IENvbnRleHQgcGFzc2VkIHRocm91Z2ggdHJhdmVyc2FsLlxuICogQHBhcmFtIHs/UmVhY3RDb21wb25lbnR9IGNoaWxkIFJlYWN0IGNoaWxkIGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7IXN0cmluZ30gbmFtZSBTdHJpbmcgbmFtZSBvZiBrZXkgcGF0aCB0byBjaGlsZC5cbiAqL1xuZnVuY3Rpb24gZmxhdHRlblNpbmdsZUNoaWxkSW50b0NvbnRleHQodHJhdmVyc2VDb250ZXh0LCBjaGlsZCwgbmFtZSkge1xuICAvLyBXZSBmb3VuZCBhIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAgdmFyIHJlc3VsdCA9IHRyYXZlcnNlQ29udGV4dDtcbiAgdmFyIGtleVVuaXF1ZSA9IHJlc3VsdFtuYW1lXSA9PT0gdW5kZWZpbmVkO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGtleVVuaXF1ZSwgJ2ZsYXR0ZW5DaGlsZHJlbiguLi4pOiBFbmNvdW50ZXJlZCB0d28gY2hpbGRyZW4gd2l0aCB0aGUgc2FtZSBrZXksICcgKyAnYCVzYC4gQ2hpbGQga2V5cyBtdXN0IGJlIHVuaXF1ZTsgd2hlbiB0d28gY2hpbGRyZW4gc2hhcmUgYSBrZXksIG9ubHkgJyArICd0aGUgZmlyc3QgY2hpbGQgd2lsbCBiZSB1c2VkLicsIG5hbWUpIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmIChrZXlVbmlxdWUgJiYgY2hpbGQgIT0gbnVsbCkge1xuICAgIHJlc3VsdFtuYW1lXSA9IGNoaWxkO1xuICB9XG59XG5cbi8qKlxuICogRmxhdHRlbnMgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhcyBgcHJvcHMuY2hpbGRyZW5gLiBBbnkgbnVsbFxuICogY2hpbGRyZW4gd2lsbCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBvYmplY3QuXG4gKiBAcmV0dXJuIHshb2JqZWN0fSBmbGF0dGVuZWQgY2hpbGRyZW4ga2V5ZWQgYnkgbmFtZS5cbiAqL1xuZnVuY3Rpb24gZmxhdHRlbkNoaWxkcmVuKGNoaWxkcmVuKSB7XG4gIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgZmxhdHRlblNpbmdsZUNoaWxkSW50b0NvbnRleHQsIHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZmxhdHRlbkNoaWxkcmVuOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBmb3JFYWNoQWNjdW11bGF0ZWRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQHBhcmFtIHthcnJheX0gYXJyIGFuIFwiYWNjdW11bGF0aW9uXCIgb2YgaXRlbXMgd2hpY2ggaXMgZWl0aGVyIGFuIEFycmF5IG9yXG4gKiBhIHNpbmdsZSBpdGVtLiBVc2VmdWwgd2hlbiBwYWlyZWQgd2l0aCB0aGUgYGFjY3VtdWxhdGVgIG1vZHVsZS4gVGhpcyBpcyBhXG4gKiBzaW1wbGUgdXRpbGl0eSB0aGF0IGFsbG93cyB1cyB0byByZWFzb24gYWJvdXQgYSBjb2xsZWN0aW9uIG9mIGl0ZW1zLCBidXRcbiAqIGhhbmRsaW5nIHRoZSBjYXNlIHdoZW4gdGhlcmUgaXMgZXhhY3RseSBvbmUgaXRlbSAoYW5kIHdlIGRvIG5vdCBuZWVkIHRvXG4gKiBhbGxvY2F0ZSBhbiBhcnJheSkuXG4gKi9cbnZhciBmb3JFYWNoQWNjdW11bGF0ZWQgPSBmdW5jdGlvbiAoYXJyLCBjYiwgc2NvcGUpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xuICAgIGFyci5mb3JFYWNoKGNiLCBzY29wZSk7XG4gIH0gZWxzZSBpZiAoYXJyKSB7XG4gICAgY2IuY2FsbChzY29wZSwgYXJyKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmb3JFYWNoQWNjdW11bGF0ZWQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50Q2hhckNvZGVcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIGBjaGFyQ29kZWAgcmVwcmVzZW50cyB0aGUgYWN0dWFsIFwiY2hhcmFjdGVyIGNvZGVcIiBhbmQgaXMgc2FmZSB0byB1c2Ugd2l0aFxuICogYFN0cmluZy5mcm9tQ2hhckNvZGVgLiBBcyBzdWNoLCBvbmx5IGtleXMgdGhhdCBjb3JyZXNwb25kIHRvIHByaW50YWJsZVxuICogY2hhcmFjdGVycyBwcm9kdWNlIGEgdmFsaWQgYGNoYXJDb2RlYCwgdGhlIG9ubHkgZXhjZXB0aW9uIHRvIHRoaXMgaXMgRW50ZXIuXG4gKiBUaGUgVGFiLWtleSBpcyBjb25zaWRlcmVkIG5vbi1wcmludGFibGUgYW5kIGRvZXMgbm90IGhhdmUgYSBgY2hhckNvZGVgLFxuICogcHJlc3VtYWJseSBiZWNhdXNlIGl0IGRvZXMgbm90IHByb2R1Y2UgYSB0YWItY2hhcmFjdGVyIGluIGJyb3dzZXJzLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gTm9ybWFsaXplZCBgY2hhckNvZGVgIHByb3BlcnR5LlxuICovXG5mdW5jdGlvbiBnZXRFdmVudENoYXJDb2RlKG5hdGl2ZUV2ZW50KSB7XG4gIHZhciBjaGFyQ29kZTtcbiAgdmFyIGtleUNvZGUgPSBuYXRpdmVFdmVudC5rZXlDb2RlO1xuXG4gIGlmICgnY2hhckNvZGUnIGluIG5hdGl2ZUV2ZW50KSB7XG4gICAgY2hhckNvZGUgPSBuYXRpdmVFdmVudC5jaGFyQ29kZTtcblxuICAgIC8vIEZGIGRvZXMgbm90IHNldCBgY2hhckNvZGVgIGZvciB0aGUgRW50ZXIta2V5LCBjaGVjayBhZ2FpbnN0IGBrZXlDb2RlYC5cbiAgICBpZiAoY2hhckNvZGUgPT09IDAgJiYga2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgIGNoYXJDb2RlID0gMTM7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIElFOCBkb2VzIG5vdCBpbXBsZW1lbnQgYGNoYXJDb2RlYCwgYnV0IGBrZXlDb2RlYCBoYXMgdGhlIGNvcnJlY3QgdmFsdWUuXG4gICAgY2hhckNvZGUgPSBrZXlDb2RlO1xuICB9XG5cbiAgLy8gU29tZSBub24tcHJpbnRhYmxlIGtleXMgYXJlIHJlcG9ydGVkIGluIGBjaGFyQ29kZWAvYGtleUNvZGVgLCBkaXNjYXJkIHRoZW0uXG4gIC8vIE11c3Qgbm90IGRpc2NhcmQgdGhlIChub24tKXByaW50YWJsZSBFbnRlci1rZXkuXG4gIGlmIChjaGFyQ29kZSA+PSAzMiB8fCBjaGFyQ29kZSA9PT0gMTMpIHtcbiAgICByZXR1cm4gY2hhckNvZGU7XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRFdmVudENoYXJDb2RlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRFdmVudEtleVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBnZXRFdmVudENoYXJDb2RlID0gcmVxdWlyZSgnLi9nZXRFdmVudENoYXJDb2RlJyk7XG5cbi8qKlxuICogTm9ybWFsaXphdGlvbiBvZiBkZXByZWNhdGVkIEhUTUw1IGBrZXlgIHZhbHVlc1xuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvS2V5Ym9hcmRFdmVudCNLZXlfbmFtZXNcbiAqL1xudmFyIG5vcm1hbGl6ZUtleSA9IHtcbiAgJ0VzYyc6ICdFc2NhcGUnLFxuICAnU3BhY2ViYXInOiAnICcsXG4gICdMZWZ0JzogJ0Fycm93TGVmdCcsXG4gICdVcCc6ICdBcnJvd1VwJyxcbiAgJ1JpZ2h0JzogJ0Fycm93UmlnaHQnLFxuICAnRG93bic6ICdBcnJvd0Rvd24nLFxuICAnRGVsJzogJ0RlbGV0ZScsXG4gICdXaW4nOiAnT1MnLFxuICAnTWVudSc6ICdDb250ZXh0TWVudScsXG4gICdBcHBzJzogJ0NvbnRleHRNZW51JyxcbiAgJ1Njcm9sbCc6ICdTY3JvbGxMb2NrJyxcbiAgJ01velByaW50YWJsZUtleSc6ICdVbmlkZW50aWZpZWQnXG59O1xuXG4vKipcbiAqIFRyYW5zbGF0aW9uIGZyb20gbGVnYWN5IGBrZXlDb2RlYCB0byBIVE1MNSBga2V5YFxuICogT25seSBzcGVjaWFsIGtleXMgc3VwcG9ydGVkLCBhbGwgb3RoZXJzIGRlcGVuZCBvbiBrZXlib2FyZCBsYXlvdXQgb3IgYnJvd3NlclxuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvS2V5Ym9hcmRFdmVudCNLZXlfbmFtZXNcbiAqL1xudmFyIHRyYW5zbGF0ZVRvS2V5ID0ge1xuICA4OiAnQmFja3NwYWNlJyxcbiAgOTogJ1RhYicsXG4gIDEyOiAnQ2xlYXInLFxuICAxMzogJ0VudGVyJyxcbiAgMTY6ICdTaGlmdCcsXG4gIDE3OiAnQ29udHJvbCcsXG4gIDE4OiAnQWx0JyxcbiAgMTk6ICdQYXVzZScsXG4gIDIwOiAnQ2Fwc0xvY2snLFxuICAyNzogJ0VzY2FwZScsXG4gIDMyOiAnICcsXG4gIDMzOiAnUGFnZVVwJyxcbiAgMzQ6ICdQYWdlRG93bicsXG4gIDM1OiAnRW5kJyxcbiAgMzY6ICdIb21lJyxcbiAgMzc6ICdBcnJvd0xlZnQnLFxuICAzODogJ0Fycm93VXAnLFxuICAzOTogJ0Fycm93UmlnaHQnLFxuICA0MDogJ0Fycm93RG93bicsXG4gIDQ1OiAnSW5zZXJ0JyxcbiAgNDY6ICdEZWxldGUnLFxuICAxMTI6ICdGMScsIDExMzogJ0YyJywgMTE0OiAnRjMnLCAxMTU6ICdGNCcsIDExNjogJ0Y1JywgMTE3OiAnRjYnLFxuICAxMTg6ICdGNycsIDExOTogJ0Y4JywgMTIwOiAnRjknLCAxMjE6ICdGMTAnLCAxMjI6ICdGMTEnLCAxMjM6ICdGMTInLFxuICAxNDQ6ICdOdW1Mb2NrJyxcbiAgMTQ1OiAnU2Nyb2xsTG9jaycsXG4gIDIyNDogJ01ldGEnXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge3N0cmluZ30gTm9ybWFsaXplZCBga2V5YCBwcm9wZXJ0eS5cbiAqL1xuZnVuY3Rpb24gZ2V0RXZlbnRLZXkobmF0aXZlRXZlbnQpIHtcbiAgaWYgKG5hdGl2ZUV2ZW50LmtleSkge1xuICAgIC8vIE5vcm1hbGl6ZSBpbmNvbnNpc3RlbnQgdmFsdWVzIHJlcG9ydGVkIGJ5IGJyb3dzZXJzIGR1ZSB0b1xuICAgIC8vIGltcGxlbWVudGF0aW9ucyBvZiBhIHdvcmtpbmcgZHJhZnQgc3BlY2lmaWNhdGlvbi5cblxuICAgIC8vIEZpcmVGb3ggaW1wbGVtZW50cyBga2V5YCBidXQgcmV0dXJucyBgTW96UHJpbnRhYmxlS2V5YCBmb3IgYWxsXG4gICAgLy8gcHJpbnRhYmxlIGNoYXJhY3RlcnMgKG5vcm1hbGl6ZWQgdG8gYFVuaWRlbnRpZmllZGApLCBpZ25vcmUgaXQuXG4gICAgdmFyIGtleSA9IG5vcm1hbGl6ZUtleVtuYXRpdmVFdmVudC5rZXldIHx8IG5hdGl2ZUV2ZW50LmtleTtcbiAgICBpZiAoa2V5ICE9PSAnVW5pZGVudGlmaWVkJykge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cblxuICAvLyBCcm93c2VyIGRvZXMgbm90IGltcGxlbWVudCBga2V5YCwgcG9seWZpbGwgYXMgbXVjaCBvZiBpdCBhcyB3ZSBjYW4uXG4gIGlmIChuYXRpdmVFdmVudC50eXBlID09PSAna2V5cHJlc3MnKSB7XG4gICAgdmFyIGNoYXJDb2RlID0gZ2V0RXZlbnRDaGFyQ29kZShuYXRpdmVFdmVudCk7XG5cbiAgICAvLyBUaGUgZW50ZXIta2V5IGlzIHRlY2huaWNhbGx5IGJvdGggcHJpbnRhYmxlIGFuZCBub24tcHJpbnRhYmxlIGFuZCBjYW5cbiAgICAvLyB0aHVzIGJlIGNhcHR1cmVkIGJ5IGBrZXlwcmVzc2AsIG5vIG90aGVyIG5vbi1wcmludGFibGUga2V5IHNob3VsZC5cbiAgICByZXR1cm4gY2hhckNvZGUgPT09IDEzID8gJ0VudGVyJyA6IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICB9XG4gIGlmIChuYXRpdmVFdmVudC50eXBlID09PSAna2V5ZG93bicgfHwgbmF0aXZlRXZlbnQudHlwZSA9PT0gJ2tleXVwJykge1xuICAgIC8vIFdoaWxlIHVzZXIga2V5Ym9hcmQgbGF5b3V0IGRldGVybWluZXMgdGhlIGFjdHVhbCBtZWFuaW5nIG9mIGVhY2hcbiAgICAvLyBga2V5Q29kZWAgdmFsdWUsIGFsbW9zdCBhbGwgZnVuY3Rpb24ga2V5cyBoYXZlIGEgdW5pdmVyc2FsIHZhbHVlLlxuICAgIHJldHVybiB0cmFuc2xhdGVUb0tleVtuYXRpdmVFdmVudC5rZXlDb2RlXSB8fCAnVW5pZGVudGlmaWVkJztcbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0RXZlbnRLZXk7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50TW9kaWZpZXJTdGF0ZVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVHJhbnNsYXRpb24gZnJvbSBtb2RpZmllciBrZXkgdG8gdGhlIGFzc29jaWF0ZWQgcHJvcGVydHkgaW4gdGhlIGV2ZW50LlxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2tleXMtTW9kaWZpZXJzXG4gKi9cblxudmFyIG1vZGlmaWVyS2V5VG9Qcm9wID0ge1xuICAnQWx0JzogJ2FsdEtleScsXG4gICdDb250cm9sJzogJ2N0cmxLZXknLFxuICAnTWV0YSc6ICdtZXRhS2V5JyxcbiAgJ1NoaWZ0JzogJ3NoaWZ0S2V5J1xufTtcblxuLy8gSUU4IGRvZXMgbm90IGltcGxlbWVudCBnZXRNb2RpZmllclN0YXRlIHNvIHdlIHNpbXBseSBtYXAgaXQgdG8gdGhlIG9ubHlcbi8vIG1vZGlmaWVyIGtleXMgZXhwb3NlZCBieSB0aGUgZXZlbnQgaXRzZWxmLCBkb2VzIG5vdCBzdXBwb3J0IExvY2sta2V5cy5cbi8vIEN1cnJlbnRseSwgYWxsIG1ham9yIGJyb3dzZXJzIGV4Y2VwdCBDaHJvbWUgc2VlbXMgdG8gc3VwcG9ydCBMb2NrLWtleXMuXG5mdW5jdGlvbiBtb2RpZmllclN0YXRlR2V0dGVyKGtleUFyZykge1xuICB2YXIgc3ludGhldGljRXZlbnQgPSB0aGlzO1xuICB2YXIgbmF0aXZlRXZlbnQgPSBzeW50aGV0aWNFdmVudC5uYXRpdmVFdmVudDtcbiAgaWYgKG5hdGl2ZUV2ZW50LmdldE1vZGlmaWVyU3RhdGUpIHtcbiAgICByZXR1cm4gbmF0aXZlRXZlbnQuZ2V0TW9kaWZpZXJTdGF0ZShrZXlBcmcpO1xuICB9XG4gIHZhciBrZXlQcm9wID0gbW9kaWZpZXJLZXlUb1Byb3Bba2V5QXJnXTtcbiAgcmV0dXJuIGtleVByb3AgPyAhIW5hdGl2ZUV2ZW50W2tleVByb3BdIDogZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50TW9kaWZpZXJTdGF0ZShuYXRpdmVFdmVudCkge1xuICByZXR1cm4gbW9kaWZpZXJTdGF0ZUdldHRlcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRFdmVudE1vZGlmaWVyU3RhdGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50VGFyZ2V0XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBHZXRzIHRoZSB0YXJnZXQgbm9kZSBmcm9tIGEgbmF0aXZlIGJyb3dzZXIgZXZlbnQgYnkgYWNjb3VudGluZyBmb3JcbiAqIGluY29uc2lzdGVuY2llcyBpbiBicm93c2VyIERPTSBBUElzLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge0RPTUV2ZW50VGFyZ2V0fSBUYXJnZXQgbm9kZS5cbiAqL1xuZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXQobmF0aXZlRXZlbnQpIHtcbiAgdmFyIHRhcmdldCA9IG5hdGl2ZUV2ZW50LnRhcmdldCB8fCBuYXRpdmVFdmVudC5zcmNFbGVtZW50IHx8IHdpbmRvdztcbiAgLy8gU2FmYXJpIG1heSBmaXJlIGV2ZW50cyBvbiB0ZXh0IG5vZGVzIChOb2RlLlRFWFRfTk9ERSBpcyAzKS5cbiAgLy8gQHNlZSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2pzL2V2ZW50c19wcm9wZXJ0aWVzLmh0bWxcbiAgcmV0dXJuIHRhcmdldC5ub2RlVHlwZSA9PT0gMyA/IHRhcmdldC5wYXJlbnROb2RlIDogdGFyZ2V0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldEV2ZW50VGFyZ2V0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRJdGVyYXRvckZuXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyogZ2xvYmFsIFN5bWJvbCAqL1xudmFyIElURVJBVE9SX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLml0ZXJhdG9yO1xudmFyIEZBVVhfSVRFUkFUT1JfU1lNQk9MID0gJ0BAaXRlcmF0b3InOyAvLyBCZWZvcmUgU3ltYm9sIHNwZWMuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgaXRlcmF0b3IgbWV0aG9kIGZ1bmN0aW9uIGNvbnRhaW5lZCBvbiB0aGUgaXRlcmFibGUgb2JqZWN0LlxuICpcbiAqIEJlIHN1cmUgdG8gaW52b2tlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBpdGVyYWJsZSBhcyBjb250ZXh0OlxuICpcbiAqICAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4obXlJdGVyYWJsZSk7XG4gKiAgICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAqICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChteUl0ZXJhYmxlKTtcbiAqICAgICAgIC4uLlxuICogICAgIH1cbiAqXG4gKiBAcGFyYW0gez9vYmplY3R9IG1heWJlSXRlcmFibGVcbiAqIEByZXR1cm4gez9mdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gZ2V0SXRlcmF0b3JGbihtYXliZUl0ZXJhYmxlKSB7XG4gIHZhciBpdGVyYXRvckZuID0gbWF5YmVJdGVyYWJsZSAmJiAoSVRFUkFUT1JfU1lNQk9MICYmIG1heWJlSXRlcmFibGVbSVRFUkFUT1JfU1lNQk9MXSB8fCBtYXliZUl0ZXJhYmxlW0ZBVVhfSVRFUkFUT1JfU1lNQk9MXSk7XG4gIGlmICh0eXBlb2YgaXRlcmF0b3JGbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBpdGVyYXRvckZuO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0SXRlcmF0b3JGbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBHaXZlbiBhbnkgbm9kZSByZXR1cm4gdGhlIGZpcnN0IGxlYWYgbm9kZSB3aXRob3V0IGNoaWxkcmVuLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gbm9kZVxuICogQHJldHVybiB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX1cbiAqL1xuZnVuY3Rpb24gZ2V0TGVhZk5vZGUobm9kZSkge1xuICB3aGlsZSAobm9kZSAmJiBub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICBub2RlID0gbm9kZS5maXJzdENoaWxkO1xuICB9XG4gIHJldHVybiBub2RlO1xufVxuXG4vKipcbiAqIEdldCB0aGUgbmV4dCBzaWJsaW5nIHdpdGhpbiBhIGNvbnRhaW5lci4gVGhpcyB3aWxsIHdhbGsgdXAgdGhlXG4gKiBET00gaWYgYSBub2RlJ3Mgc2libGluZ3MgaGF2ZSBiZWVuIGV4aGF1c3RlZC5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9IG5vZGVcbiAqIEByZXR1cm4gez9ET01FbGVtZW50fERPTVRleHROb2RlfVxuICovXG5mdW5jdGlvbiBnZXRTaWJsaW5nTm9kZShub2RlKSB7XG4gIHdoaWxlIChub2RlKSB7XG4gICAgaWYgKG5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICB9XG59XG5cbi8qKlxuICogR2V0IG9iamVjdCBkZXNjcmliaW5nIHRoZSBub2RlcyB3aGljaCBjb250YWluIGNoYXJhY3RlcnMgYXQgb2Zmc2V0LlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gcm9vdFxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFxuICogQHJldHVybiB7P29iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldChyb290LCBvZmZzZXQpIHtcbiAgdmFyIG5vZGUgPSBnZXRMZWFmTm9kZShyb290KTtcbiAgdmFyIG5vZGVTdGFydCA9IDA7XG4gIHZhciBub2RlRW5kID0gMDtcblxuICB3aGlsZSAobm9kZSkge1xuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAzKSB7XG4gICAgICBub2RlRW5kID0gbm9kZVN0YXJ0ICsgbm9kZS50ZXh0Q29udGVudC5sZW5ndGg7XG5cbiAgICAgIGlmIChub2RlU3RhcnQgPD0gb2Zmc2V0ICYmIG5vZGVFbmQgPj0gb2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgICBvZmZzZXQ6IG9mZnNldCAtIG5vZGVTdGFydFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBub2RlU3RhcnQgPSBub2RlRW5kO1xuICAgIH1cblxuICAgIG5vZGUgPSBnZXRMZWFmTm9kZShnZXRTaWJsaW5nTm9kZShub2RlKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRUZXh0Q29udGVudEFjY2Vzc29yXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgY29udGVudEtleSA9IG51bGw7XG5cbi8qKlxuICogR2V0cyB0aGUga2V5IHVzZWQgdG8gYWNjZXNzIHRleHQgY29udGVudCBvbiBhIERPTSBub2RlLlxuICpcbiAqIEByZXR1cm4gez9zdHJpbmd9IEtleSB1c2VkIHRvIGFjY2VzcyB0ZXh0IGNvbnRlbnQuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2V0VGV4dENvbnRlbnRBY2Nlc3NvcigpIHtcbiAgaWYgKCFjb250ZW50S2V5ICYmIEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICAgIC8vIFByZWZlciB0ZXh0Q29udGVudCB0byBpbm5lclRleHQgYmVjYXVzZSBtYW55IGJyb3dzZXJzIHN1cHBvcnQgYm90aCBidXRcbiAgICAvLyBTVkcgPHRleHQ+IGVsZW1lbnRzIGRvbid0IHN1cHBvcnQgaW5uZXJUZXh0IGV2ZW4gd2hlbiA8ZGl2PiBkb2VzLlxuICAgIGNvbnRlbnRLZXkgPSAndGV4dENvbnRlbnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA/ICd0ZXh0Q29udGVudCcgOiAnaW5uZXJUZXh0JztcbiAgfVxuICByZXR1cm4gY29udGVudEtleTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRUZXh0Q29udGVudEFjY2Vzc29yOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpO1xudmFyIFJlYWN0RW1wdHlDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0RW1wdHlDb21wb25lbnQnKTtcbnZhciBSZWFjdE5hdGl2ZUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3ROYXRpdmVDb21wb25lbnQnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8vIFRvIGF2b2lkIGEgY3ljbGljIGRlcGVuZGVuY3ksIHdlIGNyZWF0ZSB0aGUgZmluYWwgY2xhc3MgaW4gdGhpcyBtb2R1bGVcbnZhciBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7fTtcbmFzc2lnbihSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFdyYXBwZXIucHJvdG90eXBlLCBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudC5NaXhpbiwge1xuICBfaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudDogaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudFxufSk7XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikge1xuICBpZiAob3duZXIpIHtcbiAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSB0eXBlIHJlZmVyZW5jZSBpcyBhIGtub3duIGludGVybmFsIHR5cGUuIEkuZS4gbm90IGEgdXNlclxuICogcHJvdmlkZWQgY29tcG9zaXRlIHR5cGUuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHlwZVxuICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoaXMgaXMgYSB2YWxpZCBpbnRlcm5hbCB0eXBlLlxuICovXG5mdW5jdGlvbiBpc0ludGVybmFsQ29tcG9uZW50VHlwZSh0eXBlKSB7XG4gIHJldHVybiB0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdHlwZS5wcm90b3R5cGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB0eXBlLnByb3RvdHlwZS5tb3VudENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdHlwZS5wcm90b3R5cGUucmVjZWl2ZUNvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuLyoqXG4gKiBHaXZlbiBhIFJlYWN0Tm9kZSwgY3JlYXRlIGFuIGluc3RhbmNlIHRoYXQgd2lsbCBhY3R1YWxseSBiZSBtb3VudGVkLlxuICpcbiAqIEBwYXJhbSB7UmVhY3ROb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtvYmplY3R9IEEgbmV3IGluc3RhbmNlIG9mIHRoZSBlbGVtZW50J3MgY29uc3RydWN0b3IuXG4gKiBAcHJvdGVjdGVkXG4gKi9cbmZ1bmN0aW9uIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQobm9kZSkge1xuICB2YXIgaW5zdGFuY2U7XG5cbiAgaWYgKG5vZGUgPT09IG51bGwgfHwgbm9kZSA9PT0gZmFsc2UpIHtcbiAgICBpbnN0YW5jZSA9IG5ldyBSZWFjdEVtcHR5Q29tcG9uZW50KGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBub2RlID09PSAnb2JqZWN0Jykge1xuICAgIHZhciBlbGVtZW50ID0gbm9kZTtcbiAgICAhKGVsZW1lbnQgJiYgKHR5cGVvZiBlbGVtZW50LnR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gJ3N0cmluZycpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFbGVtZW50IHR5cGUgaXMgaW52YWxpZDogZXhwZWN0ZWQgYSBzdHJpbmcgKGZvciBidWlsdC1pbiBjb21wb25lbnRzKSAnICsgJ29yIGEgY2xhc3MvZnVuY3Rpb24gKGZvciBjb21wb3NpdGUgY29tcG9uZW50cykgYnV0IGdvdDogJXMuJXMnLCBlbGVtZW50LnR5cGUgPT0gbnVsbCA/IGVsZW1lbnQudHlwZSA6IHR5cGVvZiBlbGVtZW50LnR5cGUsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShlbGVtZW50Ll9vd25lcikpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIFNwZWNpYWwgY2FzZSBzdHJpbmcgdmFsdWVzXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50LnR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpbnN0YW5jZSA9IFJlYWN0TmF0aXZlQ29tcG9uZW50LmNyZWF0ZUludGVybmFsQ29tcG9uZW50KGVsZW1lbnQpO1xuICAgIH0gZWxzZSBpZiAoaXNJbnRlcm5hbENvbXBvbmVudFR5cGUoZWxlbWVudC50eXBlKSkge1xuICAgICAgLy8gVGhpcyBpcyB0ZW1wb3JhcmlseSBhdmFpbGFibGUgZm9yIGN1c3RvbSBjb21wb25lbnRzIHRoYXQgYXJlIG5vdCBzdHJpbmdcbiAgICAgIC8vIHJlcHJlc2VudGF0aW9ucy4gSS5lLiBBUlQuIE9uY2UgdGhvc2UgYXJlIHVwZGF0ZWQgdG8gdXNlIHRoZSBzdHJpbmdcbiAgICAgIC8vIHJlcHJlc2VudGF0aW9uLCB3ZSBjYW4gZHJvcCB0aGlzIGNvZGUgcGF0aC5cbiAgICAgIGluc3RhbmNlID0gbmV3IGVsZW1lbnQudHlwZShlbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zdGFuY2UgPSBuZXcgUmVhY3RDb21wb3NpdGVDb21wb25lbnRXcmFwcGVyKCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBub2RlID09PSAnc3RyaW5nJyB8fCB0eXBlb2Ygbm9kZSA9PT0gJ251bWJlcicpIHtcbiAgICBpbnN0YW5jZSA9IFJlYWN0TmF0aXZlQ29tcG9uZW50LmNyZWF0ZUluc3RhbmNlRm9yVGV4dChub2RlKTtcbiAgfSBlbHNlIHtcbiAgICAhZmFsc2UgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRW5jb3VudGVyZWQgaW52YWxpZCBSZWFjdCBub2RlIG9mIHR5cGUgJXMnLCB0eXBlb2Ygbm9kZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgaW5zdGFuY2UuY29uc3RydWN0ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBpbnN0YW5jZS5tb3VudENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgaW5zdGFuY2UucmVjZWl2ZUNvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgaW5zdGFuY2UudW5tb3VudENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJywgJ09ubHkgUmVhY3QgQ29tcG9uZW50cyBjYW4gYmUgbW91bnRlZC4nKSA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8vIFNldHMgdXAgdGhlIGluc3RhbmNlLiBUaGlzIGNhbiBwcm9iYWJseSBqdXN0IG1vdmUgaW50byB0aGUgY29uc3RydWN0b3Igbm93LlxuICBpbnN0YW5jZS5jb25zdHJ1Y3Qobm9kZSk7XG5cbiAgLy8gVGhlc2UgdHdvIGZpZWxkcyBhcmUgdXNlZCBieSB0aGUgRE9NIGFuZCBBUlQgZGlmZmluZyBhbGdvcml0aG1zXG4gIC8vIHJlc3BlY3RpdmVseS4gSW5zdGVhZCBvZiB1c2luZyBleHBhbmRvcyBvbiBjb21wb25lbnRzLCB3ZSBzaG91bGQgYmVcbiAgLy8gc3RvcmluZyB0aGUgc3RhdGUgbmVlZGVkIGJ5IHRoZSBkaWZmaW5nIGFsZ29yaXRobXMgZWxzZXdoZXJlLlxuICBpbnN0YW5jZS5fbW91bnRJbmRleCA9IDA7XG4gIGluc3RhbmNlLl9tb3VudEltYWdlID0gbnVsbDtcblxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGluc3RhbmNlLl9pc093bmVyTmVjZXNzYXJ5ID0gZmFsc2U7XG4gICAgaW5zdGFuY2UuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyID0gZmFsc2U7XG4gIH1cblxuICAvLyBJbnRlcm5hbCBpbnN0YW5jZXMgc2hvdWxkIGZ1bGx5IGNvbnN0cnVjdGVkIGF0IHRoaXMgcG9pbnQsIHNvIHRoZXkgc2hvdWxkXG4gIC8vIG5vdCBnZXQgYW55IG5ldyBmaWVsZHMgYWRkZWQgdG8gdGhlbSBhdCB0aGlzIHBvaW50LlxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChPYmplY3QucHJldmVudEV4dGVuc2lvbnMpIHtcbiAgICAgIE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyhpbnN0YW5jZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGlzRXZlbnRTdXBwb3J0ZWRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciB1c2VIYXNGZWF0dXJlO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICB1c2VIYXNGZWF0dXJlID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24gJiYgZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSAmJlxuICAvLyBhbHdheXMgcmV0dXJucyB0cnVlIGluIG5ld2VyIGJyb3dzZXJzIGFzIHBlciB0aGUgc3RhbmRhcmQuXG4gIC8vIEBzZWUgaHR0cDovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1kb21pbXBsZW1lbnRhdGlvbi1oYXNmZWF0dXJlXG4gIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoJycsICcnKSAhPT0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYW4gZXZlbnQgaXMgc3VwcG9ydGVkIGluIHRoZSBjdXJyZW50IGV4ZWN1dGlvbiBlbnZpcm9ubWVudC5cbiAqXG4gKiBOT1RFOiBUaGlzIHdpbGwgbm90IHdvcmsgY29ycmVjdGx5IGZvciBub24tZ2VuZXJpYyBldmVudHMgc3VjaCBhcyBgY2hhbmdlYCxcbiAqIGByZXNldGAsIGBsb2FkYCwgYGVycm9yYCwgYW5kIGBzZWxlY3RgLlxuICpcbiAqIEJvcnJvd3MgZnJvbSBNb2Rlcm5penIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVN1ZmZpeCBFdmVudCBuYW1lLCBlLmcuIFwiY2xpY2tcIi5cbiAqIEBwYXJhbSB7P2Jvb2xlYW59IGNhcHR1cmUgQ2hlY2sgaWYgdGhlIGNhcHR1cmUgcGhhc2UgaXMgc3VwcG9ydGVkLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgc3VwcG9ydGVkLlxuICogQGludGVybmFsXG4gKiBAbGljZW5zZSBNb2Rlcm5penIgMy4wLjBwcmUgKEN1c3RvbSBCdWlsZCkgfCBNSVRcbiAqL1xuZnVuY3Rpb24gaXNFdmVudFN1cHBvcnRlZChldmVudE5hbWVTdWZmaXgsIGNhcHR1cmUpIHtcbiAgaWYgKCFFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gfHwgY2FwdHVyZSAmJiAhKCdhZGRFdmVudExpc3RlbmVyJyBpbiBkb2N1bWVudCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgZXZlbnROYW1lID0gJ29uJyArIGV2ZW50TmFtZVN1ZmZpeDtcbiAgdmFyIGlzU3VwcG9ydGVkID0gKGV2ZW50TmFtZSBpbiBkb2N1bWVudCk7XG5cbiAgaWYgKCFpc1N1cHBvcnRlZCkge1xuICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoZXZlbnROYW1lLCAncmV0dXJuOycpO1xuICAgIGlzU3VwcG9ydGVkID0gdHlwZW9mIGVsZW1lbnRbZXZlbnROYW1lXSA9PT0gJ2Z1bmN0aW9uJztcbiAgfVxuXG4gIGlmICghaXNTdXBwb3J0ZWQgJiYgdXNlSGFzRmVhdHVyZSAmJiBldmVudE5hbWVTdWZmaXggPT09ICd3aGVlbCcpIHtcbiAgICAvLyBUaGlzIGlzIHRoZSBvbmx5IHdheSB0byB0ZXN0IHN1cHBvcnQgZm9yIHRoZSBgd2hlZWxgIGV2ZW50IGluIElFOSsuXG4gICAgaXNTdXBwb3J0ZWQgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCdFdmVudHMud2hlZWwnLCAnMy4wJyk7XG4gIH1cblxuICByZXR1cm4gaXNTdXBwb3J0ZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNFdmVudFN1cHBvcnRlZDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaXNUZXh0SW5wdXRFbGVtZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBzZWUgaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvdGhlLWlucHV0LWVsZW1lbnQuaHRtbCNpbnB1dC10eXBlLWF0dHItc3VtbWFyeVxuICovXG52YXIgc3VwcG9ydGVkSW5wdXRUeXBlcyA9IHtcbiAgJ2NvbG9yJzogdHJ1ZSxcbiAgJ2RhdGUnOiB0cnVlLFxuICAnZGF0ZXRpbWUnOiB0cnVlLFxuICAnZGF0ZXRpbWUtbG9jYWwnOiB0cnVlLFxuICAnZW1haWwnOiB0cnVlLFxuICAnbW9udGgnOiB0cnVlLFxuICAnbnVtYmVyJzogdHJ1ZSxcbiAgJ3Bhc3N3b3JkJzogdHJ1ZSxcbiAgJ3JhbmdlJzogdHJ1ZSxcbiAgJ3NlYXJjaCc6IHRydWUsXG4gICd0ZWwnOiB0cnVlLFxuICAndGV4dCc6IHRydWUsXG4gICd0aW1lJzogdHJ1ZSxcbiAgJ3VybCc6IHRydWUsXG4gICd3ZWVrJzogdHJ1ZVxufTtcblxuZnVuY3Rpb24gaXNUZXh0SW5wdXRFbGVtZW50KGVsZW0pIHtcbiAgdmFyIG5vZGVOYW1lID0gZWxlbSAmJiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIG5vZGVOYW1lICYmIChub2RlTmFtZSA9PT0gJ2lucHV0JyAmJiBzdXBwb3J0ZWRJbnB1dFR5cGVzW2VsZW0udHlwZV0gfHwgbm9kZU5hbWUgPT09ICd0ZXh0YXJlYScpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzVGV4dElucHV0RWxlbWVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgb25seUNoaWxkXG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBmaXJzdCBjaGlsZCBpbiBhIGNvbGxlY3Rpb24gb2YgY2hpbGRyZW4gYW5kIHZlcmlmaWVzIHRoYXQgdGhlcmVcbiAqIGlzIG9ubHkgb25lIGNoaWxkIGluIHRoZSBjb2xsZWN0aW9uLiBUaGUgY3VycmVudCBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzXG4gKiBmdW5jdGlvbiBhc3N1bWVzIHRoYXQgYSBzaW5nbGUgY2hpbGQgZ2V0cyBwYXNzZWQgd2l0aG91dCBhIHdyYXBwZXIsIGJ1dCB0aGVcbiAqIHB1cnBvc2Ugb2YgdGhpcyBoZWxwZXIgZnVuY3Rpb24gaXMgdG8gYWJzdHJhY3QgYXdheSB0aGUgcGFydGljdWxhciBzdHJ1Y3R1cmVcbiAqIG9mIGNoaWxkcmVuLlxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gY2hpbGRyZW4gQ2hpbGQgY29sbGVjdGlvbiBzdHJ1Y3R1cmUuXG4gKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gVGhlIGZpcnN0IGFuZCBvbmx5IGBSZWFjdENvbXBvbmVudGAgY29udGFpbmVkIGluIHRoZVxuICogc3RydWN0dXJlLlxuICovXG5mdW5jdGlvbiBvbmx5Q2hpbGQoY2hpbGRyZW4pIHtcbiAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZHJlbikgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnb25seUNoaWxkIG11c3QgYmUgcGFzc2VkIGEgY2hpbGRyZW4gd2l0aCBleGFjdGx5IG9uZSBjaGlsZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHJldHVybiBjaGlsZHJlbjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvbmx5Q2hpbGQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyID0gcmVxdWlyZSgnLi9lc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXInKTtcblxuLyoqXG4gKiBFc2NhcGVzIGF0dHJpYnV0ZSB2YWx1ZSB0byBwcmV2ZW50IHNjcmlwdGluZyBhdHRhY2tzLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gZXNjYXBlLlxuICogQHJldHVybiB7c3RyaW5nfSBBbiBlc2NhcGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIodmFsdWUpIHtcbiAgcmV0dXJuICdcIicgKyBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIodmFsdWUpICsgJ1wiJztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3NlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4qIEBwcm92aWRlc01vZHVsZSByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lclxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0TW91bnQucmVuZGVyU3VidHJlZUludG9Db250YWluZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHNldElubmVySFRNTFxuICovXG5cbi8qIGdsb2JhbHMgTVNBcHAgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgV0hJVEVTUEFDRV9URVNUID0gL15bIFxcclxcblxcdFxcZl0vO1xudmFyIE5PTlZJU0lCTEVfVEVTVCA9IC88KCEtLXxsaW5rfG5vc2NyaXB0fG1ldGF8c2NyaXB0fHN0eWxlKVsgXFxyXFxuXFx0XFxmXFwvPl0vO1xuXG4vKipcbiAqIFNldCB0aGUgaW5uZXJIVE1MIHByb3BlcnR5IG9mIGEgbm9kZSwgZW5zdXJpbmcgdGhhdCB3aGl0ZXNwYWNlIGlzIHByZXNlcnZlZFxuICogZXZlbiBpbiBJRTguXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gKiBAcGFyYW0ge3N0cmluZ30gaHRtbFxuICogQGludGVybmFsXG4gKi9cbnZhciBzZXRJbm5lckhUTUwgPSBmdW5jdGlvbiAobm9kZSwgaHRtbCkge1xuICBub2RlLmlubmVySFRNTCA9IGh0bWw7XG59O1xuXG4vLyBXaW44IGFwcHM6IEFsbG93IGFsbCBodG1sIHRvIGJlIGluc2VydGVkXG5pZiAodHlwZW9mIE1TQXBwICE9PSAndW5kZWZpbmVkJyAmJiBNU0FwcC5leGVjVW5zYWZlTG9jYWxGdW5jdGlvbikge1xuICBzZXRJbm5lckhUTUwgPSBmdW5jdGlvbiAobm9kZSwgaHRtbCkge1xuICAgIE1TQXBwLmV4ZWNVbnNhZmVMb2NhbEZ1bmN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIG5vZGUuaW5uZXJIVE1MID0gaHRtbDtcbiAgICB9KTtcbiAgfTtcbn1cblxuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICAvLyBJRTg6IFdoZW4gdXBkYXRpbmcgYSBqdXN0IGNyZWF0ZWQgbm9kZSB3aXRoIGlubmVySFRNTCBvbmx5IGxlYWRpbmdcbiAgLy8gd2hpdGVzcGFjZSBpcyByZW1vdmVkLiBXaGVuIHVwZGF0aW5nIGFuIGV4aXN0aW5nIG5vZGUgd2l0aCBpbm5lckhUTUxcbiAgLy8gd2hpdGVzcGFjZSBpbiByb290IFRleHROb2RlcyBpcyBhbHNvIGNvbGxhcHNlZC5cbiAgLy8gQHNlZSBxdWlya3Ntb2RlLm9yZy9idWdyZXBvcnRzL2FyY2hpdmVzLzIwMDQvMTEvaW5uZXJodG1sX2FuZF90Lmh0bWxcblxuICAvLyBGZWF0dXJlIGRldGVjdGlvbjsgb25seSBJRTggaXMga25vd24gdG8gYmVoYXZlIGltcHJvcGVybHkgbGlrZSB0aGlzLlxuICB2YXIgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdGVzdEVsZW1lbnQuaW5uZXJIVE1MID0gJyAnO1xuICBpZiAodGVzdEVsZW1lbnQuaW5uZXJIVE1MID09PSAnJykge1xuICAgIHNldElubmVySFRNTCA9IGZ1bmN0aW9uIChub2RlLCBodG1sKSB7XG4gICAgICAvLyBNYWdpYyB0aGVvcnk6IElFOCBzdXBwb3NlZGx5IGRpZmZlcmVudGlhdGVzIGJldHdlZW4gYWRkZWQgYW5kIHVwZGF0ZWRcbiAgICAgIC8vIG5vZGVzIHdoZW4gcHJvY2Vzc2luZyBpbm5lckhUTUwsIGlubmVySFRNTCBvbiB1cGRhdGVkIG5vZGVzIHN1ZmZlcnNcbiAgICAgIC8vIGZyb20gd29yc2Ugd2hpdGVzcGFjZSBiZWhhdmlvci4gUmUtYWRkaW5nIGEgbm9kZSBsaWtlIHRoaXMgdHJpZ2dlcnNcbiAgICAgIC8vIHRoZSBpbml0aWFsIGFuZCBtb3JlIGZhdm9yYWJsZSB3aGl0ZXNwYWNlIGJlaGF2aW9yLlxuICAgICAgLy8gVE9ETzogV2hhdCB0byBkbyBvbiBhIGRldGFjaGVkIG5vZGU/XG4gICAgICBpZiAobm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobm9kZSwgbm9kZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdlIGFsc28gaW1wbGVtZW50IGEgd29ya2Fyb3VuZCBmb3Igbm9uLXZpc2libGUgdGFncyBkaXNhcHBlYXJpbmcgaW50b1xuICAgICAgLy8gdGhpbiBhaXIgb24gSUU4LCB0aGlzIG9ubHkgaGFwcGVucyBpZiB0aGVyZSBpcyBubyB2aXNpYmxlIHRleHRcbiAgICAgIC8vIGluLWZyb250IG9mIHRoZSBub24tdmlzaWJsZSB0YWdzLiBQaWdneWJhY2sgb24gdGhlIHdoaXRlc3BhY2UgZml4XG4gICAgICAvLyBhbmQgc2ltcGx5IGNoZWNrIGlmIGFueSBub24tdmlzaWJsZSB0YWdzIGFwcGVhciBpbiB0aGUgc291cmNlLlxuICAgICAgaWYgKFdISVRFU1BBQ0VfVEVTVC50ZXN0KGh0bWwpIHx8IGh0bWxbMF0gPT09ICc8JyAmJiBOT05WSVNJQkxFX1RFU1QudGVzdChodG1sKSkge1xuICAgICAgICAvLyBSZWNvdmVyIGxlYWRpbmcgd2hpdGVzcGFjZSBieSB0ZW1wb3JhcmlseSBwcmVwZW5kaW5nIGFueSBjaGFyYWN0ZXIuXG4gICAgICAgIC8vIFxcdUZFRkYgaGFzIHRoZSBwb3RlbnRpYWwgYWR2YW50YWdlIG9mIGJlaW5nIHplcm8td2lkdGgvaW52aXNpYmxlLlxuICAgICAgICAvLyBVZ2xpZnlKUyBkcm9wcyBVK0ZFRkYgY2hhcnMgd2hlbiBwYXJzaW5nLCBzbyB1c2UgU3RyaW5nLmZyb21DaGFyQ29kZVxuICAgICAgICAvLyBpbiBob3BlcyB0aGF0IHRoaXMgaXMgcHJlc2VydmVkIGV2ZW4gaWYgXCJcXHVGRUZGXCIgaXMgdHJhbnNmb3JtZWQgdG9cbiAgICAgICAgLy8gdGhlIGFjdHVhbCBVbmljb2RlIGNoYXJhY3RlciAoYnkgQmFiZWwsIGZvciBleGFtcGxlKS5cbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21pc2hvby9VZ2xpZnlKUzIvYmxvYi92Mi40LjIwL2xpYi9wYXJzZS5qcyNMMjE2XG4gICAgICAgIG5vZGUuaW5uZXJIVE1MID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEZFRkYpICsgaHRtbDtcblxuICAgICAgICAvLyBkZWxldGVEYXRhIGxlYXZlcyBhbiBlbXB0eSBgVGV4dE5vZGVgIHdoaWNoIG9mZnNldHMgdGhlIGluZGV4IG9mIGFsbFxuICAgICAgICAvLyBjaGlsZHJlbi4gRGVmaW5pdGVseSB3YW50IHRvIGF2b2lkIHRoaXMuXG4gICAgICAgIHZhciB0ZXh0Tm9kZSA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgICAgICAgaWYgKHRleHROb2RlLmRhdGEubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZCh0ZXh0Tm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGV4dE5vZGUuZGVsZXRlRGF0YSgwLCAxKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRJbm5lckhUTUw7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHNldFRleHRDb250ZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xudmFyIGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlciA9IHJlcXVpcmUoJy4vZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyJyk7XG52YXIgc2V0SW5uZXJIVE1MID0gcmVxdWlyZSgnLi9zZXRJbm5lckhUTUwnKTtcblxuLyoqXG4gKiBTZXQgdGhlIHRleHRDb250ZW50IHByb3BlcnR5IG9mIGEgbm9kZSwgZW5zdXJpbmcgdGhhdCB3aGl0ZXNwYWNlIGlzIHByZXNlcnZlZFxuICogZXZlbiBpbiBJRTguIGlubmVyVGV4dCBpcyBhIHBvb3Igc3Vic3RpdHV0ZSBmb3IgdGV4dENvbnRlbnQgYW5kLCBhbW9uZyBtYW55XG4gKiBpc3N1ZXMsIGluc2VydHMgPGJyPiBpbnN0ZWFkIG9mIHRoZSBsaXRlcmFsIG5ld2xpbmUgY2hhcnMuIGlubmVySFRNTCBiZWhhdmVzXG4gKiBhcyBpdCBzaG91bGQuXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICogQGludGVybmFsXG4gKi9cbnZhciBzZXRUZXh0Q29udGVudCA9IGZ1bmN0aW9uIChub2RlLCB0ZXh0KSB7XG4gIG5vZGUudGV4dENvbnRlbnQgPSB0ZXh0O1xufTtcblxuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICBpZiAoISgndGV4dENvbnRlbnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkpIHtcbiAgICBzZXRUZXh0Q29udGVudCA9IGZ1bmN0aW9uIChub2RlLCB0ZXh0KSB7XG4gICAgICBzZXRJbm5lckhUTUwobm9kZSwgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKHRleHQpKTtcbiAgICB9O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0VGV4dENvbnRlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBHaXZlbiBhIGBwcmV2RWxlbWVudGAgYW5kIGBuZXh0RWxlbWVudGAsIGRldGVybWluZXMgaWYgdGhlIGV4aXN0aW5nXG4gKiBpbnN0YW5jZSBzaG91bGQgYmUgdXBkYXRlZCBhcyBvcHBvc2VkIHRvIGJlaW5nIGRlc3Ryb3llZCBvciByZXBsYWNlZCBieSBhIG5ld1xuICogaW5zdGFuY2UuIEJvdGggYXJndW1lbnRzIGFyZSBlbGVtZW50cy4gVGhpcyBlbnN1cmVzIHRoYXQgdGhpcyBsb2dpYyBjYW5cbiAqIG9wZXJhdGUgb24gc3RhdGVsZXNzIHRyZWVzIHdpdGhvdXQgYW55IGJhY2tpbmcgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2RWxlbWVudFxuICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0RWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXhpc3RpbmcgaW5zdGFuY2Ugc2hvdWxkIGJlIHVwZGF0ZWQuXG4gKiBAcHJvdGVjdGVkXG4gKi9cbmZ1bmN0aW9uIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50KHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCkge1xuICB2YXIgcHJldkVtcHR5ID0gcHJldkVsZW1lbnQgPT09IG51bGwgfHwgcHJldkVsZW1lbnQgPT09IGZhbHNlO1xuICB2YXIgbmV4dEVtcHR5ID0gbmV4dEVsZW1lbnQgPT09IG51bGwgfHwgbmV4dEVsZW1lbnQgPT09IGZhbHNlO1xuICBpZiAocHJldkVtcHR5IHx8IG5leHRFbXB0eSkge1xuICAgIHJldHVybiBwcmV2RW1wdHkgPT09IG5leHRFbXB0eTtcbiAgfVxuXG4gIHZhciBwcmV2VHlwZSA9IHR5cGVvZiBwcmV2RWxlbWVudDtcbiAgdmFyIG5leHRUeXBlID0gdHlwZW9mIG5leHRFbGVtZW50O1xuICBpZiAocHJldlR5cGUgPT09ICdzdHJpbmcnIHx8IHByZXZUeXBlID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBuZXh0VHlwZSA9PT0gJ3N0cmluZycgfHwgbmV4dFR5cGUgPT09ICdudW1iZXInO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXh0VHlwZSA9PT0gJ29iamVjdCcgJiYgcHJldkVsZW1lbnQudHlwZSA9PT0gbmV4dEVsZW1lbnQudHlwZSAmJiBwcmV2RWxlbWVudC5rZXkgPT09IG5leHRFbGVtZW50LmtleTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHRyYXZlcnNlQWxsQ2hpbGRyZW5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlSGFuZGxlcycpO1xuXG52YXIgZ2V0SXRlcmF0b3JGbiA9IHJlcXVpcmUoJy4vZ2V0SXRlcmF0b3JGbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBTRVBBUkFUT1IgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5TRVBBUkFUT1I7XG52YXIgU1VCU0VQQVJBVE9SID0gJzonO1xuXG4vKipcbiAqIFRPRE86IFRlc3QgdGhhdCBhIHNpbmdsZSBjaGlsZCBhbmQgYW4gYXJyYXkgd2l0aCBvbmUgaXRlbSBoYXZlIHRoZSBzYW1lIGtleVxuICogcGF0dGVybi5cbiAqL1xuXG52YXIgdXNlclByb3ZpZGVkS2V5RXNjYXBlckxvb2t1cCA9IHtcbiAgJz0nOiAnPTAnLFxuICAnLic6ICc9MScsXG4gICc6JzogJz0yJ1xufTtcblxudmFyIHVzZXJQcm92aWRlZEtleUVzY2FwZVJlZ2V4ID0gL1s9LjpdL2c7XG5cbnZhciBkaWRXYXJuQWJvdXRNYXBzID0gZmFsc2U7XG5cbmZ1bmN0aW9uIHVzZXJQcm92aWRlZEtleUVzY2FwZXIobWF0Y2gpIHtcbiAgcmV0dXJuIHVzZXJQcm92aWRlZEtleUVzY2FwZXJMb29rdXBbbWF0Y2hdO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEga2V5IHN0cmluZyB0aGF0IGlkZW50aWZpZXMgYSBjb21wb25lbnQgd2l0aGluIGEgc2V0LlxuICpcbiAqIEBwYXJhbSB7Kn0gY29tcG9uZW50IEEgY29tcG9uZW50IHRoYXQgY291bGQgY29udGFpbiBhIG1hbnVhbCBrZXkuXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggdGhhdCBpcyB1c2VkIGlmIGEgbWFudWFsIGtleSBpcyBub3QgcHJvdmlkZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldENvbXBvbmVudEtleShjb21wb25lbnQsIGluZGV4KSB7XG4gIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50LmtleSAhPSBudWxsKSB7XG4gICAgLy8gRXhwbGljaXQga2V5XG4gICAgcmV0dXJuIHdyYXBVc2VyUHJvdmlkZWRLZXkoY29tcG9uZW50LmtleSk7XG4gIH1cbiAgLy8gSW1wbGljaXQga2V5IGRldGVybWluZWQgYnkgdGhlIGluZGV4IGluIHRoZSBzZXRcbiAgcmV0dXJuIGluZGV4LnRvU3RyaW5nKDM2KTtcbn1cblxuLyoqXG4gKiBFc2NhcGUgYSBjb21wb25lbnQga2V5IHNvIHRoYXQgaXQgaXMgc2FmZSB0byB1c2UgaW4gYSByZWFjdGlkLlxuICpcbiAqIEBwYXJhbSB7Kn0gdGV4dCBDb21wb25lbnQga2V5IHRvIGJlIGVzY2FwZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEFuIGVzY2FwZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBlc2NhcGVVc2VyUHJvdmlkZWRLZXkodGV4dCkge1xuICByZXR1cm4gKCcnICsgdGV4dCkucmVwbGFjZSh1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCwgdXNlclByb3ZpZGVkS2V5RXNjYXBlcik7XG59XG5cbi8qKlxuICogV3JhcCBhIGBrZXlgIHZhbHVlIGV4cGxpY2l0bHkgcHJvdmlkZWQgYnkgdGhlIHVzZXIgdG8gZGlzdGluZ3Vpc2ggaXQgZnJvbVxuICogaW1wbGljaXRseS1nZW5lcmF0ZWQga2V5cyBnZW5lcmF0ZWQgYnkgYSBjb21wb25lbnQncyBpbmRleCBpbiBpdHMgcGFyZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVmFsdWUgb2YgYSB1c2VyLXByb3ZpZGVkIGBrZXlgIGF0dHJpYnV0ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiB3cmFwVXNlclByb3ZpZGVkS2V5KGtleSkge1xuICByZXR1cm4gJyQnICsgZXNjYXBlVXNlclByb3ZpZGVkS2V5KGtleSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcGFyYW0geyFzdHJpbmd9IG5hbWVTb0ZhciBOYW1lIG9mIHRoZSBrZXkgcGF0aCBzbyBmYXIuXG4gKiBAcGFyYW0geyFmdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2sgdG8gaW52b2tlIHdpdGggZWFjaCBjaGlsZCBmb3VuZC5cbiAqIEBwYXJhbSB7Pyp9IHRyYXZlcnNlQ29udGV4dCBVc2VkIHRvIHBhc3MgaW5mb3JtYXRpb24gdGhyb3VnaG91dCB0aGUgdHJhdmVyc2FsXG4gKiBwcm9jZXNzLlxuICogQHJldHVybiB7IW51bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbiBpbiB0aGlzIHN1YnRyZWUuXG4gKi9cbmZ1bmN0aW9uIHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkcmVuLCBuYW1lU29GYXIsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgY2hpbGRyZW47XG5cbiAgaWYgKHR5cGUgPT09ICd1bmRlZmluZWQnIHx8IHR5cGUgPT09ICdib29sZWFuJykge1xuICAgIC8vIEFsbCBvZiB0aGUgYWJvdmUgYXJlIHBlcmNlaXZlZCBhcyBudWxsLlxuICAgIGNoaWxkcmVuID0gbnVsbDtcbiAgfVxuXG4gIGlmIChjaGlsZHJlbiA9PT0gbnVsbCB8fCB0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBlID09PSAnbnVtYmVyJyB8fCBSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoY2hpbGRyZW4pKSB7XG4gICAgY2FsbGJhY2sodHJhdmVyc2VDb250ZXh0LCBjaGlsZHJlbixcbiAgICAvLyBJZiBpdCdzIHRoZSBvbmx5IGNoaWxkLCB0cmVhdCB0aGUgbmFtZSBhcyBpZiBpdCB3YXMgd3JhcHBlZCBpbiBhbiBhcnJheVxuICAgIC8vIHNvIHRoYXQgaXQncyBjb25zaXN0ZW50IGlmIHRoZSBudW1iZXIgb2YgY2hpbGRyZW4gZ3Jvd3MuXG4gICAgbmFtZVNvRmFyID09PSAnJyA/IFNFUEFSQVRPUiArIGdldENvbXBvbmVudEtleShjaGlsZHJlbiwgMCkgOiBuYW1lU29GYXIpO1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgdmFyIGNoaWxkO1xuICB2YXIgbmV4dE5hbWU7XG4gIHZhciBzdWJ0cmVlQ291bnQgPSAwOyAvLyBDb3VudCBvZiBjaGlsZHJlbiBmb3VuZCBpbiB0aGUgY3VycmVudCBzdWJ0cmVlLlxuICB2YXIgbmV4dE5hbWVQcmVmaXggPSBuYW1lU29GYXIgPT09ICcnID8gU0VQQVJBVE9SIDogbmFtZVNvRmFyICsgU1VCU0VQQVJBVE9SO1xuXG4gIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICBuZXh0TmFtZSA9IG5leHROYW1lUHJlZml4ICsgZ2V0Q29tcG9uZW50S2V5KGNoaWxkLCBpKTtcbiAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4oY2hpbGRyZW4pO1xuICAgIGlmIChpdGVyYXRvckZuKSB7XG4gICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvckZuLmNhbGwoY2hpbGRyZW4pO1xuICAgICAgdmFyIHN0ZXA7XG4gICAgICBpZiAoaXRlcmF0b3JGbiAhPT0gY2hpbGRyZW4uZW50cmllcykge1xuICAgICAgICB2YXIgaWkgPSAwO1xuICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgY2hpbGQgPSBzdGVwLnZhbHVlO1xuICAgICAgICAgIG5leHROYW1lID0gbmV4dE5hbWVQcmVmaXggKyBnZXRDb21wb25lbnRLZXkoY2hpbGQsIGlpKyspO1xuICAgICAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGRpZFdhcm5BYm91dE1hcHMsICdVc2luZyBNYXBzIGFzIGNoaWxkcmVuIGlzIG5vdCB5ZXQgZnVsbHkgc3VwcG9ydGVkLiBJdCBpcyBhbiAnICsgJ2V4cGVyaW1lbnRhbCBmZWF0dXJlIHRoYXQgbWlnaHQgYmUgcmVtb3ZlZC4gQ29udmVydCBpdCB0byBhICcgKyAnc2VxdWVuY2UgLyBpdGVyYWJsZSBvZiBrZXllZCBSZWFjdEVsZW1lbnRzIGluc3RlYWQuJykgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgZGlkV2FybkFib3V0TWFwcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSXRlcmF0b3Igd2lsbCBwcm92aWRlIGVudHJ5IFtrLHZdIHR1cGxlcyByYXRoZXIgdGhhbiB2YWx1ZXMuXG4gICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICB2YXIgZW50cnkgPSBzdGVwLnZhbHVlO1xuICAgICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgICAgY2hpbGQgPSBlbnRyeVsxXTtcbiAgICAgICAgICAgIG5leHROYW1lID0gbmV4dE5hbWVQcmVmaXggKyB3cmFwVXNlclByb3ZpZGVkS2V5KGVudHJ5WzBdKSArIFNVQlNFUEFSQVRPUiArIGdldENvbXBvbmVudEtleShjaGlsZCwgMCk7XG4gICAgICAgICAgICBzdWJ0cmVlQ291bnQgKz0gdHJhdmVyc2VBbGxDaGlsZHJlbkltcGwoY2hpbGQsIG5leHROYW1lLCBjYWxsYmFjaywgdHJhdmVyc2VDb250ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICB2YXIgYWRkZW5kdW0gPSAnJztcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGFkZGVuZHVtID0gJyBJZiB5b3UgbWVhbnQgdG8gcmVuZGVyIGEgY29sbGVjdGlvbiBvZiBjaGlsZHJlbiwgdXNlIGFuIGFycmF5ICcgKyAnaW5zdGVhZCBvciB3cmFwIHRoZSBvYmplY3QgdXNpbmcgY3JlYXRlRnJhZ21lbnQob2JqZWN0KSBmcm9tIHRoZSAnICsgJ1JlYWN0IGFkZC1vbnMuJztcbiAgICAgICAgaWYgKGNoaWxkcmVuLl9pc1JlYWN0RWxlbWVudCkge1xuICAgICAgICAgIGFkZGVuZHVtID0gJyBJdCBsb29rcyBsaWtlIHlvdVxcJ3JlIHVzaW5nIGFuIGVsZW1lbnQgY3JlYXRlZCBieSBhIGRpZmZlcmVudCAnICsgJ3ZlcnNpb24gb2YgUmVhY3QuIE1ha2Ugc3VyZSB0byB1c2Ugb25seSBvbmUgY29weSBvZiBSZWFjdC4nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG4gICAgICAgICAgdmFyIG5hbWUgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKTtcbiAgICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgICAgYWRkZW5kdW0gKz0gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIGNoaWxkcmVuU3RyaW5nID0gU3RyaW5nKGNoaWxkcmVuKTtcbiAgICAgICFmYWxzZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdPYmplY3RzIGFyZSBub3QgdmFsaWQgYXMgYSBSZWFjdCBjaGlsZCAoZm91bmQ6ICVzKS4lcycsIGNoaWxkcmVuU3RyaW5nID09PSAnW29iamVjdCBPYmplY3RdJyA/ICdvYmplY3Qgd2l0aCBrZXlzIHsnICsgT2JqZWN0LmtleXMoY2hpbGRyZW4pLmpvaW4oJywgJykgKyAnfScgOiBjaGlsZHJlblN0cmluZywgYWRkZW5kdW0pIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3VidHJlZUNvdW50O1xufVxuXG4vKipcbiAqIFRyYXZlcnNlcyBjaGlsZHJlbiB0aGF0IGFyZSB0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmAsIGJ1dFxuICogbWlnaHQgYWxzbyBiZSBzcGVjaWZpZWQgdGhyb3VnaCBhdHRyaWJ1dGVzOlxuICpcbiAqIC0gYHRyYXZlcnNlQWxsQ2hpbGRyZW4odGhpcy5wcm9wcy5jaGlsZHJlbiwgLi4uKWBcbiAqIC0gYHRyYXZlcnNlQWxsQ2hpbGRyZW4odGhpcy5wcm9wcy5sZWZ0UGFuZWxDaGlsZHJlbiwgLi4uKWBcbiAqXG4gKiBUaGUgYHRyYXZlcnNlQ29udGV4dGAgaXMgYW4gb3B0aW9uYWwgYXJndW1lbnQgdGhhdCBpcyBwYXNzZWQgdGhyb3VnaCB0aGVcbiAqIGVudGlyZSB0cmF2ZXJzYWwuIEl0IGNhbiBiZSB1c2VkIHRvIHN0b3JlIGFjY3VtdWxhdGlvbnMgb3IgYW55dGhpbmcgZWxzZSB0aGF0XG4gKiB0aGUgY2FsbGJhY2sgbWlnaHQgZmluZCByZWxldmFudC5cbiAqXG4gKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIG9iamVjdC5cbiAqIEBwYXJhbSB7IWZ1bmN0aW9ufSBjYWxsYmFjayBUbyBpbnZva2UgdXBvbiB0cmF2ZXJzaW5nIGVhY2ggY2hpbGQuXG4gKiBAcGFyYW0gez8qfSB0cmF2ZXJzZUNvbnRleHQgQ29udGV4dCBmb3IgdHJhdmVyc2FsLlxuICogQHJldHVybiB7IW51bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbiBpbiB0aGlzIHN1YnRyZWUuXG4gKi9cbmZ1bmN0aW9uIHRyYXZlcnNlQWxsQ2hpbGRyZW4oY2hpbGRyZW4sIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpIHtcbiAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHJldHVybiB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZHJlbiwgJycsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRyYXZlcnNlQWxsQ2hpbGRyZW47IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSB2YWxpZGF0ZURPTU5lc3RpbmdcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciB2YWxpZGF0ZURPTU5lc3RpbmcgPSBlbXB0eUZ1bmN0aW9uO1xuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAvLyBUaGlzIHZhbGlkYXRpb24gY29kZSB3YXMgd3JpdHRlbiBiYXNlZCBvbiB0aGUgSFRNTDUgcGFyc2luZyBzcGVjOlxuICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNoYXMtYW4tZWxlbWVudC1pbi1zY29wZVxuICAvL1xuICAvLyBOb3RlOiB0aGlzIGRvZXMgbm90IGNhdGNoIGFsbCBpbnZhbGlkIG5lc3RpbmcsIG5vciBkb2VzIGl0IHRyeSB0byAoYXMgaXQnc1xuICAvLyBub3QgY2xlYXIgd2hhdCBwcmFjdGljYWwgYmVuZWZpdCBkb2luZyBzbyBwcm92aWRlcyk7IGluc3RlYWQsIHdlIHdhcm4gb25seVxuICAvLyBmb3IgY2FzZXMgd2hlcmUgdGhlIHBhcnNlciB3aWxsIGdpdmUgYSBwYXJzZSB0cmVlIGRpZmZlcmluZyBmcm9tIHdoYXQgUmVhY3RcbiAgLy8gaW50ZW5kZWQuIEZvciBleGFtcGxlLCA8Yj48ZGl2PjwvZGl2PjwvYj4gaXMgaW52YWxpZCBidXQgd2UgZG9uJ3Qgd2FyblxuICAvLyBiZWNhdXNlIGl0IHN0aWxsIHBhcnNlcyBjb3JyZWN0bHk7IHdlIGRvIHdhcm4gZm9yIG90aGVyIGNhc2VzIGxpa2UgbmVzdGVkXG4gIC8vIDxwPiB0YWdzIHdoZXJlIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHNlY29uZCBlbGVtZW50IGltcGxpY2l0bHkgY2xvc2VzIHRoZVxuICAvLyBmaXJzdCwgY2F1c2luZyBhIGNvbmZ1c2luZyBtZXNzLlxuXG4gIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3NwZWNpYWxcbiAgdmFyIHNwZWNpYWxUYWdzID0gWydhZGRyZXNzJywgJ2FwcGxldCcsICdhcmVhJywgJ2FydGljbGUnLCAnYXNpZGUnLCAnYmFzZScsICdiYXNlZm9udCcsICdiZ3NvdW5kJywgJ2Jsb2NrcXVvdGUnLCAnYm9keScsICdicicsICdidXR0b24nLCAnY2FwdGlvbicsICdjZW50ZXInLCAnY29sJywgJ2NvbGdyb3VwJywgJ2RkJywgJ2RldGFpbHMnLCAnZGlyJywgJ2RpdicsICdkbCcsICdkdCcsICdlbWJlZCcsICdmaWVsZHNldCcsICdmaWdjYXB0aW9uJywgJ2ZpZ3VyZScsICdmb290ZXInLCAnZm9ybScsICdmcmFtZScsICdmcmFtZXNldCcsICdoMScsICdoMicsICdoMycsICdoNCcsICdoNScsICdoNicsICdoZWFkJywgJ2hlYWRlcicsICdoZ3JvdXAnLCAnaHInLCAnaHRtbCcsICdpZnJhbWUnLCAnaW1nJywgJ2lucHV0JywgJ2lzaW5kZXgnLCAnbGknLCAnbGluaycsICdsaXN0aW5nJywgJ21haW4nLCAnbWFycXVlZScsICdtZW51JywgJ21lbnVpdGVtJywgJ21ldGEnLCAnbmF2JywgJ25vZW1iZWQnLCAnbm9mcmFtZXMnLCAnbm9zY3JpcHQnLCAnb2JqZWN0JywgJ29sJywgJ3AnLCAncGFyYW0nLCAncGxhaW50ZXh0JywgJ3ByZScsICdzY3JpcHQnLCAnc2VjdGlvbicsICdzZWxlY3QnLCAnc291cmNlJywgJ3N0eWxlJywgJ3N1bW1hcnknLCAndGFibGUnLCAndGJvZHknLCAndGQnLCAndGVtcGxhdGUnLCAndGV4dGFyZWEnLCAndGZvb3QnLCAndGgnLCAndGhlYWQnLCAndGl0bGUnLCAndHInLCAndHJhY2snLCAndWwnLCAnd2JyJywgJ3htcCddO1xuXG4gIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI2hhcy1hbi1lbGVtZW50LWluLXNjb3BlXG4gIHZhciBpblNjb3BlVGFncyA9IFsnYXBwbGV0JywgJ2NhcHRpb24nLCAnaHRtbCcsICd0YWJsZScsICd0ZCcsICd0aCcsICdtYXJxdWVlJywgJ29iamVjdCcsICd0ZW1wbGF0ZScsXG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjaHRtbC1pbnRlZ3JhdGlvbi1wb2ludFxuICAvLyBUT0RPOiBEaXN0aW5ndWlzaCBieSBuYW1lc3BhY2UgaGVyZSAtLSBmb3IgPHRpdGxlPiwgaW5jbHVkaW5nIGl0IGhlcmVcbiAgLy8gZXJycyBvbiB0aGUgc2lkZSBvZiBmZXdlciB3YXJuaW5nc1xuICAnZm9yZWlnbk9iamVjdCcsICdkZXNjJywgJ3RpdGxlJ107XG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjaGFzLWFuLWVsZW1lbnQtaW4tYnV0dG9uLXNjb3BlXG4gIHZhciBidXR0b25TY29wZVRhZ3MgPSBpblNjb3BlVGFncy5jb25jYXQoWydidXR0b24nXSk7XG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjZ2VuZXJhdGUtaW1wbGllZC1lbmQtdGFnc1xuICB2YXIgaW1wbGllZEVuZFRhZ3MgPSBbJ2RkJywgJ2R0JywgJ2xpJywgJ29wdGlvbicsICdvcHRncm91cCcsICdwJywgJ3JwJywgJ3J0J107XG5cbiAgdmFyIGVtcHR5QW5jZXN0b3JJbmZvID0ge1xuICAgIHBhcmVudFRhZzogbnVsbCxcblxuICAgIGZvcm1UYWc6IG51bGwsXG4gICAgYVRhZ0luU2NvcGU6IG51bGwsXG4gICAgYnV0dG9uVGFnSW5TY29wZTogbnVsbCxcbiAgICBub2JyVGFnSW5TY29wZTogbnVsbCxcbiAgICBwVGFnSW5CdXR0b25TY29wZTogbnVsbCxcblxuICAgIGxpc3RJdGVtVGFnQXV0b2Nsb3Npbmc6IG51bGwsXG4gICAgZGxJdGVtVGFnQXV0b2Nsb3Npbmc6IG51bGxcbiAgfTtcblxuICB2YXIgdXBkYXRlZEFuY2VzdG9ySW5mbyA9IGZ1bmN0aW9uIChvbGRJbmZvLCB0YWcsIGluc3RhbmNlKSB7XG4gICAgdmFyIGFuY2VzdG9ySW5mbyA9IGFzc2lnbih7fSwgb2xkSW5mbyB8fCBlbXB0eUFuY2VzdG9ySW5mbyk7XG4gICAgdmFyIGluZm8gPSB7IHRhZzogdGFnLCBpbnN0YW5jZTogaW5zdGFuY2UgfTtcblxuICAgIGlmIChpblNjb3BlVGFncy5pbmRleE9mKHRhZykgIT09IC0xKSB7XG4gICAgICBhbmNlc3RvckluZm8uYVRhZ0luU2NvcGUgPSBudWxsO1xuICAgICAgYW5jZXN0b3JJbmZvLmJ1dHRvblRhZ0luU2NvcGUgPSBudWxsO1xuICAgICAgYW5jZXN0b3JJbmZvLm5vYnJUYWdJblNjb3BlID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGJ1dHRvblNjb3BlVGFncy5pbmRleE9mKHRhZykgIT09IC0xKSB7XG4gICAgICBhbmNlc3RvckluZm8ucFRhZ0luQnV0dG9uU2NvcGUgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNlZSBydWxlcyBmb3IgJ2xpJywgJ2RkJywgJ2R0JyBzdGFydCB0YWdzIGluXG4gICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWluYm9keVxuICAgIGlmIChzcGVjaWFsVGFncy5pbmRleE9mKHRhZykgIT09IC0xICYmIHRhZyAhPT0gJ2FkZHJlc3MnICYmIHRhZyAhPT0gJ2RpdicgJiYgdGFnICE9PSAncCcpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5saXN0SXRlbVRhZ0F1dG9jbG9zaW5nID0gbnVsbDtcbiAgICAgIGFuY2VzdG9ySW5mby5kbEl0ZW1UYWdBdXRvY2xvc2luZyA9IG51bGw7XG4gICAgfVxuXG4gICAgYW5jZXN0b3JJbmZvLnBhcmVudFRhZyA9IGluZm87XG5cbiAgICBpZiAodGFnID09PSAnZm9ybScpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5mb3JtVGFnID0gaW5mbztcbiAgICB9XG4gICAgaWYgKHRhZyA9PT0gJ2EnKSB7XG4gICAgICBhbmNlc3RvckluZm8uYVRhZ0luU2NvcGUgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnYnV0dG9uJykge1xuICAgICAgYW5jZXN0b3JJbmZvLmJ1dHRvblRhZ0luU2NvcGUgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnbm9icicpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5ub2JyVGFnSW5TY29wZSA9IGluZm87XG4gICAgfVxuICAgIGlmICh0YWcgPT09ICdwJykge1xuICAgICAgYW5jZXN0b3JJbmZvLnBUYWdJbkJ1dHRvblNjb3BlID0gaW5mbztcbiAgICB9XG4gICAgaWYgKHRhZyA9PT0gJ2xpJykge1xuICAgICAgYW5jZXN0b3JJbmZvLmxpc3RJdGVtVGFnQXV0b2Nsb3NpbmcgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnZGQnIHx8IHRhZyA9PT0gJ2R0Jykge1xuICAgICAgYW5jZXN0b3JJbmZvLmRsSXRlbVRhZ0F1dG9jbG9zaW5nID0gaW5mbztcbiAgICB9XG5cbiAgICByZXR1cm4gYW5jZXN0b3JJbmZvO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXJcbiAgICovXG4gIHZhciBpc1RhZ1ZhbGlkV2l0aFBhcmVudCA9IGZ1bmN0aW9uICh0YWcsIHBhcmVudFRhZykge1xuICAgIC8vIEZpcnN0LCBsZXQncyBjaGVjayBpZiB3ZSdyZSBpbiBhbiB1bnVzdWFsIHBhcnNpbmcgbW9kZS4uLlxuICAgIHN3aXRjaCAocGFyZW50VGFnKSB7XG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5zZWxlY3RcbiAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdvcHRpb24nIHx8IHRhZyA9PT0gJ29wdGdyb3VwJyB8fCB0YWcgPT09ICcjdGV4dCc7XG4gICAgICBjYXNlICdvcHRncm91cCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdvcHRpb24nIHx8IHRhZyA9PT0gJyN0ZXh0JztcbiAgICAgIC8vIFN0cmljdGx5IHNwZWFraW5nLCBzZWVpbmcgYW4gPG9wdGlvbj4gZG9lc24ndCBtZWFuIHdlJ3JlIGluIGEgPHNlbGVjdD5cbiAgICAgIC8vIGJ1dFxuICAgICAgY2FzZSAnb3B0aW9uJzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJyN0ZXh0JztcblxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWludGRcbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmNhcHRpb25cbiAgICAgIC8vIE5vIHNwZWNpYWwgYmVoYXZpb3Igc2luY2UgdGhlc2UgcnVsZXMgZmFsbCBiYWNrIHRvIFwiaW4gYm9keVwiIG1vZGUgZm9yXG4gICAgICAvLyBhbGwgZXhjZXB0IHNwZWNpYWwgdGFibGUgbm9kZXMgd2hpY2ggY2F1c2UgYmFkIHBhcnNpbmcgYmVoYXZpb3IgYW55d2F5LlxuXG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW50clxuICAgICAgY2FzZSAndHInOlxuICAgICAgICByZXR1cm4gdGFnID09PSAndGgnIHx8IHRhZyA9PT0gJ3RkJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnRib2R5XG4gICAgICBjYXNlICd0Ym9keSc6XG4gICAgICBjYXNlICd0aGVhZCc6XG4gICAgICBjYXNlICd0Zm9vdCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICd0cicgfHwgdGFnID09PSAnc3R5bGUnIHx8IHRhZyA9PT0gJ3NjcmlwdCcgfHwgdGFnID09PSAndGVtcGxhdGUnO1xuXG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5jb2xncm91cFxuICAgICAgY2FzZSAnY29sZ3JvdXAnOlxuICAgICAgICByZXR1cm4gdGFnID09PSAnY29sJyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnRhYmxlXG4gICAgICBjYXNlICd0YWJsZSc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdjYXB0aW9uJyB8fCB0YWcgPT09ICdjb2xncm91cCcgfHwgdGFnID09PSAndGJvZHknIHx8IHRhZyA9PT0gJ3Rmb290JyB8fCB0YWcgPT09ICd0aGVhZCcgfHwgdGFnID09PSAnc3R5bGUnIHx8IHRhZyA9PT0gJ3NjcmlwdCcgfHwgdGFnID09PSAndGVtcGxhdGUnO1xuXG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5oZWFkXG4gICAgICBjYXNlICdoZWFkJzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ2Jhc2UnIHx8IHRhZyA9PT0gJ2Jhc2Vmb250JyB8fCB0YWcgPT09ICdiZ3NvdW5kJyB8fCB0YWcgPT09ICdsaW5rJyB8fCB0YWcgPT09ICdtZXRhJyB8fCB0YWcgPT09ICd0aXRsZScgfHwgdGFnID09PSAnbm9zY3JpcHQnIHx8IHRhZyA9PT0gJ25vZnJhbWVzJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3NlbWFudGljcy5odG1sI3RoZS1odG1sLWVsZW1lbnRcbiAgICAgIGNhc2UgJ2h0bWwnOlxuICAgICAgICByZXR1cm4gdGFnID09PSAnaGVhZCcgfHwgdGFnID09PSAnYm9keSc7XG4gICAgfVxuXG4gICAgLy8gUHJvYmFibHkgaW4gdGhlIFwiaW4gYm9keVwiIHBhcnNpbmcgbW9kZSwgc28gd2Ugb3V0bGF3IG9ubHkgdGFnIGNvbWJvc1xuICAgIC8vIHdoZXJlIHRoZSBwYXJzaW5nIHJ1bGVzIGNhdXNlIGltcGxpY2l0IG9wZW5zIG9yIGNsb3NlcyB0byBiZSBhZGRlZC5cbiAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5ib2R5XG4gICAgc3dpdGNoICh0YWcpIHtcbiAgICAgIGNhc2UgJ2gxJzpcbiAgICAgIGNhc2UgJ2gyJzpcbiAgICAgIGNhc2UgJ2gzJzpcbiAgICAgIGNhc2UgJ2g0JzpcbiAgICAgIGNhc2UgJ2g1JzpcbiAgICAgIGNhc2UgJ2g2JzpcbiAgICAgICAgcmV0dXJuIHBhcmVudFRhZyAhPT0gJ2gxJyAmJiBwYXJlbnRUYWcgIT09ICdoMicgJiYgcGFyZW50VGFnICE9PSAnaDMnICYmIHBhcmVudFRhZyAhPT0gJ2g0JyAmJiBwYXJlbnRUYWcgIT09ICdoNScgJiYgcGFyZW50VGFnICE9PSAnaDYnO1xuXG4gICAgICBjYXNlICdycCc6XG4gICAgICBjYXNlICdydCc6XG4gICAgICAgIHJldHVybiBpbXBsaWVkRW5kVGFncy5pbmRleE9mKHBhcmVudFRhZykgPT09IC0xO1xuXG4gICAgICBjYXNlICdjYXB0aW9uJzpcbiAgICAgIGNhc2UgJ2NvbCc6XG4gICAgICBjYXNlICdjb2xncm91cCc6XG4gICAgICBjYXNlICdmcmFtZSc6XG4gICAgICBjYXNlICdoZWFkJzpcbiAgICAgIGNhc2UgJ3Rib2R5JzpcbiAgICAgIGNhc2UgJ3RkJzpcbiAgICAgIGNhc2UgJ3Rmb290JzpcbiAgICAgIGNhc2UgJ3RoJzpcbiAgICAgIGNhc2UgJ3RoZWFkJzpcbiAgICAgIGNhc2UgJ3RyJzpcbiAgICAgICAgLy8gVGhlc2UgdGFncyBhcmUgb25seSB2YWxpZCB3aXRoIGEgZmV3IHBhcmVudHMgdGhhdCBoYXZlIHNwZWNpYWwgY2hpbGRcbiAgICAgICAgLy8gcGFyc2luZyBydWxlcyAtLSBpZiB3ZSdyZSBkb3duIGhlcmUsIHRoZW4gbm9uZSBvZiB0aG9zZSBtYXRjaGVkIGFuZFxuICAgICAgICAvLyBzbyB3ZSBhbGxvdyBpdCBvbmx5IGlmIHdlIGRvbid0IGtub3cgd2hhdCB0aGUgcGFyZW50IGlzLCBhcyBhbGwgb3RoZXJcbiAgICAgICAgLy8gY2FzZXMgYXJlIGludmFsaWQuXG4gICAgICAgIHJldHVybiBwYXJlbnRUYWcgPT0gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyXG4gICAqL1xuICB2YXIgZmluZEludmFsaWRBbmNlc3RvckZvclRhZyA9IGZ1bmN0aW9uICh0YWcsIGFuY2VzdG9ySW5mbykge1xuICAgIHN3aXRjaCAodGFnKSB7XG4gICAgICBjYXNlICdhZGRyZXNzJzpcbiAgICAgIGNhc2UgJ2FydGljbGUnOlxuICAgICAgY2FzZSAnYXNpZGUnOlxuICAgICAgY2FzZSAnYmxvY2txdW90ZSc6XG4gICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgY2FzZSAnZGV0YWlscyc6XG4gICAgICBjYXNlICdkaWFsb2cnOlxuICAgICAgY2FzZSAnZGlyJzpcbiAgICAgIGNhc2UgJ2Rpdic6XG4gICAgICBjYXNlICdkbCc6XG4gICAgICBjYXNlICdmaWVsZHNldCc6XG4gICAgICBjYXNlICdmaWdjYXB0aW9uJzpcbiAgICAgIGNhc2UgJ2ZpZ3VyZSc6XG4gICAgICBjYXNlICdmb290ZXInOlxuICAgICAgY2FzZSAnaGVhZGVyJzpcbiAgICAgIGNhc2UgJ2hncm91cCc6XG4gICAgICBjYXNlICdtYWluJzpcbiAgICAgIGNhc2UgJ21lbnUnOlxuICAgICAgY2FzZSAnbmF2JzpcbiAgICAgIGNhc2UgJ29sJzpcbiAgICAgIGNhc2UgJ3AnOlxuICAgICAgY2FzZSAnc2VjdGlvbic6XG4gICAgICBjYXNlICdzdW1tYXJ5JzpcbiAgICAgIGNhc2UgJ3VsJzpcblxuICAgICAgY2FzZSAncHJlJzpcbiAgICAgIGNhc2UgJ2xpc3RpbmcnOlxuXG4gICAgICBjYXNlICd0YWJsZSc6XG5cbiAgICAgIGNhc2UgJ2hyJzpcblxuICAgICAgY2FzZSAneG1wJzpcblxuICAgICAgY2FzZSAnaDEnOlxuICAgICAgY2FzZSAnaDInOlxuICAgICAgY2FzZSAnaDMnOlxuICAgICAgY2FzZSAnaDQnOlxuICAgICAgY2FzZSAnaDUnOlxuICAgICAgY2FzZSAnaDYnOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLnBUYWdJbkJ1dHRvblNjb3BlO1xuXG4gICAgICBjYXNlICdmb3JtJzpcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5mb3JtVGFnIHx8IGFuY2VzdG9ySW5mby5wVGFnSW5CdXR0b25TY29wZTtcblxuICAgICAgY2FzZSAnbGknOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmxpc3RJdGVtVGFnQXV0b2Nsb3Npbmc7XG5cbiAgICAgIGNhc2UgJ2RkJzpcbiAgICAgIGNhc2UgJ2R0JzpcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5kbEl0ZW1UYWdBdXRvY2xvc2luZztcblxuICAgICAgY2FzZSAnYnV0dG9uJzpcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5idXR0b25UYWdJblNjb3BlO1xuXG4gICAgICBjYXNlICdhJzpcbiAgICAgICAgLy8gU3BlYyBzYXlzIHNvbWV0aGluZyBhYm91dCBzdG9yaW5nIGEgbGlzdCBvZiBtYXJrZXJzLCBidXQgaXQgc291bmRzXG4gICAgICAgIC8vIGVxdWl2YWxlbnQgdG8gdGhpcyBjaGVjay5cbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZTtcblxuICAgICAgY2FzZSAnbm9icic6XG4gICAgICAgIHJldHVybiBhbmNlc3RvckluZm8ubm9iclRhZ0luU2NvcGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgUmVhY3RDb21wb3NpdGVDb21wb25lbnQgaW5zdGFuY2UsIHJldHVybiBhIGxpc3Qgb2YgaXRzIHJlY3Vyc2l2ZVxuICAgKiBvd25lcnMsIHN0YXJ0aW5nIGF0IHRoZSByb290IGFuZCBlbmRpbmcgd2l0aCB0aGUgaW5zdGFuY2UgaXRzZWxmLlxuICAgKi9cbiAgdmFyIGZpbmRPd25lclN0YWNrID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgaWYgKCFpbnN0YW5jZSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHZhciBzdGFjayA9IFtdO1xuICAgIC8qZXNsaW50LWRpc2FibGUgc3BhY2UtYWZ0ZXIta2V5d29yZHMgKi9cbiAgICBkbyB7XG4gICAgICAvKmVzbGludC1lbmFibGUgc3BhY2UtYWZ0ZXIta2V5d29yZHMgKi9cbiAgICAgIHN0YWNrLnB1c2goaW5zdGFuY2UpO1xuICAgIH0gd2hpbGUgKGluc3RhbmNlID0gaW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50Ll9vd25lcik7XG4gICAgc3RhY2sucmV2ZXJzZSgpO1xuICAgIHJldHVybiBzdGFjaztcbiAgfTtcblxuICB2YXIgZGlkV2FybiA9IHt9O1xuXG4gIHZhbGlkYXRlRE9NTmVzdGluZyA9IGZ1bmN0aW9uIChjaGlsZFRhZywgY2hpbGRJbnN0YW5jZSwgYW5jZXN0b3JJbmZvKSB7XG4gICAgYW5jZXN0b3JJbmZvID0gYW5jZXN0b3JJbmZvIHx8IGVtcHR5QW5jZXN0b3JJbmZvO1xuICAgIHZhciBwYXJlbnRJbmZvID0gYW5jZXN0b3JJbmZvLnBhcmVudFRhZztcbiAgICB2YXIgcGFyZW50VGFnID0gcGFyZW50SW5mbyAmJiBwYXJlbnRJbmZvLnRhZztcblxuICAgIHZhciBpbnZhbGlkUGFyZW50ID0gaXNUYWdWYWxpZFdpdGhQYXJlbnQoY2hpbGRUYWcsIHBhcmVudFRhZykgPyBudWxsIDogcGFyZW50SW5mbztcbiAgICB2YXIgaW52YWxpZEFuY2VzdG9yID0gaW52YWxpZFBhcmVudCA/IG51bGwgOiBmaW5kSW52YWxpZEFuY2VzdG9yRm9yVGFnKGNoaWxkVGFnLCBhbmNlc3RvckluZm8pO1xuICAgIHZhciBwcm9ibGVtYXRpYyA9IGludmFsaWRQYXJlbnQgfHwgaW52YWxpZEFuY2VzdG9yO1xuXG4gICAgaWYgKHByb2JsZW1hdGljKSB7XG4gICAgICB2YXIgYW5jZXN0b3JUYWcgPSBwcm9ibGVtYXRpYy50YWc7XG4gICAgICB2YXIgYW5jZXN0b3JJbnN0YW5jZSA9IHByb2JsZW1hdGljLmluc3RhbmNlO1xuXG4gICAgICB2YXIgY2hpbGRPd25lciA9IGNoaWxkSW5zdGFuY2UgJiYgY2hpbGRJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuICAgICAgdmFyIGFuY2VzdG9yT3duZXIgPSBhbmNlc3Rvckluc3RhbmNlICYmIGFuY2VzdG9ySW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcblxuICAgICAgdmFyIGNoaWxkT3duZXJzID0gZmluZE93bmVyU3RhY2soY2hpbGRPd25lcik7XG4gICAgICB2YXIgYW5jZXN0b3JPd25lcnMgPSBmaW5kT3duZXJTdGFjayhhbmNlc3Rvck93bmVyKTtcblxuICAgICAgdmFyIG1pblN0YWNrTGVuID0gTWF0aC5taW4oY2hpbGRPd25lcnMubGVuZ3RoLCBhbmNlc3Rvck93bmVycy5sZW5ndGgpO1xuICAgICAgdmFyIGk7XG5cbiAgICAgIHZhciBkZWVwZXN0Q29tbW9uID0gLTE7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbWluU3RhY2tMZW47IGkrKykge1xuICAgICAgICBpZiAoY2hpbGRPd25lcnNbaV0gPT09IGFuY2VzdG9yT3duZXJzW2ldKSB7XG4gICAgICAgICAgZGVlcGVzdENvbW1vbiA9IGk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIFVOS05PV04gPSAnKHVua25vd24pJztcbiAgICAgIHZhciBjaGlsZE93bmVyTmFtZXMgPSBjaGlsZE93bmVycy5zbGljZShkZWVwZXN0Q29tbW9uICsgMSkubWFwKGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgICAgIHJldHVybiBpbnN0LmdldE5hbWUoKSB8fCBVTktOT1dOO1xuICAgICAgfSk7XG4gICAgICB2YXIgYW5jZXN0b3JPd25lck5hbWVzID0gYW5jZXN0b3JPd25lcnMuc2xpY2UoZGVlcGVzdENvbW1vbiArIDEpLm1hcChmdW5jdGlvbiAoaW5zdCkge1xuICAgICAgICByZXR1cm4gaW5zdC5nZXROYW1lKCkgfHwgVU5LTk9XTjtcbiAgICAgIH0pO1xuICAgICAgdmFyIG93bmVySW5mbyA9IFtdLmNvbmNhdChcbiAgICAgIC8vIElmIHRoZSBwYXJlbnQgYW5kIGNoaWxkIGluc3RhbmNlcyBoYXZlIGEgY29tbW9uIG93bmVyIGFuY2VzdG9yLCBzdGFydFxuICAgICAgLy8gd2l0aCB0aGF0IC0tIG90aGVyd2lzZSB3ZSBqdXN0IHN0YXJ0IHdpdGggdGhlIHBhcmVudCdzIG93bmVycy5cbiAgICAgIGRlZXBlc3RDb21tb24gIT09IC0xID8gY2hpbGRPd25lcnNbZGVlcGVzdENvbW1vbl0uZ2V0TmFtZSgpIHx8IFVOS05PV04gOiBbXSwgYW5jZXN0b3JPd25lck5hbWVzLCBhbmNlc3RvclRhZyxcbiAgICAgIC8vIElmIHdlJ3JlIHdhcm5pbmcgYWJvdXQgYW4gaW52YWxpZCAobm9uLXBhcmVudCkgYW5jZXN0cnksIGFkZCAnLi4uJ1xuICAgICAgaW52YWxpZEFuY2VzdG9yID8gWycuLi4nXSA6IFtdLCBjaGlsZE93bmVyTmFtZXMsIGNoaWxkVGFnKS5qb2luKCcgPiAnKTtcblxuICAgICAgdmFyIHdhcm5LZXkgPSAhIWludmFsaWRQYXJlbnQgKyAnfCcgKyBjaGlsZFRhZyArICd8JyArIGFuY2VzdG9yVGFnICsgJ3wnICsgb3duZXJJbmZvO1xuICAgICAgaWYgKGRpZFdhcm5bd2FybktleV0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZGlkV2Fyblt3YXJuS2V5XSA9IHRydWU7XG5cbiAgICAgIGlmIChpbnZhbGlkUGFyZW50KSB7XG4gICAgICAgIHZhciBpbmZvID0gJyc7XG4gICAgICAgIGlmIChhbmNlc3RvclRhZyA9PT0gJ3RhYmxlJyAmJiBjaGlsZFRhZyA9PT0gJ3RyJykge1xuICAgICAgICAgIGluZm8gKz0gJyBBZGQgYSA8dGJvZHk+IHRvIHlvdXIgY29kZSB0byBtYXRjaCB0aGUgRE9NIHRyZWUgZ2VuZXJhdGVkIGJ5ICcgKyAndGhlIGJyb3dzZXIuJztcbiAgICAgICAgfVxuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ3ZhbGlkYXRlRE9NTmVzdGluZyguLi4pOiA8JXM+IGNhbm5vdCBhcHBlYXIgYXMgYSBjaGlsZCBvZiA8JXM+LiAnICsgJ1NlZSAlcy4lcycsIGNoaWxkVGFnLCBhbmNlc3RvclRhZywgb3duZXJJbmZvLCBpbmZvKSA6IHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAndmFsaWRhdGVET01OZXN0aW5nKC4uLik6IDwlcz4gY2Fubm90IGFwcGVhciBhcyBhIGRlc2NlbmRhbnQgb2YgJyArICc8JXM+LiBTZWUgJXMuJywgY2hpbGRUYWcsIGFuY2VzdG9yVGFnLCBvd25lckluZm8pIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleSA9ICdfX3ZhbGlkYXRlRE9NTmVzdGluZ19hbmNlc3RvckluZm8kJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO1xuXG4gIHZhbGlkYXRlRE9NTmVzdGluZy51cGRhdGVkQW5jZXN0b3JJbmZvID0gdXBkYXRlZEFuY2VzdG9ySW5mbztcblxuICAvLyBGb3IgdGVzdGluZ1xuICB2YWxpZGF0ZURPTU5lc3RpbmcuaXNUYWdWYWxpZEluQ29udGV4dCA9IGZ1bmN0aW9uICh0YWcsIGFuY2VzdG9ySW5mbykge1xuICAgIGFuY2VzdG9ySW5mbyA9IGFuY2VzdG9ySW5mbyB8fCBlbXB0eUFuY2VzdG9ySW5mbztcbiAgICB2YXIgcGFyZW50SW5mbyA9IGFuY2VzdG9ySW5mby5wYXJlbnRUYWc7XG4gICAgdmFyIHBhcmVudFRhZyA9IHBhcmVudEluZm8gJiYgcGFyZW50SW5mby50YWc7XG4gICAgcmV0dXJuIGlzVGFnVmFsaWRXaXRoUGFyZW50KHRhZywgcGFyZW50VGFnKSAmJiAhZmluZEludmFsaWRBbmNlc3RvckZvclRhZyh0YWcsIGFuY2VzdG9ySW5mbyk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdmFsaWRhdGVET01OZXN0aW5nOyIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9SZWFjdCcpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBzaGFsbG93XG5cbmZ1bmN0aW9uIHNoYWxsb3coYSwgYiwgY29tcGFyZSkge1xuICB2YXIgYUlzQXJyYXkgPSBBcnJheS5pc0FycmF5KGEpXG4gIHZhciBiSXNBcnJheSA9IEFycmF5LmlzQXJyYXkoYilcblxuICBpZiAoYUlzQXJyYXkgIT09IGJJc0FycmF5KSByZXR1cm4gZmFsc2VcblxuICB2YXIgYVR5cGVvZiA9IHR5cGVvZiBhXG4gIHZhciBiVHlwZW9mID0gdHlwZW9mIGJcblxuICBpZiAoYVR5cGVvZiAhPT0gYlR5cGVvZikgcmV0dXJuIGZhbHNlXG4gIGlmIChmbGF0KGFUeXBlb2YpKSByZXR1cm4gY29tcGFyZVxuICAgID8gY29tcGFyZShhLCBiKVxuICAgIDogYSA9PT0gYlxuXG4gIHJldHVybiBhSXNBcnJheVxuICAgID8gc2hhbGxvd0FycmF5KGEsIGIsIGNvbXBhcmUpXG4gICAgOiBzaGFsbG93T2JqZWN0KGEsIGIsIGNvbXBhcmUpXG59XG5cbmZ1bmN0aW9uIHNoYWxsb3dBcnJheShhLCBiLCBjb21wYXJlKSB7XG4gIHZhciBsID0gYS5sZW5ndGhcbiAgaWYgKGwgIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2VcblxuICBpZiAoY29tcGFyZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKVxuICAgICAgaWYgKCFjb21wYXJlKGFbaV0sIGJbaV0pKSByZXR1cm4gZmFsc2VcbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKGFbaV0gIT09IGJbaV0pIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbmZ1bmN0aW9uIHNoYWxsb3dPYmplY3QoYSwgYiwgY29tcGFyZSkge1xuICB2YXIga2EgPSAwXG4gIHZhciBrYiA9IDBcblxuICBpZiAoY29tcGFyZSkge1xuICAgIGZvciAodmFyIGtleSBpbiBhKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGEuaGFzT3duUHJvcGVydHkoa2V5KSAmJlxuICAgICAgICAhY29tcGFyZShhW2tleV0sIGJba2V5XSlcbiAgICAgICkgcmV0dXJuIGZhbHNlXG5cbiAgICAgIGthKytcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIga2V5IGluIGEpIHtcbiAgICAgIGlmIChcbiAgICAgICAgYS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmXG4gICAgICAgIGFba2V5XSAhPT0gYltrZXldXG4gICAgICApIHJldHVybiBmYWxzZVxuXG4gICAgICBrYSsrXG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIga2V5IGluIGIpIHtcbiAgICBpZiAoYi5oYXNPd25Qcm9wZXJ0eShrZXkpKSBrYisrXG4gIH1cblxuICByZXR1cm4ga2EgPT09IGtiXG59XG5cbmZ1bmN0aW9uIGZsYXQodHlwZSkge1xuICByZXR1cm4gKFxuICAgIHR5cGUgIT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlICE9PSAnb2JqZWN0J1xuICApXG59XG4iLCIvLyAgICAgVW5kZXJzY29yZS5qcyAxLjguM1xuLy8gICAgIGh0dHA6Ly91bmRlcnNjb3JlanMub3JnXG4vLyAgICAgKGMpIDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbihmdW5jdGlvbigpIHtcblxuICAvLyBCYXNlbGluZSBzZXR1cFxuICAvLyAtLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIGluIHRoZSBicm93c2VyLCBvciBgZXhwb3J0c2Agb24gdGhlIHNlcnZlci5cbiAgdmFyIHJvb3QgPSB0aGlzO1xuXG4gIC8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgX2AgdmFyaWFibGUuXG4gIHZhciBwcmV2aW91c1VuZGVyc2NvcmUgPSByb290Ll87XG5cbiAgLy8gU2F2ZSBieXRlcyBpbiB0aGUgbWluaWZpZWQgKGJ1dCBub3QgZ3ppcHBlZCkgdmVyc2lvbjpcbiAgdmFyIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGUsIE9ialByb3RvID0gT2JqZWN0LnByb3RvdHlwZSwgRnVuY1Byb3RvID0gRnVuY3Rpb24ucHJvdG90eXBlO1xuXG4gIC8vIENyZWF0ZSBxdWljayByZWZlcmVuY2UgdmFyaWFibGVzIGZvciBzcGVlZCBhY2Nlc3MgdG8gY29yZSBwcm90b3R5cGVzLlxuICB2YXJcbiAgICBwdXNoICAgICAgICAgICAgID0gQXJyYXlQcm90by5wdXNoLFxuICAgIHNsaWNlICAgICAgICAgICAgPSBBcnJheVByb3RvLnNsaWNlLFxuICAgIHRvU3RyaW5nICAgICAgICAgPSBPYmpQcm90by50b1N0cmluZyxcbiAgICBoYXNPd25Qcm9wZXJ0eSAgID0gT2JqUHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbiAgLy8gQWxsICoqRUNNQVNjcmlwdCA1KiogbmF0aXZlIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9ucyB0aGF0IHdlIGhvcGUgdG8gdXNlXG4gIC8vIGFyZSBkZWNsYXJlZCBoZXJlLlxuICB2YXJcbiAgICBuYXRpdmVJc0FycmF5ICAgICAgPSBBcnJheS5pc0FycmF5LFxuICAgIG5hdGl2ZUtleXMgICAgICAgICA9IE9iamVjdC5rZXlzLFxuICAgIG5hdGl2ZUJpbmQgICAgICAgICA9IEZ1bmNQcm90by5iaW5kLFxuICAgIG5hdGl2ZUNyZWF0ZSAgICAgICA9IE9iamVjdC5jcmVhdGU7XG5cbiAgLy8gTmFrZWQgZnVuY3Rpb24gcmVmZXJlbmNlIGZvciBzdXJyb2dhdGUtcHJvdG90eXBlLXN3YXBwaW5nLlxuICB2YXIgQ3RvciA9IGZ1bmN0aW9uKCl7fTtcblxuICAvLyBDcmVhdGUgYSBzYWZlIHJlZmVyZW5jZSB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QgZm9yIHVzZSBiZWxvdy5cbiAgdmFyIF8gPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqIGluc3RhbmNlb2YgXykgcmV0dXJuIG9iajtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgXykpIHJldHVybiBuZXcgXyhvYmopO1xuICAgIHRoaXMuX3dyYXBwZWQgPSBvYmo7XG4gIH07XG5cbiAgLy8gRXhwb3J0IHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgKipOb2RlLmpzKiosIHdpdGhcbiAgLy8gYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgZm9yIHRoZSBvbGQgYHJlcXVpcmUoKWAgQVBJLiBJZiB3ZSdyZSBpblxuICAvLyB0aGUgYnJvd3NlciwgYWRkIGBfYCBhcyBhIGdsb2JhbCBvYmplY3QuXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF87XG4gICAgfVxuICAgIGV4cG9ydHMuXyA9IF87XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5fID0gXztcbiAgfVxuXG4gIC8vIEN1cnJlbnQgdmVyc2lvbi5cbiAgXy5WRVJTSU9OID0gJzEuOC4zJztcblxuICAvLyBJbnRlcm5hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gZWZmaWNpZW50IChmb3IgY3VycmVudCBlbmdpbmVzKSB2ZXJzaW9uXG4gIC8vIG9mIHRoZSBwYXNzZWQtaW4gY2FsbGJhY2ssIHRvIGJlIHJlcGVhdGVkbHkgYXBwbGllZCBpbiBvdGhlciBVbmRlcnNjb3JlXG4gIC8vIGZ1bmN0aW9ucy5cbiAgdmFyIG9wdGltaXplQ2IgPSBmdW5jdGlvbihmdW5jLCBjb250ZXh0LCBhcmdDb3VudCkge1xuICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHJldHVybiBmdW5jO1xuICAgIHN3aXRjaCAoYXJnQ291bnQgPT0gbnVsbCA/IDMgOiBhcmdDb3VudCkge1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUsIG90aGVyKTtcbiAgICAgIH07XG4gICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBBIG1vc3RseS1pbnRlcm5hbCBmdW5jdGlvbiB0byBnZW5lcmF0ZSBjYWxsYmFja3MgdGhhdCBjYW4gYmUgYXBwbGllZFxuICAvLyB0byBlYWNoIGVsZW1lbnQgaW4gYSBjb2xsZWN0aW9uLCByZXR1cm5pbmcgdGhlIGRlc2lyZWQgcmVzdWx0IOKAlCBlaXRoZXJcbiAgLy8gaWRlbnRpdHksIGFuIGFyYml0cmFyeSBjYWxsYmFjaywgYSBwcm9wZXJ0eSBtYXRjaGVyLCBvciBhIHByb3BlcnR5IGFjY2Vzc29yLlxuICB2YXIgY2IgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIF8uaWRlbnRpdHk7XG4gICAgaWYgKF8uaXNGdW5jdGlvbih2YWx1ZSkpIHJldHVybiBvcHRpbWl6ZUNiKHZhbHVlLCBjb250ZXh0LCBhcmdDb3VudCk7XG4gICAgaWYgKF8uaXNPYmplY3QodmFsdWUpKSByZXR1cm4gXy5tYXRjaGVyKHZhbHVlKTtcbiAgICByZXR1cm4gXy5wcm9wZXJ0eSh2YWx1ZSk7XG4gIH07XG4gIF8uaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBjYih2YWx1ZSwgY29udGV4dCwgSW5maW5pdHkpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhc3NpZ25lciBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVBc3NpZ25lciA9IGZ1bmN0aW9uKGtleXNGdW5jLCB1bmRlZmluZWRPbmx5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoIDwgMiB8fCBvYmogPT0gbnVsbCkgcmV0dXJuIG9iajtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF0sXG4gICAgICAgICAgICBrZXlzID0ga2V5c0Z1bmMoc291cmNlKSxcbiAgICAgICAgICAgIGwgPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICBpZiAoIXVuZGVmaW5lZE9ubHkgfHwgb2JqW2tleV0gPT09IHZvaWQgMCkgb2JqW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhIG5ldyBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIGFub3RoZXIuXG4gIHZhciBiYXNlQ3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KHByb3RvdHlwZSkpIHJldHVybiB7fTtcbiAgICBpZiAobmF0aXZlQ3JlYXRlKSByZXR1cm4gbmF0aXZlQ3JlYXRlKHByb3RvdHlwZSk7XG4gICAgQ3Rvci5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBDdG9yO1xuICAgIEN0b3IucHJvdG90eXBlID0gbnVsbDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciBwcm9wZXJ0eSA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogPT0gbnVsbCA/IHZvaWQgMCA6IG9ialtrZXldO1xuICAgIH07XG4gIH07XG5cbiAgLy8gSGVscGVyIGZvciBjb2xsZWN0aW9uIG1ldGhvZHMgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBjb2xsZWN0aW9uXG4gIC8vIHNob3VsZCBiZSBpdGVyYXRlZCBhcyBhbiBhcnJheSBvciBhcyBhbiBvYmplY3RcbiAgLy8gUmVsYXRlZDogaHR0cDovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGhcbiAgLy8gQXZvaWRzIGEgdmVyeSBuYXN0eSBpT1MgOCBKSVQgYnVnIG9uIEFSTS02NC4gIzIwOTRcbiAgdmFyIE1BWF9BUlJBWV9JTkRFWCA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG4gIHZhciBnZXRMZW5ndGggPSBwcm9wZXJ0eSgnbGVuZ3RoJyk7XG4gIHZhciBpc0FycmF5TGlrZSA9IGZ1bmN0aW9uKGNvbGxlY3Rpb24pIHtcbiAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGNvbGxlY3Rpb24pO1xuICAgIHJldHVybiB0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInICYmIGxlbmd0aCA+PSAwICYmIGxlbmd0aCA8PSBNQVhfQVJSQVlfSU5ERVg7XG4gIH07XG5cbiAgLy8gQ29sbGVjdGlvbiBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBUaGUgY29ybmVyc3RvbmUsIGFuIGBlYWNoYCBpbXBsZW1lbnRhdGlvbiwgYWthIGBmb3JFYWNoYC5cbiAgLy8gSGFuZGxlcyByYXcgb2JqZWN0cyBpbiBhZGRpdGlvbiB0byBhcnJheS1saWtlcy4gVHJlYXRzIGFsbFxuICAvLyBzcGFyc2UgYXJyYXktbGlrZXMgYXMgaWYgdGhleSB3ZXJlIGRlbnNlLlxuICBfLmVhY2ggPSBfLmZvckVhY2ggPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIgaSwgbGVuZ3RoO1xuICAgIGlmIChpc0FycmF5TGlrZShvYmopKSB7XG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaXRlcmF0ZWUob2JqW2ldLCBpLCBvYmopO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYXRlZShvYmpba2V5c1tpXV0sIGtleXNbaV0sIG9iaik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQuXG4gIF8ubWFwID0gXy5jb2xsZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLFxuICAgICAgICByZXN1bHRzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgcmVzdWx0c1tpbmRleF0gPSBpdGVyYXRlZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIHJlZHVjaW5nIGZ1bmN0aW9uIGl0ZXJhdGluZyBsZWZ0IG9yIHJpZ2h0LlxuICBmdW5jdGlvbiBjcmVhdGVSZWR1Y2UoZGlyKSB7XG4gICAgLy8gT3B0aW1pemVkIGl0ZXJhdG9yIGZ1bmN0aW9uIGFzIHVzaW5nIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAvLyBpbiB0aGUgbWFpbiBmdW5jdGlvbiB3aWxsIGRlb3B0aW1pemUgdGhlLCBzZWUgIzE5OTEuXG4gICAgZnVuY3Rpb24gaXRlcmF0b3Iob2JqLCBpdGVyYXRlZSwgbWVtbywga2V5cywgaW5kZXgsIGxlbmd0aCkge1xuICAgICAgZm9yICg7IGluZGV4ID49IDAgJiYgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IGRpcikge1xuICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgICBtZW1vID0gaXRlcmF0ZWUobWVtbywgb2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGNvbnRleHQpIHtcbiAgICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCwgNCk7XG4gICAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLFxuICAgICAgICAgIGluZGV4ID0gZGlyID4gMCA/IDAgOiBsZW5ndGggLSAxO1xuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBpbml0aWFsIHZhbHVlIGlmIG5vbmUgaXMgcHJvdmlkZWQuXG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgbWVtbyA9IG9ialtrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleF07XG4gICAgICAgIGluZGV4ICs9IGRpcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpdGVyYXRvcihvYmosIGl0ZXJhdGVlLCBtZW1vLCBrZXlzLCBpbmRleCwgbGVuZ3RoKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gKipSZWR1Y2UqKiBidWlsZHMgdXAgYSBzaW5nbGUgcmVzdWx0IGZyb20gYSBsaXN0IG9mIHZhbHVlcywgYWthIGBpbmplY3RgLFxuICAvLyBvciBgZm9sZGxgLlxuICBfLnJlZHVjZSA9IF8uZm9sZGwgPSBfLmluamVjdCA9IGNyZWF0ZVJlZHVjZSgxKTtcblxuICAvLyBUaGUgcmlnaHQtYXNzb2NpYXRpdmUgdmVyc2lvbiBvZiByZWR1Y2UsIGFsc28ga25vd24gYXMgYGZvbGRyYC5cbiAgXy5yZWR1Y2VSaWdodCA9IF8uZm9sZHIgPSBjcmVhdGVSZWR1Y2UoLTEpO1xuXG4gIC8vIFJldHVybiB0aGUgZmlyc3QgdmFsdWUgd2hpY2ggcGFzc2VzIGEgdHJ1dGggdGVzdC4gQWxpYXNlZCBhcyBgZGV0ZWN0YC5cbiAgXy5maW5kID0gXy5kZXRlY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBrZXk7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcbiAgICAgIGtleSA9IF8uZmluZEluZGV4KG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5ID0gXy5maW5kS2V5KG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgaWYgKGtleSAhPT0gdm9pZCAwICYmIGtleSAhPT0gLTEpIHJldHVybiBvYmpba2V5XTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBzZWxlY3RgLlxuICBfLmZpbHRlciA9IF8uc2VsZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHMucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgZm9yIHdoaWNoIGEgdHJ1dGggdGVzdCBmYWlscy5cbiAgXy5yZWplY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBfLmZpbHRlcihvYmosIF8ubmVnYXRlKGNiKHByZWRpY2F0ZSkpLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgd2hldGhlciBhbGwgb2YgdGhlIGVsZW1lbnRzIG1hdGNoIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgYWxsYC5cbiAgXy5ldmVyeSA9IF8uYWxsID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAoIXByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIGF0IGxlYXN0IG9uZSBlbGVtZW50IGluIHRoZSBvYmplY3QgbWF0Y2hlcyBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYGFueWAuXG4gIF8uc29tZSA9IF8uYW55ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgaWYgdGhlIGFycmF5IG9yIG9iamVjdCBjb250YWlucyBhIGdpdmVuIGl0ZW0gKHVzaW5nIGA9PT1gKS5cbiAgLy8gQWxpYXNlZCBhcyBgaW5jbHVkZXNgIGFuZCBgaW5jbHVkZWAuXG4gIF8uY29udGFpbnMgPSBfLmluY2x1ZGVzID0gXy5pbmNsdWRlID0gZnVuY3Rpb24ob2JqLCBpdGVtLCBmcm9tSW5kZXgsIGd1YXJkKSB7XG4gICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ICE9ICdudW1iZXInIHx8IGd1YXJkKSBmcm9tSW5kZXggPSAwO1xuICAgIHJldHVybiBfLmluZGV4T2Yob2JqLCBpdGVtLCBmcm9tSW5kZXgpID49IDA7XG4gIH07XG5cbiAgLy8gSW52b2tlIGEgbWV0aG9kICh3aXRoIGFyZ3VtZW50cykgb24gZXZlcnkgaXRlbSBpbiBhIGNvbGxlY3Rpb24uXG4gIF8uaW52b2tlID0gZnVuY3Rpb24ob2JqLCBtZXRob2QpIHtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICB2YXIgaXNGdW5jID0gXy5pc0Z1bmN0aW9uKG1ldGhvZCk7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBmdW5jID0gaXNGdW5jID8gbWV0aG9kIDogdmFsdWVbbWV0aG9kXTtcbiAgICAgIHJldHVybiBmdW5jID09IG51bGwgPyBmdW5jIDogZnVuYy5hcHBseSh2YWx1ZSwgYXJncyk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgbWFwYDogZmV0Y2hpbmcgYSBwcm9wZXJ0eS5cbiAgXy5wbHVjayA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgXy5wcm9wZXJ0eShrZXkpKTtcbiAgfTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaWx0ZXJgOiBzZWxlY3Rpbmcgb25seSBvYmplY3RzXG4gIC8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8ud2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmluZGA6IGdldHRpbmcgdGhlIGZpcnN0IG9iamVjdFxuICAvLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLmZpbmRXaGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHtcbiAgICByZXR1cm4gXy5maW5kKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1heCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0gLUluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSAtSW5maW5pdHksXG4gICAgICAgIHZhbHVlLCBjb21wdXRlZDtcbiAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCAmJiBvYmogIT0gbnVsbCkge1xuICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2ldO1xuICAgICAgICBpZiAodmFsdWUgPiByZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdCk7XG4gICAgICAgIGlmIChjb21wdXRlZCA+IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gLUluZmluaXR5ICYmIHJlc3VsdCA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbWluaW11bSBlbGVtZW50IChvciBlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS5cbiAgXy5taW4gPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdCA9IEluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSBJbmZpbml0eSxcbiAgICAgICAgdmFsdWUsIGNvbXB1dGVkO1xuICAgIGlmIChpdGVyYXRlZSA9PSBudWxsICYmIG9iaiAhPSBudWxsKSB7XG4gICAgICBvYmogPSBpc0FycmF5TGlrZShvYmopID8gb2JqIDogXy52YWx1ZXMob2JqKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBvYmpbaV07XG4gICAgICAgIGlmICh2YWx1ZSA8IHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KTtcbiAgICAgICAgaWYgKGNvbXB1dGVkIDwgbGFzdENvbXB1dGVkIHx8IGNvbXB1dGVkID09PSBJbmZpbml0eSAmJiByZXN1bHQgPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFNodWZmbGUgYSBjb2xsZWN0aW9uLCB1c2luZyB0aGUgbW9kZXJuIHZlcnNpb24gb2YgdGhlXG4gIC8vIFtGaXNoZXItWWF0ZXMgc2h1ZmZsZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9GaXNoZXLigJNZYXRlc19zaHVmZmxlKS5cbiAgXy5zaHVmZmxlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHNldCA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBzZXQubGVuZ3RoO1xuICAgIHZhciBzaHVmZmxlZCA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwLCByYW5kOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmFuZCA9IF8ucmFuZG9tKDAsIGluZGV4KTtcbiAgICAgIGlmIChyYW5kICE9PSBpbmRleCkgc2h1ZmZsZWRbaW5kZXhdID0gc2h1ZmZsZWRbcmFuZF07XG4gICAgICBzaHVmZmxlZFtyYW5kXSA9IHNldFtpbmRleF07XG4gICAgfVxuICAgIHJldHVybiBzaHVmZmxlZDtcbiAgfTtcblxuICAvLyBTYW1wbGUgKipuKiogcmFuZG9tIHZhbHVlcyBmcm9tIGEgY29sbGVjdGlvbi5cbiAgLy8gSWYgKipuKiogaXMgbm90IHNwZWNpZmllZCwgcmV0dXJucyBhIHNpbmdsZSByYW5kb20gZWxlbWVudC5cbiAgLy8gVGhlIGludGVybmFsIGBndWFyZGAgYXJndW1lbnQgYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgbWFwYC5cbiAgXy5zYW1wbGUgPSBmdW5jdGlvbihvYmosIG4sIGd1YXJkKSB7XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkge1xuICAgICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuICAgICAgcmV0dXJuIG9ialtfLnJhbmRvbShvYmoubGVuZ3RoIC0gMSldO1xuICAgIH1cbiAgICByZXR1cm4gXy5zaHVmZmxlKG9iaikuc2xpY2UoMCwgTWF0aC5tYXgoMCwgbikpO1xuICB9O1xuXG4gIC8vIFNvcnQgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiBwcm9kdWNlZCBieSBhbiBpdGVyYXRlZS5cbiAgXy5zb3J0QnkgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgcmV0dXJuIF8ucGx1Y2soXy5tYXAob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICBjcml0ZXJpYTogaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KVxuICAgICAgfTtcbiAgICB9KS5zb3J0KGZ1bmN0aW9uKGxlZnQsIHJpZ2h0KSB7XG4gICAgICB2YXIgYSA9IGxlZnQuY3JpdGVyaWE7XG4gICAgICB2YXIgYiA9IHJpZ2h0LmNyaXRlcmlhO1xuICAgICAgaWYgKGEgIT09IGIpIHtcbiAgICAgICAgaWYgKGEgPiBiIHx8IGEgPT09IHZvaWQgMCkgcmV0dXJuIDE7XG4gICAgICAgIGlmIChhIDwgYiB8fCBiID09PSB2b2lkIDApIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsZWZ0LmluZGV4IC0gcmlnaHQuaW5kZXg7XG4gICAgfSksICd2YWx1ZScpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIHVzZWQgZm9yIGFnZ3JlZ2F0ZSBcImdyb3VwIGJ5XCIgb3BlcmF0aW9ucy5cbiAgdmFyIGdyb3VwID0gZnVuY3Rpb24oYmVoYXZpb3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGtleSA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgb2JqKTtcbiAgICAgICAgYmVoYXZpb3IocmVzdWx0LCB2YWx1ZSwga2V5KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEdyb3VwcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLiBQYXNzIGVpdGhlciBhIHN0cmluZyBhdHRyaWJ1dGVcbiAgLy8gdG8gZ3JvdXAgYnksIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBjcml0ZXJpb24uXG4gIF8uZ3JvdXBCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIGlmIChfLmhhcyhyZXN1bHQsIGtleSkpIHJlc3VsdFtrZXldLnB1c2godmFsdWUpOyBlbHNlIHJlc3VsdFtrZXldID0gW3ZhbHVlXTtcbiAgfSk7XG5cbiAgLy8gSW5kZXhlcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLCBzaW1pbGFyIHRvIGBncm91cEJ5YCwgYnV0IGZvclxuICAvLyB3aGVuIHlvdSBrbm93IHRoYXQgeW91ciBpbmRleCB2YWx1ZXMgd2lsbCBiZSB1bmlxdWUuXG4gIF8uaW5kZXhCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gIH0pO1xuXG4gIC8vIENvdW50cyBpbnN0YW5jZXMgb2YgYW4gb2JqZWN0IHRoYXQgZ3JvdXAgYnkgYSBjZXJ0YWluIGNyaXRlcmlvbi4gUGFzc1xuICAvLyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlIHRvIGNvdW50IGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcbiAgLy8gY3JpdGVyaW9uLlxuICBfLmNvdW50QnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoXy5oYXMocmVzdWx0LCBrZXkpKSByZXN1bHRba2V5XSsrOyBlbHNlIHJlc3VsdFtrZXldID0gMTtcbiAgfSk7XG5cbiAgLy8gU2FmZWx5IGNyZWF0ZSBhIHJlYWwsIGxpdmUgYXJyYXkgZnJvbSBhbnl0aGluZyBpdGVyYWJsZS5cbiAgXy50b0FycmF5ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFvYmopIHJldHVybiBbXTtcbiAgICBpZiAoXy5pc0FycmF5KG9iaikpIHJldHVybiBzbGljZS5jYWxsKG9iaik7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHJldHVybiBfLm1hcChvYmosIF8uaWRlbnRpdHkpO1xuICAgIHJldHVybiBfLnZhbHVlcyhvYmopO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGluIGFuIG9iamVjdC5cbiAgXy5zaXplID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gMDtcbiAgICByZXR1cm4gaXNBcnJheUxpa2Uob2JqKSA/IG9iai5sZW5ndGggOiBfLmtleXMob2JqKS5sZW5ndGg7XG4gIH07XG5cbiAgLy8gU3BsaXQgYSBjb2xsZWN0aW9uIGludG8gdHdvIGFycmF5czogb25lIHdob3NlIGVsZW1lbnRzIGFsbCBzYXRpc2Z5IHRoZSBnaXZlblxuICAvLyBwcmVkaWNhdGUsIGFuZCBvbmUgd2hvc2UgZWxlbWVudHMgYWxsIGRvIG5vdCBzYXRpc2Z5IHRoZSBwcmVkaWNhdGUuXG4gIF8ucGFydGl0aW9uID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBwYXNzID0gW10sIGZhaWwgPSBbXTtcbiAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmopIHtcbiAgICAgIChwcmVkaWNhdGUodmFsdWUsIGtleSwgb2JqKSA/IHBhc3MgOiBmYWlsKS5wdXNoKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW3Bhc3MsIGZhaWxdO1xuICB9O1xuXG4gIC8vIEFycmF5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGZpcnN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgaGVhZGAgYW5kIGB0YWtlYC4gVGhlICoqZ3VhcmQqKiBjaGVja1xuICAvLyBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuXG4gIF8uZmlyc3QgPSBfLmhlYWQgPSBfLnRha2UgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbMF07XG4gICAgcmV0dXJuIF8uaW5pdGlhbChhcnJheSwgYXJyYXkubGVuZ3RoIC0gbik7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgbGFzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEVzcGVjaWFsbHkgdXNlZnVsIG9uXG4gIC8vIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIGFsbCB0aGUgdmFsdWVzIGluXG4gIC8vIHRoZSBhcnJheSwgZXhjbHVkaW5nIHRoZSBsYXN0IE4uXG4gIF8uaW5pdGlhbCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCAwLCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSAobiA9PSBudWxsIHx8IGd1YXJkID8gMSA6IG4pKSk7XG4gIH07XG5cbiAgLy8gR2V0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGxhc3QgTlxuICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LlxuICBfLmxhc3QgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG4gICAgcmV0dXJuIF8ucmVzdChhcnJheSwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gbikpO1xuICB9O1xuXG4gIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGZpcnN0IGVudHJ5IG9mIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgdGFpbGAgYW5kIGBkcm9wYC5cbiAgLy8gRXNwZWNpYWxseSB1c2VmdWwgb24gdGhlIGFyZ3VtZW50cyBvYmplY3QuIFBhc3NpbmcgYW4gKipuKiogd2lsbCByZXR1cm5cbiAgLy8gdGhlIHJlc3QgTiB2YWx1ZXMgaW4gdGhlIGFycmF5LlxuICBfLnJlc3QgPSBfLnRhaWwgPSBfLmRyb3AgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgbiA9PSBudWxsIHx8IGd1YXJkID8gMSA6IG4pO1xuICB9O1xuXG4gIC8vIFRyaW0gb3V0IGFsbCBmYWxzeSB2YWx1ZXMgZnJvbSBhbiBhcnJheS5cbiAgXy5jb21wYWN0ID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIF8uaWRlbnRpdHkpO1xuICB9O1xuXG4gIC8vIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIGEgcmVjdXJzaXZlIGBmbGF0dGVuYCBmdW5jdGlvbi5cbiAgdmFyIGZsYXR0ZW4gPSBmdW5jdGlvbihpbnB1dCwgc2hhbGxvdywgc3RyaWN0LCBzdGFydEluZGV4KSB7XG4gICAgdmFyIG91dHB1dCA9IFtdLCBpZHggPSAwO1xuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4IHx8IDAsIGxlbmd0aCA9IGdldExlbmd0aChpbnB1dCk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHZhbHVlID0gaW5wdXRbaV07XG4gICAgICBpZiAoaXNBcnJheUxpa2UodmFsdWUpICYmIChfLmlzQXJyYXkodmFsdWUpIHx8IF8uaXNBcmd1bWVudHModmFsdWUpKSkge1xuICAgICAgICAvL2ZsYXR0ZW4gY3VycmVudCBsZXZlbCBvZiBhcnJheSBvciBhcmd1bWVudHMgb2JqZWN0XG4gICAgICAgIGlmICghc2hhbGxvdykgdmFsdWUgPSBmbGF0dGVuKHZhbHVlLCBzaGFsbG93LCBzdHJpY3QpO1xuICAgICAgICB2YXIgaiA9IDAsIGxlbiA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgb3V0cHV0Lmxlbmd0aCArPSBsZW47XG4gICAgICAgIHdoaWxlIChqIDwgbGVuKSB7XG4gICAgICAgICAgb3V0cHV0W2lkeCsrXSA9IHZhbHVlW2orK107XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIXN0cmljdCkge1xuICAgICAgICBvdXRwdXRbaWR4KytdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH07XG5cbiAgLy8gRmxhdHRlbiBvdXQgYW4gYXJyYXksIGVpdGhlciByZWN1cnNpdmVseSAoYnkgZGVmYXVsdCksIG9yIGp1c3Qgb25lIGxldmVsLlxuICBfLmZsYXR0ZW4gPSBmdW5jdGlvbihhcnJheSwgc2hhbGxvdykge1xuICAgIHJldHVybiBmbGF0dGVuKGFycmF5LCBzaGFsbG93LCBmYWxzZSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgdmVyc2lvbiBvZiB0aGUgYXJyYXkgdGhhdCBkb2VzIG5vdCBjb250YWluIHRoZSBzcGVjaWZpZWQgdmFsdWUocykuXG4gIF8ud2l0aG91dCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgcmV0dXJuIF8uZGlmZmVyZW5jZShhcnJheSwgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgfTtcblxuICAvLyBQcm9kdWNlIGEgZHVwbGljYXRlLWZyZWUgdmVyc2lvbiBvZiB0aGUgYXJyYXkuIElmIHRoZSBhcnJheSBoYXMgYWxyZWFkeVxuICAvLyBiZWVuIHNvcnRlZCwgeW91IGhhdmUgdGhlIG9wdGlvbiBvZiB1c2luZyBhIGZhc3RlciBhbGdvcml0aG0uXG4gIC8vIEFsaWFzZWQgYXMgYHVuaXF1ZWAuXG4gIF8udW5pcSA9IF8udW5pcXVlID0gZnVuY3Rpb24oYXJyYXksIGlzU29ydGVkLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGlmICghXy5pc0Jvb2xlYW4oaXNTb3J0ZWQpKSB7XG4gICAgICBjb250ZXh0ID0gaXRlcmF0ZWU7XG4gICAgICBpdGVyYXRlZSA9IGlzU29ydGVkO1xuICAgICAgaXNTb3J0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGl0ZXJhdGVlICE9IG51bGwpIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgc2VlbiA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2ldLFxuICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUgPyBpdGVyYXRlZSh2YWx1ZSwgaSwgYXJyYXkpIDogdmFsdWU7XG4gICAgICBpZiAoaXNTb3J0ZWQpIHtcbiAgICAgICAgaWYgKCFpIHx8IHNlZW4gIT09IGNvbXB1dGVkKSByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIHNlZW4gPSBjb21wdXRlZDtcbiAgICAgIH0gZWxzZSBpZiAoaXRlcmF0ZWUpIHtcbiAgICAgICAgaWYgKCFfLmNvbnRhaW5zKHNlZW4sIGNvbXB1dGVkKSkge1xuICAgICAgICAgIHNlZW4ucHVzaChjb21wdXRlZCk7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFfLmNvbnRhaW5zKHJlc3VsdCwgdmFsdWUpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIHVuaW9uOiBlYWNoIGRpc3RpbmN0IGVsZW1lbnQgZnJvbSBhbGwgb2ZcbiAgLy8gdGhlIHBhc3NlZC1pbiBhcnJheXMuXG4gIF8udW5pb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXy51bmlxKGZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCB0cnVlKSk7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGV2ZXJ5IGl0ZW0gc2hhcmVkIGJldHdlZW4gYWxsIHRoZVxuICAvLyBwYXNzZWQtaW4gYXJyYXlzLlxuICBfLmludGVyc2VjdGlvbiA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBhcmdzTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IGFycmF5W2ldO1xuICAgICAgaWYgKF8uY29udGFpbnMocmVzdWx0LCBpdGVtKSkgY29udGludWU7XG4gICAgICBmb3IgKHZhciBqID0gMTsgaiA8IGFyZ3NMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAoIV8uY29udGFpbnMoYXJndW1lbnRzW2pdLCBpdGVtKSkgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoaiA9PT0gYXJnc0xlbmd0aCkgcmVzdWx0LnB1c2goaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gVGFrZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG9uZSBhcnJheSBhbmQgYSBudW1iZXIgb2Ygb3RoZXIgYXJyYXlzLlxuICAvLyBPbmx5IHRoZSBlbGVtZW50cyBwcmVzZW50IGluIGp1c3QgdGhlIGZpcnN0IGFycmF5IHdpbGwgcmVtYWluLlxuICBfLmRpZmZlcmVuY2UgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciByZXN0ID0gZmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUsIDEpO1xuICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgcmV0dXJuICFfLmNvbnRhaW5zKHJlc3QsIHZhbHVlKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBaaXAgdG9nZXRoZXIgbXVsdGlwbGUgbGlzdHMgaW50byBhIHNpbmdsZSBhcnJheSAtLSBlbGVtZW50cyB0aGF0IHNoYXJlXG4gIC8vIGFuIGluZGV4IGdvIHRvZ2V0aGVyLlxuICBfLnppcCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBfLnVuemlwKGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQ29tcGxlbWVudCBvZiBfLnppcC4gVW56aXAgYWNjZXB0cyBhbiBhcnJheSBvZiBhcnJheXMgYW5kIGdyb3Vwc1xuICAvLyBlYWNoIGFycmF5J3MgZWxlbWVudHMgb24gc2hhcmVkIGluZGljZXNcbiAgXy51bnppcCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5ICYmIF8ubWF4KGFycmF5LCBnZXRMZW5ndGgpLmxlbmd0aCB8fCAwO1xuICAgIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmVzdWx0W2luZGV4XSA9IF8ucGx1Y2soYXJyYXksIGluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBDb252ZXJ0cyBsaXN0cyBpbnRvIG9iamVjdHMuIFBhc3MgZWl0aGVyIGEgc2luZ2xlIGFycmF5IG9mIGBba2V5LCB2YWx1ZV1gXG4gIC8vIHBhaXJzLCBvciB0d28gcGFyYWxsZWwgYXJyYXlzIG9mIHRoZSBzYW1lIGxlbmd0aCAtLSBvbmUgb2Yga2V5cywgYW5kIG9uZSBvZlxuICAvLyB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZXMuXG4gIF8ub2JqZWN0ID0gZnVuY3Rpb24obGlzdCwgdmFsdWVzKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgobGlzdCk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICByZXN1bHRbbGlzdFtpXV0gPSB2YWx1ZXNbaV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRbbGlzdFtpXVswXV0gPSBsaXN0W2ldWzFdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIEdlbmVyYXRvciBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGZpbmRJbmRleCBhbmQgZmluZExhc3RJbmRleCBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoZGlyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTtcbiAgICAgIHZhciBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgIGZvciAoOyBpbmRleCA+PSAwICYmIGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSBkaXIpIHtcbiAgICAgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuICB9XG5cbiAgLy8gUmV0dXJucyB0aGUgZmlyc3QgaW5kZXggb24gYW4gYXJyYXktbGlrZSB0aGF0IHBhc3NlcyBhIHByZWRpY2F0ZSB0ZXN0XG4gIF8uZmluZEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoMSk7XG4gIF8uZmluZExhc3RJbmRleCA9IGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKC0xKTtcblxuICAvLyBVc2UgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIHRvIGZpZ3VyZSBvdXQgdGhlIHNtYWxsZXN0IGluZGV4IGF0IHdoaWNoXG4gIC8vIGFuIG9iamVjdCBzaG91bGQgYmUgaW5zZXJ0ZWQgc28gYXMgdG8gbWFpbnRhaW4gb3JkZXIuIFVzZXMgYmluYXJ5IHNlYXJjaC5cbiAgXy5zb3J0ZWRJbmRleCA9IGZ1bmN0aW9uKGFycmF5LCBvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCwgMSk7XG4gICAgdmFyIHZhbHVlID0gaXRlcmF0ZWUob2JqKTtcbiAgICB2YXIgbG93ID0gMCwgaGlnaCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgIHZhciBtaWQgPSBNYXRoLmZsb29yKChsb3cgKyBoaWdoKSAvIDIpO1xuICAgICAgaWYgKGl0ZXJhdGVlKGFycmF5W21pZF0pIDwgdmFsdWUpIGxvdyA9IG1pZCArIDE7IGVsc2UgaGlnaCA9IG1pZDtcbiAgICB9XG4gICAgcmV0dXJuIGxvdztcbiAgfTtcblxuICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBpbmRleE9mIGFuZCBsYXN0SW5kZXhPZiBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gY3JlYXRlSW5kZXhGaW5kZXIoZGlyLCBwcmVkaWNhdGVGaW5kLCBzb3J0ZWRJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgaXRlbSwgaWR4KSB7XG4gICAgICB2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgICBpZiAodHlwZW9mIGlkeCA9PSAnbnVtYmVyJykge1xuICAgICAgICBpZiAoZGlyID4gMCkge1xuICAgICAgICAgICAgaSA9IGlkeCA+PSAwID8gaWR4IDogTWF0aC5tYXgoaWR4ICsgbGVuZ3RoLCBpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IGlkeCA+PSAwID8gTWF0aC5taW4oaWR4ICsgMSwgbGVuZ3RoKSA6IGlkeCArIGxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc29ydGVkSW5kZXggJiYgaWR4ICYmIGxlbmd0aCkge1xuICAgICAgICBpZHggPSBzb3J0ZWRJbmRleChhcnJheSwgaXRlbSk7XG4gICAgICAgIHJldHVybiBhcnJheVtpZHhdID09PSBpdGVtID8gaWR4IDogLTE7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbSAhPT0gaXRlbSkge1xuICAgICAgICBpZHggPSBwcmVkaWNhdGVGaW5kKHNsaWNlLmNhbGwoYXJyYXksIGksIGxlbmd0aCksIF8uaXNOYU4pO1xuICAgICAgICByZXR1cm4gaWR4ID49IDAgPyBpZHggKyBpIDogLTE7XG4gICAgICB9XG4gICAgICBmb3IgKGlkeCA9IGRpciA+IDAgPyBpIDogbGVuZ3RoIC0gMTsgaWR4ID49IDAgJiYgaWR4IDwgbGVuZ3RoOyBpZHggKz0gZGlyKSB7XG4gICAgICAgIGlmIChhcnJheVtpZHhdID09PSBpdGVtKSByZXR1cm4gaWR4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gIH1cblxuICAvLyBSZXR1cm4gdGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGl0ZW0gaW4gYW4gYXJyYXksXG4gIC8vIG9yIC0xIGlmIHRoZSBpdGVtIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgYXJyYXkuXG4gIC8vIElmIHRoZSBhcnJheSBpcyBsYXJnZSBhbmQgYWxyZWFkeSBpbiBzb3J0IG9yZGVyLCBwYXNzIGB0cnVlYFxuICAvLyBmb3IgKippc1NvcnRlZCoqIHRvIHVzZSBiaW5hcnkgc2VhcmNoLlxuICBfLmluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigxLCBfLmZpbmRJbmRleCwgXy5zb3J0ZWRJbmRleCk7XG4gIF8ubGFzdEluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigtMSwgXy5maW5kTGFzdEluZGV4KTtcblxuICAvLyBHZW5lcmF0ZSBhbiBpbnRlZ2VyIEFycmF5IGNvbnRhaW5pbmcgYW4gYXJpdGhtZXRpYyBwcm9ncmVzc2lvbi4gQSBwb3J0IG9mXG4gIC8vIHRoZSBuYXRpdmUgUHl0aG9uIGByYW5nZSgpYCBmdW5jdGlvbi4gU2VlXG4gIC8vIFt0aGUgUHl0aG9uIGRvY3VtZW50YXRpb25dKGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS9mdW5jdGlvbnMuaHRtbCNyYW5nZSkuXG4gIF8ucmFuZ2UgPSBmdW5jdGlvbihzdGFydCwgc3RvcCwgc3RlcCkge1xuICAgIGlmIChzdG9wID09IG51bGwpIHtcbiAgICAgIHN0b3AgPSBzdGFydCB8fCAwO1xuICAgICAgc3RhcnQgPSAwO1xuICAgIH1cbiAgICBzdGVwID0gc3RlcCB8fCAxO1xuXG4gICAgdmFyIGxlbmd0aCA9IE1hdGgubWF4KE1hdGguY2VpbCgoc3RvcCAtIHN0YXJ0KSAvIHN0ZXApLCAwKTtcbiAgICB2YXIgcmFuZ2UgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKywgc3RhcnQgKz0gc3RlcCkge1xuICAgICAgcmFuZ2VbaWR4XSA9IHN0YXJ0O1xuICAgIH1cblxuICAgIHJldHVybiByYW5nZTtcbiAgfTtcblxuICAvLyBGdW5jdGlvbiAoYWhlbSkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIERldGVybWluZXMgd2hldGhlciB0byBleGVjdXRlIGEgZnVuY3Rpb24gYXMgYSBjb25zdHJ1Y3RvclxuICAvLyBvciBhIG5vcm1hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm92aWRlZCBhcmd1bWVudHNcbiAgdmFyIGV4ZWN1dGVCb3VuZCA9IGZ1bmN0aW9uKHNvdXJjZUZ1bmMsIGJvdW5kRnVuYywgY29udGV4dCwgY2FsbGluZ0NvbnRleHQsIGFyZ3MpIHtcbiAgICBpZiAoIShjYWxsaW5nQ29udGV4dCBpbnN0YW5jZW9mIGJvdW5kRnVuYykpIHJldHVybiBzb3VyY2VGdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIHZhciBzZWxmID0gYmFzZUNyZWF0ZShzb3VyY2VGdW5jLnByb3RvdHlwZSk7XG4gICAgdmFyIHJlc3VsdCA9IHNvdXJjZUZ1bmMuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgaWYgKF8uaXNPYmplY3QocmVzdWx0KSkgcmV0dXJuIHJlc3VsdDtcbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvLyBDcmVhdGUgYSBmdW5jdGlvbiBib3VuZCB0byBhIGdpdmVuIG9iamVjdCAoYXNzaWduaW5nIGB0aGlzYCwgYW5kIGFyZ3VtZW50cyxcbiAgLy8gb3B0aW9uYWxseSkuIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBGdW5jdGlvbi5iaW5kYCBpZlxuICAvLyBhdmFpbGFibGUuXG4gIF8uYmluZCA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQpIHtcbiAgICBpZiAobmF0aXZlQmluZCAmJiBmdW5jLmJpbmQgPT09IG5hdGl2ZUJpbmQpIHJldHVybiBuYXRpdmVCaW5kLmFwcGx5KGZ1bmMsIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgaWYgKCFfLmlzRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvbicpO1xuICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLCBib3VuZCwgY29udGV4dCwgdGhpcywgYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gYm91bmQ7XG4gIH07XG5cbiAgLy8gUGFydGlhbGx5IGFwcGx5IGEgZnVuY3Rpb24gYnkgY3JlYXRpbmcgYSB2ZXJzaW9uIHRoYXQgaGFzIGhhZCBzb21lIG9mIGl0c1xuICAvLyBhcmd1bWVudHMgcHJlLWZpbGxlZCwgd2l0aG91dCBjaGFuZ2luZyBpdHMgZHluYW1pYyBgdGhpc2AgY29udGV4dC4gXyBhY3RzXG4gIC8vIGFzIGEgcGxhY2Vob2xkZXIsIGFsbG93aW5nIGFueSBjb21iaW5hdGlvbiBvZiBhcmd1bWVudHMgdG8gYmUgcHJlLWZpbGxlZC5cbiAgXy5wYXJ0aWFsID0gZnVuY3Rpb24oZnVuYykge1xuICAgIHZhciBib3VuZEFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgdmFyIGJvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcG9zaXRpb24gPSAwLCBsZW5ndGggPSBib3VuZEFyZ3MubGVuZ3RoO1xuICAgICAgdmFyIGFyZ3MgPSBBcnJheShsZW5ndGgpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBhcmdzW2ldID0gYm91bmRBcmdzW2ldID09PSBfID8gYXJndW1lbnRzW3Bvc2l0aW9uKytdIDogYm91bmRBcmdzW2ldO1xuICAgICAgfVxuICAgICAgd2hpbGUgKHBvc2l0aW9uIDwgYXJndW1lbnRzLmxlbmd0aCkgYXJncy5wdXNoKGFyZ3VtZW50c1twb3NpdGlvbisrXSk7XG4gICAgICByZXR1cm4gZXhlY3V0ZUJvdW5kKGZ1bmMsIGJvdW5kLCB0aGlzLCB0aGlzLCBhcmdzKTtcbiAgICB9O1xuICAgIHJldHVybiBib3VuZDtcbiAgfTtcblxuICAvLyBCaW5kIGEgbnVtYmVyIG9mIGFuIG9iamVjdCdzIG1ldGhvZHMgdG8gdGhhdCBvYmplY3QuIFJlbWFpbmluZyBhcmd1bWVudHNcbiAgLy8gYXJlIHRoZSBtZXRob2QgbmFtZXMgdG8gYmUgYm91bmQuIFVzZWZ1bCBmb3IgZW5zdXJpbmcgdGhhdCBhbGwgY2FsbGJhY2tzXG4gIC8vIGRlZmluZWQgb24gYW4gb2JqZWN0IGJlbG9uZyB0byBpdC5cbiAgXy5iaW5kQWxsID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGksIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsIGtleTtcbiAgICBpZiAobGVuZ3RoIDw9IDEpIHRocm93IG5ldyBFcnJvcignYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lcycpO1xuICAgIGZvciAoaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gYXJndW1lbnRzW2ldO1xuICAgICAgb2JqW2tleV0gPSBfLmJpbmQob2JqW2tleV0sIG9iaik7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gTWVtb2l6ZSBhbiBleHBlbnNpdmUgZnVuY3Rpb24gYnkgc3RvcmluZyBpdHMgcmVzdWx0cy5cbiAgXy5tZW1vaXplID0gZnVuY3Rpb24oZnVuYywgaGFzaGVyKSB7XG4gICAgdmFyIG1lbW9pemUgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBjYWNoZSA9IG1lbW9pemUuY2FjaGU7XG4gICAgICB2YXIgYWRkcmVzcyA9ICcnICsgKGhhc2hlciA/IGhhc2hlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDoga2V5KTtcbiAgICAgIGlmICghXy5oYXMoY2FjaGUsIGFkZHJlc3MpKSBjYWNoZVthZGRyZXNzXSA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiBjYWNoZVthZGRyZXNzXTtcbiAgICB9O1xuICAgIG1lbW9pemUuY2FjaGUgPSB7fTtcbiAgICByZXR1cm4gbWVtb2l6ZTtcbiAgfTtcblxuICAvLyBEZWxheXMgYSBmdW5jdGlvbiBmb3IgdGhlIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIGFuZCB0aGVuIGNhbGxzXG4gIC8vIGl0IHdpdGggdGhlIGFyZ3VtZW50cyBzdXBwbGllZC5cbiAgXy5kZWxheSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQpIHtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfSwgd2FpdCk7XG4gIH07XG5cbiAgLy8gRGVmZXJzIGEgZnVuY3Rpb24sIHNjaGVkdWxpbmcgaXQgdG8gcnVuIGFmdGVyIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzXG4gIC8vIGNsZWFyZWQuXG4gIF8uZGVmZXIgPSBfLnBhcnRpYWwoXy5kZWxheSwgXywgMSk7XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlXG4gIC8vIGR1cmluZyBhIGdpdmVuIHdpbmRvdyBvZiB0aW1lLiBOb3JtYWxseSwgdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsIHJ1blxuICAvLyBhcyBtdWNoIGFzIGl0IGNhbiwgd2l0aG91dCBldmVyIGdvaW5nIG1vcmUgdGhhbiBvbmNlIHBlciBgd2FpdGAgZHVyYXRpb247XG4gIC8vIGJ1dCBpZiB5b3UnZCBsaWtlIHRvIGRpc2FibGUgdGhlIGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlLCBwYXNzXG4gIC8vIGB7bGVhZGluZzogZmFsc2V9YC4gVG8gZGlzYWJsZSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2UsIGRpdHRvLlxuICBfLnRocm90dGxlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICAgIHZhciBjb250ZXh0LCBhcmdzLCByZXN1bHQ7XG4gICAgdmFyIHRpbWVvdXQgPSBudWxsO1xuICAgIHZhciBwcmV2aW91cyA9IDA7XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogXy5ub3coKTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG5vdyA9IF8ubm93KCk7XG4gICAgICBpZiAoIXByZXZpb3VzICYmIG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UpIHByZXZpb3VzID0gbm93O1xuICAgICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xuICAgICAgY29udGV4dCA9IHRoaXM7XG4gICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90XG4gIC8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAgLy8gTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gIC8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuXG4gIF8uZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG5cbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsYXN0ID0gXy5ub3coKSAtIHRpbWVzdGFtcDtcblxuICAgICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB0aW1lc3RhbXAgPSBfLm5vdygpO1xuICAgICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICBpZiAoIXRpbWVvdXQpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgIGlmIChjYWxsTm93KSB7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGZ1bmN0aW9uIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgc2Vjb25kLFxuICAvLyBhbGxvd2luZyB5b3UgdG8gYWRqdXN0IGFyZ3VtZW50cywgcnVuIGNvZGUgYmVmb3JlIGFuZCBhZnRlciwgYW5kXG4gIC8vIGNvbmRpdGlvbmFsbHkgZXhlY3V0ZSB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uXG4gIF8ud3JhcCA9IGZ1bmN0aW9uKGZ1bmMsIHdyYXBwZXIpIHtcbiAgICByZXR1cm4gXy5wYXJ0aWFsKHdyYXBwZXIsIGZ1bmMpO1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBuZWdhdGVkIHZlcnNpb24gb2YgdGhlIHBhc3NlZC1pbiBwcmVkaWNhdGUuXG4gIF8ubmVnYXRlID0gZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICFwcmVkaWNhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiBhIGxpc3Qgb2YgZnVuY3Rpb25zLCBlYWNoXG4gIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuXG4gIF8uY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBzdGFydCA9IGFyZ3MubGVuZ3RoIC0gMTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSA9IHN0YXJ0O1xuICAgICAgdmFyIHJlc3VsdCA9IGFyZ3Nbc3RhcnRdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB3aGlsZSAoaS0tKSByZXN1bHQgPSBhcmdzW2ldLmNhbGwodGhpcywgcmVzdWx0KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgb24gYW5kIGFmdGVyIHRoZSBOdGggY2FsbC5cbiAgXy5hZnRlciA9IGZ1bmN0aW9uKHRpbWVzLCBmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC0tdGltZXMgPCAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgdXAgdG8gKGJ1dCBub3QgaW5jbHVkaW5nKSB0aGUgTnRoIGNhbGwuXG4gIF8uYmVmb3JlID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHtcbiAgICB2YXIgbWVtbztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoLS10aW1lcyA+IDApIHtcbiAgICAgICAgbWVtbyA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aW1lcyA8PSAxKSBmdW5jID0gbnVsbDtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhdCBtb3N0IG9uZSB0aW1lLCBubyBtYXR0ZXIgaG93XG4gIC8vIG9mdGVuIHlvdSBjYWxsIGl0LiBVc2VmdWwgZm9yIGxhenkgaW5pdGlhbGl6YXRpb24uXG4gIF8ub25jZSA9IF8ucGFydGlhbChfLmJlZm9yZSwgMik7XG5cbiAgLy8gT2JqZWN0IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gS2V5cyBpbiBJRSA8IDkgdGhhdCB3b24ndCBiZSBpdGVyYXRlZCBieSBgZm9yIGtleSBpbiAuLi5gIGFuZCB0aHVzIG1pc3NlZC5cbiAgdmFyIGhhc0VudW1CdWcgPSAhe3RvU3RyaW5nOiBudWxsfS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgndG9TdHJpbmcnKTtcbiAgdmFyIG5vbkVudW1lcmFibGVQcm9wcyA9IFsndmFsdWVPZicsICdpc1Byb3RvdHlwZU9mJywgJ3RvU3RyaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAncHJvcGVydHlJc0VudW1lcmFibGUnLCAnaGFzT3duUHJvcGVydHknLCAndG9Mb2NhbGVTdHJpbmcnXTtcblxuICBmdW5jdGlvbiBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cykge1xuICAgIHZhciBub25FbnVtSWR4ID0gbm9uRW51bWVyYWJsZVByb3BzLmxlbmd0aDtcbiAgICB2YXIgY29uc3RydWN0b3IgPSBvYmouY29uc3RydWN0b3I7XG4gICAgdmFyIHByb3RvID0gKF8uaXNGdW5jdGlvbihjb25zdHJ1Y3RvcikgJiYgY29uc3RydWN0b3IucHJvdG90eXBlKSB8fCBPYmpQcm90bztcblxuICAgIC8vIENvbnN0cnVjdG9yIGlzIGEgc3BlY2lhbCBjYXNlLlxuICAgIHZhciBwcm9wID0gJ2NvbnN0cnVjdG9yJztcbiAgICBpZiAoXy5oYXMob2JqLCBwcm9wKSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkga2V5cy5wdXNoKHByb3ApO1xuXG4gICAgd2hpbGUgKG5vbkVudW1JZHgtLSkge1xuICAgICAgcHJvcCA9IG5vbkVudW1lcmFibGVQcm9wc1tub25FbnVtSWR4XTtcbiAgICAgIGlmIChwcm9wIGluIG9iaiAmJiBvYmpbcHJvcF0gIT09IHByb3RvW3Byb3BdICYmICFfLmNvbnRhaW5zKGtleXMsIHByb3ApKSB7XG4gICAgICAgIGtleXMucHVzaChwcm9wKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBSZXRyaWV2ZSB0aGUgbmFtZXMgb2YgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMuXG4gIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBPYmplY3Qua2V5c2BcbiAgXy5rZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICBpZiAobmF0aXZlS2V5cykgcmV0dXJuIG5hdGl2ZUtleXMob2JqKTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChfLmhhcyhvYmosIGtleSkpIGtleXMucHVzaChrZXkpO1xuICAgIC8vIEFoZW0sIElFIDwgOS5cbiAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpO1xuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG4gIC8vIFJldHJpZXZlIGFsbCB0aGUgcHJvcGVydHkgbmFtZXMgb2YgYW4gb2JqZWN0LlxuICBfLmFsbEtleXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIFtdO1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikga2V5cy5wdXNoKGtleSk7XG4gICAgLy8gQWhlbSwgSUUgPCA5LlxuICAgIGlmIChoYXNFbnVtQnVnKSBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cyk7XG4gICAgcmV0dXJuIGtleXM7XG4gIH07XG5cbiAgLy8gUmV0cmlldmUgdGhlIHZhbHVlcyBvZiBhbiBvYmplY3QncyBwcm9wZXJ0aWVzLlxuICBfLnZhbHVlcyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIHZhciB2YWx1ZXMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlc1tpXSA9IG9ialtrZXlzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIG9iamVjdFxuICAvLyBJbiBjb250cmFzdCB0byBfLm1hcCBpdCByZXR1cm5zIGFuIG9iamVjdFxuICBfLm1hcE9iamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICBfLmtleXMob2JqKSxcbiAgICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHRzID0ge30sXG4gICAgICAgICAgY3VycmVudEtleTtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgY3VycmVudEtleSA9IGtleXNbaW5kZXhdO1xuICAgICAgICByZXN1bHRzW2N1cnJlbnRLZXldID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gQ29udmVydCBhbiBvYmplY3QgaW50byBhIGxpc3Qgb2YgYFtrZXksIHZhbHVlXWAgcGFpcnMuXG4gIF8ucGFpcnMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgcGFpcnMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhaXJzW2ldID0gW2tleXNbaV0sIG9ialtrZXlzW2ldXV07XG4gICAgfVxuICAgIHJldHVybiBwYWlycztcbiAgfTtcblxuICAvLyBJbnZlcnQgdGhlIGtleXMgYW5kIHZhbHVlcyBvZiBhbiBvYmplY3QuIFRoZSB2YWx1ZXMgbXVzdCBiZSBzZXJpYWxpemFibGUuXG4gIF8uaW52ZXJ0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc3VsdFtvYmpba2V5c1tpXV1dID0ga2V5c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSBzb3J0ZWQgbGlzdCBvZiB0aGUgZnVuY3Rpb24gbmFtZXMgYXZhaWxhYmxlIG9uIHRoZSBvYmplY3QuXG4gIC8vIEFsaWFzZWQgYXMgYG1ldGhvZHNgXG4gIF8uZnVuY3Rpb25zID0gXy5tZXRob2RzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIG5hbWVzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKF8uaXNGdW5jdGlvbihvYmpba2V5XSkpIG5hbWVzLnB1c2goa2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIG5hbWVzLnNvcnQoKTtcbiAgfTtcblxuICAvLyBFeHRlbmQgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIHByb3BlcnRpZXMgaW4gcGFzc2VkLWluIG9iamVjdChzKS5cbiAgXy5leHRlbmQgPSBjcmVhdGVBc3NpZ25lcihfLmFsbEtleXMpO1xuXG4gIC8vIEFzc2lnbnMgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIG93biBwcm9wZXJ0aWVzIGluIHRoZSBwYXNzZWQtaW4gb2JqZWN0KHMpXG4gIC8vIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduKVxuICBfLmV4dGVuZE93biA9IF8uYXNzaWduID0gY3JlYXRlQXNzaWduZXIoXy5rZXlzKTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBrZXkgb24gYW4gb2JqZWN0IHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3RcbiAgXy5maW5kS2V5ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaiksIGtleTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmIChwcmVkaWNhdGUob2JqW2tleV0sIGtleSwgb2JqKSkgcmV0dXJuIGtleTtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IG9ubHkgY29udGFpbmluZyB0aGUgd2hpdGVsaXN0ZWQgcHJvcGVydGllcy5cbiAgXy5waWNrID0gZnVuY3Rpb24ob2JqZWN0LCBvaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0ge30sIG9iaiA9IG9iamVjdCwgaXRlcmF0ZWUsIGtleXM7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChfLmlzRnVuY3Rpb24ob2l0ZXJhdGVlKSkge1xuICAgICAga2V5cyA9IF8uYWxsS2V5cyhvYmopO1xuICAgICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKG9pdGVyYXRlZSwgY29udGV4dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleXMgPSBmbGF0dGVuKGFyZ3VtZW50cywgZmFsc2UsIGZhbHNlLCAxKTtcbiAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqKSB7IHJldHVybiBrZXkgaW4gb2JqOyB9O1xuICAgICAgb2JqID0gT2JqZWN0KG9iaik7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgaWYgKGl0ZXJhdGVlKHZhbHVlLCBrZXksIG9iaikpIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCB3aXRob3V0IHRoZSBibGFja2xpc3RlZCBwcm9wZXJ0aWVzLlxuICBfLm9taXQgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaWYgKF8uaXNGdW5jdGlvbihpdGVyYXRlZSkpIHtcbiAgICAgIGl0ZXJhdGVlID0gXy5uZWdhdGUoaXRlcmF0ZWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIga2V5cyA9IF8ubWFwKGZsYXR0ZW4oYXJndW1lbnRzLCBmYWxzZSwgZmFsc2UsIDEpLCBTdHJpbmcpO1xuICAgICAgaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIHJldHVybiAhXy5jb250YWlucyhrZXlzLCBrZXkpO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIF8ucGljayhvYmosIGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBGaWxsIGluIGEgZ2l2ZW4gb2JqZWN0IHdpdGggZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICBfLmRlZmF1bHRzID0gY3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzLCB0cnVlKTtcblxuICAvLyBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gdGhlIGdpdmVuIHByb3RvdHlwZSBvYmplY3QuXG4gIC8vIElmIGFkZGl0aW9uYWwgcHJvcGVydGllcyBhcmUgcHJvdmlkZWQgdGhlbiB0aGV5IHdpbGwgYmUgYWRkZWQgdG8gdGhlXG4gIC8vIGNyZWF0ZWQgb2JqZWN0LlxuICBfLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3RvdHlwZSwgcHJvcHMpIHtcbiAgICB2YXIgcmVzdWx0ID0gYmFzZUNyZWF0ZShwcm90b3R5cGUpO1xuICAgIGlmIChwcm9wcykgXy5leHRlbmRPd24ocmVzdWx0LCBwcm9wcyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBDcmVhdGUgYSAoc2hhbGxvdy1jbG9uZWQpIGR1cGxpY2F0ZSBvZiBhbiBvYmplY3QuXG4gIF8uY2xvbmUgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIG9iajtcbiAgICByZXR1cm4gXy5pc0FycmF5KG9iaikgPyBvYmouc2xpY2UoKSA6IF8uZXh0ZW5kKHt9LCBvYmopO1xuICB9O1xuXG4gIC8vIEludm9rZXMgaW50ZXJjZXB0b3Igd2l0aCB0aGUgb2JqLCBhbmQgdGhlbiByZXR1cm5zIG9iai5cbiAgLy8gVGhlIHByaW1hcnkgcHVycG9zZSBvZiB0aGlzIG1ldGhvZCBpcyB0byBcInRhcCBpbnRvXCIgYSBtZXRob2QgY2hhaW4sIGluXG4gIC8vIG9yZGVyIHRvIHBlcmZvcm0gb3BlcmF0aW9ucyBvbiBpbnRlcm1lZGlhdGUgcmVzdWx0cyB3aXRoaW4gdGhlIGNoYWluLlxuICBfLnRhcCA9IGZ1bmN0aW9uKG9iaiwgaW50ZXJjZXB0b3IpIHtcbiAgICBpbnRlcmNlcHRvcihvYmopO1xuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB3aGV0aGVyIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBzZXQgb2YgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8uaXNNYXRjaCA9IGZ1bmN0aW9uKG9iamVjdCwgYXR0cnMpIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhhdHRycyksIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIGlmIChvYmplY3QgPT0gbnVsbCkgcmV0dXJuICFsZW5ndGg7XG4gICAgdmFyIG9iaiA9IE9iamVjdChvYmplY3QpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKGF0dHJzW2tleV0gIT09IG9ialtrZXldIHx8ICEoa2V5IGluIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cblxuICAvLyBJbnRlcm5hbCByZWN1cnNpdmUgY29tcGFyaXNvbiBmdW5jdGlvbiBmb3IgYGlzRXF1YWxgLlxuICB2YXIgZXEgPSBmdW5jdGlvbihhLCBiLCBhU3RhY2ssIGJTdGFjaykge1xuICAgIC8vIElkZW50aWNhbCBvYmplY3RzIGFyZSBlcXVhbC4gYDAgPT09IC0wYCwgYnV0IHRoZXkgYXJlbid0IGlkZW50aWNhbC5cbiAgICAvLyBTZWUgdGhlIFtIYXJtb255IGBlZ2FsYCBwcm9wb3NhbF0oaHR0cDovL3dpa2kuZWNtYXNjcmlwdC5vcmcvZG9rdS5waHA/aWQ9aGFybW9ueTplZ2FsKS5cbiAgICBpZiAoYSA9PT0gYikgcmV0dXJuIGEgIT09IDAgfHwgMSAvIGEgPT09IDEgLyBiO1xuICAgIC8vIEEgc3RyaWN0IGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYG51bGwgPT0gdW5kZWZpbmVkYC5cbiAgICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkgcmV0dXJuIGEgPT09IGI7XG4gICAgLy8gVW53cmFwIGFueSB3cmFwcGVkIG9iamVjdHMuXG4gICAgaWYgKGEgaW5zdGFuY2VvZiBfKSBhID0gYS5fd3JhcHBlZDtcbiAgICBpZiAoYiBpbnN0YW5jZW9mIF8pIGIgPSBiLl93cmFwcGVkO1xuICAgIC8vIENvbXBhcmUgYFtbQ2xhc3NdXWAgbmFtZXMuXG4gICAgdmFyIGNsYXNzTmFtZSA9IHRvU3RyaW5nLmNhbGwoYSk7XG4gICAgaWYgKGNsYXNzTmFtZSAhPT0gdG9TdHJpbmcuY2FsbChiKSkgcmV0dXJuIGZhbHNlO1xuICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7XG4gICAgICAvLyBTdHJpbmdzLCBudW1iZXJzLCByZWd1bGFyIGV4cHJlc3Npb25zLCBkYXRlcywgYW5kIGJvb2xlYW5zIGFyZSBjb21wYXJlZCBieSB2YWx1ZS5cbiAgICAgIGNhc2UgJ1tvYmplY3QgUmVnRXhwXSc6XG4gICAgICAvLyBSZWdFeHBzIGFyZSBjb2VyY2VkIHRvIHN0cmluZ3MgZm9yIGNvbXBhcmlzb24gKE5vdGU6ICcnICsgL2EvaSA9PT0gJy9hL2knKVxuICAgICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcbiAgICAgICAgLy8gUHJpbWl0aXZlcyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBvYmplY3Qgd3JhcHBlcnMgYXJlIGVxdWl2YWxlbnQ7IHRodXMsIGBcIjVcImAgaXNcbiAgICAgICAgLy8gZXF1aXZhbGVudCB0byBgbmV3IFN0cmluZyhcIjVcIilgLlxuICAgICAgICByZXR1cm4gJycgKyBhID09PSAnJyArIGI7XG4gICAgICBjYXNlICdbb2JqZWN0IE51bWJlcl0nOlxuICAgICAgICAvLyBgTmFOYHMgYXJlIGVxdWl2YWxlbnQsIGJ1dCBub24tcmVmbGV4aXZlLlxuICAgICAgICAvLyBPYmplY3QoTmFOKSBpcyBlcXVpdmFsZW50IHRvIE5hTlxuICAgICAgICBpZiAoK2EgIT09ICthKSByZXR1cm4gK2IgIT09ICtiO1xuICAgICAgICAvLyBBbiBgZWdhbGAgY29tcGFyaXNvbiBpcyBwZXJmb3JtZWQgZm9yIG90aGVyIG51bWVyaWMgdmFsdWVzLlxuICAgICAgICByZXR1cm4gK2EgPT09IDAgPyAxIC8gK2EgPT09IDEgLyBiIDogK2EgPT09ICtiO1xuICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEJvb2xlYW5dJzpcbiAgICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1lcmljIHByaW1pdGl2ZSB2YWx1ZXMuIERhdGVzIGFyZSBjb21wYXJlZCBieSB0aGVpclxuICAgICAgICAvLyBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMuIE5vdGUgdGhhdCBpbnZhbGlkIGRhdGVzIHdpdGggbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zXG4gICAgICAgIC8vIG9mIGBOYU5gIGFyZSBub3QgZXF1aXZhbGVudC5cbiAgICAgICAgcmV0dXJuICthID09PSArYjtcbiAgICB9XG5cbiAgICB2YXIgYXJlQXJyYXlzID0gY2xhc3NOYW1lID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIGlmICghYXJlQXJyYXlzKSB7XG4gICAgICBpZiAodHlwZW9mIGEgIT0gJ29iamVjdCcgfHwgdHlwZW9mIGIgIT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gT2JqZWN0cyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVpdmFsZW50LCBidXQgYE9iamVjdGBzIG9yIGBBcnJheWBzXG4gICAgICAvLyBmcm9tIGRpZmZlcmVudCBmcmFtZXMgYXJlLlxuICAgICAgdmFyIGFDdG9yID0gYS5jb25zdHJ1Y3RvciwgYkN0b3IgPSBiLmNvbnN0cnVjdG9yO1xuICAgICAgaWYgKGFDdG9yICE9PSBiQ3RvciAmJiAhKF8uaXNGdW5jdGlvbihhQ3RvcikgJiYgYUN0b3IgaW5zdGFuY2VvZiBhQ3RvciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uaXNGdW5jdGlvbihiQ3RvcikgJiYgYkN0b3IgaW5zdGFuY2VvZiBiQ3RvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCdjb25zdHJ1Y3RvcicgaW4gYSAmJiAnY29uc3RydWN0b3InIGluIGIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQXNzdW1lIGVxdWFsaXR5IGZvciBjeWNsaWMgc3RydWN0dXJlcy4gVGhlIGFsZ29yaXRobSBmb3IgZGV0ZWN0aW5nIGN5Y2xpY1xuICAgIC8vIHN0cnVjdHVyZXMgaXMgYWRhcHRlZCBmcm9tIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjMsIGFic3RyYWN0IG9wZXJhdGlvbiBgSk9gLlxuXG4gICAgLy8gSW5pdGlhbGl6aW5nIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIC8vIEl0J3MgZG9uZSBoZXJlIHNpbmNlIHdlIG9ubHkgbmVlZCB0aGVtIGZvciBvYmplY3RzIGFuZCBhcnJheXMgY29tcGFyaXNvbi5cbiAgICBhU3RhY2sgPSBhU3RhY2sgfHwgW107XG4gICAgYlN0YWNrID0gYlN0YWNrIHx8IFtdO1xuICAgIHZhciBsZW5ndGggPSBhU3RhY2subGVuZ3RoO1xuICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgLy8gTGluZWFyIHNlYXJjaC4gUGVyZm9ybWFuY2UgaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mXG4gICAgICAvLyB1bmlxdWUgbmVzdGVkIHN0cnVjdHVyZXMuXG4gICAgICBpZiAoYVN0YWNrW2xlbmd0aF0gPT09IGEpIHJldHVybiBiU3RhY2tbbGVuZ3RoXSA9PT0gYjtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGZpcnN0IG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnB1c2goYSk7XG4gICAgYlN0YWNrLnB1c2goYik7XG5cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgYW5kIGFycmF5cy5cbiAgICBpZiAoYXJlQXJyYXlzKSB7XG4gICAgICAvLyBDb21wYXJlIGFycmF5IGxlbmd0aHMgdG8gZGV0ZXJtaW5lIGlmIGEgZGVlcCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeS5cbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIERlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXMuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKCFlcShhW2xlbmd0aF0sIGJbbGVuZ3RoXSwgYVN0YWNrLCBiU3RhY2spKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERlZXAgY29tcGFyZSBvYmplY3RzLlxuICAgICAgdmFyIGtleXMgPSBfLmtleXMoYSksIGtleTtcbiAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgLy8gRW5zdXJlIHRoYXQgYm90aCBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUgbnVtYmVyIG9mIHByb3BlcnRpZXMgYmVmb3JlIGNvbXBhcmluZyBkZWVwIGVxdWFsaXR5LlxuICAgICAgaWYgKF8ua2V5cyhiKS5sZW5ndGggIT09IGxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIC8vIERlZXAgY29tcGFyZSBlYWNoIG1lbWJlclxuICAgICAgICBrZXkgPSBrZXlzW2xlbmd0aF07XG4gICAgICAgIGlmICghKF8uaGFzKGIsIGtleSkgJiYgZXEoYVtrZXldLCBiW2tleV0sIGFTdGFjaywgYlN0YWNrKSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBvYmplY3QgZnJvbSB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnBvcCgpO1xuICAgIGJTdGFjay5wb3AoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBQZXJmb3JtIGEgZGVlcCBjb21wYXJpc29uIHRvIGNoZWNrIGlmIHR3byBvYmplY3RzIGFyZSBlcXVhbC5cbiAgXy5pc0VxdWFsID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBlcShhLCBiKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIGFycmF5LCBzdHJpbmcsIG9yIG9iamVjdCBlbXB0eT9cbiAgLy8gQW4gXCJlbXB0eVwiIG9iamVjdCBoYXMgbm8gZW51bWVyYWJsZSBvd24tcHJvcGVydGllcy5cbiAgXy5pc0VtcHR5ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSAmJiAoXy5pc0FycmF5KG9iaikgfHwgXy5pc1N0cmluZyhvYmopIHx8IF8uaXNBcmd1bWVudHMob2JqKSkpIHJldHVybiBvYmoubGVuZ3RoID09PSAwO1xuICAgIHJldHVybiBfLmtleXMob2JqKS5sZW5ndGggPT09IDA7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIERPTSBlbGVtZW50P1xuICBfLmlzRWxlbWVudCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiAhIShvYmogJiYgb2JqLm5vZGVUeXBlID09PSAxKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGFuIGFycmF5P1xuICAvLyBEZWxlZ2F0ZXMgdG8gRUNNQTUncyBuYXRpdmUgQXJyYXkuaXNBcnJheVxuICBfLmlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSBhbiBvYmplY3Q/XG4gIF8uaXNPYmplY3QgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBvYmo7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZSA9PT0gJ29iamVjdCcgJiYgISFvYmo7XG4gIH07XG5cbiAgLy8gQWRkIHNvbWUgaXNUeXBlIG1ldGhvZHM6IGlzQXJndW1lbnRzLCBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaXNOdW1iZXIsIGlzRGF0ZSwgaXNSZWdFeHAsIGlzRXJyb3IuXG4gIF8uZWFjaChbJ0FyZ3VtZW50cycsICdGdW5jdGlvbicsICdTdHJpbmcnLCAnTnVtYmVyJywgJ0RhdGUnLCAnUmVnRXhwJywgJ0Vycm9yJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBfWydpcycgKyBuYW1lXSA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgJyArIG5hbWUgKyAnXSc7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gRGVmaW5lIGEgZmFsbGJhY2sgdmVyc2lvbiBvZiB0aGUgbWV0aG9kIGluIGJyb3dzZXJzIChhaGVtLCBJRSA8IDkpLCB3aGVyZVxuICAvLyB0aGVyZSBpc24ndCBhbnkgaW5zcGVjdGFibGUgXCJBcmd1bWVudHNcIiB0eXBlLlxuICBpZiAoIV8uaXNBcmd1bWVudHMoYXJndW1lbnRzKSkge1xuICAgIF8uaXNBcmd1bWVudHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBfLmhhcyhvYmosICdjYWxsZWUnKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gT3B0aW1pemUgYGlzRnVuY3Rpb25gIGlmIGFwcHJvcHJpYXRlLiBXb3JrIGFyb3VuZCBzb21lIHR5cGVvZiBidWdzIGluIG9sZCB2OCxcbiAgLy8gSUUgMTEgKCMxNjIxKSwgYW5kIGluIFNhZmFyaSA4ICgjMTkyOSkuXG4gIGlmICh0eXBlb2YgLy4vICE9ICdmdW5jdGlvbicgJiYgdHlwZW9mIEludDhBcnJheSAhPSAnb2JqZWN0Jykge1xuICAgIF8uaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT0gJ2Z1bmN0aW9uJyB8fCBmYWxzZTtcbiAgICB9O1xuICB9XG5cbiAgLy8gSXMgYSBnaXZlbiBvYmplY3QgYSBmaW5pdGUgbnVtYmVyP1xuICBfLmlzRmluaXRlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIGlzRmluaXRlKG9iaikgJiYgIWlzTmFOKHBhcnNlRmxvYXQob2JqKSk7XG4gIH07XG5cbiAgLy8gSXMgdGhlIGdpdmVuIHZhbHVlIGBOYU5gPyAoTmFOIGlzIHRoZSBvbmx5IG51bWJlciB3aGljaCBkb2VzIG5vdCBlcXVhbCBpdHNlbGYpLlxuICBfLmlzTmFOID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIF8uaXNOdW1iZXIob2JqKSAmJiBvYmogIT09ICtvYmo7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIGJvb2xlYW4/XG4gIF8uaXNCb29sZWFuID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gdHJ1ZSB8fCBvYmogPT09IGZhbHNlIHx8IHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgZXF1YWwgdG8gbnVsbD9cbiAgXy5pc051bGwgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSBudWxsO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgdW5kZWZpbmVkP1xuICBfLmlzVW5kZWZpbmVkID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gdm9pZCAwO1xuICB9O1xuXG4gIC8vIFNob3J0Y3V0IGZ1bmN0aW9uIGZvciBjaGVja2luZyBpZiBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gcHJvcGVydHkgZGlyZWN0bHlcbiAgLy8gb24gaXRzZWxmIChpbiBvdGhlciB3b3Jkcywgbm90IG9uIGEgcHJvdG90eXBlKS5cbiAgXy5oYXMgPSBmdW5jdGlvbihvYmosIGtleSkge1xuICAgIHJldHVybiBvYmogIT0gbnVsbCAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbiAgfTtcblxuICAvLyBVdGlsaXR5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFJ1biBVbmRlcnNjb3JlLmpzIGluICpub0NvbmZsaWN0KiBtb2RlLCByZXR1cm5pbmcgdGhlIGBfYCB2YXJpYWJsZSB0byBpdHNcbiAgLy8gcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICByb290Ll8gPSBwcmV2aW91c1VuZGVyc2NvcmU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gS2VlcCB0aGUgaWRlbnRpdHkgZnVuY3Rpb24gYXJvdW5kIGZvciBkZWZhdWx0IGl0ZXJhdGVlcy5cbiAgXy5pZGVudGl0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIC8vIFByZWRpY2F0ZS1nZW5lcmF0aW5nIGZ1bmN0aW9ucy4gT2Z0ZW4gdXNlZnVsIG91dHNpZGUgb2YgVW5kZXJzY29yZS5cbiAgXy5jb25zdGFudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gIH07XG5cbiAgXy5ub29wID0gZnVuY3Rpb24oKXt9O1xuXG4gIF8ucHJvcGVydHkgPSBwcm9wZXJ0eTtcblxuICAvLyBHZW5lcmF0ZXMgYSBmdW5jdGlvbiBmb3IgYSBnaXZlbiBvYmplY3QgdGhhdCByZXR1cm5zIGEgZ2l2ZW4gcHJvcGVydHkuXG4gIF8ucHJvcGVydHlPZiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT0gbnVsbCA/IGZ1bmN0aW9uKCl7fSA6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIHByZWRpY2F0ZSBmb3IgY2hlY2tpbmcgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mXG4gIC8vIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLm1hdGNoZXIgPSBfLm1hdGNoZXMgPSBmdW5jdGlvbihhdHRycykge1xuICAgIGF0dHJzID0gXy5leHRlbmRPd24oe30sIGF0dHJzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gXy5pc01hdGNoKG9iaiwgYXR0cnMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUnVuIGEgZnVuY3Rpb24gKipuKiogdGltZXMuXG4gIF8udGltZXMgPSBmdW5jdGlvbihuLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciBhY2N1bSA9IEFycmF5KE1hdGgubWF4KDAsIG4pKTtcbiAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQsIDEpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSBhY2N1bVtpXSA9IGl0ZXJhdGVlKGkpO1xuICAgIHJldHVybiBhY2N1bTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIG1pbiBhbmQgbWF4IChpbmNsdXNpdmUpLlxuICBfLnJhbmRvbSA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgaWYgKG1heCA9PSBudWxsKSB7XG4gICAgICBtYXggPSBtaW47XG4gICAgICBtaW4gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbWluICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKTtcbiAgfTtcblxuICAvLyBBIChwb3NzaWJseSBmYXN0ZXIpIHdheSB0byBnZXQgdGhlIGN1cnJlbnQgdGltZXN0YW1wIGFzIGFuIGludGVnZXIuXG4gIF8ubm93ID0gRGF0ZS5ub3cgfHwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB9O1xuXG4gICAvLyBMaXN0IG9mIEhUTUwgZW50aXRpZXMgZm9yIGVzY2FwaW5nLlxuICB2YXIgZXNjYXBlTWFwID0ge1xuICAgICcmJzogJyZhbXA7JyxcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7JyxcbiAgICAnXCInOiAnJnF1b3Q7JyxcbiAgICBcIidcIjogJyYjeDI3OycsXG4gICAgJ2AnOiAnJiN4NjA7J1xuICB9O1xuICB2YXIgdW5lc2NhcGVNYXAgPSBfLmludmVydChlc2NhcGVNYXApO1xuXG4gIC8vIEZ1bmN0aW9ucyBmb3IgZXNjYXBpbmcgYW5kIHVuZXNjYXBpbmcgc3RyaW5ncyB0by9mcm9tIEhUTUwgaW50ZXJwb2xhdGlvbi5cbiAgdmFyIGNyZWF0ZUVzY2FwZXIgPSBmdW5jdGlvbihtYXApIHtcbiAgICB2YXIgZXNjYXBlciA9IGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbWFwW21hdGNoXTtcbiAgICB9O1xuICAgIC8vIFJlZ2V4ZXMgZm9yIGlkZW50aWZ5aW5nIGEga2V5IHRoYXQgbmVlZHMgdG8gYmUgZXNjYXBlZFxuICAgIHZhciBzb3VyY2UgPSAnKD86JyArIF8ua2V5cyhtYXApLmpvaW4oJ3wnKSArICcpJztcbiAgICB2YXIgdGVzdFJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UpO1xuICAgIHZhciByZXBsYWNlUmVnZXhwID0gUmVnRXhwKHNvdXJjZSwgJ2cnKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcgPT0gbnVsbCA/ICcnIDogJycgKyBzdHJpbmc7XG4gICAgICByZXR1cm4gdGVzdFJlZ2V4cC50ZXN0KHN0cmluZykgPyBzdHJpbmcucmVwbGFjZShyZXBsYWNlUmVnZXhwLCBlc2NhcGVyKSA6IHN0cmluZztcbiAgICB9O1xuICB9O1xuICBfLmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIoZXNjYXBlTWFwKTtcbiAgXy51bmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIodW5lc2NhcGVNYXApO1xuXG4gIC8vIElmIHRoZSB2YWx1ZSBvZiB0aGUgbmFtZWQgYHByb3BlcnR5YCBpcyBhIGZ1bmN0aW9uIHRoZW4gaW52b2tlIGl0IHdpdGggdGhlXG4gIC8vIGBvYmplY3RgIGFzIGNvbnRleHQ7IG90aGVyd2lzZSwgcmV0dXJuIGl0LlxuICBfLnJlc3VsdCA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHksIGZhbGxiYWNrKSB7XG4gICAgdmFyIHZhbHVlID0gb2JqZWN0ID09IG51bGwgPyB2b2lkIDAgOiBvYmplY3RbcHJvcGVydHldO1xuICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICB2YWx1ZSA9IGZhbGxiYWNrO1xuICAgIH1cbiAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKHZhbHVlKSA/IHZhbHVlLmNhbGwob2JqZWN0KSA6IHZhbHVlO1xuICB9O1xuXG4gIC8vIEdlbmVyYXRlIGEgdW5pcXVlIGludGVnZXIgaWQgKHVuaXF1ZSB3aXRoaW4gdGhlIGVudGlyZSBjbGllbnQgc2Vzc2lvbikuXG4gIC8vIFVzZWZ1bCBmb3IgdGVtcG9yYXJ5IERPTSBpZHMuXG4gIHZhciBpZENvdW50ZXIgPSAwO1xuICBfLnVuaXF1ZUlkID0gZnVuY3Rpb24ocHJlZml4KSB7XG4gICAgdmFyIGlkID0gKytpZENvdW50ZXIgKyAnJztcbiAgICByZXR1cm4gcHJlZml4ID8gcHJlZml4ICsgaWQgOiBpZDtcbiAgfTtcblxuICAvLyBCeSBkZWZhdWx0LCBVbmRlcnNjb3JlIHVzZXMgRVJCLXN0eWxlIHRlbXBsYXRlIGRlbGltaXRlcnMsIGNoYW5nZSB0aGVcbiAgLy8gZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZSBhbHRlcm5hdGl2ZSBkZWxpbWl0ZXJzLlxuICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgZXZhbHVhdGUgICAgOiAvPCUoW1xcc1xcU10rPyklPi9nLFxuICAgIGludGVycG9sYXRlIDogLzwlPShbXFxzXFxTXSs/KSU+L2csXG4gICAgZXNjYXBlICAgICAgOiAvPCUtKFtcXHNcXFNdKz8pJT4vZ1xuICB9O1xuXG4gIC8vIFdoZW4gY3VzdG9taXppbmcgYHRlbXBsYXRlU2V0dGluZ3NgLCBpZiB5b3UgZG9uJ3Qgd2FudCB0byBkZWZpbmUgYW5cbiAgLy8gaW50ZXJwb2xhdGlvbiwgZXZhbHVhdGlvbiBvciBlc2NhcGluZyByZWdleCwgd2UgbmVlZCBvbmUgdGhhdCBpc1xuICAvLyBndWFyYW50ZWVkIG5vdCB0byBtYXRjaC5cbiAgdmFyIG5vTWF0Y2ggPSAvKC4pXi87XG5cbiAgLy8gQ2VydGFpbiBjaGFyYWN0ZXJzIG5lZWQgdG8gYmUgZXNjYXBlZCBzbyB0aGF0IHRoZXkgY2FuIGJlIHB1dCBpbnRvIGFcbiAgLy8gc3RyaW5nIGxpdGVyYWwuXG4gIHZhciBlc2NhcGVzID0ge1xuICAgIFwiJ1wiOiAgICAgIFwiJ1wiLFxuICAgICdcXFxcJzogICAgICdcXFxcJyxcbiAgICAnXFxyJzogICAgICdyJyxcbiAgICAnXFxuJzogICAgICduJyxcbiAgICAnXFx1MjAyOCc6ICd1MjAyOCcsXG4gICAgJ1xcdTIwMjknOiAndTIwMjknXG4gIH07XG5cbiAgdmFyIGVzY2FwZXIgPSAvXFxcXHwnfFxccnxcXG58XFx1MjAyOHxcXHUyMDI5L2c7XG5cbiAgdmFyIGVzY2FwZUNoYXIgPSBmdW5jdGlvbihtYXRjaCkge1xuICAgIHJldHVybiAnXFxcXCcgKyBlc2NhcGVzW21hdGNoXTtcbiAgfTtcblxuICAvLyBKYXZhU2NyaXB0IG1pY3JvLXRlbXBsYXRpbmcsIHNpbWlsYXIgdG8gSm9obiBSZXNpZydzIGltcGxlbWVudGF0aW9uLlxuICAvLyBVbmRlcnNjb3JlIHRlbXBsYXRpbmcgaGFuZGxlcyBhcmJpdHJhcnkgZGVsaW1pdGVycywgcHJlc2VydmVzIHdoaXRlc3BhY2UsXG4gIC8vIGFuZCBjb3JyZWN0bHkgZXNjYXBlcyBxdW90ZXMgd2l0aGluIGludGVycG9sYXRlZCBjb2RlLlxuICAvLyBOQjogYG9sZFNldHRpbmdzYCBvbmx5IGV4aXN0cyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIF8udGVtcGxhdGUgPSBmdW5jdGlvbih0ZXh0LCBzZXR0aW5ncywgb2xkU2V0dGluZ3MpIHtcbiAgICBpZiAoIXNldHRpbmdzICYmIG9sZFNldHRpbmdzKSBzZXR0aW5ncyA9IG9sZFNldHRpbmdzO1xuICAgIHNldHRpbmdzID0gXy5kZWZhdWx0cyh7fSwgc2V0dGluZ3MsIF8udGVtcGxhdGVTZXR0aW5ncyk7XG5cbiAgICAvLyBDb21iaW5lIGRlbGltaXRlcnMgaW50byBvbmUgcmVndWxhciBleHByZXNzaW9uIHZpYSBhbHRlcm5hdGlvbi5cbiAgICB2YXIgbWF0Y2hlciA9IFJlZ0V4cChbXG4gICAgICAoc2V0dGluZ3MuZXNjYXBlIHx8IG5vTWF0Y2gpLnNvdXJjZSxcbiAgICAgIChzZXR0aW5ncy5pbnRlcnBvbGF0ZSB8fCBub01hdGNoKS5zb3VyY2UsXG4gICAgICAoc2V0dGluZ3MuZXZhbHVhdGUgfHwgbm9NYXRjaCkuc291cmNlXG4gICAgXS5qb2luKCd8JykgKyAnfCQnLCAnZycpO1xuXG4gICAgLy8gQ29tcGlsZSB0aGUgdGVtcGxhdGUgc291cmNlLCBlc2NhcGluZyBzdHJpbmcgbGl0ZXJhbHMgYXBwcm9wcmlhdGVseS5cbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBzb3VyY2UgPSBcIl9fcCs9J1wiO1xuICAgIHRleHQucmVwbGFjZShtYXRjaGVyLCBmdW5jdGlvbihtYXRjaCwgZXNjYXBlLCBpbnRlcnBvbGF0ZSwgZXZhbHVhdGUsIG9mZnNldCkge1xuICAgICAgc291cmNlICs9IHRleHQuc2xpY2UoaW5kZXgsIG9mZnNldCkucmVwbGFjZShlc2NhcGVyLCBlc2NhcGVDaGFyKTtcbiAgICAgIGluZGV4ID0gb2Zmc2V0ICsgbWF0Y2gubGVuZ3RoO1xuXG4gICAgICBpZiAoZXNjYXBlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIicrXFxuKChfX3Q9KFwiICsgZXNjYXBlICsgXCIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcXG4nXCI7XG4gICAgICB9IGVsc2UgaWYgKGludGVycG9sYXRlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIicrXFxuKChfX3Q9KFwiICsgaW50ZXJwb2xhdGUgKyBcIikpPT1udWxsPycnOl9fdCkrXFxuJ1wiO1xuICAgICAgfSBlbHNlIGlmIChldmFsdWF0ZSkge1xuICAgICAgICBzb3VyY2UgKz0gXCInO1xcblwiICsgZXZhbHVhdGUgKyBcIlxcbl9fcCs9J1wiO1xuICAgICAgfVxuXG4gICAgICAvLyBBZG9iZSBWTXMgbmVlZCB0aGUgbWF0Y2ggcmV0dXJuZWQgdG8gcHJvZHVjZSB0aGUgY29ycmVjdCBvZmZlc3QuXG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfSk7XG4gICAgc291cmNlICs9IFwiJztcXG5cIjtcblxuICAgIC8vIElmIGEgdmFyaWFibGUgaXMgbm90IHNwZWNpZmllZCwgcGxhY2UgZGF0YSB2YWx1ZXMgaW4gbG9jYWwgc2NvcGUuXG4gICAgaWYgKCFzZXR0aW5ncy52YXJpYWJsZSkgc291cmNlID0gJ3dpdGgob2JqfHx7fSl7XFxuJyArIHNvdXJjZSArICd9XFxuJztcblxuICAgIHNvdXJjZSA9IFwidmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLFwiICtcbiAgICAgIFwicHJpbnQ9ZnVuY3Rpb24oKXtfX3ArPV9fai5jYWxsKGFyZ3VtZW50cywnJyk7fTtcXG5cIiArXG4gICAgICBzb3VyY2UgKyAncmV0dXJuIF9fcDtcXG4nO1xuXG4gICAgdHJ5IHtcbiAgICAgIHZhciByZW5kZXIgPSBuZXcgRnVuY3Rpb24oc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaicsICdfJywgc291cmNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBlLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuXG4gICAgdmFyIHRlbXBsYXRlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGRhdGEsIF8pO1xuICAgIH07XG5cbiAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBzb3VyY2UgYXMgYSBjb252ZW5pZW5jZSBmb3IgcHJlY29tcGlsYXRpb24uXG4gICAgdmFyIGFyZ3VtZW50ID0gc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaic7XG4gICAgdGVtcGxhdGUuc291cmNlID0gJ2Z1bmN0aW9uKCcgKyBhcmd1bWVudCArICcpe1xcbicgKyBzb3VyY2UgKyAnfSc7XG5cbiAgICByZXR1cm4gdGVtcGxhdGU7XG4gIH07XG5cbiAgLy8gQWRkIGEgXCJjaGFpblwiIGZ1bmN0aW9uLiBTdGFydCBjaGFpbmluZyBhIHdyYXBwZWQgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8uY2hhaW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBfKG9iaik7XG4gICAgaW5zdGFuY2UuX2NoYWluID0gdHJ1ZTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH07XG5cbiAgLy8gT09QXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuICAvLyBJZiBVbmRlcnNjb3JlIGlzIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLCBpdCByZXR1cm5zIGEgd3JhcHBlZCBvYmplY3QgdGhhdFxuICAvLyBjYW4gYmUgdXNlZCBPTy1zdHlsZS4gVGhpcyB3cmFwcGVyIGhvbGRzIGFsdGVyZWQgdmVyc2lvbnMgb2YgYWxsIHRoZVxuICAvLyB1bmRlcnNjb3JlIGZ1bmN0aW9ucy4gV3JhcHBlZCBvYmplY3RzIG1heSBiZSBjaGFpbmVkLlxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb250aW51ZSBjaGFpbmluZyBpbnRlcm1lZGlhdGUgcmVzdWx0cy5cbiAgdmFyIHJlc3VsdCA9IGZ1bmN0aW9uKGluc3RhbmNlLCBvYmopIHtcbiAgICByZXR1cm4gaW5zdGFuY2UuX2NoYWluID8gXyhvYmopLmNoYWluKCkgOiBvYmo7XG4gIH07XG5cbiAgLy8gQWRkIHlvdXIgb3duIGN1c3RvbSBmdW5jdGlvbnMgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm1peGluID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgXy5lYWNoKF8uZnVuY3Rpb25zKG9iaiksIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciBmdW5jID0gX1tuYW1lXSA9IG9ialtuYW1lXTtcbiAgICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gW3RoaXMuX3dyYXBwZWRdO1xuICAgICAgICBwdXNoLmFwcGx5KGFyZ3MsIGFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiByZXN1bHQodGhpcywgZnVuYy5hcHBseShfLCBhcmdzKSk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEFkZCBhbGwgb2YgdGhlIFVuZGVyc2NvcmUgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyIG9iamVjdC5cbiAgXy5taXhpbihfKTtcblxuICAvLyBBZGQgYWxsIG11dGF0b3IgQXJyYXkgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyLlxuICBfLmVhY2goWydwb3AnLCAncHVzaCcsICdyZXZlcnNlJywgJ3NoaWZ0JywgJ3NvcnQnLCAnc3BsaWNlJywgJ3Vuc2hpZnQnXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdO1xuICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb2JqID0gdGhpcy5fd3JhcHBlZDtcbiAgICAgIG1ldGhvZC5hcHBseShvYmosIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoKG5hbWUgPT09ICdzaGlmdCcgfHwgbmFtZSA9PT0gJ3NwbGljZScpICYmIG9iai5sZW5ndGggPT09IDApIGRlbGV0ZSBvYmpbMF07XG4gICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIG9iaik7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQWRkIGFsbCBhY2Nlc3NvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG4gIF8uZWFjaChbJ2NvbmNhdCcsICdqb2luJywgJ3NsaWNlJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHJlc3VsdCh0aGlzLCBtZXRob2QuYXBwbHkodGhpcy5fd3JhcHBlZCwgYXJndW1lbnRzKSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gRXh0cmFjdHMgdGhlIHJlc3VsdCBmcm9tIGEgd3JhcHBlZCBhbmQgY2hhaW5lZCBvYmplY3QuXG4gIF8ucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dyYXBwZWQ7XG4gIH07XG5cbiAgLy8gUHJvdmlkZSB1bndyYXBwaW5nIHByb3h5IGZvciBzb21lIG1ldGhvZHMgdXNlZCBpbiBlbmdpbmUgb3BlcmF0aW9uc1xuICAvLyBzdWNoIGFzIGFyaXRobWV0aWMgYW5kIEpTT04gc3RyaW5naWZpY2F0aW9uLlxuICBfLnByb3RvdHlwZS52YWx1ZU9mID0gXy5wcm90b3R5cGUudG9KU09OID0gXy5wcm90b3R5cGUudmFsdWU7XG5cbiAgXy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJycgKyB0aGlzLl93cmFwcGVkO1xuICB9O1xuXG4gIC8vIEFNRCByZWdpc3RyYXRpb24gaGFwcGVucyBhdCB0aGUgZW5kIGZvciBjb21wYXRpYmlsaXR5IHdpdGggQU1EIGxvYWRlcnNcbiAgLy8gdGhhdCBtYXkgbm90IGVuZm9yY2UgbmV4dC10dXJuIHNlbWFudGljcyBvbiBtb2R1bGVzLiBFdmVuIHRob3VnaCBnZW5lcmFsXG4gIC8vIHByYWN0aWNlIGZvciBBTUQgcmVnaXN0cmF0aW9uIGlzIHRvIGJlIGFub255bW91cywgdW5kZXJzY29yZSByZWdpc3RlcnNcbiAgLy8gYXMgYSBuYW1lZCBtb2R1bGUgYmVjYXVzZSwgbGlrZSBqUXVlcnksIGl0IGlzIGEgYmFzZSBsaWJyYXJ5IHRoYXQgaXNcbiAgLy8gcG9wdWxhciBlbm91Z2ggdG8gYmUgYnVuZGxlZCBpbiBhIHRoaXJkIHBhcnR5IGxpYiwgYnV0IG5vdCBiZSBwYXJ0IG9mXG4gIC8vIGFuIEFNRCBsb2FkIHJlcXVlc3QuIFRob3NlIGNhc2VzIGNvdWxkIGdlbmVyYXRlIGFuIGVycm9yIHdoZW4gYW5cbiAgLy8gYW5vbnltb3VzIGRlZmluZSgpIGlzIGNhbGxlZCBvdXRzaWRlIG9mIGEgbG9hZGVyIHJlcXVlc3QuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoJ3VuZGVyc2NvcmUnLCBbXSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXztcbiAgICB9KTtcbiAgfVxufS5jYWxsKHRoaXMpKTtcbiIsIiFmdW5jdGlvbigpe1xuICB2YXIgZDMgPSB7dmVyc2lvbjogXCIzLjUuMTdcIn07IC8vIHNlbXZlclxudmFyIGQzX2RvY3VtZW50ID0gdGhpcy5kb2N1bWVudDtcblxuZnVuY3Rpb24gZDNfZG9jdW1lbnRFbGVtZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGVcbiAgICAgICYmIChub2RlLm93bmVyRG9jdW1lbnQgLy8gbm9kZSBpcyBhIE5vZGVcbiAgICAgIHx8IG5vZGUuZG9jdW1lbnQgLy8gbm9kZSBpcyBhIFdpbmRvd1xuICAgICAgfHwgbm9kZSkuZG9jdW1lbnRFbGVtZW50OyAvLyBub2RlIGlzIGEgRG9jdW1lbnRcbn1cblxuZnVuY3Rpb24gZDNfd2luZG93KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGVcbiAgICAgICYmICgobm9kZS5vd25lckRvY3VtZW50ICYmIG5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldykgLy8gbm9kZSBpcyBhIE5vZGVcbiAgICAgICAgfHwgKG5vZGUuZG9jdW1lbnQgJiYgbm9kZSkgLy8gbm9kZSBpcyBhIFdpbmRvd1xuICAgICAgICB8fCBub2RlLmRlZmF1bHRWaWV3KTsgLy8gbm9kZSBpcyBhIERvY3VtZW50XG59XG5mdW5jdGlvbiBkM19pZGVudGl0eShkKSB7XG4gIHJldHVybiBkO1xufVxuLy8gQ29waWVzIGEgdmFyaWFibGUgbnVtYmVyIG9mIG1ldGhvZHMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0LlxuZDMucmViaW5kID0gZnVuY3Rpb24odGFyZ2V0LCBzb3VyY2UpIHtcbiAgdmFyIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aCwgbWV0aG9kO1xuICB3aGlsZSAoKytpIDwgbikgdGFyZ2V0W21ldGhvZCA9IGFyZ3VtZW50c1tpXV0gPSBkM19yZWJpbmQodGFyZ2V0LCBzb3VyY2UsIHNvdXJjZVttZXRob2RdKTtcbiAgcmV0dXJuIHRhcmdldDtcbn07XG5cbi8vIE1ldGhvZCBpcyBhc3N1bWVkIHRvIGJlIGEgc3RhbmRhcmQgRDMgZ2V0dGVyLXNldHRlcjpcbi8vIElmIHBhc3NlZCB3aXRoIG5vIGFyZ3VtZW50cywgZ2V0cyB0aGUgdmFsdWUuXG4vLyBJZiBwYXNzZWQgd2l0aCBhcmd1bWVudHMsIHNldHMgdGhlIHZhbHVlIGFuZCByZXR1cm5zIHRoZSB0YXJnZXQuXG5mdW5jdGlvbiBkM19yZWJpbmQodGFyZ2V0LCBzb3VyY2UsIG1ldGhvZCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlID0gbWV0aG9kLmFwcGx5KHNvdXJjZSwgYXJndW1lbnRzKTtcbiAgICByZXR1cm4gdmFsdWUgPT09IHNvdXJjZSA/IHRhcmdldCA6IHZhbHVlO1xuICB9O1xufVxuZnVuY3Rpb24gZDNfdmVuZG9yU3ltYm9sKG9iamVjdCwgbmFtZSkge1xuICBpZiAobmFtZSBpbiBvYmplY3QpIHJldHVybiBuYW1lO1xuICBuYW1lID0gbmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSk7XG4gIGZvciAodmFyIGkgPSAwLCBuID0gZDNfdmVuZG9yUHJlZml4ZXMubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgdmFyIHByZWZpeE5hbWUgPSBkM192ZW5kb3JQcmVmaXhlc1tpXSArIG5hbWU7XG4gICAgaWYgKHByZWZpeE5hbWUgaW4gb2JqZWN0KSByZXR1cm4gcHJlZml4TmFtZTtcbiAgfVxufVxuXG52YXIgZDNfdmVuZG9yUHJlZml4ZXMgPSBbXCJ3ZWJraXRcIiwgXCJtc1wiLCBcIm1velwiLCBcIk1velwiLCBcIm9cIiwgXCJPXCJdO1xuZnVuY3Rpb24gZDNfY2xhc3MoY3RvciwgcHJvcGVydGllcykge1xuICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdG9yLnByb3RvdHlwZSwga2V5LCB7XG4gICAgICB2YWx1ZTogcHJvcGVydGllc1trZXldLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2VcbiAgICB9KTtcbiAgfVxufVxuXG5kMy5tYXAgPSBmdW5jdGlvbihvYmplY3QsIGYpIHtcbiAgdmFyIG1hcCA9IG5ldyBkM19NYXA7XG4gIGlmIChvYmplY3QgaW5zdGFuY2VvZiBkM19NYXApIHtcbiAgICBvYmplY3QuZm9yRWFjaChmdW5jdGlvbihrZXksIHZhbHVlKSB7IG1hcC5zZXQoa2V5LCB2YWx1ZSk7IH0pO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob2JqZWN0KSkge1xuICAgIHZhciBpID0gLTEsXG4gICAgICAgIG4gPSBvYmplY3QubGVuZ3RoLFxuICAgICAgICBvO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB3aGlsZSAoKytpIDwgbikgbWFwLnNldChpLCBvYmplY3RbaV0pO1xuICAgIGVsc2Ugd2hpbGUgKCsraSA8IG4pIG1hcC5zZXQoZi5jYWxsKG9iamVjdCwgbyA9IG9iamVjdFtpXSwgaSksIG8pO1xuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIG1hcC5zZXQoa2V5LCBvYmplY3Rba2V5XSk7XG4gIH1cbiAgcmV0dXJuIG1hcDtcbn07XG5cbmZ1bmN0aW9uIGQzX01hcCgpIHtcbiAgdGhpcy5fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cblxudmFyIGQzX21hcF9wcm90byA9IFwiX19wcm90b19fXCIsXG4gICAgZDNfbWFwX3plcm8gPSBcIlxcMFwiO1xuXG5kM19jbGFzcyhkM19NYXAsIHtcbiAgaGFzOiBkM19tYXBfaGFzLFxuICBnZXQ6IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiB0aGlzLl9bZDNfbWFwX2VzY2FwZShrZXkpXTtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX1tkM19tYXBfZXNjYXBlKGtleSldID0gdmFsdWU7XG4gIH0sXG4gIHJlbW92ZTogZDNfbWFwX3JlbW92ZSxcbiAga2V5czogZDNfbWFwX2tleXMsXG4gIHZhbHVlczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIHZhbHVlcy5wdXNoKHRoaXMuX1trZXldKTtcbiAgICByZXR1cm4gdmFsdWVzO1xuICB9LFxuICBlbnRyaWVzOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZW50cmllcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIGVudHJpZXMucHVzaCh7a2V5OiBkM19tYXBfdW5lc2NhcGUoa2V5KSwgdmFsdWU6IHRoaXMuX1trZXldfSk7XG4gICAgcmV0dXJuIGVudHJpZXM7XG4gIH0sXG4gIHNpemU6IGQzX21hcF9zaXplLFxuICBlbXB0eTogZDNfbWFwX2VtcHR5LFxuICBmb3JFYWNoOiBmdW5jdGlvbihmKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuXykgZi5jYWxsKHRoaXMsIGQzX21hcF91bmVzY2FwZShrZXkpLCB0aGlzLl9ba2V5XSk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBkM19tYXBfZXNjYXBlKGtleSkge1xuICByZXR1cm4gKGtleSArPSBcIlwiKSA9PT0gZDNfbWFwX3Byb3RvIHx8IGtleVswXSA9PT0gZDNfbWFwX3plcm8gPyBkM19tYXBfemVybyArIGtleSA6IGtleTtcbn1cblxuZnVuY3Rpb24gZDNfbWFwX3VuZXNjYXBlKGtleSkge1xuICByZXR1cm4gKGtleSArPSBcIlwiKVswXSA9PT0gZDNfbWFwX3plcm8gPyBrZXkuc2xpY2UoMSkgOiBrZXk7XG59XG5cbmZ1bmN0aW9uIGQzX21hcF9oYXMoa2V5KSB7XG4gIHJldHVybiBkM19tYXBfZXNjYXBlKGtleSkgaW4gdGhpcy5fO1xufVxuXG5mdW5jdGlvbiBkM19tYXBfcmVtb3ZlKGtleSkge1xuICByZXR1cm4gKGtleSA9IGQzX21hcF9lc2NhcGUoa2V5KSkgaW4gdGhpcy5fICYmIGRlbGV0ZSB0aGlzLl9ba2V5XTtcbn1cblxuZnVuY3Rpb24gZDNfbWFwX2tleXMoKSB7XG4gIHZhciBrZXlzID0gW107XG4gIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIGtleXMucHVzaChkM19tYXBfdW5lc2NhcGUoa2V5KSk7XG4gIHJldHVybiBrZXlzO1xufVxuXG5mdW5jdGlvbiBkM19tYXBfc2l6ZSgpIHtcbiAgdmFyIHNpemUgPSAwO1xuICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSArK3NpemU7XG4gIHJldHVybiBzaXplO1xufVxuXG5mdW5jdGlvbiBkM19tYXBfZW1wdHkoKSB7XG4gIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG59XG52YXIgZDNfYXJyYXlTbGljZSA9IFtdLnNsaWNlLFxuICAgIGQzX2FycmF5ID0gZnVuY3Rpb24obGlzdCkgeyByZXR1cm4gZDNfYXJyYXlTbGljZS5jYWxsKGxpc3QpOyB9OyAvLyBjb252ZXJzaW9uIGZvciBOb2RlTGlzdHNcbmZ1bmN0aW9uIGQzX25vb3AoKSB7fVxuXG5kMy5kaXNwYXRjaCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZGlzcGF0Y2ggPSBuZXcgZDNfZGlzcGF0Y2gsXG4gICAgICBpID0gLTEsXG4gICAgICBuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgd2hpbGUgKCsraSA8IG4pIGRpc3BhdGNoW2FyZ3VtZW50c1tpXV0gPSBkM19kaXNwYXRjaF9ldmVudChkaXNwYXRjaCk7XG4gIHJldHVybiBkaXNwYXRjaDtcbn07XG5cbmZ1bmN0aW9uIGQzX2Rpc3BhdGNoKCkge31cblxuZDNfZGlzcGF0Y2gucHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGkgPSB0eXBlLmluZGV4T2YoXCIuXCIpLFxuICAgICAgbmFtZSA9IFwiXCI7XG5cbiAgLy8gRXh0cmFjdCBvcHRpb25hbCBuYW1lc3BhY2UsIGUuZy4sIFwiY2xpY2suZm9vXCJcbiAgaWYgKGkgPj0gMCkge1xuICAgIG5hbWUgPSB0eXBlLnNsaWNlKGkgKyAxKTtcbiAgICB0eXBlID0gdHlwZS5zbGljZSgwLCBpKTtcbiAgfVxuXG4gIGlmICh0eXBlKSByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA8IDJcbiAgICAgID8gdGhpc1t0eXBlXS5vbihuYW1lKVxuICAgICAgOiB0aGlzW3R5cGVdLm9uKG5hbWUsIGxpc3RlbmVyKTtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgIGlmIChsaXN0ZW5lciA9PSBudWxsKSBmb3IgKHR5cGUgaW4gdGhpcykge1xuICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkodHlwZSkpIHRoaXNbdHlwZV0ub24obmFtZSwgbnVsbCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG59O1xuXG5mdW5jdGlvbiBkM19kaXNwYXRjaF9ldmVudChkaXNwYXRjaCkge1xuICB2YXIgbGlzdGVuZXJzID0gW10sXG4gICAgICBsaXN0ZW5lckJ5TmFtZSA9IG5ldyBkM19NYXA7XG5cbiAgZnVuY3Rpb24gZXZlbnQoKSB7XG4gICAgdmFyIHogPSBsaXN0ZW5lcnMsIC8vIGRlZmVuc2l2ZSByZWZlcmVuY2VcbiAgICAgICAgaSA9IC0xLFxuICAgICAgICBuID0gei5sZW5ndGgsXG4gICAgICAgIGw7XG4gICAgd2hpbGUgKCsraSA8IG4pIGlmIChsID0geltpXS5vbikgbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHJldHVybiBkaXNwYXRjaDtcbiAgfVxuXG4gIGV2ZW50Lm9uID0gZnVuY3Rpb24obmFtZSwgbGlzdGVuZXIpIHtcbiAgICB2YXIgbCA9IGxpc3RlbmVyQnlOYW1lLmdldChuYW1lKSxcbiAgICAgICAgaTtcblxuICAgIC8vIHJldHVybiB0aGUgY3VycmVudCBsaXN0ZW5lciwgaWYgYW55XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSByZXR1cm4gbCAmJiBsLm9uO1xuXG4gICAgLy8gcmVtb3ZlIHRoZSBvbGQgbGlzdGVuZXIsIGlmIGFueSAod2l0aCBjb3B5LW9uLXdyaXRlKVxuICAgIGlmIChsKSB7XG4gICAgICBsLm9uID0gbnVsbDtcbiAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5zbGljZSgwLCBpID0gbGlzdGVuZXJzLmluZGV4T2YobCkpLmNvbmNhdChsaXN0ZW5lcnMuc2xpY2UoaSArIDEpKTtcbiAgICAgIGxpc3RlbmVyQnlOYW1lLnJlbW92ZShuYW1lKTtcbiAgICB9XG5cbiAgICAvLyBhZGQgdGhlIG5ldyBsaXN0ZW5lciwgaWYgYW55XG4gICAgaWYgKGxpc3RlbmVyKSBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lckJ5TmFtZS5zZXQobmFtZSwge29uOiBsaXN0ZW5lcn0pKTtcblxuICAgIHJldHVybiBkaXNwYXRjaDtcbiAgfTtcblxuICByZXR1cm4gZXZlbnQ7XG59XG5cbmQzLmV2ZW50ID0gbnVsbDtcblxuZnVuY3Rpb24gZDNfZXZlbnRQcmV2ZW50RGVmYXVsdCgpIHtcbiAgZDMuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbn1cblxuZnVuY3Rpb24gZDNfZXZlbnRTb3VyY2UoKSB7XG4gIHZhciBlID0gZDMuZXZlbnQsIHM7XG4gIHdoaWxlIChzID0gZS5zb3VyY2VFdmVudCkgZSA9IHM7XG4gIHJldHVybiBlO1xufVxuXG4vLyBMaWtlIGQzLmRpc3BhdGNoLCBidXQgZm9yIGN1c3RvbSBldmVudHMgYWJzdHJhY3RpbmcgbmF0aXZlIFVJIGV2ZW50cy4gVGhlc2Vcbi8vIGV2ZW50cyBoYXZlIGEgdGFyZ2V0IGNvbXBvbmVudCAoc3VjaCBhcyBhIGJydXNoKSwgYSB0YXJnZXQgZWxlbWVudCAoc3VjaCBhc1xuLy8gdGhlIHN2ZzpnIGVsZW1lbnQgY29udGFpbmluZyB0aGUgYnJ1c2gpIGFuZCB0aGUgc3RhbmRhcmQgYXJndW1lbnRzIGBkYCAodGhlXG4vLyB0YXJnZXQgZWxlbWVudCdzIGRhdGEpIGFuZCBgaWAgKHRoZSBzZWxlY3Rpb24gaW5kZXggb2YgdGhlIHRhcmdldCBlbGVtZW50KS5cbmZ1bmN0aW9uIGQzX2V2ZW50RGlzcGF0Y2godGFyZ2V0KSB7XG4gIHZhciBkaXNwYXRjaCA9IG5ldyBkM19kaXNwYXRjaCxcbiAgICAgIGkgPSAwLFxuICAgICAgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraSA8IG4pIGRpc3BhdGNoW2FyZ3VtZW50c1tpXV0gPSBkM19kaXNwYXRjaF9ldmVudChkaXNwYXRjaCk7XG5cbiAgLy8gQ3JlYXRlcyBhIGRpc3BhdGNoIGNvbnRleHQgZm9yIHRoZSBzcGVjaWZpZWQgYHRoaXpgICh0eXBpY2FsbHksIHRoZSB0YXJnZXRcbiAgLy8gRE9NIGVsZW1lbnQgdGhhdCByZWNlaXZlZCB0aGUgc291cmNlIGV2ZW50KSBhbmQgYGFyZ3VtZW50emAgKHR5cGljYWxseSwgdGhlXG4gIC8vIGRhdGEgYGRgIGFuZCBpbmRleCBgaWAgb2YgdGhlIHRhcmdldCBlbGVtZW50KS4gVGhlIHJldHVybmVkIGZ1bmN0aW9uIGNhbiBiZVxuICAvLyB1c2VkIHRvIGRpc3BhdGNoIGFuIGV2ZW50IHRvIGFueSByZWdpc3RlcmVkIGxpc3RlbmVyczsgdGhlIGZ1bmN0aW9uIHRha2VzIGFcbiAgLy8gc2luZ2xlIGFyZ3VtZW50IGFzIGlucHV0LCBiZWluZyB0aGUgZXZlbnQgdG8gZGlzcGF0Y2guIFRoZSBldmVudCBtdXN0IGhhdmVcbiAgLy8gYSBcInR5cGVcIiBhdHRyaWJ1dGUgd2hpY2ggY29ycmVzcG9uZHMgdG8gYSB0eXBlIHJlZ2lzdGVyZWQgaW4gdGhlXG4gIC8vIGNvbnN0cnVjdG9yLiBUaGlzIGNvbnRleHQgd2lsbCBhdXRvbWF0aWNhbGx5IHBvcHVsYXRlIHRoZSBcInNvdXJjZUV2ZW50XCIgYW5kXG4gIC8vIFwidGFyZ2V0XCIgYXR0cmlidXRlcyBvZiB0aGUgZXZlbnQsIGFzIHdlbGwgYXMgc2V0dGluZyB0aGUgYGQzLmV2ZW50YCBnbG9iYWxcbiAgLy8gZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGUgbm90aWZpY2F0aW9uLlxuICBkaXNwYXRjaC5vZiA9IGZ1bmN0aW9uKHRoaXosIGFyZ3VtZW50eikge1xuICAgIHJldHVybiBmdW5jdGlvbihlMSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGUwID1cbiAgICAgICAgZTEuc291cmNlRXZlbnQgPSBkMy5ldmVudDtcbiAgICAgICAgZTEudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICBkMy5ldmVudCA9IGUxO1xuICAgICAgICBkaXNwYXRjaFtlMS50eXBlXS5hcHBseSh0aGl6LCBhcmd1bWVudHopO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgZDMuZXZlbnQgPSBlMDtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiBkaXNwYXRjaDtcbn1cbmQzLnJlcXVvdGUgPSBmdW5jdGlvbihzKSB7XG4gIHJldHVybiBzLnJlcGxhY2UoZDNfcmVxdW90ZV9yZSwgXCJcXFxcJCZcIik7XG59O1xuXG52YXIgZDNfcmVxdW90ZV9yZSA9IC9bXFxcXFxcXlxcJFxcKlxcK1xcP1xcfFxcW1xcXVxcKFxcKVxcLlxce1xcfV0vZztcbnZhciBkM19zdWJjbGFzcyA9IHt9Ll9fcHJvdG9fXz9cblxuLy8gVW50aWwgRUNNQVNjcmlwdCBzdXBwb3J0cyBhcnJheSBzdWJjbGFzc2luZywgcHJvdG90eXBlIGluamVjdGlvbiB3b3JrcyB3ZWxsLlxuZnVuY3Rpb24ob2JqZWN0LCBwcm90b3R5cGUpIHtcbiAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZTtcbn06XG5cbi8vIEFuZCBpZiB5b3VyIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IF9fcHJvdG9fXywgd2UnbGwgdXNlIGRpcmVjdCBleHRlbnNpb24uXG5mdW5jdGlvbihvYmplY3QsIHByb3RvdHlwZSkge1xuICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBwcm90b3R5cGUpIG9iamVjdFtwcm9wZXJ0eV0gPSBwcm90b3R5cGVbcHJvcGVydHldO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uKGdyb3Vwcykge1xuICBkM19zdWJjbGFzcyhncm91cHMsIGQzX3NlbGVjdGlvblByb3RvdHlwZSk7XG4gIHJldHVybiBncm91cHM7XG59XG5cbnZhciBkM19zZWxlY3QgPSBmdW5jdGlvbihzLCBuKSB7IHJldHVybiBuLnF1ZXJ5U2VsZWN0b3Iocyk7IH0sXG4gICAgZDNfc2VsZWN0QWxsID0gZnVuY3Rpb24ocywgbikgeyByZXR1cm4gbi5xdWVyeVNlbGVjdG9yQWxsKHMpOyB9LFxuICAgIGQzX3NlbGVjdE1hdGNoZXMgPSBmdW5jdGlvbihuLCBzKSB7XG4gICAgICB2YXIgZDNfc2VsZWN0TWF0Y2hlciA9IG4ubWF0Y2hlcyB8fCBuW2QzX3ZlbmRvclN5bWJvbChuLCBcIm1hdGNoZXNTZWxlY3RvclwiKV07XG4gICAgICBkM19zZWxlY3RNYXRjaGVzID0gZnVuY3Rpb24obiwgcykge1xuICAgICAgICByZXR1cm4gZDNfc2VsZWN0TWF0Y2hlci5jYWxsKG4sIHMpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBkM19zZWxlY3RNYXRjaGVzKG4sIHMpO1xuICAgIH07XG5cbi8vIFByZWZlciBTaXp6bGUsIGlmIGF2YWlsYWJsZS5cbmlmICh0eXBlb2YgU2l6emxlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgZDNfc2VsZWN0ID0gZnVuY3Rpb24ocywgbikgeyByZXR1cm4gU2l6emxlKHMsIG4pWzBdIHx8IG51bGw7IH07XG4gIGQzX3NlbGVjdEFsbCA9IFNpenpsZTtcbiAgZDNfc2VsZWN0TWF0Y2hlcyA9IFNpenpsZS5tYXRjaGVzU2VsZWN0b3I7XG59XG5cbmQzLnNlbGVjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZDMuc2VsZWN0KGQzX2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG59O1xuXG52YXIgZDNfc2VsZWN0aW9uUHJvdG90eXBlID0gZDMuc2VsZWN0aW9uLnByb3RvdHlwZSA9IFtdO1xuXG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICB2YXIgc3ViZ3JvdXBzID0gW10sXG4gICAgICBzdWJncm91cCxcbiAgICAgIHN1Ym5vZGUsXG4gICAgICBncm91cCxcbiAgICAgIG5vZGU7XG5cbiAgc2VsZWN0b3IgPSBkM19zZWxlY3Rpb25fc2VsZWN0b3Ioc2VsZWN0b3IpO1xuXG4gIGZvciAodmFyIGogPSAtMSwgbSA9IHRoaXMubGVuZ3RoOyArK2ogPCBtOykge1xuICAgIHN1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwID0gW10pO1xuICAgIHN1Ymdyb3VwLnBhcmVudE5vZGUgPSAoZ3JvdXAgPSB0aGlzW2pdKS5wYXJlbnROb2RlO1xuICAgIGZvciAodmFyIGkgPSAtMSwgbiA9IGdyb3VwLmxlbmd0aDsgKytpIDwgbjspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaChzdWJub2RlID0gc2VsZWN0b3IuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBqKSk7XG4gICAgICAgIGlmIChzdWJub2RlICYmIFwiX19kYXRhX19cIiBpbiBub2RlKSBzdWJub2RlLl9fZGF0YV9fID0gbm9kZS5fX2RhdGFfXztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2gobnVsbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGQzX3NlbGVjdGlvbihzdWJncm91cHMpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3NlbGVjdG9yKHNlbGVjdG9yKSB7XG4gIHJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiA/IHNlbGVjdG9yIDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX3NlbGVjdChzZWxlY3RvciwgdGhpcyk7XG4gIH07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zZWxlY3RBbGwgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICB2YXIgc3ViZ3JvdXBzID0gW10sXG4gICAgICBzdWJncm91cCxcbiAgICAgIG5vZGU7XG5cbiAgc2VsZWN0b3IgPSBkM19zZWxlY3Rpb25fc2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuXG4gIGZvciAodmFyIGogPSAtMSwgbSA9IHRoaXMubGVuZ3RoOyArK2ogPCBtOykge1xuICAgIGZvciAodmFyIGdyb3VwID0gdGhpc1tqXSwgaSA9IC0xLCBuID0gZ3JvdXAubGVuZ3RoOyArK2kgPCBuOykge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBzdWJncm91cHMucHVzaChzdWJncm91cCA9IGQzX2FycmF5KHNlbGVjdG9yLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaikpKTtcbiAgICAgICAgc3ViZ3JvdXAucGFyZW50Tm9kZSA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGQzX3NlbGVjdGlvbihzdWJncm91cHMpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3NlbGVjdG9yQWxsKHNlbGVjdG9yKSB7XG4gIHJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiA/IHNlbGVjdG9yIDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX3NlbGVjdEFsbChzZWxlY3RvciwgdGhpcyk7XG4gIH07XG59XG52YXIgZDNfbnNYaHRtbCA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuXG52YXIgZDNfbnNQcmVmaXggPSB7XG4gIHN2ZzogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICB4aHRtbDogZDNfbnNYaHRtbCxcbiAgeGxpbms6IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuICB4bWw6IFwiaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlXCIsXG4gIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXCJcbn07XG5cbmQzLm5zID0ge1xuICBwcmVmaXg6IGQzX25zUHJlZml4LFxuICBxdWFsaWZ5OiBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIGkgPSBuYW1lLmluZGV4T2YoXCI6XCIpLCBwcmVmaXggPSBuYW1lO1xuICAgIGlmIChpID49IDAgJiYgKHByZWZpeCA9IG5hbWUuc2xpY2UoMCwgaSkpICE9PSBcInhtbG5zXCIpIG5hbWUgPSBuYW1lLnNsaWNlKGkgKyAxKTtcbiAgICByZXR1cm4gZDNfbnNQcmVmaXguaGFzT3duUHJvcGVydHkocHJlZml4KSA/IHtzcGFjZTogZDNfbnNQcmVmaXhbcHJlZml4XSwgbG9jYWw6IG5hbWV9IDogbmFtZTtcbiAgfVxufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmF0dHIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcblxuICAgIC8vIEZvciBhdHRyKHN0cmluZyksIHJldHVybiB0aGUgYXR0cmlidXRlIHZhbHVlIGZvciB0aGUgZmlyc3Qgbm9kZS5cbiAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHZhciBub2RlID0gdGhpcy5ub2RlKCk7XG4gICAgICBuYW1lID0gZDMubnMucXVhbGlmeShuYW1lKTtcbiAgICAgIHJldHVybiBuYW1lLmxvY2FsXG4gICAgICAgICAgPyBub2RlLmdldEF0dHJpYnV0ZU5TKG5hbWUuc3BhY2UsIG5hbWUubG9jYWwpXG4gICAgICAgICAgOiBub2RlLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICB9XG5cbiAgICAvLyBGb3IgYXR0cihvYmplY3QpLCB0aGUgb2JqZWN0IHNwZWNpZmllcyB0aGUgbmFtZXMgYW5kIHZhbHVlcyBvZiB0aGVcbiAgICAvLyBhdHRyaWJ1dGVzIHRvIHNldCBvciByZW1vdmUuIFRoZSB2YWx1ZXMgbWF5IGJlIGZ1bmN0aW9ucyB0aGF0IGFyZVxuICAgIC8vIGV2YWx1YXRlZCBmb3IgZWFjaCBlbGVtZW50LlxuICAgIGZvciAodmFsdWUgaW4gbmFtZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9hdHRyKHZhbHVlLCBuYW1lW3ZhbHVlXSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fYXR0cihuYW1lLCB2YWx1ZSkpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2F0dHIobmFtZSwgdmFsdWUpIHtcbiAgbmFtZSA9IGQzLm5zLnF1YWxpZnkobmFtZSk7XG5cbiAgLy8gRm9yIGF0dHIoc3RyaW5nLCBudWxsKSwgcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gIGZ1bmN0aW9uIGF0dHJOdWxsKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9XG4gIGZ1bmN0aW9uIGF0dHJOdWxsTlMoKSB7XG4gICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKTtcbiAgfVxuXG4gIC8vIEZvciBhdHRyKHN0cmluZywgc3RyaW5nKSwgc2V0IHRoZSBhdHRyaWJ1dGUgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gIGZ1bmN0aW9uIGF0dHJDb25zdGFudCgpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gIH1cbiAgZnVuY3Rpb24gYXR0ckNvbnN0YW50TlMoKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsLCB2YWx1ZSk7XG4gIH1cblxuICAvLyBGb3IgYXR0cihzdHJpbmcsIGZ1bmN0aW9uKSwgZXZhbHVhdGUgdGhlIGZ1bmN0aW9uIGZvciBlYWNoIGVsZW1lbnQsIGFuZCBzZXRcbiAgLy8gb3IgcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgYXMgYXBwcm9wcmlhdGUuXG4gIGZ1bmN0aW9uIGF0dHJGdW5jdGlvbigpIHtcbiAgICB2YXIgeCA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHggPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgZWxzZSB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB4KTtcbiAgfVxuICBmdW5jdGlvbiBhdHRyRnVuY3Rpb25OUygpIHtcbiAgICB2YXIgeCA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHggPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKTtcbiAgICBlbHNlIHRoaXMuc2V0QXR0cmlidXRlTlMobmFtZS5zcGFjZSwgbmFtZS5sb2NhbCwgeCk7XG4gIH1cblxuICByZXR1cm4gdmFsdWUgPT0gbnVsbFxuICAgICAgPyAobmFtZS5sb2NhbCA/IGF0dHJOdWxsTlMgOiBhdHRyTnVsbCkgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gKG5hbWUubG9jYWwgPyBhdHRyRnVuY3Rpb25OUyA6IGF0dHJGdW5jdGlvbilcbiAgICAgIDogKG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyA6IGF0dHJDb25zdGFudCkpO1xufVxuZnVuY3Rpb24gZDNfY29sbGFwc2Uocykge1xuICByZXR1cm4gcy50cmltKCkucmVwbGFjZSgvXFxzKy9nLCBcIiBcIik7XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5jbGFzc2VkID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG5cbiAgICAvLyBGb3IgY2xhc3NlZChzdHJpbmcpLCByZXR1cm4gdHJ1ZSBvbmx5IGlmIHRoZSBmaXJzdCBub2RlIGhhcyB0aGUgc3BlY2lmaWVkXG4gICAgLy8gY2xhc3Mgb3IgY2xhc3Nlcy4gTm90ZSB0aGF0IGV2ZW4gaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgRE9NVG9rZW5MaXN0LCBpdFxuICAgIC8vIHByb2JhYmx5IGRvZXNuJ3Qgc3VwcG9ydCBpdCBvbiBTVkcgZWxlbWVudHMgKHdoaWNoIGNhbiBiZSBhbmltYXRlZCkuXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZSgpLFxuICAgICAgICAgIG4gPSAobmFtZSA9IGQzX3NlbGVjdGlvbl9jbGFzc2VzKG5hbWUpKS5sZW5ndGgsXG4gICAgICAgICAgaSA9IC0xO1xuICAgICAgaWYgKHZhbHVlID0gbm9kZS5jbGFzc0xpc3QpIHtcbiAgICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICghdmFsdWUuY29udGFpbnMobmFtZVtpXSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICghZDNfc2VsZWN0aW9uX2NsYXNzZWRSZShuYW1lW2ldKS50ZXN0KHZhbHVlKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gRm9yIGNsYXNzZWQob2JqZWN0KSwgdGhlIG9iamVjdCBzcGVjaWZpZXMgdGhlIG5hbWVzIG9mIGNsYXNzZXMgdG8gYWRkIG9yXG4gICAgLy8gcmVtb3ZlLiBUaGUgdmFsdWVzIG1heSBiZSBmdW5jdGlvbnMgdGhhdCBhcmUgZXZhbHVhdGVkIGZvciBlYWNoIGVsZW1lbnQuXG4gICAgZm9yICh2YWx1ZSBpbiBuYW1lKSB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX2NsYXNzZWQodmFsdWUsIG5hbWVbdmFsdWVdKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBPdGhlcndpc2UsIGJvdGggYSBuYW1lIGFuZCBhIHZhbHVlIGFyZSBzcGVjaWZpZWQsIGFuZCBhcmUgaGFuZGxlZCBhcyBiZWxvdy5cbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fY2xhc3NlZChuYW1lLCB2YWx1ZSkpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZWRSZShuYW1lKSB7XG4gIHJldHVybiBuZXcgUmVnRXhwKFwiKD86XnxcXFxccyspXCIgKyBkMy5yZXF1b3RlKG5hbWUpICsgXCIoPzpcXFxccyt8JClcIiwgXCJnXCIpO1xufVxuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fY2xhc3NlcyhuYW1lKSB7XG4gIHJldHVybiAobmFtZSArIFwiXCIpLnRyaW0oKS5zcGxpdCgvXnxcXHMrLyk7XG59XG5cbi8vIE11bHRpcGxlIGNsYXNzIG5hbWVzIGFyZSBhbGxvd2VkIChlLmcuLCBcImZvbyBiYXJcIikuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fY2xhc3NlZChuYW1lLCB2YWx1ZSkge1xuICBuYW1lID0gZDNfc2VsZWN0aW9uX2NsYXNzZXMobmFtZSkubWFwKGQzX3NlbGVjdGlvbl9jbGFzc2VkTmFtZSk7XG4gIHZhciBuID0gbmFtZS5sZW5ndGg7XG5cbiAgZnVuY3Rpb24gY2xhc3NlZENvbnN0YW50KCkge1xuICAgIHZhciBpID0gLTE7XG4gICAgd2hpbGUgKCsraSA8IG4pIG5hbWVbaV0odGhpcywgdmFsdWUpO1xuICB9XG5cbiAgLy8gV2hlbiB0aGUgdmFsdWUgaXMgYSBmdW5jdGlvbiwgdGhlIGZ1bmN0aW9uIGlzIHN0aWxsIGV2YWx1YXRlZCBvbmx5IG9uY2UgcGVyXG4gIC8vIGVsZW1lbnQgZXZlbiBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgY2xhc3MgbmFtZXMuXG4gIGZ1bmN0aW9uIGNsYXNzZWRGdW5jdGlvbigpIHtcbiAgICB2YXIgaSA9IC0xLCB4ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB3aGlsZSAoKytpIDwgbikgbmFtZVtpXSh0aGlzLCB4KTtcbiAgfVxuXG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBjbGFzc2VkRnVuY3Rpb25cbiAgICAgIDogY2xhc3NlZENvbnN0YW50O1xufVxuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fY2xhc3NlZE5hbWUobmFtZSkge1xuICB2YXIgcmUgPSBkM19zZWxlY3Rpb25fY2xhc3NlZFJlKG5hbWUpO1xuICByZXR1cm4gZnVuY3Rpb24obm9kZSwgdmFsdWUpIHtcbiAgICBpZiAoYyA9IG5vZGUuY2xhc3NMaXN0KSByZXR1cm4gdmFsdWUgPyBjLmFkZChuYW1lKSA6IGMucmVtb3ZlKG5hbWUpO1xuICAgIHZhciBjID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgcmUubGFzdEluZGV4ID0gMDtcbiAgICAgIGlmICghcmUudGVzdChjKSkgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBkM19jb2xsYXBzZShjICsgXCIgXCIgKyBuYW1lKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgZDNfY29sbGFwc2UoYy5yZXBsYWNlKHJlLCBcIiBcIikpKTtcbiAgICB9XG4gIH07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zdHlsZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIGlmIChuIDwgMykge1xuXG4gICAgLy8gRm9yIHN0eWxlKG9iamVjdCkgb3Igc3R5bGUob2JqZWN0LCBzdHJpbmcpLCB0aGUgb2JqZWN0IHNwZWNpZmllcyB0aGVcbiAgICAvLyBuYW1lcyBhbmQgdmFsdWVzIG9mIHRoZSBhdHRyaWJ1dGVzIHRvIHNldCBvciByZW1vdmUuIFRoZSB2YWx1ZXMgbWF5IGJlXG4gICAgLy8gZnVuY3Rpb25zIHRoYXQgYXJlIGV2YWx1YXRlZCBmb3IgZWFjaCBlbGVtZW50LiBUaGUgb3B0aW9uYWwgc3RyaW5nXG4gICAgLy8gc3BlY2lmaWVzIHRoZSBwcmlvcml0eS5cbiAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGlmIChuIDwgMikgdmFsdWUgPSBcIlwiO1xuICAgICAgZm9yIChwcmlvcml0eSBpbiBuYW1lKSB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX3N0eWxlKHByaW9yaXR5LCBuYW1lW3ByaW9yaXR5XSwgdmFsdWUpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIEZvciBzdHlsZShzdHJpbmcpLCByZXR1cm4gdGhlIGNvbXB1dGVkIHN0eWxlIHZhbHVlIGZvciB0aGUgZmlyc3Qgbm9kZS5cbiAgICBpZiAobiA8IDIpIHtcbiAgICAgIHZhciBub2RlID0gdGhpcy5ub2RlKCk7XG4gICAgICByZXR1cm4gZDNfd2luZG93KG5vZGUpLmdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKTtcbiAgICB9XG5cbiAgICAvLyBGb3Igc3R5bGUoc3RyaW5nLCBzdHJpbmcpIG9yIHN0eWxlKHN0cmluZywgZnVuY3Rpb24pLCB1c2UgdGhlIGRlZmF1bHRcbiAgICAvLyBwcmlvcml0eS4gVGhlIHByaW9yaXR5IGlzIGlnbm9yZWQgZm9yIHN0eWxlKHN0cmluZywgbnVsbCkuXG4gICAgcHJpb3JpdHkgPSBcIlwiO1xuICB9XG5cbiAgLy8gT3RoZXJ3aXNlLCBhIG5hbWUsIHZhbHVlIGFuZCBwcmlvcml0eSBhcmUgc3BlY2lmaWVkLCBhbmQgaGFuZGxlZCBhcyBiZWxvdy5cbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fc3R5bGUobmFtZSwgdmFsdWUsIHByaW9yaXR5KSk7XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fc3R5bGUobmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG5cbiAgLy8gRm9yIHN0eWxlKG5hbWUsIG51bGwpIG9yIHN0eWxlKG5hbWUsIG51bGwsIHByaW9yaXR5KSwgcmVtb3ZlIHRoZSBzdHlsZVxuICAvLyBwcm9wZXJ0eSB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZS4gVGhlIHByaW9yaXR5IGlzIGlnbm9yZWQuXG4gIGZ1bmN0aW9uIHN0eWxlTnVsbCgpIHtcbiAgICB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICB9XG5cbiAgLy8gRm9yIHN0eWxlKG5hbWUsIHN0cmluZykgb3Igc3R5bGUobmFtZSwgc3RyaW5nLCBwcmlvcml0eSksIHNldCB0aGUgc3R5bGVcbiAgLy8gcHJvcGVydHkgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUsIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJpb3JpdHkuXG4gIGZ1bmN0aW9uIHN0eWxlQ29uc3RhbnQoKSB7XG4gICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpO1xuICB9XG5cbiAgLy8gRm9yIHN0eWxlKG5hbWUsIGZ1bmN0aW9uKSBvciBzdHlsZShuYW1lLCBmdW5jdGlvbiwgcHJpb3JpdHkpLCBldmFsdWF0ZSB0aGVcbiAgLy8gZnVuY3Rpb24gZm9yIGVhY2ggZWxlbWVudCwgYW5kIHNldCBvciByZW1vdmUgdGhlIHN0eWxlIHByb3BlcnR5IGFzXG4gIC8vIGFwcHJvcHJpYXRlLiBXaGVuIHNldHRpbmcsIHVzZSB0aGUgc3BlY2lmaWVkIHByaW9yaXR5LlxuICBmdW5jdGlvbiBzdHlsZUZ1bmN0aW9uKCkge1xuICAgIHZhciB4ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoeCA9PSBudWxsKSB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB4LCBwcmlvcml0eSk7XG4gIH1cblxuICByZXR1cm4gdmFsdWUgPT0gbnVsbFxuICAgICAgPyBzdHlsZU51bGwgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gc3R5bGVGdW5jdGlvbiA6IHN0eWxlQ29uc3RhbnQpO1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUucHJvcGVydHkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcblxuICAgIC8vIEZvciBwcm9wZXJ0eShzdHJpbmcpLCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIGZvciB0aGUgZmlyc3Qgbm9kZS5cbiAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHJldHVybiB0aGlzLm5vZGUoKVtuYW1lXTtcblxuICAgIC8vIEZvciBwcm9wZXJ0eShvYmplY3QpLCB0aGUgb2JqZWN0IHNwZWNpZmllcyB0aGUgbmFtZXMgYW5kIHZhbHVlcyBvZiB0aGVcbiAgICAvLyBwcm9wZXJ0aWVzIHRvIHNldCBvciByZW1vdmUuIFRoZSB2YWx1ZXMgbWF5IGJlIGZ1bmN0aW9ucyB0aGF0IGFyZVxuICAgIC8vIGV2YWx1YXRlZCBmb3IgZWFjaCBlbGVtZW50LlxuICAgIGZvciAodmFsdWUgaW4gbmFtZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9wcm9wZXJ0eSh2YWx1ZSwgbmFtZVt2YWx1ZV0pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIE90aGVyd2lzZSwgYm90aCBhIG5hbWUgYW5kIGEgdmFsdWUgYXJlIHNwZWNpZmllZCwgYW5kIGFyZSBoYW5kbGVkIGFzIGJlbG93LlxuICByZXR1cm4gdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9wcm9wZXJ0eShuYW1lLCB2YWx1ZSkpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3Byb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG5cbiAgLy8gRm9yIHByb3BlcnR5KG5hbWUsIG51bGwpLCByZW1vdmUgdGhlIHByb3BlcnR5IHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLlxuICBmdW5jdGlvbiBwcm9wZXJ0eU51bGwoKSB7XG4gICAgZGVsZXRlIHRoaXNbbmFtZV07XG4gIH1cblxuICAvLyBGb3IgcHJvcGVydHkobmFtZSwgc3RyaW5nKSwgc2V0IHRoZSBwcm9wZXJ0eSB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZS5cbiAgZnVuY3Rpb24gcHJvcGVydHlDb25zdGFudCgpIHtcbiAgICB0aGlzW25hbWVdID0gdmFsdWU7XG4gIH1cblxuICAvLyBGb3IgcHJvcGVydHkobmFtZSwgZnVuY3Rpb24pLCBldmFsdWF0ZSB0aGUgZnVuY3Rpb24gZm9yIGVhY2ggZWxlbWVudCwgYW5kXG4gIC8vIHNldCBvciByZW1vdmUgdGhlIHByb3BlcnR5IGFzIGFwcHJvcHJpYXRlLlxuICBmdW5jdGlvbiBwcm9wZXJ0eUZ1bmN0aW9uKCkge1xuICAgIHZhciB4ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoeCA9PSBudWxsKSBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICBlbHNlIHRoaXNbbmFtZV0gPSB4O1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlID09IG51bGxcbiAgICAgID8gcHJvcGVydHlOdWxsIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IHByb3BlcnR5RnVuY3Rpb24gOiBwcm9wZXJ0eUNvbnN0YW50KTtcbn1cblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLnRleHQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2godHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gZnVuY3Rpb24oKSB7IHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgdGhpcy50ZXh0Q29udGVudCA9IHYgPT0gbnVsbCA/IFwiXCIgOiB2OyB9IDogdmFsdWUgPT0gbnVsbFxuICAgICAgPyBmdW5jdGlvbigpIHsgdGhpcy50ZXh0Q29udGVudCA9IFwiXCI7IH1cbiAgICAgIDogZnVuY3Rpb24oKSB7IHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTsgfSlcbiAgICAgIDogdGhpcy5ub2RlKCkudGV4dENvbnRlbnQ7XG59O1xuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuaHRtbCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBmdW5jdGlvbigpIHsgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB0aGlzLmlubmVySFRNTCA9IHYgPT0gbnVsbCA/IFwiXCIgOiB2OyB9IDogdmFsdWUgPT0gbnVsbFxuICAgICAgPyBmdW5jdGlvbigpIHsgdGhpcy5pbm5lckhUTUwgPSBcIlwiOyB9XG4gICAgICA6IGZ1bmN0aW9uKCkgeyB0aGlzLmlubmVySFRNTCA9IHZhbHVlOyB9KVxuICAgICAgOiB0aGlzLm5vZGUoKS5pbm5lckhUTUw7XG59O1xuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSkge1xuICBuYW1lID0gZDNfc2VsZWN0aW9uX2NyZWF0b3IobmFtZSk7XG4gIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmRDaGlsZChuYW1lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9jcmVhdG9yKG5hbWUpIHtcblxuICBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgdmFyIGRvY3VtZW50ID0gdGhpcy5vd25lckRvY3VtZW50LFxuICAgICAgICBuYW1lc3BhY2UgPSB0aGlzLm5hbWVzcGFjZVVSSTtcbiAgICByZXR1cm4gbmFtZXNwYWNlID09PSBkM19uc1hodG1sICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5uYW1lc3BhY2VVUkkgPT09IGQzX25zWGh0bWxcbiAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpXG4gICAgICAgIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgbmFtZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVOUygpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKTtcbiAgfVxuXG4gIHJldHVybiB0eXBlb2YgbmFtZSA9PT0gXCJmdW5jdGlvblwiID8gbmFtZVxuICAgICAgOiAobmFtZSA9IGQzLm5zLnF1YWxpZnkobmFtZSkpLmxvY2FsID8gY3JlYXRlTlNcbiAgICAgIDogY3JlYXRlO1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24obmFtZSwgYmVmb3JlKSB7XG4gIG5hbWUgPSBkM19zZWxlY3Rpb25fY3JlYXRvcihuYW1lKTtcbiAgYmVmb3JlID0gZDNfc2VsZWN0aW9uX3NlbGVjdG9yKGJlZm9yZSk7XG4gIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUobmFtZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBiZWZvcmUuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCBudWxsKTtcbiAgfSk7XG59O1xuXG4vLyBUT0RPIHJlbW92ZShzZWxlY3Rvcik/XG4vLyBUT0RPIHJlbW92ZShub2RlKT9cbi8vIFRPRE8gcmVtb3ZlKGZ1bmN0aW9uKT9cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25SZW1vdmUpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uUmVtb3ZlKCkge1xuICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7XG59XG5cbmQzLnNldCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gIHZhciBzZXQgPSBuZXcgZDNfU2V0O1xuICBpZiAoYXJyYXkpIGZvciAodmFyIGkgPSAwLCBuID0gYXJyYXkubGVuZ3RoOyBpIDwgbjsgKytpKSBzZXQuYWRkKGFycmF5W2ldKTtcbiAgcmV0dXJuIHNldDtcbn07XG5cbmZ1bmN0aW9uIGQzX1NldCgpIHtcbiAgdGhpcy5fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cblxuZDNfY2xhc3MoZDNfU2V0LCB7XG4gIGhhczogZDNfbWFwX2hhcyxcbiAgYWRkOiBmdW5jdGlvbihrZXkpIHtcbiAgICB0aGlzLl9bZDNfbWFwX2VzY2FwZShrZXkgKz0gXCJcIildID0gdHJ1ZTtcbiAgICByZXR1cm4ga2V5O1xuICB9LFxuICByZW1vdmU6IGQzX21hcF9yZW1vdmUsXG4gIHZhbHVlczogZDNfbWFwX2tleXMsXG4gIHNpemU6IGQzX21hcF9zaXplLFxuICBlbXB0eTogZDNfbWFwX2VtcHR5LFxuICBmb3JFYWNoOiBmdW5jdGlvbihmKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuXykgZi5jYWxsKHRoaXMsIGQzX21hcF91bmVzY2FwZShrZXkpKTtcbiAgfVxufSk7XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICB2YXIgaSA9IC0xLFxuICAgICAgbiA9IHRoaXMubGVuZ3RoLFxuICAgICAgZ3JvdXAsXG4gICAgICBub2RlO1xuXG4gIC8vIElmIG5vIHZhbHVlIGlzIHNwZWNpZmllZCwgcmV0dXJuIHRoZSBmaXJzdCB2YWx1ZS5cbiAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgdmFsdWUgPSBuZXcgQXJyYXkobiA9IChncm91cCA9IHRoaXNbMF0pLmxlbmd0aCk7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgdmFsdWVbaV0gPSBub2RlLl9fZGF0YV9fO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBiaW5kKGdyb3VwLCBncm91cERhdGEpIHtcbiAgICB2YXIgaSxcbiAgICAgICAgbiA9IGdyb3VwLmxlbmd0aCxcbiAgICAgICAgbSA9IGdyb3VwRGF0YS5sZW5ndGgsXG4gICAgICAgIG4wID0gTWF0aC5taW4obiwgbSksXG4gICAgICAgIHVwZGF0ZU5vZGVzID0gbmV3IEFycmF5KG0pLFxuICAgICAgICBlbnRlck5vZGVzID0gbmV3IEFycmF5KG0pLFxuICAgICAgICBleGl0Tm9kZXMgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIG5vZGUsXG4gICAgICAgIG5vZGVEYXRhO1xuXG4gICAgaWYgKGtleSkge1xuICAgICAgdmFyIG5vZGVCeUtleVZhbHVlID0gbmV3IGQzX01hcCxcbiAgICAgICAgICBrZXlWYWx1ZXMgPSBuZXcgQXJyYXkobiksXG4gICAgICAgICAga2V5VmFsdWU7XG5cbiAgICAgIGZvciAoaSA9IC0xOyArK2kgPCBuOykge1xuICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgICAgaWYgKG5vZGVCeUtleVZhbHVlLmhhcyhrZXlWYWx1ZSA9IGtleS5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGkpKSkge1xuICAgICAgICAgICAgZXhpdE5vZGVzW2ldID0gbm9kZTsgLy8gZHVwbGljYXRlIHNlbGVjdGlvbiBrZXlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9kZUJ5S2V5VmFsdWUuc2V0KGtleVZhbHVlLCBub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAga2V5VmFsdWVzW2ldID0ga2V5VmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChpID0gLTE7ICsraSA8IG07KSB7XG4gICAgICAgIGlmICghKG5vZGUgPSBub2RlQnlLZXlWYWx1ZS5nZXQoa2V5VmFsdWUgPSBrZXkuY2FsbChncm91cERhdGEsIG5vZGVEYXRhID0gZ3JvdXBEYXRhW2ldLCBpKSkpKSB7XG4gICAgICAgICAgZW50ZXJOb2Rlc1tpXSA9IGQzX3NlbGVjdGlvbl9kYXRhTm9kZShub2RlRGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZSAhPT0gdHJ1ZSkgeyAvLyBubyBkdXBsaWNhdGUgZGF0YSBrZXlcbiAgICAgICAgICB1cGRhdGVOb2Rlc1tpXSA9IG5vZGU7XG4gICAgICAgICAgbm9kZS5fX2RhdGFfXyA9IG5vZGVEYXRhO1xuICAgICAgICB9XG4gICAgICAgIG5vZGVCeUtleVZhbHVlLnNldChrZXlWYWx1ZSwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoaSA9IC0xOyArK2kgPCBuOykge1xuICAgICAgICBpZiAoaSBpbiBrZXlWYWx1ZXMgJiYgbm9kZUJ5S2V5VmFsdWUuZ2V0KGtleVZhbHVlc1tpXSkgIT09IHRydWUpIHtcbiAgICAgICAgICBleGl0Tm9kZXNbaV0gPSBncm91cFtpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGkgPSAtMTsgKytpIDwgbjA7KSB7XG4gICAgICAgIG5vZGUgPSBncm91cFtpXTtcbiAgICAgICAgbm9kZURhdGEgPSBncm91cERhdGFbaV07XG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5fX2RhdGFfXyA9IG5vZGVEYXRhO1xuICAgICAgICAgIHVwZGF0ZU5vZGVzW2ldID0gbm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbnRlck5vZGVzW2ldID0gZDNfc2VsZWN0aW9uX2RhdGFOb2RlKG5vZGVEYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yICg7IGkgPCBtOyArK2kpIHtcbiAgICAgICAgZW50ZXJOb2Rlc1tpXSA9IGQzX3NlbGVjdGlvbl9kYXRhTm9kZShncm91cERhdGFbaV0pO1xuICAgICAgfVxuICAgICAgZm9yICg7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgZXhpdE5vZGVzW2ldID0gZ3JvdXBbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZW50ZXJOb2Rlcy51cGRhdGVcbiAgICAgICAgPSB1cGRhdGVOb2RlcztcblxuICAgIGVudGVyTm9kZXMucGFyZW50Tm9kZVxuICAgICAgICA9IHVwZGF0ZU5vZGVzLnBhcmVudE5vZGVcbiAgICAgICAgPSBleGl0Tm9kZXMucGFyZW50Tm9kZVxuICAgICAgICA9IGdyb3VwLnBhcmVudE5vZGU7XG5cbiAgICBlbnRlci5wdXNoKGVudGVyTm9kZXMpO1xuICAgIHVwZGF0ZS5wdXNoKHVwZGF0ZU5vZGVzKTtcbiAgICBleGl0LnB1c2goZXhpdE5vZGVzKTtcbiAgfVxuXG4gIHZhciBlbnRlciA9IGQzX3NlbGVjdGlvbl9lbnRlcihbXSksXG4gICAgICB1cGRhdGUgPSBkM19zZWxlY3Rpb24oW10pLFxuICAgICAgZXhpdCA9IGQzX3NlbGVjdGlvbihbXSk7XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIGJpbmQoZ3JvdXAgPSB0aGlzW2ldLCB2YWx1ZS5jYWxsKGdyb3VwLCBncm91cC5wYXJlbnROb2RlLl9fZGF0YV9fLCBpKSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICBiaW5kKGdyb3VwID0gdGhpc1tpXSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZS5lbnRlciA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gZW50ZXI7IH07XG4gIHVwZGF0ZS5leGl0ID0gZnVuY3Rpb24oKSB7IHJldHVybiBleGl0OyB9O1xuICByZXR1cm4gdXBkYXRlO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2RhdGFOb2RlKGRhdGEpIHtcbiAgcmV0dXJuIHtfX2RhdGFfXzogZGF0YX07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5kYXR1bSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMucHJvcGVydHkoXCJfX2RhdGFfX1wiLCB2YWx1ZSlcbiAgICAgIDogdGhpcy5wcm9wZXJ0eShcIl9fZGF0YV9fXCIpO1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uKGZpbHRlcikge1xuICB2YXIgc3ViZ3JvdXBzID0gW10sXG4gICAgICBzdWJncm91cCxcbiAgICAgIGdyb3VwLFxuICAgICAgbm9kZTtcblxuICBpZiAodHlwZW9mIGZpbHRlciAhPT0gXCJmdW5jdGlvblwiKSBmaWx0ZXIgPSBkM19zZWxlY3Rpb25fZmlsdGVyKGZpbHRlcik7XG5cbiAgZm9yICh2YXIgaiA9IDAsIG0gPSB0aGlzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgIHN1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwID0gW10pO1xuICAgIHN1Ymdyb3VwLnBhcmVudE5vZGUgPSAoZ3JvdXAgPSB0aGlzW2pdKS5wYXJlbnROb2RlO1xuICAgIGZvciAodmFyIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgZmlsdGVyLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaikpIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZDNfc2VsZWN0aW9uKHN1Ymdyb3Vwcyk7XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fZmlsdGVyKHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZDNfc2VsZWN0TWF0Y2hlcyh0aGlzLCBzZWxlY3Rvcik7XG4gIH07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5vcmRlciA9IGZ1bmN0aW9uKCkge1xuICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTspIHtcbiAgICBmb3IgKHZhciBncm91cCA9IHRoaXNbal0sIGkgPSBncm91cC5sZW5ndGggLSAxLCBuZXh0ID0gZ3JvdXBbaV0sIG5vZGU7IC0taSA+PSAwOykge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBpZiAobmV4dCAmJiBuZXh0ICE9PSBub2RlLm5leHRTaWJsaW5nKSBuZXh0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIG5leHQpO1xuICAgICAgICBuZXh0ID0gbm9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuZDMuYXNjZW5kaW5nID0gZDNfYXNjZW5kaW5nO1xuXG5mdW5jdGlvbiBkM19hc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24oY29tcGFyYXRvcikge1xuICBjb21wYXJhdG9yID0gZDNfc2VsZWN0aW9uX3NvcnRDb21wYXJhdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIGZvciAodmFyIGogPSAtMSwgbSA9IHRoaXMubGVuZ3RoOyArK2ogPCBtOykgdGhpc1tqXS5zb3J0KGNvbXBhcmF0b3IpO1xuICByZXR1cm4gdGhpcy5vcmRlcigpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3NvcnRDb21wYXJhdG9yKGNvbXBhcmF0b3IpIHtcbiAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSBjb21wYXJhdG9yID0gZDNfYXNjZW5kaW5nO1xuICByZXR1cm4gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBhICYmIGIgPyBjb21wYXJhdG9yKGEuX19kYXRhX18sIGIuX19kYXRhX18pIDogIWEgLSAhYjtcbiAgfTtcbn1cblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICByZXR1cm4gZDNfc2VsZWN0aW9uX2VhY2godGhpcywgZnVuY3Rpb24obm9kZSwgaSwgaikge1xuICAgIGNhbGxiYWNrLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaik7XG4gIH0pO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2VhY2goZ3JvdXBzLCBjYWxsYmFjaykge1xuICBmb3IgKHZhciBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGgsIG5vZGU7IGkgPCBuOyBpKyspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIGNhbGxiYWNrKG5vZGUsIGksIGopO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZ3JvdXBzO1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciBhcmdzID0gZDNfYXJyYXkoYXJndW1lbnRzKTtcbiAgY2FsbGJhY2suYXBwbHkoYXJnc1swXSA9IHRoaXMsIGFyZ3MpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5lbXB0eSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gIXRoaXMubm9kZSgpO1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLm5vZGUgPSBmdW5jdGlvbigpIHtcbiAgZm9yICh2YXIgaiA9IDAsIG0gPSB0aGlzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgIGZvciAodmFyIGdyb3VwID0gdGhpc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIHZhciBub2RlID0gZ3JvdXBbaV07XG4gICAgICBpZiAobm9kZSkgcmV0dXJuIG5vZGU7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLnNpemUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIG4gPSAwO1xuICBkM19zZWxlY3Rpb25fZWFjaCh0aGlzLCBmdW5jdGlvbigpIHsgKytuOyB9KTtcbiAgcmV0dXJuIG47XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fZW50ZXIoc2VsZWN0aW9uKSB7XG4gIGQzX3N1YmNsYXNzKHNlbGVjdGlvbiwgZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlKTtcbiAgcmV0dXJuIHNlbGVjdGlvbjtcbn1cblxudmFyIGQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZSA9IFtdO1xuXG5kMy5zZWxlY3Rpb24uZW50ZXIgPSBkM19zZWxlY3Rpb25fZW50ZXI7XG5kMy5zZWxlY3Rpb24uZW50ZXIucHJvdG90eXBlID0gZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlO1xuXG5kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuYXBwZW5kID0gZDNfc2VsZWN0aW9uUHJvdG90eXBlLmFwcGVuZDtcbmQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZS5lbXB0eSA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5lbXB0eTtcbmQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZS5ub2RlID0gZDNfc2VsZWN0aW9uUHJvdG90eXBlLm5vZGU7XG5kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuY2FsbCA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5jYWxsO1xuZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLnNpemUgPSBkM19zZWxlY3Rpb25Qcm90b3R5cGUuc2l6ZTtcblxuXG5kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgdmFyIHN1Ymdyb3VwcyA9IFtdLFxuICAgICAgc3ViZ3JvdXAsXG4gICAgICBzdWJub2RlLFxuICAgICAgdXBncm91cCxcbiAgICAgIGdyb3VwLFxuICAgICAgbm9kZTtcblxuICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTspIHtcbiAgICB1cGdyb3VwID0gKGdyb3VwID0gdGhpc1tqXSkudXBkYXRlO1xuICAgIHN1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwID0gW10pO1xuICAgIHN1Ymdyb3VwLnBhcmVudE5vZGUgPSBncm91cC5wYXJlbnROb2RlO1xuICAgIGZvciAodmFyIGkgPSAtMSwgbiA9IGdyb3VwLmxlbmd0aDsgKytpIDwgbjspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaCh1cGdyb3VwW2ldID0gc3Vibm9kZSA9IHNlbGVjdG9yLmNhbGwoZ3JvdXAucGFyZW50Tm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaikpO1xuICAgICAgICBzdWJub2RlLl9fZGF0YV9fID0gbm9kZS5fX2RhdGFfXztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2gobnVsbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGQzX3NlbGVjdGlvbihzdWJncm91cHMpO1xufTtcblxuZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uKG5hbWUsIGJlZm9yZSkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIGJlZm9yZSA9IGQzX3NlbGVjdGlvbl9lbnRlckluc2VydEJlZm9yZSh0aGlzKTtcbiAgcmV0dXJuIGQzX3NlbGVjdGlvblByb3RvdHlwZS5pbnNlcnQuY2FsbCh0aGlzLCBuYW1lLCBiZWZvcmUpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2VudGVySW5zZXJ0QmVmb3JlKGVudGVyKSB7XG4gIHZhciBpMCwgajA7XG4gIHJldHVybiBmdW5jdGlvbihkLCBpLCBqKSB7XG4gICAgdmFyIGdyb3VwID0gZW50ZXJbal0udXBkYXRlLFxuICAgICAgICBuID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgICBub2RlO1xuICAgIGlmIChqICE9IGowKSBqMCA9IGosIGkwID0gMDtcbiAgICBpZiAoaSA+PSBpMCkgaTAgPSBpICsgMTtcbiAgICB3aGlsZSAoIShub2RlID0gZ3JvdXBbaTBdKSAmJiArK2kwIDwgbik7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG59XG5cbi8vIFRPRE8gZmFzdCBzaW5nbGV0b24gaW1wbGVtZW50YXRpb24/XG5kMy5zZWxlY3QgPSBmdW5jdGlvbihub2RlKSB7XG4gIHZhciBncm91cDtcbiAgaWYgKHR5cGVvZiBub2RlID09PSBcInN0cmluZ1wiKSB7XG4gICAgZ3JvdXAgPSBbZDNfc2VsZWN0KG5vZGUsIGQzX2RvY3VtZW50KV07XG4gICAgZ3JvdXAucGFyZW50Tm9kZSA9IGQzX2RvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgfSBlbHNlIHtcbiAgICBncm91cCA9IFtub2RlXTtcbiAgICBncm91cC5wYXJlbnROb2RlID0gZDNfZG9jdW1lbnRFbGVtZW50KG5vZGUpO1xuICB9XG4gIHJldHVybiBkM19zZWxlY3Rpb24oW2dyb3VwXSk7XG59O1xuXG5kMy5zZWxlY3RBbGwgPSBmdW5jdGlvbihub2Rlcykge1xuICB2YXIgZ3JvdXA7XG4gIGlmICh0eXBlb2Ygbm9kZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICBncm91cCA9IGQzX2FycmF5KGQzX3NlbGVjdEFsbChub2RlcywgZDNfZG9jdW1lbnQpKTtcbiAgICBncm91cC5wYXJlbnROb2RlID0gZDNfZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICB9IGVsc2Uge1xuICAgIGdyb3VwID0gZDNfYXJyYXkobm9kZXMpO1xuICAgIGdyb3VwLnBhcmVudE5vZGUgPSBudWxsO1xuICB9XG4gIHJldHVybiBkM19zZWxlY3Rpb24oW2dyb3VwXSk7XG59O1xuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUub24gPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lciwgY2FwdHVyZSkge1xuICB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIGlmIChuIDwgMykge1xuXG4gICAgLy8gRm9yIG9uKG9iamVjdCkgb3Igb24ob2JqZWN0LCBib29sZWFuKSwgdGhlIG9iamVjdCBzcGVjaWZpZXMgdGhlIGV2ZW50XG4gICAgLy8gdHlwZXMgYW5kIGxpc3RlbmVycyB0byBhZGQgb3IgcmVtb3ZlLiBUaGUgb3B0aW9uYWwgYm9vbGVhbiBzcGVjaWZpZXNcbiAgICAvLyB3aGV0aGVyIHRoZSBsaXN0ZW5lciBjYXB0dXJlcyBldmVudHMuXG4gICAgaWYgKHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICBpZiAobiA8IDIpIGxpc3RlbmVyID0gZmFsc2U7XG4gICAgICBmb3IgKGNhcHR1cmUgaW4gdHlwZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9vbihjYXB0dXJlLCB0eXBlW2NhcHR1cmVdLCBsaXN0ZW5lcikpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gRm9yIG9uKHN0cmluZyksIHJldHVybiB0aGUgbGlzdGVuZXIgZm9yIHRoZSBmaXJzdCBub2RlLlxuICAgIGlmIChuIDwgMikgcmV0dXJuIChuID0gdGhpcy5ub2RlKClbXCJfX29uXCIgKyB0eXBlXSkgJiYgbi5fO1xuXG4gICAgLy8gRm9yIG9uKHN0cmluZywgZnVuY3Rpb24pLCB1c2UgdGhlIGRlZmF1bHQgY2FwdHVyZS5cbiAgICBjYXB0dXJlID0gZmFsc2U7XG4gIH1cblxuICAvLyBPdGhlcndpc2UsIGEgdHlwZSwgbGlzdGVuZXIgYW5kIGNhcHR1cmUgYXJlIHNwZWNpZmllZCwgYW5kIGhhbmRsZWQgYXMgYmVsb3cuXG4gIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX29uKHR5cGUsIGxpc3RlbmVyLCBjYXB0dXJlKSk7XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fb24odHlwZSwgbGlzdGVuZXIsIGNhcHR1cmUpIHtcbiAgdmFyIG5hbWUgPSBcIl9fb25cIiArIHR5cGUsXG4gICAgICBpID0gdHlwZS5pbmRleE9mKFwiLlwiKSxcbiAgICAgIHdyYXAgPSBkM19zZWxlY3Rpb25fb25MaXN0ZW5lcjtcblxuICBpZiAoaSA+IDApIHR5cGUgPSB0eXBlLnNsaWNlKDAsIGkpO1xuICB2YXIgZmlsdGVyID0gZDNfc2VsZWN0aW9uX29uRmlsdGVycy5nZXQodHlwZSk7XG4gIGlmIChmaWx0ZXIpIHR5cGUgPSBmaWx0ZXIsIHdyYXAgPSBkM19zZWxlY3Rpb25fb25GaWx0ZXI7XG5cbiAgZnVuY3Rpb24gb25SZW1vdmUoKSB7XG4gICAgdmFyIGwgPSB0aGlzW25hbWVdO1xuICAgIGlmIChsKSB7XG4gICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbCwgbC4kKTtcbiAgICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQWRkKCkge1xuICAgIHZhciBsID0gd3JhcChsaXN0ZW5lciwgZDNfYXJyYXkoYXJndW1lbnRzKSk7XG4gICAgb25SZW1vdmUuY2FsbCh0aGlzKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgdGhpc1tuYW1lXSA9IGwsIGwuJCA9IGNhcHR1cmUpO1xuICAgIGwuXyA9IGxpc3RlbmVyO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlQWxsKCkge1xuICAgIHZhciByZSA9IG5ldyBSZWdFeHAoXCJeX19vbihbXi5dKylcIiArIGQzLnJlcXVvdGUodHlwZSkgKyBcIiRcIiksXG4gICAgICAgIG1hdGNoO1xuICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgaWYgKG1hdGNoID0gbmFtZS5tYXRjaChyZSkpIHtcbiAgICAgICAgdmFyIGwgPSB0aGlzW25hbWVdO1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIobWF0Y2hbMV0sIGwsIGwuJCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpXG4gICAgICA/IGxpc3RlbmVyID8gb25BZGQgOiBvblJlbW92ZVxuICAgICAgOiBsaXN0ZW5lciA/IGQzX25vb3AgOiByZW1vdmVBbGw7XG59XG5cbnZhciBkM19zZWxlY3Rpb25fb25GaWx0ZXJzID0gZDMubWFwKHtcbiAgbW91c2VlbnRlcjogXCJtb3VzZW92ZXJcIixcbiAgbW91c2VsZWF2ZTogXCJtb3VzZW91dFwiXG59KTtcblxuaWYgKGQzX2RvY3VtZW50KSB7XG4gIGQzX3NlbGVjdGlvbl9vbkZpbHRlcnMuZm9yRWFjaChmdW5jdGlvbihrKSB7XG4gICAgaWYgKFwib25cIiArIGsgaW4gZDNfZG9jdW1lbnQpIGQzX3NlbGVjdGlvbl9vbkZpbHRlcnMucmVtb3ZlKGspO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX29uTGlzdGVuZXIobGlzdGVuZXIsIGFyZ3VtZW50eikge1xuICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgIHZhciBvID0gZDMuZXZlbnQ7IC8vIEV2ZW50cyBjYW4gYmUgcmVlbnRyYW50IChlLmcuLCBmb2N1cykuXG4gICAgZDMuZXZlbnQgPSBlO1xuICAgIGFyZ3VtZW50elswXSA9IHRoaXMuX19kYXRhX187XG4gICAgdHJ5IHtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50eik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGQzLmV2ZW50ID0gbztcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9vbkZpbHRlcihsaXN0ZW5lciwgYXJndW1lbnR6KSB7XG4gIHZhciBsID0gZDNfc2VsZWN0aW9uX29uTGlzdGVuZXIobGlzdGVuZXIsIGFyZ3VtZW50eik7XG4gIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMsIHJlbGF0ZWQgPSBlLnJlbGF0ZWRUYXJnZXQ7XG4gICAgaWYgKCFyZWxhdGVkIHx8IChyZWxhdGVkICE9PSB0YXJnZXQgJiYgIShyZWxhdGVkLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRhcmdldCkgJiA4KSkpIHtcbiAgICAgIGwuY2FsbCh0YXJnZXQsIGUpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIGQzX2V2ZW50X2RyYWdTZWxlY3QsXG4gICAgZDNfZXZlbnRfZHJhZ0lkID0gMDtcblxuZnVuY3Rpb24gZDNfZXZlbnRfZHJhZ1N1cHByZXNzKG5vZGUpIHtcbiAgdmFyIG5hbWUgPSBcIi5kcmFnc3VwcHJlc3MtXCIgKyArK2QzX2V2ZW50X2RyYWdJZCxcbiAgICAgIGNsaWNrID0gXCJjbGlja1wiICsgbmFtZSxcbiAgICAgIHcgPSBkMy5zZWxlY3QoZDNfd2luZG93KG5vZGUpKVxuICAgICAgICAgIC5vbihcInRvdWNobW92ZVwiICsgbmFtZSwgZDNfZXZlbnRQcmV2ZW50RGVmYXVsdClcbiAgICAgICAgICAub24oXCJkcmFnc3RhcnRcIiArIG5hbWUsIGQzX2V2ZW50UHJldmVudERlZmF1bHQpXG4gICAgICAgICAgLm9uKFwic2VsZWN0c3RhcnRcIiArIG5hbWUsIGQzX2V2ZW50UHJldmVudERlZmF1bHQpO1xuXG4gIGlmIChkM19ldmVudF9kcmFnU2VsZWN0ID09IG51bGwpIHtcbiAgICBkM19ldmVudF9kcmFnU2VsZWN0ID0gXCJvbnNlbGVjdHN0YXJ0XCIgaW4gbm9kZSA/IGZhbHNlXG4gICAgICAgIDogZDNfdmVuZG9yU3ltYm9sKG5vZGUuc3R5bGUsIFwidXNlclNlbGVjdFwiKTtcbiAgfVxuXG4gIGlmIChkM19ldmVudF9kcmFnU2VsZWN0KSB7XG4gICAgdmFyIHN0eWxlID0gZDNfZG9jdW1lbnRFbGVtZW50KG5vZGUpLnN0eWxlLFxuICAgICAgICBzZWxlY3QgPSBzdHlsZVtkM19ldmVudF9kcmFnU2VsZWN0XTtcbiAgICBzdHlsZVtkM19ldmVudF9kcmFnU2VsZWN0XSA9IFwibm9uZVwiO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKHN1cHByZXNzQ2xpY2spIHtcbiAgICB3Lm9uKG5hbWUsIG51bGwpO1xuICAgIGlmIChkM19ldmVudF9kcmFnU2VsZWN0KSBzdHlsZVtkM19ldmVudF9kcmFnU2VsZWN0XSA9IHNlbGVjdDtcbiAgICBpZiAoc3VwcHJlc3NDbGljaykgeyAvLyBzdXBwcmVzcyB0aGUgbmV4dCBjbGljaywgYnV0IG9ubHkgaWYgaXTigJlzIGltbWVkaWF0ZVxuICAgICAgdmFyIG9mZiA9IGZ1bmN0aW9uKCkgeyB3Lm9uKGNsaWNrLCBudWxsKTsgfTtcbiAgICAgIHcub24oY2xpY2ssIGZ1bmN0aW9uKCkgeyBkM19ldmVudFByZXZlbnREZWZhdWx0KCk7IG9mZigpOyB9LCB0cnVlKTtcbiAgICAgIHNldFRpbWVvdXQob2ZmLCAwKTtcbiAgICB9XG4gIH07XG59XG5cbmQzLm1vdXNlID0gZnVuY3Rpb24oY29udGFpbmVyKSB7XG4gIHJldHVybiBkM19tb3VzZVBvaW50KGNvbnRhaW5lciwgZDNfZXZlbnRTb3VyY2UoKSk7XG59O1xuXG4vLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NDQwODNcbnZhciBkM19tb3VzZV9idWc0NDA4MyA9IHRoaXMubmF2aWdhdG9yICYmIC9XZWJLaXQvLnRlc3QodGhpcy5uYXZpZ2F0b3IudXNlckFnZW50KSA/IC0xIDogMDtcblxuZnVuY3Rpb24gZDNfbW91c2VQb2ludChjb250YWluZXIsIGUpIHtcbiAgaWYgKGUuY2hhbmdlZFRvdWNoZXMpIGUgPSBlLmNoYW5nZWRUb3VjaGVzWzBdO1xuICB2YXIgc3ZnID0gY29udGFpbmVyLm93bmVyU1ZHRWxlbWVudCB8fCBjb250YWluZXI7XG4gIGlmIChzdmcuY3JlYXRlU1ZHUG9pbnQpIHtcbiAgICB2YXIgcG9pbnQgPSBzdmcuY3JlYXRlU1ZHUG9pbnQoKTtcbiAgICBpZiAoZDNfbW91c2VfYnVnNDQwODMgPCAwKSB7XG4gICAgICB2YXIgd2luZG93ID0gZDNfd2luZG93KGNvbnRhaW5lcik7XG4gICAgICBpZiAod2luZG93LnNjcm9sbFggfHwgd2luZG93LnNjcm9sbFkpIHtcbiAgICAgICAgc3ZnID0gZDMuc2VsZWN0KFwiYm9keVwiKS5hcHBlbmQoXCJzdmdcIikuc3R5bGUoe1xuICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICAgIHBhZGRpbmc6IDAsXG4gICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIlxuICAgICAgICB9LCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgdmFyIGN0bSA9IHN2Z1swXVswXS5nZXRTY3JlZW5DVE0oKTtcbiAgICAgICAgZDNfbW91c2VfYnVnNDQwODMgPSAhKGN0bS5mIHx8IGN0bS5lKTtcbiAgICAgICAgc3ZnLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZDNfbW91c2VfYnVnNDQwODMpIHBvaW50LnggPSBlLnBhZ2VYLCBwb2ludC55ID0gZS5wYWdlWTtcbiAgICBlbHNlIHBvaW50LnggPSBlLmNsaWVudFgsIHBvaW50LnkgPSBlLmNsaWVudFk7XG4gICAgcG9pbnQgPSBwb2ludC5tYXRyaXhUcmFuc2Zvcm0oY29udGFpbmVyLmdldFNjcmVlbkNUTSgpLmludmVyc2UoKSk7XG4gICAgcmV0dXJuIFtwb2ludC54LCBwb2ludC55XTtcbiAgfVxuICB2YXIgcmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIFtlLmNsaWVudFggLSByZWN0LmxlZnQgLSBjb250YWluZXIuY2xpZW50TGVmdCwgZS5jbGllbnRZIC0gcmVjdC50b3AgLSBjb250YWluZXIuY2xpZW50VG9wXTtcbn07XG5cbmQzLnRvdWNoID0gZnVuY3Rpb24oY29udGFpbmVyLCB0b3VjaGVzLCBpZGVudGlmaWVyKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMykgaWRlbnRpZmllciA9IHRvdWNoZXMsIHRvdWNoZXMgPSBkM19ldmVudFNvdXJjZSgpLmNoYW5nZWRUb3VjaGVzO1xuICBpZiAodG91Y2hlcykgZm9yICh2YXIgaSA9IDAsIG4gPSB0b3VjaGVzLmxlbmd0aCwgdG91Y2g7IGkgPCBuOyArK2kpIHtcbiAgICBpZiAoKHRvdWNoID0gdG91Y2hlc1tpXSkuaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmV0dXJuIGQzX21vdXNlUG9pbnQoY29udGFpbmVyLCB0b3VjaCk7XG4gICAgfVxuICB9XG59O1xuZDMuYmVoYXZpb3IgPSB7fTtcblxuZDMuYmVoYXZpb3IuZHJhZyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZXZlbnQgPSBkM19ldmVudERpc3BhdGNoKGRyYWcsIFwiZHJhZ1wiLCBcImRyYWdzdGFydFwiLCBcImRyYWdlbmRcIiksXG4gICAgICBvcmlnaW4gPSBudWxsLFxuICAgICAgbW91c2Vkb3duID0gZHJhZ3N0YXJ0KGQzX25vb3AsIGQzLm1vdXNlLCBkM193aW5kb3csIFwibW91c2Vtb3ZlXCIsIFwibW91c2V1cFwiKSxcbiAgICAgIHRvdWNoc3RhcnQgPSBkcmFnc3RhcnQoZDNfYmVoYXZpb3JfZHJhZ1RvdWNoSWQsIGQzLnRvdWNoLCBkM19pZGVudGl0eSwgXCJ0b3VjaG1vdmVcIiwgXCJ0b3VjaGVuZFwiKTtcblxuICBmdW5jdGlvbiBkcmFnKCkge1xuICAgIHRoaXMub24oXCJtb3VzZWRvd24uZHJhZ1wiLCBtb3VzZWRvd24pXG4gICAgICAgIC5vbihcInRvdWNoc3RhcnQuZHJhZ1wiLCB0b3VjaHN0YXJ0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWdzdGFydChpZCwgcG9zaXRpb24sIHN1YmplY3QsIG1vdmUsIGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcyxcbiAgICAgICAgICB0YXJnZXQgPSBkMy5ldmVudC50YXJnZXQuY29ycmVzcG9uZGluZ0VsZW1lbnQgfHwgZDMuZXZlbnQudGFyZ2V0LFxuICAgICAgICAgIHBhcmVudCA9IHRoYXQucGFyZW50Tm9kZSxcbiAgICAgICAgICBkaXNwYXRjaCA9IGV2ZW50Lm9mKHRoYXQsIGFyZ3VtZW50cyksXG4gICAgICAgICAgZHJhZ2dlZCA9IDAsXG4gICAgICAgICAgZHJhZ0lkID0gaWQoKSxcbiAgICAgICAgICBkcmFnTmFtZSA9IFwiLmRyYWdcIiArIChkcmFnSWQgPT0gbnVsbCA/IFwiXCIgOiBcIi1cIiArIGRyYWdJZCksXG4gICAgICAgICAgZHJhZ09mZnNldCxcbiAgICAgICAgICBkcmFnU3ViamVjdCA9IGQzLnNlbGVjdChzdWJqZWN0KHRhcmdldCkpLm9uKG1vdmUgKyBkcmFnTmFtZSwgbW92ZWQpLm9uKGVuZCArIGRyYWdOYW1lLCBlbmRlZCksXG4gICAgICAgICAgZHJhZ1Jlc3RvcmUgPSBkM19ldmVudF9kcmFnU3VwcHJlc3ModGFyZ2V0KSxcbiAgICAgICAgICBwb3NpdGlvbjAgPSBwb3NpdGlvbihwYXJlbnQsIGRyYWdJZCk7XG5cbiAgICAgIGlmIChvcmlnaW4pIHtcbiAgICAgICAgZHJhZ09mZnNldCA9IG9yaWdpbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuICAgICAgICBkcmFnT2Zmc2V0ID0gW2RyYWdPZmZzZXQueCAtIHBvc2l0aW9uMFswXSwgZHJhZ09mZnNldC55IC0gcG9zaXRpb24wWzFdXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRyYWdPZmZzZXQgPSBbMCwgMF07XG4gICAgICB9XG5cbiAgICAgIGRpc3BhdGNoKHt0eXBlOiBcImRyYWdzdGFydFwifSk7XG5cbiAgICAgIGZ1bmN0aW9uIG1vdmVkKCkge1xuICAgICAgICB2YXIgcG9zaXRpb24xID0gcG9zaXRpb24ocGFyZW50LCBkcmFnSWQpLCBkeCwgZHk7XG4gICAgICAgIGlmICghcG9zaXRpb24xKSByZXR1cm47IC8vIHRoaXMgdG91Y2ggZGlkbuKAmXQgbW92ZVxuXG4gICAgICAgIGR4ID0gcG9zaXRpb24xWzBdIC0gcG9zaXRpb24wWzBdO1xuICAgICAgICBkeSA9IHBvc2l0aW9uMVsxXSAtIHBvc2l0aW9uMFsxXTtcbiAgICAgICAgZHJhZ2dlZCB8PSBkeCB8IGR5O1xuICAgICAgICBwb3NpdGlvbjAgPSBwb3NpdGlvbjE7XG5cbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwiZHJhZ1wiLFxuICAgICAgICAgIHg6IHBvc2l0aW9uMVswXSArIGRyYWdPZmZzZXRbMF0sXG4gICAgICAgICAgeTogcG9zaXRpb24xWzFdICsgZHJhZ09mZnNldFsxXSxcbiAgICAgICAgICBkeDogZHgsXG4gICAgICAgICAgZHk6IGR5XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBlbmRlZCgpIHtcbiAgICAgICAgaWYgKCFwb3NpdGlvbihwYXJlbnQsIGRyYWdJZCkpIHJldHVybjsgLy8gdGhpcyB0b3VjaCBkaWRu4oCZdCBlbmRcbiAgICAgICAgZHJhZ1N1YmplY3Qub24obW92ZSArIGRyYWdOYW1lLCBudWxsKS5vbihlbmQgKyBkcmFnTmFtZSwgbnVsbCk7XG4gICAgICAgIGRyYWdSZXN0b3JlKGRyYWdnZWQpO1xuICAgICAgICBkaXNwYXRjaCh7dHlwZTogXCJkcmFnZW5kXCJ9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZHJhZy5vcmlnaW4gPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gb3JpZ2luO1xuICAgIG9yaWdpbiA9IHg7XG4gICAgcmV0dXJuIGRyYWc7XG4gIH07XG5cbiAgcmV0dXJuIGQzLnJlYmluZChkcmFnLCBldmVudCwgXCJvblwiKTtcbn07XG5cbi8vIFdoaWxlIGl0IGlzIHBvc3NpYmxlIHRvIHJlY2VpdmUgYSB0b3VjaHN0YXJ0IGV2ZW50IHdpdGggbW9yZSB0aGFuIG9uZSBjaGFuZ2VkXG4vLyB0b3VjaCwgdGhlIGV2ZW50IGlzIG9ubHkgc2hhcmVkIGJ5IHRvdWNoZXMgb24gdGhlIHNhbWUgdGFyZ2V0OyBmb3IgbmV3XG4vLyB0b3VjaGVzIHRhcmdldHRpbmcgZGlmZmVyZW50IGVsZW1lbnRzLCBtdWx0aXBsZSB0b3VjaHN0YXJ0IGV2ZW50cyBhcmVcbi8vIHJlY2VpdmVkIGV2ZW4gd2hlbiB0aGUgdG91Y2hlcyBzdGFydCBzaW11bHRhbmVvdXNseS4gU2luY2UgbXVsdGlwbGUgdG91Y2hlc1xuLy8gY2Fubm90IG1vdmUgdGhlIHNhbWUgdGFyZ2V0IHRvIGRpZmZlcmVudCBsb2NhdGlvbnMgY29uY3VycmVudGx5IHdpdGhvdXRcbi8vIHRlYXJpbmcgdGhlIGZhYnJpYyBvZiBzcGFjZXRpbWUsIHdlIGFsbG93IHRoZSBmaXJzdCB0b3VjaCB0byB3aW4uXG5mdW5jdGlvbiBkM19iZWhhdmlvcl9kcmFnVG91Y2hJZCgpIHtcbiAgcmV0dXJuIGQzLmV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmlkZW50aWZpZXI7XG59XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgdGhpcy5kMyA9IGQzLCBkZWZpbmUoZDMpO1xuICBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIG1vZHVsZS5leHBvcnRzKSBtb2R1bGUuZXhwb3J0cyA9IGQzO1xuICBlbHNlIHRoaXMuZDMgPSBkMztcbn0oKTtcbiIsIi8qKlxuICogQWJzdHJhY3RGaWxlIGlzIGFuIGFic3RyYWN0IHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZS4gVGhlcmUgYXJlIHR3byBpbXBsZW1lbnRhdGlvbjpcbiAqIDEuIFJlbW90ZUZpbGUgIC0gcmVwcmVzZW50YXRpb24gb2YgYSBmaWxlIG9uIGEgcmVtb3RlIHNlcnZlciB3aGljaCBjYW4gYmVcbiAqIGZldGNoZWQgaW4gY2h1bmtzLCBlLmcuIHVzaW5nIGEgUmFuZ2UgcmVxdWVzdC5cbiAqIDIuIExvY2FsU3RyaW5nRmlsZSBpcyBhIHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZSB0aGF0IHdhcyBjcmVhdGVkIGZyb20gaW5wdXQgc3RyaW5nLiBcbiAqIFVzZWQgZm9yIHRlc3RpbmcgYW5kIHNtYWxsIGlucHV0IGZpbGVzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vL2ltcG9ydCBRIGZyb20gJ3EnO1xuXG5jbGFzcyBBYnN0cmFjdEZpbGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvL2hvdyB0byBwcmV2ZW50IGluc3RhbnRhdGlvbiBvZiB0aGlzIGNsYXNzPz8/XG4gICAgLy90aGlzIGNvZGUgZG9lc24ndCBwYXNzIG5wbSBydW4gZmxvd1xuLy8gICAgaWYgKG5ldy50YXJnZXQgPT09IEFic3RyYWN0RmlsZSkgeyBcbi8vICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjb25zdHJ1Y3QgQWJzdHJhY3RGaWxlIGluc3RhbmNlcyBkaXJlY3RseVwiKTtcbi8vICAgIH1cbiAgfVxuXG4gIGdldEJ5dGVzKHN0YXJ0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKTpPYmplY3Qgey8vOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTWV0aG9kIGdldEJ5dGVzIGlzIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuXG4gIC8vIFJlYWQgdGhlIGVudGlyZSBmaWxlIC0tIG5vdCByZWNvbW1lbmRlZCBmb3IgbGFyZ2UgZmlsZXMhXG4gIGdldEFsbCgpOk9iamVjdCB7Ly86IFEuUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNZXRob2QgZ2V0QWxsIGlzIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuXG4gIC8vIFJlYWRzIHRoZSBlbnRpcmUgZmlsZSBhcyBhIHN0cmluZyAobm90IGFuIEFycmF5QnVmZmVyKS5cbiAgLy8gVGhpcyBkb2VzIG5vdCB1c2UgdGhlIGNhY2hlLlxuICBnZXRBbGxTdHJpbmcoKTpPYmplY3Qgey8vOiBRLlByb21pc2U8c3RyaW5nPiB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk1ldGhvZCBnZXRBbGxTdHJpbmcgaXMgbm90IGltcGxlbWVudGVkXCIpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBudW1iZXIgb2YgYnl0ZXMgaW4gdGhlIHJlbW90ZSBmaWxlLlxuICBnZXRTaXplKCk6T2JqZWN0IHsvLzogUS5Qcm9taXNlPG51bWJlcj4ge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNZXRob2QgZ2V0U2l6ZSBpcyBub3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBYnN0cmFjdEZpbGU7XG4iLCIvKiBAZmxvdyAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi9JbnRlcnZhbCc7XG5pbXBvcnQge2ZsYXRNYXB9IGZyb20gJy4vdXRpbHMnO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIGNsb3NlZCBpbnRlcnZhbCBvbiB0aGUgZ2Vub21lOiBjb250aWc6c3RhcnQtc3RvcC5cbiAqXG4gKiBUaGUgY29udGlnIG1heSBiZSBlaXRoZXIgYSBzdHJpbmcgKFwiY2hyMjJcIikgb3IgYSBudW1iZXIgKGluIGNhc2UgdGhlIGNvbnRpZ3NcbiAqIGFyZSBpbmRleGVkLCBmb3IgZXhhbXBsZSkuXG4gKi9cbmNsYXNzIENvbnRpZ0ludGVydmFsPFQ6IChudW1iZXJ8c3RyaW5nKT4ge1xuICBjb250aWc6IFQ7XG4gIGludGVydmFsOiBJbnRlcnZhbDtcblxuICBjb25zdHJ1Y3Rvcihjb250aWc6IFQsIHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlcikge1xuICAgIHRoaXMuY29udGlnID0gY29udGlnO1xuICAgIHRoaXMuaW50ZXJ2YWwgPSBuZXcgSW50ZXJ2YWwoc3RhcnQsIHN0b3ApO1xuICB9XG5cbiAgLy8gVE9ETzogbWFrZSB0aGVzZSBnZXR0ZXIgbWV0aG9kcyAmIHN3aXRjaCB0byBCYWJlbC5cbiAgc3RhcnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnZhbC5zdGFydDtcbiAgfVxuICBzdG9wKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJ2YWwuc3RvcDtcbiAgfVxuICBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnZhbC5sZW5ndGgoKTtcbiAgfVxuXG4gIGludGVyc2VjdHMob3RoZXI6IENvbnRpZ0ludGVydmFsPFQ+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNvbnRpZyA9PT0gb3RoZXIuY29udGlnICYmXG4gICAgICAgICAgICB0aGlzLmludGVydmFsLmludGVyc2VjdHMob3RoZXIuaW50ZXJ2YWwpKTtcbiAgfVxuXG4gIC8vIExpa2UgaW50ZXJzZWN0cygpLCBidXQgYWxsb3dzICdjaHIxNycgdnMuICcxNyctc3R5bGUgbWlzbWF0Y2hlcy5cbiAgY2hySW50ZXJzZWN0cyhvdGhlcjogQ29udGlnSW50ZXJ2YWw8VD4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHRoaXMuY2hyT25Db250aWcob3RoZXIuY29udGlnKSAmJlxuICAgICAgICAgICAgdGhpcy5pbnRlcnZhbC5pbnRlcnNlY3RzKG90aGVyLmludGVydmFsKSk7XG4gIH1cblxuICBjb250YWluc0ludGVydmFsKG90aGVyOiBDb250aWdJbnRlcnZhbDxUPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5jb250aWcgPT09IG90aGVyLmNvbnRpZyAmJlxuICAgICAgICAgICAgdGhpcy5pbnRlcnZhbC5jb250YWluc0ludGVydmFsKG90aGVyLmludGVydmFsKSk7XG4gIH1cblxuICBpc0FkamFjZW50VG8ob3RoZXI6IENvbnRpZ0ludGVydmFsPFQ+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNvbnRpZyA9PT0gb3RoZXIuY29udGlnICYmXG4gICAgICAgICAgICAodGhpcy5zdGFydCgpID09IDEgKyBvdGhlci5zdG9wKCkgfHxcbiAgICAgICAgICAgICB0aGlzLnN0b3AoKSArIDEgPT0gb3RoZXIuc3RhcnQoKSkpO1xuICB9XG5cbiAgaXNDb3ZlcmVkQnkoaW50ZXJ2YWxzOiBDb250aWdJbnRlcnZhbDxUPltdKTogYm9vbGVhbiB7XG4gICAgdmFyIGl2cyA9IGludGVydmFscy5maWx0ZXIoaXYgPT4gaXYuY29udGlnID09PSB0aGlzLmNvbnRpZylcbiAgICAgICAgICAgICAgICAgICAgICAgLm1hcChpdiA9PiBpdi5pbnRlcnZhbCk7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJ2YWwuaXNDb3ZlcmVkQnkoaXZzKTtcbiAgfVxuXG4gIGNvbnRhaW5zTG9jdXMoY29udGlnOiBULCBwb3NpdGlvbjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29udGlnID09PSBjb250aWcgJiZcbiAgICAgICAgICAgdGhpcy5pbnRlcnZhbC5jb250YWlucyhwb3NpdGlvbik7XG4gIH1cblxuICAvLyBMaWtlIGNvbnRhaW5zTG9jdXMsIGJ1dCBhbGxvd3MgJ2NocjE3JyB2cyAnMTcnLXN0eWxlIG1pc21hdGNoZXNcbiAgY2hyQ29udGFpbnNMb2N1cyhjb250aWc6IFQsIHBvc2l0aW9uOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jaHJPbkNvbnRpZyhjb250aWcpICYmXG4gICAgICAgICAgIHRoaXMuaW50ZXJ2YWwuY29udGFpbnMocG9zaXRpb24pO1xuICB9XG5cbiAgLy8gSXMgdGhpcyByZWFkIG9uIHRoZSBnaXZlbiBjb250aWc/IChhbGxvd2luZyBmb3IgY2hyMTcgdnMgMTctc3R5bGUgbWlzbWF0Y2hlcylcbiAgY2hyT25Db250aWcoY29udGlnOiBUKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNvbnRpZyA9PT0gY29udGlnIHx8XG4gICAgICAgICAgICB0aGlzLmNvbnRpZyA9PT0gJ2NocicgKyBjb250aWcgfHxcbiAgICAgICAgICAgICdjaHInICsgdGhpcy5jb250aWcgPT09IGNvbnRpZyk7XG4gIH1cblxuICBjbG9uZSgpOiBDb250aWdJbnRlcnZhbDxUPiB7XG4gICAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbCh0aGlzLmNvbnRpZywgdGhpcy5pbnRlcnZhbC5zdGFydCwgdGhpcy5pbnRlcnZhbC5zdG9wKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaW1pbGFyIHRvIEludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMsIGJ1dCBvbmx5IGNvbnNpZGVycyB0aG9zZSBpbnRlcnZhbHNcbiAgICogb24gdGhlIHNhbWUgY29udGlnIGFzIHRoaXMgb25lLlxuICAgKi9cbiAgY29tcGxlbWVudEludGVydmFscyhpbnRlcnZhbHM6IENvbnRpZ0ludGVydmFsPFQ+W10pOiBDb250aWdJbnRlcnZhbDxUPltdIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnZhbC5jb21wbGVtZW50SW50ZXJ2YWxzKFxuICAgICAgICBmbGF0TWFwKGludGVydmFscywgY2kgPT4gY2kuY29udGlnID09PSB0aGlzLmNvbnRpZyA/IFtjaS5pbnRlcnZhbF0gOiBbXSkpXG4gICAgICAgIC5tYXAoaXYgPT4gbmV3IENvbnRpZ0ludGVydmFsKHRoaXMuY29udGlnLCBpdi5zdGFydCwgaXYuc3RvcCkpO1xuICB9XG5cbiAgLypcbiAgVGhpcyBtZXRob2QgZG9lc24ndCB0eXBlY2hlY2suIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svZmxvdy9pc3N1ZXMvMzg4XG4gIGlzQWZ0ZXJJbnRlcnZhbChvdGhlcjogQ29udGlnSW50ZXJ2YWwpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHRoaXMuY29udGlnID4gb3RoZXIuY29udGlnIHx8XG4gICAgICAgICAgICAodGhpcy5jb250aWcgPT09IG90aGVyLmNvbnRpZyAmJiB0aGlzLnN0YXJ0KCkgPiBvdGhlci5zdGFydCgpKSk7XG4gIH1cbiAgKi9cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLmNvbnRpZ306JHt0aGlzLnN0YXJ0KCl9LSR7dGhpcy5zdG9wKCl9YDtcbiAgfVxuXG4gIHRvR2Vub21lUmFuZ2UoKTogR2Vub21lUmFuZ2Uge1xuICAgIGlmICghKHR5cGVvZiB0aGlzLmNvbnRpZyA9PT0gJ3N0cmluZycgfHwgdGhpcy5jb250aWcgaW5zdGFuY2VvZiBTdHJpbmcpKSB7XG4gICAgICB0aHJvdyAnQ2Fubm90IGNvbnZlcnQgbnVtZXJpYyBDb250aWdJbnRlcnZhbCB0byBHZW5vbWVSYW5nZSc7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBjb250aWc6IHRoaXMuY29udGlnLFxuICAgICAgc3RhcnQ6IHRoaXMuc3RhcnQoKSxcbiAgICAgIHN0b3A6IHRoaXMuc3RvcCgpXG4gICAgfTtcbiAgfVxuXG4gIC8vIENvbXBhcmF0b3IgZm9yIHVzZSB3aXRoIEFycmF5LnByb3RvdHlwZS5zb3J0XG4gIHN0YXRpYyBjb21wYXJlKGE6IENvbnRpZ0ludGVydmFsLCBiOiBDb250aWdJbnRlcnZhbCk6IG51bWJlciB7XG4gICAgaWYgKGEuY29udGlnID4gYi5jb250aWcpIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9IGVsc2UgaWYgKGEuY29udGlnIDwgYi5jb250aWcpIHtcbiAgICAgIHJldHVybiArMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGEuc3RhcnQoKSAtIGIuc3RhcnQoKTtcbiAgICB9XG4gIH1cblxuICAvLyBTb3J0IGFuIGFycmF5IG9mIGludGVydmFscyAmIGNvYWxlc2NlIGFkamFjZW50L292ZXJsYXBwaW5nIHJhbmdlcy5cbiAgLy8gTkI6IHRoaXMgbWF5IHJlLW9yZGVyIHRoZSBpbnRlcnZhbHMgcGFyYW1ldGVyXG4gIHN0YXRpYyBjb2FsZXNjZShpbnRlcnZhbHM6IENvbnRpZ0ludGVydmFsW10pOiBDb250aWdJbnRlcnZhbFtdIHtcbiAgICBpbnRlcnZhbHMuc29ydChDb250aWdJbnRlcnZhbC5jb21wYXJlKTtcblxuICAgIHZhciBycyA9IFtdO1xuICAgIGludGVydmFscy5mb3JFYWNoKHIgPT4ge1xuICAgICAgaWYgKHJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBycy5wdXNoKHIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBsYXN0UiA9IHJzW3JzLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKHIuaW50ZXJzZWN0cyhsYXN0UikgfHwgci5pc0FkamFjZW50VG8obGFzdFIpKSB7XG4gICAgICAgIGxhc3RSID0gcnNbcnMubGVuZ3RoIC0gMV0gPSBsYXN0Ui5jbG9uZSgpO1xuICAgICAgICBsYXN0Ui5pbnRlcnZhbC5zdG9wID0gTWF0aC5tYXgoci5pbnRlcnZhbC5zdG9wLCBsYXN0Ui5pbnRlcnZhbC5zdG9wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJzLnB1c2gocik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBzdGF0aWMgZnJvbUdlbm9tZVJhbmdlKHJhbmdlOiBHZW5vbWVSYW5nZSk6IENvbnRpZ0ludGVydmFsPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCwgcmFuZ2Uuc3RvcCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDb250aWdJbnRlcnZhbDtcbiIsIi8qKlxuICogQ29udHJvbHMgZm9yIHpvb21pbmcgdG8gcGFydGljdWxhciByYW5nZXMgb2YgdGhlIGdlbm9tZS5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1BhcnRpYWxHZW5vbWVSYW5nZX0gZnJvbSAnLi90eXBlcyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEludGVydmFsIGZyb20gJy4vSW50ZXJ2YWwnO1xuXG50eXBlIFByb3BzID0ge1xuICByYW5nZTogP0dlbm9tZVJhbmdlO1xuICBjb250aWdMaXN0OiBzdHJpbmdbXTtcbiAgb25DaGFuZ2U6IChuZXdSYW5nZTogR2Vub21lUmFuZ2UpPT52b2lkO1xufTtcblxuY2xhc3MgQ29udHJvbHMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBwcm9wczogUHJvcHM7XG4gIHN0YXRlOiB2b2lkOyAgLy8gbm8gc3RhdGVcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICB9XG5cbiAgbWFrZVJhbmdlKCk6IEdlbm9tZVJhbmdlIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGlnOiB0aGlzLnJlZnMuY29udGlnLnZhbHVlLFxuICAgICAgc3RhcnQ6IE51bWJlcih0aGlzLnJlZnMuc3RhcnQudmFsdWUpLFxuICAgICAgc3RvcDogTnVtYmVyKHRoaXMucmVmcy5zdG9wLnZhbHVlKVxuICAgIH07XG4gIH1cblxuICBjb21wbGV0ZVJhbmdlKHJhbmdlOiA/UGFydGlhbEdlbm9tZVJhbmdlKTogR2Vub21lUmFuZ2Uge1xuICAgIHJhbmdlID0gcmFuZ2UgfHwge307XG4gICAgaWYgKHJhbmdlLnN0YXJ0ICYmIHJhbmdlLnN0b3AgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQ29uc3RydWN0IGEgcmFuZ2UgY2VudGVyZWQgYXJvdW5kIGEgdmFsdWUuIFRoaXMgbWF0Y2hlcyBJR1YuXG4gICAgICByYW5nZS5zdG9wID0gcmFuZ2Uuc3RhcnQgKyAyMDtcbiAgICAgIHJhbmdlLnN0YXJ0IC09IDIwO1xuICAgIH1cblxuICAgIGlmIChyYW5nZS5jb250aWcpIHtcbiAgICAgIC8vIFRoZXJlIGFyZSBtYWpvciBwZXJmb3JtYW5jZSBpc3N1ZXMgd2l0aCBoYXZpbmcgYSAnY2hyJyBtaXNtYXRjaCBpbiB0aGVcbiAgICAgIC8vIGdsb2JhbCBsb2NhdGlvbiBvYmplY3QuXG4gICAgICBjb25zdCBjb250aWcgPSByYW5nZS5jb250aWc7XG4gICAgICB2YXIgYWx0Q29udGlnID0gXy5maW5kKHRoaXMucHJvcHMuY29udGlnTGlzdCwgcmVmID0+IHV0aWxzLmlzQ2hyTWF0Y2goY29udGlnLCByZWYpKTtcbiAgICAgIGlmIChhbHRDb250aWcpIHJhbmdlLmNvbnRpZyA9IGFsdENvbnRpZztcbiAgICB9XG5cbiAgICByZXR1cm4gKF8uZXh0ZW5kKHt9LCB0aGlzLnByb3BzLnJhbmdlLCByYW5nZSkgOiBhbnkpO1xuICB9XG5cbiAgaGFuZGxlQ29udGlnQ2hhbmdlKGU6IFN5bnRoZXRpY0V2ZW50KSB7XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh0aGlzLmNvbXBsZXRlUmFuZ2Uoe2NvbnRpZzogdGhpcy5yZWZzLmNvbnRpZy52YWx1ZX0pKTtcbiAgfVxuXG4gIGhhbmRsZUZvcm1TdWJtaXQoZTogU3ludGhldGljRXZlbnQpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIHJhbmdlID0gdGhpcy5jb21wbGV0ZVJhbmdlKHV0aWxzLnBhcnNlUmFuZ2UodGhpcy5yZWZzLnBvc2l0aW9uLnZhbHVlKSk7XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZShyYW5nZSk7XG4gIH1cblxuICAvLyBTZXRzIHRoZSB2YWx1ZXMgb2YgdGhlIGlucHV0IGVsZW1lbnRzIHRvIG1hdGNoIGBwcm9wcy5yYW5nZWAuXG4gIHVwZGF0ZVJhbmdlVUkoKSB7XG4gICAgY29uc3QgciA9IHRoaXMucHJvcHMucmFuZ2U7XG4gICAgaWYgKCFyKSByZXR1cm47XG5cbiAgICB0aGlzLnJlZnMucG9zaXRpb24udmFsdWUgPSB1dGlscy5mb3JtYXRJbnRlcnZhbChuZXcgSW50ZXJ2YWwoci5zdGFydCwgci5zdG9wKSk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5jb250aWdMaXN0KSB7XG4gICAgICB2YXIgY29udGlnSWR4ID0gdGhpcy5wcm9wcy5jb250aWdMaXN0LmluZGV4T2Yoci5jb250aWcpO1xuICAgICAgdGhpcy5yZWZzLmNvbnRpZy5zZWxlY3RlZEluZGV4ID0gY29udGlnSWR4O1xuICAgIH1cbiAgfVxuXG4gIHpvb21JbihlOiBhbnkpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy56b29tQnlGYWN0b3IoMC41KTtcbiAgfVxuXG4gIHpvb21PdXQoZTogYW55KSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuem9vbUJ5RmFjdG9yKDIuMCk7XG4gIH1cblxuICB6b29tQnlGYWN0b3IoZmFjdG9yOiBudW1iZXIpIHtcbiAgICB2YXIgciA9IHRoaXMucHJvcHMucmFuZ2U7XG4gICAgaWYgKCFyKSByZXR1cm47XG5cbiAgICB2YXIgaXYgPSB1dGlscy5zY2FsZVJhbmdlKG5ldyBJbnRlcnZhbChyLnN0YXJ0LCByLnN0b3ApLCBmYWN0b3IpO1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2Uoe1xuICAgICAgY29udGlnOiByLmNvbnRpZyxcbiAgICAgIHN0YXJ0OiBpdi5zdGFydCxcbiAgICAgIHN0b3A6IGl2LnN0b3BcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIHZhciBjb250aWdPcHRpb25zID0gdGhpcy5wcm9wcy5jb250aWdMaXN0XG4gICAgICAgID8gdGhpcy5wcm9wcy5jb250aWdMaXN0Lm1hcCgoY29udGlnLCBpKSA9PiA8b3B0aW9uIGtleT17aX0+e2NvbnRpZ308L29wdGlvbj4pXG4gICAgICAgIDogbnVsbDtcblxuICAgIC8vIE5vdGU6IGlucHV0IHZhbHVlcyBhcmUgc2V0IGluIGNvbXBvbmVudERpZFVwZGF0ZS5cbiAgICByZXR1cm4gKFxuICAgICAgPGZvcm0gY2xhc3NOYW1lPSdjb250cm9scycgb25TdWJtaXQ9e3RoaXMuaGFuZGxlRm9ybVN1Ym1pdC5iaW5kKHRoaXMpfT5cbiAgICAgICAgPHNlbGVjdCByZWY9J2NvbnRpZycgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ29udGlnQ2hhbmdlLmJpbmQodGhpcyl9PlxuICAgICAgICAgIHtjb250aWdPcHRpb25zfVxuICAgICAgICA8L3NlbGVjdD57JyAnfVxuICAgICAgICA8aW5wdXQgcmVmPSdwb3NpdGlvbicgdHlwZT0ndGV4dCcgLz57JyAnfVxuICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT0nYnRuLXN1Ym1pdCcgb25DbGljaz17dGhpcy5oYW5kbGVGb3JtU3VibWl0LmJpbmQodGhpcyl9PkdvPC9idXR0b24+eycgJ31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3pvb20tY29udHJvbHMnPlxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdidG4tem9vbS1vdXQnIG9uQ2xpY2s9e3RoaXMuem9vbU91dC5iaW5kKHRoaXMpfT48L2J1dHRvbj57JyAnfVxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdidG4tem9vbS1pbicgb25DbGljaz17dGhpcy56b29tSW4uYmluZCh0aGlzKX0+PC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9mb3JtPlxuICAgICk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBPYmplY3QpIHtcbiAgICBpZiAoIV8uaXNFcXVhbChwcmV2UHJvcHMucmFuZ2UsIHRoaXMucHJvcHMucmFuZ2UpKSB7XG4gICAgICB0aGlzLnVwZGF0ZVJhbmdlVUkoKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnVwZGF0ZVJhbmdlVUkoKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRyb2xzO1xuIiwiLyoqXG4gKiBUaGlzIHNlcnZlcyBhcyBhIGJyaWRnZSBiZXR3ZWVuIG9yZy5nYTRnaC5HQVJlYWRBbGlnbm1lbnQgYW5kIHRoZVxuICogcGlsZXVwLmpzIEFsaWdubWVudCB0eXBlLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7Q2lnYXJPcCwgTWF0ZVByb3BlcnRpZXMsIFN0cmFuZH0gZnJvbSAnLi9BbGlnbm1lbnQnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgU2FtUmVhZCBmcm9tICcuL2RhdGEvU2FtUmVhZCc7XG5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZ2E0Z2gvc2NoZW1hcy9ibG9iL3YwLjUuMS9zcmMvbWFpbi9yZXNvdXJjZXMvYXZyby9jb21tb24uYXZkbFxudmFyIE9QX01BUCA9IHtcbiAgQUxJR05NRU5UX01BVENIOiAnTScsXG4gIElOU0VSVDogJ0knLFxuICBERUxFVEU6ICdEJyxcbiAgU0tJUDogJ04nLFxuICBDTElQX1NPRlQ6ICdTJyxcbiAgQ0xJUF9IQVJEOiAnSCcsXG4gIFBBRDogJ1AnLFxuICBTRVFVRU5DRV9NQVRDSDogJz0nLFxuICBTRVFVRU5DRV9NSVNNQVRDSDogJ1gnXG59O1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgYWN0cyBhcyBhIGJyaWRnZSBiZXR3ZWVuIG9yZy5nYTRnaC5HQVJlYWRBbGlnbm1lbnQgYW5kIHRoZVxuICogcGlsZXVwLmpzIEFsaWdubWVudCB0eXBlLlxuICovXG5jbGFzcyBHQTRHSEFsaWdubWVudCAvKiBpbXBsZW1lbnRzIEFsaWdubWVudCAqLyB7XG4gIHBvczogbnVtYmVyO1xuICByZWY6IHN0cmluZztcbiAgYWxpZ25tZW50OiBPYmplY3Q7XG4gIG5hbWU6IHN0cmluZztcbiAgY2lnYXJPcHM6IENpZ2FyT3BbXTtcbiAgX2ludGVydmFsOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+O1xuXG4gIC8vIGFsaWdubWVudCBmb2xsb3dzIG9yZy5nYTRnaC5HQVJlYWRBbGlnbm1lbnRcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dhNGdoL3NjaGVtYXMvYmxvYi92MC41LjEvc3JjL21haW4vcmVzb3VyY2VzL2F2cm8vcmVhZHMuYXZkbFxuICBjb25zdHJ1Y3RvcihhbGlnbm1lbnQ6IE9iamVjdCkge1xuICAgIHRoaXMuYWxpZ25tZW50ID0gYWxpZ25tZW50O1xuICAgIHRoaXMucG9zID0gYWxpZ25tZW50LmFsaWdubWVudC5wb3NpdGlvbi5wb3NpdGlvbjtcbiAgICB0aGlzLnJlZiA9IGFsaWdubWVudC5hbGlnbm1lbnQucG9zaXRpb24ucmVmZXJlbmNlTmFtZTtcbiAgICB0aGlzLm5hbWUgPSBhbGlnbm1lbnQuZnJhZ21lbnROYW1lO1xuXG4gICAgdGhpcy5jaWdhck9wcyA9IGFsaWdubWVudC5hbGlnbm1lbnQuY2lnYXIubWFwKFxuICAgICAgICAoe29wZXJhdGlvbiwgb3BlcmF0aW9uTGVuZ3RoOiBsZW5ndGh9KSA9PiAoeyBvcDogT1BfTUFQW29wZXJhdGlvbl0sIGxlbmd0aCB9KSk7XG4gICAgdGhpcy5faW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwodGhpcy5yZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MgKyB0aGlzLmdldFJlZmVyZW5jZUxlbmd0aCgpIC0gMSk7XG4gIH1cblxuICBnZXRLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gR0E0R0hBbGlnbm1lbnQua2V5RnJvbUdBNEdIUmVzcG9uc2UodGhpcy5hbGlnbm1lbnQpO1xuICB9XG5cbiAgZ2V0U3RyYW5kKCk6IFN0cmFuZCB7XG4gICAgcmV0dXJuIHRoaXMuYWxpZ25tZW50LmFsaWdubWVudC5wb3NpdGlvbi5yZXZlcnNlU3RyYW5kID8gJy0nIDogJysnO1xuICB9XG5cbiAgZ2V0UXVhbGl0eVNjb3JlcygpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuYWxpZ25tZW50LmFsaWduZWRRdWFsaXR5O1xuICB9XG5cbiAgZ2V0U2VxdWVuY2UoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5hbGlnbm1lbnQuYWxpZ25lZFNlcXVlbmNlO1xuICB9XG5cbiAgZ2V0SW50ZXJ2YWwoKTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVydmFsO1xuICB9XG5cbiAgaW50ZXJzZWN0cyhpbnRlcnZhbDogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpbnRlcnZhbC5pbnRlcnNlY3RzKHRoaXMuZ2V0SW50ZXJ2YWwoKSk7XG4gIH1cblxuICBnZXRSZWZlcmVuY2VMZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gU2FtUmVhZC5yZWZlcmVuY2VMZW5ndGhGcm9tT3BzKHRoaXMuY2lnYXJPcHMpO1xuICB9XG5cbiAgZ2V0TWF0ZVByb3BlcnRpZXMoKTogP01hdGVQcm9wZXJ0aWVzIHtcbiAgICB2YXIgbmV4dCA9IHRoaXMuYWxpZ25tZW50Lm5leHRNYXRlUG9zaXRpb247XG4gICAgcmV0dXJuIG5leHQgJiYge1xuICAgICAgcmVmOiBuZXh0LnJlZmVyZW5jZU5hbWUsXG4gICAgICBwb3M6IG5leHQucG9zaXRpb24sXG4gICAgICBzdHJhbmQ6IG5leHQucmV2ZXJzZVN0cmFuZCA/ICctJyA6ICcrJ1xuICAgIH07XG4gIH1cblxuICBnZXRJbmZlcnJlZEluc2VydFNpemUoKTogbnVtYmVyIHtcbiAgICAvLyBUT0RPOiBTQU0vQkFNIHdyaXRlcyB0aGlzIGV4cGxpY2l0bHkuIERvZXMgR0E0R0ggcmVhbGx5IG5vdD9cbiAgICB2YXIgbSA9IHRoaXMuZ2V0TWF0ZVByb3BlcnRpZXMoKTtcbiAgICBpZiAobSAmJiBtLnJlZiA9PSB0aGlzLnJlZikge1xuICAgICAgdmFyIHN0YXJ0MSA9IHRoaXMuX2ludGVydmFsLnN0YXJ0KCksXG4gICAgICAgICAgc3RvcDEgPSB0aGlzLl9pbnRlcnZhbC5zdG9wKCksXG4gICAgICAgICAgc3RhcnQyID0gbS5wb3MsXG4gICAgICAgICAgc3RvcDIgPSBzdGFydDIgKyB0aGlzLmdldFNlcXVlbmNlKCkubGVuZ3RoO1xuICAgICAgcmV0dXJuIE1hdGgubWF4KHN0b3AxLCBzdG9wMikgLSBNYXRoLm1pbihzdGFydDEsIHN0YXJ0Mik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRoaXMgaXMgZXhwb3NlZCBhcyBhIHN0YXRpYyBtZXRob2QgdG8gZmFjaWxpdGF0ZSBhbiBvcHRpbWl6YXRpb24gaW4gR0E0R0hEYXRhU291cmNlLlxuICBzdGF0aWMga2V5RnJvbUdBNEdIUmVzcG9uc2UoYWxpZ25tZW50OiBPYmplY3QpOiBzdHJpbmcge1xuICAgIC8vIHRoaXMuYWxpZ25tZW50LmlkIHdvdWxkIGJlIGFwcGVhbGluZyBoZXJlLCBidXQgaXQncyBub3QgYWN0dWFsbHkgdW5pcXVlIVxuICAgIHJldHVybiBhbGlnbm1lbnQuZnJhZ21lbnROYW1lICsgJzonICsgYWxpZ25tZW50LnJlYWROdW1iZXI7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBHQTRHSEFsaWdubWVudDtcbiIsIi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgY2xvc2VkIG51bWVyaWMgaW50ZXJ2YWwsIFtzdGFydCwgc3RvcF0uXG4gKlxuICogQGZsb3dcbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuY2xhc3MgSW50ZXJ2YWwge1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG5cbiAgLy8gUmVwcmVzZW50cyBbc3RhcnQsIHN0b3BdIC0tIGJvdGggZW5kcyBhcmUgaW5jbHVzaXZlLlxuICAvLyBJZiBzdG9wIDwgc3RhcnQsIHRoZW4gdGhpcyBpcyBhbiBlbXB0eSBpbnRlcnZhbC5cbiAgY29uc3RydWN0b3Ioc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKSB7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuc3RvcCA9IHN0b3A7XG4gIH1cblxuICAvLyBUT0RPOiBtYWtlIHRoaXMgYSBnZXR0ZXIgbWV0aG9kICYgc3dpdGNoIHRvIEJhYmVsLlxuICBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgdGhpcy5zdG9wIC0gdGhpcy5zdGFydCArIDEpO1xuICB9XG5cbiAgaW50ZXJzZWN0KG90aGVyOiBJbnRlcnZhbCk6IEludGVydmFsIHtcbiAgICByZXR1cm4gbmV3IEludGVydmFsKE1hdGgubWF4KHRoaXMuc3RhcnQsIG90aGVyLnN0YXJ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKHRoaXMuc3RvcCwgb3RoZXIuc3RvcCkpO1xuICB9XG5cbiAgaW50ZXJzZWN0cyhvdGhlcjogSW50ZXJ2YWwpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdGFydCA8PSBvdGhlci5zdG9wICYmIG90aGVyLnN0YXJ0IDw9IHRoaXMuc3RvcDtcbiAgfVxuXG4gIGNvbnRhaW5zKHZhbHVlOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdmFsdWUgPj0gdGhpcy5zdGFydCAmJiB2YWx1ZSA8PSB0aGlzLnN0b3A7XG4gIH1cblxuICBjb250YWluc0ludGVydmFsKG90aGVyOiBJbnRlcnZhbCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5zKG90aGVyLnN0YXJ0KSAmJiB0aGlzLmNvbnRhaW5zKG90aGVyLnN0b3ApO1xuICB9XG5cbiAgY2xvbmUoKTogSW50ZXJ2YWwge1xuICAgIHJldHVybiBuZXcgSW50ZXJ2YWwodGhpcy5zdGFydCwgdGhpcy5zdG9wKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJcyB0aGlzIEludGVydmFsIGVudGlyZWx5IGNvdmVyZWQgYnkgdGhlIHVuaW9uIG9mIHRoZSByYW5nZXM/XG4gICAqIFRoZSByYW5nZXMgcGFyYW1ldGVyIG11c3QgYmUgc29ydGVkIGJ5IHJhbmdlLnN0YXJ0XG4gICAqL1xuICBpc0NvdmVyZWRCeShyYW5nZXM6IEludGVydmFsW10pOiBib29sZWFuIHtcbiAgICB2YXIgcmVtYWluaW5nID0gdGhpcy5jbG9uZSgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgciA9IHJhbmdlc1tpXTtcbiAgICAgIGlmIChpICYmIHIuc3RhcnQgPCByYW5nZXNbaSAtIDFdLnN0YXJ0KSB7XG4gICAgICAgIHRocm93ICdpc0NvdmVyZWRCeSBtdXN0IGJlIGNhbGxlZCB3aXRoIHNvcnRlZCByYW5nZXMnO1xuICAgICAgfVxuICAgICAgaWYgKHIuc3RhcnQgPiByZW1haW5pbmcuc3RhcnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAgLy8gQSBwb3NpdGlvbiBoYXMgYmVlbiBtaXNzZWQgYW5kIHRoZXJlJ3Mgbm8gZ29pbmcgYmFjay5cbiAgICAgIH1cbiAgICAgIHJlbWFpbmluZy5zdGFydCA9IHIuc3RvcCArIDE7XG4gICAgICBpZiAocmVtYWluaW5nLmxlbmd0aCgpIDw9IDApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIHRoZSBzdWJpbnRlcnZhbHMgd2hpY2ggYXJlIG5vdCBpbiBgb3RoZXJgLlxuICAgKiBUaGlzIGNhbiB5aWVsZCBlaXRoZXIgemVybywgb25lIG9yIHR3byBJbnRlcnZhbHMuXG4gICAqL1xuICBzdWJ0cmFjdChvdGhlcjogSW50ZXJ2YWwpOiBJbnRlcnZhbFtdIHtcbiAgICBpZiAoIXRoaXMuaW50ZXJzZWN0cyhvdGhlcikpIHtcbiAgICAgIHJldHVybiBbdGhpc107ICAvLyB1bmFmZmVjdGVkIGJ5IHRoaXMgcmFuZ2VcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29udGFpbnNJbnRlcnZhbChvdGhlcikpIHtcbiAgICAgIC8vIHJldHVybiB0aGUgYml0IGJlZm9yZSBhbmQgdGhlIGJpdCBhZnRlclxuICAgICAgcmV0dXJuIFtuZXcgSW50ZXJ2YWwodGhpcy5zdGFydCwgb3RoZXIuc3RhcnQgLSAxKSxcbiAgICAgICAgICAgICAgbmV3IEludGVydmFsKG90aGVyLnN0b3AgKyAxLCB0aGlzLnN0b3ApXS5maWx0ZXIoeCA9PiB4Lmxlbmd0aCgpID4gMCk7XG4gICAgfSBlbHNlIGlmIChvdGhlci5jb250YWluc0ludGVydmFsKHRoaXMpKSB7XG4gICAgICByZXR1cm4gW107ICAvLyBpdCdzIGJlZW4gY29tcGxldGVseSBvYmxpdGVyYXRlZFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpdCBvdmVybGFwcyBvbmUgZW5kXG4gICAgICBpZiAob3RoZXIuc3RhcnQgPCB0aGlzLnN0YXJ0KSB7XG4gICAgICAgIHJldHVybiBbbmV3IEludGVydmFsKG90aGVyLnN0b3AgKyAxLCB0aGlzLnN0b3ApXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbbmV3IEludGVydmFsKHRoaXMuc3RhcnQsIG90aGVyLnN0YXJ0IC0gMSldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIHRoZSBkaXNqb2ludCBzdWJpbnRlcnZhbHMgbm90IGNvdmVyZWQgYnkgYW55IGludGVydmFsIGluIHRoZSBsaXN0LlxuICAgKlxuICAgKiBJZiBjb21wID0gaW50ZXJ2YWwuY29tcGxlbWVudEludGVydmFscyhyYW5nZXMpLCB0aGVuIHRoaXMgZ3VhcmFudGVlcyB0aGF0OlxuICAgKiAtIGNvbXAgdW5pb24gcmFuZ2VzID0gaW50ZXJ2YWxcbiAgICogLSBhIGludCBiID0gMCBmb3JhbGwgYSBcXGluIGNvbXAsIGIgaW4gcmFuZ2VzXG4gICAqXG4gICAqIChUaGUgaW5wdXQgcmFuZ2VzIG5lZWQgbm90IGJlIGRpc2pvaW50LilcbiAgICovXG4gIGNvbXBsZW1lbnRJbnRlcnZhbHMocmFuZ2VzOiBJbnRlcnZhbFtdKTogSW50ZXJ2YWxbXSB7XG4gICAgdmFyIGNvbXBzID0gW3RoaXNdO1xuICAgIHJhbmdlcy5mb3JFYWNoKHJhbmdlID0+IHtcbiAgICAgIHZhciBuZXdDb21wcyA9IFtdO1xuICAgICAgY29tcHMuZm9yRWFjaChpdiA9PiB7XG4gICAgICAgIG5ld0NvbXBzID0gbmV3Q29tcHMuY29uY2F0KGl2LnN1YnRyYWN0KHJhbmdlKSk7XG4gICAgICB9KTtcbiAgICAgIGNvbXBzID0gbmV3Q29tcHM7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbXBzO1xuICB9XG5cbiAgc3RhdGljIGludGVyc2VjdEFsbChpbnRlcnZhbHM6IEFycmF5PEludGVydmFsPik6IEludGVydmFsIHtcbiAgICBpZiAoIWludGVydmFscy5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVHJpZWQgdG8gaW50ZXJzZWN0IHplcm8gaW50ZXJ2YWxzJyk7XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBpbnRlcnZhbHNbMF0uY2xvbmUoKTtcbiAgICBpbnRlcnZhbHMuc2xpY2UoMSkuZm9yRWFjaChmdW5jdGlvbih7c3RhcnQsIHN0b3B9KSB7XG4gICAgICByZXN1bHQuc3RhcnQgPSBNYXRoLm1heChzdGFydCwgcmVzdWx0LnN0YXJ0KTtcbiAgICAgIHJlc3VsdC5zdG9wID0gTWF0aC5taW4oc3RvcCwgcmVzdWx0LnN0b3ApO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBSZXR1cm5zIGFuIGludGVydmFsIHdoaWNoIGNvbnRhaW5zIGFsbCB0aGUgZ2l2ZW4gaW50ZXJ2YWxzLlxuICBzdGF0aWMgYm91bmRpbmdJbnRlcnZhbChpbnRlcnZhbHM6IEFycmF5PEludGVydmFsPik6IEludGVydmFsIHtcbiAgICBpZiAoIWludGVydmFscy5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVHJpZWQgdG8gYm91bmQgemVybyBpbnRlcnZhbHMnKTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IGludGVydmFsc1swXS5jbG9uZSgpO1xuICAgIGludGVydmFscy5zbGljZSgxKS5mb3JFYWNoKGZ1bmN0aW9uKHtzdGFydCwgc3RvcH0pIHtcbiAgICAgIHJlc3VsdC5zdGFydCA9IE1hdGgubWluKHN0YXJ0LCByZXN1bHQuc3RhcnQpO1xuICAgICAgcmVzdWx0LnN0b3AgPSBNYXRoLm1heChzdG9wLCByZXN1bHQuc3RvcCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHt0aGlzLnN0YXJ0fSwgJHt0aGlzLnN0b3B9XWA7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBJbnRlcnZhbDtcbiIsIi8qKlxuICogTG9jYWxTdHJpbmdGaWxlIGlzIGEgcmVwcmVzZW50YXRpb24gb2YgYSBmaWxlIHRoYXQgd2FzIGNyZWF0ZWQgZnJvbSBpbnB1dCBzdHJpbmcuIFVzZWQgZm9yIHRlc3RpbmcgYW5kIHNtYWxsIGlucHV0IGZpbGVzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCBBYnN0cmFjdEZpbGUgZnJvbSAnLi9BYnN0cmFjdEZpbGUnO1xuXG5jbGFzcyBMb2NhbFN0cmluZ0ZpbGUgZXh0ZW5kcyBBYnN0cmFjdEZpbGUge1xuICBmaWxlTGVuZ3RoOiBudW1iZXI7XG4gIGNvbnRlbnQ6IHN0cmluZzsgIC8vY29udGVudCBvZiB0aGlzIFwiRmlsZVwiXG4gIGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG5cbiAgY29uc3RydWN0b3IoY29udGVudDogc3RyaW5nKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmZpbGVMZW5ndGggPSBjb250ZW50Lmxlbmd0aDsgIFxuICAgIHRoaXMuYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGNvbnRlbnQubGVuZ3RoKTsgLy8gMiBieXRlcyBmb3IgZWFjaCBjaGFyXG4gICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcblxuICAgIHZhciBidWZWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIpO1xuICAgIGZvciAodmFyIGk9MDsgaSA8IHRoaXMuZmlsZUxlbmd0aDsgaSsrKSB7XG4gICAgICBidWZWaWV3W2ldID0gY29udGVudC5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgfVxuXG4gIGdldEJ5dGVzKHN0YXJ0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKTogUS5Qcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgaWYgKGxlbmd0aCA8IDApIHtcbiAgICAgIHJldHVybiBRLnJlamVjdChgUmVxdWVzdGVkIDwwIGJ5dGVzICgke2xlbmd0aH0pYCk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHJlbW90ZSBmaWxlIGxlbmd0aCBpcyBrbm93biwgY2xhbXAgdGhlIHJlcXVlc3QgdG8gZml0IHdpdGhpbiBpdC5cbiAgICB2YXIgc3RvcCA9IHN0YXJ0ICsgbGVuZ3RoIC0gMTtcbiAgICBpZiAodGhpcy5maWxlTGVuZ3RoICE9IC0xKSB7XG4gICAgICBzdG9wID0gTWF0aC5taW4odGhpcy5maWxlTGVuZ3RoIC0gMSwgc3RvcCk7XG4gICAgfVxuXG4gICAgLy8gRmlyc3QgY2hlY2sgdGhlIGNhY2hlLlxuICAgIHZhciBidWYgPSB0aGlzLmdldEZyb21DYWNoZShzdGFydCwgc3RvcCk7XG4gICAgcmV0dXJuIFEud2hlbihidWYpO1xuICB9XG5cbiAgLy8gUmVhZCB0aGUgZW50aXJlIGZpbGUgLS0gbm90IHJlY29tbWVuZGVkIGZvciBsYXJnZSBmaWxlcyFcbiAgZ2V0QWxsKCk6IFEuUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgdmFyIGJ1ZiA9IHRoaXMuZ2V0RnJvbUNhY2hlKDAsIHRoaXMuZmlsZUxlbmd0aCAtIDEpO1xuICAgcmV0dXJuIFEud2hlbihidWYpO1xuICB9XG5cbiAgLy8gUmVhZHMgdGhlIGVudGlyZSBmaWxlIGFzIGEgc3RyaW5nIChub3QgYW4gQXJyYXlCdWZmZXIpLlxuICAvLyBUaGlzIGRvZXMgbm90IHVzZSB0aGUgY2FjaGUuXG4gIGdldEFsbFN0cmluZygpOiBRLlByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIFEud2hlbih0aGlzLmNvbnRlbnQpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBudW1iZXIgb2YgYnl0ZXMgaW4gdGhlIHJlbW90ZSBmaWxlLlxuICBnZXRTaXplKCk6IFEuUHJvbWlzZTxudW1iZXI+IHtcbiAgICByZXR1cm4gUS53aGVuKHRoaXMuZmlsZUxlbmd0aCk7XG4gIH1cblxuICBnZXRGcm9tQ2FjaGUoc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogP0FycmF5QnVmZmVyIHtcbiAgICByZXR1cm4gdGhpcy5idWZmZXIuc2xpY2Uoc3RhcnQsIHN0b3AgKyAxKTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gTG9jYWxTdHJpbmdGaWxlO1xuIiwiLyoqXG4gKiBBIGdlbmVyaWMgbWVudSwgaW50ZW5kZWQgdG8gYmUgdXNlZCBmb3IgYm90aCB0b2dnbGluZyBvcHRpb25zIGFuZCBpbnZva2luZyBjb21tYW5kcy5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiB2YXIgaXRlbXMgPSBbXG4gKiAgIHtrZXk6ICdhJywgbGFiZWw6ICdJdGVtIEEnLCBjaGVja2VkOiB0cnVlfSxcbiAqICAge2tleTogJ2InLCBsYWJlbDogJ0l0ZW0gQid9LFxuICogICAnLScsXG4gKiAgIHtrZXk6ICdyYW5kb20nLCBsYWJlbDogJ1BpY2sgUmFuZG9tJ31cbiAqIF07XG4gKiA8TWVudSBoZWFkZXI9XCJIZWFkZXJcIiBpdGVtcz17aXRlbXN9IG9uU2VsZWN0PXtzZWxlY3RIYW5kbGVyfSAvPlxuICpcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG50eXBlIE1lbnVJdGVtID0ge1xuICBrZXk6IHN0cmluZztcbiAgbGFiZWw6IHN0cmluZztcbiAgY2hlY2tlZD86IGJvb2xlYW47XG59O1xuXG50eXBlIFByb3BzID0ge1xuICBoZWFkZXI6IHN0cmluZztcbiAgaXRlbXM6IEFycmF5PE1lbnVJdGVtfCctJz47XG4gIG9uU2VsZWN0OiAoa2V5OiBzdHJpbmcpID0+IHZvaWQ7XG59O1xuXG5jbGFzcyBNZW51IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PHZvaWQsIFByb3BzLCB2b2lkPiB7XG4gIHByb3BzOiBQcm9wcztcblxuICBjbGlja0hhbmRsZXIoaWR4OiBudW1iZXIsIGU6IFN5bnRoZXRpY01vdXNlRXZlbnQpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIGl0ZW0gPSB0aGlzLnByb3BzLml0ZW1zW2lkeF07XG4gICAgaWYgKHR5cGVvZihpdGVtKSA9PSAnc3RyaW5nJykgcmV0dXJuOyAgLy8gZm9yIGZsb3dcbiAgICB0aGlzLnByb3BzLm9uU2VsZWN0KGl0ZW0ua2V5KTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIHZhciBtYWtlSGFuZGxlciA9IGkgPT4gdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzLCBpKTtcbiAgICB2YXIgZWxzID0gW107XG4gICAgaWYgKHRoaXMucHJvcHMuaGVhZGVyKSB7XG4gICAgICBlbHMucHVzaCg8ZGl2IGtleT0naGVhZGVyJyBjbGFzc05hbWU9J21lbnUtaGVhZGVyJz57dGhpcy5wcm9wcy5oZWFkZXJ9PC9kaXY+KTtcbiAgICB9XG4gICAgZWxzID0gZWxzLmNvbmNhdCh0aGlzLnByb3BzLml0ZW1zLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgaWYgKHR5cGVvZihpdGVtKSA9PT0gJ3N0cmluZycpIHsgIC8vIHdvdWxkIHByZWZlciBcIj09ICctJ1wiLCBzZWUgZmxvdyMxMDY2XG4gICAgICAgIHJldHVybiA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPSdtZW51LXNlcGFyYXRvcicgLz47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY2hlY2tDbGFzcyA9ICdjaGVjaycgKyAoaXRlbS5jaGVja2VkID8gJyBjaGVja2VkJyA6ICcnKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPSdtZW51LWl0ZW0nIG9uQ2xpY2s9e21ha2VIYW5kbGVyKGkpfT5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17Y2hlY2tDbGFzc30+PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdtZW51LWl0ZW0tbGFiZWwnPntpdGVtLmxhYmVsfTwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J21lbnUnPlxuICAgICAgICB7ZWxzfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE1lbnU7XG4iLCIvKipcbiAqIFJlbW90ZUZpbGUgaXMgYSByZXByZXNlbnRhdGlvbiBvZiBhIGZpbGUgb24gYSByZW1vdGUgc2VydmVyIHdoaWNoIGNhbiBiZVxuICogZmV0Y2hlZCBpbiBjaHVua3MsIGUuZy4gdXNpbmcgYSBSYW5nZSByZXF1ZXN0LlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCBBYnN0cmFjdEZpbGUgZnJvbSAnLi9BYnN0cmFjdEZpbGUnO1xuXG50eXBlIENodW5rID0ge1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG4gIGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG4gIC8vIFRPRE8oZGFudmspOiBwcmlvcml0eTogbnVtYmVyO1xufVxuXG5cbmNsYXNzIFJlbW90ZUZpbGUgZXh0ZW5kcyBBYnN0cmFjdEZpbGV7XG4gIHVybDogc3RyaW5nO1xuICBmaWxlTGVuZ3RoOiBudW1iZXI7XG4gIGNodW5rczogQXJyYXk8Q2h1bms+OyAgLy8gcmVnaW9ucyBvZiBmaWxlIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gbG9hZGVkLlxuICBudW1OZXR3b3JrUmVxdWVzdHM6IG51bWJlcjsgIC8vIHRyYWNrIHRoaXMgZm9yIGRlYnVnZ2luZy90ZXN0aW5nXG5cbiAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIHRoaXMuZmlsZUxlbmd0aCA9IC0xOyAgLy8gdW5rbm93blxuICAgIHRoaXMuY2h1bmtzID0gW107XG4gICAgdGhpcy5udW1OZXR3b3JrUmVxdWVzdHMgPSAwO1xuICB9XG5cbiAgZ2V0Qnl0ZXMoc3RhcnQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIpOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICBpZiAobGVuZ3RoIDwgMCkge1xuICAgICAgcmV0dXJuIFEucmVqZWN0KGBSZXF1ZXN0ZWQgPDAgYnl0ZXMgKCR7bGVuZ3RofSkgZnJvbSAke3RoaXMudXJsfWApO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSByZW1vdGUgZmlsZSBsZW5ndGggaXMga25vd24sIGNsYW1wIHRoZSByZXF1ZXN0IHRvIGZpdCB3aXRoaW4gaXQuXG4gICAgdmFyIHN0b3AgPSBzdGFydCArIGxlbmd0aCAtIDE7XG4gICAgaWYgKHRoaXMuZmlsZUxlbmd0aCAhPSAtMSkge1xuICAgICAgc3RvcCA9IE1hdGgubWluKHRoaXMuZmlsZUxlbmd0aCAtIDEsIHN0b3ApO1xuICAgIH1cblxuICAgIC8vIEZpcnN0IGNoZWNrIHRoZSBjYWNoZS5cbiAgICB2YXIgYnVmID0gdGhpcy5nZXRGcm9tQ2FjaGUoc3RhcnQsIHN0b3ApO1xuICAgIGlmIChidWYpIHtcbiAgICAgIHJldHVybiBRLndoZW4oYnVmKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBoYW5kbGUgcGFydGlhbCBvdmVybGFwIG9mIHJlcXVlc3Qgdy8gY2FjaGUuXG5cbiAgICAvLyBOZWVkIHRvIGZldGNoIGZyb20gdGhlIG5ldHdvcmsuXG4gICAgcmV0dXJuIHRoaXMuZ2V0RnJvbU5ldHdvcmsoc3RhcnQsIHN0b3ApO1xuICB9XG5cbiAgLy8gUmVhZCB0aGUgZW50aXJlIGZpbGUgLS0gbm90IHJlY29tbWVuZGVkIGZvciBsYXJnZSBmaWxlcyFcbiAgZ2V0QWxsKCk6IFEuUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgIC8vIENoZWNrIGNhY2hlIGlmIGZpbGUgbGVuZ3RoIGlzIGF2YWlsYWJsZS5cbiAgICBpZiAodGhpcy5maWxlTGVuZ3RoICE9IC0xKSB7XG4gICAgICB2YXIgYnVmID0gdGhpcy5nZXRGcm9tQ2FjaGUoMCwgdGhpcy5maWxlTGVuZ3RoIC0gMSk7XG4gICAgICBpZiAoYnVmKSB7XG4gICAgICAgIHJldHVybiBRLndoZW4oYnVmKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHRoaXMudXJsKTtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICByZXR1cm4gdGhpcy5wcm9taXNlWEhSKHhocikudGhlbigoW2J1ZmZlcl0pID0+IHtcbiAgICAgIHRoaXMuZmlsZUxlbmd0aCA9IGJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgICAgdGhpcy5jaHVua3MgPSBbe3N0YXJ0OiAwLCBzdG9wOiB0aGlzLmZpbGVMZW5ndGggLSAxLCBidWZmZXJ9XTtcbiAgICAgIHJldHVybiBidWZmZXI7XG4gICAgfSk7XG4gIH1cblxuICAvLyBSZWFkcyB0aGUgZW50aXJlIGZpbGUgYXMgYSBzdHJpbmcgKG5vdCBhbiBBcnJheUJ1ZmZlcikuXG4gIC8vIFRoaXMgZG9lcyBub3QgdXNlIHRoZSBjYWNoZS5cbiAgZ2V0QWxsU3RyaW5nKCk6IFEuUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHRoaXMudXJsKTtcbiAgICByZXR1cm4gdGhpcy5wcm9taXNlWEhSKHhocikudGhlbigoW3N0cmluZ10pID0+IHtcbiAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgfSk7XG4gIH1cblxuICAvLyBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIG51bWJlciBvZiBieXRlcyBpbiB0aGUgcmVtb3RlIGZpbGUuXG4gIGdldFNpemUoKTogUS5Qcm9taXNlPG51bWJlcj4ge1xuICAgIGlmICh0aGlzLmZpbGVMZW5ndGggIT0gLTEpIHtcbiAgICAgIHJldHVybiBRLndoZW4odGhpcy5maWxlTGVuZ3RoKTtcbiAgICB9XG5cbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0hFQUQnLCB0aGlzLnVybCk7XG5cbiAgICByZXR1cm4gdGhpcy5wcm9taXNlWEhSKHhocikudGhlbigoKSA9PiB7XG4gICAgICAvLyBldmVudC50b3RhbCB3b3VsZCBiZSBiZXR0ZXIsIHNlZSBmYWNlYm9vay9mbG93IzM1N1xuICAgICAgdmFyIGxlbiA9IHhoci5nZXRSZXNwb25zZUhlYWRlcignQ29udGVudC1MZW5ndGgnKTtcbiAgICAgIGlmIChsZW4gIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcihsZW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgJ1JlbW90ZSByZXNvdXJjZSBoYXMgdW5rbm93biBsZW5ndGgnO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZ2V0RnJvbUNhY2hlKHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlcik6ID9BcnJheUJ1ZmZlciB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNodW5rcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGNodW5rID0gdGhpcy5jaHVua3NbaV07XG4gICAgICBpZiAoY2h1bmsuc3RhcnQgPD0gc3RhcnQgJiYgY2h1bmsuc3RvcCA+PSBzdG9wKSB7XG4gICAgICAgIHJldHVybiBjaHVuay5idWZmZXIuc2xpY2Uoc3RhcnQgLSBjaHVuay5zdGFydCwgc3RvcCAtIGNodW5rLnN0YXJ0ICsgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZ2V0RnJvbU5ldHdvcmsoc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogUS5Qcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgdmFyIGxlbmd0aCA9IHN0b3AgLSBzdGFydCArIDE7XG4gICAgaWYgKGxlbmd0aCA+IDUwMDAwMDAwKSB7XG4gICAgICB0aHJvdyBgTW9uc3RlciByZXF1ZXN0OiBXb24ndCBmZXRjaCAke2xlbmd0aH0gYnl0ZXMgZnJvbSAke3RoaXMudXJsfWA7XG4gICAgfVxuXG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKCdHRVQnLCB0aGlzLnVybCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1JhbmdlJywgYGJ5dGVzPSR7c3RhcnR9LSR7c3RvcH1gKTtcblxuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKChbYnVmZmVyXSkgPT4ge1xuICAgICAgLy8gVGhlIGFjdHVhbCBsZW5ndGggb2YgdGhlIHJlc3BvbnNlIG1heSBiZSBsZXNzIHRoYW4gcmVxdWVzdGVkIGlmIGl0J3NcbiAgICAgIC8vIHRvbyBzaG9ydCwgZS5nLiBpZiB3ZSByZXF1ZXN0IGJ5dGVzIDAtMTAwMCBvZiBhIDUwMC1ieXRlIGZpbGUuXG4gICAgICB2YXIgbmV3Q2h1bmsgPSB7IHN0YXJ0LCBzdG9wOiBzdGFydCArIGJ1ZmZlci5ieXRlTGVuZ3RoIC0gMSwgYnVmZmVyIH07XG4gICAgICB0aGlzLmNodW5rcy5wdXNoKG5ld0NodW5rKTtcblxuICAgICAgLy8gUmVjb3JkIHRoZSBmdWxsIGZpbGUgbGVuZ3RoIGlmIGl0J3MgYXZhaWxhYmxlLlxuICAgICAgdmFyIHNpemUgPSB0aGlzLl9nZXRMZW5ndGhGcm9tQ29udGVudFJhbmdlKHhocik7XG4gICAgICBpZiAoc2l6ZSAhPT0gbnVsbCAmJiBzaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHRoaXMuZmlsZUxlbmd0aCAhPSAtMSAmJiB0aGlzLmZpbGVMZW5ndGggIT0gc2l6ZSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgU2l6ZSBvZiByZW1vdGUgZmlsZSAke3RoaXMudXJsfSBjaGFuZ2VkIGZyb20gYCArXG4gICAgICAgICAgICAgICAgICAgICAgIGAke3RoaXMuZmlsZUxlbmd0aH0gdG8gJHtzaXplfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZmlsZUxlbmd0aCA9IHNpemU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFdyYXBwZXIgdG8gY29udmVydCBYSFJzIHRvIFByb21pc2VzLlxuICAvLyBUaGUgcHJvbWlzZWQgdmFsdWVzIGFyZSB0aGUgcmVzcG9uc2UgKGUuZy4gYW4gQXJyYXlCdWZmZXIpIGFuZCB0aGUgRXZlbnQuXG4gIHByb21pc2VYSFIoeGhyOiBYTUxIdHRwUmVxdWVzdCk6IFEuUHJvbWlzZTxbYW55LCBFdmVudF0+IHtcbiAgICB2YXIgdXJsID0gdGhpcy51cmw7XG4gICAgdmFyIGRlZmVycmVkID0gUS5kZWZlcigpO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDQwMCkge1xuICAgICAgICBkZWZlcnJlZC5yZWplY3QoYFJlcXVlc3QgZm9yICR7dXJsfSBmYWlsZWQgd2l0aCBzdGF0dXM6ICR7dGhpcy5zdGF0dXN9ICR7dGhpcy5zdGF0dXNUZXh0fWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShbdGhpcy5yZXNwb25zZSwgZV0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGRlZmVycmVkLnJlamVjdChgUmVxdWVzdCBmb3IgJHt1cmx9IGZhaWxlZCB3aXRoIHN0YXR1czogJHt0aGlzLnN0YXR1c30gJHt0aGlzLnN0YXR1c1RleHR9YCk7XG4gICAgfSk7XG4gICAgdGhpcy5udW1OZXR3b3JrUmVxdWVzdHMrKztcbiAgICB4aHIuc2VuZCgpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9XG5cbiAgLy8gQXR0ZW1wdGluZyB0byBhY2Nlc3MgQ29udGVudC1SYW5nZSBkaXJlY3RseSBtYXkgcmFpc2Ugc2VjdXJpdHkgZXJyb3JzLlxuICAvLyBUaGlzIGVuc3VyZXMgdGhlIGFjY2VzcyBpcyBzYWZlIGJlZm9yZSBtYWtpbmcgaXQuXG4gIF9nZXRMZW5ndGhGcm9tQ29udGVudFJhbmdlKHhocjogWE1MSHR0cFJlcXVlc3QpOiA/bnVtYmVyIHtcbiAgICBpZiAoIS9Db250ZW50LVJhbmdlL2kuZXhlYyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgY29udGVudFJhbmdlID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdDb250ZW50LVJhbmdlJyk7XG4gICAgdmFyIG0gPSAvXFwvKFxcZCspJC8uZXhlYyhjb250ZW50UmFuZ2UpO1xuICAgIGlmIChtKSB7XG4gICAgICByZXR1cm4gTnVtYmVyKG1bMV0pO1xuICAgIH1cbiAgICBjb25zb2xlLndhcm4oYFJlY2VpdmVkIGltcHJvcGVyIENvbnRlbnQtUmFuZ2UgdmFsdWUgZm9yIGAgK1xuICAgICAgICAgICAgICAgICBgJHt0aGlzLnVybH06ICR7Y29udGVudFJhbmdlfWApO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY2xlYXJDYWNoZSgpIHtcbiAgICB0aGlzLmNodW5rcyA9IFtdO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVtb3RlRmlsZTtcbiIsIi8qKlxuICogUm9vdCBvZiB0aGUgUmVhY3QgY29tcG9uZW50IHRyZWUuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtUd29CaXRTb3VyY2V9IGZyb20gJy4vc291cmNlcy9Ud29CaXREYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtWaXN1YWxpemVkVHJhY2ssIFZpeldpdGhPcHRpb25zfSBmcm9tICcuL3R5cGVzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBDb250cm9scyBmcm9tICcuL0NvbnRyb2xzJztcbmltcG9ydCBNZW51IGZyb20gJy4vTWVudSc7XG5pbXBvcnQgVmlzdWFsaXphdGlvbldyYXBwZXIgZnJvbSAnLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHJlZmVyZW5jZVNvdXJjZTogVHdvQml0U291cmNlO1xuICB0cmFja3M6IFZpc3VhbGl6ZWRUcmFja1tdO1xuICBpbml0aWFsUmFuZ2U6IEdlbm9tZVJhbmdlO1xufTtcblxuY2xhc3MgUm9vdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHByb3BzOiBQcm9wcztcbiAgc3RhdGU6IHtcbiAgICBjb250aWdMaXN0OiBzdHJpbmdbXTtcbiAgICByYW5nZTogP0dlbm9tZVJhbmdlO1xuICAgIHNldHRpbmdzTWVudUtleTogP3N0cmluZztcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBjb250aWdMaXN0OiB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5jb250aWdMaXN0KCksXG4gICAgICByYW5nZTogbnVsbCxcbiAgICAgIHNldHRpbmdzTWVudUtleTogbnVsbFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5vbignY29udGlncycsICgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjb250aWdMaXN0OiB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5jb250aWdMaXN0KCksXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGlmICghdGhpcy5zdGF0ZS5yYW5nZSkge1xuICAgICAgdGhpcy5oYW5kbGVSYW5nZUNoYW5nZSh0aGlzLnByb3BzLmluaXRpYWxSYW5nZSk7XG4gICAgfVxuICAgIC8vIGluIGNhc2UgdGhlIGNvbnRpZ3MgY2FtZSBpbiBiZXR3ZWVuIGdldEluaXRpYWxTdGF0ZSgpIGFuZCBoZXJlLlxuICAgIHRoaXMuc2V0U3RhdGUoe2NvbnRpZ0xpc3Q6IHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLmNvbnRpZ0xpc3QoKX0pO1xuICB9XG5cbiAgaGFuZGxlUmFuZ2VDaGFuZ2UobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgLy8gRG8gbm90IHByb3BhZ2F0ZSBuZWdhdGl2ZSByYW5nZXNcbiAgICBpZiAobmV3UmFuZ2Uuc3RhcnQgPCAwKSB7XG4gICAgICBuZXdSYW5nZS5zdGFydCA9IDA7XG4gICAgfVxuICAgIHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLm5vcm1hbGl6ZVJhbmdlKG5ld1JhbmdlKS50aGVuKHJhbmdlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3JhbmdlOiByYW5nZX0pO1xuXG4gICAgICAvLyBJbmZvcm0gYWxsIHRoZSBzb3VyY2VzIG9mIHRoZSByYW5nZSBjaGFuZ2UgKGluY2x1ZGluZyByZWZlcmVuY2VTb3VyY2UpLlxuICAgICAgdGhpcy5wcm9wcy50cmFja3MuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICAgIHRyYWNrLnNvdXJjZS5yYW5nZUNoYW5nZWQocmFuZ2UpO1xuICAgICAgfSk7XG4gICAgfSkuZG9uZSgpO1xuICB9XG5cbiAgdG9nZ2xlU2V0dGluZ3NNZW51KGtleTogc3RyaW5nLCBlOiBTeW50aGV0aWNFdmVudCkge1xuICAgIGlmICh0aGlzLnN0YXRlLnNldHRpbmdzTWVudUtleSA9PSBrZXkpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3NldHRpbmdzTWVudUtleTogbnVsbH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtzZXR0aW5nc01lbnVLZXk6IGtleX0pO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVNlbGVjdE9wdGlvbih0cmFja0tleTogc3RyaW5nLCBvcHRpb25LZXk6IHN0cmluZykge1xuICAgIHRoaXMuc2V0U3RhdGUoe3NldHRpbmdzTWVudUtleTogbnVsbH0pO1xuXG4gICAgdmFyIHZpeiA9IHRoaXMucHJvcHMudHJhY2tzW051bWJlcih0cmFja0tleSldLnZpc3VhbGl6YXRpb247XG4gICAgdmFyIG9sZE9wdHMgPSB2aXoub3B0aW9ucztcbiAgICB2YXIgbmV3T3B0cyA9IHZpei5jb21wb25lbnQuaGFuZGxlU2VsZWN0T3B0aW9uKG9wdGlvbktleSwgb2xkT3B0cyk7XG4gICAgdml6Lm9wdGlvbnMgPSBuZXdPcHRzO1xuICAgIGlmIChuZXdPcHRzICE9IG9sZE9wdHMpIHtcbiAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBtYWtlRGl2Rm9yVHJhY2soa2V5OiBzdHJpbmcsIHRyYWNrOiBWaXN1YWxpemVkVHJhY2spOiBSZWFjdC5FbGVtZW50IHtcbiAgICB2YXIgdHJhY2tFbCA9IChcbiAgICAgICAgPFZpc3VhbGl6YXRpb25XcmFwcGVyIHZpc3VhbGl6YXRpb249e3RyYWNrLnZpc3VhbGl6YXRpb259XG4gICAgICAgICAgICByYW5nZT17dGhpcy5zdGF0ZS5yYW5nZX1cbiAgICAgICAgICAgIG9uUmFuZ2VDaGFuZ2U9e3RoaXMuaGFuZGxlUmFuZ2VDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgICAgIHNvdXJjZT17dHJhY2suc291cmNlfVxuICAgICAgICAgICAgcmVmZXJlbmNlU291cmNlPXt0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZX1cbiAgICAgICAgICAvPik7XG5cbiAgICB2YXIgdHJhY2tOYW1lID0gdHJhY2sudHJhY2submFtZSB8fCAnKHRyYWNrIG5hbWUpJztcblxuICAgIHZhciBnZWFySWNvbiA9IG51bGwsXG4gICAgICAgIHNldHRpbmdzTWVudSA9IG51bGw7XG4gICAgaWYgKHRyYWNrLnZpc3VhbGl6YXRpb24uY29tcG9uZW50LmdldE9wdGlvbnNNZW51KSB7XG4gICAgICBnZWFySWNvbiA9IChcbiAgICAgICAgICA8c3BhbiByZWY9eydnZWFyLScgKyBrZXl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdnZWFyJ1xuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlU2V0dGluZ3NNZW51LmJpbmQodGhpcywga2V5KX0+XG4gICAgICAgICAgICDimplcbiAgICAgICAgICA8L3NwYW4+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXRlLnNldHRpbmdzTWVudUtleSA9PSBrZXkpIHtcbiAgICAgIHZhciBnZWFyID0gdGhpcy5yZWZzWydnZWFyLScgKyBrZXldLFxuICAgICAgICAgIGdlYXJYID0gZ2Vhci5vZmZzZXRMZWZ0LFxuICAgICAgICAgIGdlYXJXID0gZ2Vhci5vZmZzZXRXaWR0aCxcbiAgICAgICAgICBnZWFyWSA9IGdlYXIub2Zmc2V0VG9wO1xuXG4gICAgICB2YXIgbWVudVN0eWxlID0ge1xuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgbGVmdDogKGdlYXJYICsgZ2VhclcpICsgJ3B4JyxcbiAgICAgICAgdG9wOiBnZWFyWSArICdweCdcbiAgICAgIH07XG4gICAgICB2YXIgaXRlbXMgPSB0cmFjay52aXN1YWxpemF0aW9uLmNvbXBvbmVudC5nZXRPcHRpb25zTWVudSh0cmFjay52aXN1YWxpemF0aW9uLm9wdGlvbnMpO1xuICAgICAgc2V0dGluZ3NNZW51ID0gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVudS1jb250YWluZXInIHN0eWxlPXttZW51U3R5bGV9PlxuICAgICAgICAgIDxNZW51IGhlYWRlcj17dHJhY2tOYW1lfSBpdGVtcz17aXRlbXN9IG9uU2VsZWN0PXt0aGlzLmhhbmRsZVNlbGVjdE9wdGlvbi5iaW5kKHRoaXMsIGtleSl9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICB2YXIgY2xhc3NOYW1lID0gWyd0cmFjaycsIHRyYWNrLnZpc3VhbGl6YXRpb24uY29tcG9uZW50LmRpc3BsYXlOYW1lIHx8ICcnLCB0cmFjay50cmFjay5jc3NDbGFzcyB8fCAnJ10uam9pbignICcpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYga2V5PXtrZXl9IGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RyYWNrLWxhYmVsJz5cbiAgICAgICAgICA8c3Bhbj57dHJhY2tOYW1lfTwvc3Bhbj5cbiAgICAgICAgICA8YnIvPlxuICAgICAgICAgIHtnZWFySWNvbn1cbiAgICAgICAgICB7c2V0dGluZ3NNZW51fVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RyYWNrLWNvbnRlbnQnPlxuICAgICAgICAgIHt0cmFja0VsfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICAvLyBUT0RPOiB1c2UgYSBiZXR0ZXIga2V5IHRoYW4gaW5kZXguXG4gICAgdmFyIHRyYWNrRWxzID0gdGhpcy5wcm9wcy50cmFja3MubWFwKCh0LCBpKSA9PiB0aGlzLm1ha2VEaXZGb3JUcmFjaygnJytpLCB0KSk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdwaWxldXAtcm9vdCc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmFjayBjb250cm9scyc+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RyYWNrLWxhYmVsJz5cbiAgICAgICAgICAgICZuYnNwO1xuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmFjay1jb250ZW50Jz5cbiAgICAgICAgICAgIDxDb250cm9scyBjb250aWdMaXN0PXt0aGlzLnN0YXRlLmNvbnRpZ0xpc3R9XG4gICAgICAgICAgICAgICAgICAgICAgcmFuZ2U9e3RoaXMuc3RhdGUucmFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlUmFuZ2VDaGFuZ2UuYmluZCh0aGlzKX0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHt0cmFja0Vsc31cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblJvb3QuZGlzcGxheU5hbWUgPSAnUm9vdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gUm9vdDtcbiIsIi8qKlxuICogQSBzdG9yZSBmb3Igc2VxdWVuY2VzLlxuICpcbiAqIFRoaXMgaXMgdXNlZCB0byBzdG9yZSBhbmQgcmV0cmlldmUgcmVmZXJlbmNlIGRhdGEuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSBJbnRlcnZhbCBmcm9tICcuL0ludGVydmFsJztcbmltcG9ydCB0eXBlIENvbnRpZ0ludGVydmFsIGZyb20gJy4vQ29udGlnSW50ZXJ2YWwnO1xuXG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuaW1wb3J0IHthbHRDb250aWdOYW1lfSBmcm9tICcuL3V0aWxzJztcblxuLy8gU3RvcmUgc2VxdWVuY2VzIG9mIHRoaXMgbWFueSBiYXNlIHBhaXJzIHRvZ2V0aGVyIGluIGEgc2luZ2xlIHN0cmluZy5cbmNvbnN0IENIVU5LX1NJWkUgPSAxMDAwO1xuXG50eXBlIFNlcU1hcCA9IHtba2V5OiBudW1iZXJdOiBzdHJpbmd9O1xudHlwZSBDaHVua1dpdGhPZmZzZXQgPSB7XG4gIGNodW5rU3RhcnQ6IG51bWJlcjtcbiAgb2Zmc2V0OiBudW1iZXI7XG4gIGxlbmd0aDogbnVtYmVyO1xufTtcblxuLy8gVGhpcyBjbGFzcyBzdG9yZXMgc2VxdWVuY2VzIGVmZmljaWVudGx5LlxuY2xhc3MgU2VxdWVuY2VTdG9yZSB7XG4gIC8vIGNvbnRpZyAtLT4gc3RhcnQgb2YgY2h1bmsgLS0+IHNlcXVlbmNlIG9mIGNodW5rXG4gIGNvbnRpZ01hcDoge1trZXk6IHN0cmluZ106IFNlcU1hcH07XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb250aWdNYXAgPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYSByYW5nZSBvZiB0aGUgZ2Vub21lIHRvIHRoZSBwYXJ0aWN1bGFyIHNlcXVlbmNlLlxuICAgKiBUaGlzIG92ZXJ3cml0ZXMgYW55IGV4aXN0aW5nIGRhdGEuXG4gICAqL1xuICBzZXRSYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiwgc2VxdWVuY2U6IHN0cmluZykge1xuICAgIGlmIChyYW5nZS5sZW5ndGgoKSA9PT0gMCkgcmV0dXJuO1xuICAgIGlmIChyYW5nZS5sZW5ndGgoKSAhPSBzZXF1ZW5jZS5sZW5ndGgpIHtcbiAgICAgIHRocm93ICdzZXRSYW5nZSBsZW5ndGggbWlzbWF0Y2gnO1xuICAgIH1cblxuICAgIHZhciBzZXFzID0gdGhpcy5fZ2V0U2VxdWVuY2VzKHJhbmdlLmNvbnRpZyk7XG4gICAgaWYgKCFzZXFzKSB7XG4gICAgICBzZXFzID0gdGhpcy5jb250aWdNYXBbcmFuZ2UuY29udGlnXSA9IHt9O1xuICAgIH1cblxuICAgIGZvciAodmFyIGNodW5rIG9mIHRoaXMuX2NodW5rRm9ySW50ZXJ2YWwocmFuZ2UuaW50ZXJ2YWwpKSB7XG4gICAgICB2YXIgcG9zID0gY2h1bmsuY2h1bmtTdGFydCArIGNodW5rLm9mZnNldCAtIHJhbmdlLnN0YXJ0KCk7XG4gICAgICB0aGlzLl9zZXRDaHVuayhzZXFzLCBjaHVuaywgc2VxdWVuY2Uuc2xpY2UocG9zLCBwb3MgKyBjaHVuay5sZW5ndGgpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgYSByYW5nZSBvZiBzZXF1ZW5jZSBkYXRhLlxuICAgKiBJZiBhbnkgcG9ydGlvbnMgYXJlIHVua25vd24sIHRoZXkgd2lsbCBiZSBzZXQgdG8gJy4nLlxuICAgKi9cbiAgZ2V0QXNTdHJpbmcocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBzdHJpbmcge1xuICAgIGNvbnN0IHNlcXMgPSB0aGlzLl9nZXRTZXF1ZW5jZXMocmFuZ2UuY29udGlnKTtcbiAgICBpZiAoIXNlcXMpIHtcbiAgICAgIHJldHVybiAnLicucmVwZWF0KHJhbmdlLmxlbmd0aCgpKTtcbiAgICB9XG5cbiAgICB2YXIgY2h1bmtzID0gdGhpcy5fY2h1bmtGb3JJbnRlcnZhbChyYW5nZS5pbnRlcnZhbCk7XG4gICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgIGZvciAodmFyIGNodW5rIG9mIGNodW5rcykge1xuICAgICAgdmFyIHNlcSA9IHNlcXNbY2h1bmsuY2h1bmtTdGFydF07XG4gICAgICBpZiAoIXNlcSkge1xuICAgICAgICByZXN1bHQgKz0gJy4nLnJlcGVhdChjaHVuay5sZW5ndGgpO1xuICAgICAgfSBlbHNlIGlmIChjaHVuay5vZmZzZXQgPT09IDAgJiYgY2h1bmsubGVuZ3RoID09IHNlcS5sZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0ICs9IHNlcTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSBzZXEuc2xpY2UoY2h1bmsub2Zmc2V0LCBjaHVuay5vZmZzZXQgKyBjaHVuay5sZW5ndGgpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIExpa2UgZ2V0QXNTdHJpbmcoKSwgYnV0IHJldHVybnMgYSBsZXNzIGVmZmljaWVudCBvYmplY3QgcmVwcmVzZW50YXRpb246XG4gICAqIHsnY2hyMToxMCc6ICdBJywgJ2NocjE6MTEnOiAnQycsIC4uLn1cbiAgICovXG4gIGdldEFzT2JqZWN0cyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IHtba2V5OnN0cmluZ106ID9zdHJpbmd9IHtcbiAgICByZXR1cm4gXy5vYmplY3QoXy5tYXAodGhpcy5nZXRBc1N0cmluZyhyYW5nZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChiYXNlLCBpKSA9PiBbcmFuZ2UuY29udGlnICsgJzonICsgKHJhbmdlLnN0YXJ0KCkgKyBpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlID09ICcuJyA/IG51bGwgOiBiYXNlXSkpO1xuICB9XG5cbiAgLy8gUmV0cmlldmUgYSBjaHVuayBmcm9tIHRoZSBzZXF1ZW5jZSBtYXAuXG4gIF9nZXRDaHVuayhzZXFzOiBTZXFNYXAsIHN0YXJ0OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBzZXFzW3N0YXJ0XSB8fCAnLicucmVwZWF0KENIVU5LX1NJWkUpO1xuICB9XG5cbiAgLy8gU3BsaXQgYW4gaW50ZXJ2YWwgaW50byBjaHVua3Mgd2hpY2ggYWxpZ24gd2l0aCB0aGUgc3RvcmUuXG4gIF9jaHVua0ZvckludGVydmFsKHJhbmdlOiBJbnRlcnZhbCk6IENodW5rV2l0aE9mZnNldFtdIHtcbiAgICB2YXIgb2Zmc2V0ID0gcmFuZ2Uuc3RhcnQgJSBDSFVOS19TSVpFLFxuICAgICAgICBjaHVua1N0YXJ0ID0gcmFuZ2Uuc3RhcnQgLSBvZmZzZXQ7XG4gICAgdmFyIGNodW5rcyA9IFt7XG4gICAgICBjaHVua1N0YXJ0LFxuICAgICAgb2Zmc2V0LFxuICAgICAgbGVuZ3RoOiBNYXRoLm1pbihDSFVOS19TSVpFIC0gb2Zmc2V0LCByYW5nZS5sZW5ndGgoKSlcbiAgICB9XTtcbiAgICBjaHVua1N0YXJ0ICs9IENIVU5LX1NJWkU7XG4gICAgZm9yICg7IGNodW5rU3RhcnQgPD0gcmFuZ2Uuc3RvcDsgY2h1bmtTdGFydCArPSBDSFVOS19TSVpFKSB7XG4gICAgICBjaHVua3MucHVzaCh7XG4gICAgICAgIGNodW5rU3RhcnQsXG4gICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgbGVuZ3RoOiBNYXRoLm1pbihDSFVOS19TSVpFLCByYW5nZS5zdG9wIC0gY2h1bmtTdGFydCArIDEpXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGNodW5rcztcbiAgfVxuXG4gIC8vIFNldCBhIChzdWJzZXQgb2YgYSkgY2h1bmsgdG8gdGhlIGdpdmVuIHNlcXVlbmNlLlxuICBfc2V0Q2h1bmsoc2VxczogU2VxTWFwLCBjaHVuazogQ2h1bmtXaXRoT2Zmc2V0LCBzZXF1ZW5jZTogc3RyaW5nKSB7XG4gICAgLy8gRmlyc3Q6IHRoZSBlYXN5IGNhc2UuIFRvdGFsIHJlcGxhY2VtZW50LlxuICAgIGlmIChjaHVuay5vZmZzZXQgPT09IDAgJiYgc2VxdWVuY2UubGVuZ3RoID09IENIVU5LX1NJWkUpIHtcbiAgICAgIHNlcXNbY2h1bmsuY2h1bmtTdGFydF0gPSBzZXF1ZW5jZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBXZSBuZWVkIHRvIG1lcmdlIHRoZSBuZXcgc2VxdWVuY2Ugd2l0aCB0aGUgb2xkLlxuICAgIHZhciBvbGRDaHVuayA9IHRoaXMuX2dldENodW5rKHNlcXMsIGNodW5rLmNodW5rU3RhcnQpO1xuICAgIHNlcXNbY2h1bmsuY2h1bmtTdGFydF0gPSBvbGRDaHVuay5zbGljZSgwLCBjaHVuay5vZmZzZXQpICtcbiAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2UgK1xuICAgICAgICAgICAgICAgICAgICAgICBvbGRDaHVuay5zbGljZShjaHVuay5vZmZzZXQgKyBzZXF1ZW5jZS5sZW5ndGgpO1xuICB9XG5cbiAgLy8gR2V0IHRoZSBzZXF1ZW5jZXMgZm9yIGEgY29udGlnLCBhbGxvd2luZyBjaHItIG1pc21hdGNoZXMuXG4gIF9nZXRTZXF1ZW5jZXMoY29udGlnOiBzdHJpbmcpOiA/U2VxTWFwIHtcbiAgICByZXR1cm4gdGhpcy5jb250aWdNYXBbY29udGlnXSB8fFxuICAgICAgICAgICB0aGlzLmNvbnRpZ01hcFthbHRDb250aWdOYW1lKGNvbnRpZyldIHx8XG4gICAgICAgICAgIG51bGw7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTZXF1ZW5jZVN0b3JlO1xuIiwiLyoqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cblxuaW1wb3J0IHR5cGUge1R3b0JpdFNvdXJjZX0gZnJvbSAnLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge1ZpeldpdGhPcHRpb25zfSBmcm9tICcuL3R5cGVzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi92aXovZDN1dGlscyc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBkMyBmcm9tICcuLi9saWIvbWluaWQzJztcblxuZXhwb3J0IHR5cGUgVml6UHJvcHMgPSB7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xuICByYW5nZTogR2Vub21lUmFuZ2U7XG4gIHJlZmVyZW5jZVNvdXJjZTogVHdvQml0U291cmNlO1xuICBvcHRpb25zOiBhbnk7XG59O1xuXG50eXBlIFByb3BzID0ge1xuICByYW5nZTogP0dlbm9tZVJhbmdlO1xuICB2aXN1YWxpemF0aW9uOiBWaXpXaXRoT3B0aW9ucztcbiAgb25SYW5nZUNoYW5nZTogKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkgPT4gdm9pZDtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG4gIHNvdXJjZTogYW55O1xufTtcblxuY2xhc3MgVmlzdWFsaXphdGlvbldyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBwcm9wczogUHJvcHM7XG4gIHN0YXRlOiB7d2lkdGg6IG51bWJlcjsgaGVpZ2h0OiBudW1iZXJ9O1xuICBoYXNEcmFnQmVlbkluaXRpYWxpemVkOiBib29sZWFuO1xuICBvblJlc2l6ZUxpc3RlbmVyOiBPYmplY3Q7ICAvL2xpc3RlbmVyIHRoYXQgaGFuZGxlcyB3aW5kb3cub25yZXNpemUgZXZlbnRcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuaGFzRHJhZ0JlZW5Jbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB3aWR0aDogMCxcbiAgICAgIGhlaWdodDogMFxuICAgIH07XG4gIH1cblxuICB1cGRhdGVTaXplKCk6IGFueSB7XG4gICAgdmFyIHBhcmVudERpdiA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLnBhcmVudE5vZGU7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB3aWR0aDogcGFyZW50RGl2Lm9mZnNldFdpZHRoLFxuICAgICAgaGVpZ2h0OiBwYXJlbnREaXYub2Zmc2V0SGVpZ2h0XG4gICAgfSk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpOiBhbnkge1xuICAgIC8vbG9jYWwgY29weSBvZiB0aGUgbGlzdGVuZXIsIHNvIHdlIGNhbiByZW1vdmUgaXRcbiAgICAvL3doZW4gcGlsZXVwIGlzIGRlc3Ryb3llZFxuICAgIHRoaXMub25SZXNpemVMaXN0ZW5lciA9ICgpID0+IHRoaXMudXBkYXRlU2l6ZSgpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uUmVzaXplTGlzdGVuZXIpO1xuICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMucmFuZ2UgJiYgIXRoaXMuaGFzRHJhZ0JlZW5Jbml0aWFsaXplZCkgdGhpcy5hZGREcmFnSW50ZXJmYWNlKCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUoKTogYW55IHtcbiAgICBpZiAodGhpcy5wcm9wcy5yYW5nZSAmJiAhdGhpcy5oYXNEcmFnQmVlbkluaXRpYWxpemVkKSB0aGlzLmFkZERyYWdJbnRlcmZhY2UoKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCk6IGFueSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25SZXNpemVMaXN0ZW5lcik7XG4gIH1cblxuICBnZXRTY2FsZSgpOiAobnVtOiBudW1iZXIpPT5udW1iZXIge1xuICAgIGlmICghdGhpcy5wcm9wcy5yYW5nZSkgcmV0dXJuIHggPT4geDtcbiAgICByZXR1cm4gZDN1dGlscy5nZXRUcmFja1NjYWxlKHRoaXMucHJvcHMucmFuZ2UsIHRoaXMuc3RhdGUud2lkdGgpO1xuICB9XG5cbiAgYWRkRHJhZ0ludGVyZmFjZSgpOiBhbnkge1xuICAgIHRoaXMuaGFzRHJhZ0JlZW5Jbml0aWFsaXplZCA9IHRydWU7XG4gICAgdmFyIGRpdiA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpO1xuICAgIHZhciBvcmlnaW5hbFJhbmdlLCBvcmlnaW5hbFNjYWxlLCBkeD0wO1xuICAgIHZhciBkcmFnc3RhcnRlZCA9ICgpID0+IHtcbiAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZHggPSAwO1xuICAgICAgb3JpZ2luYWxSYW5nZSA9IF8uY2xvbmUodGhpcy5wcm9wcy5yYW5nZSk7XG4gICAgICBvcmlnaW5hbFNjYWxlID0gdGhpcy5nZXRTY2FsZSgpO1xuICAgIH07XG4gICAgdmFyIHVwZGF0ZVJhbmdlID0gKCkgPT4ge1xuICAgICAgaWYgKCFvcmlnaW5hbFNjYWxlKSByZXR1cm47ICAvLyBjYW4gbmV2ZXIgaGFwcGVuLCBidXQgRmxvdyBkb24ndCBrbm93LlxuICAgICAgaWYgKCFvcmlnaW5hbFJhbmdlKSByZXR1cm47ICAvLyBjYW4gbmV2ZXIgaGFwcGVuLCBidXQgRmxvdyBkb24ndCBrbm93LlxuICAgICAgdmFyIG5ld1N0YXJ0ID0gb3JpZ2luYWxTY2FsZS5pbnZlcnQoLWR4KSxcbiAgICAgICAgICBpbnRTdGFydCA9IE1hdGgucm91bmQobmV3U3RhcnQpLFxuICAgICAgICAgIG9mZnNldFB4ID0gb3JpZ2luYWxTY2FsZShuZXdTdGFydCkgLSBvcmlnaW5hbFNjYWxlKGludFN0YXJ0KTtcblxuICAgICAgdmFyIG5ld1JhbmdlID0ge1xuICAgICAgICBjb250aWc6IG9yaWdpbmFsUmFuZ2UuY29udGlnLFxuICAgICAgICBzdGFydDogaW50U3RhcnQsXG4gICAgICAgIHN0b3A6IGludFN0YXJ0ICsgKG9yaWdpbmFsUmFuZ2Uuc3RvcCAtIG9yaWdpbmFsUmFuZ2Uuc3RhcnQpLFxuICAgICAgICBvZmZzZXRQeDogb2Zmc2V0UHhcbiAgICAgIH07XG4gICAgICB0aGlzLnByb3BzLm9uUmFuZ2VDaGFuZ2UobmV3UmFuZ2UpO1xuICAgIH07XG4gICAgdmFyIGRyYWdtb3ZlID0gKCkgPT4ge1xuICAgICAgZHggKz0gZDMuZXZlbnQuZHg7ICAvLyB0aGVzZSBhcmUgaW50ZWdlcnMsIHNvIG5vIHJvdW5kb2ZmIGlzc3Vlcy5cbiAgICAgIHVwZGF0ZVJhbmdlKCk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBkcmFnZW5kZWQoKSB7XG4gICAgICB1cGRhdGVSYW5nZSgpO1xuICAgIH1cblxuICAgIHZhciBkcmFnID0gZDMuYmVoYXZpb3IuZHJhZygpXG4gICAgICAgIC5vbignZHJhZ3N0YXJ0JywgZHJhZ3N0YXJ0ZWQpXG4gICAgICAgIC5vbignZHJhZycsIGRyYWdtb3ZlKVxuICAgICAgICAub24oJ2RyYWdlbmQnLCBkcmFnZW5kZWQpO1xuXG4gICAgZDMuc2VsZWN0KGRpdikuY2FsbChkcmFnKS5vbignY2xpY2snLCB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcykpO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2soKTogYW55IHtcbiAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlO1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMucHJvcHMudmlzdWFsaXphdGlvbi5jb21wb25lbnQ7XG4gICAgaWYgKCFyYW5nZSkge1xuICAgICAgcmV0dXJuIDxFbXB0eVRyYWNrIGNsYXNzTmFtZT17Y29tcG9uZW50LmRpc3BsYXlOYW1lfSAvPjtcbiAgICB9XG5cbiAgICB2YXIgZWwgPSBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudCwgKHtcbiAgICAgIHJhbmdlOiByYW5nZSxcbiAgICAgIHNvdXJjZTogdGhpcy5wcm9wcy5zb3VyY2UsXG4gICAgICByZWZlcmVuY2VTb3VyY2U6IHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLFxuICAgICAgd2lkdGg6IHRoaXMuc3RhdGUud2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMuc3RhdGUuaGVpZ2h0LFxuICAgICAgb3B0aW9uczogdGhpcy5wcm9wcy52aXN1YWxpemF0aW9uLm9wdGlvbnNcbiAgICB9IDogVml6UHJvcHMpKTtcblxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT0nZHJhZy13cmFwcGVyJz57ZWx9PC9kaXY+O1xuICB9XG59XG5WaXN1YWxpemF0aW9uV3JhcHBlci5kaXNwbGF5TmFtZSA9ICdWaXN1YWxpemF0aW9uV3JhcHBlcic7XG5cblxudHlwZSBFbXB0eVRyYWNrUHJvcHMgPSB7Y2xhc3NOYW1lOiBzdHJpbmd9O1xuY2xhc3MgRW1wdHlUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDx2b2lkLCBFbXB0eVRyYWNrUHJvcHMsIHZvaWQ+IHtcbiAgcmVuZGVyKCkge1xuICAgIHZhciBjbGFzc05hbWUgPSB0aGlzLnByb3BzLmNsYXNzTmFtZSArICcgZW1wdHknO1xuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lfT48L2Rpdj47XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBWaXN1YWxpemF0aW9uV3JhcHBlcjtcbiIsIi8qKlxuICogUGFyc2VyIGZvciBiaWdCZWQgZm9ybWF0LlxuICogQmFzZWQgb24gVUNTQydzIHNyYy9pbmMvYmJpRmlsZS5oXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBRIGZyb20gJ3EnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcbmltcG9ydCBwYWtvIGZyb20gJ3Bha28vbGliL2luZmxhdGUnOyAgLy8gZm9yIGd6aXAgaW5mbGF0aW9uXG5cbmltcG9ydCBSZW1vdGVGaWxlIGZyb20gJy4uL1JlbW90ZUZpbGUnO1xuaW1wb3J0IEludGVydmFsIGZyb20gJy4uL0ludGVydmFsJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IGJiaSBmcm9tICcuL2Zvcm1hdHMvYmJpJztcblxuXG5mdW5jdGlvbiBwYXJzZUhlYWRlcihidWZmZXIpIHtcbiAgLy8gVE9ETzogY2hlY2sgRW5kaWFubmVzcyB1c2luZyBtYWdpYy4gUG9zc2libHkgdXNlIGpEYXRhVmlldy5saXR0bGVFbmRpYW5cbiAgLy8gdG8gZmxpcCB0aGUgZW5kaWFubmVzcyBmb3IgakJpbmFyeSBjb25zdW1wdGlvbi5cbiAgLy8gTkI6IGRhbGxpYW5jZSBkb2Vzbid0IHN1cHBvcnQgYmlnIGVuZGlhbiBmb3JtYXRzLlxuICByZXR1cm4gbmV3IGpCaW5hcnkoYnVmZmVyLCBiYmkuVFlQRV9TRVQpLnJlYWQoJ0hlYWRlcicpO1xufVxuXG4vLyBUaGUgXCJDSVJcIiB0cmVlIGNvbnRhaW5zIGEgbWFwcGluZyBmcm9tIHNlcXVlbmNlIC0+IGJsb2NrIG9mZnNldHMuXG4vLyBJdCBzdGFuZHMgZm9yIFwiQ2hyb21vc29tZSBJbmRleCBSIHRyZWVcIlxuZnVuY3Rpb24gcGFyc2VDaXJUcmVlKGJ1ZmZlcikge1xuICByZXR1cm4gbmV3IGpCaW5hcnkoYnVmZmVyLCBiYmkuVFlQRV9TRVQpLnJlYWQoJ0NpclRyZWUnKTtcbn1cblxuLy8gRXh0cmFjdCBhIG1hcCBmcm9tIGNvbnRpZyBuYW1lIC0tPiBjb250aWcgSUQgZnJvbSB0aGUgYmlnQmVkIGhlYWRlci5cbmZ1bmN0aW9uIGdlbmVyYXRlQ29udGlnTWFwKGhlYWRlcik6IHtba2V5OnN0cmluZ106IG51bWJlcn0ge1xuICAvLyBKdXN0IGFzc3VtZSBpdCdzIGEgZmxhdCBcInRyZWVcIiBmb3Igbm93LlxuICB2YXIgbm9kZXMgPSBoZWFkZXIuY2hyb21vc29tZVRyZWUubm9kZXMuY29udGVudHM7XG4gIGlmICghbm9kZXMpIHtcbiAgICB0aHJvdyAnSW52YWxpZCBjaHJvbW9zb21lIHRyZWUnO1xuICB9XG4gIHJldHVybiBfLm9iamVjdChub2Rlcy5tYXAoZnVuY3Rpb24oe2lkLCBrZXl9KSB7XG4gICAgLy8gcmVtb3ZlIHRyYWlsaW5nIG51bGxzIGZyb20gdGhlIGtleSBzdHJpbmdcbiAgICByZXR1cm4gW2tleS5yZXBsYWNlKC9cXDAuKi8sICcnKSwgaWRdO1xuICB9KSk7XG59XG5cbi8vIEdlbmVyYXRlIHRoZSByZXZlcnNlIG1hcCBmcm9tIGNvbnRpZyBJRCAtLT4gY29udGlnIG5hbWUuXG5mdW5jdGlvbiByZXZlcnNlQ29udGlnTWFwKGNvbnRpZ01hcDoge1trZXk6c3RyaW5nXTogbnVtYmVyfSk6IEFycmF5PHN0cmluZz4ge1xuICB2YXIgYXJ5ID0gW107XG4gIF8uZWFjaChjb250aWdNYXAsIChpbmRleCwgbmFtZSkgPT4ge1xuICAgIGFyeVtpbmRleF0gPSBuYW1lO1xuICB9KTtcbiAgcmV0dXJuIGFyeTtcbn1cblxuXG5mdW5jdGlvbiBleHRyYWN0RmVhdHVyZXNGcm9tQmxvY2soYnVmZmVyOiBBcnJheUJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhUmFuZ2U6IEludGVydmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrOiBMZWFmRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0NvbXByZXNzZWQ6IGJvb2xlYW4pOiBDaHJJZEJlZFJvd1tdIHtcbiAgdmFyIGJsb2NrT2Zmc2V0ID0gYmxvY2sub2Zmc2V0IC0gZGF0YVJhbmdlLnN0YXJ0LFxuICAgICAgYmxvY2tMaW1pdCA9IGJsb2NrT2Zmc2V0ICsgYmxvY2suc2l6ZSxcblxuICAgICAgYmxvY2tCdWZmZXIgPVxuICAgICAgICAvLyBOT1RFOiBcIisgMlwiIHNraXBzIG92ZXIgdHdvIGJ5dGVzIG9mIGd6aXAgaGVhZGVyICgweDhiMWYpLCB3aGljaCBwYWtvLmluZmxhdGVSYXcgd2lsbCBub3QgaGFuZGxlLlxuICAgICAgICBidWZmZXIuc2xpY2UoXG4gICAgICAgICAgYmxvY2tPZmZzZXQgKyAoaXNDb21wcmVzc2VkID8gMiA6IDApLFxuICAgICAgICAgIGJsb2NrTGltaXRcbiAgICAgICAgKTtcblxuICB2YXIgaW5mbGF0ZWRCdWZmZXIgPVxuICAgIGlzQ29tcHJlc3NlZCA/XG4gICAgICBwYWtvLmluZmxhdGVSYXcobmV3IFVpbnQ4QXJyYXkoYmxvY2tCdWZmZXIpKSA6XG4gICAgICBibG9ja0J1ZmZlcjtcblxuICB2YXIgamIgPSBuZXcgakJpbmFyeShpbmZsYXRlZEJ1ZmZlciwgYmJpLlRZUEVfU0VUKTtcbiAgLy8gVE9ETzogcGFyc2Ugb25seSBvbmUgQmVkRW50cnkgYXQgYSB0aW1lICYgdXNlIGFuIGl0ZXJhdG9yLlxuICByZXR1cm4gamIucmVhZCgnQmVkQmxvY2snKTtcbn1cblxuXG50eXBlIEJlZFJvdyA9IHtcbiAgLy8gSGFsZi1vcGVuIGludGVydmFsIGZvciB0aGUgQkVEIHJvdy5cbiAgY29udGlnOiBzdHJpbmc7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjtcbiAgLy8gUmVtYWluaW5nIGZpZWxkcyBpbiB0aGUgQkVEIHJvdyAodHlwaWNhbGx5IHRhYi1kZWxpbWl0ZWQpXG4gIHJlc3Q6IHN0cmluZztcbn1cblxudHlwZSBDaHJJZEJlZFJvdyA9IHtcbiAgY2hySWQ6IG51bWJlcjtcbiAgc3RhcnQ6IG51bWJlcjtcbiAgc3RvcDogbnVtYmVyOyAgLy8gbm90ZTogbm90IGluY2x1c2l2ZVxuICByZXN0OiBzdHJpbmc7XG59XG5cbi8vIEFsbCBmZWF0dXJlcyBmb3VuZCBpbiByYW5nZS5cbnR5cGUgQmVkQmxvY2sgPSB7XG4gIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+O1xuICByb3dzOiBCZWRSb3dbXTtcbn1cblxudHlwZSBDaHJJZEJlZEJsb2NrID0ge1xuICByYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPjtcbiAgcm93czogQ2hySWRCZWRSb3dbXTtcbn1cblxuLy8gQSBjb3B5IG9mIExlYWZEYXRhIGZyb20gYmJpLmpzLlxudHlwZSBMZWFmRGF0YSA9IHtcbiAgc3RhcnRDaHJvbUl4OiBudW1iZXI7XG4gIHN0YXJ0QmFzZTogbnVtYmVyO1xuICBlbmRDaHJvbUl4OiBudW1iZXI7XG4gIGVuZEJhc2U6IG51bWJlcjtcbiAgb2Zmc2V0OiBudW1iZXI7XG4gIHNpemU6IG51bWJlcjtcbn1cblxuLy8gVGhpcyAoaW50ZXJuYWwpIHZlcnNpb24gb2YgdGhlIEJpZ0JlZCBjbGFzcyBoYXMgbm8gcHJvbWlzZXMgZm9yIGhlYWRlcnMsXG4vLyBvbmx5IGltbWVkaWF0ZSBkYXRhLiBUaGlzIGdyZWF0bHkgc2ltcGxpZmllcyB3cml0aW5nIG1ldGhvZHMgb24gaXQuXG5jbGFzcyBJbW1lZGlhdGVCaWdCZWQge1xuICByZW1vdGVGaWxlOiBSZW1vdGVGaWxlO1xuICBoZWFkZXI6IE9iamVjdDtcbiAgY2lyVHJlZTogT2JqZWN0O1xuICBjb250aWdNYXA6IHtba2V5OnN0cmluZ106IG51bWJlcn07XG4gIGNocklkVG9Db250aWc6IHN0cmluZ1tdO1xuXG4gIGNvbnN0cnVjdG9yKHJlbW90ZUZpbGUsIGhlYWRlciwgY2lyVHJlZSwgY29udGlnTWFwOiB7W2tleTpzdHJpbmddOiBudW1iZXJ9KSB7XG4gICAgdGhpcy5yZW1vdGVGaWxlID0gcmVtb3RlRmlsZTtcbiAgICB0aGlzLmhlYWRlciA9IGhlYWRlcjtcbiAgICB0aGlzLmNpclRyZWUgPSBjaXJUcmVlO1xuICAgIHRoaXMuY29udGlnTWFwID0gY29udGlnTWFwO1xuICAgIHRoaXMuY2hySWRUb0NvbnRpZyA9IHJldmVyc2VDb250aWdNYXAoY29udGlnTWFwKTtcbiAgfVxuXG4gIC8vIE1hcCBjb250aWcgbmFtZSB0byBjb250aWcgSUQuIExlYWRpbmcgXCJjaHJcIiBpcyBvcHRpb25hbC4gVGhyb3dzIG9uIGZhaWx1cmUuXG4gIGdldENvbnRpZ0lkKGNvbnRpZzogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBpZiAoY29udGlnIGluIHRoaXMuY29udGlnTWFwKSByZXR1cm4gdGhpcy5jb250aWdNYXBbY29udGlnXTtcbiAgICB2YXIgY2hyID0gJ2NocicgKyBjb250aWc7XG4gICAgaWYgKGNociBpbiB0aGlzLmNvbnRpZ01hcCkgcmV0dXJuIHRoaXMuY29udGlnTWFwW2Nocl07XG4gICAgdGhyb3cgYEludmFsaWQgY29udGlnICR7Y29udGlnfWA7XG4gIH1cblxuICBnZXRDaHJJZEludGVydmFsKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPiB7XG4gICAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbChcbiAgICAgICAgdGhpcy5nZXRDb250aWdJZChyYW5nZS5jb250aWcpLCByYW5nZS5zdGFydCgpLCByYW5nZS5zdG9wKCkpO1xuICB9XG5cbiAgZ2V0Q29udGlnSW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IENvbnRpZ0ludGVydmFsKFxuICAgICAgICB0aGlzLmNocklkVG9Db250aWdbcmFuZ2UuY29udGlnXSwgcmFuZ2Uuc3RhcnQoKSwgcmFuZ2Uuc3RvcCgpKTtcbiAgfVxuXG4gIC8vIEJlZCBlbnRyaWVzIGhhdmUgYSBjaHJvbW9zb21lIElELiBUaGlzIGNvbnZlcnRzIHRoYXQgdG8gYSBjb250aWcgc3RyaW5nLlxuICBhdHRhY2hDb250aWdUb0JlZFJvd3MoYmVkczogQ2hySWRCZWRSb3dbXSk6IEJlZFJvd1tdIHtcbiAgICByZXR1cm4gYmVkcy5tYXAoYmVkID0+ICh7XG4gICAgICBjb250aWc6IHRoaXMuY2hySWRUb0NvbnRpZ1tiZWQuY2hySWRdLFxuICAgICAgc3RhcnQ6IGJlZC5zdGFydCxcbiAgICAgIHN0b3A6IGJlZC5zdG9wLFxuICAgICAgcmVzdDogYmVkLnJlc3RcbiAgICB9KSk7XG4gIH1cblxuICAvLyBGaW5kIGFsbCBibG9ja3MgY29udGFpbmluZyBmZWF0dXJlcyB3aGljaCBpbnRlcnNlY3Qgd2l0aCBjb250aWdSYW5nZS5cbiAgZmluZE92ZXJsYXBwaW5nQmxvY2tzKHJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+KTogQXJyYXk8TGVhZkRhdGE+IHtcbiAgICAvLyBEbyBhIHJlY3Vyc2l2ZSBzZWFyY2ggdGhyb3VnaCB0aGUgaW5kZXggdHJlZVxuICAgIHZhciBtYXRjaGluZ0Jsb2NrcyA9IFtdO1xuICAgIHZhciB0dXBsZVJhbmdlID0gW1tyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0KCldLFxuICAgICAgICAgICAgICAgICAgICAgIFtyYW5nZS5jb250aWcsIHJhbmdlLnN0b3AoKV1dO1xuICAgIHZhciBmaW5kID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgaWYgKG5vZGUuY29udGVudHMpIHtcbiAgICAgICAgbm9kZS5jb250ZW50cy5mb3JFYWNoKGZpbmQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG5vZGVSYW5nZSA9XG4gICAgICAgICAgW1xuICAgICAgICAgICAgW25vZGUuc3RhcnRDaHJvbUl4LCBub2RlLnN0YXJ0QmFzZV0sXG4gICAgICAgICAgICBbbm9kZS5lbmRDaHJvbUl4LCBub2RlLmVuZEJhc2VdXG4gICAgICAgICAgXTtcblxuICAgICAgICBpZiAodXRpbHMudHVwbGVSYW5nZU92ZXJsYXBzKG5vZGVSYW5nZSwgdHVwbGVSYW5nZSkpIHtcbiAgICAgICAgICBtYXRjaGluZ0Jsb2Nrcy5wdXNoKG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBmaW5kKHRoaXMuY2lyVHJlZS5ibG9ja3MpO1xuXG4gICAgcmV0dXJuIG1hdGNoaW5nQmxvY2tzO1xuICB9XG5cbiAgLy8gSW50ZXJuYWwgZnVuY3Rpb24gZm9yIGZldGNoaW5nIGZlYXR1cmVzIGJ5IGJsb2NrLlxuICBmZXRjaEZlYXR1cmVzQnlCbG9jayhyYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPik6IFEuUHJvbWlzZTxDaHJJZEJlZEJsb2NrW10+IHtcbiAgICB2YXIgYmxvY2tzID0gdGhpcy5maW5kT3ZlcmxhcHBpbmdCbG9ja3MocmFuZ2UpO1xuICAgIGlmIChibG9ja3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gUS53aGVuKFtdKTtcbiAgICB9XG5cbiAgICAvLyBGaW5kIHRoZSByYW5nZSBpbiB0aGUgZmlsZSB3aGljaCBjb250YWlucyBhbGwgcmVsZXZhbnQgYmxvY2tzLlxuICAgIC8vIEluIHRoZW9yeSB0aGVyZSBjb3VsZCBiZSBnYXBzIGJldHdlZW4gYmxvY2tzLCBidXQgaXQncyBoYXJkIHRvIHNlZSBob3cuXG4gICAgdmFyIGJ5dGVSYW5nZSA9IEludGVydmFsLmJvdW5kaW5nSW50ZXJ2YWwoXG4gICAgICAgIGJsb2Nrcy5tYXAobiA9PiBuZXcgSW50ZXJ2YWwoK24ub2Zmc2V0LCBuLm9mZnNldCtuLnNpemUpKSk7XG5cbiAgICB2YXIgaXNDb21wcmVzc2VkID0gKHRoaXMuaGVhZGVyLnVuY29tcHJlc3NCdWZTaXplID4gMCk7XG4gICAgcmV0dXJuIHRoaXMucmVtb3RlRmlsZS5nZXRCeXRlcyhieXRlUmFuZ2Uuc3RhcnQsIGJ5dGVSYW5nZS5sZW5ndGgoKSlcbiAgICAgICAgLnRoZW4oYnVmZmVyID0+IHtcbiAgICAgICAgICByZXR1cm4gYmxvY2tzLm1hcChibG9jayA9PiB7XG4gICAgICAgICAgICB2YXIgYmVkcyA9IGV4dHJhY3RGZWF0dXJlc0Zyb21CbG9jayhidWZmZXIsIGJ5dGVSYW5nZSwgYmxvY2ssIGlzQ29tcHJlc3NlZCk7XG4gICAgICAgICAgICBpZiAoYmxvY2suc3RhcnRDaHJvbUl4ICE9IGJsb2NrLmVuZENocm9tSXgpIHtcbiAgICAgICAgICAgICAgdGhyb3cgYENhbid0IGhhbmRsZSBibG9ja3Mgd2hpY2ggc3BhbiBjaHJvbW9zb21lcyFgO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICByYW5nZTogbmV3IENvbnRpZ0ludGVydmFsKGJsb2NrLnN0YXJ0Q2hyb21JeCwgYmxvY2suc3RhcnRCYXNlLCBibG9jay5lbmRCYXNlKSxcbiAgICAgICAgICAgICAgcm93czogYmVkc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gIH1cblxuICAvLyBUT0RPOiBtZXJnZSB0aGlzIGludG8gZ2V0RmVhdHVyZXNJblJhbmdlXG4gIC8vIEZldGNoIHRoZSByZWxldmFudCBibG9ja3MgZnJvbSB0aGUgYmlnQmVkIGZpbGUgYW5kIGV4dHJhY3QgdGhlIGZlYXR1cmVzXG4gIC8vIHdoaWNoIG92ZXJsYXAgdGhlIGdpdmVuIHJhbmdlLlxuICBmZXRjaEZlYXR1cmVzKGNvbnRpZ1JhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+KTogUS5Qcm9taXNlPEJlZFJvd1tdPiB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hGZWF0dXJlc0J5QmxvY2soY29udGlnUmFuZ2UpXG4gICAgICAgIC50aGVuKGJlZHNCeUJsb2NrID0+IHtcbiAgICAgICAgICB2YXIgYmVkcyA9IF8uZmxhdHRlbihiZWRzQnlCbG9jay5tYXAoYiA9PiBiLnJvd3MpKTtcblxuICAgICAgICAgIGJlZHMgPSBiZWRzLmZpbHRlcihmdW5jdGlvbihiZWQpIHtcbiAgICAgICAgICAgIC8vIE5vdGU6IEJFRCBpbnRlcnZhbHMgYXJlIGV4cGxpY2l0bHkgaGFsZi1vcGVuLlxuICAgICAgICAgICAgLy8gVGhlIFwiLSAxXCIgY29udmVydHMgdGhlbSB0byBjbG9zZWQgaW50ZXJ2YWxzIGZvciBDb250aWdJbnRlcnZhbC5cbiAgICAgICAgICAgIHZhciBiZWRJbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChiZWQuY2hySWQsIGJlZC5zdGFydCwgYmVkLnN0b3AgLSAxKTtcbiAgICAgICAgICAgIHJldHVybiBjb250aWdSYW5nZS5pbnRlcnNlY3RzKGJlZEludGVydmFsKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiB0aGlzLmF0dGFjaENvbnRpZ1RvQmVkUm93cyhiZWRzKTtcbiAgICAgICAgfSk7XG4gIH1cblxuICBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBRLlByb21pc2U8QmVkUm93W10+IHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaEZlYXR1cmVzKHRoaXMuZ2V0Q2hySWRJbnRlcnZhbChyYW5nZSkpO1xuICB9XG5cbiAgZ2V0RmVhdHVyZUJsb2Nrc092ZXJsYXBwaW5nKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogUS5Qcm9taXNlPEJlZEJsb2NrW10+IHtcbiAgICB2YXIgaW5kZXhSYW5nZSA9IHRoaXMuZ2V0Q2hySWRJbnRlcnZhbChyYW5nZSk7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hGZWF0dXJlc0J5QmxvY2soaW5kZXhSYW5nZSlcbiAgICAgICAgLnRoZW4oZmVhdHVyZUJsb2NrcyA9PiB7XG4gICAgICAgICAgLy8gQ29udmVydCBjaHJJZHMgdG8gY29udGlnIHN0cmluZ3MuXG4gICAgICAgICAgcmV0dXJuIGZlYXR1cmVCbG9ja3MubWFwKGZiID0+ICh7XG4gICAgICAgICAgICByYW5nZTogdGhpcy5nZXRDb250aWdJbnRlcnZhbChmYi5yYW5nZSksXG4gICAgICAgICAgICByb3dzOiB0aGlzLmF0dGFjaENvbnRpZ1RvQmVkUm93cyhmYi5yb3dzKVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gIH1cblxufVxuXG5cbmNsYXNzIEJpZ0JlZCB7XG4gIHJlbW90ZUZpbGU6IFJlbW90ZUZpbGU7XG4gIGhlYWRlcjogUS5Qcm9taXNlPGFueT47XG4gIGNpclRyZWU6IFEuUHJvbWlzZTxhbnk+O1xuICBjb250aWdNYXA6IFEuUHJvbWlzZTx7W2tleTpzdHJpbmddOiBudW1iZXJ9PjtcbiAgaW1tZWRpYXRlOiBRLlByb21pc2U8SW1tZWRpYXRlQmlnQmVkPjtcblxuICAvKipcbiAgICogUHJlcGFyZSB0byByZXF1ZXN0IGZlYXR1cmVzIGZyb20gYSByZW1vdGUgYmlnQmVkIGZpbGUuXG4gICAqIFRoZSByZW1vdGUgc291cmNlIG11c3Qgc3VwcG9ydCBIVFRQIFJhbmdlIGhlYWRlcnMuXG4gICAqIFRoaXMgd2lsbCBraWNrIG9mZiBzZXZlcmFsIGFzeW5jIHJlcXVlc3RzIGZvciBwb3J0aW9ucyBvZiB0aGUgZmlsZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHVybDogc3RyaW5nKSB7XG4gICAgdGhpcy5yZW1vdGVGaWxlID0gbmV3IFJlbW90ZUZpbGUodXJsKTtcbiAgICB0aGlzLmhlYWRlciA9IHRoaXMucmVtb3RlRmlsZS5nZXRCeXRlcygwLCA2NCoxMDI0KS50aGVuKHBhcnNlSGVhZGVyKTtcbiAgICB0aGlzLmNvbnRpZ01hcCA9IHRoaXMuaGVhZGVyLnRoZW4oZ2VuZXJhdGVDb250aWdNYXApO1xuXG4gICAgLy8gTmV4dDogZmV0Y2ggdGhlIGJsb2NrIGluZGV4IGFuZCBwYXJzZSBvdXQgdGhlIFwiQ0lSXCIgdHJlZS5cbiAgICB0aGlzLmNpclRyZWUgPSB0aGlzLmhlYWRlci50aGVuKGhlYWRlciA9PiB7XG4gICAgICAvLyB6b29tSGVhZGVyc1swXS5kYXRhT2Zmc2V0IGlzIHRoZSBuZXh0IGVudHJ5IGluIHRoZSBmaWxlLlxuICAgICAgLy8gV2UgYXNzdW1lIHRoZSBcImNpclRyZWVcIiBzZWN0aW9uIGdvZXMgYWxsIHRoZSB3YXkgdG8gdGhhdCBwb2ludC5cbiAgICAgIC8vIExhY2tpbmcgem9vbSBoZWFkZXJzLCBhc3N1bWUgaXQncyA0ay5cbiAgICAgIC8vIFRPRE86IGZldGNoIG1vcmUgdGhhbiA0ayBpZiBuZWNlc3NhcnlcbiAgICAgIHZhciBzdGFydCA9IGhlYWRlci51bnpvb21lZEluZGV4T2Zmc2V0LFxuICAgICAgICAgIHpvb21IZWFkZXIgPSBoZWFkZXIuem9vbUhlYWRlcnNbMF0sXG4gICAgICAgICAgbGVuZ3RoID0gem9vbUhlYWRlciA/IHpvb21IZWFkZXIuZGF0YU9mZnNldCAtIHN0YXJ0IDogNDA5NjtcbiAgICAgIHJldHVybiB0aGlzLnJlbW90ZUZpbGUuZ2V0Qnl0ZXMoc3RhcnQsIGxlbmd0aCkudGhlbihwYXJzZUNpclRyZWUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5pbW1lZGlhdGUgPSBRLmFsbChbdGhpcy5oZWFkZXIsIHRoaXMuY2lyVHJlZSwgdGhpcy5jb250aWdNYXBdKVxuICAgICAgICAudGhlbigoW2hlYWRlciwgY2lyVHJlZSwgY29udGlnTWFwXSkgPT4ge1xuICAgICAgICAgIHZhciBjbToge1trZXk6c3RyaW5nXTogbnVtYmVyfSA9IGNvbnRpZ01hcDtcbiAgICAgICAgICByZXR1cm4gbmV3IEltbWVkaWF0ZUJpZ0JlZCh0aGlzLnJlbW90ZUZpbGUsIGhlYWRlciwgY2lyVHJlZSwgY20pO1xuICAgICAgICB9KTtcblxuICAgIC8vIEJ1YmJsZSB1cCBlcnJvcnNcbiAgICB0aGlzLmltbWVkaWF0ZS5kb25lKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgQkVEIGVudHJpZXMgd2hpY2ggb3ZlcmxhcCB0aGUgcmFuZ2UuXG4gICAqIE5vdGU6IHdoaWxlIHRoZSByZXF1ZXN0ZWQgcmFuZ2UgaXMgaW5jbHVzaXZlIG9uIGJvdGggZW5kcywgcmFuZ2VzIGluXG4gICAqIGJpZ0JlZCBmb3JtYXQgZmlsZXMgYXJlIGhhbGYtb3BlbiAoaW5jbHVzaXZlIGF0IHRoZSBzdGFydCwgZXhjbHVzaXZlIGF0XG4gICAqIHRoZSBlbmQpLlxuICAgKi9cbiAgZ2V0RmVhdHVyZXNJblJhbmdlKGNvbnRpZzogc3RyaW5nLCBzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8QXJyYXk8QmVkUm93Pj4ge1xuICAgIHZhciByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChjb250aWcsIHN0YXJ0LCBzdG9wKTtcbiAgICByZXR1cm4gdGhpcy5pbW1lZGlhdGUudGhlbihpbSA9PiBpbS5nZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2UpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCBmZWF0dXJlcyBpbiBibG9ja3Mgb3ZlcmxhcHBpbmcgdGhlIGdpdmVuIHJhbmdlLlxuICAgKiBCZWNhdXNlIHRoZXNlIGZlYXR1cmVzIG11c3QgYWxsIGJlIGZldGNoZWQsIGRlY29tcHJlc3NlZCBhbmQgcGFyc2VkXG4gICAqIGFueXdheSwgdGhpcyBjYW4gYmUgaGVscGZ1bCBmb3IgdXBzdHJlYW0gY2FjaGluZy5cbiAgICovXG4gIGdldEZlYXR1cmVCbG9ja3NPdmVybGFwcGluZyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IFEuUHJvbWlzZTxBcnJheTxCZWRCbG9jaz4+IHtcbiAgICByZXR1cm4gdGhpcy5pbW1lZGlhdGUudGhlbihpbSA9PiBpbS5nZXRGZWF0dXJlQmxvY2tzT3ZlcmxhcHBpbmcocmFuZ2UpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJpZ0JlZDtcbiIsIi8qKlxuICogVGhpcyBjbGFzcyBwYXJzZXMgYW5kIHJlcHJlc2VudHMgYSBzaW5nbGUgcmVhZCBpbiBhIFNBTS9CQU0gZmlsZS5cbiAqXG4gKiBUaGlzIGlzIHVzZWQgaW5zdGVhZCBvZiBwYXJzaW5nIGRpcmVjdGx5IHZpYSBqQmluYXJ5IGluIG9yZGVyIHRvOlxuICogLSBNYWtlIHRoZSBwYXJzaW5nIGxhenkgKGZvciBzaWduaWZpY2FudCBwZXJmb3JtYW5jZSB3aW5zKVxuICogLSBNYWtlIHRoZSByZXN1bHRpbmcgb2JqZWN0IG1vcmUgcHJlY2lzZWx5IHR5cGVkLlxuICpcbiAqIFBhcnNpbmcgcmVhZHMgdXNpbmcgU2FtUmVhZCBpcyB+Mi0zeCBmYXN0ZXIgdGhhbiB1c2luZyBqQmluYXJ5IGFuZFxuICogVGhpbkFsaWdubWVudCBkaXJlY3RseS5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIFZpcnR1YWxPZmZzZXQgZnJvbSAnLi9WaXJ0dWFsT2Zmc2V0JztcbmltcG9ydCB0eXBlIHtTdHJhbmQsIENpZ2FyT3AsIE1hdGVQcm9wZXJ0aWVzfSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuXG5pbXBvcnQgakRhdGFWaWV3IGZyb20gJ2pkYXRhdmlldyc7XG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IGJhbVR5cGVzIGZyb20gJy4vZm9ybWF0cy9iYW1UeXBlcyc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuXG4vLyBUT0RPOiBNYWtlIG1vcmUgZXh0ZW5zaXZlIHVzZSBvZiB0aGUgakJpbmFyeSBzcGVjcy5cblxuXG52YXIgQ0lHQVJfT1BTID0gWydNJywgJ0knLCAnRCcsICdOJywgJ1MnLCAnSCcsICdQJywgJz0nLCAnWCddO1xuXG52YXIgU0VRVUVOQ0VfVkFMVUVTID0gWyc9JywgJ0EnLCAnQycsICdNJywgJ0cnLCAnUicsICdTJywgJ1YnLFxuICAgICAgICAgICAgICAgICAgICAgICAnVCcsICdXJywgJ1knLCAnSCcsICdLJywgJ0QnLCAnQicsICdOJ107XG5cblxuZnVuY3Rpb24gc3RyYW5kRmxhZ1RvU3RyaW5nKHJldmVyc2VTdHJhbmQ6IG51bWJlcik6IFN0cmFuZCB7XG4gIHJldHVybiByZXZlcnNlU3RyYW5kID8gJy0nIDogJysnO1xufVxuXG5cbmNsYXNzIFNhbVJlYWQgLyogaW1wbGVtZW50cyBBbGlnbm1lbnQgKi8ge1xuICBidWZmZXI6IEFycmF5QnVmZmVyO1xuICBvZmZzZXQ6IFZpcnR1YWxPZmZzZXQ7XG5cbiAgcG9zOiBudW1iZXI7XG4gIHJlZklEOiBudW1iZXI7XG4gIHJlZjogc3RyaW5nO1xuICBsX3NlcTogbnVtYmVyO1xuICBuYW1lOiBzdHJpbmc7XG4gIGNpZ2FyT3BzOiBDaWdhck9wW107XG5cbiAgLy8gY2FjaGVkIHZhbHVlc1xuICBfZnVsbDogP09iamVjdDtcbiAgX3NlcTogP3N0cmluZztcbiAgX2ludGVydmFsOiA/Q29udGlnSW50ZXJ2YWw8c3RyaW5nPjtcblxuICAvKipcbiAgICogQHBhcmFtIGJ1ZmZlciBjb250YWlucyB0aGUgcmF3IGJ5dGVzIG9mIHRoZSBzZXJpYWxpemVkIEJBTSByZWFkLiBJdCBtdXN0XG4gICAqICAgICBjb250YWluIGF0IGxlYXN0IG9uZSBmdWxsIHJlYWQgKGJ1dCBtYXkgY29udGFpbiBtb3JlKS5cbiAgICogQHBhcmFtIG9mZnNldCByZWNvcmRzIHdoZXJlIHRoaXMgYWxpZ25tZW50IGlzIGxvY2F0ZWQgaW4gdGhlIEJBTSBmaWxlLiBJdCdzXG4gICAqICAgICB1c2VmdWwgYXMgYSB1bmlxdWUgSUQgZm9yIGFsaWdubWVudHMuXG4gICAqIEBwYXJhbSByZWYgaXMgdGhlIGh1bWFuLXJlYWRhYmxlIG5hbWUgb2YgdGhlIHJlZmVyZW5jZS9jb250aWcgKHRoZSBiaW5hcnlcbiAgICogICAgIGVuY29kaW5nIG9ubHkgY29udGFpbnMgYW4gSUQpLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYnVmZmVyOiBBcnJheUJ1ZmZlciwgb2Zmc2V0OiBWaXJ0dWFsT2Zmc2V0LCByZWY6IHN0cmluZykge1xuICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuXG4gICAgLy8gR28gYWhlYWQgYW5kIHBhcnNlIGEgZmV3IGZpZWxkcyBpbW1lZGlhdGVseS5cbiAgICB2YXIganYgPSB0aGlzLl9nZXRKRGF0YVZpZXcoKTtcbiAgICB0aGlzLnJlZklEID0ganYuZ2V0SW50MzIoMCk7XG4gICAgdGhpcy5yZWYgPSByZWY7XG4gICAgdGhpcy5wb3MgPSBqdi5nZXRJbnQzMig0KTtcbiAgICB0aGlzLmxfc2VxID0ganYuZ2V0SW50MzIoMTYpO1xuICAgIHRoaXMuY2lnYXJPcHMgPSB0aGlzLl9nZXRDaWdhck9wcygpO1xuICAgIHRoaXMubmFtZSA9IHRoaXMuX2dldE5hbWUoKTtcbiAgfVxuXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgdmFyIHN0b3AgPSB0aGlzLnBvcyArIHRoaXMubF9zZXE7XG4gICAgcmV0dXJuIGAke3RoaXMucmVmfTokezErdGhpcy5wb3N9LSR7c3RvcH1gO1xuICB9XG5cbiAgX2dldEpEYXRhVmlldygpOiBqRGF0YVZpZXcge1xuICAgIHZhciBiID0gdGhpcy5idWZmZXI7XG4gICAgcmV0dXJuIG5ldyBqRGF0YVZpZXcoYiwgMCwgYi5ieXRlTGVuZ3RoLCB0cnVlIC8qIGxpdHRsZSBlbmRpYW4gKi8pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gaWRlbnRpZmllciB3aGljaCBpcyB1bmlxdWUgd2l0aGluIHRoZSBCQU0gZmlsZS5cbiAgICovXG4gIGdldEtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm9mZnNldC50b1N0cmluZygpO1xuICB9XG5cbiAgX2dldE5hbWUoKTogc3RyaW5nIHtcbiAgICB2YXIganYgPSB0aGlzLl9nZXRKRGF0YVZpZXcoKTtcbiAgICB2YXIgbF9yZWFkX25hbWUgPSBqdi5nZXRVaW50OCg4KTtcbiAgICBqdi5zZWVrKDMyKTsgIC8vIHRoZSByZWFkLW5hbWUgc3RhcnRzIGF0IGJ5dGUgMzJcbiAgICByZXR1cm4ganYuZ2V0U3RyaW5nKGxfcmVhZF9uYW1lIC0gMSk7ICAvLyBpZ25vcmUgbnVsbC10ZXJtaW5hdG9yXG4gIH1cblxuICBnZXRGbGFnKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2dldEpEYXRhVmlldygpLmdldFVpbnQxNigxNCk7XG4gIH1cblxuICBnZXRJbmZlcnJlZEluc2VydFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0SkRhdGFWaWV3KCkuZ2V0VWludDE2KDI4KTtcbiAgfVxuXG4gIGdldFN0cmFuZCgpOiBTdHJhbmQge1xuICAgIHJldHVybiBzdHJhbmRGbGFnVG9TdHJpbmcodGhpcy5nZXRGbGFnKCkgJiBiYW1UeXBlcy5GbGFncy5SRUFEX1NUUkFORCk7XG4gIH1cblxuICAvLyBUT0RPOiBnZXQgcmlkIG9mIHRoaXM7IG1vdmUgYWxsIG1ldGhvZHMgaW50byBTYW1SZWFkLlxuICBnZXRGdWxsKCk6IE9iamVjdCB7XG4gICAgaWYgKHRoaXMuX2Z1bGwpIHJldHVybiB0aGlzLl9mdWxsO1xuICAgIHZhciBqYiA9IG5ldyBqQmluYXJ5KHRoaXMuYnVmZmVyLCBiYW1UeXBlcy5UWVBFX1NFVCk7XG4gICAgdmFyIGZ1bGwgPSBqYi5yZWFkKGJhbVR5cGVzLlRoaWNrQWxpZ25tZW50LCAwKTtcbiAgICB0aGlzLl9mdWxsID0gZnVsbDtcbiAgICByZXR1cm4gZnVsbDtcbiAgfVxuXG4gIGdldEludGVydmFsKCk6IENvbnRpZ0ludGVydmFsPHN0cmluZz4ge1xuICAgIGlmICh0aGlzLl9pbnRlcnZhbCkgcmV0dXJuIHRoaXMuX2ludGVydmFsOyAgLy8gdXNlIHRoZSBjYWNoZVxuICAgIHZhciBpbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbCh0aGlzLnJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zICsgdGhpcy5nZXRSZWZlcmVuY2VMZW5ndGgoKSAtIDEpO1xuICAgIHJldHVybiBpbnRlcnZhbDtcbiAgfVxuXG4gIGludGVyc2VjdHMoaW50ZXJ2YWw6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gaW50ZXJ2YWwuaW50ZXJzZWN0cyh0aGlzLmdldEludGVydmFsKCkpO1xuICB9XG5cbiAgX2dldENpZ2FyT3BzKCk6IENpZ2FyT3BbXSB7XG4gICAgdmFyIGp2ID0gdGhpcy5fZ2V0SkRhdGFWaWV3KCksXG4gICAgICAgIGxfcmVhZF9uYW1lID0ganYuZ2V0VWludDgoOCksXG4gICAgICAgIG5fY2lnYXJfb3AgPSBqdi5nZXRVaW50MTYoMTIpLFxuICAgICAgICBwb3MgPSAzMiArIGxfcmVhZF9uYW1lLFxuICAgICAgICBjaWdhcl9vcHMgPSBuZXcgQXJyYXkobl9jaWdhcl9vcCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuX2NpZ2FyX29wOyBpKyspIHtcbiAgICAgIHZhciB2ID0ganYuZ2V0VWludDMyKHBvcyArIDQgKiBpKTtcbiAgICAgIGNpZ2FyX29wc1tpXSA9IHtcbiAgICAgICAgb3A6IENJR0FSX09QU1t2ICYgMHhmXSxcbiAgICAgICAgbGVuZ3RoOiB2ID4+IDRcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBjaWdhcl9vcHM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBwZXItYmFzZSBxdWFsaXR5IHNjb3JlcyBmcm9tIDAtMjU1LlxuICAgKi9cbiAgZ2V0UXVhbGl0eVNjb3JlcygpOiBudW1iZXJbXSB7XG4gICAgdmFyIGp2ID0gdGhpcy5fZ2V0SkRhdGFWaWV3KCksXG4gICAgICAgIGxfcmVhZF9uYW1lID0ganYuZ2V0VWludDgoOCksXG4gICAgICAgIG5fY2lnYXJfb3AgPSBqdi5nZXRVaW50MTYoMTIpLFxuICAgICAgICBsX3NlcSA9IGp2LmdldEludDMyKDE2KSxcbiAgICAgICAgcG9zID0gMzIgKyBsX3JlYWRfbmFtZSArIDQgKiBuX2NpZ2FyX29wICsgTWF0aC5jZWlsKGxfc2VxIC8gMik7XG4gICAgcmV0dXJuIGp2LmdldEJ5dGVzKGxfc2VxLCBwb3MsIHRydWUgLyogbGl0dGxlIGVuZGlhbiAqLywgdHJ1ZSAvKiB0b0FycmF5ICovKTtcbiAgfVxuXG4gIGdldENpZ2FyU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG1ha2VDaWdhclN0cmluZyh0aGlzLmdldEZ1bGwoKS5jaWdhcik7XG4gIH1cblxuICBnZXRRdWFsUGhyZWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbWFrZUFzY2lpUGhyZWQodGhpcy5nZXRRdWFsaXR5U2NvcmVzKCkpO1xuICB9XG5cbiAgZ2V0U2VxdWVuY2UoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5fc2VxKSByZXR1cm4gdGhpcy5fc2VxO1xuICAgIHZhciBqdiA9IHRoaXMuX2dldEpEYXRhVmlldygpLFxuICAgICAgICBsX3JlYWRfbmFtZSA9IGp2LmdldFVpbnQ4KDgpLFxuICAgICAgICBuX2NpZ2FyX29wID0ganYuZ2V0VWludDE2KDEyKSxcbiAgICAgICAgbF9zZXEgPSBqdi5nZXRJbnQzMigxNiksXG4gICAgICAgIHBvcyA9IDMyICsgbF9yZWFkX25hbWUgKyA0ICogbl9jaWdhcl9vcCxcbiAgICAgICAgYmFzZVBhaXJzID0gbmV3IEFycmF5KGxfc2VxKSxcbiAgICAgICAgbnVtQnl0ZXMgPSBNYXRoLmNlaWwobF9zZXEgLyAyKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykge1xuICAgICAgdmFyIGIgPSBqdi5nZXRVaW50OChwb3MgKyBpKTtcbiAgICAgIGJhc2VQYWlyc1syICogaV0gPSBTRVFVRU5DRV9WQUxVRVNbYiA+PiA0XTtcbiAgICAgIGlmICgyICogaSArIDEgPCBsX3NlcSkge1xuICAgICAgICBiYXNlUGFpcnNbMiAqIGkgKyAxXSA9IFNFUVVFTkNFX1ZBTFVFU1tiICYgMHhmXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc2VxID0gYmFzZVBhaXJzLmpvaW4oJycpO1xuICAgIHRoaXMuX3NlcSA9IHNlcTtcbiAgICByZXR1cm4gc2VxO1xuICB9XG5cbiAgLy8gUmV0dXJucyB0aGUgbGVuZ3RoIG9mIHRoZSBhbGlnbm1lbnQgZnJvbSBmaXJzdCBhbGlnbmVkIHJlYWQgdG8gbGFzdCBhbGlnbmVkIHJlYWQuXG4gIGdldFJlZmVyZW5jZUxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiBTYW1SZWFkLnJlZmVyZW5jZUxlbmd0aEZyb21PcHModGhpcy5jaWdhck9wcyk7XG4gIH1cblxuICBnZXRNYXRlUHJvcGVydGllcygpOiA/TWF0ZVByb3BlcnRpZXMge1xuICAgIHZhciBqdiA9IHRoaXMuX2dldEpEYXRhVmlldygpLFxuICAgICAgICBmbGFnID0ganYuZ2V0VWludDE2KDE0KTtcbiAgICBpZiAoIShmbGFnICYgYmFtVHlwZXMuRmxhZ3MuUkVBRF9QQUlSRUQpKSByZXR1cm4gbnVsbDtcblxuICAgIHZhciBuZXh0UmVmSWQgPSBqdi5nZXRJbnQzMigyMCksXG4gICAgICAgIG5leHRQb3MgPSBqdi5nZXRJbnQzMigyNCksXG4gICAgICAgIG5leHRTdHJhbmQgPSBzdHJhbmRGbGFnVG9TdHJpbmcoZmxhZyAmIGJhbVR5cGVzLkZsYWdzLk1BVEVfU1RSQU5EKTtcblxuICAgIHJldHVybiB7XG4gICAgICAvLyBJZiB0aGUgbWF0ZSBpcyBvbiBhbm90aGVyIGNvbnRpZywgdGhlcmUncyBubyBlYXN5IHdheSB0byBnZXQgaXRzIHN0cmluZyBuYW1lLlxuICAgICAgcmVmOiBuZXh0UmVmSWQgPT0gdGhpcy5yZWZJRCA/IHRoaXMucmVmIDogbnVsbCxcbiAgICAgIHBvczogbmV4dFBvcyxcbiAgICAgIHN0cmFuZDogbmV4dFN0cmFuZFxuICAgIH07XG4gIH1cblxuICBkZWJ1Z1N0cmluZygpOiBzdHJpbmcge1xuICAgIHZhciBmID0gdGhpcy5nZXRGdWxsKCk7XG5cbiAgICByZXR1cm4gYE5hbWU6ICR7dGhpcy5uYW1lfVxuRkxBRzogJHt0aGlzLmdldEZsYWcoKX1cblBvc2l0aW9uOiAke3RoaXMuZ2V0SW50ZXJ2YWwoKX1cbkNJR0FSOiAke3RoaXMuZ2V0Q2lnYXJTdHJpbmcoKX1cblNlcXVlbmNlOiAke2Yuc2VxfVxuUXVhbGl0eTogICR7dGhpcy5nZXRRdWFsUGhyZWQoKX1cblRhZ3M6ICR7SlNPTi5zdHJpbmdpZnkoZi5hdXhpbGlhcnksIG51bGwsICcgICcpfVxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgcmVmZXJlbmNlTGVuZ3RoRnJvbU9wcyhvcHM6IENpZ2FyT3BbXSk6IG51bWJlciB7XG4gICAgdmFyIHJlZkxlbmd0aCA9IDA7XG4gICAgb3BzLmZvckVhY2goKHtvcCwgbGVuZ3RofSkgPT4ge1xuICAgICAgc3dpdGNoIChvcCkge1xuICAgICAgICBjYXNlICdNJzpcbiAgICAgICAgY2FzZSAnRCc6XG4gICAgICAgIGNhc2UgJ04nOlxuICAgICAgICBjYXNlICc9JzpcbiAgICAgICAgY2FzZSAnWCc6XG4gICAgICAgICAgcmVmTGVuZ3RoICs9IGxlbmd0aDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVmTGVuZ3RoO1xuICB9XG59XG5cbi8vIENvbnZlcnQgYSBzdHJ1Y3R1cmVkIENpZ2FyIG9iamVjdCBpbnRvIHRoZSBzdHJpbmcgZm9ybWF0IHdlIGFsbCBsb3ZlLlxuZnVuY3Rpb24gbWFrZUNpZ2FyU3RyaW5nKGNpZ2FyT3BzOiBBcnJheTx7b3A6c3RyaW5nOyBsZW5ndGg6bnVtYmVyfT4pIHtcbiAgcmV0dXJuIGNpZ2FyT3BzLm1hcCgoe29wLCBsZW5ndGh9KSA9PiBsZW5ndGggKyBvcCkuam9pbignJyk7XG59XG5cbi8vIENvbnZlcnQgYW4gYXJyYXkgb2YgUGhyZWQgc2NvcmVzIHRvIGEgcHJpbnRhYmxlIHN0cmluZy5cbmZ1bmN0aW9uIG1ha2VBc2NpaVBocmVkKHF1YWxpdGllczogbnVtYmVyW10pOiBzdHJpbmcge1xuICBpZiAocXVhbGl0aWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xuICBpZiAoXy5ldmVyeShxdWFsaXRpZXMsIHggPT4geCA9PSAyNTUpKSByZXR1cm4gJyonO1xuICByZXR1cm4gcXVhbGl0aWVzLm1hcChxID0+IFN0cmluZy5mcm9tQ2hhckNvZGUoMzMgKyBxKSkuam9pbignJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gU2FtUmVhZDtcbiIsIi8qKlxuICogVGhpcyBtb2R1bGUgZGVmaW5lcyBhIHBhcnNlciBmb3IgdGhlIDJiaXQgZmlsZSBmb3JtYXQuXG4gKiBTZWUgaHR0cDovL2dlbm9tZS51Y3NjLmVkdS9GQVEvRkFRZm9ybWF0Lmh0bWwjZm9ybWF0N1xuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSBSZW1vdGVGaWxlIGZyb20gJy4uL1JlbW90ZUZpbGUnO1xuXG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5cbmltcG9ydCB0d29CaXRUeXBlcyBmcm9tICcuL2Zvcm1hdHMvdHdvQml0VHlwZXMnO1xuXG52YXIgQkFTRV9QQUlSUyA9IFtcbiAgJ1QnLCAgLy8gMD0wMFxuICAnQycsICAvLyAxPTAxXG4gICdBJywgIC8vIDI9MTBcbiAgJ0cnICAgLy8gMz0xMVxuXTtcblxuLyoqXG4gIFRoZSBmb2xsb3dpbmcgY2h1bmsgc2l6ZXMgYXJlIG9wdGltaXplZCBhZ2FpbnN0XG4gIHRoZSBodW1hbiByZWZlcmVuY2UgZ2Vub21lIChoZzE5LjJiaXQpLiBBc3N1bWluZyB0aGF0XG4gIHBpbGV1cC5qcyBpcyBtb3N0bHkgYmVpbmcgdXNlZCBmb3IgaHVtYW4gZ2Vub21lLFxuICBpbmNyZWFzaW5nIHRoZSBmb2xsb3dpbmcgbnVtYmVycyBtaWdodCBjYXVzZSBub25uZWNlc3NhcnlcbiAgbmV0d29yayB0cmFmZmljIGFuZCBtaWdodCBhbHNvIGJyZWFrIG91ciB1bml0IHRlc3RzXG4gIHRoYXQgbWFrZSB1c2Ugb2YgbWFwcGVkIDJiaXQgZmlsZXMuXG4qL1xudmFyIEZJUlNUX0hFQURFUl9DSFVOS1NJWkUgPSAxNiAqIDEwMjQsICAvLyAxNiBLQlxuICAgIEZJUlNUX1NFUVVFTkNFX0NIVU5LU0laRSA9ICg0ICogMTAyNCkgLSAxLCAgLy8gfiA0S0JcbiAgICBNQVhfQ0hVTktTSVpFID0gMTAyNCAqIDEwMjQ7ICAvLyAxIE1CXG5cbnR5cGUgRmlsZUluZGV4RW50cnkgPSB7XG4gIG5hbWU6IHN0cmluZztcbiAgb2Zmc2V0OiBudW1iZXI7XG59O1xuXG50eXBlIFNlcXVlbmNlUmVjb3JkID0ge1xuICBudW1CYXNlczogbnVtYmVyO1xuICB1bmtub3duQmxvY2tTdGFydHM6IEFycmF5PG51bWJlcj47ICAvLyBuYiB0aGVzZSBudW1iZXJzIGFyZSAwLWJhc2VkXG4gIHVua25vd25CbG9ja0xlbmd0aHM6IEFycmF5PG51bWJlcj47ICAvLyBUT0RPKGRhbnZrKTogYWRkIGFuIGludGVydmFsIHR5cGU/XG4gIG51bU1hc2tCbG9ja3M6IG51bWJlcjtcbiAgbWFza0Jsb2NrU3RhcnRzOiBBcnJheTxudW1iZXI+O1xuICBtYXNrQmxvY2tMZW5ndGhzOiBBcnJheTxudW1iZXI+O1xuICBkbmFPZmZzZXRGcm9tSGVhZGVyOiBudW1iZXI7ICAvLyAjIG9mIGJ5dGVzIGZyb20gc2VxdWVuY2UgaGVhZGVyIHRvIHBhY2tlZCBETkFcbiAgb2Zmc2V0OiBudW1iZXI7ICAvLyBieXRlcyBmcm9tIHRoZSBzdGFydCBvZiB0aGUgZmlsZSBhdCB3aGljaCB0aGlzIGRhdGEgbGl2ZXMuXG59XG5cbnR5cGUgVHdvQml0SGVhZGVyID0ge1xuICBzZXF1ZW5jZUNvdW50OiBudW1iZXI7XG4gIHNlcXVlbmNlczogQXJyYXk8RmlsZUluZGV4RW50cnk+O1xufVxuXG5cbi8qKlxuICogUGFyc2VzIGEgc2luZ2xlIFNlcXVlbmNlUmVjb3JkIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBBcnJheUJ1ZmZlci5cbiAqIGZpbGVPZmZzZXQgaXMgdGhlIHBvc2l0aW9uIG9mIHRoaXMgc2VxdWVuY2Ugd2l0aGluIHRoZSAyYml0IGZpbGUuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2VxdWVuY2VSZWNvcmQoYnVmZmVyOiBBcnJheUJ1ZmZlciwgZmlsZU9mZnNldDogbnVtYmVyKTogU2VxdWVuY2VSZWNvcmQge1xuICB2YXIgamIgPSBuZXcgakJpbmFyeShidWZmZXIsIHR3b0JpdFR5cGVzLlRZUEVfU0VUKTtcbiAgdmFyIGhlYWRlciA9IGpiLnJlYWQoJ1NlcXVlbmNlUmVjb3JkJyk7XG5cbiAgdmFyIGRuYU9mZnNldCA9IGpiLnRlbGwoKSArIDggKiBoZWFkZXIubWFza0Jsb2NrQ291bnQgKyA0O1xuXG4gIHJldHVybiB7XG4gICAgbnVtQmFzZXM6IGhlYWRlci5kbmFTaXplLFxuICAgIHVua25vd25CbG9ja1N0YXJ0czogaGVhZGVyLm5CbG9ja1N0YXJ0cyxcbiAgICB1bmtub3duQmxvY2tMZW5ndGhzOiBoZWFkZXIubkJsb2NrU2l6ZXMsXG4gICAgbnVtTWFza0Jsb2NrczogaGVhZGVyLm1hc2tCbG9ja0NvdW50LFxuICAgIG1hc2tCbG9ja1N0YXJ0czogW10sXG4gICAgbWFza0Jsb2NrTGVuZ3RoczogW10sXG4gICAgZG5hT2Zmc2V0RnJvbUhlYWRlcjogZG5hT2Zmc2V0LFxuICAgIG9mZnNldDogZmlsZU9mZnNldFxuICB9O1xufVxuXG5cbmZ1bmN0aW9uIHBhcnNlSGVhZGVyKGJ1ZmZlcjogQXJyYXlCdWZmZXIpOiBUd29CaXRIZWFkZXIge1xuICB2YXIgamIgPSBuZXcgakJpbmFyeShidWZmZXIsIHR3b0JpdFR5cGVzLlRZUEVfU0VUKTtcbiAgdmFyIGhlYWRlciA9IGpiLnJlYWQoJ0hlYWRlcicpO1xuXG4gIHJldHVybiB7XG4gICAgc2VxdWVuY2VDb3VudDogaGVhZGVyLnNlcXVlbmNlQ291bnQsXG4gICAgc2VxdWVuY2VzOiBoZWFkZXIuc2VxdWVuY2VzXG4gIH07XG59XG5cblxuLyoqXG4gKiBSZWFkIDItYml0IGVuY29kZWQgYmFzZSBwYWlycyBmcm9tIGEgRGF0YVZpZXcgaW50byBhbiBhcnJheSBvZiAnQScsICdUJyxcbiAqICdDJywgJ0cnIHN0cmluZ3MuXG4gKiBUaGVzZSBhcmUgcmV0dXJuZWQgYXMgYW4gYXJyYXkgKHJhdGhlciB0aGFuIGEgc3RyaW5nKSB0byBmYWNpbGl0YXRlIGZ1cnRoZXJcbiAqIG1vZGlmaWNhdGlvbi5cbiAqL1xuZnVuY3Rpb24gdW5wYWNrRE5BKGRhdGFWaWV3OiBEYXRhVmlldywgc3RhcnRCYXNlUGFpcjogbnVtYmVyLCBudW1CYXNlUGFpcnM6IG51bWJlcik6IEFycmF5PHN0cmluZz4ge1xuICAvLyBUT0RPOiB1c2UgakJpbmFyeSBiaXRmaWVsZCBmb3IgdGhpc1xuICB2YXIgYmFzZVBhaXJzOiBBcnJheTxzdHJpbmc+ID0gW107XG4gIGJhc2VQYWlycy5sZW5ndGggPSBkYXRhVmlldy5ieXRlTGVuZ3RoICogNDsgIC8vIHByZS1hbGxvY2F0ZVxuICB2YXIgYmFzZVBhaXJJZHggPSAtc3RhcnRCYXNlUGFpcjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhVmlldy5ieXRlTGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcGFja2VkID0gZGF0YVZpZXcuZ2V0VWludDgoaSk7XG4gICAgZm9yICh2YXIgc2hpZnQgPSA2OyBzaGlmdCA+PSAwOyBzaGlmdCAtPSAyKSB7XG4gICAgICB2YXIgYnAgPSBCQVNFX1BBSVJTWyhwYWNrZWQgPj4gc2hpZnQpICYgM107XG4gICAgICBpZiAoc3RhcnRCYXNlUGFpciA+PSAwKSB7XG4gICAgICAgIGJhc2VQYWlyc1tiYXNlUGFpcklkeF0gPSBicDtcbiAgICAgIH1cbiAgICAgIGJhc2VQYWlySWR4Kys7XG4gICAgfVxuICB9XG4gIC8vIFJlbW92ZSBiYXNlIHBhaXJzIGZyb20gdGhlIGVuZCBpZiB0aGUgc2VxdWVuY2UgdGVybWluYXRlZCBtaWQtYnl0ZS5cbiAgYmFzZVBhaXJzLmxlbmd0aCA9IG51bUJhc2VQYWlycztcbiAgcmV0dXJuIGJhc2VQYWlycztcbn1cblxuLyoqXG4gKiBDaGFuZ2UgYmFzZSBwYWlycyB0byAnTicgd2hlcmUgdGhlIFNlcXVlbmNlUmVjb3JkIGRpY3RhdGVzLlxuICogVGhpcyBtb2RpZmllcyB0aGUgYmFzZVBhaXJzIGFycmF5IGluLXBsYWNlLlxuICovXG5mdW5jdGlvbiBtYXJrVW5rbm93bkROQShiYXNlUGFpcnM6IEFycmF5PHN0cmluZz4sIGRuYVN0YXJ0SW5kZXg6IG51bWJlciwgc2VxdWVuY2U6IFNlcXVlbmNlUmVjb3JkKTogQXJyYXk8c3RyaW5nPiB7XG4gIHZhciBkbmFTdG9wID0gZG5hU3RhcnRJbmRleCArIGJhc2VQYWlycy5sZW5ndGggLSAxO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHNlcXVlbmNlLnVua25vd25CbG9ja1N0YXJ0cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBuU3RhcnQgPSBzZXF1ZW5jZS51bmtub3duQmxvY2tTdGFydHNbaV0sXG4gICAgICAgIG5MZW5ndGggPSBzZXF1ZW5jZS51bmtub3duQmxvY2tMZW5ndGhzW2ldLFxuICAgICAgICBuU3RvcCA9IG5TdGFydCArIG5MZW5ndGggLSAxLFxuICAgICAgICBpbnRTdGFydCA9IE1hdGgubWF4KG5TdGFydCwgZG5hU3RhcnRJbmRleCksXG4gICAgICAgIGludFN0b3AgPSBNYXRoLm1pbihuU3RvcCwgZG5hU3RvcCk7XG4gICAgaWYgKGludFN0b3AgPCBpbnRTdGFydCkgY29udGludWU7ICAvLyBubyBvdmVybGFwXG5cbiAgICBmb3IgKHZhciBqID0gaW50U3RhcnQ7IGogPD0gaW50U3RvcDsgaisrKSB7XG4gICAgICBiYXNlUGFpcnNbaiAtIGRuYVN0YXJ0SW5kZXhdID0gJ04nO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBiYXNlUGFpcnM7XG59XG5cblxuLyoqXG4gKiBBbiB1bWJyZWxsYSBlcnJvciB0eXBlIHRvIGRlc2NyaWJlIGlzc3VlcyB3aXRoIHBhcnNpbmcgYW5cbiAqIGluY29tcGxldGUgY2h1bmsgb2YgZGF0YSB3aXRoIEpCaW5hcnkncyByZWFkLiBJZiB0aGlzIGlzIGJlaW5nXG4gKiByYWlzZWQsIHdlIGVpdGhlciBuZWVkIHRvIGFzayBmb3IgbW9yZSBkYXRhIChhIGJpZ2dlciBjaHVuaykgb3JcbiAqIHJlcG9ydCB0byB0aGUgdXNlciB0aGF0IHRoZXJlIG1pZ2h0IGJlIGEgcHJvYmxlbSB3aXRoIHRoZSAyYml0XG4gKiBmaWxlLCBzcGVjaWZpY2FsbHkgd2l0aCBpdHMgaGVhZGVyLlxuICovXG5mdW5jdGlvbiBJbmNvbXBsZXRlQ2h1bmtFcnJvcihtZXNzYWdlKSB7XG4gICAgdGhpcy5uYW1lID0gXCJJbmNvbXBsZXRlQ2h1bmtFcnJvclwiO1xuICAgIHRoaXMubWVzc2FnZSA9IChtZXNzYWdlIHx8IFwiXCIpO1xufVxuSW5jb21wbGV0ZUNodW5rRXJyb3IucHJvdG90eXBlID0gRXJyb3IucHJvdG90eXBlO1xuXG4vKipcbiAqIFdyYXBzIGEgcGFyc2luZyBhdHRlbXB0LCBjYXB0dXJlcyBlcnJvcnMgcmVsYXRlZCB0b1xuICogaW5jb21wbGV0ZSBkYXRhIGFuZCByZS10aHJvd3MgYSBzcGVjaWFsaXplZCBlcnJvcjpcbiAqIEluY29tcGxldGVDaHVua0Vycm9yLiBPdGhlcndpc2UsIHdoYXRldmVyIG90aGVyIGVycm9yXG4gKiBpcyBiZWluZyByYWlzZWQgZ2V0cyBlc2NhbGF0ZWQuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlV2l0aEV4Y2VwdGlvbihwYXJzZUZ1bmM6IEZ1bmN0aW9uKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHBhcnNlRnVuYygpO1xuICB9IGNhdGNoKGVycm9yKSB7XG4gICAgLy8gQ2hyb21lLWxpa2UgYnJvd3NlcnM6IFJhbmdlRXJyb3I7IHBoYW50b21qczogRE9NRXhjZXB0aW9uXG4gICAgaWYgKGVycm9yLm5hbWUgPT0gXCJSYW5nZUVycm9yXCIgfHwgZXJyb3IubmFtZSA9PSBcIklOREVYX1NJWkVfRVJSXCIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG5hbWU6ICR7ZXJyb3IubmFtZX1gKTtcbiAgICAgICAgdGhyb3cgbmV3IEluY29tcGxldGVDaHVua0Vycm9yKGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVHJ5IGdldHRpbmcgYSBiaWdnZXIgY2h1bmsgb2YgdGhlIHJlbW90ZSBmaWxlXG4gKiB1bnRpbCB0aGUgSW5jb21wbGV0ZSBDaHVuayBFcnJvciBpcyByZXNvbHZlZC4gVGhpcyBpcyB1c2VmdWwgd2hlbiB3ZSBuZWVkIHRvXG4gKiBwYXJzZSB0aGUgaGVhZGVyLCBidXQgd2hlbiB3ZSBkb24ndCBrbm93IHRoZSBzaXplIG9mIHRoZSBoZWFkZXIgdXAgZnJvbnQuXG4gKiBJZiB0aGUgaW50aWFsIHJlcXVlc3QgcmV0dXJucyBhbiBpbmNvbXBsZXRlIGhlYWRlciBhbmQgaGVuY2UgdGhlXG4gKiBwYXJzaW5nIGZhaWxzLCB3ZSBuZXh0IHRyeSBkb3VibGluZyB0aGUgcmVxdWVzdGVkIHNpemUuXG4gKiBUaGUgc2l6ZSBvZiB0aGUgcmVxdWVzdCBpcyBjYXBwZWQgd2l0aCBgdW50aWxTaXplYCBzbyB0aGF0XG4gKiB3ZSBkb24ndCBzdGFydCBhc2tpbmcgZm9yIE1CcyBvZiBkYXRhIGZvciBubyB1c2UuXG4gKiBJbnN0ZWFkIHdlIHdlIHRocm93IGFuIGVycm9yIGlmIHdlIHJlYWNoIHRoZSBjYXAsXG4gKiBwb3RlbnRpYWxseSBtZWFuaW5nIGEgY29ycnVwdGVkIDJiaXQgZmlsZS5cbiovXG5mdW5jdGlvbiByZXRyeVJlbW90ZUdldChyZW1vdGVGaWxlOiBSZW1vdGVGaWxlLCBzdGFydDogbnVtYmVyLCBzaXplOiBudW1iZXIsIHVudGlsU2l6ZTogbnVtYmVyLCBwcm9taXNlZEZ1bmM6IEZ1bmN0aW9uKSB7XG4gIHJldHVybiByZW1vdGVGaWxlLmdldEJ5dGVzKHN0YXJ0LCBzaXplKS50aGVuKHByb21pc2VkRnVuYykuY2F0Y2goZXJyb3IgPT4ge1xuICAgIGlmKGVycm9yLm5hbWUgPT0gXCJJbmNvbXBsZXRlQ2h1bmtFcnJvclwiKSB7XG4gICAgICAvLyBEbyBub3QgYXR0ZW1wdCB0byBkb3dubG9hZCBtb3JlIHRoYW4gYHVudGlsU2l6ZWBcbiAgICAgIGlmKHNpemUgPiB1bnRpbFNpemUpIHtcbiAgICAgICAgdGhyb3cgYENvdWxkbid0IHBhcnNlIHRoZSBoZWFkZXIgYCArXG4gICAgICAgICAgICAgIGBmcm9tIHRoZSBmaXJzdCAke3NpemV9IGJ5dGVzIG9mIHRoZSBmaWxlLiBgICtcbiAgICAgICAgICAgICAgYENvcnJ1cHRlZCAyYml0IGZpbGU/YDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXRyeVJlbW90ZUdldChyZW1vdGVGaWxlLCBzdGFydCwgc2l6ZSoyLCB1bnRpbFNpemUsIHByb21pc2VkRnVuYyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSk7XG59XG5cbmNsYXNzIFR3b0JpdCB7XG4gIHJlbW90ZUZpbGU6IFJlbW90ZUZpbGU7XG4gIGhlYWRlcjogUS5Qcm9taXNlPFR3b0JpdEhlYWRlcj47XG5cbiAgY29uc3RydWN0b3IocmVtb3RlRmlsZTogUmVtb3RlRmlsZSkge1xuICAgIHRoaXMucmVtb3RlRmlsZSA9IHJlbW90ZUZpbGU7XG4gICAgdmFyIGRlZmVycmVkSGVhZGVyID0gUS5kZWZlcigpO1xuICAgIHRoaXMuaGVhZGVyID0gZGVmZXJyZWRIZWFkZXIucHJvbWlzZTtcbiAgICByZXRyeVJlbW90ZUdldChcbiAgICAgIHRoaXMucmVtb3RlRmlsZSxcbiAgICAgIDAsICAvLyBCZWdpbm5pbmcgb2YgdGhlIGZpbGVcbiAgICAgIEZJUlNUX0hFQURFUl9DSFVOS1NJWkUsXG4gICAgICBNQVhfQ0hVTktTSVpFLFxuICAgICAgYnVmZmVyID0+IHtcbiAgICAgICAgdmFyIGhlYWRlciA9IHBhcnNlV2l0aEV4Y2VwdGlvbigoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlSGVhZGVyKGJ1ZmZlcik7XG4gICAgICAgIH0pO1xuICAgICAgICBkZWZlcnJlZEhlYWRlci5yZXNvbHZlKGhlYWRlcik7XG4gICAgICB9KS5kb25lKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYmFzZSBwYWlycyBmb3IgY29udGlnOnN0YXJ0LXN0b3AuXG4gICAqIFRoZSByYW5nZSBpcyBpbmNsdXNpdmUgYW5kIHplcm8tYmFzZWQuXG4gICAqIFJldHVybnMgZW1wdHkgc3RyaW5nIGlmIG5vIGRhdGEgaXMgYXZhaWxhYmxlIG9uIHRoaXMgcmFuZ2UuXG4gICAqL1xuICBnZXRGZWF0dXJlc0luUmFuZ2UoY29udGlnOiBzdHJpbmcsIHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlcik6IFEuUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAoc3RhcnQgPiBzdG9wKSB7XG4gICAgICB0aHJvdyBgUmVxdWVzdGVkIGEgMmJpdCByYW5nZSB3aXRoIHN0YXJ0ID4gc3RvcCAoJHtzdGFydH0sICR7c3RvcH0pYDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZ2V0U2VxdWVuY2VIZWFkZXIoY29udGlnKS50aGVuKGhlYWRlciA9PiB7XG4gICAgICB2YXIgZG5hT2Zmc2V0ID0gaGVhZGVyLm9mZnNldCArIGhlYWRlci5kbmFPZmZzZXRGcm9tSGVhZGVyO1xuICAgICAgdmFyIG9mZnNldCA9IE1hdGguZmxvb3IoZG5hT2Zmc2V0ICsgc3RhcnQvNCk7XG4gICAgICB2YXIgYnl0ZUxlbmd0aCA9IE1hdGguY2VpbCgoc3RvcCAtIHN0YXJ0ICsgMSkgLyA0KSArIDE7XG4gICAgICByZXR1cm4gdGhpcy5yZW1vdGVGaWxlLmdldEJ5dGVzKG9mZnNldCwgYnl0ZUxlbmd0aCkudGhlbihidWZmZXIgPT4ge1xuICAgICAgICB2YXIgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgICAgICAgcmV0dXJuIG1hcmtVbmtub3duRE5BKFxuICAgICAgICAgICAgdW5wYWNrRE5BKGRhdGFWaWV3LCBzdGFydCAlIDQsIHN0b3AgLSBzdGFydCArIDEpLCBzdGFydCwgaGVhZGVyKVxuICAgICAgICAgICAgLmpvaW4oJycpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBSZXR1cm5zIGEgbGlzdCBvZiBjb250aWcgbmFtZXMuXG4gIGdldENvbnRpZ0xpc3QoKTogUS5Qcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgcmV0dXJuIHRoaXMuaGVhZGVyLnRoZW4oaGVhZGVyID0+IGhlYWRlci5zZXF1ZW5jZXMubWFwKHNlcSA9PiBzZXEubmFtZSkpO1xuICB9XG5cbiAgX2dldFNlcXVlbmNlSGVhZGVyKGNvbnRpZzogc3RyaW5nKTogUS5Qcm9taXNlPFNlcXVlbmNlUmVjb3JkPiB7XG4gICAgcmV0dXJuIHRoaXMuaGVhZGVyLnRoZW4oaGVhZGVyID0+IHtcbiAgICAgIHZhciBtYXliZVNlcSA9IF8uZmluZFdoZXJlKGhlYWRlci5zZXF1ZW5jZXMsIHtuYW1lOiBjb250aWd9KSB8fFxuICAgICAgICAgICAgICAgICAgICAgXy5maW5kV2hlcmUoaGVhZGVyLnNlcXVlbmNlcywge25hbWU6ICdjaHInICsgY29udGlnfSk7XG4gICAgICBpZiAobWF5YmVTZXEgPT09IG51bGwgfHwgbWF5YmVTZXEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyAnSW52YWxpZCBjb250aWc6ICcgKyBjb250aWc7XG4gICAgICB9XG4gICAgICB2YXIgc2VxID0gbWF5YmVTZXE7ICAvLyBmb3IgZmxvdywgc2VlIGZhY2Vib29rL2Zsb3cjMjY2XG5cbiAgICAgIHJldHVybiByZXRyeVJlbW90ZUdldChcbiAgICAgICAgdGhpcy5yZW1vdGVGaWxlLFxuICAgICAgICBzZXEub2Zmc2V0LFxuICAgICAgICBGSVJTVF9TRVFVRU5DRV9DSFVOS1NJWkUsXG4gICAgICAgIE1BWF9DSFVOS1NJWkUsXG4gICAgICAgIGJ1ZmZlciA9PiB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlV2l0aEV4Y2VwdGlvbigoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTZXF1ZW5jZVJlY29yZChidWZmZXIsIHNlcS5vZmZzZXQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVHdvQml0O1xuIiwiLyoqXG4gKiBBIHZpcnR1YWwgb2Zmc2V0IGludG8gYSBCQU0gZmlsZS5cbiAqIFRoaXMgY29tYmluZXMgdGhlIG9mZnNldCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjb21wcmVzc2lvbiBibG9jayB3aXRoIGFuXG4gKiBvZmZzZXQgaW50byB0aGUgaW5mbGF0ZWQgZGF0YS5cbiAqIFRoZXNlIGFyZSB1c3VhbGx5IHJlcHJlc2VudGVkIGFzIHVpbnQ2NHMsIHdoaWNoIGFyZSBhd2t3YXJkIHRvIHdvcmsgd2l0aCBpblxuICogSmF2YVNjcmlwdC5cbiAqIEBmbG93XG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmNsYXNzIFZpcnR1YWxPZmZzZXQge1xuICBjb2Zmc2V0OiBudW1iZXI7XG4gIHVvZmZzZXQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcihjb2Zmc2V0OiBudW1iZXIsIHVvZmZzZXQ6IG51bWJlcikge1xuICAgIHRoaXMuY29mZnNldCA9IGNvZmZzZXQ7XG4gICAgdGhpcy51b2Zmc2V0ID0gdW9mZnNldDtcbiAgfVxuXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuY29mZnNldH06JHt0aGlzLnVvZmZzZXR9YDtcbiAgfVxuXG4gIGlzTGVzc1RoYW4ob3RoZXI6IFZpcnR1YWxPZmZzZXQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb2Zmc2V0IDwgb3RoZXIuY29mZnNldCB8fFxuICAgICAgICAgICAodGhpcy5jb2Zmc2V0ID09IG90aGVyLmNvZmZzZXQgJiZcbiAgICAgICAgICAgIHRoaXMudW9mZnNldCA8IG90aGVyLnVvZmZzZXQpO1xuICB9XG5cbiAgaXNMZXNzVGhhbk9yRXF1YWwob3RoZXI6IFZpcnR1YWxPZmZzZXQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb2Zmc2V0IDw9IG90aGVyLmNvZmZzZXQgfHxcbiAgICAgICAgICAgKHRoaXMuY29mZnNldCA9PSBvdGhlci5jb2Zmc2V0ICYmXG4gICAgICAgICAgICB0aGlzLnVvZmZzZXQgPD0gb3RoZXIudW9mZnNldCk7XG4gIH1cblxuICBpc0VxdWFsKG90aGVyOiBWaXJ0dWFsT2Zmc2V0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29mZnNldCA9PSBvdGhlci5jb2Zmc2V0ICYmXG4gICAgICAgICAgIHRoaXMudW9mZnNldCA9PSBvdGhlci51b2Zmc2V0O1xuICB9XG5cbiAgLy8gUmV0dXJucyA8MCBpZiB0aGlzIDwgb3RoZXIsIDAgaWYgdGhpcyA9PSBvdGhlciwgPjAgaWYgdGhpcyA+IG90aGVyLlxuICAvLyBVc2VmdWwgZm9yIHNvcnRpbmcuXG4gIGNvbXBhcmVUbyhvdGhlcjogVmlydHVhbE9mZnNldCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29mZnNldCAtIG90aGVyLmNvZmZzZXQgfHwgdGhpcy51b2Zmc2V0IC0gb3RoZXIudW9mZnNldDtcbiAgfVxuXG4gIGNsb25lKCk6IFZpcnR1YWxPZmZzZXQge1xuICAgIHJldHVybiBuZXcgVmlydHVhbE9mZnNldCh0aGlzLmNvZmZzZXQsIHRoaXMudW9mZnNldCk7XG4gIH1cblxuICAvLyBUaGlzIGlzIGEgZmFzdGVyIHN0YW5kLWluIGZvciBqQmluYXJ5LnJlYWQoJ1ZpcnR1YWxPZmZzZXQnKVxuICBzdGF0aWMgZnJvbUJsb2IodTg6IFVpbnQ4QXJyYXksIG9mZnNldD86IG51bWJlcik6IFZpcnR1YWxPZmZzZXQge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuICAgIHZhciB1b2Zmc2V0ID0gdThbb2Zmc2V0ICAgIF0gK1xuICAgICAgICAgICAgICAgICAgdThbb2Zmc2V0ICsgMV0gKiAyNTYsXG4gICAgICAgIGNvZmZzZXQgPSB1OFtvZmZzZXQgKyAyXSArXG4gICAgICAgICAgICAgICAgICB1OFtvZmZzZXQgKyAzXSAqIDI1NiArXG4gICAgICAgICAgICAgICAgICB1OFtvZmZzZXQgKyA0XSAqIDY1NTM2ICtcbiAgICAgICAgICAgICAgICAgIHU4W29mZnNldCArIDVdICogMTY3NzcyMTYgK1xuICAgICAgICAgICAgICAgICAgdThbb2Zmc2V0ICsgNl0gKiA0Mjk0OTY3Mjk2ICtcbiAgICAgICAgICAgICAgICAgIHU4W29mZnNldCArIDddICogMTA5OTUxMTYyNzc3NjtcbiAgICByZXR1cm4gbmV3IFZpcnR1YWxPZmZzZXQoY29mZnNldCwgdW9mZnNldCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBWaXJ0dWFsT2Zmc2V0O1xuIiwiLyoqXG4gKiBUb29scyBmb3Igd29ya2luZyB3aXRoIGluZGV4ZWQgQkFNIChCQUkpIGZpbGVzLlxuICogVGhlc2UgaGF2ZSBub3RoaW5nIHRvIHNheSBhYm91dCBwYXJzaW5nIHRoZSBCQU0gZmlsZSBpdHNlbGYuIEZvciB0aGF0LCBzZWVcbiAqIGJhbS5qcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcbmltcG9ydCB0eXBlIENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIHtDaHVua30gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcbmltcG9ydCBqRGF0YVZpZXcgZnJvbSAnamRhdGF2aWV3JztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgYmFtVHlwZXMgZnJvbSAnLi9mb3JtYXRzL2JhbVR5cGVzJztcbmltcG9ydCBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4vVmlydHVhbE9mZnNldCc7XG5cblxuLy8gSW4gdGhlIGV2ZW50IHRoYXQgaW5kZXggY2h1bmtzIGFyZW4ndCBhdmFpbGFibGUgZnJvbSBhbiBleHRlcm5hbCBzb3VyY2UsIGl0XG4vLyB3aW5kcyB1cCBzYXZpbmcgdGltZSB0byBkbyBhIGZhc3QgcGFzcyBvdmVyIHRoZSBkYXRhIHRvIGNvbXB1dGUgdGhlbS4gVGhpc1xuLy8gYWxsb3dzIHVzIHRvIHBhcnNlIGEgc2luZ2xlIGNvbnRpZyBhdCBhIHRpbWUgdXNpbmcgakJpbmFyeS5cbmZ1bmN0aW9uIGNvbXB1dGVJbmRleENodW5rcyhidWZmZXIpIHtcbiAgdmFyIEJMT0NLX1NJWkUgPSA2NTUzNjtcbiAgdmFyIHZpZXcgPSBuZXcgakRhdGFWaWV3KGJ1ZmZlciwgMCwgYnVmZmVyLmJ5dGVMZW5ndGgsIHRydWUgLyogbGl0dGxlIGVuZGlhbiAqLyk7XG5cbiAgdmFyIG1pbkJsb2NrSW5kZXggPSBJbmZpbml0eTtcbiAgdmFyIGNvbnRpZ1N0YXJ0T2Zmc2V0cyA9IFtdO1xuICB2aWV3LmdldEludDMyKCk7ICAvLyBtYWdpY1xuICB2YXIgbl9yZWYgPSB2aWV3LmdldEludDMyKCk7XG4gIGZvciAodmFyIGogPSAwOyBqIDwgbl9yZWY7IGorKykge1xuICAgIGNvbnRpZ1N0YXJ0T2Zmc2V0cy5wdXNoKHZpZXcudGVsbCgpKTtcbiAgICB2YXIgbl9iaW4gPSB2aWV3LmdldEludDMyKCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuX2JpbjsgaSsrKSB7XG4gICAgICB2aWV3LmdldFVpbnQzMigpOyAgLy8gYmluIElEXG4gICAgICB2YXIgbl9jaHVuayA9IHZpZXcuZ2V0SW50MzIoKTtcbiAgICAgIHZpZXcuc2tpcChuX2NodW5rICogMTYpO1xuICAgIH1cbiAgICB2YXIgbl9pbnR2ID0gdmlldy5nZXRJbnQzMigpO1xuICAgIGlmIChuX2ludHYpIHtcbiAgICAgIHZhciBvZmZzZXQgPSBWaXJ0dWFsT2Zmc2V0LmZyb21CbG9iKHZpZXcuZ2V0Qnl0ZXMoOCksIDApLFxuICAgICAgICAgIGNvZmZzZXQgPSBvZmZzZXQuY29mZnNldCArIChvZmZzZXQudW9mZnNldCA/IEJMT0NLX1NJWkUgOiAwKTtcbiAgICAgIG1pbkJsb2NrSW5kZXggPSBjb2Zmc2V0ID8gTWF0aC5taW4oY29mZnNldCwgbWluQmxvY2tJbmRleCkgOiBCTE9DS19TSVpFO1xuICAgICAgdmlldy5za2lwKChuX2ludHYgLSAxKSAqIDgpO1xuICAgIH1cbiAgfVxuICBjb250aWdTdGFydE9mZnNldHMucHVzaCh2aWV3LnRlbGwoKSk7XG5cbiAgLy8gQXQgdGhpcyBwb2ludCwgYG1pbkJsb2NrSW5kZXhgIHNob3VsZCBiZSBub24tSW5maW5pdHkgKHNlZSAjNDA1ICYgIzQwNilcbiAgcmV0dXJuIHtcbiAgICBjaHVua3M6IF8uemlwKF8uaW5pdGlhbChjb250aWdTdGFydE9mZnNldHMpLCBfLnJlc3QoY29udGlnU3RhcnRPZmZzZXRzKSksXG4gICAgbWluQmxvY2tJbmRleFxuICB9O1xufVxuXG5cbmZ1bmN0aW9uIHJlYWRDaHVua3MoYnVmKSB7XG4gIHJldHVybiBuZXcgakJpbmFyeShidWYsIGJhbVR5cGVzLlRZUEVfU0VUKS5yZWFkKCdDaHVua3NBcnJheScpO1xufVxuXG5mdW5jdGlvbiByZWFkSW50ZXJ2YWxzKGJsb2I6IFVpbnQ4QXJyYXkpIHtcbiAgdmFyIGludGVydmFscyA9IG5ldyBBcnJheShNYXRoLmZsb29yKGJsb2IubGVuZ3RoIC8gOCkpO1xuICBmb3IgKHZhciBwb3MgPSAwOyBwb3MgPCBibG9iLmxlbmd0aCAtIDc7IHBvcyArPSA4KSB7XG4gICAgaW50ZXJ2YWxzW3BvcyA+PiAzXSA9IFZpcnR1YWxPZmZzZXQuZnJvbUJsb2IoYmxvYiwgcG9zKTtcbiAgfVxuICByZXR1cm4gaW50ZXJ2YWxzO1xufVxuXG5mdW5jdGlvbiBkb0NodW5rc092ZXJsYXAoYTogQ2h1bmssIGI6IENodW5rKSB7XG4gIHJldHVybiBhLmNodW5rX2JlZy5pc0xlc3NUaGFuT3JFcXVhbChiLmNodW5rX2VuZCkgJiZcbiAgICAgICAgIGIuY2h1bmtfYmVnLmlzTGVzc1RoYW5PckVxdWFsKGEuY2h1bmtfZW5kKTtcbn1cblxuZnVuY3Rpb24gYXJlQ2h1bmtzQWRqYWNlbnQoYTogQ2h1bmssIGI6IENodW5rKSB7XG4gIHJldHVybiBhLmNodW5rX2JlZy5pc0VxdWFsKGIuY2h1bmtfZW5kKSB8fCBhLmNodW5rX2VuZC5pc0VxdWFsKGIuY2h1bmtfYmVnKTtcbn1cblxuLy8gVGhpcyBjb2FsZXNjZXMgYWRqYWNlbnQgJiBvdmVybGFwcGluZyBjaHVua3MgdG8gbWluaW1pemUgZmV0Y2hlcy5cbi8vIEl0IGFsc28gYXBwbGllcyB0aGUgXCJsaW5lYXIgb3B0aW1pemF0aW9uXCIsIHdoaWNoIGNhbiBncmVhdGx5IHJlZHVjZSB0aGVcbi8vIG51bWJlciBvZiBuZXR3b3JrIGZldGNoZXMgbmVlZGVkIHRvIGZ1bGZpbGwgYSByZXF1ZXN0LlxuZnVuY3Rpb24gb3B0aW1pemVDaHVua0xpc3QoY2h1bmtMaXN0OiBDaHVua1tdLCBtaW5pbXVtT2Zmc2V0OiBWaXJ0dWFsT2Zmc2V0KTogQ2h1bmtbXSB7XG4gIGNodW5rTGlzdC5zb3J0KChhLCBiKSA9PiB7XG4gICAgdmFyIHJlc3VsdCA9IGEuY2h1bmtfYmVnLmNvbXBhcmVUbyhiLmNodW5rX2JlZyk7XG4gICAgaWYgKHJlc3VsdCA9PT0gMCkge1xuICAgICAgcmVzdWx0ID0gYS5jaHVua19lbmQuY29tcGFyZVRvKGIuY2h1bmtfZW5kKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSk7XG5cbiAgdmFyIG5ld0NodW5rcyA9IFtdO1xuICBjaHVua0xpc3QuZm9yRWFjaChjaHVuayA9PiB7XG4gICAgaWYgKGNodW5rLmNodW5rX2VuZC5pc0xlc3NUaGFuKG1pbmltdW1PZmZzZXQpKSB7XG4gICAgICByZXR1cm47ICAvLyBsaW5lYXIgaW5kZXggb3B0aW1pemF0aW9uXG4gICAgfVxuXG4gICAgaWYgKG5ld0NodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICAgIG5ld0NodW5rcy5wdXNoKGNodW5rKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbGFzdENodW5rID0gbmV3Q2h1bmtzW25ld0NodW5rcy5sZW5ndGggLSAxXTtcbiAgICBpZiAoIWRvQ2h1bmtzT3ZlcmxhcChsYXN0Q2h1bmssIGNodW5rKSAmJlxuICAgICAgICAhYXJlQ2h1bmtzQWRqYWNlbnQobGFzdENodW5rLCBjaHVuaykpIHtcbiAgICAgIG5ld0NodW5rcy5wdXNoKGNodW5rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGxhc3RDaHVuay5jaHVua19lbmQuaXNMZXNzVGhhbihjaHVuay5jaHVua19lbmQpKSB7XG4gICAgICAgIGxhc3RDaHVuay5jaHVua19lbmQgPSBjaHVuay5jaHVua19lbmQ7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gbmV3Q2h1bmtzO1xufVxuXG4vLyBUaGlzIHZlcnNpb24gb2YgQmFpRmlsZSBpcyBub3QgY29tcGxldGVseSBpbW1lZGlhdGUsIGJ1dCBpdCBkb2VzIGd1YXJhbnRlZVxuLy8gdGhhdCB0aGUgaW5kZXggY2h1bmtzIGFyZSBhdmFpbGFibGUuXG5jbGFzcyBJbW1lZGlhdGVCYWlGaWxlIHtcbiAgYnVmZmVyOiA/QXJyYXlCdWZmZXI7XG4gIHJlbW90ZUZpbGU6IFJlbW90ZUZpbGU7XG4gIGluZGV4Q2h1bmtzOiBPYmplY3Q7XG4gIGluZGV4Q2FjaGU6IFEuUHJvbWlzZTxPYmplY3Q+W107ICAvLyByZWYgSUQgLT4gcGFyc2VkIEJhaUluZGV4XG4gIGludGVydmFsc0NhY2hlOiBBcnJheTw/VmlydHVhbE9mZnNldFtdPjsgIC8vIHJlZiBJRCAtPiBsaW5lYXIgaW5kZXhcblxuICBjb25zdHJ1Y3RvcihidWZmZXI6ID9BcnJheUJ1ZmZlciwgcmVtb3RlRmlsZTogUmVtb3RlRmlsZSwgaW5kZXhDaHVua3M/OiBPYmplY3QpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuICAgIGlmIChidWZmZXIpIHtcbiAgICAgIHRoaXMuaW5kZXhDaHVua3MgPSBjb21wdXRlSW5kZXhDaHVua3MoYnVmZmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGluZGV4Q2h1bmtzKSB7XG4gICAgICAgIHRoaXMuaW5kZXhDaHVua3MgPSBpbmRleENodW5rcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93ICdXaXRob3V0IGluZGV4IGNodW5rcywgdGhlIGVudGlyZSBCQUkgYnVmZmVyIG11c3QgYmUgbG9hZGVkJztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pbmRleENhY2hlID0gbmV3IEFycmF5KHRoaXMuaW5kZXhDaHVua3MuY2h1bmtzLmxlbmd0aCk7XG4gICAgdGhpcy5pbnRlcnZhbHNDYWNoZSA9IG5ldyBBcnJheSh0aGlzLmluZGV4Q2h1bmtzLmNodW5rcy5sZW5ndGgpO1xuICB9XG5cbiAgZ2V0Q2h1bmtzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBRLlByb21pc2U8Q2h1bmtbXT4ge1xuICAgIGlmIChyYW5nZS5jb250aWcgPCAwIHx8IHJhbmdlLmNvbnRpZyA+IHRoaXMuaW5kZXhDaHVua3MuY2h1bmtzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFEucmVqZWN0KGBJbnZhbGlkIGNvbnRpZyAke3JhbmdlLmNvbnRpZ31gKTtcbiAgICB9XG5cbiAgICB2YXIgYmlucyA9IHJlZzJiaW5zKHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSArIDEpO1xuXG4gICAgcmV0dXJuIHRoaXMuaW5kZXhGb3JDb250aWcocmFuZ2UuY29udGlnKS50aGVuKGNvbnRpZ0luZGV4ID0+IHtcbiAgICAgIHZhciBjaHVua3MgPSBfLmNoYWluKGNvbnRpZ0luZGV4LmJpbnMpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYiA9PiBiaW5zLmluZGV4T2YoYi5iaW4pID49IDApXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYiA9PiByZWFkQ2h1bmtzKGIuY2h1bmtzKSlcbiAgICAgICAgICAgICAgICAgICAgLmZsYXR0ZW4oKVxuICAgICAgICAgICAgICAgICAgICAudmFsdWUoKTtcblxuICAgICAgdmFyIGxpbmVhckluZGV4ID0gdGhpcy5nZXRJbnRlcnZhbHMoY29udGlnSW5kZXguaW50ZXJ2YWxzLCByYW5nZS5jb250aWcpO1xuICAgICAgdmFyIHN0YXJ0SWR4ID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihyYW5nZS5zdGFydCgpIC8gMTYzODQpKTtcbiAgICAgIHZhciBtaW5pbXVtT2Zmc2V0ID0gbGluZWFySW5kZXhbc3RhcnRJZHhdO1xuXG4gICAgICBjaHVua3MgPSBvcHRpbWl6ZUNodW5rTGlzdChjaHVua3MsIG1pbmltdW1PZmZzZXQpO1xuXG4gICAgICByZXR1cm4gY2h1bmtzO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gUmV0cmlldmUgYW5kIHBhcnNlIHRoZSBpbmRleCBmb3IgYSBwYXJ0aWN1bGFyIGNvbnRpZy5cbiAgaW5kZXhGb3JDb250aWcoY29udGlnOiBudW1iZXIpOiBRLlByb21pc2U8T2JqZWN0PiB7XG4gICAgdmFyIHYgPSB0aGlzLmluZGV4Q2FjaGVbY29udGlnXTtcbiAgICBpZiAodikge1xuICAgICAgcmV0dXJuIHY7XG4gICAgfVxuXG4gICAgdmFyIFtzdGFydCwgc3RvcF0gPSB0aGlzLmluZGV4Q2h1bmtzLmNodW5rc1tjb250aWddO1xuICAgIHRoaXMuaW5kZXhDYWNoZVtjb250aWddID0gdGhpcy5nZXRTbGljZShzdGFydCwgc3RvcCkudGhlbihidWZmZXIgPT4ge1xuICAgICAgdmFyIGpiID0gbmV3IGpCaW5hcnkoYnVmZmVyLCBiYW1UeXBlcy5UWVBFX1NFVCk7XG4gICAgICByZXR1cm4gamIucmVhZCgnQmFpSW5kZXgnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5pbmRleENhY2hlW2NvbnRpZ107XG4gIH1cblxuICBnZXRTbGljZShzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICBpZiAodGhpcy5idWZmZXIpIHtcbiAgICAgIHJldHVybiBRLndoZW4odGhpcy5idWZmZXIuc2xpY2Uoc3RhcnQsIHN0b3ApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRmlsZS5nZXRCeXRlcyhzdGFydCwgc3RvcCAtIHN0YXJ0ICsgMSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2FjaGVkIHdyYXBwZXIgYXJvdW5kIHJlYWRJbnRlcnZhbHMoKVxuICBnZXRJbnRlcnZhbHMoYmxvYjogVWludDhBcnJheSwgcmVmSWQ6IG51bWJlcik6IFZpcnR1YWxPZmZzZXRbXSB7XG4gICAgdmFyIGxpbmVhckluZGV4ID0gdGhpcy5pbnRlcnZhbHNDYWNoZVtyZWZJZF07XG4gICAgaWYgKGxpbmVhckluZGV4KSB7XG4gICAgICByZXR1cm4gbGluZWFySW5kZXg7XG4gICAgfVxuICAgIGxpbmVhckluZGV4ID0gcmVhZEludGVydmFscyhibG9iKTtcbiAgICB0aGlzLmludGVydmFsc0NhY2hlW3JlZklkXSA9IGxpbmVhckluZGV4O1xuICAgIHJldHVybiBsaW5lYXJJbmRleDtcbiAgfVxufVxuXG5cbmNsYXNzIEJhaUZpbGUge1xuICByZW1vdGVGaWxlOiBSZW1vdGVGaWxlO1xuICBpbW1lZGlhdGU6IFEuUHJvbWlzZTxJbW1lZGlhdGVCYWlGaWxlPjtcblxuICBjb25zdHJ1Y3RvcihyZW1vdGVGaWxlOiBSZW1vdGVGaWxlLCBpbmRleENodW5rcz86IE9iamVjdCkge1xuICAgIHRoaXMucmVtb3RlRmlsZSA9IHJlbW90ZUZpbGU7XG4gICAgaWYgKGluZGV4Q2h1bmtzKSB7XG4gICAgICB0aGlzLmltbWVkaWF0ZSA9IFEud2hlbihuZXcgSW1tZWRpYXRlQmFpRmlsZShudWxsLCByZW1vdGVGaWxlLCBpbmRleENodW5rcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmltbWVkaWF0ZSA9IHJlbW90ZUZpbGUuZ2V0QWxsKCkudGhlbihidWYgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IEltbWVkaWF0ZUJhaUZpbGUoYnVmLCByZW1vdGVGaWxlLCBpbmRleENodW5rcyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5pbW1lZGlhdGUuZG9uZSgpO1xuICB9XG5cbiAgZ2V0Q2h1bmtzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBRLlByb21pc2U8Q2h1bmtbXT4ge1xuICAgIHJldHVybiB0aGlzLmltbWVkaWF0ZS50aGVuKGltbWVkaWF0ZSA9PiB7XG4gICAgICByZXR1cm4gaW1tZWRpYXRlLmdldENodW5rc0ZvckludGVydmFsKHJhbmdlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEhlYWRlclNpemUoKTogUS5Qcm9taXNlPG51bWJlcj4ge1xuICAgIHJldHVybiB0aGlzLmltbWVkaWF0ZS50aGVuKGltbWVkaWF0ZSA9PiB7XG4gICAgICByZXR1cm4gaW1tZWRpYXRlLmluZGV4Q2h1bmtzLm1pbkJsb2NrSW5kZXg7XG4gICAgfSk7XG4gIH1cbn1cblxuXG4vLyBUaGVzZSBmdW5jdGlvbnMgY29tZSBkaXJlY3RseSBmcm9tIHRoZSBTQU0gcGFwZXJcbi8vIFNlZSBodHRwczovL3NhbXRvb2xzLmdpdGh1Yi5pby9odHMtc3BlY3MvU0FNdjEucGRmIHNlY3Rpb24gNS4zXG5cbi8vIGNhbGN1bGF0ZSB0aGUgbGlzdCBvZiBiaW5zIHRoYXQgbWF5IG92ZXJsYXAgd2l0aCByZWdpb24gW2JlZyxlbmQpICh6ZXJvLWJhc2VkKVxuZnVuY3Rpb24gcmVnMmJpbnMoYmVnLCBlbmQpIHtcbiAgdmFyIGssIGxpc3QgPSBbXTtcbiAgLS1lbmQ7XG4gIGxpc3QucHVzaCgwKTtcbiAgZm9yIChrID0gICAgMSArIChiZWc+PjI2KTsgayA8PSAgICAxICsgKGVuZD4+MjYpOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gICAgOSArIChiZWc+PjIzKTsgayA8PSAgICA5ICsgKGVuZD4+MjMpOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gICA3MyArIChiZWc+PjIwKTsgayA8PSAgIDczICsgKGVuZD4+MjApOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gIDU4NSArIChiZWc+PjE3KTsgayA8PSAgNTg1ICsgKGVuZD4+MTcpOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gNDY4MSArIChiZWc+PjE0KTsgayA8PSA0NjgxICsgKGVuZD4+MTQpOyArK2spIGxpc3QucHVzaChrKTtcbiAgcmV0dXJuIGxpc3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmFpRmlsZTtcbiIsIi8qKlxuICogVG9vbHMgZm9yIHBhcnNpbmcgQkFNIGZpbGVzLlxuICogU2VlIGh0dHBzOi8vc2FtdG9vbHMuZ2l0aHViLmlvL2h0cy1zcGVjcy9TQU12MS5wZGZcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcbmltcG9ydCB0eXBlIHtDaHVuaywgSW5mbGF0ZWRCbG9ja30gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcbmltcG9ydCBqRGF0YVZpZXcgZnJvbSAnamRhdGF2aWV3JztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5cbmltcG9ydCBiYW1UeXBlcyBmcm9tICcuL2Zvcm1hdHMvYmFtVHlwZXMnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBCYWlGaWxlIGZyb20gJy4vYmFpJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgVmlydHVhbE9mZnNldCBmcm9tICcuL1ZpcnR1YWxPZmZzZXQnO1xuaW1wb3J0IFNhbVJlYWQgZnJvbSAnLi9TYW1SZWFkJztcblxuXG4vKipcbiAqIFRoZSAnY29udGFpbmVkJyBwYXJhbWV0ZXIgY29udHJvbHMgd2hldGhlciB0aGUgYWxpZ25tZW50cyBtdXN0IGJlIGZ1bGx5XG4gKiBjb250YWluZWQgd2l0aGluIHRoZSByYW5nZSwgb3IgbmVlZCBvbmx5IG92ZXJsYXAgaXQuXG4gKi9cbmZ1bmN0aW9uIGlzQWxpZ25tZW50SW5SYW5nZShyZWFkOiBTYW1SZWFkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeFJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lZDogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAvLyBUT0RPOiBVc2UgY2lnYXIuZ2V0UmVmZXJlbmNlTGVuZ3RoKCkgaW5zdGVhZCBvZiBsX3NlcSwgbGlrZSBodHNqZGsuIFxuICB2YXIgcmVhZFJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHJlYWQucmVmSUQsIHJlYWQucG9zLCByZWFkLnBvcyArIHJlYWQubF9zZXEgLSAxKTtcbiAgaWYgKGNvbnRhaW5lZCkge1xuICAgIHJldHVybiBpZHhSYW5nZS5jb250YWluc0ludGVydmFsKHJlYWRSYW5nZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJlYWRSYW5nZS5pbnRlcnNlY3RzKGlkeFJhbmdlKTtcbiAgfVxufVxuXG5cbnZhciBrTWF4RmV0Y2ggPSA2NTUzNiAqIDI7XG5cbi8vIFJlYWQgYSBzaW5nbGUgYWxpZ25tZW50XG5mdW5jdGlvbiByZWFkQWxpZ25tZW50KHZpZXc6IGpEYXRhVmlldywgcG9zOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogVmlydHVhbE9mZnNldCwgcmVmTmFtZTogc3RyaW5nKSB7XG4gIHZhciByZWFkTGVuZ3RoID0gdmlldy5nZXRJbnQzMihwb3MpO1xuICBwb3MgKz0gNDtcblxuICBpZiAocG9zICsgcmVhZExlbmd0aCA+IHZpZXcuYnl0ZUxlbmd0aCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIHJlYWRTbGljZSA9IHZpZXcuYnVmZmVyLnNsaWNlKHBvcywgcG9zICsgcmVhZExlbmd0aCk7XG5cbiAgdmFyIHJlYWQgPSBuZXcgU2FtUmVhZChyZWFkU2xpY2UsIG9mZnNldC5jbG9uZSgpLCByZWZOYW1lKTtcbiAgcmV0dXJuIHtcbiAgICByZWFkLFxuICAgIHJlYWRMZW5ndGg6IDQgKyByZWFkTGVuZ3RoXG4gIH07XG59XG5cbi8vIFRoaXMgdHJhY2tzIGhvdyBtYW55IGJ5dGVzIHdlcmUgcmVhZC5cbmZ1bmN0aW9uIHJlYWRBbGlnbm1lbnRzVG9FbmQoYnVmZmVyOiBBcnJheUJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmTmFtZTogc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhSYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVkOiBib29sZWFuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IFZpcnR1YWxPZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrczogSW5mbGF0ZWRCbG9ja1tdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnRzOiBTYW1SZWFkW10pIHtcbiAgLy8gV2UgdXNlIGpEYXRhVmlldyBhbmQgQXJyYXlCdWZmZXIgZGlyZWN0bHkgZm9yIGEgc3BlZWR1cCBvdmVyIGpCaW5hcnkuXG4gIC8vIFRoaXMgcGFyc2VzIHJlYWRzIH4yLTN4IGZhc3RlciB0aGFuIHVzaW5nIFRoaW5BbGlnbm1lbnQgZGlyZWN0bHkuXG4gIHZhciBqdiA9IG5ldyBqRGF0YVZpZXcoYnVmZmVyLCAwLCBidWZmZXIuYnl0ZUxlbmd0aCwgdHJ1ZSAvKiBsaXR0bGUgZW5kaWFuICovKTtcbiAgdmFyIHNob3VsZEFib3J0ID0gZmFsc2U7XG4gIHZhciBwb3MgPSAwO1xuICBvZmZzZXQgPSBvZmZzZXQuY2xvbmUoKTtcbiAgdmFyIGJsb2NrSW5kZXggPSAwO1xuICB0cnkge1xuICAgIHdoaWxlIChwb3MgPCBidWZmZXIuYnl0ZUxlbmd0aCkge1xuICAgICAgdmFyIHJlYWREYXRhID0gcmVhZEFsaWdubWVudChqdiwgcG9zLCBvZmZzZXQsIHJlZk5hbWUpO1xuICAgICAgaWYgKCFyZWFkRGF0YSkgYnJlYWs7XG5cbiAgICAgIHZhciB7cmVhZCwgcmVhZExlbmd0aH0gPSByZWFkRGF0YTtcbiAgICAgIHBvcyArPSByZWFkTGVuZ3RoO1xuICAgICAgaWYgKGlzQWxpZ25tZW50SW5SYW5nZShyZWFkLCBpZHhSYW5nZSwgY29udGFpbmVkKSkge1xuICAgICAgICBhbGlnbm1lbnRzLnB1c2gocmVhZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkdmFuY2UgdGhlIFZpcnR1YWxPZmZzZXQgdG8gcmVmbGVjdCB0aGUgbmV3IHBvc2l0aW9uXG4gICAgICBvZmZzZXQudW9mZnNldCArPSByZWFkTGVuZ3RoO1xuICAgICAgdmFyIGJ1ZkxlbiA9IGJsb2Nrc1tibG9ja0luZGV4XS5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgIGlmIChvZmZzZXQudW9mZnNldCA+PSBidWZMZW4pIHtcbiAgICAgICAgb2Zmc2V0LnVvZmZzZXQgLT0gYnVmTGVuO1xuICAgICAgICBvZmZzZXQuY29mZnNldCArPSBibG9ja3NbYmxvY2tJbmRleF0uY29tcHJlc3NlZExlbmd0aDtcbiAgICAgICAgYmxvY2tJbmRleCsrO1xuICAgICAgfVxuXG4gICAgICAvLyBPcHRpbWl6YXRpb246IGlmIHRoZSBsYXN0IGFsaWdubWVudCBzdGFydGVkIGFmdGVyIHRoZSByZXF1ZXN0ZWQgcmFuZ2UsXG4gICAgICAvLyB0aGVuIG5vIG90aGVyIGNodW5rcyBjYW4gcG9zc2libHkgY29udGFpbiBtYXRjaGluZyBhbGlnbm1lbnRzLlxuICAgICAgLy8gVE9ETzogdXNlIGNvbnRpZ0ludGVydmFsLmlzQWZ0ZXJJbnRlcnZhbCB3aGVuIHRoYXQncyBwb3NzaWJsZS5cbiAgICAgIHZhciByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChyZWFkLnJlZklELCByZWFkLnBvcywgcmVhZC5wb3MgKyAxKTtcbiAgICAgIGlmIChyYW5nZS5jb250aWcgPiBpZHhSYW5nZS5jb250aWcgfHxcbiAgICAgICAgICAocmFuZ2UuY29udGlnID09IGlkeFJhbmdlLmNvbnRpZyAmJiByYW5nZS5zdGFydCgpID4gaWR4UmFuZ2Uuc3RvcCgpKSkge1xuICAgICAgICBzaG91bGRBYm9ydCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBDb2RlIGdldHMgaGVyZSBpZiB0aGUgY29tcHJlc3Npb24gYmxvY2sgZW5kZWQgZXhhY3RseSBhdCB0aGUgZW5kIG9mXG4gICAgLy8gYW4gQWxpZ25tZW50LlxuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gUGFydGlhbCByZWNvcmRcbiAgICBpZiAoIShlIGluc3RhbmNlb2YgUmFuZ2VFcnJvcikpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzaG91bGRBYm9ydCxcbiAgICBuZXh0T2Zmc2V0OiBvZmZzZXRcbiAgfTtcbn1cblxuLy8gRmV0Y2ggYWxpZ25tZW50cyBmcm9tIHRoZSByZW1vdGUgc291cmNlIGF0IHRoZSBsb2NhdGlvbnMgc3BlY2lmaWVkIGJ5IENodW5rcy5cbi8vIFRoaXMgY2FuIHBvdGVudGlhbGx5IHJlc3VsdCBpbiBtYW55IG5ldHdvcmsgcmVxdWVzdHMuXG4vLyBUaGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBmdWxmaWxsZWQgb25jZSBpdCBjYW4gYmUgcHJvdmVkIHRoYXQgbm8gbW9yZVxuLy8gYWxpZ25tZW50cyBuZWVkIHRvIGJlIGZldGNoZWQuXG5mdW5jdGlvbiBmZXRjaEFsaWdubWVudHMocmVtb3RlRmlsZTogUmVtb3RlRmlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICByZWZOYW1lOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgaWR4UmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVkOiBib29sZWFuLFxuICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rczogQ2h1bmtbXSk6IFEuUHJvbWlzZTxTYW1SZWFkW10+IHtcblxuICB2YXIgbnVtUmVxdWVzdHMgPSAwLFxuICAgICAgYWxpZ25tZW50cyA9IFtdLFxuICAgICAgZGVmZXJyZWQgPSBRLmRlZmVyKCk7XG5cbiAgZnVuY3Rpb24gZmV0Y2goY2h1bmtzKSB7XG4gICAgaWYgKGNodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoYWxpZ25tZW50cyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTmV2ZXIgZmV0Y2ggbW9yZSB0aGFuIDEyOGsgYXQgYSB0aW1lIC0tIHRoaXMgcmVkdWNlcyBjb250ZW50aW9uIG9uIHRoZVxuICAgIC8vIG1haW4gdGhyZWFkIGFuZCBjYW4gYXZvaWQgc2VuZGluZyB1bm5lY2Vzc2FyeSBieXRlcyBvdmVyIHRoZSBuZXR3b3JrLlxuICAgIHZhciBjaHVuayA9IGNodW5rc1swXSxcbiAgICAgICAgY2h1bmtfYmVnID0gY2h1bmsuY2h1bmtfYmVnLmNvZmZzZXQsXG4gICAgICAgIGNodW5rX2VuZCA9IGNodW5rLmNodW5rX2VuZC5jb2Zmc2V0O1xuICAgIHZhciBieXRlc1RvRmV0Y2ggPSBNYXRoLm1pbihrTWF4RmV0Y2gsIChjaHVua19lbmQgKyA2NTUzNikgLSBjaHVua19iZWcpO1xuICAgIHJlbW90ZUZpbGUuZ2V0Qnl0ZXMoY2h1bmtfYmVnLCBieXRlc1RvRmV0Y2gpLnRoZW4oYnVmZmVyID0+IHtcbiAgICAgIG51bVJlcXVlc3RzKys7XG4gICAgICBkZWZlcnJlZC5ub3RpZnkoe251bVJlcXVlc3RzfSk7XG4gICAgICB2YXIgY2FjaGVLZXkgPSB7XG4gICAgICAgIGZpbGVuYW1lOiByZW1vdGVGaWxlLnVybCxcbiAgICAgICAgaW5pdGlhbE9mZnNldDogY2h1bmtfYmVnXG4gICAgICB9O1xuICAgICAgdmFyIGJsb2NrcyA9IHV0aWxzLmluZmxhdGVDb25jYXRlbmF0ZWRHemlwKGJ1ZmZlciwgY2h1bmtfZW5kIC0gY2h1bmtfYmVnLCBjYWNoZUtleSk7XG5cbiAgICAgIC8vIElmIHRoZSBjaHVuayBoYXNuJ3QgYmVlbiBleGhhdXN0ZWQsIHJlc3VtZSBpdCBhdCBhbiBhcHByb3ByaWF0ZSBwbGFjZS5cbiAgICAgIC8vIFRoZSBsYXN0IGJsb2NrIG5lZWRzIHRvIGJlIHJlLXJlYWQsIHNpbmNlIGl0IG1heSBub3QgaGF2ZSBiZWVuIGV4aGF1c3RlZC5cbiAgICAgIHZhciBsYXN0QmxvY2sgPSBibG9ja3NbYmxvY2tzLmxlbmd0aCAtIDFdLFxuICAgICAgICAgIGxhc3RCeXRlID0gY2h1bmtfYmVnICsgbGFzdEJsb2NrLm9mZnNldCAtIDEsXG4gICAgICAgICAgbmV3Q2h1bmsgPSBudWxsO1xuICAgICAgaWYgKGJsb2Nrcy5sZW5ndGggPiAxICYmIGxhc3RCeXRlIDwgY2h1bmtfZW5kKSB7XG4gICAgICAgIG5ld0NodW5rID0ge1xuICAgICAgICAgIGNodW5rX2JlZzogbmV3IFZpcnR1YWxPZmZzZXQobGFzdEJ5dGUgKyAxLCAwKSxcbiAgICAgICAgICBjaHVua19lbmQ6IGNodW5rLmNodW5rX2VuZFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB2YXIgYnVmZmVycyA9IGJsb2Nrcy5tYXAoeCA9PiB4LmJ1ZmZlcik7XG4gICAgICBidWZmZXJzWzBdID0gYnVmZmVyc1swXS5zbGljZShjaHVuay5jaHVua19iZWcudW9mZnNldCk7XG4gICAgICB2YXIgZGVjb21wID0gdXRpbHMuY29uY2F0QXJyYXlCdWZmZXJzKGJ1ZmZlcnMpO1xuICAgICAgaWYgKGRlY29tcC5ieXRlTGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIge3Nob3VsZEFib3J0LCBuZXh0T2Zmc2V0fSA9XG4gICAgICAgICAgICByZWFkQWxpZ25tZW50c1RvRW5kKGRlY29tcCwgcmVmTmFtZSwgaWR4UmFuZ2UsIGNvbnRhaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuY2h1bmtfYmVnLCBibG9ja3MsIGFsaWdubWVudHMpO1xuICAgICAgICBpZiAoc2hvdWxkQWJvcnQpIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGFsaWdubWVudHMpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3Q2h1bmspIHtcbiAgICAgICAgICBuZXdDaHVuay5jaHVua19iZWcgPSBuZXh0T2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdDaHVuayA9IG51bGw7ICAvLyBUaGlzIGlzIG1vc3QgbGlrZWx5IEVPRlxuICAgICAgfVxuXG4gICAgICBmZXRjaCgobmV3Q2h1bmsgPyBbbmV3Q2h1bmtdIDogW10pLmNvbmNhdChfLnJlc3QoY2h1bmtzKSkpO1xuICAgIH0pO1xuICB9XG5cbiAgZmV0Y2goY2h1bmtzKTtcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbiBcbmNsYXNzIEJhbSB7XG4gIGluZGV4OiA/QmFpRmlsZTtcbiAgaGVhZGVyOiBRLlByb21pc2U8T2JqZWN0PjtcbiAgcmVtb3RlRmlsZTogUmVtb3RlRmlsZTtcbiAgaGFzSW5kZXhDaHVua3M6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IocmVtb3RlRmlsZTogUmVtb3RlRmlsZSxcbiAgICAgICAgICAgICAgcmVtb3RlSW5kZXhGaWxlPzogUmVtb3RlRmlsZSxcbiAgICAgICAgICAgICAgaW5kZXhDaHVua3M/OiBPYmplY3QpIHtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuICAgIHRoaXMuaW5kZXggPSByZW1vdGVJbmRleEZpbGUgPyBuZXcgQmFpRmlsZShyZW1vdGVJbmRleEZpbGUsIGluZGV4Q2h1bmtzKSA6IG51bGw7XG4gICAgdGhpcy5oYXNJbmRleENodW5rcyA9ICEhaW5kZXhDaHVua3M7XG5cbiAgICB2YXIgc2l6ZVByb21pc2UgPSB0aGlzLmluZGV4ID8gdGhpcy5pbmRleC5nZXRIZWFkZXJTaXplKCkgOiBRLndoZW4oMiAqIDY1NTM1KTtcbiAgICB0aGlzLmhlYWRlciA9IHNpemVQcm9taXNlLnRoZW4oc2l6ZSA9PiB7XG4gICAgICB2YXIgZGVmID0gUS5kZWZlcigpO1xuICAgICAgLy8gVGhpcyBoYXBwZW5zIGluIHRoZSBuZXh0IGV2ZW50IGxvb3AgdG8gZ2l2ZSBsaXN0ZW5lcnMgYSBjaGFuY2UgdG8gcmVnaXN0ZXIuXG4gICAgICBRLndoZW4oKS50aGVuKCgpID0+IHsgZGVmLm5vdGlmeSh7c3RhdHVzOiAnRmV0Y2hpbmcgQkFNIGhlYWRlcid9KTsgfSk7XG4gICAgICB1dGlscy5waXBlUHJvbWlzZShcbiAgICAgICAgICBkZWYsXG4gICAgICAgICAgdGhpcy5yZW1vdGVGaWxlLmdldEJ5dGVzKDAsIHNpemUpLnRoZW4oYnVmID0+IHtcbiAgICAgICAgICAgIHZhciBkZWNvbXAgPSB1dGlscy5pbmZsYXRlR3ppcChidWYpO1xuICAgICAgICAgICAgdmFyIGpiID0gbmV3IGpCaW5hcnkoZGVjb21wLCBiYW1UeXBlcy5UWVBFX1NFVCk7XG4gICAgICAgICAgICByZXR1cm4gamIucmVhZCgnQmFtSGVhZGVyJyk7XG4gICAgICAgICAgfSkpO1xuICAgICAgcmV0dXJuIGRlZi5wcm9taXNlO1xuICAgIH0pO1xuICAgIHRoaXMuaGVhZGVyLmRvbmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgZW50aXJlIEJBTSBmaWxlIGZyb20gdGhlIHJlbW90ZSBzb3VyY2UgYW5kIHBhcnNlcyBpdC5cbiAgICogU2luY2UgQkFNIGZpbGVzIGNhbiBiZSBlbm9ybW91cyAoaHVuZHJlZHMgb2YgR0IpLCB0aGlzIGlzIG9ubHkgcmVjb21tZW5kZWRcbiAgICogZm9yIHNtYWxsIHRlc3QgaW5wdXRzLlxuICAgKi9cbiAgcmVhZEFsbCgpOiBRLlByb21pc2U8T2JqZWN0PiB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3RlRmlsZS5nZXRBbGwoKS50aGVuKGJ1ZiA9PiB7XG4gICAgICB2YXIgZGVjb21wID0gdXRpbHMuaW5mbGF0ZUd6aXAoYnVmKTtcbiAgICAgIHZhciBqYiA9IG5ldyBqQmluYXJ5KGRlY29tcCwgYmFtVHlwZXMuVFlQRV9TRVQpO1xuICAgICAgdmFyIG8gPSBqYi5yZWFkKCdCYW1GaWxlJyk7XG4gICAgICAvLyBEbyBzb21lIG1pbGQgcmUtc2hhcGluZy5cbiAgICAgIHZhciB2byA9IG5ldyBWaXJ0dWFsT2Zmc2V0KDAsIDApO1xuICAgICAgdmFyIHNsaWNlID0gZnVuY3Rpb24odTg6IFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHU4LmJ1ZmZlci5zbGljZSh1OC5ieXRlT2Zmc2V0LCB1OC5ieXRlT2Zmc2V0ICsgdTguYnl0ZUxlbmd0aCAtIDEpO1xuICAgICAgfTtcbiAgICAgIG8uYWxpZ25tZW50cyA9IG8uYWxpZ25tZW50cy5tYXAoeCA9PiB7XG4gICAgICAgIHZhciByID0gbmV3IFNhbVJlYWQoc2xpY2UoeC5jb250ZW50cyksIHZvLCAnJyk7XG4gICAgICAgIGlmIChyLnJlZklEICE9IC0xKSB7XG4gICAgICAgICAgci5yZWYgPSBvLmhlYWRlci5yZWZlcmVuY2VzW3IucmVmSURdLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHI7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBvO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGEgc2luZ2xlIHJlYWQgYXQgdGhlIGdpdmVuIFZpcnR1YWxPZmZzZXQuXG4gICAqIFRoaXMgaXMgaW5zYW5lbHkgaW5lZmZpY2llbnQgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBvdXRzaWRlIG9mIHRlc3RpbmcuXG4gICAqL1xuICByZWFkQXRPZmZzZXQob2Zmc2V0OiBWaXJ0dWFsT2Zmc2V0KTogUS5Qcm9taXNlPFNhbVJlYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdGVGaWxlLmdldEJ5dGVzKG9mZnNldC5jb2Zmc2V0LCBrTWF4RmV0Y2gpLnRoZW4oZ3ppcCA9PiB7XG4gICAgICB2YXIgYnVmID0gdXRpbHMuaW5mbGF0ZUd6aXAoZ3ppcCk7XG4gICAgICB2YXIganYgPSBuZXcgakRhdGFWaWV3KGJ1ZiwgMCwgYnVmLmJ5dGVMZW5ndGgsIHRydWUgLyogbGl0dGxlIGVuZGlhbiAqLyk7XG4gICAgICB2YXIgcmVhZERhdGEgPSByZWFkQWxpZ25tZW50KGp2LCBvZmZzZXQudW9mZnNldCwgb2Zmc2V0LCAnJyk7XG4gICAgICBpZiAoIXJlYWREYXRhKSB7XG4gICAgICAgIHRocm93IGBVbmFibGUgdG8gcmVhZCBhbGlnbm1lbnQgYXQgJHtvZmZzZXR9IGluICR7dGhpcy5yZW1vdGVGaWxlLnVybH1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQXR0YWNoIHRoZSBodW1hbi1yZWFkYWJsZSByZWYgbmFtZVxuICAgICAgICB2YXIgcmVhZCA9IHJlYWREYXRhLnJlYWQ7XG4gICAgICAgIHJldHVybiB0aGlzLmhlYWRlci50aGVuKGhlYWRlciA9PiB7XG4gICAgICAgICAgcmVhZC5yZWYgPSBoZWFkZXIucmVmZXJlbmNlc1tyZWFkLnJlZklEXS5uYW1lO1xuICAgICAgICAgIHJldHVybiByZWFkO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXAgYSBjb250aWcgbmFtZSB0byBhIGNvbnRpZyBpbmRleCBhbmQgY2Fub25pY2FsIG5hbWUuXG4gICAqL1xuICBnZXRDb250aWdJbmRleChjb250aWdOYW1lOiBzdHJpbmcpOiBRLlByb21pc2U8e2lkeDogbnVtYmVyOyBuYW1lOiBzdHJpbmd9PiB7XG4gICAgcmV0dXJuIHRoaXMuaGVhZGVyLnRoZW4oaGVhZGVyID0+IHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVhZGVyLnJlZmVyZW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5hbWUgPSBoZWFkZXIucmVmZXJlbmNlc1tpXS5uYW1lO1xuICAgICAgICBpZiAobmFtZSA9PSBjb250aWdOYW1lIHx8XG4gICAgICAgICAgICBuYW1lID09ICdjaHInICsgY29udGlnTmFtZSB8fFxuICAgICAgICAgICAgJ2NocicgKyBuYW1lID09IGNvbnRpZ05hbWUpIHtcbiAgICAgICAgICByZXR1cm4ge2lkeDogaSwgbmFtZTogbmFtZX07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IGBJbnZhbGlkIGNvbnRpZyBuYW1lOiAke2NvbnRpZ05hbWV9YDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhbGwgdGhlIGFsaWdubWVudHMgd2hpY2ggb3ZlcmxhcCBhIHJhbmdlLlxuICAgKiBUaGUgJ2NvbnRhaW5lZCcgcGFyYW1ldGVyIGNvbnRyb2xzIHdoZXRoZXIgdGhlIGFsaWdubWVudHMgbXVzdCBiZSBmdWxseVxuICAgKiBjb250YWluZWQgd2l0aGluIHRoZSByYW5nZSwgb3IgbmVlZCBvbmx5IG92ZXJsYXAgaXQuXG4gICAqL1xuICBnZXRBbGlnbm1lbnRzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiwgb3B0X2NvbnRhaW5lZD86IGJvb2xlYW4pOiBRLlByb21pc2U8U2FtUmVhZFtdPiB7XG4gICAgdmFyIGNvbnRhaW5lZCA9IG9wdF9jb250YWluZWQgfHwgZmFsc2U7XG4gICAgaWYgKCF0aGlzLmluZGV4KSB7XG4gICAgICB0aHJvdyAnUmFuZ2Ugc2VhcmNoZXMgYXJlIG9ubHkgc3VwcG9ydGVkIG9uIEJBTXMgd2l0aCBCQUkgaW5kaWNlcy4nO1xuICAgIH1cbiAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4O1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29udGlnSW5kZXgocmFuZ2UuY29udGlnKS50aGVuKCh7aWR4LCBuYW1lfSkgPT4ge1xuICAgICAgdmFyIGRlZiA9IFEuZGVmZXIoKTtcbiAgICAgIC8vIFRoaXMgaGFwcGVucyBpbiB0aGUgbmV4dCBldmVudCBsb29wIHRvIGdpdmUgbGlzdGVuZXJzIGEgY2hhbmNlIHRvIHJlZ2lzdGVyLlxuICAgICAgUS53aGVuKCkudGhlbigoKSA9PiB7IGRlZi5ub3RpZnkoe3N0YXR1czogJ0ZldGNoaW5nIEJBTSBpbmRleCd9KTsgfSk7XG5cbiAgICAgIHZhciBpZHhSYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChpZHgsIHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSk7XG5cbiAgICAgIHV0aWxzLnBpcGVQcm9taXNlKFxuICAgICAgICBkZWYsXG4gICAgICAgIGluZGV4LmdldENodW5rc0ZvckludGVydmFsKGlkeFJhbmdlKS50aGVuKGNodW5rcyA9PiB7XG4gICAgICAgICAgcmV0dXJuIGZldGNoQWxpZ25tZW50cyh0aGlzLnJlbW90ZUZpbGUsIG5hbWUsIGlkeFJhbmdlLCBjb250YWluZWQsIGNodW5rcyk7XG4gICAgICAgIH0pKTtcbiAgICAgIHJldHVybiBkZWYucHJvbWlzZTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmFtO1xuIiwiLyogQGZsb3cgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuXG5jbGFzcyBDb2RpbmdJbnRlcnZhbCBleHRlbmRzIEludGVydmFsIHtcbiAgaXNDb2Rpbmc6IGJvb2xlYW47XG4gIGNvbnN0cnVjdG9yKHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlciwgaXNDb2Rpbmc6IGJvb2xlYW4pIHtcbiAgICBzdXBlcihzdGFydCwgc3RvcCk7XG4gICAgdGhpcy5pc0NvZGluZyA9IGlzQ29kaW5nO1xuICB9XG59XG5cbi8qKlxuICogU3BsaXQgZXhvbnMgd2hpY2ggY3Jvc3MgdGhlIGNvZGluZy9ub24tY29kaW5nIGJvdW5kYXJ5IGludG8gcHVyZWx5IGNvZGluZyAmXG4gKiBub24tY29kaW5nIHBhcnRzLlxuICovXG5mdW5jdGlvbiBzcGxpdENvZGluZ0V4b25zKGV4b25zOiBJbnRlcnZhbFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RpbmdSZWdpb246IEludGVydmFsKTogQ29kaW5nSW50ZXJ2YWxbXSB7XG4gIHJldHVybiBfLmZsYXR0ZW4oZXhvbnMubWFwKGV4b24gPT4ge1xuICAgIC8vIFNwZWNpYWwgY2FzZTogdGhlIGNvZGluZyByZWdpb24gaXMgZW50aXJlbHkgY29udGFpbmVkIGJ5IHRoaXMgZXhvbi5cbiAgICBpZiAoZXhvbi5jb250YWluc0ludGVydmFsKGNvZGluZ1JlZ2lvbikpIHtcbiAgICAgIC8vIHNwbGl0IGludG8gdGhyZWUgcGFydHMuXG4gICAgICByZXR1cm4gW1xuICAgICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChleG9uLnN0YXJ0LCBjb2RpbmdSZWdpb24uc3RhcnQgLSAxLCBmYWxzZSksXG4gICAgICAgICAgbmV3IENvZGluZ0ludGVydmFsKGNvZGluZ1JlZ2lvbi5zdGFydCwgY29kaW5nUmVnaW9uLnN0b3AsIHRydWUpLFxuICAgICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChjb2RpbmdSZWdpb24uc3RvcCArIDEsIGV4b24uc3RvcCwgZmFsc2UpXG4gICAgICBdLmZpbHRlcihpbnRlcnZhbCA9PiBpbnRlcnZhbC5zdGFydCA8PSBpbnRlcnZhbC5zdG9wKTtcbiAgICB9XG5cbiAgICB2YXIgc3RhcnRJc0NvZGluZyA9IGNvZGluZ1JlZ2lvbi5jb250YWlucyhleG9uLnN0YXJ0KSxcbiAgICAgICAgc3RvcElzQ29kaW5nID0gY29kaW5nUmVnaW9uLmNvbnRhaW5zKGV4b24uc3RvcCk7XG4gICAgaWYgKHN0YXJ0SXNDb2RpbmcgPT0gc3RvcElzQ29kaW5nKSB7XG4gICAgICByZXR1cm4gW25ldyBDb2RpbmdJbnRlcnZhbChleG9uLnN0YXJ0LCBleG9uLnN0b3AsIHN0YXJ0SXNDb2RpbmcpXTtcbiAgICB9IGVsc2UgaWYgKHN0YXJ0SXNDb2RpbmcpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChleG9uLnN0YXJ0LCBjb2RpbmdSZWdpb24uc3RvcCwgdHJ1ZSksXG4gICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChjb2RpbmdSZWdpb24uc3RvcCArIDEsIGV4b24uc3RvcCwgZmFsc2UpXG4gICAgICBdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICBuZXcgQ29kaW5nSW50ZXJ2YWwoZXhvbi5zdGFydCwgY29kaW5nUmVnaW9uLnN0YXJ0IC0gMSwgZmFsc2UpLFxuICAgICAgICBuZXcgQ29kaW5nSW50ZXJ2YWwoY29kaW5nUmVnaW9uLnN0YXJ0LCBleG9uLnN0b3AsIHRydWUpXG4gICAgICBdO1xuICAgIH1cbiAgfSkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtzcGxpdENvZGluZ0V4b25zLCBDb2RpbmdJbnRlcnZhbH07XG4iLCIvKipcbiAqIEJpbmFyeSBmb3JtYXRzIGZvciBCQU0gZmlsZXMuXG4gKiBTZWUgaHR0cHM6Ly9zYW10b29scy5naXRodWIuaW8vaHRzLXNwZWNzL1NBTXYxLnBkZlxuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBqQmluYXJ5IGZyb20gJ2piaW5hcnknO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmltcG9ydCBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4uL1ZpcnR1YWxPZmZzZXQnO1xuaW1wb3J0IHtudWxsU3RyaW5nLCB1aW50NjRuYXRpdmV9IGZyb20gJy4vaGVscGVycyc7XG5cbnZhciBTRVFVRU5DRV9WQUxVRVMgPSBbJz0nLCAnQScsICdDJywgJ00nLCAnRycsICdSJywgJ1MnLCAnVicsICdUJywgJ1cnLCAnWScsICdIJywgJ0snLCAnRCcsICdCJywgJ04nXTtcbnZhciBDSUdBUl9PUFMgPSBbJ00nLCAnSScsICdEJywgJ04nLCAnUycsICdIJywgJ1AnLCAnPScsICdYJ107XG5cblxuLy8gQ29yZSBhbGlnbm1lbnQgZmllbGRzIHNoYXJlZCBiZXR3ZWVuIEJhbUFsaWdubWVudCBhbmQgVGhpbkJhbUFsaWdubWVudC5cbi8vIFRPRE86IGZpZ3VyZSBvdXQgd2h5IGpCaW5hcnkncyAnZXh0ZW5kJyB0eXBlIGRvZXNuJ3Qgd29yayB3aXRoIHRoaXMgaW4gVFlQRV9TRVQuXG52YXIgVGhpbkFsaWdubWVudCA9IHtcbiAgcmVmSUQ6ICdpbnQzMicsICAgICAgICAvLyAwXG4gIHBvczogJ2ludDMyJywgICAgICAgICAgLy8gNFxuICBsX3JlYWRfbmFtZTogJ3VpbnQ4JywgIC8vIDhcbiAgTUFQUTogJ3VpbnQ4JywgICAgICAgICAvLyA5XG4gIGJpbjogJ3VpbnQxNicsICAgICAgICAgLy8gMTBcbiAgbl9jaWdhcl9vcDogJ3VpbnQxNicsICAvLyAxMlxuICBGTEFHOiAndWludDE2JywgICAgICAgIC8vIDE0XG4gIGxfc2VxOiAnaW50MzInLCAgICAgICAgLy8gMTZcbiAgbmV4dF9yZWZJRDogJ2ludDMyJywgICAvLyAyMFxuICBuZXh0X3BvczogJ2ludDMyJywgICAgIC8vIDI0XG4gIHRsZW46ICdpbnQzMicgICAgICAgICAgLy8gMjhcbiAgLy8gbGVuZ3RoIG9mIGZpeGVkLXNpemUgaGVhZGVyID0gMzIgYnl0ZXNcbn07XG5cbnZhciBGbGFncyA9IHtcbiAgUkVBRF9QQUlSRUQ6IDB4MSxcbiAgUFJPUEVSX1BBSVI6IDB4MixcbiAgUkVBRF9VTk1BUFBFRDogMHg0LFxuICBNQVRFX1VOTUFQUEVEOiAweDgsXG4gIFJFQURfU1RSQU5EOiAweDEwLFxuICBNQVRFX1NUUkFORDogMHgyMCxcbiAgRklSU1RfT0ZfUEFJUjogMHg0MCxcbiAgU0VDT05EX09GX1BBSVI6IDB4ODAsXG4gIE5PVF9QUklNQVJZX0FMSUdOTUVOVDogMHgxMDAsXG4gIFJFQURfRkFJTFNfVkVORE9SX1FVQUxJVFlfQ0hFQ0s6IDB4MjAwLFxuICBEVVBMSUNBVEVfUkVBRDogMHg0MDAsXG4gIFNVUFBMRU1FTlRBUllfQUxJR05NRU5UOiAweDgwMFxufTtcblxudmFyIFRoaWNrQWxpZ25tZW50ID0gXy5leHRlbmQoe30sIFRoaW5BbGlnbm1lbnQsIHtcbiAgcmVhZF9uYW1lOiBbbnVsbFN0cmluZywgJ2xfcmVhZF9uYW1lJ10sXG4gIGNpZ2FyOiBbJ2FycmF5JywgJ0NpZ2FyT3AnLCAnbl9jaWdhcl9vcCddLFxuICBzZXE6IFsnRm91ckJpdFNlcXVlbmNlJywgJ2xfc2VxJ10sXG4gIHF1YWw6IFsnYXJyYXknLCAndWludDgnLCAnbF9zZXEnXSwgIC8vIDI1NSA9IHVua25vd25cbiAgYXV4aWxpYXJ5OiBbJ2FycmF5Jywge1xuICAgIHRhZzogWydzdHJpbmcnLCAyXSxcbiAgICB2YWxfdHlwZTogJ2NoYXInLFxuICAgIHZhbHVlOiBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnQicsIHtcbiAgICAgICAgICAgICB2YWxfdHlwZTogJ2NoYXInLFxuICAgICAgICAgICAgIG51bV92YWx1ZXM6ICdpbnQzMicsXG4gICAgICAgICAgICAgdmFsdWVzOiBbJ2FycmF5JywgJ0F1eGlsaWFyeVZhbHVlJywgJ251bV92YWx1ZXMnXVxuICAgICAgICAgICAgfSwgJ0F1eGlsaWFyeVZhbHVlJ11cbiAgfV0gIC8vIGdvZXMgdW50aWwgdGhlIGVuZCBvZiB0aGUgYmxvY2tcbn0pO1xuXG52YXIgVFlQRV9TRVQ6IGFueSA9IHtcbiAgJ2pCaW5hcnkubGl0dGxlRW5kaWFuJzogdHJ1ZSxcblxuICAnQmFtSGVhZGVyJzoge1xuICAgIF9tYWdpYzogWydjb25zdCcsIFsnc3RyaW5nJywgNF0sICdCQU1cXHUwMDAxJywgdHJ1ZV0sXG4gICAgbF90ZXh0OiAnaW50MzInLFxuICAgIHRleHQ6IFsnc3RyaW5nJywgJ2xfdGV4dCddLFxuICAgIG5fcmVmOiAnaW50MzInLFxuICAgIHJlZmVyZW5jZXM6IFsnYXJyYXknLCB7XG4gICAgICBsX25hbWU6ICdpbnQzMicsXG4gICAgICBuYW1lOiBbbnVsbFN0cmluZywgJ2xfbmFtZSddLFxuICAgICAgbF9yZWY6ICdpbnQzMidcbiAgICB9LCAnbl9yZWYnXVxuICB9LFxuXG4gICdCYW1BbGlnbm1lbnQnOiB7XG4gICAgYmxvY2tfc2l6ZTogJ2ludDMyJyxcbiAgICBjb250ZW50czogWydibG9iJywgJ2Jsb2NrX3NpemUnXVxuICB9LFxuXG4gIC8vIFRPRE86IG1ha2UgYSBcImNhc2VcIiBjb25zdHJ1Y3QgZm9yIGpCaW5hcnkgJiBpbXBsZW1lbnQgdGhlIHJlc3Qgb2YgdGhlc2UuXG4gICdBdXhpbGlhcnlWYWx1ZSc6XG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ0EnLCAnY2hhcicsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ2MnLCAnaW50OCcsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ0MnLCAndWludDgnLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdzJywgJ2ludDE2JyxcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnUycsICd1aW50MTYnLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdpJywgJ2ludDMyJyxcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnSScsICd1aW50MzInLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdmJywgJ2Zsb2F0MzInLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdaJywgJ3N0cmluZzAnLFxuICAgIC8vIFRPRE86ICdIJyA9IGJ5dGUgYXJyYXkgaW4gaGV4IGZvcm1hdFxuICAgIFsnc2tpcCcsIDBdXV1dXV1dXV0sXG4gIF0sXG5cbiAgLy8gXCJDSUdBUjogb3AgbGVuPDw0fG9wLiDigJhNSUROU0hQPVjigJnihpLigJgwMTIzNDU2NzjigJlcIlxuICAvLyBUT0RPOiBpdCBtYXkgYmUgcG9zc2libGUgdG8gcmVhZCB0aGlzIGRlY2xhcmF0aXZlbHkgd2l0aCBhIGJpdGZpZWxkIHR5cGUuXG4gICdDaWdhck9wJzogakJpbmFyeS5UZW1wbGF0ZSh7XG4gICAgYmFzZVR5cGU6ICd1aW50MzInLFxuICAgIHJlYWQoY29udGV4dCkge1xuICAgICAgdmFyIHYgPSB0aGlzLmJhc2VSZWFkKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsZW5ndGg6IHYgPj4gNCxcbiAgICAgICAgb3A6IENJR0FSX09QU1t2ICYgMHhmXVxuICAgICAgfTtcbiAgICB9XG4gIH0pLFxuXG4gIC8vIFwiNC1iaXQgZW5jb2RlZCByZWFkOiDigJg9QUNNR1JTVlRXWUhLREJO4oCZ4oaSIFswLCAxNV07IG90aGVyIGNoYXJhY3RlcnMgbWFwcGVkXG4gIC8vIHRvIOKAmE7igJk7IGhpZ2ggbnliYmxlIGZpcnN0ICgxc3QgYmFzZSBpbiB0aGUgaGlnaGVzdCA0LWJpdCBvZiB0aGUgMXN0IGJ5dGUpXCJcbiAgJ0ZvdXJCaXRTZXF1ZW5jZSc6IGpCaW5hcnkuVGVtcGxhdGUoe1xuICAgIHNldFBhcmFtcyhsZW5ndGhGaWVsZCkge1xuICAgICAgdGhpcy5sZW5ndGhGaWVsZCA9IGxlbmd0aEZpZWxkO1xuICAgICAgdmFyIG51bUJ5dGVzID0gY3R4ID0+IE1hdGguZmxvb3IoKCtjdHhbbGVuZ3RoRmllbGRdICsgMSkgLyAyKTtcbiAgICAgIHRoaXMuYmFzZVR5cGUgPSBbJ2FycmF5JywgJ3VpbnQ4JywgbnVtQnl0ZXNdO1xuICAgIH0sXG4gICAgcmVhZChjdHgpIHtcbiAgICAgIHZhciBudW1CYXNlcyA9ICtjdHhbdGhpcy5sZW5ndGhGaWVsZF07XG4gICAgICB2YXIgdmFscyA9IHRoaXMuYmFzZVJlYWQoKTtcbiAgICAgIHJldHVybiB2YWxzLm1hcCgoYiwgaSkgPT4ge1xuICAgICAgICByZXR1cm4gU0VRVUVOQ0VfVkFMVUVTW2IgPj4gNF0gK1xuICAgICAgICAgICAgICAgKDIgKiBpICsgMSA8IG51bUJhc2VzID8gU0VRVUVOQ0VfVkFMVUVTW2IgJiAweGZdIDogJycpO1xuICAgICAgfSkuam9pbignJyk7XG4gICAgfVxuICB9KSxcblxuICAnQmFtRmlsZSc6IHtcbiAgICBoZWFkZXI6ICdCYW1IZWFkZXInLFxuICAgIGFsaWdubWVudHM6IFsnYXJyYXknLCAnQmFtQWxpZ25tZW50J11cbiAgfSxcblxuICAvLyBCQUkgaW5kZXggZm9ybWF0c1xuICAvLyBTZWUgaHR0cHM6Ly9zYW10b29scy5naXRodWIuaW8vaHRzLXNwZWNzL1NBTXYxLnBkZlxuICAnVmlydHVhbE9mZnNldCc6IGpCaW5hcnkuVGVtcGxhdGUoe1xuICAgIGJhc2VUeXBlOiAndWludDY0JyxcbiAgICByZWFkKCkge1xuICAgICAgLy8gUXVvdGggSGVuZyBMaTogdTY0ID0gY29mZnNldDw8MTZ8dW9mZnNldFxuICAgICAgdmFyIHU2NCA9IHRoaXMuYmFzZVJlYWQoKTtcbiAgICAgIHJldHVybiBuZXcgVmlydHVhbE9mZnNldChcbiAgICAgICAgLy8gb2Zmc2V0IG9mIGJlZ2lubmluZyBvZiBnemlwIGJsb2NrIGluIHRoZSBjb21wcmVzc2VkIGZpbGUuXG4gICAgICAgIHU2NC5oaSAqIDY1NTM2ICsgKHU2NC5sbyA+Pj4gMTYpLFxuICAgICAgICAvLyBvZmZzZXQgb2YgZGF0YSB3aXRoaW4gdGhlIGRlY29tcHJlc3NlZCBibG9ja1xuICAgICAgICB1NjQubG8gJiAweGZmZmZcbiAgICAgICk7XG4gICAgfVxuICB9KSxcblxuICAnQ2h1bmtzQXJyYXknOiBbJ2FycmF5Jywge1xuICAgIGNodW5rX2JlZzogJ1ZpcnR1YWxPZmZzZXQnLFxuICAgIGNodW5rX2VuZDogJ1ZpcnR1YWxPZmZzZXQnXG4gIH1dLFxuXG4gICdJbnRlcnZhbHNBcnJheSc6IFsnYXJyYXknLCAnVmlydHVhbE9mZnNldCddLFxuXG4gICdCYWlJbmRleCc6IHtcbiAgICBuX2JpbjogJ2ludDMyJyxcbiAgICBiaW5zOiBbJ2FycmF5Jywge1xuICAgICAgYmluOiAndWludDMyJyxcbiAgICAgIG5fY2h1bms6ICdpbnQzMicsXG4gICAgICBjaHVua3M6IFsnYmxvYicsIGN0eCA9PiAxNiAqIGN0eC5uX2NodW5rXSxcbiAgICAgIC8vIFBhcnNpbmcgaXMgZGVmZXJyZWQgYXMgYSBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24uIFRoZSB0eXBlIGlzIHJlYWxseTpcbiAgICAgIC8vIGNodW5rczogWydhcnJheScsIHtcbiAgICAgIC8vICAgY2h1bmtfYmVnOiAnVmlydHVhbE9mZnNldCcsXG4gICAgICAvLyAgIGNodW5rX2VuZDogJ1ZpcnR1YWxPZmZzZXQnXG4gICAgICAvLyB9LCAnbl9jaHVuayddXG4gICAgfSwgJ25fYmluJ10sXG4gICAgbl9pbnR2OiAnaW50MzInLFxuICAgIGludGVydmFsczogWydibG9iJywgY3R4ID0+IDggKiBjdHgubl9pbnR2XVxuICAgIC8vIFBhcnNpbmcgaXMgZGVmZXJyZWQgYXMgYSBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24uIFRoZSB0eXBlIGlzIHJlYWxseTpcbiAgICAvLyBpbnRlcnZhbHM6IFsnYXJyYXknLCAnVmlydHVhbE9mZnNldCcsICduX2ludHYnXVxuICB9LFxuXG4gICdCYWlGaWxlJzoge1xuICAgIG1hZ2ljOiBbJ2NvbnN0JywgWydzdHJpbmcnLCA0XSwgJ0JBSVxcdTAwMDEnXSxcbiAgICBuX3JlZjogJ2ludDMyJyxcbiAgICBpbmRpY2VzOiBbJ2FycmF5JywgJ0JhaUluZGV4JywgJ25fcmVmJ10sXG4gICAgbl9ub19jb29yOiB1aW50NjRuYXRpdmUgIC8vIHNwZWMgc2F5cyBvcHRpb25hbCwgYnV0IGl0J3MgYWx3YXlzIHRoZXJlLlxuICB9XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0ge1RZUEVfU0VULCBUaGluQWxpZ25tZW50LCBUaGlja0FsaWdubWVudCwgRmxhZ3N9O1xuIiwiLyoqXG4gKiBCQkkgaXMgdGhlIHNoYXJlZCBzdHJ1Y3R1cmUgYmV0d2VlbiBiaWdCZWQgYW5kIGJpZ1dpZy5cbiAqIFRoZXNlIHN0cnVjdHVyZXMgYXJlIGJhc2VkIG9uIFVDU0MncyBzcmMvaW5jL2JiaUZpbGUuaFxuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7dHlwZUF0T2Zmc2V0fSBmcm9tICcuL2hlbHBlcnMnO1xuXG52YXIgVFlQRV9TRVQgPSB7XG4gICdqQmluYXJ5LmxpdHRsZUVuZGlhbic6IHRydWUsXG5cbiAgJ0hlYWRlcic6IHtcbiAgICBfbWFnaWM6IFsnY29uc3QnLCAndWludDMyJywgMHg4Nzg5RjJFQiwgdHJ1ZV0sXG4gICAgdmVyc2lvbjogJ3VpbnQxNicsXG4gICAgem9vbUxldmVsczogJ3VpbnQxNicsXG4gICAgY2hyb21vc29tZVRyZWVPZmZzZXQ6ICd1aW50NjQnLFxuICAgIHVuem9vbWVkRGF0YU9mZnNldDogJ3VpbnQ2NCcsXG4gICAgdW56b29tZWRJbmRleE9mZnNldDogJ3VpbnQ2NCcsXG4gICAgZmllbGRDb3VudDogJ3VpbnQxNicsXG4gICAgZGVmaW5lZEZpZWxkQ291bnQ6ICd1aW50MTYnLFxuICAgIC8vIDAgaWYgbm8gYXV0b1NxbCBpbmZvcm1hdGlvblxuICAgIGF1dG9TcWxPZmZzZXQ6ICd1aW50NjQnLFxuICAgIHRvdGFsU3VtbWFyeU9mZnNldDogJ3VpbnQ2NCcsXG4gICAgLy8gU2l6ZSBvZiB1bmNvbXByZXNzaW9uIGJ1ZmZlci4gIDAgaWYgdW5jb21wcmVzc2VkLlxuICAgIHVuY29tcHJlc3NCdWZTaXplOiAndWludDMyJyxcbiAgICAvLyBPZmZzZXQgdG8gaGVhZGVyIGV4dGVuc2lvbiAwIGlmIG5vIHN1Y2ggZXh0ZW5zaW9uXG4gICAgLy8gVE9ETzogc3VwcG9ydCBleHRlbmRlZCBoZWFkZXJzIChub3QgdXNlZCBpbiBlbnNHZW5lLmJiKVxuICAgIGV4dGVuc2lvbk9mZnNldDogJ3VpbnQ2NCcsXG4gICAgem9vbUhlYWRlcnM6IFsnYXJyYXknLCAnWm9vbUhlYWRlcicsICd6b29tTGV2ZWxzJ10sXG5cbiAgICB0b3RhbFN1bW1hcnk6IHR5cGVBdE9mZnNldCgnVG90YWxTdW1tYXJ5JywgJ3RvdGFsU3VtbWFyeU9mZnNldCcpLFxuICAgIGNocm9tb3NvbWVUcmVlOiB0eXBlQXRPZmZzZXQoJ0JQbHVzVHJlZScsICdjaHJvbW9zb21lVHJlZU9mZnNldCcpXG4gIH0sXG5cbiAgJ1RvdGFsU3VtbWFyeSc6IHtcbiAgICBiYXNlc0NvdmVyZWQ6ICd1aW50NjQnLFxuICAgIG1pblZhbDogJ2Zsb2F0NjQnLCAgICAgLy8gZm9yIGJpZ0JlZCBtaW5pbXVtIGRlcHRoIG9mIGNvdmVyYWdlXG4gICAgbWF4VmFsOiAnZmxvYXQ2NCcsICAgICAvLyBmb3IgYmlnQmVkIG1heGltdW0gZGVwdGggb2YgY292ZXJhZ2VcbiAgICBzdW1EYXRhOiAnZmxvYXQ2NCcsICAgIC8vIGZvciBiaWdCZWQgc3VtIG9mIGNvdmVyYWdlXG4gICAgc3VtU3F1YXJlZDogJ2Zsb2F0NjQnICAvLyBmb3IgYmlnQmVkIHN1bSBvZiBjb3ZlcmFnZSBzcXVhcmVkXG4gIH0sXG5cbiAgJ1pvb21IZWFkZXInOiB7XG4gICAgcmVkdWN0aW9uTGV2ZWw6ICd1aW50MzInLFxuICAgIF9yZXNlcnZlZDogJ3VpbnQzMicsXG4gICAgZGF0YU9mZnNldDogJ3VpbnQ2NCcsXG4gICAgaW5kZXhPZmZzZXQ6ICd1aW50NjQnXG4gIH0sXG5cbiAgJ0JQbHVzVHJlZSc6IHtcbiAgICBtYWdpYzogWydjb25zdCcsICd1aW50MzInLCAweDc4Q0E4QzkxLCB0cnVlXSxcbiAgICAvLyBOdW1iZXIgb2YgY2hpbGRyZW4gcGVyIGJsb2NrIChub3QgYnl0ZSBzaXplIG9mIGJsb2NrKVxuICAgIGJsb2NrU2l6ZTogJ3VpbnQzMicsXG4gICAgLy8gTnVtYmVyIG9mIHNpZ25pZmljYW50IGJ5dGVzIGluIGtleVxuICAgIGtleVNpemU6ICd1aW50MzInLFxuICAgIC8vIE51bWJlciBvZiBieXRlcyBpbiB2YWx1ZVxuICAgIHZhbFNpemU6ICd1aW50MzInLFxuICAgIC8vIE51bWJlciBvZiBpdGVtcyBpbiBpbmRleFxuICAgIGl0ZW1Db3VudDogJ3VpbnQ2NCcsXG4gICAgX3Jlc2VydmVkMjogWydza2lwJywgNF0sXG4gICAgX3Jlc2VydmVkMzogWydza2lwJywgNF0sXG4gICAgbm9kZXM6ICdCUGx1c1RyZWVOb2RlJyAgLy8gWydhcnJheScsICdCUGx1c1RyZWVOb2RlJywgJ2l0ZW1Db3VudCddXG4gIH0sXG4gIFxuICAnQlBsdXNUcmVlTm9kZSc6IHtcbiAgICBpc0xlYWY6ICd1aW50OCcsICAvLyAxID0geWVzLCAwID0gbm9cbiAgICBfcmVzZXJ2ZWQ6ICd1aW50OCcsXG4gICAgY291bnQ6ICd1aW50MTYnLFxuICAgIGNvbnRlbnRzOiBbJ2FycmF5JywgWydpZicsICdpc0xlYWYnLCB7XG4gICAgICBrZXk6IFsnc3RyaW5nJywgJ2tleVNpemUnXSxcbiAgICAgIC8vIE5vdGU6IGJpZ0JlZCBhbGxvd3MgbW9yZSBnZW5lcmFsIHZhbHVlczsgdGhpcyBpcyB3aGF0IEVuc2VtYmwgdXNlcy5cbiAgICAgIC8vIHZhbHVlOiBbJ3N0cmluZycsICd2YWxTaXplJ11cbiAgICAgIGlkOiAndWludDMyJyxcbiAgICAgIHNpemU6ICd1aW50MzInXG4gICAgfSwge1xuICAgICAga2V5OiBbJ3N0cmluZycsICdrZXlTaXplJ10sXG4gICAgICBvZmZzZXQ6ICd1aW50NjQnXG4gICAgfV0sICdjb3VudCddXG4gIH0sXG5cbiAgJ0NpclRyZWUnOiB7XG4gICAgX21hZ2ljOiBbJ2NvbnN0JywgJ3VpbnQzMicsIDB4MjQ2OEFDRTAsIHRydWVdLFxuICAgIGJsb2NrU2l6ZTogJ3VpbnQzMicsXG4gICAgaXRlbUNvdW50OiAndWludDY0JyxcbiAgICBzdGFydENocm9tSXg6ICd1aW50MzInLFxuICAgIHN0YXJ0QmFzZTogJ3VpbnQzMicsXG4gICAgZW5kQ2hyb21JeDogJ3VpbnQzMicsXG4gICAgZW5kQmFzZTogJ3VpbnQzMicsXG4gICAgZmlsZVNpemU6ICd1aW50NjQnLFxuICAgIGl0ZW1zUGVyU2xvdDogJ3VpbnQzMicsXG4gICAgX3Jlc2VydmVkOiBbJ3NraXAnLCA0XSxcbiAgICBibG9ja3M6ICdDaXJOb2RlJ1xuICB9LFxuXG4gICdDaXJOb2RlJzoge1xuICAgIGlzTGVhZjogJ3VpbnQ4JywgIC8vIDEgPSB5ZXMsIDAgPSBub1xuICAgIF9yZXNlcnZlZDogJ3VpbnQ4JyxcbiAgICBjb3VudDogJ3VpbnQxNicsXG4gICAgY29udGVudHM6IFtcbiAgICAgICdhcnJheScsIFtcbiAgICAgICAgJ2lmJywgJ2lzTGVhZicsICdMZWFmRGF0YScsICdOb25MZWFmRGF0YSdcbiAgICAgIF0sXG4gICAgICAnY291bnQnXG4gICAgXVxuICB9LFxuXG4gICdMZWFmRGF0YSc6IHtcbiAgICBzdGFydENocm9tSXg6ICd1aW50MzInLFxuICAgIHN0YXJ0QmFzZTogJ3VpbnQzMicsXG4gICAgZW5kQ2hyb21JeDogJ3VpbnQzMicsXG4gICAgZW5kQmFzZTogJ3VpbnQzMicsXG4gICAgb2Zmc2V0OiAndWludDY0JyxcbiAgICBzaXplOiAndWludDY0J1xuICB9LFxuXG4gICdOb25MZWFmRGF0YSc6IHtcbiAgICBzdGFydENocm9tSXg6ICd1aW50MzInLFxuICAgIHN0YXJ0QmFzZTogJ3VpbnQzMicsXG4gICAgZW5kQ2hyb21JeDogJ3VpbnQzMicsXG4gICAgZW5kQmFzZTogJ3VpbnQzMicsXG4gICAgb2Zmc2V0OiAndWludDY0JyxcbiAgfSxcblxuICAnQmVkRW50cnknOiB7XG4gICAgJ2NocklkJzogJ3VpbnQzMicsXG4gICAgJ3N0YXJ0JzogJ3VpbnQzMicsXG4gICAgJ3N0b3AnOiAndWludDMyJyxcbiAgICAncmVzdCc6ICdzdHJpbmcwJ1xuICB9LFxuXG4gICdCZWRCbG9jayc6IFsnYXJyYXknLCAnQmVkRW50cnknXSxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1RZUEVfU0VUfTtcbiIsIi8qKlxuICogSGVscGVycyBmb3Igc3BlY2lmeWluZyBmaWxlIGZvcm1hdHMgdXNpbmcgakJpbmFyeS5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5cbi8vIFJlYWQgYSBqQmluYXJ5IHR5cGUgYXQgYW4gb2Zmc2V0IGluIHRoZSBidWZmZXIgc3BlY2lmaWVkIGJ5IGFub3RoZXIgZmllbGQuXG5mdW5jdGlvbiB0eXBlQXRPZmZzZXQoYmFzZVR5cGU6IGFueSwgb2Zmc2V0RmllbGROYW1lOiBzdHJpbmcpOiBhbnkge1xuICByZXR1cm4gakJpbmFyeS5UZW1wbGF0ZSh7XG4gICAgICBiYXNlVHlwZTogYmFzZVR5cGUsXG4gICAgICByZWFkOiBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgICAgIGlmICgrY29udGV4dFtvZmZzZXRGaWVsZE5hbWVdID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJ5LnJlYWQodGhpcy5iYXNlVHlwZSwgK2NvbnRleHRbb2Zmc2V0RmllbGROYW1lXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbn1cblxuLy8gQSBibG9jayBvZiBmaXhlZCBsZW5ndGggY29udGFpbmluZyBzb21lIG90aGVyIHR5cGUuXG4vLyBUT0RPOiB3cml0ZSB0aGlzIHVzaW5nICdiaW5hcnknIHR5cGUgKGxpa2UgbnVsbFN0cmluZykuXG52YXIgc2l6ZWRCbG9jayA9IGpCaW5hcnkuVHlwZSh7XG4gIHBhcmFtczogWydpdGVtVHlwZScsICdsZW5ndGhGaWVsZCddLFxuICByZXNvbHZlOiBmdW5jdGlvbiAoZ2V0VHlwZSkge1xuICAgIHRoaXMuaXRlbVR5cGUgPSBnZXRUeXBlKHRoaXMuaXRlbVR5cGUpO1xuICB9LFxuICByZWFkOiBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuYmluYXJ5LnRlbGwoKTtcbiAgICB2YXIgbGVuID0gK2NvbnRleHRbdGhpcy5sZW5ndGhGaWVsZF07XG4gICAgdGhpcy5iaW5hcnkuc2tpcChsZW4pO1xuICAgIHJldHVybiB0aGlzLmJpbmFyeS5zbGljZShwb3MsIHBvcyArIGxlbikucmVhZCh0aGlzLml0ZW1UeXBlKTtcbiAgfVxufSk7XG5cbi8vIEEgZml4ZWQtbGVuZ3RoIHN0cmluZyBmaWVsZCB3aGljaCBpcyBhbHNvIG51bGwtdGVybWluYXRlZC5cbi8vIFRPRE86IHNob3VsZCBiZSBbc2l6ZWRCbG9jaywgJ3N0cmluZzAnLCBsZW5ndGhGaWVsZF1cbi8vIFRPRE86IGZpbGUgYSBidWcgdXBzdHJlYW0gb24gJ3N0cmluZzAnLCB3aGljaCBzaG91bGQgZG8gd2hhdCB0aGlzIGRvZXMuXG52YXIgbnVsbFN0cmluZyA9IGpCaW5hcnkuVGVtcGxhdGUoe1xuICBzZXRQYXJhbXMobGVuZ3RoRmllbGQpIHtcbiAgICB0aGlzLmJhc2VUeXBlID0gWydiaW5hcnknLCBsZW5ndGhGaWVsZF07XG4gIH0sXG4gIHJlYWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmFzZVJlYWQoKS5yZWFkKCdzdHJpbmcwJyk7XG4gIH1cbn0pO1xuXG5cbi8vIExpa2UgJ3VpbnQ2NCcsIGJ1dCBhc3NlcnRzIHRoYXQgdGhlIG51bWJlciBpcyA8Ml41MyAoaS5lLiBmaXRzIHByZWNpc2VseSBpblxuLy8gYSBmbG9hdCkgYW5kIHJlYWRzIGl0IGFzIGEgcGxhaW4tb2xkLW51bWJlci4gVGhpcyBpcyBhIHBlcmZvcm1hbmNlIGFuZFxuLy8gZGVidWdnaW5nIHdpbiwgc2luY2UgcGxhaW4gbnVtYmVycyBzaG93IHVwIG1vcmUgbmljZWx5IGluIHRoZSBjb25zb2xlLlxudmFyIHVpbnQ2NG5hdGl2ZSA9IGpCaW5hcnkuVGVtcGxhdGUoe1xuICBiYXNlVHlwZTogJ3VpbnQ2NCcsXG4gIHJlYWQoKSB7XG4gICAgdmFyIG51bSA9IHRoaXMuYmFzZVJlYWQoKSxcbiAgICAgICAgdiA9ICtudW07XG4gICAgLy8gVGVzdCBmb3Igd3JhcGFyb3VuZCAmIHJvdW5kb2ZmXG4gICAgaWYgKHYgPCAwIHx8IDEgKyB2ID09IHYpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBOdW1iZXIgb3V0IG9mIHByZWNpc2UgZmxvYXRpbmcgcG9pbnQgcmFuZ2U6ICR7bnVtfWApO1xuICAgIH1cbiAgICByZXR1cm4gK251bTtcbiAgfVxufSk7XG5cblxuLy8gVHlwZSByZXR1cm5lZCBieSBsYXp5QXJyYXkgaGVscGVyLCBiZWxvdy5cbi8vIEhhcyBhIC5sZW5ndGggcHJvcGVydHksIGEgLmdldCgpIG1ldGhvZCBhbmQgYSAuZ2V0QWxsKCkgbWV0aG9kLlxuY2xhc3MgTGF6eUFycmF5IHtcbiAgYnl0ZXNQZXJJdGVtOiBudW1iZXI7XG4gIGpiOiBPYmplY3Q7XG4gIGl0ZW1UeXBlOiBPYmplY3Q7XG4gIGxlbmd0aDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGpiLCBieXRlc1Blckl0ZW06IG51bWJlciwgaXRlbVR5cGUpIHtcbiAgICB0aGlzLmJ5dGVzUGVySXRlbSA9IGJ5dGVzUGVySXRlbTtcbiAgICB0aGlzLmpiID0gamI7XG4gICAgdGhpcy5pdGVtVHlwZSA9IGl0ZW1UeXBlO1xuICAgIHRoaXMubGVuZ3RoID0gdGhpcy5qYi52aWV3LmJ5dGVMZW5ndGggLyB0aGlzLmJ5dGVzUGVySXRlbTtcbiAgfVxuXG4gIGdldChpKSB7XG4gICAgdGhpcy5qYi5zZWVrKGkgKiB0aGlzLmJ5dGVzUGVySXRlbSk7XG4gICAgcmV0dXJuIHRoaXMuamIucmVhZCh0aGlzLml0ZW1UeXBlKTtcbiAgfVxuXG4gIGdldEFsbCgpIHtcbiAgICB0aGlzLmpiLnNlZWsoMCk7XG4gICAgcmV0dXJuIHRoaXMuamIucmVhZChbJ2FycmF5JywgdGhpcy5pdGVtVHlwZSwgdGhpcy5sZW5ndGhdKTtcbiAgfVxufVxuXG5cbi8vIExpa2UgakJpbmFyeSdzICdhcnJheScsIGJ1dCBkZWZlcnMgcGFyc2luZyBvZiBpdGVtcyB1bnRpbCB0aGV5IGFyZSBhY2Nlc3NlZC5cbi8vIFRoaXMgY2FuIHJlc3VsdCBpbiBhIGh1Z2Ugc3BlZWR1cCBmb3IgbGFyZ2UgYXJyYXlzLiBTZWUgTGF6eUFycmF5IGZvciB0aGVcbi8vIHJlc3VsdGluZyB0eXBlLlxudmFyIGxhenlBcnJheSA9IGpCaW5hcnkuVHlwZSh7XG4gIHBhcmFtczogWydpdGVtVHlwZScsICdieXRlc1Blckl0ZW0nLCAnbnVtSXRlbXMnXSxcbiAgcmVhZCgpIHtcbiAgICB2YXIgbnVtSXRlbXMgPSB0aGlzLnRvVmFsdWUodGhpcy5udW1JdGVtcyk7XG4gICAgdmFyIGJ5dGVzUGVySXRlbSA9IHRoaXMudG9WYWx1ZSh0aGlzLmJ5dGVzUGVySXRlbSk7XG4gICAgaWYgKG51bUl0ZW1zID09PSB1bmRlZmluZWQgfHwgYnl0ZXNQZXJJdGVtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93ICdieXRlc1Blckl0ZW0gYW5kIG51bUl0ZW1zIG11c3QgYmUgc2V0IGZvciBsYXp5QXJyYXknO1xuICAgIH1cbiAgICB2YXIgcG9zID0gdGhpcy5iaW5hcnkudGVsbCgpO1xuICAgIHZhciBsZW4gPSBudW1JdGVtcyAqIGJ5dGVzUGVySXRlbTtcbiAgICB2YXIgYnVmZmVyID0gdGhpcy5iaW5hcnkuc2xpY2UocG9zLCBwb3MgKyBsZW4pO1xuICAgIHRoaXMuYmluYXJ5LnNraXAobGVuKTtcbiAgICByZXR1cm4gbmV3IExhenlBcnJheShidWZmZXIsIGJ5dGVzUGVySXRlbSwgdGhpcy5pdGVtVHlwZSk7XG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHt0eXBlQXRPZmZzZXQsIHNpemVkQmxvY2ssIG51bGxTdHJpbmcsIHVpbnQ2NG5hdGl2ZSwgbGF6eUFycmF5fTtcbiIsIi8qKlxuICogVHdvQml0IGlzIGEgcGFja2VkIGdlbm9tZSBmb3JtYXQuXG4gKiBTZWUgaHR0cDovL2dlbm9tZS51Y3NjLmVkdS9GQVEvRkFRZm9ybWF0Lmh0bWwjZm9ybWF0N1xuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBUWVBFX1NFVCA9IHtcbiAgJ2pCaW5hcnkubGl0dGxlRW5kaWFuJzogdHJ1ZSxcblxuICAnSGVhZGVyJzoge1xuICAgIG1hZ2ljOiBbJ2NvbnN0JywgJ3VpbnQzMicsIDB4MUE0MTI3NDMsIHRydWVdLFxuICAgIHZlcnNpb246IFsnY29uc3QnLCAndWludDMyJywgMCwgdHJ1ZV0sXG4gICAgc2VxdWVuY2VDb3VudDogJ3VpbnQzMicsXG4gICAgcmVzZXJ2ZWQ6ICd1aW50MzInLFxuXG4gICAgc2VxdWVuY2VzOiBbJ2FycmF5JywgJ1NlcXVlbmNlSGVhZGVyJywgJ3NlcXVlbmNlQ291bnQnXVxuICB9LFxuXG4gICdTZXF1ZW5jZUhlYWRlcic6IHtcbiAgICBuYW1lU2l6ZTogJ3VpbnQ4JyxcbiAgICBuYW1lOiBbJ3N0cmluZycsICduYW1lU2l6ZSddLFxuICAgIG9mZnNldDogJ3VpbnQzMidcbiAgfSxcblxuICAnU2VxdWVuY2VSZWNvcmQnOiB7XG4gICAgZG5hU2l6ZTogJ3VpbnQzMicsXG4gICAgbkJsb2NrQ291bnQ6ICd1aW50MzInLFxuICAgIG5CbG9ja1N0YXJ0czogWydhcnJheScsICd1aW50MzInLCAnbkJsb2NrQ291bnQnXSxcbiAgICBuQmxvY2tTaXplczogWydhcnJheScsICd1aW50MzInLCAnbkJsb2NrQ291bnQnXSxcbiAgICAvLyBUaGUgbWFza3MgY2FuIGJlIHF1aXRlIGxhcmdlICh+Mk1CIGZvciBjaHIxKSBhbmQgd2UgbW9zdGx5IGRvbid0IGNhcmVcbiAgICAvLyBhYm91dCB0aGVtLiAgU28gd2UgaWdub3JlIHRoZW0sIGJ1dCB3ZSBkbyBuZWVkIHRvIGtub3cgdGhlaXIgbGVuZ3RoLlxuICAgIG1hc2tCbG9ja0NvdW50OiAndWludDMyJyxcbiAgICAvLyBtYXNrQmxvY2tTdGFydHM6IFsnYXJyYXknLCAndWludDMyJywgJ21hc2tCbG9ja0NvdW50J11cbiAgICAvLyBtYXNrQmxvY2tTaXplczogWydhcnJheScsICd1aW50MzInLCAnbWFza0Jsb2NrQ291bnQnXVxuICAgIC8vIHJlc2VydmVkOiAndWludDMyJ1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtUWVBFX1NFVH07XG4iLCIvKipcbiAqIEZldGNoZXIvcGFyc2VyIGZvciBWQ0YgZmlsZXMuXG4gKiBUaGlzIG1ha2VzIHZlcnkgbGl0dGxlIGVmZm9ydCB0byBwYXJzZSBvdXQgZGV0YWlscyBmcm9tIFZDRiBlbnRyaWVzLiBJdCBqdXN0XG4gKiBleHRyYWN0cyBDT05USUcsIFBPU0lUSU9OLCBSRUYgYW5kIEFMVC5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIEFic3RyYWN0RmlsZSBmcm9tICcuLi9BYnN0cmFjdEZpbGUnO1xuaW1wb3J0IHR5cGUgUSBmcm9tICdxJztcblxuZXhwb3J0IHR5cGUgVmFyaWFudCA9IHtcbiAgY29udGlnOiBzdHJpbmc7XG4gIHBvc2l0aW9uOiBudW1iZXI7XG4gIHJlZjogc3RyaW5nO1xuICBhbHQ6IHN0cmluZztcbiAgdmNmTGluZTogc3RyaW5nO1xufVxuXG4vLyBUaGlzIGlzIGEgbWluaW1hbGx5LXBhcnNlZCBsaW5lIGZvciBmYWNpbGl0YXRpbmcgYmluYXJ5IHNlYXJjaC5cbnR5cGUgTG9jdXNMaW5lID0ge1xuICBjb250aWc6IHN0cmluZztcbiAgcG9zaXRpb246IG51bWJlcjtcbiAgbGluZTogc3RyaW5nO1xufVxuXG5cbmZ1bmN0aW9uIGV4dHJhY3RMb2N1c0xpbmUodmNmTGluZTogc3RyaW5nKTogTG9jdXNMaW5lIHtcbiAgdmFyIHRhYjEgPSB2Y2ZMaW5lLmluZGV4T2YoJ1xcdCcpLFxuICAgICAgdGFiMiA9IHZjZkxpbmUuaW5kZXhPZignXFx0JywgdGFiMSArIDEpO1xuXG4gIHJldHVybiB7XG4gICAgY29udGlnOiB2Y2ZMaW5lLnNsaWNlKDAsIHRhYjEpLFxuICAgIHBvc2l0aW9uOiBOdW1iZXIodmNmTGluZS5zbGljZSh0YWIxICsgMSwgdGFiMikpLFxuICAgIGxpbmU6IHZjZkxpbmVcbiAgfTtcbn1cblxuXG5mdW5jdGlvbiBleHRyYWN0VmFyaWFudCh2Y2ZMaW5lOiBzdHJpbmcpOiBWYXJpYW50IHtcbiAgdmFyIHBhcnRzID0gdmNmTGluZS5zcGxpdCgnXFx0Jyk7XG5cbiAgcmV0dXJuIHtcbiAgICBjb250aWc6IHBhcnRzWzBdLFxuICAgIHBvc2l0aW9uOiBOdW1iZXIocGFydHNbMV0pLFxuICAgIHJlZjogcGFydHNbM10sXG4gICAgYWx0OiBwYXJ0c1s0XSxcbiAgICB2Y2ZMaW5lXG4gIH07XG59XG5cblxuZnVuY3Rpb24gY29tcGFyZUxvY3VzTGluZShhOiBMb2N1c0xpbmUsIGI6IExvY3VzTGluZSk6IG51bWJlciB7XG4gIC8vIFNvcnQgbGV4aWNvZ3JhcGhpY2FsbHkgYnkgY29udGlnLCB0aGVuIG51bWVyaWNhbGx5IGJ5IHBvc2l0aW9uLlxuICBpZiAoYS5jb250aWcgPCBiLmNvbnRpZykge1xuICAgIHJldHVybiAtMTtcbiAgfSBlbHNlIGlmIChhLmNvbnRpZyA+IGIuY29udGlnKSB7XG4gICAgcmV0dXJuICsxO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBhLnBvc2l0aW9uIC0gYi5wb3NpdGlvbjtcbiAgfVxufVxuXG5cbi8vIChiYXNlZCBvbiB1bmRlcnNjb3JlIHNvdXJjZSlcbmZ1bmN0aW9uIGxvd2VzdEluZGV4PFQ+KGhheXN0YWNrOiBUW10sIG5lZWRsZTogVCwgY29tcGFyZTogKGE6IFQsIGI6IFQpPT5udW1iZXIpOiBudW1iZXIge1xuICB2YXIgbG93ID0gMCxcbiAgICAgIGhpZ2ggPSBoYXlzdGFjay5sZW5ndGg7XG4gIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgdmFyIG1pZCA9IE1hdGguZmxvb3IoKGxvdyArIGhpZ2gpIC8gMiksXG4gICAgICAgIGMgPSBjb21wYXJlKGhheXN0YWNrW21pZF0sIG5lZWRsZSk7XG4gICAgaWYgKGMgPCAwKSB7XG4gICAgICBsb3cgPSBtaWQgKyAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBoaWdoID0gbWlkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbG93O1xufVxuXG5cbmNsYXNzIEltbWVkaWF0ZVZjZkZpbGUge1xuICBsaW5lczogTG9jdXNMaW5lW107XG4gIGNvbnRpZ01hcDoge1trZXk6c3RyaW5nXTpzdHJpbmd9OyAgLy8gY2Fub25pY2FsIG1hcFxuXG4gIGNvbnN0cnVjdG9yKGxpbmVzOiBMb2N1c0xpbmVbXSkge1xuICAgIHRoaXMubGluZXMgPSBsaW5lcztcbiAgICB0aGlzLmNvbnRpZ01hcCA9IHRoaXMuZXh0cmFjdENvbnRpZ3MoKTtcbiAgfVxuXG4gIGV4dHJhY3RDb250aWdzKCk6IHtba2V5OnN0cmluZ106c3RyaW5nfSB7XG4gICAgdmFyIGNvbnRpZ3MgPSBbXSxcbiAgICAgICAgbGFzdENvbnRpZyA9ICcnO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpbmUgPSB0aGlzLmxpbmVzW2ldO1xuICAgICAgaWYgKGxpbmUuY29udGlnICE9IGxhc3RDb250aWcpIHtcbiAgICAgICAgY29udGlncy5wdXNoKGxpbmUuY29udGlnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgY29udGlnTWFwID0ge307XG4gICAgY29udGlncy5mb3JFYWNoKGNvbnRpZyA9PiB7XG4gICAgICBpZiAoY29udGlnLnNsaWNlKDAsIDMpID09ICdjaHInKSB7XG4gICAgICAgIGNvbnRpZ01hcFtjb250aWcuc2xpY2UoNCldID0gY29udGlnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGlnTWFwWydjaHInICsgY29udGlnXSA9IGNvbnRpZztcbiAgICAgIH1cbiAgICAgIGNvbnRpZ01hcFtjb250aWddID0gY29udGlnO1xuICAgIH0pO1xuICAgIHJldHVybiBjb250aWdNYXA7XG4gIH1cblxuICBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBWYXJpYW50W10ge1xuICAgIHZhciBsaW5lcyA9IHRoaXMubGluZXM7XG4gICAgdmFyIGNvbnRpZyA9IHRoaXMuY29udGlnTWFwW3JhbmdlLmNvbnRpZ107XG4gICAgaWYgKCFjb250aWcpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICB2YXIgc3RhcnRMb2N1cyA9IHtcbiAgICAgICAgY29udGlnOiBjb250aWcsXG4gICAgICAgIHBvc2l0aW9uOiByYW5nZS5zdGFydCgpLFxuICAgICAgICBsaW5lOiAnJ1xuICAgICAgfSxcbiAgICAgIGVuZExvY3VzID0ge1xuICAgICAgICBjb250aWc6IGNvbnRpZyxcbiAgICAgICAgcG9zaXRpb246IHJhbmdlLnN0b3AoKSxcbiAgICAgICAgbGluZTogJydcbiAgICAgIH07XG4gICAgdmFyIHN0YXJ0SW5kZXggPSBsb3dlc3RJbmRleChsaW5lcywgc3RhcnRMb2N1cywgY29tcGFyZUxvY3VzTGluZSk7XG5cbiAgICB2YXIgcmVzdWx0OiBMb2N1c0xpbmVbXSA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXg7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGNvbXBhcmVMb2N1c0xpbmUobGluZXNbaV0sIGVuZExvY3VzKSA+IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXN1bHQucHVzaChsaW5lc1tpXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5tYXAobGluZSA9PiBleHRyYWN0VmFyaWFudChsaW5lLmxpbmUpKTtcbiAgfVxufVxuXG5cbmNsYXNzIFZjZkZpbGUge1xuICByZW1vdGVGaWxlOiBBYnN0cmFjdEZpbGU7XG4gIGltbWVkaWF0ZTogUS5Qcm9taXNlPEltbWVkaWF0ZVZjZkZpbGU+O1xuXG4gIGNvbnN0cnVjdG9yKHJlbW90ZUZpbGU6IEFic3RyYWN0RmlsZSkge1xuICAgIHRoaXMucmVtb3RlRmlsZSA9IHJlbW90ZUZpbGU7XG5cbiAgICB0aGlzLmltbWVkaWF0ZSA9IHRoaXMucmVtb3RlRmlsZS5nZXRBbGxTdHJpbmcoKS50aGVuKHR4dCA9PiB7XG4gICAgICAvLyBSdW5uaW5nIHRoaXMgb24gYSAxMk1CIHN0cmluZyB0YWtlcyB+ODBtcyBvbiBteSAyMDE0IE1hY2Jvb2sgUHJvXG4gICAgICB2YXIgbGluZXMgPSB0eHQuc3BsaXQoJ1xcbicpXG4gICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGxpbmUgPT4gKGxpbmUubGVuZ3RoICYmIGxpbmVbMF0gIT0gJyMnKSlcbiAgICAgICAgICAgICAgICAgICAgIC5tYXAoZXh0cmFjdExvY3VzTGluZSk7XG4gICAgICByZXR1cm4gbGluZXM7XG4gICAgfSkudGhlbihsaW5lcyA9PiB7XG4gICAgICAvLyBTb3J0aW5nIHRoaXMgc3RydWN0dXJlIGZyb20gdGhlIDEyTUIgVkNGIGZpbGUgdGFrZXMgfjYwbXNcbiAgICAgIGxpbmVzLnNvcnQoY29tcGFyZUxvY3VzTGluZSk7XG4gICAgICByZXR1cm4gbmV3IEltbWVkaWF0ZVZjZkZpbGUobGluZXMpO1xuICAgIH0pO1xuICAgIHRoaXMuaW1tZWRpYXRlLmRvbmUoKTtcbiAgfVxuXG4gIGdldEZlYXR1cmVzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IFEuUHJvbWlzZTxWYXJpYW50W10+IHtcbiAgICByZXR1cm4gdGhpcy5pbW1lZGlhdGUudGhlbihpbW1lZGlhdGUgPT4ge1xuICAgICAgcmV0dXJuIGltbWVkaWF0ZS5nZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2UpO1xuICAgIH0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVmNmRmlsZTtcbiIsIi8qKlxuICogVGhpcyBleHBvc2VzIHRoZSBtYWluIGVudHJ5IHBvaW50IGludG8gcGlsZXVwLmpzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7VHJhY2ssIFZpc3VhbGl6ZWRUcmFjaywgVml6V2l0aE9wdGlvbnN9IGZyb20gJy4vdHlwZXMnO1xuXG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcblxuLy8gRGF0YSBzb3VyY2VzXG5pbXBvcnQgVHdvQml0RGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZSc7XG5pbXBvcnQgQmlnQmVkRGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvQmlnQmVkRGF0YVNvdXJjZSc7XG5pbXBvcnQgVmNmRGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvVmNmRGF0YVNvdXJjZSc7XG5pbXBvcnQgQmFtRGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvQmFtRGF0YVNvdXJjZSc7XG5pbXBvcnQgR0E0R0hEYXRhU291cmNlIGZyb20gJy4vc291cmNlcy9HQTRHSERhdGFTb3VyY2UnO1xuaW1wb3J0IEVtcHR5U291cmNlIGZyb20gJy4vc291cmNlcy9FbXB0eVNvdXJjZSc7XG5cbi8vIFZpc3VhbGl6YXRpb25zXG5pbXBvcnQgQ292ZXJhZ2VUcmFjayBmcm9tICcuL3Zpei9Db3ZlcmFnZVRyYWNrJztcbmltcG9ydCBHZW5vbWVUcmFjayBmcm9tICcuL3Zpei9HZW5vbWVUcmFjayc7XG5pbXBvcnQgR2VuZVRyYWNrIGZyb20gJy4vdml6L0dlbmVUcmFjayc7XG5pbXBvcnQgTG9jYXRpb25UcmFjayBmcm9tICcuL3Zpei9Mb2NhdGlvblRyYWNrJztcbmltcG9ydCBQaWxldXBUcmFjayBmcm9tICcuL3Zpei9QaWxldXBUcmFjayc7XG5pbXBvcnQgU2NhbGVUcmFjayBmcm9tICcuL3Zpei9TY2FsZVRyYWNrJztcbmltcG9ydCBWYXJpYW50VHJhY2sgZnJvbSAnLi92aXovVmFyaWFudFRyYWNrJztcbmltcG9ydCBSb290IGZyb20gJy4vUm9vdCc7XG5cbnR5cGUgR2Vub21lUmFuZ2UgPSB7XG4gIGNvbnRpZzogc3RyaW5nO1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG59XG5cbnR5cGUgUGlsZXVwID0ge1xuICBzZXRSYW5nZShyYW5nZTogR2Vub21lUmFuZ2UpOiB2b2lkO1xuICBnZXRSYW5nZSgpOiBHZW5vbWVSYW5nZTtcbiAgZGVzdHJveSgpOiB2b2lkO1xufVxuXG50eXBlIFBpbGV1cFBhcmFtcyA9IHtcbiAgcmFuZ2U6IHtcbiAgICBjb250aWc6IHN0cmluZyxcbiAgICBzdGFydDogbnVtYmVyLFxuICAgIHN0b3A6IG51bWJlclxuICB9O1xuICB0cmFja3M6IFRyYWNrW107XG59XG5cbmZ1bmN0aW9uIGZpbmRSZWZlcmVuY2UodHJhY2tzOiBWaXN1YWxpemVkVHJhY2tbXSk6ID9WaXN1YWxpemVkVHJhY2sge1xuICByZXR1cm4gXy5maW5kKHRyYWNrcywgdCA9PiAhIXQudHJhY2suaXNSZWZlcmVuY2UpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGUoZWxPcklkOiBzdHJpbmd8RWxlbWVudCwgcGFyYW1zOiBQaWxldXBQYXJhbXMpOiBQaWxldXAge1xuICB2YXIgZWwgPSB0eXBlb2YoZWxPcklkKSA9PSAnc3RyaW5nJyA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsT3JJZCkgOiBlbE9ySWQ7XG4gIGlmICghZWwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRlZCB0byBjcmVhdGUgcGlsZXVwIHdpdGggbm9uLWV4aXN0ZW50IGVsZW1lbnQgJHtlbE9ySWR9YCk7XG4gIH1cblxuICB2YXIgdml6VHJhY2tzID0gcGFyYW1zLnRyYWNrcy5tYXAoZnVuY3Rpb24odHJhY2s6IFRyYWNrKTogVmlzdWFsaXplZFRyYWNrIHtcbiAgICB2YXIgc291cmNlID0gdHJhY2suZGF0YSA/IHRyYWNrLmRhdGEgOiB0cmFjay52aXouY29tcG9uZW50LmRlZmF1bHRTb3VyY2U7XG4gICAgaWYoIXNvdXJjZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgVHJhY2sgJyR7dHJhY2sudml6LmNvbXBvbmVudC5kaXNwbGF5TmFtZX0nIGRvZXNuJ3QgaGF2ZSBhIGRlZmF1bHQgYCArXG4gICAgICAgIGBkYXRhIHNvdXJjZTsgeW91IG11c3Qgc3BlY2lmeSBvbmUgd2hlbiBpbml0aWFsaXppbmcgaXQuYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge3Zpc3VhbGl6YXRpb246IHRyYWNrLnZpeiwgc291cmNlLCB0cmFja307XG4gIH0pO1xuXG4gIHZhciByZWZlcmVuY2VUcmFjayA9IGZpbmRSZWZlcmVuY2Uodml6VHJhY2tzKTtcbiAgaWYgKCFyZWZlcmVuY2VUcmFjaykge1xuICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3QgaW5jbHVkZSBhdCBsZWFzdCBvbmUgdHJhY2sgd2l0aCB0eXBlPXJlZmVyZW5jZScpO1xuICB9XG5cbiAgdmFyIHJlYWN0RWxlbWVudCA9XG4gICAgICBSZWFjdERPTS5yZW5kZXIoPFJvb3QgcmVmZXJlbmNlU291cmNlPXtyZWZlcmVuY2VUcmFjay5zb3VyY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tzPXt2aXpUcmFja3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFJhbmdlPXtwYXJhbXMucmFuZ2V9IC8+LCBlbCk7XG4gIHJldHVybiB7XG4gICAgc2V0UmFuZ2UocmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgICBpZiAocmVhY3RFbGVtZW50ID09PSBudWxsKSB7XG4gICAgICAgIHRocm93ICdDYW5ub3QgY2FsbCBzZXRSYW5nZSBvbiBhIGRlc3Ryb3llZCBwaWxldXAnO1xuICAgICAgfVxuICAgICAgcmVhY3RFbGVtZW50LmhhbmRsZVJhbmdlQ2hhbmdlKHJhbmdlKTtcbiAgICB9LFxuICAgIGdldFJhbmdlKCk6IEdlbm9tZVJhbmdlIHtcbiAgICAgIGlmIChyZWFjdEVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgJ0Nhbm5vdCBjYWxsIHNldFJhbmdlIG9uIGEgZGVzdHJveWVkIHBpbGV1cCc7XG4gICAgICB9XG4gICAgICByZXR1cm4gXy5jbG9uZShyZWFjdEVsZW1lbnQuc3RhdGUucmFuZ2UpO1xuICAgIH0sXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgIGlmICghdml6VHJhY2tzKSB7XG4gICAgICAgIHRocm93ICdDYW5ub3QgY2FsbCBkZXN0cm95KCkgdHdpY2Ugb24gdGhlIHNhbWUgcGlsZXVwJztcbiAgICAgIH1cbiAgICAgIHZpelRyYWNrcy5mb3JFYWNoKCh7c291cmNlfSkgPT4ge1xuICAgICAgICBzb3VyY2Uub2ZmKCk7XG4gICAgICB9KTtcbiAgICAgIFJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUoZWwpO1xuICAgICAgcmVhY3RFbGVtZW50ID0gbnVsbDtcbiAgICAgIHJlZmVyZW5jZVRyYWNrID0gbnVsbDtcbiAgICAgIHZpelRyYWNrcyA9IG51bGw7XG4gICAgfVxuICB9O1xufVxuXG50eXBlIFZpek9iamVjdCA9ICgob3B0aW9uczogP09iamVjdCkgPT4gVml6V2l0aE9wdGlvbnMpO1xuXG5mdW5jdGlvbiBtYWtlVml6T2JqZWN0KGNvbXBvbmVudDogUmVhY3RDbGFzcyk6IFZpek9iamVjdCB7XG4gIHJldHVybiBvcHRpb25zID0+IHtcbiAgICBvcHRpb25zID0gXy5leHRlbmQoe30sIGNvbXBvbmVudC5kZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHtjb21wb25lbnQsIG9wdGlvbnN9O1xuICB9O1xufVxuXG52YXIgcGlsZXVwID0ge1xuICBjcmVhdGU6IGNyZWF0ZSxcbiAgZm9ybWF0czoge1xuICAgIGJhbTogQmFtRGF0YVNvdXJjZS5jcmVhdGUsXG4gICAgZ2E0Z2g6IEdBNEdIRGF0YVNvdXJjZS5jcmVhdGUsXG4gICAgdmNmOiBWY2ZEYXRhU291cmNlLmNyZWF0ZSxcbiAgICB0d29CaXQ6IFR3b0JpdERhdGFTb3VyY2UuY3JlYXRlLFxuICAgIGJpZ0JlZDogQmlnQmVkRGF0YVNvdXJjZS5jcmVhdGUsXG4gICAgZW1wdHk6IEVtcHR5U291cmNlLmNyZWF0ZVxuICB9LFxuICB2aXo6IHtcbiAgICBjb3ZlcmFnZTogbWFrZVZpek9iamVjdChDb3ZlcmFnZVRyYWNrKSxcbiAgICBnZW5vbWU6ICAgbWFrZVZpek9iamVjdChHZW5vbWVUcmFjayksXG4gICAgZ2VuZXM6ICAgIG1ha2VWaXpPYmplY3QoR2VuZVRyYWNrKSxcbiAgICBsb2NhdGlvbjogbWFrZVZpek9iamVjdChMb2NhdGlvblRyYWNrKSxcbiAgICBzY2FsZTogICAgbWFrZVZpek9iamVjdChTY2FsZVRyYWNrKSxcbiAgICB2YXJpYW50czogbWFrZVZpek9iamVjdChWYXJpYW50VHJhY2spLFxuICAgIHBpbGV1cDogICBtYWtlVml6T2JqZWN0KFBpbGV1cFRyYWNrKVxuICB9LFxuICB2ZXJzaW9uOiAnMC42LjgnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHBpbGV1cDtcblxuLy8gRXhwb3J0IGEgZ2xvYmFsIHVudGlsIHRoZSBkaXN0cmlidXRlZCBwYWNrYWdlIHdvcmtzIHdpdGggQ29tbW9uSlNcbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vaGFtbWVybGFiL3BpbGV1cC5qcy9pc3N1ZXMvMTM2XG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgd2luZG93LnBpbGV1cCA9IHBpbGV1cDtcbn1cbiIsIi8qKlxuICogTGlnaHR3ZWlnaHQgcmVwbGFjZW1lbnQgZm9yIGQzLnNjYWxlLmxpbmVhcigpLlxuICogVGhpcyBvbmx5IHN1cHBvcnRzIG51bWVyaWMgc2NhbGVzLCBlLmcuIHNjYWxlLnJhbmdlKFsncmVkJywgJ2JsdWUnXSkgaXMgaW52YWxpZC5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gbGluZWFyKCk6IGFueSB7XG4gIHZhciBjbGFtcGVkID0gZmFsc2UsXG4gICAgICBkb21haW4gPSBbMCwgMV0sXG4gICAgICByYW5nZSA9IFswLCAxXTtcblxuICB2YXIgbWUgPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKGNsYW1wZWQpIHtcbiAgICAgIHggPSBNYXRoLm1heChNYXRoLm1pbih4LCBkb21haW5bMV0pLCBkb21haW5bMF0pO1xuICAgIH1cbiAgICAvLyBUT0RPOiBjb21wdXRlIGNvZWZmaWNpZW50cyBvbmNlLlxuICAgIHJldHVybiAoeCAtIGRvbWFpblswXSkgLyAoZG9tYWluWzFdIC0gZG9tYWluWzBdKSAqIChyYW5nZVsxXSAtIHJhbmdlWzBdKSArIHJhbmdlWzBdO1xuICB9O1xuXG4gIG1lLmNsYW1wID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09PSB1bmRlZmluZWQpIHJldHVybiBjbGFtcGVkO1xuICAgIGNsYW1wZWQgPSB4O1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBtZS5kb21haW4gPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKHggPT09IHVuZGVmaW5lZCkgcmV0dXJuIGRvbWFpbjtcbiAgICBkb21haW4gPSB4O1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBtZS5yYW5nZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gcmFuZ2U7XG4gICAgcmFuZ2UgPSB4O1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBtZS5pbnZlcnQgPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKGNsYW1wZWQpIHtcbiAgICAgIHRocm93IGBDYW4ndCBpbnZlcnQgYSBjbGFtcGVkIGxpbmVhciBzY2FsZS5gO1xuICAgIH1cbiAgICByZXR1cm4gKHggLSByYW5nZVswXSkgLyAocmFuZ2VbMV0gLSByYW5nZVswXSkgKiAoZG9tYWluWzFdIC0gZG9tYWluWzBdKSArIGRvbWFpblswXTtcbiAgfTtcbiAgbWUubmljZSA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIFRoaXMgbWV0aG9kIGlzIGFkYXB0ZWQgZGlyZWN0bHkgZnJvbSBkMydzIGxpbmVhciBzY2FsZSBuaWNlIG1ldGhvZC5cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21ib3N0b2NrL2QzL2Jsb2IvNWI5ODFhMThkL3NyYy9zY2FsZS9saW5lYXIuanMjTDk0LUwxMTJcbiAgICB2YXIgbSA9IDEwO1xuICAgIHZhciBleHRlbnQgPSBkb21haW4sXG4gICAgICAgIHNwYW4gPSBNYXRoLmFicyhleHRlbnRbMV0gLSBleHRlbnRbMF0pLFxuICAgICAgICBzdGVwID0gTWF0aC5wb3coMTAsIE1hdGguZmxvb3IoTWF0aC5sb2coc3BhbiAvIG0pIC8gTWF0aC5MTjEwKSksXG4gICAgICAgIGVyciA9IG0gLyBzcGFuICogc3RlcDtcblxuICAgIC8vIEZpbHRlciB0aWNrcyB0byBnZXQgY2xvc2VyIHRvIHRoZSBkZXNpcmVkIGNvdW50LlxuICAgIGlmIChlcnIgPD0gMC4xNSkgc3RlcCAqPSAxMDtcbiAgICBlbHNlIGlmIChlcnIgPD0gMC4zNSkgc3RlcCAqPSA1O1xuICAgIGVsc2UgaWYgKGVyciA8PSAwLjc1KSBzdGVwICo9IDI7XG5cbiAgICB2YXIgbmljZSA9IHtcbiAgICAgIGZsb29yOiBmdW5jdGlvbih4KSB7IHJldHVybiBNYXRoLmZsb29yKHggLyBzdGVwKSAqIHN0ZXA7IH0sXG4gICAgICBjZWlsOiBmdW5jdGlvbih4KSB7IHJldHVybiBNYXRoLmNlaWwoeCAvIHN0ZXApICogc3RlcDsgfVxuICAgIH07XG5cbiAgICB2YXIgaTAgPSAwLFxuICAgICAgICBpMSA9IDEsXG4gICAgICAgIHgwID0gZG9tYWluW2kwXSxcbiAgICAgICAgeDEgPSBkb21haW5baTFdLFxuICAgICAgICBkeDtcblxuICAgIGlmICh4MSA8IHgwKSB7XG4gICAgICBkeCA9IGkwOyBpMCA9IGkxOyBpMSA9IGR4O1xuICAgICAgZHggPSB4MDsgeDAgPSB4MTsgeDEgPSBkeDtcbiAgICB9XG5cbiAgICBkb21haW5baTBdID0gbmljZS5mbG9vcih4MCk7XG4gICAgZG9tYWluW2kxXSA9IG5pY2UuY2VpbCh4MSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcmV0dXJuIG1lO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgbGluZWFyIH07XG4iLCIvKiBAZmxvdyAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBRIGZyb20gJ3EnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBCYW1GaWxlIGZyb20gJy4uL2RhdGEvYmFtJztcbmltcG9ydCBSZW1vdGVGaWxlIGZyb20gJy4uL1JlbW90ZUZpbGUnO1xuXG5pbXBvcnQgdHlwZSB7QWxpZ25tZW50LCBBbGlnbm1lbnREYXRhU291cmNlfSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuXG4vLyBHZW5vbWUgcmFuZ2VzIGFyZSByb3VuZGVkIHRvIG11bHRpcGxlcyBvZiB0aGlzIGZvciBmZXRjaGluZy5cbi8vIFRoaXMgcmVkdWNlcyBuZXR3b3JrIGFjdGl2aXR5IHdoaWxlIGZldGNoaW5nLlxuLy8gVE9ETzogdHVuZSB0aGlzIHZhbHVlXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDA7XG5cbmZ1bmN0aW9uIGV4cGFuZFJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gIHZhciByb3VuZERvd24gPSB4ID0+IHggLSB4ICUgQkFTRV9QQUlSU19QRVJfRkVUQ0g7XG4gIHZhciBuZXdTdGFydCA9IE1hdGgubWF4KDEsIHJvdW5kRG93bihyYW5nZS5zdGFydCgpKSksXG4gICAgICBuZXdTdG9wID0gcm91bmREb3duKHJhbmdlLnN0b3AoKSArIEJBU0VfUEFJUlNfUEVSX0ZFVENIIC0gMSk7XG5cbiAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIG5ld1N0YXJ0LCBuZXdTdG9wKTtcbn1cblxuXG5mdW5jdGlvbiBjcmVhdGVGcm9tQmFtRmlsZShyZW1vdGVTb3VyY2U6IEJhbUZpbGUpOiBBbGlnbm1lbnREYXRhU291cmNlIHtcbiAgdmFyIHJlYWRzOiB7W2tleTpzdHJpbmddOiBBbGlnbm1lbnR9ID0ge307XG5cbiAgLy8gTWFwcGluZyBmcm9tIGNvbnRpZyBuYW1lIHRvIGNhbm9uaWNhbCBjb250aWcgbmFtZS5cbiAgdmFyIGNvbnRpZ05hbWVzOiB7W2tleTpzdHJpbmddOiBzdHJpbmd9ID0ge307XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10gPSBbXTtcblxuICBmdW5jdGlvbiBhZGRSZWFkKHJlYWQ6IEFsaWdubWVudCkge1xuICAgIHZhciBrZXkgPSByZWFkLmdldEtleSgpO1xuICAgIGlmICghcmVhZHNba2V5XSkge1xuICAgICAgcmVhZHNba2V5XSA9IHJlYWQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2F2ZUNvbnRpZ01hcHBpbmcoaGVhZGVyOiBPYmplY3QpIHtcbiAgICBoZWFkZXIucmVmZXJlbmNlcy5mb3JFYWNoKHJlZiA9PiB7XG4gICAgICB2YXIgbmFtZSA9IHJlZi5uYW1lO1xuICAgICAgY29udGlnTmFtZXNbbmFtZV0gPSBuYW1lO1xuICAgICAgY29udGlnTmFtZXNbJ2NocicgKyBuYW1lXSA9IG5hbWU7XG4gICAgICBpZiAobmFtZS5zbGljZSgwLCAzKSA9PSAnY2hyJykge1xuICAgICAgICBjb250aWdOYW1lc1tuYW1lLnNsaWNlKDMpXSA9IG5hbWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaChyYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICB2YXIgcmVmc1Byb21pc2UgPSAhXy5pc0VtcHR5KGNvbnRpZ05hbWVzKSA/IFEud2hlbigpIDogXG4gICAgICAgIHJlbW90ZVNvdXJjZS5oZWFkZXIudGhlbihzYXZlQ29udGlnTWFwcGluZyk7XG5cbiAgICAvLyBGb3IgQkFNcyB3aXRob3V0IGluZGV4IGNodW5rcywgd2UgbmVlZCB0byBmZXRjaCB0aGUgZW50aXJlIEJBSSBmaWxlXG4gICAgLy8gYmVmb3JlIHdlIGNhbiBrbm93IGhvdyBsYXJnZSB0aGUgQkFNIGhlYWRlciBpcy4gSWYgdGhlIGhlYWRlciBpc1xuICAgIC8vIHBlbmRpbmcsIGl0J3MgYWxtb3N0IGNlcnRhaW5seSBiZWNhdXNlIHRoZSBCQUkgZmlsZSBpcyBpbiBmbGlnaHQuXG4gICAgUS53aGVuKCkudGhlbigoKSA9PiB7XG4gICAgICBpZiAocmVmc1Byb21pc2UuaXNQZW5kaW5nKCkgJiYgIXJlbW90ZVNvdXJjZS5oYXNJbmRleENodW5rcykge1xuICAgICAgICBvLnRyaWdnZXIoJ25ldHdvcmtwcm9ncmVzcycsIHtcbiAgICAgICAgICBzdGF0dXM6ICdGZXRjaGluZyBCQU0gaW5kZXggLS0gdXNlIGluZGV4IGNodW5rcyB0byBzcGVlZCB0aGlzIHVwJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KS5kb25lKCk7XG5cbiAgICByZXR1cm4gcmVmc1Byb21pc2UudGhlbigoKSA9PiB7XG4gICAgICB2YXIgY29udGlnTmFtZSA9IGNvbnRpZ05hbWVzW3JhbmdlLmNvbnRpZ107XG4gICAgICB2YXIgaW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwoY29udGlnTmFtZSwgcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3ApO1xuXG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGludGVydmFsIGlzIGFscmVhZHkgaW4gdGhlIGNhY2hlLlxuICAgICAgLy8gSWYgbm90LCBpbW1lZGlhdGVseSBcImNvdmVyXCIgaXQgdG8gcHJldmVudCBkdXBsaWNhdGUgcmVxdWVzdHMuXG4gICAgICBpZiAoaW50ZXJ2YWwuaXNDb3ZlcmVkQnkoY292ZXJlZFJhbmdlcykpIHtcbiAgICAgICAgcmV0dXJuIFEud2hlbigpO1xuICAgICAgfVxuXG4gICAgICBpbnRlcnZhbCA9IGV4cGFuZFJhbmdlKGludGVydmFsKTtcbiAgICAgIHZhciBuZXdSYW5nZXMgPSBpbnRlcnZhbC5jb21wbGVtZW50SW50ZXJ2YWxzKGNvdmVyZWRSYW5nZXMpO1xuICAgICAgY292ZXJlZFJhbmdlcy5wdXNoKGludGVydmFsKTtcbiAgICAgIGNvdmVyZWRSYW5nZXMgPSBDb250aWdJbnRlcnZhbC5jb2FsZXNjZShjb3ZlcmVkUmFuZ2VzKTtcblxuICAgICAgcmV0dXJuIFEuYWxsKG5ld1Jhbmdlcy5tYXAocmFuZ2UgPT5cbiAgICAgICAgICByZW1vdGVTb3VyY2UuZ2V0QWxpZ25tZW50c0luUmFuZ2UocmFuZ2UpXG4gICAgICAgICAgICAucHJvZ3Jlc3MocHJvZ3Jlc3NFdmVudCA9PiB7XG4gICAgICAgICAgICAgIG8udHJpZ2dlcignbmV0d29ya3Byb2dyZXNzJywgcHJvZ3Jlc3NFdmVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVhZHMgPT4ge1xuICAgICAgICAgICAgICByZWFkcy5mb3JFYWNoKHJlYWQgPT4gYWRkUmVhZChyZWFkKSk7XG4gICAgICAgICAgICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICAgICAgICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEFsaWdubWVudHNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogQWxpZ25tZW50W10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcbiAgICBpZiAoXy5pc0VtcHR5KGNvbnRpZ05hbWVzKSkgcmV0dXJuIFtdO1xuXG4gICAgdmFyIGNhbm9uaWNhbFJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKGNvbnRpZ05hbWVzW3JhbmdlLmNvbnRpZ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSk7XG5cbiAgICByZXR1cm4gXy5maWx0ZXIocmVhZHMsIHJlYWQgPT4gcmVhZC5pbnRlcnNlY3RzKGNhbm9uaWNhbFJhbmdlKSk7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQ6IGZ1bmN0aW9uKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgICAgZmV0Y2gobmV3UmFuZ2UpLmRvbmUoKTtcbiAgICB9LFxuICAgIGdldEFsaWdubWVudHNJblJhbmdlLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvbmNlOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6ICgpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufVxuXG50eXBlIEJhbVNwZWMgPSB7XG4gIHVybDogc3RyaW5nO1xuICBpbmRleFVybDogc3RyaW5nO1xuICBpbmRleENodW5rcz86IE9iamVjdDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlKHNwZWM6IEJhbVNwZWMpOiBBbGlnbm1lbnREYXRhU291cmNlIHtcbiAgdmFyIHVybCA9IHNwZWMudXJsO1xuICBpZiAoIXVybCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBVUkwgZnJvbSB0cmFjayBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHNwZWMpfWApO1xuICB9XG4gIHZhciBpbmRleFVybCA9IHNwZWMuaW5kZXhVcmw7XG4gIGlmICghaW5kZXhVcmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgaW5kZXhVUkwgZnJvbSB0cmFjayBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHNwZWMpfWApO1xuICB9XG5cbiAgLy8gVE9ETzogdGhpcyBpcyBvdmVybHkgcmVwZXRpdGl2ZSwgc2VlIGZsb3cgaXNzdWUgZmFjZWJvb2svZmxvdyM0MzdcbiAgdmFyIGJhbUZpbGUgPSBzcGVjLmluZGV4Q2h1bmtzID9cbiAgICAgIG5ldyBCYW1GaWxlKG5ldyBSZW1vdGVGaWxlKHVybCksIG5ldyBSZW1vdGVGaWxlKGluZGV4VXJsKSwgc3BlYy5pbmRleENodW5rcykgOlxuICAgICAgbmV3IEJhbUZpbGUobmV3IFJlbW90ZUZpbGUodXJsKSwgbmV3IFJlbW90ZUZpbGUoaW5kZXhVcmwpKTtcbiAgcmV0dXJuIGNyZWF0ZUZyb21CYW1GaWxlKGJhbUZpbGUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tQmFtRmlsZVxufTtcbiIsIi8qIEBmbG93ICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtTdHJhbmR9IGZyb20gJy4uL0FsaWdubWVudCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQge0V2ZW50c30gZnJvbSAnYmFja2JvbmUnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IEludGVydmFsIGZyb20gJy4uL0ludGVydmFsJztcbmltcG9ydCBCaWdCZWQgZnJvbSAnLi4vZGF0YS9CaWdCZWQnO1xuXG5cbmV4cG9ydCB0eXBlIEdlbmUgPSB7XG4gIHBvc2l0aW9uOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+O1xuICBpZDogc3RyaW5nOyAgLy8gdHJhbnNjcmlwdCBJRCwgZS5nLiBcIkVOU1QwMDAwMDI2OTMwNVwiXG4gIHN0cmFuZDogU3RyYW5kO1xuICBjb2RpbmdSZWdpb246IEludGVydmFsOyAgLy8gbG9jdXMgb2YgY29kaW5nIHN0YXJ0XG4gIGV4b25zOiBBcnJheTxJbnRlcnZhbD47XG4gIGdlbmVJZDogc3RyaW5nOyAgLy8gZW5zZW1ibCBnZW5lIElEXG4gIG5hbWU6IHN0cmluZzsgIC8vIGh1bWFuLXJlYWRhYmxlIG5hbWUsIGUuZy4gXCJUUDUzXCJcbn1cblxuLy8gRmxvdyB0eXBlIGZvciBleHBvcnQuXG5leHBvcnQgdHlwZSBCaWdCZWRTb3VyY2UgPSB7XG4gIHJhbmdlQ2hhbmdlZDogKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkgPT4gdm9pZDtcbiAgZ2V0R2VuZXNJblJhbmdlOiAocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pID0+IEdlbmVbXTtcbiAgb246IChldmVudDogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgb2ZmOiAoZXZlbnQ6IHN0cmluZykgPT4gdm9pZDtcbiAgdHJpZ2dlcjogKGV2ZW50OiBzdHJpbmcsIC4uLmFyZ3M6YW55KSA9PiB2b2lkO1xufVxuXG4vLyBUaGUgZmllbGRzIGFyZSBkZXNjcmliZWQgYXQgaHR0cDovL2dlbm9tZS51Y3NjLmVkdS9GQVEvRkFRZm9ybWF0I2Zvcm1hdDFcbmZ1bmN0aW9uIHBhcnNlQmVkRmVhdHVyZShmKTogR2VuZSB7XG4gIHZhciBwb3NpdGlvbiA9IG5ldyBDb250aWdJbnRlcnZhbChmLmNvbnRpZywgZi5zdGFydCwgZi5zdG9wKSxcbiAgICAgIHggPSBmLnJlc3Quc3BsaXQoJ1xcdCcpLFxuICAgICAgLy8gZXhvbnMgYXJyYXlzIHNvbWV0aW1lcyBoYXZlIHRyYWlsaW5nIGNvbW1hc1xuICAgICAgZXhvbkxlbmd0aHMgPSB4WzddLnJlcGxhY2UoLywqJC8sICcnKS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpLFxuICAgICAgZXhvblN0YXJ0cyA9IHhbOF0ucmVwbGFjZSgvLCokLywgJycpLnNwbGl0KCcsJykubWFwKE51bWJlciksXG4gICAgICBleG9ucyA9IF8uemlwKGV4b25TdGFydHMsIGV4b25MZW5ndGhzKVxuICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbihbc3RhcnQsIGxlbmd0aF0pIHtcbiAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRlcnZhbChmLnN0YXJ0ICsgc3RhcnQsIGYuc3RhcnQgKyBzdGFydCArIGxlbmd0aCk7XG4gICAgICAgICAgICAgICB9KTtcblxuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uLFxuICAgIGlkOiB4WzBdLCAgLy8gZS5nLiBFTlNUMDAwMDAzNTk1OTdcbiAgICBzdHJhbmQ6IHhbMl0sICAvLyBlaXRoZXIgKyBvciAtXG4gICAgY29kaW5nUmVnaW9uOiBuZXcgSW50ZXJ2YWwoTnVtYmVyKHhbM10pLCBOdW1iZXIoeFs0XSkpLFxuICAgIGdlbmVJZDogeFs5XSxcbiAgICBuYW1lOiB4WzEwXSxcbiAgICBleG9uc1xuICB9O1xufVxuXG5cbmZ1bmN0aW9uIGNyZWF0ZUZyb21CaWdCZWRGaWxlKHJlbW90ZVNvdXJjZTogQmlnQmVkKTogQmlnQmVkU291cmNlIHtcbiAgLy8gQ29sbGVjdGlvbiBvZiBnZW5lcyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGxvYWRlZC5cbiAgdmFyIGdlbmVzOiB7W2tleTpzdHJpbmddOiBHZW5lfSA9IHt9O1xuXG4gIC8vIFJhbmdlcyBmb3Igd2hpY2ggd2UgaGF2ZSBjb21wbGV0ZSBpbmZvcm1hdGlvbiAtLSBubyBuZWVkIHRvIGhpdCBuZXR3b3JrLlxuICB2YXIgY292ZXJlZFJhbmdlczogQXJyYXk8Q29udGlnSW50ZXJ2YWw8c3RyaW5nPj4gPSBbXTtcblxuICBmdW5jdGlvbiBhZGRHZW5lKG5ld0dlbmUpIHtcbiAgICBpZiAoIWdlbmVzW25ld0dlbmUuaWRdKSB7XG4gICAgICBnZW5lc1tuZXdHZW5lLmlkXSA9IG5ld0dlbmU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0R2VuZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogR2VuZVtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICBfLmVhY2goZ2VuZXMsIGdlbmUgPT4ge1xuICAgICAgaWYgKHJhbmdlLmludGVyc2VjdHMoZ2VuZS5wb3NpdGlvbikpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGdlbmUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2gocmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3ApO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpbnRlcnZhbCBpcyBhbHJlYWR5IGluIHRoZSBjYWNoZS5cbiAgICBpZiAoaW50ZXJ2YWwuaXNDb3ZlcmVkQnkoY292ZXJlZFJhbmdlcykpIHtcbiAgICAgIHJldHVybiBRLndoZW4oKTtcbiAgICB9XG5cbiAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgIGNvdmVyZWRSYW5nZXMgPSBDb250aWdJbnRlcnZhbC5jb2FsZXNjZShjb3ZlcmVkUmFuZ2VzKTtcblxuICAgIHJldHVybiByZW1vdGVTb3VyY2UuZ2V0RmVhdHVyZUJsb2Nrc092ZXJsYXBwaW5nKGludGVydmFsKS50aGVuKGZlYXR1cmVCbG9ja3MgPT4ge1xuICAgICAgZmVhdHVyZUJsb2Nrcy5mb3JFYWNoKGZiID0+IHtcbiAgICAgICAgY292ZXJlZFJhbmdlcy5wdXNoKGZiLnJhbmdlKTtcbiAgICAgICAgY292ZXJlZFJhbmdlcyA9IENvbnRpZ0ludGVydmFsLmNvYWxlc2NlKGNvdmVyZWRSYW5nZXMpO1xuICAgICAgICB2YXIgZ2VuZXMgPSBmYi5yb3dzLm1hcChwYXJzZUJlZEZlYXR1cmUpO1xuICAgICAgICBnZW5lcy5mb3JFYWNoKGdlbmUgPT4gYWRkR2VuZShnZW5lKSk7XG4gICAgICAgIC8vd2UgaGF2ZSBuZXcgZGF0YSBmcm9tIG91ciBpbnRlcm5hbCBibG9jayByYW5nZVxuICAgICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCBmYi5yYW5nZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBvID0ge1xuICAgIHJhbmdlQ2hhbmdlZDogZnVuY3Rpb24obmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgICBmZXRjaChuZXdSYW5nZSkuZG9uZSgpO1xuICAgIH0sXG4gICAgZ2V0R2VuZXNJblJhbmdlLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6ICgpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBjcmVhdGUoZGF0YToge3VybDpzdHJpbmd9KTogQmlnQmVkU291cmNlIHtcbiAgdmFyIHVybCA9IGRhdGEudXJsO1xuICBpZiAoIXVybCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBVUkwgZnJvbSB0cmFjazogJHtKU09OLnN0cmluZ2lmeShkYXRhKX1gKTtcbiAgfVxuXG4gIHJldHVybiBjcmVhdGVGcm9tQmlnQmVkRmlsZShuZXcgQmlnQmVkKHVybCkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tQmlnQmVkRmlsZVxufTtcbiIsIi8qXG4gKiBUaGlzIGlzIGEgZHVtbXkgZGF0YSBzb3VyY2UgdG8gYmUgdXNlZCBieSB0cmFja3MgdGhhdCBkbyBub3QgZGVwZW5kIG9uIGRhdGEuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbnR5cGUgRW1wdHlTb3VyY2UgPSB7XG4gIHJhbmdlQ2hhbmdlZDogKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkgPT4gdm9pZDtcbiAgb246IChldmVudDogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgb2ZmOiAoZXZlbnQ6IHN0cmluZykgPT4gdm9pZDtcbiAgdHJpZ2dlcjogKGV2ZW50OiBzdHJpbmcsIC4uLmFyZ3M6YW55KSA9PiB2b2lkO1xufVxuXG52YXIgY3JlYXRlID0gKCk6IEVtcHR5U291cmNlID0+ICh7XG4gIHJhbmdlQ2hhbmdlZDogKCkgPT4ge30sXG4gIG9uOiAoKSA9PiB7fSxcbiAgb2ZmOiAoKSA9PiB7fSxcbiAgdHJpZ2dlcjogKCkgPT4ge31cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlXG59O1xuIiwiLyoqXG4gKiBBIGRhdGEgc291cmNlIHdoaWNoIGltcGxlbWVudHMgdGhlIEdBNEdIIHByb3RvY29sLlxuICogQ3VycmVudGx5IG9ubHkgdXNlZCB0byBsb2FkIGFsaWdubWVudHMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtBbGlnbm1lbnQsIEFsaWdubWVudERhdGFTb3VyY2V9IGZyb20gJy4uL0FsaWdubWVudCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBHQTRHSEFsaWdubWVudCBmcm9tICcuLi9HQTRHSEFsaWdubWVudCc7XG5cbnZhciBBTElHTk1FTlRTX1BFUl9SRVFVRVNUID0gMjAwOyAgLy8gVE9ETzogZXhwbGFpbiB0aGlzIGNob2ljZS5cblxuXG4vLyBHZW5vbWUgcmFuZ2VzIGFyZSByb3VuZGVkIHRvIG11bHRpcGxlcyBvZiB0aGlzIGZvciBmZXRjaGluZy5cbi8vIFRoaXMgcmVkdWNlcyBuZXR3b3JrIGFjdGl2aXR5IHdoaWxlIGZldGNoaW5nLlxuLy8gVE9ETzogdHVuZSB0aGlzIHZhbHVlIC0tIHNldHRpbmcgaXQgY2xvc2UgdG8gdGhlIHJlYWQgbGVuZ3RoIHdpbGwgcmVzdWx0IGluXG4vLyBsb3RzIG9mIHJlYWRzIGJlaW5nIGZldGNoZWQgdHdpY2UsIGJ1dCBzZXR0aW5nIGl0IHRvbyBsYXJnZSB3aWxsIHJlc3VsdCBpblxuLy8gYnVsa2llciByZXF1ZXN0cy5cbnZhciBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IDEwMDtcblxuZnVuY3Rpb24gZXhwYW5kUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgdmFyIHJvdW5kRG93biA9IHggPT4geCAtIHggJSBCQVNFX1BBSVJTX1BFUl9GRVRDSDtcbiAgdmFyIG5ld1N0YXJ0ID0gTWF0aC5tYXgoMSwgcm91bmREb3duKHJhbmdlLnN0YXJ0KCkpKSxcbiAgICAgIG5ld1N0b3AgPSByb3VuZERvd24ocmFuZ2Uuc3RvcCgpICsgQkFTRV9QQUlSU19QRVJfRkVUQ0ggLSAxKTtcblxuICByZXR1cm4gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgbmV3U3RhcnQsIG5ld1N0b3ApO1xufVxuXG50eXBlIEdBNEdIU3BlYyA9IHtcbiAgZW5kcG9pbnQ6IHN0cmluZztcbiAgcmVhZEdyb3VwSWQ6IHN0cmluZztcbiAgLy8gSEFDSyBpZiBzZXQsIHN0cmlwcyBcImNoclwiIGZyb20gcmVmZXJlbmNlIG5hbWVzLlxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2dhNGdoL3NjaGVtYXMvaXNzdWVzLzM2MlxuICBraWxsQ2hyOiBib29sZWFuO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlKHNwZWM6IEdBNEdIU3BlYyk6IEFsaWdubWVudERhdGFTb3VyY2Uge1xuICBpZiAoc3BlYy5lbmRwb2ludC5zbGljZSgtNikgIT0gJ3YwLjUuMScpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ09ubHkgdjAuNS4xIG9mIHRoZSBHQTRHSCBBUEkgaXMgc3VwcG9ydGVkIGJ5IHBpbGV1cC5qcycpO1xuICB9XG5cbiAgdmFyIHVybCA9IHNwZWMuZW5kcG9pbnQgKyAnL3JlYWRzL3NlYXJjaCc7XG5cbiAgdmFyIHJlYWRzOiB7W2tleTpzdHJpbmddOiBBbGlnbm1lbnR9ID0ge307XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10gPSBbXTtcblxuICBmdW5jdGlvbiBhZGRSZWFkc0Zyb21SZXNwb25zZShyZXNwb25zZTogT2JqZWN0KSB7XG4gICAgcmVzcG9uc2UuYWxpZ25tZW50cy5mb3JFYWNoKGFsaWdubWVudCA9PiB7XG4gICAgICAvLyBvcHRpbWl6YXRpb246IGRvbid0IGJvdGhlciBjb25zdHJ1Y3RpbmcgYSBHQTRHSEFsaWdubWVudCB1bmxlc3MgaXQncyBuZXcuXG4gICAgICB2YXIga2V5ID0gR0E0R0hBbGlnbm1lbnQua2V5RnJvbUdBNEdIUmVzcG9uc2UoYWxpZ25tZW50KTtcbiAgICAgIGlmIChrZXkgaW4gcmVhZHMpIHJldHVybjtcblxuICAgICAgdmFyIGdhNGdoQWxpZ25tZW50ID0gbmV3IEdBNEdIQWxpZ25tZW50KGFsaWdubWVudCk7XG4gICAgICByZWFkc1trZXldID0gZ2E0Z2hBbGlnbm1lbnQ7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByYW5nZUNoYW5nZWQobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgLy8gSEFDSyBGT1IgREVNT1xuICAgIHZhciBjb250aWcgPSBzcGVjLmtpbGxDaHIgPyBuZXdSYW5nZS5jb250aWcucmVwbGFjZSgvXmNoci8sICcnKSA6IG5ld1JhbmdlLmNvbnRpZztcbiAgICB2YXIgaW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwoY29udGlnLCBuZXdSYW5nZS5zdGFydCwgbmV3UmFuZ2Uuc3RvcCk7XG4gICAgaWYgKGludGVydmFsLmlzQ292ZXJlZEJ5KGNvdmVyZWRSYW5nZXMpKSByZXR1cm47XG5cbiAgICBpbnRlcnZhbCA9IGV4cGFuZFJhbmdlKGludGVydmFsKTtcblxuICAgIC8vIFdlIFwiY292ZXJcIiB0aGUgaW50ZXJ2YWwgaW1tZWRpYXRlbHkgKGJlZm9yZSB0aGUgcmVhZHMgaGF2ZSBhcnJpdmVkKSB0b1xuICAgIC8vIHByZXZlbnQgZHVwbGljYXRlIG5ldHdvcmsgcmVxdWVzdHMuXG4gICAgY292ZXJlZFJhbmdlcy5wdXNoKGludGVydmFsKTtcbiAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG4gICAgZmV0Y2hBbGlnbm1lbnRzRm9ySW50ZXJ2YWwoaW50ZXJ2YWwsIG51bGwsIDEgLyogZmlyc3QgcmVxdWVzdCAqLyk7XG4gIH1cblxuICBmdW5jdGlvbiBub3RpZnlGYWlsdXJlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIG8udHJpZ2dlcignbmV0d29ya2ZhaWx1cmUnLCBtZXNzYWdlKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2hBbGlnbm1lbnRzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUb2tlbjogP3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtUmVxdWVzdHM6IG51bWJlcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignUE9TVCcsIHVybCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHJlc3BvbnNlID0gdGhpcy5yZXNwb25zZTtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgbm90aWZ5RmFpbHVyZSh0aGlzLnN0YXR1cyArICcgJyArIHRoaXMuc3RhdHVzVGV4dCArICcgJyArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlKSB7XG4gICAgICAgICAgbm90aWZ5RmFpbHVyZSgnRXJyb3IgZnJvbSBHQTRHSCBlbmRwb2ludDogJyArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWRkUmVhZHNGcm9tUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICAgIG8udHJpZ2dlcignbmV3ZGF0YScsIHJhbmdlKTsgIC8vIGRpc3BsYXkgZGF0YSBhcyBpdCBjb21lcyBpbi5cbiAgICAgICAgICBpZiAocmVzcG9uc2UubmV4dFBhZ2VUb2tlbikge1xuICAgICAgICAgICAgZmV0Y2hBbGlnbm1lbnRzRm9ySW50ZXJ2YWwocmFuZ2UsIHJlc3BvbnNlLm5leHRQYWdlVG9rZW4sIG51bVJlcXVlc3RzICsgMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbihlKSB7XG4gICAgICBub3RpZnlGYWlsdXJlKCdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1czogJyArIHRoaXMuc3RhdHVzKTtcbiAgICB9KTtcblxuICAgIG8udHJpZ2dlcignbmV0d29ya3Byb2dyZXNzJywge251bVJlcXVlc3RzfSk7XG4gICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgcGFnZVRva2VuOiBwYWdlVG9rZW4sXG4gICAgICBwYWdlU2l6ZTogQUxJR05NRU5UU19QRVJfUkVRVUVTVCxcbiAgICAgIHJlYWRHcm91cElkczogW3NwZWMucmVhZEdyb3VwSWRdLFxuICAgICAgcmVmZXJlbmNlTmFtZTogcmFuZ2UuY29udGlnLFxuICAgICAgc3RhcnQ6IHJhbmdlLnN0YXJ0KCksXG4gICAgICBlbmQ6IHJhbmdlLnN0b3AoKVxuICAgIH0pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEFsaWdubWVudHNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogQWxpZ25tZW50W10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcblxuICAgIC8vIEhBQ0sgRk9SIERFTU9cbiAgICBpZiAoc3BlYy5raWxsQ2hyKSB7XG4gICAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcucmVwbGFjZSgvXmNoci8sICcnKSwgcmFuZ2Uuc3RhcnQoKSwgcmFuZ2Uuc3RvcCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIF8uZmlsdGVyKHJlYWRzLCByZWFkID0+IHJlYWQuaW50ZXJzZWN0cyhyYW5nZSkpO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkLFxuICAgIGdldEFsaWdubWVudHNJblJhbmdlLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvbmNlOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6ICgpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuICByZXR1cm4gbztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZVxufTtcbiIsIi8qKlxuICogVGhlIFwiZ2x1ZVwiIGJldHdlZW4gVHdvQml0LmpzIGFuZCBHZW5vbWVUcmFjay5qcy5cbiAqXG4gKiBHZW5vbWVUcmFjayBpcyBwdXJlIHZpZXcgY29kZSAtLSBpdCByZW5kZXJzIGRhdGEgd2hpY2ggaXMgYWxyZWFkeSBpbi1tZW1vcnlcbiAqIGluIHRoZSBicm93c2VyLlxuICpcbiAqIFR3b0JpdCBpcyBwdXJlbHkgZm9yIGRhdGEgcGFyc2luZyBhbmQgZmV0Y2hpbmcuIEl0IG9ubHkga25vd3MgaG93IHRvIHJldHVyblxuICogcHJvbWlzZXMgZm9yIHZhcmlvdXMgZ2Vub21lIGZlYXR1cmVzLlxuICpcbiAqIFRoaXMgY29kZSBhY3RzIGFzIGEgYnJpZGdlIGJldHdlZW4gdGhlIHR3by4gSXQgbWFpbnRhaW5zIGEgbG9jYWwgdmVyc2lvbiBvZlxuICogdGhlIGRhdGEsIGZldGNoaW5nIHJlbW90ZSBkYXRhIGFuZCBpbmZvcm1pbmcgdGhlIHZpZXcgd2hlbiBpdCBiZWNvbWVzXG4gKiBhdmFpbGFibGUuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBUd29CaXQgZnJvbSAnLi4vZGF0YS9Ud29CaXQnO1xuaW1wb3J0IFJlbW90ZUZpbGUgZnJvbSAnLi4vUmVtb3RlRmlsZSc7XG5pbXBvcnQgU2VxdWVuY2VTdG9yZSBmcm9tICcuLi9TZXF1ZW5jZVN0b3JlJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5cblxuLy8gUmVxdWVzdHMgZm9yIDJiaXQgcmFuZ2VzIGFyZSBleHBhbmRlZCB0byBiZWdpbiAmIGVuZCBhdCBtdWx0aXBsZXMgb2YgdGhpc1xuLy8gY29uc3RhbnQuIERvaW5nIHRoaXMgbWVhbnMgdGhhdCBwYW5uaW5nIHR5cGljYWxseSB3b24ndCByZXF1aXJlXG4vLyBhZGRpdGlvbmFsIG5ldHdvcmsgcmVxdWVzdHMuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDAwMDtcblxudmFyIE1BWF9CQVNFX1BBSVJTX1RPX0ZFVENIID0gMTAwMDAwO1xuXG5cbi8vIEZsb3cgdHlwZSBmb3IgZXhwb3J0LlxuZXhwb3J0IHR5cGUgVHdvQml0U291cmNlID0ge1xuICByYW5nZUNoYW5nZWQ6IChuZXdSYW5nZTogR2Vub21lUmFuZ2UpID0+IHZvaWQ7XG4gIGdldFJhbmdlOiAocmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiB7W2tleTpzdHJpbmddOiA/c3RyaW5nfTtcbiAgZ2V0UmFuZ2VBc1N0cmluZzogKHJhbmdlOiBHZW5vbWVSYW5nZSkgPT4gc3RyaW5nO1xuICBjb250aWdMaXN0OiAoKSA9PiBzdHJpbmdbXTtcbiAgbm9ybWFsaXplUmFuZ2U6IChyYW5nZTogR2Vub21lUmFuZ2UpID0+IFEuUHJvbWlzZTxHZW5vbWVSYW5nZT47XG4gIG9uOiAoZXZlbnQ6IHN0cmluZywgaGFuZGxlcjogRnVuY3Rpb24pID0+IHZvaWQ7XG4gIG9uY2U6IChldmVudDogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgb2ZmOiAoZXZlbnQ6IHN0cmluZykgPT4gdm9pZDtcbiAgdHJpZ2dlcjogKGV2ZW50OiBzdHJpbmcsIC4uLmFyZ3M6YW55KSA9PiB2b2lkO1xufVxuXG4vLyBFeHBhbmQgcmFuZ2UgdG8gYmVnaW4gYW5kIGVuZCBvbiBtdWx0aXBsZXMgb2YgQkFTRV9QQUlSU19QRVJfRkVUQ0guXG5mdW5jdGlvbiBleHBhbmRSYW5nZShyYW5nZSkge1xuICB2YXIgcm91bmREb3duID0geCA9PiB4IC0geCAlIEJBU0VfUEFJUlNfUEVSX0ZFVENIO1xuICB2YXIgbmV3U3RhcnQgPSBNYXRoLm1heCgwLCByb3VuZERvd24ocmFuZ2Uuc3RhcnQoKSkpLFxuICAgICAgbmV3U3RvcCA9IHJvdW5kRG93bihyYW5nZS5zdG9wKCkgKyBCQVNFX1BBSVJTX1BFUl9GRVRDSCAtIDEpO1xuXG4gIHJldHVybiBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCBuZXdTdGFydCwgbmV3U3RvcCk7XG59XG5cblxudmFyIGNyZWF0ZUZyb21Ud29CaXRGaWxlID0gZnVuY3Rpb24ocmVtb3RlU291cmNlOiBUd29CaXQpOiBUd29CaXRTb3VyY2Uge1xuICAvLyBMb2NhbCBjYWNoZSBvZiBnZW5vbWljIGRhdGEuXG4gIHZhciBjb250aWdMaXN0ID0gW107XG4gIHZhciBzdG9yZSA9IG5ldyBTZXF1ZW5jZVN0b3JlKCk7XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzID0gKFtdOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10pO1xuXG4gIGZ1bmN0aW9uIGZldGNoKHJhbmdlOiBDb250aWdJbnRlcnZhbCkge1xuICAgIHZhciBzcGFuID0gcmFuZ2UubGVuZ3RoKCk7XG4gICAgaWYgKHNwYW4gPiBNQVhfQkFTRV9QQUlSU19UT19GRVRDSCkge1xuICAgICAgLy9pbmZvcm0gdGhhdCB3ZSB3b24ndCBmZXRjaCB0aGUgZGF0YVxuICAgICAgby50cmlnZ2VyKCduZXdkYXRhcmVmdXNlZCcsIHJhbmdlKTtcbiAgICAgIHJldHVybiBRLndoZW4oKTsgIC8vIGVtcHR5IHByb21pc2VcbiAgICB9XG4gICAgLy9ub3cgd2UgY2FuIGFkZCByZWdpb24gdG8gY292ZXJlZCByZWdpb25zIFxuICAgIC8vZG9pbmcgaXQgZWFybGllciB3b3VsZCBwcm92aWRlIGluY29uc2lzdGVuY3lcbiAgICBjb3ZlcmVkUmFuZ2VzLnB1c2gocmFuZ2UpO1xuICAgIGNvdmVyZWRSYW5nZXMgPSBDb250aWdJbnRlcnZhbC5jb2FsZXNjZShjb3ZlcmVkUmFuZ2VzKTtcblxuICAgIHJlbW90ZVNvdXJjZS5nZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCgpLCByYW5nZS5zdG9wKCkpXG4gICAgICAudGhlbihsZXR0ZXJzID0+IHtcbiAgICAgICAgaWYgKCFsZXR0ZXJzKSByZXR1cm47XG4gICAgICAgIGlmIChsZXR0ZXJzLmxlbmd0aCA8IHJhbmdlLmxlbmd0aCgpKSB7XG4gICAgICAgICAgLy8gUHJvYmFibHkgYXQgRU9GXG4gICAgICAgICAgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLnN0YXJ0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc3RhcnQoKSArIGxldHRlcnMubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RvcmUuc2V0UmFuZ2UocmFuZ2UsIGxldHRlcnMpO1xuICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgIG8udHJpZ2dlcignbmV3ZGF0YScsIHJhbmdlKTtcbiAgICAgIH0pLmRvbmUoKTtcbiAgfVxuXG4gIC8vIFRoaXMgZWl0aGVyIGFkZHMgb3IgcmVtb3ZlcyBhICdjaHInIGFzIG5lZWRlZC5cbiAgZnVuY3Rpb24gbm9ybWFsaXplUmFuZ2VTeW5jKHJhbmdlOiBHZW5vbWVSYW5nZSk6IEdlbm9tZVJhbmdlIHtcbiAgICBpZiAoY29udGlnTGlzdC5pbmRleE9mKHJhbmdlLmNvbnRpZykgPj0gMCkge1xuICAgICAgcmV0dXJuIHJhbmdlO1xuICAgIH1cbiAgICB2YXIgYWx0Q29udGlnID0gdXRpbHMuYWx0Q29udGlnTmFtZShyYW5nZS5jb250aWcpO1xuICAgIGlmIChjb250aWdMaXN0LmluZGV4T2YoYWx0Q29udGlnKSA+PSAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb250aWc6IGFsdENvbnRpZyxcbiAgICAgICAgc3RhcnQ6IHJhbmdlLnN0YXJ0LFxuICAgICAgICBzdG9wOiByYW5nZS5zdG9wXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcmFuZ2U7ICAvLyBsZXQgaXQgZmFpbCB3aXRoIHRoZSBvcmlnaW5hbCBjb250aWdcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVJhbmdlKHJhbmdlOiBHZW5vbWVSYW5nZSk6IFEuUHJvbWlzZTxHZW5vbWVSYW5nZT4ge1xuICAgIHJldHVybiBjb250aWdQcm9taXNlLnRoZW4oKCkgPT4gbm9ybWFsaXplUmFuZ2VTeW5jKHJhbmdlKSk7XG4gIH1cblxuICAvLyBSZXR1cm5zIGEge1wiY2hyMTI6MTIzXCIgLT4gXCJbQVRDR11cIn0gbWFwcGluZyBmb3IgdGhlIHJhbmdlLlxuICBmdW5jdGlvbiBnZXRSYW5nZShyYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICByZXR1cm4gc3RvcmUuZ2V0QXNPYmplY3RzKENvbnRpZ0ludGVydmFsLmZyb21HZW5vbWVSYW5nZShyYW5nZSkpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHN0cmluZyBvZiBiYXNlIHBhaXJzIGZvciB0aGlzIHJhbmdlLlxuICBmdW5jdGlvbiBnZXRSYW5nZUFzU3RyaW5nKHJhbmdlOiBHZW5vbWVSYW5nZSk6IHN0cmluZyB7XG4gICAgaWYgKCFyYW5nZSkgcmV0dXJuICcnO1xuICAgIHJldHVybiBzdG9yZS5nZXRBc1N0cmluZyhDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UocmFuZ2UpKTtcbiAgfVxuXG4gIC8vIEZldGNoIHRoZSBjb250aWcgbGlzdCBpbW1lZGlhdGVseS5cbiAgdmFyIGNvbnRpZ1Byb21pc2UgPSByZW1vdGVTb3VyY2UuZ2V0Q29udGlnTGlzdCgpLnRoZW4oYyA9PiB7XG4gICAgY29udGlnTGlzdCA9IGM7XG4gICAgby50cmlnZ2VyKCdjb250aWdzJywgY29udGlnTGlzdCk7XG4gICAgcmV0dXJuIGM7XG4gIH0pO1xuICBjb250aWdQcm9taXNlLmRvbmUoKTtcblxuICB2YXIgbyA9IHtcbiAgICAvLyBUaGUgcmFuZ2UgaGVyZSBpcyAwLWJhc2VkLCBpbmNsdXNpdmVcbiAgICByYW5nZUNoYW5nZWQ6IGZ1bmN0aW9uKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgICAgbm9ybWFsaXplUmFuZ2UobmV3UmFuZ2UpLnRoZW4ociA9PiB7XG4gICAgICAgIHZhciByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChyLmNvbnRpZywgci5zdGFydCwgci5zdG9wKTtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGludGVydmFsIGlzIGFscmVhZHkgaW4gdGhlIGNhY2hlLlxuICAgICAgICBpZiAocmFuZ2UuaXNDb3ZlcmVkQnkoY292ZXJlZFJhbmdlcykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByYW5nZSA9IGV4cGFuZFJhbmdlKHJhbmdlKTtcbiAgICAgICAgdmFyIG5ld1JhbmdlcyA9IHJhbmdlLmNvbXBsZW1lbnRJbnRlcnZhbHMoY292ZXJlZFJhbmdlcyk7XG5cbiAgICAgICAgZm9yICh2YXIgbmV3UmFuZ2Ugb2YgbmV3UmFuZ2VzKSB7XG4gICAgICAgICAgZmV0Y2gobmV3UmFuZ2UpO1xuICAgICAgICB9XG4gICAgICB9KS5kb25lKCk7XG4gICAgfSxcbiAgICAvLyBUaGUgcmFuZ2VzIHBhc3NlZCB0byB0aGVzZSBtZXRob2RzIGFyZSAwLWJhc2VkXG4gICAgZ2V0UmFuZ2UsXG4gICAgZ2V0UmFuZ2VBc1N0cmluZyxcbiAgICBjb250aWdMaXN0OiAoKSA9PiBjb250aWdMaXN0LFxuICAgIG5vcm1hbGl6ZVJhbmdlLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvbmNlOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6ICgpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlKGRhdGE6IHt1cmw6c3RyaW5nfSk6IFR3b0JpdFNvdXJjZSB7XG4gIHZhciB1cmwgPSBkYXRhLnVybDtcbiAgaWYgKCF1cmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgVVJMIGZyb20gdHJhY2s6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG4gIH1cblxuICByZXR1cm4gY3JlYXRlRnJvbVR3b0JpdEZpbGUobmV3IFR3b0JpdChuZXcgUmVtb3RlRmlsZSh1cmwpKSk7XG59XG5cbi8vIEdldHRlci9zZXR0ZXIgZm9yIGJhc2UgcGFpcnMgcGVyIGZldGNoLlxuLy8gVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGZvciB0ZXN0aW5nLlxuZnVuY3Rpb24gdGVzdEJhc2VQYWlyc1RvRmV0Y2gobnVtPzogbnVtYmVyKTogYW55IHtcbiAgaWYgKG51bSkge1xuICAgIEJBU0VfUEFJUlNfUEVSX0ZFVENIID0gbnVtO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBCQVNFX1BBSVJTX1BFUl9GRVRDSDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tVHdvQml0RmlsZSxcbiAgdGVzdEJhc2VQYWlyc1RvRmV0Y2hcbn07XG4iLCIvKipcbiAqIENhY2hpbmcgJiBwcmVmZXRjaGluZyBmb3IgVkNGIHNvdXJjZXMuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7VmFyaWFudH0gZnJvbSAnLi4vZGF0YS92Y2YnO1xuXG5pbXBvcnQgRXZlbnRzIGZyb20gJ2JhY2tib25lJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcbmltcG9ydCBMb2NhbFN0cmluZ0ZpbGUgZnJvbSAnLi4vTG9jYWxTdHJpbmdGaWxlJztcbmltcG9ydCBWY2ZGaWxlIGZyb20gJy4uL2RhdGEvdmNmJztcblxuZXhwb3J0IHR5cGUgVmNmRGF0YVNvdXJjZSA9IHtcbiAgcmFuZ2VDaGFuZ2VkOiAobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiB2b2lkO1xuICBnZXRGZWF0dXJlc0luUmFuZ2U6IChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikgPT4gVmFyaWFudFtdO1xuICBvbjogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nKSA9PiB2b2lkO1xuICB0cmlnZ2VyOiAoZXZlbnQ6IHN0cmluZywgLi4uYXJnczphbnkpID0+IHZvaWQ7XG59O1xuXG5cbnZhciBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IDEwMDtcbmZ1bmN0aW9uIGV4cGFuZFJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gIHZhciByb3VuZERvd24gPSB4ID0+IHggLSB4ICUgQkFTRV9QQUlSU19QRVJfRkVUQ0g7XG4gIHZhciBuZXdTdGFydCA9IE1hdGgubWF4KDEsIHJvdW5kRG93bihyYW5nZS5zdGFydCgpKSksXG4gICAgICBuZXdTdG9wID0gcm91bmREb3duKHJhbmdlLnN0b3AoKSArIEJBU0VfUEFJUlNfUEVSX0ZFVENIIC0gMSk7XG5cbiAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIG5ld1N0YXJ0LCBuZXdTdG9wKTtcbn1cblxuZnVuY3Rpb24gdmFyaWFudEtleSh2OiBWYXJpYW50KTogc3RyaW5nIHtcbiAgcmV0dXJuIGAke3YuY29udGlnfToke3YucG9zaXRpb259YDtcbn1cblxuXG5mdW5jdGlvbiBjcmVhdGVGcm9tVmNmRmlsZShyZW1vdGVTb3VyY2U6IFZjZkZpbGUpOiBWY2ZEYXRhU291cmNlIHtcbiAgdmFyIHZhcmlhbnRzOiB7W2tleTogc3RyaW5nXTogVmFyaWFudH0gPSB7fTtcblxuICAvLyBSYW5nZXMgZm9yIHdoaWNoIHdlIGhhdmUgY29tcGxldGUgaW5mb3JtYXRpb24gLS0gbm8gbmVlZCB0byBoaXQgbmV0d29yay5cbiAgdmFyIGNvdmVyZWRSYW5nZXM6IENvbnRpZ0ludGVydmFsPHN0cmluZz5bXSA9IFtdO1xuXG4gIGZ1bmN0aW9uIGFkZFZhcmlhbnQodjogVmFyaWFudCkge1xuICAgIHZhciBrZXkgPSB2YXJpYW50S2V5KHYpO1xuICAgIGlmICghdmFyaWFudHNba2V5XSkge1xuICAgICAgdmFyaWFudHNba2V5XSA9IHY7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2gocmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3ApO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpbnRlcnZhbCBpcyBhbHJlYWR5IGluIHRoZSBjYWNoZS5cbiAgICBpZiAoaW50ZXJ2YWwuaXNDb3ZlcmVkQnkoY292ZXJlZFJhbmdlcykpIHtcbiAgICAgIHJldHVybiBRLndoZW4oKTtcbiAgICB9XG5cbiAgICBpbnRlcnZhbCA9IGV4cGFuZFJhbmdlKGludGVydmFsKTtcblxuICAgIC8vIFwiQ292ZXJcIiB0aGUgcmFuZ2UgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBkdXBsaWNhdGUgZmV0Y2hlcy5cbiAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgIGNvdmVyZWRSYW5nZXMgPSBDb250aWdJbnRlcnZhbC5jb2FsZXNjZShjb3ZlcmVkUmFuZ2VzKTtcbiAgICByZXR1cm4gcmVtb3RlU291cmNlLmdldEZlYXR1cmVzSW5SYW5nZShpbnRlcnZhbCkudGhlbih2YXJpYW50cyA9PiB7XG4gICAgICB2YXJpYW50cy5mb3JFYWNoKHZhcmlhbnQgPT4gYWRkVmFyaWFudCh2YXJpYW50KSk7XG4gICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCBpbnRlcnZhbCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBWYXJpYW50W10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTsgIC8vIFhYWCB3aHkgd291bGQgdGhpcyBoYXBwZW4/XG4gICAgcmV0dXJuIF8uZmlsdGVyKHZhcmlhbnRzLCB2ID0+IHJhbmdlLmNockNvbnRhaW5zTG9jdXModi5jb250aWcsIHYucG9zaXRpb24pKTtcbiAgfVxuXG4gIHZhciBvID0ge1xuICAgIHJhbmdlQ2hhbmdlZDogZnVuY3Rpb24obmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgICBmZXRjaChuZXdSYW5nZSkuZG9uZSgpO1xuICAgIH0sXG4gICAgZ2V0RmVhdHVyZXNJblJhbmdlLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6ICgpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBjcmVhdGUoZGF0YToge3VybD86IHN0cmluZywgY29udGVudD86IHN0cmluZ30pOiBWY2ZEYXRhU291cmNlIHtcbiAgdmFyIHt1cmwsIGNvbnRlbnR9ID0gZGF0YTtcbiAgaWYgKHVybCkge1xuICAgIHJldHVybiBjcmVhdGVGcm9tVmNmRmlsZShuZXcgVmNmRmlsZShuZXcgUmVtb3RlRmlsZSh1cmwpKSk7XG4gIH0gZWxzZSBpZiAoY29udGVudCkge1xuICAgIHJldHVybiBjcmVhdGVGcm9tVmNmRmlsZShuZXcgVmNmRmlsZShuZXcgTG9jYWxTdHJpbmdGaWxlKGNvbnRlbnQpKSk7XG4gIH1cbiAgLy8gSWYgbm8gVVJMIG9yIGNvbnRlbnQgaXMgcGFzc2VkLCBmYWlsXG4gIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBVUkwgb3IgY29udGVudCBmcm9tIHRyYWNrOiAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tVmNmRmlsZVxufTtcbiIsIi8qKlxuICogQ2VudHJhbCBjb2xsZWN0aW9uIG9mIHN0eWxpbmcgc2V0dGluZ3MuXG4gKiBVbnRpbCB3ZSBmaWd1cmUgb3V0IGEgYmV0dGVyIHN0b3J5IGFyb3VuZCBjYW52YXMgJiBDU1MsIHRoZXkgbGl2ZSBoZXJlLlxuICpcbiAqIEBmbG93XG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvLyBDb2xvcnMgZm9yIGluZGl2aWR1YWwgYmFzZSBwYWlyc1xuICBCQVNFX0NPTE9SUzoge1xuICAgICdBJzogJyMxODg3MTInLFxuICAgICdHJzogJyNDNDVDMTYnLFxuICAgICdDJzogJyMwNjAwRjknLFxuICAgICdUJzogJyNGNzAwMTYnLFxuICAgICdVJzogJyNGNzAwMTYnLFxuICAgICdOJzogJ2JsYWNrJ1xuICB9LFxuXG4gIC8vIFN0eWxlcyBmb3IgYmFzZSBwYWlycyB3aGljaCBhcmUgcmVuZGVyZWQgYXMgbGV0dGVyc1xuICBMT09TRV9URVhUX1NUWUxFOiBgMjRweCAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYCxcbiAgVElHSFRfVEVYVF9TVFlMRTogYGJvbGQgMTJweCAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYCxcblxuICAvLyBHZW5lIHRyYWNrXG4gIEdFTkVfQVJST1dfU0laRTogNCxcbiAgR0VORV9DT0xPUjogJ2JsdWUnLCAgLy8gY29sb3Igb2YgdGhlIGdlbmUgbGluZSwgZXhvbnMsIHRleHQsIGV0Yy5cbiAgR0VORV9DT01QTEVNRU5UX0NPTE9SOiAnd2hpdGUnLCAgLy8gYSBjb2xvciB2aXNpYmxlIG9uIHRvcCBvZiBHRU5FX0NPTE9SXG4gIEdFTkVfRk9OVDogYCdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWZgLFxuICBHRU5FX0ZPTlRfU0laRTogMTYsXG4gIEdFTkVfVEVYVF9QQURESU5HOiA1LCAgLy8gc3BhY2UgYmV0d2VlbiBib3R0b20gb2YgY29kaW5nIGV4b24gJiB0b3Agb2YgZ2VuZSBuYW1lXG5cbiAgLy8gUGlsZXVwIHRyYWNrXG4gIEFMSUdOTUVOVF9DT0xPUjogJyNjOGM4YzgnLFxuICBBTElHTk1FTlRfTUlOVVNfU1RSQU5EX0NPTE9SOiAncmdiKDE3NiwgMTc2LCAyMzYpJyxcbiAgQUxJR05NRU5UX1BMVVNfU1RSQU5EX0NPTE9SOiAncmdiKDIzNiwgMTc2LCAxNzYpJyxcbiAgREVMRVRFX0NPTE9SOiAnYmxhY2snLFxuICBJTlNFUlRfQ09MT1I6ICdyZ2IoOTcsIDAsIDIxNiknLFxuXG4gIC8vIENvdmVyYWdlIHRyYWNrXG4gIENPVkVSQUdFX0ZPTlRfU1RZTEU6IGBib2xkIDlweCAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYCxcbiAgQ09WRVJBR0VfRk9OVF9DT0xPUjogJ2JsYWNrJyxcbiAgQ09WRVJBR0VfVElDS19MRU5HVEg6IDUsXG4gIENPVkVSQUdFX1RFWFRfUEFERElORzogMywgIC8vIHNwYWNlIGJldHdlZW4gYXhpcyB0aWNrcyBhbmQgdGV4dFxuICBDT1ZFUkFHRV9URVhUX1lfT0ZGU0VUOiAzLCAgLy8gc28gdGhhdCB0aWNrcyBhbmQgdGV4dHMgYWxpZ24gYmV0dGVyXG4gIENPVkVSQUdFX0JJTl9DT0xPUjogJyNhMGEwYTAnLFxuICBDT1ZFUkFHRV9NSU5fQkFSX1dJRFRIX0ZPUl9HQVA6IDgsICAvLyBzaG93IGEgMXB4IGdhcCBiZXR3ZWVuIGJhcnMgYXQgdGhpcyByZXNvbHV0aW9uXG5cbiAgLy8gU2NhbGUgVHJhY2tcbiAgU0NBTEVfTElORV9QQURESU5HOiA0MCwgIC8vIHNwYWNlIGJldHdlZW4gbWlkIHBvaW50IGFuZCBsZWZ0L3JpZ2h0IGxpbmVzXG4gIFNDQUxFX0ZPTlRfU1RZTEU6IGBib2xkIDEycHggJ0hlbHZldGljYSBOZXVlJywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZmAsXG4gIFNDQUxFX1RFWFRfWV9PRkZTRVQ6IDUsICAvLyBzbyB0aGF0IGxpbmVzIGFuZCB0aGUgdGV4dCBhbGlnbiBiZXR0ZXJcbiAgU0NBTEVfRk9OVF9DT0xPUjogJ2JsYWNrJyxcbiAgU0NBTEVfQVJST1dfU0laRTogNCxcblxuICAvLyBMb2NhdGlvbiB0cmFja1xuICBMT0NfVEVYVF9QQURESU5HOiA1LCAgLy8gc3BhY2UgYmV0d2VlbiBtaWQtcG9pbnQgbGFiZWwgYW5kIHRpY2tcbiAgTE9DX1RJQ0tfTEVOR1RIOiAxMCxcbiAgTE9DX1RFWFRfWV9PRkZTRVQ6IDUsICAvLyBzbyB0aGF0IHRoZSBsaW5lIGFuZCB0aGUgdGV4dCBhbGlnbiBiZXR0ZXJcbiAgTE9DX0ZPTlRfU1RZTEU6IGAxM3B4ICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWZgLFxuICBMT0NfRk9OVF9DT0xPUjogJ2JsYWNrJyxcblxuICAvLyBWYXJpYW50IFRyYWNrXG4gIFZBUklBTlRfU1RST0tFOiAnYmx1ZScsXG4gIFZBUklBTlRfRklMTDogJyNkZGQnLFxuICBWQVJJQU5UX0hFSUdIVDogMTQsXG5cbn07XG4iLCIvKipcbiAqIEdyYWItYmFnIG9mIHV0aWxpdHkgZnVuY3Rpb25zLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7SW5mbGF0ZWRCbG9jaywgUGFydGlhbEdlbm9tZVJhbmdlfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB0eXBlIFEgZnJvbSAncSc7XG5cbmltcG9ydCBwYWtvIGZyb20gJ3Bha28vbGliL2luZmxhdGUnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuL0ludGVydmFsJztcblxuLy8gQ29tcGFyZSB0d28gdHVwbGVzIG9mIGVxdWFsIGxlbmd0aC4gSXMgdDEgPD0gdDI/XG4vLyBUT0RPOiBtYWtlIHRoaXMgdHVwbGVMZXNzT3JFcXVhbDxUPiAtLSBpdCB3b3JrcyB3aXRoIHN0cmluZ3Mgb3IgYm9vbGVhbnMsIHRvby5cbmZ1bmN0aW9uIHR1cGxlTGVzc09yRXF1YWwodDE6IEFycmF5PG51bWJlcj4sIHQyOiBBcnJheTxudW1iZXI+KTogYm9vbGVhbiB7XG4gIGlmICh0MS5sZW5ndGggIT0gdDIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ0NvbXBhcmluZyBub24tZXF1YWwgbGVuZ3RoIHR1cGxlcycpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHQxLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHQxW2ldID4gdDJbaV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHQxW2ldIDwgdDJbaV0pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gRG8gdHdvIHJhbmdlcyBvZiB0dXBsZXMgb3ZlcmxhcD9cbi8vIFRPRE86IG1ha2UgdGhpcyB0dXBsZVJhbmdlT3ZlcmxhcHM8VD4gLS0gaXQgd29ya3Mgd2l0aCBzdHJpbmdzIG9yIGJvb2xlYW5zLCB0b28uXG5mdW5jdGlvbiB0dXBsZVJhbmdlT3ZlcmxhcHModHVwbGVSYW5nZTE6IEFycmF5PEFycmF5PG51bWJlcj4+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR1cGxlUmFuZ2UyOiBBcnJheTxBcnJheTxudW1iZXI+Pik6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgICAvLyBBcmUgdGhlIHJhbmdlcyBvdmVybGFwcGluZz9cbiAgICAgdHVwbGVMZXNzT3JFcXVhbCh0dXBsZVJhbmdlMVswXSwgdHVwbGVSYW5nZTJbMV0pICYmXG4gICAgIHR1cGxlTGVzc09yRXF1YWwodHVwbGVSYW5nZTJbMF0sIHR1cGxlUmFuZ2UxWzFdKSAmJlxuICAgICAvLyAuLi4gYW5kIG5vbi1lbXB0eT9cbiAgICAgdHVwbGVMZXNzT3JFcXVhbCh0dXBsZVJhbmdlMVswXSwgdHVwbGVSYW5nZTFbMV0pICYmXG4gICAgIHR1cGxlTGVzc09yRXF1YWwodHVwbGVSYW5nZTJbMF0sIHR1cGxlUmFuZ2UyWzFdKSk7XG59XG5cbi8vIFJldHVybiBhIG5ldyBBcnJheUJ1ZmZlciBieSBjb25jYXRlbmF0aW5nIGFuIGFycmF5IG9mIEFycmF5QnVmZmVycy5cbmZ1bmN0aW9uIGNvbmNhdEFycmF5QnVmZmVycyhidWZmZXJzOiBBcnJheUJ1ZmZlcltdKTogQXJyYXlCdWZmZXIge1xuICB2YXIgdG90YWxCeXRlcyA9IGJ1ZmZlcnMubWFwKGIgPT4gYi5ieXRlTGVuZ3RoKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcbiAgdmFyIG91dHB1dCA9IG5ldyBVaW50OEFycmF5KHRvdGFsQnl0ZXMpO1xuICB2YXIgcG9zaXRpb24gPSAwO1xuICBidWZmZXJzLmZvckVhY2goYnVmID0+IHtcbiAgICBvdXRwdXQuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZiksIHBvc2l0aW9uKTtcbiAgICBwb3NpdGlvbiArPSBidWYuYnl0ZUxlbmd0aDtcbiAgfSk7XG4gIHJldHVybiBvdXRwdXQuYnVmZmVyO1xufVxuXG50eXBlIEluZmxhdGVDYWNoZUtleSA9IHtcbiAgZmlsZW5hbWU6IHN0cmluZztcbiAgaW5pdGlhbE9mZnNldDogbnVtYmVyO1xufVxuXG50eXBlIFBha29SZXN1bHQgPSB7XG4gIGVycjogbnVtYmVyO1xuICBtc2c6IHN0cmluZztcbiAgYnVmZmVyOiA/QXJyYXlCdWZmZXI7XG4gIHRvdGFsX2luOiBudW1iZXI7XG59XG52YXIgaW5mbGF0aW9uQ2FjaGU6IHtba2V5OiBzdHJpbmddOiBQYWtvUmVzdWx0fSA9IHt9O1xuXG4vLyBleHRyYWN0ZWQgZm9yIGNhY2hpbmdcbmZ1bmN0aW9uIF9pbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24pOiBQYWtvUmVzdWx0IHtcbiAgdmFyIGluZmxhdG9yID0gbmV3IHBha28uSW5mbGF0ZSgpO1xuICBpbmZsYXRvci5wdXNoKGJ1ZmZlci5zbGljZShwb3NpdGlvbikpO1xuICByZXR1cm4ge1xuICAgIGVycjogaW5mbGF0b3IuZXJyLFxuICAgIG1zZzogaW5mbGF0b3IubXNnLFxuICAgIGJ1ZmZlcjogaW5mbGF0b3IucmVzdWx0ID8gaW5mbGF0b3IucmVzdWx0LmJ1ZmZlciA6IG51bGwsXG4gICAgdG90YWxfaW46IGluZmxhdG9yLnN0cm0udG90YWxfaW5cbiAgfTtcbn1cblxuZnVuY3Rpb24gY2FjaGVkSW5mbGF0ZU9uZShidWZmZXIsIHBvc2l0aW9uLCBjYWNoZT86IEluZmxhdGVDYWNoZUtleSkge1xuICBpZiAoIWNhY2hlKSB7XG4gICAgcmV0dXJuIF9pbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24pO1xuICB9XG4gIHZhciBjYWNoZUtleSA9IGNhY2hlLmZpbGVuYW1lICsgJzonICsgKGNhY2hlLmluaXRpYWxPZmZzZXQgKyBwb3NpdGlvbik7XG4gIHZhciB2ID0gaW5mbGF0aW9uQ2FjaGVbY2FjaGVLZXldO1xuICBpZiAodiAmJiAocG9zaXRpb24gKyB2LnRvdGFsX2luID4gYnVmZmVyLmJ5dGVMZW5ndGgpKSB7XG4gICAgLy8gSXQgc2hvdWxkIGZhaWwuXG4gICAgcmV0dXJuIF9pbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKCF2KSB7XG4gICAgdiA9IF9pbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24pO1xuICB9XG4gIGlmICghdi5lcnIgJiYgdi5idWZmZXIpIHtcbiAgICBpbmZsYXRpb25DYWNoZVtjYWNoZUtleV0gPSB2O1xuICB9XG4gIHJldHVybiB2O1xufVxuXG4vKipcbiAqIEJBTSBmaWxlcyBhcmUgd3JpdHRlbiBpbiBcIkJHWkZcIiBmb3JtYXQsIHdoaWNoIGNvbnNpc3RzIG9mIG1hbnkgY29uY2F0ZW5hdGVkXG4gKiBnemlwIGJsb2Nrcy4gZ3VuemlwIGNvbmNhdGVuYXRlcyBhbGwgdGhlIGluZmxhdGVkIGJsb2NrcywgYnV0IHBha28gb25seVxuICogaW5mbGF0ZXMgb25lIGJsb2NrIGF0IGEgdGltZS4gVGhpcyB3cmFwcGVyIG1ha2VzIHBha28gYmVoYXZlIGxpa2UgZ3VuemlwLlxuICogSWYgc3BlY2lmaWVkLCBsYXN0QmxvY2tTdGFydCB3aWxsIHN0b3AgaW5mbGF0aW9uIGJlZm9yZSBhbGwgdGhlIGJsb2Nrc1xuICogaGF2ZSBiZWVuIHByb2Nlc3NlZC5cbiAqL1xuZnVuY3Rpb24gaW5mbGF0ZUNvbmNhdGVuYXRlZEd6aXAoYnVmZmVyOiBBcnJheUJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RCbG9ja1N0YXJ0PzogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGU/OiBJbmZsYXRlQ2FjaGVLZXkpOiBJbmZsYXRlZEJsb2NrW10ge1xuICB2YXIgcG9zaXRpb24gPSAwLFxuICAgICAgYmxvY2tzID0gW107XG4gIGlmIChsYXN0QmxvY2tTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGFzdEJsb2NrU3RhcnQgPSBidWZmZXIuYnl0ZUxlbmd0aDtcbiAgfVxuICBkbyB7XG4gICAgdmFyIHJlc3VsdCA9IGNhY2hlZEluZmxhdGVPbmUoYnVmZmVyLCBwb3NpdGlvbiwgY2FjaGUpO1xuXG4gICAgaWYgKHJlc3VsdC5lcnIpIHtcbiAgICAgIHRocm93ICdHemlwIGVycm9yOiAnICsgcmVzdWx0Lm1zZztcbiAgICB9XG4gICAgaWYgKHJlc3VsdC5idWZmZXIpIHtcbiAgICAgIGJsb2Nrcy5wdXNoKHtcbiAgICAgICAgb2Zmc2V0OiBwb3NpdGlvbixcbiAgICAgICAgY29tcHJlc3NlZExlbmd0aDogcmVzdWx0LnRvdGFsX2luLFxuICAgICAgICBidWZmZXI6IHJlc3VsdC5idWZmZXJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBwb3NpdGlvbiArPSByZXN1bHQudG90YWxfaW47XG4gIH0gd2hpbGUgKHBvc2l0aW9uIDw9IGxhc3RCbG9ja1N0YXJ0ICYmIHBvc2l0aW9uIDwgYnVmZmVyLmJ5dGVMZW5ndGgpO1xuICByZXR1cm4gYmxvY2tzO1xufVxuXG4vKipcbiAqIEluZmxhdGUgb25lIG9yIG1vcmUgZ3ppcCBibG9ja3MgaW4gdGhlIGJ1ZmZlci5cbiAqIFJldHVybnMgdGhlIGNvbmNhdGVuYXRpb24gb2YgYWxsIGluZmxhdGVkIGJsb2Nrcy5cbiAqIFRoaXMgbWlycm9ycyB0aGUgYmVoYXZpb3Igb2YgZ3ppcCgxKS5cbiAqL1xuZnVuY3Rpb24gaW5mbGF0ZUd6aXAoYnVmZmVyOiBBcnJheUJ1ZmZlcik6IEFycmF5QnVmZmVyIHtcbiAgcmV0dXJuIGNvbmNhdEFycmF5QnVmZmVycyhpbmZsYXRlQ29uY2F0ZW5hdGVkR3ppcChidWZmZXIpLm1hcCh4ID0+IHguYnVmZmVyKSk7XG59XG5cbi8vIEdpdmVuICdjaHI5JywgcmV0dXJuICc5Jy4gR2l2ZW4gJzknLCByZXR1cm4gJ2NocjknLlxuZnVuY3Rpb24gYWx0Q29udGlnTmFtZShjb250aWc6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmIChjb250aWcuc2xpY2UoMCwgMykgPT0gJ2NocicpIHtcbiAgICByZXR1cm4gY29udGlnLnNsaWNlKDMpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnY2hyJyArIGNvbnRpZztcbiAgfVxufVxuXG4vLyBBcmUgdHdvIHN0cmluZ3MgZXF1YWwgbW9kdWxlIGEgJ2NocicgcHJlZml4P1xuLy8gZS5nLiBpc0Nock1hdGNoKCcxNycsICdjaHIxNycpID09IHRydWVcbmZ1bmN0aW9uIGlzQ2hyTWF0Y2goYTogc3RyaW5nLCBiOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIGEgPT0gYiB8fCAnY2hyJyArIGEgPT0gYiB8fCBhID09ICdjaHInICsgYjtcbn1cblxuLyoqXG4gKiBQaXBlIGFsbCBwcm9taXNlIGV2ZW50cyB0aHJvdWdoIGEgZGVmZXJyZWQgb2JqZWN0LlxuICogVGhpcyBpcyBzaW1pbGFyIHRvIGRlZmVycmVkLnJlc29sdmUocHJvbWlzZSksIGV4Y2VwdCB0aGF0IGl0IGFsbG93cyBwcm9ncmVzc1xuICogbm90aWZpY2F0aW9ucyBmcm9tIHRoZSBwcm9taXNlIHRvIGJ1YmJsZSB0aHJvdWdoLlxuICovXG5mdW5jdGlvbiBwaXBlUHJvbWlzZTxUPihkZWZlcnJlZDogUS5EZWZlcnJlZDxUPiwgcHJvbWlzZTogUS5Qcm9taXNlPFQ+KSB7XG4gIHByb21pc2UudGhlbihkZWZlcnJlZC5yZXNvbHZlLCBkZWZlcnJlZC5yZWplY3QsIGRlZmVycmVkLm5vdGlmeSk7XG59XG5cbi8qKlxuICogU2NhbGUgdGhlIHJhbmdlIGJ5IGBmYWN0b3JgIGFib3V0IGl0cyBjZW50ZXIuXG4gKiBmYWN0b3IgMi4wIHdpbGwgcHJvZHVjZSBhIHJhbmdlIHdpdGggdHdpY2UgdGhlIHNwYW4sIDAuNSB3aXRoIGhhbGYuXG4gKiBBbiBpbnZhcmlhbnQgaXMgdGhhdCB0aGUgY2VudGVyIHZhbHVlIHdpbGwgYmUgaWRlbnRpY2FsIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gKi9cbmZ1bmN0aW9uIHNjYWxlUmFuZ2UocmFuZ2U6IEludGVydmFsLCBmYWN0b3I6IG51bWJlcik6IEludGVydmFsIHtcbiAgdmFyIHNwYW4gPSByYW5nZS5zdG9wIC0gcmFuZ2Uuc3RhcnQsXG4gICAgICBjZW50ZXIgPSBNYXRoLmZsb29yKChyYW5nZS5zdGFydCArIHJhbmdlLnN0b3ApIC8gMiksXG4gICAgICBuZXdTcGFuID0gTWF0aC5yb3VuZChmYWN0b3IgKiBzcGFuIC8gMikgKiAyLFxuICAgICAgc3RhcnQgPSBjZW50ZXIgLSBuZXdTcGFuIC8gMixcbiAgICAgIHN0b3AgPSBjZW50ZXIgKyBuZXdTcGFuIC8gMjsgIC8vIFRPRE86IGNsYW1wXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIC8vIFNoaWZ0IHRvIHRoZSByaWdodCBzbyB0aGF0IHRoZSByYW5nZSBzdGFydHMgYXQgemVyby5cbiAgICBzdG9wIC09IHN0YXJ0O1xuICAgIHN0YXJ0ID0gMDtcbiAgfVxuICByZXR1cm4gbmV3IEludGVydmFsKHN0YXJ0LCBzdG9wKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHVzZXItc3BlY2lmaWVkIHJhbmdlIGludG8gYSByYW5nZS5cbiAqIE9ubHkgdGhlIHNwZWNpZmllZCBwb3J0aW9ucyBvZiB0aGUgcmFuZ2Ugd2lsbCBiZSBmaWxsZWQgb3V0IGluIHRoZSByZXR1cm5lZCBvYmplY3QuXG4gKiBGb3IgZXhhbXBsZTpcbiAqICdjaHIxNycgLS0+IHtjb250aWc6J2NocjE3J31cbiAqICcxMC0yMCcgLS0+IHtzdGFydDogMTAsIHN0b3A6IDIwfVxuICogJzE3OjEwLTIwJyAtLT4ge2NvbnRpZzogJzE3Jywgc3RhcnQ6IDEwLCBzdG9wOiAyMH1cbiAqIFJldHVybnMgbnVsbCBpZiB0aGUgcmFuZ2UgY2FuJ3QgYmUgcGFyc2VkLlxuICovXG5mdW5jdGlvbiBwYXJzZVJhbmdlKHJhbmdlOiBzdHJpbmcpOiA/UGFydGlhbEdlbm9tZVJhbmdlIHtcbiAgLy8gRmlyc3QgdHJ5ICdjb250aWc6c3RhcnQtc3RvcCdcbiAgdmFyIG0gPSAvXihbXiA6XSspOihbMC05LF0rKS0oWzAtOSxdKykkLy5leGVjKHJhbmdlKTtcbiAgaWYgKG0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGlnOiBtWzFdLFxuICAgICAgc3RhcnQ6IHBhcnNlTnVtYmVyV2l0aENvbW1hcyhtWzJdKSxcbiAgICAgIHN0b3A6IHBhcnNlTnVtYmVyV2l0aENvbW1hcyhtWzNdKVxuICAgIH07XG4gIH1cbiAgXG4gIC8vIFRoZW4gY29udGlnOm51bWJlclxuICBtID0gL14oW14gOl0rKTooWzAtOSxdKykkLy5leGVjKHJhbmdlKTtcbiAgaWYgKG0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGlnOiBtWzFdLFxuICAgICAgc3RhcnQ6IHBhcnNlTnVtYmVyV2l0aENvbW1hcyhtWzJdKSxcbiAgICB9O1xuICB9XG5cbiAgLy8gVGhlbiAnc3RhcnQ6c3RvcCdcbiAgbSA9IC9eKFswLTksXSspLShbMC05LF0rKSQvLmV4ZWMocmFuZ2UpO1xuICBpZiAobSkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogcGFyc2VOdW1iZXJXaXRoQ29tbWFzKG1bMV0pLFxuICAgICAgc3RvcDogcGFyc2VOdW1iZXJXaXRoQ29tbWFzKG1bMl0pXG4gICAgfTtcbiAgfVxuXG4gIC8vIFRoZW4gJ2NvbnRpZzonIG9yIG5vbi1udW1lcmljICdjb250aWcnXG4gIG0gPSAvXihbXiA6XSspOiQvLmV4ZWMocmFuZ2UpIHx8IC9eKFteMC05XVteIDpdKykkLy5leGVjKHJhbmdlKTtcbiAgaWYgKG0pIHtcbiAgICByZXR1cm4geyBjb250aWc6IG1bMV0gfTtcbiAgfVxuXG4gIC8vIFRoZW4gcGxhaW4tb2xkIG51bWJlcnMuXG4gIG0gPSAvXihbMC05LF0rKSQvLmV4ZWMocmFuZ2UpO1xuICBpZiAobSkge1xuICAgIHJldHVybiB7IHN0YXJ0OiBwYXJzZU51bWJlcldpdGhDb21tYXMobVsxXSkgfTtcbiAgfVxuXG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEludGVydmFsKGl2OiBJbnRlcnZhbCk6IHN0cmluZyB7XG4gIHJldHVybiBudW1iZXJXaXRoQ29tbWFzKGl2LnN0YXJ0KSArICctJyArIG51bWJlcldpdGhDb21tYXMoaXYuc3RvcCk7XG59XG5cbi8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yOTAxMjk4LzM4ODk1MVxuZnVuY3Rpb24gbnVtYmVyV2l0aENvbW1hcyh4OiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4geC50b1N0cmluZygpLnJlcGxhY2UoL1xcQig/PShcXGR7M30pKyg/IVxcZCkpL2csIFwiLFwiKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VOdW1iZXJXaXRoQ29tbWFzKHg6IHN0cmluZyk6IG51bWJlciB7XG4gIHJldHVybiBwYXJzZUludCh4LnJlcGxhY2UoLywvZywgJycpLCAxMCk7XG59XG5cbmZ1bmN0aW9uIGZsYXRNYXA8VCwgUj4oYXJyYXk6IFRbXSwgZm46ICh0OiBUKT0+UltdKTogUltdIHtcbiAgcmV0dXJuIF8uZmxhdHRlbihhcnJheS5tYXAoZm4pLCB0cnVlIC8qIHNoYWxsb3cgKi8pO1xufVxuXG4vKipcbiAqIERldGVybWluZSB0aGUgcGVyY2VudGlsZS10aCBlbGVtZW50IG9mIHhzLlxuICogcGVyY2VudGlsZSBzaG91bGQgYmUgYW4gaW50ZWdlciBmcm9tIDEgdG8gOTkuXG4gKiBUaGlzIHdpbGwgc29ydCB0aGUgeHMuXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVQZXJjZW50aWxlKHhzOiBudW1iZXJbXSwgcGVyY2VudGlsZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgaWYgKHhzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7ICAvLyBwbGFjZWhvbGRlciB2YWx1ZVxuXG4gIHhzLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgdmFyIGlkeCA9ICh4cy5sZW5ndGggLSAxKSAqIHBlcmNlbnRpbGUgLyAxMDAsXG4gICAgICBsbyA9IE1hdGguZmxvb3IoaWR4KSxcbiAgICAgIGhpID0gTWF0aC5jZWlsKGlkeCk7XG5cbiAgaWYgKGxvID09IGhpKSB7XG4gICAgcmV0dXJuIHhzW2xvXTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geHNbbG9dICogKGlkeCAtIGxvKSArIHhzW2hpXSAqIChoaSAtIGlkeCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHR1cGxlTGVzc09yRXF1YWwsXG4gIHR1cGxlUmFuZ2VPdmVybGFwcyxcbiAgY29uY2F0QXJyYXlCdWZmZXJzLFxuICBpbmZsYXRlQ29uY2F0ZW5hdGVkR3ppcCxcbiAgaW5mbGF0ZUd6aXAsXG4gIGFsdENvbnRpZ05hbWUsXG4gIHBpcGVQcm9taXNlLFxuICBzY2FsZVJhbmdlLFxuICBwYXJzZVJhbmdlLFxuICBmb3JtYXRJbnRlcnZhbCxcbiAgaXNDaHJNYXRjaCxcbiAgZmxhdE1hcCxcbiAgY29tcHV0ZVBlcmNlbnRpbGVcbn07XG4iLCIvKipcbiAqIERhdGEgbWFuYWdlbWVudCBmb3IgQ292ZXJhZ2VUcmFjay5cbiAqXG4gKiBUaGlzIGNsYXNzIHRyYWNrcyBjb3VudHMgYW5kIG1pc21hdGNoZXMgYXQgZWFjaCBsb2N1cy5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtTdHJhbmQsIEFsaWdubWVudCwgQWxpZ25tZW50RGF0YVNvdXJjZX0gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCB0eXBlIHtUd29CaXRTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7QmFzZVBhaXIsIE9wSW5mb30gZnJvbSAnLi9waWxldXB1dGlscyc7XG5pbXBvcnQgdHlwZSBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgdHlwZSBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5cbmltcG9ydCB7Z2V0T3BJbmZvfSBmcm9tICcuL3BpbGV1cHV0aWxzJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCB0eXBlIEJpblN1bW1hcnkgPSB7XG4gIGNvdW50OiBudW1iZXI7XG4gIC8vIFRoZXNlIHByb3BlcnRpZXMgd2lsbCBvbmx5IGJlIHByZXNlbnQgd2hlbiB0aGVyZSBhcmUgbWlzbWF0Y2hlcy5cbiAgbWlzbWF0Y2hlcz86IHtba2V5OiBzdHJpbmddOiBudW1iZXJ9O1xuICByZWY/OiBzdHJpbmc7ICAvLyB3aGF0IGRvZXMgdGhlIHJlZmVyZW5jZSBoYXZlIGhlcmU/XG59O1xuXG4vLyBUaGlzIGNsYXNzIHByb3ZpZGVzIGRhdGEgbWFuYWdlbWVudCBmb3IgdGhlIHZpc3VhbGl6YXRpb24sIGdyb3VwaW5nIHBhaXJlZFxuLy8gcmVhZHMgYW5kIG1hbmFnaW5nIHRoZSBwaWxldXAuXG5jbGFzcyBDb3ZlcmFnZUNhY2hlIHtcbiAgLy8gbWFwcyBncm91cEtleSB0byBWaXN1YWxHcm91cFxuICByZWFkczoge1trZXk6IHN0cmluZ106IEFsaWdubWVudH07XG4gIC8vIHJlZiAtLT4gcG9zaXRpb24gLS0+IEJpblN1bW1hcnlcbiAgcmVmVG9Db3VudHM6IHtba2V5OiBzdHJpbmddOiB7W2tleTogbnVtYmVyXTogQmluU3VtbWFyeX19O1xuICByZWZUb01heENvdmVyYWdlOiB7W2tleTogc3RyaW5nXTogbnVtYmVyfTtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG5cbiAgY29uc3RydWN0b3IocmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2UpIHtcbiAgICB0aGlzLnJlYWRzID0ge307XG4gICAgdGhpcy5yZWZUb0NvdW50cyA9IHt9O1xuICAgIHRoaXMucmVmVG9NYXhDb3ZlcmFnZSA9IHt9O1xuICAgIHRoaXMucmVmZXJlbmNlU291cmNlID0gcmVmZXJlbmNlU291cmNlO1xuICB9XG5cbiAgLy8gTG9hZCBhIG5ldyByZWFkIGludG8gdGhlIHZpc3VhbGl6YXRpb24gY2FjaGUuXG4gIC8vIENhbGxpbmcgdGhpcyBtdWx0aXBsZSB0aW1lcyB3aXRoIHRoZSBzYW1lIHJlYWQgaXMgYSBuby1vcC5cbiAgYWRkQWxpZ25tZW50KHJlYWQ6IEFsaWdubWVudCkge1xuICAgIHZhciBrZXkgPSByZWFkLmdldEtleSgpO1xuICAgIGlmIChrZXkgaW4gdGhpcy5yZWFkcykgcmV0dXJuOyAgLy8gd2UndmUgYWxyZWFkeSBzZWVuIHRoaXMgb25lLlxuICAgIHRoaXMucmVhZHNba2V5XSA9IHJlYWQ7XG5cbiAgICB2YXIgb3BJbmZvID0gZ2V0T3BJbmZvKHJlYWQsIHRoaXMucmVmZXJlbmNlU291cmNlKTtcblxuICAgIHRoaXMuYWRkUmVhZFRvQ292ZXJhZ2UocmVhZCwgb3BJbmZvKTtcbiAgfVxuXG4gIC8vIFVwZGF0ZXMgcmVmZXJlbmNlIG1pc21hdGNoIGluZm9ybWF0aW9uIGZvciBwcmV2aW91c2x5LWxvYWRlZCByZWFkcy5cbiAgdXBkYXRlTWlzbWF0Y2hlcyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikge1xuICAgIHZhciByZWYgPSB0aGlzLl9jYW5vbmljYWxSZWYocmFuZ2UuY29udGlnKTtcbiAgICB0aGlzLnJlZlRvQ291bnRzW3JlZl0gPSB7fTsgIC8vIFRPRE86IGNvdWxkIGJlIG1vcmUgZWZmaWNpZW50XG4gICAgdGhpcy5yZWZUb01heENvdmVyYWdlW3JlZl0gPSAwO1xuICAgIGZvciAodmFyIGsgaW4gdGhpcy5yZWFkcykge1xuICAgICAgdmFyIHJlYWQgPSB0aGlzLnJlYWRzW2tdO1xuICAgICAgaWYgKHJlYWQuZ2V0SW50ZXJ2YWwoKS5jaHJPbkNvbnRpZyhyYW5nZS5jb250aWcpKSB7XG4gICAgICAgIHZhciBvcEluZm8gPSBnZXRPcEluZm8ocmVhZCwgdGhpcy5yZWZlcmVuY2VTb3VyY2UpO1xuICAgICAgICB0aGlzLmFkZFJlYWRUb0NvdmVyYWdlKHJlYWQsIG9wSW5mbyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYWRkUmVhZFRvQ292ZXJhZ2UocmVhZDogQWxpZ25tZW50LCBvcEluZm86IE9wSW5mbykge1xuICAgIC8vIEFkZCBjb3ZlcmFnZS9taXNtYXRjaCBpbmZvcm1hdGlvblxuICAgIHZhciByZWYgPSB0aGlzLl9jYW5vbmljYWxSZWYocmVhZC5yZWYpO1xuICAgIGlmICghKHJlZiBpbiB0aGlzLnJlZlRvQ291bnRzKSkge1xuICAgICAgdGhpcy5yZWZUb0NvdW50c1tyZWZdID0ge307XG4gICAgICB0aGlzLnJlZlRvTWF4Q292ZXJhZ2VbcmVmXSA9IDA7XG4gICAgfVxuICAgIHZhciBjb3VudHMgPSB0aGlzLnJlZlRvQ291bnRzW3JlZl0sXG4gICAgICAgIG1heCA9IHRoaXMucmVmVG9NYXhDb3ZlcmFnZVtyZWZdLFxuICAgICAgICByYW5nZSA9IHJlYWQuZ2V0SW50ZXJ2YWwoKSxcbiAgICAgICAgc3RhcnQgPSByYW5nZS5zdGFydCgpLFxuICAgICAgICBzdG9wID0gcmFuZ2Uuc3RvcCgpO1xuICAgIGZvciAodmFyIHBvcyA9IHN0YXJ0OyBwb3MgPD0gc3RvcDsgcG9zKyspIHtcbiAgICAgIGxldCBjID0gY291bnRzW3Bvc107XG4gICAgICBpZiAoIWMpIHtcbiAgICAgICAgY291bnRzW3Bvc10gPSBjID0ge2NvdW50OiAwfTtcbiAgICAgIH1cbiAgICAgIGMuY291bnQgKz0gMTtcbiAgICAgIGlmIChjLmNvdW50ID4gbWF4KSBtYXggPSBjLmNvdW50O1xuICAgIH1cbiAgICBmb3IgKHZhciBtbSBvZiBvcEluZm8ubWlzbWF0Y2hlcykge1xuICAgICAgdmFyIGJpbiA9IGNvdW50c1ttbS5wb3NdO1xuICAgICAgdmFyIG1pc21hdGNoZXM7XG4gICAgICBpZiAoYmluLm1pc21hdGNoZXMpIHtcbiAgICAgICAgbWlzbWF0Y2hlcyA9IGJpbi5taXNtYXRjaGVzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWlzbWF0Y2hlcyA9IGJpbi5taXNtYXRjaGVzID0ge307XG4gICAgICAgIGJpbi5yZWYgPSB0aGlzLnJlZmVyZW5jZVNvdXJjZS5nZXRSYW5nZUFzU3RyaW5nKHtcbiAgICAgICAgICBjb250aWc6IHJlZiwgc3RhcnQ6IG1tLnBvcywgc3RvcDogbW0ucG9zfSk7XG4gICAgICB9XG4gICAgICBsZXQgYyA9IG1pc21hdGNoZXNbbW0uYmFzZVBhaXJdIHx8IDA7XG4gICAgICBtaXNtYXRjaGVzW21tLmJhc2VQYWlyXSA9IDEgKyBjO1xuICAgIH1cblxuICAgIHRoaXMucmVmVG9NYXhDb3ZlcmFnZVtyZWZdID0gbWF4O1xuICB9XG5cbiAgbWF4Q292ZXJhZ2VGb3JSZWYocmVmOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnJlZlRvTWF4Q292ZXJhZ2VbcmVmXSB8fFxuICAgICAgICB0aGlzLnJlZlRvTWF4Q292ZXJhZ2VbdXRpbHMuYWx0Q29udGlnTmFtZShyZWYpXSB8fFxuICAgICAgICAwO1xuICB9XG5cbiAgYmluc0ZvclJlZihyZWY6IHN0cmluZyk6IHtba2V5OiBudW1iZXJdOiBCaW5TdW1tYXJ5fSB7XG4gICAgcmV0dXJuIHRoaXMucmVmVG9Db3VudHNbcmVmXSB8fFxuICAgICAgICB0aGlzLnJlZlRvQ291bnRzW3V0aWxzLmFsdENvbnRpZ05hbWUocmVmKV0gfHxcbiAgICAgICAge307XG4gIH1cblxuICAvLyBSZXR1cm5zIHdoaWNoZXZlciBmb3JtIG9mIHRoZSByZWYgKFwiY2hyMTdcIiwgXCIxN1wiKSBoYXMgYmVlbiBzZWVuLlxuICBfY2Fub25pY2FsUmVmKHJlZjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5yZWZUb0NvdW50c1tyZWZdKSByZXR1cm4gcmVmO1xuICAgIHZhciBhbHQgPSB1dGlscy5hbHRDb250aWdOYW1lKHJlZik7XG4gICAgaWYgKHRoaXMucmVmVG9Db3VudHNbYWx0XSkgcmV0dXJuIGFsdDtcbiAgICByZXR1cm4gcmVmO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ292ZXJhZ2VDYWNoZTtcbiIsIi8qKlxuICogQ292ZXJhZ2UgdmlzdWFsaXphdGlvbiBvZiBBbGlnbm1lbnQgc291cmNlcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0FsaWdubWVudCwgQWxpZ25tZW50RGF0YVNvdXJjZX0gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCB0eXBlIEludGVydmFsIGZyb20gJy4uL0ludGVydmFsJztcbmltcG9ydCB0eXBlIHtUd29CaXRTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7RGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHR5cGUge0JpblN1bW1hcnl9IGZyb20gJy4vQ292ZXJhZ2VDYWNoZSc7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc2NhbGUgZnJvbSAnLi4vc2NhbGUnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBDb3ZlcmFnZUNhY2hlIGZyb20gJy4vQ292ZXJhZ2VDYWNoZSc7XG5pbXBvcnQgVGlsZWRDYW52YXMgZnJvbSAnLi9UaWxlZENhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcblxuLy8gQmFzaWMgc2V0dXAgKFRPRE86IG1ha2UgdGhpcyBjb25maWd1cmFibGUgYnkgdGhlIHVzZXIpXG5jb25zdCBTSE9XX01JU01BVENIRVMgPSB0cnVlO1xuXG4vLyBPbmx5IHNob3cgbWlzbWF0Y2ggaW5mb3JtYXRpb24gd2hlbiB0aGVyZSBhcmUgbW9yZSB0aGFuIHRoaXMgbWFueVxuLy8gcmVhZHMgc3VwcG9ydGluZyB0aGF0IG1pc21hdGNoLlxuY29uc3QgTUlTTUFUQ0hfVEhSRVNIT0xEID0gMTtcblxuXG5jbGFzcyBDb3ZlcmFnZVRpbGVkQ2FudmFzIGV4dGVuZHMgVGlsZWRDYW52YXMge1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgb3B0aW9uczogT2JqZWN0O1xuICBjYWNoZTogQ292ZXJhZ2VDYWNoZTtcblxuICBjb25zdHJ1Y3RvcihjYWNoZTogQ292ZXJhZ2VDYWNoZSwgaGVpZ2h0OiBudW1iZXIsIG9wdGlvbnM6IE9iamVjdCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCgxLCBoZWlnaHQpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICBoZWlnaHRGb3JSZWYocmVmOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmhlaWdodDtcbiAgfVxuXG4gIHVwZGF0ZShoZWlnaHQ6IG51bWJlciwgb3B0aW9uczogT2JqZWN0KSB7XG4gICAgLy8gd29ya2Fyb3VuZCBmb3IgYW4gaXNzdWUgaW4gUGhhbnRvbUpTIHdoZXJlIGhlaWdodCBhbHdheXMgY29tZXMgb3V0IHRvIHplcm8uXG4gICAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCgxLCBoZWlnaHQpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICB5U2NhbGVGb3JSZWYocmVmOiBzdHJpbmcpOiAoeTogbnVtYmVyKSA9PiBudW1iZXIge1xuICAgIHZhciBtYXhDb3ZlcmFnZSA9IHRoaXMuY2FjaGUubWF4Q292ZXJhZ2VGb3JSZWYocmVmKTtcblxuICAgIHZhciBwYWRkaW5nID0gMTA7ICAvLyBUT0RPOiBtb3ZlIGludG8gc3R5bGVcbiAgICByZXR1cm4gc2NhbGUubGluZWFyKClcbiAgICAgIC5kb21haW4oW21heENvdmVyYWdlLCAwXSlcbiAgICAgIC5yYW5nZShbcGFkZGluZywgdGhpcy5oZWlnaHQgLSBwYWRkaW5nXSlcbiAgICAgIC5uaWNlKCk7XG4gIH1cblxuICByZW5kZXIoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgeFNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgICB2YXIgYmlucyA9IHRoaXMuY2FjaGUuYmluc0ZvclJlZihyYW5nZS5jb250aWcpO1xuICAgIHZhciB5U2NhbGUgPSB0aGlzLnlTY2FsZUZvclJlZihyYW5nZS5jb250aWcpO1xuICAgIHZhciByZWxheGVkUmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoXG4gICAgICAgIHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQoKSAtIDEsIHJhbmdlLnN0b3AoKSArIDEpO1xuICAgIHJlbmRlckJhcnMoY3R4LCB4U2NhbGUsIHlTY2FsZSwgcmVsYXhlZFJhbmdlLCBiaW5zLCB0aGlzLm9wdGlvbnMpO1xuICB9XG59XG5cblxuLy8gRHJhdyBjb3ZlcmFnZSBiaW5zICYgbWlzbWF0Y2hlc1xuZnVuY3Rpb24gcmVuZGVyQmFycyhjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgIHhTY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHlTY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICBiaW5zOiB7W2tleTogbnVtYmVyXTogQmluU3VtbWFyeX0sXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IE9iamVjdCkge1xuICBpZiAoXy5pc0VtcHR5KGJpbnMpKSByZXR1cm47XG5cbiAgdmFyIGJhcldpZHRoID0geFNjYWxlKDEpIC0geFNjYWxlKDApO1xuICB2YXIgc2hvd1BhZGRpbmcgPSAoYmFyV2lkdGggPiBzdHlsZS5DT1ZFUkFHRV9NSU5fQkFSX1dJRFRIX0ZPUl9HQVApO1xuICB2YXIgcGFkZGluZyA9IHNob3dQYWRkaW5nID8gMSA6IDA7XG5cbiAgdmFyIGJpblBvcyA9IGZ1bmN0aW9uKHBvczogbnVtYmVyLCBjb3VudDogbnVtYmVyKSB7XG4gICAgLy8gUm91bmQgdG8gaW50ZWdlciBjb29yZGluYXRlcyBmb3IgY3Jpc3AgbGluZXMsIHdpdGhvdXQgYWxpYXNpbmcuXG4gICAgdmFyIGJhclgxID0gTWF0aC5yb3VuZCh4U2NhbGUoMSArIHBvcykpLFxuICAgICAgICBiYXJYMiA9IE1hdGgucm91bmQoeFNjYWxlKDIgKyBwb3MpKSAtIHBhZGRpbmcsXG4gICAgICAgIGJhclkgPSBNYXRoLnJvdW5kKHlTY2FsZShjb3VudCkpO1xuICAgIHJldHVybiB7YmFyWDEsIGJhclgyLCBiYXJZfTtcbiAgfTtcblxuICB2YXIgbWlzbWF0Y2hCaW5zID0gKHt9IDoge1trZXk6bnVtYmVyXTogQmluU3VtbWFyeX0pOyAgLy8ga2VlcCB0cmFjayBvZiB3aGljaCBvbmVzIGhhdmUgbWlzbWF0Y2hlc1xuICB2YXIgdkJhc2VQb3NZID0geVNjYWxlKDApOyAgLy8gdGhlIHZlcnkgYm90dG9tIG9mIHRoZSBjYW52YXNcbiAgdmFyIHN0YXJ0ID0gcmFuZ2Uuc3RhcnQoKSxcbiAgICAgIHN0b3AgPSByYW5nZS5zdG9wKCk7XG4gIGxldCB7YmFyWDF9ID0gYmluUG9zKHN0YXJ0LCAoc3RhcnQgaW4gYmlucykgPyBiaW5zW3N0YXJ0XS5jb3VudCA6IDApO1xuICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQ09WRVJBR0VfQklOX0NPTE9SO1xuICBjdHguYmVnaW5QYXRoKCk7XG4gIGN0eC5tb3ZlVG8oYmFyWDEsIHZCYXNlUG9zWSk7XG4gIGZvciAodmFyIHBvcyA9IHN0YXJ0OyBwb3MgPCBzdG9wOyBwb3MrKykge1xuICAgIHZhciBiaW4gPSBiaW5zW3Bvc107XG4gICAgaWYgKCFiaW4pIGNvbnRpbnVlO1xuICAgIGN0eC5wdXNoT2JqZWN0KGJpbik7XG4gICAgbGV0IHtiYXJYMSwgYmFyWDIsIGJhcll9ID0gYmluUG9zKHBvcywgYmluLmNvdW50KTtcbiAgICBjdHgubGluZVRvKGJhclgxLCBiYXJZKTtcbiAgICBjdHgubGluZVRvKGJhclgyLCBiYXJZKTtcbiAgICBpZiAoc2hvd1BhZGRpbmcpIHtcbiAgICAgIGN0eC5saW5lVG8oYmFyWDIsIHZCYXNlUG9zWSk7XG4gICAgICBjdHgubGluZVRvKGJhclgyICsgMSwgdkJhc2VQb3NZKTtcbiAgICB9XG5cbiAgICBpZiAoU0hPV19NSVNNQVRDSEVTICYmICFfLmlzRW1wdHkoYmluLm1pc21hdGNoZXMpKSB7XG4gICAgICBtaXNtYXRjaEJpbnNbcG9zXSA9IGJpbjtcbiAgICB9XG5cbiAgICBjdHgucG9wT2JqZWN0KCk7XG4gIH1cbiAgbGV0IHtiYXJYMn0gPSBiaW5Qb3Moc3RvcCwgKHN0b3AgaW4gYmlucykgPyBiaW5zW3N0b3BdLmNvdW50IDogMCk7XG4gIGN0eC5saW5lVG8oYmFyWDIsIHZCYXNlUG9zWSk7ICAvLyByaWdodCBlZGdlIG9mIHRoZSByaWdodCBiYXIuXG4gIGN0eC5jbG9zZVBhdGgoKTtcbiAgY3R4LmZpbGwoKTtcblxuICAvLyBOb3cgcmVuZGVyIHRoZSBtaXNtYXRjaGVzXG4gIF8uZWFjaChtaXNtYXRjaEJpbnMsIChiaW4sIHBvcykgPT4ge1xuICAgIGlmICghYmluLm1pc21hdGNoZXMpIHJldHVybjsgIC8vIHRoaXMgaXMgaGVyZSBmb3IgRmxvdzsgaXQgY2FuJ3QgcmVhbGx5IGhhcHBlbi5cbiAgICBjb25zdCBtaXNtYXRjaGVzID0gXy5jbG9uZShiaW4ubWlzbWF0Y2hlcyk7XG4gICAgcG9zID0gTnVtYmVyKHBvcyk7ICAvLyBvYmplY3Qga2V5cyBhcmUgc3RyaW5ncywgbm90IG51bWJlcnMuXG5cbiAgICAvLyBJZiB0aGlzIGlzIGEgaGlnaC1mcmVxdWVuY3kgdmFyaWFudCwgYWRkIGluIHRoZSByZWZlcmVuY2UuXG4gICAgdmFyIG1pc21hdGNoQ291bnQgPSBfLnJlZHVjZShtaXNtYXRjaGVzLCAoeCwgeSkgPT4geCArIHkpO1xuICAgIHZhciBtb3N0RnJlcXVlbnRNaXNtYXRjaCA9IF8ubWF4KG1pc21hdGNoZXMpO1xuICAgIGlmIChtb3N0RnJlcXVlbnRNaXNtYXRjaCA+IE1JU01BVENIX1RIUkVTSE9MRCAmJlxuICAgICAgICBtaXNtYXRjaENvdW50ID4gb3B0aW9ucy52YWZDb2xvclRocmVzaG9sZCAqIGJpbi5jb3VudCAmJlxuICAgICAgICBtaXNtYXRjaENvdW50IDwgYmluLmNvdW50KSB7XG4gICAgICBpZiAoYmluLnJlZikgeyAgLy8gaGVyZSBmb3IgZmxvdzsgY2FuJ3QgcmVhbHkgaGFwcGVuXG4gICAgICAgIG1pc21hdGNoZXNbYmluLnJlZl0gPSBiaW4uY291bnQgLSBtaXNtYXRjaENvdW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCB7YmFyWDEsIGJhclgyfSA9IGJpblBvcyhwb3MsIGJpbi5jb3VudCk7XG4gICAgY3R4LnB1c2hPYmplY3QoYmluKTtcbiAgICB2YXIgY291bnRTb0ZhciA9IDA7XG4gICAgXy5jaGFpbihtaXNtYXRjaGVzKVxuICAgICAgLm1hcCgoY291bnQsIGJhc2UpID0+ICh7Y291bnQsIGJhc2V9KSkgIC8vIHB1bGwgYmFzZSBpbnRvIHRoZSBvYmplY3RcbiAgICAgIC5maWx0ZXIoKHtjb3VudH0pID0+IGNvdW50ID4gTUlTTUFUQ0hfVEhSRVNIT0xEKVxuICAgICAgLnNvcnRCeSgoe2NvdW50fSkgPT4gLWNvdW50KSAgLy8gdGhlIG1vc3QgY29tbW9uIG1pc21hdGNoIGF0IHRoZSBib3R0b21cbiAgICAgIC5lYWNoKCh7Y291bnQsIGJhc2V9KSA9PiB7XG4gICAgICAgIHZhciBtaXNNYXRjaE9iaiA9IHtwb3NpdGlvbjogMSArIHBvcywgY291bnQsIGJhc2V9O1xuICAgICAgICBjdHgucHVzaE9iamVjdChtaXNNYXRjaE9iaik7ICAvLyBmb3IgZGVidWdnaW5nIGFuZCBjbGljay10cmFja2luZ1xuXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5CQVNFX0NPTE9SU1tiYXNlXTtcbiAgICAgICAgdmFyIHkgPSB5U2NhbGUoY291bnRTb0Zhcik7XG4gICAgICAgIGN0eC5maWxsUmVjdChiYXJYMSxcbiAgICAgICAgICAgICAgICAgICAgIHksXG4gICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgxLCBiYXJYMiAtIGJhclgxKSwgIC8vIG1pbiB3aWR0aCBvZiAxcHhcbiAgICAgICAgICAgICAgICAgICAgIHlTY2FsZShjb3VudFNvRmFyICsgY291bnQpIC0geSk7XG4gICAgICAgIGNvdW50U29GYXIgKz0gY291bnQ7XG5cbiAgICAgICAgY3R4LnBvcE9iamVjdCgpO1xuICAgICAgfSk7XG4gICAgY3R4LnBvcE9iamVjdCgpO1xuICB9KTtcbn1cblxudHlwZSBQcm9wcyA9IHtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG4gIHJhbmdlOiBHZW5vbWVSYW5nZTtcbiAgc291cmNlOiBBbGlnbm1lbnREYXRhU291cmNlO1xuICByZWZlcmVuY2VTb3VyY2U6IFR3b0JpdFNvdXJjZTtcbiAgb3B0aW9uczoge1xuICAgIHZhZkNvbG9yVGhyZXNob2xkOiBudW1iZXJcbiAgfVxufTtcblxuY2xhc3MgQ292ZXJhZ2VUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHByb3BzOiBQcm9wcztcbiAgc3RhdGU6IHZvaWQ7XG4gIGNhY2hlOiBDb3ZlcmFnZUNhY2hlO1xuICB0aWxlczogQ292ZXJhZ2VUaWxlZENhbnZhcztcbiAgc3RhdGljIGRlZmF1bHRPcHRpb25zOiBPYmplY3Q7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgcmV0dXJuIDxjYW52YXMgcmVmPSdjYW52YXMnIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKX0gLz47XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuY2FjaGUgPSBuZXcgQ292ZXJhZ2VDYWNoZSh0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZSk7XG4gICAgdGhpcy50aWxlcyA9IG5ldyBDb3ZlcmFnZVRpbGVkQ2FudmFzKHRoaXMuY2FjaGUsIHRoaXMucHJvcHMuaGVpZ2h0LCB0aGlzLnByb3BzLm9wdGlvbnMpO1xuXG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ld2RhdGEnLCByYW5nZSA9PiB7XG4gICAgICB2YXIgb2xkTWF4ID0gdGhpcy5jYWNoZS5tYXhDb3ZlcmFnZUZvclJlZihyYW5nZS5jb250aWcpO1xuICAgICAgdGhpcy5wcm9wcy5zb3VyY2UuZ2V0QWxpZ25tZW50c0luUmFuZ2UocmFuZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKHJlYWQgPT4gdGhpcy5jYWNoZS5hZGRBbGlnbm1lbnQocmVhZCkpO1xuICAgICAgdmFyIG5ld01heCA9IHRoaXMuY2FjaGUubWF4Q292ZXJhZ2VGb3JSZWYocmFuZ2UuY29udGlnKTtcblxuICAgICAgaWYgKG9sZE1heCAhPSBuZXdNYXgpIHtcbiAgICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlQWxsKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVSYW5nZShyYW5nZSk7XG4gICAgICB9XG4gICAgICB0aGlzLnZpc3VhbGl6ZUNvdmVyYWdlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5vbignbmV3ZGF0YScsIHJhbmdlID0+IHtcbiAgICAgIHRoaXMuY2FjaGUudXBkYXRlTWlzbWF0Y2hlcyhyYW5nZSk7XG4gICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVSYW5nZShyYW5nZSk7XG4gICAgICB0aGlzLnZpc3VhbGl6ZUNvdmVyYWdlKCk7XG4gICAgfSk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHRoaXMucHJvcHMsIHByZXZQcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHModGhpcy5zdGF0ZSwgcHJldlN0YXRlKSkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaGVpZ2h0ICE9IHByZXZQcm9wcy5oZWlnaHQgfHxcbiAgICAgICAgICB0aGlzLnByb3BzLm9wdGlvbnMgIT0gcHJldlByb3BzLm9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy50aWxlcy51cGRhdGUodGhpcy5wcm9wcy5oZWlnaHQsIHRoaXMucHJvcHMub3B0aW9ucyk7XG4gICAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgICAgfVxuICAgICAgdGhpcy52aXN1YWxpemVDb3ZlcmFnZSgpO1xuICAgIH1cbiAgfVxuXG4gIGdldENvbnRleHQoKTogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHtcbiAgICB2YXIgY2FudmFzID0gKHRoaXMucmVmcy5jYW52YXMgOiBIVE1MQ2FudmFzRWxlbWVudCk7XG4gICAgLy8gVGhlIHR5cGVjYXN0IHRocm91Z2ggYGFueWAgaXMgYmVjYXVzZSBnZXRDb250ZXh0IGNvdWxkIHJldHVybiBhIFdlYkdMIGNvbnRleHQuXG4gICAgdmFyIGN0eCA9ICgoY2FudmFzLmdldENvbnRleHQoJzJkJykgOiBhbnkpIDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTtcbiAgICByZXR1cm4gY3R4O1xuICB9XG5cbiAgLy8gRHJhdyB0aHJlZSB0aWNrcyBvbiB0aGUgbGVmdCB0byBzZXQgdGhlIHNjYWxlIGZvciB0aGUgdXNlclxuICByZW5kZXJUaWNrcyhjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHlTY2FsZTogKG51bTogbnVtYmVyKT0+bnVtYmVyKSB7XG4gICAgdmFyIGF4aXNNYXggPSB5U2NhbGUuZG9tYWluKClbMF07XG4gICAgWzAsIE1hdGgucm91bmQoYXhpc01heCAvIDIpLCBheGlzTWF4XS5mb3JFYWNoKHRpY2sgPT4ge1xuICAgICAgLy8gRHJhdyBhIGxpbmUgaW5kaWNhdGluZyB0aGUgdGlja1xuICAgICAgY3R4LnB1c2hPYmplY3Qoe3ZhbHVlOiB0aWNrLCB0eXBlOiAndGljayd9KTtcbiAgICAgIHZhciB0aWNrUG9zWSA9IE1hdGgucm91bmQoeVNjYWxlKHRpY2spKTtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHN0eWxlLkNPVkVSQUdFX0ZPTlRfQ09MT1I7XG4gICAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIDAsIHRpY2tQb3NZLCBzdHlsZS5DT1ZFUkFHRV9USUNLX0xFTkdUSCwgdGlja1Bvc1kpO1xuICAgICAgY3R4LnBvcE9iamVjdCgpO1xuXG4gICAgICB2YXIgdGlja0xhYmVsID0gdGljayArICdYJztcbiAgICAgIGN0eC5wdXNoT2JqZWN0KHt2YWx1ZTogdGljaywgbGFiZWw6IHRpY2tMYWJlbCwgdHlwZTogJ2xhYmVsJ30pO1xuICAgICAgLy8gTm93IHByaW50IHRoZSBjb3ZlcmFnZSBpbmZvcm1hdGlvblxuICAgICAgY3R4LmZvbnQgPSBzdHlsZS5DT1ZFUkFHRV9GT05UX1NUWUxFO1xuICAgICAgdmFyIHRleHRQb3NYID0gc3R5bGUuQ09WRVJBR0VfVElDS19MRU5HVEggKyBzdHlsZS5DT1ZFUkFHRV9URVhUX1BBRERJTkcsXG4gICAgICAgICAgdGV4dFBvc1kgPSB0aWNrUG9zWSArIHN0eWxlLkNPVkVSQUdFX1RFWFRfWV9PRkZTRVQ7XG4gICAgICAvLyBUaGUgc3Ryb2tlIGNyZWF0ZXMgYSBib3JkZXIgYXJvdW5kIHRoZSB0ZXh0IHRvIG1ha2UgaXQgbGVnaWJsZSBvdmVyIHRoZSBiYXJzLlxuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcbiAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgY3R4LnN0cm9rZVRleHQodGlja0xhYmVsLCB0ZXh0UG9zWCwgdGV4dFBvc1kpO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQ09WRVJBR0VfRk9OVF9DT0xPUjtcbiAgICAgIGN0eC5maWxsVGV4dCh0aWNrTGFiZWwsIHRleHRQb3NYLCB0ZXh0UG9zWSk7XG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgfSk7XG4gIH1cblxuICB2aXN1YWxpemVDb3ZlcmFnZSgpIHtcbiAgICB2YXIgY2FudmFzID0gKHRoaXMucmVmcy5jYW52YXMgOiBIVE1MQ2FudmFzRWxlbWVudCksXG4gICAgICAgIHdpZHRoID0gdGhpcy5wcm9wcy53aWR0aCxcbiAgICAgICAgaGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQsXG4gICAgICAgIHJhbmdlID0gQ29udGlnSW50ZXJ2YWwuZnJvbUdlbm9tZVJhbmdlKHRoaXMucHJvcHMucmFuZ2UpO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgaGVpZ2h0ICYgd2lkdGggYXJlIGtub3duLlxuICAgIGlmICh3aWR0aCA9PT0gMCkgcmV0dXJuO1xuICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQodGhpcy5nZXRDb250ZXh0KCkpO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnJlc2V0KCk7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG5cbiAgICB2YXIgeVNjYWxlID0gdGhpcy50aWxlcy55U2NhbGVGb3JSZWYocmFuZ2UuY29udGlnKTtcblxuICAgIHRoaXMudGlsZXMucmVuZGVyVG9TY3JlZW4oY3R4LCByYW5nZSwgdGhpcy5nZXRTY2FsZSgpKTtcbiAgICB0aGlzLnJlbmRlclRpY2tzKGN0eCwgeVNjYWxlKTtcblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBoYW5kbGVDbGljayhyZWFjdEV2ZW50OiBhbnkpIHtcbiAgICB2YXIgZXYgPSByZWFjdEV2ZW50Lm5hdGl2ZUV2ZW50LFxuICAgICAgICB4ID0gZXYub2Zmc2V0WDtcblxuICAgIC8vIEl0J3Mgc2ltcGxlIHRvIGZpZ3VyZSBvdXQgd2hpY2ggcG9zaXRpb24gd2FzIGNsaWNrZWQgdXNpbmcgdGhlIHgtc2NhbGUuXG4gICAgLy8gTm8gbmVlZCB0byByZW5kZXIgdGhlIHNjZW5lIHRvIGRldGVybWluZSB3aGF0IHdhcyBjbGlja2VkLlxuICAgIHZhciByYW5nZSA9IENvbnRpZ0ludGVydmFsLmZyb21HZW5vbWVSYW5nZSh0aGlzLnByb3BzLnJhbmdlKSxcbiAgICAgICAgeFNjYWxlID0gdGhpcy5nZXRTY2FsZSgpLFxuICAgICAgICBiaW5zID0gdGhpcy5jYWNoZS5iaW5zRm9yUmVmKHJhbmdlLmNvbnRpZyksXG4gICAgICAgIHBvcyA9IE1hdGguZmxvb3IoeFNjYWxlLmludmVydCh4KSkgLSAxLFxuICAgICAgICBiaW4gPSBiaW5zW3Bvc107XG5cbiAgICB2YXIgYWxlcnQgPSB3aW5kb3cuYWxlcnQgfHwgY29uc29sZS5sb2c7XG4gICAgaWYgKGJpbikge1xuICAgICAgdmFyIG1tQ291bnQgPSBiaW4ubWlzbWF0Y2hlcyA/IF8ucmVkdWNlKGJpbi5taXNtYXRjaGVzLCAoYSwgYikgPT4gYSArIGIpIDogMDtcbiAgICAgIHZhciByZWYgPSBiaW4ucmVmIHx8IHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLmdldFJhbmdlQXNTdHJpbmcoXG4gICAgICAgICAge2NvbnRpZzogcmFuZ2UuY29udGlnLCBzdGFydDogcG9zLCBzdG9wOiBwb3N9KTtcblxuICAgICAgLy8gQ29uc3RydWN0IGEgSlNPTiBvYmplY3QgdG8gc2hvdyB0aGUgdXNlci5cbiAgICAgIHZhciBtZXNzYWdlT2JqZWN0ID0gXy5leHRlbmQoXG4gICAgICAgIHtcbiAgICAgICAgICAncG9zaXRpb24nOiByYW5nZS5jb250aWcgKyAnOicgKyAoMSArIHBvcyksXG4gICAgICAgICAgJ3JlYWQgZGVwdGgnOiBiaW4uY291bnRcbiAgICAgICAgfSxcbiAgICAgICAgYmluLm1pc21hdGNoZXMpO1xuICAgICAgbWVzc2FnZU9iamVjdFtyZWZdID0gYmluLmNvdW50IC0gbW1Db3VudDtcbiAgICAgIGFsZXJ0KEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VPYmplY3QsIG51bGwsICcgICcpKTtcbiAgICB9XG4gIH1cbn1cblxuQ292ZXJhZ2VUcmFjay5kaXNwbGF5TmFtZSA9ICdjb3ZlcmFnZSc7XG5Db3ZlcmFnZVRyYWNrLmRlZmF1bHRPcHRpb25zID0ge1xuICAvLyBDb2xvciB0aGUgcmVmZXJlbmNlIGJhc2UgaW4gdGhlIGJhciBjaGFydCB3aGVuIHRoZSBWYXJpYW50IEFsbGVsZSBGcmFjdGlvblxuICAvLyBleGNlZWRzIHRoaXMgYW1vdW50LiBXaGVuIHRoZXJlIGFyZSA+PTIgYWdyZWVpbmcgbWlzbWF0Y2hlcywgdGhleSBhcmVcbiAgLy8gYWx3YXlzIHJlbmRlcmVkLiBCdXQgZm9yIG1pc21hdGNoZXMgYmVsb3cgdGhpcyB0aHJlc2hvbGQsIHRoZSByZWZlcmVuY2UgaXNcbiAgLy8gbm90IGNvbG9yZWQgaW4gdGhlIGJhciBjaGFydC4gVGhpcyBkcmF3cyBhdHRlbnRpb24gdG8gaGlnaC1WQUYgbWlzbWF0Y2hlcy5cbiAgdmFmQ29sb3JUaHJlc2hvbGQ6IDAuMlxufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IENvdmVyYWdlVHJhY2s7XG4iLCIvKipcbiAqIEluZGl2aWR1YWwgYmFzZSBwYWlycyBhcmUgcmVuZGVyZWQgZGlmZmVyZW50bHkgZGVwZW5kaW5nIG9uIHRoZSBzY2FsZS5cbiAqIFRoaXMgZW51bSAmIGFzc29jaWF0ZWQgZnVuY3Rpb25zIGhlbHAgdHJhY2sgdGhlc2UgdHJhbnNpdGlvbnMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBEaXNwbGF5TW9kZSA9IHtcbiAgTE9PU0U6IDEsICAgLy8gTG90cyBvZiBzcGFjZSAtLSBhIGJpZyBmb250IGlzIE9LLlxuICBUSUdIVDogMiwgICAvLyBMZXR0ZXJzIG5lZWQgdG8gYmUgc2hydW5rIHRvIGZpdC5cbiAgQkxPQ0tTOiAzLCAgLy8gQ2hhbmdlIGZyb20gbGV0dGVycyB0byBibG9ja3Mgb2YgY29sb3JcbiAgSElEREVOOiA0LFxuXG4gIGdldERpc3BsYXlNb2RlKHB4UGVyTGV0dGVyOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmIChweFBlckxldHRlciA+PSAyNSkge1xuICAgICAgcmV0dXJuIERpc3BsYXlNb2RlLkxPT1NFO1xuICAgIH0gZWxzZSBpZiAocHhQZXJMZXR0ZXIgPj0gMTApIHtcbiAgICAgIHJldHVybiBEaXNwbGF5TW9kZS5USUdIVDtcbiAgICB9IGVsc2UgaWYgKHB4UGVyTGV0dGVyID49IDEpIHtcbiAgICAgIHJldHVybiBEaXNwbGF5TW9kZS5CTE9DS1M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBEaXNwbGF5TW9kZS5ISURERU47XG4gICAgfVxuICB9LFxuXG4gIGlzVGV4dChtb2RlOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKG1vZGUgPT0gRGlzcGxheU1vZGUuTE9PU0UgfHwgbW9kZSA9PSBEaXNwbGF5TW9kZS5USUdIVCk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRGlzcGxheU1vZGU7XG4iLCIvKipcbiAqIFZpc3VhbGl6YXRpb24gb2YgZ2VuZXMsIGluY2x1ZGluZyBleG9ucyBhbmQgY29kaW5nIHJlZ2lvbnMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtTdHJhbmR9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgdHlwZSB7R2VuZSwgQmlnQmVkU291cmNlfSBmcm9tICcuLi9zb3VyY2VzL0JpZ0JlZERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuXG5pbXBvcnQgYmVkdG9vbHMgZnJvbSAnLi4vZGF0YS9iZWR0b29scyc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCBzY2FsZSBmcm9tICcuLi9zY2FsZSc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5cblxuLy8gRHJhdyBhbiBhcnJvdyBpbiB0aGUgbWlkZGxlIG9mIHRoZSB2aXNpYmxlIHBvcnRpb24gb2YgcmFuZ2UuXG5mdW5jdGlvbiBkcmF3QXJyb3coY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgY2xhbXBlZFNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgICAgICAgICAgIHJhbmdlOiBJbnRlcnZhbCxcbiAgICAgICAgICAgICAgICAgICB0aXBZOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgc3RyYW5kOiBTdHJhbmQpIHtcbiAgdmFyIHgxID0gY2xhbXBlZFNjYWxlKDEgKyByYW5nZS5zdGFydCksXG4gICAgICB4MiA9IGNsYW1wZWRTY2FsZSgxICsgcmFuZ2Uuc3RvcCk7XG5cbiAgLy8gaXQncyBvZmYtc2NyZWVuIG9yIHRoZXJlJ3Mgbm90IGVub3VnaCByb29tIHRvIGRyYXcgaXQgbGVnaWJseS5cbiAgaWYgKHgyIC0geDEgPD0gMiAqIHN0eWxlLkdFTkVfQVJST1dfU0laRSkgcmV0dXJuO1xuXG4gIHZhciBjeCA9ICh4MSArIHgyKSAvIDI7XG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgaWYgKHN0cmFuZCA9PSAnLScpIHtcbiAgICBjdHgubW92ZVRvKGN4ICsgc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZIC0gc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgICBjdHgubGluZVRvKGN4LCB0aXBZKTtcbiAgICBjdHgubGluZVRvKGN4ICsgc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZICsgc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgfSBlbHNlIHtcbiAgICBjdHgubW92ZVRvKGN4IC0gc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZIC0gc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgICBjdHgubGluZVRvKGN4LCB0aXBZKTtcbiAgICBjdHgubGluZVRvKGN4IC0gc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZICsgc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgfVxuICBjdHguc3Ryb2tlKCk7XG59XG5cbmZ1bmN0aW9uIGRyYXdHZW5lTmFtZShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgICBjbGFtcGVkU2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgZ2VuZUxpbmVZOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgZ2VuZTogR2VuZSxcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0SW50ZXJ2YWxzOiBJbnRlcnZhbFtdKSB7XG4gIHZhciBwID0gZ2VuZS5wb3NpdGlvbixcbiAgICAgIGNlbnRlclggPSAwLjUgKiAoY2xhbXBlZFNjYWxlKDEgKyBwLnN0YXJ0KCkpICsgY2xhbXBlZFNjYWxlKDEgKyBwLnN0b3AoKSkpO1xuICB2YXIgbmFtZSA9IGdlbmUubmFtZSB8fCBnZW5lLmlkO1xuICB2YXIgdGV4dFdpZHRoID0gY3R4Lm1lYXN1cmVUZXh0KG5hbWUpLndpZHRoO1xuICB2YXIgdGV4dEludGVydmFsID0gbmV3IEludGVydmFsKGNlbnRlclggLSAwLjUgKiB0ZXh0V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyWCArIDAuNSAqIHRleHRXaWR0aCk7XG4gIGlmICghXy5hbnkodGV4dEludGVydmFscywgaXYgPT4gdGV4dEludGVydmFsLmludGVyc2VjdHMoaXYpKSkge1xuICAgIHRleHRJbnRlcnZhbHMucHVzaCh0ZXh0SW50ZXJ2YWwpO1xuICAgIHZhciBiYXNlbGluZVkgPSBnZW5lTGluZVkgKyBzdHlsZS5HRU5FX0ZPTlRfU0laRSArIHN0eWxlLkdFTkVfVEVYVF9QQURESU5HO1xuICAgIGN0eC5maWxsVGV4dChuYW1lLCBjZW50ZXJYLCBiYXNlbGluZVkpO1xuICB9XG59XG5cbmNsYXNzIEdlbmVUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHByb3BzOiBWaXpQcm9wcyAmIHsgc291cmNlOiBCaWdCZWRTb3VyY2UgfTtcbiAgc3RhdGU6IHtnZW5lczogR2VuZVtdfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVml6UHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGdlbmVzOiBbXVxuICAgIH07XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICByZXR1cm4gPGNhbnZhcyAvPjtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8vIFZpc3VhbGl6ZSBuZXcgcmVmZXJlbmNlIGRhdGEgYXMgaXQgY29tZXMgaW4gZnJvbSB0aGUgbmV0d29yay5cbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV3ZGF0YScsIChyYW5nZSkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGdlbmVzOiB0aGlzLnByb3BzLnNvdXJjZS5nZXRHZW5lc0luUmFuZ2UocmFuZ2UpXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHByZXZQcm9wcywgdGhpcy5wcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHMocHJldlN0YXRlLCB0aGlzLnN0YXRlKSkge1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyksXG4gICAgICAgIHt3aWR0aCwgaGVpZ2h0fSA9IHRoaXMucHJvcHMsXG4gICAgICAgIGdlbm9tZVJhbmdlID0gdGhpcy5wcm9wcy5yYW5nZTtcblxuICAgIHZhciByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChnZW5vbWVSYW5nZS5jb250aWcsIGdlbm9tZVJhbmdlLnN0YXJ0LCBnZW5vbWVSYW5nZS5zdG9wKTtcblxuICAgIC8vIEhvbGQgb2ZmIHVudGlsIGhlaWdodCAmIHdpZHRoIGFyZSBrbm93bi5cbiAgICBpZiAod2lkdGggPT09IDApIHJldHVybjtcblxuICAgIHZhciBzYyA9IHRoaXMuZ2V0U2NhbGUoKSxcbiAgICAgICAgLy8gV2UgY2FuJ3QgY2xhbXAgc2NhbGUgZGlyZWN0bHkgYmVjYXVzZSBvZiBvZmZzZXRQeC5cbiAgICAgICAgY2xhbXBlZFNjYWxlID0gc2NhbGUubGluZWFyKClcbiAgICAgICAgICAgIC5kb21haW4oW3NjLmludmVydCgwKSwgc2MuaW52ZXJ0KHdpZHRoKV0pXG4gICAgICAgICAgICAucmFuZ2UoWzAsIHdpZHRoXSlcbiAgICAgICAgICAgIC5jbGFtcCh0cnVlKTtcblxuICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpKTtcbiAgICBjdHgucmVzZXQoKTtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcblxuICAgIHZhciBnZW5lTGluZVkgPSBNYXRoLnJvdW5kKGhlaWdodCAvIDQpO1xuICAgIHZhciB0ZXh0SW50ZXJ2YWxzID0gW107ICAvLyB4LWludGVydmFscyB3aXRoIHJlbmRlcmVkIGdlbmUgbmFtZXMsIHRvIGF2b2lkIG92ZXItZHJhd2luZy5cbiAgICAvLyBUT0RPOiBkb24ndCBwdWxsIGluIGdlbmVzIHZpYSBzdGF0ZS5cbiAgICBjdHguZm9udCA9IGAke3N0eWxlLkdFTkVfRk9OVF9TSVpFfXB4ICR7c3R5bGUuR0VORV9GT05UfWA7XG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIHRoaXMuc3RhdGUuZ2VuZXMuZm9yRWFjaChnZW5lID0+IHtcbiAgICAgIGlmICghZ2VuZS5wb3NpdGlvbi5jaHJJbnRlcnNlY3RzKHJhbmdlKSkgcmV0dXJuO1xuICAgICAgY3R4LnB1c2hPYmplY3QoZ2VuZSk7XG4gICAgICBjdHgubGluZVdpZHRoID0gMTtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHN0eWxlLkdFTkVfQ09MT1I7XG4gICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuR0VORV9DT0xPUjtcblxuICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCBjbGFtcGVkU2NhbGUoMSArIGdlbmUucG9zaXRpb24uc3RhcnQoKSksIGdlbmVMaW5lWSArIDAuNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhbXBlZFNjYWxlKDEgKyBnZW5lLnBvc2l0aW9uLnN0b3AoKSksIGdlbmVMaW5lWSArIDAuNSk7XG5cbiAgICAgIC8vIFRPRE86IG9ubHkgY29tcHV0ZSBhbGwgdGhlc2UgaW50ZXJ2YWxzIHdoZW4gZGF0YSBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICAgIHZhciBleG9ucyA9IGJlZHRvb2xzLnNwbGl0Q29kaW5nRXhvbnMoZ2VuZS5leG9ucywgZ2VuZS5jb2RpbmdSZWdpb24pO1xuICAgICAgZXhvbnMuZm9yRWFjaChleG9uID0+IHtcbiAgICAgICAgY3R4LmZpbGxSZWN0KHNjKDEgKyBleG9uLnN0YXJ0KSxcbiAgICAgICAgICAgICAgICAgICAgIGdlbmVMaW5lWSAtIDMgKiAoZXhvbi5pc0NvZGluZyA/IDIgOiAxKSxcbiAgICAgICAgICAgICAgICAgICAgIHNjKGV4b24uc3RvcCArIDIpIC0gc2MoMSArIGV4b24uc3RhcnQpLFxuICAgICAgICAgICAgICAgICAgICAgNiAqIChleG9uLmlzQ29kaW5nID8gMiA6IDEpKTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgaW50cm9ucyA9IGdlbmUucG9zaXRpb24uaW50ZXJ2YWwuY29tcGxlbWVudEludGVydmFscyhnZW5lLmV4b25zKTtcbiAgICAgIGludHJvbnMuZm9yRWFjaChyYW5nZSA9PiB7XG4gICAgICAgIGRyYXdBcnJvdyhjdHgsIGNsYW1wZWRTY2FsZSwgcmFuZ2UsIGdlbmVMaW5lWSArIDAuNSwgZ2VuZS5zdHJhbmQpO1xuICAgICAgfSk7XG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHlsZS5HRU5FX0NPTVBMRU1FTlRfQ09MT1I7XG4gICAgICBjdHgubGluZVdpZHRoID0gMjtcbiAgICAgIGdlbmUuZXhvbnMuZm9yRWFjaChyYW5nZSA9PiB7XG4gICAgICAgIGRyYXdBcnJvdyhjdHgsIGNsYW1wZWRTY2FsZSwgcmFuZ2UsIGdlbmVMaW5lWSArIDAuNSwgZ2VuZS5zdHJhbmQpO1xuICAgICAgfSk7XG5cbiAgICAgIGRyYXdHZW5lTmFtZShjdHgsIGNsYW1wZWRTY2FsZSwgZ2VuZUxpbmVZLCBnZW5lLCB0ZXh0SW50ZXJ2YWxzKTtcblxuICAgICAgY3R4LnBvcE9iamVjdCgpO1xuICAgIH0pO1xuICB9XG59XG5cbkdlbmVUcmFjay5kaXNwbGF5TmFtZSA9ICdnZW5lcyc7XG5cbm1vZHVsZS5leHBvcnRzID0gR2VuZVRyYWNrO1xuIiwiLyoqXG4gKiBBIHRyYWNrIHdoaWNoIGRpc3BsYXlzIGEgcmVmZXJlbmNlIGdlbm9tZS5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge0RhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuXG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQgRGlzcGxheU1vZGUgZnJvbSAnLi9EaXNwbGF5TW9kZSc7XG5pbXBvcnQgVGlsZWRDYW52YXMgZnJvbSAnLi9UaWxlZENhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuXG5cbmZ1bmN0aW9uIHJlbmRlckdlbm9tZShjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IChudW06IG51bWJlcikgPT4gbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICAgIGJhc2VQYWlyczogc3RyaW5nKSB7XG4gIHZhciBweFBlckxldHRlciA9IHNjYWxlKDEpIC0gc2NhbGUoMCk7XG4gIHZhciBtb2RlID0gRGlzcGxheU1vZGUuZ2V0RGlzcGxheU1vZGUocHhQZXJMZXR0ZXIpO1xuICB2YXIgc2hvd1RleHQgPSBEaXNwbGF5TW9kZS5pc1RleHQobW9kZSk7XG5cbiAgaWYgKG1vZGUgIT0gRGlzcGxheU1vZGUuSElEREVOKSB7XG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIGlmIChtb2RlID09IERpc3BsYXlNb2RlLkxPT1NFKSB7XG4gICAgICBjdHguZm9udCA9IHN0eWxlLkxPT1NFX1RFWFRfU1RZTEU7XG4gICAgfSBlbHNlIGlmIChtb2RlID09IERpc3BsYXlNb2RlLlRJR0hUKSB7XG4gICAgICBjdHguZm9udCA9IHN0eWxlLlRJR0hUX1RFWFRfU1RZTEU7XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzQmFzZSA9IG51bGw7XG4gICAgdmFyIHN0YXJ0ID0gcmFuZ2Uuc3RhcnQoKSxcbiAgICAgICAgc3RvcCA9IHJhbmdlLnN0b3AoKTtcbiAgICBmb3IgKHZhciBwb3MgPSBzdGFydDsgcG9zIDw9IHN0b3A7IHBvcysrKSB7XG4gICAgICB2YXIgbGV0dGVyID0gYmFzZVBhaXJzW3BvcyAtIHN0YXJ0XTtcbiAgICAgIGlmIChsZXR0ZXIgPT0gJy4nKSBjb250aW51ZTsgIC8vIG5vdCB5ZXQga25vd25cblxuICAgICAgY3R4LnNhdmUoKTtcbiAgICAgIGN0eC5wdXNoT2JqZWN0KHtwb3MsIGxldHRlcn0pO1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLkJBU0VfQ09MT1JTW2xldHRlcl07XG4gICAgICBpZiAoc2hvd1RleHQpIHtcbiAgICAgICAgLy8gV2Ugb25seSBwdXNoIG9iamVjdHMgaW4gdGhlIHRleHQgY2FzZSBhcyBpdCBpbnZvbHZlcyBjcmVhdGluZyBhXG4gICAgICAgIC8vIG5ldyBvYmplY3QgJiBjYW4gYmVjb21lIGEgcGVyZm9ybWFuY2UgaXNzdWUuXG4gICAgICAgIC8vIDAuNSA9IGNlbnRlcmVkXG4gICAgICAgIGN0eC5maWxsVGV4dChsZXR0ZXIsIHNjYWxlKDEgKyAwLjUgKyBwb3MpLCBoZWlnaHQgLSAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChweFBlckxldHRlciA+PSBzdHlsZS5DT1ZFUkFHRV9NSU5fQkFSX1dJRFRIX0ZPUl9HQVApIHtcbiAgICAgICAgICAvLyBXZSB3YW50IGEgd2hpdGUgc3BhY2UgYmV0d2VlbiBibG9ja3MgYXQgdGhpcyBzaXplLCBzbyB3ZSBjYW4gc2VlXG4gICAgICAgICAgLy8gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBiYXNlcy5cbiAgICAgICAgICBjdHguZmlsbFJlY3Qoc2NhbGUoMSArIHBvcykgKyAwLjUsIDAsICBweFBlckxldHRlciAtIDEuNSwgaGVpZ2h0KTtcbiAgICAgICAgfSBlbHNlIGlmIChwcmV2aW91c0Jhc2UgPT09IGxldHRlcikge1xuICAgICAgICAgIC8vIE90aGVyd2lzZSwgd2Ugd2FudCBydW5zIG9mIGNvbG9ycyB0byBiZSBjb21wbGV0ZWx5IHNvbGlkIC4uLlxuICAgICAgICAgIGN0eC5maWxsUmVjdChzY2FsZSgxICsgcG9zKSAtIDEuNSwgMCwgcHhQZXJMZXR0ZXIgKyAxLjUsIGhlaWdodCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gLi4uIGFuZCBtaW5pbWl6ZSB0aGUgYW1vdW50IG9mIHNtdWRnaW5nIGFuZCB3aGl0ZXNwYWNlIGJldHdlZW5cbiAgICAgICAgICAvLyBiYXNlcy5cbiAgICAgICAgICBjdHguZmlsbFJlY3Qoc2NhbGUoMSArIHBvcykgLSAwLjUsIDAsICBweFBlckxldHRlciArIDEuNSwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgcHJldmlvdXNCYXNlID0gbGV0dGVyO1xuICAgIH1cbiAgfVxufVxuXG5cbmNsYXNzIEdlbm9tZVRpbGVkQ2FudmFzIGV4dGVuZHMgVGlsZWRDYW52YXMge1xuICBzb3VyY2U6IFR3b0JpdFNvdXJjZTtcbiAgaGVpZ2h0OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3Ioc291cmNlOiBUd29CaXRTb3VyY2UsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAvLyB3b3JrYXJvdW5kIGZvciBhbiBpc3N1ZSBpbiBQaGFudG9tSlMgd2hlcmUgaGVpZ2h0IGFsd2F5cyBjb21lcyBvdXQgdG8gemVyby5cbiAgICB0aGlzLmhlaWdodCA9IE1hdGgubWF4KDEsIGhlaWdodCk7XG4gIH1cblxuICByZW5kZXIoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgc2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikge1xuICAgIC8vIFRoZSArLy0xIGVuc3VyZXMgdGhhdCBwYXJ0aWFsbHktdmlzaWJsZSBiYXNlcyBvbiB0aGUgZWRnZSBhcmUgcmVuZGVyZWQuXG4gICAgdmFyIGdlbm9tZVJhbmdlID0ge1xuICAgICAgY29udGlnOiByYW5nZS5jb250aWcsXG4gICAgICBzdGFydDogcmFuZ2Uuc3RhcnQoKSAtIDEsXG4gICAgICBzdG9wOiByYW5nZS5zdG9wKCkgKyAxXG4gICAgfTtcbiAgICB2YXIgYmFzZVBhaXJzID0gdGhpcy5zb3VyY2UuZ2V0UmFuZ2VBc1N0cmluZyhnZW5vbWVSYW5nZSk7XG4gICAgcmVuZGVyR2Vub21lKGN0eCwgc2NhbGUsIHRoaXMuaGVpZ2h0LCBDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UoZ2Vub21lUmFuZ2UpLCBiYXNlUGFpcnMpO1xuICB9XG5cbiAgaGVpZ2h0Rm9yUmVmKHJlZjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5oZWlnaHQ7XG4gIH1cblxuICB1cGRhdGVIZWlnaHQoaGVpZ2h0OiBudW1iZXIpIHtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgfVxufVxuXG5cbmNsYXNzIEdlbm9tZVRyYWNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgcHJvcHM6IFZpelByb3BzICYge3NvdXJjZTogVHdvQml0U291cmNlfTtcbiAgc3RhdGU6IHZvaWQ7ICAvLyBubyBzdGF0ZVxuICB0aWxlczogR2Vub21lVGlsZWRDYW52YXM7XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgcmV0dXJuIDxjYW52YXMgLz47XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnRpbGVzID0gbmV3IEdlbm9tZVRpbGVkQ2FudmFzKHRoaXMucHJvcHMuc291cmNlLCB0aGlzLnByb3BzLmhlaWdodCk7XG5cbiAgICAvLyBWaXN1YWxpemUgbmV3IHJlZmVyZW5jZSBkYXRhIGFzIGl0IGNvbWVzIGluIGZyb20gdGhlIG5ldHdvcmsuXG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ld2RhdGEnLCByYW5nZSA9PiB7XG4gICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVSYW5nZShyYW5nZSk7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9KTtcblxuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHByZXZQcm9wcywgdGhpcy5wcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHMocHJldlN0YXRlLCB0aGlzLnN0YXRlKSkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaGVpZ2h0ICE9IHByZXZQcm9wcy5oZWlnaHQpIHtcbiAgICAgICAgdGhpcy50aWxlcy51cGRhdGVIZWlnaHQodGhpcy5wcm9wcy5oZWlnaHQpO1xuICAgICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVZpc3VhbGl6YXRpb24oKSB7XG4gICAgdmFyIGNhbnZhcyA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLFxuICAgICAgICB7d2lkdGgsIGhlaWdodCwgcmFuZ2V9ID0gdGhpcy5wcm9wcztcblxuICAgIC8vIEhvbGQgb2ZmIHVudGlsIGhlaWdodCAmIHdpZHRoIGFyZSBrbm93bi5cbiAgICBpZiAod2lkdGggPT09IDApIHJldHVybjtcbiAgICBkM3V0aWxzLnNpemVDYW52YXMoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIHZhciBjdHggPSBkYXRhQ2FudmFzLmdldERhdGFDb250ZXh0KGNhbnZhc1V0aWxzLmdldENvbnRleHQoY2FudmFzKSk7XG4gICAgY3R4LnJlc2V0KCk7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG4gICAgdGhpcy50aWxlcy5yZW5kZXJUb1NjcmVlbihjdHgsIENvbnRpZ0ludGVydmFsLmZyb21HZW5vbWVSYW5nZShyYW5nZSksIHRoaXMuZ2V0U2NhbGUoKSk7XG4gIH1cbn1cblxuR2Vub21lVHJhY2suZGlzcGxheU5hbWUgPSAncmVmZXJlbmNlJztcblxubW9kdWxlLmV4cG9ydHMgPSBHZW5vbWVUcmFjaztcbiIsIi8qKlxuICogQSB0cmFjayB3aGljaCBzaG93cyB0aGUgbG9jYXRpb24gb2YgdGhlIGJhc2UgaW4gdGhlIG1pZGRsZSBvZiB0aGUgdmlldy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBFbXB0eVNvdXJjZSBmcm9tICcuLi9zb3VyY2VzL0VtcHR5U291cmNlJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgZGF0YUNhbnZhcyBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcblxuY2xhc3MgTG9jYXRpb25UcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHByb3BzOiBWaXpQcm9wcztcbiAgc3RhdGU6IHZvaWQ7ICAvLyBubyBzdGF0ZVxuICBzdGF0aWMgZGVmYXVsdFNvdXJjZTogT2JqZWN0O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBPYmplY3QpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIHJldHVybiA8Y2FudmFzIC8+O1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKSxcbiAgICAgICAge3JhbmdlLCB3aWR0aCwgaGVpZ2h0fSA9IHRoaXMucHJvcHMsXG4gICAgICAgIHNjYWxlID0gdGhpcy5nZXRTY2FsZSgpO1xuXG4gICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG5cbiAgICB2YXIgY3R4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjYW52YXNVdGlscy5nZXRDb250ZXh0KGNhbnZhcykpO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnJlc2V0KCk7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG5cbiAgICB2YXIgbWlkUG9pbnQgPSBNYXRoLmZsb29yKChyYW5nZS5zdG9wICsgcmFuZ2Uuc3RhcnQpIC8gMiksXG4gICAgICAgIHJpZ2h0TGluZVggPSBNYXRoLnJvdW5kKHNjYWxlKG1pZFBvaW50ICsgMSkpLFxuICAgICAgICBsZWZ0TGluZVggPSBNYXRoLnJvdW5kKHNjYWxlKG1pZFBvaW50KSk7XG5cbiAgICAvLyBMZWZ0IGxpbmVcbiAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIGxlZnRMaW5lWCAtIDAuNSwgMCwgbGVmdExpbmVYIC0gMC41LCBoZWlnaHQpO1xuXG4gICAgLy8gUmlnaHQgbGluZVxuICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgcmlnaHRMaW5lWCAtIDAuNSwgMCwgcmlnaHRMaW5lWCAtIDAuNSwgaGVpZ2h0KTtcblxuICAgIC8vIE1pZCBsYWJlbFxuICAgIHZhciBtaWRZID0gaGVpZ2h0IC8gMjtcblxuICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5MT0NfRk9OVF9DT0xPUjtcbiAgICBjdHguZm9udCA9IHN0eWxlLkxPQ19GT05UX1NUWUxFO1xuICAgIGN0eC5maWxsVGV4dChtaWRQb2ludC50b0xvY2FsZVN0cmluZygpICsgJyBicCcsXG4gICAgICAgICAgICAgICAgIHJpZ2h0TGluZVggKyBzdHlsZS5MT0NfVElDS19MRU5HVEggKyBzdHlsZS5MT0NfVEVYVF9QQURESU5HLFxuICAgICAgICAgICAgICAgICBtaWRZICsgc3R5bGUuTE9DX1RFWFRfWV9PRkZTRVQpO1xuXG4gICAgLy8gQ29ubmVjdCBsYWJlbCB3aXRoIHRoZSByaWdodCBsaW5lXG4gICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCByaWdodExpbmVYIC0gMC41LCBtaWRZIC0gMC41LCByaWdodExpbmVYICsgc3R5bGUuTE9DX1RJQ0tfTEVOR1RIIC0gMC41LCBtaWRZIC0gMC41KTtcblxuICAgIC8vIGNsZWFuIHVwXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxufVxuXG5Mb2NhdGlvblRyYWNrLmRpc3BsYXlOYW1lID0gJ2xvY2F0aW9uJztcbkxvY2F0aW9uVHJhY2suZGVmYXVsdFNvdXJjZSA9IEVtcHR5U291cmNlLmNyZWF0ZSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IExvY2F0aW9uVHJhY2s7XG4iLCIvKipcbiAqIERhdGEgbWFuYWdlbWVudCBmb3IgUGlsZXVwVHJhY2suXG4gKlxuICogVGhpcyBjbGFzcyBncm91cHMgcGFpcmVkIHJlYWRzIGFuZCBwaWxlcyB0aGVtIHVwLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1N0cmFuZCwgQWxpZ25tZW50LCBBbGlnbm1lbnREYXRhU291cmNlfSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuaW1wb3J0IHR5cGUge1R3b0JpdFNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9Ud29CaXREYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtCYXNlUGFpcn0gZnJvbSAnLi9waWxldXB1dGlscyc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQge2FkZFRvUGlsZXVwLCBnZXRPcEluZm99IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcblxuLy8gVGhpcyBidW5kbGVzIGV2ZXJ5dGhpbmcgaW50cmluc2ljIHRvIHRoZSBhbGlnbm1lbnQgdGhhdCB3ZSBuZWVkIHRvIGRpc3BsYXlcbi8vIGl0LCBpLmUuIGV2ZXJ5dGhpbmcgbm90IGRlcGVuZGVuZCBvbiBzY2FsZS92aWV3cG9ydC5cbmV4cG9ydCB0eXBlIFZpc3VhbEFsaWdubWVudCA9IHtcbiAgcmVhZDogQWxpZ25tZW50O1xuICBzdHJhbmQ6IFN0cmFuZDtcbiAgcmVmTGVuZ3RoOiBudW1iZXI7ICAvLyBzcGFuIG9uIHRoZSByZWZlcmVuY2UgKGFjY291bnRpbmcgZm9yIGluZGVscylcbiAgbWlzbWF0Y2hlczogQXJyYXk8QmFzZVBhaXI+O1xuICBvcHM6IE9iamVjdFtdO1xufTtcblxuLy8gVGhpcyBpcyB0eXBpY2FsbHkgYSByZWFkIHBhaXIsIGJ1dCBtYXkgYmUgYSBzaW5nbGUgcmVhZCBpbiBzb21lIHNpdHVhdGlvbnMuXG5leHBvcnQgdHlwZSBWaXN1YWxHcm91cCA9IHtcbiAga2V5OiBzdHJpbmc7XG4gIHJvdzogbnVtYmVyOyAgLy8gcGlsZXVwIHJvdy5cbiAgc3BhbjogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPjsgIC8vIHRpcC10by10aXAgc3BhbiBmb3IgdGhlIHJlYWQgZ3JvdXBcbiAgaW5zZXJ0OiA/SW50ZXJ2YWw7ICAvLyBpbnRlcnZhbCBmb3IgdGhlIGNvbm5lY3RvciwgaWYgYXBwbGljYWJsZS5cbiAgYWxpZ25tZW50czogVmlzdWFsQWxpZ25tZW50W107XG59O1xuXG4vLyBJbnNlcnQgc2l6ZXMgd2l0aGluIHRoaXMgcGVyY2VudGlsZSByYW5nZSB3aWxsIGJlIGNvbnNpZGVyZWQgXCJub3JtYWxcIi5cbmNvbnN0IE1JTl9PVVRMSUVSX1BFUkNFTlRJTEUgPSAwLjU7XG5jb25zdCBNQVhfT1VUTElFUl9QRVJDRU5USUxFID0gOTkuNTtcbmNvbnN0IE1BWF9JTlNFUlRfU0laRSA9IDMwMDAwOyAgLy8gaWdub3JlIGluc2VydHMgbGFyZ2VyIHRoYW4gdGhpcyBpbiBjYWxjdWxhdGlvbnNcbmNvbnN0IE1JTl9SRUFEU19GT1JfT1VUTElFUlMgPSA1MDA7ICAvLyBtaW5pbXVtIHJlYWRzIGZvciByZWxpYWJsZSBzdGF0c1xuXG5leHBvcnQgdHlwZSBJbnNlcnRTdGF0cyA9IHtcbiAgbWluT3V0bGllclNpemU6IG51bWJlcjtcbiAgbWF4T3V0bGllclNpemU6IG51bWJlcjtcbn07XG5cbi8vIFRoaXMgY2xhc3MgcHJvdmlkZXMgZGF0YSBtYW5hZ2VtZW50IGZvciB0aGUgdmlzdWFsaXphdGlvbiwgZ3JvdXBpbmcgcGFpcmVkXG4vLyByZWFkcyBhbmQgbWFuYWdpbmcgdGhlIHBpbGV1cC5cbmNsYXNzIFBpbGV1cENhY2hlIHtcbiAgLy8gbWFwcyBncm91cEtleSB0byBWaXN1YWxHcm91cFxuICBncm91cHM6IHtba2V5OiBzdHJpbmddOiBWaXN1YWxHcm91cH07XG4gIHJlZlRvUGlsZXVwOiB7W2tleTogc3RyaW5nXTogQXJyYXk8SW50ZXJ2YWxbXT59O1xuICByZWZlcmVuY2VTb3VyY2U6IFR3b0JpdFNvdXJjZTtcbiAgdmlld0FzUGFpcnM6IGJvb2xlYW47XG4gIF9pbnNlcnRTdGF0czogP0luc2VydFN0YXRzO1xuXG4gIGNvbnN0cnVjdG9yKHJlZmVyZW5jZVNvdXJjZTogVHdvQml0U291cmNlLCB2aWV3QXNQYWlyczogYm9vbGVhbikge1xuICAgIHRoaXMuZ3JvdXBzID0ge307XG4gICAgdGhpcy5yZWZUb1BpbGV1cCA9IHt9O1xuICAgIHRoaXMucmVmZXJlbmNlU291cmNlID0gcmVmZXJlbmNlU291cmNlO1xuICAgIHRoaXMudmlld0FzUGFpcnMgPSB2aWV3QXNQYWlycztcbiAgICB0aGlzLl9pbnNlcnRTdGF0cyA9IG51bGw7XG4gIH1cblxuICAvLyByZWFkIG5hbWUgd291bGQgbWFrZSBhIGdvb2Qga2V5LCBidXQgcGFpcmVkIHJlYWRzIGZyb20gZGlmZmVyZW50IGNvbnRpZ3NcbiAgLy8gc2hvdWxkbid0IGJlIGdyb3VwZWQgdmlzdWFsbHkuIEhlbmNlIHdlIHVzZSByZWFkIG5hbWUgKyBjb250aWcuXG4gIGdyb3VwS2V5KHJlYWQ6IEFsaWdubWVudCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMudmlld0FzUGFpcnMpIHtcbiAgICAgIHJldHVybiBgJHtyZWFkLm5hbWV9OiR7cmVhZC5yZWZ9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlYWQuZ2V0S2V5KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gTG9hZCBhIG5ldyByZWFkIGludG8gdGhlIHZpc3VhbGl6YXRpb24gY2FjaGUuXG4gIC8vIENhbGxpbmcgdGhpcyBtdWx0aXBsZSB0aW1lcyB3aXRoIHRoZSBzYW1lIHJlYWQgaXMgYSBuby1vcC5cbiAgYWRkQWxpZ25tZW50KHJlYWQ6IEFsaWdubWVudCkge1xuICAgIHRoaXMuX2luc2VydFN0YXRzID0gbnVsbDsgIC8vIGludmFsaWRhdGVcbiAgICB2YXIga2V5ID0gdGhpcy5ncm91cEtleShyZWFkKSxcbiAgICAgICAgcmFuZ2UgPSByZWFkLmdldEludGVydmFsKCk7XG5cbiAgICBpZiAoIShrZXkgaW4gdGhpcy5ncm91cHMpKSB7XG4gICAgICB0aGlzLmdyb3Vwc1trZXldID0ge1xuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgcm93OiAtMSwgIC8vIFRCRFxuICAgICAgICBpbnNlcnQ6IG51bGwsICAvLyBUQkRcbiAgICAgICAgc3BhbjogcmFuZ2UsXG4gICAgICAgIGFsaWdubWVudHM6IFtdXG4gICAgICB9O1xuICAgIH1cbiAgICB2YXIgZ3JvdXAgPSB0aGlzLmdyb3Vwc1trZXldO1xuXG4gICAgaWYgKF8uZmluZChncm91cC5hbGlnbm1lbnRzLCBhID0+IGEucmVhZCA9PSByZWFkKSkge1xuICAgICAgcmV0dXJuOyAgLy8gd2UndmUgYWxyZWFkeSBnb3QgaXQuXG4gICAgfVxuXG4gICAgdmFyIG9wSW5mbyA9IGdldE9wSW5mbyhyZWFkLCB0aGlzLnJlZmVyZW5jZVNvdXJjZSk7XG4gICAgdmFyIHZpc3VhbEFsaWdubWVudCA9IHtcbiAgICAgIHJlYWQsXG4gICAgICBzdHJhbmQ6IHJlYWQuZ2V0U3RyYW5kKCksXG4gICAgICByZWZMZW5ndGg6IHJhbmdlLmxlbmd0aCgpLFxuICAgICAgb3BzOiBvcEluZm8ub3BzLFxuICAgICAgbWlzbWF0Y2hlczogb3BJbmZvLm1pc21hdGNoZXNcbiAgICB9O1xuICAgIGdyb3VwLmFsaWdubWVudHMucHVzaCh2aXN1YWxBbGlnbm1lbnQpO1xuXG4gICAgdmFyIG1hdGVJbnRlcnZhbCA9IG51bGw7XG4gICAgaWYgKGdyb3VwLmFsaWdubWVudHMubGVuZ3RoID09IDEpIHtcbiAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IHJlYWQgaW4gdGhlIGdyb3VwLiBJbmZlciBpdHMgc3BhbiBmcm9tIGl0cyBtYXRlIHByb3BlcnRpZXMuXG4gICAgICAvLyBUT0RPOiBpZiB0aGUgbWF0ZSBBbGlnbm1lbnQgaXMgYWxzbyBhdmFpbGFibGUsIGl0IHdvdWxkIGJlIGJldHRlciB0byB1c2UgdGhhdC5cbiAgICAgIGlmICh0aGlzLnZpZXdBc1BhaXJzKSB7XG4gICAgICAgIHZhciBtYXRlUHJvcHMgPSByZWFkLmdldE1hdGVQcm9wZXJ0aWVzKCk7XG4gICAgICAgIHZhciBpbnRlcnZhbHMgPSBbcmFuZ2VdO1xuICAgICAgICBpZiAobWF0ZVByb3BzICYmIG1hdGVQcm9wcy5yZWYgJiYgbWF0ZVByb3BzLnJlZiA9PSByZWFkLnJlZikge1xuICAgICAgICAgIG1hdGVJbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChtYXRlUHJvcHMucmVmLCBtYXRlUHJvcHMucG9zLCBtYXRlUHJvcHMucG9zICsgcmFuZ2UubGVuZ3RoKCkpO1xuICAgICAgICAgIGludGVydmFscy5wdXNoKG1hdGVJbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgZ3JvdXAgPSBfLmV4dGVuZChncm91cCwgc3BhbkFuZEluc2VydChpbnRlcnZhbHMpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdyb3VwLnNwYW4gPSByYW5nZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCEocmVhZC5yZWYgaW4gdGhpcy5yZWZUb1BpbGV1cCkpIHtcbiAgICAgICAgdGhpcy5yZWZUb1BpbGV1cFtyZWFkLnJlZl0gPSBbXTtcbiAgICAgIH1cbiAgICAgIHZhciBwaWxldXAgPSB0aGlzLnJlZlRvUGlsZXVwW3JlYWQucmVmXTtcbiAgICAgIGdyb3VwLnJvdyA9IGFkZFRvUGlsZXVwKGdyb3VwLnNwYW4uaW50ZXJ2YWwsIHBpbGV1cCk7XG4gICAgfSBlbHNlIGlmIChncm91cC5hbGlnbm1lbnRzLmxlbmd0aCA9PSAyKSB7XG4gICAgICAvLyBSZWZpbmUgdGhlIGNvbm5lY3RvclxuICAgICAgbWF0ZUludGVydmFsID0gZ3JvdXAuYWxpZ25tZW50c1swXS5yZWFkLmdldEludGVydmFsKCk7XG4gICAgICB2YXIge3NwYW4sIGluc2VydH0gPSBzcGFuQW5kSW5zZXJ0KFtyYW5nZSwgbWF0ZUludGVydmFsXSk7XG4gICAgICBncm91cC5pbnNlcnQgPSBpbnNlcnQ7XG4gICAgICBpZiAoaW5zZXJ0KSB7XG4gICAgICAgIGdyb3VwLnNwYW4gPSBzcGFuO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0aGlzIG11c3QgYmUgYSBjaGltZXJpYyByZWFkLlxuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZXMgcmVmZXJlbmNlIG1pc21hdGNoIGluZm9ybWF0aW9uIGZvciBwcmV2aW91c2x5LWxvYWRlZCByZWFkcy5cbiAgdXBkYXRlTWlzbWF0Y2hlcyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikge1xuICAgIGZvciAodmFyIGsgaW4gdGhpcy5ncm91cHMpIHtcbiAgICAgIHZhciByZWFkcyA9IHRoaXMuZ3JvdXBzW2tdLmFsaWdubWVudHM7XG4gICAgICBmb3IgKHZhciB2UmVhZCBvZiByZWFkcykge1xuICAgICAgICB2YXIgcmVhZCA9IHZSZWFkLnJlYWQ7XG4gICAgICAgIGlmIChyZWFkLmdldEludGVydmFsKCkuY2hySW50ZXJzZWN0cyhyYW5nZSkpIHtcbiAgICAgICAgICB2YXIgb3BJbmZvID0gZ2V0T3BJbmZvKHJlYWQsIHRoaXMucmVmZXJlbmNlU291cmNlKTtcbiAgICAgICAgICB2UmVhZC5taXNtYXRjaGVzID0gb3BJbmZvLm1pc21hdGNoZXM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwaWxldXBGb3JSZWYocmVmOiBzdHJpbmcpOiBBcnJheTxJbnRlcnZhbFtdPiB7XG4gICAgaWYgKHJlZiBpbiB0aGlzLnJlZlRvUGlsZXVwKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWZUb1BpbGV1cFtyZWZdO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYWx0ID0gdXRpbHMuYWx0Q29udGlnTmFtZShyZWYpO1xuICAgICAgaWYgKGFsdCBpbiB0aGlzLnJlZlRvUGlsZXVwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZlRvUGlsZXVwW2FsdF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gSG93IG1hbnkgcm93cyB0YWxsIGlzIHRoZSBwaWxldXAgZm9yIGEgZ2l2ZW4gcmVmPyBUaGlzIGlzIHJlbGF0ZWQgdG8gdGhlXG4gIC8vIG1heGltdW0gcmVhZCBkZXB0aC4gVGhpcyBpcyAnY2hyJy1hZ25vc3RpYy5cbiAgcGlsZXVwSGVpZ2h0Rm9yUmVmKHJlZjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICB2YXIgcGlsZXVwID0gdGhpcy5waWxldXBGb3JSZWYocmVmKTtcbiAgICByZXR1cm4gcGlsZXVwID8gcGlsZXVwLmxlbmd0aCA6IDA7XG4gIH1cblxuICAvLyBGaW5kIGdyb3VwcyBvdmVybGFwcGluZyB0aGUgcmFuZ2UuIFRoaXMgaXMgJ2NocictYWdub3N0aWMuXG4gIGdldEdyb3Vwc092ZXJsYXBwaW5nKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmlzdWFsR3JvdXBbXSB7XG4gICAgLy8gVE9ETzogc3BlZWQgdGhpcyB1cCB1c2luZyBhbiBpbnRlcnZhbCB0cmVlXG4gICAgcmV0dXJuIF8uZmlsdGVyKHRoaXMuZ3JvdXBzLCBncm91cCA9PiBncm91cC5zcGFuLmNockludGVyc2VjdHMocmFuZ2UpKTtcbiAgfVxuXG4gIC8vIERldGVybWluZSB0aGUgbnVtYmVyIG9mIGdyb3VwcyBhdCBhIGxvY3VzLlxuICAvLyBMaWtlIGdldEdyb3Vwc092ZXJsYXBwaW5nKHJhbmdlKS5sZW5ndGggPiAwLCBidXQgbW9yZSBlZmZpY2llbnQuXG4gIGFueUdyb3Vwc092ZXJsYXBwaW5nKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogYm9vbGVhbiB7XG4gICAgZm9yICh2YXIgayBpbiB0aGlzLmdyb3Vwcykge1xuICAgICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cHNba107XG4gICAgICBpZiAoZ3JvdXAuc3Bhbi5jaHJJbnRlcnNlY3RzKHJhbmdlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gUmUtc29ydCB0aGUgcGlsZXVwIHNvIHRoYXQgcmVhZHMgb3ZlcmxhcHBpbmcgdGhlIGxvY3VzIGFyZSBvbiB0b3AuXG4gIHNvcnRSZWFkc0F0KGNvbnRpZzogc3RyaW5nLCBwb3NpdGlvbjogbnVtYmVyKSB7XG4gICAgLy8gU3RyYXRlZ3k6IEZvciBlYWNoIHBpbGV1cCByb3csIGRldGVybWluZSB3aGV0aGVyIGl0IG92ZXJsYXBzIHRoZSBsb2N1cy5cbiAgICAvLyBUaGVuIHNvcnQgdGhlIGFycmF5IGluZGljZXMgdG8gZ2V0IGEgcGVybXV0YXRpb24uXG4gICAgLy8gQnVpbGQgYSBuZXcgcGlsZXVwIGJ5IHBlcm11dGluZyB0aGUgb2xkIHBpbGV1cFxuICAgIC8vIFVwZGF0ZSBhbGwgdGhlIGByb3dgIHByb3BlcnRpZXMgb2YgdGhlIHJlbGV2YW50IHZpc3VhbCBncm91cHNcblxuICAgIGNvbnN0IHBpbGV1cCA9IHRoaXMucGlsZXVwRm9yUmVmKGNvbnRpZyk7XG5cbiAgICAvLyBGaW5kIHRoZSBncm91cHMgZm9yIHdoaWNoIGFuIGFsaWdubWVudCBvdmVybGFwcyB0aGUgbG9jdXMuXG4gICAgdmFyIGdyb3VwcyA9IF8uZmlsdGVyKHRoaXMuZ3JvdXBzLFxuICAgICAgICAgIGdyb3VwID0+IF8uYW55KGdyb3VwLmFsaWdubWVudHMsXG4gICAgICAgICAgICAgIGEgPT4gYS5yZWFkLmdldEludGVydmFsKCkuY2hyQ29udGFpbnNMb2N1cyhjb250aWcsIHBvc2l0aW9uKSkpO1xuXG4gICAgLy8gRm9yIGVhY2ggcm93LCBmaW5kIHRoZSBsZWZ0LW1vc3QgcG9pbnQgKGZvciBzb3J0aW5nKS5cbiAgICB2YXIgcm93c092ZXJsYXBwaW5nID1cbiAgICAgICAgXy5tYXBPYmplY3QoXy5ncm91cEJ5KGdyb3VwcywgZyA9PiBnLnJvdyksXG4gICAgICAgICAgICAgICAgICAgIGdzID0+IF8ubWluKGdzLCBnPT5nLnNwYW4uc3RhcnQoKSkuc3Bhbi5zdGFydCgpKTtcblxuICAgIC8vIFNvcnQgZ3JvdXBzIGJ5IHdoZXRoZXIgdGhleSBvdmVybGFwLCB0aGVuIGJ5IHRoZWlyIHN0YXJ0LlxuICAgIC8vIFRPRE86IGlzIHRoZXJlIGFuIGVhc2llciB3YXkgdG8gY29uc3RydWN0IHRoZSBmb3J3YXJkIG1hcCBkaXJlY3RseT9cbiAgICB2YXIgcGVybXV0YXRpb24gPSBfLnNvcnRCeShfLnJhbmdlKDAsIHBpbGV1cC5sZW5ndGgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeCA9PiByb3dzT3ZlcmxhcHBpbmdbaWR4XSB8fCBJbmZpbml0eSk7XG4gICAgdmFyIG9sZFRvTmV3ID0gKFtdOiBudW1iZXJbXSk7XG4gICAgcGVybXV0YXRpb24uZm9yRWFjaCgob2xkSW5kZXgsIG5ld0luZGV4KSA9PiB7IG9sZFRvTmV3W29sZEluZGV4XSA9IG5ld0luZGV4OyB9KTtcbiAgICB2YXIgbmV3UGlsZXVwID0gXy5yYW5nZSgwLCBwaWxldXAubGVuZ3RoKS5tYXAoaSA9PiBwaWxldXBbb2xkVG9OZXdbaV1dKTtcblxuICAgIHZhciBub3JtUmVmID0gY29udGlnIGluIHRoaXMucmVmVG9QaWxldXAgPyBjb250aWcgOiB1dGlscy5hbHRDb250aWdOYW1lKGNvbnRpZyk7XG4gICAgdGhpcy5yZWZUb1BpbGV1cFtub3JtUmVmXSA9IG5ld1BpbGV1cDtcblxuICAgIF8uZWFjaCh0aGlzLmdyb3VwcywgZyA9PiB7XG4gICAgICBpZiAoZy5zcGFuLmNock9uQ29udGlnKGNvbnRpZykpIHtcbiAgICAgICAgZy5yb3cgPSBvbGRUb05ld1tnLnJvd107XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXRJbnNlcnRTdGF0cygpOiBJbnNlcnRTdGF0cyB7XG4gICAgaWYgKHRoaXMuX2luc2VydFN0YXRzKSByZXR1cm4gdGhpcy5faW5zZXJ0U3RhdHM7XG4gICAgdmFyIGluc2VydHMgPSBfLm1hcCh0aGlzLmdyb3VwcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGcgPT4gZy5hbGlnbm1lbnRzWzBdLnJlYWQuZ2V0SW5mZXJyZWRJbnNlcnRTaXplKCkpXG4gICAgICAgICAgICAgICAgICAgLmZpbHRlcih4ID0+IHggPCBNQVhfSU5TRVJUX1NJWkUpO1xuICAgIGNvbnN0IGluc2VydFN0YXRzID0gaW5zZXJ0cy5sZW5ndGggPj0gTUlOX1JFQURTX0ZPUl9PVVRMSUVSUyA/IHtcbiAgICAgIG1pbk91dGxpZXJTaXplOiB1dGlscy5jb21wdXRlUGVyY2VudGlsZShpbnNlcnRzLCBNSU5fT1VUTElFUl9QRVJDRU5USUxFKSxcbiAgICAgIG1heE91dGxpZXJTaXplOiB1dGlscy5jb21wdXRlUGVyY2VudGlsZShpbnNlcnRzLCBNQVhfT1VUTElFUl9QRVJDRU5USUxFKVxuICAgIH0gOiB7XG4gICAgICBtaW5PdXRsaWVyU2l6ZTogMCxcbiAgICAgIG1heE91dGxpZXJTaXplOiBJbmZpbml0eVxuICAgIH07XG5cbiAgICB0aGlzLl9pbnNlcnRTdGF0cyA9IGluc2VydFN0YXRzO1xuICAgIHJldHVybiBpbnNlcnRTdGF0cztcbiAgfVxufVxuXG4vLyBIZWxwZXIgbWV0aG9kIGZvciBhZGRSZWFkLlxuLy8gR2l2ZW4gMS0yIGludGVydmFscywgY29tcHV0ZSB0aGVpciBzcGFuIGFuZCBpbnNlcnQgKGludGVydmFsIGJldHdlZW4gdGhlbSkuXG4vLyBGb3Igb25lIGludGVydmFsLCB0aGVzZSBhcmUgYm90aCB0cml2aWFsLlxuLy8gVE9ETzogd2hhdCB0aGlzIGNhbGxzIGFuIFwiaW5zZXJ0XCIgaXMgbm90IHdoYXQgbW9zdCBwZW9wbGUgbWVhbiBieSB0aGF0LlxuZnVuY3Rpb24gc3BhbkFuZEluc2VydChpbnRlcnZhbHM6IENvbnRpZ0ludGVydmFsPHN0cmluZz5bXSkge1xuICBpZiAoaW50ZXJ2YWxzLmxlbmd0aCA9PSAxKSB7XG4gICAgcmV0dXJuIHtpbnNlcnQ6IG51bGwsIHNwYW46IGludGVydmFsc1swXX07XG4gIH0gZWxzZSBpZiAoaW50ZXJ2YWxzLmxlbmd0aCAhPTIpIHtcbiAgICB0aHJvdyBgQ2FsbGVkIHNwYW5BbmRJbnNlcnQgd2l0aCAke2ludGVydmFscy5sZW5ndGh9IFxcbm90aW4gWzEsIDJdYDtcbiAgfVxuXG4gIGlmICghaW50ZXJ2YWxzWzBdLmNock9uQ29udGlnKGludGVydmFsc1sxXS5jb250aWcpKSB7XG4gICAgcmV0dXJuIHNwYW5BbmRJbnNlcnQoW2ludGVydmFsc1swXV0pO1xuICB9XG4gIHZhciBpdjEgPSBpbnRlcnZhbHNbMF0uaW50ZXJ2YWwsXG4gICAgICBpdjIgPSBpbnRlcnZhbHNbMV0uaW50ZXJ2YWwsXG4gICAgICBpbnNlcnQgPSBpdjEuc3RhcnQgPCBpdjIuc3RhcnQgP1xuICAgICAgICAgIG5ldyBJbnRlcnZhbChpdjEuc3RvcCwgaXYyLnN0YXJ0KSA6XG4gICAgICAgICAgbmV3IEludGVydmFsKGl2Mi5zdG9wLCBpdjEuc3RhcnQpO1xuXG4gIHZhciBzcGFuID0gSW50ZXJ2YWwuYm91bmRpbmdJbnRlcnZhbChbaXYxLCBpdjJdKTtcbiAgcmV0dXJuIHtcbiAgICBpbnNlcnQsXG4gICAgc3BhbjogbmV3IENvbnRpZ0ludGVydmFsKGludGVydmFsc1swXS5jb250aWcsIHNwYW4uc3RhcnQsIHNwYW4uc3RvcClcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQaWxldXBDYWNoZTtcbiIsIi8qKlxuICogUGlsZXVwIHZpc3VhbGl6YXRpb24gb2YgQkFNIHNvdXJjZXMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtTdHJhbmQsIEFsaWdubWVudCwgQWxpZ25tZW50RGF0YVNvdXJjZX0gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCB0eXBlIHtUd29CaXRTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7QmFzZVBhaXJ9IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuaW1wb3J0IHR5cGUge1Zpc3VhbEFsaWdubWVudCwgVmlzdWFsR3JvdXAsIEluc2VydFN0YXRzfSBmcm9tICcuL1BpbGV1cENhY2hlJztcbmltcG9ydCB0eXBlIHtEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgdHlwZSBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgdHlwZSB7Vml6UHJvcHN9IGZyb20gJy4uL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzaGFsbG93RXF1YWxzIGZyb20gJ3NoYWxsb3ctZXF1YWxzJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5pbXBvcnQgc2NhbGUgZnJvbSAnLi4vc2NhbGUnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCB7Q2lnYXJPcH0gZnJvbSAnLi9waWxldXB1dGlscyc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IERpc3BsYXlNb2RlIGZyb20gJy4vRGlzcGxheU1vZGUnO1xuaW1wb3J0IFBpbGV1cENhY2hlIGZyb20gJy4vUGlsZXVwQ2FjaGUnO1xuaW1wb3J0IFRpbGVkQ2FudmFzIGZyb20gJy4vVGlsZWRDYW52YXMnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5cblxudmFyIFJFQURfSEVJR0hUID0gMTM7XG52YXIgUkVBRF9TUEFDSU5HID0gMjsgIC8vIHZlcnRpY2FsIHBpeGVscyBiZXR3ZWVuIHJlYWRzXG5cbnZhciBSRUFEX1NUUkFORF9BUlJPV19XSURUSCA9IDU7XG5cbi8vIFBoYW50b21KUyBkb2VzIG5vdCBzdXBwb3J0IHNldExpbmVEYXNoLlxuLy8gTm9kZSBkb2Vzbid0IGV2ZW4ga25vdyBhYm91dCB0aGUgc3ltYm9sLlxudmFyIFNVUFBPUlRTX0RBU0hFUyA9IHR5cGVvZihDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICEhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5zZXRMaW5lRGFzaDtcblxuY2xhc3MgUGlsZXVwVGlsZWRDYW52YXMgZXh0ZW5kcyBUaWxlZENhbnZhcyB7XG4gIGNhY2hlOiBQaWxldXBDYWNoZTtcbiAgb3B0aW9uczogT2JqZWN0O1xuXG4gIGNvbnN0cnVjdG9yKGNhY2hlOiBQaWxldXBDYWNoZSwgb3B0aW9uczogT2JqZWN0KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIHVwZGF0ZShuZXdPcHRpb25zOiBPYmplY3QpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBuZXdPcHRpb25zO1xuICB9XG5cbiAgaGVpZ2h0Rm9yUmVmKHJlZjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5waWxldXBIZWlnaHRGb3JSZWYocmVmKSAqXG4gICAgICAgICAgICAgICAgICAgIChSRUFEX0hFSUdIVCArIFJFQURfU1BBQ0lORyk7XG4gIH1cblxuICByZW5kZXIoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgc2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikge1xuICAgIHZhciByZWxheGVkUmFuZ2UgPVxuICAgICAgICBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCgpIC0gMSwgcmFuZ2Uuc3RvcCgpICsgMSk7XG4gICAgdmFyIHZHcm91cHMgPSB0aGlzLmNhY2hlLmdldEdyb3Vwc092ZXJsYXBwaW5nKHJlbGF4ZWRSYW5nZSk7XG4gICAgdmFyIGluc2VydFN0YXRzID0gdGhpcy5vcHRpb25zLmNvbG9yQnlJbnNlcnQgPyB0aGlzLmNhY2hlLmdldEluc2VydFN0YXRzKCkgOiBudWxsO1xuICAgIHJlbmRlclBpbGV1cChjdHgsIHNjYWxlLCByZWxheGVkUmFuZ2UsIGluc2VydFN0YXRzLCB0aGlzLm9wdGlvbnMuY29sb3JCeVN0cmFuZCwgdkdyb3Vwcyk7XG4gIH1cbn1cblxuXG4vLyBTaG91bGQgdGhlIENpZ2FyIG9wIGJlIHJlbmRlcmVkIHRvIHRoZSBzY3JlZW4/XG5mdW5jdGlvbiBpc1JlbmRlcmVkKG9wKSB7XG4gIHJldHVybiAob3Aub3AgPT0gQ2lnYXJPcC5NQVRDSCB8fFxuICAgICAgICAgIG9wLm9wID09IENpZ2FyT3AuREVMRVRFIHx8XG4gICAgICAgICAgb3Aub3AgPT0gQ2lnYXJPcC5JTlNFUlQpO1xufVxuXG4vLyBSZW5kZXIgYSBwb3J0aW9uIG9mIHRoZSBwaWxldXAgaW50byB0aGUgY2FudmFzLlxuZnVuY3Rpb24gcmVuZGVyUGlsZXVwKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0U3RhdHM6ID9JbnNlcnRTdGF0cyxcbiAgICAgICAgICAgICAgICAgICAgICBjb2xvckJ5U3RyYW5kOiBib29sZWFuLFxuICAgICAgICAgICAgICAgICAgICAgIHZHcm91cHM6IFZpc3VhbEdyb3VwW10pIHtcbiAgLy8gU2hvdWxkIG1pc21hdGNoZWQgYmFzZSBwYWlycyBiZSBzaG93biBhcyBibG9ja3Mgb2YgY29sb3Igb3IgYXMgbGV0dGVycz9cbiAgdmFyIHB4UGVyTGV0dGVyID0gc2NhbGUoMSkgLSBzY2FsZSgwKSxcbiAgICAgIG1vZGUgPSBEaXNwbGF5TW9kZS5nZXREaXNwbGF5TW9kZShweFBlckxldHRlciksXG4gICAgICBzaG93VGV4dCA9IERpc3BsYXlNb2RlLmlzVGV4dChtb2RlKTtcblxuICBmdW5jdGlvbiBkcmF3QXJyb3cocG9zOiBudW1iZXIsIHJlZkxlbmd0aDogbnVtYmVyLCB0b3A6IG51bWJlciwgZGlyZWN0aW9uOiAnTCcgfCAnUicpIHtcbiAgICB2YXIgbGVmdCA9IHNjYWxlKHBvcyArIDEpLFxuICAgICAgICByaWdodCA9IHNjYWxlKHBvcyArIHJlZkxlbmd0aCArIDEpLFxuICAgICAgICBib3R0b20gPSB0b3AgKyBSRUFEX0hFSUdIVCxcbiAgICAgICAgLy8gQXJyb3doZWFkcyBiZWNvbWUgYSBkaXN0cmFjdGlvbiBhcyB5b3Ugem9vbSBvdXQgYW5kIHRoZSByZWFkcyBnZXRcbiAgICAgICAgLy8gc2hvcnRlci4gVGhleSBzaG91bGQgbmV2ZXIgYmUgbW9yZSB0aGFuIDEvNiB0aGUgcmVhZCBsZW5ndGguXG4gICAgICAgIGFycm93U2l6ZSA9IE1hdGgubWluKFJFQURfU1RSQU5EX0FSUk9XX1dJRFRILCAocmlnaHQgLSBsZWZ0KSAvIDYpO1xuXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGlmIChkaXJlY3Rpb24gPT0gJ1InKSB7XG4gICAgICBjdHgubW92ZVRvKGxlZnQsIHRvcCk7XG4gICAgICBjdHgubGluZVRvKHJpZ2h0IC0gYXJyb3dTaXplLCB0b3ApO1xuICAgICAgY3R4LmxpbmVUbyhyaWdodCwgKHRvcCArIGJvdHRvbSkgLyAyKTtcbiAgICAgIGN0eC5saW5lVG8ocmlnaHQgLSBhcnJvd1NpemUsIGJvdHRvbSk7XG4gICAgICBjdHgubGluZVRvKGxlZnQsIGJvdHRvbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0eC5tb3ZlVG8ocmlnaHQsIHRvcCk7XG4gICAgICBjdHgubGluZVRvKGxlZnQgKyBhcnJvd1NpemUsIHRvcCk7XG4gICAgICBjdHgubGluZVRvKGxlZnQsICh0b3AgKyBib3R0b20pIC8gMik7XG4gICAgICBjdHgubGluZVRvKGxlZnQgKyBhcnJvd1NpemUsIGJvdHRvbSk7XG4gICAgICBjdHgubGluZVRvKHJpZ2h0LCBib3R0b20pO1xuICAgIH1cbiAgICBjdHguZmlsbCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZHJhd1NlZ21lbnQob3AsIHksIHZSZWFkKSB7XG4gICAgc3dpdGNoIChvcC5vcCkge1xuICAgICAgY2FzZSBDaWdhck9wLk1BVENIOlxuICAgICAgICBpZiAob3AuYXJyb3cpIHtcbiAgICAgICAgICBkcmF3QXJyb3cob3AucG9zLCBvcC5sZW5ndGgsIHksIG9wLmFycm93KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgeCA9IHNjYWxlKG9wLnBvcyArIDEpO1xuICAgICAgICAgIGN0eC5maWxsUmVjdCh4LCB5LCBzY2FsZShvcC5wb3MgKyBvcC5sZW5ndGggKyAxKSAtIHgsIFJFQURfSEVJR0hUKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBDaWdhck9wLkRFTEVURTpcbiAgICAgICAgdmFyIHgxID0gc2NhbGUob3AucG9zICsgMSksXG4gICAgICAgICAgICB4MiA9IHNjYWxlKG9wLnBvcyArIDEgKyBvcC5sZW5ndGgpLFxuICAgICAgICAgICAgeXAgPSB5ICsgUkVBRF9IRUlHSFQgLyAyIC0gMC41O1xuICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuREVMRVRFX0NPTE9SO1xuICAgICAgICBjdHguZmlsbFJlY3QoeDEsIHlwLCB4MiAtIHgxLCAxKTtcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ2lnYXJPcC5JTlNFUlQ6XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5JTlNFUlRfQ09MT1I7XG4gICAgICAgIHZhciB4MCA9IHNjYWxlKG9wLnBvcyArIDEpIC0gMiwgIC8vIHRvIGNvdmVyIGEgYml0IG9mIHRoZSBwcmV2aW91cyBzZWdtZW50XG4gICAgICAgICAgICB5MSA9IHkgLSAxLFxuICAgICAgICAgICAgeTIgPSB5ICsgUkVBRF9IRUlHSFQgKyAyO1xuICAgICAgICBjdHguZmlsbFJlY3QoeDAsIHkxLCAxLCB5MiAtIHkxKTtcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZHJhd0FsaWdubWVudCh2UmVhZDogVmlzdWFsQWxpZ25tZW50LCB5OiBudW1iZXIpIHtcbiAgICBjdHgucHVzaE9iamVjdCh2UmVhZCk7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBpZiAoY29sb3JCeVN0cmFuZCkge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IHZSZWFkLnN0cmFuZCA9PSAnKycgP1xuICAgICAgICAgIHN0eWxlLkFMSUdOTUVOVF9QTFVTX1NUUkFORF9DT0xPUiA6XG4gICAgICAgICAgc3R5bGUuQUxJR05NRU5UX01JTlVTX1NUUkFORF9DT0xPUjtcbiAgICB9XG4gICAgdlJlYWQub3BzLmZvckVhY2gob3AgPT4ge1xuICAgICAgaWYgKGlzUmVuZGVyZWQob3ApKSB7XG4gICAgICAgIGRyYXdTZWdtZW50KG9wLCB5LCB2UmVhZCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdlJlYWQubWlzbWF0Y2hlcy5mb3JFYWNoKGJwID0+IHJlbmRlck1pc21hdGNoKGJwLCB5KSk7XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgICBjdHgucG9wT2JqZWN0KCk7XG4gIH1cblxuICBmdW5jdGlvbiBkcmF3R3JvdXAodkdyb3VwOiBWaXN1YWxHcm91cCkge1xuICAgIGN0eC5zYXZlKCk7XG4gICAgaWYgKGluc2VydFN0YXRzICYmIHZHcm91cC5pbnNlcnQpIHtcbiAgICAgIHZhciBsZW4gPSB2R3JvdXAuc3Bhbi5sZW5ndGgoKTtcbiAgICAgIGlmIChsZW4gPCBpbnNlcnRTdGF0cy5taW5PdXRsaWVyU2l6ZSkge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ2JsdWUnO1xuICAgICAgfSBlbHNlIGlmIChsZW4gPiBpbnNlcnRTdGF0cy5tYXhPdXRsaWVyU2l6ZSkge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JlZCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQUxJR05NRU5UX0NPTE9SO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQUxJR05NRU5UX0NPTE9SO1xuICAgIH1cbiAgICB2YXIgeSA9IHlGb3JSb3codkdyb3VwLnJvdyk7XG4gICAgY3R4LnB1c2hPYmplY3Qodkdyb3VwKTtcbiAgICBpZiAodkdyb3VwLmluc2VydCkge1xuICAgICAgdmFyIHNwYW4gPSB2R3JvdXAuaW5zZXJ0LFxuICAgICAgICAgIHgxID0gc2NhbGUoc3Bhbi5zdGFydCArIDEpLFxuICAgICAgICAgIHgyID0gc2NhbGUoc3Bhbi5zdG9wICsgMSk7XG4gICAgICBjdHguZmlsbFJlY3QoeDEsIHkgKyBSRUFEX0hFSUdIVCAvIDIgLSAwLjUsIHgyIC0geDEsIDEpO1xuICAgIH1cbiAgICB2R3JvdXAuYWxpZ25tZW50cy5mb3JFYWNoKHZSZWFkID0+IGRyYXdBbGlnbm1lbnQodlJlYWQsIHkpKTtcbiAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck1pc21hdGNoKGJwOiBCYXNlUGFpciwgeTogbnVtYmVyKSB7XG4gICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBtaXNtYXRjaCBpcyBpbiBhIGRpZmZlcmVudCB0aWxlLCBmb3IgZXhhbXBsZS5cbiAgICBpZiAoIXJhbmdlLmludGVydmFsLmNvbnRhaW5zKGJwLnBvcykpIHJldHVybjtcblxuICAgIGN0eC5wdXNoT2JqZWN0KGJwKTtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5CQVNFX0NPTE9SU1ticC5iYXNlUGFpcl07XG4gICAgY3R4Lmdsb2JhbEFscGhhID0gb3BhY2l0eUZvclF1YWxpdHkoYnAucXVhbGl0eSk7XG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIGlmIChzaG93VGV4dCkge1xuICAgICAgLy8gMC41ID0gY2VudGVyZWRcbiAgICAgIGN0eC5maWxsVGV4dChicC5iYXNlUGFpciwgc2NhbGUoMSArIDAuNSArIGJwLnBvcyksIHkgKyBSRUFEX0hFSUdIVCAtIDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHguZmlsbFJlY3Qoc2NhbGUoMSArIGJwLnBvcyksIHksICBweFBlckxldHRlciAtIDEsIFJFQURfSEVJR0hUKTtcbiAgICB9XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgICBjdHgucG9wT2JqZWN0KCk7XG4gIH1cblxuICBjdHguZm9udCA9IHN0eWxlLlRJR0hUX1RFWFRfU1RZTEU7XG4gIHZHcm91cHMuZm9yRWFjaCh2R3JvdXAgPT4gZHJhd0dyb3VwKHZHcm91cCkpO1xufVxuXG5cbmZ1bmN0aW9uIHlGb3JSb3cocm93KSB7XG4gIHJldHVybiByb3cgKiAoUkVBRF9IRUlHSFQgKyBSRUFEX1NQQUNJTkcpO1xufVxuXG4vLyBUaGlzIGlzIGFkYXB0ZWQgZnJvbSBJR1YuXG52YXIgTUlOX1EgPSA1LCAgLy8gdGhlc2UgYXJlIFBocmVkLXNjYWxlZCBzY29yZXNcbiAgICBNQVhfUSA9IDIwLFxuICAgIFFfU0NBTEUgPSBzY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgICAgICAgIC5kb21haW4oW01JTl9RLCBNQVhfUV0pXG4gICAgICAgICAgICAgICAgICAgLnJhbmdlKFswLjEsIDAuOV0pXG4gICAgICAgICAgICAgICAgICAgLmNsYW1wKHRydWUpOyAgLy8gY2xhbXAgb3V0cHV0IHRvIFswLjEsIDAuOV1cbmZ1bmN0aW9uIG9wYWNpdHlGb3JRdWFsaXR5KHF1YWxpdHk6IG51bWJlcik6IG51bWJlciB7XG4gIHZhciBhbHBoYSA9IFFfU0NBTEUocXVhbGl0eSk7XG5cbiAgLy8gUm91bmQgYWxwaGEgdG8gbmVhcmVzdCAwLjFcbiAgYWxwaGEgPSBNYXRoLnJvdW5kKGFscGhhICogMTAgKyAwLjUpIC8gMTAuMDtcbiAgcmV0dXJuIE1hdGgubWluKDEuMCwgYWxwaGEpO1xufVxuXG50eXBlIE5ldHdvcmtTdGF0dXMgPSB7bnVtUmVxdWVzdHM/OiBudW1iZXIsIHN0YXR1cz86IHN0cmluZ307XG50eXBlIFN0YXRlID0ge1xuICBuZXR3b3JrU3RhdHVzOiA/TmV0d29ya1N0YXR1cztcbn07XG5cblxuY2xhc3MgUGlsZXVwVHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBwcm9wczogVml6UHJvcHMgJiB7IHNvdXJjZTogQWxpZ25tZW50RGF0YVNvdXJjZSB9O1xuICBzdGF0ZTogU3RhdGU7XG4gIGNhY2hlOiBQaWxldXBDYWNoZTtcbiAgdGlsZXM6IFBpbGV1cFRpbGVkQ2FudmFzO1xuICBzdGF0aWMgZGVmYXVsdE9wdGlvbnM6IHsgdmlld0FzUGFpcnM6IGJvb2xlYW4gfTtcbiAgc3RhdGljIGdldE9wdGlvbnNNZW51OiAob3B0aW9uczogT2JqZWN0KSA9PiBhbnk7XG4gIHN0YXRpYyBoYW5kbGVTZWxlY3RPcHRpb246IChrZXk6IHN0cmluZywgb2xkT3B0aW9uczogT2JqZWN0KSA9PiBPYmplY3Q7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFZpelByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBuZXR3b3JrU3RhdHVzOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIC8vIFRoZXNlIHN0eWxlcyBhbGxvdyB2ZXJ0aWNhbCBzY3JvbGxpbmcgdG8gc2VlIHRoZSBmdWxsIHBpbGV1cC5cbiAgICAvLyBBZGRpbmcgYSB2ZXJ0aWNhbCBzY3JvbGxiYXIgc2hyaW5rcyB0aGUgdmlzaWJsZSBhcmVhLCBidXQgd2UgaGF2ZSB0byBhY3RcbiAgICAvLyBhcyB0aG91Z2ggaXQgZG9lc24ndCwgc2luY2UgYWRqdXN0aW5nIHRoZSBzY2FsZSB3b3VsZCBwdXQgaXQgb3V0IG9mIHN5bmNcbiAgICAvLyB3aXRoIG90aGVyIHRyYWNrcy5cbiAgICB2YXIgY29udGFpbmVyU3R5bGVzID0ge1xuICAgICAgJ2hlaWdodCc6ICcxMDAlJ1xuICAgIH07XG5cbiAgICB2YXIgc3RhdHVzRWwgPSBudWxsLFxuICAgICAgICBuZXR3b3JrU3RhdHVzID0gdGhpcy5zdGF0ZS5uZXR3b3JrU3RhdHVzO1xuICAgIGlmIChuZXR3b3JrU3RhdHVzKSB7XG4gICAgICB2YXIgbWVzc2FnZSA9IHRoaXMuZm9ybWF0U3RhdHVzKG5ldHdvcmtTdGF0dXMpO1xuICAgICAgc3RhdHVzRWwgPSAoXG4gICAgICAgIDxkaXYgcmVmPSdzdGF0dXMnIGNsYXNzTmFtZT0nbmV0d29yay1zdGF0dXMnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSduZXR3b3JrLXN0YXR1cy1tZXNzYWdlJz5cbiAgICAgICAgICAgIExvYWRpbmcgYWxpZ25tZW50c+KApiAoe21lc3NhZ2V9KVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIHtzdGF0dXNFbH1cbiAgICAgICAgPGRpdiByZWY9J2NvbnRhaW5lcicgc3R5bGU9e2NvbnRhaW5lclN0eWxlc30+XG4gICAgICAgICAgPGNhbnZhcyByZWY9J2NhbnZhcycgb25DbGljaz17dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBmb3JtYXRTdGF0dXMoc3RhdHVzOiBOZXR3b3JrU3RhdHVzKTogc3RyaW5nIHtcbiAgICBpZiAoc3RhdHVzLm51bVJlcXVlc3RzKSB7XG4gICAgICB2YXIgcGx1cmFsUyA9IHN0YXR1cy5udW1SZXF1ZXN0cyA+IDEgPyAncycgOiAnJztcbiAgICAgIHJldHVybiBgaXNzdWVkICR7c3RhdHVzLm51bVJlcXVlc3RzfSByZXF1ZXN0JHtwbHVyYWxTfWA7XG4gICAgfSBlbHNlIGlmIChzdGF0dXMuc3RhdHVzKSB7XG4gICAgICByZXR1cm4gc3RhdHVzLnN0YXR1cztcbiAgICB9XG4gICAgdGhyb3cgJ2ludmFsaWQnO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5jYWNoZSA9IG5ldyBQaWxldXBDYWNoZSh0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZSwgdGhpcy5wcm9wcy5vcHRpb25zLnZpZXdBc1BhaXJzKTtcbiAgICB0aGlzLnRpbGVzID0gbmV3IFBpbGV1cFRpbGVkQ2FudmFzKHRoaXMuY2FjaGUsIHRoaXMucHJvcHMub3B0aW9ucyk7XG5cbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV3ZGF0YScsIHJhbmdlID0+IHtcbiAgICAgIHRoaXMudXBkYXRlUmVhZHMocmFuZ2UpO1xuICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlUmFuZ2UocmFuZ2UpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2Uub24oJ25ld2RhdGEnLCByYW5nZSA9PiB7XG4gICAgICB0aGlzLmNhY2hlLnVwZGF0ZU1pc21hdGNoZXMocmFuZ2UpO1xuICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlUmFuZ2UocmFuZ2UpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ldHdvcmtwcm9ncmVzcycsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogZX0pO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrZG9uZScsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogbnVsbH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICB2YXIgc2hvdWxkVXBkYXRlID0gZmFsc2U7XG4gICAgaWYgKHRoaXMucHJvcHMub3B0aW9ucyAhPSBwcmV2UHJvcHMub3B0aW9ucykge1xuICAgICAgdGhpcy5oYW5kbGVPcHRpb25zQ2hhbmdlKHByZXZQcm9wcy5vcHRpb25zKTtcbiAgICAgIHNob3VsZFVwZGF0ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHRoaXMucHJvcHMsIHByZXZQcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHModGhpcy5zdGF0ZSwgcHJldlN0YXRlKSB8fFxuICAgICAgICBzaG91bGRVcGRhdGUpIHtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZU9wdGlvbnNDaGFuZ2Uob2xkT3B0czogT2JqZWN0KSB7XG4gICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlQWxsKCk7XG5cbiAgICBpZiAob2xkT3B0cy52aWV3QXNQYWlycyAhPSB0aGlzLnByb3BzLm9wdGlvbnMudmlld0FzUGFpcnMpIHtcbiAgICAgIHRoaXMuY2FjaGUgPSBuZXcgUGlsZXVwQ2FjaGUodGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2UsIHRoaXMucHJvcHMub3B0aW9ucy52aWV3QXNQYWlycyk7XG4gICAgICB0aGlzLnRpbGVzID0gbmV3IFBpbGV1cFRpbGVkQ2FudmFzKHRoaXMuY2FjaGUsIHRoaXMucHJvcHMub3B0aW9ucyk7XG4gICAgICB0aGlzLnVwZGF0ZVJlYWRzKENvbnRpZ0ludGVydmFsLmZyb21HZW5vbWVSYW5nZSh0aGlzLnByb3BzLnJhbmdlKSk7XG4gICAgfSBlbHNlIGlmIChvbGRPcHRzLmNvbG9yQnlJbnNlcnQgIT0gdGhpcy5wcm9wcy5vcHRpb25zLmNvbG9yQnlJbnNlcnQpIHtcbiAgICAgIHRoaXMudGlsZXMudXBkYXRlKHRoaXMucHJvcHMub3B0aW9ucyk7XG4gICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH1cblxuICAgIGlmIChvbGRPcHRzLnNvcnQgIT0gdGhpcy5wcm9wcy5vcHRpb25zLnNvcnQpIHtcbiAgICAgIHRoaXMuaGFuZGxlU29ydCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIExvYWQgbmV3IHJlYWRzIGludG8gdGhlIHZpc3VhbGl6YXRpb24gY2FjaGUuXG4gIHVwZGF0ZVJlYWRzKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgdmFyIGFueUJlZm9yZSA9IHRoaXMuY2FjaGUuYW55R3JvdXBzT3ZlcmxhcHBpbmcocmFuZ2UpO1xuICAgIHRoaXMucHJvcHMuc291cmNlLmdldEFsaWdubWVudHNJblJhbmdlKHJhbmdlKVxuICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2gocmVhZCA9PiB0aGlzLmNhY2hlLmFkZEFsaWdubWVudChyZWFkKSk7XG5cbiAgICBpZiAoIWFueUJlZm9yZSAmJiB0aGlzLmNhY2hlLmFueUdyb3Vwc092ZXJsYXBwaW5nKHJhbmdlKSkge1xuICAgICAgLy8gSWYgdGhlc2UgYXJlIHRoZSBmaXJzdCByZWFkcyB0byBiZSBzaG93biBpbiB0aGUgdmlzaWJsZSByYW5nZSxcbiAgICAgIC8vIHRoZW4gc29ydCB0aGVtIHRvIGhpZ2hsaWdodCByZWFkcyBpbiB0aGUgY2VudGVyLlxuICAgICAgdGhpcy5oYW5kbGVTb3J0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIHRoZSB2aXN1YWxpemF0aW9uIHRvIHJlZmxlY3QgdGhlIGNhY2hlZCByZWFkcyAmXG4gIC8vIGN1cnJlbnRseS12aXNpYmxlIHJhbmdlLlxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSB0aGlzLnJlZnMuY2FudmFzLFxuICAgICAgICB3aWR0aCA9IHRoaXMucHJvcHMud2lkdGg7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwKSByZXR1cm47XG5cbiAgICAvLyBIZWlnaHQgY2FuIG9ubHkgYmUgY29tcHV0ZWQgYWZ0ZXIgdGhlIHBpbGV1cCBoYXMgYmVlbiB1cGRhdGVkLlxuICAgIHZhciBoZWlnaHQgPSB5Rm9yUm93KHRoaXMuY2FjaGUucGlsZXVwSGVpZ2h0Rm9yUmVmKHRoaXMucHJvcHMucmFuZ2UuY29udGlnKSk7XG5cbiAgICBkM3V0aWxzLnNpemVDYW52YXMoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIHZhciBjdHggPSBjYW52YXNVdGlscy5nZXRDb250ZXh0KGNhbnZhcyk7XG4gICAgdmFyIGR0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY3R4KTtcbiAgICB0aGlzLnJlbmRlclNjZW5lKGR0eCk7XG4gIH1cblxuICByZW5kZXJTY2VuZShjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICB2YXIgZ2Vub21lUmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlLFxuICAgICAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChnZW5vbWVSYW5nZS5jb250aWcsIGdlbm9tZVJhbmdlLnN0YXJ0LCBnZW5vbWVSYW5nZS5zdG9wKSxcbiAgICAgICAgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCk7XG5cbiAgICBjdHgucmVzZXQoKTtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICB0aGlzLnRpbGVzLnJlbmRlclRvU2NyZWVuKGN0eCwgcmFuZ2UsIHNjYWxlKTtcblxuICAgIC8vIFRPRE86IHRoZSBjZW50ZXIgbGluZSBzaG91bGQgZ28gYWJvdmUgYWxpZ25tZW50cywgYnV0IGJlbG93IG1pc21hdGNoZXNcbiAgICB0aGlzLnJlbmRlckNlbnRlckxpbmUoY3R4LCByYW5nZSwgc2NhbGUpO1xuXG4gICAgLy8gVGhpcyBpcyBhIGhhY2sgdG8gbWl0aWdhdGUgIzM1MFxuICAgIHZhciBlbCA9IGQzdXRpbHMuZmluZFBhcmVudCh0aGlzLnJlZnMuY2FudmFzLCAndHJhY2stY29udGVudCcpO1xuICAgIGlmIChlbCkgZWwuc2Nyb2xsTGVmdCA9IDA7XG4gIH1cblxuICAvLyBEcmF3IHRoZSBjZW50ZXIgbGluZShzKSwgd2hpY2ggb3JpZW50IHRoZSB1c2VyXG4gIHJlbmRlckNlbnRlckxpbmUoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgc2NhbGU6IChudW06IG51bWJlcikgPT4gbnVtYmVyKSB7XG4gICAgdmFyIG1pZFBvaW50ID0gTWF0aC5mbG9vcigocmFuZ2Uuc3RvcCgpICsgcmFuZ2Uuc3RhcnQoKSkgLyAyKSxcbiAgICAgICAgcmlnaHRMaW5lWCA9IE1hdGguY2VpbChzY2FsZShtaWRQb2ludCArIDEpKSxcbiAgICAgICAgbGVmdExpbmVYID0gTWF0aC5mbG9vcihzY2FsZShtaWRQb2ludCkpLFxuICAgICAgICBoZWlnaHQgPSBjdHguY2FudmFzLmhlaWdodDtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5saW5lV2lkdGggPSAxO1xuICAgIGlmIChTVVBQT1JUU19EQVNIRVMpIHtcbiAgICAgIGN0eC5zZXRMaW5lRGFzaChbNSwgNV0pO1xuICAgIH1cbiAgICBpZiAocmlnaHRMaW5lWCAtIGxlZnRMaW5lWCA8IDMpIHtcbiAgICAgIC8vIElmIHRoZSBsaW5lcyBhcmUgdmVyeSBjbG9zZSwgdGhlbiBqdXN0IGRyYXcgYSBjZW50ZXIgbGluZS5cbiAgICAgIHZhciBtaWRYID0gTWF0aC5yb3VuZCgobGVmdExpbmVYICsgcmlnaHRMaW5lWCkgLyAyKTtcbiAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgbWlkWCAtIDAuNSwgMCwgbWlkWCAtIDAuNSwgaGVpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCBsZWZ0TGluZVggLSAwLjUsIDAsIGxlZnRMaW5lWCAtIDAuNSwgaGVpZ2h0KTtcbiAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgcmlnaHRMaW5lWCAtIDAuNSwgMCwgcmlnaHRMaW5lWCAtIDAuNSwgaGVpZ2h0KTtcbiAgICB9XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIGhhbmRsZVNvcnQoKSB7XG4gICAgdmFyIHtzdGFydCwgc3RvcH0gPSB0aGlzLnByb3BzLnJhbmdlLFxuICAgICAgICBtaWRkbGUgPSAoc3RhcnQgKyBzdG9wKSAvIDI7XG4gICAgdGhpcy5jYWNoZS5zb3J0UmVhZHNBdCh0aGlzLnByb3BzLnJhbmdlLmNvbnRpZywgbWlkZGxlKTtcbiAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcbiAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKHJlYWN0RXZlbnQ6IGFueSkge1xuICAgIHZhciBldiA9IHJlYWN0RXZlbnQubmF0aXZlRXZlbnQsXG4gICAgICAgIHggPSBldi5vZmZzZXRYLFxuICAgICAgICB5ID0gZXYub2Zmc2V0WTtcbiAgICB2YXIgY3R4ID0gY2FudmFzVXRpbHMuZ2V0Q29udGV4dCh0aGlzLnJlZnMuY2FudmFzKTtcbiAgICB2YXIgdHJhY2tpbmdDdHggPSBuZXcgZGF0YUNhbnZhcy5DbGlja1RyYWNraW5nQ29udGV4dChjdHgsIHgsIHkpO1xuXG4gICAgdmFyIGdlbm9tZVJhbmdlID0gdGhpcy5wcm9wcy5yYW5nZSxcbiAgICAgICAgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoZ2Vub21lUmFuZ2UuY29udGlnLCBnZW5vbWVSYW5nZS5zdGFydCwgZ2Vub21lUmFuZ2Uuc3RvcCksXG4gICAgICAgIHNjYWxlID0gdGhpcy5nZXRTY2FsZSgpLFxuICAgICAgICAvLyBJZiBjbGljay10cmFja2luZyBnZXRzIHNsb3csIHRoaXMgcmFuZ2UgY291bGQgYmUgbmFycm93ZWQgdG8gb25lXG4gICAgICAgIC8vIGNsb3NlciB0byB0aGUgY2xpY2sgY29vcmRpbmF0ZSwgcmF0aGVyIHRoYW4gdGhlIHdob2xlIHZpc2libGUgcmFuZ2UuXG4gICAgICAgIHZHcm91cHMgPSB0aGlzLmNhY2hlLmdldEdyb3Vwc092ZXJsYXBwaW5nKHJhbmdlKTtcblxuICAgIHJlbmRlclBpbGV1cCh0cmFja2luZ0N0eCwgc2NhbGUsIHJhbmdlLCBudWxsLCBmYWxzZSwgdkdyb3Vwcyk7XG4gICAgdmFyIHZSZWFkID0gXy5maW5kKHRyYWNraW5nQ3R4LmhpdHNbMF0sIGhpdCA9PiBoaXQucmVhZCk7XG4gICAgdmFyIGFsZXJ0ID0gd2luZG93LmFsZXJ0IHx8IGNvbnNvbGUubG9nO1xuICAgIGlmICh2UmVhZCkge1xuICAgICAgYWxlcnQodlJlYWQucmVhZC5kZWJ1Z1N0cmluZygpKTtcbiAgICB9XG4gIH1cbn1cblxuUGlsZXVwVHJhY2suZGlzcGxheU5hbWUgPSAncGlsZXVwJztcblBpbGV1cFRyYWNrLmRlZmF1bHRPcHRpb25zID0ge1xuICB2aWV3QXNQYWlyczogZmFsc2UsXG4gIGNvbG9yQnlJbnNlcnQ6IHRydWUsXG4gIGNvbG9yQnlTdHJhbmQ6IGZhbHNlXG59O1xuXG5QaWxldXBUcmFjay5nZXRPcHRpb25zTWVudSA9IGZ1bmN0aW9uKG9wdGlvbnM6IE9iamVjdCk6IGFueSB7XG4gIHJldHVybiBbXG4gICAge2tleTogJ3ZpZXctcGFpcnMnLCBsYWJlbDogJ1ZpZXcgYXMgcGFpcnMnLCBjaGVja2VkOiBvcHRpb25zLnZpZXdBc1BhaXJzfSxcbiAgICAnLScsXG4gICAge2tleTogJ2NvbG9yLWluc2VydCcsIGxhYmVsOiAnQ29sb3IgYnkgaW5zZXJ0IHNpemUnLCBjaGVja2VkOiBvcHRpb25zLmNvbG9yQnlJbnNlcnR9LFxuICAgIHtrZXk6ICdjb2xvci1zdHJhbmQnLCBsYWJlbDogJ0NvbG9yIGJ5IHN0cmFuZCcsIGNoZWNrZWQ6IG9wdGlvbnMuY29sb3JCeVN0cmFuZH0sXG4gICAgJy0nLFxuICAgIHtrZXk6ICdzb3J0JywgbGFiZWw6ICdTb3J0IGFsaWdubWVudHMnfVxuICBdO1xufTtcblxudmFyIG1lc3NhZ2VJZCA9IDE7XG5cblBpbGV1cFRyYWNrLmhhbmRsZVNlbGVjdE9wdGlvbiA9IGZ1bmN0aW9uKGtleTogc3RyaW5nLCBvbGRPcHRpb25zOiBPYmplY3QpOiBPYmplY3Qge1xuICB2YXIgb3B0cyA9IF8uY2xvbmUob2xkT3B0aW9ucyk7XG4gIGlmIChrZXkgPT0gJ3ZpZXctcGFpcnMnKSB7XG4gICAgb3B0cy52aWV3QXNQYWlycyA9ICFvcHRzLnZpZXdBc1BhaXJzO1xuICAgIHJldHVybiBvcHRzO1xuICB9IGVsc2UgaWYgKGtleSA9PSAnY29sb3ItaW5zZXJ0Jykge1xuICAgIG9wdHMuY29sb3JCeUluc2VydCA9ICFvcHRzLmNvbG9yQnlJbnNlcnQ7XG4gICAgaWYgKG9wdHMuY29sb3JCeUluc2VydCkgb3B0cy5jb2xvckJ5U3RyYW5kID0gZmFsc2U7XG4gICAgcmV0dXJuIG9wdHM7XG4gIH0gZWxzZSBpZiAoa2V5ID09ICdjb2xvci1zdHJhbmQnKSB7XG4gICAgb3B0cy5jb2xvckJ5U3RyYW5kID0gIW9wdHMuY29sb3JCeVN0cmFuZDtcbiAgICBpZiAob3B0cy5jb2xvckJ5U3RyYW5kKSBvcHRzLmNvbG9yQnlJbnNlcnQgPSBmYWxzZTtcbiAgICByZXR1cm4gb3B0cztcbiAgfSBlbHNlIGlmIChrZXkgPT0gJ3NvcnQnKSB7XG4gICAgb3B0cy5zb3J0ID0gKG1lc3NhZ2VJZCsrKTtcbiAgICByZXR1cm4gb3B0cztcbiAgfVxuICByZXR1cm4gb2xkT3B0aW9uczsgIC8vIG5vIGNoYW5nZVxufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFBpbGV1cFRyYWNrO1xuIiwiLyoqXG4gKiBBIHRyYWNrIHdoaWNoIHNob3dzIGEgc2NhbGUgcHJvcG9ydGlvbmFsIHRvIHNsaWNlIG9mIHRoZSBnZW5vbWUgYmVpbmdcbiAqIHNob3duIGJ5IHRoZSByZWZlcmVuY2UgdHJhY2suIFRoaXMgdHJhY2sgdHJpZXMgdG8gc2hvdyBhIHNjYWxlIGluIGticCxcbiAqIG1icCBvciBnYnAgZGVwZW5kaW5nIG9uIHRoZSBzaXplIG9mIHRoZSB2aWV3IGFuZCBhbHNvIHRyaWVzIHRvIHJvdW5kIHRoZVxuICogc2NhbGUgc2l6ZSAoZS5nLiBwcmVmZXJzIFwiMSwwMDAgYnBcIiwgXCIxLDAwMCBrYnBcIiBvdmVyIFwiMSBrYnBcIiBhbmQgXCIxIG1icFwiKVxuICpcbiAqICAgICAgICAgICA8LS0tLS0tLS0tLSAzMCBicCAtLS0tLS0tLS0tPlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBFbXB0eVNvdXJjZSBmcm9tICcuLi9zb3VyY2VzL0VtcHR5U291cmNlJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgZGF0YUNhbnZhcyBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcblxuY2xhc3MgU2NhbGVUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHByb3BzOiBWaXpQcm9wcztcbiAgc3RhdGU6IHZvaWQ7ICAvLyBubyBzdGF0ZVxuICBzdGF0aWMgZGVmYXVsdFNvdXJjZTogT2JqZWN0O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBPYmplY3QpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIHJldHVybiA8Y2FudmFzIHJlZj0nY2FudmFzJyAvPjtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogYW55LCBwcmV2U3RhdGU6IGFueSkge1xuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgZ2V0RE9NTm9kZSgpOiBhbnkge1xuICAgIHJldHVybiBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgfVxuXG4gIHVwZGF0ZVZpc3VhbGl6YXRpb24oKSB7XG4gICAgdmFyIGNhbnZhcyA9IHRoaXMuZ2V0RE9NTm9kZSgpLFxuICAgICAgICB7cmFuZ2UsIHdpZHRoLCBoZWlnaHR9ID0gdGhpcy5wcm9wcztcblxuICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpKTtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgdmFyIHZpZXdTaXplID0gcmFuZ2Uuc3RvcCAtIHJhbmdlLnN0YXJ0ICsgMSxcbiAgICAgICAgbWlkWCA9IE1hdGgucm91bmQod2lkdGggLyAyKSxcbiAgICAgICAgbWlkWSA9IE1hdGgucm91bmQoaGVpZ2h0IC8gMik7XG5cbiAgICAvLyBNaWQgbGFiZWxcbiAgICB2YXIge3ByZWZpeCwgdW5pdH0gPSBkM3V0aWxzLmZvcm1hdFJhbmdlKHZpZXdTaXplKTtcbiAgICBjdHgubGluZVdpZHRoID0gMTtcbiAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuU0NBTEVfRk9OVF9DT0xPUjtcbiAgICBjdHguZm9udCA9IHN0eWxlLlNDQUxFX0ZPTlRfU1RZTEU7XG4gICAgY3R4LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgY3R4LmZpbGxUZXh0KHByZWZpeCArIFwiIFwiICsgdW5pdCxcbiAgICAgICAgICAgICAgICAgbWlkWCxcbiAgICAgICAgICAgICAgICAgbWlkWSArIHN0eWxlLlNDQUxFX1RFWFRfWV9PRkZTRVQpO1xuXG4gICAgLy8gTGVmdCBsaW5lXG4gICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCAwLjUsIG1pZFkgLSAwLjUsIG1pZFggLSBzdHlsZS5TQ0FMRV9MSU5FX1BBRERJTkcgLSAwLjUsIG1pZFkgLSAwLjUpO1xuICAgIC8vIExlZnQgYXJyb3dcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4Lm1vdmVUbygwLjUgKyBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFLCBtaWRZIC0gc3R5bGUuU0NBTEVfQVJST1dfU0laRSAtIDAuNSk7XG4gICAgY3R4LmxpbmVUbygwLjUsIG1pZFkgLSAwLjUpO1xuICAgIGN0eC5saW5lVG8oMC41ICsgc3R5bGUuU0NBTEVfQVJST1dfU0laRSwgbWlkWSArIHN0eWxlLlNDQUxFX0FSUk9XX1NJWkUgLSAwLjUpO1xuICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICBjdHguZmlsbCgpO1xuICAgIGN0eC5zdHJva2UoKTtcblxuICAgIC8vIFJpZ2h0IGxpbmVcbiAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIG1pZFggKyBzdHlsZS5TQ0FMRV9MSU5FX1BBRERJTkcgLSAwLjUsIG1pZFkgLSAwLjUsIHdpZHRoIC0gMC41LCBtaWRZIC0gMC41KTtcbiAgICAvLyBSaWdodCBhcnJvd1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHgubW92ZVRvKHdpZHRoIC0gc3R5bGUuU0NBTEVfQVJST1dfU0laRSAtIDAuNSwgbWlkWSAtIHN0eWxlLlNDQUxFX0FSUk9XX1NJWkUgLSAwLjUpO1xuICAgIGN0eC5saW5lVG8od2lkdGggLSAwLjUsIG1pZFkgLSAwLjUpO1xuICAgIGN0eC5saW5lVG8od2lkdGggLSBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFIC0gMC41LCBtaWRZICsgc3R5bGUuU0NBTEVfQVJST1dfU0laRSAtIDAuNSk7XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIGN0eC5maWxsKCk7XG4gICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgLy8gQ2xlYW4gdXAgYWZ0ZXJ3YXJkc1xuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cbn1cblxuU2NhbGVUcmFjay5kaXNwbGF5TmFtZSA9ICdzY2FsZSc7XG5TY2FsZVRyYWNrLmRlZmF1bHRTb3VyY2UgPSBFbXB0eVNvdXJjZS5jcmVhdGUoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTY2FsZVRyYWNrO1xuIiwiLyoqXG4gKiBBIGNhbnZhcyB3aGljaCBtYWludGFpbnMgYSBjYWNoZSBvZiBwcmV2aW91c2x5LXJlbmRlcmVkIHRpbGVzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7RGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gZnJvbSAnZGF0YS1jYW52YXMnO1xuXG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuaW1wb3J0IHNjYWxlIGZyb20gJy4uL3NjYWxlJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuXG50eXBlIFRpbGUgPSB7XG4gIHBpeGVsc1BlckJhc2U6IG51bWJlcjtcbiAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz47XG4gIGJ1ZmZlcjogSFRNTENhbnZhc0VsZW1lbnQ7XG59O1xuXG5jb25zdCBFUFNJTE9OID0gMWUtNjtcbmNvbnN0IE1JTl9QWF9QRVJfQlVGRkVSID0gNTAwO1xuXG5jb25zdCBERUJVR19SRU5ERVJfVElMRV9FREdFUyA9IGZhbHNlO1xuXG5jbGFzcyBUaWxlZENhbnZhcyB7XG4gIHRpbGVDYWNoZTogVGlsZVtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudGlsZUNhY2hlID0gW107XG4gIH1cblxuICByZW5kZXJUaWxlKHRpbGU6IFRpbGUpIHtcbiAgICB2YXIgcmFuZ2UgPSB0aWxlLnJhbmdlLFxuICAgICAgICBoZWlnaHQgPSB0aGlzLmhlaWdodEZvclJlZihyYW5nZS5jb250aWcpLFxuICAgICAgICB3aWR0aCA9IE1hdGgucm91bmQodGlsZS5waXhlbHNQZXJCYXNlICogcmFuZ2UubGVuZ3RoKCkpO1xuICAgIC8vIFRPRE86IGRvZXMgaXQgbWFrZSBzZW5zZSB0byByZS11c2UgY2FudmFzZXM/XG4gICAgdGlsZS5idWZmZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBkM3V0aWxzLnNpemVDYW52YXModGlsZS5idWZmZXIsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgLy8gVGhlIGZhciByaWdodCBlZGdlIG9mIHRoZSB0aWxlIGlzIHRoZSBzdGFydCBvZiB0aGUgX25leHRfIHJhbmdlJ3MgYmFzZVxuICAgIC8vIHBhaXIsIG5vdCB0aGUgc3RhcnQgb2YgdGhlIGxhc3Qgb25lIGluIHRoaXMgdGlsZS5cbiAgICB2YXIgc2MgPSBzY2FsZS5saW5lYXIoKS5kb21haW4oW3JhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSArIDFdKS5yYW5nZShbMCwgd2lkdGhdKTtcbiAgICB2YXIgY3R4ID0gY2FudmFzVXRpbHMuZ2V0Q29udGV4dCh0aWxlLmJ1ZmZlcik7XG4gICAgdmFyIGR0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY3R4KTtcbiAgICB0aGlzLnJlbmRlcihkdHgsIHNjLCByYW5nZSk7XG4gIH1cblxuICAvLyBDcmVhdGUgKGFuZCByZW5kZXIpIG5ldyB0aWxlcyB0byBmaWxsIHRoZSBnYXBzLlxuICBtYWtlTmV3VGlsZXMoZXhpc3RpbmdUaWxlczogSW50ZXJ2YWxbXSxcbiAgICAgICAgICAgICAgIHBpeGVsc1BlckJhc2U6IG51bWJlcixcbiAgICAgICAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVGlsZVtdIHtcbiAgICB2YXIgbmV3SW50ZXJ2YWxzID0gVGlsZWRDYW52YXMuZ2V0TmV3VGlsZVJhbmdlcyhcbiAgICAgICAgICBleGlzdGluZ1RpbGVzLCByYW5nZS5pbnRlcnZhbCwgcGl4ZWxzUGVyQmFzZSk7XG5cbiAgICB2YXIgbmV3VGlsZXMgPSBuZXdJbnRlcnZhbHMubWFwKGl2ID0+ICh7XG4gICAgICBwaXhlbHNQZXJCYXNlLFxuICAgICAgcmFuZ2U6IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIGl2LnN0YXJ0LCBpdi5zdG9wKSxcbiAgICAgIGJ1ZmZlcjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcbiAgICB9KSk7XG5cbiAgICAvLyBUT0RPOiBpdCB3b3VsZCBiZSBiZXR0ZXIgdG8gd3JhcCB0aGVzZSBjYWxscyBpbiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUsXG4gICAgLy8gc28gdGhhdCByZW5kZXJpbmcgaXMgZG9uZSBvZmYgdGhlIG1haW4gZXZlbnQgbG9vcC5cbiAgICBuZXdUaWxlcy5mb3JFYWNoKHRpbGUgPT4gdGhpcy5yZW5kZXJUaWxlKHRpbGUpKTtcbiAgICB0aGlzLnRpbGVDYWNoZSA9IHRoaXMudGlsZUNhY2hlLmNvbmNhdChuZXdUaWxlcyk7XG4gICAgdGhpcy50aWxlQ2FjaGUuc29ydCgoYSwgYikgPT4gQ29udGlnSW50ZXJ2YWwuY29tcGFyZShhLnJhbmdlLCBiLnJhbmdlKSk7XG4gICAgcmV0dXJuIG5ld1RpbGVzO1xuICB9XG5cbiAgcmVuZGVyVG9TY3JlZW4oY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICBzY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIpIHtcbiAgICB2YXIgcGl4ZWxzUGVyQmFzZSA9IHNjYWxlKDEpIC0gc2NhbGUoMCk7XG4gICAgdmFyIHRpbGVzQXRSZXMgPSB0aGlzLnRpbGVDYWNoZS5maWx0ZXIodGlsZSA9PiBNYXRoLmFicyh0aWxlLnBpeGVsc1BlckJhc2UgLSBwaXhlbHNQZXJCYXNlKSA8IEVQU0lMT04gJiYgcmFuZ2UuY2hyT25Db250aWcodGlsZS5yYW5nZS5jb250aWcpKTtcbiAgICB2YXIgaGVpZ2h0ID0gdGhpcy5oZWlnaHRGb3JSZWYocmFuZ2UuY29udGlnKTtcblxuICAgIHZhciBleGlzdGluZ0ludGVydmFscyA9IHRpbGVzQXRSZXMubWFwKHRpbGUgPT4gdGlsZS5yYW5nZS5pbnRlcnZhbCk7XG4gICAgaWYgKCFyYW5nZS5pbnRlcnZhbC5pc0NvdmVyZWRCeShleGlzdGluZ0ludGVydmFscykpIHtcbiAgICAgIHRpbGVzQXRSZXMgPSB0aWxlc0F0UmVzLmNvbmNhdCh0aGlzLm1ha2VOZXdUaWxlcyhleGlzdGluZ0ludGVydmFscywgcGl4ZWxzUGVyQmFzZSwgcmFuZ2UpKTtcbiAgICB9XG5cbiAgICB2YXIgdGlsZXMgPSB0aWxlc0F0UmVzLmZpbHRlcih0aWxlID0+IHJhbmdlLmNockludGVyc2VjdHModGlsZS5yYW5nZSkpO1xuXG4gICAgdGlsZXMuZm9yRWFjaCh0aWxlID0+IHtcbiAgICAgIHZhciBsZWZ0ID0gTWF0aC5yb3VuZChzY2FsZSh0aWxlLnJhbmdlLnN0YXJ0KCkpKSxcbiAgICAgICAgICBuZXh0TGVmdCA9IE1hdGgucm91bmQoc2NhbGUodGlsZS5yYW5nZS5zdG9wKCkgKyAxKSksXG4gICAgICAgICAgd2lkdGggPSBuZXh0TGVmdCAtIGxlZnQ7XG4gICAgICAvLyBEcmF3aW5nIGEgMHB4IHRhbGwgY2FudmFzIHRocm93cyBpbiBGaXJlZm94IGFuZCBQaGFudG9tSlMuXG4gICAgICBpZiAodGlsZS5idWZmZXIuaGVpZ2h0ID09PSAwKSByZXR1cm47XG4gICAgICAvLyBXZSBjYW4ndCBqdXN0IHRocm93IHRoZSBpbWFnZXMgb24gdGhlIHNjcmVlbiB3aXRob3V0IHNjYWxpbmcgZHVlIHRvXG4gICAgICAvLyByb3VuZGluZyBpc3N1ZXMsIHdoaWNoIGNhbiByZXN1bHQgaW4gMXB4IGdhcHMgb3Igb3ZlcmRyYXdpbmcuXG4gICAgICAvLyBXZSBhbHdheXMgaGF2ZTpcbiAgICAgIC8vICAgd2lkdGggLSB0aWxlLmJ1ZmZlci53aWR0aCBcXGluIHstMSwgMCwgKzF9XG4gICAgICBjdHguZHJhd0ltYWdlKHRpbGUuYnVmZmVyLCBcbiAgICAgICAgICAgICAgICAgICAgMCwgMCwgdGlsZS5idWZmZXIud2lkdGgsIHRpbGUuYnVmZmVyLmhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdCwgMCwgd2lkdGgsIHRpbGUuYnVmZmVyLmhlaWdodCk7XG5cbiAgICAgIGlmIChERUJVR19SRU5ERVJfVElMRV9FREdFUykge1xuICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIGxlZnQgLSAwLjUsIDAsIGxlZnQgLSAwLjUsIGhlaWdodCk7XG4gICAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgbmV4dExlZnQgLSAwLjUsIDAsIG5leHRMZWZ0IC0gMC41LCBoZWlnaHQpO1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaW52YWxpZGF0ZUFsbCgpIHtcbiAgICB0aGlzLnRpbGVDYWNoZSA9IFtdO1xuICB9XG5cbiAgaW52YWxpZGF0ZVJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbCkge1xuICAgIHRoaXMudGlsZUNhY2hlID0gdGhpcy50aWxlQ2FjaGUuZmlsdGVyKHRpbGUgPT4gIXRpbGUucmFuZ2UuY2hySW50ZXJzZWN0cyhyYW5nZSkpO1xuICB9XG5cbiAgaGVpZ2h0Rm9yUmVmKHJlZjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJztcbiAgfVxuXG4gIHJlbmRlcihkdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICBzY2FsZTogKHg6IG51bWJlcik9Pm51bWJlcixcbiAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogdm9pZCB7XG4gICAgdGhyb3cgJ05vdCBpbXBsZW1lbnRlZCc7XG4gIH1cblxuICAvLyByZXF1aXJlcyB0aGF0IGV4aXN0aW5nSW50ZXJ2YWxzIGJlIHNvcnRlZC5cbiAgc3RhdGljIGdldE5ld1RpbGVSYW5nZXMoZXhpc3RpbmdJbnRlcnZhbHM6IEludGVydmFsW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlOiBJbnRlcnZhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGl4ZWxzUGVyQmFzZTogbnVtYmVyKTogSW50ZXJ2YWxbXSB7XG4gICAgdmFyIGl2V2lkdGggPSBNYXRoLmNlaWwoTUlOX1BYX1BFUl9CVUZGRVIgLyBwaXhlbHNQZXJCYXNlKTtcbiAgICB2YXIgZmlyc3RTdGFydCA9IE1hdGguZmxvb3IocmFuZ2Uuc3RhcnQgLyBpdldpZHRoKSAqIGl2V2lkdGg7XG4gICAgdmFyIGl2cyA9IF8ucmFuZ2UoZmlyc3RTdGFydCwgcmFuZ2Uuc3RvcCwgaXZXaWR0aClcbiAgICAgICAgICAgICAgIC5tYXAoc3RhcnQgPT4gbmV3IEludGVydmFsKHN0YXJ0LCBzdGFydCArIGl2V2lkdGggLSAxKSlcbiAgICAgICAgICAgICAgIC5maWx0ZXIoaXYgPT4gIWl2LmlzQ292ZXJlZEJ5KGV4aXN0aW5nSW50ZXJ2YWxzKSk7XG5cbiAgICByZXR1cm4gdXRpbHMuZmxhdE1hcChpdnMsIGl2ID0+IGl2LmNvbXBsZW1lbnRJbnRlcnZhbHMoZXhpc3RpbmdJbnRlcnZhbHMpKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoaXYgPT4gaXYuaW50ZXJzZWN0cyhyYW5nZSkpO1xuICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUaWxlZENhbnZhcztcbiIsIi8qKlxuICogVmlzdWFsaXphdGlvbiBvZiB2YXJpYW50c1xuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7VmNmRGF0YVNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9WY2ZEYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtWYXJpYW50fSBmcm9tICcuLi9kYXRhL3ZjZic7XG5pbXBvcnQgdHlwZSB7RGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcblxuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCBzaGFsbG93RXF1YWxzIGZyb20gJ3NoYWxsb3ctZXF1YWxzJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHN0eWxlIGZyb20gJy4uL3N0eWxlJztcblxuXG5jbGFzcyBWYXJpYW50VHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBwcm9wczogVml6UHJvcHMgJiB7c291cmNlOiBWY2ZEYXRhU291cmNlfTtcbiAgc3RhdGU6IHZvaWQ7ICAvLyBubyBzdGF0ZVxuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBPYmplY3QpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICByZXR1cm4gPGNhbnZhcyBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfSAvPjtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuXG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ld2RhdGEnLCAoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFNjYWxlKCk6IFNjYWxlIHtcbiAgICByZXR1cm4gZDN1dGlscy5nZXRUcmFja1NjYWxlKHRoaXMucHJvcHMucmFuZ2UsIHRoaXMucHJvcHMud2lkdGgpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogYW55LCBwcmV2U3RhdGU6IGFueSkge1xuICAgIGlmICghc2hhbGxvd0VxdWFscyhwcmV2UHJvcHMsIHRoaXMucHJvcHMpIHx8XG4gICAgICAgICFzaGFsbG93RXF1YWxzKHByZXZTdGF0ZSwgdGhpcy5zdGF0ZSkpIHtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVZpc3VhbGl6YXRpb24oKSB7XG4gICAgdmFyIGNhbnZhcyA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLFxuICAgICAgICB7d2lkdGgsIGhlaWdodH0gPSB0aGlzLnByb3BzO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgaGVpZ2h0ICYgd2lkdGggYXJlIGtub3duLlxuICAgIGlmICh3aWR0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgdmFyIGN0eCA9IGNhbnZhc1V0aWxzLmdldENvbnRleHQoY2FudmFzKTtcbiAgICB2YXIgZHR4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjdHgpO1xuICAgIHRoaXMucmVuZGVyU2NlbmUoZHR4KTtcbiAgfVxuXG4gIHJlbmRlclNjZW5lKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgIHZhciByYW5nZSA9IHRoaXMucHJvcHMucmFuZ2UsXG4gICAgICAgIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3ApLFxuICAgICAgICB2YXJpYW50cyA9IHRoaXMucHJvcHMuc291cmNlLmdldEZlYXR1cmVzSW5SYW5nZShpbnRlcnZhbCksXG4gICAgICAgIHNjYWxlID0gdGhpcy5nZXRTY2FsZSgpLFxuICAgICAgICBoZWlnaHQgPSB0aGlzLnByb3BzLmhlaWdodCxcbiAgICAgICAgeSA9IGhlaWdodCAtIHN0eWxlLlZBUklBTlRfSEVJR0hUIC0gMTtcblxuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5zYXZlKCk7XG5cbiAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuVkFSSUFOVF9GSUxMO1xuICAgIGN0eC5zdHJva2VTdHlsZSA9IHN0eWxlLlZBUklBTlRfU1RST0tFO1xuICAgIHZhcmlhbnRzLmZvckVhY2godmFyaWFudCA9PiB7XG4gICAgICBjdHgucHVzaE9iamVjdCh2YXJpYW50KTtcbiAgICAgIHZhciB4ID0gTWF0aC5yb3VuZChzY2FsZSh2YXJpYW50LnBvc2l0aW9uKSk7XG4gICAgICB2YXIgd2lkdGggPSBNYXRoLnJvdW5kKHNjYWxlKHZhcmlhbnQucG9zaXRpb24gKyAxKSkgLSAxIC0geDtcbiAgICAgIGN0eC5maWxsUmVjdCh4IC0gMC41LCB5IC0gMC41LCB3aWR0aCwgc3R5bGUuVkFSSUFOVF9IRUlHSFQpO1xuICAgICAgY3R4LnN0cm9rZVJlY3QoeCAtIDAuNSwgeSAtIDAuNSwgd2lkdGgsIHN0eWxlLlZBUklBTlRfSEVJR0hUKTtcbiAgICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgICB9KTtcblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBoYW5kbGVDbGljayhyZWFjdEV2ZW50OiBhbnkpIHtcbiAgICB2YXIgZXYgPSByZWFjdEV2ZW50Lm5hdGl2ZUV2ZW50LFxuICAgICAgICB4ID0gZXYub2Zmc2V0WCxcbiAgICAgICAgeSA9IGV2Lm9mZnNldFksXG4gICAgICAgIGNhbnZhcyA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLFxuICAgICAgICBjdHggPSBjYW52YXNVdGlscy5nZXRDb250ZXh0KGNhbnZhcyksXG4gICAgICAgIHRyYWNraW5nQ3R4ID0gbmV3IGRhdGFDYW52YXMuQ2xpY2tUcmFja2luZ0NvbnRleHQoY3R4LCB4LCB5KTtcbiAgICB0aGlzLnJlbmRlclNjZW5lKHRyYWNraW5nQ3R4KTtcbiAgICB2YXIgdmFyaWFudCA9IHRyYWNraW5nQ3R4LmhpdCAmJiB0cmFja2luZ0N0eC5oaXRbMF07XG4gICAgdmFyIGFsZXJ0ID0gd2luZG93LmFsZXJ0IHx8IGNvbnNvbGUubG9nO1xuICAgIGlmICh2YXJpYW50KSB7XG4gICAgICBhbGVydChKU09OLnN0cmluZ2lmeSh2YXJpYW50KSk7XG4gICAgfVxuICB9XG59XG5cblZhcmlhbnRUcmFjay5kaXNwbGF5TmFtZSA9ICd2YXJpYW50cyc7XG5cbm1vZHVsZS5leHBvcnRzID0gVmFyaWFudFRyYWNrO1xuIiwiLyoqXG4gKiBVdGlsaXR5IGNvZGUgZm9yIHdvcmtpbmcgd2l0aCB0aGUgSFRNTCBjYW52YXMgZWxlbWVudC5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIFJldHVybiB0aGUgMkQgY29udGV4dCBmb3IgYSBjYW52YXMuIFRoaXMgaXMgaGVscGZ1bCBmb3IgdHlwZSBzYWZldHkuXG5mdW5jdGlvbiBnZXRDb250ZXh0KGVsOiBFbGVtZW50KTogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHtcbiAgLy8gVGhlIHR5cGVjYXN0cyB0aHJvdWdoIGBhbnlgIGFyZSB0byBmb29sIGZsb3cuXG4gIHZhciBjYW52YXMgPSAoKGVsIDogYW55KSA6IEhUTUxDYW52YXNFbGVtZW50KTtcbiAgdmFyIGN0eCA9ICgoY2FudmFzLmdldENvbnRleHQoJzJkJykgOiBhbnkpIDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTtcbiAgcmV0dXJuIGN0eDtcbn1cblxuLy8gU3Ryb2tlIGEgbGluZSBiZXR3ZWVuIHR3byBwb2ludHNcbmZ1bmN0aW9uIGRyYXdMaW5lKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKSB7XG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4Lm1vdmVUbyh4MSwgeTEpO1xuICBjdHgubGluZVRvKHgyLCB5Mik7XG4gIGN0eC5zdHJva2UoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldENvbnRleHQsXG4gIGRyYXdMaW5lXG59O1xuIiwiLyoqXG4gKiBEMy9ET00tcmVsYXRlZCB1dGlsaXR5IGZ1bmN0aW9ucy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHNjYWxlIGZyb20gJy4uL3NjYWxlJztcblxuLy8gU3VidHlwZSBvZiBHZW5vbWVSYW5nZVxudHlwZSBSYW5nZSA9IHtcbiAgc3RhcnQ6IG51bWJlcjtcbiAgc3RvcDogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgU2NhbGUgPSAobnVtOiBudW1iZXIpID0+IG51bWJlcjtcblxuLyoqXG4gKiBTaGFyZWQgeC1heGlzIHNjYWxpbmcgbG9naWMgZm9yIHRyYWNrc1xuICovXG5mdW5jdGlvbiBnZXRUcmFja1NjYWxlKHJhbmdlOiBSYW5nZSwgd2lkdGg6IG51bWJlcik6IGFueSB7XG4gIGlmICghcmFuZ2UpIHJldHVybiBzY2FsZS5saW5lYXIoKTtcbiAgdmFyIG9mZnNldFB4ID0gcmFuZ2Uub2Zmc2V0UHggfHwgMDtcbiAgcmV0dXJuIHNjYWxlLmxpbmVhcigpXG4gICAgICAgICAgLmRvbWFpbihbcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3AgKyAxXSkgIC8vIDEgYnAgd2lkZVxuICAgICAgICAgIC5yYW5nZShbLW9mZnNldFB4LCB3aWR0aCAtIG9mZnNldFB4XSk7XG59XG5cbnZhciBmb3JtYXRQcmVmaXhlcyA9IFtcIlwiLFwia1wiLFwiTVwiLFwiR1wiLFwiVFwiLFwiUFwiLFwiRVwiLFwiWlwiLFwiWVwiXTtcblxuLy8gUmV0dXJucyB0aGUgU0ktcHJlZml4IGZvciBudW0sIGFsYSBkMy5mb3JtYXRQcmVmaXguXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21ib3N0b2NrL2QzL2Jsb2IvNWI5ODFhMTgvc3JjL2Zvcm1hdC9mb3JtYXRQcmVmaXguanNcbmZ1bmN0aW9uIGZvcm1hdFByZWZpeCh2YWx1ZTogbnVtYmVyKSB7XG4gIHZhciBpID0gMDtcbiAgaWYgKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgKj0gLTE7XG4gICAgaSA9IDEgKyBNYXRoLmZsb29yKDFlLTEyICsgTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjEwKTtcbiAgICBpID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjQsIE1hdGguZmxvb3IoKGkgLSAxKSAvIDMpICogMykpO1xuICB9XG4gIHZhciBrID0gTWF0aC5wb3coMTAsIGkpO1xuICByZXR1cm4ge1xuICAgIHN5bWJvbDogZm9ybWF0UHJlZml4ZXNbaSAvIDNdLFxuICAgIHNjYWxlOiBkID0+IGQgLyBrXG4gIH07XG59XG5cbi8qKlxuICogRm9ybWF0cyB0aGUgc2l6ZSBvZiBhIHZpZXcgYW5kIGluZmVycyB3aGF0IHByZWZpeC91bml0IHRvIHNob3cuXG4gKiBUaGlzIGZvcm1hdHRpbmcgZm9sbG93cyBJR1YncyBjb252ZW50aW9ucyByZWdhcmRpbmcgcmFuZ2UgZGlzcGxheTpcbiAqICBcIjEgYnBcIiwgXCIxMDEgYnBcIiwgXCIxLDAwMSBicFwiLCBcIjEsMDAxIGticFwiLCAuLi5cbiAqL1xuZnVuY3Rpb24gZm9ybWF0UmFuZ2Uodmlld1NpemU6IG51bWJlcik6IHtwcmVmaXg6IHN0cmluZywgdW5pdDogc3RyaW5nfSB7XG4gIHZhciB0bXBWaWV3U2l6ZSA9IHZpZXdTaXplIC8gMTAwMCxcbiAgICAgIGZwcmVmaXggPSBmb3JtYXRQcmVmaXgoTWF0aC5tYXgoMSwgdG1wVmlld1NpemUpKSxcbiAgICAgIHVuaXQgPSBmcHJlZml4LnN5bWJvbCArIFwiYnBcIiwgIC8vIGJwLCBrYnAsIE1icCwgR2JwXG4gICAgICBwcmVmaXggPSBNYXRoLnJvdW5kKGZwcmVmaXguc2NhbGUodmlld1NpemUpKS50b0xvY2FsZVN0cmluZygpO1xuICByZXR1cm4ge3ByZWZpeCwgdW5pdH07XG59XG5cbi8qKlxuICogU2l6ZXMgYSBjYW52YXMgYXBwcm9wcmlhdGVseSBmb3IgdGhpcyBkZXZpY2UuXG4gKi9cbmZ1bmN0aW9uIHNpemVDYW52YXMoZWw6IEhUTUxDYW52YXNFbGVtZW50LCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICB2YXIgcmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgZWwud2lkdGggPSB3aWR0aCAqIHJhdGlvO1xuICBlbC5oZWlnaHQgPSBoZWlnaHQgKiByYXRpbztcbiAgZWwuc3R5bGUud2lkdGggPSB3aWR0aCArICdweCc7XG4gIGVsLnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XG4gIHZhciBjdHggPSBlbC5nZXRDb250ZXh0KCcyZCcpO1xuICBpZiAoY3R4ICE9PSBudWxsICYmIGN0eCBpbnN0YW5jZW9mIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgIGN0eC5zY2FsZShyYXRpbywgcmF0aW8pO1xuICB9XG59XG5cbi8qKlxuICogRmluZCB0aGUgY2xvc2VzdCBwYXJlbnQgd2l0aCBhIGdpdmVuIGNsYXNzIG5hbWUuXG4gKi9cbmZ1bmN0aW9uIGZpbmRQYXJlbnQoaW5FbDogRWxlbWVudCwgY2xhc3NOYW1lOiBzdHJpbmcpOiA/RWxlbWVudCB7XG4gIHZhciBlbCA9IGluRWw7ICAvLyB0aGlzIGlzIGZvciBGbG93LlxuICBkbyB7XG4gICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSByZXR1cm4gZWw7XG4gICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50O1xuICB9IHdoaWxlIChlbCk7XG4gIHJldHVybiBudWxsO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZm9ybWF0UmFuZ2UsXG4gIGdldFRyYWNrU2NhbGUsXG4gIHNpemVDYW52YXMsXG4gIGZpbmRQYXJlbnRcbn07XG4iLCIvKiogQGZsb3cgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgU2FtUmVhZCBmcm9tICcuLi9kYXRhL1NhbVJlYWQnO1xuaW1wb3J0IHR5cGUge0FsaWdubWVudCwgQ2lnYXJTeW1ib2x9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgdHlwZSBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5cbi8qKlxuICogR2l2ZW4gYSBsaXN0IG9mIEludGVydmFscywgcmV0dXJuIGEgcGFyYWxsZWwgbGlzdCBvZiByb3cgbnVtYmVycyBmb3IgZWFjaC5cbiAqIEFzc3VtaW5nIHJvd3MgPSBwaWxldXAocmVhZHMpLCB0aGVuIHlvdXIgZ3VhcmFudGVlIGlzIHRoYXRcbiAqIHJvd3NbaV0gPT0gcm93c1tqXSA9PiAhcmVhZHNbaV0uaW50ZXJzZWN0cyhyZWFkc1tqXSlcbiAqL1xuZnVuY3Rpb24gcGlsZXVwKHJlYWRzOiBJbnRlcnZhbFtdKTogbnVtYmVyW10ge1xuICB2YXIgcm93cyA9IG5ldyBBcnJheShyZWFkcy5sZW5ndGgpLFxuICAgICAgbGFzdFJlYWRzID0gW107ICAvLyByb3cgbnVtYmVyIC0tPiBsYXN0IEludGVydmFsIGluIHRoYXQgcm93XG5cbiAgLy8gRm9yIGVhY2ggcmVhZCwgZmluZCB0aGUgZmlyc3Qgcm93IHRoYXQgaXQgd2lsbCBmaXQgaW4uXG4gIC8vIFRoaXMgaXMgcG90ZW50aWFsbHkgTyhuXjIpIGluIHRoZSBudW1iZXIgb2YgcmVhZHM7IHRoZXJlJ3MgcHJvYmFibHkgYVxuICAvLyBiZXR0ZXIgd2F5LlxuICBmb3IgKHZhciBpID0gMDsgaSA8IHJlYWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHIgPSByZWFkc1tpXTtcbiAgICB2YXIgcm93TnVtID0gbGFzdFJlYWRzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxhc3RSZWFkcy5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKCFyLmludGVyc2VjdHMobGFzdFJlYWRzW2pdKSkge1xuICAgICAgICByb3dOdW0gPSBqO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcm93c1tpXSA9IHJvd051bTtcbiAgICBsYXN0UmVhZHNbcm93TnVtXSA9IHI7XG4gIH1cblxuICByZXR1cm4gcm93cztcbn1cblxuLyoqXG4gKiBBZGQgYSByZWFkIHRvIGFuIGV4aXN0aW5nIHBpbGV1cC5cbiAqIHBpbGV1cCBtYXBzIHtyb3cgLS0+IHJlYWRzIGluIHRoYXQgcm93fVxuICogVGhpcyBtb2RpZmllcyBwaWxldXAgYnkgaW5zZXJ0aW5nIHRoZSByZWFkIGluIHRoZSBhcHByb3ByaWF0ZSByb3cuXG4gKiBSZXR1cm5zIHRoZSBjaG9zZW4gcm93IG51bWJlci5cbiAqL1xuZnVuY3Rpb24gYWRkVG9QaWxldXAocmVhZDogSW50ZXJ2YWwsIHBpbGV1cDogQXJyYXk8SW50ZXJ2YWxbXT4pOiBudW1iZXIge1xuICB2YXIgY2hvc2VuUm93ID0gLTE7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGlsZXVwLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHJlYWRzID0gcGlsZXVwW2ldO1xuICAgIHZhciBvayA9IHRydWU7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCByZWFkcy5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKHJlYWRzW2pdLmludGVyc2VjdHMocmVhZCkpIHtcbiAgICAgICAgb2sgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9rKSB7XG4gICAgICBjaG9zZW5Sb3cgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKGNob3NlblJvdyA9PSAtMSkge1xuICAgIGNob3NlblJvdyA9IHBpbGV1cC5sZW5ndGg7XG4gICAgcGlsZXVwW2Nob3NlblJvd10gPSBbXTsgIC8vIGdvIGRlZXBlclxuICB9XG5cbiAgcGlsZXVwW2Nob3NlblJvd10ucHVzaChyZWFkKTtcbiAgcmV0dXJuIGNob3NlblJvdztcbn1cblxuZXhwb3J0IHR5cGUgQmFzZVBhaXIgPSB7XG4gIHBvczogbnVtYmVyO1xuICBiYXNlUGFpcjogc3RyaW5nO1xuICBxdWFsaXR5OiBudW1iZXI7XG59XG5cbmZ1bmN0aW9uIGZpbmRNaXNtYXRjaGVzKHJlZmVyZW5jZTogc3RyaW5nLCBzZXE6IHN0cmluZywgcmVmUG9zOiBudW1iZXIsIHNjb3JlczogbnVtYmVyW10pOiBCYXNlUGFpcltdIHtcbiAgdmFyIG91dCA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHNlcS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwb3MgPSByZWZQb3MgKyBpLFxuICAgICAgICByZWYgPSByZWZlcmVuY2UuY2hhckF0KGkpLFxuICAgICAgICBiYXNlUGFpciA9IHNlcS5jaGFyQXQoaSk7XG4gICAgaWYgKHJlZiAhPSBiYXNlUGFpciAmJiByZWYgIT0gJy4nKSB7XG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHBvcyxcbiAgICAgICAgYmFzZVBhaXIsXG4gICAgICAgIHF1YWxpdHk6IHNjb3Jlc1tpXVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXQ7XG59XG5cbi8vIERldGVybWluZSB3aGljaCBhbGlnbm1lbnQgc2VnbWVudCB0byByZW5kZXIgYXMgYW4gYXJyb3cuXG4vLyBUaGlzIGlzIGVpdGhlciB0aGUgZmlyc3Qgb3IgbGFzdCAnTScgc2VjdGlvbiwgZXhjbHVkaW5nIHNvZnQgY2xpcHBpbmcuXG5mdW5jdGlvbiBnZXRBcnJvd0luZGV4KHJlYWQ6IEFsaWdubWVudCk6IG51bWJlciB7XG4gIHZhciBpLCBvcCwgb3BzID0gcmVhZC5jaWdhck9wcztcbiAgaWYgKHJlYWQuZ2V0U3RyYW5kKCkgPT0gJy0nKSB7XG4gICAgZm9yIChpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgb3AgPSBvcHNbaV07XG4gICAgICBpZiAob3Aub3AgPT0gJ1MnKSBjb250aW51ZTtcbiAgICAgIGlmIChvcC5vcCA9PSAnTScpIHJldHVybiBpO1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKGkgPSBvcHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIG9wID0gb3BzW2ldO1xuICAgICAgaWYgKG9wLm9wID09ICdTJykgY29udGludWU7XG4gICAgICBpZiAob3Aub3AgPT0gJ00nKSByZXR1cm4gaTtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG4vLyBUaGUgY29tbWVudHMgYmVsb3cgY29tZSBmcm9tIHRoZSBTQU0gc3BlY1xudmFyIENpZ2FyT3AgPSB7XG4gIE1BVENIOiAnTScsICAvLyBhbGlnbm1lbnQgbWF0Y2ggKGNhbiBiZSBhIHNlcXVlbmNlIG1hdGNoIG9yIG1pc21hdGNoKVxuICBJTlNFUlQ6ICdJJywgIC8vIGluc2VydGlvbiB0byB0aGUgcmVmZXJlbmNlXG4gIERFTEVURTogJ0QnLCAgLy8gZGVsZXRpb24gZnJvbSB0aGUgcmVmZXJlbmNlXG4gIFNLSVA6ICdOJywgIC8vIHNraXBwZWQgcmVnaW9uIGZyb20gdGhlIHJlZmVyZW5jZVxuICBTT0ZUQ0xJUDogJ1MnLCAgLy8gc29mdCBjbGlwcGluZyAoY2xpcHBlZCBzZXF1ZW5jZXMgcHJlc2VudCBpbiBTRVEpXG4gIEhBUkRDTElQOiAnSCcsICAvLyBoYXJkIGNsaXBwaW5nIChjbGlwcGVkIHNlcXVlbmNlcyBOT1QgcHJlc2VudCBpbiBTRVEpXG4gIFBBRERJTkc6ICdQJywgIC8vIHBhZGRpbmcgKHNpbGVudCBkZWxldGlvbiBmcm9tIHBhZGRlZCByZWZlcmVuY2UpXG4gIFNFUU1BVENIOiAnPScsICAvLyBzZXF1ZW5jZSBtYXRjaFxuICBTRVFNSVNNQVRDSDogJ1gnICAvLyBzZXF1ZW5jZSBtaXNtYXRjaFxufTtcblxudHlwZSBPcCA9IHtcbiAgb3A6IENpZ2FyU3ltYm9sO1xuICBsZW5ndGg6IG51bWJlcjtcbiAgcG9zOiBudW1iZXI7XG4gIGFycm93OiA/KCdMJ3wnUicpO1xufVxuXG5leHBvcnQgdHlwZSBPcEluZm8gPSB7XG4gIG9wczogT3BbXSxcbiAgbWlzbWF0Y2hlczogQmFzZVBhaXJbXVxufVxuXG4vLyBCcmVha3MgdGhlIHJlYWQgZG93biBpbnRvIENpZ2FyIE9wcyBzdWl0YWJsZSBmb3IgZGlzcGxheVxuZnVuY3Rpb24gZ2V0T3BJbmZvKHJlYWQ6IEFsaWdubWVudCwgcmVmZXJlbmNlU291cmNlOiBPYmplY3QpOiBPcEluZm8ge1xuICB2YXIgb3BzID0gcmVhZC5jaWdhck9wcztcblxuICB2YXIgcmFuZ2UgPSByZWFkLmdldEludGVydmFsKCksXG4gICAgICBzdGFydCA9IHJhbmdlLnN0YXJ0KCksXG4gICAgICBzZXEgPSByZWFkLmdldFNlcXVlbmNlKCksXG4gICAgICBzY29yZXMgPSByZWFkLmdldFF1YWxpdHlTY29yZXMoKSxcbiAgICAgIHNlcVBvcyA9IDAsXG4gICAgICByZWZQb3MgPSBzdGFydCxcbiAgICAgIGFycm93SW5kZXggPSBnZXRBcnJvd0luZGV4KHJlYWQpO1xuXG4gIHZhciByZXN1bHQgPSBbXTtcbiAgdmFyIG1pc21hdGNoZXMgPSAoW106IEJhc2VQYWlyW10pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBvcCA9IG9wc1tpXTtcbiAgICBpZiAob3Aub3AgPT0gJ00nKSB7XG4gICAgICB2YXIgcmVmID0gcmVmZXJlbmNlU291cmNlLmdldFJhbmdlQXNTdHJpbmcoe1xuICAgICAgICBjb250aWc6IHJhbmdlLmNvbnRpZyxcbiAgICAgICAgc3RhcnQ6IHJlZlBvcyxcbiAgICAgICAgc3RvcDogcmVmUG9zICsgb3AubGVuZ3RoIC0gMVxuICAgICAgfSk7XG4gICAgICB2YXIgbVNlcSA9IHNlcS5zbGljZShzZXFQb3MsIHNlcVBvcyArIG9wLmxlbmd0aCk7XG4gICAgICBtaXNtYXRjaGVzID0gbWlzbWF0Y2hlcy5jb25jYXQoZmluZE1pc21hdGNoZXMocmVmLCBtU2VxLCByZWZQb3MsIHNjb3JlcykpO1xuICAgIH1cblxuICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgIG9wOiBvcC5vcCxcbiAgICAgIGxlbmd0aDogb3AubGVuZ3RoLFxuICAgICAgcG9zOiByZWZQb3MsXG4gICAgICBhcnJvdzogbnVsbFxuICAgIH0pO1xuXG4gICAgLy8gVGhlc2UgYXJlIHRoZSBjaWdhciBvcGVyYXRpb25zIHdoaWNoIGFkdmFuY2UgcG9zaXRpb24gaW4gdGhlIHJlZmVyZW5jZVxuICAgIHN3aXRjaCAob3Aub3ApIHtcbiAgICAgIGNhc2UgQ2lnYXJPcC5NQVRDSDpcbiAgICAgIGNhc2UgQ2lnYXJPcC5ERUxFVEU6XG4gICAgICBjYXNlIENpZ2FyT3AuU0tJUDpcbiAgICAgIGNhc2UgQ2lnYXJPcC5TRVFNQVRDSDpcbiAgICAgIGNhc2UgQ2lnYXJPcC5TRVFNSVNNQVRDSDpcbiAgICAgICAgcmVmUG9zICs9IG9wLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvLyBUaGVzZSBhcmUgdGhlIGNpZ2FyIG9wZXJhdGlvbnMgd2hpY2ggYWR2YW5jZSB0aGUgcGVyLWFsaWdubWVudCBzZXF1ZW5jZS5cbiAgICBzd2l0Y2ggKG9wLm9wKSB7XG4gICAgICBjYXNlIENpZ2FyT3AuTUFUQ0g6XG4gICAgICBjYXNlIENpZ2FyT3AuSU5TRVJUOlxuICAgICAgY2FzZSBDaWdhck9wLlNPRlRDTElQOlxuICAgICAgY2FzZSBDaWdhck9wLlNFUU1BVENIOlxuICAgICAgY2FzZSBDaWdhck9wLlNFUU1JU01BVENIOlxuICAgICAgICBzZXFQb3MgKz0gb3AubGVuZ3RoO1xuICAgIH1cblxuICB9XG5cbiAgaWYgKGFycm93SW5kZXggPj0gMCkge1xuICAgIHJlc3VsdFthcnJvd0luZGV4XS5hcnJvdyA9IHJlYWQuZ2V0U3RyYW5kKCkgPT0gJy0nID8gJ0wnIDogJ1InO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBvcHM6IHJlc3VsdCxcbiAgICBtaXNtYXRjaGVzXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBwaWxldXAsXG4gIGFkZFRvUGlsZXVwLFxuICBnZXRPcEluZm8sXG4gIENpZ2FyT3Bcbn07XG4iXX0=
